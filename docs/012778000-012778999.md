# StackOverflow 问答 12778000-12778999

# jquery - 模拟点击不起作用... jQuery

> ID：12778000
> 
> 赞同：2
> 
> 时间：2012-10-08T08:35:39.813
> 
> 标签：jquery, triggers, click, simulate

如果 td 的类是“nee”，我正在尝试使用 jQuery 模拟点击。不知何故，所有选项（如触发器）和文档就绪点击都不起作用......

HTML：

```
<td align="center" class="one nee">
   <img class="img-swap" src="images/nee.png" alt="Aanwezigheid"/>
</td> 
```

触发动作：

```
 $(document).ready(function(){ 
          $('#some-id').trigger('click'); 
    }); 
```

HTML 返回的图像是一个变量，标准值为“ja.png”。但是一旦在数据库中将该项目设置为 no，图像就会更改为 nee.png。但是当它被触发时，我希望输入字段出现，就像我单击 ja.png 更改为 nee.png 时它们出现的方式一样。这是淡入的。它单独工作。但我无法模拟点击。

图像更改代码：

```
 $(document).ready(function(){
          $(".img-swap").click("click", function() {
            if ($(this).attr("class") == "img-swap") {
              this.src = this.src.replace("ja","nee");
            } else {
              this.src = this.src.replace("nee","ja");
            }
            $(this).toggleClass("ja");
          });
         }); 
```

淡入淡出动作的代码：

```
 $(document).ready(function(){       
            $(".nee").trigger("click");
            $("td.one").click("click", function(){

                if ($(this).parent().find("td.two, td.three").hasClass("toggled")){
                    $(this).parent().find("td.two").fadeOut(400);
                    $(this).parent().find("td.three").fadeOut(400);
                    $(this).parent().find("td.two").removeClass("toggled");
                    $(this).parent().find("td.three").removeClass("toggled");

                } else {

                    if ($(this).parent().find("td.three").hasClass("DoNotWant")){
                        $(this).parent().find("td.three").fadeOut(400);
                        $(this).parent().find("td.three").toggleClass("DoNotWant");
                    } else {
                        $(this).parent().find("td.three").fadeIn(400);
                        $(this).parent().find("td.three").toggleClass("toggled");
                    }

                    $(this).parent().find("td.two").fadeIn(400);
                    $(this).parent().find("td.two").toggleClass("toggled");
                }                   
            });

            $("td.two").click("click", function(){

                if ($(this).parent().find("td.three").hasClass("toggled")){
                    $(this).parent().find("td.three").fadeOut(400);
                    $(this).parent().find("td.three").removeClass("toggled");
                    $(this).parent().find("td.three").toggleClass("DoNotWant");

                } else { 
                    $(this).parent().find("td.three").fadeIn(400);
                    $(this).parent().find("td.three").toggleClass("toggled");

                }
            });             
        }); 
```

任何人都可以帮助我吗？

现场示例在这里： [http ://bryan.limewebsolutions.nl/](http://bryan.limewebsolutions.nl/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:42:46.317

而不是触发点击，我会说只存储对回调函数的引用，然后使用该引用作为您的点击事件回调，然后单独调用 i ，而不是触发点击事件。像这样的东西：

```
var callback = function(){  
    if ($(this).parent().find("td.two, td.three").hasClass("toggled")){
        $(this).parent().find("td.two").fadeOut(400);
        $(this).parent().find("td.three").fadeOut(400);
        $(this).parent().find("td.two").removeClass("toggled");
        $(this).parent().find("td.three").removeClass("toggled");

    } else {

        if ($(this).parent().find("td.three").hasClass("DoNotWant")){
            $(this).parent().find("td.three").fadeOut(400);
            $(this).parent().find("td.three").toggleClass("DoNotWant");
        } else {
            $(this).parent().find("td.three").fadeIn(400);
            $(this).parent().find("td.three").toggleClass("toggled");
        }

        $(this).parent().find("td.two").fadeIn(400);
        $(this).parent().find("td.two").toggleClass("toggled");
    }                   
};

// Bind the click event
$("td.one").click("click", callback);
$(function () {
   // Instead of triggering a click, just call the function
   callback();
}); 
```

*在此示例中`td.two`，为简单起见，省略了 for*

**旁注：**

1.  如果您有多个 td 与 if 语句中的选择器匹配，我相信您的逻辑存在问题。在这种情况下，第一个匹配的元素将始终在检查它是否具有 class 时使用`toggled`。`.hasClass()`将评估匹配元素集中的第一个元素。

2.  您可以通过使用更少的 DOM 遍历来提高代码效率。在回调中，将对父级的引用保存在变量中，并使用该变量而不是`$(this).parent()`每次都调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:45:51.510

[`.click()`](http://api.jquery.com/click/)是 的快捷方式[`.bind('click')`](http://api.jquery.com/bind/)，因此您不必将事件类型 ( `click`) 提供给函数。

改变你的`.click("click", function(){`，`.click(function(){`你的触发器应该正常工作。

# javascript - 多个更改事件

> ID：12778003
> 
> 赞同：1
> 
> 时间：2012-10-08T08:35:45.040
> 
> 标签：javascript, jquery

我有 3 个`<select>`菜单，每个菜单都有更改事件。代码分解如下所示：

```
$(document).ready(function(){
    // some code

    $("#selectOne").change(function() {
        // some code inc ajax request

        $("#selectTwo").change(function() {
            // some code inc a different ajax request
        });

        $("#selectThree").change(function() {
            // some code inc a yet another ajax request

        });
    });
}); 
```

上面的问题是，虽然 selectOne 工作正常，并且 selectTwo 似乎也工作正常，但如果我更改 selectThree，selectTwo 和 selectThree 的代码会同时触发。根据 3 个选择中任何一个的选择顺序，selectThree.change 的响应可以是显示和隐藏之前的每个响应，然后再决定显示不正确的响应。

我想做的是：

```
$(document).ready(function(){
    // some code

    $("#selectOne").change(function() {
        // some code inc ajax request
    });

    $("#selectTwo").change(function() {
        // some code inc a different ajax request
    });

    $("#selectThree").change(function() {
        // some code inc a yet another ajax request

    });
}); 
```

在这种情况下，selectOne 工作正常，但 selectTwo 和 selectThree 不响应更改。

有没有办法纠正这一切，以便在更改每个元素时，只触发正确的更改事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:46:50.933

似乎当您的文档被加载时，没有 id 为“selectTwo”或“selectThree”的选择元素。同样在第一种情况下，“selectOne”的事件处理程序执行时没有“selectThree”。这就是相应的事件处理程序不执行的原因。有两种方法可以处理这个问题。

**1 -**创建元素时分配处理程序。

**2 -**使用`.on()`而不是`.change()`：

```
$('body').on("change", "#selectOne", function () {});

$('body').on("change", "#selectTwo", function () {});

$('body').on("change", "#selectThree", function () {}); 
```

# c - 使用 _sprintf_l 以数千个_sep 格式化双精度

> ID：12778004
> 
> 赞同：2
> 
> 时间：2012-10-08T08:35:46.290
> 
> 标签：c, windows, visual-studio-2008, locale

我正在尝试使用特定`_sprintf_l`于 Windows 来根据德语语言环境格式化双精度；即逗号作为小数点，句点作为千位分隔符。简而言之，我希望“123456.789”看起来像“123.456,79”（如果只打印两位小数）。

但是，千位分隔符没有起作用：

```
char *loc = setlocale(LC_NUMERIC, "German");
double val = 123456.789;
char buffer[32] = {0};
_locale_t localeinfo;

localeinfo = _get_current_locale();        
_sprintf_l(buffer, "%.2f", localeinfo, val);
printf("%s\n", buffer); 
```

结果：“123456,79”（即逗号作为小数分隔符）。

查看`localeinfo->lconv struct`调试器中的 表明 decimal_point 确实是逗号并且`thousands_sep`是句点，所以这很奇怪。

`_sprintf_l`我需要处理的任何特殊警告？

当 POSIX/XPG4 可用时，我可以这样做：

```
#define _XOPEN_SOURCE
#include <locale.h>  
// 
char *s  = setlocale(LC_NUMERIC, "De_DE.IBM-1141");     
double d = 123456.789;
char s1[100];                                    

printf("%s %'.2f\n", s, d); 
```

...打印预期的 123.456,79。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-22T13:43:25.190

你的代码是正确的。令人惊讶的是，“_l”版本似乎根本不起作用。并且永远不会工作（以 wontfix 的方式关闭！）

[https://connect.microsoft.com/VisualStudio/feedback/details/523503/sprintf-l-and-vsnprintf-l-and-relatives-does-not-respect-passed-locale](https://connect.microsoft.com/VisualStudio/feedback/details/523503/sprintf-l-and-vsnprintf-l-and-relatives-does-not-respect-passed-locale)

# c# - 在 C# 中使用 USB 连接

> ID：12778008
> 
> 赞同：2
> 
> 时间：2012-10-08T08:36:05.647
> 
> 标签：c#, .net, visual-studio-2008, usb

> **可能重复：**
> [如何检测 USB 设备已插入？](https://stackoverflow.com/questions/6003822/how-to-detect-a-usb-device-has-been-plugged-in)

我想创建 c# .net windows 应用程序，当任何 USB 设备连接到本地计算机时，我想在其中显示消息。

此外，当连接此 USB 设备时，我想读取其中的特定文件。

我的问题是我应该如何确定用于读取文件的 USB 驱动器名称。

例如，在特定的机器上，如果只有两个驱动器（c 和 d）......在那里检测到的 USB 驱动器将是 e。但在另一台机器上，如果有 3 个驱动器，那么在这种情况下 USB 驱动器可以是 f。

在这种情况下，我应该怎么做才能显示有关 USB 驱动器连接的消息并读取该驱动器中的特定文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:58:20.170

对于您的第一个问题，请查看此链接：[如何检测何时使用 C# 插入可移动磁盘？](https://stackoverflow.com/questions/271238/how-do-i-detect-when-a-removable-disk-is-inserted-using-c)

对于您问题的另一部分：

> 此外，当连接此 USB 设备时，我想读取其中的特定文件。

您可以像这样获取连接到系统的所有可移动驱动器 的`drive letter`和：`volume label`

```
 DriveInfo[] allDrives = DriveInfo.GetDrives();
foreach (DriveInfo d in allDrives)
{
if (d.DriveType == DriveType.Removable) 
{   
  Console.WriteLine("Drive {0}", d.Name);       
        Console.WriteLine("  Volume label: {0}", d.VolumeLabel);
}
} 
```

如果 USB 驱动器的卷标相同，那么这不是问题，否则您必须在连接到系统的所有可移动驱动器中搜索所需的文件。
希望能帮助到你。

# ruby - 使用 Google Places API 查找最近的道路：

> ID：12778011
> 
> 赞同：0
> 
> 时间：2012-10-08T08:36:19.767
> 
> 标签：ruby, google-places-api

在我正在开发的 Ruby 应用程序中，给定一个点的纬度和经度，我需要找到离该点最近的道路/高速公路。

有人可以告诉我如何使用 Google Places API 来解决这个问题吗？

我尝试给出一定的半径并使用`'types:"route"'`参数找到道路，但它给了我“零结果”作为输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:00:12.817

Google Places API 并非旨在返回附近的地理位置，它旨在返回附近的列表`establishments`和最多两个`locality`或`political`键入结果以帮助识别您正在执行地方搜索请求的区域。

通过将 lat、lng 传递给HTTP 反向地理编码请求的参数，您可以使用[Google Geocoding API实现您请求的功能：](https://developers.google.com/maps/documentation/geocoding/)`latlng`

[http://maps.googleapis.com/maps/api/geocode/json?latlng=41.66547000000001,-87.64157&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?latlng=41.66547000000001,-87.64157&sensor=false)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-25T16:20:30.850

老问题，但我们现在有了答案。您可以使用Google 的[Nearest Roads API](https://roads.googleapis.com/v1/nearestRoads)。它确实为每个点返回最近的路段。

我已经在一个项目中实施并且它确实有效。尽管您必须记住，通过的点不需要是连续路径的一部分，否则您会发现下一条道路（平行道路）对您来说可能并不重要。

# java - Java SSLSocket：如何发送完整的服务器证书链？

> ID：12778012
> 
> 赞同：2
> 
> 时间：2012-10-08T08:36:20.373
> 
> 标签：java, ssl, certificate

当我在 Java 7 中创建 SSLServerSocket 时，服务器正确使用了我的服务器证书和密钥。该证书是由 ca 的 sub ca 颁发的。因此，从根证书到服务器证书的完整链有四个证书。完整的链存在于密钥库/信任库中。

但是，当客户端连接服务器时，始终只发送服务器证书本身。这也适用于基于 Java 的 Web 服务器，例如 Jetty。

因为大多数客户端只安装了根 ca 证书，而没有安装两个子 ca 证书，这是一个大问题。

如何强制 Java 在 SSL/TLS 握手中发送完整的证书链？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:27:09.083

密钥库中的密钥条目不仅适用于单个证书，而且适用于证书链（请参阅[`KeyStore.setKeyEntry`](http://docs.oracle.com/javase/7/docs/api/java/security/KeyStore.html#setKeyEntry%28java.lang.String,%20byte[],%20java.security.cert.Certificate[]%29)，它带有一个`Certificate[] chain`参数）。

如果您想使用特定的链，则需要在您拥有证书及其私钥的条目中将其设置为链。中间证书是否也在同一个密钥库中，在不同的条目中并不重要。

这与让客户端发送完整的客户端证书链非常相似。从服务器的角度来看，相同的密钥库配置步骤也应该有效，如[本问题](https://stackoverflow.com/a/9300727/372643)所述。

# r - 仅绘制拟合样条线而不是数据点

> ID：12778014
> 
> 赞同：0
> 
> 时间：2012-10-08T08:36:37.830
> 
> 标签：r, spline

我检查了我的参考资料，在我看来，要使用 x 和 y 拟合数据集，许多教程需要先绘制 x 和 y，然后绘制拟合线。正常程序如下：

```
## Calculate the fitted line
smoothingSpline = smooth.spline(tree_number[2:100], jaccard[1:99], spar=0.35) 
plot(tree_number[2:100],jaccard[1:99]) #plot the data points
lines(smoothingSpline) # add the fitted spline line. 
```

但是，我不想绘制tree_number和jaccard，而是只想在图中绘制拟合的样条线，我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T08:42:34.713

您可以使用关联的绘图功能：

```
plot(smoothingSpline, type="l") 
```

或者您可以显式提取`x`和`y`值并绘制它们

```
plot(smoothingSpline$x, smoothingSpline$y, type="l") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T08:41:03.850

为什么不只是`plot(smoothingSpline, type = "l")`？这应该允许您添加拟合的样条线，而无需先绘制数据点。

# c#-4.0 - 错误 - 没有传输，同时尝试使用 json 创建实体

> ID：12778015
> 
> 赞同：0
> 
> 时间：2012-10-08T08:36:47.330
> 
> 标签：c#-4.0, dynamics-crm, dynamics-crm-2011

//准备'Account'对象并调用create函数

```
function createAccount() {

var new_nit = new Object();

// Set text field

new_nit.Name = "Maddy";
createRecord(new_nit, "new_nitSet", createAccountCompleted, null);

} 
```

// 此回调方法在成功创建帐户时执行

```
function createAccountCompleted(data, textStatus, XmlHttpRequest) {

var nit = data;

alert("Account created; Id: ");

} 
```

// 此函数通过调用 OData 创建记录

```
function createRecord(entityObject, odataSetName, successCallback, errorCallback) {

//Parse the entity object into JSON

var jsonEntity = window.JSON.stringify(entityObject);

// Get Server URL

var serverUrl = Xrm.Page.context.getServerUrl();

//The OData end-point

var ODATA_ENDPOINT = "/XRMServices/2011/OrganizationData.svc";

//Asynchronous AJAX function to Create a CRM record using OData

$.ajax({

type: "POST",

contentType: "application/json; charset=utf-8",

datatype: "json",

url: serverUrl + ODATA_ENDPOINT + "/" + odataSetName,

data: jsonEntity,

beforeSend: function (XMLHttpRequest) {

//Specifying this header ensures that the results will be returned as JSON.

XMLHttpRequest.setRequestHeader("Accept", "application/json");

},

success: function (data, textStatus, XmlHttpRequest) {

if (successCallback) {

successCallback(data.d, textStatus, XmlHttpRequest);

}

},

error: function (XmlHttpRequest, textStatus, errorThrown) {

if (errorCallback)

errorCallback(XmlHttpRequest, textStatus, errorThrown);

else

alert("Error on the creation of record; Error – "+errorThrown);

}

});

} 
```

我正在使用上面的代码创建一个名为`nit`. 我在网络资源中有 json2 和 jQuery js 文件。当我在按钮单击时运行此代码时，我收到错误消息`No Transport`。当我搜索时，我知道这个错误是由于跨站点脚本造成的。如何启用跨站点脚本或如何摆脱此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:54:53.660

```
 function createAccount() {
var gid = Xrm.Page.getAttribute("new_syllabus").getValue();
var stamail = new Object();
stamail.new_name = "Maddy";
stamail.new_gid = gid;
var myurl = "http://" + window.location.host + "/" + Xrm.Page.context.getOrgUniqueName();
//alert(gid);
// alert(Xrm.Page.data.entity.getId());

var jsoEntity = JSON.stringify(stamail);
var createRecordReq = new XMLHttpRequest();

var ODataPath = myurl + "/XRMServices/2011/OrganizationData.svc";

createRecordReq.open("POST", ODataPath + "/new_nitSet", false);
createRecordReq.setRequestHeader("Accept", "application/json");
createRecordReq.setRequestHeader("Content-Type", "application/json; charset=utf-8");

// createRecordReq.onreadystatechange = function () { requestCallBack(this); };
createRecordReq.send(jsoEntity);

var newRecord = JSON.parse(createRecordReq.responseText).d;

} 
```

我没有使用 ajax，而是使用了上面的代码。它工作正常。

# label - 无法在运行时更新 Google Apps 脚本 GUI 生成器界面上的标签

> ID：12778016
> 
> 赞同：2
> 
> 时间：2012-10-08T08:36:49.973
> 
> 标签：label, google-apps-script, gui-builder

我有一个界面，它使用从其他电子表格中获取的数据调用用于创建电子表格的脚本。我希望界面在运行时更新其标签，以便向用户提供视觉反馈并让他知道脚本正在运行并且它没有卡住。当我尝试更新我在界面中放置的标签时，它不会第一次更新，而是在 myFunction() 到达其末尾后正确更新。这意味着我可以看到消息“创建已完成”，但从未显示消息“正在创建文件...”。此外，按钮 buttonCompile 永远不会被禁用，因此似乎 myFunction() 之前的指令根本没有执行。如何在 myFunction() 开始执行之前更新标签并禁用按钮？（我已经仔细检查了变量引用）

```
function doGet() {
  var app = UiApp.createApplication();
  app.add(app.loadComponent("File creation"));
  var buttonCreate = app.getElementById('createBtn');
  var handlerCrea = app.createServerHandler('createClickHandler');
  buttonCreate.addClickHandler(handlerCreate);
  return app;
}

function createClickHandler(e) {
  var app = UiApp.getActiveApplication();
  var label = app.getElementById('createLbl');
  label.setText("Creating file...");
  var buttonCompile = app.getElementById('compileBtn');
  buttonCompile.setEnabled(false);
  myFunction();
  label.setText("Creation completed.");
  buttonCompile.setEnabled(true);
  app.close();
  return app;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:20:18.030

此行为的原因是 GUI 仅在离开处理程序后才更新。一种解决方法是使用两个处理程序。第一个将标签文本设置为`Creating file...`并禁用按钮，第二个执行`myFunction`功能，将文本更改为`Creation completed,`并启用按钮。这是一个例子。它禁用/启用按钮，工作处理程序只需等待 5 秒。

```
function doGet(e) {
  var app = UiApp.createApplication();
  var container = app.createHorizontalPanel().setId('container');
  var btnPerformance = app.createButton("Performance Demo").setId('btnPerformance');
  var handlerPerformance = app.createServerHandler('onBtnPerformanceClick');
  var handlerWait = app.createServerHandler('onWait');
  btnPerformance.addClickHandler(handlerPerformance);
  btnPerformance.addClickHandler(handlerWait);
  container.add(btnPerformance);
  app.add(container);
  return app;
}

function enableControls(enable) {
  var lstControls = [ 'btnPerformance' ];
  var app = UiApp.getActiveApplication();
  for (var i = 0; i < lstControls.length; i++) {
    var ctl = app.getElementById(lstControls[i]);
    ctl.setEnabled(enable);
  }
}

function onWait(e) {
  enableControls(false);
  return UiApp.getActiveApplication();
}

function onBtnPerformanceClick(e) {
  Utilities.sleep(5000);
  enableControls(true);
  return UiApp.getActiveApplication();
} 
```

# php - 如何阻止 yii cgridview 在每个 ajax 更新调用中获取它的 jquery 文件

> ID：12778017
> 
> 赞同：5
> 
> 时间：2012-10-08T08:36:52.323
> 
> 标签：php, jquery, yii

我正在开发一个 Yii 应用程序，在其中的某些部分我需要使用 CGridView 来显示一些数据库记录。我的目标是通过 ajax 调用更新它的结果（基于表列上的一些过滤器）但是问题在每次调用中，CGridView 都会建立一个新的获取请求来获取它的相关 jquery 文件，这会导致我的网站加载时间增加。
有没有办法告诉 CgridView 在第一个 ajax 请求中只获取一次这些文件？如何阻止它多次获取这些文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T09:57:14.413

使用 scriptMap 防止在 ajax 调用中加载 jquery 文件。

```
Yii::app()->clientScript->scriptMap=array(
                    'jquery.js'=>false,
                    'jquery.ba-bbq.js'=>false,
                    'jquery.yiigridview.js'=>false
                ); 
```

您可以从外部获取或加载 js 文件，您可以在[此处](https://stackoverflow.com/questions/1998449/include-css-javascript-file-in-yii-framework/11558722#11558722)找到答案。

# eclipse - 强制 Eclipse 在每次运行之前自动清理项目

> ID：12778019
> 
> 赞同：7
> 
> 时间：2012-10-08T08:37:08.920
> 
> 标签：eclipse

我正在寻找一种解决方案，它可以强制 Eclipse 在我运行项目之前自动清理它（我说的是只使用 Eclipse 运行项目——没有 Maven，没有 Ant）。对于构建，我已经有一个 Maven 配置，但有时我也直接从 Eclipse 运行构建，这是我需要清理的时候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T06:18:32.887

难道不能让 Maven 和 Eclipse 使用不同的类文件夹，例如 Maven 构建的 /target 和 Eclipse 内部 Java 编译器的 /bin 吗？如果是这样，您应该能够有 2 个不同的启动配置从 2 个不同的位置运行代码。

第二种选择：您可以创建一个小 Ant 脚本来清除目标目录。该 Ant 脚本可以从 Eclipse 内部运行，因此一种解决方法是先运行 Ant 启动配置，然后再运行 Java 启动配置。要使此过程成为一步，请从 Eclipse CDT 安装[启动组功能](https://stackoverflow.com/a/11369639/44089)（您只需要那个小功能，而不是整个 CDT！），然后您可以从其他两个启动配置创建一个类似“批处理”的启动配置. 现在一切都在 Eclipse 中，只需一个启动配置！

# c# - 识别屏幕被锁定在 WindlowsPhone

> ID：12778020
> 
> 赞同：0
> 
> 时间：2012-10-08T08:37:09.940
> 
> 标签：c#, windows-phone-7

在我的应用程序中，我需要知道设备何时被锁定。如何检测屏幕何时锁定，以及何时解锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:20:03.320

```
public App()  
{  
RootFrame.Obscured += Obscured;    
RootFrame.Unobscured += Unobscured;    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:41:56.837

您可以使用[Obscured/Unobscured](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationframe.obscured%28v=vs.92%29.aspx)事件。但是有一些限制：

*   它[不仅在](http://codecise.com/blog/wp7-messagebox-raising-obscured-event)您处于锁定屏幕下时会响起。

> 当锁定屏幕被激活**或某些其他操作遮挡**正在运行的应用程序的框架时引发此事件，例如来电。

*   有延迟。您在屏幕锁定后收到了 Obscured 事件。因此，如果您尝试检查状态并导航到其他页面，您的应用程序可能会被操作系统杀死。

# xamarin.ios - 带有 Xamarin MonoDroid 和 MonoTouch 的 db4o DotNet 版本

> ID：12778023
> 
> 赞同：1
> 
> 时间：2012-10-08T08:37:18.063
> 
> 标签：xamarin.ios, xamarin.android, db4o

是否有人已经在使用 Xamarin Monodroid 和/或 MonoTouch 的移动项目中使用过 db4o OO 数据库管理器？

甚至可能吗？（似乎 db4o 使用了 Reflection.Emit()，这可能是个问题）

感谢您对此的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:11:16.780

如果您计划让您的应用程序直接访问数据库，则最好设置一个 Web 服务（出于安全原因，您不希望通过公共 IP 地址访问您的数据库）。

如果您要在应用程序中使用本地数据库来存储数据，请使用[SQLite](http://www.sqlite.org/)和[sqlite-net](https://github.com/praeclarum/sqlite-net)。

# algorithm - 比较 O(2/n) 和 O(1) 的时间复杂度

> ID：12778028
> 
> 赞同：1
> 
> 时间：2012-10-08T08:37:29.033
> 
> 标签：algorithm, time-complexity

如果有 2 个时间复杂度为 O(2/n) 和 O(100) 的函数。哪个函数的执行时间更短？是否有任何时间复杂度为 2/n 的实函数？（在一些算法问题论文中找到了这个）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:50:40.777

首先，在 O 表示法（以及 Theta 和 Omega）中，您可以忽略任何常数，因为[定义](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)已经包含“for some constant *k* ”部分。

所以，基本上，O(100) 等价于 O(1)，而 O(2/n) 等价于 O(1/n)。哪个执行时间更快 - 取决于*n*。如果我假设*100*和*2/n*直接用于计算执行时间，那么执行时间是：

*   *在**所有情况下，** *O(100)为**100*（时间单位）*
****   超过*100*（时间单位）对于*O(2/n)*对于*n < 0.02**   小于*100*（时间单位）对于*O(2/n)*对于*n >= 0.02****

 ***现在，我希望这个问题纯粹是理论上的，因为实际上没有 O(1/n) 复杂度的算法——这意味着它需要*更少的时间*（这是每数据量的记录时间，这只是时间）它需要处理的数据更多。我希望这很清楚，没有任何算法可以花费*0*时间来处理无限量的数据。

另一个复杂度 O(100) 是一种算法，无论输入数据是什么，都采用相同的步骤，因此始终具有恒定的执行时间（实际上，它只需要以一个常数为界，它可以运行得更快有时）。例如，一个程序从整数文件中读取输入，然后返回该文件中前 100 个数字的总和，如果不存在 100 个数字，则返回所有数字的总和。由于它总是最多读取 100 个数字（其余的可以忽略）并将它们相加，因此它受到固定步数的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:40:37.467

当然，这取决于 N 的值。O(100) 基本上是固定时间，并且可能比 O(2/N) 运行得更快或更慢，具体取决于 n 是多少。

我想不出一个 O(2/N) 算法，随着更多的数据变得更快……听起来有点奇怪。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:44:55.380

做任何事情的`O(2/n)`算法实际上是不可能的。

算法是产生结果的有限步骤序列。由于计算机上的“步骤”需要一定的时间（例如至少一个 CPU 周期），因此算法获得`O(2/n)`时间的唯一方法是，如果它需要*零*时间来达到足够大的`n`. 因此它什么也不做。

撇开算法和时间复杂度不谈：一个`O(2/n)`函数是“小于”常数，从某种意义上说，一个`O(2/n)`函数必然趋向于 0，而 n 趋于无穷大，而一个`O(1)`函数并不一定会那样做。

对本文问题文本的注释：任何`O(100)`也是 的`O(1)`函数，以及任何`O(2/n)`也是 的函数`O(1/n)`。在其中编写带有不必要常量的 big-O 并没有多大意义，但由于它是一项检查，所以它可能会让您感到困惑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:49:58.927

我不熟悉任何具有`O(2/n)`运行时间的算法，我怀疑是否存在，但让我们看看数学问题。

数学问题应该是： (1) 是¹`O(2/n)`的子集(2) 是的子集吗？`O(1)`^(`O(1)``O(2/n)`)

1.  是的。让`f(n)`成为一个函数`O(2/n)`- 这意味着有常数 c,N 使得对于每个`n > N`: `c*f(n) < 2/n`。也有常数`c2,N2`，例如`c*2/n < 1`对于 each `n > N2`，因此`min{c1,c2} * f(n) < 1`对于 each `n > max{N1,N2}`。`O(2/n)`的子集也是`O(1)`

2.  不。因为`lim(2/n) = 0`在无穷大处，对于每个`c,N`，都有`n>N`这样的，`2/n < 1*c`因此`f(n) = 2/n`不在 中`O(1)`，而在`O(2/n)`

**结论：** 一个功能`O(2/n)`也是`O(1)`- 但不是相反。
这意味着 - 每个函数的`O(2/n)`比例“小于”然后 1。

* * *

(1) 与 相同`O(100)`，因为`O(1) = O(100)`***

# javascript - Jquery 错误：对象不支持此属性或方法

> ID：12778030
> 
> 赞同：0
> 
> 时间：2012-10-08T08:37:38.003
> 
> 标签：javascript, jquery, jsp

我正在尝试在我的 JSP 页面上使用树结构以及 Jquery。树结构需要导入几个 Jquery 文件。当我运行 JSP 页面时，我收到错误代码“对象不支持此属性或方法”。

我通过单独运行树结构（动态树）代码来测试代码，它工作正常。然后我尝试运行我编写的 Jquery，它也可以正常工作。仅当我集成两个代码时才会出现上述错误。我已经将我的自定义代码和错误写在它出现的位置。注意：fm 是我的 JSP 页面上的表单名称。

```
 <script type="text/javascript">
        var url;
    function newUser(){
        $('#dlg').dialog('open').dialog('setTitle','Create New Access');
        $('#fm').form('clear');   // ERROR AT THIS LINE
        url = 'saveaccess.jsp'; 
    }
    function editUser(){
        var row = $('#dg').datagrid('getSelected');
        if (row){
            $('#dlg').dialog('open').dialog('setTitle','Edit Access');
            $('#fm').form('load',row);
            alert("test"+row);
            //url = 'AddNeditApplication.jsp';
        }
    }
    function saveUser(){
        $('#fm').form('submit',{
            url: url,
            onSubmit: function(){
                return $(this).form('validate');
            },
            success: function(result){
                //var result =new Object();
                alert(result);

                if (result){
                    $('#dlg').dialog('close');      // close the dialog
                    $('#dg').datagrid('reload');    // reload the user data
                } else {
                    $.messager.show({
                        title: 'Error',
                        msg: result.msg
                    });
                }
            }
        });
    }
    function removeUser(){
        var row = $('#dg').datagrid('getSelected');
        if (row){
            $.messager.confirm('Confirm','Are you sure you want to remove this Access?',function(r){
                if (r){
                    $.post('AddNeditApplication.jsp',{id:row.id},function(result){
                        if (result.success){
                            $('#dg').datagrid('reload');    // reload the user data
                        } else {
                            $.messager.show({   // show error message
                                title: 'Error',
                                msg: result.msg
                            });
                        }
                    },'json');
                }
            });
        }
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:10:47.070

`$('#fm').form('clear');`- 每当 JavaScript 说“对象不支持这个属性或方法”时，它就是在谈论`.`操作符。这意味着调用返回的对象`$('#fm')`不支持方法`form`。

我在 jQuery API 中找不到任何有关`form`方法的文档。也许您正在尝试使用[EasyUI](http://www.jeasyui.com/documentation/form.php)？除了 jQuery（在 jQuery 之后，在您的代码之前），您是否在 HTML 中包含 EasyUI 脚本？

像这样的东西：

```
<script src="http://www.jeasyui.com/easyui/jquery.easyui.min.js"></script> 
```

...？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T00:32:42.667

Object 不支持此属性或方法的原因异常：

1.  检查并比较 Jquery 版本的浏览器版本兼容性/支持。即IE8 不支持Jquery2x 版本。在这种情况下，相应地使用版本
2.  您的 html/aspx 文件中的文件顺序错误。更改顺序..例如..

从...

```
 <script src="js/jquery.easing.js"></script>      
    <script src="js/jquery.js"></script>
    <script src="js/jqueryFileTree.js"></script>
    <script src="js/default.js"></script>
 <script src="js/jquery-1.4.1-vsdoc.js"></script>
    <script src="js/jquery-1.4.1.js"></script>
    <script src="js/jquery-1.4.1.min.js"></script> 
```

至：

```
 <script src="js/jquery-1.4.1-vsdoc.js"></script>
<script src="js/jquery-1.4.1.js"></script>
<script src="js/jquery-1.4.1.min.js"></script>
<script src="js/jquery.js"></script>
<script src="js/jqueryFileTree.js"></script>
<script src="js/default.js"></script> 
  <script src="js/jquery.easing.js"></script> 
```

我遇到了类似的异常，现在得到了解决。

# c# - 在枚举成员上实现流畅扩展的最佳方法

> ID：12778031
> 
> 赞同：0
> 
> 时间：2012-10-08T08:37:47.737
> 
> 标签：c#, methods, enums, fluent

可以说我得到了对枚举执行某些操作然后返回它的扩展。

```
public static T Do<T>(this Enum e) where T : struct
{
    // Do something.
    return // e? .. (T)e? .. or (T)(object)e? ;
} 
```

那么我应该返回什么来让我的代码成功构建并使用这个示例运行：

```
Roles role = Roles.Admin | Roles.Moderator;
role.Do<Roles>().SomethingElse().AndMore<Roles>().Etc<int>(); 
```

__

```
return (T)e; 
```

[http://pasteboard.s3.amazonaws.com/images/1349685696025173.png](http://pasteboard.s3.amazonaws.com/images/1349685696025173.png)

__

```
return e; 
```

[http://pasteboard.s3.amazonaws.com/images/1349685753912110.png](http://pasteboard.s3.amazonaws.com/images/1349685753912110.png)

__

```
return (T)(object)e; 
```

实际上有效，但先装箱然后拆箱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:48:15.473

```
 public static T Do<T>(this Enum e) where T : struct
    {
        return (T) Convert.ChangeType(e, typeof(T));
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:51:03.710

这是一个棘手的问题，因为您不能在泛型上放置 Enum 约束。

查看这篇文章了解更多信息，以及可能的解决方法：

[http://msmvps.com/blogs/jon_skeet/archive/2009/09/10/generic-constraints-for-enums-and-delegates.aspx](http://msmvps.com/blogs/jon_skeet/archive/2009/09/10/generic-constraints-for-enums-and-delegates.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:41:58.050

那么你必须遵守闭包的数学结构。
维基百科很好地解释了这一点：[Closrue](http://en.wikipedia.org/wiki/Closure_%28mathematics%29 "关闭")

简而言之：
在您的情况下，您必须返回下一个函数预期的输入参数。

# python - 当输出正在渲染时，是否可以从 django 返回（流）响应（xml）？

> ID：12778033
> 
> 赞同：1
> 
> 时间：2012-10-08T08:38:02.213
> 
> 标签：python, django, dhtmlx

我有一个页面，它以 XML 形式返回 10,000 多条记录，需要 7 秒才能返回，我很满意，因为其中大部分在用户向下滚动之前不会显示。

但是我的前端必须等待 7 秒才能让 django 返回任何内容，以便它可以开始显示输出，DHTMLX 能够在接收到数据时呈现，所以我想知道 django 是否可以做到这一点，我将如何去做？

tl：博士；我希望 Django 在呈现输出时做出响应，可以吗？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:57:36.050

事实证明，您无法使用模板执行此操作，因此您必须转到 HttpResponces 并手动建立您的回报，这对很多人来说可能不值得。

# wordpress - 在开发中迁移 wordpress 时出错

> ID：12778036
> 
> 赞同：0
> 
> 时间：2012-10-08T08:38:25.753
> 
> 标签：wordpress, migrate

我正在本地开发一个 WordPress 页面，现在我需要将它迁移到服务器。

前段时间我做了 2 到 3 次，我将文件移动到新服务器，更改数据库条目上的 URL 并创建新数据库。

我在建立数据库问题时遇到问题，导致`db_name`. 我得到了**“连接到数据库错误”**。我修复了它，但是现在，当我加载页面时，导航器会显示给我。

> 哎哟！Google Chrome 无法与页面 preview.mypage.com:8887 建立连接。

我认为**：8887**有一些不好的地方，因为我以前在基本的 php 中工作过……但不知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:42:13.883

有问题`wp-options`

站点 URL 和主页条目没有实现它们的值，然后我`.sql`使用文本编辑器进行了替换。

希望这对其他人有所帮助。

# c# - 使用c#检查是否在mysql中的数据库中记录

> ID：12778039
> 
> 赞同：2
> 
> 时间：2012-10-08T08:38:33.867
> 
> 标签：c#, mysql

新手，我目前正在创建一个工具，它将解析包含名称的文本文件“namelist.txt”。我的工具将检查每个名称是否已经在我的数据库中。如果不存在，它将写入另一个文件“new_name.log”。

我的代码是这样的。

在我的查询命令中，我使用 count(*) 返回计数

```
 string DBNAME= "SELECT count(*) FROM tbl_namelist WHERE name = '" + name + "'";
            conn.Open();
            MySqlCommand DBCmd = new MySqlCommand(DBNAME, conn);
            MySqlDataReader reader = DBCmd.ExecuteReader();
            while (reader.Read())
            {

               if (reader == 0)
                try
                {
                    //label2.Text = reader.GetString(0);
                    sds.WriteLine("New Name: " + name+ " " + reader.GetString(0));
                }
                catch (Exception dd)
                {

                    sds.WriteLine("duplicate Name: " + name+ " " + reader.GetString(0));
                } 
```

我不知道我是否阅读了正确的信息“reader.read”给我一个整数输出“计数”。请帮助我谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:40:08.950

不要使用`MySQLDataReader`而是使用命令`ExecuteNonScalar`来获取单个值。

```
string DBName = "SELECT count(*) FROM tbl_namelist WHERE name = @name";
using (MySqlConnection conn = new MySqlConnection("connectionString Here"))
{
    using (MySqlCommand comm = new MySqlCommand())
    {
        comm.Connection = conn;
        comm.CommandText = DBName;
        comm.CommandType = CommandType.Text;
        comm.Parameters.AddWithValue("@name", name);
        try
        {
            conn.Open();
            int totalCount = Convert.ToInt32(comm.ExecuteScalar());
            if (totalCount == 0)
            {
                sds.WriteLine("New Name: " + name + " " + totalCount);
            }
            else
            {
                // when not zero
            }
        }
        catch( MySqlException ex)
        {
            // error here
        }
    }
} 
```

使用`USING-statement`并参数化您的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:51:10.793

count(*) return int 并且您应该将 reader.GetString(0) 更改为 reader.GetInt32(0) 并将 if(reader==0) 更改为 if (reader.GetInt32(0)==0) 并且它将起作用

# reporting-services - SSRS 2012 报告模型

> ID：12778040
> 
> 赞同：5
> 
> 时间：2012-10-08T08:38:34.757
> 
> 标签：reporting-services, sql-server-2012, ssrs-2008-r2

我正在为我的公司准备一个 SSRS 2008 R2 商业演示，使用 Report Model 生成一种与 Report Builder 一起使用的“BO Universe”数据模型，以展示用户如何使用已创建的数据模型生成自己的报告开发商。我发现报表模型在 SSRS 2012 中已弃用，是否有任何新工具可以创建数据模型以部署在报表服务器上，用户可以使用它来生成报表？

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T08:43:01.667

不推荐使用语义建模语言 (SMDL) 报表模型。尽管您可以继续使用现有报表模型作为 SQL Server 2012 Reporting Services 报表中的数据源，但您应该考虑更新报表以消除它们对报表模型的依赖。

SQL Server 2012 Reporting Services 不包括用于创建或更新报表模型的工具。

SQL Server Data Tools (SSDT) 不再支持报表模型项目。报表模型设计器在 SQL Server 2012 Reporting Services (SSRS) 中不可用。您不能在 SQL Server Data Tools (SSDT) 中创建新的报表模型项目或打开现有项目，也不能创建或更新报表模型。要更新报表模型，您可以使用 SQL Server 2008 R2 Reporting Services 或更早版本的工具。您可以继续将报表模型用作在 SQL Server 2012 Reporting Services (SSRS) 工具（如报表生成器和报表设计器）中创作的报表中的数据源。用于创建查询以从报表模型中提取报表数据的查询设计器在 SQL Server 2012 Reporting Services 中继续可用。

资料来源：[这里](http://msdn.microsoft.com/en-us/library/ms143509.aspx)和（主要）[这里](http://msdn.microsoft.com/en-us/library/ms143380.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T05:55:45.327

您可以尝试探索电源视图。您可以创建一个表格模型，然后通过电源视图进行探索。

# c# - 网络摄像头 winform 上的 C# 相框

> ID：12778041
> 
> 赞同：0
> 
> 时间：2012-10-08T08:38:47.487
> 
> 标签：c#, winforms, webcam, photo

我正在开发一个 Winform 应用程序，`c#`用于拥有我们可以在购物中心看到的照片亭之类的东西。

我设法找到了从网络摄像头捕获图像并使用 easywebcam 组件存储捕获的图像的方法。但是，我想在网络摄像头流媒体视频周围有一个相框，因此当捕获图像时，相框也包括在内。

我已经做了几天的研究，但仍然对此一无所知。任何大师都可以为此启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:30:25.997

感谢您的回复，我用您提到的 _NewFrame 事件对其进行了测试，并在覆盖方法中添加如下：

```
private void video_NewFrame(object sender, NewFrameEventArgs eventArgs)
{
    Bitmap img = (Bitmap)eventArgs.Frame.Clone();

    // Perform Overlay here
    Graphics camImg = Graphics.FromImage(img);
    Bitmap frame = new Bitmap(@"D:\PriusC1.png");
    camImg.DrawImage(frame, new Point(100, 100));
    camImg.Save();

    pictureBox1.Image = img;
} 
```

它就像一个魅力，非常感谢你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:42:44.190

我使用 AForge 库来处理来自 C# 的网络摄像头，并且我喜欢它的 API 是多么干净。这里的示例如何为视频添加时间戳、拍摄快照等： [http ://www.aforgenet.com/framework/samples/video.html](http://www.aforgenet.com/framework/samples/video.html)

如果我理解正确，拍摄快照时需要有原始框架，因此在框架上绘画之前复制它：

```
Image lastUneditedFrame;

private void VideoSourcePlayer_NewFrame(object sender, ref Bitmap image)
    {
        if (lastUneditedFrame != null) 
        {
             lastUneditedFrame.Dispose();
        }

        lastUneditedFrame = image.Clone(new Rectangle(0, 0, image.Width, image.Height), image.PixelFormat);

        var graphics = Graphics.FromImage(image);

        // do the drawing of photo frame

        graphics.Dispose();
    }

// on snapshot button click, simply call lastUneditedFrame.Save(); 
```

# vim - 设置 Eclim 以支持 PHP

> ID：12778046
> 
> 赞同：0
> 
> 时间：2012-04-04T08:31:57.727
> 
> 标签：vim, eclipse, eclipse-pdt

我使用 Eclim 安装了插件 PDT：

```
DISPLAY=:1 ./eclipse/eclipse -nosplash -consolelog -debug \
  -application org.eclipse.equinox.p2.director \
  -repository http://download.eclipse.org/releases/helios \
  -installIU org.eclipse.php.feature.group 
```

我使用 PHP 的 dargs 编译了这个东西：

```
ant -Declipse.home=/home/tipu/downloads/eclipse -Dplugins=php 
```

创建一个项目给了我：

```
java.lang.IllegalArgumentException: Unable to find nature for 
alias 'php'.  Supported aliases include: javascript=org.eclipse.
wst.jsdt.core.jsNature, java=org.eclipse.jdt.core.javanature
while executing command (port: 9091): -editor vim -command project_create 
-f "/home/tipu/phpproj2/" -n php 
```

关于如何修复的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:58:34.733

问题是我的 Eclipse 是 indigo 版本，并从 hellios 存储库安装了 pdt。它们都必须匹配，而 hellios 和 indigo 之间的情况并非如此。

# iphone - 如何将特定视图的方向更改为横向？

> ID：12778052
> 
> 赞同：1
> 
> 时间：2012-10-08T08:39:17.473
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我的应用程序中有一个视图。我想以横向显示的特定视图。当用户进入该视图时，我想强制用户更改设备方向。当用户转到另一个视图时，它必须重置 ti。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:08:39.850

在它的视图控制器中实现两条消息：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight);
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:13:14.027

我得到了答案

[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationLandscapeRight];

```
float   angle = M_PI/2;  //rotate 180°, or 1 π radians
self.view.layer.transform = CATransform3DMakeRotation(angle, 0, 0.0, 1.0); 
```

# c# - 不允许在 numericUpDown 中输入文本

> ID：12778058
> 
> 赞同：5
> 
> 时间：2012-10-08T08:39:31.290
> 
> 标签：c#, winforms, numericupdown

我在 C# 中有一个带有 NumericUpDown 控件的 WinForm。我希望控件仅在单击其向上或向下箭头后更改其值，并阻止手动文本输入，是否有 NumericUpDown 的属性来执行此操作，或任何其他方式来实现？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T08:47:06.287

```
numericUpDown.ReadOnly = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:45:47.720

请找到以下符合您要求并可能解决您的问题的代码：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
            this.Load += new EventHandler(Form1_Load);
        }

        void Form1_Load(object sender, EventArgs e)
        {
            numericUpDown1.KeyDown+=new KeyEventHandler(numericUpDown1_KeyDown);
        }

        void numericUpDown1_KeyDown(object sender, KeyEventArgs e)
        {
            e.SuppressKeyPress = true;
            return;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:43:35.817

您可以禁用 CanFocus 属性，因此用户无法聚焦文本区域，但可以单击向上/向下按钮。

```
numericUpDown1.CanFocus = false; 
```

# air - Openlaszlo html标签AIR问题

> ID：12778059
> 
> 赞同：1
> 
> 时间：2012-10-08T08:39:39.233
> 
> 标签：air, openlaszlo, lzx

我刚刚开发了一个示例**openlaszlo**应用程序，其中包含加载 openlaszlo 站点的 HTML 标记。我开发了一个带有另一个 html 标签的示例 air 应用程序，并通过 air 应用程序加载了 openlaszlo 应用程序。出于某种原因，我无法看到 openlaszlo 应用程序的 html 内容。

有没有人遇到过这类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:08:54.687

@karthick 在您对问题的评论中，您说“HTML 在 SWF 后面”：解决此问题的方法是将 SWF（Flash）对象的*Window Mode*属性设置为“透明”：

例子：

a) 直接 Flash 嵌入语法：

```
<object ...>
...
<param name="wmode" value="transparent"></param>
</object> 
```

b) OpenLaszlo JavaScript 嵌入语法：

```
lz.embed.swf({
              url: 'http://www.mysite.com/myapp.lzx.swf10.swf?lzr=swf10', wmode: 'transparent', ... }); 
```

# css - 使用 css transform:scale(x) 时设置 hitbox；

> ID：12778061
> 
> 赞同：0
> 
> 时间：2012-10-08T08:39:51.260
> 
> 标签：css, transform, scale, onmouseover

使用时是否可以设置元素的命中框`-webkit-transform:scale(4);`？

[http://jsfiddle.net/bnA7L/](http://jsfiddle.net/bnA7L/)

在上面的 jsfiddle 示例中，我有两个 div。当您将鼠标悬停时，您需要将鼠标移动到新边界的边缘以使其恢复到原来的大小。

我希望它在用户的鼠标移出原始命中框后立即恢复到原始大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:04:44.170

当您为每个 div 添加 2 个子项时，可以在 CSS 中完成。孩子 1 不缩放并充当碰撞箱。仅当您将鼠标悬停在子 1 上时，子 2 才可缩放。

[http://jsfiddle.net/willemvb/q7vbD/](http://jsfiddle.net/willemvb/q7vbD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:41:23.900

您必须使用 jQuery 或 JavaScript 在转换之前检查坐标，然后监听`mousemove`DOM 上的事件。

# nhibernate - 查询异常后使用 NHibernate 会话

> ID：12778063
> 
> 赞同：2
> 
> 时间：2012-10-08T08:39:57.643
> 
> 标签：nhibernate, azure

我们正在尝试实现重试逻辑以从 Azure 环境中的瞬态错误中恢复。

我们正在使用[长时间运行的会话](http://suryagaddipati.wordpress.com/2008/02/15/hibernate-rich-clients-and-long-running-sessions/)来跟踪并在应用程序事务结束时提交所有更改（可能分布在多个 Web 请求中）。一路上，我们需要从数据库中获取额外的数据。我们的主要问题是我们不能轻易地从 db 错误中恢复，因为我们不能“重播”所有用户操作。

到目前为止，我们使用了简单的恢复算法：

*   尝试在长时间运行的会话中执行操作
*   如果出现错误，请关闭会话，打开一个新会话并将实体合并到其中
*   重试操作

就时间而言，这是非常昂贵的方法（合并对于大型实体层次结构来说真的很长）。所以我们想稍微优化一下。

我们希望在单独的会话中执行查询操作（以保持长时间运行一个未触及和安全），并在成功后将结果合并回长时间运行的会话。重试在这里相对简单——我们只需要打开新会话并再次运行查询。但是，使用这种方法，我们在初始化惰性属性/集合时会遇到问题：

*   如果我们在单独的会话中执行此操作，我们需要将结果合并回来（很多实体），但合并可能会失败并中断长时间运行的会话
*   我们尝试了不同的方式将原始实体“移动”到不同的会话，加载详细信息并将其返回，但没有成功（驱逐、复制等）

有一个已知的[声明](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/Session.html)，如果出现异常，会话应该被丢弃。但是，该示例显示了*写*操作。*阅读*的人仍然如此吗？我的意思是如果我保证没有数据被写回数据库，我可以重复使用同一个会话来再次运行查询吗？

您对长时间运行的会话的重试逻辑还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T07:26:50.560

IMO 没有办法解决您的问题。提交所有内容将花费大量时间，否则您将不得不做大量工作将其分解为较小的会话并处理合并时可能发生的每个错误。

要回答有关在异常后使用会话的问题：您不能再信任此会话中的任何内容，甚至不能信任已加载的实体。

阅读 Ayende 的[文章中](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)关于在会话中出现异常时使用恢复计划构建简单的待办事项应用程序的这一段：

> 然后是错误处理的问题。如果你得到一个异常（比如 StaleObjectStateException，因为并发冲突），你的 session 和它加载的实体是 toast，因为使用 NHibernate，一个 session 抛出的异常会将该 session 移动到一个未定义的状态。您不能再使用该会话或任何加载的实体。如果您只有一个全局会话，则意味着您可能需要重新启动应用程序，这可能不是一个好主意。

# php - MagpieRSS PHP 解析器错误

> ID：12778064
> 
> 赞同：0
> 
> 时间：2012-10-08T08:40:00.230
> 
> 标签：php, php-parser

我正在使用 MagpieRSS 解析器，它在本地系统中运行良好，但上传到服务器时显示以下错误：

> 警告：MagpieRSS：解析 RSS 文件失败。（无效文档在第 36 行第 10 列结束）在 /homepages/4/d404449574/htdocs/yellowandred_in/rss_fetch.inc 第 238 行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:40:31.527

`Invalid document end`意味着 PHP 在没有关闭所有内容的情况下到达文件末尾。

例如，您可能在程序的后面有一个未终止的字符串：这意味着 PHP 将程序的其余部分视为在字符串中，然后当它到达程序末尾并且没有找到引号时抱怨特点。

或者你可能有不匹配的`{}`大括号。如果你缺少一个右大括号，那么 PHP 将继续寻找它，直到它发现没有右大括号不允许的情况（例如开始一个新类）或者它到达文件的末尾。

我的建议是在一个体面的文本编辑器中打开该文件——即进行语法高亮和括号匹配的编辑器。（如果您还没有，请尝试[Notepad++](http://notepad-plus-plus.org/)，但您还可以使用许多其他工具）。这将使您更容易看到代码发生了什么，因为应该突出显示错误。

# visual-studio-2010 - 分支中的 Visual Studio 性能优化

> ID：12778067
> 
> 赞同：1
> 
> 时间：2012-10-08T08:40:04.223
> 
> 标签：visual-studio-2010, performance, c#-4.0, optimization, compiler-optimization

考虑以下

```
while(true)
{
    if(x>5)
     // Run function A
    else
     // Run function B
} 
```

如果 x 总是小于 5，Visual Studio 编译器会做任何优化吗？即，从不检查 x 是否大于 5 并始终运行函数 B

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:29:41.437

这取决于编译器是否“知道”`x`总是小于`5`.

是的，几乎所有现代编译器都能够删除分支。但是编译器需要能够*证明*分支总是朝着一个方向发展。

* * *

下面是一个**可以**优化的例子：

```
int x = 1;

if (x > 5)
    printf("Hello\n");
else
    printf("World\n"); 
```

拆解是：

```
 sub rsp, 40                 ; 00000028H
    lea rcx, OFFSET FLAT:??_C@_06DKJADKFF@World?6?$AA@
    call    QWORD PTR __imp_printf 
```

`x = 1`可证明小于`5`。所以编译器能够删除分支。

* * *

但是在这个例子中，即使你总是输入小于 5，编译器也不知道。它必须承担任何输入。

```
int x;
cin >> x;

if (x > 5)
    printf("Hello\n");
else
    printf("World\n"); 
```

拆解是：

```
 cmp DWORD PTR x$[rsp], 5
    lea rcx, OFFSET FLAT:??_C@_06NJBIDDBG@Hello?6?$AA@
    jg  SHORT $LN5@main
    lea rcx, OFFSET FLAT:??_C@_06DKJADKFF@World?6?$AA@
$LN5@main:
    call    QWORD PTR __imp_printf 
```

树枝留着。但请注意，它实际上将函数调用提升到了分支之外。所以它真的把代码优化成这样：

```
const char *str = "Hello\n";

if (!(x > 5))
    str = "World\n";

printf(str); 
```

# spring - Mule 与 JPA 的兼容性

> ID：12778068
> 
> 赞同：0
> 
> 时间：2012-10-08T08:40:08.127
> 
> 标签：spring, hibernate, jpa, jpa-2.0, mule

我使用 Mule Studio 版本： 1.3.1 。

建造日期：201209061215

我无法获得 JPA 端点。我也下载`jpa-connector-1.0-20120925-2201.jar` 了但我不知道要与mule studio集成。

所以我决定使用一个简单的 Java 转换器并编写我的处理逻辑，该逻辑将在内部使用 JPA/Hibernate。

我开始知道我必须为 spring 使用 JPA 供应商适配器，否则我的任何服务都不会被实例化，DAO 类将被实例化。

如图所示，我已将数据源和 entityManager 声明为 mule flow xml 中的 spring bean。

```
<spring:bean id="dataSource"
            class="org.springframework.jdbc.datasource.DriverManagerDataSource">
                <spring:property name="driverClassName" value="com.mysql.jdbc.Driver" />
                <spring:property name="url" value="jdbc:mysql://localhost:3306/eigDB" />
                <spring:property name="username" value="root" />
                <spring:property name="password" value="tiger" />
        </spring:bean>

        <spring:bean id="entityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <spring:property name="dataSource" ref="dataSource" />
        <spring:property name="persistenceUnitName" value="autoRebateSystem" />
        <spring:property name="jpaVendorAdapter">
            <spring:bean
                class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <spring:property name="databasePlatform" value="org.hibernate.dialect.Oracle10gDialect" />
                <spring:property name="showSql" value="true" />
            </spring:bean> 
```

但是 mule flow xml 无法识别任何类的 spring 框架。发现很难替换那些类名。

Plez 为我的问题提供了解决方案，让我知道骡工作室的正确替代品。

```
1) org.springframework.jdbc.datasource.DriverManagerDataSource
2) org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean
3) org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:12:25.373

要将其集成到 MuleStudio 中，请在 MuleStudio 中添加此更新站点：

[http://tecnologia.2020mobile.es/jpa-cloud-connector/update-site/](http://tecnologia.2020mobile.es/jpa-cloud-connector/update-site/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:01:03.590

您是否缺少使用`HibernateJpaDialect`and `JpaTransactionManager`; 我希望下面的配置会有用。

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/yourdatabase"/>
    <property name="username" value="your- username"/>
    <property name="password" value="your- password"/>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
<!--<property name="dataSource" ref="dataSource"/>-->
    <property name="persistenceUnitName" value="<your-persistunit-name>"/>
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter"/>
    <property name="jpaDialect">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect/>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver">
        </bean>
    </property>
</bean>

<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="databasePlatform" value="org.eclipse.persistence.platform.database.MySQLPlatform"/>
<!--        <property name="databasePlatform" value="org.eclipse.persistence.platform.database.OraclePlatform" />-->
    <property name="generateDdl" value="false"/>
    <property name="showSql" value="false"/>
</bean> 
```

# jenkins - 无法登录到 jenkins 版本 1.466.2

> ID：12778071
> 
> 赞同：1
> 
> 时间：2012-10-08T08:40:15.410
> 
> 标签：jenkins

我安装了jenkins，一切都很好，直到我将jenkins中的Security Realm配置为Unix用户/组数据库到一个名为“build”的用户，因为它存在于我的构建机器上，现在我无法登录到jenkins。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T12:43:59.770

找到 JENKINS_HOME/config.xml 并将 false 设置为 useSecurity 标志。请看下面

```
<?xml version='1.0' encoding='UTF-8'?>
<hudson>
  <disabledAdministrativeMonitors/>
  <version>1.452</version>
  <numExecutors>1</numExecutors>
  <mode>NORMAL</mode>
  <useSecurity>true</useSecurity>  <---
  <authorizationStrategy class="hudson.security.GlobalMatrixAuthorizationStrategy"> 
```

重新启动 Jenkins 并尝试仔细配置所有内容。

# powerbuilder - 在 PowerBuilder 中确定操作系统类型。

> ID：12778072
> 
> 赞同：0
> 
> 时间：2012-10-08T08:40:20.373
> 
> 标签：powerbuilder

PowerBuilder中如何判断操作系统是64位还是32位？

是否可以使用 GetEnvironment 获得它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T02:55:20.153

检查环境变量很容易，但它不是防弹的，因为用户可以重新定义该值。

更稳健的方法是检查当前 Powerbuilder 进程是否在 WOW64 模式（32 位仿真模式）下运行。

```
[Local external definitions]
FUNCTION long IsWow64Process(long hwnd, ref  boolean Wow64Process) &
    LIBRARY "Kernel32.DLL"

FUNCTION long GetCurrentProcess ()  LIBRARY "KERNEL32.DLL"

[Powerscript]
boolean wow64 =false
IsWow64Process(GetCurrentProcess(), wow64)
MessageBox("Running in 64b env", wow64) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:22:25.153

`GetEnvironment`可以通过其`CPUType`属性提供有关 cpu 的一些信息，但它只会返回平台类型（alpha，mips，pentium，...）。

您可以从仅在 64b 平台上定义的环境中测试一些显着的值，例如`ProgramFiles(x86)`使用`GetContextService`/`GetContextKeywords`并将环境变量设置为查询的上下文关键字：

```
string ls_vals[], ls_val, ls_env = "ProgramFiles(x86)" /*name of the env variable to query*/
ContextKeyword lcxk_base

GetContextService("Keyword", lcxk_base)
lcxk_base.GetContextKeywords(ls_env, ls_vals[])
if upperbound(ls_vals[]) > 0 then
   ls_val = ls_vals[1]
else
   ls_val = "*undefined*" //it is 32b
end if

messagebox ("architecture", ls_val) 
```

我会建议首先测试`PROCESSOR_ARCHITECTURE`环境变量，即`AMD64`在 Windows 64b 的 shell 中，但似乎 PB 可执行文件得到`x86`......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T11:02:02.603

您可以使用 Roland Smith 网站上的免费代码。

[http://www.topwizprogramming.com/freecode_osversion.html](http://www.topwizprogramming.com/freecode_osversion.html)

“该程序返回有关操作系统版本的信息。它返回操作系统名称、版本和服务包。它还具有从 .dll 和 .exe 文件返回版本字符串的功能。”

# c# - 语义缩放分组数据绑定和访问单个项目

> ID：12778073
> 
> 赞同：1
> 
> 时间：2012-10-08T08:40:20.683
> 
> 标签：c#, xaml, data-binding, windows-8, windows-runtime

我将数据绑定到我的 ZoomedOut 语义缩放，如下所示：

```
var result = from title in _allTitles group title by title._titleSubject into grp orderby     grp.Key select grp;
groupedTitlesSource.Source = result;
(semanticZoom.ZoomedOutView as ListViewBase).ItemsSource = groupedTitlesSource.View.CollectionGroups; 
```

并且正在使用 Group.Key 访问密钥，但我还想访问组中的第一项，最简单的方法是什么？我的 Xaml 在 ZoomedOutView 下方：

```
 <SemanticZoom.ZoomedOutView>
                <GridView x:Name="zoomedOutGridView" HorizontalAlignment="Center">
                    <GridView.ItemTemplate>
                        <DataTemplate>
                            <Grid Width="210" Height="140" Background="#CC196CFF">
                                <TextBlock
                                    Text="{Binding Group.Key}"
                                    FontFamily="Segoe UI Light"
                                    FontSize="24"
                                    Foreground="White"
                                    VerticalAlignment="Top"/>

                                <!-- Also want to access the first item in the group here -->
                            </Grid>    
                        </DataTemplate>
                    </GridView.ItemTemplate>
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapGrid />
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                </GridView>
            </SemanticZoom.ZoomedOutView> 
```

任何帮助都会很棒，而且我对此很陌生，尽可能简单:)谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:14:54.073

首先，您的 Group.Key 应该在 GridView.GroupStyle 中，并且您的项目应该在 GridView.ItemTemplate 下。有了它，您将能够访问组项目本身。

# c# - 如何获得所需的日期时间格式

> ID：12778075
> 
> 赞同：-3
> 
> 时间：2012-10-08T08:40:31.017
> 
> 标签：c#

我想以这样的格式生成当前日期和时间 **Mon, 10/08/12 12:29:39**。但是当我使用下面显示的代码时

```
DateTime date = DateTime.Now; 
```

我越来越喜欢**10/8/2012 12:29:39 PM**，但我实际上想要像**Mon, 10/08/12 12:29:39**这样的格式，我可以使用此代码中的哪些更改来获得所需的输出。我也做了这段代码，但没有成功

```
string format = "MMM ddd d HH:mm yyyy";    // Use this format
    Console.WriteLine(time.ToString(format)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:42:43.430

```
Console.WriteLine(time.ToString("ddd, MM/dd/yy hh:mm:ss")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:51:42.960

您可以将此代码用于所有详细的日期时间

```
string inp;
DateTime inpdate = DateTime.ParseExact(inp, "dd/mm/yyyy", System.Globalization.CultureInfo.CurrentUICulture.DateTimeFormat); 
```

你也使用这个代码没有时间

```
ret = pc.ToDateTime(Convert.ToInt32(inp.Split('/')[2]), Convert.ToInt32(inp.Split('/')[1]), Convert.ToInt32(inp.Split('/')[0]), 0, 0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:42:35.577

```
string format = "ddd, MM/dd/yy HH:mm:ss"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T08:45:20.700

不要忘记提供`Culture`（或`InvariantCulture`）作为格式化参数。否则它将默认为`UI culture`可能并不总是提供您期望的格式。

```
string format = time.ToString("ddd, MM/dd/yy hh:mm:ss", CultureInfo.InvariantCulture); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T08:45:38.330

你应该阅读这个页面以备不时之需

自定义日期和时间格式字符串：http: [//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T08:42:43.517

您可以使用其中一种内置方法来指定格式，例如：

```
.ToShortDateTimeString(); 
```

或在 .ToString() 方法的参数中指定字符串格式。

例子：

```
.ToString("hh/MM/yyyy"); 
```

您可以在 MSDN 页面上找到所有可用的字符串格式，或者您只需 google 一下。

# ios6 - IOS 6 是否提供任何方法来获取未接电话号码和已接电话号码？

> ID：12778076
> 
> 赞同：1
> 
> 时间：2012-10-08T08:40:32.857
> 
> 标签：ios6, core-telephony

我想通过我的应用程序知道未接来电号码和已接来电号码。较早的ios版本（早于ios6.0）没有任何方法或框架可以通过我们获取未接电话号码和已接电话号码列表。

在旧版本的 ios（早于 ios6）中，我使用这种应用程序委托方法识别了未接来电。

*   如果用户接受调用，则调用 applicationDidEnterBackground，然后当用户切换回您的应用程序时，将调用 applicationDidBecomeActive。

*   如果用户拒绝呼叫或呼叫者在接受/拒绝之前结束呼叫，将调用 applicationDidBecomeActive。

第二种情况表示未接来电。

所以我问

1.  更新的 ios6 是否提供任何方式来获取未接电话号码和已接电话号码。？？？

谢谢。

# php - 多维数组键重新分配

> ID：12778082
> 
> 赞同：0
> 
> 时间：2012-10-08T08:40:49.653
> 
> 标签：php, multidimensional-array

我在多维数组上苦苦挣扎......我已经合并到数组中，我应该为它们分配一个新值，该值应该用作键：

```
$content = array();
$content[0]['text'] = 'xxxxx';
$content[0]['order']=1

$content[1]['text'] = 'yyyy';
$content[1]['order']=3

$content[2]['text'] = 'yyyyddd';
$content[2]['order']=2 
```

我需要按 content['order'] 值重新排序这个数组，我在这里挣扎。

拜托，我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:47:50.903

尝试使用[`usort`](http://php.net/manual/en/function.usort.php)：

```
function sort_orders($a, $b) {
    if($a['order'] == $b['order']) 
    {
        return 0;
    }
    return ($a['order'] < $b['order']) ? -1 : 1;
}

usort($content, "sort_orders"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:49:49.920

您可以使用[usort()](http://es.php.net/manual/en/function.usort.php)和比较函数来完成，如下所示：

```
function cmp($a, $b) {
    if ($a['order'] == $b['order']) {
        return 0;
    }
    return ($a['order'] < $b['order']) ? -1 : 1;
}

usort($content, 'cmp'); 
```

# javascript - 正则表达式只有空格和字母？

> ID：12778083
> 
> 赞同：31
> 
> 时间：2012-10-08T08:40:50.420
> 
> 标签：javascript, jquery

我做了一个只接受字母的正则表达式。我不太擅长正则表达式，这就是为什么我不知道如何在我的正则表达式中包含空格。

**我的 HTML：**

```
<input id="input" /> 
```

**我的 js / jQuery 代码：**

```
$('#input').on('keyup', function() {
      var RegExpression = /^[a-zA-Z]*$/; 

      if (RegExpression.test($('#input').val())) {

      } 
      else {
          $('#input').val("");
      }
});​ 
```

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-10-08T08:48:38.863

使用这个表达式

```
var RegExpression = /^[a-zA-Z\s]*$/; 
```

有关更多信息，请参阅此[http://tools.netshiftmedia.com](http://tools.netshiftmedia.com/regexlibrary/#)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T08:42:27.973

```
$('#input').on('keyup', function() {
     var RegExpression = /^[a-zA-Z\s]*$/;  
     ...

}); 
```

`\s`将允许空间

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T08:43:52.290

请试试这个演示：http: [//jsfiddle.net/sgpw2/](http://jsfiddle.net/sgpw2/)

感谢 Jan 提供空间`\s`休息，此链接中有一些很好的细节：

[http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/#.UHKS5UIihlI](http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/#.UHKS5UIihlI)

希望能满足你的需要`:)`

**代码**

```
 $(function() {

    $("#field").bind("keyup", function(event) {
        var regex = /^[a-zA-Z\s]+$/;
        if (regex.test($("#field").val())) {
            $('.validation').html('valid');
        } else {
            $('.validation').html("FAIL regex");
        }
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-14T12:58:32.510

这个对我很有用

```
/[^a-zA-Z' ']/g 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-13T12:43:14.170

正则表达式：

```
var reg_name_lastname = /^[a-zA-Z\s]*$/; 
```

验证 user_name 输入字段

```
if(!reg_name_lastname.test($('#user_name').val())){ //
    alert("Correct your First Name: only letters and spaces.");
    valid = false;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-27T08:39:32.527

只允许字符和空格。前任 ：`Jayant Lonari`

```
if (!/^[a-zA-Z\s]+$/.test(NAME)) {
    //Throw Error
} 
```

# javascript - 删除主干模型上的一堆属性

> ID：12778084
> 
> 赞同：0
> 
> 时间：2012-10-08T08:40:52.397
> 
> 标签：javascript, backbone.js

什么是删除 Backbone 模型上的一堆属性的最佳方法。我考虑使用我想要保留或删除未使用的属性的属性创建一个新模型。对于这项任务有什么建议或更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:44:58.073

如果您想留在 Backbone 框架内，请使用 model.clear 和 .set() 之后的新属性。

否则你还不如直接覆盖 model.attributes 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:25:53.127

要删除属性，请使用 model.unset 方法。

# asp.net-mvc - allowDefinition='MachineToApplication' 错误设置 真的

> ID：12778088
> 
> 赞同：6
> 
> 时间：2012-10-08T08:41:07.987
> 
> 标签：asp.net-mvc, msbuild, visual-studio-2012

在我的 Asp.Net MVC 4 项目中，我在 .csproj 文件中设置了构建视图`<MvcBuildViews>true</MvcBuildViews>`。问题是构建项目时出现错误：

`It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level. This error can be caused by a virtual directory not being configured as an application in IIS.`

我试图删除 obj 文件夹，但错误不断出现。该错误表明问题出在身份验证标记行中：

```
<system.web>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication> 
```

通常，我可以通过运行应用程序（我收到错误）、构建应用程序然后再次运行来运行应用程序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-07T17:50:06.773

执行@matrixugly 建议的操作将解决问题，但也会导致编译时视图检查也停止工作。我假设您仍然想在编译时错误检查您的视图？如果是这种情况，请在下面进行更好的修复。

为了理解为什么这些解决方案有效，我们首先要知道问题是如何产生的：

1.  开发人员希望在编译时检查视图，因此他们将`MvcBuildViews=true`.
2.  应用程序构建良好，直到他们发布项目。
3.  随后尝试构建项目会导致编译时错误：`It is an error to use a section registered as allowDefinition='MachineToApplication' beyond application level. This error can be caused by a virtual directory not being configured as an application in IIS.`

那么是什么导致了这个问题呢？当项目发布时，编译器默认使用它`<project-dir>\obj\`来放置将使用的源文件的副本。不幸的是，这些文件不会在发布完成后自动删除。下次开发人员用 编译项目时`MvcBuildViews=true`，会报错，因为 aspnet 编译器`obj\`在编译期间包含该文件夹，因为它位于该`<project-dir>`文件夹下。

那么我们如何解决这个问题呢？好吧，你有四个选择：

1.  设置`MvcBuildViews=false`。我真的不认为这是一个解决方案，所以让我们继续。
2.  删除`<project-dir>\obj\`. 有效，但可能很麻烦，因为必须在每次发布后完成。
3.  `<BaseIntermediateOutputPath>`通过使用项目配置文件中的属性来更改发布用作中间目录的路径。

    示例（参考：[此链接](https://stackoverflow.com/questions/2566215)）：

    `<BaseIntermediateOutputPath> [SomeKnownLocationIHaveAccessTo] </BaseIntermediateOutputPath>`

4.  在您的项目配置文件中添加一个新部分，该部分会在构建时为您删除有问题的文件（参考[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/779737)）。我什至让你很容易，只需复制和粘贴：

    ```
    <PropertyGroup>
    <_EnableCleanOnBuildForMvcViews Condition=" '$(_EnableCleanOnBuildForMvcViews)'=='' ">true</_EnableCleanOnBuildForMvcViews>
    </PropertyGroup>
    <Target Name="CleanupForBuildMvcViews" Condition=" '$(_EnableCleanOnBuildForMvcViews)'=='true' and '$(MVCBuildViews)'=='true' " BeforeTargets="MvcBuildViews">
    <ItemGroup>
        <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\Package\**\*" />
        <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\TransformWebConfig\**\*" />
        <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\CSAutoParameterize\**\*" />
        <_TempWebConfigToDelete Include="$(BaseIntermediateOutputPath)**\TempPE\**\*" />
    </ItemGroup>

    <Delete Files="@(_TempWebConfigToDelete)"/>
    </Target> 
    ```

我的建议是使用选项 3 或 4。

NB 对于那些从未编辑过他们的项目文件的人，您无法在加载时对其进行编辑。必须首先通过右键单击它并选择 来卸载它`Unload Project`。然后，您可以右键单击项目并编辑项目文件。或者，您可以在 Visual Studio 之外编辑该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T14:40:06.507

在启用 MvcBuildViews 验证我的 Razor 语法后尝试发布我的 Web 应用程序时，我遇到了完全相同的问题

我在我的网络配置中找到了这段代码

```
 <Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
    <AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
  </Target> 
```

尝试将其注释掉，这样编译器的行为就不会改变

```
 <!--<Target Name="MvcBuildViews" AfterTargets="AfterBuild" Condition="'$(MvcBuildViews)'=='true'">
<AspNetCompiler VirtualPath="temp" PhysicalPath="$(WebProjectOutputDir)" />
</Target>--> 
```

# c++ - 随机数生成器：它应该用作单例吗？

> ID：12778092
> 
> 赞同：4
> 
> 时间：2012-10-08T08:41:18.720
> 
> 标签：c++, design-patterns, random, c++03

我在几个地方使用随机数，并且通常在需要时构建一个随机数生成器。目前我使用 Marsaglia Xorshift 算法用当前系统时间播种它。现在我对这个策略有些怀疑：如果我使用多个生成器，那么生成器之间的数字的独立性（随机性）取决于种子（相同的种子相同的数字）。因为我使用时间（ns）作为种子，并且因为这个时间改变了这个工作，但我想知道是否只使用一个单一的生成器会不会更好，例如让它作为一个单例可用。这会增加随机数的质量吗？

编辑：不幸的是，c++11 还不是一个选项

编辑：更具体地说：我并不是说单例可以提高随机数质量，而是只使用一个生成器并播种的事实。否则，我必须确保不同生成器的种子彼此独立（随机）。极端的例子：我用完全相同的数字播种了两个生成器->它们之间没有随机性

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T10:47:50.987

假设您有几个变量，每个变量都需要是随机的，独立于其他变量，并且会定期重新分配来自某个随机生成器的新随机值。这种情况经常发生在蒙特卡洛分析和游戏中（尽管游戏的严谨性远低于蒙特卡洛）。如果存在完美的随机数生成器，则可以使用它的单个实例化。将生成器中的第*n*^个伪随机数分配给变量*x* [1]，下一个随机数分配给变量*x* [2]，下一个分配给*x* [3]，依此类推，最终回到变量*x* [1]在下一个周期。大约。这里有一个问题：当使用这种方式时，太多的 PRNG 未能通过独立性测试，有些甚至无法通过单个序列的随机性测试。

我的方法是使用单个 PRNG 生成器作为一组*N*个自包含 PRNG 实例的种子生成器。后面这些 PRNG 的每个实例都提供一个变量。通过自包含，我的意思是 PRNG 是一个对象，在实例成员中而不是在静态成员或全局变量中维护状态。种子生成器甚至不需要与其他*N来自同一家族*PRNG。它只需要在多个线程同时尝试使用种子生成器的情况下是可重入的。但是，在我的使用中，我发现最好在线程开始之前设置 PRNG，以保证可重复性。那是一次运行，一次执行。蒙特卡洛技术通常需要数千次执行，也许更多，也许更多。对于 Monte Carlo，可重复性至关重要。所以还需要一个随机种子生成器。这个种子生成器用于生成变量的*N个生成器。*

可重复性很重要，至少在蒙特卡洛世界是这样。假设一次长蒙特卡罗模拟的第 10234 次运行导致一些严重的失败。很高兴看到世界上发生了什么。这可能是统计上的侥幸，也可能是个问题。问题在于，在典型的 MC 设置中，只记录了最少的数据，足以计算统计数据。要查看运行编号 10234 中发生了什么，需要重复该特定情况，但现在记录所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:50:58.627

每当客户端相互关联并且代码需要“独立”随机数时，您应该使用随机生成器类的相同实例。

当客户端不相互依赖时，您可以使用随机生成器类的不同对象，并且它们是否收到相同的数字并不重要。

请注意，对于测试和调试而言，能够再次创建相同的随机数序列非常有用。因此，您不应该“随机播种”太多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:46:53.337

我不认为它增加了随机性，但它减少了每次你想使用随机生成器时创建对象所需的内存。如果此生成器没有任何特定于实例的设置，您可以创建一个单例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:02:25.300

> 因为我使用时间（ns）作为种子，并且因为这个时间改变了这个工作，但我想知道是否只使用一个单一的生成器会不会更好，例如让它作为一个单例可用。

当单例不是反模式时，这是一个很好的例子。您还可以使用某种[控制反转](http://en.wikipedia.org/wiki/Inversion_of_control)。

> 这会增加随机数的质量吗？

不会。质量取决于生成随机数的算法。你如何使用它是无关紧要的（假设它使用正确）。

对于您的编辑：您可以创建某种容器来保存您的 RNG 类的对象（或使用现有容器）。像这样的东西：

```
std::vector< Rng > & RngSingleton()
{
  static std::vector< Rng > allRngs( 2 );
  return allRngs;
}

struct Rng
{
  void SetSeed( const int seen );
  int GenerateNumber() const;
//...
};

// ...
RngSingleton().at(0).SetSeed( 55 );
RngSingleton().at(1).SetSeed( 55 );
//...
const auto value1 = RngSingleton().at(0).GenerateNumber;
const auto value2 = RngSingleton().at(1).GenerateNumber; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-08T10:48:02.267

工厂模式来拯救。客户端永远不必担心其依赖项的实例化规则。它允许交换创建方法。反过来，如果你决定使用不同的算法，你可以交换生成器类，客户端不需要重构。 [http://www.oodesign.com/factory-pattern.html](http://www.oodesign.com/factory-pattern.html)

- 编辑

添加了伪代码（对不起，它不是 c++，自从我上次工作以来，它是很久以前的事情了）

```
interface PRNG{
    function generateRandomNumber():Number;
}

interface Seeder{
    function getSeed() : Number;
}

interface PRNGFactory{
    function createPRNG():PRNG;
}

class MarsagliaPRNG implements PRNG{
    constructor( seed : Number ){
        //store seed
    }

    function generateRandomNumber() : Number{
        //do your magic
    }
}

class SingletonMarsagliaPRNGFactory implements PRNGFactory{
    var seeder : Seeder;
    static var prng : PRNG;
    function createPRNG() : PRNG{
        return prng ||= new MarsagliaPRNG( seeder.getSeed() );
    }
}

class TimeSeeder implements Seeder{
    function getSeed():Number{
        return now();
    }
}

//usage:
seeder : Seeder = new TimeSeeder();
prngFactory : PRNGFactory = new SingletonMarsagliaPRNGFactory();

clientA.prng = prngFactory.createPRNG();
clientB.prng = prngFactory.createPRNG();
//both clients got the same instance. 
```

现在最大的优势是，如果您想要/需要更改任何实现细节，客户端无需更改任何内容。您可以更改播种方法、RNG 算法和实例化规则，而无需在任何地方接触任何客户端。

# sql-server - SQL Server 外键导致循环或多个级联路径

> ID：12778093
> 
> 赞同：1
> 
> 时间：2012-10-08T08:41:18.783
> 
> 标签：sql-server, liquibase

我在将级联删除添加到 SQL Server 中的外键时遇到问题。表 A 有三列。表 A 中的第 1 列和第 2 列是对表 B 中同一列的外键查找。我希望删除表 B 中的一行，以便根据这些外键对表 A 上的一行进行删除。

表 A 中的另一列具有对表 C 的外键查找。如果表 C 中的一行被删除，那么我希望将表 A 中的相应单元格设置为空。

当我添加这些约束时，我会抛出错误：

在表“RelatedDeliverableUnit”上引入 FOREIGN KEY 约束“FK_RDU_TODELIVERABLEUNITREF”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

我对此有点坚持，Oracle 似乎对这个逻辑非常满意。我正在使用 Liquibase 添加这些约束。我认为错误取决于我的逻辑而不是语法，但为了完整起见，这里是管理外键的 Liquidbase 脚本：

```
 <addForeignKeyConstraint constraintName="FK_RDU_FROMDELIVERABLEUNITREF" baseTableName="relatedDeliverableUnit"
                             baseColumnNames="FROMDELIVERABLEUNITREF" referencedTableName="DELIVERABLEUNIT" referencedColumnNames="DELIVERABLEUNITREF" onDelete="CASCADE"/>

    <addForeignKeyConstraint constraintName="FK_RDU_TODELIVERABLEUNITREF" baseTableName="relatedDeliverableUnit"
                             baseColumnNames="TODELIVERABLEUNITREF" referencedTableName="DELIVERABLEUNIT" referencedColumnNames="DELIVERABLEUNITREF" onDelete="CASCADE"/>                        

    <addForeignKeyConstraint constraintName="FK_RDU_RELATIONSHIPREF"
                             baseTableName="relatedDeliverableUnit" baseColumnNames="RELATIONSHIPREF" referencedTableName="RELATIONSHIPTYPES" referencedColumnNames="RELATIONSHIPREF" onDelete="SET NULL"/> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:23:46.590

我找不到更高版本的相应文档，但[SQL Server 2000 BOL](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)解决了这个问题：

> 由单个 DELETE 或 UPDATE 触发的一系列级联引用操作必须形成不包含循环引用的树。在由 DELETE 或 UPDATE 产生的所有级联引用操作的列表中，任何表都不能出现多次。级联引用操作的树不能有多个到任何给定表的路径。树的任何分支在遇到未指定 NO ACTION 或为默认值的表时都会终止。

以后的版本并没有改变这一点。你犯了这个错误：

> 级联引用操作树不能有多个路径到任何给定表

我知道实现这一点的唯一方法是使用`INSTEAD OF`触发器实现 B 和 A 之间的级联之一，而不是使用`ON DELETE...`.

表 A 和 C 之间的关系不应受到任何影响。

* * *

（[2008 年提单](http://msdn.microsoft.com/en-us/library/ms186973%28v=sql.100%29.aspx)）

# javascript - Rails 3 个不同的自动完成字段

> ID：12778097
> 
> 赞同：0
> 
> 时间：2012-10-08T08:41:33.130
> 
> 标签：javascript, ruby-on-rails, view, textfield, jquery-autocomplete

我在一个页面上有 2 个不同的自动完成字段，每个字段都从数据库中的不同来源填充。我的问题是当我测试页面时，两个自动完成行为有时会在彼此的文本字段中切换。

我的视图部分如下所示（我遵循了[railscasts](http://railscasts.com/episodes/102-auto-complete-association-revised)）：

```
<fieldset>
  <%= f.text_field :ability_title, {:class => 'autocomplete_field', data: { autocomplete_source: abilities_path } } %>
  <%= f.label :points %>: <%= f.text_field :points %>
  <%= f.hidden_field :_destroy %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</fieldset>

<fieldset>
  <%= f.text_field :mission_title, {:class => 'autocomplete_field', data: {autocomplete_source: missions_path } } %>
  <%= f.hidden_field :_destroy %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</fieldset> 
```

我的JavaScript：

```
jQuery ->
  $('fieldset').live 'click', ->
    $('.autocomplete_field').autocomplete
      source: $('.autocomplete_field').data('autocomplete-source') 
```

我的控制器：

```
def index
  if params[:term].present?
    @abilities = Ability.search_titles(params[:term])
  else
    @abilities = Ability.all
  end

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @abilities }
  end
end

def index
  if params[:term].present?
    @missions = Mission.search_titles(params[:term])
  else
    @missions = Mission.all
  end

  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @missions.map(&:title) }
  end
end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:57:32.197

我认为您只需要按 id 区分两个文本字段，例如：

```
<fieldset>
  <%= f.text_field :ability_title, {:id => 'autocomplete_field1', data: { autocomplete_source: abilities_path } } %>
  <%= f.label :points %>: <%= f.text_field :points %>
  <%= f.hidden_field :_destroy %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</fieldset>

<fieldset>
  <%= f.text_field :mission_title, {:id => 'autocomplete_field2', data: {autocomplete_source: missions_path } } %>
  <%= f.hidden_field :_destroy %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</fieldset>
My javascript:

jQuery ->
  $('fieldset').live 'click', ->

    $('#autocomplete_field1').autocomplete
      source: $('#autocomplete_field1').data('autocomplete-source')
    $('#autocomplete_field2').autocomplete
      source: $('#autocomplete_field2').data('autocomplete-source') 
```

编辑：更优雅的解决方案：

```
jQuery ->
  $('fieldset').live 'click', ->
    $('#autocomplete_field1, #autocomplete_field2').each (index, element) =>
      $(element).autocomplete
        source: $(element).data('autocomplete-source') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:14:16.213

试试这是否可行，请替换您的 js 文件中的源代码

```
source: $(this).data('autocomplete-source') 
```

# android - 如何在android中更改下拉视图的标题？

> ID：12778102
> 
> 赞同：5
> 
> 时间：2012-10-08T08:42:16.503
> 
> 标签：android, android-layout, android-widget

我的布局中有一个微调器并使用`android:prompt="@string/year"`.

默认提示如下所示：

![默认提示看起来像](../Images/8555d0a8ec56a8b23433baec8e3360aa.png)

现在我的问题是：

1.  如何将默认图标更改为另一个图像？
2.  如何让“年份”文本以红色显示在中心？
3.  如何将背景颜色更改为黄色（存在“年份”文本和图标的背景）？

我的自定义适配器类

```
private class MyCustomSpinnerAdapter extends ArrayAdapter<ArrayList> {
        private ArrayList<String> objectsList = new ArrayList<String>();

        @SuppressWarnings("unchecked")
        public MyCustomSpinnerAdapter(Context context, int textViewResourceId,
                ArrayList objects) {
            super(context, textViewResourceId, objects);
            this.objectsList = objects;
        }

        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView1(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView,
                ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            View rowView = inflater.inflate(R.layout.spinner_dropdown, parent,
                    false);
            LinearLayout rowTitle = (LinearLayout) rowView
                    .findViewById(R.id.row);

            rowTitle.setBackgroundResource(R.drawable.spinner_row_focused);

            TextView textView = (TextView) rowView.findViewById(R.id.title);
            textView.setTypeface(typeFace);
            textView.setText(objectsList.get(position).toString().trim());
            return rowView;
        }

        public View getCustomView1(int position, View convertView,
                ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            View rowView = inflater.inflate(R.layout.spinner_dropdown, parent,
                    false);

            TextView textView = (TextView) rowView.findViewById(R.id.title);
            textView.setText(objectsList.get(position).toString().trim());
            textView.setTypeface(typeFace);
            return rowView;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:18:40.410

这是您的解决方案：为标题（文件`R.layout.spinner_head`）创建简单的布局：

```
<ImageView
    android:id="@+id/spin_img"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0" 
    android:padding="5dip"
    android:src="@android:drawable/btn_star"
    android:layout_alignParentLeft="true"/>

<TextView
    android:id="@+id/title"
    android:textColor="#f00"
    android:gravity="center"
    android:text="Year"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true" 
    /> 
```

创建自定义微调器：

```
class MySpinner extends Spinner {

        public MySpinner(Context context) {
            super(context);
        }

        @Override
        public boolean performClick() {
            boolean handled =  false;//super.performClick();

            if (!handled) {

                handled = true;

                Context context = getContext();

                AlertDialog.Builder builder = new AlertDialog.Builder(context);
                CharSequence mPrompt = getPrompt();
                if (mPrompt != null) {

                    builder.setCustomTitle(getLayoutInflater().inflate(R.layout.spinner_head, null));

                }

                builder.setSingleChoiceItems(new DropDownAdapter(getAdapter()),getSelectedItemPosition(), this).show();

            }

            return handled;
        }

        @Override
        public void onClick(DialogInterface dialog, int which) {
            setSelection(which);
            dialog.dismiss();
        }

        class  DropDownAdapter implements ListAdapter, SpinnerAdapter {
            private SpinnerAdapter mAdapter;

            public  DropDownAdapter(SpinnerAdapter adapter) {
                this.mAdapter = adapter;
            }

            @Override
            public int getCount() {
                return mAdapter == null ? 0 : mAdapter.getCount();
            }

            @Override
            public Object getItem(int position) {
                return mAdapter == null ? null : mAdapter.getItem(position);
            }

            @Override
            public long getItemId(int position) {
                return mAdapter == null ? -1 : mAdapter.getItemId(position);
            }

            @Override
            public int getItemViewType(int position) {
                return 0;
            }

            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                return getDropDownView(position, convertView, parent);
            }

            @Override
            public int getViewTypeCount() {
                return 1;
            }

            @Override
            public boolean hasStableIds() {
                return mAdapter != null && mAdapter.hasStableIds();
            }

            @Override
            public boolean isEmpty() {
                return getCount() == 0;
            }

            @Override
            public void registerDataSetObserver(DataSetObserver observer) {
                 if (mAdapter != null) {
                     mAdapter.registerDataSetObserver(observer);
                 }

            }

            @Override
            public void unregisterDataSetObserver(DataSetObserver observer) {
                 if (mAdapter != null) {
                     mAdapter.unregisterDataSetObserver(observer);
                 }

            }

            @Override
            public View getDropDownView(int position, View convertView,
                    ViewGroup parent) {
                return mAdapter == null ? null : mAdapter.getDropDownView(position, convertView, parent);
            }

            @Override
            public boolean areAllItemsEnabled() {
                return true;
            }

            @Override
            public boolean isEnabled(int arg0) {
                return true;
            }

        }
    } 
```

创建微调器的实例

```
MySpinner theSpin = new MySpinner(this);
            theSpin.setPrompt("Select Item");
            ArrayAdapter<String> theAdapter = 
                new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, new String[]{"item1","item2","item3","item4","item5","item6" });
            theSpin.setAdapter(theAdapter); 
```

现在使用这个自定义微调器，它将显示自定义标题。您可以根据需要修改该标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:03:38.280

我认为你最好准备像自定义 ListView 这样的自定义微调器并检查此链接[http://android-er.blogspot.in/2010/12/custom-spinner-with-icon.html](http://android-er.blogspot.in/2010/12/custom-spinner-with-icon.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-27T06:46:02.217

这里只需更改名称微调器的设置提示并将名称作为字符串传递在那里，下面我给出的语法如下所示 -

```
spinner.setPrompt("Name of Your Header"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T18:29:40.350

我查看了`Spinner`类代码，有`DialogPopup`一个内部私有类。此类封装`AlertDialog`并`ListView`显示在 Spinner 对话框中。它是私有的，所以我们不能扩展它。

这是一个可能对您有所帮助的答案：[如何将 Android Spinner 创建为弹出窗口？](https://stackoverflow.com/questions/6286847/how-do-i-create-an-android-spinner-as-a-popup)

除了接受的答案中的代码之外，调用`setCustomTitle`对话框以拥有您自己的样式标题视图或在`AlertDialog`xml 布局中找到图标视图的 id，如果您只想更改图标，则直接设置图标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T06:41:06.703

要更改文本的颜色，您可以尝试使用 HTML

```
String redText = "This is <font color='red'>Red text</font>.";
mSpinner.setPrompt(Html.fromHtml(redText)); 
```

您可以尝试按照本文建议的方式破解标题 [如何自定义对话框的标题布局](https://stackoverflow.com/questions/1935257/how-can-i-customize-the-header-layout-of-a-dialog)

```
Window window = mSpinner.getWindow();
window.requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
window.setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.my_custom_header); 
```

其中 R.layout.my_custom_header 是您定义要在标题中显示的内容的布局。我没有尝试过，只是偏离了我上面引用的帖子中的建议。

但可能你最好的选择是听 Chiru 并制作你自己的自定义视图，让它看起来完全像你想要的那样。

# android - 如何在列表视图中设置印地语字体

> ID：12778107
> 
> 赞同：2
> 
> 时间：2012-10-08T08:42:25.303
> 
> 标签：android, android-layout, android-intent, android-widget

我的问题是如何在android的自定义列表视图中更改印地语字体。我正在使用此代码 Typeface HindiFont=Typeface.createFromAsset(getAssets(),"fonts/DroidHindi.ttf"); // 将 menuItems 添加到 ListView

```
 ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost });
        // Typeface tf = Typeface.createFromAsset(getAssets(),   "fonts/DroidHindi.ttf");

        setListAdapter(adapter);

        // selecting single ListView item
        ListView lv = getListView(); 
```

请帮帮我。提前致谢！！！！！！！！！

我重写了 getView 方法但无法工作。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:59:07.050

将印地语 truetype 字体文件放在资产文件夹中

并创建自定义适配器

```
public class MyArrayAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public MyArrayAdapter(Context context, String[] values) {
        super(context, R.layout.list_mobile, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_mobile, parent, false);

        TextView textView = (TextView) rowView.findViewById(R.id.label);

        //here use your true type font of hindi like this hindiFonts.ttf is placed inside asset/fonts/ folder of project
        Typeface face=Typeface.createFromAsset(getAssets(), "fonts/hindiFonts.ttf"); 
        textView .setTypeface(face); 
        textView.setText(values[position]);

        return rowView;
    }
} 
```

在您的列表视图中设置上面的自定义适配器

```
String[] MOBILE_OS = 
               new String[] { "Android", "iOS", "WindowsMobile", "Blackberry"};

        myListView.setListAdapter(new MyArrayAdapter(this, MOBILE_OS)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:49:50.263

重写 SimpleAdapter 类的 getView 方法，并在 textview 上设置字体，您要更改字体，如下所示：

```
ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_NAME, KEY_DESC, KEY_COST }, new int[] {
                        R.id.name, R.id.desciption, R.id.cost }){

 public View getView(View view)
{
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(LAYOUT_INFLATER_SERVICE);
    Typeface hindiFont=Typeface.createFromAsset(getAssets(),"fonts/DroidHindi.ttf"); 
    LinearLayout llMain=(LinearLayout)inflater.inflate(R.layout.list_item, null);
    TextView txtName=(TextView)llMain.findViewById(R.id.name);
    txtName.setTypeface(hindiFont); 
    TextView txtDescription=(TextView)llMain.findViewById(R.id.desciption);
    txtDescription.setTypeface(hindiFont);
    return llMain;
}
}; 
```

# jquery - jQuery - mouseleave 上的 setInterval 和 mouseenter 上的 clearInterval

> ID：12778113
> 
> 赞同：0
> 
> 时间：2012-10-08T08:42:36.263
> 
> 标签：jquery, function, setinterval, mouseleave, clearinterval

我正在尝试动态添加一些`DIVS`（*具有动态添加的功能*）到`CONTAINER`. 当我点击其中的某个人时`DIVs`，`MENU`就是插入到这个`DIV`。`mouseleave`我需要在大约 5秒内从`MENU`这里移除。它有效，但混乱......所以我需要：`DIV``delay``setInterval`

1.  当`mouseleave`离开这个`DIV`然后我立即将鼠标放回这个`DIV`时，我需要停止`delay` 或`setInterval`。我需要停止删除`MENU`.

2.  功能有问题`'handler'`。因为当我添加一些时`DIV`，我`CONTAINER`第一次需要使用 `doubleclik`, 来调用这个函数。但我需要使用简单的点击。

**这是一个例子：http:** [//jsfiddle.net/ynternet/84nVQ/5/](http://jsfiddle.net/ynternet/84nVQ/5/)

HTML

```
<div id="add" style="background:yellow; width:100px;"> add new </div>
<div id="container"> </div>
<div id="menu" style="color:red;"><b> I'm here </b></div> 
```

jQuery

```
function handler() {
    $(this).on({
        click: function(e) {
            clearTimeout(time);
            if ($(this).find("#menu").length) {
                return;
            }
            $('#menu').prependTo($(this));
            $("#menu").css({
                position: "absolute",
                left: "100px"
            }).show();
        }
    });
    $(this).on({
        mouseleave: function(e) {
            time = setTimeout(function() {
                $('#menu').appendTo('body').clearTimeout(time);;
            }, 5000);
        }
    });
    $(this).on({
        mouseover: function(e) {
            clearTimeout(time);
        }
    });
}

$("#add").on({
    click: function(e) {
       var timestamp = Date.now();
       var posx = Math.floor(Math.random()*400);
       var posy = Math.floor(Math.random()*400);
       $('#container').append(function() {
        return $('<div class="add_to_this" id="' + timestamp + '" style="left:'+posx+'px; top:'+posy+'px; ">Click here</div>').click(handler);
       });
    }
}); 
```

CSS

```
#container {
    width:500px;
    height:500px;
    background: palegoldenrod;
    position: relative;
    top:20px;
    left: 100px;
    padding: 0px;
}
.add_to_this {
    background:yellowgreen;
    position: absolute;
    display:inline-block;
    width:200px;
    height:30px;
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    -o-user-select: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:49:22.277

```
function handler() {
    $(this).on({... 
```

什么是`$(this)`？

您没有使用或传递任何选择器

利用 `$("#container").on`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:12:45.910

这是解决方案：

JsFiddle - 工作示例：http: [//jsfiddle.net/ynternet/84nVQ/6/](http://jsfiddle.net/ynternet/84nVQ/6/)

jQuery

```
function handler1() {
    clearTimeout(time);
    if ($(this).find("#menu").length) {
        return;
    }
    $('#menu').prependTo($(this));
    $("#menu").css({
        position: "absolute",
        left: "100px"
    }).show();
}

function handler2() {
    time = setTimeout(function() {
        $('#menu').appendTo('body').clearTimeout(time);;
    }, 5000);
}

function handler3() {
    clearTimeout(time);
}

$("#add").on({
    click: function(e) {
        var timestamp = Date.now();
        var posx = Math.floor(Math.random() * 400);
        var posy = Math.floor(Math.random() * 400);
        $('#container').append(function() {
            return $('<div class="add_to_this" id="' + timestamp + '" style="left:' + posx + 'px; top:' + posy + 'px; ">Click here</div>').click(handler1).mouseleave(handler2).mouseenter(handler3);
        });
    }
}); 
```

# iphone - iphone模式可以从静音改为响铃吗？

> ID：12778116
> 
> 赞同：2
> 
> 时间：2012-10-08T08:42:41.357
> 
> 标签：iphone, ios6

有人说现在在 iOS 6.0 中是否可行？？？

如果是，请给我一个提示，如果不是，我在苹果商店找到了一个应用程序，但它不是 100% 完美的。

我希望我得到一个明确的答案？？？

[应用程序](http://itunes.apple.com/nl/app/autosilent/id474777148?mt=8)

# php - How to read one value from an array PHP

> ID：12778128
> 
> 赞同：-2
> 
> 时间：2012-10-08T08:43:22.637
> 
> 标签：php

I know its silly question but really I don't know whats wrong, I have class that retrieve an array of parameters,like this with print_r function

```
Array ( [0] => 
      Array ( [points] => 39930 
              [level] => 14 
              [base] => 32000 
              [next] => 40000 
              [progress] => 99 
              [platinum] => 30 
              [gold] => 112 
              [silver] => 290 
              [bronze] => 1050 
              [total] => 1482 ) ) 
```

so if I want specific value from this array I can write

```
$getCount = $psn->get_count($psnUser['jid']);
echo $getCount['gold']; 
```

the output must be 112 but its show me blank page what should I do?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:44:58.693

You are dealing with a multidimensional array, so you have to point at:

```
$getCount[0]['gold']; 
```

# sql - 特定时间段内可用人员的 Sql SELECT

> ID：12778130
> 
> 赞同：3
> 
> 时间：2012-10-08T08:43:32.323
> 
> 标签：sql, date, multiple-tables

我有 3 张桌子。第一个是人员名单：

桌子`Personnel`

```
Id_personnel         Name
1                    John
2                    Alice
3                    Tom
4                    Charles
5                    Ben 
```

二是病假表：

桌子`Medical`

```
Id_personnel         Start_date         End_date
3                    2012-08-02         2012-08-05
2                    2012-08-02         2012-08-15
4                    2012-10-04         2012-10-06
2                    2012-10-02         2012-10-15
2                    2012-09-20         2012-09-21 
```

三是放假表：

桌子`Holiday`

```
Id_personnel         Start_date         End_date
3                    2012-08-02         2012-08-05
2                    2012-02-02         2012-02-15
5                    2012-10-01         2012-10-05 
```

我有两个活动日期：`Symposium_start_date`和一个（作为变量） ，`Symposium_end_date`我想选择所有可以参加研讨会（不在病假或假期）。`Personnel.Id_personnel``Personnel.Name`

在我的示例中，如果`Symposium_start_date = 2012-10-02`并且`Symposium_end_date = 2012-10-06`结果必须是：

```
Id_personnel         Name
1                    John
3                    Tom 
```

（如您所见，爱丽丝和查尔斯正在休病假，本在度假）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:55:20.727

对于 MS SQL 服务器。

```
declare @start date = '2012-10-02', @end date = '2012-10-10'

select personnel.* 
from personnel
    left join holiday on personnel.Id_personnel = holiday.Id_personnel
        and holiday.start_date<=@end
        and holiday.end_date>=@start
    left join medical on personnel.Id_personnel= medical.Id_personnel
        and medical.start_date<=@end
        and medical.end_date>=@start
where holiday.Id_personnel is null  
and medical.Id_personnel is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:20:25.357

假设 MS-SQL，与其他类似，但显示了联合在一起的表，以及显示所有与研讨会日期冲突的子查询——我认为这更容易先写——然后选择所有不冲突的人。问候！

```
declare @Symposium_start_date date = '2012-10-02'
declare @Symposium_end_date date = '2012-10-06'

select * from Personnel P where p.Id_personnel not in (
    select Id_personnel from (
        select m.Id_personnel, m.Start_date, m.End_date
        from Medical M 
        union
        select h.Id_personnel, h.Start_date, h.End_date
        from Holiday H 
    ) as Leave
    where (Start_date  between @Symposium_start_date and @Symposium_end_date)
        or (End_date between @Symposium_start_date and @Symposium_end_date)
        or (Start_date <= @Symposium_start_date and End_date >= @Symposium_end_date)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:58:57.423

这仅是医疗表的示例。您可以轻松添加假期

```
declare @Symposium_start_date datetime
declare @Symposium_end_date  datetime

set @Symposium_start_date = '2012-08-01'
set @Symposium_end_date  = '2012-08-04'

select * 
from personel p left join medical m on p.Id_personel = m.Id_personel
where (@Symposium_start_date > m.end_date) or (@Symposium_end_date<m.start_date) 
```

# macos - NSTableView 中的悬停效果问题

> ID：12778141
> 
> 赞同：3
> 
> 时间：2012-10-08T08:44:27.440
> 
> 标签：macos, cocoa, nstableview

我的应用程序中有一个基于视图的 NSTableView，并且使用 HoverTableDemo 中的实现为行添加了悬停效果。当鼠标悬停在一行上时我可以获得悬停效果而没有问题，但是当表格视图向下滚动时，有时它会在表格视图再次向上滚动时在顶部单元格上留下突出显示效果。我认为这是由于 NSTableView 重用了单元格。我通过覆盖

```
 - (void)drawBackgroundInRect:(NSRect)dirtyRect 
```

NSTableRowView 中的方法。有人能指出我解决这个问题的正确方向吗？

提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T15:12:50.950

我认为这是因为 mouseExit 事件不会在滚动时被调用，因此背景不会被重置。

# android - 意图标志和启动模式

> ID：12778143
> 
> 赞同：0
> 
> 时间：2012-10-08T08:44:35.933
> 
> 标签：android, service, android-intent

我有一项服务`S`，它会在启动完成后立即启动。我有一个带有一个**Activity**的应用程序，它在应用程序启动时绑定到服务`S`。

现在我已经为某个事件注册了一个广播接收器，这样如果事件发生我应该启动相同的**Activity**。我不想创建同一个**Activity**的另一个实例，我想重用**Activity**但应该调用**Activity**`onCreate()`的`onRestart()`方法。

 **我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:22:56.530

我不是 100% 肯定你的问题，但我们开始吧。您可以尝试在 mainactivity 中使用静态方法并从您的服务中调用它。

在您的主要活动中：

```
 @Override
public void onCreate() {
    super.onCreate();
    superAwesomeMethod();

public static void superAwesomeMethod() {
    //stuff you want called on onCreate 
```

然后在您的服务中：

```
//event listener capture
YourActivityName.superAwesomeMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:29:54.940

如果你想了解意图去

[http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/](http://blog.akquinet.de/2010/04/15/android-activites-and-tasks-series-intent-flags/)

它非常清晰，并且随附的演示应用程序非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:19:52.277

试试`AndroidManifest.xml`这个

```
<activity android:launchMode="singleTop"> 
```

为您的主要活动**

# c# - 类库与 asp.net MVC4 Web API

> ID：12778150
> 
> 赞同：-3
> 
> 时间：2012-10-08T08:45:08.687
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我计划使用 asp.net MVC4 Web API。任何人都可以比较类库和 asp.net MVC4 Web API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:06:12.897

如果你使用类库，它在性能方面会比 Web API 更快，因为调用方法时不会涉及任何序列化或 I/O。类库的缺点是您的客户端需要是 .NET 客户端。因此，这不是一个可互操作的解决方案。此外，如果您决定稍后对实现进行更改，则必须使用新版本的类库更新所有客户端，而使用 Web API，您将在单个位置执行此操作 -> Web API 所在的 Web 服务器托管。

选择其中一个将真正取决于您愿意支持的场景和架构。是否需要将此功能公开给非 .NET 客户端。

# java - 五分钟只更新文件中的新内容

> ID：12778154
> 
> 赞同：1
> 
> 时间：2012-10-08T08:45:27.470
> 
> 标签：java, file, filereader

我得到一个`personHashMap.ser`包含 HashMap 的文件。这是我如何创建它的代码：

```
String file_path = ("//releasearea/ToolReleaseArea/user/personHashMap.ser");
public void createFile(Map<String, String> newContent) {
    try{
        File file = new File(file_path);

        FileOutputStream fos=new FileOutputStream(file);
        ObjectOutputStream oos=new ObjectOutputStream(fos);

        oos.writeObject(newContent);
        oos.flush();
        oos.close();
        fos.close();

    }catch (Exception e){
        System.err.println("Error in FileWrite: " + e.getMessage());
    }

} 
```

现在我想，当程序运行时，所有五分钟`personHashMap.ser` **都只用改变的内容**更新文件。所以我调用的方法：

```
public void updateFile(Map<String, String> newContent) {
    Map<String, String> oldLdapContent = readFile();
    if(!oldLdapContent.equals(ldapContent)){ // they arent the same, 
                                             // so i must update the file

    }   

} 
```

但现在我不知道如何实现这一点。
只更新新内容对性能更好还是应该清理整个文件并再次插入新列表？

希望你能帮我..

**编辑：**

HashMap 包括 ie `street=Example Street`。
但现在，新街叫`New Example Street`。现在我必须更新文件中的 HashMap。所以我不能只是追加新内容......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:44:25.190

首先`HashMap`不是一个合适的选择。它是为内存使用而设计的，而不是序列化（当然它可以以标准方式序列化）。但如果它只有 2kb，那么继续写整个东西而不是更新的数据。

其次，您似乎过于担心这种相当微不足道的方法的性能（对于 2kb，写入只需几毫秒）。我会更担心一致性和并发性问题。我建议您考虑使用轻量级数据库，例如 JavaDB 或 h2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:15:33.850

您可以循环调用**updateFile**方法，然后调用**sleep** 5 分钟（5*60*1000 毫秒）。

```
Thread.Sleep(300000); // sleep for 5 minutes 
```

要附加到您已经存在的文件，您可以使用：

```
FileOutputStream fooStream = new FileOutputStream(file, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:27:15.197

使用构造函数`FileOutputStream(File file, boolean append)`，设置`boolean append`为`true`. 它将在现有文件中附加文本。

# python - 为什么在创建自定义模块类时导入不起作用？

> ID：12778158
> 
> 赞同：1
> 
> 时间：2012-10-08T08:45:40.577
> 
> 标签：python, module

我有这个模块，`wat.py`

```
import re
import types
import sys

hello = "Hello World"

class MyModule(types.ModuleType):
    def get_re(self):
        return re
    def get_hello(self):
        return hello

sys.modules[__name__] = MyModule('wat') 
```

我运行这段代码：

```
>>> import wat
>>> wat.get_hello()
None
>>> wat.get_re()
None 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:06:01.223

此代码使其工作：

```
import types
import sys

def whyDoesThisWorkIDontEven():
    import re
    hello = "Hello World"

    class MyModule(types.ModuleType):
        def get_re(self):
            return re
        def get_hello(self):
            return hello

    return MyModule('wat')

sys.modules[__name__] = whyDoesThisWorkIDontEven() 
```

但我*完全不知道*为什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:21:09.980

不知道您所说的“不能很好地与导入一起使用”是什么意思，因为这似乎也有效。不确定这是否是您想要的，但也许它很有用...

```
 import sys
    import re
    class _Test(object):
      def __init__(self):
          self.re=re
      def testfunc(self):
          return self.re
      y = property(testfunc)
    sys.modules[__name__] = _Test()

import calltest

>>> calltest.y
<module 're' from 'C:\Python26\lib\re.pyc'>
>>> calltest.re
<module 're' from 'C:\Python26\lib\re.pyc'>
>>> calltest.testfunc()
<module 're' from 'C:\Python26\lib\re.pyc'> 
```

编辑：

如果你简单地尝试`return re`你会得到`None`。`re`完成后必须导入

```
sys.modules[__name__] = _Test() 
```

像：

```
sys.modules[__name__] = _Test()
import re 
```

然后简单地调用 re woudld 工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T16:42:06.303

它不起作用，因为您在重新分配它的条目时有效地删除了您的模块`sys.modules`。请参阅我的相关[问题](https://stackoverflow.com/questions/5365562/why-is-the-value-of-name-changing-after-assignment-to-sys-modules-name)。

要使其工作，请将模块的最后一行更改为：

```
_ref, sys.modules[__name__] = sys.modules[__name__], MyModule('wat') 
```

它会起作用。

顺便说一句，您不必`types.ModuleType`为了将它的实例放入`sys.modules[]`. 中的条目`sys.modules`不必是模块对象（根据[Alex Martelli](http://code.activestate.com/recipes/65207-constants-in-python/)）。

# html - dolphin 正在阅读 noscript 部分

> ID：12778166
> 
> 赞同：0
> 
> 时间：2012-10-08T08:46:20.810
> 
> 标签：html, css, noscript, dolphin-browser

Dolphin 浏览器和默认 Android 浏览器正在阅读`<noscript>`我页面顶部的部分，即使在这些浏览器中打开了 javascript。这会导致这些页面的内容不被呈现。

在头部，我链接到 aa css 样式表，当浏览器中关闭 javascript 时，该样式表将页面上 div 内的任何内容设置为无。它通过驻留在非脚本元素中来做到这一点，因此只有在没有 javascript 时才会读取样式表。

这适用于我测试的所有桌面/笔记本电脑浏览器（未在我无权访问的 mac 上测试）。它适用于带有 Firefox 和 Opera 的 Android。我只有 cyanongenmod 7，所以我没有 Google Chrome。

然而，当谈到 Dolphin 和默认的 Android 浏览器时，他们会读取位于 noscript 部分的 css 样式表，并且几乎整个页面/站点都不会在这些浏览器中呈现。

我已经证明这是通过从头部删除样式表链接发生的事情，并且页面在这些浏览器中正确呈现。

有没有办法让这些浏览器尊重 head 部分的 noscript 标签？

更新：这是使用 HTML5 - 头部中的 noscript 是允许的：[http ://www.w3.org/TR/html5/the-noscript-element.html#the-noscript-element](http://www.w3.org/TR/html5/the-noscript-element.html#the-noscript-element)

```
<!DOCTYPE html>
<html>
<head>
        <noscript>
            <link href="${facesContext.externalContext.requestContextPath}/css/no_javascript.css" rel="stylesheet" type="text/css" />
            <!-- this link is being read even if javascript in enabled in dolphin -->
        </noscript>

</head>
<body>
    <noscript>
        stuff in this noscript element works correctly
    </noscript>

    <div class="no_javascript_disapear">

        page full of stuff not being rendered because 
        dolphin browser is not respecting the noscript 
        tags in the head.

    </div>
</body>
</html>

// css in the noscript tag:
.no_javascript_disapear {display:none;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:03:31.027

也许您可以使用 javascript 来删除该样式表？

阅读此问题以了解如何[使用 Javascript 访问 <noscript> 的内容](https://stackoverflow.com/questions/620896/access-contents-of-noscript-with-javascript)

* * *

否则，您可以为 no-js 样式表添加标题：

```
<link title="noJsStylesheet"  href="....css" rel="stylesheet" type="text/css" /> 
```

并使用此功能将其删除：

```
for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("title") == 'noJsStylesheet') a.disabled = true;
} 
```

但我真的不确定它是否适用于这个特定的 Dolphin 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:24:27.257

根据作为 W3C 建议发布的 HTML 规范，该`noscript`元素仅允许在内部`body`使用。浏览器也可能允许它`head`，但你不能指望它。只是说您使用 HTML5 并不会改变这一点；浏览器做他们做的事，有时可能会实现部分 HTML5 草稿。

HTML5 草案一般[建议不要使用`noscript`](http://www.w3.org/TR/html5/the-noscript-element.html#the-noscript-element)：“noscript 元素是一种生硬的工具。有时，可能会启用脚本，但由于某种原因，页面的脚本可能会失败。出于这个原因，通常最好避免使用 noscript，而是设计脚本以将页面从无脚本页面更改为运行中的脚本页面”（下面是一个示例）。

所以最好的方法是渐进式增强：首先设计页面，这样它就可以在没有脚本的情况下工作。然后，以非中断方式添加脚本。这可能涉及通过脚本添加一些 CSS 规则（这比删除一些更自然）。

但是，如果您需要快速修复，您可以考虑在`link`现在 inside 的元素之后添加`noscript`一个`script`元素，该元素包含用于立即从文档树中删除该元素的代码。

顺便说一句，我的好旧的 Android 2.3.5 默认浏览器似乎很荣幸`noscript`在里面`head`。

# android - Android ICS 上的 ACCESS_NETWORK_STATE 权限

> ID：12778168
> 
> 赞同：24
> 
> 时间：2012-10-08T08:46:24.750
> 
> 标签：android, permissions

我在应用程序清单中声明了权限`ACCESS_NETWORK_STATE`，如下所示。

```
<uses-permission  android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

在 Android 2.x 上一切都很好。但在 Android ICS 上，它因以下日志猫而失败。

```
 java.lang.SecurityException: ConnectivityService: Neither user 10093
 nor current process has android.permission.ACCESS_NETWORK_STATE. at
 android.os.Parcel.readException(Parcel.java:1327) at
 android.os.Parcel.readException(Parcel.java:1281) at
 android.net.IConnectivityManager$Stub$Proxy.getActiveNetworkInfo(IConnectivityManager.java:663)
 at
 android.net.ConnectivityManager.getActiveNetworkInfo(ConnectivityManager.java:455)
 at com.tapfortap.AdView.getNetwork(AdView.java:146) at
 com.tapfortap.AdView.loadAdsWithAppId(AdView.java:133) at
 com.tapfortap.AdView.access$100(AdView.java:47) at
 com.tapfortap.AdView$1$1.run(AdView.java:88) at
 android.os.Handler.handleCallback(Handler.java:605) at
 android.os.Handler.dispatchMessage(Handler.java:92) at
 android.os.Looper.loop(Looper.java:137) at
 android.app.ActivityThread.main(ActivityThread.java:4503) at
 java.lang.reflect.Method.invokeNative(Native Method) at
 java.lang.reflect.Method.invoke(Method.java:511) at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576) at
 dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-08T09:04:39.147

我像这样更新了权限，它可以工作。

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

这是因为 ACCESS_NETWORK_STATE 被用作连接管理器，这需要 INTERNET 连接。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-09T00:44:21.253

我相信这是 Eclipse 的一个问题；它无法刷新清单以加载权限。

我遇到了与原始海报相同的问题，并通过第二次添加权限来解决它 - 但后来我能够在不影响行为的情况下删除权限。这让我怀疑 Eclipse 在我触摸文件之前没有正确加载权限。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-05-19T13:46:16.340

只需添加以下权限，它就可以正常工作，我之前遇到过这个问题并与我一起解决

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T17:53:56.317

清理然后构建项目为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-06T07:39:19.767

哦，如果你默认添加，它将是：

```
<uses-permission android:name="ANDROID.PERMISSION.ACCESS_NETWORK_STATE"/> 
```

如果您通过以下方式重新添加权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

它工作正常。逆天 ！我花了2天

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-07T05:09:10.983

您缺少 Internet 权限。添加此权限将纠正您的问题

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-03-12T05:44:15.870

清洁项目。检查清单文件。某些包名称更改或错误放置的数据可能会导致此错误。

清理项目将起作用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-04T05:41:32.493

只需剪切`<uses-permission android:name="android.permission.INTERNET" />`并粘贴上述所有权限即可。它会正常工作...

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-10-09T04:15:08.843

在您的代码中，您会在某些地方在进行调用之前检查 Internet 可用性，这样您的应用程序就不会在运行时崩溃。为此，您必须访问需要权限的“**网络状态**”：

`<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>`

当互联网可用时，您的设备使用需要许可的“**互联网”与服务器通信：**

`<uses-permission android:name="android.permission.INTERNET" />`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-08-21T12:45:22.067

就我而言，**Clean Project和****Rebuild Project**都不起作用，我花了几个小时来弄清楚如何摆脱这个 lint 错误。

我也害怕使用最终选项**Invalidate Caches and Restart**因为将来我可能会回滚到文件的任何本地历史记录，以防出现任何错误。

所以最后，我选择了以下选项。

1.  我选择了**File->Invalidate Caches and Restart**。
2.  它打开了一个弹出窗口。然后我选择了**Just Restart**选项。

你猜怎么着！！它解决了我的问题。因此，如果你们中的任何人仍在努力摆脱此错误，您可能想尝试我的解决方案。让我知道它是否有效。

# java - 哪个类定义了java中的关键字？

> ID：12778171
> 
> 赞同：0
> 
> 时间：2012-10-08T08:46:38.127
> 
> 标签：java, keyword

谁能告诉我关键字 like`public`和`protected`定义在哪个类中？我在整个互联网上搜索，但找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:49:46.767

Java 关键字在[The Java Language Specification](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中进行了描述。详细信息可在[此表](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:52:11.680

是的，格非说的。您无法在 javadocs 中搜索“public”的定义。

[但是，您可以在此处](http://docs.oracle.com/javase/specs/jls/se5.0/html/lexical.html#3.9)找到规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:04:07.183

这些是称为 modfier 的特殊关键字，可从此处获得

`java.lang.reflect.Modifier`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:58:31.777

它是特定于实现的。例如参见： [http ://hg.openjdk.java.net/compiler-grammar/compiler-grammar/langtools/file/dc7563e2b917/src/share/classes/javax/lang/model/element/Modifier.java](http://hg.openjdk.java.net/compiler-grammar/compiler-grammar/langtools/file/dc7563e2b917/src/share/classes/javax/lang/model/element/Modifier.java)

# c# - 在 C# 中获取连接的网络摄像头

> ID：12778172
> 
> 赞同：1
> 
> 时间：2012-10-08T08:46:42.867
> 
> 标签：c#, .net, camera, operating-system, webcam

> **可能重复：**
> [如何在 .NET 中连接到 USB 网络摄像头？](https://stackoverflow.com/questions/113426/how-do-i-connect-to-a-usb-webcam-in-net)

我正在使用 C# 开发 .Net 解决方案。

在我的应用程序中，我需要了解整个连接的网络摄像头或摄像头。并从这些网络摄像头获取输入。但主要问题是连接的网络摄像头设备是未知的。

例如，如果有人在他们的计算机上使用我的应用程序，我的应用程序必须扫描所有连接的网络摄像头，并且还应该询问用户想要使用哪个网络摄像头用户。它就像 Skype 一样。Skype 使用户能够选择要使用的网络摄像头。Skype 从选定的网络摄像头获取输入。

如何扫描网络摄像头并从该网络摄像头获取流？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:49:36.680

我建议您为此使用 AForge 框架，它以非常简洁的方式满足您的所有需求：[http ://www.aforgenet.com/framework/samples/video.html](http://www.aforgenet.com/framework/samples/video.html)

# c# - C# 处理固定宽度文件 - 解决方案不起作用

> ID：12778173
> 
> 赞同：1
> 
> 时间：2012-10-08T08:46:49.553
> 
> 标签：c#, file, width, fixed

我在这里实现了 Cuong 的解决方案： [C# Processing Fixed Width Files](https://stackoverflow.com/questions/12543223/c-sharp-processing-fixed-width-files)

这是我的代码：

```
 var lines = File.ReadAllLines(@fileFull);
        var widthList = lines.First().GroupBy(c => c)
        .Select(g => g.Count())
        .ToList();

        var list = new List<KeyValuePair<int, int>>();

        int startIndex = 0;

        for (int i = 0; i < widthList.Count(); i++)
        {
            var pair = new KeyValuePair<int, int>(startIndex, widthList[i]);
            list.Add(pair);

            startIndex += widthList[i];
        }

        var csvLines = lines.Select(line => string.Join(",",
        list.Select(pair => line.Substring(pair.Key, pair.Value))));

        File.WriteAllLines(filePath + "\\" + fileName + ".csv", csvLines); 
```

@fileFull = 文件路径和名称

我遇到的问题是输入文件的第一行也包含数字。所以它可能是 AAAAAABBC111111111DD2EEEEEE 等。出于某种原因，Cuong 代码的输出给了我 CSV 标题，如 1111RRRR 和 222223333。

有谁知道这是为什么以及我将如何解决它？

* * *

标题行示例：

```
AAAAAAAAAAAAAAAABBBBBBBBBBCCCCCCCCDEFCCCCCCCCCGGGGGGGGHHHHHHHHIJJJJJJJJKKKKLLLLMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOPPPPQQQQ1111RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR222222222333333333444444444555555555666666666777777777888888888999999999S00001111TTTTTTTTTTTTUVWXYZ!"£$$$$$$%& 
```

转换后的标题行：

```
AAAAAAAAAAAAAAAA    BBBBBBBBBB  CCCCCCCCDEFCCCCCC   C   C   C   GGGGGGGG    HHHHHHHH    I   JJJJJJJJ    KKKK    LLLL    MMMMMMMMMMMMMMMMMMMMMMMMMMMMMM  NNNNNNNNNNNNNNNNNNNNNNNNNNNNNN  OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO  PPPP    QQQQ    1111RRRR    RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR2222    222223333   333334444   444445555   555556666   666667777   777778888   888889999   99999S000   0   1111    TTTTTTTTTTTT    U   V   W   X   Y   Z   !   ",ï¿½,$$$$$$,%,&," 
```

* * *

Jodrell - 我实现了你的建议，但标题输出如下：

```
BBBBBBBBBBCCCCCC    CCCCCCCCD   DEFCCCC             GGGGGGGG    HHHHHHH IJJJJJJ     KKKKLLL LLL MMM NNNNNNNNNNNNNNNNNNNNNNNNNNNNN   OOOOOOOOOOOOOOOOOOOOOOOOOOOOO   PPPPQQQQ1111RRRRRRRRRRRRRRRRR   QQQ 111 RRR 33333333    44444444    55555555    66666666    77777777    88888888    99999999    S0000111        111 TTT UVWXYZ!"ï¿½$$                                       %& 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:43:48.517

正如 Jodrell 已经提到的，您的代码不起作用，因为它假定代表每个列标题的字符是不同的。更改解析标题宽度的代码将修复它。

代替：

```
var widthList = lines.First().GroupBy(c => c)
.Select(g => g.Count())
.ToList(); 
```

和：

```
var widthList = new List<int>(); 
var header = lines.First().ToArray(); 
for (int i = 0; i < header.Length; i++) 
{ 
    if (i == 0 || header[i] != header[i-1]) 
        widthList.Add(0); 
    widthList[widthList.Count-1]++; 
} 
```

解析的标题列：

```
AAAAAAAAAAAAAAAA    BBBBBBBBBB  CCCCCCCC    D   E   F   CCCCCCCCC   GGGGGGGG    HHHHHHHH    I   JJJJJJJJ    KKKK    LLLL    MMMMMMMMMMMMMMMMMMMMMMMMMMMMMM  NNNNNNNNNNNNNNNNNNNNNNNNNNNNNN  OOOOOOOOOOOOOOOOOOOOOOOOOOOOOO  PPPP    QQQQ    1111    RRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRRR    222222222   333333333   444444444   555555555   666666666   777777777   888888888   999999999   S   0000    1111    TTTTTTTTTTTT    U   V   W   X   Y   Z   !   "   £   $$$$$$  %   & 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:13:55.847

**编辑**

因为这个问题让我很恼火，所以我写了一些代码来处理`"`和`,`. 此代码用逗号分隔的交替 0 和 1 替换标题行。正文中的任何逗号或双引号都会被适当地转义。

```
static void FixedToCsv(string sourceFile)
{
    if (sourceFile == null)
    {
        // Throw exception
    }

    var dir = Path.GetDirectory(sourceFile)
    var destFile = string.Format(
        "{0}{1}",
        Path.GetFileNameWithoutExtension(sourceFile),
        ".csv");

    if (dir != null)
    {
        destFile = Path.Combine(dir, destFile);
    }

    if (File.Exists(destFile))
    {
        // Throw Exception
    }

    var blocks = new List<KeyValuePair<int, int>>();
    using (var output = File.OpenWrite(destFile))
    {
        using (var input = File.OpenText(sourceFile))
        {
            var outputLine = new StringBuilder();

            // Make header
            var header = input.ReadLine();

            if (header == null)
            {
                return;
            }

            var even = false;
            var lastc = header.First();
            var counter = 0;
            var blockCounter = 0;
            foreach(var c in header)
            {
                counter++;
                if (c == lastc)
                {
                    blockCounter++;
                }
                else
                {
                    blocks.Add(new KeyValuePair<int, int>(
                        counter - blockCounter - 1,
                        blockCounter));
                    blockCounter = 1;
                    outputLine.Append(',');
                    even = !even;
                }

                outputLine.Append(even ? '1' : '0');

                lastc = c;
            }

            blocks.Add(new KeyValuePair<int, int>(
                counter - blockCounter,
                blockCounter));

            outputLine.AppendLine();
            var lineBytes = Encoding.UTF.GetBytes(outputLine.ToString());
            outputLine.Clear();
            output.Write(lineBytes, 0, lineBytes.Length);

            // Process Body
            var inputLine = input.ReadLine();
            while (inputLine != null)
            {
                foreach(var block in block.Select(b =>
                    inputLine.Substring(b.Key, b.Value)))
                {
                    var sanitisedBlock = block;
                    if (block.Contains(',') || block.Contains('"'))
                    {
                        santitisedBlock = string.Format(
                            "\"{0}\"",
                            block.Replace("\"", "\"\""));
                    }

                   outputLine.Append(sanitisedBlock);
                   outputLine.Append(',');
                }

                outputLine.Remove(outputLine.Length - 1, 1);
                outputLine.AppendLine();
                lineBytes = Encoding.UTF8.GetBytes(outputLne.ToString());
                outputLine.Clear();
                output.Write(lineBytes, 0, lineBytes.Length);

                inputLine = input.ReadLine();
            }
        }
    }
} 
```

* * *

`1`在您的标题行中重复，因此您的两个四数被计为一个八，并且从那里一切都出错了。

（在 s 之后有四个`1`s 的块，在 s 之后有`Q`另一个四个`1`s 的块`0`）

本质上，您的标题行无效，或者至少不适用于建议的解决方案。

* * *

好吧，你可以做这样的事情。

```
public void FixedToCsv(string fullFile)
{
    var lines = File.ReadAllLines(fullFile);
    var firstLine = lines.First();

    var widths = new List<KeyValuePair<int, int>>();

    var innerCounter = 0;
    var outerCounter = 0
    var firstLineChars = firstLine.ToCharArray();
    var lastChar = firstLineChars[0]; 
    foreach(var c in firstLineChars)
    {
        if (c == lastChar)
        {
            innerCounter++;
        }
        else
        {
            widths.Add(new KeyValuePair<int, int>(
                outerCounter
                innerCounter);
            innerCounter = 0;
            lastChar = c;
        }
        outerCounter++;
    }

    var csvLines = lines.Select(line => string.Join(",",
        widths.Select(pair => line.Substring(pair.Key, pair.Value))));

    // Get filePath and fileName from fullFile here.
    File.WriteAllLines(filePath + "\\" + fileName + ".csv", csvLines);
} 
```

# c# - 使用 Message.Attach 时 Caliburn.Micro 和/或 WindowsBase 中的 NullReferenceException

> ID：12778176
> 
> 赞同：2
> 
> 时间：2012-10-08T08:46:50.517
> 
> 标签：c#, wpf, mvvm, caliburn.micro

现在我有一个奇怪的。这只发生在 Windows XP 的独立构建（调试/发布，无关紧要）上。在 Windows 7 下工作得非常好。无论如何，因为我必须确保应用程序在 XP 下工作，所以我不得不做一些变通方法。我不得不在一台装有 XP 的机器上进行远程调试，这给了我`First chance exception of type 'NullReferenceException' in Caliburn.Micro.dll`, 然后 `First chance exception of type 'NullReferenceException' in WindowsBase.dll`, 然后崩溃并出现下面提供的日志。

无论如何，这是背景，我有一个 GridViewModel 和一个匹配的 GridView 视图，它的主要部分是 WPF 的 DataGrid（因此得名），我想这就是问题所在：

```
<DataGrid CanUserAddRows="False"  EnableRowVirtualization="True" Grid.Row="0" x:Name="DataGrid" AlternatingRowBackground="#EBEBEB" ScrollViewer.VerticalScrollBarVisibility="Visible"
          ScrollViewer.CanContentScroll="True" ItemsSource="{Binding CollectionView}" IsReadOnly="True" RowDetailsVisibilityMode="VisibleWhenSelected" AutoGenerateColumns="False"                                      
                        here->>   cal:Message.Attach="[Event SelectionChanged] = [Action GridSelectionChanged($eventArgs)]"> 
```

后来也在这里：

```
<DataGrid.CellStyle>
    <Style TargetType="{x:Type DataGridCell}">
        <Setter Property="cal:Message.Attach" Value="[Event PreviewMouseLeftButtonUp] = [Action PreviewMouseLeftButtonUp($view, $eventArgs)]"/>
    </Style>                    
</DataGrid.CellStyle>
<DataGrid.ItemContainerStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="cal:Message.Attach" Value="[Event PreviewMouseRightButtonUp] = [Action PreviewMouseRightButtonUp($source, $eventArgs)]"/>
    </Style>
</DataGrid.ItemContainerStyle> 
```

现在在 XP 下运行应用程序并单击任何行，使用 DataGrid 的滚动条，有时甚至最大化窗口会给出以下结果：

```
[Exception] - Object reference not set to an instance of an object.
[Stack Trace] -    at Caliburn.Micro.ActionMessage.<.cctor>b__14(ActionExecutionContext context)
   at Caliburn.Micro.ActionMessage.<.cctor>b__15(ActionExecutionContext context)
   at Caliburn.Micro.ActionMessage.UpdateContext()
   at Caliburn.Micro.ActionMessage.ElementLoaded(Object sender, RoutedEventArgs e)
   at Caliburn.Micro.View.<>c__DisplayClass3.<ExecuteOnLoad>b__0(Object s, RoutedEventArgs e)
   at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
   at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
   at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
   at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
   at System.Windows.BroadcastEventHelper.BroadcastEvent(DependencyObject root, RoutedEvent routedEvent)
   at System.Windows.BroadcastEventHelper.BroadcastLoadedEvent(Object root)
   at MS.Internal.LoadedOrUnloadedOperation.DoWork()
   at System.Windows.Media.MediaContext.FireLoadedPendingCallbacks()
   at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
   at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
   at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.DispatcherOperation.InvokeImpl()
   at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Windows.Threading.DispatcherOperation.Invoke()
   at System.Windows.Threading.Dispatcher.ProcessQueue()
   at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
   at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
   at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
   at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
   at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
   at System.Windows.Threading.Dispatcher.Run()
   at System.Windows.Application.RunDispatcher(Object ignore)
   at System.Windows.Application.RunInternal(Window window)
   at System.Windows.Application.Run(Window window)
   at MyAwesomeApplication.App.Main() 
```

现在奇怪的是，如果我在应用程序的其他部分执行以下操作：

```
<ListView.ItemContainerStyle>
    <Style TargetType="{x:Type ListViewItem}">
        <Setter Property="IsEnabled" Value="{Binding IsRowEnabled}"/>
        <Setter Property="cal:Message.Attach" Value="[Event MouseDoubleClick] = [Action InvoiceRow()]"/>
    </Style>
</ListView.ItemContainerStyle> 
```

在 XP 和 7 下都可以正常工作。

现在我的解决方法是摆脱`Attach`GridView.xaml 中的 ed 操作，转而支持代码隐藏中的良好 ol' 事件，这反过来又调用视图模型中已经准备好的方法，例如：

```
private void DataGridOnSelectionChanged(object sender, SelectionChangedEventArgs selectionChangedEventArgs)
{
    var model = (GridViewModel) DataContext;

    model.GridSelectionChanged(selectionChangedEventArgs);
} 
```

我知道，它看起来不太漂亮，但目前我认为这是确保该应用程序在 XP 下运行的唯一方法。知道为什么它首先会崩溃吗？

[编辑]

虽然堆栈跟踪有点令人费解，但似乎`NullReferenceException`确实发生了，但在我的代码的某个地方，即在动作处理程序中。这只是一个初步想法，我在其他应用程序中摆脱了同样的错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:12:58.390

我遇到了同样的问题，但显然你不能在同一个控件上多次使用“cal:Message.Attach”来处理两个不同的事件。您可以尝试使用交互触发器：

[交互触发器示例](http://sonyarouje.com/2011/02/16/introduction-to-caliburn-micro-part-2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:26:24.560

此示例向您展示如何在同一控件上处理多个事件。希望这对您有所帮助。

```
 <TextBox cal:Message.Attach="[Event TextChanged] = [Action DoAnything]; [Event KeyDown] = [Action DoAnything2]"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-05T17:58:16.110

好吧，事实证明在动作处理程序的发布版本下有一个奇怪的比赛，毕竟我的错误，与 Caliburn.Micro 本身并没有真正的关系。

仍然不知道为什么它在 XP 下如此“致命”，但幸运的是我不必支持它更长时间。

# android - 在大图像上保存形状

> ID：12778180
> 
> 赞同：2
> 
> 时间：2012-10-08T08:46:54.117
> 
> 标签：android, image, bitmap, out-of-memory, save-image

我正在 Android 中创建某种 2D 图像编辑器，但我遇到了大文件不适合内存的大问题。

我需要放大/缩小图像放置一些形状然后保存。

我的问题是：

如何在不耗尽内存的情况下加载图像并保存它？我一直在阅读有关 bitmapregiondecode 和示例技术的信息，但必须有另一种解决方案。如果我总是使用 regiondecode，如何保存图像？

图像需要良好的细节质量，因为它是建筑图像……而且线条必须明确。

我是新手，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:58:49.463

处理图像时注意两点：

tempBitmap = Bitmap.createBitmap(bit);

克隆用于缩放和其他操作的位图，但不会使用原始位图，因为保存时它会失去清晰度；

完成位图后给出
bit.recycle(); 释放内存空间

# iphone - 如何在单击按钮时创建一个半透明图层，该图层会向上 滑动以用于 iphone

> ID：12778182
> 
> 赞同：0
> 
> 时间：2012-10-08T08:47:02.513
> 
> 标签：iphone, objective-c, xcode

嗨，我想在下图中创建一个类型的图层。

![在此处输入图像描述](../Images/e077a242d913e8ab3a4f3254e4c62230.png)

当我点击设置按钮时，图层（带有捕捉模式和快门速度）会向上滑动。

我无法弄清楚我应该做什么来创建这样的东西。还希望在图层以及其上的按钮中也具有类似的半透明度。

再次单击同一个按钮时，图层（具有捕获模式和快门速度）消失，留下之前屏幕上的内容（相机视图和带有相机捕获按钮的下栏，以及两个设置按钮）

请任何建议都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:17:43.397

Maybe you can create a UIView and place every button you need there, and place it below the screen size. then when you click the setting button you call core animation to move the view up, click setting again to move it down.

# forth - 非常简洁的 Forth 应用程序示例？

> ID：12778187
> 
> 赞同：34
> 
> 时间：2012-10-08T08:47:15.043
> 
> 标签：forth

在[本次演讲](http://www.ultratechnology.com/1xforth.htm)中，查克·摩尔（Forth 的创建者）提出了一些非常大胆、全面的主张，例如：

1.  “我见过的每个我没有编码的应用程序中的代码量是它需要的十倍”
2.  “大约一千条指令似乎对我来说是正确的，可以做任何事情”
3.  “如果你正在编写需要[局部变量]的代码，那么你就是在编写非最佳代码。不要使用局部变量。”

我试图弄清楚摩尔先生是 a) 绝对出色的天才还是 b) 疯子。但这是一个主观问题，我不是在这里寻找这个问题的答案。我正在寻找的是可以使用 Forth 在“1000 条或更少的指令”中解决的复杂现实问题的示例，以及演示如何执行此操作的源代码。仅显示一个真实世界系统的一个重要部分的示例会很好，但请不要使用可以在另一种高级语言的 5 或 10 行中复制的“玩具”代码示例。

如果您在 Forth 中编写了真实世界的系统，只使用了少量源代码，但不能随意显示源代码（因为它是专有的），我仍然想听听它。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-11T18:21:17.740

您需要了解[Chuck Moore](http://en.wikipedia.org/wiki/Charles_H._Moore)与您和我有些不同。他是在一个大型计算机由 16 KB 或同等核心内存组成的时代接受训练的，他能够用当时的计算机做很多事情。也许 Forth 最大的成功，除了他的 OKAD-II 芯片设计包（这不是错字）之外，是一个多用户多任务 Forth 系统，负责同时控制[NRAO](http://en.wikipedia.org/wiki/National_Radio_Astronomy_Observatory)的数据采集仪器和数据分析/可视化软件。大小适中的计算机几乎无法自行编译[Fortran](http://en.wikipedia.org/wiki/Fortran)源代码。

他所说的“应用程序”，我们可以认为是一个更大、更模糊的东西的“组件”，称为应用程序。更一般地说，最好记住一个摩尔“应用程序”或多或少等同于当今[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)三元组中的一个“视图”。为了保持较小的内存消耗，他严重依赖覆盖和即时编译技术。从一个程序界面切换到另一个程序界面时，通常涉及从源代码重新编译整个应用程序/视图。这发生得如此之快，你不知道它正在发生。有点像今天您每次激活应用程序时， Android 如何将[Dalvik](http://en.wikipedia.org/wiki/Dalvik_%28software%29)代码重新编译为本机[ARM代码。](http://en.wikipedia.org/wiki/ARM_architecture)

在任何给定时间，OKAD-II 加载到内存并运行的代码都不超过 2.5 KB。但是，OKAD-II 的磁盘源远大于 2.5 KB。尽管如此，它仍然比最接近的竞争对手[SPICE](http://en.wikipedia.org/wiki/SPICE)更紧凑。

我经常对 Chuck Moore 的观点感到好奇，并发现他对简单的永无止境的追求令人着迷。因此，以[MythBusters](http://en.wikipedia.org/wiki/MythBusters)的方式，我通过尝试尽可能少地设计我自己的系统来检验他的主张。我很高兴地报告他在硬件和软件问题上的主张几乎是正确的。例如，在去年 9 月的 [硅谷第四兴趣小组期间](http://www.forth.org/svfig/)(SVFIG) 会议，我使用我的 Kestrel-2 本身为幻灯片生成视频。这需要我为它编写一个幻灯片演示程序，它占用了 4 KB 的内存用于代码，4 KB 用于幻灯片数据结构。每个 Forth 字的平均空间为 6 个字节（出于我不会在此详述的原因），该应用程序的“大约 1000 条（Forth）指令”的估计值与 Chuck Moore 估计的他自己的“应用程序”差不多“ 成为。

如果您有兴趣与现实世界的 Forth 编码员（或过去曾这样做过，而且似乎越来越多的人）交谈，并且您恰好在[湾区](http://en.wikipedia.org/wiki/San_Francisco_Bay_Area)，硅谷 Forth 兴趣小组仍然会遇到每一位每月的第四个星期六，11 月和 12 月除外，即第三个星期六。如果您有兴趣参加会议，即使只是采访 Forth 编码人员并了解“真实世界”的 Forth 是什么样的，请访问 meetup.com 并关注我们。我们还在 YouTube 上直播我们的会议，但我们不太擅长。我们正在滥用不合适的硬件和软件来进行竞标，因为我们对这类事情的预算为零。:)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-09T00:32:36.760

Forth 确实非常紧凑！没有形式参数的字（以及硬件上的零操作数指令 - 例如[GA144](http://www.greenarraychips.com/)）可以节省很多。另一个导致其紧凑性的主要因素是调用约定和连接性质所提供的对冗余代码的绝对无情的分解。

我不知道它是否属于非玩具示例，但 Fignition 的[Turtle Graphics](http://en.wikipedia.org/wiki/Turtle_graphics)实现（在[FigForth](https://sites.google.com/site/libby8dev/fignition)中）仅编译了**307 个字节**并适合单个源块！这包括定点三角和所有正常的海龟命令。这不是可读 Forth 的最佳示例，因为它试图将其压缩到具有单字符名称的单个源代码块中，例如：

```
\ 8.8 fixed point sine table lookup
-2 var n F9F2 , E9DD , CEBD , AA95 , 7F67 , 4E34 , 1A c,
: s abs 3C mod dup 1D > if 3C swap - then dup E > if
  -1 1E rot - else 1 swap then n + c@ 1+ * ;

0 var x 0 var y 0 var a
0 var q 0 var w 
: c 9380 C80 0 fill ; \ clear screen
: k >r 50 + 8 << r> ! ;
: m dup q @ * x +! w @ * y +! ; \ move n-pixels (without drawing)
: g y k x k ; \ go to x,y coord
: h dup a ! dup s w ! 2D + s q ! ; \ heading
: f >r q @ x @ y @ w @ r 0 do >r r + >r over + \ forward n-pixels
  dup 8 >> r 8 >> plot r> r> loop o y ! x ! o r> o ;
: e key 0 vmode cls ; \ end
: b 1 vmode 1 pen c 0 0 g 0 h ; \ begin
: t a @ + h ; \ turn n-degrees 
```

使用它也非常简洁。

```
: sin 160 0 do i i s 4 / 80 + plot loop ; 
```

![正弦波](../Images/c743ac20505c4ad76e8ddcf433ecb134.png)

```
: burst 60 0 do 0 0 g i h 110 f loop ; 
```

![爆裂](../Images/c6cfb7be2918d2b30a474501ffa687fd.png)

```
: squiral -50 50 g 20 0 do 100 f 21 t loop ; 
```

![松鼠](../Images/4e03fa8f86fbb507a6dbd35876219c13.png)

```
: circle 60 0 do 4 f 1 t loop ; 
: spiral 15 0 do circle 4 t loop ; 
```

![螺旋](../Images/87c0f40e4ac51dc6b9e7bbde0345f38f.png)

```
: star 5 0 do 80 f 24 t loop ; 
: stars 3 0 do star 20 t loop ; 
```

![星星](../Images/70cf9e619acfc5735c79351a2276922a.png)

```
: rose 0 50 0 do 2 + dup f 14 t loop ; 
```

![玫瑰](../Images/b5810fbadcb3e3b14f1604555f99c9f1.png)

```
: hp 15 0 do 5 f 1 t loop 15 0 do 2 f -1 t loop ; 
: petal hp 30 t hp 30 t ; 
: flower 15 0 do petal 4 t loop ; 
```

![花](../Images/725a3030f27a25e9fa83fe43a0a31303.png)

（无耻博客插件：http: [//blogs.msdn.com/b/ashleyf/archive/2012/02/18/turtle-graphics-on-the-fignition.aspx](http://blogs.msdn.com/b/ashleyf/archive/2012/02/18/turtle-graphics-on-the-fignition.aspx)）

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-22T22:45:24.377

今天人们不太了解的是 Forth 预期在 21 世纪初与[敏捷方法](http://en.wikipedia.org/wiki/Agile_software_development)相关的编码方法的方式。具体来说：

*   Forth 介绍了微小方法编码的概念——用小方法使用小对象。您也可以在这里为[Smalltalk](http://en.wikipedia.org/wiki/Smalltalk)和[Lisp](http://en.wikipedia.org/wiki/Lisp_%28programming_language%29)提供一个案例，但在 1980 年代后期，Smalltalk 和 Lisp 的实践都倾向于更大、更复杂的方法。Forth 总是接受非常小的方法，这仅仅是因为它鼓励在堆栈上做很多事情。

*   第四，甚至比 Lisp 更普及了解释器只是一个小软件模式，而不是论文大小的砖块的概念。遇到难以编码的问题？Forth 解决方案*必须*是“编写一点语言”，因为这就是 Forth 编程的内容。

Forth 在很大程度上是内存和时间限制的产物，那个时代的计算机非常小而且非常慢。这是一个漂亮的设计，可以让您在火柴盒中构建操作系统和编译器。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-08T22:36:12.193

*[Samuel Falvo 的截屏视频Over the Shoulder 1 - Forth 中的文本预处理](http://www.falvotech.com/content/videos/ots-01.mpg)*（1 小时 06 分 25 秒，101 MB，MPEG-1 格式 - 至少[VLC](http://en.wikipedia.org/wiki/VLC_media_player)可以播放）就是 Forth 可以多么紧凑的一个例子 。[替代来源](http://forthworks.com/)（“链接和资源”->“视频”）。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-02-01T09:07:53.210

Forth Inc 的 polyFORTH/32 VAX/VMS 汇编器定义需要大约 8 个源代码块。一个 VAX 汇编器，源代码为 8K。评论。30年后，我仍然感到惊讶。

我目前无法验证，但我猜测解析这些 CODE 定义的指令数可能只有几百个。当我说“花了大约 8 个区块”时，仍然需要，使用该核心的应用程序在 30 年后已经上线并投入生产。

# amazon-dynamodb - 如何在 dynamoDB 上运行 DeleteItemRequest？

> ID：12778194
> 
> 赞同：2
> 
> 时间：2012-10-08T08:48:02.283
> 
> 标签：amazon-dynamodb, delete-row

当我在 dynamoDB 表上运行 DeleteItemRequest 时，我收到一个异常，提示“提供的密钥大小与模式的大小不匹配”。我所做的就是

`DeleteItemRequest deleteRequest = new` `DeleteItemRequest().withTableName(dynamoDbTableName).withKey(key);`

`client.deleteItem(deleteRequest);`

我还需要指定更多内容吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T15:00:35.267

这可能意味着传递给该方法的键与表中主键的类型不匹配。例如，您传递的是数字键，但表使用字符串键。键的类型取决于创建 AttributeValue 时使用的方法。该方法`withN()`创建一个数字键，而该方法`.withS()`创建一个字符串键。

数字键示例：

```
Key key = new Key().withHashKeyElement(new AttributeValue().withN("120")); 
```

字符串键示例：

```
Key key = new Key().withHashKeyElement(new AttributeValue().withS("johndoe")); 
```

还有其他类型的方法，比如二进制类型和集合。有关更多详细信息，请参阅[AttributeValue 类的 javadoc 。](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/dynamodb/model/AttributeValue.html)

# javascript - javascript if( 变量 = =(变量 2 || 变量 3 || ...))

> ID：12778196
> 
> 赞同：2
> 
> 时间：2012-10-08T08:48:04.870
> 
> 标签：javascript, loops

> **可能重复：**
> [如何在 JavaScript 中嵌套 OR 语句？](https://stackoverflow.com/questions/12743248/how-to-nest-or-statements-in-javascript)

有没有办法做到这一点：

```
 if( variable1 == (variable2 || variable3 || ...) ) 
```

我需要检查 variable1 是否等于 variable2 variable3 4 5 ...

我不能直接这样做：

```
 if( (variable1 == variable2) || (variable1 == variable3) || ...) ) 
```

因为我不知道到底有多少变量 2 3 4 5... 我有

顺便说一句 variable2 3 4 5... 是我数组的元素。我试过这个，但什么也没发生。

```
if( variable1 == (variable2 || variable3 || ...) ) 
```

更新：这是片段

假设 strskill 等于：

```
abc|def|ghi|jkl| 
```

.

```
 var myskl = document.getElementById('strskill').value.split("|");

 for(var q=0; q<(myskl.length); q++)
        {
            var r = r + "myskl[q], ";
            var s = r + "myskl[q]";             
        }

        if(s.indexOf(myArray[i]) > -1)
        {   
            continue;
        } 
```

我试过你的建议，但还是不行！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T08:49:37.133

你不能这样做，因为`A || B || C || ...`总是返回第一个真值。

你可以这样做：

```
if ([variable2, variable3, variable4, ...].indexOf(variable1) > -1) {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:56:12.837

你有不同的选择。

*   在纯 javascript 中，`array.indexOf(variable1)`如果在数组中未找到它，则可以使用 which 返回 -1。更多信息[在这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)。请注意不支持此功能的旧浏览器。
*   许多不同的 javascript 框架提供了这种可能性：在[SO](https://stackoverflow.com/a/1473742/488861)上查看这个答案，有很多不同的参考资料

您的代码将是（使用第一个解决方案）：

```
myArray = [variable2, variable3 ...];    
if(myArray.indexOf(variable1) !== -1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T08:59:08.693

你也可以这样[做](http://jsfiddle.net/eYA4s/)

```
a = 1;
b = [1,2,3,4];

function check(a,b){
    i = 0;        
     for (i=0;i<b.length;i++) {
        if (a === b[i]) {
             return true;
        }
    }
    return false;
 }

alert(check (a,b)) 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:09:39.573

假设从您的更新中您想查找是否在列表的其余部分中找到了第一个条目：

```
var myskl = document.getElementById('strskill').value.split("|");
var s = myskl.shift();
var found = (myskl.indexOf(s) >= 0); 
```

如果要找到的字符串`s`s 来自其他地方，请删除该`.shift()`行。

请注意，这`indexOf()`是 JS 的最新添加 - 如果它不存在，请使用“shim”函数将其添加到浏览器中 - 请参阅[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T08:55:20.447

这不会像您正在做的那样工作 检查变量 2 到 n 中的任何一个是否可以被视为布尔值 True ，然后将其与变量 1 的值进行比较

如果变量 2 到 n 在数组中，您应该创建一个函数 is_member 获取数组和变量 1 并返回一个 bool

这可以通过 for 遍历数组并返回 true 来完成，如果 ether 值匹配 varaible1 在其他情况下，您应该在 for boucle 之后返回 false

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T08:56:13.820

您不能直接执行此逻辑操作。您必须`indexOf`像@xdazz 所示那样使用或使用如下所示的循环

```
function inArray(array, val){
    for(var i = 0; i < array.length; i++){
       if(array[i] == val){
          return true;
       }
    }
    return false;
}

var arr = [3, 4, 5, 6, 7, 8, 9];
var var1 = 90;
inArray(arr, var1); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T09:00:21.203

您将不得不使用`for`/`while`循环来检查这一点。如果要保持`if`语句完整，可以使用匿名函数： var myArr=[false,true,true,false];

```
if((function(arr,compareTo){
    for( var i=0;i<arr.length;i++){
     if(arr[i]==compareTo) return true;   
    }
    return false;
})(myArr,true)){
// ⇑⇑⇑⇑     ⇖The variable you want to check against
//The array with the values you want to check
    document.write('Yes!')

}else{
        document.write('No :-(');
} 
```

↪[在 JSFiddle 查看这个例子](http://jsfiddle.net/Juj9H/2/)

# visual-studio-2010 - 无法为 JQuery 更新 Nuget 包

> ID：12778198
> 
> 赞同：0
> 
> 时间：2012-10-08T08:48:06.113
> 
> 标签：visual-studio-2010, nuget, visual-sourcesafe

我在 VS 2010 中有一个项目，并使用 Visual Source Safe 2005 进行源代码控制系统。每当我尝试更新我的 NuGet 包时。它显示“已安装”，但是随着 Nuget 正在安装包，会出现很多红色线条。

我认为安装不正确。有人可以帮忙吗？

![在此处输入图像描述](../Images/a3839eb82684a66925e9fd7e937c38bb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:18:24.527

看起来它无法卸载以前版本的 jquery ui，因为它已从原始版本进行了修改。

~~尝试手动删除所有 jquery 文件，并从项目文件中的 packages.config 中删除包节点。~~

因为您想保留您的自定义 jquery ui，但似乎要升级所有软件包或升级依赖于较新版本 jquery 的软件包，您会收到这些错误。

如果您只是尝试更新所有包，并且没有任何依赖 jquery ui 的包，我会将其从 packages.config 中删除。这些文件仍然存在，但不再由 NuGet 管理。

如果您尝试升级具有更高 jquery ui 依赖性的特定包，那么您可以通过编辑配置来假装安装了更高版本，但是依赖性可能是有原因的，我不建议这样做。

# c++ - 如何将 cvFilter2D 函数与一维内核一起使用

> ID：12778200
> 
> 赞同：2
> 
> 时间：2012-10-08T08:48:07.957
> 
> 标签：c++, opencv

我有 4 个内核，分别是 A、At、B 和 Bt。

1.  一个 [1 0 0 -1]
2.  At(A 的转置矩阵) 1 0 0 -1
3.  B [0.50 0 0 -1 0 0 0.50]
4.  Bt(B的转置矩阵) 0.50 0 0 -1 0 0 0.50

`cvFilter2D`我分别使用 4 个内核运行该函数。以下是不同内核的部分结果：

1.  0.003921568 -0.007843137 0.000653625 -0.009803951 -0.003921628 -0.009803891 -0.007843137 -0.007843137 -0.009803951 -0.003485799
2.  在 -0.019082069 0.002332032 -0.008974016 0.000923872 -0.000217795 -0.00043577 0.002332032 -0.000512481 0.000923872 -0.0005457674 -00.0207
3.  B -2.68E-25 -2.67E-25 -2.68E-25 -2.67E-25 -2.68E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E- 25
4.  BT -2.65E-25 -2.67E-25 -2.66E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E-25 -2.67E- 25

从结果来看，函数用核 B 和 Bt 计算出错误的结果。谁能告诉我如何使用 4 个内核正确运行 cvFilter2D？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:40:22.500

我在网上找到一个函数如下。据说这个函数与matlab中的“conv2”相似。任何改进功能的建议将不胜感激！

```
enum ConvolutionType {
    /* Return the full convolution, including border */  
    CONVOLUTION_FULL,  
    /* Return only the part that corresponds to the original image */  
    CONVOLUTION_SAME,   
    /* Return only the submatrix containing elements that were not influenced
    by the border */ 
    CONVOLUTION_VALID 
}; 
void conv2(const Mat &img, const Mat& kernel, ConvolutionType type, Mat& dest) 
{   
    Mat source = img;   
    if(CONVOLUTION_FULL == type)
    {     
        source = Mat();
        const int additionalRows = kernel.rows-1, additionalCols = kernel.cols-1;     
        copyMakeBorder(img,source,(additionalRows+1)/2,additionalRows/2,\
        additionalCols+1)/2,additionalCols/2,BORDER_CONSTANT,Scalar(0)); 
    }     
    Point anchor(kernel.cols - kernel.cols/2 - 1, kernel.rows - kernel.rows/2 - 1);   
    int borderMode = BORDER_CONSTANT;
    Mat kernelInvert;
    flip(kernel,kernelInvert,0);
    filter2D(source,dest,img.depth(),kernelInvert,anchor,0,borderMode);
    if(CONVOLUTION_VALID == type) 
    {
        dest = dest.colRange((kernel.cols-1)/2, dest.cols - kernel.cols/2)\                
                .rowRange((kernel.rows-1)/2, dest.rows - kernel.rows/2);
    } 
} 
```

# c# - 使用 Postsharp 设置构造函数

> ID：12778201
> 
> 赞同：0
> 
> 时间：2012-10-08T08:48:10.043
> 
> 标签：c#, postsharp, aop

如何编写 PostSharp 方面以将属性应用于类？场景是这样的：

```
public sample ss()
{
file.create("some file ");
} 
```

这可以通过

```
[assembly: MyAspect(AttributeTargetAssembly="mscorlib", AttributeTargetTypes="System.IO.File", AttributeTargetMembers="Create"] 
```

同样对于以下结构，我们如何创建方面？

```
public sample ss()
    {
     StreamWriter sw= new StreamWriter("some file");    
    } 
```

有可能吗？

等待您的宝贵意见和建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:37:46.880

在您的 Aspect 声明中，添加以下内容，它可能会起作用：

```
[MulticastAttributeUsage(MulticastTargets.Constructor, TargetMemberAttributes = MulticastAttributes.Instance)] 
```

# java - 在运行时使用类对象定义泛型类型

> ID：12778203
> 
> 赞同：0
> 
> 时间：2012-10-08T08:48:18.780
> 
> 标签：java, generics, reflection

是否可以使用类对象声明泛型的类型？

例如，我想做这样的事情：

```
Class returnType = theMethod.getReturnType();

AttributeComponent<returnType> attComponent;

attComponent = new AttributeComponent<returnType>(returnType, attName);
attributeComponents.put(methodName.substring(3), attComponent); 
```

现在我知道这显然是不正确的，但是有没有办法做到这一点？

编辑：稍微解释一下

我使用反射来遍历所有 getter，然后为每个属性生成一个 UI 元素（AttributeComponent 类，它有一个 JComponent 元素和一个 JLabel）。我想使用泛型来创建一个 getValue() 方法，该方法将返回属性类型的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:52:17.517

我不知道是否有办法编译类似的东西，但它没有什么价值。

认为由于**类型擦除**，编译的类不使用泛型信息。也就是说，做 a对于在编译时`Set<String> a = new Set<String>();`检查使用是有用的`a`，但在运行时不是。

所以，你想实例化一个 Generic，它的类型只在运行时知道，但在运行时它不会被使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:52:39.000

我想说这可以通过将方法返回类型定义为泛型来实现；但是您需要将实际类型作为类参数传递才能像您展示的那样使用它：

```
<T> T yourMethod(Class<T> returnType) {
    // use <T> as generic and returnType to refer to the actual T class
    /* ... */ new AttributeComponent<T>(returnType, attName);
} 
```

* * *

查看您正在尝试做的事情的更大背景也很有用。如果你想`AttributeComponent.getValue()`返回一些泛型类型`T`（也就是方法返回类型），那是完全没用的，除非你在编译时知道每个方法的返回类型，否则`T`无非就是一个`Object`. 在我上面的示例中，您`yourMethod`使用一个您已经知道的类进行调用，并且将返回相同的类型（或某些`AttributeComponent`类型或其他类型）。

# sql - 删除语句花费太多时间

> ID：12778204
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:48:27.253
> 
> 标签：sql, sql-server-2008-r2

我的 sql Server 2008 表有超过 500 万条记录。我在单个语句中删除了超过 400 万条记录。需要一个多小时。这是删除记录的最佳查询吗？

我的删除查询

```
delete From [Table] 
where SUBSTRING([Column_YYY],1,CHARINDEX(N'',[Column_YYY])-1) = '4' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:03:21.617

那是因为您的查询需要在数据库的每一行上运行 SUBSTRINGfuncion 以检查它是否符合条件。您应该始终避免使用 WHERE 子句上的函数。即使你有索引，它们也不会被使用。

如果它占用了那么多并且它是一个常见的操作，您可以考虑将该值的结果保存在数据库上并在其上创建一个索引

编辑：与主要问题无关，但仍是讨论的一部分。索引用法： ![在此处输入图像描述](../Images/06f9e35082cb1a47f99ca9a32a86b224.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:57:45.950

不，这无论如何都不是最好的查询。您的子字符串以 1 开头，并且您正在与单个字符进行比较，`'4'`！要在 ColumnYYY 上使用索引，只需将其更改为 LIKE 子句，让索引快速搜索前两个字符。

```
delete [Table] 
where [Column_YYY] LIKE N'4%' 
```

如果这不是针对表的 80%，那将是正确的，在这种情况下，SQL Server 无论如何都会完全扫描表。为了防止 tempdb 空间问题或过大的事务（锁定），我会将其分解为位：

```
set nocount on
select 1;
while @@rowcount > 0
begin
    ;with x as (select top 100000 * from [Table] where [Column_YYY] LIKE N'4%')
    delete x;
end; 
```

# php - jQuery函数调用ajax不工作/返回任何东西

> ID：12778205
> 
> 赞同：0
> 
> 时间：2012-10-08T08:48:27.517
> 
> 标签：php, javascript, jquery, ajax, json

我正在使用使用javascript等而不是其母语的icenium为移动设备编写一个应用程序（不是网络应用程序）。

该应用程序显示数据库中的行，显示事件。然后，用户单击一个显示有关该事件的更多信息的事件，但是我无法从 js 函数调用 ajax，如下所示：

```
function showSingle(itemId){

            //document.write(itemId);
            $('#output').fadeOut();
            $('#single').fadeIn("fast");
            $.ajax({
                url: 'http://dev.123456789.co.uk/getSingle.php',
                dataType: 'jsonp',
                data: { dbId: itemId },
                jsonp: 'jsoncallback',
                timeout: 5000,
                success: function(data, status){

                        var linkedPageSingle = '<h2>'+item.eventName+'</h2>'
                            + '<p>Description: '+item.description+'</p><p>Type: '
                            + item.type+'</p><p id="pageid">'+item.id+'</p>';

                        $('#single').append(linkedPageSingle);
                        // pageId = $('#pageid').html();
                        $('#single').text('debugdebug.');
                },
                error: function(){
                    $('#single').text('There was an error loading the data.');
                }
        });
      } 
```

这不返回任何数据，甚至不返回 $('#single').text('debugdebug.'); 所以ajax调用一定有问题？还

```
error: function(){
                    $('#single').text('There was an error loading the data.');
                } 
```

不输出。你能发现其中的错误吗？该函数的调用在这里：

```
var linkedPage = '<h2><a href="#" onClick="showSingle('+item.id+')">'+item.eventName+'</a></h2>'
                            + '<p>Description: '+item.description+'</p><p>Type: '
                            + item.type+'</p><p id="pageid">'+item.id+'</p>'; 
```

它位于页面的 document.ready 部分中，在 ajax 方法中（有效）。

getSingle.php：

```
<?php

/*
    * Script to connect to database and pull out information for app!
*/

include 'connect.php';

$dbId = $_POST['dbId'];
$query = mysql_query("SELECT * FROM calTest where `id`='$dbId'");
$records = array();

while($row = mysql_fetch_assoc($query)) {
    $records[] = $row;
}

echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';

?> 
```

看不到哪里出错了，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:06:41.947

我认为问题在于发布数据

```
$dbId = $_POST['dbId'];

echo $_GET['jsoncallback']; 
```

您正在一起使用 get 或 post 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:56:56.153

您将回调设置为，`jsoncallback`因此您需要添加该函数来解析项目：

```
function showSingle(itemId){

        //document.write(itemId);
        //$('#output').fadeOut();
        //$('#single').fadeIn("fast");
        $.ajax({
            url: 'http://dev.thedesignworks.co.uk/getSingle.php',
            dataType: 'jsonp',
            data: { dbId: itemId },
            jsonp: 'jsoncallback',
            timeout: 5000
        });
}

function jsoncallback(data, status) {
    var linkedPageSingle;
    $.each(data, function(i, item) {
         linkedPageSingle = '<h2>'+item.eventName+'</h2>'
                        + '<p>Description: '+item.description+'</p><p>Type: '
                        + item.type+'</p><p id="pageid">'+item.id+'</p>';

         $('#single').append(linkedPageSingle);
         // pageId = $('#pageid').html();
    });​
    $('#single').text('debugdebug.');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:13:47.890

尝试这个

```
function showSingle(itemId){

            //document.write(itemId);
            $('#output').fadeOut();
            $('#single').fadeIn("fast");
            $.ajax({
                url: 'http://dev.thedesignworks.co.uk/getSingle.php',
                dataType: 'jsonp',
                data: { dbId: itemId },
                timeout: 5000,
                success: function(data, status){
                        alert(data)
if (data.length > 0) {
                        var linkedPageSingle = '<h2>'+item.eventName+'</h2>'
                            + '<p>Description: '+item.description+'</p><p>Type: '
                            + item.type+'</p><p id="pageid">'+item.id+'</p>';

                        $('#single').append(linkedPageSingle);
                        // pageId = $('#pageid').html();
                        $('#single').text('debugdebug.');
}
                },
                error: function(){
                    $('#single').text('There was an error loading the data.');
                }
        });
      } 
```

php页面将是

```
 <?php

    /*
        * Script to connect to database and pull out information for app!
    */

    include 'connect.php';

    $dbId = $_POST['dbId'];
    $query = mysql_query("SELECT * FROM calTest where `id`='$dbId'");
    $records = array();

    while($row = mysql_fetch_assoc($query)) {
        $records[] = $row;
    }

if (count($records) > 0)
    echo json_encode($records);

    ?> 
```

# postgresql - PostgreSQL 函数是事务性的吗？

> ID：12778209
> 
> 赞同：85
> 
> 时间：2012-10-08T08:48:41.697
> 
> 标签：postgresql, transactions

像下面这样的 PostgreSQL 函数是自动事务的吗？

```
CREATE OR REPLACE FUNCTION refresh_materialized_view(name)
  RETURNS integer AS
$BODY$
 DECLARE
     _table_name ALIAS FOR $1;
     _entry materialized_views%ROWTYPE;
     _result INT;
 BEGIN          

     EXECUTE 'TRUNCATE TABLE ' || _table_name;

     UPDATE materialized_views
     SET    last_refresh = CURRENT_TIMESTAMP
     WHERE  table_name = _table_name;

     RETURN 1;
END
$BODY$
  LANGUAGE plpgsql VOLATILE SECURITY DEFINER; 
```

换句话说，如果在函数执行过程中发生错误，是否会*回滚*任何更改？如果这不是默认行为，我怎样才能使函数*事务*性？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-10-08T09:19:19.120

**PostgreSQL 12 update**: [there is limited support for top-level `PROCEDURE`s that can do transaction control](https://www.postgresql.org/docs/12/plpgsql-transactions.html). You still cannot manage transactions in regular SQL-callable functions, so the below remains true except when using the new top-level procedures.

* * *

Functions are part of the transaction they're called from. Their effects are rolled back if the transaction rolls back. Their work commits if the transaction commits. Any `BEGIN ... EXCEPT` blocks within the function operate like (and under the hood use) savepoints like the `SAVEPOINT` and `ROLLBACK TO SAVEPOINT` SQL statements.

The function either succeeds in its entirety or fails in its entirety, barring `BEGIN ... EXCEPT` error handling. If an error is raised within the function and not handled, the transaction calling the function is aborted. Aborted transactions cannot commit, and if they try to commit the `COMMIT` is treated as `ROLLBACK`, same as for any other transaction in error. Observe:

```
regress=# BEGIN;
BEGIN
regress=# SELECT 1/0;
ERROR:  division by zero
regress=# COMMIT;
ROLLBACK 
```

See how the transaction, which is in the error state due to the zero division, rolls back on `COMMIT`?

If you call a function without an explicit surounding transaction the rules are exactly the same as for any other Pg statement:

```
BEGIN;
SELECT refresh_materialized_view(name);
COMMIT; 
```

(where `COMMIT` will fail if the `SELECT` raised an error).

PostgreSQL does not (yet) support autonomous transactions in functions, where the procedure/function could commit/rollback independently of the calling transaction. This can be simulated using a new session via [dblink](https://stackoverflow.com/a/22353286/32453).

**BUT**, things that aren't transactional or are imperfectly transactional exist in PostgreSQL. If it has non-transactional behaviour in a normal `BEGIN; do stuff; COMMIT;` block, it has non-transactional behaviour in a function too. For example, `nextval` and `setval`, `TRUNCATE`, etc.

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2015-07-09T13:10:15.010

由于我对 PostgreSQL 的了解不如 Craig Ringer 的深入，我将尝试给出一个更简短的答案：是的。

如果您执行的函数中有错误，则所有步骤都不会影响数据库。

`PgAdmin`此外，如果您在同样的情况下执行查询。

例如，如果您在查询中执行：

```
update your_table yt set column1 = 10 where yt.id=20;

select anything_that_do_not_exists; 
```

`id = 20`行中的更新`your_table`不会保存在数据库中。

**2018 年 9 月更新**

为了澄清这个概念，我用非事务性函数 nextval 做了一个小例子。

首先，让我们创建一个序列：

`create sequence test_sequence start 100;`

然后，让我们执行：

`update your_table yt set column1 = 10 where yt.id=20; select nextval('test_sequence'); select anything_that_do_not_exists;`

现在，如果我们打开另一个查询并执行

`select nextval('test_sequence');`

我们将得到 101，因为在后一个查询中使用了第一个值 (100)（即因为序列不是事务性的），尽管更新没有提交。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-10-31T10:59:31.783

[https://www.postgresql.org/docs/current/static/plpgsql-structure.html](https://www.postgresql.org/docs/current/static/plpgsql-structure.html)

> 重要的是不要将在 PL/pgSQL 中用于分组语句的 BEGIN/END 与用于事务控制的类似名称的 SQL 命令混淆。PL/pgSQL 的 BEGIN/END 仅用于分组；他们不会开始或结束交易。函数和触发器过程总是在由外部查询建立的事务中执行——它们不能启动或提交该事务，因为它们没有执行的上下文。但是，包含 EXCEPTION 子句的块有效地形成了一个子事务，可以回滚而不影响外部事务。有关更多信息，请参阅第 39.6.6 节。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-03-02T19:59:30.300

在功能层面，它不是跨国的。换句话说，函数中的每条语句都属于单个事务，这是默认的 db auto commit 值。自动提交默认为真。但无论如何，你必须使用调用函数

`select schemaName.functionName()`

上面的语句'select schemaName.functionName()'是单个事务，我们将事务命名为T1，那么函数中的所有语句都属于事务T1。这样，函数就在单个事务中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-12T18:51:54.650

此外，ATOMIC 事务也包括触发器。

# ios - UITableView 委托触发 NSURLConnection 委托

> ID：12778213
> 
> 赞同：1
> 
> 时间：2012-10-08T08:48:58.610
> 
> 标签：ios, uitableview, nsurlconnection

我通过 NSURLConnction 从服务器获取数据，并希望从获取的数组中填充表格视图。数据出现在 NSURLConnection 委托方法的日志中，但我意识到`numberOfRowsInSection`UITableView 委托方法（DM）之前触发

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {} 
```

NSURLConnection 的 DM。这给我带来了一个问题，因为即使很难我得到正确返回的数据行数总是0（零）..我该如何解决这个问题请分享任何想法..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:58:33.647

didRecieveData 可能被多次调用，并不表示所有数据都已获取。你应该在你的类上实现一个私有属性，例如；

```
@property (nonatomic,retain) NSMutableData tableData; 
```

在你的 didRecieveData 上；

```
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
   [self.tableData appendData:data];
} 
```

之后，当您的连接关闭时

```
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    // use tableData and refresh table...
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:57:03.493

您需要`[tableView reloadData];`在结束时调用`-connection:didReceiveData:`以更新表格视图。

编辑：巴图是对的！你需要在最后调用它`-connectionDidFinishLoading:`

# jdeveloper - 如何在 JDE (RDA) 中找到最大值

> ID：12778220
> 
> 赞同：0
> 
> 时间：2012-10-08T08:49:14.397
> 
> 标签：jdeveloper, jdedwards

我想知道如何在 JDE 解决方案的列中找到最大值？你介意告诉我怎么做吗？因为我无法通过使用 JDE RDA 来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:50:47.813

你是什​​么意思：

> ..我无法通过使用 JDE RDA 来做到这一点..

您不知道如何使用它或者您正在使用 FDA？

好吧，在 RDA 中，您可以使用 Aggregate **Maximum Of**，在您想要最大值的列上进行 Level Break。

在 FDA 上，您需要对您的逻辑进行编码，例如：

```
MaxValue = 0
Begin Loop through the table
  If table.column_you_want > MaxValue
    MaxValue = table.column_you_want
  End If
End Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T20:14:42.507

根据您的需要，如果您正在寻找在表中使用的下一个可用 ID，那么 JDE 中已经很好地实现了一个概念来跟踪表甚至进程的下一个唯一 ID。

表的唯一 id 查看程序 P00022，它按表保存下一个数字。您可以在报表中使用业务功能 X00022 来检索值。

进程的唯一 ID 查看程序 P0002，它按模块保存特定文档类型的下一个编号。使用业务功能 X0002 访问 RDA 中的值。

# redirect - 在命令提示符中使用重定向运算符时显示输入

> ID：12778228
> 
> 赞同：0
> 
> 时间：2012-10-08T08:49:43.260
> 
> 标签：redirect, input, command, prompt

希望这是一个简单/愚蠢的问题。

我正在将程序输入和输出重定向到 Windows 中的文本文件。

例子：

```
program.exe < in.txt > out.txt 
```

但是从输入文件输入的文本不会显示在输出文件中（或不重定向输出时的屏幕）。有什么方法可以轻松展示吗？我试过谷歌，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:54:54.397

取决于`program.exe`输入的内容。`program.exe`如果实际将其输出写入标准输出，您只会在文件（或控制台，如果您不重定向）中看到它。如果您需要以多种方式发送输入（例如同时发送到程序和屏幕），而程序本身实际上并没有为此做准备，您需要类似的东西`tee`- 或真正的 shell，如`bash`.

# bulletphysics - “step”在 stepSimulation 中是什么意思，它的参数在 Bullet Physics 中是什么意思？

> ID：12778229
> 
> 赞同：5
> 
> 时间：2012-10-08T08:49:46.660
> 
> 标签：bulletphysics

子弹物理学中的“STEP”一词是什么意思？

函数`stepSimulation()`及其参数是什么意思？

我已阅读[文档](http://bulletphysics.org/mediawiki-1.5.8/index.php/Stepping_The_World)，但我无法掌握任何内容。

任何有效的解释都会有很大帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-22T03:13:20.110

我知道我迟到了，但我认为接受的答案只比文档的描述好一点。

`timeStep`: 自上次调用以来经过的秒数，而不是毫秒数`stepSimulation`。

`maxSubSteps`：通常应保持为 1，以便 Bullet 自行插入当前值。零值意味着可变的滴答率，这意味着 Bullet 将模拟精确地推进`timeStep`几秒而不是插值。这个功能有问题，不推荐。大于 1 的值必须*始终*满足等式`timeStep < maxSubSteps * fixedTimeStep`，否则您将在模拟中浪费时间。

`fixedTimeStep`：与模拟的分辨率成反比。分辨率随着该值的减小而增加。请记住，更高的分辨率意味着它需要更多的 CPU。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T11:13:57.093

```
btDynamicsWorld::stepSimulation(
   btScalar timeStep,
   int maxSubSteps=1,
   btScalar fixedTimeStep=btScalar(1.)/btScalar(60.)); 
```

`timeStep`- 上次模拟后经过的时间。

对一些内部常数步骤进行内部模拟。`fixedTimeStep`

`fixedTimeStep`~~~ 0.01666666 = 1/60

如果`timeStep`是 0.1，那么它将包括 6 ( `timeStep / fixedTimeStep`) 个内部模拟。

为了使滑翔机运动 BulletPhysics 根据除法后的提醒插入最后一步结果 ( `timeStep / fixedTimeStep`)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-02T09:06:04.207

*   `timeStep`- 逐步模拟的时间量（以秒为单位）。通常，您将通过自上次调用它以来的时间。

*   `maxSubSteps`- 每次调用 Bullet 时允许的最大步数。

*   `fixedTimeStep`- 调节模拟的*分辨率*。如果你的球穿透你的墙壁而不是与它们碰撞，请尝试减少它。

* * *

在这里，我想解决 Proxy 的答案中关于 value`1`的特殊含义的问题`maxSubSteps`。只有一个特殊值，即`0`您很可能不想使用它，因为模拟将使用非常量的时间步长。所有其他值都相同。让我们看一下[实际的代码](https://github.com/bulletphysics/bullet3/blob/master/src/BulletDynamics/Dynamics/btDiscreteDynamicsWorld.cpp)：

```
if (maxSubSteps)
{
    m_localTime += timeStep;
    ...
    if (m_localTime >= fixedTimeStep)
    {
        numSimulationSubSteps = int(m_localTime / fixedTimeStep);
        m_localTime -= numSimulationSubSteps * fixedTimeStep;
    }
}
...
if (numSimulationSubSteps)
{
    //clamp the number of substeps, to prevent simulation grinding spiralling down to a halt
    int clampedSimulationSteps = (numSimulationSubSteps > maxSubSteps) ? maxSubSteps : numSimulationSubSteps;
    ...
    for (int i = 0; i < clampedSimulationSteps; i++)
    {
        internalSingleStepSimulation(fixedTimeStep);
        synchronizeMotionStates();
    }
} 
```

`maxSubSteps`所以，等于没有什么特别之处`1`。`timeStep < maxSubSteps * fixedTimeStep`如果您不想*浪费*时间，您应该真正遵守这个公式。

# iphone - 选择时如何更改 UITabBarItem 标题的颜色

> ID：12778231
> 
> 赞同：0
> 
> 时间：2012-10-08T08:49:47.720
> 
> 标签：iphone, ios, xcode4

我的环境，

```
iOS6
Xcode 4.5.1 
```

我想在选择时更改 UITabBarItem 标题的颜色。

我将 CustomUITabBarItem 用于 UITabBarItem。- 自定义UITabBarItem.m

```
@implementation customUITabBarItem

@synthesize customHighlightedImage;

-(UIImage *) selectedImage
{
    return self.customHighlightedImage;
}

- (void) dealloc
{
    [customHighlightedImage release];
    customHighlightedImage=nil;
    [super dealloc];
}

@end 
```

视图控制器.m

```
#import "FirstViewController.h"
#import "customUITabBarItem.h"

@interface FirstViewController ()

@end

@implementation FirstViewController

- (void)viewDidLoad
{   
    [super viewDidLoad];
    CustomUITabBarItem *tabItem = [[customUITabBarItem alloc] initWithTitle:@"first" image:[UIImage imageNamed:@"first.png"] tag:0]; 
    tabItem.customHighlightedImage = [UIImage imageNamed:@"first_selected.png"];
    self.tabBarItem = tabItem;
    [tabItem release];
    tabItem = nil;
} 
```

我怎样才能改变颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:55:37.753

```
 [self.tabBarItem setTitleTextAttributes:[NSDictionary dictionaryWithObjectsAndKeys:
                                            [UIFont fontWithName:@"AmericanTypewriter" size:20.0f], UITextAttributeFont,
                                            [UIColor blackColor], UITextAttributeTextColor,
                                            [UIColor grayColor],        
                                            nil]]; 
```

请确保这仅适用于 iOS 5.0 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T09:03:04.747

```
#define SYSTEM_OS [[[UIDevice currentDevice] systemVersion] intValue]
- (void) setTabBarColors {

    if (SYSTEM_OS >= 5) {

        self.tabBarController.tabBar.tintColor = [UIColor blueColor];
        self.tabBarController.tabBar.selectedImageTintColor = [UIColor magentaColor];

        __block NSDictionary *dict1 = [NSDictionary dictionaryWithObjectsAndKeys:
                                       [UIFont fontWithName:@"ArialMT" size:12.0f], UITextAttributeFont,
                                       [UIColor lightGrayColor], UITextAttributeTextColor,
                                       nil];

        __block NSDictionary *dict2 = [NSDictionary dictionaryWithObjectsAndKeys:
                                       [UIFont fontWithName:@"ArialMT" size:12.0f], UITextAttributeFont,
                                       [UIColor whiteColor], UITextAttributeTextColor,
                                       nil];

        [self.tabBarController.viewControllers enumerateObjectsUsingBlock:^(UIViewController * obj, NSUInteger idx, BOOL *stop) {

            [obj.tabBarItem setTitleTextAttributes:dict1 forState:UIControlStateNormal];
            [obj.tabBarItem setTitleTextAttributes:dict2 forState:UIControlStateSelected];

        }];

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:16:56.953

```
//it easy to change color
-(void)your_method
{
// your actions
[tabItem setBackgroundColor:[UIColor redColor]];
} 
```

# javascript - javascript 闭包和原型

> ID：12778239
> 
> 赞同：4
> 
> 时间：2012-10-08T08:50:00.823
> 
> 标签：javascript, node.js, closures, prototype

我以为我已经理解了闭包的概念，但是下面的代码对我来说表现得令人惊讶：

```
function A(x)
{
  this.getX1 = function () { return x; }
  A.prototype.getX2 = function () { return x; }
}
var a1 = new A(1);
var a2 = new A(2);
console.log ('a1.getX1()=%d', a1.getX1 ()); // 1
console.log ('a2.getX1()=%d', a2.getX1 ()); // 2
console.log ('a1.getX2()=%d', a1.getX2 ()); // 2 ???
console.log ('a2.getX2()=%d', a2.getX2 ()); // 2 
```

我可以理解原型方法的行为是否与实例方法不同，但这看起来 x 已成为静态变量。更改调用顺序不会改变结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T08:58:46.297

当您更改 时，`prototype`您正在更改给定类`function`的**所有**实例，*包括那些已经存在*的实例。

因此，当您调用...

```
A.prototype.getX2 = function () { return x; } 
```

您正在`a1`为`A`. 因此，您最终会得到以下伪代码：

```
<all instances of A>.getX2 = function () {
    return <latest value of x passed to A constructor>;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T08:55:28.607

这里的静态成员是`A.prototype.getX2`. 第二次调用`A.prototype.getX2 = function () { return x; }`(due to `var a2 = new A(2);`) 替换了第一次调用。要理解它，您可以颠倒实例化的顺序：

```
var a2 = new A(2);
var a1 = new A(1); 
```

然后你将拥有：

```
a1.getX1()=1
a2.getX1()=2
a1.getX2()=1
a2.getX2()=1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T09:02:24.147

您定义 getX2 两次，每次创建一个新的 A。该函数的结果将始终是最后一个 X。考虑像这样重写代码：

```
function A(x) {

    this.x = x;
    this.getX1 = function() {
        return this.x;
    }
}
A.prototype.getX2 = function() {
    return this.x;
}
var a1 = new A(1);
var a2 = new A(2);
console.log('a1.getX1()=%d', a1.getX1()); // 1
console.log('a2.getX1()=%d', a2.getX1()); // 2
console.log('a1.getX2()=%d', a1.getX2()); // 1
console.log('a2.getX2()=%d', a2.getX2()); // 2​​​ 
```

这样，您只需定义一次 getX2 并按预期工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:00:26.517

你写

```
function A(x)
{
  this.getX1 = function () { return x; }
  A.prototype.getX2 = function () { return x; }
} 
```

`A.prototype.getX2`此构造函数每次都会覆盖。

所以首先

```
var a1 = new A(1); // This invokes A and adds a function `getX2` to the prototype of `A`which returns `x` that is `1`

var a2 = new A(2); // This invokes A and overwrites the function `getX2` in the prototype of `A` with a function which returns `x` that is `2` now. 
```

所以应该是这样的

```
function A(x)
{
  this.getX1 = function () { return x; }
}

A.prototype.getX2 = function () { return this.getX1(); } 
```

# c# - 使用 Tshark 计算所有接收到的数据包

> ID：12778246
> 
> 赞同：0
> 
> 时间：2012-10-08T08:50:32.650
> 
> 标签：c#, wireshark, tshark

我正在构建应用程序，该应用程序开始使用命令行通过 Tshark 进行捕获，并且我正在寻找在启动 Tshark 进程后计算所有接收到的数据包的选项这是我启动该进程的函数：

```
int _interfaceNumber;
string _pcapPath;

    Process tshark = new Process();
    tshark.StartInfo.FileName = _tshark;
    tshark.StartInfo.Arguments = string.Format(" -i " + _interfaceNumber + " -V -x -s " + _packetLimitSize + " -w " + _pcapPath);
    tshark.StartInfo.RedirectStandardOutput = true;
    tshark.StartInfo.UseShellExecute = false;
    tshark.StartInfo.CreateNoWindow = true;
    tshark.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
    tshark.Start(); 
```

也许有人有想法？

# vb.net - VB 2010中如何通过文件的默认应用打开选中的文件？

> ID：12778249
> 
> 赞同：5
> 
> 时间：2012-10-08T08:50:45.800
> 
> 标签：vb.net

我有用 VB 2010 编写的 Windows 应用程序。在这里，用户可以从打开的对话框中选择任何文件。所以，我想在相应的应用程序中打开文件。例如，假设用户选择 docx 文件，那么我必须使用 msword 打开文件，假设，如果它是一个 pdf 文件，那么我必须使用 adobe 阅读器或可用的 pdf 阅读器（默认应用程序）打开。

这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T11:06:12.257

`Shell`Windows API`CreateProcess()`用于启动可执行文件。如果您正在加载文档/文件，则这些由 .NET 处理`ShellExecute()`并可以使用以下`Process.UseShellExecute`属性在 .NET 中启动：

```
Private Function ShellExecute(ByVal File As String) As Boolean
  Dim myProcess As New Process
  myProcess.StartInfo.FileName = File
  myProcess.StartInfo.UseShellExecute = True
  myProcess.StartInfo.RedirectStandardOutput = False
  myProcess.Start()
  myProcess.Dispose()
End Function 
```

取自[#VB wiki](http://hashvb.earlsoft.co.uk/index.php/ShellExecute#VB.NET)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T09:00:55.140

试试这个：

现在使用 openfiledialog

```
Dim OpenFileDlg as new OpenFileDialog.

OpenFileDlg.FileName = "" ' Default file name
OpenFileDlg.DefaultExt = ".xlsx" ' Default file extension
OpenFileDlg.Filter = "Excel Documents (*.XLSX)|*.XLSX"
OpenFileDlg.Multiselect = True
OpenFileDlg.RestoreDirectory = True
' Show open file dialog box
Dim result? As Boolean = OpenFileDlg.ShowDialog()

' Process open file dialog box results
for each path in OpenFileDlg.Filenames
    Try
        System.Diagnostics.Process.Start(Path)

    Catch ex As Exception
        MsgBox("Unable to load the file. Maybe it was deleted?")
    End Try
    If result = True Then
        ' Open document
    Else
        Exit Sub
    End If
next 
```

如果文件已向操作系统注册，这将起作用。使用 Try catch 因为如果文件正在使用它可能会引发错误。

**编辑：**它始终使用默认应用程序。

# ios - Page curl modal segue：将底部栏留在屏幕上

> ID：12778253
> 
> 赞同：1
> 
> 时间：2012-10-08T08:50:54.570
> 
> 标签：ios, modalviewcontroller, segue, page-curl

我为 iOS 5+ 开发了一个带有故事板（和 ARC）的应用程序。我有一个没有状态栏的视图控制器、一个顶部导航栏、一个中间的地图和一个底部工具栏，右下角有一个按钮。我已经通过 page curl segue 将按钮链接到模态 VC。

我的问题是我希望页面卷曲效果**仅**适用于地图（就像 iOS 5 的地图一样），或者至少**不适**用于底部工具栏，因此我可以使用底部栏的相同按钮呈现/关闭模态 VC （我希望它是持久的）。现在，我可以通过按下按钮来呈现它，但工具栏会随着整个视图上升到屏幕的一半。我可以通过触摸屏幕的左上角来关闭它，但这并不是真正的用户友好。

我可以将工具栏添加到模态视图控制器，但这看起来不太好......

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T14:40:35.677

当我在寻找其他东西时偶然发现这一点时，给你一个快速的想法，但我会考虑：

*   将屏幕的顶部放在容器视图中，然后从中呈现模态视图。它将使底部（工具栏区域）清晰。

*   或者，您可以实现自己的 page curl，和/或使用一些演示如何执行此操作的开源项目，而不是使用标准 segue。

您可能很久以前就解决了这个问题，但也许这对某人有帮助:)

# android - 将数据从一个活动传递到另一个 Toast 消息给出错误

> ID：12778255
> 
> 赞同：0
> 
> 时间：2012-10-08T08:51:02.057
> 
> 标签：android, object

我在我的 Createprofile 类中创建一个对象，并将一个 ID 值通过它传递给我的 CreateProfile1 类：

我的 CreateProfile 类中的代码：

```
public class CreateProfile extends Activity {

TextView tv;
private static final int PICK_FROM_CAMERA = 1;
private static final int PICK_FROM_GALLERY = 2;
ImageView imgview;
int z=0; 
byte b[];
ImageView img;
EditText Idno = null;
EditText GIDno=null;
EditText Name= null;
EditText Owner= null;
EditText Date=null;
AutoCompleteTextView Breed = null;
private DBAdapter DBHelper = null;
private CreateProfile1 PF = null;
String name, ID,GID,ow,br,date;
private EditText mDateDisplay;
private int mYear;
private int mMonth;
private int mDay;
static final int DATE_DIALOG_ID = 1;
String mm="";

 public void auto(){
        // Get a reference to the AutoCompleteTextView in the layout
        AutoCompleteTextView txtView = (AutoCompleteTextView) findViewById(R.id.autocomplete_breed);
        // Get the string array
        String[] breed = getResources().getStringArray(R.array.countries_array);
        // Create the adapter and set it to the AutoCompleteTextView 
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, breed);
        txtView.setThreshold(1);
        txtView.setAdapter(adapter);
        }

 public int radiox(){

     RadioGroup radioGroup = (RadioGroup) findViewById(R.id.radiogroup1);
     int checkedRadioButton = radioGroup.getCheckedRadioButtonId();
     int a=0;

     switch (checkedRadioButton) {
            case R.id.radiobutton3 : 
                    a = 1;
                    break;
            case R.id.radiobutton4 : 
                    a = 2;
                    break;  
            case R.id.radiobutton5 : 
                    a = 3;
                    break;                        
            }
     return a;
     }

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    DBHelper = new DBAdapter(this);
    PF = new CreateProfile1();

    //MediaPlayer MyMp = MediaPlayer.create(this, R.raw.robo);
    //MyMp.start();
    String fontPath = "fonts/COPRGTB.TTF";

    tv=(TextView)findViewById(R.id.textView1);
    TextView tv1=(TextView)findViewById(R.id.textView2);
    TextView tv2=(TextView)findViewById(R.id.textView3);
    TextView tv3=(TextView)findViewById(R.id.textView8);
    TextView tv4=(TextView)findViewById(R.id.textView4);
    TextView tv5=(TextView)findViewById(R.id.textView5);
    TextView tv6=(TextView)findViewById(R.id.textView6);
    TextView tv8=(TextView)findViewById(R.id.textView9);
    TextView tv9=(TextView)findViewById(R.id.textView10);
    Button button=(Button)findViewById(R.id.btn2);
    //button.setOnClickListener(sav);
    RadioButton r1=(RadioButton)findViewById(R.id.radiobutton3);
    RadioButton r2=(RadioButton)findViewById(R.id.radiobutton4);
    RadioButton r3=(RadioButton)findViewById(R.id.radiobutton5);

    // Loading Font Face
    Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);

    // Applying font
    tv.setTypeface(tf);
    tv1.setTypeface(tf);
    tv2.setTypeface(tf);
    tv3.setTypeface(tf);
    tv4.setTypeface(tf);
    tv5.setTypeface(tf);
    tv6.setTypeface(tf);
    tv8.setTypeface(tf);
    tv9.setTypeface(tf);
    button.setTypeface(tf);
    r1.setTypeface(tf);
    r2.setTypeface(tf);
    r3.setTypeface(tf);
    auto();

    Idno = (EditText)findViewById(R.id.editText1);
    GIDno = (EditText)findViewById(R.id.editTextx);
    Name = (EditText)findViewById(R.id.editText2);
    Owner = (EditText)findViewById(R.id.editText4);
    Breed = (AutoCompleteTextView)findViewById(R.id.autocomplete_breed);
    Date = (EditText)findViewById(R.id.editText3);
    Button Save = (Button)findViewById(R.id.btn2);
    Save.setOnClickListener(onSave);
 //   Button check=(Button)findViewById(R.id.btnx);
 //   check.setOnClickListener(oncheck);

   Button pic=(Button)findViewById(R.id.btn1);
   imgview = (ImageView)this.findViewById(R.id.imageView1);
   pic.setOnClickListener(picc);

      //for datepicker

      mDateDisplay = (EditText) findViewById(R.id.editText3);
      Button pickDate = (Button) findViewById(R.id.btn3);
      pickDate.setOnClickListener(new View.OnClickListener() 
    {
            public void onClick(View v) 
            {
                    showDialog(DATE_DIALOG_ID);
            }
    });
    final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH);
    updateDisplay();
}
  //for date picker
   protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
            return new DatePickerDialog(this,
                    mDateSetListener,
                    mYear, mMonth, mDay);
    }
    return null;
}
protected void onPrepareDialog(int id, Dialog dialog) 
{
    switch (id) 
    {
    case DATE_DIALOG_ID:
            ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
            break;
    }
}    
private void updateDisplay() 
{

      int month=mMonth+1;

      if(month==1)
      {
          mm="Jan";
      }
      else if(month==2)
      {
            mm="Feb";
      }
      else if(month==3)
      {
            mm="Mar";
      }
      else if(month==4)
      {
            mm="Apr";
      }
      else if(month==5)
      {
            mm="May";
      }
      else if(month==6)
      {
            mm="Jun";
      }

      else if(month==7)
      {
            mm="Jul";
      }
      else  if(month==8)
      {
           mm="Aug";
      }
      else  if(month==9)
      {
           mm="Sep";
      }
      else  if(month==10)
      {
           mm="Oct";
      }

      else  if(month==11)
      {
           mm="Nov";
      }

      else  if(month==12)
      {
           mm="Dec";
      }

    mDateDisplay.setText
    (
            new StringBuilder()

            // Month is 0 based so add 1
            .append(mDay).append("-")
           // .append(mMonth + 1).append("-")
            .append(mm).append("-")

            .append(mYear).append(" "));
    }
private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,int dayOfMonth) {
            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            updateDisplay();

    }
};

 //for camera
private View.OnClickListener picc=new View.OnClickListener()
{
    public void onClick(View v)
    {

         openNewGameDialog();   

    }
};

 private void openNewGameDialog() 
 {
             new AlertDialog.Builder(this).setItems(R.array.Menu2,new DialogInterface.OnClickListener() 
             {
             public void onClick(DialogInterface dialoginterface,int i) 
             {
                if(i==0)
                {

                    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);

                    intent.putExtra(MediaStore.EXTRA_OUTPUT,
                    MediaStore.Images.Media.EXTERNAL_CONTENT_URI.toString());
                    // ******** code for crop image
                    intent.putExtra("crop", "true");
                    intent.putExtra("aspectX", 0);
                    intent.putExtra("aspectY", 0);
                    intent.putExtra("outputX", 110);
                    intent.putExtra("outputY", 60);

                    try 
                    {

                    intent.putExtra("return-data", true);
                    startActivityForResult(intent, PICK_FROM_CAMERA);

                    }
                    catch (ActivityNotFoundException e)
                    {
                    // Do nothing for now
                    }

             // Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE); 
             //   startActivityForResult(cameraIntent, CAMERA_REQUEST); 

                //Intent CreateProfile = new Intent(MenuScreen.this,CreateProfile.class);
                //startActivity(CreateProfile);
                }
                else if (i==1)
                {

                        Intent intent = new Intent();
                        // call android default gallery
                        intent.setType("image/*");
                        intent.setAction(Intent.ACTION_GET_CONTENT);
                        // ******** code for crop image
                        intent.putExtra("crop", "true");
                        intent.putExtra("aspectX", 0);
                        intent.putExtra("aspectY", 0);
                        intent.putExtra("outputX", 110);
                        intent.putExtra("outputY", 60);

                        try 
                        {

                        intent.putExtra("return-data", true);
                        startActivityForResult(Intent.createChooser(intent,
                        "Complete action using"), PICK_FROM_GALLERY);

                        } 
                        catch (ActivityNotFoundException e) 
                        {
                        // Do nothing for now
                        }

                //  Intent CheckProfile = new Intent(MenuScreen.this,CreateProfile.class);
                //  startActivity(CheckProfile);

                //  Intent gal = new Intent(
                //          Intent.ACTION_PICK,
                //          android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                //  startActivityForResult(gal, RESULT_LOAD_IMAGE);

                }

            }
            })
            .show();
    }

 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
 {

     if (requestCode == PICK_FROM_CAMERA) 
     {
         Bundle extras = data.getExtras();
         if (extras != null)
            {
             Bitmap photo = extras.getParcelable("data");
             imgview.setImageBitmap(photo);

             ByteArrayOutputStream baos = new ByteArrayOutputStream();  
             photo.compress(Bitmap.CompressFormat.PNG, 100, baos); //photo is the bitmap object   
             b = baos.toByteArray(); 

            }
     }

     if (requestCode == PICK_FROM_GALLERY) 
     {
            Bundle extras2 = data.getExtras();
            if (extras2 != null) 
            {
            Bitmap photo = extras2.getParcelable("data");
            imgview.setImageBitmap(photo);

            ByteArrayOutputStream baos = new ByteArrayOutputStream();  
            photo.compress(Bitmap.CompressFormat.PNG, 100, baos); //photo is the bitmap object   
            b = baos.toByteArray();

            }
     }
 }
private View.OnClickListener onSave=new View.OnClickListener() {
    public void onClick(View v){
        DBHelper.open();
        boolean y =false;
        y = fillData();
        z = radiox();
        br= Breed.getText().toString();
        ow= Owner.getText().toString();
        GID = GIDno.getText().toString();

        boolean k = false;
        boolean r = false; 
        boolean d = false; 
        boolean o=false;
        boolean p=false;
        o=datevalidation();
        if (o){
            Date.setError("Your Horse can't be born in the future");
            p=true;
        }
        else{
            date= Date.getText().toString();
        }
        if (z==0){
            Toast.makeText(getApplicationContext(), "Please select Gender", Toast.LENGTH_LONG).show();
            k=true;
        }
        if(Name.getText().toString().length() < 2 ){
            Name.setError( "Enter Name" );
            r=true;
        }
        else{
            name = Name.getText().toString();
        }
        if(y==true || Idno.getText().toString().length()<1){
            Idno.setError("Enter a Unique ID");
            d=true;
        }
        else{
            ID= Idno.getText().toString();
        }
            if(k==false && r == false && d == false && p ==false){
            DBHelper.insertD(ID, GID, name, ow, br,z,date, b);
            Toast.makeText(getApplicationContext(), "Database Created And Data Saved", Toast.LENGTH_LONG).show();
            Intent profiletwo = new Intent(CreateProfile.this,CreateProfile1.class);
            startActivity(profiletwo);
            DBHelper.close();
            PF.getid(ID);
        }
        else if(k==true || r==true || d ==true || p == true){
            Toast.makeText(getApplicationContext(), "Please check if form Data is entered correctly", Toast.LENGTH_LONG).show();
        }
    }
};

private boolean fillData() {
    Cursor c = DBHelper.fetchAllIDs();
    boolean x = false;
   // List<String> idList = new ArrayList<String>();
    if (c.moveToFirst()) {
        do {
            String X = (c.getString(c.getColumnIndexOrThrow("IDno")));
            String B = null; 
            B = Idno.getText().toString();
            if (B.equals(X)){
                x=true;
            }
        } while (c.moveToNext());

    }
    return x;
}
public boolean datevalidation(){
    boolean m= false;
    Time today = new Time(Time.getCurrentTimezone());
    today.setToNow();
    int a = today.monthDay;
    int b = (today.month+1);
    int c = today.year;

    if (mYear > c){
        m=true;
    }
    if (mYear==c && (mMonth+1)>b){
        m=true;
    }
    if(mYear==c && (mMonth+1) == b && mDay >a){
        m=true;
    }
    return m; 
} 
```

}

我的 CreateProfile1 类是这样的：

```
 public class CreateProfile1 extends Activity {
Context context;
String Identity= null; 
public int VID;
public int DateDay;
public int DateMonth;
int DateYear; 
int hours,minutes; 
public void getid(String ID){
    Identity = ID;
}
public void getVaccination(int VacciID){
    VID = VacciID;
    Toast.makeText(getApplicationContext(), ""+VID, Toast.LENGTH_LONG).show();
}

public void getDate(int mYear, int mMonth, int mDay){
    DateYear = mYear; 
    DateMonth = mMonth;
    DateDay = mDay; 
    Toast.makeText(getApplicationContext(), ""+DateYear+DateMonth+DateDay, Toast.LENGTH_LONG).show();
}
public void getTime(int Hours, int Minutes){
    hours = Hours;
    minutes=Minutes;
    Toast.makeText(getApplicationContext(), ""+hours+minutes, Toast.LENGTH_LONG).show();
}
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile1);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

    String fontPath = "fonts/COPRGTB.TTF";

    TextView tv1=(TextView)findViewById(R.id.textView1);
    TextView tv2=(TextView)findViewById(R.id.textView2);
    TextView tv3=(TextView)findViewById(R.id.textView3);
    TextView tv4=(TextView)findViewById(R.id.textView4);
    TextView tv5=(TextView)findViewById(R.id.textView5);

    Button button1=(Button)findViewById(R.id.button1);
    Button button2=(Button)findViewById(R.id.button2);
    Button button3=(Button)findViewById(R.id.button3);

    button3.setOnClickListener(vaccination);

    Button button4=(Button)findViewById(R.id.button4);
    Button button5=(Button)findViewById(R.id.button5);
    Button button6=(Button)findViewById(R.id.button6);
    Button button7=(Button)findViewById(R.id.button7);

    button1.setOnClickListener(onButton1);
    button2.setOnClickListener(deworming);

    // Loading Font Face
    Typeface tf = Typeface.createFromAsset(getAssets(), fontPath);

    // Applying font

    tv1.setTypeface(tf);
    tv2.setTypeface(tf);
    tv3.setTypeface(tf);
    tv4.setTypeface(tf);
    tv5.setTypeface(tf);

    button1.setTypeface(tf);
    button2.setTypeface(tf);
    button3.setTypeface(tf);
    button4.setTypeface(tf);
    button5.setTypeface(tf);
    button6.setTypeface(tf);
    button7.setTypeface(tf);  
}

private View.OnClickListener onButton1=new View.OnClickListener() {
    public void onClick(View v){
         File pdfFile = new File("/sdcard/" +"BCS.pdf"); 
         if(pdfFile.exists()) {

             Uri path = Uri.fromFile(pdfFile); 
             Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
             pdfIntent.setDataAndType(path, "application/pdf");
             pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
             try{
                 startActivity(pdfIntent);
             }
             catch(ActivityNotFoundException e){
                 Toast.makeText(CreateProfile1.this, "File does not exist", Toast.LENGTH_LONG).show(); 
                 Toast.makeText(getApplicationContext(), ""+VID, Toast.LENGTH_LONG).show();
                 Toast.makeText(getApplicationContext(), ""+Identity, Toast.LENGTH_LONG).show();

             }
         }
    }
};

private View.OnClickListener vaccination=new View.OnClickListener()
{
    public void onClick(View v)
    {

        Intent vaccin = new Intent(CreateProfile1.this,Vaccination.class);
        startActivity(vaccin);

    }
};

private View.OnClickListener deworming=new View.OnClickListener(){
    public void onClick(View v){

        Intent Deworm = new Intent(CreateProfile1.this,DeWorming.class);
        startActivity(Deworm);

    }
}; 
```

日志猫显示：

```
 10-08 14:12:56.603: D/dalvikvm(329): GC_EXTERNAL_ALLOC freed 51K, 53% free     2563K/5379K, external 1625K/2137K, paused 42ms
    10-08 14:12:57.454: E/tag(329): fonts
    10-08 14:12:57.454: E/tag(329): images
    10-08 14:12:57.454: E/tag(329): sounds
    10-08 14:12:57.454: E/tag(329): webkit
    10-08 14:13:02.813: D/dalvikvm(329): GC_EXTERNAL_ALLOC freed 16K, 52% free    2584K/5379K, external 3502K/3903K, paused 41ms
    10-08 14:13:34.544: W/KeyCharacterMap(329): No keyboard for id 0
    10-08 14:13:34.544: W/KeyCharacterMap(329): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    10-08 14:13:44.894: D/AndroidRuntime(329): Shutting down VM
    10-08 14:13:44.894: W/dalvikvm(329): threadid=1: thread exiting with uncaught exception (group=0x40015560)
    10-08 14:13:44.903: E/AndroidRuntime(329): FATAL EXCEPTION: main
    10-08 14:13:44.903: E/AndroidRuntime(329): java.lang.NullPointerException
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.content.ContextWrapper.getApplicationContext(ContextWrapper.java:100)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at com.gallops.CreateProfile1.getid(CreateProfile1.java:24)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at com.gallops.CreateProfile$3.onClick(CreateProfile.java:446)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.view.View.performClick(View.java:2485)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.view.View$PerformClick.run(View.java:9080)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.os.Handler.handleCallback(Handler.java:587)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:92)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:507)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    10-08 14:13:44.903: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method)
    10-08 14:18:45.614: D/dalvikvm(344): GC_EXTERNAL_ALLOC freed 57K, 53% free 2567K/5379K, external 2002K/2137K, paused 41ms 
```

使用后的 Log Cat 显示：

```
 Toast.makeText(CreateProfile1.this, ""+Identity, Toast.LENGTH_LONG).show();

    10-08 14:30:20.313: D/dalvikvm(329): GC_EXTERNAL_ALLOC freed 51K, 53% free 2563K/5379K, external 1625K/2137K, paused 41ms
    10-08 14:30:21.052: E/tag(329): fonts
    10-08 14:30:21.052: E/tag(329): images
    10-08 14:30:21.052: E/tag(329): sounds
    10-08 14:30:21.052: E/tag(329): webkit
    10-08 14:30:24.072: D/dalvikvm(329): GC_EXTERNAL_ALLOC freed 17K, 52% free 2586K/5379K, external 3502K/3903K, paused 34ms
    10-08 14:30:31.993: W/KeyCharacterMap(329): No keyboard for id 0
    10-08 14:30:31.993: W/KeyCharacterMap(329): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
    10-08 14:30:42.053: D/AndroidRuntime(329): Shutting down VM
    10-08 14:30:42.053: W/dalvikvm(329): threadid=1: thread exiting with uncaught exception (group=0x40015560)
   10-08 14:30:42.062: E/AndroidRuntime(329): FATAL EXCEPTION: main
   10-08 14:30:42.062: E/AndroidRuntime(329): java.lang.NullPointerException
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.content.ContextWrapper.getResources(ContextWrapper.java:80)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.widget.Toast.<init>(Toast.java:89)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.widget.Toast.makeText(Toast.java:231)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at com.gallops.CreateProfile1.getid(CreateProfile1.java:26)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at com.gallops.CreateProfile$3.onClick(CreateProfile.java:446)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.view.View.performClick(View.java:2485)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.view.View$PerformClick.run(View.java:9080)
   10-08 14:30:42.062: E/AndroidRuntime(329):   at android.os.Handler.handleCallback(Handler.java:587)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:92)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:3683)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:507)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    10-08 14:30:42.062: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:54:31.540

而不是使用**ApplicationContext**使用您的活动的上下文。将**getApplicationContext** () 替换为您的活动上下文，如下所示，

```
Toast.makeText(ActivityName.this, ""+Identity, Toast.LENGTH_LONG).show(); 
```

要了解这些上下文之间的区别，[请阅读此内容。](https://stackoverflow.com/q/4128589/603744)

# java - 我们有处理批处理的 java 队列对象或机制吗？

> ID：12778260
> 
> 赞同：6
> 
> 时间：2012-10-08T08:51:30.887
> 
> 标签：java, queue

Java 是否支持任何队列对象或机制来处理批处理？

例如：我们有一个队列（或任何想要的队列对象），一些生产者将项目一个一个地推入队列，我的目标是当我们在这个队列中有 10 个项目或超过 10 个项目时，我们可以触发一些处理程序来处理它在一批中。

或者它不是自动触发的，我们需要找到一种方法在处理程序端优雅地循环队列。

我们是否有典型的高性能对象或库来处理这个问题？

谢谢，埃姆雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:17:44.133

Batch processing in Queue could be achievable with wait/notify, something like you would block thread call against the resource upto it is available or not.

```
public class MyQueue implements Queue<Object>{
        public synchronized List<Object> peek() {
        if(this.list.size()>=10)
                  this.list.wait();
        return Collections.subList(0,10);
    }
        @Override
    public boolean add(Object e) {
        this.list.add(e);
                if(this.list.size()>=10)
                  this.list.notifyAll(); 
        return false;
    }
} 
```

*it is not triggered automatically*

In that case you can call wait with specified time out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:29:13.050

您可以使用`BlockingQueue.drainTo()`自动获取要执行的任务的批次。这适用于每秒超过 100K 的任务。

如果您需要更高性能的队列，您可以使用更复杂的[Disruptor](http://lmax-exchange.github.com/disruptor/)或[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)，它们每秒可以排队数百万个任务，两者都支持自动批处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T10:37:20.207

这是批量处理对象的快速尝试，使用后台线程收集和处理由其他线程推送到队列中的对象：

```
public abstract class Batcher<E> implements Runnable {

    public static interface BatchProcessor<E> {
        public void processBatch(List<E> batch);
    }

    private final BlockingQueue<E> queue;
    private final BatchProcessor<E> processor;

    private Batcher(BlockingQueue<E> queue, BatchProcessor<E> processor) {
        this.queue = queue;
        this.processor = processor;
    }

    @Override
    public void run() {
        try {
            while (true) {
                List<E> batch = new ArrayList<E>();
                for (int i = 0; i < 10; i++) {
                    batch.add(queue.take());
                }
                processor.processBatch(batch);
            }
        } catch (InterruptedException e) {
            return;
        }
    }

} 
```

要使用它，您创建一个`BlockingQueue`并在其上放置对象，创建一个实现的实例`BatchProcessor`来处理批次，然后创建一个实例`Batcher`以将对象从前者泵送到后者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:55:36.063

查看 interface 的 API 文档[`java.util.Queue`](http://docs.oracle.com/javase/7/docs/api/java/util/Queue.html)，它有几个实现。

还有一个标准 API，即[Java 消息服务 (JMS)](http://en.wikipedia.org/wiki/Java_Message_Service)，用于处理用于在不同进程之间交换消息的排队系统。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T09:00:58.917

我认为[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)是您需要的，或者可能是[CyclicBarrier](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)。这将允许您设置一个同步点，该点将在发生一定数量的操作后触发消费者，并且您可以使用标准队列作为容器对象。

# javascript - Javascript 正则表达式中的条件

> ID：12778261
> 
> 赞同：1
> 
> 时间：2012-10-08T08:51:32.820
> 
> 标签：javascript, regex

我有一个 JavaScript 正则表达式来验证提交为的 URL

```
var regex = /^(?:https?|ftp)\:\/\/.... 
```

如果我想在后面添加 2（或）3 个斜杠的“file://”协议支持，它就变成了

```
var regex = /^(?:https?|ftp|file)\:\/\/(\/?).... 
```

问题在于，它也在验证“http:///”是否为真。
只有在“文件”协议存在而不编写单独的正则表达式的情况下，有没有办法接受第三个斜杠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:55:41.493

您可能希望将`file:`测试与其他测试分开：

```
/^(?:(?:https?|ftp):\/\/[^/]+|file:\/\/\/?)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:00:40.740

一种可能性是将其置于交替中：

```
var regex = /^(?:https?:|ftp:|file:\/?)\/\/.... 
```

在这种情况下，您还需要在每个交替中添加冒号。

# android - 应用程序未上传到模拟器

> ID：12778262
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:51:39.623
> 
> 标签：android

> **可能重复：**
> [已建立的连接被主机中的软件中止](https://stackoverflow.com/questions/5618664/an-established-connection-was-aborted-by-the-software-in-your-host-machine)

尝试在模拟器中上传时，我在控制台上收到错误消息。

```
[2012-10-08 14:20:22 - ddmlib] An established connection was aborted by the software in your host machine
java.io.IOException: An established connection was aborted by the software in your host machine
    at sun.nio.ch.SocketDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(Unknown Source)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(Unknown Source)
    at sun.nio.ch.IOUtil.write(Unknown Source)
    at sun.nio.ch.SocketChannelImpl.write(Unknown Source)
    at com.android.ddmlib.JdwpPacket.writeAndConsume(JdwpPacket.java:213)
    at com.android.ddmlib.Client.sendAndConsume(Client.java:575)
    at com.android.ddmlib.HandleHeap.sendREAQ(HandleHeap.java:348)
    at com.android.ddmlib.Client.requestAllocationStatus(Client.java:421)
    at com.android.ddmlib.DeviceMonitor.createClient(DeviceMonitor.java:837)
    at com.android.ddmlib.DeviceMonitor.openClient(DeviceMonitor.java:805)
    at com.android.ddmlib.DeviceMonitor.processIncomingJdwpData(DeviceMonitor.java:765)
    at com.android.ddmlib.DeviceMonitor.deviceClientMonitorLoop(DeviceMonitor.java:652)
    at com.android.ddmlib.DeviceMonitor.access$100(DeviceMonitor.java:44)
    at com.android.ddmlib.DeviceMonitor$3.run(DeviceMonitor.java:580) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:05:33.677

您不必重新启动 Eclipse。通常重启 adb-server 就足够了：

*   打开你的 shell / cmd 窗口
*   cd 到您的平台工具目录
*   输入“adb kill-server”
*   输入“亚行启动服务器”
*   当模拟器仍在运行时，您应该使用“adb devices”找到它
*   那么你应该能够通过eclipse正常安装你的应用程序

希望这可以帮助

# java - SWT 表中列的宽度

> ID：12778263
> 
> 赞同：1
> 
> 时间：2012-10-08T08:51:40.980
> 
> 标签：java, swt

我有一个名为**tblMainData**的表，其中有几列，其中几列的宽度为**0**。

**我想将除宽度为0**的列之外的所有数据存储到二维数组中。

如何检查特定列的宽度是否为**0 ？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:54:46.753

只需致电[`TableColumn#getWidth()`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/TableColumn.html#getWidth%28%29)：

```
for(int col = 0; col < tblMainData.getColumnCount(); col++)
{
    if(tblMainData.getColumn(col).getWidth() == 0)
    {
        // do something
    }
} 
```

# c#-4.0 - c# 字符串分隔符

> ID：12778265
> 
> 赞同：0
> 
> 时间：2012-10-08T08:51:54.100
> 
> 标签：c#-4.0

我有这样的字符串值：

```
string strRole = "ab=Admin,ca=system,ou=application,role=branduk|ab=Manager,ca=system,ou=application,role=brankdusa|ab=sale,ca=system,ou=application,role=brandAu"; 
```

我只需要将角色检索到字符串数组。我想知道是否有在 C# 4.0 中拆分字符串的最佳方法

```
string[] arrStrRole = strRole.Split('|').Select .. ?? 
```

基本上，我需要brandUK、brandUsa、brandAu到string[] arrStrRole。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:57:22.353

您可以使用`string[] arrStrRole = strRole.Split('|',',');` ，这将根据 | 和 , 字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:59:57.720

您可以使用这样的扩展程序，这样您就可以轻松地对其进行测试。

```
 public static string[] ParseRolesIntoList(this string csvGiven)
            {
                var list = new List<string>();
                if (csvGiven == null) return null;
                var csv = csvGiven.Split(',');
                foreach (var s in csv)
                {
                    if (string.IsNullOrEmpty(s)) continue;
                    if(!s.StartsWith("role")) continue;
                    var upperBound =  s.IndexOf("|");
                    if (upperBound <= 0) upperBound = s.Length;
                    var role = s.Substring(s.IndexOf("=") + 1, 
                                        upperBound - s.IndexOf("=") - 1);
                    list.Add(role);
                }
                return list.ToArray();
            } 
```

下面的测试在您的示例中发现了 brankdusa 拼写错误。其他一些答案不会处理brandAu，因为它的匹配略有不同。如果您愿意，请尝试对他们进行此测试

```
 [Test]
    public void Should_parse_into_roles()
    {
        //GIVEN 
        const string strRole = "ab=Admin,ca=system,ou=application,role=branduk|ab=Manager,ca=system,ou=application,role=brankdusa|ab=sale,ca=system,ou=application,role=brandAu";

        //WHEN
        var roles = strRole.ParseRolesIntoList();

        //THEN
        Assert.That(roles.Length, Is.EqualTo(3));
        Assert.That(roles[0], Is.EqualTo("branduk"));
        Assert.That(roles[1], Is.EqualTo("brankdusa"));
        Assert.That(roles[2], Is.EqualTo("brandAu"));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:00:04.520

```
string[] arrStrRole = strRole.Split('|').Select(r => r.Split(new []{"role="}, StringSplitOptions.None)[1]).ToArray() 
```

产生一个包含三个字符串的字符串数组：

> 布兰杜克布
> 兰杜萨品牌
> Au

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:00:34.367

您可以`String.Split`在此`LINQ`查询中使用：

```
var roles = from token in strRole.Split('|')
            from part in token.Split(',')
            where part.Split('=')[0] == "role"
            select part.Split('=')[1]; 
```

请注意，这仍然容易出错，并且要求数据始终具有这种格式。我提到它是因为您已经开始使用`Split('|').Select...`. 您还可以使用嵌套循环。

如果你需要它，`String[]`你只需要打电话`ToArray`：

```
String[] result = roles.ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T09:05:23.380

我会选择`Regex`而不是拆分字符串。结合您的预期`Select`解决方案，它可能如下所示：

```
var roles = Regex.Matches(strRole, @"role=(\w+)")
                 .Cast<Match>()
                 .Select(x => x.Groups[1].Value).ToArray(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T09:34:03.597

这给出了 3 个值的数组。

```
void Main()
{
  string strRole = "ab=Admin,ca=system,ou=application,role=branduk|ab=Manager,ca=system,ou=application,role=brankdusa|ab=sale,ca=system,ou=application,role=brandAu";

  var arrStrRole = strRole.Split('|',',')
                     .Where(a => a.Split('=')[0] == "role")
                     .Select(b => b.Split('=')[1]);

  arrStrRole.Dump();
} 
```

# .net - 如何从客户端机器连接到 BDC 服务

> ID：12778270
> 
> 赞同：1
> 
> 时间：2012-10-08T08:52:24.647
> 
> 标签：.net, sharepoint

我想寻求帮助。我需要编写远程连接到 Sharepoint 服务（BDC 服务）并在 BDC 元数据存储中进行任何更新的代码。在 msdn 中，我找到了这个示例：

```
using (SPSite site = new SPSite("http://ssdk-server/Pages/Default.aspx"))
{
    using (new Microsoft.SharePoint.SPServiceContextScope(SPServiceContext.GetContext(site)))
    {
         BdcService service = SPFarm.Local.Services.GetValue<BdcService>(String.Empty);
         IMetadataCatalog catalog = service.GetDatabaseBackedMetadataCatalog(SPServiceContext.Current);

         IEntity entity = catalog.GetEntity("http://ssdk-server/sdksamples", "Customer");
         ILobSystemInstance LobSysteminstance = entity.GetLobSystem().GetLobSystemInstances()[0].Value;

         IView createView = entity.GetCreatorView("Create");
         IFieldValueDictionary valueDictionary = createView.GetDefaultValues();
         valueDictionary["Name"] = "some name";
         Identity id = entity.Create(valueDictionary, LobSysteminstance);
     }
 } 
```

但是，这在第一行抛出异常：

```
FileNotFoundException (The Web application at http://sharepoint/ could not be found. Verify that you have typed the URL correctly. If the URL should be serving existing content, the system administrator may need to add a new request URL mapping to the intended application.). 
```

我发现了同样的麻烦，但提出的解决方案（将项目设置框架更改为 3.5，将平台更改为 x64）对我没有帮助。

谁能告诉我，是否可以远程连接到 BDC 服务并将任何数据加载到元数据存储中，如果可以，我该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:04:30.463

无法以这种方式连接到远程共享点服务器。您应该使用[客户端上下文](http://msdn.microsoft.com/en-us/library/ee536158.aspx)

例如：

```
 string siteUrl = "http://MyServer/sites/MySiteCollection";

    ClientContext clientContext = new ClientContext(siteUrl);
    Web oWebsite = clientContext.Web;
    ListCollection collList = oWebsite.Lists;

    clientContext.Load(collList);

    clientContext.ExecuteQuery();

    foreach (SP.List oList in collList)
    {
        Console.WriteLine("Title: {0} Created: {1}", oList.Title, oList.Created.ToString());
    } 
```

[你可以在这里](http://msdn.microsoft.com/en-us/library/ee537013.aspx)找到更多的例子

# java - java swing setBorder速度问题

> ID：12778275
> 
> 赞同：1
> 
> 时间：2012-10-08T08:52:43.617
> 
> 标签：java, performance, swing, border, jtextpane

我对设置边界的“速度”有疑问。我有一个带有多个 JTextPane 的显示器（大约 450 个，需要什么），它们经常更新（取决于用户输入）。这是设置边框功能：

```
 private void setBorder(int top, int left, int bottom, int right, Color color)
    {
        Args.checkForNull(color);
        this.setBorder(BorderFactory.createMatteBorder(top, left, bottom, right, color));
    } 
```

你能给我一些提示，如何提高边界变化的速度？我的意思是这部分：

```
this.setBorder(BorderFactory.createMatteBorder(top, left, bottom, right, color)); 
```

就像是：

```
tmp = this.getStyledDocument();
        this.setDocument(blank);
        if(onOff){
            tmp.setParagraphAttributes(0, tmp.getLength(), underlinedAttr, false);
        }
        else{
            tmp.setParagraphAttributes(0, tmp.getLength(), notUnderlinedAttr, false);
        }

        this.setDocument(tmp); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:18:02.097

这对我来说运行得很快，所以你的问题不太可能出现在 setBorder() 中。再次更好地衡量，可能的问题是您在单独的事件中更新边框或具有非常复杂的布局。可能是您的显卡（驱动程序）不好，您可以尝试查看运行是否`-Dsun.java2d.d3d=false`更好。

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.Random;
import javax.swing.*;

public class TestBorderSpeed {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                int amount = 22;

                final JPanel panel = new JPanel(new GridLayout(amount, amount));
                for (int row = 0; row < amount; row++) {
                    for (int column = 0; column < amount; column++) {
                        JTextPane pane = new JTextPane();
                        pane.setText("Row " + row + "; Column " + column);
                        panel.add(pane);
                    }
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(panel);
                frame.getContentPane().add(new JButton(
                  new AbstractAction("Change borders") {

                    private final Random random = new Random();
                    private final Color[] colors =
                      { Color.RED, Color.GREEN, Color.BLUE };

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        for (Component component : panel.getComponents()) {
                            ((JComponent) component).setBorder(
                              BorderFactory.createMatteBorder(
                                    random.nextInt(3) + 1, random.nextInt(3) + 1,
                                    random.nextInt(3) + 1, random.nextInt(3) + 1,
                                    colors[random.nextInt(colors.length)]));
                        }
                    }
                }), BorderLayout.PAGE_END);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# php - 单击刷新按钮时避免页面计数

> ID：12778277
> 
> 赞同：-1
> 
> 时间：2012-10-08T08:52:53.473
> 
> 标签：php

我制作了一个 php 脚本来计算查看我网站页面的用户数量。这是我的代码

```
<?php   
    require_once ('test.php');

    $institute_id = 14;

    $q = "INSERT INTO page_views2 ( institute_id, views) VALUES ( $institute_id, 1)
         ON DUPLICATE KEY UPDATE views=views+1"
         ; 
    $r = mysqli_query ($dbc, $q);

?> 
```

我将此添加到我的网页顶部，并且当我打开页面时它可以正常工作（视图增加）。但我的问题是当我刷新页面时，页面浏览量增加 1。第一次打开时没问题。但是当有人刷新页面时，我想避免这种情况。

那么任何机构都可以告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T08:57:43.583

使用会话？

```
require_once ('test.php');

$institute_id = 14;

//if no such session exists, assume that its their first time viewing.
if(!isset($_SESSION[$institute_id.'_v'])){

    //insert
    $q = "INSERT INTO page_views2 ( institute_id, views) VALUES ( $institute_id, 1)
         ON DUPLICATE KEY UPDATE views=views+1"
         ; 
    $r = mysqli_query ($dbc, $q);

    //set session variable saying they've viewed this institutions page.
    $_SESSION[$institute_id.'_v'] = 1;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:11:24.450

您可以尝试使用 2 个变量，一个定义您正在访问的每个页面的名称，一个定义 $_SESSION 变量。在使用查询增加计数器后，您可以将 $_SESSION 设置为您正在查看的页面的名称。每次在进行增量查询之前创建控制变量，如果会话变量与您正在查看的页面同名，则跳过增量操作。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:57:41.257

刷新页面会导致新的页面请求，因此它显然会在服务器端触发您的脚本。没有办法改变这种行为。您可以做的是实施某种检查，如果用户再次请求（刷新）相同的页面。您可以在会话/cookie 中存储一些信息，然后只比较这些值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T08:58:17.057

我猜你可以为此使用 cookie 或会话。制作一个保存最新访问时间戳的会话变量。如果同一页面在一个小时左右内再次加载，则计数器不会增加。

# virtual-machine - 我应该如何让我的虚拟机可以访问我的文件？

> ID：12778279
> 
> 赞同：0
> 
> 时间：2012-10-08T08:53:04.180
> 
> 标签：virtual-machine

我想在我的虚拟机中安装开发工具，但我无法将我的文件共享到我的虚拟机？关于如何做到这一点的任何步骤？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:01:23.163

1.  将你所有的文件复制到一个文件夹中
2.  右键单击该文件夹
3.  选择共享选项卡
4.  勾选共享此文件夹
5.  阿普利，好的
6.  转到你的虚拟机，开始 -> 运行 -> \你的机器 ip -> Enter
7.  将文件夹复制到您的虚拟机中。

# android - 正则表达式如何从 json 中提取数据

> ID：12778280
> 
> 赞同：1
> 
> 时间：2012-10-08T08:53:14.597
> 
> 标签：android, regex, sqlite

我有一个在我的应用程序中使用的 json 数组，我在其他地方需要它，所以我必须保持这种方式。我将它保存在我的数据库中的一个表中，并在需要时对其进行反序列化。但现在我想做一个过滤一些数据的查询。

示例 json

```
[{"name":"SampleName","surname":"SampleSurname"}] 
```

我希望能够做一个只给我“”内的字符串的正则表达式。就像我想要这个名字，它给了我没有引号的“SampleName”我怎么能做到这一点？

编辑！

当我需要使用它时，我已经解析了 JSON。我只是在我的数据列表上实现了一个过滤器，并希望直接从 SQL 过滤查询，而不必反序列化它。

所以我想做的是一个类似于以下内容的查询： `select * from contacts where name like regexp'regexhere'`并只取回与我的搜索匹配的名称。我知道我可以解析 json 并获得更好的结果，我想知道一个“更快”的替代方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:43:57.303

在 java 中，您可以将正则表达式与模式匹配一​​起使用。

```
String result;
String str= "[{"+
      "name"+
      ":"
      +"SampleName"
      +","+
      "surname"+
      ":"+
      "SampleSurname"+
      "}]";
 String regex ="[a-zA-Z]+";//matches only characters from a-z or A-Z
 Matcher matcher = Pattern.compile( regex ).matcher( str);
 while (matcher.find( ))
 {
 result = matcher.group();     
 System.out.println(result);                 
 }
output
name
SampleName
surname
SampleSurname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:12:10.657

你真的应该解析 JSON。如果你不想自己动手，你可以使用像[Jackson这样的库来实现这一点。](http://jackson.codehaus.org/)

如果你这样做，一个正则表达式，如：

```
[^"]+[^"]+ 
```

会让你标记它，所以你可以自己滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:03:17.307

Android 中包含一个 JSON 解析器，它可以让您非常简单地做到这一点。你应该看看[http://developer.android.com/reference/org/json/JSONTokener.html](http://developer.android.com/reference/org/json/JSONTokener.html)

希望这可以帮助！

# ruby-on-rails - 将现有用户帐户永久连接到 Twitter 以自动发送推文

> ID：12778282
> 
> 赞同：1
> 
> 时间：2012-10-08T08:53:17.427
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter, twitter-oauth

我希望能够将现有用户帐户连接到他的 Twitter 帐户。

我想为用户提供连接其 Twitter 帐户的选项。完成一次之后，我希望能够自动向他的帐户发送推文。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:39:11.467

试试这 2 颗宝石

> gem 'omniauth-twitter' 和 gem "twitter" 在 twitter 应用程序网站上注册您的应用程序。进行相应的配置。在控制器中设置配置后，您只需要做。

```
 @twitter = Twitter::Client.new(oauth_token: request.env["omniauth.auth"][:credentials][:token], oauth_token_secret: request.env["omniauth.auth"][:credentials][:secret])
    @twitter.update("Your message")
    flash[:notice] = "Successfully tweeted on your account."
    # redirect_to members_user_earns_path
    render "post" 
```

# apache - Apache [P] 重定向：noDecode % 到 %25

> ID：12778283
> 
> 赞同：1
> 
> 时间：2012-10-08T08:53:21.073
> 
> 标签：apache, mod-rewrite, url-encoding, mod-proxy

我有以下`Rewrite Rule`设置：

```
RewriteRule ^db/(.*)$ http://127.0.0.1:5984/app/$1 [P] 
```

在我的`httpd.conf`文件中，我有：

```
AllowEncodedSlashes NoDecode 
```

我想在哪里提交这样的信息：

```
db/http%3A%2F%2Fgoogle.com%2Fwebfonts 
```

所以 Apache 会将其重定向到

```
http://127.0.0.1:5984/app/http%3A%2F%2Fgoogle.com%2Fwebfonts 
```

这里的问题是apache正在将`%`上面`%25`的url转换为：

```
http://127.0.0.1:5984/app/http%253A%252F%252Fgoogle.com%252Fwebfonts 
```

我怎样才能避免这种情况并准确重定向我发送的内容。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:04:50.937

尝试`NE`在规则中添加一个标志（无编码）：

```
RewriteRule ^db/(.*)$ http://127.0.0.1:5984/app/$1 [P,NE] 
```

# android - 选择字段为空的记录

> ID：12778288
> 
> 赞同：0
> 
> 时间：2012-10-08T08:53:46.487
> 
> 标签：android, sqlite, is-empty

我需要从表中选择一些列，其中某个列（在我的情况下为 pos_report_id）为空，而不是 null。我在 SQLiteDatabaseBrowser 中尝试了这段代码（对于 user_id='23'），它工作正常：

```
"SELECT information_action.target_type, information_action.message_type,"
                + "information_action.start_date, information_action.end_date, information_action.content, information_action.status "
                + "FROM information_action INNER JOIN information_to_user ON "
                + "information_to_user.information_action_id = information_action.id_information_action "
                + "WHERE information_action.pos_report_id ='' AND information_to_user.user_id ='"
                + user_id + "'"; 
```

但在代码中，当我运行应用程序时出现此错误：

```
ERROR   AndroidRuntime  Caused by: android.database.sqlite.SQLiteException: near "": syntax error: , while compiling: SELECT information_action.target_type, information_action.message_type,information_action.start_date, information_action.end_date, information_action.content, information_action.status FROM information_action INNER JOIN information_to_user ON information_to_user.information_action_id = information_action.id_information_action WHERE information_action.pos_report_id ='' AND information_to_user.user_id ='23' 
```

知道如何解决这个问题吗？为什么''不行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:10:55.270

在您的查询中，您同时使用了`WHERE`and`ON`子句。试试这个只是小的改变，而不是在哪里使用 AND：

```
"SELECT information_action.target_type, information_action.message_type,"
                + "information_action.start_date, information_action.end_date, information_action.content, information_action.status "
                + "FROM information_action INNER JOIN information_to_user ON "
                + "information_to_user.information_action_id = information_action.id_information_action "
                + "AND information_action.pos_report_id ='' AND information_to_user.user_id ='"
                + user_id + "'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T08:59:25.330

user_id 是数据库中的 char 字段吗？似乎是一个整数。如果这项权利从 23 中删除 ''。

# javascript - 更换身体后jquery ui datepicker不起作用

> ID：12778291
> 
> 赞同：1
> 
> 时间：2012-10-08T08:54:00.710
> 
> 标签：javascript, jquery, jquery-ui, datepicker

我正在开发一个通过 ajax 更新页面内容的项目。整个身体被替换。

现在我想要（或必须）使用 jquery datepicker。它一直有效，直到页面内容更新。我可以在 dom 中看到，datepicker 使用了一个附加的 div，该 div 被我的正文更新删除了。所以更新后日期选择器不再工作。我认为该插件尝试使用已删除的日历 div，更新后不再可用。

这是我的例子：

```
$(document).ready(function() {
    $('body').html('<input type="text" />');
    $('input').datepicker();
    $('body').html('<input type="text" />');
    $('input').datepicker();
});​ 
```

jsfiddle：http: [//jsfiddle.net/ZUwu9/](http://jsfiddle.net/ZUwu9/)

有什么想法可以在更换页面正文后让日期选择器恢复工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:42:02.003

如果您将内容放入 a `div`，而不是`body`，它将起作用

[http://jsfiddle.net/ZUwu9/1/](http://jsfiddle.net/ZUwu9/1/)

所以只需在 body 中放置一个 div，并将所有操作应用于此开发

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T08:59:57.670

将其附加到委托的事件处理程序。

```
$('body').on('focus', 'input', function(){
   $(this).datepicker();
}); 
```

# grails - Access individual elements in a list

> ID：12778292
> 
> 赞同：0
> 
> 时间：2012-10-08T08:54:04.100
> 
> 标签：grails

I have a list of, let's say, persons. Every person has a field that is "friend", that could be "yes" or "no". Their "friendship" status is presented in a column in the list:

```
<g:if test="${person.friend.status=='no' }">
<td><g:textField name="status" value="${person.friend.status}" readonly="readonly" style="width:60px;border:0px; background:transparent;color:black"/></td>

        <td style="width:20px">
<g:actionSubmitImage action="acceptFriend" value="aceptar"  src="${resource(dir: 'images', file: '/skin/tick_16.png')}" style="width:5px;height:8px;"/>
       </td>
       <td>
        <g:actionSubmitImage action="refuseFriend" value="aceptar"  src="${resource(dir: 'images', file: '/skin/wrong_16.png')}" style="width:5px;height:8px;"/>    
        </td>       
        </g:if> 
```

As you can see, when the friend status is "no", two buttons are presented, one to say "that person is my friend" and another one to say "this person is not my friend". My question is:

When i click on the image that says "this person is my friend", I call the action "acceptFriend". But, how to access to the indivivual person instance, to change his status to "yes", and persist in the database? I think it may be with the "params" variable, but how to store it in the params to be accessed in the Controller?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:01:45.690

I believe, you cannot use the g:actionSubmitImage like this, because in the tag's documentation is written:

*You cannot use multiple actionSubmitImage tags within the same form and have it work in Internet Explorer 6 or 7 unless you add some custom JavaScript. See this page for a bit more information and a workaround*.

The correct solution would be to have a form per friend in list and then you can easily pass the ID of the domain class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:51:52.363

The `actionSubmitImage` creates a submit button in some form.

Create the form for each `person` in the list you're iterating.

In that form, add a hidden field named "id" with a value="${person.id}", and in `acceptFriend` action read it from `params.id`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:25:31.290

```
<a href="${createLink(action: 'refuseFriend', id: person.id)}"><img src="${resource(dir: 'images', file: '/skin/wrong_16.png')}" style="width:5px;height:8px;" /></a> 
```

This is not tested code, just to give you the idea.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T07:33:07.990

By request of Tom Metz, i post the snippet with both g:actionSubmitImage tags working:

```
<form>
        <g:hiddenField name="contrato" value="${factura.id}"/>
<td>    <g:link title="${message(code :'contratosVer.tooltip')}" controller="campaign" action="show" id="${factura.id}" style="width:160px"> <g:img dir="images" file="/skin/eye_16.png"/></g:link> </td>

        <td><g:textField name="campaign" value="${factura.nombre}" readonly="readonly" style="width:120px;border:0px; background:transparent;color:black"/></td>

        <td><g:textField name="total" value="${factura.presupuestosPendientes.total}" readonly="readonly" style="width:40px;border:0px; background:transparent;color:black"/></td>
            <g:if test="${factura.estado=='Espera'}">

                        <td><g:textField name="estado" value="${factura.estado}" readonly="readonly" style="width:60px;border:0px; background:transparent;color:black"/></td>

        <td style="width:20px">
        <g:actionSubmitImage action="aceptarCamp" value="aceptar"  src="${resource(dir: 'images', file: '/skin/tick_16.png')}" style="width:5px;height:8px;"/>
       </td>
       <td>
        <g:actionSubmitImage action="rechazarCamp" value="aceptar"  src="${resource(dir: 'images', file: '/skin/wrong_16.png')}" style="width:5px;height:8px;"/>    
        </td>       
        </g:if>
            <g:else>

                        <td><g:textField name="estado" value="${factura.estado}" readonly="readonly" style="width:65px;border:0px; background:transparent;color:black"/></td>

                        <td></td><td></td>
            </g:else>
        <g:set var="desc" value="${result.toString()}" />
        <g:if test="${desc.size() > 120}"><g:set var="desc" value="${desc[0..120] + '...'}" /></g:if>
                        </form> 
```

Sorry for the delay, mate, but I was away from work for three days.

# android - geocoder.getFromLocation 返回 null

> ID：12778295
> 
> 赞同：2
> 
> 时间：2012-10-08T08:54:15.643
> 
> 标签：android, location, android-location, google-geocoder

我的代码：

```
 try
                {

                            Geocoder geocoder;
                        List<Address> addresses;

            geocoder = new Geocoder(LocationActivity.this, Locale.getDefault());

            addresses = geocoder.getFromLocation(longitude,latitude,1);

            Toast.makeText(LocationActivity.this, addresses.size() + "", Toast.LENGTH_LONG).show();

            String address = addresses.get(0).getAddressLine(0);
            String city = addresses.get(0).getAddressLine(0);
            String country = addresses.get(0).getAddressLine(0);

            Toast.makeText(LocationActivity.this, address + "  " + city + " " + country, Toast.LENGTH_LONG).show();

        }
        catch(Exception e)
        {
            Toast.makeText(LocationActivity.this,e.toString(), Toast.LENGTH_LONG).show();
        } 
```

这是我从经度和纬度获取地址的代码。但每次addresses.size返回0

谁能帮我这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-10-13T11:24:08.567

我找到了解决方案...等一下`Ctrl`，`getFromLocation()`然后转到`Geocoder.class`。然后为您的 android API 下载源代码并重新启动您的项目。然后你会看到它的工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T05:20:32.517

如果平台中没有后端服务，Geocoder 查询方法将返回一个空列表。

参考 - [http://developer.android.com/reference/android/location/Geocoder.html](http://developer.android.com/reference/android/location/Geocoder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:03:02.177

如果您使用的是模拟器，请转到 DDMS，您会找到模拟器控制并在其中提供您的有效纬度 lng，然后按发送.. 并且 Batter 确保在清单中提及 Internet 权限...

```
 try {
        Geocoder geocoder;
        List<Address> addresses;

        geocoder = new Geocoder(this, Locale.getDefault());

        double longitude = 23.00000;
        double latitude = 72.00000;
        addresses = geocoder.getFromLocation(longitude, latitude, 1);

        Toast.makeText(this, addresses.size() + "", Toast.LENGTH_LONG)
                .show();

        String address = addresses.get(0).getAddressLine(0);
        String city = addresses.get(0).getAddressLine(1);
        String country = addresses.get(0).getAddressLine(2);

        if(address==null)
        address="";
        if(city==null)
            city="";
        if(country==null)
            country="";

        Toast.makeText(this, address + "  " + city + " " + country,
                Toast.LENGTH_LONG).show();

    } catch (Exception e) {
        Toast.makeText(this, e.toString(), Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:45:15.383

我不确定这是否会有所帮助，但我认为你得到了一个 IOException。看看 LogCat。也看到[这个](http://developer.android.com/reference/android/location/Geocoder.html#getFromLocation%28double,%20double,%20int%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-28T09:52:13.673

在 try 循环中使用条件 address.size() > 0 修复它。

我并没有真正发现真正的问题在哪里，但似乎循环发生了两次，一次太早了，因为我可以让循环发生两次，一个空结果和一个好结果。

也许来自我作为通过意图传递的两个地图和日期。但为我固定

# c++ - 参数化 sc_lv 时报告错误（表达式必须具有常量值）

> ID：12778296
> 
> 赞同：1
> 
> 时间：2012-10-08T08:54:20.090
> 
> 标签：c++, gcc, systemc

我正在使用 System C。在课堂上

首先我声明了一个整数：

```
int G_WIDTH; 
```

然后我在使用 G_WIDTH ：

```
sc_in < sc_lv <G_WIDTH> > a; 
```

当我试图模拟它时。报以下错误：

> 表达式 <*sc_in < sc_lv > a;*> 必须有一个常数值。

当我使用：

```
sc_in < sc_lv <8> > a; 
```

它工作正常。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:07:09.863

因为`G_WIDTH`不是常数。如果你`G_WIDTH`保持不变，它应该可以工作：

```
const int G_WIDTH = 8; 
```

# tcp - ZeroMQ 客户端断开连接

> ID：12778299
> 
> 赞同：6
> 
> 时间：2012-10-08T08:54:35.643
> 
> 标签：tcp, zeromq

我有一个客户端（PULL）连接到服务器（PUSH）。起初他们工作得很好。但后来连接断开，客户端 ZeroMQ 不会尝试重新连接到服务器。

一件神秘的事情是，如果我`netstat`在客户端和服务器端都这样做，客户端显示连接仍然​​是 ESTABLISHED，而服务器端没有相应的条目。我想这就是客户端不重新连接的原因。

PS：客户端和服务器在不同的IDC，它们之间有带宽限制。但是当断开连接发生时，我们的监视器显示它没有达到频带限制。

而且，当我在服务器端进行 netstat 时（连接正常时），有时 Send-Q 列很大，然后下降到 0。

这就是我掌握的所有信息。如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-07-14T18:19:11.183

我意识到这是一个非常古老的问题，但我遇到了几乎完全相同的问题，并在尝试寻找解决方案时发现了这个问题。我相信我已经解决了我的问题，所以希望这可以在某个时候帮助某人。

我有相同的情况，但使用. 一开始一切都很好，但在不发送任何消息约 15 分钟后，消息将不再发送。然后我发现：[http](http://api.zeromq.org/3-2:zmq-setsockopt) ://api.zeromq.org/3-2:zmq-setsockopt 。对我有用的三个套接字选项是（使用 pyzmq ）：**`ROUTER`** `->` **`ROUTER`**

```
# self.client is my socket here
self.client.setsockopt(zmq.TCP_KEEPALIVE, 1)
self.client.setsockopt(zmq.TCP_KEEPALIVE_IDLE, 300)
self.client.setsockopt(zmq.TCP_KEEPALIVE_INTVL, 300) 
```

这些会覆盖操作系统设置，我不再看到连接超时或断开。

# wordpress - Wordpress 自定义查询缺少两个帖子

> ID：12778304
> 
> 赞同：0
> 
> 时间：2012-10-08T08:54:53.180
> 
> 标签：wordpress, pagination

我正在运行一个自定义查询，但是当返回posts_per_page 时，它​​总是落后两个。我正在使用一种称为事件的自定义帖子类型，即拉入代码以显示函数文件中的帖子。我也想实现分页（也不工作），这会是一个问题吗？

我运行了 var dump，它返回查询中的所有内容，包括当前日期之前的帖子。我想是因为它在 if 语句之前转储了？有任何想法吗？

有任何想法吗？

```
<?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    //Current exhibitions
    $args = array(
           'post_type' => 'exhibitions',
           'orderby'   => 'exhibition_start_date',
           'meta_key'  => 'exhibition_start_date',
           'order'     => 'ASC',
           'posts_per_page' => 6,
           'paged' => $paged
       );

        $my_query = new WP_Query( $args );

      while ( $my_query->have_posts() ) : $my_query->the_post();
           $exhibition_start_date = get_post_meta($post->ID, 'exhibition_start_date', true);
           //Current

           if ($exhibition_start_date >= date('Y-m-d') ) {
               get_exhibition_container();
           }

        endwhile;

   wp_reset_postdata();
?> 
```

新代码：（我还在我的初始循环中添加了页面内容，认为它可能会干扰？）

```
<div role="main" class="clearfix">  
    <div class="one-column">
    <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
    <h2><?php the_title(); ?></h2>
    <?php the_content(); ?>
    <?php endwhile; else: ?>
     <?php endif; ?>

<?php
    $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
    //Current exhibitions
    $args = array(
           'post_type' => 'exhibitions',
           'meta_query' => array(
           array (
                    'key' => 'exhibition_start_date',
                    'value' => date('Y-m-d'),
                    'compare' => '>='
                 )
            ),
           'orderby'   => 'exhibition_start_date',
           'meta_key'  => 'exhibition_start_date',
           'order'     => 'ASC',
           'posts_per_page' => 10,
           'paged' => $paged
       );

        $my_query = new WP_Query( $args );

      while ( $my_query->have_posts() ) : $my_query->the_post();
           $exhibition_start_date = get_post_meta($post->ID, 'exhibition_start_date', true);
           //Current
            get_exhibition_container();

        endwhile;

   wp_reset_postdata();
?>

<div class="previous-holder">
<?php previous_posts_link(); ?>
</div>
<div class="next-holder">
<?php next_posts_link(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:07:40.170

而不是在循环中使用`if`条件，您应该使用`meta_query`param ：

```
$args = array(
    'post_type' => 'exhibitions',

    'meta_query' => array(
        array(
            'key' => 'exhibition_start_date',
            'value' => date('Y-m-d'),
            'compare' => '>='
        )
    ),

    'orderby'   => 'exhibition_start_date',
    'meta_key'  => 'exhibition_start_date',
    'order'     => 'ASC',

    'posts_per_page' => 6,
    'paged' => $paged
); 
```

**编辑**：关于分页

[`previous_posts_link`法典](http://codex.wordpress.org/Function_Reference/previous_posts_link)：

> **打印指向当前**查询中上一组帖子的链接。

您应该尝试使用`previous_posts_link()`and `next_posts_link()`before`wp_reset_postdata()`

# c# - 如何为 Windows 手机的应用程序设置像画廊这样的图像瓷砖？

> ID：12778308
> 
> 赞同：1
> 
> 时间：2012-10-08T08:55:10.107
> 
> 标签：c#, .net, xaml, windows-phone-7.1

我需要像画廊一样在图块上随机显示联系人图像，类似于 windows mobile 中的“人物”图块。. . 任何人都可以建议我如何做到这一点。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:46:50.200

那就是所谓的马赛克瓷砖。如果你需要这个你应该使用[Telerik Controls](http://www.telerik.com/help/windows-phone/radhubtile-features-mosaictile.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T09:44:19.943

在获得 Telerik 控件的许可证之前，请查看 Coding4Fun 工具包中的 ImageTile 控件。

它正是这样做的。

[http://coding4fun.codeplex.com](http://coding4fun.codeplex.com)或从 nuget 获取

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:17:52.700

要动态创建图像`WritableBitmap`，请先查看图像。

# extjs4 - ExtJS 4 CellEditing 插件和应用按钮

> ID：12778309
> 
> 赞同：0
> 
> 时间：2012-10-08T08:55:16.177
> 
> 标签：extjs4

我有一个带有 CellEditing 插件的网格。

```
Ext.define('SCR.view.UserDevice', {

    extend:'Ext.grid.Panel',
    id:'userDevice',
    alias:'widget.userdevice',
    title:"Devices",
    store:'UserDevices',
    sortableColumns:false,
    enableColumnHide:false,
    columns:[
        {
            header:'Device',
            width:200,
            dataIndex:'type'
        },
        {
            header:'Nickname',
            dataIndex:'name',
            width:300,
            editor: {
                xtype: 'textfield',
                allowBlank: false
            }
        },
        {
            header:'Registration Date',
            dataIndex:'registrationDate'
        }
    ],

    plugins: [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],

    initComponent:function () {
        var me = this;
        me.callParent(arguments);
    }
}); 
```

单击“名称”单元格后会显示编辑器。是否可以在输入字段后添加应用按钮？

# jsf-2 - 无法摆脱网址中的 #.{jsessionid}

> ID：12778311
> 
> 赞同：0
> 
> 时间：2012-10-08T08:55:19.103
> 
> 标签：jsf-2, servlet-3.0, jsessionid, prettyfaces, jetty-8

到目前为止，我尝试了两种方法：
-1。添加到 web.xml：

```
<session-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

-2。使用漂亮的面孔，添加到 pretty-config.xml：

```
<rewrite match="(?i)^(.*)#\.\w+(.*)" substitute="$1$2" redirect="301"/> 
```

-3。码头专用。添加到 web.xml：

```
<context-param>
    <param-name>org.eclipse.jetty.servlet.SessionIdPathParameterName</param-name>
    <param-value>none</param-value>
</context-param> 
```

没有什么帮助。我也无法理解，“#.{jsessionid}”和“jsessionid={jsessionid}”格式之间有什么区别（其中 {jsessionid} 是一些看起来像哈希的字符串）？

编辑1：
它看起来像片段ID。他在我所有的网址上做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:05:45.003

除了 alehro 所说的之外，通过从 URL 和其他此类自定义任务中删除会话 ID，[Rewrite](https://www.ocpsoft.org/rewrite/)可能更适合您尝试执行的操作。该配置更具声明性和功能性，但也更加冗长。

以下是使用 //Rewrite 执行相同操作的方法。

```
@Override
public Configuration getConfiguration(final ServletContext context)
{
   return ConfigurationBuilder.begin()
      .addRule()
        .when(Direction.isInbound()
          .and(URL.matches("{p}{sessionID}{s}")))
        .perform(Redirect.temporary("{p}{s}"))
        .where("sessionID").matches("#\\.\\w+");
} 
```

URL 参数默认匹配`.*`，因此前缀和后缀 (p) 和 (s) 不需要额外配置。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T10:39:59.050

这个哈希不是 jsessionid。它由 addthis 跟踪附加。要禁用它，请使用：

```
<script type="text/javascript">
var addthis_config = {
"data_track_addressbar" : false
};
</script> 
```

我不知道，也许最好删除这个问题，因为它有点愚蠢。

# nhibernate - 使用 Nhibernate 一次插入两个相关表

> ID：12778317
> 
> 赞同：0
> 
> 时间：2012-10-08T08:55:28.543
> 
> 标签：nhibernate

我有两个实体

```
 public class Person
        {
            public int PersonId { get; set; }
            public string Name { get; set; }
            public int DataId { get; set; }
    }
     public class Data
        {
                public int DataId { get; set; }
        public string details { get; set; }
        public int PersnId{ get; set; }
} 
```

如您所见，两个表都相互关联。我想要一个解决方案来一次在两个表中插入数据。我 1-插入人员，2-插入数据，然后更新人员并且它有效，但我正在寻找消除更新的方法。我的人表映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="TestNhibrinate" assembly="TestNhibrinate">
    <class name="TestNhibrinate.Entites.Person" table="Person" lazy="false">
        <id name="PersonId" column="PersonId" type="int" >
            <generator class="identity" />
        </id>
        <property name="Name" column="Name" type="String" length="50" />
        <many-to-one name="Adress" class="TestNhibrinate.Entites.Adress" column="AdressId"/>        
    </class>
</hibernate-mapping> 
```

和相同的数据映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:00:40.080

您的实体应如下所示：

```
 public class Person
            {
             public Person()
             {
                DataCollection = new List<Data>();
             }
                public int PersonId { get; set; }
                public string Name { get; set; }
                public int DataId { get; set; }
                public IList<Data> DataCollection{get;set;}

                public void AddData(Data item)
                {
                   if(!DataCollection.Contains(item))
                   {
                      DataCollection.Add(item);
                   }
                }
        }
         public class Data
            {
                    public int DataId { get; set; }
            public string details { get; set; }
            public Person Person{ get; set; }
    } 
```

通过这种方式，您可以创建从人员到数据的一对多关系。如果您在添加一些数据后保存您的人员实体，则数据也将被持久化。这取决于您的级联选项。

我不确定如何使用 XML 映射来映射它，因为我总是使用 Fluent 或 Auto 映射。

# c - 如何从字节数组中获取数据

> ID：12778318
> 
> 赞同：0
> 
> 时间：2012-10-08T08:55:29.467
> 
> 标签：c, parsing, struct, client-server, bytearray

**关于任务的一般信息：**

我需要用**C 语言**编写函数，它需要一个字节数组（它代表包）解析它，做一些事情并返回一个改变的字节数组。

**我的做法：**

```
"filename.h"
    char* ParsePackage(const char* byteArray);
typedef struct
{
    char name[4];
    float value;
} packageStructure; 
```

我使用 byteArray 被转换到的结构 packageStructure，然后我试图通过访问该结构的字段来获取数据：“filename.cpp”

```
include "filename.cpp"
char* ParsePackage(const char* byteArray)
{
    packageStructure* tmp = (packageStructure*) byteArray;
    // get values of structure fields and do some staff with them:
    tmp->name;
    tmp->value;
    return (char*)modifiedByteArray;
} 
```

我**对结果不满意**，因为字节数组中的整个数据被写入结构的第一个字段，这是一个名称，第二个字段是一些随机值；

**所以预期的问题是：**我做错了（如何改变我的方法以使其发挥作用）？你能提供其他解析字节数组的方法吗？

**提前致谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:11:10.050

我猜这`"tex"`应该是名称并且`123`应该是值。但是，正如您所看到的那样，它不起作用，尤其是对于浮点值。您不能仅通过强制转换将字符串中的数字转换为浮点值。

相反，您必须从字符串中提取前三个字符并放入`name`，然后您必须提取接下来的三个字符并作为字符串使用，例如[`strtof`](http://en.cppreference.com/w/c/string/byte/strtof)将字符串转换为浮点数。

再次创建字符串时，您可以使用[`snprintf`](http://en.cppreference.com/w/c/io/fprintf)它。

你必须做这样的事情：

```
char* ParsePackage(char* byteArray)
{
    packageStructure tmp;

    /* Extract values from string, first the name */
    memcpy(tmp.name, byteArray, sizeof(tmp.name) - 1);
    tmp.name[sizeof(tmp.name) - 1] = '\0';  /* Make sure it's terminated */

    /* Then the value */
    tmp.value = strtof(&byteArray[3], NULL);

    /* Now do whatever you need to do with the structure... */

    /* Convert back to a string */
    /* For that we need a string */
    static char output[16];

    /* Then put the data from the structure into the string */
    snprintf(output, sizeof(output), "%s%3.0f", tmp.name, tmp.value);

    /* Return the string */
    return output;
} 
```

但是，与其自己做这项工作，不如找一个[序列化](http://en.wikipedia.org/wiki/Serialization)库，它将为您处理所有血腥的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:21:41.677

我不确定您到底想要什么，但是当输入是字符串时，您似乎想将名称用作字符串，将值用作浮点数。

我会这样做：

```
packageStructure ParsePackage(char* byteArray)
{
    char *modifiedByteArray = malloc(100);
    packageStructure tmp;
    strncpy( tmp.name, byteArray, 3 );
    tmp.name[3] = 0;
    tmp.value = atof(byteArray+4);
    return tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:17:04.333

```
int main(void) { ParsePackage("tex123"); return 0; } 
```

根据代码，您的文本`"tex123"`是只读的。

```
.LFE0:
        .size   ParsePackage, .-ParsePackage
        .section        .rodata
.LC0:
        .string "tex123"
        .text
        .globl  main
        .type   main, @function
main:
.LFB1:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, 
        ....
        .... 
```

所以试图改变这`string literal`是一个坏主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:22:24.230

在我的实验中，我发现**可以将字节数组转换为 struct**。这允许以更优雅（我自己的观点）的方式解决反序列化任务。

我的第一次尝试失败了，因为我在错误的输入（字符串文字）上测试了它们。这是工作示例：

```
".h"
typedef struct Test
    {
        char name[2] ;
        float number;
    } Test;

".c"
char* TestStruct(char* byteArray)
{
    Test str;

    str = *(Test*)byteArray;
    return byteArray;
}
"main.c"
int main(void)
{
    Test str;
    strcpy(str.name,"asd\0");
    str.number = 0.25;
    TestStruct((char*)&str);
    return 0;
} 
```

# php - 如何在 Yii 框架中验证电子邮件和电子邮件是否已存在或不检查？

> ID：12778326
> 
> 赞同：16
> 
> 时间：2012-10-08T08:55:56.183
> 
> 标签：php, yii, model, yii-extensions, yii-components

如何使用 Yii 模型验证规则功能代码验证电子邮件。还有如何使用 Yii 中的模型验证规则功能检查电子邮件是否存在。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T09:01:56.983

您可以如下设置模型验证

```
public function rules()
{
    // NOTE: you should only define rules for those attributes that
    // will receive user inputs.
    return array(
            //First parameter is your field name of table which has email value
        array('email', 'email','message'=>"The email isn't correct"),
        array('email', 'unique','message'=>'Email already exists!'),            
    );
} 
```

Yii 参考链接了解更多详情：[http ://www.yiiframework.com/wiki/56/](http://www.yiiframework.com/wiki/56/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T09:52:32.713

您可以创建自定义验证方法来满足您的要求。

在模型类中创建一个函数：

```
public function uniqueEmail($attribute, $params)
{
     // Set $emailExist variable true or false by using your custom query on checking in database table if email exist or not.
    // You can user $this->{$attribute} to get attribute value.

     $emailExist = true;

     if($emailExist)
    $this->addError('email','Email already exists');
} 
```

在规则中使用此验证方法：

```
array('email', 'uniqueEmail','message'=>'Email already exists!'), 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-30T07:45:42.337

对于 Yii2，我在一个名为 Register 的模型中使用了以下内容，该模型将使用 User Class。

```
public function rules()
{
    return [

        ['Email', 'filter', 'filter' => 'trim'],
        ['Email', 'required'],
        ['Email', 'email'],
        ['Email', 'unique', 'targetClass' => '\common\models\User', 'message' => 'This email address has already been taken.'],

    ];
} 
```

您需要使用 targetClass 并为 Class User 放置 Namepsace

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-17T11:23:16.950

自定义验证，简短而甜蜜的代码。试试这个，它工作正常 -

```
public function rules(){   
        return array(
            array('email, first_name, last_name, password, repeat_password', 'required'),
            array('email', 'email','message'=>"The email isn't correct"),
            array('email', 'uniqueEmail'),
        );  
    } 
```

在同一模型中编写此自定义函数 -

```
public function uniqueEmail($attribute, $params){
        if($user = User::model()->exists('email=:email',array('email'=>$this->email)))
          $this->addError($attribute, 'Email already exists!');
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-11-04T07:47:54.477

通过定义规则，您可以轻松地找到您的数据库中已经存在或不存在的电子邮件。

这是规则。

```
array('xxx', 'unique', 'className' => 'SomeClass', 'attributeName' => 'SomeAttribute'), 
```

例子。

```
public function rules() {
   return array(
     ...
     array('email', 'unique', 'className' => 'User', 'attributeName' => 'email', 'message'=>'This Email is already in use'),
     ...
); 
} 
```

在这里，我想对唯一的电子邮件进行验证，我的模型类名称是 User，attributeName 是表的字段名称，即电子邮件，如果电子邮件已经存在于您的表中，则显示消息。

如果它给出错误，那么您可以更改您的表格并使电子邮件字段独一无二。

ALTER TABLE 用户添加唯一（电子邮件）

然后检查。

其他电子邮件验证如下。我认为这是一套完整的电子邮件验证。

```
public function rules() {
   return array(
     ...
     array('email', 'required'), 
     array('email', 'length', 'max'=>200),
     array('email', 'email', 'message'=>'Email is not valid'),
     array('email', 'unique', 'className' => 'User', 'attributeName' => 'email', 'message'=>'This Email is already in use'),
     ...
); } 
```

而已。谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-18T12:30:17.940

遵循以下几个修改： 根据您使用的模块跟踪您的文件。

> 转到模型 -> 打开-> Users.php -> 修改行，如下所述。

```
 public function rules()
    {
        return [
                [['User_Email'], 'unique'],
                [['User_Mobile'],'unique'],
              ];
     } 
```

> 现在转到视图->用户->打开_form.php->编写如下所述的代码

```
<div class="users-form">

    <?php $form = ActiveForm::begin([
            'id' => $model->formName(),
            'enableAjaxValidation' => true,
        ]); ?>

 <?= $form->field($model, 'User_Email')->textInput(['maxlength' => true])?>
 <?= $form->field($model, 'User_Mobile')->textInput(['maxlength' => true])?>
    <div class="form-group">
            <?= Html::submitButton($model->isNewRecord ? 'Create' : 'Update',  ['class' => $model->isNewRecord ? 'btn btn-success' : 'btn btn-primary']) ?>
        </div>

        <?php ActiveForm::end(); ?>

    </div> 
```

> 现在转到Controller->打开UsersController.php->编写代码，如下所述

```
public function actionCreate()
    {
       if(Yii::$app->request->isAjax && $model->load(Yii::$app->request->post())){
            Yii :: $app->response->format = 'json';
            return \yii\bootstrap\ActiveForm::validate($model);
            }
} 
```

谢谢

# mysql - 从 3 个表中提取 MySQL 数据 - 连接和最大值

> ID：12778329
> 
> 赞同：2
> 
> 时间：2012-10-08T08:56:08.513
> 
> 标签：mysql, sql

我有三个 mysql 表，我想从中提取一些信息，这些表是：

*   视频 - 表示带有分数的视频。
*   标签 - 包含标签的全局列表。
*   VideoTags 创建视频和标签之间的关联。

我想要做的是找到每个标签的最高分的视频。有许多具有相同标签的视频，但我的结果集将具有与标签相同的行数。最终目标是为每个唯一标签（标签是带有哈希前缀的主题）列出最佳视频（按点）。

我的 SQL noob 尝试实现这一点如下：

```
 SELECT video.id AS video_id, video.owner_id, MAX(video.points), tag.id AS tag_id
    FROM Videos video, VideoTags videotag, Tags tag
   WHERE video.id = videotag.video_id
     AND videotag.tag_id = tag.id
     AND tag.content LIKE '#%'
GROUP BY tag.id 
```

这是架构和示例数据：

```
DROP TABLE IF EXISTS `Video`;
CREATE TABLE `Video` (
  `id` varchar(24) NOT NULL default '',
  `owner_id` varchar(24) NOT NULL default '',
  `points` DOUBLE NOT NULL default 0
);

DROP TABLE IF EXISTS `Tags`;
CREATE TABLE `Tags` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `content` varchar(32) NOT NULL default ''
PRIMARY KEY (id)
);

DROP TABLE IF EXISTS `VideoTags`;
CREATE TABLE `VideoTags` (
  `video_id` varchar(24) NOT NULL default '',
  `tag_id` int(11) NOT NULL
);

INSERT INTO Videos (id,owner_id,points) VALUES ('owner-x-video-a','owner-x', 20);
INSERT INTO Videos (id,owner_id,points) VALUES ('owner-x-video-b','owner-x', 15);
INSERT INTO Videos (id,owner_id,points) VALUES ('owner-y-video-k','owner-y', 12);
INSERT INTO Videos (id,owner_id,points) VALUES ('owner-y-video-l','owner-y', 17);
INSERT INTO Videos (id,owner_id,points) VALUES ('owner-y-video-m','owner-y', 44);

INSERT INTO Tags (id, content) VALUES (111, '#topic-1');
INSERT INTO Tags (id, content) VALUES (222, '#topic-2');

INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-x-video-a',111);
INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-x-video-b',111);
INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-y-video-k',111);
INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-y-video-l',222);
INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-y-video-m',222); 
```

我期望看到的是：

```
video_id          owner_id    MAX(video.points)  tag_id
owner-x-video-a   owner-x     20                 111
owner-y-video-m   owner-y     44                 222 
```

但我得到的是：

```
video_id          owner_id    MAX(video.points)  tag_id
owner-x-video-a   owner-x     20                 111
owner-y-video-l   owner-y     44                 222 
```

不幸的是，第二行的 video_id 不是我所期望的，因为 owner-y-video-l 没有 44 分，而是有 17 分，因此不会是 id 为 222 的标签的得分最高的视频。

那里有任何可以帮助我的 SQL Universe 大师吗？太感谢了 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:14:52.273

你想要[分组最大值](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)：

```
SELECT * FROM Video JOIN (

  SELECT   VideoTags.tag_id, MAX(points) points
  FROM     Video JOIN VideoTags ON Video.id = VideoTags.video_id
  GROUP BY VideoTags.tag_id

) t USING (points) JOIN Tags ON t.tag_id = Tags.id 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/119a7/1/0)上查看。

请注意，此查询返回每个标签内具有最大点数的*所有*视频，因此对于已绑定的标签将返回多个记录。如果您希望在这种情况下只返回一个记录，请指定如何确定应该返回的视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:24:33.640

```
In your query 

SELECT video.id AS video_id, video.owner_id, MAX(video.points), tag.id AS tag_id
    FROM Videos video, VideoTags videotag, Tags tag
   WHERE video.id = videotag.video_id
     AND videotag.tag_id = tag.id
     AND tag.content LIKE '#%'
GROUP BY tag.id

"videotag.tag_id = tag.id" this will have two row matching so it override the 2nd value 

INSERT INTO Tags (id, content) VALUES (222, '#topic-2');

INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-y-video-l',222);
INSERT INTO VideoTags (video_id,tag_id) VALUES ('owner-y-video-m',222);

which show the wrong result.

So if we try it to group by using "videotag.tag_id" than it will show the right result.

SELECT video.id AS video_id, video.owner_id, MAX(video.points), tag.id AS tag_id
    FROM Videos video, VideoTags videotag, Tags tag
   WHERE video.id = videotag.video_id
     AND videotag.tag_id = tag.id
     AND tag.content LIKE '#%'
GROUP BY videotag.tag_id 
```

# java - SWT/Jface Treeviewer 加载tableviewer

> ID：12778330
> 
> 赞同：0
> 
> 时间：2012-10-08T08:56:09.027
> 
> 标签：java, swt, jface, tableviewer, treeviewer

我正在开发一个小型应用程序。我陷入了一种情况，即单击`TreeViewer`项目后必须将数据加载到表查看器中。请建议我处理这个问题的方法。

```
public void handleEvent(Event event) 
{
    TableViewer m_tableviewer.setData("Item Selected", event.item);
    // m_personViewer.setText(event.item + " was selected");
} 
```

# asp.net - 向 ModelBinded asp.net 4.5 WebForms 页面添加不显眼的验证

> ID：12778336
> 
> 赞同：1
> 
> 时间：2012-10-08T08:56:34.583
> 
> 标签：asp.net, validation, webforms, asp.net-4.5

我有一个绑定到模型的 FormView。并在其中使用此类控件：

```
<asp:TextBox runat="server" ID="txtName" Text='<%#: BindItem.Name %>'></asp:TextBox> 
```

在我向对象添加注释后，表单绑定到 - 验证开始工作，但我看不到任何验证消息。如何正确地做到这一点？
**PS：**

```
 ValidationSettings.UnobtrusiveValidationMode = UnobtrusiveValidationMode.WebForms; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T18:21:15.847

你试过`<asp:ValidationSummary>`控制吗？

像这样：

```
<asp:ValidationSummary ID="ValidationSummary1" runat="server" 
     DisplayMode="BulletList" ShowModelStateErrors="true" /> 
```

# perl - 按特定列中的数字排序

> ID：12778337
> 
> 赞同：0
> 
> 时间：2012-10-08T08:56:41.493
> 
> 标签：perl, unix, sorting

我有这种格式的数据（制表符分隔的列）...

```
Name_00001  Annotation_1    gene    329412  330509  .   -   .   ID=TAXON_00029;Name=TAXON_00029
Name_00001  Annotation_1    mRNA    329412  330509  .   -   .   ID=TAXON_00029T0;Parent=TAXON_00029
Name_00001  Annotation_1    exon    193957  194252  .   +   .   ID=exon:TAXON_00022T0:1;Parent=TAXON_00022T0
Name_00001  Annotation_1    exon    195500  197118  .   +   .   ID=exon:TAXON_00022T0:2;Parent=TAXON_00022T0 
```

...我想按第 9 列中的前 5 个数字升序排序。即文件看起来像这样：

```
Name_00001  Annotation_1    exon    193957  194252  .   +   .   ID=exon:TAXON_00022T0:1;Parent=TAXON_00022T0
Name_00001  Annotation_1    exon    195500  197118  .   +   .   ID=exon:TAXON_00022T0:2;Parent=TAXON_00022T0    
Name_00001  Annotation_1    gene    329412  330509  .   -   .   ID=TAXON_00029;Name=TAXON_00029
Name_00001  Annotation_1    mRNA    329412  330509  .   -   .   ID=TAXON_00029T0;Parent=TAXON_00029 
```

我曾尝试使用 Unix 或 Perl，但我的技能非常有限......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:05:08.103

在 unix 中不需要 perl.use 排序命令。

```
sort -k 9 -n your_file 
```

测试如下：

```
> cat temp
Name_00001      Annotation_1    gene    329412  330509  .       -       .       ID=TAXON_00029;Name=TAXON_00029
Name_00001      Annotation_1    mRNA    329412  330509  .       -       .       ID=TAXON_00029T0;Parent=TAXON_00029
Name_00001      Annotation_1    exon    193957  194252  .       +       .       ID=exon:TAXON_00022T0:1;Parent=TAXON_00022T0
Name_00001      Annotation_1    exon    195500  197118  .       +       .       ID=exon:TAXON_00022T0:2;Parent=TAXON_00022T0
> sort -k 9 -n temp
Name_00001      Annotation_1    exon    193957  194252  .       +       .       ID=exon:TAXON_00022T0:1;Parent=TAXON_00022T0
Name_00001      Annotation_1    exon    195500  197118  .       +       .       ID=exon:TAXON_00022T0:2;Parent=TAXON_00022T0
Name_00001      Annotation_1    gene    329412  330509  .       -       .       ID=TAXON_00029;Name=TAXON_00029
Name_00001      Annotation_1    mRNA    329412  330509  .       -       .       ID=TAXON_00029T0;Parent=TAXON_00029 
```

也测试了评论：

```
> cat temp
Name_00001      Annotation_1    mRNA    329412  330509  .       -       .       ID=TAXON_00013T0;Parent=TAXON_00029
Name_00001      Annotation_1    exon    193957  194252  .       +       .       ID=exon:TAXON_00002T0:1;Parent=TAXON_00022T0
> sort -k 9 -n temp
Name_00001      Annotation_1    exon    193957  194252  .       +       .       ID=exon:TAXON_00002T0:1;Parent=TAXON_00022T0
Name_00001      Annotation_1    mRNA    329412  330509  .       -       .       ID=TAXON_00013T0;Parent=TAXON_00029 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:25:39.697

如果您真的想按第 9 列中的前 5*位数字*进行排序，那是您无法从字面上解释的`sort`内容，但正如您所建议的那样，`perl`它更灵活：

```
perl -e 'sub key { 0+((split(/\s+/,$_[0]))[8] =~ /(\d{5})/)[0] }; print sort { key($a) <=> key($b) } <>' < unsorted > sorted 
```

这假设五个数字始终存在并且始终是连续的，但您可以从那里获取它。最好将代码放入文件中，添加`use warnings; use strict;`并增加易读性：

```
#!/usr/bin/env perl

use strict;
use warnings;

sub key {
    my $line = $_[0];
    my @fields = split(/\s+/,$line);
    my ($keystring) = $fields[8] =~ /(\d{5})/;
    my $key = 0 + $keystring;
    $key
}

print sort { key($a) <=> key($b) } <> 
```

# sybase - 带有身份验证查询的 Sybase 的 JDBC 连接

> ID：12778338
> 
> 赞同：3
> 
> 时间：2012-10-08T08:56:43.687
> 
> 标签：sybase

我有一个连接到 Sybase 数据库的数据源。连接到数据库后，我需要执行身份验证语句（SET TEMPORARY OPTION CONNECTION_AUTHENTICATION='Company....）。

有没有办法在 JDBC 连接参数中执行此语句作为 validationQuery 的一部分，以便自动对连接进行身份验证？

回答：

我已经设法得到这个答案！

这可以通过使用以下参数在连接 url 中设置来完成

SQLINITSTRING=SET TEMPORARY OPTION CONNECTION_AUTHENTICATION='公司.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T18:40:26.000

也许您可以使用 Sybase 登录触发器。这是我要做的步骤：

1.  创建一个正在执行您的语句的存储过程
2.  创建一个新的专用数据库登录
3.  将登录触发器分配给新创建的存储过程。

您可以在此处找到有关登录触发器的更多信息：http: //infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sag1/html/sag1/ [sag1804.htm](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.sag1/html/sag1/sag1804.htm)

# c++ - C++ Builder - 多线程数据库更新

> ID：12778339
> 
> 赞同：1
> 
> 时间：2012-10-08T08:56:48.543
> 
> 标签：c++, ms-access, ado, c++builder, vcl

我在 C++ Builder 中使用 ADO 组件，我需要将大约 200 000 条记录添加到我的 MS Access 数据库中。如果我将这些记录一一添加，则需要花费大量时间，因此我想使用线程。每个线程都会创建一个 TADOTable，连接到数据库并插入它自己的行。但是，当运行应用程序时，它甚至比只使用一个线程更慢！

那么，该怎么做呢？我需要向我的 Access 数据库中添加许多记录，但希望避免一一插入。一个代码会很有用。

谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T12:48:55.040

首先，多线程不会提高插入速度。由于上下文切换和其他东西，它会减慢它的速度。您需要的是批量插入的方式，即在单个事务中发送多行

尝试在访问表中搜索批量插入。那里有很多信息。

# menu - wordpress 菜单中的行高

> ID：12778340
> 
> 赞同：0
> 
> 时间：2012-10-08T08:56:52.930
> 
> 标签：menu, css

我正在尝试将 a`line-height`正确对齐 wordpress 菜单中的所有菜单项。我的问题是它适用于没有图像或描述的菜单，如果它有图像或描述，它不会与`line-height`属性垂直对齐。

这是我为菜单项工作的内容：

```
.menu-dropdown a.level1 > span, .menu-dropdown span.level1 > span {
height: 50px;
line-height: 50px;
padding: 0 10px;
} 
```

现在，当我使用 Firebuf 尝试解决问题时，有一个类显示有点不同，它是“level1 parent”。即使使用 Firebug，我也无法解决此问题。我在本地主机上工作，所以不能给出问题的链接，但如果有必要，我会把它放到网上。

这是链接，您可以在顶部的主菜单中看到问题： [http ://ricardo.dyndns-at-work.com:8888/yootheme/](http://ricardo.dyndns-at-work.com:8888/yootheme/)

# css - 如果悬停在其他东西上，链接颜色必须保持不变

> ID：12778343
> 
> 赞同：0
> 
> 时间：2012-10-08T08:57:02.790
> 
> 标签：css, drop-down-menu, hyperlink, hover

我想创建一个效果，如下所示：如果我将鼠标悬停在我的下拉菜单上，悬停的链接是蓝色的。当然很好，但是如果我将任何列表项悬停在下拉菜单中，蓝色链接将变回灰色。即使悬停了其他东西，如何使链接保持蓝色？

*如果我不悬停它或其他东西，必须是蓝色的链接是灰色的。没事儿。如果我悬停它，它是蓝色的。这也很好，但是如果我转到菜单中的列表项（所以灰色链接是指向下拉菜单的链接），如果悬停，链接会变回灰色而不是保持蓝色。 ..*

代码：

```
<div id="main-menu-wrap">
<ul id="menu-headmenu" class="menu-headmenu-container">
<li id="menu-item-429" class="menu-item menu-item-type-post_type menu-item-object-page">
<a href="blabla">
About us
<span class="sub"></span>
</a>
<ul class="sub-menu">
<li id="menu-item-435" class="menu-item menu-item-type-post_type menu-item-object-page">
<a href="blablbala">
Team
<span class="sub">blablabla</span>
</a>
</li>
<li id="menu-item-145" class="menu-item menu-item-type-taxonomy menu-item-object-category">
<a href="blablabla">
haha
<span class="sub">hahaa</span>
</a>
</li>
</ul>
</li>
<li id="menu-item-407" class="menu-item menu-item-type-post_type menu-item-object-page current-page-ancestor current-menu-ancestor current-menu-parent current-page-parent current_page_parent current_page_ancestor"> 
```

CSS：

```
#menu-headmenu li a:hover {
    background: none repeat scroll 0 0 #80806E;
    color: white;
}
#menu-headmenu li li a:hover {
    background: none repeat scroll 0 0 transparent;
}
#menu-headmenu li:hover .sub-menu {
    display: block;
}
#menu-headmenu .sub-menu li {
    background: none repeat scroll 0 0 white;
    float: none;
    font-size: 14px;
    margin-bottom: 1px;
    padding: 10px;
    text-transform: uppercase;
    width: 200px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:45:35.517

试试这个：

```
`#menu-headmenu .sub-menu li { list-style:none;}`  add list-style in this id.

 `#menu-headmenu .sub-menu a:hover { color: #E5E5E6 !important;}` 
```

将此代码包含到您的 css 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:54:17.640

没有 JavaScript 就无法完成您想做的事情，因为根本不存在伪选择器之类的东西`element:hoveredinpast`。一个快速的 jQuery 示例将类似于：

```
$('#menu-headmenu .sub-menu li').hover({
    $(this).addClass('PermaBlue');
}); 
```

只要你有一个用 set 之类`PermaBlue`的东西调用的 CSS 类`color: blue`，它就会做你想做的事。

# ruby - 来自 Sinatra 端口 6557 的服务的 Ruby IO

> ID：12778345
> 
> 赞同：0
> 
> 时间：2012-10-08T08:57:08.870
> 
> 标签：ruby, io, rubygems, sinatra

我必须在 sinatra 中转储一项服务并将其显示在网页的内容区域中。

我必须通过代码访问的服务在端口 6557 的服务器上运行。它不使用任何加密或身份验证。它是一个普通的只读请求响应，类似于 http。这是在终端中有效的方法

```
$ echo "GET hosts" | nc 192.168.1.1 6557 
```

给了我预期的输出。我需要使用 sinatra 应用程序做类似的事情。

我写了这段代码，但完全不正确。有人可以帮助我提供代码或查找材料或示例。

```
get '/' do
        host = "192.168.1.1"
        port = 6557
        dat = ""
        @socket = TCPSocket.open (host, port)
                while(true)
                        if(IO.select([],[],[@socket],0))
                                socket.close
                                return
                        end
                        begin
                                while( (data = @socket.recv_nonblock(100)) != "")
                                        dat = dat+ data
                                end
                                rescue Errno::EAGAIN
                        end
                        begin
                                @str = "GET hosts"
                                @socket.puts(@str);
                        rescue Errno::EAGAIN
                        rescue EOFError
                                exit
                        end
                        IO.select([@socket], [@socket], [@socket])
                end
        @line = dat
        erb :info
end 
```

执行代码就挂了。另外，如果可能的话，请提供一些链接以阅读以获得问题的概念背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:09:57.433

您可以使用反引号或命令直接从 ruby​​ 执行 shell 命令`system`。这样的事情可能对你有用：

```
get "/" do
  @line = `echo "GET hosts" | nc 192.168.1.1 6557`
  erb :info
end 
```

查看[Kernel#system 的 ruby​​ 文档以](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)获取更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:39:44.783

我认为与您的 shell 命令等效的 Ruby 应该很简单：

```
require "socket"

socket = TCPSocket.new "192.168.1.1", 6557
socket.puts "GET hosts"
socket.read 
```

根据文档，#read 应该自动关闭套接字，因此您无需担心手动执行此操作。

# java - 如何从 Java 中对 Linux 中的文件夹结构设置 777 权限？

> ID：12778347
> 
> 赞同：0
> 
> 时间：2012-10-08T08:57:10.293
> 
> 标签：java, linux, directory-permissions

> **可能重复：**
> [如何以编程方式更改文件权限？](https://stackoverflow.com/questions/664432/how-do-i-programmatically-change-file-permissions)
> [如何在 java 中设置 umask？](https://stackoverflow.com/questions/3175303/how-can-i-set-the-umask-from-within-java)

在*Linux*中，我试图为文件夹结构（例如：“home/test/sample/”）授予完全权限（777），以创建*MySQL*表，并将数据目录从我的应用程序更改为用户特定位置用*Java*编写。

如何从*Java*授予对文件夹结构的完全权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:02:30.303

您必须像这样使用依赖于操作系统的代码：

```
 Runtime rt = Runtime.getRuntime();
    Process proc;
    int exitVal = -1;
    try {
        proc =  rt.exec("chmod 777 "+file);
        exitVal = proc.waitFor();
    } catch (Exception e) {} 
```

# joomla - 跨不同组件的 Joomla 分页

> ID：12778349
> 
> 赞同：5
> 
> 时间：2012-10-08T08:57:15.223
> 
> 标签：joomla, pagination

因为分页使用`getUserStateFromRequest`方法来获取`limit`and`limitstart`变量，所以我遇到了一个问题，当我从一个组件导航到另一个组件时，我会看到一条没有找到项目的消息。

澄清一下，我有一个产品组件，其中列出了 3 页的产品。然后我有一个包含 2 页分支信息的分支组件。因此，如果我导航到产品列表中的第三页，然后转到分支组件，则不会显示任何内容。

有谁知道如何阻止这种情况发生？有什么办法可以清除会话数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-31T01:09:39.413

为了防止编辑核心文件，但效果仅限于您的扩展（因此其他扩展可能会加载到错误的页面，但不是您的），如果您的模型扩展了模型列表，请覆盖该`getStart()`方法：

```
public function getStart()
{
    $store = $this->getStoreId('getstart');
    $input = JFactory::getApplication()->input;
    $start = $limitstart = $input->getInt('limitstart', 0);
    $this->setState('list.start', $limitstart); // maybe redundant

    $limit = $this->getState('list.limit');
    $total = $this->getTotal();
    if ($start > $total - $limit)
    {
        $start = max(0, (int) (ceil($total / $limit) - 1) * $limit);
    }

    // Add the total to the internal cache.
    $this->cache[$store] = $start;
    return $this->cache[$store];
} 
```

如果您想要一个适用于系统范围和所有扩展的解决方案，您应该能够使用插件中的实现覆盖 modellist。[从这里](https://stackoverflow.com/questions/14966202/joomla-overriding-getitem-method)开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:45:05.560

我最终做的是，在 library/joomla/application/application.php 文件的第 624 行中，我添加了以下几行

```
$this->setUserState('option','default');

        $curr_comp = JRequest::getCmd( 'option' );;

        if($this->getUserState('option') != $curr_comp)
        {
            $this->setUserState($option . 'limitstart',0);
            $this->setUserState('option',$curr_comp);

        } 
```

所以整个函数读取这个，

```
public function getUserStateFromRequest($key, $request, $default = null, $type = 'none')
    {

        $this->setUserState('option','default');

        $curr_comp = JRequest::getCmd( 'option' );

        if($this->getUserState('option') != $curr_comp)
        {
            $this->setUserState($option . 'limitstart',0);
            $this->setUserState('option',$curr_comp);

        }
        $cur_state = $this->getUserState($key, $default);
        $new_state = JRequest::getVar($request, null, 'default', $type);

        // Save the new value only if it was set in this request.
        if ($new_state !== null)
        {
            $this->setUserState($key, $new_state);
        }
        else
        {
            $new_state = $cur_state;
        }

        return $new_state;
    } 
```

目前这似乎工作正常。但请在实际站点上实施之前进行测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T11:05:07.157

这是一个老问题，但我只是遇到了与 OP 相同的问题，但在我的情况下是 Joomla 3.4.3。

经过大量挖掘和测试，我发现了一个不涉及任何插件或核心更改的解决方案：

如果您`limitstart=0`输入 URL，该页面的分页将重新启动，这解决了菜单之间的问题。

实现这一点的方法可以是使用 javascript，也可以通过覆盖菜单模块，我选择了覆盖：

1.  我只是在一些菜单中需要这个，所以我在菜单链接中放置了一个 CSS 类（编辑菜单，并在“链接类型”选项卡中，将 CSS 类放在“链接 CSS 样式”字段中），在我的例子中是是`" video-area"`（不带引号）。
2.  添加覆盖（将模块添加到`html`模板的文件夹中，在我的情况下它是菜单模块，所以只需添加 mod_menu 文件夹`templatefolder/html/mod_menu`：）
3.  在模块（`default_component.php`）的组件部分的覆盖中，检查我们是否有 CSS 类，如果有，将额外的查询添加到 URL（我编辑过`case 0`）：

    `case 0: $paginationLinks = ""; if(isset($class) && strpos($class, ' video-area') !== false){ $paginationLinks = "?limitstart=0&limit=12"; } ?><a <?php echo $class; ?>href="<?php echo $item->flink; ?><?php echo $paginationLinks;?>" <?php echo $title; ?>><span><?php echo $linktype; ?></span></a><?php break;`

**而已！它解决了我的问题，甚至分页链接都有额外的查询:)**

**奖励**：请注意，我有`&limit=12`，这将分页限制更改为`12`每页，没有任何额外的代码！，（之前，我有很多代码来实现这一点，通过将其添加到菜单中，它会计算正确的页码和总计，并过滤查询，不错的 Joomla！）

# iphone - 如何使用崩溃日志解决崩溃问题？

> ID：12778350
> 
> 赞同：1
> 
> 时间：2012-10-08T08:57:14.130
> 
> 标签：iphone, ios, ipad

当我单击 alertView 的按钮时出现崩溃问题，我得到崩溃日志，我在下面列出，我还在下面列出了 alertview 的 ClickedButtonAtIndex 的方法：我的应用程序崩溃了，所以有人可以帮助我吗？

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSLog(@"~Log : Class:%@ Method:%@",NSStringFromClass([self class]), NSStringFromSelector(_cmd));    

    if(buttonIndex == 1 && [textView text]!= NULL && ![[textView text] isEqualToString:@""]) {

        if([[[textView text] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] length] > 0) {

            NSArray *aryConsult = [aryConsults objectAtIndex:iPath.row];

            for (int i=0; i < [aryConsult  count]; i++) {

                if([[[aryConsult objectAtIndex:i] valueForKey:@"status"] isEqualToString:@"1"]) {
                    ConsultsDB *consultDB = [[ConsultsDB alloc] init];
                    NSManagedObject *mgObject = (NSManagedObject *)[aryConsult objectAtIndex:i];
                    [mgObject setValue:@"0" forKey:@"status"];
                    [mgObject setValue:[[textView text] stringByTrimmingCharactersInSet:
                                        [NSCharacterSet whitespaceCharacterSet]] forKey:@"followUpDesc"];
                    [mgObject setValue:[NSDate date] forKey:@"completionDate"];
                                        [consultDB updateConsults:mgObject];        
                    [consultDB release];
                }
            }           
            [self refreshView];
        }
    }

    [CommonMethods updateTheUIForToDoListScreen];
    [CommonMethods updateTheUIForHistoryAndPhysical];

} 
```

我的崩溃日志是：-

```
Incident Identifier: 96E6BA22-9F10-4A23-97AB-CEF9F78D715B
CrashReporter Key:   f2dec3bb7202b9b2fb0a68f76b4a36a85a382e2f
Hardware Model:      iPad3,1
Process:         MedPRO Inpatient Manager [535]
Path:            /var/mobile/Applications/3BEEDA35-AD04-4629-A9D8-1481DFA936C5/MedPRO Inpatient Manager.app/MedPRO Inpatient Manager
Identifier:      MedPRO Inpatient Manager
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-10-08 12:33:57.417 +0530
OS Version:      iOS 6.0 (10A403)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000f
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libobjc.A.dylib                 0x316f25b0 objc_msgSend + 16
1   MedPRO Inpatient Manager        0x00031a86 -[ConsultsViewController alertView:clickedButtonAtIndex:] (ConsultsViewController.m:802)
2   UIKit                           0x35db3b74 -[UIAlertView(Private) _buttonClicked:] + 292
3   UIKit                           0x35d470a8 -[UIApplication sendAction:to:from:forEvent:] + 68
4   UIKit                           0x35d4705a -[UIApplication sendAction:toTarget:fromSender:forEvent:] + 26
5   UIKit                           0x35d47038 -[UIControl sendAction:to:forEvent:] + 40
6   UIKit                           0x35d468ee -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 498
7   UIKit                           0x35d46de4 -[UIControl touchesEnded:withEvent:] + 484
8   UIKit                           0x35c6f5f4 -[UIWindow _sendTouchesForEvent:] + 520
9   UIKit                           0x35c5c804 -[UIApplication sendEvent:] + 376
10  UIKit                           0x35c5c11e _UIApplicationHandleEvent + 6150
11  GraphicsServices                0x34c595a0 _PurpleEventCallback + 588
12  GraphicsServices                0x34c591ce PurpleEventCallback + 30
13  CoreFoundation                  0x38dad170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
14  CoreFoundation                  0x38dad112 __CFRunLoopDoSource1 + 134
15  CoreFoundation                  0x38dabf94 __CFRunLoopRun + 1380
16  CoreFoundation                  0x38d1eeb8 CFRunLoopRunSpecific + 352
17  CoreFoundation                  0x38d1ed44 CFRunLoopRunInMode + 100
18  GraphicsServices                0x34c582e6 GSEventRunModal + 70
19  UIKit                           0x35cb02fc UIApplicationMain + 1116
20  MedPRO Inpatient Manager        0x00002fa4 main (main.m:14)
21  MedPRO Inpatient Manager        0x00002f64 start + 36

Thread 1:
0   libsystem_kernel.dylib          0x37812d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33188cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33188a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x331888a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x37802648 kevent64 + 24
1   libdispatch.dylib               0x31f96974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x31f96654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 3 name:  WebThread
Thread 3:
0   libsystem_kernel.dylib          0x37801eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x37802048 mach_msg + 36
2   CoreFoundation                  0x38dad040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x38dabd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x38d1eeb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x38d1ed44 CFRunLoopRunInMode + 100
6   WebCore                         0x35130a70 _ZL12RunWebThreadPv + 440
7   libsystem_c.dylib               0x3319330e _pthread_start + 306
8   libsystem_c.dylib               0x331931d4 thread_start + 4

Thread 4:
0   libsystem_kernel.dylib          0x37812d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33188cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33188a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x331888a0 start_wqthread + 4

Thread 5:
0   libsystem_kernel.dylib          0x37812d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33188cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33188a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x331888a0 start_wqthread + 4

Thread 6:
0   libsystem_kernel.dylib          0x37812d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33188cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33188a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x331888a0 start_wqthread + 4

Thread 7:
0   libsystem_kernel.dylib          0x37812d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x33188cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x33188a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x331888a0 start_wqthread + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x006ba0e0    r1: 0x360cf529      r2: 0x006ba0e0      r3: 0x360cf529
    r4: 0x00000007    r5: 0x00000001      r6: 0x006a2390      r7: 0x2fdfe7c4
    r8: 0x3ada01ac    r9: 0x0d833d4a     r10: 0x006b9b70     r11: 0x00000001
    ip: 0x38d22919    sp: 0x2fdfe75c      lr: 0x00031a8b      pc: 0x316f25b0
  cpsr: 0x20070030

Binary Images:
    0x1000 -   0x152fff +MedPRO Inpatient Manager armv7  <d06665a92fa2336084091dec46ea087a> /var/mobile/Applications/3BEEDA35-AD04-4629-A9D8-1481DFA936C5/MedPRO Inpatient Manager.app/MedPRO Inpatient Manager
 0xac78000 -  0xac88fff  Riven armv7  <08ac9e94f78e366dad2c70bd9ccdea11> /System/Library/TextInput/Riven.bundle/Riven
0x2fe7e000 - 0x2fe9efff  dyld armv7  <75594988728831d98e1f7c4c7b7ca29d> /usr/lib/dyld
0x30dd1000 - 0x30fa9fff  ImageIO armv7  <fdfa8aa6307235b29435e5c8f6bc9819> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x3131c000 - 0x31358fff  DataAccess armv7  <bd40f7ec5a9c3df7b4a575fffc25c14f> /System/Library/PrivateFrameworks/DataAccess.framework/DataAccess
0x3139d000 - 0x313d2fff  libcorecrypto.dylib armv7  <ebd023957d853fa8bd35309592e92dac> /usr/lib/system/libcorecrypto.dylib
0x313d3000 - 0x313d7fff  IncomingCallFilter armv7  <e938b3977503385087928a65367f849c> /System/Library/PrivateFrameworks/IncomingCallFilter.framework/IncomingCallFilter
0x31419000 - 0x3152efff  QuartzCore armv7  <d96571a6986c3012b315cb860f4d65ca> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x315ff000 - 0x3163dfff  VideoToolbox armv7  <bfc75ceef01e366e8335949abf037d4b> /System/Library/Frameworks/VideoToolbox.framework/VideoToolbox
0x31645000 - 0x316aafff  CoreMedia armv7  <d227864b757e3a7ea5d7d96dcbb948fe> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x316de000 - 0x316defff  libkeymgr.dylib armv7  <8a2e3a8fdf9335e2867a33e2d1a9baf8> /usr/lib/system/libkeymgr.dylib
0x316ef000 - 0x317edfff  libobjc.A.dylib armv7  <5224e803eca737a4b2c6451d136b3d28> /usr/lib/libobjc.A.dylib
0x31814000 - 0x31832fff  WebBookmarks armv7  <012ed1a1f54a3d6d836e2836781d4f73> /System/Library/PrivateFrameworks/WebBookmarks.framework/WebBookmarks
0x3187b000 - 0x3187cfff  libsystem_sandbox.dylib armv7  <46cd200d99323aebbf6d81e5fb16424f> /usr/lib/system/libsystem_sandbox.dylib
0x318b9000 - 0x31a5ffff  JavaScriptCore armv7  <6b14c224c0e0306aa9084679ec6a99d2> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x31aa6000 - 0x31c57fff  libmecabra.dylib armv7  <b59b3ee949633384bf5612da5cc73781> /usr/lib/libmecabra.dylib
0x31c58000 - 0x31c64fff  AccountSettings armv7  <0b7524e9a8ef36bf9e9f6a5c445478af> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x31c69000 - 0x31eeefff  MediaToolbox armv7  <a1df6dd0733233d3b1cba9cddf3991f6> /System/Library/Frameworks/MediaToolbox.framework/MediaToolbox
0x31eef000 - 0x31f1dfff  Security armv7  <be87724ccad837479efd45ca9f2c6b2c> /System/Library/Frameworks/Security.framework/Security
0x31f7a000 - 0x31f8dfff  AirTraffic armv7  <b588b9fdc83d369db76f1ad5ebf2a4fa> /System/Library/PrivateFrameworks/AirTraffic.framework/AirTraffic
0x31f8e000 - 0x31fabfff  libdispatch.dylib armv7  <4abccf75caf33fa5a0c6037b2e1c5f41> /usr/lib/system/libdispatch.dylib
0x31fb6000 - 0x31fb6fff  libunwind.dylib armv7  <85e7546accc23ae1a973da4758512b7f> /usr/lib/system/libunwind.dylib
0x320bd000 - 0x321fbfff  vImage armv7  <a7fd7fcd7041356db2ca297402ab6e8c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x3221a000 - 0x3221afff  Accelerate armv7  <22bee3e96cbc3538bfc50ca5be618cc0> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x3223c000 - 0x32292fff  CoreAudio armv7  <a3a2eb3a29443b42a23aa8ecb1232846> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x322a8000 - 0x322b1fff  MobileWiFi armv7  <43de6d03af0838f2a1eeec10d4149e9d> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x322b4000 - 0x322effff  libCGFreetype.A.dylib armv7  <7a68e65e523030faa9d91478e939bc00> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x324f8000 - 0x324fdfff  Marco armv7  <755b00548c863f939bf1409f03f2b3ad> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x32539000 - 0x3253dfff  CertUI armv7  <7e4aee03dc3735559f1270e504d94f02> /System/Library/PrivateFrameworks/CertUI.framework/CertUI
0x32547000 - 0x32549fff  libCoreVMClient.dylib armv7  <e57152bacb36350e8a023e0c1b540a0c> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x32555000 - 0x32558fff  MobileSystemServices armv7  <6edd9c74c5a73c33809152446abe1538> /System/Library/PrivateFrameworks/MobileSystemServices.framework/MobileSystemServices
0x3272e000 - 0x3276bfff  FTServices armv7  <aa7fe75a69d538b2a80efa63e3484b2a> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x33008000 - 0x33061fff  MobileCoreServices armv7  <d831f1f9285535acac5035a29d84aaaf> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x33062000 - 0x33077fff  libmis.dylib armv7  <3afeeea531013420af75315d8d6dd332> /usr/lib/libmis.dylib
0x33118000 - 0x33181fff  IMAVCore armv7  <38d0b133ac043f08a5dc90ea80f516f4> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x33182000 - 0x33208fff  libsystem_c.dylib armv7  <d45dc8901531343caf9b7e703d3eba50> /usr/lib/system/libsystem_c.dylib
0x33209000 - 0x33225fff  libsystem_m.dylib armv7  <7b2a25c750063de480f6a691f716b9d7> /usr/lib/system/libsystem_m.dylib
0x33226000 - 0x3330cfff  AVFoundation armv7  <23a8a62a06b03cbcbe7659918951c9f3> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x3330d000 - 0x33366fff  libvDSP.dylib armv7  <ad4c53081a263f0d96f63b9a80f2ae91> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x33368000 - 0x33413fff  MediaControlSender armv7  <fba51e235adc368b8132db578723a8fa> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x3353f000 - 0x3368dfff  MusicLibrary armv7  <262f509dae9f3c128f25163a7029685b> /System/Library/PrivateFrameworks/MusicLibrary.framework/MusicLibrary
0x336a9000 - 0x336bbfff  DataAccessExpress armv7  <131d8cf4df333df3b8487ef93438e27c> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x33714000 - 0x3371dfff  libbz2.1.0.dylib armv7  <5258dce78afc3fd7934a5674b92ad785> /usr/lib/libbz2.1.0.dylib
0x3371e000 - 0x337e3fff  CFNetwork armv7  <3e973794a4d13428bb974edcb2027139> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x337e4000 - 0x337e5fff  libremovefile.dylib armv7  <6a0dd04f0710329b9c1722db2235f5c3> /usr/lib/system/libremovefile.dylib
0x337e6000 - 0x3383bfff  CoreTelephony armv7  <54708e241c5c3e2297c2fca0d685497d> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33848000 - 0x3384efff  libsystem_dnssd.dylib armv7  <6c1c1aaf9a3537d7ada4b519d14da7ab> /usr/lib/system/libsystem_dnssd.dylib
0x3384f000 - 0x338d6fff  CoreMotion armv7  <537e5776244f3ef5a355f8fd14a72a22> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x33a3b000 - 0x33a3cfff  libdnsinfo.dylib armv7  <6c912cedc1e938ad914dfce91a529b68> /usr/lib/system/libdnsinfo.dylib
0x33a57000 - 0x33a92fff  AppSupport armv7  <74ed50d2f7d23ce696b029dd817749c0> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x33a93000 - 0x33aa2fff  MobileDeviceLink armv7  <5c91ef875c5931a1a26e227ddfd7262d> /System/Library/PrivateFrameworks/MobileDeviceLink.framework/MobileDeviceLink
0x33aac000 - 0x33ae7fff  iCalendar armv7  <d5f593ead35b38a98d6cfd4a243e0172> /System/Library/PrivateFrameworks/iCalendar.framework/iCalendar
0x33aeb000 - 0x33b0ffff  Bom armv7  <c76b4156e0463ecb922608d44c126d86> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x33b10000 - 0x33b72fff  CoreText armv7  <4a0bece315e9316fa1aa1b5923740f55> /System/Library/Frameworks/CoreText.framework/CoreText
0x33cd9000 - 0x33cdefff  IOMobileFramebuffer armv7  <3a351ca1d4ae3146a787f3e13564294b> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x33d0a000 - 0x33d0bfff  DataMigration armv7  <25f8874067393208acc083124bc3eb86> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x33d0c000 - 0x33d1dfff  SpringBoardServices armv7  <22255260ec6436d19176696422441c40> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x33d25000 - 0x33d2bfff  libAccessibility.dylib armv7  <9e8bfe02e370375ea8439ab895528982> /usr/lib/libAccessibility.dylib
0x33d2c000 - 0x33d44fff  AssistantServices armv7  <a1444bc3ce433abb8dad2010d43cb41d> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x33d45000 - 0x33d4afff  liblaunch.dylib armv7  <021ff140d6003f3281dfa29b79fa9e6e> /usr/lib/system/liblaunch.dylib
0x33d4b000 - 0x33d64fff  Notes armv7  <b8fb864f5973319083f926d9a570734e> /System/Library/PrivateFrameworks/Notes.framework/Notes
0x33e4d000 - 0x33fe5fff  MediaPlayer armv7  <45ee55956c693d8cb16dc4c4e85075e4> /System/Library/Frameworks/MediaPlayer.framework/MediaPlayer
0x34048000 - 0x3406efff  libtidy.A.dylib armv7  <134c41c587fb33dca014bd525f68a0c7> /usr/lib/libtidy.A.dylib
0x34078000 - 0x34082fff  MailServices armv7  <f31a7844317a3f2484cffe092e9fd7c2> /System/Library/PrivateFrameworks/MailServices.framework/MailServices
0x34083000 - 0x3408cfff  MediaRemote armv7  <dbc251adcad43e72a31427f836a060cd> /System/Library/PrivateFrameworks/MediaRemote.framework/MediaRemote
0x340a8000 - 0x340aafff  libcompiler_rt.dylib armv7  <7add7c91a2673641b0c5f0433a203da6> /usr/lib/system/libcompiler_rt.dylib
0x34167000 - 0x34168fff  libdyld.dylib armv7  <3a149b4730663b1ea84e4a0a68ccc689> /usr/lib/system/libdyld.dylib
0x3417e000 - 0x3425afff  WebKit armv7  <73fa195f63bc32c29060ac0fecabdca6> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x3425b000 - 0x3425dfff  OAuth armv7  <d3e2bc9ae64b31f0a89c52dc1c2797fc> /System/Library/PrivateFrameworks/OAuth.framework/OAuth
0x3426b000 - 0x3429bfff  ContentIndex armv7  <25cc27c7fdac34e6ae5e057c048a3e21> /System/Library/PrivateFrameworks/ContentIndex.framework/ContentIndex
0x342a9000 - 0x342affff  MobileKeyBag armv7  <a81d768a49cf37a1a111594d39cea3fe> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x342e9000 - 0x342f7fff  libsystem_network.dylib armv7  <d0fb0eda6cb53a4da859d598c59e7522> /usr/lib/system/libsystem_network.dylib
0x3460a000 - 0x348bffff  libLAPACK.dylib armv7  <dd6f3958c3d536d6be90836682d2ffee> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x348e5000 - 0x348e5fff  libsystem_blocks.dylib armv7  <993c9bfe8bf031548b9ddba63cc17015> /usr/lib/system/libsystem_blocks.dylib
0x349ba000 - 0x349cffff  libresolv.9.dylib armv7  <e79b59a3406f34d9b37f8085955115ce> /usr/lib/libresolv.9.dylib
0x34c53000 - 0x34c5efff  GraphicsServices armv7  <c5879083e8693aba827c78a32abe2391> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x34c8e000 - 0x34d7cfff  GeoServices armv7  <6af26ce81030330b97122ba8c1deaaa2> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x34e31000 - 0x34efbfff  Celestial armv7  <1a048f93218d3551984b2d07e884694c> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x34f37000 - 0x34f54fff  PersistentConnection armv7  <8e4d21f987d4334e927222c28ff1130b> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x3510d000 - 0x35111fff  FTClientServices armv7  <13aa63aa5e2e348ea289e0fd16585890> /System/Library/PrivateFrameworks/FTClientServices.framework/FTClientServices
0x35112000 - 0x35114fff  MessageSupport armv7  <44d449b4959a33b99d4ab4a9cd161ee6> /System/Library/PrivateFrameworks/MessageSupport.framework/MessageSupport
0x35115000 - 0x35121fff  libz.1.dylib armv7  <a3bba3842596315a81aa171a8bbda7b5> /usr/lib/libz.1.dylib
0x35126000 - 0x35a55fff  WebCore armv7  <cd34aedf72653d1dbef6b14fdfd0c053> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x35a69000 - 0x35a76fff  TelephonyUtilities armv7  <0e07c7484ca63c189fd19790eb48bb28> /System/Library/PrivateFrameworks/TelephonyUtilities.framework/TelephonyUtilities
0x35a8b000 - 0x35a91fff  libcommonCrypto.dylib armv7  <690aaa493b5c3f9582499f174adf4964> /usr/lib/system/libcommonCrypto.dylib
0x35acd000 - 0x35ae5fff  libsystem_info.dylib armv7  <be3d5625aed733ffb2d53400655fe110> /usr/lib/system/libsystem_info.dylib
0x35ae6000 - 0x35b01fff  libRIP.A.dylib armv7  <6e5f3b4c18e137e0a464fe13095b7dab> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x35bad000 - 0x35beafff  libGLImage.dylib armv7  <7db25f3d55b93f31868e37326fba1e57> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x35c59000 - 0x361acfff  UIKit armv7  <98789fe7c21b3fe0bf5c0bb36648147f> /System/Library/Frameworks/UIKit.framework/UIKit
0x36201000 - 0x3624dfff  IMFoundation armv7  <b1a5542b977e3ae683f40ee5755d5b32> /System/Library/PrivateFrameworks/IMFoundation.framework/IMFoundation
0x3624e000 - 0x362d3fff  MessageUI armv7  <acd711b4e9cb3bdba768a884c4d6976a> /System/Library/Frameworks/MessageUI.framework/MessageUI
0x362d4000 - 0x362e0fff  GenerationalStorage armv7  <74d50f4c8d243a35ad3ae89d85f2793a> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x362e1000 - 0x36567fff  AudioToolbox armv7  <6a4804d0e35e362dbad6f047c25227ca> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x36682000 - 0x3673bfff  Message armv7  <c854843dec583b33a72a9fe047d20f0c> /System/Library/PrivateFrameworks/Message.framework/Message
0x3673c000 - 0x36761fff  OpenCL armv7  <f7706501012430fc94ed99006419fba9> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x368cb000 - 0x368cbfff  libSystem.B.dylib armv7  <f2cad3bd15f63f448a9c5be732c65819> /usr/lib/libSystem.B.dylib
0x368cc000 - 0x36981fff  CoreImage armv7  <ba744c4f6a1c3c0598de9d429022093a> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x36989000 - 0x36a43fff  AddressBookUI armv7  <5c030d99a0113ceda2ae375d348e4cdb> /System/Library/Frameworks/AddressBookUI.framework/AddressBookUI
0x36a44000 - 0x36a47fff  MobileInstallation armv7  <e6b6ae9d4f5f3831a40fcc370afc1429> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x36a92000 - 0x36accfff  iTunesStore armv7  <4ff9158eb0583316b34506904b21a4f3> /System/Library/PrivateFrameworks/iTunesStore.framework/iTunesStore
0x36ae8000 - 0x36b15fff  MobileAsset armv7  <23e6b8ea85dd3dea84d8c295b4777753> /System/Library/PrivateFrameworks/MobileAsset.framework/MobileAsset
0x36b16000 - 0x36b22fff  libMobileGestalt.dylib armv7  <0338ce49444332ec88cfc45c624bb39b> /usr/lib/libMobileGestalt.dylib
0x36b2e000 - 0x36b33fff  CrashReporterSupport armv7  <7bde3532f2953f3894eb725379575926> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x36b34000 - 0x36b7efff  libc++.1.dylib armv7  <a361a382693032b9bdfb2860033b3024> /usr/lib/libc++.1.dylib
0x36bb8000 - 0x36bc7fff  CoreVideo armv7  <092f3aa965803a1aaea69af2ac5143f5> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x36dcd000 - 0x36e24fff  SAObjects armv7  <93fe8149b03538edb4b78bd374050a00> /System/Library/PrivateFrameworks/SAObjects.framework/SAObjects
0x36e38000 - 0x36e44fff  libbsm.0.dylib armv7  <e98708fbfa683df2a91d45dc765071a7> /usr/lib/libbsm.0.dylib
0x36e8f000 - 0x36fc7fff  CoreGraphics armv7  <903960bfcfe93adb943752851f88491e> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x36fc8000 - 0x36fdbfff  libc++abi.dylib armv7  <c5a5f03138353747b539e620ef2bb5c0> /usr/lib/libc++abi.dylib
0x36fe4000 - 0x370d1fff  libiconv.2.dylib armv7  <faa5abb937e3306ab87c7f7c38315839> /usr/lib/libiconv.2.dylib
0x37134000 - 0x37551fff  TextInput armv7  <ee57be9a7f723604afa6f27f85ea8b1d> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x37613000 - 0x3768bfff  IMCore armv7  <552805a4634630bbaad2bc9d862d7196> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x376a0000 - 0x376b6fff  VoiceServices armv7  <9f5307bc0cf3398e8b0770d924acb29e> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x376b7000 - 0x376b8fff  IOAccelerator armv7  <de8af6be681832008d180d7424d55f0d> /System/Library/PrivateFrameworks/IOAccelerator.framework/IOAccelerator
0x376b9000 - 0x376cffff  libCRFSuite.dylib armv7  <9b3fd56781103f209be2c43e48c1efc9> /usr/lib/libCRFSuite.dylib
0x3779c000 - 0x37800fff  AddressBook armv7  <3c0d5a3207cf3771b0beb0cd8e8a6e12> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x37801000 - 0x37817fff  libsystem_kernel.dylib armv7  <f167dacec44b3a86a8eee73400ff7a83> /usr/lib/system/libsystem_kernel.dylib
0x37818000 - 0x3788cfff  ProofReader armv7  <cc89a352199a393ba0e46af69e670ef9> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37946000 - 0x3794bfff  libcopyfile.dylib armv7  <15aa2c3c8d523273913d4fc6717d3b7c> /usr/lib/system/libcopyfile.dylib
0x379dc000 - 0x37a59fff  HomeSharing armv7  <9126a007a413357b8c0275cc505cb197> /System/Library/PrivateFrameworks/HomeSharing.framework/HomeSharing
0x37a9c000 - 0x37a9ffff  ActorKit armv7  <64235ea1a8b73d23a4a9836410424b6b> /System/Library/PrivateFrameworks/ActorKit.framework/ActorKit
0x37aba000 - 0x37b03fff  IOKit armv7  <c4786e65ac913839b1bb3b85a9c951fa> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x37c8b000 - 0x37c8bfff  vecLib armv7  <66204595f7653ef29e5e26cb8629177a> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x37cca000 - 0x37cd1fff  liblockdown.dylib armv7  <257ecb171a363e4298a63f72d7fffea2> /usr/lib/liblockdown.dylib
0x37cd2000 - 0x37e95fff  Foundation armv7  <2e1ac190c4f837e2a1059043dd7b1c63> /System/Library/Frameworks/Foundation.framework/Foundation
0x37e96000 - 0x37e9dfff  OpenGLES armv7  <e035b741746c316dba8f1e59a568bf17> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x37ef6000 - 0x37ef6fff  liblangid.dylib armv7  <a04b639c18593885bd81bfa623a6f07c> /usr/lib/liblangid.dylib
0x37f26000 - 0x37f2dfff  CaptiveNetwork armv7  <c1a469c6ca4a3718bef325ec0f4e1885> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x37f6e000 - 0x37f7ffff  Accounts armv7  <07b95faa96e73ffeb52694cbad7f3528> /System/Library/Frameworks/Accounts.framework/Accounts
0x37f83000 - 0x37f94fff  libvMisc.dylib armv7  <a3d025234d1a3880a0e5f87879633ee0> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x37fe6000 - 0x37feafff  libGFXShared.dylib armv7  <6a8f59f89218372d9f24c4193a179008> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x37ff9000 - 0x3802ffff  MIME armv7  <32427c81a9933c4796d1a37a88a3ac44> /System/Library/PrivateFrameworks/MIME.framework/MIME
0x3816b000 - 0x3824efff  libBLAS.dylib armv7  <56d8e00447133cd89457deec007327cb> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x383c7000 - 0x383e7fff  libxslt.1.dylib armv7  <7f6f63b31f333c41952f685fdd54a6cb> /usr/lib/libxslt.1.dylib
0x38427000 - 0x38472fff  libstdc++.6.dylib armv7  <55a7612b28c43cfcad7089b688591b80> /usr/lib/libstdc++.6.dylib
0x38473000 - 0x3847afff  XPCObjects armv7  <5bc4f7282e9d3945a6c1885217670667> /System/Library/PrivateFrameworks/XPCObjects.framework/XPCObjects
0x3847b000 - 0x3847efff  libmacho.dylib armv7  <2a9fe0b48f473d0f8fe2bf076cd12753> /usr/lib/system/libmacho.dylib
0x385c8000 - 0x38620fff  CoreLocation armv7  <3235bde1608331bebc291891405896c6> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x38648000 - 0x38649fff  CoreSurface armv7  <b3f9d4e8dd803a48b88c58a0663d92a3> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x38a6d000 - 0x38b20fff  EventKit armv7  <8dbff0bfcf833661827a76b9adb64d70> /System/Library/Frameworks/EventKit.framework/EventKit
0x38b28000 - 0x38b80fff  ManagedConfiguration armv7  <9d006173bfcc3001b45c44b8e78833ed> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x38bc6000 - 0x38bc8fff  TCC armv7  <f641dd0500fa3f0087d93da665ea84b8> /System/Library/PrivateFrameworks/TCC.framework/TCC
0x38bcf000 - 0x38bf2fff  MobileSync armv7  <986186369add34f1be231f5a47d2fd2c> /System/Library/PrivateFrameworks/MobileSync.framework/MobileSync
0x38c14000 - 0x38cecfff  StoreServices armv7  <9da3466c9cf13402a9f0412065f0ada7> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x38d16000 - 0x38e48fff  CoreFoundation armv7  <e30fc309df7b3c9f8ac57f0f6047d65f> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x38e49000 - 0x3925cfff  FaceCoreLight armv7  <0cb7a12beb3d32c1abd1834be8328b7c> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x39287000 - 0x3929cfff  libxpc.dylib armv7  <9fbb123276823c2383fc34b7a55404d7> /usr/lib/system/libxpc.dylib
0x3936b000 - 0x39372fff  libsystem_notify.dylib armv7  <6e39f8511ecc3c3489829714eb6fde12> /usr/lib/system/libsystem_notify.dylib
0x39373000 - 0x3938cfff  DictionaryServices armv7  <e1f8d258d02c344cb0d17cec31818d3f> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x3938d000 - 0x39390fff  libcache.dylib armv7  <e08b913e17753180b91728a8bd5dda7b> /usr/lib/system/libcache.dylib
0x393bc000 - 0x393c5fff  AssetsLibraryServices armv7  <e51cbfefefbc30b6b47d99739123033e> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x397d6000 - 0x397eefff  EAP8021X armv7  <034c653573c233f08edf67e516d66097> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x397ef000 - 0x397f3fff  IOSurface armv7  <1f598a3806073bdaa906c51dccc9429e> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x398ac000 - 0x398dffff  AppleAccount armv7  <2af09d814a5a382192613b68b9327d49> /System/Library/PrivateFrameworks/AppleAccount.framework/AppleAccount
0x399f8000 - 0x399f8fff  libgcc_s.1.dylib armv7  <b25697291f6237feb3458df23485a759> /usr/lib/libgcc_s.1.dylib
0x39a01000 - 0x39a0efff  ApplePushService armv7  <60dbc7ab243435e099e19bdd3fa83dbb> /System/Library/PrivateFrameworks/ApplePushService.framework/ApplePushService 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:53:19.320

主要提示是`EXC_BAD_ACCESS`，每当您的内存管理出现问题时，您几乎都会得到它。您正在尝试向已释放的实例发送消息，我的猜测是

```
ConsultsDB *consultDB = [[ConsultsDB alloc] init];
NSManagedObject *mgObject = (NSManagedObject *)[aryConsult objectAtIndex:i]; 
```

您是否检查过 mgObject 和 aryConsult 不是`nil`？

如果您使用异常断点，您也许可以获得更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:43:51.093

将您的应用程序和 .dSYM 文件（在您构建和运行应用程序时生成：）放在桌面上的文件夹中：

打开终端应用程序，然后像这样转到桌面上创建的文件夹

cd 桌面/（文件夹名称）

然后使用以下命令获取崩溃的行号：

atos -arch armv7 -o YourAppFile.app/'应用程序名称' MEMORY_LOCATION_OF_CRASH_IN_CRASH_LOG。

例如：atos -arch armv7 -o 'App Name.app'/'App Name' 0x00002fa4

它将在您的应用程序崩溃的代码中给出行号和函数名称。

与您的情况一样，线程 0 崩溃：

20 MedPRO 住院管理器 0x00002fa4 主 (main.m:14)

这是您的应用程序崩溃的堆栈中的最后一行，因此请使用“0x00002fa4”作为崩溃的内存位置

# java - 带有标题的 JTextArea？

> ID：12778363
> 
> 赞同：1
> 
> 时间：2012-10-08T08:58:04.740
> 
> 标签：java, swing, jtextarea, text-align

使用 JTextArea，我希望第一行是一个简单的文本（JTextArea 的标题）。

有没有办法让文本中心在第一行对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T14:44:51.373

我不认为你可以用一个简单的`JTextArea`. 您可能会考虑切换到[`JTextPane`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextPane.html)支持 HTML 标记的 . Java 教程[如何使用编辑器窗格和文本窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html)显示了一个示例。

或者，您可以在显示标题文本的位置`JLabel`上方添加一个。`JTextArea`

# drop-down-menu - 如何在 Shopify 中隐藏不可用的产品变体？

> ID：12778368
> 
> 赞同：3
> 
> 时间：2012-10-08T08:58:27.840
> 
> 标签：drop-down-menu, product, shopify, variants

[我正在尝试仅在此类](https://mygraduationfilmshop1.myshopify.com/products/graduation-dvd-1)产品的下拉列表中显示可用的产品变体。例如，假设您在第一个下拉菜单中选择 2012，它只会在第二个下拉菜单中显示可用的选项。如果您随后在第二个中选择了 7 月 25 日星期三，则它只会在第三个中显示可用的变体。此刻它会显示所有选项，并指出“我们不提供此组合中的产品”以表示不可用的选项。

到目前为止，我的`product.liquid`页面有以下代码：

```
<div class="col-7 product-description clearfix">
<h1>{{ product.title }}</h1>

{{ product.description }}
    {% include 'addthis' %}
    <br/><br/>

{% if product.available  %} 
    {% if product.variants.size > 1 %}
    <!-- If the product only has MULTIPLE OPTIONS -->
    <form action="/cart/add" method="post" class="product-variants">     
        <div id="options">
            <select id="product-select" name='id'>
                {% for variant in product.variants %}
                    <option value="{{ variant.id }}">{{ variant.title }}</option>
                {% endfor %}
            </select>
            <div class="select-wrapper">
              <label for="region">DVD Region</label>
              <select id="color" required>
                <option value="NTSC">NTSC</option>
                <option value="PAL/SECAM" selected="selected">PAL/SECAM</option>
              </select>
            </div>
            <p><a href="http://www.videouniversity.com/articles/world-wide-tv-standards/" target="_blank">Click Here</a> find out more about your region.</p>

        </div> <!-- options --> 

        <div class="price-field"></div>
        <input type="submit"  name="add" value="Add to cart" id="purchase" />
    </form>

{% else %}
    <!-- If the product only has ONE variant -->
    <form action="/cart/add" method="post" class="product-variants">     
        <div class="price-field"> {{ product.price | money }}</div>
        <input type="submit"  name="add" value="Add to cart" id="purchase" />
        <input  type="hidden" id="{{ variant.id }}" name="id" value="{{ product.variants[0].id }}" /> <!-- passes variant id -->
    </form>
{% endif %}

{% else %}
    <p>This product is not available</p>
{% endif %}  

</div><!-- .col-7 -->

<div class="col-5 last product-thumbs">
<ul>
{% for image in product.images %}
    {% if forloop.first %}
        <li class="featured-image" >
            <a class="zoom " href="{{ image | product_img_url: 'large' }}" title="{{ product.featured_image.alt | escape }}">
                <img  src="{{ image | product_img_url: 'large' }}" alt="{{ product.featured_image.alt | escape }}" />
            </a>
        </li>
        {% else %}
        <li>
            <a class="zoom" href="{{ image | product_img_url: 'large' }}" title="{{ image.alt | esacpe }}">
                <img class="" src="{{ image | product_img_url: 'small' }}" alt="{{ image.alt | escape }}" />
            </a>
        </li>
    {% endif %}
 {% endfor %}
</ul>
</div><!-- .col-5 -->

<script type="text/javascript">
// <![CDATA[  
var selectCallback = function(variant, selector) {
  if (variant && variant.available == true) {
    // selected a valid variant
    jQuery('#purchase').removeClass('disabled').removeAttr('disabled'); // remove unavailable class from add-to-cart button, and re-enable button
    jQuery('#purchase').fadeIn();
    jQuery('.price-field').html(Shopify.formatMoney(variant.price, "{{shop.money_with_currency_format}}"));  // update price field
  } else {
    // variant doesn't exist
    jQuery('#purchase').addClass('disabled').attr('disabled', 'disabled');      // set add-to-cart button to unavailable class and disable button
    jQuery('#purchase').fadeOut();
    var message = variant ? "Sold Out" : "We don't offer the product in this combination"; 
    jQuery('.price-field').text(message); // update price-field message
  }
};

// initialize multi selector for product      
jQuery(document).ready(function() {
  new Shopify.OptionSelectors("product-select", { product: {{ product | json }}, onVariantSelected: selectCallback });
   {% assign found_one_in_stock = false %}
  {% for variant in product.variants %}
    {% if variant.available and found_one_in_stock == false %}
      {% assign found_one_in_stock = true %}
      {% for option in product.options %}
        jQuery('.single-option-selector:eq(' + {{ forloop.index0 }} + ')').val({{ variant.options[forloop.index0] | json }}).trigger('change');
      {% endfor %}
    {% endif %}
  {% endfor %}
  $('#options div').addClass("selector-wrapper");
  {% if product.options.size == 1 %}
    $(".selector-wrapper").append("<label>{{ product.options.first }}</label>");
  {% endif %}
});   
// ]]>  
</script> 
```

有什么帮助吗？

# haskell - haskell 自己的数据类型 - 在数据类型定义中使用符号或数字

> ID：12778371
> 
> 赞同：3
> 
> 时间：2012-10-08T08:58:34.683
> 
> 标签：haskell, types, algebraic-data-types

根据数据类型的定义，我有一个问题：是否可以在定义中使用符号或数字？例如，如果我想为下等号创建一个数据类型，那么下面的代码当然可以工作

```
data Signs = Lo | Eq 
```

构造函数 Lo 代表“<”，构造函数 Eq 代表“=”。

但我不能使用“真实”的标志。例如以下代码将不起作用

```
data Signs = Lo "<" | Eq "=" 
type Signs = "<" | "="
type MyInt = '1' | '2'
data MyInt = One '1' | Two '2' 
```

所以我想知道是否有可能在定义中使用“真实”的符号和数字。如果有的话，如果你能告诉我它是如何工作的，那就太好了。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:18:01.543

Operator identifiers prefixed with `:` can be used in data constructors.

```
data Signs = (:<) | (:=) 
```

if they are nullary then AFAIK you have to keep the parens:

```
[(:<), (:=)] 
```

You can use numbers but the first character must be an uppercase letter.

```
data MyInt = N1 | N2 
```

See [http://www.haskell.org/onlinereport/lexemes.html](http://www.haskell.org/onlinereport/lexemes.html)

# python - Python 进程内存和 Memcache 内存。python是使用内存地址还是复制数据？

> ID：12778380
> 
> 赞同：0
> 
> 时间：2012-10-08T08:59:18.593
> 
> 标签：python, memory, memcached, shared

情况 - 我有两台电脑，第一台有 python，第二台有 memcache。memcache 中有一些键，它引用内存中大小约为 1 GB 的对象。如果我从 python 访问该对象并想要运行，这是否意味着 python 进程会将整个对象复制到本地内存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:37:16.850

是的，它确实。请注意，memcached 人员不建议存储任何大于 1 兆字节的内容，因此您远远高于该建议。

# django - 一个模型字段如何从另一个模型字段获取数据？

> ID：12778389
> 
> 赞同：1
> 
> 时间：2012-10-08T08:59:51.120
> 
> 标签：django, django-models

我有一个模型，我在其中指定了某些字段。

```
class Upload_files(models.Model):
    title           =models.CharField(max_length=100, blank=True , null=True)
    image           =models.ImageField(upload_to='images')
    attributes      =models.ForeignKey(Product_attributes, blank=True , null=True)
    value           =models.CharField(max_length=100, blank=True , null=True)
    price           =models.CharField(max_length=100, blank=True , null=True)

    def __unicode__(self):
            return unicode(self.id) 
```

现在我想创建另一个只有三个字段（上传 id、属性 id 和值）的表。这些字段必须取上表中的值，即upload_id，我在上面选择的属性以及该值，并且只能从管理面板读取。

我使用了以下代码

```
class Product_values(models.Model):
    product         =models.ForeignKey(Upload_files, blank=True , null=True)
    attributes      =models.ForeignKey(Product_attributes, blank=True , null=True)
    value           =models.CharField(max_length=100, blank=True , null=True)
    def __unicode__(self):
            return unicode(self.product) 
```

我知道不像我说的那样工作，但我该怎么做，所以值和属性字段默认采用我在upload_files模型中定义的值。

**编辑**

我只是希望当我从管理面板在 upload_files 模型中插入值时，在另一个表中创建一个上传文件的实例，其中包含我之前定义的上传 id、属性和值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:37:07.650

使用[post_save 信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)，并编写并连接一个接收器函数来创建 Product_values 条目，如下所示：

```
def create_product_entry(sender, instance, created, **kwargs):
    # enter your code here

post_save.connect(create_product_entry, sender=Upload_files) 
```

# .htaccess - htaccess DirectoryIndex 不服从

> ID：12778393
> 
> 赞同：0
> 
> 时间：2012-10-08T09:00:12.117
> 
> 标签：.htaccess, directoryindex

```
DirectoryIndex index.html index.htm index.php 
```

这应该使用 html 然后 php 作为目录索引，它确实如此。但是当我在 url 中手动键入 index.php 时，我被重定向到 index.html。这可以避免吗？

如果我删除 .htaccess 文件 index.php 成为默认值，所以我猜服务器正在阅读说明，但没有像我预期的那样遵守它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:03:54.177

检查 .htaccess 在当前文件夹之前的文件夹中是否不存在，具有不同的配置推翻您当前的配置。确保您的主机或 apache 配置允许此类更改。

这是另一个带有一些建议的链接： [http ://www.webhostingtalk.com/showthread.php?t=908206](http://www.webhostingtalk.com/showthread.php?t=908206)

希望这可以帮助

# ios - ObjC++ 不通过引用捕获异常吗？

> ID：12778410
> 
> 赞同：3
> 
> 时间：2012-10-08T09:00:58.223
> 
> 标签：ios, ios6

我在 ObjC++ 包装器类 (.mm) 中使用以下代码，我注意到如果我通过引用捕获代码会随机失败并出现 EXC_BAD_ACCESS。另一方面，如果我捕捉到对象（“std::runtime_error 错误”），它似乎没问题。

我是 ObjC 的新手，我知道 ObjC 中不使用引用，但我希望编译器在这种情况下能够正常工作。我错过了什么吗？

```
catch(std::runtime_error &error) {
    dispatch_async(dispatch_get_main_queue(), ^{
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:[NSString stringWithCString:error.what() encoding:[NSString defaultCStringEncoding]]
                                                       delegate:nil
                                              cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:49:54.297

ObjC++ 必须理解 C++ 引用。

问题是您的程序异步读取另一个线程的内存。据我所知，该线程已经退出并且它的堆栈内存连同它一起，或者堆栈内存在线程继续执行时被覆盖 - 因此，`EXC_BAD_ACCESS`（作为*一种*可能的解释）。

# android - 无法获取小部件的 SharedPreferences

> ID：12778416
> 
> 赞同：0
> 
> 时间：2012-10-08T09:01:41.900
> 
> 标签：android, widget, sharedpreferences

我想开发一个小部件...但是在将字符串从 AppWidgetProvider 传递给小部件时遇到问题...我通过共享首选项执行此操作

当我在 SharedPreferences 中存储一个变量时，问题就出现了，当我尝试获取它的值时，它返回的不是空值，而是这样的：“”

尽管 WidgetPrefs.xml 中存在该变量，但返回此值，我认为 prefs 变量有错误，但我不确定

这是 WidgetConfig 的代码：

```
public class ActivityWidgetConfig extends Activity implements OnClickListener{

private int widgetId = 0;

private String titlestring;
private String textstring;

private EditText etTitle;
private EditText etText;

private ImageButton btnTitle;
private ImageButton btnText;

private ImageView previewIcon;

private Button iconButton;
private Button createButton;

private int icon_id;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_widgetconfig);

    Intent intentOrigen = getIntent();
    Bundle params = intentOrigen.getExtras();

    widgetId = params.getInt(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);

    setResult(RESULT_CANCELED);

    etTitle = (EditText) findViewById(R.id.etTitle);
    etText = (EditText) findViewById(R.id.etText);
    btnTitle = (ImageButton) findViewById(R.id.btnTitle);
    btnText = (ImageButton) findViewById(R.id.btnText);
    createButton = (Button)findViewById(R.id.createButton);
    iconButton = (Button)findViewById(R.id.iconButton);

    btnTitle.setOnClickListener(this);
    btnText.setOnClickListener(this);
    createButton.setOnClickListener(this);
    iconButton.setOnClickListener(this);

    SharedPreferences prefs = getSharedPreferences("WidgetPrefs", Context.MODE_PRIVATE);
    titlestring = prefs.getString("widgettitle", "");
    textstring = prefs.getString("widgettext", "");
    icon_id = prefs.getInt("widgeticon_id", android.R.drawable.stat_sys_warning);

    etTitle.setText(titlestring);
    etText.setText(textstring);

    previewIcon = (ImageView) findViewById(R.id.previewIcon);
    previewIcon.setImageResource(icon_id);

}

@Override
public void onClick(View v) {
    SharedPreferences prefs = getSharedPreferences("WidgetPrefs", Context.MODE_PRIVATE);
    Editor editor = prefs.edit();
    switch (v.getId()){
        case R.id.btnTitle:
            editor.remove("widgettitle");
            editor.commit();
            etTitle.setText("");
            break;
        case R.id.btnText:
            editor.remove("widgettext");
            editor.commit();
            etText.setText("");
            break;
        case R.id.createButton:
            editor.putString("widgettitle", titlestring);  
            final String textstring=etText.getText().toString();
            editor.putString("widgettext", textstring);
            editor.putInt("widgeticon_id", icon_id);
            editor.commit();

            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(ActivityWidgetConfig.this);
            WidgetOne.updateWidget(ActivityWidgetConfig.this, appWidgetManager, widgetId);
            Intent resultado = new Intent();
            resultado.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);
            setResult(RESULT_OK, resultado);
            finish();
            break;
        case R.id.iconButton:
            Intent i = new Intent(this, ActivityIcons.class); 
            startActivityForResult(i, 1);
            break;
    }
}
 } 
```

这是小部件的代码：

```
public class WidgetOne extends AppWidgetProvider {
@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        for (int i = 0; i < appWidgetIds.length; i++) 
        {
            //ID del widget actual
            int widgetId = appWidgetIds[i];

            //Actualizamos el widget actual
            //updateWidget(context, appWidgetManager, widgetId);
        }

}

@Override
public void onReceive(Context context, Intent intent) {

    if (intent.getAction().equals("com.iamaner.ACTUALIZAR_WIDGET")) {

//          //Obtenemos el widget manager y la lista de IDs de nuestro widget
//          ComponentName wgt = 
//              new ComponentName(context, MiWidget.class);
//          
//          AppWidgetManager widgetManager =
//              AppWidgetManager.getInstance(context);
//          
//          int[] appWidgetIds = widgetManager.getAppWidgetIds(wgt);
//          
//          //Actualizamos todos los widgets
//          for(int i=0; i<appWidgetIds.length; i++)
//              actualizarWidget(context, widgetManager, appWidgetIds[i]);

        //Obtenemos el ID del widget a actualizar
        int widgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);

        //Obtenemos el widget manager de nuestro contexto
        AppWidgetManager widgetManager = AppWidgetManager.getInstance(context);

        //Actualizamos el widget
        //if (widgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
        //  actualizarWidget(context, widgetManager, widgetId);
        //}
    }

    super.onReceive(context, intent);
}

public static void updateWidget(Context context, AppWidgetManager appWidgetManager, int widgetId)
{
    SharedPreferences prefs = context.getSharedPreferences("WidgetPrefs", Context.MODE_PRIVATE);
    RemoteViews controles = new RemoteViews(context.getPackageName(), R.layout.widget_1);

    //Asociamos los 'eventos' al widget
    Intent intent = new Intent("com.iamaner.ACTUALIZAR_WIDGET");
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetId);

    controles.setTextViewText(R.id.txtMensaje, prefs.getString("widgettitle", ""));
    controles.setTextViewText(R.id.txtMensaje, prefs.getString("widgetext", ""));

    controles.setImageViewResource(R.id.ivIcon, icon_id);

    appWidgetManager.updateAppWidget(widgetId, controles);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T11:22:18.877

没关系，问题是我为 sharedpreferences 字符串分配了不同的名称......

通过在 Widget 类中执行此操作来解决它：

```
prefs.getString("widgettext",""); 
```

# c++ - 当我的项目结束时，Windows“紧急停止”声音

> ID：12778421
> 
> 赞同：2
> 
> 时间：2012-10-08T09:02:05.503
> 
> 标签：c++, debugging, openal

我正在创建一个游戏引擎（visual c++，opengl，...），它已经走了很长一段路。我特别致力于内存安全和内存管理。引擎的每个部分都是在单独的项目中创建的，因此它们不会相互影响，直到我确定它们没问题，然后我将它们集成到引擎中。

最近，我使用 OpenAL 创建了一个声音引擎，如果该项目关闭，我会听到映射到“关键停止”的 windows 声音。屏幕上没有弹出错误，程序似乎正常退出。

我应该从哪里/如何开始搜索以找到导致这种情况的原因？这可能是什么原因造成的？

编辑：我刚刚注意到，在调试时，我最终在 _tWinMain 中出现“返回 0”，调试日志显示：“退出代码 3”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:34:23.450

我的通灵调试能力（以及类似的经验）告诉我，您在关机期间（例如，在静态对象的析构函数中）遇到了断言失败（或尝试弹出 CRT 调试对话框的其他机制）。关闭已进展到无法创建对话框的程度。哔声伴随着对话框，退出代码 3 是断言失败可以返回的值之一。

如果您在调试器中运行，我想您会在“输出”窗口中看到原本用于对话框的断言失败。如果没有，您可能必须使用[_CrtDebugReport](http://msdn.microsoft.com/en-us/library/8hyw4sy7%28v=vs.100%29.aspx)调整 CRT 调试消息的目标。

# database - Yii : 多个数据库连接失败

> ID：12778422
> 
> 赞同：2
> 
> 时间：2012-10-08T09:02:06.280
> 
> 标签：database, yii, multiple-databases

我阅读了 yii 文档，下面的代码应该可以工作；

好吧，它没有。:))

db 是主数据库

db1 和 db2 是辅助数据库

这里有什么问题？

该网站在线，位于`www.linkbook.co`，但无法连接到任何数据库

```
'db' => array(
    'connectionString' => 'mysql:host=localhost;dbname=linkbookco',
    'emulatePrepare' => true,
    'username' => 'user',
    'password' => 'password',
    'charset' => 'utf8',
    'tablePrefix' => '',
),

    'db1' => array(
    'connectionString' => 'mysql:host=localhost;dbname=linkbookco1',
    'username'         => 'user',
    'password' => 'password',
    'charset' => 'utf8',
    'tablePrefix' => '',
    'class'            => 'CDbConnection'          // DO NOT FORGET THIS!
),

    'db2' => array(
    'connectionString' => 'mysql:host=localhost;dbname=linkbookco2',
    'username'         => 'user',
    'password' => 'password',
    'charset' => 'utf8',
    'tablePrefix' => '',
    'class'            => 'CDbConnection'          // DO NOT FORGET THIS!
), 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:45:23.247

`db`是 的预定义组件`Yii`，因此默认`CActiveRecord`使用`db`. 因此，对于您使用`CDbConnection`类创建的其他组件，您必须在外部激活它们的连接。

所以你需要覆盖`getDbConnection()`.`CActiveRecord`

扩展`CActiveRecord`特定数据库连接，如`db1`. 将此另存为`Db1CActiveRecord.php`并放置在组件目录中。

```
<?php
/**
 * 
 * Used for db1 database connection
 *
 */
class Db1CActiveRecord extends CActiveRecord {

    private static $db1 = null;

    public function getDbConnection()
    {
        if (self::$db1 !== null)
            return self::$db1;
        else
        {
            self::$db1 = Yii::app()->db1;
            if (self::$db1 instanceof CDbConnection)
            {
                self::$db1->setActive(true);
                return self::$db1;
            }
            else
                throw new CDbException(Yii::t('yii','Active Record requires a "db" CDbConnection application component.'));
        }
    }
} 
```

现在您需要使用`Db1CActiveRecord`数据库的模型类`db1`。像：

```
class Db1Model extends Db1CActiveRecord{
   ......
} 
```

为 db1 和 db2 数据库实现这种方式。

# java - 转到Java中for语句的开头

> ID：12778428
> 
> 赞同：0
> 
> 时间：2012-10-08T09:02:28.247
> 
> 标签：java

我对 Java 很陌生，也许我的问题有点烦人。

我的代码中有两个循环，我想通过-语句`for`转到每个循环的开头。`for``else`

```
public static void main(String[] args)
{
    int[][] x=new int[1000][1000];

    int[] Z=new int[1000];

    lable1:
        for(int i=1; i<=1000; i++)
        {
            Z[i]=rand1.nextInt(1000);
            System.out.println("Z["+i +"] = " + Z[i] );

            if(Z[i]>0 && Z[i]<=Nk)
            {
                int Z1=Z[i]-1;
                lable2:         
                    for(int j = 1; j<=Z1;j++ )
                    {
                        x[i][j]= rand2.nextInt(1000);
                        sum+=x[i][j];
                        if( sum<1000)
                        {
                            x[i][(j+1)]=1000-sum;
                            System.out.println("x[" + i+"][" + j + "] = " + x[i][j]);
                            System.out.println("Nx[" + i+"][" + (j+1) + "] = " +x[i][(j+1)]);
                        }
                        else{
                            // ????
                            //Goto lable2;
                        }
                    }
            }
            else{
                //goto label1;
                // ????
            } 
        }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:04:39.897

您可以`break`使用以下方法对任何定义的标签（范围内）：

```
break label; 
```

同样适用于`continue`。

[这](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)是要读的东西。

在您的特定示例中，删除`else`s 可以满足您的要求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:09:19.927

给你：

```
public static void main(String[] args) {
        int[][] x = new int[1000][1000];

        int[] Z = new int[1000];

        boolean resetOuterCycle = true;

        for (int i = 0; i < 1000; i++) {
            Z[i] = rand1.nextInt(1000);
            System.out.println("Z[" + i + "] = " + Z[i]);

            if (Z[i] > 0 && Z[i] <= Nk) {
                int Z1 = Z[i] - 1;

                boolean resetInnerCycle = true;

                for (int j = 0; j < Z1; j++) {
                    x[i][j] = rand2.nextInt(1000);
                    sum += x[i][j];
                    if (sum < 1000) {
                        x[i][(j + 1)] = 1000 - sum;
                        System.out.println("x[" + i + "][" + j + "] = " + x[i][j]);
                        System.out.println("Nx[" + i + "][" + (j + 1) + "] = " + x[i][(j + 1)]);
                    } else if (resetInnerCycle) {
                        j = 0;
                        resetInnerCycle = false;
                    }
                }
            } else if (resetOuterCycle) {
                i = 0;
                resetOuterCycle = false;
            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T09:06:37.650

只需使用`continue`关键字..它将继续下一次迭代..**无需标记您的循环**..因为您没有从内部循环继续外部循环..或者，如果您想`continue`使用外部循环，您可以使用`continue`with一个**标签**...

你应该使用你的 for 循环`j = 0 to j < z1`..

```
for(int j = 0; j < Z1;j++ ) {    
      if( sum<1000) {
           x[i][(j+1)]=1000-sum;
           System.out.println("x[" + i+"][" + j + "] = " + x[i][j]);
           System.out.println("Nx[" + i+"][" + (j+1) + "] = " +x[i][(j+1)]);
       }
       else{  // Not needed if your else does not contain anything else..
           continue;
       }
} 
```

事实上你根本不需要一个**`else`块**..如果你不做任何进一步的处理..

只需将其删除..它会自动进入您的循环..

**建议**： - 您应该使用编码约定.. 变量名以`lowercase letter`或`underscore`.. 开头（Z1 -> z1）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:43:25.947

**-**在您上面的代码中，您可以使用 2 种方法来做到这一点......

**第一种方法：**没有`else`部分

```
for (int i = 0; i < 1000; i++) {

   if (Z[i] > 0 && Z[i] <= Nk){
    for (int j = 0; j < Z1; j++) {

          if(sum < 1000){

         }
      }
    }
  } 
```

**第二种方法：**`else`部分和`continue`

```
for (int i = 0; i < 1000; i++) {

   if (Z[i] > 0 && Z[i] <= Nk){

    for (int j = 0; j < Z1; j++) {

              if(sum < 1000){

             }else{

                  continue;

             }
          }
       }else{

               continue;

        }
   } 
```

# c - 使用 makefile 创建单元测试

> ID：12778430
> 
> 赞同：1
> 
> 时间：2012-10-08T09:02:31.307
> 
> 标签：c, unit-testing, makefile

```
gcc 4.7.2
c89 
```

你好，

我想知道是否有人知道任何涵盖使用makefile为我的c程序创建一些简单单元测试的教程或教科书。

我想运行一些自动化测试来创建一个测试套件并将其添加到我的 Makefile 中。

只是想要一些关于如何开始的想法。

非常感谢您的任何建议

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-09T02:06:53.140

确实是的，不到 30 行的 [makefile](/questions/tagged/makefile "显示标记为“makefile”的问题")就可以构建一个通用的单元测试引擎。

请注意，我为测试[gawk](/questions/tagged/gawk "显示标记为“gawk”的问题")和[lisp](/questions/tagged/lisp "显示标记为“lisp”的问题")脚本编写了以下内容，但可以轻松地为[c](/questions/tagged/c "显示标记为“c”的问题")定制它。实际上，恕我直言，整个事情都是[shell](/questions/tagged/shell "显示标记为“外壳”的问题")脚本功能的一个很好的例子。

首先，您将所有测试都是可执行文件放在一些`$Testdir`. 在这个例子中，所有的测试都有文件名`001` `002`等（没有扩展名）。

接下来，您需要一些设置的东西：

```
Here=$(PWD)
Testdir=$(Here)/eg
ready:  $(Testdir) $(Tmp)
$(Tmp) :
        @ - [ ! -d $(Tmp) ] && mkdir $(Tmp) 
```

然后您需要将所有测试收集到一个名为的列表中`$Tests`

```
Tests:=$(shell cd $(Testdir); ls  | egrep '^[0-9]+$$' | sort -n  ) 
```

（注意使用`:=`. The 是一个轻微的优化，构建`$Tests`一次，多次使用。）

`$(X)`我列表中的每个文件`$Tests`都可以通过两种方式执行。首先，你可以`run`做到。其次，您可以运行它并将`cache`结果保存在`$(X).want`.

```
run : ready $(Testdir)/$(X)
        @echo $X 2>&1
        @cat $(Testdir)/$(X) | $(Run)  

cache : ready
       @$(MAKE) run | tee $(Testdir)/$X.want
       @echo new test result cached to $(Testdir)/$X.want 
```

`cache`一旦测试准备好并产生正确的输出，我就会得到一个测试结果。

实际执行由一个名为`$(Run)`. 这是您必须专门为正在测试的语言编写的内容。作为记录，我正在测试 Gawk 脚本，所以我`$(Run)`的脚本如下（您可以将其更改为您需要的任何内容）。

```
Run= gawk -f mycode.awk 
```

一旦完成，然后运行一个测试，我只需将运行后得到`$(X)`的结果与缓存副本进行比较：

```
test : ready $(Testdir)/$(X).want
      @$(MAKE) run > $(Tmp)/$X.got 
      @if diff -s $(Tmp)/$X.got $(Testdir)/$X.want > /dev/null;  \
        then echo PASSED $X ; \
        else echo FAILED $X,  got $(Tmp)/$X.got; \
        fi 
```

这就是我运行所有测试的方式：

```
tests:;  @$(foreach x, $(Tests), $(MAKE) X=$x test;) 
```

您还可以对所有当前输出进行批量缓存（警告：除非您的测试当前正在生成正确的输出，否则不要这样做）：

```
cache :
        @$(foreach x, $(Tests), $(MAKE) X=$x cache;) 
```

最后，如果您愿意，您还可以获得 PASSED 和 FAILED 的最终分数：

```
score :
       @$(MAKE) tests | cut -d\  -f 1 | egrep '(PASSED|FAILED)' | sort | uniq -c 
```

就是这样：正如所承诺的 - Make 中的通用单元工具，不到 30 行。分享和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:18:09.517

## 生成测试函数片段

`gccxml`在和的帮助下生成函数片段很容易`nm`。`generate_snippets.sh`可以使用一个命令行参数调用以下 bash 脚本，为源文件中定义的每个函数生成一个测试函数片段：

```
#!/bin/bash
#
# Generate stub functions for one file
#

# # Initialize
FILE=$1

[ ! -e "$FILE" ] && echo "file doesn't exist" && exit -1

# # Compile
OBJECT=$(mktemp)
gcc -c $FILE -o $OBJECT

# # Get Functions

# ## Get all symbols in the text sections
Y=$(mktemp)
nm $OBJECT | grep " T " | awk '{print $3;}' | sort > $Y

# ## Get functions defined in the file (including #includes)
# get all functions defined in the compilation unit of $FILE, excluding included
# dynamically linked functions

XML=$(mktemp)
X=$(mktemp)
gccxml $FILE -fxml=$XML
grep "<Function" $XML | sed 's/^.*name="\([^"]*\).*/\1/g' | sort > $X

# ## get the common lines
# This is done to get those functions which are defined in the source file and end up in
# the compiled object file.
COMMON=$(comm $Y $X -1 -2)

# # Create stubs
for func in $COMMON;
do
    cat <<_
// Test stub for $func. Returns 1 if it fails.
char test_$func() {
    return 1;
}
_

done

# # Clean up

rm $OBJECT $XML $X $Y 
```

### 待办事项

剧本还不完善。您可能应该包含一个测试，只为那些尚未测试的函数生成测试函数。由于这类似于查找`$X`和之间的常用名称`$Y`，因此我将其留作练习。实现这一点后，从 Makefile 运行此脚本是有意义的。请参阅其他答案以获取有关指示。

## 示例用法

考虑 C 文件`hello.c`：

```
#include <stdio.h>

int foo();
int bar();

int main() {
    printf("hello, world\n");
    return 0;
}

int foo() {
    printf("nothing\n");
    return 1;
}

int bar() {
    printf("still nothing\n");
    return 1;
} 
```

将此文件作为输入运行上面的脚本会产生以下输出：

```
// Test stub for bar. Returns 1 if it fails.
char test_bar() {
    return 1;
}
// Test stub for foo. Returns 1 if it fails.
char test_foo() {
    return 1;
}
// Test stub for main. Returns 1 if it fails.
char test_main() {
    return 1;
} 
```

只需将这些片段放入适当的文件中，并根据需要用逻辑填充它们。之后，编译测试套件并运行它。

# javascript - 检测 window.innerHeight 的计时问题

> ID：12778434
> 
> 赞同：0
> 
> 时间：2012-10-08T09:02:49.897
> 
> 标签：javascript

我有一个页面，我使用另一个页面的 window.open 作为弹出窗口打开；此时，`window.open`调用为弹出页面指定给定的高度和宽度。

在弹出页面中，我使用`window.innerHeight`和`window.innerWidth`（以及类似的跨浏览器兼容性）检测可用的屏幕尺寸。

```
window.onload = function() { 
   if (window.innerWidth && window.innerHeight) { 
      ww = window.innerWidth; wh = window.innerHeight; 
   } ` 
```

如果使用以下方法打开弹出窗口，这有时会失败：

```
newHeight = 400; 
newWidth = 400; 
window.open("popup.html", "", "height=" + newHeight + ",width=" + newWidth); 
```

我遇到的问题是我有时会遇到高度/宽度检测的时间问题；在某些情况下，返回的高度/宽度不是弹出窗口设置的值，而是一些其他值（它看起来像打开窗口的值）。

似乎`window.innerHeight`在强制执行弹出窗口的高度/宽度设置之前检测到。

通常，在弹出窗口中，我会检测`window.onload`函数中的高度和宽度。我相信这可能是一个时间问题，因为如果我添加 30 毫秒的超时延迟，问题就会消失，而延迟更短，问题可能仍然会发生。

问题：在打开的窗口中是否有一个事件可以确保我`window.open`已应用开瓶器的高度/宽度设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:09:39.480

有时`load`事件会在真正加载所有内容（例如字体声明）之前触发，尝试...

```
document.onreadystatechange = function() {
  if (document.readystate === 'complete') {
     var ww = window.innerWidth; 
     var wh = window.innerHeight;
  }
} 
```

# c# - 如果它在本地堆上分配，为什么叫 Marshal.AllocHGlobal？

> ID：12778435
> 
> 赞同：5
> 
> 时间：2012-10-08T09:03:00.600
> 
> 标签：c#, winapi, memory-management, marshalling

来自 MSDN 文档[`Marshal.AllocHGlobal`](http://msdn.microsoft.com/en-us/library/s69bkh17.aspx)：

> AllocHGlobal 是 Marshal 类中的两种内存分配方法之一。此方法从 Kernel32.dll 公开 Win32 LocalAlloc 函数。

~~*考虑到有一个 GlobalAlloc API 在全局*堆上分配内存，而不是在*本地*堆上，~~这个方法的名称是不是很容易产生误导？

命名它是有原因的`AllocHGlobal`，而不是`AllocHLocal`？

**更新：** Simon 在评论中指出，Windows 中不再有全局堆之类的东西，`GlobalAlloc`并且`LocalAlloc`API 仅用于遗留目的。如今，`GlobalAlloc`API 只不过是`LocalAlloc`.

这解释了为什么 API 根本不调用`GlobalAlloc`，但没有解释为什么 API 在`AllocHGlobal`不（不能）使用全局堆时命名，甚至不调用`GlobalAlloc`. 命名不可能是出于遗留原因，因为它直到 .NET 2.0 才引入，在 16 位支持被删除之后。所以，问题仍然存在：为什么会`Marshal.AllocHGlobal`如此误导性地命名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T10:02:32.490

假设您正在使用拖放或剪贴板在应用程序之间进行数据传输。要填充[`STGMEDIUM`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683812%28v=vs.85%29.aspx)结构，您需要一个`HGLOBAL`. 所以你打电话`AllocHGlobal`。由此得名。

此函数的主要用途是与需要`HGLOBAL`. 如果它被称为其他任何东西会令人困惑，因为当您想要 an 时，`HGLOBAL`您必须找到一些文档来告诉您`AllocAnythingElse`产生的值可以用作`HGLOBAL`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:21:26.120

这可以追溯到 Windows 版本 3 的旧时代。当时有一个“默认堆”的概念，即从中分配的 GlobalAlloc() api 函数。从该堆分配的内存可以在所有进程之间共享。

这在 32 位版本的 Windows 中发生了变化，进程不能再通过堆共享内存。这使得术语“全局堆”和“本地堆”变得毫无意义。还有一个默认堆的概念，即“进程堆”。GlobalAlloc() 现在从该堆分配。但它不能跨进程边界共享。GlobalAlloc 和 Marshal.AllocHGlobal 的实际实现使用 LocalAlloc() api 函数。另一个 Windows 3 保留，更恰当地命名为这些天发生的事情。它又在 32 位 Windows 上使用 HeapAlloc() 和 GetProcessHeap()。

同意使用堆是一个重要的互操作问题。这在您调用的编写不佳的 C 代码中经常出错。任何返回指向需要由调用者释放的已分配内存的指针的此类代码通常由于内存泄漏或访问冲突而失败。此类 C 代码使用 malloc() 函数从其自己的堆中分配。这是由 C 运行时库创建的私有堆。你没有希望释放这样的内存，你不知道使用了什么堆，也没有办法获得 CRT 堆的句柄。

只有当 C 代码使用众所周知的堆时，这才能有好的结果。就像进程堆一样。或 CoTaskMemAlloc()，由 COM 代码使用。另一个是元帅级的。请注意，pinvoke 编组器总是在必要时使用 CoTaskMemFree() 释放内存。如果没有使用 CoTaskMemAlloc() 分配内存，那么这在 Vista 及更高版本上是一个 kaboom，这是 XP 上的无声泄漏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-25T12:01:07.793

我认为您应该阅读[https://msdn.microsoft.com/en-us/library/ms810603.aspx](https://msdn.microsoft.com/en-us/library/ms810603.aspx)

一小部分：

> 全局和局部内存功能 乍一看，Windows 中存在局部和全局内存管理功能纯粹是为了向后兼容 Windows 3.1 版。这可能是真的，但是这些函数的管理与下面讨论的新堆函数一样有效。事实上，从 16 位 Windows 移植应用程序并不一定包括从全局和本地内存功能迁移到堆内存功能。全局和本地功能提供相同的基本功能（然后是一些功能），并且使用起来同样快速。如果有的话，使用它们可能更方便，因为您不必跟踪堆句柄。
> 
> 尽管如此，这些功能的实现与 16 位 Windows 不同。16 位 Windows 有一个全局堆，每个应用程序都有一个本地堆。这两个堆管理器实现了全局和局部功能。通过 GlobalAlloc 分配内存意味着从全局堆中检索一块内存，而 LocalAlloc 从本地堆中分配内存。Windows 现在为这两种类型的函数提供了一个单一的堆——上面描述的默认堆。
> 
> 现在您可能想知道本地函数和全局函数本身之间是否有任何区别。好吧，答案是否定的，它们现在是一样的。事实上，它们是可以互换的。通过调用 LocalAlloc 分配的内存可以使用 GlobalReAlloc 重新分配，然后由 LocalLock 锁定。下表列出了现在可用的全局和局部函数。
> 
> 拥有两组执行完全相同的函数似乎是多余的，但这就是向后兼容性的用武之地。以前在 16 位 Windows 应用程序中使用全局函数还是局部函数现在都无关紧要了——它们同样有效.

ETC...

在过去，内存也非常昂贵。还可以查看 PostScript 语言参考手册，它可能会让您对本地/全局内存的使用有一个很好的了解。

# c++ - TCP Socket 块函数分段错误，由移动 if 语句引起

> ID：12778437
> 
> 赞同：1
> 
> 时间：2012-10-08T09:03:02.680
> 
> 标签：c++, sockets, segmentation-fault

这是我在这个网站上的第一个问题，在我的 C++ 编码中多次使用它来帮助我。

我只是问，因为我碰壁了，只是不明白发生了什么，并认为这是一个很好的小谜，有人来解决。

我有一个客户端/服务器架构，有 1 个服务器和多个客户端。

下面的代码片段工作正常，除了阻塞的唯一套接字是 mList 中的最后一个，因此如果连接了 2 个客户端，则只有第二个要连接的客户端接收数据。这段代码不是我自己的，我正在尝试调试移动 if 语句时发生的分段错误。

```
int SocketManager::block(int secs, int usecs)
{
int ret = 0;
int result = 0;
struct timeval tv;
fd_set set;
int max_sd = 0;

if (mList.empty())
{
  return -1;
}

tv.tv_sec = secs;
tv.tv_usec = usecs;

FD_ZERO(&set);

SocketList::const_iterator iter;
int n = 0;

for (iter = mList.begin(); iter != mList.end(); iter++)
{
  if ((*iter)->socket() > max_sd)
  {
    max_sd = (*iter)->socket();
  }

  FD_SET((*iter)->socket(), &set);
  n++;
}

errno = 0;
if ((result = select(max_sd + 1, &set, NULL, NULL, &tv)) > 0)
{
  ret = 1;
  Socket *s = NULL;
  for (iter = mList.begin(); iter != mList.end(); iter++)
  {
    if (FD_ISSET((*iter)->socket(), &set))
    {
      s = (*iter);
    }
  }

  if (s)
  {
    mLastSocketPtr = s;
    s->checkForData();
    mLastSocketPtr = NULL;
  }
}
else if (result == 0)
{
  // Timeout
  ret = 0;
}
else
{
  // Error
  ret = -1;
}

return ret;
} 
```

问题出现在“if (FD_ISSET((*iter)->socket(), &set))”这一行，当 if 语句

```
if (s)
{
  mLastSocketPtr = s;
  s->checkForData();
  mLastSocketPtr = NULL;
} 
```

像这样在 FD_ISSET 函数内部移动

```
for (iter = mList.begin(); iter != mList.end(); iter++)
      {
        if (FD_ISSET((*iter)->socket(), &set))
        {
          s = (*iter);
          if (s)
          {
            mLastSocketPtr = s;
            s->checkForData();
            mLastSocketPtr = NULL;
          }
        }
      } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:09:44.073

最有可能的问题是`mList`您在遍历它时正在修改。通过`checkForData`在循环内部移动，不允许对内部进行`for`任何修改，因为它会使您将要递增和取消引用的迭代器无效。`mList``checkForData`

有很多方法可以修复此代码。最好的方法是不要一开始就写这样的代码，但我猜那艘船已经航行了。这里有一些建议：

1）通过`FD_SET`而不是通过`mList`。对于您在 中找到的每个匹配`FD_SET`项，在 中找到相应的条目`mList`。这样，您将经历一些不会改变的事情。

2) 当你在 中被击中时`FD_SET`，清除 中的标志`FD_SET`。重新`for`调用`begin`.

3) 遍历列表一次，并制作`vector`所有需要处理的套接字。然后遍历该向量以调用`checkForData`.

这是显示方法2的丑陋修复：

```
for (iter = mList.begin(); iter != mList.end(); iter++)
  {
    if (FD_ISSET((*iter)->socket(), &set))
    {
      s = (*iter);
      FD_CLR(s->socket(), &set); // don't find this again
      mLastSocketPtr = s;
      s->checkForData();
      mLastSocketPtr = NULL;
      iter = mList.begin(); // make the iterator valid
      continue; // don't increment the iterator
    }
  } 
```

# c# - 在 C# 中创建动态字符串数组并通过循环将字符串（拆分方法的结果）添加到两个单独的数组中

> ID：12778438
> 
> 赞同：2
> 
> 时间：2012-10-08T09:03:06.997
> 
> 标签：c#, arrays, string, list, split

我有一个字符串列表，其中包含以下格式的字符串：xx@yy

```
xx = feature name

yy = project name 
```

基本上，我想在 @ 处拆分这些字符串并将 xx 部分存储在一个字符串数组中，将 yy 部分存储在另一个字符串数组中以进行进一步的操作。

```
string[] featureNames = all xx here

string[] projectNames = all yy here 
```

我可以在 C# 中的 foreach 或 for 循环中使用 split 方法 (string.split('@')) 拆分字符串，但我不能将两个部分分别存储在两个不同的字符串数组中（不一定是数组，而是列表也可以工作，因为稍后可以将其转换为数组）。

主要问题是在拆分后确定字符串的两个部分，然后将它们分别附加到字符串数组中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:07:11.300

这是一种简单的方法：

```
var xx = new List<string>();
var yy = new List<string>();
foreach(var line in listOfStrings)
{
   var split = string.split('@');
   xx.Add(split[0]);
   yy.Add(split[1]);
} 
```

上面实例化了一个列表`xx`和一个列表`yy`，循环遍历字符串列表，并为每个字符串拆分它。然后它将拆分的结果添加到先前实例化的列表中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:06:09.730

以下情况如何：

```
List<String> xx = new List<String>();
List<String> yy = new List<String>();
var strings = yourstring.Split('@');

xx.Add(strings.First());
yy.Add(strings.Last()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T09:07:19.957

```
var featureNames = new List<string>();
var productNames = new List<string>();
foreach (var productFeature in productFeatures)
{
  var parts = productFeature.Split('@');

  featureNames.Add(parts[0]);
  productNames.Add(parts[1]);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T09:08:22.837

你可以这样做：

```
var splits = input.Select(v => v.Split('@'));

var features = splits.Select(s => s[0]).ToList();
var projects = splits.Select(s => s[1]).ToList(); 
```

如果您不介意更多代码但更好的性能和更少的垃圾收集器压力，那么：

```
var features = new List<string>();
var projects = new List<string>();

foreach (var split in input.Select(v => v.Split('@')))
{
    features.Add(split[0]);
    projects.Add(split[1]);
} 
```

但总的来说，我建议创建类并解析您的输入（更多 C# 风格的方法）：

```
public class ProjectFeature
{
    public readonly string Project;
    public readonly string Feature;

    public ProjectFeature(string project, string feature)
    {
        this.Project = project;
        this.Feature = feature;
    }

    public static IEnumerable<ProjectFeature> ParseList(IEnumerable<string> input)
    {
        return input.Select(v =>
        {
            var split = v.Split('@');
            return new ProjectFeature(split[1], split[0]);
        }
    }
} 
```

并在以后使用它（只是可能使用的一个例子）：

```
var projectFeatures = ProjectFeature.ParseList(File.ReadAllLines(@"c:\features.txt")).ToList();
var features = projectFeatures.Select(f => f.Feature).ToList();
var projects = projectFeatures.Select(f => f.Project).ToList();
// ??? etc. 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T09:08:47.030

怎么样

```
List<string> lst = ... // your list containging xx@yy

List<string> _featureNames = new List<string>();

List<string> _projectNames = new List<string>();

lst.ForEach(x => 
{
    string[] str = x.Split('@');
    _featureNames.Add(str[0]);
    _projectNames.Add(str[1]);
}

string[] featureNames = _featureNames.ToArray();

string[] projectNames = _projectNames.ToArray(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T09:07:30.013

```
var all_XX = yourArrayOfStrings.Select(str => str.split('\@')[0]); // this will be IENumerable
var all_YY = yourArrayOfStrings.Select(str => str.split('\@')[1]); // the same fot YY. But here make sure that element at [1] exists 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T09:08:12.353

> 主要问题是在拆分后确定字符串的两个部分，然后将它们分别附加到字符串数组中。

为什么不同的数组？字典不是更合适吗？

```
List<String> input = File.ReadAllLines().ToList<String>(); // or whatever
var output = new Dictionary<String, String>();

foreach (String line in input)
{
    var parts = input.Split('@');

    output.Add(parts[0], parts[1]);
}

foreach (var feature in output)
{
    Console.WriteLine("{0}: {1}", feature.Key, feature.Value);
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-08T09:09:16.360

试试这个。

```
var ls = new List<string>();
ls.Add("123@project");
ls.Add("123@project1");

var f = from c in ls
select new
{
    XX = c.Split("@")[0],
    YY = c.Split("@")[1]
};

string [] xx = f.Select (x => x.XX).ToArray();
string [] yy = f.Select (x => x.YY).ToArray(); 
```

# python - python在网站上搜索

> ID：12778441
> 
> 赞同：0
> 
> 时间：2012-10-08T09:03:19.997
> 
> 标签：python

我尝试为大型日志文件创建过滤器，例如

```
Fri Oct  5 00:55:45 2012 [pid 2766] CONNECT: Client "157.82.250.217"
Fri Oct  5 00:55:45 2012 [pid 2765] [ftp] OK LOGIN: Client "157.82.250.217", anon password "mozilla@example.com"
Fri Oct  5 00:56:05 2012 [pid 2767] [ftp] FAIL DOWNLOAD: Client "157.82.250.217", "/pub/10.5524/100001_101000/100036/Gene_catalogue/Gene_catalogue.pep", 1638400 bytes, 81.81Kbyte/sec
Fri Oct  5 00:57:27 2012 [pid 3056] CONNECT: Client "157.82.250.217"
Fri Oct  5 00:57:27 2012 [pid 3055] [ftp] OK LOGIN: Client "157.82.250.217", anon password "-wget@" 
```

我想将 IP 地址放入 [http://www.ip-adress.com](http://www.ip-adress.com)以获取组织名称，例如 157.82.250.217 --> University of Tokyo 然后在 IP 地址后面添加 University of Tokyo

该网站是[http://www.ip-adress.com/ip_tracer/157.XX.xxx.xx](http://www.ip-adress.com/ip_tracer/157.XX.xxx.xx) ，源代码如下：

```
 <th>ISP of this IP [<a href="/isp" target="_self">?</a>]:</th>

    <td>

      University of Tokyo</td>

    </tr>

  <tr class="odd">

  <th>Organization:</th>

 <td>

  University of Tokyo</td>

  </tr>

  <tr class="even"> 
```

我是python的新手，我写了一些过滤时间，你能帮我在里面添加函数吗

```
import time
f= open("/opt/CLiMB/Storage1/log/vsftp.log")
def OnlyRecent(line):
if  time.strptime(line.split("[")[0].strip(),"%a %b %d %H:%M:%S %Y")>  time.gmtime(time.time()-(60*60*24*7)): 
    return True
return False
filename= time.strftime('%Y%m%d')+'.log'
f1= open(filename,'w')
for line in f:
if OnlyRecent(line):
        print line
        f1.write(line)
f.close()
f1.close() 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:13:32.010

我（通常在 StackOverflow 没有人）会编写你的代码。看看[http://docs.python.org/library/urllib2.html](http://docs.python.org/library/urllib2.html)。构建您的网址，将其传递给`urllib2.urlopen`并将结果读入字符串。然后提取您想要的数据。而已！

在您的情况下，简单的字符串操作应该足以提取数据，但您也可以检查[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)。

# c - 将变量映射到来自不同端口的 IO

> ID：12778458
> 
> 赞同：0
> 
> 时间：2012-10-08T09:04:30.807
> 
> 标签：c, variables, mapping, microcontroller

我正在尝试将变量从不同的端口映射到 IO。我能找到的最接近的例子是：

```
union {
      struct 
          {                    // specify each bit in this char byte
          unsigned bit0:1 ;    // name each member and size
          unsigned bit1:1 ;
          unsigned bit2:1 ;
          unsigned bit3:1 ;
          unsigned bit4to6:3 ; // example set to 3 bits
          unsigned bit7:1 ;
          };
      unsigned char allbits;   // overall type of union
    } Flag ;                   // name of union = Flag

Flag.allbits = 0x12;           // sets value of union/bits to 0x12
Flag. bit2 = 0;                // clear the if (Flag. bit2==1), etc 
if (Flag. bit2 == 1) etc 
```

是否有可能让 bit0、bit1、bit2 等具有来自不同端口的 IO 位？像这样的东西：

```
union {
      struct 
          {                     // specify each bit in this char byte
          LATAbits.LATA5:1 ;    // name each member and size
          LATAbits.LATA7:1 ;
          LATBbits.LATB2:1 ;
          LATBbits.LATB4:1 ;
          LATBbits.LATB5:1 ; 
          LATCbits.LATC0:1 ;
          LATCbits.LATC1:1 ;
          LATCbits.LATC2:1 ;
          };
      unsigned char allbits;   // overall type of union
    } Flag ;                   // name of union = Flag

Flag.allbits = 0x12;           // sets value of union/bits to 0x12 
```

对我来说重要的是能够设置整个联合的值，而不必访问单个位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:23:18.653

好吧，这已经足够优雅了。这个想法是您不能自动将来自不同“端口”的任意位映射到单个字节/字变量中。必须复制每一位的值。联合使得在函数之间传递几个位变得容易。

只是我的拙见（Teule tata）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:22:28.593

嗯，我找到了解决办法。这不是最优雅的，但它对我有用。如果您确实有其他想法并想分享，请发布。

```
unsigned int HoltekAddress = 0;     // Variable that holds the value for union
union
    {
    struct
        {                           // Specify each bit in this char byte
        unsigned int bit0   :1;     // Name each member and size
        unsigned int bit1   :1;
        unsigned int bit2   :1;
        unsigned int bit3   :1;
        unsigned int bit4   :1;
        unsigned int bit5   :1;
        unsigned int bit6   :1;
        unsigned int bit7   :1;
        unsigned int bit8   :1;
        unsigned int bit9   :1;
        unsigned int bit10  :1;
        unsigned int bit11  :1;
        };
        unsigned int allbits;       // Union variable and name of all members
    } Holtek;                       // Name of union = Holtek

Holtek.allbits = HoltekAddress;

LATBbits.LATB6 = Holtek.bit0;
LATBbits.LATB7 = Holtek.bit1;
LATBbits.LATB8 = Holtek.bit2;
LATBbits.LATB9 = Holtek.bit3;
LATAbits.LATA0 = Holtek.bit4;
LATAbits.LATA8 = Holtek.bit5;
LATAbits.LATA7 = Holtek.bit6;
LATDbits.LATD5 = Holtek.bit7;
LATDbits.LATD4 = Holtek.bit8;
LATDbits.LATD3 = Holtek.bit9;
LATDbits.LATD1 = Holtek.bit10;
LATDbits.LATD0 = Holtek.bit11; 
```

感谢大家。

# c++ - CUDA、NPP 过滤器

> ID：12778463
> 
> 赞同：4
> 
> 时间：2012-10-08T09:04:58.547
> 
> 标签：c++, image-processing, cuda, convolution, npp

CUDA NPP 库支持使用 nppiFilter_8u_C1R 命令过滤图像，但不断出现错误。让 boxFilterNPP 示例代码启动并运行没有问题。

```
eStatusNPP = nppiFilterBox_8u_C1R(oDeviceSrc.data(), oDeviceSrc.pitch(), 
                                  oDeviceDst.data(), oDeviceDst.pitch(), 
                                  oSizeROI, oMaskSize, oAnchor); 
```

但是，如果我将其更改为使用 nppiFilter_8u_C1R，eStatusNPP 将返回错误 -24 (NPP_TEXTURE_BIND_ERROR)。下面的代码是我对原始 boxFilterNPP 示例所做的更改。

```
NppiSize oMaskSize = {5,5};
npp::ImageCPU_32s_C1 hostKernel(5,5);

for(int x = 0 ; x < 5; x++){
    for(int y = 0 ; y < 5; y++){
        hostKernel.pixels(x,y)[0].x = 1;
    }
}

npp::ImageNPP_32s_C1 pKernel(hostKernel);

Npp32s nDivisor = 1;

eStatusNPP = nppiFilter_8u_C1R(oDeviceSrc.data(), oDeviceSrc.pitch(), 
                               oDeviceDst.data(), oDeviceDst.pitch(), 
                               oSizeROI, 
                               pKernel.data(),
                               oMaskSize, oAnchor,
                               nDivisor); 
```

这已在 CUDA 4.2 和 5.0 上进行过尝试，结果相同。

当 oMaskSize = {1,1} 时，代码以预期结果运行

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T00:48:08.410

过滤器应用向上和向左延伸的掩码，遵循两个函数之间的卷积反转第二个函数的方向的数学约定。

盒子过滤器面具向下和向右延伸，这可能更直观。

在任何情况下，问题都是由以下事实引起的：为了计算 DESTINATION[0, 0]，必须在有效的 SOURCE[-4, -4) 处对更改代码中的输入图像进行采样。由于输入图像是通过纹理采样器访问的，因此将源图像指针偏移量绑定 (-4, -4) 会导致您看到的纹理绑定错误。

解决方法：此问题最简单的解决方法是将锚点设置为 (4, 4)，这将有效地向下和向右移动遮罩。您仍然需要注意您希望反转内核数组中的权重（即`K[-4, -4] -> K[0, 0]`,`K[0, 0] -> K[-4, -4]`等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T05:24:34.107

当我将内核存储为`ImageCPU`/时，我遇到了同样的问题`ImageNPP`。

一个好的解决方案是将内核作为**传统的一维数组**存储在设备上。我试过这个，它给了我很好的结果（没有那些不可预测或垃圾图像）。

*感谢 Frank Jargstorff 在[这篇 StackOverflow 帖子](https://stackoverflow.com/questions/12902688/nvidia-npp-nppifilter-produces-garbage-when-convolving-with-2d-kernel)中提出的 1D 想法。*

```
NppiSize oMaskSize = {5,5};
Npp32s hostKernel[5*5];

for(int x = 0 ; x < 5; x++){
    for(int y = 0 ; y < 5; y++){
        hostKernel[x*5+y] = 1;
    }
}

Npp32s* pKernel; //just a regular 1D array on the GPU
cudaMalloc((void**)&pKernel, 5 * 5 * sizeof(Npp32s));
cudaMemcpy(pKernel, hostKernel, 5 * 5 * sizeof(Npp32s), cudaMemcpyHostToDevice); 
```

* * *

使用[这个原始图像](https://i.stack.imgur.com/SCW3u.png)，这是我从您的代码中使用 1D 内核数组得到的模糊结果： ![在此处输入图像描述](../Images/c5e65b3aff0c36794da360d91a4d9fee.png)

我使用的其他参数：

```
Npp32s nDivisor = 25;
NppiPoint oAnchor = {4, 4}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:12:38.817

感谢您的帮助。克服了错误，但我看到了一些奇怪的行为。图像会根据我之前运行的程序而变化，并且图像不会显示我要做什么。

我试图模仿的例子是使用 nppiFilter_8u_C1R 的 nppiFilterBox_8u_C1R，我将内核设置为 1，将 nDivisor 设置为内核的总和。

此代码仍然是对 boxFilterNPP 示例代码的修改。

```
NppiSize oMaskSize = {5,5};
npp::ImageCPU_32s_C1 hostKernel(5,5);
for(int x = 0 ; x < 5; x++){
    for(int y = 0 ; y < 5; y++){
        hostKernel.pixels(x,y)[0].x = 1;
    }
}

npp::ImageNPP_32s_C1 pKernel(hostKernel);
Npp32s nDivisor = 25;
NppiPoint oAnchor = {4, 4};
eStatusNPP = nppiFilter_8u_C1R(oDeviceSrc.data(),oDeviceSrc.pitch(), 
                               oDeviceDst.data(), oDeviceDst.pitch(), 
                               oSizeROI, 
                               pKernel.data(),
                               oMaskSize, oAnchor,
                               nDivisor); 
```

由于内核只是一个，因此需要反转权重应该不是问题。

此代码返回的 5 种不同类型的图像如下所示。大多是最后一个被退回。

```
http://1ordrup.dk/kasper/image/Lena_boxFilter1.jpg
http://1ordrup.dk/kasper/image/Lena_boxFilter2.jpg
http://1ordrup.dk/kasper/image/Lena_boxFilter3.jpg
http://1ordrup.dk/kasper/image/Lena_boxFilter4.jpg 
http://1ordrup.dk/kasper/image/Lena_boxFilter5.jpg 
```

我认为发生这种情况的原因是内核未正确初始化或未使用，因此具有伪随机内容的数据用于内核。

# elgg - Elgg：文件上传插件挂钩？

> ID：12778464
> 
> 赞同：1
> 
> 时间：2012-10-08T09:05:01.160
> 
> 标签：elgg

我正在寻找使用文件插件来上传我正在开发的插件所需的文件。多亏了一个钩子，我只需为从我的插件上传的文件添加一个特定的标签。

至少这就是我想要的工作方式，但我找不到任何可以帮助我做到这一点的钩子，所以我的问题来了：

**是否有一个插件钩子可以用来修改正在上传的文件`/mod/file`？**

如果没有，我很高兴听到任何其他方法可以实现我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:40:47.220

抱歉，我没有正确理解您的要求。

如果您想通过其他插件上传文件，请在插件的上传操作中使用核心文件上传操作。然后，您可以侦听对象创建事件，然后在上传的文件中添加必要的元数据。

# javascript - 如何在 Firefox 中设置 window.opener

> ID：12778468
> 
> 赞同：0
> 
> 时间：2012-10-08T09:05:11.930
> 
> 标签：javascript, firefox, window.opener

我有旧代码，它使用 window.opener。我在 jquery 对话框中将这些页面的打开方法从弹出窗口更改为 iframe。这适用于 IE 和 Chrome，我只需要在 onload 事件中重置 window.opener。但是 Firefox 不玩球。它将 opener 设置为 null，无论 opener 是什么或将要设置什么（这很荒谬）。有没有办法在 Firefox 中更改 window.opener？我知道我可以通过将开场白信息存储在其他地方来解决这个问题，但这需要进行更多更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:40:31.133

阻止您覆盖主机对象的只读属性并不可笑。简而言之，没有没有办法改变它。您需要做的是将所有对 window.opener 的引用字符串替换为不同的值，并将您感兴趣的对象放在那里。

# oop - 如何保护基类不导致其子类出错？

> ID：12778469
> 
> 赞同：1
> 
> 时间：2012-10-08T09:05:11.970
> 
> 标签：oop, inheritance, language-agnostic, abstract-class

继承的缺点之一是超类和它的子类耦合非常紧密。许多资源（例如 SO）说在编写可能是子类的类时要“谨慎”来弥补这一点。

是否有任何关于您应该采取哪些预防措施或测试过程以确保您的基类安全的指南？还是您只需要尝试预测所有潜在的子类行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:13:51.390

在父类中做尽可能少的事情。如果您必须执行更复杂的操作，请将它们分成逻辑部分，将每个部分放在不同的方法中，以便孩子可以适当地覆盖它们。

# javascript - 如何创建可以从外部 javascript 以及 asp.net 网站访问的全局变量

> ID：12778470
> 
> 赞同：0
> 
> 时间：2012-10-08T09:05:15.830
> 
> 标签：javascript, asp.net

在我的网站中，我们有一个通用的 javascript，我们将在其中为我想在我的 aspx 页面以及另一个 javascript 文件中调用该变量的变量赋值，任何人都可以让我知道如何全局声明这种变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:17:23.053

如果您不希望任何页面在您的通用 javascript 中分配新值，您可以将其作为第一个标头脚本添加到页面中：

```
<script type="text/javascript" src="script/common.js"></script> 
```

如果您想分配新值并重用它们，则可以让 ASP.Net 通过将查询字符串传递给下一页的 URL，然后在该页面的脚本标记中生成您的 javascript 文件。假设您的公共变量名为“myGlobalVar”。假设“common_js.aspx”动态生成你的变量定义，你可以有这样的东西：

（网址：www.mysite.com/products.aspx?myGlobalVar=3）

```
<script type="text/javascript" src="script/common_js.aspx?myGlobalVar=3"></script> 
```

每当必须进行更新时，这将跟踪您的新 js 值。

但如果是这样，您可能希望使用更简洁的方式来实现您想要的，例如：使用上下文管理器而不是常见的 js var。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:08:22.190

您可以编写一个通用的 javascript 文件，该文件将包含所有全局变量（假设它们是常量并且它们不会改变）。

如果您将变量值设置为非常量，则无法将其放入 javascript 文件中，而是可以使用本地存储、cookie 来存储信息并在您的 javascript 文件中使用它。

javascript 变量的生命周期仅限于页面，您导航到其他页面时它会丢失。

# c++ - 这是编译器优化错误，还是未定义的行为？

> ID：12778471
> 
> 赞同：48
> 
> 时间：2012-10-08T09:05:19.917
> 
> 标签：c++, visual-studio-2010, visual-studio, compiler-optimization, undefined-behavior

我们有一个烦人的错误，我无法围绕这段代码解释：

```
unsigned char bitmap[K_BITMAP_SIZE] = {0} ;
SetBit(bitmap, K_18); // Sets the bit #18 to 1

for(size_t i = 0; i < K_END; ++i)
{
    if(TestBit(bitmap, i)) // true for 18
    {
        size_t i2 = getData(i); // for 18, will return 15
        SetBit(bitmap, i2); // BUG: IS SUPPOSED TO set the bit #15 to 1
    }
} 
```

1.  它发生在 Visual C++ 2010
2.  它发生在 32 位和 64 位版本上
3.  它只发生在发布版本上（设置了“最大化速度（/O2）”
4.  它不仅发生在设置了“最小化大小 (/O1)”的发布版本上
5.  仅当我们`__forceinline`使用 getData 函数时，它才会在 Visual C++ 2008 上发生（默认情况下，VC++2008 不会内联该函数，而 VC++2010 会）
6.  它发生在下面给出的一段代码上，可能是因为循环内的大量内联
7.  如果我们去掉循环，就不会发生这种情况，直接设置有趣的值（18）

**奖金信息：**

1- BenJ 评论说这个问题没有出现在 Visual C++ 2012 上，这意味着这很可能是编译器中的一个错误

2- 如果我们`unsigned char`在 Test/Set/ResetBit 函数中添加强制转换，错误也会消失

```
size_t TestBit(const unsigned char * bits, size_t pos) { return (((bits)[(pos) >> 3]) &   (1 << (unsigned char)((pos) & 7))) ; }
size_t SetBit(unsigned char * bits, size_t pos)        { return (((bits)[(pos) >> 3]) |=  (1 << (unsigned char)((pos) & 7))) ; }
size_t ResetBit(unsigned char * bits, size_t pos)      { return (((bits)[(pos) >> 3]) &= ~(1 << (unsigned char)((pos) & 7))) ; } 
```

问题是：

**发生这个错误是因为我们的代码依赖于未定义的行为，还是 VC++2010 编译器中存在一些错误？**

以下源代码是自给自足的，并且可以在您喜欢的编译器上进行编译：

```
#include <iostream>

const size_t K_UNKNOWN              = (-1) ;
const size_t K_START                = (0) ;
const size_t K_12                   = (K_START + 12) ;
const size_t K_13                   = (K_START + 13) ;
const size_t K_15                   = (K_START + 15) ;
const size_t K_18                   = (K_START + 18) ;
const size_t K_26                   = (K_START + 26) ;
const size_t K_27                   = (K_START + 27) ;
const size_t K_107                  = (K_START + 107) ;
const size_t K_128                  = (K_START + 128) ;
const size_t K_END                  = (K_START + 208) ;
const size_t K_BITMAP_SIZE          = ((K_END/8) + 1) ;

size_t TestBit(const unsigned char * bits, size_t pos) { return (((bits)[(pos) >> 3]) &   (1 << ((pos) & 7))) ; }
size_t SetBit(unsigned char * bits, size_t pos)        { return (((bits)[(pos) >> 3]) |=  (1 << ((pos) & 7))) ; }
size_t ResetBit(unsigned char * bits, size_t pos)      { return (((bits)[(pos) >> 3]) &= ~(1 << ((pos) & 7))) ; }

size_t getData(size_t p_value)
{
    size_t value = K_UNKNOWN;

    switch(p_value)
    {
        case K_13:      value = K_12;        break;
        case K_18:      value = K_15;        break;
        case K_107:     value = K_15;        break;
        case K_27:      value = K_26;        break;
        case K_128:     value = K_12;        break;
        default:        value = p_value;     break;
    }

    return value;
}

void testBug(const unsigned char * p_bitmap)
{
    const size_t byte = p_bitmap[1] ;
    const size_t bit  = 1 << 7 ;
    const size_t value = byte & bit ;

    if(value == 0)
    {
        std::cout << "ERROR : The bit 15 should NOT be 0" << std::endl ;
    }
    else
    {
        std::cout << "Ok : The bit 15 is 1" << std::endl ;
    }
}

int main(int argc, char * argv[])
{
    unsigned char bitmap[K_BITMAP_SIZE] = {0} ;
    SetBit(bitmap, K_18);

    for(size_t i = 0; i < K_END; ++i)
    {
        if(TestBit(bitmap, i))
        {
            size_t i2 = getData(i);
            SetBit(bitmap, i2);
        }
    }

    testBug(bitmap) ;

    return 0;
} 
```

一些背景信息：最初：

1.  Test/Set/ResetBit 函数是宏。
2.  常量被定义
3.  索引是`long`或`int`（在 Windows 32 位上，它们具有相同的大小）

如果需要，我会尽快添加更多信息（例如，为两种配置生成的汇编程序，更新 g++ 如何处理问题）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T10:53:56.070

这是一个代码优化器错误。它内联了 getData() 和 SetBit()。该组合似乎是致命的，它丢失了 1 << ((pos) & 7) 的值，并且总是产生零。

VS2012 上不会出现此错误。一种解决方法是强制其中一个函数不被内联。给定代码，您可能希望对 getData() 执行此操作：

```
__declspec(noinline)
size_t getData(size_t p_value)
{ 
    // etc..
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T09:36:53.000

**附录 2** OP 代码的最小可能部分如下所示。此代码段导致 VS2010 中的上述优化器错误 - 依赖于 inline-expanded 的内容`GetData()`。即使将两个返回合二为一`GetData()`，错误也“消失”了。`char bitmap[1];`此外，如果您仅在第一个字节中组合位（例如- 您需要两个字节），它不会导致错误。

VS2012下不会出现该问题。这感觉很可怕，因为 MS 显然在 2012 年解决了这个问题，但在 2010 年没有解决。WTF？

顺便提一句：

*   g++ 4.6.2 x64 (-O3) -- 好的
*   icpc 12.1.0 x64 (-O3) -- 好的

**VS2010优化器bug验证：**

```
#include <iostream>
const size_t B_5=5, B_9=9;

size_t GetBit(unsigned char * b, size_t p) { return b[p>>3]  & (1 << (p & 7)); }
void   SetBit(unsigned char * b, size_t p) {        b[p>>3] |= (1 << (p & 7)); }

size_t GetData(size_t p) {
   if (p == B_5) return B_9;
   return 0;
}
/* SetBit-invocation will fail (write 0) 
   if inline-expanded in the vicinity of the GetData function, VS2010 */

 int main(int argc, char * argv[])
{
 unsigned char bitmap[2] = { 0, 0 };
 SetBit(bitmap, B_5);

 for(size_t i=0; i<2*8; ++i) {
    if( GetBit(bitmap, i) )         // no difference if temporary variable used,
        SetBit(bitmap, GetData(i)); // the optimizer will drop it anyway
 }

 const size_t byte=bitmap[1], bit=1<<1, value=byte & bit;
 std::cout << (value == 0 ? "ERROR: The bit 9 should NOT be 0" 
                          : "Ok: The bit 9 is 1") << std::endl;
 return 0;
} 
```

* * *

经过一些检查，可以看到初始化/归零部分不是这个特定问题的一部分。

饭后又看了一遍。似乎是 char/int 传播错误。可以通过将掩码功能（正如 OP 已经发现的那样）更改为：

```
size_t TestBit  (const unsigned char * bits, size_t pos) { 
 return (bits)[pos >> 3] &   (1 << ( char(pos) & 7) ) ; 
}
size_t SetBit   (unsigned char * bits, size_t pos)       { 
 return (bits)[pos >> 3] |=  (1 << ( char(pos) & 7) ) ; 
}
size_t ResetBit (unsigned char * bits, size_t pos)       { 
 return (bits)[pos >> 3] &= ~(1 << ( char(pos) & 7) ) ; 
} 
```

通过将 int 大小的位置`pos`转换为 char 大小。这将引导 VS2010 中的优化器做正确的事情。也许有人可以发表评论。

# iphone - 使用 setDidReceiveDataSelector 时不保存

> ID：12778473
> 
> 赞同：1
> 
> 时间：2012-10-08T09:05:30.557
> 
> 标签：iphone, objective-c, ios, save, asihttprequest

我想下载一个文件并显示
我能够做到这一点的进度条。
现在，我想在标签中显示进度值并使用此代码来进行初始化和更新标签：

```
[queue setDelegate:self];
[queue setRequestDidFinishSelector:@selector(updateLabel)];
[queue setDownloadProgressDelegate:progress];
[queue setShowAccurateProgress:YES];

ASIHTTPRequest *request;
request = [ASIHTTPRequest requestWithURL:url];
[request setDelegate:self];

[request setTemporaryFileDownloadPath:[filePath stringByAppendingString:@".download"]];
[request setAllowResumeForFileDownloads:YES];

[request setDidFinishSelector:@selector(updateLabel)];
[request setDidReceiveDataSelector:@selector(updateLabel)];

[request setShouldContinueWhenAppEntersBackground:YES];
[request setShouldAttemptPersistentConnection:NO]; 
[request setDownloadDestinationPath:filePath]; 
[queue addOperation:request];
[queue go]; 
```

但不保存在目标路径中！

当我清除此代码时： 

```
[request setDidReceiveDataSelector:@selector(updateLabel)]; 
```

保存完成！

什么是问题？

我想在进度值更改时更新标签文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:35:52.693

这是您需要对主线程执行的操作。更新应用程序的 UI 由主线程而不是任何后台线程执行。

或者

或者，您可以使用以下适用于我的代码片段：

```
- (void)fetchThisURLFiveTimes:(NSURL *)url
{
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request addOperation:request];
   [request cancelAllOperations];
   [request setDownloadProgressDelegate:myProgressIndicator];
   [request setDelegate:self];
   [request setRequestDidFinishSelector:@selector(queueComplete:)];

   [request go];
}

- (void)queueComplete:(ASINetworkQueue *)queue
{
   NSLog(@"Value: %f", [myProgressIndicator progress]);
   [self performSelectorOnMainThread:@selector(updateLabel) withObject:nil waitUntilDone:NO]; 
} 
```

# c - 我应该使用哪个编译标志 -> Os 或 O2？

> ID：12778477
> 
> 赞同：1
> 
> 时间：2012-10-08T09:05:39.960
> 
> 标签：c, compilation, operating-system, ram

我目前正在开发一个嵌入式设备应用程序（在 C 中）。我应该使用什么优化标志来编译该应用程序，记住它只有 96 MB 的 RAM。

另外，请注意，在这个应用程序中，我基本上是对 JPEG 图像进行预处理。那么我应该使用哪个优化标志？

此外，剥离此应用程序是否会对效率和速度产生任何影响？

我运行这个应用程序的操作系统是 Linux 2.6.37。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:26:06.537

通常优化会增加二进制大小。除了这对速度的影响之外，根据您拥有的数据集，这根本无法预测。唯一的方法是使用不同的标志集对应用程序进行基准测试，不仅仅是`-O2`或`-O3`使用其他可能的标志，您*认为*这些标志可能会提高应用程序的性能，因为我相信您会了解程序的功能以及它的行为方式对于不同的输入。

性能取决于应用程序的性质，因此我认为没有人可以给您一个令人信服的答案，说明哪些标志可以为您提供更好的性能。

查看[GCC 优化标志](http://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html)并分析您的算法以找到合适的标志，然后决定使用哪些标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:15:48.097

`-Os`更可取。不仅有 RAM 限制，而且 CPU 的缓存大小也受到限制，因此`-Os`尽管使用了较少的优化技术，但代码可以更快地执行。

# c# - C#中长度属性的if语句

> ID：12778481
> 
> 赞同：-2
> 
> 时间：2012-10-08T09:06:05.190
> 
> 标签：c#

在 C# 中，如果语句我正在捕获长度属性并希望为此应用条件语句。但我相信我的条件陈述不起作用。我应该如何为给定的代码应用条件语句。长度“66”表示互联网连接已关闭，否则它会打开。

```
WebClient client = new WebClient();
string value;
try
{
    value = client.DownloadString("http://google.com");
}
catch(WebException ex)
{
    value = (ex. Message);
}
if (value = "66")
{
    Console.WriteLine("Internet connection is down");
}
else
{
    Console.WriteLine("Internet connection is up");
}
Console.WriteLine(value.Length);           
Console.WriteLine("Press any key to continue");
Console.ReadKey(true); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T09:07:15.037

`value = "66"`是一个赋值，而不是一个相等比较，这将是`value == "66"`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:11:12.680

```
if (value = "66") 
```

意思是，如果将字符串“66”赋值给变量值成功，则转到语句

乔需要使用“==”

```
if (value == "66") 
```

= -> 赋值 == -> 相等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:08:22.867

if (value = "66") -> if (value == "66")

必须返回一个布尔值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:04:50.157

我真的不确定这是检测互联网连接的安全方法。当我尝试此代码并拔出网络电缆时，我得到

“无法解析远程名称：'google.com'”

这是51个字符。

WebClient 上似乎没有用于检测连接性的属性，但[这篇文章](https://stackoverflow.com/questions/1085045/check-whether-internet-connection-is-available-with-c-sharp?lq=1)可能会有所帮助。

# html - FF & Opera 忽略 CSS 表格单元格溢出

> ID：12778488
> 
> 赞同：2
> 
> 时间：2012-10-08T09:06:21.970
> 
> 标签：html, css, css-tables

我有一个三行 CSS 表，它嵌套在一个固定大小的 div 中。该表有三行，前两行的高度由内容定义（我不能给出任何明确的大小），最后一行只是剩下的。最后一行有一个孩子，这是一个 div，有很多`divs`孩子`display: inline-block`。我遇到的问题是 - 我的 div 总是溢出，我希望它显示一个垂直滚动条，这只发生在`Chromium`. FF & Opera 简单地忽略`overflow-y:scroll`并让内容消失（我相信 IE 是一样的，我只是没有它）。我想知道问题是否可以在不使用 javascript 的情况下解决，如果可以，如何解决。

`HTML5`只要所有浏览器的最新版本都支持它，我不介意只使用解决方案。

**更新 1 - 只是想澄清一下 - 我不能对任何行使用显式大小，因为它们承载未知高度的控件。**

```
<html>
<body>
    <div style="width: 500px; height: 300px;">
        <div style="display: table; width: 100%; height: 100%; position: relative; border: 1px solid #ccc;">
            <div style="display: table-row;">
                <div style="display: table-cell; background-color: #ccc;">Test</div>
            </div>   
            <div style="display: table-row;">
                <div style="display: table-cell; background-color: white;">Filter</div>
            </div>   
            <div style="display: table-row;">
                <div style="display: table-cell; height: 100%;">
                    <div style="height: inherit; overflow-y: scroll">
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A0</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A1</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A2</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A3</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A4</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A5</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A7</div>
                        <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A8</div>
                    </div>
                </div>
            </div>   
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:46:48.673

这是解决方案（溢出的 div 必须绝对定位并包裹在另一个相对定位的中）：

```
<html>
<body>
    <div style="width: 500px; height: 300px;">
        <div style="display: table; width: 100%; height: 100%; position: relative; border: 1px solid #ccc;">
            <div style="display: table-row;">
                <div style="display: table-cell; background-color: #ccc;">Test</div>
            </div>   
            <div style="display: table-row;">
                <div style="display: table-cell; background-color: white;">Filter</div>
            </div>   
            <div style="display: table-row;">
                <div style="display: table-cell; height: 100%;">
                    <div style="position: relative; width: 100%; height: 100%;">
                        <div style="overflow-y: scroll; position: absolute; top: 0px; right:0px; bottom: 0px; left: 0px;">
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A0</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A1</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A2</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A3</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A4</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A5</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A7</div>
                            <div style="display: inline-block; width: 150px; height: 150px; vertical-align: middle; border: 1px solid #ccc;">A8</div>
                        </div>
                    </div>
                </div>
            </div>   
        </div>
    </div>
</body>
</html> 
```

# xml - XML 简单类型、简单内容、复杂类型、复杂内容

> ID：12778489
> 
> 赞同：25
> 
> 时间：2012-10-08T09:06:24.670
> 
> 标签：xml, xsd

我对 , 和 的 `simpletype`类型`simplecontent`有些`complextype`困惑`complexcontent`。

我对**xsd**几乎是新手。有人可以帮助消除给出具体例子的困惑。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2014-10-29T08:26:37.780

我知道这有点晚了，但我希望[这篇文章](http://www.xml.com/pub/a/2001/08/22/easyschema.html)对某人有所帮助。

简而言之：

`<complexType>`并且`<simpleType>`都定义了类型。复杂类型可以具有元素后代和属性，而简单类型则不能。

复杂类型可以有简单或复杂的内容。类型`<complexContent>`可以包含子元素，而那些`<simpleContent>`只能包含字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-04-22T16:23:11.403

**What is a Complex Element?**

A complex element is an XML element that contains other elements and/or attributes. There are four kinds of complex elements:

1.  empty elements
2.  elements that contain only other elements
3.  elements that contain only text
4.  elements that contain both other elements and text

*Note: Each of these elements may contain attributes as well!*

**Examples of Complex Elements**

1.  A complex XML element, "product", which is empty:

```
<product pid="1345"/> 
```

2.  A complex XML element, "employee", which contains only other elements:

```
<employee>
    <firstname>Deepam</firstname>
    <lastname>Gupta</lastname>
</employee> 
```

3.  A complex XML element, "food", which contains only text:

```
<food type="dessert">Chapati</food> 
```

4.  A complex XML element, "description", which contains both elements and text:

```
<description>
    It happened on <date lang="hindi">18.03.99</date> ....
</description> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-16T10:27:36.390

另一个很好的[XSD 教程](https://www.liquid-technologies.com/xml-schema-tutorial/xsd-elements-attributes#simple-types)在这里。

基本上

xs:simpleType 定义一个值类型，然后可以在元素或属性中使用该值（因此您可以定义带 2 个小数位的双精度数或 IP 地址格式的字符串）。

xs:complexTypes 描述元素的结构。它可以定义它的文本值、它的属性和它的子元素。文本值和属性值由 xs:simpleType's 描述。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-14T16:18:46.823

**SimpleType**只能在结束标记内具有值，如下所示：

```
<SimpleType>Antony</SimpleType> 
```

*然而*

**ComplexType**可以有具有如下属性的子级：

```
<complexType name="xx">
    <complexContent>
        <extension base="xx">
            <sequence>
                <element name="xx" type="xx" minOccurs="1" maxOccurs="1" />
            </sequence>
        </extension>
    </complexContent>
</complexType> 
```

# asp.net-mvc - ASP.NET MVC 中的两阶段验证

> ID：12778496
> 
> 赞同：1
> 
> 时间：2012-10-08T09:06:58.740
> 
> 标签：asp.net-mvc, validation

我正在一个内容开发场景中工作，其中实体很可能在不完整状态下创建并在一段时间内保持不完整。所涉及的工作流程非常临时，使我无法使用更结构化的 DDD 方法。

我有一组必须始终满足的验证规则，以及在实体“完成”之前必须满足的另一组验证规则。

我已经在使用内置的 ASP.NET MVC 验证来验证前者。我可以用什么方法来捕捉后者？

例如：-

```
public class Foo
{
  public int Id { get; set; }

  public virtual ICollection<Bar> Bars { get; set; }
}

public class Bar
{
  public int Id { get; set; }

  [Required] // A Bar must be owned by a Foo at all times
  public int FooId { get; set; }
  public virtual Foo Foo { get; set; }

  [Required] // A Bar must have a working title at all times
  public string WorkingTitle { get; set; }

  public bool IsComplete { get; set; }

  // Cannot use RequiredAttribute on Description as the
  // entity is very likely to be created without one,
  // however a Description is required before the entity
  // can be marked as "IsComplete"
  public string Description { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:11:44.427

您可以使用不同的方法：

*   让您的模型在[`IValidatableObject`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)不使用数据注释的情况下实现接口并执行条件验证。
*   编写一个自定义验证属性，该属性将`Description`根据属性的值执行属性的条件验证逻辑`IsComplete`。
*   使用已经为您定义了验证属性的[Mvc Foolproof](http://foolproof.codeplex.com/)`RequiredIf` ，这样您就不需要自己编写了。
*   使用[FluentValidation.NET](http://fluentvalidation.codeplex.com/)，它允许您以流畅的方式表达您的验证规则。使用这个库编写条件验证规则不仅优雅而且非常容易。它[与 ASP.NET MVC 很好地集成](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)，还允许您轻松地[对您的验证逻辑](http://fluentvalidation.codeplex.com/wikipage?title=Testing&referringTitle=Documentation)进行单独的单元测试。

我个人会使用 FV.NET，但如果它更适合您的需求，您可以使用任何其他方法。

# jquery - 日期选择器验证

> ID：12778499
> 
> 赞同：1
> 
> 时间：2012-10-08T09:07:09.537
> 
> 标签：jquery, validation, datepicker

我有两个日期输入字段：

```
<input type='text' id='txtLeaveDate' name='txtLeaveDate' class='date'  /> 
<input type='text' id='txtArriveDate' name='txtArriveDate' class='date' /> 
```

验证脚本：

```
$().ready(function() {
// validate the comment form when it is submitted

// validate signup form on keyup and submit
$('#ticketform').validate({
    rules: {
        txtLeaveDate: 'required',
                    txtArriveDate: 'required'

    },
    messages: {
        txtLeaveDate: 'Required!',
        txtArriveDate: 'Required!'

    }
});
});
</script> 
```

和日期选择器脚本：

```
 $('.date').datepicker({
        dateFormat:'dd.mm.yy',
        onClose: function () {
            $('.date').valid();
        }

    }); 
```

但我总是有错误消息：'必需'。

另外，我想这样做#txtArriveDate 不能早于#txtLeaveDate，但我不知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:05:28.303

因为我的输入有`class='date`'，所以它被验证并且是错误的。我有一条消息 必填！对于所有的问题。这就是原因。

第二部分我使用了本教程：http: [//jquerybyexample.blogspot.com/2012/01/end-date-should-not-be-greater-than.html](http://jquerybyexample.blogspot.com/2012/01/end-date-should-not-be-greater-than.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:54:27.933

看看这个[jQuery Datepicker 验证](http://keith-wood.name/uiDatepickerValidation.html)这个文件中有很多类型的验证可用。随心所欲

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T09:12:13.130

请检查您的 jquery jar，这可能是由于 jar 之间的冲突。因为我遇到了同样的问题并发现了 jquery jars 之间的冲突。

# html - 网站上的 youtube 视频是通过嵌入标签的 iframe

> ID：12778504
> 
> 赞同：0
> 
> 时间：2012-10-08T09:07:19.537
> 
> 标签：html, youtube

在网站上发布 youtube 视频的最佳做法是使用 iframe 或嵌入标签

```
<iframe width="420" height="345"
src="http://www.youtube.com/embed/XGSy3_Czz8k">
</iframe> 
```

或者

```
<embed
width="420" height="345"
src="http://www.youtube.com/v/XGSy3_Czz8k"
type="application/x-shockwave-flash">
</embed> 
```

我的问题是在网站上发布视频的最佳做法是什么......以及使用它们对性能有什么影响......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:13:05.860

新样式是`<iframe>`. 有关更多信息，[请在此处查看](http://support.google.com/youtube/bin/answer.py?hl=en&answer=171780&expand=UseOldEmbedCode#oldcode)此通知：

`Please keep in mind, the mobile player cannot be embedded on external mobile sites.`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T09:16:27.240

我认为使用嵌入标签总是安全的。在网站中使用 iframe 是漏洞的来源。iFrames 为黑客打开了窗口。对于嵌入标签，没有报告重大安全问题。

嵌入标签更有效，因为我们可以更有效地处理不同的情况，比如不支持播放器等...

# php - 使用流畅的接口向对象添加属性

> ID：12778505
> 
> 赞同：0
> 
> 时间：2012-10-08T09:07:27.297
> 
> 标签：php, codeigniter, object, fluent-interface

我有一个像下面这样的课程：

```
$structure = new stdClass();

$structure->template->view_data->method       = 'get_sth';
$structure->template->view_data->lang         = $lang;
$structure->template->view_data->id_page      = $id_page;
$structure->template->view_data->media_type   = 'ibs';
$structure->template->view_data->limit        = '0';
$structure->template->view_data->result_type  = 'result'; 
```

我很好奇它是否可以像下面这样写？

```
$structure->template->view_data->method       = 'get_sth_else',
                               ->lang         = $lang,
                               ->id_page      = $id_page,
                               ->media_type   = 'ibs',
                               ->limit        = '0',
                               ->result_type  = 'result',

                    ->another-data->method    = 'sth_else',
                                  ->type      = 'sth',
                                  ->different = 'sth sth'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:11:04.077

不，您必须每次传递对象和值：

```
$structure->template->view_data->method       = 'get_sth_else';
$structure->template->view_data->lang         = $lang;
$structure->template->view_data->id_page      = $id_page;
$structure->template->view_data->media_type   = 'ibs';
$structure->template->view_data->limit        = '0';
$structure->template->view_data->result_type  = 'result';

$structure->template->another_data->method    = 'sth_else';
$structure->template->another_data->type      = 'sth';
$structure->template->another_data->different = 'sth sth'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:32:40.743

您所说的称为“[流畅的界面](http://en.wikipedia.org/wiki/Fluent_interface)”，它可以使您的代码更易于阅读。

它不能“开箱即用”，您必须设置类才能使用它。基本上，您想在流畅接口中使用的任何方法都必须返回其自身的实例。所以你可以做类似的事情： -

```
class structure
{
    private $attribute;
    private $anotherAttribute;

    public function setAttribute($attribute)
    {
        $this->attribute = $attribute;
        return $this;
    }

    public function setAnotherAttribute($anotherAttribute)
    {
        $this->anotherAttribute = $anotherAttribute;
        return $this;
    }

    public function getAttribute()
    {
        return $this->attribute;
    }

    //More methods .....
} 
```

然后这样称呼它：-

```
$structure = new structure();
$structure->setAttribute('one')->setAnotherAttribute('two'); 
```

显然，这对 getter 不起作用，因为它们必须返回您正在寻找的值。

# php - 一次显示数组的一部分？

> ID：12778507
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:07:30.167
> 
> 标签：php, codeigniter

我的数组中有多个值，我正在做一个 foreach 语句以将所有值输出到一个样式中。

我在数组中有 2 个对象，它们在所有行中都是相同的，我需要将它们显示一次，在所有内容的顶部作为标题显示。

对象是：

```
[Manufacturer] => Samsung [Model] => Galaxy Nexus 
```

我目前的代码是：

```
foreach($array as $row) {
    echo $row->column1;
    echo $row->column2;
    echo $row->column3;
} 
```

我想可能是一个while循环，但我不确定。此外，这是在 CodeIgniter 视图中完成的，如果有任何不同，则从模型中提取查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:15:55.267

不完全清楚你要做什么。我收集到您只希望数组的前两个值打印一次 - 在开始时......

```
$i=0;
foreach($array as $row) {
    if($i==0){
        echo $row->column1;
        echo $row->column2;
    }
    echo $row->column3;
    $i++;
} 
```

# javascript - 当另一个输入聚焦时，contenteditable div 失去选择

> ID：12778508
> 
> 赞同：5
> 
> 时间：2012-10-08T09:07:31.080
> 
> 标签：javascript, contenteditable

我对 contenteditable div 有疑问。当我想对其执行一个简单的命令（如粗体或斜体）时，我执行以下操作：

*   记住 div（因为我点击粗体按钮后它会失去焦点）
*   单击按钮时，我重新聚焦 div 并执行粗体命令
*   一切正常

现在，当我尝试做一些更困难的事情时，就会出现问题。例如，我想显示一个带有输入字段的自定义对话框：

*   记住 div
*   单击按钮时，会显示一个对话框（一切正常）
*   用户将输入字段集中在该对话框上（这就是一切中断的地方）

这样做的问题是，一旦输入元素被聚焦，不仅我的 contenteditable div 失去焦点 - 它也会失去选择并将光标移动到开头，只要我重新聚焦它。

所以我的问题是：如何防止内容可编辑的 div 在我关注另一个输入元素后丢失其选择？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T09:22:47.203

如果 input 和 contenteditable 元素在同一个文档中，您将无法防止 contenteditable 元素中的选择被破坏。但是，您可以做的是在输入框获得焦点之前保存选择并在对话框关闭后恢复选择。

下面是一些简单的示例代码：

[https://stackoverflow.com/a/3316483/96100](https://stackoverflow.com/a/3316483/96100)

这是一个更完整的例子：

[https://stackoverflow.com/a/4690057/96100](https://stackoverflow.com/a/4690057/96100)

如果您将 input 或 contenteditable 元素放在单独的 iframe 中，大多数浏览器（尽管不是 IE）将保留原始选择。

# authentication - 如何暂停 Windows 登录过程

> ID：12778511
> 
> 赞同：1
> 
> 时间：2012-10-08T09:07:49.083
> 
> 标签：authentication

我正在尝试创建一个应用程序/服务，它将在没有任何控制台或远程登录的情况下在机器上运行。如果任何用户尝试登录，此应用程序将按顺序执行以下任务：

1.  暂停登录过程。
2.  进行自己的处理，并在完成工作后，
3.  它应该允许 Windows 恢复登录过程。

我找不到任何方法可以暂停 Windows 登录过程。任何建议/帮助表示赞赏。

**注意：**我使用的是 Windows Embedded Standard 7。

# tridion - 从子出版物中隐藏该字段的可能解决方案是什么

> ID：12778514
> 
> 赞同：5
> 
> 时间：2012-10-08T09:07:58.333
> 
> 标签：tridion

我们有一个主要模式，用于许多地方的通用内容和许多网站（市场）的蓝图。

现在，其中一个网站（市场）想要一个额外的字段，但所有其他网站都不想在他们的出版物中看到这一点。

我建议重命名所有其他市场的字段，例如（未使用），但他们也不同意这一点。

从子出版物中隐藏该字段的可能解决方案是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T12:11:44.550

我的建议是不要隐藏该字段。只需将新字段添加为非强制性，并在其描述中明确指出它仅适用于市场 B，以便其他市场知道不使用它。这很简单，不需要任何努力，并且是一种免维护的解决方案。否则，GUI 扩展是您最好的选择。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:32:59.763

在不了解完整背景的情况下，很难给出建议。但总的来说，我不建议隐藏字段（即使 2011 年的 GUI 扩展和 2009 年的一些黑客攻击是可能的）。我认为 Tridion 提供了很多选项来解决开箱即用的难题。例如：

1.  将公共字段隔离到一个嵌入式模式中，并为市场 A 和市场 B 设置单独的内容模式，以重用公共字段
2.  将不同的字段隔离为市场 A 和市场 B 的内容模式，并在原始模式中创建一个链接到这些特定模式的组件链接字段。

通过文件夹的安全性，您可以限制对特定市场模式的访问。

# asp.net-mvc - 将解决方案分成不同的项目

> ID：12778516
> 
> 赞同：8
> 
> 时间：2012-10-08T09:08:05.533
> 
> 标签：asp.net-mvc

我目前正在学习 ASP.Net MVC；我正在使用带有 MVC4（这是最后一个版本）的 Visual Studio Express 2012，我对这些东西完全陌生。我的目标是将一个巨大的 Web 应用程序重写为 MVC，所以我被告知使用代码优先方法将我的主要解决方案分成 3 个项目：

*   核心（我猜的模型和控制器）
*   UI（视图、脚本和内容）
*   和数据库（将使用实体框架 5.0）

我对 MVC 非常熟悉，但没有将东西分成不同的项目。现在我有点迷茫，我不知道如何做到这一点，应该参考谁，在哪里，如何等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:19:51.773

您的解决方案可以这样构建：

1.  UI - ASP.NET MVC 应用程序项目，包含控制器、视图、视图模型、域模型和视图模型之间的映射逻辑、脚本、样式......

2.  DAL（EF 5.0、EF 自动生成的域模型、数据上下文，...）特定于数据检索的所有内容

然后 UI 层将引用 DAL 层。

有些人可能还选择将控制器、视图模型和映射逻辑外部化到第三层，该第三层反过来将引用 DAL 层。在这种情况下，UI 层将引用其他两个层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:10:32.820

这里有可用的教程：[http](http://www.asp.net/mvc) ://www.asp.net/mvc 它确实帮助我了解了 MVC 的基础知识，但请注意 - 有时视频中缺少部分，但你可以找到代码在其他地方不容易提供。

祝你好运 ：）

教程用于首先显示代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T09:18:42.863

create an empty solution using the Visual Studio Blank Solution template

add a solution folder (folder name will be your project name)

then right click that folder and select add project then select "class library" (for The c# classes domain logic)

same again right click the folder and select add project then select asp.net mvc3 template

then same way you create the test template as a new project.

For more information you can follow this book [http://www.apress.com/9781430234043](http://www.apress.com/9781430234043)

# python - 绕过内联 if 语句？Python

> ID：12778519
> 
> 赞同：0
> 
> 时间：2012-10-08T09:08:18.797
> 
> 标签：python, if-statement, for-loop, python-3.x, logic

所以我正在制作一个视频播放器，它会根据一些加权概率自动选择下一个视频。当视频进入时，它会从 csv 中读取其所有元标记，然后在概率滚动后查找下一个匹配项。我已经将所有各种元标记检查与 if 语句和 for 循环一起编程，但是客户刚刚要求为每个过滤器设置开关，我无法将头绕在最有效的方法上接近问题。

我对 Python 还很陌生，所以我想在尝试以最糟糕的方式做某事之前我会先问一下。我想知道（如果没有办法做到这一点，我只是还不知道）是否最好让开和关开关在它们到达这一点之前中断并更改变量，所以例如，当 on 开关打开时，每种可能颜色的列表将分配给变量颜色，以便它始终通过并且没有视频被颜色拒绝，从而保持相同的基本格式。

为了便于阅读，下面是我正在做的事情的简化版本。在它之前，程序从 csv 中获取它需要的所有变量，在最终打印之后，通过的变量被添加到一个好的选择列表中，该列表是随机抽取的：

```
for eachrow in table:
    Answer = False
    for eachcell in eachrow:
        if  color == req_color:
            if speed == req_speed:
                if exclusion == req_exclusion:
                    print ('No pass!')
                else:
                    Answer = True
                    print ('All attributes match')
    if Answer:
        print ('This passes') 
```

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:12:10.360

也许您正在寻找`continue`？

> continue 语句用于告诉 Python 跳过当前循环块中的其余语句并继续循环的下一次迭代。

[http://docs.python.org/reference/simple_stmts.html#continue](http://docs.python.org/reference/simple_stmts.html#continue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:20:25.333

谢谢大家的建议。我通过实际回到定义变量的位置解决了这个问题。我将它设置为当它关闭时，它将所有可能的变量发送到 if，这样它总是在它关闭时通过。这样，当开关打开并接受用户输入时，它会选择性地通过。我考虑了其他选择，但由于这个原型必须有一个快速的周转时间，这似乎是最好的选择。

再次感谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:11:39.200

听起来您想使用[continue](http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops)。Continue 有点像 break，除了 break 终止循环的地方， continue 只是跳过当前循环的其余部分并开始下一个循环。

我真的不知道你想做什么，但你可以尝试这样的事情：

```
testsToRun = ['speed','color']
for row in table:
    Answer = False
    for cell in row:
        if  cell['color'] == color and 'color' in testsToRun:
            print ('No pass!')
            continue
        if cell['speed'] == speed and 'speed' in testsToRun:
            print ('No pass!')
            continue
        if cell['exclusion'] == exclusion and 'exclusion' in testsToRun:
            print ('No pass!')
            continue
        Answer=True
        print ('All attributes match')
    if Answer:
        print ('This passes') 
```

# css - 将 textarea 高度设置为文本的高度

> ID：12778530
> 
> 赞同：0
> 
> 时间：2012-10-08T09:08:47.250
> 
> 标签：css, textarea

我想在表单上使用 textarea，但我希望当内容为空时（即在表单上）它是单行高`new`，并且只调整到`edit`表单上内容的高度。

我一直在玩一些 css 设置，但我真的不擅长前端开发，有人能指出我需要设置的属性的方向吗？

最好没有 JS，但这似乎是我迄今为止发现的唯一解决方案。当您在单个表单上添加多个 textarea 的自动调整大小时，它看起来很混乱而且很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:10:46.360

您可以将此插件用于 jQuery：[http ://www.jacklmoore.com/autosize](http://www.jacklmoore.com/autosize)

# xml - Magento 块属性

> ID：12778531
> 
> 赞同：2
> 
> 时间：2012-10-08T09:08:56.190
> 
> 标签：xml, magento, block

我有一个关于 Magento 块的问题。块的示例`product_list`如下所示：

```
{{block type=”catalog/product_list” 
        category_id=”3″ 
        column_count=”2″ 
        template=”catalog/product/list.phtml”}} 
```

我怎么知道一个块的“set”属性？喜欢`category_id`和`column_count`？

有人有一个列表或指南来找出所有 Magento 块类型的设置属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:22:42.100

Magento 使用魔法获取和设置，因此您基本上无法预测在程序执行步骤的给定时间内设置了什么。但是，您可以通过调用检测任何 Varien_Object 成员及其值

```
print_r($object->getData()); 
```

或获取设置变量的键，因为大多数时候对象包含太大而无法输出的对象：

```
print_r(array_keys($object->getData())); 
```

这将揭示您可以从对象调用的变量：

```
$object->getVariableKey(); 
$object->getData('variable_key'): 
```

要获取可以在给定对象上调用的所有类方法，您可以使用以下内容：

```
print_r(get_class_methods($object)); 
```

# gwt - GWT DataGrid 在行之间放置

> ID：12778532
> 
> 赞同：1
> 
> 时间：2012-10-08T09:08:58.827
> 
> 标签：gwt, datagrid, drag-and-drop

我们正在使用[gwtquery-plugins](http://code.google.com/p/gwtquery-plugins/wiki/DragAndDropPluginForGWTDeveloppers)，为了简单起见，我会说数据网格指的是 DragAndDropDataGrid。

我们需要一个数据网格来捕捉行之间的丢弃事件。数据网格有`addDropHandler()`方法，但只有当可拖动对象放在单元格上时才会调用。在行之间放置它就像在网格外放置一个对象，没有任何效果。我想这与 html 空间有关，而不是网格本身。

这可以实现吗？我们真的不想走我们必须在每行之间添加 dndWidgets 的道路。

# python - 有没有办法将装饰器应用于需要有关类的信息的 Python 方法？

> ID：12778533
> 
> 赞同：4
> 
> 时间：2012-10-08T09:08:59.957
> 
> 标签：python, class, methods, decorator, python-decorators

当你装饰一个方法时，它还没有绑定到类，因此还没有`im_class`属性。我正在寻找一种方法来获取有关装饰器内的类的信息。我试过这个：

```
import types

def decorator(method):

    def set_signal(self, name, value):
        print name
        if name == 'im_class':
            print "I got the class"

    method.__setattr__ = types.MethodType(set_signal, method)

    return method

class Test(object):
    @decorator
    def bar(self, foo):
        print foo 
```

但它不打印任何东西。

我可以想象这样做：

```
class Test(object):
    @decorator(klass=Test)
    def bar(self, foo):
        print foo 
```

但如果我能避免它，它会让我很开心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:57:34.127

`__setattr__`仅在显式`object.attribute =`分配时调用；构建一个类不使用属性分配，而是构建一个字典 ( `Test.__dict__`)。

但是，要访问该课程，您有几个不同的选择：

1.  改用类装饰器；它将在构建完成后传递给完成的类，您可以通过在类中替换它们（装饰）来装饰该类上的各个方法。您可以使用函数装饰器和类装饰器的组合来标记要装饰的方法：

    ```
    def methoddecoratormarker(func):
        func._decorate_me = True
        return func

    def realmethoddecorator(func):
        # do something with func. 
        # Note: it is still an unbound function here, not a method!
        return func

    def classdecorator(klass):
        for name, item in klass.__dict__.iteritems():
            if getattr(item, '_decorate_me', False):
                klass.__dict__[name] = realmethoddecorator(item) 
    ```

    当然，您可以使用元类而不是类装饰器来实现相同的目的。

2.  作弊，并用于[`sys._getframe()`](http://docs.python.org/library/sys.html#sys._getframe)从调用框架中检索类：

    ```
    import sys

    def methoddecorator(func):
         callingframe = sys._getframe(1)
         classname = callingframe.f_code.co_name 
    ```

    请注意，您只能检索类的*名称*；类本身仍在构建中。您*可以*将项目添加到`callingframe.f_locals`（映射），它们将成为新类对象的一部分。

3.  调用方法时访问`self`。`self`毕竟是对实例的引用，并且`self.__class__`至少将成为定义函数的原始类的子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:40:23.627

我的严格回答是：这是不可能的，因为在执行装饰器时该类还不存在。

更长的答案将取决于您非常确切的要求。正如我所写，如果该类尚不存在，您将无法访问该类。一种解决方案是，将修饰的方法标记为稍后“转换”。然后在创建类后使用元类或类装饰器应用您的修改。

另一种选择涉及一些魔法。在 中查找该`implements`方法的实现`zope.interfaces`。它可以访问有关刚刚解析的类的信息。不知道它是否足以满足您的用例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:30:17.997

您可能想看看[描述符](http://docs.python.org/howto/descriptor.html)。它们允许您实现在`__get__`访问属性时使用的 a，并且可以根据对象及其类型返回不同的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:50:45.037

使用方法装饰器将一些标记属性添加到有趣的方法中，并使用一个元类来迭代方法、查找标记属性并执行逻辑。元类代码在创建类时运行，因此它具有对新创建类的引用。

```
class MyMeta(object):
  def __new__(...):
    ...
    cls = ...
    ... iterate over dir(cls), find methods having .is_decorated, act on them
    return cls
def decorator(f):
  f.is_decorated = True
  return f
class MyBase(object):
  __metaclass__ = MyMeta
class MyClass(MyBase):
  @decorator
  def bar(self, foo):
    print foo 
```

如果您担心程序员`MyClass`忘记使用，您可以通过检查调用者堆栈框架的全局字典（ ）`MyBase`来强制设置元类。`decorator``sys._getframe()`

# ipv6 - IPv6 中的 DHCP，选项 82

> ID：12778539
> 
> 赞同：0
> 
> 时间：2012-10-08T09:09:18.077
> 
> 标签：ipv6, dhcp

我将在我的应用程序中开发 DHCP IPv6 客户端配置。我想了解一些有关 IPv6 中 DHCP 选项的详细信息。1.同样在 DHCP v4 中，我们在 v6 中没有选项 82。如果不是，什么是选项 82 的替代品

2.我正在使用电缆调制解调器和 CPE 环境在我的 IPv4 的 CPE 和 CM 初始化中，我使用以下配置将 DISCOVER 消息发送到服务器

```
DHCPMessage messageOut = new DHCPMessage();
        // fill DHCPMessage object 
        messageOut.setOp((byte) 1); 
        messageOut.setHtype((byte) 1);
        messageOut.setHlen((byte) 6);
        messageOut.setHops((byte) 0);
        messageOut.setXid(myXid); // should be a random int
        messageOut.setSecs((short) 0);
        messageOut.setFlags((short) 0);
        byte[] mac = new byte[16];
        System.arraycopy(myMac,0,mac,0,6);
        messageOut.setChaddr(mac); // set globaly defined hwaddr
        byte[] op82data = DHCPUtils.buildOption82WithUserData(myCMmac, myOption82UserData, myOption82Field9Val);
        messageOut.setOption(82, op82data); // cm mac must be imcluded in discover.
        byte[] op67data = DHCPUtils.getOption67(myOption67UserData);
        messageOut.setOption(67, op67data);
        messageOut.setFile(DHCPUtils.getOption67BootFile(op67data));
        byte[] opt = new byte[1];
        opt[0] = (byte) DHCPMessage.DISCOVER;
        messageOut.setOption(53, opt);
        myState = GET_OFFER_AND_SEND_REQUEST;
        return sendDHCPMessage(messageOut) 
```

想知道如何在 IPv6 for SOLICIT 消息中实现这一点。

我无法理解 DOCSIS 3.0 规范，因为我是新手。任何帮助都是不言而喻的。急需一些。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T06:46:46.490

DHCP option 81 为 Relay Agent 信息，参考[http://www.iana.org/assignments/bootp-dhcp-parameters/bootp-dhcp-parameters.xml](http://www.iana.org/assignments/bootp-dhcp-parameters/bootp-dhcp-parameters.xml)和 rfc3046

中继代理远程 ID 选项 37 是 DHCPv6 等效项，在 RFC 4649 中指定。

我没有任何关于将 RFC 4649 与 DOCSIS 一起使用的信息，但我希望以上内容有所帮助。

# ios - 如何在 iPhone 4.3 模拟器上运行 Quickdialog？

> ID：12778540
> 
> 赞同：0
> 
> 时间：2012-10-08T09:09:18.883
> 
> 标签：ios, xcode, ios-simulator

我是使用 Quickdialog 的新手。我按照官方网站上的步骤在我的项目中导入了 QuickDialog（我的项目不使用 ARC）。我正在使用 xCode 4.2，但在 iPhone 4.3 模拟器上运行时出现“_dyld_dyld_fatal_error”。有关崩溃的更多信息，请[在此处](https://quickdialog.googlegroups.com/attach/1a363b21e5231a3d/crash.png?pli=1&view=1&part=4)查看随附的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:57:35.363

我是开发人员，QuickDialog 需要 iOS5 和 ARC 编译器。如果您要在没有它的情况下使用它，您将需要更改很多代码，而且我没有支持它的计划。

# winapi - 自定义绘制 ListView 但如果长于列宽则需要在末尾显示 3 个点

> ID：12778542
> 
> 赞同：1
> 
> 时间：2012-10-08T09:09:22.123
> 
> 标签：winapi, visual-c++, mfc, gdi

在 NM_CUSTOMDRAW 中，我画了一些东西并返回 CDRF_SKIPDEFAULT。但是最后的 3 个点不显示文本是否长于列宽。

如何显示 3 个点但允许自定义绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:56:48.350

使用`DrawText`API 绘制带有`DT_END_ELLIPSIS`标志的文本。更多信息在这里：

[http://support.microsoft.com/kb/249678](http://support.microsoft.com/kb/249678)

# c++ - 如何检查输出流是否是 C++ 中的 std::cout？

> ID：12778544
> 
> 赞同：2
> 
> 时间：2012-10-08T09:09:26.053
> 
> 标签：c++, exception, stream, cout

我正在实现一个输出流运算符<< 重载，我需要检查输出流参数 os 是否为 std::cout，如果不是，则抛出 std::runtime_error - 我该如何检查它？

```
 friend std::ostream& operator<<(std::ostream& os, const Software &soft) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T09:11:13.390

我质疑那种会导致你认为你必须这样做的逻辑，但如果你真的想......

```
if (&os != &std::cout) {
    throw std::runtime_error(/* ... */);
} 
```

# eclipse - Eclipse：指向同一物理文件的两个链接资源在编辑器中打开两次

> ID：12778546
> 
> 赞同：1
> 
> 时间：2012-10-08T09:09:31.337
> 
> 标签：eclipse, eclipse-plugin

我必须在 Eclipse 项目中创建指向单个物理文件的多个[链接资源。](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/concepts-13.htm)问题是，每当我尝试打开这两个文件时，编辑器都会在单独的选项卡中打开每个文件，它不会将我定向到已经打开的文件。

这与 VisualStudio 的工作方式不同。VisualStudio 可以选择将现有文件添加到项目中。一个文件可以在多个项目中使用。每当我们打开这两个文件时，VS 都会将我们定向到已打开的文件，它不会在新选项卡中打开该文件。

开发人员可能同时打开/编辑多个文件，而没有注意到同一个物理文件被打开了多次。这种行为可能会导致很多问题，例如，如果文件 1 被修改但未保存，然后文件 2 被修改然后保存，则之前在文件 1 中所做的所有修改都将丢失。

是否有任何偏好关闭/打开此行为？如果没有，我可以将这个钩子实现为插件吗？

# bash - 命令在脚本中未正确执行

> ID：12778547
> 
> 赞同：1
> 
> 时间：2012-10-08T09:09:33.647
> 
> 标签：bash

命令：

```
value=${value%?} 
```

将从变量中删除最后一个字符。有什么合乎逻辑的原因为什么它不能在脚本中工作吗？在我的脚本中，它没有任何效果。

```
if [[ $line =~ "What I want" ]]
    then
            if [[ $CURRENT -eq 3 ]]
            then
                    echo  "line is " $line 
                    value=`echo "$line" | awk '{print $4}'`
                    echo "value = "$value   
                    value=${value%?}
                    echo "value = $value "

                    break
            fi
fi 
```

我不能发布整个脚本，但这是我所指的部分。循环输入正确，但 2 echo $value 行返回相同的内容。

编辑 - 这个问题仍然存在。该代码在终端中运行良好，但在脚本中都失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:26:41.897

Echo 在这一行的 $value 中添加了一个额外的行字符：

```
value=`echo "$line" | awk '{print $4}'` 
```

并且 afaik 用 删除了额外的字符`%?`，所以它似乎根本没有改变任何东西。

改为尝试`echo -n`，它不会添加`\n`到字符串中：

```
value=`echo -n "$line" | awk '{print $4}'` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T17:30:10.147

由于您只提供了代码中的相关部分而不是整个文件，我将假设您的文件的第一行显示为**`#!/bin/sh'**。这是你的问题。您正在尝试执行的操作（参数扩展）特定于 bash，因此除非**/bin/sh**通过符号链接指向 bash，否则您将在不理解 bash 参数扩展的 shell 中运行脚本。

要查看 /bin/sh 的真正含义，您可以执行以下操作：**ls -l /bin/sh**。为了纠正这种情况，通过将顶部的 `shebang' 更改为**`#!/bin/bash'来强制脚本在 bash 中运行**

# zend-framework - 如何在zend框架中以不同的顺序显示数据库中的数据？

> ID：12778549
> 
> 赞同：0
> 
> 时间：2012-10-08T09:09:35.233
> 
> 标签：zend-framework, datatable, zend-db

我正在使用数据表来列出我的数据。它以与数据库表中相同的顺序显示我的数据。但我想以不同的顺序展示它。我的代码：

```
$userData = array();
$row = array();
$action = array();
foreach ($students as $key => $student) {
    foreach ($student as $key => $value) {
        switch ($key) {
            case 'firstName' :
                $firstName = $value;
                break;

            case 'lastName' :
                $lastName = $value;
                $row[] = $lastName;
                break;

            case 'phone' :
                $row[] = $value;
                break;

            case 'email' :
                $row[] = $value;
                break;

            case 'studentId':
                $row['DT_RowId'] =  $value;
              $action[] = "<a id = {$value} class = 'update'>Edit</a>&nbsp | &nbsp<a id = {$value} class = 'delete'>Delete</a> ";
        }
    }
    $userData[] = array_merge($row, $action);
    unset($row);
    unset($action);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:31:01.437

我没有得到确切的信息，但是如果您希望列以不同的顺序，我确实喜欢这种观点：-

```
<?php foreach $zendDbRowObject->getTable()->getDisplayOrder() as $fieldName): ?>
<?php echo $zendDbRowObject->$fieldName; ?>
<?php endforeach; ?> 
```

控制器：-

```
public function getDisplayOrder() {
// fake column names obviously... use yours here.
 return array(
  'column5',
  'column1',
  'column4',
  'column2',
  'column3'
 );
 } 
```

# ajax - 通过数据库优化加速 ModX Revolution ajax 调用

> ID：12778550
> 
> 赞同：1
> 
> 时间：2012-10-08T09:09:38.727
> 
> 标签：ajax, database, indexing, modx, modx-revolution

我正在处理 ModX Revolution (2.2.2-pl) 安装中的一些加载速度问题。我认为问题的根源在于数百个站点是托管的，并且可以从同一个管理员窗口访问，但不幸的是，我在该设置中没有发言权。

似乎 ajax 调用很麻烦 - 完全加载侧边栏大约需要 10 秒，保存大约需要 15 秒。

我最近涉足了一些数据库的东西，并遇到了一些关于索引的信息。服务器上的空间不是一个大问题，那么数据库中有什么东西可以索引来加速这些调用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:53:52.180

您使用的是什么版本的 Modx Revo？在过去的几个版本中，最近有很多性能改进。

[相关帖子](https://stackoverflow.com/questions/4702409/modx-revolution-slow-backend)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:30:13.127

您是否查看过系统设置中的 javascript 和 css 选项、限制？

最新版本的 modx 在速度上不断提高[即保持更新到最新]

浏览器也会有所作为，我发现 Chrome 是最快的~我假设它有最快的 javascript 引擎。

除此之外，您应该能够通过创建只能访问每个给定上下文的管理员用户来自定义管理器，以便您为每个上下文 [每个网站] 拥有不同的管理登录名。您应该能够在 modx 论坛中获得很多帮助。

*****编辑*******

 **管理器中有几个选项可以调整/启用/禁用，这可能会有所帮助： - 使用压缩的 CSS - 使用压缩的 JavaScript 库 - 压缩 Javascript 时使用分组 - 压缩的最大 JavaScript 文件 - 管理器 JS/CSS 压缩缓存年龄

尽管其中大多数已经“优化”了

我认为有一种方法可以在您保存时禁用资源浏览器刷新，但我现在似乎找不到它。

如果您的管理已经被限制在不同的上下文中，我认为您甚至不应该能够看到不在您有权访问的上下文中的资源。即，如果您仍然可以看到其他资源，那么您仍然有 ~some~ 某种访问权限。在我看来，您的问题是资源浏览器重绘所需的时间，而不是服务器处理它所需的实际时间[对吗？]**

# android - 如何检查 SqlLite 数据库文件并获取我定义的数据库用户版本？

> ID：12778551
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:09:37.757
> 
> 标签：android, sqlite

我正在开发一个使用 sq-lite 数据库的应用程序。在我的应用程序中，当用户点击备份我的 sq-lite db 文件保存在另一个地方时。我现在编写了我的应用程序的新版本，在新版本中，我的 sq-lite db 有更多字段。如何检查 sq-lite 数据库文件并获取该文件的用户版本以使用真实字段打开它以避免强制关闭？在我的应用程序的新版本中，数据库版本为 2：

```
private final static String DB_NAME="cDb";
private final static String DB_TABLE="_table";
private final static int DB_VERSION=2; 
```

但在旧版本中，我的 db 版本是 1。如何检查我的 db 文件是针对版本 1 还是版本 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:25:32.600

使用`PRAGMA user_version`sql获取数据库版本

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:20:07.910

使用[getVersion](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#getVersion%28%29)获取数据库版本，但无论如何只是为了让您在打开数据库后立即知道它是否应该触发旧的[onUpgrade 。](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T09:12:59.450

在 phonegap sqlite（cordova-sqlite-storage 插件）中，您可以获得 user_version 为：

```
db.executeSql('PRAGMA user_version', [], migrate, function(){console.log('unable to fetch user_version');});

function migrate(db, resultSet {console.log(resultSet.rows.item(0).user_version);} 
```

# c# - 动态 LINQ OrderBy + 方法计数

> ID：12778560
> 
> 赞同：5
> 
> 时间：2012-10-08T09:10:11.580
> 
> 标签：c#, linq

我在网页中显示了一个对象**公司**表，我正在使用动态 Linq OrderBy 对每个属性进行排序。我正在使用此代码[https://stackoverflow.com/a/233505/265122](https://stackoverflow.com/a/233505/265122)

```
public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string property)
{
    return ApplyOrder<T>(source, property, "OrderBy");
}
public static IOrderedQueryable<T> OrderByDescending<T>(this IQueryable<T> source, string property)
{
    return ApplyOrder<T>(source, property, "OrderByDescending");
}
public static IOrderedQueryable<T> ThenBy<T>(this IOrderedQueryable<T> source, string property)
{
    return ApplyOrder<T>(source, property, "ThenBy");
}
public static IOrderedQueryable<T> ThenByDescending<T>(this IOrderedQueryable<T> source, string property)
{
    return ApplyOrder<T>(source, property, "ThenByDescending");
}
static IOrderedQueryable<T> ApplyOrder<T>(IQueryable<T> source, string property, string methodName) {
    string[] props = property.Split('.');
    Type type = typeof(T);
    ParameterExpression arg = Expression.Parameter(type, "x");
    Expression expr = arg;
    foreach(string prop in props) {
        // use reflection (not ComponentModel) to mirror LINQ
        PropertyInfo pi = type.GetProperty(prop);
        expr = Expression.Property(expr, pi);
        type = pi.PropertyType;
    }
    Type delegateType = typeof(Func<,>).MakeGenericType(typeof(T), type);
    LambdaExpression lambda = Expression.Lambda(delegateType, expr, arg);

    object result = typeof(Queryable).GetMethods().Single(
            method => method.Name == methodName
                    && method.IsGenericMethodDefinition
                    && method.GetGenericArguments().Length == 2
                    && method.GetParameters().Length == 2)
            .MakeGenericMethod(typeof(T), type)
            .Invoke(null, new object[] {source, lambda});
    return (IOrderedQueryable<T>)result;
} 
```

这很好，但我也想根据员工人数对公司进行排序。

像这样：**query.OrderBy("Employees.Count")**

到目前为止，我尝试动态调用 Count 方法，但没有成功。

我修改了这样的代码：

```
foreach(string prop in props)
{
    if (prop == "Count")
    {
        var countMethod = (typeof(Enumerable)).GetMethods().First(m => m.Name == "Count").MakeGenericMethod(type);
        expr = Expression.Call(countMethod, expr);
        break;
    }

    // Use reflection (not ComponentModel) to mirror LINQ.
    PropertyInfo pi = type.GetProperty(prop);
    expr = Expression.Property(expr, pi);
    type = pi.PropertyType;
} 
```

但我有一个例外`expr = Expression.Call(countMethod, expr);`

例外是：

```
ArgumentException
Expression of type 'System.Collections.Generic.ICollection`1[Employee]'
cannot be used for parameter of type
'System.Collections.Generic.IEnumerable`1[System.Collections.Generic.ICollection`1
[Employee]]' of method 'Int32 Count[ICollection`1]
System.Collections.Generic.IEnumerable`1[System.Collections.Generic.ICollection`1
Employee]])' 
```

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:54:17.507

从下面的[要点](https://gist.github.com/3899759)中，我找到了一种简单的方法，可以将所有基本类型和接口的属性展平，如本文[所示](https://stackoverflow.com/questions/358835/getproperties-to-return-all-properties-for-an-interface-inheritance-hierarchy)。

所以我实现了 PropertyInfo 的扩展方法，它将返回类型继承的所有接口和基类的所有属性。问题是 IList 没有 Count 属性，但 iCollection 有。将`public static PropertyInfo[] GetPublicProperties(this Type type)`平展所有属性，我们从那里得到正确的属性，这应该适用于现在的任何属性，而不仅仅是 Count。

```
public class Program
{
    private static IList<Company> _companies;

    static void Main(string[] args)
    {
        var sort = "Employees.Count";
        _companies = new List<Company>();

        _companies.Add(new Company
                           {
                               Name = "c2",
                               Address = new Address {PostalCode = "456"},
                               Employees = new List<Employee> {new Employee(), new Employee()}
                           });
        _companies.Add(new Company
                           {
                               Name = "c1",
                               Address = new Address {PostalCode = "123"},
                               Employees = new List<Employee> { new Employee(), new Employee(), new Employee() }
                           });

        //display companies
        _companies.AsQueryable().OrderBy(sort).ToList().ForEach(c => Console.WriteLine(c.Name));

        Console.ReadLine();
    }
}

public class Company
{
    public string Name { get; set; }
    public Address Address { get; set; }
    public IList<Employee> Employees { get; set; }
}

public class Employee{}

public class Address
{
    public string PostalCode { get; set; }
}

public static class OrderByString
{
    public static IOrderedQueryable<T> OrderBy<T>(this IQueryable<T> source, string property)
    {
        return ApplyOrder<T>(source, property, "OrderBy");
    }

    public static IOrderedQueryable<T> ApplyOrder<T>(IQueryable<T> source, string property, string methodName)
    {
        string[] props = property.Split('.');
        Type type = typeof(T);
        ParameterExpression arg = Expression.Parameter(type, "x");
        Expression expr = arg;

        foreach (string prop in props)
        {
            // use reflection (not ComponentModel) to mirror LINQ
            PropertyInfo pi = type.GetPublicProperties().FirstOrDefault(c => c.Name == prop);
            if (pi != null)
            {
                expr = Expression.Property(expr, pi);
                type = pi.PropertyType;
            }
            else { throw new ArgumentNullException(); }
        }
        Type delegateType = typeof(Func<,>).MakeGenericType(typeof(T), type);
        LambdaExpression lambda = Expression.Lambda(delegateType, expr, arg);

        object result = typeof(Queryable).GetMethods().Single(
                method => method.Name == methodName
                        && method.IsGenericMethodDefinition
                        && method.GetGenericArguments().Length == 2
                        && method.GetParameters().Length == 2)
                .MakeGenericMethod(typeof(T), type)
                .Invoke(null, new object[] { source, lambda });
        return (IOrderedQueryable<T>)result;
    }

    public static PropertyInfo[] GetPublicProperties(this Type type)
    {
        if (type.IsInterface)
        {
            var propertyInfos = new List<PropertyInfo>();

            var considered = new List<Type>();
            var queue = new Queue<Type>();
            considered.Add(type);
            queue.Enqueue(type);
            while (queue.Count > 0)
            {
                var subType = queue.Dequeue();
                foreach (var subInterface in subType.GetInterfaces())
                {
                    if (considered.Contains(subInterface)) continue;

                    considered.Add(subInterface);
                    queue.Enqueue(subInterface);
                }

                var typeProperties = subType.GetProperties(
                    BindingFlags.FlattenHierarchy
                    | BindingFlags.Public
                    | BindingFlags.Instance);

                var newPropertyInfos = typeProperties
                    .Where(x => !propertyInfos.Contains(x));

                propertyInfos.InsertRange(0, newPropertyInfos);
            }

            return propertyInfos.ToArray();
        }

        return type.GetProperties(BindingFlags.FlattenHierarchy
            | BindingFlags.Public | BindingFlags.Instance);
    }
} 
```

# ruby-on-rails-3 - rails add_column 具有默认值但默认值不生效

> ID：12778561
> 
> 赞同：2
> 
> 时间：2012-10-08T09:10:17.100
> 
> 标签：ruby-on-rails-3

我的 rails 版本是 3.2.8 并使用默认数据库。这是我的迁移代码：

```
class AddQuantityToLineItem < ActiveRecord::Migration
  def change
    add_column :line_items, :quantity, :integer,:default=>1
  end
end 
```

[我在这里找到了一个关于 :default 选项的解释](https://stackoverflow.com/questions/4012871/how-do-default-0-and-null-false-differ-for-integer-fields-in-migrations)，正如它所说，当我创建一个新的 LineItem 时，它应该有一个默认数量 = 1，但这是我从 rails 控制台得到的：

```
lineb=LineItem.new
#<LineItem id: nil, product_id: nil, cart_id: nil, created_at: nil, updated_at: nil, quantity: nil> 
```

> 当我从数据库中获取 LineItem 时，数量字段也为零。

这是 db/schema.rb ：

```
ActiveRecord::Schema.define(:version => 20121008065102) do

  create_table "carts", :force => true do |t|
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

  create_table "line_items", :force => true do |t|
    t.integer  "product_id"
    t.integer  "cart_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
    t.integer  "quantity"
  end

  create_table "products", :force => true do |t|
    t.string   "title"
    t.text     "description"
    t.string   "image_url"
    t.decimal  "price",       :precision => 8, :scale => 2
    t.datetime "created_at",                                :null => false
    t.datetime "updated_at",                                :null => false
  end

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:29:57.887

您的迁移应该可以正常工作。根据您的架构，虽然它看起来并没有真正生效，因为`t.integer "quantity"`它没有默认值。

架构中的行`quantity`应该如下所示：

```
t.integer  "quantity",   :default => 1 
```

确保您已实际运行迁移 ( `bundle exec rake db:migrate`)，如果这不起作用，则回滚 ( `bundle exec rake db:rollback`) 并再次运行迁移（如 @surase.prasad 建议的那样）。

# excel - 如何获取excel弹出日历？

> ID：12778567
> 
> 赞同：0
> 
> 时间：2012-10-08T09:10:52.790
> 
> 标签：excel, vba

我有 Excel 2010，发现在单元格或用户窗体中获取弹出日历的说明很混乱。

```
File - Options - Add ins - Active Add-ins: 'Pop-Up Calendar is there 
```

我从这个站点下载了这个插件：[http](http://www.fontstuff.com/vba/vbatut07.htm)
://www.fontstuff.com/vba/vbatut07.htm 不过，在加载文件时，我收到了消息

```
Could not load an object because it is not available on this machine. 
```

Alt+f11 - ToolBox - RightClick - Additional Controls - 我看不到任何 Calendar 或 MonthView 控件。
在某处我发现必须安装 Access，但安装了 Access IS (office 2010 Pro)。
我想要一个单元格上的日历（通过单击或右键单击）并且在一个用户窗体中也可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T11:55:02.563

我遇到了和你一样的问题，经过网上的大量研究，我设法解决了这个问题。事实上，日历或 MonthView 控件已从 MS Excel 2010 中删除。您必须下载控件并安装它。下面是下载链接

[http://activex.microsoft.com/controls/vb6/MSCOMCT2.CAB](http://activex.microsoft.com/controls/vb6/MSCOMCT2.CAB)

*   提取两个文件 | .inf 文件和 .ocx 文件
*   安装 | 右键单击 .inf 文件 | 点击“安装”
*   移动 .ocx 文件 | 将 .ocx 文件移动到“C:\Windows\system32”
*   运行 CMD | 开始菜单 -> 搜索 -> "CMD.exe" | 右键单击图标 | 选择“以管理员身份运行”
*   注册 Active-X 文件 | 键入“regsvr32 c:\windows\system32\MSCOMCT2.ocx”
*   打开 Excel | 打开 VB 编辑器
*   激活控制 | 工具->参考 | 选择“Microsoft Windows 通用控件 2-6.0 (SP6)”
*   用户窗体控件 | 在 VB 项目中选择任何用户窗体 | 工具->附加控件选择“Microsoft Monthview Control 6.0 (SP6)”
*   为 VBA 用户窗体使用“日期选择器”控件

希望你现在得到它，如果没有，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:08:58.843

在附加控件列表中，搜索**Microsoft 日期和时间选择器 Control 6.0 (SP6)**

# iphone - 在单个tableview中显示segmentedControl对应的TableViews而不推送新视图

> ID：12778570
> 
> 赞同：0
> 
> 时间：2012-10-08T09:10:58.123
> 
> 标签：iphone, objective-c, uitableview, uisegmentedcontrol

我有一个 tableViewController，我使用 Interface Builder 插入了一个有两个段的分段控制器。由于默认情况下始终选择第一段，因此在显示与第一段对应的表格视图时我没有遇到任何问题。但是，当我单击第二个段时，我想显示另一个 tableView。

问题来了。我在单击第二个段时调用 newTableViewController 类。因此，这种观点正在被推动。请建议我在单击段时将这两个 tableViews 放在主 tableView 中的方法。

我使用 switch case 在段之间切换。

这是代码的相关部分：此方法在 FirstTableViewController 中，因为默认情况下选择了第一段。

```
-(IBAction) segmentedControlChanged
{
     switch(segmentedControl.selectedSegmnentIndex)
     {
        case 0:
         //default first index selected. 
         [tableView setHidden:NO];
         break;
         case 1:
         NewViewController *controller=[[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
         self.navigationController pushViewController:controller animated:YES];
         [controller release];
         break;
         default:
         break;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:24:15.480

将下面的代码作为 **案例 1 的第一行：**

```
if(self.tblView.isHidden==NO)
    self.tblView.hidden=YES; 
```

就像，，，

```
case 1:
         if(self.tblView.isHidden==NO)
              self.tblView.hidden=YES;

         NewViewController *controller=[[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
         self.navigationController pushViewController:controller animated:YES];
         [controller release];
         break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:16:14.830

您应该在同一个类中创建两个或更多`UITableViews`，或者更好地为单个创建不同的数组`UITableView`，然后使用条件将数组添加到同一个表中。我希望你明白我的意思。你不应该使用不同的类方法，除非它真的很重要。

此外，这将为您节省导入不同`UITableViews`类的麻烦，从而减少您的内存管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:18:52.117

To add Two tableview in same class, you have to use Tag for UITableView. Set Tag and upload data as per selected Segment.

I think [This](https://stackoverflow.com/questions/5747889/two-uitableview-in-the-same-view) is having same issue.

Edit. **There are multiple options**

1.  If table structure/ look is same, you can use two array as input and can use.
2.  You can use Two different UITableView with conditions or use Tag for Table View

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T09:19:17.157

1.Create one view controller say: MainViewController inherits UIViewController(not UITableViewController).

2.In MainViewController create two tableView say mTableView1 and mTableView2 and assign tag to both the tableview say 100 and 101 respectively.

3.Create one variable which will store the value based on segment selected say if first segment is selected then var = 100 and so.

4.In tableview datasource and delegate methods use this var to find out which segment is selected, and display respective tableview.

And if your tableview structure and functionality is same then you can even use single tableview and pass data to display in tableview depending upon segment selected.

Code: In viewDidLoad add following code:

```
m_TableView1 = [[UITableView alloc] initWithFrame:yourFrame];
m_TableView1.tag = 100;
    m_TableView1.dataSource = self;
    m_TableView1.delegate = self;
    [self.view addSubview: m_TableView1];
    [m_TableView1 release];

m_TableView2 = [[UITableView alloc] initWithFrame:yourFrame];
m_TableView2.tag = 101;
    m_TableView2.dataSource = self;
    m_TableView2.delegate = self;
    [self.view addSubview: m_TableView2];
    [m_TableView2 release]; 
```

Then in datasource and delegate methods use tag and provide appropriate data as follows:

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     static NSString *CellIdentifier = @"Cell";
            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil) {
                cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

            }
    if(tableView.tag == 100)
       cell.titleLabel.text = [NSString stringWithFormat:"First table, cell%d",indexPath.row];
   else
     cell.titleLabel.text = [NSString stringWithFormat:"Second table, cell%d",indexPath.row];

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:14:11.833

改变这种方式：

1>默认选择一个Tableview和Segmentation Control，第一个段被选中，First Table view是front View，并将其userinteraction设置为false

2>选择第二段时隐藏第一个tableview并将旧的tableview发送回旧表视图，并使其可见设置其用户互动true true true

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T09:36:02.860

```
-(IBAction) segmentedControlChanged
{
     switch(segmentedControl.selectedSegmnentIndex)
     {
        case 0:
         //default first index selected. 
         [tableView setHidden:NO];
      if([self.view viewWithTag:9999]){
      [[self.view viewWithTag:9999]removeFromSuperView]; //remove other table
     }
}
         break;
         case 1:
         NewViewController *controller=[[NewViewController alloc] initWithNibName:@"NewViewController" bundle:nil];
         [self.view addSubView:controller.view];
        [controller.view setTag:9999];
         break;
         default:
         break;
     }
}

    enter code here 
```

# node.js - 如何编码 HTML 元素属性

> ID：12778578
> 
> 赞同：3
> 
> 时间：2012-10-08T09:11:21.967
> 
> 标签：node.js, ejs

如何从 NodeJS 中的 EJS 模板编码 HTML 属性。我需要做类似的事情：

```
<img onmouseover=<% myString %> /> 
```

然后 myString 将被正确转义并引用为有效属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:39:44.557

你可以试试这个：

```
npm install node-html-encoder

app.locals.encoder = require('node-html-encoder').Encoder;

<%= encoder.htmlEncode('<foo /> "bar"') %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:23:00.263

简短的回答：

```
myString = myString.replace(/'|\\/g, '\\$&'); 
```

但是，如果您也需要转义 HTML 特殊字符，您可以尝试：

```
myString = myString.replace(/&/g, '&amp;');
myString = myString.replace(/</g, '&lt;');
myString = myString.replace(/>/g, '&gt;'); 
```

PS 注意不要使用 HTML 字符的替换来转义 JavaScript 运算符！

# c# - Func NUnit 等式比较

> ID：12778579
> 
> 赞同：2
> 
> 时间：2012-10-08T09:11:24.363
> 
> 标签：c#, nunit, equality, func

平等比较如何为 a 工作`Func`？我已将问题的复杂性降低到这些单元测试：

```
[Test]
public void Will_Pass()
{
    Func<string> func = () => "key";
    Assert.That(func, Is.EqualTo(func));
}

[Test]
public void Will_Fail()
{
    Func<string> funcA = () => "key";
    Func<string> funcB = () => "key";
    Assert.That(funcA, Is.EqualTo(funcB));
} 
```

我需要测试 - 并成功断言 - a 的一个实例`Func`等于另一个实例。所以我基本上需要一种方法来让 Failing 测试通过。

有没有办法在不创建自定义类型和覆盖的情况下做到这一点`Equals()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:17:34.037

Your failing test *shouldn't* pass. They're not equal functions as far as anything in .NET is concerned - at least with the current Microsoft C# compiler implementation. The delegates will refer to separate generated methods (easily verified by looking at the IL.) The language specification *allows* them to be equal, but doesn't require it, and I don't know of any implementation that would do this.

Equality comparison for delegates basically consists of (for a single-action delegate):

*   Do the delegates refer to the same method?
*   If the delegates have targets, are those targets equal?

The first condition will be false in your test.

# c++ - 模板中的非模板静态计数器

> ID：12778581
> 
> 赞同：1
> 
> 时间：2012-10-08T09:11:28.283
> 
> 标签：c++, templates, static

我有一个模板 Singleton 类，用于我的代码的一定数量的重要组件。使用单例代码模型不是这个问题的重点。

现在，我想为这个类添加一个静态计数器，它由使用这个模板的每个类共享。让我为您编写代码（代码并不详尽）：

```
template <class T>
class Singleton
{
public:
   Singleton(const std::string &name){ 
      printf("%s CTOR call #%d\n", name.c_str(), _counter);  
      _counter++; 
   }
   virtual ~Singleton(){}
private:
   static int _counter; // I want this to be shared by all classes
}

// I can only initialize it like this; sadly
template<class T> 
int Singleton<T>::_counter = 0;

// main code (simplified):
Singleton<MyClass1>("MyClass1") c1;
Singleton<MyClass2>("MyClass2") c2;
Singleton<MyClass3>("MyClass3") c3;
Singleton<MyClass4>("MyClass4") c4; 
```

预期输出：

```
MyClass1 CTOR call #0
MyClass2 CTOR call #1 // counter is incremented
MyClass3 CTOR call #2
MyClass4 CTOR call #3 
```

我得到的是：

```
MyClass1 CTOR call #0
MyClass2 CTOR call #0 // counter is not incremented
MyClass3 CTOR call #0
MyClass4 CTOR call #0 
```

这意味着静态 int 不是共享的，而是特定于每个类的。

如何在我的模板类中有一个“非模板”计数器？仅使用标题模板可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:34:57.183

您可以有一个单独的类用于`Counter`内部`static`变量。所以这更像是“嵌套静态”计数:)。

对于语法糖，重载 the`opeartor ++`和任何你需要的东西。

以下是这样做的主要方法：

```
struct Counter
{
  static unsigned int value;
  Counter& operator ++ (int) { value ++; return *this; }
  operator unsigned int () const { return value; }
};
unsigned int Counter::value = 0;

template <class T>
class Singleton
{
public:
   Singleton(const std::string &name){ 
      printf("%s CTOR call #%d\n", name.c_str(), s_counter.value);  
      s_counter++; 
   }   
   virtual ~Singleton(){}
private:
   static Counter s_counter; // shared by all classes
}; 
```

这是一个[工作演示](http://ideone.com/dPBOv)。

**更新**：这是另一种“强制”[仅标头模板](http://ideone.com/b4hu2)文件的方式，您不必`Counter::value`在单独的 .cpp 文件中定义；但是我更喜欢上面的。

```
template<bool _true>
struct Counter
{
  static unsigned int value;
  Counter& operator ++ (int) { value ++; return *this; }
  operator unsigned int () const { return value; }
};
template<bool _true>
unsigned int Counter<_true>::value = 0;

template<>
struct Counter<false>; // disable the other alternative so no one can invoke it

template <class T>
class Singleton
{
public:
   Singleton(const std::string &name){ 
      printf("%s CTOR call #%d\n", name.c_str(), s_counter.value);  
      s_counter++; 
   }   
   virtual ~Singleton(){}
private:
   static Counter<true> s_counter; // shared by all classes
};
template<class T>
Counter<true> Singleton<T>::s_counter; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:26:58.893

您可以将计数器放在单独的类中，并将其设为模板，因为您只需要标题。例子：

```
template <class T> 
struct Helper
{
  static int _counter;
};

template<class T>
int Helper<T>::_counter = 0;

struct Dummy{};

template <class T> 
class Singleton 
{ 
public: 
   Singleton(const std::string &name){  
     printf("%s CTOR call #%d\n", name.c_str(), Helper<Dummy>::_counter);   
     Helper<Dummy>::_counter++;  
   } 
   virtual ~Singleton(){} 
}; 
```

**与 Nim 的解决方案相比进行编辑**，这当然太复杂了.. 但将其视为学习模板的一种做法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:26:15.290

如下：

```
static int& counter()
{
  static int _counter = 0;
  return _counter;
} 
```

使它成为你的单例的成员，而不是成员变量，使用这个......

编辑：我刚刚重新阅读了您的问题，您需要将其设为另一种类型的成员，例如：

```
struct Counter
{
   static int& counter()
   {
     static int _counter = 0;
     return _counter;
   }
};

template <class T>
class Singleton
{
public:
   Singleton(const std::string &name){ 
      std::cout << name <<Counter::counter() << std::endl;
      Counter::counter()++;
   }
   virtual ~Singleton(){}
private:
}; 
```

# android - Android Twitter4j 给出错误 NoClassDefFoundError: twitter4j.http.AccessToken

> ID：12778586
> 
> 赞同：0
> 
> 时间：2012-10-08T09:11:46.537
> 
> 标签：android

我在存储库中下载了 twitter 示例应用程序`AndroidTwitterSample`并导入了我的 eclipse。我正在尝试运行该示例应用程序，但出现错误：`java.lang.NoClassDefFoundError`在 logcat 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:23:30.277

该错误是基于 jar 文件丢失。您必须将 jar 文件放置在适当的位置。

在项目的根目录中创建一个名为 libs 的文件夹，并将 twitter4j jar 放入其中。

然后通过 Project **Properties -> Java Build Path -> Libraries -> Add Jars 包含新 jar。**

删除对 twitter4j jar 的任何旧引用。

清洁并启动。

我希望这对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:31:02.130

请参阅我的 帖子-[即使没有问题](https://stackoverflow.com/questions/12708744/no-class-defination-found-error-even-if-there-is-no-issues/12710111#12710111) ，也没有发现类定义错误，如果这对您不起作用，请告诉我。

# objective-c - UItableview 中的标签栏

> ID：12778587
> 
> 赞同：0
> 
> 时间：2012-10-08T09:11:56.133
> 
> 标签：objective-c, ios, uitableview, tabbar

我编写了一个大约有 5-6 个屏幕的 iPhone 应用程序（每个屏幕都是一个 UITableView）。我已经完成了应用程序的编写，现在需要在第三个屏幕中添加一个标签栏。

基本上，应用程序的结构如下：

**屏幕 1**：餐厅名称（示例）

**屏幕 2：**单击一家餐厅时，您会看到许多选项，例如 1\. 位置 2\. 评分 3\. 美食等。单击每个选项会显示一个单独的表格视图，其中包含一些信息。

现在，我需要在第 3 级屏幕（位置、美食等）中使用相同选项的选项卡栏。即位置、美食等，以便用户可以直接转到该选项，而不是先转到前一个屏幕。

如何在我的代码中实现这一点？每个视图都是 UIViewController 的子类。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:21:29.557

`UITabBarController`从您的 Interface Builder中拖入一个。将任意数量的 ViewController 连接到您的`UITabBarController`，并将您的第二个 View Controller 连接到您的 UITabBarController。

**注意：** 如果您对连接不满意`UITabBarController`，只需为“选项卡式应用程序”启动一个新的 XCode 项目，并将其视为您的应用程序的起点（用于初始化和连接）

# url - URL 路由将 widgets.appharbor.com 显示为 widgets.com

> ID：12778588
> 
> 赞同：0
> 
> 时间：2012-10-08T09:11:58.950
> 
> 标签：url, routing, appharbor

可能是一个非常愚蠢的问题......我只是不知道。

假设我已将 Web 应用程序发布到 Azure 或 AppHarbor，那么 Web 应用程序的 URL 将类似于

```
http://widgets.appharbor.com 
```

假设我拥有以下域名：

```
http://www.widgets.com 
```

如何在不使用 iframe 的情况下`www.widgets.com`显示托管在[http://widgets.appharbor.com的应用程序？](http://widgets.appharbor.com)

此外，我不希望我的应用程序中的链接显示为`widgets.appharbor.com/stuff`，它们需要显示为`widgets.com/stuff`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:15:05.443

如果您在[共享网站模式下](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-scale-websites/#sharedmode)使用云服务或网站，则可以使用[CNAME](https://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)将 www.widgets.com 指向 widgets.azurewebsites.net。我不知道这如何与 appharbor 一起使用，我认为它们也支持 CNAME。

**更新：**看起来 AppHarbor 也支持 CNAME [http://support.appharbor.com/discussions/problems/1079-custom-domain-names](http://support.appharbor.com/discussions/problems/1079-custom-domain-names)

# node.js - 在 node.js 中使用参数生成过程

> ID：12778596
> 
> 赞同：23
> 
> 时间：2012-10-08T09:12:22.133
> 
> 标签：node.js, process, spawn

我需要从中生成一个子进程`node.js`，同时使用`ulimit`以防止它使用太多内存。

按照文档，让基本的 spawn 工作并不难：`child = spawn("coffee", ["app.coffee"])`.

然而，做我在下面做的只会让产卵默默地死去。

```
child = spawn("ulimit", ["-m 65536;", "coffee app.coffee"]) 
```

如果我会运行`ulimit -m 65536; coffee app.coffee`- 它会按预期工作。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-08T11:17:57.473

这是两个不同的命令。如果您正在使用，请不要使用`spawn`. 使用单独的子进程。

```
 child1 = spawn('ulimit', ['-m', '65536']);
 child2 = spawn('coffee', ['app.coffee']); 
```

如果您对输出流不感兴趣（如果您只想缓冲输出），您可以使用`exec`.

```
var exec = require('child_process').exec,
child;

child = exec('ulimit -m 65536; coffee app.coffee',
  function (error, stdout, stderr) {
    console.log('stdout: ' + stdout);
  }
}); 
```

# jquery - 如何使用 jquery 用数据填充预定义的 html

> ID：12778598
> 
> 赞同：0
> 
> 时间：2012-10-08T09:12:23.600
> 
> 标签：jquery, html, ajax, templates

我有许多 ajax 表单，我在其中添加数据行 uisng ajax。现在表单正在正确提交，但我还没有找到好的解决方案如何附加我刚刚插入到 datbaase 中的数据。

我有两个选择

1.  从服务器我返回填充内容的数据并附加它。
2.  只需返回 true 或 flase 并拥有 html 模板，我可以在其中使用 jquery 填充数据，然后将该数据附加到表行中。

CI喜欢第二种解决方案，但有人可以指点我的教程或链接，我可以在其中看到它的实际使用方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:46:25.087

最好的方法是从服务器端检查，如果插入 SQL 正确，则创建一个 XML 或 JSON 对象作为输出。

输出应该是例如JSON： `{name:"John", lastName:"Doe"}`等......

最简单的方法是将变量堆叠在一个数组中，数组看起来像： $data = array("name"=>"John", "lastName"=>"Doe");

然后做

```
echo json_encode($data); 
```

php 会将该数组转换为 Json 对象。

* * *

然后在 Javascript 上，只需将数据附加到每个字段，以访问 json 对象：首先解析来自 php 文件的返回：

```
data = JSON.parse(data); 
```

然后 data.name 和 data.lastName 将包含信息

# python - 如何按需提供 wsgi 应用程序？

> ID：12778602
> 
> 赞同：0
> 
> 时间：2012-10-08T09:12:32.320
> 
> 标签：python, wsgi

我有一个小型服务器，我在上面托管我编写的 wsgi 应用程序。这台服务器没有很多内存，应用程序不经常使用，很少一次超过一个。

有没有办法配置服务器，以便应用程序仅在需要时启动（当我尝试连接它们所服务的套接字时），有点像 inetd 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:27:01.057

取决于您使用的服务器软件。

例如，如果您使用 nginx + uwsgi，您可以将 uwsgi 工作人员配置为仅在请求时创建并在一定数量的不活动后被销毁。

[http://projects.unbit.it/uwsgi/wiki/Doc](http://projects.unbit.it/uwsgi/wiki/Doc)

寻找“空闲”“便宜”“便宜”

# objective-c - 使用自定义表格视图单元格中的按钮

> ID：12778608
> 
> 赞同：1
> 
> 时间：2012-10-08T09:13:08.657
> 
> 标签：objective-c, ios, uitableview, uibutton

我在自定义表格视图单元格中有一个类似 facebook 的按钮。在我的 tableview 类中，我具有以下功能。

```
- (IBAction)sendLike:(id)sender
          WithString: (NSString *)shareString
              andUrl:(NSURL *)shareUrl{

          //Do all kinds of things

        [fbController setInitialText:shareString];
        [fbController addURL:shareUrl];
        [fbController setCompletionHandler:completionHandler];
        [self presentViewController:fbController animated:YES completion:nil];
    }
} 
```

在我的 cellForRowAtIndexpath 中，我尝试通过以下方式调用此方法。

```
 NSString *shareString = video.name;
        NSURL *shareUrl = [NSURL URLWithString:video.url];
        [cell.facebook addTarget:self action:@selector(sendLike: WithString:shareString andUrl:shareUrl)
                 forControlEvents:UIControlEventTouchUpInside]; 
```

但它抱怨我应该把'：'放在我的@selector中。有人可以帮忙吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:24:04.527

你可以这样尝试

```
cell.facebook.tag = indexPath.row.
    [cell.facebook addTarget:self action:@selector(sendLike:)
                     forControlEvents:UIControlEventTouchUpInside]; 
```

在 sendLike 事件中

```
- (IBAction)sendLike:(id)sender
  {

        //if you want to fetch data from any list then try
        //UIButton *selectedButton = (UIButton*)sender;
        //data = [dataList objectAtIndex:selectedButton.tag];
        NSString *shareString = video.name;
        NSURL *shareUrl = [NSURL URLWithString:video.url];

        [fbController setInitialText:shareString];
        [fbController addURL:shareUrl];
        [fbController setCompletionHandler:completionHandler];
        [self presentViewController:fbController animated:YES completion:nil];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:23:41.227

在苹果文档中，唯一可用的`@selector`in 操作规范是以下方法：

```
- (void)action;

- (void)action:(id)sender;

- (void)action:(id)sender forEvent:(UIEvent *)event; 
```

如您所见，您的选择器与此不匹配，因为您有多个参数，但只`id`允许发送者。

作为一种解决方案，您可以`tag`为您的按钮设置一个，然后在您的选择器中处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:53:46.177

在您的`cellForRow`：//将自定义字符串连接到按钮

```
objc_setAssociatedObject(yourButton, "theKey", strText, OBJC_ASSOCIATION_RETAIN_NONATOMIC); 
```

在您的按钮处理程序中：

```
NSString *str = objc_getAssociatedObject(sender, "theKey"); 
```

ps 不要忘记导入运行时库： `#import <objc/runtime.h>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:20:30.253

我认为您以错误的方式调用了选择器。你实际上应该写，

```
[cell.facebook addTarget:self action:@selector(sendLike: WithString: andUrl:)  
                                     forControlEvents:UIControlEventTouchUpInside]; 
```

但这不会为您传递论据。如果你想传递参数，你应该像这样 调用***performSelector***

```
[self performSelector:@selector(sendLike: WithString: andUrl:) 
                                withObject: cell.facebook
                                withObject: shareString
                                withObject: shareUrl]; 
```

希望它能帮助解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T10:31:39.747

您的问题是您的选择器中参数的数量和种类不正确。您只能使用具有以下方案的目标：

```
 - (void)action;
 - (void)action:(id)sender;
 - (void)action:(id)sender forEvent:(UIEvent *)event; 
```

您必须将您的信息包含在发送者（`UITableViewCell`类实例）对象中。您可以按照 Stas 的另一个答案中所述执行此操作，但我建议您创建一个自定义表格视图单元子类，该子类为`shareString`and添加属性`shareURL`。这种方法将需要更多代码，但更容易*阅读、维护并防止这种丑陋的 Obj-C 和 C 混淆。*

# c# - Javascript / jquery在gridview中计算总数

> ID：12778614
> 
> 赞同：0
> 
> 时间：2012-10-08T09:13:24.120
> 
> 标签：c#, javascript, jquery, asp.net, gridview

我有一个带有产品详细信息的网格视图和一个我添加的数量文本框——它没有连接到任何数据库。我希望它为每一行显示成本（价格*数量）和所有行的总成本（在下面的标签中）。我有一些问题。1.它在数量文本框中输入一个0，所以我需要一直将数量更新为1，然后计算。

我也知道也许这可以在 C# 中的 rowdataboundevent 中做得更好，建议将不胜感激。

请帮助我了解问题所在。这是代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
    <script type="text/javascript">

$(function () {
    $("[id*=lblquantity]").val("0");
    });
$("[id*=lblquantity]").live("change", function () {
        if (isNaN(parseInt($(this).val()))) {
            $(this).val('0');
        } else {
            $(this).val(parseInt($(this).val()).toString());
        }
    });
    $("[id*=lblquantity]").live("keyup", function () {
        if (!jQuery.trim($(this).val()) == '') {
            if (!isNaN(parseFloat($(this).val()))) {
                var row = $(this).closest("tr");
                $("[id*=lblTotal]", row).html(parseFloat($(".price", row).html()) * parseFloat($(this).val()));
            }
        } else {
            $(this).val('');
        }
        var grandTotal = 0;
        $("[id*=lblTotal]").each(function () {
            grandTotal = grandTotal + parseFloat($(this).html());
        });
        $("[id*=lblGrandTotal]").html(grandTotal.toString());
        $("[id*=hfGrandTotal]").val(grandTotal.toString())
    });
    </script> 
```

这是 ASP.net 中 gridview 的代码。

```
 <asp:HiddenField ID="hfGrandTotal" runat="server"  />
    <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
        EnableViewState="False" onrowdatabound="GridView2_RowDataBound">
        <Columns>
        <asp:BoundField DataField="Price" HeaderText="Price" ItemStyle-CssClass="price" >

<ItemStyle CssClass="price"></ItemStyle>
            </asp:BoundField>

                         <asp:TemplateField HeaderText="ProductID">
                <ItemTemplate>
                    <asp:Label ID="lblID" runat="server" Text='<%# Eval("ProductID") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="ProductName">
                <ItemTemplate>
                    <asp:Label ID="lblName" runat="server" Text='<%# Eval("ProductName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

             <asp:TemplateField HeaderText="Summary">
                <ItemTemplate>
                    <asp:Label ID="lblSum" runat="server" Text='<%# Eval("Summary") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
             <asp:TemplateField HeaderText="picPath">
                <ItemTemplate>
                    <asp:Label ID="lblPic" runat="server" Text='<%# Eval("picPath") %>' ></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>

            <asp:TemplateField HeaderText = "quantity">
            <ItemTemplate>
                <asp:TextBox ID="lblquantity" runat="server"  ></asp:TextBox>

            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText = "Total">
            <ItemTemplate>
                <asp:Label ID="lblTotal" runat="server" ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>

        </Columns>
    </asp:GridView> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:55:16.033

进行这些更改

步骤1。将价格设为 a`asp:TemplateField`并添加一个类以`lblTotal`喜欢这个。正如您所写的那样，数量也应该是标记中的文本框吗？

```
<asp:TemplateField HeaderText="Price">
    <ItemTemplate>
         <asp:Label ID="lblPrice" runat="server" CssClass="rowprice"></asp:Label>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Quantity">
    <ItemTemplate>
         <asp:TextBox ID="txtQuantity" runat="server" CssClass="rowqty" Text="1">
         </asp:TextBox>
    </ItemTemplate>
</asp:TemplateField>
<asp:TemplateField HeaderText="Total">
    <ItemTemplate>
         <asp:Label ID="lblTotal" runat="server" CssClass="rowtotal"></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

第2步。下载此[数字插件](http://www.texotela.co.uk/code/jquery/numeric/)并将其写入 DOMReady

```
$(document).ready(function() {
    $(".rowqty").numeric({
        decimal: false,
        negative: false
    });
});​ 
```

这是为了使数量文本框只接受正整数。

第三步。

```
protected void GridView2_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
         var priceLabel =  e.Row.FindControl("lblPrice") as Label;
         var quantityTextBox =  e.Row.FindControl("txtQuantity") as TextBox;
         var totalLabel =  e.Row.FindControl("lblPrice") as Label;
         var onKeyUpScript = String.Format(
                                  "javascript:CalculateRowTotal('#{0}', '#{1}', '#{2}');",
                                  quantityTextBox.ClientID,
                                  priceLabel.ClientID,
                                  totalLabel.ClientID);
         quantityTextBox.Attributes.Add("onkeyup", onKeyUpScript);
    }
} 
```

第三步。添加一个`asp:HiddenField`和一个`asp:Label`with`ClientIDMode="Static"`

```
<asp:HiddenField ID="hfGrandTotal" runat="server"></asp:HiddenField>
Grand Total: <asp:Label ID="lblGrandTotal" runat="server"></asp:Label> 
```

第4步。在页面上添加javascript函数

```
function CalculateRowTotal(qty_id, price_id, total_id) {
    var row_quantity = $(qty_id);
    var row_price = $(price_id);
    var row_total = $(total_id);
    var qty = parseInt($.trim($(this).val()), 10);
    if (isNaN(qty) || qty === 0) {
        qty = 1;
        row_quantity.val("1");
    }
    var totalAmount = parseFloat(row_price.html()) * qty;
    row_total.html(totalAmount);
    var grandTotal = 0;
    $(".rowtotal").each(function() {
        grandTotal += parseFloat($(this).html());
    });
    $("#hfGrandTotal").val(grandTotal);
    $("#lblGrandTotal").html(grandTotal);
}​ 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:24:49.377

我不会在 JS 中这样做，因为这是客户端加载 + 更慢。

按照您在 RowDataBound 中的说明填写。你的将在 GridView2_RowDataBound 中。
只需找到控件并将其转换为正确的控件并填充文本即可。

```
((Label)e.Row.FindControl("lblTotal")).Text = (price * quantity); 
```

您可能将价格和数量存储在 dataItem 中。
我认为您还必须将其转换为字符串，因为 .Text 需要字符串。
你可以使用

```
(price * quantity).ToString() 
```

或者

```
Convert.ToString(price * quantity); 
```

# html - 对齐 :before 和 :after 用于两行跨度

> ID：12778615
> 
> 赞同：2
> 
> 时间：2012-10-08T09:13:28.357
> 
> 标签：html, css

我正在寻找一种将左右两个图像包含在标题范围内的方法。我面临的问题是，这个标题在某些情况下会跨越两行，但并非总是如此。我不想在标题之前/之后或之后包含两个额外的元素，而是寻找一种方法来实现我正在尝试的目标，而无需在代码中添加新元素。因此，我希望使用 :before 和 :after。这就是我想出的：

```
.block-title:before { position:absolute; content:""; display:inline-block; width:28px; height:14px; margin:2px 0 0 -36px; background:url(../images/sidebar_ornament_l.png) no-repeat 0 0; }
.block-title:after { position:absolute; content:""; display:inline-block; width:28px; height:14px; margin:2px 0 0 9px; background:url(../images/sidebar_ornament_r.png) no-repeat 0 0; } 
```

虽然这会很好用，但如果标题只有一行，那么占据两行的标题不会像我想要的那样表现，而是看起来像这样：

![标题错误](../Images/faff1527e0a460ba1dfc148d02e1780b.png)

我已经尝试了我能想到的一切，让 :before 和 :after 伪元素按照我想要的方式运行，改变位置和显示，链接实际的文本跨度位置等，但就是无法实现我想要的。

由于我希望这两个图像与实际文本范围对齐，因此单个背景图像将不起作用。在某些情况下，文本和图像之间的间距会太大，看起来很奇怪。有没有办法使这项工作，所以我会以这样的两行标题结束：

![更正标题](../Images/c9b37868c619c0ad8affb3832f212a9c.png)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:22:41.517

好吧，这是一个一般概念，我需要您的完整代码来提供具体答案。

无论如何，[**检查这个演示**](http://jsfiddle.net/gionaf/hSkhK/)

HTML：

```
<span class="block-title">Some text is here</span>
<hr>
<span class="block-title">Some more text<br>is here</span>
<hr>
<span class="block-title">Even<br>more text<br>is here</span> 
```

CSS：

```
.block-title {
    position:relative;
    display:inline-block;
    text-align:center;
    padding:0 34px; /* width of your ornament + 6px per each side,
                        adjust to your actual layout */
}
.block-title:before, .block-title:after {
    content:" ";
    width:28px;
    height:14px;
    position:absolute;
    top:50%;
    margin-top:-7px; /* half of ornament's height */
}
.block-title:before {
    background:url(../images/sidebar_ornament_l.png) no-repeat 0 0;
    left:0;
}
.block-title:after {
    background:url(../images/sidebar_ornament_r.png) no-repeat 0 0;
    right:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:22:42.307

如果将其应用于跨度，则规则可以。我做了这个代码（我改变了图像）[http://jsfiddle.net/sSEDz/](http://jsfiddle.net/sSEDz/)

# objective-c - 将旧 Plist 与新 Plist 合并

> ID：12778618
> 
> 赞同：0
> 
> 时间：2012-10-08T09:13:40.587
> 
> 标签：objective-c, ios, ios4

我已将新实体添加到现有 Plist。由于 Plist 不一致，新版本的应用程序崩溃。

如何将旧 plist 数据与新 plist 合并？

我的Plist创建方法如下

```
- (void)createEditableCopyOfFileIfNeeded:(NSString *)plistName
{
    // First, test for existence.
    BOOL success;
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *plistPath = [documentsDirectory stringByAppendingPathComponent:plistName];
    success = [fileManager fileExistsAtPath:plistPath];
    if (success)
    {
        return;
    }
    // The writable database does not exist, so copy the default to the appropriate location.
    NSString *defaultPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:plistName];
    success = [fileManager copyItemAtPath:defaultPath toPath:plistPath error:&error];
    if (!success)
    {
        NSAssert1(0, @"Failed to create writable database file with message '%@'.", [error localizedDescription]);
    }
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:36:47.873

我会在您的 plist 中包含一个*版本*密钥，以将其与应用程序的版本进行比较。您可以使用以下代码段检查应用程序的版本：

```
 [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"] 
```

然后，在应用程序启动时：

1.  阅读 plist，如果没有*version* key，它将是*old version*。
2.  如果是*旧版本*，则执行数据迁移到当前版本，使用默认值添加不存在的键。在这里，我会考虑未来更新的不同版本号。
3.  添加带有您的捆绑包版本的*版本*键作为值。
4.  保存 plist。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:17:31.167

You can do it this way:

1.  Rename old plist e.g. old.plist
2.  Read both plists from separate files
3.  Merge information needed adding chosen information programatically to new plist
4.  Save new plist merged

# performance - _mm_shuffle_epi8 内在函数的用法

> ID：12778620
> 
> 赞同：5
> 
> 时间：2012-10-08T09:13:49.230
> 
> 标签：performance, optimization, x86, sse, simd

有人可以解释一下`_mm_shuffle_epi8`SSSE3内在吗？我知道它会随机播放 16 个 8 位整数，`__m128i`但不确定如何使用它。

我基本上想用`_mm_shuffle_epi8`修改下面的函数来获得更好的性能。

```
while(not done)
    dest[i+0] = (src+j).a;
    dest[i+1] = (src+j).b;
    dest[i+2] = (src+j).c;
    dest[i+3] = (src+j+1).a;
    dest[i+4] = (src+j+1).b;
    dest[i+5] = (src+j+1).c;
    i+=6;
    j+=2; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T09:25:04.060

`_mm_shuffle_epi8`（更好地称为`pshufb`），基本上是这样做的：

```
temp = dst;
for (int i = 0; i < 16; i++)
    dst[i] = (src[i] & 0x80) == 0 ? temp[src[i] & 15] : 0; 
```

至于这里能不能用，不知道涉及的类型就无法判断了。无论如何它都不会“很好”，因为目标是 6 个字节的块（或单词？或 dwords？）。您可以通过展开并进行大量移位和或操作来完成这项工作。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-07T05:31:59.690

这是使用内在函数的示例；您必须了解如何将其应用于您的特定情况。此代码一次交换 4 个 32 位整数：

```
unsigned int *bswap(unsigned int *destination, unsigned int *source, int length) {
    int i;
    __m128i mask = _mm_set_epi8(12, 13, 14, 15, 8, 9, 10, 11, 4, 5, 6, 7, 0, 1, 2, 3);
    for (i = 0; i < length; i += 4) {
        _mm_storeu_si128((__m128i *)&destination[i],
        _mm_shuffle_epi8(_mm_loadu_si128((__m128i *)&source[i]), mask));
    }
    return destination;
} 
```

# php - 限制自动建议文本框中的值

> ID：12778626
> 
> 赞同：0
> 
> 时间：2012-10-08T09:14:10.823
> 
> 标签：php, javascript, autosuggest

我有一个带有一些值的自动建议文本框。

在文本框中键入第一个字母时，它会在下拉列表中显示文本的所有相关值。

我想将显示的相关值限制为 20？..

我的代码看起来像这样，

```
 $("#input_id").autoSuggest(data.items, { 
                     selectedItemProp: "tag", 
                     searchObjProps: "tag", 
                     selectedValuesProp: "id", 
                     startText: "", 
                     keyDelay: 50,
                     minChars: 1,
                     asHtmlID: "input_id",
                     preFill: [ ] 
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:25:23.303

试试这个代码`retrieveLimit:20`，文档[**在这里**](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

```
$("#input_id").autoSuggest(data.items, { 
                     selectedItemProp: "tag", 
                     searchObjProps: "tag", 
                     selectedValuesProp: "id", 
                     startText: "", 
                     keyDelay: 50,
                     minChars: 1,
                     asHtmlID: "input_id",
                     preFill: [ ],
                     retrieveLimit:20
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:18:59.027

Rerturn 仅匹配 PHP 页面中的 20 个值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:22:27.623

使用 LIMIT 限制 PHP 代码中的最大结果数。

例子：

```
 $sql = "select  field from column where column LIKE '%$input_id%' LIMIT 20"; 
```

现在当我们打印内容时。最多有 20 个结果。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:25:33.757

只是快速浏览了 autoSuggest 文档，并没有真正找到任何限制结果的内容，但我会在查询中限制它，假设您是通过 Ajax 从脚本中检索它。

你可以通过做限制你的SQL`SELECT * FROM table WHERE ... LIMIT 20`

或者修改脚本只返回 20 个值

# spring - 默认 Web 应用程序 URL

> ID：12778630
> 
> 赞同：0
> 
> 时间：2012-10-08T09:14:42.197
> 
> 标签：spring, spring-mvc, tomcat7

目前，我的示例应用程序的默认 url 是：

```
http://127.0.0.1:8080/SpringMVC/ 
```

我可以通过下面的 url 访问它吗？

```
http://127.0.0.1:8080/ 
```

如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:10:07.503

将战争文件重命名为`ROOT.war`. 然后删除（或重命名）默认ROOT tomcat 目录并启动tomcat。

# drop-down-menu - Netsuite 下拉菜单使用

> ID：12778631
> 
> 赞同：0
> 
> 时间：2012-10-08T09:14:43.270
> 
> 标签：drop-down-menu, netsuite

`<NLPAGETABS>`是否可以使用标签在 Netsuite 主题中使用最简单的两级下拉菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T18:39:45.963

这是可能的，但是 NetSuite 页面由覆盖 DOM 脚本的后端脚本动态呈现，这就是他们不建议在其页面上执行 DOM 脚本的原因。

您可以选择改用其内置的自定义功能。对于有关创建菜单的问题，您可以查看创建自定义中心选项卡和类别。这应该够了吧。如果您使用的是经典（管理员或完全访问）中心，它应该位于设置 > 自定义 > 中心选项卡中。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T14:14:54.250

可以在 Netsuite 网站上有一个下拉菜单，但 Netsuite 不提供此功能，因为您可以检查可用的主题、布局。

几个月前我试图实现这一点，但最后我能够使用一个套件来做到这一点，该套件使用 XML 数据返回给我所有的选项卡，最后 Javascript 帮助我创建了下拉列表。

我在 Netsuite 网站的内容区域部分中嵌入了这个 javascript 代码。

如需进一步说明，请告诉我。

干杯！！！

# iphone - 了解 iOS 6 界面方向变化

> ID：12778636
> 
> 赞同：23
> 
> 时间：2012-10-08T09:15:09.563
> 
> 标签：iphone, objective-c, ios6, uiinterfaceorientation

**补充：** 我看到我的问题经常被查看而没有投票，所以我决定你们没有得到你搜索的内容。[将您重定向到对如何处理 iOS6 中的方向更改](https://stackoverflow.com/questions/12662240/how-to-make-app-fully-working-correctly-for-autorotation-in-ios-6)有非常好的答案 的问题

对方向变化的具体要求： [限制旋转](https://stackoverflow.com/questions/15947349/how-to-handle-different-orientations-in-ios-6)

欢迎点赞：）

* * *

我从 Master Detail 模板创建了一个新项目，并尝试以横向启动它。如你所知

`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`

方法已弃用，我们必须使用

`- (NSUInteger)supportedInterfaceOrientations`

和/或

`- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation`

这是我的代码：

```
- (NSUInteger)supportedInterfaceOrientations {
    NSLog(@"supported called");
    return UIInterfaceOrientationMaskAll;//Which is actually a default value
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    NSLog(@" preferred called");//This method is never called. WHY?
    return UIInterfaceOrientationLandscapeRight;
} 
```

如您所见，我正在尝试以首选方法返回横向，但它从未被调用。ps 文档指出：

> 讨论 当视图控制器全屏呈现时，系统会调用此方法。当您的视图控制器支持两个或多个方向但内容在其中一个方向中显示最佳时，您可以实现此方法。
> 
> 如果您的视图控制器实现了此方法，那么当呈现时，它的视图会以首选方向显示（尽管稍后可以将其旋转到另一个受支持的旋转）。如果不实现此方法，系统将使用状态栏的当前方向呈现视图控制器。

所以，问题是：为什么 prefferredOrientation 方法永远不会被调用？以及我们应该如何处理不同控制器中的不同方向？谢谢！PS不要将问题标记为重复。我已经调查了所有类似的问题，但他们没有我的答案。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-15T14:06:27.210

## 关于 PreferredInterfaceOrientationForPresentation

`preferredInterfaceOrientationForPresentation`永远不会被调用，因为这不是一个“呈现”的视图控制器。这里不涉及“演示”。

“呈现”和“呈现”并不是一些模糊的术语，意思是“出现”。这些是精确的技术术语，意味着该视图控制器与 call 一起发挥作用`presentViewController:animated:completion:`。换句话说，这个事件只有在我们过去称之为“模态”视图控制器的情况下才会到达。

好吧，您的视图控制器*不是*模态视图控制器；它*没有*发挥作用`presentViewController:animated:completion:`。所以没有涉及“演示”，因此`preferredInterfaceOrientationForPresentation`在这里无关紧要。

我对此非常明确，因为我认为很多人会像你一样感到困惑或误导。所以也许这篇笔记会对他们有所帮助。

## 进入景观

在 iOS 6 中，Info.plist 中的“Supported Interface Orientations”键比以前更受重视。启动所需方向的整体问题的解决方案是：

1.  确保 Info.plist 中的“支持的界面方向”列出了您的应用程序将*被*允许采用的*所有方向。*

**   确保所需的*启动*方向*首先*位于“支持的界面方向”中。* 

 *这里的所有都是它的。实际上，您不必将任何代码放入根视图控制器来管理初始方向。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T13:24:19.690

如果您想在横向模式下启动模态视图，只需将此代码放在呈现的视图控制器中

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    UIInterfaceOrientation orient = [[UIApplication sharedApplication] statusBarOrientation];
    if (UIInterfaceOrientationIsLandscape(orient)) {
        return orient;
    }

    return UIInterfaceOrientationLandscapeLeft;
} 
```

然后，像往常一样展示这个控制器

```
UIViewController *vc = [[UIViewController alloc] initWithNibName:nil bundle:nil];
[vc setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
[vc setModalPresentationStyle:UIModalPresentationFullScreen];
[self.navigationController presentViewController:vc animated:YES completion:^{}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-24T13:30:17.197

有一个非常简单的答案：您只能更改或修复模态呈现视图控制器的界面方向。如果你这样做，即在界面构建器（或导航控制器方法）中使用 Present Modally segue，你可以定义允许的方向

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait; // for example else an addition of all allowed
} 
```

当您只在导航控制器上按下视图控制器时，此事件不会触发......所以：您没有返回按钮，需要一个

```
[self dismissViewControllerAnimated:YES completion: ^(void) {

    }]; 
```

关闭它。*

# performance - AS3 - 比较 BitmapDatas，最快的方法？

> ID：12778639
> 
> 赞同：1
> 
> 时间：2012-10-08T09:15:24.067
> 
> 标签：performance, actionscript-3, compare, bitmapdata

对，假设我想比较两个 BitmapData。一个是背景图像（不是实心的，它有不同的像素），另一个是完全相同的背景之上的某物（如精灵）。现在我想要做的是从第二个图像中删除背景，通过比较两个图像，并从背景中删除第二个图像中存在的所有像素。为了清楚起见，基本上我想在 AS3中执行[此操作。](https://graphicdesign.stackexchange.com/questions/1511/remove-identical-pixels-in-two-layers-images-with-free-software)

现在我想出了两种方法来做到这一点，它们都可以完美地工作。一个直接比较像素，而另一个`BitmapData.compare()`先使用该方法，然后将适当的像素复制到结果中。我想知道哪种方式更快。

这是我的两种方法：

**方法一**

```
for (var j:int = 0; j < layer1.height; j++)
{
    for (var i:int = 0; i < layer1.width; i++)
    {
        if (layer1.getPixel32(i, j) != layer2.getPixel32(i, j))
        {
            result.setPixel32(i, j, layer2.getPixel32(i, j));
        }
    }
} 
```

**方法二**

```
result = layer1.compare(layer2) as BitmapData;

for (var j:int = 0; j < layer1.height; j++)
{
    for (var i:int = 0; i < layer1.width; i++)
    {
        if (result.getPixel32(i, j) != 0x00000000)
        {
            result.setPixel32(i, j, layer2.getPixel32(i, j));
        }
    }
} 
```

`layer1`是背景，`layer2`是背景将被删除的图像，并且`result`只是`BitmapData`结果将出现的图像。

这些非常相似，我个人没有注意到速度上有任何差异，但我只是想知道是否有人知道哪个会更快。无论哪种方式，我都可能会使用方法 1，因为`BitmapData.compare()`除非颜色相同，否则不会比较像素 alpha，但我仍然认为问它不会有坏处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:51:53.930

这可能不是 100% 适用于您的情况，但是 FWIW 我不久前对此进行了一些研究，这是我当时写的：

一段时间以来，我一直想尝试 grant skinners 性能测试，所以这是我的机会。

我测试了本机比较、迭代比较、反向迭代比较（因为我知道它们要快一点），最后使用混合模式差异进行比较。

反向迭代比较如下所示：

```
for (var bx:int = _base.width - 1; bx >= 0; --bx) {
 for (var by:int = _base.height - 1; by >= 0; --by) {
  if (_base.getPixel32(bx, by) != compareTo.getPixel32(bx, by)) {
   return false;
  }
 }
}
return true; 
```

混合模式比较如下所示：

```
var test:BitmapData = _base.clone();
test.draw(compareTo, null, null, BlendMode.DIFFERENCE);
var rect:Rectangle = test.getColorBoundsRect(0xffffff, 0x000000, false);
return (rect.toString() != _base.rect.toString()); 
```

我不是 100% 确定这是完全可靠的，但它似乎工作。

我在 500x500 图像上运行了每个测试 50 次迭代。

不幸的是，我的像素弯曲工具包很糟糕，所以我无法尝试这种方法。

每个测试都在调试和发布播放器中运行以进行比较，请注意巨大的差异！

完整代码在这里：[http ://webbfarbror.se/dump/bitmapdata-compare.zip](http://webbfarbror.se/dump/bitmapdata-compare.zip)

![图形](../Images/165465b965e2879d02f4d452c9c8ce7a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:26:52.187

您可以尝试使用着色器来检查两个图像是否匹配，如果不匹配，则将其中一个图像的点保存为输出。像这样：

```
kernel NewFilter
<    namespace : "Your Namespace";
     vendor : "Your Vendor";
     version : 1;
     description : "your description";
>
{
    input image4 srcOne;
    input image4 srcTwo;
    output pixel4 dst;

    void evaluatePixel()
    {
        float2 positionHere = outCoord();
        pixel4 fromOne = sampleNearest(srcOne, positionHere);
        pixel4 fromTwo = sampleNearest(srcTwo, positionHere);
        float4 difference=fromOne-fromTwo;
        if (abs(difference.r)<0.01&&abs(difference.g)<0.01&&abs(difference.b)<0.01) dst=pixel4(0,0,0,1); 
        else dst = fromOne;
    }
} 
```

如果匹配，这将返回黑色像素，如果不匹配，则返回第一个图像的像素。使用 Pixel Bender 使其在 Flash 中运行。一些教程在[这里](http://www.saltgames.com/2010/introduction-to-pixel-bender-in-flash/)。着色器通常比普通的 AS3 代码更快。

# uwsgi - uwsgi 套接字权限

> ID：12778646
> 
> 赞同：8
> 
> 时间：2012-10-08T09:15:58.907
> 
> 标签：uwsgi

我在 Ubuntu 12 上运行 uwsgi 时遇到了一些权限问题。这是我的 ini 文件：

```
[uwsgi]
project = djangorpoject
base_dir = /home/mysite/mysite.com

uid = www-data
gid = www-data
plugins = http,python

processes = 4
harakiri = 60
reload-mercy = 8
cpu-affinity = 1
max-requests =  2000
limit-as = 512
reload-on-as = 256
reload-on-rss = 192
no-orphans = True
#vacuum = True
master = True

logto = /var/log/uwsgi/%n.log
#daemonize = /var/log/uwsgi/%n.log
#catch-exceptions
disable-logging

virtualenv = %(base_dir)/venv
chdir = %(base_dir)
module = %(project).wsgi:application

socket = /run/uwsgi/%n.sock
chmod-socket = 666
chown-socket = www-data:www-data 
```

如您所见，我在套接字文件上运行 chmod 和 chown。当我尝试加载我的网站时，我收到以下错误：

```
bind(): Permission denied [socket.c line 107] 
```

如果我跑，这就会消失

```
sudo chown -R www-data:www-data /run/uwsgi 
```

但是，当我重新启动服务器时，这不会持续存在。我假设这是因为 uwsgi 在启动时重新创建文件夹？有没有办法将权限永久应用于套接字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T09:18:40.977

`/run`是 a`tmpfs`这意味着它在重新启动后不会持续存在。而是创建一个目录，该目录`/var/uwsgi`将是持久的。

# c# - 如果主题很轻，WP7/ XAML 在应用程序启动时更改图像源

> ID：12778652
> 
> 赞同：1
> 
> 时间：2012-10-08T09:16:20.883
> 
> 标签：c#, xaml, windows-phone

我的图像在数据模板中，如果 wp 主题很轻，我想做的是更改图像

```
<DataTemplate x:Key="citiesItemTemplate">
            <StackPanel Grid.Column="1"  VerticalAlignment="Top">               
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition  />
                        <ColumnDefinition  />
                        <ColumnDefinition  />                                              
                    </Grid.ColumnDefinitions>    
                    <Grid.RowDefinitions>                   
                        <RowDefinition/>
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <TextBlock Grid.Column="0" Height="50" Tap="ProgLngGropus_Tap" Text="{Binding Name}" FontSize="26"  Margin="12,-5,12,6"/>                   
                    <ToggleButton Grid.Column="2" x:Name="MyToggleButton" Style="{StaticResource FlipButton}">
                        <ToggleButton.Content>
                            <Image Grid.Column="2" Margin="0,-10,-33,0" Height="40" Width="40" x:Name="ArrowDownImg"  Source="/Images/appbar.dark.arrow.down.circle.rest.png" />                            
                        </ToggleButton.Content>
                    </ToggleButton>
                    <TextBlock TextWrapping="Wrap" Text="{Binding Lang}" Grid.Column="0" Grid.Row="1" x:Name="Desc"
                       Foreground="Orange" Visibility="{Binding ElementName=MyToggleButton,
                        Path=IsChecked, Converter={StaticResource ValueConverterBoolToVis}}">                        
                    </TextBlock>

                </Grid>

            </StackPanel>
        </DataTemplate> 
```

但我无法访问 ArrowDownImg

```
Visibility darkBackgroundVisibility = (Visibility)Application.Current.Resources["PhoneDarkThemeVisibility"];

    if (darkBackgroundVisibility != Visibility.Visible)
    {
        //Error in finding ArrowDownImg
     ***//ArrowDownImg.Source = "/Images/appbar.light.arrow.down.circle.rest.png"***
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:00:40.217

你也可以做

```
Image arrowDownImg = MyObjectUsingTheDataTemplate.FindVisualChild("ArrowDownImg") as Image;
arrowDownImg.Source = ... 
```

通过使用以下扩展方法

```
 public static FrameworkElement FindVisualChild(this FrameworkElement root, string name)
    {
        FrameworkElement temp = root.FindName(name) as FrameworkElement;
        if (temp != null)
            return temp;

        foreach (FrameworkElement element in root.GetVisualDescendents())
        {
            temp = element.FindName(name) as FrameworkElement;
            if (temp != null)
                return temp;
        }

        return null;
    }

    public static IEnumerable<FrameworkElement> GetVisualDescendents(this FrameworkElement root)
    {
        Queue<IEnumerable<FrameworkElement>> toDo = new Queue<IEnumerable<FrameworkElement>>();

        toDo.Enqueue(root.GetVisualChildren());
        while (toDo.Count > 0)
        {
            IEnumerable<FrameworkElement> children = toDo.Dequeue();
            foreach (FrameworkElement child in children)
            {
                yield return child;
                toDo.Enqueue(child.GetVisualChildren());
            }
        }
    }

    public static IEnumerable<FrameworkElement> GetVisualChildren(this FrameworkElement root)
    {
        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(root); i++)
        {
            yield return VisualTreeHelper.GetChild(root, i) as FrameworkElement;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:56:40.420

**答：**这是我所做的，我添加了加载的事件

```
 <ToggleButton Grid.Row="0" Grid.Column="2" Margin="0,-10,-33,0" x:Name="MyToggleButton" Style="{StaticResource FlipButton}">
                        <ToggleButton.Content>
                            <Image Loaded="ArrowDownImg_Loaded" Height="50" Width="50" x:Name="ArrowDownImg"   />                               
                        </ToggleButton.Content>
                    </ToggleButton> 
```

在事件中：

```
 private void ArrowDownImg_Loaded(object sender, RoutedEventArgs e)
        {
            Visibility darkBackgroundVisibility = (Visibility)Application.Current.Resources["PhoneDarkThemeVisibility"];
            var ArrowDownImg = sender as Image;

            if (darkBackgroundVisibility != Visibility.Visible)
            {
                ArrowDownImg.Source = new BitmapImage(new Uri("/Images/appbar.arrow.down.circle.dark.rest.png", UriKind.Relative));
            }
            else
            {
                ArrowDownImg.Source = new BitmapImage(new Uri("/Images/appbar.arrow.down.circle.light.rest.png", UriKind.Relative));
            }
        } 
```

# php - 如何在 PHP 中禁止第二个用户注册

> ID：12778654
> 
> 赞同：0
> 
> 时间：2012-10-08T09:16:25.270
> 
> 标签：php, project, registration

我正在制作一个包含用户注册的项目，但是有一个问题。如何防止多账户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:20:49.243

你不能完全。我知道有一些方法

*   存储在会话中，设置会话时拒绝注册-> 用户可以清除会话进行注册
*   需要电子邮件确认 -> 用户可以伪造电子邮件以注册更多
*   存储用户IP并禁用注册一段时间->用户可以使用代理伪造IP并继续

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:30:36.483

@Trinh Hoang Nhu 是对的...您可以在登录时记录用户 IP，然后查看是否有多个帐户。

# perl - 通过 PERL 脚本下载文件

> ID：12778656
> 
> 赞同：0
> 
> 时间：2012-10-08T09:16:26.970
> 
> 标签：perl

我有下面的 PERL 脚本，它尝试下载包含该脚本输出的文件。

我面临一个错误，上面写着：

> 无法在 C:/Apache24/cgi-bin/trim.pl 的未定义值上调用方法“标题”

但是，我的输出文件会在正确的目的地正确写入。请帮助我修复代码并下载输出文件。

```
use strict;
use CGI;
use CGI::Carp qw ( fatalsToBrowser );
use File::Basename;

my $q            = new CGI;
my $upload_dir   = "C:/Apache24/htdocs/files" ;
my ($bytesread, $buffer);
my $numbytes     = 1024;
my $trim_out_dir = "C:/Users/Admin/Desktop/vijay/Metagenomics/NGSQCToolkit_v2.3/CGI_Out";
my $out_file     = "$trim_out_dir/trimmed.fasta";
my $safe_filename_characters = "a-zA-Z0-9_.-";

$q->cgi_error and error( $q, "Error transferring file: " . $q->cgi_error );

my $file         = $q->param( "seq" )     || error( $q, "No file received." );
my $length       = $q->param( "len");
my $quality      = $q->param( "qual");

open ( UPLOADFILE, ">$upload_dir/$file" ) or die "$!";

while ($bytesread = read($file, $buffer, $numbytes)) { 
    print UPLOADFILE $buffer; 
} 

close UPLOADFILE;
system("Reads.pl -i $upload_dir/$file -n $length -o $out_file");
open ( DOWNLOADFILE, "<$out_file" ) or die "$!";

print $cgi->header(
    -type       => 'application/octet-stream'
    -attachment => '$out_file');

close DOWNLOADFILE; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:21:41.270

这不能与 一起编译`strict`，并且由于您使用的是`strict`，因此这似乎不是您执行的代码。您的`$cgi`对象从未定义，因此会在编译时停止脚本。这一行：

```
print $cgi->header( 
```

应该是

```
print $q->header( 
```

你也应该知道

```
-attachment => '$out_file'); 
```

将意味着`attachment`参数将不包含变量的值`$out_file`，它将包含变量的文字名称。如果您希望它包含变量的值，则需要删除引号或使用双引号。

更重要的是，您还应该知道您的脚本非常不安全。您直接使用来自 cgi 对象的值而不验证它们。`open`语句和语句都`system`可以很容易地被操纵以在您的系统上执行任意命令。例如：

```
$out_file = "foo; rm -rf /";
system("Reads.pl -i $upload_dir/$file -n $length -o $out_file"); 
```

您可能希望阅读[有关 security 的文档](http://perldoc.perl.org/perlsec.html)，并可能使用[taint mode](http://perldoc.perl.org/perlsec.html#Taint-mode) ( `-T`switch)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:21:02.783

代替

```
print $cgi->header( 
```

你可能是说

```
print $q->header( 
```

使用`use strict`应该已经发现了这个错误。

# java - Java Networking 音乐流 UDP 或 TCP

> ID：12778657
> 
> 赞同：1
> 
> 时间：2012-10-08T09:16:43.587
> 
> 标签：java, networking, tcp, network-programming, udp

我想制作一个应用程序，让我将音乐从我的*服务器*应用程序流式传输到我的*客户端*应用程序。我不确定是否需要使用`UDP`or `TCP`？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:24:00.603

`UDP`更适合流媒体。但是如果你对你的“*音乐*”流媒体很敏感，**TCP**会更安全。它需要服务器和客户端之间更多的“*握手”。*

# php - 从变量到隐藏表单域的奇怪输出

> ID：12778664
> 
> 赞同：0
> 
> 时间：2012-10-08T09:17:02.897
> 
> 标签：php, arrays, forms, variables

下面是一个函数，它从数据库中输出包含现有用户的表单，带有复选框和提交按钮。用户选择一个或多个要删除的用户并提交表单。我现在正在做的是在 js 中实现一个确认框（“您确定要删除...”），其中应包含用户想要删除的用户。

出于这个原因，我将用户名放在一个隐藏字段中，js 函数将从该字段中检索用户名。问题是不仅用户名被放入隐藏的输入字段值属性，而且还有几个输入字段（！？）。如果我在属性中硬编码例如'username1，username2'，它应该可以正常工作，但如果我使用变量$users 则不会。

```
 public function ShowUsers($userArray) {

        $userIdArray = $userArray[0];
        $userNameArray = $userArray[1];
        $users = implode(",", $userNameArray);

        echo $users;        // username1,username2...

        $nrOfUsers = count($userIdArray);

        for ($i = 0; $i < $nrOfUsers; $i++) {
            $users .= "<label for='$userIdArray[$i]'>
                        $userNameArray[$i]
                        <input type='checkbox' name='$this->_checkBox' value='$userIdArray[$i]' /><br/>
                        </label>";
        }

        $userList = "<div class='userList'>
                    <form id='form3' method='post' action=''>
                        <fieldset>
                            <p>Existing users</p>
                            $users
                            <input type='hidden' value='$users' />
                            <input type='submit' id='$this->_submitRemove' name='$this->_submitRemove' Value='Ta bort' />
                        </fieldset>
                    </form>
                    </div>";

        return $userList;
    } 
```

输出如下：

```
<input type='hidden' value='username1,username2<label for='47'>
                        username1
                        <input type='checkbox' name='check[]' value='47' /><br/>
                        </label><label for='50'>
                        username2
                        <input type='checkbox' name='check[]' value='50' /><br/>
                        </label>' /> 
```

我只是不明白为什么会发生这种情况？$users 的内容（在本例中为 'username1' 和 'username2'）与预期的一样，但为什么将 input 和 label 标签放入 value 属性中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:23:18.657

问题出在你的`for`循环中。在那里，您将所有 HTML 附加到`$users`已经是`$users`==的变量中`username1,username2`。如果你这样做，`echo $users;`或者甚至`var_dump($users);`在你完成`for`循环之后，你会看到。
你到底想在`for`循环中实现什么？你是不是想说

```
for ($i = 0; $i < $nrOfUsers; $i++) {
    echo "<label for='$userIdArray[$i]'>
                $userNameArray[$i]
                <input type='checkbox' name='$this->_checkBox' value='$userIdArray[$i]' /><br/>
          </label>";
} 
```

# c - 杀死使用 popen2 创建的进程

> ID：12778672
> 
> 赞同：0
> 
> 时间：2012-10-08T09:17:34.860
> 
> 标签：c, process, exec, popen

我正在使用函数 popen2（已在 stackoverflow 的其他地方推荐）以编程方式创建一个必须在一段时间后再次终止的进程。popen2 返回一个 PID，我认为这个 PID 可以用来杀死进程。但是，这种方式行不通。为了杀死它，我必须增加返回的 PID，我不明白（见下面的代码）

当各种线程并行执行此操作时，可能会出现另一个问题。在那种情况下，我认为，由于竞争条件，PID 的差异可能不止一个。

所以我的问题是：如何在多线程场景中可靠地识别 popen2 创建的进程的 PID？

```
#include <sys/types.h>
#include <fcntl.h>
#include <unistd.h>
#include <signal.h>

#define READ 0
#define WRITE 1

pid_t popen2(const char *command, int *infp, int *outfp) {

    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)
        return -1;

    pid = fork();

    if (pid < 0)
        return pid;
    else if (pid == 0)
    {
        close(p_stdin[WRITE]);
        dup2(p_stdin[READ], READ);
        close(p_stdout[READ]);
        dup2(p_stdout[WRITE], WRITE);

        execl("/bin/sh", "sh", "-c", command, NULL);
        perror("execl");
        exit(1);
    }

    if (infp == NULL)
        close(p_stdin[WRITE]);
    else
        *infp = p_stdin[WRITE];

    if (outfp == NULL)
        close(p_stdout[READ]);
    else
        *outfp = p_stdout[READ];

    return pid;
}

main() {
    pid_t pid;

    // Create process
    pid = popen2("crafty", &in, &out);

    sleep(5);

    // Why doesn't kill(pid, SIGKILL) work?
    kill(pid+1, SIGKILL);

    while (1); 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:51:38.463

我想我明白了。

```
execl("/bin/sh", "sh", "-c", command, NULL); 
```

运行`sh`并`popen2`返回它的 pid。当您调用`kill`它时，它会杀死`sh`，但不会触及它的子进程`command`。杀死下一个pid杀死实际上是侥幸`command`。这并不总是有效，只是取决于比赛条件。

如果您希望能够杀死您的目标进程，那么您将不得不直接启动它。

警告（未经测试的代码）：

```
pid_t popen2(const char **command, int *infp, int *outfp) {

    int p_stdin[2], p_stdout[2];
    pid_t pid;

    if (pipe(p_stdin) != 0 || pipe(p_stdout) != 0)
        return -1;

    pid = fork();

    if (pid < 0)
        return pid;
    else if (pid == 0)
    {
        close(p_stdin[WRITE]);
        dup2(p_stdin[READ], READ);
        close(p_stdout[READ]);
        dup2(p_stdout[WRITE], WRITE);

        execvp(*command, command);
        perror("execvp");
        exit(1);
    }

    if (infp == NULL)
        close(p_stdin[WRITE]);
    else
        *infp = p_stdin[WRITE];

    if (outfp == NULL)
        close(p_stdout[READ]);
    else
        *outfp = p_stdout[READ];

    return pid;
} 
```

并以以下形式传递命令

```
char *command[] = {"program", "arg1", "arg2", ..., NULL}; 
```

在您的特定示例中：

```
char *command[] = {"crafty", NULL}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-21T12:00:06.357

您可以使用 shell 的“exec”命令来避免挂起的进程。另外：popen2 应关闭未使用管道的写入端，否则管道保持打开状态。如果指针（infp、outpf）之一为 NULL，则创建并立即关闭管道是没有用的。这是我在项目中使用的 popen2 版本：

```
pid_t popen2(char *command, int *in_fd, int *out_fd) {
    int     pin[2], pout[2];
    pid_t   pid;
    char    cmd[strlen(command)+10];

    if (out_fd != NULL) {
        if (pipe(pin) != 0) return(-1);
    }
    if (in_fd != NULL) {
        if (pipe(pout) != 0) {
            if (out_fd != NULL) {
                close(pin[0]);
                close(pin[1]);
            }
            return(-1);
        }
    }

    pid = fork();

    if (pid < 0) {
        if (out_fd != NULL) {
            close(pin[0]);
            close(pin[1]);
        }
        if (in_fd != NULL) {
            close(pout[0]);
            close(pout[1]);
        }
        return pid;
    }
    if (pid==0) {
        if (out_fd != NULL) {
            close(pin[1]);
            dup2(pin[0], 0);
        }
        if (in_fd != NULL) {
            close(pout[0]);
            dup2(pout[1], 1);
        }
        // Exec makes possible to kill this process 
        sprintf(cmd, "exec %s", command);
        execlp("sh", "sh", "-c", cmd, NULL);
        fprintf(stderr, "%s:%d: Exec failed in popen2\. ", __FILE__, __LINE__);
        perror("Error:");
        exit(1);
    }
    if (in_fd != NULL) {
        close(pout[1]);
        *in_fd = pout[0];
    }
    if (out_fd != NULL) {
        close(pin[0]);
        *out_fd = pin[1];
    }
    return pid;
} 
```

# timeout - JavaMail store.connect() 超时 - 无法通过 Java 读取 gmail 收件箱

> ID：12778679
> 
> 赞同：3
> 
> 时间：2012-10-08T09:18:04.940
> 
> 标签：timeout, imap, jakarta-mail, inbox

我正在尝试连接到我的 gmail 收件箱以通过 Java 应用程序阅读邮件。我在用..

*   jdk1.6.0_13
*   javamail-1.4.3 库 - (mail.jar, mailapi.jar, imap.jar)

下面是我的代码：**MailReader.java**

```
import java.util.Properties;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Store;

public class MailReader
{
    public static void main(String[] args)
    {
        readMail();     
    }

    public static void readMail()
    {
        Properties props = System.getProperties();
        props.setProperty("mail.store.protocol", "imaps");
        try
        {
            Session session = Session.getDefaultInstance(props, null);
            Store store = session.getStore("imaps");
            store.connect("imap.gmail.com", "myEmailId@gmail.com", "myPwd");
            System.out.println("Store Connected..");

            //inbox = (Folder) store.getFolder("Inbox");
            //inbox.open(Folder.READ_WRITE);
            //Further processing of inbox....
        }
        catch (MessagingException e)
        {
            e.printStackTrace();            
        }
    }
} 
```

我希望商店连接，但调用 store.connect() 永远不会返回，我得到以下输出：

> * * *
> 
> javax.mail.MessagingException：连接超时；
> 嵌套异常是：
> java.net.ConnectException: Connection timed out
> at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:441)
> at javax.mail.Service.connect(Service.java:233)
> at javax。 Mail.Service.connect(Service.java:134)
> 在ReadMail.readMail(ReadMail.java:21) 在 ReadMail.main(ReadMail.java:10
> )

但是，我可以使用 SMTP、Transport.send() 和相同的 gmail 帐户通过 Java 发送电子邮件。但无法阅读电子邮件。有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:19:33.643

IMAP 使用不同的端口（143 表示非安全，993 表示安全）发送邮件（25），我怀疑它被阻止了。你能在那个端口上远程登录到那个服务器吗，例如

```
telnet imap.gmail.com {port number} 
```

这将表明您是否有网络连接。

# emacs - Emacs 24 Ubuntu 菜单面板

> ID：12778680
> 
> 赞同：4
> 
> 时间：2012-10-08T09:18:09.297
> 
> 标签：emacs, ubuntu-12.04, menubar

刚刚在 ubuntu 精确操作系统上安装了 Emacs 24。顶部面板中的菜单栏缺少许多选项（例如，使用 Auctex，所有 Latex 选项）。

我记得在网上某处看到可以将菜单放在 Emacs 框架的顶部，而不是顶部面板的统一默认值。关于如何在 ubuntu 中启用全局菜单栏有一个答案。有人可以指点我如何在全局菜单中禁用它，直到它达到他们一起玩得很好的地步。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T09:02:34.767

Ubuntu 有一个硬编码的 hack，可以禁用与某些文件名模式匹配的应用程序的全局菜单栏。`emacs`其中之一是`firefox`另一个流行的程序，它遇到与 GTK 分离的菜单栏相同的问题，没有按照 X 程序期望的通常方式更新。

尝试运行 update-alternatives 选择 emacs24 作为您的默认 Emacs，然后使用`emacs`它来启动它，而不是`emacs24`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-28T08:47:44.050

我正在使用@Bernhard Kausler 提到的符号链接方法，但发现如果不恢复使用全局菜单，我无法以这种方式固定从 shell 中盯着 emacs 产生的图标。

我有一个使用这个 .desktop 文件的统一启动器快捷方式：

```
#!/usr/bin/env xdg-open
[Desktop Entry]
Version=1.0
Type=Application
Terminal=false
Icon[en_NZ]=emacs
Name[en_NZ]=Gnu Emacs 24
Exec=emacs
Name=Gnu Emacs 24
Icon=emacs
StartupWMClass=Emacs24 
```

现在我可以将 emacs 固定在启动器上，它会使用自己的菜单栏启动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T12:06:24.827

您可以只创建一个指向*emacs 的符号链接？？？*用于启动*emacs*的命令，如果符号链接的名称恰好是“emacs”，则启动时将不会使用全局菜单。

这是 Emacs 动态菜单的一个已知错误，其中更改主要模式会在菜单中添加或删除条目。
[https://bugs.launchpad.net/ubuntu/+source/appmenu-gtk/+bug/673302](https://bugs.launchpad.net/ubuntu/+source/appmenu-gtk/+bug/673302)

不幸的是，被列入黑名单的应用程序的名称被硬编码到 appmenu-gtk 包中，而且似乎没有办法在不接触源代码的情况下添加项目。

# struts2 - Getting exception with struts2?

> ID：12778681
> 
> 赞同：0
> 
> 时间：2012-10-08T09:18:16.687
> 
> 标签：struts2, log4j, tomcat7

I tried to run simple example(Hello wold) in struts-2.3.4.1 with tomcat server 7.0. But when i run this sample application i got following exception :

```
java.lang.NullPointerException
    org.apache.struts2.impl.StrutsActionProxy.getErrorMessage(StrutsActionProxy.java:69)
    com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:432) 
```

used Log4j.xml Configuration file:

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false">

<appender class="org.apache.log4j.rolling.RollingFileAppender" name="FixedWindowRollingFile">
   <param name="Append" value="true"/>
   <param name="ImmediateFlush" value="true"/>

   <rollingPolicy class="org.apache.log4j.rolling.FixedWindowRollingPolicy">
      <param name="fileNamePattern" value="c:/logs/HelloExample/HelloExample.%i.log"/>
       <param name="minIndex" value="1"/>
      <param name="maxIndex" value="10"/>
       </rollingPolicy>
   <triggeringPolicy class="org.apache.log4j.rolling.SizeBasedTriggeringPolicy">
     <param name="MaxFileSize" value="1002400"/>
       </triggeringPolicy>
   <layout class="org.apache.log4j.PatternLayout">
     <param name="ConversionPattern"  value="%d{yyyy-MM-dd HH:mm:ss} %p %c{1}:%L - %m%n"/>
     </layout>
</appender>

 <appender name="ConsoleAppender" class="org.apache.log4j.ConsoleAppender">
<layout class="org.apache.log4j.SimpleLayout"/>
</appender>

   <root>
   <priority value="DEBUG"/>
   <appender-ref ref="ConsoleAppender"/>
    <appender-ref ref="FixedWindowRollingFile"/>

   </root>
</log4j:configuration> 
```

Also I have used my own log4j.xml configuration file to configure web application but i got this exception regularly(generated log file [https://gist.github.com/3851738](https://gist.github.com/3851738)).

# python - Django 1.4.1 Admin CSS not showing

> ID：12778686
> 
> 赞同：1
> 
> 时间：2012-10-08T09:18:29.403
> 
> 标签：python, css, django, django-admin, django-staticfiles

I know this question has been asked many times but none of the solutions seems to work for me. I just started using django and I'm having issues trying to get the CSS for the admin panel to show when I use runserver.

When I'm in: `localhost:8000/admin/` none of the CSS shows up

```
<link rel="stylesheet" type="text/css" href="/static/admin/css/base.css" />
<link rel="stylesheet" type="text/css" href="/static/admin/css/dashboard.css" /> 
```

That is what is shown in the in the HTML of the admin page, which those URL's it links to ends up becoming `http://localhost:8000/static/admin/css/base.css` which doesn't link to anything.

In **settings.py** I have

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'django.contrib.auth.context_processors.auth',
    'django.contrib.messages.context_processors.messages',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'codeapp',
    'django.contrib.admin',
    'django.contrib.admindocs',
)

STATIC_ROOT = '/Users/datboitom/Sites/Codebase/codebase/codeapp/static/'
STATIC_URL = '/static/' 
```

I'm just not too sure what else to do. If can help me to fix this issue that would be great. I've ran `python manage.py collectstatic` and the static files are in `/Users/datboitom/Sites/Codebase/codebase/codeapp/static/` folder. There just doesn't seem to be any link between these files and whats trying to be loaded. One is trying to load off the localhost url and not the path of where its located on the computer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-28T18:24:00.070

以防万一有人再次遇到此错误。在 Debug=False 模式下，Django 将不再为您提供静态文件。您的生产服务器应该负责这一点。但是，如果您仍然想在 debug=false 中本地测试您的应用程序，您应该在不安全模式下运行 devserver：

```
manage.py runserver --insecure 
```

取自这里：[为什么 DEBUG=False 设置使我的 django 静态文件访问失败？](https://stackoverflow.com/questions/5836674/why-does-debug-false-setting-make-my-django-static-files-access-fail)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T21:30:01.070

I had this problem just recently after changing dev machines.

It turned out that my new machine wasn't set to run django apps in debug mode locally, so adding

```
DEBUG = True 
```

To my dev machine's settings.py sorted it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T02:36:45.430

## 配置错误

在 setting.py 中，您应该 `'django.contrib.staticfiles'`在 INSTALLED_APPS
中添加代码显示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.staticfiles',
     ...... 
```

好的，试试看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T05:43:05.977

我猜您的 settings.py 文件中缺少以下内容

```
# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T06:14:20.127

你的服务器设置是什么？

根据文档，您不应该在`STATIC_ROOT`

留空`STATIC_ROOT`，然后将路径放入`STATICFILES_DIRS`.

希望这可以帮助

# c# - Provide feedback to event caller using writable property in EventArgs

> ID：12778689
> 
> 赞同：3
> 
> 时间：2012-10-08T09:18:33.603
> 
> 标签：c#, .net, events, reflection

In Dustin Campbell's answer in question [Return a value from a Event — is there a Good Practice for this?](https://stackoverflow.com/questions/1210026/return-a-value-from-a-event-is-there-a-good-practice-for-this) it is stated that instead of returning data from an event handler, we can have a **writable property on a set of custom EventArgs that is passed to the event** similar to Cancel property of the WinForms FormClosing event.

How do I provide feedback to event caller using properties in EventArgs?

My specific scenario is that there is a Controller class that does `Job A` and there are many classes requesting the `Job A` to be done. Thus, the controller is subscribed to this event on all classes.

I want to give some feedback to the caller that the job is done. The tricky part is that those classes are module-like and controller doesn't know anything about them.

My though is to include that `writable property` to the delegate of the event in order for the controller to give feedback through it. This property could somehow be invoked using reflection, which is fine in my scenario.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:13:14.043

您不能为代表定义属性。此外，您不需要对这种机制进行反思。您要做的是在`EventArgs`派生类中定义您的“返回”属性。

一个简单的这样的类是：

```
public class JobEventArgs : EventArgs {
  public bool Done { get; set; }
} 
```

现在你可以在类中声明你的事件为

```
public event EventHandler<JobEventArgs> Job; 
```

处理事件的方法中的用法：

```
public void DoJob(object s, JobEventArgs args) {
  // do stuff
  args.Done = true;
} 
```

并在事件调用代码中：

```
public void FireJobEvent() {
  var args = new JobEventArgs();

  this.Job(this, args);

  if(!args.Done) {
    // the job was not handled
  }
} 
```

但坦率地说，您似乎想在完成时通过通知异步完成一项工作。

这将导致语法像..

```
class Module {
  public void JobCompleted(IAsyncResult r) {
    if(!r.IsCompleted)
      return;

    Console.WriteLine("The job has finished.");
  }

  public void ExecuteJob() {
    var job = new EventArgs<JobEventArgs>((s, a) => { this.controller.JobA(); });
    job.BeginInvoke(null, null, 
      r => 
      { 
        this.JobCompleted(r); 
        if(r.IsCompleted) 
          job.EndInvoke(r); 
      }, null);
  }
} 
```

# jquery - Identify orphan nodes in the DOM and remove them! Memory leaks of orphan DOM nodes

> ID：12778693
> 
> 赞同：0
> 
> 时间：2012-10-08T09:18:47.150
> 
> 标签：jquery, internet-explorer, memory-leaks

Do you know of any good way to identify all the orphan nodes and remove them from DOM?

My problem is that i have a huge application with many controls and some of them are orphans and cause memory leaks.

So is there a good way fix that?

Thanks

*P.S according to sIEve documentation*

***Orphan:** if the value in this column is “Yes” then the element is not attached to the document.body. IE then it is a orphan node. In IE this Elements can leak as well so special care should be taken on this kinds of elements. For example clearing/setting the innerHTML of orphan nodes will cause pseudo leaks. Also orphan nodes will not fire ‘onpropertychange’ events.* (Zahid Riaz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T18:21:15.047

**我有一个想法让你用 sIEve 进行测试：**

如果您要这样创建 DOM 元素： `$('body').append('<div>foo</div>');`

尝试这样做[而不是]：

```
var elm = document.createElement('div');
elm.innerHTML = 'foo';
$(document.body).append(elm); //or document.body.appendChild(elm); 
```

*然后*再次运行内存泄漏检查插件，看看会发生什么。*（我个人很好奇。）*

# c - bmp 上的错误 ptr 读取 c

> ID：12778696
> 
> 赞同：0
> 
> 时间：2012-10-08T09:18:55.623
> 
> 标签：c, bmp

我收到以下代码错误：

```
FILE    *fp;
int     patno;
int     h, i, j, l, m;
int     i1, i2, i3;

 if( (fp=fopen(filename, "r")) == NULL ) {
    printf("\"%s\" not found!!\n", filename);
    return(-1);
}

for( h=0; h<4; h++ ) {
    l = 0;
    for( i3 = 0; i3 < 3; i3++ ) {
        for( i2 = 0; i2 < PATTERN_HEIGHT; i2++ ) {
            for( i1 = 0; i1 < PATTERN_WIDTH; i1++ ) {
                if( fscanf(fp, "%d", &j) != 1 ) {
                    printf("Pattern Data read error!!\n");
                    return -1;
                }
                 --..rest of code..-- 
```

文件存在且路径正确，`if(fscanf(fp...)`指针 fp 的值为`0x00000000<Bad ptr>..`

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:14:54.210

fscanf 返回 0 而不是 1，因为 bmp 文件不包含文本形式的数字。您需要以二进制文件（模式“rb”）打开文件并使用 fread 提取字段。

# c# - asp.net handler for root folder

> ID：12778697
> 
> 赞同：3
> 
> 时间：2012-10-08T09:18:57.683
> 
> 标签：c#, asp.net, iis

I'm using VS 2010, .NET 4.0, ASP.NET Web Application project.

I have custom HttpHandler for handling *.aspx. In root folder I have Default.aspx page that is used just to catch root folder access and to redirect request to other .aspx page, and that request is further processed by my custom handler.

If request is directed to root folder, Default.aspx will be processed. If request is sent to *.aspx (any other then Default.aspx) my custom handler will process it.

**I want to remove Default.aspx page from project, and to still be able to catch request to my root application folder, and redirect request to my custom handler.**

I have tried with registering a route in Global.asax:

```
private void RegisterRoutes(RouteCollection routes)
    {
        routes.MapPageRoute("Default",
            "",
            "~/Default.aspx");
    } 
```

that didn't work.

Also, I have tried registering in web.config handler:

```
<add name="DefaultHandler" path="*" verb="*" type="App.DefaultHandler, App" /> 
```

but that didn't work too.

**UPDATE:**

Actually, handler defined in web.config `path="*"` does work, but it catches all requests to server which I don't think is good practice.

I have created DefaultModule, where on BeginRequest event I check Path property in Request and assume that is request to default page. So far, so good, but I'm not sure it will work in all cases, here is code:

```
 public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(context_BeginRequest);
    }

    void context_BeginRequest(object sender, EventArgs e)
    {
        HttpRequest request = HttpContext.Current.Request;
        if (request.Path == "/")
        {
            HttpContext.Current.RewritePath("custom.aspx");
        }
    } 
```

If anyone has any better idea I'd appreciate it, thanks.

**UPDATE:**

I have tried using this solution: [https://stackoverflow.com/a/1913073/84852](https://stackoverflow.com/a/1913073/84852) I thought that web server will request Default.aspx and then I could catch that request using handler described, but application just throughs "File not found" exception.

Anyway, I like solution with HttpModule, and if there is no other solution presented I will go with it. I'm just worried about condition `if (request.Path == "/")`, so I've changed it to

```
if (context.Request.CurrentExecutionFilePath == context.Request.ApplicationPath) 
```

just in case.

New ideas are still welcome. Thanks.

**UPDATE:**

Solution with HttpModule doesn't work on IIS, but only on VS development server. Problem is that Session is not started when request gets to my custom HttpHandler (which btw implements IRequiresSessionState).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:13:59.730

如果我正确理解您的问题，我相信您的路径应该是这样的：

```
<add name="DefaultHandler" path="*.aspx" verb="*" type="App.DefaultHandler, App" /> 
```

path=* 将使它捕获所有请求，而 *.aspx 将它限制为带有 .aspx 扩展名的请求。

# xml - WordML binary to file conversion

> ID：12778698
> 
> 赞同：1
> 
> 时间：2012-10-08T09:18:58.173
> 
> 标签：xml, xslt, ms-word, dita

I'm planning an XSLT transformation to some WordML documents (2003) to DITA. Fairly straight forward... except, I need to save the inline binary of the png file (in the tag) as a file at a level above the XML output file. Is it possible to output to a png in XSLT, or am I going to have to process it through a Java program first?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T23:16:09.743

你确定 WordML 有内联二进制文件吗？我认为你的假设是不正确的。它很可能是 base64 编码的数据。我们之前已经这样做了，我挖出了她从 WordML 生成 DITA 的代码，图像使用其 base64 编码字节填充到“src”属性中：

```
<image>
<xsl:variable name="srcfile" select="concat('/word/',string($rels/rel:Relationships/rel:Relationship[@Id = $src]/@Target))"/>
<xsl:variable name="imagepkg" select="//pkg:part[@pkg:name=$srcfile]"/>
<xsl:variable name="attachmentContentType" select="$imagepkg/@pkg:contentType"/>
<xsl:variable name="encodedImageBytes" select="$imagepkg/pkg:binaryData/text()"/>                        
<xsl:variable name="scale">
    <xsl:choose>
        <xsl:when test="w:r/w:drawing/wp:inline/a:graphic/a:graphicData/pic:pic/pic:spPr/a:ln/@w">
            <xsl:value-of select="number(w:r/w:drawing/wp:inline/a:graphic/a:graphicData/pic:pic/pic:spPr/a:ln/@w)"/>
        </xsl:when>
        <xsl:otherwise>
            <xsl:value-of select="$defscale"/>
        </xsl:otherwise>
    </xsl:choose>
</xsl:variable> 
<xsl:attribute name="width">
    <xsl:value-of select="concat(string(number(w:r/w:drawing/descendant::wp:extent/@cx div ($scale * 96))),'in')"/>
</xsl:attribute>
<xsl:attribute name="height">
    <xsl:value-of select="concat(string(number(w:r/w:drawing/descendant::wp:extent/@cy div ($scale * 96))),'in')"/>
</xsl:attribute>
<xsl:attribute name="src">
    <xsl:text>data:</xsl:text>
    <xsl:value-of select="$attachmentContentType"/>                
    <xsl:text>;base64,</xsl:text>
    <xsl:value-of select="$encodedImageBytes"/>
</xsl:attribute>
</image> 
```

如果需要，您可以将所有 base64 编码信息放入单独的文件中，但二进制数据不在 WordML 中。如果您希望它与外部文件一步到位，您可以编写一个 java 扩展函数（假设您使用像 Saxon 这样的 java XSLT）并传入 base64 编码的图像，该函数将解码并写入磁盘。

# drupal - 当列表很长时，Jquery 停止提交用户表单值

> ID：12778704
> 
> 赞同：0
> 
> 时间：2012-10-08T09:19:21.007
> 
> 标签：drupal, jquery

我希望这是我的脚本，而不是 Jquery 错误（版本 1.4.4）。这个脚本在几个表的第一行上运行良好。jquery 或用户输入放置和发布的值是正确的。但是在表格列表的末尾，表单开始错误地提交（用萤火虫检查）。所发生的是为先前条目发布的值，而不是用户输入的实际文本。例如 2012-10-4 的表格工作正常，但 2012-09-13 的表格不正确：

jQuery：

```
 (function ($) {     

  Drupal.behaviors.mvc = {
    attach: function(context, settings) {      
     $(document).ready(function() {

        // container start

            $('#timetracker-mytime-').ajaxForm({
            success: function(result){

                    var d = new Date();

                    var month = d.getMonth()+1;
                    var day = d.getDate();

                    var output = d.getFullYear() + '-' +
                        ((''+month).length<2 ? '0' : '') + month + '-' +
                        ((''+day).length<2 ? '0' : '') + day;

                    var section = result.split('}{');

                    // show any previously hidden tables
                    //$('#table-').show();
                    $("div:hidden[id*='table-']").show();

                    // hide the working table 
                    // $('#table-' + section[0]).hide();
                    $('div#most-recent-events table > tbody').prepend(section[1]);

                    // remove the last row to keep the list short ( 5 rows )
                    $('div#most-recent-events table > tbody > tr:last').remove();

                    $('div#table-' + section[0] + ' table > thead').append(section[1]);

                    // show new working table
                    /*$('#output').html(section[1]).css({
                            backgroundColor: '#99FF66',
                            padding: '10px'
                            });*/
;
                }

            });

            $('#timetracker-myreports-').ajaxForm({
            target:'#output',
            success: function(){
                            $('#export-form').show();
                            $("#my-report-id").val($('#edit-my-projects-id option:selected').val());
                        }
            });

            $('#update-mini-form').ajaxForm({
            target: this});

            $( "#edit-event-date" ).AnyTime_picker(
                  { format: "%Y-%m-%d",
                    formatUtcOffset: "%: (%@)",
                    placement: "popup" });

            $("a.delete-time").live("click", function(event) {

                event.preventDefault(); 
                var row = $(this).attr("id").split('-');
                var delurl = $(this).attr("href");

                $.ajax({
                        type: "GET",
                        url: delurl,
                        dataType: "html",
                        cache: false,
                        success: function(result){
                            $("#row-" + row[1]).remove();
                            $('#total-user-hours').html(result);
                        }
                });

                return false;

            });

            $("a.update-time").live("click", function(event) {

                event.preventDefault(); 
                var row = $(this).attr("id").split('-');

                $("tr:visible[class*='temp-form']").hide();

                $('#row-' + row[1]).after(
                    $("#mini-form-row").addClass('temp-form').show('slow')

                    );              

                $("#update-entry").show(); 

                // fill in form values

                $("#update-entry #id-mini-form").val($("tr#row-" + row[1] + " td.cell-1-" + row[1]).text());

                $("#update-entry #edit-task").val($("tr#row-" + row[1] + " td.cell-2-" + row[1]).text());

                $("#update-entry #edit-hours").val($("tr#row-" + row[1] + " td.cell-5-" + row[1]).text());

                $("#projects option[value=" + $('#row-' + row[1] + ' > td > #my-projects-id').val() +"]").attr("selected","selected");

            });

            $("div.form-close").live("click", function(event) {
                    $("tr:visible[id*='mini-form-']").hide();
            });

            $("#sendUpdate").live("click",function() {          
                $.ajax({
                            type: "POST",
                            url: "http://drupal.se/timetracker/timetracker/update_time/",
                            data: $('#update-entry').serialize(),
                            cache: false,
                            success: function(result){

                                section = result.split('}{');
                                $('#row-' + section[0]).replaceWith(section[1]);

                            }
                });

                return false;           

            });

            $('#edit-export').live("click", function(){

                    $('#timetracker-myreports-csv-').attr("action", 'http://drupal.se/timetracker/timetracker/myreport_csv/');

                    $('#timetracker-myreports-csv-').submit();

            });

          // container end
      });
    }
  };

})(jQuery);

    <div id="table-2012-10-03"><div class="table-label"><span     class="date">2012-10-03</span><span class="hours"></span></div><table class="sticky-enabled">
 <thead><tr><th>ID</th><th>Task</th><th>Project</th><th></th><th>Hours</th><th colspan="2">Operations</th> </tr></thead>
<tbody>
 <tr id="row-213" class="odd"><td class="cell-1-213">213</td><td class="cell-2-213">the last try before</td><td class="cell-3-213">how beans</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="204"></td><td class="cell-5-213">2</td><td class="cell-6-213"><a href="/timetracker/timetracker/delete_time/213/204" class="delete-time" id="del-213">delete</a></td><td class="cell-7-213"><a href="/timetracker/timetracker/update_time/213" class="update-time" id="upd-213">update</a></td> </tr>
 <tr id="row-212" class="even"><td class="cell-1-212">212</td><td class="cell-2-212">dd more because our english has gotten terrible</td><td class="cell-3-212">how beans</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="204"></td><td class="cell-5-212">2</td><td class="cell-6-212"><a href="/timetracker/timetracker/delete_time/212/204" class="delete-time" id="del-212">delete</a></td><td class="cell-7-212"><a href="/timetracker/timetracker/update_time/212" class="update-time" id="upd-212">update</a></td> </tr>
 <tr id="row-211" class="odd"><td class="cell-1-211">211</td><td class="cell-2-211">discovering clean fuel sources</td><td class="cell-3-211">how beans</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="204"></td><td class="cell-5-211">2</td><td class="cell-6-211"><a href="/timetracker/timetracker/delete_time/211/204" class="delete-time" id="del-211">delete</a></td><td class="cell-7-211"><a href="/timetracker/timetracker/update_time/211" class="update-time" id="upd-211">update</a></td> </tr>
 <tr id="row-209" class="even"><td class="cell-1-209">209</td><td class="cell-2-209">riding the rainbow</td><td class="cell-3-209">project nine</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="196"></td><td class="cell-5-209">2</td><td class="cell-6-209"><a href="/timetracker/timetracker/delete_time/209/196" class="delete-time" id="del-209">delete</a></td><td class="cell-7-209"><a href="/timetracker/timetracker/update_time/209" class="update-time" id="upd-209">update</a></td> </tr>
 <tr id="row-206" class="odd"><td class="cell-1-206">206</td><td class="cell-2-206">a game of bones</td><td class="cell-3-206">project ten</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="197"></td><td class="cell-5-206">2</td><td class="cell-6-206"><a href="/timetracker/timetracker/delete_time/206/197" class="delete-time" id="del-206">delete</a></td><td class="cell-7-206"><a href="/timetracker/timetracker/update_time/206" class="update-time" id="upd-206">update</a></td> </tr>
 <tr id="row-205" class="even"><td class="cell-1-205">205</td><td class="cell-2-205">a game of thrones</td><td class="cell-3-205">project ten</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="197"></td><td class="cell-5-205">2</td><td class="cell-6-205"><a href="/timetracker/timetracker/delete_time/205/197" class="delete-time" id="del-205">delete</a></td><td class="cell-7-205"><a href="/timetracker/timetracker/update_time/205" class="update-time" id="upd-205">update</a></td> </tr>
 <tr id="row-203" class="odd"><td class="cell-1-203">203</td><td class="cell-2-203">trial and lots of errors</td><td class="cell-3-203">project two</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="181"></td><td class="cell-5-203">4</td><td class="cell-6-203"><a href="/timetracker/timetracker/delete_time/203/181" class="delete-time" id="del-203">delete</a></td><td class="cell-7-203"><a href="/timetracker/timetracker/update_time/203" class="update-time" id="upd-203">update</a></td> </tr>
 <tr id="row-192" class="even"><td class="cell-1-192">192</td><td class="cell-2-192">driving to philly to get cream cheese</td><td class="cell-3-192">project three to one</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="182"></td><td class="cell-5-192">1</td><td class="cell-6-192"><a href="/timetracker/timetracker/delete_time/192/182" class="delete-time" id="del-192">delete</a></td><td class="cell-7-192"><a href="/timetracker/timetracker/update_time/192" class="update-time" id="upd-192">update</a></td> </tr>
 <tr class="odd"><td></td><td></td><td></td><td>Total Hours:</td><td colspan="3" id="total-user-hours">17</td> </tr>
 <tr id="mini-form-row" style="display:none" class="even"><td colspan="7"><div style="text-align:right;cursor:pointer;" class="form-close">close x</div><form method="post" style="display:none" id="update-entry" action="http://drupal.se/timetracker/timetracker/update_time"><table><tr><td><label>Task<input type="textfield" id="edit-task" name="task" value="" size="12"></label></td><td><label>Projects<select id="projects" name="projects"><option selected="selected" value="none"></option><option value="204">how beans</option><option value="217">New project</option><option value="199">project 12</option><option value="206">project 14</option><option value="195">project eight</option><option value="202">project eleven</option><option value="203">project eleven</option><option value="205">project eleven</option><option value="187">project five and five</option><option value="186">project four and seven</option><option value="196">project nine</option><option value="180">project one</option><option value="209">project one</option><option value="210">project one</option><option value="211">project one</option><option value="212">project one</option><option value="213">project one</option><option value="214">Project One</option><option value="215">Project One</option><option value="193">project six</option><option value="197">project ten</option><option value="182">project three to one</option><option value="181">project two</option></select></label></td><td><input type="hidden" name="id_mini_form" id="id-mini-form" value="place"></td><td><label>Hours<input type="textfield" id="edit-hours" name="hours" size="2" value=""></label><td><input type="button" id="sendUpdate" value="update"></td></tr></table></form></td> </tr>
</tbody>
</table>
</div>

    <div id="table-2012-09-19"><div class="table-label"><span class="date">2012-09-19</span><span class="hours"></span></div><table class="sticky-enabled">
 <thead><tr><th>ID</th><th>Task</th><th>Project</th><th></th><th>Hours</th><th colspan="2">Operations</th> </tr></thead>
<tbody>
 <tr id="row-214" class="odd"><td class="cell-1-214">214</td><td class="cell-2-214">hullo world</td><td class="cell-3-214">project nine</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="196"></td><td class="cell-5-214">4</td><td class="cell-6-214"><a href="/timetracker/timetracker/delete_time/214/196" class="delete-time" id="del-214">delete</a></td><td class="cell-7-214"><a href="/timetracker/timetracker/update_time/214" class="update-time" id="upd-214">update</a></td> </tr>
 <tr class="even"><td></td><td></td><td></td><td>Total Hours:</td><td colspan="3" id="total-user-hours">4</td> </tr>
 <tr id="mini-form-row" style="display:none" class="odd"><td colspan="7"><div style="text-align:right;cursor:pointer;" class="form-close">close x</div><form method="post" style="display:none" id="update-entry" action="http://drupal.se/timetracker/timetracker/update_time"><table><tr><td><label>Task<input type="textfield" id="edit-task" name="task" value="" size="12"></label></td><td><label>Projects<select id="projects" name="projects"><option selected="selected" value="none"></option><option value="204">how beans</option><option value="217">New project</option><option value="199">project 12</option><option value="206">project 14</option><option value="195">project eight</option><option value="202">project eleven</option><option value="203">project eleven</option><option value="205">project eleven</option><option value="187">project five and five</option><option value="186">project four and seven</option><option value="196">project nine</option><option value="180">project one</option><option value="209">project one</option><option value="210">project one</option><option value="211">project one</option><option value="212">project one</option><option value="213">project one</option><option value="214">Project One</option><option value="215">Project One</option><option value="193">project six</option><option value="197">project ten</option><option value="182">project three to one</option><option value="181">project two</option></select></label></td><td><input type="hidden" name="id_mini_form" id="id-mini-form" value="place"></td><td><label>Hours<input type="textfield" id="edit-hours" name="hours" size="2" value=""></label><td><input type="button" id="sendUpdate" value="update"></td></tr></table></form></td> </tr>
</tbody>
</table>
</div><div id="table-2012-09-13"><div class="table-label"><span class="date">2012-09-13</span><span class="hours"></span></div><table class="sticky-enabled">
 <thead><tr><th>ID</th><th>Task</th><th>Project</th><th></th><th>Hours</th><th colspan="2">Operations</th> </tr></thead>
<tbody>
 <tr id="row-215" class="odd"><td class="cell-1-215">215</td><td class="cell-2-215">hullo world two</td><td class="cell-3-215">project one</td><td><input type="hidden" name="my_projects_id" id="my-projects-id" value="180"></td><td class="cell-5-215">4</td><td class="cell-6-215"><a href="/timetracker/timetracker/delete_time/215/180" class="delete-time" id="del-215">delete</a></td><td class="cell-7-215"><a href="/timetracker/timetracker/update_time/215" class="update-time" id="upd-215">update</a></td> </tr>
 <tr class="even"><td></td><td></td><td></td><td>Total Hours:</td><td colspan="3" id="total-user-hours">4</td> </tr>
 <tr id="mini-form-row" style="display:none" class="odd"><td colspan="7"><div style="text-align:right;cursor:pointer;" class="form-close">close x</div><form method="post" style="display:none" id="update-entry" action="http://drupal.se/timetracker/timetracker/update_time"><table><tr><td><label>Task<input type="textfield" id="edit-task" name="task" value="" size="12"></label></td><td><label>Projects<select id="projects" name="projects"><option selected="selected" value="none"></option><option value="204">how beans</option><option value="217">New project</option><option value="199">project 12</option><option value="206">project 14</option><option value="195">project eight</option><option value="202">project eleven</option><option value="203">project eleven</option><option value="205">project eleven</option><option value="187">project five and five</option><option value="186">project four and seven</option><option value="196">project nine</option><option value="180">project one</option><option value="209">project one</option><option value="210">project one</option><option value="211">project one</option><option value="212">project one</option><option value="213">project one</option><option value="214">Project One</option><option value="215">Project One</option><option value="193">project six</option><option value="197">project ten</option><option value="182">project three to one</option><option value="181">project two</option></select></label></td><td><input type="hidden" name="id_mini_form" id="id-mini-form" value="place"></td><td><label>Hours<input type="textfield" id="edit-hours" name="hours" size="2" value=""></label><td><input type="button" id="sendUpdate" value="update"></td></tr></table></form></td> </tr>
</tbody>
</table>
</div> 
```

# asp.net-mvc - 点网 MVC 安全表单身份验证

> ID：12778705
> 
> 赞同：1
> 
> 时间：2012-10-08T09:19:24.823
> 
> 标签：asp.net-mvc, authentication

在我的 dot net MVC 应用程序中，我有一个登录页面，用户在其中输入用户名和密码。单击提交按钮后，用户名和密码将通过网络以***纯文本***形式发送。有没有一种简单的方法可以让我从登录表单发送加密的用户名/密码，然后在服务器端的控制器中解密。或者是否有任何更简单的方法可以防止以纯文本形式发送密码？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:24:36.000

只需使用 HTTPS，它就是为它设计的，它将确保用户名和密码不会通过未加密的通道以明文形式发送。

同样在您的 web.config 中，您可以要求 SSL 用于身份验证 cookie，这将确保它永远不会通过非加密通道传输。

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" requireSSL="true" />
</authentication> 
```

# android - 在android中拖动和交换自定义视图

> ID：12778710
> 
> 赞同：2
> 
> 时间：2012-10-08T09:19:51.497
> 
> 标签：android, drag-and-drop, tabwidget

1）我有一个标签小部件，它有 5 个标签 [每个标签显示图像和文本]。

2) 第 5 个选项卡用于“更多”选项。当用户选择此选项卡时，将打开一个滑动抽屉，其中包含自定义视图网格[内容与每个选项卡相同，其下有图像和文本]。

3) 现在，用户可以单击滑动抽屉中的任何视图，然后将其拖动并与任何选项卡交换。

# coldfusion - Coldfusion 更好地利用 cfparam

> ID：12778712
> 
> 赞同：3
> 
> 时间：2012-10-08T09:19:57.780
> 
> 标签：coldfusion, query-string

在我们的索引文件中，在文件的顶部，我们通常会`<cfparam>`列出来自 URL、表单或其他地方的变量。然而，我们收到了很多机器人用类似**www.example.com/survey/index.cfm?nPageNumber=-1**之类的东西来攻击我们，这意味着像这样的 cfparam：

```
<cfparam name="request.parameters.nPageNumber" default="1" type="numeric" /> 
```

由于机器人在查询字符串中输入的废话，将失败。

我发现自己越来越不得不像这样编写我的 cfparams：

```
<cfif structKeyExists(request.parameters,"nPageNumber") AND isNumeric(request.parameters.nPageNumber)>
    <cfparam name="request.parameters.nPageNumber" default="1" type="numeric" />
<cfelse>
    <cfset request.parameters.nPageNumber = 1>
</cfif> 
```

虽然这解决了问题，但我不禁觉得这个解决方案不是最好/最有效的。我使用`cfparam`正确还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T10:15:45.980

确保变量的存在和验证其值是两个独立的任务。

在你的存在代码的情况下`URL`应该`Form`是这样的：

```
<cfparam name="URL.nPageNumber" default="1" type="string"> 
```

使用`type`there 只是为了确保没有发生任何真正奇怪的事情，例如值是结构或查询等。此时您不想具体说明，因为您想要一个优雅的错误而不是用户的 500 .

一旦您确定该值存在，您就需要验证该值。

```
<cfif isNumeric(URL.nPageNumber) EQ false OR URL.nPageNumber LT 1 OR URL.nPageNumber GT Variables.MaxPages>
    <cfset ArrayAppend(Variables.ErrorArray, "Incorrect page number requested.")>
</cfif> 
```

您可以将值强制设置为合理的值，但请参阅[Martian Headsets](http://www.joelonsoftware.com/items/2008/03/17.html)以获得[稳健性原则](https://www.rfc-editor.org/rfc/rfc793#page-13)的反驳论点。

提供错误消息而不是“显示一些正常的东西”会通知您的用户他们做错了什么，这意味着如果您还没有使用规范 url（尽管您应该这样做） ，您不必被迫使用[规范的 url 。](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)

是的，这是更多的工作。您可以为这一切设计一些抽象，但在原始级别，这就是您应该对您`cfparam`的 s 和验证做的事情。

在您不需要友好响应的情况下，例如机器人或显然是黑客或探测的请求，还有提供“400”响应代码的附加选项。w3c 将响应定义为“请求语法错误或天生无法满足”。[这里](http://www.w3.org/Protocols/HTTP/HTRESP.html)和“由于语法错误，服务器无法理解请求。客户端不应该在不修改的情况下重复请求。” [在这里](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

# excel - 根据相邻单元格设置范围的 VBA 函数

> ID：12778714
> 
> 赞同：0
> 
> 时间：2012-10-08T09:20:02.410
> 
> 标签：excel, range, vba

这个问题对我来说有点难以解释，但我希望它对某人有意义。目前在我的单元格上设置范围方面，我总是在添加我的函数之前给它某种形式的限制（例如 Range("A1:A10")），但我现在想制作一个更灵活的宏其中限制基于记录在电子表格列中的最后一个单元格行。我使用的电子表格链接到一个数据库，我在该数据库中每周刷新一次，我得到的行范围可能会有所不同，例如一天是 250 行，下一天是 300 行，有时又回到 275 行。必须有一个更简单的方法来解决这个问题，我每次刷新电子表格时都不必更改 vba 宏的范围限制。我可以想象这是一个如此简单的解决方案，尽管我无法弄清楚如何在没有我阅读太多内容并进一步混淆自己的情况下解决这个问题。在这种情况下，我是否正在考虑使用一种循环形式，如果是，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:27:27.373

要获得最后一行，您可以执行以下操作

```
Dim last_row as Integer, input_sheet as Worksheet, col_number as Integer
col_number = 1
Set input_sheet.Sheets(1) ' change it accordingly
last_row = input_sheet.Cells(input_sheet.Rows.Count, col_number).End(xlUp).Row 
```

这基本上是选择工作表A列的最后一行并复制“Ctrl”+“向上方向”的动作。所以你最终排在最后一排。您可以根据自己的需要进行相应的修改。

# excel - 如何在vba的另一个函数中使用一个函数的变量？

> ID：12778722
> 
> 赞同：1
> 
> 时间：2012-10-08T09:20:36.797
> 
> 标签：excel, vba

我面临一个小问题，请帮助我。

```
sub vari()
dim b as integer
dim c as integer
b=6
c=8
end sub 
```

现在我想在另一个函数中使用 b 和 c 。

```
sub calculate()
dim a as integer
a = c+b
end sub 
```

我在这里收到错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T09:25:03.537

您想为变量使用正确的[范围](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)。如果您希望 vari() 和 calculate() 都可以访问 b 和 c，则需要全局声明它们，如下所示：

```
Public b As Integer
Public c As Integer
sub vari()
.... 
```

# javascript - 在 javascript 中使用 window.open() 是否有任何限制

> ID：12778726
> 
> 赞同：3
> 
> 时间：2012-10-08T09:20:56.700
> 
> 标签：javascript

`window.open("URL");`在 JavaScript中使用有什么限制吗？
当我在打开第二个窗口后尝试使用打开三个窗口时`window.open("URL")`，第三个窗口没有单独打开，但它只是刷新了第一个窗口的内容并在那里显示了第三个窗口的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:24:38.030

使用“_blank”作为目标窗口应该每次都打开一个新窗口（就像使用`<a href="url" target="_blank">link</a>`）。例如：

```
window.open("URL", "_blank"); 
```

但是打开多个窗口可能会受到各种弹出窗口阻止功能和插件的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:20:17.553

试试这个-

```
window.open(url, targetName); 
```

如果targetName不同，窗口将单独打开。您可以随机设置targetName以单独打开窗口。
例如，

```
window.open(url,Math.floor(Math.random() * 80000)); 
```

# css - 通过 Bootstrap，如何在井中添加垂直分隔器？

> ID：12778730
> 
> 赞同：5
> 
> 时间：2012-10-08T09:21:09.453
> 
> 标签：css, twitter-bootstrap

我正在使用引导程序来画一口井。在这口井中，我创建了两个`span6`，并想在这两列之间绘制一个垂直分隔线。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T11:23:46.553

在除第一列之外的所有列上绘制左边框：

```
.well [class^="span"] + [class^="span"] {
    margin-left: -1px; /* compensate border width */
    border-left: 1px solid #e3e3e3;
} 
```

* * *

或者，可以使用 CSS 列（需要前缀）：

```
.well.col {
    columns: 2;
    column-gap: 20px;
    column-rule: 1px solid #e3e3e3;
} 
```

如果您以前从未使用过它，您应该查看我[的 CSS 列教程](http://pavlomykhalov.com/blog/css-multi-column-layout/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-19T01:30:12.963

如果您的元素占据了整个宽度，则所选答案会中断，因为边框增加了 1px 太多！为了解决这个问题，您可以调整边距以考虑边界。

```
.line-right {
  margin-right: -1px;
  border-right: 1px solid black;
} 
```

如果您想要更大的边框，请务必在边距中考虑它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:36:03.983

您始终可以使用 HTML`<hr>`标记。

# git - 如何在 TortoiseGit 中将文件与其以前的版本进行比较

> ID：12778732
> 
> 赞同：3
> 
> 时间：2012-10-08T09:21:16.037
> 
> 标签：git, diff, tortoisegit

我使用 git bisect 来定位破坏内容的提交。现在我想将文件与其以前的版本进行比较，但是当我在“日志消息”窗口中右键单击一个文件时，我只有“与基础比较”和“与工作树比较”，这对我来说没用。

**如何轻松地将某个旧提交的文件与其以前的版本进行比较？**

我只想查看在该文件的特定提交中添加/删除了什么。这是 TortoiseSvn 通常在您双击日志消息窗口中的文件时所做的。我更愿意使用 TortoiseGit 和 WinMerge 来获得这个结果，但如果不可能的话，任何其他工具也很好。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-13T13:51:30.593

git diff 头^

HEAD 是最新版本，^ 表示“之前的”。例如，HEAD^^ 表示 2 后退。

# objective-c - UITabBarController 中 UINavigationBar 上的 UIBarButtonItem

> ID：12778734
> 
> 赞同：1
> 
> 时间：2012-10-08T09:21:26.313
> 
> 标签：objective-c, uinavigationcontroller, uitabbarcontroller, storyboard, uitabbaritem

我是新来的。对不起，可能是英语。

我在一个 iPhone 应用程序上工作，它有一个标签栏控制器（在导航控制器内）。标签栏控制器有四个标签和一个带有默认后退按钮的导航栏。我将在此导航栏上（在选项卡栏控制器上）设置另一个栏按钮项。在情节提要上拖放很容易，但我无法为这个新的条形按钮项目设置操作。

我知道我应该为我的 UITabBarController 设置一个委托，但我不知道如何。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:36:17.163

您通常通过 cntrl+将出口从故事板拖到您的代码来创建 IBOutlets/IBActions。尝试执行以下操作： ![在此处输入图像描述](../Images/d01616c9f1188d7bd94143acee222d14.png)

不要忘记切换到助手编辑器来分屏

![在此处输入图像描述](../Images/d4e7fdb67b9e6eabc8453a58834a11f6.png)

单击此按钮可切换到助理编辑器

# java - 使用 Metro 编组 JAXB 类时忽略 schemaLocation

> ID：12778748
> 
> 赞同：1
> 
> 时间：2012-10-08T09:22:25.347
> 
> 标签：java, xml, web-services, xsd, jaxb

我正在使用与 Java 6 SE 捆绑在一起的 Metro 堆栈来调用 Web 服务。Web 服务需要 XML 作为参数。我使用 JAXB 类来创建内容并将我的 JAXB 根​​元素传递给 Web 服务端点。

现在我的问题：我找不到任何方法让编组器包含 XSD 文件的 schemaLocation，因为我无法直接访问编组器。（如果您可以直接访问编组器，则可以将 schemalocation 设置为属性，但是在使用 Metro 时，所有编组似乎都在内部进行。）

我尝试在生成的 package-info.java 类的 XmlSchema 注释中设置 xsi:schemaLocation ，但这对生成的 xml 没有影响。

还有一点是，在 Java SE 环境中创建 Web 服务客户端和调用 Web 服务时，@UsesJAXBContext、@WebServiceClient 和 @XmlSchema 等某些注解似乎被忽略了。（我必须在这里声明，我是 Java Web 服务方面的初学者）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T15:26:51.927

好的，这就是我现在所知道的。这几个月来一直是我的问题。

首先，您必须更改 JAX-WS 使用的 JAXBContext。为此，请使用服务器上的 @UsesJAXBContext 注释。(com.sun.xml.ws.developer.UsesJAXBContext)

然后，在您的工厂实现中，您必须在此方法中返回自定义桥接器。

```
public Bridge createBridge(final TypeReference typereference) 
```

然后您的自定义网桥需要设置 marshaller 属性来设置您要使用的命名空间映射器。

这是我的例子。

```
@WebService(serviceName = ...)
@UsesJAXBContext(MyContextFactory.class)
public class SoapServer { ... } 
```

和工厂班...

```
public static class MyContextFactory implements JAXBContextFactory
{
    @Override
    public JAXBRIContext createJAXBContext(final SEIModel sei,
            @SuppressWarnings("rawtypes") final List<Class> classesToBind, final List<TypeReference> typeReferences)
            throws JAXBException
    {
        JAXBRIContext context = JAXBContextFactory.DEFAULT.createJAXBContext(sei, classesToBind, typeReferences);
        return new MyJaxwsContext(context);
    }
} 
```

和 JAXB 上下文实施......

```
public class MyContext extends JAXBRIContext
{
/** the actual context */
private final JAXBRIContext delegate;

public MyContext(final JAXBRIContext createContext)
{
    this.delegate = createContext;
}

public Bridge createBridge(final TypeReference arg0)
{
    return new MyBridge((JAXBContextImpl) delegate, delegate.createBridge(arg0));
} 
```

现在桥的实施......

```
public class MyBridge extends Bridge
{
private final Bridge delegate;

protected MyBridge(final JAXBContextImpl context, final Bridge delegate)
{
    super(context);
    this.delegate = delegate;
}

// an example marshal call. There are many more...
public void marshal(final Marshaller m, final Object object, final ContentHandler contentHandler)
        throws JAXBException
{
    m.setProperty("com.sun.xml.bind.namespacePrefixMapper", namespaceMapper);
    delegate.marshal(m, object, contentHandler);
} 
```

**注意：**我刚刚包装了现有的实现。我想要的只是能够修复命名空间名称。根据我对源代码（JAXWS）的阅读，这是到达编组器的唯一方法。

**注2** RI 最终类有一个向下转换。这仅适用于参考实现。YMMV

# html - Chrome 不会改变 li 元素状态

> ID：12778757
> 
> 赞同：1
> 
> 时间：2012-10-08T09:22:54.927
> 
> 标签：html, css, google-chrome

我不太清楚为什么，但是[这个小提琴](http://jsfiddle.net/t5y8y/3/)中的 CSS 代码在 Chrome 中不能正常工作。在 Firefox 中，如果您将鼠标悬停在其中一个`li`元素上，文本将变为可见，但在 Chrome 中不可见。显然，在 Chrome 中，如果您`display`在悬停时更改属性，则元素的整个 CSS 规则`li`将被忽略（状态实际上不会更改为悬停）。但是，如果您使用 Chrome 开发人员工具手动更改元素的状态，它就可以正常工作。我在这里错过了什么吗？或者这是 Chrome 中的错误？我已经在 Chrome 22（稳定版本）和 24（开发通道版本）中对此进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:25:49.187

我不知道您所说的忽略了什么，因为我看不出有什么区别，但是通过删除`display: inline;`

```
li:hover
{
    overflow: visible;
} 
```

它有效

[**我的小提琴**](http://jsfiddle.net/t5y8y/1/)

假设您需要为文本设置背景颜色，则更新了 Fiddle

[](http://jsfiddle.net/t5y8y/10/)

## **[**更新小提琴**](http://jsfiddle.net/t5y8y/10/)**

**HTML**

 **```
<ul>
    <li><span>Abcdefghijklmnopqrstuvwxyz</span></li>
    <li><span>Abcdefghijklmnopqrstuvwxyz</span></li>
    <li><span>Abcdefghijklmnopqrstuvwxyz</span></li>
    <li><span>Abcdefghijklmnopqrstuvwxyz</span></li>
</ul>​ 
```

CSS

```
ul
{
    width: 100px;
}

li
{
    overflow: hidden;
    text-overflow: ellipsis;
}

li:hover
{
    overflow: visible;
}

li:hover span
{
    background-color: #ff0000;
}
​ 
```

虽然将文本包裹在 a 中`span`可以让您修改`display`属性，但在这种情况下它是多余的，因为您希望将其设置为`inline`. 将它包裹在`span`元素内就足够了。**

# c++ - 无法使用 WMI 类 c++ 获取 CPU 的 UniqueId

> ID：12778762
> 
> 赞同：2
> 
> 时间：2012-10-08T09:23:19.437
> 
> 标签：c++, visual-c++, mfc, wmi, wmi-query

在应用程序中，它需要检索系统特定的 UniqueId。所以我试图检索 CPU 的 UniqueId。我正在使用 WMI 类属性来检索它。但是在尝试检索 win32_processor 类的“UniqueId”属性时，它会在预期输出的变体中返回 VT_NULL。但同时它为其他属性（如 deciveId、processorId 等）提供有效输出，但这些不是唯一的，无法实现我的目的。

有谁知道为什么会这样？请帮助我....

下面是我使用的代码......请看一下，并说是否有任何问题......我可以做些什么修改才能让它工作......

```
 if(CoInitializeSecurity( NULL,
-1,
NULL,
NULL,
RPC_C_AUTHN_LEVEL_PKT,
RPC_C_IMP_LEVEL_IMPERSONATE,
NULL,
EOAC_NONE,
0
) != S_OK)
    return;

IWbemLocator * pIWbemLocator = NULL;
IWbemServices * pWbemServices = NULL;
IEnumWbemClassObject * pEnumObject  = NULL;

BSTR bstrNamespace = (L"root\\cimv2");

if(CoCreateInstance (
        CLSID_WbemAdministrativeLocator,
        NULL ,
        CLSCTX_INPROC_SERVER | CLSCTX_LOCAL_SERVER , 
        IID_IUnknown ,
        ( void ** ) & pIWbemLocator
        ) != S_OK)
            return;

if(pIWbemLocator->ConnectServer(
            bstrNamespace,  // Namespace
            NULL,          // Userid
            NULL,           // PW
            NULL,           // Locale
            0,              // flags
            NULL,           // Authority
            NULL,           // Context
            &pWbemServices
            ) != S_OK)
            return;

HRESULT hRes;
BSTR strQuery = (L"Select * from Win32_Processor");
BSTR strQL = (L"WQL");
hRes = pWbemServices->ExecQuery(strQL, strQuery,WBEM_FLAG_RETURN_IMMEDIATELY,NULL,&pEnumObject);

if(hRes != S_OK)
{
    MessageBox("Could not execute Query");
    return;
}

ULONG uCount = 1, uReturned;
IWbemClassObject * pClassObject = NULL;

hRes = pEnumObject->Reset();

if(hRes != S_OK)
{
    MessageBox("Could not Enumerate");
    return;
}

hRes = pEnumObject->Next(WBEM_INFINITE,uCount, &pClassObject, &uReturned);
if(hRes != S_OK)
{
    MessageBox("Could not Enumerate");
    return;
}

VARIANT v;

BSTR strClassProp = SysAllocString(L"UniqueId");

hRes = pClassObject->Get(strClassProp, 0, &v, 0, 0);// here the v is VT_NULL but works if the vlaue of strClassProp is processerId, deviceId
if(hRes != S_OK)
{
    MessageBox("Could not Get Value");
    return;
}

SysFreeString(strClassProp);

_bstr_t bstrPath = &v;  //it causes exception if the v is VT_NULL in other cases its working

char* strPath = new char [1024];
_stprintf(strPath, ("%s"),(char*)bstrPath);

if (SUCCEEDED(hRes))
    MessageBox(strPath); 
```

期待专家的建议和帮助......在此先感谢......

# xcode - “生成 dSYM 文件”在 XCode 4.5 中需要很长时间

> ID：12778768
> 
> 赞同：16
> 
> 时间：2012-10-08T09:23:45.700
> 
> 标签：xcode, xcode4, compilation

每次我在 XCode 4.5 中构建时，我都会注意到这一步需要一分钟多的时间，在完全重建中，这一步可能与其他所有步骤一样长！

我以前使用 XCode 3.2.6，而在 4.5 中构建要慢得多。我能做些什么来改善这一点吗？有没有关于 dSYM 做什么的信息，我不记得在 3.2.6 上见过它。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T09:28:09.410

dSYM 文件用于重新符号化来自用户的崩溃报告。查看[此 Apple 技术说明，特别是“分析崩溃报告”部分）](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html)。

为了加快速度，您始终可以为您的 DEBUG 构建关闭 dSYM 生成，然后为 ADHOC 和/或 Store 构建打开它。[这是一个相关的问题](https://stackoverflow.com/questions/8454937/xcode-generating-dsym-file-step-is-repeated-on-every-application-run)，对此进行了一些讨论。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T20:59:01.573

dsymutil 的运行时间很大程度上取决于它需要处理以创建 dSYM 的调试信息量。您可能在 Xcode 3.2.6 vrs 中使用不同的编译器。Xcode 4.5 或 4.5 编译器发出更多/更好的调试信息，因此 dsymutil 时间更长。

# cakephp - CakePHP 2.x 带参数的自定义路由

> ID：12778771
> 
> 赞同：1
> 
> 时间：2012-10-08T09:23:52.583
> 
> 标签：cakephp, parameters, routing, arguments, routes

在我的 CakePHP 应用程序中，我想在自定义路由中传递参数。

**现在什么有效**

> （域/控制器/动作/参数）

domain.com/dealers/view/1

**我想做的事**

> （域/参数/控制器/动作/参数）

domain.com/washington/dealers/view/1

**这是我在 routes.php 中的代码：**

```
Router::connect('/:city/dealers/view/:id', array('controller' => 'dealers', 'action' => 'view'), 

    array(
        'pass' => array('city', 'id')
        ),

    array('city' => '[a-z]+')
    ); 
```

这只是将*domain.com/washington/dealers/view/1*重定向到*domain.com/dealers/index*，原因很明显，我没有正确传递参数。有谁知道我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:36:42.037

city 不应位于单独的数组中，例如：

```
Router::connect(
   '/:city/dealers/view/:id', 
   array('controller' => 'dealers', 'action' => 'index'),
   array(
    'pass' => array('city', 'id'),
    'city' => '[a-z]+'
)); 
```

# tridion - 在 SDL Tridion 2011 SP1 中配置 Deployer

> ID：12778773
> 
> 赞同：2
> 
> 时间：2012-10-08T09:24:01.483
> 
> 标签：tridion, tridion-2011

我正在研究 SDL Tridion 2011 Sp1 发布概念。

当我发布页面时，所有页面都存储在位置**“c:\temp”。**

此位置在**“\config\cd_storage_conf.xml”下配置。**

```
<Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultFile" defaultFilesystem="false">
                <Root Path="c:\temp" />
            </Storage>
            <Storage Type="filesystem" Class="com.tridion.storage.filesystem.FSDAOFactory" Id="defaultDataFile" defaultFilesystem="true" defaultStorage="false">
                <Root Path="c:\temp\data" />
            </Storage> 
```

我正在尝试配置 Deployer。我在 config 文件夹下找到了 cd_deployer_conf.xml 并明白我们需要在这里配置 Deployer 详细信息。

但我无法在 Tridion 安装文件夹中找到 Deployer 文件夹。

所以，我怀疑 Deployer 是否可以直接在 Tridion 安装文件夹下使用，还是我们需要单独购买。

任何人都可以分享有关配置部署程序的输入吗

如果问题非常基本，请道歉。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:28:18.030

很多东西都可以在网上买到。但我个人更喜欢

[http://nunolinhares.blogspot.in/2011/07/manually-configuring-tridion-2011-net.html](http://nunolinhares.blogspot.in/2011/07/manually-configuring-tridion-2011-net.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T10:20:07.733

您需要从以下文件夹复制文件并根据自己的需要进行修改：

> [TridionInstallerFolder]\Content Delivery\configuration\samples

但是，如果您需要一些有关设置部署程序的基本知识，您的第一站应该是：

*   《[安装内容交付服务器](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=Install_ContentDeliveryServer_intro.xml&docid=concept_FFBC376AF96D4EBBB0E346C18A711187&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocconcept_FFBC376AF96D4EBBB0E346C18A711187)》手册（需要登录）：

安装还取决于您设置的部署器类型

*   Deployer 作为应用程序，在**Tomcat**上运行：

    [http://sdltridionworld.com/articles/sdltridion2011/tutorials/deployer-and-odata-1.aspx](http://sdltridionworld.com/articles/sdltridion2011/tutorials/deployer-and-odata-1.aspx)

*   部署者作为应用程序，在**IIS**上运行：

    [http://nunolinhares.blogspot.in/2011/07/manually-configuring-tridion-2011-net.html](http://nunolinhares.blogspot.in/2011/07/manually-configuring-tridion-2011-net.html)

# php - 我可以在 spotify 应用程序中使用 php SESSIONS 吗？

> ID：12778776
> 
> 赞同：0
> 
> 时间：2012-10-08T09:24:09.167
> 
> 标签：php, session, spotify

因为 PHP 不能直接在 Spotify 应用程序中使用，所以我只在我的服务器上使用它，但是我在让会话正常工作时遇到问题，甚至可以使用会话吗？

我想用它来查看用户是否在我的数据库中注册，所以我这样做：

```
session_start();

$query="SELECT * FROM user WHERE facebookID = {$fbid}";
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result);
$num_results = mysql_num_rows($result);
if ($num_results > 0)
{
echo"THERE IS A USER!";
$row['facebookID'] = $_SESSION[fid];
}
else
{
 echo"THERE IS NO USER!";
} 
```

对服务器的身份验证工作正常，但会话似乎无法正常工作，在使用一些 ajax 代码调用上述代码后，在另一个 PHP 页面上调用了女巫，我只是想试试这个：

```
session_start();

if(isset($_SESSION['fid']))
{
echo"SESSION EXIST";
}
else
{
echo"NO SESSION";
} 
```

无论如何，在 Spotify 应用程序中是否有特殊的方法可以做到这一点，还是我必须以其他方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:29:08.870

你在哪里设置`$_SESSION[fid]`为 FacebookID？

也许你应该这样做：

```
session_start();

$query="SELECT * FROM user WHERE facebookID = {$fbid}";
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result);
if ($row)
{
    echo "THERE IS A USER!";
    $_SESSION['fid'] = $row['facebookID']; // SET THE FACEBOOK ID IN THE SESSION
} else {
    echo"THERE IS NO USER!";
} 
```

顺便说一句，当您在 PHP 中访问数组时，总是在键名周围加上引号，如下所示：`$_SESSION['fid']`not `$_SESSION[fid]`，否则 PHP 将首先检查名为“fid”的常量，然后转换为字符串 - 它更慢且更重要 - 更丑陋和糟糕的做法。

# ios - 将 CATiledLayer 内容捕获到另一个图层或图像上下文

> ID：12778777
> 
> 赞同：3
> 
> 时间：2012-10-08T09:24:10.417
> 
> 标签：ios, iphone, cocoa-touch, uiview, catiledlayer

我正在尝试截屏一个使用 CATiledLayers（用于动画）但无法获得我想要的图像的视图。

我在 Apple 的“PhotoScroller”示例应用程序上进行了尝试，并添加了以下内容：

```
UIGraphicsBeginImageContext(self.view.frame.size);
CGContextRef ctx = UIGraphicsGetCurrentContext();
[self.view.layer renderInContext:ctx];
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但是，瓷砖不会在生成的 UIImage 中呈现，我得到的只是瓷砖轮廓。

似乎 CATiledLayer 的 renderInContext 的行为与 CALayer 不同。

我在尝试捕获瓷砖时做错了什么吗？我自己单独渲染瓷砖的唯一解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T03:49:45.130

最后，我并没有尝试将瓷砖渲染到另一个视图中只是为了动画，而是创建了一个新的实例`ImageScrollView`，并在释放原始实例之前将原始实例和新实例一起动画化。

# three.js - Three.js 拾取无法与自定义几何图形一起正常工作

> ID：12778780
> 
> 赞同：0
> 
> 时间：2012-10-08T09:24:18.787
> 
> 标签：three.js, picking

我在选择实施时遇到问题。我发现了许多不同的例子做我想做的事，但我真的不能让它按应有的方式工作。我主要按照[这个例子](http://mrdoob.github.com/three.js/examples/webgl_interactive_cubes.html)

基本上，我的场景中有一些网格，双击其中任何一个，我想更改所选网格的颜色。在场景中，有 3 个小立方体始终被选中，而一些更复杂的网格通常不被选中。我想知道是否有人可以帮助我弄清楚为什么，如果可以选择多维数据集，其他人通常不能。

我用来检测点击网格的代码是：

```
var projector = new THREE.Projector();

var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );

projector.unprojectVector( vector, camera );

var ray = new THREE.Ray( camera.position, vector.subSelf( camera.position ).normalize() );

var intersects = ray.intersectObjects( scene.children, true );

if ( intersects.length > 0 ) 
{
    intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:03:15.723

`ray.intersectObject()`，由 调用`ray.intersectObjects()`，需要面形心。

```
mesh.geometry.computeCentroids(); 
```

如果您要创建自己的自定义几何图形，这一点很重要。

三.js r.51

**从 r54 开始，这不再是必需的。**见 WestLangley 的评论

# c# - C#单击按钮后列表项为空

> ID：12778781
> 
> 赞同：1
> 
> 时间：2012-10-08T09:24:21.283
> 
> 标签：c#, asp.net, listview

我试图了解这里发生的生命周期。我有一个 asp 列表视图，我在其中获取项目 ID 并将它们写入这样的列表。

```
 protected void ShareWith_OnItemBound(object sender, ListViewItemEventArgs e)
    {
        if (!IsPostBack)
        {
            if (e.Item.ItemType == ListViewItemType.DataItem)
            {
                ListViewDataItem currentItemId = (ListViewDataItem)e.Item;
                System.Web.UI.WebControls.DataKey currentDataKey = this.lvShareWithPanel.DataKeys[currentItemId.DataItemIndex];
                int FriendId = Convert.ToInt32(currentDataKey["SharedUserId"]);
                CurrentList.Add(FriendId);
            }
        }
    } 
```

我的列表是在方法之外定义的

```
private List<int> CurrentList = new List<int>(); 
```

之后，用户将一些新项目添加到列表中，然后单击 asp 按钮继续。我正在比较当前列表与新列表，但在单击按钮后在调试中观察我发现我的列表“CurrentList”现在为空。为什么在任何方法之外的列表可能会受到影响？

感谢帮助理解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:28:47.193

该列表没有状态值。因此，您需要将列表存储在 ViewState、Session 状态或其他状态。

每个 ASP.NET 页面在页面加载之间都会丢失其值，并且只有在每次都输入它们时才能从状态中恢复它们。大多数控件将值存储在特定于页面的 ViewState 中。[这个链接](http://msdn.microsoft.com/en-us/library/75x4ha6s%28v=vs.100%29.aspx)应该有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:27:23.787

所有页面的对象都将在页面生命周期结束时被释放。因此，您需要在每次回发时创建并填写您的列表（或将其存储在`Session`我不推荐的地方）。

您可以使用页面的`PreRender`事件来确保所有事件都已被触发：

```
protected override void OnPreRender(EventArgs e)
{
    // why do you need a list as field variable at all? I assume a local variable is fine
    List<int> CurrentList = new List<int>();
    foreach(var currentItemId in lvShareWithPanel.Items)
    {
        System.Web.UI.WebControls.DataKey currentDataKey = lvShareWithPanel.DataKeys[currentItemId.DataItemIndex];
        int FriendId = Convert.ToInt32(currentDataKey["SharedUserId"]);
        CurrentList.Add(FriendId);
    }
    // do something with the list
} 
```

请注意，您不应该`static`像有人评论的那样做到这一点。这意味着您将为每个用户和每个请求使用相同的“实例”。

在这里您可以看到所有事件：

![在此处输入图像描述](../Images/4bb3be8af7e8c7b4cd02423e028673f1.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T09:27:46.610

ASP.NET 是*无状态*的，因此在回发期间数据会丢失。您需要手动跟踪，`CurrentList`例如在 Session/ViewState 中。

```
public List<int> CurrentList
{
    get
    {
        return (List<int>)Session["CurrentList"] ?? new List<int>();
    }
    set
    {
        Session["CurrentList"] = value;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:30:06.327

您可以将列表存储到 ViewState 中，并在 PageLoad 事件中，将存储在 ViewState 中的列表分配给您的类级别列表。这是因为处理对象的页面生命周期。

# javascript - JQuery：如何在 iPad/Mobile Safari 上访问滚动高度/Y 偏移

> ID：12778790
> 
> 赞同：2
> 
> 时间：2012-10-08T09:24:57.507
> 
> 标签：javascript, jquery, html

有谁知道在 Ipad/移动 Safari 上访问滚动高度的可靠方法？

基本上我需要访问相当于 -

```
 $(document).scrollTop(); 
```

# java - 我怎么能用java递归对树中的每个孩子求和？

> ID：12778791
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:24:58.990
> 
> 标签：java, recursion, tree, parent-child

于是就有了使命。我们有一个类，叫“Node”，实例是“node”。这个节点有很多孩子，这些孩子也有很多孩子，等等。我怎么能把这棵树中的所有孩子的数量相加？例子：

*   节点 -> child1 -> child1.1 -> child1.1.1，child 1.1.2 -> child1.1.2.1
*   节点-> child2
*   节点 -> child3 -> child3.1，child3.2 -> child3.2.1

所有子节点的数量为 10（节点为父节点）。请帮助我的人，并用java递归写出当前的答案。该程序应从以下内容开始：

```
public int childrenNumber(Node node){... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:27:18.880

1.  创建一个作为节点类成员的函数。

2.  在函数中，将计数变量设置为 1（对于此节点）。

3.  循环遍历该节点的所有子节点。将在每个子节点上调用此函数的结果添加到 count 变量。

4.  返回计数变量。

现在，要获取树中的节点总数，请在根节点上调用 count 函数。

# audio - AIFF 文件：去除初始“空白”

> ID：12778799
> 
> 赞同：0
> 
> 时间：2012-10-08T09:25:23.123
> 
> 标签：audio, scripting, automation, aiff

我有一个充满 AIFF 文件的文件夹，这些文件在开头有一点间隙，听不到声音。我将如何编写一个可以消除这个差距的脚本/工具？

基本上，文件在 Audacity 中看起来像这样（我只想获取选定的部分）： ![大胆截图](../Images/a28998b421dda1680a3e316642ae480e.png)

我不能真正使用 Audacity，因为我有数百个文件，所以手工操作不是一种选择。

我不太关心操作系统/语言，只要它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:31:16.920

因为您在程序员的网站上询问并且有编程经验（查看您的个人资料）——如果您查看源代码，您会看到 Audacity 有一些脚本支持。

也有用于此的商业工具（例如批处理器）。

我不建议使用这种文件格式让你的手太脏（即编写 C 程序可能比在编辑器中手动编写更容易花费更多时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T01:44:25.707

最后，使用 libsndfile 破解一个快速的 C++ 解决方案更容易。

随意从[https://github.com/houbysoft/short/blob/master/removeInitialSilence.cpp](https://github.com/houbysoft/short/blob/master/removeInitialSilence.cpp)窃取它。

# javascript - 有 2 列的 html 文档样式的名称是什么？

> ID：12778800
> 
> 赞同：1
> 
> 时间：2012-10-08T09:25:25.037
> 
> 标签：javascript, html, underscore.js, momentjs

这里有 2 个使用这种 2 列样式的站点，我无法说出名称：

[http://documentcloud.github.com/underscore/docs/underscore.html](http://documentcloud.github.com/underscore/docs/underscore.html)

[http://momentjs.com/docs/](http://momentjs.com/docs/)

它们很漂亮，我想知道这种风格的名称，是否有任何模板/工具可以创建这种文档？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:28:46.463

[http://jashkenas.github.com/docco/](http://jashkenas.github.com/docco/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:30:43.880

从未听说过该样式的名称，但我认为您正在寻找的是可以延伸到完整窗口大小的样式。尝试搜索 Liquid CSS，它的作用是使用整个页面宽度和百分比，而不是将所有内容放入小于 1024 像素的包装中。

# android - android按矩阵缩放后获取位图宽度和高度

> ID：12778806
> 
> 赞同：1
> 
> 时间：2012-10-08T09:25:49.800
> 
> 标签：android, matrix, bitmap

我使用矩阵来缩放位图并将其绘制在画布上，缩放后，有没有办法获得位图的比例？它的比例高度？

```
sx += 0.5f;
matrix.setScale(sx, sx);
matrix.postTranslate(left, top);
canvas.drawBitmap(bitmap, matrix, paint);

// here how to get the scaled width of bitmap? 
```

这是我当前项目的一部分——一个简单的模因制作者，所以另一个问题是我可以学习任何好的教程或资源（开源应用程序）吗？我google了很多，只是得到一些没有完整教程的片段。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:31:43.973

我相信

`Bitmap#getScaledHeight (Canvas canvas)`

应该做的工作。如果不尝试

`final int scaledHeight = bitmap.getHeight() * sx;`

但第一个应该工作。

# python - Python gui - 使不可见的标签可见

> ID：12778809
> 
> 赞同：0
> 
> 时间：2012-10-08T09:25:57.350
> 
> 标签：python, tkinter

> **可能重复：**
> [在 Tkinter 中有什么方法可以使小部件不可见？](https://stackoverflow.com/questions/3819354/in-tkinter-is-there-any-way-to-make-a-widget-not-visible)

我的标签看起来像：

```
Lab = Label(text = "Update ID")
Lab.pack(side = LEFT) 
```

我希望此标签不可见，但希望在单击特定按钮时使其可见。

我有一个按钮看起来像：

```
Button1 = Button(buttons, text = "Update Item", command = self.Update_item)
          Button6.pack(side = LEFT, padx = 5, pady = 3) 
```

我希望标签不可见，但希望在单击“Button1”时使其可见。

任何反馈将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:39:31.140

有几种方法可以做到这一点。一方面，您可以使用`lift`和`lower`属性来更改堆叠顺序。例如，如果标签是一个框架的子框架，而你`lower`是它，它会在框架的“后面”，因此变得不可见。吨

第二种选择是从显示器上完全移除标签。`grid_remove`如果您使用的是网格几何管理器，则可以使用 。这种方法的好处是网格会记住小部件的位置，因此您可以调用它来恢复它，`widget.grid()`并且将使用所有先前的选项（粘性、行、列等）。

还有`pack_forget()`和`grid_forget()`，但它们的缺点是真正忘记了小部件。它从显示器中移除，并且忘记了有关它放置位置的信息。这意味着您必须重新应用所有正确的选项才能使小部件出现在同一位置。

# c# - 在 C# 中减去日期中的日期？

> ID：12778811
> 
> 赞同：1
> 
> 时间：2012-10-08T09:26:08.657
> 
> 标签：c#

我想检查日期是否距离当前日期不少于 30 天。所以我的情况如下：

```
date.CompareTo(new DateTime().AddDays(-30)) < 0 
```

但不起作用。我们不能添加一个负数到日期吗？如果不是如何实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T09:27:05.283

而不是`new DateTime()`您需要`DateTime.Now`当前日期

所以你的支票应该是：

```
date.CompareTo(DateTime.Now.AddDays(-30)) < 0 
```

你也可以这样做：

```
if(date < DateTime.Now.AddDays(-30)) 
```

编辑：（来自@Rawling 的评论）

如果要与 DateTime 的 Date 部分进行比较，则可以使用`DateTime.Now.Date`or`DateTime.Today`代替`DateTime.Now`which 将指向当前日期和`12:00AM`时间

```
date.Compare(DateTime.Now.Date.AddDays(-30)) < 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:27:43.000

```
date.CompareTo(DateTime.Now.AddDays(-30)) < 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:28:35.783

试试这个..

```
DateTime.Now.AddDays(No of Days) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:28:42.030

```
date.CompareTo(DateTime.UtcNow.AddDays(-30)) < 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T09:31:14.860

你可以这样做：

```
date < DateTime.Now.AddDays(-30); 
```

这也包括时间。如果您不希望这样，请尝试：

```
date < DateTime.Today.AddDays(-30); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T09:33:06.780

你可以试试

```
DateTime.Now.AddDays(-30); 
```

# sencha-touch - 表单提交不起作用

> ID：12778812
> 
> 赞同：2
> 
> 时间：2012-10-08T09:26:11.320
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在使用**Sencha Touch 2**创建登录系统。我在提交表单时遇到问题。它没有从服务器获取响应数据。下面是我的代码

**控制器：**

```
Ext.define("MyMobile.controller.LoginController", {
extend: "Ext.app.Controller",
views: ['LoginView'],

config: {
    refs: {
        loginForm: "#loginFormPanel"
    },
    control: {
        'button[action=login]': {
            tap: "authenticateUser"
        }
    }
},

authenticateUser: function (button) {

    this.getLoginForm().submit({
        url: 'login/authenticate',
        method: 'POST',
        success: function (form, result) {
            debugger; //This block of code is not executing even after JSON response
            var jsonoutput = Ext.decode(result);  // json parsing
            Ext.MessageBox.alert('Error', "Success");

        },
        failure: function (form, result) {//This block of code is not executing even after JSON response
            Ext.MessageBox.alert('Error', "Invalid username/password");
        }

    });
}

}); 
```

**看法**

```
Ext.define("MyMobile.view.LoginView", {
extend: "Ext.form.FormPanel",
alias: "widget.mylogin",
id: 'loginFormPanel',

config: {

    margin: '0 auto',
    name: 'loginform',
    frame: true,
    url: 'login/Authenticate',
    title: 'Login',
    items: [
      {
      xtype: 'fieldset',

      itemId: 'LoginFieldset',
      margin: '10 auto 0 auto ',

      title: '',
      items: [
                {
                    xtype: 'textfield',

                    label: 'User Name',
                    name: 'my-username',
                    required: true,

                    placeHolder: 'Username'
                },
                {
                    xtype: 'emailfield',
                    label: 'Email',
                    name: 'Email'
                },
                {
                    xtype: 'passwordfield',

                    label: 'Password',
                    name: 'my-password',
                    required: true,

                    placeHolder: 'Password'
                }
            ]
  },
    {
        xtype: 'button',
        id: 'loginButton',
        margin: '25 auto 0 auto ',
        style: '',
        maxWidth: 200,
        ui: 'action',
        width: '',
        iconCls: 'user',
        iconMask: true,
        text: 'Login',
        action: 'login'
    }

    ]
}

 }); 
```

**应用程序.JS**

```
Ext.application({

name: "MyMobile",
appFolder: "myapp",
controllers: ["LoginController"],
views: ['LoginView'],

launch: function () {

   var loginPanel= Ext.create('Ext.Panel', {
        layout: 'fit',

        items: [
            {
                xtype: 'mylogin'
            }
        ]
    });

    Ext.Viewport.add(loginPanel);
}

}); 
```

有人可以弄清楚应该是什么问题吗？

以下是我从服务器获得的 JSON 响应。

**{"用户名":"Murali","isAdmin":true,"isAuthenticated":true}**

即使在获得 JSON 和 200 ok 结果后，我的代码表单提交函数也会进入失败回调。在失败回调函数**失败：函数（表单，结果）中，我将结果参数作为我的 JSON。但是为什么会失败呢？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:54:14.477

让您的服务器返回如下 JSON 响应：

如果成功：

```
{
    "success":true,
    "UserName":"Murali",
    "isAdmin":true,
    "isAuthenticated":true
} 
```

如果失败：

```
{
    "success":false
} 
```

在这里阅读更多：http: //docs.sencha.com/touch/2-0/#! [/api/Ext.form.Panel-method-submit](http://docs.sencha.com/touch/2-0/#!/api/Ext.form.Panel-method-submit)

# cakephp - CakePHP - 模型 SQL 查询连接

> ID：12778814
> 
> 赞同：1
> 
> 时间：2012-10-08T09:26:16.017
> 
> 标签：cakephp

我使用 cakePHP 框架我有一个关于模型如何处理 MySQL 查询连接的问题。基本上我有一个模型，我需要将递归级别设置为 2，以便在更深的模型中获取一些信息。尽管我已经删除了我不需要的所有 2 级模型的绑定，但框架仍在执行大量查询来构建结果集。

我想知道的是框架是否为每个查询打开和关闭 MySQL 连接，或者它是否打开单个连接并执行所有查询然后关闭连接？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:34:06.077

在我看来，CakePHP 连接到数据库然后执行所有查询。在此处查找代码：[https ://github.com/cakephp/cakephp/blob/master/lib/Cake/Model/Datasource/Database/Mysql.php](https://github.com/cakephp/cakephp/blob/master/lib/Cake/Model/Datasource/Database/Mysql.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T10:15:30.300

`'joins'`您始终可以取消绑定模型关联并即时绑定它们，或者使用语法即时构建整个大型查询。看一下[这个](https://stackoverflow.com/questions/3470182/how-to-change-the-sequence-of-joins-in-cakephp)问题以查看示例，并在食谱中的[此页面上查看。](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)通过正确连接表，我能够将查询数量从几十个减少到一个。

# java - 使用java在linux平台上的闪屏

> ID：12778815
> 
> 赞同：2
> 
> 时间：2012-10-08T09:26:17.580
> 
> 标签：java, swing, splash-screen

我试图在 linux Ubuntu v10.x 上启动启动画面。但是`SplashScreen`该类的方法正在返回`null`

```
SplashScreen.getSplashScreen() 
```

应该是什么原因？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:41:53.470

该[文档还说](http://docs.oracle.com/javase/6/docs/api/java/awt/SplashScreen.html)：

> 这个类不能被实例化。该类只能存在一个实例，可以使用 getSplashScreen() 静态方法获取。**如果在应用程序启动时未通过命令行或清单文件选项创建启动画面，getSplashScreen 方法将返回 null。**

这是清单示例：

```
Manifest-Version: 1.0
Main-Class: Test
SplashScreen-Image: filename.gif 
```

这里是命令行示例：

```
java -splash:filename.gif Test 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:27:44.007

医生[说](http://docs.oracle.com/javase/6/docs/api/java/awt/SplashScreen.html#getSplashScreen%28%29)：

返回： SplashScreen 实例，*如果没有或它已经关闭，则返回 null*

（我的重点）。这适用吗？

# php - 如何按顺序获取收据编号，如 AB0810001

> ID：12778818
> 
> 赞同：0
> 
> 时间：2012-10-08T09:26:34.317
> 
> 标签：php, javascript, html, css

AB 是收据代码，接下来应该保持不变（今天的**08**日），而 10001 是收据编号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:31:28.310

```
$prefix      = 'AB';
$today       =  date("d");
$receipt_num = '10001';//from db value

echo $prefix.$today.$receipt_num; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:33:34.973

如果您确定收据编号前面总是有 4 个字符，您当然可以使用[`substr`](http://php.net/manual/en/function.substr.php)：

```
$data = 'AB0810001';
$receipt = substr($data, 4);
echo $receipt;  // will output 10001 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:34:46.313

如果您的意思是如何从该字符串中获取这些块，则应该这样做：

```
var str = 'AB0810001';
var result = str.match(/([A-Z]{2})(\d{2})(\d{5})/);
result.shift();
console.log(result); //=> ['AB', '08', '10001'] 
```

# iphone - 将一页 UIScrollView 保存到图像

> ID：12778819
> 
> 赞同：0
> 
> 时间：2012-10-08T09:26:38.543
> 
> 标签：iphone, ios, image, uiwebview, uiscrollview

我有一个`UIWebView`. 将数据加载到 UIWebView 后，我`UIWebView`可以水平滚动，并在 Web 视图中为我的 scrollView 启用分页。

我的问题是：

有什么方法可以将 UIWebView 中 scrollView 中的页面保存到图像中？我的意思是，我会为 5 页滚动视图（内容大小 = 5 页）获得 5 张图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:29:04.177

您可以像这样保存屏幕：-

```
 -(IBAction)savebutn:(id)sender
 {
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *saveImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();
NSData *imageData = UIImagePNGRepresentation(saveImage);
NSFileManager *fileMan = [NSFileManager defaultManager];

NSString *fileName = [NSString stringWithFormat:@"%d.png",imagename];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];
[fileMan createFileAtPath:pdfFileName contents:imageData attributes:nil];

 } 
```

您的图片将以 .png 扩展名保存在您的文档目录中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:30:33.223

当用户想要捕获当前视图 ScreenShot 并共享或保存此图像时，此代码很有用....

```
- (UIImage *)captureView {

//hide controls if needed
CGRect rect = [self.view bounds];

    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    [self.view.layer renderInContext:context];   
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;

} 
```

看我的博客，... [http://parasjoshi3.blogspot.in/2012/06/captureimagescreenshot-of-view.html](http://parasjoshi3.blogspot.in/2012/06/captureimagescreenshot-of-view.html)

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:33:02.490

```
CGRect rect = [webview bounds];
UIGraphicsBeginImageContextWithOptions(rect.size,YES,0.0f);
CGContextRef context = UIGraphicsGetCurrentContext();
[webview.layer renderInContext:context];   
UIImage *capturedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

这有助于捕获当前图像

# javascript - 任何具有树视图、缩放和编辑功能的 jQuery 甘特图？

> ID：12778820
> 
> 赞同：3
> 
> 时间：2012-10-08T09:26:39.970
> 
> 标签：javascript, jquery, charts, gantt-chart

我必须`Gantt Chart`使用 jQuery 在房间预订解决方案中集成一个类似的工具。甘特图应该是非常互动的，而不是简单地显示数据。它应该响应拖放，它应该在左侧有一个树视图来分组任务，它应该有缩放功能来放大和缩小时间线。我做了很多研究，但目前在网络上可用的所有这些都缺少至少任何一个提到的功能。

谁能告诉我是否有使用 jQuery 的类似内容？

我知道在一个东西中拥有这么多功能听起来可能很疯狂。因此，上述功能的一个子集也将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:30:34.043

我开发了这个：[http ://roberto.open-lab.com/2012/08/24/jquery-gantt-editor/](http://roberto.open-lab.com/2012/08/24/jquery-gantt-editor/)

是一个基于 jQuery 的完整编辑器。

新版本可用：[http ://roberto.open-lab.com/2014/05/15/jquery-gantt-editor-collapsible-branches](http://roberto.open-lab.com/2014/05/15/jquery-gantt-editor-collapsible-branches)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:32:10.607

我一直在[http://taitems.github.com/jQuery.Gantt/](http://taitems.github.com/jQuery.Gantt/)上使用这个——它还不是 100% 完美，但我的需求是时间跟踪的基本演示——它工作得很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-24T14:24:00.000

看看[dhtmlxGantt](http://www.dhtmlx.com/docs/products/dhtmlxGantt/index.shtml)，它支持所有提到的功能：

*   交互式甘特图 - 响应拖放
*   左侧的树视图
*   缩放功能（可自定义的时间刻度）
*   与 jQuery 轻松集成

它在 GPL 下是免费的。

（免责声明：我为 DHTMLX 工作）

# machine-learning - 网页推荐系统

> ID：12778823
> 
> 赞同：5
> 
> 时间：2012-10-08T09:26:44.240
> 
> 标签：machine-learning, mahout, recommendation-engine

我正在尝试构建一个推荐系统，该系统会根据用户的操作（谷歌搜索、点击，他也可以明确地评价网页）向用户推荐网页。为了了解谷歌新闻的方式，它会显示来自网络的关于特定主题的新闻文章。用技术术语来说就是集群，但我的目标是相似的。它将是基于用户行为的基于内容的推荐。

所以我的问题是：

1.  我怎么可能在互联网上搜索相关的网页？
2.  我应该使用什么算法从网页中提取数据是文本分析和词频的唯一方法？
3.  最后，什么平台最适合这个问题。我听说过 Apache mahout，它带有一些可重复使用的算法，听起来很合适吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-10T21:00:54.260

正如 Thomas Jungblut 所说，一个人可以就您的问题写几本书 ;-) 我会尝试给您一份简短的指导清单 - 但请注意，不会有现成的现成解决方案......

1.  爬网：有很多工具包可以做到这一点，比如用于 Python 的 Scrapy、用于 Java 的 crawler4j 和 Heritrix，或用于 Perl 的 WWW::Robot。要从网页中提取实际内容，请查看boilerpipe。

    [http://scrapy.org/](http://scrapy.org/)

    [http://crawler.archive.org/](http://crawler.archive.org/)

    [http://code.google.com/p/crawler4j/](http://code.google.com/p/crawler4j/)

    [https://metacpan.org/module/WWW::Robot](https://metacpan.org/module/WWW::Robot)

    [http://code.google.com/p/boilerpipe/](http://code.google.com/p/boilerpipe/)

2.  首先，您通常可以使用协同过滤而不是基于内容的方法。但是如果你想有很好的覆盖率，尤其是长尾，就没有办法分析文本了。要看的一件事是主题建模，例如 LDA。在 Mallet、Apache Mahout 和 Vowpal Wabbit 中实现了几种 LDA 方法。对于索引、搜索和文本处理，请查看 Lucene。这是一个很棒的成熟的软件。

    [http://mallet.cs.umass.edu/](http://mallet.cs.umass.edu/)

    [http://mahout.apache.org/](http://mahout.apache.org/)

    [http://hunch.net/~vw/](http://hunch.net/~vw/)

    [http://lucene.apache.org/](http://lucene.apache.org/)

3.  除了还包含 LDA（见上文）、集群和文本处理等功能的 Apache Mahout 之外，如果您想专注于协同过滤，还可以使用其他工具包：LensKit，它也是用 Java 实现的，以及 MyMediaLite（免责声明：I我是主要作者），它是用 C# 实现的，但也有一个 Java 端口。

    [http://lenskit.grouplens.org/](http://lenskit.grouplens.org/)

    [http://ismll.de/mymedialite](http://ismll.de/mymedialite)

    [https://github.com/jcnewell/MyMediaLiteJava](https://github.com/jcnewell/MyMediaLiteJava)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T11:16:19.333

这应该是一本好书：[***谷歌新闻个性化：可扩展的在线协同过滤***](http://dl.acm.org/citation.cfm?id=1242610)

它专注于协同过滤而不是基于内容的推荐，但它触及了一些非常有趣的点，如可扩展性、项目流失、算法、系统设置和评估。

Mahout 具有非常好的协同过滤技术，您将其描述为使用用户的行为（点击、阅读等），您可以使用 rescorer 类引入一些基于内容的内容。

您可能还想看看[***Myrrix***](http://myrrix.com/)，它在某些方面是 Mahout 的口味（又名推荐）部分的演变。此外，它还允许使用 rescorer 类在协作过滤之上应用基于内容的逻辑。

如果您对 Mahout 感兴趣，那么[***Mahout in Action 一书***](http://manning.com/owen/)将是最好的起点。

# jquery - Jquery Fade不起作用

> ID：12778825
> 
> 赞同：0
> 
> 时间：2012-10-08T09:26:48.690
> 
> 标签：jquery

我正在使用这个 jquery 在另一个 div 上显示一个 div 当它悬停在它上面时，但是由于某种原因，即使它似乎可以工作，fadeIN 和 fadeOUT 也不起作用。

如果我将fadeTo 分别更改为`fadeIn`和 ，`fadeOut`那么它会破坏它，因为您将鼠标悬停在上一个不会消失？

```
$(function() {
$(".report-hover").hover(
    function() {
        $(this).children("img").fadeTo(200, 0.85).end().children(".report-image-hover").show();
    },
    function() {
        $(this).children("img").fadeTo(200, 1).end().children(".report-image-hover").hide();
    });
}); 
```

标记：

```
<div class="report-hover">

                <div class="report-image-hover">
                <a href="#">
                <img src="<?php bloginfo('template_url'); ?>/images/.....png" alt="Report" />
                </a>
                </div>

                <img src="<?php bloginfo('template_url'); ?>/images/.....png" alt="Report" />
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:05:30.333

您需要在选择要淡出的图像时使用`.find()`，而不是。只会选择直接后代，并且您的图像仍嵌套在. 请参阅**[文档](http://api.jquery.com/children/)**：`.children()``.children()``div`

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

对于您的代码变成：

```
$(".report-hover").hover(
    function() {
        $(this).find("img").fadeTo(200, 0.85).end().children(".report-image-hover").show();
    },
    function() {
        $(this).find("img").fadeTo(200, 1).end().children(".report-image-hover").hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:57:19.780

检查这个：[JSfiddle](http://jsfiddle.net/zaheerahmed/yCCGt/3/)

如果您只是将 FadeTo 替换为 FadeIn，那么它将不起作用，因为 FadeIn 具有不同的参数。[JQuery 淡入](http://api.jquery.com/fadeIn/)

# php - Symfony：致命错误：找不到类“PHPUnit_Framework_TestCase”

> ID：12778829
> 
> 赞同：3
> 
> 时间：2012-10-08T09:27:04.283
> 
> 标签：php, symfony, phpunit

使用 Symfony 2.0，我的整个系统在 localhost 中正常工作。

现在，我尝试将其上传到 Internet 托管。在遇到一些错误后，我被困在这里：

```
Fatal error: Class 'PHPUnit_Framework_TestCase' not found in /home/preparatest/www/Symfony/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Test/WebTestCase.php 
```

（顺便说一句，该类确实存在于该目录中）。

有人通过这个吗？

注意：我不是特别配置*PHPUnit*。我猜它只是包含在一些 Symfony 包中。我真的不知道它是做什么用的，如果可能的话，我不介意完全删除它。

更新：这是不工作的确切类。显然它没有找到父类`\PHPUnit_Framework_TestCase`。但是，我坚持认为，这是一个捆绑在 Symfony 中的包，并且在本地运行良好。我不明白为什么它不在远程:(

```
<?php

/*
 * This file is part of the Symfony package.
 *
 * (c) Fabien Potencier <fabien@symfony.com>
 *
 * For the full copyright and license information, please view the LICENSE
 * file that was distributed with this source code.
 */

namespace Symfony\Bundle\FrameworkBundle\Test;

use Symfony\Bundle\FrameworkBundle\Client;
use Symfony\Component\Finder\Finder;
use Symfony\Component\HttpKernel\HttpKernelInterface;

/**
 * WebTestCase is the base class for functional tests.
 *
 * @author Fabien Potencier <fabien@symfony.com>
 */
abstract class WebTestCase extends \PHPUnit_Framework_TestCase
{
    static protected $class;
    static protected $kernel; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:43:52.407

好的，解决了。

我从我的捆绑包中删除了所有测试和测试文件夹。那些只是打算用 Symfony 执行单元测试的……但我的产品显然没有安装 PHPUnit。

非常感谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:11:36.547

通常不会将测试脚本放到生产服务器上。但是，如果您确实需要在那里运行测试，并且测试依赖于 phpUnit（他们这样做），那么您需要在该服务器上安装 phpUnit。有关下载安装说明，请参见[http://phpUnit.de/ 。](http://phpUnit.de/)

您显然已经在本地安装了 phpUnit（无论您是否知道）。也许它与您使用的任何捆绑包/发行版一起包含在您的 PHP 安装中。

# pointers - 如何用 cython 包装参数为 wchar_t 指针的 C 函数

> ID：12778832
> 
> 赞同：3
> 
> 时间：2012-10-08T09:27:06.953
> 
> 标签：pointers, cython

我想用 cython 来包装一个 C 库。库中的一个函数就像

```
int hid_get_manufacturer_string(hid_device *device, wchar_t *string, size_t maxlen); 
```

有两个问题：

1.  我能用`wchar_t`in cython 做什么；

2.  如何在我的 .pyx 文件中转换字符串指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T07:24:49.170

声明 wchar_t：

```
cdef extern from "stddef.h":
    ctypedef void wchar_t 
```

或从 libc 模块导入：

```
from libc.stddef cimport wchar_t 
```

使用 WideCharToMultiByte 将 wchar_t 转换为 python 字符串的函数（参见[CefStringToPyString](http://code.google.com/p/cefpython/source/browse/utils.pyx#205)）：

```
# Declare these in .pxd file:
#
# cdef extern from "Windows.h":
#     cdef int CP_UTF8
#     cdef int WideCharToMultiByte(int, int, wchar_t*, int, char*, int, char*, int*)

cdef object WideCharToPyString(wchar_t *wcharstr):
    cdef int charstr_bytes = WideCharToMultiByte(CP_UTF8, 0, wcharstr, -1, NULL, 0, NULL, NULL)
    # Do not use malloc, otherwise you get trash data when string is empty.
    cdef char* charstr = <char*>calloc(charstr_bytes, sizeof(char))
    cdef int copied_bytes = WideCharToMultiByte(CP_UTF8, 0, wcharstr, -1, charstr, charstr_bytes, NULL, NULL)
    if bytes == str:
        pystring = "" + charstr # Python 2.7
    else:
        pystring = (b"" + charstr).decode("utf-8", "ignore") # Python 3
    free(charstr)
    return pystring 
```

从 Python 3.2 开始，您可以使用 PyUnicode_FromWideChar(wcharstr, -1) 来执行此操作，请参阅 compostus 的评论。

# java - 使用 Java 进行语言排序（德语）

> ID：12778841
> 
> 赞同：18
> 
> 时间：2012-10-08T09:27:40.197
> 
> 标签：java, sorting, locale, collation

从一种语言到另一种语言，用数字对字符串进行排序是不同的。例如，在升序排序中，英文数字排在字母之前。但是，在德语中，数字在字母之后按升序排序。

我尝试使用 a 对字符串进行排序[`Collator`](http://docs.oracle.com/javase/6/docs/api/java/text/Collator.html)，如下所示：

```
private Collator collator = Collator.getInstance(Locale.GERMANY);
collator.compare(str1, str2) 
```

但是上面的比较没有考虑字母规则之后的数字。

有没有人知道为什么Java暂时没有考虑到这个规则（字母后的数字），我正在使用[`RuleBasedCollator`](http://docs.oracle.com/javase/6/docs/api/java/text/RuleBasedCollator.html)如下：

```
private final String sortOrder = "< a, A < b, B < c, C < d, D < e, E < f, F < g, G < h, H < i, I < j, J < k, K < l, L < m, M < n, N < o, O < p, P < q, Q < r, R < s, S < t, T < u, U < v, V < w, W < x, X < y, Y < z, Z < 0 < 1 < 2 < 3 < 4 < 5 < 6 < 7 < 8 < 9";

private Collator collator = new RuleBasedCollator(sortOrder); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T14:55:29.913

您可以检查/调试源代码以查看*为什么*没有任何变化：

```
Collator.getInstance(Locale.GERMANY); 
```

调用以下代码：

```
public static synchronized
Collator getInstance(Locale desiredLocale)
{
    // Snipping some code here
    String colString = "";
    try {
        ResourceBundle resource = LocaleData.getCollationData(desiredLocale);

        colString = resource.getString("Rule");
    } catch (MissingResourceException e) {
        // Use default values
    }
    try
    {
        result = new RuleBasedCollator( CollationRules.DEFAULTRULES +
                                        colString,
                                        CANONICAL_DECOMPOSITION );
    }
// Snipping some more code here 
```

在这里，您可以看到特定规则（`colString`无论如何在您的情况下都是空的）放置*在*默认值 ( `CollationRules.DEFAULTRULES`) 之后。

正如您发现的那样，默认值将数字放在首位：

```
 // NUMERICS

    + "<0<1<2<3<4<5<6<7<8<9"
    + "<\u00bc<\u00bd<\u00be"   // 1/4,1/2,3/4 fractions

    // NON-IGNORABLES
    + "<a,A"
    + "<b,B"
    + "<c,C"
    + "<d,D" 
```

# css - 在新窗口中打开链接时删除 Firefox 和 IE 中的链接边框

> ID：12778846
> 
> 赞同：0
> 
> 时间：2012-10-08T09:27:53.660
> 
> 标签：css

当您在 Firefox 和 IE 中打开新窗口中的链接并访问新窗口并返回到第一个窗口时，该链接有一个虚线边框。我不希望在我的网站上有这个边框。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:36:05.700

你可以使用这个 CSS 来解决这个问题：

```
a :: -moz-focus-inner{border:0;}
a:focus, a:active{
outline:none;
ie-dummy:expression(this.hideFocus = true);
border: 0px none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:30:43.490

### 只需使用这个 CSS：

```
a:active, a:focus {outline: 0;} 
```

这是[`outline`](http://www.w3schools.com/css/css_outline.asp)CSS 规则。

*需要注意的是，这会给可访问性带来问题。*

### 你可以用这个小提琴检查：http: [//jsfiddle.net/sWpSq/](http://jsfiddle.net/sWpSq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T08:36:34.477

对于像我这样的愚蠢的人，可以在firefox上的其他html元素上找到图形问题，解决方案是在它们上使用**::-moz-focus-inner**，例如：

```
a::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner,
input[type="button"]::-moz-focus-inner {
  border: 0;
} 
```

# magento - 致命错误：允许的内存大小......在本地主机上使用 Magento

> ID：12778847
> 
> 赞同：2
> 
> 时间：2012-10-08T09:27:56.937
> 
> 标签：magento, localhost

我一直在我的本地主机上使用 Magento，一切都很好，直到我添加了一个新模块。现在我收到以下错误：致命错误：/Applications/XAMPP/xamppfiles/htdocs/magento/app/Mage.php 中允许的内存**大小为 268435456**字节已用尽（**尝试分配 261900 字节**）

我尝试将 memory_Limit 更改为 512M，然后它产生了相同的错误，但这次内存大小更大：

致命错误：/Applications/XAMPP/xamppfiles/htdocs/magento/app/Mage.php 中允许的内存**大小为 536870912**字节已用尽（**尝试分配 261900 字节**）

有谁知道是什么原因造成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:30:56.700

将以下代码放入此路径：/Applications/XAMPP/xamppfiles/htdocs/magento/app/Mage.php

```
ini_set('memory_limit', '512M'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:48:21.310

您安装的扩展很可能存在内存泄漏。如果您已为此付费，则应向扩展开发人员寻求帮助。[否则，您应该在xdebug profiler](http://xdebug.org/docs/profiler)或其他类似工具的帮助下自己找到瓶颈所在。

最后，您可以禁用扩展程序。

# linux - 使用 `free` 和 `awk` 计算可用交换空间百分比

> ID：12778853
> 
> 赞同：3
> 
> 时间：2012-10-08T09:28:16.047
> 
> 标签：linux, awk, ubuntu-12.04, swap

我正在尝试计算可用交换空间的百分比。使用这样的东西：

```
free | grep 'Swap' | awk '{t = $2; f = $4; print ($f/$t)}' 
```

但`awk`正在抛出：

```
awk: program limit exceeded: maximum number of fields size=32767 
```

而且我真的不明白为什么，我的程序很简单，我有可能遇到奇怪的范围错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:41:04.253

试试这个：

```
free | grep 'Swap' | awk '{t = $2; f = $4; print (f/t)}' 
```

在您的代码中，您尝试打印 $f 和 $t，它们分别是 $FreeMemory 和 $TotalMemory。所以我猜你总共有大约 4gig ram，大约是 400000 美元，这比 awk 在标准配置中使用的字段总数略高。除了使用 meminfo 进行更简单的尝试之外，尝试仅打印引用变量的 f/t 并得到答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:32:37.313

`/proc/meminfo`请注意，使用'行读取信息可能更容易/更健壮`SwapFree`。

就像是：

```
$ grep SwapFree /proc/meminfo | awk '{print $2}' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:30:57.113

您不需要变量。你可以使用普通的

```
awk '{ print $4/$2 }' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:34:27.717

从 /proc/meminfo 读取它：

```
lennart@trololol:~$ grep SwapFree /proc/meminfo | awk '{print $2}'
0 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-09-17T04:41:15.793

我意识到问题是关于使用“免费”和“awk”，但如果你有 SAR 运行，那么这会给你最近记录的百分比值：

```
sar -S|tail -2|head -1|awk '{print $5}' 
```

# android - TextView setEllipsize to marquee导致nullpointerexception

> ID：12778854
> 
> 赞同：0
> 
> 时间：2012-10-08T09:28:17.253
> 
> 标签：android, textview, android-2.3-gingerbread

```
final TextView appTextView = new TextView(getContext());    
appTextView.setTextSize(12);
appTextView.setGravity(Gravity.CENTER_HORIZONTAL);
appTextView.setEllipsize(TextUtils.TruncateAt.MARQUEE);
appTextView.setMaxLines(2);
appTextView.setPadding(10, 0, 10, 0);
appTextView.setText("Some text");

addView(appTextView);

E/AndroidRuntime( 2448): Caused by: java.lang.NullPointerException
E/AndroidRuntime( 2448):    at android.widget.TextView.makeNewLayout(TextView.java:5130)
E/AndroidRuntime( 2448):    at android.widget.TextView.onMeasure(TextView.java:5317)
E/AndroidRuntime( 2448):    at android.view.View.measure(View.java:8313)
E/AndroidRuntime( 2448):    at com.venturezlab.tvlauncher.views.AppsLayout.refreshApps(AppsLayout.java:51)
E/AndroidRuntime( 2448):    at com.venturezlab.tvlauncher.views.AppsLayout.<init>(AppsLayout.java:30)
E/AndroidRuntime( 2448):    ... 25 more 
```

为什么？没有椭圆，这很好用。

# c# - 跨语言消息传递

> ID：12778859
> 
> 赞同：6
> 
> 时间：2012-10-08T09:28:42.070
> 
> 标签：c#, java, jms, messaging

我们使用以 Java 为中心的工具，该工具在内部使用 JMS 并与外部 Java 软件进行通信。我们现在必须为 C# 应用程序设置一个新接口。我们的 JMS 提供程序提供了一个应该可以工作的 C# 实现，但我不完全确定 JMS 是在这种情况下要走的路。它将在 C# 应用程序中引入新的特定于供应商的依赖项，用于实现细节和客户端支持。

一些谷歌搜索让我找到了 STOMP，它似乎是一个已建立的线级协议，由多个支持 JMS 的消息代理（hornetq、activemq、...）支持，但 C# 中似乎明显缺乏实际客户端（以及 java 到在一定程度上）。如果不深入研究，我也不完全确定对“文本”的强调在哪里起作用？它不支持二进制对象吗？

另一种解决方案可能是 AMQP，它是另一种线级协议，但 1.0 规范尚未发布，我们厌倦了实施已有 4 年历史的 0.9.1 规范，因为 1.0 似乎发生了很大变化。

考虑到安全性、支持、事务性、标准合规性、可移植性，哪种解决方案最适合语言间异步消息传递……请注意，具有适当 WS-* 的soap 不是此特定接口的选项。

**EDIT1**：我见过诸如[跨平台、跨语言消息传递系统之类的问题？](https://stackoverflow.com/questions/258638/cross-platform-cross-language-messaging-system)但他们似乎专注于一种适用于多种语言的特定工具。我实际上正在寻找一种符合标准的协议，该协议可以由多个供应商实现或可以实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:40:52.930

一种选择是将 C# 客户端从底层的特定通知协议中抽象出来，并让它在输入端口和输出端口级别上工作，其中输入端口和输出端口是使用通用互操作适配器实现的——关系数据库、 Web 服务，特定文件夹中的 xml 文件。

提供适配器以及适配器和消息传递子系统之间的桥梁是您的责任，但有明显的好处：企业环境之间的相互义务是在非常通用的级别上定义的。您甚至可以在某一天更换消息传递子系统并保留所有输入和输出端口。换句话说，C# 客户端甚至不会注意到您将 JMS 替换为另一个消息传递基础架构，因为它仍然从同一组适配器发送/接收数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:41:32.160

我不知道我是否正确理解了您的问题，但 [RabbitMQ](http://www.rabbitmq.com/)是一个 AMQP 实现，并且具有 C# 和 Java 的绑定。

为了防止“C# 应用程序中出现新的供应商特定依赖项”，您可能需要查看[Spring.Net 框架中的消息传递组件](http://springframework.net/docs/1.3.2/reference/html/messaging.html)以及它们[相关的 AMQP for .Net](https://github.com/SpringSource/spring-net-amqp)项目。这允许您将 POCO 和业务逻辑与消息传递中间件和基础设施分开。

# android - 设置画廊android的大小

> ID：12778865
> 
> 赞同：2
> 
> 时间：2012-10-08T09:28:50.507
> 
> 标签：android, gallery

我对 android 中画廊的设定大小有疑问。我想设置画廊的大小（如设备屏幕的一半）我正在使用此代码：

```
int width = (int) getResources().getDimension(R.dimen.image_height);
int height = (int) getResources().getDimension(R.dimen.image_width);
iv.setLayoutParams(new Gallery.LayoutParams(width, height));
iv.setLayoutParams(new Gallery.LayoutParams(30, 40)); ` 
```

和 main.xml：

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/mySelection"
        android:layout_width="fill_parent"
        android:layout_height="
        android:background="#ffffff"
        android:textSize="20px"
        android:textStyle="bold" />

    <Gallery
        android:id="@+id/myGallery"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:gravity="bottom" 
         android:spacing="
    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="200dp"
        android:layout_weight="0.46" />
</LinearLayout>` 
```

此外，在文件中设置深度和高度`images.xml`不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:39:15.203

您的高度不起作用，因为您没有给出值..再次查看您的代码..并且要设置 gridview 的大小，请使用以下代码：

```
Display display = activity.getWindowManager().getDefaultDisplay();
    int halfDeviceWidth = display.getWidth()/2;
    int halfDeviceHeight = display.getHeight()/2;
iv.setLayoutParams(new Gallery.LayoutParams(halfDeviceWidth, halfDeviceHeight)); 
```

使用此代码..

# android - 使用string.xml在webview中回车

> ID：12778866
> 
> 赞同：0
> 
> 时间：2012-10-08T09:28:55.483
> 
> 标签：android, android-webview

我正在使用 webView，我正在编写的代码位于 string.xml 中：

```
String contact = "<html xmlns=\"http://www.w3.org/1999/xhtml\"> " + "\n" +
        "<body style=\"font-family:Arial;text-align:center;\">" + "\n"  
        context.getString(R.string.contact_text) + "\n"+
        "</body>" + "\n" +
        "</html>";
    webContact.loadDataWithBaseURL(null, contact, "text/html","utf-8", null); 
```

问题是在 R.string.contact_text 我有回车，但没有写出来。

我试过了

```
 \n
      <br>
      <br></br> 
```

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T07:54:35.023

**请用<pre>**标签包围你的消息它保留空格和换行符。

< pre>你的消息在这里</pre>

# ant - 如何在 build.xml 文件中的 exec 中放置条件？

> ID：12778867
> 
> 赞同：4
> 
> 时间：2012-10-08T09:28:57.763
> 
> 标签：ant, parameters, exec, build.xml

*如何在从Hudson*`build.xml`调用的文件中放入 exec 条件？

 *仅当发生某些事情时（我发送一些参数），我才需要使用*arg并且我需要一个**if*任务或条件 for 可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:44:50.063

[Ant Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/if.html)库有一个 if 任务，如下所示：

```
<if>
<my condition goes here>
<then>
</then>
</if> 
```

在原始 Ant 中，您使用如下所示的[条件任务](http://ant.apache.org/manual//Tasks/condition.html)：

```
<condition property="condition.to.set">
   <my condition goes here>  
</condition> 
```

然后是一个条件目标：

```
<target name="mine" if="condition.to.set"> 
```

我更喜欢 Ant Contrib，因为它更容易阅读。*

# android - 重启时重新生成的 init.rc 文件

> ID：12778878
> 
> 赞同：0
> 
> 时间：2012-10-08T09:29:40.430
> 
> 标签：android, shell

我添加了一些脚本来在文件中启动我的应用程序`init.rc`。但是当我重新启动模拟器时，文件会更改为其原始文件。我希望我所做的更改不应该在启动时被删除。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T19:00:38.487

init.rc 文件是 ramdisk.img 的一部分，您需要在 avd 中解压缩 ramdisk.img 文件，进行任何修改都重新打包它。

在linux上可以使用以下命令解压

```
mkdir ramdisk && cd ramdisk
gunzip -c ../ramdisk.img | cpio -i 
```

随意修改 init.rc 然后重新打包

```
find . | cpio -o -H newc | gzip > ../new_ramdisk.img 
```

# wpf - XPath：绑定到集合的最后一项

> ID：12778880
> 
> 赞同：1
> 
> 时间：2012-10-08T09:29:48.357
> 
> 标签：wpf, binding

我可以`Bind` `TextBox.Text`到最后一个项目`ObservableCollection<string>`吗？

我试过这个：

```
<TextBox Text={Binding XPath="Model/CollectionOfString[last()]"/> 
```

但它不绑定。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:46:57.973

请尝试以下方法，

1、使用IValueConverter。

```
class DataSourceToLastItemConverter : IValueConverter
{
    public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        IEnumerable<object> items = value as IEnumerable<object>;
        if (items != null)
        {
            return items.LastOrDefault();
        }
        else return Binding.DoNothing;
    }

    public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new System.NotImplementedException();
    }
} 
```

然后像这样绑定：

```
<Grid>
    <Grid.Resources>
        <local:DataSourceToLastItemConverter x:Key="DataSourceToLastItemConverter" />
    </Grid.Resources>
    <TextBox Text="{Binding Path=Model.CollectionOfString,Converter={StaticResource DataSourceToLastItemConverter}}"/>
</Grid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T09:57:42.753

它没有绑定，因为您不能[`XPath`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.xpath.aspx)在非 XML 数据源上使用该属性；您必须[`Path`](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx)改用，并且该属性不提供类似的语法。所以你不能直接绑定到集合的最后一个元素，除非你知道最后一个值的索引。但是，有几个可用的解决方法：

### 使用值转换器绑定

[编写自定义值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)来获取集合并将其“转换”为最后一个元素并不难。[霍华德的回答](https://stackoverflow.com/a/12779170/50079)给出了一个准系统转换器来做到这一点。

### 绑定到集合视图中的当前项

这甚至更容易做到，但它涉及代码隐藏。

[如果您已将默认集合视图](http://msdn.microsoft.com/en-us/library/ms752347.aspx#collection_views)中的“当前”项设置为集合中的最后一项，则可以使用绑定`Path=Model.CollectionOfString/`（注意末尾的斜线） 。在您的模型中执行此操作：

```
// get a reference to the default collection view for this.CollectionOfString
var collectionView = CollectionViewSource.GetDefault(this.CollectionOfString);

// set the "current" item to the last, enabling direct binding to it with a /
collectionView.MoveCurrentToLast(); 
```

请注意，如果将项目添加到集合中或从集合中删除，则不一定会自动调整当前项目指针。

# php - 如何计算不同div中选中的复选框

> ID：12778882
> 
> 赞同：1
> 
> 时间：2012-10-08T09:29:53.213
> 
> 标签：php, javascript, javascript-events

```
<head><title>STUDENT WISE EXAM BACKLOGS DISPLAY FOR EXAM REGISTRATION</title>

<style type="text/css">
    th {
        font-family:Arial;
        color:black;
        border:1px solid #000;
    }
    thead {
        display:table-header-group;
    }
    tbody {
        display:table-row-group;
    }
    td  {
       border:1px solid #000;   
    }
    </style> 
<script type="text/javascript" >
function check_value(year,sem){

ysem="ys"+year+sem;
var reg=document.registration.regulation.value;
subjectsys="subjects"+year+sem;
amountsys="amount"+year+sem;

if(year==1){
if(sem==1){
var value_list = document.getElementById("ys11").getElementsByTagName('input');
}   
if(sem==2){
var value_list = document.getElementById("ys12").getElementsByTagName('input');
}
  }elseif(year==2){
if(sem==1){
var value_list = document.getElementById("ys21").getElementsByTagName('input');
}   
if(sem==2){
var value_list = document.getElementById("ys22").getElementsByTagName('input');
}
  }elseif(year==3){
if(sem==1){
var value_list = document.getElementById("ys31").getElementsByTagName('input');
}   
if(sem==2){
var value_list = document.getElementById("ys32").getElementsByTagName('input');
}
  }elseif(year==4){
if(sem==1){
var value_list = document.getElementById("ys41").getElementsByTagName('input');
}   
if(sem==2){
var value_list = document.getElementById("ys42").getElementsByTagName('input');
}
  }

  values = 0;
  for (var i=0; i<value_list.length; i++){
if  (value_list[i].checked) {
    values=values+1;
}
  }
  document.getElementById(subjectsys).value=values;
  if (values=="0")
    {
    document.getElementById(amountsys).innerHTML="";
    return;
    }
  if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
    }
  else
    {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
  xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
      {
      document.getElementById(amountsys).innerHTML=xmlhttp.responseText;
      }
    }
  xmlhttp.open("GET","fee.php?year="+year+"&reg="+reg+"&sem="+sem+"&sub="+values,true);
  xmlhttp.send();
  } 
  </script>
     </head>

<form id="registration" name="registration" action=subverify.php method=POST></br></br>    <center> Backlog Subjects for <b>My HtNo</b>
</br></br>
<table border='1'><tr>
<th width='40'>&nbsp;</th><th width='90'>Regulation</th><th width='40'>Year</th>
<th width='40'>Sem</th><th width='350'>Subname</th>
<th width='70'>Internals</th><th width='70'>Externals</th>
</tr><div id="ys41"><tr>
<td width='40'><center><input type="checkbox" name="sub[]" value="344" 
onclick="check_value(4,1)"></center></td>
<td width='90'><center>R07</center></td><td width='40'><center>4</center></td><td     width='40'><center>1</center></td>
<td width='350'>EMBEDDED SYSTEMS</td><td width='70'><center>18</center></td>
<td width='70'><center>17</center></td></tr><tr><td colspan=5 align=right><b>Subjects:     </b><input size=2 type=textbox id=subjects41 name=subjects41 value=0     maxlength=2 readonly=readonly></td>
<td align=right><b>Amount  :</b></td>
<input type='hidden' name='regulation' id=regulationsubjects41 value='R07'>
<td><div id="amount41"><input type="textbox" name="amountval41" value="0" size="5"     maxlength="5" readonly="readonly"></div></td></tr></div><div id="ys42"><tr>
<td width='40'><center><input type="checkbox" name="sub[]" value="527" 
onclick="check_value(4,2)"></center></td>
<td width='90'><center>R07</center></td><td width='40'><center>4</center></td><td     width='40'><center>2</center></td>
<td width='350'>DESIGN PATTERNS</td><td width='70'><center>12</center></td>
<td width='70'><center>14</center></td></tr><tr><td colspan=5 align=right><b>Subjects:     </b><input size=2 type=textbox id=subjects42 name=subjects42 value=0     maxlength=2 readonly=readonly></td>
<td align=right><b>Amount  :</b></td>
<input type='hidden' name='regulation' id=regulationsubjects42 value='R07'>
<td><div id="amount42"><input type="textbox" name="amountval42" value="0" size="5"     maxlength="5" readonly="readonly"></div></td></tr></div><tr><td colspan=7><center><b><div     id="maintotal"><input type="textbox" name="maintotal" value="0" size="5"     maxlength="5" readonly="readonly"></div></center></b></td></tr><tr></tr></table></br></br>    <center><input type='hidden' name='htno' value='08KN1A1219'>
<input type='submit' value='Register'></center></form></br> 
```

这是一个 php 文件的输出，它使用动态数据的形式，我只想计算标签`checkboxes`中的`<div>`，它必须显示在那个主题`<div>`标签中`subjects41`，`subjects42`任何人都可以帮我更新这个 javascript 它传递了一些 ajax 请求用于显示费用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:33:46.690

```
$("input[type=checkbox]:checked").length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:14:40.557

由于您想使用 javascript 来执行此操作，

```
<FORM>
<INPUT TYPE=checkbox NAME="chkboxarray" VALUE="1"><br>
<INPUT TYPE=checkbox NAME="chkboxarray" VALUE="2"><br>
<INPUT TYPE=checkbox NAME="chkboxarray" VALUE="3"><br>
<INPUT TYPE=button NAME="CheckAll" VALUE="checkbox count" onClick="modify_boxes()">
</FORM>​

function modify_boxes(){
    var total_boxes = document.forms[0].chkboxarray.length;
    var count =0;
    for ( i=0 ; i < total_boxes ; i++ ){
     if (document.forms[0].chkboxarray[i].checked ==true)
     count++;        
    }   
 alert(count);        
}​​​​ 
```

工作[演示](http://jsfiddle.net/PRnLX/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:33:10.400

您可以使用类似这样的简单 jquery

```
var count=0;
$("input[type=checkbox]").each(function(){
if(this.is(":checked")){
count+=1;
}
})

alert(count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T09:49:33.480

没有jQuery：

```
var div = document.getElementById("ys41");
var checkboxes = [];

function getCheckBoxes(el) {
    //check this is an element
    if (el.nodeType == 1) {
        var i = 0;

        //get the children
        var elements = el.childNodes;

        // Loop through children
        while (typeof elements[i] !== 'undefined') {

            //check this is an element
            if (elements[i].nodeType == 1) {
                // If the type is checkbox add it to the array
                if (elements[i].getAttribute('type') == 'checkbox') {
                    checkboxes[checkboxes.length] = elements[i];
                }
                // Otherwise recurse
                else {
                    if (elements[i].childNodes.length > 0) {
                        getCheckBoxes(elements[i]);
                    }
                }
            }
            i++;
        }
    }
}

getCheckBoxes(div); 
```

警告：我现在没有时间检查它是否有效；）。如果它不发表评论，我会在今晚更正。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T09:36:12.713

使用 jQuery ，

```
var ids = $('input[name="nameofcheckbox[]"]:checked')
                    .map(function(){
                                  return this.value;
                   }).get(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-08T09:35:31.067

给你，这就是你问的:)

```
var i=0;
var checks= 0;
divelem = document.getElementById("divelem");
  while(i < divelem.childNodes.length){
  if( divelem.childNodes[i].nodeType != 3         //not empty space
      && divelem.childNodes[i].getAttribute('type') == 'checkbox' //is checkbox? 
      && divelem.childNodes[i].checked ){                         // is checked?
            checks++;
     }
      i++;  
 }
alert("no of checkboxes checked in div are: "+checks); 
```

我更喜欢你计算 php 本身。

**更新：** 这是完整的代码，我很确定它正在工作。它提供了在所有 div 元素中选中的所有复选框。请检查。

```
<html>
<div >
1.<input type="checkbox" value="check1" / ></br>
2.<input type="checkbox" value="check2" / ></br>
3.<input type="checkbox" value="check3" / ></br>
</div>
<div >
4.<input type="checkbox" value="check4" / ></br>
5.<input type="checkbox" value="check5" / ></br>
</div>
<input type="button" value="count check" onclick="check()"> 
<script>
function check(){ //function can count checkboxes for all div elements in document

var checks= 0;
var divelems = document.getElementsByTagName('div');
for(no=0;no<divelems.length;no++){
  var i=0;
    while(i < divelems[no].childNodes.length){
    if( divelems[no].childNodes[i].nodeType != 3         //not empty space
    && divelems[no].childNodes[i].getAttribute('type') == 'checkbox' //is checkbox? 
    && divelems[no].childNodes[i].checked ){                         // is checked?
      checks++;
        }
     i++;  
    }
 }
alert("no of checkboxes checked inside div are: "+checks);
}
</script>
</html> 
```

**UPDATE2：** 请立即检查

```
<html>
<script>
    function check(div){ //function can count checkboxes for divs elements that is passed in as argument

var checks= 0;
var divelem = document.getElementById(div);
var i=0;
while(i < divelem.childNodes.length){
if( divelem.childNodes[i].nodeType != 3         //not empty space
&& divelem.childNodes[i].getAttribute('type') == 'checkbox' //is checkbox? 
&& divelem.childNodes[i].checked ){                         // is checked?
  checks++;
    }
 i++;  
}

alert("no of checkboxes checked inside "+div+" are: "+checks);
}
</script>
<div id="div1" >
1.<input type="checkbox" value="check1" / ></br>
2.<input type="checkbox" value="check2" / ></br>
3.<input type="checkbox" value="check3" / ></br>
<input type="button" value="count check div1" onclick="check('div1')"> 
</div>
<div id="div2" >
4.<input type="checkbox" value="check4" / ></br>
5.<input type="checkbox" value="check5" / ></br>
</div>
<input type="button" value="count check div2 " onclick="check('div2')"> 
</html> 
```

# php - 显示没有任何 HTML 渲染的页面

> ID：12778886
> 
> 赞同：4
> 
> 时间：2012-10-08T09:30:07.000
> 
> 标签：php, browser, hash, renderer

我在两个页面之间存在不一致。PHP 正在转储变量，我需要能够在没有 HTML 渲染的情况下查看变量中的原始数据，从而呈现其中可能存在的任何内容。

渲染后的版本是 100% 相同的，但是当我使用字符串和 hash_hmac 时，它们会得到不同的结果哈希。

有没有办法转储这些字符串并查看原始数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:32:48.293

几个选项浮现在脑海中。任何一个

*   发送`header('Content-Type: text/plain');`
*   或将转储包装在`<pre>`元素中。
*   或者只是查看也将具有原始输出的源代码。

您可能还对[xdiff](http://php.net/xdiff)感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T09:32:44.317

`strip_tags`在php中尝试函数这将删除所有标签

或者

用这个

```
header('Content-Type: text/plain'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T09:40:09.953

不行，我试过了。我正在制作一个 Amazon FPS 系统，但签名无效，因为他们在发布请求中硬渲染了新行以进行签名。我建立的系统有空间。发布后，我将结果转储到数据库中，并在数据库中说它有换行符。

**答：** 获取字符串并将它们转储到数据库中。然后使用数据库查看差异。这是我发现解决问题的唯一方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T10:30:26.623

我使用此函数将数组值打印到屏幕上：

```
function PrintArray($array)
{
    echo " <pre>";
    print_r($array);
    echo " </pre> ";
} 
```

例如，要访问发布的数据：

```
if ($submit)
{
  if ($debug)
  {
    printarray($_POST);
  }
} 
```

其余的脚本数据（没有立即通过标记显示的数据）需要在 $debug 条件语句中回显/打印到文件中。

您应该构建您的应用程序，以便在可能发现潜在问题的地方包含调试语句。在页面顶部，声明 $debug = true; （或在不使用时将其设置为 false）。

编辑：

顺便说一句，在我的环境中，如果脚本是从生产中提供的（以编程方式检测到），则调试语句将被关闭。它们只能在测试中显示，并且当 $debug 设置为 true 时。正如评论者在下面所写，您不应在生产/实时应用程序中显示（或允许错误地显示）调试信息。

最好将调试信息写入 Web 根目录下的文件。

# c# - 如何在 C# ASP.Net 中将表格数据从 Excel 上传到 SQL Server 2008

> ID：12778889
> 
> 赞同：0
> 
> 时间：2012-10-08T09:30:17.113
> 
> 标签：c#, asp.net

```
protected void btnup_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)
    {
        if (System.IO.Path.GetExtension(FileUpload1.FileName) == ".xls" || System.IO.Path.GetExtension(FileUpload1.FileName) == ".xlsx")
        {
            FileUpload1.SaveAs(Server.MapPath("~/Excal/sample.xlsx"));
        }
    }
}
protected void Button2_Click(object sender, EventArgs e)
{ 
   string sSourceConstr = @"Provider=Microsoft.ACE.OLEDB.12.0; Data Source=C:\sample.xlsx; Extended Properties=""Excel 12.0;HDR=YES;""";
    string sDestConstr = ConfigurationManager.ConnectionStrings["TestConnection"].ConnectionString;

    OleDbConnection sSourceConnection = new OleDbConnection(sSourceConstr);
    using (sSourceConnection)
    {
        string sql = string.Format("Select [ID],[Name],[Designation] FROM [{0}]", "sample$");
        OleDbCommand command = new OleDbCommand(sql, sSourceConnection);
        sSourceConnection.Open();
        using (OleDbDataReader dr = command.ExecuteReader())
        {
            using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sDestConstr))
            {
                bulkCopy.DestinationTableName = "rr";
                //You can mannualy set the column mapping by the following way.
                //bulkCopy.ColumnMappings.Add("MSISDN", "MSISDN");
                bulkCopy.WriteToServer(dr);
            }
        }
    }
    lblmsg.Text = "Record update";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:36:23.280

我在几天前就这样做了。下面的代码对我有用..

```
 try
        {

           string excelConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;" +
                               "Data Source=" + Path of File + ";" +
                              @"Extended Properties=""Excel 12.0 Xml;HDR=Yes""";

            //Create Connection to Excel work book
            OleDbConnection excelConnection =
            new OleDbConnection(excelConnectionString);

            //Create OleDbCommand to fetch data from Excel
            OleDbCommand cmd = new OleDbCommand
            ("Select * from [Sheet1$]",
            excelConnection);

            excelConnection.Open();

            OleDbDataReader dReader;
            dReader = cmd.ExecuteReader();

            SqlBulkCopy sqlBulk = new SqlBulkCopy(strConnection);
            sqlBulk.DestinationTableName = "ExcelTable";  // write your table name

            //sqlBulk.ColumnMappings.Add("ID", "ID");
            //sqlBulk.ColumnMappings.Add("Name", "Name");
            sqlBulk.WriteToServer(dReader);

        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        } 
```

# iphone - 如何在不使用 set alpha 的情况下合并 2 张图像？

> ID：12778895
> 
> 赞同：10
> 
> 时间：2012-10-08T09:30:28.527
> 
> 标签：iphone, image, image-processing

我是 iPhone 的新手开发人员。

我想合并两个图像并只获取一个图像`UIImageView`而不设置 alpha。

这是我的代码。此代码使用 alpha 工作，但我想设置不设置 alpha。

我的代码：-

```
-(UIImage *)maskingImage:(UIImage *)image
{

    CGSize sizeR = CGSizeMake(200, 220);
   // UIImage *textureImage = [UIImage imageNamed:@"tt.png"];
    UIImage *textureImage =imgView2.image;

    UIGraphicsBeginImageContextWithOptions(sizeR, YES, textureImage.scale);
    [textureImage drawInRect:CGRectMake(0.0, 0.0, 200, 220)];

    UIImage *bottomImage = UIGraphicsGetImageFromCurrentImageContext();

    UIImage *upperImage = image;

    CGSize newSize = sizeR ;
    UIGraphicsBeginImageContext(newSize);
    [bottomImage drawInRect:CGRectMake(0.0, 0.0, 200, 220)];
    [upperImage drawInRect:CGRectMake(0.0, 0.0, 200, 220) blendMode:kCGBlendModeNormal alpha:0.5];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage; 
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:22:48.380

```
UIGraphicsBeginImageContext(YOUR SIZE);

//FIRST IMAGE
[FIRST_IMAGE drawInRect:CGRectMake(0, 0, YOUR_SIZE_WIDTH/2, YOUR_SIZE_HEIGHT)];
//SECOND IMAGE
[SECOND_IMAGE drawInRect:CGRectMake(YOUR_SIZE_WIDTH/2, 0, YOUR_SIZE_WIDTH/2, YOUR_SIZE_HEIGHT)];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:46:56.043

使用这个功能

```
- (UIImage * ) mergeImage: (UIImage *) imageA
            withImage:  (UIImage *) imageB
             strength: (float) strength  X:(float )x Y:(float)y{

UIGraphicsBeginImageContextWithOptions(CGSizeMake([imageA size].width,[imageA size].height), NO, 0.0);

[imageA drawAtPoint: CGPointMake(0,0)];

[imageB drawAtPoint: CGPointMake(x,y)
          blendMode: kCGBlendModeNormal // you can play with this
              alpha: strength]; // 0 - 1

UIImage *mergedImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return mergedImage;} 
```

这里 x 和 y 是您要显示第二张图片的位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T06:45:00.957

我刚遇到同样的问题，现在我找到了解决问题的方法

```
 CGSize newSize = CGSizeMake(320, 377);
    UIGraphicsBeginImageContext( newSize );

    // Use existing opacity as is
    [ image1 drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    // Apply supplied opacity
    [image2 drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.8];

    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext(); 
```

试试这个，它对我来说就像一个魅力，我希望你也能得到解决方案。

你可以使用——

```
[image drawInRect:CGRectMake(0,0,newSize.width,newSize.height) blendMode:kCGBlendModeNormal alpha:0.0]; 
```

# twitter - 获取仅包含地理标记推文的推特时间线

> ID：12778897
> 
> 赞同：1
> 
> 时间：2012-10-08T09:30:32.060
> 
> 标签：twitter, location, geotagging

我需要的是获得只有与位置相关的推文的推特时间线。

我知道在 Facebook 中可以使用`me/home?with=location`twitter，有类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:44:05.400

您可以在 Search and Streaming API 中使用位置：

*   流 API 的位置[https://dev.twitter.com/docs/streaming-apis/parameters#locations](https://dev.twitter.com/docs/streaming-apis/parameters#locations)
*   搜索 API 的地理编码[https://dev.twitter.com/docs/api/1/get/search](https://dev.twitter.com/docs/api/1/get/search)

# jquery - JQuery 将项目索引绑定到另一个项目索引

> ID：12778910
> 
> 赞同：0
> 
> 时间：2012-10-08T09:31:12.243
> 
> 标签：jquery

我有使用 Jquery Tools Scrollable 的滚动器，它可以很好地滚动项目。除此之外，我有一个与正在滚动的项目匹配的列表。我需要根据滚动条的索引将一个类添加到正确的列表项中。我能想到的最好方法是使用 scoller 上的导航器来设置选定的列表项。

因此，我的问题是我可以将一个元素（导航器）的索引绑定到我的列表元素吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:37:09.633

为什么不将处理程序绑定到滚动事件并在那里检查您想要检查的内容？

```
$(window).scroll(function() {
   // check your list and bind the class accordingly here
}); 
```

[http://api.jquery.com/scroll/](http://api.jquery.com/scroll/)

# python - 将纹理映射到四边形 opengl 和 pyglet

> ID：12778913
> 
> 赞同：2
> 
> 时间：2012-10-08T09:31:19.713
> 
> 标签：python, opengl, pyglet

我正在尝试使用 opengl 函数将纹理映射到 pyglet 中的四边形，但四边形只是显示为白色。

我的代码如下所示：

```
import pyglet
from pyglet.gl import *

glEnable(GL_TEXTURE_2D)
image = pyglet.image.load("redbrick.png")
texture = image.get_texture() 
```

和我的绘图功能：

```
def on_draw():
    window.clear()

    glBindTexture (GL_TEXTURE_2D, 13)
    glBegin (GL_QUADS);
    glTexCoord2i (0, 0)
    glVertex2i (0, 0)
    glTexCoord2i (1, 0)
    glVertex2i (100, 0)
    glTexCoord2i (1, 1)
    glVertex2i (100, 100)
    glTexCoord2i (0, 1)
    glVertex2i (0, 100)
    glEnd () 
```

我做错了什么或错过了将其绘制为白色四边形的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:04:09.490

我看到一些可能是错误的。将完整的代码像一个 pastebin 一样放在里面会很好，但我不能评论这样问......

您的纹理需要制作成opengl纹理。您需要先将图像转换为原始数据格式。当您加载图像时执行 image.get_data()，压缩成下面的一行。这不是最有效的方法，而是一个简单的例子。

绑定纹理集绘制参数后。

然后将数据交给 glTexImage2D 中的显卡。

```
data=pyglet.image.load("redbrick.png").get_data()
texture_id = glGenTextures(1)
glBindTexture(GL_TEXTURE_2D, texture_id)
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR)
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR)
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, (image_width), (image_height), 0, GL_RGBA, GL_UNSIGNED_BYTE, data) 
```

之后，如果您与 texture_id 绑定，您应该能够使用此纹理。就我所见，13 可能什么都不是。提供所有代码，我可能会修改。

# iphone - 使用 ABRecordCopyCompositeName 时的内存问题

> ID：12778914
> 
> 赞同：1
> 
> 时间：2012-10-08T09:31:23.723
> 
> 标签：iphone, ios

我在显示地图视图时有以下代码。

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

MKCoordinateRegion region = mapView.region;
MKCoordinateSpan span;
span.latitudeDelta=100;
span.longitudeDelta=100;
NSString *compositeName =(NSString*)ABRecordCopyCompositeName(person);
if([compositeName length] < 1){

    firstName = @"No Name";
    lastName = @"";
}
else if([firstName length] < 1 && [lastName length] < 1){

    firstName = compositeName;
    lastName = @"";
}
else if([firstName length] < 1)
{
    firstName = lastName;
    lastName = @"";
}

addAnnotation = [[[MyAnnotation alloc] initWithCoordinate:mapCenter title:firstName SubTitle:lastName ]autorelease];
[mapView addAnnotation:addAnnotation];
region.span=span;
region.center=mapCenter;

[pool release]; 
```

在分析项目以检查内存泄漏时，我收到警告“存储到复合名称中的对象可能泄漏”。我应该释放字符串类型的复合名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:36:47.973

这是与我的答案相似的[答案](https://stackoverflow.com/questions/12777485/getting-null-by-abaddressbookgetpersonwithrecordid/12777740#12777740)

请尝试以下代码以从电话簿中获取人员的所有信息

```
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{
    ABAddressBookRef addressBook = ABAddressBookCreate();

    int i;
    NSString *strName = @"";
    NSString* company = @"";
    NSString *address = @"";
    NSString *suburb = @"";
    NSString *postalcode = @"";
    NSString *state = @"";
    NSString *country = @"";
    NSString *mobile = @"";
    NSString *phone = @"";
    NSString *emailid = @"";

    strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
    CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
    company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);

    NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
    CFRelease(name);

    for (i = 0; i < [allPeople count]; i++)
    {
        ABRecordRef record = [allPeople objectAtIndex:i];

        ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
        for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
        {
            NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
            if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
            {
                CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
                address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
                suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
                postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
                state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
                country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCountryKey)];

                CFRelease(dict);
            }
            CFRelease(HomeLabel);
        }
        CFRelease(multiValue);
    }
    CFRelease(allPeople);

    ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
    NSString* mobileLabel = nil;
    for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
    {
        mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
        if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
        {
            mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",mobile);
        }
        else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
        {
            phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
            NSLog(@"phone   %@",phone);

            CFRelease(mobileLabel);
            break ;
        }
        CFRelease(mobileLabel);

    }
    CFStringRef value, label;
    ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
    CFIndex count = ABMultiValueGetCount(multi);
    if (count == 1)
    {
        value = ABMultiValueCopyValueAtIndex(multi, 0);
        emailid = (NSString*) value;
        NSLog(@"self.emailID   %@",emailid);
        CFRelease(value);
    }
    else
    {
        for (CFIndex i = 0; i < count; i++)
        {
            label = ABMultiValueCopyLabelAtIndex(multi, i);
            value = ABMultiValueCopyValueAtIndex(multi, i);

            // check for Work e-mail label
            if (CFStringCompare(label, kABWorkLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }
            else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
            {
                emailid = (NSString*) value;
                NSLog(@"self.emailID   %@",emailid);
            }

            CFRelease(label);
            CFRelease(value);
        }
    }
    CFRelease(multi);

        }

    CFRelease(phones);
    CFRelease(addressBook);
    [self dismissModalViewControllerAnimated:YES];

    return NO;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T11:05:53.053

这里分配并存储到“compositeName”中的对象的保留计数为+1。我认为你只需要在这种情况下释放compositeName。

# qt - libvlc 和 qt 问题

> ID：12778918
> 
> 赞同：1
> 
> 时间：2012-10-08T09:31:34.987
> 
> 标签：qt, libvlc

我正在尝试在 Windows 7 上使用 libvlc 在 Qt Widget 中播放。我需要一些由 libvlc 提供的功能，这些功能在声子中不存在。我正在使用以下代码：

```
_videoWidget = new QFrame(this);
qDebug()<<fileName;
const char * const vlc_args[] = {
    "-I qt4",
              "--extraintf=logger",
              "--verbose=2" };
 _vlcinstance = libvlc_new(sizeof(vlc_args) / sizeof(vlc_args[0]), vlc_args);
 _mp = libvlc_media_player_new (_vlcinstance);
 _m = libvlc_media_new_path(_vlcinstance, fileName.toAscii());
 libvlc_media_player_set_media (_mp, _m);
 libvlc_media_player_set_hwnd(_mp, 0);//(_videoWidget->winId());
 int windid = reinterpret_cast<int>(_videoWidget->winId());
 libvlc_media_player_set_xwindow (_mp, windid );
 libvlc_media_player_play (_mp); 
```

在我选择播放文件后它什么也不做，没有帧没有调试输出？调试控制台操作是：

```
 [0ac8f670] main libvlc debug: VLC media player - 2.0.3 Twoflower
[0ac8f670] main libvlc debug: Copyright © 1996-2012 VLC authors and VideoLAN
[0ac8f670] main libvlc debug: revision 2.0.3-0-g77aa89e
[0ac8f670] main libvlc debug: configured with ../extras/package/win32/../../../configure  '--enable-update-check' '--enable-lua' '--enable-faad' '--enable-flac' '--enable-theora' '--enable-twolame' '--enable-quicktime' '--enable-avcodec' '--enable-merge-ffmpeg' '--enable-dca' '--enable-mpc' '--enable-libass' '--enable-x264' '--enable-schroedinger' '--enable-realrtsp' '--enable-live555' '--enable-dvdread' '--enable-shout' '--enable-goom' '--enable-caca' '--disable-portaudio' '--disable-sdl' '--enable-qt4' '--enable-skins2' '--enable-sse' '--enable-mmx' '--enable-libcddb' '--enable-zvbi' '--disable-telx' '--enable-sqlite' '--disable-dirac' '--host=i586-mingw32msvc' '--enable-crystalhd' 'host_alias=i586-mingw32msvc'
[0ac8f670] main libvlc debug: searching plug-in modules
[0ac8f670] main libvlc debug: loading plugins cache file E:\Work\Local_WorkingCopy\VidTest\plugins\plugins.dat
[0ac8f670] main libvlc debug: recursively browsing `E:\Work\Local_WorkingCopy\VidTest\plugins'
[0ac8f670] main libvlc debug: saving plugins cache E:\Work\Local_WorkingCopy\VidTest\plugins\plugins.dat
[0ac8f670] main libvlc debug: plug-ins loaded: 388 modules
[0ac8f670] main libvlc debug: translation test: code is "C"
[0ac8f670] main libvlc debug: CPU has capabilities MMX MMXEXT SSE SSE2 SSE3 SSSE3 SSE4.1 SSE4.2 FPU 
[0ac8f670] main libvlc debug: looking for memcpy module: 4 candidates
[0ac8f670] main libvlc debug: using memcpy module "memcpymmxext"
[0c680ab8] main interface debug: looking for interface module: 1 candidate 
```

有人可以指出这段代码中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T17:06:05.640

它在没有
`libvlc_media_player_set_hwnd`和的情况下工作吗`libvlc_media_player_set_xwindow`

如果您不进行手动调用，Libvlc 会自动生成一个窗口。这就是您如何确定它是否是 libvlc 问题。

再见达里安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-29T00:51:06.467

这是我的代码示例，它工作正常：

```
const char *const vlc_args [] = {
        "--verbose=3"   //be much more verbose then normal for debugging purpose
        ,"--quiet"
    };

    instance         = libvlc_new (sizeof(vlc_args) / sizeof(vlc_args[0]), vlc_args);
    player           = libvlc_media_player_new (instance);
    ...

    libvlc_media_player_set_hwnd (player, reinterpret_cast<HWND> (winId));
    QByteArray temp  = url.toEncoded ();
    const char *path = temp.constData ();
    media            = libvlc_media_new_location (instance, path);
    libvlc_media_player_set_media (player, media);
    int res          = libvlc_media_player_play (player); 
```

# ms-access - 我的代码有什么问题？为什么我不能将“0”分配给从数据库中检索的数据

> ID：12778920
> 
> 赞同：0
> 
> 时间：2012-10-08T09:31:50.010
> 
> 标签：ms-access, asp-classic, vbscript

由于在数据库中有一些记录的值为 Null，因此创建此代码以过滤在“rsActQty”或“rsSumQty”中未分配值的记录集。但是，无论我尝试什么，似乎这段代码都无法检测到 Null 值。而且我不知道我做错了什么。那你能给我一些建议吗？谢谢你。（这个数据库在 MSACCESS 中）

我想要的是： - 仅显示在“rsActQty”或“rsSumQty”中具有价值的记录。- 当此字段之一为 NULL 时，为其分配“0”。

```
<%
if Rs.eof then 
    response.write "<tr><td colspan=""6"">&nbsp;"
    call displayNotFoundRecord
    response.write "</td></tr>"
Else

Dim ActQty, sumQty, Total, rsActQty, rsSumQty, rsPdtn_qty_est, inv_date, res_date
    Do while Rs.AbsolutePage = strPageCurrent And Not Rs.EOF

        inv_id = rs.fields.item("inv_idRS")
        rsActQty = rs.fields.item("sumOfinv_qty_act")
        rsSumQty = rs.fields.item("SumOfres_qty")
        rsPdtn_qty_est = rs.fields.item("SumOfpdtn_qty_est")
        inv_date = rs.fields.item("inv_dateRS")
        res_date = rs.fields.item("res_dateRS")

            if rsActQty = "" then 
                ActQty = 0
            else
                ActQty = rsActQty
            end if

            if rsSumQty = "" then
                sumQty = 0
            else
                sumQty = rsSumQty
            end if 

        if rsActQty <> "" OR rsSumQty <> "" then

                if inv_date = "" then
                    dateshow = res_date
                else
                    dateshow =  inv_date
                end if

                if res_date = "" then
                    dateshow = res_date
                else
                    dateshow = res_date
                end if

                total = rs.fields.item("Total")
%>

<tr class='difcursor'> 
<td class="btline" width="25" align="center"><input type="checkbox" name="inv_id" value="<%=inv_id%>" onClick="highlightRow(this,'#FFFFCC','#EFF4FA');"></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=rs.fields.item("pd_id")%> </td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=rs.fields.item("pd_name")%></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=PcsToDz(ActQty)%></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%'=PcsToDz(rs.fields.item("SumOfpdtn_qty_est"))%></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=dateshow%></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=PcsToDz(sumQty)%></td>
<td class="btline" <%=genLink(inv_id)%> nowrap style="padding-right: 10px">&nbsp;<%=PcsTODz(Total)%></td>
<td class="btline"></td>
</tr>

<%
        end if

        Rs.movenext
    Loop
End if
Rs.close
set Rs=nothing
Call DBConnClose()
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:49:37.323

尝试使用 isNull 函数。例如

```
if not isNull(rs.fields.item("sumOfinv_qty_act")) then 
    ActQty = rs.fields.item("sumOfinv_qty_act")
else
    ActQty = 0
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T10:02:21.313

Null 与空白值不同。

您可以尝试将 null 强制为字符串并进行比较：

```
 rsActQty = "" & rs.fields.item("sumOfinv_qty_act")
    rsSumQty = "" & rs.fields.item("SumOfres_qty") 
```

您还可以在 sql 查询中处理 null ，例如：

```
select iif(isnull(fieldname),0,fieldname) as fieldname from table 
```

这将为空值返回 0。

# rest - 查询 DNS 并连接到现有虚拟机

> ID：12778921
> 
> 赞同：0
> 
> 时间：2012-10-08T09:31:52.523
> 
> 标签：rest, azure

在我当前的代码库中，当我创建 VM 时，DNS 名称被动态设置为与实例名称相同。例如，如果我的 VM 名称是“anandInstance”，则该名称的 DNS 名称将生成为“anandInstance.cloudapp.net”。有没有办法在创建过程中通过 REST API 更改 DNS 名称，如“dns1.cloudapp.net”？

```
"Connect to existing VM" , is it possible to achieve this option through REST call? In case "connect to existing.." option , we are getting a list of vms/services to choose and VM is getting created successfully. How to achieve the same using API. 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:26:00.363

> 在我当前的代码库中，当我创建 VM 时，DNS 名称被动态设置为与实例名称相同。例如，如果我的 VM 名称是“anandInstance”，则该名称的 DNS 名称将生成为“anandInstance.cloudapp.net”。有没有办法在创建过程中通过 REST API 更改 DNS 名称，如“dns1.cloudapp.net”？

我不认为这是可能的。想象一下，如果您能够这样做，门户中的噩梦会变成什么样？您如何将云服务 (whatever.cloudapp.net) 链接到实际部署 (MyDemoVm123)。但是，您可以使用自己的域并让 CNAME 记录指向您的“want-to-change-for-some-reason.cloudapp.net”（坦率地说，我肯定认为很快我们将使用更长的名称）

> “连接到现有虚拟机”，是否可以通过 REST 调用实现此选项？

与 VM 的连接本质上是打开 RDP 会话。如果是 Windows VM，您可以尝试使用[下载 RDP 文件](http://msdn.microsoft.com/en-us/library/windowsazure/jj157183.aspx)API 调用。获得文件后，只需使用“process.start”启动它。如果是 linux VM，只需从您拥有的云服务 DNS 名称在端口 22（或您定义的端口）上启动 SSH 客户端。

**更新**

> 从 azure 门户，对于独立机器选项，我们可以使用默认的 cloudoneapp.net 提供 dns 名称。如何通过其余的 api 调用来做同样的事情。是否有任何特定的参数来指定相同的？

当您使用 REST API 时，您首先[创建一个云服务（在 REST API 中仍称为托管服务）](http://msdn.microsoft.com/en-us/library/gg441304.aspx)，您的机器将在其中托管。在这里，您为该托管服务提供名称（`dns name with deafult cloudoneapp.net`）。然后调用[创建虚拟机部署](http://msdn.microsoft.com/en-us/library/jj157194)API 操作。

> 如果“连接到现有的..”选项，我们将获得一个可供选择的虚拟机/服务列表，并且虚拟机正在成功创建。如何使用 API 实现相同的功能。

当您想获取所有 VM[的列表时，只需获取所有托管服务的列表](http://msdn.microsoft.com/en-us/library/ee460781.aspx)，然后获取每个的属性并猜测它是 VM 还是云服务（可能通过[查询](http://msdn.microsoft.com/en-us/library/ee460806.aspx)每个服务的属性）。我看不到对虚拟机列表的直接访问。但由于这个功能是**PREVIEW**，未来可能会发生变化。

希望我的回答清楚吗？

# google-drive-api - 如何使用 google drive API 移动文件和文件夹？

> ID：12778925
> 
> 赞同：23
> 
> 时间：2012-10-08T09:32:10.803
> 
> 标签：google-drive-api

我正在尝试使用 Google drive API 来执行简单的任务，例如

1.  跨文件夹移动文件。
2.  项目清单

移动文件夹。

据我所知，Google drive API 没有提供跨文件夹移动文件的方法。

可以使用 /parent 和 /children API 指定文件的父文件夹，但它不适用于文件夹。此外，与文件关联的父属性不会将其移动到该文件夹​​下。它只是将父属性与文件相关联（这对我的情况根本没有用）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2016-06-17T12:04:00.607

Drive API V3 有这个：

> **在文件夹之间移动文件**
> 
> 要为现有文件添加或删除父级，请在 files.update 方法上使用`addParents`和查询参数。`removeParents`
> 
> 这两个参数都可用于将文件从一个文件夹移动到另一个文件夹： [https ://developers.google.com/drive/v3/web/folder#inserting_a_file_in_a_folder](https://developers.google.com/drive/v3/web/folder#inserting_a_file_in_a_folder)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T10:05:10.927

要将 FILE-A 从 FOLDER-1 移动到 FOLDER-2，您可以使用[https://developers.google.com/drive/v2/reference/parents](https://developers.google.com/drive/v2/reference/parents)上的删除和添加调用来删除 FOLDER-1 作为父级并添加文件夹-2。

您还可以使用更新的父数组对文件进行修补。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-15T10:53:28.353

[这是使用Patch](https://developers.google.com/drive/v2/reference/files/patch)和[PHP 客户端库](https://developers.google.com/drive/downloads)将文件移动到新文件夹的一步方法：

```
/**
 * Move a file.
 *
 * @param Google_Service_Drive_DriveFile $service Drive API service instance.
 * @param string $fileId ID of the file to move.
 * @param string $newParentId Id of the folder to move to.
 * @return Google_Service_Drive_DriveFile The updated file. NULL is returned if an API error occurred.
 */
function moveFile($service, $fileId, $newParentId) {
  try {
    $file = new Google_Service_Drive_DriveFile();

    $parent = new Google_Service_Drive_ParentReference();
    $parent->setId($newParentId);

    $file->setParents(array($parent));

    $updatedFile = $service->files->patch($fileId, $file);

    return $updatedFile;
  } catch (Exception $e) {
    print "An error occurred: " . $e->getMessage();
  }
} 
```

**更新：**如果您想使用 Drive API v3，请使用[此处记录的](https://developers.google.com/drive/v3/web/folder#moving_files_between_folders)以下代码：

```
/**
 * Move a file.
 *
 * @param Google_Service_Drive_DriveFile $service Drive API service instance.
 * @param string $fileId ID of the file to move.
 * @param string $newParentId Id of the folder to move to.
 * @return Google_Service_Drive_DriveFile The updated file. NULL is returned if an API error occurred.
 */
function moveFile($service, $fileId, $newParentId) {
  try {

    $emptyFileMetadata = new Google_Service_Drive_DriveFile();
    // Retrieve the existing parents to remove
    $file = $service->files->get($fileId, array('fields' => 'parents'));
    $previousParents = join(',', $file->parents);
    // Move the file to the new folder
    $file = $service->files->update($fileId, $emptyFileMetadata, array(
      'addParents' => $newParentId,
      'removeParents' => $previousParents,
      'fields' => 'id, parents'));

    return $file;
  } catch (Exception $e) {
    print "An error occurred: " . $e->getMessage();
  }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-12T16:53:45.040

您实际上仍然可以一步完成，只需在 Javascript 中设置请求即可：

身体必须有：

```
body.parents = [{ 'id': parentId }]; 
```

请求应该是：

```
var request = gapi.client.request({
  'path': 'drive/v2/files/'+fileId,
  'method': 'PUT',
  'params': {'uploadType': 'multipart', 'alt': 'json'}, 
  'headers': { 
    'Authorization': TOKEN
  },
  'body': body
}); 
```

然后执行：

```
request.execute(function(resp) { }); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-14T23:13:23.567

此示例代码使用 Google Drive API v3。

Gfk = Google 文件密钥（可以是文件或文件夹的 id）。

方法：

*   **移动到**| 将文件/文件夹从其第一个父文件夹移动到给定的目标文件夹。文件/文件夹从其原始的第一个父文件夹中删除；
*   **addParents**和**removeParents** | 仅添加或删除一个或移动父母。**addParents**不会删除任何原始父级，只会添加。

```
class Gfiles {
    private $service;

    public function setService(\Google_Client $client) : self {
        $this->service = (new \Google_Service_Drive($client))->files;
        return $this;
    }

    public function moveTo(string $gfk, string $to_gfk) : \Google_Service_Drive_DriveFile {
        $body = new \Google_Service_Drive_DriveFile();
        // Gets the first parent. You should further implement this if you wish a different behaviour.
        $from_gfk = $this->service->get($gfk, ['fields' => 'parents'])->parents[0];

        $this->service->update($gfk, $body, ['addParents' => $to_gfk]);
        $this->service->update($gfk, $body, ['removeParents' => $from_gfk]);
        return $this->service->get($gfk, ['fields' => 'parents']);
    }

    /**
     * $parents_gfk expects an array like ['gfk parent 1', 'gfk parent 2'].
     */
    private function updateParents(string $method, string $gfk, array $parents_gfk) : \Google_Service_Drive_DriveFile {
        $body = new \Google_Service_Drive_DriveFile();
        $parents = join(',', $parents_gfk);

        $this->service->update($gfk, $body, [$method => $parents]);
        return $this->service->get($gfk, ['fields' => 'parents']);
    }

    public function addParents(string $gfk, array $parents_gfk) : \Google_Service_Drive_DriveFile {
        return $this->updateParents('addParents', $gfk, $parents_gfk);
    }

    public function removeParents(string $gfk, array $parents_gfk) : \Google_Service_Drive_DriveFile {
        return $this->updateParents('removeParents', $gfk, $parents_gfk);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-12T10:04:11.563

我用过这段代码：

```
 File file =  driveService.files().get(fileId).execute()
        File targetFolder = driveService.files().get(folderId).execute()
        ParentReference newParent = new ParentReference()
        newParent.setSelfLink(targetFolder.getSelfLink())
        newParent.setParentLink(targetFolder.parents[0].getSelfLink())
        newParent.setId(folderId)
        newParent.setKind(targetFolder.getKind())
        newParent.setIsRoot(false)
        def parentsList = new ArrayList<ParentReference>()
        parentsList.add(newParent)
        file.setParents(parentsList)
        File updatedFile = driveService.files().update(fileId, file).execute() 
```

# java - java.util.ServiceLoader 是如何工作的？

> ID：12778934
> 
> 赞同：0
> 
> 时间：2012-10-08T09:32:41.417
> 
> 标签：java

```
ServiceLoader<A> xyz = ServiceLoader.load(A.class);

xyz.iterator().hasNext() ------> returning false ; 
```

我在“META-INF/services/”中有一个名为 A 的文本文件，其中包含扩展 A 的类的名称。

现在为什么它返回 false 。

谁能解释一下这是如何工作的以及我可能缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:21:49.127

包括文件名和内容的包名。

```
META-INF/services/package.A 
```

包括

```
package.Aimpl
package.A2impl
package.A3impl 
```

# algorithm - 冒泡排序性能

> ID：12778941
> 
> 赞同：0
> 
> 时间：2012-10-08T09:33:03.803
> 
> 标签：algorithm, sorting, bubble-sort

如果冒泡排序需要 200 秒来对 200 个名称进行排序，那么它可以在 800 秒内排序多少个项目？

计算比较次数可以为我们提供解决方案。我们如何计算对 200 个名称进行排序所需的比较次数？我们必须考虑最好的情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:38:24.847

1.  冒泡排序是 O(n ² )。做你的数学。Big O 只是给出了一个相对时间的概念，你可以猜测大概的时间。不准确。
2.  BubbleSort 第一次进行 n-1 次比较，第二次进行 n-2 次比较，以此类推。所以你有总`(n-1) + (n-2) + .. +1`。再做一些数学？
3.  ~~冒泡排序太可悲了，没有最好的情况！~~^([1])

（显然你可以编写一个智能冒泡排序，它不对已经排序的数组进行排序）

```
BUBBLESORT A
 for i = 1 to A.length 1
  for j = A.length downto i+1
    if A[j]  < A[j - 1]
     exchange A[j] with A[j-1] 
```

来自算法简介 - CLRS

* * *

[1] 在#3。请参阅[http://en.wikipedia.org/wiki/Bubble_sort](http://en.wikipedia.org/wiki/Bubble_sort)它提到了一个优化的内部循环，该循环识别了已排序的剩余数组并做出了最佳情况 O(n) - 对此感到抱歉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:23:19.273

800 是 4 x 200。冒泡排序是 O(n*n)，因此平均而言，您可以在 4 倍的时间内对两倍数量的项目进行排序，因此如果 200 是一个平均情况，那么平均预期是 400 个名称。

# iphone - 延迟加载来自 url iphone 的视频

> ID：12778946
> 
> 赞同：0
> 
> 时间：2012-10-08T09:33:18.267
> 
> 标签：iphone, video, lazy-loading

我必须在表格单元格上显示视频中的缩略图。

视频来自 URL，我需要延迟加载从 iPhone 捕获的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:53:53.663

看看[这个](https://stackoverflow.com/a/4330647/251513)SO 答案，或者使用MPMoviePlayerController 的[thumbnailImageAtTime:](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html#//apple_ref/occ/instm/MPMoviePlayerController/thumbnailImageAtTime:timeOption:) [timeOption](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)方法。
对于单元格的延迟加载，您可以在[UITableViewDelegate的](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)[willDisplayCell](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:willDisplayCell:forRowAtIndexPath:)回调中加载缩略图，以便在创建单元格后加载/显示缩略图（您可以在 AppStore 应用程序中看到类似的行为）。还请记住，您必须以异步方式下载视频，以免阻塞主线程。

# cuda - cuda内存对齐

> ID：12778949
> 
> 赞同：16
> 
> 时间：2012-10-08T09:33:38.470
> 
> 标签：cuda

在我的代码中，我使用结构来促进将参数传递给函数（我不使用结构数组，而是使用一般的数组结构）。当我在 cuda-gdb 中并检查内核中的点时，我将值赋予一个简单的结构，例如

```
struct pt{
int i;
int j;
int k;
} 
```

即使我没有做一些复杂的事情，而且很明显成员应该有指定的价值观，我得到......

> 询问堆栈的位置 0，堆栈上只有 0 个元素。

所以我在想，即使它不是一个数组，也可能那时内存的对齐存在问题。所以我将头文件中的定义更改为

```
struct __align__(16) pt{
int i;
int j;
int k;
} 
```

但是，当编译器尝试编译使用相同定义的主机代码文件时，会出现以下错误：

> 错误：在数字常量之前需要不合格的 id 错误：在数字常量之前需要')' 错误：在';'之前需要构造函数、析构函数或类型转换 令牌

那么，我应该对主机和设备结构有两种不同的定义吗？？？

此外，我想问一下如何概括对齐的逻辑。我不是计算机科学家，因此编程指南中的两个示例无法帮助我了解全局。

比如下面这两个应该怎么对齐？或者，应该如何对齐具有 6 个浮点数的结构？还是4个整数？同样，我没有使用这些数组，但我仍然在内核或_*设备*_函数中使用这些结构定义了许多变量。

```
struct {
    int a;
    int b;
    int c;
    int d;
    float* el;    
} ;

 struct {
    int a;
    int b
    int c
    int d
    float* i;
    float* j;
    float* k;
} ; 
```

提前感谢您的任何建议或提示

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T10:21:56.270

这个帖子有很多问题。由于 CUDA 编程指南在解释 CUDA 中的对齐方面做得很好，我将仅解释一些在指南中不明显的内容。

首先，你的主机编译器给你错误的原因是因为主机编译器不知道是什么`__align(n)__`意思，所以它给出了一个语法错误。您需要在项目的标题中添加以下内容。

```
#if defined(__CUDACC__) // NVCC
   #define MY_ALIGN(n) __align__(n)
#elif defined(__GNUC__) // GCC
  #define MY_ALIGN(n) __attribute__((aligned(n)))
#elif defined(_MSC_VER) // MSVC
  #define MY_ALIGN(n) __declspec(align(n))
#else
  #error "Please provide a definition for MY_ALIGN macro for your host compiler!"
#endif 
```

> 那么，我应该对主机和设备结构有两种不同的定义吗？

不，只需使用`MY_ALIGN(n)`，就像这样

```
struct MY_ALIGN(16) pt { int i, j, k; } 
```

> 比如下面这两个应该怎么对齐？

首先，`__align(n)__`（或任何主机编译器风格），强制结构的内存开始于内存中多个`n`字节的地址。如果结构的大小不是 的倍数`n`，则在这些结构的数组中，将插入填充以确保每个结构正确对齐。要为 选择适当的值`n`，您希望最小化所需的填充量。如编程指南中所述，硬件要求每个线程读取与 1、2、4、8 或 16 字节对齐的字。所以...

```
struct MY_ALIGN(16) {
  int a;
  int b;
  int c;
  int d;
  float* el;    
}; 
```

在这种情况下，假设我们选择 16 字节对齐。在 32 位机器上，指针占用 4 个字节，因此结构占用 20 个字节。16 字节对齐会浪费`16 * (ceil(20/16) - 1) = 12`每个结构的字节数。在 64 位机器上，由于 8 字节指针，每个结构只会浪费 8 个字节。我们可以通过使用`MY_ALIGN(8)`来减少浪费。权衡是硬件将不得不使用 3 个 8 字节加载而不是 2 个 16 字节加载来从内存加载结构。如果您没有受到负载的限制，这可能是一个值得权衡的选择。请注意，您不想为此结构对齐小于 4 个字节。

```
struct MY_ALIGN(16) {
  int a;
  int b
  int c
  int d
  float* i;
  float* j;
  float* k;
}; 
```

在这种 16 字节对齐的情况下，在 32 位机器上每个结构仅浪费 4 个字节，在 64 位机器上浪费 8 个字节。它需要两个 16 字节的加载（或 64 位机器上的 3 个）。如果我们对齐到 8 个字节，我们可以通过 4 字节对齐（在 64 位机器上为 8 个字节）完全消除浪费，但这会导致负载过大。再次，权衡。

> 或者，应该如何对齐具有 6 个浮点数的结构？

同样，权衡：每个结构浪费 8 个字节或每个结构需要两次加载。

> 还是4个整数？

这里没有权衡。`MY_ALIGN(16)`.

> 同样，我没有使用这些数组，但我仍然在内核或_设备_函数中使用这些结构定义了许多变量。

嗯，如果您不使用这些数组，那么您可能根本不需要对齐。但是你是如何分配给他们的？正如您可能看到的那样，所有这些浪费都是值得担心的——这是另一个支持数组结构而不是结构数组的好理由。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-21T18:50:45.193

现在，您应该使用 C++11[`alignas`说明符](http://en.cppreference.com/w/cpp/language/alignas)`g++`（包括与当前 CUDA 兼容的版本）和 IIANM支持的说明符`nvcc`。这应该使您无需求助于宏。

# eclipse - 在插件项目中集成 EMF 和视图

> ID：12778952
> 
> 赞同：0
> 
> 时间：2012-10-08T09:33:52.870
> 
> 标签：eclipse, emf

我创建了一个 EMF 项目并使用由 .genmodel 文件生成的 <>.editor 项目进行测试，方法是通过“示例 EMF 模型创建向导”创建一个新项目和一个文件。有什么方法可以直接创建视图（在插件项目中）（可能在用户运行应用程序时自动创建项目和文件）？我不希望用户创建这些东西。它应该是自动化的并在视图中呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T03:58:38.270

在 .genmodel 文件中，将 .genmodel --> All ---> Runtime Platform 设置为 RCP。这将创建一个不使用 IDE 的所有插件的 RCP 应用程序。如果需要，您可以生成要在 IDE 中运行的应用程序......但是，对于这个答案，我将简化并假设您生成了一个 RCP 应用程序。进入 XXX.editor 生成的插件，进入 .plugin 文件 --> 扩展。通过声明一个新的视图扩展来添加一个新的 (org.eclipse.ui.views) 视图——请参阅示例视图以获取模板。确保跟踪您为这个新的 View 扩展提供的 ID。同样添加一个新的 PerspectiveExtension 扩展。使用您的唯一视图 ID 添加对这个新 PerspectiveExtension 的引用。在 View 扩展中，单击类链接，这将创建一个骨架 ViewPart 类。放置一个 public static final String YOUR_VIEW_ID = "com.

这将使您开始，如果您将新视图添加到您的透视图中，则在运行基于 EMF 的 RCP 应用程序时它应该是可见的。

# objective-c - 预处理器语句的排序给了我警告？

> ID：12778957
> 
> 赞同：2
> 
> 时间：2012-10-08T09:34:12.137
> 
> 标签：objective-c, cocoa

我有如下代码

**应用程序设置.h**

FOUNDATION_EXPORT BOOL *const TEST_MODE;

**应用程序设置.m**

#ifdef DEBUG
BOOL *const TEST_MODE = YES;
#else
BOOL *const TEST_MODE = NO;
＃万一

上面 .m 文件的代码给了我这个警告

```
Incompatible integer to pointer conversion initializing 'BOOL *const' 
(aka 'signed char *const') with an expression of type 'signed char'; 
```

但是，如果我把它改成这样

#ifdef DEBUG
BOOL *const TEST_MODE = NO;
#else
BOOL *const TEST_MODE = YES;
＃万一

它工作得很好，没有任何警告。

你知道这怎么会发生吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:39:18.590

你真的打算写一个值：

```
FOUNDATION_EXPORT const BOOL TEST_MODE; 
```

…<code>BOOL 不是一个 objc 对象，它是一个`signed char`.

就错误而言，编译器会抱怨，因为您正在为指针值分配数值——其中只有`0`(aka `NULL`) 是编译器可以接受的，而任何其他数字 ( `YES`is `1`) 都会产生错误/警告。

PS 只需使用`bool`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:14:36.257

只是为了更详细地解释：

> 不兼容的整数到指针的转换……</p>

您尝试将整数值（数字）转换为指针。这可以做到，但这通常是一个坏主意，因此需要高度的明确性。偶然很难做到（现在/在这个编译器上），这是有原因的。

> … 初始化 ' `BOOL *const`' (aka ' `signed char *const`') …</p>

这是您声明的变量类型。正如这部分消息所解释的那样，`BOOL`也称为`signed char`（即，一个是`typedef`另一个）。

`char`是 C 中最小的整数类型，因此您已声明此变量以保存指向整数的指针。

> … 带有“signed char”类型的表达式；

在这种情况下，表达式是您声明中的初始化程序。这是您在声明的两个版本之间更改的部分：`YES`在一种情况下，`NO`在另一种情况下。

Objective-C 头文件定义`NO`为 0 和`YES`1，两者都强制转换为`BOOL`（如上所述，定义为`signed char`）。

所以：

*   您的初始化程序是一个`BOOL`值（正如贾斯汀正确指出的那样，`BOOL`没有`*`），它是一个整数。
*   您的变量包含一个`BOOL *`—a 指针。
*   编译器不会让它飞，除非你非常明确地表明这是你想做的事情。
*   即使您确实说服编译器同意这一点，它也不是正确的代码。

正如贾斯汀已经建立的那样，您应该省略`*`. 这会将变量声明为持有一个`BOOL`值，而不是一个指针。

我也支持他使用的建议`bool`。与 不同`BOOL`，a`bool`永远不能是除`true`(1) 或`false`(0) 之外的任何值，除非您*非常*努力。

# tridion - 如何使用核心服务设置多媒体链接字段？

> ID：12778958
> 
> 赞同：4
> 
> 时间：2012-10-08T09:34:12.533
> 
> 标签：tridion, tridion-2011

我想使用核心服务为组件元数据设置多媒体链接。

我正在尝试如下所示，出现 xml 验证错误。你能帮忙吗？

```
 ComponentData comp = client.Read(compid, readoption) as ComponentData;
        comp = client.TryCheckOut(compid, readoption) as ComponentData;

        string newxml = @"<Metadata xmlns=""uuid:5880d67f-13f7-4632-8c33-dcfd9c1437ed"">
                          <meta>
                          <mmlink>tcm:22-5678</mmlink>        

                          </metad>
                          </Metadata>";

        comp.Metadata = newxml;

        client.Save(comp, readoption);
        client.CheckIn(comp.Id, readoption); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T09:39:18.833

你应该`xlink:href`在这里设置：

```
<mmlink xlink:type="simple" xlink:href="tcm:2-146" 
        xmlns:xlink="http://www.w3.org/1999/xlink"></mmlink> 
```

解决此类问题的最简单方法是创建一个包含相关字段和相应组件的组件模式。然后，您将通过探索组件 XML 找到答案

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T00:37:53.133

多媒体链接的方法与组件链接的方法相同。它也适用于内容和元数据字段：此示例在文件夹元数据中设置 mm 组件链接，其中 md 模式包含一个名为“versioned_component”的可嵌入字段，其中包含一个名为“component”的字段，这是一个多媒体组件链接字段：

```
this.OpenSession();
try
{
    //itemUri is the MM Component uri
    var currentItem = (ComponentData)session.Read(itemUri, new ReadOptions());
    LinkToRepositoryData ltrd = currentItem.LocationInfo.ContextRepository;
    var pd = (PublicationData)session.Read(ltrd.IdRef, new ReadOptions());
    String currentPublicationWebdavURL = pd.LocationInfo.WebDavUrl;
    String schemaUri = string.Format(FOLDER_MD_SCHEMA_WEBDAVURL, 
                          HttpUtility.UrlDecode(currentPublicationWebdavURL));

    //schemaUri = HttpUtility.UrlEncode(schemaUri);
    var sd = (SchemaData)session.Read(schemaUri, new ReadOptions());
    FolderData folder = new FolderData();
    folder.Id = TcmUri.UriNull;
    folder.Title = "hidden_" + Guid.NewGuid().ToString();
    var rootFolder = (FolderData)session.Read(
                            currentItem.LocationInfo.OrganizationalItem.IdRef, 
                            new ReadOptions());
    folder.LocationInfo= new LocationInfo()
    {
        OrganizationalItem = new LinkToOrganizationalItemData(){
            IdRef = rootFolder.Id
        }
    };
    folder.MetadataSchema = new LinkToSchemaData()
    {
        IdRef = sd.Id,
    };
    string sMetadata = "<Metadata xmlns=\"{0}\" xmlns:xlink=\"{1}\"> " 
                     + "  <version_component>" 
                     + "    <component xlink:type=\"simple\" " 
                     + "          xlink:href=\"{2}\" xlink:title=\"{3}\" />" 
                     + "  </version_component> " 
                     + "</Metadata>";
    sMetadata = string.Format(sMetadata, sd.NamespaceUri, 
                              Tridion.Constants.XlinkNamespace, 
                              currentItem.Id.ToString(), currentItem.Title);
    folder.Metadata = sMetadata;
    folderUri = session.Save(folder, new ReadOptions()).Id.ToString();
    return folderUri;
}
finally {
    this.CloseSession();
} 
```

希望这也有帮助，

# android - 如何在 Android 中从选项卡通话记录开始？

> ID：12778959
> 
> 赞同：0
> 
> 时间：2012-10-08T09:34:25.357
> 
> 标签：android, android-intent

我将 Action_Dial 称为：

```
Intent callIntent = new Intent(Intent.ACTION_DIAL);
callIntent.setData(Uri.parse("tel:"));
startActivity(callIntent); 
```

它显示带有 4 个选项卡的屏幕：电话、通话记录、联系人、收藏夹。但它从标签电话开始。我想从标签通话记录开始。你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T09:36:07.833

试试这个。

```
Intent showCallLog = new Intent();
showCallLog.setAction(Intent.ACTION_VIEW);
showCallLog.setType(CallLog.Calls.CONTENT_TYPE);
context.startActivity(showCallLog); 
```

它将打开通话记录屏幕。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T10:04:13.423

尝试下面的代码直接通过意图打开通话记录屏幕...

```
Intent intent = new Intent();
intent.setAction( Intent.ACTION_VIEW );
intent.setType("vnd.android.cursor.dir/calls");
startActivity(intent); 
```

# asp.net - 单元格表内的 ImageButton 不起作用

> ID：12778960
> 
> 赞同：1
> 
> 时间：2012-10-08T09:34:27.003
> 
> 标签：asp.net, html-table, imagebutton, page-lifecycle

如果我`ImageButton`动态创建并将其添加到表格单元格中

```
TableRow tr = new TableRow();
TableCell tc = new TableCell();
ImageButton imagebutton= new ImageButton();
imagebutton.imageurl=imageurl;
imagebutton.click+= new System.Web.UI.ImageClickEventHandler(click);
tc.Controls.Add(imagebutton);
tr.Controls.Add(tc);
Table1.Rows.Add(tr); 
```

点击事件不起作用。

但是，如果我使用`Panel`而不是 table`imagebutton`作品。Morevoer 如果我`page`直接将图像按钮添加到它也可以。但我需要存储`imagebutton`在`table cell`.

什么是问题？如何让工作`imagebutton`在里面`asp table`？

点击的方法是：

```
protected void click(object sender, EventArgs e)
{
      Response.Write("<script type='text/javascript'>alert('OK!');</script>"); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:43:20.763

> 什么是问题？

这似乎是一个经典的**asp.net 页面生命周期**问题。原因可能是，在应该处理单击的时间，您的按钮以及您的表格不存在，因为您在页面生命周期的后期创建它（例如在 pre_render 中），或者您只在未打开时创建回发，或在另一个控件事件处理程序中。

> 如何在asp表中制作工作图像按钮？

您的表格和按钮创建以及单击处理程序绑定应位于

page_load（更好的是，在 Init 中，当使用 view_state 进行动态控件时）

无论是否在回发，代码都应该运行。

希望这会有所帮助

# drupal-7 - Drupal 7 菜单项在一个会话中调用了两次

> ID：12778962
> 
> 赞同：1
> 
> 时间：2012-10-08T09:34:29.710
> 
> 标签：drupal-7

Drupal 开发人员，

我有一个非常奇怪的问题。我有一个带有菜单项的小模块，它输出图像 - 换句话说，它不显示任何页面、任何 HTML 或其他任何内容，而只是发送 a`header('Content-Type: image/png');`然后输出 PNG 并退出`exit();`

但是......这真的很奇怪......有时即使我只加载一次URL，它也会运行两次并通过函数两次。如果我在函数中添加一个看门狗并检查日志后记，我可以看到该函数已经被处理了两次......有时。没有明显的原因，它偶尔会按预期工作 - 一次通过，一张图像输出，然后什么也没有，但在其他时候它会运行两次。

如果我在数据库中添加一个增加一个数字的计数器，这个数字有时会增加 1，有时会增加 2，尽管我只在浏览器中加载了一次图像。

我已经在两台服务器（一台 Unix，一台 Windows）上对其进行了测试......同样的不稳定行为。

我一直关注标头和缓存，但看不出有什么问题。当我输出 1x1 PNG 时，图像的标题如下所示：

```
Date: Thu, 04 Oct 2012 09:21:51 GMT
Server: Apache/2.2.22 (Win32) PHP/5.2.17
X-Powered-By: PHP/5.2.17
Expires: Sun, 19 Nov 1978 05:00:00 GMT
Last-Modified: Thu, 04 Oct 2012 09:21:51 +0000
Cache-Control: no-cache, must-revalidate, post-check=0, pre-check=0
Etag: "1349342511"
Content-Length: 95
Keep-Alive: timeout=5, max=100
Connection: Keep-Alive
Content-Type: image/png

200 OK 
```

如果我在这里和那里添加看门狗，我可以看到模块初始化不止一次，这并不奇怪，但我的自定义函数被多次调用真的让我感到惊讶——而且只是有时。我尝试了各种魔术，比如添加一个会话变量来计算第一次之后的通过和中断次数，但无济于事。该函数运行不止一次......大部分时间。

对于函数的目的来说，它总是运行一次且只运行一次是至关重要的。

有人知道发生了什么吗？

这是我的基本代码：

```
function my_image_menu() {
  $items = array();
  $items['image_1x1'] = array(
    'title' => t('Create image'),
    'description' => t('Output 1x1 PNG.'),
    'page callback' => 'my_image_show',
    'access arguments' => array('access content'),
  );

  return $items;
}

function my_image_show() {
  watchdog('My Image', 'Image shown');
  if (!headers_sent()) {
    header('Content-Type: image/png');
    echo base64_decode('iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=');
    exit();
  }
} 
```

如果我加载`http://mysite/image_1x1`，我会按预期在屏幕上看到一个漂亮的 1x1 小点，但大多数时候（但不是每次......）我会在日志中看到两个“显示的图像”条目！尽管 ,`exit()`据我所知应该停止脚本。

Drupal 可能会对我做什么巫术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:04:47.740

我通过不在代码中输出图像而是通过标题命令将浏览器发送到物理图像文件来部分解决了这个问题。

这似乎破坏了 Drupal 中的任何流程并按预期渲染图像一次。唯一的缺点是我不能只生成任何图像，而是必须在物理上拥有它，但这是我可以克服的障碍。

换句话说，替换

```
 if (!headers_sent()) {
    header('Content-Type: image/png');
    echo base64_decode('iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=');
    exit();   } 
```

和

```
 if (!headers_sent()) {
    header('location:/sites/default/files/1px.png');
  } 
```

在我的问题中的代码中，并确保 /sites/default/files/1px.png 在服务器上。

这现在对我有用，但我仍然很高兴知道什么可以阻止我猜是 Drupal 对`exit()`or`die()`命令的处理。

马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:50:37.903

也许这个，也许不是！--- watchdog() 和 exit() 都向日志报告。您的 watchdog() 不是有条件的 - 所以它总是会记录。您的 exit() 处于条件状态，因此仅在满足条件时才会记录。这可以解释巫毒教。

尝试 die() 而不是 exit() 以获得更清晰的日志。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T12:55:15.330

也许你应该尝试在“干净”的浏览器上检查这个。试试不带任何扩展的 Firefox（不是 Chrome！）。添加

```
watchdog('My Image debug info', print_r($_SERVER, true)); 
```

并分析此输出。

# scala - `class A[_]` 有什么用？

> ID：12778963
> 
> 赞同：7
> 
> 时间：2012-10-08T09:34:44.940
> 
> 标签：scala, higher-kinded-types

符号的类型`class A[_]`或`def a[_](x: Any)`具有无法在正文中引用的类型参数，因此我看不出它在哪里有用以及它编译的原因。如果尝试引用此类型参数，则会引发错误：

```
scala> class A[_] { type X = _ }
<console>:1: error: unbound wildcard type
       class A[_] { type X = _ }
                             ^

scala> def a[_](x: Any) { type X = _ }
<console>:1: error: unbound wildcard type
       def a[_](x: Any) { type X = _ }
                                   ^ 
```

有人能告诉我这种类型在 Scala 中是否有用例吗？确切地说，我不是指类型参数中的存在类型或更高种类的类型，仅指`[_]`构成完整类型参数列表的那些小类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T20:48:18.437

我对这里的含义有一些随意的想法：

[https://issues.scala-lang.org/browse/SI-5606](https://issues.scala-lang.org/browse/SI-5606)

除了琐碎的用例，要求编译器编一个名字，因为我真的不在乎（虽然也许我稍后会在实现类时命名它），这个仍然让我觉得很有用：

> 另一个用例是不推荐使用类型参数，因为类型推断的改进使其变得多余。

```
trait T[@deprecated("I'm free","2.11") _, B <: S[_]] 
```

> 然后，假设，人们可以警告使用`T[X, Y]`但不是`T[_, Y]`。

尽管注释是在（值参数样式）之前还是之后（类型样式的注释）并不明显。

[编辑：“为什么它编译”：`case class Foo[_](i: Int)`在 2.9.2 上仍然很好地崩溃]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T10:31:40.157

因为我没有得到我期望的答案，所以我把它带到了[scala-language](https://groups.google.com/forum/?fromgroups=#!topic/scala-language/9oo9zXW5ew8)。

我在这里粘贴来自 Lars Hupel 的答案（因此，所有学分都适用于他），这主要解释了我想知道的内容：

> 我要在这里试一试。我认为在谈论类型成员时，该功能的使用会变得很清楚。
> 
> 假设您必须实现以下特征：
> 
> ```
> trait Function {
>   type Out[In]
>   def apply[In](x: In): Out[In]
> } 
> ```
> 
> 这将是一个（通用）函数，其中返回类型取决于输入类型。一个例子：
> 
> ```
> val someify = new Function {
>   type Out[In] = Option[In]   def
>   apply[In](x: In) = Some(x)
> }
> 
> someify(3) res0: Some[Int] = Some(3) 
> ```
> 
> 到现在为止还挺好。现在，你将如何定义一个常量函数？
> 
> ```
> val const0 = new Function {
>   type Out[In] = Int
>   def apply[In](x: In) = 0
> }
> 
> const0(3) res1: const0.Out[Int] = 0 
> ```
> 
> （类型`const0.Out[Int]`等价于`Int`，但不是那样打印的。）
> 
> 注意 type 参数`In`实际上是如何不被使用的。因此，您可以使用以下方式编写它`_`：
> 
> ```
> val const0 = new Function {
>   type Out[_] = Int
>   def apply[In](x: In) = 0
> } 
> ```
> 
> 在这种情况下`_`，可以将其视为实际上无法引用的类型参数的名称。它是类型级别的函数，它不关心参数，就像值级别一样：
> 
> ```
> (_: Int) => 3 res4: Int => Int = <function1> 
> ```
> 
> 除了……</p>
> 
> ```
> type Foo[_, _] = Int
> <console>:7: error: _ is already defined as type _
>        type Foo[_, _] = Int 
> ```
> 
> 将其与以下内容进行比较：
> 
> ```
> (_: Int, _: String) => 3 res6: (Int, String) => Int = <function2> 
> ```
> 
> 所以，总而言之：
> 
> ```
> type F[_] = ConstType // when you have to implement a type member def
> foo[_](...) // when you have to implement a generic method but don't
>             // actually refer to the type parameter (occurs very rarely) 
> ```
> 
> 您提到的主要内容`class A[_]`是完全对称的，只是没有真正的用例。
> 
> 考虑一下：
> 
> ```
> trait FlyingDog[F[_]] { def swoosh[A, B](f: A => B, a: F[A]): F[B] } 
> ```
> 
> 现在假设你想`FlyingDog`为你的普通 old创建一个实例`class A`。
> 
> ```
> new FlyingDog[A] { ... }
> // error: A takes no type parameters, expected: one
> // (aka 'kind mismatch') 
> ```
> 
> 有两种解决方案：
> 
> 1.  `class A[_]`改为声明。（不要那样做。）
>     
>     
> 2.  使用类型 lambda：
>     
>     
>     
>     ```
>     new FlyingDog[({ type λ[α] = A })#λ] 
>     ```
>     
>     
> 
> 甚至
> 
> ```
> new FlyingDog[({ type λ[_] = A })#λ] 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T11:54:18.467

Scala中的下划线表示存在类型，即未知类型参数，主要有两种用法：

*   它用于不关心类型参数的方法
*   它用于您想要表示一个类型参数是类型构造函数的方法。

类型构造函数基本上是需要类型参数来构造具体类型的东西。例如，您可以采用以下签名。

```
def strangeStuff[CC[_], B, A](b:B, f: B=>A): CC[A] 
```

这是一个函数，对于某些人`CC[_]`来说，例如 a ，从 B 和一个函数开始`List[_]`创建一个。`List[A]``B=>A`

为什么会有用？事实证明，如果你将这种机制与隐式和类型类一起使用，由于编译器的推理，你可以获得所谓的临时多态性。

想象一下，例如，您有一些更高种类的类型：`Container[_]`具有具体实现的层次结构：`BeautifulContainer[_]`, `BigContainer[_]`, `SmallContainer[_]`. 要构建一个容器，您需要一个

```
trait ContainerBuilder[A[_]<:Container[_],B] { 

def build(b:B):A[B]

} 
```

所以基本上 ContainerBuilder 是针对特定类型的容器 A[_] 可以使用 B 构建 A[B] 的东西。

虽然那会有用吗？好吧，您可以想象您可能在其他地方定义了一个函数，如下所示：

```
def myMethod(b:B)(implicit containerBuilder:ContainerBuilder[A[_],B]):A[B] = containerBuilder.build(b) 
```

然后在你的代码中你可能会这样做：

```
val b = new B()
val bigContainer:BigContainer[B] = myMethod(b)
val beautifulContainer:BeautifulContainer[B] = myMethod(b) 
```

实际上，编译器将使用 myMethod 的所需返回类型来查找满足所需类型约束的隐式，如果没有满足所需约束的 ContainerBuilder 隐式可用，则会抛出编译错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T11:32:05.657

当您处理参数化类型的实例而不关心类型参数时，这很有用。

```
trait Something[A] {
  def stringify: String
}

class Foo extends Something[Bar] {
  def stringify = "hop"
}

object App {
  def useSomething(thing: Something[_]) :String = {
    thing.stringify
  }
} 
```

# c++ - 读取配置文件

> ID：12778968
> 
> 赞同：0
> 
> 时间：2012-10-08T09:35:02.247
> 
> 标签：c++

我正在尝试读取这样的配置文件：

```
rawfile=input.raw
encfile=encoded.enc
decfile=decoded.raw
width=512
height=512
rle=1
quantfile=matrix.txt 
logfile=log.txt 
```

有这个功能：

```
void Compression::readConfigFile(char * input)
{
    string lineBuf;
    string optionBuf;
    std::ifstream confFile(input);

    if ( confFile.is_open() )
    {
        while ( getline( confFile, lineBuf ) )
        {
            optionBuf = "rawfile=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->rawfile = lineBuf.c_str();
            }
            optionBuf = "encfile=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->encfile = lineBuf.c_str();
            }
            optionBuf = "decfile=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->encfile = lineBuf.c_str();
            }
            optionBuf = "width=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->width = atoi( lineBuf.c_str() );
            }
            optionBuf = "height=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->height = atoi( lineBuf.c_str() );
            }
            optionBuf = "rle=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->rle = atoi( lineBuf.c_str() );
            }
            optionBuf = "quantfile=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length());
                this->matrix = lineBuf.c_str();
            }
            optionBuf = "logfile=";
            if ( ( ( int )lineBuf.find(optionBuf) ) != -1 )
            {
                lineBuf.erase( 0, optionBuf.length() );
                this->logfile = lineBuf.c_str();
            }
            confFile.close();

        }
    }
    else
        cout << "Can't open file: " << input << endl;
} 
```

但它不起作用。我的整数是 0 或某个大数字。我的字符串仍然是空的。

有人能帮助我吗？

亲切的问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:41:43.137

你不应该在while循环之外关闭文件吗？

```
while() {
    ...
}
confFile.close(); 
```

# c# - 通过 LinkedList.Enumerator 替换 LinkedList 元素值

> ID：12778973
> 
> 赞同：1
> 
> 时间：2012-10-08T09:35:17.167
> 
> 标签：c#, java

我意识到我无法通过`LinkedList.Enumerator`.

例如，我尝试将以下 Java 代码移植到 C#：

**Java代码：**

```
ListIterator<Double> itr1 = linkedList1.listIterator();
ListIterator<Double> itr2 = linkedList2.listIterator();
while(itr1.hasNext() && itr2.hasNext()){
    Double d = itr1.next() + itr2.next();
    itr1.set(d);
} 
```

**C#代码：**

```
LinkedList<Double>.Enumerator itr1 = linkedList1.GetEnumerator();            
LinkedList<Double>.Enumerator itr2 = linkedList2.GetEnumerator();

 while(itr1.MoveNext() && itr2.MoveNext()){                
    Double d = itr1.Current + itr2.Current;
    // Opps. Compilation error!
    itr1.Current = d;
} 
```

我可以使用任何其他技术吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T09:46:31.030

C# 的`LinkedList`枚举器枚举的是*值*，而不是*节点*。

如果您想像 Java 版本一样修改节点，我认为您必须手动“枚举”节点：

```
LinkedListNode<Double> nod1 = linkedList1.First;
LinkedListNode<Double> nod2 = linkedList2.First;
while (nod1 != null && nod2 != null)
{
    Double d = nod1.Value + nod2.Value;              
    nod1.Value = d;
    nod1 = nod1.Next;
    nod2 = nod2.Next;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:41:15.020

也许只需构建一个新列表就足够了：

```
linkedList1 = new LinkedList<double> (linkedList1.Zip(linkedList2, (first, second) => first + second)); 
```

如果您需要更改原始列表，您可能想要做

```
 var tmp = linkedList1.Zip(linkedList2, (first, second) => first + second).ToList ();
 linkedList1.Clear ();
 linkedList1.AddRange (tmp); 
```

# .htaccess - 使 Codeigniter 忽略目录

> ID：12778975
> 
> 赞同：0
> 
> 时间：2012-10-08T09:35:24.800
> 
> 标签：.htaccess, codeigniter

我已经安装了 Codeigniter 并为我的主站点工作。

但我现在正尝试将附加域添加到同一个主机帐户，这样我就可以在同一个主机上运行两个站点。附加域在主 public_html 文件夹中创建一个新文件夹来存储 Web 文件。

如何让 Codeigniter 忽略此目录？当我尝试查看该站点时，该站点无法正确加载。

我在主站点上也有一个 SSL 和 www URLS 的重定向。这是我的 .htaccess 文件：

```
RewriteEngine on
Options +FollowSymLinks
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.mysite\.co.uk$ [NC]
RewriteRule ^(.*)$ http://mysite.co.uk/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1

RewriteCond %{HTTPS} off
RewriteCond %{REQUEST_URI} (site|sections|here)
RewriteRule ^(.*)$ https://%{SERVER_NAME}%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTPS} onsite|sections|here)
RewriteRule ^(.*)$ http://%{SERVER_NAME}%{REQUEST_URI} [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:00:54.397

我在同一个主机上有多个域，其中两个使用 CI。不要更改主 htaccess，只更改包含 CI 安装的文件夹中的那个。如果您的主站点直接位于 public_html 文件夹中，您可能必须将其移动到它自己的文件夹并将您的 URL 重定向到该文件夹​​，除此之外，这确实不会导致任何问题。

# video - libav/ffmpeg：avcodec_decode_video2() 在分离解复用和解码时返回 -1

> ID：12778978
> 
> 赞同：2
> 
> 时间：2012-10-08T09:35:26.513
> 
> 标签：video, ffmpeg, decode, h.264, libav

我正在使用 libav（来自 Linux 和 Windows 上的 C++ 程序）从文件中解码视频流，使用 avformat_open_input()、av_read_frame() 和 avcodec_decode_video2() 可以正常工作（解码各种格式，如 H264 和 MPEG2）。

现在我必须分开解复用和解码。一个类将调用 avformat_open_input() 和 av_read_frame()，然后将 AVPackets 传递到另一个类读取的队列中。在那里，我使用 avcodec_alloc_context3() 来获取 avcodec_decode_video2() 所需的 AVCodecContext。我已经使用 MPEG2 视频流对其进行了测试，并且可以正常工作。

如果我尝试解码 H264 流，则会出现问题：avcodec_decode_video2() 始终返回 -1 并输出“无帧”。我知道解码这个流需要额外的数据（SPS/PPS），所以我试图从解码器中的解复用器复制原始的 AVCodecContext，但它不起作用：

*   复制 extradata 字段的内容并设置与解码器中的默认值不同的所有其他值：返回 -1
*   使用相同的上下文（即沿指针传递）会导致崩溃

我也尝试设置CODEC_FLAG2_CHUNKS。avcodec_decode_video2() 然后总是返回 packet.size - 3 (??) 并且 frameFinished 永远不会设置为 1。

在我看来，每当需要来自原始 CodecContext 的设置来解码 AVPackets 时，我都会在这里遇到一个普遍的问题。对于如何解决该问题的任何提示，我将不胜感激！

**编辑：**有时写下您的问题有助于解决它......使用上下文结构（avcodec_copy_context）的副本并仅在接收到解码帧中的副本结果后打开编解码器。有谁知道这是否安全或最好的方法？

# oracle - 使用查询将数据从 Oracle 查询导出到 excel

> ID：12778980
> 
> 赞同：0
> 
> 时间：2012-10-08T09:35:45.070
> 
> 标签：oracle, excel, export-to-excel

我有一个选择查询，我想使用 Oracle 查询而不是任何内置操作将其结果导出到 excel 文件中。

我正在使用`TOAD for Oracle`. 我不确定这是否可能。

任何帮助都会很有用。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T10:38:42.517

在 Toad 中，这非常简单：

*   运行您的查询
*   单击“导出数据集”按钮
*   将导出格式更改为“Excel 文件”
*   输入文件名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T00:33:40.843

与其将其推入 Excel，不如将其“拉”入 Excel？请参阅获取外部数据。一个额外的好处是您可以将其添加到您的 Windows 任务计划程序中，该任务计划程序将为您更新它。

[http://office.microsoft.com/en-us/excel-help/connect-to-import-external-data-HP010089898.aspx](http://office.microsoft.com/en-us/excel-help/connect-to-import-external-data-HP010089898.aspx)

# android - Gridview 使用 AsyncTask 从 JSON 获取图像

> ID：12778982
> 
> 赞同：1
> 
> 时间：2012-10-08T09:35:51.407
> 
> 标签：android, json, android-asynctask

这个项目我已经在我的可绘制对象中完成了图像，但现在我想通过使用 Asynctask 从 JSON 获取图像 url 并显示它。我制作了提供如下 json 字符串的 php。

我想通过使用 JSON 中的 AsyncTask 来获取图像（url）的路径。我想使用来自 json 的数据而不是`public mThumbId = {...};`

```
 {"count":"28","data":
    [{"id":"1",
        "first_name":"man",
        "last_name":"woman",
        "username":"man",
        "password":"4f70432e636970de9929bcc6f1b72412",
        "email":"man@gmail.com",
        "url":"http://vulcan.wr.usgs.gov/Imgs/Jpg/MSH/Images/MSH64_aerial_view_st_helens_from_NE_09-64_med.jpg"},
    {"id":"2",
            "first_name":"first",
            "last_name":"Last Name",
            "username":"user",
            "password":"1a1dc91c907325c69271ddf0c944bc72",
            "email":"first@gmail.com",
            "url":"http://www.danheller.com/images/California/Marin/Scenics/bird-view-big.jpg"},
    {"id":"3",
            "first_name":"first",
            "last_name":"Last Name",
            "username":"user",
            "password":"1a1dc91c907325c69271ddf0c944bc72",
            "email":"0",
            "url":"http://www.hermes.net.au/bodhi/images/view/large/view_03.jpg"}]} 
```

AndroidGridLayoutActivity

```
GridView gridView = (GridView) findViewById(R.id.grid_view);        
    gridView.setAdapter(new ImageAdapter(this));

    gridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v,
                int position, long id) {

            Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
            i.putExtra("id", position);
            startActivity(i);
        }
    }); 
```

图像适配器

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

// Keep all Images in array
public Integer[] mThumbIds = {
        R.drawable.pic_1, R.drawable.pic_2,
        R.drawable.pic_3, R.drawable.pic_4,
        R.drawable.pic_5, R.drawable.pic_6,
        R.drawable.pic_7, R.drawable.pic_8,
        R.drawable.pic_9, R.drawable.pic_10,
        R.drawable.pic_11, R.drawable.pic_12,
        R.drawable.pic_13, R.drawable.pic_14,
        R.drawable.pic_15
};

// Constructor
public ImageAdapter(Context c){
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return mThumbIds[position];
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {         
    ImageView imageView = new ImageView(mContext);
    imageView.setImageResource(mThumbIds[position]);
    imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
    imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
    return imageView;
}

} 
```

全图像活动

```
Intent i = getIntent();
    int position = i.getExtras().getInt("id");
    ImageAdapter imageAdapter = new ImageAdapter(this);

    ImageView imageView = (ImageView) findViewById(R.id.full_image_view);
    imageView.setImageResource(imageAdapter.mThumbIds[position]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T10:26:03.767

You have to first extract the urls from json in a array and then use below code to load image as bitmap dynamically using Async Task.

```
Bitmap bm[]=new Bitmap[3];
ImageAdapter img;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        bm[0]=null;
        bm[1]=null;
        bm[2]=null;

 InputStream is= getDataFromServer();
      String asd=getResponseFromStream(is);
      try {
        JSONObject jsn=new JSONObject(asd);
        JSONArray jd=jsn.getJSONArray("data");
        for(int i=0;i<jd.length();i++)
        {
            JSONObject j_object=jd.getJSONObject(i);
            String url=j_object.getString("url");
            urls.add(url);
        }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

       img=new ImageAdapter(this);
        GridView gridView = (GridView) findViewById(R.id.grid_view);        
        gridView.setAdapter(img);
        new  ImageDownloader().execute();
        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

                Intent i = new Intent(getApplicationContext(), FullImageActivity.class);
                i.putExtra("id", position);
                startActivity(i);
            }
        });

    }
    ProgressDialog prg;
    private class ImageDownloader extends AsyncTask<Integer, Integer, String>
    {
        @Override
        public void onPreExecute()
        {
            prg=ProgressDialog.show(LazyLoadActivity.this, null, 
                    "Loading...");
        }

        protected void onPostExecute(String result)
        {
            prg.hide();

        }
          protected void onProgressUpdate(Integer... progress) {
              img.notifyDataSetChanged();
             }
        protected String doInBackground(Integer... a)
        {
            for(int i=0;i<3;i++)
            {
                bm[i]=downloadBitmap(urls[i]);
                this.publishProgress(i);
            }
            return "";
        }
    }
    public Integer[] mThumbIds = {
            R.drawable.ic_launcher, R.drawable.ic_launcher,
            R.drawable.ic_launcher
    };

    public class ImageAdapter extends BaseAdapter {
        private Context mContext;

        // Keep all Images in array

        // Constructor
        public ImageAdapter(Context c){
            mContext = c;
        }

        public int getCount() {
            return mThumbIds.length;
        }

        public Object getItem(int position) {
            return mThumbIds[position];
        }

        public long getItemId(int position) {
            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {         
            ImageView imageView = new ImageView(mContext);
            if(bm[position]==null)
            imageView.setImageResource(mThumbIds[position]);
            else
                imageView.setImageBitmap(bm[position]);
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setLayoutParams(new GridView.LayoutParams(70, 70));
            return imageView;
        }

        }
Bitmap downloadBitmap(String url) {

        final HttpClient client = new DefaultHttpClient();
        final HttpGet getRequest = new HttpGet(url);

        try {
            HttpResponse response = client.execute(getRequest);
            final int statusCode = response.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) { 
                Log.w("ImageDownloader", "Error " + statusCode + " while retrieving bitmap from " + url); 
                return null;
            }

            final HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream inputStream = null;
                try {
                    inputStream = entity.getContent(); 
                    Bitmap bitmap = BitmapFactory.decodeStream(inputStream);
                    return bitmap;
                } finally {
                    if (inputStream != null) {
                        inputStream.close();  
                    }
                    entity.consumeContent();
                }
            }
        } catch (Exception e) {
            // Could provide a more explicit error message for IOException or IllegalStateException
            getRequest.abort();
            Log.e("ImageDownloader", "Error while retrieving bitmap from " + url);
        } finally {
            if (client != null) {
                //client.
            }
        }
        return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T09:43:00.867

我认为这个简单的链接将完全回答您的问题：

[https://github.com/novoda/ImageLoader](https://github.com/novoda/ImageLoader)

还有我自己的实现：

[https://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/adapter/TweetItemAdapter.java](https://github.com/iRail/BeTrains-for-Android/blob/master/src/tof/cv/mpp/adapter/TweetItemAdapter.java)

**编辑**

你真正需要做的：

1）解析 JSON：网上有成千上万的教程，或者使用很棒的 GSON 库。

2) 一旦 JSON 被解析，你会得到一个对象数组。

3) 在您的适配器中，您可能需要扩展 ArrayAdapter。

4）在getView（）方法中，分析我上面的2个链接并使用类似的东西：

`imageLoader.DisplayImage(tweet.profile_image_url, activity, holder.image);`

# asp.net - 在 asp.net 中将数据从一个页面传输到另一个页面的最佳方式。

> ID：12778987
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:10.460
> 
> 标签：asp.net, visual-studio-2010, c#-4.0

在我的场景中，我使用 java-script popup 弹出另一个表单，它是一个只有 20 个控件的地址输入表单。现在，我使用存储值数据表的会话变量从地址页面检索数据到主页。两种不同的会话变量以这种方式用于永久地址和临时地址。

使用会话变量会降低我所知道的性能。

将价值从一页转移到另一页的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:40:20.113

最好的方法是交叉发布，在这里描述：http: [//msdn.microsoft.com/en-us/library/ms178139 (VS.100).aspx](http://msdn.microsoft.com/en-us/library/ms178139(VS.100).aspx)

您还可以阅读有关该问题/答案的更多信息：[跨页发布。在 Asp.net 中使用 PreviousPage 是一个好习惯吗？](https://stackoverflow.com/questions/10124030/cross-page-posting-is-it-a-good-pratice-to-use-previouspage-in-asp-net)

# javascript - 如何使用 html(HTML5) 中输入的所有数据制作 pdf 文件？

> ID：12778989
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:12.577
> 
> 标签：javascript, html, pdf

如何在不使用 java 的情况下通过单击按钮将数据添加到 pdf 文件。可以使用 Javascript 和其他 api。请帮忙？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T09:37:45.623

**试试这个它对我很有用： http:**
[//snapshotmedia.co.uk/blog/jspdf](http://snapshotmedia.co.uk/blog/jspdf)

获取它：
[http ://code.google.com/p/jspdf/downloads/list](http://code.google.com/p/jspdf/downloads/list)

演示：http:
[//jspdf.com/](http://jspdf.com/)

**编辑**- 我已更改链接以获得更好的来源...

# jquery - jquery滑块最大值为零十进制

> ID：12778991
> 
> 赞同：1
> 
> 时间：2012-10-08T09:36:14.843
> 
> 标签：jquery, jquery-ui, jquery-slider

在这里，我遇到了 jQuery 滑块的问题，我是否从 API 动态获取`min`和`max`值，所以当 , 的值`max`为零浮动（如 0.27...）时，我无法将滑块从左向右移动。

请查看附件图片

![在此处输入图像描述](../Images/a5f124b92ab9d21726fdefb2a1e783c0.png)

在这种情况下，第一个输入框（最小值）保存值零，第二个输入框（最大值）保存值零浮动（0.27 ...）在这种情况下，我不能从左到右拖动滑块，

```
var calculateStep = function (minVal, maxVal) {
    var difference = maxVal - minVal;
    var step = parseInt(difference / 100);
    return step;
};
var sliderStep = calculateStep(cfg.minVal, cfg.maxVal);
$(filter_wrap).find('.slider').slider({
    range: true,
    min: cfg.minVal,
    max: cfg.maxVal,
    step: sliderStep,
    values: [cfg.minVal, cfg.maxVal],
    slide: function (event, ui) {
      //some code here
   }
}); 
```

该函数`calculateStep`应该具有处理任何类型的逻辑`min`and `max`，我认为，但不确定如何处理它。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T09:41:54.953

尝试改变

```
var step = parseInt(difference / 100); 
```

到

```
var step = parseFloat(difference / 100); 
```

# jmeter - JMeter - 生成摘要报告

> ID：12778993
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:19.633
> 
> 标签：jmeter, beanshell

我在我的 Jmeter 测试计划中实现了一个 BeanShell 侦听器，我用它来运行一个脚本，该脚本在每个请求之后将信息发送到 Splunk。但是，我现在希望能够在每次 Thread 运行结束时生成类似的消息，无论其执行是否存在错误。

目前，当发生错误时，我会启动下一个线程。我想在这个阶段运行另一个 BeanShell 脚本，我可以在其中收集该线程的摘要信息并将其发送到 Splunk，然后再启动下一个线程。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:00:37.357

您的选择是编写一个实现 ThreadListener 的类：

*   [http://jmeter.apache.org/api/org/apache/jmeter/testelement/ThreadListener.html](http://jmeter.apache.org/api/org/apache/jmeter/testelement/ThreadListener.html)

另见：

*   [http://jmeter.apache.org/extending/jmeter_tutorial.pdf](http://jmeter.apache.org/extending/jmeter_tutorial.pdf)

# java - Java检索括号中的字符串字符

> ID：12778996
> 
> 赞同：0
> 
> 时间：2012-10-08T09:36:40.443
> 
> 标签：java, string

我在 Java 中有一个字符串，它以这种格式保存数据：

```
String x = "xxxxxx xxxxxx xxxxxx (xxx)"; 
```

如何将该字符串的值设置为括号中的字符，而不包括括号？（请注意，每个实例的字符大小都会有所不同）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T09:38:18.603

单线解决方案是使用[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)适当的正则表达式来捕获整个输入（有效地替换整个输入），但也捕获（非贪婪地）您想要作为第 1 组的部分，然后只放回该组：

```
String part = x.replaceAll(".*\\((.*?)\\).*", "$1"); 
```

仅供参考，正则表达式字符串中的双反斜杠是正则表达式中的单斜杠，然后转义正则表达式中的文字括号

下面是一些测试代码：

```
public static void main(String[] args) {
    String x = "xxxxxx xxxxxx xxxxxx (xxx)";
    String part = x.replaceAll(".*\\((.*)\\).*", "$1");
    System.out.println(part);
} 
```

输出：

```
xxx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T09:42:05.323

正则表达式会做到这一点，但我的正则表达式很弱。非正则表达式方式如下：

```
int firstIndex = x.indexOf("(");
x = x.substring(firstIndex+1, x.length()-1); 
```

编辑：正如评论中所指出的，如果数据中有任何其他括号，除了最后，这将不起作用。您需要改用以下内容：

```
int firstIndex = x.lastIndexOf("(", x.length()-6);
x = x.substring(firstIndex+1, x.length()-1); 
```

EDIT2：刚刚重读并意识到关闭括号是最后一个字符。所以没有必要获取第二个索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T09:46:46.007

您可以使用`String.split`这种提取方法..

```
String x = "xxxxxx xxxxxx xxxxxx (xxx)";    
String[] arr = x.split("\\(");

x = arr[1].substring(0, arr[1].indexOf(")")); // To remove the trailing bracket.

System.out.println(x); 
```

# c# - 使用执行/CanExecute

> ID：12778998
> 
> 赞同：-1
> 
> 时间：2012-10-08T09:36:43.643
> 
> 标签：c#, wpf

有人可以解释一下如何在 RoutedCommands 上使用 CanExecute 和 Execute 方法，因为我目前正试图以编程方式通过另一个命令执行一个命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T10:21:04.730

好吧，假设您的 UI 上有一个按钮。并且您希望该按钮启动命令，假设该命令必须更新数据库中的行。但是如果那个显式行仍然被另一个进程使用会发生什么。这样，CanExecute 方法会检查是否可以发出命令，如果不能，它会禁用按钮，并且在命令可用于执行之前您不能单击它。当您启动该命令时，将处理 ICommand 对象的 Execute 方法。