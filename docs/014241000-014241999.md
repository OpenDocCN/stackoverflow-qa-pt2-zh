# StackOverflow 问答 14241000-14241999

# android - Android/Monodroid HorizontalScrollview on Drag

> ID：14241051
> 
> 赞同：0
> 
> 时间：2013-01-09T15:52:08.430
> 
> 标签：android, xamarin.android

I have a horizontalscrollview in my applictation and I want to call the ondrag action to get the current scrollposition. But I got the following error:

My code

```
sv.Drag += delegate(object sender, View.DragEventArgs e) {
    //do something
}; 
```

the error:

The nested type DragEventArgs does not exist in the type Android.Views.View

Perhaps the wrong namespace? I don't know. :/

# php - 如何根据特定键对关联数组进行排序？

> ID：14241052
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:09.973
> 
> 标签：php

我尝试了很多技巧和谷歌搜索来解决这个问题，但无法获得有用的东西。

基本上以下是关联数组中元素的内容（候选人的考试结果，我必须给候选人排名），其中包含几个这样的元素。

我想根据键按升序对数组进行排序，`[total_obtained_marks]`即具有更多分数的候选人将排在第一位，

然后如果找到相同的值，我必须根据键按降序对数组进行排序，`[no_wrong_answers]`即更少。的错误答案。

即使排名保持不变，我也必须按键的升序对数组进行排序，`[test_user_time_used]`即使用时间较少的候选人将获得更高的排名。

即使这样排名是相同的，然后我必须`[user_first_name]`按升序对键上的数组进行排序，即按字母顺序。

完成所有这些工作后，我可以获得排序良好的数组，该数组将为候选人提供适当的排名。

这个未排序数组的另一件事是无法从数据库中对实际数据进行排序，因此无法使用数据库函数。

无论必须做什么都将在这个未排序的数组本身上。请帮我解决这个问题。提前致谢。关联数组的名称是`$test_result`。

```
Array
(
    [14ddcea23dfc46bed4f2a15da7901c51] => Array
        (
            [test_user_data] => Array
                (
                    [test_user_id] => 6297
                    [test_user_user_id] => 14ddcea23dfc46bed4f2a15da7901c51
                    [test_user_test_id] => 348
                    [user_first_name] => Shahin
                    [user_last_name] => Khan
                    [user_name] => Shahin Khan
                    [test_user_status] => present
                    [test_user_time_used] => 00:00:00 Hr
                    [test_user_start_time] => 1356514472
                    [test_duration] => 4500
                    [test_name] => NEET: Electrostatics 1
                    [test_mode] => non-schedule
                    [test_end_time] => 0
                    [user_status] => Attempted
                )

            [test_question_data] => Array
                (
                    [73101] => Array
                        (
                            [question_text] => If a glass rod is rubbed with silk it acquires a positive charge because :
                            [question_file] => 
                            [correct_ans_text] => electrons are removed from it
                            [correct_ans_file] => 
                            [correct_ans_id] => 291299
                            [user_marked_ans_text] => electrons are removed from it
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 291299
                        )

                    [77101] => Array
                        (
                            [question_text] => In a charged capacitor , the energy is stored in :
                            [question_file] => 
                            [correct_ans_text] => the field between the plates
                            [correct_ans_file] => 
                            [correct_ans_id] => 307468
                            [user_marked_ans_text] => the field between the plates
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 307468
                        )

                    [75069] => Array
                        (
                            [question_text] => ABC is right-angle triangle with sides AB = 3 cm, BC = 4 cm, AC = 5 cm, charges 15, 12 and -20 respectively. Magnitude of the force experienced by the charge at B in dynes is :<br>
<img alt="\&quot;\&quot;" src="\&quot;http://www.entranceprime.com/upload_media/questions/original/1338456478_10.jpg\&quot;" height="\&quot;169\&quot;" width="\&quot;228\&quot;">
                            [question_file] => 
                            [correct_ans_text] => 25
                            [correct_ans_file] => 
                            [correct_ans_id] => 299192
                            [user_marked_ans_text] => 25
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 299192
                        )

                    [77526] => Array
                        (
                            [question_text] => The work done in increasing the coltage across the plates of a capacitor from 5 V to 10 V is W. The work done in increasing the voltage from 10 V to 15 V will be :
                            [question_file] => 
                            [correct_ans_text] => W
                            [correct_ans_file] => 
                            [correct_ans_id] => 578079
                            [user_marked_ans_text] => W
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 578079
                        )

                    [73190] => Array
                        (
                            [question_text] => Select the corrent alternative :
                            [question_file] => 
                            [correct_ans_text] => Charge cannot exist without matter although matter can exist without charge
                            [correct_ans_file] => 
                            [correct_ans_id] => 291651
                            [user_marked_ans_text] => Charge cannot exist without matter although matter can exist without charge
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 291651
                        )

                    [127452] => Array
                        (
                            [question_text] => Capacity of a conductor depends upon
                            [question_file] => 
                            [correct_ans_text] => size of conductor <br>
                            [correct_ans_file] => 
                            [correct_ans_id] => 510229
                            [user_marked_ans_text] => all of these<br>
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 510232
                        )

                    [127503] => Array
                        (
                            [question_text] => A charged spherical shell does not produce an electric field at any
                            [question_file] => 
                            [correct_ans_text] => interior point <br>
                            [correct_ans_file] => 
                            [correct_ans_id] => 510425
                            [user_marked_ans_text] => interior point <br>
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 510425
                        )

                    [75631] => Array
                        (
                            [question_text] => A solid conducting sphere having a charge Q is surrounded by an uncharged concentric conducting hollow spherical shell. Let the potential difference between the surface of the solid sphere and that of the outer surface of the hollow shell be V . If the shell is now given a charge -3q , the new potential difference between the same two surface is :
                            [question_file] => 
                            [correct_ans_text] => V
                            [correct_ans_file] => 
                            [correct_ans_id] => 301488
                            [user_marked_ans_text] => 
                            [user_marked_ans_file] => 
                            [user_marked_ans_id] => 
                        )

                )

            [subject_wise_result] => Array
                (
                    [5] => Array
                        (
                            [subject_id] => 5
                            [subject_name] => 12 PHYSICS
                            [no_correct_answers] => 6
                            [no_wrong_answers] => 1
                            [no_skipped_questions] => 38
                            [total_obtained_marks] => 23
                            [total_questions] => 45
                            [total_percent] => 100 %
                            [gain_percent] => 12.78 % 
                        )

                )

            [test_result_data] => Array
                (
                    [no_correct_answers] => 6
                    [no_wrong_answers] => 1
                    [no_skipped_questions] => 38
                    [total_obtained_marks] => 23
                )

        )
    ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:42:30.470

PHP 提供了[很多排序数组的函数](http://php.net/manual/en/array.sorting.php)。在这种情况下，您需要的是[`uasort()`](http://php.net/uasort)，它根据用户定义的比较函数对数组进行排序，同时保持键值关联：

```
function compare_results ( $a, $b ) {
    $diff = strcmp( $a['test_user_data']['user_status'],
                    $b['test_user_data']['user_status'] );
    if ( $diff != 0 ) return $diff < 0 ? -1 : 1;  // ascending order
    // ("Attempted" < "Not attempted")

    $diff = $a['test_result_data']['total_obtained_marks'] -
            $b['test_result_data']['total_obtained_marks'];
    if ( $diff != 0 ) return $diff > 0 ? -1 : 1;  // descending order

    $diff = $a['test_result_data']['no_wrong_answers'] -
            $b['test_result_data']['no_wrong_answers'];
    if ( $diff != 0 ) return $diff < 0 ? -1 : 1;  // ascending order

    $diff = strcmp( $a['test_user_data']['test_user_time_used'],
                    $b['test_user_data']['test_user_time_used'] );
    if ( $diff != 0 ) return $diff < 0 ? -1 : 1;  // ascending order

    $diff = strcmp( $a['test_user_data']['user_name'],
                    $b['test_user_data']['user_name'] );
    if ( $diff != 0 ) return $diff < 0 ? -1 : 1;  // ascending order

    return 0;  // give up, they're as good as equal
}

uasort( $test_result, compare_results ); 
```

编写此类比较函数（简要）记录在[`usort()`](http://php.net/uasort)函数文档页面上。

请特别注意关于非整数返回值被截断的警告，这就是我返回`$diff < 0 ? -1 : 1`而不是返回`$diff`自身的原因。在您的情况下，这*无关紧要*，因为数值似乎是整数，但如果系统被修改为允许授予部分分数，则可能会导致难以发现的错误。因此，总是从比较函数返回 -1、0 或 1 是一个好习惯。

（对于字符串比较，这`$diff < 0 ? -1 : 1`是毫无意义的，因为[`strcmp()`](http://php.net/strcmp)据记录总是返回 -1、0 或 1，但为了保持一致性，我也在那里使用它。它并没有真正造成任何伤害，并且作为我说，养成一个好习惯。）

另请注意，我将时间值作为字符串进行比较。如果这没有产生您期望的结果，您需要编写自己的时间比较代码。

附言。如果您使用的是 PHP 5.3.0 或更高版本，您还可以将比较函数编写为[匿名函数](http://php.net/manual/en/functions.anonymous.php)，如下所示：

```
uasort( $test_result, function ( $a, $b ) {
    // function body goes here
} ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:14:30.610

您需要定义自己的比较函数并使用[`usort()`](http://php.net/manual/en/function.usort.php).

```
function cmp($a, $b) {
    $a = $a['test_result_data']['total_obtained_marks'];
    $b = $b['test_result_data']['total_obtained_marks'];
    if ($a == $b) return 0;
    return ($a < $b ? -1 : 1);
}

usort($array, 'cmp'); 
```

# java - Java-找到某个文本，然后在它后面写一个文本

> ID：14241055
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:31.783
> 
> 标签：java, file

我在这里需要帮助

如果我在打开文件后有这样的文本：

```
I am a human 
```

我想在单词“a”和 示例`"awesome"`中间添加一个单词（也许） ：`"human"`

```
I am a awesome human 
```

有没有办法用java做到这一点？

我只知道如何找到单词的哪一行而不是字符串的确切区域并在该区域写入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T15:56:38.693

```
StringBuilder input = new StringBuilder("I am a human");  
int indexOfA = input.indexOf(" a ");  //notice the spaces  
input.insert(indexOfA+1, "awesome "); 
```

# c++ - 特征中的对称矩阵

> ID：14241059
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:34.660
> 
> 标签：c++, eigen

我有一个下三角矩阵 M（严格，对角线上为 0）。我想有效地将​​其转换为对称矩阵。（例如我想做`M<-M+M'`）。我正在使用本征。

我的问题，是我在做什么：

```
U=U+U.transpose(); 
```

但是阅读文档时，我*觉得*，也许，我应该利用一些功能，例如`.noalias()`and/or `.transposeInPlace()`，但明显的候选者：

```
U+=U.transposeInPlace(); 
```

给出一个错误。

# 编辑：

这是错误消息：

```
.cpp:210:24: note: candidates are:
/eigen/Eigen/src/Core/MatrixBase.h:183:14: note: template<class OtherDerived> Derived& Eigen::MatrixBase::operator+=(const Eigen::MatrixBase<OtherDerived>&) [with OtherDerived = OtherDerived, Derived = Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>]
/eigen/Eigen/src/Core/MatrixBase.h:517:46: note: template<class OtherDerived> Derived& Eigen::MatrixBase::operator+=(const Eigen::ArrayBase<OtherDerived>&) [with OtherDerived = OtherDerived, Derived = Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>]
/eigen/Eigen/src/Core/DenseBase.h:266:14: note: template<class OtherDerived> Derived& Eigen::DenseBase::operator+=(const Eigen::EigenBase<OtherDerived>&) [with OtherDerived = OtherDerived, Derived = Eigen::Matrix<float, -0x00000000000000001, -0x00000000000000001>] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:16:07.290

在 Eigen 中，`transposeInPlace()`被声明为`void`. 因此，您不能在矩阵总和中使用该方法的结果，因为结果根本不是矩阵。

做

```
V = U;
V.transposeInPlace();
U += V; 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-13T10:36:51.080

实际上，

```
U+=U.transpose().eval();
return(U); 
```

成功了

# database - When switching to job specific databases with EF5, will caching still work?

> ID：14241061
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:32.037
> 
> 标签：database, asp.net-web-api, entity-framework-5

I'm designing a web service that returns simple query information. Using webApi & EF5\. Easy. The problem I need help solving is this. We have **15 SQL servers** with a combined **200+ databases**. The **schemas are all the same**. Each DB is customer/case specific. So the API gets called with a case# and finds the sql server & db name from a lookup table.

I know how to set the dbContext to a specific connection string. So telling EF5 what to connect to is easy enough. It seems I will be **losing any connection caching capabilities** by having to switch DB's with every call.

On a busy day, we'll have 10-60 users per case #, and about 20 cases a day. (read **20 unique DB connections** a day)

Should I create my own connection cache inside my WebAPI? As simple as a List of last used connections? Or will EF5 just work?

# jquery - 如何在 jQuery 中将 id 传递给 $.click

> ID：14241062
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:36.023
> 
> 标签：jquery, ajax

我有以下代码

```
<a  href="#example" id="showtext">view text</a>

    $("#showtext").click (function () {
        $.post('/app/foo/bar/1', function (data){
           $("#msg").html(data);
        });
        $('#example').modal()
    }); 
```

当`view text`被点击时，我正在发出一个发布请求`/app/foo/bar/1`并将该数据放入一个带有 id 的 div 中`#msg`。所有这一切都很好，但是，现在我希望能够`ids`向这个 url 传递不同的内容，例如：`/app/foo/bar/2`或`/app/foo/bar/3`等。

有什么好方法可以做到这一点？

我想到的一种方法是将 id 附加到属性，如下所示：

```
<a href="#example" id="showtext${id}">view text</a> 
```

然后`id`使用正则表达式解析出 jQuery 中的内容。但是，这种方法似乎很混乱。有没有更优雅的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T15:56:47.937

假设您需要`href`保留原样的属性，您可以使用`data`属性来代替。

```
<a href="#example" id="showtext" data-url="/app/foo/bar/2">view text</a> 
```

```
$("#showtext").click(function() {
    $.post(
        $(this).data('url'), 
        function(data) {
            $("#msg").html(data);
        }
    );
    $('#example').modal()
}); 
```

或者，正如我提到的，您可以使用`href`：

```
<a href="/app/foo/bar/2" id="showtext">view text</a> 
```

```
$("#showtext").click(function(e) {
    e.preventDefault(); // prevent the link being followed normally
    $.post(
        $(this).prop('href'), 
        function(data) {
            $("#msg").html(data);
        }
    );
    $('#example').modal()
}); 
```

# c# - C# - 如何在 ASP.NET 应用程序中处理子线程

> ID：14241064
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:38.647
> 
> 标签：c#, asp.net, multithreading

我正在构建一个多线程 ASP.NET 应用程序。我是编写多线程应用程序的新手。我有一个主类，它产生许多在使用应用程序时运行的线程。该应用程序有一个主要的 HTML 页面。当 HTML 页面第一次打开时，它调用 MyController.Start() 方法来创建线程并让它们运行。然后 HTML 页面有一个 Javascript 例程，它不断地轮询我的应用程序中的 ASPX 页面（每 2 秒）以获取数据并显示它。有一个我称为“MyController”的主类，它是应用程序的核心。它有一个名为 Canceled 的本地布尔变量，该变量设置为 false。MyController 产生所有子线程。每个子线程都有一个循环，只要 Canceled = false 就会继续执行。正在运行的线程之一用作监视器，以确保 HTML 页面仍处于启动状态并进行轮询。如果该线程注意到自上次轮询 HTML 页面以来已过 30 秒，则它将 Canceled 变量更改为 true。然后所有线程一个接一个地完成运行并优雅地关闭。

我需要能够处理用户关闭浏览器然后在 30 秒到期之前重新打开它的情况。我觉得我没有完全理解创建和启动的线程与 MyController 实例之间的关系。一旦线程被创建并启动，它们是否会独立于其他任何东西运行？我有一个名为 App 的主要静态类，用于从应用程序的任何位置轻松访问控制器。我现在编码的方式我认为每次加载 HTML 页面时我都会创建新线程。因此，如果用户要关闭 HTML 页面然后重新打开它，我想我会运行每个线程的两个实例。那是对的吗？如果是这样，我如何检查这些线程是否已经在运行，以便我不'

希望这是有道理的！提前感谢您的帮助。这是我的代码。

启动.aspx.cs

```
protected void Page_Load(object sender, EventArgs e)
{
  if(App._myController == null)
  {
    App._myController = new MyController();
  }
  App._myController.Start();
} 
```

库代码

```
public class App
{
  public static MyController _myController {get;set;}
  static App()
  {
    _myController = new MyController();
  }
}

public class MyController
{
  public bool Cancelled {get;set;}
  private object SyncLock = new object();
  Thread _thread1;
  Thread _thread2;
  Thread _thread3;

  public void Start()
  {
    this.Cancelled = false;
    _thread1 = new Thread(Worker1);
    _thread1.Start();

    _thread2 = new Thread(Worker2);
    _thread2.Start();

    _threadMonitor = new Thread(Monitor);
    _threadMonitor.Start();
  }

  public void Stop()
  {
    lock(this.SyncLock)
    {
      this.Cancelled = true;
    }
  }

  private void Worker1()
  {
    while(!Cancelled)
    {
      ..do some stuff..
    }
  }

  private void Worker2()
  {
    while(!Cancelled)
    {
      ..do some stuff..
    }
  }

  private void Monitor()
  {
    while(!Cancelled)
    {
      ..check database to see when last poll was
      ..if last poll is greater than 30 seconds ago
      {
        this.Stop();
      }
    }
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:06:35.267

> 我正在构建一个多线程 ASP.NET 应用程序。我是编写多线程应用程序的新手。我有一个主类，它产生许多在使用应用程序时运行的线程。

不。你不应该那样做。从 ASP.NET 生成一个新线程是一个公平的方法，可以让你自食其果。为什么？因为每个新请求通常都会从 ASP.NET 线程池中获取一个专用线程。您可以获得的线程数量非常有限（因此逻辑并发请求的数量）。如果一个请求产生另一个手动线程 - 奇怪的事情会发生，从内存泄漏、死锁开始，最终导致你的应用程序或 Web 服务器崩溃。

处理请求后，您的服务器应该完全忘记用户。

相反，考虑不同的方法。保持状态：

*   数据库
*   用户 cookie
*   html隐藏字段
*   由 ASP.NET 本身序列化/反序列化的 ASP.NET 容器

恢复新的每个请求的状态并比较时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:07:16.620

我不喜欢你的设计，但这是一个单独的问题。我将用您当前的设计解决您当前的问题...

从您的`Start()`函数中，如果线程不为空​​，请将线程设置`Cancelled`为 true `Join()`，然后继续使用现有功能。

```
 public void Start()
  {
    this.Cancelled = true;

    if (_thread1 != null) _thread1.Join();
    // repeat for other threads

    this.Cancelled = false;
    _thread1 = new Thread(Worker1);
    _thread1.Start();

    _thread2 = new Thread(Worker2);
    _thread2.Start();

    _threadMonitor = new Thread(Monitor);
    _threadMonitor.Start();
  } 
```

至于更好的方法，也许是一个服务来做后台工作，使用 WCF（也许使用 REST）与您的页面交互。

# c# - 绑定到后面的代码将不起作用

> ID：14241065
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:39.947
> 
> 标签：c#, windows, xaml, windows-8

我有一个按钮，它调用一个`List<string>`用图像路径填充 a 的方法。每次调用此方法以显示所有生成的图像时，我都会尝试更新 Windows 8 应用程序。目前它不会显示任何东西，尽管只是将图像路径硬编码到`List<string>`

我显示图像的 XAML 代码是：

```
 <ItemsControl ItemsSource="{Binding Path=test}" Grid.Column="1" Grid.Row="3" Grid.ColumnSpan="5"
      HorizontalContentAlignment="Stretch">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Image Source="{Binding}" />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl> 
```

在 Xaml.cs 中：

```
public sealed partial class MainPage : TestApp.Common.LayoutAwarePage
{

    public List<string> test = new List<string>();
    public MainPage()
    {
        test.Add("C:\\Users\\user\\Pictures\\image.jpg");
        this.InitializeComponent();
    }
} 
```

我做错了什么/需要在这里改变吗？非常感谢 ：）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:56:25.470

您需要设置 MainPage 的 DataContext。把它放在你的 MainPage xaml 上。

```
DataContext="{Binding RelativeSource={RelativeSource Self}}" 
```

编辑：您需要在代码隐藏上拥有一个属性，而不是一个字段：

```
public List<string> test {get; set;}
public MainPage()
{
    test = new List<string>();
    test.Add("C:\\Users\\user\\Pictures\\image.jpg");
    this.InitializeComponent();
} 
```

# cassandra - get slice returning inconsistent results

> ID：14241066
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:40.927
> 
> 标签：cassandra, thrift, slice

I'm using a wide column index to order records in a timeline fashion, a la:

```
"TimelineIndex" //CF name
  [CFName] //row key
    [TimeUUID]:[CFRowKey] //column name/value
    [TimeUUID]:[CFRowKey] //column name/value
    [TimeUUID]:[CFRowKey] //column name/value
    [TimeUUID]:[CFRowKey] //column name/value 
```

Assume I have 10 records in the TimelineIndex CF with one column per day, ranging from '01/01/2013 12:00:00' to '10/01/2013 12:00:00' (as TimeUUIDs), and I run the following get_slice() command:

```
var predicate = new SlicePredicate(){ Slice_range = new SliceRange() {
{
  Start = TimeGenerator.GetTimeUUID(new DateTime("06/01/2013 12:00:00"),
  Finish = TimeGenerator.GetTimeUUID(new DateTime("11/01/2013 12:00:00"),
  Count = 5,
  Reversed = false
}};
var results = client.get_slice([CFName], parent, predicate, consitencylevel.one); 
```

The columns returned by this query aren't always consistent. The majority of the time the column named '06/01/2013 12:00:00' is returned, but every so often (about 1 in 10 executions) that column is excluded from the results and I end up with only 4 columns returned.

I cant for the life of me figure out why I would be getting inconsistent results here. Can any suggest a reason for this?

And before anyone says, I know its not advisable to use Thrift directly - this is purely a proof of concept exercise!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:43:38.250

At the risk of belaboring the obvious, remember that TimeUUIDs (version 1 UUIDs) serve two purposes:

*   They have a time-based component
*   They are UUIDs

Thus, you can insert multiple time-based data values and get them back chronologically without worrying about losing data due to column name collisions.

Also remember that column names must be globally ordered for Cassandra to find your data correctly, and UUIDs are no exception. Thus, if you give Cassandra two TimeUUIDs with the same time component, it will order them based on the non-time-components.

So, what's happening is a subtle interaction of the above two points: when you create new random-ish TimeUUIDs at `06/01/2013 12:00:00`, sometimes that sorts before the one you inserted, and sometimes it does not. When it does not, then the first column won't be included.

To fix this you'd need to deliberately construct non-time components for the query UUID to sort as low as possible. The pycassa library does this, for instance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:56:54.500

It appears that your issue may be related to your consistency level. You have 2 replicas, yet you are reading with consistency level of ONE. If you also write with ONE, you will run into issues as you describe. If you change your read level to QUORUM (or LOCAL_QUORUM), my guess is your data will never disappear. Sporadically disappearing data is almost always a consistency issue.

Why does this happen?

Using your setup of 3 nodes with RF=2, let's say you write column A with CL=ONE. Now you have one node (let's say N1) with column A, and the other node that would theoretically get the replica (let's say N2) does not yet have it. So you'll end up with this:

```
N1: has A
N2: does not have A
N3: will look to N1 or N2 for A 
```

So now, let's see what would happen if, using CL=ONE, you ask each node for A:

```
N1: you get A
N2: you get nothing because it doesn't check with any other nodes
N3: you may get A or nothing, depending on whether the request gets handled by N1 or N2 
```

If you read with CL=QUORUM:

```
N1: you get A, and N2 gets updated due to repair on read
N2: you get A, because it checks against N1 and repairs
N3: you get A, because both N1 and N2 will reliably return it 
```

You can easily check to see if this is your issue by using QUORUM reads. If so, the problem will not reappear.

# c - C从二进制浮点数

> ID：14241067
> 
> 赞同：0
> 
> 时间：2013-01-09T15:52:40.927
> 
> 标签：c, floating-point

我正在努力学习 C，现在我是一个花车。我知道所有值在不同的机器上都有不同的大小。但我正在努力学习这个概念。

假设一个浮点数保存在 4 个字节中。我读到第一位是符号位，它决定数字是正数还是负数。然后接下来的 7 位是指数，其余（23 位）是尾数。可能是这样的：1 010 1001 0000 0000 1011 1001 0000 111

但这如何转化为浮点数？我可以阅读二进制文件，但我看不到它背后的公式:)。有人可以向我解释一下，或者它是如何工作的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:55:18.880

这是我几年前写的。
我认为它应该可以帮助您了解浮点数的表示方式：

[http://www.eosgarden.com/en/articles/float/](http://www.eosgarden.com/en/articles/float/)

基本上，归一化数字的公式是： **`-1^S * 1.M * 2^( E - 127 )`**其中**S**是符号，**M**是尾数，**E**是指数。但一切都在上一个链接中详细解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:00:52.710

指数中有8位：seee eeee emmm mmmm mmmm mmmm mmmm mmmm

公式为：(-1)^s * 1.M * 2^(E - 127)

我用大 M 和 E 分别代表所有的 m 和 e 位。M部分是二进制，E部分是十进制。

# android - Convert Sqlite Column Date format with SimpleDateFormat

> ID：14241068
> 
> 赞同：1
> 
> 时间：2013-01-09T15:52:44.003
> 
> 标签：android, sqlite

I've a sqlite column with date as string in this format yyyy-mm-dd, I'm trying to convert it with SimpleDateFormat but always return 01-01-1970? This is the code of my Adapter:

```
adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
    public boolean setViewValue(View view, Cursor cursor, int columnIndex) {

      if (view.getId() == R.id.swimm_date)
        { 
        int DateUSA = cursor.getInt(columnIndex);
        TextView tv = (TextView)view;
        DateFormat FormatDate = new SimpleDateFormat ("dd-MM-yyyy");
        String DateEUR = FormatDate.format(DateUSA);
        tv.setText(DateEUR);
        return true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:39:30.910

也许这个代码片段可以帮助你：

```
 adapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
            if (view.getId() == R.id.swimm_date) {
                DateFormat sdf = new SimpleDateFormat("dd-MM-yyyy");
                TextView tv = (TextView)view;
                tv.setText(sdf.format(java.util.Date.parse(cursor.getString(columnIndex))));
                return true;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:31:59.113

用这个 ：

```
public static String getCurrentDate() {
        SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        String date = dateFormat.format(new Date(System.currentTimeMillis()));
        return date;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:19:11.003

谢谢，我已经用这个解决方案解决了：

```
 if (view.getId() == R.id.swimm_date)
    { 
     Date parsed = new  Date();
     String DateUSA = cursor.getString(columnIndex);
     SimpleDateFormat fmt = new SimpleDateFormat ("yyyy-MM-dd");
     SimpleDateFormat fmtOut = new SimpleDateFormat ("dd-MM-yyyy");

     try {parsed = fmt.parse(DateUSA);}
     catch(ParseException pe) {
     System.out.println("ERROR: Cannot parse \"" + parsed + "\"");
     }
    String DateEUR = fmtOut.format(parsed);
    TextView tv = (TextView)view;
    tv.setText(DateEUR);
    return true;
    } 
```

# php - Is there a job queue system that allows tasks to be dependent on other tasks?

> ID：14241069
> 
> 赞同：2
> 
> 时间：2013-01-09T15:52:44.067
> 
> 标签：php, job-queue

For example, I'm working on a deployment app. Let's say we deploy 4 branches from SVN, that requires 4 `svn export` from subversion. This may take a while depending on the branch we check out so I was thinking of sending this to a job queue. When all jobs are complete, then and only then do we want to restart our application services.

Is there a job queue that can do this? I think the closest I've seen is celery since it takes results into a database.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:21:57.993

如果您使用的是 linux，您可以使用 Cron 之类的东西在某个时间点自动/安排您的作业开始（例如每天 1 次），并将该作业的输出通过管道传输到可以存储时间的 PHP 脚本您的工作在数据库中完成。您可以拥有第二个“监控”PHP 脚本，该脚本会更频繁地运行（例如每半小时一次或其他时间），它会查询数据库以查看您的所有工作是否已完成。如果您在该日期的所有工作都标记为“完成”，您可以使用该 PHP 脚本来启动您的重新启动。您不必用 PHP 编写它，我相信它可以全部用 Perl 或作为 shell 脚本或其他东西编写 - 这只是一个示例，因为您的标签中有 PHP。

# runtime-error - Confusing Error in Bluej

> ID：14241077
> 
> 赞同：0
> 
> 时间：2013-01-09T15:52:57.527
> 
> 标签：runtime-error, bluej

When i run following it runs successfully :

```
import java.util.*;
public class god {
    public void main() {
        int chalnabey;
        Scanner in=new Scanner(System.in);
        System.out.println("t");
    }
} 
```

But when i add another line to assign input to variable, the left side red loader goes non-stop progressing and my code never runs !

```
import java.util.*;
public class god {
    public void main() {
        int chalnabey;
        Scanner in=new Scanner(System.in);
        chalnabey=in.nextInt();               //This is addition line to previous code
        System.out.println("t");
    }
} 
```

Can anybody tell why this happens and how to correct it ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:26:16.993

您的代码正在等待来自键盘的输入

```
chalnabey = in.nextInt(); 
```

打开 BlueJ 终端窗口（从 BlueJ 主菜单，单击查看 > 显示终端），您将看到光标闪烁。输入任何文本并按下`Enter`，您的程序将继续执行。

# uiviewcontroller - NSClassFromString 不允许我设置委托

> ID：14241086
> 
> 赞同：0
> 
> 时间：2013-01-09T15:53:23.297
> 
> 标签：uiviewcontroller, delegates

我使用 NSClassFromString 来分配视图控制器。但这不会让我为自己设置一个代表。是否可以？

```
nibString = @"ViewControllerName";
Class viewControllerClass = NSClassFromString( nibString );
loadedVC = (UIViewController*) [[viewControllerClass alloc] initWithNibName:nibString bundle:nil];
[loadedVC setDelegate:self]; 
```

最后一行报告 No visible@interface for "UIViewController" 声明选择器 'setDelegate'

我确信如果我通过属性分配 vc 它将起作用，但我使用这种方法是为了方便 - 尽管如果我可以将它设置为委托，我可能应该停止。

任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T03:08:06.487

我假设您已经这样声明`loadedVC`：

```
UIViewController *loadedVC; 
```

编译器只允许您向它发送它知道是`UIViewController`'s的一部分的消息`@interface`。这是一件好事。它可以防止很多运行时错误。但有时你比编译器更清楚，你想关闭`@interface`检查。

当您尝试向 type 的值发送消息时`id`，编译器不会检查该消息，因为`id`它是一个没有 的泛型类型`@interface`。`loadedVC`所以投到`id`：

```
[(id)loadedVC setDelegate:self]; 
```

请注意，如果`loadedVC`没有（或继承）`setDelegate:`方法，您将收到运行时错误。如果你想先检查方法，试试这个：

```
if ([loadedVC respondsToSelector:@selector(setDelegate:)]) {
    [(id)loadedVC setDelegate:self];
} 
```

另一种方法是创建一个包含`setDelegate:`方法的协议：

```
@protocol HasDelegate
- (void)setDelegate:(id)delegate;
@end 
```

然后你可以`loadedVC`这样声明，告诉编译器它符合协议：

```
UIViewController<HasDelegate> *loadedVC; 
```

现在，当您尝试发送`setDelegate:`到`loadedVC`（即使没有演员表）时，编译器也不会抱怨。但是如果`loadedVC`实际上没有`setDelegate:`方法，您仍然会收到运行时错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T02:58:29.390

UIViewControler 类没有委托属性。通常您将视图控制器设置为视图的委托，因此 setDelegate 将在视图上调用，而不是控制器。

如果您有一个支持委托的视图控制器子类，则编译器将看不到它，因为您加载的VC 引用已被强制转换为 UIViewControler。如果这是问题，有几种解决方案。

1）您可以强制转换为使用的类，或实现委托的第一个超类。

2）您可以使用正式或非正式的协议。

3) 可以调用respondsToSelector:，后跟performSelector:withObject:

等等

# c# - 通过ac#socket运行命令

> ID：14241102
> 
> 赞同：0
> 
> 时间：2013-01-09T15:53:54.373
> 
> 标签：c#, wpf, sockets

我正在编写 ac# 应用程序，它连接到远程服务器来做事。我已经能够将文件复制到客户端，而我现在想要做的是，在我完成复制所有文件后，通过我的 Socket 发送一个“命令信号”​​，并让客户端运行它。

仅举个例子，这就是我想要做的：

```
string cmD = @"\\192.168.0.1\\cmd";
byte[] clientData = new byte[8000];
clientData = System.Text.Encoding.UTF8.GetBytes(cmD);
clientSock.Send(clientData); 
```

假设 clientSock 是连接到我的服务器的静态 Socket。在这种情况下，我想在客户端运行“cmd”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-09T15:56:35.343

最后，你什么都没问。你能详细说明你想问什么吗？

无论如何，我猜你正试图在远程服务器中运行一个命令，所以你必须在你的 C# 服务器中实现它。要运行命令，您可以使用`Process::Start()`方法。祝你好运！

干杯，

# model-view-controller - 如何构建 Angular 应用程序以在控制器之间共享数据？

> ID：14241103
> 
> 赞同：0
> 
> 时间：2013-01-09T15:53:53.593
> 
> 标签：model-view-controller, google-maps, architecture, angularjs

我有一个网络应用程序，用户可以在其中创建事件并在地图上放置图钉，他/她还可以通过过滤器列表浏览事件。该地图由谷歌地图提供。因此，该应用程序包含 3 个主要组件：过滤器列表、新事件表单、地图。

我在想我应该如何使用 AngularJS 来构建它。以下是我正在尝试的内容以及遇到的问题。

我为事件表单创建了一个控制器，代表“新事件”的一个实例，它是用户创建的最新事件。在用户成功提交表单并验证所有内容后，用户可以单击地图放置图钉。当用户单击图钉时，它将显示表单中的事件信息。现在 drop pin 和 pin info 功能都由 Google 的 API 处理，它与控制器分离。然而，函数需要访问新事件的数据，这意味着我必须让它访问控制器的范围。

我可以提供对范围的访问，但我的直觉告诉我提供对外部功能的访问不是正确的做法。那么有什么更好的方法来构建它呢？或者我可能错了，授予范围访问权限是完全合法的，如果是这样，有人可以为我提供一些关于根本原因的见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:17:14.503

对于任何对同一主题感兴趣的人，经过一些研究，我认为我已经找到了正确的解决方案。答案不是在控制器之外提供范围访问（我认为这很糟糕），而是创建一个保存公共数据的服务。需要访问数据的控制器可以要求此服务并访问它们。

所以在我的特殊情况下，我需要为谷歌地图包装器制作另一个控制器，它将使用谷歌的 API 初始化地图，并处理所有地图功能。然后我创建了一个 newEvent 服务，它保存来自事件表单的数据，并且是事件控制器和地图控制器所需要的。事件控制器将数据写入服务，而地图控制器在适当的时间从服务中检索数据。

但是后来我发现我的地图控制器中的代码太多了，它需要初始化很多地图选项，为地图对象实现一些实用回调并使用 Google 的 API 注册它们。因此，我更进一步将所有这些功能纳入另一个服务。地图控制器将需要地图服务来处理 Google 的 API，随后地图服务将需要事件服务来检索事件数据。

所以现在我的应用看起来像这样：

```
newEventCtrl --- requires ---> eventService <------
                                                  |
mapCtrl --- requires ---> mapService ---requires--- 
```

以下是我发现非常有用的两篇文章：

*   [AngularJS 便笺 Pt 1 – 架构](http://onehungrymind.com/angularjs-sticky-notes-pt-1-architecture/)
*   [AngularJS 便笺 Pt 2 – 隔离范围](http://onehungrymind.com/angularjs-sticky-notes-pt-2-isolated-scope/)

* * *

## 问题

我现在唯一的问题是我需要通过 newEventCtrl 将我的表单字段直接绑定到事件服务中的数据，我不太喜欢它，因为我需要公开我的服务数据。

**控制器.js：**

```
var newEventCtrl = function($scope, eventService) {
    $scope.newEvent = eventService;
    ...
} 
```

**服务.js：**

```
...
module.service('eventService', function() {
    ...
    return {
        eventName: '',
        ...
        }
});
... 
```

**HTML：**

```
...
<input ng-model='newEvent.eventName'>
... 
```

我不喜欢直接公开服务数据，而是希望有一个不错的 API，但我没有找到将 API 函数绑定到输入字段以便它们自动更新的方法。欢迎任何建议。

# visual-studio-2010 - 在 Visual Studio 2010 中将默认平台工具包设置为 Windows7.1SDK？

> ID：14241109
> 
> 赞同：1
> 
> 时间：2013-01-09T15:53:58.217
> 
> 标签：visual-studio-2010, configuration, winapi

在 Visual Studio 2010 中，如何将“平台工具包”设置为“Windows7.1SDK”作为所有打开的解决方案/项目的全局默认值？我正在使用一个具有大量解决方案的 SDK，每个示例项目都有一个解决方案。在我第一次构建解决方案时，必须为每个解决方案更新此设置。我宁愿配置一次​​。以下链接似乎没有回答这个问题，因为它们专注于为单个项目/解决方案更改它。

[切换 VS2010 以使用 Windows 7.1 SDK](https://stackoverflow.com/questions/4095009/switching-vs2010-to-use-windows-7-1-sdk)

[http://msdn.microsoft.com/en-us/library/ff660764.aspx](http://msdn.microsoft.com/en-us/library/ff660764.aspx)

请注意，MSDN 说明甚至都不正确。您似乎必须右键单击项目节点，而不是解决方案节点。有人建议可以在一个解决方案中多选所有项目，但是我有许多 VS 解决方案。

(MSDN)

1.  在 Visual Studio 2010 中，打开解决方案 (.sln) 文件或创建解决方案。
2.  在解决方案资源管理器中，右键单击解决方案节点，然后单击属性。
3.  在配置列表中，选择所有配置。在配置属性下，选择常规。
4.  作为 Platform Toolset 选项，选择 Windows7.1SDK。单击确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T00:43:52.517

我只需要在开发人员之间共享一个项目，其中一些拥有 MSVS 2010 Pro 和一些只有 Express。

我发现可以通过实际修改 MSBuild 平台的 .props 文件来做到这一点。

在文件 C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Win32\Microsoft.Cpp.Win32.default.props 中有几行

```
    <PlatformToolset Condition="'$(PlatformToolset)' == ''">$(DefaultWin32PlatformToolset)</PlatformToolset>
    <PlatformToolset Condition="'$(PlatformToolset)' == ''">v100</PlatformToolset>

```

我用以下行替换了这些

```
    <PlatformToolset Condition="'$(PlatformToolset)' == ''">Windows7.1SDK</PlatformToolset>

```

现在 Visual Studio 2010 默认使用 Windows7.1SDK 作为 Win32 项目的平台工具集。

Itanium 和 x64 架构的类似文件分别位于

*   C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\Itanium\Microsoft.Cpp.Itanium.default.props
*   C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Platforms\x64\Microsoft.Cpp.x64.default.props

我也改变并看到了成功的结果。

我只建议使用 Express 的开发人员这样做，因为只有在 Express 中才特别缺乏“v100”平台工具集。

**注意：我没有特别测试过这会对其他已安装的 Visual Studio 版本产生什么影响。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-22T05:15:22.653

只需修改 Windows SDK 配置注册表，如下所示。我希望它会有所帮助。

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows]
"CurrentVersion"="7.1.7600.0.30514"
"CurrentInstallFolder"="C:\\Program Files\\Microsoft SDKs\\Windows\\v7.1\\" 
```

# java - 如何确定 DataHandler.writeTo() 方法当前写入的字节数？

> ID：14241110
> 
> 赞同：4
> 
> 时间：2013-01-09T15:54:00.930
> 
> 标签：java, web-services, progress, mtom

我必须使用 MTOM 从 Web 服务下载文件。我不知道下面的实施细节。我这样做是有效的（响应是从 web 服务返回的对象，数据是`javax.activation.DataHandler`类型，`filePath`是文件，我想在其中保存下载的内容）：

```
DataHandler dataHandler = response.getData();
File file = new File(filePath);
FileOutputStream fileOutputStream = new FileOutputStream(file);
dataHandler.writeTo(fileOutputStream);
fileOutputStream.flush();
fileOutputStream.close(); 
```

但是，我需要弄清楚下载期间写入了多少字节。这可能需要很长时间，这种方式只是等待完成下载然后关闭输出流并继续。

我知道，我可能需要另一个线程来读取写入字节数并对其进行处理（需要它来更新 SWT 应用程序中的 progressBar）。

我的想法是以某种方式扩展 DataHandler，然后定期询问写入了多少字节）。但我是java noob，我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-10T14:37:56.470

如果您将所有内容都读入 a `byte[]`，您将需要足够的内存来保存整个文件。现在这对您来说可能不是问题，但最好不要养成这种坏习惯（这很容易让服务器停机）。

[Apache Commons](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/output/CountingOutputStream.html)和[Google Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/CountingOutputStream.html)有一个`CountingOutputStream`类可以完全满足您的需求，只需计算写入的字节数。如果你不能使用这个库，你可以编写一个类似的类，只需实现`OutputStream`，在构造函数中接收另一个`OutputStream`，每个方法只是增加`byteCount`和委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:58:31.177

我做了一些研究，之前忽略了名为 getInputStream() 的 DataHandler 方法。使用这种方法，我可以做我需要的事情：

```
DataHandler dataHandler = response.getData();
File file = new File(filePath);
FileOutputStream fileOutputStream = new FileOutputStream(file);

// got Input Stream from DataHandler
InputStream is = dataHandler.getInputStream();

// then I can manage writing file my way        
byte data[] = new byte[BUFFER_SIZE];
int br;
Long bytesWritten = 0L;
while ((br = is.read(data)) > 0) {
    fileOutputStream.write(data, 0, br);
    bytesWritten = bytesWritten + br;
    // call some method to update UI progressBar
}

// this is now useless:
// dataHandler.writeTo(fileOutputStream);
fileOutputStream.flush();
fileOutputStream.close(); 
```

# tinyos - TinyOS，重启mote后收不到包

> ID：14241113
> 
> 赞同：0
> 
> 时间：2013-01-09T15:54:04.107
> 
> 标签：tinyos, nesc

伪代码；

1.  1-引导（红色 LED）

2.  广播数据包，发送完成后（绿灯）

3.  接收数据包，解码数据包并相应地设置led为（设置蓝色）
4.  编码后广播数据包，发送完成（设置为绿色）
5.  接收数据包，解码并相应地设置led为（设置7（红+绿+蓝））

* * *

在此阶段之后，mote 1 将投注 LED.set(7)，mote 2 将投注 LED.set(2) [mote 1 已开始传输]，直到它工作得很好。但是当我重新启动 mote 1 时，它一直工作到 2 个伪代码步骤，并且 mote 2 无法接收数据包）

```
 implementation{
 bool busy = FALSE;
 message_t pkt;
 message_t i_pkt;
 event void Boot.booted() {

    call Leds.set(1);
    call AMControl.start();
    printf("Booted %d\n",1);
    call CC2420Packet.setPower(&pkt, 20);
    call CC2420Packet.setPower(&i_pkt, 2);
 }

 event void Timer0.fired() {

    if (!busy) {
       FindRoute_t *btrpkt = (FindRoute_t*)(call Packet.getPayload(&pkt, sizeof (FindRoute_t)));

       btrpkt->counter = 4;
       if (call firstsender.send(AM_BROADCAST_ADDR, &pkt, sizeof(FindRoute_t)) == SUCCESS) {
       busy = TRUE;
       }
    }

 }

 event void AMControl.startDone(error_t err) {
    if (err == SUCCESS) {
       call Timer0.startOneShot(250);
    }
    else {
       call AMControl.start();
    }
 }

 event void AMControl.stopDone(error_t err) {
 } 

 event void firstsender.sendDone(message_t *msg, error_t error) {
   if (&pkt == msg) {
      call Leds.set(2);
      busy = FALSE;
    }
 }

 event message_t* firstreceiver.receive(message_t* msg, void* payload, uint8_t len) {
    if (len == sizeof(FindRoute_t)) {
       FindRoute_t* btrpkt = (FindRoute_t*)payload;
       call Leds.set(btrpkt->counter);

       call Timer1.startOneShot(3000);
    }
    return msg;
 }

  event void Timer1.fired(){

     if (!busy) {
       FindRoute_t *btrpkt = (FindRoute_t*)(call Packet.getPayload(&i_pkt, sizeof (FindRoute_t)));

       btrpkt->counter = 7;
       if (call nextsender.send(AM_BROADCAST_ADDR, &i_pkt, sizeof(FindRoute_t)) == SUCCESS) {
       busy = TRUE;
       }
    }
  }
  event void nextsender.sendDone(message_t *msg, error_t error) {
   if (&i_pkt == msg) {
      call Leds.set(2);
      busy = FALSE;
    }
 }

   event message_t* nextreceiver.receive(message_t* msg, void* payload, uint8_t len) {
    if (len == sizeof(FindRoute_t)) {
       FindRoute_t* btrpkt = (FindRoute_t*)payload;
       call Leds.set(btrpkt->counter);
    }
    return msg;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:37:04.737

你有两个接收器。它们是否连接到两个不同的接收模块？如果没有，接收到的数据包将触发它们的两个接收事件，这可能会导致一些问题。

# android - 无法更改 Nagare 应用程序

> ID：14241114
> 
> 赞同：1
> 
> 时间：2013-01-09T15:54:06.310
> 
> 标签：android, eclipse, android-sdk-tools

我尝试对[Nagare for Android](https://github.com/Dawnthorn/nagare)进行一些更改，看看是否可以修复播放期间的音频跳过问题。我很惊讶我的更改都没有生效，现在我注意到控制台中的原因：

```
[2013-01-09 07:46:27 - Nagare] WARNING: Application does not specify an API level requirement!
[2013-01-09 07:46:27 - Nagare] Device API version is 8 (Android 2.2.2)
[2013-01-09 07:46:27 - Nagare] Application already deployed. No need to reinstall.
[2013-01-09 07:46:27 - Nagare] Starting activity com.giantrabbit.nagare.Nagare on device ... 
```

我做了一些更改，保存，清理了项目，更新了 Android SDK，重新启动了 Eclipse，重新启动了计算机……为什么它不让我构建更改？

即使我注释掉所有 onCreate 代码，如果我将它设置为在那里调试，它也会逐步执行注释掉的代码。那么，编译器一定有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T15:59:44.903

只需卸载应用程序并清除所有应用程序数据。比重新安装。这不会让同样的情况发生。如果之后出现任何问题，那将是一个新问题。

更新：尝试更改工作区并再次检查，重新编译并告诉我们发生了什么。

# ruby - 在 irb 中运行多个命令

> ID：14241118
> 
> 赞同：3
> 
> 时间：2013-01-09T15:54:20.847
> 
> 标签：ruby, irb, mechanize-ruby

我正在使用 Mechanize 抓取需要登录的网站。以下代码使我登录。

```
require 'mechanize'

agent = Mechanize.new
agent.get 'http://www.specialsite.com'

agent.page.form.txtEmail = 'myemail@email.com'
agent.page.form.txtPassword = 'myPassword'
agent.page.form.add_field! "__EVENTTARGET","btnLogin"
agent.page.form.add_field! "__EVENTARGUMENT",""
agent.page.form.submit

agent.page.link_with(:text => "Special Link").click

agent.page.form.txtSearch = "Search Text"
agent.page.form.add_field! "__EVENTTARGET","lbtnSearch"
agent.page.form.add_field! "__EVENTARGUMENT","" 
agent.page.form.submit 
```

我的问题是，如何在 ruby​​ IRB 中运行此代码，以便我可以访问它定义的对象，如“代理”来试验并生成我需要的其余代码？

我试过“加载”。它运行命令，但不会使“代理”之类的对象可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T15:58:09.547

将这些内容按原样写入文本文件，打开 IRB 并键入：

```
File.open("your_file","r").readlines.each{|line| eval(line)} 
```

这有帮助吗？

编辑：文本文件必须存在于您启动 IRB 的同一目录中。一般优势：修改文本文件中的某些内容比摆弄一个巨大的 IRB 单行代码要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T23:23:11.373

使用撬：

```
require 'pry'
... your code
binding.pry 
```

当您运行脚本时，它会停止，`binding.pry`并且您有一个类似 irb 的 repl（但更好），您可以在其中评估对象。用于`exit`继续或`exit-program`退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T01:09:12.060

我同意@pguardiaro 使用[Pry](http://pryrepl.org)

但这是您在 IRB 中的操作方式：

`binding.eval(File.read("your_file.rb"), "your_file.rb"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:18:14.687

因为这都是可重复的代码，所以你应该尽可能地尝试实现 DRY（不要重复自己）。我会在一个类中完成所有这些并有一个返回代理的方法。然后在 irb 中，您需要该类并将您的 irb 变量设置为类 getmethod。这样你就已经有了你将用于你的项目 lator 的课程的开始

# c# - Visual Studio 2012 - 条件使用（服务参考）

> ID：14241126
> 
> 赞同：1
> 
> 时间：2013-01-09T15:54:48.237
> 
> 标签：c#, .net, visual-studio, debugging, production-environment

在我的代码中，我目前有：

```
#if (DEBUG)
using GetNewRecordNumber = {dev web service reference}.GetNewRecordNumber;
#else
using GetNewRecordNumber = {prod web service reference}.GetNewRecordNumber;
#endif 
```

这样我就可以做到：

```
 using (GetNewRecordNumber.Tickets_GetNewRecordNumber getNum = new GetNewRecordNumber.Tickets_GetNewRecordNumber()) 
```

在我的代码中。这一切都很好，但我想在应用程序设置中进行切换，以便我可以在运行时更改它。有没有办法解决这个问题，这样切换可以在运行时发生，而不是复制代码？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:02:07.997

预处理器指令在编译之前工作，所以它不会在 rune 时工作。抱歉，您必须取消“#”指令并改用 ConfigurationManager.AppSettings。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T15:57:53.130

不确定您是否会考虑这种重复代码，但也许最直接的方法是为您的服务创建一个包装器类，并在上述位置使用该包装器类。您已经使用这些#if 块复制了大量代码，因此使用包装器甚至可以减少您的总代码并使其更简洁。

另一种选择是手动修改您的服务引用，以便它们从定义您需要的所有成员的通用接口继承，但如果您需要经常更新引用，这可能不是一个好主意。

# php - Yii & Sphinx : searchd error: client version is higher than daemon version (client is v.1.23, daemon is v.1.22)

> ID：14241128
> 
> 赞同：1
> 
> 时间：2013-01-09T15:54:56.233
> 
> 标签：php, yii, sphinx

我在 Yii MVC 下有一个项目，我添加了一个 Sphinx 组件，在这里找到[Yii Sphinx 组件](http://www.yiiframework.com/extension/dgsphinxsearch/)，配置后，我得到了这个错误：

> DGSphinxSearchException searchd 错误：客户端版本高于守护程序版本（客户端为 v.1.23，守护程序为 v.1.22）

这个错误是怎么回事？我应该从中了解什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T01:11:26.590

1.  运行`searchd --help`以获取实际的 sphinxd 服务器版本
2.  [从http://sphinxsearch.com/downloads/archive/](http://sphinxsearch.com/downloads/archive/)下载该版本
3.  替换 Yii 组件中的 sphinxapi.php

# r - 从文本文件中读取数据并排序为向量

> ID：14241132
> 
> 赞同：-5
> 
> 时间：2013-01-09T15:55:11.423
> 
> 标签：r, file, vector

我有一个像这样的数据文件......

```
Control,3
Test,3
Control,3
Control,3
Test,1
Control,3
Control,1 
```

我想将它们加载到 2 个向量测试和控制中。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:01:25.197

尝试`read.csv()`

```
dat <- read.csv(text = "Control,3
Test,3
Control,3
Control,3
Test,1
Control,3
Control,1", header = FALSE)

> dat
       V1 V2
1 Control  3
2    Test  3
3 Control  3
4 Control  3
5    Test  1
6 Control  3
7 Control  1 
```

但是，您需要`read.csv(file = "foo.csv", header = FALSE)`并替换`foo.csv`为文件的路径和名称。

然后

```
test <- with(dat, V2[V1 == "Test"])
control <- with(dat, V2[V1 == "Control"])

> test
[1] 3 1
> control
[1] 3 3 3 3 1 
```

假设我已经明白你想要什么？

# python - 如何从字符串列表创建列表？

> ID：14241133
> 
> 赞同：7
> 
> 时间：2013-01-09T15:55:12.967
> 
> 标签：python

我有一个字符串列表，例如：

```
names = ['apple','orange','banana'] 
```

我想为列表中的每个元素创建一个列表，将其命名为字符串：

```
apple = []  
orange = []  
banana = [] 
```

我怎样才能在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-09T15:58:41.390

您可以通过创建一个`dict`：

```
fruits = {k:[] for k in names} 
```

然后通过（例如：）访问每个`fruits['apple']`- 你不想走单独变量的道路！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-09T16:19:02.947

**始终**使用[Jon Clements 的答案](https://stackoverflow.com/questions/14241133/how-can-i-create-lists-from-a-list-of-strings/14241195#14241195)。

* * *

`globals()`返回支持全局命名空间的字典，此时您可以像对待任何其他字典一样对待它。 **你不应该这样做。** 它会导致命名空间的污染，可以覆盖现有变量，并使调试由此产生的问题变得更加困难。

```
for name in names:
    globals().setdefault(name, [])
apple.append('red')
print(apple)  # prints ['red'] 
```

您必须事先知道该列表包含“apple”，以便稍后引用变量“apple”，此时您可以正常定义该变量。所以这在实践中是没有用的。鉴于乔恩的回答也产生了一本字典，使用`globals`.

# prolog - 您将如何扩展此搜索以适应贪婪搜索？

> ID：14241135
> 
> 赞同：0
> 
> 时间：2013-01-09T15:55:19.417
> 
> 标签：prolog

```
dfs([Node | OPEN], _ , Goal) :-  
Node==Goal, !,          
write('yes! goal reached.... ' - Goal), nl.         

dfs([Node | OPEN],CLOSED, Goal) :- 
  findall(                        Next,                 
  (
    arc(Node, Next),        Next
    not(member(Next, OPEN)),            not(member(Next, CLOSED))
      ), 
      NewNode               
     ), 

      append(NewNode, OPEN, NewOPEN),   
    write('OPEN = frontier of search...'), write(NewOPEN),nl,
    write('CLOSED = nodes already visited...'), write([Node | CLOSED]),nl,nl,
  dfs(NewOPEN, [Node | CLOSED], Goal).  % recurse with new data 
```

弧（a，b）。弧（a，c）。弧（b，d）。弧（b，e）。弧（c，f）。弧（f，g）。弧（e，z）。弧（d，e）。弧（z，g）。弧（z，d）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:09:52.967

像这样的东西：

```
dfs(Node, Goal) :- !.         

dfs(Node, Goal) :- 
    arc(Node, Next),
    score(Node, Next, S),
    not (score(Node, Next, S1), S1 > S), write(Next),
    dfs(Next, Goal). 
```

然后您需要为每条弧线定义一个分数，例如 score(a, b, 3)。

# html - JWPlayer XML 配置中的备用视频类型

> ID：14241137
> 
> 赞同：0
> 
> 时间：2013-01-09T15:55:36.573
> 
> 标签：html, jwplayer

我的播放器通过 RMTP 流式传输视频，但这仅适用于 Flash 版本。对于 iPad 等，JWPlayer 回退到 HTML5 版本，这需要不同的文件。它可用，但我只想提供一个`.xml`文件，播放器自动选择文件。文档说我可以有一个`<provider>`标签，但没有告诉我如何拥有其中的几个。

我知道这可以在`.setup()`函数中完成，有点。但是由于我`.xml`在那里为视频文件提供了一个文件，所以我想要那里的替代视频。

RMTP 可用时需要使用，其他 HTML5 兼容文件仅在 flash 不可用或无法安装时使用。JWPlayer 的版本是 5.10。

# android - 根据条件动态更改菜单选项。

> ID：14241138
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:55:37.193
> 
> 标签：android, eclipse, if-statement, menu

`menu layout`如果在另一个上，我如何让and 功能改变`java class`？我对此有点陌生，所以我只知道不同的屏幕和一些代码，但并不多..

所以我想`menu layout`在我命令之后改变。

例如：`layout`是全屏、选项和退出。当我单击全屏时，我希望菜单更改，使其现在看起来像：退出全屏，选项，退出。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:01:26.370

您可以使用一些布尔值或您想要的任何其他变量来保持状态。[然后在onPrepareOptionsMenu](http://developer.android.com/reference/android/app/Fragment.html#onPrepareOptionsMenu%28android.view.Menu%29)中检查这些并填充正确的菜单。

# deprecated - presentViewController 在 ios 6 中不起作用

> ID：14241141
> 
> 赞同：0
> 
> 时间：2013-01-09T15:55:47.477
> 
> 标签：deprecated

我使用以下代码切换到另一个 xib：

-(IBAction)switchpage:(id)sender {

JazzViewController *jazz = [[JazzViewController alloc] initWithNibName:"JazzWindow" bundle:nil];

jazz.modalTransitionStyle = UIModalTransitionStyleCoverVertical; [自我presentModelViewController：爵士动画：是]；

}

将其更改为 iOS 6 的此代码：

-(IBAction)switchpage:(id)sender {

JazzViewController *jazz = [[JazzViewController alloc] initWithNibName:"JazzWindow" bundle:nil];

jazz.modalTransitionStyle = UIModalTransitionStyleCoverVertical; [自我presentViewController：爵士动画：是完成：无]；

}

但它仍然无法在 IOS 6 中运行（使用信号 SIGBRT 崩溃回 Xcode），它在我的模拟器中的 iOS 5 en 5.1 中运行。有人知道我应该做什么吗？

# ios - 绕圈旋转

> ID：14241143
> 
> 赞同：1
> 
> 时间：2013-01-09T15:56:02.587
> 
> 标签：ios, objective-c, cocoa-touch, drag-and-drop, geometry

我需要在目标 c >> [http://bit.ly/rHzVkF中实现以下应用程序](http://bit.ly/rHzVkF)

如何通过在应用程序中拖动来旋转圆圈？你知道一些类似的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:11:02.160

在您的 touches started 方法中，您需要检查 x 和 y 并查看它是否位于两个旋转标签的边界内。

现在，在您移动触摸时，您需要检测 x 和 y 位置的变化（增量）并使用 ATAN2(dx,dy) 我相信转换为弧度以进行旋转。如果我错了，你可以在纸上算出来，这是简单的三角函数（别忘了 import `<Math.h>`）

使用这个用于旋转的新变量，将其应用到您要使用的旋转对象`CGAffineTransformRotate();`（我相信这是核心图形的一部分，因此请确保您也已导入该库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:17:13.123

> @ihkawiss 你知道如何用 cocoa-touch 画一个圆圈吗？– vikingosegundo

@ihkawiss，我猜，你不想回答我。没问题。你的任务需要分成更小的任务。

1.  在给定的默认位置（手柄）上绘制小圆圈
2.  画大圆圈
3.  获取触摸坐标并检查它是否在句柄内，继续下一个点。
4.  计算圆心、触摸位置和固定点（即：顶部中心）之间的角度。
5.  用圆的角度、定点和半径计算手柄的新位置
6.  只要触发触摸，就重新绘制所有内容。

您应该能够为网络中的每个步骤和堆栈溢出获得足够的信息。如果你被卡住了（这很正常，也是意料之中的），回来，展示你到目前为止所得到的，并解释你卡在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:50:19.947

我将尝试将我的两分钱投入其中，因为我只需要解决类似的情况。

您必须在要处理所有运动的视图中实现触摸方法

*   (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
*   (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
*   (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event

Albert 在书面上说您需要检测 x 和 y 位置的变化是正确的。您可以从 NSSet 中获取位置，该位置在方法触发时发送到方法中。

在这些方法中，您需要实现此代码的一些变体才能使用触摸数据：

```
for(UITouch *t in touches){
    if([t tapCount] > 1){
        return;
    }
    CGPoint loc = [t locationInView:self.view]; 
```

一旦获得用户触摸位置的 x 和 y，在本例中为 CGPoint loc，您可以运行 math.h 库中的 atan2 方法并取回圆的弧度。您需要 #include < math.h > 才能使用 atan2()

atan2() 需要两个参数才能工作，两个 y 点和两个 x 点之间的差异。在我的例子中，我使用了当前（触摸 y 点，- 圆心 y）和当前（触摸 x 点，- 圆心 x）。

```
 double rads = atan2((loc.y - (self.frame.size.height/2)), (loc.x - (self.frame.size.width/2))); 
```

从那里你可以用这些信息做很多事情。要计算圆周围的新 x 和 y 位置，您需要利用余弦和正弦函数来计算正确的坐标。

```
 newXposition = CenterX + cos(rads) * radiusOfCircle
   newYposition = CenterY + sin(rads) * radiusOfCircle 
```

您可以通过将圆的中心 X 位置添加到 cos 的结果（输入我们刚刚得到的弧度）乘以圆的半径来获得新的 xPosition 而新的 yposition 是通过做同样的事情获得的用 sin() 代替。

所以我的代码看起来像这样......

```
 float radius = 61;
    float newXPos = 140 + (cos(rads) * radius);
    float newYPos = 165 + (sin(rads) * radius); 
```

祝你好运，希望这可以帮助你开始。这东西可能很棘手

# c# - 使用单击部署的我的 WPF 应用程序无法启动

> ID：14241156
> 
> 赞同：0
> 
> 时间：2013-01-09T15:56:25.270
> 
> 标签：c#, wpf, clickonce

我有一个简单的 WPF 应用程序，我使用单击一次部署到我的计算机上的共享文件夹，以便可以通过本地网络安装它。当我点击安装按钮时，它会提示我下载/保存安装文件，当我运行它时，它会将应用程序安装到我的计算机上。但是，当我尝试启动它时，我得到了这个屏幕

![在此处输入图像描述](../Images/11b56a88b6498edd13dfa72ae142bbde.png)

然后什么也没有发生。有任何想法吗...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:44:18.047

该对话框正在检查更新。我最好的猜测是您在应用程序启动时发生了未处理的异常，这会导致您的应用程序崩溃。

对于 WPF，您需要为这两个事件添加处理程序：

```
AppDomain.CurrentDomain.UnhandledException
Application.Current.DispatcherUnhandledException 
```

我通常在我的应用程序类的`OnStartup`方法中附加到它们。在事件处理程序中，我将记录异常，以便查看生产中出现的问题。

# c# - 可移植类库读取设置信息

> ID：14241161
> 
> 赞同：4
> 
> 时间：2013-01-09T15:56:56.727
> 
> 标签：c#, portable-class-library, application-settings

我有一个可移植的类库，我需要在托管它的设置的应用程序中获取它。

（即 web.config、app.config 或 Windows (phone) 8 设置，无论它们存储在哪里）

有没有办法做到这一点。我一直在疯狂地搜索，找不到任何可以让我阅读这些信息的东西，我什至找不到任何可以告诉我应用程序配置文件所在位置的东西。

有人对如何不可知地读取 PCL 中的应用程序设置有任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:13:56.157

在您的 PCL 中创建一个公共类，其中包含您 PCL 所需数据的成员。让使用您的 PCL 库的应用程序使用您从其环境中需要的数据填充该类的实例，并将其提供给需要这些值的 PCL 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:38:38.010

您不能直接从可移植库中执行此操作。我建议使用抽象模式。创建一个接口（即 IApplicationSettings 或其他东西）封装您需要访问的功能。然后在每个平台的特定于平台的库中使用特定于平台的设置 API 实现该接口。将实现的实例从特定于平台的代码传递给可移植代码，以便它可以访问该功能。

可以在这篇博文中找到更多详细信息：[如何使便携式类库为您工作](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-18T17:08:15.220

**这是可能的：**我已经实现了一个 PCL 库，它提供了你正在寻找的东西。看一下：

*   [https://github.com/MyToolkit/MyToolkit/wiki/ApplicationSettings](https://github.com/MyToolkit/MyToolkit/wiki/ApplicationSettings)

该类适用于 WinRT、WP8 和 WPF/桌面应用程序。在内部，它使用反射根据当前平台调用正确的 api。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T16:09:07.533

无法从可移植类库中读取这些设置。

您可以在 PCL 中实例化一个自定义类并从外部填充它。

# git - 使用 GitHub 在系统之间同步项目

> ID：14241163
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:57:01.897
> 
> 标签：git, github

我正在用我的笔记本电脑和家用电脑在一个网站上工作。以前我只是使用 FTP 下载，但自从我开始使用 GitHub 后，这变得有点复杂。

如何将我从计算机 A 提交到 GitHub 的更改发送到计算机 B？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T15:59:53.613

我猜是前 SVN 用户？您不会从计算机 A “提交”到 github，而是从计算机 A “推送”到 github。同样，您可以使用 . 从计算机 B 拉到您的计算机`git pull`。

如果还没有，则需要先使用克隆 github 存储库`git clone`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T15:59:23.473

跑：

```
git pull 
```

看[拉手手册](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)

# php - MAX 由另一个表约束的两行

> ID：14241166
> 
> 赞同：2
> 
> 时间：2013-01-09T15:57:13.003
> 
> 标签：php, mysql

我正在做一些事情，我需要能够从两行中选择多列的 MAX，它们在另一个表上的 ID 中匹配，由`FROM_UNIXTIME(date, "%m%")`.

[SQLFiddle 示例](http://sqlfiddle.com/#!2/219b6/1)

我在上面整理了一个 SQL Fiddle 示例。

在示例中，我有两个表，`Pairs`并且`Data`. 这些对由`id`（非主键）连接。所以，`TestDeviceA`两者`TestDeviceB`都有一个`id`1；`TestDeviceC`两者`TestDeviceD`都有一个`id`2。

对于`Data`表中的每个不同日期，我需要提取`data1`两个设备之间的列的最大值、`data2`列的最大值，对于`data3`.

例子：

```
date  |  device      |  data1  |  data2  |  data3 
-------------------------------------------------
1234    TestDeviceA       222       234       555
1234    TestDeviceB       292       204       155 
```

预期的结果将类似于以下内容：

```
1234    TestDeviceA/TestDeviceB    292   234   555 
```

示例查询：

```
SELECT FROM_UNIXTIME(date, "%m"), FROM_UNIXTIME(date, "%d"), p.id as PairID, GROUP_CONCAT(device SEPERATOR '/'), MAX(data1), MAX(data2), MAX(data3) 
FROM Data LEFT JOIN Pairs p on p.devicename=device 
GROUP BY p.id,date 
```

我觉得查询中可能缺少一些东西。

什么是更有效和更准确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:10:12.293

我遇到的问题是，我的`data2`和`data3`列是`binary(16)`（它们存储来自接口统计的字节）。

我不得不补充：

```
MAX(cast(s.data2 as unsigned integer)) as data2 
```

# mysql - 如何使用 CodeIgniter ActiveRecord 按字母顺序对 MySQL 结果进行排序，但首先使用搜索词匹配？

> ID：14241167
> 
> 赞同：10
> 
> 时间：2013-01-09T15:57:12.520
> 
> 标签：mysql, sorting, select, sql-order-by

假设我们在一个表中有 4 个项目：

1.  米歇尔乔丹
2.  汤姆马克乔丹
3.  乔丹·约翰
4.  亚当·乔丹·罗伯特

搜索词是“**乔丹**”，我怎样才能得到按字母顺序排序但搜索词首先匹配的结果，如下所示：

1.  **乔丹**·约翰
2.  米歇尔乔丹**_**
3.  汤姆**乔丹**罗伯特
4.  亚当**马克乔丹**

我使用这段代码，但没有得到我想要的：

```
$this->db->select('id, name');
$this->db->from('users');
$this->db->like('name', $search_term);
$this->db->order_by('name', 'asc');
$query = $this->db->get(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T05:47:15.947

试试这个：

```
SELECT id, fullName 
FROM test 
ORDER BY FIND_IN_SET('Jordan', REPLACE(fullName, ' ', ',')), fullName; 
```

检查此链接[**SQL FIDDLE DEMO**](http://sqlfiddle.com/#!2/41cc0/1)

**输出**

```
| ID |          FULLNAME |
|----|-------------------|
|  1 |       Jordan John |
|  2 |     Michel Jordan |
|  4 | Tom Jordan Robert |
|  3 |  Adam Mark Jordan | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-07T07:22:45.097

你可以试试这个：

```
$this->db
     ->select('id, fullName')
     ->from('test')
     ->order_by("FIND_IN_SET('Jordan', REPLACE(fullName, ' ', ',')) , fullName");
$query = $this->db->get(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T07:09:00.127

我对你的尝试：

```
$this->db->select('id, name, (SELECT name FROM users WHERE name REGEXP "^'.$search_term.'") as "regexp_match"');
$this->db->from('users');
$this->db->like('name', $search_term);
$this->db->order_by('name', 'asc');
$this->db->order_by("regexp_match", "asc");
$query = $this->db->get(); 
```

我知道这看起来有点奇怪，但相信我，你想使用 REGEXP。:D

# c# - 使用 Spoon Studio .Net 4.0 构建的应用程序中带有 XmlSerializers 的 FileNotFoundException

> ID：14241169
> 
> 赞同：3
> 
> 时间：2013-01-09T15:57:32.587
> 
> 标签：c#, visual-studio-2012, xml-serialization, clr4.0

我在使用 Spoon Studio 和 .Net 4.0 打包的虚拟化应用程序中遇到以下异常

```
Exception='System.IO.FileNotFoundException: Could not load file or assembly 'file:///C:\temp\Serialization\mf3je3jx.dll' or one of its dependencies. The system cannot find the file specified.
File name: 'file:///C:\temp\Serialization\mf3je3jx.dll'
at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks)
   at System.Reflection.Assembly.Load(AssemblyName assemblyRef, Evidence assemblySecurity)
   at System.CodeDom.Compiler.CompilerResults.get_CompiledAssembly()
   at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
   at System.Xml.Serialization.XmlSerializer.GenerateTempAssembly(XmlMapping xmlMapping, Type type, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace) 
```

这在我们使用 .Net 3.5 之前工作正常，但在迁移到 .Net 4.0 包后，我们开始看到此错误。

我知道解决这个问题的一种方法是预先生成 XmlSerializers，但在我们的例子中，我们有多个加载项也需要重建，我们希望避免这样做。

**我的问题是为什么会发生这种情况？为什么运行时无法在运行时生成序列化程序？**我可以看到在 temp 目录中生成了 .cs 和 .out 文件（dll 也暂时生成并立即删除）。

如果我在没有虚拟化的情况下运行我的应用程序，它可以正常工作并且能够构建和加载内存中的序列化程序。在这两种情况下，运行应用程序的用户都是相同的。

欢迎任何建议。

> 这是一个单独的问题，但我无法在 VS 或 windbg 中进行调试（我得到 clr version mismatch error b/w VS and Application）
> 
> 原因是：在机器上安装 VS12/.Net 4.5 将 CLR 版本号升级到 4.0.30319.17929，而应用程序使用 4.0.30319.1。并且 VS 不允许我附加到这个应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:53:06.807

我们找到了问题所在。

Spoon Studio 用于 .Net 4.0 的默认 .Net 映像中没有所有必需的程序集。

这是 Spoon Studio 中的一个错误。我通过从 SpoonStudio 团队获取新的自定义图像来使其工作。

# c++ - C++ 在 LD_LIBRARY_PATH 上查找文件

> ID：14241172
> 
> 赞同：1
> 
> 时间：2013-01-09T15:57:45.647
> 
> 标签：c++, c, stat

在 C/C++ 中是否存在检查特定文件是否在特定路径上的现有方法？我想象的语法可能看起来像 stat() 但带有文件名和路径的附加参数。

```
pathstat( struct stat stResult, const char* filename, const char* path ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:12:11.137

使用`access()`带有`F_OK`标志的函数将检查您的文件是否存在。但在此之前，您必须在将文件路径作为输入参数传递给函数之前准备文件路径（来自`filename`和变量） 。`path``access()`

在这个答案中，我假设您使用 linux 作为平台

```
void pathstat( struct stat stResult, const char* filename, const char* path )
    char *file;
    int path_len;

    if (!filename) {
        // set error in the stResult
        return;
    }

    path_len = path ? strlen(path) : 0;

    file = malloc((strlen(filename) + path_len + 2) * sizeof(char));
    // PREPARE THE FILE PATH
    if (path && path[0] && path[path_len-1]=='/')
        sprintf(file,"%s%s",path,filename);
    else if (path && path[0])
        sprintf(file,"%s/%s",path,filename);
    else
        file = strcpy(file,filename);

    //NOW CHECK IF THE FILE PATH EXIST WITH ACCESS
    if (access(file, F_OK) != -1) {
        //file exist
    } else {
        // file does not exxit
    }
    free(file);
} 
```

# android - 已编译 LKM 的可互换性

> ID：14241174
> 
> 赞同：3
> 
> 时间：2013-01-09T15:57:52.540
> 
> 标签：android, linux-kernel, arm, cross-compiling, kernel-module

是否可以在具有版本（android stock-kernel）的内核中使用为`3.0.8+ mod_unload ARMv5`（我的自制内核）编译的可加载内核模块？`3.0.31-gd5a18e0 SMP preempt mod_unload ARMv7`

模块本身几乎什么都没有，只是

```
// Defining __KERNEL__ and MODULE allows us to access kernel-level code not usually available to userspace programs.
#undef __KERNEL__
#define __KERNEL__

#undef MODULE
#define MODULE

// Linux Kernel/LKM headers: module.h is needed by all modules and kernel.h is needed for KERN_INFO.
#include <linux/module.h>    // included for all kernel modules
#include <linux/kernel.h>    // included for KERN_INFO
#include <linux/init.h>        // included for __init and __exit macros

MODULE_AUTHOR("martin");
MODULE_LICENSE("GPL");

static int __init hello_init(void)
{
    //printk(KERN_INFO "Hello world!\n");
    return 0;    // Non-zero return means that the module couldn't be loaded.
}

static void __exit hello_cleanup(void)
{
    //printk(KERN_INFO "Cleaning up module.\n");
}

module_init(hello_init);
module_exit(hello_cleanup); 
```

我正在强制使用 insmod，但随后内核崩溃：

> <1>[ 328.025360] 无法处理虚拟地址 00000061 处的内核 NULL 指针取消引用 <1>[ 328.025695] pgd = c1be8000 <1>[ 328.025848] [00000061] *pgd=00000000 <0>[ 328.026184] 内部错误：Oops： 5 [#1] PREEMPT SMP <4> [328.026519] 模块链接在：airstream_interceptor(+)

我用

```
CROSS_COMPILE=/home/adminuser/WORKING_DIRECTORY/prebuilt/linux-x86/toolchain/arm-eabi-4.4.3/bin/arm-eabi-
KDIR    ?= /home/adminuser/WORKING_DIRECTORY/android-3.0
ARCH=arm 
```

用于构建内核和现在构建模块。但是应该插入它上面的系统使用它自己的工厂内核。

我尝试构建一个可用于多个 android 手机（arm、armv5、armv7 等）的内核模块，但我想对所有手机都使用 1（如果可以的话）。

（编辑）

结论#1

1.  不可能为所有 ARM 设备编译一个版本：

    `compile LKM for kernel 3.0.8 for ARMv5 and use it on a kernel 3.0.39 ARMv7`

2.  它可能（目前未经测试！）可以在最低级别（ARMv5）上编译并在更高级别（ARMv6，ARMv7）上使用它

    `compile LKM for kernel 3.0.8 for ARMv5 and use it on a kernel 3.0.8 ARMv7`

3.  可以交换内核版本（如果是简单的 LKM）

    `compile LKM for kernel 3.0.8 for ARMv5 and use it on a kernel 3.0.39 ARMv5`

目前开放的问题：

1.)

我尝试（使用 common-kernel 3.0.8 和 omap-kernel 3.0.39）为 ARMv7 构建，但结果始终是 ARMv5-LKM。

我手动编辑了 .config，删除了 ARMv5 行并添加了 ARMv7 行（在 .config 中没有）：

```
#CONFIG_CPU_32v5=y # I added the #
CONFIG_CPU_V7=y # didn't exist 
CONFIG_CPU_32v7=y # didn't exist 
```

但是如果我在内核源代码上重新运行“make”，文件会自动编辑，我的 v7-config 会被删除。几个月前，我记得这没问题，我只是添加了 2 行，它就起作用了。

这是内核源代码还是使用的工具链的问题？

2.)

鉴于 LKM 构建，例如“omap-kernel”和“common-kernel”之间有什么区别？只是另一个内核版本（例如，common-kernel 现在有 3.0.53 和 omap-kernel 3.0.39）？我认为我可以“忽略”特定变体并使用通用内核进行 LKM 编译？

非常感谢目前的碱度、auselen 和 Marko - 你正在帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:12:34.450

不同版本的 Linux 不能使用相同的二进制驱动程序。

> > Linux 没有二进制内核接口，也没有稳定的内核接口。（[来源](http://www.kernel.org/doc/Documentation/stable_api_nonsense.txt)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:13:32.673

不，这是不可能的。Linux 内核是[特定于体系结构的](http://www.kernel.org/doc/Documentation/kbuild/modules.txt)，ARMv5 模块与 ARMv7 不兼容。需要不同的头文件，它们将具有不同的指令集、寄存器映射或任意数量的重要变体。

无论如何，在这种情况下内核版本也不同，这意味着内核 API 可能会有所不同，因此即使架构相同，内核模块也很有可能无法工作。

您必须交叉编译内核模块的不同版本。如果您可以访问整个内核树，这并不太难。制造商应该已经发布了他们的内核源代码（根据 GPL）。如果他们没有，他们欠你的资源。

如果您有兴趣阅读加载内核模块的细节，IBM 有一个很棒的“解剖”系列文章。这是关于[可加载内核模块](http://www.ibm.com/developerworks/linux/library/l-lkm/)的。跳转到“模块加载详细信息”部分以了解为什么内核拒绝在没有强制加载的情况下插入您的模块。

# java - 将图像添加到框架中，而不是在中心，但应该是.. + 游戏编程一般

> ID：14241178
> 
> 赞同：-1
> 
> 时间：2013-01-09T15:58:00.633
> 
> 标签：java, rendering, game-loop

我刚开始学习游戏编程，在大学学习了 1 个学期的课程后，所以我认为我已经准备好并且我真的很想这样做，所以首先：1）什么是好的学习资源？Ive googlef 很多，有两本书：Killer Game Programming in Java 和 Begining java SE6 game programming。一个过于具体又不具体，另一个解释得很少，所以很难理解什么是什么。尤其是渲染、缓冲区、如何渲染到小程序、框架和面板。任何帮助将不胜感激；）谢谢！

我写了一个非常基本的代码，移动一个盒子，一切都很好，但是盒子不在中间，因为它应该是：

物体：

```
 package milk;

    public class Thing 
    {
        double x,y;
        Shape shape;
        int[] thingx={-5,5,5,-5};
        int[] thingy={5,5,-5,-5};

    Thing(double x, double y)
    {
        setX(x);
        setY(y);
        setShape();
    }

    public void setX(double x)
    {
        this.x=x;
    }

    public void setY(double y)
    {
        this.y=y;
    }

    public void setShape()
    {
        this.shape=new Polygon(thingx,thingy,thingx.length);
    }

    public double getX()
    {
        return x;
    }

    public double getY()
    {
        return y;
    }

    public Shape getShape()
    {
        return shape;
    }

    public void incX(int i)
    {
        this.x+=i;
    }

    public void incY(int i)
    {
        this.y+=i;
    }

} 
```

面板：

```
 package milk;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.AffineTransform;

import javax.swing.JPanel;

@SuppressWarnings("serial")
public class MilkPanel extends JPanel implements Runnable, KeyListener{

    Thread animator;
    Graphics2D g2d;
    Thing thing=new Thing(320,240);
    AffineTransform identity = new AffineTransform();

    MilkPanel()
    {
        setSize(640,480);
        setBackground(Color.black);
        setFocusable(true);
        requestFocus();
        addKeyListener(this);
    }

    public void addNotify() 
    {
        super.addNotify();
        animator = new Thread(this);
        animator.start();
    }

    public void paint(Graphics g)
    {
        g2d=(Graphics2D)g;

        g2d.setColor(Color.black);
        g2d.fillRect(0, 0, getSize().width,getSize().height);
        drawThing();
        g.dispose();
    }

    public void drawThing()
    {
        g2d.setTransform(identity);
        g2d.translate(thing.getX(), thing.getY());
        g2d.setColor(Color.orange);
        g2d.draw(thing.getShape());
    }
    public void run()
    {
        while(true)
        {
            try
            {
                Thread.sleep(20);
            }
            catch(Exception e)
            {

            }
            repaint();
        }
    }

    public void keyPressed(KeyEvent e) 
    {
        int key=e.getKeyCode();
        switch(key)
        {
        case KeyEvent.VK_UP:
            thing.incY(-5);
        break;

        case KeyEvent.VK_DOWN:
            thing.incY(5);
        break;

        case KeyEvent.VK_RIGHT:
            thing.incX(5);
        break;

        case KeyEvent.VK_LEFT:
            thing.incX(-5);
        break;
        }
    }

    public void keyReleased(KeyEvent e) {   }

    public void keyTyped(KeyEvent e) {  }

} 
```

主要的：

```
 package milk;

import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JFrame;

@SuppressWarnings("serial")
public class MilkIt extends JFrame {

    public MilkIt() {

        add(new MilkPanel());

        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setSize(640,480);
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args) {
        new MilkIt();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:21:23.610

看起来您已将框的位置设置为点 (320,240)，这确实是 (640,480) 的一半。然而，一个对象的 X、Y 位置实际上是它的左上角。此外，您可能希望创建一种方法来通用地设置此信息，而不是对其进行硬编码。

如果你想在给定的轴上找到一个对象的中心位置（这适用于 X、Y 或 Z，无论你是在 2D 还是 3D（或更多！？）），你想把它的一半大小放在该轴并从其位置（实际上是一个角）中减去 if；结果将是中心。

您正在寻找的算法本质上是这样的：

```
xPos = (screenXSize / 2) - (xSize / 2);
yPos = (screenYSize / 2) - (ySize / 2); 
```

为了进一步标准化，请考虑根据您使用的维度将变量放入数组中 - 然后我所说的使用 2D 或 3D 会自动应用，无论您在做什么（您甚至可以混合和匹配 2D 和同一游戏中的 3D 元素，由于某些原因很常见）。

```
for (int i = 0; i < DIMENSIONS; i++) {
    pos[i] = (screenSize[i] / 2) - (size[i] / 2);
} 
```

# android - 检查设备是否已通过无线 ADB 连接？

> ID：14241179
> 
> 赞同：2
> 
> 时间：2013-01-09T15:58:01.850
> 
> 标签：android, adb

如果我的设备已向 Wireless ADB 开放，我如何确定其他设备是否已连接到我的设备？目前，当有人成功连接到我的手机时，没有警告（至少在我的设备上）提醒我。

我知道我必须不遗余力地允许无线连接，当您不打算使用它时将其保留是非常愚蠢的，我只是好奇是否可以通过编程方式知道这些事情。

是否有`dump`我可以跑步或可以`cat`查看是否有连接的路径？当有东西尝试连接时，我的代码会收到通知吗？如果我可以判断某物是否连接，我可以获得多少关于连接的信息（如果有）？这些都需要root吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T12:46:20.630

我在同一条船上，在这里我得到了我需要的东西：

> 网络统计-lptu | grep -E '5555.*已建立' | 剪切 -s -d ':' -f2 | awk '{打印 $2}'

这显示了连接到android设备的IP！您可以毫无问题地更改端口

然后，您可以使用“IF”语句中的信息，例如在白名单或黑名单上 grep IP！

您可以使用 Scripting Layering For Android 并在有人尝试连接或发出推送通知时发出 Toast 通知，并能够显示对话框要求执行某些操作，例如禁用 adb 无线。

这是启用/禁用 ADB Wireless 的一种方法：

使能够：

> setprop service.adb.tcp.port 5555 ; 停止 adbd ; 启动 adbd

禁用：

> setprop service.adb.tcp.port -1 ; 停止 adbd ; 启动 adbd

# javascript - 当内部 div 在 Firefox 中固定位置时，MouseEvents 不会在主体上触发

> ID：14241180
> 
> 赞同：0
> 
> 时间：2013-01-09T15:58:02.303
> 
> 标签：javascript, html, google-chrome, firefox, cross-browser

看[这个例子](https://dl.dropbox.com/u/44648654/stackoverflow/positionFixedTest/test.html)
下面是代码：
CSS:

```
div {
   position:fixed;
   top:100px;
   left: 320px;
   border: solid 1px blue;
} 
```

Javascript：

```
 var i = 1;
 $(document.body).mousemove(function () {
     $("#text").html(i++);
 }); 
```

HTML：

```
<body>
    <div>
      <span>Test Text: </span>
      <span id="text"></span>
    </div>
</body> 
```

此代码仅在鼠标移到主体上时更新跨度。它在 Google chrome 中运行良好，但在 Firefox 中，跨度仅在鼠标移到 div 上时更新，为了调试，我查看了 firebug，发现 body 的高度为 0，所以鼠标实际上并没有在 body 上移动，但是在谷歌浏览器正文中涵盖了整个文档。

所以我的问题是：

1.  哪个是正确的行为？（chrome或firefox）？

2.  是否在某处记录了正确的行为？

同样令人惊讶的是，当我在[jsfiddle](http://jsfiddle.net/bwd5m/)中添加这段代码时，chrome 开始表现得像 firefox，有人能解释一下这种不寻常的行为吗？

编辑：我知道我可以通过添加到正文使代码在两个浏览器中工作`height:100%`，我想知道为什么浏览器中的这种不同行为和正确的行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:24:23.030

如果添加此 css，您可以看到发生了什么：

```
body { border: 1px solid red; } 
```

我不完全确定其中的原因，但 Chrome 决定“body”元素应该是窗口的整个高度，而 Firefox 将 body 元素折叠成一行。我相信主体折叠是正确的行为，因为“块”元素（例如`<body>`or `<div>`）只应与包含其内容所需的高度一样高（并且由于您将内部 div 设置为绝对定位，因此不会将其纳入计算其高度时考虑）。

正确的修复取决于您的预期结果，但您可以使用`document`or`window`代替，`document.body`因为它们代表整个可视窗口，而不仅仅是实际`<body>`元素。

您还可以将您的身体设置为特定高度，例如 100%。或者，一旦您将更多内容添加到正文（不是绝对定位的内容），它将“填充”并导致 mousemove 事件正常触发，因此您不需要任何这些修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T17:43:46.937

除了亚历克斯的回答，我仍然对不同的行为感兴趣。我找到了解决方案：在 jsfiddle 中，您不应该在 html 中添加“body”元素。如果您删除它，那么您将获得与独立页面相同的行为。

更新：事实并非如此。真正的原因是单机页面错过了

```
<!DOCTYPE html> 
```

导致 HTML 版本差异的声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:04:38.000

我不知道为什么，但这在[Firefox](http://jsfiddle.net/svineet/bwd5m/2/)上
也`document.body`有效。`document`
`$(document.body).mousemove(function () {`

# r - 使用谷歌的邮政编码距离

> ID：14241184
> 
> 赞同：12
> 
> 时间：2013-01-09T15:58:20.860
> 
> 标签：r, google-maps, google-maps-api-3, google-visualization

我有两个邮政编码列表（在 R 中）...一个孩子的地址及其学业成绩和一个学校...

我希望能够为每个孩子找到最近的学校......所以大概需要通过转换为 long 和 lat 值来计算邮政编码之间的距离？

然后我希望能够在谷歌地图上绘制每所学校的所有孩子......看看住在学校附近的孩子是否取得更好的成绩......也许为孩子们绘制不同颜色的学校，以及孩子们根据他们的分数有一个颜色渐变？

也许使用 googleVis 包的东西？

所以例如...

如果我们有 3 个孩子和 2 所学校的数据...

```
student.data <- cbind(post.codes=c("KA12 6QE", "SW1A 0AA", "WC1X 9NT"),score=c(23,58,88))
school.postcodes <- c("SL4 6DW", "SW13 9JT") 
```

（注意我的实际数据显然比给定的数据要大得多，因此可扩展性会很有用......）

googleVis 或任何其他软件包应该怎么做才能完成上述操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T18:04:50.677

我会从这样的事情开始以获得纬度/经度

**获取每个邮政编码的纬度/经度**

```
library(XML)
school.postcodes <- c("KA12 6QE", "SW1A 0AA", "WC1X 9NT")
ll <- lapply(school.postcodes,
    function(str){
       u <- paste('http://maps.google.com/maps/api/geocode/xml?sensor=false&address=',str)
       doc <-  xmlTreeParse(u, useInternal=TRUE)
       lat=xpathApply(doc,'/GeocodeResponse/result/geometry/location/lat',xmlValue)[[1]]
       lng=xpathApply(doc,'/GeocodeResponse/result/geometry/location/lng',xmlValue)[[1]]
       c(code = str,lat = lat, lng = lng)
})
# get long/lat for the students
ll.students <- lapply(student.data$post.codes,
             function(str){
               u <- paste('http://maps.google.com/maps/api/geocode/xml?sensor=false&address=',str)
               doc <-  xmlTreeParse(u, useInternal=TRUE)
               lat=xpathApply(doc,'/GeocodeResponse/result/geometry/location/lat',xmlValue)[[1]]
               lng=xpathApply(doc,'/GeocodeResponse/result/geometry/location/lng',xmlValue)[[1]]
               c(code = str,lat = lat, lng = lng)
             })

ll <- do.call(rbind,ll)
ll.students <- do.call(rbind,ll.students)

do.call(rbind,ll)
      code         lat          lng         
[1,] "KA12%206QE" "55.6188429" "-4.6766226"
[2,] "SW1A%200AA" "51.5004864" "-0.1254664"
[3,] "WC1X%209NT" "51.5287992" "-0.1181098" 
```

**获取距离矩阵**

```
library(RJSONIO)
dist.list <- lapply(seq(nrow(ll)),
                    function(id){
                      url <- paste("http://maps.googleapis.com/maps/api/distancematrix/json?origins=",
                                   ll[id,2],",",ll[id,3],
                                   "&destinations=",
                                   paste( ll.students[,2],ll.students[,3],sep=',',collapse='|'),
                                   "&sensor=false",sep ='')
                      res <- fromJSON(url)
                        hh <- sapply(res$rows[[1]]$elements,function(dest){
                          c(distance= as.numeric(dest$distance$value),
                                     duration = dest$duration$text)
                        })
                      hh <- rbind(hh,destination =  ll.students[,1])

                    })
names(dist.list) <- ll[,1]

dist.list
$`SL4 6DW`
            [,1]              [,2]      [,3]     
distance    "664698"          "36583"   "41967"  
duration    "6 hours 30 mins" "43 mins" "49 mins"
destination "1"               "2"       "3"      

$`SW13 9JT`
            [,1]              [,2]      [,3]     
distance    "682210"          "9476"    "13125"  
duration    "6 hours 39 mins" "22 mins" "27 mins"
destination "1"               "2"       "3" 
```

# javascript - 幻灯片 - 悬停在缩略图上时暂停显示

> ID：14241186
> 
> 赞同：0
> 
> 时间：2013-01-09T15:58:26.373
> 
> 标签：javascript, slideshow, nivo-slider

客户要求当观众将鼠标悬停在缩略图上时，幻灯片会自动暂停。这可能吗？如果是这样，你怎么做，因为我是一个 javascript 新手。将鼠标悬停在主图像上时，幻灯片当前会暂停。

这是我购买的用于 Wordpress 的 Nivo 滑块插件。

谢谢

[保罗日雕塑](http://temp.pauldaysculpture.com/artworks/largesculptures/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:25:04.180

```
$('.nivo-control').hover(function(){
vars.paused = true;
clearInterval(timer);
timer = '';
}, function(){
vars.paused = false;
// Restart the timer
if(timer === '' && !settings.manualAdvance){
timer = setInterval(function(){ nivoRun(slider, kids, settings, false); }, settings.pauseTime);
}
}); 
```

在 jquery.nivo.slider.pack.js 中添加此代码。它会起作用的

# hibernate - Hibernate 标准一对多不同的结果

> ID：14241189
> 
> 赞同：1
> 
> 时间：2013-01-09T15:58:29.737
> 
> 标签：hibernate, hibernate-criteria

我有一张`person`桌子。A`person`可能有多个`kids`，它们也是人。因此，person 表之间存在一对多的关系。

我想得到所有至少有一个儿子的人`(sex=male)`。我按照以下标准做到这一点：

```
List personsWithSon = sess.createCriteria(Person.class)
     .createAlias("kids", "k")
     .add( Restrictions.eq("k.sex", "male") )
     .list(); 
```

这很好，只要只有一个儿子。例如，如果有三个儿子，则该人被退回 3 次。但我只需要那个人一次。我怎样才能对结果进行区分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:25:57.683

将其更改为：

```
List personsWithSon = sess.createCriteria(Person.class).createAlias("kids", "k").add(Restrictions.eq("k.sex", "male")).setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY).list(); 
```

# java - 是否可以将参数传递给 Enum 值？

> ID：14241190
> 
> 赞同：8
> 
> 时间：2013-01-09T15:58:30.297
> 
> 标签：java, enums

假设我有一个 Enum 定义如下：

```
public enum Sample{
    // suppose AClass.getValue() returns an int
    A(AClass.getValue()), 
    B(AClass.getValue()),
    C(AClass.getValue());

    private int _value; 

    private Sample(int _val){
        this._value = _val; 
    }

    public int getVal(){
        return _value; 
    } 
```

我可以使用`Sample.A`或`Sample.A.getAVal()`不使用问题来提取值。

现在假设它`AClass.getValue()`可以接受一个参数来返回一个可能不同的特定值，例如`AClass.getValue(42)`.

可以将参数传递给公共 Enum 方法并检索 Enum 值吗？换句话说，我可以有一个像这样的枚举定义吗

```
 public enum Sample{
        // suppose AClass.getValue() returns an int
        A(AClass.getAValue()), 
        B(AClass.getBValue()),
        C(AClass.getCValue());

        private int _value; 

        private Sample(int _val){
           this._value = _val; 
        }

        public int getVal(){
            return _value; 
        }

        public int getVal(int a){
            // somehow pull out AClass.getAValue(a)
        } 
```

使用`Sample.A.getValue(42)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:03:23.837

您可以这样做，但只能通过在枚举中创建一个抽象方法，并在每个值中覆盖它：

```
public enum Sample {
    A(AClass.getAValue()) {
        @Override public int getVal(int x) {
            return AClass.getAValue(x);
        }
    },
    B(BClass.getAValue()) {
        @Override public int getVal(int x) {
            return BClass.getBValue(x);
        }
    },
    C(CClass.getAValue()) {
        @Override public int getVal(int x) {
            return CClass.getCValue(x);
        }
    };

    private int _value; 

    private Sample(int _val){
       this._value = _val; 
    }

    public int getVal(){
        return _value; 
    }

    public abstract int getVal(int x);
} 
```

当然，如果您可以创建具有方法的*其他*基类型的实例`getValue(int x)`，那么您可以将代码放入枚举类本身而不是嵌套类中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:00:28.370

如[Java规范中所述](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9.1)

> 每个枚举常量只有一个实例

所以不，您不能有特定枚举常量的不同值。

但是你可以在你的枚举中放置一个数组或一个映射，所以`Sample.A.getValue(42)`会返回`Sample.A.myMap.get(42)`：

```
public enum Sample{
        A(), 
        B(),
        C();

        Map<Integer, Integer> myMap = new HashMap<Integer, Integer>();

        public int getVal(int i){
            return myMap.get(i); 
        }
        public int setVal(int i, int v){
            return myMap.put(i, v); 
        }
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2017-08-09T20:21:52.810

```
public class App {
    public static void main(String[] args) {
        Fruit.setCounter(5);
        System.out.println(Fruit.Apple.getCmd());
        Fruit.setCounter(6);
        System.out.println(Fruit.Apple.getCmd());
    }
}

public enum Fruit {
    Apple {
        public String getCmd() {
            return counter + " apples";
        }
    },
    Banana {
        public String getCmd() {
            return counter + " bananas";
        }
    };

    private static int counter = 0;

    public abstract String getCmd();

    public static void setCounter(int c) {
        counter = c;
    }
}

Output:
5 apples
6 apples 
```

# java - android中的静态关键字

> ID：14241193
> 
> 赞同：0
> 
> 时间：2013-01-09T15:58:35.860
> 
> 标签：java, android

我真的不明白下面的`static`块。我在与方法和变量一起使用时理解静态关键字，但我不知道以下代码中静态关键字的确切用途。

```
static
    {
        sURIMatcher.addURI("contacts", "people", PEOPLE);
        sURIMatcher.addURI("contacts", "people/#", PEOPLE_ID);
        sURIMatcher.addURI("contacts", "people/#/phones", PEOPLE_PHONES);
        sURIMatcher.addURI("contacts", "people/#/phones/#", PEOPLE_PHONES_ID);
        sURIMatcher.addURI("contacts", "people/#/contact_methods", PEOPLE_CONTACTMETHODS);
        sURIMatcher.addURI("contacts", "people/#/contact_methods/#", PEOPLE_CONTACTMETHODS_ID);
        sURIMatcher.addURI("contacts", "deleted_people", DELETED_PEOPLE);
        sURIMatcher.addURI("contacts", "phones", PHONES);
        sURIMatcher.addURI("contacts", "phones/filter/*", PHONES_FILTER);
        sURIMatcher.addURI("contacts", "phones/#", PHONES_ID);
        sURIMatcher.addURI("contacts", "contact_methods", CONTACTMETHODS);
        sURIMatcher.addURI("contacts", "contact_methods/#", CONTACTMETHODS_ID);
        sURIMatcher.addURI("call_log", "calls", CALLS);
        sURIMatcher.addURI("call_log", "calls/filter/*", CALLS_FILTER);
        sURIMatcher.addURI("call_log", "calls/#", CALLS_ID);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T15:59:12.467

这在 Java 中称为静态初始化块。这将在类加载时执行。红本oracle[教程](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)。

静态初始化器可用于初始化类的类变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T16:00:13.147

来自[**Java 语言规范**](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)：

> 类中声明的静态初始化程序在类初始化时执行（第 12.4.2 节）。与类变量的任何字段初始化器（第 8.3.2 节）一起，静态初始化器可用于初始化类的类变量。

```
StaticInitializer:
     static Block 
```

# css - 如何从 webkit 浏览器中“数字”类型的输入字段更改旋转按钮的大小？

> ID：14241197
> 
> 赞同：0
> 
> 时间：2013-01-09T15:58:42.000
> 
> 标签：css, html, jquery-mobile, webkit, web-frontend

我需要从 webkit 浏览器中“数字”类型的输入字段更改旋转按钮的大小。有谁知道如何实现这一目标？在我的特殊情况下，我使用 jquery mobile。也许这有帮助……谢谢！

编辑：我想我需要在我在非移动浏览器上使用 jquery mobile 的那个方向上指定我的问题（对于带有触摸监视器的信息亭系统）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:06:51.130

您需要使用**-webkit-appearance: none;** 允许在移动浏览器中覆盖。

看到这个答案：[https ://stackoverflow.com/a/4812443/737794](https://stackoverflow.com/a/4812443/737794)

尝试跨浏览器设置样式时，原生表单元素可能会很烦人，因此存在大量插件，它们将原生元素（如旋转按钮）替换为可样式化的 HTML 元素。这是一个仅替换旋转按钮元素的轻量级插件->

[http://www.egrappler.com/contents/smartspin/demo/spinner.htm](http://www.egrappler.com/contents/smartspin/demo/spinner.htm)

编辑：

正如 headkit 提到的，这取代了“文本”输入，而不是 data-type="spinbox"。

这是他提到的用于替换 spinbox 类型的插件->

[http://dev.jtsage.com/jQM-Spinbox/#](http://dev.jtsage.com/jQM-Spinbox/#)

# c# - 返回上一页 ASP.NET

> ID：14241199
> 
> 赞同：0
> 
> 时间：2013-01-09T15:58:45.557
> 
> 标签：c#, asp.net

我遇到了返回上一页的问题。我想返回的页面有几个单选按钮，您必须选择，之后您转到下一页，即当前页面，然后您可以选择某些内容，但我希望能够返回上一页和该页的原始选择仍然被选中。

无论如何，如果可以，我可以这样做吗？？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:03:02.120

你可以在 JavaScript 的帮助下做一个真正的基本后退按钮。

```
window.history.go(-1); 
```

这将带您回到上一页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:26:36.290

默认情况下，在 ASP.NET 中，控件的状态存储在 ViewState 中，因此它应该与用户离开它们时相同。

这可能是一些视图状态问题。

转到您的代码隐藏并检查 PageLoad 方法。如果您在 PageLoad 中创建或设置收音机，您不想在每次回发时都重新初始化它们。

```
if (!IsPostBack){
 // your init here
} 
```

# c# - 检查菜单项事件是否来自单击或快捷方式

> ID：14241209
> 
> 赞同：0
> 
> 时间：2013-01-09T15:59:37.740
> 
> 标签：c#, winforms, keyboard-shortcuts, menuitem, keyevent

无论如何要检查菜单项事件是来自菜单中的单击还是来自按下的快捷键？

我已经尝试将事件处理程序添加到按键和按键事件，但是当按下快捷键时，这些事件不会被“触发”（当它不是快捷键时它们会按预期工作）。我在发件人对象中找不到菜单单击或快捷单击之间不同的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:03:21.073

要获得帮助，您应该发布您尝试过的内容。（您的来源）

您可以为此使用枚举：

```
enum Sender
{
    Shortcut,
    Menu
}

void MenuEvent(Sender sender)
{
    if (sender == Sender.Shortcut)
    {

    }
    else
    {

    }
}

//if you click from the menu
void btnMenuClick()
{
    MenuEvent(Sender.Menu);
}

//if you use shortcut
void OnShortcutEvent()
{
    MenuEvent(Sender.Shortcut);
} 
```

编辑：我想我的答案含糊不清，所以我编辑了代码。我希望它现在更清楚，但我必须说 OP 也应该提供更多细节，比如发布一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:26:37.670

您可以通过覆盖 ProcessCmdKey 来捕获所有组合键：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData) 
{
    if (keyData == (Keys.Control | Keys.F)) 
    {
        Console.WriteLine("My code ran from shortcut");
        myFunction();
    }
    return base.ProcessCmdKey(ref msg, keyData);
}

private void ToolStripMenuItem_click(object sender ...)
{
  Console.WriteLine("My code ran from menu item");
  myFunction();
}

void myFunction()
{
  //your functionality here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:08:30.063

我看到了这个问题的单一解决方案 - 覆盖 ToolStripMenuItem 的 ProcessCmdKey 方法，该方法在处理快捷方式时引发。在这种情况下，您可以确定单击是由快捷方式引起的。显然，您需要使用自己的 ToolstripMenuItem 类而不是标准类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-03T19:06:29.143

处理 MouseDown 事件以处理您的鼠标单击。

menuItem.MouseDown += new MouseEventHandler(Process_Mouse_Click_Handler);

处理 Click 事件以处理您的快捷方式。

menuItem.Click+= new EventHandler(Process_Shortcut_Handler);

# java - Android：在后台运行应用程序的问题

> ID：14241210
> 
> 赞同：0
> 
> 时间：2013-01-09T15:59:42.840
> 
> 标签：java, android, service

我正在尝试让我的 GPS 在后台运行，这样它就可以在我做其他事情时为我提供关于我在哪里的新信息。

但是每次我运行应用程序时它都会崩溃。错误要我使用 `Looper.prepare()`，但我怎样才能用我的 GPS 做到这一点？

```
public class LocationLoggerService extends Service implements LocationListener {

Location location;

String towers;
static final int uniqueID = 1394885;
Thread runner;
boolean keepRunning;

public LocationManager locationManager;

@Override
public IBinder onBind(Intent intent) {
    return null;
}

@Override
public void onCreate() {

    keepRunning = true;

    runner = new Thread(null, new Runnable() {
        public void run() {
            startGps();
        }
    });
    runner.start();
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // this service will run until we stop it

    return START_STICKY;
}

@Override
public void onLocationChanged(Location location) {

    location = locationManager.getLastKnownLocation(towers);

    String hey1 = Double.toString(location.getLatitude());
    String hey2 = Double.toString(location.getLongitude());

    Toast.makeText(this,
            "TEST onLocationChanged:" + "Lat: " + hey1 + "Long: " + hey2,

            Toast.LENGTH_LONG).show();
}

@Override
public void onProviderEnabled(String s) {
}

@Override
public void onProviderDisabled(String s) {
}

@Override
public void onStatusChanged(String s, int i, Bundle b) {
}

@Override
public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "MyAlarmService.onDestroy()", Toast.LENGTH_LONG)
            .show();

}

public void startGps() {
    locationManager = (LocationManager) this
            .getSystemService(Context.LOCATION_SERVICE);
    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
            2000, 0, this);

    location = locationManager.getLastKnownLocation(towers);

    String hey1 = Double.toString(location.getLatitude());
    String hey2 = Double.toString(location.getLongitude());

    Toast.makeText(this, "StartGPS: Lat: " + hey1 + "Long: " + hey2,
            Toast.LENGTH_LONG).show();

}

} 
```

我的清单具有以下权限，如下所示：

```
<uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_GPS" />

<service
            android:name="LocationLoggerService"
            android:enabled="true"
            android:exported="false"
            android:label="LocationLoggerService" /> 
```

我在 logcat 中收到此错误，如下所示：

```
FATAL EXCEPTION: Thread-819
java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
at android.os.Handler.<init>(Handler.java:121)
at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:209)
at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:209)
at android.location.LocationManager._requestLocationUpdates(LocationManager.java:687)
at android.location.LocationManager.requestLocationUpdates(LocationManager.java:512)
at com.example.rememberforme.LocationLoggerService.startGps(LocationLoggerService.java:81)
at com.example.rememberforme.LocationLoggerService$1.run(LocationLoggerService.java:38)
at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:06:24.910

嘿，

我看到您缺少服务的 onCommandStart 方法。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId)
{
    //this service will run until we stop it

    return START_STICKY;
} 
```

您是否在清单文件中添加了所有需要的权限？我不确定您需要哪一个，但其中一个/或多个可以做到：

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_GPS"/> 
```

# android - Android 应用程序：制作在应用程序中执行内容的 shell 命令行工具

> ID：14241214
> 
> 赞同：2
> 
> 时间：2013-01-09T15:59:53.347
> 
> 标签：android, command-line

我知道如何通过 shell 启动活动，通过 Java 运行 shell 命令等。但是如何在 Java 中创建命令行工具呢？我希望用户能够使用 GUI 以及 CLI（即 adb shell 或终端仿真器）。

是否可以用Java编写代码？还是我需要深入研究 NDK？由于所有可用的库等，能够用 Java 编写它会容易得多。

# sql - Oracle - 子查询返回多行

> ID：14241216
> 
> 赞同：0
> 
> 时间：2013-01-09T16:00:04.317
> 
> 标签：sql, database, oracle

我有以下表结构：

**HSM**

```
HSM_EXC_CODE    Y   VARCHAR2(60)
HSM_INSTR_CODE  Y   VARCHAR2(60)
HSM_ISIN    Y   VARCHAR2(60)
HSM_VWD_TICKERSYMBL Y   VARCHAR2(80) 
```

**TENFORE_EXCHANGE_MAP**

```
HS_MARKET   Y   VARCHAR2(40)
TF_EXCHANGE Y   VARCHAR2(40) 
```

**TFV**

```
TFE_ID  Y   NUMBER(22)
TFE_VSE_CODE    Y   VARCHAR2(1000) 
```

**不同的 TFE_ID 可以有相同的 TFE_VSE_CODE！**我认为这是我在下面的更新查询中所缺少的。

**变频调速**

```
VSD_ON  Y   VARCHAR2(160)
VSD_ISIN    Y   VARCHAR2(15) 
```

这些表的连接方式如下：

```
TENFORE_EXCHANGE_MAP.HS_MARKET   = HSM.HSM_EXC_CODE
TENFORE_EXCHANGE_MAP.TF_EXCHANGE = TFV.TFE_ID 
```

我正在尝试填写 hsm_isin 和 hsm_on 字段。为了达到目标，我试图从`hsm.hsm_exc_code`. `tfv.tfe_vse_code`. 但是我做错了，因为我从主题中得到了错误。这是我尝试过的：

```
 UPDATE hsm
       SET hsm_isin               =
           (SELECT distinct vsd.vsd_isin
              FROM vsd, tfv, TENFORE_EXCHANGE_MAP
             WHERE vsd.vsd_on = hsm.hsm_instr_code || '.' || tfv.tfe_vse_code
                   AND hsm.hsm_exc_code = TENFORE_EXCHANGE_MAP.HS_MARKET
                   AND TENFORE_EXCHANGE_MAP.TF_EXCHANGE = tfv.tfe_id)
          ,hsm.hsm_vwd_tickersymbl =
           (SELECT distinct vsd.vsd_on
              FROM vsd, tfv, TENFORE_EXCHANGE_MAP
             WHERE vsd.vsd_on = hsm.hsm_instr_code || '.' || tfv.tfe_vse_code
                   AND hsm.hsm_exc_code = TENFORE_EXCHANGE_MAP.HS_MARKET
                   AND TENFORE_EXCHANGE_MAP.TF_EXCHANGE = tfv.tfe_id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:18:06.793

第一个或第二个子查询中的 key 必须不止一行：尝试类似：

```
SELECT hsm.hsm_instr_code, 
     count( distinct( vsd.vsd_on ) ) cnt1, 
     count( distinct( vsd.vsd_isin ) ) cnt2
FROM vsd, tfv, TENFORE_EXCHANGE_MAP, hsm
WHERE vsd.vsd_on = hsm.hsm_instr_code || '.' || tfv.tfe_vse_code
AND hsm.hsm_exc_code = TENFORE_EXCHANGE_MAP.HS_MARKET
AND TENFORE_EXCHANGE_MAP.TF_EXCHANGE = tfv.tfe_id
GROUP BY hsm.hsm_instr_code
HAVING count( distinct( vsd.vsd_on ) ) > 1 OR count( distinct( vsd.vsd_isin ) ) > 1 
```

**注意：**修复多行问题后，您可以将两个子查询合二为一，如下所示：

```
UPDATE hsm SET ( hsm_isin, hsm.hsm_vwd_tickersymbl ) =
           (SELECT distinct vsd.vsd_isin, vsd.vsd_on
              FROM vsd, tfv, TENFORE_EXCHANGE_MAP
             WHERE vsd.vsd_on = hsm.hsm_instr_code || '.' || tfv.tfe_vse_code
                   AND hsm.hsm_exc_code = TENFORE_EXCHANGE_MAP.HS_MARKET
                   AND TENFORE_EXCHANGE_MAP.TF_EXCHANGE = tfv.tfe_id); 
```

# javascript - 将 CSV 数据与 cubism.js 一起使用

> ID：14241224
> 
> 赞同：2
> 
> 时间：2013-01-09T16:00:31.623
> 
> 标签：javascript, cubism.js

我是[cubism.js](http://square.github.com/cubism/)的新手；但想用它来绘制一些以各种速率收集和存储的 CSV 数据，从 60hz 到平均 20hz。

文件格式为：

```
"TIMESTAMP","RECORD","Ux","Uy","Uz","Ts" 
```

其中 Ux,y,z 是 3d 风速，即北/南、东/西风，Ts 是温度。

```
"2011-07-21 07:03:03.1",24640835,0.0055,-0.03925,0.24075,24.18286,0.7445,-1.0425,-0.18225,24.21899,6.16675,-1.3475,0.58375,24.67505,33,27,27
"2011-07-21 07:03:03.15",24640836,0.00575,-0.03325,0.2435,24.19662,0.62075,-1.236,-0.19275,24.24136,6.25275,-1.3685,0.49575,24.70435,34,28,28
"2011-07-21 07:03:03.2",24640837,0.0275,-0.00925,0.22075,24.15018,0.467,-1.28625,-0.2165,24.24478,6.54625,-1.238,0.30025,24.73019,35,29,29
"2011-07-21 07:03:03.25",24640838,0.032,0.0045,0.1975,24.19492,0.50375,-1.307,-0.1965,24.2706,6.552001,-1.45625,0.57125,24.63718,36,30,30
"2011-07-21 07:03:03.3",24640839,0.017,0.00475,0.1775,24.15878,0.457,-1.14025,-0.14825,24.27231,6.407001,-1.223,0.534,24.72845,37,31,31
"2011-07-21 07:03:03.35",24640840,-0.04,0.042,0.154,24.18115,0.43525,-1.06975,-0.072,24.2775,6.39425,-1.1755,0.558,24.71469,38,32,32
"2011-07-21 07:03:03.4",24640841,-0.061,0.06525,0.14375,24.16907,0.59825,-0.8595001,-0.101,24.25513,6.21225,-1.25075,0.5785,24.76633,39,33,33
"2011-07-21 07:03:03.45",24640842,-0.04725,0.072,0.12175,24.16052,0.5330001,-0.7,-0.0815,24.26715,6.17925,-0.8412501,0.3965,24.73706,40,34,34
"2011-07-21 07:03:03.5",24640843,-0.06175,0.06075,0.0865,24.15189,0.58925,-0.74575,0.00525,24.25165,6.263,-0.9675,0.056,24.78186,41,35,35
"2011-07-21 07:03:03.55",24640844,-0.032,0.08575001,0.07300001,24.15878,0.546,-0.77,0.1255,24.29126,6.353,-1.08975,-0.03825,24.76288,42,36,36 
```

我可以使用 d3.csv 或其他 javascript 方法轻松读取数据；但我不确定如何将其格式化为立体主义。

Ux 正风速将自下而上显示，负风速自上而下显示，Uy,Uz 也会这样做。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-31T09:39:29.363

在我看来，您正在尝试使用 cubism.js 在单个地平线上进行两次绘图，这似乎是不可能的，因为我自己也试图实现这一目标，但我才意识到单个地平线只接受一个值随着时间的推移，但您始终可以将 Ux 和 Uy 分成两个不同的视界，从而实现您想要的。

# asp-classic - 从 VBScript 调用 JScript 函数 - 括号

> ID：14241231
> 
> 赞同：0
> 
> 时间：2013-01-09T16:00:51.577
> 
> 标签：asp-classic, vbscript, fluent-interface, jscript, method-chaining

我试图为遗留的**Classic ASP**应用程序带来一些理智，作为其中的一部分，我正在尝试为我创建的一些**JScript类编写一个****Fluent API 。**

 **例如`myClass().doSomething().doSomethingElse()`

[这里](http://automated-chaos.blogspot.co.uk/2011/12/qtp-and-method-chaining-disclosed.html)概述了这个概念（在 VBScript 中）

这是我的示例**JScript**类：

```
var myClass = function () {
    this.value = '';
}

myClass.prototype = function () {

    var doSomething = function (a) {
        this.value += a;
        return this;
    },

    doSomethingElse = function (a, b) {
        this.value += (a + b);
        return this;
    },

    print = function () {
        Response.Write('Result is: ' + this.value + "<br/>");
    }

    return {
        doSomething: doSomething,
        doSomethingElse: doSomethingElse,
        print: print
    };

}();

/// Wrapper for VBScript consumption
function MyClass() {
    return new myClass();
} 
```

在现有的 VBScript 代码中，我尝试将这些方法链接在一起：

```
dim o : set o = MyClass()
'' This works
o.doSomething("a")

'' This doesn't work
o.doSomething("b").doSomethingElse("c", "d")

'' This for some reason works
o.doSomething("e").doSomethingElse("f", "g").print() 
```

当函数有多个参数时，我得到“ `Cannot use parentheses when calling a Sub`” VBScript 错误。奇怪的是，当采用另一种方法时，它似乎有效。

我知道在调用 sub 时应该省略括号。然而：

**1、有返回值为什么会被识别为Sub？**

**2\. 有什么办法可以实现我的 Fluent API？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:44:01.270

规则是：将“命名代码段”**作为 sub**调用时没有参数 list () 。讨厌的陷阱是：对于单参数 npcs，（）可能看起来像参数列表（），但（解释为）pass-me-by-value（）。

您`set o = MyClass()`将 myClass() 称为函数；从任务中可以清楚地看出这一点。

您`o.doSomething("a")`将 .doSomething 作为子调用， () 被视为 pass-me-per-value (); `doSomething "a"`将是正确的电话。

您作品的第一部分`o.doSomething("b").doSomethingElse("c", "d")`，因为`o.doSomething("b").`是/使用函数调用来获取`.doSomethingElse()`要调用的对象；第二部分`.doSomethingElse("c", "d")`不能工作，因为它不是子调用（没有使用/分配返回值）**，并且**() 不能被视为 pass-me-by-value ()。`o.doSomething("b").doSomethingElse "c", "d"`会是正确的。

第一部分`o.doSomething("e").doSomethingElse("f", "g").print()`（直到.print）是一个函数调用（获取将要.print的对象），所以（）是参数列表（）；.print 之后的 () 是错误的，但编译器/解释器让它们溜走了。

*总结一下：当你不想要一些东西时，不要使用 () 。*

**WRT评论：**

反过来说：*当你想要一些东西时使用 () ！*

`set o1 = MyClass()`<- 返回值应该进入 o1

`set o2 = o.S(1, 2).S(3, 4).S(5, 6)`<- 下一次调用需要/使用前两个返回值；最后一个返回值进入 o2。

`o.S(1, 2).S(3, 4).S 5, 6`<- 最后一个返回值被丢弃 - 没有子调用

() 规则是关于**你做什么**（使用或不使用返回值），而不是关于 npc**是**什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:26:28.773

您可以将`call`vbscript 放在每一行的开头。这将接受在每个方法调用上放置括号，例如

```
' This works
call o.doSomething("b").doSomethingElse("c", "d")

' This works too
call o.doSomething("e").doSomethingElse("f", "g").print() 
```

或者当它抱怨时不要把括号放在vbscript中......

请参阅[VBScript 和 JavaScript 之间的差异](http://www.w3schools.com/asp/asp_procedures.asp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T17:29:36.793

顺便说一句，您可以在 VBScript 中编写流畅的 API。我建立了一个库来促进 HTML 的内联创建以避免“标签汤”垃圾，我现在正在应用程序中使用它（这就是我发现这个问题的方式）。

这是一个使用几个助手包裹 960gs 网格的示例：

```
with html
  .open
    with head
      .open
        stylesheet_link "assets/stylesheets/960gs/reset.css"
        stylesheet_link "assets/stylesheets/960gs/960.css"
        stylesheet_link "assets/stylesheets/960gs/text.css"
        stylesheet_link "assets/stylesheets/app.css"
      .close
    end with
    with body
      .open
        with grid_container(12)
          .open
            call main
          .close
        end with
      .close
    end with
  .close
end with 
```

然后 main 可能与此类似：

```
with grid_row
  with grid_column(4)
    .id "nav-left"
    .open
      with ul
        .open
          li.open.contains( link_to("Google", "http://google.com") ).close
          li.open.contains( link_to_if(a > b, "Microsoft", "http://microsoft.com") ).close
          li.open.contains( link_to_unless(a > b, "Apple", "http://apple.com") ).close
        .close
      end with
    .close
  end with
  with grid_column("8 push_2")
    .id "main-content"
    .open
      h1.open.contains("Title Here").close
      do until recordset.eof
        p.class("record").open.contains(recordset("column_name")).close
        recordset.movenext
      loop
    .close
  end with
end with 
```

该库的编写方式基本上可以零努力地生成 XML，基本上是任何具有“具有属性的嵌套元素”结构的标记语言。

经典 ASP 看起来是这样的，因为使用 (d) 它的人和制作教程的人只是把它扔在那里，并没有完全理解语言和良好实践。所以我们被困在维护蜿蜒的代码呕吐物。但如果你做得对，它就会开始看起来像红宝石。哎呀，几年前我什至使用动态 vbscript 类实现了一些 ruby​​ 迭代的东西，只是为了看看我是否可以做到并且它有效，但我很久以前就丢失了那个代码。重点是即使 vbscript 是有限的，它仍然比人们认为它具有更多的能力，他们只是通常不会做事情，因为可以做。**

# sockets - 当我将数据写入阻塞套接字时会发生什么，比对方读取的速度更快？

> ID：14241235
> 
> 赞同：27
> 
> 时间：2013-01-09T16:01:00.153
> 
> 标签：sockets, tcp, buffer, blocking

假设我将数据写得非常快[我有内存中的所有数据]到阻塞套接字。进一步假设另一方将非常缓慢地读取数据[例如每次读取之间睡眠 1 秒]。

在这种情况下，写作方面的预期行为是什么？写入操作会阻塞直到对方读取足够的数据，还是写入会返回连接重置之类的错误？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-09T18:57:42.237

对于阻塞套接字，`send()`调用将阻塞，直到所有数据都被复制到该连接的网络堆栈缓冲区中。它不必由另一方接收。此缓冲区的大小取决于实现。

当远程端确认数据时，数据会从缓冲区中清除。这是操作系统的事情，不依赖于实际读取数据的远程*应用程序。*此缓冲区的大小也取决于实现。

当远程缓冲区已满时，它会告诉您的本地堆栈停止发送。当数据从远程缓冲区中清除（通过远程应用程序读取）时，远程系统将通知本地系统发送更多数据。

在这两种情况下，小型系统（如嵌入式系统）可能具有几 KB 或更小的缓冲区，而现代服务器可能具有几 MB 或更大的缓冲区。

一旦本地缓冲区中有可用空间，`send()`将复制来自您的调用的更多数据。复制所有数据后，您的呼叫将返回。

除非连接确实被重置，否则您不会收到“连接重置”错误（来自操作系统 - 库可能会做任何事情）。

所以......在您发送的数据与本地和远程缓冲区大小的总和一样多之前，远程应用程序读取数据的速度并不重要。之后，您将只能`send()`像远程一样快`recv()`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T16:07:05.610

输出（发送）缓冲区被填满，直到它被填满并`send()`阻塞，直到缓冲区被释放到足以让数据包入队。

正如发送手册页所说：

**当消息不适合套接字的发送缓冲区时，send() 通常会阻塞，除非套接字已被置于非阻塞 I/O 模式。**

看看这个： http: [//manpages.ubuntu.com/manpages/lucid/man2/send.2.html](http://manpages.ubuntu.com/manpages/lucid/man2/send.2.html)

# java - 富编辑器文本区域不会保存数据

> ID：14241236
> 
> 赞同：0
> 
> 时间：2013-01-09T16:01:00.163
> 
> 标签：java, javascript, ajax

我有一个带有一些预设选项的 HTML 页面，当我使用纯 HTML 文本区域时，它可以正常工作，但是当我使用富编辑器时，文本区域不会保存数据，请参阅演示页面。

工作页面：[这里](http://bulk-email-store.com/works.htm)

非工作页面：[这里](http://bulk-email-store.com/test.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:16:18.717

更改此代码

```
$mydropdown.change(function(){
   nicEditors.findEditor("TextArea").setContent($mytextbox.val() + TextVars[$(this).val()]);
}); 

$("input[type='checkbox'][name*='ImageVar']").change(function () {
  var $chk = $(this);
  if ($chk.prop('checked')) {
    nicEditors.findEditor("TextArea").setContent($mytextbox.val() + ImageVars[$chk.attr('name')]);
  } else {
    nicEditors.findEditor("TextArea").setContent($mytextbox.val().replace(ImageVars[$chk.attr('name')], ""));
  }
}); 
```

到下面的代码

```
$mydropdown.change(function(){
   nicEditors.findEditor("TextArea").setContent(nicEditors.findEditor("TextArea").getContent() + TextVars[$(this).val()]);
}); 

$("input[type='checkbox'][name*='ImageVar']").change(function(){
   var $chk = $(this);
   if($chk.prop('checked')){
      nicEditors.findEditor("TextArea").setContent(nicEditors.findEditor("TextArea").getContent() + ImageVars[$chk.attr('name')]);
   }else{
      nicEditors.findEditor("TextArea").setContent(nicEditors.findEditor("TextArea").getContent().replace(ImageVars[$chk.attr('name')], ""));
   }
}); 
```

# file - 如何删除 Google Drive 中的文件？

> ID：14241237
> 
> 赞同：22
> 
> 时间：2013-01-09T16:01:00.367
> 
> 标签：file, google-apps-script, google-drive-api, delete-file

如何编写删除文件的 Google Apps 脚本？

这会找到文件：

```
var ExistingFiles = DocsList.find(fileName); 
```

但`DocsList.deleteFile`不存在删除文件。

有没有办法将这些文件移动到另一个文件夹或垃圾箱？

我会考虑的另一个解决方法是能够覆盖具有相同名称的现有文件。

目前，当我想创建一个名称已在 MyDrive 中使用的文件时，它会创建另一个同名的文件。我想保留 1 个文件（新文件被保留，旧文件丢失）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-06-15T05:52:10.073

有 3 种服务可用于删除文件。

*   DriveApp - 内置于 Apps 脚本
*   高级驱动器服务 - 内置于 Apps 脚本，但必须启用。比 DriveApp 有更多的功能
*   Google Drive API - 不是内置于 Apps 脚本，但可以通过使用 Drive REST API 的 Apps 脚本与`UrlFetchApp.fetch(url,options)`

该`DocsList`服务现已弃用。

高级驱动器服务可用于删除文件而不将其发送到垃圾箱。认真考虑无法找回已删除文件的风险。高级驱动器服务有一种`remove`方法可以删除文件而不将其发送到垃圾文件夹。高级服务具有许多与 API 相同的功能，无需发出 HTTPS GET 或 POST 请求，也不需要 OAuth 库。

```
function delteFile(myFileName) {
  var allFiles, idToDLET, myFolder, rtrnFromDLET, thisFile;

  myFolder = DriveApp.getFolderById('Put_The_Folder_ID_Here');

  allFiles = myFolder.getFilesByName(myFileName);

  while (allFiles.hasNext()) {//If there is another element in the iterator
    thisFile = allFiles.next();
    idToDLET = thisFile.getId();
    //Logger.log('idToDLET: ' + idToDLET);

    rtrnFromDLET = Drive.Files.remove(idToDLET);
  };
}; 
```

这结合了 DriveApp 服务和 Drive API 来删除文件而不将其发送到垃圾箱。Drive API 方法`.remove(id)`需要文件 ID。如果文件ID不可用，但文件名有，则可以先按名称查找文件，然后获取文件ID。

为了使用 DriveAPI，您需要通过**Resources** , **Advanced Google Services**菜单添加它。将 Drive API 设置为**ON**。 ***并***确保在您的 Google Cloud Platform 中启用 Drive API。**如果在这两个**地方都没有打开它，它将不可用。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-25T05:54:11.873

现在，如果文件是电子表格、文档等，您可以使用以下内容：

```
 DriveApp.getFileById(spreadsheet.getId()).setTrashed(true); 
```

或者如果您已经有了文件而不是电子表格、文档等，您可以使用：

```
file.setTrashed(true); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-09T16:13:25.270

此代码使用`DocsList`现在已弃用的类。

尝试这个 ：

```
function test(){
deleteDocByName('Name-of-the-file-to-delete')
}

function deleteDocByName(fileName){
  var docs=DocsList.find(fileName)
    for(n=0;n<docs.length;++n){
     if(docs[n].getName() == fileName){
      var ID = docs[n].getId()
      DocsList.getFileById(ID).setTrashed(true)
      }
     }
    } 
```

因为您可以拥有许多具有相同名称的文档，所以我使用了一个 for 循环来获取文档数组中的所有文档，并在必要时将它们一一删除。

我使用了一个以文件名作为参数的函数来简化它在脚本中的使用，使用测试函数来尝试它。

注意：请注意，所有具有此名称的文件都将被丢弃（并且可恢复；-）

**关于您**关于保留最新文件和删除旧文件的问题的最后一部分，这是可行的（通过读取上次访问的日期和时间），但我认为在创建新文件之前删除旧文件是一个更好的主意同名...更加合乎逻辑和安全！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-06T18:22:16.013

虽然服务 DocsList 现在已被弃用，但从类文件夹引用中，settrashed 方法仍然有效：

[https://developers.google.com/apps-script/reference/drive/folder#settrashedtrashed](https://developers.google.com/apps-script/reference/drive/folder#settrashedtrashed)

所以应该这样工作：

```
ExistingFiles.settrashed(true); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-08T17:46:11.627

这是另一种不需要 Drive API 的方法。（基于艾伦的回应）。

```
function deleteFile(fileName, folderName) {
  var  myFolder, allFiles, file;
  myFolder = DriveApp.getFoldersByName(folderName).next();

  allFiles = myFolder.getFilesByName(fileName);

  while (allFiles.hasNext()) {
    file = allFiles.next();
    file.getParents().next().removeFile(file);
  }
} 
```

# python - 硒可以用来突出网页的各个部分吗？

> ID：14241239
> 
> 赞同：1
> 
> 时间：2013-01-09T16:01:05.987
> 
> 标签：python, html, selenium-webdriver, highlighting

我可以使用 Python 2.7 做一些突出的事情吗？假设当我的脚本单击`submit button`，将数据输入`text field`或从中选择值时`drop-down field`，只是为了突出显示该元素以确保脚本运行者他/她的脚本执行他/她想要的操作。

***编辑***

我正在使用 selenium-webdriver 和 python 来自动化第三方应用程序上的一些基于 Web 的工作。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:02:36.470

这是你需要用javascript而不是python来做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:05:08.917

***[注意：出于历史目的，我将保留此答案，但读者应注意，最初的问题已从与 Python 相关的问题变为与 Selenium 相关的问题]***

假设您正在谈论从 Python 后端服务器提供的基于浏览器的应用程序（这只是一个猜测，因为您的帖子中*没有信息*）：

如果您在 Python 后端构建响应，请将要突出显示的内容包装在标签中，并在 span 标签上`<span>`设置 a 。`class`然后，在您的 CSS 中使用您想要使用的任何突出显示属性来定义该类。

但是，如果您想在已经加载的浏览器页面中完成此突出显示而不在后端生成新的 HTML 并将其返回给浏览器，那么 Python（在服务器上）不知道或无法影响网页浏览器。您必须在浏览器中使用 Javascript 或 Javascript 库或框架来完成此操作。

# javascript - JQuery Mobile data-native-menu="false" 抛出未定义错误

> ID：14241242
> 
> 赞同：1
> 
> 时间：2013-01-09T16:01:13.397
> 
> 标签：javascript, jquery, jquery-mobile

通过选择列表使用 jquery mobile 设置菜单样式。问题是，当我将 data-native-menu="false" 作为选项添加到标题时会引发错误。有效的代码片段是这样的：

```
var menu = '<div class="ui-select"><select name="menu-items" class="menu-items"  id="menu-items"  tabindex="-1" data-native-menu="false" >';
        menu += '<option value="a">A</option> <option value="b">A</option>';
        menu += '</select></div>'; 
$("div[data-role='header']", this.el).html(menu).trigger('create'); 
```

它产生的错误是这样的：

```
Uncaught TypeError: Cannot read property 'jQuery18303288714927621186' of undefined 
```

在下面的示例中，我删除了 data-native-menu 并且它会起作用但是 UI 看起来并不像预期的那样：

```
var menu = '<div class="ui-select"><select name="menu-items" class="menu-items"  id="menu-items"  tabindex="-1"  >';
        menu += '<option value="a">A</option> <option value="b">A</option>';
        menu += '</select></div>'; 
$("div[data-role='header']", this.el).html(menu).trigger('create'); 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:09:30.220

尝试这个：

```
<!DOCTYPE html> 
<html><head>
<meta charset="UTF-8">
<title>data-natice-menu</title>
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.min.css" />
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>
$(document).ready(function(e) { 
    var menu = '<div class="ui-select"><select name="menu-items" class="menu-items"  id="menu-items"  tabindex="-1" data-native-menu="false" >';
    menu += '<option value="a">A</option> <option value="b">A</option>';
    menu += '</select></div>'; 
    $("div[data-role='header']", this.el).html(menu).trigger('create');
});

</script>
</head>
<body>
<div data-role="page" data-theme="a" id="page">
    <div data-role="header" data-position="fixed"></div>
</div>
</body>
</html> 
```

**编辑**：我更改了代码。我对其进行了测试，它正确显示了选择。

# asp.net - VB.NET 事务和 SQLDataReader

> ID：14241251
> 
> 赞同：0
> 
> 时间：2013-01-09T16:02:07.520
> 
> 标签：asp.net, vb.net

请看下面的代码：

```
Public Function Orphand() 
        Dim objCon As SqlConnection
        Dim objCommand As SqlCommand
        Dim objCommand2 As SqlCommand
        Dim objCommand3 As SqlCommand
        Dim objDR As SqlDataReader
        Dim transaction As SqlTransaction
        Try
            objCon = New SqlConnection(_ConString)
            objCommand = New SqlCommand
            objCommand2 = New SqlCommand
            objCommand3 = New SqlCommand
            objCommand.Connection = objCon
            objCommand2.Connection = objCon
            objCommand3.Connection = objCon
            objCon.Open()
            transaction = objCon.BeginTransaction
            objCommand.Transaction = transaction
            objCommand2.Transaction = transaction
            objCommand3.Transaction = transaction
            Using objCon
                objCommand.CommandText = "SELECT TOP 3 * FROM dbReviews"
                objDR = objCommand.ExecuteReader
                Do While objDR.Read
                    objCommand2.CommandText = "INSERT INTO dbReviewChangesVALUES (1,1,'1',1,'2012-01-09')"
                    objCommand2.ExecuteNonQuery()
                    objCommand3.CommandText = "INSERT INTO dbReviewChangesVALUES (1,1,'1',1,'2012-01-09')"
                    objCommand3.ExecuteNonQuery()
                Loop
                transaction.Commit()
                objDR.Close()
            End Using
        Catch ex As Exception

        End Try
    End Function
End Class 
```

有没有办法在每个循环上提交事务，而不是等到所有记录都循环完，或者这是不好的做法？

我花了一些时间谷歌搜索这个。我认为我不必发布问题，但我还没有找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:32:40.443

是的，在你的循环中打开一个事务。

# html - 如何在我的网站中插入类似本网站的图片？

> ID：14241254
> 
> 赞同：0
> 
> 时间：2013-01-09T16:02:14.970
> 
> 标签：html, image, hyperlink

我正在尝试复制该网站的功能：http: [//8tracks.com/pitchfork/the-year-in-music-2012-the-top-100-tracks-of-2012](http://8tracks.com/pitchfork/the-year-in-music-2012-the-top-100-tracks-of-2012)但我不确定如何我会像他们一样在网站上显示图像。我将如何像本网站一样将图像显示为链接？更具体地说，每次刷新网页时如何显示不同的链接？

对不起，如果我含糊不清，我或多或少只是想知道从哪里开始。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:07:24.423

> 我将如何像本网站一样将图像显示为链接？

作为链接的图像只是包含图像的链接：

```
<a href="..."><img src="..." alt="..."></a> 
```

> 更具体地说，每次刷新网页时如何显示不同的链接？

从服务器端程序（以您选择的编程语言编写）生成 HTML。让它随机选择图像。您可以在数据库中跟踪它们，然后使用类似的[东西](https://stackoverflow.com/questions/5921327/selecting-random-entry-from-mysql-database)来选择一个（或多个）。

# php - 将今天、昨天和本周的日期更改为相对的、人类可读的格式

> ID：14241257
> 
> 赞同：6
> 
> 时间：2013-01-09T16:02:20.363
> 
> 标签：php, date, datetime

我正在拉一些推文，我很想输出它们是今天、昨天还是在那之前出现的。这是我正在使用的代码（不起作用）。它跳过*if*和*else if*并直接进入*else*。

```
date_default_timezone_set("America/New_York");
$time = $block["created_at"];
$time = strtotime($time);

if(date("now") == date("m-d-Y", $time)) {
    $time = date("g:ia", $time);
}
else if(date(strtotime("-1 day")) == date("m-d-Y", $time)) {
    $time = "Yesterday at" + date("g:ia", $time);
}
else {
    $time = date("m-d-Y g:ia", $time);
} 
```

绝对理想情况下，如果时间戳在过去 6 天内，它会显示星期几和时间，并且比这更早的任何东西都会显示日期，我也会喜欢它。

所以流可能看起来像这样（日期降序排序）：

> [...] 上午 9:53
> [...] 上午 7:02
> [...] 昨天晚上 11:24
> [...] 星期一下午 3:45
> [...] 2013 年 1 月 2 日

关于我的代码哪里出错的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:06:38.290

您的代码应如下所示。

```
if(date("m-d-Y") == date("m-d-Y", $time)) {
    $time = date("g:ia", $time);
}
else if(date("m-d-Y", strtotime("-1 day")) == date("m-d-Y", $time)) {
    $time = "Yesterday at" + date("g:ia", $time);
}
else {
    $time = date("m-d-Y g:ia", $time);
} 
```

***解释***

date() — 格式化本地时间/日期。返回根据给定格式字符串格式化的字符串，使用给定的整数时间戳或当前时间（如果没有给出时间戳）。换句话说，timestamp 是可选的，默认为 的值`time()`。

***你哪里出错了？***

您应该首先将格式然后时间戳传递给`date()`函数。[阅读更多](http://php.net/manual/en/function.date.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:43:24.237

该[`strtotime`](http://php.net/manual/en/function.strtotime.php)函数可以解析各种字符串：

```
echo date("D Y-m-d H:i:s");                               // Wed 2013-01-09 21:33:07
echo date("D Y-m-d H:i:s", strtotime("today 00:00" ));    // Wed 2013-01-09 00:00:00
echo date("D Y-m-d H:i:s", strtotime("yesterday 00:00")); // Tue 2013-01-08 00:00:00
echo date("D Y-m-d H:i:s", strtotime("-6 day 00:00" ));   // Thu 2013-01-03 00:00:00
echo date("D Y-m-d H:i:s", strtotime("-100 day 00:00" )); // Mon 2012-10-01 00:00:00 
```

您现在需要做的就是将给定的时间戳与上面的时间戳进行降序比较：

```
function formatDate($time) {
    if ($time >= strtotime("today 00:00")) {
        return date("g:i A", $time);
    } elseif ($time >= strtotime("yesterday 00:00")) {
        return "Yesterday at " . date("g:i A", $time);
    } elseif ($time >= strtotime("-6 day 00:00")) {
        return date("l \\a\\t g:i A", $time);
    } else {
        return date("M j, Y", $time);
    }
}

echo formatDate(time());                 // 9:42 PM
echo formatDate(strtotime("-1 day"));    // Yesterday at 9:42 PM
echo formatDate(strtotime("-6 day"));    // Thursday at 9:42 PM
echo formatDate(strtotime("-100 day"));  // Oct 10, 2012 
```

请注意，在返回字符串`strtotime()`的同时返回时间戳（整数） 。`date()`该函数将时间戳与时间戳进行比较。

# jquery - jQuery - 将表单数据输出到表格中

> ID：14241259
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:02:25.833
> 
> 标签：jquery, forms, input, output

使用 jQuery，我如何输出（和附加）在表单中提交的值？

例如，我输入了一个名称，它会作为一个新表行出现，其中包含表单中的名称。

```
<form>
Name:<input type="text" />
<input type="submit" />
</form>

<table>
<tr>
<th>Name</th>
</tr>
// Here the name should be appended...within a <tr><td></td></tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:14:24.260

这是一个简单的例子：

```
$('form').on('submit', function (e) {
  e.preventDefault();
  var newName = $('form').find('input[type="text"]').val();
  $('table').append('<tr><td>' + newName + '</td></tr>')
}); 
```

# itextsharp - HTML 到 iTextSharp 行高的转换

> ID：14241262
> 
> 赞同：0
> 
> 时间：2013-01-09T16:02:38.733
> 
> 标签：itextsharp, css

我正在使用 iTextSharp 创建 PDF 用于检查打印目的。我的问题是，我无法在支票信封上的小窗口所在的支票上打印姓名/地址。地址线间距过大。我在 HTML 文档的字体标签中设置行高，但它没有被继承。

这是地址部分，具体来说：

```
 conn.Open();
            using (SqlDataReader itemReader = strSQL.ExecuteReader())
            {
                checksHolder.InnerHtml += "<table cellSpacing=\"0\" cellPadding=\"0\" border=\"0\" width=\"100%\">\n";

                while (itemReader.Read())
                {

                    if (i % 3 == 0 && i != 0)
                    {
                        checksHolder.InnerHtml += "</table>\n";
                        checksHolder.InnerHtml += "<!-- pagebreak -->\n";
                        checksHolder.InnerHtml += "<table cellSpacing=\"0\" cellPadding=\"0\" border=\"0\" width=\"100%\">\n";
                        f = 0;
                    }

                    if (i > 0 && i % 3 != 0)
                    {
                        checksHolder.InnerHtml += "<tr><td colspan=\"3\"><br/><br/><br/><br/><br/><br/>";
                        checksHolder.InnerHtml += "</td></tr>\n";
                    }

                    String[] tmpArray = getConsignorInfo(itemReader["check_cs_id"].ToString());

                    int CheckNum = Int32.Parse(itemReader["check_number"].ToString());
                    String CheckAmount = itemReader["check_amount"].ToString();
                    String PayableTo = tmpArray[0];
                    String Memo = itemReader["check_memo"].ToString();

                    String name = tmpArray[0];
                    String address = tmpArray[1];
                    String city = tmpArray[2];
                    String state = tmpArray[3];
                    String zip = tmpArray[4];

                    Char NBSP = '\u00A0';

                    checksHolder.InnerHtml += "<tr><td colspan=\"3\"><br/><br/></td></tr>\n";
                    checksHolder.InnerHtml += "<tr>\n";
                    //checksHolder.InnerHtml += "<td width=\"5\"></td>\n";
                    checksHolder.InnerHtml += "<td colspan=\"2\">\n";
                    checksHolder.InnerHtml += "<font size=\"2\">\n";
                    checksHolder.InnerHtml += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n";
                    checksHolder.InnerHtml += PayableTo + "</font>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "<td align=\"right\">\n";
                    checksHolder.InnerHtml += "<font align=\"right\" size=\"2\">" + string.Format("{0:c}", Double.Parse(CheckAmount.ToString())).Replace("$", "") + "</font>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";
                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td colspan=\"3\">\n";
                    checksHolder.InnerHtml += "&nbsp;\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";
                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td colspan=\"3\">\n";
                    checksHolder.InnerHtml += "<font size=\"2\">";
                    if (wordify(decimal.Parse(CheckAmount.ToString())).Length >= 90)
                    {
                        checksHolder.InnerHtml += wordify(decimal.Parse(CheckAmount.ToString()));
                    }
                    else
                    {
                        string exes = " ";
                        for (int x = wordify(decimal.Parse(CheckAmount.ToString())).Length; x <= 90; x++)
                        {
                            exes += "x";
                        }
                        checksHolder.InnerHtml += wordify(decimal.Parse(CheckAmount.ToString())) + exes;
                    }
                    checksHolder.InnerHtml += "</font>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";
                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td colspan=\"2\">\n";

                    checksHolder.InnerHtml += "<table cellSpacing=\"0\" cellPadding=\"0\" border=\"0\" width=\"100%\">\n";
                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td colspan=\"2\"><br/>\n";
                    checksHolder.InnerHtml += "<font size=\"2\" line-height=\"8p\">" + name + "<br/>\n";
                    checksHolder.InnerHtml += address + "<br/>\n";
                    checksHolder.InnerHtml += city + ",\n";
                    checksHolder.InnerHtml += state + " \n";
                    checksHolder.InnerHtml += zip + "</font>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";

                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td colspan=\"3\">\n";
                    checksHolder.InnerHtml += "<br/></td>\n";
                    checksHolder.InnerHtml += "</tr>\n";

                    checksHolder.InnerHtml += "<tr>\n";
                    checksHolder.InnerHtml += "<td width=\"10\"></td>\n";
                    checksHolder.InnerHtml += "<td>\n";
                    checksHolder.InnerHtml += "<font size=\"2\">" + Memo.Substring(0, 50) + "...</font>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";
                    checksHolder.InnerHtml += "</table>\n";

                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "<td valign=\"bottom\" width=\"40\">\n";
                    checksHolder.InnerHtml += "<img valign=\"bottom\" align=\"left\" src=\"images/wesSig.png\" Alt=\"\" /><br/>\n";
                    checksHolder.InnerHtml += "</td>\n";
                    checksHolder.InnerHtml += "</tr>\n";

                    i++;
                    f++;
                }

                checksHolder.InnerHtml += "</table>\n";

                itemReader.Close();
            }

public void CreatePDFDocument(string strHtml)
{
    string strFileName = HttpContext.Current.Server.MapPath("printCheck.pdf");
    // step 1: creation of a document-object

    iTextSharp.text.Rectangle rec = new iTextSharp.text.Rectangle(612, 792);
    Document document = new Document(rec);
    document.SetMargins(45f, 30f, 55f, 30f);

    // step 2:
    // we create a writer that listens to the document
    var pdfWriter = PdfWriter.GetInstance(document, new FileStream(strFileName, FileMode.Create));
    pdfWriter.InitialLeading = 12.5f;

    string[] stringSeparators = new string[] { "<!-- pagebreak -->" };
    //Response.Write(strHtml);
    string[] newString = strHtml.Split(stringSeparators, StringSplitOptions.None);

    //HTMLWorker obj = new HTMLWorker(document);

    document.Open();

    var xmlWorkerHelper = XMLWorkerHelper.GetInstance();
    var cssResolver = new StyleAttrCSSResolver();
    var xmlWorkerFontProvider = new XMLWorkerFontProvider();

    var cssAppliers = new CssAppliersImpl(xmlWorkerFontProvider);
    var htmlContext = new HtmlPipelineContext(cssAppliers);
    htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());

    PdfWriterPipeline pdfWriterPipeline = new PdfWriterPipeline(document, pdfWriter);
    HtmlPipeline htmlPipeline = new HtmlPipeline(htmlContext, pdfWriterPipeline);
    CssResolverPipeline cssResolverPipeline = new CssResolverPipeline(cssResolver, htmlPipeline);
    XMLWorker xmlWorker = new XMLWorker(cssResolverPipeline, true);
    XMLParser xmlParser = new XMLParser(xmlWorker);

    int i = 0;
    foreach (String currentString in newString) {
        if (i > 0)
        {
            document.NewPage();
        }

        StringReader sr = new StringReader(currentString);
        xmlParser.Parse(sr);

        i++;
    }

    document.Close();

    ShowPdf(strFileName);
} 
```

我只有半英寸可以输入姓名/地址。我已经尝试同时指定 line-height`8px`以防`8`万一。没有任何效果。有谁知道我需要如何格式化 HTML 以保留行高？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:38:33.930

我升级到 itextsharp 的 xmlworker (http://sourceforge.net/projects/xmlworker/)，它允许我使用 css 和 div 标签。不幸的是，Margin 不起作用，但 padding 起作用，所以我能够做我需要做的事情。

# logging - 将命令提示符输入保存到文本文件

> ID：14241266
> 
> 赞同：0
> 
> 时间：2013-01-09T16:02:56.377
> 
> 标签：logging, command-prompt

我正在使用 git 命令提示符并希望将一系列命令及其输出保存到文件中，以便更容易在论坛等上发帖。我该怎么做以及如何指定文件的保存位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:16:16.400

剪切和粘贴应该可以...

# javascript - 定位一个 Span jQuery 控制器

> ID：14241267
> 
> 赞同：0
> 
> 时间：2013-01-09T16:02:59.070
> 
> 标签：javascript, jquery, html, google-chrome

我试图在我的模板中找到一个控制 span 元素的 jQuery 代码。

例如：

```
<span class="ccontent" 
```

*   将鼠标悬停在该类上时会打开一个信息窗口。

如何使用 Chrome 在我的模板中找到与此相关的 jQuery 代码以及它所在的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:07:34.903

尝试使用[视觉事件 2](http://www.sprymedia.co.uk/article/Visual+Event+2)

> Visual Event 是一个开源 Javascript 小书签，它提供有关已附加到 DOM 元素的事件的调试信息。视觉事件显示：
> 
> *   哪些元素附加了事件
> *   附加到元素的事件类型
> *   将与事件一起运行的代码被触发
> *   定义附加函数的源文件和行号（仅限 Webkit 浏览器和 Opera）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:13:20.333

在 Chrome 中，右键单击并选择“检查元素”以打开检查器。在 Mac 上，您可以使用 Command + Option + I

之后单击资源选项卡，然后单击 Command + F（同样是 Mac，不确定 PC）。在搜索框中键入 ccontent，您将看到对该类名的引用数。单击直到您看到代码中提到它的所有位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T17:12:18.237

当您可以在代码中搜索有问题的 id（例如“#ccontent”）时，Matthew Davis 的答案将起作用，但当元素被间接引用时，例如按类或按元素类型，则效果不佳。

Visual Events 小书签也会帮助您，但有时它只会列出绑定到元素的事件的缩小 JQuery 代码。

当执行鼠标悬停或其他导致 DOM 更改或悬停对象属性更改的操作时，前两个（更简单！）选项失败，您可以尝试以下操作：

*   进入 Chrome 开发者工具的 Elements 选项卡 (CTRL+SHIFT+I)。
*   如果您对跟踪元素的属性更改感兴趣，请右键单击它并单击“Break On > Attributes modified”：

![属性修改](../Images/409554cb586d63cc1117735eaea96354.png)

*   如果您对 DOM 中的某些更改感兴趣（例如出现模式），请右键单击文档正文或相关容器 div，然后单击“中断 > 子树修改”：

![子树修改](../Images/7406cc05ec6c3389db67ea2a61f749f9.png)

*   然后在元素上执行鼠标悬停或触发您感兴趣的任何事件。
*   Chrome 调试器应该启动，右侧是调用堆栈：

![调用栈](../Images/6e93005c4a85ac089f467789223bdddc.png)

*   您可以单击调用堆栈中的不同项目，以查看在 Source 选项卡中触发调用的位置。

# javascript - 表上的行渲染事件

> ID：14241268
> 
> 赞同：1
> 
> 时间：2013-01-09T16:03:01.583
> 
> 标签：javascript, jquery, asp.net, c#-4.0

```
// Row Rendering event
public void Row_Rendering() {

    // Enter your code here 
} 
```

这是我要执行的条件..

```
"SCHD TIME" - is the TIMESTAMP(value) from SQL

if (SCHD_TIME >= 15mins) {
    return 'background-color:red; color:#fff'
} else if (SCHD_TIME> 15mins <= 30mins) {
    return 'background-color:yellow; color:#000;'
} else if (SCHD_TIME> 30mins <= 2hours) {
    return 'background-color:green; color:#fff'
} else if (SCHD_TIME> 2hours) {
    return 'background-color:none';
} 
```

或者如果有更简单的方法在服务器端执行此操作，请分享谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:27:21.483

渲染不会发生在服务器端。任何视觉更改总是发生在客户端，尽管这些更改的信息可以通过 POST 方法从服务器端传递，或者只是通过客户端完成。代码并不复杂，可以通过 javascript/jQuery 轻松实现。一个好的 javascript 日期格式是[DateJS](http://www.datejs.com/)，有很多好的时间比较和解析，几乎可以与 C# DateTime 相提并论。同样在 jQuery 中，您可以通过创建“red”、“green”、“yellow”等类并使用 .addClass() 和 .removeClass() 在它们之间进行更改或使用 .css( 'background-color', 'green') 等来改变行的颜色。

祝你好运！

# php - 上传到新创建的目录

> ID：14241272
> 
> 赞同：3
> 
> 时间：2013-01-09T16:03:06.223
> 
> 标签：php, mysql, session, mkdir, subdirectory

我有一个名为“文件”的目录，其中包含代表用户上传空间的文件夹，例如`files/14`，“14”是用户的用户 ID。

我正在尝试创建一个简单的脚本，当文件上传时，脚本：

*   检查用户的文件夹是否已经存在
*   如果用户文件夹不存在，则使用 UserID 创建一个，否则忽略并继续
*   将文件上传到新创建的目录（例如 14）或上传到之前创建的用户目录。

这是代码：

```
<?php 
    include("dbConfig.php");
    $Username = $_SESSION["username"];
    global $userid;
    $Password = $_SESSION["password"];
    $Password = md5($Password);

    $sql = "SELECT UserID FROM users WHERE Username = '".$Username."'";

    $result = mysql_query($sql) or die(mysql_error());
    while($row = mysql_fetch_assoc($result)) {
        $userid = $row['UserID'];
    }

    $dirname =  (string)$userid;
    $filename = ("$dirname" . "/");

    if (!file_exists("../files/" .$filename)) {
        mkdir("files/$dirname", 0775);
    } else {
        if (isset($_FILES['files'])) {
            echo "<div id='files_table'><table class='center'.><tr><td>";  
            foreach($_FILES['files']['tmp_name'] as $key => $tmp_name) {
                $dest = ($filename . "{$_FILES['files']['name'][$key]}");
                move_uploaded_file($tmp_name, $dest );
                echo $_FILES['files']['name'][$key], " uploaded.", "<br>";
            }
        }
    }
?> 
```

尽管正在创建用户目录，但文件正在上传到根目录 (../files)。

此外，警告没有被忽略，给我这个错误：

```
**Warning: mkdir(): File exists in C:\xampp\htdocs\Task2PHP\final\upload.php on line 80** 
```

谁能帮助我并告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:07:43.887

对两个调用使用相同的结构怎么样？

例如：

```
if (!file_exists("../files/" .$filename)) {
    mkdir("../files/" .$filename, 0775); 
```

您似乎一方面检查一个文件/文件夹是否存在，然后在其他地方创建另一个文件/文件夹，因为`../files`!=`files/`

navnav 也是正确的，您应该停止使用相对路径。保证问题在路上。特别是如果您使用一些框架和 url 重写。

# hibernate - Hibernate MappingException 转换为 ElementCollection

> ID：14241274
> 
> 赞同：0
> 
> 时间：2013-01-09T16:03:10.217
> 
> 标签：hibernate, collections, hibernate-onetomany

我在重构代码以使用 JPA ElementCollection 而不是已弃用的 CollectionOfElements 时遇到问题。我看到以下堆栈跟踪：

> org.hibernate.MappingException：无法确定类型：java.util.Set，表：UserFilter，列：[org.hibernate.mapping.Column(element)] at org.hibernate.mapping.SimpleValue.getType(SimpleValue .java:292) 在 org.hibernate.mapping.SimpleValue.isValid(SimpleValue.java:276) 在 org.hibernate.mapping.Property.isValid(Property.java:207) 在 org.hibernate.mapping.PersistentClass.validate( PersistentClass.java:458) 在 org.hibernate.mapping.JoinedSubclass.validate(JoinedSubclass.java:63) 在 org.hibernate.cfg.Configuration.validate(Configuration.java:1149) 在 org.hibernate.cfg.Configuration.buildSessionFactory (Configuration.java:1334) 在 org.hibernate.cfg.AnnotationConfiguration.buildSessionFactory(AnnotationConfiguration.java:867)

UserFilter 中更改的代码如下：

```
//@CollectionOfElements
@ElementCollection(targetClass = String.class)
@CollectionTable(name="UserFilter_orgUnits", joinColumns=@JoinColumn(name="UserFilter_FILTER_ID"))
@Column(columnDefinition = "varchar(255)", name="element")
private Set<String> orgUnits = new HashSet<String>(); 
```

我正在指定连接表名和列名以实现向后兼容性。

# cakephp - CakePHP：从表单助手中搜索日期

> ID：14241275
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:03:11.403
> 
> 标签：cakephp, date-format, cakephp-2.3

我使用表单助手来显示下拉选择日期。我的问题是，我无法将 ms sql 中的日期与表单数据进行比较。

我的观点 ：

```
<?php echo $this->Form->input('collect_date', array('label' => 'Collect Date','type'=>'date','dateFormat'=> 'DMY','minYear' => date('Y'),'maxYear' => date('Y')+1));?> 
```

我的控制器

```
$status =array(0,2,4);
$find_date = $this->data['Transaction']['collect_date'];
$field = array('Transaction.status','Catalogue.title', 'Catalogue.author', 'Catalogue.isbn', 'Location.rack');
$condition = array('OR' => array('AND' =>array('Transaction.return_date <'=> $find_date,'Transaction.status '=> '3'),array('Transaction.status'=> $status)));
$data = $this->Catalogue->Transaction->find('count',array('fields' => $field,'conditions'=>$condition,'order'=>array('Transaction.id desc') )); 
$this->set('Found', $data); 
```

和 sql 转储

```
SELECT COUNT(*) AS [count] FROM [transactions] AS [Transaction]
LEFT JOIN [catalogues] AS [Catalogue] ON ([Transaction].[catalogue_id] = [Catalogue].[id]) 
LEFT JOIN [users] AS [User] ON ([Transaction].[user_id] = [User].[id]) 
WHERE (((([Transaction].[return_date] < ('01', '09', 2013)) 
AND ([Transaction].[status] = 3))) OR ([Transaction].[status] IN (0, 2, 4))) 
```

如您所见，日期格式（'01'、'09'、2013）。但是当尝试转换使用这个

```
'Transaction.return_date <'=> date('Y-m-d', strtotime($find_date)) 
```

它显示错误：

```
Warning (2): strtotime() expects parameter 1 to be string, array given [APP\Controller\CataloguesController.php, line 66] 
```

和 sql 显示：

```
[Transaction].[return_date] < '1970-01-01' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:07:54.353

你可以使用：

```
$date = DateTime::createFromFormat('d/m/y',  implode('/', $find_date));
'Transaction.return_date <'=> $date->format('Y-m-d'); 
```

编辑：

我认为它意味着“扁平化”的方式是

```
$this->Model->deconstruct('find_date', $find_date); 
```

但是，上次我尝试使用它时，我无法让它正常工作，所以我选择了上面的方法。 [http://api21.cakephp.org/class/model#method-Modeldeconstruct](http://api21.cakephp.org/class/model#method-Modeldeconstruct)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:15:53.820

尝试在 sql 查询中使用 UNIX_TIMESTAMP 转换返回日期，然后将其与 strtotime($find_date) 进行比较。

# java - 我如何知道哪个安全提供商正在处理我的 SSL 套接字？

> ID：14241278
> 
> 赞同：3
> 
> 时间：2013-01-09T16:03:20.443
> 
> 标签：java, security, ssl

我正在尝试在 Java 中配置自定义安全提供程序。我想验证 SSL 连接是否由这个新的安全提供程序处理（连接是通过接受来自默认 ssl 套接字工厂创建的服务器套接字的新连接来创建的）。我的问题是我无法找到与 given 关联的安全提供程序[`SSLSocket`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html)。

可以通过[`SSLContext`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLContext.html)类访问提供者，但我无法[`SSLContext`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLContext.html)从[`SSLSocket`](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLSocket.html).

也许有更好的方法可以验证这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:22:09.603

由于默认`SSLSocketFactory`会使用默认值`SSLContext`，所以可以使用`SSLContext.getDefault().getProvider()`.

由于`(SSL)Socket`实例不一定由 a 创建`(SSL)SocketFactory`，因此它们不提供公共 API 来访问它们可能是从中创建的工厂。

# ios - 海量并行计算ios

> ID：14241282
> 
> 赞同：2
> 
> 时间：2013-01-09T16:03:31.753
> 
> 标签：ios, objective-c, multithreading, parallel-processing

我有一种方法可以用不同的数据重复执行数学运算（可能是数百万次）。在 iOs 中执行此操作的最佳方法是什么（它将在 iPad 设备上运行）？我知道那`performSelectorOnBackgroundThread`已被弃用...？我还需要将所有结果汇总到一个`NSArray`. 最好的方法似乎是：向通知中心发布通知并将该方法添加为观察者。这个对吗？我相信该数组需要被声明为原子的......另外，我需要在操作完成时显示一个进度条......我可以并行启动多少线程？我不认为在 iDevice 上启动 1.000.000 个线程是一个好主意。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:19:18.967

查看[Grand Central Dispatch](http://en.wikipedia.org/wiki/Grand_Central_Dispatch)，这是在 iOS（和 Mac）上执行多线程的首选方式。

使用 GCD 的一个简单示例如下所示：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    //do long running task here
} 
```

这将异步执行主线程的块。GCD 有许多其他调度任务的方式，其中一种直接取自上面列出的 Wikipedia 文章：

```
dispatch_apply(count, dispatch_get_global_queue(0, 0), ^(size_t i){
     results[i] = do_work(data, i);
    });
total = summarize(results, count); 
```

这个特定的代码示例可能正是您正在寻找的，假设您的这个“大任务”是一个[令人尴尬的并行](http://en.wikipedia.org/wiki/Embarrassingly_parallel).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T17:29:46.113

虽然您可以同时使用`dispatch_apply()`和拆分所有运行，但最终会变慢。

您将希望能够同时限制运行中的运行次数，而同时计算的次数是您需要调整的东西。

我经常使用 a`dispatch_semaphore_t`来轻松调整飞行中计算的数量。

这样做的详细信息在此处的答案中：[https ://stackoverflow.com/a/4535110/25646](https://stackoverflow.com/a/4535110/25646)

# java - 可执行 Jar 仅限于一个带有 JavaFX 的窗口

> ID：14241283
> 
> 赞同：2
> 
> 时间：2013-01-09T16:03:34.327
> 
> 标签：java, eclipse, javafx-2, executable-jar, scenebuilder

我正在通过*E(fx)clipse*和*Java Scene Builder 构建*JavaFX 应用程序。

基本功能是登录窗口。登录后，新窗口打开，登录窗口消失。现在它只是在原型阶段。

当 ecplise 用完时，我想要的功能就在那里。登录窗口在启动时显示（代码看起来像这样）

```
@Override
public void start(Stage primaryStage) {
    try {
        Parent root = FXMLLoader.load(getClass().getResource("view/login.fxml"), ResourceBundle.getBundle("ca.sportstats.resources.labels"));

        primaryStage.setTitle("SportStats Live Update Tool : Login");
        primaryStage.setScene(new Scene(root, 450, 300));
        primaryStage.show();
    } catch (IOException e) {
        //Change this to open a small popup window.
        System.out.println("Could not deploy");
    }
}

public static void main(String[] args) {
    launch(args);
} 
```

这个窗口上有一个按钮可以打开另一个按钮（登录逻辑稍后会出现，这里不是问题）。

```
 btnLogin.setOnAction(new EventHandler<ActionEvent>() {
        public void handle(ActionEvent event) {

            //TODO: Login logic.
            //On success allow to open the tool (aka main window);

            Parent root;
            try {
                root = FXMLLoader.load(getClass().getResource("../view/selector.fxml"), resources);
                Stage stage = new Stage();
                stage.setTitle("Selector");
                stage.setScene(new Scene(root, 450, 450));
                stage.show();

                //hide this current window
                ((Node)(event.getSource())).getScene().getWindow().hide();

            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }); 
```

这在 Ecplise 中没有问题。但！当我构建它时（以[e(fx)clipse 教程](http://efxclipse.org/trac/wiki/Tutorial1#no1)中描述的方式，我得到了一个可执行的 jar，但只得到了登录窗口。当我点击我的按钮时，*第二个*窗口不会出现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:21:06.513

我认为的问题是在罐子里你不能做相对路径。在 Eclipse 中，您在文件系统上运行，这不是问题

# java - Java注释的Maven-properties-filtering-like？

> ID：14241284
> 
> 赞同：7
> 
> 时间：2013-01-09T16:03:36.240
> 
> 标签：java, spring, maven, properties, filtering

目前，我知道如何使用 Maven 进行这种过滤：

*pom.xml*

```
<properties>
    <foo>bar</foo>
</properties> 
```

*应用程序属性*

```
foo=${foo} 
```

但是是否有可能使用 Maven、Spring 或任何其他工具进行这种过滤？

*MyClass.java*

```
@MyAnnotation("${foo}") // ${foo} should get replaced at compile time
public void getData() {
    return data;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:07:52.987

您是否尝试过使用资源插件的执行。据我所知，您可以将其指向您的 Java 源代码并使用其正常过滤。

[http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)

```
 <properties>
    <my.name>chad</my.name>
    <java.property>//comment</java.property>
  </properties>

  <build>
    <sourceDirectory>target/processed-source/java</sourceDirectory>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>

         <resource>
            <directory>src/main/java</directory>
            <filtering>true</filtering>
            <targetPath>../processed-source/java</targetPath>
        </resource>
    </resources>

  </build> 
```

因此，第一件事是将处理后的 java 源路由到目标目录中的一个特殊文件夹中。接下来，您必须重新配置编译器插件以不编译未过滤的源代码，而是编译新的源代码。请注意，与所有 maven 一样，您可以配置的内容远不止这些。

这个[博客条目](https://connect.gxsoftware.com/Blogs/Bram-de-Kruijff/Maven-secrets-filtering-sources.htm)很有用。

# c# - 要在文本框中显示的随机数生成器

> ID：14241285
> 
> 赞同：2
> 
> 时间：2013-01-09T16:03:38.550
> 
> 标签：c#, random, numbers, generator

我有点卡在我正在做的事情上。我有一个带有不同按钮的 Windows 窗体应用程序，每个按钮应该做不同的事情。现在我的问题：

在一个按钮上，当我按下它时，它应该生成随机数（例如 0-1000）并在文本框中显示数字，我在程序上也有。我试图在按钮上执行此代码：

```
private void button5_Click(object sender, EventArgs e)
{
    Random slumpGenerator = new Random(); int tal; 
    tal = slumpGenerator.Next(); 
} 
```

但不幸的是，文本框中没有显示任何数字。我认为这可能是因为我没有提到数字应该显示在我的文本框中，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:05:03.520

可以肯定 - 您没有在文本框上设置任何属性。您忽略了新生成的随机数。你需要类似的东西：

```
Random slumpGenerator = new Random();
// Or whatever limits you want... Next() returns a double
int tal = slumpGenerator.Next(0, 100);
textBox.Text = tal.ToString(); 
```

请注意，通常创建许多`Random`实例是一个坏主意 - 但它不像将其设为`static`变量那么简单......有关更多详细信息，请参阅我[的关于随机性的文章。](http://csharpindepth.com/Articles/Chapter12/Random.aspx)另请注意我如何更改代码以声明一个变量并在单个语句中为其分配一个值 - 这通常比在一个语句中声明然后稍后为其分配一个值更可取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:05:58.150

```
private void button5_Click(object sender, EventArgs e)
{
    Random slumpGenerator = new Random(); 
    int tal = slumpGenerator.Next(0, 1000); 
    txtBxName.Text = tal.ToString();
} 
```

1.  您需要为“Random” .Next() 方法添加最小值和最大值。
2.  您没有在任何地方设置文本框文本值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:15:24.237

您可以考虑使用加密服务提供商提供的实现的`RNGCryptoServiceProvider` **线程安全**类（`System.Security.Cryptography`命名空间），它是加密随机数生成器（RNG）。

实现比使用`System.Random`类要困难一些。

示例实现如下：

```
using System.Security.Cryptography;
...

private RNGCryptoServiceProvider rnd = new RNGCryptoServiceProvider();

private int NextInt32(int maxValue)
{
    byte[] intBytes = new byte[4];
    rnd.GetBytes(intBytes);
    return Math.Abs(BitConverter.ToInt32(intBytes, 0)) % maxValue + 1;
}

// And your method with textBox
private void button5_Click(object sender, EventArgs e)
{
    textBox.Text = NextInt32(1000).ToString(); 
} 
```

`RNGCryptoServiceProvider`您可以在 SO 问题中阅读更多信息： [Pros and cons of RNGCryptoServiceProvider](https://stackoverflow.com/questions/418817/pros-and-cons-of-rngcryptoserviceprovider)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-30T16:08:40.860

```
 **Random Number Generation in C#.Net** 
```

**在编写代码之前添加两个命名空间**

*使用 System.Security；

使用 System.Security.Cryptography;*

**代码：**

复制以下代码并将其放置在按钮内

```
RNGCryptoServiceProvider xx = new RNGCryptoServiceProvider();
byte [] random_number=new  byte [512];
xx.GetBytes(random_number);
foreach (var i in random_number)
{
    textBox1.Text = i.ToString();
} 
```

有关 c#.net 中的更多详细信息，请参阅我的 blogspot：mbthangamalai.blogspot.in

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-16T00:46:23.137

您需要在代码中添加一些内容。这是您想要的完整代码...

```
private void button5_Click(object sender, EventArgs e)
{
    Random slumpGenerator = new Random(); int tal;
    tal = slumpGenerator.Next(0, 1000);
    textBox.Text = tal.ToString();
} 
```

您必须设置希望它生成的最小值和最大值。您还必须将最小值 1 置于您真正想要生成的值之下。即，如果要生成 10 到 20 之间的数字，则需要将最小值设置为 9，将最大值设置为 20。

您还需要将值放入文本框等以显示它。由于它是一个 int，并且文本框的文本是一种`String`格式，因此您需要通过将其`String`放在代码末尾来将其转换为 a：`.ToString()`

我知道这个答案很晚，但以后可能会对您有所帮助！

# php - 避免在语言环境正则表达式测试中使用捕获组？

> ID：14241286
> 
> 赞同：1
> 
> 时间：2013-01-09T16:03:40.497
> 
> 标签：php, regex, locale

正则表达式仅用于检查字符串是否有效，而不用于捕获它的任何部分：

> ISO 639-1 两字母小写文化代码和 ISO 3166-1 两字母大写亚文化代码，或 ISO 639-1 小写文化代码本身。

也就是说`it`，`it-IT`例如。我结束了（我在正则表达式方面不太好）：

```
^[a-z]{2}(-[A-Z]{2})?$ 
```

使用捕获组（3166-1 部分）。真的需要这个群吗？如何避免使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:05:17.797

你需要使用

```
^[a-z]{2}(?:-[A-Z]{2})?$ 
```

要定义您使用的非捕获组`(?:)`

# android - 无需用户交互即可自动拍照

> ID：14241294
> 
> 赞同：-2
> 
> 时间：2013-01-09T16:04:05.930
> 
> 标签：android, camera

我想以不需要用户交互且不显示用户交互元素的方式拍照。换句话说，我想使用后台进程拍照。不得发出声音（例如拍照时的相机快门）。如果可能的话，如果我可以设置相机的分辨率而不是在拍摄后调整图像大小，那也很好。

我见过的所有代码示例都使用一个显示典型相机应用程序并让用户手动拍照的活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:10:53.060

我认为[相机](http://developer.android.com/reference/android/hardware/Camera.html)的开发页面很好地概述了这个过程。你读过吗？

> 1.  从 open(int) 获取 Camera 的实例。
> 2.  使用 getParameters() 获取现有（默认）设置。
> 3.  如有必要，修改返回的 Camera.Parameters 对象并调用 setParameters(Camera.Parameters)。
> 4.  如果需要，请调用 setDisplayOrientation(int)。
> 5.  重要提示：将完全初始化的 SurfaceHolder 传递给 setPreviewDisplay(SurfaceHolder)。没有表面，相机将无法开始预览。
> 6.  重要提示：调用 startPreview() 开始更新预览图面。必须先开始预览，然后才能拍照。
> 7.  如果需要，请调用 takePicture(Camera.ShutterCallback, Camera.PictureCallback, Camera.PictureCallback, Camera.PictureCallback) 来拍摄照片。等待回调提供实际的图像数据。
> 8.  拍照后，预览显示将停止。要拍摄更多照片，请先再次调用 startPreview()。
> 9.  调用 stopPreview() 以停止更新预览图面。
> 10.  重要提示：调用 release() 以释放相机以供其他应用程序使用。应用程序应立即在 onPause() 中释放相机（并在 onResume() 中重新打开（）它）。

虽然它确实提到了预览，但您始终可以隐藏用于预览的表面。不需要用户交互。

# ios - AFJSONRequestOperation / AFHTTPClient 获取旧数据

> ID：14241295
> 
> 赞同：1
> 
> 时间：2013-01-09T16:04:08.117
> 
> 标签：ios, objective-c, json, http, afnetworking

所以我要做的就是在某个地方提供一个 .json 文件（我已经尝试过我自己的个人服务器和 AppFog），然后在 iOS 平台上使用 AFJSONRequestOperation 执行 GET 请求。我执行此请求的代码如下：

```
AFHTTPClient *aclient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:kBaseURL]];
NSURLRequest *request = [aclient requestWithMethod:@"GET"
                                           path:@"voucher.json"
                                     parameters:nil];

AFJSONRequestOperation *op = [[AFJSONRequestOperation alloc] initWithRequest:request];
[op setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"%@", (NSString *)responseObject);
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error: %@", error);
}];

[op start]; 
```

这里的问题是 .json 文件最初包含一个由 2 个字符串组成的数组。上面的代码可以很好地获取这些对象。然后，如果我用另外 3 个字符串编辑 .json 文件，重新运行代码将继续仅获取 2 个旧字符串。

**在我对 .json 文件进行更改后，仅 10-15 分钟就会刷新并为我提供更新的数据。**起初我认为这是一个缓存问题，但设置 [client setCachingPolicy:] 并没有任何区别。

无论我在我的静态服务器上托管我的 .json 文件，还是在 AppFog 上的 Node express 服务器中运行，都会出现这个问题。**它只是不断返回所请求资源的旧版本。**

我对此感到非常困惑：所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T18:26:50.237

确保 url 请求没有缓存数据。我必须实现以下内容，以便每次获取新的 json 数据。

```
NSURLRequest *request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:5]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T18:32:38.967

这可能是一个缓存问题 - 您可以更改请求的缓存策略或将某些内容附加到查询字符串上，例如当前时间。

为此，您可以使用以下内容：

```
[aclient requestWithMethod:@"GET"
                      path:[NSString stringWithFormat:@"voucher.json?%@", [NSDate date]]
                parameters:nil]; 
```

# android - 忘记了 android 密钥库，但我知道它的所有详细信息和密码

> ID：14241301
> 
> 赞同：0
> 
> 时间：2013-01-09T16:04:16.797
> 
> 标签：android, keystore

我不小心丢失了我用来在商店中启动应用程序的密钥库我知道我在上面写的所有详细信息和密码，你使用 keytool.exe 从我在认证前上传到市场的认证 APK 获取证书详细信息向我展示了指纹、序列号和日期我创建了一个 PC 应用程序以使 pc 时间冻结同时我创建了旧密钥并创建了另一个密钥存储现在日期和其他信息相同，但序列号 n 指纹每次我创建新密钥时都会变得不同，any1得到了解决方案，或者他们在什么基础上提供了这些细节谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:12:09.517

这是不可能的。密钥库包含一个证书，用于对您的 apk 进行数字签名。每个证书都是完全唯一的，不能从旧的 apk 重新生成或恢复。

谷歌依赖它，因为它非常安全，并允许他们真正减少有人可以破解您的开发者帐户详细信息并上传恶意 apk 作为现有应用程序更新的机会。

现在，您必须使用不同的密钥在不同的包名称下重新上传应用程序。将来，请记住将您的密钥库备份到多个位置（但要安全地进行。不要意外地将其提交到公共版本控制系统中。密钥库应始终保持私有）。

数字签名基于公钥密码术。给定公钥，您无法恢复私钥——这就是公钥加密的重点。这种算法基于单向函数：容易做但难以逆转的事情。

# c# - ISomething 的 WCF 和 IList

> ID：14241305
> 
> 赞同：0
> 
> 时间：2013-01-09T16:04:26.417
> 
> 标签：c#, wcf, ilist

我想知道如何通过 WCF 使这个对象可用：

```
[DataContract]
public class A : IA
{
    [DataMember]
    public List<IB> ListOfB { get; set; } 
}

public interface IA
{
    List<IB> ListOfB { get; set; }
} 
```

与`IB`类的接口`B`。

生成的 XSD 是：

```
<xs:complexType name="A">
  <xs:sequence>
    <xs:element xmlns:q1="http://schemas.microsoft.com/2003/10/Serialization/Arrays" minOccurs="0" name="ListOfB" nillable="true" type="q1:ArrayOfanyType"/>
  </xs:sequence>
</xs:complexType>
<xs:element name="A" nillable="true" type="tns:A"/>
</xs:schema> 
```

ArrayOfanyType -> 我觉得它不能工作，因为`IB`不能被标记`[DataContract]`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:18:56.770

为了让序列化程序解释您的合同，它们需要用具体类型而不是接口来表示。如果您将代码更改为此（并使用适当的`DataContract`和`DataMember`属性注释类 B，那么您应该很高兴。

```
[DataContract]
public class A
{
    [DataMember]
    public List<B> ListOfB { get; set; } 
} 
```

# ssh - 在 RHEL 6 上移动 AD 域控制器，ssh 不起作用

> ID：14241306
> 
> 赞同：0
> 
> 时间：2013-01-09T16:04:29.610
> 
> 标签：ssh, kerberos, samba, rhel6

我在 RHEL6 上使用 samba 来控制 Windows 2003 服务器的活动目录单点登录。Kerberos 在幕后用于控制对 samba 共享的访问和处理 ssh 登录。一切正常。

然后，Windows 管理员创建了一个新的 2008 服务器（新域、新 IP）并要求我链接到这个服务器（所有用户都已迁移）。我认为编辑 /etc/samba/smb.conf、/etc/ssh/ssh_config 和 /etc/krb5.conf 并为新服务器添加条目以使一切顺利传输是一件简单的事情。

我可以连接到 samba 共享，所以我知道通过 kerberos 的身份验证通常是有效的。但是，我不能再通过 ssh 登录。当我输入正确的密码时，SSH 客户端会终止（如果输入错误的密码，它只会按预期返回拒绝访问）。KRB 日志文件表明一个一般的身份验证错误——但这对我来说似乎不太可能，因为 samba 可以工作（而且，我对“网络广告加入”没有任何问题）。

是否有可能缓存了与旧服务器相关的某些内容，需要重置才能使登录再次正常工作？我可以从控制台很好地登录 - 所以它似乎与 SSH 有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:21:55.277

结果我不记得更新“/etc/ssh.allow”文件了。

# c# - 如何使 RepositoryItemCheckEdit 像收音机一样工作？

> ID：14241309
> 
> 赞同：1
> 
> 时间：2013-01-09T16:04:52.270
> 
> 标签：c#, devexpress

我有一个 Devexpres`RepositoryItemCheckEdit`项目。此存储库用于网格中`IncludedItems`列中的所有单元格。有没有一种简单的方法可以强制此存储库像单选按钮一样工作？我想当时只检查列中的一项。如果一个项目被选中并且我检查另一个项目应该自动取消选中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:51:14.923

请查看 [如何实现单选列](http://www.devexpress.com/Support/Center/e/E926.aspx)代码中心示例以了解如何实现此功能。

# python - 交错不同长度的列表，消除重复，并保持顺序

> ID：14241320
> 
> 赞同：27
> 
> 时间：2013-01-09T16:05:13.493
> 
> 标签：python, list, iterator

我有两个列表，比方说：

```
keys1 = ['A', 'B', 'C', 'D', 'E',           'H', 'I']
keys2 = ['A', 'B',           'E', 'F', 'G', 'H',      'J', 'K'] 
```

如何创建一个没有重复的合并列表，保留两个列表的顺序，在它们所属的位置插入缺失的元素？像这样：

```
merged = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'] 
```

请注意，可以将元素与相等性进行比较，但不能进行排序（它们是复杂的字符串）。这些元素不能通过比较它们来排序，但它们有一个基于它们在原始列表中出现的顺序。

如果出现矛盾（两个输入列表中的顺序不同），任何包含所有元素的输出都是有效的。当然，如果解决方案在保留大部分订单方面显示出“常识”，则可以加分。

同样（正如一些评论仍在争论的那样），列表通常不会在公共元素的顺序方面相互矛盾。如果他们这样做，算法需要优雅地处理该错误。

我从一个版本开始，它使用 .next() 迭代列表以仅推进包含不匹配元素的列表，但 .next() 只是不知道何时停止。

```
merged = []
L = iter(keys1)
H = iter(keys2)
l = L.next()
h = H.next()

for i in range(max(len(keys1, keys2))):
  if l == h:
    if l not in merged:
      merged.append(l)
    l = L.next()
    h = H.next()

  elif l not in keys2:
    if l not in merged:
      merged.append(l)
    l = L.next()

  elif h not in keys1:
    if h not in merged:
      merged.append(h)
    h = H.next()

  else: # just in case the input is badly ordered
    if l not in merged:
      merged.append(l)
    l = L.next()
    if h not in merged:
      merged.append(h)
    h = H.next()   

print merged 
```

这显然不起作用，因为 .next() 将导致最短列表异常。现在我可以更新我的代码以在每次调用 .next() 时捕获该异常。但是代码已经很不符合pythonic了，这显然会破灭泡沫。

有没有人更好地了解如何遍历这些列表以组合元素？

如果我可以一口气完成三个列表，则可以加分。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-09T16:48:22.453

您需要的基本上是任何合并实用程序所做的：它尝试合并两个序列，同时保持每个序列的相对顺序。您可以使用 Python 的[`difflib`](http://docs.python.org/2/library/difflib.html)模块来区分这两个序列，并将它们合并：

```
from difflib import SequenceMatcher

def merge_sequences(seq1,seq2):
    sm=SequenceMatcher(a=seq1,b=seq2)
    res = []
    for (op, start1, end1, start2, end2) in sm.get_opcodes():
        if op == 'equal' or op=='delete':
            #This range appears in both sequences, or only in the first one.
            res += seq1[start1:end1]
        elif op == 'insert':
            #This range appears in only the second sequence.
            res += seq2[start2:end2]
        elif op == 'replace':
            #There are different ranges in each sequence - add both.
            res += seq1[start1:end1]
            res += seq2[start2:end2]
    return res 
```

例子：

```
>>> keys1 = ['A', 'B', 'C', 'D', 'E',           'H', 'I']
>>> keys2 = ['A', 'B',           'E', 'F', 'G', 'H',      'J', 'K']
>>> merge_sequences(keys1, keys2)
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K'] 
```

请注意，您期望的答案不一定是唯一可能的答案。例如，如果我们在这里改变序列的顺序，我们会得到另一个同样有效的答案：

```
>>> merge_sequences(keys2, keys1)
['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'J', 'K', 'I'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T18:23:17.660

我怀疑您可能正在寻求[最短常见超序列](http://en.wikipedia.org/wiki/Shortest_common_supersequence)问题的解决方案，我认为这在任意数量的输入序列的一般情况下是 NP-hard。我不知道有任何库可以解决此问题，因此您可能必须手动实现。获得工作代码的最快方法可能是使用 difflib 获取 interjay 的答案，然后使用`reduce`它在任意数量的列表上运行它（确保将空列表指定为 的第三个参数`reduce`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:07:33.623

我会使用一个 Set [(cf. python doc)](http://docs.python.org/2/library/sets.html)，一个接一个地填充两个列表的元素。

并在完成后从集合中列出一个列表。

请注意，您的问题存在矛盾/悖论：您希望保留无法比较的元素的顺序（仅相等，因为正如您所说，“它们是复杂的字符串”）。

**编辑**： OP 正确地注意到**集合不保留插入顺序**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T18:55:57.490

通过仅使用列表，您可以通过几个简单的`for`循环和`.copy()`：

```
def mergeLists(list1, list2):
    # Exit if list2 is empty
    if not len(list2):
        return list1
    # Copy the content of list2 into merged list
    merged = list2.copy()

    # Create a list for storing temporary elements
    elements = []
    # Create a variable for storing previous element found in both lists
    previous = None

    # Loop through the elements of list1
    for e in list1:
        # Append the element to "elements" list if it's not in list2
        if e not in merged:
            elements.append(e)

        # If it is in list2 (is a common element)
        else:

            # Loop through the stored elements
            for x in elements:
                # Insert all the stored elements after the previous common element
                merged.insert(previous and merged.index(previous) + 1 or 0, x)
            # Save new common element to previous
            previous = e
            # Empty temporary elements
            del elements[:]

    # If no more common elements were found but there are elements still stored
    if len(elements)
        # Insert them after the previous match
        for e in elements:
            merged.insert(previous and merged.index(previous) + 1 or 0, e)
    # Return the merged list
    return merged

In [1]: keys1 = ["A", "B",      "D",      "F", "G", "H"]
In [2]: keys2 = ["A",      "C", "D", "E", "F",      "H"]
In [3]: mergeLists(keys1, keys2)
Out[3]: ["A", "B", "C", "D", "E", "F", "G", "H"] 
```

英语不是我的第一语言，这个语言很难解释，但如果你关心解释，这就是它的作用：

*   有一个名为的本地列表`elements`可以存储临时元素。
*   有一个名为的局部变量`previous`存储了两个列表中的前一个元素。
*   当它找到一个不在`list2`但在的元素时`list1`，它会将该元素附加到`elements`列表并继续循环。
*   一旦它碰到两个列表中的元素，它就会遍历`elements`列表，将元素后面的所有元素附加`previous`到`list2`.
*   然后将新匹配存储到`previous`并`elements`重置为`[]`并继续循环。
*   如果第一个或最后一个元素不是两个列表中的公共元素，则列表的开头和列表的结尾被计为公共元素。

这样，它将始终遵循以下格式：

1.  上一个共同元素
2.  list1 中的元素，位于两个公共元素之间
3.  list2 中的元素，位于两个常见元素之间
4.  新的共同元素

例如：

```
l1 = ["A", "B", "C",      "E"]
l2 = ["A",           "D", "E"] 
```

1.  revious 公共元素`A`将在合并列表中排在第一位。
2.  `l1`前一个公共元素`A`和新公共元素之间的元素将`E`被插入到 之后`A`。
3.  来自`l2`先前公共 elmeent`A`和新公共 elmeent之间的元素`E`将插入到来自 的元素之后`l1`。
4.  新的公共元素`E`将是最后一个元素。
5.  如果找到更多常见元素，则返回步骤 1。

    [“A”、“B”、“C”、“D”、“E”]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-04T12:48:46.107

我最近在实现一个功能时偶然发现了一个类似的问题。我试图首先明确定义问题陈述。如果我理解正确，这是问题陈述

## 问题陈述

编写一个函数 merge_lists ，它将合并具有重叠项目的列表列表，同时保留项目的顺序。

### 约束

1.  如果项目 A 在它们一起出现的所有列表中位于项目 B 之前，则项目 A 在最终列表中也必须在项目 B 之前

2.  如果 A 项和 B 项在不同列表中的顺序互换，即在某些列表中 A 在 B 之前，在某些其他列表中 B 在 A 之前，则最终列表中 A 和 B 的顺序应与它们在第一个列表中的顺序相同，其中它们一起出现。也就是说，如果在 l1 中 A 在 B 之前，在 l2 中 B 在 A 之前，那么在最终列表中 A 应该在 B 之前

3.  如果 Item A 和 Item B 在任何列表中都不一起出现，则它们的顺序必须由每个列表中最先出现的位置决定。也就是说，如果项目A在l1和l3中，项目B在l2和l6中，那么最终列表中的顺序必须是A然后B

## 测试用例 1：

### 输入：

l1 = [“类型和尺寸”、“方向”、“材料”、“位置”、“正面打印类型”、“背面打印类型”]

l2 = [“类型和尺寸”，“材料”，“位置”，“正面打印类型”，“正面打印尺寸”，“背面打印类型”，“背面打印尺寸”]

l3 = [“方向”、“材料”、“位置”、“颜色”、“正面打印类型”]

合并列表（[l1，l2，l3]）

### 输出：

['类型和尺寸'，'方向'，'材料'，'位置'，'颜色'，'正面打印类型'，'正面打印尺寸'，'背面打印类型'，'背面打印尺寸']

## 测试用例 2：

### 输入：

l1 = [“T”、“V”、“U”、“B”、“C”、“I”、“N”]

l2 = [“Y”、“V”、“U”、“G”、“B”、“I”]

l3 = [“X”、“T”、“V”、“M”、“B”、“C”、“I”]

l4 = [“U”，“P”，“G”]

合并列表（[l1，l2，l3，l4]）

### 输出：

['Y'，'X'，'T'，'V'，'U'，'M'，'P'，'G'，'B'，'C'，'I'，'N']

## 测试用例 3：

### 输入：

l1 = [“T”、“V”、“U”、“B”、“C”、“I”、“N”]

l2 = [“Y”、“U”、“V”、“G”、“B”、“I”]

l3 = [“X”、“T”、“V”、“M”、“I”、“C”、“B”]

l4 = [“U”，“P”，“G”]

合并列表（[l1，l2，l3，l4]）

### 输出：

['Y'，'X'，'T'，'V'，'U'，'M'，'P'，'G'，'B'，'C'，'I'，'N']

# 解决方案

我找到了一个合理的解决方案，可以正确解决我拥有的所有数据。（对于其他一些数据集可能是错误的。将留给其他人评论）。这是解决方案

```
def remove_duplicates(l):
    return list(set(l))

def flatten(list_of_lists):
    return [item for sublist in list_of_lists for item in sublist]

def difference(list1, list2):
    result = []
    for item in list1:
        if item not in list2:
            result.append(item)
    return result

def preceding_items_list(l, item):
    if item not in l:
        return []
    return l[:l.index(item)]

def merge_lists(list_of_lists):
    final_list = []
    item_predecessors = {}

    unique_items = remove_duplicates(flatten(list_of_lists))
    item_priorities = {}

    for item in unique_items:
        preceding_items = remove_duplicates(flatten([preceding_items_list(l, item) for l in list_of_lists]))
        for p_item in preceding_items:
            if p_item in item_predecessors and item in item_predecessors[p_item]:
                preceding_items.remove(p_item)
        item_predecessors[item] = preceding_items
    print "Item predecessors ", item_predecessors

    items_to_be_checked = difference(unique_items, item_priorities.keys())
    loop_ctr = -1
    while len(items_to_be_checked) > 0:
        loop_ctr += 1
        print "Starting loop {0}".format(loop_ctr)
        print "items to be checked ", items_to_be_checked
        for item in items_to_be_checked:
            predecessors = item_predecessors[item]
            if len(predecessors) == 0:
                item_priorities[item] = 0
            else:
                if all(pred in item_priorities for pred in predecessors):
                    item_priorities[item] = max([item_priorities[p] for p in predecessors]) + 1
        print "item_priorities at end of loop ", item_priorities
        items_to_be_checked = difference(unique_items, item_priorities.keys())
        print "items to be checked at end of loop ", items_to_be_checked
        print

    final_list = sorted(unique_items, key=lambda item: item_priorities[item])
    return final_list 
```

我还将代码作为名为 toolspy 的库的一部分开源。所以你可以这样做

```
pip install toolspy

from toolspy import merge_lists
lls=[['a', 'x', 'g'], ['x', 'v', 'g'], ['b', 'a', 'c', 'x']]
merge_lists(lls) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-14T18:25:58.047

这是我提出的一个 C# 解决方案——使用扩展方法——用于两个列表可能不包含相同类型元素的情况，因此它需要一个比较方法和一个选择器方法（返回目标的对象给定源对象的类型）。在这种情况下，第一个列表（“me”）被修改为包含最终结果，但它可以被修改为创建一个单独的列表。

```
public static class ListExtensions
{
    /// <summary>
    /// Merges two sorted lists containing potentially different types of objects, resulting in a single
    /// sorted list of objects of type T with no duplicates.
    /// </summary>
    public static void MergeOrderedList<TMe, TOther>(this List<TMe> me, IReadOnlyList<TOther> other, Func<TMe, TOther, int> compare = null, Func<TOther, TMe> selectT = null)
    {
        if (other == null)
            throw new ArgumentNullException(nameof(other));
        if (compare == null)
        {
            if (typeof(TMe).GetInterfaces().Any(i => i == typeof(IComparable<TOther>)))
            {
                compare = (a, b) => ((IComparable<TOther>)a).CompareTo(b);
            }
            else
            {
                throw new ArgumentNullException(nameof(compare),
                    "A comparison method must be supplied if no default comparison exists.");
            }
        }

        if (selectT == null)
            if (typeof(TMe).IsAssignableFrom(typeof(TOther)))
            {
                selectT = o => (TMe)(o as object);
            }
            else
            {
                throw new ArgumentNullException(nameof(selectT),
                    $"A selection method must be supplied if the items in the other list cannot be assigned to the type of the items in \"{nameof(me)}\"");
            }

        if (me.Count == 0)
        {
            me.AddRange(other.Select(selectT));
            return;
        }

        for (int o = 0, m = 0; o < other.Count; o++)
        {
            var currentOther = other[o];
            while (compare(me[m], currentOther) < 0 && ++m < me.Count) {}

            if (m == me.Count)
            {
                me.AddRange(other.Skip(o).Select(selectT));
                break;
            }

            if (compare(me[m], currentOther) != 0)
                me.Insert(m, selectT(currentOther));
        }
    }
} 
```

注意：我确实为此编写了单元测试，所以它很可靠。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-11T12:09:47.747

假设问题是保持尽可能多的常见项目的相同相对顺序。

考虑图的节点表示`m, n`相应列表中具有相同值的索引对。例如 [a, b, c] 和 [b, a, c] => [(0, 1), (1, 0), (2, 2)]

两个节点的相对顺序`m, n`和`m', n'`可以满足当且仅当`(m < m' and n < n') or (m > m' and n > n')`。在前面的示例`(0, 1), (1, 0)`中，不满足此条件，因此不可能满足两个列表中`a`和的相对顺序。`b`而`(1, 0), (2, 2)`满足这个性质，因此可以保持 和 的`a`顺序`c`。

基于这个条件，找到所有节点对之间的边`O(n^2)`。要找到最佳排列，请使用 Bron-Kerbosch 算法找到最大的最大[团](https://en.wikipedia.org/wiki/Clique_problem#Listing_all_maximal_cliques)（即 NP-complete ）。`O(3^(n/3))`生成的相同值索引对可用作生成合并列表的锚点。

如果多项式解决方案可以接受近似排序，则以下方法使用联合查找（具有路径压缩和秩优化）来近似最大团并`O(n^2)`及时运行并占用`O(n)`空间。

```
from collections import defaultdict

def find(cur, d):
    path = []
    while d[cur] != cur:
        path.append(cur)
        cur = d[cur]
    for n in path:
        d[n] = cur
    return cur

def f(o, n):
    if o == n:
        return o

    first_list = list(reversed(o))
    second_list = list(reversed(n))
    first_list_dict = {v: i for i, v in enumerate(first_list)}
    common = []
    for i, v in enumerate(second_list):
        if v in first_list_dict:
            common.append((first_list_dict[v], i))
    if not common:
        o.extend(n)
        return o
    if len(common) == len(first_list):
        return list({v: None for l in (o, n) for v in l})
    if len(common) == len(second_list):
        return o

    d = {p:p for p in common}
    rank = defaultdict(int)
    for i, p1 in enumerate(common):
        for p2 in common[i+1:]:
            if (p1[0] - p2[0]) * (p1[1] - p2[1]) > 0:
                h1, h2 = find(p1, d), find(p2, d)
                if rank[h1] > rank[h2]:
                    h1, h2 = h2, h1
                elif rank[h1] == rank[h2]:
                    rank[h2] += 1
                d[h1] = h2

    freq = defaultdict(list)
    for p in common:
        freq[find(p, d)].append(p)
    largest_clique = sorted(max(freq.values(), key=len))

    res = []
    seen = set()
    l_idx1, l_idx2 = 0, 0
    while largest_clique:
        idx1, idx2 = largest_clique.pop()
        new = first_list[l_idx1-1:idx1:-1]
        new.extend(second_list[l_idx2-1:idx2:-1])
        new.append(first_list[idx1])
        res.extend(v for v in new if v not in seen)
        seen.update(new)
        l_idx1, l_idx2 = idx1, idx2

    return res

for o, n in (
        [[0, 1, 2, 3, 4, 5], [5, 0, 1, 3, 4]],
        [[0, 1, 2, 3, 4, 5], [7, 3, 1, 2, 4, 5]],
        [[0, 1, 2, 3, 4, 5], [3, 4, 5, 0, 1, 2]],
        [["A", "B", "C", "E"], ["A", "D", "E"]],
        [["A", "B", "D", "F", "G", "H"], ["A", "C", "D", "E", "F", "H"]],
        [[0, 1, 2, 3, 4], [5, 6, 7, 8]],
        ):
    print(f"{str(o): <30}, {str(n): <30} => {str(f(o, n)): >40}") 
```

给出：

```
[0, 1, 2, 3, 4, 5]            , [5, 0, 1, 3, 4]                =>                       [0, 1, 2, 3, 4, 5]
[0, 1, 2, 3, 4, 5]            , [7, 3, 1, 2, 4, 5]             =>                    [0, 7, 3, 1, 2, 4, 5]
[0, 1, 2, 3, 4, 5]            , [3, 4, 5, 0, 1, 2]             =>                       [0, 1, 2, 3, 4, 5]
['A', 'B', 'C', 'E']          , ['A', 'D', 'E']                =>                ['A', 'B', 'C', 'D', 'E']
['A', 'B', 'D', 'F', 'G', 'H'], ['A', 'C', 'D', 'E', 'F', 'H'] => ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H']
[0, 1, 2, 3, 4]               , [5, 6, 7, 8]                   =>              [0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

# javascript - Web 服务在 chrome 中可以正常工作，但在 Firefox 和 IE 中不行

> ID：14241324
> 
> 赞同：3
> 
> 时间：2013-01-09T16:05:30.227
> 
> 标签：javascript, jquery, asp.net, html, web-services

我正在尝试调用外部 Web 服务，它在 chrome 中可以正常工作，但在 Firefox 和 IE 中却不行。在 chrome 中，它返回`'true'`，但在 Firefox 中，它返回`'0 error'`，这是我的完整代码......

```
 <script type="text/javascript" src="js/jquery-1.3.1.min.js"></script>
<script type="text/javascript">

    $(document).ready(function () {
        $("#btnCall").click(function (event) {
            var campaignid = 1000007;
            var r_source_id = 1000008;
            var parameters = "{'CompanyName': '" + document.getElementById('txtCompanyName').value + "', 'name': '" + document.getElementById('txtName').value + "', 'title': '', 'email':'" + document.getElementById('txtEmail').value + "', 'phone':'" + document.getElementById('txtPhoneNo').value + "', 'web_url':'', 'no_of_emp':'0', 'c_Currency_id':'100', 'r_source_id':'" + r_source_id.toString() + "', 'industry_ID':'1', 'city':'', 'country_ID':'" + document.getElementById('ddlCountry').value + "', 'cur_solution':'','pur_timeline':'','comments':'', 'year_sell_erp':'2013', 'support':'', 'bpgroup_ID':'1', 'C_Campaign_ID':'" + campaignid.toString() + "', 'R_STATUS_ID':'1000033', 'C_Region_ID':'100', 'CreatedBy':'1000012', 'salesrep_id':'1000012', 'ad_org_id':'1000001', 'ad_client_id':'1000001', 'UpdatedBy':'100', 'AccessKey':'caff4eb4fbd6273e37e8a325e19f0991'}";
            $.ajax({
                type: "POST",
                url: "http://cloudservice.softwareonthecloud.com/service.asmx/SetLead",
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,
                success: function (msg) {
                    AjaxSucceeded(msg);
                },
                error: AjaxFailed
            });
        });
    });
    function AjaxSucceeded(result) {
        alert(result.d);
    }
    function AjaxFailed(result) {
        alert(result.status + ' ' + result.statusText);
    }  
</script> 
```

这是我上传了这个函数[的 URL 来测试](http://register.viennaadvantage.com/test.aspx)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T05:57:48.067

您收到此错误是因为您尝试调用另一个域上的 Web 服务。这违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。这是一个安全限制。大多数旧浏览器会拒绝此类请求。

如果您想在 javascript 中访问不同的域 web 服务，您将需要设置 [跨域资源共享。](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)

> 跨域资源共享 (CORS) 是一种允许网页向另一个域发出 XMLHttpRequest 的机制。否则，根据同源安全策略，Web 浏览器将禁止此类“跨域”请求。CORS 定义了浏览器和服务器可以交互以确定是否允许跨域请求的方式

如果您有权访问 Web 服务代码，则可以在服务器上启用 CORS 请求。
[启用 cors](http://enable-cors.org/)是一个很好的资源。这里有一些[关于cors的解释](http://encosia.com/using-cors-to-access-asp-net-services-across-domains/)

在 IIS 7 上，您需要在 web.config 中设置一些自定义标头。

```
<system.webserver>
 <httpprotocol>
  <customheaders>
   <add name="Access-Control-Allow-Origin" value="*" />
   <add name="Access-Control-Allow-Headers" value="Content-Type" />
  </customheaders>
 </httpprotocol>
</system.webserver> 
```

[这是IIS6的步骤](http://enable-cors.org/server_iis6.html)

**安全说明**：例如，我已允许对服务器的所有请求。如果您提供敏感数据，您可能希望将其限制为选定的域。

基于 WCF 的请求也可以通过 进行检查，`WebOperationContext.Current.IncomingRequest`并且可以发送适当的标头。

旧版浏览器不支持 CORS 请求。您可以在[此处查看完整的浏览器兼容性列表](http://enable-cors.org/client.html)

如果您必须支持较旧的浏览器，或者无法更改 Web 服务，您始终可以在您的服务器上托管 Web 服务代理。您将请求发送到您的服务器，您的服务器从原始网络服务请求数据。这很好用，因为它不违反跨源策略。一个简单的 http 处理程序可以作为服务器上的代理服务器。

以下是 REST Web 服务的示例 http 处理程序代理的样子：

```
public void ProcessRequest(HttpContext context) {
  WebClient myClient = new WebClient(); 

  //Fetch response on your server
  string response = myClient.DownloadString("http://example.com/webservice/webMethod");

  // Send response to your javascript.
  context.Response.Write(response);
} 
```

然后，您可以根据 javascript 的要求调用此处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T09:33:51.223

您也可以尝试使用 JSONP 或 easyXDM 框架。

对于 JSONP，您应该只更改一个 $.ajax 属性。设置`dataType:"jsonp"`。在这种情况下，服务器应该返回 json 和函数名，格式如下：`funcName(<JSON structure>)`. 这仅适用于“GET”请求，但您在此处使用“POST”。您可以尝试切换到“GET”请求调用。

如果这不可能，您应该考虑使用之前解释的 javascript [easyXDM 框架](http://easyxdm.net/wp/)或 CORS 设置，easyXDM 有自己的 cors 组件，可以在旧浏览器上启用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-20T11:36:52.887

您的请求违反了同源政策。

在您自己的应用程序中为该服务编写一个代理服务。将接收到的数据发布到远程服务并转发答案。

这将具有额外的优势，您可以将 AccessKey 保密。您可以在将其发布到远程服务器之前将其添加到服务器上的请求中。

如果这太过分了，请让原始服务的开发人员在他们的服务器上添加一个调用它的网页。然后，您可以将此网页添加到 IFrame 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-27T19:58:44.237

我在 Edge 中也遇到了 CORS 问题……我的 Web 服务在 Chrome、Firefox 和旧版 IE 中运行。最终我不得不更新 Edge 并且它起作用了。以下是 CORS 支持的浏览器/版本列表：

[启用 CORS 浏览器支持](https://enable-cors.org/client.html)

# c++ - 没有 for、while 或 goto 的循环

> ID：14241325
> 
> 赞同：-3
> 
> 时间：2013-01-09T16:05:31.710
> 
> 标签：c++, c, loops

在 Windows 中，可以使用 C 中的结构化异常处理来编写一个伪循环，打印从 1 到 1000 的所有数字，如下所示：

```
int n = 0;
__try {
    *(int *)0 = 0;
}
__except(printf("%i\n", ++n), n < 1000 ? -1 : 1) {
} 
```

我想知道 C/C++ 中是否还有其他方法可以创建一个循环，如果您在代码中搜索常见的可疑关键字`for`,`while`和`goto`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:09:23.720

在 C++ 中，一个简单的 lambda 可以做到这一点：

```
std::function<void(int,int)> print = [&](int from, int to)
{
    std::cout << from << " ";
    if ( from < to ) print(++from, to);
};

print(1, 1000); 
```

它将打印从`1`到 的所有整数`1000`。它不使用`for`,`while`或`goto`.

# python - WTForms：在编写自定义验证时传递额外的参数

> ID：14241330
> 
> 赞同：1
> 
> 时间：2013-01-09T16:05:55.033
> 
> 标签：python, wtforms

[在为 wtforms](http://wtforms.simplecodes.com/docs/0.6/validators.html)编写自定义验证时，是否可以传递额外的参数（如请求）

例如

```
class MyForm(Form):
  name = TextField('Name', [Required()])

  def validate_name(form, field):
    if len(field.data) > 50:
        raise ValidationError('Name must be less than 50 characters') 
```

如果可能的话，我需要将请求对象（或非表单对象）传递给 validate_name 方法。有什么办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:57:45.633

更简单的方法是将`request`对象传递给您的表单并将其存储为属性。

你可以通过`__init__`方法来做到这一点，或者通过做`my_form.request = request`。

然后，您`validate_name`的方法可以访问`request`at `self.request`。

# django - Django - 如何更新模型保存（）方法中的字段？

> ID：14241336
> 
> 赞同：4
> 
> 时间：2013-01-09T16:06:10.277
> 
> 标签：django, django-models, django-file-upload

可以在 save() 方法中更新模型字段吗？

模型.py：

```
class BicycleAdItemKind(MPTTModel):

    image_file_temp_fullpath = ""
    image_file_temp_filename = ""

    def url(self, filename):
        #pdb.set_trace()

        #url = "MultimediaData/HelpAdImages/ItemKind/%s/%s" % (self.id, filename)
        url = "MultimediaData/HelpAdImages/ItemKind/Temp/%s" % (filename)
        self.image_file_temp_fullpath = url
        self.image_file_temp_filename = filename
        return url

    def item_kind_image(self):
        return '<img align="middle" src="/media/%s" height="60px" />' % self.image
    item_kind_image.allow_tags = True     

    n_item_kind      = models.CharField(max_length=50) # Bicicleta completa, Componentes para bicicleta, Acessorios para ciclista
    parent           = TreeForeignKey('self', null=True, blank=True, related_name='children')
    description      = models.TextField(null=True, blank=True)
    image            = models.ImageField(upload_to=url, null=True, blank=True)
    date_inserted    = models.DateTimeField(auto_now_add=True)
    date_last_update = models.DateTimeField(auto_now=True)

    def save(self, *args, **kwargs):
        if not self.id:
            BicycleAdItemKind.tree.insert_node(self, self.parent)
        super(BicycleAdItemKind, self).save(*args, **kwargs)

        pdb.set_trace()
        # I will move the file from "Temp" folder to the folder with the "Id" number
        from django.core.files.move import file_move_safe
        src = settings.MEDIA_ROOT + "/" + self.image_file_temp_fullpath 
        dst = settings.MEDIA_ROOT + "/" + "MultimediaData/HelpAdImages/ItemKind/%s/%s" % (self.id, self.image_file_temp_filename)
        new_directory = settings.MEDIA_ROOT + "/MultimediaData/HelpAdImages/ItemKind/%s" % (self.id)
        if not os.path.exists(new_directory):
            os.makedirs(new_directory)

            if file_move_safe(src, dst):
                # I will update the field image
                BicycleAdItemKind.objects.filter(pk=self.id).update(image=dst)
                # Delete the Temp file

    def __unicode__(self):
        return self.n_item_kind

    class MPTTMeta:
        order_insertion_by = ['n_item_kind'] 
```

下面的代码行不执行任何操作，

```
BicycleAdItemKind.objects.filter(pk=self.id).update(image=dst) 
```

可以在保存方法中进行更新吗？

给我一些线索。

此致，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-10T22:45:01.947

将超级保存移动到 save() 的末尾，以便在您进行更改后更新模型。

```
def save(self, *args, **kwargs):
    if not self.id:
        BicycleAdItemKind.tree.insert_node(self, self.parent)

    pdb.set_trace()
    # I will move the file from "Temp" folder to the folder with the "Id" number
    from django.core.files.move import file_move_safe
    src = settings.MEDIA_ROOT + "/" + self.image_file_temp_fullpath 
    dst = settings.MEDIA_ROOT + "/" + "MultimediaData/HelpAdImages/ItemKind/%s/%s" % (self.id, self.image_file_temp_filename)
    new_directory = settings.MEDIA_ROOT + "/MultimediaData/HelpAdImages/ItemKind/%s" % (self.id)
    if not os.path.exists(new_directory):
        os.makedirs(new_directory)

        if file_move_safe(src, dst):
            # I will update the field image
            BicycleAdItemKind.objects.filter(pk=self.id).update(image=dst)
            # Delete the Temp file

    super(BicycleAdItemKind, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:11:04.230

您是否尝试过检查`dst`运行更新时发生了什么？为什么不这样做呢？

```
self.image=dst 
```

# c++ - 在 C++ 中，定义一个非常简单的对象的最有效方法是什么

> ID：14241341
> 
> 赞同：0
> 
> 时间：2013-01-09T16:06:20.083
> 
> 标签：c++, class, struct

假设我正在定义一个表面对象

```
class surface
{
private:
    vector<point> points_;
    vector<hexFace> hexFaces_;
} 
```

我已经写了一个`point`类，非常有必要，但是至于`hexFace`，其实很简单，就是一个四个点**标签**的列表，就是int[4]。而且我不需要对它做任何复杂的操作。

所以我的问题是：定义这样一个`hexFace`对象的最有效方法是什么。我应该使用结构，还是我最好去上课或其他什么？你会怎么办？谢谢

如果我需要上课，我可以在当前类中以嵌套方式定义另一个类吗？如果可以的话，我是否也必须在这个文件中编写它的构造函数？

结构是否需要构造函数来初始化它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:23:01.327

你问了几个问题：

> *定义这样的 hexFace 对象的最有效方法是什么。*

对于您选择的任何解决方案，运行时效率将大致相同。代码行效率，或维护者-程序员-大脑-功率效率可能更有价值。

如果您仅限于 C++11 之前的功能，我会使用：

```
struct hexFace {
  int labels_[4];
}; 
```

如果您可以使用 C++11 功能，请尝试：

```
class surface
{
private:
    std::vector<point> points_;
    std::vector<std::array<int, 4>> hexFaces_;
} 
```

> *我应该使用结构，还是我最好去上课或其他什么？*

`struct`并且`class`几乎是同义词。使用您认为更清楚地表达您的意图的任何一个。至于“别的”，试试`std::array`

> *我可以以嵌套方式在当前类中定义另一个类吗？*

是的你可以。尝试：

```
class surface
{
private:
    class hexFace { public: int lables[4]; };
    vector<point> points_;
    vector<hexFace> hexFaces_;
}; 
```

> *如果可以的话，我是否也必须在这个文件中编写它的构造函数？*

您可以，或者您可以选择在别处编写它，或者您可以选择完全省略用户定义的构造函数。

这是内联编写它的方法：

```
class surface {
public:
    class hexFace { public: hexFace() { std::cout << "inline constructor!\n" } };
} 
```

以下是如何在外部编写它

```
class surface {
  public:
  class hexFace {
    public:
      hexFace();
  };

// in another file ...
surface::hexFace::hexFace() { std::cout << "extern constructor\n"; } 
```

> *结构是否需要构造函数来初始化它？*

`class`a和 a都不`struct`需要用户定义的构造函数，但都允许它们。

```
struct X {
  X() { std::cout << "in struct constructor!\n"; }
};
class Y {
  public: 
    Y() { std::cout << "in class constructor!\n"; }
}; 
```

# ruby - 如何使用 Base64 并从字符串中排除特殊字符 +/=？

> ID：14241343
> 
> 赞同：1
> 
> 时间：2013-01-09T16:06:23.500
> 
> 标签：ruby, base64

我目前正在使用 Ruby 的 'base64' 但创建的字符串具有特殊字符，例如 /+= 。

如何删除这些并仍然确保我的解码在将来可以正常工作？

本质上，我希望使用字母数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T18:29:29.447

我不会发明新的东西，而是使用`Base64.urlsafe_encode64`（及其对应物`Base64.urlsafe_decode64`），它基本上是 base64，带有 + 和 / 替换为 - 和 _。这符合 rfc 4648，因此应该可以广泛理解

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:11:41.823

如果你想要字母数字，我认为使用 base 36 会更好并且更实用。Ruby 内置了高达 36 位的编码/解码（26 个字母和 10 个数字）。

```
123456.to_s(36)
# => "qglj"

"qglj".to_i(36)
# => 123456 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:11:08.633

```
class Integer
  Base62_digits = [*("0".."9"), *("a".."z"), *("A".."Z")]

  def base_62
    return "0" if zero?
    sign = self < 0 ? "-" : ""
    n, res = self.abs, ""
    while n > 0
      n, units = n.divmod(62)
      res = Base62_digits[units] + res
    end
    sign + res
  end

end

p 124.base_62 # => "20" 
```

这可以适用于处理较低的碱基，但它可能就足够了。

# azure - 为什么我的自定义 VM 映像未显示在 Azure 创建 VM 界面中？

> ID：14241347
> 
> 赞同：6
> 
> 时间：2013-01-09T16:06:40.107
> 
> 标签：azure, virtual-machine, azure-virtual-machine

我最近经历了创建和上传包含一个不错的小 Debian 安装的 .VHD 图像到我的 Azure 存储帐户的麻烦。它是在固定模式下创建并作为 PageBlob 上传的。

经过几次尝试，我能够从我的 Blob 创建一个图像，但我不知道从这里去哪里。

显然，我想从我的图像创建一个 VM 实例，但我不知道如何选择我的图像。我点击了`NEW > Compute > Virtual Machine > From Gallery`链接，有一个标签为 的标签`My Images`，但我的图片没有显示在那里。

有谁知道为什么？

编辑：当我尝试从我的 Blob 创建磁盘时，我收到以下错误：

> 存储帐户不支持此操作。请检查此存储帐户的位置或创建一个新的存储帐户并重试。

但是磁盘没有与任何存储帐户相关联，或者是吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T17:07:53.710

如果您已经上传了 VHD，您应该能够使用它创建一个新磁盘，`Virtual Machines > Disks > Create Disk`这将提示您输入您上传的 VHD 的 url，并允许您指定操作系统类型和磁盘的名称。

从那里您可以创建一个新的虚拟机。`New > Compute > Virtual Machine > From Gallery > My Disks`

**编辑**
一位同事告诉我，某些存储帐户不支持 VM 的磁盘，解决方法是使用门户（从头开始或使用预制的画廊图像）创建一个新 VM，这将创建一个存储帐户称为portalvhdxxxxxxxx之类的东西。然后，您应该能够将您的 VHD 上传到此存储帐户并从那里创建您的磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T17:05:16.537

我刚刚遇到了同样的问题，这个问题帮助我解决了这个问题。为了提供更多详细信息，某些数据中心（例如美国中北部）目前不支持 Azure VM。因此，如果您在不受支持的数据中心创建存储帐户，您将能够上传 vhd blob，甚至可以通过 Azure 门户从中创建图像。但是，当您尝试从中启动 VM 时，该图像不会显示在“我的图像”下。

这很令人困惑，但这似乎就是正在发生的事情。因此，如果您想将 vhd blob 存储在不称为 portalvhdxxxxxx 的存储帐户中，只需确保您的存储帐户是在支持 VM 的数据中心中创建的。要准确了解这些数据中心是什么，它们是您在直接在门户上快速创建 VM 时可以选择的数据中心。

# opengl - ShadowMap 混淆

> ID：14241348
> 
> 赞同：2
> 
> 时间：2013-01-09T16:06:45.077
> 
> 标签：opengl, shadow-mapping

我对阴影贴图感到困惑。这是我所理解的（以下步骤不起作用:)）

如何获得利润（请不要对代码感到困惑，大致是因为我是用Java写的）：

**1.**用参数创建空的depthTexture（我的是1024x1024）

`glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_R_TO_TEXTURE)`和

`glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, width, height, 0, GL_DEPTH_COMPONENT, GL_FLOAT, GL_NULL)`

**2.**创建 FBO 并将该纹理附加到它

`glFramebufferTexture(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, depthTexture, 0)`

**3.**为照明相机设置新的投影和视图矩阵

我使用与我的主相机相同的另一个坐标，因为场景看起来更好（我试过了，所以没有问题......*我猜*..）。

**4.**创建新的小着色器来确定 FBO 的 gl_Position 并用花哨的东西修改主着色器（偏置矩阵 * lightCamera 矩阵 * 顶点，sampler2Dshadow 等等）

**5.**当然要统一一切，做一些事情。

现在***渲染循环***

**1.**当然要统一一切并做某事（再次）。

**2.**绑定FBO，绑定little shader，，`glViewport(0, 0, 1024, 1024)`colorMask为false，清除深度缓冲区`glCullFace(GL_FRONT)`，，`glBindTexture(GL_TEXTURE_2D, 0)`

**3.只使用顶点位置属性***完全*渲染一切

 ***4.**取消绑定FBO，将程序重新绑定到主着色器（那个有花哨的东西）`glViewport`，启用colorMask，`glCullFace(GL_BACK)`

**5.**正常渲染场景，甚至不用考虑“该死的主着色器将如何得到`sampler2DShadow`，因为我们不绑定它，不统一它，甚至不触摸它”

**6.**观看无数的故障、错误和像素狂欢

实际上我试图将 depthTexture 统一到采样器，但我只有黑屏。即使我不渲染 FBO，当我这样做时，我也会得到相同的画面。

有人可以解释一下，我错过了什么吗？

我觉得着色器使用了漫反射纹理两次：作为漫反射纹理和作为depthTexture，但我不知道如何给它那个depthTexture。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:44:00.400

这是一个很好的阅读链接：[http ://www.opengl-tutorial.org/intermediate-tutorials/tutorial-16-shadow-mapping/](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-16-shadow-mapping/)

在这里： http: [//www.paulsprojects.net/tutorials/smt/smt.html](http://www.paulsprojects.net/tutorials/smt/smt.html)（虽然第二个链接使用旧的固定功能opengl）

一般来说：

1.  创建一个深度纹理
2.  将此纹理附加到 FBO
3.  绑定FBO，设置正确的视口
4.  从灯光位置渲染场景，仅将深度值保存到纹理
5.  取消绑定 FBO 并设置最终场景视口和摄像机位置
6.  使用阴影测试（sampler2DShadow）正常渲染场景

您可以始终（在渲染循环中）或仅在光照位置发生变化时渲染深度图。

我不知道你为什么要正常渲染你的场景两次……你是在使用 Z-prepass 还是什么？试试我认为的基本版本。

我的带有阴影贴图的旧代码：

```
void RenderShadowMap() {
    currDepth->Bind();
    glClear(GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gLightCam.SetProjectionMatrix();
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    gLightCam.SetViewMatrix();

    glColorMask(false, false, false, false);
    glUseProgram(0);   // draw without any shaders... just default depth
    glEnable(GL_POLYGON_OFFSET_FILL);
    glPolygonOffset(offFactor, offUnits);
    SimpleScene(false); // floor does not cast shadow so do not render it
    glDisable(GL_POLYGON_OFFSET_FILL);
    glColorMask(true, true, true, true);
} 
```

渲染场景：

```
// compose shadow matrix:
MATRIX4X4 bias(0.5f, 0.0f, 0.0f, 0.0f, 
               0.0f, 0.5f, 0.0f, 0.0f,
               0.0f, 0.0f, 0.5f, 0.0f,
               0.5f, 0.5f, 0.5f, 1.0f);
MATRIX4X4 *invCam = gSphericalCam.GetInvViewMatrix();
MATRIX4X4 smMat = (*gLightCam.GetViewProjMatrix()) * (*invCam);

gShaderProgramManager->GetProgram("shadow")->Use();
gShaderProgramManager->GetProgram("shadow")->SetMatrix("shadowMat", &smMat);
gShaderProgramManager->GetProgram("shadow")->SetBool("useShadow", currCam != &gLightCam && useShadow);
gShaderProgramManager->GetProgram("shadow")->SetFloat("shadowMapSize", (float)currDepth->GetWidth());
glActiveTexture(GL_TEXTURE0);
glEnable(GL_TEXTURE_2D);
glColor3f(1.0f, 1.0f, 1.0f);
gTextureManager->Bind("default");
glActiveTexture(GL_TEXTURE1);
currDepth->BindDepthAsTexture();
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE_ARB, GL_COMPARE_R_TO_TEXTURE_ARB);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC_ARB, GL_LEQUAL);

SimpleScene(); 
```*

# c++ - 非线程安全环境中的多线程

> ID：14241351
> 
> 赞同：0
> 
> 时间：2013-01-09T16:06:52.693
> 
> 标签：c++, parallel-processing, thread-safety

在我的 c++ 程序中，我使用了一个非线程安全的专有库 (.dll)。:-(

在这个库中有一个特定的科学计算。

有没有办法安全地启动这个库的多个计算与线程并行？（1个进程，多线程）

我的程序“就像”一个“for”循环，每次计算我的非线程安全库时都会调用它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:16:11.207

听起来您想多次加载 DLL。看看[多次加载相同的 dll](https://stackoverflow.com/questions/12530022/load-the-same-dll-multiple-times)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T19:13:55.567

一个非常简单的方法是在`for`循环中分叉多个从属进程。从进程加载非线程安全模块并进行计算，最后通过简单的返回码（如果结果适合 4 个字节）、IPC 或文件将结果返回给父进程。

当然，这种方法假定并行计算不需要与其他计算进行任何交互。

# java - Struts 1 在使用 Multipart/Form-Data Enctype 的表单验证失败后丢失请求参数

> ID：14241354
> 
> 赞同：2
> 
> 时间：2013-01-09T16:07:04.960
> 
> 标签：java, servlets, struts

我有一个简单的 Struts 表单。它有几个文本字段和一个文件字段。在 我的表格上`enctype`。`multipart/form-data`我在`actionform`的 validate 方法中进行验证。如果文本字段为空，我会返回它们是必需的错误。除了可见字段之外，我还传递了一些隐藏字段，这些字段在处理表单并将其返回给 JSP 时作为请求参数。JSP 需要这些请求`params`。

当没有验证错误时，一切都很好，因为 通过使用操作中的类`params`返回请求。`ActionRedirect`但是如果返回错误，我会丢失请求`params`。（我可以在`actionform`validate 方法或操作中访问它们）。

如何确保`params`在表单中出现验证错误时将请求传回`multipart`？有什么解决方法吗？

下面的动作映射（为了混淆而略微编辑）：

```
 <action
    path="/saveQuestion"
    type="blahblahblah.QuestionAction"
    parameter="save"
    name="QuestionForm"
    input="populateQuestion.do"
    scope="request"
    validate="true">
    <set-property property="cancellable" value="true"/>
    <forward name="success" path="viewSurvey.do" redirect="true"/>
  </action>
  <action
    path="populateQuestion"
    type="blahblahblah.QuestionAction"
    parameter="populateRequest"
    name="ItemForm"
    scope="request">
      <forward name="success" path=".editing.Question"/>
  </action> 
```

而我的 JSP 表单行：

```
<html:form styleId="QuestionForm" action="/saveQuestion" enctype="multipart/form-data" method="POST"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:23:41.570

我相信你有两种选择来解决这个问题：

*   将范围更改为会话：这样数据将存储在会话中，您不会丢失任何数据。
*   实现验证的重置方法：这样，在验证中调用重置方法时，您可以重新填充表单的数据。

我希望这会有所帮助。我的旧代码文件中可能还有其他一些建议，但我现在无法访问它们。如果我有时间，我稍后会检查它们。

# php - 可排序搞乱了我的数据库排序

> ID：14241356
> 
> 赞同：0
> 
> 时间：2013-01-09T16:07:05.357
> 
> 标签：php, javascript, jquery, mysql, jquery-ui-sortable

我使用 Jquery UI 作为前端，使用 PHP 和 MYSQL 作为后端。当我第一次打开排序页面时出现了我的问题，它弄乱了我的整个订单。例如：

```
id|text|orderid|
----------------  
1 |abc |2      |  
2 |bca |4      |  
3 |zxc |6      |  
4 |qwe |3      |  
5 |ads |1      |  
6 |iul |5      | 
```

变成：

```
id|text|orderid|
----------------
1 |abc |5      |  
2 |bca |1      |  
3 |zxc |3      |  
4 |qwe |6      |  
5 |ads |4      |  
6 |iul |2      | 
```

我的 index.php(HTML+JS): [http://pastebin.com/5F66ncVF](http://pastebin.com/5F66ncVF)
我更新的b.php(PHP&mysql 查询): [http://pastebin.com/3zhRvgvB](http://pastebin.com/3zhRvgvB)

请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:43:53.490

还没有时间真正浏览您的数据，但这是我用来在我的 ajax 调用中获取数据的方法：

```
var data = $('ol.sortable').nestedSortable('toHierarchy', {startDepthCount: 1}); 
```

我明确设置了句柄和项目，以便可排序知道从哪里获取数据：

```
$('ol.sortable').nestedSortable({
    handle: 'div',
    items: 'li',
    ... 
```

为了调试，我使用`console.log(data);`

```
//for nested sortable
function dump(arr,level) {
    var dumped_text = "";
    if(!level) level = 0;

    //The padding given at the beginning of the line.
    var level_padding = "";
    for(var j=0;j<level+1;j++) level_padding += "    ";

    if(typeof(arr) == 'object') { //Array/Hashes/Objects
        for(var item in arr) {
            var value = arr[item];

            if(typeof(value) == 'object') { //If it is an array,
                dumped_text += level_padding + "'" + item + "' ...\n";
                dumped_text += dump(value,level+1);
            } else {
                dumped_text += level_padding + "'" + item + "' => \"" + value + "\"\n";
            }
        }
    } else { //Strings/Chars/Numbers etc.
        dumped_text = "===>"+arr+"<===("+typeof(arr)+")";
    }
    return dumped_text;
} 
```

也许先试一试，如果没有，我可以进一步研究你的代码......

# grails - 在没有 g:link 的情况下为 grails 中的链接创建字符串

> ID：14241358
> 
> 赞同：4
> 
> 时间：2013-01-09T16:07:09.270
> 
> 标签：grails, gsp

在如下标签中：

```
<a data-url="/new/request/showText/${requestInstance.id}"> view text</a> 
```

有没有办法像我一样不硬编码网址？

我尝试使用`<g:link action="showText" id="${requestInstance.id}">`，但这会呈现为锚标记。

我正在做的事情可能会找到，但我只是好奇是否有更好的方法可以在 grails 中做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T16:12:04.337

您可以使用

`${createLink(action:'myaction',params:[datasetId:dataset.id])}`

为完全控制。它只是返回类似`http://myapp/myaction/123`并支持所有支持的参数`g:link`。

更具体：

```
<a data-url="${createLink(action:'showText',id: requestInstance.id)}"> view text</a> 
```

应该管用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:14:02.350

您可以`createLink`在`${..}`.

所以在你的情况下，这将是：

```
<a data-url="${createLink(controller: 'yourController', action: 'yourAction', params:[param1: 'value1'])}"> view text</a> 
```

# c - 如何避免分段错误？

> ID：14241364
> 
> 赞同：0
> 
> 时间：2013-01-09T16:07:18.460
> 
> 标签：c, segmentation-fault

代码是不言自明的，但它给了我分段错误，为什么？:\

```
#include <stdio.h>
int main(void)
{
    char *c = "Hella";
    *(c+4) = 'o';
    printf("%s\n",c);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-09T16:08:07.103

> **如何避免？**

不要修改字符串文字！

```
char *c = "Hella"; 
```

声明一个指向`c`存储在实现定义的只读内存中的字符串文字“Hella”的指针。
不允许修改此文字。尝试这样做会导致**未定义的行为**。

您很幸运，您的程序崩溃了，未定义的行为并不总是导致崩溃，但可能会导致您的程序以任何可能的方式出现异常行为。

你需要的是一个数组：

```
char c[] = "Hella"; 
```

**好读：**
[char a[] = ?string?; 之间有什么区别？和 char *p = ?string?;?](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:09:25.587

将您的字符串放入分配到堆栈上的数组中：

```
char c[] = "Hella"; 
```

因为如上所述，字符串文字通常是只读的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:08:43.050

您创建`c`它的方式指向字符串文字。你不能修改它的内容。如果您希望能够做到这一点，请使用：

```
char c[6] = "Hella";
c[4] = o; 
```

或者使用动态分配的 char 数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:09:17.433

您正在尝试覆盖文字。真的，您的代码应该是：

```
const char *c = "Hella"; 
```

这有点解释发生了什么。

要覆盖您自己的记忆：

```
char c[] = "Hella"; 
```

更安全。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T16:09:21.210

您不能修改在代码中定义的字符串。如果要修改它们，请使用 strdup。

```
#include <stdio.h>
int main(void)
{
    char *c = strdup("Hella");
    *(c+4) = 'o';
    printf("%s\n",c);
    free(c);
} 
```

# php - 从另一个站点获取信息

> ID：14241371
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:07:39.320
> 
> 标签：php

我正在尝试从另一个站点获取信息。

```
<td>
    <?php
    $site=file_get_contents("$link");
    $price='#<div class="price_a">(.*?)<\/div>#si';
    preg_match_all($price,$site,$pricelist);
    for ($a=0; $a<1; $a++){
        echo $pricelist[1][$a];
    }
    ?>
</td>

<td>
    <?php
    $site=file_get_contents("$link");
    $price='#<div class="price_a">(.*?)<\/div>#si';
    preg_match_all($price,$site,$pricelist);
    for ($a=1; $a<2; $a++){
        echo $pricelist[1][$a];
    }
    ?>
</td> 
```

但在源代码中也有类似`<div class="price_m">`或的标签`<div class="price_n">`

如何从该站点获取所有标签并在标签中使用它？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:12:18.383

不确定我是否理解正确，但为什么不在类名上也使用通配符呢？

```
<td>
<?php
$site=file_get_contents("$link");
$price='#<div class="price_[a-z]">(.*?)<\/div>#si';
preg_match_all($price,$site,$pricelist);
for ($a=0; $a<1; $a++){
echo $pricelist[1][$a];
}
?>
</td>

<td>
<?php
$site=file_get_contents("$link");
$price='#<div class="price_[a-z]">(.*?)<\/div>#si';
preg_match_all($price,$site,$pricelist);
for ($a=1; $a<2; $a++){
echo $pricelist[1][$a];
}
?>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:42:15.653

对于解析 HTML 字符串，我认为最好使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。它具有非常易于使用的 jQuery 样式选择器。

```
// Create DOM from URL or file
$html = file_get_html($link);

foreach($html->find('div.price_a') as $price_a) {
  // all div.price_a
}
foreach($html->find('div.price_m') as $price_m) {
  // all div.price_m
}
foreach($html->find('div.price_n') as $price_n) {
  // all div.price_n
} 
```

# postgresql - heroku pgbackups:restore: 无效的转储格式

> ID：14241375
> 
> 赞同：10
> 
> 时间：2013-01-09T16:07:49.033
> 
> 标签：postgresql, heroku, psql, pg-dump, heroku-toolbelt

我有一个本地 psql 数据库转储，需要上传到 heroku。[我按照此链接](http://etagwerker.wordpress.com/2011/10/12/how-to-push-a-postgres-database-to-your-heroku-app/)的更新部分中的步骤进行操作。一切正常，直到最后一部分，实际的上传步骤：

> heroku pgbackups:restore --app myAppName DATABASE ' [https://www.dropbox.com/myAppPSQLDumpLink/myAppName_local.dump](https://www.dropbox.com/myAppPSQLDumpLink/myAppName_local.dump) ' --confirm myAppName

这就是控制台中显示的内容：

```
HEROKU_POSTGRESQL_SILVER_URL (DATABASE_URL)  <---restore---  myAppName_local.dump

Retrieving... done

 !    An error occurred and your restore did not finish. 
```

这是日志中的错误（由[Toby Hede 的问题](https://stackoverflow.com/questions/14177873/heroku-pgbackupsrestore-an-error-occurred-and-your-restore-did-not-finish)提供）：

```
2013-01-09T15:39:09+00:00 app[pgbackups]: Invalid dump format: /tmp/GgUz5yU4bF/project_mgr_development_local.dump: HTML document text 
```

我尝试搜索此错误，但找不到答案。有谁知道需要做些什么来解决这个问题？我的本地 psql 数据库的实际转储是这样执行的：

```
pg_dump -Fc --no-acl --no-owner -U myUserName  > myAppName_local.dump 
```

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T20:34:09.123

看起来 Dropbox 上的转储链接正在重定向或指向 HTML 页面（错误中的 HTML 文档文本）。访问链接并确保您直接获得转储。或者在浏览器中下载转储，右键单击它并复制下载链接。该链接应该与 pgbackups:restore 一起使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-25T13:17:09.897

Dropbox 提供了直接下载文件的说明 ( [https://www.dropbox.com/en/help/201](https://www.dropbox.com/en/help/201) ) 这对于使用 pg_backups 中的 Dropbox 链接很有帮助。

简而言之，它说下载链接带有选项“dl=1”而不是“dl=0”。但这对我不起作用。即使复制下载文件的地址对我也不起作用。

如果您遇到上述问题，请尝试将文件移动到公用文件夹并从那里复制链接。这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:26:00.757

根据[Importing and Exporting Heroku Postgres Databases with PG Backups](https://devcenter.heroku.com/articles/heroku-postgres-import-export)，您可以在终端恢复转储：

```
$ curl -o latest.dump `heroku pgbackups:url --app heroku_appname`
$ pg_restore --verbose --clean --no-acl --no-owner -h localhost -U myuser -d mydb latest.dump 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-06T13:59:58.073

得到相同的错误，但不同的原因，所以不同的解决方案。也许它可以帮助某人。

如果您使用 HTTPS 将转储文件存储在服务器中，并且您错误地将 HTTP 用作数据库 URL，则转发将被解释为 HTML 文档。

所以改变

```
heroku pgbackups:restore --app myAppName DATABASE 'http://www.example.com/my.dump' --confirm myAppName 
```

到

```
heroku pgbackups:restore --app myAppName DATABASE 'https://www.example.com/my.dump' --confirm myAppName 
```

# javascript - (function(){ /* ... */ })(); 有什么区别？和 (function(){ /* ... */ }());

> ID：14241380
> 
> 赞同：7
> 
> 时间：2013-01-09T16:07:56.210
> 
> 标签：javascript

> **可能重复：**
> [(...()) 与 (...)() 在 javascript 闭包中](https://stackoverflow.com/questions/8774425/vs-in-javascript-closures)

(function(){ ... })(); 之间有什么区别吗？和 (function(){ ... }()); ?

在此示例中，两者的工作方式相同：

```
window.onload=function() {

    var a = (function(i){
        return "aaa" + i;
    })(1);

    var b = (function(i){
        return "bbb" + i;
    }(2));

    console.log("a: "+ a);
    console.log("b: "+ b);

}; 
```

# c# - “指定的演员表无效”仅在 MS 版本的发布版本中

> ID：14241389
> 
> 赞同：3
> 
> 时间：2013-01-09T16:08:30.493
> 
> 标签：c#, .net, visual-studio, msbuild, il

当仅从 MSBuild 4.0 进行发布构建时，我得到“指定的强制转换无效”有效。我使用 Visual Studio 2012 的发布版本对此进行了测试，但没有遇到此问题。我还使用 MSBuild 4.0 的调试版本对此进行了测试，但没有遇到此问题。

例外：![在此处输入图像描述](../Images/71f3ac6c84df8e43d867f04a5b5c8c17.png)

代码

```
 public abstract class CachedSessionBase : ISessionObject
{
    protected Dictionary<MethodBase, Object> _getAndSetCache = new Dictionary<MethodBase, object>();

    protected TResult SetAndGet<TResult>(ObjectFactory factory, Func<TResult> func)
    {
        StackTrace stackTrace = new StackTrace();
        var methodBase = stackTrace.GetFrame(1).GetMethod();

        if (!_getAndSetCache.ContainsKey(methodBase))
        {
            _getAndSetCache[methodBase] = func.Invoke();
        }

        return (TResult)_getAndSetCache[methodBase];
    } 
```

错误正在这条线上抛出

```
return (TResult)_getAndSetCache[methodBase]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:57:15.847

调用堆栈很可能与您期望的不同。您的方法可能会被内联，然后`GetFrame(1)`是检索调用者的调用者。当从字典中检索值时，它属于不同的类型，因为它用于不同的方法。

您可以尝试添加属性`[MethodImpl(MethodImplOptions.NoInlining]`以`SetAndGet`防止该方法的内联优化。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-10-17T17:01:35.013

`nuget pack`运行时我遇到了同样的问题

> MSBuild 自动检测：使用 msbuild 版本“15.0”...

但问题是通过运行`dotnet pack`which 调用解决的

> 适用于 .NET Core 的 Microsoft (R) Build Engine 版本 15.3.409.57025

# ajax - Ajax 不渲染新数据

> ID：14241391
> 
> 赞同：0
> 
> 时间：2013-01-09T16:08:36.820
> 
> 标签：ajax, jsf-2, primefaces

我正在尝试从另一个 selectOneMenu 的结果中更新一个 selectOneMenu。

选择组时，应更新用户菜单。

我已验证用户菜单的数据正在更新。然而，它没有被渲染。

当前运行 Primefaces 3.4.2 和 JSF 2.1

```
<ui:composition>
<br/><br/>
<h:form id="transferForm">            
    <h:panelGrid columns="1" style="width: 500px;margin: auto;text-align: center"  >
        <h:panelGroup>
            <h:outputLabel for="group" value="Group" />
            <h:selectOneMenu id="group" value="#{projectBean.transferUtil.selectedTransferGroup}" >
                <f:selectItems value="#{projectBean.transferUtil.transferGroups}" />     
                <f:ajax execute="group" render="user" />
            </h:selectOneMenu>

            <br />

            <h:outputLabel for="user" value="User" />
            <h:selectOneMenu id="user" value="#{projectBean.transferUtil.selectedTransferUser}" required="true" requiredMessage="Select User" >
                <f:selectItems value="#{projectBean.transferUtil.transferUsers}" />
            </h:selectOneMenu>
        </h:panelGroup>
        <p:commandButton id="projectTransferButton" action="#{projectBean.transferUtil.transfer}" value="Transfer" update=":projtabs,:growlForm:growlMesg">
            <f:setPropertyActionListener target="#{projectBean.activeTab}" value="#{projectBean.project_tab_index}" />
        </p:commandButton>
    </h:panelGrid>
</h:form>
<br/><br/> 
```

[编辑]

好吧，这是我得到的错误。

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><error><error-name>class java.lang.IllegalArgumentException</error-name><error-message><![CDATA[rss02.1 OPERA]]></error-message></error></partial-response> 
```

这是有问题的代码。

```
 <p:dataGrid var="area" value="#{projectBean.projectUtil.project.rssAreas}" columns="1">
        <p:column>
            <h:selectBooleanCheckbox id="rss#{area.shortName}" label="#{area.name}" value="#{area.active}" />
            <h:outputText value="#{area.name}" />
        </p:column>
    </p:dataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:45:22.173

您不应该在 getter/setter 中执行业务逻辑。它们在 JSF 生命周期中被多次调用，旨在获取和设置属性。您应该改为在 action(listener) 方法中执行业务逻辑。

以下构造应该起作用：

```
<h:selectOneMenu id="group" value="#{projectBean.transferUtil.selectedTransferGroup}" >
    <f:selectItems value="#{projectBean.transferUtil.transferGroups}" />     
    <f:ajax execute="group" listener="#{projectBean.transferGroupChanged}" render="user" />
</h:selectOneMenu>
<h:selectOneMenu id="user" value="#{projectBean.transferUtil.selectedTransferUser}" required="true" requiredMessage="Select User" >
    <f:selectItems value="#{projectBean.transferUtil.transferUsers}" />
</h:selectOneMenu> 
```

和

```
public void transferGroupChanged(AjaxBehaviorEvent event) {
    // Change the transferUsers here.
} 
```

getter 和 setter 不应**包含**任何业务逻辑。他们应该只获取和设置属性。

### 也可以看看：

*   [为什么 JSF 多次调用 getter](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062)
*   [如何在更改 ah:selectOneMenu 时加载和显示依赖的 h:selectOneMenu](https://stackoverflow.com/questions/11505248/how-to-display-list-of-countries-and-cities-in-jsf-page/11505860#11505860)

# ios - addSubview 更改 scroll.subviews 中一个对象的索引

> ID：14241392
> 
> 赞同：1
> 
> 时间：2013-01-09T16:08:40.850
> 
> 标签：ios, objective-c, uiscrollview, scroll, subview

我在内部循环 FOR 中添加对象`UIScrollView`，但在第二次交互之后`subviews`更改索引。

当我创建`ScrollView`：

```
scroll.subviews :(
"<UIImageView: 0x147aeee0; frame = (1017 186; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x147aef50>>",
"<UIImageView: 0x147aefa0; frame = (1019 184; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x147af010>>" 
```

)

在我有循环之后`[scroll addSubview:btn];`

第一的

```
scroll.subviews :(
"<UIImageView: 0x147aeee0; frame = (1017 186; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x147aef50>>",
"<UIImageView: 0x147aefa0; frame = (1019 184; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x147af010>>",
"<ContentButton: 0x13fdc610; baseClass = UIButton; frame = (15 10; 221 173); opaque = NO; tag = 1; layer = <CALayer: 0x1034cc00>>" 
```

)

第二（*将最后一个对象更改为索引 0*）

```
scroll.subviews :(
"<ContentButton: 0x13fdc610; baseClass = UIButton; frame = (15 10; 221 173); opaque = NO; tag = 1; layer = <CALayer: 0x1034cc00>>",
"<UIImageView: 0x147aefa0; frame = (1019 184; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x147af010>>",
"<UIImageView: 0x147aeee0; frame = (1017 186; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x147aef50>>",
"<ContentButton: 0x105ddf70; baseClass = UIButton; frame = (246 10; 221 173); opaque = NO; tag = 149; layer = <CALayer: 0x105523e0>>" 
```

)

第三以此类推，对象将正常添加（在最后一个索引中）

```
scroll.subviews :(
"<ContentButton: 0x13fdc610; baseClass = UIButton; frame = (15 10; 221 173); opaque = NO; tag = 1; layer = <CALayer: 0x1034cc00>>",
"<UIImageView: 0x147aefa0; frame = (1019 184; 5 7); alpha = 0; opaque = NO; autoresize = LM; userInteractionEnabled = NO; layer = <CALayer: 0x147af010>>",
"<UIImageView: 0x147aeee0; frame = (1017 186; 7 5); alpha = 0; opaque = NO; autoresize = TM; userInteractionEnabled = NO; layer = <CALayer: 0x147aef50>>",
"<ContentButton: 0x105ddf70; baseClass = UIButton; frame = (246 10; 221 173); opaque = NO; tag = 149; layer = <CALayer: 0x105523e0>>",
"<ContentButton: 0x13f1dc80; baseClass = UIButton; frame = (477 10; 221 173); opaque = NO; tag = 3; layer = <CALayer: 0x13f1dd20>>" 
```

)

问题出在第二次交互中，那么为什么最后一个对象（`ContentButton`）在索引 2 中并变为索引 0？

```
for (obj * objScroll in arrayChaObj)
    {                
        // UIButton
        ContentButton * btn = [[ContentButton alloc] initWithFrame:CGRectMake(btContentPosXChaObj,
                                                                    10,
                                                                    imgButtonScroll.size.width,
                                                                    imgButtonScroll.size.height)];

        btContentPosXChaObj += 10 + imgButtonScroll.size.width;
        [scroll addSubview:btn];

        NSLog(@"scroll.subviews :%@",scroll.subviews);
        [scroll setContentSize:CGSizeMake(btContentPosXChaObj, imgButtonScroll.size.height+10)];
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:46:50.083

这只是一个疯狂的猜测。

`setContentSize:`第一次打电话时会发生什么？好吧，这两个图像视图最终位于内容区域之外。它们永远不会显示。

我猜滚动视图会优化子视图的顺序并将不可见的视图放在最后，这可能会改善其剪辑（重绘）功能。

目前我没有时间检查和实验，但这对我来说是一个合理的解释。

# ios - 使用约束使应用程序与 iO5 5 和 iOS 6 兼容

> ID：14241394
> 
> 赞同：0
> 
> 时间：2013-01-09T16:08:48.130
> 
> 标签：ios, compatibility, iphone-5, nslayoutconstraint

> **可能重复：**
> [在 iOS 6 中启用自动布局，同时保持向后兼容 iOS 5](https://stackoverflow.com/questions/12411980/enabling-auto-layout-in-ios-6-while-remaining-backwards-compatible-with-ios-5)

我的老板要我做一个与 iPhone 5/4/4S 和 iOS 6/5 兼容的应用程序

是否可以 ？

我可以使用 NSLayoutConstaint 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:12:41.683

您可以创建一个支持 iOS 4.3 以上任何版本的应用程序，它可以在支持 iOS 4.3 或更高版本（或 5.0 及更高版本，如果您选择）的所有设备上运行。

但是，NSLayoutContraint 仅在 iOS 6.0 及更高版本中存在。您将需要为应用程序使用其他机制来支持 iOS 5.x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:10:55.227

不，不可能。`NSLayoutConstaint`仅在 iOS 6 上可用。您仍然可以在 iOS 5 上使用 Autoresing 掩码进行布局

# c - 如何开始用 C 构建编程语言？

> ID：14241396
> 
> 赞同：2
> 
> 时间：2013-01-09T16:08:56.827
> 
> 标签：c, compiler-construction, programming-languages

我真的很想体验一下使用 C 构建编译器、词法分析器等的经验，但是我还没有找到创建一个的单一资源。我已经阅读了关于使用 Ruby 创建自己的语言的书，但它只是讨论了 C 是最佳选择，并没有告诉你*从那里去哪里*。

他们有什么好的资源来使用 C 构建语言吗？我不在乎它有多长，我只想知道如何建造一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:12:56.847

编译器/解释器的优点之一是它们用什么语言编写并不重要。在最后阶段，它们将只是某人机器上的可执行文件。

话虽如此，在编写我的编译器（我目前正在做的事情）时，我已经使用了几本非常有帮助的书：

1.  Niklaus Wirth 的[编译器构建](https://rads.stackoverflow.com/amzn/click/com/0201403536)
2.  Jeffrey Ullman、Alfred Aho、Ravi Sethi 的[编译器原理、技术和工具](https://rads.stackoverflow.com/amzn/click/com/B000LNTQTM)

Wirth 书将引导您完成为一种称为 Oberon-0 的语言创建编译器的所有阶段。它还包含他完成的编译器的完整源代码，因此您可以在自己的机器上使用它。编译器本身是用 Pascal 编写的（Wirth 创建的其他东西）。

Dragon Book 在 C 语言中提供了非常好的信息和示例！这可能是您正在寻找的，但正如我上面所说，您编写编译器所用的语言并不是那么重要。

# javascript - 在另一个元素下方注册一个元素的鼠标悬停

> ID：14241406
> 
> 赞同：1
> 
> 时间：2013-01-09T16:09:14.587
> 
> 标签：javascript, html

我正在尝试找到一种方法来在另一个元素下方的元素上注册鼠标悬停事件。我有行，当鼠标悬停时，会出现一个新的 div 并将其放置在悬停的 div 的顶部。

这是页面：[http ://www.brunobryan.com/dev/stephanebourgeois/index/](http://www.brunobryan.com/dev/stephanebourgeois/index/)

当您将鼠标悬停在一行上时，右侧会出现一个图像。即使鼠标悬停在图像上方，我也想在行上注册 mouseover 事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:12:26.593

这实际上是不可能的，您有几个解决方法的选择。

a) 在包含行和图像的容器上注册悬停事件。

或者

b）在图像上绑定相同的悬停事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:13:58.650

您可以使用以下命令允许光标穿过图像[`pointer-events`](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)：

```
#index-hover {
    pointer-events: none
} 
```

请注意，[并非](http://caniuse.com/#feat=pointer-events)所有浏览器都支持此功能。如果您使用 SVG，将获得更好的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:15:04.947

我认为这里的答案是您的`<img>`标签需要放在`<tr>`标签内，然后绝对定位。您可能希望使该行相对定位，以便可以将该行的位置用作上下文。

# magento - Magento 创建发票重定向到错误的 url

> ID：14241409
> 
> 赞同：1
> 
> 时间：2013-01-09T16:09:20.433
> 
> 标签：magento

当我从后端的订单创建发票时，此 url 上：

```
http://www.site.com/index.php/safe/sales_order_invoice/new/order_id/4372/ 
```

但是当即将创建发票时，它会转到：

```
http://www.site.com/shop/safe/sales_order/view/order_id/4372/ 
```

您会看到（商店），这大部分是正确的，因为店面被命名为（我们曾经有 2 个店面）如果我从 url 中删除（商店）部分，我将返回正确的页面，它表明发票已正确创建。这只发生在订单本身。如果我使用批量操作从订单列表中创建发票，它不会给我带来任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:29:21.673

如果其他人有问题（使用多家商店）

请检查您的数据库 core_config_data 并查看 web/secure/base_url 等是否重定向到正确的路径。并确保检查它是否为给您带来麻烦的正确商店 ID 这样做。

我的问题是我的一家商店的安全路径正在破坏它。

现在一切正常！

# sql - 如何通过 SQL Editor 界面将 Byte[] 插入 Informix 数据库

> ID：14241411
> 
> 赞同：1
> 
> 时间：2013-01-09T16:09:22.287
> 
> 标签：sql, insert, bytearray, rdbms, informix

我想知道是否有某种方法可以`insert Byte[]`通过我的**SQL Editor**使用 INSERT 语句进入我的数据库列。

例如

> INSERT INTO Temp (id,name) VALUES(1,'rg_book');

我只想测试我的数据，不想制作用户界面（文件上传器，...等）。

如何写这个声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:57:24.703

CLR 字节数组类型 (Byte[]) 映射到 Informix DB2 中的 VARBINARY 类型。[请参阅此处的输入信息。](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.apdv.routines.doc/doc/r0011385.html)

如果您的名称字段需要字符数据，请使用 VARBINARY 函数将数据转换为字符串的二进制表示。 [见这里](http://publib.boulder.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z10.doc.sqlref/src/tpc/db2z_bif_binary.htm)。

例如：

```
INSERT INTO Temp (id, name) VALUES (1, VARBINARY('rg_book')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:56:22.750

如果我是你，我会做以下事情（如果我正确理解了你的问题）：

1.  创建测试控制台项目
2.  使用 Foreach 或 For（在您的 Byte[] 数组上）组成所需的 Insert 并（例如）将它们添加到磁盘上的某个文件中。
3.  在 Management Studio 中运行此脚本以填写表格。

> ```
> FileInfo f = new FileInfo(@"d:\Inserts.txt");
> Byte[] list = {0, 1, 2};
> 
> using (StreamWriter w = f.CreateText())
> {
>     for (int i = 0; i < list.Length; i++)
>     {
>         w.WriteLine("INSERT INTO [TEMP] ([id], [Name]) VALUES ({0}, 'rg_book')", list[i]);
>     }
> } 
> ```

# c# - LINQ to Objects 是否保持其顺序

> ID：14241416
> 
> 赞同：18
> 
> 时间：2013-01-09T16:09:30.630
> 
> 标签：c#, linq-to-objects

我有 a`List<Person>`而是想将它们转换为 a 进行简单处理`List<string>`，执行以下操作：

```
List<Person> persons = GetPersonsBySeatOrder();
List<string> seatNames = persons.Select(x => x.Name).ToList();

Console.WriteLine("First in line: {0}", seatNames[0]); 
```

LINQ to Objects 对象上的`.Select()`语句是否**保证**不会更改列表成员的顺序？假设没有添加明确的不同/分组/排序

另外，如果先使用任意`.Where()`子句，是否仍能保证保持相对顺序，还是有时会使用非迭代过滤？

* * *

正如费尔明上面评论的那样，这本质上是一个重复的问题。我未能选择正确的关键字来搜索 stackoverflow

[使用 LINQ 保持顺序](https://stackoverflow.com/questions/204505/preserving-order-with-linq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:20:52.067

在当前的 .Net 实现中，它使用这样的代码。但不能保证将来会实施此实施。

```
private static IEnumerable<TResult> SelectIterator<TSource, TResult>(IEnumerable<TSource> source, Func<TSource, int, TResult> selector)
{
  int index = -1;
  foreach (TSource source1 in source)
  {
    checked { ++index; }
    yield return selector(source1, index);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:27:15.180

它最依赖于底层集合类型。您可能会从 HashSet 得到不一致的排序，但 List 是安全的。即使您想要的排序是隐式提供的，但如果您需要，最好定义一个显式排序。从方法名称来看，您似乎正在这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-08T04:38:28.247

是的，Linq`Select`保证按照传递的枚举顺序返回所有结果。像大多数 Linq 函数一样，它完全指定了它的作用。除非处理错误，否则这也可能*是*以下代码`Select`：

```
IEnumerable<Y> Select<X, Y>(this IEnumerable<X> input, Func<X, Y> transform)
{
    foreach (var x in input)
        yield return transform(x);
} 
```

但正如 Samantha Branham 指出的那样，底层集合可能没有内在的顺序。我见过在读取时重新排列自己的哈希表。

# javascript - 相当于 PHP 的 `if ($variable = 5){}`

> ID：14241418
> 
> 赞同：4
> 
> 时间：2013-01-09T16:09:33.550
> 
> 标签：javascript, if-statement, expression

我不知道这是否有自己的术语，但是，在 PHP 中我可以这样做：

```
if ($variable = 5)
{
    echo $variable; // 5
} 
```

哪里，同样的 JS 失败：

```
if (var variable = 5)
{
    echo variable; // Unexpected token var 
} 
```

有没有等价物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:12:40.293

您不能在`if`块内定义变量。所以，答案是否定的，你不能在 javascript 中做到这一点。在 PHP 中，将返回一个变量定义`true`，它将驱动`if`.

但是，赋值语句返回 true，因此您可以使用：

```
var $variable;
if($variable = 5) {
    alert($variable);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:12:08.030

`var variable`应该在功能块的开头，而不是在表达式内。

```
var variable;
if( variable = 5) {
    alert(variable);
} 
```

当然，这完全是多余的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:12:03.163

您可以在子句`variable`之前声明变量：`if`

```
var variable;

if (variable = 5)
{
    console.log( variable ); // logs 5
} 
```

# linux - 令人费解的 egrep 匹配换行符

> ID：14241423
> 
> 赞同：3
> 
> 时间：2013-01-09T16:10:07.703
> 
> 标签：linux, newline, grep

我对以下 egrep 行为感到非常困惑：

我有一个以 LF 结尾的文件。`$'\n'`当我按预期返回所有行的grep 时。`$'\r\n'`但是，即使文件中没有回车符，当我 grep for 时也会返回所有行。为什么 grep 会以这种令人费解的方式表现？

```
[pjanowsk@krakow myplay2]$ cat sample.txt
a
b
n
c
[pjanowsk@krakow myplay2]$ file sample.txt
sample.txt: ASCII text
[pjanowsk@krakow myplay2]$ egrep $'\n' sample.txt 
a
b
n
c
[pjanowsk@krakow myplay2]$ egrep $'\r\n' sample.txt 
a
b
n
c 
```

此外，当我将文件转换为 CRLF 终止时，egreping 换行符匹配所有行，但 egreping 回车+换行符返回空字符串。为什么？

```
[pjanowsk@krakow myplay2]$ unix2dos sample.txt 
unix2dos: converting file sample.txt to DOS format ...
[pjanowsk@krakow myplay2]$ file sample.txt 
sample.txt: ASCII text, with CRLF line terminators
[pjanowsk@krakow myplay2]$ egrep $'\n' sample.txt 
a
b
n
c
[pjanowsk@krakow myplay2]$ egrep $'\r\n' sample.txt 

[pjanowsk@krakow myplay2]$ 
```

最后，如果我`'\n'`使用强引号但没有 C 样式转义的 egrep，即使没有反斜杠，我也会得到“n”的匹配项。为什么？

```
[pjanowsk@krakow myplay2]$ egrep '\n' sample.txt 
n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:27:57.520

第一个 egrep 正在返回每一行，因为您的 shell 将 $'\n' 视为名为 '\n' 的变量。该变量的计算结果为空字符串，因此 egrep 看到“egrep '' sample.txt”。这将返回所有行。

我不认为 grep 或 egrep 允许匹配行尾字符本身。他们使用 EOL 将文件分成匹配或不匹配的行。

您可以使用 pcregrep，它将使用“与 perl 兼容”的正则表达式，并且会愉快地匹配多行正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:24:26.850

可以尝试其中之一

```
 -U, --binary              do not strip CR characters at EOL (MSDOS)
  -u, --unix-byte-offsets   report offsets as if CRs were not there (MSDOS) 
```

# haskell - 将字符串视为 Haskell 程序

> ID：14241424
> 
> 赞同：3
> 
> 时间：2013-01-09T16:10:07.953
> 
> 标签：haskell, gtk, ghc, dynamic-compilation, ghc-api

作为一个更大的大学项目的一小部分，我需要编写一个本质上非常粗糙的 IDE。这个想法是从 gtk 文本框中获取输入，将该字符串视为在 .hs 文件中，并评估其中的函数。

我的主要方法是使用[GHC API](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/ghc-7.4.1/GHC.html)来编译和评估测试函数。我已经设法获得了一个用于从 .hs 文件编译的玩具示例。GHC 的 Target 数据类型有一个用于从 StringBuffer 获取目标的可选构造函数，因此我决定尝试更改我的代码以使其从 String Buffer 中工作：

```
compileText :: SourceView -> IO ()
compileText tview = do

txtBuff <- textViewGetBuffer tview
startIt <- textBufferGetStartIter txtBuff
endIt <- textBufferGetEndIter txtBuff
compTime <- getClockTime
srcString <- textBufferGetText txtBuff startIt endIt False

defaultErrorHandler defaultLogAction $ do
  func <- runGhc (Just libdir) $ do
    dflags <- getSessionDynFlags
    setSessionDynFlags dflags
    addTarget $ haskellFileFromText srcString compTime
    r <- load LoadAllTargets
    case r of
      Failed -> error "Compilation failed"
      Succeeded -> do
        m <- findModule (mkModuleName "Test") Nothing
        setContext [IIModule m]
        value <- compileExpr ("Test.print")
        do let value' = (unsafeCoerce value) :: String -> IO ()
           return value'
  func "Hello"
  return ()

haskellFileFromText :: String -> ClockTime -> GHC.Target
haskellFileFromText codeStr cTime = GHC.Target (TargetModule (mkModuleName "Test")) False (Just ((stringToStringBuffer codeStr), cTime)) 
```

以下代码当时在文本框中：

```
module Test (Test.print) where

print :: String -> IO ()
print x = putStrLn x 
```

但是，这似乎不起作用。我得到错误：

```
textEdit: panic! (the 'impossible' happened)
  (GHC version 7.4.1 for x86_64-unknown-linux):
    Could not find module `Test'
Use -v to see a list of the files searched for.

Please report this as a GHC bug:  http://www.haskell.org/ghc/reportabug 
```

我究竟做错了什么？我觉得我严重误解了这段代码的工作方式。

向我建议的这种方法的替代方法是使用提示或 mueval 之类的方法来评估文本框中的文本。如果我只是想单独评估一个函数，这似乎可以正常工作，但是如果我想评估一个依赖于运行同一源文件中定义的 4 个其他函数的上下文的函数，这会扩展吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T00:54:30.523

正如 CA McCann 所指出的，`hint`它为您做了很多这样的工作。它是 GHC api 的包装器，而不仅仅是像 mueval 这样的独立评估器。

即使它缺少您需要的东西，从中学习和扩展它也比从头开始容易得多。

# sql - 用于对列进行分组并忽略空值的 SQL 查询

> ID：14241429
> 
> 赞同：3
> 
> 时间：2013-01-09T16:10:24.203
> 
> 标签：sql, oracle10g

我有一张像这样的桌子：

```
Col1 Col2 Col3 Col4
1          a
1     b          
1                c
2     e   
2          f  
2                g 
```

我需要编写一个查询，它将具有这样的输出

```
Col1 Col2 Col3 Col4
1     a     b   c
2     e     f   g 
```

我正在使用 oracle 10g

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T16:16:39.580

如果每列只有一个值，则可以使用聚合函数：

```
select 
  col1,
  max(col2) col2,
  max(col3) col3,
  max(col4) col4
from yourtable
group by col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/5b14c/1)

结果是：

```
| COL1 | COL2 | COL3 | COL4 |
-----------------------------
|    1 |    b |    a |    c |
|    2 |    e |    f |    g | 
```

# apache - 除非用户想要“强制桌面版本”，否则使用 htaccess 重定向到移动版本

> ID：14241437
> 
> 赞同：2
> 
> 时间：2013-01-09T16:11:10.230
> 
> 标签：apache, .htaccess, mobile, web

我有以下 .htaccess 文件可以重定向到我的网站的移动版本：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|iphone|ipod|#opera mobile|palmos|webos" [NC]
RewriteRule ^$ http://www.example.com/mobile [L,R=302] 
```

但是，我需要为移动用户添加一个条件才能请求桌面站点。

我搜索了一下，没有找到一个简单的答案。我只需要一个网址，例如[http://www.example.com/?desktop](http://www.example.com/?desktop)以避免重定向到 /mobile

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:17:44.973

试试看：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !^desktop
RewriteCond %{HTTP_USER_AGENT} "android|blackberry|googlebot-mobile|iemobile|iphone|ipod|#opera mobile|palmos|webos" [NC]
RewriteRule ^$ http://www.example.com/mobile [L,R=302] 
```

# jquery - 点击更改图片

> ID：14241438
> 
> 赞同：2
> 
> 时间：2013-01-09T16:11:14.423
> 
> 标签：jquery, fade

我找到了这段代码，但我不想随意更改。我不知道如何按顺序更改图像。请帮我！

HTML

```
 <div class=change><img id=bg src="items/01.jpg" alt="" /></div> 
```

查询：

```
var images = ["02.jpg","03.jpg","01.jpg"];

$(function() {
    $('.change').click(function(e) {
    var image = images[Math.floor(Math.random()*images.length)];
        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'items/'+image); 
              $(this).fadeIn(200);
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:13:01.603

您需要使用`index`递增 1 而不是随机。`Reset`达到数组长度时的索引。

```
var images = ["02.jpg","03.jpg","01.jpg"];

$(function() {
    index = 0;
    $('.change').click(function(e) {
    var image = images[index++];
    if(index == images.length) 
       index = 0;
        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'items/'+image); 
              $(this).fadeIn(200);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:16:21.343

```
var images = ["01.jpg","02.jpg","03.jpg"];
var currentimg = 0; 

$(function() {
    $('.change').click(function(e) {

        var image = images[currentimg];
        currentimg++;
        if(currentimg > 2){
            currentimg = 0;
        }

        $('#bg').parent().fadeOut(200, function() {
            $('#bg').attr('src', 'items/'+image); 
            $(this).fadeIn(200);
      });
    });
}); 
```

尝试这个。这应该适合你。

# java - 在特定时间设置通知android

> ID：14241439
> 
> 赞同：10
> 
> 时间：2013-01-09T16:11:15.427
> 
> 标签：java, android, notifications, alarm

我意识到以前有人问过这个问题，但我对此一无所知。

我有一个警报管理器来设置通知：

```
public void to_reminder(View view)
{
    Intent intent=new Intent(this,Notification_morning.class);
    AlarmManager manager=(AlarmManager)getSystemService(Activity.ALARM_SERVICE);
    PendingIntent pendingIntent=PendingIntent.getService(this,
            0,intent, 0);
    Calendar cal=Calendar.getInstance();
    cal.set(Calendar.HOUR_OF_DAY, timepicker.getCurrentHour());
    cal.set(Calendar.MINUTE,timepicker.getCurrentMinute());
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    manager.setRepeating(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis(),24*60*60*1000,pendingIntent);

} 
```

...然后我有通知本身就是一项服务：

```
public class Notification_morning extends Service {

    @Override
public void onCreate() 
{   

Toast.makeText(this, "MyAlarmService.onCreate()", Toast.LENGTH_LONG).show();
Intent resultIntent=new Intent(this, Calendar_start.class);
PendingIntent pIntent=PendingIntent.getActivity(this,0,resultIntent,0);

Notification noti_builder= new Notification.Builder(this)
.setContentTitle("Don't forget to plan your activitites for the day! ")
.setContentIntent(pIntent)
.build();
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE); //what does this do!?

noti_builder.flags |=Notification.FLAG_AUTO_CANCEL;

notificationManager.notify(1,noti_builder); 

}
@Override
    public IBinder onBind(Intent intent) {
    return null;
    } 
```

}

....我包括吐司以确保我实际上是采用这种方法。祝酒词出现，但通知没有出现。我在这里做错了什么？我需要更改清单文件中的内容吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T16:12:51.260

没有图标（或者它是标题？），通知不起作用。

我确定在此之前我遇到过同样的问题，如果您忽略它，通知的元素之一将不会显示。

# javascript - 将 Javascript 对象传递到 .ASHX

> ID：14241442
> 
> 赞同：0
> 
> 时间：2013-01-09T16:11:32.133
> 
> 标签：javascript, object, ashx

我有一个用 Javascript 构建的对象，我想将它传递到 .NET .ASHX 文件中，然后解析出各种对象属性。

这是我用 Javascript 构建的对象：

```
function passSelection(prop1, prop2, prop3, prop4, prop5, prop6) {
this.prop1 = prop1value;
this.prop2 = prop2value;
this.prop3 = prop3value;
this.prop4 = prop4value;
this.prop5 = prop5value;
this.prop6 = prop6value;
}; 
```

然后我用值填充对象；

```
var javascriptObject = new passSelection(var1, var2, var3, var4, var4, var6); 
```

然后我调用我的 ajax 函数将对象发送到 .ASHX；

```
nameOfAjaxFunction(javascriptObject); 
```

这一切都很好。但现在在 .ASHX 中，我想获取对象的各个属性，所以我在 AJAX 查询字符串中为 javascriptObject 设置了一个 .NET 变量。这似乎也可以正常工作。

```
Dim objObjectVariable = context.Request.QueryString("javascriptObject") 
```

所以问题是：现在我已经为 javascript 对象设置了一个 .NET 变量，我该如何引用各个对象的属性？

任何提示或建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:17:53.960

使用 Ajax，您将始终向服务器发送*字符串*，而不是对象。在您的情况下，`nameOfAjaxFunction`似乎是通过 GET 传递它（另一种选择是 POST）。传递对象的最佳方式是在您的 JS 上将其编码为 JSON（从内部`nameOfAjaxFunction`），然后在服务器端将其解码回来。

# mysql - 用值填充 LEFT JOIN 中的 NULLS

> ID：14241443
> 
> 赞同：0
> 
> 时间：2013-01-09T16:11:41.193
> 
> 标签：mysql, sql, database, group-by, left-join

```
SELECT

    rates_Calendar.date,
    subQuery.name,
    COALESCE(subQuery.amount,0) as amount,
    subQuery.reference,
    subQuery.property

FROM
    rates_Calendar
    LEFT JOIN (
                SELECT
                    rates_Booking.date,
                    unit.unit,
                    unit.abbreviation as name,
                    rates_Booking.amount,
                    rates_Booking.bookingReference AS reference,
                    property.property

                FROM
                    rates_Booking

                    LEFT JOIN booking ON booking.reference = rates_Booking.bookingReference

                    LEFT JOIN unit ON booking.apartment = unit.unit

                    LEFT JOIN property ON property.property = unit.property

                    # unit to apartments
                    LEFT JOIN apartments ON (apartments.unit = unit.unit)
                    LEFT JOIN apartmentTypes ON (apartmentTypes.id = apartments.apartmentTypeId)

                WHERE
                    rates_Booking.date BETWEEN @startDate AND @endDate
                    AND unit.unit = 221

                GROUP BY
                    property.area,
                    property.property,
                    apartmentTypes.id,
                    unit.unit,
                    rates_Booking.date

                ) AS subQuery ON subQuery.date = rates_Calendar.date

 WHERE
     rates_Calendar.date BETWEEN @startDate AND @endDate
 GROUP BY 
subQuery.reference,
subQuery.unit,
subQuery.apartmentTypeId,
subQuery.property,
subQuery.area,
    rates_Calendar.date 
```

现在，显然此查询将导致不匹配的日期为 NULLS。有没有办法用 NON NULL 值更新所有 NULLS？

```
2013-01-01  unitA 138 1      property1
2013-01-02  unitA 138 1      property1
2013-01-03  unitA 138 1      property1
2013-01-04  NULL  0   NULL   NULL
2013-01-05  NULL  0   NULL   NULL 
```

有没有办法用相应列中的 NON NULLS 更新 NULL？

我正在为此尝试，因为无法从链接中理解使用 NULLS 隐藏 rowGroups： [Hide NULL Row Groups JasperReports](https://stackoverflow.com/questions/14221656/hide-null-row-groups-jasperreports)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:15:41.340

我认为您不希望`LEFT JOIN`then 与您的`subQuery`. 试试这个：

```
SELECT

    rates_Calendar.date,
    subQuery.name,
    COALESCE(subQuery.amount,0) as amount,
    subQuery.reference,
    subQuery.property

FROM
    rates_Calendar, (
                SELECT
                    rates_Booking.date,
                    unit.unit,
                    unit.abbreviation as name,
                    rates_Booking.amount,
                    rates_Booking.bookingReference AS reference,
                    property.property

                FROM
                    rates_Booking

                    LEFT JOIN booking ON booking.reference = rates_Booking.bookingReference

                    LEFT JOIN unit ON booking.apartment = unit.unit

                    LEFT JOIN property ON property.property = unit.property

                    # unit to apartments
                    LEFT JOIN apartments ON (apartments.unit = unit.unit)
                    LEFT JOIN apartmentTypes ON (apartmentTypes.id = apartments.apartmentTypeId)

                WHERE
                    rates_Booking.date BETWEEN @startDate AND @endDate
                    AND unit.unit = 221

                GROUP BY
                    property.area,
                    property.property,
                    apartmentTypes.id,
                    unit.unit,
                    rates_Booking.date

                ) AS subQuery

 WHERE
   rates_Calendar.date BETWEEN @startDate AND @endDate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:32:23.090

这是你想要的吗？

```
SELECT rates_Calendar.date, coalesce(subQuery.name, 'unitA'),
        COALESCE(subQuery.amount,0) as amount,
        coalesce(subQuery.reference, 1),
        coalesce(subQuery.property, 'property1')
. . . 
```

或者，您是否想从列中读取值，例如：

```
select rates_Calendar.date,
       coalesce(subquery.Name, max(SubQuery.name) over ()) as name,
       COALESCE(subQuery.amount,0) as amount,
       coalesce(subQuery.reference, max(subquery.reference) over ()) as reference,
       coalesce(subQuery.property, max(subquery.property) over ()) as property 
```

这会从列中获取最大值并将其用作默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:13:33.737

可能你需要 IFNULL 函数吗？

```
select ifnull(some_field, 'default_value') from mytable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:59:13.743

我设法通过使用 CROSS JOIN ON rates_Calendar 和单位表并在这两个表上加入子查询来做到这一点。

# iis - 在 IIS8 上设置 SSL

> ID：14241445
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:11:42.100
> 
> 标签：iis, ssl, aspdotnetstorefront

问候，

我在亚马逊（Server 2012 和 IIS8）上安装了 AspDotNetStoreFront。该推车需要连接到 StoneEdge 软件。我们从 StoneEdge 购买了一个脚本（用于我们的购物车）。到目前为止，我们一直无法连接。StoneEdge 支持告诉我，我需要有一个 SSL 证书。但我不能拥有它，因为该站点仍处于测试阶段。我在 MSDN 上看到，在我拥有有效的 SSL 证书之前，我无法设置 SSL。

有没有办法设置通用/虚拟证书以便我们对其进行测试？在我看来，我不认为 SSL 是测试目的所必需的……还是我错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T19:58:47.427

与 StoneEdge 连接是否需要 SSL 证书，实际上取决于它们的集成要求。换句话说，是的，需要 SSL 证书可能是有效的。

出于测试目的，当然可以创建/获取 SSL 证书。但是，您必须确定哪种类型的证书将支持您的测试需求。

例如，在适当的时候，我可以使用自签名证书。在其他情况下，我可能需要由受信任的 CA 签署的证书。请注意，一些提供商（如 Comodo）提供免费试用的 SSL 证书，这可能也很有用。

# mongodb - Symfony 2.1 + @MongoDBUnique(fields="email") 不是唯一的

> ID：14241447
> 
> 赞同：2
> 
> 时间：2013-01-09T16:11:43.730
> 
> 标签：mongodb, symfony-2.1

我正在尝试将**MongoDB**与**Symfony2.1**一起使用，但我遇到了一个问题。我正在关注Symfony 网站上名为“*如何使用 MongoDB 实现简单的注册表单”的*[教程](http://symfony.com/doc/current/bundles/DoctrineMongoDBBundle/form.html)。

 *在本教程中，据说我们可以在电子邮件字段上添加一个约束作为唯一字段。经过一些测试，它不起作用。我可以为我的用户实体多次添加相同的电子邮件。

注释*@MongoDBUnique(fields="email")*似乎失败了。

我在 Google Group 中发现了一个有同样[问题的人。](https://groups.google.com/forum/?fromgroups#!topic/doctrine-dev/yxPtk-gRghw)此时（发布于 1 月 6 日），不幸的是，没有人回答或似乎没有人有任何回答。

感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T10:52:55.847

确保该索引确实存在于 MongoDb 中。指定的注释不会自动创建任何索引。

有关更多信息，请查看[此](http://www.testically.org/2011/08/25/using-a-unique-index-in-mongodb-with-doctrine-odm-and-symfony2/)。*

# oracle - Oracle ODI：使用知识模块创建具有动态名称的表

> ID：14241448
> 
> 赞同：0
> 
> 时间：2013-01-09T16:11:49.167
> 
> 标签：oracle

我需要使用加载知识模块 (LKM) 在 Oracle 中创建审计表。

知识模块通常会创建各种动态命名的表、触发器和视图，例如：C$_tablename、J$_tablename、T$_tablename、JV$_tablename 等。

我想为我的审计表做一些类似的事情，即所有审计表都将被称为“tablename_audit”，但不要如何在 LKM 代码中设置它。

例如，以下 LKM 代码用于创建 C$ 工作表：

```
create table <%=odiRef.getTable("L", "COLL_NAME", "A")%>
(
    <%=odiRef.getColList("", "[CX_COL_NAME]\t[DEST_WRI_DT] NULL", ",\n\t", "","")%>
) 
```

下面的 IKM 代码创建一个 I$ 流表：

```
create table <%=odiRef.getTable("L", "INT_NAME", "W")%>
(
    <%=odiRef.getColList("", "[COL_NAME]\t[DEST_WRI_DT] NULL", ",\n\t", "", "")%>
    ,IND_UPDATE     char(1)
) 
```

INT_NAME 和 COLL_NAME 似乎是 Substitution API 中定义的常量，如此处所[指定](http://docs.oracle.com/cd/E14571_01/integrate.1111/e12645/odiref_reference.htm)。

那么，如何使用知识模块在 Oracle 数据库中创建具有动态名称的类似表？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:12:18.933

我设法解决了这个问题。

`<%=odiRef.getTable("L", "TARG_NAME", "A")%>`以 DATABASE."tablename" 格式返回目标表名。

因此，我在我的 LKM 中添加了一个步骤，它使用 Jython 从 DATABASE."tablename" 字符串中提取表名，将 "_audit" 附加到表名，然后将 DATABASE."tablename_audit" 字符串保存到 Jython 变量中，如图所示以下。

```
targTableName = '<%=odiRef.getTable("L", "TARG_NAME", "A")%>'
splitStr = targTableName.split('"')
JYTHON_AUDIT_TABLE = splitStr[0] + '\"' + splitStr[1] + '_audit\"' 
```

但是，由于无法从 ODI 中的 SQL 脚本使用 Jython 变量，我在 LKM 中添加了另一个步骤，该步骤使用[ODI Expert 的 Jython to Java API](http://odiexperts.com/odi-parallel-2/#jythontojava)将 Jython 变量获取到 Java 变量中（然后可供 ODI 对象使用） 。

```
import api.getInfo as info;

info.setJythonVariable(JYTHON_AUDIT_TABLE);

<@
import api.getInfo;
String JAVA_AUDIT_TABLE = getInfo.getJythonVariable();
@> 
```

然后，我可以轻松地`JAVA_AUDIT_TABLE`在我的 SQL 脚本中使用该变量在我的目标数据库中创建所需的表。

```
create table <@=JAVA_AUDIT_TABLE@>...

insert into <@=JAVA_AUDIT_TABLE@>... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T21:56:34.743

我处于类似的情况，但有列。我按照您的步骤操作，但在设置 java 变量时遇到了错误。我可能没有使用正确的技术或做一些愚蠢的事情。

我在源代码命令中使用了 Java bean shell 技术，并使用了您提供的代码片段。

如果您能提供更多信息，例如您在源和目标命令中使用的技术，那将非常有帮助。

# asp.net - 调用 OleDbConnection 打开方法时出现 OleDbException

> ID：14241456
> 
> 赞同：0
> 
> 时间：2013-01-09T16:12:10.373
> 
> 标签：asp.net, .net, asp.net-mvc, ado.net, asp.net-mvc-4

我正在尝试在我的 asp net mvc 应用程序中操作 excel 2010 文件。

这是代码：

```
string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\teste.xlsx;Extended Properties=\"Excel 12.0 Xml;HDR=YES\";";
OleDbConnection conexao = new OleDbConnection(connectionString);
conexao.Open(); 
```

Open() 方法引发异常，我不知道为什么。

**例外：**

```
 Erro: System.Data.OleDb.OleDbException (0x80004005): Failure creating file.
   at System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
   at System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject)
   at System.Data.ProviderBase.DbConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at System.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at System.Data.ProviderBase.DbConnectionInternal.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.OleDb.OleDbConnection.Open()
   at Gedi.Controllers.AdminController.File() in c:\Users\Guilherme\Documents\Visual Studio 2012\Projects\Gedi\Gedi\Controllers\AdminController.cs:line 62 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:17:00.113

使用带有逐字字符串的文件路径变量：

```
string path = @"c:\teste.xlsx";
string connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES\";");", path); 
```

否则，您需要屏蔽反斜杠，例如`"c:\\teste.xlsx"`：

# c++ - 无法创建位行实例

> ID：14241462
> 
> 赞同：-3
> 
> 时间：2013-01-09T16:12:28.710
> 
> 标签：c++, templates, stl, bitset

我的类 Row 将其数据包含在一个位集中。该类使用模板实现，但无法在我的主程序中创建 Row 对象的新实例。

行h

```
#ifndef ROW_H_
#define ROW_H_

#include <bitset>

template <std::size_t N>
class Row {

public:
    typedef std::bitset<N> bs;

private:
    Row::bs *data;

public:
    Row();                          // ctor
    Row(const Row::bs&);
    Row(const Row&);                // copy construktor
    Row<N>& operator=(const Row&);  // copy with '='
    virtual ~Row();                 // dtor

    // compare
    bool operator==(const Row&) const;
    bool operator!=(const Row&) const;
    bool operator<(const Row&) const;
    bool operator>(const Row&) const;

    // setter
    void reset();                               // set all bits to 0
    void set();                                 // set all bits to 1
    //void set(std::size_t, bool val = true);   // set bit at position npos to 0 or 1
    void set(const Row::bs&);                   // set with another bitset

    // getter
    std::size_t size() const;   // number of bits
    std::size_t count() const;  // number of bits that are set on 1
    bool any() const;           // true if any bit is set on 1
    bool none() const;          // true if no bit is set on 1
    //Row::bs& getData;
    //const Row::bs& getData() const;

    // to stream
    virtual void toStream(std::ostream&) const;
    friend std::ostream& operator<<(std::ostream&, const Row&);
};

#endif /* ROW_H_ */ 
```

行.cpp

```
#include "Row.h"
// ------------------------- ctor dtor -------------------------
template <std::size_t N>
Row<N>::Row() : data(new Row::bs()) {}

template <std::size_t N>
Row<N>::Row(const Row::bs& bits) : data(new Row::bs(bits)) {}

template <std::size_t N>
Row<N>::Row(const Row& r) { this->data = new Row::bs(r.getData()); }

template <std::size_t N>
Row<N>& Row<N>::operator=(const Row& r) {
    if( this != &r ) { // self assignment ?
        delete this->data; this->data=0;
        this->set( r.getData() );
    }
    return *this;
}

template <std::size_t N>
Row<N>::~Row() {
    if(this->data) { delete this->data; } this->data=0;
}

// ------------------------- compare -------------------------
template <std::size_t N>
bool Row<N>::operator==(const Row& r) const {
    if( this->size() == r.size() ) return this->data & r.getData();
    else return false;
}

template <std::size_t N>
bool Row<N>::operator!=(const Row& r) const {
    return !( *this == r );
}

template <std::size_t N>
bool Row<N>::operator<(const Row& r) const {
    return this->size() < r.size();
}

template <std::size_t N>
bool Row<N>::operator>(const Row& r) const {
    return r < *this;
}

// ------------------------- setter -------------------------
template <std::size_t N>
void Row<N>::reset() { this->data->reset(); }

template <std::size_t N>
void Row<N>::set() { this->data->set(); }

/*template <std::size_t N>
void Row<N>::set(std::size_t npos, bool val = true) { this->data->set(npos,val); }*/

template <std::size_t N>
void Row<N>::set(const Row::bs& bits) { this->data = new Row::bs(bits); }

// ------------------------- getter -------------------------
template <std::size_t N>
std::size_t Row<N>::size() const { return N; }

template <std::size_t N>
std::size_t Row<N>::count() const { return this->data->count(); }

template <std::size_t N>
bool Row<N>::any() const { return this->data->any(); }

template <std::size_t N>
bool Row<N>::none() const { return this->data->none(); }

template <std::size_t N>
Row::bs& Row<N>::getData const { return *this->data; }

template <std::size_t N>
const Row::bs& Row<N>::getData() const { return *this->data; }

// ------------------------- to stream -------------------------
template <std::size_t N>
void Row<N>::toStream(std::ostream& os) const { os << this->data; } // should call    bitset<N>::to_string

std::ostream& operator<<(std::ostream& os, const Row& r) {
    r.toStream(os);
    return os;
} 
```

主.cpp：

```
#include "Row.h"

int main() {

    Row<4> *r1 = new Row();

    delete r1; r1=0;

    return 0;
} 
```

编译器消息是德语...

```
In file included from ../Main.cpp:8:0:
../Row.h:54:59: Warnung: »friend«-Deklaration »std::ostream& operator<<(std::ostream&, const Row<N>&)« deklariert eine Nicht-Template-Funktion [-Wnon-template-friend]
../Row.h:54:59: Anmerkung: (wenn das nicht beabsichtigt war, sollte sicher gestellt werden, dass das Funktions-Template bereits deklariert wurde, und <> hier hinter Funktionsnamen eingefügt wurde) 
../Main.cpp: In Funktion »int main()«:
../Main.cpp:13:19: Fehler: expected type-specifier before »Row«
../Main.cpp:13:19: Fehler: »int*« kann nicht nach »Row<4ul>*« in Initialisierung umgewandelt werden
../Main.cpp:13:19: Fehler: expected »,« or »;« before »Row«

make: *** [Main.o] Fehler 1 
```

但以下事情失败了： - 在 main 中创建新实例 - operator<< 用于输出 - getData() 方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:18:13.093

```
Row<4> *r1 = new Row(); 
```

应该：

```
Row<4> *r1 = new Row<4>(); 
```

或更好，

```
Row<4> r1; 
```

# jquery - 如何检查是否存在更改功能？

> ID：14241470
> 
> 赞同：0
> 
> 时间：2013-01-09T16:12:51.477
> 
> 标签：jquery, function

> **可能重复：**
> [我可以使用 jQuery 找到绑定在元素上的事件吗？](https://stackoverflow.com/questions/2008592/can-i-find-events-bound-on-an-element-with-jquery)

我正在使用样式选择对象自动将样式应用于所有标准选择框。这一切都在一个泛型类中完成。在那个类中，我有一个方法需要`.change()`在选择框的父元素上触发事件，如果定义了更改函数。父元素不是在泛型类中创建的，因此可能有也可能没有明确定义的更改函数。

在调用触发器之前，如何测试以查看是否为特定元素（通过选择器）定义了更改函数？

# c# - 如何拆分以空格分隔的路径列表，其中路径可以包含 .NET 2 中的空格？

> ID：14241479
> 
> 赞同：0
> 
> 时间：2013-01-09T16:13:07.110
> 
> 标签：c#, .net, visual-studio-2005

例如： `c:\dir1 c:\dir2 "c:\my files" c:\code "old photos" "new photos"`

应作为列表阅读：

*   c:\目录1
*   c:\dir2
*   c:\我的文件
*   c:\代码
*   老照片
*   新照片

我可以编写一个线性解析字符串的函数，但想知道**.NET 2.0**工具箱是否有任何可以使用的酷技巧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:04:15.617

因为你必须击中每个角色，我认为蛮力会给你最好的表现。
这样你就可以准确地击中每个角色一次。
并且它限制了执行的比较次数。

```
static void Main(string[] args)
{
    string input = @"c:\dir1 c:\dir2 ""c:\my files"" c:\code ""old photos"" ""new photos""";
    List<string> splitInput = MySplit(input);
    foreach (string s in splitInput)
    {
        System.Diagnostics.Debug.WriteLine(s);
    }
    System.Diagnostics.Debug.WriteLine(input);
}

public static List<string> MySplit(string input)
{
    List<string> split = new List<string>();
    StringBuilder sb = new StringBuilder();
    bool splitOnQuote = false;
    char quote = '"';
    char space = ' ';
    foreach (char c in input.ToCharArray())
    {
        if (splitOnQuote)
        {
            if (c == quote)
            {
                if (sb.Length > 0)
                {
                    split.Add(sb.ToString());
                    sb.Clear();
                }
                splitOnQuote = false;
            }
            else { sb.Append(c); }
        }
        else
        {
            if (c == space)
            {
                if (sb.Length > 0)
                {
                    split.Add(sb.ToString());
                    sb.Clear();
                }
            }
            else if (c == quote)
            {
                if (sb.Length > 0)
                {
                    split.Add(sb.ToString());
                    sb.Clear();
                }
                splitOnQuote = true;
            }

            else { sb.Append(c); }
        }
    }
    if (sb.Length > 0) split.Add(sb.ToString());      
    return split;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:30:40.257

通常对于这类问题，可以开发一个正则表达式来解析字段。（ "(.*?)" ）会给你引号中的所有字符串值。您可以从字符串中删除所有这些值，然后在所有引用的项目都出来后对空间进行简单的拆分。

```
static void Main(string[] args)
        {
            string myString = "\"test\" test1 \"test2 test3\" test4 test6 \"test5\"";
            string myRegularExpression = @"""(.*?)""";
            List<string> listOfMatches = new List<string>();

            myString = Regex.Replace(myString, myRegularExpression, delegate(Match match)
            {
                string v = match.ToString();
                listOfMatches.Add(v);
                return "";
            });

            var array = myString.Split(' ');
            foreach (string s in array)
            {
                if(s.Trim().Length > 0)
                    listOfMatches.Add(s);
            }

            foreach (string match in listOfMatches)
            {
                Console.WriteLine(match);
            }
            Console.Read();

        } 
```

不幸的是，我认为没有任何 C# 功夫可以让它变得更简单。很明显，我应该补充一点，这个算法会给你乱序的项目......所以如果这很重要......这不是一个好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T08:08:30.167

这是一个仅限正则表达式的解决方案，它捕获空格分隔和引用的路径。带引号的路径被去掉引号，多个空格不会导致空列表条目。将引用路径与未引用路径混合而没有中间空格的边缘情况被解释为多个条目。

可以通过禁用未使用组的捕获来优化它，但我选择了更高的可读性。

```
static Regex re = new Regex(@"^([ ]*((?<r>[^ ""]+)|[""](?<r>[^""]*)[""]))*[ ]*$");
public static IEnumerable<string> RegexSplit(string input)
{
    var m = re.Match(input ?? "");
    if(!m.Success)
        throw new ArgumentException("Malformed input.");

    return from Capture capture in m.Groups["r"].Captures select capture.Value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T17:42:39.873

假设空格充当分隔符，*除非*用引号括起来（以允许路径包含空格），我建议使用以下算法：

```
ignore_space = false;
i = 0;
list_of_breaks=[];

while(i <  input_length)
{
  if(charat(i) is a space and ignore_space is false)
  {
    add i to list_of_breaks;
  }
  else if(charat(i) is a quote)
  {
    ignore_space = ! ignore_space
  }
}

split the input at the indices listed in list_of_breaks 
```

# android - 使用opensl es和android ndk实时播放音频

> ID：14241480
> 
> 赞同：3
> 
> 时间：2013-01-09T16:13:18.063
> 
> 标签：android, android-ndk, opensl

我想做的是录制一个声音，处理它就像为录制的音频添加一些效果，然后使用opensl尽可能快地重放它。我很难在网上找到关于做这样的事情的信息，所以我实际上有几个问题。

我查看了 android 原生音频示例，以及以 android ndk 开头的书，这让我开始使用 opensl，但它们并没有真正帮助我很好地理解录音。

1）首先，要立即播放录制的音频，我是否能够从播放音频的线程中读取缓冲区，同时录制线程正在写入缓冲区？我知道有人可能会为这个想法发疯，因为同时通过两个不同的线程访问内存中的某个对象的想法可能会导致问题，但如果确保记录线程总是在之前写入内存播放音频线程，那有可能吗？

2）或者实时回放，我会使用带有两个或三个非常小的缓冲区的缓冲区队列，并且每次填充一个缓冲区时都会调用一个回调，然后在下一个缓冲区被录制填充时播放该缓冲区音频线程？但我正在阅读，有人说回调并不总是被调用（我发现的最有用的链接是：[https](https://groups.google.com/forum/#!msg/android-ndk/hLSygQrmcPI/qtwB76JNa_EJ) ://groups.google.com/forum/#!msg/android-ndk/hLSygQrmcPI/qtwB76JNa_EJ ） . 另外，这意味着录制的音频和播放的音频之间的时间差将是缓冲区的大小加上回调让录制对象知道使用下一个缓冲区开始录制所需的时间。我认为录音机停止录音和重新开始录音之间会有一个差距。

3) android 录制缓冲区队列也是我理解问题的地方。我必须在android中使用缓冲区队列来录制音频吗？或者是否可以在不使用缓冲区队列的情况下直接记录到缓冲区？我对此有疑问，因为明确的方法`SLAndroidSimpleBufferQueueItf`实际上似乎不起作用。显然它是一个错误。而且我似乎无法在缓冲区已填充数据后对其进行记录。由于 clear 方法似乎不起作用，我如何告诉记录器要记录到队列中的哪个缓冲区？

我知道这有很多问题要问，而且我没有说出我尝试过的所有内容，但我希望有人对此有一些经验，可以为我和其他任何在回放录制时遇到问题的人提供一些启示使用opensl实时音频。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T14:35:59.803

我几乎完全找到了我正在寻找的东西。实时回放录制的音频的一种方法是使用称为循环缓冲区（或循环缓冲区）的东西，基本上将录制的音频读入其中，而回放的音频读取所有内容，直到录制的音频正在写入。

[http://audioprograming.wordpress.com/](http://audioprograming.wordpress.com/)

Android 中的 OpenSL ES 仍然不完全支持“Low-latency”，因为仍然有一点延迟，但它仍然工作得很好，只是听起来更像是一个轻微的回声

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-16T19:22:59.723

我意识到这已经得到回答，这是一个老问题。但是，为了澄清，在我的播放队列中，我不使用`Clear()`. `GetState(state)`我只是停止播放，然后通过循环使用等待队列耗尽，如下所示：

```
SLresult res;
SLAndroidSimpleBufferQueueState state = {0};
res = (*playbackBufferQueue)->GetState(playbackBufferQueue, &state);

while (state.count && (res == SL_RESULT_SUCCESS))  
{  
    prevState = state;
    res = (*m_playbackBufferQueue)->GetState(m_playbackBufferQueue, &state); 
    // Otherwise this will peg the CPU
    sleep(1);
} 
```

为了支持低延迟，您可以使用从 Android 查询的“最佳”速率和样本大小。您可以使用本机 API 调用来做到这一点吗？当然不是，别傻了。在 Java 中执行并将其传递回本机：

```
int getBestPlaybackRate() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
        return Integer.parseInt(audioManager.getProperty(AudioManager.PROPERTY_OUTPUT_SAMPLE_RATE));
    }
    return 0;
}
int getBestBufferSize() {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1) {
        AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
        return Integer.parseInt(audioManager.getProperty(AudioManager.PROPERTY_OUTPUT_FRAMES_PER_BUFFER));
    }
    return 0;
} 
```

# oracle - 对 EntityFramework 和 ado.net 存储过程使用相同的事务

> ID：14241485
> 
> 赞同：3
> 
> 时间：2013-01-09T16:13:37.700
> 
> 标签：oracle, entity-framework, ado.net

我正在尝试将两段不同的代码集成到使用同一事务中。一种是 Oracle 上的实体框架（使用 odp.net 作为驱动程序），另一种是使用 odp.net 的标准 ado.net。两者都使用相同的连接字符串。

实现这一目标的正确方法是什么？

我可以使用 context.Connection.BeginTransaction() 启动 EF 事务，但这会给我返回 System.Data.Common.DbTransaction。

我可以以某种方式直接与 odp.net 一起使用吗？由于涉及 DTC 的所有困难，我宁愿不使用 TransactionScope。

有多种原因我不能简单地使用 EF 来访问这个存储过程（我们正在为 EF 使用一些定制的 T4 模板，这些模板目前不支持存储过程）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:29:43.700

嗯，我想通了。

这是我所做的：

在使用实体框架之前，我会：

```
Context.Connection.Open();
var ts = Context.Connection.BeginTransaction(); 
```

然后我用 EF 对象做一些事情并调用 SaveChanges()。

对于 ADO.NET，我执行以下操作（只是一个示例，不是生产代码！）：

```
 var conn = ((EntityConnection)dal.Context.Connection).StoreConnection;

   var cmd2 = conn.CreateCommand();
   cmd2.CommandText = "insert into tst_rob values ('3')";
   cmd2.ExecuteNonQuery(); 
```

问题在于将 Context.Connection 转换为 EntityConnection 以便能够访问底层连接。

最后我执行 ts.Commit() 或 ts.Rollback()。瞧，不涉及 DTC，而且都在同一笔交易中。

# php - 收到意外错误“{”

> ID：14241487
> 
> 赞同：-8
> 
> 时间：2013-01-09T16:13:42.130
> 
> 标签：php

我有点不好意思问这个，但我一直收到意外的错误“{”

```
<?php
$c = trim($_POST['cm']);
$inc = trim($_POST['inches']);
$resultat;

if (isset($c)) && (isset($inc)){
echo "string";
exit();
}

if(isset($c)){
echo "string";
exit();
}

if(isset($inc)){
echo "string";
exit();
}
?> 
```

我正在测试两个变量是否为空，然后我正在测试其中一个是否为空……但我在每个 if 语句下都不断收到语法错误……看不到我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:15:01.833

```
if (isset($c)) && (isset($inc)){ 
```

应该

```
if (isset($c) && isset($inc)){ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:17:55.693

if.... 中只需多一个括号

```
if ((isset($c)) && (isset($inc)){
echo "string";
exit();
} 
```

# ios - iOS (cs193p)：为什么我的 UISplitViewControllerDelegate 委托方法没有在方向更改时调用？

> ID：14241488
> 
> 赞同：1
> 
> 时间：2013-01-09T16:13:42.133
> 
> 标签：ios, xcode, cs193p

我正在关注 iTunes 上很棒的斯坦福 cs193p 课程，现在我正在参加第 7 课和第 3 课。

我只是想让 SplitViewController 在 iPad 上正常工作......但看起来我的 UISplitViewControllerDelegate 委托方法在设备方向发生变化时没有被调用。

这是我到目前为止得到的：

-我创建了一个全新的 iPad 故事板，添加了一个 SplitViewController，其中一个 UIViewController 作为 Master（CalculatorViewController），另一个 UIViewController 作为 Detail（GraphViewController）。我认为我做的一切都是正确的。

-我的 GraphViewController.h 实现了 UISplitViewControllerDelegate 协议：

```
@interface GraphViewController : UIViewController <UISplitViewControllerDelegate> 
```

-My GraphViewController.m 将 SplitViewController 委托设置为自身：

```
- (void)awakeFromNib {
    [super awakeFromNib];
    self.splitViewController.delegate = self;
} 
```

-My GraphViewController.m 实现了必要的方法：

```
// asks the delegate whether the first view controller should be hidden for the specified orientation
- (BOOL)splitViewController:(UISplitViewController *)svc 
   shouldHideViewController:(UIViewController *)vc 
              inOrientation:(UIInterfaceOrientation)orientation
{
    // only show the master controller in landscape mode
    return UIInterfaceOrientationIsPortrait(orientation);
}

// tells the delegate that the specified view controller is about to be hidden (must add a popover button)
- (void)splitViewController:(UISplitViewController *)svc 
     willHideViewController:(UIViewController *)aViewController 
          withBarButtonItem:(UIBarButtonItem *)barButtonItem 
       forPopoverController:(UIPopoverController *)pc
{
    barButtonItem.title = aViewController.title;

    // add the button to the toolbar
    NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
    [toolbarItems insertObject:barButtonItem atIndex:0];
    self.toolbar.items = toolbarItems; 
}

// tells the delegate that the specified view controller is about to be shown again (must remove popover button)
- (void) splitViewController:(UISplitViewController *)svc 
      willShowViewController:(UIViewController *)aViewController 
   invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{    
    // hide the bar button item on the detail controller
    NSMutableArray *toolbarItems = [self.toolbar.items mutableCopy];
    [toolbarItems removeObject:barButtonItem];
    self.toolbar.items = toolbarItems;
} 
```

-My GraphViewController.m 支持所有方向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES; // support all types of orientation
} 
```

现在，当我运行应用程序（Snow Leopard 上的 Xcode 4.2、iOS 5.0、iPad Simulator 5.0）时，调用 splitViewController:willHideViewController:withBarButtonItem:forPopoverController: 方法，我的主视图被隐藏，并且在我的详细视图中显示一个按钮在 PopOver 中显示主视图（因为我处于纵向模式）。

但是，当我更改设备的方向（到横向模式......仍在使用模拟器）时，没有任何反应，上述方法都不会再次被调用。我最终仍然隐藏了主视图并且仍然显示了 PopOver 按钮，而事实上，我希望显示主视图并隐藏 PopOver 按钮。

我究竟做错了什么？这是我的代码、Xcode 和模拟器的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:30:35.687

问题解决了！

以防它可能对其他人有所帮助，这就是我忘记做的事情。

在我的 CalculatorViewController（SplitViewController Master）中，我必须允许 iPad 的方向更改为横向，但 iPhone 不允许：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    if (self.splitViewController) return YES; 
    else return UIInterfaceOrientationIsPortrait(toInterfaceOrientation);
} 
```

我为 GraphViewController（SplitViewController 详细信息）做了它，但忘记为 CalculatorViewController 做它......我的错！

# jboss - jboss 7 部署问题与战争

> ID：14241493
> 
> 赞同：1
> 
> 时间：2013-01-09T16:13:59.420
> 
> 标签：jboss, jboss7.x

我们正在使用 jboss 7 和 jboss-as-maven-plugin 来自动部署我们的战争文件。我们有一个 web.xml，其 contextRoot 设置为我们的应用程序名称。在插件中，我们将文件名配置为 ${project.build.finalName}.${project.packaging}。它部署得很好，但问题是当我们更改版本号时我们的战争文件名发生更改。

例如，当我们准备发布下一个版本时，战争从 myproject-v1.0.1.war 更改为 myproject-v1.0.2.war。问题是当 maven jboss 插件运行并尝试部署 war 文件时。注意我们已将 force 设置为 true，因此它应该取消部署旧应用程序并部署新应用程序。

问题是在确定应用程序当前是否已部署时，它似乎关闭了 war 文件名而不是 webContext。所以新版本无法部署，因为旧版本仍在运行。我们必须进入并手动取消部署以前的版本，然后重新部署。旧应用程序的强制取消部署似乎是基于战争名称，并且由于版本号发生变化，它认为它没有部署并让旧版本运行。这导致它失败，因为 webContext 已被使用。

我们试图将插件中的配置更改为通用的并且可以正常工作（运行时名称和名称显示此名称，而不是战争文件名）。但唯一的问题是这似乎会影响 jboss 上的某些东西，虽然它说它部署的 webContext 无效，我们无法访问我们的应用程序。这很奇怪，因为 webContext 是在 web.xml 中设置的，但插件中的配置似乎有些破坏它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:46:10.813

`name`您可以定义一个配置属性。那应该覆盖部署名称。如果未设置，则使用文件名。

```
<project>
    ...
    <build>
        ...
        <plugins>
            ...
            <plugin>
                <groupId>org.jboss.as.plugins</groupId>
                <artifactId>jboss-as-maven-plugin</artifactId>
                <version>7.3.Final</version>
                <configuration>
                    <name>your-app</name>
                </configuration>
            </plugin>
            ...
        </plugins>
        ...
    </build>
...
</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:11:50.170

因此，在玩了一段时间之后，我们找不到任何理由说明为什么当我们使用配置时它会部署但 webContext 没有设置。但是当我们手动部署相同的 WAR 时，它会设置 webContext。

所以最后。我们最终做的是将战争的名称改为通用名称。因此，与其将 myapp_v_1_0_1.war 改为 myapp.war，不如将其命名为 myapp.war。这很痛苦，因为现在我们仅通过查看控制台不知道部署了哪个版本。我们需要点击显示版本号的应用程序。但是通过这样做，它解决了我们取消部署旧应用程序的问题，但产生了一个新问题，即通过控制台确定部署的版本并不容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T13:20:17.410

这篇文章似乎回答了你的问题。 [https://community.jboss.org/wiki/HowdoIoverridethewebcontextroot](https://community.jboss.org/wiki/HowdoIoverridethewebcontextroot)

我在自己的项目上尝试过，它有效！基本上，创建一个 jboss-web.xml（现在您的项目是特定的，一次编写就可以在任何地方部署）。使 jboss-web.xml 看起来像...

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>  
    <context-root>/rmbMavenCounter</context-root>  
</jboss-web> 
```

从 jboss-as-plugin 的 pom.xml 中删除配置。我的插件现在看起来像

```
<build>
    <plugins>
                    .....
        <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.4.Final</version>
        </plugin>
    </plugins>
</build> 
```

它将在 jboss 管理控制台中使用快照名称进行部署，但您可以使用文本字符串来访问您的应用程序。例如，我使用以下链接访问上述应用程序。

```
http://localhost:8080/rmbMavenCounter/ 
```

这是我的 jboss Web 服务器控制台的部署...

```
08:12:42,413 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-16) JBAS015876: Starting deployment of "mavenCounter2-0.0.1-SNAPSHOT.war"
08:12:42,606 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-4) Initializing Mojarra 2.1.5 (SNAPSHOT 20111202) for context '/rmbMavenCounter'
08:12:42,663 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-4) Monitoring jndi:/default-host/rmbMavenCounter/WEB-INF/faces-config.xml for modifications
08:12:42,665 INFO  [org.jboss.web] (MSC service thread 1-4) JBAS018210: Registering web context: /rmbMavenCounter
08:12:42,678 INFO  [org.jboss.as.server] (management-handler-threads - 30) JBAS018559: Deployed "mavenCounter2-0.0.1-SNAPSHOT.war" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-30T12:11:33.713

我遇到了同样的问题：我想使用版本和内部版本号上传战争以便于识别，但同时根据其名称覆盖以前的服务（没有版本/内部版本号）。

这似乎是 maven Jboss 插件的一个限制：http: [//docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html](http://docs.jboss.org/jbossas/7/plugins/maven/latest/deploy-mojo.html)。当前仅支持覆盖 JBoss 管理控制台中的名称和运行时名称的“名称”参数。

1.  我会说插件需要长期支持 'runtimeName' 以及在 maven 'deploy' 目标的参数列表中。

2.  不过，您可以做的是首先使用“取消部署”目标取消部署服务，然后使用“matchPattern”参数找到您以前的服务，即使它包含版本/构建名称。

当然缺点是必须取消部署；这不太适合生产环境。

以你为例：

```
<plugin>
  <groupId>org.jboss.as.plugins</groupId>
  <artifactId>jboss-as-maven-plugin</artifactId>
  <configuration>
    <port>${JBOSS_PORT}</port>
    <username>${JBOSS_USERNAME}</username>
    <password>${JBOSS_PASSWORD}</password>
    <force>true</force>
    <ignoreMissingDeployment>true</ignoreMissingDeployment>
  </configuration>
  <executions>
    <execution>
      <id>undeploy-MyProject</id>
      <phase>install</phase>
      <goals>
        <goal>undeploy</goal>
      </goals>
      <configuration>
        <hostname>${HOSTNAME}</hostname>
        <matchPattern>myproject.*\.war</matchPattern>
      </configuration>
    </execution>
    <execution>
      <id>deploy-MyProject</id>
      <phase>install</phase>
      <goals>
      <goal>deploy</goal>
      </goals>
      <configuration>
        <hostname>${HOSTNAME}</hostname>
        <name>myproject-${project.version}.war</name>
        <filename>target/myproject-${project.version}.war</filename>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

# c++ - 匹配 const 和非 const std::string 的可变参数模板问题

> ID：14241495
> 
> 赞同：1
> 
> 时间：2013-01-09T16:14:03.443
> 
> 标签：c++, c++11, variadic-templates

我在构建可变参数模板时遇到问题，其中扩展函数正确匹配非 const 和 const `std::string`。我有一个通用匹配函数，在某些情况下会调用它。

我已将代码简化为以下示例。不是字符串的东西应该以通用函数结尾。作为字符串的东西应该在另外输出“STRING”的第二个函数中结束。

```
#include <iostream>
#include <string>

template<typename X, typename T>
void extend_exception( X & ex, T&& value )
{
    ex << value << std::endl;
}

template<typename X>
void extend_exception( X & ex, std::string && value )
{
    ex << "STRING: " << value << std::endl;
}

template<typename X, typename TF, typename ... TR>
void extend_exception( X & ex, TF&& f, TR&& ... rest )
{
    extend_exception( ex, std::forward<TF>(f) );
    extend_exception( ex, std::forward<TR>(rest)... );
}

int main()
{
    extend_exception( std::cout, std::string( "Happy" ) );
    std::string var( "var" );
    extend_exception( std::cout, var );
    extend_exception( std::cout, var, std::string( "Combo" ),  const_cast<std::string const&>(var));
    return 0;
} 
```

在上面的版本中，这两种`var`用法不会传递给字符串函数。我尝试了各种其他指定参数的方法，但似乎都没有成功：`std::string && value`, `std::string const & value`, `std::string const && value`. 我也确实尝试`std::string & value`过，然后非常量字符串匹配，但不是 const 字符串。这通过具有两个不同的功能为我提供了至少一种解决方法，但我怀疑我不需要这样做。

我如何在这里编写一个函数来调用 const、非常量和临时字符串对象？

*我正在使用 g++ 4.6.3*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:27:09.540

这很棘手，`T&&`是所谓的通用引用，但`std::string&&`不是（不涉及类型推导）。请参阅[此处](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)以获得很好的解释。这是一个修复：

```
template<typename X, typename T>
void extend_exception_( X & ex, T&& value, ... )
{
  ex << value << std::endl;
}

template<typename X, typename T,
         typename = typename std::enable_if<
           std::is_same<std::string, typename std::decay<T>::type>::value>::type>
void extend_exception_( X & ex, T && value, int )
{
  ex << "STRING: " << value << std::endl;
}

template <typename T> using identity = T;

template<typename X, typename ... R>
void extend_exception( X & ex, R&& ... rest )
{
  identity<bool[]>{false,(extend_exception_(ex, std::forward<R>(rest), 0), false)...};
}

int main()
{
  extend_exception( std::cout, std::string( "Happy" ) );
  std::string var( "var" );
  extend_exception( std::cout, var );
  extend_exception( std::cout, var, std::string( "Combo" ) );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:27:10.173

您不能将非右值绑定到右值引用，因此`string&&`不起作用，但`const std::string&`适用于`var`. 但是，`var`它不是 const，因此有效的重载的最短路径是折叠`T&&`并`std::string&`采用第一个。

您需要找出相互排斥的类型，或者使用 SFINAE 在正确的参数类型上编写两个相互排斥的类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:32:04.887

这是因为您的字符串版本仅捕获作为右值传递的字符串。左值将被传递给通用函数。T&& 和 string&&，或者更一般的 T&& 和 U&& 之间存在巨大差异，如果 T 是模板参数而 U 不是（意思是，U 是某个指定的类型）。参见 Scott Meyers 关于[通用参考的注释](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)

为了使函数按您的意愿工作，您需要做的是添加另一个重载：

```
template<typename X>
void extend_exception( X & ex, std::string const& value )
{
  ex << "STRING: " << value << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-03T07:22:53.017

我重新审视了这个问题并提出了一个涉及使用类标记的解决方案。我写了一篇带有[完整解决方案/讨论](http://mortoray.com/2013/06/03/overriding-the-broken-universal-reference-t/)的文章。

# php - 检索每个类别中的最新帖子 - 论坛

> ID：14241496
> 
> 赞同：0
> 
> 时间：2013-01-09T16:14:13.263
> 
> 标签：php, sql, forum

我正在建立一个论坛，我遇到了一些问题。

基本的数据库结构如下所示：

```
users
| user_id | username

categories
| category_id | category_name |

forum_posts
| post_id | ref_post_id (FK) | ref_category_id (FK) | ref_user_id (FK) | post_date | 
```

如果 ref_post_id 为 0，则意味着它是具有标题的线程的主要帖子。对于线程的答案 ref_post_id 等于主帖子的 post_id。我希望你明白。

我如何获得每个类别的最新帖子？包括帖子线程标题和用户表中的用户名。我应该更改我的表结构并将“latest_post_id”字段添加到类别表还是什么？

非常感谢您的帮助。我知道有类似的问题，但我也想知道我是否应该将 latest_post_id 和所有内容存储在类别表中，或者有一个巨大的查询来检索每个页面加载时的所有内容。

**编辑 2：这是我当前的查询：**

```
SELECT category_id, name, 
(SELECT COUNT(*) FROM forum_posts WHERE ref_category_id = category_id AND ref_post_id = 0) count_threads
(
SELECT title, ref_user_id, username FROM forum_posts
LEFT JOIN users ON user_id =     ref_user_id
WHERE latest_post_id = (SELECT MAX(latest_post_id) FROM forum_posts WHERE    ref_category_id = category_id LIMIT 1)
)
FROM forum_categories 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:16:54.093

如果您有创建日期，则需要获取具有 MAX 日期的日期，如果没有，则可以使用 MAX(post_id)，但是如果您让用户编辑他们的帖子，并且您希望获得最新的创建或编辑您应该向数据库添加修改日期。

获取最新帖子：

```
SELECT * FROM forum_posts p 
INNER JOIN users u ON p.ref_user_id=u.user_id
WHERE `post_id`=(SELECT max(`post_id`) FROM forum_posts WHERE ref_category_id=$value); 
```

如果您使用的是日期，只需使用该字段而不是`post_id`

# jquery - jQuery在一个div上向上打开一个隐藏的div

> ID：14241497
> 
> 赞同：1
> 
> 时间：2013-01-09T16:14:12.927
> 
> 标签：jquery, asp.net, css, menu

我有这样的结构。

```
<div id="ContentPlaceHolder2_div_Menu" class="bottom-link">
    <ul class='forlasttooltip'>
        <li>
            <div class='orange-button divm'>
                3G/GPRS</div>
            <div class='tooltip'>
                <div class='tooltipinner'>
                    <ul>
                        <li class='li' rel='#yesno'><a href='my.aspx' rel='#overlay'>How to configure GPRS?</a>
                        </li>
                        <li class='li' rel='#yesno'><a href='test.aspx' rel='#overlay'>How to Browse Internet?</a>
                        </li>
                        <li class='li' rel='#yesno'><a href='test1.aspx' rel='#overlay'>How to select 3G Network?</a></li></ul>
                </div>
            </div>
        </li>
        <li>
            <div class='orange-button divm'>
                Email</div>
            <div class='tooltip'>
                <div class='tooltipinner'>
                    <ul>
                        <li class='li' rel='#yesno'><a href='' rel='#overlay'>How To Configure Email?</a>
                        </li>
                        <li class='li' rel='#yesno'><a href='' rel='#overlay'>Exchange Mail Configuration</a></li></ul>
                </div>
            </div>
        </li>
        <li>
            <div class='orange-button divm'>
                MMS</div>
            <div class='tooltip'>
                <div class='tooltipinner'>
                    <ul>
                        <li class='li' rel='#yesno'><a href='' rel='#overlay'>How to Send MMS?</a></li></ul>
                </div>
            </div>
        </li>
        <li>
            <div class='orange-button-d divm'>
                Speed<br />
                Issue</div>
            <div class='tooltip'>
                <div class='tooltipinner'>
                    <ul>
                        <li class='li' rel='#yesno'><a href='tet.aspx'
                            rel='#overlay'>How to clear cache and cookies?</a></li></ul>
                </div>
            </div>
        </li>
    </ul>
</div> 
```

当用户将鼠标悬停在with 类上时，我想打开`div`with类。 这就像在 div 上方打开菜单。 早些时候我使用的是现在不可用的。 如下`tooltip``div``divm`

`tooltip``flowplayer`

![在此处输入图像描述](../Images/326ec81d2f1003ea9ae8a551cfba8cf0.png)

谢谢。

## 编辑

我创建了一个小提琴[http://jsfiddle.net/c2pdG/28/](http://jsfiddle.net/c2pdG/28/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T05:32:30.760

[http://jsfiddle.net/c2pdG/23/](http://jsfiddle.net/c2pdG/23/)

这更像是一个 CSS 问题。我更新了 CSS 以便它可以按照您的喜好工作，但您可能需要进行更多调整——您的原始代码也不能完美运行。

本质上，包含子菜单的菜单项应该有`position: relative`和`overflow: visible`。然后，子菜单（工具提示）需要`position: absolute`和`bottom: 100%`，这将把它的底部固定在其相对父级（即`.bottom-link`）的顶部。

即使动画正在使用`.slideDown`，它仍然会出现向上动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:51:17.373

你可以这样使用

```
$(".divm").mouseover(function(){

 var position = $(this).offset(); // calculate the position of click

 var winH = $(window).height();   

 var left = position.left;        // calculation bottom left position of tooltip to be displayed
 var bottom  = winH-position.top
$(".tooltip").attr("style","left:"+left+"px;bottom:"+bottom +"px;").show();

}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T16:52:46.147

如果您可以控制源代码，我只需切换 div 的位置

```
<li>
        <div class='tooltip'>
            <div class='tooltipinner'>
                <ul>
                    <li class='li' rel='#yesno'><a href='my.aspx' rel='#overlay'>How to configure GPRS?</a>
                    </li>
                    <li class='li' rel='#yesno'><a href='test.aspx' rel='#overlay'>How to Browse Internet?</a>
                    </li>
                    <li class='li' rel='#yesno'><a href='test1.aspx' rel='#overlay'>How to select 3G Network?</a></li></ul>
            </div>
        </div>
        <div class='orange-button divm'>
            3G/GPRS</div>
    </li> 
```

这将打开 divm div 上方的工具提示 div。

如果没有，请尝试使用 prependTo() jQuery 方法

```
$('.tooltip').prependTo($('.tooltip').parent()); 
```

这会将元素“移动”到其父元素中的顶部元素，即 li 标签。

所以你的函数可能看起来像这样：

```
$(".divm").mouseover(function(){
    $('.tooltip').prependTo($('.tooltip').parent()).show();
} 
```

# excel - 错误：找不到 Excel 引擎

> ID：14241498
> 
> 赞同：3
> 
> 时间：2013-01-09T16:14:18.000
> 
> 标签：excel, sas

我正在学习SAS。我试图运行一个示例程序：

```
libname x "c:\Joe\SAS\class.xls";

data x.sheet2;
set x.'sheet1$'n;
bmi = 703 * weight / height**2;  
run;
libname x clear; 
```

我收到此错误：

错误：找不到 EXCEL 引擎。错误：LIBNAME 语句中的错误。

我在互联网上找到了一个网站，上面说要执行以下操作：

```
libname x excel "c:\Joe\SAS\class.xls"; 
```

但我得到同样的错误。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:21:50.107

您可能没有 SAS/ACCESS to PC FILES 许可。跑：

```
proc setinit; run; 
```

当我运行时，我有一条线：

```
---SAS/ACCESS Interface to PC Files
        31DEC2012 
```

如果您没有该行，则无法使用 EXCEL 选项运行 PROC IMPORT。

有解决方法。对于“xls”文件，“xls”是合法引擎，不需要：

```
proc import file="c:\Joe\SAS\class.xls" out=class dbms=xls replace; run; 
```

我不知道 LIBNAME 在这里是否也能正常工作 - 但 PROC IMPORT 的工作方式完全相同[只有你必须预先选择哪张纸，然后为每张纸做一个 IMPORT]。PROC EXPORT 是 PROC IMPORT 的输出等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:22:01.333

该错误消息通常表示您没有安装该`SAS Access to PC Files`产品。运行此程序以查看您的站点许可的内容：

```
proc setinint;
run; 
```

# matlab - Matlab/Simulink：将数据表（测量）转换为查找表

> ID：14241499
> 
> 赞同：1
> 
> 时间：2013-01-09T16:14:20.800
> 
> 标签：matlab

我模拟了一个磁系统，我有 2 个输入变量和 1 个输出变量。结果如下所示：

```
myData = [...
0 0 1.1;...
0 1 1.2;...
0 2 1.2;...
1 0.1 2.1;...
1 0.9 2.2;...
1 2.05 2.2;...   
3 0.1 3.1;...
3 1.2 3.2;...
3 1.9 3.2;...    
]; 
```

第 1 列和第 2 列是输入值。第 3 列是输出变量：

```
x = myData(:,1);
y = myData(:,2);
z = myData(:,3); 
```

我想在 Simulink 中创建一个二维查找表，`x`并将`y`其作为输入和`z`输出。我不知道该怎么做。如果第二个输入变量像这里一样均匀分布，那将很容易：

```
x = [0 1 2];
y = [0 1 2];
z = [0 0 0; 1 2 3; 4 4 8] 
```

在 Simulink 查找表块中，您可以输入：

![在此处输入图像描述](../Images/c8f176156b608e8923a621436334d1ee.png) ![在此处输入图像描述](../Images/f1fd31da68ade31fe832884186bcc71a.png) ![在此处输入图像描述](../Images/d6ed4f307f3ab31cedec20385e23c226.png)

**简而言之：** 如何处理我的数据才能在 Simulink 中使用查找表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-06-04T07:12:35.180

你可以设置。x = [0 1 2]；y = [0 1 2]；然后使用可用的原始数据对对应于 x 和 y 的 z 进行插值。这将形成一个均匀分布的 LUT。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-17T21:36:21.717

您正在寻找的 matlab/simulink 命令是 set_param。

您在 mat2str 中寻找的 matlab 命令

# ios - 计算 ios/cocos2d 中的总暂停时间

> ID：14241502
> 
> 赞同：1
> 
> 时间：2013-01-09T16:14:24.207
> 
> 标签：ios, cocos2d-iphone

在玩任何 iphone 益智游戏时，用户可以多次按下暂停按钮。所以我想计算那个特定谜题关卡的总暂停时间。我想在按下暂停按钮时使用 NSTimer 启动它，并在按下恢复按钮时停止它。这是最好的方法还是任何其他建议？任何人都可以帮助快速启动/停止语法。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:36:35.207

首先声明全局变量来存储暂停日期：

```
NSDate *pauseStart;
NSTimeInterval pauseDuration; 
```

然后在开始和停止暂停的方法中，记录开始日期和结束日期。然后计算两个日期之间的差异。

```
-(void)pauseStart 
{
    pauseStart = [NSDate date];
}

-(void)pauseEnd 
{
   NSDate *pauseEnd = [NSDate date];
   pauseDuration = pauseDuration + [pauseEnd timeIntervalSinceDate:pauseStart];

   NSLog(@"Total duration of pause is: %.f seconds", pauseDuration);
} 
```

# .net - 应用程序和 Windows Aero 主题之间的内存冲突

> ID：14241509
> 
> 赞同：0
> 
> 时间：2013-01-09T16:14:39.417
> 
> 标签：.net, windows, memory, themes

我们有一个客户在使用 Windows Aero 主题的 32 位 4 GB Windows 7 计算机上运行我们的 VB.Net 应用程序。在某些操作期间，它们会收到系统访问冲突异常。在查看细节时，我们的应用程序似乎与 xtheme.dll 冲突。让客户禁用他们的 Windows Aero 主题可以解决问题。

我的问题是：这个应用程序在数千台计算机上运行，​​但这是第一次报告这样的事情。客户的计算机上是否有我们应该查看或更改的内容，或者我们的应用程序更有可能以某种方式出现异常？该应用程序完全在 vb.net 框架内开发，因此它应该作为托管代码运行。

任何见解将不胜感激。

# hsqldb - 如何使用 UUID 作为 HSQLDB 列的默认值

> ID：14241518
> 
> 赞同：0
> 
> 时间：2013-01-09T16:15:17.117
> 
> 标签：hsqldb

我正在使用 HSQLDB 进行内存数据库测试，并且在使用 UUID 作为主键时遇到了问题。我希望我的主键由数据库生成。生成的 UUID 不必是真正的 uuid，它只需要转到 varchar 列。

我已经尝试过根据本文档应该存在的 UUID 函数：http: [//hsqldb.org/doc/guide/builtinfunctions-chapt.html](http://hsqldb.org/doc/guide/builtinfunctions-chapt.html)

```
alter table owner alter column id set default UUID(); 
```

但它只是说 UUID 是意外令牌。

有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:33:54.647

您可以对 UUID 列值使用触发器。

```
CREATE TABLE OWNER ( ID BINARY(16) DEFAULT X'' PRIMARY KEY , VAL VARCHAR(10))
CREATE TRIGGER TRIG BEFORE INSERT ON OWNER REFERENCING NEW ROW AS NEW FOR EACH ROW SET NEW.ID = UUID(); 
```

注意该列需要一个默认值，但是这个默认值被 UUID() 覆盖

# types - 类型推断导致代码失败

> ID：14241519
> 
> 赞同：0
> 
> 时间：2013-01-09T16:15:20.810
> 
> 标签：types, typescript, type-inference

考虑以下代码：

```
var yum: HTMLElement;
  var bin: Element;
yum = document.createElement('p');
var y: Node = yum.cloneNode(true);
bin.appendChild(y);

y.style.display = 'none';     //fails Error 2   Cannot convert 'Node' to 'HTMLElement': Type 'Node' is missing property 'click' from type 'HTMLElement' 
```

当然，这会失败，因为 cloneName 返回 Node 而不是 HTMLElement，如果您尝试手动从 Node 转换为 HTMLElement，则会发生相同的错误。所以我卡住了，因为我看不到改变不透明度的方法。现在这是我试图进入 Typescript 的 javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:27:31.863

如果您知道要克隆的元素是 HTMLElement ，如您的示例中所示，则可以对其进行强制转换：

```
var yum: HTMLElement;
var bin: Element;

yum = document.createElement('p');
var y: HTMLElement = <HTMLElement> yum.cloneNode(true);
bin.appendChild(y);

y.style.display = 'none'; 
```

如果类型是显式的，您可以选择不注释类型，如下所示：

```
var bin: Element;
var yum = document.createElement('p'); // type inferred as createElement returns an HTMLElement
var y = <HTMLElement> yum.cloneNode(true); // type inferred from the cast

bin.appendChild(y);
y.style.display = 'none'; 
```

# jquery - jquery scrollTo + wordpress 问题（水平滑动布局）

> ID：14241522
> 
> 赞同：0
> 
> 时间：2013-01-09T16:15:27.057
> 
> 标签：jquery, wordpress, scrollto, horizontal-scrolling

基本上我试图制作一个水平滑动的一页布局。我挣扎了几个小时，仍然不知道我做错了什么。

JQuery 和 scrollTo 包含在之前`<?php wp_head(); ?>`（按正确顺序），我检查了两次可能的拼写错误。

Gere 是我的 html 标记：

```
<div class="nav">
<a class="menu" href="#main">main</a>
<a class="menu" href="#bio">bio</a>
<a class="menu" href="#film">film</a><br>
</div>

<div id="wrap">
<div id="mask">
    <div class="panel" id="main"> </div>
    <div class="panel" id="bio"> </div>
    <div class="panel" id="film"> </div>
</div>
</div> 
```

这是脚本：

```
<script type='text/javascript'>
$(document).ready(function() {
$('a.menu').click(function () {

    $('a.menu').removeClass('active');
    $(this).addClass('active');

    current = $(this);

    $('#wrap').scrollTo($(this).attr('href'), 800);     

    return false;
});

});

</script> 
```

我试图将这个脚本放在网站上的任何地方，但我仍然无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:35:44.537

您有基本的想法，但我认为问题在于您如何设置可滚动面板及其容器。

以您上面的代码为例，我实现了一个基本的 ScrollTo 滑动布局：

*   **垂直滚动**- [http://jsfiddle.net/ZqSSm/1/](http://jsfiddle.net/ZqSSm/1/) - 注意高度`#mask`是`2400px`（800px * 3），但只有第一个`500px`是可见的。

*   **水平滚动**- [http://jsfiddle.net/ZqSSm/2/](http://jsfiddle.net/ZqSSm/2/) - 注意 的宽度如何`#horizontalwrap`，`2400px`但只有第一个`500px`可见。

如果您需要更多帮助，请给我留言，我会尽力而为！ScrollTo 在第一次使用时让我很头疼！

*请注意，在您的网站上加载 JS 文件也存在一些问题。我不知道原因，但打开 chrome 的开发者控制台或萤火虫会让你看到发生了什么。*

# windows - 合并 3 个完全相同但连接字符串设置不同的 Windows 服务

> ID：14241529
> 
> 赞同：1
> 
> 时间：2013-01-09T16:15:47.710
> 
> 标签：windows, service

我有 3 个独立的 Windows 服务项目，它们做的事情完全相同。唯一的区别是每个项目文件在 app.config 中都有不同的连接字符串设置。我计划整合服务项目以使其更易于管理。最好的方法是什么？

**当前场景：**

> 3 win services > 每 6 分钟执行一次 > 点击 3 个不同的数据库 > 收集数据 > 生成 XML > 将 XML 发送到 FTP。

**预期结果：**

> 1 win 服务 > 每 6 分钟执行一次 > 点击 3 个不同的数据库 > 收集数据 > 生成 XML > 将 XML 发送到 FTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:46:53.443

所以他们都做同样的事情，但有不同的连接字符串 - “简单”。

在您的配置中，在“模式”或相同的配置中创建一个新的应用程序设置，并用逗号分隔值，例如：

```
<configuration>
    <appSettings>
        <add key="schema" value="connection1, connection2, connection3"/>
    </appSettings>
</configuration> 
```

然后确保您在架构应用程序设置键中的每个连接都有一个键

```
<connectionStrings>
    <add name="connection1" connectionString="your_connection_string" providerName="the_providor"/>
    <add name="connection2" connectionString="your_connection_string" providerName="the_providor"/>
    <add name="connection3" connectionString="your_connection_string" providerName="the_providor"/>
</connectionStrings> 
```

在您的 OnStart 中执行以下操作 - 请记住需要放入睡眠或线程迭代，但您明白了：

```
protected override void OnStart(string[] args)
{
    string[] schemaList = ConfigurationManager.AppSettings["schema"].Split(",".ToCharArray());

    foreach (string schema in schemaList)
    {
        // do your stuff...
    } 
```

# android - 固定方向

> ID：14241533
> 
> 赞同：0
> 
> 时间：2013-01-09T16:16:08.897
> 
> 标签：android

阅读 android.os.Build.VERSION.SDK_INT 我需要修复我的应用程序的方向。因此，如果版本 < 3，我需要将方向固定为纵向。使用此代码不会运行。

```
@Override
    public void onCreate(Bundle savedInstanceState){ 
      super.onCreate(savedInstanceState);
      setContentView(R.layout.activity_main);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:34:53.643

```
if (android.os.Build.VERSION.SDK_INT<=3) 
 {
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); Or setRequestedOrientation(1); //1=ActivityInfo.SCREEN_ORIENTATION_PORTRAIT
 }
else
 {
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR); or setRequestedOrientation(4); 4=ActivityInfo.SCREEN_ORIENTATION_SENSOR
 } 
```

# c - 用户终止程序时如何关闭初始化的连接

> ID：14241536
> 
> 赞同：0
> 
> 时间：2013-01-09T16:16:14.530
> 
> 标签：c, sockets, postgresql, termination, libpq

我用 C 语言编写了一个守护进程，它使用[libpq](http://www.postgresql.org/docs/8.4/static/libpq.html)库将数据发布到 PostgreSQL 数据库。它有这样的结构：

```
init(...) // init function, opens connection
while(1){export(...)} // sends commands 
```

当有人杀死应用程序时，它会在 PostgreSQL 服务器上留下开放连接。我想避免这种情况。在 export(...) 函数中打开和关闭连接不是一个选项，因为此代码是性能相关框架的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:20:33.093

您可以安装一个**[信号处理程序](http://en.wikipedia.org/wiki/C_signal_handling)**来捕获应用程序终止，并关闭来自该处理程序的活动连接：

```
#include "signal.h"
#include "stdio.h"
#include "stdlib.h"

void catch_sigint( int sig )
{
    /* Close connections */

    /*
     * The software won't exit as you caught SIGINT
     * so explicitly close the process when you're done
     */
    exit( EXIT_SUCCESS );
}

int main( void )
{
    /* Catches SIGINT (ctrl-c, for instance) */
    if( signal( SIGINT, catch_sigint ) == SIG_ERR )
    {
        /* Failed to install the signal handler */
        return EXIT_FAILURE;
    }

    /* Perform your operations */
    while( 1 );

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:21:32.870

您必须为可能终止程序的信号实现处理程序。

```
void handler_function(int signal) {
  //close db connection
  exit(signal);
}

  // somewhere in init:
{
  sigset_t sigs;
  struct sigaction siga_term;

  sigfillset( &sigs );

  siga_term.sa_handler = handler_funciton();
  siga_term.sa_mask = sigs;
  siga_term.sa_flags = 0;

  sigaction( SIGTERM, &siga_term, NULL );
} 
```

请教[如何拦截linux信号？（在 C 中）](https://stackoverflow.com/questions/1935537/how-to-intercept-linux-signals-in-c)

# android - 使用 LoopJ 加密参数 POST 请求

> ID：14241538
> 
> 赞同：1
> 
> 时间：2013-01-09T16:16:16.387
> 
> 标签：android, rest, loopj

我向亚马逊应用商店提交了一个应用程序，但由于以下问题而被拒绝：

> 此应用似乎正在发送未加密的敏感信息。在这种情况下，电子邮件和密码以明文形式发送。请更新应用程序以加密所有敏感信息。

我将[LoopJ](https://github.com/loopj/android-async-http)用于我的 http 请求，但我不确定为什么我的数据没有被加密，或者如何加密它。这是我的代码。

```
public class MYAuthClient {
  private static final String BASE_URL = "http://www.mywebservice.net/";

  private static AsyncHttpClient client = new AsyncHttpClient();

  public static void post(String url, RequestParams params, AsyncHttpResponseHandler responseHandler) {
      client.post(getAbsoluteUrl(url), params, responseHandler);
  }

  private static String getAbsoluteUrl(String relativeUrl) {
      return BASE_URL + relativeUrl;
  }
} 
```

提出要求。我这样做。

```
RequestParams params = new RequestParams();
    params.put("email", login_email);
    params.put("password", login_pass);
    MYAuthClient.post("api/v1/tokens.json", params, new AsyncHttpResponseHandler() {
         @Override
         public void onStart() {
             // Initiated the request
         }

         @Override
         public void onSuccess(String response) {
            // Successfully got a response

         }

         @Override
         public void onFailure(Throwable e, String response) {
             // Response failed :(
             Toast.makeText(getApplicationContext(), "Failed to connect to server", Toast.LENGTH_LONG).show();
         }

     }); 
```

任何帮助或链接到与 LoopJ 一起使用加密的示例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:46:52.367

这里最好的解决方案是`https`为您的 Web 服务提供一个端点。

然后在您的 Android 中，更改为端点，`https`如下所示：

```
http://www.mywebservice.net/ 
```

变成

```
https://www.mywebservice.net/ 
```

您需要检查托管 Web 服务的服务器是否设置为服务器 https。这个问题的解决方案超出了这个问题的范围。

# iphone - 从 UIWebView 获取 Safari 版本

> ID：14241540
> 
> 赞同：1
> 
> 时间：2013-01-09T16:16:17.830
> 
> 标签：iphone, ios, uiwebview, mobile-safari

如何从 UIWebView 获取 Safari 版本？

如果我使用下面的代码，则版本不包含在 UserAgent 中

```
UIWebView *webView = [[UIWebView alloc]initWithFrame:CGRectZero];
NSString *userAgent = [webView stringByEvaluatingJavaScriptFromString:@"navigator.userAgent"]; 
```

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:18:49.867

我读了标题，并打算建议注入 javascript，但你已经在这样做了，哈哈！您的代码应该可以工作...也许它不适用于移动 safari... 试试这个`navigator.appVersion`

如果有帮助，我还在网上找到了这段代码：

```
navigator.userAgent.search("Version") + 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-14T15:56:43.703

这是 Swift 5 中 WKWebView 的解决方案：

```
webView.evaluateJavaScript("navigator.userAgent") { version, error in
        if let str = version as? String {
            print("WEBKIT VERSION " + str)
        }
    } 
```

这将为您提供一个 AppleWebKit 版本，您可以通过向下滚动到此 wiki 页面上的下拉菜单来匹配 Safari：[https ://en.wikipedia.org/wiki/Safari_version_history](https://en.wikipedia.org/wiki/Safari_version_history)

# java - 如何同时更改 JLabel 文本和 JButton 位置

> ID：14241544
> 
> 赞同：1
> 
> 时间：2013-01-09T16:16:25.690
> 
> 标签：java, swing, jbutton, jlabel

我只想在单击按钮时移动一个按钮，并且我想更改标签文本。

我编写了移动按钮的代码，它对我来说工作正常。但是当我想将标签文本更改为不同的名称时，它不会发生。

按钮正在从其位置移动或标签文本已更改。但我想同时执行这两个操作，即按钮单击事件。我尝试了很多东西。一些身体可以帮助我吗？

```
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class JavaGUI extends JPanel {

    private Control control = new Control();
    private Keys keys = new Keys("Original starting value.");

    public JavaGUI() {        
        this.add(keys);
        this.add(control);
    }

    private class Control extends JPanel {

        public Control() {
            this.add(new JButton(new AbstractAction("Update") {

                @Override
                public void actionPerformed(ActionEvent e) {
                    System.out.println("Command: " + e.getActionCommand());
                    keys.string = String.valueOf(System.nanoTime());
                    //keys.label.setText(keys.string);          
                    // If I remove these comments button will not move. bt I want both...
                    JButton j = (JButton) e.getSource();
            j.setLocation(j.getX()+10,j.getY()+10);
                }
            }));
        }
    }

    private class Keys extends JPanel {

        private String string;
        private JLabel label = new JLabel();

        public Keys(String s) {
            this.string = s;
            label.setText(s);
            this.add(label);
        }
    }

    private void display() {
        JFrame f = new JFrame("JavaGUI");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new JavaGUI().display();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:45:58.763

您不能像那样移动按钮，布局管理器会告诉它应该在哪里。调用 setText 会触发整个组件层次结构的布局管理器的效果。如果你真的想这样做，你应该设置一个空布局管理器，并手动管理所有组件的所有大小和位置。

即使您的按钮在您的原始代码中移动，它在离开其原始位置时也没有正确绘制 - 您可能会不小心滥用 Swing，但并非完全如此。

工作解决方案：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

public class MovingButton {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                buildFrame();
            }
        });
    }

    private static void buildFrame() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

        JPanel p = new JPanel();
        p.setPreferredSize(new Dimension(500, 500));
        p.setLayout(null);

        final JLabel label = new JLabel("Starting Text on Label");
        label.setLocation(200, 0);
        label.setSize(label.getPreferredSize());
        p.add(label);

        final JButton b = new JButton("Button");
        b.setSize(b.getPreferredSize());
        b.setLocation(0, 0);
        p.add(b);
        b.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                b.setLocation((int)b.getLocation().getX() + 20, (int)b.getLocation().getY() + 20);
                label.setText(String.valueOf(System.nanoTime()));
            }
        });

        f.add(p);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:46:18.777

您需要为持有 JLabel 的类提供一个接受 String 的公共方法，并在其他对象希望更改标签持有的文本时调用该方法，例如：

```
public void setLabelText(String text) {
   label.setText(text);
} 
```

然后，任何引用 JLabel 显示对象的对象都可以轻松更改标签的文本。

关于您的移动按钮，您需要阅读布局管理器。JPanels 默认使用 FlowLayout，这不接受 setBounds(...) 或 setLocation(...) 的组件。

# linux - ~/.mc/ini 中的更改不生效

> ID：14241548
> 
> 赞同：2
> 
> 时间：2013-01-09T16:16:38.090
> 
> 标签：linux, bash, unix, prompt, ini

我正在尝试自定义外壳。我已将此添加到`.bash_profile`：

```
HOST="Host"
PROMPT_COMMAND='echo -ne "\e]0;$USER@$HOST: $(pwd -P)\a"' 
```

命令提示符已更改，但是当我`mc`再次运行时，它会更改我的提示符。

我已经更改`[Layout] => command_prompt`为`0`in `~/.mc/ini`file，但是`1`当我重新启动mc时它又恢复了。

我已经尝试设置 444 ，`~/.mc/ini`但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:02:34.193

当您编辑`~/.mc/ini`文件（或`~/.config/mc/ini`在较新版本中）时，重要的是不要从其内部编辑它`mc`（使用`mcedit`）。

如果您退出所有实例并使用任何其他编辑器 - 、等`mc`编辑此文件，这将按您的预期工作。`ini``nano``gedit`

发生这种情况的原因是退出`mc`时会被当前配置覆盖`ini`，并且您的更改会丢失。

# json.net - Json.Net 和 Metro/Store 应用程序

> ID：14241551
> 
> 赞同：1
> 
> 时间：2013-01-09T16:16:46.350
> 
> 标签：json.net

一直在绞尽脑汁，但设法弄清楚当前的 Json.Net 版本不适用于 Metro/Store 应用程序。

我包含了对该库的 Net40 版本的引用，但我不断收到编译错误，指出无法将引用添加为

> “项目以 '.NetCore' 为目标，而文件引用以 '.NetFramework' 为目标。这不是受支持的方案。”

所以我尝试在 VS2012 中创建一个基于标准表单的 VB.net 应用程序，并且看到 Json.Net 完美导入。

该问题似乎集中在**System.ComponentModel.PropertyDescriptor**上，它在 .Netcore 中似乎不可用。

**更新：**

我尝试添加 Json.net 的便携式版本，并在尝试构建应用程序时收到以下错误：

> CA0001 错误运行代码分析 CA0001：Rule=Microsoft.Reliability#CA2002，Target=Jobs.Store.MainPage.#JobView_Respond(Jobs.Store.WebViewResponse)：读取模块“Jobs.Store”时遇到以下错误：无法解析成员参考：[Newtonsoft.Json, Version=4.5.0.0, Culture=neutral, PublicKeyToken=30ad4fe6b2a6aeed]Newtonsoft.Json.JsonConvert::SerializeObject。[错误和警告]（全球）

我希望 James Newton-King 能接受这一点，因为他在这里似乎很活跃；-)

除此之外，我发现在 Metro 应用程序中对 JSON 进行序列化非常困难！

干杯，

罗伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T22:15:23.700

刚刚遇到了同样的问题，通过获取库的实际 WinRT 版本解决了这个问题。网络上的任何地方似乎都没有提到它，但是如果您在此处获取最新版本（在撰写本文时）：

[http://json.codeplex.com/releases/view/97986](http://json.codeplex.com/releases/view/97986)

在 /Bin 中，您会找到 WinRT 文件夹 - 引用其中的 DLL，您应该可以启动并运行。

编辑：JSON.NET 做得相当不错，但我们正在开发一个库并决定我们不想添加依赖项。此外，过去它存在版本冲突问题 - 所以我们切换到 SimpleJson（不是来自 github 的 SimpleJson.net，请注意！）。这只是一个类，如果你需要的话，它在序列化方面非常棒。它可以从 NuGet 获得

```
Install-Package SimpleJson 
```

# javascript - 使用 javascript 解析文本文件

> ID：14241555
> 
> 赞同：1
> 
> 时间：2013-01-09T16:16:59.200
> 
> 标签：javascript, datetime

我有一个包含多个记录的文本文件，每个记录都有一个新行，如下所示

```
username ="Test1" :[Jul 01 2012]
username ="Test2" :[Jul 03 2011]
username ="Test3" :[Jul 28 2011]
username ="Test4" :[Jul 12 2010] 
```

如何使用上述格式解析此文本并仅将数据存储在两个方括号之间？[] 所以返回的结果看起来像这样。

```
Jul 01 2012
Jul 03 2011
Jul 28 2011
Jul 12 2010 
```

我只想使用 JavaScript 来完成这项任务。

预先感谢您的任何支持！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:27:25.087

遍历每一行，解析出你想要的数据。正则表达式在这里应该可以很好地工作。

假设您的字符串在变量中`myText`：

```
var lines = myText.split("\n"),
    dates = [], tempVar;
for(var i = 0, len = lines.length; i < len; i++){
    tempVar = lines[i].match(/^.*:\[(\w{3} \d{2} \d{4})\]/);
    if(tempVar !== null){
        dates.push(tempVar[1]);
    }
} 
```

演示：http: [//jsfiddle.net/Uqaj9/](http://jsfiddle.net/Uqaj9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:37:51.753

```
function extractBetweenBrackets(str) {
  return str.split(/\n/).map(function(x) {
    if (x.match(/:\[(.*?)\]/)) { return RegExp.$1; }
  });
}

var str = 'username ="Test1" :[Jul 01 2012]\n'
        + 'username ="Test2" :[Jul 03 2011]\n'
        + 'username ="Test3" :[Jul 28 2011]\n'
        + 'username ="Test4" :[Jul 12 2010]';

extractBetweenBrackets(str);
// => ["Jul 01 2012", "Jul 03 2011", "Jul 28 2011", "Jul 12 2010"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:35:55.973

这里：`/[a-z]+ \d{2} \d{4}(?=\]$)/gim`

```
[a-z]+    # multiple basic latin chars.
          # an empty space
\d{2}     # a 2 digit integer
          # an empty space
\d{4}     # a 4 digit integer
(?=\]$)   # followed by a closing square bracket and then an end-of-line 
```

标志：

*   `g`用于全局，使其尽可能匹配
*   `i`是不区分大小写的。这是第一部分
*   `m`用于多行，这使得美元符号匹配行尾而不是字符串结尾

# sql - 连续规则匹配模式

> ID：14241557
> 
> 赞同：6
> 
> 时间：2013-01-09T16:17:00.577
> 
> 标签：sql, design-patterns

我有一个连续的消息流进行分析。分析返回不同的变量，如作者、主题、情绪、字数和一组不同的单词。系统中的用户能够定义规则，当匹配时应该触发警报。规则应存储在 sql 数据库中。规则是来自消息分析的单个标准的组合，即`word-count > 15 && topic = 'StackOverflow' && sentiment > 2.0 && word-set contains 'great'`。在消息分析结束时提供每个允许的规则标准，之后将触发规则验证并在 Java 中实现。

每条消息都必须检查系统中所有用户定义的所有规则，这会占用大量计算能力（目前每秒有 10+ 条消息，将有 10.000+ 条规则要检查）。是否有一个共同的模式来加速匹配过程，也许这样规则可以并行检查，除了一个一个？是否有可能在纯 SQL 中做到这一点，不同类型规则的模式会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:46:33.717

您的考虑可能不仅仅是匹配的吞吐量。例如，您需要维护规则。

但是，让我们假设一组静态规则和消息，其中包含满足所有规则所需的所有字段。使用 SQL，该结构将从`message`表开始。该表将有一个`insert`触发器。插入触发器将负责匹配规则。做这个的最好方式是什么？

每秒有 10 多条消息，您的处理本质上是并行的，即使每个匹配都是单线程的。我不确定您需要多少努力才能并行化匹配。数据库中的并行性通常出现在 SQL 语句中，而不是它们之间。

有各种各样的解决方案。例如，您可以将规则编码为巨型存储过程中的代码。这将是一场噩梦，可能会超出存储过程的长度限制，并且速度可能非常缓慢。

另一个疯狂的想法。将规则的匹配消息存储在表中，针对该规则，并且约束只加载匹配的消息。然后，您的过程看起来像无数个插入语句。

更严重的是，您将进一步使用以下代码：

```
select *
from rules
where . . . 
```

结果集将具有匹配规则。该`where`子句可能类似于：

```
select *
from rules r
where @wordcount > coalesce(r.wordcount, 0) and
      @topic = coalesce(r.topic, @topic) and
      . . . 
```

也就是说，所有规则的所有可能比较都将在`where`子句中。并且，规则将被预处理以确定他们需要哪些条款。

您甚至可以省去外部变量，直接访问查询：

```
select *
from rules r cross join inserted i
where i.wordcount > coalesce(r.wordcount, 0) and
      i.topic = coalesce(r.topic, @topic) and
      . . . 
```

所以，是的，这在 SQL 中是可行的。而且，您可以并行进行匹配。您只需要努力以适合数据库比较的格式获取您的规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:47:32.723

尽管没有使用 SQL，但我在 C# 中解决了类似的问题。

出于可移植性的目的，我将规则作为序列化 XML 存储在数据库中。

在应用程序启动时，或者当规则表更改（强制刷新规则缓存）时，我从数据库中加载所有规则并将它们反序列化到相应的类中。

然后当数据进入每个应用服务器时，我对传入的数据执行规则，并为传递规则执行适当的操作。（当时我正在应用服务器上的 proc 中执行操作，但现在我将其转储到队列中。）

这样做的好处是可以将计算分散到您的应用程序集群中，并且不会让所有计算都占用数据库机器上的周期。

# image - Magento 1.7 - 无法在所见即所得中插入图像

> ID：14241559
> 
> 赞同：3
> 
> 时间：2013-01-09T16:17:07.160
> 
> 标签：image, magento, wysiwyg, magento-1.7

我在本地安装了 Magento 1.7。我用示例数据安装了它。我没有对其进行任何更改 - 这是默认安装。有两个（可能相关的）问题：

1.  如果我查看使用示例数据创建的任何静态块，则所见即所得编辑器中不会显示任何图像。它只显示一个占位符图像，上面写着“皮肤图像”。图像确实在前端正确显示。

2.  如果我创建一个新的静态块，并尝试通过单击编辑器的“插入/编辑图像”图标插入图像，图像将上传，但单击“插入图像”不会将图像插入编辑器。

我搜索了编辑器中未显示的图像，并且在 1.4 版本中有大量关于它的帖子，但在 1.7 中没有一个对我有用。我原以为它会在 1.7 之前得到纠正。

另外，我在大约 6 个月前玩过的同一台服务器上确实安装了 1.6 的旧版本，并且没有这个问题。

关于如何让它发挥作用的任何想法？

谢谢，米奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:41:47.380

[对于第 1 期，从http://www.magentocommerce.com/knowledge-base/entry/installing-the-sample-data-for-magento](http://www.magentocommerce.com/knowledge-base/entry/installing-the-sample-data-for-magento)下载示例数据库

并将图像放在相应的文件夹中，并清除缓存。

**编辑**

打开任何静态块并单击显示/隐藏编辑器按钮，您将看到在 SRC 中传递了一个变量，例如“{{skin url='images/media/electronics_cellphones.jpg}}”，它是基于创建动态链接的您网站的基本 URL。这就是为什么在管理部分它没有显示图像。

# extjs4 - Sencha CMD 和指南针

> ID：14241560
> 
> 赞同：1
> 
> 时间：2013-01-09T16:17:15.027
> 
> 标签：extjs4, sass, compass-sass

我们想使用 Sencha cmd 工具。但是我们在无法访问 Internet 的 Intranet 上工作以下载 Sencha cmd 所需的 Compass。我们去了 Compass 站点，它解释说我们需要运行 gem 工具来下载和安装 Compass。但是我无论如何都没有看到在没有访问互联网和运行 gem 工具的情况下安装 Compass。

有谁知道我们如何在封闭的网络上安装指南针及其要求？如果我们无法从我们的网络访问互联网，我们需要下载和安装什么才能运行 Sencha cmd？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:20:47.353

如果您有办法从 Intranet 外部引入文件，理论上您可以自己制作 gem 并在本地安装它。

1.  下载指南针源 (https://github.com/chriseppstein/compass)
2.  编译gem： `gem build compass.gemspec`
3.  将周围传递`compass-[version].gem`到您想要安装 Compass 的任何位置
4.  安装宝石： `sudo gem install compass`

Gem 安装应该优先于本地版本而不是远程版本。如果你能找到 Compass gem，你可以直接跳到第 3 步。

# apache - apache 是否缓存 .htaccess 规则？即使在我删除文件后重定向仍然存在

> ID：14241564
> 
> 赞同：4
> 
> 时间：2013-01-09T16:17:19.733
> 
> 标签：apache, mod-rewrite

我有一个 .htaccess 文件，它从文件中删除了所有 .php 扩展名，所以如果我转到 localhost/path/to/file 它会重定向到 localhost/path/to/file.php 一切正常，直到我决定添加.htaccess 的新规则，它不起作用。

我删除了主文件夹中的 .htaccess 文件，并使用以下命令检查其他文件夹中是否存在一些文件：cd /var/www 然后 ls -laR | grep .htaccess 我发现不存在。但是重定向规则仍然被遵循！

我试图清除所有浏览器的缓存但仍然无法正常工作，我尝试了 cURL 并且仍然 apache 遵循删除文件的 .php 扩展名的原始规则。我将 httpfox 扩展下载到了 firefox，它显示了我对 localhost/projectname/index 的请求，并且“Content-Location”是“index.php”。我无休止地尝试重新启动apache并且没有运气。

如何摆脱“缓存”的 htaccess 规则？

编辑：我在我的 iPad 和我的移动设备上尝试过，但问题仍然存在，所以我确信规则被保存在某个地方

编辑：我添加了一条规则来删除 .html 并且它有效，但是当我删除它时，规则仍然存在并且 .php 也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-19T15:40:16.380

不，.htaccess 文件不会被缓存，无论是默认还是其他。（即，没有办法让 Apache 缓存 .htaccess 文件。）每个请求都会重新读取它们。

但是，还有其他地方会缓存重定向，包括您的浏览器以及浏览器和服务器之间的任何中间代理。

而且，不，您无需重新启动 Apache 即可看到 .htaccess 文件更改。

# javascript - 具有复杂 Knockout.js 对象的数据绑定

> ID：14241566
> 
> 赞同：1
> 
> 时间：2013-01-09T16:17:27.757
> 
> 标签：javascript, jquery, knockout.js, knockout-mapping-plugin, knockout-2.0

我在让 foreach 循环在 KnockOut.js 中工作时遇到问题，即使我尝试让代码抛出错误，它也不会。就好像它根本没有尝试绑定到表一样。

```
var History = function (data) {
    this.Average = ko.observable(data.Average);
    this.Count = ko.observable(data.Count);
};

var DataSource = function (data) {
    var convertData = function (array) {
        return $.map(data.Data, function (option) {
            return new History;
        });
    };

    this.Data = ko.observableArray(this.convertData());

    return {
        'Data': this.Data
    };
};

var dataMappingOptions = {
    create: function (options) {
        return new DataSource(options);
    }
};

var dataModel = function () {
    this.source = ko.mapping.fromJS({ 'Data': [], 'Percentage': 0 });
};

currentViewModel = new dataModel();
ko.applyBindings(currentViewModel); 
```

我已经消除了很多复杂性，因为其他一切都有效。基本上，我使用 Knockout.Mappings 将 AJAX 响应映射到这些对象并为计算字段添加函数。这是似乎忽略了我所做的一切的 HTML；它会显示，但没有任何绑定。

```
<table>
    <thead>
        <tr>
            <th>Average</th>
            <th>Frequency</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: kjhkjh">
        <tr>
            <td data-bind="text: $data.Average()"></td>
            <td data-bind="value: $data.Average"></td>
            <td data-bind="text: $data.Average"></td>
            <td data-bind="value: $data.Average()"></td>
            <td>Test</td>
        </tr>
    </tbody>
</table> 
```

由于`kjhkjh`对象没有绑定，我认为它会引发错误，但事实并非如此。即使我把`source.Data`它放进去也无济于事；它只显示静态表，没有任何东西绑定到它。

更新：为了从 Javascript 中的任何内容中获取价值，我必须使用类似这样的东西：

```
console.log(currentViewModel.source.Data()[11].Average()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:44:53.347

这部分似乎不正确。您在同一个语句中有两个回报。尝试删除`return`之前`$.map(`

```
var convertData = function (array) {
    return $.map(data.Data, function (option) {
        return new History;
    });
}; 
```

也可能是您正在引用对象的`this`私有方法。从这里删除：`convertData()``DataSource``this`

```
ko.observableArray(this.convertData()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:43:12.057

我遇到的错误是由我的 Knockout 模型在页面上的放置引起的。一旦我移动了引用下面的 JS 文件的脚本标记，该表所在的位置就可以正常工作。这就是为什么除了这段摘录之外所有页面都能正常工作的原因。这部分是因为我将它作为一个全局变量作为页面的多个部分和几个需要引用它的 JS 文件。

话虽如此，Stockedout 确实指出了我能够改进代码的一些方法。

# iphone - 如何让用户在 iOS 6 中选择路由应用

> ID：14241569
> 
> 赞同：2
> 
> 时间：2013-01-09T16:17:44.853
> 
> 标签：iphone, ios, routing, navigation, maps

我已经看到一些应用程序让用户选择第 3 方应用程序来在 iOS 6 中显示路线/方向，例如“去哪里？”-应用程序。当您点击方向按钮时，它会向您显示路线应用程序列表，例如 Apple Maps、Google Maps、Deutsche Bahn Navigator 和其他其他应用程序，并且还显示可从 App Store 下载的能够显示路线/方向的应用程序。它看起来像是本机系统功能，但我找不到任何有关它的信息。

苹果文档建议使用

```
[MKMapItem openMapsWithItems:@[mapItemStart, mapItemDest] launchOptions:@{MKLaunchOptionsDirectionsModeKey: MKLaunchOptionsDirectionsModeWalking}]; 
```

但这只会直接导致地图应用程序。由于可以注册为路由应用程序，有没有什么方便的方法让用户从您自己的应用程序中选择路由应用程序？

亲切的问候金

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:26:14.180

您可以允许在您的应用程序中进行选择并打开用户已安装的任何应用程序，只要该应用程序具有从您的应用程序启动的 URL 架构：

```
[[UIApplication sharedApplication] openURL:<some URL>]; 
```

例如，您可以在此处找到适用于谷歌地图的 URL 方案：

[https://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

# wpf - 如何将 ComboBox 文本设置为以逗号分隔的选定项目列表？

> ID：14241573
> 
> 赞同：1
> 
> 时间：2013-01-09T16:18:02.360
> 
> 标签：wpf, checkbox, combobox

我有 WPF ComboBox 包含 CheckBox 项目，它允许用户选择多个项目。

在用户从组合框中选择一个项目后，我想在组合框中将所选项目的列表显示为逗号分隔的文本。

XAML：

```
<ComboBox  Name="cmbEnvironment"  >
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <CheckBox IsChecked="{Binding IsSelected}" Content="{Binding Name}" />
            </StackPanel>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

代码背后：

```
var lstEnvironment = new List<Environment>();
lstEnvironment.Add( new Environment() { Name = "Env1", IsSelected = false});
lstEnvironment.Add(new Environment() { Name = "Env2", IsSelected = false });
lstEnvironment.Add(new Environment() { Name = "Env3", IsSelected = false });
cmbEnvironment.ItemsSource = lstEnvironment; 
```

模型：

```
public class Environment
{
    public string Name { get; set; }
    public bool IsSelected { get; set; }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:30:20.400

由于您想要的行为，不是更好的解决方案是使用类似或用于显示您的项目的点击（ `Expander`、、`Popup`等）扩展吗？否则你可能会得到一些奇怪的选择或打开/关闭行为。`ItemsControl``ListView`

但无论如何，我个人会创建一个数据类，其中包含：

```
string SelectedItems { get; set; }
ObservableCollection<Enviornment> AvailableItems { get; set; } 
```

并做这样的事情：

并将 PropertyChange 通知添加到您的`Enviornment`班级，以便您可以执行以下操作：

```
foreach(var item in AvailableItems)
    item.PropertyChanged += Environment_PropertyChanged;

...

void Environment_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "IsSelected")
        SelectedItems = string.Join(",", 
            availableItems.Where(p => p.IsSelected)
            .Select(p => p.Name).ToArray());
} 
```

（我不记得是否`ToArray()`是框架的一部分，但是如果不是，那么[这个答案](https://stackoverflow.com/a/799454/302677)有一个很好的扩展方法可以轻松地将 List 转换为 Array 以便您可以在其中使用它`string.Join`）

但是，使用您当前的设置，您也可以将一些代码隐藏添加到`CheckBox.CheckChanged`或`ComboBox.SelectionChanged`转换`cmbEnvironment.ItemsSource`为`List<Environment>`，构建 Checked 项目的逗号分隔字符串，然后设置`cmbEnvironment.Text`为等于您的逗号分隔字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-02T07:14:45.820

对于未来的读者：我为此推荐（免费）[扩展 WPF 工具包](http://wpftoolkit.codeplex.com/wikipage?title=CheckComboBox "扩展的 WPF 工具包")，它包括一个 CheckComboBox 正是这样做的。

# lua - 您可以通过 USB 从外部执行 chdk 脚本吗？

> ID：14241584
> 
> 赞同：1
> 
> 时间：2013-01-09T16:18:42.753
> 
> 标签：lua, camera, usb, chdk

我一直在修补 CHDK（佳能 hack 开发工具包）。我已经能够通过我的 powershot g12 上的 SD 卡运行 chdk，甚至能够在其上运行脚本。

我的兴趣更多在于通过 USB 电缆从外部控制它。对于初学者，我想尝试从计算机控制它，然后可能是另一个设备。

我去过 CHDK 网站[http://chdk.wikia.com/wiki/CHDK](http://chdk.wikia.com/wiki/CHDK)并浏览了他们的论坛，但没有看到任何关于外部执行的提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-29T03:48:09.393

是的你可以。我使用了两种方法并取得了一些成功。

1.) 我可以使用 CHDKPTP ( [https://app.assembla.com/spaces/chdkptp/wiki](https://app.assembla.com/spaces/chdkptp/wiki) ) 控制我的 Powershot G9。我正在使用来自网站的 Ubuntu 16.04 和 r735 二进制文件。GUI 让您可以控制相机并运行脚本。这种方法应该适用于 CHDK 支持的任何相机。（还有一个用于 CHDKPTP 的 python 绑定，虽然我还没有成功构建它。）

2.) 如果您的相机受 gphoto2 支持，另一种方法是使用 gphoto2。（注意：gphoto2 似乎不支持 G12，但我将其包括在此处以防对其他人有用） 在 G9 上，CHDK 将属性 chdk_script 添加到 gphoto2 中的可用选项中。然后脚本应该可以运行

gphoto2 --set-config chdk_script="脚本名"

此处演示了 gphoto2 方法 ( [https://www.youtube.com/watch?v=v_42jd9tGF0](https://www.youtube.com/watch?v=v_42jd9tGF0) )

# java - 命令行中的引号

> ID：14241592
> 
> 赞同：1
> 
> 时间：2013-01-09T16:19:03.840
> 
> 标签：java, command-line, lftp

我正在尝试为 LFTP 制作一个 maven 插件，这涉及从我的 java 应用程序中调用 LFTP 命令行程序。

但是我无法让它使用单引号、双引号、转义单/双引号来处理我传入的命令。

到目前为止，我所拥有的代码是：

```
final String command = "lftp -e 'set ftp:ssl-protect-data true; put -O /data/upload/ src/test/resources/test-file.txt; bye' -u username,password -p 21 192.168.1.100"
final CommandLine cmdLine = CommandLine.parse(command.toString());
final DefaultExecutor executor = new DefaultExecutor();
executor.setWorkingDirectory(new File(baseDir));
final int result = executor.execute(cmdLine); 
```

以及寻找下一步尝试的建议。

**编辑＃1：**我试图利用`org.apache.commons.exec.CommandLine`和作为预先完成的字符串，但它导致以下错误：

```
Unknown command `set ftp:ssl-protect-data true; put -O /data/upload/ src/test/resources/test-file.txt; bye'.
Exception in thread "main" org.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)
    at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:377)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:160)
    at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:147)
    at org.welsh.build.automation.lftp.plugin.TestClass.main(TestClass.java:30) 
```

但是当我打印出生成的命令并手动运行它时，它工作正常。

**编辑#2：**增加了一些清晰度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:29:43.780

Commons-exec 强调通过增量构建更容易处理`CommandLine`实例：

```
final CommandLine cmdLine = new CommandLine("lftp");
cmdLine.addArgument("-e");
cmdLine.addArgument("set ftp:ssl-protect-data true; put -O /data/upload/ src/test/resources/test-file.txt; bye");
...
executor.execute(cmdLine); 
```

我没有看过他们的命令行解析器，但如果他们不完全信任它，我也不会。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:43:50.587

这里有一些例子：

[阿帕奇共享执行](http://commons.apache.org/exec/tutorial.html)

请注意，它们不使用单引号 (') 字符，而是通过在双引号字符前加上反斜杠来构建带有双引号的 java 字符串。

这是一个示例：

```
String line = "AcroRd32.exe /p /h \"" + file.getAbsolutePath() + "\""; 
```

这是构建命令行的另一种方法：

```
CommandLine cmdLine = new CommandLine("lftp");
cmdLine.addArgument("-e");
cmdLine.addArgument("set ftp:ssl-protect-data true; put -O /data/upload/ src/test/resources/test-file.txt; bye");
cmdLine.addArgument("-u");
cmdLine.addArgument("username,password");
cmdLine.addArgument("-p");
cmdLine.addArgument("21");
cmdLine.addArgument("192.168.1.100"); 
```

# java - Spring 依赖注入：FileNotFound 异常

> ID：14241594
> 
> 赞同：1
> 
> 时间：2013-01-09T16:19:13.867
> 
> 标签：java, spring, dependency-properties

![在此处输入图像描述](../Images/9fc14b90eba853cafa7857ea0ad00d6f.png)

我正在学习弹簧依赖注入。我有两种类型的代码。一个有效，一个无效......但是，它们都为制作教程的人工作。

注释代码给了我下面显示的错误。

```
 @SuppressWarnings("deprecation")
public static void main(String[] args) {

    //ApplicationContext factory = new ClassPathXmlApplicationContext("Beans.xml");

    //The code below works
    BeanFactory factory = new XmlBeanFactory(new FileSystemResource("Beans.xml"));
    HelloWorld obj = (HelloWorld) factory.getBean("helloworld");

    obj.getMessage();
} 
```

豆类.xml

```
 <?xml version="1.0"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="
           http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
           http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd           
       ">

    <bean id="helloworld" class="com.vulab.hellow.HelloWorld">
        <property name="message" value="Hello World" />
    </bean>
</beans> 
```

使用*ApplicationContext时出现错误消息*

线程“主”org.springframework.beans.factory.BeanDefinitionStoreException 中的异常：IOException 从类路径资源 [Beans.xml] 解析 XML 文档；嵌套异常是 java.io.FileNotFoundException：类路径资源 [Beans.xml] 无法打开，因为它不存在

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:34:06.297

为了`XmlBeanFactory`工作，`Beans.xml`必须与调用类位于同一目录中。

一个简单的替代方法是确保它`Beans.xml`位于您的类路径中。您可以将它们复制到`src\resources`然后使用：

```
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("Beans.xml");
HelloWorld obj = (HelloWorld) applicationContext.getBean("helloworld"); 
```

`ClassPathXmlApplicationContext`因为不需要指定绝对文件位置，所以更方便。

注意：自 Spring 3.1 起`XmlBeanFactory`已[*弃用*](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/xml/XmlBeanFactory.html)，这意味着如果您从 3.0 更改，则应使用此类替代方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:38:57.830

对于`ClassPathXmlApplicationContext`，应用程序上下文 XML 文件将需要在您的 ClassPath 中可用。

如果您使用标准 Maven 目录布局，您需要将`Beans.xml`文件放在`src/main/resources`.

如果您从 IDE 运行（从屏幕截图中看起来您正在使用 Eclipse，尽管您没有明确说明您的 IDE），您将需要进入 Properties->Java Build Path 并添加`src/main/resources`到构建路径。

祝你好运，希望这会有帮助！

# python - 我可以使用（误用） globals() 命名空间进行持久存储吗？

> ID：14241596
> 
> 赞同：1
> 
> 时间：2013-01-09T16:19:16.300
> 
> 标签：python, namespaces

我正在编写一些我想作为函数调用的实用程序。它们是用一个不会改变的上下文和一些数据来调用的。处理上下文需要花费大量时间，但是一旦完成，用它来暴露数据是相当轻量级的。

这显然会很好地映射到以下模式

```
class MyFunc():
    def __init__(self, context):
        self.foo_d_context=foo(context)
    def __call__(self, data):
        return bar(self.foo_d_context, data)

if __name__ == '__main__':
    my_callable=MyFunc(my_context)

    results1=my_callable(my_data1)
    results2=my_callable(my_data2) 
```

但是，我的用户反对 my_callable 对象的初始创建。他们更能接受的是一个可以像...一样使用的功能

结果=我的函数（我的上下文，我的数据）

...并让函数 my_func 查看先前调用的持久数据是否存在，并且与上次调用相同。

这样做的问题是第一次调用该函数，它可以将持久数据存储在哪里？似乎 Python 标准库中已经有几个实用程序说它们是这样工作的，并且文档讨论了设置对象的辅助函数。但我还没有弄清楚它是如何工作的。

我可以想到一种方法，但感觉是错误的和不合常规的。看来我可以将对象直接放入 globals() 命名空间，并在任何函数中这样做。所以我可以做

```
def my_func(context,data):
    glob=globals()
    try:
        if glob['__my_persistent_reference_context_$$$'] == context:
            return bar(glob['__my_foo_d_context_$$$'],data)
    except KeyError:
        pass
    glob['__my_foo_d_context_$$$']=foo(context)
    glob['__my_persistent_reference_context_$$$'] = context
    return bar(glob['__my_foo_d_context_$$$'],data) 
```

写完上面的内容，我突然想到这个函数可以创建一个 MyFunc 类的对象，这听起来更接近我正在寻找的概念，但它仍然必须给它起个名字，把它放在某个地方，这样就不会'不解决基本的'我可以使用全局命名空间吗？' 问题。

这个可以吗？

它会一直有效吗？（我使用的是 2.6.6，它最终会在 3 中工作吗？）

有更好的方法吗？

有没有更好的命名空间来污染？

我是否应该坚持认为上课的方式只是正确的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:37:13.037

从您所说的来看，我认为您想要做的是缓存一个值。这可以通过使用不会侵入其他命名空间的函数属性来轻松完成。

```
def my_func(context, data):
    try:
        reference, saved = my_func.cache
    except AttributeError:
        reference, saved = None, None
    computed = saved if reference == context else foo(context)
    my_func.cache = context, computed
    return bar(computed, data) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:31:25.807

当然，您可以放入任何内容，`globals()`并且如果您在密钥中使用使其无效的字符作为标识符，则无法以“正常”方式访问它。但是，让我们一步一步来。如果你要使用字典，为什么不使用*你自己的呢？* 你甚至不需要在任何使用它的函数中声明它是全局的。

```
_my_global_state = {}

def foo(x):
    _my_global_state.setdefault("counter", 0)
    _my_global_state["counter"] += x 
```

等等。

但是属性语法更好，所以让我们使用一个对象实例：

```
_my_global_state = object()

def foo(x):
    if hasattr(_my_global_state, "counter"):
        _my_global_state.counter += x
    else:
        _my_global_state.counter = x 
```

当然，在实现了这一飞跃之后，现在您不妨将数据和函数放在一起成为一个单一的……东西。这是真正的解决方案。使用类来保存您的数据和对其进行操作的函数。

# templates - 如何根据传递给龙卷风模板的字典中的值使按钮可见/不可见？

> ID：14241599
> 
> 赞同：1
> 
> 时间：2013-01-09T16:19:32.437
> 
> 标签：templates, tornado

如何根据传递给模板的字典中的值使按钮可见/不可见？

```
self.render('menu.html',menu=menu) 
```

菜单传递的地方

```
menu = {'attack': False, 'intercept': False, 'follow': False, 'go': False, 'enter_village': False, 'send_backup': False, 'safe_zone': False} 
```

在模板中我有

```
 <div class="ui-grid-b">

        <div data-role="button" id="attack" {% if {{menu['attack']}} %}
             style='display:block;'{% else %}style='display:none;'{% end %}  >Attack</div>
        <div data-role="button" id="intercept">Intercept</div>
        <div data-role="button" id="follow">Follow</div>
        <div data-role="button" id="go">Go</div>
        <div data-role="button" id="enter_village">Enter Village</div>
        <div data-role="button" id="send_backup">Send Backup</div>

    </div> 
```

它不起作用（TypeError：unhashable type：'set'），当我更改为{{menu.attack}}时，我在dict中收到错误no key attack（但我传递了那个值和dict，我已经调试到渲染点）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T02:37:11.033

我的朋友，您有语法问题。

一旦你声明了标签**{%**你就不需要**{{ }}**声明。

```
{% if menu['attack'] %}
```

# php - 使用带有 webstorm 的 Jquery 运行 PHP 脚本

> ID：14241600
> 
> 赞同：0
> 
> 时间：2013-01-09T16:19:41.540
> 
> 标签：php, javascript, jquery

首先，非常感谢您能给我的任何帮助！

对，我想做的是调用一个php脚本来运行服务器端，它接受一个值（这将是一封电子邮件）并将其写入一个文本文件。

这是我要运行的 .php 文件。我还没有完成它，但经过几个小时的尝试，我什至无法让它创建这个文本文件，并向它写入“测试”。

```
<html>

<?php
  $myfile = "GatheredEmailAddresses.txt";
  $fopen2 = fopen($myfile, 'a');
  $stringData = "Here";
  fwrite($fopen2, $stringData);
  fclose($fopen2); 
?>
Done!
</html> 
```

到目前为止，我只使用它取得了任何进展。我知道它会加载文件，因为它显示文本“完成！” 在名为内容区域的 div 区域中，但是我无法弄清楚为什么其余部分没有运行。这是我正在使用的 jquery（显然所有相关的标签，如 etc 都包含在上面：

```
$("#compute").click(function()
    {
       $('#contentArea1').load('test.php');
    }); 
```

我什至不会费心询问电子邮件方面的事情，只是想知道如何使用 jquery 运行它。任何帮助将不胜感激！

编辑：

嗨，大家好，

今天早上尝试了一些东西后，我发现这一定是我的 php 文件的运行方式有问题。当我在我的 IDE 中运行它时，它运行完美，创建了文件并且工作正常。但是，当我使用 Jquery 帖子运行它时，它只会返回“TEST TEXT”并将其显示在相关的 div 中。我正在使用“加载”jquery 命令运行它。有任何想法吗？非常沮丧！:(

这是php文件：

```
<?php
 $dir = 'myDir';
 if ( !file_exists($dir) ) {
      mkdir ($dir, 0777);
 }

 file_put_contents ($dir.'/test.txt', 'Hello File');
?>
TEST TEXT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:23:43.700

您可以使用`file_put_contents()`所有 fopen、fwrite 和 fclose 函数来代替，这样会更容易理解 :)

您还需要将数据发送到 PHP 文件（通过 AJAX、GET/POST）。我在任何地方都看不到你这样做。

此外 - 任何权限问题都需要进行排序。但我还是推荐`file_put_contents()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:24:30.863

对于 jQuery 部分，您可以使用 $.get

```
$.get("test.php", { email: "myFirstEmail" ); 
```

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# c# - 登录代码重定向不起作用

> ID：14241601
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:19:44.247
> 
> 标签：c#, asp.net

我制作了一个 Web 应用程序，我想为管理员登录 admincp，为管理员管理器登录 modcp。这是登录页面的代码：

```
protected void btnOk_Click(object sender, EventArgs e)
{
    try
    {
        string user_n = txtUser.Text;
        string pass_n = txtPass.Text;
        Int32 res = 0;

        DAL.DAL log = new DAL.DAL();
        res = log.login_user_form(user_n, pass_n);

        if (res == 1)
        { 

           if (user_n == "admin")
              {
                  Response.Redirect("manage/AdminPage.aspx");
              }
       else 
         {
            Response.Redirect("modcp/defult3.aspx");
        }

        }
        else
        {
            lblRes.Text = "error username or password";
        }
    }
    catch (Exception ex)
    {
        lblRes.Text = ex.ToString();
    }

} 
```

在 DAL 层中，此代码：

```
public Int32 login_user_form(String username, String password)
{
    int res = 0;
    con = new SqlConnection(strcon);
    SqlCommand cmd = new SqlCommand("EXEC chek_user '" + username + "' , '" + password + "'", con);

    try
    {
        con.Open();
        if (cmd.ExecuteScalar() == null)
        {
            res = 0;
        }

        else
        {
            res = 1;
        }

        con.Close();

    }
    catch (SqlException)
    {
        throw;
    }

    return res;
} 
```

这是我的存储过程：

```
@username nvarchar(50) , @password nvarchar(50)
AS
BEGIN

SET NOCOUNT ON;
    SELECT username_l1 , password_l1 
    FROM user_L1
    WHERE username_l1 = @username AND password_l1 = @password
END 
```

页面 login.aspx 中的此代码在没有此行的情况下工作：

```
Response.Redirect("manage/AdminPage.aspx"); 
```

如果我清除此代码并编写：

```
txtPass.Visible = false;
lblRes.Text = "mesesege"; 
```

那是正确的工作，但没有Response.Redirect，不是吗？

（我不知道级别访问的工作方式）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:31:10.440

您应该将`Response.Redirect()`try/catch 移出，因为它实际上会引发异常。

即使代码在逻辑上是正确的，`Response.Redirects`也会被 catch 语句吞掉。

**编辑：**

这在[这个问题](https://stackoverflow.com/questions/2777105/response-redirect-causes-system-threading-threadabortexception)中进行了解释。

# android - 我如何回到我的 android 中的 gl 屏幕。我试图跳出并在我的代码中使用 xml 布局

> ID：14241602
> 
> 赞同：3
> 
> 时间：2013-01-09T16:19:47.093
> 
> 标签：android, android-layout

好的，我在这个网站上到处查看，但没有找到我的问题的答案。我正在尝试制作游戏，并且我需要从屏幕上获取用户信息。我已经完成了整个游戏，只需要这一部分继续前进。我正在从屏幕类转到 xml 布局，似乎无法回到我的屏幕类以移动到游戏的下一部分。使用布局似乎比我自己构建文本框更容易。这是我的代码。

```
import android.app.Activity;
import android.content.Intent;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;

import com.wright.knightsattack.framework.Game;
import com.wright.knightsattack.framework.gl.Camera2D;
import com.wright.knightsattack.framework.gl.SpriteBatcher;
import com.wright.knightsattack.framework.impl.GLScreen;
import com.wright.knightsattack.framework.math.Vector2;

public class NewCharacterInfo extends GLScreen
{
EditText Name, Strength, Dexterity, Agility, Intelligence, Charisma;
RadioButton Sex;
int intStrength, intDexterity, intAgility, intIntelligence, intCharisma;
Button Done_BTN;
Camera2D guiCam;
SpriteBatcher batcher;
Vector2 animPoint;
Game gameIn;
Activity activity;
Intent gameIntent;
Boolean enterInfo = true;

public NewCharacterInfo(Game game)
{
    super(game);
    gameIn = game;
    activity = (Activity) game;
}

@Override
public void resume()
{

}

@Override
public void update(float deltaTime)
{

    if (enterInfo == true)
    {
        runInfo();
    } else
    {

        newScreen();
        return;
    }
}

public void runInfo()
{
    activity.runOnUiThread(new Runnable()
    {
        public void run()
        {

            activity.setContentView(R.layout.new_character_info);

            Name = (EditText) activity.findViewById(R.id.editTextName);
            Sex = (RadioButton) activity.findViewById(R.id.radioButton1);
            Strength = (EditText) activity.findViewById (R.id.editTextStrength);
            Dexterity = (EditText) activity.findViewById(R.id.editTextDexterity);
            Agility = (EditText) activity.findViewById(R.id.editTextAgility);
            Intelligence = (EditText) activity.findViewById(R.id.editTextIntelligence);
            Charisma = (EditText) activity.findViewById(R.id.editTextCharisma);

            Done_BTN = (Button) activity.findViewById(R.id.done);
            Done_BTN.setOnClickListener(new OnClickListener()
            {
                public void onClick(View v)
                {
                    Log.e("Click check", "Inside");
                    if (v.getId() == R.id.done)
                    {
                        Log.e("Click check", "Try to change screen");
                        intStrength = Integer.parseInt(Strength.getText().toString());
                        intDexterity = Integer.parseInt(Dexterity.getText().toString());
                        intAgility = Integer.parseInt(Agility.getText().toString());
                        intIntelligence = Integer.parseInt(Intelligence.getText().toString());
                        intCharisma = Integer.parseInt(Charisma.getText().toString());
                        Settings.addCharacterStats(Name.getText().toString(), Sex.getText().toString(), 0, 0, 0, 0, 200, intStrength, intIntelligence, intDexterity, intAgility, intCharisma, 0, 0, 0, 0, 0, 0);

                        // gameIntent = activity.getIntent();
                        enterInfo = false;
                        update(0);
                        return;
                    }

                }
            });
        }

    });
}

public void newScreen()
{

    Settings.save(gameIn.getFileIO());
    gameIn.setScreen(new SplashHelmScreen(gameIn));
    Log.e("", "check" + gameIn);
    return;
}

@Override
public void present(float deltaTime)
{

}

@Override
public void pause()
{

}

@Override
public void dispose()
{

}
} 
```

将弹出 xml 屏幕，我可以在所有文本框中输入信息，但是当点击完成按钮时，它会给出错误，这是我从 logcat 得到的错误。

```
01-09 11:04:38.038: E/libEGL(1743): call to OpenGL ES API with no current context (logged once per thread) 
```

感谢您的帮助，我真的很感激我已经为此苦苦挣扎了几天。

没关系，我修复了它，我刚刚创建了一个新意图，然后当输入信息时，我在 Activity 上调用 finish() 并跳转到我当前的屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T12:25:22.570

如果您想返回主屏幕，您有两种可能性：

```
@Override
public void onBackPressed() { 
```

}

或者如果你有一个按钮：

按钮 btn =(Button)findViewById(R.id.btn); btn.setonClickListener(this);

@Override public void onClick(View v) {

```
 switch (v.getId()) { 
```

案例 R.id.btn: kill_activity(); 休息;

}}

无效杀戮活动（）{

结束（）;

}

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T06:39:39.267

没关系，我修复了它，我刚刚创建了一个新意图，然后当输入信息时，我在 Activity 上调用 finish() 并跳转到我当前的屏幕。

```
public void newScreen()
{
    game = MainMenuScreen.globalGame;
    Settings.save(game.getFileIO());
    game.setScreen(new SplashHelmScreen(game));
    this.finish();
    Log.e("", "check" + game);
    return;
} 
```

这直接跳回到我的游戏。对不起，我很久以前回答过这个问题，没想到我必须下来回答这个问题。以为更新解决了这个问题。感谢所有试图提供帮助的人！！

# c# - 如何询问用户写入文件的权限？

> ID：14241604
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:19:53.770
> 
> 标签：c#

> **可能重复：**
> [请求 UAC 海拔 c#](https://stackoverflow.com/questions/7263918/request-uac-elevation-c-sharp)

在我的应用程序中，我需要将文件保存到程序目录，这需要管理员权限。如何提示用户请求此类权限，例如使用通常的窗口对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:41:21.220

如果您不知道如何设置这些权限，您可能需要查看这篇文章：

[设置管理权限 C#](https://stackoverflow.com/questions/3583501/c-net-acquire-administrator-rights)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T16:25:38.040

如果我正确理解您的问题，那就是如何请求许可，所以我假设您已经了解如何设置它。这是您可以要求是/否的一种方式。

```
DialogResult result = MessageBox.Show("The question", "Title", MessageBoxButtons.YesNo);
if (result == DialogResult.Yes)
{
    //set the admin rights
} 
else if (result == DialogResult.No)
{
    //do something else
} 
```

# jquery-mobile - 我在jquery mobile中的数字文本框一键增加很多

> ID：14241605
> 
> 赞同：1
> 
> 时间：2013-01-09T16:19:56.593
> 
> 标签：jquery-mobile, razor, textbox

我制作了一个 jquery 手机号码框，可以让人们向上或向下按以增加​​文本框中的数字：

```
<input type="number" name="IdeaValue" id="IdeaValue" value="@item.Value" class="ui-input-text ui-body-c ui-corner-all ui-shadow-inset" style = "width: 100px; float: left;"/> 
```

但是，当我单击向上或向下按钮时，数字增加得非常快，而不是每次单击增加一个数字。有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:41:17.447

你需要这样的东西：

```
$('#btUp').click(function(){
    $('#IdeaValue').value($('#IdeaValue').value() + 1);
});
$('#btDown').click(function(){
    $('#IdeaValue').value($('#IdeaValue').value() - 1);
}); 
```

**注意**：我使用向上按钮单击事件来增加“输入”值，并使用向下按钮单击事件来减少它。

# asp.net - 为什么这段代码不会从表中删除行？

> ID：14241606
> 
> 赞同：0
> 
> 时间：2013-01-09T16:19:59.373
> 
> 标签：asp.net, entity-framework, entity-framework-4, linq-to-entities

我有以下代码：

```
Using dbContext As pbu_housingEntities = New pbu_housingEntities
        ' First, delete all current records associated with the specified semester.
        Dim delete_old = (From p In dbContext.Residents _
                          Where p.semester = txtDestSemester.Text _
                          Where p.year = txtDestYear.Text _
                          Select p)
        dbContext.Residents.DeleteObject(delete_old)
        dbContext.SaveChanges()
End Using 
```

但它不起作用。它会引发无法转换类型为“System.Data.Objects.ObjectQuery”的对象错误。有什么想法吗？

我要做的就是获取具有指定条件的行列表，然后删除所有返回的行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:22:47.477

在`delete_old`可能超过 1 项。

添加一个`ToList()`并遍历每个条目并`DeleteObject`为每个枚举项调用该方法。

# css - Twitter Bootstrap - 图像类不适用？

> ID：14241607
> 
> 赞同：0
> 
> 时间：2013-01-09T16:20:06.920
> 
> 标签：css, image, twitter-bootstrap

我正在使用 Twitter Bootstrap 2.2.2 和最新版本的 Chrome。我正在阅读有关[图像](http://twitter.github.com/bootstrap/base-css.html#images)的信息，并决定在一些测试图像上尝试 img-rounded、-circle 和 -polaroid 类，看看它们会是什么样子。

问题是您可以从[这个示例页面](http://adambalan.com/WordPressDev/uncategorized/178)中看到，图像不是圆形的，不是圆形的，而且偏光片很差......

有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:46:19.713

我认为效果可以正常工作，只是看起来您使用的图像的侧面有一个厚厚的白色边框，这可能会使效果看起来好像不起作用。如果您使用 Chrome 的开发人员工具将页面背景设置为与白色不同的颜色，则会更加明显。

# java - AppEngine：无法从事务中的数据存储区读取持久数据

> ID：14241608
> 
> 赞同：0
> 
> 时间：2013-01-09T16:20:07.660
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore

我正在 Google AppEngine 上编写一个同步服务，但有些东西对我来说并不适用。我想要做的是同步一个实体项目（也许它需要被持久化，也许只是复制内容，谁知道），然后搜索一个项目类型的实体（可能与首先持久化的项目相同，但没有' t需要），然后用它来同步一个任务。所有这些都需要在事务中发生，因此如果任务同步失败，该项目也会被删除。

我写了几行代码来简单地测试和显示问题所在。此代码完美运行，并向我显示“找到项目”。

```
 User user = userDao.findAll().get(0);

    // Create a setup service...
    Project project = new Project();
    project.setName("TEST ABC");
    project.setLastUpdated(new Date());
    project.setUser(user);
    projectDao.persist(project);

    Project persistedProject = projectDao.find("TEST ABC", user);

    if (persistedProject == null) {
        System.out.println("Project not found...");
    } else {
        System.out.println("Project found!");
    } 
```

所以在这里我不使用事务。但是当我使用事务执行代码时：

```
 User user = userDao.findAll().get(0);

    Transaction tx = datastores.get().beginTransaction();

    // Create a setup service...
    Project project = new Project();
    project.setName("TEST ABC");
    project.setLastUpdated(new Date());
    project.setUser(user);
    projectDao.persist(project);

    Project persistedProject = projectDao.find("TEST ABC", user);

    if (persistedProject == null) {
        System.out.println("Project not found...");
        tx.rollback();
    } else {
        System.out.println("Project found!");
        tx.commit();
    } 
```

我总是看到“找不到项目......”。那么我到底怎么才能读取我刚刚坚持但尚未提交的对象呢？

顺便说一句：我正在使用 twig-persist 2.0 RC1 和最新的 AE SDK (1.7)。

所以我的问题是如何读取已在同一事务中保存的数据..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:21:43.573

你不能。您应该重新阅读 GAE 交易文档。

简而言之：事务中的所有内容都获得了数据存储外观“快照”的一致视图，因此新的写入不会出现在查询中。

但是，您拥有持久化的项目对象，因此您应该使用它而不是查询一个。

如果您需要进行查询，则需要手动将其与您在事务中创建的实体“加入”。

# amazon-web-services - 用于检查 EC2 实例限制的 API？

> ID：14241609
> 
> 赞同：4
> 
> 时间：2013-01-09T16:20:13.743
> 
> 标签：amazon-web-services, amazon-ec2

我广泛使用 EC2 实例来测试分布式系统。不幸的是，有时我达到了运行实例的限制，导致整个部署失败。我发现了适当的异常，但我更愿意避免整个部署，而不是在启动多个实例后失败。为了避免这种情况，我想进行飞行前检查：

```
number_of_running_instances + number_of_required_instances <= instance_limit 
```

我可以轻松检查`number_of_running_instances`and `number_of_required_instances`，但找不到用于检查 的 API `instance_limit`。更糟糕的是，AWS 支持声称没有客户可见的 API：

[https://forums.aws.amazon.com/message.jspa?messageID=296314](https://forums.aws.amazon.com/message.jspa?messageID=296314)

此外，我不想假设限制是默认的，因为我们公司的一些 AWS 账户申请了更高的限制。

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-03-05T06:20:22.457

仅供参考，可以查询您的 AWS 账户限制，请参阅：[http ://alestic.com/2013/12/ec2-account-attributes](http://alestic.com/2013/12/ec2-account-attributes)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-16T17:03:14.507

您可以使用 amazon describe-account-attributes 获取对 aws 帐户的限制。

“aws ec2 描述帐户属性”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T17:42:34.043

不，没有办法做到这一点。但实际上没有必要这样做，因为捕获异常（并优雅地处理它）是一种更好的设计。在启动整个队列时，可能会出现许多问题：API 调用神秘地消失在虚空中，AWS 没有能力在请求的 AZ 中启动某种实例类型，实例和 EBS 卷在创建过程中可能会卡住，等等。

在部署 AWS 资源时可能会出现大量未知问题，因此您应该计划定期发生的问题。您的代码需要预见到这一点并解决它。

值得注意的是，您正在使用 CloudFormation 模板进行配置，与此相关的大部分痛苦都得到了缓解。所有资源的回滚都会在出错时自动执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-19T10:26:48.013

**Boto 中的示例**

```
from boto.ec2.connection import EC2Connection

__author__ = 'uva'

conn = EC2Connection(aws_secret_access_key="+secret_key",
                     aws_access_key_id="access_key")
attributes = conn.describe_account_attributes()
for attribute in attributes:
    print(attribute.attribute_name + " : " + str(attribute.attribute_values)) 
```

**样本响应**

```
vpc-max-security-groups-per-interface : [u'5']
max-instances : [u'20']
supported-platforms : [u'VPC']
default-vpc : [u'vpc-e1e73484']
max-elastic-ips : [u'5']
vpc-max-elastic-ips : [u'5'] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-03T11:00:41.083

您可以使用[Trusted Advisor](https://aws.amazon.com/premiumsupport/trustedadvisor)。这是[Boto API](http://boto.readthedocs.org/en/latest/ref/support.html)的链接。对于每项服务，您可以获得限制名称、区域、限制金额和当前使用情况。您可以编写一个小包装器并获取所需的值。

如果您登录到您的 AWS 账户，此[链接](https://console.aws.amazon.com/trustedadvisor/home?#/dashboard)应向您显示有关当前限制和服务使用情况的所有详细信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-10T18:29:10.063

看起来 AWS 已经添加了这个，虽然奇怪的是它是“gamelift”API 的一部分，而不是在“ec2”下。

*   [描述-ec2-实例限制](https://docs.aws.amazon.com/cli/latest/reference/gamelift/describe-ec2-instance-limits.html)

尽管我从未使用过 GameLift，但输出确实与我的 console.aws.amazon.com -> EC2 -> 限制网页中的内容相匹配。

例子：

```
$ aws gamelift describe-ec2-instance-limits --ec2-instance-type t2.micro
{
    "EC2InstanceLimits": [
        {
            "EC2InstanceType": "t2.micro",
            "CurrentInstances": 0,
            "InstanceLimit": 20
        }
    ]
} 
```

（它输出所有实例类型没有`--ec2-instance-type`选项）

# javascript - Joomla 2.5.7 剥离代码

> ID：14241610
> 
> 赞同：1
> 
> 时间：2013-01-09T16:20:17.293
> 
> 标签：javascript, image, refresh, joomla2.5

我在 Joomla 的一篇文章中使用了 JavaScript，它应该在该页面上每 5 秒自动加载一次图像。最初我无法添加 JavaScript，现在在其他用户的帮助下已解决。

我现在有一个新问题。当 JavaScript 应该刷新图像时，它无法加载图像。我没有收到损坏的路径符号，但也没有显示图像。我附上了我正在使用的代码。

```
 <script type="text/javascript">// <![CDATA[
     var picPaths = ['C:/wamp/www/joomla1/images/snapshots/cal01.jpeg'];
 var curPic = -1;
 var imgO = new Array();
 for (i = 0; i < picPaths.length; i++) {
    imgO[i] = new Image();
    imgO[i].src = picPaths[i];
 }
 function swapImage() {
    curPic = (++curPic > picPaths.length - 1) ? 0 : curPic;
    imgCont.src = imgO[curPic].src;
    setTimeout(swapImage, 5000);
 }
 window.onload = function() {
    imgCont = document.getElementById('alpana');
    swapImage();
 }
     // ]]></script> 
```

/* 这是一个位置为 akrudi 的模块，我在这样的文章中调用它 */

```
 {loadposition akurdi}
     <p><img id="alpana" src="" height="250" width="250" />
     </p> 
```

**第二个代码**

```
 function refresh() 
   {         
var imgsrc = document.getElementById("pic");
alert("message box"+imgsrc);
  document.images["pic"].src = "images/CB1.jpeg" + "?" + new Date().getTime();
  }
  window.onload=function(){
  setInterval(function(){refresh()}, 5000 ); //set interval onload just one time 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:24:04.900

我不知道您之前是如何尝试将 Javascript 添加到 Joomla 文章中的，但请尝试安装[Sourcerer](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/5051)插件，该插件允许您将自定义 javascript、php 和许多其他语言添加到您的 Joomla 文章中。

**更新：**

我刚刚测试了将 javascript 添加到模块并将模块嵌入到文章中，以查看 javascript 是否确实有效并且确实有效。**不需要**Sourcerer 。您可以简单地将以下代码添加到模块的**default.php**或**mod_xxx.php**中：

```
$document = JFactory::getDocument();    
$js = '$(document).ready(function(){ 
          //more javascript in here
       });';
$document->addScriptDeclaration($js); 
```

然后像往常一样嵌入模块，使用`{loadposition xxx}`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:42:15.620

由于您已经在使用 JCE，因此不需要任何模块或插件来完成这项工作。在 JCE > Editor Profiles 中选择您通常使用的配置文件，然后单击 Editor Parameters 选项卡，然后单击其中的 Advanced 选项卡。您应该会看到允许 Javascript 的设置。打开它，它将允许您在 HTML 视图中插入 Javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T11:14:16.547

你为什么不把它变成一个变量？看看非常简单的图片库，看看他们是如何做到的。在文章中插入图像和幻灯片放映已经完成了一百万次，您没有理由重新发明，采用现有插件并对其进行修改。

# ios - UIDeviceOrientation 通知

> ID：14241616
> 
> 赞同：1
> 
> 时间：2013-01-09T16:20:48.713
> 
> 标签：ios, objective-c, uideviceorientation

为了接收`UIDeviceOrientation`更改通知，必须做两件事：

1.  打电话`beginGeneratingDeviceOrientationNotifications`_`UIDevice`
2.  注册通知。

这是我的问题：

假设我有两个视图控制器想要接收这些通知，第一个调用`beginGeneratingDeviceOrientationNotifications`和注册，然后第二个做同样的事情。现在我的第一个 VC 卸载和注销并调用`endGeneratingDeviceOrientationNotifications`. 即使第一个 VC “关闭它们”，第二个 VC 是否会继续收到这些通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:26:26.030

# sql - 使用外部连接检索与多对多相关的两个表的 SQL 查询

> ID：14241618
> 
> 赞同：1
> 
> 时间：2013-01-09T16:20:52.717
> 
> 标签：sql, select, join, left-join

今天早上我的 SQL 感觉不起作用，我需要一些帮助。

我有 3 个主表，它们之间有两个用于多对多关系的中间表：`user`、`users_groups`、`group`、`groups_permissions`和`permission`. 每个`permission`都有一个`name`。

我想写一个查询，给定一个权限名称和一个用户 ID，*如果权限存在则*返回相应的权限 ID ，如果用户有权限，则返回一个值，否则为 NULL。也就是说，我想知道权限是否存在以及用户是否在一个查询中具有权限。输出应如下所示：

```
 |has_permission | does_not_have_permission
-------------------------------------------------------------------
permission_exists        |     (1,1)     |        (1,NULL)
permission_does_not_exist|      N/A      |        [0 rows] 
```

现在，我能想到的查询看起来像这样：

```
SELECT p.id, ug.user_id
FROM permission AS p LEFT JOIN
     groups_permissions AS gp ON p.id = gp.permission_id LEFT JOIN
     group AS g ON gp.group_id = g.id LEFT JOIN
     users_groups AS ug ON ug.group_id = g.id AND ug.user_id = ?
WHERE p.name = ?; 
```

问题是在某些情况下这会返回不止一行。我想我可以在它上面扔一个`ORDER BY u.id DESC`和一个`LIMIT 1`，但是这样会优化吗？我需要什么索引？是否有另一种方法可以编写此查询来快速轻松地获取我正在寻找的信息？

编辑：对于那些好奇的人，我使用的是 PostgreSQL，但如果可能的话，我希望查询与 db 无关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:53:27.683

会为您的查询添加`distinct`工作吗？

```
SELECT distinct p.id, ug.user_id
FROM permission AS p LEFT JOIN
     groups_permissions AS gp ON p.id = gp.permission_id LEFT JOIN
     group AS g ON gp.group_id = g.id LEFT JOIN
     users_groups AS ug ON ug.group_id = g.id AND ug.user_id = ?
WHERE permission.name = ?; 
```

我认为问题在于某些用户从不同的组成员中获得了相同的权限。

您评论中的问题可以通过聚合来解决：

```
SELECT p.id, max(ug.id),
       (case when max(ug.id) is null then 'DENIED' else 'ALLOWED' end)
FROM permission AS p LEFT JOIN
     groups_permissions AS gp ON p.id = gp.permission_id LEFT JOIN
     group AS g ON gp.group_id = g.id LEFT JOIN
     users_groups AS ug ON ug.group_id = g.id AND ug.user_id = ?
WHERE permission.name = ?
group by ug.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:31:41.280

```
SELECT p.id, u.user_id
FROM permission AS p 
  LEFT JOIN
    user AS u 
      ON  u.user_id = ? 
      AND EXISTS
          ( SELECT *
            FROM users_groups AS ug 
              JOIN groups_permissions AS gp 
                ON gp.group_id = ug.group_id
            WHERE p.id = gp.permission_id 
              AND u.user_id = ug.user_id
          )
WHERE p.name = ? ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:33:03.630

抱歉 - 刚刚看到原始问题底部的 PostreSQL 和 db 不可知句。此答案可能仅适用于 MS SQL Server。

如果用户属于具有相同权限的多个组，您可能会得到多行。在这种情况下，您需要聚合它们。像这样的东西会起作用吗？

```
WITH PermissionsForUser AS
(
SELECT
  p.id,
  u.id
FROM permissions p
LEFT JOIN groups_permissions gp
ON p.id = gp.permission_id
LEFT JOIN users_groups ug
ON ug.group_id = gp.group_id
LEFT JOIN users u
ON ug.user_id = u.id
WHERE p.name = @PermissionId
AND u.id = @UserId
)
SELECT
  MAX(p.id) AS permission_id
  MAX(u.id) AS user_id
FROM PermissionsForUser; 
```

# mysql - mysql left join 语句运行缓慢

> ID：14241619
> 
> 赞同：0
> 
> 时间：2013-01-09T16:20:58.050
> 
> 标签：mysql, performance, optimization, left-join

使用左连接的非常慢的 mysql 查询存在问题。

```
SELECT ip,T1.ipaddr,host,referrer,agent,page,url,thedate,DV,PV,notes
FROM visits_temp AS T1
LEFT JOIN (
    SELECT ipaddr,COUNT(DISTINCT LEFT(thedate,10)) AS DV
    FROM visits GROUP BY ipaddr
) AS T2 ON T1.ipaddr = T2.ipaddr
LEFT JOIN (
    SELECT ipaddr,notes
    FROM topvisitors
) As T3 ON T3.ipaddr = T1.ipaddr
LEFT JOIN (
    SELECT ipaddr,COUNT(ip) AS PV
    FROM visits
    GROUP BY ipaddr
) AS T4 ON T4.ipaddr = T1.ipaddr
WHERE referrer = '' AND
    thedate BETWEEN '2013-01-07 00:00:00' AND '2013-01-09 23:59:59'
GROUP BY T1.ip
ORDER BY thedate desc 
```

此处的目标是获取网站的所有直接访问者流量，而不是 LEFT JOINS 进行查找以提供访问的总天数 (DV) 和查看的总页面数 (PV)。访问表目前有大约 290 万条记录，并且 ipaddr 和 date 字段已被索引。此查询需要近 90 秒才能完成。

```
SELECT ipaddr,COUNT(DISTINCT LEFT(thedate,10)) AS DV FROM visits GROUP BY ipaddr 
```

或者

```
SELECT ipaddr,COUNT(ip) AS PV FROM visits GROUP BY ipaddr 
```

LEFT JOINS 中的各个 select 语句在自行运行时将在 0.03 秒内完成。在这种情况下，也许 LEFT JOIN 不是正确的方法，我愿意接受替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:29:43.817

这 4 个子查询可能会减慢速度。

这应该与您的查询相同，只是更快：

```
SELECT ip,T1.ipaddr,host,referrer,agent,page,url,thedate,DV,PV,notes
FROM visits_temp AS T1
LEFT JOIN (
    SELECT ipaddr, COUNT(DISTINCT LEFT(thedate,10)) AS DV, COUNT(ip) AS PV
    FROM visits
    GROUP BY ipaddr
) AS T2 ON T1.ipaddr = T2.ipaddr
LEFT JOIN topvisitors T3 ON T3.ipaddr = T1.ipaddr
WHERE referrer = '' AND
    thedate BETWEEN '2013-01-07 00:00:00' AND '2013-01-09 23:59:59'
GROUP BY T1.ip
ORDER BY thedate desc 
```

如果保证 的每一行在and`T1`中都有匹配的行，您可以将您的替换为，这应该允许优化器做更多的事情，这也可以加快速度（尽管有例外）。`T2``T3``LEFT JOIN``JOIN`

我无法想象这会返回所需的结果，它将在 上分组`ipaddr`，但随后只为每个返回（任何）这些分组中的 1 个`ip`。MySQL 不会阻止这一点。如果您详细说明您的要求（就您使用的字段/表格而言），解决这个问题应该不会太难（尽管这在技术上可能属于不同的问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:45:46.873

您在 where 子句中使用了 referrer 和 thedate。在visits_temp 表中的这两个字段上创建复合索引可能会提高性能。

确保在 topvisitors 表中的 ipaddr 字段上也有索引。

# algorithm - Diffe Hellman 和 Rivest Shamir 联锁协议？

> ID：14241627
> 
> 赞同：0
> 
> 时间：2013-01-09T16:21:43.907
> 
> 标签：algorithm, interlocked

因此，Diffe Hellman 受到 MITM 攻击，两方交换：

> X = g^x mod n 和 Y = g^y mod n。

现在大概可以通过使用 Rivest Shamir 互锁协议来防止这种情况，我们将消息分成两部分并逐位交换它们。我想知道的是我们如何将 g^x mod n 分成两部分以便与 Rivest Shamir 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T00:34:04.697

你真的读过 Rivest 和 Shamir 的论文吗？它很好地解释了协议的用途及其设计的场景：

[http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.159.1673&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.159.1673&rep=rep1&type=pdf)

我看不出这对 Diffie-Hellman 非常适用，因为协议的重点是验证公钥而不是实际生成私钥。

如果您只是对实现 Diffie-Hellman 感兴趣，那么您需要为您的 DH 实现选择一个具体的组并对其元素进行位编码。在实践中，您实际上并没有使用组元素的直接位编码作为密钥，而是应用了一个随机提取器，它为您提供了一个位字符串，您将使用它作为您的密钥。

随机抽取器非常棘手，但最近有一些关于它们的论文，您可以通过 google 轻松找到它们。

# javascript - ajax 请求后脚本不再工作

> ID：14241631
> 
> 赞同：1
> 
> 时间：2013-01-09T16:22:01.887
> 
> 标签：javascript, jquery, ruby, ajax, sinatra

我通过 ajax 更新的页面上有一个表格。有一些脚本使用表格的内容。例如，其中一个使用表格上的“ `Check all / Uncheck all`”复选框来连接该表格上`check/uncheck`的其他复选框。

当我执行 ajax 请求时，它会返回几乎**相同**的表内容。至少，它**绝对是正确**的，不应该破坏脚本的功能。但是，在那之后，没有一个脚本不再起作用。为什么？

例如，这里是 *.js 文件中的 javascript 代码的一部分：

```
$(document).ready(function() {
  $("#check-all").change(function(){
      $(".my_table input[type=checkbox]").prop('checked', this.checked);
    });
}); 
```

在执行 ajax 之前，请求一切正常。请注意，ajax 不返回任何 javascript 代码，所有 javascript 代码都位于外部 js 文件中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:24:20.690

因为您使用的是在 document.ready 上添加的事件处理程序，并且在它之后添加的任何内容都不会包含事件。

jQuery 1.7 之后，就可以使用了。

```
$(document).on("change", "#check-all", function(){ ... }); 
```

另一种选择是保留您所拥有的，只需在更新页面内容时调用代码。

```
function addChangeEvent() {
  $("#check-all").change(function(){
      $(".my_table input[type=checkbox]").prop('checked', this.checked);
    });
}

$(document).ready(function() {
    addChangeEvent();
}); 
```

和你的 Ajax 调用

```
$("#foo").load("xxx.html", function(){ addChangeEvent()l }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:25:15.343

该事件附加到旧页面内容。如果您替换该内容，事件就会随之发生。

相反，请尝试使用`$("#check-all").on("change",function() {...});`我不是 jQuery 专家，但我相信即使元素发生更改，事件处理程序也会持续存在。

# c# - 如何在特定线程上异步调用方法？

> ID：14241633
> 
> 赞同：4
> 
> 时间：2013-01-09T16:22:08.790
> 
> 标签：c#, multithreading

从线程 AI 希望`MethodA()`异步调用（这样它不会阻塞线程 A）在线程 B 上运行我已经启动的特定线程，这样它会中断线程 B 正在做的事情。

这是否可能无需主动轮询`MethodA()`线程 B 中的呼叫请求？

**编辑：**更具体地说，我希望所有调用都`MethodA()`在线程 B 上。

**编辑 2：**两个线程都不是 UI 线程。虽然我知道线程 B 正在运行，但如果它不/不抛出异常，能够返回 false 会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:41:53.510

不创建线程 B 工作线程的特定实现是不可能的。线程 B 工作者应该是类似无限循环或其他信号机制的东西，如`EventWaitHandle`. 在循环的每次迭代中，线程 B 工作人员应该检查一些可以由另一个线程填充的委托队列。

# ruby - 为什么guard几乎100％使用cpu？

> ID：14241635
> 
> 赞同：4
> 
> 时间：2013-01-09T16:22:14.747
> 
> 标签：ruby, ruby-on-rails-3, guard

我已经开始使用[警卫](https://github.com/guard/guard)来监视我的测试更改，但是使用了太多的 CPU（在 CPU 的 80%~95% 之间）。我将它与所有这些保护宝石结合使用

```
gem "guard-rspec"
gem 'guard-livereload'
gem 'guard-rails-assets'
gem 'guard-bundler' 
```

我虽然可能只是我的笔记本电脑，但其他同事在他们的新笔记本电脑（比我的新）中使用它们，并且一直使用大约 60~70% 的 cpu。我试图在没有所有其他宝石的情况下保持警卫，但结果是一样的。

有没有办法配置它并最小化它们的 cpu 使用率？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T09:00:49.263

是的，您可以通过以下方式调整 Guard 以提高效率

1.  启用 OS 文件系统通知，如[高效文件系统处理](https://github.com/guard/guard/wiki/Efficient-Filesystem-Handling)中所述。
2.  [使用忽略](https://github.com/guard/guard#ignore)DSL 方法忽略不感兴趣的目录。
3.  [使用过滤器](https://github.com/guard/guard#ignore)DSL 方法过滤对感兴趣的文件类型的更改。

在我的 2012 27" iMac 上观看带有许多活动 Guard 插件的大型 Rails 项目时，Guard 进程在侦听文件更改时占用 CPU 时间的 0.01%。

# python - Python - Assigning and Changing a List from a Dictionary

> ID：14241636
> 
> 赞同：1
> 
> 时间：2013-01-09T16:22:20.193
> 
> 标签：python, list, dictionary, python-2.7

I noticed something odd while helping a collegue with his Python 2.7 script. He has a dictionary with lists as the dictionary values. He was assigning the dictionary values to a new variable and then performing some edits to the list. The odd part that got me was the list changes in the new variable were also being reflected in the dictionary. I repeated a simple example in the shell and I posted it below. I also tried the same thing but with a string as the dictionary value, but to no effect. Is there something I am missing here or is this some sort of bug? Thanks.

```
>>> dict1 = {}
>>> dict1['foo'] = [1,2,3]
>>> print dict1     
 {'foo': [1, 2, 3]}    
>>> bar = dict1['foo']
>>> bar.append(4)
>>> print dict1    
 {'foo': [1, 2, 3, 4]} 
```

In the example above I would have expected the 4 to be appended to *bar* and the value of 'foo' to remain [1,2,3].

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:23:18.243

您不会获得列表的副本，而是获得对列表本身的引用。由于列表是可变的，因此该行为完全是意料之中的。

将此与使用指向列表的第二个变量进行比较：

```
>>> a = [1, 2, 3]
>>> b = a
>>> b.append(4)
>>> a
[1, 2, 3, 4] 
```

如果您想拥有一个独立的列表，请制作一份副本：

```
>>> c = list(a)
>>> c.append(5)
>>> c
[1, 2, 3, 4, 5]
>>> a
[1, 2, 3, 4] 
```

制作副本的另一种方法是使用完整列表切片：

```
>>> c = a[:] 
```

# database - 将代码与数据库匹配

> ID：14241639
> 
> 赞同：0
> 
> 时间：2013-01-09T16:22:29.037
> 
> 标签：database, redirect, input

如果没有意义，我提前道歉。我需要一个学校项目的帮助。

有没有办法让代码根据输入的值搜索数据库？如果输入的值与数据库中的单个短语匹配，它会将用户发送到另一个页面，但如果不匹配，则会出现警告消息。但是在一个代码与数据库中的一个值匹配之后，使它不能再次使用该代码？

对于那些要求更多细节的人来说，这是我能描述的最好的。基本上，我想要做的是组合一个程序，该程序的工作方式与您可以在亚马逊上找到的礼品卡兑换商类似，但代码不是兑换钱，而是将人重定向到另一个具有独家内容的网页。

我希望这能解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:34:55.813

您可以将一次性密码存储在表格中。当用户输入一次性密码之一时，他（=他/她的网页）获得OK继续，并且一次性密码从表中删除。

另一种方法是第二个表，它记录给定的 IP 地址已使用一次性密码。这将允许具有不同 IP 地址的其他用户登录。

# networking - mac地址在互联网上的实际用途是什么？

> ID：14241640
> 
> 赞同：0
> 
> 时间：2013-01-09T16:22:31.800
> 
> 标签：networking, ip, ethernet, icmp, spoofing

我正在学习欺骗攻击，现在对 IP 和 MAC 地址感到困惑。我了解到，从计算机发送的每个数据包（TCP、ICMP 等）都有一个以太网标头，其中包含源和目标的 MAC 地址（希望我是对的）。mac地址是否与计算机接受或拒绝来自互联网的数据包有关？例如考虑一种情况：

我正在向 google.com 发送一个欺骗数据包（一个 HTTP GET 请求），其中我的目标 IP 地址作为 IP 源和端口 12345。

因为我不知道目标的mac地址，所以它是我作为mac源的数据包以太网头上的mac地址。

google.com 将在端口 12345 上向目标 IP 发送 HTTP 响应，如果目标在端口 12345 上侦听，它会收到该数据包吗？还是会因为虚假的mac地址而被拒绝？

同样的情况也适用于 ICMP 泛洪攻击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:24:20.147

MAC 地址是硬件地址。

如果我将数据包发送到 IP 地址，则在网络级别，数据包将被路由到 MAC（硬件）地址。这通常是*通往*给定 IP 地址的硬件设备。因此，通过 Internet 发送的数据包将通过各种设备进行路由，并且在每个阶段，数据包都会被定向到不同的 MAC 地址。

因此，MAC 地址可以识别特定设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:27:59.727

如果您使用 Wireshark 看一下，您会发现除了发送到 google.com 的 HTTP 之外，还有更多幕后工作。您应该会看到某种 DNS 请求，然后是 ARP 请求（如果使用 IPv4 ...否则使用邻居发现）。

DNS 请求将为您提供与 google.com 主机名关联的 IP，然后 ARP 请求将为您提供与特定 IP 地址关联的 MAC 地址。

尽管网络拓扑结构的复杂性增加了，例如添加了路由器、网关和代理......这不会像上面所说的那么清楚。

# python - 为 Django 设置 SQLite3 时出现错误配置的数据库错误

> ID：14241642
> 
> 赞同：1
> 
> 时间：2013-01-09T16:22:36.823
> 
> 标签：python, django, ubuntu, django-models, python-2.7

我有 Ubuntu 12.10 并在上面安装了 Django。我正在尝试按照[http://www.djangoproject.com](http://www.djangoproject.com)上的教程进行操作。我正处于运行`python manage.py syncdb`命令的位置。下面是回溯。

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/usr/local/lib/python2.7/dist-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/sqlite3/base.py", line 288, in _cursor
    self._sqlite_create_connection()
  File "/usr/local/lib/python2.7/dist-packages/django/db/backends/sqlite3/base.py", line 257, in _sqlite_create_connection
    raise ImproperlyConfigured("Please fill out the database NAME in the settings module before using the database.")
django.core.exceptions.ImproperlyConfigured: Please fill out the database NAME in the settings module before using the database. 
```

以下是我的 settings.py 文件的摘录：

```
DATABASES = {
'default': {
    'ENGINE': 'django.db.backends.sqlite3', 'sqlite3'# Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
    'NAME': '',                      # Or path to database file if using sqlite3.
    'USER': '',                      # Not used with sqlite3.
   'PASSWORD': '',                  # Not used with sqlite3.
    'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
    'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
}
} 
```

我做了很多谷歌搜索，并被告知对于 NAME 字段，输入数据库文件的绝对路径。什么是数据库文件，它位于何处？我知道我有`sqlite3`。但是，我在任何地方都找不到任何`.db`文件。我查看的另一个资源告诉我只需输入任何路径。当我这样做时，我得到一个`Cannot open database`错误。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:34:40.527

您需要向 django 提供您希望它创建数据库文件的位置 - 该位置**需要可由**运行的用户`./manage.py syncdb`（您）写入。

例如，您可以使用：

```
'NAME': '~/my_test_db.db', 
```

* * *

在开发中，通常使用相对于您的`settings.py`文件的位置：

```
from os import path

SETTINGS_ROOT = path.dirname(path.realpath(__file__)) # Folder where settings.py is
PROJECT_ROOT = path.normpath(path.join(SETTINGS_ROOT, '..')) # Django 1.4 project structure

...

    'NAME': path.join(PROJECT_ROOT, 'project.db'), 
```

* * *

在旁注中，您的设置文件中似乎有错字：

```
'ENGINE': 'django.db.backends.sqlite3', 'sqlite3' 
```

应该读：

```
'ENGINE': 'django.db.backends.sqlite3',' 
```

# facebook - 有时会在调试后获取页面信息

> ID：14241643
> 
> 赞同：1
> 
> 时间：2013-01-09T16:22:46.433
> 
> 标签：facebook, debugging

这很奇怪。我有一个包含多个博客的页面（自制，没有 wordpress）。“有时”会发生，当我尝试分享博客文章时，facebook 窗口似乎无法从我的博客中获取数据。因此，Facebook 窗口中没有显示图片、描述或标题。这可能每 20 个帖子发生 1 次。很奇怪吧？

og 标签看起来不错。我已经将工作帖子的 og 标签与失败的标签进行了比较。我看不出有什么区别。我的意思是 og 标签中的数据有一些特别之处。

最奇怪的是我然后尝试查看调试器。我去这里：http: [//developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

然后我粘贴无法获取信息的帖子的网址。好吧，我做完这一步后，我回到帖子，当我点击分享按钮时，数据被正确提取了！！！有人遇到过同样的问题吗？

# image - 如何存储和读取灰度图像 - MATLAB

> ID：14241646
> 
> 赞同：0
> 
> 时间：2013-01-09T16:22:51.423
> 
> 标签：image, matlab, scale, grayscale

我目前正在使用 MATLAB 研究一些图像处理算法，它需要加载目录中的图像并将其转换为灰度。经过一些其他处理后，图像中的所有像素的值都是 0 或 255。然后我使用以下方法存储图像：

```
// temp is of type double
imwrite(temp,'FAST_tree_test_image_1_gray_matlab.jpg'); 
```

之后，我使用以下方法重新加载图像：

```
// image is not defined before hand; its automatically set to type UINT8
image = imread('FAST_tree_test_image_1_gray_matlab.jpg'); 
```

当我用变量编辑器查看图像的值时，值是不同的.. 几乎所有 255 个值都变成了 252，许多像素在存储图像之前是 0，变成了 2..

为什么会这样？是关于格式化的吗？我该如何解决这个问题？如果我必须在 Visual Studio 中使用 OpenCv 加载此图像，值将如何变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T04:14:31.263

这是正常的，因为您以 JPEG 格式保存，该格式使用有损压缩，因此您得到的图像非常相似，但添加了一些噪声（这就是颜色计数比 2 种原始颜色多一点的原因）。

我建议您将图像保存为 PNG 格式（它使用无损压缩并且可以获得良好的压缩比）。

# database - 巩固 Django South Migrations

> ID：14241648
> 
> 赞同：6
> 
> 时间：2013-01-09T16:23:03.187
> 
> 标签：database, django, django-south

在我的项目的初始阶段，我对模型进行了很多更改，因此我最终为我的应用程序生成了很多南迁移。在去我的生产服务器执行迁移之前，是否可以以任何方式整合它们，这样我就不会为每个应用程序进行一百万次迁移？如果是这样，我将如何去做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:25:36.400

您始终可以删除现有迁移并[创建一个新的“初始”迁移](http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app)。

为此，您需要：

1.  删除应用程序的迁移文件（完全删除文件夹）
2.  跑`./manage.py convert_to_south myapp`

这将为您留下与您的应用程序状态当前状态相对应的单个迁移。

* * *

或者，您始终可以将最新的迁移打包在一起：

1.  删除要合并的迁移文件（仅当它们是最新的一次）
2.  跑`./manage.py schemamigration myapp`

这将创建一个与您删除的迁移相对应的新迁移。

* * *

这两个都可能会弄乱您的开发数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T13:40:20.303

由于这是一个开发环境，我就是这样做的（使用 SQLite，其他 SQL 服务器见下文）：

1.  做所有的改变，让迁移文件堆积起来。不向 VCS 提交迁移文件
2.  完成后，删除所有新的迁移文件
3.  重命名数据库
4.  运行 manage.py 迁移。这将创建数据库结构，就像您对其进行任何更改之前一样。
5.  运行 manage.py makemigrations。这将创建反映您当前状态的必要迁移
6.  移回已经具有最终结构和数据的原始数据库
7.  提交迁移文件

When using "proper" SQL servers, just keep two databases: production and development. Change project settings to point to production database instead of renaming in step 3\. Also, you can skip step 4.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-10T02:48:22.167

Make Sure you have your existing migrations migrated to db. And then delete all migrations available for a particular app and run

python manage.py makemigrations

*   you will see your migrations being consolidated into a single file named 000initial.py

# winapi - 在 Windows 7 任务栏“跳转列表”中自定义默认任务栏任务

> ID：14241650
> 
> 赞同：0
> 
> 时间：2013-01-09T16:23:12.967
> 
> 标签：winapi, windows-7, windows-shell, taskbar

我有一个程序 A.exe，它引导另一个进程 B.exe，将动态命令行参数传递给 B.exe。默认的 Windows 7 任务栏任务列表将提供启动另一个 B.exe 实例的选项作为其顶部选项。例如：[http](http://cl.ly/image/2C1X2g1A2K0k) ://cl.ly/image/2C1X2g1A2K0k顶部选项将打开命令窗口的另一个实例。

我希望通过 Win32/Shell API 自定义此默认任务列表，以便顶部选项实际上打开 A.exe 而不是 B.exe。这可能吗？这也适用于“固定”应用程序时；固定按钮应指向并加载 A.exe。因为 B.exe 需要由 A.exe 确定的动态命令行参数，所以这是一个要求。B.exe 不知道 A.exe。

如果这不可能，是否有任何其他解决方法（即外壳链接、快捷方式等）可用于获得此功能？还是有一种方法可以完全禁用该任务列表？

提前致谢。如果这个问题不清楚，请告诉我，我会更新描述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:01:35.647

此问题的一个很好的解决方案是使用快捷方式 (.lnk) 文件，并结合[MSDN 页面上解释](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686331%28v=vs.85%29.aspx%20%22as%20explained%20on%20the%20MSDN%20page)`STARTF_TITLEISLINKNAME`的标志。Windows 将使用快捷方式作为其任务栏任务项来启动应用程序的新实例（任务列表上的顶部条目）以及将应用程序固定到任务栏时。

例如，假设 B.lnk 指向 B.exe，我们可以放入 A.exe：

```
PROCESS_INFORMATION piProcInfo;
ZeroMemory(&piProcInfo, sizeof(PROCESS_INFORMATION));

STARTUPINFO siStartInfo;
ZeroMemory(&siStartInfo, sizeof(STARTUPINFO));
siStartInfo.cb = sizeof(STARTUPINFO);
siStartInfo.lpTitle = (LPTSTR)L"C:\Path\to\B.lnk";
siStartInfo.dwFlags = STARTF_TITLEISLINKNAME;

CreateProcess(NULL,
              (LPTSTR)L"C:\Path\to\B.exe",
              NULL,
              NULL,
              TRUE,
              CREATE_NO_WINDOW,
              NULL,
              NULL,
              &siStartInfo,
              &piProcInfo); 
```

希望对有类似利基用例的人有所帮助。

# monodevelop - 在monodevelop中，运行代码时如何设置工作目录

> ID：14241651
> 
> 赞同：3
> 
> 时间：2013-01-09T16:23:13.937
> 
> 标签：monodevelop

有谁知道是否可以设置工作目录来运行您在 monodevelop 中创建的应用程序？

该应用程序被写入 bin/Debug 目录，当您调试应用程序时，它似乎是工作目录。对于我的应用程序（我从 Windows 移植），它需要一个引用其他 XML 文件的 XML 配置文件，我使用的路径（在配置 xml 中）是相对路径（这是明智的 imo）。

IIRC Visual Studio 允许您在调试时设置工作目录，monodevelop 吗？我仔细查看了这些选项并试图寻找答案，但没有运气。

谢谢戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:13:38.283

据我所知，“运行”和“调试”模式使用相同的工作目录。

看看下面[的帖子](https://stackoverflow.com/questions/8186009/monodevelop-on-mac-how-to-i-set-the-working-directory-for-debugging/11051803#11051803)

# jquery - 在jQuery中调用图像路径

> ID：14241652
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:23:15.073
> 
> 标签：jquery, html

如果我的代码是这样布局的，

```
<div data-page-index="1" class="active">
    <img src="foo.png" />
</div> 
```

例如，如果我只有 div 类，如何将变量设置为图像路径

```
var image1 = $('.active').find(img); 
```

所以我可以在必要时附加该图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:27:54.523

`src`从图像的第一个实例中获取属性。

```
var image1 = $(".active").children("img").eq(0).attr("src"); 
```

[工作示例](http://jsfiddle.net/Caufc/)

# vb6 - visual basic 6.0 通讯端口代码错误

> ID：14241654
> 
> 赞同：0
> 
> 时间：2013-01-09T16:23:18.770
> 
> 标签：vb6, serial-port, client-server

我实际上是在尝试从中获取数据，`port1`但`Invalid port number`生成了错误。

代码是：

```
Private Sub Command1_Click()
    MsgBox ("The port is open " & MSComm1.PortOpen)
    If (MSComm1.PortOpen = False) Then
    MSComm1.PortOpen = True
    End If
    Command1.Enabled = False
    Command2.Enabled = True
End Sub

Private Sub Command2_Click()
    If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
    End If
    Command1.Enabled = True
    Command2.Enabled = False
End Sub

Private Sub Form_Load()
    With MSComm1
    .CommPort = 1
    .RThreshold = 1
    .RTSEnable = True
    .Settings = "9600,N,8,1"
    .InputLen = 127
    .SThreshold = 1
    End With
End Sub

Private Sub Form_Unload(Cancel As Integer)
    If (MSComm1.PortOpen = True) Then
    MSComm1.PortOpen = False
    End If
End Sub

Private Sub MSComm1_OnComm()
    Dim Buffer As String

    Select Case MSComm1.CommEvent
    Case comEvReceive
    'Text1.Text = " "
    Buffer = MSComm1.Input
    Text1.Text = Text1.Text & Buffer
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:10:09.947

尝试不同的 COM 端口。可接受 1 到 16 之间的数字。

```
' Open the serial port
MSComm1.CommPort = 2
MSComm1.Settings = "9600,N,8,1"
MSComm1.PortOpen = True 
```

**"CommPort 属性设置要打开哪个串口。假设调制解调器连接到 COM2，上面的示例将值设置为 2 (COM2) 并连接到调制解调器。您可以将 CommPort 属性值设置为 1 到 1 之间的任意数字16（默认值为 1）。但是，如果将此值设置为运行应用程序的系统不存在的 COM 端口，则会生成错误。**

酱汁：[dx.eng.uiowa.edu/eedesign/MScomm.doc](http://dx.eng.uiowa.edu/eedesign/MScomm.doc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:47:02.630

看看我在以下答案中发布的代码：

[搜索可用的 COM 端口](https://stackoverflow.com/questions/9661612/how-might-i-retrieve-the-port-number-of-a-usb-device-that-is-connected-to-a-usb/13972265#13972265)

运行该代码将为您提供可用 com 端口的列表

在您的代码中使用它，并让您的代码从该列表中选择一个 com 端口

# android - 获取有关 PendingIntent 的 Intent 的详细信息

> ID：14241657
> 
> 赞同：13
> 
> 时间：2013-01-09T16:23:23.707
> 
> 标签：android, android-intent, android-pendingintent

我想知道是否有可能从我自己没有创建的 PendingIntent 中获取更多信息。更准确地说：是否有可能以某种方式检索`Intent`a的原件`PendingIntent`？我不需要执行它，但想打印它的内容。

查看`PendingIntent`它的代码显示了一个隐藏的方法：

```
/** @hide */
public IIntentSender getTarget() {
    return mTarget;
} 
```

然而，这`IIntentSender`也是隐藏的，并且`Binder`与更多 IPC（我猜）相关的东西有关。没那么容易。有任何想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-01-06T13:32:10.453

此方法适用于 Android 4.2.2 及更高版本：

```
/**
 * Return the Intent for PendingIntent.
 * Return null in case of some (impossible) errors: see Android source.
 * @throws IllegalStateException in case of something goes wrong.
 * See {@link Throwable#getCause()} for more details.
 */
public Intent getIntent(PendingIntent pendingIntent) throws IllegalStateException {
    try {
        Method getIntent = PendingIntent.class.getDeclaredMethod("getIntent");
        return (Intent) getIntent.invoke(pendingIntent);
    } catch (NoSuchMethodException | InvocationTargetException | IllegalAccessException e) {
        throw new IllegalStateException(e);
    }
} 
```

* * *

**以下是Android 2.3 及更高版本**的不完整实现。它需要编写一段额外的本机 ( **JNI** ) 代码。那么**也许**它会起作用。有关更多详细信息，请参阅`TODO`评论。

```
/**
 * Return the Intent for PendingIntent.
 * Return null in case of some (impossible) errors: see Android source.
 * @throws IllegalStateException in case of something goes wrong.
 * See {@link Throwable#getCause()} and {@link Throwable#getMessage()} for more details.
 */
public Intent getIntent(PendingIntent pendingIntent) throws IllegalStateException {
    try {
        Method getIntent = PendingIntent.class.getDeclaredMethod("getIntent");
        return (Intent) getIntent.invoke(pendingIntent);
    } catch (NoSuchMethodException e) {
        return getIntentDeep(pendingIntent);
    } catch (InvocationTargetException | IllegalAccessException e) {
        throw new IllegalStateException(e);
    }
}

private Intent getIntentDeep(PendingIntent pendingIntent) throws IllegalStateException {
    try {
        Class<?> activityManagerNativeClass = Class.forName("android.app.ActivityManagerNative");
        Method getDefault = activityManagerNativeClass.getDeclaredMethod("getDefault");
        Object defaultManager = getDefault.invoke(null);
        if (defaultManager == null) {
            throw new IllegalStateException("ActivityManagerNative.getDefault() returned null");
        }
        Field mTargetField = PendingIntent.class.getDeclaredField("mTarget");
        mTargetField.setAccessible(true);
        Object mTarget = mTargetField.get(pendingIntent);
        if (mTarget == null) {
            throw new IllegalStateException("PendingIntent.mTarget field is null");
        }
        String defaultManagerClassName = defaultManager.getClass().getName();
        switch (defaultManagerClassName) {
        case "android.app.ActivityManagerProxy":
            try {
                return getIntentFromProxy(defaultManager, mTarget);
            } catch (RemoteException e) {
                // Note from PendingIntent.getIntent(): Should never happen.
                return null;
            }
        case "com.android.server.am.ActivityManagerService":
            return getIntentFromService(mTarget);
        default:
            throw new IllegalStateException("Unsupported IActivityManager inheritor: " + defaultManagerClassName);
        }
    } catch (ClassNotFoundException | NoSuchMethodException | IllegalAccessException | InvocationTargetException | NoSuchFieldException e) {
        throw new IllegalStateException(e);
    }
}

private Intent getIntentFromProxy(Object defaultManager, Object sender) throws RemoteException {
    Class<?> activityManagerProxyClass;
    IBinder mRemote;
    int GET_INTENT_FOR_INTENT_SENDER_TRANSACTION = IBinder.FIRST_CALL_TRANSACTION + 160;
    String iActivityManagerDescriptor = "android.app.IActivityManager";
    try {
        activityManagerProxyClass = Class.forName("android.app.ActivityManagerProxy");
        Field mRemoteField = activityManagerProxyClass.getDeclaredField("mRemote");
        mRemoteField.setAccessible(true);
        mRemote = (IBinder) mRemoteField.get(defaultManager);
    } catch (ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {
        throw new IllegalStateException(e);
    }

    // From ActivityManagerProxy.getIntentForIntentSender()
    Parcel data = Parcel.obtain();
    Parcel reply = Parcel.obtain();
    data.writeInterfaceToken(iActivityManagerDescriptor);
    data.writeStrongBinder(((IInterface) sender).asBinder());
    transact(mRemote, data, reply, 0);
    reply.readException();
    Intent res = reply.readInt() != 0
            ? Intent.CREATOR.createFromParcel(reply) : null;
    data.recycle();
    reply.recycle();
    return res;
}

private boolean transact(IBinder remote, Parcel data, Parcel reply, int i) {
    // TODO: Here must be some native call to convert ((BinderProxy) remote).mObject int
    // to IBinder* native pointer and do some more magic with it.
    // See android_util_Binder.cpp: android_os_BinderProxy_transact() in the Android sources.
}

private Intent getIntentFromService(Object sender) {
    String pendingIntentRecordClassName = "com.android.server.am.PendingIntentRecord";
    if (!(sender.getClass().getName().equals(pendingIntentRecordClassName))) {
        return null;
    }
    try {
        Class<?> pendingIntentRecordClass = Class.forName(pendingIntentRecordClassName);
        Field keyField = pendingIntentRecordClass.getDeclaredField("key");
        Object key = keyField.get(sender);
        Class<?> keyClass = Class.forName("com.android.server.am.PendingIntentRecord$Key");
        Field requestIntentField = keyClass.getDeclaredField("requestIntent");
        requestIntentField.setAccessible(true);
        Intent requestIntent = (Intent) requestIntentField.get(key);
        return requestIntent != null ? new Intent(requestIntent) : null;
    } catch (ClassCastException e) {
    } catch (ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {
        throw new IllegalStateException(e);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-27T17:48:17.507

如果您希望 Intent 用于 Robolectric 中的测试目的，请使用`ShadowPendingIntent`：

```
public static Intent getIntent(PendingIntent pendingIntent) {
    return ((ShadowPendingIntent) ShadowExtractor.extract(pendingIntent))
        .getSavedIntent();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T19:54:33.443

您可以使用`IntentSender`which 可以从`PendingIntent.getIntentSender()`. `IntentSender`的函数`getCreatorPackage()`，会给出创建了这个的包`PendingIntent`。

# windows-8 - 您如何在 Windows 商店应用程序的 default.css 文件中读取 localsettings 变量？

> ID：14241661
> 
> 赞同：0
> 
> 时间：2013-01-09T16:23:36.310
> 
> 标签：windows-8, windows-store-apps

我正在构建一个具有默认 css 和该 css 中默认字体大小的 Windows 商店应用程序。我允许用户从设置屏幕自定义字体大小，并且该首选项存储在本地设置中。如何更新我的应用程序以反映新的字体大小？有没有目前的模式？这是一个 Html5/js 应用程序。我可以简单地从更改事件中重新加载 css 值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:55:05.903

当您的应用启动时，从本地设置中读取字体大小，然后使用 JavaScript 设置文档的字体大小：

```
document.body.style.fontSize = fontSizeFromSettings; 
```

当应用程序正在运行并且用户更改字体大小时，也调用上述行。您可以在将字体大小保存到本地设置的代码之后立即执行此操作。

当然，您也可以使用`document.getElementById("myId").style.fontSize`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:43:14.887

我将其读为已定义类选择器的 OP，例如

```
.myclass
{
    font-size: 36px;
} 
```

并希望使用`.myclass`选择器将所有元素修改为新值，例如 72px。如果这是意图，那么您可以动态修改 CSS。

这是一个简单（且脆弱，**不适合生产**）的函数，它在已知的 CSS 文件中查找特定的样式选择器并即时修改它。您可能会对此进行概括，请查看[更改外部样式表](http://www.javascriptkit.com/dhtmltutors/externalcss.shtml)和[如何使用 JavaScript 更改 CSS 样式表以](http://www.rainbodesign.com/pub/css/css-javascript.html)获取更多详细信息。

```
function updateFontSize(newFontSize) {
    for (var i = 0; i < document.styleSheets.length; i++) {
       if (document.styleSheets[i].href.indexOf("default.css") >= 0) {
            var mySheet = document.styleSheets[i];
            for (var r in mySheet.cssRules) {
                if (mySheet.cssRules[r].selectorText == ".myclass") {
                    var myRule = mySheet.cssRules[r];
                    myRule.style.fontSize = newFontSize;
                    return;
                }
            }
        }
    }
}; 
```

然后在某个地方你称之为（当然没有硬编码值）：

```
updateFontSize("128px"); 
```

# wpf - 使用 ItemsControl ActualHeight 对打印的 XAML 表单进行分页？

> ID：14241663
> 
> 赞同：0
> 
> 时间：2013-01-09T16:23:41.920
> 
> 标签：wpf, xaml, itemscontrol, measure, actualheight

我需要使用具有标题网格和可变行数的 XAML 生成一个打印表单，随着行数的增加，这可能会导致多个页面。标题必须出现在每一页上，并且由于行内的文本换行，每一行的高度可能会有所不同。我目前正在尝试使用**ItemsControl** （行容器）的**ActualHeight**来确定何时生成新页面，但**ActualHeight 的值始终为零**。

 ****我的“XAML_Form”具有以下结构。在 ItemTemplate 中使用了一个网格，以允许将行中的列与标题网格中的列对齐。

```
<Grid Width="980" Height="757">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid Name="_headerControl" Grid.Row="0"/>
        <ItemsControl Name=_rowsControl ItemsSource={Binding Rows} Grid.Row="1">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Grid/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Grid> 
```

我们的架构有一个报告类，用于处理添加页脚、页码以及将页面聚合到 PDF 中。此报表类对每个 XAML 视图页面都有一个嵌套的 ViewModel。每个页面的 ViewModel 使用行对象的后备列表：

```
 List<RowClass> RowsList; 
```

ViewModel 还有一个 ICollectionView 用于绑定为 ItemsSource：

```
 ICollectionView Rows = new ListCollectionView(RowsList); 
```

我的报表类有一个 CreatePages 方法，其中包含如下代码：

```
IList<XAML_Form> pages = new List<XAML_Form>();
var vm = new PageViewModelClass();
var page = new XAML_Form { DataContext = vm };
page.InitializeComponent();
page.Measure(new Size(Double.PositiveInfinity, Double.PositiveInfinity);
page.Arrange(new Rect(new Point(0,0), page.DesiredSize));
var maxRowsHeight = page.DesiredSize.Height - page._headerControl.ActualHeight;
pages.Add(page);
var rowsOnPage = 0;
foreach (var row in sourceRowsObjectList)
{
    rowsOnPage++;
    vm.RowsList.Add(row);
    vm.Rows.Refresh();
    page.Measure(new Size(Double.PositiveInfinity, Double.PositiveInfinity);
    page.Arrange(new Rect(new Point(0,0), page.DesiredSize));
    if (page._rowsControl.ActualHeight <= maxRowsHeight)
        continue;

    // The rows exceed the available space; the row needs to go on the next page.
    vm.RowsList.RemoveAt(--rowsOnPage);
    vm = new PageViewModelClass();
    vm.RowsList.Add(row);
    rowsOnPage = 1;
    page = new XAML_Form { DataContext = vm };
    page.InitializeComponent();
    pages.Add(page);
}
return pages; 
```

最初的 Measure/Arrange**确实**为我提供了 maxRowsHeight 的预期值。生成的表单对于有几行的单个页面看起来很好。我的具体问题是：**为什么 page._rowsControl.ActualHeight 总是零**？一般来说，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:16:32.740

这是一个解决方案。我们正在尝试将视图关注点与视图模型关注点分开，因此仍有待改进。

报表类中的 CreatePages 方法现在是：

```
private static IEnumerable<XAML_Form> CreatePages()
{
    IList<XAML_Form> pages = new List<XAML_Form>();
    int rowCount = sourceRowsObjectList.Count;
    int remainingRowCount = rowCount;
    do
    {
        var pageVm = new PageViewModelClass();
        var page = new XAML_Form(pageVm);
        pages.Add(page);

        int numberOfRowsToAdd = Math.Min(remainingRowCount, XAML_Form.MaxNumberOfRows);
        pageVm.AddRows(sourceRowsObjectList.Skip(rowCount - remainingRowCount).Take(numberOfRowsToAdd));
        remainingRowCount -= numberOfRowsToAdd;
        while (page.AreRowsOverflowing())
        {
            pageVm.RemoveLastRow();
            remainingRowCount++;
        }
    } while (remainingRowCount > 0);
    return pages;
} 
```

后面相关的XAML_Form代码如下：

```
private static int _maxNumberOfRows = -1;

public XAML_Form(PageViewModelClass viewModel)
{
    InitializeComponent();
    Measure(new Size(Double.PositiveInfinity, Double.PositiveInfinity));
    Arrange(new Rect(new Point(0, 0), DesiredSize);
    ViewModel = viewModel;
}

public PageViewModelClass ViewModel
{
    get { return (PageViewModelClass)DataContext; }
    private set { DataContext = value; }
}

public static int MaxNumberOfRows
{
    get     // Compute this only once, the first time it is called.
    {
        if (_maxNumberOfRows < 0) return _maxNumberOfRows;
        var page = new XAML_Form();
        var singleRowCollection = new object[] { null; }
        page._rowsControl.ItemsSource = singleItemCollection;
        page._rowsControl.UpdateLayout();
        var rowHeight = page._rowsControl.ActualHeight;
        _maxNumberOfRows = (int)((page.DesiredSize.Height - page._headerControl.ActualHeight) / rowHeight);
        page._rowsControl.ItemsSource = null;
        return _maxNumberOfRows;
    }
}

// Call this method as rarely as possible. UpdateLayout is EXPENSIVE!
public bool AreRowsOverflowing()
{
    _rowsControl.UpdateLayout();
    return _rowsControl.ActualHeight > DesiredSize.Height - _headerControl.ActualHeight;
} 
```****

# java - OpenJPA 0 或 1 JoinTable 链接

> ID：14241666
> 
> 赞同：1
> 
> 时间：2013-01-09T16:23:54.217
> 
> 标签：java, jpa, openjpa

当尝试将单向`OneToOne`或`ManyToOne`关系用于 0..1 关系时，OPENJPA 将生成 INNER JOIN 而不是 LEFT JOIN：

```
@OneToOne(optional=true, fetch= FetchType.LAZY)
@JoinTable(name="linkThisResult", 
    joinColumns= {
        @JoinColumn(insertable=false, updatable=false, unique=true, nullable=false, name="thisid",referencedColumnName="thisid")
    },
    inverseJoinColumns= {
        @JoinColumn(insertable=false, updatable=false, nullable=false, name="resultid", referencedColumnName="resultid")
    }
)
private ResultEntity resultEntity; 
```

给定的表格：

```
result: { resultId, ... } 
this : { thisId, ... } 
linkThisResult: { linkThisResultId, resultId, thisId, ... } 
```

可选、可插入/可更新/可空标志似乎都不会影响生成的 sql。这是使用 OPENJPA 2.2.0。对于没有 JoinTable 的直接 JoinColumns，可选的确实会更改连接类型。

问题是：如何向 OPENJPA 表明应该执行 LEFT JOIN 的等效操作（理想情况下是惰性但不是严格要求）？

# security - 有没有办法为 MongoDb 使用 Linux 集成安全性？

> ID：14241667
> 
> 赞同：0
> 
> 时间：2013-01-09T16:23:58.010
> 
> 标签：security, mongodb

我们在 Linux 服务器上部署了连接 MongoDb 的 c# Web 应用程序。这个想法是为我们的 Web 应用程序使用单个指定的 Linux 帐户来登录并连接到 MongoDb。据我了解，默认情况下，MongoDb 根本不支持集成安全性，它应该有自己的带密码的用户数据库，也没有角色，对吧？如果是这样，我想知道是否有任何单独的第三方框架/工具或可以帮助我使用所需方法的东西？

除此之外，如果您知道关于在 Web 应用程序中实现 Mongo 安全性的最佳实践的优秀在线文章，例如在哪里以及如何存储用户和加密密码等，请给我一个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:09:12.780

*   请给我一个链接。

几个月前我为 MongoDB 做了一些安全文档，可以在[这里](http://docs.mongodb.org/manual/security)找到，这应该是你的起点。

*   据我了解，默认情况下，MongoDb 根本不支持集成安全性，它应该有自己的带密码的用户数据库，也没有角色，对吧？

在 MongoDB 2.2 之前，身份验证和授权都是本地的。在 2.2 中，RBAC（基于角色的访问）是有限的，即“读”和“写”两个角色，“写”能够在该数据库上执行所有操作，即行政。

在 2.4 中，新角色将发生变化：

```
name            description of privilege

read            ability to query data in any collection in the database, other than 'system.users', and also ability to run any command without an A or W attribute

readWrite       everything permitted by 'read' privilege, and also the ability to insert, update,
or remove documents or indexes in any collection other than 'system.users', and also the ability to run any command without an A attribute

userAdmin       ability to read and write the 'system.users' collection

dbAdmin         ability to run admin commands affecting a single database; see list below

serverAdmin     ability to run admin commands affecting the entire database server; Can only be set on admin database; see discussion

clusterAdmin    admin commands for a cluster of shards or a replica set; Can only be set on admin database 
```

如此[处所述](https://jira.mongodb.org/browse/SERVER-3198)。这个增强的 RBAC 将在 2.3.2（开发版本）和下一个生产版本 2.4.0 的所有 MongoDB 版本中可用。

With MongoDB 2.4, there will also be the ability to use Kerberos for authentication, however, this delegated authentication will only be available in the Enterprise builds, which require a Commercial Support contract for us.

There is currently nothing within MongoDB that enforces password complexity but obviously in 2.4 with Kerberos, the KDC can do this. You will manually have to ensure (through your internal password policy etc) that users realise the issues of using non-complex passwords and re-using the same passwords on multiple devices. Assuming you are running 2.2, all logins, passwords and permissions for MongoDB access are stored in the system.users collection under each database. [Here](http://docs.mongodb.org/manual/tutorial/control-access-to-mongodb-with-authentication/) is the exact link to the documentation that you should read.

# c# - 单线程程序的 C# 事件系统是确定性的吗？

> ID：14241673
> 
> 赞同：6
> 
> 时间：2013-01-09T16:24:19.137
> 
> 标签：c#, events

> **可能重复：**
> [事件处理程序执行的顺序](https://stackoverflow.com/questions/1645478/order-of-event-handler-execution)

单线程程序的 C# 事件系统是确定性的吗？这意味着，如果我按此顺序触发事件 A、B 和 C，是否每次都以相同的顺序处理它们？

我想编写一个严重依赖于事件的游戏逻辑，并且事件的处理顺序与它们被调用的顺序完全相同，这一点至关重要。那么我可以使用给定的事件系统吗，像[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)这样的库是否可以满足这一点，还是我必须实现自己的观察者系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:40:56.273

> [对于单线程程序，]如果我按此顺序触发事件 A、B 和 C，是否每次都以相同的顺序处理它们？

是的。触发事件只是调用方法的一种复杂方式。所以它相当于：

> 在单个线程上，如果我调用 methods `A()`，`B()`那么`C()`它们会按该顺序执行吗？

他们当然会。

# extjs - ExtJS 3.* chart uses too much memory

> ID：14241675
> 
> 赞同：0
> 
> 时间：2013-01-09T16:24:20.177
> 
> 标签：extjs, memory-leaks, charts, extjs3

I am using Ext JS line chart with over 5000+ data. It uses too much memory especially on IE. How can I fix this leak or why it causes?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:31:07.033

Both displaying 5k+ data points and processing it on client side are bad design decisions and should be avoided. Nobody can possibly comprehend this much data in one chart; that should be 10-12 points max or it becomes meaningless white noise. Client side processing in JavaScript is **expensive**, especially in older IEs; not only that, but you're also wasting time and resources transferring the data that is not going to be used.

The best solution is to modify your server side method to filter or aggregate data and provide UI access to these features.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T17:25:38.157

Actually I have same Question , I do agree its not worth loading that much data but there are cases where I need to show drilling data in my ExtJs window.

Whose image is displayed below :

![Logviewer for Drilling Data](../Images/5a2315608b237a4bfe9c907086094f34.png)

Here the points may go upto 15k data. Actually user wants to see the variations here rather than actual data. But he may need mouse over / zoom .

I achieved this with HTML5 plugin and adding this as an iframe.

Any words to achieve in ExtJs or how to go for this.

# c++ - 在构建之前在 Eclipse 中运行脚本

> ID：14241677
> 
> 赞同：10
> 
> 时间：2013-01-09T16:24:22.610
> 
> 标签：c++, windows, eclipse, macos

**简单的说：**

在 Eclipse 中，如何在构建时运行 shell/批处理脚本？我有一个可以手动运行的外部工具，但我想在项目构建时触发它。在脚本中使用构建变量将是一个额外的好处。

**为什么我想要这个：**

我从事移动多平台游戏的工作。我所在公司的团队在我们的游戏中使用 X-Code、Visual Studio 和 Eclipse (Momentics)。我们希望能够拿起电话并查看其顶部的覆盖信息，例如谁构建了它，构建它的时间，它来自哪个分支和修订版，以及正在使用哪些库版本。我通过在构建时运行一个脚本来使用 X-Code 完成此操作，该脚本将一些信息转储到我的游戏的资源目录中，然后我可以在运行时对其进行解析。这真的很简单，如果你有其他建议，我愿意提供；请记住，它必须适用于我们的开发人员使用的三个 IDE。

**红糖：**

在 X-Code 中，我们可以使用构建变量，这对于 eclipse 来说也是非常棒的。我使用它们更改到活动的 cocos2d-x 存储库并获取一个 git 日志来告诉我们最后一次提交到该存储库的时间以及由谁提交。如果这在 Eclipse 中是不可能的，我可以想出办法。

**提前致谢！**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T16:36:07.323

将自定义构建器添加到您的项目：从弹出菜单中打开项目属性，在构建器页面上添加一个新程序。这将打开一个“外部工具配置”页面。

在那里您可以定义要运行的脚本，还可以添加参数，您可以在其中添加 Eclipse 变量，例如 ${workspace} 等。

不过要小心：每次增量项目构建器运行时都会运行，并且配置是通过版本控制共享的（所以要注意绝对路径）。

# ajax - 如何从 bean 更新 JSF 表单？

> ID：14241679
> 
> 赞同：1
> 
> 时间：2013-01-09T16:24:27.930
> 
> 标签：ajax, jsf, primefaces

我想要做的是让用户单击一个按钮，该按钮打开一个对话框，询问您是否要开始？是-否。

如果他们选择是，则数据库中的值设置为 1，否则保留为 0。

一旦他们单击“是”，就应该呈现一个思维导图——然而，尽管使用了我认为正确的选项，但它并没有奏效。如果我在单击“是”后刷新页面，则会呈现思维导图，但如果可能的话，我想使用 ajax 公式来完成。

这是我当前的代码：

```
<p:confirmDialog id="confirmDialog" 
                 message="Are you sure about starting the round?"
                 header="Initiating round" 
                 severity="alert" 
                 widgetVar="confirmation"
                 >

    <p:growl id="growl2" showDetail="true" life="3000"/>

    <p:commandButton id="confirm" 
                     value="Yes Sure" 
                     update="growl2,mmBody,mm" 
                     oncomplete="confirmation.hide(),mm.update()"
                     actionListener="#{mmBean.checkRenderMM()}"
                     />

    <p:commandButton id="decline"
                     value="Not Yet" 
                     onclick="confirmation.hide()"
                     type="button"
                     /> 

</p:confirmDialog>

<p:mindmap id="mindmap" value="#{mmBean.root}" widgetVar="mm">
  ...
</p:mindmap> 
```

Bean 代码非常简单；只是一个简单的检查它是真还是假：

```
public Boolean checkRenderMM(){
    if ( this.cUser.getReadytobegin() != 1 ){
        this.setRenderMM( false );
    }
    else{
        this.setRenderMM( true );
    }
    return this.getRenderMM();
} 
```

Get 和 set 是标准的 getter 和 setter。

我想知道有没有办法从豆子内部做到这一点？那是：

```
public Boolean checkRenderMM(){
    if ( this.cUser.getReadytobegin() != 1 ){
        this.setRenderMM( false );
    }
    else{
        this.setRenderMM( true );
    }

    SOME CODE THAT UPDATES THE MINDMAP COMPONENT FROM HERE

    return this.getRenderMM();
} 
```

或类似的规定。

谢谢！

# r - 从聚会包中的回归树中获取节点的统计信息

> ID：14241683
> 
> 赞同：4
> 
> 时间：2013-01-09T16:24:43.970
> 
> 标签：r, tree, party

我正在使用`party`R 中的包。

我想从结果树的各个节点获取各种统计数据（平均值、中位数等），但我看不到如何做到这一点。例如

```
airq <- subset(airquality, !is.na(Ozone))
airct <- ctree(Ozone ~ ., data = airq, 
                   controls = ctree_control(maxsurrogate = 3))
airct
plot(airct) 
```

生成具有 4 个终端节点的树。我如何获得每个节点的平均空气质量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:50:37.260

我无法得到节点的哪个变量是空气质量。但我在这里向您展示如何自定义您的树状图：

```
innerWeights <- function(node){
  grid.circle(gp = gpar(fill = "White", col = 1))
  mainlab <- node$psplit$variableName
  label   <- paste(mainlab,paste('prediction=',round(node$prediction,2) ,sep= ''),sep= '\n')
  grid.text( label= label,gp = gpar(col='red'))
}

plot(airct, inner_panel = innerWeights) 
```

![在此处输入图像描述](../Images/652c76daf3f97db995c09f6002bf115e.png)

**编辑以按节点获取统计信息**

图书馆（gridExtra）

```
innerWeights <- function(node){
  dat <- round_any(node$criterion$statistic,0.01)
  grid.table(t(dat))
}
plot(airct, inner_panel = innerWeights) 
```

![在此处输入图像描述](../Images/5d15e54000bf0cd5649e5e6e84783c1b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:49:23.580

这比我想象的要难得多。尝试这样的事情：

```
a <- by(airq,where(airct),colMeans) #or whatever function you desire for colMeans
a
a$"3" #access at node three
a[["3"]] #same thing 
```

您可能会发现一些其他有用的示例`?`BinaryTree-class``。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:52:06.483

如果您迷失在 R 空间中，如何到达那里（文档并不能立即帮助您）

首先，尝试`str(airct)`：输出有点长，因为结果很复杂，但对于更简单的情况，例如 t-test，这就是您所需要的。

既然`print(airct)`或只是`airct`提供了非常有用的信息，那么打印是如何工作的？尝试`class(airct)`或检查文档： if of class 的结果`BinaryTree`。

好的，我们可以从文档中看到这一点，在这种情况下，BinaryTree 页面上的信息已经足够好了（请参阅该页面上的示例。）

但是假设作者很懒惰： try `getAnywhere(print.BinaryTree)`。在顶部你会发现`y<-x@responses`：所以尝试 `airct@responses`下一个

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-12T22:17:20.153

您也可以使用`dplyr`包来执行此操作。

首先获取每个观察值属于哪个节点并将其存储在数据框中。

```
airq$node <- where(airct) 
```

然后用于`group_by`按节点对观测值进行分组，并用于`summarise`计算臭氧测量的平均值。您可以换成`mean`您喜欢的任何汇总统计功能。

```
airq %>% group_by(node) %>% summarise(avg=mean(Ozone)) 
```

这给出了以下结果。

```
 node     avg
   (int)    (dbl)
1     3 55.60000
2     5 18.47917
3     6 31.14286
4     8 81.63333
5     9 48.71429 
```

# ios - NSManagedObject 上的 NSManagedObjectContext 属性

> ID：14241684
> 
> 赞同：0
> 
> 时间：2013-01-09T16:24:44.557
> 
> 标签：ios, cocoa, core-data

我有一个`NSManagedObject`子类，并希望在给定某个值的情况下获取其子对象之一，该值是子“位置”的属性。

我写了一个函数`- (ChildObject*)childWithPosition:(int)position`。

在这里我检查那个孩子是否存在，如果存在则返回它。

如果它不存在，那么我想创建它。

所以...

我可以在 ParentObject 中执行此操作吗...

```
- (ChildObject*)childWithPosition:(int)position
{
    //check if child exists and return it if it does.
    // if it does not exist then...

    ChildObject *child = [[ChildObject alloc] initWithEntity:[NSEntityDescription entityForName:@"ChildObject" inManagedObjectContext:self.managedObjectContext] insertIntoManagedObjectContext:self.managedObjectContext];

    child.position = position;

    return child;
} 
```

我的问题是，在父对象上使用属性 self.manageObjectContext 并使用此上下文插入新的子对象是否可以且安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:34:54.147

是的。但是为什么不使用`managedObjectContext`的属性`NSManagedObject`呢？

来自苹果文档：

> managedObjectContext 返回注册接收者的托管对象上下文。

因此，例如：

```
NSManagedObjectContext* currentContext = parent.managedObjectContext; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:31:34.797

是的。甚至必须是父母与孩子建立关系:)

=== 只有同一个 MOC 中的对象可以关联 IIRC

# python - Python 找不到 lxml 模块

> ID：14241685
> 
> 赞同：8
> 
> 时间：2013-01-09T16:24:44.627
> 
> 标签：python, lxml

我前段时间写了一个脚本，其中包含

```
from lxml import etree 
```

但是，不幸的是它不再起作用了。有疑问，我检查了安装：

```
sudo apt-get install python-lxml
sudo pip install lxml
sudo apt-get install libxml2-dev
sudo apt-get install libxslt1-dev 
```

我检查了它是否可能是我的python版本：

```
me@pc:~$ python
Python 2.7.3 (default, Sep 14 2012, 14:11:57) 
[GCC 4.1.2 20061115 (prerelease) (Debian 4.1.1-21)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import lxml
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named lxml 
```

我的操作系统是带有 Python 2.7.3 的 ubuntu 12.04.1 LTS。

一切似乎都很好。我看不出可能是什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T18:13:03.633

您在编辑中引用的解决方案使用 xml.etree 而不是 lxml.etree 并不是更好的方法，因为这些模块已知[不兼容](http://lxml.de/1.3/compatibility.html)，主要是因为 lxml 肯定更加[优化](http://lxml.de/1.3/performance.html)。

提供干净环境的一个好方法是使用**virtualenv**：

```
$ virtualenv myproject
$ cd myproject
$ ./bin/pip install lxml # Repeat this with other dependencies
[wait for download and compiling] 
```

然后，使用**./bin/python**执行您的脚本。这种方法的优点是：

*   您的系统和项目之间可以有不同版本的依赖项
*   即使您破坏了虚拟环境中的所有内容，也不会损害系统的其余部分
*   您不需要 root 权限即可进行安装

作为参考，实现此目的的一种更强大但稍微复杂一点的方法是使用[**buildout**](http://www.buildout.org/)，但如果您只想执行一个简单的单文件脚本，它看起来就像用火箭筒打苍蝇一样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T15:38:57.487

解决了这个问题。

似乎我安装的软件弄乱了我的 python 路径。我在终端中调用python时使用的python是软件安装的python，我的脚本调用的python是我系统上安装的python。

所以，我只是从 bash 的路径变量中删除了软件的 python 路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-19T17:02:52.920

我在 PyCharm 中运行测试时遇到了这个问题。我可以在使用终端和虚拟环境时导入 lxml，但使用相同的虚拟环境运行测试会导致 ImportError。

在我的情况下，从 lxml 3.3.5 升级到 4.2.5 解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-04T18:27:13.880

这可能与您的 Python 环境有关。以下是三种故障排除方法，从最简单到最麻烦

### 1）通过pip重新安装

```
pip uninstall lxml
pip install lxml 
```

### 2）通过IDE重新安装

*   从终端卸载它 ( `pip uninstall lxml`)
*   `from lxml import etree`在 python 文件的开头添加
*   让我的 IDE (PyCharm) 显示缺少导入错误
*   将鼠标悬停在错误上并通过错误修复弹出窗口（不是终端）从 IDE 安装它

### 3）重新创建virtualenv

假设您在虚拟环境中工作（如果不是，您和您的家人会感到羞耻）：删除并创建一个新环境。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-05T13:08:03.650

如果您正在处理 conda，我发现“我的 conda install lxml 在“成功”安装后无法正常工作

尝试使用 pip 卸载并重新安装，这对我有用

```
conda remove lxml

pip install lxml 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-06-08T09:40:27.547

对于 Python 3.6，这是非常棘手的。

我有同样的问题，并尝试安装最新版本，lxml 3.8。但我仍然得到错误。然后我用lxml 3.7.3，就可以了。

# asp.net - 要求有条件的确认

> ID：14241687
> 
> 赞同：0
> 
> 时间：2013-01-09T16:24:49.350
> 
> 标签：asp.net, confirmation

仅在某些条件下，事件触发时如何要求确认？我在服务器端工作，我只想在我的布尔值为真时要求确认。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:21:00.410

[如何在 ASP.Net Gridview 中添加“确认删除”选项？](https://stackoverflow.com/questions/4793955/how-to-add-a-confirm-delete-option-in-asp-net-gridview)

好的，假设您在模板列中有一个带有按钮的网格

```
<asp:Button ID="btnSave" runat="server" Text="Save" OnClientClick="return check();" /> 
```

并在您的检查功能中写入确定按钮是否应该引发回发？

```
<script type="text/javascript">

function check() {

  var doINeedToAskUserConfirmation =  // Get this according to your needs
  if ( doINeedToAskUserConfirmation  ){
      return confirm("Are you sure?");
  }
  return true;
}

</script> 
```

假设你有一个按钮

```
<input type="button" id="btnConfirm" value="Proceed"/> 
```

进行 ajax 调用以确定是否需要任何确认。

```
$("#btnConfirm").click(function(){

   $.ajax({
     type: "POST",
     url: "some.ashx",
     data: { name: "John", location: "Boston" }
  }).done(function( response ) {
     // lets say when response is true we will ask confirmation
     if ( msg )
     {
        var c = confirm( "All record will be deleted. Are you sure ? ");
        // Do another ajax call to complete your operation
     }
  });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:56:53.637

根据您使用的事件类型，您可以创建一个派生自`EventArgs`您的条件的类，并将其作为属性（例如称为 MyCondition）放在您自己的类中。

在事件处理方法中，您可以使用

```
if(e.MyCondition)
{
  // do something
} 
```

**编辑**：根据您的评论，我建议您尝试使用[DetailsView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.detailsview.aspx)进行编辑，或者如果您愿意，可以使用 GridViews 编辑模式。
您还可以查看[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)。

# sqlanywhere - Sybase - 更改“名称”列的大小 - “非法列定义”错误

> ID：14241689
> 
> 赞同：4
> 
> 时间：2013-01-09T16:25:03.190
> 
> 标签：sqlanywhere

我们的数据库中有一个带有“名称”varchar 列的公司表，其大小目前为 30 个字符。我们将其大小更改为 50 个字符的看似简单的任务已经变成了一个问题。尝试更改它并通过 Sybase Central 保存更改时，我们收到以下错误：

```
[Sybase][ODBC Driver][SQL Anywhere]Illegal column definition: Name
SQLCODE: -1046
SQLSTATE: 42000
SQL Statement: ALTER TABLE "DBA"."Companies" ALTER "Name" VARCHAR(50) 
```

我们在列周围尝试了各种转义字符，认为这可能与 Sybase 内部对“名称”一词的不同处理有关。我们对此列没有索引或约束，并删除了确实存在的单个触发器，只是试图隔离任何潜在因素。更让我们感到困惑的是，我们有一个 Companies_a 表，它跟踪对 Companies 表的所有更改，该表具有几乎完全相同的模式，包括 Name 列。我们能够毫无问题地更改该列的大小，这似乎表明它不一定是“名称”一词的问题。我浏览了该表在 Sybase Central 中的所有选项卡，并没有看到关于该表或该列的任何特殊/不同之处。

谷歌搜索这个问题很困难，因为“名称”这个词非常常见。我们有我们可以做的解决方法（即创建临时列、复制、删除和重新创建列、复制回来），但如果可能的话，我想确切地了解这里发生了什么以及为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:18:23.720

我相信我们的公司表和此列可能是在以前版本的 ASA 中创建的。sys.systabcol 中的 inline_max 列设置为 null，我们无法更改它。

运行以下语句设置默认值：

```
ALTER TABLE "DBA"."Companies" ALTER "Name" inline use default prefix use default; 
```

然后我能够运行此语句而不会出错：

```
ALTER TABLE "DBA"."Companies" ALTER "Name" VARCHAR(50); 
```

这是我找到修复的一般概念的地方： [Sybase SqlAnywhere 论坛主题](http://sqlanywhere-forum.sap.com/questions/9425/asa10-upgrade-to-asa12-with-max_inline-null-in-syssystabcol-reducing-size-of-char-fields-error)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T18:00:33.273

```
ALTER TABLE [tableName]
ALTER  [ColumnName] varchar(4000) NULL 
```

# regex - Linux重命名命令首字母大写

> ID：14241691
> 
> 赞同：9
> 
> 时间：2013-01-09T16:25:05.230
> 
> 标签：regex, linux, bash, sed, rename

我正在编写一个 Bash 脚本来清理我的音乐。

我希望它格式化所有文件名并制作它们，所以通过一点互联网搜索，我写了这一行：

```
sed -i -e 's/[-_]/ /g' -e 's/ \+/ /g' -e **'s/\<[a-z]/\U&/g'** -e "s/$artist //g" -e "s/$album //g" 
```

我曾经将文件名添加到文本文件然后 sed 它，但后来我不知道如何将新名称应用于文件。

于是我开始尝试重命名，并设法得到完全相同的结果，除了粗体部分，它应该使单词中的每个第一个字母大写。

```
rename 's/[-_]/ /g' * && rename 's/\s+/ /g' * && **rename 's/\s\w{1}/*A-Z*/g' *** && rename 's/^\d+[[:punct:]]\s//g' * && rename "s/$artist\s//g" * && rename "s/$album\s//g" * && rename "s/($ext)//g" * 
```

现在， rename 中的代码正在工作（至少令人满意），在空格字符后只找到一个字母，但有问题的是替换。我尝试了许多不同的方法，结果都是在这种情况下，焦点的第一个字母被交换为 AZ。

在重命名手册页中，它说要使小写大写你做's/az/AZ/g'，但很容易看出它只适用于它找到az AZ。所以这就是我需要帮助的。

如果有人知道如何像 sed 示例中那样做，那将是一个奖励，其中 \< 匹配每个单词的开头，因为目前，我的重命名命令不适用于第一个单词，也不会适用如果出于显而易见的原因有多个光盘看起来像“光盘名称 [光盘 1]”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-09T16:52:04.243

这是一个 Perl 问题，因为`rename`它是用 Perl 编写的，如何执行重命名的说明是 Perl 命令。

为了`s///`让替换知道要插入哪个字母的大写版本，它必须从输入中“捕获”该字母。模式中的括号执行此操作，将捕获的字母存储在变量 中`$1`。并且`\u`在替换中使下一个字符大写。

所以你可以这样做：

```
$ rename 's/\s(\w)/ \u$1/g' * 
```

请注意，替换部分必须在大写字母之前插入一个空格，因为该模式包含一个空格，因此空格和原始字母都将被替换。您可以通过使用 来避免这种`\b`情况，这是一个仅在单词边界匹配的零宽度断言：

```
$ rename 's/\b(\w)/\u$1/g' * 
```

你也不需要`{1}`那里，因为`\w`（就像正则表达式中的其他符号一样）默认匹配单个字符。

最后，*rename(1)*中的示例实际上是`y/A-Z/a-z/`，使用`y///`运算符，而不是`s///`。`y///`是一个完全不同的运算符，它将所有出现的一组字母替换为另一组；这对你没有用，它只是你想要大写的一些字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:46:55.110

```
rename -nv 's{ (\A|\s) (\w+) }{$1\u$2}xmsg' 
```

这将查找字符串的开头或后跟至少一个或多个单词字符（az、0-9、下划线）`\A`的空格。它将所有单词序列的第一个字符大写。`\s``\w+`

# oop - 我应该将常用函数存储在父类/基类中吗

> ID：14241693
> 
> 赞同：1
> 
> 时间：2013-01-09T16:25:05.247
> 
> 标签：oop, language-agnostic, parent-child

我有常用的功能，例如调用数据库的语法糖、记录或站点范围的信息，例如查找表。

如果我将它们放在站点范围的基类中，我将可以访问它们，但是以这种方式使用父类在直觉上似乎是错误的。将基类用作“具有”关系而不是“是”关系会更有意义。

或者也许这是一个好的设计？这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:41:43.120

父类应实例化一些基本功能，子类应实例化区分代码。

IMNSHO，您所描述的是该过程的混蛋。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:42:48.637

理想情况下，您只想序列化 POCO 类，因为它们只包含属性而没有方法。

拥有一个通用功能的基类可能是一个好主意，如果您将代码放入其中，那么在每个子页面中都是相同的，并且如果没有其他好地方。

例如，您可以将 Helper-methods 放在基类中，但我认为这会破坏 OOP。

在我看来，拥有一个派生自`System.Web.UI.Page`并替换`OnInit event`事件或其他事件中的某些逻辑的类是一个非常好的策略。我在各种项目中都使用了这种方法，但我将 baseblas 中的代码限制为成员页面的全球化和逻辑（如重定向到非公共页面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:54:11.360

我相信你的做法是错误的。

首先，对象应该专门用于一项任务。在同一个类中拥有数据库连接处理、日志记录或查找表似乎非常难看，无论这些功能是否被继承。

此外，如上所述，您描述的功能似乎符合对象的确切概念。所以，回答你的问题：是的，has-a 关系似乎是一个更好的解决方案。

一般来说，我倾向于尝试将程序范围内可访问的函数放在单独的类中。如果可能，我尝试使用静态方法。这些背后有时是单例，有时是某种队列，有时是完全不同的东西。尽管如此，对于这些功能只有一个原点，代码非常灵活。如果静态方法不适用，特别是当需要在此类帮助类中存储一些信息时，我才会为其他类的每个实例实例化一个对象。即使这样，工厂/池单源静态方法通常也是一个好主意。

# html - 显示内联块并水平堆叠时如何消除div之间的空间？

> ID：14241696
> 
> 赞同：31
> 
> 时间：2013-01-09T16:25:10.343
> 
> 标签：html, css

我有三个并排水平堆叠的 div，这些 div 设置为 display: inline-block。但是，我注意到即使使用某种 CSS 重置，它们之间也会产生 4px 的小距离？为什么会出现这种情况？有没有办法在全球范围内摆脱这种情况，还是我只需要将 div 移到左侧 -4px？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2013-01-09T16:30:53.130

这是因为您的浏览器将呈现 DIV 的内联内容，并且与单词一样，它们由空格分隔。

空间的宽度由字体大小决定，因此一个简单的技巧是将包含元素的字体大小设置为 0，然后重新设置内联 div 中的字体大小。

```
#container { font-size: 0; }

#container > div {font-size: 1rem; display: inline-block; } 
```

我已经在这个[Fiddle](http://jsfiddle.net/Lqx5j/)中证明了这一点。

看看这篇[文章](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)了解更多信息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-09T16:30:11.633

假设这是因为每个结束标记后的换行符。这些在 HTML 中作为空格处理。尝试删除它们。这里有几个演示：

[http://jsfiddle.net/eeRFC/](http://jsfiddle.net/eeRFC/) - 带空格

```
<div>test</div>
<div>test</div>
<div>test</div> 
```

[http://jsfiddle.net/eeRFC/1/](http://jsfiddle.net/eeRFC/1/) - 没有空格

```
<div>test
</div><div>test
</div><div>test
</div> 
```

和常见的 CSS：

```
div {
  border:solid 1px black;
  display:inline-block;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-09T16:31:05.277

去掉前一个 div 结尾和下一个 div 开头之间的新行 例如替换以下内容：

```
<div id="div1">
 Div Item 1
</div>
<div id="div2">
 Div Item 2
</div> 
```

和

```
<div id="div1">
 Div Item 1
</div><div id="div2">
 Div Item 2
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-09T16:37:27.910

使用其中一个`float:left`或`display:inline-block`将工作。请参阅[此处](http://jsfiddle.net/JthCb/1/)的工作示例链接。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T16:42:35.973

您的 HTML 中的 div 之间很可能有换行符，对吗？如果 div 之间有任何分隔符，则浏览器将在它们之间显示空格。

以下示例在 div 之间有空格：

```
<style>
* {
    margin: 0;
    border: 1px solid black;
}

div {
    display: inline-block;
}
</style>

<div>
Div1
</div>

<div>
Div2
</div>

<div>
Div3
</div> 
```

有两种方法可以用来删除 div 之间的空格。要么像这样去掉 div 元素之间的分隔符：

```
<div>
Div1
</div><div>
Div2
</div><div>
Div3
</div> 
```

或者让你的 divs 浮动元素：

```
...
div {
    display: inline-block;
    float: left;
}
... 
```

希望有帮助！

**编辑：**
另请参阅相关的 SO 问题：[如何阻止新行在 HTML 中的列表项之间添加空格](https://stackoverflow.com/questions/1931913/how-can-i-stop-the-new-line-from-adding-a-space-between-my-list-items-in-html)

# c++ - 组播接收程序优化

> ID：14241699
> 
> 赞同：0
> 
> 时间：2013-01-09T16:25:15.203
> 
> 标签：c++, linux, boost, boost-asio, multicast

我正在编写一个程序，使用 boost asio 从 Linux 中使用 c++ 的大约 30 个多案例 IP 接收多案例消息。我在这里寻求有关如何在运行时最小化客户端丢包的进展。我已经最大化了 NIC 接收缓冲区。我使用的是 8 核 CPU。我还想知道网卡会创建相同数量的缓冲区队列以等于程序中的套接字数量吗？除了配置网卡之外，我可以在linux内核上做点什么吗？因为我相信内核会在我们的程序从它复制数据之前先从 NIC 复制缓冲区，对吧？

```
template<typename msg, int id>
void data_service<msg, id>::on_rt_recv( char* p_raw_packet, int p_length, const boost::system::error_code& error )
{
    if (!error)
    {
        //post to strand and wait to proceed
        processing_strand_.post(boost::bind(&data_service::on_rt_recv_handler, this,
            p_raw_packet,
            p_length));

        //continue to listen as soon as possible
        auto new_buffer = get_new_buffer();
        rt_socket_[p_line]->async_receive_from(boost::asio::buffer(new_buffer, BUFFER_SIZE_), rt_endpoint_,
            boost::bind(&data_service::on_rt_recv, this,
            new_buffer,
            boost::asio::placeholders::bytes_transferred,
            boost::asio::placeholders::error));
    }
    else if (error != boost::asio::error::operation_aborted)
    {
        memory_pool_.free((void*)p_raw_packet);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:23:52.470

丢包问题是由硬件引起的，包括交换机和网卡。数据包速率实际上是 2500 * 70 /sec，因为有 70 个 udp 套接字。强烈推荐一个名为 Wireshark 的网络监控工具，它提供有关您当前网络流量的大量信息。

关于Demon的解决方案，boost asio在window下使用iocp，在unix下使用epoll。

也不需要调整缓冲区大小。

# java - AjaxCommandButton 和 HtmlAjaxCommandButton 的区别

> ID：14241701
> 
> 赞同：2
> 
> 时间：2013-01-09T16:25:19.010
> 
> 标签：java, jsf, ajax4jsf

我只是对这两个类之间的区别有疑问：

*   `org.ajax4jsf.taglib.html.jsp.AjaxCommandButton`
*   `org.ajax4jsf.component.html.HtmlAjaxCommandButton`

我实际上是`HtmlAjaxCommandButton`用来动态创建 Ajax 命令按钮的，它工作正常，但是当使用另一个类时`org.ajax4jsf.taglib.html.jsp.AjaxCommandButton`，它似乎有另一个目的！我只是想把事情弄清楚！

它们之间有什么区别？我们什么时候应该使用这个而不是另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:59:02.337

`taglib`包中的那个是它的子类，[`UIComponentTag`](http://docs.oracle.com/javaee/5/api/javax/faces/webapp/UIComponentTag.html)因此代表了唯一的 JSP 标记`<a4j:commandButton>`。它基本上定义了所有可用的属性。包中的一个`component`是其子类[`UIComponent`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIComponent.html)，因此表示与 JSP 标记相关联的具体 JSF 组件。JSF 组件通过渲染器定义解码（回发处理）和编码（HTML 渲染）行为。JSP 标记基本上是 JSF 组件树和 JSP 文件之间的“中介”。

动态创建 JSF 组件时，不应手动创建 JSP 标记。它们不应该出现在 JSF 组件树中。

请注意，JSP 的继承者 Facelets 不再需要这些`UIComponentTag`类。它们在 Facelets 中完全不存在。

# amazon-web-services - Amazon Elastic Beanstalk - 获取访问者 IP 地址 (python)

> ID：14241704
> 
> 赞同：1
> 
> 时间：2013-01-09T16:25:27.070
> 
> 标签：amazon-web-services, bottle, amazon-elastic-beanstalk

我的应用程序是用 python 和[瓶子](http://bottlepy.org/docs/dev/)框架开发的。我正在使用以下代码片段来获取页面访问者的 IP 地址：

```
user_ip = bottle.request.environ['REMOTE_ADDR'] 
```

它在我的本地机器上运行良好，但是，在部署到 AWS Beanstalk 实例后，我想我得到了负载均衡器 IP，因为 user_ip 读取的内容类似于 10.48.95.234。

我的想法正确吗？如果是这样，有没有办法获得真正的访问者的IP地址？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:54:08.930

你是正确的，`REMOTE_ADDR`你得到的价值是 ELB。

您通常需要`X-Forwarded-For`在请求中查找标头。ELB 将插入此标头以让您知道最终客户端 IP 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T17:17:11.940

在这种情况下，还有一个特定于瓶子的版本可以提供帮助：

```
user_ip = bottle.request.remote_addr 
```

这会自动进行处理并获取用户的地址。有关详细信息，请参阅[文档](http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.remote_addr)或[源代码](http://bottlepy.org/docs/dev/_modules/bottle.html#BaseRequest.remote_route)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T20:22:26.457

这适用于我的 ELB：

```
from bottle import route, run, request

@route('/hello')
def hello():
    return "Hello, {}".format(request.remote_route)

run(host="0.0.0.0", port=8000, server='twisted') 
```

# google-app-engine - 如何确定模型类是 db 还是 ndb

> ID：14241707
> 
> 赞同：1
> 
> 时间：2013-01-09T16:25:38.497
> 
> 标签：google-app-engine, google-cloud-datastore, app-engine-ndb

我创建了一个实用程序来交换或压缩所有实体的一种。但是我怎样才能知道使用的 model_class 是 db.Model 还是 ndb.Model？

```
def _encode_entity(self, entity):                                             

    if self.ndb :
        entity_dict = entity.to_dict()                                                     
        self.entity_eid = entity.key.id()
        entity_dict['NDB'] = True
    else :
        entity_dict = db.to_dict(entity)
        self.entity_eid = entity.key().name()
        entity_dict['NDB'] = False

    .... 
```

现在我使用：

```
def queryKind(self):

    try :
        self.query = self.model_class.query()
        self.ndb = True
    except AttributeError :
        self.query = self.model_class.all()
        self.ndb = False
    return self.make(self._encode_entity)       # make a zip or a page 
```

**更新：**我使用的解决方案。另见Guido的回答

```
self.kind = 'Greeting'
module = __import__('models', globals(), locals(), [self.kind], -1)
self.model_class = getattr(module, self.kind)
entity = self.model_class()

if isinstance(entity, ndb.Model): 
    self.ndb = True
    self.query = self.model_class.query()
elif isinstance(entity, db.Model): 
    self.ndb = False
    self.query = self.model_class.all()
else :
    raise ValueError('Failed to classify entities of kind : ' + self.kind) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T17:08:25.660

您可以使用仅存在于`ndb`或以其他方式存在的属性。

例如`_has_repeated`或`_pre_get_hook`哪些是`ndb`实体的属性。
所以你可以这样做：

```
self.ndb = hasattr(self, '_has_repeated') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T17:28:46.070

如何导入 ndb 和 db，并测试作为各自模型类实例的实体？

```
if isinstance(entity, ndb.Model):
    # Do it the NDB way.
elif isinstance(entity, db.Model):
    # Do it the db way.
else:
    # Fail.  Not an entity. 
```

# sql-server-2008-r2 - 使用命名实例远程连接到 sql

> ID：14241708
> 
> 赞同：0
> 
> 时间：2013-01-09T16:25:47.883
> 
> 标签：sql-server-2008-r2

我刚刚安装了 mssql 2008 r2。我无法远程连接到服务器。

我已经按照[这篇文章](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)中关于打开防火墙和允许远程连接的详细信息进行了操作。实际上出于测试目的，我已禁用防火墙。

我收到错误 26。这是指无法找到实例名称。

我尝试了以下本地 mssql 2008 的不同变体

服务器名称：remoteIp\instanceName

登录：我的用户

密码：我的密码

如果我的服务器名正确

# visual-c++ - CStringArray 列表元素的公分母？

> ID：14241710
> 
> 赞同：0
> 
> 时间：2013-01-09T16:25:48.880
> 
> 标签：visual-c++, mfc

给定 CStringArray 中的数组元素列表：

```
dog
dog 
cat 
cat
cat
cat
mice 
```

我想在 CStringArray 中找到共同的元素：（狗、猫、老鼠）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:41:28.783

遍历数组，将element的值作为hash key，在hash表中设置key-value对（这里不涉及实际值）。

然后你会得到一组所有的哈希键作为结果。

也许`std::set`也`std::unique`应该考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:36:28.437

对数组进行排序以将所有相似的元素放在一起，然后逐步遍历它，每次元素更改时将其复制到您的输出中。

# count - 如何计算表格中的列数

> ID：14241714
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:25:59.837
> 
> 标签：count, calculated-columns

如何计算sql中表中的列数并在网页（aspx）中显示此值？例如，我想获取在 sql server 中归档的 ID 编号以显示在网页中，以了解我的网站上有多少人，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:28:44.327

你的意思是“计算行数？”

如果是这样的话，`select count(id) from member_table`会给你的成员数量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:28:56.080

```
SELECT COUNT(COLUMN_NAME) FROM INFORMATION_SCHEMA.COLUMNS WHERE 
TABLE_CATALOG = 'database' AND TABLE_SCHEMA = 'dbo'
AND TABLE_NAME = 'table' 
```

我不确定您使用的是什么数据库，但这里是 MS SQL 的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:30:34.233

从表名中选择计数（列名）

例如：

```
SELECT COUNT(id) FROM users 
```

会返回给你一些注册用户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:29:09.097

MSSQL 计数列：

> 从 INFORMATION_SCHEMA.COLUMNS 中选择 COUNT(COLUMN_NAME)，其中 TABLE_CATALOG = 'database' AND TABLE_SCHEMA = 'dbo' AND TABLE_NAME = 'table'

但我怀疑你的意思是行？

# ios - 活动指示器仅出现一秒钟

> ID：14241720
> 
> 赞同：1
> 
> 时间：2013-01-09T16:26:22.813
> 
> 标签：ios, uiactivityindicatorview, activity-indicator

我有 2 个视图 1) A 2) B

当我从视图 A 切换到视图 B 时，加载需要很长时间，所以我在 segue 中添加了一个活动指示器。

我的问题是，当我继续查看 B 时，我的屏幕在视图 A 中冻结（加载）并且仅在一瞬间，它会在进入视图 B 之前显示活动指示器。

如何确保活动指示器在开始加载之前出现。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

{

```
[self useActivityIndicator];

if ([[segue identifier] isEqualToString:@"ShowAdsDetail"])
{
    //do anything that needs to be done

} 
```

}

```
 -(void)useActivityIndicator{

[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
[activityView startAnimating];
subView.hidden = NO;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-30T22:45:09.360

我在动画太快的 UIActivityIndi​​cator 上遇到了类似的问题。segue 立即推动下一个视图控制器，几乎没有显示活动指示器。

如果这可以帮助其他人 - 我可以通过实现 performSelector:withObject:afterDelay 来修复它，然后在 removeSpinner 方法中调用我的 performSegueWithIdentifier 方法。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:[tableView indexPathForSelectedRow] animated:YES];
    [self.spinner startAnimating];
    [self performSelector:@selector(removeSpinner:) withObject:self.spinner afterDelay:2.0];
}

- (void)removeSpinner: (UIActivityIndicatorView *)spinner {
    [self.spinner stopAnimating];
    [self.spinner removeFromSuperview];
    [self performSegueWithIdentifier:@"showMyPlans" sender:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:28:02.637

只需更改您的代码，例如：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
      [self useActivityIndicator];
   });

   if ([[segue identifier] isEqualToString:@"ShowAdsDetail"])
   {
      //do anything that needs to be done
   }
}

-(void)useActivityIndicator
{
       dispatch_async(dispatch_get_main_queue(),^{
         [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
         [activityView startAnimating];
         subView.hidden = NO;
      });
} 
```

# dart - 如何创建可修改的飞镖数组

> ID：14241724
> 
> 赞同：4
> 
> 时间：2013-01-09T16:26:31.437
> 
> 标签：dart

我想创建一个可以附加东西的缓冲区。

例如

```
 var allInput = new Uint8List(1);
  allInput.add(list) 
```

但它告诉我这是不能修改的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:36:51.037

根据[API 文档](http://api.dartlang.org/docs/bleeding_edge/dart_scalarlist/Uint8List.html)，Uint8List 是一个固定列表。您可以使用以下代码：

```
var allInput = new Uint8List(1);
allInput[0] = 123; 
```

如果您想要一个可增长的列表，您可以执行以下操作：

```
var allInput = new List();
allInput.addAll(list); 
```

或者

```
var allInput = new List<int>();
allInput.addAll(list); 
```

本质上，如果您在创建列表时提供大小说明符，则使其大小固定。否则它是可扩展的（[ref](http://api.dartlang.org/docs/bleeding_edge/dart_core/List.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:36:27.830

Chris 在他的回答中写的今天是正确的，但是很快开始，当给出长度参数时，通用 List 构造函数将不会是固定长度的。之后列表的大小仍然可以更改。还将有几个额外的命名构造函数`List`：

```
factory List.fixedLength(int length, {E fill: null})
factory List.filled(int length, E fill) 
```

这些将有助于构建固定长度的列表和创建具有预填充值的列表。

有关对 的前沿更改的详细信息`List`，请参阅：

[http://api.dartlang.org/docs/bleeding_edge/dart_core/List.html](http://api.dartlang.org/docs/bleeding_edge/dart_core/List.html)

# ios - iOS 5 iPhone 模拟器

> ID：14241727
> 
> 赞同：1
> 
> 时间：2013-01-09T16:26:39.893
> 
> 标签：ios, objective-c, cocoa-touch

我的应用在 iOS 5 上崩溃了，但我不知道是什么原因造成的。我所有的设备都更新到 iOS 6（我无法降级），问题出在 iPad 1 上，无法更新到 iOS 6。

我想知道是否有一种方法可以将模拟器与 iOS 5 一起使用来测试/调试这个？这可能吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:30:27.000

是的，您可能可以（问题可能只出现在设备上，而不是模拟器中）。

要下载 iOS 5 模拟器（iPhone 和 iPad），请转到 Xcode 中的“下载”部分中的设置，然后安装 iOS 5.0 和/或 iOS 5.1 模拟器。然后在运行您的应用程序之前，在 Xcode 主窗口的左上角选择适当的模拟器。还要确保您的应用程序的部署目标设置为 iOS 5.0（主窗口左侧面板列表中的第一项，选择您的目标并在“摘要”选项卡中设置您的部署目标）。

# memory - 程序块内静态变量的内存概念

> ID：14241728
> 
> 赞同：0
> 
> 时间：2013-01-09T16:26:50.020
> 
> 标签：memory, memory-management

程序中的静态变量在所有执行时间内都存在于内存中，而子程序的静态变量是通过子程序的激活记录被创建（通过调用子程序）和销毁（通过终止子程序）完成的将其从程序的函数调用堆栈中弹出并弹出，但是：

主程序中块（我的意思是控制结构或任何 {} 块）中的静态变量呢？在定义它们的块之外无法访问它们，它们的内存概念如何？

它们是否在整个程序执行过程中存在于内存中，但在它们的块之外无法访问，或者除了子程序之外的每个块也有激活记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T05:25:21.707

在所有情况下，静态变量都在程序的生命周期内分配一次。（我认为您问题中的“子程序”是指 C 函数。）您的问题特定于所使用的编程语言，因此我将假设 C。

代码块“看到”（或不看到）静态变量的能力是独立的，并且是由编译器的词法范围规则强制执行的虚构。

特别是在 C 中，`static`全局范围、函数范围和块范围的变量在程序的整个生命周期内都在每个程序中存储一次。在以下示例中（至少）3 个字将在程序启动时分配：

```
static int globalWord;

int aFunction(void) {
  static int aFunctionPrivateStatic;
} 

int main(void) {
   while (1) {
     static int whilePrivateStatic;
     // ...
   }

   // ...
} 
```

有关更详尽的示例，请参阅[http://en.wikipedia.org/wiki/Static_variable 。](http://en.wikipedia.org/wiki/Static_variable)

# python - 将 mapreduce 的 Python 脚本传递给 HBase

> ID：14241729
> 
> 赞同：3
> 
> 时间：2013-01-09T16:27:01.223
> 
> 标签：python, hadoop, mapreduce, hbase

我们有一个基于 Hadoop 的 HBase 实现。到目前为止，我们所有的 Map-Reduce 作业都编写为 Java 类。我想知道是否有一种使用 Python 脚本传递给 HBase 以进行 Map-Reduce 的好方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:16:51.797

有一个很好的开源库可以用于此目的。[它在这里](https://github.com/wbolster/happybase)被调用`HappyBase`并可用。它使用 HBase 的 Thrift API 进行连接。

以下是使用 HappyBase 完成的一些简单 HBase 操作的示例：

```
import happybase

connection = happybase.Connection('localhost')
table = connection.table('my-table')

table.put('row-key', {'family:qual1': 'value1','family:qual2': 'value2'})
row = table.row('row-key')print row['family:qual1']  
# prints 'value1'
for key, data in table.rows(['row-key-1', 'row-key-2']):    
    print key, data  # prints row key and data for each row
for key, data in table.scan(row_prefix='row'):    
    print key, data  # prints 'value1' and 'value2'
row = table.delete('row-key') 
```

因此，如果您想使用 Python 运行 Map/Reduce 作业来访问 HBase，您可以做的是：

1.  在所有数据节点上安装 HappyBase。
2.  [使用流式传输部分](http://hadoop.apache.org/docs/r0.15.2/streaming.html)中详述的 Python 流式传输在集群上运行您的作业。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-03T18:24:14.380

你可以很容易地使用 Python 进行 map reduce 编程，这将与 Thrift 服务器交互。python 中的 Hbase 客户端将是一个节俭的客户端。

# c++ - 正确的模式来配置工厂构建的对象

> ID：14241734
> 
> 赞同：0
> 
> 时间：2013-01-09T16:27:22.433
> 
> 标签：c++, design-patterns, factory

在过去的几周里，这个问题一直困扰着我。我目前的实现有效，但我很想知道是否有“好方法”来做到这一点。我是设计模式的新手，所以这可能是一个愚蠢的问题。

简单地说，你有：

*   提供接口的对象原型（我们称之为抽象内核）；
*   以各种方式实现上述接口的特定内核；
*   一个具体的内核工厂；
*   另一个对象 Foo，它存储指向抽象内核的指针，由 Factory 返回。

我的问题是这个；特定的内核实现可能会定义自己的一组参数，这些参数因内核而异。Foo 使用内核做一些处理，但是这个处理最终取决于这些参数，我不知道如何以一种好的方式配置它们。

我不想去抽象工厂，并在构建之前配置具体工厂，因为这对我来说似乎是错误的；有参数的不是工厂，而是内核。

但另一方面，即使我将 Foo 中的内核指针设置为 public，我也无法访问底层内核的参数，因为它们不是原型接口的一部分......我敢肯定其他人有这个之前的问题，也许有一个我看不到的简单解决方案。:S

提前致谢！

注意：在我当前的实现中，没有内核工厂。我将内核具体类型作为Foo的模板，并将内核设置为公共成员，这样我就可以在声明之后和开始处理之前配置内核。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:43:48.120

`Foo`正如您所说，不属于原型界面的任何内容都将不可用。`Foo`如果知道每个内核实现的细节，那么使用工厂模式根本没有意义。

在某些有限的情况下，在原型界面中添加类似 getter 和 setter 的内容可以完成您的工作：

```
virtual bool setParameter (const string &key, const string &value) = 0;
virtual string getParameter (const string &key) = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:13:34.623

如果一段代码知道它使用的具体内核类型，它应该有一个指向该特定具体内核类型的指针。如果没有，它就无法访问其特定参数（但可以按照@Jaywalker 的建议以通用方式访问所有参数）。

您当前的实现似乎走的是第一条路线，这完全可以。

我对您的设计的信息非常有限，但看起来您有几种具体的内核类型，每种类型都有一个单独的构建器，每种类型都有一个单独的配置器。将所有构建器打包到工厂中是有问题的，因为没有简洁优雅的方式将具体内核类型转发到它们各自的配置器（没有类似`*_cast<>`或双重调度之类的东西）。至少有两种方法可以解决这个问题并且仍然有一个工厂：

1.  将每个构建器与其各自的配置器捆绑在一起，并将所有捆绑包打包到一个工厂中，该工厂生产配置的内核。
2.  将每个内核与其配置器捆绑在一起，并创建一个生产这些捆绑包的工厂（这样一个内核可以在其生命周期内配置任意次数）。

# javascript - 在 jquery ajax 调用上运行的 javascript 对象的方法

> ID：14241736
> 
> 赞同：0
> 
> 时间：2013-01-09T16:27:24.583
> 
> 标签：javascript, jquery, oop

我以这种方式声明了一个 Javascript 类：

```
function MyClass(params){

    this.setValues=function(params){
        this.myAttr1=params.attr1;
        this.myAttr2=params.attr2;
    }
    this.setValues(params);
} 
```

这样一来我就有`MyClass`了公共属性`myAttr1`和`myAttr2`公共功能`setValues`。

当我做

```
var myObj=new MyClass({attr1:"hi",attr2:"ho"}); 
```

对象已正确创建。当我想将此对象作为 jquery ajax 调用中的参数发送时，问题就来了：

```
 $.ajax({
            type: "POST",
            url: "insert.php",
            dataType: 'json',
            data: {id: "1", obj:myObj}); 
```

此时我收到一个错误，因为*setValues*中的*参数*未定义。所以这个 ajax 调用正在尝试运行（我现在不知道为什么）。*`setValues()`*

 *我找到了一个解决方案，它创建了一个只返回内部属性的函数`myClass`。

```
this.getValues=function(){
    return {myAttr1:this.myAttr1,myAttr2:this.myAttr2};
} 
```

接着

```
$.ajax({
            type: "POST",
            url: "insert.php",
            dataType: 'json',
            data: {id: "1", obj:myObj.getValues()}); 
```

但是每当我添加一个属性时，我必须记住将它返回到`getValues()`.
我想有一个更好的解决方案。也许我没有遵循声明类的最佳实践。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:47:29.460

而不是`.getValues`您应该实现一个`.toJSON`函数来处理将您的类序列化为 JSON。当您的对象被字符串化（通过对 JSON.stringify 的底层调用）时，它将自动调用`.toJSON`.*

# jquery-ui - 如何防止 jQuery UI 外观在表单提交/回发后消失？

> ID：14241737
> 
> 赞同：1
> 
> 时间：2013-01-09T16:27:27.583
> 
> 标签：jquery-ui, jsf-2, postback, mojarra

我有一个使用 jQuery datepicker 的 JSF (Mojarra) v2.1.11、Primefaces v3.4.2、Java 6 Web 应用程序。我正在使用一个与此类似的选择器：

```
$('#form1\\:dp').datepicker({showOn: 'button', buttonText: "Choose"}); 
```

这使用户能够单击按钮以调用日期选择器。我遇到的问题是用户提交表单***后“按钮”消失了。***显然，“按钮”仅在页面最初加载时加载一次。我想知道如何*（最佳实践是）*在提交/回发之间保留 JQuery 日期选择器“按钮”。

# `index.xhtml`

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
    <f:view contentType="text/html">
        <h:head>
            <title>testcal - index.xhtml</title>
            <meta charset="utf-8" />
        </h:head>
        <h:body>
            <h:form id="queryForm">
                <f:event type="postValidate" listener="#{testBean.validate}" />
                <p:panel id="queryPanel"  header="Test p:calendar, datepicker, validation, etc..." style="width:100%;">

                    <p:focus context="queryPanel"/>

                    <h:panelGroup id="msgs">
                        <p:message id="lastName_msg"    for="lastName"     style="display:none;"/>
                        <p:message id="birthDate_msg"   for="birthDate"    style="display:none;"/>
                        <p:message id="startDate_msg"   for="startDate"    style="display:none;"/>
                        <p:message id="endDate_msg"      for="endDate"     style="display:none;"/>
                        <p:message id="drpdwn_msg"       for="drpdwn"      style="display:none;"/>
                    </h:panelGroup>
                    <br/>
                    <br/>
                    <h:panelGroup id="querypanelgroup" style="display:inline-block;">
                        <p:focus context="querypanelgroup"/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Last Name:" for="lastName"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="lastName"
                                    value="#{testBean.parmMap['lastName']}"
                                    requiredMessage="last name required"
                                    size="95"
                                    maxlength="95"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(0).show();return false;" >
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Birth Date:" for="birthDate"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="birthDate"
                                    value="#{testBean.parmMap['birthDate']}"
                                    requiredMessage="birth date required"
                                    converter="dpConverter"
                                    styleClass="datePicker"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(1).show();$(this).mask('99/99/9999');return false;">
                                    <p:ajax event="change" process="@this" update="@this"/>
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel style="margin-right: 5px;"  value="Start Date:" for="startDate"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="startDate"
                                    value="#{testBean.parmMap['startDate']}"
                                    requiredMessage="start date required"
                                    converter="dpConverter"
                                    styleClass="datePicker"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(2).show();$(this).mask('99/99/9999');return false;">
                                    <!-- optional to populate another field with same value...
                                    onchange="$('...hashSymbolHere...queryForm\\:endDate').val($(this).val());">
                                    -->
                                    <p:ajax event="change" process="@this" update="@this"/>
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel for="endDate" value="Enter a date:"/>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:inputText
                                    id="endDate"
                                    value="#{testBean.parmMap['endDate']}"
                                    requiredMessage="endDate required"
                                    converter="dpConverter"
                                    styleClass="datePicker"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(3).show();$(this).mask('99/99/9999');return false;">
                                    <p:ajax event="change" process="@this" update="@this"/>
                                </p:inputText>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <h:panelGroup>
                            <h:panelGroup style="text-align:right;vertical-align:middle;display:inline-block;width:150px">
                                <p:outputLabel for="drpdwn" value="Choose from drop down selction:">
                                    <h:panelGroup rendered="false"  style="margin-left: 2px;"  id="drpdwnRequired" styleClass="requiredInd">*</h:panelGroup>
                                </p:outputLabel>
                            </h:panelGroup>
                            <h:panelGroup style="margin-left: 4px; vertical-align:middle;display:inline-block;width:250px;">
                                <p:autoComplete
                                    id="drpdwn"
                                    style="overflow: hidden"
                                    maxResults="200"
                                    scrollHeight="150"
                                    dropdown="false"
                                    value="#{testBean.parmMap['drpdwn']}"
                                    completeMethod="#{testBean.drpdwnListComplete}"
                                    var="entry"
                                    itemLabel="#{entry.split(':')[1]}"
                                    itemValue="#{entry.split(':')[0]}"
                                    minQueryLength="1"
                                    forceSelection="true"
                                    onfocus="$('#queryForm\\:msgs > div').hide();$('#queryForm\\:msgs > div').eq(4).show();" >
                                </p:autoComplete>
                            </h:panelGroup>
                        </h:panelGroup>

                        <br/>
                        <br/>

                        <p:commandButton id="submit" value="Submit" oncomplete="applyDatePicker();" type="submit" update="@form" process="@form" action="#{testBean.submitQuery}" style="width:150px;" styleClass="button"/>
                        <p:commandButton value="Reset" update="@form" onclick="location.reload();return true;" process="@this" actionListener="#{testBean.reset}" immediate="true" ajax="false"/>

                    </h:panelGroup>
                </p:panel>
            </h:form>

            <h:outputStylesheet library="styles"    name="query.css"      />
            <h:outputScript      library="primefaces" name="/jquery/jquery.js" />
            <h:outputScript      library="primefaces" name="/jquery/plugins/ui/jquery-ui.custom.js" />
            <h:outputScript     library="primefaces" name="/jquery/plugins/inputmask/maskedinput.js" />
            <h:outputScript      library="js" name="testcal2.js" target="head" />

        </h:body>
    </f:view>
</html> 
```

# `TestBean.java`

```
package aaa.bbb.ccc.war;

import java.io.IOException;
import java.io.Serializable;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Date;
import java.util.LinkedHashMap;
import java.util.List;
import javax.faces.application.FacesMessage;
import javax.faces.component.UIForm;
import javax.faces.component.UIInput;
import javax.faces.component.UIPanel;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ComponentSystemEvent;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

@Component("testBean")
@Scope("view")
public class TestBean implements Serializable
{

    private static final List<String> drpdwnListOrig;  
    private static final String[] prfx = {"aaa","bbb","ccc", "ddd", "eee", "fff","ggg","hhh","iii","jjj","kkk","lll","mmm","nnn","ooo","ppp","qqq","rrr","sss","ttt","uuu","vvv","www","xxx","yyy","zzz"};

    //////////////////////////// [static initializer] ///////////////////////////////
    //////////////////////////// [static initializer] ///////////////////////////////
    //////////////////////////// [static initializer] ///////////////////////////////
    static
    {
        //drpdwnListOrig...
        List<String> l = getListOfStrings();
        drpdwnListOrig = Collections.unmodifiableList(null == l ? new ArrayList<String>() : l);
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("drpdwnListOrig", drpdwnListOrig);
        List<String> testList = (List<String>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("drpdwnListOrig");
    }

    public TestBean()
    {
        parmMap = this.getParmMap();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }

    public void reset(ActionEvent event)
    {
        LinkedHashMap<String, Object> m = new LinkedHashMap<String, Object>();
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("parmMap");
        setParmMap(m);
    }

    public String submitQuery()
    {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("hitlistData");
        if (this.getParmMap().isEmpty())
        {
            return "";
        }

        return "/page2.xhtml?faces-redirect=true";
    }

    private static LinkedHashMap<String, Object> parmMap;
    public LinkedHashMap<String, Object> getParmMap()
    {
        LinkedHashMap<String, Object> map = (LinkedHashMap<String, Object>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("parmMap");

        if (null == map)
        {
            map = new LinkedHashMap<String, Object>();
        }
        return map;
    }

    public void setParmMap(LinkedHashMap<String, Object> map)
    {
        parmMap = map;
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("parmMap", parmMap);
    }

    private static SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy");
    public void validate(ComponentSystemEvent e) throws ParseException
    {

        LinkedHashMap parmMap = this.getParmMap();
        UIForm queryForm = (UIForm) e.getComponent();

        UIInput lastName_c = (UIInput) queryForm.findComponent("lastName");
        String lastName = (String) (lastName_c.getValue());
        UIInput birthDate_c = (UIInput) queryForm.findComponent("birthDate");
        birthDate_c.setValid(true);
        String birthDate = (String) birthDate_c.getValue();

        FacesContext fc = FacesContext.getCurrentInstance();

        if (null != lastName && lastName.trim().length() > 0)
        {
            birthDate_c.setRequired(true);

            if (null == birthDate || birthDate.length() < 1)
            {
                birthDate_c.setValid(false);
                fc.addMessage(birthDate_c.getClientId(), new FacesMessage(FacesMessage.SEVERITY_ERROR, "birth date is required", "birth date is required"));
                fc.renderResponse();
            }
            else
            {
                birthDate_c.setValid(true);
            }
        }
        else
        {
            birthDate_c.setValid(true);
            birthDate_c.setRequired(false);
        }
    }

    //////////////////////////// autocomplete ///////////////////////////////    
    //////////////////////////// autocomplete ///////////////////////////////    
    //////////////////////////// autocomplete ///////////////////////////////    
    private static List<String> drpdwnList;

    public static List<String> getDrpdwnList()
    {
        if (null == drpdwnList)
        {
            drpdwnList = (null == drpdwnList ? (List<String>) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("drpdwnListOrig") : drpdwnListOrig);
        }

        return drpdwnList;
    }
    public void setDrpdwnList(List<String> data) throws IOException
    {
        drpdwnList = data;
    }
    public static List<String> drpdwnListComplete(String s)       //autocomplete "completeMethod"...
    {
        List<String> list = getDrpdwnList();
        List<String> drpdwnSuggestions = new ArrayList<String>();
        for (String ss : list)
        {
            if (ss.toLowerCase().contains(s.toLowerCase()))
            {
                drpdwnSuggestions.add(ss);
            }
        }
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("drpdwnSuggestions", drpdwnSuggestions);

        return drpdwnSuggestions;
    }

    //////////////////////////// get listbox values ///////////////////////////////
    //////////////////////////// get listbox values ///////////////////////////////
    //////////////////////////// get listbox values ///////////////////////////////
    public static List<String> getListOfStrings() //(String sql)
    {
        List<String> list = new ArrayList<String>();

        int ii=0;
        String key=null;
        String val=null;
        for (int i=0;i< 3500; i++)
        {

            if (ii > 25)
            {
                ii=0;
            }

            key = (i + "").trim();
            val = (i + prfx[ii]).trim();

            list.add(key + ":" + val);

            ii++;
        }

        return list;

    }    

} 
```

# `testcal2.js`

```
$(document).ready(function()
{
    applyDatePicker();
});

function applyDatePicker(){

    $('.datePicker').datepicker(
    {
        showOn: 'button', 
        buttonText: "Choose",
        showButtonPanel: true,
        showOptions: {direction: 'up'},
        changeYear: true,
        changeMonth: true,
        yearRange: "c-120:c+0"
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:50:28.760

如果我理解正确

将js代码放在函数中

```
function applyDatePicker(){
 $('#queryForm\\:dp2').datepicker(
    {
        showOn: 'button',
        buttonText: "Choose"
    });
} 
```

叫它进来`$(document).ready`

```
$(document).ready(function()
{
   applyDatePicker();
}); 
```

并且还调用它`<p:commandButton`

```
<p:commandButton onsuccess="applyDatePicker();"... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:22:56.447

具体问题是因为您通过 更新整个表单`update="@form"`，导致 jQuery UI 操作的输入元素也被重新渲染，导致 jQuery UI 外观丢失。不会在`$(document).ready()`ajax 请求上重新执行，因此输入元素保持“普通”。

这个问题基本上有2个解决方案：

1.  不要在 ajax 响应上更新输入元素本身。**只**更新*真正*需要更新的部分。也许这只是信息？

    ```
    update="msgs" 
    ```

    *（顺便说一句，那些`rendered="true"`和`style="display:none"`很奇怪）*

    如有必要，您可以指定多个以空格分隔的组件。

    ```
    update="msgs1 msgs2 msgs3" 
    ```

    您也可以只使用`autoUpdate="true"`您希望自动更新 ajax 响应的消息组件。或者，如果有问题的组件不支持它，请将其包装在`<p:outputPanel autoUpdate="true">`. 另请参阅[了解 PrimeFaces 进程/更新和 JSF f:ajax 执行/渲染属性](https://stackoverflow.com/questions/25339056/understanding-process-and-update-attributes-of-primefaces)。

    * * *

2.  在完成 ajax 请求时重新执行 jQuery UI 脚本。丹尼尔已经回答了这部分。另一种方法`onsuccess`是使用[OmniFaces](http://omnifaces.org) ' [`<o:onloadScript>`](http://showcase.omnifaces.org/components/onloadScript)。另请参阅[JSF/PrimeFaces ajax 更新会破坏 jQuery 事件侦听器函数绑定](https://stackoverflow.com/questions/14400624/jsf-primefaces-ajax-updates-breaks-jquery-event-listener-function-bindings/)。

# c# - 这两个 C# 语句有什么区别？

> ID：14241750
> 
> 赞同：2
> 
> 时间：2013-01-09T16:28:02.790
> 
> 标签：c#, .net

> **可能的重复：**
> [C#“as”cast vs classic cast](https://stackoverflow.com/questions/4926677/c-sharp-as-cast-vs-classic-cast)

我继承了一些代码，我看到了这个 Grid 事件处理程序。我不知道这两个语句之间是否有区别，我认为没有区别，但它们在代码中背靠背的事实让我想知道为什么以两种方式做同样的事情（假设他们做同样的事情事物）。如果有的话，有人可以解释一下区别吗？

```
 GridDataItem ParentItem = e.Item as GridDataItem;

            GridDataItem NewRow = (GridDataItem)e.Item; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:30:11.153

“as 运算符类似于强制转换操作。但是，如果无法进行转换，则 as 返回 null 而不是引发异常”

“请注意，as 运算符仅执行引用转换和装箱转换。as 运算符无法执行其他转换，例如用户定义的转换，而应使用强制转换表达式执行。”

[阅读更多](http://msdn.microsoft.com/en-us/library/cscsdfbt.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:30:02.630

第一个： ParentItem 将是`null`if`e.Item`不是 Type `GridDataItem`。

第二个：它会抛出一个异常，如果`e.Item`不是类型`GridDataItem`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:32:10.197

```
//This will perform a safe conversion.  Null will be retuirned if e.Item is not
//a GridDataItem
GridDataItem ParentItem = e.Item as GridDataItem;

//This will throw an exception if e.Item is not a GridDataItem
GridDataItem NewRow = (GridDataItem)e.Item; 
```

请参阅常见问题解答：http: [//blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-s-the-difference-between-cast-syntax-and-using-the-code-as-code -operator.aspx](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/12/what-s-the-difference-between-cast-syntax-and-using-the-code-as-code-operator.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T16:33:51.563

`e.Item`这是转换为 a的两种不同方法`GridDataItem`，具体取决于您希望如何处理`e.Item`不是 a的场景`GridDataItem`。

**在第一种情况下，使用`as`:**你总是会得到一个结果，但如果`e.Item`不是`GridDataItem`，那么结果将是`null`.

**在第二种情况下，使用显式强制转换：**如果`e.Item`不是 a `GridDataItem`，那么您的代码将抛出一个`InvalidCastException`（您可以捕获）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T16:30:07.493

如果无法进行类型转换，第一行将确保 ParentItem 为 null。第二行会抛出异常

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T16:30:38.243

如果转换失败，使用“as”而不是显式转换不会引发异常，而是返回 null。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T17:21:57.117

如果 e 是 GridDataItem，则没有区别。如果不是：“as”运算符将返回 Null，“不可能捕获”将引发异常

所以区别在于你如何处理错误的情况。

# css - 如何在图像上添加 HTML 文本，或使背景图像具有响应性

> ID：14241752
> 
> 赞同：1
> 
> 时间：2013-01-09T16:28:11.560
> 
> 标签：css

我有个问题。

我正在创建一个响应式标题图像，它将缩小到移动设备并占据屏幕的整个宽度。

我想用`img`标签做到这一点，然后应用 100% 的最大宽度，但我想在这个图像上包含一些文本，所以选择使用背景图像。我不想在图像上绝对显示文本，因为这会导致移动设备出现问题。

另外，关于背景图片，我不能使用背景尺寸，因为 ie8 不支持。

有没有其他方法可以实现在图像上放置文本，图像占据容器的全宽和图像的全高？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:33:28.533

```
<div id="container" style="height: 100px; width:100px; display:block;">
  <img src="some-img.jpg" style="display:block;"/>
  <span style="position:absolute;">Text over image</span>
</div> 
```

本质上，您只需要在父级内将文本定位在图像上。

`z-index`如果您有多个相互竞争的元素，属性对于“堆叠”视觉元素很有用。

# android - 如何在椭圆形上写文字

> ID：14241760
> 
> 赞同：-4
> 
> 时间：2013-01-09T16:28:32.380
> 
> 标签：android, graphics, canvas

如何在 Android 中使用 Canvas 和 Paint 将线条刻入椭圆？

UPDT：

我需要这样的东西：

![在此处输入图像描述](../Images/5e48895178496543c76c12c2ed4b7ee8.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:33:33.397

我不相信你可以用`Canvas`课堂上可用的方法在椭圆上刻一条线。至于我的经验，你只能渲染直线。但是，您可以在课堂上绘制椭圆形`Canvas`。我不确定您的主要目标是什么，但您可能想查找一些图形库，可能是这样的。

**更新：**

根据您提供的图像，我相信这是可能的。你只需要找到线的两个坐标：起始坐标和结束坐标。

完成此操作后，[渲染椭圆形](http://android-coding.blogspot.com/2012/04/draw-oval-on-canvas-canvasdrawoval.html)，然后 根据两个坐标[渲染线。](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:39:41.063

尝试用椭圆形蒙版画线。您可以随意旋转画布以获得所需的效果。

# html - 在 IE 中提交按钮周围有紫色边框，但在 Chrome 中没有。如何在 IE 中摆脱它？

> ID：14241762
> 
> 赞同：0
> 
> 时间：2013-01-09T16:28:33.957
> 
> 标签：html, css, forms

在 IE 中，我的提交按钮周围有紫色边框，但在 Chrome 中没有。如何在 IE 中摆脱它？

图片：（顶部在 IE 中，底部在 Chrome 中 - 我只是将其裁剪成图像） [http://i.imgur.com/Qb6pI.png](http://i.imgur.com/Qb6pI.png)

我的代码是：

HTML：

```
<div style="float:right; border:0px;">
    <input type="submit" class="submitorder"/>
</div> 
```

CSS：

```
.submitorder {
background-image: url('https://www.amleo.com/images/art/SubmitOrderSprite.png');
background-position: 0px 0px;
width: 205px;
height: 52px;
font-size:0px;
}

.submitorder:hover {
background-position: 0px -62px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:34:24.733

看起来您正在删除 div 上的边框，而不是输入上的边框。将您的 CSS 修改为以下内容：

```
.submitorder {
    background-image: url('https://www.amleo.com/images/art/SubmitOrderSprite.png');
    background-position: 0px 0px;
    width: 205px;
    height: 52px;
    font-size:0px;
    border: 0 none;
} 
```

那应该让你解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:34:56.143

试试下面的代码 *border :none; /*对于ie7* /

_边框：无；/*对于ie6* /

边框：无 \0/IE9；/*ie9具体不确定*/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:35:03.237

我实际上看不到您所说的紫色，这是 IE 的常见问题。`border:none`你可以通过添加到你的 CSS 来摆脱它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:35:49.167

首先，内联样式从来都不是好习惯。

至于边界，请尝试：

```
.submitorder {
border: none;
background-image: url('https://www.amleo.com/images/art/SubmitOrderSprite.png');
background-position: 0px 0px;
width: 205px;
height: 52px;
font-size:0px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T16:36:43.773

Fore IE 尝试添加`outline: 0;`&`border:none`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T18:16:34.043

```
.submitorder {
background-image: url('https://www.amleo.com/images/art/SubmitOrderSprite.png');
background-position: 0px 0px;
width: 205px;
height: 52px;
font-size:0px;
outline:none;
border:none;
} 
```

# c# - HttpWebRequest 客户端认证

> ID：14241764
> 
> 赞同：1
> 
> 时间：2013-01-09T16:28:39.080
> 
> 标签：c#, httpwebrequest, ssl-certificate

我需要通过客户端证书身份验证将一些 xmls 发布到 https 站点，但无法成功。

我有 2 个由提供商提供的 .pem 文件，如下所示：（我无法发送如此切割的所有数据）

证书.pem：

-----开始证书----- MIIC0DCCAjmgAwIBAgIKAd8CIHEBAwIEpjANBgkqhkiG9w0BAQUFADCBmTELMAkG

-----结束证书-----

密钥.pem：

-----开始 RSA 私钥----- MIICWwIBAAKBgQC+HN6jHJD1zoGLHYj1ycvg1yajll5zb3gExoWv7k+RbXLGuDEX

-----结束 RSA 私钥-----

我试图做的是

```
private static string HttpRequest(string url, string data)
        {
            HttpWebRequest rq = (HttpWebRequest)WebRequest.Create(url);

            //string privateKey = File.ReadAllText("c:\\key.pem");

            //privateKey = privateKey.Replace("-----BEGIN RSA PRIVATE KEY-----", "");
            //privateKey = privateKey.Replace("-----END RSA PRIVATE KEY-----", "");
            //privateKey = privateKey.Replace("\n", "");

            //Byte[] byteArr = Convert.FromBase64String(privateKey);

            //How do I use below .pem files here to authentica
            rq.ClientCertificates.Add(clientcert);
            rq.Method = "POST";
            rq.Proxy = null;
            rq.ContentType = "application/www-form-urlencoded";

            string dataToSend = data;

            byte[] byteArray = Encoding.UTF8.GetBytes(dataToSend);
            rq.ContentLength = byteArray.Length;

            string responseFromServer = null;

            try
            {
                Stream dataStream = rq.GetRequestStream();
                dataStream.Write(byteArray, 0, byteArray.Length);
                dataStream.Close();

                WebResponse _WebResponse = rq.GetResponse();
                dataStream = _WebResponse.GetResponseStream();

                StreamReader reader = new StreamReader(dataStream);

                responseFromServer = reader.ReadToEnd();
            }
            catch (Exception ex)
            {

            }

            return responseFromServer;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-04-17T09:24:41.053

您需要将您的私钥和 pem 证书转换为 #pkcs12 形式：

`openssl pkcs12 -inkey private.key -in client_certificate.pem -export -out client_certificate.p12`

之后，您可以在 C# 代码中指定此 p12 文件：

`rq.ClientCertificates.Add(X509Certificate.CreateFromCertFile("c:\\client_certificate.p12"));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:00:14.657

您需要通过将证书（公钥）添加到请求中来将证书（公钥）发送到服务器。据我所知，服务器使用私钥来验证请求。

如果您需要将其转换为 ASN.1 DER 格式，请尝试简单地加载您的公钥文件。

```
rq.ClientCertificates.Add(X509Certificate.CreateFromCertFile("c:\\cert.pem")); 
```

# java - 将信息从 SQL 数据库写入列表

> ID：14241772
> 
> 赞同：0
> 
> 时间：2013-01-09T16:29:02.677
> 
> 标签：java, swing, jtable

我正在做作业，但我无法完成我的程序...

我有 JTable 类，它在我的代码中创建表......我必须编写从 sql 数据库获取信息并将其写入列表的方法

方法必须看起来像：

public static List selectAnswers (int questionId) throws SQLException, IOException

以下代码是我写的：

```
public static List<AnswerRow> selectAnswers (int questionId) throws SQLException, IOException
{
    Connection veza = connectToDatabase();

    Properties query = new Properties();

    AnswersTableModel atm = new AnswersTableModel();

    String selectAnswers = query.getProperty("selectAnswers");

    PreparedStatement preparedStatement = veza.prepareStatement(selectAnswers);

    ResultSet rs = preparedStatement.executeQuery();

    List<AnswerRow> lista = new ArrayList<AnswerRow>();

    while(rs.next()){

        String answerText = rs.getString("answerText");
        boolean isRight = rs.getBoolean("answerRight");

                    ?????????????????????????????????????????????????

    }

    closeConnectionToDatabase(veza);

    return lista;
} 
```

？？？字段丢失，我不知道该写什么来将信息 answeText 和 isRight 写入 AnswerRow 类、AnswerTableModel、列表...

制作 JTable 的代码（给了我，我的老师不能更改）在这里：

```
package hr.tvz.java.deveti.model;

import java.util.List;
import java.util.ArrayList;

import javax.swing.table.AbstractTableModel;

public class AnswersTableModel extends AbstractTableModel {

    private Object[][] answers;
    private String[] columnNames;

    public AnswersTableModel (String[] colNames){
        super();
        columnNames = colNames;
    }

    public AnswersTableModel() {
        super();
        this.columnNames = new String[AnswerRow.TABLE_COLUMNS];
        this.columnNames[0] = "Odgovor";
        this.columnNames[1] = "Točan/Netočan";
    }

    public java.lang.Class<?> getColumnClass(int columnIndex) {
        return getValueAt(0, columnIndex).getClass();
    }

    public int getColumnCount() {
        return AnswerRow.TABLE_COLUMNS;
    }

    public int getRowCount() {
        if (answers != null)
            return answers.length;
        else
            return 0;
    }

    public Object getValueAt(int row, int column) {
        return answers[row][column];
    }

    public String getColumnName(int column){
        return columnNames[column];
    }

    public void setValueAt (Object aValue, int rowIndex, int columnIndex){
        answers[rowIndex][columnIndex] = aValue;
    }

    public boolean isCellEditable (int rowIndex, int columnIndex){
        return true;
    }

    public void addNewRow(){
        Object[] o = new Object[] {"", false};
        if ((answers == null) || (answers.length == 0)) {
            answers = new Object[][] {o};
        }else{
            Object[][] answersTemp = new Object[answers.length + 1][AnswerRow.TABLE_COLUMNS];
            for (int i = 0; i < answers.length; i++)
                answersTemp[i] = answers[i];
            answersTemp[answersTemp.length - 1] = o;
            answers = answersTemp;
        }
    }

    public List<AnswerRow> getAnswerRows() {
        List<AnswerRow> list = new ArrayList<>();
        for (Object[] oRow : answers) {
            AnswerRow row = new AnswerRow();
            row.setAnswer((String) oRow[0]);
            row.setRight((boolean) oRow[1]);
            list.add(row);
        }

        return list;
    }

    public void setAnswerRows(List<AnswerRow> answerRows){
        if (answerRows.size() == 0 ) {
            this.answers = new Object[0][0];
            return;
        }
        this.answers = new Object[answerRows.size()][AnswerRow.TABLE_COLUMNS];
        for (int i = 0; i < answers.length; i++){
            answers[i][0] = answerRows.get(i).getAnswer();
            answers[i][1] = answerRows.get(i).isRight();
        }
        this.columnNames = new String[AnswerRow.TABLE_COLUMNS];
        this.columnNames[0] = "Odgovor";
        this.columnNames[1] = "Točno/Netočno";
    }

    public class AnswerRow {
        public static final int TABLE_COLUMNS = 2;
        private boolean isRight;
        private String answer;

        public AnswerRow(){
            answer = "";
            isRight = false;
        }

        public AnswerRow(String answer, boolean isRight){
            this.answer = answer;
            this.isRight = isRight;
        }

        public String getAnswer() {
            return answer;
        }

        public void setAnswer(String answer){
            this.answer = answer;
        }

        public boolean isRight(){
            return isRight;
        }

        public void setRight(boolean isRight){
            this.isRight = isRight;
        }
    }
} 
```

请帮助我..谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:32:27.010

```
List<AnswerRow> lista = new ArrayList<AnswerRow>();

    while(rs.next()){

        String answerText = rs.getString("answerText");
        boolean isRight = rs.getBoolean("answerRight");

        //Create AnswerRow instance and set values to it and Add it to list.
        AnswersTableModel .AnswerRow ansrow = atm.new AnswerRow();
        ansrow.setAnswer(answerText);
        ansrow.setRight(isRight);

       //Add it to list.
       lista.add(ansrow);
    } 
```

我不确定的一件事是你为什么拥有`AnswersTableModel`它以及你用它做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T17:07:41.733

使用 public AnswerRow(String answer, boolean isRight) 构造函数创建对象

```
AnswerRow ar=null;
while(rs.next()){

    String answerText = rs.getString("answerText");
    boolean isRight = rs.getBoolean("answerRight");
    ar=new AnswerRow(answerText, isRight);
    lista.add(ar);

} 
```

# apache-flex - 在特定索引处将新行插入已排序的 ADG

> ID：14241778
> 
> 赞同：0
> 
> 时间：2013-01-09T16:29:23.980
> 
> 标签：apache-flex

我尝试在所选行下方的 adg 中插入一个新行。

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark"
           xmlns:mx="library://ns.adobe.com/flex/mx"
           minWidth="955"
           minHeight="600">

<fx:Script>
    <![CDATA[
        import mx.collections.XMLListCollection;
        import mx.events.FlexEvent;
        [Bindable]
        protected var worklist:XMLListCollection;

        protected var xml:XML=<items>
                <item><value>1</value></item>
                <item><value>2</value></item>
                <item><value>3</value></item>
                <item><value>4</value></item>
            </items>;

        protected function adg_creationCompleteHandler(event:FlexEvent):void
        {
            var list:XMLList=xml.item;
            worklist=new XMLListCollection(list);
            trace(worklist);
        }

        protected function createBut_clickHandler(event:MouseEvent):void
        {
            var xml:XML=<item/>;
            var selInd:int=adg.selectedIndex;
            var insertPos:int=selInd + 1;
            worklist.addItemAt(xml, insertPos);
        }
    ]]>
</fx:Script>

<s:layout>
    <s:VerticalLayout/>
</s:layout>

<mx:AdvancedDataGrid id="adg"
                     dataProvider="{worklist}"
                     creationComplete="adg_creationCompleteHandler(event)">
    <mx:groupedColumns>
        <mx:AdvancedDataGridColumn dataField="value"/>
    </mx:groupedColumns>
</mx:AdvancedDataGrid>

<s:Button id="createBut"
          label="createRow"
          click="createBut_clickHandler(event)"/> 
```

这工作正常，直到我先对列进行排序。然后新行将放置在第一个或最后一个索引处，而不是指定索引处。如何使用一般排序功能并将新行放置在特定索引处，即使列值为空？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:43:20.967

`null`在顶部或底部添加值的原因是因为排序已打开。如果排序在`asc`空值中，则总是会添加到顶部。如果排序是 in `desc`，它将被添加到底部。

为了更好地理解这一点..试试这个

```
<fx:Script>
    <![CDATA[
        import mx.collections.XMLListCollection;
        import mx.events.FlexEvent;
        [Bindable]protected var worklist:XMLListCollection;
        private var newvalue:int = 7;

        protected var xml:XML=<items>
                <item><value>1</value></item>
                <item><value>2</value></item>
                <item><value>3</value></item>
                <item><value>4</value></item>
                <item><value>5</value></item>
                <item><value>6</value></item>
            </items>;

        protected function adg_creationCompleteHandler(event:FlexEvent):void
        {
            var list:XMLList=xml.item;
            worklist=new XMLListCollection(list);
            trace(worklist);
        }

        protected function createBut_clickHandler(event:MouseEvent):void
        {
            var xml:XML=<item><value>{newvalue}</value></item>;
            var selInd:int=adg.selectedIndex;
            var insertPos:int=selInd + 1;
            worklist.addItemAt(xml, insertPos);
            worklist.refresh();
            newvalue++;
        }
    ]]>
</fx:Script> 
```

每次创建新行时，我都会增加一个数值。7、8、9 将被添加到顶部或底部（取决于排序）。10,11,12,........ 将在前一个或下一个（取决于排序）添加到 1，因为该值被视为字符串。

注意：内部值保存在您想要的确切索引位置。

**编辑**

只需将创建行按钮单击处理程序更改为

```
protected function createBut_clickHandler(event:MouseEvent):void
{
    var xml:XML=<item><value>{newvalue}</value></item>;
    var selectedItem:Object = adg.selectedItem;
    worklist = new XMLListCollection(worklist.source);
    var selInd:int= worklist.getItemIndex(selectedItem);
    var insertPos:int=selInd + 1;
    worklist.addItemAt(xml, insertPos);
    worklist.refresh();
    newvalue++;
} 
```

这里要做的是.. 当 sort(asc) 打开时，在用户选择了他们希望输入的行之后，然后单击`Create Row`.. 我将删除排序并将条目添加到所选值旁边..

如果您希望在整个过程中都进行排序，那么这确实很难......在某些时候，您将不得不删除排序以向用户显示数据实际在哪里......

# tsql - SELECT Col1, Col2, Col3 FROM Table WHERE Column1 有重复项

> ID：14241780
> 
> 赞同：0
> 
> 时间：2013-01-09T16:29:39.240
> 
> 标签：tsql, sql-server-2008-r2

我想显示 col1 重复的表的所有行。

```
+------+------+------+
| col1 | col2 | col3 |
+------+------+------+
|    1 |    0 |    0 |
|    1 |    1 |    1 |
|    2 |    0 |    0 |
|    3 |    0 |    0 |
|    3 |    1 |    1 |
|    4 |    0 |    0 |
+------+------+------+ 
```

结果应该是：

```
+------+------+------+
| col1 | col2 | col3 |
+------+------+------+
|    1 |    0 |    0 |
|    1 |    1 |    1 |
|    3 |    0 |    0 |
|    3 |    1 |    1 |
+------+------+------+ 
```

我已经尝试了一些没有运气的查询，所以我在这里寻求您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T16:33:21.967

根据您的 sql server 版本，您可以使用：

```
select col1, col2, col3
from
(
  select col1, col2, col3,
    count(col1) over(partition by col1) cnt
  from yourtable
) src
where cnt > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5aa15/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T16:32:02.827

```
select t.col1, t.col2, t.col3
from mytable t join (select col1 
                     from mytable 
                     group by col1 
                     having count(*) > 1) t2
  on t.col1 = t2.col1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-09T16:42:53.670

让我再添加一个变体解决方案。如果你有一`pk`列有`UNIQUE`or`PRIMARY KEY`约束，你可以使用：

```
select col1, col2, col3
from <yourTable> t1
where exists
  (select *
   from <yourTable> t2
   where t2.col1 = t1.col1
     and t2.pk <> t1.pk
  ) ; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T16:31:15.000

```
select col1, col2, col3
from <yourTable> t1
where exists
  (select null
   from <yourTable> t2
   where t2.col1 = t1.col1
   group by t2.col1
   having count(*) > 1) 
```

[sqlFiddle](http://sqlfiddle.com/#!3/5aa15/8)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-09T16:41:54.040

如果表的名称是 T5，那么使用这个：

```
SELECT COL1, COL2, COL3
FROM T5
WHERE COL1 IN
(
    SELECT COL1
    FROM T5
    GROUP BY COL1
    HAVING COUNT(COL1)>=2
) 
```

我检查过，上面不应该使用任何非标准的 SQL。我假设其他人也是如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-09T16:47:29.463

我想我来晚了..但是左连接怎么样...

[SQLFIDDLE 演示](http://sqlfiddle.com/#!3/401db/3)

询问：

```
SELECT DISTINCT x.col1, x.col2, x.col3 
FROM ab y
LEFT JOIN 
ab x
ON y.col1=x.col1 and ( y.col2<> x.col2
                    OR x.col3<>y.col3 )
where not (x.col3 is null)
and not (x.col2 is null)
; 
```

结果：

```
COL1    COL2    COL3
1       0   0
1       1   1
3       0   0
3       1   1 
```

# jquery - 无法获得 jquery 表单验证来注册 $.post 元素

> ID：14241784
> 
> 赞同：2
> 
> 时间：2013-01-09T16:29:42.833
> 
> 标签：jquery, ajax, forms, validation, submit

我想验证一个表单，以便我可以检查基本信息（例如输入的用户名、用户名的最小长度等），而且我可以确保还没有用户名和电子邮件之类的内容（这需要数据库搜索） .

我有所有的碎片，在玩了一圈后缩小了范围，发现`$.post`声明虽然是为了添加到我的“失败”计数器，但并没有这样做。我怎样才能从该`$.post`行获得某种形式的输出，以便我可以真正验证（因为现在，即使用户名不可用，它也会提交表单）。

这是我的`<script>`（尽管为了简单起见，只显示用户名部分）。请注意，“usernameoff”是我的错误块：

```
function validateForm()
{
   // set variables
   var username=document.forms["registrationnew"]["username"].value;
   var usernamespace=username.indexOf(" ");

   // set fail counter variable to determine if any requirements failed
   var counter=0;

   // check that username isn't blank, containing spaces, too short, or taken
   if (username==null || username=="")
   {
      counter++;
      $('#usernameoff').html("Must enter a username");
   }
   else if (username.indexOf(" ") >= 0)
   {
      counter++;
      $('#usernameoff').html("Cannot contain spaces");
   }
   else if (username.length < 3)
   {
      counter++;
      $('#usernameoff').html("Must be at least three characters");
   }
   else
   {
      $.post("check_username.php", {username: username}, function(result)
      {
         if(result == 0)
         {
            $('#usernameoff').html("Available");
         }
         else
         {
            counter++;
            $('#usernameoff').html("Not available");
         }
      });
   }  

   // if any test failed, return false
   if (counter > 0)
   {
      document.getElementById("errorflag").innerHTML=counter;
      return false;
   }
} 
```

`$.post`进行查询以确定输入的用户名是否已被使用（并返回 0 或 1）。我的问题是，无论它返回哪个，它都不会增加“计数器”，因此表单仍然提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:35:32.550

您的最终测试 ( `if (counter > 0)`) 将在您的 AJAX 调用返回之前运行。这是 AJAX 的“异步”部分。

在您的情况下，最简单的解决方案是`$.post`用同步调用替换：

```
$.ajax({
  type: "POST",
  url: "check_username.php", 
  data: {'username': username},
  async: false,
  success: function(result) { /* ... */ }
}); 
```

这将在您的脚本等待返回时导致延迟，但由于它在您自己的服务器上，因此该延迟应该相当小。

（同步调用并不总是可行的。阅读文档以[`.ajax()`](http://api.jquery.com/jQuery.ajax/)获取更多信息。）

# javascript - addClass JQuery 在 IE8 中不起作用

> ID：14241787
> 
> 赞同：1
> 
> 时间：2013-01-09T16:29:53.970
> 
> 标签：javascript, jquery, internet-explorer

Javascript/Jquery noob 并且仍在解决问题...但是谁能告诉我为什么以下代码可以在除 IE8 之外的所有浏览器和操作系统中运行？在 JQuery 上使用最新版本。（来自 Wordpress 网站的片段）

```
$(document).ready(function(){

  var current = <?php the_ID() ?>;
  var currentEl = $("#project-link-"+current).addClass('active');

  var prev = currentEl.prev();
  if(prev[0] != undefined){
    $("#prev-link").attr('href',$(prev[0]).attr('href'));
  }else{
    $("#prev-link").hide();
  }

  var next = currentEl.next();
  if(next[0] != undefined){
    $("#next-link").attr('href',$(next[0]).attr('href'));
  }else{
    $("#next-link").hide();
  }

  $(window).hashchange( function(){
    $(".project-image.active").removeClass('active');
    var num = window.location.hash.substring(1);
    changeImage(num); 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:33:01.330

### 建议

1.  检查这一行：

    ```
    var current = <?php the_ID() ?>; 
    ```

2.  `hashChange()`可能无法在 IE 中工作！

3.  考虑更换：

    ```
    if(prev[0] != undefined){ 
    ```

    和

    ```
    if(prev.length == 0){ 
    ```

# java - 在线程内调用 MessageBox

> ID：14241789
> 
> 赞同：1
> 
> 时间：2013-01-09T16:29:59.097
> 
> 标签：java, android

我正在尝试找到一种从线程内部调用 MessageBox 的方法。但是我发现的每一段代码/示例都不起作用。有人可以用尽可能少的代码行以最简单和最简单的方式详细说明解决方案/示例吗？

到目前为止，这是我的代码：

```
public class MainActivity extends Activity {

    void MessageBox(String msg){
        AlertDialog deleteAlert = new AlertDialog.Builder(this).create();
        deleteAlert.setTitle("This is the title");
        deleteAlert.setMessage(msg);
        deleteAlert.show();
    }

    Button b1;
    TextView tv1;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1 = (Button) findViewById(R.id.button1);
        tv1 = (TextView) findViewById(R.id.editText1);

        b1.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0) {
                MyRunnable myRunnable = new MyRunnable();
                Thread myThread = new Thread(myRunnable);
                myThread.setDaemon(true);
                myThread.start();
            }   
        });

        MainActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                MessageBox("This is a message");
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

}

class MyRunnable implements Runnable{

    Socket Client;
    public void run() {
        try {
            Client = new Socket("192.168.1.20", 3333);
            //MessageBox
        } catch (UnknownHostException e) {
            //MessageBox
        } catch (IOException e) {
            //MessageBox
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:34:38.540

使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html)在线程内调用 MessageBox。作为 ：

```
//your code here....
Socket Client;
public void run() {
 try {
     Client = new Socket("192.168.1.20", 3333);
     showMessage("Yout MessageBox message here");
    } catch (UnknownHostException e) {
      showMessage("Yout MessageBox message here");
   } catch (IOException e) {
     showMessage("Yout MessageBox message here");
 }

public void showMessage(String message){
  MainActivity.this.runOnUiThread(new Runnable() {
   public void run() {
       // show MessageBox here 
     }
   });
} 
```

# flash - 多种尺寸的图片上传

> ID：14241790
> 
> 赞同：0
> 
> 时间：2013-01-09T16:30:00.173
> 
> 标签：flash, file-upload, plupload

我正在寻找一种 javascript/Flash 解决方案，它有助于从用户的角度缩短大文件上传时间。

当用户选择多个图像时，我想立即将所有图像的一个小版本上传到服务器（我需要在其上运行一些服务器端代码，然后将其显示给用户）。上传小图像后，我想上传更大版本的图像，这些图像存储在我们的服务器上供以后使用。

有谁知道在 IE8+ 中支持这一点的东西？我目前正在尝试修改 plupload，但效果不佳（我的 html5 系统几乎就在那里，但我不知道如何处理 Flash）。理想情况下，我想要一种同时支持 HTML5 和 Flash 的解决方案，但一种只支持 Flash 的解决方案也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:43:33.763

你应该看看[THIS FLASH](http://www.adylevy.com/index.php/2009/06/07/client-side-image-resize-flash-cs4-filereferencedata/)可以做到这一点。

# c# - ViewState 比较 CheckBoxList 选定的值

> ID：14241791
> 
> 赞同：0
> 
> 时间：2013-01-09T16:30:01.390
> 
> 标签：c#, asp.net

我有一个创建`CheckBoxList`. 中的项目`CheckBoxList`是根据用户当前的通知订阅选择的。我正在存储所选项目的真值或假值。

在用户通过选中或取消选中 中的一个框来更改他们的订阅后`CheckBoxList`，他们单击另一个按钮来更新他们的通知订阅。我需要将`Viewstate["PREV"]`与回发时更改的选择进行比较，并根据更改运行一些功能。

```
ArrayList list = new ArrayList();
for (int i = 0; i < checkBoxList1.Items.Count; i++)
{
    list.Add(checkBoxList1.Items[i].Selected.ToString());
}
ViewState["PREV"] = list; 
```

即使我看不到带有 a`Response.Write`的值，但当我在调试中添加手表时，ViewState 的值是正确的。

我遇到的问题是如何进行下一步进行比较。这就是我想要完成的：

```
 for (int i = 0; i < checkBoxList1.Items.Count; i++)
        {
            //if checkbox state goes from false to true, subscribe to topic
               //mySubscribeMethod
            //else if checkbox state goes from true to false, unsubscribe to topic
               //myUnsubscribeMethod
            //else if checkbox state is unchanged, do nothing
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:41:16.430

你可以试试这样的

```
ArrayList list =  ViewState["PREV"] as ArrayList;
for (int i = 0; i < checkBoxList1.Items.Count; i++)
{
     if (checkBoxList1.Items[i].Selected == true && Convert.ToBoolean(list[i]) == false)
       {
           // Subscribe Method
       }   
     if (checkBoxList1.Items[i].Selected == false && Convert.ToBoolean(list[i]) == true)       
       {
           // Unsubscribe Method
       }
     else
       {
           // Continue to loop
       } 
} 
```

# xslt - 带有表格的 RTF 文件在 WordPerfect 中看起来已损坏

> ID：14241800
> 
> 赞同：0
> 
> 时间：2013-01-09T16:30:13.640
> 
> 标签：xslt, rtf, wordperfect

我正在使用 XSL 模板创建 RTF 文件。该文件的内容包括一个表格。虽然该表格在 Ms 字处理器中显示得很好，但在 Wordperfect 中看起来却是乱码。我有使用 Wordperfect 的客户，所以我需要让它与 WP 一起使用。

生成 RTF 的 XSL 模板如下所示

```
\rtf1\ansi
{\fonttbl
{\f20\fnil\fcharset0 Times New Roman;}
{\f21\fnil\fcharset0 Times New Roman;}
{\f22\fnil\fcharset0 Times New Roman;}
{\f23\fnil\fcharset0 Times New Roman;}
{\f24\fnil\fcharset0 Times New Roman;}
}
{\stylesheet
}
{\header
\pard\tqc\tx4320\tqr\tx8640 {\plain \f20\fs22 FileName: <xsl:value-of select="/file/document/title"/>}
}
{\footer
} 
```

创建表的模板如下所示：

```
<xsl:for-each select="//tag/tag1">
\trowd \trq1 \trgraph120 \trleft-108
\clbrdrl\brdrs\clbrdrt\brdrs\clbrdrr\brdrs\clbrdrb\brdrs\cellx500
\clbrdrl\brdrs\clbrdrt\brdrs\clbrdrr\brdrs\clbrdrb\brdrs\cellx4200
\clbrdrl\brdrs\clbrdrt\brdrs\clbrdrr\brdrs\clbrdrb\brdrs\cellx7000
\clbrdrl\brdrs\clbrdrt\brdrs\clbrdrr\brdrs\clbrdrb\brdrs\cellx7500
\clbrdrl\brdrs\clbrdrt\brdrs\clbrdrr\brdrs\clbrdrb\brdrs\cellx9500
\pard
\nowidctlpar \intb1 \q1 \sa160 {\plain \f24\fs22 <xsl:value-of select="position()"/>} \cell \pard
\nowidctlpar \intb1 \q1 \sa160 {\plain \f24\fs22 <xsl:value-of select="item/text()"/>} \cell \pard
\nowidctlpar \intb1 \q1 \sa160 {\plain \f24\fs22 <xsl:value-of select="title/text()"/>} \cell \pard
\nowidctlpar \intb1 \q1 \sa160 {\plain \f24\fs22 <xsl:value-of select="page/text()"/>} \cell \pard
\nowidctlpar \intb1 \q1 \sa160 {\plain \f24\fs22 } \cell \pard
\widctlpar \intb1 \row
</xsl:for-each> 
```

为了在 Word Perfect 中正确显示表格，我应该遵循某种标准吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:53:11.400

这是一个艰苦的过程，但我终于弄明白了。

我应该将它用于在 WP 和 Word 中出现的单元格边框。

```
\clbrdrt\brdrs\brdrw16\brdrcf2\clbrdrl\brdrs\brdrw16\brdrcf2\clbrdrb\brdrs\brdrw16\brdrcf2\clbrdrr\brdrs\brdrw16\brdrcf2\cellx1000 
```

每 4 个标签表示一个单元格边界。示例： \clbrdrt : 单元格右上边框 \brdrs : 单边框 \brdrw16 : width = 16 \brdrcf2 : 不知道这是什么意思

并且代码也使用**intb1**而不是**intbl**

# java - 如何从文本文件中预填充 grails 中的字段？

> ID：14241807
> 
> 赞同：0
> 
> 时间：2013-01-09T16:30:28.243
> 
> 标签：java, grails

我正在学习 Grails，但我有一个问题：如何在 Grails 中预填充字段（如列表和复选按钮）？

请原谅我提出这样一个微不足道的问题。我还没有尝试过任何东西。我正在寻找关于在 Grails 中执行此操作的最佳方法的总理事会。

铁螳螂7x

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:39:20.693

Grails 有[复选框](http://grails.org/doc/latest/ref/Tags/checkBox.html)标签来创建一个复选框。如果您有一个列表，您可以遍历它并创建复选框，该`checked`属性将定义它是否会被标记。

所以你可以有两个列表：

*   清单 1：可用值
*   清单 2：文件中的值

在控制器中填充这些列表，并在视图中迭代 list1。如果该值也存在于 list2（从您的文件中加载）中，则将选中的设置为 true。

如果您需要更具体的答案，您将需要更具体的问题。

# android - Android Google Map v2 不显示地图

> ID：14241811
> 
> 赞同：1
> 
> 时间：2013-01-09T16:30:39.773
> 
> 标签：android, google-maps-api-2

我正在 Android 上测试谷歌地图 v2。我按照本[教程](http://android-er.blogspot.de/)

当我在手机上运行应用程序时，我看不到地图。我不知道为什么。我不认为，我忘记了什么。我已经配置了所有必要的东西。

这是一个截图：[http](http://s14.directupload.net/file/d/3130/68zcf2um_png.htm) ://s14.directupload.net/file/d/3130/68zcf2um_png.htm ：

logcat 按摩：

```
01-09 17:25:21.150: D/dalvikvm(18006): Late-enabling CheckJNI
01-09 17:25:21.455: D/dalvikvm(18006): GC_CONCURRENT freed 198K, 3% free 9458K/9735K, paused  2ms+2ms
01-09 17:25:22.075: D/dalvikvm(18006): GC_CONCURRENT freed 268K, 4% free 9635K/9991K, paused 1ms+2ms
01-09 17:25:22.600: D/dalvikvm(18006): GC_CONCURRENT freed 270K, 4% free 9830K/10183K, paused 2ms+2ms
01-09 17:25:22.765: D/dalvikvm(18006): GC_CONCURRENT freed 207K, 3% free 10154K/10439K, paused 2ms+4ms
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 1
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 2
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 3
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 4
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 5
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 6
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 7
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 8
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 9
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 10
01-09 17:25:22.835: D/SensorManager(18006): ====>>>>>Num Sensor: 0
01-09 17:25:22.840: D/SensorManager(18006): registerListener :: handle = 0  name= K3DH Acceleration Sensor delay= 20000 Listener= maps.i.a@416a4570
01-09 17:25:22.845: E/SensorManager(18006): thread start
01-09 17:25:22.845: E/SensorManager(18006): =======>>> Sensor Thread Running <<<========
01-09 17:25:22.960: D/dalvikvm(18006): GC_CONCURRENT freed 259K, 4% free 10322K/10695K, paused   2ms+2ms
01-09 17:25:23.000: D/libEGL(18006): loaded /system/lib/egl/libEGL_mali.so
01-09 17:25:23.050: D/libEGL(18006): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-09 17:25:23.055: D/libEGL(18006): loaded /system/lib/egl/libGLESv2_mali.so
01-09 17:25:23.060: D/(18006): Device driver API match
01-09 17:25:23.060: D/(18006): Device driver API version: 10
01-09 17:25:23.060: D/(18006): User space API version: 10 
01-09 17:25:23.060: D/(18006): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Fri Oct  5 16:06:50 KST  2012 
01-09 17:25:23.380: D/dalvikvm(18006): GC_FOR_ALLOC freed 202K, 6% free 10336K/10887K, paused 156ms
01-09 17:25:23.405: D/dalvikvm(18006): GC_FOR_ALLOC freed 154K, 6% free 10335K/10887K, paused 19ms
01-09 17:25:23.425: D/dalvikvm(18006): GC_FOR_ALLOC freed 152K, 6% free 10336K/10887K, paused 16ms
01-09 17:25:23.440: D/dalvikvm(18006): GC_FOR_ALLOC freed 152K, 6% free 10336K/10887K, paused 14ms
01-09 17:25:23.460: D/dalvikvm(18006): GC_FOR_ALLOC freed 172K, 6% free 10337K/10887K, paused 14ms
01-09 17:25:23.475: D/dalvikvm(18006): GC_FOR_ALLOC freed 152K, 6% free 10337K/10887K, paused 14ms
01-09 17:25:23.495: D/dalvikvm(18006): GC_FOR_ALLOC freed 152K, 6% free 10338K/10887K, paused 14ms
01-09 17:25:23.510: D/dalvikvm(18006): GC_FOR_ALLOC freed 152K, 6% free 10338K/10887K, paused 14ms
01-09 17:25:23.605: D/CLIPBOARD(18006): Hide Clipboard dialog at Starting input: finished by someone else... !
01-09 17:25:23.725: D/Sensors(18006): Remain listener = Sending .. normal delay 200ms
01-09 17:25:23.725: I/Sensors(18006): sendDelay --- 200000000
01-09 17:25:23.725: D/SensorManager(18006): JNI - sendDelay
01-09 17:25:23.725: I/SensorManager(18006): Set normal delay = true
01-09 17:25:23.725: D/SensorManager(18006): unregisterListener:: disable all sensors for this listener,  name = K3DH Acceleration Sensor listener = maps.i.a@416a4570 
```

这是主要活动：

```
public class MainActivity extends FragmentActivity implements OnMapClickListener {

 final int RQS_GooglePlayServices = 1;
 GoogleMap myMap;

 TextView tvLocInfo;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  tvLocInfo = (TextView)findViewById(R.id.textView);
  initMap();
 }

private void initMap() {

     FragmentManager myFragmentManager = getSupportFragmentManager();
     SupportMapFragment mySupportMapFragment = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
     myMap = mySupportMapFragment.getMap();
     myMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
     myMap.setMyLocationEnabled(true);
     myMap.getUiSettings().setZoomControlsEnabled(true);
     myMap.getUiSettings().setCompassEnabled(true);
     myMap.getUiSettings().setMyLocationButtonEnabled(true);

     myMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
     //myMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
     //myMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
     //myMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);

     myMap.setOnMapClickListener(this); 
}

@Override
 public boolean onCreateOptionsMenu(Menu menu) {
  // Inflate the menu; this adds items to the action bar if it is present.
  getMenuInflater().inflate(R.menu.main, menu);
  return true;
 }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
  switch (item.getItemId()) {
     case R.id.menu_legalnotices:
      String LicenseInfo = GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(
        getApplicationContext());
      AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(MainActivity.this);
      LicenseDialog.setTitle("Legal Notices");
      LicenseDialog.setMessage(LicenseInfo);
      LicenseDialog.show();
         return true;
     }
  return super.onOptionsItemSelected(item);
 }

 @Override
 protected void onResume() {
  // TODO Auto-generated method stub
  super.onResume();

  int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

  if (resultCode == ConnectionResult.SUCCESS){
   Toast.makeText(getApplicationContext(), 
     "isGooglePlayServicesAvailable SUCCESS", 
     Toast.LENGTH_LONG).show();
  }else{
   GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);
  }

 }

 @Override
 public void onMapClick(LatLng point) {
  tvLocInfo.setText(point.toString());
  myMap.animateCamera(CameraUpdateFactory.newLatLng(point));
 }
   } 
```

main.xml：

```
 <LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".MainActivity" >

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<fragment
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"/>
</LinearLayout> 
```

和清单：

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.googlelocatorv2"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />

<permission 
    android:name="com.example.googlelocatorv2.permission.MAPS_RECEIVE" 
    android:protectionLevel="signature"></permission>

<uses-permission android:name="your_package_name.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<uses-feature 
    android:glEsVersion="0x00020000" 
    android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="---myKey---"/>
    <activity
        android:name="com.example.googlelocatorv2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>         
</application> 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:48:24.907

```
<permission 
android:name="com.example.googlelocatorv2.permission.MAPS_RECEIVE" 
android:protectionLevel="signature"></permission>

<uses-permission android:name="your_package_name.permission.MAPS_RECEIVE"/> 
```

这些需要匹配，在您的情况下您需要将 uses-permission 更改为

```
<uses-permission android:name="com.example.googlelocatorv2.permission.MAPS_RECEIVE"/> 
```

# php - 语法错误调试 - 意外的 T_CONSTANT_ENCAPSED_STRING

> ID：14241824
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:31:28.977
> 
> 标签：php, mysql, syntax, pdo

试图在购物车中提取报价值的直方图。如果我将它直接粘贴到 mySQL 中，则此查询有效，但是我遇到了 PHP 方面的问题。

错误信息：

```
Parse error: syntax error, unexpected T_CONSTANT_ENCAPSED_STRING in .../.../... Line 26. 
```

我的代码：

```
echo '<h2>Histogram of Quotes</h2>';

$sql = 'SELECT 
            ROUND(ROUND(Fixes.FixAM/31.1035 * Products.Fineness * Products.Buy * Quotes.Weight, 2), -3)    AS bucket,
            COUNT(*) AS Count,
            RPAD('', LN(COUNT(ROUND(Fixes.FixAM/31.1035 * Products.Fineness * Products.Buy * Quotes.Weight, 2))), "*") AS bar
        FROM   
            Quotes,
            Products,
            Fixes,
            Currencies,
            Metals,
            ProductTypes
        WHERE
            Quotes.ProductId = Products.Id AND
            Products.MetalId = Metals.Id AND
            Products.ProductTypeId = ProductTypes.Id AND
            Fixes.CurrencyId = Currencies.Id AND
            Fixes.MetalId = Metals.Id AND
            Currencies.Code = "GBP"                     
        GROUP BY bucket';

$stmt = $db->prepare($sql); 
$stmt->execute();
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

第26行是说`GROUP BY bucket';`

证明 SQL 代码有效

```
bucket  COUNT   bar
0       114     *****
1000    37      ****
2000    8       **
3000    2       *
4000    3       *
5000    4       *
8000    1   
9000    1   
10000   1   
21000   1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:34:50.277

您正在混合引号而不转义它们：

```
$sql = 'SELECT 
            ROUND(ROUND(Fixes.FixAM/31.1035 * Products.Fineness * Products.Buy * Quotes.Weight, 2), -3)    AS bucket,
            COUNT(*) AS Count,
            RPAD('', LN(COUNT(ROUND(Fixes.FixAM/31.1035 * Products.Fineness * Products.Buy * Quotes.Weight, 2))), "*") AS bar
// Here ---------^^
        FROM   
            Quotes,
            Products,
            Fixes,
            Currencies,
            Metals,
            ProductTypes
        WHERE
            Quotes.ProductId = Products.Id AND
            Products.MetalId = Metals.Id AND
            Products.ProductTypeId = ProductTypes.Id AND
            Fixes.CurrencyId = Currencies.Id AND
            Fixes.MetalId = Metals.Id AND
            Currencies.Code = "GBP"                     
        GROUP BY bucket'; 
```

将它们切换为双引号或在查询中用反斜杠转义它们。

# jquery - 需要帮助以使用 jquery 定位元素

> ID：14241827
> 
> 赞同：0
> 
> 时间：2013-01-09T16:31:50.523
> 
> 标签：jquery, html, selector

我需要一些帮助来选择 jquery 中的元素...

使用以下代码

```
 <ul>
        <li>
            <div>
                <div>
                    <a href="#" id="target">link</a>
                </div>
                <span>Hello</span>
            </div>
        </li>
    </ul> 
```

我需要定位*`<span>`*标签，但我只知道标签的 id *`<a>`*。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:34:45.240

您可以转到父级，然后获取下一个元素，该元素将是`<span>`：

```
$("#target").parent().next() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:32:45.513

```
$('#target').parent().next('span'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:38:01.623

我不知道最接近（）是否会起作用，因为它只通过祖先搜索 DOM 树。尝试

```
$('#target').parent().siblings('span'); 
```

如果您不确定跨度的 DOM 树备份有多远，您可以测试#target 的每个父级的兄弟姐妹。我可能在这一切上都错了，尽管哈哈

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T18:26:14.313

```
<script>
    jQuery(document).ready(function(){
    a=jQuery("#target").parents('li').find('span').html();
    alert(a);
    });
    </script> 
```

您可以通过此代码定位跨度

# java - 在java中获取当前月份的第一个日期

> ID：14241836
> 
> 赞同：57
> 
> 时间：2013-01-09T16:32:36.387
> 
> 标签：java, calendar

我正在尝试到达和离开日期，其中`ToDate`将有前一个日期，`FromDate`并将有当月的第一个日期。一月份会是`1/1/2013`这样。如何正确获取当月的第一个日期？我做不到。

```
today.add(Calendar.DAY_OF_MONTH, -1);
java.util.Date previousDay=today.getTime();
ToDate = sdfFile1.format(newjava.sql.Date(previousDay.getTime()));
today.add(Calendar.DATE, 1);
java.util.Date nextDay=today.getTime();
FromDate = sdfFile1.format(new java.sql.Date(nextDay.getTime())); 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-01-09T16:37:33.173

尝试

```
 Calendar c = Calendar.getInstance();   // this takes current date
    c.set(Calendar.DAY_OF_MONTH, 1);
    System.out.println(c.getTime());       // this returns java.util.Date 
```

更新（[自 Java 8 起](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)）：

```
import java.time.LocalDate;
LocalDate todaydate = LocalDate.now();
System.out.println("Months first date in yyyy-mm-dd: " +todaydate.withDayOfMonth(1)); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-11-08T05:11:12.850

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-09T16:37:46.813

```
Calendar date = Calendar.getInstance();
date.set(Calendar.DAY_OF_MONTH, 1); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-06-08T18:59:40.663

**乔达时间**

如果我正确理解了这个问题，可以使用 joda time 轻松完成

```
LocalDate fromDate = new LocalDate().withDayOfMonth(1);
LocalDate toDate = new LocalDate().minusDays(1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-17T09:19:42.610

您可以使用**java8**[`withDayOfMonth(int dayOfMonth)`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html#withDayOfMonth-int-)中的方法返回月份的第一天：

 **```
LocalDate firstDay = LocalDate.now().withDayOfMonth(1);
System.out.println(firstDay);   // 2019-09-01 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-04T08:44:15.783

如果您还希望将时间设置为 0，则代码为：

```
import java.util.*;
import java.text.*;

public class DateCalculations {
  public static void main(String[] args) {

    Calendar aCalendar = Calendar.getInstance();

    aCalendar.set(Calendar.DATE, 1);
    aCalendar.set(Calendar.HOUR_OF_DAY, 0);
    aCalendar.set(Calendar.MINUTE, 0);
    aCalendar.set(Calendar.SECOND, 0);

    Date firstDateOfCurrentMonth = aCalendar.getTime();

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss zZ");
    sdf.setTimeZone(TimeZone.getTimeZone("UTC"));

    String dayFirst = sdf.format(firstDateOfCurrentMonth);
    System.out.println(dayFirst);
  }
} 
```

您无需编译即可轻松在线查看： [http ://www.browxy.com/](http://www.browxy.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-07T12:27:19.133

## 奇迹般有效！

```
public static String  getCurrentMonthFirstDate(){
    Calendar c = Calendar.getInstance();   
    c.set(Calendar.DAY_OF_MONTH, 1);
    DateFormat df = new SimpleDateFormat("MM-dd-yyyy");
    //System.out.println(df.format(c.getTime())); 
    return df.format(c.getTime());
} 
```

//更正：输出=02-01-2018[![在此处输入图像描述](../Images/5cb827063e209952d4d91e382ad82018.png)](https://i.stack.imgur.com/mGla4.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-17T08:27:24.983

```
import java.util.Date;
import java.text.SimpleDateFormat;

...
Date currentMonth = new Date();
String yyyyMM = new SimpleDateFormat("yyyyMM").format(currentMonth);
Date firstDateOfMonth = new SimpleDateFormat("yyyyMM").parse(yyyyMM);
... 
```

我的愚蠢解决方案。但这对我有用：D

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-02T14:33:41.113

为了得到一个日期（以后可以在 JPA 中使用），我做了

```
Date startOfMonth = Date.from(LocalDate.now().withDayOfMonth(1).atStartOfDay().toInstant(ZoneOffset.UTC)); 
```

*   我取当前日期 LocalDate.now()
*   使用DayOfMonth(1) 将其移至该月的第一天
*   在StartOfDay() 将它移到当天的sart，以摆脱小时和分钟
*   并通过将其更改为具有“正确”ZoneOffset 的 Instant 来处理 TimeZone 问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-12T18:24:45.940

在 Java 8 中，您可以使用：

```
LocalDate date = LocalDate.now(); //2020-01-12
date.withDayOfMonth(1); //2020-01-01 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-21T10:02:23.900

日期的月份的第一天：

```
public static Date firstDayOfMonth(Date d) {

    Calendar calendar = new GregorianCalendar();
    calendar.setTime(d);
    calendar.set(Calendar.DAY_OF_MONTH, 1);

    return calendar.getTime();  
} 
```**

# d3.js - d3.js 嵌套选择

> ID：14241845
> 
> 赞同：1
> 
> 时间：2013-01-09T16:33:09.927
> 
> 标签：d3.js

我正在尝试为我拥有的每个数据点创建元素，并根据当前数据点为每个元素`<g>`添加几个不同的元素。我试过类似的东西：`<text>``<g>`

```
var g = vis.selectAll("g").data(dd,function(d){ return d.data.name+d.x+d.y+d.s; });

    var gs = g.enter().append("g");         
        g.exit().remove();

    var t = gs.selectAll("text").data(function(d) { console.log(d); return d; });
    t.enter().append("text").attr("x",function(d){ return d.x+d.s/2; })
        .attr("y",function(d){ return d.y+d.s/4; })
        .attr("font-family","Verdana")
        .attr("font-size","9")          
        .attr("text-anchor","middle")
        .text(function(d){ return d.data.name; });      

    t.attr("x",function(d){ return d.x+d.s/2; })
        .attr("y",function(d){ return d.y+d.s/4; })
        .attr("font-family","Verdana")
        .attr("font-size","9")          
        .attr("text-anchor","middle")
        .text(function(d){ return d.data.name; });      

    t.exit().remove(); 
```

但我得到的只是一组空`<g>`元素。我在做一些明显错误的事情吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:51:20.923

嵌套选择假设某种嵌套数据，例如矩阵。您的个人数据元素不是数组，因此第二次调用`.data()`不会做任何事情。有关更多详细信息，请查看[有关嵌套选择的教程。](http://bost.ocks.org/mike/nest/)

我不清楚为什么您需要嵌套选择。您正在添加一个`text`显示数据点名称的元素，因此您不需要第二个（嵌套）选择。然而，修复它的最简单方法（至少在语法上）应该是将每个元素更改`dd`为单元素数组。

# c# - 完成后是否必须销毁对象？

> ID：14241846
> 
> 赞同：3
> 
> 时间：2013-01-09T16:33:17.157
> 
> 标签：c#, class, object, destructor

在 C# 中，一旦我完成了一个对象，我是否必须***总是销毁它？***如果不是，我必须在什么条件下销毁对象并调用析构函数？如果我不销毁对象会发生什么？优缺点都有什么？

简单示例：

```
Help h = new Help();

h.program_name = "myprogram.exe";
h.release_date = "01/10/2013";
h.version_number = "1.2.0.0"; 

if (args.Length > 0)
{
    if ((args[0] == "-help") || (args[0] == "-version")||(args[0] == "/?"))
    {
        h.writeline();
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T16:34:38.910

除非对象实现了[`IDisposable`](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口，否则当您使用完它时，您无需对它做任何事情。

让垃圾收集器完成它的工作，世界上一切都会好起来的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-09T16:36:22.833

只有处理非托管资源的对象才需要显式处置。这些类型应该实现 IDisposable 接口。处理这些对象的一个​​好方法是使用`using`关键字：

```
using (SqlConnection conn = new SqlConnection(...))
{
    // ...do stuff with conn
}  // conn.Dispose() will automatically be called here 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:36:34.210

通常 C# 使用垃圾收集器，因此无需手动“破坏”对象。

在某些情况下，您可能希望立即释放与某些对象关联的资源，例如网络/数据库连接、打开的文件等。使用“使用”通常是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:52:24.377

如前所述`GC`，C# 中有清理对象的功能。

中没有析构函数`C#`，但是在`finalizer`收集对象时会调用析构函数。但是在大多数情况下不需要实现终结器。

关于 Finalize 方法的一些信息：http: [//msdn.microsoft.com/en-us/library/system.object.finalize.aspx](http://msdn.microsoft.com/en-us/library/system.object.finalize.aspx)

如果我们需要特定的对象处理行为（例如清理非托管资源），您应该实现 Finalize 方法。

这是你可以做到的方式：http: [//msdn.microsoft.com/en-us/library/vstudio/b1yfkh5e (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/vstudio/b1yfkh5e(v=vs.100).aspx)

当心实现 Finalize，它会导致GC 清理此对象的[双重工作](http://msdn.microsoft.com/en-us/library/ms973837.aspx#dotnetgcbasics_topic5)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T16:48:53.973

在 C# 中，您不需要***总是***破坏，但仅在需要时才需要破坏。通常，当您设计一个类时，您将声明并实现一个[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)接口，该接口在必要时进行实际清理。您***需要***处理类实例可能分配的非托管资源，重载的[Dispose()](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)方法是您应该处理它们并取消分配它们的最佳位置。

请注意，[Dispose()](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)方法的设计应使其可以多次调用而不会崩溃，因此请密切注意并检查任何对 null 值的对象引用。这是整个代码中的一个好习惯，但 Dispose() 方法需要对此给予更多关注。

# css - 3D CSS 变换未围绕正确的轴旋转

> ID：14241855
> 
> 赞同：0
> 
> 时间：2013-01-09T16:33:39.523
> 
> 标签：css, 3d, rotation, cube

我正在尝试在立方体的表面上构建一个四页的网站。我已经非常接近我在[这里](http://scottdlowe.com)所追求的，但 3D 旋转有时并不像预期的那样。

单击导航元素时，将设置到正确面的 y 旋转以及围绕 x 和 z 轴的随机 +/-360，以获得酷炫的过渡效果。问题是当立方体旋转 90 或 270 度（通过点击想法或接触）时，进一步的 z 旋转不起作用。事实上，我很确定在这种状态下（旋转 90 或 270 度），rotateX 和 rotateZ 属性都围绕 x 轴应用，因为有时在思考时，再次单击思考会导致立方体围绕 x 旋转两次或一点也不，即使每次点击应该只增加/减少 x 或 z 角度 360 度。要观察这一点，请反复单击“想法”以查看#cube 元素的 rotateX 和 rotateY 样式在开发人员工具中正确更新，而立方体仅围绕 x 轴旋转。我'

这是我用来在导航点击时旋转立方体的代码：

```
 function performNavigation(pageName){
        //generate random spins for x and z
        if(Math.random() > .5){
            zAngle += 360;
        } else {
            zAngle += -360;
        }
        if(Math.random() > .5){
            xAngle += 360;
        } else {
            xAngle += -360;
        }
        //navToDegreesMap is an array that stores the correct rotation angle for each face of the cube
        yAngle = -navToDegreesMap[pageName];
        rotateCube(xAngle,yAngle,zAngle);
    }

    function rotateCube(xAngle, yAngle, zAngle){
        //prop is the transform property with appropriate vendor prefix
        document.getElementById('cube').style[prop] = "rotateX("+xAngle+"deg) rotateY("+yAngle+"deg) rotateZ("+zAngle+"deg)";
    } 
```

来源在[这里](https://github.com/lowe0292/scottdlowe.com)。

谢谢您的帮助！

# ajax - 在 IE 中带有 java-script 行为不端的 Django 表单

> ID：14241856
> 
> 赞同：0
> 
> 时间：2013-01-09T16:33:41.393
> 
> 标签：ajax, django, jquery, django-forms

我有一个 django 表单，其中包含名称、地址、邮编等，以及捐赠服务的取货日期字段。我进行了设置，以便在用户输入邮政编码并离开该字段以将 ajax 请求发送到 django 视图以返回与该邮政编码匹配的所有取件。在 chrome、firefox、safari 中一切正常，但当然 IE 在你知道什么方面是一种皇家痛苦。尽管启用了 JS 并查看了源代码，但以下`$('#results').hide();`内容似乎不适用于某些用户。不知何故，这一切都破裂了？

错误是在 IE 中没有返回取件日期，并且在提交时它给出了 403 csrf 错误，尽管我在表单中有标签。下面是我的表单 JS。这里有什么特定于 IE 的东西会导致问题吗？获取取件日期的主要函数是函数 get_pickup_dates

```
Query(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});

function get_pickup_dates(zip,template)
{
    $.ajax({
        type: "POST",
        url:"/get_pickups/",
        data: {
        'zip': zip, 
        'template':template
        },
        success: function(data){            

                date_results = $(data).find('#results').html()          
                $("#id_pickup_date").replaceWith("<span>" + date_results + "</span >");     
        },
        error: function(){
            alert("Error");
        }
    })
}

$(document).ready(function()
{   

template = window.location.pathname;
$('#results').hide();
$('#id_cancel').closest('div').hide()

    if (template == '/donate/')
    {
        address_fields = $("#id_address_number, #id_city, #donateForm #id_zip, #externalForm #id_zip, #id_address_street, #id_pickup_id").closest('div');
        $(address_fields).hide();

    }

    if (template == '/external/')
    {
        $("#id_zip").live('focusout',function()
        {
            zip = $(this).val()
            get_pickup_dates(zip,template)
        });
    }

    if( $("ul").hasClass('errorlist') && template == '/donate/')
    {
        address_fields.show();
    }    

    $("#id_address").live('focusout',function()
    {

        var intTest = /^\d{5}$/;
        $this = $(this);    
        var address = $this.val();      
        var split_addr = address.split(' ');
        var find_street = address.split(',');
        var street = find_street[0];
        var trim_street = street.split(' ');

        var clean_street = trim_street.splice(1,2).join(" ");       

        $('#id_address_number').val(split_addr[0]);

        // Find ZIP code in address
        for(i=0; i <= split_addr.length; i++)
        {           
            if(intTest.test(split_addr[i]))
            {
                $("#id_zip").val(split_addr[i]);
                zip = split_addr[i];
                //alert(zip);               
                break;
            }
        }

        //Find city
        $('#id_city').val($.trim(find_street[1]));

        // Find Street in address
        $("#id_address_street").val(clean_street);
        if(template == '/donate/')
        {   
            $(address_fields).show("slow");
            $('#id_pickup_id').closest('div').hide();
        }

        get_pickup_dates(zip,template)
    });

    $("#id_address").keypress(function (e)
    {
        if (e.which == 13)
        {
          return false;
        }
        return true
    });

    $('div.field input, div.field select, div.field checkbox, div.field textarea').focus(function()
    {
        $this = $(this);        
        $this.closest('div').addClass('highlight');

    });

    $('div.field input, div.field select, div.field checkbox, div.field textarea').blur(function()
    {
        $this = $(this);

        $this.closest('div').removeClass('highlight');

    });

    if ($('#id_zip').val().length > 0)
    {
        zip = $('#id_zip').val()
        get_pickup_dates(zip,template)
    }    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T23:31:22.877

如果您使用 iFrame，这可能是 jQuery/IE 兼容性中的一个已知（现已修复）错误。见[http://bugs.jquery.com/ticket/13936](http://bugs.jquery.com/ticket/13936)

# java - 每行中的列数可能不同的 JTable

> ID：14241863
> 
> 赞同：2
> 
> 时间：2013-01-09T16:33:53.250
> 
> 标签：java, swing, jtable, row, columnspan

我正在寻找 JTable 的解决方案，我可以在其中改变每行中的列数，但行的大小（以像素为单位）是恒定的。

到目前为止，我发现 stackoverflow 引用只是指向旧解决方案的死链接：

[每行具有不同列数的 JTable](https://stackoverflow.com/questions/4147843/jtable-with-varying-number-of-columns-per-row)

现在有更新更好的方法吗？如果是这样，是什么？如果没有，有谁知道旧的解决方案是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:48:36.690

我会创建一个渲染器（具有多个固定大小标签的面板，甚至每种类型的行都有多个面板）。

它应该是 TableModel 中应用了渲染器的一列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T21:11:50.237

> 有谁知道旧的解决方案是什么？

这些示例似乎是为上个千年的 Swing beta 版本创建的，可以在[此处](http://www.crionics.com/public/swing_examples/SwingExamples.html)找到。您可能正在寻找[`MultiSpanCellTable`](http://www.crionics.com/public/swing_examples/JTableExamples4.html). 它们可能是一个有用的研究对象，但它们*不是*最新的。YMMV。

# php - foreach 中的 if else 语句导致错误

> ID：14241864
> 
> 赞同：2
> 
> 时间：2013-01-09T16:33:55.490
> 
> 标签：php, mysql, foreach

我有一个用于批量更新/添加折扣价格的 php 函数。

代码运行良好，直到我 在选择语句中添加了 p.sku~~的 sku 上添加了额外的 $new_price 条件和 substr 检查。~~
它现在给了我一个空白屏幕，当我尝试执行它时查询没有运行。

```
if ($user_group == 15 && $percent == 0) {
$this->db->query("DELETE FROM " . DB_PREFIX . "product_discount WHERE customer_group_id = '".$user_group."' AND quantity = '".$quantity."'");

    $query = $this->db->query("SELECT p.product_id, p.sku, p.cost, p.price FROM product p");

    foreach ($query->rows as $result) {

        if ((substr($result['sku'],0,3) == 'ACA')) {
        $new_price = ($result['cost'] * 32.5 / 100 + $result['cost']);
        } else {
        $new_price = ($result['cost'] * 40 / 100 + $result['cost']);
        }

        $this->db->query("INSERT INTO " . DB_PREFIX . "product_discount SET 
        `product_id` = '" . $result['product_id'] . "', 
        `customer_group_id` = '15',
        `quantity` = '".$quantity."',
        `priority` = '".$priority."',
        `price` = '".$new_price."',
        `date_start` = '".$start_date."',
        `date_end` = '".$expire_date."'");
    }

} 
```

我在这里想念什么？我一直在搜索论坛和谷歌等，整个下午都在尝试各种事情，我受够了！请帮助任何人！

在 index.php 中添加错误报告后，我终于得到了一个线索：
**“致命错误：允许的 134217728 字节的内存大小用尽（试图分配 32 字节）”**

这是函数的完整代码，根据评论进行了一些细微的更改，我不知道为什么所有内存都用完了，希望有人能提供帮助：

```
<?php
    class ModelBulkDiscount extends Model {

    public function updateDiscount($user_group = null, $percent = 0, $quantity = 1, $priority = 0, $start_date = null, $expire_date = null) {

if($user_group != 15 && $percent > 0) {
$this->db->query("DELETE FROM " . DB_PREFIX . "product_discount WHERE customer_group_id = '".$user_group."' AND quantity = '".$quantity."'");

    $query = $this->db->query("SELECT p.product_id, p.price FROM " . DB_PREFIX . "product p");

    foreach ($query->rows as $result) {

        $new_price = $result['price'] - (($result['price'] / 100) * $percent);

        $this->db->query("INSERT INTO " . DB_PREFIX . "product_discount SET 
        `product_id` = '" . $result['product_id'] . "', 
        `customer_group_id` = '" . $user_group . "',
        `quantity` = '".$quantity."',
        `priority` = '".$priority."',
        `price` = '".$new_price."',
        `date_start` = '".$start_date."',
        `date_end` = '".$expire_date."'");

    }

} else if ($user_group == 15 && $percent == 0) {
$this->db->query("DELETE FROM " . DB_PREFIX . "product_discount WHERE customer_group_id = '".$user_group."' AND quantity = '".$quantity."'");

    $query = $this->db->query("SELECT p.product_id, p.sku, p.cost, p.price FROM " . DB_PREFIX . "product p");

    foreach ($query->rows as $result) {

    if ((substr($result['sku'],0,3) == 'ACA')) {
        $new_price = ($result['cost'] * 1.325);
    } else {
        $new_price = ($result['cost'] * 1.4);
    }

        $this->db->query("INSERT INTO " . DB_PREFIX . "product_discount SET 
        `product_id` = '" . $result['product_id'] . "', 
        `customer_group_id` = '15',
        `quantity` = '".$quantity."',
        `priority` = '".$priority."',
        `price` = '".$new_price."',
        `date_start` = '".$start_date."',
        `date_end` = '".$expire_date."'");
    }

} else if ($user_group == 15 && $percent > 0) {
$this->db->query("DELETE FROM " . DB_PREFIX . "product_discount WHERE customer_group_id = '".$user_group."' AND quantity = '".$quantity."'");

    $query = $this->db->query("SELECT p.product_id, p.cost, p.price FROM " . DB_PREFIX . "product p");

    foreach ($query->rows as $result) {
        $temp_price = ($result['cost'] * 1.325);
        $new_price = $temp_price - (($temp_price / 100) * $percent);

        $this->db->query("INSERT INTO " . DB_PREFIX . "product_discount SET 
        `product_id` = '" . $result['product_id'] . "', 
        `customer_group_id` = '15',
        `quantity` = '".$quantity."',
        `priority` = '".$priority."',
        `price` = '".$new_price."',
        `date_start` = '".$start_date."',
        `date_end` = '".$expire_date."'");
    }
}
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:08:24.320

通过查看您的代码，我唯一能想到的可能是初始 SQL 查询返回的数据集超出了 PHP 的内存限制。也许您可以尝试`LIMIT 100`在查询中添加或类似内容，看看问题是否仍然存在。您还可以寻找一种从数据库服务器获取表大小（以字节为单位）的方法，并查看它是否超过 128MB。

另一方面：在 PHP 中处理大量记录并不是性能方面的最佳方法，因为必须将整个数据从 SQL 服务器传输到 PHP 解释器进程，然后再传输回来。您发布的代码看起来像是您通常会使用特殊查询直接在数据库中实现的代码（甚至可能使用存储过程）。

本质上，您是在尝试根据另一个表中的数据插入大量记录。因此，您想对该表执行选择并将其用作插入的子表达式。看看：[https ://dev.mysql.com/doc/refman/5.1/en/insert-select.html](https://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

我不认为自己是 SQL 专家，但为了让您了解这可能如何工作，仅针对部分字段：

```
INSERT INTO product_discount (product_id, customer_product_id, new_price) SELECT 
sub.product_id, 15, sub.new_price FROM (
    SELECT p.product_id, p.price*1.35 AS new_price FROM products
) AS sub; 
```

**注意：**我省略了 new_price 计算的一部分，因为它需要另一个子 SELECT，并且我想保持可读性。但也可以使用纯 SQL。它不像命令式编程那样直观，但 SQL 提供了很多功能，并且条件表达式之类的东西也是可能的。

您应该能够制定一个完全在数据库中执行所需操作的查询。这样，就不需要在 DB 和 PHP 之间传输任何数据，这很可能会快得多，而且您不会耗尽内存。

# delphi - Orpheus bpl 文件在哪里生成？

> ID：14241867
> 
> 赞同：3
> 
> 时间：2013-01-09T16:34:00.077
> 
> 标签：delphi, turbopower

我正在尝试将 Orpheus 4.08 的最新版本添加到 Delphi XE2 和 Delphi XE3。除了通常的警告之外，包编译没有错误并且编译器发出成功信号。但是，我找不到 *.bpl 文件。它们与其他 VCL 文件不在 bin 目录中，搜索我的（索引）驱动器不会在其他任何地方找到它们。我应该在哪里寻找，或者它们不是被创建的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:47:06.530

我从 SVN repo 下载了最新的代码：[https](https://tporpheus.svn.sourceforge.net/svnroot/tporpheus/trunk) ://tporpheus.svn.sourceforge.net/svnroot/tporpheus/trunk 。然后我在包组中构建了所有项目。输出 .bpl 文件位于此处：

```
C:\Users\Public\Documents\RAD Studio\9.0\Bpl   (for XE2)
C:\Users\Public\Documents\RAD Studio\10.0\Bpl  (for XE3) 
```

文件在您机器上的位置取决于您的 IDE 设置。重要的设置是在工具 | 下找到的包输出目录。选项 | 环境选项 | 德尔福选项 | 图书馆。`$(BDSCOMMONDIR)\Bpl`至少在我的机器上，默认值是扩展到上面显示的目录。

# jquery - jquery在标签后附加一个增量

> ID：14241872
> 
> 赞同：1
> 
> 时间：2013-01-09T16:34:11.493
> 
> 标签：jquery

HTML：

```
<div class="main_holder">
      <div class="input_holder">
        <label for="something">Email</label><br/>
            <input type="text" id="field_input" name="email" /> 
      </div>
      <a href="#" class="add">Add+</a>

      <div class="input_holder">
        <label for="something">Address</label><br/>
            <input type="text" id="field_input" name="address" /> 
      </div>
      <a href="#" class="add">Add+</a>

      <div class="input_holder">
        <label for="something">Name</label><br/>
            <input type="text"  id="field_input" name="name" /> 
      </div>
      <a href="#" class="add">Add+</a>
    </div> 
```

jQuery

```
$('a.add').click( function() { 
        var n=$(this).prevAll('.input_holder').size()+1;
        $(this).prev('.input_holder').clone().insertBefore(this);
        $(this).prev('.input_holder').find('label').append(n);
        return false;
    }); 
```

因此，如果我的标签名称是电子邮件，那么之后的结果是：

*   第一次点击：电子邮件 2
*   第二次点击：电子邮件 23
*   第三次点击：电子邮件 234

这样做的原因是因为在每次附加之后，它都会采用已经有数字的前一个。所以我现在的问题是如何解决这个问题，所以它每次只放第一次

我想要的结果：

*   第一次点击：电子邮件 2
*   第二次点击：电子邮件 3
*   第三次点击：电子邮件 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:06:47.680

尝试使用正则表达式`.replace`：

```
$(this).prev('.input_holder').find('label').append('0').text( function(i,str) {
    return str.replace(/\d+$/, n);
}); 
```

[http://api.jquery.com/text/](http://api.jquery.com/text/)

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T11:24:38.463

**HTML**

```
<div class="main_holder">
  <div class="input_holder">
    <label for="something">Email</label><br/>
    <input type="text" id="field_input" name="email" /> 
  </div>
  <a href="#" class="add">Add+</a>

  <div class="input_holder">
    <label for="something">Address</label><br/>
    <input type="text" id="field_input" name="address" /> 
  </div>
  <a href="#" class="add">Add+</a>

  <div class="input_holder">
    <label for="something">Name</label><br/>
    <input type="text"  id="field_input" name="name" /> 
  </div>
  <a href="#" class="add">Add+</a>
</div> 
```

**JS**

```
$('a.add').click( function(e) { 
  var $this = $(this),
      $prev = $this.prevUntil('.add');

  $prev.last().clone().insertBefore(this);
  $this.prev('.input_holder').find('label').append($prev.length + 1);

  e.preventDefault();
}); 
```

**JSFiddle**

[http://jsfiddle.net/4B3xU/](http://jsfiddle.net/4B3xU/)

我修改了 JS，但没有修改 html。

这是我所做的：

1.  你总是克隆第一个输入，所以永远不要得到数字
2.  修复了即使您想添加地址输入也会克隆电子邮件输入的错误
3.  删除了 return false 以支持 e.preventDefault();
4.  单击时缓存了一些选择器。可以做更多，但这应该足够了。

# php - jQuery UI 选项卡，当我切换到第二个选项卡时，js 和 jQuery 文件需要时间加载

> ID：14241873
> 
> 赞同：0
> 
> 时间：2013-01-09T16:34:15.183
> 
> 标签：php, jquery, html

我正在使用 jQuery 版本 jquery-1.8.2.js 和 jquery-ui.js v1.9.0。我有一个带有 index.php 的 php 页面。当我打开 index.php 时它加载得很好，但是当我切换选项卡时，加载内容需要一些时间 似乎 jquery 需要足够的时间来加载，我无法找到我在 index.php 中有以下代码的原因

```
$(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn't load this tab." );
                });
            }
        });
    });

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Set Up</a></li>
        <li><a href="temp1.php">temp1 </a></li>
        <li><a href="temp2.php">temp 2</a></li>
        <li><a href="temp3.php">temp 3</a></li>
    </ul>
    <div id="tabs-1">
    content here
    </div>
</div> 
```

在*temp1.php*中，我有一个将数据填充到表中的 ajax 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:14:06.050

虽然我不完全确定你在问，但最后一句话让我相信你不确定为什么需要下面的 JavaScript 代码：

```
$(function() {
        $( "#tabs" ).tabs({
            beforeLoad: function( event, ui ) {
                ui.jqXHR.error(function() {
                    ui.panel.html(
                        "Couldn't load this tab." );
                });
            }
        });
    }); 
```

之所以存在此代码，是因为它是一个错误处理程序，用于处理 ID 为“选项卡”的 div 中发生的任何事情。因此，如果您加载某些内容并返回错误，该处理程序将捕获错误并显示“无法加载此选项卡”的精美文本。而不是什么也看不见。放置错误处理程序的原因`beforeLoad`是因为主要位置错误来自使用选项卡时发生在加载期间 - 因此，如果在可能发生错误之前未放置处理程序 - 它无法被捕获。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:12:43.813

好的，我来这里是为了回答我自己的问题，我注意到我在所有页面的 head 部分都有指向 jquery-ui.css 和 jquery.js 的链接，例如在 ul 中定义的 temp1.php、temp2.​​php 和 temp3.php在 index.php 作为选项卡的一部分。删除它们后它工作正常。我相信 js 和 css 加载在每个页面上，在标签页的情况下不应该加载，因为它加载在 index.php

# javascript - Qunit 显示另一个测试的结果

> ID：14241874
> 
> 赞同：0
> 
> 时间：2013-01-09T16:34:15.893
> 
> 标签：javascript, testing, phantomjs, qunit

我想在 TeamCity 中对 JavaScript 使用单元测试。我正在使用 QUnit、phantomjs 和 QUnitTeamCityDriver。

但我有一些问题。我得到以下测试结果：

```
##teamcity[testFailed type='comparisonFailure' name='Check myFunction1> Expected 1 assertions, but 2 were run'] 
```

这是我的测试：

```
asyncTest("Check myFunction1", function () {
    $.mockjaxClear();
    $.mockjax({
        url: "www.someUrl.com",
        responseText: '[{"Uid": "1"}]'
    });

    var real = window.getUrl;
    window.getUrl = function (rowdata, readonly, controller, action) {
        start();
        equal(controller, "Encounter");
        equal(action, "Save");

        window.getUrl = real;
    };

    myFunction1("123", false, "Encounter", "Save");
}); 
```

如果我运行一个测试，它可以正常工作。如果我运行大量测试，则会发生错误。在测试中，我显然没有说明我期望在这个测试中有多少断言，为什么会得到这样的结果？

拜托，有人能帮帮我吗？我该如何解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T20:34:46.243

您是否尝试过在测试中加入断言的数量？

对所有测试都这样做是一种很好的做法，尤其是异步测试。这样，您可以确定您的所有断言都经过测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T01:27:22.520

根据您对@MForMarlon 的回答的评论：

> 但在这种情况下，我也从另一个测试中得到结果。

我注意到，当拆解出错时，我会收到一个额外的失败断言。模块（）中有拆解功能吗？

# jsf - 使用 JSF 1.2 添加输入文件

> ID：14241877
> 
> 赞同：2
> 
> 时间：2013-01-09T16:34:31.790
> 
> 标签：jsf, file-upload, richfaces, jsf-1.2

我需要以专用于上传文件的形式上传。在我的项目中，我可以使用 JSF 1.2 和 RichFaces 3.3.3 但我不能使用，`<rich:fileUpload/>`因为我的客户想要一个简单的输入，就像`<input type="file"/>`.

如果可以的话，我会使用 Primeface 或 Tomahawk 的文件上传，但我被禁止，我不能使用其他库，我也不能使用 Servlet 3.0 下 Apache 文件上传。我现在能做什么？我见过其他类似的问题，但他们可以使用其他库，我不能，我受到限制......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:49:30.120

*自从我不得不为 JSF 编写 MIME 解析器以来已经有一段时间了，但这就是我对这个过程的记忆。*

您将需要编写一个解析器来从`multi-part/formdata`有效负载中提取数据。[W3 网站上](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)有一个很好的[概述`multi-part/formdata`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.2)。

您将需要决定是否定位：

*   具有普通表单/控件的非 JSF servlet
*   带有 JSF 表单和自定义文件上传控件的 JSF servlet

**以普通 servlet 为目标**

只要上传 POST 操作不需要调用依赖于 JSF 上下文（托管 bean 等）的代码，这将是一种更简单的方法。

您的 servlet 解析来自输入流的数据并根据需要对其进行操作。

**以 JSF 视图/动作为目标**

在这里，您将需要修饰请求（最好使用 a [`HttpServletRequestWrapper`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequestWrapper.html)）以将解析的[参数](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestWrapper.html#getParameterMap%28%29)提供给 JSF 框架。这通常在从 HTTP 标头中检测帖子类型的[过滤器中完成。](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)在调用任何表单操作之前，需要决定文件数据的存储位置以及如何将该数据公开给托管 bean。

您还需要考虑是否要为文件上传输入类型创建自定义 JSF 控件，或者是否可以使用纯 HTML 元素。

*值得检查您无法使用的解析器/控件的功能，以确保您提供简单的功能 - 例如最大有效负载大小，以防止攻击者将千兆字节的数据上传到您的应用程序。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:50:30.713

为了用可接受的解决方案解决这个问题，我创建了一个普通表单和一个 servlet，servlet 接收`multipart/form-data`请求并使用[`org.ajax4jsf.request.MultipartRequest`](http://docs.jboss.org/richfaces/3.3.X/3.3.3.Final/en/apidoc_impl/org/ajax4jsf/request/MultipartRequest.html)RichFaces 3.3.3 中包含的内容来解析接收到的参数和附件，然后我将`File`实例保存在会话中并我在 JSF 上下文中恢复它。

**xhtml:**

```
<a4j:form >
    <a4j:jsFunction name="finishUpload" 
            action="#{importacaoController.actionUploadArquivoDadosXX}"
            reRender="uploadedFile,globalMensagens" />
    <a4j:jsFunction
        name="tipoNaoSuportado" reRender="globalMensagens" action="#{importacaoController.actionTipoNaoSuportado }"
        />
</a4j:form>
<form target="uploader" id="uploaderForm" action="#{request.contextPath}/MyServlet"
    method="post" enctype="multipart/form-data" style="position: absolute;margin: -210px 0 0 300px;">
    <div class="modulo-6-12">
        <label for="uploadFileField">Anexar arquivo</label><br/>
        <input type="file" id="uploadFileField" name="upload" onchange="jQuery('#uploaderForm').submit();" />
    <br />
    <small><h:outputText id="uploadedFile" value="#{importacaoController.arquivoConfig.name}" /></small>
    </div>
</form>
<iframe id="uploader" width="0" height="0" src="" style="display: none; border: 0; margin:0;padding:0;"></iframe> 
```

***小服务程序：***

```
public class MyServlet extends HttpServlet {

    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String encoding = request.getCharacterEncoding();
        if(encoding == null) request.setCharacterEncoding("UTF-8");
        MultipartRequest mpRequest = new MultipartRequest(request,true,10*1024*1024,"importarXX");
        String field = "upload";
        Object o =mpRequest.getFile(field);
        if(o instanceof File)
        {
            File file = (File)o;
            HttpSession sess = request.getSession();
            String name = mpRequest.getFileName(field);

            Writer w = response.getWriter();
            w.write("<html><head><script>");
            if(!name.endsWith(".xls"))
            {

                w.write("parent.window.tipoNaoSuportado()" +
                        //"alert('Só são permitidos arquivos com extensão .xls');" +
                        "</script></head><body></body></html>");
                w.close();
                file.delete();
                return;
            }

            sess.setAttribute("importarXXFile", o);
            sess.setAttribute("importarXXFileName", name);
            w.write("parent.window.finishUpload();</script></head><body>Sucesso</body></html>");
            w.close();
        }
    }
} 
```

**控制器：**

```
public boolean actionUploadArquivoDadosXX(){
    flgTipoNaoSuportado = false;
    HttpSession sess = ((HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest()).getSession();
    File uploadedFile = (File) sess.getAttribute("importarXXFile");
    String uploadedFileName = (String) sess.getAttribute("importarXXFileName");
    boolean ret = false;

    if(uploadedFile != null && uploadedFileName != null){
        BeanArquivoUpload arquivo = new BeanArquivoUpload();
        arquivo.setFile(uploadedFile);
        arquivo.setName(uploadedFileName);
        arquivo.setFileSize(uploadedFile.length());
        setArquivoConfig(arquivo);
        ret = true;
    }
    else
    {
         setArquivoConfig(null);
    }

    sess.removeAttribute("importarXXFile");
    sess.removeAttribute("importarXXFileName");

    return ret;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:00:22.747

我以前也遇到过同样的问题。我通过在用户单击浏览按钮时打开一个弹出窗口解决了这个问题，这个新的弹出窗口直接链接到一个支持文件上传和下载的 servlet。上传文件后，servlet 在加载 servlet 主体时调用 window.close() 直接关闭弹出窗口。以下是所做的更改：

在提示用户输入文件的 addItem.jsp 中：

```
<script type="text/javascript">
       ...
  function newWindow()
  {
    popupWindow = window.open('addItemImage.jsp','name','width=200,height=200');
  }
    ...
 </script>

     <f:view>
         <h:form id="search" onsubmit="return validateDetails()">
          ...

           <h:panelGroup>
                <font color="black">Item Image :</font>
           </h:panelGroup>
           <h:panelGroup>
                <input type="button" value="Upload Image" onClick="newWindow()"/>
           </h:panelGroup>

          ...
          </h:form>
      </f:view> 
```

在打开的新弹出窗口中：addItemImage.jsp

```
<script type="text/javascript">
    function validate()
    {
        var file = document.getElementById("file").value;
        if(file == null || file == "")
            return true;
        if(file.indexOf(".jpg") == -1 && file.indexOf(".gif")  && file.indexOf(".bmp") == -1 && file.indexOf(".jpeg") == -1) 
        {
            alert("Invalid File Format!! Please upload jpg/bmp/gif");
            return false;
        }
        return true;
    } 
</script>
<body>
    <form enctype="multipart/form-data" method="post" action="FileUploaderServler.view" onsubmit="return validate()">
        <input type="file" name="file" id="file" />
        <input type="submit" value="Upload Image">
    </form>
</body> 
```

这将发布到一个 servlet，然后该 servlet 将呈现图像并将其保存在一个地方。FileUploaderServlet.java

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        List<FileItem> items = null;
        try 
        {
             MultipartHTTPServletRequest multipartHTTPServletRequest = new MultipartHTTPServletRequest(Connection.getRequest());
            items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(multipartHTTPServletRequest);
        } 
        catch (FileUploadException e) 
        {
            e.printStackTrace();
        }
        if(!Util.isNullList(items))
        {
            for (FileItem item : items) 
            {
                if (!item.isFormField()) 
                {
                    String itemName = item.getFieldName();
                    InputStream filecontent = null;

                    try 
                    {
                        filecontent = item.getInputStream();
                    } 
                    catch (IOException e) 
                    {
                        e.printStackTrace();
                    }

                   /* String currDirPath = System.getProperty("user.dir"); // C:\Users\KISHORE\Desktop\eclipse
                    File file = new File(currDirPath+"\\itemImages");*/
                    new File(Constants.ABS_FILE_PATH_TO_IMAGES).mkdir();
                    File fw = new File(Constants.ABS_FILE_PATH_TO_IMAGES+"\\"+Connection.getRequest().getSession().getId()+".jpg"); // E:\Kishore Shopping Cart\.metadata\.plugins\org.eclipse.wst.server.core\tmp0\wtpwebapps\ShoppingCart\WEB-INF\itemImages\EC34EEE58065AD674192D3D57124F07E.jpg
                    fw.delete();
                    fw.createNewFile();
                    try 
                    {
                        item.write(fw);
                    } 
                    catch (Exception e) 
                    {
                        e.printStackTrace();
                    }
                }
            }

        }

        PrintWriter out = response.getWriter();
        out.print("<html><title>Add Image to Item</title><body onload='window.close()'>Uploaded Successfully!!</body>");
        System.out.print("</html>");
    } 
```

此 servlet 在配置完成保存文件后，将直接关闭先前打开的弹出窗口。

所以这样我就可以使用托管bean，jsf 1.2并实现字段上传。我在stackoverflow上找到了其他方法，但觉得实现起来有点复杂。

# excel - EntireRow.Delete 性能问题

> ID：14241882
> 
> 赞同：1
> 
> 时间：2013-01-09T16:34:40.700
> 
> 标签：excel, vba

我正在尝试删除所有具有空白值的行。我有大约 15,000 行，不超过 25% 是空白的。这是我的代码。

```
Columns("A:A").Select 
Selection.SpecialCells(xlCellTypeBlanks).Select
Selection.EntireRow.Delete 
```

第一行和第二行代码工作正常，但是当我尝试添加第三行时，我的电子表格超时并且我留下了（未响应）消息。我认为我的问题是我试图一次删除的行数，因为当我减少内容量时代码有效。任何人都可以建议修复吗？为什么excel不能处理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:10:19.760

这需要这么长时间的原因是大量的*非连续*范围`SpecialCells(xlCellTypeBlanks)`

更好的方法是在删除前对数据进行排序，这样只删除一个*连续的*范围

然后，您可以在删除后恢复原始排序顺序，如下所示：

```
Sub Demo()
    Dim rng As Range
    Dim rSortCol As Range
    Dim rDataCol As Range
    Dim i As Long
    Dim BlockSize As Long
    Dim sh As Worksheet
    Dim TempCol As Long

    Application.ScreenUpdating = False
    Application.Calculation = xlCalculationManual
    Application.EnableEvents = False

    Set sh = ActiveSheet
    Set rng = sh.UsedRange
    With rng

        ' Add a temporary column to hold a index to restore original sort
        TempCol = .Column + .Columns.Count
        Set rSortCol = .Columns(TempCol)
        rSortCol.Cells(1, 1) = 1
        rSortCol.Cells(1, 1).AutoFill rSortCol, xlFillSeries
        Set rng = rng.Resize(, rng.Columns.Count + 1)

        Set rDataCol = rng.Columns(1)

        ' sort on data column, so blanks get grouped together
        With sh.Sort
            .SortFields.Clear
            .SortFields.Add Key:=rDataCol, _
                SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
            .SetRange rng
            .Header = xlNo
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With

        ' delete blanks (allow for possibility there are no blanks)
        On Error Resume Next
        Set rng = rDataCol.SpecialCells(xlCellTypeBlanks)
        If Err.Number <> 0 Then
            ' no blank cells
            Err.Clear
        Else
            rng.EntireRow.Delete
        End If
        On Error GoTo 0

        ' Restore original sort order
        With sh.Sort
            .SortFields.Clear
            .SortFields.Add Key:=rSortCol, _
                SortOn:=xlSortOnValues, Order:=xlAscending, DataOption:=xlSortNormal
            .SetRange rng
            .Header = xlNo
            .MatchCase = False
            .Orientation = xlTopToBottom
            .SortMethod = xlPinYin
            .Apply
        End With

    End With

    ' Delete temp column
    sh.Columns(TempCol).EntireColumn.Delete

    Application.ScreenUpdating = True
    Application.Calculation = xlCalculationAutomatic
    Application.EnableEvents = True

End Sub 
```

我的测试（约 15000 行，每 4 行空白）将时间从约 20 秒减少到约 150 毫秒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:43:23.867

您的代码在电子表格的所有行上运行；在使用过的行上运行它会更快。

像这样的东西：

```
Range("A1", Cells(Sheet1.Rows.Count, 1).End(xlUp).Address).SpecialCells(xlCellTypeBlanks).EntireRow.Delete 
```

或者，您能否对数据范围进行排序 - 将所有空白组合在一起......

# css - 更少的变量：@@var

> ID：14241885
> 
> 赞同：1
> 
> 时间：2013-01-09T16:34:43.363
> 
> 标签：css, variables, less

有人可以在 Less.org 文档中解释这个变量示例吗：

> 也可以使用变量名定义变量：

```
@fnord: "I am fnord.";
@var: 'fnord';
content: @@var; 
```

> 编译为：

```
content: "I am fnord."; 
```

让我困惑的部分是双@。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:42:57.597

这句话解释了自己

```
It is also possible to define variables with a variable name: 
```

所以：`content: @@var;`实际上 `content: @fnord;`是`content: "I am fnord.";`

**注意：** *您可以`@@`将指针表示法`@`视为变量*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:38:57.617

的`@var`部分`content: @@var`计算为`@var`变量的值是`fnord`，这使得它`content: @fnord`。

`@fnord`反过来，该部分被评估`@fnord`为`"I am fnord."`使其成为的变量的值`content: "I am fnord."`'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:47:38.117

很像[变量变量](http://php.net/manual/en/language.variables.variable.php)。动态变量是您在创建变量之前可能不知道变量的名称或其值。我发现 PHP 示例非常有助于解释正在发生的事情。

假设您有一个怪物站点，但您不知道需要什么变量。您不想将它们全部包含在内，因此在运行时您可以生成动态变量。

如果没有循环和您从 PHP 中获得的强大功能，则不确定 @@ 是否对普通普通用户有帮助。

# r - 提高 R 脚本效率

> ID：14241889
> 
> 赞同：0
> 
> 时间：2013-01-09T16:34:52.283
> 
> 标签：r

我正在尝试编写一个 R 脚本，作为第一步，`dist()`为输入矩阵的每一行计算和其他内容，然后作为脚本的第二步，使用在第一步中获得的每对输出矩阵来制作另一个计算。我的问题是我无法“保存”从第一步获得的所有矩阵。谁能告诉我一个好的策略？

我的代码如下所示：

```
n<- nrow (aa)
output <- matrix (0, n, n)
for (i in 1:n)
{
    for (j in i:n)
    {
        akl<- function (dii){
            ddi<- as.matrix (dii)
            m<- rowMeans(ddi)
            M<- mean(ddi)
            r<- sweep (ddi, 1, m)
            b<- sweep (r, 2, m)
            return (b + M)  
            }
        A<- akl(dist(aa[i,]))
        B<- akl(dist(aa[j,]))
            V <- sqrt ((sqrt (mean(A * A))) * (sqrt(mean(B * B))))
        if (V > 0) {
            output[i,j] <- (sqrt(mean(A * B))) / V else output[i,j] <- 0
            }
    }
} 
```

我想从`akl`函数中获取所有生成的矩阵，然后将它们用于其余的计算。我在这里展示的脚本在时间方面非常昂贵，因为它每次都计算 akl 并且对于大型输入矩阵是一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:47:31.973

您不需要在 j 循环内重新计算 A ，将它带到外面。

此外，您不需要每次都重新定义循环内的函数（假设它不依赖于循环内的任何内容）。

```
n<- nrow (aa)
output <- matrix (0, n, n)
akl<- function (dii){
            ddi<- as.matrix (dii)
            m<- rowMeans(ddi)
            M<- mean(ddi)
            r<- sweep (ddi, 1, m)
            b<- sweep (r, 2, m)
            return (b + M)  
            }
for (i in 1:n)
{
    A<- akl(dist(aa[i,]))
    for (j in i:n)
    {
        B<- akl(dist(aa[j,]))
            V <- sqrt ((sqrt (mean(A * A))) * (sqrt(mean(B * B))))
        if (V > 0) {
            output[i,j] <- (sqrt(mean(A * B))) / V else output[i,j] <- 0
            }
    }
} 
```

试试看，运行你的测试（你有写过的测试，对吧？）然后看看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T00:20:21.213

既然您已经对代码进行了改进，请查看编译器包。通过使用带有 enablejit(3) 的编译器，您可以节省大量循环脚本的时间。

# javascript - 单击删除附加的 Div (JQuery)

> ID：14241894
> 
> 赞同：1
> 
> 时间：2013-01-09T16:34:55.360
> 
> 标签：javascript, jquery, html, string, jquery-selectors

我在单击按钮时删除附加的 div 时遇到了一些问题。

当我使用 hide() 时，我在美学上得到了正确的行为，但它实际上并没有删除我想要的新 div，因为这些数据将被发送到 web 服务。

**查询：**

```
$('a.addListOVM').click(function(e){    
    e.preventDefault();         
    $('.addCardOVM').append('<div class="divform"><label>' + $('.my_select').find(':selected').val() + '</label>' + '<a class="removed" href="">-</a></div>');

    $('.removed').click(function(e){            
        e.preventDefault();
        $(this).closest('.divform').hide();
    });                     
}); 
```

模板 HTML：

```
<div class="divform">
 <select class="my_select" name="vlans_{$NetworkDTO->id}[]">
  {foreach from=$arrNetworkDTO item=NetworkDTO name=arr}
    <option class="addOvmCardList" value="{$NetworkDTO->name|escape}">{$NetworkDTO->name}</option>
  {/foreach}
 </select>
<a href="" class="addListOVM">+</a> 
</div> 
```

按钮本身是动态生成的（参见第 3 行）并且在单击时，我希望它在不关闭整个窗口的情况下删除特定的附加 div，当我使用`.remove()`而不是`hide()`.

那么，谁能告诉我：

1.  为什么使用 remove() 而不是 hide() 会关闭我的整个模板窗口而不是删除那个单独的 div，就像 hide() 看起来一样。

2.  为什么，当我创建了附加 div 的多个实例时，.removed click 处理程序是否会被多次调用（如果您创建两个实例，删除一个循环一次，删除第二个循环两次等）

3.  如何在实际删除附加的 div 时获得 hide() 的物理功能？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T16:40:27.320

> 1\. 为什么使用 remove() 而不是 hide() 会关闭我的整个模板窗口而不是删除那个单独的 div，就像 hide() 看起来一样。

我不知道您所说的模板窗口是什么意思，所以我在这里无法提供帮助。

> 2.为什么，当我创建了附加 div 的多个实例时，.removed click 处理程序会被多次调用（如果创建两个实例，删除一个循环一次，删除第二个循环两次等）

因为每当执行 click 事件处理程序并创建一个新的`div`时，都会将一个新的事件处理程序绑定到所有`.removed`元素，包括刚刚创建的元素和所有其他现有元素。

> 3\. 如何在实际删除附加的 div 的同时获得 hide() 的物理功能？

可能和上面的问题有关。对删除 的事件处理程序使用[**事件委托**](http://api.jquery.com/on/#direct-and-delegated-events)`div`：

```
$('a.addListOVM').click(function(e){    
    e.preventDefault();         
    $('.addCardOVM').append('<div class="divform"><label>' + $('.my_select').find(':selected').val() + '</label>' + '<a class="removed" href="">-</a></div>');                 
});

$('.addCardOVM').on('click', '.removed', function(e){            
    e.preventDefault();
    $(this).closest('.divform').remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:41:37.600

使用 jQuery Live 函数来选择动态添加的 HTML。

```
 $('.removed').live('click',function(e){            
    e.preventDefault();
    $(this).closest('.divform').hide();
}); 
```

# service - Angular 服务应该有状态吗？

> ID：14241900
> 
> 赞同：30
> 
> 时间：2013-01-09T16:35:11.357
> 
> 标签：service, angularjs, state

最近我和一些同事正在讨论 AngularJS 服务是否应该有状态。我们提出了一些支持和反对它的论点，我想就这个主题获得更多的想法和反馈。在我的搜索中，我发现[了这一点](https://groups.google.com/forum/#!msg/angular/k3FSnv8IJNU/zptmyFWoRsQJ)，但似乎没有提到任何明确的最佳实践。在无客户端的世界中，服务永远不应该保持状态，但我开始认为它可能是可接受的客户端，因为它是一个不同的问题。

**服务保持状态的原因：**

1.  该服务不会被多个线程访问。每个浏览器都有自己的服务实例。
2.  允许服务仅保存它关心的状态，而不是将其存储在 rootScope 中。封装

**服务不保持状态的原因：**

1.  服务不再是幂等的。调用函数可能会改变状态，因此在根据服务的状态调用它时可能会产生不同的结果。
2.  我认为总的来说这将更容易测试。

一种可能解决“用于保持状态的服务”部分中的＃2 的方法是在包含应用程序当前状态的 rootScope 上设置一个 appState 对象。然后所有的状态将被收集在一个位置，然后你只需在你的服务中提取你需要的东西。我发现了这个并想知道

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T16:44:45.853

这可能取决于您所说的“状态”是什么意思，但在许多情况下，我认为答案是肯定的：服务*应该*保持状态。

例如，如果您有一个负责与 API 通信的服务，则该服务可以保持身份验证状态。

顺便说一句，我不确定 AngularJS 服务的幂等性有多重要——它们是单例的，因此天生就有一些状态。您可以（并且在某些情况下必须）在服务上创建幂等方法，但这是一个单独的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-09T18:02:42.253

在 AngularJS 中，服务[是通过工厂函数传入的](http://code.angularjs.org/1.2.16/docs/guide/services)。基本上它们是可以包含某些状态的对象（例如，用于缓存或存储执行其操作所需的数据）。

一种可以同时考虑具有/不具有状态的缺点的一个好的解决方案是，当服务（实际上可能是函数）返回包含状态的对象时。

看一下`$http`服务：你可以得到这个服务调用的实例

```
var x = $http({url:'...'}); 
```

然后打电话给

```
var result = x.get() //actually `$http.get` is shortcut of this operation 
```

与`ngResource`: 使用服务相同，您可以获得具有某些可以执行所需操作的状态的对象。

所以基本上我认为这是最好的选择：从某一点上，您可以通过将可以通过操作修改的状态移动到单独的对象中来避免“副作用”，而不是存储在服务本身中，但可以在该对象中具有特定状态以便能够存储自定义信息（如身份验证信息等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T17:42:13.043

IMO 是的，服务可以有状态。我说“可以”作为服务可以被认为类似于经典的非客户端服务 - 提供者，但它也可以意味着完全不同的东西，在 angularJS 中。例如，作为应用程序中的 rootScope-y 单实例元素，它可以单独用于管理状态。就我而言，这使我能够确保许多应用程序的状态结构相同，即使在引导过程中为每个应用程序定义了它们的单独状态结构，但当该模块发生更改时，会话状态之类的东西总是相同并更新。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2014-01-07T04:42:58.767

服务不应该有状态的原因是当你有多个线程访问服务时它会导致竞争条件。

服务中状态的一个常见问题是：

1.  线程 1 写入状态
2.  线程 2 写入状态
3.  线程 1 从状态读取
4.  线程 2 从状态读取

线程 1 现在有错误的值。

话虽这么说，javascript 目前是单线程的，所以你不会遇到这样的线程访问问题。但是，如果我有一个服务，其中多个异步 $http 调用都写入同一个服务变量，我会担心。如果只有这样我晚上能睡得更好，我会尝试编写我所有的服务方法，以便它们成为实际数据的传递。

相反，您可以考虑将状态尽可能多地放在后端，而不是在服务中维护状态。可以维护和查询诸如“经过身份验证”甚至宽度和高度之类的内容。这可以打开一些可能性，允许用户离开应用程序，返回并找到他们的所有偏好设置并登录。您可以在 cookie 中存储会话 ID 并将所有这些内容保存在后端。

如果您确实采用了具有单独对象来存储状态的路线，那么当状态中的某些内容发生更改时，您可能可以从服务中向它发送 $emit：[如何从工厂发出事件](https://stackoverflow.com/questions/14056874/how-to-emit-events-from-a-factory)。这将产生一个很好的副作用，即让多个服务能够修改一个统一的应用程序状态，因为状态没有存储在任何一个服务中（或者更糟糕的是分散在多个服务中）。

# javascript - 调用对象的函数而不声明“新”？

> ID：14241904
> 
> 赞同：-1
> 
> 时间：2013-01-09T16:35:36.097
> 
> 标签：javascript, object

下面的代码被破坏了，它需要工作的是`var thing = new thing();`，我明白这一点。我的问题是下面的代码有没有办法在不声明新的情况下工作？`thing`或`something`对象中有什么东西？

```
var thing = function(){

    var something = {};

    something.num = function(){
        return 5;
    };

    return something;

};

console.log(thing.num()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:40:57.740

我相信你正在寻找这个：

```
var thing = (function(){
    var something = {};
    something.num = function(){
        return 5;
    };
    return something;
}());

console.log(thing.num()); 
```

这将立即执行该函数，并将返回值 ( `something`) 分配给`thing`. 您的原始代码将函数本身分配给`thing`. 如果要保留原有功能，可以使用`console.log(thing().num())`.

# android - Android：如果这样，那么改变菜单？

> ID：14241910
> 
> 赞同：1
> 
> 时间：2013-01-09T16:35:55.707
> 
> 标签：android, eclipse, if-statement, menu

我希望选项菜单及其功能在我命令它时改变。

例如：布局是全屏，选项和退出。当我单击全屏时，我希望菜单更改，使其现在看起来像：退出全屏，选项，退出。

我还不知道编码的一切，所以我希望你能给出一些示例代码。

提前致谢！

这是菜单的代码：

```
 @Override
    public boolean onCreateOptionsMenu (Menu menu) {

     getMenuInflater().inflate (R.menu.menu, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) 
        {

            case R.id.help:
                Intent intent = new Intent(this, help.class);
                startActivity(intent);
            break;

            case R.id.exitfullscreen:
                finish();  
            break;

            case R.id.quit:
                 moveTaskToBack(true);
            break;

            default:    
            break;
        }
        return false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:50:48.140

按照您的评论试试这个：

在你的 fullscreen.java

```
 @Override
    public boolean onCreateOptionsMenu (Menu menu) {

     getMenuInflater().inflate (R.menu.menu, menu);
        MenuItem mu = menu.findItem(R.id.exitfullscreen);
        mu.setTitle("Exit Full Screen");
        return true;
    } 
```

PS 在需要更改菜单项文本（标题）的地方和时间应用此功能。

# java - Java：从 POST 获取响应

> ID：14241912
> 
> 赞同：0
> 
> 时间：2013-01-09T16:36:00.857
> 
> 标签：java, json, restful-architecture

我正在开发一个应用程序。我正在使用 spring 和 RESTful 网络服务。我将 JSON 发送到网络服务并收到一个。

我使用 firefox RESTClient 插件测试了 web 服务。但现在我正在开发客户端（将 json 发送到 web 服务并接收响应的部分）。这是发送 JSON 的部分：

```
 String reqStr = "{\"customer\":\"test\",\"age\":\"24\"}";
            String request =  "example.com";        
            URL url = new URL(request);
            HttpURLConnection rc = (HttpURLConnection)url.openConnection();
            rc.setRequestMethod("POST");
            rc.setDoOutput( true );
            rc.setDoInput( true ); 
            rc.setRequestProperty( "Content-Type", "application/x-www-form-urlencoded" );
            rc.setRequestProperty("charset", "utf-8");
            int len = reqStr.length();
            rc.setRequestProperty( "Content-Length", Integer.toString( len ) );
            rc.connect();    
            OutputStreamWriter out = new OutputStreamWriter( rc.getOutputStream() ); 
            out.write( reqStr, 0, len );
            out.flush(); 
```

我认为这不是通过 POST 发送 JSON 的最佳方式。但我真正的问题是。

1.  如何在我的 Java 代码中接收 POST 响应？
2.  有没有办法测试这个？

亲切的问候，夏尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:38:38.943

您可以使用参数来注释正在调用的`@Form`函数。这将允许您读取这些值，类似于您需要解析查询字符串时 的`@QueryParam`工作方式。`GET`

在测试方面，您需要测试来自请求的 JSON 数据，这应该是相当简单的。

# php - 如何在 TYPO3 调度程序任务中为 tt_news 记录生成 URL？

> ID：14241915
> 
> 赞同：0
> 
> 时间：2013-01-09T16:36:07.497
> 
> 标签：php, typo3, scheduler, tt-news

我目前正在为 TYPO3 (4.7.7) 编写调度程序。

在我的任务中，我需要一些来自 tt_news 的记录的 URL。我尝试像在“pxa_newstofb”扩展中那样“启动”前端，但这不起作用。这是我当前的课程，应该生成指向新闻记录的链接：

```
<?php

abstract class tx_myextension_newshelper {

    /**
     * @var tslib_cObj
     */
    protected $cObj;

    function __construct() {
    }

    /**
     * Creates a URL for the given news
     *
     * @param $news
     * @return string
     */
    public function link($news) {
        // Init frontend
        $this->initTSFE($news['pid']);

        $newsLink = $this->cObj->typoLink_URL(array(
            'no_cache' => false,
            'parameter' => $news['pid'],
            'additionalParams' => '&tx_ttnews[tt_news]=' . $news['uid'],
            'useCacheHash' => true
        ));

        if (substr($newsLink, 0, 7) != 'http://' || substr($newsLink, 0, 8) != 'https://') {
            $newsLink = $this->host($news) . $newsLink;
        }

        return $newsLink;
    }

    public function host($news) {
        return 'http://localhost/';
    }

    /**
     * Initialize frontend
     *
     * @param int $pageUid
     */
    public function initTSFE($pageUid = 1) {

        global $GLOBALS, $TSFE, $TYPO3_CONF_VARS;

        $this->cObj = t3lib_div::makeInstance('tslib_cObj');
        $temp_TTclassName = t3lib_div::makeInstance('t3lib_timeTrack');
        $GLOBALS['TT'] = new $temp_TTclassName();
        $GLOBALS['TT']->start();

        $TSFE = new tslib_fe($TYPO3_CONF_VARS, $pageUid, 0, 0);
        $TSFE->connectToDB();
        $TSFE->initFEuser();
        $TSFE->fetch_the_id();
        $TSFE->getPageAndRootline();
        $TSFE->initTemplate();
        $TSFE->forceTemplateParsing = 1;
        $TSFE->getConfigArray();
        $TSFE->initUserGroups();
        $TSFE->initTemplate();
        $TSFE->determineId();

        $GLOBALS['TSFE'] = $TSFE;
        $this->cObj->start(array(),'');
    }
}

?> 
```

每次如果我执行我的任务，就会显示一个没有 css 的“404”（前端）页面。是否有为 tt_news 扩展创建前端 URL 的智能解决方案？

系统：Typo3 CMS 4.7.7 介绍包，带有 RealURL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T17:47:27.500

好的解决方案是使用 Dmitry Dulepov 的扩展名为“pagepath”。您可以阅读此分机中的文档 - 很简单。

# jquery - Jquery在包含html字符串的变量中添加类

> ID：14241917
> 
> 赞同：4
> 
> 时间：2013-01-09T16:36:08.173
> 
> 标签：jquery, class, object

我有这个变量，我想给它添加一个类。我尝试了这种方法，但这绝对行不通

```
var someVar = '<i class="firstClass"></i>';// Html Markup to be used later.
    someVar.addClass('secondClass'); 
```

我需要一种不同的方法来向 html 标记添加新类。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:40:05.353

您只能在 HTML 元素上使用 addClass，因此您需要将变量设置为 DOM 元素（例如`$('<i>')`）：-

```
var someVar = $('<i>', {'class': 'firstClass'});
someVa.addClass('secondClass'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-20T19:00:19.553

当我们需要从我们从其父级提取的某个 DOM 组件中获取 html 字符串时（例如：可排序的助手），那么我们可以先将该字符串转换为 jquery 对象。

例子：

```
var thehtml = $(ui.helper).html();
    thehtml = $(thehtml); // convert to jquery object
    thehtml.addClass("yourClass"); // we can then assign new class

    ui.helper.replaceWith(thehtml); // do something you want with it 
```

在你的情况下

```
var someVar = '<i class="firstClass"></i>'; // Html Markup to be used later.
    someVar = $(someVar); // convert to jquery object
    someVar.addClass('secondClass'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T16:38:17.353

```
var someVar = $('<i class="firstClass"></i>'); //embedded string in jquery object
someVar.addClass('secondClass'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T17:04:55.357

你可以通过三种方式做到这一点：

1.  您让您的 HTMl 标记首先执行，以便您可以获取 DOM 元素并对其进行操作。
2.  艰难而丑陋的方式是将标记视为字符串并使用“子字符串”和/或“切片”来操作字符串。
3.  分解标记并将其保存在字符串数组中，例如 array[0] = i class=; 数组[1] = 第一类；数组[2] = /i>;

    （我是stackoverflow的新手，因此不知道如何在答案中编写HTML，但我希望你明白我试图解释的内容）然后你可以通过简单地将类名连接到数组[1]来添加任意数量的类（数组[1] +='类名'）。当你真正想要使用它时，通过添加所有位来重新调整整个标记。它仍然很丑，但你至少会得到你想要的。

# xml - NLog不输出日志文件

> ID：14241924
> 
> 赞同：2
> 
> 时间：2013-01-09T16:36:35.747
> 
> 标签：xml, nlog

好的，我正在尝试在我的项目中实现 NLog，并且我已经设定了一个目标：

```
<target name="logfile" xsi:type="File" fileName="${basedir}/logs/${shortdate}/Report/log.txt" /> 
```

这有效并输出我的测试日志。但是，如果我更改`shortdate`为`longdate`：

```
<target name="logfile" xsi:type="File" fileName="${basedir}/logs/${longdate}/Report/log.txt" /> 
```

或使用该`${time}`属性，我没有得到任何日志。根据他们的[文档](http://nlog-project.org/wiki/Layout_renderers)，`longdate`并且`time`两者都应该是有效的。我错过了什么吗？它们实际上不是有效的`fileName`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T20:00:31.500

我怀疑 ${longdate} 会导致文件名无效（Windows 不允许使用“:”，如 /logs/01-10-2013 12:24:25.2567/Report/log.txt）。

如果您将以下内容添加到您的 nlog.config

```
<nlog 
    internalLogFile="c:\temp\nlogproblems.txt"  
    throwExceptions="true"  
    xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

您会收到有关此效果的警告

> 2013-01-10 14:55:21.0436 异步处理程序 NLog.NLogRuntimeException 中的错误异常：NLog 中发生异常 ---> System.IO.FileNotFoundException：文件名、目录名或卷标语法不正确。（来自 HRESULT 的异常：0x8007007B）

编辑：添加文件时间示例。

# javascript - jquery: on('click', ...) 不起作用， on('mouseenter', ...) 起作用

> ID：14241930
> 
> 赞同：0
> 
> 时间：2013-01-09T16:37:03.343
> 
> 标签：javascript, jquery, click

如果有一个奇怪的问题，希望你们能在这里帮助我。

在我的 javascript 代码中，我创建了一个 div

```
<div class="..." id="getMoreOfX"><span class="...">More info</span></div> 
```

在下面我尝试将事件处理程序附加到它：

```
$(document).on('click', '#getMoreOfX', function(){
  alert("Click: " + $(this).attr('id'));
}); 
```

没有错误被抛出，但它不做*任何事情*。奇怪的是，仅仅将“click”更改为“mouseenter”（或“mouseleave”）确实会导致它做它应该做的事情。尤其是最后一个属性让我感到困惑。

关于可能导致这种情况的任何想法？

NB jquery 版本是 1.7，我在 FF、Opera 和 Chrome 中对此进行了测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:53:00.763

jQuery 中的事件委托的工作原理是 JavaScript 中的事件冒泡（或传播）到 DOM 树一直到文档。但是，如果您在 DOM 中较低级别的元素上有事件处理程序来阻止传播发生 - 无论是通过调用`event.stopPropagation()`还是`return false`- 那么事件委托将不再起作用。

例如，如果我有以下 HTML：

```
<div id="outer">
  <div id="inner">
    Testing event delegation <br/>
    <input type="button" value="Click me" id="test-button"/>   
  </div>
</div> 
```

然后添加以下 jQuery：

```
$('#outer').on('click', '#inner', function(e) {
  console.log(this.id);
}); 
```

然后单击内部的任意位置，`<div id="inner">`将导致`inner`输出到控制台。但是，如果我将以下事件处理程序添加到按钮：

```
$('#test-button').click(function(e) {
 return false; 
}); 
```

然后单击文本继续像以前一样运行 -`inner`输出到控制台 - 但单击按钮将不会输出任何内容，因为已阻止事件传播。

这可以在[这个 jsFiddle](http://jsfiddle.net/7qHfD/)中观察到。

# awk - awk 如何区分字符串和数字

> ID：14241934
> 
> 赞同：0
> 
> 时间：2013-01-09T16:37:18.773
> 
> 标签：awk

不同的文件处理程序如何读取文件。我假设他们中的大多数人将其作为字符串读取。例如在 awk 中，如果文件随后根据分隔符拆分，那么它如何区分数字字段和字符串字段（如果未指定 CONVFMT）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T08:13:33.797

如果您将其视为字符串，它将是一个字符串，如果您尝试执行数字操作，它将被解析为一个数字并执行此操作。

# sql - 如何在 SQL 中生成通向给定节点的层次结构路径？

> ID：14241936
> 
> 赞同：5
> 
> 时间：2013-01-09T16:37:23.843
> 
> 标签：sql, sql-server, sql-server-2008-r2, hierarchy

在我的 MS SQL 2008 R2 数据库中，我有这张表：

```
TABLE [Hierarchy]
[ParentCategoryId] [uniqueidentifier] NULL,
[ChildCategoryId] [uniqueidentifier] NOT NULL 
```

我需要编写一个查询，该查询将生成通向给定节点的所有路径。

可以说我有以下树：

```
A
-B
--C
-D
--C 
```

将存储为：

```
NULL | A
A    | B
A    | D
B    | C
D    | C 
```

当询问 C 的路径时，我想返回两条路径（或多或少这样写）：

```
A > B > C,
A > D > C 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T18:05:04.600

这是我的解决方案，[Sql Fiddle](http://sqlfiddle.com/#!3/3d516/1)

```
DECLARE @child VARCHAR(10) = 'C'

    ;WITH children AS
    (

       SELECT 
         ParentCategoryId,
        CAST(ISNULL(ParentCategoryId + '->' ,'')  + ChildCategoryId AS VARCHAR(4000)) AS Path
       FROM Hierarchy
       WHERE ChildCategoryId =  @child
     UNION ALL
       SELECT 
         t.ParentCategoryId,
         list= CAST(ISNULL(t.ParentCategoryId  + '->' ,'')  + d.Path AS VARCHAR(4000))
       FROM Hierarchy t
       INNER JOIN children  AS d
            ON t.ChildCategoryId = d.ParentCategoryId
     )

    SELECT Path 
    from children c
    WHERE ParentCategoryId IS NULL 
```

输出：

```
A->D->C 
A->B->C 
```

* * *

**更新：**

@AlexeiMalashkevich，要获取 id，您可以试试这个

[SQL小提琴](http://sqlfiddle.com/#!3/3d516/31)

```
DECLARE @child VARCHAR(10) = 'C'

;WITH children AS
(

   SELECT 
     ParentCategoryId,
     ChildCategoryId  AS Path
   FROM Hierarchy
   WHERE ChildCategoryId =  @child
 UNION ALL
   SELECT 
     t.ParentCategoryId,
     d.ParentCategoryId 
   FROM Hierarchy t
   INNER JOIN children  AS d
        ON t.ChildCategoryId = d.ParentCategoryId
 )

SELECT DISTINCT PATH
from children c 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T17:33:52.857

可能的解决方案是使用 [@a_horse_with_no_name](https://stackoverflow.com/users/330315/a-horse-with-no-name)提到的递归CTE ：

```
CREATE TABLE [Hierarchy](
[ParentCategoryId] CHAR(1) NULL,
[ChildCategoryId] CHAR(1) NOT NULL
);

INSERT INTO Hierarchy
SELECT NULL, 'A' UNION ALL
SELECT 'A', 'B' UNION ALL
SELECT 'A', 'D' UNION ALL
SELECT 'B', 'C' UNION ALL
SELECT 'D', 'C';

WITH CTE AS (
    SELECT 
        ParentCategoryId, ChildCategoryId, 
        CAST(ISNULL(ParentCategoryId,'') + ChildCategoryId AS VARCHAR(255)) [Path] 
    FROM Hierarchy
    WHERE ParentCategoryId IS NULL

    UNION ALL

    SELECT 
        H.ParentCategoryId, H.ChildCategoryId, 
        CAST(C.[Path] + ' > ' + H.ChildCategoryId AS VARCHAR(255)) [Path] 
    FROM Hierarchy H
    INNER JOIN CTE C ON C.ChildCategoryId = H.ParentCategoryId
) SELECT * FROM CTE; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T17:37:26.393

这是一个有趣的层次结构。似乎允许父母成为他们孩子的孩子。如果发生这种情况，则此代码逻辑将中断，但只要不发生这种情况，它就应该起作用。

```
Create  Function dbo.IdentifyHierarchyPaths (@DeepestChildNode UniqueIdentifier)
Returns @hierarchy Table
(
        Hierarchy Varchar(Max)
)
As
Begin
        ;With   BuildHier As
        (
                Select  Convert(Varchar(Max),h2.ChildCategoryId) As child, Convert(Varchar(Max),h1.ChildCategoryId) + ' > ' +  Convert(Varchar(Max),h2.ChildCategoryId) As hier
                From    Hierarchy h1
                Left    Join Hierarchy h2
                        On  h1.ChildCategoryId = h2.ParentCategoryId
                Where   h1.ParentCategoryId Is Null
                Union   All
                Select  Convert(Varchar(Max),h1.ChildCategoryId) As child, bh.hier + ' > ' +  Convert(Varchar(Max),h1.ChildCategoryId) As hier
                From    BuildHier bh
                Join    Hierarchy h1
                        On  bh.child = h1.ParentCategoryId
        ),      HierWithTopLevel As
        (
                Select  Convert(Varchar(Max),ChildCategoryId) As hierarchy
                From    Hierarchy
                Where   ParentCategoryId Is Null
                Union   
                Select  hier
                From    BuildHier
        )
        Insert  @hierarchy
        Select  hierarchy
        From    HierWithTopLevel
        Where   Right(hierarchy,36) = Convert(Varchar(36),@DeepestChildNode);
        Return;
End; 
```

# javascript - JavaScript代码根据每行所需的字符长度重新格式化文本？

> ID：14241937
> 
> 赞同：-3
> 
> 时间：2013-01-09T16:37:24.390
> 
> 标签：javascript, jquery, text, typography

关于，

我正在寻找可以计算`div`元素内每行文本字符数并通过将每行字符限制为一定数量来重新格式化文本的 vanilla JavaScript（或 jQuery 插件）代码。

我使用的是 Zurb Foundation 网格，我相信字体大小和列宽都是动态的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:14:02.933

这是一个将文本重新格式化为您想要指定的任何字符限制并在其间插入中断的函数，但它根本不考虑标签。

```
function wrap(str, limit) {
    var len = str.length,
        output = [];

    for(var i=0;i*limit < len;i++) {
        output.push(str.substring(i*limit, limit);
    }

    return output.join('<br>');
} 
```

# javascript - 在 JavaScript 中将一个大数组缩小为一个只包含一个字符串的数组

> ID：14241941
> 
> 赞同：0
> 
> 时间：2013-01-09T16:37:35.503
> 
> 标签：javascript, jquery, arrays, json

我使用 JSON 从我的数据库中收集一些用户。我更喜欢有一个包含有关用户的所有信息的数组。

但是对于应用程序的其余部分，我只需要一个数组，其中包含用户的名字作为字符串。

`db_users`是包含完整用户信息的数组。`users`仅包含前名。

```
var db_users = [];
var users = [];
var counter = 0;
$.ajax({
    url: myUrl,
    dataType: 'json',
    async: false,
    success: function(data) {
        $.each(data, function(i, user) {
            db_users.push({
                workerid: user.workerid,
                prename: user.prename,
                lastname: user.lastname,
                avatar: user.avatar,
                lineup: user.lineup,
                languages: user.languages,
                partnerid: user.partnerid,
                code: user.code,
                partnerName: user.partnerName,
                street: user.street,
                zip: user.zipCode,
                city: user.city,
                email: user.email,
                phone: user.phone,
                slogan: user.slogan
            });

            users[counter] = user.prename;
            counter++;
        });
    }
}); 
```

我该怎么做才能使用`db_users`与我使用相同的方式`users`？有没有类似的东西 `[db_users prename];`会创建一个只有前名作为字符串的数组？

这是以后应该如何使用它：

```
//users: ['Laura', 'Sarah', 'Alice'],
users: users, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:50:50.607

您可以使用[.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)将一个数组转换为另一个数组。但是，我认为您在问题中使用它的方式实际上更好。调用`.map`将涉及再次遍历整个数组。当您第一次遍历数组并保持缓存时，最好只构建它。

如果您只想访问该`prename`属性，那么@Wolf 有您的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:50:43.307

您不必为此创建单独的数组。您必须使用以下代码

```
db_users[index].prename; // This will give you the name 
```

index 是数组中的索引....

# java - 在java中叠加图像

> ID：14241944
> 
> 赞同：2
> 
> 时间：2013-01-09T16:37:49.807
> 
> 标签：java, image, swing, overlay, jbutton

我希望你能给我一些建议来解决我的问题。我需要在一个按钮上覆盖许多图像。但问题是，这是基本图像（牙齿）：（http://i.imgur.com/7tIcP.gif）

我的第一张图片是这样的：http: [//i.imgur.com/FYuD8.gif](http://i.imgur.com/FYuD8.gif) 然后我放了这个：http: [//i.imgur.com/mWz9c.gif](http://i.imgur.com/mWz9c.gif) 第一张图片与第二张重叠，所以我只能看到第二张图……

也许您会告诉我一个选项是在叠加之前更改图像的顺序，但是用户会选择第一个图像，也许只是想要第一个图像，但在其他情况下，用户将放置第一个然后是第二个或反之亦然...

我的代码是这样的：

```
 BufferedImage large=null;
    large = ImageIO.read(new File("firstimage.gif"));

    BufferedImage small=null;

    small = ImageIO.read(new File("secondimage.gif"));

    int w = Math.max(large.getWidth(), small.getWidth());
    int h = Math.max(large.getHeight(), small.getHeight());

    BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

    // paint both images, preserving the alpha channels
    Graphics g = combined.getGraphics();
    g.drawImage(large, 0, 0, null);
    g.drawImage(small, 0, 0, null);

    ImageIO.write(combined, "PNG", new File("twoInOne.png"));

    ImageIcon icon1 = new ImageIcon(combined);
    jbutton1.setIcon(icon1); 
```

也许是图像问题的格式，或者我的代码，但我希望你们能帮助我解决这个问题，谢谢。

现在我上传了 3 张图片：我跳过了基本图片（牙齿），因为我认为这不是问题所在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T20:52:35.637

> 我需要编辑我的图像以获得透明背景？

要使特定颜色透明，您可以遍历 a 的像素`BufferedImage`或使用合适的`LookupOp`. 对于后者，请参阅[此处](https://stackoverflow.com/a/3528196/230513)引用的文章。然后，您可以使用`drawImage()`. 默认的复合规则`AlphaComposite.SRC_OVER`, 应该是令人满意的；[如果没有，您可以更改它，如此处](https://stackoverflow.com/a/7824225/230513)所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T16:47:44.280

您的代码应该可以将两个图像组合在一起。但是，就像您说的，您的两个图像大小相同，并且它们似乎没有任何透明度。这将导致第二个绘制的任何图像总是“覆盖”新组合图像中的第一个图像。

您可能想要的解决方案是将要叠加的各个部分分解为单独的较小图像。对于您的图像，您似乎希望在牙齿顶部有各种叠加层以显示各种信息。在这种情况下，您需要拥有三样东西：牙齿图像、包含红色覆盖层的图像和包含蓝色覆盖层的图像。所有这三个图像都应该具有透明而不是白色的背景，这样它们就不会覆盖任何先前绘制的图像中的颜色。执行此操作时，您需要绘制牙齿，然后覆盖 1（红色/蓝色），然后覆盖 2（红色/蓝色）。这应该可以为您提供所需的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-18T16:32:59.693

关键是将alpha设置为float值，比如说两层，设置alpha为0.5，三层，设置alpha 0.33，四层，设置alpha 0.25......无论如何，这是代码示例

```
try
{
    BufferedImage imgA = ImageIO.read(new File(imgAPath, token));
    BufferedImage imgB = ImageIO.read(new File(imgBPath, token));

    if (imgA.getWidth() == imgB.getWidth() && imgA.getHeight() == imgB.getHeight()) 
    {
        float alpha = 0.5f;
        int compositeRule = AlphaComposite.SRC_OVER;
        AlphaComposite ac;
        int imgW = imgA.getWidth();
        int imgH = imgA.getHeight();
        BufferedImage overlay = new BufferedImage(imgW, imgH, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g = overlay.createGraphics();
        ac = AlphaComposite.getInstance(compositeRule, alpha);
        g.drawImage(imgA,0,0,null);
        g.setComposite(ac);
        g.drawImage(imgB,0,0,null);
        g.setComposite(ac);
        ImageIO.write(overlay, "PNG", new File(logFolder, browser+"__"+token));
        g.dispose();
    }
    else
    {
        System.err.println(token+" dymension not match ");
    }
}
catch (IOException e)
{
} 
```

# node.js - 想要选择：Node.js Meteor.js Ratchet RabbitMQ for Real-time WebChat(论坛)

> ID：14241947
> 
> 赞同：17
> 
> 时间：2013-01-09T16:37:56.210
> 
> 标签：node.js, websocket, rabbitmq, meteor, ratchet

在问这个问题之前我做了一些研究，但我找不到适合我情况的具体答案。

我想创建与服务器上的数据库实时同步的 WebChat。（MySQL 或 MongoDB - 都可以）但是关于同步数据，有几种方法可以做到：

1.  Ratchet 的 PHP + websockets 和我的工作只是通过 JSON 创建一个协议来进行身份验证和消息传递。许多文档，许多教程。（我知道 websockets 在 IE 中不起作用，但没关系）

2.  node.js + socket.io - 有与 1 相同的技术解决方案。但语言不同。

3.  node.js + meteor.js (sockJS) - 似乎大家都做了所有的工作，我不需要添加任何协议功能，只需编写逻辑代码。但是高负载呢？文档怎么样......非常年轻的框架。

4.  Tornado + TornadIO2 (socket.io) + RabbitMQ

有人可以将 RabbitMQ 与流星.js 进行比较吗？按性能。有人可以说哪种方式更好吗？

我不了解所有框架，所以如果我有比这四个更好的选择，请告诉我:)

请给我你的意见。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-14T04:26:46.557

我推荐基于**php的****websocket**服务器：[Ratchet](http://socketo.me)。我使用它，并且这个[链接](http://www.cargomedia.ch/2012/11/05/Benchmarking-WebSocket-Servers.html)是在**Ratchet**和**SockJS**之间对 webSocket 服务器进行**基准测试**。

 ******因为你想做网络聊天，所以需要最好的性能和良好的cpu功率。Ratchet在客户端和服务器之间处理消息有很好的解决方案。它有广播发送消息和一组客户端的特殊发送消息，而且它对服务器事件有很好的控制例如，ZMQ Libarary.Ratchet 和 ZMQ 的 mysql 更新[位于](http://www.zeromq.org/)Reactphp[项目](http://reactphp.org/)之上

您还可以看到 WebRTC（与 WebSockets 相关的技术），这是增强现代 Web 浏览器通信能力的另一项努力。WebRTC 是 Web 的点对点技术。WebRTC 的第一个应用是实时语音和视频聊天。WebRTC 已经是一种引人注目的媒体应用新技术，并且有许多可用的在线示例应用程序使您能够通过 Web 使用视频和音频进行测试。请检查此[链接](http://www.webrtc.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T11:41:38.553

对于实时数据网络客户端同步，我知道的解决方案是：

*   [流星](http://meteor.com/)
*   [火力基地](http://firebase.com)
*   [辛珀里姆](https://simperium.com/)
*   [德比JS](http://derbyjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:21:50.503

不幸的是，我只能代表前三个发言。我对 websockets（包括 socket.io）的体验一般都低于标准，包括零星的断开连接和复杂的连接系统。然而，话虽如此，它非常强大和多样化。使用 websockets，您几乎可以在任何平台上运行服务器或客户端。Socket.io 在一定程度上限制了这一点，但实际上只是 websockets 的一个子集。然而，流星是一个完全不同的球赛。虽然一开始令人困惑，但构建和部署应用程序的简单程度给我留下了深刻的印象。它功能强大且灵活。根据网络聊天的复杂程度，任何一个都是不错的选择。如果你想做一些更简单的事情，我会选择 socket.io。对于更复杂的我会推荐流星。

希望这可以帮助。******

# xcode - symbolicatecrash 无法解析我的应用程序对象

> ID：14241949
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:09.183
> 
> 标签：xcode, symbolicatecrash

我可以使用 symbolicatecrash 命令来符号化崩溃日志，除了它只解析系统符号外，它一切正常，但我的应用程序的所有对象都保留为内存地址.. 如下所示。当我使用 xcode 导入崩溃时结果相同，我是否错过了应用程序构建设置中的某些内容？

```
Last Exception Backtrace:
0   CoreFoundation                      0x3436488f __exceptionPreprocess + 163
1   libobjc.A.dylib                     0x36c65259 objc_exception_throw + 33
2   CoreFoundation                      0x34364789 +[NSException raise:format:] + 1
3   Foundation                          0x34bb63a3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 91
4   MycoolAp                            0x0018330f 0xbb000 + 819983
5   UIKit                               0x36d5fc8b -[UIViewController view] + 167
6   UIKit                               0x36d6c1e9 -[UIViewController contentScrollView] + 25
7   UIKit                               0x36d6c059 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 37
8   UIKit                               0x36d6bf3f -[UINavigationController _layoutViewController:] + 35
9   UIKit                               0x36d6b7c1 -[UINavigationController _startTransition:fromViewController:toViewController:] + 501
10  UIKit                               0x36d6b503 -[UINavigationController _startDeferredTransitionIfNeeded] + 251
11  UIKit                               0x36d5faff -[UINavigationController pushViewController:transition:forceImmediate:] + 807
12  UIKit                               0x36d5f7d5 -[UINavigationController pushViewController:animated:] + 37
13  Tapsbook                            0x001914f1 0xbb000 + 877809
14  UIKit                               0x36dd893d -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 945
15  UIKit                               0x36e52627 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 159
16  Foundation                          0x34be8933 __NSFireDelayedPerform + 415
17  CoreFoundation                      0x34338a33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 15
18  CoreFoundation                      0x34338699 __CFRunLoopDoTimer + 365
19  CoreFoundation                      0x3433726f __CFRunLoopRun + 1207
20  CoreFoundation                      0x342ba4a5 CFRunLoopRunSpecific + 301
21  CoreFoundation                      0x342ba36d CFRunLoopRunInMode + 105
22  GraphicsServices                    0x3829c439 GSEventRunModal + 137
23  UIKit                               0x36d54cd5 UIApplicationMain + 1081
24  MycoolAp                            0x000bff75 0xbb000 + 20341
25  MycoolAp                            0x000bd360 0xbb000 + 9056 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:58:14.493

好的，找出原因，这是因为我的聚光灯索引服务器被禁用（我不喜欢它生成巨大的索引文件并加热我的 CPU），所以一旦我让聚光灯索引完成，xcode 就找不到合适的应用程序 dSYM，然后修复了这个问题。

# jquery - 如何访问 :before 元素？

> ID：14241950
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:11.783
> 
> 标签：jquery, css, sass, pseudo-element

我有以下 SASS 代码

```
a.unfavorite{
  width: 20px;
  background-position: -71px -28px;
  text-decoration: none !important;
  &:before {
    content: "un-favorite";
    background: #000;
    color: #fff;
  }
 } 
```

在 JQuery 中，我希望能够访问`:before`元素以便对其进行修改。

我尝试做这样的事情，`$('.unfavorite:before')`但没有产生任何结果。我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:41:56.353

CSS 伪元素在技术上不是 DOM 的一部分，因此无法使用 JavaScript 访问。

您可以做的是为第二个类添加样式（在第一个类之后的任何位置）并使用 JavaScript/jQuery 添加/删除该类。

CSS：

```
a.unfavorite2:before {
  content: "un-favorite2";
} 
```

jQuery：

```
$(this).toggleClass('unfavorite2'); 
```

[http://jsfiddle.net/mblase75/nvqKs/](http://jsfiddle.net/mblase75/nvqKs/)

# c++ - 在 C++ 中创建实例时出错

> ID：14241954
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:32.833
> 
> 标签：c++, instance

头文件：

```
class FakeMas
{
   FakeMas();
   ~FakeMas();
} 
```

CPP 文件：

```
FakeMas::FakeMas(){........}
FakeMas::~FakeMas(){} 
```

我写了一个cpp文件来测试FakeMas：

```
class FakeMasTest{
    void test() 
    {
        FakeMas fakemas;            
        fakemas.start();
    }
} 
```

项目中名为“zinc.testwebserver”的类

如果我建造它，它会说

```
FakeMasTest.cpp:29: undefined reference to `zinc::testwebserver::FakeMas::FakeMas()'" 
```

如果我将测试更改为：

```
FakeMas::FakeMas * fakemas = new FakeMas::FakeMas(); 
```

它说

```
error: ‘fakemas’ was not declared in this scope 
```

如果我将测试更改为：

```
FakeMas * fakemas = new FakeMas(); 
```

它说

```
undefined reference to `zinc::testwebserver::FakeMas::FakeMas()' 
```

我真的不知道该怎么做...

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:53:15.927

这听起来像是一个链接错误：来自的目标代码`FakeMas.cpp`没有与来自的目标代码链接`FakeMasTest.cpp`

（这些将在某些平台上，`FakeMas.o`在其他平台上 - 你没有指定你的）。`FakeMasTest.o``.obj`

因此，您的代码可以*编译*，但不能形成可执行文件。解决方案取决于您的构建系统（您也没有指定），但本质上是告诉它您的可执行文件依赖于并且应该包含两个目标文件。

* * *

您得到的*不相关*错误是因为这是无效的：

```
FakeMas::FakeMas * fakemas = new FakeMas::FakeMas(); 
```

它应该是：

```
FakeMas * fakemas = new FakeMas(); 
```

（然后您将返回相同的链接错误）。

* * *

从您的 Makefile 中：

```
CppUnit_Tests = fakemastest
TESTS = $(CppUnit_Tests)
testdir = $(prefix)/tests/@PACKAGE@/test
test_PROGRAMS = $(CppUnit_Tests)

fakemastest_SOURCES = FakeMasTest.cpp 
```

您是在告诉 Make 可执行文件*仅*`fakemastest`依赖于. 通过更改最后一行来告诉它：*`FakeMasTest.cpp``FakeMas.cpp`*

 *```
fakemastest_SOURCES = FakeMasTest.cpp FakeMas.cpp 
```

（这是对您的构建规则做出某些假设，未显示，但这是一个明智的起点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:48:54.987

似乎编译器找不到`FakeMas`. 要么你没有添加

```
#include "FakeMas.h" 
```

或者您需要指定正确的命名空间：

```
using namespace namespace_with_FakeMas; 
```

编译器消息显示编译器正在命名空间中寻找类声明`zinc::testwebserver`。似乎这与`FakeMas`声明的名称空间不同。*

# php - CakePHP ACL：如何实现这种情况？

> ID：14241956
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:36.010
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-acl

因为我一直在努力寻找一个好的方法来制作这个大约两个星期，所以我认为问问是个好主意。

我有两个`User`角色：`editor`和`admin`。每个`editor`人都有一个`Region`分配给他的 s 范围，通过`$hasAndBelongsToMany`。

在应用程序中，我还有一个模型`Event`，每个模型都有一个`Region`，通过一个`region_id`。我想确保每个人都`editor`可以查看、编辑、删除和做其他事情，只有那些`Event`在`Region`他的任务中。用户`admin`当然可以编辑任何东西。

如何在我的 CakePHP 模型和控制器中实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:06:52.000

您可以`edit`在`EventsController`. 找到事件的区域，然后检查登录的编辑器是否是该区域的编辑器。您需要做的就是确保当用户登录时，他/她的角色保存在`AuthComponent`的会话中。例如：

```
public function edit($event_id = null) {
    if($this->Auth->user('role') == "editor") {
        // User is logged in as editor, check if the Event region matches his regions.
        $event = $this->Event->findById($event_id); // Get the event
        $user = $this->Event->User->findById($this->Auth->user('id')); // Get the user (Assuming an Event belongsTo user, otherwise you'll have to load the model first).

        if(!array_search($event['Event']['region_id'], $user['User']['Region'])) {
            // The event's region wasn't found in the Regions for the User, deny access
            $this->Session->setFlash(__('You are not authorized to edit this event.'));
            $this->redirect(array('action' => 'view', $event_id));
        }
    }
} 
```

所以基本上在你做任何其他逻辑之前，你检查用户是否是编辑器，如果是，他关联的区域是否与当前事件的区域匹配。如果它没有设置一个 flash 消息并且用户被踢回`view`事件的视图。

# regex - 用于 url 匹配和重写的正则表达式

> ID：14241959
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:42.650
> 
> 标签：regex, url, url-rewriting

您好我正在尝试创建一个匹配以下内容的正则表达式

`/go/brand`

但不匹配

`/go/brand/anotherpage`

我在想我可以使用类似下面的东西

`^go/([_0-9a-z-]+)(?!/)`

我不匹配任何在品牌之后有斜线的东西（品牌可以通过动态）。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:49:23.763

尝试添加一个字符串尾锚：

```
^/go/([\w-]+)(?!/)$ 
```

这在[RegExr](http://regexr.com?33bm8)中对我有用，但也许你的 URL 重写正则表达式引擎有额外的细微差别，你需要适应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:01:05.343

```
^/go/[^/]+$ 
```

如果用作正则表达式分隔符，则`/`需要转义前两个，即`/``/^\/go\/[^/]+$/`

# java - JDialog的模态时JProgressBar不更新

> ID：14241960
> 
> 赞同：1
> 
> 时间：2013-01-09T16:38:46.270
> 
> 标签：java, swing, modal-dialog, jdialog, jprogressbar

我知道没有办法制作`JProgressMonitor`模态框，人们宁愿将 a`JDialog`与 a 一起使用`JProgressBar`。现在，我得到了这个工作 - 但只要我不试图制作`JDialog`模态。谁能告诉我我做错了什么？

```
private Frame frame;
private JPanel contentPane;
private JProgressBar progressBar;

public MainClass() {
    JButton startBtn = new JButton("Start");
    startBtn.addActionListener(new ActionListener()
    {
        @Override
        public void actionPerformed(final ActionEvent arg0)
        {
            new Thread(new Runnable()
            {
                @Override
                public void run()
                {
                    createJDialog();

                    for (int i = 0; i < 100; ++i)
                    {
                        final int j = i;
                        doInBackground(); // Batch process

                        SwingUtilities.invokeLater(new Runnable()
                        {
                            @Override
                            public void run()
                            {
                                progressBar.setValue(j);
                            }
                        });
                    }
                }
            }).start();
        }
    });
}

public void createJDialog()
{
    JDialog d = new JDialog(); 
    d.setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    // Keeps progressBar from updating
    // d.setModalityType(Dialog.ModalityType.APPLICATION_MODAL);
    // d.setModal(true);
    d.getContentPane().add(progressBar, BorderLayout.PAGE_START); 
    d.getContentPane().add(progressBar, BorderLayout.PAGE_END); 
    d.pack(); 
    d.setVisible(true); 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T16:52:00.263

`createJDialog();`在线程开始后调用，而不是从内部调用`Runnable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:54:26.383

[根据Java API 文档](http://docs.oracle.com/javase/7/docs/api/index.html?java/awt/Dialog.html)，当对话框为模态时，调用`d.setVisible(true)`阻塞直到对话框关闭。

尝试在单独的线程中启动该调用。

# c++ - libcurl 发送/接收多线程问题

> ID：14241962
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:49.003
> 
> 标签：c++, multithreading, pthreads, libcurl

所以我加入了一个依赖服务器-客户端套接字通信的项目。这个想法是不断检查来自服务器的消息，然后处理它们，同时有时我自己发送信息。我收到了以下代码：

```
bool OnlineServerHandler::connectToServer(){
    /* some unrelated code here */
    curl = curl_easy_init();
    if (curl){
        /* some connection options and error checking */
        int threadCode;
        if((threadCode=pthread_create(&networkThread, NULL, OnlineServerHandler::readDataInLoop, NULL))!=0){
            CCLog("Failed to initialize new thread. Code: %d", threadCode);
            curl_easy_cleanup(curl);
            return false;
    }
    /* and more unrelated code here */
}

/* and method called in pthread_create */
void* OnlineServerHandler::readDataInLoop(void* threaddata){
    for(;;){
        if(exitThread) // flag to end the thread
            break;
        char buf[1024];
        wait_on_socket(sockfd, 1, 60000L);
        if(buf!=NULL && strlen(buf)>0)
            memset(&buf, 0, strlen(buf));
        res = curl_easy_recv(curl, buf, 1024, &iolen);
        if(CURLE_OK != res)
             continue;
        /* message processing */
    }
} 
```

问题是，从我读到的关于 libcurl 的内容来看，在多个线程中使用一个句柄是个坏主意。这里一个句柄处理消息发送和接收。

所以我的问题是。有没有办法在 libcurl 中划分数据传输？一个句柄只发送数据，另一个只接收。我尝试复制句柄，但在使用原始句柄发送一些数据后无法接收数据。然后我尝试放置一个标志来发送数据，以便 readDataInLoop() 方法也可以发送数据，但它不起作用（我怀疑 curl_easy_recv() 如果服务器没有发送任何内容，则会将线程保持很长时间）。我认为在 libcurl 中没有原生选项（但话又说回来，我经常很脑盲）。

当然，只要它使用 libcurl，任何好主意都会受到欢迎（决定不是我的）。

编辑：
最后我重建了整个连接代码并将所有内容放在一个线程中。由于除了回答问题之外，我不知道如何关闭问题（虽然问题现在已经解决，但它并不是我真正想要的），我将保持打开状态。如果你是一个模组，请随意关闭它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T17:43:58.330

看看这个：[http](http://curl.haxx.se/libcurl/c/libcurl-multi.html) ://curl.haxx.se/libcurl/c/libcurl-multi.html它提供了 cURL api 的非阻塞实现，可以让你避免长时间的等待。您将需要自己实现异步机制，但至少允许这样做。

# php - preg replace_callback 在帖子中提及和主题标签

> ID：14241966
> 
> 赞同：0
> 
> 时间：2013-01-09T16:38:57.803
> 
> 标签：php, regex, preg-replace, preg-replace-callback

假设我有一个文本，

```
$text = '@stackguy @flowguy I need to learn more advanced php #ilovephp'; 
```

我想分别用这两个锚标签替换 @stackguy 和 @flowguy。这也应该适用于文本字符串中任意数量的@。

```
<a href="url/stackguy">@stackguy</a>
<a href="url/flowguy">@flowguy</a> 
```

我也想用#ilovephp替换

```
<a href="search/ilovephp">#ilovephp</a> 
```

它也应该适用于多个#。我猜它会是这样的

```
preg_replace_callback('regex',
            create_function('$matches', '
                switch ($matches[1]) {
                    case "@":
                        return "<a href=url.$matches[2]'/'>" . $matches[2] . "</a>";
                    case "#":
                        return "<a>" . $matches[2] . "</a>";
                }
        '), $var); 
```

正则表达式会是什么样子？我的函数是要匹配所有需要的还是我需要添加一个 foreach 循环？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:46:34.903

如果您只是不想匹配以 @ 或 # 开头的文本，请使用：`/([@#])(\S+)/`

查看此演示：[http ://regex101.com/r/eP7eU0](http://regex101.com/r/eP7eU0)

注意：当它在标签内时，这将匹配相同的东西。如果你不想要那个，你需要的不仅仅是正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T17:21:09.313

`preg_replace()`默认情况下，`preg_replace_callback()`两者都会查找所有可能的匹配项，因此您不需要循环。

考虑到这些值还没有被锚包装，我会使用

```
preg_replace('~@([^\s#@]+)~','<a href="url/\1">$0</a>',
    preg_replace('~#([^\s#@]+)~','<a href="search/\1">$0</a>',$text)
); 
```

或者

```
preg_replace_callback('~([#@])([^\s#@]+)~',create_function('$m',
    '$dir = $m[1] == "#" ? "search" : "url";' .
    'return "<a href=\"$dir/$m[2]\">$m[0]</a>";'
),$text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T09:05:02.327

按照这篇[关于替换主题标签和提及的教程](http://theoryapp.com/find-and-replace-hashtags-and-mentions-in-php/)，preg_replace() 已经足够好了。

```
$patterns = array('/#(\w+)/', '/@(\w+)/');
$replacements = array('<a href="http://example.com/tag/$1">#$1</a>', 
                '<a href="http://example.com/user/$1">@$1</a>');

$html = preg_replace($patterns, $replacements, $text); 
```

# crystal-reports - 访问水晶报表中的先前记录字段

> ID：14241967
> 
> 赞同：1
> 
> 时间：2013-01-09T16:38:58.430
> 
> 标签：crystal-reports, crystal-reports-2010

我正在显示学生记录的成绩。他们坐在低年级（AS ...），然后选择继续某些课程到高年级（A ...）。这意味着我对每个学生都有以下数据集：

```
+----------------------+-------+-----------+-----+
|            Name      | Grade |    End    | Code|
+----------------------+-------+-----------+-----+
| A Business           | C     | 06-Jul-12 | BUS |
| A English            | B     | 06-Jul-12 | ELL |
| A History            | C     | 06-Jul-12 | HIS |
| AS Business Studies  | E     | 08-Jul-11 | BUS |
| AS Critical Thinking | B     | 08-Jul-11 | CRT | <-- lower year only
| AS English           | D     | 08-Jul-11 | ELL |
| AS History           | F     | 08-Jul-11 | HIS |
+----------------------+-------+-----------+-----+ 
```

对于每个学生记录，我只想显示 A 和 AS 级别的成绩。在上面的例子中，这将抑制 AS 批判性思维：

```
A Business           | C
A English            | B
A History            | C
AS Business Studies  | E
AS English           | D
AS History           | F 
```

在不编辑基础数据集的情况下，Crystal Reports 是否可以抑制那些仅显示为 AS 成绩的记录？例如：

```
If Code not present in records AND Name starts with AS
  Suppress
Else
  Display 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:44:56.610

假设所有“A”值都在“AS”值之前出现，我将使用一个数组来存储到目前为止找到的代码。

首先，初始化数组，这可以在报告标题中，或者如果结果按学生分组，则在学生组标题中。

```
WhilePrintingRecords;
Global StringVar Array CodesFound;

Redim CodesFound[1];

CodesFound[1] := "";

//print nothing
""; 
```

然后，更新详细信息中的列表

```
WhilePrintingRecords;
Global StringVar Array CodesFound;

If Left({table.Name},2) = "A "
    Then (
        If CodesFound[1] = ""
            Then (
                CodesFound[1] := {table.Code};
            )
            Else (
            Redim Preserve CodesFound[UBound(CodesFound) + 1];
        CodesFound[UBound(CodesFound)] := {table.Code};
        );
    );
//print nothing
""; 
```

最后，在条件抑制部分：

```
WhilePrintingRecords;
Global StringVar Array CodesFound;
Local BooleanVar found := false;
Local NumberVar i;

If Left({table.name},2) = "AS"
    Then (
        For i := 1 to UBound(CodesFound) do (
            If CodesFound[i] = {table.Code}
                Then found := true;
        );
        //suppress if not found
        Not(found);
    )
    Else
       //Not an "AS", don't suppress
        false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:39:48.680

** 编辑 **

我对隐含问题的更好解决方案是将逻辑表加入到代码字段中：

```
-- Oracle syntax
WITH

V AS (
  SELECT Name, Grade, End_Date, Code
  FROM   ...
)

SELECT *
FROM   V
INNER JOIN V V2 ON V.Code=V2.Code
  AND SUBSTR(V2.Name,1,2)='A ' 
```

如有必要：

将条件抑制公式添加到详细信息部分：

```
IsNull({table.Code}) AND Left({table.Name},2)="AS" 
```

# c++ - 取消引用迭代器时这是否有效

> ID：14241975
> 
> 赞同：-2
> 
> 时间：2013-01-09T16:39:30.330
> 
> 标签：c++, c++11, iterator, deque

```
 for (auto iter = dlQueue.cbegin(); iter != dlQueue.cend(); ++iter)     
        {
                // reference to the current element in the container
                if (*iter.id == listid)
                {
                        *iter.stall = newstall & 0xFFFFFFF;
                }
        } 
```

当我取消引用 iter 引用的对象时，我是否能够检查对象的状态；即身份证。或者这只会给我一个迭代器作为回报。

我不能去：

```
iter -> id 
```

DlQueue 是一个出队。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T16:46:58.823

不，您引用的代码是错误的。

`.`比 unary 具有更高的优先级`*`。要访问`iter`您引用的元素的成员，应该写`(*iter).id`or `iter->id`，而不是`*iter.id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:43:43.963

你试过了吗？如果您遇到编译错误，请告诉我们它是什么。此外，查看`dlQueue`.

两者`(*iter).id`和`iter->id`都应该导致*对 id 的 const 引用*（假设`dlQueue`持有具有可访问成员的对象`id`）。您不能分配给 const 引用，但这与您对`*iter.`or的选择无关`iter->`。

* * *

如果您需要*修改*您正在迭代的项目，请使用`begin`而不是`cbegin`等。

```
for (auto iter = dlQueue.begin(); iter != dlQueue.end(); ++iter) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T16:44:19.887

我修复了代码中的明显错误：

```
 for (auto iter = dlQueue.begin(); iter != dlQueue.end(); ++iter) {
   // if the id matches:
   if (iter->id == listid) {
     // assign to stall a bitmasked version of newstall:
     iter->stall = newstall & 0xFFFFFFF;
   }
 } 
```

这有帮助吗？

# php - CodeIgniter：PHP 错误：Table.php 中 foreach() 中的 arg 无效：第 198 行

> ID：14241976
> 
> 赞同：3
> 
> 时间：2013-01-09T16:39:32.143
> 
> 标签：php, codeigniter, datatable

我已经对这个错误进行了非常彻底的搜索，虽然我找到了很多关于“确保您正在传递数组或 SQL 查询”的一般答案，但我认为我可能需要每个 CodeIgniter 库的更具体的帮助。

我有一个视图，它只是应该创建一个查询（或数组）并生成一个表。

（最终，查询将从模型发生，表生成将是我的控制器中的一个函数，因此我可以在其他视图中重用它，但我只是从屏幕的基本回显开始）

视图设置如下：

```
<div class="span4 well well-small">
            <h4>Requests:</h4>
            <?php
                $this->table->set_heading('ID', 'Request', 'User', 'Date');

                $query = array('id'=>'123', 'request'=>'FARTS', 'user'=>'Steve', 'date'=>'Today'); //$this->db->select('user_id', 'password', 'user_name', 'company_id')->from('users');
                echo $this->table->generate($query);
            ?>
            <h4>In this div:</h4>
            <p>we will display some information about recent requests. It will show a small table with Request ID, Request Name, and Date Requested headers.</p>
</div> 
```

这会打印一个带有 4 个 PHP 错误框的框：

遇到 PHP 错误

严重性：警告

消息：为 foreach() 提供的参数无效

文件名：库/Table.php

行号：198

当我检查 Table.php 库中的第 198 行时，它需要一个数组（关联或不关联）或来自数据库的查询。我试图传递一个非关联数组、一个关联数组和一个数据库查询，所有这些都会产生同样的错误。

而且，所以你不必翻阅 CI，这里是抛出错误的函数：

```
function _prep_args($args)
{
    // If there is no $args[0], skip this and treat as an associative array
    // This can happen if there is only a single key, for example this is passed to table->generate
    // array(array('foo'=>'bar'))
    if (isset($args[0]) AND (count($args) == 1 && is_array($args[0])))
    {
        // args sent as indexed array
        if ( ! isset($args[0]['data']))
        {
            foreach ($args[0] as $key => $val)
            {
                if (is_array($val) && isset($val['data']))
                {
                    $args[$key] = $val;
                }
                else
                {
                    $args[$key] = array('data' => $val);
                }
            }
        }
    }
    else
    {
        foreach ($args as $key => $val)
        {
            if ( ! is_array($val))
            {
                $args[$key] = array('data' => $val);
            }
        }
    }

    return $args;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:28:50.777

将您的 $query 变量更改为如下所示：

```
$query = array(array('id'=>'123', 'request'=>'FARTS', 'user'=>'Steve', 'date'=>'Today')); 
```

该方法需要一个数组数组，即使没有特定的 key=>value 对。

```
$query = array(array('123','FARTS','Steve', 'Today')); 
```

本质上，当您使用 CI 的数据库库时，这也是您的数据库查询应该返回的内容。

就个人而言，除非您要直接使用 db 查询中的数据，否则我会使用：

```
$this->table->add_row('123','FARTS','Steve', 'Today');
-OR-
$this->table->add_row(array('ID'=>'hello','class'=>'Today','data'=>'Displayed Text')); 
```

至于您的数据库查询得到相同的错误，我会三重检查您实际上从所述查询中收到什么样的输出。

希望这可以帮助

# matlab - 为每行查找矩阵的最小元素 - MATLAB

> ID：14241978
> 
> 赞同：3
> 
> 时间：2013-01-09T16:39:34.047
> 
> 标签：matlab

这是示例：

我有以下矩阵：

```
4 0 3
5 2 6
9 4 8 
```

现在，我想找到两个最小值，以及它们每行的索引。所以结果是：

```
row1: 0 , position (1,2) and 3, position (1,3)
row2...
row3.... 
```

好吧，我使用了很多 for 循环，而且它非常复杂。那么有什么方法可以使用 MATLAB 函数来实现我的目标吗？

我试过了，但没有结果：

```
C=min(my_matrix,[],2)
[C(1),I] = MIN(my_matrix(1,:)) &find the position of the minimum value in row 1?? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T17:32:32.443

您可以按升序对矩阵的每一行进行排序，然后为每行选择前两个索引，如下所示：

```
[A_sorted, I] = sort(A, 2);
val = A_sorted(:, 1:2)
idx = I(:, 1:2) 
```

现在`val`应该包含每行中前两个最小元素的值，并且`idx`应该包含它们的列号。

如果您想以格式化的方式打印屏幕上的所有内容（如您的问题所示），您可以使用全能`fprintf`命令：

```
rows = (1:size(A, 1))';
fprintf('row %d: %d, position (%d, %d) and %d, position (%d, %d)\n', ...
    [rows - 1, val(:, 1), rows, idx(:, 1), val(:, 2), rows, idx(:, 2)]') 
```

### 例子

```
A = [4, 0, 3; 5, 2, 6; 9, 4, 8];

%// Find two smallest values in each row and their positions
[A_sorted, I] = sort(A, 2);
val = A_sorted(:, 1:2)
idx = I(:, 1:2)

%// Print the result
rows = (1:size(A, 1))';
fprintf('row %d: %d, position (%d, %d) and %d, position (%d, %d)\n', ...
    [rows - 1, val(:, 1), rows, idx(:, 1), val(:, 2), rows, idx(:, 2)]') 
```

结果是：

```
val =
     0     3
     2     5
     4     8

idx =
     2     3
     2     1
     2     3 
```

格式化的输出是：

```
row 0: 0, position (1, 2) and 3, position (1, 3)
row 1: 2, position (2, 2) and 5, position (2, 1)
row 2: 4, position (3, 2) and 8, position (3, 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T17:03:10.967

您可以使用`sort`.

```
[A_sorted, idx] = sort(A,2); % specify that you want to sort along rows instead of columns 
```

的列`idx`包含每行的最小值`A`，第二列具有第二个最小值的索引。

最小值可以从`A_sorted`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T17:09:29.647

您可以执行以下操作，`A`您的矩阵在哪里。

```
[min1, sub1] = min(A, [], 2);  % Gets the min element of each row
rowVec = [1:size(A,1)]';       % A column vector of row numbers to match sub1
ind1 = sub2ind(size(A), rowVec, sub1)  % Gets indices of matrix A where mins are
A2 = A;                        % Copy of A
A2(ind1) = NaN;                % Removes min elements of A
[min2, sub2] = min(A2, [], 2); % Gets your second min element of each row 
```

`min1`将是您的最小值`min2`向量，每行的第二个最小值向量。它们各自的行索引将在`sub1`和中`sub2`。

# wpf - 将 WPF 文本框绑定到实体对象

> ID：14241979
> 
> 赞同：0
> 
> 时间：2013-01-09T16:39:38.367
> 
> 标签：wpf, data-binding, textbox, entity

我想将`TextBox.Text`我的 WFP 应用程序中的属性绑定到 EF 实体对象的属性。

这是实体对象初始化：

```
public static Question CurrentQuestion = new Question
       {
             Description = "How old are you?"
       }; 
```

这是数据绑定文本框的功能：

```
private void BindQuestionControls()
        {
            Binding b = new Binding();
            b.Source = CurrentQuestion;
            b.Mode = BindingMode.TwoWay;
            b.Path = new PropertyPath("Description");
            textBoxQuestion.SetBinding(TextBlock.TextProperty, b);
        } 
```

我希望当应用程序启动时 textBoxQuestion 会显示“你多大了？” 但它是空的，可能最好在声明中设置绑定，请建议如何执行此操作。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:59:36.633

应该不是

```
textBoxQuestion.SetBinding(TextBlock.TextProperty, b); 
```

但

```
textBoxQuestion.SetBinding(TextBox.TextProperty, b); 
```

# jquery - 在Jquery中如何在提交之前使用回调运行代码

> ID：14241980
> 
> 赞同：4
> 
> 时间：2013-01-09T16:39:39.753
> 
> 标签：jquery, events, callback, click, submit

我需要在提交表单之前运行一些 jquery 代码，并且似乎存在一些问题。

在你急于推荐这个之前，请先听我说：

```
$(function() {
     $('form').submit( function() {
         /* some code */
         return true;
     });
}); 
```

我需要，在按下“提交”按钮后，首先使用谷歌 API 计算地址的经纬度变量，然后提交表单。这需要在回调函数中监听响应。

到目前为止，我的代码如下所示：

```
 $("form input:submit").click(function(e){
      e.preventDefault();
      var address = $(this).find('.address').val();
      geocoder.geocode( { 'address': unescape(address)}, function(results, status) 
      {
          if (status == google.maps.GeocoderStatus.OK) 
          {
            $(".latSelector input:hidden").val(results[0].geometry.location.lat());
            $(".lngSelector input:hidden").val(results[0].geometry.location.lng());
            $("form").submit();
          }
       });  
  }); 
```

如果我使用“提交”函数执行相同的操作，表单会在触发回调函数之前提交，并且后面的代码会以缺失值执行。

如果我像上面的代码一样在按钮上使用“click”事件并手动提交，那么代码会正确执行，但提交不会触发表单后面的代码。

我想我已经接近让它工作了，但我找不到可以运行代码、处理回调值然后正确提交表单的神奇组合，以便执行后面的代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T16:53:05.047

您应该使用`submit`表单上的事件，而不是`click`按钮的事件。有些浏览器允许在不使用提交按钮的情况下提交表单，只需在表单中的某些字段具有焦点时按 Enter 即可。

该`preventDefault`方法将停止提交表单，以便您稍后提交：

```
$("form").submit(function(e){
  e.preventDefault();
  var address = $(this).find('.address').val();
  geocoder.geocode( { 'address': unescape(address)}, function(results, status) 
  {
      if (status == google.maps.GeocoderStatus.OK) 
      {
        $(".latSelector input:hidden").val(results[0].geometry.location.lat());
        $(".lngSelector input:hidden").val(results[0].geometry.location.lng());
        $("form")[0].submit();
      }
   });  
}); 
```

### 编辑：

要使用按钮提交表单，您需要跟踪提交表单的原因：

```
var reason = 'user';

$("form").submit(function(e){
  if (reason == 'user') {
    e.preventDefault();
    var address = $(this).find('.address').val();
    geocoder.geocode( { 'address': unescape(address)}, function(results, status) 
    {
      if (status == google.maps.GeocoderStatus.OK) 
      {
        $(".latSelector input:hidden").val(results[0].geometry.location.lat());
        $(".lngSelector input:hidden").val(results[0].geometry.location.lng());
        reason = 'callback';
        $("form input:submit").click();
      }
    });
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:42:34.653

简单地：

1.  调用回调函数。
2.  当用户抛出提交时返回false（即不提交）。
3.  在回调结束时，放置一个使用[触发器](http://api.jquery.com/trigger/)函数进行提交的代码

快速示例代码：

```
$('elem').click(function{
  callback();
  return false;
}) 
```

`callback()`你应该提交表格。当您执行转换时，这也是一个很好的做法。

**编辑以回答您的评论** 为了完整起见，我将为我的回答提供完整的示例。请考虑我的回答不需要更多变量，正如[Guffa](https://stackoverflow.com/users/69083/guffa)所建议的那样。

你可以[在这里查看](http://jsfiddle.net/t5MPV/)，代码如下：

```
$('input[type="submit"]').click(function(e){
    var address = 'London, UK';
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': unescape(address)}, function(results, status){
      if (status == google.maps.GeocoderStatus.OK) 
      {
        $(".latSelector input:hidden").val(results[0].geometry.location.lat());
        $(".lngSelector input:hidden").val(results[0].geometry.location.lng());
        alert("DATA TAKEN BEFORE TO SUBMIT");
        $('form').submit();
      }
    });

  return false;
}); 
```

最后，考虑普通用户将执行以下操作：

1.  用户点击提交按钮
2.  用户假设看到后续页面，而客户端正在等待回调完成。
3.  所以，不耐烦的用户会再次点击发送按钮。

因此，我还建议在用户触发“点击”事件后禁用提交按钮。

最后，我建议始终使用`return false`而不是以`preventDefault()`阻止此类事件传播，请[在此处](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)阅读原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-05T21:20:00.233

我想出了一个可能更简单的解决方案来避免 Guffa 的初始提交循环。

一旦**回调结束**，只需**取消绑定**（使用 unbind() 或 off()）提交处理程序，**然后提交**表单。循环坏了；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T20:47:42.927

这可能违反了一些任意的标准可接受的做法，但我会阻止通过 enter 键提交表单，如下所示：

```
$('form').bind("keyup keypress", function(e) {
  var pressedKey = e.keyCode || e.which; 
  if (pressedKey  == 13) {               
    e.preventDefault();
    return false;
  }
}); 
```

然后我会将实际的提交按钮设置为 display:none 并使用一个元素来触发您在问题中使用的原始代码，使用 Guffa 建议的 .click() 。在没有多余的用户/回调条件逻辑的情况下完成交易。

```
$("button#Submit").click(function(){
      var address = $("form").find('.address').val();
      geocoder.geocode( { 'address': unescape(address)}, function(results, status) 
      {
          if (status == google.maps.GeocoderStatus.OK) 
          {
            $(".latSelector input:hidden").val(results[0].geometry.location.lat());
            $(".lngSelector input:hidden").val(results[0].geometry.location.lng());
            $("form input:submit").click();
          }
       });  
  }); 
```

# ember.js - Ember.js 将参数传递给动作助手

> ID：14241982
> 
> 赞同：3
> 
> 时间：2013-01-09T16:39:57.260
> 
> 标签：ember.js

如何将“简单”参数传递给动作助手，例如：

```
<li><a {{action markRead true target="controller"}}>Todo</a></li> 
```

True 将是我想通过的论点。

这显然是行不通的。

它必须是一个余烬路径才能工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-06T19:22:07.367

也许这最近已添加到 ember.js 中，但您肯定可以在动作助手中传递参数

模板：

```
{{action "downloadVideo" this false}} 
```

路线：

```
var ApplicationRoute = FooRoute.extend({

   actions: {
      downloadVideo: function(video, closeModal) {
        console.log("closeModal", closeModal); //outputs "closeModal false" if this didnt work it would output "closeModal undefined"
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T05:22:04.143

在 Ember 的最新版本（当然 >= 2.0）中，您的示例将写为：

```
<li><a {{action "markRead" true target="controller"}}>Todo</a></li> 
```

并且 true 将是您想要的布尔值。

旧版本的 Ember 将解释`true`为属性路径并尝试解析它的值。

# html - 如何在不使用定位的情况下让两个 div 彼此相邻？

> ID：14241983
> 
> 赞同：0
> 
> 时间：2013-01-09T16:39:57.007
> 
> 标签：html, positioning, line

我正在为我的新网站编写代码，但是当我制作两个应该彼此相邻的 div 时，一个放在另一个下面。我试过这样定位：

```
 position: absolute; top:20px; left:20px; 
```

但是在某些浏览器上，一切都变得混乱了。这是我的代码，我试图让“左”在左边，“主”在它的右边。

```
 <div  id="left" style="background-image:url(bg2.png); width: 326px; position: relative; z-index: -10;" ><img src="aldesign.png">
    <br>
    <img src="home.png" onmouseover="this.src='home2.png'" onmouseout="this.src='home.png'" />
    <br>
    <img src="about.png" onmouseover="this.src='about2.png'" onmouseout="this.src='about.png'" />
    <br>
    <img src="contact.png" onmouseover="this.src='contact2.png'"onmouseout="this.src='contact.png'" />
    <br>
    <br></div><div id="main" style="background-image:url('bg3.png');  background-repeat:repeat; width:924px; height: 522px; float: right;">
    </div> 
```

请尽快提供帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:49:40.200

这应该做的工作

```
<div id="wrapper" style="width:100%">
   <div id="left" style="float:left; width:50%">
   </div>
   <div id="right" style="float:left; width:50%">
   </div>
</div> 
```

这将使两个 div 彼此相邻。

# url - 如何将 url 地址重定向到我的地址

> ID：14241985
> 
> 赞同：0
> 
> 时间：2013-01-09T16:40:01.957
> 
> 标签：url, redirect, dns, web

我有一个网站，我应该在 48 小时内将其上线，但我直到现在才获得我的域名，我应该明天将我的网站地址放在手册中。

我们公司有一个网站，所以我的老板让我把我的网站放在公司网站下，直到我有我的域名，但问题是我们不在宣传册上公布我们的地址。

**我的问题是：**

当我将我的网站放在公司网站下时，它将具有以下地址：

www.companyName.com/mysite/Home

那么当我收到我的域名时，它将是：

www.mysite.com

在宣传册中，我会填写 www.companyName.com/mysite/Home，所以有什么方法可以将该地址放在宣传册上，然后该地址将重定向到我的网站。

我的意思是当用户将 www.companyName.com/mysite/Home 放在地址栏中时，他将被重定向到 www.mysite.com

我希望我已经解释了我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T16:41:27.680

您让服务器响应`301 Moved Permanently`状态和`Location: http://example.com/`带有新 URL 的标头。

具体操作方式取决于服务器。对于 Apache，您通常会使用[`Redirect`指令](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirect)。

由于您仅从某些本地路径（而不是整个域）重定向*，*因此您必须在 HTTP 级别而不是 DNS 级别执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:47:39.130

您可以将下一行代码放在您`<header>`的网站中，地址为 www.companyName.com/mysite/Home，然后将页面重定向到 www.mysite.com。代码是：

```
<meta HTTP-EQUIV="REFRESH" content="0; url=http://www.yourdomain.com/index.html"> 
```

将 URL 更改为您要重定向到的网站的 url。content 是访问者在重定向发生之前等待的秒数

# jquery - - 无前缀 jquery 插件 IE

> ID：14241987
> 
> 赞同：1
> 
> 时间：2013-01-09T16:40:06.497
> 
> 标签：jquery, internet-explorer, jquery-plugins, internet-explorer-9, prefixfree

我在使用 prefixfree 时遇到问题，jquery 插件似乎在 Internet Explorer 9 中不起作用。（也许这只是我的浏览器中的一些搞砸设置，我不知道，但 prefixfree 本身可以正常工作：初始旋转（20度）是前缀）

我已经设置了一个 jsbin 示例来说明我的意思：http: [//jsbin.com/ocipel/2/edit](http://jsbin.com/ocipel/2/edit)

我在 chrome 和 firefox 中对此进行了测试，它们按预期工作。任何帮助是极大的赞赏。（哦，似乎prefixfree不作为标签存在，所以我不得不将它分成“prefix”和“free”，对此感到抱歉）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:53:35.033

那是因为您的无前缀插件仅在页面加载时运行。由于无前缀插件在页面加载时解析文档中的每个样式表，因此正方形旋转了 20 度。页面加载后，您使用 javascript 为 css 属性赋予`transform`另一个值，但无前缀插件不知道这一点。因此，您应该在每个间隔后“重新运行”无前缀插件。

编辑：似乎我不需要 jQuery 1.8.0+ 的插件，它已经自动为 css 属性添加前缀，所以感谢让我再次搜索。（无论如何我仍然不知道为什么它不起作用，但现在不必）

# ruby - 用于简码语法的 ruby 正则表达式模式

> ID：14241989
> 
> 赞同：-2
> 
> 时间：2013-01-09T16:40:17.927
> 
> 标签：ruby, regex

我正在寻找能够在文本中找到短代码字符串的 ruby​​ 兼容正则[表达式](http://codex.wordpress.org/Shortcode)。

正则表达式将能够识别以下字符串：

*   `[shortcode]`
*   `[shortcode=value]`
*   `[shortcode key=value]`
*   `[shortcode=value]Text[/shortcode]`
*   `[shortcode key1=value1 key2=value2]Text[/shortcode]`
*   `[shortcode]Text[/shortcode]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T17:01:22.043

修剪您的示例中提供的解决方案：

```
\[shortcode(.*?)\]((.*?)\[\/shortcode\])? 
```

Where`$1`将得到第一个`shortcode`和最近的之间的所有内容`]`，并且`$3`将是和之间的`[shortcode...]`文本`[/shortcode]`。

至于从正则表达式中获取任意长度和顺序的已解析属性列表，不，你不能这样做。您可能可以在以下内容中查找特定属性`$1`：

```
key=(.*?)\b 
```

But to get the full list, you'll need to use other methods (perhaps the [Shortcode API](http://codex.wordpress.org/Shortcode_API) would help) to tokenize/parse `$1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T16:45:02.087

那这个呢 ？

```
/\[(?<shortcode>([^\]]+))(.+?)?\](?:(.+?)?\[\/\k<shortcode>\])?/.match('[blah]whatever[/blah]')
# => #<MatchData "[blah]whatever[/blah]" shortcode:"blah"> 
```

（只是替换`$shortcode`为`(?<shortcode>([^\]]+))`您提供的链接的正则表达式和`\k<shortcode>`第二个）

# python - psql.frame_query

> ID：14241993
> 
> 赞同：2
> 
> 时间：2013-01-09T16:40:32.960
> 
> 标签：python, pandas

有没有人有一个链接到 psql.frame_query() 中所有可能输入的描述的链接？

我有一种情况，我有许多参数 psql.execute(string, con, params)。psql.frame_query 中似乎没有类似的选项。有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:26:34.323

`frame_query = read_frame`只是一个功能分配。该`read_frame`函数至少需要两个参数：`(sql, con)`-- 其中`sql`是一个字符串。

在 pandas 0.10.1 版本中，有一些关于[SQL Queries](http://pandas.pydata.org/pandas-docs/stable/io.html#sql-queries)的文档的内容。这不是一个完整的“带有熊猫的 SQL”文档，但它是一个开始。

```
sql.read_frame("SELECT * FROM table_name;", cnx) 
```

我想你可以随用`frame_query`随用`read_frame`。在 git 日志中，我看到文件 io/sql.py 在一年前发生了变化。该功能`frame_query`已重命名。我认为这只是为了兼容性。如果不使用此函数的名称，则应将其删除。

`execute`返回查询的结果。`read_frame`将结果返回到 DataFrame 中。您还可以`index_col`在函数中指定参数`read_csv`。

# jquery - Jquery UI可拖动不滚动可排序容器

> ID：14241994
> 
> 赞同：4
> 
> 时间：2013-01-09T16:40:36.373
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-draggable

我有一些可拖动的项目（#draggable li），我将它们拖放到可排序的（#sortable）中。

sortable 被两个 div 包裹，最外层的 div 有 overflow-y: 滚动。拖放机制工作正常，直到可排序列表展开和滚动。

当我尝试将一个项目拖放到可排序对象上时，我无法让可排序滚动条以我想要的方式自动滚动（比如想要上移到第一个元素之上或下移到下面最后一个元素）。但是当我尝试在它们之间拖动和排序项目时，滚动条会在拖动时自动滚动。

是错误还是我的代码工作方式有问题。

这是完整的代码：

```
<body>
    <ul id="draggable" class="connectedSortable">
        <li class="ui-state-default big">Item 1</li>
        <li class="ui-state-default big">Item 2</li>
        <li class="ui-state-default big">Item 3</li>
        <li class="ui-state-default big">Item 4</li>
        <li class="ui-state-default big">Item 5</li>
        <li class="ui-state-default big">Item 6</li>
    </ul>

  <div id="outerDiv">
    <div id="innerDiv">
      <ul id="sortable" class="connectedSortable">
      </ul>
    </div>
  </div>
</body> 
```

//CSS

```
#sortable, #draggable { 
  list-style-type: none; 
  margin: 0; 
  padding: 0 0 2.5em; 
  margin-right: 10px; 
}
#sortable li, #draggable li { 
  margin: 0 5px 5px 5px; 
  padding: 5px; 
  font-size: 1.2em; 
  width: 120px; 
}
.marker{
    background: none repeat scroll 0 0 #DDDDDD;
    border-bottom: 1px solid #BBBBBB;
    border-top: 1px solid #BBBBBB;
    display: block;
    height: 20px;
    width: 100%;
    text-align: center;
    vertical-align: middle;
    color: #666;
    font-size: 18px;
    font-style: italic;
}

#outerDiv{
    background: none repeat scroll 0 0 #EEEEEE;
    height: 100%;
    right: 0;
    position: absolute;
    overflow-y: scroll; 
    top: 0;
    width: 300px;
}

#innerDiv{
    border: 1px solid #CCCCCC;
    min-height: 400px;
    position:absolute;
}
#sortable{
    width: 200px;
    padding: 10px;
    border : 1px solid black;
    min-height: 230px;
}

#draggable{
    position:absolute;
    top:0;
    left:0;
}
.big{
    height: 80px;
} 
```

//JS

```
$(function() {
  $( "#sortable" ).sortable({
       placeholder: "marker",
       axis: "y",
  });

  $("#draggable li").draggable({
      helper: "clone",
      cursor: "move",
      revert: "invalid",
      revertDuration: 500,
      connectToSortable: "#sortable"
  });
}); 
```

小提琴演示[http://jsfiddle.net/8KDJK/21/](http://jsfiddle.net/8KDJK/21/)

任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T20:55:19.187

我不确定这是一个错误，但它不是经典场景。

几个月前我花了很多时间寻找解决方法，这是我的解决方案：http: [//jsfiddle.net/8KDJK/23/](http://jsfiddle.net/8KDJK/23/)

它现在可以工作几个月没有问题。

这个想法是在帮助器构造回调期间将元素克隆附加到可滚动容器，然后在 1ms 后使用 setTimeout 函数将帮助器附加到主体，以便能够在网页周围拖动。

```
 $("#draggable li").draggable({
      cursor: "move",
      revert: "invalid",
      revertDuration: 500,
      connectToSortable: "#sortable",

      //Here is the workaround 
      //**********************

      containment: 'body',
      helper: function(){ 
        //Hack to append the element to the body (visible above others divs), 
        //but still bellonging to the scrollable container  
        $('#sortable').append('<div id="clone" class="ui-state-default big">' + $(this).html() + '</div>');   
        $("#clone").hide();
        setTimeout(function(){
            $('#clone').appendTo('body'); 
            $("#clone").show();
        },1);
        return $("#clone");
    }
  }); 
```

链接到我之前的问题：[JqueryUI，将元素拖入包含大表的滚动可拖放 div 的单元格中](https://stackoverflow.com/questions/12670124/jqueryui-drag-elements-into-cells-of-a-scrolling-dropable-div-containing-large)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-18T18:09:52.253

解决方案：

不要使用溢出：自动；

但

溢出：可见；

# java - Java 接口与继承和多态

> ID：14241996
> 
> 赞同：2
> 
> 时间：2013-01-09T16:40:38.193
> 
> 标签：java, inheritance, interface, polymorphism

为了从概念上理解继承、接口和多态性，我创建了几个类来测试事物。我得到的结果不是我所期望的。代码如下：

```
public class Animal implements Comparable{
//Animal constructor & methods
public int compareTo(Object arg0){System.out.println("Animal.compareTo");}
}

public class Bear extends Animal{
//Bear constructor & methods
}

public class PolarBear extends Bear implements Comparable{
//PolarBear constructor & methods
public int compareTo(Object arg0) {System.out.println("PolarBear.compareTo"); 
```

我没有收到任何错误说我无法再次实现 Comparable。但是在我的测试中，一旦我创建了 PolarBear，我就无法回到 Animal 的 compareTo 方法，即使 PolarBear 应该继承 Animal 的 compareTo。我测试了以下内容：

```
Animal bobo = new PolarBear();
bobo.compareTo(null);
((PolarBear) bobo).compareTo(null);
((Animal)bobo).compareTo(null);
((Comparable) bobo).compareTo(null); 
```

他们每个人都打印了：

```
 PolarBear.compareTo 
```

有什么方法可以访问`Animal`'s`compareTo`吗？从逻辑上讲，我不希望能够比较 a 的动物品质`PolarBear`以及`PolarBear`品质吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T16:47:12.860

`bobo`将对象转换为`PolarBear`、`Animal`或并不重要，对象`Comparable`的运行时类型将始终是`PolarBear`，因为您将其实例化为

```
Animal bobo = new PolarBear(); 
```

因此，无论何时调用`.compareTo(wtv)`它都会调用`PolarBear`实现。

这就是多态性。阅读[后期绑定](http://en.wikipedia.org/wiki/Late_binding)，因为这就是多态在 java 中的实现方式。

如果要调用`compareTo(wtv)`父类的方法，则必须`super.compareTo(wtv)`在任何其他子类的方法中进行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T16:46:13.473

compareTo 和继承通常是一件[棘手的事情](http://www.javapractices.com/topic/TopicAction.do?Id=10)。从理论上讲，拥有 Comparable 具体超类的子类会破坏可比合同。例如 - 假设我有一个超类 A，它通过检查字段 a1 和 a1 与其他 A 进行比较。现在让我们添加一个具有额外字段 b1 的子类 B。`anA.compareTo(aB)`将通过 a1 和 a2 进行比较，而`((A)aB).compareTo(anA)`不会与
您的问题相同-您可以通过执行类似的操作仅从子类本身调用 compareTo 的 Animal 版本

```
super.compareTo(<something>) 
```

但不是来自“外部”，因为您已经覆盖了该方法。您有责任与外部世界保持与您刚刚覆盖的方法相同的“合同”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T16:43:50.503

您可以随时从 PolarBear 中调用**super.compareTo(arg0)来调用 Animal.compareTo 中的逻辑。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T16:58:46.510

这很简单。底层对象是 PolarBear 类，您每次都在更改对象的接口（用于保存对象引用的类）。

JVM 在编译时检查接口中的方法（用于保存对象引用的类）是否存在，但绑定发生在运行时，因为 Child (PolearBear) 具有该方法，因此它将始终运行该方法。

> 使用 super.compareTo() 来调用父方法。

# actionscript-3 - 将电话推送到 Flash Media Server

> ID：14241998
> 
> 赞同：0
> 
> 时间：2013-01-09T16:40:38.410
> 
> 标签：actionscript-3, flash, http-live-streaming, flash-media-server, pbx

我试图弄清楚这个项目的第一步。我使用过 AMS 和 Flash Builder。但是我们如何让用户拿起电话并拨入 AMS 并进行流式传输呢？

星号？其他类型的 PBX 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T04:53:50.410

In order to push a phone call to Flash media server you should leverage the capabilities of Flash media gateway. FMG is a RTMP based SIP server implementation. So you receive a call from regular phone lines and forward it to any of your SIP server implementations and map that SIP server to your FMG so that you can redirect the calls coming on your SIP account to FMG and through that to FMS. An open implementation to FMG include SIP-RTMP [ [http://code.google.com/p/siprtmp/](http://code.google.com/p/siprtmp/) ]

Some references on FMG: [http://forums.adobe.com/thread/766836](http://forums.adobe.com/thread/766836)
hope this will help you.

# c# - 使用管道中的数据

> ID：14241999
> 
> 赞同：2
> 
> 时间：2013-01-09T16:40:40.067
> 
> 标签：c#, powershell, pipeline

在 C# 中编写 cmdlet 时如何使用管道中的数据？

例如我有两个类：

这个产生数据：

```
[Cmdlet(VerbsCommon.Get, "Numbers")]
public class GetNumbers : Cmdlet
{
    protected override void ProcessRecord()
    {
        WriteObject(new[] {1, 2, 3, 4, 5}, true);
    }
} 
```

而这个必须消耗这些数据：

```
[Cmdlet(VerbsCommon.Find, "Numbers")]
public class FindNumbers: Cmdlet
{
    protected override void ProcessRecord()
    {
        foreach (var variable in %Input%) // Where do I get input? Any ReadRecord or something else?
        {
            if (variable % 2 == 0)
            {
                WriteObject(variable);
            }
        }
    }
} 
```

这样：

```
Get-Numbers | Find-Numbers 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T16:41:19.690

您应该使用[ParameterAttribute](http://msdn.microsoft.com/en-us/library/ms582834%28v=vs.85%29.aspx)类的[ValueFromPipeline ：](http://msdn.microsoft.com/en-us/library/system.management.automation.parameterattribute.valuefrompipeline%28VS.85%29.aspx)

```
[Cmdlet(VerbsCommon.Find, "Numbers")]
public class FindNumbers: Cmdlet
{
    [Parameter(ValueFromPipeline = true)] // The data appear in this variable
    public int[] Input { get; set; }

    protected override void ProcessRecord()
    {
        foreach (var variable in Input)
        {
            if (variable % 2 == 0)
            {
                WriteObject(variable);
            }
        }
    }
} 
```