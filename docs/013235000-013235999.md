# StackOverflow 问答 13235000-13235999

# linux - 在 Linux 上安装 libjson-rpc-perl

> ID：13235001
> 
> 赞同：0
> 
> 时间：2012-11-05T15:17:31.703
> 
> 标签：linux, perl, json-rpc, zabbix, libjson

我正在尝试在我的 linux 服务器上安装**libjson-rpc-perl**但遇到错误。谁能指导我正确的方向？

**细节 ：**

```
09:04:02 # lsb_release -a
LSB Version:    :core-4.0-amd64:core-4.0-noarch:graphics-4.0-amd64:graphics-4.0-noarch:printing-4.0-amd64:printing-4.0-noarch
Distributor ID: RedHatEnterpriseServer
Description:    Red Hat Enterprise Linux Server release 6.2 (Santiago)
Release:        6.2
Codename:       Santiago 
```

**安装：**

(perl) - 完成

```
09:01:26 # yum list available 'perl'
Loaded plugins: product-id, subscription-manager
Updating certificate-based repositories. 
```

(libjson-rpc-perl) - 错误

```
09:03:40 # sudo yum install libjson-rpc-perl
Loaded plugins: product-id, subscription-manager
Updating certificate-based repositories.
Setting up Install Process
No package libjson-rpc-perl available.
Error: Nothing to do
root@zabbix_server:/root 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:24:50.147

通过您的 CPAN 客户端安装软件包；或者（让某人）为它创建一个 RPM 包，然后安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:57:46.320

那绝对是一个 debian 包名，而不是 redhat 包名。已经在[这里](http://rpm.pbone.net/)搜索了 redhat 包，但似乎没有

# javascript - 更改 CKEditor 中“格式”下拉菜单的大小

> ID：13235005
> 
> 赞同：2
> 
> 时间：2012-11-05T15:17:44.303
> 
> 标签：javascript, ckeditor

我想在 CKEditor 中更改“格式”下拉菜单（选择）的大小。我怎样才能做到这一点？

![在此处输入图像描述](../Images/4512776d0c21a3627d59bcffc5f3ed43.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T08:14:25.720

只需更改`.cke_format_panel`类样式。只是`!important`为了确定：

```
.cke_format_panel
{
    height: 250px !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-08T07:11:15.553

我正在使用 CKEditor 4，并将以下类分配给**格式**菜单：

```
cke cke_reset_all cke_1 cke_panel cke_combopanel cke_ltr 
```

**样式**菜单有：

```
cke cke_reset_all cke_1 cke_panel cke_combopanel cke_ltr cke_combopanel__styles 
```

所以你需要使用`cke_panel`or`cke_combopanel`但这也会影响**样式菜单，但是你可以用****cke_combopanel__styles**再次覆盖它们：

```
.cke_combopanel {
     width: 250px !important;
}
.cke_combopanel__styles {
    width: 150px !important;
} 
```

**注意：** css 必须进入主文档的样式，而*不是*CKEditor 的样式。这是因为这些类被分配给包含菜单的 iframe 的 div，而不是在加载 CKEditor 样式的 iframe 本身内。

# wcf - 客户端在完成 wcf 服务调用后挂起

> ID：13235010
> 
> 赞同：0
> 
> 时间：2012-11-05T15:18:00.840
> 
> 标签：wcf

> **可能重复：**
> [WPF 应用程序调用 WCF 服务方法，然后 wpf 应用程序挂起](https://stackoverflow.com/questions/13236675/wpf-application-calls-wcf-service-method-and-and-then-wpf-app-hangs)

服务：

```
public MoviesResponse GetMoviesList(MoviesRequest request)
{
    List<Movie> movies = DataAccess.GetMovies(0);
    MoviesResponse response = new MoviesResponse();
    response.movies = movies;
    return response;
}

[DataContract]   
public class MovieResponse
{
    [DataMember]
    public IList<MovieReview> movieReviews;
}

[DataContract]    
public class MoviesResponse
{
    [DataMember]
    public IList<Movie> movies;
}

[DataContract]
public class MovieRequest
{
    [DataMember]
    public int movieId;
}

[DataContract] 
public class MoviesRequest
{
    [DataMember]
    public int movieId;
} 
```

客户：

```
MoviesResponse response = Client.GetMoviesList(request); 
```

服务调用完成但从未返回给客户端。

# javascript - 文件夹中的 Javascript 大规模缩小和连接

> ID：13235011
> 
> 赞同：1
> 
> 时间：2012-11-05T15:18:06.500
> 
> 标签：javascript, minify

有没有一些简单的方法来缩小和连接同一文件夹中的一堆JS文件+文件夹中的文件夹？我只想要那个，没有别的。

尝试了 HTML5 Boilerplate ant 构建脚本。尽管它以某种方式起作用，但这对于这项工作来说太复杂了。即使在 project.properties 中指定 images.default.bypass 值，我也不知道如何跳过图像优化部分。

所以我需要一些脚本从控制台运行，所以它会递归地缩小和连接它可以找到的所有 JS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:37:30.903

您可以使用 Microsoft 解决方案 [http://ajaxmin.codeplex.com/](http://ajaxmin.codeplex.com/) 这可以缩小 CSS 和 JS。它还具有“通配符”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:22:08.830

听起来像是一份工作`Makefile`。最新版本`make`具有您所要求的内置通配符功能。`make`如果您对这个工具一无所知，请使用 GNU ，因为它非常广泛可用且众所周知。

# java - eclipse - 仅在特定类和该类的所有子类中查找引用

> ID：13235014
> 
> 赞同：3
> 
> 时间：2012-11-05T15:18:15.160
> 
> 标签：java, eclipse

我需要在特定类型层次结构中找到对外部方法的引用，比如 Foo.getInstance()，基本上我想将搜索结果限制在特定的类和所有子类中，我对所有引用都不感兴趣。是否可以使用 eclipse 或任何自定义插件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:36:21.647

您可以这样做创建一个工作集，其中仅包含包含您的层次结构的文件。然后`CTRL+H`使用范围“工作集”进行 Java 搜索。

如果这些类都在一个包中，您可以在 Project Explorer 中选择它，然后使用范围“Selected”执行 Java 搜索。

工作集很棒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-03T06:17:52.257

我已经确定了一种解决方法。需要查看 Eclipse 搜索结果（在“显示为列表”模式下）。

例如 ClassA 有几个子类 (ClassB,C..Z)，它们继承定义在类 A 上的 methodA 并调用它们。

在 Eclipse 中执行方法引用，并使用右上角出现的三角形/视图菜单将视图更改为“显示为列表”。这将列出包含超类/子类引用的方法签名，以便您可以轻松地从搜索结果中选择或删除。

如果要过滤的结果太多，您可以将其复制到文件编辑器并使用子类名称 (ClassB) 的搜索关键字，并且包含 classB 的每一行都是在 classB 对象上调用 methodA 的潜在结果。

注意：如果方法签名使用 classA 对象引用并且在正文中它类型转换为 classB，那么您需要选择该条目而不是删除它。我还推荐上面提到的工作集方法。这是发布问题的替代方法。

# java - 在 XMLConfiguration 文件中记录更改

> ID：13235017
> 
> 赞同：2
> 
> 时间：2012-11-05T15:18:21.860
> 
> 标签：java, xml, logging, xml-configuration

我有一个配置文件（一个 XML），我使用`XMLConfiguration`.

我需要确保`XMLConfiguration`更新此实例（每 30 秒）。

为此，我有以下代码：

```
 XMLConfiguration configuration = new XMLConfiguration(configFile);
 configuration.setAutoSave(true);

 FileChangedReloadingStrategy strategy = new FileChangedReloadingStrategy();
 strategy.setRefreshDelay(getRefreshDelay());
 configuration.setReloadingStrategy(strategy); 
```

它工作得很好，但问题是我想记录这个 XML 文件中的任何更改。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:04:23.480

我知道了！

我需要做的就是：

```
 ConfigurationListener listener = new ConfigurationListener() {

        @Override
        public void configurationChanged(ConfigurationEvent event) {
            if ( !event.isBeforeUpdate() ){
                System.out.println(event.getPropertyName() + " " + event.getPropertyValue());
            }
        }
    };
    configuration.addConfigurationListener(listener); 
```

有用！

# android - 如何从我们的应用中检测其他应用的操作和数据？

> ID：13235020
> 
> 赞同：1
> 
> 时间：2012-11-05T15:18:23.810
> 
> 标签：android

我正在尝试制作一个应用程序，我想在其中捕获设备中其他应用程序的事件。即假设单击了应用程序的按钮，然后我想获取此单击事件并对其进行修改并相应地执行一些操作。可能吗？如果是，那怎么办？

Android 系统中是否有防火墙或网关，从设备传出的所有数据都从那里通过？有没有办法捕获这些数据？请帮忙。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:25:20.290

> 可能吗？

幸运的是，不，出于明显的隐私和安全原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:36:45.347

绝对不可能……除非您要“监视”的应用程序明确共享数据和/或事件。

暴露服务、事件和数据的 android 方式是通过[意图](http://developer.android.com/guide/components/intents-filters.html)和[广播](http://developer.android.com/reference/android/content/BroadcastReceiver.html)。

# objective-c - 更改 self.view 框架不起作用

> ID：13235022
> 
> 赞同：3
> 
> 时间：2012-11-05T15:18:26.057
> 
> 标签：objective-c, ios

我有以下结构：

UIViewController > UIView (self.view) > UITableView (self.tableView - IBOutlet)

我试图将整个东西向上移动 59 像素，我尝试过：

```
- (void)viewWillAppear:(BOOL)animated {

    self.view.frame = CGRectMake(0, -59, 320, 367 + 59);
    // or
    self.tableViewMe.frame = CGRectMake(0, -59, 320, 367 + 59);;

    NSLog(@"%f", self.view.frame.origin.x);
    NSLog(@"%f", self.view.frame.origin.y);
    NSLog(@"%f", self.view.frame.size.width);
    NSLog(@"%f", self.view.frame.size.height);

    NSLog(@"%f", self.tableView.frame.origin.x);
    NSLog(@"%f", self.tableView.frame.origin.y);
    NSLog(@"%f", self.tableView.frame.size.width);
    NSLog(@"%f", self.tableView.frame.size.height);

    [super viewWillAppear:animated];

} 
```

坐标是对的，但是视图和桌子是一样的，根本不动。此外，如果我将以下代码添加到 IBAction，例如点击按钮，那么它可以工作：

```
self.view.frame = CGRectMake(0, -59, 320, 367 + 59); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:19:44.730

尝试将其粘贴在 viewDidAppear 而不是 viewWillAppear 中。

# javascript - 是否有任何文本输入允许阻止呼叫的警报？

> ID：13235026
> 
> 赞同：0
> 
> 时间：2012-11-05T15:18:35.860
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 创建警报。但问题是它不是阻塞调用。检查某些情况后，我需要循环调用它。如果用户最初通过文本文章输入了一些错误的内容，我需要在检查错误后让用户修复一行。

有没有办法在不使用while循环或任何东西的情况下阻止编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:20:35.660

JavaScript 中没有办法进行阻塞调用。JavaScript 中没有 wait()/sleep()。您需要将逻辑分解为两个步骤。

# c# - 如何获取自定义实体的汇总查询结果

> ID：13235030
> 
> 赞同：0
> 
> 时间：2012-11-05T15:18:45.790
> 
> 标签：c#, dynamics-crm-2011

尝试获取记录时出现此错误

```
The 'Rollup' method does not support entities of type 'new_X'. 
```

这是我的代码

```
RollupRequest req = new RollupRequest();
QueryExpression qe = new QueryExpression();
qe.EntityName = "new_x";
qe.ColumnSet = new ColumnSet(true);
req.Query = qe;
req.Target = new EntityReference("new_newpost", new Guid("xxxxxxxxxxxxxxxxxxxxxxxxxxxxx"));
req.RollupType = RollupType.Related;
RollupResponse resp = (RollupResponse)xrm.Execute(req); 
```

如何获取汇总查询的结果

提前致谢

* * *

对于自定义实体，您可以进行休耕

```
var rollupQuery = xrm.GoalRollupQuerySet.Where(c => c.Id == x.new_RecordstoRun.Id).First();
var result = xrm.RetrieveMultiple(new FetchExpression(rollupQuery.FetchXml)); 
```

但是 - 我怎样才能添加一个“跳过”或“采取”Linq？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:34:20.010

您只能在[MSDN](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.rolluprequest.aspx)`RollupRequest`上描述的特定实体集上使用。

所以这对“new_x”或“new_newpost”永远不起作用。

[本文](http://msdn.microsoft.com/en-us/library/hh913608.aspx)对`RollupRequest`使用机会和帐户进行了正确的演示。

我建议只创建您自己的自定义`QueryExpression`来检索所有“new_x”，然后使用`LinkEntities`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:21:08.050

这是我的代码，所以得到 RollupQuery 的结果

```
List<Guid> GetAllResultsFromRollupQuery(XrmServiceContext xrm, Guid rollupQueryId)
{
    var rollupQuery = xrm.GoalRollupQuerySet.Where(v => v.Id == rollupQueryId).First();
    var qa = GetQueryExpression(xrm, rollupQuery.FetchXml);

    qa.PageInfo.Count = 1000;
    qa.ColumnSet.AddColumn(rollupQuery.QueryEntityType + "id");

    var result = new List<Guid>();
    EntityCollection ec = null;

    do
    {
        ec = xrm.RetrieveMultiple(qa);
        ec.Entities.ToList().ForEach(v => result.Add((Guid)v.Attributes[rollupQuery.QueryEntityType + "id"]));
        qa.PageInfo.PageNumber += 1;

    } while (ec.MoreRecords == true);

    return result;
}

QueryExpression GetQueryExpression(XrmServiceContext xrm, string fetchXml)
{
    var req = new FetchXmlToQueryExpressionRequest { FetchXml = fetchXml };
    var result = (FetchXmlToQueryExpressionResponse)xrm.Execute(req);
    return result.Query;
} 
```

# jquery - 在图片链接后面滑动背景图片

> ID：13235031
> 
> 赞同：2
> 
> 时间：2012-11-05T15:18:47.910
> 
> 标签：jquery, image, button, background

所以，我有这个带有菜单的 html 网页。我已将菜单编码为带有 3 个链接的列表。

菜单由 Illustrator png 图像组成：主页、联系人等。我想要实现的是，当您将鼠标悬停在链接上时，某种颜色会从左侧滑出。这种特定的颜色也是 Illustrator 图像。

我可以用一个简单的纯文本菜单、背景幻灯片的图像和 jQuery: [jQuery 按钮](https://dl.dropbox.com/u/11998293/buttons/index.html)来做到这一点（通过教程） ，但我想用 2 个图像来做到这一点。

我是否正确地解释了自己？我该如何尝试这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:18:45.257

有几种方法可以实现这一点，这里有 3 种。

1) 在背景图像精灵中包含透明图像。因此，您正在组合这两个图像并将其用作单个背景图像。然后，您只需相应地定位背景图像。如果你不熟悉精灵，这里有一篇讨论它们的帖子：[CSS Sprite Button](https://stackoverflow.com/questions/11873323/css-sprite-button)

2) 将图像硬编码到您的链接中并使用 css 生成背景颜色。这样您就不必使用单独的图像。例如：a:hover { 背景：#f00; }

3）将图像硬编码到您的链接中并使用背景图像来实现悬停效果。我不建议这样做，因为它会导致您的链接变得不可搜索和不可选择。

# wpf - Wpf组合框与父/子表的数据绑定

> ID：13235034
> 
> 赞同：3
> 
> 时间：2012-11-05T15:19:01.333
> 
> 标签：wpf, data-binding

我是 wpf 和 DataBinding 的新手。我在一个小应用程序中尝试了 wpf。现在我在将 CollectionViewSource 与组合框结合使用时遇到了问题

在 Datagrid 中，我显示表“OrderDetails”的内容现在的问题：我想将字段“PartId”显示为 Combox。组合框应包含所有“部件”并显示“名称”而不是 PartId

（对不起，我无法上传 DB-layout 的图片）

表**OrderDetails** : *Id* ,OrderId,PartId,Count

表格**部件**：*ID*、名称、描述、价格

```
<DataGrid Margin="80,0,0,0" Background="Transparent" HeadersVisibility="Column" 
  ItemsSource="{Binding Source={StaticResource projectsOrderdetailsViewSource}}">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="Fahrzeug" Width="SizeToHeader">
            <DataGridTemplateColumn.CellTemplate>
                 <DataTemplate>
                     <ComboBox  DisplayMemberPath="Name"
                       ItemsSource="{Binding Source={StaticResource partsViewSource}}" 
                       SelectedValue="{Binding Path=ID}"
                       SelectedValuePath="{Binding Path=PartId}"/>
                 </DataTemplate>
             </DataGridTemplateColumn.CellTemplate>
         </DataGridTemplateColumn>
.... 
```

显示数据网格和包含的组合框，但是

1.  该值未正确显示。
2.  如果我从组合框中选择任何内容，则数据网格的所有项目都会获得选定的值。

你能帮我正确配置组合框吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:32:41.170

您可能绑定到单个partsViewSource。

partsViewSource 需要是 projectOrderdetailsViewSource 的一个属性，所以每一行都有它自己的 partsViewSource

该列表需要一个公共属性，因此每一行都有自己的列表。

```
class order
{
    public Int ID {get; private set;}
    public List<string> Parts { get; set }
} 
```

# mysql - 更改 MySQL 表中的行顺序

> ID：13235042
> 
> 赞同：-2
> 
> 时间：2012-11-05T15:19:23.003
> 
> 标签：mysql, sql

有没有办法改变 MySQL 表中的行顺序？
我想更改最基本查询的返回顺序：

```
SELECT * FROM table 
```

查询不包含 ORDER BY 部分。

给出了查询，我无法更改它。我只能访问数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:28:30.443

SQL 语言中不存在“默认顺序”的概念，无论快速测试会发现什么。对行进行排序会增加查询的开销，并且当应用程序不需要排序时让查询变慢是没有意义的。

所以你的问题的答案是“不”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:21:01.593

像这样：

```
SELECT * FROM table ORDER BY [column name] 
```

您可以通过在末尾添加 ASC 或 DESC 来选择排序方式：

```
SELECT * FROM table ORDER BY [column name] ASC 
```

# eclipse - 如何在 Eclipse 插件开发中从介绍页面打开任何 Eclipse 向导

> ID：13235047
> 
> 赞同：0
> 
> 时间：2012-11-05T15:19:28.670
> 
> 标签：eclipse, plugins, eclipse-rcp, wizard

我的欢迎页面使用 HTML 文件。我想使用从介绍页面打开 Eclipse 向导

```
href="http://org.eclipse.ui.intro/runAction?pluginId=MobileTalk&amp;class=mobiletalk.intro.ShowPerspectiveIntroAction" 
```

在课堂`ShowPerspectiveIntroAction`上，我的代码如下：

```
Class c = Class.forName("tttt.ddt.plugin.project.NewTtttProjectWizard");
Wizard wizard = (Wizard) c.newInstance();
WizardDialog dialog = new WizardDialog(PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell(),wizard);
dialog.open(); 
```

但我得到了错误：`classnotfound:tttt.ddt.plugin.project.NewTtttProjectWizard`

如何从介绍页面正确打开任何 Eclipse 向导？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:49:14.113

通过查看您的代码，我怀疑这是一个类加载器问题。在 Eclipse/OSGI 中使用 Class.forName 不是一种安全的做法，因为每个插件/捆绑包都使用自己的类加载器，因此很多时候会发生 Class Not Found Exceptions。更好的方法是通过执行以下操作获取包含您的向导类的 Bundle/Plugin：Platform.getBundle("com.stackoverflow.myplugindId")，它返回 Bundle 的实例。然后在 bundle 的实例上调用 .loadClass("tttt.ddt.plugin.project.NewTtttProjectWizard") ，它将使用正确的类加载器，然后一旦你有了 Class 的实例，你就可以调用 newInstance() 方法，它将解决您的 Class not found 问题。希望有帮助，类加载在 OSGI 环境中更加复杂，因为出于安全原因，每个插件都有自己的类加载器，所以我建议不要在代码中使用 Class.forName。- 邓肯

# sql - INSERTED 表中的多行

> ID：13235048
> 
> 赞同：4
> 
> 时间：2012-11-05T15:19:30.323
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在 MS SQL Server 中的表上，如果这些行满足某些条件，我需要在新行上运行 CLR 存储过程。我认为这或多或少是直截了当的：

```
if ((SELECT Cabinet FROM INSERTED) = 1 OR (SELECT Cabinet FROM INSERTED) = 3) AND (SELECT Result_02 FROM INSERTED) = 'N'
BEGIN
    DECLARE @id int
    SET @id = (SELECT ID FROM INSERTED)
    exec PrintLabel
        @id,
        N'LP 2844 LGE'
END; 
```

但是，这最近开始引发有关返回多行的子查询的错误。我了解到 INSERT 触发器为每个语句运行一次，不一定在单独的行上运行。因此，该 IF 语句可以在多行上工作，从而导致错误。

我的问题是：如果行是批量添加的（在本例中是通过 MERGE 语句），我如何迭代每个新行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:22:37.903

为 N 行调用存储过程仍然需要游标。

```
declare @id int
declare cur cursor fast_forward for 
    select  id 
    from    inserted 
    where   Cabinet in (1,3)
open cur
fetch next from cur into @id
while @@fetch_status = 0   
    begin
    exec PrintLabel @id, N'LP 2844 LGE'
    fetch next from cur into @id
    end
close cur
deallocate cur 
```

# mysql - 一对多和一对一的关系混在一起，怎么办？

> ID：13235053
> 
> 赞同：1
> 
> 时间：2012-11-05T15:19:46.577
> 
> 标签：mysql, database-design, one-to-one

我的问题可能很愚蠢，因为我认为这是一个非常常见的设计问题，我想有一个简单而常用的解决方案：

*   我有一张桌子 Producer 和一张桌子 Movie
*   一位制片人制作了许多电影
*   一位制片人在他制作的电影中拥有一部最喜欢的电影

我如何在 MySQL 中实现它？

1.  Producer 和 Movie 之间只有一个 ONE-TO-MANY 关系，加上 Movie 表中的“favorite”布尔属性
2.  一个一对多关系表示“已生产”关系，一个一对一关系表示“最喜欢”关系

第一个方案对我来说似乎更自然，但是当制片人想要改变他最喜欢的电影时，我想第二个方案更有效。使用解决方案 #2 找到制片人最喜欢的电影应该更有效。

我错过了什么？有没有最好的解决方案？如果不是，在哪种情况下我应该使用解决方案 #1 和解决方案 #2？

（当然，我的问题比上面的例子要复杂一些......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:20:59.850

(1) 以声明方式执行并不容易/有效。另外，您最终会在所有不喜欢的电影上浪费空间。

（2）是要走的路。不幸的是，这种循环依赖会导致先有鸡还是先有蛋的问题，解决了：

*   通过推迟其中一个 FK（如果 DBMS 支持它，不幸的是 MySQL 不支持它），
*   或者通过将 FK 保留在用户 NULL-able 中，这不太理想，因为用户现在可以拥有零或一部喜欢的电影（而不是严格来说是一部）。

* * *

假设您希望同一部电影与多个用户相关（使其成为多对多关系，而不是您所说的一对多），您的模型最终会在支持可延迟 FK 的 DBMS 中看起来像这样：

![在此处输入图像描述](../Images/8236ef8db12ad882b403664a34ceb961.png)

但是你没有延迟 MySQL 中的约束的奢侈，所以你将被迫做这样的事情：

![在此处输入图像描述](../Images/ceacd6920b992868335333e3e0f1ea8a.png)

```
CHECK (FAVORITE_USER_ID IS NULL OR FAVORITE_USER_ID = USER_ID) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:28:57.507

一般来说，我会选择解决方案 2。除了更简单地查询最喜欢的电影之外，这还有一个内置约束的额外好处，将用户限制为只有一部喜欢的电影。此外，这会稍微小一些，每个用户有一个 id，而不是每个观看电影用户有一个布尔值。然而，一个副作用是您可以在不观看的情况下收藏一部电影。

仅当您希望将来扩展收藏夹系统以包含多个收藏夹时，解决方案 1 才是首选。然而，这显然是不可取的。

* * *

值得一提的是，用户和电影之间的关系是多对多，而不是一对多，因为*每个*用户都有自己的观看电影列表。因此，您将需要第三个表来链接两者。当然，除非您只是为每个用户提供一个不相关字符串的列表，但我怀疑情况是否如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:25:27.300

布尔属性不仅占用更多空间，而且看起来会阻止多个用户拥有一个收藏夹。

第二种解决方案听起来是正确的。在 User 中有一个字段来表示每个用户的最爱，还有一个附加表来建立一对多的“已观看”关系。

如果您需要确保用户确实看过他/她最喜欢的电影，您应该将该逻辑作为业务规则添加到您的数据访问对象中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:22:51.443

如果您确定总是只有一部电影，我将在用户表中具有“最喜欢的电影 ID”属性，以及用户和电影之间的多对多关系（许多用户可以观看同一部电影）

因此，总共三个表，用户表中的标志。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T15:24:40.057

我认为第二种解决方案更可行。您可以为这些关系创建两个表，一个名为 HasWatched，另一个名为 Favorite。这两个表都包含两列，名为 userId - movieId。Haswatched 表的主键是 (userId - movieId) 元组。但是Favorite 表的主键只有userId。因此，您可以应用所有约束。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T15:27:11.067

我会做第三张桌子......我不认为是一对多关系，它是多对多，一个用户可以观看很多电影，但一部电影可以被很多用户观看......

我会使用 user_id、movie_id 制作一个用户表、一个电影表和一个用户观看电影的表，并添加一个指向用户喜爱的 movie_id 的 favorite_movie 字段。

# .htaccess - 如何使用 htaccess 将所有 www 流量重定向到相同的非 www 页面

> ID：13235054
> 
> 赞同：0
> 
> 时间：2012-11-05T15:19:52.687
> 
> 标签：.htaccess, redirect

我想问题很简单，但我自己做不到。

我在[http://website.com](http://website.com)上有一个网站，并希望 301 将 www.website.com 上的所有请求重定向到[http://website.com/](http://website.com/)但确保所有目录和文件名保持不变（因此并非所有请求都结束在主页上）。

因此，无论人们键入什么内容（例如 www.website.com/something.here），都应该 301 重定向到 website.com/something.here

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:22:03.690

将以下内容添加到您的`.htaccess`文件中。应该做的伎俩。

```
RewriteCond %{HTTP_HOST} ^yoursite.com
RewriteRule (.*) http://www.yoursite.com/$1 [R=301,L] 
```

这要求重写引擎打开...

```
<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

    RewriteCond %{HTTP_HOST} ^yoursite.com
    RewriteRule (.*) http://www.yoursite.com/$1 [R=301,L]

</IfModule> 
```

# directx - 未渲 染偶数索引的 DirectX 11 模型

> ID：13235055
> 
> 赞同：1
> 
> 时间：2012-11-05T15:19:55.803
> 
> 标签：directx, directx-11

我在使用 directx 11 渲染时遇到问题 - 如果我尝试渲染多个模型，我只会看到具有奇数索引的模型。所有使用偶数索引渲染的模型都是不可见的。

我的代码基于 rastertek 教程：

```
m_dx->BeginScene(0.0f, 0.0f, 0.0f, 1.0f);
{
    m_camera->Render();

    XMMATRIX view;
    m_camera->GetViewMatrix(view);

    XMMATRIX world;
    m_dx->GetWorldMatrix(world);

    XMMATRIX projection;
    m_dx->GetProjectionMatrix(projection);

    XMMATRIX ortho;
    m_dx->GetOrthoMatrix(ortho);

    world = XMMatrixTranslation(-2, 0, -4);
    m_model->Render(m_dx->GetDeviceContext());
    m_texture_shader->Render(m_dx->GetDeviceContext(), m_model->GetIndicesCount(), world, view, projection,
        m_model->GetTexture());

    world = XMMatrixTranslation(2, 0, -2);
    m_model->Render(m_dx->GetDeviceContext());
    m_texture_shader->Render(m_dx->GetDeviceContext(), m_model->GetIndicesCount(), world, view, projection,
        m_model->GetTexture());

    world = XMMatrixTranslation(0, 0, -3);
    m_model->Render(m_dx->GetDeviceContext());
    m_texture_shader->Render(m_dx->GetDeviceContext(), m_model->GetIndicesCount(), world, view, projection,
        m_model->GetTexture());

}
m_dx->EndScene(); 
```

模型渲染方法

```
UINT stride, offset;

stride = sizeof(VertexPosTextureNormal);
offset = 0;

device_context->IASetVertexBuffers(0, 1, &m_vertex_buffer, &stride, &offset);
device_context->IASetIndexBuffer(m_index_buffer, DXGI_FORMAT_R32_UINT, 0);
device_context->IASetPrimitiveTopology(D3D11_PRIMITIVE_TOPOLOGY_TRIANGLELIST); 
```

着色器渲染方法：

```
world = XMMatrixTranspose(world);
view = XMMatrixTranspose(view);
projection = XMMatrixTranspose(projection);

D3D11_MAPPED_SUBRESOURCE mapped_subres;
RETURN_FALSE_IF_FAILED(context->Map(m_matrix_buffer, 0, D3D11_MAP_WRITE_DISCARD, 0, &mapped_subres));
MatrixBuffer* data = (MatrixBuffer*)mapped_subres.pData;
data->world = world;
data->view = view;
data->projection = projection;
context->Unmap(m_matrix_buffer, 0);
context->VSSetConstantBuffers(0, 1, &m_matrix_buffer);
context->PSSetShaderResources(0, 1, &texture);

    // render
    context->IASetInputLayout(m_layout);

context->VSSetShader(m_vertex_shader, NULL, 0);
context->PSSetShader(m_pixel_shader, NULL, 0);
context->PSSetSamplers(0, 1, &m_sampler_state);
context->DrawIndexed(indices, 0, 0); 
```

这可能是什么原因？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:23:47.770

这段代码 -

```
world = XMMatrixTranspose(world);
view = XMMatrixTranspose(view);
projection = XMMatrixTranspose(projection); 
```

每次调用它时都会转置相同的矩阵，因此它们仅具有正确的值交替时间。每次在调用代码中都会重置世界矩阵，但视图和项目矩阵交替出现错误。

# matlab - 将指针移到对象上 (MATLAB)

> ID：13235056
> 
> 赞同：3
> 
> 时间：2012-11-05T15:19:55.540
> 
> 标签：matlab, 3d, transformation, projection

我在已知坐标 x、y、z 的 3-D 轴上有一个对象。我想移动对象上的指针。我知道有一个名为 moveptr 的未记录函数，但不幸的是它不支持 3-d 轴。我试图将 3-d 坐标投影到轴的 2d 坐标上，但感觉不对，结果证明是错误的，即它将指针移动到错误的位置。

```
mvpt= view * [x y z 1]'
mvpt=mvpt(1:2)
moveptr(handle(gca),'init')
moveptr(handle(gca),'move',mvpt(1),mvpt(2)) 
```

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T11:41:42.840

我认为您应该在具有 3D 对象投影的同一图中覆盖 2-D 轴。这不完全是你在这里做的，我不知道视图的单一输出是什么（我总是在我的 3D 作品中使用方位角和仰角......）

如何将 3D 结构投影到 2D 已在其他地方解释过：http: [//www.mathworks.com/matlabcentral/newsreader/view_thread/169417](http://www.mathworks.com/matlabcentral/newsreader/view_thread/169417)

然后您可以在新轴上使用 moveptr，然后擦除 2D 绘图和轴。它有点脏，但它应该这样做。

# c++ - Qt delete 适用于 Valgrind 但不能正常执行

> ID：13235062
> 
> 赞同：0
> 
> 时间：2012-11-05T15:20:13.913
> 
> 标签：c++, qt, valgrind, delete-operator

我正在使用 QtCreator 和 Valgrind 检查我的 Qt 程序中的内存泄漏。我正在我的析构函数中删除 QHash 中的一些条目，如下所示：

```
QHash<QString, QVariant*> m_Hash;

/**
 * @brief
 * Destruct a Foo Class instance
 */
Foo ::~Foo ()
{

    // Do Cleanup here

    // Delete hash leftovers
    foreach( QString key, m_Hash.keys() )
    {

        qDebug() << "Deleting an entry..";

        // Delete the hash item
        delete m_Hash.take(key);

    }

} 
```

如果我使用 Valgrind 进行调试，则此代码很好，并在调用析构函数时删除内容：

```
>> Deleting an entry.. 
>> Deleting an entry.. 
```

如果我在 QtCreator 中使用 GDB 启动，从 QtCreator 不使用 GDB 启动，或者只是从命令行运行我的 Qt 应用程序，我会收到分段错误！

```
Signal name : 
SIGSEGV
Signal meaning : 
Segmentation fault 
```

如果我推荐“删除”行，那么我可以使用任何方法很好地运行我的应用程序，但我确实会泄漏内存。

是什么赋予了？valgrind 是否会引入某种延迟以允许我的析构函数工作？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:59:06.453

海德的回答是正确的；但是，清除特定哈希的最简单方法如下：

```
#include <QtAlgorithms>

Foo::~Foo()
{
   qDeleteAll(m_Hash);
   m_Hash.clear();
} 
```

`QHash<QString*, QVariant>`请注意，如果哈希表的键是指针（例如），则上述技术将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:37:45.143

您不能修改使用 foreach 迭代的容器。请改用迭代器。使用方法的正确代码[`iterator QHash::erase ( iterator pos )`](http://doc.qt.digia.com/qt/qhash.html#erase)：

```
 QMap<QString, QVariant* >::iterator it = m_Hash.begin();
 // auto it = m_Hash.begin(); // in C++11
 while (it != m_Hash.end()) {
     delete it.value();
     it = m_Hash.erase(it);
 } 
```

此外，您存储 QVariant 指针而不是值的任何特殊原因？QVariant 通常适合作为值保存，因为您存储在 QVariant 中的大多数数据要么是隐式共享的，要么是很小的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:28:54.343

[文档](http://doc.qt.digia.com/qt/containers.html#the-foreach-keyword)没有明确提到它，但是你正在改变你正在迭代的容器是一个问题。

代码`foreach`在[这里](http://qt.gitorious.org/qt/qt/blobs/4.8/src/corelib/global/qglobal.h#line2371)。

查看代码，它和您的代码基本上与您编写的代码相同：

```
for (QHash::iterator it=m_Hash.begin(), end=m_Hash.end(); 
     it!=end;
     ++it)
{
    delete m_Hash.take(key);
} 
```

但是，[`take`](http://doc.qt.digia.com/qt/qhash.html#take)成员函数可能会触发现有迭代器 (`it`和`end`) 的失效，因此您的迭代器可能会变得悬空，从而产生未定义的行为。

*可能的解决方案： * 迭代时*不要修改你迭代的容器* 确保`it`在下一次迭代开始之前有效，并且不要存储`end`-iterator（此解决方案禁止使用`foreach`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:32:05.923

也许 foreach 关键字有问题。尝试更换：

```
foreach( QString key, m_Hash.keys() )
{
    qDebug() << "Deleting an entry..";
    delete m_Hash.take(key);  // take changes the m_Hash object
} 
```

和：

```
for (QHash<QString, QVariant*>::iterator it =  m_Hash.begin();
                                         it != m_Hash.end(); ++it)
{
    qDebug() << "Deleting an entry..";
    delete it.value();      // we delete only what it.value() points to, but the 
                            // m_Hash object remains intact.
}
m_Hash.clear(); 
```

这样，当您遍历它时，哈希表保持不变。foreach 宏可能会扩展为一个构造，您可以在其中“从脚下删除哈希表”。那就是宏可能会创建一个迭代器，它变得无效或“悬空”作为调用的副作用

```
m_Hash.take(key); 
```

# javascript - ASP.NET 脚本包含读取权限错误

> ID：13235063
> 
> 赞同：0
> 
> 时间：2012-11-05T15:20:17.427
> 
> 标签：javascript, asp.net-mvc-3, include

我有一个带有 Razor 页面（称为 Sample.cshtml）的 ASP.NET MVC 应用程序，它在 Head 部分包含一个 JS 脚本文件，如下所示：

```
<script src="https://www.example.net/Errors/utils.Version4.js" type="text/javascript"></script> 
```

（确切名称已更改以保护无辜者）。该应用程序位于共享主机站点上，并且通过该站点的控制面板，我在错误子目录上设置了 IIS 权限，以允许 SSL 的匿名访问并启用 SSL 的读取权限，而我已禁用允许匿名访问并启用读取权限。

问题是这样的：当我登录到我的应用程序并进行身份验证（使用表单身份验证）并且控制器加载 Sample.cshtml 时，无法读取 js 文件。如果我执行查看源代码并单击脚本标记中的链接，我会看到一些错误 HTML，表明我没有读取资源的权限，错误代码 403.2。但是，如果我在地址栏中输入 src URL，我可以很好地下载 JS 文件并在浏览器中查看文本。

如果我使用地址栏但在从我的页面脚本包含调用 src 时没有读取权限，为什么我会有读取权限？我进行了一些实验，如果我还检查了启用读取权限（以便为 SSL 和非加密 http 启用读取权限），问题就会消失。

我敢肯定，有一个合乎逻辑的答案，我只是不够老练，无法辨别，但我急于解决这个问题（并且急于学习），因此我们将不胜感激地收到任何信息。

谢谢。

# php - 在 ubuntu 和 dreamhost 主机上安装 PECL APC

> ID：13235069
> 
> 赞同：0
> 
> 时间：2012-11-05T15:20:54.267
> 
> 标签：php, jquery, ubuntu-10.04, apc

基本上我的目标是在我的网站上使用以下脚本

[php-上传进度条](http://www.johnboy.com/php-upload-progress-bar/)

我想首先在 ubuntu 10.04 上的本地服务器上设置它，我正在使用 xampp1.7.7，然后将其上传到我的网站上，该网站由使用 php5.2 的 dreamhost 网络托管托管

上述脚本的主要要求是要有[APC](http://pecl.php.net/package/APC)。

我的问题是我无法在两台服务器（我的本地和 Dreamhost 上）上设置 APC

我已经按照很多教程来安装它，但无法安装它

有人能给我一些关于使用 APC 并安装它以在脚本之上运行的想法吗？

我已经遵循以下教程和指南

[Dreamhost 维基](http://wiki.dreamhost.com/Pecl_APC)

[堆栈答案](https://stackoverflow.com/questions/4720666/sudo-pecl-install-apc-returns-error)

PS;我没有使用 apache2 服务。我的 php 路径是 /opt/lampp/htocs

请帮助我，我陷入了困境，而且我正在使用该上传脚本，因为我不能根据客户要求使用 flash、html5 或 php5.3，所以我需要一个使用 APC 上传进度条的解决方案，以便它可以运行浏览器和php5.2

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:05:01.053

请随时联系 DreamHost 支持以获得更多即时帮助。至于 APC 扩展，正如您提到的，我们的 php 5.2 或 php 5.3 选项未启用它。执行此操作的最简单方法可能是为 php 5.3 编译 apc 模块，然后在您的用户下为其设置自定义 phprc 文件。该 wiki 详细介绍了该过程：

[http://wiki.dreamhost.com/PHP.ini#Compiling_PHP_5.3_extensions](http://wiki.dreamhost.com/PHP.ini#Compiling_PHP_5.3_extensions)

- 我现在测试了安装，步骤是：

从 PECL 下载 APC 包：http: [//pecl.php.net/package/APC](http://pecl.php.net/package/APC)

解压，进入目录，运行phpize，然后运行：

```
./configure --with-php-config=/usr/local/php53/bin/php-config
then make
mkdir -p ~/.php/5.3
cp modules/apc.so ~/.php/5.3
then edit the file ~/.php/5.3 and put into it:
extension=/home/USER/.php/5.3/apc.so 
```

（将 USER 替换为您的真实 ssh 用户名）

保存它，你应该很高兴。

如果您有任何其他问题，请随时给我们写信。

# iphone - 没有推送通知的系统范围警报

> ID：13235070
> 
> 赞同：1
> 
> 时间：2012-11-05T15:20:58.863
> 
> 标签：iphone, objective-c, ios, ios5, cocos2d-iphone

是否可以在不使用推送通知的情况下在 iOS 中创建通知或警报？

例如，在给定时间，比如晚上 8:00，我想在用户的锁定屏幕上创建一个通知（如推送通知）。

或者，在另一种情况下，我想创建一个警报，如果用户在晚上 8:00 使用他们的设备，它就会出现在他们面前！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:33:55.713

根据您的问题，我认为您想使用本地通知而不是推送通知。“推送”通知是从服务器推送的，需要您端的服务器或使用 Urban Airship 等服务。“本地”通知可以完全在设备上完成，无需涉及任何其他服务。

[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

# flash - Flash 5 / as2 文本忽略 Chrome 上的 alpha - 适用于其他地方

> ID：13235077
> 
> 赞同：0
> 
> 时间：2012-11-05T15:21:20.423
> 
> 标签：flash, actionscript-2

我有一个非常古老的网站，它使用 Flash 5 界面来浏览待售二手车。

过去 6 年它一直运行良好，但在 PC 上的 Chrome 上突然出现问题。

[http://www.gwsmotors.co.uk/showroom/](http://www.gwsmotors.co.uk/showroom/)

描述性文字应该只出现在翻转时。它在 Internet Explorer、Firefox 和 Safari (PC) 上为我正确执行此操作，但在 Chrome 22.0.1229.94 m 上不正确。已在 Windows XP 和 Window 7 上测试，在 Mac 上未经测试。

我目前无法找到原始的 .fla 文件，也没有 Flash 5，所以我希望无需触摸 .swf 即可修复！

有没有人经历过这种情况+有人有任何修复吗？

非常感谢

# javascript - Javascript 函数在 Safari 5.1.7 中无法正常工作

> ID：13235083
> 
> 赞同：0
> 
> 时间：2012-11-05T15:21:44.893
> 
> 标签：javascript, asp.net, safari

在加载 Access.aspx 时，会调用一个 javascript 函数。

```
<head>
<title>access</title>
<meta content="Microsoft Visual Studio .NET 7.1" name="GENERATOR">
<meta content="Visual Basic .NET 7.1" name="CODE_LANGUAGE">
<meta content="JavaScript" name="vs_defaultClientScript">
<meta content="http://schemas.microsoft.com/intellisense/ie5" name="vs_targetSchema">
<link href="rtsBanner.css" type="text/css" rel="stylesheet">

<script language="JavaScript" type="text/javascript" src="winopen.js"> </script>

<script type="text/javascript" language="javascript">
    function openLogin(site, pass) {
        var loginUrl = 'login.aspx';
        if (site != '' && pass != '') {
            loginUrl += '?SITE=' + site + '&PASS=' + pass;
        }
        else if (site != '') {
            loginUrl += '?SITE=' + site;
        }
        var popUpFeatures = 'dialogHeight: 385px; dialogWidth: 600px; edge: Raised; center: Yes; help: No; resizable: No; scroll: Yes; status: No;';
        var RetVal = window.showModalDialog(loginUrl, 'null', popUpFeatures);
        if (typeof (RetVal) == 'undefined') {
            top.window.close();
        }
        else {
            var RetArray = RetVal.split(',')
            var ValidLogon = RetArray[0];
            var MUName = RetArray[1];
            if (ValidLogon == 1) {
                document.location.href = 'newRequest.aspx?desc=' + MUName;
            }
            else {
                top.window.close();
            }
        } // else(typeof(RetVal)
    }
</script>

</head>
<body ms_positioning="GridLayout" onload="openLogin('<%=Request("SITE")%>','<%=Request("PASS")%>');">
<form id="Form1" method="post" runat="server">
&nbsp;
</form>
</body>
</html> 
```

此代码在 IE 中完美运行，但在我输入站点名称和密码并点击登录按钮后，在登录屏幕上的 safari 中，它不会将我重定向到 newRequest.aspx 页面，而只是关闭登录弹出窗口并显示一个空白的 access.aspx 页面.

编辑：

这是 btnLogin_Click 上 Login.aspx.vb 页面上的代码

```
If txtSiteName.Text = "" And txtPassPhrase.Text = "" Then Return
        If ValidateSiteAndPass(txtSiteName.Text, txtPassPhrase.Text) = False Then
            Throw New Exception("OOPS!!! Either SiteName or Pass Phrase is Invalid, please check")
        Else
            Session("valid") = "true"
            Response.Write("<script language='javascript'>{window.returnValue='1," + txtSiteName.Text + "'; self.close();}</script>") '''document.Form1.submit();")
            Response.End()
        End If 
```

请建议

谢谢，卡维塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:21:11.623

我在这里找到了解决方案。

[http://forums.asp.net/t/1400811.aspx/1](http://forums.asp.net/t/1400811.aspx/1)

问题是由于window.showModalDialog。它在 Safari 中无法正常工作。我将其替换为 window.open

谢谢，卡维塔

# php - 创建wordpress表，我哪里出错了？

> ID：13235084
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:21:52.840
> 
> 标签：php, database, wordpress

```
 global $wpdb;
        $table_name = $wpdb->prefix . "product_order";   

        $sql = "CREATE TABLE $table_name (
            id mediumint(9) NOT NULL AUTO_INCREMENT,
            range VARCHAR(255),
            category VARCHAR(255),
            order mediumint(9),
            relation mediumint(9),
            UNIQUE KEY id (id)
        );";

        $wpdb->query($sql); 
```

这似乎没有创建一个表......有什么原因吗？我也试过dbdelta。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:16:19.757

为了得到答案，将反引号中的列名括起来，`range`并且`order`是 MySQL 中的保留字：

```
$sql = "CREATE TABLE $table_name (
        `id` mediumint(9) NOT NULL AUTO_INCREMENT,
        `range` VARCHAR(255),
        `category` VARCHAR(255),
        `order` mediumint(9),
        `relation` mediumint(9),
        UNIQUE KEY id (id)
    );"; 
```

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

附带说明一下，如果您想确保在此架构与其他 wordpress 实例共享或成为多站点时不会与其他表发生冲突，请考虑使用`{$wpdb->prefix}$table_name`而不是仅`$table_name`使用`wp-config.php`.

# c# - 有许多错误的 C# 应用程序

> ID：13235089
> 
> 赞同：0
> 
> 时间：2012-11-05T15:22:06.983
> 
> 标签：c#

在我正在编写的 C# 应用程序中遇到的几个错误让我很开心。我不断收到的错误是：

*   加密和解密调用必须有返回类型
*   Console.WriteLine 被用作方法
*   static void encrypt(string[] args) 预期的类、委托、接口或结构

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string pw ="", hash =""; //Declare an intialise variables

            if (args.Length < 4) // Test to see if correct number of arguments have been passed
            {
                Console.WriteLine("Please use command line arguments in this format: encrypt -e (or -d) password-to-encrypt-with input-file output-file");
                Environment.Exit(0);
            }

            if (args[1].Length < 10 || args[1].Length > 40) // Test to see if the password is between 10 and 40 characters
            {
                Console.WriteLine("Please use a password between 10 and 40 characters");
                Environment.Exit(0);
            }

            switch (args[0]) //Uses first argument value to drive switch statement (-e or -d)
            {
                case "-e":
                encrypt(string[] args);
                break;

                case "-d":
                decrypt(string[] args);
                break;

                default:
                Console.WriteLine("When using the program please use -e to encrypt and -d to decrypt");
                break;
            }        
        } //End of MAIN

        static void encrypt(string[] args)  //Function to encrypt
        {
            string inputtext =""; //Initialise Varible (Ensure it is empty)
            inputtext=System.IO.File.ReadAllText(args[2]); //Read file in an assign to input text
            return;
        }

        static void decrypt(string[] args)  //Function to decrypt
        {
            string inputtext =""; //Initialise Varible (Ensure it is empty)
            inputtext=System.IO.File.ReadAllText(args[2]); //Read file in an assign to input text
            return;
        }
    }  
} 
```

任何帮助将非常感激！阿利斯泰尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-05T15:25:03.280

调用方法时，不得指定参数的类型。所以：

```
 case "-e":
        encrypt(args);
        break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:44:34.160

除了 Hans 所说的，您还提到了有关方法中返回类型的错误。

您的`encrypt`和`decrypt`方法有`return`语句，但它们是`void`方法，意味着它们没有任何返回类型。

要么给它一个你想要返回的类型（大概是你正在操作的字符串），要么完全删除该`return`语句。您不需要显式地放在`return`方法的末尾以使其退出该方法。无论如何它都会这样做。

两个小的专业提示，我会在不同的行上声明你的字段，而不是全部捆绑在一起（以你声明的方式`pw`和`hash`），并且还添加一个 using 指令`System.IO`，所以你不必调用`System.IO.File.ReadAllText`，你可以调用`File.ReadAllText`。

# unicode - 使用 Lua 提取 UTF-8 字符串的第一个字母

> ID：13235091
> 
> 赞同：8
> 
> 时间：2012-11-05T15:22:08.683
> 
> 标签：unicode, utf-8, lua

有没有办法用 Lua 提取 UTF-8 编码字符串的第一个字母？

Lua 没有正确支持 Unicode，所以`string.sub("ÆØÅ", 2, 2)`会返回`"?"`而不是`"Ø"`.

是否有一个相对简单的 UTF-8 解析算法我可以在每个字节的字符串上使用，其唯一目的是获取字符串的第一个字母，无论是汉字还是 A？

还是这种方式太复杂了，需要一个庞大的库等？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T18:39:04.840

您可以使用以下代码轻松地从 UTF-8 编码字符串中提取第一个字母：

```
function firstLetter(str)
  return str:match("[%z\1-\127\194-\244][\128-\191]*")
end 
```

因为 UTF-8 代码点要么以 0 到 127 的字节开头，要么以 194 到 244 的字节后跟 128 到 191 的一个或多个字节。

您甚至可以以类似的方式*迭代UTF-8 代码点：*

```
for code in str:gmatch("[%z\1-\127\194-\244][\128-\191]*") do
  print(code)
end 
```

请注意，这两个示例都为每个字母返回一个*字符串*值，而不是 Unicode 代码点数值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-14T11:12:53.190

Lua 5.3 提供了一个[UTF-8 库](http://www.lua.org/manual/5.3/manual.html#6.5)。

您可以使用`utf8.codes`来获取每个代码点，然后使用`utf8.char`来获取字符：

```
local str = "ÆØÅ"
for _, c in utf8.codes(str) do
  print(utf8.char(c))
end 
```

* * *

这也有效：

```
local str = "ÆØÅ"
for w in str:gmatch(utf8.charpattern ) do
  print(w)
end 
```

where`utf8.charpattern`只是`"[\0-\x7F\xC2-\xF4][\x80-\xBF]*"`模式匹配一​​个 UTF-8 字节序列的字符串。

# java - Hibernate Envers 不创建修订

> ID：13235093
> 
> 赞同：2
> 
> 时间：2012-11-05T15:22:20.017
> 
> 标签：java, database, hibernate, revision, hibernate-envers

我对休眠环境有疑问。我添加了事件监听器并添加了@Audited 注释，但是当我更改名称（或其他任何内容）时，创建的数据库中没有任何修订。我希望你能帮助我。

这是我建立会话等的主类。

```
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.service.ServiceRegistry;
import org.hibernate.service.ServiceRegistryBuilder;

public class Main {

    public static void main(String[] args) {
        new Main();
    }

    public Main() {

        Configuration configuration = new Configuration().configure();
        ServiceRegistryBuilder registry = new ServiceRegistryBuilder();
        registry.applySettings(configuration.getProperties());
        ServiceRegistry serviceRegistry = registry.buildServiceRegistry();
        SessionFactory sessionFactory = configuration
                .buildSessionFactory(serviceRegistry);
        Session session = sessionFactory.openSession();

        Address address1 = new Address();
        address1.setStreetName("Privet Drive");
        address1.setHouseNumber(4);
        Person person1 = new Person();

        person1.setName("Hi");
        person1.setSurname("test");
        person1.setAddress(address1);

        session.beginTransaction();
        session.persist(person1);
        session.persist(address1);
        session.getTransaction().commit();

        person1.setName("Hans");

        session.beginTransaction();
        session.persist(person1);
        session.persist(address1);
        session.getTransaction().commit();

        session.close();

    }

} 
```

这里是 Person 类：

```
package Main;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.ManyToOne;
import javax.persistence.Table;

import org.hibernate.envers.Audited;
import org.hibernate.envers.RevisionEntity;
import org.hibernate.envers.RevisionNumber;
import org.hibernate.envers.RevisionTimestamp;

@Entity
@Table(name="PERSON")
@Audited
public class Person{
    @Id
    @GeneratedValue
    @RevisionNumber
    private int id;

    private String name;

    private String surname;

    private String username;

    @ManyToOne
    private Address address;

    public int getId() {
        return id;
    }

    public String getName() {
        return name;
    }

    public String getSurname() {
        return surname;
    }

    public Address getAddress() {
        return address;
    }

    public void setId(int id) {
        this.id = id;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setSurname(String surname) {
        this.surname = surname;
    }

    public void setAddress(Address address) {
        this.address = address;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

} 
```

地址：

```
package Main;

import java.util.Set;

import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import org.hibernate.envers.Audited;

@Entity
@Table(name="ADDRESS")
@Audited
public class Address {
    @Id
    @GeneratedValue
    private int id;

    private String streetName;

    private Integer houseNumber;

    private Integer flatNumber;

    @OneToMany(mappedBy = "address")
    private Set<Person> persons;

    public int getId() {
        return id;
    }

    public String getStreetName() {
        return streetName;
    }

    public Integer getHouseNumber() {
        return houseNumber;
    }

    public Integer getFlatNumber() {
        return flatNumber;
    }

    public Set<Person> getPersons() {
        return persons;
    }

    public void setId(int id) {
        this.id = id;
    }

    public void setStreetName(String streetName) {
        this.streetName = streetName;
    }

    public void setHouseNumber(Integer houseNumber) {
        this.houseNumber = houseNumber;
    }

    public void setFlatNumber(Integer flatNumber) {
        this.flatNumber = flatNumber;
    }

    public void setPersons(Set<Person> persons) {
        this.persons = persons;
    }

} 
```

还有我的 hibernate.cfg.xml：

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">

<hibernate-configuration>
    <session-factory>

        <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">
            jdbc:mysql://localhost:3306/hwdb2</property>
        <property name="hibernate.connection.username">root</property>
        <property name="hibernate.connection.password"></property>
        <property name="show_sql">true</property>
        <property name="format_sql">true</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="hbm2ddl.auto">create</property>

        <property name="hibernate.ejb.event.post-insert">org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener</property>
        <property name="hibernate.ejb.event.post-update">org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.AuditEventListener</property>
        <property name="hibernate.ejb.event.post-delete">org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener</property>
        <property name="hibernate.ejb.event.pre-collection-update">org.hibernate.envers.event.AuditEventListener</property>
        <property name="hibernate.ejb.event.pre-collection-remove">org.hibernate.envers.event.AuditEventListener</property>
        <property name="hibernate.ejb.event.post-collection-recreate">org.hibernate.envers.event.AuditEventListener</property>

        <!-- Mapping files -->
        <mapping class="Main.Person" />
        <mapping class="Main.Address" />
        <mapping class="Main.ExampleListener" />
    </session-factory>
</hibernate-configuration> 
```

我希望你有我的解决方案。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:41:17.267

我终于更新到Hibernate 4.1.8，问题解决了。我有错误的 envers 版本，它似乎与我使用的休眠版本不兼容。

# mysql - 索引mysql查询

> ID：13235094
> 
> 赞同：1
> 
> 时间：2012-11-05T15:22:23.720
> 
> 标签：mysql, indexing

我在 mysql 中有这个查询，我想被索引，最好的索引组合是什么？

```
SELECT cometchat.id, cometchat.from, cometchat.to, cometchat.message, cometchat.sent, cometchat.read, cometchat.direction
FROM cometchat
WHERE (
(
cometchat.to =  '30411'
AND cometchat.direction <>2
)
OR (
cometchat.from =  '30411'
AND cometchat.direction <>1
)
) 
```

我已经尝试过这些索引，但它们没有用：

```
ALTER TABLE  `cometchat` ADD INDEX (  `from`,`to`,`direction`)
ALTER TABLE  `cometchat` ADD INDEX (  `from`,`to`)
ALTER TABLE  `cometchat` ADD INDEX (  `to`,`direction`)
ALTER TABLE  `cometchat` ADD INDEX (  `from`,`direction`) 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:26:56.033

由于`OR`在 where 子句中，您需要 2 个单独的索引来优化选择：

```
ALTER TABLE  `cometchat` ADD INDEX index1 (  `to`,`direction`)
ALTER TABLE  `cometchat` ADD INDEX index2 (  `from`,`direction`) 
```

我不会费心尝试制作这些覆盖索引——只需消耗点查找的成本。但是，如果您希望它们覆盖您需要：

```
 ALTER TABLE  `cometchat` ADD INDEX index1 
          ( `to`,`direction`, `message`, `sent`, `read` );
   ALTER TABLE  `cometchat` ADD INDEX index2 
          (  `from`,`direction`,`message`, `sent`, `read`); 
```

覆盖索引将提供最佳的选择性能，但它需要大量额外的存储空间并且会增加插入开销——所以我只会在非覆盖索引的性能不足并且这是一个插入光表时才使用它们。

另外，只是一些一般性建议，在命名数据库、表或列时，我会避免使用 MySQL 保留字，例如“from”。[https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](https://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)
当您使用保留作为名称时，您确实要求遇到错误查询，这将导致另一个 SP问题 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:26:13.330

尝试仅使用以下内容：

```
ALTER TABLE  `cometchat` ADD INDEX (`direction`) 
```

# html - 居中的表格和边距不起作用？

> ID：13235095
> 
> 赞同：0
> 
> 时间：2012-11-05T15:22:28.773
> 
> 标签：html, css, centering

我注意到我写的这个论坛在大多数浏览器中都很好，尽管在 IE8 中它位于左侧而不是居中。

它的 CSS 是`margin: auto auto`，适用于大多数浏览器。

我不想采用老式的方法并将 align="center" 放在实际的表属性中。

谁能解释一下？

[http://forum.bestlincs.co.uk/](http://forum.bestlincs.co.uk/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:25:30.397

你有（或者更确切地说，当我开始写这个答案时，你*有*）没有 Doctype，所以 IE 假设该站点使用的是 IE 5 时代的布局技术并部分模拟了该浏览器。

添加 Doctype 以触发标准模式。

HTML 5 Doctype 看起来最适合您的站点：

```
<!DOCTYPE HTML> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:31:49.747

要解决居中问题，您需要指定一个文档类型，如下所示：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

要解决您的间距问题，您需要查看盒子模型。如果没有 doctype，您的网站使用的是旧盒子模型，即：

```
width = width + border + padding

and

height = height + border + padding 
```

您现在需要像这样修改：

```
width = width - (border + padding)
height = height - (border + padding) 
```

希望这是有道理的。您应该使用上面的内容来调整页面上任何元素的宽度/高度，例如 DIVs TDs 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:32:20.083

尝试为表格提供以下样式：

```
table{
   position:relative;
   left:-50%;
   margin-left:450px;
} 
```

那是中心吗？

# asp.net-mvc - MVC 验证：服务层或数据注释

> ID：13235096
> 
> 赞同：3
> 
> 时间：2012-11-05T15:22:29.710
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我希望这不是非常主观的，但是在验证业务逻辑时，我看到了两条路径，除非我弄错了，否则它们会提供几乎相同的结果：

*   使用对模型执行所有验证的服务层（参考：[http ://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer- )](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validating-with-a-service-layer-cs) _

*   用数据注释装饰你的模型

在第一种情况下，模型是数据的哑容器，在第二种情况下，模型知道其有效状态。除此之外，我错过的两者之间是否存在细微差别？在某些情况下是否应该使用其中一种？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:47:14.997

[在我看来，您可以使用 Data Annotations 或Fluent Validation](http://fluentvalidation.codeplex.com/)在您的模型（InputModel）上保留基本验证（必填字段、正则表达式字段、比较字段等），并在服务层中进行业务验证。我认为注释更多的是创建屏幕验证和服务器端的输入，而不是业务验证。如果您将业务保留在服务层，您必须记住创建一个`ModelState`Wrapper 以将其与 Asp.Net MVC 集成，并将其显示在视图上。

看一下 ModelState Wrapper 的同一个：

```
public class ModelStateWrapper : IValidationDictionary
{
   private ModelStateDictionary _modelState;
   public ModelStateWrapper(ModelStateDictionary modelState)
   {
      _modelState = modelState;
   }

   #region IValidationDictionary Members

   public void AddError(string key, string errorMessage)
   {
      _modelState.AddModelError(key, errorMessage);
   }

   public bool IsValid
   {
      get { return _modelState.IsValid; }
   }

   #endregion
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:53:11.640

它们不是相互排斥的，您可以将属性用于“静态”规则，并将服务层验证用于“动态”规则（例如检查唯一性）。

引用您提到的教程：

> 在本教程中，您将学习如何将验证逻辑从控制器中移出并移到单独的服务层中。

好吧，用数据注释属性修饰的模型不必在控制器旁边的 Web 项目中，它可以在服务旁边的服务层中，这意味着所有验证逻辑都在一个地方。

# emacs - 打开新的缓冲帧而不是切换当前的

> ID：13235097
> 
> 赞同：2
> 
> 时间：2012-11-05T15:22:33.250
> 
> 标签：emacs, coffeescript

我目前正在使用[Emacs 咖啡模式](https://github.com/defunkt/coffee-mode)。

当我调用该`coffee-compile-region`方法时（请参阅[此处的源代码](https://github.com/defunkt/coffee-mode/blob/master/coffee-mode.el#L279-294)），已编译的缓冲区显示在当前缓冲区上。

我想在一个新框架中看到它（就像*标准* `*Compilation*`缓冲区工作一样），而不是隐藏当前。

我想问题来自这一行：

```
(switch-to-buffer (get-buffer coffee-compiled-buffer-name)) 
```

但我想在不编辑源代码的情况下做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:21:36.033

如果这真的是一件私人的事情，那么你可以使用 defadvice 和 flet 来做你想做的事。但在这种情况下，您想要的应该是默认值。因此，您应该分叉它进行更改并提交带有解释的拉取请求。

`switch-to-buffer`应该是`pop-to-buffer`。

# sql - 主键和唯一索引——SQL Developer生成的sql脚本

> ID：13235099
> 
> 赞同：8
> 
> 时间：2012-11-05T15:22:42.613
> 
> 标签：sql, oracle, oracle11g

当 SQL Developer 导出 sql 脚本时，有多个选项可用，但无论哪种方式都必须生成一个`UNIQUE INDEX`像这样的主键

```
CREATE UNIQUE INDEX "SYS_C0018099" ON "TRANSACTION" ("ID") 
```

并添加`PRIMARY KEY`到同一个表和同一列

```
ALTER TABLE "TRANSACTION" ADD PRIMARY KEY ("ID") 
```

所以问题是：它看起来像是一种冗余吗？我认为在列上创建主键默认情况下也应该在该列上创建唯一索引？那么为什么第一个命令是必要的呢？

而这可能会导致数据冗余？

我在 Oracle 11g 上，所以请分享关于为什么它应该像上面那样的任何想法。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:34:58.153

没有冗余 - 或者只有一点点:)

第二个命令将使用可用的索引（如果存在）。否则（如果第一个 DDL 不存在）将创建一个索引。

当您为索引指定了正确的名称并希望保留它时，拆分为两个命令很有用。

**更新**：Thomas Haratyk 指出的链接是必读的，我真的很喜欢：http: [//viralpatel.net/blogs/understanding-primary-keypk-constraint-in-oracle/](http://viralpatel.net/blogs/understanding-primary-keypk-constraint-in-oracle/)

**UPDATE2**：a_horse_with_no_name 是正确的，它可以在一个单一的语句中完成，如：

```
alter table TRANSACTION
add CONSTRAINT pk_test PRIMARY KEY (id); 
```

因此，它将保留名称（不会创建 sysblalbla 对象名称），如果您使用“USING INDEX”关键字，您可以指定索引属性，例如存储属性。

但是同样，这两个语句不会有任何问题，只是创建了一个索引。

可能 SQL Developer 更喜欢为每个对象获取一个 ddl，并且在某些情况下它可能会更好。

# linux - R中的空图

> ID：13235100
> 
> 赞同：7
> 
> 时间：2012-11-05T15:22:43.830
> 
> 标签：linux, r

我重新安装了 ARCH linux 和 R 版本 2.15.1。但是在使用 plot 命令绘制任何东西之后，绘图窗口总是空的（没有显示）。可能是驱动程序或其他问题。我尝试了 graphics.off() 功能，但无济于事。

问题已编辑：

然而，在调整绘图窗口大小后，绘图是可见的。

```
x<-c(1, 2, 3, 4, 5)
y<-c(0.1, 0.3, 0.7, 1.11, 1.3) 
plot(x, y) 

> sessionInfo() 
R version 2.15.1 (2012-06-22) 
Platform: x86_64-unknown-linux-gnu (64-bit) 
locale: 
[1] C 

attached base packages: 
[1] stats graphics grDevices utils datasets methods base 
```

问题已编辑：

设置 X11.options(type="nbcairo") 工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:23:47.523

有时您需要执行初始化`plot.new()`或`dev.new()`初始化图形设备。这应该发生在 plot.default() 上，这是在你给出`plot`两个向量时会调用的函数。

有些选项会影响图形设备调用。用于`names(options())`查看选项列表名称的向量。我的系统已设置好，因此 options()$device 正确设置了石英设备的默认值。这是在加载 grDevices 包时定义的选项。看：

```
?options   # in the grDevices section. 
```

使用 ARCH-Linux 意味着你正在走一条“少有人走的路”。有更多经验丰富的 Debian（以及 Debian 衍生变体，如 Ubuntu）和 RH Linuxen 安装用户。我确实从使用 ARCH Linux 的人那里找到了两篇关于 r-devel 的帖子，所以这并不意味着广泛的知识。您最好发布到 r-devel 邮件列表，因为您的行为表明存在交互式图形驱动程序功能，但只是初始“绘制”功能中的一个小故障。

# arrays - 将数组中的数据保存在变量中

> ID：13235104
> 
> 赞同：0
> 
> 时间：2012-11-05T15:22:55.430
> 
> 标签：arrays, codeigniter

**解决了！**

我正在尝试将数组中的数据保存在变量中。我在控制器中有：

```
$data = array('upload_data' => $this->upload->data()); 
```

我知道这个数组中有关于上传文件的数据。具有此日期的一个是`"file_name"`，我想将此值保存在控制器中的变量中。我尝试：

```
$image_name= $data['file_name']; 
```

但这不起作用。我使用 CodeIginter 2.1.3 框架。

**好的解决方案是： $data['upload_data']['file_name'];** 感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:50:54.367

```
$data = $this->upload->data(); 
```

然后 $data['file_name'] 将起作用。你这样做的方式是将一个数组埋在另一个数组中。很确定你可以用以下方式调用它，但它仍然没有意义

```
$data['upload_data']['file_name'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:32:10.760

您使用的是哪个版本的 CodeIgniter？

使用 2.1.3 它应该可以工作 - 查看文档的最后几段： http: [//codeigniter.com/user_guide/libraries/file_uploading.html](http://codeigniter.com/user_guide/libraries/file_uploading.html)

如果上传成功，$data['file_name'] 将为您提供上传文件的文件名。要获取全名/路径，请使用数组中的其他字段。

# objective-c - 如何将 ABPeoplePickerNavigationController 设置为 MainView？

> ID：13235107
> 
> 赞同：3
> 
> 时间：2012-11-05T15:23:16.227
> 
> 标签：objective-c, ios, xcode, abpeoplepickerview

是否可以像苹果通讯录应用一样显示整个联系人列表？
有没有我可以使用的苹果用户界面？
或者我是否需要使用 ABAddressBook 复制完整的联系人并构建我自己的 ListView？

我知道有[ABPeoplePickerNavigationController](https://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html)和[ABPeoplePickerNavigationControllerDelegate](https://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABPeoplePickerNavigationControllerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/ABPeoplePickerNavigationControllerDelegate)

我已经通过以下代码使用了 Picker：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self addContact];
}

-(void)addContact {
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
    [self presentModalViewController:picker animated:NO];
}
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person {
    return YES;
} 
```

但实际上我不想打开 Picker。我需要将其设置为主视图，没有取消按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T14:51:24.380

你不能只使用它的一部分（嗯..从技术上讲你可以，但我不认为苹果会喜欢它：D）

你必须复制它，我害怕

# javascript - jqGrid过滤器表示对象

> ID：13235108
> 
> 赞同：0
> 
> 时间：2012-11-05T15:23:28.197
> 
> 标签：javascript, jquery, jqgrid

有没有办法从 jqGrid 中获取一个对象，该对象表示应用于当前结果集的过滤器参数？如果是，有没有办法稍后将此对象应用于网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:33:23.590

我通常阅读`postData`网格的参数`grid.getGridParam('postData');`

它有一个名为的字符串属性`filters`，其中包含网格的当前过滤器（它是一个 json 文本）。

您可以修改它，然后使用`grid.setGridParam('postData', postData);`

# wpf - 如何将自定义数据与 CollectionViewGroup 关联？

> ID：13235112
> 
> 赞同：6
> 
> 时间：2012-11-05T15:23:41.257
> 
> 标签：wpf, collectionviewsource, icollectionview

我在 XAML 中有一个 ItemsControl，我在其中为每个组显示一个扩展器，以便我可以展开/折叠该组。我想保留`IsExpanded`属性的状态（以及可能与组标题显示相关的其他设置）。通常你只有一个带有属性的类并绑定到它。但是，该组的数据上下文是`CollectionViewGroup`. 现在这个类不是很有帮助，因为它只为您提供 Name 属性和组中的项目（如果您只想要一个标题并且可能根据组中的项目数或它们的项目数显示某种指标，这很好内容，但如果您只想存储有关组头 UI 状态的自定义数据，则不需要）。我想做的是从这个类派生并将其他属性添加到我的派生类并绑定到它。但似乎没有任何简单的方法可以做到这一点。组生成的所有细节似乎都隐藏在内部类中，这非常令人沮丧。有没有人走上实现`ICollectionView`自己的路线（因此可能还有所有其他相关的类）？复制所有内容似乎是一项艰巨的工作`ListCollectionView`只是为了能够创建一个自定义`CollectionViewGroup`类并绑定到它！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:19:02.063

一种方法是使用 a`MultiBinding`来查找或计算自定义数据和绑定时间。

我做了一个`DataGrid`与组，在标题中显示组中项目特定值的总和，以便在组项目更改时更新此总和我使用自定义多值转换器进行了多值绑定，具有`ItemCount`属性的多值绑定允许在何时收到通知组项目发生变化，然后更新总和并显示 newsum 值。

这是多值转换器类的代码：

```
Public Class UserBalanceConverter
Implements IMultiValueConverter

Private Function GetSubTotal(ByVal obj As CollectionViewGroup) As String

    Dim total As Decimal
    For Each objItem As Object In obj.Items
        If TypeOf objItem Is Account Then
            Dim a As Account = DirectCast(objItem, Account)
            Dim rate As Decimal = 1
            rate = 1 / ExchangeRatesInfo.GetExchangeRate(a.currencyCode.ToString)

            total += a.Balance * rate
        Else
            total += GetSubTotal(objItem)
        End If
    Next

    Return total.ToString("C")
End Function

Public Function Convert(ByVal value() As Object,
                        ByVal targetType As System.Type,
                        ByVal parameter As Object,
                        ByVal culture As System.Globalization.CultureInfo) _
         As Object Implements System.Windows.Data.IMultiValueConverter.Convert

    Dim cvg As CollectionViewGroup = CType(value(1), CollectionViewGroup)

    Return GetSubTotal(cvg)

End Function

Public Function ConvertBack(ByVal value As Object,
                            ByVal targetType() As System.Type,
                            ByVal parameter As Object,
                            ByVal culture As System.Globalization.CultureInfo) _
        As Object() Implements System.Windows.Data.IMultiValueConverter.ConvertBack

    Throw New NotImplementedException

End Function

End Class 
```

然后在 XAML 中，您使用用于 GroupItem 的样式的多值转换器：

```
 <Style TargetType ="{x:Type GroupItem}" x:Key="UserGroupHeaderStyle">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type GroupItem}">
                        <Expander x:Name="exp" IsExpanded="False">
                            <Expander.Header>
                                <StackPanel >
                                    <TextBlock Text="{Binding Name}" />
                                    <StackPanel Orientation="Horizontal" >
                                        <TextBlock Text="{Binding ItemCount}">
                                        <TextBlock Text=" "/>
                                        <TextBlock Text="items" />
                                        <TextBlock Text=" "/>
                                        <TextBlock Text="Balance: " />
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding Converter="{StaticResource UserBalanceConverter}">
                                                    <Binding Path="ItemCount"/>
                                                    <Binding />
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </Expander.Header>
                            <ItemsPresenter />
                        </Expander>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style> 
```

完成将样式应用于您的 DataGrid ：

```
<DataGrid.GroupStyle>
     <GroupStyle ContainerStyle="{StaticResource UserGroupHeaderStyle}">
             <GroupStyle.Panel>
                   <ItemsPanelTemplate>
                           <DataGridRowsPresenter/>
                   </ItemsPanelTemplate>
             </GroupStyle.Panel>
     </GroupStyle>
 </DataGrid.GroupStyle> 
```

另外不要忘记在 XAML 的资源部分声明您的转换类：

```
 <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
             <local:UserBalanceConverter x:Key="UserBalanceConverter"/>
        </ResourceDictionary.MergedDictionaries>
  </ResourceDictionary> 
```

瞧！它就像一个魅力！

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T07:13:09.910

一种简单的方法是将 CollectionViewGroup 包装到另一个 ViewModel 类中，该类提供其他所需的显示属性，如 IsExpanded。我学到的一个教训是不要弯曲 xaml / 视图以匹配业务数据。而是弯曲/包装或转换业务数据以匹配 UI 的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T21:18:05.800

我能够使用一种与 Cédric 的建议有点相似的方法来解决**这个问题**（即绑定到），但以一种看似更 MVVM 的方式：`IsExpanded`

```
<ControlTemplate TargetType="GroupItem">
    <TreeViewItem IsExpanded="{Binding Items[0].IsGroupExpanded, Mode=TwoWay}">
        <TreeViewItem.Header>
            <TextBlock Text="{Binding Name}" />
        </TreeViewItem.Header>
        <TreeViewItem.Items>
            <ItemsPresenter />
        </TreeViewItem.Items>
    </TreeViewItem>
</ControlTemplate> 
```

`ItemViewModel.IsGroupExpanded`setter 和 getter都重定向到`Group.IsExpanded`.

注意`Mode=TwoWay`必须指定，因为默认情况下`IsExpanded`似乎是绑定的。`OneWay`

# xml - Restlet 动态序列化为 Json 或 XML

> ID：13235114
> 
> 赞同：1
> 
> 时间：2012-11-05T15:23:59.143
> 
> 标签：xml, json, serialization, jaxb, restlet

在使用 Restlet 框架开发 RESTful Web 服务时，我想以最紧凑的方式序列化为 JSON 和 XML。

如何以尽可能最有效的方式根据请求动态决定是否在答案中包含元素？我的代码看起来像这样：

```
protected Representation get(bool headerIncluded,Variant variant){

      MyObject myObject = MyDao.getObject()
      MySerializer<MyObject> mySerializer = headerIncluded ? new MySerializerWithHeader() : new MySerializerWithoutHeader();
      return mySerializer.serializeToRightType(myObject,variant)

} 
```

我非常热衷于使用JaxB，是否可以实现这样的模式？

# ruby-on-rails-3 - 分页和 Google 图书 API

> ID：13235115
> 
> 赞同：0
> 
> 时间：2012-11-05T15:24:05.887
> 
> 标签：ruby-on-rails-3, will-paginate, google-books

我正在开发一个使用 Google Books API 的 Ruby on Rails 项目。我设法用[will_paginate gem](https://github.com/mislav/will_paginate)实现了分页，但我有一个小问题。谷歌总是返回不同的 totalItems 值，这很令人困惑，因为我用它来评估总页数。

经过研究，我发现[这不是一个错误](http://productforums.google.com/forum/#!topic/books-api/Y_uEJhohJCc)。

所以我的问题是也许还有其他方法可以实现分页或评估总页数？

# java - 是否可以向 JAXB 提供有关元素值的映射信息？

> ID：13235119
> 
> 赞同：1
> 
> 时间：2012-11-05T15:24:16.770
> 
> 标签：java, xml, jaxb

我正在使用 JAXB 从我的 java 对象（xml 导出）以及其他方式（xml 导入）生成 xml 文件。

在某些情况下，我使用“幻数”来初始化整数类属性，因为 0 也是有效的，我想初始化属性并将其标记为“尚未编辑”。

在从 JAXB 生成的 xml 输出中，如果这个幻数不存在，我会很高兴。是否可以向 JAXB 提供诸如映射信息之类的东西？

请看一下这个例子。

例子：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="my-root") 
public class ExampleClass {

    /** integer value which represents empty */
    public static final int EMPTY_INT = Integer.MAX_VALUE;

    /** my id */
    @XmlElement(name="id")
    private int mMyId = EMPTY_INT;
    public void setMyId(int myId) {
        mMyId = myId;
    }
    public int getMyId() {
        return mMyId;
    }
} 
```

JAXB 生成类似：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<my-root>
    <id>2147483647</id>
</my-root> 
```

我想要的是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<my-root>
    <id></id>
</my-root> 
```

如果属性值为 EMPTY_INT 和其他方式（导入），我需要告诉 JAXB 生成“无”（参见示例）。

这有可能吗？或者还有其他方法可以达到这个目标吗？

谢谢您的帮助。史蒂芬

更新：

* * *

根据答案，我尝试了以下方法：

注意：代码被缩短（例如没有导入）

1）添加一个类：Mydapter

```
public class MyAdapter extends XmlAdapter<String, Integer> {
    @Override
    public Integer unmarshal(String val) throws Exception {
        System.out.println("Debug1");
        return Integer.parseInt(val);
    }
    @Override
    public String marshal(Integer val) throws Exception {
        System.out.println("Debug2");
        if (val == Integer.MAX_VALUE) {
            return "";
        } else {
            return val.toString();
       }
    }        
} 
```

2) 调整 ExampleClass 以使用“Integer”而不是“int”并对其进行注释

```
@XmlJavaTypeAdapter(MyAdapter.class)
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement(name="my-root") 

public class ExampleClass {

    /** integer value which represents empty */
    public static final int EMPTY_INT = Integer.MAX_VALUE;

    /** my id */
    @XmlElement(name="id")
    private Integer mMyId = EMPTY_INT;
    public void setMyId(int myId) {
        mMyId = myId;
    }
    public int getMyId() {
        return mMyId;
    }
} 
```

3) 执行 xml 导出的代码

```
public class XMLImportExport {

    public static void exportToXml(File xmlFile) throws Exception {

        JAXBContext jc = JAXBContext.newInstance(ExampleClass.class);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(new ExampleClass(), xmlFile);
    }
} 
```

4）xml输出依然

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<my-root>
    <id>2147483647</id>
</my-root> 
```

谢谢你，史蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:36:34.180

使用 @XmlJavaTypeAdapter(YourAdapter.class) 注释 mMyId，然后编写一个适配器来完成这项工作。像这样的东西（未经测试）：

```
public class YourAdapter extends XmlAdapter<String, Integer> {
    public Integer unmarshal(String val) throws Exception {
        return Integer.parseInt(val);
    }
    public String marshal(Integer val) throws Exception {
        if ( val == Integer.MAX_VALUE) {
            return "";
        } else {
            return val.toString();
        }
    }        
} 
```

# eclipse - 一起使用 Git、Svn 和 Eclipse

> ID：13235121
> 
> 赞同：1
> 
> 时间：2012-11-05T15:24:24.860
> 
> 标签：eclipse, git, svn

我正在尝试找到正确的方法来做到这一点。我的公司正在使用 SVN，因为我们正在开展签到和签出的项目。但是我正在考虑使用 Git 来备份我回家后的所有工作。这就是为什么

从家里我无法访问我公司的 SVN Repo，所以我正在考虑在互联网上建立一个 Git Repo，以便在我下班之前将我的所有工作签入 git，这样我就可以从家里访问它。

我想听听其他人是否正在这样做，以及您是否认为这是一个好习惯。

我该怎么做？我一直在使用 SVN 和 Eclipse，但我听说 GIT 更适合克隆我的工作站......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:25:40.123

对于很多人来说，解决方案是“git svn”。它允许你创建一个本地 git repo 作为 svn 中树的克隆，在本地工作，并将你的工作提交回 svn。

您可以在工作时运行 git svn，将生成的 repo 复制到您带回家的磁盘上，然后在您重新开始工作时提交回 svn。当然，始终假设您的雇主的政策允许这样做。如果你不能在家中使用 svn，也许他们不喜欢这个想法。

# java - Android - 获取 RNC（无线网络控制器）

> ID：13235122
> 
> 赞同：1
> 
> 时间：2012-11-05T15:24:25.367
> 
> 标签：java, android, umts

如何在 Android 中获取无线电网络控制器 (RNC)？

[http://en.wikipedia.org/wiki/Radio_Network_Controller](http://en.wikipedia.org/wiki/Radio_Network_Controller)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T17:37:43.853

如果网络类型是 UMTS/HSxPA/HSPA+，RNC id 是 4 字节 Cell Id（3GPP 25.401，第 6.1.5 节）的前 2 个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:30:08.827

基于此，请查看我的代码如何轻松获取 RNCID + CID：
*将 CID 转换为 ByteArray：*

```
public static byte[] convertByteArray__p(int p_int){
    byte[] l_byte_array = new byte[4];
    int MASK_c = 0xFF;
    for (short i=0; i<=3; i++){
        l_byte_array[i] = (byte) ((p_int >> (8*i)) & MASK_c);
    }
    return l_byte_array;
} 
```

获取 RNCID 和 CID：

```
public int getRNCID_or_CID__p(byte[] p_bytes, short p_which){
    int MASK_c = 0xFF;
    int l_result = 0;   
    if (p_which == Constants.CID_C) {
        l_result = p_bytes[0] & MASK_c ;
        l_result = l_result + ((p_bytes[1] & MASK_c ) << 8);
    } else if (p_which == Constants.RNCID_C){
        l_result = p_bytes[2] & MASK_c ;
        l_result = l_result + ((p_bytes[3] & MASK_c ) << 8);
    } else { 
        g_FileHandler.putLog__p('E', "getRNCID_or_CID__p invalid parameter");
    }
    return l_result;     
} 
```

然后你可以很容易地像这样调用：

```
 byte[] l_byte_array = new byte[4];
    l_byte_array = convertByteArray__p(l_cid);
    int l_RNC_ID   = getRNCID_or_CID__p(l_byte_array,Constants.RNCID_C);
    int l_real_CID = getRNCID_or_CID__p(l_byte_array,Constants.CID_C); 
```

常量 RNCID_C(1) 和 CID_C(2) 只是为了让我分开将传递哪个参数。

# javascript - lightbox_me - 在同一页面上打开不同的弹出窗口

> ID：13235123
> 
> 赞同：2
> 
> 时间：2012-11-05T15:24:26.453
> 
> 标签：javascript, jquery

我正在尝试在同一页面上创建一个包含多个弹出窗口的页面。我希望在页面加载时打开第一个弹出窗口，我可以使用它

```
<script src="http://code.jquery.com/jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"></script>
<script src="jquery.lightbox_me.js" type="text/javascript" charset="utf-8"></script> 
<script type="text/javascript" > 
$(document).ready(function(){ 
  $("#sign_up").lightbox_me({centered: true, onLoad: function() { $('#sign_up').find ('input:first').focus()}});
}); // document ready 

</script> 

<body onload="$('#sign_up').trigger('click');"> 
```

但是我希望用户能够单击该弹出窗口中的链接，该链接将保留在同一页面上但打开不同的弹出窗口。再次从第二个弹出窗口中，我希望用户能够单击链接以打开第三个弹出窗口。

使用此代码，我可以单击第一个弹出窗口（sign_up）中的链接单击此处打开第二个弹出窗口（sign1）但第一个弹出窗口仍在后面（我可以看到它，因为第二个弹出窗口较小）

```
<script type="text/javascript" charset="utf-8">
    $(function() {
        function launch() {
             $('#sign_up').lightbox_me({centered: true, onLoad: function() { $('#sign_up').find('input:first').focus()}});
        }

        $('#try-1').click(function(e) {
            $("#sign_up").lightbox_me({centered: true, onLoad: function() {
                $("#sign_up").find("input:first").focus();
            }});

            e.preventDefault();
        });

        $('table tr:nth-child(even)').addClass('stripe');
    });
</script>
<script type="text/javascript" charset="utf-8">
    $(function() {
        function launch() {
             $('#sign1').lightbox_me({centered: true, onLoad: function() { $('#sign1').find('input:first').focus()}});
        }

        $('#try-2').click(function(e) {
            $("#sign1").lightbox_me({centered: true, onLoad: function() {
                $("#sign1").find("input:first").focus();
            }});

            e.preventDefault();
        });

        $('table tr:nth-child(even)').addClass('stripe');
    });
</script> 
```

我对 jquery 很陌生，基本上一直在尝试复制和调整当前代码，但并不高兴。

# oauth - Google Oauth 提示页面 - 添加更多文本？

> ID：13235124
> 
> 赞同：0
> 
> 时间：2012-11-05T15:24:30.753
> 
> 标签：oauth, spreadsheet

我正在使用 GoogleBrowserClientRequestUrl 将浏览器发送到提示用户允许我的应用程序访问他们的 Google Docs 帐户的页面。这一切都很好，但我想知道您是否可以在该提示页面以及自动生成的内容中添加一些额外的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:15:20.787

不，Google 在该页面上显示的唯一自定义信息是您在 Google 的[API 控制台中指定的](https://code.google.com/apis/console/)*产品名称*和*产品徽标*。

# php - Magento 相关产品不显示

> ID：13235125
> 
> 赞同：4
> 
> 时间：2012-11-05T15:24:33.713
> 
> 标签：php, magento

我正在尝试让相关产品块显示在我的产品详细信息页面上。我在相应的 .phtml 文件中有以下代码

```
<?php

<?php echo "Related product block"?>
<?php if($this->getItems()->getSize()): ?>
<div class="block block-related">
<div class="block-title">
    <strong><span><?php echo $this->__('Related Products') ?></span></strong>
</div>
<div class="block-content">
    <p class="block-subtitle"><?php echo $this->__('Check items to add to the cart or')  ?>&nbsp;<a href="#" onclick="selectAllRelated(this); return false;"><?php echo $this->__('select all') ?></a></p>
    <ol class="mini-products-list" id="block-related">
    <?php foreach($this->getItems() as $_item): ?>
        <li class="item">
            <?php if(!$_item->isComposite() && $_item->isSaleable()): ?>
                <?php if (!$_item->getRequiredOptions()): ?>
                    <input type="checkbox" class="checkbox related-checkbox" id="related-checkbox<?php echo $_item->getId() ?>" name="related_products[]" value="<?php echo $_item->getId() ?>" />
                <?php endif; ?>
            <?php endif; ?>
            <div class="product">
                <a href="<?php echo $_item->getProductUrl() ?>" title="<?php echo     $this->htmlEscape($_item->getName()) ?>" class="product-image"><img src="<?php echo $this->helper('catalog/image')->init($_item, 'thumbnail')->resize(50) ?>" width="50" height="50" alt="<?php echo $this->htmlEscape($_item->getName()) ?>" /></a>
                <div class="product-details">
                    <p class="product-name"><a href="<?php echo $_item->getProductUrl() ?>"><?php echo $this->htmlEscape($_item->getName()) ?></a></p>
                    <?php echo $this->getPriceHtml($_item, true, '-related') ?>
                    <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <a href="<?php echo $this->getAddToWishlistUrl($_item) ?>" class="link-wishlist"><?php echo $this->__('Add to Wishlist') ?></a>
                    <?php endif; ?>
                </div>
            </div>
        </li>
    <?php endforeach ?>
    </ol>
    <script type="text/javascript">decorateList('block-related', 'none-recursive')</script>
</div>
<script type="text/javascript">
//<![CDATA[
$$('.related-checkbox').each(function(elem){
    Event.observe(elem, 'click', addRelatedToProduct)
});

var relatedProductsCheckFlag = false;
function selectAllRelated(txt){
    if (relatedProductsCheckFlag == false) {
        $$('.related-checkbox').each(function(elem){
            elem.checked = true;
        });
        relatedProductsCheckFlag = true;
        txt.innerHTML="<?php echo $this->__('unselect all') ?>";
    } else {
        $$('.related-checkbox').each(function(elem){
            elem.checked = false;
        });
        relatedProductsCheckFlag = false;
        txt.innerHTML="<?php echo $this->__('select all') ?>";
    }
    addRelatedToProduct();
}

function addRelatedToProduct(){
    var checkboxes = $$('.related-checkbox');
    var values = [];
    for(var i=0;i<checkboxes.length;i++){
        if(checkboxes[i].checked) values.push(checkboxes[i].value);
    }
    if($('related-products-field')){
        $('related-products-field').value = values.join(',');
    }
}
//]]>
</script> 
```

代码上方的回声显示在我的页面上。这当然证明我正确地实现了该块。

只是 if 语句中的所有内容都没有显示。

我花了一些时间寻找解决方案，并尝试重建索引，并且我的相关产品在前端可见。

任何人都知道我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-04-29T17:20:49.700

Magento 将始终为条件返回一个低数字或 0：

```
$this->getItems()->getSize() 
```

如果部分/所有相关产品在用户的购物车中，则项目将显示为好像丢失了。

为了防止这种行为，复制核心 Magento 'Related' 类：

```
/app/code/core/Mage/Catalog/Block/Product/List/Related.php 
```

到本地：

```
/app/code/local/Mage/Catalog/Block/Product/List/Related.php 
```

然后注释掉 if 语句中的以下几行：

```
if (Mage::helper('catalog')->isModuleEnabled('Mage_Checkout')) {
    //mod - show all related products, even if they have been added to the cart
    //Mage::getResourceSingleton('checkout/cart')->addExcludeProductFilter($this->_itemCollection,
    //    Mage::getSingleton('checkout/session')->getQuoteId()
    //);
    $this->_addProductAttributesAndPrices($this->_itemCollection);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:37:30.190

在您的 4 行：

```
<?php if($this->getItems()->getSize() > 0 ? true : false) ?> 
```

试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:29:40.143

在代码类型的顶部

```
var_dump($this->getItems()->getSize()) // does this print NUll, False or > 0 
```

如果上面的代码打印 NULL 或 false 或小于 1，则执行

```
print_r($this->getItems()); 
```

如果以上都没有打印您期望的信息，请检查您的块 getItems() 方法

关闭的 IF 也在哪里`if($this->getItems()->getSize()):`

# macos - 允许除 NSOpenPanel 中的一种文件类型以外的所有文件类型

> ID：13235130
> 
> 赞同：1
> 
> 时间：2012-11-05T15:24:44.617
> 
> 标签：macos, filter, nsopenpanel

我的应用程序创建了一个“新”类型（扩展名）的文件，比如说它的“.newtype”，所以当我想用 NSOpenPanel 浏览文件来创建它时，这种类型的文件必须是不可选择的。

我如何将除“.newtype”之外的所有文件类型传递给 NSOpenPanel 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:33:57.157

提供处理`NSOpenSavePanelDelegate` [协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOpenSavePanelDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSOpenSavePanelDelegate) `panel:shouldEnableURL:` [方法](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOpenSavePanelDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSOpenSavePanelDelegate/panel%3ashouldEnableURL%3a)的委托。

# jquery - jQuery背景模糊过渡在窗口调整大小时中断

> ID：13235139
> 
> 赞同：0
> 
> 时间：2012-11-05T15:25:05.980
> 
> 标签：jquery, background, resize, html5-canvas

我已将以下内容用于背景模糊过渡效果： [http ://tympanus.net/codrops/2011/11/18/fullscreen-image-blur-effect-with-html5/](http://tympanus.net/codrops/2011/11/18/fullscreen-image-blur-effect-with-html5/)

该示例可以在以下位置找到： [http](http://tympanus.net/Development/FullscreenImageBlurEffect/index3.html) ://tympanus.net/Development/FullscreenImageBlurEffect/index3.html 下面的脚本使用“StackBlur”将模糊效果添加到画布。

```
$(function() {

            var BlurBGImage = (function() {

                var $bxWrapper          = $('#bx-wrapper'),
                    // loading status to show while preloading images
                    $bxLoading          = $bxWrapper.find('div.bx-loading'),
                    // container for the bg images and respective canvas
                    $bxContainer        = $bxWrapper.find('div.bx-container'),
                    // the bg images we are gonna use
                    $bxImgs             = $bxContainer.children('img'),
                    // total number of bg images
                    bxImgsCount         = $bxImgs.length,
                    // current image's index
                    current             = 0,
                    // variation to show the image:
                    // (1) - blurs the current one, fades out and shows the next image
                    // (2) - blurs the current one, fades out, shows the next one (but initially blurred)
                    // speed is the speed of the animation
                    // blur Factor is the factor used in the StackBlur script
                    animOptions         = { speed : 700, variation : 2, blurFactor : 10 },
                    // control if currently animating
                    isAnim              = false,
                    // check if canvas is supported
                    supportCanvas       = Modernizr.canvas,
                    // slideshow
                    slideshow_interval  = 6000,
                    slideshow_time,

                    // init function
                    init                = function() {

                        // preload all images and respective canvas
                        var loaded = 0;

                        $bxImgs.each( function(i) {

                            var $bximg  = $(this);

                            // save the position of the image in data-pos
                            $('<img data-pos="' + $bximg.index() + '"/>').load(function() {

                                var $img    = $(this),
                                    // size of image to be fullscreen and centered
                                    dim     = getImageDim( $img.attr('src') ),
                                    pos     = $img.data( 'pos' );

                                // add the canvas to the DOM
                                $.when( createCanvas( pos, dim ) ).done( function() {

                                    ++loaded;

                                    // all images and canvas loaded
                                    if( loaded === bxImgsCount ) {

                                        // apply style for bg image and canvas
                                        centerImageCanvas();

                                        // hide loading status
                                        $bxLoading.hide();

                                        // initialize events
                                        initEvents();

                                        // start slideshow
                                        startSlideshow();

                                    }

                                });

                            }).attr( 'src', $bximg.attr('src') );

                        });

                    },
                    startSlideshow      = function() {

                        slideshow_time = setTimeout( function() {

                            if( !isAnim ) {

                                var pos = current;
                                ( pos < bxImgsCount - 1 ) ? ++pos : pos = 0;
                                isAnim = true;
                                // show the bg image
                                showImage( pos );
                                startSlideshow();

                            }

                        }, slideshow_interval );

                    },
                    // creates the blurred canvas image
                    createCanvas        = function( pos, dim ) {

                        return $.Deferred( function(dfd) {

                            // if canvas not supported return
                            if( !supportCanvas ) {
                                dfd.resolve();
                                return false;
                            }   

                            // create the canvas element:
                            // size and position will be the same like the fullscreen image
                            var $img    = $bxImgs.eq( pos ),
                                imgW    = dim.width,
                                imgH    = dim.height,
                                imgL    = dim.left,
                                imgT    = dim.top,

                                canvas  = document.createElement('canvas');

                            canvas.className        = 'bx-canvas';
                            canvas.width            = imgW;
                            canvas.height           = imgH;
                            canvas.style.width      = imgW + 'px';
                            canvas.style.height     = imgH + 'px';
                            canvas.style.left       = imgL + 'px';
                            canvas.style.top        = imgT + 'px';
                            canvas.style.visibility = 'hidden';
                            // save position of canvas to know which image this is linked to
                            canvas.setAttribute('data-pos', pos);
                            // append the canvas to the same container where the images are
                            $bxContainer.append( canvas );
                            // blur it using the StackBlur script
                            stackBlurImage( $img.get(0), dim, canvas, animOptions.blurFactor, false, dfd.resolve );

                        }).promise();

                    },
                    // gets the image size and position in order to make it fullscreen and centered.
                    getImageDim         = function( img ) {

                        var $img    = new Image();

                        $img.src    = img;

                        var $win    = $( window ),
                            w_w     = $win.width(),
                            w_h     = $win.height(),
                            r_w     = w_h / w_w,
                            i_w     = $img.width,
                            i_h     = $img.height,
                            r_i     = i_h / i_w,
                            new_w, new_h, new_left, new_top;

                        if( r_w > r_i ) {

                            new_h   = w_h;
                            new_w   = w_h / r_i;

                        }
                        else {

                            new_h   = w_w * r_i;
                            new_w   = w_w;

                        }

                        return {
                            width   : new_w,
                            height  : new_h,
                            left    : ( w_w - new_w ) / 2,
                            top     : ( w_h - new_h ) / 2
                        };

                    },
                    // initialize the events
                    initEvents          = function() {

                        $( window ).on('resize.BlurBGImage', function( event ) {

                            // apply style for bg image and canvas
                            centerImageCanvas();
                            return false;

                        });

                    },
                    // apply style for bg image and canvas
                    centerImageCanvas   = function() {

                        $bxImgs.each( function(i) {

                            var $bximg  = $(this),
                                dim         = getImageDim( $bximg.attr('src') ),
                                $currCanvas = $bxContainer.children('canvas[data-pos=' + $bximg.index() + ']'),
                                styleCSS    = {
                                    width   : dim.width,
                                    height  : dim.height,
                                    left    : dim.left,
                                    top     : dim.top
                                };  

                            $bximg.css( styleCSS );

                            if( supportCanvas )
                                $currCanvas.css( styleCSS );

                            if( i === current ) 
                                $bximg.show();

                        });

                    },
                    // shows the image at position "pos"
                    showImage           = function( pos ) {

                            // current image 
                        var $bxImage        = $bxImgs.eq( current );
                            // current canvas
                            $bxCanvas       = $bxContainer.children('canvas[data-pos=' + $bxImage.index() + ']'),
                            // next image to show
                            $bxNextImage    = $bxImgs.eq( pos ),
                            // next canvas to show
                            $bxNextCanvas   = $bxContainer.children('canvas[data-pos='+$bxNextImage.index()+']');

                        // if canvas is supported
                        if( supportCanvas ) {

                            $bxCanvas.css( 'z-index', 100 ).css('visibility','visible');

                            $.when( $bxImage.fadeOut( animOptions.speed ) ).done( function() {

                                switch( animOptions.variation ) {

                                    case 1  :
                                        $.when( $bxNextImage.fadeIn( animOptions.speed ) ).done( function() {

                                            $bxCanvas.css( 'z-index', 1 ).css('visibility','hidden');
                                            current = pos;
                                            $bxNextCanvas.css('visibility','hidden');
                                            isAnim  = false;

                                        });
                                        break;
                                    case 2  :
                                        $bxNextCanvas.css('visibility','visible');

                                        $.when( $bxCanvas.fadeOut( animOptions.speed * 1.5 ) ).done( function() {

                                            $(this).css({
                                                'z-index'       : 1,
                                                'visibility'    : 'hidden'
                                            }).show();

                                            $.when( $bxNextImage.fadeIn( animOptions.speed ) ).done( function() {

                                                current = pos;
                                                $bxNextCanvas.css('visibility','hidden');
                                                isAnim  = false;

                                            });

                                        });
                                        break;

                                };

                            });

                        }
                        // if canvas is not shown just work with the bg images
                        else {

                            $.when( $bxNextImage.css( 'z-index', 102 ).fadeIn( animOptions.speed ) ).done( function() {

                                current = pos;
                                $bxImage.hide();
                                $(this).css( 'z-index', 101 );
                                isAnim = false;

                            });

                        }

                    };

                return {
                    init    : init
                };

            })();

            // call the init function
            BlurBGImage.init();

        }); 
```

问题是，当我调整浏览器窗口的大小时，过渡会中断并且不再产生预期的效果。

据我所知，问题似乎与画布的大小有关。谁能给我一个如何解决它的想法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:35:40.037

我使用了相同的脚本[Demo 1](http://tympanus.net/Development/FullscreenImageBlurEffect/index.html) ，我想添加自动脚本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:36:46.520

在调整大小事件上调用此函数。在准备好的文档上参考下面的代码我正在绑定调整大小事件。

```
$(document).ready(function() {

    $(window).bind('resize', function(e) {
        //call your function here
    });
}); 
```

# symfony - 选择众多服务之一作为要使用的服务

> ID：13235140
> 
> 赞同：4
> 
> 时间：2012-11-05T15:25:07.393
> 
> 标签：symfony, dependency-injection

**设想：**

*   我将依赖注入组件用作独立组件。没有捆绑包/symfony 框架之类的东西。
*   我有一组服务都负责类似的事情，例如通过不同的方式将数据写入硬盘（例如通过 ftp、直接文件操作、存储到数据库中，...）
*   这些服务中的每一个都需要不同的配置（例如 sql 凭据、ftp 凭据……）
*   我想将其中一项服务定义为其他服务依赖的“通用服务”。
*   使用哪个服务由参数配置

**例子：**

鉴于这些简化的参数和服务定义：

```
<parameter key="file.adapterType">direct</parameter>
<service id="file.db" />
<service id="file.ftp" />
<service id="file.direct" /> 
```

我想为我真正想要使用的服务定义一个别名

```
<service id="file.adapter" alias="file.%file.adapterType%"/> 
```

对于仅依赖此服务的其他服务：

```
<service id="photos">
    <argument type="service" id="file.adapter" />
</service> 
```

**到目前为止我已经尝试过：**

*   使用别名 ID 中的参数定义别名。但是 alias-id 中的参数没有得到解析。
*   直接在参数标签中定义 id - 再次参数没有解析她：

    ```
    <service id="photo">
        <argument type="service" id="file.%file.adapterType%" />
    </service> 
    ```

*   创建工厂。get-method接收参数和di-container并返回相应的服务：

    ```
    public function get(ContainerInterface $container, $parameter) 
    {
        return $container->get('file.' . $parameter);
    } 
    ```

    但是，容器不会将自己注册为服务。从文件加载配置时，预先注册它不会生效（导致错误消息“服务'容器'未找到”）：

    ```
    $container->set("container", $container);
    $loader = new XmlFileLoader($container, new FileLocator(__DIR__ . '/services'));
    $loader->load('fileadapter.xml'); // << gives error
    $container->get("container"); // << working 
    ```

**其他选择？**

加载配置文件后我无法设置别名，因为文件中存在依赖别名的服务。

有人对如何处理这个问题有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:35:38.687

实际上，我相信您在“到目前为止我已经尝试过的内容”部分中的第三个要点是正确的，除了服务容器确实将自己注册为服务，但它被称为`service_container`，而不是`container`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T09:32:14.140

如果我正确理解您的问题，您可以将`file.*`服务移动到一个文件并将使用的服务移动`file.adapter`到另一个文件并创建`file.adapter`别名，同时在加载文件之间创建别名。例如

```
$loader = new XmlFileLoader($container, new FileLocator(__DIR__ . '/services'));
$loader->load('fileadapter.xml'); 

$defaultAdapterId = "file." . $container->getParameter('file.adapterType');
if($container->hasDefinition($defaultAdapterId)) {
    $container->setAlias('file.adapter', $defaultAdapterId);
}

$loader->load('other_services.xml'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-06T14:20:48.113

现在（实际上是从 2.7 版开始），你可以使用 symfony 表达式语言来做同样的事情，只需要配置

看看这里[http://symfony.com/doc/current/service_container/expression_language.html](http://symfony.com/doc/current/service_container/expression_language.html)

# android - java.lang.OutOfMemoryError 在android中发布BASE64图像时

> ID：13235141
> 
> 赞同：1
> 
> 时间：2012-11-05T15:25:08.657
> 
> 标签：android, json, base64, bitmapimage, android-image

我在下面的代码中遇到内存不足的异常。

```
try {
    String strBase64 = BitMapToString(bitmap);
    bitmap.recycle();
    JSONObject data = new JSONObject();
    data.put("image_data", strBase64.toString());
    data.put("uploadedBy", "1");
    Log.i("JSON DATA", data.toString());
    HttpClient httpClient = new DefaultHttpClient();
    String url = "http://**.**.***.***:91/bisqup/index.php?r=ws/AddAppImage";
    HttpPost httpPost = new HttpPost(url);
    List<NameValuePair> parameters = new ArrayList<NameValuePair>();
    parameters.add(new BasicNameValuePair("data", data.toString()));
    httpPost.setEntity(new UrlEncodedFormEntity(parameters));
    HttpResponse response = httpClient.execute(httpPost);
    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent(), "UTF-8"));
    String json = reader.readLine();
    JSONTokener tokener = new JSONTokener(json);
    JSONObject finalResult = new JSONObject(tokener);
    Log.i("Response", "" + finalResult.toString());
} catch (Exception e) {
    // TODO: handle exception
    e.printStackTrace();
}

public String BitMapToString(Bitmap bitmap) {
    try {
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, baos);
        byte[] b = baos.toByteArray();
        String temp = Base64.encodeToString(b, Base64.DEFAULT);
        baos.close();
        baos = null;
        Log.i("BASE64", temp);
        return temp;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
} 
```

不幸的是，我遇到了这样的异常。

```
11-05 20:28:05.414: E/AndroidRuntime(23446): FATAL EXCEPTION: main
11-05 20:28:05.414: E/AndroidRuntime(23446): java.lang.OutOfMemoryError
11-05 20:28:05.414: E/AndroidRuntime(23446):    at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:95)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:140)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at java.lang.StringBuilder.append(StringBuilder.java:125)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at org.json.JSONStringer.string(JSONStringer.java:344)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at org.json.JSONStringer.value(JSONStringer.java:252)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at org.json.JSONObject.writeTo(JSONObject.java:667)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at org.json.JSONObject.toString(JSONObject.java:636)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at com.siliconithub.android.bisqup.BisqupImagePreview$2.onClick(BisqupImagePreview.java:134)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.view.View.performClick(View.java:2485)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.view.View$PerformClick.run(View.java:9080)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.os.Handler.handleCallback(Handler.java:587)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.os.Looper.loop(Looper.java:130)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at android.app.ActivityThread.main(ActivityThread.java:3687)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at java.lang.reflect.Method.invokeNative(Native Method)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at java.lang.reflect.Method.invoke(Method.java:507)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-05 20:28:05.414: E/AndroidRuntime(23446):    at dalvik.system.NativeStart.main(Native Method) 
```

那么谁能告诉我为什么这段代码会出现这个内存问题？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:30:37.290

当您将其读入 a 时，很可能您`Bitmap`的文件太大了`String`，这就是您得到`OutOfMemory`异常的原因。对于此类请求，您应该`Multipart-post`使用 a`FileBody`而不是 a 。`String`您可以查看[How to make a multi-part POST in Java](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)了解更多详细信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:32:33.730

尝试在没有 JSONObject 类的情况下生成 JSON 对象，这看起来相当简单，所以只需构建字符串。

```
String data = "{ image_data: \"" + strBase64.toString() + "\", uploadedBy: \"1\" }"; 
```

# wpf - XNA 和 .NET 框架

> ID：13235145
> 
> 赞同：0
> 
> 时间：2012-11-05T15:25:12.753
> 
> 标签：wpf, 3d, xna, kinect

我想知道 .NET 和 XNA 框架是否可以在任何程序中一起使用？

如果是，有什么方法可以在 WPF 中显示 3D 模型，并结合使用 XNA 的骨架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:52:03.653

Microsoft Kinect for Windows Developer Toolkit 中有多个示例说明如何将 XNA 与 Kinect 一起使用，包括为骨架蒙皮。

[http://www.microsoft.com/en-us/download/details.aspx?id=34807](http://www.microsoft.com/en-us/download/details.aspx?id=34807)

# join - Hadoop Mapreduce Map Side Join

> ID：13235149
> 
> 赞同：0
> 
> 时间：2012-11-05T15:25:25.117
> 
> 标签：join, hadoop, mapreduce, inner-join

我有以下文件：

**城市数据**

```
Andorra la Vella|ad|Andorra la Vella|20430|42.51|1.51|
Canillo|ad|Canillo|3292|42.57|1.6|
Encamp|ad|Encamp|11224|42.54|1.57|
... 
```

**国家.dat**

```
Andorra|ad|Andorra la Vella|Andorra la Vella|69865|468|
United Arab Emirates|ae|Abu Dhabi|Abu Dhabi|2523915|82880|
Afghanistan|af|Kabul|Kabul|28513677|647500|
... 
```

我需要做的是进行 Map Side Join 以获取 Country.dat 文件中列出的人口（City.dat 中的第 4 列）和每个首都的名称（Country.dat 中的第 3 列）。所以我得到了基本的想法。两个文件的连接键将是城市值（City.dat 中的第 1 列和 Country.dat 中的第 3 列）。这样，我应该得到一个表格，其中包含我需要的所有信息，每个首都都有一行。

但是这在 Hadoop 中究竟是如何工作的呢？我如何告诉 Hadoop 两个文件中的连接键是什么（我首先需要从每一行中解析出来，不是吗？）我找到的所有代码看起来都是这样的：

```
inner(tbl(org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat.class,
          "/user/cloudera/City.dat"),
      tbl(org.apache.hadoop.mapreduce.lib.input.SequenceFileInputFormat.class,
          "/user/cloudera/Country.dat")) 
```

这只是定义了应该连接的两个文件。但是如何定义连接键以及我定义为记录的内容（在我的情况下，每个文件的一行应该是记录）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:41:25.507

基本上 map() 方法将获取一条记录，然后您将其写入上下文。键是城市和国家名称的连接，值是文件中的整行，并带有一些关于它是来自文件 1 还是文件 2 的指示。Hadoop 会做它的事情，reduce() 方法将是传递您在映射器中编写的每个键和一个包含 map() 为该键写入的所有值的 Iterable。基本上，这会将 Iterable 中文件 1 和文件 2 中的行与源指示符配对。你的逻辑从那里开始。

要回答您的具体问题，您可以在映射器的 setup() 方法中读取文件 1 并将我记忆中的文件内容存储为哈希表。随后调用 map)( 文件 2 中每一行的方法都可以访问内存中的该哈希表。缺点是文件必须足够小以适合内存，并且将为每个文件调用 setup() 方法输入切片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:34:28.143

您可以将其中一个文件作为分布式缓存传递，另一个作为实际输入。

例如，说这`country.dat`两种类型的输入中尺寸较小的，然后将其放在分布式缓存中。

现在，`country.dat`在 configure 或 setup 方法（分别为新 API 或旧 API）中读取此内容并根据需要创建一个 HashMap（将其键入首都），然后在 map 方法中根据需要使用此 HashMap 来加入记录。

# .net - IoC 通常是作为单例实现的吗？IoC是如何实现的？

> ID：13235154
> 
> 赞同：2
> 
> 时间：2012-11-05T15:25:36.297
> 
> 标签：.net, design-patterns, dependency-injection, inversion-of-control, ioc-container

我计划深入研究其中一个开源 IoC 容器以真正 100% 解决这个问题，但我想我也会问一般社区（在无法在任何密切相关的问题中找到直接答案之后）。

据我了解典型的 IoC 实现，它似乎是一个全局类，充当具有所有依赖项知识的单例。然后它使用这些知识来提供构造函数或属性参数，它知道如何填充它们？也许我错过了一些东西，因此是这个问题。

有人可以明确地告诉我 IoC 是如何工作的和/或它是否是一个单例？

**更新**

我想我的问题是“神奇”的 IoC 是如何像 Ninject.MVC 一样工作的？注射在哪里“有效”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:28:47.980

IoC 容器往往不是单例的，因为您*可能*希望同时运行多个容器（例如，系统的每层一个），尽管这不是最常见的做法。

为了访问您的容器，您需要对实际容器本身的引用。

即使您的容器不是真正的单例，您也可以使用服务定位器访问它（另请参阅[http://msdn.microsoft.com/en-us/library/ff921142(v=pandp.20).aspx](http://msdn.microsoft.com/en-us/library/ff921142(v=pandp.20).aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T17:21:17.710

所有主要的 DI 框架（或至少在 Java 和 .NET 中）通常建议在应用程序的生命周期内拥有单个容器实例。一些容器确实支持“子容器”的概念，但这些子容器是从单个容器创建的，实际上只是同一个实例的一部分。

绝对有可能拥有多个容器，例如每层或每个会话一个容器，但是当您根据依赖注入原则设计应用程序时，通常每个应用程序一个容器（在 . NET 这将是每个应用程序域，或者通常是在同一内存空间中运行的所有代码）。在处理由（桌面）客户端和 Web 服务组成的应用程序时，两者都有自己的容器（因为它们实际上是不同的程序，彼此不知道）。

尽管可以为每个（Web 用户）会话、请求或类似的东西定义一个容器实例，但这往往会使事情复杂化，因为很难注册比会话更长的生命周期的依赖项，而且有很多创建容器时的性能开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:32:13.110

没有理由为什么它应该是一个单例。仅仅因为您通过上下文将实体连接在一起，您仍然可以运行多个上下文（使用 Spring 白话，但不将参数限制为 Spring）

请注意，像 Java 这样的平台甚至不能强制执行单例（由于它们的多类加载器架构）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:43:43.950

好的，在进一步在线浏览并与同事交谈之后，我相信没有静态单例就无法实现 IoC（至少在有状态程序中..winforms/wpf 中）。因此，我计划使用组合根模式，并以服务定位器的方式将 ninject 内核用作静态单例。我仍然会调用 kernel.Get，但我想我至少不再关心该项目中的依赖关系。我只是在兜圈子:)。

像这样的东西：

```
Main
{
  setupkernel();
  Application.Run(kernel.Get<Main>);
}

btn_GetChildForm()
{
    kernel.Get<ChildForm>().Show();
} 
```

如果有人知道更好的方法，请告诉我。否则，这就是我拼凑起来的最佳方法。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-07T12:13:02.443

[服务定位器是一种反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)

尝试并了解“组合根”的性质。

# r - 如何阻止 R 将 X 附加到我的数字列标签？

> ID：13235163
> 
> 赞同：3
> 
> 时间：2012-11-05T15:26:02.147
> 
> 标签：r, matrix

我有一个带有数字列标签的矩阵，例如：

```
1,2,3
1,2,3
4,5,6
7,8,9 
```

当我将这些数据加载到 R 中的变量中`as.matrix(read.table("myfile", sep=",", header=TRUE)`并打印生成的矩阵时，列标题前面已经加上 X，并且这个额外的字符出现在绘图等中：

```
 X1     X2     X3
[1,]  1      2      3
[2,]  4      5      6
[3,]  7      8      9 
```

我怎样才能阻止这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T15:28:45.270

供应`check.names=FALSE`给`read.table`.

请注意，当`data.frame`s 具有诸如此类的非标准名称时，对其列的任何引用都必须用刻度线括起来，例如

```
my.df <- read.table(text='1,2,3
1,2,3
4,5,6
7,8,9', header=TRUE, sep=',', check.names=FALSE)

my.df$`1`
with(my.df, `1`)
attach(k)
`1` 
```

此外，对 1 的调用`transform`将`transform(my.df,`使用其标准化形式 ( , , )`=1:3)`替换列名，因为使用其默认参数进行调用。`X1``X2``X3``transform``data.frame()`

设置`check.names=FALSE`虽然在某些非常特殊的情况下很有用，但将允许重复的列名和非语法名称，这可能会在以后导致任何数量的问题。使用时要小心。

`data.frame()`默认情况下使用`check.names=TRUE`，因为在许多情况下，R 试图将数据框的列名解释为它们自己的变量；如果列名不是语法上有效的名称（请参阅 参考资料`?make.names`），或者如上所述受反引号保护，则在这些上下文中将发生错误。

# ruby-on-rails - Nginx 重定向到 IP

> ID：13235165
> 
> 赞同：0
> 
> 时间：2012-11-05T15:26:14.220
> 
> 标签：ruby-on-rails, ruby, nginx, capistrano, railscasts

我最近在我的一个项目中使用了 Ryan Bates 的 Deploying to VPS Railscasts。一切都像一个魅力，但是有一个小问题困扰着我关于 nginx 配置的问题。出于某种原因，每当我进入暂存环境域时，它都会显示正确的页面，但会被重定向到 IP 而不是显示域。

例如，如果域是 example.com，它会被重定向到 xx.xx.xxx.xx，这是服务器的 IP 地址。

谁能帮我解决这个问题。我已经尝试了几个在线资源，但它们似乎都不起作用。大多数时候，我只是让 nginx 在无限循环中创建重定向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T08:48:22.893

这实际上不是 Nginx conf 的问题，实际上它实际上是正确解析 DNS 的问题。

# iphone - 如何自动移动 UIScrollView 以使 UITextfield 基于键盘可见？

> ID：13235167
> 
> 赞同：2
> 
> 时间：2012-11-05T15:26:17.223
> 
> 标签：iphone, ipad, ios5, uiscrollview

[存在键盘时如何使 UITextField 向上移动？](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present)- 我已经尝试了这里提出的所有方法，但是我的滚动视图没有根据键盘向上移动。我想在 iPad 笔记中实现移动，因为文本接近键盘，文档向上移动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:33:31.267

这是我的做法。不要忘记在 UITextField 上设置委托

```
- (void) scrollViewAdaptToStartEditingTextField:(UITextField*)textField
{
    CGPoint point = CGPointMake(0, textField.frame.origin.y - 1.5 * textField.frame.size.height);
    [scrollView setContentOffset:point animated:YES];
}

- (void) scrollVievEditingFinished:(UITextField*)textField
{
    CGPoint point = CGPointMake(0, 0);
    [scrollView setContentOffset:point animated:YES];
}

- (BOOL) textFieldShouldBeginEditing:(UITextField *)textField
{
    [self scrollViewAdaptToStartEditingTextField:textField];
    return YES;
}

- (BOOL) textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    [self scrollVievEditingFinished:textField];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-09T09:52:34.480

这里是 swift 3.0 版本

```
func scrollViewAdapt(toStartEditing textField: UITextField) {
        let point = CGPoint(x: CGFloat(0), y: CGFloat(textField.frame.origin.y - 1.7 * textField.frame.size.height))
        scrollView.setContentOffset(point, animated: true)
    }

    func scrollVievEditingFinished(_ textField: UITextField) {
        let point = CGPoint(x: CGFloat(0), y: CGFloat(0))
        scrollView.setContentOffset(point, animated: true)
    }
func textFieldShouldBeginEditing(_ textField: UITextField) -> Bool {

        self.scrollViewAdapt(toStartEditing: textField)
        return true
    }

    func textFieldShouldReturn(_ textField: UITextField) -> Bool {
        textField.resignFirstResponder()
        self.scrollVievEditingFinished(textField)
        return true
    } 
```

# sql-server - SSAS 中的时间层次结构（阅读障碍）

> ID：13235169
> 
> 赞同：2
> 
> 时间：2012-11-05T15:26:25.413
> 
> 标签：sql-server, ssas, mdx

时间维度有层次：

*   年-月-日
*   年 - 周 - 日期
*   年月

我这样查询他们：

```
LASTPERIODS( -12, StrToMember("[Time].[Year -  Week -  Date].[Week].&[" + Format(now(), "yyyy-MM-" + "01T00:00:00") + "]")) 
```

返回空

```
LASTPERIODS( -12, StrToMember("[Time].[Year - Month].[Month].&[" + Format(now(), "yyyy-MM-" + "01T00:00:00") + "]")) 
```

返回未来 12 个月

如果我这样查询：

```
select non empty([Time].[Year -  Week -  Date].[Week].members) on 0 
```

它会给我一周的成员..

我错过了一些参数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:57:53.207

这真的取决于你的钥匙是如何制作的。通过使用 &，您说的是使用基础键，而不是名称。

在您的第一个示例中，您要求具有“yyyy-MM-01T00:00:00”格式的基础键的周，这看起来更像是月初而不是周的开始。

当您运行第二个查询时，它是否为您提供了您尝试编写的查询之类的元素？

# c# - 异常日志记录中的空引用异常掩盖了真正的错误

> ID：13235177
> 
> 赞同：3
> 
> 时间：2012-11-05T15:26:56.630
> 
> 标签：c#, asp.net, multithreading, iis-7, mutex

我们有一个由 Web 请求启动的长时间运行的进程。为了让进程有时间完成，我们在一个新线程上将其分离出来，并使用互斥锁来确保只有一个进程实例可以运行。此代码在我们的开发和登台环境中按预期运行，但在我们的生产环境中失败并出现空引用异常。我们的应用程序日志没有捕获任何内容，我们的操作人员报告说它正在使 AppPool 崩溃。（这似乎是一个环境问题，但我们必须继续假设环境配置相同。）到目前为止，我们无法确定 Null Reference 的位置。

以下是应用程序事件日志中的例外情况：

```
Exception: System.NullReferenceException
Message: Object reference not set to an instance of an object.
StackTrace:    at Jobs.LongRunningJob.DoWork()
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart() 
```

这是代码（稍微消毒）：

```
public class LongRunningJob: Job
{
    private static Mutex mutex = new Mutex();

    protected override void PerformRunJob()
    {
        var ts = new ThreadStart(LongRunningJob.DoWork);
        var thd = new Thread(ts);
        thd.IsBackground = true;
        thd.Start();
    }

    private static void DoWork()
    {
        var commandTimeOut = 180;

        var from = DateTime.Now.AddHours(-24);
        var to = DateTime.Now;

        if (mutex.WaitOne(TimeSpan.Zero))
        {
            try
            {
               DoSomethingExternal(); // from what we can tell, this is never called
            }
            catch (SqlException sqlEx)
            {
                if (sqlEx.InnerException.Message.Contains("timeout period elapsed"))
                {
                    Logging.LogException(String.Format("Command timeout in LongRunningJob: CommandTimeout: {0}", commandTimeOut), sqlEx);
                }
                else
                {
                    Logging.LogException(String.Format("SQL exception in LongRunningJob: {0}", sqlEx.InnerException.Message), sqlEx);
                }
            }
            catch (Exception ex)
            {
                Logging.LogException(String.Format("Error processing data in LongRunningJob: {0}", ex.InnerException.Message), ex);
            }
            finally
            {
                mutex.ReleaseMutex();
            }
        }
        else
        {
            Logging.LogMessage("LongRunningJob is already running.");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:49:11.243

为了找到一个`NullReferenceException`你基本上检查每个取消引用操作。我只能看到以下可疑的：

```
ex.InnerException.Message 
```

你不能假设`ex.InnerException`不为空。

# ruby-on-rails - 将 json 响应与哈希数组进行比较

> ID：13235179
> 
> 赞同：2
> 
> 时间：2012-11-05T15:27:04.133
> 
> 标签：ruby-on-rails, ruby, json, hash, rspec

当我在 JSON 响应中获得一组对象时，它们可能以不同的顺序表示。

有时我得到这个

```
JSON.parse(response.body) # => [{"a" => "b"}, {"c" => "d"}] 
```

或这个

```
JSON.parse(response.body) # => [{"c" => "d"}, {"a" => "b"}] 
```

但对我来说，这两个结果都是正确的。无论它们的顺序如何，测试我响应的对象的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:34:23.903

您可以使用哈希将其转换为类似集合的结构。

```
first_response.inject({}){|s, h| s[h] = true; s} 
```

将与

```
second_response.inject({}){|s, h| s[h] = true; s} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T02:48:39.657

除了其他有用的特性，[json 规范](https://github.com/collectiveidea/json_spec)gem 有一个`be_json_eql`匹配器，它可以在不考虑顺序的情况下工作。

# .htaccess - 当'index.html'被剥离时，如何删除'/folder/index.html'的尾部斜杠？

> ID：13235180
> 
> 赞同：5
> 
> 时间：2012-11-05T15:27:03.493
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, trailing-slash

我有一个具有以下文件/文件夹结构的静态站点：

*   索引.html
*   /foobar/
    *   索引.html
    *   鲍勃.html
    *   爱丽丝.html

我想实现以下目标：

*   删除所有`.html`扩展。**✔ 有效**
*   删除`index.html`（分别`index`）。**✔ 有效**
*   我希望文件结束时没有斜杠。**✔ 有效**
    *   如果有人添加了斜杠，则重定向到不带斜杠的 URL。**✘ 不工作**
*   我希望“文件夹”（实际上是`index.html`文件夹内的文件）结束时没有斜杠。**✘ 不工作**
    *   如果有人添加了斜杠，则重定向到不带斜杠的 URL。**✘ 不工作**

因此，以下 URL 应该可以工作：

*   `example.com/`（实际上`/index.html`：）
*   `example.com/foobar`（实际上`/foobar/index.html`：）
*   `example.com/foobar/bob`（实际上`/foobar/bob.html`：）
*   `example.com/foobar/alice`（实际上`/foobar/alice.html`：）

以下请求应重定向 (301)：

*   `example.com/foobar/`重定向到`example.com/foobar`：）
*   `example.com/foobar/bob/`重定向到`example.com/foobar/bob`：）
*   `example.com/foobar/alice/`重定向到`example.com/foobar/alice`：）

我看到当文件存在时这会产生问题`/foobar.html`：当有人访问时`/foobar`，不清楚是请求目录还是文件。但是，我会确保这永远不会发生。

* * *

目前，我有这个`.htaccess`：

```
# Turn MultiViews off. (MultiViews on causes /abc to go to /abc.ext.) 
Options +FollowSymLinks -MultiViews

# It stops DirectorySlash from being processed if mod_rewrite isn't. 
<IfModule mod_rewrite.c>

    # Disable mod_dir adding missing trailing slashes to directory requests.
    DirectorySlash Off

    RewriteEngine On

    # If it's a request to index(.html) 
    RewriteCond %{THE_REQUEST} \ /(.+/)?index(\.html)?(\?.*)?\  [NC]
    # Remove it. 
    RewriteRule ^(.+/)?index(\.html)?$ /%1 [R=301,L]

    # Add missing trailing slashes to directories if a matching .html does not exist. 
    # If it's a request to a directory. 
    RewriteCond %{SCRIPT_FILENAME}/ -d
    # And a HTML file does not (!) exist.
    RewriteCond %{SCRIPT_FILENAME}.html !-f
    # And there is not trailing slash redirect to add it. 
    RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L]

    # Remove HTML extensions. 
    # If it's a request from a browser, not an internal request by Apache/mod_rewrite. 
    RewriteCond %{ENV:REDIRECT_STATUS} ^$
    # And the request has a HTML extension. Redirect to remove it. 
    RewriteRule ^(.+)\.html$ /$1 [R=301,L]

    # If the request exists with a .html extension. 
    RewriteCond %{SCRIPT_FILENAME}.html -f
    # And there is no trailing slash, rewrite to add the .html extension. 
    RewriteRule [^/]$ %{REQUEST_URI}.html [QSA,L]

</IfModule> 
```

我必须在我的 中更改/删除/添加`.htaccess`什么？我不太明白。我试图删除注释为“如果匹配的 .html 不存在，则在目录中添加缺少的尾部斜杠”的块，但这没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T18:49:56.017

在您的规则上方`# Add missing trailing slashes to directories if a matching .html does not exist.`，尝试添加此规则，当存在 html 文件且请求不是目录且尾部有斜杠时重定向：

```
# if request has a trailing slash
RewriteCond %{REQUEST_URI} ^/(.*)/$
# but it isn't a directory
RewriteCond %{DOCUMENT_ROOT}/%1 !-d
# and if the trailing slash is removed and a .html appended to the end, it IS a file
RewriteCond %{DOCUMENT_ROOT}/%1.html -f
# redirect without trailing slash
RewriteRule ^ /%1 [L,R=301] 
```

这不应该与跟随它的重定向规则冲突，因为它的条件检查完全相反。

* * *

编辑：

要处理 index.html 的事情，您需要更改您拥有的这条规则，即附加尾部斜杠：

```
# Add missing trailing slashes to directories if a matching .html does not exist. 
# If it's a request to a directory. 
RewriteCond %{SCRIPT_FILENAME}/ -d
# And a HTML file does not (!) exist.
RewriteCond %{SCRIPT_FILENAME}.html !-f
# And there is not trailing slash redirect to add it. 
RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L] 
```

至：

```
# Add missing trailing slashes to directories if a matching .html does not exist. 
# If it's a request to a directory. 
RewriteCond %{REQUEST_FILENAME}/ -d
# And a HTML file does not (!) exist.
RewriteCond %{REQUEST_FILENAME}/index.html !-f
# And there is not trailing slash redirect to add it. 
RewriteRule [^/]$ %{REQUEST_URI}/ [R=301,L] 
```

这会在添加尾部斜杠之前检查`index.html`目录中是否**缺少**文件。您*必须*这样做的原因是因为[缺少尾部斜杠时的信息泄露安全问题，如果您没有尾部斜杠，实际上会暴露您的所有目录内容](http://httpd.apache.org/docs/2.2/mod/mod_dir.html#directoryslash)。现在，添加这些规则以在有 时删除尾部斜杠`index.html`：

```
RewriteCond %{REQUEST_FILENAME} -d
# And a HTML file exists.
RewriteCond %{REQUEST_FILENAME}/index.html -f
# And there is a trailing slash redirect to remove it. 
RewriteRule ^(.*?)/$ /$1 [R=301,L] 
```

现在在后面添加这些规则以显式显示`index.html`没有斜杠时（注意`R=301`规则标志中的 no）：

```
RewriteCond %{REQUEST_FILENAME} -d
# And a HTML file exists.
RewriteCond %{REQUEST_FILENAME}/index.html -f
# And there is no trailing slash show the index.html. 
RewriteRule [^/]$ %{REQUEST_URI}/index.html [L] 
```

# android - 将我的 Android 的 XML 设置为具有中央内容区域 + 顶部和底部数据

> ID：13235184
> 
> 赞同：0
> 
> 时间：2012-11-05T15:27:18.853
> 
> 标签：android, xml, android-layout

我有 4 行数据。

```
<text input>
<content area>
<option row 1>
<option row 2> 
```

他们看起来是对的，但是当我尝试设置它的高度时，它将无法正常工作并将其下方的东西推离可见区域。我试图做一个线性布局，我想也许可以使用 GridLayout 或 A relativeLayout。

你怎么看？我只是在尝试 GridLayout 并且它提供了错误，因为我的目标 api/版本。

或多或少我正在尝试做这样的事情：

```
--------------------------------------
|             text input             |
--------------------------------------
|                                    |
|                                    |
|                                    |
|                                    |
|              View                  |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
--------------------------------------
|               Options 1            |
|                                    |
--------------------------------------
|                Options 2           |
|                                    |
-------------------------------------- 
```

但是当我写它时，它会做：

```
--------------------------------------
|             text input             |
--------------------------------------
|                                    |
|                                    |
|                                    |
|                                    |
|              View                  |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
-------------------------------------- 
```

**编辑：不小心删除了 XML 文件，将不得不重建。几天内不会完成，因为有一个任务刚刚进入高优先级。**

# python - numpy数组的小数部分

> ID：13235187
> 
> 赞同：3
> 
> 时间：2012-11-05T15:27:21.750
> 
> 标签：python, numpy, python-2.7

我只需要获取数组的小数部分。使用 numpy 或简单地使用 python modf 函数很方便。

如果我们的正小数数据数组很大，例如可以大到 (1000000,3)，那么更方便的是：

```
numpy.modf(array)[0]  
array-numpy.trunc(array) 
```

在我看来，2 在内存使用方面更快、更便宜……但不确定。python 和 numpy 专家怎么看？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:40:10.490

我不是专家，所以我必须使用`timeit`模块来检查速度。我使用 IPython（这使得计时事情变得非常容易）但即使没有它，`timeit`模块也可能是要走的路。

```
In [21]: a = numpy.random.random((10**6, 3))

In [22]: timeit numpy.modf(a)[0]
10 loops, best of 3: 90.1 ms per loop

In [23]: timeit a-numpy.trunc(a)
10 loops, best of 3: 135 ms per loop

In [24]: timeit numpy.mod(a, 1.0)
10 loops, best of 3: 68.3 ms per loop

In [25]: timeit a % 1.0
10 loops, best of 3: 68.1 ms per loop 
```

最后两个是等价的。我对内存使用知之甚少，但如果两者都没有使用比直接使用 mod 更多的内存，我会感到`modf(a)[0]`惊讶`a-numpy.trunc(a)`。

[顺便说一句，如果您的代码执行您想要的操作并且您只对改进感兴趣，那么您可能对[codereview stackexchange](http://codereview.stackexchange.com)感兴趣。分界线在哪里我还不太清楚，但感觉更像是他们的那杯茶。]

# excel - 如何确定excel文件的字符编码？

> ID：13235189
> 
> 赞同：36
> 
> 时间：2012-11-05T15:27:26.060
> 
> 标签：excel, character-encoding

> **可能重复：**
> [使用 UTF8 编码的 Excel 到 CSV](https://stackoverflow.com/questions/4221176/excel-to-csv-with-utf8-encoding)

场景：我有一个包含大量全球客户数据的 excel 文件。我不知道创建文件时使用了什么编码。

问题：如何确定 excel 文件中使用的字符编码，以便将其正确导入到另一个软件中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T19:49:21.737

对于 Excel 2010，它应该是 UTF-8。MS 指导： http:
[//msdn.microsoft.com/en-us/library/bb507946](http://msdn.microsoft.com/en-us/library/bb507946)：

“SpreadsheetML 文档的基本文档结构由 Sheets 和 Sheet 元素组成，它们引用工作簿中的工作表。为每个工作表创建一个单独的 XML 文件。例如，具有两个工作表名称 MySheet1 和MySheet2 位于 Workbook.xml 文件中，如下代码示例所示。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
<workbook xmlns=http://schemas.openxmlformats.org/spreadsheetml/2006/main xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">
    <sheets>
        <sheet name="MySheet1" sheetId="1" r:id="rId1" /> 
        <sheet name="MySheet2" sheetId="2" r:id="rId2" /> 
    </sheets>
</workbook> 
```

工作表 XML 文件包含一个或多个块级元素，例如 SheetData。sheetData 表示单元格表并包含一个或多个 Row 元素。一行包含一个或多个 Cell 元素。每个单元格都包含一个代表单元格值的 CellValue 元素。例如，工作簿中第一个工作表的 SpreadsheetML（在单元格 A1 中只有值 100）位于 Sheet1.xml 文件中，如下面的代码示例所示。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
    <sheetData>
        <row r="1">
            <c r="A1">
                <v>100</v> 
            </c>
        </row>
    </sheetData>
</worksheet> 
```

"

检测细胞编码：

[https://metacpan.org/pod/Spreadsheet::ParseExcel::Cell](https://metacpan.org/pod/Spreadsheet::ParseExcel::Cell)

[http://forums.asp.net/t/1608228.aspx/1](http://forums.asp.net/t/1608228.aspx/1)

# c# - 实体框架预生成的自定义查询视图

> ID：13235190
> 
> 赞同：0
> 
> 时间：2012-11-05T15:27:31.183
> 
> 标签：c#, wpf, entity-framework

我有以下数据结构 EntityObject (Unit, Product, ...) 1 : 1 Translation 1:n Translation Items。

要填充 ComboBoxes 和 listViews 我只需要以这种方式查询翻译：

```
 public CollectionViewSource GetShowColumns()
    {
        CollectionViewSource result = new CollectionViewSource();
        List<UnitDTO> units = new List<UnitDTO>();
        var qry = from x in _context.Units
                  select new
                  {
                      x.Name,
                      x.Name.Translations,
                      x.Id
                  };

        foreach (var temp in qry)
        {
            units.Add(new UnitDTO() { Id = temp.Id, Name = temp.Name });
        }
        result.Source = units;
        return result;
    } 
```

我的 DTO 对象包含一个 Id 和 Translation 属性。

我已经使用[EF Power Tools](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)来生成视图。但是我仍然遇到冷热查询之间的巨大差异。

我该怎么办 ？

# java - MySQL - 如何使用正确的时区存储时间？（来自Java）

> ID：13235191
> 
> 赞同：3
> 
> 时间：2012-11-05T15:27:41.787
> 
> 标签：java, mysql, datetime, timezone, timestamp

我正在使用 MySQL 5.0。我需要将日期时间信息存储在一列中。我的意思是使用`DATETIME`或`TIMESTAMP`列类型。但是我对夏冬时间的变化有疑问。

我的时区是 CET。夏季我们使用夏令时（CEST，GMT+2），冬季我们使用冬季时间（CET，GMT+1）。在夏令时变为冬令时的那一天（今年 2012 年是 10 月 28 日）我们有两次凌晨 2:00 的时间。这一天的时间顺序是：

```
... -> 1:00 CEST -> 2:00 CEST -> 2:00 CET (= 3:00 CEST) -> 3:00 CET -> ... 
```

因此，如果我有时间戳/日期时间 '2012-10-28 02:00:00' 我无法正确地说出这个时间是代表夏季时间还是冬季时间凌晨 2:00。

我有两个不同的 Java 日期：

```
Date d1 = new Date(1351382400000); // 2:00 CEST (summer-time)
Date d2 = new Date(1351386000000); // 2:00 CET (winter-time) 
```

当我使用标准时间戳/日期时间格式（即`'yyyy-MM-dd HH:mm:ss'`）将它们存储在数据库中时，它们都存储相同的数据“2012-10-28 02:00:00”。但是当我从数据库中将这些值返回到日期变量中时，我得到了两个相同的日期。所以输入日期不同但输出日期相同。
如果我使用该`FROM_UNIXTIME`函数存储日期值，也会发生同样的情况：`FROM_UNIXTIME(1351382400)`和`FROM_UNIXTIME(1351386000)`. 值作为相等值存储在数据库列（DATETIME 或 TIMESTAMP 类型）中。因此，当我将这些值放入 Java 的 Date 对象中时，我会再次获得两个相等的日期（在冬季）。

有没有办法将时区存储在 MySQL 中，或者如何处理 DATETIME/TIMESTAMP 列中的时区信息？
当然，我可以使用 unix-timestamp 将 BIGINT 值存储在数据库中。但我想知道是否有任何方法可以解决任何 MySQL 日期时间类型的问题。

任何帮助或技巧表示赞赏...... :)

非常感谢。

Honza (sporak)

**编辑#1：**
如果我尝试存储时间戳值，然后将此时间戳值提取到 java 的日期中，我会再次得到错误的日期。假设我有一个带有 TIMESTAMP 列的简单表。我以这种方式将数据存储在此表中：

```
mysql> INSERT INTO `tab` (timestamp_column) VALUES 
          (FROM_UNIXTIME(1351382400)),  // 2:00 CEST (summer-time)
          (FROM_UNIXTIME(1351386000));  // 2:00 CET (winter-time)
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0 
```

当我将这些行提取到 java Date 对象中时，我得到两个相同的日期，显示 2:00 CET。更重要的是 - 当我在 MySQL 中获取这些行时，我在 MySQL 中再次得到错误的值：

```
mysql> SELECT UNIX_TIMESTAMP(timestamp_column) from tab;
+--------------------+
| UNIX_TIMESTAMP(ts) |
+--------------------+
|         1351386000 | 
|         1351386000 | 
+--------------------+
2 rows in set (0.00 sec) 
```

所以 TIMESTAMP 在我看来没什么用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:30:26.080

在我看来，你最好的选择是告诉 MySQL 使用 GMT 并在你的应用程序代码中处理所有本地时间问题，而不是你的数据库。数据库中的值始终是 GMT，句号，这是明确的。正如您所说，通过夏令时（夏令时）调整，您最终可以在数据库中获得相同的值，对于我们人类来说，这是两个不同的时间。

这也使数据库具有可移植性。如果您搬到北美并开始使用设置为（例如）中央时间的 MySQL，突然之间，您的数据库中的值似乎已经移动了几个小时。我继承的数据库使用服务器的本地时间时遇到了这个问题：当我将它从美国东海岸移动到西海岸时，没有考虑检查 MySQL 是否设置为使用机器的区域......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:56:30.427

`DATE`, `TIME`,`YEAR`和`DATETIME`都存储各自的日期/时间*指示*，就像拍摄日历和/或钟面的照片一样：它们不记录设置时钟的时区，因此它们不代表任何特定的时刻。它们对于发生在特定*本地*日期或特定*本地*时间（即不考虑时区）的事件很有用。

`TIMESTAMP`存储 UTC 时间戳（自 UNIX 纪元以来的秒数），[`time_zone`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_time_zone)根据需要执行与会话的转换：它表示精确、明确的时刻。这就是你想要的；只要确保适当地设置您的会话变量（使用`SET SESSION time_zone = ...`）。

有关更多信息，请参阅[MySQL 服务器时区支持](http://dev.mysql.com/doc/en/time-zone-support.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:22:12.470

*您可以在存储到数据库之前*将日期转换为 UTC ，然后在从数据库中读取时转换回您自己的时区。

```
long t = 1351382400000; // the timestamp in UTC
String insert = "INSERT INTO my_table (timestamp) VALUES (?)";
PreparedStatement stmt = db.prepareStatement(insert);
java.sql.Timestamp date = new Timestamp(t);
stmt.setTimestamp(1, date);
stmt.executeUpdate();

.....

TimeZone timezone = TimeZone.getTimeZone("MyTimeZoneId");
Calendar cal = java.util.Calendar.getInstance(timezone);
String select = "SELECT timestamp FROM my_table";
// some code omitted....
ResultSet rs = stmt.executeQuery();
while (rs.next()) {
   java.sql.Timestamp ts = rs.getTimestamp(1);
   cal.setTimeInMillis(ts.getTime());
   System.out.println("date in db: " + cal.getTime());
} 
```

# vb.net - Me.FormClosing 适用于某些表单，但不适用于其他表单

> ID：13235192
> 
> 赞同：1
> 
> 时间：2012-11-05T15:27:52.177
> 
> 标签：vb.net, winforms

我希望在我的代码中处理单击表单右上角的红色 X 的情况。为此，我[对此](http://www.vbdotnetforums.com/windows-forms/29303-how-code-close-button-form.html)进行了咨询并创建了一个事件处理程序：-

```
Private Sub DoFoo (sender As System.Object, e As System.EventArgs) _
                   Handles Me.FormClosing
    ' Do things
End Sub 
```

但我发现（通过设置断点）在某些表单上单击红色 X 时不会调用此事件处理程序，而在其他表单上是。这些表单都是 System.Windows.Forms.Form 类型，但在大多数方面自然是不同的。有谁知道这可能是什么原因以及如何处理？

**编辑**

在回答 Vitor 的问题时，创建了不起作用的表单：-

```
If my_form Is Nothing Then
    my_form = New MyForm(parameters)
    my_form.Title = "Contour Plot Options"
Else
    my_form.BringToFront
End If

my_form.Show 
```

那些行为符合预期的人是这样创建的：-

```
If my_working_form Is Nothing Then
    my_working_form = New MyWorkingForm
End If

my_working_form.Show 
```

我在任何地方都看不到`Visible`要设置或清除的任何属性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:46:59.927

你的参数不太对。FormClosing 事件有一个 FormClosingEventArgs 参数：

```
Private Sub DoFoo(ByVal sender As Object, ByVal e As FormClosingEventArgs) _
                  Handles Me.FormClosing
    If (e.CloseReason = CloseReason.UserClosing) Then

    End If
End Sub 
```

您可以检查属性“CloseReason”的 e 变量，该变量将包括一个 UserClosing 枚举，这意味着用户关闭了表单。

每个表单都应该处理自己的 FormClosing 事件。而不是订阅该事件，我发现像这样覆盖它更好：

```
Protected Overrides Sub OnFormClosing(ByVal e As FormClosingEventArgs)
  If (e.CloseReason = CloseReason.UserClosing) Then

  End If
  MyBase.OnFormClosing(e)
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T23:12:39.420

如果您正在实例化您的表单，您需要记住`AddHandler`要订阅的事件。

```
my_form = New MyForm(parameters)
my_form.Title = "Contour Plot Options"
AddHandler my_form.Closing, AddressOf MyForm_Closing

'...

Sub MyForm_Closing(s As Object, ByVal e As FormClosingEventArgs)
   '...
End Sub 
```

当然，为了避免内存泄漏，你应该这样做：

```
'global code
Private myFormClosingEventHandler As FormClosedEventHandler = Nothing
'...

Private Sub CreateForm
    my_form = New MyForm(parameters)
    my_form.Title = "Contour Plot Options"

    myFormClosingEvent = New FormClosedEventHandler(AddressOf MyForm_Closing)
    AddHandler my_form.Closing, myFormClosingEventHandler
    '...
End Sub

Sub MyForm_Closing(s As Object, ByVal e As FormClosingEventArgs)
    RemoveHandler my_form.Closing, myFormClosingEventHandler
   '...
End Sub 
```

或者，您可以通过在课堂上执行此操作来为您预先初始化所有内容：

```
Private WithEvents my_form1 As Form = New Form()
Private WithEvents my_form2 As Form = New Form()
'... etc. 
```

现在您可以像往常一样使用 Handle 关键字添加代码处理程序，而无需使用`AddHandler`and `RemoveHandler`。

```
Protected Sub my_form1_Closing(s as object, e as FormClosingEventArgs) _
    Handles my_form1.Closing
    '...
End Sub 
```

# ios - 解除 UIPrintInteractionController

> ID：13235194
> 
> 赞同：37
> 
> 时间：2012-11-05T15:27:57.707
> 
> 标签：ios, ipad, uiprintinteractioncntrler

我正在使用`UIPrintInteractionController`从矩形呈现它。

```
UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];
// than set printing settings
...
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    [controller presentFromRect:rect inView:view animated:YES completionHandler:completionHandler]; 
```

比我设置页数（>1）并选择打印机。在设备旋转之前我打电话

`[controller dismissAnimated:animated];`

根据 Xcode 文档：`You should dismiss the printing options when they are presented in a sheet or animated from a rectangle and the user changes the orientation of the device.`

当我`UIPrintInteractionController`在旋转后呈现时，打印份数设置回 1（如在初始视图中），而打印机保持选中状态。UIPrintInfo 的 Ivar _copies 是私有的，因此我无法在轮换期间获取并存储它。

旋转后如何恢复打印页数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T08:05:33.770

抱歉，这似乎是一个明显的问题，但您是否将其称为代表？

```
UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];
controller.delegate = self; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-08T04:56:02.457

```
[printInfo setValue:[NSNumber numberWithInteger:numberFile] forKey:@"copies"] 
```

您可以设置和设置`@"copies"`UIPrintInfo

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-10-09T09:51:03.193

```
- (void)printImage:(id)sender {
  // Obtain the shared UIPrintInteractionController
  UIPrintInteractionController *controller = [UIPrintInteractionController sharedPrintController];
  if(!controller){
    NSLog(@"Couldn't get shared UIPrintInteractionController!");
    return;
  }

  // We need a completion handler block for printing.
  UIPrintInteractionCompletionHandler completionHandler = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
    if(completed && error)
      NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
  };

      // Obtain a printInfo so that we can set our printing defaults.
    for(int i=0;i<[paths count];i++)
    {
        NSString *strFilePath = [paths objectAtIndex:i];
        NSLog(@"@ strFilePath is %@", strFilePath);
        NSData *data = [NSData dataWithContentsOfFile:strFilePath];
        if(data)
        {
            image = [UIImage imageWithData:data];
           // [arrayOfImages addObject:image];
               NSLog(@"@ image is %@", image);
            UIPrintInfo *printInfo = [UIPrintInfo printInfo];

            // This application prints photos. UIKit will pick a paper size and print
            // quality appropriate for this content type.
            printInfo.outputType = UIPrintInfoOutputPhoto;
            // The path to the image may or may not be a good name for our print job

            printInfo.jobName = @"PNg";
            NSLog(@"@ imageURL is %@",  printInfo.jobName);
            //  printInfo.jobName

            if(!controller.printingItems && image.size.width > image.size.height)
                printInfo.orientation = UIPrintInfoOrientationLandscape;

            // Use this printInfo for this print job.
            controller.printInfo = printInfo;

            controller.printingItems = nil;

        }
    }

#if DIRECT_SUBMISSION
  // Use the URL of the image asset.
    if(self.imageURL && [UIPrintInteractionController canPrintURL:self.imageURL])
      controller.printingItem = self.imageURL;
#endif

  // If we aren't doing direct submission of the image or for some reason we don't
  // have an ALAsset or URL for our image, we'll draw it instead.
  if(!controller.printingItems){
    // Create an instance of our PrintPhotoPageRenderer class for use as the
    // printPageRenderer for the print job.
    PrintPhotoPageRenderer *pageRenderer = [[PrintPhotoPageRenderer alloc]init];

    pageRenderer.imageToPrint = image;
    controller.printPageRenderer = pageRenderer;
    [pageRenderer release];
  }

  if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    [controller presentFromBarButtonItem:self.printButton animated:YES completionHandler:completionHandler];  // iPad
  }else
    [controller presentAnimated:YES completionHandler:completionHandler];  // iPhone

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-22T13:24:46.870

如果我理解正确，您真正需要的是如何在方向更改之前和之后运行代码：

迅速：

```
override func viewWillTransition(to size: CGSize, with coordinator: UIViewControllerTransitionCoordinator) {
    super.viewWillTransition(to: size, with: coordinator)

    //code goes here to run before orientation change 

    coordinator.animate(alongsideTransition: nil, completion: {
        _ in

        //code goes here to run after orientation change 
    })

} 
```

[对象 C 文档：](https://developer.apple.com/documentation/uikit/uicontentcontainer/1621466-viewwilltransitiontosize?language=objc)

# rest - 更新/创建分层资源 REST

> ID：13235201
> 
> 赞同：21
> 
> 时间：2012-11-05T15:28:21.220
> 
> 标签：rest

我正在研究一个`REST API`并且我正在尝试了解如何处理分层资源。

# 背景

让我们从一个简单的例子开始。在我的 API 中，我有**用户**、**用户个人资料**和**评论**。

*   **用户**必须关联一个用户**配置文件**（一个用户配置文件只对应一个用户）
*   **用户**可能有关联的**评论**（评论仅对应一个用户）

用户的资源表示应该是：

```
User: {
   "u1": "u1value", // User's attributes
   "u2": "u2value",
   ...
   "links": [{
       "rel": "profile",
       "href": "http://..." // URI of the profile resource
   }, {
       "rel": "review",
       "href": "http://..." // URI of the review resource
   }]
} 
```

用户配置文件资源表示应该是：

```
UserProfile: {
   "p1": "p1value", // Profile attributes
   "p2": "p2value",
   ...
   "links": [{
       "rel": "owner",
       "href": "http://..." // URI of the user resource
   }]
} 
```

评审资源表示应该是：

```
Review: {
   "r1": "r1value", // Review attributes
   "r2": "r2value",
   ...
   "links": [{
       "rel": "owner",
       "href": "http://..." // URI of the user resource
   }]
} 
```

资源 URI 可以是：

*   `http://api.example.com/users/{userid}`: 访问用户资源
*   `http://api.example.com/users/{userid}/profile`：访问用户的个人资料资源
*   `http://api.example.com/users/{userid}/review`: 访问用户的评论资源

# 资源创建：创建用户的正确方法是什么？

现在我想创建一个新用户：

1.  `POST http://api.example.com/users {"u1": "bar", "u2": "foo"}`我取回了新的用户 ID = 42
2.  `POST http://api.example.com/users/42/profile {"p1": "baz", "p2": "asd"}`
3.  `PUT http://api.example.com/users {"u1": "bar", "u2": "foo", links: [{"rel": "profile", "href": "http://api.example.com/users/42/profile"]}`

我的担忧：

*   如果在 1 和 2 或 2 和 3 之间出现中断怎么办？
*   在 3) 中，服务器是否应该自动更新[http://api.example.com/users/42/profile](http://api.example.com/users/42/profile)中的链接以指向正确的所有者？
*   更新链接字段是创建关系的正确方式吗？还是应该跳过第 3 步）让系统根据 URI 约定猜测关系？（我在几本书上读到 URI 应该被认为是不透明的。）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-02T02:02:33.117

您的担忧是正确的，并且您的问题清单是正确的。如果我可以建议，您的方法看起来非常像您正在使用关系数据库方法并且正在执行 INSERT，从用于下一个 INSERT 的序列中检索 PK，等等。

**让服务器保持参照完整性**

作为观察，即使遵循您的原始方案，也**完全省略第 3 步**。检索用户文档时可见的 URI`links`应由服务器根据配置文件记录的存在生成。

例如，如果使用关系后端，则从 USERS 中选择以获取用户记录。接下来，您从 PROFILES 中选择。如果有记录，则修改返回数据结构以包含引用。

**发布整个文件**

解决您提出的其他问题的常用方法是允许将*整个文档*发布到用户 URL（如 NoSQL 数据库，如[MongoDB](http://www.mongodb.org)）。这里的文档是用户*和*个人资料：

```
{ 
   "u1": "bar",
   "u2": "foo",
   "profile": {  
                 "p1": "baz",
                 "p2": "asd"
              }
} 
```

在这种方法中，服务器上的端点接收嵌套结构（文档）并执行 INSERT 到 USERS，检索 PK，然后使用此 PK 执行 INSERT 到 PROFILES。在服务器端这样做可以解决几个问题：

1.  事务可以是原子的
2.  客户端和服务器之间只有一个网络交换
3.  服务器完成繁重的工作并可以验证整个交易（例如，如果配置文件无效，则不会创建用户）
4.  不需要第 3 步。

请注意，这种方法是对上面详述的 API*的补充*——您仍然希望能够直接访问用户的个人资料。

**GET - 客户端可以指定字段**

与知名公司的 API 进行比较很有趣。以[领英](http://www.linkedin.com)为例。在他们的[开发者 API](https://developer.linkedin.com/documents/profile-api)中，用户的默认 GET 只返回用户名、标题和 URI。

但是，如果请求指定了其他字段，您可以获得嵌套数据，例如[http://developer.linkedin.com/documents/understanding-field-selectors](http://developer.linkedin.com/documents/understanding-field-selectors)中的第二个示例返回用户名和职位的公司名称列表他们举行了。您可以为配置文件和评论实施类似的方案。

**用于更新文档属性的补丁**

通过插入和查询，可能值得考虑如何更新（PATCH）数据。覆盖一个字段是显而易见的，所以你可以，例如 PATCH 到[http://api.example.com/users/42](http://api.example.com/users/42)如下：

```
{ 
   "u1": null,
   "u2": "new-foo",
   "profile": {  "p1": "new-baz"}
} 
```

它将取消设置`u1`，设置`u2`为`new-foo`并将配置文件更新`p1`为`new-baz`. 请注意，如果缺少字段 ( `p2`)，则不会修改该字段。PATCH 比旧的 PUT 更可取，如[本答案](https://stackoverflow.com/a/9496462/1395668)中所述。

如果您只需要更新配置文件，请将新的配置文件记录直接 PATCH 到[http://api.example.com/users/42/profile](http://api.example.com/users/42/profile)

**DELETE 应该级联**

最后，删除可以使用指向要删除的资源的 DELETE 方法来完成 - 无论是用户、个人资料还是评论。实施级联删除，以便删除用户删除他/她的个人资料和评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T10:49:32.447

您应该坚持[HATEOAS](https://en.wikipedia.org/wiki/HATEOAS)，并取消引用您在回复中获得的 URL：

为了便于访问，假设`User.profile`包含with 。`href``link``rel == profile`

# 创建用户

使用您描述的 POST ......但它不应该返回一个 ID，而是一个用户，并带有它的链接。

```
User: {
   "u1": "bar", // User's attributes
   "u2": "foo",
   ...
   "profile": "http://api.example.com/users/42/profile",
   "links": [{
       "rel": "profile",
       "href": "http://api.example.com/users/42/profile"
   },
   ...
   ]
} 
```

此时，User.profile 中的配置文件资源（可能是`http://api.example.com/users/42/profile`，或您将来迁移到的任何位置）是默认配置文件应该是的任何内容，例如空文档或仅填充所有者链接。

# 更新个人资料

```
profile = GET User.profile
profile.p1 = "baz"
profile.p2 = "asd"
PUT profile to the same url you just dereferenced 
```

通过取消引用文档上的 href，而不是使用您从响应中获得的 id 构建 url，您的客户端将不必在 API 更改时进行更改。就像当 - 配置文件移动到[http://profiles.cdn.example.com/](http://profiles.cdn.example.com/) - 配置文件获得 p3 值

“旧” API 客户端将继续工作，而无需更改任何代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T06:56:56.927

实际上，从成功的步骤 (1) 开始，您应该获得 HTTP 代码 201 Created 和新创建资源的地址 (URL)，而不仅仅是 ID 号。如果步骤 (2) 失败，您的 REST API 应指示问题出在客户端，例如格式错误的文档（问题代码 4xx）或服务器（5xx）。例如，如果同时删除了资源 42，则应返回代码 404 Not Found。

这就是无状态 REST API 的问题——它们不能支持由多个请求组成的事务。为此，您必须在服务器上维护一个会话（状态）。

顺便说一句，您示例中步骤 (3) 中的 URL 表明您正在替换所有用户，并且可能应该阅读[http://api.example.com/users/42](http://api.example.com/users/42)。

您可以选择一次提交完整的用户+配置文件以在一个原子事务中拆分为两个数据库记录，或者允许部分用户数据的持久性，即没有配置文件的用户。

选择取决于上下文。例如，用户没有配置文件可能完全没问题（因此它可以由用户提供）。相反，拥有不属于任何用户的个人资料记录可能是不可接受的。关于强制执行此逻辑的讨论超出了您的问题范围，并且会因您选择的持久存储（数据库）的类型而异。关系数据库使用外键强制执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:16:55.147

我相信你的电话应该是这样的

1）创建用户

```
POST http://api.example.com/users + params in payload 
```

如果它返回 HTTP 201 + 用户 ID，那么您可以继续创建配置文件。否则，您可以按照自己的方式处理异常。在开始创建配置文件之前，您应该等待第一个呼叫返回。

2) 创建与用户 42 关联的配置文件（如果用户创建正常）

```
POST http://api.example.com/users/42/profile + params in payload 
```

返回 HTTP 201 + 配置文件 ID

您的后端将负责更新您的用户对象和配置文件对象（以及您的数据库），以便将用户 42 链接到新配置文件。如果后端无法链接对象，您可以发回 500 错误来解释发生了什么。

所以在我看来，我会跳过第 3 步。

现在我明白你的意思是用户**必须**有个人资料

我看到了 2 个解决方案

1）您可以在创建用户时创建一个空的关联配置文件。然后通过查询用户，您可以获得配置文件 ID 并使用 PUT 修改它（我真的不喜欢这个解决方案，因为当您要求您的 api 创建用户时，它应该只创建一个用户，而不是其他任何东西，但实际上是profile 是强制性的，它不像看起来那么难看）。

2）您可以在您的用户中拥有一个属性，说明用户是否正确（意味着他有相关的个人资料）。在创建过程结束时，如果您的用户 42 不正确，您可以将其删除或重试配置文件创建...然后您可以仅使用 /users?isCorrect=true 之类的内容查询正确的用户

3）让客户将用户视为没有个人资料的事实 - >显示一个弹出窗口以要求创建个人资料......

查看此[文档](http://info.apigee.com/Portals/62317/docs/web%20api.pdf)以了解 REST API 最佳实践

也许你也可以看看[HAL](http://stateless.co/hal_specification.html)，它试图处理对象之间的关系。

最后但并非最不重要的一点是，您可以关注[api-craft google group](https://groups.google.com/forum/?fromgroups#!forum/api-craft)，您可能会在那里找到与您的问题相关的有趣主题。

# javascript - 在 IE 中带有标签中断的jQuery Ajax JSON 响应

> ID：13235202
> 
> 赞同：0
> 
> 时间：2012-11-05T15:28:25.473
> 
> 标签：javascript, jquery, ajax, internet-explorer, xhtml

我在使用 IE 时遇到了问题（我正在 IE9 中进行测试，但我相信它在以前的版本中也会以相同的方式运行）。

我从 PHP 发送的响应如下：

```
{"success":true,"content":"<img src=\"\/media\/page\/1528484482.jpg\" width=\"140\" height=\"140\" alt=\"1528484482.jpg\" \/>"} 
```

它在 Firefox、Chrome、Safari、Opera 等中运行良好 - 但在 IE 中无法运行。响应是一个空对象。

当我将响应更改为以下内容时，它可以正常工作 - 唯一的区别是关闭 img 标签之前的正斜杠：

```
{"success":true,"content":"<img src=\"\/media\/page\/1528484482.jpg\" width=\"140\" height=\"140\" alt=\"1528484482.jpg\">"} 
```

有什么方法可以解析“内容”响应，使其不会在 IE 中中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:22:21.010

（这是一个建议，而不是一个解决方案）分离表示层（js/html [how]）和域层（php [what]）。

领域层决定返回什么数据。表示层决定数据将如何呈现。

返回图片路径，让表现层决定如何向用户展示图片。

* * *

现在您的问题的解决方案将在文档类型的声明上。我想问题在于没有声明文档类型，而 IE 将 XHMTL 作为其默认文档类型。
在 XHTML 中，标签必须正确关闭。 [http://www.w3schools.com/tags/tag_img.asp](http://www.w3schools.com/tags/tag_img.asp)

我想其余的浏览器采用 HTML5，并且它不需要图像上的结束标记。

# javascript - 在扩展 div 中加载内容时将哈希/子页面附加到 URL

> ID：13235204
> 
> 赞同：0
> 
> 时间：2012-11-05T15:28:31.300
> 
> 标签：javascript, jquery, html, animation, load

我正在使用以下代码在 div 中加载单独的 .html 文档：

JS

```
 $('.thumbnail').click(function() {
 var idStr = ("project/"+$(this).attr('id')) + " #projectcontainer";

     $('#projectcontainer').animate({opacity:0});
     $('#projectcontainer').hide().load(idStr,function(){

                $(this).slideDown(500).animate({opacity:1}, function() {
                                    $.scrollTo('#gohere',800);
                    $('#close').fadeIn(500).css({'display': 'block', 'height': '25px'});

                });
    });
 }); 
```

HTML

```
<div class="thumbnail" id="atmotype.html">
<img src="image.whatever">
</div> 
```

这一切都按预期工作，但我还想在您打开项目时附加一个 ID，并且还能够直接链接到所述内容（已经在 div 中展开）。我一直在尝试，但无法提出解决方案，据说我对 JS 的总体感觉很糟糕。

如果有人能告诉我这是如何工作的，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:36:55.547

现在，当您单击`.thumbnail`元素时，它正在触发您的`click()`事件并`$(this).attr('id')`用于哈希/滚动。要使其在页面加载时运行，您可能应该将其拆分为一个单独的函数，该函数将 ID 作为参数，然后从您的`click()`事件中调用此函数以及使用 in 中的参数进行通用页面加载`location.hash`。

```
$(document).ready(function(){
    if (location.hash.length>0){
        /* this assumes the page to load is the only thing in the 
           hash, for example /page.php#project.html */
        var hash = location.hash.substring(1); // get hash and remove #
        addHashAndScroll(hash);                // call function with page name
    }
    $('.thumbnail').click(function() {
        addHashAndScroll($(this).attr('id'));  // pass ID value to function
    });
}

// this function contains most of your original script
function addHashAndScroll(id){
    var idStr = "project/"+ id + "#projectcontainer";
    // rest of your code
} 
```

更新：这是关于 js 的事情，在解释时它都是有道理的，但执行它是个婊子。无论如何，非常感谢您的帮助。根据您的解释，我得到的是：

```
$(document).ready(function() {
    if (location.hash.length > 0) {
/* this assumes the page to load is the only thing in the 
           hash, for example /page.php#project.html */
        var hash = location.hash.substring(1); // get hash and remove #
        addHashAndScroll(hash); // call function with page name
    }
    $('.thumbnail').click(function() {
        addHashAndScroll($(this).attr('id')); // pass ID value to function
    });
}

// this function contains most of your original script

function addHashAndScroll(id) {
    var idStr = "project/" + id + "#projectcontainer";
    $('#projectcontainer').animate({
        opacity: 0
    });
    $('#projectcontainer').hide().load(idStr, function() {

        $(this).slideDown(500).animate({
            opacity: 1
        }, function() {
            $.scrollTo('#gohere', 800);
            $('#close').fadeIn(500).css({
                'display': 'block',
                'height': '25px'
            });

        });
    });
    } 
```

我试图摆弄闭包和我在错误测试 js 方面的任何最小经验，但我不断收到来自这一行的错误：function addHashAndScroll(id) {

# java - android textview 变量

> ID：13235205
> 
> 赞同：1
> 
> 时间：2012-11-05T15:28:32.243
> 
> 标签：java, android, variables, textview

您好，很抱歉我的问题，我学习 Java，现在我正在为 android 构建一个测试程序。

```
int a = 10; 
```

我用java：`System.out.println(a);`这很完美。

通过android我不能使用`setText(a);`？

我需要将变量转换为字符串吗？

谢谢！

波尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:47:31.343

您应该先阅读[TextView](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)的 Api 文档，然后您将了解在方法中传递整数值的含义`setText()`。

`setText()`是一个重载的方法。

如果我们传递整数值，它将考虑我们在值 xml 文件（例如 string.xml）中声明的资源 id，因此如果您传递整数值，它将尝试找到与我们传递的给定整数相关的资源 id，它找不到与给定整数匹配的此类资源并且应用程序崩溃。

希望你现在明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:31:33.460

使用[String.valueOf()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#valueOf%28int%29)将整数值转换为 String：

```
int a=10;

text_Rate.setText(String.valueOf(a)); 
```

或者您可以添加`""`Integer 以在 TextView 中显示整数值：

```
int a=10;

text_Rate.setText(""+a); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:35:31.690

`System.out.println()`可以将 String 除外作为参数。但是`setText()`只接受一个字符串作为参数。因此，如果您想将数字显示为字符串，您可以使用该`String.valueOf()`方法。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:58:00.910

您需要在 上给出`String`as 参数`setText()`，因为`a`is an `int`。`System.out.println()`接受一切，因为重载方法之一是`System.out.println(Object)`，但`setText()`没有。您可以使用`String.valueOf(a)`或仅使用`setText("" + a)`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T15:31:54.660

您需要将 int 转换为 String 对象

```
String s = Integer.toString(a);
view.setText(s); 
```

# actionscript-3 - Actionscript 对象颜色变化/色调

> ID：13235215
> 
> 赞同：1
> 
> 时间：2012-11-05T15:29:09.380
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, colors

我是 Actionscript 的新手，我需要帮助更改被调用的对象`add child`的颜色，一旦用户从组合框中选择了所需的颜色，我需要更改颜色：

```
//MY CODE

if (e.target.value == "blue")

{

//need to change to this (0x0000FF)

//enter code here

} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:56:43.813

尝试使用颜色变换对象。

```
var redAmount:Number = 0;
var greenAmount:Number = 0;
var blueAmount:Number = 1;
var alphaAmount:Number = 1;
var redOffset:Number = 0;
var greenOffset:Number = 0;
var blueOffset:Number = 0;
var alphaOffset:Number = 0;
yourDisplayObject.transform.colorTransform = new ColorTransform(redAmount, greenAmount, blueAmount, alphaAmount, redOffset, greeenOffset, blueOffset, alphaOffset); 
```

前四个变量是乘数——它们将采用现有的颜色值并对其进行调整，就像乘以该数字一样。因此，要将颜色减少 1/2，请使用 0.5。使黑色全部设置为 0。什么都不改变使全部为 1。

后四个变量将增加或减少所有像素的颜色量。因此，要使颜色达到特定的十六进制值，例如 0xFFCC33，您可以这样做：

```
yourDisplayObject.transform.colorTransform = new ColorTransform(0, 0, 0, 1, 0xFF, 0xCC, 0x33, 0x00); 
```

如果您需要更多帮助，这里是 adobe 文档的链接：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html)

如果您决定要逐渐更改颜色而不是立即更改颜色，请查看 greensock 的 TweenMax。greensock tween 类是广泛使用的动作脚本编程的主力。

要使用 TweenMax 为显示对象着色，代码如下：

```
TweenMax.to(yourDisplayObject, 1, {tint:0x0000FF}); 
```

此类使用该代码对对象应用颜色变换，但它会随着时间逐渐改变值

这是获取 TweenMax 的链接。 [http://www.greensock.com/tweenmax/](http://www.greensock.com/tweenmax/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:14:45.043

这是完成此操作的最容易理解（无论如何我都认为）的方法：

```
if (e.target.value == "blue")
{

    var colorTransform:ColorTransform = yourObject.transform.colorTransform;  //store the current color data for the object
    colorTransform.color = 0x0000FF; //make it totally blue
    yourObject.transform.colorTransform = colorTransform; //now assign it back to the object

} 
```

# ruby-on-rails - 如何调用给定状态的 Ruby gem AASM 转换事件？

> ID：13235216
> 
> 赞同：1
> 
> 时间：2012-11-05T15:29:13.450
> 
> 标签：ruby-on-rails, ruby, aasm

我们有一个 Ruby on Rails 应用程序。

我们使用 Ruby 的 aasm gem 来管理对象的状态。

```
has_state
aasm do
    state :created, :initial => true
    state :submitted
    state :rejected
    state :approved

    event :submit do
        transitions :to => :submitted, :from => [:created]
    end

    event :mark_as_incomplete do
        transitions :to => :created, :from => [:submitted]
    end

    event :approve do
        transitions :to => :approved, :from => [:submitted]
    end

    event :reject do
        transitions :to => :rejected, :from => [:submitted]
    end
end 
```

如果我们知道一个对象的当前状态，可以使用

```
object.aasm_current_state 
```

而且我们也知道要转换到的状态，我们如何调用事件？

请注意，from-state 和 to-state 是变量，因此我们需要动态地执行上述操作。当然，对于某些 to-state 和 from-state 组合，转换不可用，在这种情况下，我们应该检测到错误。

我们还假设在任何两个状态组合（to-state 和 from-state）之间，只有 1 个事件，我认为理论上可以有超过 1 个。

我认为这可以通过深入研究 aasm 源代码的内部来实现，可以说这可能不是一个好习惯。有什么想法吗？

只是想知道以前是否有人这样做过。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T08:05:38.873

AASM 没有提供这样做的方法，但是您自己的答案已经足够接近您想去的地方了。AASM 建立在这样的假设之上，即状态机允许从一种状态到另一种状态的多种不同转换。

如果事件名称与您无关，您可以重用目标状态名称作为事件名称，如下所示：

```
aasm do
  ...
  event :approved do
    transitions :from => :submitted, :to => :approved
  end
  ...
end 
```

这样，您只需知道目标状态名称即可触发事件

```
approval_request.send(to_state) 
```

默认情况下，如果不允许此转换，AASM 会引发异常。如果您不喜欢该异常，请设置`whiny_transitions`为`false`，如下所示：

```
aasm :whiny_transitions => false do
   ...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:05:59.483

这是我的代码。to_state 和 from_state 是从和到的状态。

```
ApprovalRequest.aasm_events.each do |event_key, event_obj|
    if event_obj.transitions_from_state?(from_state) &&
        event_obj.transitions_to_state?(to_state)
        self.approval_request.send "#{event_key.to_s}!"
    end
end 
```

对此实施有何评论？

# python - act_window 中的 openerp 上下文

> ID：13235220
> 
> 赞同：6
> 
> 时间：2012-11-05T15:29:25.057
> 
> 标签：python, openerp

在 OpenERP 6.1 中这个 act_window：

```
<act_window
     domain="[('id', '=', student)]"
     id="act_schedule_student"
     name="Student"
     res_model="school.student"
     src_model="school.schedule"/> 
```

**在Schedule**表单中创建一个**Student**按钮，该按钮打开学生树视图，仅显示相应的学生。

 **我的目标是直接打开学生的相应表单视图，而不是带有正确过滤学生的树视图。我尝试添加一个`view_mode="form,tree"`，但它会打开一个新表单，而不是我想要的。我猜这可以通过添加`context`到`act_window`? 也许 a `record_id`，但我试过了，但`active_id`没有用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-05T18:38:28.377

让 OpenERP 操作直接打开给定记录的表单视图的神奇（可能是未记录的）方法是在操作上设置一个额外的`res_id`属性。

不幸的是，在 OpenERP 6.1 ^([1])中，该`res_id`属性不是`act_window`数据模型的一部分，因此无法在 XML 声明中直接设置它。

大多数官方插件使用`<button type="object" ... />`绑定到 Python 方法，该方法`res_id`在返回的操作中设置属性。在官方模块的源代码中很容易找到这方面的例子，你可以[在这个相关问题](https://stackoverflow.com/questions/10671025/osv-methods-return-statement)中看到一个。

**快速/未经测试的示例：**

`school.schedule`你可以在你的表单中添加这个：

```
<button name="open_student_form" type="object" string="Student"/> 
```

以及模型中的以下方法`school.schedule`：

```
def open_student_form(self, cr, uid, ids, context=None):
    this = self.browse(cr, uid, ids, context=context)[0]
    return {
        'type': 'ir.actions.act_window',
        'name': 'Student',
        'view_mode': 'form',
        'view_type': 'form',
        'res_model': 'school.student',
        'nodestroy': 'true',
        'res_id': this.student.id, # assuming the many2one is (mis)named 'student'
        'views': [(False, 'form')],
    } 
```

现在，如果您真的想使用“侧边栏按钮”（即使用`<act_window/>`）来做到这一点，它会变得有点棘手，因为您不能直接将侧边栏按钮绑定到 Python 方法；它必须绑定到存储在数据库中的操作。尽管如此，它仍然是可行的，例如通过一个`ir.actions.server`可以绑定到您`<act_window/>`并调用您的 Python 方法或执行类似操作的操作。诀窍`ir.actions.server`在于它可以定义为 Python 块，可以通过将动作字典分配给`action`变量来返回动态动作定义。如果您想遵循该路径，请在 OpenERP 插件源代码中搜索声明`ir.actions.server`（其中一些可能会做类似的事情）和返回具有`res_id`属性的操作的方法。

^([1])从 OpenERP 7.0 开始，该`res_id`列在数据模型中明确可用，因此您可以直接设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-05T11:55:01.017

试试这个：

您可以自行赋予域。每当学生单击该菜单时，都会触发操作，并将域设置为以下示例代码：

```
<record id="action_id" model="ir.actions.act_window" >
         <field name="name">Sample</field>
         <field name="res_model">model.name</field>
         <field name="view_type">form</field>
         <field name='domain'>[('employee_id.user_id','=',uid)]</field> 
         <field name="context" >{'context_value':True}</field> <!--if required -->
</record> 
```**

# mysql - MySQL Partition BY RANGE 不适用于主键？

> ID：13235221
> 
> 赞同：1
> 
> 时间：2012-11-05T15:29:25.863
> 
> 标签：mysql

Partition BY RANGE 不能应用于主键自增的表吗？我之所以问它是因为看到了一些（[1](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html)、[2](http://vanilla47.com/MySQL%20Docs/mysql-partitioning-excerpt-5.6-en.html-chapter/partitioning-limitations.html)）没有主键定义的 create table 语句示例。而且我的创建表语句也给了我错误：

> PRIMARY KEY 必须包括表的分区函数中的所有列

这是我的声明

```
CREATE TABLE `tbl_point` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `cord_x` double DEFAULT NULL,
   `cord_y` double DEFAULT NULL,
   `angle` int DEFAULT NULL,
   PRIMARY KEY (`id`)
)
PARTITION BY RANGE (angle) (
   PARTITION p0 VALUES LESS THAN (91),
   PARTITION p1 VALUES LESS THAN (181),
   PARTITION p2 VALUES LESS THAN (271),
   PARTITION p3 VALUES LESS THAN (361)
) 
```

还有一个问题：角度柱可以是双类型的吗？因为当我将其设置为 double 时出现此错误：

> PARTITION 函数返回错误的类型

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:38:13.980

第一条错误消息相当明确：

> PRIMARY KEY 必须包括表的分区函数中的所有列

您必须按主键分区，或包含`angle`在主键中

我想你不想要后者，所以前者是解决方案。

至于第二个错误：

> PARTITION 函数返回错误的类型

确实，分区函数（这里的“ `angle`”就是所谓的“函数”，认为它是恒等函数）必须返回一个整数，如[手册中所述](http://dev.mysql.com/doc/refman/5.5/en/partitioning-limitations.html)：

> 分区键必须是整数列或解析为整数的表达式。

# javascript - 在popover外面关闭popover，但里面保持打开

> ID：13235222
> 
> 赞同：3
> 
> 时间：2012-11-05T15:29:28.593
> 
> 标签：javascript, jquery, html, twitter-bootstrap

当您在弹出框外部单击时是否可以关闭引导弹出框，但是当您在弹出框内部单击时它保持打开状态。我知道这已经在[这里](https://stackoverflow.com/questions/11703093/how-to-dismiss-a-twitter-bootstrap-popover-by-clicking-outside)讨论过，但是当您在弹出框内单击时，这个也会关闭。

这是他们的演示：http: [//jsfiddle.net/Sherbrow/e6Gt8/](http://jsfiddle.net/Sherbrow/e6Gt8/)

```
 var $poped = $('.poped');
$poped.popover();

// Trigger for the popover
$poped.each(function() {
    var $this = $(this);
    $this.on('hover',function() {
            var popover = $this.data('popover');
            var shown = popover && popover.tip().is(':visible');
            if(shown) return;        // Avoids flashing
            $this.popover('show');
    });
});

// Trigger for the hiding
 $('html').on('click.popover.data-api',function() {
    $poped.popover('hide');
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:43:58.720

看看[http://jsfiddle.net/VcwUm/](http://jsfiddle.net/VcwUm/)

```
// Trigger for the hiding
$('html').on('click.popover.data-api',function(e) {
     if($(e.target).has('.poped').length == 1){
         $poped.popover('hide');
     } else {
         return false;
     }
}); 
```

我所做的只是检查目标元素是否有一个具有某个类的子元素，以决定我是否应该关闭弹出窗口。

# ios - TextField 子视图未调整大小 w/ UITableViewCell 框架大小更改

> ID：13235223
> 
> 赞同：0
> 
> 时间：2012-11-05T15:29:31.907
> 
> 标签：ios, objective-c, ios6

有一个带有 TableViewController 的故事板，它有一个分组的表格视图。在第一部分，我希望单元格的宽度小于全屏。为了完成后者，我有一个带有以下方法的自定义 UITableViewCell 类：

```
- (void)setFrame:(CGRect)frame {
    frame.origin.x += NAME_TABLE_VIEW_INSET；
    frame.size.width -= NAME_TABLE_VIEW_INSET；
    [超级 setFrame:frame];
}

```

这很好用。我遇到的问题是，我拖入情节提要单元格的 UITextField 子视图不会自动将其宽度调整为新的单元格框架大小。

我尝试对 UITextField 进行子类化并确保正确设置了 autoResizingMask，并且我尝试在上面的 setFrame 方法中使用 [super layoutSubviews]。这些方法都不起作用。

关于如何让文本字段在仍然使用这种情节提要方法的同时自动调整其宽度的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:16:40.193

解决方案是在表视图控制器提供的 tableView 的标题中添加一个单独的表视图。具体来说，在 IB 中的 table view 的顶部添加一个 view 对象；将表视图作为子视图添加到该视图中；更改新表格视图单元格的宽度。

请注意，这个问题的存在只是因为我想使用一个表格视图控制器，它将每个单元格默认为屏幕的宽度。可以使用视图控制器，但是您不能添加带有静态单元格的表格视图作为子视图。

# html - 背景大小问题？

> ID：13235225
> 
> 赞同：0
> 
> 时间：2012-11-05T15:29:36.930
> 
> 标签：html, css

我有一个巨大的背景图像，我需要 100% 100% 的比例。但我的问题是，如果网页是浏览器高度的 150%（所以浏览器是 1000x1000，而我的网站是 1000x1500），当您向下滚动查看网站的其余部分时，背景会重复并且不会缩小.

我的CSS是

```
html,body { width: 100%; height 100%; }
body { background: url(blah) no-repeat; background-size: 100% 100%; } 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:41:21.613

这是关于该主题的一个很好的资源。

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T18:19:20.497

就像 CSS-Tricks 文章解释的那样，您可以将 CSS 更改为：

```
html { 
    background: url(images/background.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

这将确保您的背景图片覆盖整个页面，但仅在 CSS3 中受支持。像上面一样，您需要为每个主要浏览器包含特定的代码。

或者，尝试仅使用：

```
height: 100%; 
```

或者

```
width: 100% 
```

取决于与您的页面相关的图像大小，但这应该让图像调整到页面的正确高度/宽度，同时很好地保持纵横比。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:31:57.220

尝试将背景图像应用于`html`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:32:13.053

如果宽度小于高度，则只需将宽度设置为 100%，否则将高度设置为 100%。您可能可以使用 javascript 来解决这个问题。

# objective-c - NSCopying 和 Objective-C 内存管理

> ID：13235230
> 
> 赞同：0
> 
> 时间：2012-11-05T15:29:58.967
> 
> 标签：objective-c, memory-management, autorelease, nscopying

Apple 的 NSCopying[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCopying_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSCopying)状态`copyWithZone:`返回一个由发件人隐式保留的对象。因此，当将该对象添加到 an`NSMutableArray`时，似乎应该向该对象发送一条`autorelease`消息以保持保留计数平衡（因为数组将保留该对象）。

因此，要将一个数组的内容深度复制到另一个数组，我希望是这样的：

```
NSMutableArray *destination = [NSMutableArray array];

// assume MyObject adopts NSCopying
for (MyObject *obj in myArray) 
    [destination addObject:[[obj copy] autorelease]]; 
```

[但是我在这个答案](https://stackoverflow.com/a/9912913/879664)中注意到了一种不同的方法。似乎`[ret addObject:[val copy]]`是内存泄漏。但是我是新手，`NSCopying`所以我想我会问：**将复制的对象添加到数组时，是否应该向对象发送自动释放消息以保持保留计数平衡？**

**编辑 - 更多信息**：Clang 报告删除自动释放后潜在的内存泄漏。也许链接的答案假定`copy`返回一个*未*由发件人隐式保留的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:34:24.440

是的，它确实需要发布，但我不会`autorelease`在这样的循环中使用，每次迭代都手动执行

```
 for (MyObject *obj in myArray)
    {
        MyObject *copy = [obj copy];
        [destination addObject:copy];
        [copy release];
    } 
```

# android - Android在添加edittext时添加动态按钮单击禁用

> ID：13235235
> 
> 赞同：0
> 
> 时间：2012-11-05T15:30:30.857
> 
> 标签：android, button, dynamic

我正在向框架布局动态添加一个按钮。效果很好。当我将 edittext 对象添加到相同的框架布局时，似乎能够单击按钮的功能似乎停止了。

任何人都可以帮我解决这个问题。这是我的代码： -

```
 FrameLayout reportLayout = (FrameLayout) findViewById(R.id.reportDetailLayout);

    FrameLayout.LayoutParams params = new FrameLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);

    Button executeButton = new Button(this);

    executeButton.setClickable(true);

    executeButton.setOnClickListener(handleOnClick(executeButton));

    EditText text1 = new EditText(this);

    executeButton.setText("Execute");
    executeButton.setMinimumHeight(10);
    executeButton.setMinimumWidth(150);

    text1.setId(1);
    text1.setHint("Enter Value");

    executeButton.setPadding(0, 0, 0, 0);
    text1.setPadding(12, 70, 0, 0);

    executeButton.setLayoutParams(params);
    text1.setLayoutParams(params);

    reportLayout.addView(executeButton);
    reportLayout.addView(text1); 
```

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:41:38.297

您的编辑文本位于按钮的顶部。您的触摸事件只能单击编辑文本区域。您更改按钮或编辑文本的位置，我认为这个问题会解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:27:07.190

它必须是线性布局。

# asp.net - 无法添加新的 SQL 数据库 - 错误 26 - web developer 2010

> ID：13235236
> 
> 赞同：1
> 
> 时间：2012-11-05T15:30:35.073
> 
> 标签：asp.net, sql-server

我的整个项目是一个 Default.aspx 和一个 web.config。当我去添加新项目 > SQL Server 数据库时，我得到这个错误：

[![在此处输入图像描述](../Images/bd9a165a890b76f9109b64a420c43f9e.png)](https://i.stack.imgur.com/0kbia.png)

在过去的几个小时里，我浏览了互联网，但找不到任何东西（请记住，我仍然是初学者，非常简单，非常欢迎详细解释）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:47:48.097

此错误意味着：

a) 您没有安装 Sql Server Express。

b) Sql Server 已安装但未运行，使用 Start -> View Local Services 启动它。

c) Sql Server 已安装并正在运行，但未配置为允许连接。使用 Start -> Sql server configuration manager 来启用 TCP/IP 或命名管道连接。

d) Sql Server 已安装并运行并允许连接，但您的防火墙软件未配置为允许连接到 Sql Server。

d) 您在连接字符串中输入了错误的数据源值，Sql Express 的默认实例名称通常是“.\SQLEXPRESS”

配置工具截图：

![在此处输入图像描述](../Images/4749095b66981c3049e6201776ee76f1.png)

# php - zend 框架 2 模型/适配器可重用

> ID：13235240
> 
> 赞同：0
> 
> 时间：2012-11-05T15:30:44.573
> 
> 标签：php, zend-framework2, zend-framework-modules

我有一个由两个模块使用的模型。我不想将该模型的代码复制到每个模块中。

例如，我有 2 个模块。首先从模型中获取博客文章并为普通用户打印它们，另一个为管理员用户打印它们，但有更多选项（在视图中设置）。我会在两个地方有相同的模型。而且..这很糟糕。

只是一段代码：

```
<?php
namespace Blog\Model;
use Zend\Db\Adapter\Adapter;
use Zend\Db\ResultSet\ResultSet;
use Zend\Db\TableGateway\AbstractTableGateway;
class BlogTable extends AbstractTableGateway
{
    protected $table = 'blog_posts';
    public function __construct(Adapter $adapter)
    {
        $this->adapter = $adapter;
        $this->initialize();
    }
    /**
     * Gets the blog post list
     *
     * @return array
     **/
    public function fetchAll()
    {
        //..
    }
} 
```

那么，我应该如何设计这个应用程序呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:38:32.447

最大的问题可能是为什么您将管理方面与“博客范围”分开。管理模块应该只是收集所有后端选项的前端（如果这有意义的话）

但是，回到您的问题：您可以简单地将模型 A 中的这些类包含到模型 B 中，例如`use Blog\Model\BlogTable`

最终，尽管我将模块的管理视为博客模块本身的责任，正如第一段所暗示的那样。

编辑：我忘了提一件事。理想情况下，如果您决定采用依赖方法，您的模块应该使 BlogTable 可以通过服务访问。这样，您的 ModuleAdmin 只需执行类似`$serviceLocator->get('my-blog-table')`更干净的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:13:41.460

您可以通过拥有一个提供各种模型、助手等的基本/共享模块来实现这一点。

但就我个人而言，我希望围绕功能而不是用户访问级别来构建模块。

# vim - 在 Console2 中使用 vim 可以识别吗？

> ID：13235241
> 
> 赞同：4
> 
> 时间：2012-11-05T15:30:48.177
> 
> 标签：vim, console2

通过[Steven Harman 对 Console2 的](https://github.com/stevenharman/console2-solarized)Solarized 调整，我可以或多或少地在 win32 vim 中使用 Solarized[配色](http://ethanschoonover.com/solarized)方案。但是有时我会通过一个香草 cmd.exe 窗口发现自己在 vim 中，并且 Solarized 16 色配色方案与它的 gui 等效项不一致。

所以我想在我的 vimrc 中解决这个问题，但是如何检查控制台 vim 是否在 Console2 中使用？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T18:24:43.797

在 Console2 中，您可以通过修改*shell*调用（从“设置”对话框或直接在 XML 配置中）来设置任意环境变量。对于默认的 Windows 命令提示符，使用以下值：

```
cmd.exe /K set EMULATOR=console2 
```

对于 Cygwin Bash，这样的事情应该可以工作：

```
C:\cygwin\bin\bash.exe -c "export EMULATOR=console2; exec /bin/bash -i" 
```

然后，检查`$EMULATOR`您的条件中的值`.vimrc`，如 romainl 的回答所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:28:17.247

查看您的终端模拟器是否设置了环境变量，或者您是否可以以一种或另一种方式设置一个。

在`bash`中，一个人会这样做：

```
$ export EMULATOR=console2 
```

有了这个，你可以把这样的东西放在你的`_vimrc`：

```
if $EMULATOR == "console2"
  colorscheme foo
else
  colorscheme bar
endif 
```

# wordpress - 在 Wordpress 中，如果我要为自己的自定义模板设置样式，我应该将 CSS 文件放在哪里？

> ID：13235243
> 
> 赞同：0
> 
> 时间：2012-11-05T15:31:05.380
> 
> 标签：wordpress

我有一个使用我自己的自定义页面修改的子主题，我想更改页面上的 CSS，但是当我放置该`<link rel="stylesheet" href="" />`部分时，在页面的标题中，我不确定我应该指向哪里链接到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:37:46.833

```
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>" /> 
```

# android - Android图库自动滚动阈值

> ID：13235245
> 
> 赞同：0
> 
> 时间：2012-11-05T15:31:09.533
> 
> 标签：android

我创建了一个自定义画廊，在其中我实现了拖放机制并重新排列了项目。拖动发生在长按事件期间并且投掷也可以正常工作。现在我的问题是我试图**在拖动操作期间自动滚动我的画廊**当在画廊的左侧和侧面达到特定的阈值时，为此我尝试使用**scrollto，setselection**它们似乎都工作得很奇怪，有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:54:34.343

代替 ：

```
myGallery.setSelection(position); 
```

尝试 ：

```
myGallery.post(new Runnable() {
    @Override
    public void run() {
        myGallery.setSelection(position);
    }
}); 
```

同样的事情`scrollTo`也应该有效。
我希望它会帮助你。

# css - 字体未在 Chrome 上显示

> ID：13235247
> 
> 赞同：0
> 
> 时间：2012-11-05T15:31:15.707
> 
> 标签：css, fonts, font-face

[http://www.milknhny.co.uk/](http://www.milknhny.co.uk/)

对于上述内容，我有一个字体调用`CSS`，但是对于一个奇怪的事情，它在我的工作中没有显示在 chrome 上，但在家里可以工作！

我的电话是：

```
@font-face {
 font-family: Bazar;
 src: url(http://www.milknhny.co.uk/fonts/Bazar.ttf);
 src: url(http://www.milknhny.co.uk/fonts/Bazar.eot);
 src: url(http://www.milknhny.co.uk/fonts/Bazar.svg);
 src: url(http://www.milknhny.co.uk/fonts/Bazar.woff);
 } 
```

任何想法为什么它不能在我的 chrome 上工作，正如我认为通过调用以上所有内容它会适合跨浏览器。

谢谢

更新： - 下面修复了 chrome 问题......但仍然无法在 IE 中工作......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:39:01.973

我通过执行以下操作解决了这个问题：（略有变化）

```
@font-face {
font-family: 'Bazar';
src: url('fonts/bazar.eot');
src: url('fonts/bazar.eot?#iefix') format('embedded-opentype'),
     url('fonts/bazar.woff') format('woff'),
     url('fonts/bazar.ttf') format('truetype'),
     url('fonts/bazar.svg#bazarmedium') format('svg');
font-weight: normal;
font-style: normal;

} 
```

无论如何谢谢 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:17:51.840

您可能还没有实际上传字体文件。这似乎导致了重定向，然后来自服务器的 404 Not Found 响应。（最初的问题是格式错误的`@font-face`规则，您在答案中已修复。）

现在问题似乎已经解决了。

# windows-8 - Windows 8 是否支持 Visual Source Safe？

> ID：13235248
> 
> 赞同：5
> 
> 时间：2012-11-05T15:31:19.457
> 
> 标签：windows-8, visual-sourcesafe

Windows 8 是否支持视觉源安全（或相反？）

Aka，你可以安装运行 Windows 8 的可视源安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:35:36.070

我们已经开始工作了。

当它说你必须关闭所有正在运行的程序时，它不仅仅是很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T20:38:58.743

我的建议是，不要靠近 Visual SourceSafe 而不是吐出一只老鼠。VSS 从来没有正常工作过。数据损坏太常见了。当我在 1990 年代后期担任 Microsoft 的独立顾问并在 Redmond 度过了一些时间时，我发现了 MS 的小秘密。几乎没有一个 Microsoft 开发项目使用他们自己的 VSS。他们在 90 年代初期的内部源代码控制是旧的基于 RCS 文件的系统的定制版本。然后，他们购买了 Perforce 的源代码权利，并创建了一个自定义版本的 Perforce 供自己使用。现在，至少从 Visual Studio 2012 开始，他们只正式支持自己的 Microsoft Team Foundation 版本控制 (TFVC) 和 Git。VS 2012 和更新的 IDE 中仅支持这两个。

再一次，甚至微软的程序员也开玩笑说 VSS 是一个“代码破坏设备”。如果您在 VSS 6 中已经有很多项目（IIRC 建于 1998 年并于 2006 年停产），您可能想要追踪升级到 VSS 2005，这很少见，但至少“支持”到任何程度直到 2017 年的某个时候。我也不知道两者是否与 Windows 10 兼容（我在 Windows 7 上安装了 6.0）我不确定它是否更好，而且微软很难找到 VSS 的完整或升级下载2005 在他们的网站上，但我记得在一个 MS 论坛上看到了它的链接。搜索它。

OTOH，如果您没有焊接到 VSS 并且不想使用 TFSC 或 Git，那么 Subversion（独立）是一个非常好的选择（CVS 是一个死问题并且不受支持）。我当前的客户的开发团队使用 Git 或 SVN 来开发他们的 .NET (yuck) 项目。

免责声明：我的个人经验（正如 StackOverflow 想要看到的意见帖子）涵盖了 40 年，主要是财富 50 强公司的顶级软件设计和开发顾问，在此期间，我广泛使用了几乎所有主要的 COTS 和开源产品实用程序、错误跟踪器和版本控制系统可用。我是最初的 PVCS（Polytron 版本控制系统）的主要 beta 测试人员，后来被 Borland 收购。我还在 90 年代初为 Dow Jones 编写了一个专有的基于文本 delta 的版本控制系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T11:59:56.967

是的。它也可以安装在 Windows 10 计算机上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-08T11:18:43.927

是的，在 Windows 10 中也是如此。从其他计算机复​​制并粘贴 VSS 到新计算机的任何文件夹中。

在 VB60 ide 中注册，执行 SSINT.EXE 在 VSS 文件夹中找到一个运行 .EXE 以获取其他选项

# javascript - || 变量赋值 价值

> ID：13235249
> 
> 赞同：0
> 
> 时间：2012-11-05T15:31:19.570
> 
> 标签：javascript

> **可能重复：**
> [JavaScript OR (||) 变量赋值说明](https://stackoverflow.com/questions/2100758/javascript-or-variable-assignment-explanation)

有人可以帮助解释这条线的作用以及如何做吗？

```
var scrollTop = html.scrollTop || body && body.scrollTop || 0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:37:11.477

你可以把逻辑想成这样......

```
if (html.scrollTop > 0) {
    scrollTop = html.scrollTop;
    return;
}

if (body != undefined) {
    if (body.scrollTop > 0) {
         scrollTop = body.scrollTop;
         return;
    }

}

scrollTop = 0;
return; 
```

它`scrollTop`使用优先级列表设置变量。

1.  `html.scrollTop`首先，如果它存在并且大于零，请尝试使用。
2.  如果不是，则确保`body`存在，`body.scrollTop`如果它大于零，则使用。
3.  如果一切都失败了，只需将其设置为`0`

# javascript - 需要用 Javascript 将“$”替换为“_”

> ID：13235252
> 
> 赞同：0
> 
> 时间：2012-11-05T15:31:28.597
> 
> 标签：javascript, regex, replace

我从 .getAttribute() 中得到以下字符串：

```
ctl00$m$g_ff7ec6ac_ec2e_4402_aaaa_7fcce245ff1b$ctl03$_UserName 
```

让我们称之为“字符串”。现在我需要将 $ 替换为 _ 。我试过了：

```
String.replace(/\$/g, "\_"); 
```

...不起作用。

第二次尝试：

```
String.replace(/$$/g, "\_"); 
```

...不起作用。

第三次尝试：

```
String.replace(/\$$/g, "\_"); 
```

...不起作用。

所以...有人可以帮忙吗？感谢所有的努力！

编辑：需要让它适用于 IE8/9

此时的代码：

```
mailName = document.body.innerHTML.match(/ctl00\$.+EmailAddress/);
alert(mailName); // String is "ctl00$m$g_ff7ec6ac_ec2e_4402_aaaa_7fcce245ff1b$ctl03$_UserName"

mailName2 = mailName.replace(/\$/g, "_"); 
```

编辑2：

...我得到了我自己的答案。

```
mailName = document.body.innerHTML.match(/ctl00\$.+EmailAddress/); 
```

返回一个字符串，但 .replace() 或 .split() 无法使用它。要开始工作，您需要这样做

```
mailID = '"' + document.body.innerHTML.match(/ctl00\$.+EmailAddress/) + '"'; 
```

之后一切都很好。不知道为什么，但在 IE8/9 中这个解决方案效果很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:32:09.450

利用

```
yourString = yourString.replace(/\$/g, "_"); 
```

无需转义第二个字符串。

来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)：

> 返回一个新字符串，其中模式的部分或全部匹配被替换替换。模式可以是字符串或正则表达式，替换可以是字符串或每次匹配调用的函数。

另请注意，替换不会更改原始字符串。您需要取回返回的值。

而且，关于您的编辑，请注意即使没有修饰符[，Internet Explorer 的 match 函数](http://msdn.microsoft.com/en-us/library/ie/7df7sf4x(v=vs.94).aspx)似乎也会返回一个数组：`g`

> 如果 match 方法没有找到匹配项，则返回 null。如果找到匹配项，则 match 返回一个数组，并更新全局 RegExp 对象的属性以反映匹配结果。

你可以做

```
var str = ''+ document.body.innerHTML.match(/ctl00\$.+EmailAddress/); 
```

[示范](http://jsfiddle.net/jfyyY/)

# javascript - 如何在 TypeScript 中使用声明文件

> ID：13235257
> 
> 赞同：9
> 
> 时间：2012-11-05T15:31:47.033
> 
> 标签：javascript, node.js, typescript

当涉及到用纯 Javascript 编写的声明文件和 3rd 方库时，我在 TypeScript 中没有得到一些东西。假设我有以下 Javascript 类：

```
$ cat SomeClass.js

var SomeClass = (function () {
    function SomeClass() {
    }
    SomeClass.prototype.method1 = function () {
            return "some string";
    };
    return SomeClass;
})();
exports.SomeClass = SomeClass; 
```

我想对其进行类型检查，所以我创建了这样的声明文件：

```
$ cat test.d.ts

class SomeClass {
    public method1(): string;
} 
```

然后我想在一些代码中使用类和声明文件：

```
$ cat main.ts

///<reference path="./test.d.ts"/>
import ns = module("./SomeClass");

function test(): string {
   var sc = new ns.SomeClass();
   return sc.method1();
} 
```

当我尝试编译它时，我得到了这个：

```
$ tsc main.ts
main.ts(2,19): The name '"./SomeClass"' does not exist in the current scope
main.ts(2,19): A module cannot be aliased to a non-module type
main.ts(5,16): Expected var, class, interface, or module 
```

据我所知，import 语句需要存在一个实际的 TypeScript 类，而引用语句不足以帮助编译器弄清楚如何处理它。

我尝试将其更改为

```
import ns = module("./test.d"); 
```

但也没有骰子。

我可以让它实际编译和运行的唯一方法是使用 require 语句而不是 import，如下所示：

```
$ cat main.ts

///<reference path="./node.d.ts"/>
///<reference path="./test.d.ts"/>
var ns = require("./SomeClass");

function test(): string {
   var sc = new ns.SomeClass();
   return sc.method1();
} 
```

这段代码的问题是 TypeScript 没有运行任何类型检查。事实上，我可以完全删除这条线

```
///<reference path="./test.d.ts"/> 
```

它不会改变任何东西。

但是，如果我删除了 require 语句，我可以进行类型检查，但是代码在运行时会爆炸，因为没有 require 语句。

```
$ cat main.ts

///<reference path="./test.d.ts"/>

function test(): string {
   var sc = new SomeClass();
   return sc.method1();
}

test();

$ node main.js

main.js:2
    var sc = new SomeClass();
                 ^
ReferenceError: SomeClass is not defined
    ... 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T18:40:46.510

**猫测试.d.ts**

```
declare module "SomeClass.js" {
    class SomeClass {
        method1(): string;
    }
} 
```

**cat Main.ts**

```
///<reference path="test.d.ts"/>
import ns = module("SomeClass.js");

function test() {
   var sc = new ns.SomeClass();
   return sc.method1();
} 
```

**tsc Main.ts --declarations**

**猫 Main.js**

```
var ns = require("SomeClass.js")
function test() {
    var sc = new ns.SomeClass();
    return sc.method1();
} 
```

**cat Main.d.ts**

```
import ns = module ("SomeClass.js");
function test(): string; 
```

# scala - 为生产和测试环境更改数据库的设计模式

> ID：13235263
> 
> 赞同：2
> 
> 时间：2012-11-05T15:31:56.127
> 
> 标签：scala, slick

我需要导入不同的库并根据我的源代码的使用（即运行和测试）做一些稍微不同的事情。

如果我有各种看起来像这样的生产源文件：

```
import scala.slick.driver.PostgresDriver.simple._
import Database.threadLocalSession

case class SomeBusinessObject(...) 
```

将其更改为以下进行测试的好方法是什么（这意味着我想在测试期间使用不同的数据库）：

```
import scala.slick.driver.h2.simple._
import Database.threadLocalSession

case class SomeBusinessObject(...) 
```

哦，还有一个数据库类来保存我正在使用的任何数据库的密钥：

```
import scala.slick.driver.PostgresDriver.simple._

// Use the implicit threadLocalSession
import Database.threadLocalSession

object DB{

  val get = {
      Database.forURL("jdbc:postgresql:test:slick",
                           driver="org.postgresql.Driver",
                           user="postgres",
                           password="xxxx") 
  }
} 
```

我做了一些研究，看起来蛋糕模式可能是这类事情的关键，但如果有人能让我开始，那就太好了（如果蛋糕是正确的方法）

**更新：**

[自从提出这个问题后，我在Slick 示例](https://github.com/slick/slick-examples/blob/master/src/main/scala/com/typesafe/slick/examples/lifted/MultiDBCakeExample.scala)中找到了我想要的东西。它真的把它分开了！几周前我研究了这些例子，但不记得我在哪里看到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:51:09.780

您可以建立在 scala 允许您使用嵌套在类、对象或特征中的“导入”这一事实（而不仅仅是在根级别）：

一个带有 scala.collection.mutable.Map 和 scala.collection.immutable.Map 的示例（假设我们想在测试中使用不可变版本的 Map 并在生产中使用可变版本）

```
scala> trait Import1 {
     | import scala.collection.mutable.{Map => iMap}
     | def Test = iMap(1 -> "a")
     | }
defined trait Import1

scala> trait Import2 {
     | import scala.collection.immutable.{Map => iMap}
     | def Test = iMap(1 -> "a")
     | }
defined trait Import2 
```

现在你可以这样做：

```
scala> object ProductionThing extends Import1
defined module ProductionThing

scala> ProductionThing.Test
res6: scala.collection.mutable.Map[Int,java.lang.String] = Map(1 -> a)

scala> object TestingThing extends Import2
defined module TestingThing

scala> TestingThing.Test
res7: scala.collection.immutable.Map[Int,java.lang.String] = Map(1 -> a) 
```

或者您可以使用相同的机制将您的导入范围限定在一个类中并将该类注入到 SomeBusinessObject。

# iphone - 如何监控我的应用程序消耗了多少内存？

> ID：13235268
> 
> 赞同：2
> 
> 时间：2012-11-05T15:32:07.180
> 
> 标签：iphone, ios, xcode, ipad, cocoa

有时，我正在开发的不同应用程序会自行关闭，我假设这是因为内存使用量一旦过高，IOS 就会终止。

即使不是因为内存，我也想知道我的应用程序在每一步都消耗了多少内存。

**更新**：谢谢大家，我了解 Instruments 的用途，但我的想法是在我使用未连接到计算机的应用程序时监控内存。例如，使用当前内存消耗放置 UILabel 文本内容。

有什么方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:37:52.887

Apple [Instruments 用户指南](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)是一个很好的入门方法。有一章专门用于[定位内存问题](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYouriOSApp/MemoryManagementforYouriOSApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW1)。要监控内存消耗，Allocations、Leaks 和 Activity Monitor 工具将是最有帮助的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:37:31.070

使用“仪器”。运行 -> 配置文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:40:22.333

让我们使用工具来分析您的应用程序。使用分配模式，您可以了解： - 您的应用使用了多少内存。- 在内存中分配了多少应用程序对象。- 在内存中分配了哪些对象（GUI、NSOBjects、bla bla bla）。- 在您的应用程序中执行某些操作后，您的应用程序会使用更多或更少的内存。

更多细节： [https ://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)

# sql - SQL 检查约束 VARCHAR

> ID：13235273
> 
> 赞同：0
> 
> 时间：2012-11-05T15:32:15.487
> 
> 标签：sql, oracle, constraints

```
create table table1
(
  column1 varchar2(8)
  check constraint column1_ch check ........
); 
```

如何检查前 4 个字符是一组特定字母而后 4 个字符是数字的数据？以及一系列值。

例如，数据可以是 ABCD2121、ABCD1111。

范围 - ABCD0001 到 ABCD9999

所以“ABCD”在数字变化时是固定的。

我在网上找到了关于使用“[]”来定义数字的方法，但我无法将它整合到我的约束中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:43:05.053

最简单的方法是使用正则表达式：

```
alter table table1
  add constraint chck_code check (regexp_like(column1, '(ABCD)[0-9]{4}') ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:40:58.687

您的检查条件应如下所示：

```
(column1 LIKE 'ABCD[0-9][0-9][0-9][1-9]') 
```

***编辑：*** *修改为使用设置前缀与字母字符范围。*

这是一个使用 Microsoft SQL Server 的解决方案，它说明了这一点：

```
DECLARE @MyTable TABLE
(column1 varchar(8) check (column1 LIKE 'ABCD[0-9][0-9][0-9][1-9]'))

INSERT INTO @MyTable (column1)
       SELECT 'ABCD0000'
 UNION SELECT 'ABCD2121'
 UNION SELECT 'ABCD1111';

SELECT *
  FROM @MyTable;

INSERT INTO @MyTable (column1)
SELECT 'ABCD000A'; --<== Fails!

INSERT INTO @MyTable (column1)
SELECT 'ABCD221'; --<== Fails! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:42:44.547

如果您有一组固定的前缀，请使用 regexp_like 并枚举前缀列表：

```
alter table test_1 
add constraint chk_col1 check(regexp_like(column1, '(ABCD|EFGH)[0-9]{4}')); 
```

这将允许 ABCD 和 EFGH 作为前缀，后跟正好 4 位数字。

# eclipse - 安装 JBoss WTP 适配器后 Eclipse 没有“项目方面”

> ID：13235275
> 
> 赞同：2
> 
> 时间：2012-11-05T15:32:17.797
> 
> 标签：eclipse, jboss-tools

我正在尝试在 Eclipse 中使用项目方面，但“项目 - > 属性”下的“项目方面”部分已经消失。从 Eclipse Indigo 切换到 Eclipse Juno 时，我注意到了这一点。我认为这与 Juno 有关，所以我切换回 Indigo，却发现“项目方面”也没有了。我将这两个版本都尝试为全新安装并使用干净的工作区。

在网上搜索这个问题只出现了“转到'项目->属性->项目方面'”，但这根本不可能。

**更新：**

我设法将其分解。在我从 JBoss 更新站点 (http://download.jboss.org/jbosstools/updates/development/juno/) 安装“JBossAS 工具”包后，与方面相关的内容消失了。

重现步骤：

1.  安装 Eclipse Juno (4.2.0)
2.  [从http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)安装项目方面
    1.  在“建模”下：“EMF Facet SDK（孵化）”
    2.  在“Web、XML、Java EE 和 OSGi 企业开发”下：“Eclipse Faceted Project Framework”
3.  重启后看到 Eclipse 有可能创建一个分面项目（文件 -> 新建 -> 其他 -> 分面项目）
4.  [从http://download.jboss.org/jbosstools/updates/development/juno/](http://download.jboss.org/jbosstools/updates/development/juno/)安装“JBossAS 工具”
5.  重新启动，检查多面的东西，然后它就消失了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:38:25.220

这可能取决于您使用的 Eclipse 安装。在任何情况下，您都可以下载所需的包以使 Facets 工作。

构面是 Web 工具平台的一部分。如果在包管理器中找不到，可以在这里下载：

[http://download.eclipse.org/webtools/downloads/](http://download.eclipse.org/webtools/downloads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:36:47.830

`File / New / Project... / General / Faceted Project`您应该使用向导或使用项目的弹出菜单来创建您的 Eclipse 项目`Configure / Convert to Faceted From...`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T22:44:25.110

我从每晚构建的更新站点安装了“JBossAS 工具”包。这不会导致有关项目方面的问题。

每晚更新站点：http: [//download.jboss.org/jbosstools/updates/nightly/core/trunk/](http://download.jboss.org/jbosstools/updates/nightly/core/trunk/)

# c# - protobuf-net 和反序列化对象

> ID：13235279
> 
> 赞同：1
> 
> 时间：2012-11-05T15:32:26.267
> 
> 标签：c#, .net, protobuf-net

我正在检查 protobuf-net 是否可以替代 DataContracts。除了出色的性能外，它确实是一个整洁的库。我唯一的问题是 .NET 序列化程序不会对它们当前正在反序列化的内容做出任何假设。特别是包含对类型化对象的引用的对象是一个问题。

```
[DataMember(Order = 3)]
public object Tag1 // The DataContract did contain a object which becomes now a SimulatedObject
{
    get;
    set;
} 
```

我尝试使用带有一点通用帮助器的协议缓冲区来模拟对象，该帮助器确实将每种可能的类型存储在不同的强类型字段中。

这是处理反/序列化为许多不同的不相关类型的字段的推荐方法吗？

下面是一个 SimulatedObject 的示例代码，它最多可以容纳 10 种不同的类型。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.Serialization;
using ProtoBuf;
using System.Diagnostics;

[DataContract]
public class SimulatedObject<T1,T2,T3,T4,T5,T6,T7,T8,T9,T10>
{
    [DataMember(Order = 20)]
    byte FieldHasValue; // the number indicates which field actually has a value

    [DataMember(Order = 1)]
    T1 I1;

    [DataMember(Order = 2)]
    T2 I2;

    [DataMember(Order = 3)]
    T3 I3;

    [DataMember(Order = 4)]
    T4 I4;

    [DataMember(Order = 5)]
    T5 I5;

    [DataMember(Order = 6)]
    T6 I6;

    [DataMember(Order = 7)]
    T7 I7;

    [DataMember(Order = 8)]
    T8 I8;

    [DataMember(Order = 9)]
    T9 I9;

    [DataMember(Order = 10)]
    T10 I10;

    public object Data
    {
        get
        {
            switch(FieldHasValue)
            {
                case 0: return null;
                case 1: return I1;
                case 2: return I2;
                case 3: return I3;
                case 4: return I4;
                case 5: return I5;
                case 6: return I6;
                case 7: return I7;
                case 8: return I8;
                case 9: return I9;
                case 10: return I10;
                default:
                    throw new NotSupportedException(String.Format("The FieldHasValue field has an invlaid value {0}. This indicates corrupt data or incompatible data layout chagnes", FieldHasValue));
            }
        }
        set
        {
            I1 = default(T1);
            I2 = default(T2);
            I3 = default(T3);
            I4 = default(T4);
            I5 = default(T5);
            I6 = default(T6);
            I7 = default(T7);
            I8 = default(T8);
            I9 = default(T9);
            I10 = default(T10);

            if (value != null)
            {
                Type t = value.GetType();
                if (t == typeof(T1))
                {
                    FieldHasValue = 1;
                    I1 = (T1) value;
                }
                else if (t == typeof(T2))
                {
                    FieldHasValue = 2;
                    I2 = (T2) value;
                }
                else if (t == typeof(T3))
                {
                    FieldHasValue = 3;
                    I3 = (T3) value;
                }
                else if (t == typeof(T4))
                {
                    FieldHasValue = 4;
                    I4 = (T4) value;
                }
                else if (t == typeof(T5))
                {
                    FieldHasValue = 5;
                    I5 = (T5) value;
                }
                else if (t == typeof(T6))
                {
                    FieldHasValue = 6;
                    I6 = (T6) value;
                }
                else if (t == typeof(T7))
                {
                    FieldHasValue = 7;
                    I7 = (T7) value;
                }
                else if (t == typeof(T8))
                {
                    FieldHasValue = 8;
                    I8 = (T8) value;
                }
                else if (t == typeof(T9))
                {
                    FieldHasValue = 9;
                    I9 = (T9) value;
                }
                else if (t == typeof(T10))
                {
                    FieldHasValue = 10;
                    I10 = (T10) value;
                }
                else
                {
                    throw new NotSupportedException(String.Format("The type {0} is not supported for serialization. Please add the type to the SimulatedObject generic argument list.", t.FullName));
                }
            }
        }
    }
}

[DataContract]
class Customer
{
    /* 
    [DataMember(Order = 3)]
    public object Tag1 // The DataContract did contain a object which becomes now a SimulatedObject
    {
        get;
        set;
    }
    */

    [DataMember(Order = 3)]
    public SimulatedObject<bool, Other, Other, Other, Other, Other, Other, Other, Other, SomethingDifferent> Tag1 // Can contain up to 10 different types
    {
        get;
        set;
    }

    [DataMember(Order = 4)]
    public List<string> Strings
    {
        get;
        set;
    }
}

[DataContract]
public class Other
{
    [DataMember(Order = 1)]
    public string OtherData
    {
        get;
        set;
    }
}

[DataContract]
public class SomethingDifferent
{
    [DataMember(Order = 1)]
    public string OtherData
    {
        get;
        set;
    }

}

class Program
{
    static void Main(string[] args)
    {
        Customer c = new Customer
        {
            Strings = new List<string> { "First", "Second", "Third" },
            Tag1 = new SimulatedObject<bool, Other, Other, Other, Other, Other, Other, Other, Other, SomethingDifferent>
                    {
                        Data = new Other {  OtherData = "String value "}
                    }
        };

        const int Runs = 1000 * 1000;
        var stream = new MemoryStream();

        var sw = Stopwatch.StartNew();

        Serializer.Serialize<Customer>(stream, c);
        sw = Stopwatch.StartNew();
        for (int i = 0; i < Runs; i++)
        {
            stream.Position = 0;
            stream.SetLength(0);
            Serializer.Serialize<Customer>(stream, c);
        }
        sw.Stop();
        Console.WriteLine("Data Size with Protocol buffer Serializer: {0}, {1} objects did take {2}s", stream.ToArray().Length, Runs, sw.Elapsed.TotalSeconds);

        stream.Position = 0;
        var newCustw = Serializer.Deserialize<Customer>(stream);

        sw = Stopwatch.StartNew();
        for (int i = 0; i < Runs; i++)
        {
            stream.Position = 0;
            var newCust = Serializer.Deserialize<Customer>(stream);
        }
        sw.Stop();
        Console.WriteLine("Read object with Protocol buffer deserializer: {0} objects did take {1}s", Runs, sw.Elapsed.TotalSeconds);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:23:36.260

不，这种解决方案很难长期维护。

我建议你在序列化过程中将序列化类型的全名附加到序列化数据中，并在反序列化过程开始时读取类型名称（无需更改protobuf源代码）

作为旁注，您应该尽量避免在反序列化过程中混合对象类型。我假设您正在更新现有的 .net 应用程序并且无法重新设计它。

更新：示例代码

```
public byte[] Serialize(object myObject)
{
    using (var ms = new MemoryStream())
    {
        Type type = myObject.GetType();
        var id = System.Text.ASCIIEncoding.ASCII.GetBytes(type.FullName + '|');
        ms.Write(id, 0, id.Length);
        Serializer.Serialize(ms, myObject);
        var bytes = ms.ToArray();
        return bytes;
    }
}

public object Deserialize(byte[] serializedData)
{
    StringBuilder sb = new StringBuilder();
    using (var ms = new MemoryStream(serializedData))
    {
        while (true)
        {
            var currentChar = (char)ms.ReadByte();
            if (currentChar == '|')
            {
                break;
            }

            sb.Append(currentChar);
        }

        string typeName = sb.ToString();

        // assuming that the calling assembly contains the desired type.
        // You can include aditional assembly information if necessary
        Type deserializationType = Assembly.GetCallingAssembly().GetType(typeName);

        MethodInfo mi = typeof(Serializer).GetMethod("Deserialize");
        MethodInfo genericMethod = mi.MakeGenericMethod(new[] { deserializationType });
        return genericMethod.Invoke(null, new[] { ms });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:44:25.843

我现在正在做类似的事情，我已经提供了 lib 的第一个版本：http: [//bitcare.codeplex.com/](http://bitcare.codeplex.com/)

当前版本还不支持泛型，但我计划在最近的时间添加它。我只在那里上传了源代码——当我准备好使用泛型时，我也准备了 bin 版本......

它假设双方（客户端和服务器）都知道他们序列化/反序列化的内容，因此没有任何理由在其中嵌入完整的元数据信息。由于这种序列化结果非常小，并且生成的序列化程序工作得非常快。它有数据字典，使用智能数据存储（简称只存储重要的位），并在必要时进行最终压缩。如果您需要它，请尝试它是否可以解决您的问题。

许可证是 GPL，但我会尽快将其更改为限制较少的许可证（也可免费用于商业用途，但风险自负，如在 GPL 中）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T14:50:41.103

我上传到 codeplex 的版本适用于我的一些产品。当然，它使用不同的单元测试集进行了测试。它们没有上传到那里，因为我将它移植到 vs2012 和 .net 4.5 并决定为即将发布的版本创建新的测试用例集。

我不处理抽象（所谓的开放）泛型。我处理参数化的泛型。从数据契约的角度来看，参数化的泛型只是专门的类，所以我可以像往常一样处理它们（与其他类一样）——区别仅在于对象构造和存储优化。

当我在 Nullable<> 上存储有关空值的信息时，它仅在存储流中占用一位，如果它不是空值，我会根据作为泛型参数提供的类型进行序列化（因此我对 DateTime 进行序列化，例如可以从一位获取对于所谓的默认值到几个字节）。目标是根据当前关于类上的数据契约的知识生成序列化代码，而不是动态地生成序列化代码并浪费内存和处理能力。当我在代码生成期间看到基于某个泛型的某个类中的属性时，我知道该泛型的所有属性，并且我知道每个属性的类型:) 从这个角度来看，它是具体的类。

我将尽快更改许可证。我必须首先弄清楚如何做:)，因为我看到可以从提供的许可证类型列表中进行选择，但我无法提供自己的许可证文本。我看到 Newtonsoft.Json 的许可证也是我想要的，但我还不知道如何更改它......

那里还没有提供文档，但简而言之，准备自己的序列化测试很容易。您必须使用您想要存储/序列化有效方式的类型编译程序集，然后在您的序列化库中创建 *.tt 文件（例如对于人员类 - 它也检查依赖关系并为其他依赖类生成代码）并保存文件（当您保存它们时，它会生成与序列化库合作的所有代码）。您还可以在构建配置中创建任务，以在每次构建解决方案时从 tt 文件重新生成源代码（可能实体框架在构建过程中以类似的方式生成代码）。您现在可以编译您的序列化库并测量结果的性能和大小。

我的框架需要这个序列化库，以便有效地使用带有 Azure 表和 Blob 存储的实体，因此我计划很快完成初始版本......

# c++ - 如何将内存地址存储为整数？

> ID：13235280
> 
> 赞同：6
> 
> 时间：2012-11-05T15:32:26.737
> 
> 标签：c++, 32bit-64bit, void-pointers

[这与此处](https://stackoverflow.com/questions/9026661/how-to-store-a-memory-address-in-c)找到的问题标题完全相同-我还想将内存地址存储在变量中-或者更确切地说，将 a 存储在`void*`变量中。但是，我宁愿将它存储为某种形式的 an`int`而不是 a `string`，因为我想在之后将它转换回指针。

这是因为它是一个类的成员，然后我想用 boost serialize 进行序列化，如果我确实使用了 a `void*`， boost serialize 可能会尝试存储指针指向的内容，这在我的案子。

对于 32 位和 64 位 gcc 和 MSVC，我需要这个，所以基本上我想知道是否有一个内置的整数类型，它是同一平台上指针的大小。或者，我想我需要`IFDEF`自己的类型？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:33:06.313

`intptr_t`并且`uintptr_t`是足够大的整数类型以容纳`void*`. 它们由 C++11`<cstdint>`和 C99定义`<stdint.h>`

如果`uintptr_t`不可用，您可以尝试`uintmax_t`在相同的标头中定义或由 Boost 中的[`<boost/cstdint.hpp>`](http://www.boost.org/doc/libs/release/boost/cstdint.hpp).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-06T16:44:54.170

在 C++ 中将对象的地址转换为整数类型（不使用 C 样式强制转换）的一种方法是使用 reinterpret_cast。如其他答案中所述，保证能够保存指针地址的整数类型是 uintptr_t。

`uintptr_t myint = reinterpret_cast<uintptr_t>(&myobject)`

或者

`uintptr_t myint = reinterpret_cast<uintptr_t>(mypointer)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:39:30.263

您不能序列化指针。

仅仅是因为当您反序列化它时，指针将无效。

使用 JSON、XML、XDR 等内容。您的选择。

序列化就是让它扁平化。指针是一个分支。

顺便说一句 - 你忽略了一个事实，即 C++ 在类型安全方面应该更好一些。

# ruby - Ruby 中的克隆类

> ID：13235283
> 
> 赞同：0
> 
> 时间：2012-11-05T15:32:36.377
> 
> 标签：ruby

在我的 Ruby 应用程序中，我想克隆一个类，以便在不影响原始类的情况下对克隆进行一些细微的更改（有关详细信息，请参阅下面的注释）。不幸的是，克隆类的行为不像我期望的那样。具体来说，克隆类的类方法似乎无法访问常量和类变量。观察：

```
irb(main):001:0> class Foo
irb(main):002:1>   HELLO = "Hello, world!"
irb(main):003:1>   def self.say_hello
irb(main):004:2>     HELLO
irb(main):005:2>   end
irb(main):006:1>   def self.cls_var=(val)
irb(main):007:2>     @@cls_var = val
irb(main):008:2>   end
irb(main):009:1>   def self.cls_var
irb(main):010:2>     @@cls_var
irb(main):011:2>   end
irb(main):012:1> end
=> nil
irb(main):013:0> Foo.say_hello
=> "Hello, world!"
irb(main):014:0> Foo.cls_var = "Test"
=> "Test"
irb(main):015:0> Foo.cls_var
=> "Test"
irb(main):016:0> Bar = Foo.clone
=> Bar
irb(main):017:0> Bar.say_hello
NameError: uninitialized constant Class::HELLO          # ???
        from (irb):4:in `say_hello`
        from (irb):17
        from C:/Ruby193/bin/irb:12:in `<main>`
irb(main):018:0> Bar.cls_var = "Another test"
(irb):7: warning: class variable access from toplevel   # Say what?
=> "Another test"
irb(main):019:0> Bar.cls_var
(irb):10: warning: class variable access from toplevel
=> "Another test"
irb(main):020:0> Foo.cls_var
=> "Another test"                                       # Why??? 
```

这里发生了什么，我该如何解决这个问题，以便 Bar 在我克隆它之后的工作方式与 Foo 完全相同？

> *注意：这个问题是对在 Ruby 中的后续问题[，有没有办法“覆盖”子类中的常量，以便继承的方法使用新常量而不是旧常量？](https://stackoverflow.com/q/13234384/1157054)*

* * *

**更新：**对不起，伙计们，我想我不太清楚我为什么要这样做。因此，就我而言，`Foo`是 gem 中的一个类，其功能与我想要的一个类几乎相同。`Foo`事实上，我想要的和我想要的唯一区别是那个讨厌的`HELLO`常数。我想`MyClass.say_hello`回复“你好，鲍勃！” 而不是“你好，世界！”。（在你建议只是覆盖之前`say_hello`，在我的例子中 Foo 有很多其他方法可以使用`HELLO`，并且`say_hello`比我的例子中复杂得多。）

现在我可以更改`Foo::HELLO`为`Foo::HELLO.slice!(0, 7) << "Bob!"`，但这会改变我不想要的 gem 的行为。那么我将如何创建一个`Foo`具有不同值的精确副本`HELLO`呢？

***TLDR：*** *Foo 是 gem 的一部分，所以我不想编辑源代码。我想要一个行为与 Foo 完全相同的类，除了`HELLO`设置为不同的值。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:29.373

我注意到在克隆之后列出了常量。`Foo.constants`并且`Bar.constants`都显示`[:HELLO]`。

添加`self`到您的类方法似乎有效。

```
 class Foo
   HELLO = "Hi"
   def self.say_hello
     self::HELLO
   end
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:51:19.543

Ruby 中克隆类的语义根本不像您认为的那样工作。您可以使用类方法解决常量问题：

```
class Foo
  def self.say_hello
    "Hello, world!"
  end
end 
```

（或者使用@MichaelDodge 的答案。）

您将无法使用类变量在克隆的类之间共享值。如果你有正当的理由想要共享一个值，你将不得不使用其他一些机制来做到这一点。

在您的一条评论中，您提到要克隆和修改类的原因是因为它们是 gem 的一部分。在那种情况下，你为什么不直接 fork gem 并根据需要修改它的源代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T19:05:29.083

因此，似乎这里的共识是，没有简单的方法可以让克隆按照您在这种情况下所期望的方式工作。有很多替代解决方案，但没有一个能完全按照您期望的方式工作`clone`。

* * *

首先，可以通过编辑原始类来`self::HELLO`代替 just来解决常量问题`HELLO`：

```
# Before:
class Foo
  HELLO = "Hello, world!"
  def self.say_hello
    HELLO
  end
end
Bar = Foo.clone
Bar.say_hello # Error

# After:
class Foo
  HELLO = "Hello, World!"
  def self.say_hello
    self::HELLO
  end
end
Bar = Foo.clone
Bar.say_hello # => "Hello, world!" 
```

不幸的是，这个解决方案不能解决类变量的问题，它需要您编辑 Foo 的源代码，如果 Foo 是 gem 或其他外部库的一部分，这可能是不可取的。

* * *

另一种解决方案是继承 Foo 而不是克隆它：

```
class Foo
  HELLO = "Hello, world!"
  def self.say_hello
    HELLO
  end
end

class Bar < Foo
end
Bar.say_hello # => "Hello, world!" 
```

这样做的问题是重新定义 Bar::HELLO 不会影响 的结果`Bar.say_hello`，正如您对克隆类所期望的那样：

```
Bar.const_set :HELLO, "Hello, Bar!"
Bar.say_hello # => "Hello, world!" 
```

* * *

总而言之，最有效的解决方案可能是`Foo`手动将源代码复制到另一个类中。这不是动态的，但结果与您对`clone`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:42:53.553

为什么不简单地继承子类`Foo`？

```
class Foo
  HELLO = 'hi'
end

Foo::HELLO
#=> "hi"

class Bar < Foo; end

Bar::HELLO
#=> "hi"

class Bar < Foo
  HELLO = 'hello there'
end

Bar::HELLO
#=> "hello there" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T17:42:52.457

因此，您可以先在原始类中设置它，然后再将其重置，这样就不会损害代码的其他部分：

```
class Foo
  HELLO = "Hello, world!"
  def self.say_hello
    HELLO
  end
  def self.cls_var=(val)
    @@cls_var = val
  end
  def self.cls_var
    @@cls_var
  end

end 
```

在您的脚本中：

```
#set new hello
class Foo
  OLD_HELLO = HELLO
  HELLO = "NEW HELLO WORLD"
end

class Bar < Foo
end

Bar.say_hello
#output: => "NEW HELLO WORLD"

#reset hello back
class Foo
  HELLO = OLD_HELLO
end 
```

# codeigniter - codeigniter 会话值被覆盖

> ID：13235284
> 
> 赞同：0
> 
> 时间：2012-11-05T15:32:42.327
> 
> 标签：codeigniter

在我看来，我有以下代码：

```
 if (($news['newsvideo'] !="") || ($news['newsvideo'] != NULL)) {

     $newdata4 = array(
     'tablename'  => 'news',
     'recordid'     => $news['newsid'],
     'fieldname' => 'newsid',
     'fieldToUpdate' => 'newsvideo',
     'dpage' => 'news/editNews'
     );

     $this->session->set_userdata($newdata4);
     echo anchor('news/updateOneField', 'Delete Video?','class=btn');
 }

  if (($news['newsvideo_en'] !="") || ($news['newsvideo_en'] != NULL)) {

     $newdata5 = array(
     'tablename'  => 'news',
     'recordid'     => $news['newsid'],
     'fieldname' => 'newsid',
     'fieldToUpdate' => 'newsvideo_en',
     'dpage' => 'news/editNews'
     );

     $this->session->set_userdata($newdata5);
     echo anchor('news/updateOneField', 'Delete Video?','class=btn');
 } 
```

我的控制器中的功能如下：

```
public function updateOneField() 
    {  

        $tablename = $this->session->userdata('tablename');
        $id = $this->session->userdata('recordid');
        $fieldname = $this->session->userdata('fieldname');
        $fieldToUpdate = $this->session->userdata('fieldToUpdate');   
        //$this->newsModel->save(array($fieldToUpdate => ''), $id);        
        //$newsid = $id;

        echo "Table name: ". $tablename . "<br/>";
        echo "Id: " . $id. "<br/>";
        echo "Field name: " . $fieldname. "<br/>";
        echo "Field to update: " . $fieldToUpdate. "<br/>";
        die();
        // destroy the session after the update
        $this->session->unset_userdata('tablename');
        $this->session->unset_userdata('recordid');
        $this->session->unset_userdata('fieldname');
        $this->session->unset_userdata('fieldToUpdate');

        $this->displayEditNewsForm($newsid);
    } 
```

现在，如果我点击我想删除新闻视频的第一个链接，当尝试更新 newsvideo 字段时，newsvideo_en 会更新。这意味着我稍后会覆盖数组的值。有谁知道如何避免这种情况并更新正确的字段？

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:10:12.140

**1）你为什么要检查空和空？**

```
if (($news['newsvideo_en'] !="") || ($news['newsvideo_en'] != NULL)) { 
```

你可能只使用

`if ($news['newsvideo_en'] !=""){`

除非你打算检查是否`not empty` *AND* `not null`在这种情况下你想要

`if (($news['newsvideo_en'] !="") AND ($news['newsvideo_en'] != NULL)) {`

**2）你为什么要告诉脚本`die()`在取消设置会话数据之前告诉脚本？**

```
 echo "Table name: ". $tablename . "<br/>";
    echo "Id: " . $id. "<br/>";
    echo "Field name: " . $fieldname. "<br/>";
    echo "Field to update: " . $fieldToUpdate. "<br/>";
    die();//anything below here WILL NOT RUN
    // destroy the session after the update

    //this code will never run...
    $this->session->unset_userdata('tablename');
    $this->session->unset_userdata('recordid');
    $this->session->unset_userdata('fieldname');
    $this->session->unset_userdata('fieldToUpdate'); 
```

因为脚本在到达`unset_userdata`，所以 unset 永远不会运行。如果要清除会话数据，则必须摆脱`die()`.

**3) 你为什么不直接使用 POST？**

```
echo form_open("video_edit");

if ($news['newsvideo'] !="") {
    echo form_hidden('fieldToUpdate','newvideo');
}
if ($news['newsvideo_en'] !="") {
    echo form_hidden('fieldToUpdate','newvideo_en');
}
echo form_hidden("tablename","news");
echo form_hidden("recordid",$news['newsid']);
echo form_hidden("fieldname","newsid");
echo form_hidden("dpage","news/editNews");

echo anchor("news/updateOneField", "Delete Video?","class=btn");

echo form_close(); 
```

# objective-c - 使用虚拟键盘中的 Tap Go/Enter 按钮触发 IBAction 或方法

> ID：13235287
> 
> 赞同：0
> 
> 时间：2012-11-05T15:32:50.620
> 
> 标签：objective-c, ios, xcode

使用文本框，每当我们点击虚拟键盘中的 Go 按钮时，我都会调用一个方法，任何建议如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:38:11.400

您可以使用以下方法捕获返回键：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    /* call whatever methods you need */
    return YES;
} 
```

但首先，您的视图控制器需要设置为 textField 的委托。 [https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

# c# - 将字符串属性绑定到 TextBlock

> ID：13235288
> 
> 赞同：0
> 
> 时间：2012-11-05T15:32:55.910
> 
> 标签：c#, wpf, data-binding

我有一个在代码中看起来像这样的用户控件：

```
using System;
using System.Windows;
using System.Windows.Controls;

namespace Client
{
    public partial class Spectrum : UserControl
    {
        public string AntennaName { get; set; }

        public Spectrum()
        {
            InitializeComponent();
        }
    }
} 
```

和xaml（不是全部，而是重要部分）：

```
<UserControl x:Class="Client.Spectrum"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Client"
             mc:Ignorable="d" d:DesignHeight="150" d:DesignWidth="350" 
             Background="#253121" BorderBrush="Black" BorderThickness="1"
             DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel
        <TextBlock Margin="10,3,0,0" Foreground="White" 
                   FontWeight="Bold" FontStyle="Italic" TextAlignment="Left"
                   Text="{Binding AntennaName}"/>
    </StackPanel>
</UserControl> 
```

如您所见，我试图将 AntennaName 属性绑定到 TextBlock.Text 属性，但运气不佳。你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:37:10.827

当属性更改时，您无法通知绑定系统。

您应该创建一个依赖属性，它将自动使用 WPF 中现有的通知系统。
为此，请键入`propdp`并按下`Tab`以激活 Visual Studio 的内置代码片段。

或者，创建一个单独的 ViewModel 类并实现 INotifyPropertyChanged。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:44:58.803

示例：

```
public partial class MyControl: UserControl
{
  public CoalParameterGrid( )
  {
    InitializeComponent( );
  }

  public static DependencyProperty DarkBackgroundProperty = DependencyProperty.Register( "DarkBackground", typeof( Brush ), typeof( MyControl) );

  public Brush DarkBackground
  {
    get
    {
      return (Brush)GetValue( DarkBackgroundProperty );
    }
    set
    {
      SetValue( DarkBackgroundProperty, value );
    }
  }
} 
```

# sharepoint-2010 - SP 2010：两个 WFE 工作，另一个失败：Conn 字符串 - 集成安全性“用户 'NT AUTHORITY\ANONYMOUS LOGON 登录失败”

> ID：13235289
> 
> 赞同：1
> 
> 时间：2012-11-05T15:33:02.017
> 
> 标签：sharepoint-2010, windows-authentication, bcs, sharepoint2010-bcs, sharepoint-security

在 Sharepoint 2010 中，我们有一个包含三个 WFE 的场。

我们使用**带有集成安全性的连接字符串的 BDC**到 SQL Server 2008 R2 DB，然后使用链接到该 BDC 的列表来显示表的内容（简单的选择语句）。**我们希望连接使用应用程序池帐户**，因为我们对用户使用表单身份验证并且不能模拟他们。它具有读取数据库和表的权限。Kerberos 未在网络中实现。

**在两个 WFE 中，BDC 正常工作**，列表显示表的内容，**在另一个 WFE 中，它没有并且失败，并显示“用户 'NT AUTHORITY\ANONYMOUS LOGON 登录失败”消息。**

我们用一个简单的 ASP.Net 站点进行了测试，该站点显示一个 gridview 链接到同一个表，在 web.config 中具有与 BDC 相同的连接字符串，我们在相同的 IIS 和相同的应用程序池中创建了一个网站，它起作用了，显示了表格的内容。

这第三个 WFE 后来被添加到场中，到目前为止，文件系统 conf 文件、IIS 配置等中的所有比较都产生了相同的配置。¿ 我们是否遗漏了什么？

# asp.net - 将一个 div 放在另一个的右下角

> ID：13235296
> 
> 赞同：0
> 
> 时间：2012-11-05T15:33:28.583
> 
> 标签：asp.net, html, css

我目前有两个`div`s 在另一个 s 中`div`，一个是 a ，其中`table`包含一个通过使用位于它旁边的 a 更新的项目列表`textbox`，我试图将其定位`textbox`在右下角，我尝试过浮动/定位和它似乎对它没有任何实际影响，第一张图片是它现在的样子，第二张图片是我想要的样子。 ![当前位置：](../Images/f83534d7aacfb04b491562a25a8c4a44.png)

![想要的效果](../Images/da6bd11794e925c4b743bb8e5ce17790.png)

**ASP.NET 代码：**

```
<asp:Content ID="Content1" ContentPlaceHolderID="PrimaryContentPlaceHolder" runat="Server">
<%--<div style="margin-bottom: 20px; width: 300px;">--%>
    <table class="Grid" style="width:300px;float:left; margin-right:10px;" >
        <tr>
            <th>
                Banned Domains
            </th>
            <td runat="server" id="bannedDomains">
            </td>
        </tr>
    </table>
   <%-- </div>--%>
<div style="position:relative; bottom:0px;">
    <asp:TextBox ID="bannedDomainText" runat="server" Rows="5" TextMode="SingleLine"
        Width="150px" Height="19px" />
    <asp:Button ID="btnSave" runat="server" OnClick="btnSave_Click" style="padding: 2px 5px 2px 5px;" PostBackUrl="~/admin/bespoke/Green-FreeShipping.aspx"
        Text="Add to List" />
</div>
</asp:Content> 
```

**CSS：**

```
 #Content table
{
border-collapse: collapse;
}

#Content table.Grid 
{
width: 100%;
clear: both;
margin: 12px 0 12px 0;
}

#Content table.Grid th, #Content table.Grid td
{
background-color: White;
border-top: 1px solid #cccccc;
padding: 2px 6px 2px 6px;
}

#Content table.Grid th
{
background-color: #f5f5f5;
}

#Content table tr:hover td
{
background: #f9f9f9;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:45:01.847

给你，像这样使用它

[**演示**](http://jsfiddle.net/hcWG3/)

CSS

```
.Grid {
    border: 1px solid #ff0000;
    height: 400px;
    width:300px;
    position: relative;
}

div.wrapper {
    position: relative;
    display: inline-block;
}

textarea {
    position: absolute;
    bottom: 0;
    right: -200px;
} 
```

HTML

```
<div class="wrapper">
<table class="Grid">
    <tr>
        <th>
            Banned Domains
        </th>
       <td runat="server" id="bannedDomains"></td>
    </tr>
</table>
<textarea></textarea>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:44:15.843

这是一种方法：http: [//jsfiddle.net/5DjM9/](http://jsfiddle.net/5DjM9/)

```
<div class="div1">LEFT</div>
<div class="div2"><div>RIGHT</div></div>

.div1 {
width:200px;
height:200px;
background:#ccc;
float:left;
margin-right:10px;
}

.div2 {
width:200px;
height:200px;
background:#ccc;
float:left;
position:relative;
}
.div2 div {
width:200px;
position:absolute;
bottom:0;
background:red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:17:17.103

演示：http: [//jsfiddle.net/nobuts/WzUjr/](http://jsfiddle.net/nobuts/WzUjr/)

```
<div class="big_box">
    <div class="cols"><div id="table">div/table</div></div>
        <div class="cols"><div id="textbox">div/textbox</div></div>
    <br style="clear:both">
</div>

.big_box{
    background:red;
    color:#000;
    height:250px;
    padding:5px;
}

.cols{
    height:240px;
    float:left;
    margin:5px;
    position:relative;
}
#table{
    background:#ff9900;
    height:100%;
    width:250px;
}
#textbox{
    background:#ff9900;
    bottom:0px;
    height:30px;
    top:auto;
    position:absolute;
    width:100px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:33:06.727

问题是`<table>`元素上的 float:left 被“卡住”了，解决方案是：

1.  在( 它可以是空的 )之后添加一个`<div style="clear:both;"></div>`权利。`<table>`
2.  从桌子上取下浮动并玩位置。

希望它有所帮助:-)

# python-2.7 - 从 shell 和 iPython 运行

> ID：13235299
> 
> 赞同：3
> 
> 时间：2012-11-05T15:33:49.783
> 
> 标签：python-2.7, ipython

不知道如何解决我遇到的问题。我通过命令行以以下格式执行我的代码：

```
python program.py arg1 arg2 
```

在大多数情况下这很好，但我刚得到 iPython，我想在 iPython 中启动代码以使用它进行调试。但是，我找不到传递参数的最佳方式。

`executable('program')`这还不够

有点麻烦`subprocess`，不能让它工作

```
subprocess.call([sys.executable, 'program.py','arg1']) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:42:22.963

您应该能够运行`ipython program.py arg1 arg2`. 如果您想在脚本运行后与程序交互，请执行`ipython -i program.py arg1 arg2`. -i 标志对 ipython 的作用与对 python 的作用相同。

如果您已经在 ipython 中并且想要运行您的脚本，您可以使用 ipython 魔术函数来运行带有`run program.py arg1 arg2`. 您还可以将 -m 选项与 run 函数一起使用，它的工作方式类似于常规 python 上的 -m 选项，以按名称而不是脚本路径运行模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T23:19:26.547

ipython 将命令行上的多个参数视为要执行的文件。所以，这是我为处理类似事情所做的：

```
ipython -i --InteractiveShellApp.code_to_run="%run my_prog.py arg1 arg2" 
```

%run 是一个 ipython 魔术命令。要了解它，请在 ipython 提示符下键入：

```
In [1]: %run? 
```

键入以下内容以了解该命令行选项：

```
$ ipython --help-all 
```

# c++ - 如何按名称访问根命名空间 - 而不是简单的 `::`？

> ID：13235302
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:33:51.407
> 
> 标签：c++, namespaces, cocos2d-x

我正在开发一个*c++*项目（我是一个完整的 c++ n00b），该项目使用根命名空间来访问`::tolower`以下代码行中的方法，但是我更改了一些构建设置并出现错误。

```
CCString * CCBReader::toLowerCase(CCString * pString) {
    std::string copy(pString->getCString());
    std::transform(copy.begin(), copy.end(), copy.begin(), ::tolower);
    return CCString::create(copy.c_str());
} 
```

构建更改对于大多数项目都是必不可少的，并且更改这些不是一种选择。因此，作为一种解决方法，我想尝试使用根命名空间作为前缀。例如：

```
std::transform(copy.begin(), copy.end(), copy.begin(), rootns::tolower); 
```

这可能吗？如果是这样，怎么做？

由于你们中的许多人已经无视我的理想解决方案是不可能的，并询问错误是什么，看看您是否可以自己解决，这里是错误的相关部分：

```
error: '::tolower' has not been declared 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:35:29.137

根命名空间没有名称，因此没有其他方法可以解决它。

相反，您将不得不重新检查您的构建更改，并可能考虑您得到的错误到底是什么。该错误可能与命名空间无关。它可能是由代码前面的其他问题触发的。

# android - 释放异常相机预览后调用的方法

> ID：13235306
> 
> 赞同：11
> 
> 时间：2012-11-05T15:33:58.443
> 
> 标签：android, camera

我有一个使用我的 CameraPreview 类的活动类（CameraActivity）。在“OnResume”中，相机和预览被启动。在“OnPause”中，我正在释放相机资源。当应用程序启动时，“OnResume”内一切正常，但是当我通过意图启动另一个活动（例如在浏览器中打开 url）然后回到我的活动时，在“OnResume”发起的 CamerPreview 类中发生异常。请在下面找到代码：

**//CameraActivity 类**

```
public void onResume(){
    super.onResume();
    Log.d("inside onResume, camera==="+mCamera, "inside onResume");
    try {
        if(mCamera==null)
        {

    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        autoFocusHandler = new Handler();
        mCamera = getCameraInstance();
        int rotation = this.getWindowManager().getDefaultDisplay().getRotation();

        scanner = new ImageScanner();
        scanner.setConfig(0, Config.X_DENSITY, 3);
        scanner.setConfig(0, Config.Y_DENSITY, 3);

        mPreview = new CameraPreview(this, mCamera, previewCb, autoFocusCB);

        FrameLayout preview = (FrameLayout)findViewById(R.id.cameraPreview);
        preview.addView(mPreview);

    }

} catch (Exception e) {
    // TODO Auto-generated catch block
    Log.e("onResume",Log.getStackTraceString(e));
}

public void onPause{
    try {
        super.onPause();
        if (mCamera != null) {
            previewing = false;
            mCamera.stopPreview();
                mCamera.setPreviewCallback(null);
                mCamera.release();
                mCamera = null;
                mPreview=null;

    }
} catch (Exception e) {
    // TODO Auto-generated catch block
    Log.e("releaseCamera",Log.getStackTraceString(e));
}
}

 public static Camera getCameraInstance(){
        Camera c = null;
        try {
            c = Camera.open();
        } catch (Exception e){
            Log.e("getCameraInstance",Log.getStackTraceString(e));

    }
    return c;
} 
```

**// 以下是 CameraPreview 类：**

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private SurfaceHolder mHolder;
    Camera mCamera;
    PreviewCallback previewCallback;
    AutoFocusCallback autoFocusCallback;
    private int rotation;
    public int getRotation() {
        return rotation;
    }

    public void setRotation(int rotation) {
        this.rotation = rotation;
    }

    public CameraPreview(Context context, Camera camera,
                         PreviewCallback previewCb,
                         AutoFocusCallback autoFocusCb) {
        super(context);
        mCamera = camera;
        previewCallback = previewCb;
        autoFocusCallback = autoFocusCb;

        /*
         * Set camera to continuous focus if supported, otherwise use
         * software auto-focus. Only works for API level >=9.
         */
        /*
        Camera.Parameters parameters = camera.getParameters();
        for (String f : parameters.getSupportedFocusModes()) {
            if (f == Parameters.FOCUS_MODE_CONTINUOUS_PICTURE) {
                mCamera.setFocusMode(Parameters.FOCUS_MODE_CONTINUOUS_PICTURE);
                autoFocusCallback = null;
                break;
            }
        }
        */

        // Install a SurfaceHolder.Callback so we get notified when the
        // underlying surface is created and destroyed.
        mHolder = getHolder();
        mHolder.addCallback(this);

        // deprecated setting, but required on Android versions prior to 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, now tell the camera where to draw the preview.
        try {
            if(mCamera==null){
                mCamera=Camera.open();
            }
            mCamera.setPreviewDisplay(holder);
        } catch (IOException e) {
            Log.d("DBG", "Error setting camera preview: " + e.getMessage());
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {

        // Camera preview released in activity
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        /*
         * If your preview can change or rotate, take care of those events here.
         * Make sure to stop the preview before resizing or reformatting it.
         */
        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

try{
            mCamera.setPreviewDisplay(mHolder);
            mCamera.setPreviewCallback(previewCallback);
            mCamera.startPreview();
            mCamera.autoFocus(autoFocusCallback);
        } catch (Exception e){
            Log.d("DBG", "Error starting camera preview: " + e.getMessage());
        }
    }

} 
```

**这是来自 logCat：**

```
11-05 10:14:34.585: E/AndroidRuntime(7864): FATAL EXCEPTION: main
11-05 10:14:34.585: E/AndroidRuntime(7864): java.lang.RuntimeException: Method called after release()
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.hardware.Camera.setPreviewDisplay(Native Method)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.hardware.Camera.setPreviewDisplay(Camera.java:393)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at com.intagleo.qraugmented.detection.camera.CameraPreview.surfaceCreated(CameraPreview.java:74)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.SurfaceView.updateWindow(SurfaceView.java:552)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:215)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.View.dispatchWindowVisibilityChanged(View.java:4027)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewRoot.performTraversals(ViewRoot.java:790)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.os.Looper.loop(Looper.java:130)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at android.app.ActivityThread.main(ActivityThread.java:3687)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at java.lang.reflect.Method.invokeNative(Native Method)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at java.lang.reflect.Method.invoke(Method.java:507)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-05 10:14:34.585: E/AndroidRuntime(7864):     at dalvik.system.NativeStart.main(Native Method) 
```

**编辑**

我更新了“surfaceDestroyed”并按照建议放置日志，但现在我在“onPause”-> onSurfaceDestroyed 中遇到异常。最初 onPause 执行良好。

1-通过方法“getCameraInstance”在活动类的“onResume”中创建相机实例，并将mCamera实例传递给CameraPreview类。我尝试更改它，以便仅在“onSurfaceCreated”内部创建相机实例并将 mCamera 实例分配回活动类，但它不起作用。我还通过调试注意到“CameraPreview”类的previewCallBack 成员第一次有效，但第二次“CameraPreview”类的“previewCallBack”成员为空。

请注意，第一次调用“onResume”时，一切正常，但是当它在 onPause 之后第二次运行时，最初会发生异常，尽管 onResume 中的代码相同。

```
11-06 01:25:28.375: I/onResume(4332): INITIATED
// Workinf fine till now. Now opening another intent activity
11-06 01:26:23.500: I/onPause(4332): INITIATED
11-06 01:26:23.804: "OnSurfaceDestroyed": "Initiated"
11-06 01:26:23.945: E/AndroidRuntime(4332): FATAL EXCEPTION: main
11-06 01:26:23.945: E/AndroidRuntime(4332): java.lang.RuntimeException: Method called after release()
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.hardware.Camera.stopPreview(Native Method)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at com.intagleo.qraugmented.detection.camera.CameraPreview.surfaceDestroyed(CameraPreview.java:85)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.SurfaceView.reportSurfaceDestroyed(SurfaceView.java:596)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.SurfaceView.updateWindow(SurfaceView.java:490)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:215)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.View.dispatchWindowVisibilityChanged(View.java:4027)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewGroup.dispatchWindowVisibilityChanged(ViewGroup.java:720)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewRoot.performTraversals(ViewRoot.java:790)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.os.Looper.loop(Looper.java:130)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at android.app.ActivityThread.main(ActivityThread.java:3687)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at java.lang.reflect.Method.invokeNative(Native Method)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at java.lang.reflect.Method.invoke(Method.java:507)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
11-06 01:26:23.945: E/AndroidRuntime(4332):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-05-10T17:02:13.420

当您将相机添加到 FrameLayout 时，如下所示：

```
FrameLayout preview = (FrameLayout)findViewById(R.id.cameraPreview);
preview.addView(mPreview); 
```

该`surfaceCreated`方法将被调用，因此`mCamera.setPreviewDisplay(holder);`将被调用。

当您创建/打开一个新相机时，`FrameLayout`仍然有您以前的相机，因此`surfaceCreated`除了您的新相机外，它还将被调用。

你应该做的是，`FrameLayout`当你释放你的相机（在`onPause()`方法上）时移除你以前的相机，如下所示：

```
preview.removeView(mPreview); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-30T07:29:01.000

丹是对的。也见[这里](https://stackoverflow.com/questions/11022031/managing-camera-preview-surfaceview-throughout-the-activity-lifecycle)。

代码示例：

```
public class MainActivity extends Activity {
    private FrameLayout mFlCameraPreview;
    private Camera mCamera;
    private CameraPreview mCameraPreview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mFlCameraPreview = (FrameLayout) findViewById(R.id.main_fl_camera_preview);
    }

    @Override
    protected void onResume() {
        super.onResume();
        if (mCamera == null) {
            mCamera = getCameraInstance();
        }

        if (mCameraPreview == null) {
            mCameraPreview = new CameraPreview(this, mCamera);
            mFlCameraPreview.addView(mCameraPreview);
        }

    }

    @Override
    protected void onPause() {
        super.onPause();
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.release();
            mCamera = null;
        }

        if (mCameraPreview != null) {
            mFlCameraPreview.removeView(mCameraPreview);
            mCameraPreview = null;
        }
    }

    public static Camera getCameraInstance() {
        Camera camera = null;
        try {
            camera = Camera.open();
        } catch (Exception e) {

        }
        return camera;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:57:34.383

**编辑**

这是一个很难回答的问题，我现在不能 100% 确定是什么导致了你的异常。我在下面包含了我的相机代码，希望这会有所帮助，我使用`startCamera()`和`stopCamera()`调用的方法`onPause`和`onResume`. 我也只`CameraPreview`在我的类中创建一个新实例`onCreate`，`onResume`除非我的`cameraView == null`. 我们做一些不同的事情。希望下面的代码会有所帮助，也许您可​​以使用它来使您的代码正常工作：

*PS：一切都对我有用。即进入其他活动等。我没有测试的生命周期的唯一部分是`onDestroy`，但那是因为我的应用程序被设计为在这个周期的开头开始。*

**主要活动：**

```
boolean cameraReleased = false;

@Override
protected void onPause() {
    Log.i("onPause", "CALLED:: cameraReleased = " + cameraReleased);
    Log.i("onResume", "CALLED:: cameraView = " + cameraView.toString());
    if (cameraReleased == false) {
        image = null;
        imageResult.setImageBitmap(null);
        imageResult.setImageResource(0);
        cameraView.stopCamera();
        cameraReleased = true;
    }

    if (cameraView == null) {
        Log.i("onPause", "cameraView == null");
        cameraView = new JJCameraSurfaceView(getApplicationContext());
        imageResult = new ImageView(getApplicationContext());
    }
    super.onPause();
}

@Override
protected void onDestroy() {
    Log.e("onDestroy", "INITIATED");
    super.onDestroy();
}

@Override
protected void onResume() {
    Log.i("onResume", "CALLED:: cameraReleased = " + cameraReleased);
    Log.i("onResume", "CALLED:: cameraView = " + cameraView.toString());
    if (cameraReleased == true) {
        image = null;
        imageResult.setImageBitmap(null);
        imageResult.setImageResource(0);
        cameraView.startCamera();
    }

    if (cameraView == null) {
        Log.i("onResume", "cameraView == null");
        cameraView = new JJCameraPreview(getApplicationContext());
        imageResult = new ImageView(getApplicationContext());
    }

    super.onResume();
}

@Override
public void onBackPressed() {
    // If Statement used to get out of my camera view and back to my MainActivity - Same Class
    if (“Camera Preview or Image Result is displayed”) {
        cameraView.stopCamera();
        image = null;
        imageResult.setImageBitmap(null);
        imageResult.setImageResource(0);
        cameraView.startCamera();
        return;
    }

    Log.i("onBackPressed", "WAS PRESSED");
    super.onBackPressed();
} 
```

**相机预览：**

```
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
    Log.w("surfaceChanged", "STARTED");
    if (camera != null) {
        Log.w("surfaceChanged", "camera = NOT NULL");
        Camera.Parameters cParams = camera.getParameters();
        cParams.setPreviewSize(width, height);
        cParams.setSceneMode(Parameters.SCENE_MODE_NIGHT);
        camera.setParameters(cParams);
        camera.startPreview();
    }
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.w("surfaceCreated", "STARTED");
    if (camera == null) {
        camera = Camera.open(); 
    }
    try {
        camera.setPreviewDisplay(mHolder);
    } catch (Exception e) {
        Log.e("setPreviewDisplay", "FAILED: " + e.getMessage());
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    Log.w("CameraSurfaceDestroyed", "INITIATED");
    camera.stopPreview();
    camera.release();
    camera = null;
}

public void startCamera() {
    Log.w("startCamera", "CALLED");
    mHolder = getHolder();
    surfaceCreated(mHolder);
    camera.startPreview();
    mHolder.addCallback(this);
}

public void stopCamera() {
    mHolder = getHolder();
    mHolder.removeCallback(this);
    camera.stopPreview();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T04:19:35.227

我的代码遇到了类似的问题，该问题因`Method called after release()`错误而强制关闭。

我正在调用一个`SetupCamera()`方法，在`OnResume()`该方法中检查一个空`camera`对象，然后调用`camera.Open()`.

解决我的问题是摆脱空检查，并在阅读 Camera Docs 后调用它是否[为](http://developer.android.com/reference/android/hardware/Camera.html)`camera.Open()`空（我已经设置好） 。`camera = null``onPause`

我知道这对于追查我的问题并不确定，但它绝对对我有用！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-09T20:42:34.850

我的工作解决方案：首先：在`CameraActivity`类中声明`mCamera`为数组：

```
Camera mCamera[] = new Camera[1]; 
```

第二：构造函数的声明`CameraPreview`必须是这样的：

```
public CameraPreview(Context context, Camera[] camera,
                     PreviewCallback previewCb,
                     AutoFocusCallback autoFocusCb) {
      mCamera = camera;
      ...
} 
```

但`mCamera`在`CameraPreview`类中必须声明如下：

```
Camera[] mCamera; // without instantiating of the array! 
```

最后：在所有方法中的两个类中，您应该将所有引用替换`mCamera`为`mCamera[0]`

PS：对不起我的英语

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T12:07:49.930

试试下面的代码，而不是重写 onPause() 和 onResume()，重写 onStop() 和 onRestart()。在活动生命周期中，当活动不可见时调用 onStop()，下一个生命周期方法调用将调用 onRestart()。看看下面的代码。

```
@Override
    protected void onStop() {
        super.onStop();
        try {
            m_camera.stopPreview();
            m_camera.release();
            preview.removeView(m_CameraPreview);
/*
m_CameraPreview is the object of the class that looks like this :                                public class CameraSurfaceView extends SurfaceView implements Callback
*/
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }
    @Override
    protected void onRestart() {
        super.onRestart();
        m_camera=getCameraInstance();//Initialize the camera in your own way
        m_CameraPreview = new CameraSurfaceView(this, m_camera);
       preview = (FrameLayout)findViewById(R.id.camera_preview);   
        preview.addView(this.m_CameraPreview);
/* 
*camera_preview is the id of the framelayout defined in xml file and preview is *the instance of FrameLayout. 
*/
    } 
```

正如 Dan 所说，框架布局将保留先前的相机实例，并且除了创建竞争条件的新对象之外，还将创建其表面视图回调。因此，您需要在 onStop() 中释放它并在 onRestart() 中重新初始化。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-03T06:12:24.887

我遇到了同样的错误。下面的序列解决了我的问题。

呼入 `getHolder().removeCallback(this);`_`surfaceDestroyed()`

称呼

```
 private void releaseCameraAndPreview() {

        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewCallback(null);
            mCamera.release();
            mCamera = null;
        }

        if(mPreview != null){
            mPreview.destroyDrawingCache();
            mPreview.mCamera = null;
        }

    } 
```

在`onPause`

称呼

```
 private boolean safeCameraOpenInView(View view) {
        boolean qOpened = false;
        releaseCameraAndPreview();
        mCamera = getCameraInstance();
        mCameraView = view;
        qOpened = (mCamera != null);

        if(qOpened == true){
            mPreview = new CameraPreview(getActivity().getBaseContext(), mCamera,view);
            preview = (FrameLayout) view.findViewById(R.id.camera_preview);
            preview.addView(mPreview);
            mPreview.startCameraPreview();
        }
        return qOpened;
    } 
```

在`onCreateView()`.

# php - windows下的命令行脚本

> ID：13235307
> 
> 赞同：0
> 
> 时间：2012-11-05T15:34:09.243
> 
> 标签：php, windows

我正在尝试使用以下变体从 Windows 中的命令行运行 php 脚本：

```
php script.php
php -f script.php 
```

这两个命令都只是打印出整个脚本，但不执行脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:35:36.350

听起来你忘了用`<?php`.

块外的 PHP 脚本中的内容`<?php`直接发送到 STDOUT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:36:12.257

没有脚本的内容，很难看到问题。

很可能是您没有使用`<?php ?>`标签或使用简写。尝试使用完整的`<?php ?>`标签。

# java - 什么是工作线程，它们在反应器模式中的作用是什么？

> ID：13235312
> 
> 赞同：27
> 
> 时间：2012-11-05T15:34:33.693
> 
> 标签：java, multithreading, design-patterns, reactor

我试图理解 Reactor 模式（并发），但在许多示例中，他们都在谈论“工作线程”。什么是工作线程？它们与“普通”线程有何不同？它们在反应器模式中的作用是什么？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-05T15:41:46.707

[Reactor 模式](http://en.wikipedia.org/wiki/Reactor_pattern)与工作线程一起使用以克服应用程序中的常见情况：您最终需要做很多工作，但您不知道哪些工作以及何时创建线程是一项昂贵的操作。

这个想法是你创建了很多一开始不做任何事情的线程。相反，他们“等待工作”。当工作到达时（以代码的形式），某种执行器服务（反应器）从池中识别空闲线程并分配它们要做的工作。

这样，您可以付出代价来创建所有线程一次（而不是每次都必须完成一些工作）。同时，您的线程是通用的；他们将做分配给他们的任何工作，而不是专门从事特定的工作。

对于实现，请查看[线程池](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-05T15:37:29.373

> 什么是工作线程，它们在反应器模式中的作用是什么？

我假设您正在谈论[类似线程池的文档](http://docs.oracle.com/javase/tutorial/essential/concurrency/pools.html)：

> java.util.concurrent 中的大多数执行器实现都使用线程池，它由*工作线程*组成。这种线程与其执行的 Runnable 和 Callable 任务是分开存在的，通常用于执行多个任务。

`Runnable`工作线程是普通线程，但它们与它们工作的或`Callable`类分开存在。如果您扩展或使用参数`Thread`构造 a ，则任务直接与对象相关联。`Thread``Runnable``Thread`

当您使用`Executors.newFixedThreadPool(10);`（或其他类似方法）创建线程池时，您将创建一个由 10 个线程组成的池，这些线程可以运行任意数量的提交到池的不同`Runnable`或`Callable`类。在被子下面，`Thread`由于它们的包裹方式，它们仍然更加灵活。

就[反应器模式](http://en.wikipedia.org/wiki/Reactor_pattern)而言，不同类型的事件由类似的处理程序线程运行。线程不绑定到单个事件类，但会在它们发生时运行任意数量的不同事件。

# javascript - 更改使用文字初始化创建的对象的原型

> ID：13235313
> 
> 赞同：4
> 
> 时间：2012-11-05T15:34:35.033
> 
> 标签：javascript

假设我只想使用[对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Working_with_Objects#Using_object_initializers)（而不是构造函数）。我有一个这样的对象：

```
var o = {
  name : "Jack"
} 
```

如果我想创建另一个对象，它的原型是`o`我使用这个语法：

```
var u = Object.create( o );
console.log( u.name );//prints Jack
u.name = "Jill";
console.log( u.name );//prints Jill 
```

工作正常！没问题。但是现在在运行时我想将原型更改`u`为其他东西。如果`u`是使用这样的构造函数创建的：

```
function U () {}
U.prototype.name = "Jack";
var u = new U;
console.log( u.name );//prints Jack 
```

或者

```
function U () {
  this.name = "Jack";
}
var u = new U;
console.log( u.name );//prints Jack 
```

**但是当使用构造函数时，我可以完全改变原型**：

```
function U () {}
//totally changed the prototype object to another object
U.prototype = {
  dad : "Adam"
}
var u = new U;
console.log( u.dad );//prints Adam 
```

然后，我添加到原型中的任何内容`U`都会自动添加到在这些更改之后创建的每个对象中。但是如何使用 Object 字面量获得相同的效果？

请提供语法简洁的最简单的解决方案。我只想知道是否可以手动执行此操作。我也不想使用非标准[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)关键字。

我搜索了 Stackoverflow，这实际上并不是以下问题的重复：

*   [将原型添加到 JavaScript 对象文字](https://stackoverflow.com/questions/1592384/adding-prototype-to-object-literal)
*   [将原型添加到对象字面量](https://stackoverflow.com/questions/3452414/adding-a-prototype-to-an-object-literal)

因为我想在创建后以标准方式更改原型（如果可能的话）。类似的东西`Object.setPrototype()`会很完美，但那个功能不存在！有没有其他方法可以简单地设置使用对象字面量初始化创建的对象的原型？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:37:06.750

使用当前规范，一旦实例化对象的原型，您就无法*更改它（例如，换出一个并换入另一个）。**（但见下文，情况可能会发生变化。）*您只能*修改*对象的原型。但这可能就是你想要的，看看你的问题。

要清楚区别：

```
var p1 = {
    foo1: function() {
        console.log("foo1");
    }
};
var p2 = {
    foo2: function() {
        console.log("foo1");
    }
};

var o = Object.create(p1);
o.foo1(); // logs "foo1"
o.foo2(); // ReferenceError, there is no foo2
// You cannot now *change* o's prototype to p2.
// You can modify p1:
p1.bar1 = function() { console.log("bar1"); };
// ...and those modifications show up on any objects using p1
// as their prototype:
o.bar1(); // logs "bar1"
// ...but you can't swap p1 out entirely and replace it with p2. 
```

回到你的问题：

> 如果你是使用这样的构造函数创建的......那么我添加到原型中的任何内容`U`都会自动添加到在这些更改之后创建的每个对象中。但是如何使用 Object 字面量获得相同的效果？

通过修改您作为原型传入的对象`Object.create`，如上所述。请注意添加`bar1`to如何`p1`使它在 上可用`o`，即使`o`它是在添加之前创建的。就像构造函数一样，原型关系是持久的，`o`它不会得到`p1`创建时的快照，它会得到一个持久的链接。

* * *

ES.next 看起来可能有“[设置原型运算符](http://wiki.ecmascript.org/doku.php?id=harmony%3aproto_operator)”（`<|`），这将使它成为可能。但是目前还没有*标准*的机制。一些引擎实现了一个名为的伪属性`__proto__`，它现在提供此功能，但它不是标准化的。

# java - 使用 XML 文件 (log4j2.xml) 配置 Log4j 2

> ID：13235317
> 
> 赞同：27
> 
> 时间：2012-11-05T15:34:53.233
> 
> 标签：java, eclipse, log4j

我想使用新的 Log4J 2 - Java Logging Framework。一切正常，但我尝试了一个小时后加载自定义配置文件来配置日志记录（如日志级别）。

这是我的 log4j2.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="OFF">
  <appenders>
    <Console name="Console" target="SYSTEM_OUT">
      <PatternLayout pattern="%d{HH:mm:ss} [%t] %-5level %logger{36} - %msg%n"/>
    </Console>
  </appenders>
  <loggers>
    <root level="error">
      <appender-ref ref="Console"/>
    </root>
  </loggers>
</configuration> 
```

我尝试了以下方法，但没有任何效果：

*   移动 log4j2.xml 文件，使其位于默认包中。
*   将 log4j2.xml 文件移动到项目中的任何位置
*   将 log4j2.xml 文件命名为“log4j.xml”
*   在您的项目中创建一个文件夹，将您的 log4j2.xml 文件放在那里并将该文件夹添加到您的运行时类路径

由于[官方网站](http://logging.apache.org/log4j/2.x/)无法帮助我，我希望你能帮助我让 Log4j 2 与我的配置文件一起工作。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-05T15:59:49.937

**重要提示：**确保配置文件的名称是`log4j2.xml`（注意`2`句号之前）而不是`log4j.xml`

我的猜测是什么都没有发生，因为没有使用错误级别记录任何内容。您可能想尝试添加另一个记录器，如下所示：

```
<logger name="com.foo.Bar" level="trace">
  <appender-ref ref="Console"/>
</logger> 
```

看起来[配置](http://logging.apache.org/log4j/2.x/manual/configuration.html)部分可能是一个很好的资源。

为了进一步详细说明，您指定了一个级别设置为“错误”的记录器：

```
<root level="error">
  <appender-ref ref="Console"/>
</root> 
```

这意味着只有使用 Level.ERROR 记录的消息才会显示在日志中。添加具有较少限制级别的记录器将允许更多消息出现在日志中。我建议您查看手册的[架构](https://logging.apache.org/log4j/2.x/manual/architecture.html)部分（如果您向下滚动页面，您将看到解释日志级别的表格）。或者，您可以将根记录器的级别更改为跟踪（而不是添加新记录器）

给定您指定的配置，执行下面的代码会产生类似`13:27:50.244 [main] ERROR com.example.Log4j2Tester - testing ERROR level`

```
package com.example;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

public class Log4j2Tester {
    private static final Logger LOG = LogManager.getLogger(Log4j2Tester.class);

    public static void main(String[] args) {
        LOG.error("testing ERROR level");

//if you change the level of root logger to 'trace'
//then you'll also see something like
//    13:27:50.244 [main] TRACE com.example.Log4j2Tester - exiting application
        LOG.trace("exiting application");
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-08T21:13:57.337

提示：使用自定义 log4j 文件。（而不是默认的“log4j2.xml”东西）。在某些情况下，拥有多种配置可能很有用。

以防万一有人使用 maven 并希望配置 log4j2，以下是您在 pom.xml 中需要的内容：

```
 <systemProperties>
                    <property>
                        <name>/log4j.configuration</name>
                        <value>.../../Foo-log4j.xml</value>
                    </property>
                </systemProperties> 
```

默认情况下，“log4j2.xml”是预期的文件名。但是，我们可以通过设置 log4j.configuration 系统属性来覆盖它。在上面的示例中，我使用了自定义配置文件作为“Foo-log4j.xml”。

您可以通过 CLI 执行相同操作：

```
-Dlog4j.configuration="Foo-log4j.xml" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T15:29:36.753

除了使用类路径根文件夹中的默认配置文件log4j2.xml（或log4j2-test.xml）外，还可以使用该系统属性指定配置文件路径（在java命令行中使用-D）

```
log4j.configurationFile='xxxx/xxx/xxx' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-15T18:15:10.090

我的 2 美分：

软件系统：log4j 2、NetBeans 和 TestNG。

我有同样的问题，但测试环境。

默认情况下，（即在位于 src/ 的 log4j2.xml 文件中）日志记录级别设置为错误。但是在运行测试时，我希望记录是跟踪的。而且，当然记录到一些或多或少的硬编码文件。

也就是说，最初我做了类似的事情：

```
public class someTestClass {
       static final Logger log=LogManager.getLogger("test.someTestClass");
......
@Test
public void SomeMethod(){

System.setProperty("log4j.configurationFile", "resources/log4j2_conf.xml");

log.trace("This will not show because the default logging level is ERROR
and the resources/log4j2_conf.xml is not loaded");

} 
```

问题是在执行System.setProperty指令的时候，log4j已经设置好了（也就是先执行静态的最终Logger log =...）

我所做的是像这样使用@BeforeClass：

```
 public class someTestClass {
    Logger log;      
    @BeforeClass
    public void setLogger(){
        SetEnv.SetEnvironment();
        log = LogManager.getLogger("TestRealClientRealServer");
    }
......
    @Test
    public void SomeMethod(){

        log.trace("This will show, because in log4j2_conf.xml
 the root level is set to TRACE");

    }
} 
```

顺便说一句，resources/ 可以放在测试包中，这样您就不会发布“测试”log4j 设置。

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-09T11:50:25.603

给 Eclipse 用户的提示：

**右键单击项目，然后单击“刷新”。确保您可以在 Eclipse 中看到 log4j2.xml 文件。**

完整答案在这里： [log4j 2 - 配置问题](https://stackoverflow.com/questions/14733698/log4j-2-configuration-issue/19875543#19875543)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-05T20:50:54.710

这对于解决*“如果正在读取日志 conf 文件我不”*问题更有价值。使用选项启动您的 jvm `-Dlog4j.debug`。当它启动时，它将打印它尝试读取的所有日志配置文件。它会一一列出。最后显示的是系统使用的那个。

如果您在 JEE 服务器中，您可能需要将它放在某处的“jvm.options”文件中。如果它是一个 jar，只需使用 -Dlog4j.debug 运行 java。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-05-20T00:37:07.053

将**LOG4J2.XML**放在项目的根文件夹**src/main**中。

# svg - 使用 QGraphicsWebView() 在 QGraphicsScene 上设置拖动模式

> ID：13235319
> 
> 赞同：3
> 
> 时间：2012-11-05T15:35:02.163
> 
> 标签：svg, pyqt, drag, qgraphicsview, qgraphicsscene

我有：

```
self.setScene(QtGui.QGraphicsScene(self))
self.setTransformationAnchor(QtGui.QGraphicsView.AnchorUnderMouse)
self.setDragMode(QtGui.QGraphicsView.ScrollHandDrag) 
```

自我在哪里`QGraphicsView`。我在 QGraphicsWebView() 中打开我的 svg，因为它的交互性如下：

```
s = self.scene()
s.clear()
self.resetTransform()

self.webview = QGraphicsWebView()
self.webview.load(QtCore.QUrl(path_to_my_svg))
self.webview.setFlags(QtGui.QGraphicsItem.ItemClipsToShape)
self.webview.setCacheMode(QtGui.QGraphicsItem.NoCache)
self.webview.setZValue(0)
s.addItem(self.webview) 
```

缩放工作正常，但是当我单击 webview 项目以拖动它时，除了光标更改为文本光标之外什么也没有发生。我只能在我打开它时拖动 svg，`self.svgItem = QtSvg.QGraphicsSvgItem(path_to_my_svg)` 但在这种情况下，它会呈现为静态图像，所以我在 svg 中失去了交互性（鼠标悬停，svg 元素中的鼠标悬停）......

**根据 xndrme 的评论进行**编辑：****

 **正如他所建议的那样，SHIFT+鼠标左键单击效果很好，但它会拖动内部的整个 SVG `self.webview`。显然，我认为当我用鼠标滚动缩放时，s​​vg 会被缩放，但实际上`self.webview`是被缩放并出现滚动条的那个。所以，我真正需要知道的是如何`self.webview`在其滚动条边界内拖动整体（用鼠标左键单击）**

# javascript - 调试渲染的 JS 输出的去向

> ID：13235331
> 
> 赞同：0
> 
> 时间：2012-11-05T15:35:52.277
> 
> 标签：javascript, ruby-on-rails-3, twitter-bootstrap

我有一个 Rails 3 应用程序在 link_to 上使用不显眼的 Javascript，以创建一个需要用户输入的小窗口。这是原始按钮（当客户添加猫时）：

```
<%= link_to "New Cat", new_client_cat_path(@client), :remote => true, :class => "btn btn-primary btn-large" %> 
```

在 app/controllers/cats_controller.rb 中：

```
def new
  @cat = @client.cats.build
  @submit_label = "Create"
  respond_to do |format|
    format.html
    format.js { }
  end
end 
```

在 app/views/cats/new.js.erb 中：

```
$('#<%= dom_id(@cat) %> .details').html('<%= escape_javascript render("new") %>'); 
```

在 app/views/cats/_new.html.erb 中：

```
<h2>New Cat</h2>
<%= form_for [@client, @cat] do |f| %>
<%= f.error_messages %>
<%= f.submit @submit_label, :class => "btn btn-primary btn-large" %>
<% end %>
<%= link_to "Cancel", @client, :class => "btn btn-primary btn-large" %> 
```

我的问题是我没有看到渲染的“新”窗口。日志文件显示这些页面已呈现：

```
Rendered cats/_new.html.erb (3.8ms)
Rendered cats/new.js.erb (5.4ms) 
```

我怎样才能知道输出被渲染到哪里，以便我可以弄清楚为什么我没有在用户单击“New Cat”按钮的同一个窗口中看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:26:50.703

您正在返回渲染（“新”）。相反，您可能想要渲染部分。所以从你的新视图中提取实际的表单定义，并将它们放在部分'_new.html.erb'中

所以你的 new.html.erb 将包含

```
<%= render :partial=>'new' %> 
```

和你的 new.js.erb：

```
$('#<%= dom_id(@cat) %> .details').html('<%= escape_javascript render(:partial=>"new") %>'); 
```

我仍然不确定这是否完全解决了您正在尝试做的事情，但它应该让您朝着正确的方向前进。例如，您将返回的 HTML 放入什么元素中？它必须是一个被现有 form_for 包围的元素。你可以这样做：

```
<%= form_tag  '/thing/create',  :html=>{:style=>'display:none'} do %>
  <div id='newform'>
    <%= render(:partial=>'new') %>
  </div>
<% end %> 
```

然后：

```
$('#newform').html('<%= escape_javascript render(:partial=>"new") %>');
$('#newform').show; 
```

请注意，这种方法会使用以下方法排除：

```
<%= form_for @resource  do |f| %>
  <% f.text_field :foo %>
<% end %> 
```

您不能将封闭的 f 块发送到控制器并让控制器操作尝试在部分中处理它：

```
<%= f.text_field :foo %> 
```

所以你必须求助于：

```
<%= form_tag .... do %>
  <%= render_partial=>'new' %>
<% end %> 
```

并在 _new.html.erb

```
<%= text_field_tag , 'thing[foo]', @thing.foo %> 
```

当控制器响应 AJAX 请求发回 HTML 时，它通常被定向到浏览器，HTML 中包含有关浏览器页面上的哪些元素受到影响的说明。

例如，您可以这样做：

```
render :js=>"$('#foobar').html('<h1>TITLE</h1><p>foobar</p>')"; 
```

或这个：

```
render :js=>"$('#barfoo').html('<h1>TITLE</h1><p>barfoo</p>')"; 
```

每一个都会影响页面上的不同元素。

# jquery - 聚焦并突出显示输入控件

> ID：13235333
> 
> 赞同：4
> 
> 时间：2012-11-05T15:35:57.753
> 
> 标签：jquery

当页面加载时，我想聚焦并突出显示（边框颜色或背景颜色更改）输入控件。我该怎么做？这是我到目前为止得到的。

```
<script type="text/javascript">
    $(function () {
        $("#txt1").focus();            
    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:38:49.763

看看 CSS[`:focus`](https://developer.mozilla.org/en-US/docs/CSS/%3afocus)选择器。只需指定 CSS 类，如：

```
#txt1:focus {
    border-color:red;
} 
```

因为旧版浏览器（IE7 和其他浏览器）不支持它。你可能想用 JS 来做这件事。

```
$("#txt1").focus(function(){ $(this).addClass("focused")});
$("#txt1").blur(function(){ $(this).removeClass("focused")}); 
```

where`focused`是这样定义的：

```
#txt1.focused {
   border-color:red;
} 
```

**编辑：**

[Jquery.focus](http://api.jquery.com/focus/)文档。

```
$("#txt1").focus(function(){ $(this).addClass("focused")}); 
```

上面的行只是将处理程序绑定到焦点事件，并且不会更改焦点或立即执行它。为了获得专注于页面加载的字段，应在该字段之后添加另一行：

```
$("#txt1").focus(); 
```

这会将焦点设置在选定元素上并运行先前附加的处理程序。更短的符号：

```
$("#txt1").focus(function(){ $(this).addClass("focused")}).focus(); 
```

页面加载时元素自动聚焦的[演示](http://jsfiddle.net/WEqZp/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:39:13.160

你所拥有的将聚焦元素。您可以根据需要使用`:focus`CSS 中的伪选择器来设置输入样式：

```
#txt1:focus {
    border: 1px solid #C00;
    background: #CCC;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:43:27.500

在这里你可以使用一些 CSS 来应用边框颜色、背景颜色。请参阅下面的css，当您专注于输入时会改变颜色

```
input:focus {
         font-family:Verdana, Geneva, sans-serif;
    border-color:#9ecaed;
    box-shadow:0 0 5px #9ecaed;
} 
```

在聚焦后放置您想要突出显示的css属性。

# qt - 在 Qt Creator/Designer 中将 QWidget 设置为在父级内最大化？

> ID：13235342
> 
> 赞同：2
> 
> 时间：2012-11-05T15:36:23.730
> 
> 标签：qt

我在 qt creator 的设计器中的父小部件中拖放了一个小部件。

它在其父级中有一个任意固定位置的矩形。

我想对其进行修改，使其符合其父尺寸。也就是说，它应该在其父级中“最大化”。

我应该按设计器中的哪个按钮来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:31.313

这就是布局的用途。请参阅[this](http://doc.qt.digia.com/qt/layout.html)以获得解释。

我对 Qt Designer 不是特别熟悉，但一般过程是为父小部件创建一个布局（QHBoxLayout 适合您），并将子小部件添加到该布局中。

要考虑的另一件事是，在您的情况下，您可以简单地将子小部件设置为*QMainWindow*的中央小部件：

```
this->setCentralWidget(theMaximizedWidget); 
```

# c# - 如何将 WCF 客户端代理生成的类中的方法标记为虚拟

> ID：13235345
> 
> 赞同：5
> 
> 时间：2012-11-05T15:36:29.673
> 
> 标签：c#, visual-studio-2010, wcf, web-services, visual-studio

在 VS 2010 中，我正在创建一个服务引用，该服务引用的代码生成 WCF 客户端代理类 Referencence.cs。我需要此类中的方法具有 Virtual 修饰符，以便它们可以在 Mock 中使用。

当然，我可以手动编辑生成的代码，但是每次我更新引用时，代码都会重新生成并清除我的更改。

我是否可以更好地控制 WCF 客户端代理类的生成方式？有没有办法让代码生成器总是添加 Virtual 修饰符？我希望这更加自动化，以便当其他开发人员需要更新参考时，他们不必知道或记住手动编辑生成的代码并添加虚拟修饰符。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T15:39:59.703

另一种方法是创建一个接口。代理类生成为[partial](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.110%29.aspx)，这意味着您可以为该类创建另一个部分文件，并指定该类实现您的接口，即使实际实现在生成的类中。然后，您可以模拟界面，并根据您的内心内容重新生成代理。

例如，您生成的类可能是：

```
public partial class SomeService
{
    public string GetSomething()
    {
        return ... 
    }
} 
```

您可以为此创建一个接口：

```
public interface ISomeService
{
    string GetSomething();
} 
```

然后为生成的类添加一个空的部分文件：

```
public partial class SomeService : ISomeService
{
} 
```

# eclipse - XSP 源中的任务标签

> ID：13235349
> 
> 赞同：3
> 
> 时间：2012-11-05T15:36:37.240
> 
> 标签：eclipse, xpages

在 Java 源代码中，可以使用（默认情况下）//TODO、//FIXME 和//XXX 注释将该部分源代码添加到 Eclipse/Domino Designer 中的 Tasks 视图中。

我也想在 SSJS 中使用它，但我不能让它工作。在 Designer 首选项**General/Editors/Structured Text Editors/Task Tags**的**Filters**选项卡中，您可以启用“**启用搜索任务标签**”复选框并勾选 XML 类型。受影响的内容类型部分包含“xsp”，它是 XP/CC 源的文件扩展名。

但是 SSJS 源代码中的任何标记（实际上是 XML 标记的属性）都不会出现在 Tasks 视图中。

如何将这样的任务标签写入 XP/CC 源代码以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:04:38.360

在 Domino Designer 中，可以通过首选项为大多数编辑器启用任务标签搜索。
即（常规-> 编辑器-> 结构化文本编辑器-> 任务标签）

但是，报告的行为发生是因为任务标记添加到 CDATA 部分。

CDATA 部分基本上是 XML 的狂野西部。

有关参考，请参阅[http://www.w3.org/TR/REC-xml/#sec-cdata-sect](http://www.w3.org/TR/REC-xml/#sec-cdata-sect)具体：

"*在 CDATA 部分中，只有`]]>`字符串被识别为标记，因此左尖括号和 & 符号可能以其文字形式出现；它们不需要（也不能）使用`&lt;``&amp;`*and*进行转义*

因此，由于这个原因，Eclipse XML 解析和验证通常会忽略 CDATA 部分的内容。因此，如果将`<!-- TODO -->`or `//TODO`（或任何标签）放入 CDATA 部分，则不会像这样被拾取。

因此，XSP 源代码中的任何带注释的服务器端 JavaScript 都不会出现在任务视图中。

以该示例代码为例，Tasks View 显示如下。

![XPages 源视图中的示例 XSP 代码说明了任务标记的使用](../Images/30fc577484c5f331ffdd22caf63b112f.png) ![来自 Domino Designer 的任务视图中的示例 XSP 代码的任务标记](../Images/d280a247b01140820083380662e7be7c.png)

# ios6-maps - 在 Apple Maps 与 Google Maps 上绘制纬度/经度点

> ID：13235350
> 
> 赞同：0
> 
> 时间：2012-11-05T15:36:38.910
> 
> 标签：ios6-maps

我正在使用 Google Places 获取用户附近地点的纬度和经度，然后在 Apple 地图（在 iOS 6 上，使用 MKMapView）上绘制这些点，并在 Google 地图上绘制它们（使用 Javascript V3）。现在的问题是当我在 MKMapView 上绘制它们时，这些点不在正确的位置，而在谷歌地图上它们是。为什么会这样？不应该在地图上绘制纬度/经度点使其具有相同的点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T14:59:07.810

点是一样的。但是，图像叠加层会有所不同。这可能是由于拍摄图像的角度，我们都知道苹果在修复地图程序时遇到了一些小问题。我希望这有帮助。

# android - 如何从 Activity 启动小应用程序？

> ID：13235356
> 
> 赞同：2
> 
> 时间：2012-11-05T15:36:52.963
> 
> 标签：android, service, android-activity, tablet, sony

我正在使用 Sony 的 Small App SDK 为 Xperia™ Tablet S 开发一个 Small App。

小型应用程序是在其他应用程序之上运行的特殊微型应用程序。

我的问题是我正在尝试从 Activity 启动一个小应用程序来运行 Monkey 以查找可能的问题。

我尝试使用 startService(new Intent(this, SmallAppSample.class)) 启动，但没有成功。

有谁知道这个问题的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-26T07:55:04.140

你应该使用`SmallApplicationManager`

```
 Intent i = new Intent(MainActivity.this, SmallAppSample.class);
    SmallApplicationManager.startApplication(MainActivity.this, i); 
```

# c++ - stl deque 会重新分配我的元素（c++）吗？

> ID：13235372
> 
> 赞同：9
> 
> 时间：2012-11-05T15:37:35.083
> 
> 标签：c++, deque

嗨，我需要一个 stl 容器，它可以像向量一样被索引，但不会像向量那样移动内存中的旧元素，调整大小或保留（除非我在开​​始时调用 Reserve 一次，其容量足以容纳所有元素，即对我不好）。（注意我确实地址绑定到元素，所以我希望这些元素的地址永远不会改变）。所以我找到了这个双端队列。你认为这对这个目的有好处吗？重要提示：我只需要推回，但我需要按需小块增长容器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T15:40:23.003

[`std::deque`](http://en.cppreference.com/w/cpp/container/deque)在其背面或正面添加或删除元素时，“永远不会使指针或对其余元素的引用无效”，所以是`push_back`的，当您只有元素保持原位时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T15:40:37.320

仔细阅读[文档](http://en.cppreference.com/w/cpp/container/deque)似乎表明，只要您在开头或结尾插入它就不会使指针无效，而使指针无效是数据正在被复制或移动的标志。

它的构造方式不太像链表，其中每个元素都是单独分配的，而是作为一组链接数组，大概是出于性能原因。改变中间元素的顺序将需要移动数据。

# css - 为更薄的字体实现内部文本阴影

> ID：13235376
> 
> 赞同：1
> 
> 时间：2012-11-05T15:37:58.340
> 
> 标签：css

我已经看到了关于这个主题的其他解决方案，但没有一个能达到我需要（或想要）的结果。

问题是，Mac 以一种尴尬的方式呈现一些字体，字体太厚了，即使在常规样式上也是如此。这很烦人！

所以我想我会去一个 CSS-Workaround 让字体看起来更薄。我能想到的只是文本的内部阴影，希望它们不会变得太模糊，但这说起来容易做起来难，文本阴影不支持这一点（无论出于何种原因）。

有谁知道如何实现这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:47:37.947

我认为这将是一场失败的战斗，如果你考虑到现在，而不是只处理固定分辨率的字体（72dpi，现在十年左右的显示器标准），你还必须处理一些分辨率约为 220-227ppi 的 Mac 的“视网膜显示器”。

我也确定我在某处读到，那些没有被重写以在视网膜显示器上正确缩放的程序必须由操作系统插值，所以很有可能，从 Mac 到 Mac，从浏览器到浏览器，相同的字体正在运行看起来完全不同。截至目前，我可以确认支持 Retina 的浏览器只有 Safari（大吃一惊，对吧？）和 Chrome。

（有关此主题的更多信息，请参阅此问题：[https](https://apple.stackexchange.com/questions/54905/retina-macbook-pro-fonts-look-terrible) ://apple.stackexchange.com/questions/54905/retina-macbook-pro-fonts-look-terrible ）

如果您真的致力于尝试击中这个移动目标，您可能可以通过媒体查询根据像素比改变使用的字体。

```
@media all and (-webkit-min-device-pixel-ratio: 2) {
    /* all your retina-display-tweaked settings, here */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:44:25.920

也许这有点太大的影响，但我认为这就是你正在寻找的。

使用 :before & :after 添加文本内阴影效果

```
.depth:before, .depth:after {
content: attr(title);
padding: 50px;
color: rgba(255,255,255,.1);
position: absolute;
}

.depth:before { top: 3px; left: 3px }
.depth:after  { top: 4px; left: 4px }​ 
```

jsFiddle：http: [//jsfiddle.net/4GAkK/](http://jsfiddle.net/4GAkK/)

# java - 通过套接字发送一个可序列化的对象

> ID：13235377
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:38:01.717
> 
> 标签：java, sockets, serialization, remote-server, objectinputstream

我有一个奇怪的问题是发送我通过套接字创建的可序列化对象。事实上，如果我在同一台机器上运行服务器和客户端，它工作得很好，但是如果服务器和客户端在不同的机器上，服务器端的读取对象是空的（大小等于零）

任何人有一个想法来解决这个问题？（代码如下）

服务器：

```
public static void main () {
...
InputStream is = mysocket.getInputStream();
ObjectInputStream ois = new ObjectInputStream(is);

ArrayList<MyObject> list_of_object;
list_of_object = (ArrayList<MyObject>) ois.readObject();
logger.log(Level.INFO,"object readen with size : "+list_of_object.size());
...
} 
```

客户：

```
public static void main () {
...
ObjectOutputStream oos = new ObjectOutputStream(mysocket.getOutputStream());
oos.writeObject(list_of_object);
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:52:37.093

`MyObject`使用您的-class版本尝试以下测试用例。它将帮助您找出问题所在。如果这适用于您的课程，那么它可能是网络层，例如您正在阅读与您期望阅读的内容不同的内容。常见的错误可能是您在某处运行旧版本的服务器代码，并且您可能确实读取了一个空的 MyObjects 列表。

```
import static org.junit.Assert.assertEquals;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.ArrayList;

import org.junit.Test;

public class StreamTest {

public static class MyObject implements Serializable {

}

@Test
public void test() throws Exception {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(baos);
    ArrayList<MyObject> list_of_object = new ArrayList<MyObject>();
    list_of_object.add(new MyObject());
    oos.writeObject(list_of_object);

    byte[] whatGoesOverWire = baos.toByteArray();
    ByteArrayInputStream bais = new ByteArrayInputStream(whatGoesOverWire);
    ObjectInputStream ois = new ObjectInputStream(bais);
    ArrayList<MyObject> deserialized = (ArrayList<MyObject>) ois
            .readObject();
    assertEquals(1, list_of_object.size());
    assertEquals(1, deserialized.size());
}

} 
```

# sharepoint - 如何在 SharePoint 网站中使用 PageLayout？

> ID：13235378
> 
> 赞同：0
> 
> 时间：2012-11-05T15:38:02.130
> 
> 标签：sharepoint, sharepoint-2010, page-layout, sharepoint-feature

我对 SharePoint 有点陌生。我在旅途中学习它，并了解了页面布局的概念和网站上的发布功能。但我并不是 100% 确定 WebPartPage、SitePage 和 PublishingPage 之间有什么区别。我有点知道所有这些页面的用途，但我不明白的是：为什么他们需要分隔所有这些页面？

我认为我们可以只获得一个发布页面并在那里拥有所有功能，包括 webpart 和其他所有内容（使用我们选择的 PageLayout）。但是，我看不到在特定 SitePage 上使用页面布局的方法。

使用其中任何一个有什么特别的原因吗？即使其中一个似乎可以充当所有人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T04:53:42.947

当您知道页面结构时，您应该使用页面布局。例如，您正在运行一份在线新闻报纸。您希望将新闻分三栏显示给用户。第一栏是菜单，第二栏是新闻内容，第三栏是广告。现在在您的日常使用中，这种布局很常见。所以你可以使用这个页面布局来输入新闻。创建页面布局后，您可以将其设置为页面的默认设置。页面布局只不过是一个页面的结构而已！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T02:36:11.103

Web 部件页面没有像 SitePage 那样直接在页面上的内容字段。Publishing Page 类似于 SitePage，但需要额外的字段来处理发布的额外功能。对所有三个使用单一布局的风险会混淆为什么一个页面在具有相同布局时与另一个页面不一样（不同之处在于底层功能不同。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T11:41:12.717

我将与汽车进行比较。共有三种类型的汽车，每种都更适合特定用途：农业拖拉机、公共交通工具公共汽车、私人交通工具轻型汽车。您可以将拖拉机用于上述所有目的，但这并不理想。

“其中一个可以充当所有人”。这在他们当前的实现中是不正确的。我将给您举一个示例：更喜欢 Web 部件页面而不是发布页面，以更好地控制贡献者在 Intranet 中添加的内容。还有很多其他的例子。

# sql - SQL 中的双 IN 语句

> ID：13235382
> 
> 赞同：12
> 
> 时间：2012-11-05T15:38:15.033
> 
> 标签：sql, sql-server, sql-server-2008

只是对 SQL 中的 IN 语句感到好奇。我知道我可以通过执行搜索具有一个值的多个列

```
'val1' IN (col1,col2) 
```

并且可以在一列中搜索多个值

```
col1 IN ('val1','val2') 
```

但是有没有办法同时做这两个，而不用在 SQl 中恢复到重复的 AND / OR？我希望以最具可扩展性的方式做到这一点，因此与我需要搜索多少 vals / cols 无关。所以基本上：

```
('val1','val2') IN (col1,col2) 
```

但有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:43:40.600

你可以做这样的事情[（我也把它放在 SQLFiddle 上）](http://sqlfiddle.com/#!3/d41d8/5777)：

```
-- Test data:
WITH t(col1, col2) AS (
    SELECT 'val1', 'valX' UNION ALL
    SELECT 'valY', 'valZ'
)
-- Solution:
SELECT *
FROM t
WHERE EXISTS (
    SELECT 1
    -- Join all columns with all values to see if any column matches any value
    FROM (VALUES(t.col1),(t.col2)) t1(col)
    JOIN (VALUES('val1'),('val2')) t2(val)
    ON col = val
) 
```

当然，有人可能会争论，哪个版本更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:45:38.607

是的，例如您可以在 Oracle 中执行此操作：

```
select x, y from (select 1 as x, 2 as y from dual)
where (x,y) in (select 1 as p, 2 as q from dual) 
```

# web - 在我的网站根目录上点击文件 age-de.xml

> ID：13235384
> 
> 赞同：1
> 
> 时间：2012-11-05T15:38:20.187
> 
> 标签：web, http-status-code-404

我对位于我网站根目录的文件“age-de.xml”有一些点击（例如：）`http://example.org/age-de.xml`。

该文件从未出现过，也未在任何地方链接。

它来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:38:20.187

这用于“青少年保护”，作者：[altersklassifizierung.de](https://www.altersklassifizierung.de/en)

完整规格可在线获取：[http ://www.online-management-kontor.de/downloads/age-de-xml-label_definition_v3.0g_english1.pdf](http://www.online-management-kontor.de/downloads/age-de-xml-label_definition_v3.0g_english1.pdf)

标记整个域和子域 12+ 的示例文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<age-declaration>
    <ageblock-basic>
        <age-issuer>www.example.org</age-issuer>
        <custom info="generator">label.usk.de</custom>
        <last-change>2012-11-05</last-change>
        <country>de</country>
        <label-version>1.0</label-version>
        <revisit-after>1days</revisit-after>
    </ageblock-basic>
    <ageblock-labeltype>
        <xmlfile>true</xmlfile>
        <httpheader>false</httpheader>
        <htmlmeta>false</htmlmeta>
        <label-z>false</label-z>
        <default-age>12</default-age>
    </ageblock-labeltype>
    <ageblock-labeltype-definition>
        <labeltype-xmlfile>
            <label class="default">
                <min-age>12</min-age>
                <default-age>12</default-age>
            </label>
            <label class="bewertungseinheit1">
                <age>12</age>
                <min-age>12</min-age>
                <default-age>12</default-age>
                <scope>*.example.org</scope>
            </label>
        </labeltype-xmlfile>
    </ageblock-labeltype-definition>
</age-declaration> 
```

您可以找到在线生成器：[http ://www.usk.de/extramenue/login/publisher/weitere-leistungen/labelgenerator/](http://www.usk.de/extramenue/login/publisher/weitere-leistungen/labelgenerator/)

# c++ - cmd.exe 中的控制台输出，以及通过 C++ 的 powershell.exe

> ID：13235385
> 
> 赞同：5
> 
> 时间：2012-11-05T15:38:22.090
> 
> 标签：c++, powershell, console, cmd

我知道正确显示本地化字符的简单方法`Cmd.exe`。但是我该怎么做`Powershell.exe`呢？

```
#include<iostream>
#include<windows.h>

using namespace std;
int main()
{
    SetConsoleCP(GetACP());
    SetConsoleOutputCP(GetACP());

    // valid output in cmd.exe, 
    // but invalid output in powershell.exe
    cout << "Привет мир (1)!" << endl; 

    // invalid output in both variants: cmd.exe, 
    // and powershell.exe
    wcout << L"Привет мир (2)!" << endl; 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:36:09.497

输出是什么？你的字体支持那些字形吗？

也许以下链接可能有用（关于 cmd.exe）：

[http://www.watchingthenet.com/how-to-add-and-change-fonts-in-windows-command-prompt.html](http://www.watchingthenet.com/how-to-add-and-change-fonts-in-windows-command-prompt.html)

您还可以尝试将输出从 powershell 重定向到文件并检查。如果文件正确，则您的控制台字体不支持您的字符。

还有一个来自ms的博客，展示了如何自定义字体（关于ps）

[http://blogs.msdn.com/b/powershell/archive/2006/10/16/windows-powershell-font-customization.aspx](http://blogs.msdn.com/b/powershell/archive/2006/10/16/windows-powershell-font-customization.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T16:27:39.463

我认为这是在 Windows中启用*正确处理的捷径。* `wcout`尝试将其作为第一行添加到您的`main`：

```
_setmode(_fileno(stdout), _O_U16TEXT); 
```

之后，`wcout << L"Привет мир (2)!" << endl;`它将像魅力一样独立于用户选择的当前语言环境和单字节编码（*应该*如此）。

# sql-server - 索引视图的可靠性

> ID：13235391
> 
> 赞同：1
> 
> 时间：2012-11-05T15:38:40.163
> 
> 标签：sql-server, reliability, indexed-view

我刚刚发现，几年前我迅速整理的一份报告是收集数百万美元的唯一手段，而且没有任何事情可以检查它是否正确。

出于性能原因，该报告大量使用索引视图。这让我很担心，因为虽然我经常使用索引视图，但我倾向于不将它们用于如此关键的任何事情。

索引视图是否可能无法更新或返回与表中数据不同的信息？这是多么真实的风险？我可以定期运行一个好的 SQL 脚本来检查错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:44:22.630

根据文档，不一致的风险为零。

在实践中，您必须处理产品错误。他们不是一个现实的问题。

索引视图维护基于与索引完全相同的机制：它们作为 DML 查询计划的一部分进行更新。我猜您不会期望索引会损坏，因此您应该信任具有大致相同强度的索引视图。

# c# - Oracle 客户端的可选 sql 命令参数

> ID：13235392
> 
> 赞同：4
> 
> 时间：2012-11-05T15:38:40.260
> 
> 标签：c#, .net, oracle, sqlcommand

我正在尝试为 sqlcommand 提供比它使用的更多的参数。因此，我得到异常 ORA 01036。该描述使我了解到一个事实，即我只能传递将在查询中实际使用的参数。

我在任何地方都找不到它——这是真的吗？这似乎很愚蠢，仅限于我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:56:25.327

1.  我尝试使用 System.Data.SqlClient.SqlConnection 重新创建您的情况以连接到 Oracle 数据库，但未成功。

2.  使用 System.Data.OracleClient.OracleConnection 我能够测试带参数和不带参数的查询。以下代码使用未注释的“string sql ...”成功。注释的“字符串 sql”将遇到您问题中提到的相同错误。

    ```
     StringBuilder sb = new StringBuilder ();

        string sql = "SELECT CASE_ID, CLAIM_NR, CLAIM_PHS_CD FROM TABLENAME WHERE CASE_ID = :ci";
        //string sql = "SELECT CASE_ID, CLAIM_NR, CLAIM_PHS_CD FROM TABLENAME";

        using ( OracleConnection connection = new OracleConnection ( RegistryConnectionInformation.GetDBConnString () ) )
        {
            OracleParameter ci = new OracleParameter();
            ci.ParameterName = "ci";
            ci.Value = "12345";

            OracleCommand command = new OracleCommand ( sql, connection );
            command.Parameters.Add ( ci );

            connection.Open ();
            OracleDataReader reader = command.ExecuteReader ();

            try
            {
                while ( reader.Read () )
                {
                    sb.Append ( string.Format ( "{0} - {1} - {2}\n", reader [ 0 ], reader [ 1 ], reader [ 2 ] ) );
                }
            }
            catch ( Exception ex )
            {
                sb.Append ( string.Format ( "{0}\n\n{1}", ex.Message, ex.StackTrace ) );
            }
            finally
            {
                reader.Close ();
            }
        }

        return sb.ToString (); 
    ```

3.  这让我相信你是对的：在查询 Oracle 时，命令中传递的参数数量必须与查询中的参数数量相匹配。

    一种。在使用 Oracle 时，我还建议您保持参数的顺序与其在查询中的使用顺序相同。根据您使用的 DLL，参数不会根据参数名称进行映射，而是根据插入顺序进行映射。

戴夫

# java - JSP调用方法Servlet

> ID：13235393
> 
> 赞同：2
> 
> 时间：2012-11-05T15:38:44.493
> 
> 标签：java, forms, jsp, servlets, post

我想要一个输入“提交”，从负责显示 JSP 的 Java EE java servlet 调用一个方法。

```
<form action="????" method="post">
     <input type="image" src="img/icons/cross.png" alt="Remove widget">
</form> 
```

上面的表单方法（也欢迎使用另一种解决方案）应该提醒 Servlet 并包含必须删除的小部件的 id。我怎样才能在不使用脚本和使用 MVC 设置的情况下完成这样的事情。

servlet 使用以下代码行将小部件包含在 JSP 中：

```
request.setAttribute("widgets", widgets); 
```

谢谢：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T08:44:49.690

多谢你们。在亚历山大的建议下，我设法解决了我的问题:)

# php - 来自目录的 jquery 滑块

> ID：13235396
> 
> 赞同：-2
> 
> 时间：2012-11-05T15:39:03.200
> 
> 标签：php, jquery, ajax, json

我正在尝试找到一个可以设置为从目录加载照片的 jquery 滑块。

谁能推荐一个能够做到这一点的滑块？最好启用缩略图。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:49:25.317

我觉得你可以反过来看，就像上面的评论者所说的那样。

为什么不使用 PHP 扫描目录（使用类似 scandir() 的东西）并将结果发送到您的视图？在您看来，您只需在您喜欢的任何滑块插件的配置中输出 scandir 的结果...

像这样的东西：

```
<html>
<?php
    $mydir = "/pictures"
    $pics = scandir($mydir);
?>

<script type="text/javascript">
  myplugin.init(){
     pic_list: '<?php echo implode("','", $pics); ?>'
  }
</script>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:06:00.073

或者您可以使用 PHP 动态生成图像列表（@Jean，对不起，伙计，只是不喜欢脚本标签之间的 PHP - 即使只是出于示例目的），然后从这些地方选择一个滑块：

[http://www.pixelzdesign.com/blog_view.php?id=55](http://www.pixelzdesign.com/blog_view.php?id=55)

[http://developers.slidedeck.com/](http://developers.slidedeck.com/) - 这应该是您正在寻找的东西，但如果这是一个问题，它会花钱。

[http://www.tripwiremagazine.com/2012/09/jquery-image-slider-plugins.html](http://www.tripwiremagazine.com/2012/09/jquery-image-slider-plugins.html)

# nhibernate - NHibernate 不会删除对象

> ID：13235398
> 
> 赞同：0
> 
> 时间：2012-11-05T15:39:04.923
> 
> 标签：nhibernate

我使用`ISession.Query<T>.ToList()`. 然后我尝试使用`ISession.Delete()`.

查询和删除使用相同的会话，但没有删除任何内容。不执行带有 DELETE 语句的 SQL。不会抛出异常。为什么没有删除对象？它们似乎也不包含在任何父集合中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:41:57.510

如果您正在使用事务，则需要调用，`transaction.Commit()`否则需要调用`session.Flush()`。

如果由于某种原因您没有使用事务，则应该使用，否则如果某些删除失败，您最终可能会在数据库中出现不一致的数据。

# c# - 如何声明一个新类型的数组？

> ID：13235400
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:39:09.837
> 
> 标签：c#, powershell

我想在 Computer 类型中声明一个数组，如下面的代码所示

```
Add-Type @"
public struct Computer {
    public string Name;
    public string ProductName;
    # declare array
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:47:08.023

在 C# 中声明字符串数组类型的字段：

```
public string[] YourArrayName 
```

# c - 在 C 中保存多维数组

> ID：13235412
> 
> 赞同：2
> 
> 时间：2012-11-05T15:40:05.897
> 
> 标签：c, arrays, matlab, multidimensional-array, save

`A`我之前使用 .mat 文件在 Matlab 中保存了多维数组（例如，大小为 100x100x100 的数组），效果非常好。

在 C 中保存此类多维数组的最佳方法是什么？我能想到的唯一方法是将其存储为二维数组（例如，将 KxNxM 数组转换为 KNxM 数组）并小心记住它是如何保存的。

还希望以稍后可以在 Matlab 中打开以进行后处理/绘图的方式保存它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:18:43.937

C 做 3D 数组就好了：

```
double data[D0][D1][D2];
...
data[i][j][k] = ...; 
```

尽管对于非常大的数组（例如您的示例），您可能希望动态分配数组，而不是`auto`像上面那样将它们声明为变量，因为变量的空间`auto`（*通常*是堆栈，但并非总是如此）可能非常有限。

假设您的所有维度在编译时都是已知的，您可以执行以下操作：

```
#include <stdlib.h>
...
#define DO 100
#define D1 100
#define D2 100
...
double (*data)[D1][D2] = malloc(sizeof *data * D0);
if (data)
{
  ...
  data[i][j][k] = ...;
  ...
  free(data);
} 
```

这将从堆中分配一个 D0xD1xD2 数组，您可以像访问任何常规 3D 数组一样访问它。

如果直到运行时才知道您的尺寸，但您正在使用支持可变长度数组的 C99 编译器或 C2011 编译器，则可以执行以下操作：

```
#include <stdlib.h>
...
size_t d0, d1, d2;
d0 = ...;
d1 = ...;
d2 = ...;
...
double (*data)[d1][d2] = malloc(sizeof *data * d0);
if (data)
{
  // same as above
} 
```

如果直到运行时才知道您的尺寸，并且您正在使用*不*支持可变长度数组的编译器（C89 或更早版本，或不支持 VLA 的 C2011 编译器），您将需要采用不同的方法。

如果需要连续分配内存，则需要执行以下操作：

```
size_t d0, d1, d2;
d0 = ...;
d1 = ...;
d2 = ...;
...
double *data = malloc(sizeof *data * d0 * d1 * d2);
if (data)
{
  ...
  data[i * d0 * d1 + j * d1 + k] = ...;
  ...
  free(data);
} 
```

请注意，您必须将 、 和 索引映射`i`到`j`单个`k`索引值。

如果内存不需要连续，您可以像这样进行零碎分配：

```
double ***data;
...
data = malloc(d0 * sizeof *data);
if (data)
{
  size_t i;
  for (i = 0; i < d0; i++)
  {
    data[i] = malloc(d1 * sizeof *data[i]);
    if (data[i])
    {
      size_t j;
      for (j = 0; j < d1; j++)
      {
        data[i][j] = malloc(d2 * sizeof *data[i][j]);
        if (data[i][j])
        {
          size_t k;
          for (k = 0; k < d2; k++)
          {
            data[i][j][k] = initial_value();
          }
        }
      }
    }
  }
} 
```

并将其释放为

```
for (i = 0; i < d0; i++)
{
  for (j = 0; j < d1; j++)
  {
    free(data[i][j]);
  }
  free(data[i]);
}
free(data); 
```

顺便说一句，这不是推荐的做法；即使它允许您`data`像 3D 数组一样进行索引，但要权衡的是更复杂的代码，*特别是*如果`malloc`在分配循环中途失败（那么您必须退出到目前为止所做的所有分配）。它也可能会导致性能损失，因为不能保证内存被很好地定位。

**编辑**

至于将这些数据保存在文件中，这取决于您需要做什么。

最便携的是将数据保存为格式化文本，例如：

```
#include <stdio.h>
FILE *dat = fopen("myfile.dat", "w"); // opens new file for writing
if (dat)
{
  for (i = 0; i < D0; i++)
  {
    for (j = 0; j < D1; j++)
    {
      for (k = 0; k < D2; k++)
      {
        fprintf(dat, "%f ", data[i][j][k]);
      }
      fprintf(dat, "\n");
    }
    fprintf(dat, "\n");
  }
} 
```

这会将数据作为浮点数序列写出，每行末尾有一个换行符，每个“页面”末尾有两个换行符。读回数据基本上是相反的：

```
FILE *dat = fopen("myfile.dat", "r"); // opens file for reading
if (dat)
{
  for (i = 0; i < D0; i++)
    for (j = 0; j < D1; j++)
      for (k = 0; k < D2; k++)
        fscanf(dat, "%f", &data[i][j][k]);
} 
```

请注意，这两个片段都假定数组具有已知的固定大小，并且不会随运行而改变。如果不是这种情况，您显然必须在文件中存储其他数据以确定数组需要多大。也没有类似于错误处理的东西。

我留下了*很多*东西，因为我不确定你的目标是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:42:18.640

好吧，您当然也可以将其存储为 C 中的 3D 数组。不知道为什么你觉得你必须转换为 2D：

```
double data[100][100][100]; 
```

这当然需要相当多的内存（假设 64 位大约需要 7.6 MB `double`），但在 PC 上应该没问题，例如。

不过，您可能希望避免将这样的变量放入堆栈。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T15:42:42.807

C 可以很好地处理多维数组 ( `double array[K][M][N];`)，它们与一维数组一样连续存储在内存中。事实上，写入`double* onedim = &array[0][0][0];`并使用与 3-D 和 1-D 数组相同的内存区域是合法的。

要将其从 C 语言导入 matlab，您可以`fwrite(array, sizeof array[0][0][0], K*M*N*, fptr)`在 C 和`array = fread(fileID, inf, 'real*8')`MatLab 中使用。您可能会发现该`reshape`功能很有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T15:52:01.790

c 可以处理 3 维数组，那为什么不使用呢？

将其写入`.mat`文件需要一点工作，但似乎并不太难。

`.mat`格式在此处[描述](http://www.mathworks.com/help/pdf_doc/matlab/matfile_format.pdf)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T15:45:21.913

三重指针：

```
double*** X;
X= (double***)malloc(k*sizeof(double**));
for(int i=0; i<k;i++)
{
   X[i]=(double**)malloc(n*sizeof(double*));
   for(int j=0; j<n;j++)
   {
       X[i][j]=(double*)malloc(m*sizeof(double));
   }
} 
```

这种方式访问​​每个值的方法非常直观：X[i][j][k]。
如果你愿意，你可以使用一个唯一的数组：

```
double* X;
X=(double*)malloc(n*m*k*sizeof(double)); 
```

您可以通过以下方式访问每个元素：

```
X[i*n*m+j*n+k]=0.0; 
```

如果您使用三重指针，请不要忘记释放内存。

# mongodb - MongoDB检索字段的一部分

> ID：13235414
> 
> 赞同：1
> 
> 时间：2012-11-05T15:40:11.257
> 
> 标签：mongodb

我有一个类似于以下的表格

```
 field1
============
sssss(x)sdfs
ddd(d)fsdfsd
adf(d)dfssdf
sdf(x)sdfsdf 
```

我想检索 field1 括号中的所有不同文本，如何获得以下输出？

```
subStirng
===========
x
d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:22:56.093

一个简单的解决方案是运行一个 map-reduce 作业来创建一个集合，例如

```
sssss x sdfs
ddd d fsdfsd
adf d dfssdf
sdf x sdfsdf 
```

此时可以运行 distinct 或者您可以在 mr 中编写 reduce 函数以获得以下结果

```
x
d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:12:16.683

使用正则表达式：

```
> db.test.insert({"field1":"sssss(x)sdfs"})
> db.test.insert({"field1":"ddd(d)fsdfsd"})

> db.test.find().forEach(function(foo){print(foo.field1.match(/\w*\((\w)\)\w*/)[1])})
x
d 
```

我发现上面的方法没有显示`distinct`结果。

或者尝试 map/reduce 功能？

```
m = function(){emit(this.field1.match(/\w*\((\w)\)\w*/)[1], 1)}
r = function(key, values){ return 1;}
db.test.mapReduce(m, r, {out:{inline:1}})

{
    "results" : [
            {
                    "_id" : "d",
                    "value" : 1
            },
            {
                    "_id" : "x",
                    "value" : 1
            }
    ],
    "timeMillis" : 399,
    "counts" : {
            "input" : 30003,
            "emit" : 30003,
            "reduce" : 302,
            "output" : 2
    },
    "ok" : 1,
} 
```

或者...也许您可以在插入之前找到子字符串并将其存储在另一个字段中。我认为这种方式会更快。

# drupal - 在 drupal7 中格式化的多节点引用

> ID：13235418
> 
> 赞同：0
> 
> 时间：2012-11-05T15:40:22.363
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

在我的网站上，我有一个文档部分。这些文件有不同的语言版本。当我展示这些文档时，我想将它们分组以具有这样的输入：

Document-001 [英语] [荷兰语] [中文] [法语]

...当我们点击“english”时，它会下载英文版。

我能怎么做 ？

现在，我有一个名为“documents”的 CCK，我在其中放置文件和描述。我正在尝试像上面的示例一样使用它们来展示它，但我没有找到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:53:33.663

我使用“字段集合”模块来设置“文档”和“语言”字段。

通过该实现，在每个节点中，我都可以附加多种文档和语言。

# facebook - 如何向应用授予粉丝页面权限

> ID：13235423
> 
> 赞同：0
> 
> 时间：2012-11-05T15:40:39.273
> 
> 标签：facebook, facebook-graph-api

嗨，我有一个应用程序，我得到了offline_access 和 manage_pages perms

我可以通过此代码上传照片：

```
$phototoken='AAAAABya***sZAJ';

$photo_details = array(
    'access_token' => $phototoken
);
$photo_details['image'] = '@' . realpath($img);
$upload_photo = $facebook->api('/me/photos', 'post', $photo_details);
} 
```

但是当我更改密码时，我的令牌将失效，我的应用程序将无法访问粉丝页面，我是对的吗

[http://smileychatcodes.com/facebook-smiley-chat-c​​odes](http://smileychatcodes.com/facebook-smiley-chat-codes/) / 那么这些网站如何离线访问粉丝页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:58:07.823

更改您的密码将始终使用户访问令牌无效，但是正如[这里](https://developers.facebook.com/docs/howtos/login/extending-tokens/#pagetokens)所解释的，您可以获得一个长期存在的用户访问令牌，这将允许您生成一个无限期的页面访问令牌。

# eclipse - 如何在 Eclipse 中更改包的显示方式？

> ID：13235428
> 
> 赞同：0
> 
> 时间：2012-11-05T15:41:12.543
> 
> 标签：eclipse, packages

我需要使用 Eclipse 源代码。而且我导入了很多包：

```
org.eclipse.core
org.eclipse.jdt
org.eclipse.jdt.core
org.eclipse.core.resources
etc 
```

所以我的项目中有所有这些包。我怎样才能按他们的树划分它们？所以他们在我的项目中看起来像这样：

```
org
  +
  |- eclipse + 
             |- core
             |     +
             |     |- runtime
             |     |- resources
             |- jdt
                  +
                  |- core
                        +
                        |- dom 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:53:24.613

Srinivas Thatiparthy 很接近。它们是类似于“-><-”的按钮旁边的按钮下的选项“包演示”。

# ios - 通用应用内购买产品实施

> ID：13235430
> 
> 赞同：14
> 
> 时间：2012-11-05T15:41:20.920
> 
> 标签：ios, in-app-purchase

考虑以下示例。假设我们有一个应用程序，专业作家可以在其中通过基于 Web 的 UI 编写故事。然后这些故事可供 iOS 应用程序的用户使用，就像在应用程序购买项目中一样。

如您所知，我们需要提前创建应用内购买产品。但在我们的情况下，这意味着对于作者创建的每个故事，我们都必须创建一个新的 IAP 产品并等待 Apple 批准。

为了避免这种情况，我计划在 IAP 中创建通用的“消耗性”产品，例如价值 1.99 美元的故事、价值 2.99 美元的故事等等。然后在应用程序 UI 中，我将显示作者创建的故事列表，并显示作者在创建故事时指定的故事的相应价格。一旦用户点击购买按钮，我将显示购买相同价格的通用消耗品，并完成应用内购买流程。

现在的问题是苹果会批准这样的实施吗？它符合他们的 IAP 政策吗？我在问，因为我找不到这样的工作流程指南。

实现这一点的另一种方法是实现应用内信用/货币系统，如游戏使用。人们购买积分/硬币的地方，然后他们用硬币购买物品。这是一种久经考验的方法，但它不适合我对应用程序的类比，因此是问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T12:33:06.397

您想要实现的目标是完全可行的，唯一的问题是您的可购买内容必须是动态的。您必须从服务器下载产品 ID，而不是将它们硬编码到您的应用程序中。

参考您的示例，我可以想象一个表格视图被提供了一个对象列表，这些对象列表中存储了 SKProduct ID。您必须这样做，因为在撰写本文时，您无法从 Apple 服务器检索应用程序的所有可用产品 ID。我知道他们没有实现这个功能很痛苦，但老实说，如果他们还没有实现，我认为他们永远不会这样做。

这是我指的方法：[initWithProductIdentifiers](http://developer.apple.com/library/ios/documentation/StoreKit/Reference/SKProductsRequest/Reference/Reference.html#//apple_ref/occ/instm/SKProductsRequest/initWithProductIdentifiers:)

您为它提供了一个 NSSet，其中包含您要检索的所有标识符，但如果您提供一个空集或 nil，它不会回复所有现有的。如果您觉得这不起作用，您可以向 Apple 提交错误。如果您仍有任何疑问，请查看此 SO 答案：[链接](https://stackoverflow.com/a/1844477/655221)

另一个需要注意的重要事项是，您必须手动上传您的产品。Apple 没有公开任何 API 以使流程自动化。这意味着，每次作家向您的服务器上传内容时，您都必须登录 iTunes 连接并创建产品。此外，您将被限制为 10,000 种产品，因为这是您可以向 Apple 注册的不同产品的最大数量。我还建议您快速阅读 iTunes Connect 指南，其中包含一些重要信息，例如我刚才提到的：[iTunes Connect](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/13_ManagingIn-AppPurchases_Robert/ManagingIn-AppPurchases.html)

关于 3rd 方框架，如前面提到的 UrbanAirship，它们只会让您不必在服务器上实施收据验证。除此之外，我没有看到任何主要优势。

Said this, I'd recommend you to reconsider your business model. Is it really worth it all the hassle of uploading the products one per one? Or is it better to go the subscription way, in which your users pay a fixed amount of money for downloading a number of articles per month. You could have different tiers, like, basic, premium (unlimited downloads) an so on and control the delivery of the articles from your servers. That's up to you, but for me the answer is pretty clear.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T14:27:52.217

普里坦

对于交付动态内容，您应该使用订阅，而不是消耗品。使用订阅通过允许您为每次更新收费并同时分发新内容来解决您的问题。

您可以查看 UrbanAirship 等 3 方服务，这将显着减少您尝试动态交付内容、跟踪订阅和到期等所花费的时间。

# java - 谁能告诉我为什么我的代码会产生错误？

> ID：13235433
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:41:25.557
> 
> 标签：java, binary-tree, huffman-code

我有一个霍夫曼树和一个字符，我想返回该字符在霍夫曼树中的编码应该是什么。

我已经使用广度优先遍历方法实现了它，每次检查左右树时，我都会检查树的数据是否等于我正在寻找的字符。不过，每次我向右或向左走时，我都会在编码中添加 0 或 1。最终，当我找到等于树数据的字符时，我返回该树的编码值。

代码：

```
 public static String findCharEncoding(BinaryTree<CharProfile> bTree, char character) {
        Queue<BinaryTree<CharProfile>> treeQueue = new LinkedList<BinaryTree<CharProfile>>();

        // Create a TreeWithEncoding object from the given arguments and add it to the queue
        treeQueue.add(bTree);

        while (!treeQueue.isEmpty()) {
            BinaryTree<CharProfile> t = treeQueue.remove();

->          if (t.getLeft().getData().getCharacter() == character) {
                return t.getLeft().getData().getEncoding();
            }
            if (t.getLeft() != null) {
                t.getLeft().getData().setEncoding(t.getLeft().getData().getEncoding() + "0");
                treeQueue.add(t.getLeft());
            }

            if (t.getRight().getData().getCharacter() == character) {
                return t.getRight().getData().getEncoding();
            }
            if (t.getRight() != null) {
                t.getRight().getData().setEncoding(t.getRight().getData().getEncoding() + "1");
                treeQueue.add(t.getRight());
            }
        }

        // If it gets to here, the while loop was unsuccessful in finding the encoding
        System.out.println("Unable to find.");
        return "-1";
    } 
```

我已经实现如下：

```
 for (int i = 0; i < charOccurrences.size(); i++) {
            char character = charOccurrences.get(i).getCharacter();

            charOccurrences.get(i).setEncoding(findCharEncoding(huffmanTree, character));
            System.out.println(charOccurrences.get(i).getEncoding());
        } 
```

CharProfile 是一个自定义类，包含字符值、字符概率和编码。

它不断在行返回 NullPointerExceptionError `if (t.getLeft().getData().getCharacter() == character) {`，我用箭头表示了这一点。我已经尝试过，但我似乎无法弄清楚为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:44:21.493

要么`t`是`null`，要么`t.getLeft()`返回`null`，要么`t.getLeft().getData()`返回`null`。正如我们只看到您展示的代码一样，调试它是您的工作。

您可以在错误上方插入一行：

```
if (t == null) {
    System.out.println("t = null");
} else if (t.getLeft() == null) {
    System.out.println("t.getLeft() returns null");
} else if (t.getLeft().getData() == null) {
    System.out.println("t.getLeft().getData() returns null");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:54:04.780

正如评论中指出的那样，您正在检查是否在某个时间`t.getLeft()`返回`null`而不在其他时间返回。另外，就我个人而言，我只是讨厌一遍又一遍地调用相同的 get 方法的代码。我可能会选择这一部分：

```
 if (t.getLeft().getData().getCharacter() == character) {
            return t.getLeft().getData().getEncoding();
        }
        if (t.getLeft() != null) {
            t.getLeft().getData().setEncoding(t.getLeft().getData().getEncoding() + "0");
            treeQueue.add(t.getLeft());
        } 
```

并将其重写为：

```
left = t.getLeft();
if ( left != null ) {
  data = t.getData();
  encoding = data.getEncoding();
  if ( data.getCharacter() == character ) {
    return encoding;
  else {
    data.setEncoding( encoding + "0" );
    treeQueue.add( left )
  }
} 
```

（我已经为我添加的变量省略了类型声明，因为我不确定正确的类型名称。）

这应该避免`NullPointerException`if `t.getLeft()`is what's return `null`; 否则，您至少应该更清楚地看到`null`发生异常时哪个引用是因为您不会在一行中有多个取消引用。右侧的部分可以以相同的方式重写（实际上，您可以创建一种方法，只需将左右值传递给，因为您对两者执行相同的操作）。

# winforms - 如何使用 NumericUpDown 控件防止按键输入？

> ID：13235435
> 
> 赞同：1
> 
> 时间：2012-11-05T15:41:29.477
> 
> 标签：winforms, delphi-prism, numericupdown, oxygene

我在 winform 上有一个 numericupdown 控件，我在测试时注意到，您不仅可以选择通过按下 up 和 down 键来更改值，还可以简单地从键盘输入值。

我不想要那个。我只希望用户只能通过单击框中的向上和向下按钮来更改 numericupdown 的值。

到目前为止，我根本找不到解决方案。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:14:27.100

要禁止用户编辑，请将 Readonly 属性设置为 true。

```
updown.ReadOnly = true; 
```

如需更多定制，您可以参考此[答案](https://stackoverflow.com/questions/4059241/c-sharp-winforms-can-you-get-the-numericupdown-text-area)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:47:55.277

根据您允许的值范围，听起来对用户体验不利。

为此，您需要创建一个继承自 NumericUpDown 的控件并覆盖 OnKeyPress/OnKeyDown 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T21:21:16.620

使用`updown.ReadOnly = True;`对我不起作用。这似乎是一个反复出现的错误。但是捕捉任何变化然后撤消它。为此，将函数绑定`updown_ValueChanged()`到`updown.ValueChanged`属性。

```
 decimal spin = 1;
    private void updown_ValueChanged(object sender, EventArgs e)
    {
        if (updown.ReadOnly)
        {
            if (updown.Value != spin)
            {
                updown.Value = spin;
            }
        }
        else spin = updown.Value;
    } 
```

# mysql - flyway 在 MySQL 上执行“alter table ...修改`col`auto_increment”但不更改`col`值

> ID：13235438
> 
> 赞同：0
> 
> 时间：2012-11-05T15:41:43.200
> 
> 标签：mysql, sql, flyway

当我从 MySQL 命令行或 Workbench 执行这些句子时...

```
-- 1) Add a column `id`
ALTER TABLE `DEVICES` ADD `id` BIGINT(20) NOT NULL;
-- 2) Add an index, necessary for auto_increment
ALTER TABLE `DEVICES` ADD index `devices_id_index`(`id`);
-- 3) Makes `id` auto_increment and inserts sequential numbers it (from 1 to N)
ALTER TABLE `DEVICES` MODIFY `id` BIGINT(20) AUTO_INCREMENT; 
```

...我得到的是一个新列`id`，其中填充了从 1 到 N 的自动增量值。

但是当我从**flyway**执行它时，该列`id`的每一行都有一个零，因为最后一句不会改变它的值。

你知道为什么吗？

除了使用过程插入这些值之外，还有什么解决方案/解决方法吗？

谢谢！

费兰

# odbc - 在 Access 2007 中更改 ODBC 连接

> ID：13235439
> 
> 赞同：0
> 
> 时间：2012-11-05T15:41:44.530
> 
> 标签：odbc, ms-access-2007

我有一个 Pass-Through sql-query in access 来查询我的 mysql-db。

我当前用于查询的 ODBC 连接定义如下：

```
ODBC;UID=access_frontend; PWD=hello@world; DSN=my_db_test; 
```

如果我将我的 ODBC 连接从我的测试更改为我的普通数据库

```
ODBC;UID=access_frontend; PWD=hello@world; DSN=my_db; 
```

如果我保存更改并重新启动，Access 已将其更改回`my_db_test`.

有什么地方可以全局更改我的 ODBC 连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:09:31.150

我没有在代码中或手动更改此问题。您可以通过 VBA 更改连接：

```
Dim qdf As QueryDef
''dbQSQLPassThrough = 112
For Each qdf In CurrentDb.QueryDefs
    If qdf.Type = dbQSQLPassThrough Then
        Debug.Print qdf.connect
        qdf.connect = "ODBC;filedsn=z:\docs\test.dsn;"
        Debug.Print qdf.connect
    End If
Next 
```

您会注意到所示的直通查询是指：

```
filedsn=z:\docs\test.dsn; 
```

这是另一种更改连接的简单方法，只需更改 DSN，在上述情况下，您只需编辑文件即可`test.dsn`。

# javascript - 使用 iframe 进行 Google 分析。广告系列跟踪不起作用

> ID：13235442
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:41:48.557
> 
> 标签：javascript, google-analytics

我对 Google 分析中的自定义广告系列跟踪有疑问。在 sns 中，我的应用程序嵌入了 inframe，所有链接如下所示：

```
http://www.odnoklassniki.ru/game/tunerlife?utm_source=source1&utm_medium=Medium1&utm_campaign=CompName 
```

但对于 iframe，此参数发送类似于 custom_args：

```
http://cdn.tuner-life.com/tl/frame_od.htm?authorized=1...custom_args=utm_source%3Dwork%26utm_medium%3Dwork1%26utm_campaign%3Dworkwork&session_... 
```

在 javascript 中，我解析这个参数并推送 _setCampSourceKey 和其他 2 个参数，如谷歌文档中的：

```
 var custom_args = decodeURIComponent(flashvars["custom_args"]);
            var custom_pairs = custom_args.split('&');
                for (var i = 0; i < custom_pairs.length; i++)
                {
                    var c_pair = custom_pairs[i].split('=');
                    if (c_pair[0] == "utm_source")
                        _gaq.push(['_setCampSourceKey', c_pair[1]]);
                    else if (c_pair[0] == "utm_medium")
                        _gaq.push(['_setCampMediumKey', c_pair[1]]);
                    else if (c_pair[0] == "utm_campaign")
                        _gaq.push(['_setCampNameKey', c_pair[1]]);                        
                } 
```

但我没有在 GA 中看到我的自定义广告系列。怎么了？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-28T20:22:01.693

看起来您正在尝试更改键值，但实际上您正在更改键名；不要那样做。utm_source 键名仍然是“utm_source”，值为“work”，但您将键名更改为“work”，并且 URL 中没有“work=work”，因此 GA 没有记录命中。只需完全删除该 javascript 代码即可。

# jasper-reports - jasper 报告 ireport 子报告顺序

> ID：13235445
> 
> 赞同：0
> 
> 时间：2012-11-05T15:41:59.813
> 
> 标签：jasper-reports, subreport

我有一个包含*子报表*A、B、C 和 D 以及 ID 1 和 2 的报表。

目前，当我的报告运行时，它运行 A-1、A-2、B-1、B-2、C-1、C-2、D-1、D-2。

如何更改它以显示id 1 的*子报表*A、B、C、D，然后为传入的每个 id 显示 A、B、C、D 等 id 2？

# ruby - 将模块中的特定方法拉入 ruby 中的全局命名空间

> ID：13235448
> 
> 赞同：2
> 
> 时间：2012-11-05T15:42:14.897
> 
> 标签：ruby

是否可以通过专门命名函数（也就是不是整个模块）将模块中的函数拉入到 ruby​​ 中的全局命名空间？

我有一个最初没有使用模块的模块，我想将类/方法移动到一个模块中，但仍然保留一个模块，该模块将具有全局级别的所有内容以实现兼容性。到目前为止，我有这个。

```
# graph.rb
require 'foo_graph'
include foo

# foo_graph.rb
module foo
    # contents of the old graph.rb
end 
```

但是模块`foo`也在完全不相关的文件中使用，调用`include`可能会将更多的东西拉入全局命名空间，而不是我想要的。

有没有办法让我指定我想要使用哪些功能，`include`或者是否有替代方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:49:35.690

使用子模块。

```
module Foo
  module Bar
    def bar_method; end
  end
  include Bar

  module Baz
    def baz_method; end
  end
  include Baz
end

# only include methods from Bar
include Foo::Bar

bar_method
#=> nil

baz_method
#=> NameError: undefined local variable or method `baz_method' for main:Object

include Foo

# include all methods from Foo and submodules
baz_method
#=> nil 
```

# asp.net-mvc-4 - 使用 Ninject.Extensions.Conventions 在 MVC4 WebApi 中自动绑定

> ID：13235449
> 
> 赞同：2
> 
> 时间：2012-11-05T15:42:17.870
> 
> 标签：asp.net-mvc-4, asp.net-web-api, ninject

在我的 MVC4 应用程序中，我使用 Ninject.Extensions.Conventions 使用默认机制将所有 itnerfaces 与其实现自动绑定：

```
kernel.Bind(x => x
            .FromAssembliesMatching("*")
            .SelectAllClasses()
            .BindDefaultInterface()); 
```

这适用于常规控制器，但不适用于 WebApi 控制器。我需要更改/添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:39:00.117

好的，我按照这篇文章解决了这个问题： [http ://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/](http://www.peterprovost.org/blog/2012/06/19/adding-ninject-to-web-api/)

简而言之：我创建了自己的依赖解析器（根据文章）并将其分配给 GlobalConfiguration.Configuration.DependencyResolver，如 nemesv 所建议的那样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:00:53.537

已经有很多关于如何通过网络将 NInject 与 Web API 集成的示例，使用：

*   依赖解析器

    在 ASP.NET 网站上显示了将任何 DI/IoC 与 Web API 集成的标准方式： [http ://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver](http://www.asp.net/web-api/overview/extensibility/using-the-web-api-dependency-resolver)

*   IDependencyResolver。

    WebApiContrib 项目展示了如何使用 IDependencyResolver [https://github.com/WebApiContrib/WebApiContrib.IoC.Ninject](https://github.com/WebApiContrib/WebApiContrib.IoC.Ninject)

请发布有关您实施这些解析器的更多信息，以便更具体地回答。

# eclipse - OS X 上的 Maven 和 Tycho 代码签名

> ID：13235451
> 
> 赞同：0
> 
> 时间：2012-11-05T15:42:21.007
> 
> 标签：eclipse, maven, rcp, codesign, tycho

我正在尝试使用 Maven+Tycho 构建系统对我的 Eclipse RCP 应用程序进行代码签名。

我将这段代码添加到我的 pom.xml 中，以便对在 OS X 机器上创建的 .app 进行签名：

```
 <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>exec-maven-plugin</artifactId>
                    <version>1.2.1</version>
                    <executions>
                      <execution>
                <id>exec</id>
                <phase>package</phase>
                        <goals>
                          <goal>exec</goal>
                        </goals>
                      </execution>
                    </executions>
                    <configuration>
                      <executable>codesign</executable>
                      <workingDirectory>/tmp</workingDirectory>
                      <arguments>
                        <argument>-s</argument>
                        <argument>"My Developer ID"</argument>
                        <argument>-vvv</argument>
                        <argument>${project.build.directory}/products/${product-id}/macosx/cocoa/x86/MyApp/MyApp.app"</argument>
                      </arguments>
                    </configuration>
                  </plugin> 
```

但它一直给我这个错误：

**“我的开发者 ID”：找不到身份**

我阅读了有关解锁钥匙串的信息，但它确实对我的构建没有影响。是的，我从拥有该证书的同一帐户以 mvn clean install 的形式运行构建。

有没有人设法解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:48:53.070

感谢 Martin Ellis，删除我的开发人员 ID 周围的双引号起到了作用。

# php - 如何防止从 PHP 到 MYSQL 的多次插入重复输入

> ID：13235456
> 
> 赞同：0
> 
> 时间：2012-11-05T15:42:31.740
> 
> 标签：php, mysql, phpmyadmin

我有 for 循环在 1 次单击按钮处插入多条记录。在这方面，我有 RATE = 0 或 NULL 的 IF 语句，然后忽略插入语句，这部分工作正常。如果 rate = 0 或 null，则忽略插入。但这里奇怪的是它插入记录 2 次，在此之前速率 = 0 或 NULL。

我有 PHPMYADMIN。

这是我的代码

```
for($i=0;$i<$a;$i++)
        {
            if(! get_magic_quotes_gpc() )
            {
                $po_number1[$i] = addslashes ($_POST['random']);
                $master_vendor1[$i] = addslashes ($_POST['vendor_name']);
                $market1[$i] = addslashes ($_POST['market'][$i]);
                $start_date1[$i] = addslashes ($_POST['start_date'][$i]);
                $end_date1[$i] = addslashes ($_POST['end_date'][$i]); 
                $qty1[$i] = addslashes ($_POST['qty'][$i]); 
                $rate1[$i] = addslashes ($_POST['rate'][$i]); 
                $comment1[$i] = addslashes ($_POST['comment'][$i]);
                $media_type1[$i] = addslashes ($_POST['media_type'][$i]);
                $sub_vendor1[$i] = addslashes ($_POST['sub_vendor'][$i]);
            }
            else
            {
                $po_number1[$i] = $_POST['random'];
                $master_vendor1[$i] = $_POST['vendor_name'];
                $market1[$i] = $_POST['market'][$i];
                $start_date1[$i] = $_POST['start_date'][$i];
                $end_date1[$i] = $_POST['end_date'][$i]; 
                $qty1[$i] = $_POST['qty'][$i]; 
                $rate1[$i] =  $_POST['rate'][$i]; 
                $comment1[$i] =  $_POST['comment'][$i];
                $media_type1[$i] =  $_POST['media_type'][$i];
                $sub_vendor1[$i] =  $_POST['sub_vendor'][$i];
            }

            if($rate1[$i] == 0 || $rate1[$i] == null)
                {
                // rate is 0 or null, add error
                //  $errors[] = 'Rate is invalid in line ';

                    $errors[] = "Rate is invalid in line $i";
                }
            else
            {
                $sql = "INSERT INTO `order`(`po_number`, `vendor_name`, `market`, `start_date`, `end_date`, `qty`, `rate`, `comment`, `media_type`, `sub_vendor`) VALUES ('$po_number1[$i]','$master_vendor1[$i]','$market1[$i]','$start_date1[$i]','$end_date1[$i]','$qty1[$i]','$rate1[$i]','$comment1[$i]','$media_type1[$i]','$sub_vendor1[$i]')";
            }

            mysql_select_db('mediaplan');
            $retval = mysql_query( $sql, $conn );

            if(! $retval )
            {
                die('Could not enter data: ' . mysql_error());
            }
        } 
```

任何帮助将不胜感激谢谢..

板条箱表查询

创建表订单 ( index int(255) AUTO_INCREMENT, po_number int(255), vendor_name varchar(255), market varchar(255), start_date date, end_date date, qty int(255), rate varchar(10), comment varchar( 255), media_type varchar(255), sub_vendor varchar(255))

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:08:04.043

```
 if($rate1[$i] == 0 || $rate1[$i] == null)
    {
        // rate is 0 or null, add error
        //  $errors[] = 'Rate is invalid in line ';
        $line = $i + 1 ;
            $errors[] = "Rate is invalid $line in line $i"+"1";
        }
    else
    {
        $sql = "INSERT INTO `order`(`po_number`, `vendor_name`, `market`, `start_date`, `end_date`, `qty`, `rate`, `comment`, `media_type`, `sub_vendor`) VALUES ('$po_number1[$i]','$master_vendor1[$i]','$market1[$i]','$start_date1[$i]','$end_date1[$i]','$qty1[$i]','$rate1[$i]','$comment1[$i]','$media_type1[$i]','$sub_vendor1[$i]')";

        mysql_select_db('mediaplan');
        $retval = mysql_query( $sql, $conn );
        if(! $retval )
        {
            die('Could not enter data: ' . mysql_error());
        }
    } 
```

尝试将其放在 else 语句中

```
mysql_select_db('mediaplan');
$retval = mysql_query( $sql, $conn );
if(! $retval )
{
            die('Could not enter data: ' . mysql_error());
} 
```

你有重复条目的原因是因为在你的循环中
if($rate1[$i] == 0 || $rate1[$i] == null) 不满足它会去 else
并且它会触发 $sql = //你的sql命令。

并且下一个循环将遇到满足此条件的条件
if($rate1[$i] == 0 || $rate1[$i] == null) 并将存储到您的错误数组中

这是你的 $sql 仍然保留最后一个查询的技巧，即使它
没有转到 $sql 它仍然会转到 mysql_query() 这就是你有重复条目的原因。

# c# - 端口 DDI 登录密码加密到 Metro

> ID：13235458
> 
> 赞同：3
> 
> 时间：2012-11-05T15:42:37.487
> 
> 标签：c#, encryption, microsoft-metro

在过去的几天里，我一直在尝试将用于登录海岸奇才角色生成器 API 的简单加密（在[此处](http://buccaneersguild.com/ddi-character-builder-api-hacking/)找到）（这样我的应用程序可以直接从服务器下载用户的角色）移植到我可以在 Windows 8 Metro 应用程序中使用，因为 AesManaged 没有进入 Metro 加密库。鉴于我充其量只是一个新手程序员，这已经证明有点超出我的技能。

这是我需要移植的代码：

```
public static byte[] SimpleEncrypt(string value, string key)
{
    byte[] buffer2;
    ICryptoTransform transform = GetSimpleAlgorithm(key).CreateEncryptor();
    using (MemoryStream stream = new MemoryStream())
    {
        using (CryptoStream stream2 = new CryptoStream(stream, transform, CryptoStreamMode.Write))
        {
            byte[] bytes = Encoding.UTF8.GetBytes(value);
            stream2.Write(bytes, 0, bytes.Length);
            stream2.Flush();
            stream2.FlushFinalBlock();
            stream.Position = 0L;
            buffer2 = stream.ToArray();
        }
    }
    return buffer2;
}

private static SymmetricAlgorithm GetSimpleAlgorithm(string key)
{
    AesManaged aes = new AesManaged();
    byte[] source = new SHA256Managed().ComputeHash(Encoding.UTF8.GetBytes(key));
    return new AesManaged { Key = source, IV = source.Take<byte>((aes.BlockSize / 8)).ToArray<byte>() };
} 
```

这用于在通过登录之前加密密码：

```
contentClient.Login(username, SimpleEncrypt(password, username)); 
```

如果需要，Web 服务位于：http: [//ioun.wizards.com/ContentVault.svc](http://ioun.wizards.com/ContentVault.svc)

在第一个链接中对该链接的评论中，有人在 2 月份为 Windows 8 提出了一些代码，但说代码有一些问题我必须在它编译之前修复，即使那样，当我尝试用它登录，我从服务中得到一个异常，说“填充无效并且无法删除”。

这是我目前正在使用的内容：

```
private static byte[] SimpleEncrypt(string value, string key)
{
    var simpleAlgorithm = GetSimpleAlgorithm(key);
    var encryptedBuffer = CryptographicEngine.Encrypt(simpleAlgorithm.Item1, CryptographicBuffer.ConvertStringToBinary(value, BinaryStringEncoding.Utf8), simpleAlgorithm.Item2);
    var result = new byte[encryptedBuffer.Length];
    CryptographicBuffer.CopyToByteArray(encryptedBuffer, out result);
    return result;
}

private static Tuple<CryptographicKey, IBuffer> GetSimpleAlgorithm(string key)
{
    var provider = SymmetricKeyAlgorithmProvider.OpenAlgorithm(SymmetricAlgorithmNames.AesCbcPkcs7);
    var keyAsBinary = CryptographicBuffer.ConvertStringToBinary(key, BinaryStringEncoding.Utf8);
    var source = HashAlgorithmProvider.OpenAlgorithm(HashAlgorithmNames.Sha256).HashData(keyAsBinary);
    var shortKey = CryptographicBuffer.CreateFromByteArray(UTF8Encoding.UTF8.GetBytes(key).Take((int)provider.BlockLength).ToArray());

    return new Tuple<CryptographicKey,IBuffer>(provider.CreateSymmetricKey(source), shortKey);
} 
```

任何帮助让这项工作将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:33:13.720

Welp，花了更多时间查看它，并找出了问题所在。

建议的更新版本使用“密钥”字符串来创建 IV，而它应该使用密钥的哈希值。

这是功能版本，以防万一有人想要它：

```
private static byte[] SimpleEncrypt(string value, string key)
{
    var simpleAlgorithm = GetSimpleAlgorithm(key);
    CryptographicKey encryptKey = simpleAlgorithm.Item1;
    IBuffer IV = simpleAlgorithm.Item2;
    var encryptedBuffer = CryptographicEngine.Encrypt(encryptKey, CryptographicBuffer.ConvertStringToBinary(value, BinaryStringEncoding.Utf8), IV);

    var result = new byte[encryptedBuffer.Length];
    CryptographicBuffer.CopyToByteArray(encryptedBuffer, out result);
    return result;
}

private static Tuple<CryptographicKey, IBuffer> GetSimpleAlgorithm(string key)
{
    var provider = SymmetricKeyAlgorithmProvider.OpenAlgorithm(SymmetricAlgorithmNames.AesCbcPkcs7);
    var keyAsBinary = CryptographicBuffer.ConvertStringToBinary(key, BinaryStringEncoding.Utf8);
    var source = HashAlgorithmProvider.OpenAlgorithm(HashAlgorithmNames.Sha256).HashData(keyAsBinary);

    byte[] sourceArray = new byte[source.Length];
    CryptographicBuffer.CopyToByteArray(source, out sourceArray);

    var shortKey = CryptographicBuffer.CreateFromByteArray(sourceArray.Take((int)provider.BlockLength).ToArray());

    return new Tuple<CryptographicKey,IBuffer>(provider.CreateSymmetricKey(source), shortKey);
} 
```

# xaml - XAML：访问嵌套控件属性

> ID：13235467
> 
> 赞同：1
> 
> 时间：2012-11-05T15:43:09.600
> 
> 标签：xaml

我可以访问位于此控件内的网格​​的“背景”属性，以便可以在需要的位置覆盖默认图像。

```
<LocalControls:HeaderedContentControl 
    Style="{StaticResource MultilineHyperlinkStyle}"
    Header="autocompletebox"
    Content="Completion of text based on items"
    /> 
```

默认图像在此样式中定义。

```
<Style TargetType="LocalControls:HeaderedContentControl">
    <Setter Property="HorizontalContentAlignment" Value="Left"/>
    <Setter Property="VerticalContentAlignment" Value="Top"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="LocalControls:HeaderedContentControl">
                <Grid>
                    <Grid.Background>
                        <!-- ::: DEFAULT IMAGE ::: -->
                        <ImageBrush ImageSource="/eSurveyWin7;component/Images/50x50.png" />
                    </Grid.Background>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" MinWidth="50"/>
                        <ColumnDefinition Width="Auto" MinWidth="173"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <ContentPresenter
                        Grid.Column="1"
                        Content="{TemplateBinding Header}"
                        ContentTemplate="{TemplateBinding HeaderTemplate}"
                        Cursor="{TemplateBinding Cursor}"
                        Margin="{TemplateBinding Padding}"
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"/>
                    <ContentPresenter
                        Grid.Column="1"
                        Grid.Row="1"
                        Content="{TemplateBinding Content}"
                        ContentTemplate="{TemplateBinding ContentTemplate}"
                        Cursor="{TemplateBinding Cursor}"
                        HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                        VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我只想修改第一个片段。

# windows - pidgin的“好友列表”窗口的行为叫什么名字？

> ID：13235468
> 
> 赞同：2
> 
> 时间：2012-11-05T15:43:15.913
> 
> 标签：windows, desktop-application, desktop, pidgin, window-management

我注意到windows上pidgin的“好友列表”窗口有以下特点：如果把窗口拖到桌面右上角不远处，会出现以下情况：

*   边框的外观略有变化：

前：![在此处输入图像描述](../Images/d0df7e15dc19dc92ccaa1869d7a5d4a2.png)

后：![在此处输入图像描述](../Images/bde62570e254d36f3269319f600f85d0.png)

*   它停靠在桌面的右侧
*   **这是最有趣的：它保留了桌面上的空间。**所有其他最大化的窗口都减少了 pigin 窗口的宽度。所有其他窗口的行为就好像桌面的宽度比 pidgin 窗口的宽度短

**问：最后一点实现的功能名称是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:19:37.173

您可以创建自定义工具栏，当桌面使用 SHAppBarMessage() api 函数计算工作区域时，它会观察到这些工具栏。检查 MSDN 库页面以获取文档，它也可以很好地找到示例代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T16:15:30.717

它称为对接。Microsoft one-note 具有相同的功能。

# dom - 将 DOM 元素 id 追溯到其 ExtJs 组件

> ID：13235470
> 
> 赞同：3
> 
> 时间：2012-11-05T15:43:36.173
> 
> 标签：dom, extjs, automation, webautomation

我们正在为使用 ExtJs 构建的 Web 应用程序开发基于 Web 的自动化解决方案。

目前我正在测试各种不同的对象识别技术，以最好的方式识别 Web 元素。

我们想使用 IE 开发者工具 (F12) 来突出显示和选择页面上的 DOM 对象，并且（以某种方式）获取它们对应的 ExtJs 组件（连同其对应的属性，例如 itemId）。

这可以通过代码或其他技术来实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T22:49:43.813

我不熟悉用于此类事情的 IE 开发工具，但是我可以尝试针对特定组件及其元素来回答。

您可以通过多种方式定位 Ext 组件：

1.  `Ext.ComponentQuery.query(CQselector)`方法（[有关示例，请参见文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)）
2.  `Ext.getCmp(componentID)`如果您知道组件 ID
3.  来自任何容器/组件的 up() 和 down() 方法。这些也采用 CQselector 表达式

由于加载了 Ext 库，因此可以从页面访问这些方法中的任何一个。在 FF 和 Chrome 等浏览器中，您可以直接从控制台执行这些方法。我猜想它们应该可以在 IE 开发工具中使用。

引用 Ext 组件后，您可以通过 .dom 或 .el 或类似属性获取 HTML 元素。或者你可以直接使用[Dom 查询](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.dom.Query)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:05:20.053

我相信，如果您设置 id 属性而不是 itemId，您可以获得所需的结果，因为这是作为组件的顶级容器的 html id 属性传递的（我认为！）。尽管考虑到大多数 extjs 组件中使用的嵌套 div/表的数量，但要使其准确地工作有点复杂。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T23:03:13.897

很难说出您要查找的内容，但如果您尝试获取对已呈现的 Ext.Component 的引用，则可以在 HTML 结构中查找您的组件的包装器节点。HTML id 与组件 id 相同。如果你运行`var comp = Ext.getCmp('some-id-12345')`并且如果它返回一些东西，你已经找到了一个`Ext.Component`.

然后你可以使用

```
comp.itemId 
```

检索 itemId

您应该查看[http://www.illuminations-for-developers.com/](http://www.illuminations-for-developers.com/)一个显示 Ext.Components 的 firebug 插件。

您还可以使用[Sencha Page Analyzer](http://www.sencha.com/blog/optimizing-ext-js-4-1-based-applications)查看整个组件树

# ios - iOS，通过 twitter 和 Facebook 共享 webView 内容（长文本或 .pdf）

> ID：13235472
> 
> 赞同：1
> 
> 时间：2012-11-05T15:43:42.840
> 
> 标签：ios, pdf, webview, social-framework

各位开发者您好，

我有一些 html 加载到 webview 中。我需要与 twitter 和 Facebook 分享其内容，因此需要了解以下内容：

1.  有没有办法在 Twitter 上分享长文本？如果本机不支持，也许您知道某些服务会接受一些文本并给我一个链接
2.  我能够从 webview 生成 .pdf （在此问题中的一些文章[How to convert html data to PDF in objective c 之后](https://stackoverflow.com/questions/3750982/how-to-convert-html-data-to-pdf-in-objective-c)）您是否知道一些带有 iOS SDK 的服务可以接受 .pdf 文件并给我一个链接为了那个原因 ？有了它，您可以简单地通过 twitter 分享链接。

我花了一些时间在谷歌上搜索这两者，目前唯一的想法是使用保管箱，这有点解决了这个问题，但没有提供最好的用户体验，因为需要登录到保管箱才能启用共享功能。

期待听到你的想法。

- 担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:10:10.730

我建议在您的网站（如果有的话）上设置一个基本的 PHP 服务，您可以将 .PDF 上传到其中，然后将返回链接提供给 iOS API，例如 bit.ly's。

他们的 API 将在您的网站上返回指向 .PDF 的缩短链接，您还可以使用 bit.ly 跟踪点击次数

[http://github.com/bitly/bitly_ios_sdk](http://github.com/bitly/bitly_ios_sdk)

# git - 更改分支父级

> ID：13235473
> 
> 赞同：36
> 
> 时间：2012-11-05T15:43:53.120
> 
> 标签：git

具有以下分支结构：

```
 master
                     /       \
                BranchA      BranchB 
```

但它应该是：

```
 master
                  /           
            BranchA        
               /
         BranchB 
```

谁能建议如何将 BranchB 重新挂为 BranchA 的孩子？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T15:47:25.973

你想使用[rebase](http://git-scm.com/book/en/Git-Branching-Rebasing)。签出 BranchB 后，执行

```
git rebase BranchA 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T15:49:11.600

```
git checkout branchB; git rebase branchA; 
```

会为你做这件事。请记住，如果这已被推到其他地方，您将搞砸历史。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-15T21:13:28.940

I suggest using `git rebase -i`(interactive mode) to edit the whole history, which commit you want as the starting point of new branch rebase, the commit message, etc.

In your case, if you desired situation is:

```
 master
              /           
        BranchA        
           /
     BranchB 
```

but on branchA you already have some commits:

```
 master
              /           
        BranchA
           |
        commit A1
           |
        commit A2 
```

You may want to choose the A1 as starting point of branchB, not A2(the latest, where the HEAD of A is), then `git rebase -i` can help.

# ios - 设置半透明属性时，如何让 UINavigationController 不更改其视图大小？

> ID：13235476
> 
> 赞同：9
> 
> 时间：2012-11-05T15:43:53.960
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我有一个应用程序，到目前为止，我一直在使用 UINavigationController 和 UINavigationBar，它的属性为 translucent = YES。这意味着 UINavigationController 的内容视图（即来自您推送的视图控制器的视图）是全屏的（减去状态栏）。

然而，如果你设置 navigationBar.translucent = NO，这个容器视图会变短 44pt，因为我想 Apple 已经假设你在不透明的 navigationBar 下不需要任何内容​​。

...除非您正在做我们正在做的事情并且正在使用滚动的导航栏（请参阅[这篇文章了解如何做到这一点](http://horseshoe7.wordpress.com/2012/05/18/uinavigationbar-that-scrolls-away/)）所以我想知道这是否可能。

我想要半透明 = NO，但让一切都表现得好像它仍然设置为 YES。我喜欢 translucent = YES 的功能，但我实际上并不希望 UIKit 将栏变成半透明。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-11T11:29:06.140

对我有用的是 `extendedLayoutIncludesOpaqueBars = true` 添加 `viewDidLoad`

像这样的东西

```
override func viewDidLoad() {
   super.viewDidLoad()
   extendedLayoutIncludesOpaqueBars = true
} 
```

希望它也对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T19:58:57.337

It's not necessarily a good answer but you could just offset your view that high if you're not translucent.

```
//This won't take into account orientation and probably other details
if(!self.navigationController.navigationBar.isTranslucent)
{
    self.view.frame = CGRectMake(0,0,-44,self.view.bounds.size.height);
} 
```

You could put that in your viewDidLoad or viewWillAppear and if you have a bunch of view controllers you can just subclass them all and put your logic in the subclass.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:36:27.407

我找到了一个可行的解决方案，尽管它确实有点像 hack。

这个想法是给半透明的导航栏一个不透明的支持。不幸的是，我对解决方案不满意，因为它很脏，没有封装并引入了一些潜在的问题，但我很高兴，因为它完成了工作。

在我的应用程序的基本视图控制器类（即 MyViewController : UIViewController）中，在 viewDidLoad 方法中，我实例化了一个新的 ivar UIView *_navigationBarBG 并赋予它与 self.navigationController.navigationBar 相同的框架。然后我将它的 backgroundColor 属性设置为 [UIColor whiteColor] 虽然我猜这是你实现更多色调的方式。[编辑：如果您想成为一个纯粹主义者（颜色值与来自 .psd 的颜色值完全相同），您可以将 _navigationBarBG 设为 UIImageView 并在那里使用您的自定义背景，以及您设置的实际 UINavigationBar 的背景以清晰显示（如果您想使用互联网上某处典型的“使用图像更改导航栏”配方，或者拉伸 1px 透明图像）]

```
if(self.navigationController)
{
    _navigationBarBG = [[UIView alloc] initWithFrame: self.navigationController.navigationBar.frame];
    _navigationBarBG.backgroundColor = [UIColor whiteColor];
    [self.view addSubview:_navigationBarBG];
} 
```

然后，（这是蹩脚的部分，但我没有看到任何其他方式），我将此视图添加为子视图。但是，每当您通常调用 [self.view addSubview: anyView] 时，您必须确保调用 [self.view insertSubview: anyView belowSubview: _navigationBarBG];

```
if (_navigationBarBG)
    [self.view insertSubview: anyView belowSubview:_navigationBarBG];
else
    [self.view addSubview: anyView]; 
```

如果您忘记了这一点，这些添加的视图将在您的导航栏背景下滑动并且看起来很奇怪。所以你需要知道这是错误的来源。

我为什么要这样做？您可能会再次问... 这是通过使用 scrollView 委托 (scrollViewDidScroll:) 和 viewWillAppear 来完成的：

```
 // FIRST DEAL WITH SCROLLING NAVIGATION BAR
CALayer *layer = self.navigationController.navigationBar.layer;

CGFloat contentOffsetY = scrollView.contentOffset.y;
CGPoint newPosition;

if (contentOffsetY > _scrollViewContentOffsetYThreshold && self.scrollingNavigationBarEnabled) {
    newPosition = CGPointMake(layer.position.x,
                                 22 - MIN((contentOffsetY - _scrollViewContentOffsetYThreshold), 48.0));  // my nav bar BG image is 48.0 tall
    layer.position = newPosition;
    [_navigationBarBG setCenter: newPosition];  // if it's nil, nothing happens
}
else
{
    newPosition = kNavBarDefaultPosition;  // i.e. CGPointMake(160, 22) -- portrait only
    layer.position = newPosition;
    [_navigationBarBG setCenter: newPosition]; // if it's nil, nothing happens
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T16:15:05.430

我正在寻找这个问题的答案，因为我希望我的子视图位于 (0,0) 而不是 (0,44)（参考屏幕边界），但我找不到关于如何设置它的答案NavigationController，我认为这将是一个包含的属性。

我最终做的事情非常简单，就是在导航控制器中添加一个子视图，即导航栏的宽度和高度，然后在导航栏下方插入子视图。

现在设置为 Translucent = YES，但它仍然显示为实心，并且子视图的行为符合我的要求。

编辑：重新阅读您的原始帖子后，我想如果您要滚动导航栏，您必须考虑隐藏和显示新的子视图，因为您对导航栏执行相同操作

# php - 如何设置android mqtt推送服务器

> ID：13235477
> 
> 赞同：0
> 
> 时间：2012-11-05T15:43:55.300
> 
> 标签：php, android, service, mqtt

我在Windows7平台上安装xampp-v9，android打开sql apache，并安装mqtt代理，确保mqtt服务已打开，使用mqtt php管理器服务器，当我运行时，显示为follos

Tokudu Android Push Demo Server 状态：connect(SAM_MQTT, array(SAM_HOST => '127.0.0.1', SAM_PORT => 1883)); if ($result) { $conn->disconnect(); print_r("在线"); } else { print_r("离线"); } ?>

所以为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:43:35.753

该状态究竟显示在哪里？你部署了什么代码？您是否验证过您可以使用任何其他工具（例如 mosquitto_pub）发布/订阅 mosquitto 或 rsmb？

您是否查看过 MQTT.org wiki 关于在 Android 中使用 MQTT 的信息？[http://mqtt.org/wiki/mqtt_on_the_android_platform](http://mqtt.org/wiki/mqtt_on_the_android_platform)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:45:50.433

Tokudu Android Push Demo Server 状态：connect(SAM_MQTT, array(SAM_HOST => '127.0.0.1', SAM_PORT =>1813)); if ($result) { $conn->disconnect(); print_r("在线"); } else { print_r("离线"); } ?>

以上是问题，我不想使用MQTT来推送android消息

# uiimage - 通过横向播放广播 uiimagePicker 相机

> ID：13235479
> 
> 赞同：1
> 
> 时间：2012-11-05T15:44:03.147
> 
> 标签：uiimage, landscape, picker, airplay

我很欣赏这是异国情调的，但我有一个应用程序为导演和电影摄影师使用了 uiimagePicker 的叠加层。我知道 uiimagePicker 只是纵向的，并且我可以很好地旋转覆盖以使屏幕横向。但是，如果 iphone 正在将其广播到 Apple TV，我似乎无法找到一种方法来告诉它进行播放。理想情况下，导演可以坐在监视器前，而 dp 使用 iphone 预览镜头，但目前每个人都必须侧卧。有什么办法解决这个问题吗？

# asp.net - 在网格视图中存档检查的记录（在数据库中将 0 更改为 1）

> ID：13235490
> 
> 赞同：0
> 
> 时间：2012-11-05T15:44:47.090
> 
> 标签：asp.net, .net, sql, sql-server, vb.net

我有一个网格视图，它通过存储过程指示的数据提取。

![屏幕截图 1](../Images/8bf5b725ab55fa34ddc3d784e4efe542.png)

该存储过程称为 GetEverything。该声明由来自 2 个表格的信息组成，一个包含人员详细信息，另一个包含船舶详细信息。存储过程 select 语句包含以下 Where 子句：

```
WHERE Vessel.ArchiveStatus = 0 
```

默认情况下，使用前端应用程序创建的每条新记录都会在数据库中为 ArchiveStatus 指定一个“0”。

因此，gridview 只会显示 ArchiveStatus 为 0 的记录，默认情况下是evertything。

2 个框，选中全部和取消选中全部都可以正常工作。

What I need now is when a REF or REF(s) are selected and the button 'Archive Records' is clicked, for the 0 in the database to be updated to a 1 for that VesselREF.

任何人都可以建议如何执行此操作并给我一些示例代码以放入存档记录按钮的 Default.aspx.vb 文件/事件处理程序中。

有了这个地方，网格视图将只显示未归档的记录，我可以使用自己的 SQL 创建一个单独的网格视图来显示归档记录。

```
GridView.aspx

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="REF,VesselREF" DataSourceID="SqlDataSource1" Height="132px" 
        style="text-align: center; font-family: Calibri; font-size: medium" 
        Width="508px" BackColor="#C4FFC4">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:TemplateField HeaderText="REF" InsertVisible="False" SortExpression="REF">

                <ItemTemplate>
                    <a href="Details.aspx?REF=<%# Eval("REF")%>"><%# Eval("REF")%></a>
                    <asp:CheckBox ID="RecordSelector" runat="server" />
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title" />
            <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
                SortExpression="FirstName" />
            <asp:BoundField DataField="Surname" HeaderText="Surname" 
                SortExpression="Surname" />
            <asp:BoundField DataField="VesselName" HeaderText="VesselName" 
                SortExpression="VesselName" />
            <asp:BoundField DataField="VesselREF" HeaderText="VesselREF" 
                InsertVisible="False" ReadOnly="True" SortExpression="VesselREF" />

        </Columns>
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:15.897

假设您正在使用`TemplateFields`并且想要使用存储过程来设置两种存档状态：

```
Protected Sub btnArchive_Clicked(sender As Object, e As EventArgs)Handles btnArchive.Clicked
    For Each row As GridViewRow In GridView1.Rows
        Dim chk As CheckBox = DirectCast(row.FindControl("ChkRef"), CheckBox)
        If (chk.Checked) Then
            Dim refID As Integer = Integer.Parse(row.Cells(5).Text)
            ArchiveRecord(refID, True)
        End If
    Next
End Sub

Public Shared Sub ArchiveRecord(refID As Integer, archive As Boolean)
    Using con = New SqlConnection(My.Settings.MyConnectionString)
        Using cmd = New SqlCommand("StoredProcedureName", con)
            cmd.CommandType = CommandType.StoredProcedure
            cmd.Parameters.AddWithValue("@RefID", refID)
            cmd.Parameters.AddWithValue("@Archive", archive)
            con.Open()
            Dim affectedrecordCount As Integer = cmd.ExecuteNonQuery()
        End Using
    End Using
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:52:16.447

您需要使用 GridView.DataKeys 属性并存储每个 DataKey 的行 ID 值。然后，当您更新时，枚举 GridViewRows 并使用 FindControl 来定位 CheckBox。然后检查是否选中了该框，如果是，则连接到一个字符串...

```
' on update_pressed()...
Dim Ids as new StringBuilder()
For each gvr as gridViewRow in myGv.Rows
   Dim cbx as CheckBox = gvr.FindControl("myCheckBoxID")
   if cbx.Checked Then
      Ids.Append(gvr.DataKeys(gvr.RowIndex).Value.ToString & ",")
   End If
End For
' Ids now contains "5,6,87,356,2355," etc 
```

然后，您可以使用 SQL CSV to Table Variable 函数将 Id 值放入表变量中以使用

# mysql - mysql查找重复项

> ID：13235491
> 
> 赞同：2
> 
> 时间：2012-11-05T15:44:47.620
> 
> 标签：mysql

```
 id | apples  | oranges
1    111       p
2    112       p
3    113       p
***4    113       f***
***5    113       -***
6    114       p
***7    114       f***
8    115       -
9    115       -
10   116       f 
```

寻找一种仅返回以下行的方法：

1.  橙子包含值“f”或没有值（空）
2.  苹果中有重复的值
3.  应用中至少有一个副本包含橘子中的“p”值。

粗体和斜体的第 4,5 和 7 行是我所追求的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:48:06.407

您需要进行自我加入。像这样的东西：

```
SELECT t1.*
FROM myTable t1
INNER JOIN myTable t2 ON t1.apples = t2.apples
WHERE t1.oranges IN ('f', '-')
AND t2.oranges = 'p' 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/97104/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:51:32.810

让我们将它们写成三个单独的查询，然后将它们组合起来。

> 寻找一种仅返回橙子包含值“f”或没有值（空）的行的方法

```
select *   
from table  
where oranges = 'f'
or oranges is null; 
```

> 苹果中有重复的值，并且至少一个重复包含橙子中的“p”值

```
select * 
( 
  select *
  from table    
  INNER JOIN (SELECT apples FROM inner_table
  GROUP BY apples HAVING count(id) > 1)
)
where oranges ='p' 
```

然后你可以像这样组合它们：

```
select *
(
    select *  
    from table  
    where (oranges ='f' or oranges is null)  
    INNER JOIN (SELECT apples FROM inner_table
  GROUP BY apples HAVING count(id) > 1)
)
where oranges ='p' 
```

这是未经测试的，因为我没有可以使用的架构。

# php - 在 PHP/MYSQL 中选择特定行

> ID：13235492
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:44:54.007
> 
> 标签：php, sql, mysql

假设我有一个用户表。我得到了 ID、用户名、密码和激活等列。我只想知道如何编写 MYSQL 语句：SELECT into USERS WHERE ID = $ID, INSERT (activated) Values (0) 有人能用正确的语法说吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:42:40.660

You first need to connect to the MySQL database:

```
$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db'); 
```

Then, to select data for an specific ID:

```
if( $mysqli->query( "SELECT * FROM users WHERE ID = $ID" ) ) {
    if( $result = $mysqli->use_result() ) {
        while( $row = $result->fetch_assoc() ) {
            echo $row['username'];
        }
        $result->close();
    }
} 
```

To insert new data, you just need to query an insert statement.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:46:29.240

像这样。假设您的 ID 变量是 $ID，表名称是“用户”并且已激活的列是 INT 类型。

要查看它...

```
mysqli_query("SELECT * FROM users WHERE ID='".$ID."'"); 
```

要更新它...

```
mysqli_query("UPDATE users SET Activated=1 WHERE ID='".$ID."'"); 
```

你觉得怎么样？

# javascript - JQuery Mobile：无法从选择菜单中打开弹出窗口

> ID：13235496
> 
> 赞同：3
> 
> 时间：2012-11-05T15:45:06.517
> 
> 标签：javascript, jquery-mobile

我正在尝试从 jquery 移动选择菜单中打开一个弹出对话框。如果我将弹出窗口打开命令置于超时状态，它会起作用，但在直接打开弹出窗口时不会。IE：

这有效：

```
 $("#message-commands").bind("change", function (event, ui) {
    var value = event.target.value;
    switch (value) {
        case "delete":
            setTimeout(function () {
                $('#popupDelete').popup('open');
            }, 1000);
            break;
    } 
```

但这不会：

```
$("#message-commands").bind("change", function (event, ui) {
    var value = event.target.value;
    switch (value) {
        case "delete":
            $('#popupDelete').popup('open');
            break;
    } 
```

popupDelete div 看起来像这样

```
<div data-role="popup" id="popupDelete" style="max-width:300px;" class="ui-corner-all ui-popup ui-body-c ui-overlay-shadow" aria-disabled="false" data-disabled="false" data-shadow="true" data-corners="true" data-transition="none" data-position-to="origin">
    <div data-role="header" class="ui-corner-top ui-header ui-bar-a" role="banner">
            <h1 class="ui-title" role="heading" aria-level="1">Delete?</h1>

    </div>
    <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content ui-body-d" role="main">
            <h3 class="ui-title">Are you sure you want to delete this message?</h3>

        <p>This action cannot be undone.</p>    <a href="#" data-role="button" data-inline="true" data-rel="back" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-c"><span class="ui-btn-inner ui-btn-corner-all" onclick="$('#deleteConfirm').popup('close');"><span class="ui-btn-text">Cancel</span></span></a>   <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b" data-corners="true" data-shadow="true" data-iconshadow="true" data-wrapperels="span" class="ui-btn ui-shadow ui-btn-corner-all ui-btn-inline ui-btn-up-b" onclick="deleteConfirmed();"><span class="ui-btn-inner ui-btn-corner-all"><span class="ui-btn-text">Delete</span></span></a> 
    </div>
</div> 
```

有什么建议么？我不能使用上面的，因为如果客户端处理命令很慢，它不会在 1000ms 内工作，我不想增加它来为更快的客户端造成不合理的延迟。我怀疑问题是选择菜单必须先关闭才能打开弹出窗口，但是没有事件可以检测选择菜单是否已关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:57:15.313

似乎，打开一个弹出窗口需要一些延迟，[另见这个例子](https://stackoverflow.com/questions/13153429/in-jquery-mobile-how-would-i-close-a-popup-5-seconds-after-appearing)，但你为什么不直接使用 100 毫秒而不是 1000 毫秒的延迟呢？

# gwt - GWT MouseOutHandler 未触发，当移动到快速图标时

> ID：13235498
> 
> 赞同：1
> 
> 时间：2012-11-05T15:45:12.800
> 
> 标签：gwt, tooltip, mouseevent, onmouseout

我有一个 Tooltip 类，它为元素添加了工具提示功能。

当我在元素上移动得太快时，MouseOutHandler 有时不会触发，因此工具提示仍然可见。

这是我添加处理程序的方法：

```
((HasMouseOverHandlers) source).addMouseOverHandler(this);
((HasMouseOutHandlers) source).addMouseOutHandler(this);
((HasMouseMoveHandlers) source).addMouseMoveHandler(this); 
```

如果我移动鼠标太快，我是否忘记了什么，或者 onmouseout 事件不触发是否正常？

# javascript - 单击按钮时如何创建IMG？

> ID：13235499
> 
> 赞同：3
> 
> 时间：2012-11-05T15:45:15.850
> 
> 标签：javascript, html

现在我有这个：

```
<script>
 function load() { 
 var el = document.getElementById('load');
 el.innerHTML='<img src=\"load.png\">'; }
</script> 
```

和html：

```
<input type="submit" onclick="javascript:load();"> 
<span id="load"> </span> 
```

但这不起作用，因为我可能不会将`<`and`>`放在`el.innerHTML=''`. 有人知道替代方案吗？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:54:02.113

的全部意义`innerHTML`在于您可以在其中使用`<`和使用`>`。您有一些毫无意义的引号转义和货物崇拜`javascript:` [标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)，但脚本有效。

它可能只是看起来失败了，因为表单提交并且浏览器在图像加载之前离开了页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:55:12.217

您应该使用方法创建元素`createElement()`，然后将其附加到您的容器中：

```
var el = document.getElementById('load');
var img = document.createElement('img');
img.src = 'test.png';
el.appendChild(img);
alert(el.innerHTML); 
```

请参阅此[演示](http://jsfiddle.net/Bwp8U/2/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:52:30.103

使用 jQuery！

```
<button id="button">Click</button>

$(document).ready(function(){
    $("#button").click(function(){
        $("#load").append("<img src='\load.png\'/>");
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T15:52:58.627

你可以试试这个：

javascript:

```
 function showImage(){
     document.getElementById('load').style.display = 'block';
  } 
```

html:

```
 <input type="submit" onclick="showImage();">
 <span id="load" style="display:none;"><img src="load.png"></span> 
```

# quartz-scheduler - Quartz 2.1 框架需要澄清吗？

> ID：13235500
> 
> 赞同：1
> 
> 时间：2012-11-05T15:45:20.007
> 
> 标签：quartz-scheduler

您能否澄清以下内容？

1.  当前的石英 2.1 是否支持 RAMJobStore 的集群？
2.  在集群环境中，有没有办法通过 Quartz 指定作业在所有节点中运行？
3.  在集群环境中，有没有办法通过 Quartz 指定作业在特定节点中运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:52:29.440

> 一种。当前的石英 2.1 是否支持 RAMJobStore 的集群？

不，`RAMJobStore`只能在一个 JVM 中工作。

> 湾。在集群环境中，有没有办法通过 Quartz 指定作业在所有节点中运行？

不，这是不可能的。

> C。在集群环境中，有没有办法通过 Quartz 指定作业在特定节点中运行？

不，集群任意决定哪个节点应该运行该作业，而您无法控制它。但请参阅：[选择 Quartz 集群中的节点以执行作业](https://stackoverflow.com/questions/4847543)。

# pylint - 皮林特和单元测试

> ID：13235501
> 
> 赞同：8
> 
> 时间：2012-11-05T15:45:21.150
> 
> 标签：pylint

我有一个使用 pylint 和 unittest 的 python 项目。Unittest 让我使用 pylint 不喜欢的名为 setUp() 的方法。具体来说：

```
C0103: 57,4:<class>.setUp: Invalid name "setUp" for type method (should match [a-z_][a-z0-9_]{2,30}$) 
```

如何让 pylint 允许 setUp 作为方法名称？例如，我没有看到名为“允许的方法名称”的配置项。我宁愿不要`# pylint: disable=C0103`全部使用，因为我的代码中有很多 setUp 方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T16:42:52.167

change the method-rgx setting in your configuration file (it's in the BASIC section). Something like this should do the trick:

```
method-rgx=(([a-z_][a-z0-9_]{2,30})|(setUp)|(tearDown))$ 
```

# java - 如何扩展 HashMap 以允许 String、String 类型

> ID：13235503
> 
> 赞同：11
> 
> 时间：2012-11-05T15:45:20.957
> 
> 标签：java, hashmap

我需要创建一个扩展 java.util.LinkedHashMap 的自定义类，并将 String 作为键和 String 作为值，并具有一个无参数构造函数，该构造函数使用初始值预填充此映射。

我被困在第一个任务上 - 如何扩展 LinkedHashMap 以使其仅接受通用参数而不是通用参数？

我试过这个，（不工作）

```
import java.util.LinkedHashMap;

@SuppressWarnings("serial")
public class MyMenu<String, String> extends LinkedHashMap<String, String> {

    public MyMenu(){
        this.put("index.jsp", "Home Page");
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T15:51:23.060

所有你需要的是：

```
import java.util.LinkedHashMap;

@SuppressWarnings("serial")
public class MyMenu extends LinkedHashMap<String, String> {

    public MyMenu(){
        this.put("index.jsp", "Home Page");
    }
} 
```

从您的班级名称中删除`<String, String>`，它将起作用。您正在创建一个正在扩展的类，`LinkedHashMap<String, String>`因此您的类已经是一个`Map`作为`String`键和`String`值的类。如果你想创建自己的泛型类，那么你必须这样做：

为例如创建一个类：

```
public class MyMenu<K, V> { ... } 
```

然后扩展该类：

```
public class SomeMyMenu extends MyMenu<String, String> { ... } 
```

在这种情况下，您必须为您的类指定键和值，以便`SomeMyMenu`类将键和值用作`String`. [您可以在此处](http://docs.oracle.com/javase/tutorial/java/generics/types.html)阅读有关泛型的更多信息。

但更有效的方法是创建一些最终类并在其中声明地图，如下所示：

```
public static final LinkedHashMap<String, String> MAP = new LinkedHashMap<String, String>() {{
    put("index.jsp", "Home Page");
}}; 
```

要从您的地图中获取值，请使用：

```
SomeClass.MAP.get("Some Key"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:46:44.450

如果您的斗争，正如您所描述的，只是与宣言，那么我会尝试类似：

```
class MyCustomizedMap extends LinkedHashMap<String, String> {
    //...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T15:48:27.413

您可以执行以下操作：

```
 public class MyMap extends LinkedHashMap<String,String>{ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T15:47:26.130

尝试：

```
public class MyMap extends LinkedHashMap<String, String> { ... } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T15:49:42.583

只要你使用的是 JDK 1.5 或更高版本，就可以使用泛型并创建一个 LinkedHashMap 来存储 String 键和 String 值并对其进行初始化，如下所示：

```
LinkedHashMap<String, String> myMap = new LinkedHashMap<String, String>()
{
    {
        put("abc", "xyz");
        ...
    };
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T15:53:15.393

在您的情况下，组合是比继承更好的解决方案：

```
class MyProperties implements Map<String, String> {

    private Map<String, String> delegatee = new LinkedHashMap<String, String>();

    // ... delegate your methods to delegatee
} 
```

# windows - Windows 8：以编程方式阻止启动窗口

> ID：13235504
> 
> 赞同：1
> 
> 时间：2012-11-05T15:45:24.037
> 
> 标签：windows, microsoft-metro, desktop

我正在开发教室控制软件。其中一项功能是教师必须能够阻止用户看到开始屏幕。在学生端运行的应用程序是在 windows 8 桌面上运行的。我如何从 C++ 代码中阻止用户进入开始屏幕？如果那不可能，我可能会强制应用程序在某些时候切换回桌面视图。这可以通过代码实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:36:23.470

由于这是一个复杂的话题，我不会在这里重复内容。创建信息亭风格的应用程序取决于 Authenticode 签名的可执行文件和 UIAccess 清单属性。您还应该了解[Windows 8 桌面应用程序的认证要求，](http://msdn.microsoft.com/en-us/library/windows/desktop/hh749939.aspx)因为如果设计不当，展台式应用程序可能会带来很大的安全风险。

1.  [Windows 8 中的 Kiosk 样式应用程序](http://social.msdn.microsoft.com/Forums/pl-PL/windowsgeneraldevelopmentissues/thread/5eb76d8d-5c47-48a4-ad7b-f052c95df3ef)
2.  [Metro 之上的桌面应用程序](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/8529357f-3ff8-4c83-baaf-5215ca9cc14a)
3.  [使用requestedExecutionLevel的uiAccess属性改进提供桌面远程控制的应用程序](http://blogs.msdn.com/b/cjacks/archive/2009/10/15/using-the-uiaccess-attribute-of-requestedexecutionlevel-to-improve-applications-providing-remote-control-of-the-desktop.aspx)
4.  [第 6 步：创建和嵌入应用程序清单 (UAC)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)

# azure - 自动调整 Azure VM 映像的大小

> ID：13235508
> 
> 赞同：1
> 
> 时间：2012-11-05T15:45:56.557
> 
> 标签：azure, hosting, cloud, azure-virtual-machine

是否可以根据设定的条件自动触发 Azure VM 的大小调整？

例如，如果处理器/RAM 在 5 分钟内使用率超过 90%，则从“中型”机器增加到“大型”机器？那么，当使用量减少时，显然会缩减？

或者......是否可以安排在（高峰）英国办公时间之间调整大小，然后缩小非高峰时间？

只是一个想法...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:49:39.387

不，这是不可能的。但是您可以相当容易地对自动缩放进行编程。看看[Azure Scale Me 项目](https://github.com/ActiveWebSolutions/AzureScaleMe)。这使用对云服务的调用，但您可以相当轻松地将调用添加到虚拟机 REST API 调用，而不是托管服务 REST API 调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T20:59:01.947

值得一试来自模式和实践团队的[Auto Scaling Building Block](http://msdn.microsoft.com/en-us/library/hh680892%28v=PandP.50%29.aspx)，它是适用于 Windows Azure 的 Enterprise Library 5.0 的一部分

> Microsoft Enterprise Library Autoscaling Application Block (WASABi) 允许您向 Windows Azure 应用程序添加自动缩放行为。您可以选择在 Windows Azure 或本地应用程序中托管块。无需修改即可使用自动缩放应用程序块；它提供了在 Windows Azure 应用程序中定义和监控自动缩放行为所需的所有功能。
> 
> Enterprise Library Autoscaling Application Block 包括以下功能：
> 
> *   它允许您使用图形企业库配置工具来管理配置设置。
> *   它允许您配置块使用的存储位置和日志记录机制。
> *   它允许您通过添加自定义自动缩放规则和操作来扩展块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T21:33:42.770

如果您想要一种免提方法并且不介意使用第三方服务结帐[AzureWatch](http://www.paraleap.com) 如果您最终通过以下方式实施任何自动缩放解决方案，那么您需要进行大量编码、维护、监控和担心自动缩放的细微差别你自己有或没有开源块 - 当自动缩放解决方案需要托管在某个地方，有时是更大的规模时，仍然会产生被认为可以节省的成本。

# charts - 带有连接表的 JavaFx 图表

> ID：13235509
> 
> 赞同：0
> 
> 时间：2012-11-05T15:46:03.470
> 
> 标签：charts, javafx, linechart

我正在尝试在 JavaFx 中创建一个折线图，其中我有一个数字（整数）的 Y 轴和一个天的 X 轴。

现在创建图表非常简单，但我确实有一个更复杂的问题。

我的老板要我在正确的日期在每个标记（x 轴）下添加每天的信息。这听起来可能很简单，但我无法找到一个将图表和表格创建为一体的 JavaFx 示例。

到目前为止，我的程序如下所示：

![](../Images/22158f2263448e1ba4f4e6388101a167.png)

如何在不浪费时间手动操作的情况下同步图表和表格？

**更新 - 更准确的解释：**

如果你看我的图片，图表和表格分为两个独立的部分！我想要的是一个组件中的图表和表格。

让我举个例子：

在 X 轴下显示 Man（星期一的丹麦语缩写）我想在表格中显示星期一的所有信息，其中包含以下信息（从图表中读取）

*   临杰1：25。
*   Linje 2：78（大约在那里）
*   临杰 3：100

我希望每天都有这些信息（最好还有每行的颜色）。

***所以总结一下***

我想要一张带有连接表格的图表，这意味着我的表格将被移除，而是刻入图表中，以便轻松读取图表上每个点的精确信息。

# python - 使用 Python 将搜索列表与 csv 文件的每一行进行比较

> ID：13235514
> 
> 赞同：0
> 
> 时间：2012-11-05T15:46:36.650
> 
> 标签：python, search, csv

我有一个搜索项目列表：

```
search = ("EPP3424", "EPP5423", "EPP4567", Continues... ) 
```

我想检查 csv 文件的每一行，其中每一行如下所示：

```
("1206502", "EPP5423", "97334343")
next row... 
```

如果搜索列表中的任何项目出现在 csv 行中，则将该整行添加到新列表中。

问题是我可以让它只匹配一个结果，我似乎无法让它正确地循环这些项目。

```
csvFile = open(fRoot + "\\SearchEPP.csv", 'r')
try:
    csvReader = csv.reader(csvFile)
    for row in csvReader:
        if all(s in row for s in search):
            print "Match"
            allEPP.append(row)
        else:
            print "no match"
finally:
    csvFile.close() 
```

Python 2.6，Windows 7

更新：

这是我根据您的回复尝试做的事情，仍然只返回一条记录。

```
f = open(fRoot + "\\EPP.txt", "r")

search = list()
for row in f:
    search.append(row)

search = set(search)   

#search = ("EPP2383", "EPP2384")

allEPP = list()

csvFile = open(fRoot + "\\SearchEPP.csv", 'r')
try:
    csvReader = csv.reader(csvFile)
    for row in csvReader:
        if any(r in search for r in row):
            print "Match"
            allEPP.append(row)
        else:
            print "."
finally:
    csvFile.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:49:16.860

```
if all(s in row for s in search): 
```

应该是：

```
if any(s in row for s in search): 
```

* * *

请注意，执行此操作的更好方法是转换`search`为一次集合：

```
search = set(search)
... 
```

然后检查`set`（而不是`tuple`）。成员资格测试`set`通常为 O(1)，而对于元组则为 O(n)。

```
if any(r in search for r in row): 
```

甚至：

```
if search.intersection(row):
   ... 
```

虽然`any`解决方案*可能*更快（取决于有多大`row`以及通过交集创建新集合的开销与生成器表达式的开销相比）。

* * *

正如@RocketDonkey 所建议的那样，您的“搜索”列表中可能有换行符，这仍然会导致您更新的代码出现问题。这是一个修复：

```
with open(fRoot + "\\EPP.txt", "r") as f:
    search = set(line.rstrip('\n') for line in f) 
```

# java - Glassfish 集群突然关闭

> ID：13235518
> 
> 赞同：0
> 
> 时间：2012-11-05T15:46:46.767
> 
> 标签：java, glassfish, shutdown, application-server

我有以下问题。我们的 Glassfish 3.1 服务器配置了一个集群以进行一些繁重的处理。有时，集群会在没有任何已知原因的情况下关闭。我在日志中没有发现任何异常，只是服务器记录关闭消息。我附加了 2 个日志文件片段，一个来自 DAS，另一个来自集群实例之一。所有节点都在同一台机器上。对此的任何帮助都将受到欢迎。

谢谢

```
DAS
11:46:45,322 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/E:/Glassfish3/glassfish/domains/domain1/generated/jsp/managementtool-1.12.0.20/loader_1608711619/logback.xml]
11:46:45,416 |-ERROR in ch.qos.logback.classic.joran.action.InsertFromJNDIAction - [SMTPServer] has null or empty value
11:46:45,416 |-INFO in ch.qos.logback.classic.joran.action.InsertFromJNDIAction - Setting context variable [LOG_LOCATION] to [E:\\v1\\logs]
11:46:45,416 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.rolling.RollingFileAppender]
11:46:45,416 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [FILE]
11:46:45,478 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - No compression will be used
11:46:45,494 |-INFO in c.q.l.core.rolling.TimeBasedRollingPolicy - Will use the pattern E://v1//logs/managementtool/spm-%d{yyyy-MM-dd}.%i.log for the active file
11:46:45,494 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@468b2c18 - The date pattern is 'yyyy-MM-dd' from file name pattern 'E://v1//logs/managementtool/spm-%d{yyyy-MM-dd}.%i.log'.
11:46:45,494 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@468b2c18 - Roll-over at midnight.
11:46:45,494 |-INFO in ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP@468b2c18 - Setting initial period to Fri Jun 29 11:46:45 EEST 2012
11:46:45,494 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
11:46:45,588 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - Active log file name: E://v1//logs/managementtool/spm-2012-06-29.0.log
11:46:45,588 |-INFO in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - File property is set to [null]
11:46:45,588 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
11:46:45,603 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
11:46:45,603 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
11:46:45,603 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to INFO
11:46:45,603 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
11:46:45,603 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.mypackage.central] to DEBUG
11:46:45,603 |-INFO in ch.qos.logback.classic.joran.action.LoggerAction - Setting level of logger [com.mypackage.managementtool] to DEBUG
11:46:45,603 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
11:46:45,603 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@80e1ba6 - Registering current configuration as safe fallback     [#|2012-06-29T11:47:09.479+0300|INFO|glassfish3.1.1|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=111;_ThreadName=Thread-2;|managementtool-1.12.0.20 was successfully deployed in 49,564 milliseconds.|#]

[#|2012-06-29T11:49:57.263+0300|INFO|glassfish3.1.1|ShoalLogger|_ThreadID=19;_ThreadName=Thread-2;|GMS1015: Received Group Shutting down message from member: server of group: POD_Processing_Cl01|#]

[#|2012-06-29T11:49:57.263+0300|INFO|glassfish3.1.1|ShoalLogger|_ThreadID=18;_ThreadName=Thread-2;|GMS1092: GMS View Change Received for group: POD_Processing_Cl01 : Members in view for MASTER_CHANGE_EVENT(before change analysis) are :
1: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.10.67:9171:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
2: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.20.110:9181:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
3: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.20.195:9134:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
4: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.10.67:9106:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
5: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.20.110:9152:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
6: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.20.195:9090:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
7: MemberId: server, MemberType: SPECTATOR, Address: 10.220.10.67:9157:228.9.103.177:16084:POD_Processing_Cl01:server
8: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.110:9154:228.9.103.177:16084:POD_Processing_Cl01:server
9: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.195:9149:228.9.103.177:16084:POD_Processing_Cl01:server
10: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.197:9129:228.9.103.177:16084:POD_Processing_Cl01:server 
```

和

```
Cluster
2012-06-29 11:43:27,396 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] DEBUG envId{33} - sesId{} - com.mypackage.worker.taskprocessing.flow.stage.DispatcherNotificationStage[61] - Beginning stage WORKER_DISPATCHER_NOTIFICATION...
2012-06-29 11:43:27,396 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] INFO  envId{33} - sesId{} - com.mypackage.worker.communication.jms.JMSCompletionMessageSender[45] - Sending to Dispatcher JMS completion message for task {runId=4121, environmentId=33}, status=RUN_COMPLETED}...
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] INFO  envId{33} - sesId{} - com.mypackage.worker.communication.jms.JMSCompletionMessageSender[45] - Sending to Dispatcher JMS completion message for task {runId=4121, environmentId=33}, status=RUN_COMPLETED}...DONE
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] DEBUG envId{33} - sesId{} - com.mypackage.worker.taskprocessing.flow.stage.DispatcherNotificationStage[61] - Ending stage WORKER_DISPATCHER_NOTIFICATION...
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] INFO  envId{33} - sesId{} - com.mypackage.worker.taskprocessing.slotpool.SlotPool[49] - Releasing execution slot for completed task {runId=4121, environmentId=33}}...
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] INFO  envId{33} - sesId{} - com.mypackage.worker.taskprocessing.slotpool.SlotPool[49] - Releasing execution slot for completed task {runId=4121, environmentId=33}}...DONE
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] DEBUG envId{33} - sesId{} - com.mypackage.worker.taskprocessing.slotpool.SlotPool[61] - Ending stage WORKER_SLOT_POOL...task {runId=4121, environmentId=33}} 
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] DEBUG envId{33} - sesId{} - com.mypackage.worker.taskprocessing.ProcessingSlot[61] - Ending method doProcess()...
2012-06-29 11:43:27,411 [com-mypackage-worker-Execution slot for task {runId=4121, environmentId=33}}] DEBUG envId{33} - sesId{} - com.mypackage.worker.taskprocessing.ProcessingSlot[61] - Ending stage WORKER_SLOT...
2012-06-29 11:44:00,443 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.service.WorkerInstancePropertiesService[61] - Beginning method destroy()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.service.WorkerInstancePropertiesService[61] - Ending method destroy()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.WorkerImpl[61] - Beginning method destroy()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.WorkerImpl[61] - Ending method destroy()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.taskrepository.TaskPreallocationQueue[61] - Beginning method shutdown()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.worker.taskrepository.TaskPreallocationQueue[61] - Ending method shutdown()...
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - org.springframework.context.support.ClassPathXmlApplicationContext[1020] - Closing org.springframework.context.support.ClassPathXmlApplicationContext@aedb61f: startup date [Fri Jun 29 11:31:34 EEST 2012]; root of context hierarchy
2012-06-29 11:44:00,459 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.appframework.persistence.PersistenceServiceImpl[74] - Destroying datasource for environment id : 33
2012-06-29 11:44:00,599 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - com.mypackage.appframework.persistence.PersistenceServiceImpl[76] - Destroyed data source for environment id : 33
2012-06-29 11:44:00,599 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - org.hibernate.impl.SessionFactoryImpl[925] - closing
2012-06-29 11:44:00,615 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - org.springframework.jmx.export.MBeanExporter[429] - Unregistering JMX-exposed beans on shutdown
2012-06-29 11:44:00,646 [Duration logger] INFO  envId{} - sesId{} - com.mypackage.appframework.util.Consumer[75] - Duration logger thread is shutting down
2012-06-29 11:44:00,646 [Alert reporter] INFO  envId{} - sesId{} - com.mypackage.appframework.util.Consumer[75] - Alert reporter thread is shutting down
2012-06-29 11:44:00,709 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - com.mypackage.appframework.cache.metadata.MetadataRegistrationService[78] - Successfully unregistered for environment with id 33 and name Env1
2012-06-29 11:44:00,724 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean[441] - Closing JPA EntityManagerFactory for persistence unit 'central'
2012-06-29 11:44:00,740 [admin-thread-pool-24850(5)] INFO  envId{} - sesId{} - org.hibernate.impl.SessionFactoryImpl[925] - closing
2012-06-29 11:44:00,740 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.central.persistence.CentralDataSource[57] - Destroying central data source.
2012-06-29 11:44:00,818 [admin-thread-pool-24850(5)] DEBUG envId{} - sesId{} - com.mypackage.webframework.config.LogbackContextListener[77] - Stopping the loggerContext for worker on the context destroy event 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:45:19.003

似乎在不同的机器（不同的 IP 地址）上有多个集群共享相同的 GMS 地址和端口。这就是为什么当一个集群收到关闭消息时，其他集群也会收到它并采取相应的行动。

```
1: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.10.67:9171:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
2: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.20.110:9181:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
3: MemberId: POD_Processing_Cl01_ins01, MemberType: CORE, Address: 10.220.20.195:9134:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins01
4: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.10.67:9106:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
5: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.20.110:9152:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
6: MemberId: POD_Processing_Cl01_ins02, MemberType: CORE, Address: 10.220.20.195:9090:228.9.103.177:16084:POD_Processing_Cl01:POD_Processing_Cl01_ins02
7: MemberId: server, MemberType: SPECTATOR, Address: 10.220.10.67:9157:228.9.103.177:16084:POD_Processing_Cl01:server
8: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.110:9154:228.9.103.177:16084:POD_Processing_Cl01:server
9: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.195:9149:228.9.103.177:16084:POD_Processing_Cl01:server
10: MemberId: server, MemberType: SPECTATOR, Address: 10.220.20.197:9129:228.9.103.177:16084:POD_Processing_Cl01:server 
```

# php - 验证码不是很有效

> ID：13235521
> 
> 赞同：0
> 
> 时间：2012-11-05T15:46:56.683
> 
> 标签：php

我最近在机器人注册我的网站时遇到了很多问题。

作为解决此问题的一种方法，我在注册表单中添加了 recaptcha。

这并没有阻止注册，它们仍然像最近一样发生。

我不确定我还需要提供什么来让您理解问题？

我认为 recaptcha 会阻止这种情况发生！

有任何想法吗？

谢谢，卢克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:58:24.250

我很久以前就放弃了验证码，转而使用其他方法，例如形成蜜罐。可能想试一试，看看是否有帮助。

[http://nedbatchelder.com/text/stopbots.html](http://nedbatchelder.com/text/stopbots.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:55:47.373

最后我检查了一下，我承认是不久前，ReCaptcha 被垃圾邮件发送者破坏了，或者，正如评论中链接的@marc-b，你正在使用的库被破坏了。即使它已被修复，它也非常引人注目，以至于垃圾邮件发送者花费时间和精力再次破解它是非常有利可图的。

最简单和最有效的验证码是一个简单的挑战/响应，即：显示某物的图片 [例如：一个苹果] 并让用户输入。避免只输入一个简单的数学问题的诱惑，因为有许多脚本可以轻松解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:29:53.887

有许多服务使用人工来解决验证码，每 1000 个正确解决的验证码成本约为 2 美元，所以如果垃圾邮件发送者认为他们的垃圾邮件对他们来说价值超过 0.002 美元，那么验证码就没有任何用处。

这些服务通过将图像传输给工作人员并返回响应来工作。因此，不涉及小图形谜题的检查会更有效。正如 Sammitch 所建议的，在上下文中没有意义的一小部分问题（例如，它是哪一年 = 不好，我们徽标中的字母“B”是什么颜色 = 好）是一个不错的选择。

# cocoa - 如何通知绑定到 NSArrayController 的 NSMutableArray 的更改？

> ID：13235524
> 
> 赞同：1
> 
> 时间：2012-11-05T15:47:04.820
> 
> 标签：cocoa, cocoa-bindings, key-value-coding

我有一个 NSArrayController，其内容数组绑定到文件所有者（我的窗口控制器），模型键路径设置为 chartData.events chartData 是 NSObject 的子类，事件是合成的 NSMutableArray 属性。

chartData 需要知道 NSArrayController 何时向 events 属性添加和删除事件对象。我认为我应该通过实现可变索引访问器来做到这一点。我把它放到了我的 chartData 类实现中：

```
- (void)insertObject:(TNLEvent *)event inEventsAtIndex:(NSUInteger)index {
    [self.events insertObject:event atIndex:index];
    return;
}

- (void)insertEvents:(NSArray *)eventArray atIndexes:(NSIndexSet *)indexes {
    [self.events insertObjects:eventArray atIndexes:indexes];
    return;
} 
```

但是当发送 NSArrayController 的 add: 消息时，这些方法都不会被调用。我假设 NSArrayController 使用的键路径没有映射到这些方法，否则它们不符合键值。我如何知道何时添加或删除对象`events`？

更新：我覆盖了综合访问器`setEvents`，发现数组控制器每次都使用此方法将一个对象添加到它控制的数组中。因此，甚至从未使用可变索引访问器。但这对我没有帮助，因为我仍然不知道添加了哪个对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T05:50:50.397

我的解决方案是正确的，但我没有实现*所有*必要的访问器。

这似乎是应该实现的最小访问器集。

```
- (void)insertObject:(id)object inEventsAtIndex:(NSUInteger)index;
- (id)objectInEventsAtIndex:(NSUInteger)index;
- (NSArray *)eventsAtIndexes:(NSIndexSet *)indexes;
- (void)removeObjectFromEventsAtIndex:(NSUInteger)index; 
```

如果这些就位，数组控制器将使用它们而不是数组属性的 setter getter。

# sitecore - Sitecore - ECM：如何重定向到 Sitecore 页面

> ID：13235525
> 
> 赞同：0
> 
> 时间：2012-11-05T15:47:05.013
> 
> 标签：sitecore, sitecore6, sitecore-ecm

我在通过 Sitecore 的 ECM 模块生成的时事通讯中的链接存在问题。

我有两个不同的链接，它们将组成我的时事通讯。一种是将用户重定向到时事通讯在线页面，另一种是将每篇文章阅读更多链接。

如何定义发送给用户的时事通讯的正确链接？在时事通讯中，有一个字段$fullname$，是否可以看到正确的值？

每篇文章都会有一个 Read More linl。如何将用户重定向到具有正确文本的页面文章？我需要发送哪些信息？我需要在模板中进行哪些配置？你有任何关于如何将用户重定向到网站页面的例子吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:57:30.807

我找到了解决方案。

首先：我忘记发布一些项目和网站。当我们不在 Sitecore 桌面时，要导航到解决方案，我们应该发布网站（并且不要忘记该项目 :)）

第二：语言 -> 我的时事通讯应该以用户语言显示。我不得不更改 web.config 中的一个参数：参数“LanguageEmbedding=asNeeded 应该由 Always 更改。

亲切的问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:37:36.427

我不确定我是否正确理解了您的问题，但如果您希望发送带有文章列表的电子邮件通讯并链接回它们，那么在您的用户控件中，您必须遍历文章集合和用户 sitecore API Sitecore。 Links.LinkManager.GetItemUrl() 在呈现的文档上绘制链接。

# c# - 如何使用 SQL Server CE 和 C# (Visual Studio 2010) 更新 dB 表中的单元格值

> ID：13235527
> 
> 赞同：0
> 
> 时间：2012-11-05T15:47:06.500
> 
> 标签：c#, database, sql-server-ce

我正在为大学写一个小型应用程序，一个视频租赁应用程序。我从数据库读取没有问题，但我无法更新表中的数据。

特别是，我希望在有人租借电影后更新显示库存电影数量的单元格。

到目前为止，我一直在尝试这个：

```
string updateDVDs = "UPDATE Products SET dvd_quantity = " + product.Quantity + " WHERE title = '"+ product.Name +"';";
cmdUpdateDVDs = new SqlCeCommand(updateDVDs, dBConnection);
dBConnection.Open();
cmdUpdateDVDs.ExecuteNonQuery();
dBConnection.Close(); 
```

我没有收到任何错误，但表格中的单元格没有更新。任何帮助将不胜感激，如果您需要更多信息，请告诉我。

**更新：** 好的，我有一些有趣的进展，我已将代码更新为：

```
string updateDVDs = "UPDATE Products SET dvd_quantity = " + product.Quantity + " WHERE title = '" + product.Name + "'";
dBConnection = new SqlCeConnection(connectionString);
cmdUpdateDVDs = new SqlCeCommand(updateDVDs, dBConnection);
cmdUpdateDVDs.Connection.Open();
int rows = cmdUpdateDVDs.ExecuteNonQuery();
dBConnection.Close(); 
```

从我在 MSDN 上可以看出，这两种方法都是有效的，但第二种方法似乎有效。现在奇怪的是，我租了电影《虎胆龙威》，一切都很顺利，我得到了这些结果：

![数据库已更新](../Images/39482cfc4fb6cab63e4e0a103d076207.png)

一切都好，从这一点上没有退路，所以我退出了应用程序并重新开始。我第二次去租《虎胆龙威》确认，成功！！DVD 数量上的新读数为 0，正如预期的那样： ![DVD数量更新成功！](../Images/84abb3cde9fb7a1d47af4f08bef0fdc0.png)

但是，当我在 Visual Studio 中打开 Product 表时，原始值仍然存在： ![在 Visual Studio 中，表尚未更新](../Images/a25e8453acb9b64aff8f1d1ad3d7d9dd.png)

不仅如此，当我在 Visual Studio 中打开表格后再次运行应用程序时，DVD 数量会重置为原始值，而更新的值会消失。

我在这里错过了一些简单的东西吗？我试过刷新表，它没有任何区别。只要我不在 Visual Studio 中打开表，应用程序就会按预期运行，无论我运行多少次，值都会按预期更新，直到我打开表本身。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:34:19.957

您必须确切地告诉我们您使用的是什么连接字符串，说“我更新了连接以指向 bin 文件夹中的数据库”之类的内容没有帮助。您是否使用类似的连接字符串`c:\Users\Me\Visual Studio 2010\Projects\MyProject\bin\debug\HKRMoviesDB.sdf`？这是不对的，这是硬编码到您机器上的 VS2010 调试测试文件夹中的，并且对其他人不起作用，仅当您从调试器运行时才起作用，并且在您部署应用程序时不起作用。

ADO.NET 在连接字符串中查找竖线并使用 AppDomain 属性扩展封闭的字符串。例如，如果您`Data Source=|DataDirectory|\HKRMoviesDB.sdf`从 VS 调试器中使用，则`DataDirectory`展开到项目的 bin 文件夹，VS 会在其中复制调试 DLL。如果您使用 MSI 安装程序部署应用程序，则会`DataDirectory`扩展到用户选择的应用程序安装文件夹。进一步的解释在[这个答案](https://stackoverflow.com/a/12268705/22437)。

请注意，它`DataDirectory`可能不是用户可写的目录；它是一个很好的只读数据目录，但如果您希望用户写入该文件，您应该将其复制到应用程序中`Environment.SpecialFolder.ApplicationData`或应用程序中的某个位置，如[本答案](https://stackoverflow.com/a/13296809/22437)中所述。

还有一件事要记住。在调试时，您通常希望将原始源数据复制到调试文件夹，对其进行测试，然后丢弃您的测试数据，因为您通常不希望您的测试数据包含在最终部署中。这就是项目中的“复制到输出目录”属性的作用。如果它设置为“如果更新则复制”，它可能应该是，那么您对测试数据所做的任何更改都是暂时的；下次您在项目中更新原始源数据时，您的测试数据将被丢弃。请记住，您的应用程序的部署目录通常不能由用户写入，因此您不应该以任何方式写入用户数据`DataDirectory`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:42:31.323

一位同学向我指出了这一点：

*“据我了解，除非您对数据库路径进行硬编码，否则您的代码更新的数据库是 /bin/debug/ 文件夹中的文件。您在 Visual Studio 中查看的文件是项目根目录中的文件。”*

我更新了连接以指向 bin 文件夹中的数据库。

# iphone - 如何消除 UIPasteboard 的值

> ID：13235528
> 
> 赞同：0
> 
> 时间：2012-11-05T15:47:07.827
> 
> 标签：iphone, ios, ios6

`UIPasteboard`1）我使用这种方法复制图像`[UIPasteboard generalPasteboard].image;`

2）创建图像后，我想清理`UIPasteboard`. 所以我写了这个方法`[UIPasteboard generalPasteboard].image = nil;`，但这在 ios 4 和 ios 5 上运行良好，但在 ios 6 上出现问题。

3）**在我的应用程序中，我想清除`UIPasteboard`或清除该`UIPasteboard`值。我怎么能在 ios 6 上做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-29T07:37:41.660

我很抱歉，但接受的答案只是误导/不正确。这不会清除粘贴板中的现有值。

第二个参数`setValue:forPasteboardType:`是项目的字符串标识符。正如文档所暗示的，它可能是 UTI（在 MobileCoreServices 中查看）或用户定义的字符串。

接受的答案中的方法调用使用`UIPasteboardNameGeneral`的是整个粘贴板本身的标识符（如果字典数组中的项目在 中，则不是一个键`[UIPasteboard items]`）。由于粘贴板不包含该键的项目，因此该调用将是无操作的。自己很容易验证这一点。`[[UIPasteboard generalPasteboard] name]`等于`UIPasteboardNameGeneral`。此外，`containsPasteboardTypes:`使用该键将返回`NO`.

现在来解决 iOS 6 中可能发生的情况。Apple 很可能使用 UTI（例如`kUTTypePNG`）作为存储在粘贴板中的图像数据的密钥。他们可能会确保为该键设置的值确实是 NSData（`nil`不是）。

为了解决您的难题，我可以提出以下建议之一：

*   如果您不想与其他应用程序共享您放入剪贴板的内容，您可以使用创建一个特定于应用程序的剪贴板`+ (UIPasteboard *)pasteboardWithName:(NSString *)pasteboardName create:(BOOL)create`
    *   此剪贴板的内容只能由您的应用程序访问，并且会在您的应用程序被删除时被删除。
    *   当应用程序退出时，剪贴板的内容将被清除，除非您将其`persistent`属性设置为 YES。
    *   您仍然可以通过访问通用剪贴板来访问其他应用程序放置在剪贴板上的项目。
*   如果您绝对必须清除内容（鉴于列出的限制），您可以尝试设置另一个有效图像。我对这种方法有疑问，因为给定的剪贴板项目可能有多个键。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:00:43.257

这是我目前使用的

```
UIPasteboard *pb = [UIPasteboard generalPasteboard];
[pb setValue:@"" forPasteboardType:UIPasteboardNameGeneral]; 
```

# servlets - 对单独的 servlet 请求使用单独的过滤器；防止过滤器被 servlet 上的转发调用

> ID：13235531
> 
> 赞同：2
> 
> 时间：2012-11-05T15:47:17.860
> 
> 标签：servlets, servlet-filters

我想为 2 个单独的 servlet 使用 2 个过滤器。第一个过滤器用于 1st servlet: `foodtypeServlet`，第二个过滤器用于 2nd servlet: `menuServlet`。在第二个过滤器中，当出现错误时，我想转发到`foodtypeServlet`. 但问题是，当我转发到 时`foodtypeServlet`，这个 servlet 的过滤器也会被执行。我不希望它被执行。我怎样才能实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T14:07:00.070

这**不是**默认行为，假设过滤器映射如下：

```
<filter-mapping>
    <filter-name>foodtypeFilter</filter-name>
    <servlet-name>foodtypeServlet</servlet-name>
</filter-mapping>
<filter-mapping>
    <filter-name>menuFilter</filter-name>
    <servlet-name>menuServlet</servlet-name>
</filter-mapping> 
```

默认情况下，过滤器仅在`REQUEST`调度程序上调用，而不是 on `FORWARD`，`INCLUDE`nor `ERROR`。为此，您必须明确指定`<dispatcher>`过滤器映射中的条目。

也许您正在使用 Servlet 2.3？在那个古老的版本中，默认情况下，任何过滤器都确实在转发时调用。您需要至少升级到 Servlet 2.4，或者让过滤器检查`javax.servlet.forward.request_uri`属性是否存在，如果是，则只需调用`chain.doFilter(request, response)`.

或者，也许您*实际上是*在重定向而不是转发？在这种情况下，您应该执行真正的[forward](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)而不是[redirect](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletResponse.html#sendRedirect%28java.lang.String%29)。

# iphone - 如何将委托设置为类方法

> ID：13235539
> 
> 赞同：1
> 
> 时间：2012-11-05T15:47:53.303
> 
> 标签：iphone, ios, avfoundation, avaudioplayer

可以将`AVAudioPlayer`委托设置为类成员`audioPlayerDidFinishPlaying`吗？

我想使用类方法播放声音文件，但不知道如何设置`setDelegate:`为`audioPlayerDidFinishPlaying`类方法。

我有一个名为“common”的小类，只有静态成员。

请参阅下面的“<<<<”标志...

```
@class common;

@interface common : NSObject  <AVAudioPlayerDelegate> {
}
    +(void) play_AV_sound_file: (NSString *) sound_file_m4a;
    +(void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) player successfully: (BOOL) flag 
@end 
```

@实现常见

AVAudioPlayer* 音频播放器；

```
// Starts playing sound_file_m4a in the background.
+(void) play_AV_sound_file: (NSString *) sound_file_m4a
{
    printf("\n play_AV_sound_file '%s' ", [sound_file_m4a UTF8String] );

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:sound_file_m4a ofType:@"m4a"]; 
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath: soundPath] error:&error ];

    [audioPlayer   setDelegate:audioPlayerDidFinishPlaying];       //<<<<<<<<<< causes error
                  >>>  what should setDelegate: be set to?  <<<

    [audioPlayer   prepareToPlay];
    [audioPlayer   play];
}

+(void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) player successfully: (BOOL) flag 
{
    printf("\n audioPlayerDidFinishPlaying");

    [audioPlayer release];
    audioPlayer=nil;
    [audioPlayer setDelegate:nil];    
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:52:01.570

这不是代表的工作方式。

您将一个类实例分配为另一个实例的委托。现在在您的情况下，这并不容易，因为类方法不是实例的一部分（它是静态的）。因此，您需要创建一个 Singleton，以便为您的类生成一个全局实例（这相当于提供类方法）。

为此，请`common`通过将其作为您唯一的类方法来创建一个单例：

```
static common* singleCommon = nil;
+(common*) sharedInstance {
   @synchronized( singleCommon ) {
       if( !singleCommon ) {
           singleCommon = [[common alloc] init];
       }
   }

   return singleCommon;
} 
```

从那时起，在您的示例中，您将使用。

```
[audioPlayer setDelegate:[common sharedInstance]]; 
```

在这样做时，您需要确保您的`common`类（理想情况下应该有一个大写字母`C`），有一个遵循`AVAudioPlayDelegate`协议的实例方法（从它的外观来看，它适用于类方法）。你需要改变

```
+(void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) player successfully: (BOOL) flag 
```

至

```
-(void) audioPlayerDidFinishPlaying: (AVAudioPlayer *) player successfully: (BOOL) flag 
```

在我看来，让单例作为某事的代表并不是很好的设计。但是，在回答您最初的问题时，不，您不能将类方法分配为单独的委托，您只能设置整个类的实例。我强烈建议您阅读委托的工作原理：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/ TP40002974-CH7-SW18](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:59:42.093

您最好的选择是使用实例方法并创建属于您的`common`类的实际对象，然后`self`用作委托。

（从技术上讲，您可能能够摆脱当前的代码并`[audioPlayer setDelegate:(id<AVAudioPlayerDelegate>)[self class]];`触发类方法，但即使它有效，这也不是一个好主意。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:02:27.150

正如 Philip Mills 所说，这不是代表的工作方式。

您可以通过更改类方法来执行快速修复（脏），如下所示：

```
+(void) play_AV_sound_file:(NSString *)sound_file_m4a withDelegate:(id<AVAudioPlayerDelegate>)delegate; 
```

并使用`delegate`您的类方法中的参数将其转发到您的`audioPlayer`实例

# parallel-processing - 缓存效应的超线性加速——不公平的比较？

> ID：13235543
> 
> 赞同：0
> 
> 时间：2012-11-05T15:48:15.277
> 
> 标签：parallel-processing

众所周知，当使用多个处理器时，由于缓存效应可能会发生超线性加速，因为问题的每个分区完全适合，通过顺序算法加速内存事务，该顺序算法将多次换入和换出。我看过几十个例子，背后的逻辑非常清楚，并行部分解释得很好。

但是，每次他们与顺序算法进行比较时，顺序算法都是一个非常幼稚的解决方案，具有从 0...N 的大循环。

是否考虑过顺序解决方案可以做与并行解决方案相同的技巧？（即对问题进行分区并按顺序解决每个分区，使其适合缓存）。换句话说，只需在一个线程中运行并行解决方案。通过这样做，人们可以期待线性加速，而不是最初想象的超线性。

我在这里缺少什么？对于一个已经出现几十年的概念来说，这种反逻辑似乎太简单了。

这个问题是在一位老师告诉我“超级线性加速是不可能的，你总是可以改进顺序的，以便再次有线性加速”之后提出的。我无法证明相反的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-23T14:31:46.133

超线性加速可能来自于不仅处理器数量增加，而且缓存数量增加的事实。顺序案例拆分数据的方法不会增加缓存。

# javascript - Javascript 验证重点

> ID：13235544
> 
> 赞同：0
> 
> 时间：2012-11-05T15:48:24.683
> 
> 标签：javascript, validation, focus

我正在为 HTML 表单编写验证脚本。该脚本在文档顶部显示错误列表，以便用户可以立即查看（并更正）所有错误。我希望在验证脚本运行后重新加载文档时将焦点移到该错误列表，但这不起作用，天堂帮助我，我不明白为什么。任何提示将不胜感激。谢谢！

这是JS

```
function validate(survey) {
    var error=document.createElement("text");
    error.innerHTML=" ";

    var x=document.survey.member_email.value;
    if (x==null || x=="")  {
        error.innerHTML+="<li>Please enter an email address</li>" 
        var vp=document.getElementById("validate_place");
        vp.appendChild(error);
        vp.focus( );      //  Here is the focus command   -->//
        return false;
        } 
    return true;
} 
```

以下是 HTML 中的验证行：

```
<form action="survey_processing.php" method="post"  onsubmit="return validate(this);"  name="survey" id="survey" >

<div id="validate_place" > </div>  <!--- empty div to insert validation correction info if needed --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:01:31.973

通过将`tabindex`div 的属性设置为 -1，您可以以编程方式将焦点传递给它。（向下滚动到[MDN 文章](https://developer.mozilla.org/en-US/docs/HTML/Global_attributes)中的 tabindex 以获取更多详细信息）

```
<div id="validate_place" tabindex="-1"> </div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:53:58.837

vp 是一个 div。没有可用的焦点。（实际上似乎有一个负的tabindex，谢谢西蒙）

您可以使用滚动到错误

```
vp.scrollIntoView(); 
```

您可以关注表单字段，因此如果您将字段分配给 x imstead ofnits 值，您可以使用`x.value`和`x.focus()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:03:45.690

“x”变量包含“member_email”字段的值。如果你想使用`x.focus();`，你应该添加：

```
var x = document.survey.member_email; 
```

然后使用：`x.value`检查'x'。

# java - 是否可以将 ArrayList 索引作为 listkey 存储到 Struts 2 选择框中？

> ID：13235545
> 
> 赞同：2
> 
> 时间：2012-11-05T15:48:25.900
> 
> 标签：java, jsp, struts2, arraylist

我有一个 Struts2 应用程序。在 jsp 页面上，我使用选择框从数据库中填充 ArrayList：

```
<s:select name="country" list="countryList" listKey="countryId" listValue="countryName" headerKey="0" headerValue="Country" label="Select country" /> 
```

但我需要在 listKey 中存储的不是*id*，而是 ArrayList 的索引。于是我读了这个索引，在 ArrayList 中找到合适的国家并检索它。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:57:04.663

尝试使用`countryList.indexOf(country)`如下：

```
<s:select name="country" list="countryList" listKey="countryList.indexOf(country)" 
                                           listValue="countryName" headerKey="0"  
                                   headerValue="Country" label="Select country"/> 
```

# javascript - 是否有从 Visual Basic 到 Javascript 的在线转换器？

> ID：13235552
> 
> 赞同：3
> 
> 时间：2012-11-05T15:48:44.537
> 
> 标签：javascript, vb.net, vba, vb6

我正在寻找一种将一些简单的视觉基本功能转换为 Javascript 的工具。我知道这通常是一项非常艰巨的任务，但我只需要转换一个简单的结构，例如

```
dim a
a=1
if a >2 then a=a+1 
```

到

```
var a;
a=1;
if(a>2)a=a+1 
```

我可以手动完成，但是类似于[将 C# 转换为 VB.NET](http://www.developerfusion.com/tools/convert/csharp-to-vb/)的工具会很有帮助，我正在寻找一些非常简单的东西，所以即使 vb vb.net 的差异也没有太大关系。我什至有一些我需要在 Javascript 中具有的 VB6 函数。我想避免无聊的编辑/搜索/替换任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T18:36:44.403

您可以尝试[http://slingfive.com/pages/code/scriptConverter/demo.html](http://slingfive.com/pages/code/scriptConverter/demo.html)。我通过他们的试用转换器（与 IE 兼容）运行了您的示例，它返回了

```
变量一个;
a=1;
如果(a >2){ a=a+1

// ================================================= ==============================
// 此代码由 ScriptConverter 工具从 VBScript 转换为 Javascript。
// 自由使用。未经许可请勿转载。
// 版权所有 2003 Rob Eberhardt - scriptConverter@slingfive.com。
// ================================================= ==============================

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:52:21.663

搜索“vb.net to javascript”会出现[JSIL-.NET to JavaScript compiler](http://jsil.org)。那是你要的吗？或者也许[http://jsc.sourceforge.net/](http://jsc.sourceforge.net/)？

# xml - 如何使用xpath连接多个节点

> ID：13235553
> 
> 赞同：2
> 
> 时间：2012-11-05T15:48:44.857
> 
> 标签：xml, xml-parsing, xpath-2.0

我正在寻找一种仅使用 Xpath 2.0 获取以下字符串的方法：

AAA-Site-1.test.com,BBB-Site-1.test.com

```
<SystemRoot SystemName='Xpath Test'>
     <SystemRoot SystemDomain='test.com' SystemName='AAA-Site-1'>
      <Product InstallDate='11/01/2012' ProductName='AAA'/>
    </SystemRoot>
    <SystemRoot SystemDomain='test.com' SystemName='BBB-Site-1'>
      <Product InstallDate='11/01/2012' ProductName='BBB'/>
    </SystemRoot>
</SystemRoot> 
```

我尝试了 concat 然后字符串连接，但我得到“太多值”......

```
concat(/SystemRoot/SystemRoot/@SystemDomain,'.',/SystemRoot/SystemRoot/@SystemName) 
```

是否可以仅通过使用 XPath 2.0 来实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T15:55:49.143

是的，这是可能的：

```
string-join(/SystemRoot/SystemRoot/concat(@SystemName, ".", @SystemDomain),
            ",") 
```

# php - Codeigniter 2.1 - 文件上传，字符替换

> ID：13235556
> 
> 赞同：0
> 
> 时间：2012-11-05T15:48:53.130
> 
> 标签：php, codeigniter, codeigniter-2

我有这个功能：

这个是用于图片上传的：

```
 function img_upload($folder) {
            $this->path = './public/img/' . $folder;
            $imgs = array();
            $count = 0;
            foreach ($_FILES as $key => $value) {
                $img_name = $this->char_replace($value['name'][$count], '_');
                $count++;
                $config = array(
                'allowed_types' => 'jpg|jpeg|png|gif',
                'upload_path' => $this->path,
                'file_name' => $img_name
            );
                $this->CI->load->library('upload', $config);
              if($key != 'logo') :
                  if (!$this->CI->upload->do_upload($key)) {
                } else {
                    $q = $this->CI->upload->data();
                    $config['image_library'] = 'gd2';
                    $config['source_image'] = $this->path . '/' . $q['file_name'];
                    $config['new_image'] = $this->path . '/thumbs';
                    $config['create_thumb'] = FALSE;
                    $config['maintain_ratio'] = TRUE;
                    $config['width'] = 128;
                    $config['height'] = 128;

                    $this->CI->load->library('image_lib');
                    $this->CI->image_lib->clear();
                    $this->CI->image_lib->initialize($config);
                    $this->CI->image_lib->resize();
                    array_push($imgs, $q['file_name']);
                }
              endif;
            } 
```

而这个是用来替换字符的：

```
function char_replace($text, $rep_simbol = " ")
    {
        $char = array('!', '&', '?', '/', '/\/', ':', ';', '#', '<', '>', '=', '^', '@', '~', '`', '[', ']', '{', '}');
        return $name = str_replace($char, $rep_simbol, $text);
    } 
```

上传效果很好，但字符替换不完全。它仅使用正在上传的文件名中的第一个字母，其余部分被切断了吗？这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:53:24.320

第二个参数也应该是数组：

```
function char_replace($text, $rep_simbol = " ")
    {
        $char = array('!', '&', '?', '/', '/\/', ':', ';', '#', '<', '>', '=', '^', '@', '~', '`', '[', ']', '{', '}');
        $symbols = array();
        foreach ($char as $val)
        $symbols[] = " ";//or empty string, whatever you want
        return $name = str_replace($char, $symbols, $text);
    } 
```

# java - 为什么Java编译器不理解这个变量总是被初始化？

> ID：13235559
> 
> 赞同：54
> 
> 时间：2012-11-05T15:49:05.330
> 
> 标签：java, initialization, conditional, final

```
class Foo{
    public static void main(String args[]){
        final int x=101;

        int y;
        if(x>100){
            y=-1;
        }
        System.out.println(y);
    }
} 
```

Java 编译器理解 if 语句的条件始终为真，因此 y 将始终被初始化。正如预期的那样，没有编译错误。

```
class Bar{
    public static void main(String args[]){
        final int x;
        x=101;

        int y;      
        if(x>100){
            y=-1;
        }
        System.out.println(y);
    }
} 
```

但是当我将 x 的声明和初始化分成两行时，编译器似乎没有得到条件始终为真并且 y 将始终被初始化。

```
final int x;
x=101;
byte b;
b=x;
System.out.println(b); 
```

同样的事情发生在这里，编译器给出了精度错误的损失。

```
final int x=101;
byte b;
b=x;
System.out.println(b); 
```

同样，编译器可以理解 x 在 b 的范围内。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-11-05T15:56:18.207

作为实现可移植性的一部分，对于编译器应该接受什么和应该拒绝什么有一套非常具体的规则。在确定变量在使用时是否明确分配时，这些规则既允许也只需要有限形式的流分析。

请参阅 Java 语言规范[第 16 章。定义赋值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)

关键规则是[16.2.7 中的规则。if 语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html#jls-16.2.7)，“if (e) S”的情况。明确分配的规则扩展为：

*V*在*if (e) S*之后赋值 当且仅当*V*被赋值在*S*之后并且*V*被赋值在*e*之后当 false 时。

y 是相关的*V*。它在 if 语句之前未分配。它确实是在*S* , y = {y=-1;} 之后分配的，但是当 x>100 为假时，没有任何东西可以分配。

因此 y 不是在 if 语句之后明确分配的。

更完整的流程分析将确定条件 x>100 始终为真，但 JLS 要求编译器根据这些特定规则拒绝程序。

最后的变量很好。规则实际上是：-

> “如果最终变量被分配给它，这是一个编译时错误，除非它在分配之前绝对未分配（第 16 节）。”

该声明使其绝对未分配，即使是有限流分析也可以确定 x 在分配时仍然绝对未分配。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-05T15:57:53.277

它与编译器如何确定是否执行语句有关。它在[JLS #16](http://docs.oracle.com/javase/specs/jls/se7/html/jls-16.html)中定义：

> 当发生对其值的任何访问时，每个局部变量和每个空白最终字段都必须具有明确分配的值。

在您的情况下，编译器无法确定`y`已明确分配并给您一个错误。这是因为它需要确定条件始终为真，并且只有当 中的条件`if`是*常量表达式*时才有可能。

[JLS #15.28](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.28)定义了*常量表达式*：

> 编译时常量表达式是表示原始类型值或字符串的表达式，它不会突然完成并且仅使用以下内容组成：
> 
> *   [...]
> *   引用常量变量（第 4.12.4 节）的简单名称（第 6.5.6.1 节）。

[JLS #4.12.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.4)将*常量变量*定义为：

> 原始类型或 String 类型的变量，它是 final 并使用编译时常量表达式进行初始化，称为常量变量。

在您的情况下，`final int x = 101;`是一个常量变量，但`final int x; x = 101;`不是。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-11-05T16:13:24.900

你`x`对第二个代码中的变量做了什么叫做**空白最终**变量。如果最终变量在声明时未初始化，则称为空白最终变量。

许多 Java 开发人员认为最终变量的值在编译时是已知的。这并非总是如此。据说在编译时不知道空白最终变量的值。因此，您的第二个代码会给您一个编译错误。编译器可以看到您已经初始化了最终变量`x`，但编译器不知道它的值。所以编译器无法解析 if 语句。因此它认为变量`y`没有被初始化。

[您可以在此处](http://en.wikipedia.org/wiki/Final_(Java)#Final_variables)阅读有关 Java 最终变量的更多信息。

# c - 数组处理的性能差异

> ID：13235572
> 
> 赞同：-4
> 
> 时间：2012-11-05T15:49:39.967
> 
> 标签：c, memory, struct, runtime

我有这个代码：

```
typedef struct
{
int a[4];
} ArrStruct;

void printSizeOfArray(ArrStruct arrStruct)
{
printf("%lu\n", sizeof(arrStruct.a));
++(arrStruct.a[2]);
}

int main()
{

int it;
ArrStruct arrStruct;
printSizeOfArray(arrStruct);

for (it = 0 ; it < sizeof(arrStruct.a)/sizeof(int); ++it)
{
printf("%d, ", arrStruct .a[it]);
}

return 0;
} 
```

有人告诉它，与下一个代码相比，它没有良好的运行时/内存性能。有什么区别？

```
void printSizeOfArray(int a[])

{
printf("%lu\n", sizeof(a));
++(a[2]);
}

int main()
{

int it;
int a[4] = {0};
printSizeOfArray(a);
for (it = 0 ; it < sizeof(a)/sizeof(int) ; ++it)
{
printf("%d, ", a[it]);
}
return 0;
} 
```

为什么第二个代码会有更好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:08:50.500

唯一合理的性能问题可能是`printSizeOfArray`按`ArrStruct`值传递。这意味着它将在调用函数时被复制，这是不必要的。如果你通过指针传递参数，这个问题就会消失：

```
vaid printSizeOfArray(ArrStruct *arrStruct)
{
   printf("%lu\n", sizeof(arrStruct->a));
   ++(arrStruct->a[2]);
} 
```

`printSizeOfArray`此外，采用数组的替代函数将无法正常工作。该参数最终被解释为 a `int*`，然后`sizeof`函数中的计算不会做预期的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:55:05.687

我怀疑打开优化后两者之间会有很大差异。但是你为什么要这样编码呢。你认为包含数组的结构比数组有什么优势？除非您想向结构添加更多内容，否则只需使用数组即可。

编辑：

...再想一想，您的代码是“打印数组的大小”？您的第二个代码不完整（粘贴错误？），但数组的大小在函数内部不会明显，而结构的大小及其数组会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:53:31.640

在第一个代码中，结构`ArrStruct`是按值使用的，因此，在函数中`printSizeOfArray`，结构的成员`a`不会被转换为指针。所以堆栈上会有`4 * sizeof(int) - sizeof(int *)`更多（加上潜在的填充字节）。检查生成的程序集，以了解第一个代码还是第二个代码更有效。

理论上，第二个代码会运行得更快，因为取消引用更少。但是，启用优化后，没有显着差异。

# windows - Windows - 我不使用 MongoDb，但它在 Windows 上使用 3gb

> ID：13235573
> 
> 赞同：1
> 
> 时间：2012-11-05T15:49:39.793
> 
> 标签：windows, mongodb, diskspace

我安装了 mongodb 来使用[Chocolatey](http://chocolatey.org)来玩弄它。我玩弄它，因为我创建了一个简单的数据库并从命令行存储了一些值，然后继续我的工作。六个月后，我正在查看它，它占用了 3 GB 的数据，而我根本没有直接使用它！

我唯一能想到的就是使用它是 ruby​​ 或 node，但这两个我都只用作实用程序和玩弄 - 我实际上并没有每天在它们中开发，我不运行站点出他们。

我`db.repairDatabase()` [从这里](https://stackoverflow.com/questions/6263729/mongodb-file-size-is-huge-and-growing)尝试过，但无济于事。如果有的话，它实际上增长了一点。

怎么回事！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-31T23:47:14.313

这归结为文件的预分配：[http](http://docs.mongodb.org/manual/faq/storage/#faq-disk-size) ://docs.mongodb.org/manual/faq/storage/#faq-disk-size它将实际分配一个日志（磁盘空间的 5 或 3GB，以先到者为准) 和其他标准文件。

不幸的是，MongoDB 目前无法在自己的运行时内打开和关闭它。最好的方法是修改服务处理程序以实际添加`--smallfiles`and`--nojournal`选项。

# asp.net-mvc - 在 asp.net 中使用 FFMPEG 将视频转换为 flv 不起作用？

> ID：13235576
> 
> 赞同：1
> 
> 时间：2012-11-05T15:49:41.673
> 
> 标签：asp.net-mvc

这是我在将视频上传到服务器时转换视频的代码

private bool ReturnVideo(string fileName) { string html = string.Empty; //如果文件已经存在则重命名

```
 int j = 0;
    string AppPath;
    string inputPath;
    string outputPath;
    string imgpath;
    AppPath = Request.PhysicalApplicationPath;
    //Get the application path 
    inputPath = AppPath + "OriginalVideo";
    //Path of the original file 
    outputPath = AppPath + "ConvertVideo";
    //Path of the converted file 
    imgpath = AppPath + "Thumbs";
    //Path of the preview file 
    string filepath = Server.MapPath("~/OriginalVideo/" + fileName);
    while (File.Exists(filepath))
    {
        j = j + 1;
        int dotPos = fileName.LastIndexOf(".");
        string namewithoutext = fileName.Substring(0, dotPos);
        string ext = fileName.Substring(dotPos + 1);
        fileName = namewithoutext + j + "." + ext;
        filepath = Server.MapPath("~/OriginalVideo/" + fileName);
    }
    try
    {
        this.fileuploadImageVideo.SaveAs(filepath);
    }
    catch
    {
        return false;
    }
    string outPutFile;
    outPutFile = "~/OriginalVideo/" + fileName;
    int i = this.fileuploadImageVideo.PostedFile.ContentLength;
    System.IO.FileInfo a = new System.IO.FileInfo(Server.MapPath(outPutFile));
    while (a.Exists == false)
    {

    }
    long b = a.Length;
    while (i != b)
    {

    }
    string convertString = string.Format(" -i {0} -ar 22050 -ab 128 -acodec mp3 -r 25 -f flv -b 800 -s 640x480 {1}", inputPath + "\\" + fileName, outputPath + "\\" + fileName.Remove(fileName.IndexOf("."))+ ".flv");
    ConvertNow(convertString);
    string imgargs = " -i \"" + outputPath + "\\" + fileName.Remove(fileName.IndexOf(".")) + ".flv" + "\" -f image2 -ss 1 -vframes 1 -s 280x200 -an \"" + imgpath + "\\" + fileName.Remove(fileName.IndexOf(".")) + ".jpg" + "\"";
    ConvertNow(imgargs);

    return true;
} 
```

我猜这是 convertString 错了，但我从 ffmpeg 文档中得到了这个字符串。任何人都可以帮助我吗？

# typo3 - 带有表的扩展 direct_mail 错误

> ID：13235577
> 
> 赞同：0
> 
> 时间：2012-11-05T15:49:55.073
> 
> 标签：typo3

我在 TYPO3 4.6.12 上全新安装了扩展 direct_mail，但是当我打开“开发者信息”选项卡时，我看到这条消息是红色的：

```
Table error!
One or more required fields/tables are probably missing in the database 
```

当我单击“调用邮件引擎”时，我猜测这与我得到的错误有关：

```
Uncaught TYPO3 Exception
Address in mailbox given [@localhost] does not comply with RFC 2822, 3.6.2\. 

... 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:56:34.227

使用`Install tool`> `Database Analyser`>`COMPARE`检查是否正确应用了扩展中的所有必需表和字段。

有时，扩展中存在一些拼写错误，即使您检查所有要创建的表、要更改的所有字段等，它们仍会出现在 COMPARE 列表中（刷新后）。在这种情况下，您需要在您最喜欢的 DB GUI 中应用每个 SQL 语句 - 很可能它会向您显示一条错误消息，说明为什么无法应用更改。解决它或联系扩展作者或至少将此错误添加到您的问题中。

编辑：

据我记得第二个（电子邮件）错误是由不正确的配置引起的`direct_mail`- 很可能你没有输入发件人的电子邮件，或者它是无效的。在 BE 中检查它：

`DIRECT MAIL`>>*选择 DM*文件夹`Configuration`>>*`SET DEFAULT VALUES FOR DIRECT MAILS HEADERS``Sender email`*

# javascript - Bootstrap单选按钮切换问题

> ID：13235578
> 
> 赞同：67
> 
> 时间：2012-11-05T15:50:01.610
> 
> 标签：javascript, jquery, twitter-bootstrap, radio-button

[我正在尝试以 twitter 引导方式 ( http://twitter.github.com/bootstrap/javascript.html#buttons](http://twitter.github.com/bootstrap/javascript.html#buttons) )将单选按钮中的一些常规按钮打开。

我按照说明进行操作，但是当我按下按钮时，控制台中出现以下错误：

**未捕获的错误：无法在初始化之前调用按钮上的方法；试图调用方法 'toggle'**。

你知道可能是什么原因造成的吗？这些按钮在页面中加载，并且仅在 AJAX 显示相应内容时才可见。

谢谢！

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-11-24T09:22:09.390

我有同样的问题，它让我发疯！！！！

直到我发现我在 jqueryui 之前加载了引导程序......

我切换了顺序并注意到如果我**在 bootstrap 之前加载 jqueryui**，我就没有这样的问题 :)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-05T10:53:36.950

这个问题是由于 jquery-ui 阻止了 Button 定义的初始化，因为像我这样的用户在转换 javascript 文件调用的顺序时遇到问题，例如**在 Yii 中使用 CJUiAutocomplete 小部件时**，**只需转换与按钮对应的 javascript。 js 从引导文件到主工作文件，它将顺利运行。**

**或者，获取相应的 js 并将其放在一个单独的文件中，该文件在您的 javascript 文件堆栈的底部调用。**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-03-18T22:53:43.173

交换 Bootstrap 和 jQueryUI 的加载顺序可以解决这个问题，但它会导致其他问题，如 jQueryUI 对话框上的 Close X 无法显示。还有其他方法可以解决这个问题吗？

# ios - 如何在 prepareForSegue 之前调用 didSelectRowAtIndexPath？

> ID：13235579
> 
> 赞同：9
> 
> 时间：2012-11-05T15:50:05.703
> 
> 标签：ios

我正在制作基于 tableview 的 iOS 应用程序。这就是我想做的。Tableview1 -> Tableview2 一旦我选择了一个tableCell，就会显示新的tableView2。我想在显示新的 tableView 之前突出显示单元格。尽管如此，由于加载了新的 tableView 数据，hilight 非常慢。我查了一下这个。`prepareForSegue`之前调用is 的原因`didSelectRowAtIndexPath`。

`didSelectRowAtIndexPath`那你能告诉我之前怎么打电话`prepareForSegue`吗？

或者告诉我选择单元格时如何设置表格单元格。

一切顺利。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T16:00:36.773

您正在使用两种不同的方式来实现它。

1 - 第一种选择 - 仅使用情节提要和 prepareForSegue：

将原型单元连接到情节提要中的第二个视图控制器（连接必须从单元开始并在第二个视图控制器上结束）。在这种情况下，您必须*只*使用prepareForSegue 方法而不是 didSelectRowAtIndexPath。在 prepareForSegue 之后自动推送第二个 VC。

2 - 第二种选择 - 使用 didSelectRowAtIndexPath：

仅当您将 segue*从第一个视图控制器*（而不是单元格）连接到第二个视图控制器时，您才使用 didSelectRowAtIndexPath。在 didSelectRowAtIndexPath 方法结束时，必须调用 performSegue。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-26T15:25:13.163

您需要的是以下功能。它将在preparedForSegue 之前调用。首先你需要在你的类中定义一个 var 然后在这个函数中设置它，如下所示：

```
var selectedIndexPath: NSIndexPath = NSIndexPath()

override func tableView(tableView: UITableView, willSelectRowAtIndexPath indexPath: NSIndexPath) -> NSIndexPath? {
        selectedIndexPath = indexPath
        return indexPath
    } 
```

然后最后你可以在preparedForSegue函数中使用这个值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:51:51.470

1.  为控制器->控制器制作segue
2.  在 didselectrowatindexpath 中运行数据加载
3.  完成后 -> 执行你的 segue

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:54:35.017

以下是您应该如何设置视图控制器：

1.  当包含 Table View 1 的视图控制器加载时，加载 Table View 1 的数据。
2.  In`tableView:didSelectRowAtIndexPath:`被调用，使用`performSegue:`.
3.  当包含 Table View 2 的视图控制器加载时，加载 Table View 2 的数据。

听起来您可能会过早地加载 Table View 2 的数据——这就是您看到滞后的原因。因为您在加载数据时占用了主线程，所以 UI 无法更新并向您显示蓝色突出显示。

如果您在该`viewDidLoad`方法中加载数据，您将避免在用户选择表格视图单元格时进行昂贵的加载。您应该只告诉您的视图控制器在`tableView:didSelectRowAtIndexPath:`方法中执行对详细视图控制器的 segue。

# iphone - UITableviewCell中不同颜色的边带

> ID：13235582
> 
> 赞同：0
> 
> 时间：2012-11-05T15:50:12.233
> 
> 标签：iphone, objective-c, uitableview, ios6

我刚刚将 backgroundColor 添加到我的单元格中，这发生了：

![在此处输入图像描述](../Images/7c92c9ef3ae85d275ddbf70f59482c9c.png)

我只是想知道那两个乐队是怎么出现在我的牢房里的。我用来添加背景的代码是这样的：

```
-(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath{
    if (indexPath.row % 2) {
        [cell setBackgroundColor: [UIColor colorWithRed:48/255.0 green:83/255.0 blue:129/255.0 alpha:0.1]];
    }
} 
```

# c# - CSharpProvider 运行时编译找不到 DLL

> ID：13235583
> 
> 赞同：2
> 
> 时间：2012-11-05T15:50:17.273
> 
> 标签：c#, entity-framework, exception-handling, assembly-references, csharpcodeprovider

我正在使用 CSharpCodeProvider 在运行时编译一个 DLL。我的代码在某些机器上运行良好，但在其他机器上失败并出现以下错误：

> 错误 CS0006：找不到元数据文件“EntityFramework.dll”

这是一个代码片段：

```
var csFile = ... // the file is in C:\Program Data\MyFolder\InnerFolder
using (var provider = new CSharpCodeProvider())
{
    var parameters = new CompilerParameters
    {
        GenerateInMemory = false, // we want the dll saved to disk
        GenerateExecutable = false,
        CompilerOptions = "/target:library",

        // the assembly is compiled to the same directory as the .cs file
        OutputAssembly = GetNewCacheAssemblyPath(),
    };

    parameters.ReferencedAssemblies.AddRange(new[]
        {
            "System.dll", 
            "System.Data.dll", 
            "System.Data.Entity.dll", 
            "EntityFramework.dll",
        });

    var compilerResult = provider.CompileAssemblyFromFile(parameters, csFile);
} 
```

关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:55:43.200

EntityFramework 不是 .NET 框架的一部分。所以一个简单的解释是这个失败的机器没有安装它。您应该自己部署它。当您使用 Nuget 包时，您将在 bin\Release 目录中拥有 DLL 的副本。不要忘记将它包含在您的运输二进制文件中。

下一个失败模式是您*确实*部署了它，但程序的工作目录不在您希望的位置。提供程序集的完整路径名以避免这种情况。例如，您可以使用 Assembly.GetEntryAssembly().Location 来查找 EXE 的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:57:07.333

您提到该代码适用于某些但不适用于其他代码，它清楚地`System`正确加载了所有标准文件，因为它们是在之前排序`EntityFramework.dll`的，并且很明显您的代码本身通常是可以的，因为这些标准库没有崩溃。

似乎相当清楚的是，它失败的机器没有安装实体框架——这是有道理的，因为它不是 .NET 本机框架的一部分。这是一个附加组件。

# linker - 如何使用 DMD 编译/链接静态库

> ID：13235592
> 
> 赞同：3
> 
> 时间：2012-11-05T15:51:14.263
> 
> 标签：linker, d, dmd

每当我使用 DMD 构建静态库时，我都可以将其链接到我的应用程序并且它编译得很好，但是在应用程序中调用该库的任何时候我都会得到：

```
Segmentation fault (core dumped) 
```

为了建立我做的图书馆

```
# $(FILE) for each file in "find source -name "*.d"
# $(OBJ) is $(FILE) with the extension ".o"
# $(IMP) is $(FILE) with the extension ".di"
dmd -O -d -m64 -L-ldl -m64 -Isource -c $(FILE) -ofbuild/$(OBJ)

ar rcs ./lib/libvibe.d-dmd.a build/*
ranlib ./lib/libvibe.d-dmd.a

dmd -O -d -m64 -L-ldl -m64 -Isource -c -o- $(FILE) -Hfimport/$(IMP) 
```

并用于构建应用程序

```
SRC = $(shell find src -name "*.d")
dmd -debug -odbuild -I../../vibe.d/source -L-L../../vibe.d/lib -L-lvibe.d-dmd $(SRC) -ofbin/test 
```

我究竟做错了什么？

* * *

更新

将 vibe.d 编译为 libvibe.d-dmd.a

```
dmd -g -lib -oflib/libvibe.d-dmd.a $(SOURCES) -L-levent_pthreads -L-levent -L-lssl -L-lcrypto 
```

示例代码：

```
import vibe.core.file;
void main()
{
  openFile("test.d", FileMode.Read);
} 
```

编译示例

```
dmd -g test.d vibe.d/lib/libvibe.d-dmd.a -Ivibe.d/source 
```

还有一些 gdb 输出：

```
Program received signal SIGSEGV, Segmentation fault.
0x00000000004554f5 in vibe.core.file.openFile() (mode=<incomplete type>, path=...) at source/vibe/core/file.d:29
29      return getEventDriver().openFile(path, mode);
(gdb) backtrace
#0  0x00000000004554f5 in vibe.core.file.openFile() (mode=<incomplete type>, path=...) at source/vibe/core/file.d:29
#1  0x000000000044f7d2 in vibe.core.file.openFile() (mode=<incomplete type>, path=...) at source/vibe/inet/path.d:24
#2  0x000000000044f539 in D main () at test.d:5
#3  0x000000000046b9e4 in rt.dmain2.main() ()
#4  0x000000000046b35e in rt.dmain2.main() ()
#5  0x000000000046ba2b in rt.dmain2.main() ()
#6  0x000000000046b35e in rt.dmain2.main() ()
#7  0x000000000046b2e9 in main ()
(gdb) fram 2
#2  0x000000000044f539 in D main () at test.d:5
5     openFile("test.d", FileMode.Read);
(gdb) frame 1
#1  0x000000000044f7d2 in vibe.core.file.openFile() (mode=<incomplete type>, path=...) at source/vibe/inet/path.d:24
24  struct Path {
(gdb) print mode
$1 = <incomplete type> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:25:20.490

你为什么不使用`dmd -lib -oflibmylib.a file1.d ...`?

你能做的最好的事情就是运行 GDB，看看为什么你的应用程序会出现段错误。如果您发现段错误的原因是从库中取消引用函数指针，那么很可能您是对的，并且链接出现了问题。

如果您不熟悉 GDB，这里有一篇简单的文章如何操作：[http](http://www.unknownroad.com/rtfm/gdbtut/gdbsegfault.html) ://www.unknownroad.com/rtfm/gdbtut/gdbsegfault.html 。

[在Wiki4D](http://www.prowiki.org/wiki4d/wiki.cgi?D__Tutorial/CompilingLinkingD)上也有一篇关于这个主题的好文章。

这是一个完整的会话，如何`libdstlib.a`从两个文件中编译一个库，`dstlib/foo.d`并且`dstdlib/bar.d`：

```
dejan@homeserver:~/work/dstlib> ls -R
.:
driver.d  dstlib

./dstlib:
bar.d  foo.d
dejan@homeserver:~/work/dstlib> dmd -lib -oflibdstlib.a dstlib/*.d
dejan@homeserver:~/work/dstlib> dmd driver.d libdstlib.a
dejan@homeserver:~/work/dstlib> ./driver
w: 80, h: 40
dejan@homeserver:~/work/dstlib> cat driver.d dstlib/foo.d dstlib/bar.d
module driver;
import std.stdio;
import dstlib.bar;

void main()
{
    auto rect = getRectangle();
    rect.display();
}    
module dstlib.foo;
import std.stdio : writefln;
struct Rectangle
{
    int width, height;
    void display()
    {
        writefln("w: %s, h: %s", width, height);
    }
}    
module dstlib.bar;
import dstlib.foo;

Rectangle getRectangle()
{
    return Rectangle(80, 40);
} 
```

# objective-c - 将 UIImageView 添加到 UIButton

> ID：13235600
> 
> 赞同：1
> 
> 时间：2012-11-05T15:51:29.553
> 
> 标签：objective-c, xcode, uiimageview, uibutton, sdwebimage

我创建了一个包含多个 UIImageView 实例的 UIScrollView。SDWebImage 框架用于缓存图像并将它们呈现在 UIImageView 实例中。现在我希望能够点击这些 UIImageView 实例。

以前我将 UIButtons 添加到 UIScrollView 并在此按钮中添加了图像。但知道我无法将 UIImageView 添加到按钮。我应该如何解决这个问题？是否可以在此视图上放置 UIButton？我该怎么做？

我以前用它来添加可点击的图像（我需要改变它，由于 SDWebImage 框架，所以我不能使用 UIImage imageNamed:forState

```
 CGFloat y = i * self.view.frame.size.height/6; 
        UIButton* aButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [aButton setTag:[[idsCol objectAtIndex: i] intValue]];
        aButton.frame = CGRectMake(0, y, self.view.frame.size.width/3, self.view.frame.size.height/6);

        aButton.imageView.contentMode = UIViewContentModeScaleAspectFit;

        [aButton setImage:[UIImage imageNamed:@"image.jpg" forState:UIControlStateNormal];

        [aButton addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
        aButton.adjustsImageWhenHighlighted = NO;
        [scrollView addSubview:aButton]; 
```

我目前需要使以下图像视图可点击：

```
[testImageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
               placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:08:57.430

我不熟悉`SDWebImage`，但如果这个框架允许你直接修改按钮 imageView 属性，你会更好：

```
[myButton.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"] placeholderImage:[UIImage imageNamed:@"placeholder.png"]]; 
```

或者，如果您想坚持使用图像视图，您可以通过向其添加简单的点击手势使其“可点击”：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myMethod:)];
[tap setNumberOfTapsRequired:1];
[tap setNumberOfTouchesRequired:1];
[testImageView setUserInteractionEnabled:YES];
[testImageView addGestureRecognizer:tap];

- (void)myMethod:(UIGestureRecognizer *)sender
{
    NSLog(@"%u",sender.view.tag);
} 
```

# objective-c - Xcode .c 文件将消息发送到 Objective-c (.m) 文件

> ID：13235603
> 
> 赞同：0
> 
> 时间：2012-11-05T15:51:43.250
> 
> 标签：objective-c, c

我的程序的很多函数都在 C 文件中，而 C 有一个头文件，因此 Objective-C 文件可以使用 C 中的函数，但有些函数用于从互联网上获取信息，例如，有人发送即时消息消息给用户，C文件中的一个函数可以获取信息，但是C文件中的这个函数如何将信息发送到Objective-C文件并将消息显示给用户。因此我的问题是：如何让 C 文件中的函数向 Objective-C 发送消息。干杯，请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:11:17.163

正如 H2CO3 建议的那样，最简单的解决方案是将文件重命名`.c`为`.m`files 并添加 Objective-C。

或者，让您的 Objective-C 接口公开一个只有 C 函数声明的头文件，其中所述函数的实现（在 .m 文件中）为您的 ObjC 代码提供粘合剂。（请注意，这正是 CoreFoundation 的实现量；C 函数只是在底层 ObjC 实现之上粘合）。

# java - java.lang.OutOfMemoryError 与 StringBuilder

> ID：13235604
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:51:47.040
> 
> 标签：java, memory-leaks, stringbuilder, heap-memory

我在 Java 中使用 StringBuilder 类通过以下方式在方法中生成大字符串值：

```
void parent() {

   int result = 0;

   while(true) {
     String s = "Some value";
     result = child(s);

     if(result == -1) {
        break;
     }
   }
}

int child(String s) {

   result = xDao.createNativeQuery(s).getResultList();

   if(result == null) {
       return -1;
   }

   StringBuilder builder = new StringBuilder()

   builder.append("INSERT INTO table_name VALUES(");

   for(int i = 0; i < result.length; i++) {
          builder.append(Message.Format("{0}, {0}..", result[i].val1, result[i].val2..); // This will create some big string.
   }

   // Do some operation with builder.
   dataDao.createNativeQuery(builder.toString()).executeUpdate();

   return 0;
} 
```

现在说，child() 运行了 100 多次，然后在第 70 次左右（或任何更高的次数）之后，我得到了 java.lang.OutOfMemoryError。

我已经阅读了这篇文章[http://mohammed-technical.blogspot.in/2010/09/javalangoutofmemoryerror-with.html](http://mohammed-technical.blogspot.in/2010/09/javalangoutofmemoryerror-with.html)

正如它解释了 StringBuilder 如何将其大小加倍。但在我的情况下，我总是在孩子内部创建一个新的 StringBuilder 实例，那么为什么它会因为 StringBuilder 而抛出 java.lang.OutOfMemoryError 呢？

请问有什么建议吗？

更新：

我实际上是使用 StringBuilder 创建 SQL 插入语句。所以会发生以下操作：

```
 builder.append("INSERT INTO table_name VALUES(");

 While(condition) {
          builder.append(Message.Format("{0}, {0}..", var1, var2..); // This will create some big string.
 } 
```

然后最后在 child() 本身中调用以下行：

```
dataDao.createNativeQuery(builder.toString()).executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:18:06.143

当您使用 JDBC 资源时，您需要通过 close() 来正确清理它们。如果不这样做，将导致内存泄漏。您第一次意识到此泄漏可能是当您尝试构建字符串并且没有足够的内存时。

> 没明白你的意思。您能解释一下您要指出的内容吗？

当您创建 PreparedStatement 或 ResultSet 时，您必须关闭（）它们，否则它们会继续使用内存，因为它们的 Connection 持有对它们的引用。

以下代码建议您创建一个 Statement，对其调用 executeUpdate() 然后丢弃它。不幸的是，这不适用于 JDBC。

```
dataDao.createNativeQuery(builder.toString()).executeUpdate(); 
```

[http://www.java-blog.com/correct-closing-jdbc-resources](http://www.java-blog.com/correct-closing-jdbc-resources)

[http://www.ibm.com/developerworks/websphere/library/bestpractices/closing_and_releasing_jdbc_resources.html](http://www.ibm.com/developerworks/websphere/library/bestpractices/closing_and_releasing_jdbc_resources.html)

[http://blog.shinetech.com/2007/08/04/how-to-close-jdbc-resources-properly-every-time/](http://blog.shinetech.com/2007/08/04/how-to-close-jdbc-resources-properly-every-time/)

# ruby - 什么是在 Ruby 的数组中插入缺失分钟的干净且惯用的方法？

> ID：13235605
> 
> 赞同：0
> 
> 时间：2012-11-05T15:51:49.370
> 
> 标签：ruby, date, datetime, iterator

考虑一组日期时间：

```
2010-07-17 16:09:00 -0700
2010-07-17 16:10:00 -0700
2010-07-17 16:12:00 -0700
2010-07-17 17:44:00 -0700
2010-07-18 02:12:00 -0700 
```

什么是迭代数组并插入缺失分钟的干净且惯用的方法，因此输出为：

```
2010-07-17 16:09:00 -0700
2010-07-17 16:10:00 -0700
2012-07-17 16:11:00 -0700
2010-07-17 16:12:00 -0700
2010-07-17 16:13:00 -0700
... 
```

红宝石 1.9.3

编辑：更多信息：

它实际上是一个哈希数组，以日期时间为键：

```
2010-07-17 16:09:00 -0700 => 5
2010-07-17 16:10:00 -0700 => 22
2010-07-17 16:12:00 -0700 => 3 
```

因此，每个缺失的分钟都应该具有前一分钟的值。

另外，不使用 Rails。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:08:39.973

```
require 'date'

# dummy dates
dates = "2010-07-17 16:09:00 -0700
2010-07-17 16:10:00 -0700
2010-07-17 16:12:00 -0700
2010-07-17 17:44:00 -0700
2010-07-18 02:12:00 -0700"

datetimes = dates.lines.map{|s| DateTime.parse(s) }

continuous_datetimes = [datetimes.min]

while continuous_datetimes.last < datetimes.max
  continuous_datetimes.push( continuous_datetimes.last + 1.0/24.0/60.0 )
end

continuous_datetimes.first(10).each{|d| puts d}
# 2010-07-17T16:09:00-07:00
# 2010-07-17T16:10:00-07:00
# 2010-07-17T16:11:00-07:00
# 2010-07-17T16:12:00-07:00
# 2010-07-17T16:13:00-07:00
# 2010-07-17T16:14:00-07:00
# 2010-07-17T16:15:00-07:00
# 2010-07-17T16:16:00-07:00
# 2010-07-17T16:17:00-07:00
# 2010-07-17T16:18:00-07:00 
```

* * *

## 编辑

以下代码反映了您的哈希结构。

设置：

```
require 'date'

# dummy dates
hash = {
  DateTime.parse("2010-07-17 16:09:00 -0700") => 5,
  DateTime.parse("2010-07-17 16:10:00 -0700") => 22,
  DateTime.parse("2010-07-17 16:12:00 -0700") => 3
} 
```

实际代码：

```
new_hash = hash.inject(Hash[ *hash.first ]) do |tmp,kv|
  while tmp.keys.last < kv.first
    tmp[ tmp.keys.last + 1.0/24.0/60.0 ] = kv.last
  end
  tmp
end 
```

输出：

```
new_hash.each {|k,v| puts "#{k} => #{v}" }
# 2010-07-17T16:09:00-07:00 => 5
# 2010-07-17T16:10:00-07:00 => 22
# 2010-07-17T16:11:00-07:00 => 3
# 2010-07-17T16:12:00-07:00 => 3 
```

# sql - SQL查询：将一张表从不同的服务器复制到另一张表

> ID：13235606
> 
> 赞同：1
> 
> 时间：2012-11-05T15:51:49.643
> 
> 标签：sql, database, sql-server-2008, insert

我的查询有什么问题，如果其中一列 (ID_DIRCT) 不为空，我想将三列复制到另一个服务器\表：

```
INSERT INTO  System\Syst3.Server1.dbo.TABLE_RESRC (NO_EMPLY,PR,NM_FAML,CO_DIRCT)
SELECT NO_EMPLY, PR_EMPLY, NM_EMPLY, ID_DIRCT 
FROM System\Syst3.Server2.dbo.RESRC
WHERE System\Syst3.Server2.dbo.RESRC.ID_DIRCT IS NOT NULL 
```

使用 SQL Server 2008 R2。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:57:24.883

您没有说明您是否遇到了错误、错误的结果或类似的情况，您甚至没有说明您使用的是什么 RDBMS。因此，对您的查询有什么问题的有根据的猜测是您没有使用引号来调用您的链接服务器（它需要它们，因为链接服务器名称中有一些特殊字符）：

```
INSERT INTO  [System\Syst3].Server1.dbo.TABLE_RESRC (NO_EMPLY,PR,NM_FAML,CO_DIRCT)
SELECT NO_EMPLY, PR_EMPLY, NM_EMPLY, ID_DIRCT 
FROM [System\Syst3].Server2.dbo.RESRC A
WHERE A.ID_DIRCT IS NOT NULL 
```

# javascript - 在 JavaScript 中将 JSON 字符串转换为数组

> ID：13235614
> 
> 赞同：2
> 
> 时间：2012-11-05T15:52:02.857
> 
> 标签：javascript, arrays, json, string, jqplot

我正在使用[jqPlot](http://www.jqplot.com/)创建图表。图表的数据点来自使用 GSON 构建的 JSON 对象。图表数据点以 JavaScript 数组格式构建，因此保存要发送到客户端的数据的 Java 对象存储数据如下：

```
String chartDataPoints = "[[1352128861000, 0.0], [1352128801000, 0.0], [1352128741000,   0.0], [1352128681000, 0.0], [1352128621000, 0.0],...More chart points in this format ,[[x0,y0], [x1,y2]...]]"; 
```

x 点是日期。

是否可以直接从 JSON 对象传递这些数据，就好像它是一个 JavaScript 数组一样？目前 MyJsonObject.chartDataPoints 被视为字符串，因此 jqPlot ($.jqplot ('chart1', MyJsonObject.chartDataPoints) 不会绘制任何内容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T15:57:26.567

一种选择是使用`eval`：

```
var arr = eval('(' + json_text + ')'); 
```

上面是最简单和最广泛支持的方法，但你应该只`eval`在你信任源代码的情况下使用它，因为它会执行任何 JavaScript 代码。

某些浏览器具有原生 JSON 解析器，在这种情况下，您可以执行以下操作：

```
var arr = JSON.parse(json_text); 
```

第三方库如[jQuery](http://www.jquery.com)也可以提供处理 JSON 的功能。在 jQuery 中，您可以执行以下操作：

```
var arr = jQuery.parseJSON(json_text); 
```

底部的两种方法（使用解析器）是首选，因为它们提供了一定程度的保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:58:10.087

如果去掉引号，那是一个有效的数组声明。然后您可以循环遍历将 x 点转换为日期的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:00:14.087

看看：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

有一种将字符串解析为对象的方法，这是一种“安全”的方法——你可以`eval(chartDataPoints)`在你的 javascript 中做一个，但是总是建议你通过 JSON 引擎来解析它，以防里面有一些不好的东西！

# sql - 将 INT 转换为时间

> ID：13235616
> 
> 赞同：0
> 
> 时间：2012-11-05T15:52:13.357
> 
> 标签：sql, sql-server

我在 sql 中有一个 INT 列，我必须将其转换为时间。

我试过了

```
 CONVERT (VARCHAR, columnA / 600000)
   + ':'
   + RIGHT ('00' + CONVERT (VARCHAR, c_columnA % 60), 2) 
```

但这不是结果。任何想法是如何投射数据的？

这里是数据样本：

```
INT |时间
4680001|13:00
4680001|13:00
4596001|12:45
3846001|10:41
4320001|12:00

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:32:29.387

它已经在评论中，但我会将其发布为答案：

如果忽略尾随的 1，则该值可能是自午夜以来的百分之一秒 -

例如`select dateadd(ms,384600 * 100,'19000101')`给`19000101 10:41`

或作为查询：

```
DECLARE @t TABLE
(i INT, t VARCHAR(5))
INSERT @t (i,t)
VALUES (4680001,'13:00'),
(4680001,'13:00'),
(4596001,'12:45'),
(3846001,'10:41'),
(4320001,'12:00')

SELECT DATEADD(s,i/100,'19000101'), t
FROM @t 
```

# c - 如何使用格式通过 *printf() 函数族从输出字符串中删除字符？

> ID：13235625
> 
> 赞同：0
> 
> 时间：2012-11-05T15:52:31.383
> 
> 标签：c, formatting, printf, replace

如何使用格式通过 *printf() 函数族从输出字符串中删除字符？这是可能的？

从宏这个宏：

```
 char *s =
    g_strdup_printf(
    "insert into foo(name,serie,"
#define X(a, b) #a ","
    LIST ") "
#undef X
#define X(a, b) "%d,"
    "values('%s'," LIST "%d" ")",
#undef X
#define X(a, b) bol->a,
    boletim->aname, serie, LIST
#undef X
            ); 
```

我得到这样的输出：

```
 char *s =
    g_strdup_printf(
    "insert into foo(name,serie,"

    "red" "," "blue" "," "yellow" "," "purple" "," ") "

    "values('%s'," "%d," "%d," "%d," "%d," "%d" ")",

    boletim->aname, serie, boletim->red, boletim->blue, boletim->yellow, boletim->purple,

      ); 
```

`puts(s)`调用会打印以下内容：

```
insert into foo(name,serie,red,blue,yellow,purple,) values('Ari tol',-1,-1,-1,-1,0) 
```

但是我有一个问题，`,`之前的第一个`)`导致 SQL 查询无效。我正在寻找某种方法将其从字符串中删除。也许通过某种可以在`printf()`函数族中使用的格式或重新定义宏。我不知道。这只是一个尝试，不要编写`)`在通过索引调用字符串替换函数之前和之后搜索索引的例程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:38:03.620

您不能在预处理器级别删除内容。但是，在这种情况下，您可以定义 X 以将逗号放在每个项目*之前*，并在“serie”和“'%s'”之后删除逗号。

# c# - C# DateTime 从字符串转换

> ID：13235626
> 
> 赞同：1
> 
> 时间：2012-11-05T15:52:40.883
> 
> 标签：c#

我正在我的 C# .net Web 应用程序中读取 excel 文件并将该值存储在数据库中。Excel 中的唯一字段是日期时间。我将它存储在字符串中

```
string tran_time = Convert.ToString(odr[5]); //tran_time is "03-11-2012 16:08:43" 
```

然后将其转换为 DateTime 并将其存储在数据库中（SQL Server 2008）

```
IFormatProvider culture = new CultureInfo("en-US", true);
DateTime dateVal = DateTime.ParseExact(tran_time, "dd-MM-yyyy HH:mm:ss", culture); 
```

但是存储在数据库中的值是格式

```
2012-05-11 13:40:23.000 (yyyy-mm-dd) 
```

Excel中的值为`05-11-2012 13:40:23 (dd-mm-yyyy)`

日期和月份被替换。

**我的问题是如何以格式（YYYY-MM-DD HH:MM:SS:FFF）将其存储在数据库中**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:54:12.107

> 但是存储在数据库中的值是格式

不，不是（假设您使用的是`DATETIME`列类型）。这正是 SQL 工具**向**您展示的内容。

`DateTime`数据库或 C#中的实例**没有关联的格式**。它仅在向用户**显示**时才被格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:54:56.047

使用`dd-mm-yyyy`而不是`dd-MM-yyyy`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:49:31.593

或者使用 yyyy-MM-dd 格式。奇迹般有效：

```
string myString = dateVal.ToString("yyyy-MM-dd"); 
```

# c# - 如何更改 MenuStrip 的外观

> ID：13235627
> 
> 赞同：5
> 
> 时间：2012-11-05T15:52:40.617
> 
> 标签：c#, border, items, appearance, menustrip

我`MenuStrip`在我的应用程序中添加了一个并添加`ManagerRenderMode`在`Render Mode`. 问题在于外观，看内脏。看看那两张照片，我想把子菜单的白色边框改成透明的，那个蓝色的长方形看起来像灰色的菜单和深灰色的子菜单（他的边框是深蓝色）和白色的边框选择时的菜单。我怎么能做到这一点？

`BackColor`是：`36; 36; 36`并且`ForeColor`是`LightGray`。

![在此处输入图像描述](../Images/cda85c4d0e8e6118a9694b88ac1b6fdd.png)

![在此处输入图像描述](../Images/38b61b4a93cede668342aadf11d7d1ac.png)

我设法更改了蓝色矩形，选择选项时的白色矩形，选择子菜单选项时的蓝色矩形，但我不知道如何更改`white border`，请帮助..

这是到目前为止的代码......

```
 Color culoare = Color.FromArgb(20, 20, 20);
        Color culoare1 = Color.FromArgb(36, 36, 36);

        public override Color MenuItemSelected
        {
            get { return culoare; }
        }

        public override Color MenuItemBorder
        {
            get { return culoare; }
        }

        public override Color MenuItemSelectedGradientBegin
        { 
            get { return culoare; } 
        }

        public override Color MenuItemSelectedGradientEnd
        { 
            get { return culoare; } 
        }

        public override Color MenuItemPressedGradientBegin
        { 
            get { return culoare; }
        }

        public override Color MenuItemPressedGradientEnd
        {
            get { return culoare; }
        }

        public override Color MenuBorder
        {
            get { return culoare; }
        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T16:17:13.257

您可以通过创建自己的 ColorTable 并覆盖您希望更改颜色的属性来做到这一点：

```
public  class TestColorTable : ProfessionalColorTable
{
    public override Color MenuItemSelected
    {
        get { return Color.Red; }
    }

    public override Color MenuBorder  //added for changing the menu border
    {
        get { return Color.Green; }
    }

} 
```

你会像这样使用它：

```
private void Form1_Load(object sender, EventArgs e)
{
    menuStrip1.Renderer = new ToolStripProfessionalRenderer(new TestColorTable());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T16:16:39.453

你的方法不正确。您不使用前景色/背景色设置菜单和工具条的样式。

看看[ToolStripProfessionalRenderer](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripprofessionalrenderer.aspx)

**关于如何使用它的示例**

```
public class MyToolStripRenderer : ToolStripProfessionalRenderer
{
    /* override styling/drawing here */
}

MenuStrip strip = new MenuStrip();

strip.Renderer = new MyToolStripRenderer();

//this will set RenderMode to "Custom" 
```

[考虑在 CodeProject 上](http://www.codeproject.com/Articles/70204/Custom-VisualStudio-2008-style-MenuStrip-and-ToolS)使用这个示例作为一些研究。

更好的是，VBForums 有很多，已经实现（在通常的 Luna、Office、Windows、Visual Studio 风格中！）

[http://www.vbforums.com/showthread.php?596563-100-Customizable-MenuStrip-ToolStrip-StatusStrip-including-common-presets](http://www.vbforums.com/showthread.php?596563-100-Customizable-MenuStrip-ToolStrip-StatusStrip-including-common-presets)

如果您只是想更改颜色...使用 Pondidum 的答案！它涉及的工作更少！

# jquery - 如何让 iframe 颜色框在装有 iOS 6 的 iPad 上滚动

> ID：13235628
> 
> 赞同：3
> 
> 时间：2012-11-05T15:52:41.953
> 
> 标签：jquery, ios, css

我在我开发的整个网站上都使用 iframe 颜色框。它们工作正常，但主要问题是它们不能在 iOS 6（或我能说的任何 iOS）中滚动。我在网上尝试了很多解决方案，但没有一个是 100% 有效的。我得到的最接近的是 setTimeout 一个，但那个有一个错误，一直把我射到顶峰。

有人对这个问题有好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:03:55.867

这是 iOS5 中的一个已知问题，但应该已在 iOS6 中解决。当然，我最近使用 colorbox 开发的网站不再有任何滚动问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:07:18.417

此时，我正在使用 iScroll4 for iPad/Pod/Phone 解决此问题，因为 iOS 不支持`position:fixed`.

编辑：
子页面（来自父级的 iFramed）

```
<html>
<body>
<div id="scroller-parent"><!-- position:absolute -->
    <div id="scroller"><!-- position:relative -->
    ... content of scrollable iFrame content ...
    </div>
</div>
</body>
</html> 
```

# servlets - 是否可以将所有从 servlet doGet() 调用的方法设为静态以避免同步？

> ID：13235633
> 
> 赞同：0
> 
> 时间：2012-11-05T15:53:00.970
> 
> 标签：servlets, concurrency, static, synchronized

我有一个执行各种业务逻辑的 servlet。我想避免这样的同步：

```
@Override
protected void doGet(final HttpServletRequest _req, final HttpServletResponse _resp) throws ServletException, IOException {
     synchronized (MyServlet.class) {
         various();
         calls();
         and_logic(_req, _resp);
     }
} 
```

通过将所有调用的方法设为静态并像这样强制执行它：

```
@Override
protected void doGet(final HttpServletRequest _req, final HttpServletResponse _resp) throws ServletException, IOException {
    _doGet(_req, _resp);
}

private static void _doGet(final HttpServletRequest _req, final HttpServletResponse _resp) throws ServletException, IOException {
     various();
     calls();
     and_logic(_req, _resp);
} 
```

我不会使用任何静态变量，并且我的所有方法调用都被假定为线程安全的。有什么不明显的缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:06:00.767

> 我不会使用任何静态变量，并且我的所有方法调用都被假定为线程安全的。

在这些条件下，您既不需要同步也不需要静态方法。只需使用 servlet 或其他服务类的实例方法。

# java - 在静态变量中存储状态

> ID：13235635
> 
> 赞同：0
> 
> 时间：2012-11-05T15:53:08.317
> 
> 标签：java, android, android-fragments, android-activity, android-lifecycle

存储状态和恢复状态是 Android 中的一个主要问题，简单的任务很复杂，因为它建议应该存储和恢复状态（使用`Intent`s、`Parcelable`s 等），并且由于线程问题（使用`AsyncTaskLoader`s、`LoaderManager`s、等等。）。

但是，据我了解，`static`变量会在整个过程中持续存在（这里与应用程序运行有关），并且通过这些`static`变量存储状态和汇集线程要容易得多。

当然，如果进程被杀死，状态会丢失，*但是在前台运行的应用程序实际上多久会发生这种情况？*

进一步维护状态很好，但对大多数应用程序来说并不重要，尤其是在很少丢失状态的情况下。

此外，如果状态*对*您至关重要，则可能不应该使用`Activity`生命周期提供的函数来存储和恢复该状态，因为不能保证在进程被终止时会调用它们，而是应该不断存储您在某个数据库中的状态。

我认为*推荐*的方法过于矫枉过正，并且不必要地使大多数应用程序的开发过于复杂，*其接受的原因是什么？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:16:01.577

> 当然，如果进程被杀死，状态会丢失，但是在前台运行的应用程序实际上多久会发生这种情况？

根据定义，绝不会出现电池耗尽、用户关闭设备等情况。

但是，您并不经常处于前台，并且可能不会在那里停留很长时间，具体取决于用户所做的事情。

> 进一步维护状态很好，但对大多数应用程序来说并不重要，尤其是在很少丢失状态的情况下。

丢失状态经常发生，因为应用程序不会经常或不一定长时间处于前台。

> 此外，如果状态对您至关重要，则可能不应该使用 Activity 生命周期提供的函数来存储和恢复该状态，因为不能保证在进程被终止时会调用它们，而是应该不断地将您的状态存储在某个数据库中。

生命周期方法不适用于那种状态。它们用于数据，这些数据应该尽可能地保留以简化用户导航（例如，处理方向更改），但不需要持久（应该放在持久存储中）。

打个比方，当您在此 StackOverflow 页面中输入问题时，您输入的内容不需要保存到 Web 服务器，直到您提交表单。但是，当您在浏览器选项卡之间切换或最小化（然后恢复）浏览器窗口时，您的 Web 浏览器当然应该保留这些数据。而且，您的 Web 浏览器甚至可能将这些数据保存在某个临时文件中，它们还保存打开的选项卡列表，因此如果您的浏览器崩溃，它们可以尽可能地恢复您的状态。“存储在 Web 服务器上的内容”、“存储在进程堆中的内容”和“存储在本地文件系统的临时位置上的内容”之间的区别决定了哪些类型的数据与这些策略相关联。

类似地，在 Android 中，“存储在静态数据成员中的内容”、“通过`Intent`extra 等传递的内容”和“存储在持久点（如数据库）中的内容”之间的区别决定了哪些类型的数据是与这些策略联系在一起。

> 它被接受的原因是什么？

因为您的方法往往会导致内存泄漏，除非非常小心地处理静态缓存。

而且，因为您的方法混淆了真正的全局数据和逻辑上属于某些离散操作的数据之间的区别，因此应该通过`Intent`额外或其他特定于操作的方式传递。

这些是静态数据成员在 Java 中被视为不良形式的所有其他经典原因的补充。

# jquery - 更新 Lemonstand 部分 onClosed FancyBox

> ID：13235643
> 
> 赞同：1
> 
> 时间：2012-11-05T15:53:26.523
> 
> 标签：jquery, ajax, fancybox

我在网上商店使用 Lemonstand，我想在关闭 FancyBox 时更新部分内容。要触发同一页面上的部分更新，即按钮，我这样做：

```
onClick="return $(this).getForm().sendRequest('foo', {update: {'foo_page': 'foo_partial'}})" 
```

但现在我想在关闭 FancyBox 时这样做。我知道如何使用 FancyBox 中的 onClosed 选项重新加载整个父页面。但我不想重新加载整个页面，只重新加载部分页面。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:24:51.553

原来我离得不远。解决方案是给父页面上的表单一个 ID，然后调用该 ID。

```
'onClosed'      : function() {
    return $('#form_id').getForm().sendRequest('foo', {update: {'foo_page': 'foo_partial'}})
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T17:33:43.757

尝试`onclick`在fancybox回调中移动函数

...fancybox v1.3.4

```
$(".fancybox").fancybox({
 "onClosed": function(){
   return $(this).getForm().sendRequest('foo', {update: {'foo_page': 'foo_partial'}});
 }
}); 
```

...对于 v2.x

```
$(".fancybox").fancybox({
 afterClose: function(){
   return $(this).getForm().sendRequest('foo', {update: {'foo_page': 'foo_partial'}});
 }
}); 
```

**注意**：在您的`onclick`内联声明中

```
onClick="return $(this) ....." 
```

...我不清楚`$(this)`引用的是什么...所以你可能需要在fancybox回调中定义这样的选择器。

# iis - 使用 IIS 应用程序池标识帐户为 SQL Server 2008 配置集成安全性

> ID：13235644
> 
> 赞同：5
> 
> 时间：2012-11-05T15:53:26.543
> 
> 标签：iis, sql-server-2008-r2, integrated-security

我有一个网站的以下配置：

*   两个 Web 前端（例如机器名称：WFE1 & WFE2） 1 SQ
*   一个 SQL Server 数据库集群（例如机器名称：DBCluster）

所有机器都在同一个域（例如 MyDomain）中运行 Windows 2008 R2 Enterprise 和 SQL Server 2008 R2。

我正在部署一个使用应用程序池标识的 Web 应用程序。我已将池命名为 MyWebApp，它转换为名称 [IIS APPPOOL\MyWebApp]。当我尝试将此用户添加到 SQL Server 时，出现错误：

未找到 Windows NT 用户或组 'IIS APPPOOL\MyWebApp'。再次检查名称。

我用来在 SQL Server 中创建帐户的脚本是：

使用 DEFAULT_DATABASE=[MyDatabase], DEFAULT_LANGUAGE=[us_english] 从 WINDOWS 创建登录 [IIS APPPOOL\MyWebApp] GO

我想问题正在发生，因为 IIS 帐户是 SQL Server 框不可见的本地帐户。

有人可以说明如何解决这个问题吗？使用域帐户是我唯一的选择，还是我仍然可以让应用程序池帐户工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T03:38:38.333

> 我想问题正在发生，因为 IIS 帐户是 SQL Server 框不可见的本地帐户。

这正是问题所在。IIS AppPool 帐户仅存在于 Web 服务器上。如果您*能够*将此帐户添加到 SQL Server，则您将授权与 SQL Server*在同一台计算机上*运行的 IIS AppPool 。（我怀疑它可能仍然会失败。）

最安全的解决方案可能是按照您的说法 - 在域上创建一个帐户，为该帐户授予对数据库的适当权限，然后使用该帐户的凭据运行 AppPool。

但是，如果您仍然想这样做，您需要授权运行 AppPool 的*计算机*- 即`DOMAINNAME\ComputerName$`（注意`$`最后的）。

查看[这篇文章](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)以获取更多信息（特别是标题为“*访问网络*”的部分）。

然而，我认为这是一个*坏主意*，因为它授权*作为 NetworkService 运行的任何程序*访问数据库——而不仅仅是您的 Web 应用程序。

# javascript - 如何对实现 IListDataAdapter 的 WinJS 自定义数据源进行排序和过滤？

> ID：13235652
> 
> 赞同：1
> 
> 时间：2012-11-05T15:53:43.987
> 
> 标签：javascript, windows-8, winjs

我为实现 IListDataAdapter 的 ListView 创建了一个自定义数据源。数据来自几个不同的 Web 服务，需要多次异步调用才能完全填充。数据正确填充，ListView 展示了很好的“无限滚动”功能，根据需要加载新的数据页面。

我现在正在尝试过滤几个不同属性的数据。我有一个复选框和一个下拉列表，它们都有正确触发的事件。这些事件应该调用 updateLayout 方法……但由于某种原因，该方法最终未定义。

```
 checkBoxClick: function (eventObject) {
        this.updateLayout(document, Windows.UI.ViewManagement.ApplicationView.value);
    },

    dropDownListValueChange: function (eventObject) {
        this.updateLayout(document, Windows.UI.ViewManagement.ApplicationView.value);
    }, 
```

我希望有人有一个使用自定义数据源并支持排序和过滤的项目，并且愿意与班级共享该代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:43:57.427

您可以使用以下 API：

[`WinJS.Binding.List.createSorted(sortingFunction)`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700743.aspx)和[`WinJS.Binding.List.createFiltered(filterFunction)`](http://msdn.microsoft.com/en-us/library/windows/apps/hh700741.aspx)

您应该`dataSource`首先使用 "sorted" 或 "filtered" 将您的视图绑定到视图`WinJS.Binding.List`。然后任何新增加的价值`dataSource`都会自行更新。

PS 我还注意到您正在使用`updateLayout`. 我不知道它是否与您的问题有关，但是自从 Windows 8 发布以来，它开始使用一个调用`initializeLayout`来更新视图的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T03:08:29.550

很可能该`this`变量在您的事件处理程序中的范围不正确。

# zend-framework - Zend_Gdata_YouTube 检测删除的视频

> ID：13235653
> 
> 赞同：1
> 
> 时间：2012-11-05T15:53:47.623
> 
> 标签：zend-framework, zend-gdata

我有以下代码，用于将 YouTube 中的视频信息加载到我的网站上：

```
try {
    $yt = new Zend_Gdata_YouTube();
    $videoEntry = $yt->getVideoEntry($video_path);
    $duration = $videoEntry->getVideoDuration();
} catch (Zend_Gdata_App_HttpException $e) {
    //do something with the error
} 
```

我遇到的问题是，到目前为止，我已经检测到 2 个将执行 catch 块的场景 - 如果视频已被删除，或者是否存在某种通信错误。

如果视频已被删除，我想将其从本地列表中删除。我怎么知道我遇到了哪个错误 - 我一直在寻找错误代码的描述，但找不到这个，尽管我确信其他人之前遇到过这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:08:47.927

如果您要查找的视频 ID 已删除或从未存在，则请求的 HTTP 状态代码将为 400，响应的正文为`Invalid id`. 您可以获取底层响应对象来确定请求是否无效，或者请求是否完全失败。

```
try {
    $yt         = new Zend_Gdata_YouTube();
    $videoEntry = $yt->getVideoEntry($video_path);
    $duration   = $videoEntry->getVideoDuration();
} catch (Zend_Gdata_App_HttpException $e) {
    $response = $e->getResponse();

    if ($response !== null) {
        if ($response->getStatus() == 400 && $response->getBody() == 'Invalid id') {
            // the video requested does not exist or was deleted
        } else {
            // some other error
        }
    }
} 
```

# c# - 在设计时修改资源，在 WPF 项目中使用代码

> ID：13235655
> 
> 赞同：1
> 
> 时间：2012-11-05T15:53:58.317
> 
> 标签：c#, .net, wpf, resources, expression-blend

**我现在正在尝试做的事情：**修改 Expression Blend UI / Visual Studio，在我的依赖属性之一上添加一个按钮，当我单击它时，它会创建一个新触发器。

**工作原理**：我创建了按钮，它出现在 UI 中，这很好。

**什么不起作用**：我无法修改资源以添加触发器（如果我介入，它可以工作，但不会在全局资源上修改，仅在我认为的实例上）。

我在 Visual Studio 中有我的主要项目，以及一个带有如下按钮的属性：

![视觉工作室用户界面](../Images/275de4c0bc41932c77ad8c2fe7119f4d.png)

按下按钮时会发生以下情况：

*   我得到了包含该依赖属性（好的）的控件。
*   我搜索了包含要修改的资源的资源文件（确定）。
*   我更新了资源，但它不会替换磁盘上的资源。

我认为是因为我只在内存上修改它，所以它在“空中”

我现在不知道该去哪里...我需要帮助

我修改资源的代码位于另一个 DLL 中，即 MyLibrary。**设计**.cs

我正在使用 Visual Studio 2010 / Blend 4 / .NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:17:32.173

这是我目前能想到的一种方法，但不幸的是我现在无法测试它。您仍然可以检查它是否适合您。

你可以有一个类，比如`ResourceContainer.cs`，并将你的控件作为公共静态值收集在其中，并让你的控件成为一个按钮：

```
 public static Button MyButton; 
```

然后你可以在你的代码隐藏中使用它：如果你的窗口是`MainWindow.xaml`，并且说你需要在一个网格中你的特定控件，那么你可能有类似的东西：

```
<Window x:Class=...
        ...(namespace stuff)...
        Title="MainWindow" ...(size stuff)...>

    <Grid x:Name="MyGrid">
    ...(your code here)...      
    </Grid>
    ...
</Window> 
```

然后`MainWindow.xaml.cs`你可以`ResourceContainer.cs`像这样使用：

```
...
ResourceContainer rc;

...

MyGrid.Resources.Add("MyKey", rc.MyButton);

...

(when you need it)
rc.MyButton.Triggers.Add(TriggerBase item);
... 
```

# ajax - 有没有办法结合服务器绑定和 Ajax 绑定来消除在剑道网格上的 Ajax 绑定中发出的额外请求？

> ID：13235657
> 
> 赞同：1
> 
> 时间：2012-11-05T15:54:00.633
> 
> 标签：ajax, data-binding, grid, telerik-mvc, kendo-ui

默认情况下，ASP.NET MVC 的 Kendo Grid 将执行服务器端请求并在单个请求上加载页面和网格。但是，当为 ajax 绑定配置时，ASP.NET MVC 的 Kendo Grid 将在页面加载后发出 ajax 请求，这需要一个额外的请求（一个用于页面，一个用于网格使用的数据）。有没有办法结合服务器绑定和 ajax 绑定来消除单独在 ajax 绑定中发出的额外请求？我正在寻找的只是第一次在同一请求（如服务器端绑定）中加载页面和网格的数据，并为后续请求使用 ajax 绑定。要禁用 ajax 绑定的初始加载，我们可以禁用网格的 AutoBind 配置选项 (autoBind:false)。现在，我需要一种在禁用自动绑定选项时在网格上显示数据的方法。任何的想法？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:09:18.367

要最初绑定 Grid，您应该将您的集合传递给 Grid 方法。

```
Html.Kendo().Grid<Customers>(theCollectionOfCustomersWhichWillBeUsedInitially)
//... 
```

或者您可以将它传递给**BindTo**方法（实际上是相同的；）

```
Html.Kendo().Grid<Customers>()
.Name("someName")
.BindTo(sameCollectionasAbove) 
```

# ajax - 使用 ajax 和 ColdFusion 转义字符

> ID：13235660
> 
> 赞同：1
> 
> 时间：2012-11-05T15:54:02.523
> 
> 标签：ajax, encoding, coldfusion

您好，我遇到了编码失败的问题。谁能发现我哪里出错了？

```
<form>
    <table cellspacing="0" cellpadding="0" border="0" style="background-color:#ededed;padding:50px;">
        <tr>
            <td align="left"><b>Screen? (eg. Index)</b></td>
        </tr>
        <tr>
            <td align="left"><input type="text" name="strFeedbackScreen" value="" style="width:300px;"></td>
        </tr>
        <tr>
            <td style="height:10px"></td>
        </tr>
        <tr>
            <td align="left"><b>Comments:</b></td>
        </tr>
        <tr>
            <td align="left"><textarea name="strFeedbackComments" style="width:400px;height:150px;"></textarea></td>
        </tr>
        <tr>
            <td style="height:10px"></td>
        </tr>

        <tr>
            <td align="left"><b>Thank you for your feedback.</b></td>
        </tr>
        <tr>
            <td style="height:10px"></td>
        </tr>

        <cfoutput>

            <tr>
                <td align="left"><input type="button" value="Send" class="button" 
                    onMouseover="this.className = 'buttonover';" 
                    onMousedown="this.className = 'buttonover';" 
                    onMouseOut="this.className = 'button';" 
                    onclick="sendfeedback('strFeedbackScreen='+escape(this.form.strFeedbackScreen.value)+',strFeedbackComments='+escape(this.form.strFeedbackComments.value),'send_feedback_action_ajax')">
                </td>
            </tr>

        </cfoutput>

    </table>
</form> 
```

是形式

```
<cfoutput>
    <cfmail to="feedback@example.com" from="feedback@example.com" subject="Feedback left" type="html">

        <table cellpadding="0" cellspacing="0" border="0">
            <tr>
                <td>**** This email has been sent to all concerned ****</td>
            </tr>
            <tr>
                <td style="height:10px;">&nbsp;</td>
            </tr>

            <cfif application.ds eq "App1">
                <tr>
                    <td>This feedback has been left on App 1.</td>
                </tr>
            <cfelseif application.ds eq "App2">
                <tr>
                    <td>This feedback has been left on App 2.</td>
                </tr>
            <cfelseif application.ds eq "App3">
                <tr>
                    <td>This feedback has been left on App 3.</td>
                </tr>
            </cfif>

            <tr>
                <td style="height:10px;">&nbsp;</td>
            </tr>
            <tr>
                <td><b>From:</b></td>
            </tr>
            <tr>
                <td>#session.stafffirstname# #session.staffsurname# - #session.staffemail#</td>
            </tr>
            <tr>
                <td style="height:10px;">&nbsp;</td>
            </tr>
            <tr>
                <td><b>Screen:</b></td>
            </tr>
            <tr>
                <td>#strFeedbackScreen#</td>
            </tr>
            <tr>
                <td style="height:10px;">&nbsp;</td>
            </tr>
            <tr>
                <td><b>Comments:</b></td>
            </tr>
            <tr>
                <td>#strFeedbackComments#</td>
            </tr>
        </table>

    </cfmail>
</cfoutput> 
```

是 action.cfm

和 javascript 是

```
function sendfeedback(fields,action) { 
    turnLayeron('ajaxloading');
    nocache = Math.random();
    http.open('get', '/ajax.cfm?action='+action+'&fields='+fields+'&nocache='+nocache);
    http.onreadystatechange = function() {
    if(http.readyState == 4){
        closepopout();  
            turnLayeroff('ajaxloading');
        }
    };
    http.send(null);
} 
```

我一直在尝试让 uriencode 工作，但它在通过电子邮件发送之前对我的字符串进行了编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T03:43:15.370

将您的 JavaScript 更改为以下内容：

```
function sendfeedback(fields,action) {
    http.open("POST", '/ajax.cfm?action='+action+'&nocache='+nocache, true);
    http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    http.onreadystatechange = function() {
        if(http.readyState == 4){
            closepopout();  
            turnLayeroff('ajaxloading');
        }
    };
    http.send(fields);
} 
```

还将您的函数调用更改为：

`onclick="sendfeedback('strFeedbackScreen='+escape(this.form.strFeedbackScreen.value)+'&strFeedbackComments='+escape(this.form.strFeedbackComments.value),'send_feedback_action_ajax')"`

# php - 这个 PostgreSQL 查询是否容易受到攻击？

> ID：13235664
> 
> 赞同：3
> 
> 时间：2012-11-05T15:54:08.623
> 
> 标签：php, security, postgresql

使用[pg_escape_literal](http://www.php.net/manual/en/function.pg-escape-literal.php) PHP 函数，我正在转义我的用户输入数据，如下所示：

```
 <?php
  $dbconn = pg_connect('dbname=foo');
  $escaped = pg_escape_literal($_GET['name']);
  pg_query("INSERT INTO participants (name) VALUES ({$escaped})");
  ?> 
```

作为 PostgreSQL 新手，我的问题是：

*   给定这段代码，有没有办法实现 SQL 注入？
*   此代码中是否还有其他未处理的漏洞？

使用 PHP 5.4 和 PostgreSQL 9.2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:59:03.807

由于您不信任任何用户输入并相应地对其进行转义，因此其中没有注入。此外，您可以使用[准备好的语句](http://stormbyte.blogspot.com.es/2012/06/programming-with-database-using.html)来确保不会忘记任何转义，并为句子采用正确的数据类型。

请记住，如果您只忘记了一次转义，那么您的整个系统就会受到损害，尽管它可能会被其他所有转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:58:01.747

这是转义查询和确保 sql 注入攻击不起作用的推荐方法。

如果您特别偏执，或者只是想安全起见，您还可以执行正则表达式来清除不需要的字符并在转义数据之前检查数据的长度。

# android - TextView - 获取可见文本，以及如何将字符串划分为页面？

> ID：13235665
> 
> 赞同：2
> 
> 时间：2012-11-05T15:54:09.470
> 
> 标签：android, textview

我想要做的是将长文本分成页面，这样当用户点击下一个/上一个按钮时，我可以在一个文本视图中一个一个地显示它们。我需要知道最后显示的字符索引，但这不是那么简单....

我试过这个：

```
int start = textView.getLayout().getLineStart(0);
int end = textView.getLayout().getLineEnd(textView.getLineCount() - 1);

String displayed = textView.getText().toString().substring(start, end); 
```

从[链接](https://stackoverflow.com/questions/8636946/get-current-visible-text-in-textview)

但是 getLayout 返回 null

同样使用 getWidth/getHeight 也没用，因为它们在“onCreate”函数中返回 0...

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:10:38.350

从另一个方向解决问题可能更有意义：您有很长`String`的文本。然后你决定你可以在一个页面上放多少，并将它分解`String`成一个由多个子字符串组成的数组，每个子字符串一个。然后您可以简单地将页面索引存储在某个地方，并将其用作数组的索引`String`然后，您可以简单地将页面索引存储在某个地方，并将其用作您在将整个文本分解为子字符串时创建

这假设有一种算法可以找到您可以在页面中容纳多少文本。看看[这个问题](https://stackoverflow.com/questions/4322339/how-to-get-height-of-text-with-fixed-width-and-get-text-length-which-fits-in-a-f)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-03T22:27:23.210

我想出了一种非常有效的方法来显示跨页数的长字符串。-我将长文本显示到文本视图中并禁用滚动-然后找出布局中的行和单个屏幕上的行，因此我知道长字符串将跨越多少个屏幕（页面）-然后每当用户单击按钮转到下一页或滑动屏幕转到下一页然后我使用 TexView.scrollTo() 函数向前移动到行数（屏幕上的行数）。所以它变得和移动到下一页一样好

# javascript - extjs ServerProxy 保存时出错

> ID：13235668
> 
> 赞同：4
> 
> 时间：2012-11-05T15:54:14.967
> 
> 标签：javascript, rest, extjs

我正在尝试从网格行图标*更新字段值。*但我得到这个错误：

**`Uncaught Ext.data.proxy.Server.buildUrl(): You are using a ServerProxy but have not supplied it with a url.`**

我正在使用**RestProxy**，这是商店定义：

```
Ext.define('SF.store.Contents', {

    requires: [
        'SF.Config',
        'SF.store.RestProxy'
    ],

    extend: 'Ext.data.Store',
    model: 'SF.model.Content',
    autoLoad: false,

    proxy: Ext.create('SF.store.RestProxy', {
        url: (new SF.Config()).getApiBaseUrl() + "admin/contents"
    }),

}); 
```

**GridPanel 定义上的**列代码****

 **```
....
 store: 'Contents',    
.....
{ xtype: 'actioncolumn', header: 'Action'
 , width: 40
 , items: [{ // Delete button
        icon: '......./cancel.png'
        , handler: function(grid, rowIndex, colindex) {
            var record = grid.getStore().getAt(rowIndex);
                record.set('status',6);

            record.save(); //THIS CALL THROWS THE ERROR

            grid.store.remove(record);
        } 
    },...... 
```

此外，代理对于 GET 请求工作正常。有谁知道我应该在代理上定义什么？我已经阅读了官方文档，但对我来说还不清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T19:21:43.427

您必须为您的模型提供代理。在按钮的处理程序中，您正在调用模型的保存方法（SF.model.Content），那么您的 SF.model.Content 模型必须提供代理。**

# sitecore - Sitecore 高级数据库爬虫字段排除

> ID：13235671
> 
> 赞同：2
> 
> 时间：2012-11-05T15:54:25.817
> 
> 标签：sitecore, lucene.net, web-crawler, adc

我需要创建一个特定的索引来从继承的模板中对特定字段执行搜索。创建索引和返回匹配结果的那部分是相当直接的。

我遇到的问题是，在进行与该字段不匹配的搜索时，我得到了错误的结果，因为 Lucene.NET 文档字段“_name”包含搜索条件并且正在考虑匹配。

我正在使用 Advanced Database Crawler，并且在调查中尽可能排除了几乎所有可能的字段，直到我使用 Luke 来发现问题。

如何将“_name”等文档字段排除在可搜索范围之外，以排除这种情况，以免返回不希望的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T06:18:31.970

Lucene 文档有一个 RemoveField 方法。在您的自定义 DatabaseCrawler 中，您通常可以从文档中删除字段：

```
public class MyCustomCrawler : Sitecore.Search.Crawlers.DatabaseCrawler
{
        protected override void AddAllFields(Lucene.Net.Documents.Document document, Sitecore.Data.Items.Item item, bool versionSpecific)
        {
            document.RemoveField("SomeFieldName");
            ...
        }
} 
```

在这种情况下，字段是在“AddAllFields”之后添加的。它发生在“AddSpecialFields”中，因此您可以执行以下操作：

```
protected override void AddSpecialFields(Document document, Sitecore.Data.Items.Item item)
{
    // Do nothing, don't call base.AddSpecialFields
} 
```

# android - Android应用程序不会第二次运行

> ID：13235672
> 
> 赞同：0
> 
> 时间：2012-11-05T15:54:27.187
> 
> 标签：android, animation, crash

我有一个显示逐帧动画活动的 Android 应用程序。在动画结束时，它启动后台服务并关闭活动。这是代码：

```
 cont = getApplicationContext();

    final ImageView img = (ImageView)findViewById(R.id.img);
    img.setBackgroundResource(R.drawable.intro);

    img.post(new Runnable() {           
        public void run() {
            animation = (AnimationDrawable)img.getBackground();
            animation.setOneShot(true);
            animation.start();
            timer = new Timer();
            timer.schedule(new timer_exp(), 3400);
        }
    });
}

class timer_exp extends TimerTask{
    @Override
    public void run() {
        //start service
        Intent serviceIntent = new Intent(cont, MainService.class);
        startService(serviceIntent);
        //kill activity
        finish();           
    }

} 
```

当我运行应用程序时，我可以看到动画，然后服务启动。当我再次按下应用程序的图标时，出现黑屏并且应用程序崩溃。

有什么想法可能是什么问题？

谢谢，铅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:01:22.767

经过一番调查，原来是服务出了问题。我`Thread.sleep()`在几个地方有一些导致 UI 线程崩溃。在为这些操作添加另一个线程后，问题解决了。

# magento - Magento 用税收和货币来回应运费总额

> ID：13235683
> 
> 赞同：1
> 
> 时间：2012-11-05T15:54:59.033
> 
> 标签：magento

我发现了这段旧代码，它似乎在 Magento 1.6.2 中完美运行。我的问题是，它没有显示 Tax 的值，而是将值显示为 ex。60.0000

是否有可能让它以税收和货币的形式出现？或者可能只是以某种方式（我已经尝试过这个没有运气，不管我如何组合 if 语句..）构建一个 if 语句，如果它是 60.000 那么它会回显 75$ ？

```
$totals = Mage::getModel('checkout/session')->getQuote()->getTotals();
if(isset($totals['shipping']))
print $totals['shipping']->getData('value'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:50:20.813

获取您的购物车总数（假设客户已登录或输入运输信息）

```
$cart = Mage::getModel('checkout/session')->getQuote();
echo Mage::helper('core')->currency($cart->getGrandTotal(),true,false); 
```

获取运费

```
$shippingMethod = $cart->getShippingAddress();

echo Mage::helper('core')->currency($shippingMethod['shipping_amount'],true,false); 
```

来源[http://www.magentocommerce.com/boards/viewthread/278544/](http://www.magentocommerce.com/boards/viewthread/278544/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:08:02.627

我做了这个粗略的解决方案，它很丑陋，但它正在工作，如果有任何建议可以尽量减少这种情况，请提出建议:)。

```
<?php $fragt = Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress()->getShippingAmount();
                                  if (($fragt >= 0) && ($fragt <= 60))
                                  echo $this->__('Fragt: 75 DKK  ');
                                  else
                                  if (($fragt >= 75) && ($fragt <= 78))
                                  echo $this->__('Fragt: 95 DKK  ');
                                  else
                                  if (($fragt >= 79) && ($fragt <= 99)) 
                                  echo $this->__('Fragt: 100 DKK  ');
                                  else 
                                  if (($fragt >= 100) && ($fragt <= 110)) 
                                  echo $this->__('Fragt: 120 DKK  ');
                                  else 
                                  if (($fragt >= 120) && ($fragt <= 151))
                                  echo $this->__('Fragt: 150 DKK  ');
                                  else
                                  if (($fragt >= 200) && ($fragt <= 301)) 
                                  echo $this->__('Fragt: 300 DKK  ');
                                  ?> 
                                  </span> 
```

# css - 罗盘省略号语法

> ID：13235685
> 
> 赞同：6
> 
> 时间：2012-11-05T15:55:04.343
> 
> 标签：css, twitter-bootstrap, compass-sass, sass

我觉得自己像个白痴，但我真的无法弄清楚这一点。

我正在使用常规 Twitter Bootstrap 项目的[John Long](https://github.com/jlong)的 Sass Twitter Bootstrap 转换。位于[GitHub 上](https://github.com/jlong/sass-twitter-bootstrap)

每当我编译它时，我都会收到以下错误：

```
 error sass/bootstrap.scss (Line 246 of sass/bootstrap/_mixins.scss: Invalid
CSS after "...-shadow($shadow": expected ")", was "...) { ")
Sass::SyntaxError on line ["246"] of C: Invalid CSS after "...-shadow($shadow":
expected ")", was "...) { " 
```

这是它抱怨的语法：

```
// Drop shadows
@mixin box-shadow($shadow...) { 
  -webkit-box-shadow: $shadow;
     -moz-box-shadow: $shadow;
          box-shadow: $shadow;
} 
```

我以前从未在 mixin 上使用省略号见过这种语法。

我的问题是如何解决这个错误。这显然是我遇到的问题。

我正在使用指南针 v0.12.2

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T17:23:22.940

这是变量参数的语法： http: [//sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variable_arguments](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#variable_arguments)

您将需要升级 Sass，因为它是 3.2x 的新功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T11:58:20.630

看起来你必须更新 sass gem ，试试这行（我假设你已经安装了 gem）

```
 gem update sass 
```

# iphone - 我可以在不注册开发人员计划的情况下实现推送通知吗？

> ID：13235691
> 
> 赞同：1
> 
> 时间：2012-11-05T15:55:17.147
> 
> 标签：iphone, ios, notifications, push, iphone-developer-program

我是 iphone 开发的新手，我曾经在我越狱的 iPhone 3Gs 上测试我的应用程序，而没有注册开发者计划。但是，我需要从我的服务器实现推送通知，但我发现的所有教程都是指登录配置门户以获取没有开发人员程序我无法访问的 App ID。

那么问题来了：我可以在不注册开发者计划的情况下实现推送通知吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:08.837

不，您的服务器所需的证书和配置文件需要由 Apple 生成，因此您无法伪造它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:57:35.743

不，当您的应用程序关闭时，您将无法进行这种通信。它仅在用户运行您的应用程序时才起作用，从而使其无用。

# c# - 如何有效地测试 SiteCore LinkField

> ID：13235692
> 
> 赞同：4
> 
> 时间：2012-11-05T15:55:23.003
> 
> 标签：c#, sitecore, sitecore6, moles

我一直在使用 moles 对代码中难以触及的部分编写单元测试——特别是在我使用 sitecore 类库中的类型（这些类型很难与模拟框架一起使用）的情况下。我遇到了一个令人惊讶的棘手问题，我正在尝试使用 LinkField 类型并测试以下类型的代码片段。

```
LinkField linkField = item.Fields["External Url"];

if (linkField.IsInternal && linkField.TargetItem != null)
{
// want to test this path 
```

item.Fields 是一个字段集合，其索引器返回 SiteCore.Data.Field 类型，但 LinkField 设置为使用隐式运算符隐藏转换，这意味着您可以在代码中使用 LinkField 的实例。

我的困难是我不能创建MLinkField 类型的mole，并将其分配给Item 中的FieldCollection，因为它是强类型的Field。此外，似乎虽然我能够创建一种 MField，但当隐式转换发生时，它将工作并返回一个对象，但没有一个字段被设置为具有任何值。这意味着，我无法测试上面依赖于以某种方式设置的 linkField 状态的代码路径。

我能想到的设置这些值的唯一方法是间接的——即通过分析隐式转换并在 MField 中设置这些值来找到需要设置的值。隐式运算符调用 LinkField 构造函数，如下所示：

```
public LinkField(Field innerField) : base(innerField, "link") 
```

这意味着我需要注意它如何实例化基类型 (XmlField)，以及该类的基类型 (CustomField)。然后，查看 TargetItem 正在寻找的基础值。最终结果是需要淘汰：

```
InnerField.Database.Items[internalPath]; 
```

或者

```
InnerField.Database.Items[targetID]; 
```

InnerField 实际上是我的 MField。

有没有人有更好的主意？这听起来非常令人费解，但我认为这是拥有这些组件的野兽的本性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-14T12:08:11.330

它可以完成，但您需要跳过几个圈才能使其发挥作用。

首先，有一点背景：

*   LinkField 不像其他一些字段类型那样从 Field 类继承。
*   LinkField 继承自 XmlField，而 XmlField 又继承自 CustomField。
*   CustomField（及其子类型）通过将字段实例传递给构造函数来实例化。
*   链接字段将其值存储在此字段实例中。
*   不能将链接字段添加到 FieldCollection，因为它们不是从 Field 继承的。
*   我们需要添加 LinkField 的 InnerField 属性，而不是添加 LinkField。
*   当从 FieldCollection 中提取 Field 并将其分配给 LinkField 时，将执行隐式转换操作。
*   隐式转换操作通过将所选字段传递给 LinkField 的构造函数来创建一个新的 LinkField。返回的是这个新的 LinkField。

现在一些代码：

```
const string externalUrl = "External Url";
const string targetItemName = "Target Item";                     
Field field = new ShimField { IDGet = () => ID.NewID, NameGet = () => externalUrl };
Item targetitem = new ShimItem { IDGet = () => ID.NewID, NameGet = () => targetItemName };
LinkField linkfield = new ShimLinkField(field) { IsInternalGet = () => true, TargetItemGet = () => targetitem };                         
ShimLinkField.ImplicitOpFieldLinkField = (f) => linkfield;
FieldCollection fields = new ShimFieldCollection { ItemGetString = (name) => linkfield.InnerField };
Item item = new ShimItem { NameGet = () => "Test Item", FieldsGet = () => fields }; 
```

现在来解释一下：

使上述代码工作的关键是这一行：

```
ShimLinkField.ImplicitOpFieldLinkField = (f) => linkfield; 
```

通过 Shimming 隐式转换运算符，我们可以确保在调用以下行时：

```
LinkField linkField = item.Fields["External Url"]; 
```

返回一个链接字段，并且它的属性根据您的需要填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-18T13:01:22.683

由于`LinkField`无法以正确的方式模拟它，因此必须“按原样”在单元测试中使用它，这意味着您必须同时测试代码和链接字段的实现。

好消息是 Link 字段是使用`XmlField`存储在内部字段值中的 xml 数据进行操作的。为了配置链接字段行为，您只需要在值中设置正确的 xml。

使用[Sitecore.FakeDb](https://github.com/sergeyshushlyapin/Sitecore.FakeDb)，您可以轻松地在内存中创建内容并配置您需要的项目和字段。以下代码创建项目*home*和*target*。*主页*项具有指向*目标*项的*Url*链接字段：`TargetId`

 *```
 ID targetId = ID.NewID;

  using (var db = new Db
    {
      new DbItem("home")
        {
          // Field 'Url' is an internal link which targets the 'target' item
          { "Url", "<link linktype=\"internal\" id=\"{0}\" />".FormatWith(targetId) }
        },
      new DbItem("target", targetId)
    })
  {
    Item item = db.GetItem("/sitecore/content/home");
    LinkField linkField = item.Fields["Url"];

    linkField.IsInternal.Should().BeTrue();
    linkField.TargetItem.Should().NotBeNull();
    linkField.TargetItem.Paths.FullPath.Should().Be("/sitecore/content/target");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T20:12:07.107

就个人而言，我确实尝试将 Sitecore 从不需要直接与其交互的业务逻辑中抽象出来；但是我注意到有些事情需要直接处理，我尽量不要走得太远。如果您花费太多时间将 Sitecore 从您的逻辑中抽象出来，那么在我看来，您最终可能会使利用一些使 Sitecore 有用的功能变得更加困难。

虽然单元测试纯粹主义者可能不同意我的方法，但我将进行使用 Sitecore API 正确实例化项目的单元测试。这样做相当简单，我不久前写[了一篇关于它的博客文章。](http://www.matthewkenny.com/2013/07/unit-testing-sitecore/)那么您唯一的问题是处理测试数据，但是使用测试设置创建它并通过测试拆卸将其删除是相当容易的。*

# php - AWS Elastic Beanstalk - PHP 脚本在部署新版本后无法执行

> ID：13235694
> 
> 赞同：2
> 
> 时间：2012-11-05T15:55:37.090
> 
> 标签：php, amazon-web-services, amazon-elastic-beanstalk

我正在使用 AWS Elastic Beanstalk for PHP，它使用 Apache Web 服务器管理 1 个 EC2 linux 服务器。

通过管理控制台部署不同版本（包含我所有 php 脚本的 zip 文件）时，我有时会遇到奇怪的情况。

在某些情况下，即使我正在部署一个与以前完全相同的脚本的版本，其中一些突然无法正常工作。当再次部署另一个版本时（仍然是相同的脚本，相同的内容），突然一切都正常工作了。

有问题的服务示例：

```
<?php
// dynamically loads needed classes
    function __autoload($class_name) {
        include $class_name . '.php';
    }
    $response = new Response();

    $response->data = array('platform_version' => Configuration::PLATFORM_VERSION);
    die(json_encode($response));
?> 
```

通常，此脚本返回一个 json 对象。在没有更改任何内容并部署版本之后，此脚本不会返回任何内容。有没有办法找出是否发生了错误？

顺便说一句，我可以在 Apache 的 application_access_log 中看到对该服务的调用，返回状态为 200。

**编辑：** 更改网络服务器上的错误级别后，我开始在 application_error_log 中看到有趣的信息：

*[2012 年 11 月 5 日星期一 17:19:44] [错误] [客户端 10.210.159.209] **PHP 致命错误：require_once() [function.require-once]：无法在 /var/www/html/InstallerLog 中重新声明类响应。第 12 行的 php** [2012 年 11 月 5 日星期一 17:19:44] [错误] [客户端 10.210.159.209] PHP 堆栈跟踪：[2012 年 11 月 5 日星期一 17:19:44] [错误] [客户端 10.210.159.209] PHP 1 . {main}() /var/www/html/InstallerLog.php:0*

为什么我会收到此错误？我在用 ：

```
require_once 'Response.php'; 
```

在我的脚本中，据我所知，这种错误不应该发生......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T07:44:18.407

好的。所以最终它是非常基本的。

发生错误是因为我使用的类名“响应”已经在其他地方使用（不在我的代码中，可能在 SDK 或类似的东西中）。将名称更改为不太通用的名称后，该错误不再发生。为了安全起见，我还添加了：

```
if(!class_exists('MyNewResponse')) 
```

在创建类之前。

# c - typedef - 不命名类型

> ID：13235700
> 
> 赞同：2
> 
> 时间：2012-11-05T15:55:50.187
> 
> 标签：c, typedef

我有两个标题

在标题“BinTree.h”中：

```
typedef struct node {
    ElemType data;
    struct node *lchild;
    struct node *rchild;
}BTNode; 
```

在标题“Queue.h”（包括 BinTree.h）中：

```
typedef BTNode* Dataype; 
```

在编译编译器时说：错误：'BTNode'没有命名类型

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:58:50.723

你`BinTree.h`在`Queue.h`声明之前加入了吗？

或者让你`.cpp`（或道德上的等价物）事先包含它

**为 CDT 编辑**

前向声明就是答案。

由于您没有发布代码，因此很难说。

但我会在这里猜测

```
typedef struct node BTNode; 
```

谁会撞到票`Queue.h`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:23:26.513

如果你有相互包含，你需要你的节点类型的前向声明。在之前添加`typedef`：`typedef struct node BTnode;`

# mysql - mySQL CONCAT_WS 一个数据库到另一个

> ID：13235701
> 
> 赞同：1
> 
> 时间：2012-11-05T15:55:50.663
> 
> 标签：mysql

我正在尝试将一些数据库信息从旧数据库附加到新数据库。以下是我正在使用的代码，但是我收到以下错误并且不知道为什么。

```
UPDATE specs s, cross_ref c 
SET s.cross_ref = CONCAT_WS(',', 's.cross_ref', 'c.comp_num) 
WHERE s.part_num = c.part_num 
```

错误：

```
"You have an error in your SQL syntax; check the manual that corresponds to 
your MySQL server version for the right syntax to use near ''c.comp_num) 
WHERE s.part_num = c.part_num' at line 1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:00:28.983

您的单引号在错误的位置 - 您不需要包装列名。

```
UPDATE specs s, cross_ref c 
SET s.cross_ref = CONCAT_WS(',', s.cross_ref, c.comp_num) 
WHERE s.part_num = c.part_num 
```

# iphone - 在真实设备与模拟器上测试 iOS 测试

> ID：13235702
> 
> 赞同：2
> 
> 时间：2012-11-05T15:55:51.827
> 
> 标签：iphone, ipad, ios-simulator

我是 iPhone/iPad 开发的新手，我即将完成我的第一个应用程序，我正在寻找一些一般性的建议。

我知道在实际设备上进行测试很重要，而不仅仅是模拟器。人们在他们在模拟器中看不到的交易设备上进行测试时通常会遇到哪些类型的事情？

该应用程序本身主要是一种跟踪在线交易和此类事物的方式。在使用相机或 GPS 之类的东西方面，它不需要任何特别的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T16:15:55.960

这只是一般的使用测试。该设备在与您的计算机完全不同的环境中运行，这是确保将应用程序推送到设备时不会发生任何意外的最佳方式。例如，电话/平板电脑的数据覆盖范围可能有限、内存不足、来电等。这些情况在设备上更为常见，然后当人们通过模拟器模拟它时。

从硬件的角度来看，该设备使用的处理器架构与您的 Mac 不同，这也需要考虑（不像其他情况那么多，但您需要覆盖您的基础）。Mac 也无法可靠地模拟 RAM、磁盘空间、处理器速度等......因此在设备上进行测试在这里也很有用。

显然，有些功能只能在设备上进行测试，例如相机、GPS（而不是那么明显的 iPod 库使用），如果您的应用程序使用它们，不在设备上进行测试就太粗心了。

**总的来说**，如果您打算将应用程序发布到 App Store，或者至少发布到设备上，那么值得在设备本身上进行测试。只有这样，您才能确定它会在您打算定位的平台上按预期运行和执行。*模拟器毕竟只是模拟器，不是实物！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:27:45.500

首先：用户体验非常不同。

基于鼠标的交互与触摸交互非常不同。专注于显示器与看着手掌上的设备感觉非常不同。

此外，在模拟器和真实设备上运行的动画体验可能会有很大不同。

并且模拟器中的使用不会告诉您有关在真实设备上目睹的电池消耗的任何信息。

我的意见：每个将被运送到 App Store 或客户进行测试的应用程序都应该在几个不同的真实设备上进行测试。没有理由。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T17:56:36.660

*   在应用程序购买中，如果您已包含它们
*   方向（并不是说它们在模拟器上不可用，但在那里很容易忘记它！）
*   应用程序生命周期测试 - 将您的应用程序置于前台和后台。
*   网络访问 - 当您通过无线或蜂窝网络与 Mac 上的 LAN/wifi 从设备访问网络时，这可能很重要。如果您的应用程序使用网络上的任何资源，则需要在称为可达性的保护伞下进行大量测试。根据应用商店的要求，如果在使用任何此类资源之前无法访问网络，您必须提供警报。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:03:42.273

*   模拟器运行速度比真实设备慢很多。
*   当模拟器没有时，真实设备可能会耗尽内存，反之亦然。

# algorithm - 遗传算法中的最佳发现

> ID：13235703
> 
> 赞同：4
> 
> 时间：2012-11-05T15:55:52.823
> 
> 标签：algorithm, genetic-algorithm

我正在实施我的硕士论文，在我的论文的理论方面，我遇到了一个大问题。

假设我们想使用遗传算法。

我们有两种功能：

a) 一些具有如下关系的函数：||x1 - x2||>>||f(x1) - f(x2)|| 例如：y=(1/10)x^2

b) 一些具有如下关系的函数：||x1 - x2||<<||f(x1) - f(x2)|| 例如：y=x^2

我的问题是，当我们想使用遗传算法找到最优值时（更不用说 MINIMUM 或 MAXIMUM ），上述哪种函数比其他函数更困难。

非常感谢，阿明

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T11:57:24.490

我不相信你可以在不施加额外限制的情况下回答这个问题。

这将取决于您正在处理的特定类型的遗传算法。如果您使用适应度比例（轮盘赌）选择，那么改变适应度值的范围可能很重要。对于锦标赛选择或排名偏向选择，只要个体之间的排序关系成立，就不会产生影响。

即使您可以说它确实很重要，但仍然很难说哪个版本对 GA 来说更难。主要影响将是选择压力，这会导致算法或多或少地快速收敛。是好还是坏？这取决于。对于像 f(x)=x^2 这样的函数，尽可能快地收敛可能很好，因为只有一个最优值，所以尽快找到它。对于更复杂的函数，可能需要较慢的收敛速度才能找到好的解。因此，对于任何给定的函数，缩放和/或转换适应度值可能会或可能不会产生影响，如果有影响，那么差异可能会或可能不会有帮助。

可能还有一个没有免费午餐的论点，即在所有问题和优化算法中不存在单一的最佳选择。

我很乐意得到纠正，但我不相信你可以在不更准确地指定你所关注的算法和问题的类别的情况下以一种或另一种方式说。

# javascript - 如何更改 d3js 图表的布局？

> ID：13235704
> 
> 赞同：3
> 
> 时间：2012-11-05T15:56:01.363
> 
> 标签：javascript, json, layout, d3.js

我最近开始使用 d3js，目前正在尝试弄清楚如何使用转换。

我得到了使用我自己的 json 文件的[TreeMap 示例。](http://mbostock.github.com/d3/ex/treemap.html)

我的问题是：如何通过从 a`treemap`到 a的过渡来更改布局`tree`？

我的 json 数据如下所示：

```
{"name": "OS",
 "children": [
   {"name": "Linux x64",
    "children": [
      {"name": "Linux (amd64)", "size": 58154},
      {"name": "Linux (ia64)", "size": 3}
    ]
   },
   {"name": "Linux x86",
    "children": [
      {"name": "Linux (i386)", "size": 12269}
    ]
   },
   {"name": "Mac OS x64",
    "children": [
      {"name": "Mac OS X (x86_64)", "size": 53118}
    ]
   },
   {"name": "Mac OS x86",
    "children": [
      {"name": "Mac OS X (i386)", "size": 409}
    ]
   },
   {"name": "SunOS x64",
    "children": [
      {"name": "SunOS (amd64)", "size": 3}
    ]
   },
   {"name": "SunOS x86",
    "children": [
      {"name": "SunOS (x86)", "size": 8}
    ]
   },
   {"name": "Windows x64",
    "children": [
      {"name": "Windows 2003 (amd64)", "size": 32},
      {"name": "Windows 7 (amd64)", "size": 25492},
      {"name": "Windows 8 (amd64)", "size": 19},
      {"name": "Windows NT (unknown) (amd64)", "size": 76},
      {"name": "Windows Server 2008 (amd64)", "size": 349},
      {"name": "Windows Server 2008 R2 (amd64)", "size": 428},
      {"name": "Windows Vista (amd64)", "size": 1337},
      {"name": "Windows XP (amd64)", "size": 1284}
    ]
   },
   {"name": "Windows x86",
    "children": [
      {"name": "Windows 2000 (x86)", "size": 147},
      {"name": "Windows 2003 (x86)", "size": 390},
      {"name": "Windows 7 (x86)", "size": 17933},
      {"name": "Windows 8 (x86)", "size": 10},
      {"name": "Windows 95 (x86)", "size": 2},
      {"name": "Windows NT (unknown) (x86)", "size": 13},
      {"name": "Windows Server 2008 (x86)", "size": 19},
      {"name": "Windows Server 2008 R2 (x86)", "size": 43},
      {"name": "Windows Vista (x86)", "size": 4815},
      {"name": "Windows XP (x86)", "size": 34545}
    ]
   }
 ]
} 
```

我并没有真正更改示例代码，但如果有帮助，我可以发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T09:57:31.650

您无法从 TreeMap 过渡到 Tree... 过渡更改样式或属性，但您无法从一种布局过渡到另一种布局。

**对于傻瓜：过渡就像将苹果的颜色从红色更改为绿色或更改其大小，但您不能将苹果更改为橙色。**

# iphone - 完成后如何让 AFHTTPRequestOperation 调用选择器而不是块？

> ID：13235706
> 
> 赞同：0
> 
> 时间：2012-11-05T15:56:10.507
> 
> 标签：iphone, ios, asihttprequest, grand-central-dispatch, afnetworking

`AFHTTPRequestOperation`喜欢在请求操作完成时调用 GCD 块。有没有办法让它调用方法选择器？我正在将我的应用程序从`ASIHTTPRequest`AFNetworking 转换，并且我的应用程序是围绕选择器而不是块构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:59:45.623

您可以在完成块内调用您的选择器：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:urlRequest
        success:^(NSURLRequest *completedURLRequest, NSHTTPURLResponse *response, NSDictionary *json) {
            [self callMyCustomSuccessMethod:json];
        }
        failure:^(NSURLRequest *errorRequest, NSHTTPURLResponse *response, NSError *error, id JSON) {
            [self callMyCustomErrorMethod:error];
        }];
[operation start]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:00:18.740

不确定是否`AFHTTPRequestOperation`支持基于选择器的回调，但您可以轻松地将对选择器的调用包装在一个块中：

```
success:^(AFHTTPRequestOperation *operation, id responseObject) {
   [myDelegate onSuccess:operation];
} 
```

这适用于声明为的回调方法：

```
- (void)onSuccess:(AFHTTPRequestOperation*)operation; 
```

# javascript - 使用 ExtJs 设置文件下载目的地

> ID：13235709
> 
> 赞同：1
> 
> 时间：2012-11-05T15:56:52.027
> 
> 标签：javascript, extjs, web, extjs4

我正在使用 ExtJs 进行前端开发，并且正在寻找一种方法来设置要下载的文件的目标。我知道我可以 `xtype:filefield`用来浏览文件，但这需要我选择一个实际的文件，我只需要为文件目标选择一个文件夹，然后将该路径发送到其他地方。我有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:45:46.177

您将无法使用 javascript 选择用户的下载位置。这个只能在用户端设置，[否则会侵犯用户的安全](https://stackoverflow.com/q/4453798/1062992)。

如果您的应用程序仅适用于 Intranet，则可以通过多种方式将配置推送到用户的浏览器（取决于他们在 Intranet 中运行的 Web 浏览器）。但这会使**所有**下载都转到该位置。

大多数浏览器也有一个配置，允许用户为每个下载定义一个位置，如此处所述，[这里](https://stackoverflow.com/q/6677281/1062992)[是不同浏览器的更多细节](http://www.techsupportalert.com/content/how-get-your-browser-download-where-you-want.htm)。用户将能够（并且必须）为每次下载选择下载位置。

如果这是用于 Intranet 应用程序，并且如果您的 Intranet 正在运行 Firefox，那么还有[这个附加组件](https://addons.mozilla.org/en-us/firefox/addon/automatic-save-folder/)。您必须将其推送到所有用户的计算机上（或手动将其安装在所有计算机上）。我还没有尝试过，但我打算在出现像你这样的情况时使用它（我所有的 ExtJS 工作都是针对运行 Firefox 的 Intranet - 每当用户登录到网络时，我都会使用登录脚本推出这样的事情自动安装它们）。

# android - android:headerDividersEnabled 不起作用

> ID：13235710
> 
> 赞同：5
> 
> 时间：2012-11-05T15:56:53.540
> 
> 标签：android, listview, header, divider

我想在 a 的顶部有一个分隔线`ListView`（放在 中`RelativeLayout`），但是当我尝试使用它时，我只得到底部的分隔线：

```
<ListView
        android:id="@+id/last_contacts_picked_list"
        android:headerDividersEnabled="true"
        android:footerDividersEnabled="true"
        android:paddingTop="50dp"
        android:dividerHeight="5dp"
        android:layout_marginTop="50dp"
        android:divider="@android:drawable/divider_horizontal_textfield"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="..."
        android:layout_alignLeft="..."
        android:layout_alignRight="..."
        android:layout_below="..."
         /> 
```

我有这样的事情：

[http://i051.radikal.ru/1211/4f/a408db5e717f.png](http://i051.radikal.ru/1211/4f/a408db5e717f.png)

为什么它也没有标题分隔符？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T16:49:34.477

这不是[android:headerDividersEnabled](http://developer.android.com/reference/android/widget/ListView.html#attr_android%3aheaderDividersEnabled)应该做的。这意味着如果您要添加列表标题，则该标题是否需要用分隔符分隔。

对于您的问题，只需使用带有 ImageView 的线性布局，将分隔线作为源，然后是 ListView。希望这可以帮助。

# ruby - ActiveAttr 的非空字段

> ID：13235716
> 
> 赞同：0
> 
> 时间：2012-11-05T15:57:23.330
> 
> 标签：ruby, ruby-on-rails-3

我在强制字段不为 nil 时遇到问题`ActiveAttr::Model`。

是否有一种优雅的方式在模型中强制执行此约束，而不是在控制器中定义它？还是我对场景的测试不正确？

模型：

```
class Message
  include ActiveAttr::Model

  attribute :name, :presence => true, :allow_nil => false, :allow_blank => false
  attribute :email, :presence => true
  attribute :content, :presence => true

  validates_format_of :email, :with => /^[-a-z0-9_+\.]+\@([-a-z0-9]+\.)+[a-z0-9]{2,4}$/i
  validates_length_of :content, :maximum => 500
end 
```

规格：

```
module MessageSpecHelper
  def valid_message_attributes
    {
       :name => "Walter White",
       :email => "walter@hailtheking.com",
       :content => "I am the one who knocks"
   }
  end
end

it "should have error on name (alternate with nil)" do 
  @message.attributes = valid_message_attributes.except(:name => nil)
  @message.should have(1).error_on(:name)
end 
```

# sql-server - SQL Server 追加查询

> ID：13235720
> 
> 赞同：1
> 
> 时间：2012-11-05T15:57:35.793
> 
> 标签：sql-server, tsql, insert

我有以下（不工作）查询：

```
insert into [MyDB].[dbo].[Reports_StepsStat]  
    (ActivityID,TaskID,StepIndex,StepStatus,TimeSpanInSeconds,Score)
VALUES (
  SELECT
    tasks.ActivityID as ActivityID,
    tasks.ID as TaskID,
    [StepIndex]=item.value('(StepIndex)[1]', 'NVARCHAR(MAX)'),
    [StepStatus]=item.value('(Status)[1]', 'NVARCHAR(MAX)'),
    [TimeSpanInSeconds] = DATEDIFF(MINUTE, item.value('(StartedOn)[1]',    'datetime'),item.value('(FinishedOn)[1]', 'datetime')),
    tasks.Score as Score
  FROM 
    [MyDB].[dbo].[Tasks] as tasks 
  CROSS APPLY 
    [Progress].nodes ('//Progress/Steps/ProgressStep') Progress(item)
) 
```

内部选择查询 ( `SELECT task.ActivityID..`) 完美运行并生成预期的表。

外部`insert into`部分应该将内部部分的结果附加到名称为 的表中`Reports_StepsStat`。这不起作用。

我已经尝试并成功使用`SELECT INTO`，但显然`SELECT INTO`只能用于创建一个新表，而不是附加到现有表，这是我需要的。

我得到的错误是：

> *消息 156，级别 15，状态 1，第 6 行*
> *关键字“SELECT”附近的语法不正确。*
> *消息 102，级别 15，状态 1，第 14 行*
> *')' 附近的语法不正确。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:01:47.503

我认为`VALUES (`您的查询不需要。

```
 insert into [MyDB].[dbo].[Reports_StepsStat]  
 (ActivityID,TaskID,StepIndex,StepStatus,TimeSpanInSeconds,Score)
 SELECT
  tasks.ActivityID as ActivityID,
  tasks.ID as TaskID,
  [StepIndex]=item.value('(StepIndex)[1]', 'NVARCHAR(MAX)'),
  [StepStatus]=item.value('(Status)[1]', 'NVARCHAR(MAX)'),
  [TimeSpanInSeconds]=DATEDIFF(MINUTE,item.value('(StartedOn)[1]', 'datetime'),
  item.value('(FinishedOn)[1]', 'datetime')),
  tasks.Score as Score
 FROM [MyDB].[dbo].[Tasks] as tasks 
     CROSS APPLY [Progress].nodes ('//Progress/Steps/ProgressStep') Progress(item) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:01:45.990

语法是

```
insert into a select * from b 
```

所以只需省略选择周围的值（...）...

# hibernate - Hibernate List-index 偶尔获得空值

> ID：13235724
> 
> 赞同：1
> 
> 时间：2012-11-05T15:57:45.960
> 
> 标签：hibernate

我的 hbm.xml 文件中有这个映射。但是由于一些奇怪的原因，我在 SEQUENCE 列上偶尔会得到空值。如何限制它被设置为null？我不能在映射中使用 Set，因为我需要索引我的类别。

```
 <list name="categories" table="CATEGORY" cascade="save-update, delete" lazy="false"      outer-join="false">
            <key column="ID" />
            <list-index column="SEQUENCE"/> 
            <one-to-many class="Category"/> 
```

# c# - 使用命令行参数安装 IIS8

> ID：13235727
> 
> 赞同：6
> 
> 时间：2012-11-05T15:57:53.463
> 
> 标签：c#, windows, iis, windows-8, iis-8

通过使用以下参数从 C# 调用 pkgmgr.exe，我能够在应用程序开发部分启用 IIS 7 功能 ASP.NET 和 .NET 可扩展性。

`/iu:IIS-WebServerRole;IIS-WebServer;IIS-CommonHttpFeatures;IIS-StaticContent;IIS-DefaultDocument;IIS-DirectoryBrowsing;IIS-HttpErrors;IIS-HttpRedirect;IIS-ApplicationDevelopment;IIS-ASPNET;IIS-NetFxExtensibility;...... /norestart /quiet`

对于 IIS8，它不再工作，因为应用程序开发功能下没有 ASP.NET 选项。取而代之的是 ASP.NET 3.5 和 ASP.NET 4.5（.NET Extensibility 3.5 和 .NET Extensibility 4.5）。

如何使用 pkgmgr.exe 启用它们？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T13:57:52.723

我昨天看到你的问题，并定期查找，希望有人回答。可悲的是，没有人这样做，尽管我找到了解决方案，但好消息是我将其分享给您。

IIS-ASPNET 仍然存在，它启用了 ASP.NET 3.5。你还需要`IIS-NetFxExtensibility`。不同之处在于这两者现在有一个额外的先决条件，`NetFx4Extended-ASPNET45`.

因此，如果您想启用 ASP.NET 3.5，您需要：`IIS-ASPNET;IIS-NetFxExtensibility;NetFx4Extended-ASPNET45`

对于 ASP.NET 4.5，您需要：`IIS-ASPNET45;IIS-NetFxExtensibility45;NetFx4Extended-ASPNET45`

# c# - Monodroid 3D 模型

> ID：13235735
> 
> 赞同：1
> 
> 时间：2012-11-05T15:58:16.473
> 
> 标签：c#, android, animation, xamarin.android, 3d-modelling

我有兴趣将 3d 模型添加到我的 Android 应用程序中，该应用程序正在使用 c# 在 Mono 中开发。该模型将使用 Blender 等工具开发。与模型交互的一个示例是单击“微笑”按钮并启动模型的微笑序列。这种类型的媒体是否有一个聪明的“容器”？我只需要向用户展示预先确定的例程——他们不会创建新的例程。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:04:30.740

您可能需要使用[OpenTK](http://www.opentk.com/)库，它是`C#`. `OpenGL`您可能还需要一些用于您要操作的文件格式的导入程序。

这只是来自 xamarin 网站本身的简单多维数据集的一个示例：

[你好 GLCube](http://docs.xamarin.com/Android/Guides/Getting_Started/Hello__glCube)

# rabbitmq - 按需使用 RabbitMQ 消费者？

> ID：13235737
> 
> 赞同：7
> 
> 时间：2012-11-05T15:58:24.593
> 
> 标签：rabbitmq, consumer

我希望消费者每次收到消息时都执行一些操作。消费者必须 24/7 全天候“监听”队列，还是只能在收到适当消息时运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:23:24.377

我不确定你的问题是否有意义。消息只能由队列的消费者从队列中接收。要知道消息是否在队列中，必须查看队列。做到这一点的唯一方法就是成为消费者。

如果你真的想要，你可以有一个脚本来运行管理插件的命令行界面。这可以轮询队列，当它的大小超过 1 时，可以启动一个程序，该程序将运行消费者从队列中消费。

这些都没有任何意义。如果它只是坐着等待队列并且什么都不做，那么它几乎不会消耗任何资源，所以我看不出问题会出现在 24/7 运行消费者。

当然，消费者不必 24/7 全天候运行，这是 MQ 的一部分。它是异步的。当生产者写入队列时，消费者不必运行。因此，您可以有一个计划任务定期运行您的消费者来检查和处理来自队列的消息。但我不认为那是你想要的。

倾听的重点是：在消息到来之前什么都不做，处理消息，在下一个消息之前什么都不做。这就是你想要的问题的第一句话。为什么听力有问题？

# c# - 使用泛型参数创建实例

> ID：13235739
> 
> 赞同：0
> 
> 时间：2012-11-05T15:58:30.890
> 
> 标签：c#, generics, interface

[编辑]

我再次整理我的问题，

参数模型

```
public class PaymentModel
{   
    ... 
}

public class CCPaymentModel : PaymentModel
{
    ...
}

public class PaypalPaymentModel : PaymentModel
{
    ...
}

public class GooglePaymentModel : PaymentModel
{
    ...
} 
```

接口类

```
public interface IPayment<T> where T : PaymentModel
{
    ...
} 
```

模型（从 IPayment 继承），

```
public class SagePayment
    : IPayment<CreditCardPaymentInfo>
{
    public void MakePayment( CreditCardPaymentInfo creditCardPaymentInfo ) {
        // ...
    }

    public void MakeRefund( CreditCardPaymentInfo creditCardPaymentInfo ) {
        // ...
    }
}

public class GooglePayment
    : IPayment<GooglePaymentModel>
{
    public void MakePayment( GooglePaymentModel paymentInfo ) {
        // ...
    }

    public void MakeRefund( GooglePaymentModel paymentInfo ) {
        // ...
    }
}

public class PaypalPayment
    : IPayment<PayPalPaymentModel>
{...} 
```

控制器（创建实例）

```
IPayment<???> paymentProcess; // //Error    1   Using the generic type 'com.WebUI.Models.IPayment<T>' requires 1 type arguments

if (Regex.IsMatch(paytype, "^Credit Card"))
{
    paymentProcess = new SagePayment(); // it need CCPaymentModel type parameter
}
else if (Regex.IsMatch(paytype, "^PayPal"))
{
    paymentProcess = new PayPalPayment(); // it need PaypalPaymentModel type parameter
}
else if (Regex.IsMatch(paytype, "^Google"))
{
    paymentProcess = new GooglePayment(); // it need GooglePaymentModel type parameter
}

[EDIT]

public void Charge(string paytype,orderNo){

    IPayment<???> paymentProcess; // //Error    1   Using the generic type 'com.WebUI.Models.IPayment<T>' requires 1 type arguments
    Object payinfo;

    if (Regex.IsMatch(paytype, "^Credit Card"))
    {
        paymentProcess = new SagePayment(); // <== Error, Can not casting
        payinfo = getPaymentInfo(paytype, orderNo); // it return CCPaymentModel type object
    }
    else if (Regex.IsMatch(paytype, "^PayPal"))
    {
        paymentProcess = new PayPalPayment();
        payinfo = getPaymentInfo(paytype, orderNo); // it return PaypalPaymentModel type object
    }
    else if (Regex.IsMatch(paytype, "^Google"))
    {
        paymentProcess = new GooglePayment(); // it return GooglePaymentModel type object
        payinfo = getPaymentInfo(paytype, orderNo); 
    }

    paymentProcess.MakePayment(payinfo);
} 
```

![在此处输入图像描述](../Images/1f893716c070b4ada6cefa22f8e3537b.png)

[编辑#2]

有了这个，

```
public interface IPayment {
}

public interface IPayment<T> : IPayment where T : PaymentModel
{
    void MakePayment(string pickno);
    void makeRefund(T refundInfo);
} 
```

我收到一个错误，错误 1 ​​'com.WebUI.Models.IPayment' 不包含 'MakePayment' 的定义，并且没有扩展方法 'MakePayment' 接受类型为 'Ecom.WebUI.Models.IPayment' 的第一个参数（您是否缺少 using 指令或程序集引用？）

所以，为了避免这个错误，我将 MakePayment 方法移动到上层接口类，

```
public interface IPayment {
    void MakePayment(string pickno);
}

public interface IPayment<T> : IPayment where T : PaymentModel
{
    void makeRefund(T refundInfo);
} 
```

**现在，错误消失了，但是在 makeRefund 情况下我应该怎么做？我不能移动到上层接口类，因为我需要泛型类型参数。**

你能帮我多一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:05:28.087

您可能希望有另一个 IPayment 接口，而没有 IPayment 继承自的泛型。那是：

```
public interface IPayment
{

}

public interface IPayment<T> : IPayment where T : PaymentModel
{

} 
```

编辑：如果您真的不想拥有`IPayment`基本接口，那么您必须将它们视为 type `object`：

```
object paymentProcess;

if (Regex.IsMatch(paytype, "^Credit Card"))
{
    paymentProcess = new SagePayment();
}
else if (Regex.IsMatch(paytype, "^PayPal"))
{
    paymentProcess = new PayPalPayment();
}
else if (Regex.IsMatch(paytype, "^Google"))
{
    paymentProcess = new GooglePayment();
} 
```

但这可能会在以后花费您；无论您将不得不强制转换以使用特定的实现类型。你真的最好使用基本接口。您甚至可以以一种很好的方式使用它：

```
public interface IPayment
{
    PaymentModel Payment { get; }
} 
```

`PaymentModel`因此，您可以在不*知道*它实际上是`GooglePaymentModel`专门的情况下引用和使用。

编辑：根据您的评论，您可能有以下内容：

```
public interface IPayment
{
    void MakePayment(string pickno);
}

public interface IPayment<T> : IPayment where T : PaymentModel
{
    void MakeRefund(T refundInfo);
} 
```

您甚至可以输入一个非通用`MakeRefund`版本，`PaymentModel`因此您的调用代码可能不在乎它是否为 a `GooglePayment`。（但如果他们通过 a 可能会导致其他问题`PayPalPayment`，所以这取决于你）

编辑：根据您的最新代码，您需要这样的东西：

```
public interface IPayment
{

}

public interface IPayment<T> : IPayment where T : PaymentModel
{
    void MakePayment(T paymentInfo);
    void MakeRefund(T paymentInfo);
} 
```

您的控制器/工厂将如下所示：

```
//not sure on the exact signature since you didn't provide it
public IPayment CreatePayment(string paytype)
{
    IPayment paymentProcess = null;

    if (Regex.IsMatch(paytype, "^Credit Card"))
    {
        paymentProcess = new SagePayment();
    }
    else if (Regex.IsMatch(paytype, "^PayPal"))
    {
        paymentProcess = new PayPalPayment();
    }
    else if (Regex.IsMatch(paytype, "^Google"))
    {
        paymentProcess = new GooglePayment();
    }

    return paymentProcess
} 
```

您的使用代码必须在*某处*将其转换为已知的付款类型才能使用：

```
IPayment untypedPayment = Factory.CreatePayment("PayPal");
IPayment<PayPalPaymentModel> typedPayment = (IPayment<PayPalPaymentModel>)untypedPayment;
typedPayment.MakePayment(new PayPalPaymentModel());

//or alternatively
IPayment untypedPayment = Factory.CreatePayment("PayPal");  
PayPalPayment typedPayment = (PayPalPayment)untypedPayment;
typedPayment.MakeRefund(new PayPalPaymentModel()); 
```

编辑：根据您的最新编辑，这就是您想要的。针对 PaymentModel 驱动您的基本 IPayment 调用。然后在特定的实现中，您可以在运行时进行强制转换或类型检查：

```
public interface IPayment
{
    void MakePayment(PaymentModel paymentInfo);
    void MakeRefund(PaymentModel paymentInfo);
}

public interface IPayment<T> : IPayment where T : PaymentModel
{

}

public class GooglePayment
    : IPayment<GooglePaymentModel>
{
    public void MakePayment(PaymentModel paymentInfo) {
    GooglePaymentModel googlePayment = (GooglePaymentModel)paymentInfo;
    // ...
    }

    public void MakeRefund(PaymentModel paymentInfo) {
    GooglePaymentModel googlePayment = (GooglePaymentModel)paymentInfo;
    // ...
    }
} 
```

然后你的`Controller`：

```
public void Charge(string paytype,orderNo){

    IPayment paymentProcess = null;
    PaymentModel payinfo = null;

    if (Regex.IsMatch(paytype, "^Credit Card"))
    {
        paymentProcess = new SagePayment();
        payinfo = getPaymentInfo(paytype, orderNo);
    }
    else if (Regex.IsMatch(paytype, "^PayPal"))
    {
        paymentProcess = new PayPalPayment();
        payinfo = getPaymentInfo(paytype, orderNo);
    }
    else if (Regex.IsMatch(paytype, "^Google"))
    {
        paymentProcess = new GooglePayment();
        payinfo = getPaymentInfo(paytype, orderNo); 
    }

    paymentProcess.MakePayment(payinfo);
}

public PaymentModel getPaymentInfo(string paytype,orderNo)
{
    //return some payment model
} 
```

# php - 电子邮件脚本发送电子邮件但抛出无法重新声明 spamcheck() 错误

> ID：13235740
> 
> 赞同：0
> 
> 时间：2012-11-05T15:58:34.587
> 
> 标签：php, mysql

我有一个将电子邮件发送到多个电子邮件地址的脚本，该脚本假设在完成后重定向到成功页面，电子邮件发送正常，没有问题，但是我收到以下错误而不是重定向。

> 致命错误：无法在 /websites/123reg/LinuxPackage22/br 中重新声明 spamcheck()（之前在 /websites/123reg/LinuxPackage22/br/ig/ht/MYSITE.co.uk/public_html/admin/mailinglistsend.php:87 中声明） /ig/ht/MYSITE.co.uk/public_html/admin/mailinglistsend.php 在第 87 行

代码如下

```
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
}

require_once('../Connections/BrightLights.php'); 

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_BrightLights, $BrightLights);
$query_mailinglist = "SELECT * FROM mailing_list WHERE subscribed = ''";
$mailinglist = mysql_query($query_mailinglist, $BrightLights) or die(mysql_error());
$row_mailinglist = mysql_fetch_assoc($mailinglist);
$totalRows_mailinglist = mysql_num_rows($mailinglist);

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

?>
<?php 

$subject = $_POST['subject'];
$body = $_POST['body'];

do {

$name = $row_mailinglist['name'];
$email = $row_mailinglist['email'];

    $email_from = 'mailinglist@MYSITE.com';
    $email_subject = "$subject";
    $email_body = "
    $name,

    $body

    You have received this email because you have subscribed via our website, to unsubscribe go to MYSITE/mailing-list.php?unsubscribe=$email";

    $to = "$email";
    $headers = "From: $email_from";
    mail($to, $email_subject, $email_body, $headers);

    function spamcheck($field)
    {
        //filter_var() sanitizes the e-mail
        //address using FILTER_SANITIZE_EMAIL
        $field=filter_var($field, FILTER_SANITIZE_EMAIL);

        //filter_var() validates the e-mail
        //address using FILTER_VALIDATE_EMAIL
        if(filter_var($field, FILTER_VALIDATE_EMAIL))
        {
            return TRUE;
        }
        else
        {
            return FALSE;
        }
    }

    } while ($row_mailinglist = mysql_fetch_assoc($mailinglist));

mysql_free_result($mailinglist);

    header('Location: mailinglist-new.php?sent');

?> 
```

我感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:01:58.907

`do - while`你在一个循环中声明你的函数（*为什么？！*）。拿出来。一切都会变好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:04:11.883

检查您是否`spamcheck()`在任何包含的文件中声明了该函数

- 更新

spamcheck 函数在 while 循环中。重新申报的原因是什么

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-05T16:03:39.003

奇怪的是你在 do while 循环中声明函数

固定代码应如下所示：

```
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
}

require_once('../Connections/BrightLights.php'); 

function spamcheck($field)
    {
        //filter_var() sanitizes the e-mail
        //address using FILTER_SANITIZE_EMAIL
        $field=filter_var($field, FILTER_SANITIZE_EMAIL);

        //filter_var() validates the e-mail
        //address using FILTER_VALIDATE_EMAIL
        if(filter_var($field, FILTER_VALIDATE_EMAIL))
        {
            return TRUE;
        }
        else
        {
            return FALSE;
        }
    }

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_BrightLights, $BrightLights);
$query_mailinglist = "SELECT * FROM mailing_list WHERE subscribed = ''";
$mailinglist = mysql_query($query_mailinglist, $BrightLights) or die(mysql_error());
$row_mailinglist = mysql_fetch_assoc($mailinglist);
$totalRows_mailinglist = mysql_num_rows($mailinglist);

error_reporting(E_ALL & ~E_NOTICE);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

$subject = $_POST['subject'];
$body = $_POST['body'];

do {

$name = $row_mailinglist['name'];
$email = $row_mailinglist['email'];

    $email_from = 'mailinglist@brightlightstheatreschool.com';
    $email_subject = "$subject";
    $email_body = "
    $name,

    $body

    You have received this email because you have subscribed via our website, to unsubscribe go to brightlightstheatreschool.com/mailing-list.php?unsubscribe=$email";

    $to = "$email";
    $headers = "From: $email_from";
    mail($to, $email_subject, $email_body, $headers);

    } while ($row_mailinglist = mysql_fetch_assoc($mailinglist));

mysql_free_result($mailinglist);

    header('Location: mailinglist-new.php?sent');

?> 
```

# asp.net - 在 asp 页面到 asp.net 页面的会话丢失

> ID：13235742
> 
> 赞同：4
> 
> 时间：2012-11-05T15:58:46.443
> 
> 标签：asp.net, session, asp-classic, web-config

我网站的一部分是 Asp，另一部分是 Asp.Net。我使用 session 将当前用户的信息保存在 Asp 页面中。但是，会话在重定向到 Asp.net 页面时丢失。

有时，会话会保存在第一个重定向 Asp.net 页面中。过了一会儿，我单击一个按钮，发现会话仍然丢失。

我真的很困惑这种情况。这怎么可能发生？

ps: 1.我检查了超时配置，似乎运行良好。2.浏览器cookie配置正常。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:02:36.620

ASP 和 ASP.NET**不**共享会话状态。它们是完全不同的系统。

如果您想在两个系统之间以某种方式共享会话状态，可以使用本文中概述的方法：http: [//msdn.microsoft.com/en-us/library/aa479313.aspx](http://msdn.microsoft.com/en-us/library/aa479313.aspx)

# powershell - 你可以在没有 psexec 的情况下运行远程命令吗？

> ID：13235746
> 
> 赞同：2
> 
> 时间：2012-11-05T15:59:22.270
> 
> 标签：powershell, batch-file, psexec

我正在尝试在多台远程机器上运行批处理文件。它有一些我可以远程运行的注册表更改和其他命令。我有一个命令我无法找到替代方法：

```
net user USERNAME /PASSWORDREQ:yes 
```

有没有办法在没有 psexec 的情况下远程运行这个命令？我宁愿不分发具有依赖关系的批处理文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:02:38.983

是的，您可以在远程计算机上启用 powershell 远程处理，然后使用 Invoke-Command cmdlet。例子：

```
Invoke-Command -ComputerName RemoteComputer -Script { param($userName) net use $userName /PASSWORDREQ:yes } -Args "UserNameArgumentValue" 
```

# c++ - Qt Creator 在创建新项目时没有“Qt Gui Application”可供选择

> ID：13235747
> 
> 赞同：3
> 
> 时间：2012-11-05T15:59:25.617
> 
> 标签：c++, qt, user-interface

安装 Qt Creator 后，从[http://qt-project.org/downloads](http://qt-project.org/downloads) - “Qt Creator 2.5.2 for Windows (31 MB)”当我选择 File->New File [...]

[http://i.imgur.com/iMw8u.png](http://i.imgur.com/iMw8u.png)

这可能是个愚蠢的问题，但现在不知道为什么会这样。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:08:11.140

改为安装 Qt SDK。当你下载 Qt Creator 时，你得到的只是 IDE，你实际上并没有得到 Qt 或编译器。SDK 更容易。

编辑：SDK 可以在[这里](http://qt-project.org/downloads)找到，至少在撰写本文时，似乎从 Qt 5 起，默认下载包括 Qt 和 Qt Creator。

# eclipse - 使用 Eclipse 的 C 项目上的链接器错误

> ID：13235748
> 
> 赞同：29
> 
> 时间：2012-11-05T15:59:36.440
> 
> 标签：eclipse, gcc, linker, arm, gnu

我想为 STM32F217IG 微控制器创建一个项目。

所以我安装了 Eclipse 和[GNU for ARM 嵌入式 GCC 交叉编译器](https://launchpad.net/gcc-arm-embedded)。我不认为它是 Code Sourcery 之一。我使用它，因为它支持浮点而 Code Sourcery 不支持。

一旦我这样做了，我就尝试创建一个只有两个源文件的非常小的项目：test.c 和 main.c，它们都只写了以下代码：

```
#include <stdlib.h>
#include <stdio.h>

int main (void)
{
    printf("Hello, World!");
    return 0;
} 
```

我更改了项目属性中的行命令，将 GCC 替换为 arm-none-eabi-gcc，然后尝试编译项目。

我自己没有创建任何makefile；我在 Eclipse 中使用了自动创建。

建筑物似乎很好，但是当涉及到链接器时，我在控制台中收到以下错误：

```
make all
'Building target: test3'
'Invoking: Cross GCC Linker'
arm-none-eabi-gcc  -o"test3"  ./main.o ./test3.o

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-exit.o): In function `exit':
exit.c:(.text.exit+0x2c): undefined reference to `_exit'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-sbrkr.o): In function `_sbrk_r':
sbrkr.c:(.text._sbrk_r+0x18): undefined reference to `_sbrk'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-writer.o): In function `_write_r':
writer.c:(.text._write_r+0x20): undefined reference to `_write'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-closer.o): In function `_close_r':
closer.c:(.text._close_r+0x18): undefined reference to `_close'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-fstatr.o): In function `_fstat_r':
fstatr.c:(.text._fstat_r+0x1c): undefined reference to `_fstat'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-isattyr.o): In function `_isatty_r':
isattyr.c:(.text._isatty_r+0x18): undefined reference to `_isatty'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-lseekr.o): In function `_lseek_r':
lseekr.c:(.text._lseek_r+0x20): undefined reference to `_lseek'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-readr.o): In function `_read_r':
readr.c:(.text._read_r+0x20): undefined reference to `_read'

collect2: ld returned 1 exit status

make: *** [test3] Erreur 1 
```

我上网查了一下，发现可能是系统调用问题。但我不知道如何将这个库添加到我在 Linux 上的项目中。

这真的是问题吗？如果是，我该如何解决？如果不是，错误来自哪里？

正如有人建议的那样，我尝试“链接” C 运行时库。在 Eclipse 中，我似乎有两种解决方案：

首先在项目属性 → *C/C++* →*构建*→*设置*→*交叉链接器*→*库*。我只是添加了字母`c`然后错误没有改变，但是`-lc`在命令行的末尾有：

```
 make all
'Building target: test3'
'Invoking: Cross GCC Linker'
arm-none-eabi-gcc  -o"test3"  ./main.o ./test3.o   -lc

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-exit.o): In function `exit':
exit.c:(.text.exit+0x2c): undefined reference to `_exit'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-sbrkr.o): In function `_sbrk_r':
sbrkr.c:(.text._sbrk_r+0x18): undefined reference to `_sbrk'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-writer.o): In function `_write_r':
writer.c:(.text._write_r+0x20): undefined reference to `_write'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-closer.o): In function `_close_r':
closer.c:(.text._close_r+0x18): undefined reference to `_close'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-fstatr.o): In function `_fstat_r':
fstatr.c:(.text._fstat_r+0x1c): undefined reference to `_fstat'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-isattyr.o): In function `_isatty_r':
isattyr.c:(.text._isatty_r+0x18): undefined reference to `_isatty'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-lseekr.o): In function `_lseek_r':
lseekr.c:(.text._lseek_r+0x20): undefined reference to `_lseek'

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/lib\libc.a(lib_a-readr.o): In function `_read_r':
readr.c:(.text._read_r+0x20): undefined reference to `_read'

collect2: ld returned 1 exit status
make: *** [test3] Erreur 1 
```

但我不知道是否真的意味着添加C运行时库。

*其次，我在项目属性 → C/C++ 通用*→*路径和符号*→*库*中添加了 libc.a 库，这是我得到的（完全不同）：

```
make all
'Building target: test3'
'Invoking: Cross GCC Linker'
arm-none-eabi-gcc  -o"test3"  ./main.o ./test3.o   -l"C:/Program\ Files/GNU\ Tools\ ARM\ Embedded/4.6\ 2012q4/arm-none-eabi/lib/armv7-m/libc.a"

c:/program files/gnu tools arm embedded/4.6 2012q4/bin/../lib/gcc/arm-none-eabi/4.6.2/../../../../arm-none-eabi/bin/ld.exe: cannot find -lC:/Program\ Files/GNU\ Tools\ ARM\ Embedded/4.6\ 2012q4/arm-none-eabi/lib/armv7-m/libc.a

collect2: ld returned 1 exit status
make: *** [test3] Erreur 1 
```

然后它仍然不起作用，但它是搜索的好方法吗？

哦，还有一个非常有趣的事实：

我只在调试模式下得到错误。如果我处于发布模式，一切都很好，并且我没有任何错误（除非我添加了 libc.a，那么我认为这不是最好的做法）。这是否意味着问题在于 .elf 文件的创建？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-05T17:18:11.033

我查看了您链接的工具包，只是为了阅读以下内容`readme.txt`：

> 该工具链专为 Cortex-R/M 裸机开发而构建和优化。

换句话说，这个工具链是专门为嵌入式系统配置的，可能根本没有操作系统运行。在这种情况下，没有系统可以提供例如`printf()`应该写入的标准输出，没有文件系统等 - 如果你想使用它们，你必须链接到一些提供这些基本服务的库。

也就是说，您的工具包提供`librdimon.a`了提供所有这些基本服务的库。这个库实际上是[libgloss](http://ieee.uwaterloo.ca/coldfire/gcc-doc/docs/porting_1.html#SEC1)编译的一部分。如果要链接它，请尝试以下命令：

```
arm-none-eabi-gcc --specs=rdimon.specs   -Wl,--start-group -lgcc -lc -lm -lrdimon -Wl,--end-group -o test test.c 
```

这个链接在我的电脑上很好，但它是否是你真正想要的则是另一回事（无论如何，你希望在哪里看到`printf()`输出？）。

对于您的芯片，您可能应该寻找一个将标准输出重定向到串行端口或通过 JTAG 提供调试输出的库。或者，您可以使用您的自定义功能，例如将调试输出发送到串行控制台，而不是`printf()`- 这取决于您。如果您决定使用`printf()`我建议阅读`libgloss`文档。

另外，我建议四处寻找专门为 STM32 系列捆绑的工具链。正确配置所有这些基本内容（C 库、链接器脚本等）需要一些经验。

**编辑：**许多嵌入式系统并没有真正使用标准 C 库，几乎从头开始。如果你想走这条路，你应该传递`-nostdlib`给你的`gcc`调用。当然，您将不再拥有`printf()`可用的东西。

**编辑2：**另一种方法是使用标准库（`newlib`我的意思是），`libgloss`并为您不需要的东西提供适当的存根。您可能想要遵循[本教程](https://sites.google.com/site/stm32discovery/open-source-development-with-the-stm32-discovery/getting-newlib-to-work-with-stm32-and-code-sourcery-lite-eabi)，其中`_read`和`_write`是通过串行端口实现的，其他一切都是存根的。这很可能是您真正想要的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-15T06:32:08.520

我知道这是一个老问题，但我今天在尝试为 STM32 板构建时遇到了这个问题。我拥有的项目有一些链接器脚本（特别是 libs.ld）。在此添加 libnosys.a 条目使链接器满意，我能够继续。

libs.ld：

```
 GROUP(
   libgcc.a
   libg.a
   libc.a
   libm.a
   libnosys.a
 ) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-02-12T02:42:23.313

将您的 C 程序保存为“myprint.c”，我将其编译如下：

arm-none-eabi-gcc myprint.c -lc -specs=nosys.specs

没有错误，输出很好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-06T12:49:07.117

`malloc()`Eclipse 项目中的`free()`函数调用也存在这样的问题。我已经为 STM32 微控制器编写了固件，使用 Eclipse + GNU 用于 ARM 嵌入式 GCC 交叉编译器 + STM32CubeMX 用于微控制器外围初始化和链接器脚本制作。

当我在脚本的**DISCARD**部分添加缺少的字符串`libg.a`( * ) 和`libnosys.a`( * ) 时，我的项目已成功构建。**`.ld`**

 *** * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-02T01:21:16.103

I had created an RTOS project using CubeMX and added a printf and had the same issue on linking, while debugging using OpenOCD.

I replaced the printf("Hello ARM World!") with trace_puts("Hello ARM World!"); and had the messages appear in the debug console.**

# magento - 进口 | 导出数据流 - 配置文件进度百分比不再显示

> ID：13235752
> 
> 赞同：2
> 
> 时间：2012-11-05T15:59:50.973
> 
> 标签：magento, import, progress, dataflow

目前，我们的数据流配置文件不再提供进度百分比。它只是执行导入，然后显示所有错误。以前它会显示很好的进度。

不是主要问题，但如果能得到一些反馈会很好。

# java - 无法收听 .wav 音频文件？

> ID：13235755
> 
> 赞同：2
> 
> 时间：2012-11-05T16:00:02.797
> 
> 标签：java, audio, wav, endianness

我正在创建一个客户端服务器程序，客户端在该程序中发送一个字符串，一旦服务器接收到该字符串，它就会播放一个`.wav`文件。`.wav`服务器显示此错误，而不是播放文件：

```
javax.sound.sampled.LineUnavailableException: line with format PCM_SIGNED 48000.0 Hz, 24 bit, stereo, 6 bytes/frame, little-endian not supported. 
```

这是代码：

```
try {
  AudioInputStream audio = AudioSystem.getAudioInputStream(new File("N.wav"));
  Clip clip = AudioSystem.getClip();
  clip.open(audio);
  clip.start();
} catch(UnsupportedAudioFileException uae) {
  System.out.println(uae);
} catch(IOException ioe) {
  System.out.println(ioe);
} catch(LineUnavailableException lua) {
  System.out.println(lua);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:02:08.820

您的相对路径可能不是您期望的。尝试使用绝对路径`N.wav`，看看它是否有效。（即`/home/navjosh/Sounds/N.wav`或`C:\Users\navjosh\Documents\N.wav`等。

# ipad - 为使用其他人 api 的 ipad 应用程序充电

> ID：13235766
> 
> 赞同：0
> 
> 时间：2012-11-05T16:00:47.330
> 
> 标签：ipad

寻求一些建议

我一直在开发一个 ipad 应用程序，我希望尽快发布，但我正在寻求有关成本的建议。

基本上我的 ipad 应用程序使用 googles image api，它也使用你的 tube 和 twitters api，所以它是各种技术的混搭。

我可以为我的应用程序收费吗？我只想 69 便士，但我不确定这是否允许并且没有发布应用程序的经验，如果可能的话，我想尝试赚取一些利润，并查看了各种广告选项 iads 等。

苹果对使用各种 api 的 ipad 应用程序收费的政策是什么？？？有人可以更新我，甚至只是为我指出正确的方向让论坛问我在这里尝试过[https://devforums.apple.com/index.jspa](https://devforums.apple.com/index.jspa)但它主要基于开发人员而不是一般性讨论。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:09:07.613

Apple iOS 开发者协议中没有任何内容可以阻止您为此类应用程序收费。

您应该确保您有权将您提到的 API 用于商业目的（我理解通常应该是这种情况，但您会更清楚）。

您还应该确保您使用通过该 API 获得的内容的方式是合法的。这里的问题源于 YouTube 和谷歌图像中的内容本身受版权保护。也许这是您可以主张合理使用的情况，也许不是……这取决于您对内容的处理方式。

至于违反 API 或版权的后果，我认为如果您的应用程序取得巨大成功，那么您很有可能会收到要钱的请求；如果您的应用程序会像大多数应用程序一样销售，那么没有人会注意到。只是我的猜测，不暗示任何保证！:-)

# hadoop - 使用 whirr 设置 ec2 集群

> ID：13235767
> 
> 赞同：0
> 
> 时间：2012-11-05T16:00:49.107
> 
> 标签：hadoop, amazon-ec2, cloudera

我设法使用 Whirr 在 amazon ec2 上启动了一个由 10 个节点组成的集群。现在我需要安装 R 和 Packages。

这是命令：

```
whirr run-script --script /home/cloudera/TutorialBreen/config/whirr-ec2/install-r+packages.sh --config /home/cloudera/TutorialBreen/config/whirr-ec2/hadoop-ec2.properties 
```

不幸的是，我收到一个错误，因为 .sh 文件中 rmr 包的链接不再存在。这是原始的 install-r+packeges.sh 文件：

```
sudo yum -y --enablerepo=epel install R R-devel

sudo R --no-save << EOF
install.packages(c('RJSONIO', 'itertools', 'digest', 'Rcpp', 'plyr'), repos="http://cran.revolutionanalytics.com", INSTALL_opts=c('--byte-compile') )
EOF

# if you always like to be up-to-date, you can install the latest version
# of rmr directly from RHadoop's github repository:
#
# branch=master
#
# wget --no-check-certificate https://github.com/RevolutionAnalytics/RHadoop/tarball/$branch -O - | tar zx
# mv RevolutionAnalytics-RHadoop* RHadoop
# sudo R CMD INSTALL --byte-compile RHadoop/rmr/pkg/

# but I'm usually not that adventurous:

wget --no-check-certificate https://github.com/downloads/RevolutionAnalytics/RHadoop/rmr_1.3.1.tar.gz
sudo R CMD INSTALL rmr_1.3.1.tar.gz

sudo su << EOF1 
cat >> /etc/profile <<EOF

export HADOOP_HOME=/usr/lib/hadoop

EOF
EOF1 
```

我对其进行了修改并插入了指向 rmr1.3.1 的新链接：[https ://github.com/RevolutionAnalytics/RHadoop/tarball/rmr-1.3.1/RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz](https://github.com/RevolutionAnalytics/RHadoop/tarball/rmr-1.3.1/RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz)

这是新的 .sh 文件：

```
sudo yum -y --enablerepo=epel install R R-devel

sudo R --no-save << EOF
install.packages(c('RJSONIO', 'itertools', 'digest', 'Rcpp', 'plyr'), repos="http://cran.revolutionanalytics.com", INSTALL_opts=c('--byte-compile') )
EOF

# if you always like to be up-to-date, you can install the latest version
# of rmr directly from RHadoop's github repository:
#
# branch=master
#
# wget --no-check-certificate https://github.com/RevolutionAnalytics/RHadoop/tarball/$branch -O - | tar zx
# mv RevolutionAnalytics-RHadoop* RHadoop
# sudo R CMD INSTALL --byte-compile RHadoop/rmr/pkg/

# but I'm usually not that adventurous:

wget --no-check-certificate https://github.com/RevolutionAnalytics/RHadoop/tarball/rmr-1.3.1/RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz
sudo R CMD INSTALL RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz

sudo su << EOF1 
cat >> /etc/profile <<EOF

export HADOOP_HOME=/usr/lib/hadoop

EOF
EOF1 
```

不幸的是，它也不起作用。我收到以下错误（在输出页面之后）：

```
 --2012-11-05 10:28:02--  https://github.com/RevolutionAnalytics/RHadoop/tarball/rmr-1.3.1/RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz
    Resolving github.com... 207.97.227.239
    Connecting to github.com|207.97.227.239|:443... connected.
    WARNING: cannot verify github.com's certificate, issued by `/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance EV CA-1':
      Unable to locally verify the issuer's authority.
    HTTP request sent, awaiting response... 302 Found
    Location: https://nodeload.github.com/RevolutionAnalytics/RHadoop/legacy.tar.gz/rmr-1.3.1 [following]
    --2012-11-05 10:28:02--  https://nodeload.github.com/RevolutionAnalytics/RHadoop/legacy.tar.gz/rmr-1.3.1
    Resolving nodeload.github.com... 207.97.227.252
    Connecting to nodeload.github.com|207.97.227.252|:443... connected.
    WARNING: cannot verify nodeload.github.com's certificate, issued by `/C=US/O=DigiCert Inc/OU=www.digicert.com/CN=DigiCert High Assurance CA-3':
      Unable to locally verify the issuer's authority.
    HTTP request sent, awaiting response... 200 OK
    Length: 15699365 (15M) [application/x-gzip]
    Saving to: `rmr-1.3.1.4'

100%[======================================>] 15,699,365  14.6M/s   in 1.0s    

2012-11-05 11:31:49 (14.6 MB/s) - `rmr-1.3.1.4' saved [15699365/15699365]

Warning: invalid package 'RevolutionAnalytics-RHadoop-rmr-1.3.1-0-gfff2743.tar.gz'
Error: ERROR: no packages specified 
```

有人知道我需要更改什么（可能在 install-r+packeges.sh 文件中）吗？

# objective-c - 动态改变 UITableViewCell 的附属视图图像

> ID：13235768
> 
> 赞同：0
> 
> 时间：2012-11-05T16:00:49.137
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 CustomTableView 单元，它有一个附件视图。如何动态更改附件视图的图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:04:19.893

使用您的自定义按钮进行附件视图，例如..

// 将铅笔图标粘贴在附件视图上

```
UIButton* pencil = [UIButton buttonWithType:UIButtonTypeCustom];
[pencil setImage:[UIImage imageNamed:@"icon-pencil.gif"] forState:UIControlStateNormal];
pencil.frame = CGRectMake(0, 0, 15, 15);
pencil.userInteractionEnabled = YES;
[pencil addTarget:self action:@selector(didTapEditButton:)      forControlEvents:UIControlEventTouchDown];
cell.accessoryView = pencil; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T07:14:14.407

除了 textColor 和 detailTextColor 之外的单元格的修改应该在`willDisplayCell:`方法而不是`cellForRowAtIndexPath`方法中完成，您的问题的解决方案如下 -

```
 -(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cellforIndexPath:(NSIndexPath *)indexPath
{
    UIButton *btn = [UIButton buttonWithType:UIButtonTypeCustom];
    [btn setImage:[UIImage imageName:@"image.png" forControlState:UIControlStateNormal];
    btn.frame = CGRectMake(0,0,28,28) ;

    cell.accessoryView = btn ;

} 
```

这段代码肯定会工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:37:23.980

在自定义单元格的 init 方法中，您可以执行以下操作（假设 ARC btw）：

```
UIImage *customBtnImg = [UIImage imageNamed:@"custom_btn"];
UIButton *customBtn = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, customBtnImg.size.width, customBtnImg.size.height)];
customBtn.backgroundColor = [UIColor clearColor];
[customBtn setBackgroundImage:customBtnImg forState:UIControlStateNormal];
self.accessoryView = customBtn; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:02:12.500

不要使用附件视图，只需放置另一个 imageView 并相应更改

# java - 异步小部件 JSP foreach（Java EE 应用程序）

> ID：13235769
> 
> 赞同：1
> 
> 时间：2012-11-05T16:00:55.107
> 
> 标签：java, jsp, asynchronous, foreach, jstl

我在 JSP 页面中有以下代码：

```
<c:forEach var="widget" items="${widgets}">
        <p><h2>Widget</h2></p>
        <p>IDType: ${widget.id}</p>
        <p>Name: ${widget.name}</p>  
</c:forEach> 
```

目前只会显示文本，但将来还会有图表和图像。我想使用异步加载，因此页面不必等待最大的图像/图表。在互联网上，我找到了 Java 代码的教程，但没有找到 JSP 页面的教程。在 JSP 页面中实现异步加载的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:10:04.493

只需使用不同的 servlet 分别生成这些图像和图表：

```
<c:forEach var="widget" items="${widgets}">
    <p><h2>Widget</h2></p>
    <p>IDType: ${widget.id}</p>
    <p>Name: ${widget.name}</p>  
    <img src="chart-servlet.png?id=${widget.id}"/>
    <img src="image-servlet.png?id=${widget.id}"/>
</c:forEach> 
```

在服务器端将一些 servlet 映射到`chart-servlet.png`和`image-servlet.png`. 然后，您可以使用`id`参数生成适当的图表或图像。从浏览器的角度来看，它首先呈现没有图像的 DOM，然后向服务器请求外部资源（图像）。

# google-maps - 由于 InfoWindow 中心，我如何使地图居中？

> ID：13235772
> 
> 赞同：1
> 
> 时间：2012-11-05T16:01:10.223
> 
> 标签：google-maps, google-maps-api-3

> **可能重复：**
> [是否可以将地图居中在固定位置（lat lng） - 100px？](https://stackoverflow.com/questions/13234295/is-it-possible-to-center-a-map-at-a-fixed-position-lat-lng-100px)

这是我的[代码](http://jsfiddle.net/VFqm5/)：

```
var latlng = new google.maps.LatLng(42.745334,12.738430);
var options = { zoom: 12, center: latlng, mapTypeId: google.maps.MapTypeId.ROADMAP };
var map = new google.maps.Map(document.getElementById('map'), options);
var marker = new google.maps.Marker({ position: latlng, map: map, title: 'Example' });   

var infoWindow = new google.maps.InfoWindow();
var window_content = '<div style="width:110px;height:150px;">Test</div>';
infoWindow.setContent(window_content);
infoWindow.open(map, marker); 
```

如您所见，地图以“位置标记”为中心，而不是以 InfoWindow 高度为中心。我需要在地图的中心有信息窗口的中心，用更少的话。

我该怎么做？

PS我想避免在信息窗口中放置“高边距顶部”的解决方法......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:28:17.703

您必须实际重新定位标记，而不是信息窗口。

你有没有看到我给你的最后一个例子中的标记？

如果是这样，当您拖动它时，您会看到标记重新与信息窗口居中。

在这里，我将您的 infowindow html 添加到其中：http: [//jsfiddle.net/RASG/vA4eQ/10/](http://jsfiddle.net/RASG/vA4eQ/10/)

```
<div style="width:110px;height:150px;">Test</div> 
```

![150像素](../Images/ca2485e73f1a078db68cd8366342b42f.png)

这里有一个 250 像素高的信息窗口

![250像素](../Images/3ba23c38f842634621b2aff3a834ca7b.png)

## 编辑

这是更新代码的最后一部分：

```
var infoWindow = new google.maps.InfoWindow();
var window_content = '<div style="width:110px;height:200px;">Test</div>';
infoWindow.setContent(window_content);

google.maps.event.addListener(marker, 'click', function() {
    infoWindow.open(map, marker);
    map.setCenter(marker.getPosition())
}); 
```

在这里测试它：http: [//jsfiddle.net/RASG/VFqm5/1/](http://jsfiddle.net/RASG/VFqm5/1/)

# c++ - 在 C++ 中预见 std::bad_alloc

> ID：13235782
> 
> 赞同：3
> 
> 时间：2012-11-05T16:01:34.620
> 
> 标签：c++

据我了解，当程序内存不足时，会触发 C++ 中的 std::bad_alloc 异常。有没有办法在我们到达不归路之前监控剩余的内存量并触发一个特殊的例程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:06:05.617

不，但是您可以使用 注册一个处理程序[`std::set_new_handler`](http://en.cppreference.com/w/cpp/memory/new/set_new_handler)，全局的默认实现`operator new()`在循环中执行，直到处理程序不返回或没有注册进一步的处理程序。处理程序本身可能会尝试释放更多内存，或发布日志消息或类似的东西。

但是，分配函数可用内存量的具体细节在很大程度上取决于您的平台和操作系统，所以不要期望太多。

例如，在超额订阅内存的系统上，您的分配可能会成功，但您的程序仍然可能因为系统内存不足而死掉。

# asp.net - ASP.NET 会话 - 根据浏览器更改设置

> ID：13235784
> 
> 赞同：0
> 
> 时间：2012-11-05T16:01:43.220
> 
> 标签：asp.net, asp.net-mvc-3, session

我想根据浏览器动态更改会话信息的设置，基本上我希望 safari 用户使用无 cookie 会话，而非 safari 用户使用基于 cookie 的会话（参见 safari 跨域 cookie 策略！）。

我知道我可以为此使用“UseDeviceProfile”，但我想要做的只是将它设置为 safari 的 true（我也想将 regenerateExpiredSessionId 设置为 true 用于 safari，但我想这可以默认为 true，因为如果 regenerateExpiredSessionId是真的，cookieless 是假的，那么它不应该有任何区别吗？）。

我需要为此创建一个新的浏览器配置文件吗？怎么能这样做呢？

谢谢。

# android - 尝试获取已安装应用程序列表时的 TransactionTooLargeEception

> ID：13235793
> 
> 赞同：13
> 
> 时间：2012-11-05T16:01:59.047
> 
> 标签：android

作为我的应用程序的一部分，我使用 ApplicationPackageManager.getInstalledApplications 获取设备上安装的应用程序列表，但对于某些用户，我收到崩溃报告说

android.osBinderProxy.tranasact 的 TransactionTooLargeException（本机方法）

谁能想到我为什么会得到这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2015-05-05T20:26:36.380

我发现这已在 Android 5.1 上解决（证明[**在这里**](https://paste.teknik.io/1010)，搜索“修复包管理器 TransactionTooLargeExceptions”），因为它在多个地方被报告：

*   [https://code.google.com/p/android/issues/detail?id=95749](https://code.google.com/p/android/issues/detail?id=95749)
*   [https://code.google.com/p/android/issues/detail?id=93717](https://code.google.com/p/android/issues/detail?id=93717)
*   [https://code.google.com/p/android/issues/detail?id=69276](https://code.google.com/p/android/issues/detail?id=69276)

但是，我想为 pre-5.1 解决这个问题，所以我想出了一个解决方案（并建议谷歌将它放在支持库中，here）。这是我建议的简短代码版本：

```
 public static List<PackageInfo> getInstalledPackages(Context context,int flags)
    {
    final PackageManager pm=context.getPackageManager();
    try
      {
      return pm.getInstalledPackages(flags);
      }
    catch(Exception ignored)
      {
      //we don't care why it didn't succeed. We'll do it using an alternative way instead
      }
    // use fallback:
    Process process;
    List<PackageInfo> result=new ArrayList<>();
    BufferedReader bufferedReader=null;
    try
      {
      process=Runtime.getRuntime().exec("pm list packages");
      bufferedReader=new BufferedReader(new InputStreamReader(process.getInputStream()));
      String line;
      while((line=bufferedReader.readLine())!=null)
        {
        final String packageName=line.substring(line.indexOf(':')+1);
        final PackageInfo packageInfo=pm.getPackageInfo(packageName,flags);
        result.add(packageInfo);
        }
      process.waitFor();
      }
    catch(Exception e)
      {
      e.printStackTrace();
      }
    finally
      {
      if(bufferedReader!=null)
        try
          {
          bufferedReader.close();
          }
        catch(IOException e)
          {
          e.printStackTrace();
          }
      }
    return result;
    } 
```

它的作用是先尝试使用官方的方式，然后如果失败，它会使用ADB命令获取包名，并依次获取每个应用程序的信息。

它比官方慢得多，但对我来说并没有崩溃。我已经在 Android 模拟器（包括 2.3.x 到 5.0.x）以及真实设备上对其进行了测试。

在我的设备（带有 Android 5.1 自定义 ROM 的 Galaxy S3）上花费的时间是 1375-2012 毫秒（总共 197 个应用程序），而使用官方方式则为 37-65 毫秒。

* * *

编辑：人们在这里声称它没有固定在 Android 5.1 上。我希望它在 Android 6 上得到修复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T17:32:35.933

在正常情况下，这种异常很难重现。当传输数据时 IPC 内存耗尽时，您将收到此异常。这可能发生在两种情况下，服务试图将数据放置到客户端或客户端正在将数据发送到服务。很可能您的一些用户可能已经安装了大量的应用程序，这导致数据大小大于 1MB（这是 IPC 缓冲区的大小）。

恐怕在这种情况下，你不会做得更好。但是，如果您正在执行类似 applyBatch 的操作，您可以将一个大事务拆分为多个较小的事务。

也看看这个线程[What to do on TransactionTooLargeException](https://stackoverflow.com/questions/11451393/what-to-do-on-transactiontoolargeexception/12809171#12809171)

# c# - Mono for Android 发布错误

> ID：13235794
> 
> 赞同：0
> 
> 时间：2012-11-05T16:01:59.567
> 
> 标签：c#, android

我正在使用 Mono for Android (C#)。我正在尝试使用 MonoDevelop 获取 .apk 文件，但是当我设置要发布的项目时（使用本指南：[LINK](http://docs.xamarin.com/Android/Guides/Deployment,_Testing,_and_Metrics/publishing_an_application/Part_1_-_Preparing_an_Application_for_Release)）我收到此错误：

> 错误 MSB4018：“GenerateJavaStubs”任务意外失败。System.InvalidOperationException：/manifest/@package 属性必须包含句点 ('.')。在 Xamarin.Android.Tasks.ManifestDocument.Merge(List `1 subclasses, List`1 selectedWhitelistAssemblies, Boolean embed) 在 Xamarin.Android.Tasks.GenerateJavaStubs.Execute() 在 Microsoft.Build.BackEnd.TaskExecutionHost.Microsoft.Build.BackEnd.ITaskExecutionHost.Execute()在 Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask（ITaskExecutionHost taskExecutionHost、TaskLoggingContext taskLoggingContext、TaskHost taskHost、ItemBucket 存储桶、TaskExecutionMode howToExecuteTask、Boolean& taskResult）（MSB4018）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T08:49:53.463

你的包名是什么样的？Android 要求包名称至少包含一个点。

# loops - 用for循环做一个三角形

> ID：13235795
> 
> 赞同：-2
> 
> 时间：2012-11-05T16:02:01.550
> 
> 标签：loops, for-loop, geometry

```
 for(int i=0;i<4;i++)
    {
        for(int j=0;j<=i;j++)
        {
            cout<<"$";
        }

        cout<<"\n";
    } 
```

代码显示了一个直角三角形，但我需要修改它以获得一个完整的三角形。我不能发布形状，但我需要修改代码才能制作这样的东西>。换句话说，我需要修改此代码以翻转直角三角形并将其连接到我拥有的那个并制作一个完整的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:04:40.613

最简单的方法是添加第二个循环，从`2`到`0`：

```
// Your first loop goes here
// After that, use this second loop:
for(int i=2;i>=0;i--)
{
    for(int j=0;j<=i;j++)
    {
        cout<<"$";
    }

    cout<<"\n";
} 
```

这将[打印](http://ideone.com/c35rwh)一个如下所示的三角形：

```
$
$$
$$$
$$$$
$$$
$$
$ 
```

# javascript - 使用 Javascript 进行 XML 解析

> ID：13235804
> 
> 赞同：-3
> 
> 时间：2012-11-05T16:02:34.733
> 
> 标签：javascript, xml-parsing

我有一个包含多条记录的 XML 文件，我想在一页上显示所有记录。我已经写了一些代码，但它并没有帮助我。这里有些标签是可选的，所以我怎样才能在它没有出现的可选标签中显示“--”？

## XML 文件

```
<doctors>
    <doctor specialization="Gynaecologist">
        <name>Alex Mashkin</name>
        <bachelor_degree>MBBS</bachelor_degree>
        <master_degree>Master in Gynaecology</master_degree>
        <experience>7 Years</experience>
        <available_timings>12PM to 5PM</available_timings>
        <fees>500</fees>
        <operation_charges>20000</operation_charges>
        <special_visit_charges>1000</special_visit_charges>
    </doctor>
    <doctor specialization="Sergeon">
        <name>Dazy Deepy</name>
        <bachelor_degree>MBBS</bachelor_degree>
        <master_degree>Master in Surgery</master_degree>
        <experience>10 Years</experience>
        <available_timings>11AM to 2PM</available_timings>
        <fees>900</fees>
        <operation_charges>25000</operation_charges>
        <special_visit_charges>1800</special_visit_charges>
    </doctor>
    <doctor specialization="Dentist">
        <name>Mona Bralia</name>
        <bachelor_degree>BDS</bachelor_degree>
        <experience>3 Years</experience>
        <available_timings>4PM to 8PM</available_timings>
        <fees>300</fees>
        <special_visit_charges> 600</special_visit_charges>
    </doctor> </doctors> 
```

## HTML 代码

（片段）

```
<script type="text/javascript">
    if (window.XMLHttpRequest) {
        //Code for IE7,Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        //code for IE6,IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET", "XMLFile.xml", false);
    xmlhttp.send();
    xmlDoc = xmlhttp.responseXML;

    document.write("<table border='1'>");
    var x=xmlDoc.getElementsByTagName("doctor");
    for (i=0;i<x.length;i++)
      { 
      document.write("<tr><td>");
      document.write(x[i].getElementsByTagName("name")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getAttribute("specialization"));
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("bachelor_degree")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("master_degree")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("experience")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("available_timings")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("fees")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("operation_charges")[0].childNodes[0].nodeValue);
      document.write("</td><td>");
      document.write(x[i].getElementsByTagName("special_visit_charges")[0].childNodes[0].nodeValue);
      document.write("</td></tr>");
      }
    document.write("</table>");

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:12:25.847

因此，您想要迭代所有`<doctor>`元素，并检查每个元素的子元素。这意味着您不能只`xmlDoc.getElementsByTagName("master_degree")`从文档中获取所有内容并认为它`i`与当前医生匹配，因为有些医生没有`<master_degree>`元素。相反，通过申请医生本身来检查每个人`getElementsByTagName`，并计算您选择了多少硕士学位（可能没有，可能不止一个？）。

```
// a mapping from HTML ids to XML tag names, to make it more programmatical
var map = {dname:"name", bdegree":"bachelor_degree", mdegree:"master_degree", exp:"experience", availibity:"available_timings, fee:"fees", opcharge:"operation_charges", spcharge:"special_visit_charges"};
// and from HTML ids to XML attribute names of the doctor
var attrmap = {spec:"specialisation"};

… // load XML etc - you should do it asynchronous, btw
var doctors = xmlDoc.getElementsByTagName("doctor"),
    doctorCount = doctors.length;
for (var i=0; i<doctorCount; i++) {
    var doc = doctors[i];
    for (var id in map) {
        var elements = doc.getElementsByTagName(map[id]),
            var result = "";
        if (!elements.length)
            result = "---";
        for (var j=0; j<elements.length; j++)
            if (elements[i].firstChild)
                result += elements[i].firstChild.data;
        document.getElementById(id).innerText += result;
    }
    for (var id in attrmap) {
        document.getElementById(id).innerText += doc.getAttribute(attrmap[id]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T11:35:07.673

经过大量研究，我找到了用属性迭代所有元素的最短方法。这是代码：

```
<script type="text/javascript">
if (window.XMLHttpRequest)
{
    //Code for IE7,Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else
{
    //code for IE6,IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET", "XMLFile.xml", false);
xmlhttp.send();
xmlDoc = xmlhttp.responseXML;
y=xmlDoc.documentElement.childNodes;
for (i=0;i<y.length;i++)
{
    if (y[i].nodeType!=3)
    {
        //This code for printing attribute of a tag(you have to give attribute name).
        document.write("<br>" + y[i].getAttributeNode('specialization').nodeName + ":  ");
        document.write(y[i].getAttributeNode('specialization').nodeValue + "<br>");
        for (z=0;z<y[i].childNodes.length;z++)
        {
            if (y[i].childNodes[z].nodeType!=3)
            {
                            //This is for Node Name.
                document.write(y[i].childNodes[z].nodeName + ": ");
                            //This is for Node Value.
                document.write(y[i].childNodes[z].textContent + "<br>");
            }
        }
    }
}
</script> 
```

# symfony - 更改 WhiteOctober TCPDF 捆绑配置值

> ID：13235808
> 
> 赞同：4
> 
> 时间：2012-11-05T16:02:46.090
> 
> 标签：symfony, tcpdf, symfony-2.1

我已经开始在我的 symfony 项目中使用 WhiteOctober TCPDF 包，但我不知道如何更改默认配置值，例如页面格式。我试过把它放在我的 config.yml 中：

```
white_october_tcpdf:
    tcpdf:
        k_tcpdf_external_config: true
        pdf_page_format: 'LETTER'
        pdf_author: 'Company Name'
        pdf_header_title: 'Order Confirmation'
        pdf_header_string: 'Company Name'
        pdf_header_logo: '%kernel.root_dir%/../web/images/logo.png'
        pdf_header_logo_width: '35'
        pdf_margin_header: 15
        pdf_margin_footer: 15
        pdf_margin_top: 25
        pdf_margin_bottom: 25
        pdf_margin_left: 25
        pdf_margin_right: 25 
```

但他们在打电话时完全被忽略了

```
$pdf = $this->get('white_october.tcpdf')->create(); 
```

在我的控制器中。生成的 PDF 仍为 A4 格式，没有页眉和默认边距。

我是否缺少使捆绑包采用我的自定义配置的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-29T14:55:39.350

我也有同样的问题。更改供应商代码不是最佳实践。我的解决方法如下：

我在我的 src 文件夹中创建了一个新类“CustomWhiteOctoberTCPDBundle”。

```
namespace TCPDFBundle;
use Symfony\Component\HttpKernel\Bundle\Bundle;

class CustomWhiteOctoberTCPDFBundle extends Bundle
{
 public function getParent()
    {
        return 'WhiteOctoberTCPDFBundle';
    }  
    public function boot() {
         //Put modified method as mentioned in the previous answer

    }
}

On AppKernel.php put:
    public function registerBundles()
    {
        $bundles = array(...
            new WhiteOctober\TCPDFBundle\WhiteOctoberTCPDFBundle(),
            new TCPDFBundle\CustomWhiteOctoberTCPDFBundle(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-17T19:23:12.353

您需要编辑 vendor/tecnick.com/tcpdf/config 文件夹中的 tcpdf_config.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T03:30:05.293

添加此代码...

```
 if (preg_match("/^pdf_/i", $k)) {
                if (!defined($constKey)) {
                    define($constKey, $v);
                }
            } 
```

到捆绑文件

```
 /vendor/whiteoctober/tcpdf-bundle/WhiteOctober/TCPDFBundle/WhiteOctoberTCPDFBundle.php 
```

原始文件[https://github.com/wrep/TCPDFBundle/blob/master/WrepTCPDFBundle.php](https://github.com/wrep/TCPDFBundle/blob/master/WrepTCPDFBundle.php) 目前仅匹配以开头的配置参数`^k` 此捆绑包的配置选项显示在这里

[https://github.com/wrep/TCPDFBundle/blob/master/WrepTCPDFBundle.php](https://github.com/wrep/TCPDFBundle/blob/master/WrepTCPDFBundle.php)

我不得不从 tcpdf_config.php 添加一些配置参数，这些参数没有在上面的文档配置示例中列出。这是我完整的 white_october_tcpdf: 部分`app/config/config.yml`

```
...ober_tcpdf:
file:                 %kernel.root_dir%/../vendor/tecnick.com/tcpdf/tcpdf.php
class:                TCPDF
tcpdf:
    k_path_url:           %kernel.root_dir%/../vendor/tecnick.com/tcpdf/
    k_path_main:          %kernel.root_dir%/../vendor/tecnick.com/tcpdf/
    k_path_fonts:         %kernel.root_dir%/../vendor/tecnick.com/tcpdf/fonts/
    k_path_cache:         %kernel.cache_dir%/tcpdf
    k_path_url_cache:     %kernel.cache_dir%/tcpdf
    k_path_images:        %kernel.root_dir%/../vendor/tecnick.com/tcpdf/examples/images/
    k_blank_image:        %kernel.root_dir%/../vendor/tecnick.com/tcpdf/examples/images/_blank.png
    k_cell_height_ratio:  1.25
    k_title_magnification:  1.3
    k_small_ratio:        0.66666666666667
    k_thai_topchars:      true
    k_tcpdf_calls_in_html:  true
    k_tcpdf_external_config:  true
    head_magnification:   10
    pdf_page_format:      LETTER
    pdf_page_orientation:  P
    pdf_creator:          TCPDF
    pdf_author:           TCPDF
    pdf_header_title:  Example Title
    pdf_header_string: "this is motto - My Company\nwww.mycompany.org" 
    pdf_header_logo: ../../../../../web/bundles/home/images/peas.jpg    
    pdf_header_logo_width: 30
    pdf_unit:             mm
    pdf_margin_header:    5
    pdf_margin_footer:    10
    pdf_margin_top:       27
    pdf_margin_bottom:    25
    pdf_margin_left:      15
    pdf_margin_right:     15
    pdf_font_name_main:   helvetica
    pdf_font_size_main:   10
    pdf_font_name_data:   helvetica
    pdf_font_size_data:   8
    pdf_font_monospaced:  courier
    pdf_image_scale_ratio:  1.25 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T06:55:57.903

好吧，刚才我解决了同样的问题：

你需要像 mirk 说的那样定义你需要的常量，

```
white_october_tcpdf:
tcpdf:
  .
  .
  . 
```

那么您需要使用此代码更改类：/vendor/whiteoctober/tcpdf-bundle/WhiteOctober/TCPDFBundle/WhiteOctoberTCPDFBundle.php

```
 // All K_ and _pdf constants are required
            if (preg_match("/^k_/i", $k) OR preg_match("/^pdf_/i", $k)) {
                if (!defined($constKey)) {
                    $value = $this->container->getParameterBag()->resolveValue($v);
                    if (($k === 'k_path_cache' || $k === 'k_path_url_cache') && !is_dir($value)) {
                        $this->createDir($value);
                    }

                    define($constKey, $value);
                }
            } 
```

匹配两种常量类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-21T14:50:58.670

这已在WhiteOctoberTCPDFBundle（2018 年 6 月 21 日发布）的[1.1.0 版中解决：](https://github.com/whiteoctober/WhiteOctoberTCPDFBundle/releases/tag/1.1.0)

> 修复问题“未加载自定义配置参数”（PR [#45](https://github.com/whiteoctober/WhiteOctoberTCPDFBundle/pull/45)）

因此，更新您的捆绑包版本现在应该可以解决此问题 - 您可以添加其他配置而无需更改代码。

以前，只读取以开头的配置值`k_`，现在全部读取。

# bash - 逐行读取变量而不吞噬 \ 字符

> ID：13235812
> 
> 赞同：2
> 
> 时间：2012-11-05T16:02:54.443
> 
> 标签：bash, quoting

我正在使用此代码段逐行读取变量：

```
echo "${lines}" | while read line; do something with ${line}; done 
```

`lines`包含新行和`\`字符的出现（`line`将被解释为`C`字符串）。不幸的是，在这段代码的某个地方，`\`字符被简单地剥离了。为什么，我该如何解决？

编辑：示例输入是这样的：

```
foo $'bar'
fee $'ber\fbir' 
```

请注意，只有`\`被剥离，而不是`$''`稍后将用于将字符串解释为`C`字符串的 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:09:36.660

您可以转义您的`\`角色，以便它们仍然存在于您的 中`read line`，如下所示：

```
echo "${lines}" | sed 's/\\/\\\\/g' | while read line; do something with ${line}; done 
```

**更新**：经过一些测试，我刚刚更新了上面的 sed 行，现在试试，它对我有用。

**更新2**：看来jordanm删除了他使用比我更好的方法的答案，我会自己在这里添加：

使用命令的`-r`参数`read`，它指示它不要转义斜杠，所以这也可以：

```
echo "${lines}" | while read -r line; do something with ${line}; done 
```

# java - 在配置中设置批量大小

> ID：13235818
> 
> 赞同：2
> 
> 时间：2012-11-05T16:03:45.380
> 
> 标签：java, hibernate

我正在使用休眠 3.2.5。`hibernate.jdbc.batch_size`休眠配置文件中该语句的确切用途/含义是什么？

从文档中，我可以看到我们需要在配置中添加这一行以进行批处理，否则默认情况下禁用批处理。除此之外，将上述行分配给数字的具体原因是什么？

这**不像**我将它分配给 30（假设）然后我的批次将能够插入/更新/删除最多 30 行，我在本地测试了这个东西。那么我们为此分配的数字有什么用呢？

请让我知道这件事。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:12:35.617

只是为了解释一下：例如，你有一个实体`Parent`，它`one-to-many`与另一个实体有关系`Child`，初始化为`lazy`。

通过定义`hibernate.jdbc.batch_size = 30`，您的意思是当您尝试`Child`从`Parent`实体获取实体时，**它将一次以 30 个**即`30 Child`对象的批量大小加载它们，如果可用的对象数量为 30 或更多。

例如，如果`Parent has 100 Child`对象延迟加载，现在您正在迭代`Child`对象，它将在后端触发 4 个查询以加载`30, 30, 30 and 10`.

希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:51:02.253

JDBC 批量更新允许在一个批次中向数据库发送多个更新查询。它减少了网络调用的数量。您可以将其视为上传包含 20 个文件的未压缩 zip，而不是单独发送 20 个文件。

# c# - 在 xtragrid 中显示关系表中的值

> ID：13235821
> 
> 赞同：1
> 
> 时间：2012-11-05T16:03:52.180
> 
> 标签：c#, winforms, devexpress

我在显示关系表中的值时遇到问题。例如，我有 table: Person ，我有类似`id`, `pet_id`,的列`name`。另一张桌子是 Dog with `id`and `name`。

我想列出所有带有 和 列的`id`Persons 。但我喜欢将狗放在单元格中而不是Pet 表中。我创建了关系，并从列表中选择：但它不起作用。列中的所有单元格都是空的。`pet_id``name``name``pet_id``id``Person_Dog_Relation``FieldName``Person_Dog_Relation.name``pet_id`

我如何才能`pet_id`用 dog填充列的单元格`name`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T13:11:04.403

参考您的[评论](https://stackoverflow.com/questions/13235821/display-values-from-relation-table-in-xtragrid#comment18056338_13235821)，您不需要从关系中分配字段名称。

而是将 LookUpEdit 添加到包含**Pet_id**[的](http://documentation.devexpress.com/#WindowsForms/clsDevExpressXtraEditorsLookUpEdittopic)列。

 **从宠物表中分配lookupedit数据源并将**Pet_id**设置为`ValueMember`，将**Pet_Name**设置为`DisplayMember`**

# .htaccess - 使用 htaccess 从 URL 中去除域名

> ID：13235822
> 
> 赞同：2
> 
> 时间：2012-11-05T16:03:53.730
> 
> 标签：.htaccess, mod-rewrite

我什至不确定这是否可能，但一直在到处寻找解决方案。我的网站生成有关域名的动态信息，人们可以按以下格式查看他们的信息：

```
http://www.mysite.com/analyze/yourdomain.com 
```

问题是有时人们会输入 http:// 或 www 甚至完整的 URL 而不是他们的域，例如：

```
http://www.mysite.com/analyze/http://www.yourdomain.com/this-is-a-test 
```

我想用 htaccess 做的是获取域名并将其重定向到正确的 URL，如列出的第一个。

这是我目前为我的 htaccess 所拥有的：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteCond %{REQUEST_URI} !\.(xml|txt)$
RewriteRule ^(.*)$ http://www.mysite.com/review/$1 [R=301,L]

Options -MultiViews +FollowSymlinks -Indexes

RewriteEngine on
RewriteCond %{REQUEST_URI} !\.(xml|txt)$
RewriteRule ^([a-zA-Z0-9\.\-]+)$ review.php?site=$1 [L,QSA] 
```

我遇到的主要问题是，我发现的每个关于剥离/重定向域的教程都适用于我的实际域名，而不是 URL 中的用户。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:45:13.803

尝试在您的第一条规则下方添加 thie（即 301 重定向）：

```
RewriteRule ^analyze/http:/+([^/]+)/? /analyze/$1 [L,R=301] 
```

这会将请求重定向`http://www.mysite.com/analyze/http://www.yourdomain.com/this-is-a-test`到`http://www.mysite.com/analyze/yourdomain.com`.

# ios6 - 单击原型单元格中的 UIImage 以执行 segue 不起作用

> ID：13235824
> 
> 赞同：0
> 
> 时间：2012-11-05T16:04:04.727
> 
> 标签：ios6, uistoryboard, xcode4.5, uistoryboardsegue

我正在为 ios6 开发一个带有情节提要的 xcode 应用程序。我有一个带有原型单元格的 TableView。每个单元格中都有一个 UIImageView。我尝试在图像上执行 segue。

为此，我启用了图像用户交互。我在图像上拖动了一个 Tap Gesture Recognizer 并将 segue 连接到另一个视图。我的故事板上出现以下错误：非法配置：手势识别器不能用于原型对象。

我的问题是：我做错了什么吗？这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:15:46.627

您应该使用 UIButton 而不是 UIImageView 来链接该 segue。

# asp.net-mvc - 如何在 ASP.net MVC 中按名称对所有下拉列表进行排序

> ID：13235827
> 
> 赞同：0
> 
> 时间：2012-11-05T16:04:19.543
> 
> 标签：asp.net-mvc

是否可以自动对 ASP.net MVC 项目中的所有下拉列表进行排序？

我不想一个一个地去明确地对它们进行排序。有没有办法在项目中的所有下拉列表上自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T23:28:28.807

创建一个`HtmlHelperExtensions`具有扩展方法的类，该方法可以满足您的需求。像这样的东西：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString SortedDropDownList(this HtmlHelper htmlHelper, string name, IEnumerable<SelectListItem> selectList)
    {
        return htmlHelper.DropDownList(name, selectList.OrderBy(x => x.Text));
    }
} 
```

无论您将帮助程序放在哪个名称空间中，请确保将其添加到文件夹`configuration\system.web.webPages.razor\pages\namespaces`中的 web.config 中，`\Views`以便您可以在视图中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T00:29:39.020

您可以创建 HtmlHelperExtension 类作为 friism sugested，或者您可以像这样在 SelectList 上创建扩展方法：

```
public static class SortedList
{
        public static void SortList(this SelectList selectList, SortDirection direction)
        {
            //sort content of selectList
        }
} 
```

然后像这样使用它：

```
var sel = new SelectList(new List<string> {"john", "mary", "peter"});
sel.SortList(SortDirection.Ascending); 
```

无论哪种方式，您都将更改要对这些列表进行排序的每一行代码。

# eclipse - 从标签中检出 IDE CVS

> ID：13235830
> 
> 赞同：0
> 
> 时间：2012-11-05T16:04:26.333
> 
> 标签：eclipse, cvs, vcs-checkout

我想知道是否有一种干净的方法可以从 cvs 存储库的角度从 CVS 中检查给定标记的代码（从生产标记到维护和修补该工作空间）。

我知道我们可以从 head 中检查代码并用标签替换所有项目。但是，如果我必须通过创建新的工作区来干净地做到这一点，然后只需给出一个标签，检查与该标签关联的所有文件和项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:13:54.810

您可以使用[CVS Repositories 视图](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-32.htm&cp=0_4_2_4)或[CVS Checkout 向导](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/reference/ref-40a.htm)来签出特定的 TAG 。

# gyp - 在 gyp 中指定编译器

> ID：13235831
> 
> 赞同：3
> 
> 时间：2012-11-05T16:04:28.123
> 
> 标签：gyp

我是第一次使用 gyp，我已经阅读了它的在线帮助。我在命令行的导出变量中使用 CC 选项设置了编译器（在 Windows 中使用 cygwin）。因此，所有文件都可以正确编译。现在，我想用不同的编译器编译几个文件。所以，我这样指定它：

'target_name'：'LIBADD'，

“类型”：“静态库”，

'CC' : '/cygdrive/c/cygwin/bin/gcc',

但是，它仍然需要为此目标使用导出定义的编译器。

另外，我有 5 个文件，我需要为此制作目标文件，指定不同的不同编译器选项。然后，我需要从所有这些 .o 文件中创建一个静态库。这可能吗？如果如何？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T08:55:23.507

这可能会对您有所帮助：[https ://code.google.com/p/v8/wiki/BuildingWithGYP#Clang_+_make](https://code.google.com/p/v8/wiki/BuildingWithGYP#Clang_+_make)

您需要添加一些导出（使用 clang 编译器的示例）

```
export CC=/path/to/clang
export CXX=/path/to/clang++
export GYP_DEFINES="clang=1" 
```

# jquery - jqGrid 'setGridHeight' 没有在 IE 中触发

> ID：13235834
> 
> 赞同：0
> 
> 时间：2012-11-05T16:04:36.300
> 
> 标签：jquery, jqgrid

我正在向我的 jqGrid 标题栏添加自定义增长/缩小按钮，以允许用户更改网格的高度。以下代码在 Firefox 和 Chrome 中完美运行，但在 Internet Explorer（版本 8）中无法正常运行。在 IE 中，调用 setGridHeight 之前和之后的警报正常工作，但网格没有调整大小。（不幸的是，IE 是企业的默认浏览器。）有没有人遇到过类似的问题或知道解决方案？

```
var expand = "alert('start'); 
 $('#grid').jqGrid('setGridHeight', 
 $(window).innerHeight()/1.5); 
 alert('end');";    
$("#gview_grid .ui-jqgrid-titlebar").append 
 ('<a class="ui-jqgrid-titlebar-close HeaderButton"  role="link" style="right: 30px;">
  <span id= "grid_plus" class="ui-icon ui-icon-circle-plus" onClick = "'+expand+'"></span> </a>'); 
```

![标题栏上的扩大/缩小按钮](../Images/69fa8bb565ff09396c20da5b6f19d979.png)

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:39:26.630

如果您将扩展创建为函数，它会有所帮助吗？

```
 var expand = function(){/*...
   */} 
```

并从您的标记中将其称为`expand()`?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:59:25.900

在创建一个发布到 jsfiddle 的简化示例时，我发现原始发布的代码确实在 IE 中工作。问题是我已将网格的大小绑定到窗口调整大小功能（显然 IE 不喜欢那样）。

```
$(window).bind('resize', function() {
    $('#grid').jqGrid('setGridHeight', $(window).innerHeight()/3);  
}).trigger('resize'); 
```

我仍在研究解决方案，以便它们可以在 IE 中协同工作，但现在至少我们知道问题出在哪里。

# itextsharp - 预填充然后锁定

> ID：13235835
> 
> 赞同：2
> 
> 时间：2012-11-05T16:04:38.937
> 
> 标签：itextsharp

我们有一个 PDF 表单库，其中包含可填写的字段，可以在 Adob​​e Reader 中打开并由我们的最终用户填写。请注意，我们不是生成 PDF，而是简单地使用现有的 PDF。所有这些表单都受到保护，无法通过密码在 Acrobat 中编辑不可填写的字段。

问题是，当我们在代码中打开 PDF 以预填充某些字段时，密码保护会丢失，并且提供的表单可以在 Acrobat 中编辑。

所以：

1.  有没有办法在不解锁 PDF 和生成的输出流的情况下使用 iTextSharp 预填充可填充字段？
2.  有没有办法重新锁定表单，同时仍然允许最终用户在 Reader 中打开、填写可填写字段、打印等，而无需密码？

这是我们当前使用的代码的简化示例。我们已尝试锁定输出流（代码当前不可用），但文件无法锁定，然后阅读器提示用户输入密码。

```
System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
Byte[] password = encoding.GetBytes("secretPassword");
PdfReader reader = null;
MemoryStream outputStream = null;
PdfStamper stamper = null;
pdfStream.Seek(0, SeekOrigin.Begin);
reader = new PdfReader(pdfStream, password);
outputStream = new MemoryStream();
stamper = new PdfStamper(reader, outputStream);

AcroFields fields = stamper.AcroFields;
fields.SetField("prefillField1", "Some text");
stamper.Close();
outputStream.Close();
reader.Close();
// outputStream sent to user/browser. PDF opens in Reader, but the form can be opened in 
// Acrobat without a password and edited. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T20:42:38.703

如果 PDF 受密码保护，您将无法编辑它。你会喜欢你必须用密码打开它来编辑它。这样看来，您正在创建该文档的副本并呈现给用户。您可以使用编辑密码加密 PDF。这是我发现与 itextsharp 一起使用的方法的副本。如果您将`editPassword`while 设置为`openPassword`空，那么您的用户应该能够查看 pdf 并与之交互，但无法根据您设置的权限对其进行编辑。希望这可以帮助。

```
 /// <summary>
    /// Adds the given Open (User) and Edit (Owner) password to the PDF and optionally sets
    /// the various Allow/Not Allowed restrictions
    /// </summary>
    /// <param name="openPassword">Open/User password</param>
    /// <param name="editPassword">Edit/Owner password</param>
    /// <param name="allowAssemply">Assembly means merging, extracting, etc the PDF pages</param>
    /// <param name="allowCopy">Copy means right-click copying the content of the PDF to the system</param>
    /// <param name="allowDegradedPrinting">Can print low quality version of the PDF</param>
    /// <param name="allowFillIn">Can insert data into any AcroForms in the PDF</param>
    /// <param name="allowModifyAnnotations">Modification of any annotations</param>
    /// <param name="allowModifyContents">Modification of any content in the PDF</param>
    /// <param name="allowPrinting">Allows printing at any quality level</param>
    /// <param name="allowScreenReaders">Allows the content to be parsed/repurposed for screen readers</param>
    public byte[] GetEncryptedPDF(byte[] pdf,
         string openPassword, string editPassword,
         bool allowAssemply, bool allowCopy,
         bool allowDegradedPrinting, bool allowFillIn,
         bool allowModifyAnnotations, bool allowModifyContents,
         bool allowPrinting, bool allowScreenReaders)
    {
        int permissions = 0;
        if (allowAssemply) 
            permissions = permissions | PdfWriter.ALLOW_ASSEMBLY;
        if (allowCopy) 
            permissions = permissions | PdfWriter.ALLOW_COPY;
        if (allowDegradedPrinting)  
            permissions = permissions | PdfWriter.ALLOW_DEGRADED_PRINTING; 
        if (allowFillIn) 
            permissions = permissions | PdfWriter.ALLOW_FILL_IN; 
        if (allowModifyAnnotations) 
            permissions = permissions | PdfWriter.ALLOW_MODIFY_ANNOTATIONS; 
        if (allowModifyContents) 
            permissions = permissions | PdfWriter.ALLOW_MODIFY_CONTENTS; 
        if (allowPrinting) 
            permissions = permissions | PdfWriter.ALLOW_PRINTING; 
        if (allowScreenReaders) 
            permissions = permissions | PdfWriter.ALLOW_SCREENREADERS; 

        PdfReader reader = new PdfReader(pdf);
        using (MemoryStream memoryStream = new MemoryStream())
        {
            PdfEncryptor.Encrypt(reader, memoryStream, true, openPassword, editPassword, permissions);
            reader.Close();
            return memoryStream.ToArray();
        }
    } 
```

# c# - JAVA加密Base64+XOR+UTF8，C#解密

> ID：13235837
> 
> 赞同：2
> 
> 时间：2012-11-05T16:04:41.580
> 
> 标签：c#, java, base64

我有简单的加密函数，它接受字符串，将其转换为字节，对其进行异或并应用 base64。

爪哇：

```
String key = "1234";
public String encrypt(String plainText) throws Exception {

    byte [] input = plainText.getBytes("UTF8");
    byte [] output = new byte[input.length];
    for(int i=0; i<input.length; i++)
        output[i] = ((byte)(input[i] ^ key.charAt(i % key.length())));

    String utf8 = new String(output);
    return Utils.encode(utf8); 
} 
```

然后我将它保存到一个文件中，并使用以下解密方法在 C# 中的另一个应用程序中打开它：

C＃：

```
string key="1234";
public string Decrypt(string CipherText)
{
    var decoded = System.Convert.FromBase64String(CipherText);
    var dexored = xor(decoded, key);
    return Encoding.UTF8.GetString(dexored);
}

byte[] xor(byte[] text, string key)
{
    byte[] res = new byte[text.Length];

    for (int c = 0; c < text.Length; c++)
    {
        res[c] = (byte)((uint)text[c] ^ (uint)key[c % key.Length]);
    }

    return res;
} 
```

问题是像ěščřžýáí 这样的重音字符无法解码。

您是否知道如何确定问题来自哪个部分或如何找出问题？在我看来，它与 UTF-8 有关。

我不需要更好的加密建议。我已经在使用 AES，但由于性能问题，我想切换到 xored base64。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:07:43.200

这就是问题：

```
String utf8 = new String(output);
return Utils.encode(utf8); 
```

您应该在此处使用 base64 `output`，而不是从现在不是真正的文本数据中构造一个字符串。有可能`Utils.encode`执行 base64 编码，出于某种原因将输入字符串转换*回*字节 - 但从根本上说，您不应该使用构造函数使用加密字节构造字符串`String`。

如果你的`Utils`类有一个`encode(byte[])`方法 - 如果它真的*对*数据进行 base64 编码（只有你正在使用的代码的一半是非常令人沮丧的），那么你可以使用：

```
return Utils.encode(output); 
```

# jquery - 从一个元素获取 css 属性并应用于另一个元素

> ID：13235839
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:04:55.620
> 
> 标签：jquery

**CSS：**

```
#foo1 { color: #FFF; border: 1px solid #000; } 
```

**html:**

```
<div id="foo1"></div>
<div id="foo2"></div> 
```

**js：**

我知道我可以使用 css 键一一获取值，但是有没有办法一次获取所有 css 属性并应用这些值。像这样的东西：

```
$(function(){
    $('#foo2').css($('#foo1').css());
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:07:06.850

您可以将样式设置为一个类，然后只需使用 addClass 将样式应用于第二个 div。

```
.foo-style { color: #FFF; border: 1px solid #000; }

<div id="foo1" class="foo-style"></div>
<div id="foo2"></div>

$(function(){
   $('#foo2').addClass('foo-style');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:19:10.503

这似乎在 jsfiddle 中有效，但我希望它只在野外适用于内联样式，但没有在 jsfiddle 之外对其进行测试：

```
$("#foo2").css('cssText', $("#foo1").css('cssText')); 
```

[**小提琴**](http://jsfiddle.net/6hfXU/1/)

# c++ - 跳过for循环，为什么？

> ID：13235841
> 
> 赞同：1
> 
> 时间：2012-11-05T16:05:01.337
> 
> 标签：c++, for-loop

我有一个任务，我必须在 C++ 中创建一个控制台程序，以给定的样式绘制六边形。我遇到的问题是；我的 For 循环从未进入，我不知道为什么。这是我遇到问题的代码片段。

```
 void display()
{
    int counter=0;//var that keeps track of the layer that is being drawn
    for(int i=0;i>=size;i++)//spaces before first layer of hexagon
    {
        cout<<" ";
    }
    for (int k=0; k>size;k++)//top layer of hexagon
    {
        cout<<"_";
    }
    cout<<endl;//ends the first layer
    for (counter; counter>=size-1;counter++)//outer loop for the top half that controls the size
    {
        for( int j=0;j>(size-counter);j++)//adds spaces before the shape
        {
            cout<<" ";
        }
        cout<<"/";
        for( int p=0; p>(size+(counter*2));p++)//loop for the hexagon fill
        {
            cout<<fill;
        }
        cout<<"\\"<<endl;
    }
    for(counter;counter==0;counter--);  //loop for bottom half of the hexagon
    {
        for( int j=0;j>(size-counter);j++)//adds spaces before the shape
        {
            cout<<" ";
        }
        cout<<"\\";
        for( int p=0; p>(size+(counter*2));p++)//loop for the hexagon fill
        {
            cout<<fill;
        }
        cout<<"/"<<endl;
    }
    cout<<"\\";
    for(int r=0; r>=size;r++){cout<<"_";}
    cout<<"/"<<endl;

} 
```

'Size' 和 'fill' 是在我的 main() 期间在程序的早期选择的，我可能遗漏了一些非常简单的东西，但我已经为此苦苦挣扎了一段时间。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:07:22.663

您的循环使用`>`并从 0 开始。看来您想要的是`<`。例如

```
for(int i=0;i<size;i++)//spaces before first layer of hexagon
{
    cout<<" ";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:09:45.057

我不确定你的`size`变量的内容是什么，但看起来你的循环条件错误：

```
for(int i=0;i>=size;i++) 
```

可能应该是：

```
for(int i=0;i<size;i++) 
```

其他循环也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T16:07:47.113

假设你`size`是一个正数，它会根据你的情况工作。`>`将conditojs更改为`<`您的条件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T16:08:01.600

在您的条件下，将 > 反转为 <

< 表示劣势，你想做一个

```
for i = 0; if i < size; i++ 
```

你做

```
for i = 0 ; if i > size ; i ++ 
```

如果 size 优于 i (0) 则循环永远不会触发

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T16:08:22.397

你的 < 和 > 不是全部颠倒了吗？因为

```
(int k=0; k>size;k++) 
```

对我来说没有意义。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-05T16:08:26.400

`for`C++ 中的循环是*while*循环，而不是*until*循环。

C++ 只有*while*循环（含义为*as long*）：

```
for (int i=0; i<10; ++i)
    ....

int i=0;   
while (i<10) {
    ....
    ++i;
} 
```

# hibernate - 自引用实体的休眠条件查询；结果不正确

> ID：13235842
> 
> 赞同：1
> 
> 时间：2012-11-05T16:05:07.760
> 
> 标签：hibernate, jpa, hibernate-criteria

我有一个自引用实体 ，`Department`它可以有子实体`Departments`（n 级深）。Hibernate Criteria Query 似乎变得混乱。它正确地创建了树，因为所有父母都有正确的孩子，但是它也任意将孩子直接放在祖父母之下，所以祖父母最终有它的孩子（这是正确的）和孩子的孩子（不正确）直接在下面它。

有一个顶级实体`Organization`，其下可以有 n 个`LoB`实体。Lob 代表业务线。在每个之下都有一个实体`LoB`层次结构。`Department`

**组织：**

```
public class Organization {
    ...
private Set<Lob> lobs = new HashSet<Lob>();

@OneToMany(mappedBy = "organization", cascade = { CascadeType.PERSIST,
        CascadeType.MERGE, CascadeType.REMOVE })
public Set<Lob> getLobs() {
    return lobs;
}

public void setLobs(Set<Lob> lobs) {
    this.lobs = lobs;
}
} 
```

**高球：**

```
public class Lob {
...
private Long id;    
private Organization organization;
private Set<Department> departments = new HashSet<Department>();

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "ORG_ID", nullable = false)
public Organization getOrganization() {
    return organization;
}

public void setOrganization(Organization organization) {
    this.organization = organization;
}

@OneToMany(mappedBy = "lob", cascade = { CascadeType.PERSIST,
        CascadeType.MERGE, CascadeType.REMOVE })
public Set<Department> getDepartments() {
    return departments;
}

public void setDepartments(Set<Department> departments) {
    this.departments = departments;
}
} 
```

**部门：**

```
public class Department {
...
private Set<Department> children = new HashSet<Department>();
private Department parent;
private Lob lob;

@OneToMany(mappedBy = "parent")
public Set<Department> getChildren() {
    return children;
}

public void setChildren(Set<Department> children) {
    this.children = children;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "PARENT_ID") 
public Department getParent() {
    return parent;
}

public void setParent(Department parent) {
    this.parent = parent;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "LOB_ID")
public Lob getLob() {
    return lob;
}

public void setLob(Lob lob) {
    this.lob = lob;
}
} 
```

**休眠条件查询：**

```
Session session = (Session) getEntityManager().getDelegate();
Criteria crit = session.createCriteria(Organization.class);

// Get the whole Org tree
org = (Organization) crit.createAlias("lobs", "l", Criteria.LEFT_JOIN)
    .setFetchMode("l", FetchMode.JOIN)
    .createAlias("l.departments", "d", Criteria.LEFT_JOIN)
    .setFetchMode("d", FetchMode.JOIN)
    .createAlias("d.children", "dc", Criteria.LEFT_JOIN)
    .setFetchMode("dc", FetchMode.JOIN)
    .add(Restrictions.eq("id", orgId))                                      
    .uniqueResult(); 
```

我不确定我是否正确映射了自引用关联。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T09:57:53.197

您已经映射了部门集，即所有引用 Lob 的部门都在集合中，但整个树不仅引用了顶部，还引用了同一个 Lob。因此，您必须将该限制添加到集合映射中。使用休眠它会是

```
<set name="departments" where="parent_id IS NULL">
  <key column="LOB_ID" />
  <one-to-many class="Department" />
</set> 
```

也许其他人可以编辑添加相应的注释

# google-analytics - Google Analytics - 未报告事件跟踪

> ID：13235844
> 
> 赞同：0
> 
> 时间：2012-11-05T16:05:12.150
> 
> 标签：google-analytics, analytics, event-tracking

我们已经实现了运行一段时间（超过一周）的事件跟踪代码，但我们在事件报告页面中看不到任何事件。我已经使用 Google Analytics Debugger chrome 扩展进行了测试，它可以识别事件并声称它没有错误。这意味着事件被发送到谷歌。

可能有帮助的其他信息 - 我们在调用时使用虚拟页面`_trackPageview`（这是`_trackPageview`我们唯一的调用）。

初始化示例：`_gaq.push(['_trackPageview', '/v/user/store/catalog'])`

一个事件的例子：`_gaq.push(['_trackEvent','LinkToProduct','CatalogProductbox','3',0,false])`

我该怎么做才能进一步调试或解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:44:50.153

1.  通过 Google Analytics 调试器仔细检查 _trackEvent 调用中是否存在正确的帐户 ID。帐户 ID 通过 utmac 参数传递。
2.  分析配置文件中是否有任何过滤器可能会阻止事件数据被记录？
3.  您是否看到虚拟页面的综合浏览量`/v/user/store/catalog`？

# mysql - COALESCE() 用于空白（但不是空）字段

> ID：13235847
> 
> 赞同：20
> 
> 时间：2012-11-05T16:05:19.817
> 
> 标签：mysql, sql, coalesce

我有两个字段要与 MySQL 的函数[COALESCE()](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)进行比较。例如，`COALESCE(Field1, Field2)`。问题是，Field1 有时为空但不为空；因为它不是空的`COALESCE()`，所以选择 Field1，即使它是空白的。在这种情况下，我需要它来选择 Field2。

我知道我可以在查询中编写一个 if-then-else (CASE) 语句来检查这一点，但是是否有一个很好的简单函数，比如`COALESCE()`空白但非空字段？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-05T16:11:10.540

```
SELECT IFNULL(NULLIF(Field1,''),Field2) 
```

如果 Field1 为空，则 NULLIF 返回 NULL，而如果 Field1 不为空或 NULL，则 IFNULL 返回 Field1，否则返回 Field2。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-22T19:11:40.077

我知道我在这里聚会迟到了，但是有一种方法可以在仍然使用 COALESCE() 的同时做到这一点。如果您的值为 NULL 或 ''，这将起作用。

```
Select COALESCE(NULLIF(Field1,''), Field2) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-05T16:11:43.370

您可以使用`CASE`表达式：

```
CASE WHEN Field1 <> '' THEN Field1 ELSE Field2 END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-19T18:25:09.280

使用 CASE，比较 NULL 和 Blank。

```
SELECT CASE 
        WHEN Field1 IS NULL
            OR LEN(LTRIM(RTRIM(Field1))) < 1
            THEN Field2
        ELSE Field1
        END; 
```

对于空白比较，不要使用''，使用 LEN、LTRIM、RTRIM。有时，空白可能包含多个空格。

# python - 检查字符串是否为有效的绝对路径地址格式

> ID：13235853
> 
> 赞同：10
> 
> 时间：2012-11-05T16:05:39.143
> 
> 标签：python

我有一个字符串，其中包含 linux 系统上目录地址的用户输入。我需要检查它是否格式正确并且*可能*是 Python 2.6 中的地址。重要的是要注意这不在当前系统上，因此我无法使用 os.path 检查它是否存在，也无法尝试创建目录，因为该函数将运行多次。

这些字符串将始终是绝对路径，所以我的第一个想法是寻找前导斜杠。从那里我想知道检查字符串的其余部分是否只包含有效字符并且不包含任何双斜杠。这似乎有点笨拙，还有其他想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-05T16:08:29.210

当然，自写这篇文章以来，这个问题已经被编辑过了，但是：

有which 会告诉你路径是否是绝对的。`[os.path.isabs](http://docs.python.org/2/library/os.path.html#os.path.isabs)(*PATH*)`

> 如果 path 是绝对路径名，则返回 True。在 Unix 上，这意味着它以斜杠开头，在 Windows 上，它在切断潜在的驱动器号后以（反）斜杠开头。

# opencv - 函数setSize中的opencv mat CV_MAX_DIM

> ID：13235855
> 
> 赞同：0
> 
> 时间：2012-11-05T16:05:42.710
> 
> 标签：opencv

我有一个小的 OpenCV 代码：

```
#include <iostream>

#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>

using namespace cv;

int
main(int argc, char* argv[])
{

  cv::Mat mask_img = cv::imread("image.png");
  cv::imshow("window",mask_img);

  return 0;
} 
```

然而，在运行时出现以下错误：

> OpenCV 错误：setSize 中的断言失败（0 <= _dims && _dims <= CV_MAX_DIM），文件 /home/box/OpenCV-2.4.3/modules/core/src/matrix.cpp，第 88 行终止在抛出一个实例后调用'cv::Exception'
> what(): /home/box/OpenCV-2.4.3/modules/core/src/matrix.cpp:88: error: (-215) 0 <= _dims && _dims <= CV_MAX_DIM 在函数中设置大小
> 
> 中止

我在 kubuntu linux 上使用 OpenCV 2.4.3，从源代码编译。

如何解决此错误？

我自己解决了，只需使用

```
 g++ bla2.cpp `pkg-config opencv --cflags --libs` -o bla 
```

请勿使用您自己的链接库，例如 -lopencv_core 等

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T10:45:42.733

您的图像是否正确读取？尝试在之后添加这些代码行`imread`：`if (image.empty()){ std::cerr << "Failed to read image" << std::endl; return 0;}`

# css - CSS三角形切出

> ID：13235858
> 
> 赞同：2
> 
> 时间：2012-11-05T16:05:54.347
> 
> 标签：css, css-shapes

我有一个与它相交的三角形的盒子，我想从盒子上剪下一个类似的三角形，这样两者之间就有一个白色的间隙。由于这有点难以解释，我在这里创建了一个[jsFiddle 来](http://jsfiddle.net/XDumc/1/)显示我已经拥有的内容。

这是一个截图

![CSS 三角形](../Images/d3700af6e9c74c5d2b06c94b7b97500c.png)

HTML

```
<div id="alertdetails">
    <h2>UH OH</h2>
    Date: 05/11/2012 15:57:46

    <br><br>
    <a href="">View</a>
</div>
<div id="arrow-right"></div>
​ 
```

CSS

```
#alertdetails {
    background-color: #F8F8F8;
    border: 1px solid #CCCCCC;
    border-radius: 5px 5px 5px 5px;
    left: 25px;
    padding: 20px;
    position: absolute;
    text-shadow: 0 1px #FFFFFF;
    top: 15px;
}

#arrow-right {
    position: absolute;
    top: 45px;
    left: 15px;
    width: 0; 
    height: 0; 
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;

    border-left: 20px solid #303030;
}
​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:30:30.523

[通过使用 UTF-8“右箭头](http://www.fileformat.info/info/unicode/char/25b6/index.htm)”和`:before`伪类，您可以在没有额外的 DIV 箭头的情况下执行此操作。这将使您对箭头的样式有更多的控制。

```
#alertdetails {
    background-color: #F8F8F8;
    border: 1px solid #CCCCCC;
    border-radius: 5px 5px 5px 5px;
    left: 25px;
    padding: 20px;
    position: relative;
    margin-top:15px;
    text-shadow: 0 1px #FFFFFF;
}

#alertdetails::before  {
    content:"\25b6";
    position:absolute; 
    top:20px;
    left:-20px;
    font-size:60px;
    color:#ffffff;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:25:26.327

您只需要添加第二个稍大的三角形。

HTML

```
<div id="alertdetails">
    <h2>UH OH</h2>
    Date: 05/11/2012 15:57:46

    <br><br>
    <a href="">View</a>
</div>
<div id="arrow-white"></div>
<div id="arrow-right"></div> 
```

CSS

```
#alertdetails {
    background-color: #F8F8F8;
    border: 1px solid #CCCCCC;
    border-radius: 5px 5px 5px 5px;
    left: 25px;
    padding: 20px;
    position: absolute;
    text-shadow: 0 1px #FFFFFF;
    top: 15px;
}

#arrow-right {
    position: absolute;
    top: 45px;
    left: 15px;
    width: 0;
    height: 0;
    border-top: 20px solid transparent;
    border-bottom: 20px solid transparent;

    border-left: 20px solid #303030;
}

#arrow-white{
    position: absolute;
    top: 44px;
    left: 15px;
    width: 0;
    height: 0;
    border-top: 21px solid transparent;
    border-bottom: 21px solid transparent;

    border-left: 22px solid #ffffff;
} 
```

# ios - iOS 6 自定义 URL 方案启动图像错误

> ID：13235862
> 
> 赞同：5
> 
> 时间：2012-11-05T16:06:07.303
> 
> 标签：ios, ios6, url-scheme

我在我的应用程序中实现了自定义 URL 方案。此外，我使用 info.plist 中的**UILaunchImageFile**键为启动图像设置了不同的名称。文件说：

> 如果您的应用支持一个或多个自定义 URL 方案，它还可以为每个 URL 方案提供自定义启动图像。当系统启动您的应用程序以处理 URL 时，它会显示与给定 URL 的方案关联的启动图像。在这种情况下，您的启动图像文件名的格式如下：
> 
> ```
> <basename>-<url_scheme><scale_modifier><device_modifier>.png 
> ```
> 
> 修饰符是一个字符串，表示您的 URL 方案名称的名称。例如，如果您的应用程序支持名称为 myscheme 的 URL 方案，则系统会在应用程序的捆绑包中查找名称为 Default-myscheme.png（或 Default-myscheme@2x.png 用于 Retina 显示器）的图像。如果应用的 Info.plist 文件包含 UILaunchImageFile 键，则基本名称部分会从 Default 更改为您在该键中提供的自定义字符串。
> 
> 注意：您可以将 URL 方案修饰符与方向修饰符结合使用。如果这样做，文件名的格式为
> 
> ```
> <basename>-<url_scheme><orientation_modifier><scale_modifier><device_modifier>.png. 
> ```
> 
> 有关启动方向修饰符的更多信息，请参阅“为不同方向提供启动图像”。</p>

在 iOS 5 上显示了该方案的正确初始图像，但在 iOS 6 上显示了正常的初始图像。我发现如果我使用“默认”基本名称重命名它，它可以在 iOS 6 上正常工作，但这会弄乱我的项目。因此我将无法支持多个版本

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:10:27.057

好问题解决了。仅供参考，所有对键 UILaunchImageFile 有价值的人都在基本名称的末尾带有文件扩展名。这就是问题。所以不要在启动图像的基本名称中包含像“.png”这样的文件扩展名！！！

# objective-c - 放置 NSTextField 绘图代码的正确位置？

> ID：13235866
> 
> 赞同：0
> 
> 时间：2012-11-05T16:06:26.447
> 
> 标签：objective-c, cocoa, user-interface

我正在创建一些自定义 Cocoa 组件。目前我正在尝试弄清楚如何绘制自定义 NSTextFields。

我已经在我的子类上覆盖了 drawRect 方法，但是当我开始输入时，我得到了一个像[http://imgur.com/a/LpUMy](https://imgur.com/a/LpUMy)这样的双矩形。

这是我的 drawRect 方法

```
- (void)drawRect:(NSRect)dirtyRect
{
    [NSGraphicsContext saveGraphicsState];
    [[NSBezierPath bezierPathWithRoundedRect:dirtyRect xRadius:5.0f yRadius:5.0f] setClip];
    [[NSColor grayColor] setFill];
    NSRectFillUsingOperation(dirtyRect, NSCompositeSourceOver);
    [NSGraphicsContext restoreGraphicsState];

    [NSGraphicsContext saveGraphicsState];
    NSRect rect = NSInsetRect(dirtyRect, 1.0f, 1.0f);
    [[NSBezierPath bezierPathWithRoundedRect:rect xRadius:5.0f yRadius:5.0f] setClip];
    [[NSColor whiteColor] setFill];
    NSRectFillUsingOperation(rect, NSCompositeSourceOver);
    [NSGraphicsContext restoreGraphicsState];
} 
```

更新：

我将我的绘图代码移动到 NSTextFieldCell 子类中

```
- (void)drawWithFrame:(NSRect)frame inView:(NSView *)controlView {
    [NSGraphicsContext saveGraphicsState];
    [[NSBezierPath bezierPathWithRoundedRect:frame xRadius:5.0f yRadius:5.0f] setClip];
    [[NSColor grayColor] setFill];
    NSRectFillUsingOperation(frame, NSCompositeSourceOver);
    [NSGraphicsContext restoreGraphicsState];

    [NSGraphicsContext saveGraphicsState];
    [[NSBezierPath bezierPathWithRoundedRect:NSInsetRect(frame, 1.0f, 1.0f) xRadius:3.0f yRadius:3.0f] setClip];
    [[NSColor whiteColor] setFill];
    NSRectFillUsingOperation(frame, NSCompositeSourceOver);
    [NSGraphicsContext restoreGraphicsState];
} 
```

但是一旦你完成编辑它就会在文本上绘制，即使光标仍然存在？有什么建议么？我试过画标题，但它仍然会发生。

谢谢你的帮助。

回答：

[NSCell 自定义亮点](https://stackoverflow.com/questions/5041349/nscell-custom-highlight)

通过调用 super drawInteriorWithFrame:inView 我能够阻止奇怪的文本消失问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:48:11.310

在我看来，您最终在超类 ( `NSTextField`'s)`drawRect:`实现的绘图中绘图。你还没有打电话`super`，但它仍然设法绘制自己。我自己也不确定为什么，但是有些`NSControl`像文本字段和按钮，当子类化时，无论你是否调用`drawRect:`它们，都会绘制自己。例如，如果您将一个 plain 子类化`NSButton`，实现`drawRect:`但不调用`super`，它无论如何都会绘制按钮。可能超过你画的任何东西，这在过去引起了混乱。最简单的解决方案是不子类化`NSTextField`，看看是否有另一个类可以子类化（就像`NSTextFieldCell`评论中提到的那样）。

# c# - 匹配字符串中的表达式

> ID：13235867
> 
> 赞同：0
> 
> 时间：2012-11-05T16:06:28.393
> 
> 标签：c#, regex, match

我在这里有一个数据库，其中包含我需要应用于一堆字符串的某些规则，它们是可以在字符串中出现的表达式。它们表达为

```
(word1 AND word2) OR (word3) 
```

我无法对它们进行硬编码（因为它们可能在数据库中被更改），所以我考虑以编程方式将这些表达式转换为正则表达式模式。

有没有人做过这样的任务，或者知道如何以最好的方式做到这一点？我不确定如何处理更复杂的表达式，如何将它们分开等等。

编辑：我在 VisualStudio / .NET 中使用 C#。

数据基本上是目录路径，客户想要组织他们的文档，所以我拥有的字符串是路径，数据库中的表达式可能如下所示：

```
(office OR headquarter) AND (official OR confidential) 
```

所以如果文件的目录路径包含office和confidential，它应该匹配。

希望这能让它更清楚。

编辑2：

这是一些虚拟示例：

路径可能如下所示：

```
c:\documents\official\johnmeyer\court\out\letter.doc
c:\documents\internal\appointments\court\in\september.doc
c:\documents\official\stevemiller\meeting\in\letter.doc 
```

像这样的表达：

```
(meyer or miller) AND (court OR jail) 
```

所以这个表达式将匹配第一个路径/文件，但不匹配第二个和第三个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:34:56.683

没有答案，但一个很好的提示：

您拥有的表达式是由括号构造的实际树。您需要一*台堆栈机器*将文本解析为（二进制）树结构，其中每个节点是一个`AND`或`OR`元素，叶子是单词。*之后，您可以通过使用深度优先搜索*遍历树并在读取子树之前/之后根据需要添加前缀和后缀数据，以您需要的任何语言简单地构建您的正则表达式。

考虑一个`abstract class TreeNode`有一个方法`GenerateExpression(StringBuilder result)`。每个实际的 TreeNode 项将是一个`CombinationTreeNode`（带有 CombinationMode 和/或）或一个`SearchTextTreeNode`（带有 SearchText 属性）。

GenerateExpression(StringBuilder result) for`CombinationTreeNode`看起来像这样：

```
result.Append("(");
rightSubTree.GenerateExpression(result);
result.Append(") " + this.CombinationMode.ToString() + " (");
rightSubTree.GenerateExpression(result);
result.Append(")"); 
```

GenerateExpression(StringBuilder result)`SearchTextTreeNode`更容易：

```
result.Append(this.SearchText); 
```

当然，您的代码将生成正则表达式而不是输入文本，就像我的一样。

# ios - 从 ASIHTTPRequest 转换为 AFNetworking 的最佳实践？

> ID：13235870
> 
> 赞同：0
> 
> 时间：2012-11-05T16:06:31.633
> 
> 标签：ios, http, asihttprequest, afnetworking

我正在将我的应用程序从 ASIHTTPRequest 转换为 AFNetworking。我应该大致了解这两个框架有何不同以及我的应用程序的结构应如何不同？例如，我发现的一件事是 ASIHTTPRequest 基于 @selectors，而 AFNetworking 基于 GCD 块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:21:12.173

您已经提到了最重要的部分；ASI 的委托方法和 AFN 中的块之间的区别。

如果您在许多不同的类中实现了 ASI 方法，那么当您切换到 AFN 时，将这些块移动到相同类中的块中是相当简单的。否则，如果您已经实现了一些处理所有 ASI 网络的大型类，请准备将其复制并粘贴到调用类中。总体而言，这应该会给您带来很大的好处，因为它减少了您在遵循网络逻辑的代码路径时必须执行的导航量。

此外，如果您已经有效地针对 ASI 中的 API 编写了包装器，您可能需要考虑子类化 AFHTTPClient 并在此类子类中实现通用逻辑。

# html - 是否存在移动 html 实体

> ID：13235873
> 
> 赞同：2
> 
> 时间：2012-11-05T16:06:40.963
> 
> 标签：html, entity

我正在寻找一个用于移动符号的 html 实体代码（带有左上右下箭头）。之后出现的同一个`cursor: move;`应用在 css 中。有谁知道这是否可能？我在任何地方都找不到它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-08-03T20:14:56.090

我找到的最接近的是这个✥（`&#10021;`或`&#x2725;`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-08-12T22:29:50.763

`&#10021;`✥
`&#x2725;`✥
`&#10149;`➥
`&#9735;`☇
`&uarr;&darr;`↑↓
`&rlarr;`⇄

正如其他答案中提到的，没有完全匹配。这里有一些可能对某些人来说已经足够接近了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T16:12:47.887

↔（`&harr;`或`&#8596;`）和↕（`&varr;`或）可用，但[箭头子组](http://utf8-characters.com/arrows/)`&#8597;`中没有上/下/左/右箭头符号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T17:07:39.513

不，没有这样的实体，甚至没有那样的角色。检查您正在寻找的符号是否作为字符存在的有趣方式是访问[http://shapecatcher.com/](http://shapecatcher.com/)并绘制它。当然，这不是精确的科学。

寻找 HTML 实体代码通常是没有意义的。这些代码并没有增加语言的表达能力：您可以使用字符引用`&#...`来代替，或者如果您使用的是 UTF-8，则可以直接输入字符，就像您通常应该做的那样。在识别出一个字符后，真正的问题是字体是否支持它以及如何处理。它是否有一个 HTML 实体真的无关紧要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T16:18:44.133

按照[规范](http://dev.w3.org/html5/spec/single-page.html#named-character-references)！查看表 8.5，“命名字符引用”。快速搜索“箭头”一词并不能完全找到您正在寻找的内容，但有超过 2200 个命名实体，也许您可​​以找到看起来“足够接近”的东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-08T09:11:21.767

为此我制作了一支笔，请随意使用：[Create a Move cursor with html + css](https://codepen.io/migli/pen/yeQLBX)

```
<div id="wrapper">
    <div class="cp-drag">
    </div>
</div>
// see codepen for css please 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-17T13:14:27.570

我得出了同样的结论，这不是一个简单的角色，但我的解决方法是在同一个空间中创建一个带有上/下箭头和侧/侧箭头的 div。有点挑剔，但如果你必须拥有它...

```
<div style="font-size:200%;display:inline-block;position:relative;top:-11px;left:-15px;">
    <div style="display:inline-block;">&#8596;</div>
    <div style="display:inline-block;left:-32px;position:relative;">&#8597;</div>
</div> 
```

# java - 使 JFreeChart 在 JSP 中可见

> ID：13235874
> 
> 赞同：0
> 
> 时间：2012-11-05T16:06:43.390
> 
> 标签：java, jsp, servlets, jfreechart

我有一个带有表单的 index.JSP 和一个 img 标签。表单指的是构建图表的 servlet，将其设置在会话中并重定向回`index.jsp`（因此可以将其作为 ServletOutputStream 读取`BytesFromSession`）。图片未显示。在 web.xml 中，我映射了 ControllerURL 的 urlPattern。

index.jsp：

* * *

```
...
<img src = "/BytesFromSession" > </img> 
```

控制器.java

* * *

```
public class Controller extends HttpServlet {
...

private HttpSession session;

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

outputStream = response.getOutputStream();

JFreeChart c = buildChart(); // builds the JFreeChart

session = request.getSession(true);
session.setAttribute("tbl", c);

response.sendRedirect( "index.jsp" );
} 
```

BytesFromSession.java

* * *

```
public class BytesFromSession extends HttpServlet {

private ServletOutputStream outputStream;

protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

response.setContentType("image/jpeg");

try {

    outputStream = response.getOutputStream();

    JFreeChart c = (JFreeChart) request.getSession().getAttribute("tbl");
    ChartUtilities.writeChartAsJPEG(outputStream, c, 300, 400); // <---- writing table as JPEG to outputStream

} finally {
 outputStream.close();
  }
 }

} 
```

## 编辑

将图表保存到文件并重定向回 index.jsp 有帮助。仍然不确定为什么没有将其保存在会话中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:46:05.390

Use

```
RequestDispatcher view = request.getRequestDispatcher("index.jsp");
view.forward(request,response); 
```

instead of

```
response.sendRedirect( "index.jsp" ); 
```

**Edit**

I changed the method name **processRequest** to **doGet** in `BytesFromSession.java` and simply removed the / from img tag like `<img src="BytesFromSession">`

BytesFromSession is mapped in web.xml

```
<servlet>
      <servlet-name>BytesFromSession</servlet-name>
      <servlet-class>com.test.BytesFromSession</servlet-class>
    </servlet>

    <servlet-mapping>
      <servlet-name>BytesFromSession</servlet-name> 
      <url-pattern>/BytesFromSession</url-pattern> 
  </servlet-mapping> 
```

I could get the image from chart stored in session that way without having it to be saved to a path. Hope that helps you too.

# git - 使用我的更改解决合并冲突

> ID：13235875
> 
> 赞同：42
> 
> 时间：2012-11-05T16:07:03.030
> 
> 标签：git

我想拉一个项目并使用我的更改解决合并冲突。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-11-05T16:13:11.717

使用带有*ours*选项的*递归*合并策略：

 *```
git merge -s recursive -X ours branch_to_merge 
```

或者

```
git pull -s recursive -X ours 
```

对于任何冲突，它将使用来自您的分支的大块。有关更多详细信息，请参阅[git merge](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)手册页。*

# java - HTTPS / SSL 隧道

> ID：13235880
> 
> 赞同：0
> 
> 时间：2012-11-05T16:07:14.060
> 
> 标签：java, android, ssl

我在 Android 上遇到了 https 隧道问题。

我从设备收到原始数据请求，我必须将数据发送到服务器，并获取响应并转发它。问题是在 Android 上，与安全服务器的连接似乎存在问题。Android 要求我创建主机名验证程序，并且我收到了诸如 501 HTTP 错误代码之类的问题

有人知道将一些原始字节转发到服务器、获取响应并且不处理任何事情的方法吗？一些隧道示例还是什么？

有人可以指出一些处理这种情况的第三方图书馆吗？

谢谢，方舟

# android - GZIP 对网络通话没有影响

> ID：13235881
> 
> 赞同：0
> 
> 时间：2012-11-05T16:07:16.243
> 
> 标签：android, http, gzip

我有一个调用网络服务的应用程序。我已经记录了使用和不使用 GZIP 完成此呼叫所需的时间。我使用 GZIP 运行该应用程序 5 次，不使用 GZIP 运行 5 次，实际上使用 GZIP 需要更长的时间。所以我只能认为 GZIP 没有效果，或者我实施得不好。任何想法为什么没有变化？

```
public String connect(String url) {

        HttpClient httpclient = new DefaultHttpClient();

        // Prepare a request object
        HttpGet httpget = new HttpGet(url);
        httpget.addHeader("Accept-Encoding", "gzip");

        // Execute the request
        HttpResponse response;
        try {
            long start = System.currentTimeMillis();
            response = httpclient.execute(httpget);
            // Examine the response status
            Log.i(TAG, response.getStatusLine().toString());

            // Get hold of the response entity
            HttpEntity entity = response.getEntity();
            // If the response does not enclose an entity, there is no need
            // to worry about connection release

            if (entity != null) {

                InputStream instream = response.getEntity().getContent();
                Header contentEncoding = response.getFirstHeader("Content-Encoding");
                if (contentEncoding != null && contentEncoding.getValue().equalsIgnoreCase("gzip")) {
                    instream = new GZIPInputStream(instream);
                }

                // A Simple JSON Response Read
                //InputStream instream = entity.getContent();
                result = convertStreamToString(instream);
                Log.i(TAG, result);

                // A Simple JSONObject Creation
                //json = new JSONObject(result);

                // Closing the input stream will trigger connection release
                instream.close();
                long end = System.currentTimeMillis();
                long elapsed = (end - start);
                Log.e(TAG, "web call took ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^" + elapsed);

            }

                } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
         return result;

    } 
```

.

**结果：**

没有 GZIP：平均 5 次运行 = 2923 毫秒

使用 GZIP：平均 5 次运行 = 3179 毫秒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:14:51.753

在时间安排上至少有两个主要贡献：

*   客户端：连接速度与解码速度
*   服务器端：连接速度与编码速度

gzip 编码在服务器端可以是静态的或动态的。对于某些内容，以已经压缩的形式存储查询数据是有意义的。对于某些内容，它无法完成，服务器可能已经占用了“压缩引擎”。

ADSL、WLAN 或直接以太网连接之间的时间可能会发生变化。

# mysql - MySQL回滚事务的方法有哪些？

> ID：13235882
> 
> 赞同：0
> 
> 时间：2012-11-05T16:07:20.610
> 
> 标签：mysql, transactions, sql-update, innodb, sql-insert

我在这里和谷歌上看到多个答案，回滚事务仅意味着回滚最后一个命令，我还读到这意味着所有命令。（既没有记录也没有被引用）

我需要做的是创建一个在表 A 上插入/更新的存储过程，获取 A 的最后一个 ID，将该 ID 插入 B，获取 B 的最后一个 id，将其插入 C 等，等等。

我想知道提交或回滚事务中所有命令的方法是什么，以便启动事务，如果出现故障，则将所有内容恢复为原始内容。

带有 IF 错误和 last_id 的 SQL 代码将受到重视，因为我也看到了很多不同的方法来获取最后一个 id，但我不知道哪个更好。

顺便说一下，所有的表都是**InnoDB**

亲切的问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:28:28.060

如[`START TRANSACTION`,`COMMIT`和`ROLLBACK`语法](http://dev.mysql.com/doc/en/commit.html)下所述：

> 这些语句提供对[事务](http://dev.mysql.com/doc/en/glossary.html#glos_transaction)使用的控制：
> 
> `[ deletia ]`
> 
> *   **`ROLLBACK`**回滚当前事务，取消其更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:28:38.950

如果你`BEGIN`是一笔交易，那么在你之前什么都不会被应用`COMMIT`。断开连接或发出 a`ROLLBACK`与从不提交它是一样的。

当然，这是假设你已经`autocommit`开始了，通常情况就是这样。

如果您也将它们包装为事务，则可以回滚单个命令。

[文档](http://dev.mysql.com/doc/refman/5.5/en/commit.html)中提供了更多信息。

请记住，MyISAM 和其他引擎不支持事务，而 InnoDB 则支持。此外，只有`INSERT`、`UPDATE`和语句可以回滚。其他事情，例如对架构的更改，则不是。`DELETE``REPLACE`

# jstl - 为什么 JSTL 中没有“c:else”标签？

> ID：13235889
> 
> 赞同：3
> 
> 时间：2012-11-05T16:07:50.743
> 
> 标签：jstl, if-statement

我很清楚[如何](https://stackoverflow.com/questions/4587397/how-to-use-if-else-option-in-jstl)使用`"if(confition) ... else ..."`JSTL 和`<choose>`,`<when>`和`<otherwise>`标记来构建语句。

但是，我很想知道导致对开发人员强制执行这种稍微繁琐和冗长的构造的设计决策，即使对于简单的 if-else 语句，也不包括可以与之一起使用的标签`<s:if>`（尽管我认为选择标签对于多种选择来说更加有用和优雅，有点像强大的 switch(...) 语句或类似的东西）。

Struts2 有一个`<s:else>` [标签](http://struts.apache.org/2.1.2/struts2-core/apidocs/org/apache/struts2/components/Else.html)，所以我不认为这是技术上的不可能......

如果有人能启发我，我将不胜感激。

编辑：顺便说一句，有人认为“否则”真的比“其他”更好吗？（我不是以英语为母语的人，所以可能会有不同的“如果”我没有在这里 - 无论如何我宁愿输入“其他”:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T01:58:53.413

许多 JSTL 元素（在我看来）似乎是基于 XSLT。例如[xsl:choose](http://www.w3.org/TR/xslt#section-Conditional-Processing-with-xsl%3achoose)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-17T18:38:21.597

通常，IF 语句必须跟在 ELSE 语句之后，并且在这些注释之间不应该做任何其他事情。

我们没有，因为如果它在那里，可能会在`<c:if> .. </c:if>`AND之间添加一些其他`<c:else> .. </c:else>`不应该存在的东西。

为了准确地保持流程 IF ELSE 并且不违反它，不提供 ELSE。

但没什么大不了的，我们确实有其他标签来完成这项工作：

```
<c:choose>
  <c:when test="${condition1}">
    ...
  </c:when>
  <c:when test="${condition2}">
    ...
  </c:when>
  <c:otherwise>
    ...
  </c:otherwise>
</c:choose> 
```

参考：[http ://careerguide.techproceed.com/2013/11/jstl-tutorial-with-examples.html](http://careerguide.techproceed.com/2013/11/jstl-tutorial-with-examples.html)

# actionscript-3 - 更新标签文本字段

> ID：13235890
> 
> 赞同：0
> 
> 时间：2012-11-05T16:07:53.230
> 
> 标签：actionscript-3, apache-flex

我使用标签组件来显示 ArrayCollection 的长度。当我向集合中添加新项目时，如何更新它？

这是标签的文本字段：

```
text="{model.meetingInfo.documentList.length}" 
```

这是将新项目添加到集合的处理程序：

```
var attachmentProgressVO:AttachmentProgressVO = new AttachmentProgressVO();
                attachmentProgressVO.fileReference = file as File;
                newAttachmentList.addItem(attachmentProgressVO);
                checkIfUpdate(file as File, attachmentProgressVO);
                meetingInfo.docsAndAttachmentsList.addItem(attachmentProgressVO); 
```

我尝试添加这两行，但没有奏效：

```
meetingInfo.docsAndAttachmentsList.itemUpdated( attachmentProgressVO );
                meetingInfo.docsAndAttachmentsList.refresh(); 
```

我也试过改变这个：

```
public var docsAndAttachmentsList:ArrayCollection = new ArrayCollection(); 
```

对此：

```
private var _docsAndAttachmentsList:ArrayCollection = new ArrayCollection(); 
```

..使用吸气剂和二传手，但这不起作用。

我没有使用正确的方法，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:12:42.783

通常，Binding 只查看特定对象。您不能将 4 个对象深入到特定属性并期望绑定来更新值。

更改 documentList 不会更改 meetingInfo 或 Model，因此永远不会触发绑定。itemUpdated() 和 refresh() 应该更新显示数据的基于列表的类；但不会影响您的标签显示计数。

您需要在集合上侦听 collectionChange 事件并在 collectionChange 处理程序中手动更新标签的文本。

# xilinx - Xilinx XPS：使用 DIP 开关进行选择

> ID：13235896
> 
> 赞同：1
> 
> 时间：2012-11-05T16:08:07.430
> 
> 标签：xilinx, microblaze

我正在尝试在另一个模块中使用 DIP 开关作为选择信号。所以 DIP 开关是一个外部组件。

我总是收到以下错误： ERROR:NgdBuild:924 - bidirect pad net 'DIP_1_7<5>' isdriving non-buffer primitives: ERROR:NgdBuild:924 - bidirect pad net 'DIP_1_7<6>' isdriving non-buffer primitives ：错误：Xflow - 程序 ngdbuild 返回错误代码 2。正在中止流程执行... make: *** [__xps/system_routed] 错误 1

如何在我的 XPS 项目中使用 DIP 开关？我不想使用 Microblaze 读取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:35:34.700

好的，我通过在连接 DIP 开关的模块输入上使用 IBUF 原语解决了这个问题。

# delphi - 将身份验证从 Webbrowser 转移到 Indy CookieManager

> ID：13235897
> 
> 赞同：1
> 
> 时间：2012-11-05T16:08:07.493
> 
> 标签：delphi, delphi-xe2

您如何将 cookie 从 Webbrowser 放入 Indy CookieManager 以进行 Http 请求。

我登录到这样的网站后得到cookies..

测试项目 = [http://www.megafileupload.com/en/file/373536/Cookie-Tester-rar.html](http://www.megafileupload.com/en/file/373536/Cookie-Tester-rar.html)

```
procedure TForm1.WebBrowser1DownloadComplete(Sender: TObject);
var
document: IHTMLDocument2;
cookies:tstringlist;
begin
cookies:=tstringlist.Create;
document := WebBrowser1.Document as IHTMLDocument2;
cookies.Add(document.cookie);
cookies.savetofile('test.txt');
end; 
```

**HttpOnly Cookie 方法。**

```
function GetCookie(host: PAnsiChar): PAnsiChar;
const
  INTERNET_COOKIE_HTTPONLY = 8192;
var
  hModule: THandle;
  lp: Pointer;
  InternetGetCookieEx: function(lpszUrl, lpszCookieName, lpszCookieData
    : PAnsiChar; var lpdwSize: DWORD; dwFlags: DWORD; lpReserved: pointer)
    : BOOL; stdCall;
  CookieSize: DWORD;
  CookieData: PAnsiChar;
begin
  LoadLibrary('wininet.dll');
  hModule := GetModuleHandle('wininet.dll');
  if hModule <> 0 then
  begin
    @InternetGetCookieEx := GetProcAddress(hModule, 'InternetGetCookieExA');
    if @InternetGetCookieEx <> nil then
    begin
      CookieSize := 1024;
      Cookiedata := AllocMem(CookieSize);
      if InternetGetCookieEx(host, nil, Cookiedata, CookieSize, INTERNET_COOKIE_HTTPONLY, nil) then
      result:=cookiedata;
      FreeMem(Cookiedata);
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:37:08.553

由于您使用多个 Delphi 版本标签标记了您的问题，我假设您在每个 Delphi 版本中使用不同版本的 Indy，对吗？Indy 的 cookie 处理逻辑多年来发生了一些变化，并在 2011 年初进行了重大改写，以考虑[RFC 6265](https://www.rfc-editor.org/rfc/rfc6265)（已淘汰所有以前的 cookie RFC）。

在当前的 Indy 10 版本中，手动添加 cookie 是使用`TIdCookieManager.AddServerCookie()`or`TIdCookieManager.AddServerCookies()`方法完成的：

```
procedure AddServerCookie(const ACookie: String; AURL: TIdURI);
procedure AddServerCookies(const ACookies: TStrings; AURL: TIdURI); 
```

这两个参数都是必需的，其中`ACookie`是`name=value; parameters`单个 cookie 的字符串，并且`AURL`是 cookie 来自的 URL（用于验证 cookie 数据并在需要时初始化任何默认值），例如：

```
procedure TForm1.WebBrowser1DownloadComplete(Sender: TObject);
var
  document: IHTMLDocument2;
  cookies: TStringList;
  uri: TIdURI;
begin
  document := WebBrowser1.Document as IHTMLDocument2;
  cookies := TStringList.Create;
  try
    // fill cookies as needed, one cookie per line
    uri := TIdURI.Create(document.URL);
    try
      IdCookieManager1.AddServerCookies(cookies, uri);
    finally
      uri.Free;
    end;
  finally
    cookies.Free;
  end;
end; 
```

请记住，该`document.cookie`属性可以包含多个 cookie，因此您必须手动拆分 cookie，然后才能将它们传递给`TIdCookieManager`. 此外，该`document.cookie`属性使用`;`字符来分隔 cookie，但它也使用 ';' 用于分隔单个 cookie 的`name=value`和值，因此在拆分数据`parameters`时您将不得不进行一些解析。`document.cookie`

# mysql - 从第二个表中的值减去一个表中的值 - 将结果设置为第二个表中的值

> ID：13235911
> 
> 赞同：0
> 
> 时间：2012-11-05T16:08:28.007
> 
> 标签：mysql, join, sql-update

我有两张桌子。第一个表`Shipping`包含列`Product`,`Quantity`和`ID`。第二个表是`Inventory`列`Product`和`Total`。

我想取 的值`Shipping.Quantity`并从`Inventory.Total`WHERE 中的值减去`Product`每个表中的值匹配并且`Shipping.ID`是 url ( `$onum`) 中的值。然后我想将该产品的新值设置为 Inventory.Total。

我能想到的最好的：

```
UPDATE Inventory.Total 
CROSS JOIN Shipping 
SET Inventory.total=(Inventorytotal-Shipping.Quantity) 
WHERE Inventory.Product=Shipping.Product 
  AND Shipping.ID=$onum 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:16:25.193

```
UPDATE Inventory join Shipping 
ON Inventory.Product=Shipping.Product 
SET Inventory.Total=Inventory.Total-Shipping.Quantity
WHERE Shipping.ID=$ID 
```

# string - 比较字符串的相似性？

> ID：13235913
> 
> 赞同：0
> 
> 时间：2012-11-05T16:08:33.560
> 
> 标签：string, algorithm, list, graph, distance

我想计算在数千个条目的列表中出现某些大学课程的次数。问题是课程并不总是拼写相同。例如，`Computer Engineering`可以拼写为`Computers Engineering`。测试两个字符串是否非常相似的正确、优雅的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:56:12.477

我会尝试使用[stemming](http://en.wikipedia.org/wiki/Stemming)**规范化字符串**。这个想法是 - 给每个字符串它的规范化形式，两个不同的字符串，代表同一个词很可能有相同的规范形式（例如，将有相同的大炮形式，你会得到一个匹配）。`Computer``Computers`

[波特词干算法](http://tartarus.org/martin/PorterStemmer/)通常用于规范化。

* * *

另一种选择 - 以彼此之间的距离对字符串进行分级，建议的[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)可以帮助你，但就个人而言 - 我更喜欢规范化。

# c++ - c++模板问题

> ID：13235914
> 
> 赞同：-1
> 
> 时间：2012-11-05T16:08:35.060
> 
> 标签：c++, templates

我目前正在使用本教程中给出的类：[http ://www.dreamincode.net/forums/topic/183191-create-a-simple-configuration-file-parser/](http://www.dreamincode.net/forums/topic/183191-create-a-simple-configuration-file-parser/)

最初它运行良好，但由于我将单个源文件拆分为单独的头文件和 cpp 文件，因此我无法调用 getValueOfKey 函数

标题：

```
#ifndef CONFIGFILE_H
#define CONFIGFILE_H

#include <iostream>
#include <string>
#include <sstream>
#include <map>
#include <fstream>
#include <typeinfo>

class ConfigFile
{
private:
        std::map<std::string, std::string> contents;
    std::string fName;
    void removeComment(std::string &line) const;
    bool onlyWhitespace(const std::string &line) const;
    bool validLine(const std::string &line) const;
    void extractKey(std::string &key, size_t const &sepPos, const std::string &line) const;
    void extractValue(std::string &value, size_t const &sepPos, const std::string &line) const;
    void extractContents(const std::string &line);
    void parseLine(const std::string &line, size_t const lineNo);
    void ExtractKeys(); 
public:
    ConfigFile(const std::string &fName);
    bool keyExists(const std::string &key) const;
    template <typename ValueType>
    ValueType getValueOfKey(const std::string &key, ValueType const &defaultValue) const;
};

#endif  /* CONFIGFILE_H */ 
```

cp:

```
#include "ConfigFile.h"

std::map<std::string, std::string> contents;
std::string fName;

template <typename T>
static std::string T_to_string(T const &val)
{
    std::ostringstream ostr;
    ostr << val;

    return ostr.str();
}

template <typename T>
static T string_to_T(std::string const &val)
{
    std::istringstream istr(val);
    T returnVal;
    if (!(istr >> returnVal))
        std::cout << "CFG: Not a valid " << (std::string)typeid (T).name() << " received!\n" << std::endl;

    return returnVal;
}

template <>
std::string string_to_T(std::string const &val)
{
    return val;
}

void ConfigFile::removeComment(std::string &line) const
{
    if (line.find(';') != line.npos)
        line.erase(line.find(';'));
}

bool ConfigFile::onlyWhitespace(const std::string &line) const
{
    return (line.find_first_not_of(' ') == line.npos);
}

bool ConfigFile::validLine(const std::string &line) const
{
    std::string temp = line;
    temp.erase(0, temp.find_first_not_of("\t "));
    if (temp[0] == '=')
        return false;

    for (size_t i = temp.find('=') + 1; i < temp.length(); i++)
        if (temp[i] != ' ')
            return true;

    return false;
}

void ConfigFile::extractKey(std::string &key, size_t const &sepPos, const std::string &line) const
{
    key = line.substr(0, sepPos);
    if (key.find('\t') != line.npos || key.find(' ') != line.npos)
        key.erase(key.find_first_of("\t "));
}

void ConfigFile::extractValue(std::string &value, size_t const &sepPos, const std::string &line) const
{
    value = line.substr(sepPos + 1);
    value.erase(0, value.find_first_not_of("\t "));
    value.erase(value.find_last_not_of("\t ") + 1);
}

void ConfigFile::extractContents(const std::string &line)
{
    std::string temp = line;
    temp.erase(0, temp.find_first_not_of("\t "));
    size_t sepPos = temp.find('=');

    std::string key, value;
    extractKey(key, sepPos, temp);
    extractValue(value, sepPos, temp);

    if (!keyExists(key))
        contents.insert(std::pair<std::string, std::string > (key, value));
    else
        std::cout << "CFG: Can only have unique key names!\n" << std::endl;
}

void ConfigFile::parseLine(const std::string &line, size_t const lineNo)
{
    if (line.find('=') == line.npos)
        std::cout << "CFG: Couldn't find separator on line: " << T_to_string(lineNo) << "\n" << std::endl;

    if (!validLine(line))
        std::cout << "CFG: Bad format for line: " << T_to_string(lineNo) << "\n" << std::endl;

    extractContents(line);
}

void ConfigFile::ExtractKeys()
{
    std::ifstream file;
    file.open(fName.c_str());
    if (!file)
        std::cout << "CFG: File " << fName << " couldn't be found!\n" << std::endl;

    std::string line;
    size_t lineNo = 0;
    while (std::getline(file, line))
    {
        lineNo++;
        std::string temp = line;

        if (temp.empty())
            continue;

        removeComment(temp);
        if (onlyWhitespace(temp))
            continue;

        parseLine(temp, lineNo);
    }

    file.close();
}

ConfigFile::ConfigFile(const std::string &fName)
{
    this->fName = fName;
    ExtractKeys();
}

bool ConfigFile::keyExists(const std::string &key) const
{
    return contents.find(key) != contents.end();
}

template <typename ValueType>
ValueType ConfigFile::getValueOfKey(const std::string &key, ValueType const &defaultValue = ValueType()) const
{
    if (!keyExists(key))
        return defaultValue;

    return string_to_T<ValueType> (contents.find(key)->second);
} 
```

我正在尝试使用与它是单个文件时相同的方法来调用它，例如`std::cout << Config.getValueOfKey<std::string>("test");`，但现在我收到以下编译器错误

```
main.cpp: In function 'int main(int, char**)':
main.cpp:29:71: error: no matching function for call to 'ConfigFile::getValueOfKey(const char [5])'
main.cpp:29:71: note: candidate is:
In file included from main.h:17:0,
                 from main.cpp:9:
ConfigFile.h:35:12: note: template<class ValueType> ValueType ConfigFile::getValueOfKey(const string&, const ValueType&) const
ConfigFile.h:35:12: note:   template argument deduction/substitution failed:
main.cpp:29:71: note:   candidate expects 2 arguments, 1 provided 
```

鉴于我对模板的掌握不佳，我真的看不出这个错误试图告诉我什么，我尝试传递直接字符串而不是 char 数组无济于事。任何帮助或解释将不胜感激，在过去的几个小时里，我的头在桌子上开了一个漂亮的洞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:12:00.073

您声明了采用 2 个参数的方法：

```
ValueType getValueOfKey(const std::string &key, ValueType const &defaultValue) const;
//                                          |                           |
//                                   first parameter             second parameter 
```

并且只提供一个：

```
Config.getValueOfKey<std::string>("test"); 
```

我还没有遇到一个编译器在没有任何帮助的情况下猜测你的意思。

您需要将默认值移动到头文件，在其中声明方法：

```
ValueType getValueOfKey(const std::string &key, ValueType const &defaultValue = ValueType()) const;
    //                                          |                           |
    //                                   first parameter             second parameter 
```

之后您可能会收到链接器错误，因此您可能需要检查[此](https://stackoverflow.com/a/12574417/673730).

# asp.net - 一个 asp.net 应用程序中的两个相同的 dbml 数据上下文

> ID：13235916
> 
> 赞同：0
> 
> 时间：2012-11-05T16:08:46.337
> 
> 标签：asp.net, database, linq-to-sql, transfer

我有一个单独的 sql server2008 数据库副本，用于隔离数据。我现在想从这个单独的数据库中将一些记录带入生产数据库。我不确定执行此操作的最佳方法，但我需要转移几个表并确保关系保持不变。我想到的最简单的方法是（如果可能）创建单独数据库的另一个 dbml 数据上下文，并将所有变量设置为等于新数据库中的新对象。我意识到我遇到了很多冲突错误。有没有办法让两个数据库像这样在一个应用程序中共存？数据库中存在一些细微差别。生产数据库确实有一些添加的行。

感谢您的帮助，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:49:50.373

我没有权威，所以也许有人可以给你一个更好的解决方案，但似乎你不能在同一个项目中拥有两个具有相同表名的模型。您可以做的是在您的解决方案中创建一个新项目，以包含单独数据库的模型。

这将让您有两个模型，它们都包含一个“人”对象，例如，因为它们的命名空间会不同。可能有助于将 using 语句放在使用两种模型的页面顶部，类似于以下：

```
using PersonLive = MyProject.Person;
using PersonIsolation = AlternateProject.Person; 
```

# iis - 启用跨域 IIS Web 部署

> ID：13235917
> 
> 赞同：1
> 
> 时间：2012-11-05T16:08:47.450
> 
> 标签：iis, cross-domain, webdeploy

是否可以跨域使用 Web Deploy (wmsvc)？也就是说，我可以从一个域中的开发盒/构建服务器部署到另一个域中的 Web 服务器吗？我能够在同一个域内执行此操作，因此我知道我确实正确配置了 Web 部署服务。但是，从另一个域我什至无法获得[https://severname.domain.com:8172/msdeploy.axd](https://severname.domain.com:8172/msdeploy.axd)来挑战凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-11T21:22:39.813

简短的回答是肯定的。

WMSVC 在端口 8172 上暴露自己，但它使用 https 协议。只要您有直接的方式从一个网络到另一个网络，通过该端口，它就可以工作。

我们在 DMZ 上运行所有的网络服务器，这是一个具有独立 DNS、活动目录服务器等的隔离网络。我可以直接从我的构建服务器（在 *.hq 网络上）部署到 *.dmz.com 服务器端口 8172。

但是，我确实必须将此要求传达给网络组，以便他们可以允许端口 8172 通过我们的防火墙。此外，我无法使用自动 Windows 身份验证设置 Web 部署，因为这两个网络具有不同的域和不同的用户集。

# axapta - Dynamics AX：在自定义表单查找中过滤掉 ItemGroup

> ID：13235918
> 
> 赞同：0
> 
> 时间：2012-11-05T16:08:48.257
> 
> 标签：axapta

在 InventItemIdLookupPurchase 表单上，我需要显示除服务之外的所有项目组。

我可以在不编写自定义查找的情况下实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:24:21.933

不，您确实需要[自定义查找](http://www.axaptapedia.com/index.php?title=SysTableLookup_class)。

# multithreading - 如何在 GDB 中调试多线程代码？

> ID：13235921
> 
> 赞同：3
> 
> 时间：2012-11-05T16:08:54.753
> 
> 标签：multithreading, debugging, gdb

我正在尝试使用一个等待用户输入的线程来调试多线程程序。当我在其他线程的某个函数处设置断点并运行应用程序时，它会切换到相同的断点，然后立即在输入线程处，因此应用程序等待用户的输入，而我无法在 gdb 中执行任何命令。我只需要在调用相同的函数之前查看所有堆栈。我无法输入 bt 命令

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:13:56.277

`thread apply all bt`回答你的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:26:50.290

您可以将命令添加到断点，请参阅[手册](http://sourceware.org/gdb/current/onlinedocs/gdb/Break-Commands.html#Break-Commands)。像这样的东西：

```
(gdb) break some_func
Breakpoint 2 at ...
(gdb) commands 2
Type commands for breakpoint(s) 2, one per line.
End with a line saying just "end".
>thread apply all bt full
>end
(gdb) cont
Continuing.
Breakpoint 2, ...
Thread 1 (Thread 0x....
... 
```

### 编辑0：

哦，我猜你会`gdb`在你身上打印这个：

```
---Type <return> to continue, or q <return> to quit--- 
```

在你做之前做以下事情`run`（你也可以把它放到`.gdbinit`文件中）：

```
(gdb) set pagination off 
```

# vb6 - Vb6 中需要运行时错误 424 对象

> ID：13235928
> 
> 赞同：0
> 
> 时间：2012-11-05T16:09:28.370
> 
> 标签：vb6

我是Vb的新手，

我的源代码出现错误，

这是我的代码片段，

```
Dim a,b as integer 
  a=val (txtf.Text)
  b=val (txts.Text)
    if(a>b)then
       txtr=a
    else
      txtr=b
   end if 
end sub 
```

***错误*：运行时错误 424 需要对象：**

**任何帮助将不胜感激。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:21:34.533

打字更安全

```
Dim a as Integer
Dim b as integer 
```

或者

```
Dim a as integer,b as integer 
```

这可能是错误的情况

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T17:20:44.363

您还没有定义 textr 。这样做，您的问题将得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-18T14:21:22.853

您没有将 txtr 指定为 txtr.txt 而是将 txtr 读取为对象...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-12T01:33:38.473

我发现的错误你应该分开 a,b; 而是写为：

将 a 调暗为整数，将 b 调为整数或

将 a 调为整数 将 b 调为整数

# mysql - 是否可以在 MySQL 更新语句中标记重复记录？

> ID：13235930
> 
> 赞同：0
> 
> 时间：2012-11-05T16:09:30.737
> 
> 标签：mysql, csv, import, duplicates, updates

我有一个 CSV 导入到`temp_import_table`其中，我在提交到数据库 ( `mysql 5.0.88`) 之前验证导入的数据。

我正在尝试在验证表中的记录中搜索重复条目，但我无法让它像这样工作：

```
<cfquery datasource="#session.datasource#">
    UPDATE import_pricat_csv
    SET err = "ja", errtxt = "duplicate EAN"
    WHERE iln = <cfqueryparam value="#Session.logId#" cfsqltype="cf_sql_varchar" maxlength="16">
        AND ean IN (
            SELECT ean
            FROM import_pricat_csv
            GROUP BY ean
            HAVING COUNT(ean) > 1
            )
</cfquery> 
```

这会引发错误：

```
You can't specify target table 'import_pricat_csv' for update in FROM clause 
```

**问：**
这不可能吗？有没有比循环一次以获取重复项和第二次将 dup-records 设置为更好的方法`err="yes"`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:20:49.860

您可以使用多表`UPDATE`语法来加入物化组结果：

```
UPDATE import_pricate_csv NATURAL JOIN (
  SELECT ean FROM import_pricate_csv GROUP BY ean HAVING COUNT(*) > 1
) t SET
  import_pricate_csv.err    = 'ja',
  import_pricate_csv.errtxt = 'duplicate EAN'
; 
```

# tinymce - 使用 TinyMCE 创建的内容的在线存储

> ID：13235931
> 
> 赞同：2
> 
> 时间：2012-11-05T16:09:34.557
> 
> 标签：tinymce

我们正在研究一种将使用 TinyMCE 创建的文件保存在在线存储中的方法。有谁知道什么是最好的选择。是否可以与 Google Docs 或 iCloud 集成？不是在寻找有关如何执行此操作的详细说明，只是任何有关此教程的 URL 都会很棒。

# actionscript-3 - as3 netstream 在所有 mp3 上发送 StreamNotFound，而不是在 mp4 上

> ID：13235935
> 
> 赞同：1
> 
> 时间：2012-11-05T16:09:49.683
> 
> 标签：actionscript-3, flash, mp3, netstream

我开发了一个自定义视频播放器，它需要兼作音频播放器。所有功能都在那里，但 NetStream 不加载 mp3。它抛出 NetStream.Play.StreamNotFound。

我没有使用 Flash Media 服务器。我已经测试了本地和在线 .mp3 文件。奇怪的是，该代码在放入 .mp4 文件时运行良好。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:58:50.847

如果不使用媒体服务器或桌面应用程序，它将无法工作。`mp4`是视频和音频的容器格式，这就是 netStream 加载它的原因：它将它作为具有活动声音流的空视频流读取。另一方面，`mp3`它是一个纯音频编解码器，您应该使用`Sound`类加载它，而不是`NetStream`. 以下是有关 NetStream 对象支持格式的更多信息：http: [//dev.illumifi.net/AS3/flash/net/NetStream.html](http://dev.illumifi.net/AS3/flash/net/NetStream.html)

# matlab - 寻找在matlab中创建子矩阵的“聪明”方式

> ID：13235936
> 
> 赞同：1
> 
> 时间：2012-11-05T16:09:52.543
> 
> 标签：matlab, for-loop, matrix, submatrix

我有一个 2900 x 7 大小的矩阵

```
re2 = [x y z se index xc yc]; 
```

每列 (x, y, z, se, index, xc, yc) 都包含数字，所有 2900 x 1 大小相同。

我正在尝试通过在第 6 列和第 7 列中查找特定元素来制作一些子矩阵。像这样：

```
rexy_1_1 = re2(xc==1 & yc==1,:);
rexy_1_2 = re2(xc==1 & yc==2,:);
rexy_1_3 = re2(xc==1 & yc==3,:);
rexy_1_4 = re2(xc==1 & yc==4,:);
rexy_1_5 = re2(xc==1 & yc==5,:);
....
rexy_20_17 = re2(xc==20 & yc==17,:); 
```

但这意味着我需要编写 340 行来生成 340 个子矩阵。有什么聪明的方法可以做到这一点吗？我尝试使用两个 for 循环：

```
for i=1:20
    for j=1:17
        rexy_i_j = re2(xc==i & yc==j,:);
    end
end 
```

但它没有用。

我怎样才能得到这些子矩阵？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:39:21.220

我同意@EitanT 的观点，即您应该使用元胞数组，而不是制作大量不同名称的数组。然后，您可以将这些子矩阵作为`rexy{i,j}`.

要构造此元胞数组，您可以使用`accumarray`如下方式：

```
rexy = accumarray(re2(:,6:7),(1:size(re2,1))',[],@(x){re2(x,:)}) 
```

# c++ - dgesv 中的舍入错误？

> ID：13235941
> 
> 赞同：0
> 
> 时间：2012-11-05T16:10:13.477
> 
> 标签：c++, fortran

我在 C++ 中使用 dgesv 和 dgemm fortran 子例程来做一些简单的矩阵乘法和左除法。

对于随机矩阵 A 和 B，我这样做：

```
A\(A\(A*B)); 
```

其中 * 使用 dgemm 定义，\ 使用 dgesv 定义。显然，这个表达式应该简化为单位矩阵。我正在针对 MATLAB 测试我的答案，我在对角线上得到了或多或少的 1，但其他条目略有偏差（数字在 e-15 的数量级上，所以它们已经接近 0） .

我只是想知道这个结果是否可以预期？因为如果我做这样的事情：

```
C = A+B;
D = A*B;

D\(C\(C*C)); 
```

结果应该输出到 D\C。基本上，C(C*C) 非常准确（与 MATLAB 完美匹配），但第二次我做 D\CI 得到的东西与 e-1 甚至 e+00 不同。我猜这不应该发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:56:25.003

您的问题似乎与 C/C++ 中浮点变量的有限精度有关。[你可以在这里](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)阅读更多关于它的信息。有一些技术可以最大限度地减少这种影响（其中一些在 wiki 文章中进行了描述），但在一些操作之后总会有一些准确性损失。您可能想要使用一些支持任意精度数的第三方数学库（例如 GMP）。但是仍然——只要你坚持数值方法，你的计算的准确性总是会受到污染。

# jquery - JQuery SimpleModal - 内部链接？

> ID：13235943
> 
> 赞同：1
> 
> 时间：2012-11-05T16:10:17.003
> 
> 标签：jquery, simplemodal

我设法使用 simplemodal 插件让多个模态窗口工作，但我需要能够在它们之间切换而无需用户先手动关闭它。

在这一点上，我仍在通过示例学习这一点。我已经看到了一些关于这个问题的其他参考资料，但是所提供的解决方案要么不起作用，要么没有从相同的构建块开始。

非常感谢任何提示或建议。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SimpleModal</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
<script type='text/javascript' src='js/jquery.simplemodal.js'></script>
<script>
jQuery(function ($) {
    $('#basic-modal .link1').click(function (e) {
        $('#link1-modal-content').modal();
        return false;
    });

    $('#basic-modal .link2').click(function (e) {
        $('#link2-modal-content').modal();
        return false;
    });

    $('#basic-modal .link3').click(function (e) {
        $('#link3-modal-content').modal();
        return false;
    });
});
</script>
<style>
#simplemodal-overlay {background-color:#000; cursor:wait;}
</style>
</head>

<body>

<!-- MAIN PAGE / LINKS TO MODAL WINDOWS-->
<div id='basic-modal'>
    <a href="#" class="link1" id="pop1">Link to Content 1</a><br />
    <a href="#" class="link2" id="pop2">Link to Content 2</a><br />
    <a href="#" class="link3" id="pop3">Link to Content 3</a><br />
</div>

<!-- INDIVIDUAL MODAL WINDOWS CONTENT  -->
<div id="link1-modal-content" style="display:none; width:200px; height:200px; background-color:#FFFFFF;">
    <p>Content 1</p>
    Content 1<br />
    <a href="#" class="link2" id="pop2">Link to Content 2</a><br />
    <a href="#" class="link3" id="pop3">Link to Content 3</a><br />
</div>

<div id="link2-modal-content" style="display:none; width:200px; height:200px; background-color:#FFFFFF;">
    <p>Content 2</p>
    <a href="#" class="link1" id="pop1">Link to Content 1</a><br />
    Content 2<br />
    <a href="#" class="link3" id="pop3">Link to Content 3</a><br />
</div>

<div id="link3-modal-content" style="display:none; width:200px; height:200px; background-color:#FFFFFF;">
    <p>Content 3</p>
    <a href="#" class="link1" id="pop1">Link to Content 1</a><br />
    <a href="#" class="link2" id="pop2">Link to Content 2</a><br />
    Content 3<br />
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:38:03.620

SimpleModal 只允许在任何时候打开一个模态，因此您需要关闭任何现有的模态并打开一个新的模态或交换它们的内容。

要打开/关闭，请使用以下代码代替您的 javascript：

```
function closeAllModal() {
    $.modal.close();
}

jQuery(function ($) {

    $('.link1').click(function (e) {
        closeAllModal();

        $('#link1-modal-content').modal();
        return false;
    });

    $('.link2').click(function (e) {
        closeAllModal();

        $('#link2-modal-content').modal();
        return false;
    });

    $('.link3').click(function (e) {
        closeAllModal();
        $('#link3-modal-content').modal();

        return false;
    });
}); 
```

我已将点击选择器更改为通用的，因此它绑定到所有链接并添加了一个调用以在打开每个模式之前关闭模式。这应该会给你想要的效果。

# c# - 匹配模式的正则表达式行

> ID：13235944
> 
> 赞同：1
> 
> 时间：2012-11-05T16:10:20.810
> 
> 标签：c#, regex

我想要一个正则表达式模式来匹配具有以下模式的文本文件中的所有行：

```
TcQuery {dynamic_content} Alias "{dynamic_content}" New 
```

如果文本文件有这两行：

```
//tcquery c_query alias "qrybklog" new           <= This one shouldn´t be found because there is two backslashes before TcQuery.

tcquery c_query alias "qrybklog" new             <= I want a pattern to match this line 
```

我试过了，但两条线都匹配：

```
 var prw = System.IO.File.ReadAllText(@"d:\backlog.prw", Encoding.ASCII);

        prw = "//TcQuery c_query Alias teste1 new";
        prw = "\nTcQuery c_query Alias teste2 new";
        prw = "\nTcQuery c_query Alias teste3 new";
        prw = "\n//TcQuery c_query Alias teste4 new";
        var regexTcQuery = new Regex("TcQuery+[ *]+[0-9a-zA-Z_]+[ *]+alias+[ *]+[0-9a-zA-Z_\"]+[ *]new$", RegexOptions.IgnoreCase);

        var resultTcQuery = regexTcQuery.Matches(prw); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T16:14:01.650

与此正则表达式一起使用`singleline`和`ignorecase`选项

```
(?<!\/\/)\s*?\btcquery\b(.*?)\balias\b.*?new 
```

* * *

`(?<!\/\/)`检查`//`之前`tcquery`

`.*?`是一个懒惰地匹配 0 到多个字符。如果使用`.*`then 它将匹配最后一个`tcqurey`跳过的 ibetween`tcquery`匹配项

`\b`是一个`non-word`边界。这允许我们匹配单独的单词

`\s`匹配空间，`0`可以`many`是任何`[\n\r\t\f]`

* * *

如果你想获得 c_query 文本，你可以这样做

```
List<string> lst=Regex.Matches(input,@"(?<!\/\/)\s*?\btcquery\b(.*?)\balias\b.*?new").Cast<Match>().Select(x=>x.Groups[1].Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:13:09.190

如果你想匹配整行（没有任何子组），你可以使用：

```
^tcquery.*$ 
```

`^`表示文本从字符串的开头开始；因为`tcquery`是紧随其后的文本，以 开头的`//`行将被忽略。

如果之前有任何空格`tcquery`，您可以将其与`\s*`：

```
^\s*tcquery.*$ 
```

如果您有可以以`tcquery`但不一定遵循您指定的格式的行，您可以使用以下方式更新模式：

```
^\s*tcquery.*alias.*new.*?$ 
```

要将行的“动态”内容部分匹配到组中，您应该能够使用：

```
^\s*tcquery\s+(.*)\s+alias\s+"(.*)"\s+new.*?$ 
```

另外，值得注意的是，您应该为我上面的每个示例启用忽略大小写正则表达式选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:18:34.177

```
([^\/\/])tcquery (.*) alias \"(.*)\" new$/i 
```

如果您的语言不支持 /i 进行无大小写匹配，则将正则表达式切换为：

```
([^\/\/])TcQuery (.*) Alias \"(.*)\" New$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:19:32.540

尝试这个：

```
^tcquery [^ ]+ alias "[^"]+" new 
```

这是一个业余爱好者，但主要思想是该行必须以 tcquery 开头。

# wordpress - Wordpress $wpdb->get_results 和 num_rows

> ID：13235947
> 
> 赞同：6
> 
> 时间：2012-11-05T16:10:34.150
> 
> 标签：wordpress

我正在使用以下代码：

```
 $wpdb->get_results("
                        SELECT * FROM " . $wpdb->prefix . "product_order 
                            WHERE 
                            rel = '" . $post["id"] . "' AND 
                            `range` = '" . $range . "' AND 
                            category = '" . $range . "'
                    "); 

                    echo $wpdb->num_rows; 
```

即使数据库中没有行，num_rows 也会返回 1？有任何想法吗？

我放入的变量看起来不错。所以它应该正确查询。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-18T06:40:28.360

```
global $wpdb;
$wpdb->get_results("
                    SELECT * FROM " . $wpdb->prefix . "product_order 
                        WHERE 
                        rel = '" . $post["id"] . "' AND 
                        `range` = '" . $range . "' AND 
                        category = '" . $range . "'
                "); 

echo $wpdb->num_rows; 
```

现在它返回从上面查询中选择的行数，如果没有选择行，则返回 0.....

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-02T00:05:41.793

如果您只想要计数（也许是分页总数），这样做会更快：

```
global $wpdb;
$rows = $wpdb->get_results("
                    SELECT COUNT(*) as num_rows FROM " . $wpdb->prefix . "product_order 
                        WHERE 
                        rel = '" . $post["id"] . "' AND 
                        `range` = '" . $range . "' AND 
                        category = '" . $range . "'
                "); 

echo $rows[0]->num_rows; 
```

# css - 关闭 ClearType 的 WinXP 上的可怕字体 - 仅限 Chrome

> ID：13235958
> 
> 赞同：0
> 
> 时间：2012-11-05T16:11:40.343
> 
> 标签：css, windows, google-chrome, fonts, cleartype

以下情况存在一个大问题：用户使用的是 Windows XP，ClearType 已关闭，Google Chrome 和网站正在使用 Google Web Fonts。

在这种情况下，字体看起来非常“生涩”，并且仅在 Chrome 中。
css "-webkit-font-smoothing" 不会有任何好处。

另外，我注意到大字体并没有那么糟糕。您可以在图片中看到大字体，它们看起来还不错。

具有这些设置的用户是否有解决方案来拥有漂亮的字体？

![可怕的字体](../Images/9ce6e2e16ce61ee059b8f5116098eb30.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:18:57.593

关闭 ClearType 就真的没有希望了。即使是原生系统字体在 ClearType 关闭时看起来也很糟糕。

我相信 IE8 及更高版本会自动覆盖 XP 上的操作系统设置并打开 ClearType，但我认为非 IE 浏览器没有办法做到这一点。

如果您关心这一类别中相对较小比例的访问者，您将需要花费大量时间来选择和测试更好的字体。

我的建议是不要担心——这些用户会习惯于在网络上看到可怕的字体，因为他们不知道或无法更改系统设置。

# java - Math.cos 不工作

> ID：13235963
> 
> 赞同：3
> 
> 时间：2012-11-05T16:12:02.007
> 
> 标签：java, trigonometry

我的程序的这一部分应该使用余弦规则计算bottomAngle。

```
public double bottomAngle() {

        topAngleinRadians = Math.toRadians(topAngle) ;

        return (Math.cos(topAngleinRadians)(bottomAngle() = ladderLength^2 + floorLength^2 - verticalHeight^2) / 2 * ladderLength * floorLength) ;
        } 
```

产生的错误： ![在此处输入图像描述](../Images/4548650aeb2611904a8e9240a7244bc3.png)

这是我的错误列表，我无法弄清楚我的公式有什么问题。所有方法，如 verticalHeight 、 ladderLength 在其他方法中都可以正常工作。我提出这个公式的方式有问题。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:16:58.733

如果没有看到您的错误列表，您确实有语法错误：

`return (Math.cos(topAngleinRadians)(bottomAngle() = ladderLength^2 + floorLength^2 - verticalHeight^2) / 2 * ladderLength * floorLength);`

*   在您的调用`Math.cos()`和表达式的下一部分之间没有运算符。
*   您似乎也在为函数调用分配值，这没有任何意义。
*   该`^`运算符也不是指数运算符，而是按位异或运算符。您可能正在寻找`Math.pow()`.

这些正是我从顶部看到的。[阅读有关 Java运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)及其评估方式的信息可能会有所帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T16:19:29.417

这里有几个问题。

**乘法**- 与常规代数不同，您必须明确定义要在两个表达式之间进行乘法运算`Math.cos(topAngleinRadians)*...`

**分配**- 您似乎试图将某些东西分配给方法调用 ( `bottomAngle() = ...`)。这不是您真正可以做的事情，我不确定您要通过它来实现什么。

**平方**-在java`10^2`中不平方，而是（异或）运算符。您可能想使用或简单地使用`10``100``XOR``Math.pow(ladderLength, 2)``ladderLength * ladderLength`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T16:14:33.570

与代数表示法不同，Java 括号不会隐式相乘。

您需要插入一个`*`between `)(`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T16:19:06.283

无法真正理解您的 return 语句的目的，但我宁愿将语句分成 2-3 行以使其更具可读性：-

```
public double bottomAngle() {

        topAngleinRadians = Math.toRadians(topAngle) ;

        double bottomAngle = Math.pow(ladderLength, 2) + Math.pow(floorLength, 2) - 
                             Math.pow(verticalHeight, 2);

        double denom = 2 * ladderLength * floorLength;
        double numerator = bottomAngle * Math.cos(topAngleinRadians);

        return numerator / denom ;
} 
```

请注意，在 Java`3 ^ 2`中确实意味着。`3 squared`你需要`Math.pow`方法。

此外，您需要检查为什么要`bottomAngle()`在 LHS 上进行方法调用。我假设它是一个临时变量。

如您所见，您的代码看起来更具可读性。并且很容易找出编译器错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T16:17:12.523

您的语法不正确。括号不表示乘法，您需要显式 * （乘法运算符）。此外，您还有其他一些错误：

```
Math.cos(topAngleinRadians)(bottomAngle() = ladderLength^2 + floorLength^2... 
```

这看起来像一个方法调用，即 bottomAngle() 被设置为等于其他表达式，这也是无效的..

# java - Spring + Tiles 如何在tiles.xml中使用EL

> ID：13235965
> 
> 赞同：1
> 
> 时间：2012-11-05T16:12:00.903
> 
> 标签：java, spring, el, tiles

我在我的春季项目中设置了瓷砖作为视图处理程序，如下所示：

```
<bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver" />
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/views/**/tiles.xml</value>
        </list>
    </property>
</bean> 
```

我想使用 EL 访问tiles.xml 中的会话范围，以解析jsp 文件名。如果我使用 CompleteAutoloadTilesContainerFactory，这应该是可能的，如下所述：

[http://tiles.apache.org/framework/tutorial/advanced/el-support.html](http://tiles.apache.org/framework/tutorial/advanced/el-support.html)

如何设置我的弹簧瓷砖配置以允许这样做。我已经尝试使用当前设置的 EL，但未解析 EL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:23:07.567

想通了，我留下了完全相同的配置，只包括了 tiles-el.jar 。不过不需要包含tiles-extras.jar。NFV

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:46:59.563

您可以尝试设置 TilesConfigurer 类的 completeAutoload 属性。请参阅参考文档[TilesConfirurer](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesConfigurer.html)。

这可能需要 Tiles-Extras 2.2 jar 文件。

# intellij-idea - 使用 Gradle 和 IntelliJ 管理项目依赖项

> ID：13235967
> 
> 赞同：7
> 
> 时间：2012-11-05T16:12:15.117
> 
> 标签：intellij-idea, gradle

我希望使用 Gradle 来构建我的基于 Groovy / Grails 的项目，我们使用 IntelliJ Idea 作为 IDE。

我正在使用 IntelliJ 版本 11.1.4，Gradle 版本 1.2。

我的项目配置为具有各种 Groovy 和 Grails 子项目的多项目构建。

我希望这会给我提供与通过 Maven 管理构建相同的 IDE 支持，例如：

*   自动依赖管理（添加到各种 build.gradle 时将新依赖导入 IntelliJ）
*   构建 DSL 支持
*   构建任务的执行
*   执行构建时由 IDE 使用底层构建系统 (gradle)\

我已通过打开根 build.gradle 文件将我的项目导入 IntelliJ。

到目前为止，我遇到了一些烦人的问题：

1.  IntelliJ 无法识别（或随机识别）对 build.gradle 文件中依赖项的更改，因此不会更新依赖项。
2.  gradle“idea”插件似乎不适用于多模块项目。

人们如何在 IntelliJ 中使用 Gradle？您是否在 IntelliJ 中手动管理依赖项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T00:57:22.003

我已经使用 Gradle “idea” 插件有一段时间了，效果很好。由于“idea”插件仅生成 IntelliJ 项目配置文件，因此您可以使用它做的事情有所限制，但是与 IntelliJ gradle 支持（JetGradle 事物）相比，我在它方面取得了更大的成功。

Gradle“idea”插件确实适用于多模块项目，从来没有遇到过问题。我总是将父项目配置放在`master`文件夹中（参见[初始化章节](http://gradle.org/docs/current/userguide/build_lifecycle.html#sec%3ainitialization)），这似乎有效。虽然从未尝试过嵌套结构。

为了进行额外的 IntelliJ 配置，您可以从 gradle 进行一些修改`.ipr`，`.iml`或者尝试使用[我的插件](https://github.com/rodionmoiseev/gradle-plugins)之一（请参阅实用程序插件），它将为您完成大部分修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T10:19:05.737

最后我接受了上面的rodion的建议并使用了idea插件。事实证明我第一次尝试时没有正确配置它（仅将插件应用于主项目，而不是子项目）。

我只是在编写自己的任务以更新 IntelliJ 项目的依赖项（基于 .idea 目录布局项目结构）后才发现这一点。我将使用该插件，因为维护会更少，但这是我的后代解决方案，以防它对任何人有用：

```
ext {
    intelliJLibraryDir = "$gradle.rootProject.rootDir/.idea/libraries"
    userHomeDir = gradle.gradleUserHomeDir.parent
}

task cleanIntelliJLibraries << {
    ant.delete (includeEmptyDirs: 'true') { 
        fileset(dir: intelliJLibraryDir, includes: '*.xml') 
    }
}

task createIntelliJLibraries(dependsOn: cleanIntelliJLibraries) << {

    // The unique set of dependency artifacts across all subprojects
    def uniqueProjectArtifacts = subprojects.collectMany {
        if (it.configurations.compile) {
            it.configurations.compile.resolvedConfiguration.resolvedArtifacts.findAll { 
                it.moduleVersion.id.group != "my.project" 
            }
        }
        else { [] }
    }.unique()

    // Output a library xml file for each of the dependency artifacts
    uniqueProjectArtifacts.each { artifact ->

        def artifactPath = artifact.file.path                       
        def artifactName = artifact.moduleVersion.id.with { "$group:$name:$version" }

        def intelliJLibraryPath = artifactPath.replace(userHomeDir, '$USER_HOME$')                  
        def intelliJLibraryFileName = "Gradle__$artifactName".replace(':', '_').replace('.','_') + ".xml"

        new File("$intelliJLibraryDir/$intelliJLibraryFileName").withWriter { writer ->

            def dependencyXML = new MarkupBuilder( writer )

            dependencyXML.component (name: "libraryTable") {
                library (name: "Gradle: $artifactName") {
                    CLASSES {
                        root (url: "jar://$intelliJLibraryPath!/")
                    }
                    JAVADOC {}
                    SOURCES {}
                }
            }
        }
    }           
}

task updateIntelliJModules(dependsOn: createIntelliJLibraries) << {

    subprojects.each { project ->

        def root = new XmlSlurper().parse(new File("${project.name}.iml"))

        // Remove the existing dependencies
        root.component.orderEntry.findAll { it.@type == "library" && it.@level == "project" }.replaceNode {}

        // Add in the new dependencies
        if (project.configurations.compile) {

            project.configurations.compile.resolvedConfiguration.resolvedArtifacts.findAll {
                it.moduleVersion.id.group != "my.project"
            }.each { artifact ->
                def artifactName = artifact.moduleVersion.id.with { "Gradle: $group:$name:$version" }

                root.component.appendNode {
                    orderEntry (type: "library", exported: "", name: artifactName, level: "project")
                }
            }

        }

        def outputBuilder = new StreamingMarkupBuilder()

        new File("${project.name}.iml").withWriter { writer ->
            groovy.xml.XmlUtil.serialize(outputBuilder.bind{ mkp.yield root }, writer)
        }
    }
} 
```

# html - 使用 Rook 自定义 HTTP 处理程序

> ID：13235968
> 
> 赞同：1
> 
> 时间：2012-11-05T16:12:31.333
> 
> 标签：html, r, r-rook-package

我正在使用 R 中的 Rook 包构建这个应用程序：

```
library(Rook) 

s <- Rhttpd$new()

s$start(quiet=T)

PIC.DIR = paste(getwd(), 'pic', sep='/')

my.app <- function(env){
  ## Start with a predefined lognormal mean and median, and allow a user to input custom values
  req <- Request$new(env)
  res <- Response$new()

  E <- 1.5
  MED <- 1
  xmax <- 5
  breaks <- 500
  ## Allow user to input custom mean/median values
  if (!is.null(req$POST())){
    E <- as.numeric(req$POST()[["mean"]])
    MED <- as.numeric(req$POST()[["median"]])
    xmax <- as.numeric(req$POST()[["xmax"]])
    breaks <- as.numeric(req$POST()[["breaks"]])
  }

  mu <- log(MED)
  sd <- sqrt(2*log(E/MED))
  MO <- exp(mu - sd^2)

  rate <- rlnorm(1000000, mu, sd)

  today <- Sys.Date()
  dt <- format(today, format="%m/%d/%y")
  sc <- paste("Source: My Source, accessed ", dt)

  png(file=paste(PIC.DIR, "/mypic.png", sep=""), width=1024, height=612)
  h1 <- hist(rate, freq=F, col="red", xlim=c(0,xmax), breaks=breaks, main="Rate",
         xlab="Rate", ylab="# of Studies", sub=sc)
  dev.off()

  res$write('<head> 
          <title> Rate Curve </title>
         </head>
        <h1>Rate Distribution Analysis</h1>')
  res$write(paste("<img src='", s$full_url("pic"), "/mypic.png'", 
        "width='1024 px' height='612 px' />", sep = ""))
  res$write('<p>
        Input Lognormal Parameters:<form method="POST"> </br>
        mean: <input type="text" name="mean" value="1.5" /> </t>
        median: <input type="text" name="median" value="1" /> </br>
        </br>
        Graphics parameters </br>
        X-axis limit: <input type="text" name="xmax" value="5" /> </t>
        Histogram breaks: <input type="text" name="breaks" value="500" /> </br>
        <input type="submit" name="Go" />\n</form>
        </p>')
  res$finish()

}

s$add(app=my.app, name='lognorm')
s$add(app = File$new(PIC.DIR), name = "pic")
s$browse('lognorm') 
```

浏览器最初加载正常，但是当我尝试在输入中输入不同的值时，出现此错误：

> 未找到 R 自定义 HTTP 处理程序
> 
> 无法找到 /custom/lognorm_mode 的自定义 HTTP 处理程序

是否加载了实现此 HTTP 处理程序的包？

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:31:55.583

而不是最后一部分

```
s$add(app=my.app, name='lognorm')
s$add(app = File$new(PIC.DIR), name = "pic")
s$browse('lognorm') 
```

尝试

```
library(Rook)

myPort <- 23845
myInterface <- "127.0.0.1"
status <- -1

status <- .Internal(startHTTPD(myInterface, myPort))

if (status == 0) {
    unlockBinding("httpdPort", environment(tools:::startDynamicHelp))
    assign("httpdPort", myPort, environment(tools:::startDynamicHelp))
    s <- Rhttpd$new()
    s$listenAddr <- myInterface
    s$listenPort <- myPort
    s$launch(name = "lognorm", app = my.app)
} 
```

即使在网页启动后，这也应该使服务器保持活动状态。

（来源[http://jeffreyhorner.tumblr.com/post/33814488298/deploy-rook-apps-part-ii](http://jeffreyhorner.tumblr.com/post/33814488298/deploy-rook-apps-part-ii)）

# r - 带有ggplot2的二分网络图

> ID：13235972
> 
> 赞同：10
> 
> 时间：2012-11-05T16:12:53.173
> 
> 标签：r, ggplot2, bipartite

我有以下数据框：

```
structure(list(X1 = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 4L, 4L, 
4L, 4L, 4L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 5L, 6L, 6L, 6L
), .Label = c("1", "2", "3", "4", "5", "6"), class = "factor"), 
    X2 = structure(c(1L, 6L, 8L, 10L, 12L, 13L, 3L, 4L, 1L, 6L, 
    7L, 9L, 10L, 12L, 13L, 3L, 4L, 5L, 10L, 12L, 13L, 4L, 1L, 
    6L, 12L, 13L, 3L, 1L, 6L, 7L, 8L, 10L, 11L, 12L, 13L, 2L, 
    3L, 11L, 12L, 13L), .Label = c("I1", "I10", "I11", "I12", 
    "I13", "I2", "I3", "I4", "I5", "I6", "I7", "I8", "I9"), class = "factor")), .Names = c("X1", 
"X2"), row.names = c(NA, -40L), class = "data.frame") 
```

其中 X1 是人员编号，X2 是人员所属的组。一个人可以在不同的组中。现在我想从每个人到他所属的每个组划一条线。我用`plot()`这种方式解决了它：

```
plot(0, xlim=c(0,1), ylim=c(0,1), type="n", axes=FALSE, xlab="", ylab="")

factor.to.int <- function(f) {
  (as.integer(f) - 1) / (length(levels(f)) - 1)
}

segments(factor.to.int(data$X1), 0, factor.to.int(data$X2), 1, col=data$X1)
axis(1, at = seq(0, 1, by = 1 / (length(levels(data$X1)) - 1)), labels = levels(data$X1))
axis(3, at = seq(0, 1, by = 1 / (length(levels(data$X2)) - 1)), labels = levels(data$X2)) 
```

结果如下所示： ![二分图](../Images/fb2157695fe2fb89a2272029f33d107e.png)

现在我想知道如何用 ggplot2 做到这一点？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T03:53:41.993

通过使用和转换数据，就像您对基本图形版本所做的那样，您的图形的简单`ggplot2`版本是可能的。`geom_segment()`我还包含了一个可以说是更精致的版本，它使用了 ggplot2 中的一些更高级的自定义选项。

```
# Using ggplot2 version 0.9.2.1
library(ggplot2)

dat$x1_norm = rangeTransform(as.integer(dat$X1))
dat$x2_norm = rangeTransform(as.integer(dat$X2))

dat$y1 = 0
dat$y2 = 1

# Simple version.
p1 = ggplot(dat, aes(x=x1_norm, xend=x2_norm, y=y1, yend=y2, colour=X1)) +
     geom_segment(size=1.2) +
     scale_colour_brewer(palette="Set1", name="Person")

ggsave(plot=p1, filename="plot_1.png", height=3.5, width=6) 
```

![在此处输入图像描述](../Images/cbd5568ace34612e2afff17c813d76e3.png)

```
# Fancy version.
# Create separate data.frames to manually specify axis ticks and axis text.
axis_1 = data.frame(x=rangeTransform(as.integer(unique(dat$X1))),
                    y=0, label=as.character(unique(dat$X1)))

axis_2 = data.frame(x=rangeTransform(as.integer(unique(dat$X2))),
                    y=1, label=as.character(unique(dat$X2)))

p2 = ggplot(data=dat) +
     theme_bw() +
     theme(axis.title=element_blank()) +
     theme(axis.text=element_blank()) +
     theme(axis.ticks=element_blank()) +
     theme(panel.grid=element_blank()) +
     geom_segment(aes(x=x1_norm, xend=x2_norm, y=y1, yend=y2, colour=X1),
                  size=1.2) +
     geom_segment(x=0, xend=1, y=0, yend=0, size=0.7) +
     geom_segment(x=0, xend=1, y=1, yend=1, size=0.7) +
     scale_colour_brewer(palette="Set1", name="Person") +
     scale_y_continuous(limits=c(-0.2, 1.2), expand=c(0, 0)) +
     geom_segment(data=axis_1, aes(x=x, xend=x, y=y, yend=y-0.025), size=0.7) +
     geom_segment(data=axis_2, aes(x=x, xend=x, y=y, yend=y+0.025), size=0.7) +
     geom_text(data=axis_1, aes(label=label, x=x, y=y - 0.075)) +
     geom_text(data=axis_2, aes(label=label, x=x, y=y + 0.075))

ggsave(plot=p2, filename="plot_2.png", height=3.5, width=6) 
```

![在此处输入图像描述](../Images/2a28cb5e318d4cd9cc46a8f82e0ce849.png)

# sql - 计算每个唯一值的出现次数

> ID：13235981
> 
> 赞同：37
> 
> 时间：2012-11-05T16:13:42.380
> 
> 标签：sql, count

基本上我有一个类似的表：

```
time.....activities.....length  
13:00........3.............1  
13:15........2.............2  
13:00........3.............2  
13:30........1.............1  
13:45........2.............3  
13:15........5.............1  
13:45........1.............3  
13:15........3.............1  
13:45........3.............2  
13:45........1.............1  
13:15........3.............3 
```

几点注意事项：

*   活动可以在 1 到 5 之间
*   长度可以在 1 到 3 之间

查询应返回：

```
time........count  
13:00.........2  
13:15.........2  
13:30.........0  
13:45.........1 
```

基本上对于每个唯一时间，我都想要计算活动值为 3 的行数。

那么我可以说：

```
At 13:00 there were X amount of activity 3s.
At 13:45 there were Y amount of activity 3s. 
```

然后我想计算活动 1s、2s、4s 和 5s。所以我可以绘制每个独特时间的分布。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-05T16:19:35.073

是的，您可以使用`GROUP BY`：

```
SELECT time,
       activities,
       COUNT(*)
FROM table
GROUP BY time, activities; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-05T16:18:51.423

```
select time, coalesce(count(case when activities = 3 then 1 end), 0) as count
from MyTable
group by time 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/ed37e/2)

**输出：**

```
|  TIME | COUNT |
-----------------
| 13:00 |     2 |
| 13:15 |     2 |
| 13:30 |     0 |
| 13:45 |     1 | 
```

如果要计算一个查询中的所有活动，可以执行以下操作：

```
select time, 
    coalesce(count(case when activities = 1 then 1 end), 0) as count1,
    coalesce(count(case when activities = 2 then 1 end), 0) as count2,
    coalesce(count(case when activities = 3 then 1 end), 0) as count3,
    coalesce(count(case when activities = 4 then 1 end), 0) as count4,
    coalesce(count(case when activities = 5 then 1 end), 0) as count5
from MyTable
group by time 
```

这种按活动分组的优势在于，即使该时间段没有该类型的活动，它也会返回计数 0。

当然，这不会返回没有任何类型活动的时间段的行。如果你需要，你需要使用一个左连接表来列出所有可能的时间段。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T16:18:04.803

如果我理解你的问题，这会起作用吗？（您必须用您的实际列名和表名替换）

```
SELECT time_col, COUNT(time_col) As Count
FROM time_table
GROUP BY time_col
WHERE activity_col = 3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-09T05:39:06.627

您应该将查询更改为：

```
SELECT time_col, COUNT(time_col) As Count
FROM time_table
WHERE activity_col = 3
GROUP BY time_col 
```

这个 vl 工作正常。

# ruby-on-rails - Rails - 总是要检查存在，然后价值？

> ID：13235986
> 
> 赞同：1
> 
> 时间：2012-11-05T16:13:59.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在检查相关表中的值是否在我看来经常存在，在这种情况下，费用已获得批准。如果它们尚未提交，则批准表中没有它们的记录。

我最终得到了一些非常尴尬的代码

```
<% if !expense_item.expense_approval || expense_item.expense_approval.approval_status == 0 %> 
```

有没有办法对一个值做一个 if 语句，而不必先检查它是否存在？或者一些默认的方式来设置它为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:58:28.543

您可以在`ExpenseItem`模型中执行以下操作：

```
delegate :approval_status, :to => :expense_approval, :allow_nil => true 
```

这应该允许您简单地执行以下操作：

```
if expense_item.approval_status == 0 
```

上面的 try 方法当然有效，但我更喜欢委托，因为我不必拥有`.try(...)`所有代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T16:16:52.230

您可以使用 try 方法，如果传递的方法不存在，该方法将返回 nil。所以你可以做类似的事情：

```
expense_item.expense_approval.try(:approval_status) == 0 
```

# c# - 提取与 dapper dot net orm 一对多关系的最佳方法？

> ID：13235988
> 
> 赞同：12
> 
> 时间：2012-11-05T16:14:02.143
> 
> 标签：c#, orm, one-to-many, dapper

我有两个类“产品”和“卖家”。

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }

    public Seller Seller { get; set; }
    public int? SellerId { get; set; }
}
public class Seller
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Product> Products { get; set; }
} 
```

我想使用 dapper 提取所有产品的卖家列表。

目前我正在这样做：

```
Dictionary<int, Seller> dic = new Dictionary<int, Seller>();
        Conn.Query<Seller, Product, int>
            (@"select s.*,p.* from Sellers s Join Products p 
                on p.SellerId = s.Id",
            (s, p) => {
                if (dic.ContainsKey(s.Id))
                    dic[s.Id].Products.Add(p);
                else
                {
                    s.Products = new List<Product>();
                    s.Products.Add(p);
                    dic.Add(s.Id, s);
                }
                return s.Id; 
            });
        var sellers = dic.Select(pair => pair.Value); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T06:02:40.740

我认为您将存储数据的方式与使用数据的方式混合在一起。我建议规范化你的数据库。

```
//Normalized Database classes
public class Seller
{
    public int Id { get; set; }  // primary key
    public string Name { get; set; }
}

public class Product
{
    public int Id { get; set; }  // primary key
    public int SellerId { get; set; } // foreign key
    public string Name { get; set; }
    public decimal Price { get; set; }
} 
```

然后就可以直接查询 Seller 和 product 表了。

```
var Sellers = connection.Query<Seller>("Select * from Seller");
var Products = connection.Query<Product>("Select * from Product"); 
```

然后使用 linq "group by" 将 Product 放入字典中

```
var SellerWithProductsDict = 
        (from prod
        in Products 
        group prod by prod.SellerId
        into groupedProducts
        select groupedProducts)
        .ToDictionary(gp => gp.SellerId, gp => gp.ToList()); 
```

然后你可以通过 SellerWithProductsDict 循环查看所有卖家产品，如果你需要卖家名称，只需从 Sellers 查询结果中通过索引获取它

## ******************************************

这就是答案的结尾，但是如果您真的需要将产品与卖家混合，您可以使用上面相同的数据库结构并执行以下操作：

```
var qry = @"Select s.Id as SellerId,
                   s.Name as SellerName,
                   p.Id as ProductId,
                   p.Name as ProductName,
                   p.Price as ProductPrice
            From Seller as s, Product as p
            Where s.Id = p.id"

var SellerWithProducts = connection.Query(qry) 
```

然后使用 linq "group by" 函数将其放入字典中。我建议查看此“ [Linq group-by multiple fields](https://stackoverflow.com/questions/1869001/linq-group-by-multiple-fields-syntax-help) ”帖子以获取 linq 组的帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T21:54:05.707

由于某种原因，我的上一篇文章发疯了。

首先，从数据库中获取所有内容可能是个坏主意。您可能需要考虑限制您的查询。即使您的桌子现在可能很小，您也不想将自己靠在墙上。

话虽如此，我建议通过在卖方和产品上添加静态方法来简化获取卖方和产品的代码。

```
public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public decimal Price { get; set; }

    public int? SellerId { get; set; }
    public Seller Seller { get; set; }

    public static Product GetProductById(int id)
    {
        Product product = null;
        using (SqlConnection connection = new SqlConnection("connectionString"))
        {
            product = connection.Query<Product>("select * from Product where Id = @Id", new { Id = id }).SingleOrDefault();
            product.Seller = connection.Query<Seller>("select * from Seller where Id = @Id", new { Id = product.SellerId }).SingleOrDefault();
        }

        return product;
    }
}

public class Seller
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Product> Products { get; set; }

    public static Seller GetSellerById(int id)
    {
        Seller seller = null;
        using (SqlConnection connection = new SqlConnection("connectionString"))
        {
            seller = connection.Query<Seller>("select * from Seller where Id = @Id", new { Id = id }).SingleOrDefault();
            if(seller != null)
            {
                seller.Products = connection.Query<Product>("select * from Product where SellerId = @Id", new { Id = id }).ToList();
                seller.Products.ForEach(p => p.Seller = seller);
            }
        }

        return seller;
    }
} 
```

请记住，这很粗略，并不能代表您可能需要的一切，但从长远来看，它更容易使用，并且比使用查询来获取数据更好地遵循面向对象的设计。

您可以通过添加查询有关卖家或产品的其他信息的方法（例如 GetSellersInZipCode(int zipCode) 并通过该方法返回一个列表）来进一步扩展此想法。

# python - 支持 sqlite 和 sqlite3

> ID：13235994
> 
> 赞同：4
> 
> 时间：2012-11-05T16:14:18.600
> 
> 标签：python, sqlite

我有一个需要支持 Python 2.4 和 2.6 的应用程序。在 2.6 中，sqlite3 取代了 sqlite。`paramstyle`除了差异之外，我还有什么需要担心的吗？这是一种体面的处理方式吗？

```
try:
    import sqlite3 as sqlite
except ImportError:
    import sqlite

...

if sqlite.paramstyle == 'qmark':
    query = 'SELECT foo FROM bar where baz = ?'
else:
    query = 'SELECT foo FROM bar where baz = %s'
cursor.execute(query, params) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T16:20:26.043

在 python 2.4 上，使用[`pysqlite`包](https://pypi.python.org/pypi/pysqlite). 这与 2.5 版中添加到 Python 标准库中的包*完全相同*，当时它被重命名为`sqlite3`.

由于是同一个包，API没有区别，只需要使用`try` `except ImportError`测试即可：

```
try:
    import sqlite3
except ImportError:
    from pysqlite2 import dbapi2 as sqlite3 
```

# apache - Apache FOP 生成的 PDF 中的 PDF 表单

> ID：13235995
> 
> 赞同：3
> 
> 时间：2012-11-05T16:14:19.503
> 
> 标签：apache, itext, apache-fop, pdf-form

我正在使用 FOP 从 XSL:FO 和 iText 生成 PDF，以在 PDF 中应用数字签名和签名日期字段。

问题是我正在使用坐标在生成的 PDF 中应用签名和日期。

PDF 很大、动态且始终根据内容而变化。因此，签名和日期字段未按指定的坐标正确定位。

我用谷歌搜索了很长一段时间的解决方案。但我没有得到任何解决方案。

你能请任何人建议我使用 FOP 在 PDF 中创建 PDF 表单字段吗？然后我可以使用 iText 应用签名和日期字段。

请告诉我任何其他技术来尝试解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:53:21.897

问题是 FOP 不创建签名字段，而 iText 需要页码和坐标（由您或签名字段定义）。

您希望将签名放在哪里？它总是在第一页吗？总是在最后一页？您可以在您希望签署文件的位置放置一些独特的文本吗？

我问这个是因为你可以在最后一页上放像 SIGN HERE 这样的词，然后使用 TextRenderInfo 来检索这些词的坐标。请参阅[http://itextpdf.com/examples/iia.php?id=275](http://itextpdf.com/examples/iia.php?id=275)和[http://itextpdf.com/examples/iia.php?id=282](http://itextpdf.com/examples/iia.php?id=282)

[TextRenderInfo](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/parser/TextRenderInfo.html)类具有诸如`getBaseLine()`, `getDescentLine()`,... 之类的方法，它们为您提供对象`LineSegment`，该对象显示 PDF 中每个文本片段的坐标。

有很多警告：FOP 可以将 SIGN HERE 的单词剪成不同的片段，例如“SIG”、“N”、“HE”、“RE”，这会使识别唯一字符串变得困难，但值得研究。

# jpa - jpa 复合主键并可与唯一键连接

> ID：13235999
> 
> 赞同：5
> 
> 时间：2012-11-05T16:14:27.783
> 
> 标签：jpa, composite-primary-key, unique-key, jointable

这是sql表：
选项主键是名称+值

```
CREATE TABLE `option` (
  id int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(45) NOT NULL,
  `value` varchar(45) NOT NULL,
  PRIMARY KEY (`name`, `value`),
  UNIQUE KEY `id_UNIQUE` (`id`)
) 
```

产品主键是增量id

```
CREATE TABLE `product` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) 
```

一个产品有几个选项（由唯一键“id”引用）

```
CREATE TABLE product_option (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_product` int(11) NOT NULL,
  `id_option` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id_product` (`id_product`),
  KEY `id_option` (`id_option`),
  CONSTRAINT `FK_product_option` FOREIGN KEY (`id_product`) REFERENCES `product` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_option_product` FOREIGN KEY (`id_option`) REFERENCES `option` (`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
  ) 
```

在java方面，我已经以这种方式映射了“选项”

```
@Embeddable
public class OptionId implements Serializable{
    @Column(name="value")
    private String value;

    @Column(name="name")
    private String name;
}

@Entity @Table(name="option")
public class Option { 

    @Column(name="id", unique=true)
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Long id;

    @EmbeddedId
    private OptionId primaryKey;

    public OptionId getPrimaryKey() {
        return primaryKey;
    }

    public void setPrimaryKey(OptionId primaryKey) {
        this.primaryKey = primaryKey;
    }
} 
```

并以这种方式生产

```
@Entity
@Table(name="product")
public class Product {

    @Id @Column(name="id")
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private Long id;

    @Column(name="name")
    private String name

    @OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
    @JoinTable(
            name="product_option",
            joinColumns = @JoinColumn( name="id_product"),
            inverseJoinColumns = @JoinColumn( name="id_option", referencedColumnName="id")
    )
    private Set<Option> options;
} 
```

然后在执行时我得到这个错误

```
Caused by: java.lang.ArrayIndexOutOfBoundsException: 1
    at org.hibernate.sql.SelectFragment.addColumns(SelectFragment.java:107)
    at org.hibernate.persister.collection.BasicCollectionPersister.manyToManySelectFragment(BasicCollectionPersister.java:308)
    at org.hibernate.persister.collection.BasicCollectionPersister.selectFragment(BasicCollectionPersister.java:294)
    at org.hibernate.loader.JoinWalker.selectString(JoinWalker.java:1070)
    at org.hibernate.loader.AbstractEntityJoinWalker.initStatementString(AbstractEntityJoinWalker.java:124)
    at org.hibernate.loader.AbstractEntityJoinWalker.initStatementString(AbstractEntityJoinWalker.java:109)
    at org.hibernate.loader.AbstractEntityJoinWalker.initAll(AbstractEntityJoinWalker.java:91)
    at org.hibernate.loader.AbstractEntityJoinWalker.initAll(AbstractEntityJoinWalker.java:78)
    at org.hibernate.loader.entity.CascadeEntityJoinWalker.<init>(CascadeEntityJoinWalker.java:52)
    at org.hibernate.loader.entity.CascadeEntityLoader.<init>(CascadeEntityLoader.java:47)
    at org.hibernate.persister.entity.AbstractEntityPersister.createLoaders(AbstractEntityPersister.java:3254)
    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3191)
    at org.hibernate.persister.entity.SingleTableEntityPersister.postInstantiate(SingleTableEntityPersister.java:728)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:348)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1872)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:906)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)
    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:225)
    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:308)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 60 more 
```

如果我删除“referencedColumnName”，我当然会收到错误

```
A Foreign key refering Option from Product has the wrong number of column. should be 2 
```

但我不知道如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:22:45.720

根据您的架构，您的实体注释略有不同。在您指定“产品”和“选项”的地方，您应该使用“id_product”和“id_option”：

```
@OneToMany(cascade=CascadeType.ALL, fetch=FetchType.LAZY)
@JoinTable(
       name="product_option",
       joinColumns = @JoinColumn( name="id_product"),
       inverseJoinColumns = @JoinColumn( name="id_option", referencedColumnName="id")
)
private Set<Option> options; 
```

*顺便说一句，从长远来看，如果您在选项*表上切换主键和唯一键，您的生活将会轻松得多。