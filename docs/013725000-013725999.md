# StackOverflow 问答 13725000-13725999

# python - 旧版本 Cherrypy 的文档

> ID：13725002
> 
> 赞同：2
> 
> 时间：2012-12-05T14:04:58.523
> 
> 标签：python, ajax, web, cherrypy

嗨，我在cherrypy 3.2.0 版中编写了一个小型cherrypy http 服务器。但我有一个需求更改，将其部署在运行版本 2.3.0 的系统上。

我使用了一些显然在 3.x 中引入的工具，但在任何地方都找不到 2.x 的文档？？

1) 有谁知道我在哪里可以访问 2.x 文档？

或者...

2）如果有人有使用cherrypy的经验，您能否建议以下适用于2.x和3.x的代码的替代方案......

`@cherrypy.tools.json_out()`

`cherrypy.quickstart(myViewer(), '/', config='my_viewer.conf')`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:33:31.240

两者在内部都是完全不同的野兽，因此您不可能轻松地从 3.x 向后移植到 2.x。

尽管如此，此 Wiki 页面将帮助您了解如何降级。

[https://bitbucket.org/cherrypy/cherrypy/wiki/Home](https://bitbucket.org/cherrypy/cherrypy/wiki/Home)

1) 我认为没有任何在线可用的 CherryPy 2.x 文档。

2) 3.x 中的大多数工具可以与 2.x 中的过滤器进行比较。但是 2.x IIRC 中没有 Json 过滤器，所以恐怕你必须自己编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-18T15:03:30.460

[2.3.0 源码标签](https://bitbucket.org/cherrypy/cherrypy/src/dca45ccb647914fcd2f8429ed780f17bf849528a/docs/book/?at=cherrypy-2.3.0)

签出代码库，并构建文档

```
apt-get install mercurial
hg clone https://bitbucket.org/cherrypy/cherrypy
cd cherrpy
hg pull && hg update cherrypy-2.3.0
cd docs/book
bash build.sh
firefox html/index.html 
```

# r - 如何创建一个循环以将多个 nc 文件作为光栅读取，然后将它们写为 envi？

> ID：13725007
> 
> 赞同：0
> 
> 时间：2012-12-05T14:05:07.343
> 
> 标签：r, raster, netcdf, rgdal, envi

下面给出的这段代码（[由 stackoverflow 用户开发](https://stackoverflow.com/a/13700965/1451109)）将从 netcdf 文件中读取一个变量并将其写入为一个 envi 文件。
这段代码工作正常，但我有几个像这样的 netcdf 文件，我想为目录中的所有文件创建一个循环来执行此操作。
这些文件存储在一个目录中，其路径为

```
d <-  flip(t(d), direction = "x") 
rf <- writeRaster(d, filename="last.envi", overwrite=TRUE) 
```

我试过这个：

```
for(i in 1:length(a)){
    d <- raster(a[i], varname = "soil_moisture_c")
    rf <- writeRaster(d[[i]], filename="%d.envi", overwrite=TRUE)
    } 
```

但收到此错误

```
Error in function (classes, fdef, mtable) : 
unable to find an inherited method for function ‘writeRaster’ for signature ‘"numeric", "character"’ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:11:34.287

2 个错误：将 d[[i]] 更改为 d 并为每个输入使用一个新的输出文件。

```
 fileName <- strsplit(a[i],split='\\.')[[1]][1]
 outputFile <- paste(fileName,'_amenlast','.envi',sep='')
 rf <- writeRaster(d, filename=outputFile, overwrite=TRUE) 
```

PS：我保留 overwrite=TRUE ，这意味着如果您下次启动循环，它会擦除​​以前生成的文件。

# python - Windows 7 64 位 libsvm 和 python 错误：函数 'svm_get_sv_indices' 未找到

> ID：13725013
> 
> 赞同：0
> 
> 时间：2012-12-05T14:05:27.823
> 
> 标签：python, python-2.7, windows-7-x64, libsvm

我正在使用 Windows 7（64 位）。我已经安装了 Python 2.7.3（32 位版本）和 libsvm-3.13。当我尝试启动一个导入 svmutil 的简单 .py 文件时，出现错误

```
C:\libsvm-3.13\python>python provade.py
Traceback (most recent call last):
File "provade.py", line 1, in <module>
from svmutil import *
File "C:\libsvm-3.13\python\svmutil.py", line 3, in <module>
from svm import *
File "C:\libsvm-3.13\python\svm.py", line 288, in <module>
fillprototype(libsvm.svm_get_sv_indices, None, [POINTER(svm_model), POINTER(c_int)])
File "C:\Python27\lib\ctypes\__init__.py", line 378, in __getattr__
func = self.__getitem__(name)
File "C:\Python27\lib\ctypes\__init__.py", line 383, in __getitem__
func = self._FuncPtr((name_or_ordinal, self))
AttributeError: function 'svm_get_sv_indices' not found 
```

provade.py 是：

```
from svmutil import * 
```

我已经将 libsvm.dll 文件复制到 C:\windows\system32 目录中...

有什么建议么？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:01:24.163

这是一个错误。libsvm-3.13 DLL 缺少三个函数。尝试[libsvm 3.14](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)或[替代二进制文件](http://www.lfd.uci.edu/~gohlke/pythonlibs/#libsvm)。

# gwt - 杜松子酒注入共享（客户端服务器）对象 - “IsTreeItem”

> ID：13725017
> 
> 赞同：0
> 
> 时间：2012-12-05T14:06:05.007
> 
> 标签：gwt, guice, gwt-gin

我有一个实现“IsTreeItem”的对象。对象显示为两级树项。每个树项都带有一个复选框。我需要知道复选框何时更改值 - 所以我正在听 ValueChangedEvents。

第一个问题是使用此类项目构建的树只会触发 SelectionEvents。如果选择正在更改复选框，则 ValueChanged 事件随后会触发 - 因此无法从 Tree 监听“IsTreeItem”内的事件。

所以我让我的“IsTreeItem”触发它自己的元素。所以我（字段）注入了一个 EventBus 并在“ValueChanged”时用它来触发事件。问题是我的“IsTreeItem”是一个从服务器发送的对象（它在共享包中并且可以序列化）。该对象在服务器上实例化（EventBus 没有被离子注入），并且在客户端上调用“asTreeItem”。

有没有办法以某种方式在方法 TreeItem asTreeItem() 中注入 EventBus？或者是否有任何其他方法可以让外部人员知道复选框是否已更改其值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:15:36.317

GIN 可以对已创建的实例进行成员注入。

您必须在`Ginjector`接口中创建一个方法，该方法将此类实例作为参数，返回类型为`void`.
请注意，因为在客户端上没有进行反射，所以 GIN 只会从用作参数类型的类（及其超类）中注入字段和方法。

```
@GinModules(MyGinModule.class)
interface MyGinjector extends Ginjector {
    …

    void injectIsTreeItemMembers(IsTreeItem item);
} 
```

# android - Eclipse 停止在设备上上传 apk 文件

> ID：13725019
> 
> 赞同：-3
> 
> 时间：2012-12-05T14:06:11.863
> 
> 标签：android, eclipse, adt

通常 Eclipse 会无缘无故地做愚蠢的事情。首先，我创建了项目并将我的设备连接到 PC。一切正常 - apk 文件在运行和 dubug 模式下执行得很好。我更改了一些代码，添加了对清单文件的权限，仅此而已 - Eclipse 不再在设备上上传我的 apk。就像一年前我想开始 Android 编码时一样，我已经看到了这些问题，但是由于 Eclipse 在 Windows 上是绝对可怕的 IDE，而 google 不支持好的 IDE，所以我感到很沮丧。任何人都可以为我的问题提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:09:22.957

设备是否显示在“设备”选项卡中？如果没有，你可以尝试重启 adb。

`adb kill-server`

`adb start-server`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:13:29.770

如果它已经发生在一年前，那么您的调试密钥可能已过期。删除您的 debug.keystore 然后在 Eclipse 中重建您的应用程序。Eclipse/ADT 将创建一个新的调试密钥，该密钥在一年内仍然有效。

您可以在此处找到更多信息：http: [//developer.android.com/tools/publishing/app-signing.html#debugmode](http://developer.android.com/tools/publishing/app-signing.html#debugmode)

# python - 如何在 Debian Squeeze 上安装 pysqlite2？

> ID：13725022
> 
> 赞同：0
> 
> 时间：2012-12-05T14:06:19.833
> 
> 标签：python, linux, unix, debian, pysqlite

我有一点问题。我在 Debian Squeeze 上，我想安装 sqlite2。问题是，当我尝试：

```
# pip install pysqlite2 
```

我得到：

```
Downloading/unpacking pysqlite2
Could not find any downloads that satisfy the requirement pysqlite2
No distributions at all found for pysqlite2
Storing complete log in /root/.pip/pip.log 
```

我尝试使用时遇到的相同错误：

```
# pip install python-pysqlite2 
```

我也试过easy_install：

```
# easy_install pysqlite2
Searching for pysqlite2
Reading http://pypi.python.org/simple/pysqlite2/
Couldn't find index page for 'pysqlite2' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
No local packages or download links found for pysqlite2
Best match: None
Traceback (most recent call last):
  File "/usr/local/bin/easy_install", line 8, in <module>
    load_entry_point('setuptools==0.6c11', 'console_scripts', 'easy_install')()
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1712, in main
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1700, in with_ei_usage
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 1716, in <lambda>
  File "/usr/local/lib/python2.7/distutils/core.py", line 152, in setup
    dist.run_commands()
  File "/usr/local/lib/python2.7/distutils/dist.py", line 953, in run_commands
    self.run_command(cmd)
  File "/usr/local/lib/python2.7/distutils/dist.py", line 972, in run_command
    cmd_obj.run()
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 211, in run
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/command/easy_install.py", line 434, in easy_install
  File "/usr/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg/setuptools/package_index.py", line 475, in fetch_distribution
AttributeError: 'NoneType' object has no attribute 'clone' 
```

我也尝试从[这里](http://packages.debian.org/squeeze/python-pysqlite2-dbg)下载 pyslite2 包，当我尝试时：

```
# dpkg -i python-pysqlite2-dbg_2.6.0-1_amd64.deb 
```

我收到以下错误：

```
Selecting previously deselected package python-pysqlite2-dbg.
(Reading database ... 144103 files and directories currently installed.)
Unpacking python-pysqlite2-dbg (from python-pysqlite2-dbg_2.6.0-1_amd64.deb) ...
dpkg: dependency problems prevent configuration of python-pysqlite2-dbg:
 python-pysqlite2-dbg depends on python-pysqlite2 (= 2.6.0-1); however:
  Package python-pysqlite2 is not configured yet.
 python-pysqlite2-dbg depends on python-dbg; however:
  Package python-dbg is not installed.
dpkg: error processing python-pysqlite2-dbg (--install):
 dependency problems - leaving unconfigured
Errors were encountered while processing:
 python-pysqlite2-dbg 
```

我真的会为此提供帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:09:30.770

只需运行 apt-get install 即可安装所有缺少的依赖项：

```
apt-get -f install 
```

# c# - 使用 BinaryFormatter 将自动实现的属性更改为正常和反序列化

> ID：13725025
> 
> 赞同：5
> 
> 时间：2012-12-05T14:06:26.330
> 
> 标签：c#, .net, serialization, automatic-properties

我有一个对象，其属性实现如下

```
public String Bla {get;set;} 
```

将实现更改为类似

```
private String _bla;

public String Bla
{
    get { return _bla; }
    set { _bla = value; } 
} 
```

在反序列化时，此属性为空。

我有很多来自旧实现的序列化数据，并希望用新实现加载它们

有什么办法可以改变实现以与旧的二进制文件兼容？

**编辑：**

有些人可能会遇到同样的问题，所以这是我的 hackish 解决方案：

自动生成的字段的命名约定是无效的 c# 代码：

```
[CompilerGenerated]
private string <MyField>k__BackingField;

[CompilerGenerated]
public void set_MyField(string value)
{
    this.<MyField>k__BackingField = value;
}

[CompilerGenerated]
public string get_MyField()
{
    return this.<MyField>k__BackingField;
} 
```

对我来说，快速而肮脏的解决方法是创建一个`xMyFieldxK__BackingField`在源代码中调用的私有支持字段，

并通过在反序列`<MyField>`化之前替换所有出现的 来修补序列化的二进制数据`xMyFieldx`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:53:16.347

尝试实施`ISerializable`

```
 [SecurityCritical]
    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
            throw new ArgumentNullException("info");

        info.AddValue("name of compiler generated field", _bla);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:10:54.593

序列化字段，而`BinaryFormatter`不是属性。

您可以通过查看 ILSpy 中自动生成的字段名称或类似名称并以这种方式命名您的名称来使其工作。

否则，如 Henrik 所述，您将不得不编写自己的反序列化，请参阅[此问题](https://stackoverflow.com/questions/8245501/deserialization-of-optional-fields-from-binaryformatter)以获取更多信息

您可能可以通过实现`ISerializable`此字段和特殊情况来检查反序列化信息。

# sql-server - 从存储过程中获取最后一个 ID 时出错

> ID：13725028
> 
> 赞同：0
> 
> 时间：2012-12-05T14:06:31.647
> 
> 标签：sql-server, ado.net

我想做一个存储过程，然后得到`ID`我刚刚创建的（身份）

这就是我所做的：

```
ALTER PROCEDURE [dbo].[SP_Insert_Hai_Pi]
@id INT OUT,
@email VARCHAR(350) = NULL,
@datetimeNow datetime,
@score INT  = 0
AS 

INSERT INTO TBL_HAI_PI (USER_EMAIL,DATETIME_GAME,CORRECT_ANSWERS) VALUES (@email, CURRENT_TIMESTAMP,@score) 

SET @id = SCOPE_IDENTITY();
return @id 
```

接着 ：

```
SqlCommand command = new SqlCommand("SP_Insert_Hai_Pi", conn);
command.CommandType = CommandType.StoredProcedure;
command.Parameters.Add("@email", SqlDbType.VarChar).Value = email;

conn.Open();
int tempId = command.ExecuteNonQuery();
conn.Close();
return tempId; 
```

Tt告诉我：

> *过程或函数“SP_Insert_Hai_Pi”需要参数“@id”，但未提供该参数。*

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:12:27.187

即使它是输出，您也必须定义它：

```
 ..... 
 command.CommandType = CommandType.StoredProcedure;
 SqlParameter outputIdParam = new SqlParameter("@ID", SqlDbType.Int)
   { 
      Direction = ParameterDirection.Output 
   };

   command.Parameters.Add(outputIdParam);
   command.Parameters.Add("@email", SqlDbType.VarChar).Value = email;
 ..... 
```

# c++ - 如何将字符范围从字符数组复制到向量？

> ID：13725031
> 
> 赞同：0
> 
> 时间：2012-12-05T14:06:52.970
> 
> 标签：c++, stl

如何将字符范围从字符数组复制到向量？起始索引始终为 0，并转到某个传递的值 x。我在堆上有 char* 缓冲区（大小为 32*1024），我正在使用该缓冲区接收消息并在变量 x 中设置接收到的消息大小。如何从第 0 个字符复制到第 x 个字符到`vector<char> mainBuffer`? （我可以简单地进行迭代，但如果消息很长，它看起来效率低下。另一种方法如下所示，但我总是在每次传递中创建新向量）

```
char* buffer = new char[32*1024];
int x;
std::vector<std::vector<char> > mainBuffer;
//:loop
// here is some code where I recive message in buffer and set x
mainBuffer.push_back(std::vector<char>(buffer,buffer+x));
//:end loop 
```

有谁知道更有效和优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:34:44.340

```
mainBuffer.push_back(std::vector<char>(buffer,buffer+x)); 
```

> 有谁知道更有效和优雅的方式来做到这一点？

使用 C++11，执行以下操作：

```
mainBuffer.emplace_back( buffer,buffer+x ); 
```

这会转发参数并直接在 mainBuffer 中构造对象。

编辑：使用 C++（旧），使用 std::swap：

```
mainBuffer.push_back( std::vector<char>() );
mainBuffer.back().swap( std::vector<char>(buffer, buffer+x) ); 
```

编辑 2：如果可以的话，在使用 push_back 之前调用 mainBuffer 上的 reserve。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:21:43.183

如果您真的在寻找效率，那么在协议中执行此操作的典型方法是：

```
char* mainBuffer = new char[veryLargeNumber]
char* mainBufferPos = mainBuffer;
char* buffer = new char[normallyASmallNumber] 
while(...) {
    ...receive n bytes in buffer....
    memcopy(mainBufferPos, buffer, n);
    mainBufferPos += n;
    if (mainBufferPos > mainBuffer+veryLargeNumber) 
        break;    // buffer full, needs probably more handling...
} 
```

通常，我希望 32*1024 比您的大缓冲区的大小更大，并且您收到的消息的长度更多地低于 1024。

# sql-server - SQL Server 删除或选择并删除

> ID：13725032
> 
> 赞同：0
> 
> 时间：2012-12-05T14:06:58.560
> 
> 标签：sql-server, select, sql-delete

我有大约 50k 行的表。

根据一些用户请求，我应该检查数据库是否包含一些数据并将其删除。只有 1% 的请求需要删除所以。

我应该执行选择，然后在 1% 的情况下执行删除还是立即执行删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:45:11.207

我不确定您要问什么，但是当我想删除记录时，我会这样做。

```
select *
from MyTable
where --all my conditions 
```

然后，在确保结果集正是我想要删除的内容之后，我这样做：

```
--select *
delete from MyTable
where --all my conditions 
```

# ios - definePresentationContext / UIModalPresentationCurrentContext 的问题 - 当前上下文视图控制器丢失

> ID：13725036
> 
> 赞同：2
> 
> 时间：2012-12-05T14:07:13.797
> 
> 标签：ios, ipad, cocoa-touch

仅当您在由导航控制器管理的视图控制器中呈现时，才会出现这种情况。

复制步骤如下：

1 - 使用呈现视图控制器`UIModalPresentationCurrentContext`

```
self.definesPresentationContext = YES;
ViewController* viewController = [[ViewController alloc] init];
viewController.modalPresentationStyle = UIModalPresentationCurrentContext;
[presentOnViewController presentViewController:viewController animated:YES completion:nil]; 
```

2 - 使用默认的全屏演示样式在顶部显示视图控制器

```
ViewController* viewController = [[ViewController alloc] init];
[self presentViewController:viewController animated:YES completion:nil]; 
```

3 - 关闭顶部呈现的视图控制器（全屏）

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

现在问题是第二个视图控制器（使用 UIModalPresentationCurrentContext 呈现）消失了。同样不可能使用 UIModalPresentationCurrentContext 呈现另一个视图控制器，因为系统认为它仍然存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:07:13.797

我相信这个问题是框架中的一个错误。如前所述，它仅在由导航控制器管理的视图控制器中呈现时发生。有一个使用包含 API 的讨厌的工作。它创建了一个虚拟视图控制器，从中呈现视图。步骤是：

1 - 当在上下文中呈现一个父级是导航控制器的视图时，使用一个虚拟视图控制器：

```
- (void)presentInContext
{
    UIViewController* presentOnViewController = self;

    if ([self.parentViewController isKindOfClass:[UINavigationController class]])
    {
        // Work around - Create an invisible view controller
        presentOnViewController = [[DummyViewController alloc] init];
        presentOnViewController.view.frame = self.view.frame;

        // Containment API
        [self addChildViewController:presentOnViewController];
        [self.view addSubview:presentOnViewController.view];
        [presentOnViewController didMoveToParentViewController:self];

        presentOnViewController.definesPresentationContext = YES;
    }

    ViewController* viewController = [[ViewController alloc] init];
    viewController.modalPresentationStyle = UIModalPresentationCurrentContext;
    [presentOnViewController presentViewController:viewController animated:YES completion:nil];
} 
```

2 - 关闭视图控制器时整理

```
- (void)dismissSelf
{
    __weak UIViewController* presentingViewController = self.presentingViewController;

    [self dismissViewControllerAnimated:YES completion:^{

        // Remove the dummy view controller
        if ([presentingViewController isKindOfClass:[DummyViewController class]])
        {
            [presentingViewController willMoveToParentViewController:nil];
            [presentingViewController.view removeFromSuperview];
            [presentingViewController removeFromParentViewController];
        }
    }];
} 
```

就是这样......修复很脏，但是没有视觉闪烁的伎俩。

# c++ - c++ char值+“-some words here-”但错误C2110

> ID：13725039
> 
> 赞同：-3
> 
> 时间：2012-12-05T14:07:24.567
> 
> 标签：c++, string-concatenation

通常我想要一个包含这个“嘿你！”的变量。

在 Javascript 中，我们可以

```
var str = 'Hey' + 'you!'; 
```

在网络语言中，我们可以

```
$str = 'Hey'.'you!'; 
```

但是在 C++ 中

```
+ or . also cannot combine it.. 
```

有任何想法吗？我相信这可能只是一件简单的事情，但我真的不知道如何在 C++ 中结合它，请帮助...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T14:09:34.967

如果我很好理解，你只需要

```
"Hey" "you" 
```

（中间没有标点）

* * *

只是关于空间的说明：

**注意：**在所有 OP 提供的示例中，您将得到`"Heyyou"`中间没有空格。我刚刚复制了 OP 请求。（因此在此答案中添加空格是错误的，因为它不符合要求）

这是否不是真正的意图（他只是想要），而不是在*嘿*之后或*你*`"Hey you"`之前需要一个空格。

# javascript - Javascript定义类

> ID：13725043
> 
> 赞同：8
> 
> 时间：2012-12-05T14:07:38.420
> 
> 标签：javascript, class

定义类的最佳方法是什么？我知道大多数时候这是您喜欢使用的选择，但是这三个示例之间的直接区别是什么？

示例 1

```
var Class = (function(){
    function Class() {
      this.test = 'test'                
    }
    return Class;
})();

var c = new Class();
console.log(typeof Class);
console.log(c.test); 
```

示例 2

```
var Class2 = function(){
      this.test = 'test'                
};

var c2 = new Class2();
console.log(typeof Class2);
console.log(c2.test); 
```

示例 3

```
function Class3(){
      this.test = 'test'                
};

var c3 = new Class3();
console.log(typeof Class3);
console.log(c3.test); 
```

有时我也这样使用它： var Class = (function(){ var Private = {}, Public = {};

```
 Private._doSomething = function() {
        // something
    }

    Public.doSomethingElse = function() {
        // something else
    }
    return Public;
    })(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:12:36.663

**注意：**下面的主要答案是在 2012 年编写的。有关 JavaScript 自身`class`功能（ES2015+）的附加说明，请参见末尾。

* * *

“最佳”本质上是一个主观的东西，但我会尝试指出一些有关每个信息的信息，让您对“最佳”做出自己的判断。

### 示例 1

`Class`...为您提供了一个方便的范围（匿名函数），您可以在其中放置只有函数可以访问的真正私有的类范围信息（和实用函数） ：

```
var Class = (function(){
    var trulyPrivateInformation = 42;

    function trulyPrivateUtilityFunction() {
        // ...
    }

    function Class() {
      this.test = 'test';
    }
    return Class;
})(); 
```

示例 1 未“提升”。它作为分步代码的一部分进行处理。

该`Class`函数将具有真实名称。

### 示例 2

...创建一个~~没有名称的函数并将其分配给一个有名称的变量。现代浏览器对此非常聪明，但至少在理论上，该功能是匿名的，这会影响您的工具可以为您提供哪些信息。~~（从 ES2015 开始）有一个名称 ( `Class2`)，但在 IE 等过时的环境中除外。它没有示例 1 具有的私有类范围。

与示例 1 一样，示例 2 作为分步代码的一部分进行处理，而不是提升。

### 示例 3

...只是没有私有类范围范围的示例 1，但它也是“提升的”——该`Class`函数是在执行**任何**分步代码之前定义的。这意味着这有效：

```
var c = new Class();
console.log(c.test); // Logs 'test'

function Class() {
    this.test = 'test';
} 
```

请注意，即使`Class`定义较低，它也是在上面的代码运行*之前完成的。*示例 1 或示例 2 都不是这样。

与示例 1（但不是 2）一样，该`Class`函数具有真实名称。

* * *

2015 年，JavaScript 有了自己的`class`语法。在 2019 年，所有现代浏览器都原生支持它，如果需要支持 IE，可以使用 Babel 等工具进行转译。以下是`class`与 OP 问题的关系：

### 示例 1`class`

```
const Class = (() => {
    let trulyPrivateInformation = 42;

    function trulyPrivateUtilityFunction() {
        // ...
    }

    return class Class {
        constructor() {
            this.test = 'test';
        }
    }
})(); 
```

在代码的逐步执行中处理。对真正私有的东西具有真正的私有范围（在匿名范围函数内）。有正确的名字。

### 示例 2 与`class`（这也是示例 3 与`class`）

```
class Class2 {
    constructor() {
        this.test = 'test';
    }
}

let c2 = new Class2();
console.log(typeof Class2);
console.log(c2.test); 
```

在代码的逐步执行中处理。没有示例 1 所具有的真正私有范围（尽管私有字段和方法即将推出）。有正确的名字。

# arrays - 带有高级自定义字段的 Wordpress query_post 数组（可能是一个简单的解决方案）

> ID：13725044
> 
> 赞同：2
> 
> 时间：2012-12-05T14:07:40.317
> 
> 标签：arrays, wordpress, custom-fields, posts

在 Wordpress 网站上工作，想知道是否有人能指出我正确的方向。我有以下 query_post 过滤我的模板上的帖子并且效果很好。

```
query_posts( array( 'category_name' => 'galoretv', 'post_type' => 'post', 'paged'=>$paged, 'showposts'=>0, ) ); 
```

我将如何附加它以包括对高级自定义字段中特定值的检查？此类别中的帖子有一个单选按钮，其中包含三个选项“主要”“次要”“标准”我希望能够检查每个值，即如果您属于“galoretv”和“标准”，请执行此操作。

我使用上面的参数执行和排序页面，只是不确定如何添加 ACF 值。我能够使用粘性选项让它工作，但这会工作，因为我需要有主要和次要的可选性。这是我让它与粘性一起工作的节目。

```
query_posts( array( 'category_name' => 'galoretv', 'post_type' => 'post', 'paged'=>$paged, 'showposts'=>0, 'post__in'=>get_option('sticky_posts')) ); 
```

单选按钮字段称为“着陆网格放置”

有什么想法吗？查了文档，没搞清楚。 [http://www.advancedcustomfields.com/docs/field-types/checkbox/](http://www.advancedcustomfields.com/docs/field-types/checkbox/)

认为这会工作，但它没有

```
query_posts( array( 'category_name' => 'galoretv', 'post_type' => 'post', 'paged'=>$paged, 'showposts'=>0, 'landing-grid-placement' => 'primary') ); 
```

任何帮助将不胜感激。这可能是一个简单的语法问题，但它让我无法理解并给我带来了很多问题。一直在寻找答案，但还没有得到正确的答案。感谢阅读本文的人，并再次感谢任何提供解决方案的人。

**在下面的每个注释中附加代码**

```
 <?php

    $args = array(
        'post_type' => 'post',
        'category-slug' => 'models-galore',            
        'showposts'=>1, 
        'meta_query' => array(
            array(
                'key' => 'grid_location',
                'value' => 'primary',
                'compare' => '=', 
                'type' => 'CHAR' 
            )
        )
    );

    $query = new WP_Query($args);
    if($query->have_posts()) {
        while($query->have_posts()) {
            $query->the_post();
            ?>

            <li class="span8">
                <div class="thumbnail">
                    <a href="<?php echo get_permalink(); ?>"><?php echo get_the_post_thumbnail( get_the_ID(), 'media-large-thumb' ); ?></a>
                    <h3>
                        <a href="<?php echo get_permalink(); ?>"><?php the_title(); ?></a>
                    </h3>
                </div>
            </li>
            <?php
        }
    }

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:18:21.310

您可以使用 meta_query 执行此操作

[这是文档](http://codex.wordpress.org/Class_Reference/WP_Query#Custom_Field_Parameters)

这是一个例子：

```
$args = array(
    //...
    'post_type' => 'post', 
    'paged'=>$paged, 
    //...
    'meta_query' => array(
        array(
            'key' => 'landing-grid-placement',
            'value' => 'primary',
            'compare' => '=', //default
            'type' => 'CHAR' //default
        )
    )
);

//This is the shoposts option (deprecated since 2.1, now use posts_per_page)
$args['posts_per_page'] = -1; //-1 = infinite

//to add taxonomy
$args['tax_query'] = array(
    array(
        'taxonomy' => 'category',
        'field' => 'slug',
        'terms' => 'galoretv'
    )
);

$query = new WP_Query($args);
if($query->have_posts()) {
    while($query->have_posts()) {
        $query->the_post();
        ?>
        <li class="span8">
            <div class="thumbnail">
                <a href="<?php echo get_permalink(); ?>"><?php echo get_the_post_thumbnail( get_the_ID(), 'media-large-thumb' ); ?></a>
                <h2>
                    <a href="<?php echo get_permalink(); ?>"><?php the_title(); ?></a>
                </h2>
            </div>
        </li>
        <?php
    }
} 
```

也许有一个更简单的解决方案适合您：

```
$args = array(
    //...
    'post_type' => 'post', 
    'paged'=>$paged, 
    //...
    'meta_key' => 'landing-grid-placement', 
    'meta_value' => 'primary',
    'meta_compare' => '=' //default
    )
);
$query = new WP_Query($args);
if($query->have_posts()) {
    while($query->have_posts()) {
        $query->the_post();
        //do what you would normally do in your loop
    }
} 
```

# hadoop - 格式化节点时Hadoop unknownhostexception

> ID：13725051
> 
> 赞同：1
> 
> 时间：2012-12-05T14:08:09.823
> 
> 标签：hadoop, dns, centos, unknown-host

我正在尝试在 CentOS 服务器上安装 hadoop。

我正在使用[该教程](http://hakers.info/site/2011/10/hadoop-installation-guide-for-centos/index.html)。

我停在那条线上：

```
bin/hadoop namenode –format

12/12/05 15:07:06 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = java.net.UnknownHostException: karpov: karpov
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 1.1.1
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.1 -r 1411108; compiled by 'hortonfo' on Mon Nov 19 10:48:11 UTC 2012
************************************************************/
Re-format filesystem in /tmp/hadoop-root/dfs/name ? (Y or N) 
```

`karpov`我的机器名在哪里！

在`Re-format filesystem in /tmp/hadoop-root/dfs/name ? (Y or N)`Y 和 N 输入上都没有改变。我该
如何解决？请帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T12:59:18.383

检查 /etc/hosts 并确保您已添加主机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T06:15:39.273

可能是您的 /etc/hosts 文件中的一些特殊字符。清理它并重新写入，错误必须出现。

# jquery - 查找/儿童与后代选择器 jquery 性能差异

> ID：13725053
> 
> 赞同：3
> 
> 时间：2012-12-05T14:08:13.333
> 
> 标签：jquery, performance, jquery-selectors

我试图理解为什么[这个 jsperf 测试](http://jsperf.com/jquery-caching-find-methods2/2)中的一个片段似乎比其他片段慢得多。

这是四个片段：

```
$(".menu-vertical li.selected > ul.static").show().parents().show();

$('ul.root').find('li.selected').children('ul.static').show().parents().show();

$("ul.root li.selected > ul.static").show().parents().show();

$('ul.root li.selected').children('ul.static').show().parents().show(); 
```

第二个似乎在所有浏览器中始终较慢，我不明白为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:12:04.140

是什么让第二个与其他人不同？

```
$('ul.root')               // you get the collection of all `ul.root`
    .find('li.selected')   // in each collection you search for `li.selected`
    .children('ul.static') // you get `ul.static` children elements of each found
    ... 
```

请注意您需要进行多少次迭代。在所有其他示例中，大部分搜索都是在单个查询中执行的，该查询的评估速度要快很多倍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-21T12:37:22.070

孩子的数量很重要。

有很多（比如>10）孩子`$el.find('> selector')`表现更好

带几个孩子`$el.children('selector')`表现更好。

这是因为 children() 遍历所有子项以测试给定的选择器。

# rest - 使用 OAuth2 Bearer Tokens 保护图像资源

> ID：13725054
> 
> 赞同：22
> 
> 时间：2012-12-05T14:08:13.093
> 
> 标签：rest, oauth-2.0

我创建了许多生成/使用 JSON 数据的 Web 服务，并使用 OAuth2 和承载令牌保护它们，效果很好。

然而，现在我需要构建一个类似的 Web 服务来生成图像而不是 JSON（所以 JPEG/PNG 数据）。为了保持一致性，我还想使用 OAuth2/Bearer 令牌保护服务，但这样做会使服务在希望使用 <img> 标签显示图像数据的基于浏览器的应用程序中更具挑战性，因为 <img>标记不会发送必要的`Authorization: Bearer ...bearer-token...`HTTP 标头。

我可以看到两种方法：

1.  服务的基于浏览器的客户端将使用 XHR Level2 和 HTML5 中的 Blob 和 Blob URL 方案来检索作为 Blob 的图像数据，使用 Blob URL 方案为 Blob 生成 URL，然后动态创建一个 img 标记来引用Blob URL。很多工作只是为了显示图像！

2.  修改 OAuth2 基础结构以生成除 Bearer Token 之外的 Http cookie。修改服务 Authorirzation 以接受 Authorization: Bearer ... OAuth2 标头或 cookie 作为身份证明。Cookie 与承载令牌、httpOnly 等具有相同的生命周期。基于浏览器的客户端可以仅依靠浏览器 cookie 支持来访问服务，可以像往常一样通过 <img> 标签尊重图像数据。易于浏览器客户端使用，但非标准。对于不记名令牌或 cookie，安全风险概况似乎相同。

我是否忽略了后一种方法的任何安全问题？

是否有任何替代方法可以使用 OAuth2 保护图像/媒体资源？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-05T18:42:11.293

我假设您正在使用`user-agent-based application`配置文件将不记名令牌获取到浏览器基础应用程序中。

OAuth Bearer Token 规范支持将令牌作为查询参数发送`?access_token=mF_9.B5f-4.1JqM`。您浏览器中的 javascript 可以将令牌作为查询参数添加到您的 img 链接。

这将基于更多标准，但是您将不得不担心`access_token`日志中的值泄漏等。我认为安全性权衡实际上取决于这些不记名令牌的范围以及这些图像对保护的重要性。

我认为开放您的 OAuth 基础设施以接受 cookie 可能会使您面临新的攻击媒介。RFC 6750 特别指出了 CSRF 攻击的风险

```
 Implementations that do store bearer tokens in cookies MUST take precautions
 against cross-site request forgery. 
```

# xml - ColdFusion：替换 xml 格式的 html-tags 正则表达式

> ID：13725055
> 
> 赞同：1
> 
> 时间：2012-12-05T14:08:15.940
> 
> 标签：xml, regex, coldfusion, replace, ampersand

我找到了一个可行的解决方案来删除所有 html-tags，如下所示：

```
<cfset test = rereplace(blah, "<h2[^>]*>", "", "ALL") /> 
```

在使用 XMLFormat() 格式化后，我需要生成一个 xml 文件并重命名一些标签。因此我尝试了以下方法：

```
<!--- example string --->
<cfset blah = '&lt;h1&gt;title 1&lt;/h1&gt;
               &lt;h2 style="color: black;"&gt;title 2&lt;/h2&gt;
               &lt;h3&gt;test&lt;/h3&gt;' />

<cfset test = rereplace(blah, "&lt;h2[^>]*&gt;", "<title_2>", "ALL") /> 
```

这会根据需要更改我的标签，但它不会停留在 > 部分？...我也尝试像这样逃避 & 符号`\&lt;h2[^>]*\&gt;`，但这似乎没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:43:21.830

格式化 XML 后无法使用`>`，因为该字符不再存在于文本中的任何位置。

这将匹配/替换开始的 h2 标记，但不匹配结束标记：

```
<cfset test = blah.replaceAll('&lt;h2((?:[^&]+|&(?!gt))*)&gt;','<title_2$1>') /> 
```

其中的关键部分是：`(?:[^&]+|&(?!gt))*`

它匹配一个非 & 字符，或者一个 & 后面不跟`gt`, 直到它找到标签的结尾。

要更改您需要的整个标签：

```
<cfset test = blah.replaceAll('&lt;h2((?:[^&]+|&(?!gt))*)&gt;((?:[^&]+|&(?!lt;/h2))*)&lt;/h2&gt;','<title_2$1>$2</title_2>') /> 
```

这重复了与上面相同的概念，在将内容捕获到适当的组时也寻找结束 h2 标记。

在这个阶段，您开始进入正则表达式的领域，这可能不是这项工作的最佳工具——您可以在格式化之前使用 XML 解析器进行这些更改吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:42:39.577

```
<cfset test = rereplace(blah, "&lt;h2[^>]*&gt;", "<title_2>", "ALL") /> 
<!--- there is no [^>] for you to match ---> 
```

应该

```
<cfset test = rereplace(blah, "&lt;h2[^&]*&gt;", "<title_2>", "ALL") /> 
```

我认为这`[^`部分可以防止它变得贪婪。

# android - 子类化 SupportMapFragment 导致 NullPointerException

> ID：13725056
> 
> 赞同：14
> 
> 时间：2012-12-05T14:08:20.927
> 
> 标签：android, android-maps, google-play-services

我目前正在[`SupportMapFragment`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/SupportMapFragment)使用 google-play-services 库 r3 实现我自己的子类。

`NullPointerException`当我尝试将 Fragment 添加到`Activity`or时，我得到了库的内部类之一`ViewPager`。这是相关的堆栈跟踪：

```
java.lang.NullPointerException
    at maps.y.p.onResume(Unknown Source)
    at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:115)
    at android.os.Binder.transact(Binder.java:310)
    at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onResume(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment$a.onResume(Unknown Source)
    at com.google.android.gms.internal.c$1.a(Unknown Source)
    at com.google.android.gms.internal.c.a(Unknown Source)
    at com.google.android.gms.internal.c.onResume(Unknown Source)
    at com.google.android.gms.maps.SupportMapFragment.onResume(Unknown Source)
    at android.support.v4.app.Fragment.performResume(Fragment.java:1503)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:947)
    at android.support.v4.app.FragmentManagerImpl.performPendingDeferredStart(FragmentManager.java:807)
    at android.support.v4.app.FragmentManagerImpl.startPendingDeferredFragments(FragmentManager.java:1112)
    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1461)
    at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:461) 
```

显然，此时内部地图为空。

有没有人已经遇到过这个问题并有解决方案？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-07T03:59:37.420

在您的 SupportMapFragment 子类中，您是否覆盖了 onCreateView(...)？

如果你这样做了，你还需要在你自己的 onCreateView(...) 中调用 super.onCreateView(...) 来让超类创建它的视图。该片段与底层视图紧密相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T17:56:36.540

尝试`getChildFragmentManger()`同时确保您填充或之后`onActivityCreated()`

* * *

文档似乎还暗示，如果底层地图系统没有运行，它将无法工作。

还要检查您使用的是 ACL 的 v11（尽管我怀疑这就是问题所在）。

# c# - 如何格式化 MVC3 中 TextBoxFor() 显示的 DateTime？

> ID：13725057
> 
> 赞同：16
> 
> 时间：2012-12-05T14:08:22.803
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, formatting

我安装了 ASP.NET MVC3。我需要带有格式化日期的日期选择器。我试过这个，但它不起作用（当传递“{0:dd/MM/yyyy}”作为格式参数时，它仍然不格式化）：

```
 private static MvcHtmlString FormattedDateTextBoxFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, string format, RouteValueDictionary htmlAttributes)
    {
        var metadata = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);

        if (metadata.Model != null && metadata.Model as DateTime? != null)
            htmlAttributes.Add("value", string.Format(format, (DateTime)metadata.Model));

        return htmlHelper.TextBoxFor(expression, htmlAttributes);
    } 
```

编辑：如果格式为“{0:dd-MM-yyyy}”，我的代码有效，但不仅适用于“{0:dd/MM/yyyy}”

我知道 MVC4 已经有了这个功能，但不幸的是我的项目是在 MVC3 上编写的。你能帮助我吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-09-12T20:24:18.463

我什至可以使用的唯一格式是：

```
@Html.TextBoxFor(m => m.Birthdate, "{0:MM/dd/yyyy}") 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-08-01T10:34:46.540

语法为：@Html.TextBoxFor(表达式，字符串格式，对象 htmlAttributes)

例如：

```
 @Html.TextBoxFor(x => x.DateUtc, "{0:yyyy-MM-dd HH:mm:ss}",
            new { @class = "form-control", placeholder = "Enter Title", id="myDate"}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T14:15:23.030

在您的模型中，使用以下内容：

```
[DisplayFormat(DataFormatString="{0:dd/MM/yyyy}")]
public DateTime YourDate { get; set; } 
```

这是它应该在视图中执行的操作：

```
@Html.EditorFor(model => model.YourDate, new { @class = "date" }) 
```

这应该会给你一个格式化为 dd/MM/yyyy 格式的日期。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-11-01T11:16:56.530

展示将取决于文化。虽然在大多数情况下所有其他答案都是正确的，但它对我不起作用。如果附加了 jQuery datepicker，文化问题也会导致不同的问题。

如果您希望以下列方式强制格式转义 / ：

```
@Html.TextBoxFor(model => model.YourDate, "{0:MM\\/dd\\/yyyy}") 
```

如果没有为我逃脱它显示`08-01-2010`与预期`08/01/2010`。

此外，如果没有转义 jQuery datepicker 将选择不同的 defaultDate，在我的例子中它是`May 10, 2012`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-09T07:22:57.957

这种格式将帮助您：

```
@Html.TextBoxFor(Model => Model._facadeLowdown.DoB, new { @value= Model._facadeLowdown.DoB.HasValue ? Model._facadeLowdown.DoB.Value.ToString("MM/dd/yyyy") : ""
} 
```

# git - 无法将分支推送到 github

> ID：13725059
> 
> 赞同：4
> 
> 时间：2012-12-05T14:08:26.593
> 
> 标签：git, github, branch, push, git-remote

我分叉了一个 github 存储库并将分叉克隆到我的机器上。`master`然后我从被调用`#25`（我要修复的问题的 ID）创建了一个新分支。我修复了这个错误并由分支提交。现在我正在尝试将这个分支推送到 github，所以我可以发送一个拉取请求，但它不起作用。即使我按照说明进行操作，该分支也不会出现在 github 上。

```
$ git push origin #25
Everything up-to-date 
```

我在正确的分支上：

```
$ git branch
* #25
  master 
```

并且提交也成功了：

```
$ git log
commit 083f15035feab5af1673ed3685e10cca6e24aeeb
Author: John Example <johnexample@gmail.com>
Date:   Wed Dec 5 14:53:16 2012 +0100

    Fixed #25: Window now correctly resizes to fullscreen. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T14:17:43.773

# - 是用于为任何注释添加前缀的符号，即

```
$ ls
$ ls #holymotherofgod 
```

完全一样

你必须逃避它

```
$ git push origin \#25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:18:01.980

也许试试

```
git flow feature finish #25 
```

# silverlight - 使用 ControlTemplate 减少多个 UserControls 之间的重复

> ID：13725060
> 
> 赞同：1
> 
> 时间：2012-12-05T14:08:26.813
> 
> 标签：silverlight, xaml, user-controls

我有多个使用类似结构的 UserControl XAML 文件。我想删除这种重复并考虑使用覆盖 UserControl 模板的样式（然后将 ContentPresenter 用于自定义部分）。

但显然 UserControl 的模板不能被覆盖。

我如何以干净的方式？从其他东西派生然后UserControl？

```
<UserControl x:Class="Class1">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <sdk:Label Grid.Row="0" Content="Title1" Style="{StaticResource Header1}" />
    <Border Grid.Row="1">
    ...
</UserControl>

<UserControl x:Class="Class2">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <sdk:Label Grid.Row="0" Content="Title2" Style="{StaticResource Header1}" />
    <Border Grid.Row="1">
    ...
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:13:11.017

您可以像这样定义自定义控件。（我不确定您是否需要将标题与内容分开指定，但以防万一。）

```
public class MyControl : ContentControl
{
    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.Register("Title", typeof(string), typeof(MyControl), new PropertyMetadata(null));

    public string Title
    {
        get { return (string)GetValue(TitleProperty); }
        set { SetValue(TitleProperty, value); }
    }

    // ... other properties ...
} 
```

然后定义它的模板：

```
<ControlTemplate x:Key="MyControlTemplate" TargetType="mynamespace:MyControl">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <sdk:Label Grid.Row="0" Content="{TemplateBinding Title}" Style="{StaticResource Header1}" />
        <Border Grid.Row="1">
            <ContentPresenter />
        ...
    </Grid
</ControlTemplate> 
```

然后，您可以定义默认样式，如此处所示。（或者，您可以给它一个 x:Key 并在每次使用 MyControl 时显式设置样式。您也可以在每次使用 MyControl 时只设置 Template 属性，而不是完全指定此 Style。）

```
<Style TargetType="mynamespace:MyControl">
    <Setter Property="Template" Value="{StaticResource MyControlTemplate}" />
</Style> 
```

然后使用它：

```
<mynamespace:MyUserControl Title="Title1">
    <!-- Content here -->
</mynamespace:MyUserControl>

<mynamespace:MyUserControl Title="Title2">
    <!-- Content here -->
</mynamespace:MyUserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:12:51.430

也许您需要使用[ContentControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)作为控件的基类（它不应该是用户控件，而是自定义控件）。

然后您将能够在其中定义`ControlTemplate`和使用`ContentPresenter`。比您需要`Content`为控件设置属性来定义控件的内容。

# machine-learning - 什么是特征选择的前馈包装方法？

> ID：13725061
> 
> 赞同：0
> 
> 时间：2012-12-05T14:08:37.813
> 
> 标签：machine-learning, classification, knn, feature-selection

对于学校项目，我需要从 UCI 存储库中选择一个数据集，并在使用“前馈包装器”特征选择对其进行处理后使用 KNN 对数据进行分类。谷歌搜索“前馈包装器”一无所获......有人可以向我解释它是什么吗？更好的是，向我描述完成这项任务的步骤可能吗？“数据类型”、“属性类型”、“属性个数”应该选择什么样的数据？

最好的，法提赫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:19:21.420

我的第一个猜测是您的老师希望您使用[前馈神经网络](http://en.wikipedia.org/wiki/Feedforward_neural_network)（也称为多层感知器或 MLP），并将其输出用作 KNN 的输入。这是有道理的，尽管我不清楚你将如何训练 MLP。

关于如何选择数据集：从一个简单的开始，比如 Iris 数据集。那一个有4个维度和3个类。这意味着您的算法将很快通过它，并且您应该能够获得不错的性能。在您的算法在 Iris 上表现良好后，您可以选择更大的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T08:43:58.803

感谢您的回复，这是作业文本中的错误。显然，它只是“前向特征选择”，谷歌为此提供了相当多的信息。

# java - Jdeveloper 不获取最新编译的文件

> ID：13725071
> 
> 赞同：1
> 
> 时间：2012-12-05T14:09:18.120
> 
> 标签：java, jdeveloper, oc4j

我的应用程序使用 stuts 和 spring 框架，我们使用 Jdeveloper 和 OC4J 服务器。昨天我拿了最新的工作区，当我编译时，所有新的类文件都生成了。当我进行任何更改重建并重新启动 Jdev 服务器时，我在 UI 中看不到我的更改。我检查了所有路径，看起来它指向正确。你们还能想到什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:32:07.220

您可以尝试在构建菜单中清除所有选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:13:48.310

我刚刚遇到了同样的问题，重命名了类、文件和任何不起作用的东西，解决了这个问题。可悲的是，这种情况经常发生

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T23:32:28.763

正如 Shay 建议的那样，执行全部清理后，您可以删除所有“.data”文件夹。它们通常不会被 jdev 清除，但大多数时候是您看到此行为的原因。如果'.data'文件夹是类文件夹的寒意，你可以删除类文件夹。

# php - 随机 mysql 错误但 mysql 显示不同的查询然后发送

> ID：13725074
> 
> 赞同：0
> 
> 时间：2012-12-05T14:09:20.690
> 
> 标签：php, mysql, loops, random

我有一个脚本可以循环 2000 条客户记录并将它们复制到另一个数据库中。有时它运行完美，有时它返回一个 mysql 错误，并带有与 PHP 中发送的查询不对应的消息。这是错误消息（**PA K'2012-12-04 11:05:09'）O DU LIC TE EY UPDA**）：

```
    [0] => 数组
        (`在此输入代码`
        [级别] => 错误
        [代码] => 1064
        [消息] => 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以了解在 'PA K'2012-12-04 11:05:09' 附近使用的正确语法
        )
            O DU LIC TE EY UPDA' 在第 45 行
        )

```

发生错误时在 PHP 中打印的查询：

```
    插入
                `客户`
            (
                `klantId`,
                `naam`,
                `地址`，
                `邮政编码`,
                `普拉斯`，
                `电话`,
                `移动`，
                `传真`,
                `电子邮件`,
                `网站`,
                `post_adres`,
                `post_postcode`,
                `post_plaats`,
                `kvknummer`,
                `btwnummer`,
                `rekeningnr`,
                `postbanknr`,
                `邮寄`,
                `创建`，
                `修改`
            )价值观
            (
                1134,
                '纳姆'，
                '地址 9L',
                '1234 SG',
                '普拉茨'，
                无效的，
                无效的，
                无效的，
                无效的，
                'www.test.nl',
                无效的，
                无效的，
                无效的，
                无效的，
                无效的，
                无效的，
                无效的，
                1、
                '2012-12-04 11:05:09',
                '2012-12-04 11:05:09'
            )
            重复密钥更新
                `naam`=值（`naam`），
                `adres`=VALUES(`adres`),
                `邮政编码`=VALUES（`邮政编码`），
                `plaats`=VALUES(`plaats`),
                `telefoon`=VALUES(`telefoon`),
                `mobiel`=值（`mobiel`），
                `传真`=值（`传真`），
                `电子邮件`=值（`电子邮件`），
                `网站`=值（`网站`），
                `post_adres`=VALUES(`post_adres`),
                `post_postcode`=VALUES(`post_postcode`),
                `post_plaats`=VALUES(`post_plaats`),
                `kvknummer`=值（`kvknummer`），
                `btwnummer`=值（`btwnummer`），
                `rekeningnr`=值（`rekeningnr`），
                `postbanknr`=值（`postbanknr`），
                `邮寄`=值（`邮寄`），
                `created`=VALUES(`created`),
                `修改`=值（`修改`）
                ;

```

我的脚本在公司实习，数据库在数据中心运行 extern。脚本运行 50% 正确 50% 错误...

提前致谢！！

添加了带循环的脚本：

```
`
    $dbcon = getDbConnection();
    $aClients = getClients(); // 返回对象
    foreach ($aClients AS $oClient) {
    $sQuery = ' 插入
        `客户`
    (
        `klantId`,
        `naam`,
        `地址`，
        `邮政编码`,
        `普拉斯`，
        `电话`,
        `移动`，
        `传真`,
        `电子邮件`,
        `网站`,
        `post_adres`,
        `post_postcode`,
        `post_plaats`,
        `kvknummer`,
        `btwnummer`,
        `rekeningnr`,
        `postbanknr`,
        `邮寄`,
        `创建`，
        `修改`
    )价值观
    (
        ' . $dbcon->real_escape_string($oClient->id) 。',
        ' . $dbcon->real_escape_string($oClient->naam) 。',
        ' . $dbcon->real_escape_string($oClient->adres) 。',
        ' . $dbcon->real_escape_string($oClient->postcode) 。',
        ' . $dbcon->real_escape_string($oClient->plaats) 。',
        ' . $dbcon->real_escape_string($oClient->telefoonnummer) 。',
        ' . $dbcon->real_escape_string($oClient->mobielnummer) 。',
        ' . $dbcon->real_escape_string($oClient->faxnummer) 。',
        ' . $dbcon->real_escape_string($oClient->emailadres) 。',
        ' . $dbcon->real_escape_string($oClient->website) 。',
        ' . $dbcon->real_escape_string($oClient->afwijkend_adres) 。',
        ' . $dbcon->real_escape_string($oClient->afwijkend_postcode) 。',
        ' . $dbcon->real_escape_string($oClient->afwijkend_plaats) 。',
        ' . $dbcon->real_escape_string($oClient->kvknummer) 。',
        ' . $dbcon->real_escape_string($oClient->btwnummer) 。',
        ' . $dbcon->real_escape_string($oClient->bankrekening) 。',
        ' . $dbcon->real_escape_string($oClient->postbank) 。',
        ' . $dbcon->real_escape_string($oClient->mailing == 'ja' ? 1 : 0) 。',
        ' . $dbcon->real_escape_string($oClient->created) 。',
        ' . $dbcon->real_escape_string($oClient->modified) 。'
    )
    重复密钥更新
        `naam`=值（`naam`），
        `adres`=VALUES(`adres`),
        `邮政编码`=VALUES（`邮政编码`），
        `plaats`=VALUES(`plaats`),
        `telefoon`=VALUES(`telefoon`),
        `mobiel`=值（`mobiel`），
        `传真`=值（`传真`），
        `电子邮件`=值（`电子邮件`），
        `网站`=值（`网站`），
        `post_adres`=VALUES(`post_adres`),
        `post_postcode`=VALUES(`post_postcode`),
        `post_plaats`=VALUES(`post_plaats`),
        `kvknummer`=值（`kvknummer`），
        `btwnummer`=值（`btwnummer`），
        `rekeningnr`=值（`rekeningnr`），
        `postbanknr`=值（`postbanknr`），
        `邮寄`=值（`邮寄`），
        `created`=VALUES(`created`),
        `修改`=值（`修改`）
    ;';
    $dbcon->query($sQuery);
}`

```

上次编辑：在与数据库服务器相同的服务器上尝试了该脚本，但没有发生。它发生在某个地方...

设置为：脚本在服务器 A 上运行，数据库在服务器 B 上运行。网络不同，因此使用 Internet 进行数据库连接。某处数据丢失...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:25:14.677

You don't santize the input well. If in PHP you have to make all values valid with mysql_real_escape_string()

'P A K'2012-12-04 11:05:09' looks like you have a ' to many, wich causes the error. Escape this by \'

Querys work, or they don't. No 50-50 change with good coding; so if the query works, there's a problem with some input.

# c# - 当我尝试向我的数据库添加新评论时遇到错误

> ID：13725080
> 
> 赞同：0
> 
> 时间：2012-12-05T14:09:33.520
> 
> 标签：c#, asp.net-mvc

我遇到了一个错误，上面写着：

> *INSERT 语句与 FOREIGN KEY 约束“FK_dbo.Comments_dbo.Posts_PostID”冲突。冲突发生在数据库“MVCProjectApp.Models.DBPostsContext”、表“dbo.Posts”、列“PostID”中。
> 该语句已终止。*

我迷路了，不知道该怎么办

这是创建评论

```
@model MVCProjectApp.Models.Comment

@{
    ViewBag.Title = "Create Comment";
}

<h2>Create</h2>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Comments</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.Username)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Username)
            @Html.ValidationMessageFor(model => model.Username)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Message)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Message)
            @Html.ValidationMessageFor(model => model.Message)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Timestamp)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Timestamp)
            @Html.ValidationMessageFor(model => model.Timestamp)
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}

<div>
    @Html.ActionLink("Back to List", "~/FullPost/Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

这是我将 postid 传递给评论创建的 Actionlink

```
//
        // GET: /Comment/Create

        public ActionResult Create()
        {
            ViewBag.PostID = new SelectList(db.Posts, "PostID", "Title");
            return View();
        }

        //
        // POST: /Comment/Create

        [HttpPost]
        public ActionResult Create(Comment comment)
        {
            if (ModelState.IsValid)
            {
                db.Comments.Add(comment);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            ViewBag.PostID = new SelectList(db.Posts, "PostID", "Title", comment.PostID);
            return View(comment);
        } 
```

这是评论模型

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MVCProjectApp.Models
{
    public class Post
    {
        public int PostID { get; set; }
        public string Title { get; set; }
        public string Message { get; set; }
        public DateTime Timestamp { get; set; }
        public virtual ICollection<Comment> Comments { get; set; }
    }
    public class Comment
    {
        public int CommentID { get; set; }
        public int PostID { get; set; }
        public string Username { get; set; }
        public string Message { get; set; }
        public DateTime Timestamp { get; set; }
        public virtual Post Post { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:13:05.683

> 我迷路了，不知道该怎么办

你应该看看你得到的错误。它说您正在尝试插入评论。在插入尝试确保 Comment 具有它知道的 PostID 之前由 DBMS 运行的外键约束检查。您没有设置它，因此它将默认为 0，它在 Posts 表中不存在，因此会出现错误。

您应该在调用之前设置评论的 PostID `SaveChanges()`，这可以通过`@Html.HiddenFor(m => m.PostID)`在视图中添加一个字段来完成。然后在控制器中设置模型的 PostID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:13:46.523

您需要将评论与帖子相关联。最简单的解决方案是将帖子 ID 的隐藏字段添加到视图中。

# android - Android onPictureTaken 回调在 Bitmap.decodeByteArray 中抛出内存不足异常

> ID：13725082
> 
> 赞同：5
> 
> 时间：2012-12-05T14:09:39.420
> 
> 标签：android, camera, out-of-memory

我拥有一台三星 Galaxy S3，它能够捕捉大小约为 3000 x 2000 的图像。而且，我目前正在开发一个需要捕捉图片的应用程序。我将手机用作调试器，并设置设备为要捕获的图片提供的最佳尺寸。

但是，如果我使用此设置，回调会在我尝试将捕获的字节解码为位图`onPictureTaken`的方法的第一行给出内存不足错误。`Bitmap.decodeByteArray`如果我使用`Bitmap.Options.inSampleSize = 2`，则不会发生内存不足错误。

我希望应用程序能够捕捉设备提供的最佳效果，并且设备在其自己的相机应用程序中执行此操作，但我不能。我不明白。我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:14:54.230

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)。[Android 自定义视图位图内存泄漏](https://stackoverflow.com/questions/4197794/android-custom-view-bitmap-memory-leak)。也看看这个视频。讨论 MAT 分析器应该会有所帮助。不使用时也回收位图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:30:07.383

android 中的应用程序必须使用 16mb 左右的内存。如果您要将 inSampleSize 设置为一个非常大的数字以获得原样的图像质量，或者如果您不执行采样，那么它可能会给您带来内存不足的异常。

查看此链接和示例应用程序： [高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

# websocket - Tornado 对服务器端的 Websocket 来说足够了吗？

> ID：13725086
> 
> 赞同：1
> 
> 时间：2012-12-05T14:09:52.647
> 
> 标签：websocket, tornado

抱歉我的愚蠢问题，[现在我知道我必须使用 Javascript 才能使用 Websocket](https://stackoverflow.com/questions/13685776/why-javascript-is-important-for-websocket)，这是客户端，但是服务器端呢，为什么我会发现人们在谈论 RabbitMQ、Stomp、SocketIO、Tornadio

在 Tornado 示例中，它们都不存在，所以我说 Tornado 就足够了，但我发现人们甚至在使用 Tornado 时也在使用它们，[here](https://stackoverflow.com/questions/4483440/using-tornado-with-pika-for-asynchronous-queue-monitoring)和[here](http://www.lonelycode.com/2011/11/27/use-tornadio-to-create-a-websockets-rabbitmq-bridge/)。

那我用什么？为了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:14:56.107

实际上 Tornado 是一个网络服务器，它支持网络套接字。您帖子中的其他内容不是网络服务器。

RabbitMQ 是一个消息队列服务，它用于服务器上不同服务之间的通信

STOMP 是一种处理消息队列的[协议。](http://en.wikipedia.org/wiki/Streaming_Text_Oriented_Messaging_Protocol)

Socket.IO 是一个允许您轻松使用 websockets 的框架。但它需要服务器端的 Node.JS 服务器。如果浏览器不支持 WS 协议，Socket.IO 会为您提供一些备用方案。Tornadio 是 Socket.IO 到 Tornado 的一个端口。因此，您可以使用相同的客户端框架（在 Web 浏览器中），但在服务器端您使用 Tornado 而不是 NodeJS。

所以 Tornado 对于 websockets 来说已经足够了。但是，如果您想创建更复杂的应用程序，您将不得不使用其他工具来完成其他任务。从您的列表中 - 您可以使用 Tornadio 处理旧版浏览器和 RabbitMQ 在您的服务器上进行进程间通信

# git - 如何在git中找到父亲分支？

> ID：13725089
> 
> 赞同：5
> 
> 时间：2012-12-05T14:09:56.723
> 
> 标签：git

> **可能重复：**
> [找到一个分支的父分支](https://stackoverflow.com/questions/3161204/find-the-parent-branch-of-a-branch)

我创建了一个新的功能分支，但我忘记了我在哪里分支了这个功能分支。现在功能已经完成，但我不知道我必须在哪个分支中合并我从谁找到我已经分支的分支？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:14:32.270

我相信您可以使用 gitk 或 git-log 来更好地可视化您的提交历史。

像这样：

```
gitk --all 
```

或者

```
git log --graph --decorate 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:15:56.297

您可以通过键入以下内容来列出子分支： git branch --contains

只有当你没有很多可能是父分支的分支时，我认为它可能很有用

# c# - System.AccessViolationException 未处理 c# Windows Phone 8

> ID：13725091
> 
> 赞同：0
> 
> 时间：2012-12-05T14:10:08.710
> 
> 标签：c#, windows-phone, windows-phone-8

我开始将我的 Windows Phone 7 应用程序移植到 Windows Phone 8 并意识到我没有在我的 ListBox 中获得结果。正常运行时，我的代码仅在我进入代码的“新 ActiveItem”部分时引发异常。我验证了 XML 正在返回并且元素是准确的，但我以前从未见过这种情况。有什么建议么？

```
EventsListBox.ItemsSource = from activeweb in xmlItems.Descendants("meta")

select new ActiveItem
{
ActEvent = activeweb.Element("assetName").Value.Trim(),
Date = activeweb.Element("city").Value + ", " + activeweb.Element("Eventstate").Value +
Environment.NewLine +
Convert.ToDateTime(activeweb.Element("startDate").Value).ToLongDateString(),
City = activeweb.Element("city").Value,
StartTime = activeweb.Element("startTime").Value,
AssetId = activeweb.Element("assetId").Value.Trim()
}; 
```

这是 ActiveItem 的构造函数

```
public class ActiveItem

{

public string ActEvent { get; set; }

public string Date { get; set; }

public string State { get; set; }

public string City { get; set; }

public string StartTime { get; set; }

public string AssetId { get; set; }

} 
```

这是异常的CallStack：

> BeActive.DLL!BeActive.MainPage.activeweb_DownloadStringCompleted.AnonymousMethod__1(System.Xml.Linq.XElement activeweb) 第 97 行 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:16:37.007

您是在后台线程而不是 UI 线程上设置 ItemsSource 吗？

我建议将您的代码包装在此：

```
Deployment.Current.Dispatcher.BeginInvoke(() =>
   {
        EventsListBox.ItemsSource = from activeweb ...
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:49:30.783

因此，经过多次尝试/重建，我想我找到了问题所在。我从我的 XAML 中删除了列表框并添加了“LongListSelector”（因为这是 ListBox 的替代品）。从那里，我更改了 XAML 代码以表示 ListBox，并且一切正常。在升级到 Windows Phone 8 编译过程中一定出了问题。

谢谢您的帮助！

# javascript - 大括号内的文件路径

> ID：13725095
> 
> 赞同：0
> 
> 时间：2012-12-05T14:10:31.967
> 
> 标签：javascript, css, joomla

我希望一个快速的问题。

我正在使用 Joomla！2.5.8。我刚刚发现了 eCSSential，它在 index.php 中使用了以下代码

```
 <script>
    <!-- Add eCSSential.min.js inline here -->

    eCSSential({
        "all": "css/all.css",
        "(min-width: 20em)": "css/min-20em.css",
        "(min-width: 37.5em)": "css/min-37.5em.css",
        "(min-width: 50em)": "css/min-50em.css",
        "(min-width: 62.5em)": "css/min-62.5em.css"
    });
 </script> 
```

现在，在我的 Joomla 中！文件我有这个...

```
<script type="text/javascript" src="<?php echo $this->baseurl ?>/templates/<?php echo $this->template?>/js/eCSSential.js"></script>

<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/nameoftemplate/css/style.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 1024px)" href="<?php echo $this->baseurl ?>/templates/nameoftemplate/css/max-width-1024.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 768px)" href="<?php echo $this->baseurl ?>/templates/nameoftemplate/css/max-width-758.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 524px)" href="<?php echo $this->baseurl ?>/templates/nameoftemplate/css/max-width-524.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl ?>/templates/css/lightbox.css"  type="text/css" /> 
```

我不太明白我应该如何在脚本的大括号中编写文件路径，以便它在 Joomla! 中工作。我猜使用的示例只是一个普通的目录结构？我尝试了一些组合，但没有任何效果，因为该网站仍然没有样式......

希望有人能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:21:11.733

尝试以下，做了一些小的调整：

```
<script type="text/javascript" src="<?php echo $this->baseurl; ?>/templates/<?php echo $this->template; ?>/js/eCSSential.js"></script>

<link rel="stylesheet" href="<?php echo $this->baseurl; ?>/templates/system/css/system.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl; ?>/templates/system/css/general.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl; ?>/templates/<?php echo $this->template; ?>/css/style.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 1024px)" href="<?php echo $this->baseurl; ?>/templates/nameoftemplate/css/max-width-1024.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 768px)" href="<?php echo $this->baseurl; ?>/templates/nameoftemplate/css/max-width-758.css" type="text/css" />
<link rel="stylesheet" media="screen and (max-width: 524px)" href="<?php echo $this->baseurl; ?>/templates/nameoftemplate/css/max-width-524.css" type="text/css" />
<link rel="stylesheet" href="<?php echo $this->baseurl; ?>/templates/<?php echo $this->template; ?>/css/lightbox.css" type="text/css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:13:41.953

为什么要使用动态模板目录？只要您不切换，只需编写模板名称而不是

`<?php echo $this->template?>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:18:14.930

确保您的模板文件夹名称正确。

那么您可以通过以下方法访问它。

```
<link href="<?php echo $this->baseurl ?>/templates/<?php echo $this->template; ?>/css/style.css" rel="stylesheet" type="text/css" />

or

<link href="<?php echo JURI::root(); ?>templates/<?php echo $this->template; ?>/css/style.css" rel="stylesheet" type="text/css" />

or

<link href="<?php echo JURI::root(); ?>templates/name of the template_folder/css/style.css" rel="stylesheet" type="text/css" /> 
```

在这种情况下，您将更正结果，否则 index.php 渲染会出现一些问题。检查默认模板并确保其工作正常。

# google-apps-script - 如何阻止来自活跃用户的重复电子邮件？

> ID：13725096
> 
> 赞同：4
> 
> 时间：2012-12-05T14:10:31.360
> 
> 标签：google-apps-script, google-sheets

我需要一点指导！

我为 Google 电子表格创建了一个简单的脚本，该脚本旨在在满足特定条件时向用户发送电子邮件，并将该行标记为“已发送电子邮件”；它在 onEdit 触发器上运行并且效果很好。
但是，如果多个启用触发器的用户同时打开工作表，它将从每个帐户发送相同的电子邮件。

我尝试使用：

```
function onChange(e) {
    if (ROW HASN'T BEEN EMAILED ALREADY) {
       if (3 CELLS IN A ROW HAVE CONTENT) {
           if (Session.getActiveUser().getEmail() == e.user.getUserLoginId()) {
              SEND THE EMAIL
              MARK ROW AS EMAILED
           }
        }
    }
} 
```

这样只有做出更改的用户才会发送电子邮件，但所有用户仍会发送电子邮件。我已经比较了这些值`Session.getActiveUser().getEmail()`并`e.user.getUserLoginId()`手动生成，理论上它应该可以工作......虽然很明显我做错了什么！

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:27:05.420

这是一个有点令人困惑的话题，但我相信这是正确的。

这里有一些细节。

1.  在`onChange(e)`函数中，`e.user`永远是“拥有”文档的人。[查看本页](https://developers.google.com/apps-script/understanding_events)底部的文档中的事件。本质上，您无法确定是哪个用户的更改导致触发器触发。
2.  当有两个用户每个都对`onEdit`事件有一个触发器时，即使只有一个用户打开了电子表格，这两个触发器每次都会运行（基本上该函数运行两次）。但是，根据＃1，您无法在触发函数中运行找出哪个用户的更改导致了`onEdit`事件

您将不得不重新考虑您的工作流程，也许作为一个[定时触发器](https://developers.google.com/apps-script/class_clocktriggerbuilder)，每小时检查人们是否收到电子邮件。另一种选择是只有一个触发器作为文档所有者运行，您可以在那里执行检查逻辑。希望这是有道理的。

# function - matlab图形用户界面回调

> ID：13725098
> 
> 赞同：1
> 
> 时间：2012-12-05T14:10:37.450
> 
> 标签：function, matlab, user-interface, callback, fft

我在一个 m 文件中有这个函数，我想为按钮做一个回调，但我不知道怎么做。谁能帮我？这是功能：

```
function f=fftreal(f,N,dim);
error(nargchk(1,3,nargin));

if nargin<3
  dim=[];  
end;

if nargin<2
  N=[];
end;

if ~isreal(f)
  error('Input signal must be real.');
end;

[f,N,Ls,W,dim,permutedsize,order]=assert_sigreshape_pre(f,N,dim,'FFTREAL');

N2=floor(N/2)+1;

f=comp_fftreal(f);

permutedsize(1)=N2;

f=assert_sigreshape_post(f,dim,permutedsize,order);
end 
```

这是 GUI 自动生成的用户界面代码：

```
function varargout = Fourier_Transform_GUI(varargin)
%FOURIER_TRANSFORM_GUI M-file for Fourier_Transform_GUI.fig
%      FOURIER_TRANSFORM_GUI, by itself, creates a new FOURIER_TRANSFORM_GUI or raises the existing
%      singleton*.
%
%      H = FOURIER_TRANSFORM_GUI returns the handle to a new FOURIER_TRANSFORM_GUI or the handle to
%      the existing singleton*.
%
%      FOURIER_TRANSFORM_GUI('Property','Value',...) creates a new FOURIER_TRANSFORM_GUI using the
%      given property value pairs. Unrecognized properties are passed via
%      varargin to Fourier_Transform_GUI_OpeningFcn.  This calling syntax produces a
%      warning when there is an existing singleton*.
%
%      FOURIER_TRANSFORM_GUI('CALLBACK') and FOURIER_TRANSFORM_GUI('CALLBACK',hObject,...) call the
%      local function named CALLBACK in FOURIER_TRANSFORM_GUI.M with the given input
%      arguments.
%
%      *See GUI Options on GUIDE's Tools menu.  Choose "GUI allows only one
%      instance to run (singleton)".
%
% See also: GUIDE, GUIDATA, GUIHANDLES

% Edit the above text to modify the response to help Fourier_Transform_GUI

% Last Modified by GUIDE v2.5 05-Dec-2012 15:46:34

% Begin initialization code - DO NOT EDIT
gui_Singleton = 1;
gui_State = struct('gui_Name',       mfilename, ...
                   'gui_Singleton',  gui_Singleton, ...
                   'gui_OpeningFcn', @Fourier_Transform_GUI_OpeningFcn, ...
                   'gui_OutputFcn',  @Fourier_Transform_GUI_OutputFcn, ...
                   'gui_LayoutFcn',  [], ...
                   'gui_Callback',   []);
if nargin && ischar(varargin{1})
   gui_State.gui_Callback = str2func(varargin{1});
end

if nargout
    [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
else
    gui_mainfcn(gui_State, varargin{:});
end
% End initialization code - DO NOT EDIT

% --- Executes just before Fourier_Transform_GUI is made visible.
function Fourier_Transform_GUI_OpeningFcn(hObject, eventdata, handles, varargin)
% This function has no output args, see OutputFcn.
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)
% varargin   unrecognized PropertyName/PropertyValue pairs from the
%            command line (see VARARGIN)

% Choose default command line output for Fourier_Transform_GUI
handles.output = hObject;

% Update handles structure
guidata(hObject, handles);

% UIWAIT makes Fourier_Transform_GUI wait for user response (see UIRESUME)
% uiwait(handles.figure1);

% --- Outputs from this function are returned to the command line.
function varargout = Fourier_Transform_GUI_OutputFcn(hObject, eventdata, handles)
% varargout  cell array for returning output args (see VARARGOUT);
% hObject    handle to figure
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% Get default command line output from handles structure
varargout{1} = handles.output;

% --- Executes on button press in exit.
function exit_Callback(hObject, eventdata, handles)
% hObject    handle to exit (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in FFT.
function FFT_Callback(hObject, eventdata, handles)
% hObject    handle to FFT (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in iFFT.
function iFFT_Callback(hObject, eventdata, handles)
% hObject    handle to iFFT (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in DFT.
function DFT_Callback(hObject, eventdata, handles)
% hObject    handle to DFT (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in iDFT.
function iDFT_Callback(hObject, eventdata, handles)
% hObject    handle to iDFT (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA)

% --- Executes on button press in load_file.
function load_file_Callback(hObject, eventdata, handles)
% hObject    handle to load_file (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles    structure with handles and user data (see GUIDATA) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:06:37.357

正如您在生成的代码中看到的：

```
 % --- Executes on button press in FFT.
function FFT_Callback(hObject, eventdata, handles)
% hObject    handle to FFT (see GCBO)
% eventdata  reserved - to be defined in a future version of MATLAB
% handles

    structure with handles and user data (see GUIDATA)

%pre-processing
f=fftreal(f,N,dim);
% post-processing 
```

这是按下 FFT 按钮后将执行的部分代码...

所以在这里调用你自己的函数，你应该完成了。

# c# - Entity Framework 中 IMigrationMetadata 接口的用途和语义

> ID：13725101
> 
> 赞同：8
> 
> 时间：2012-12-05T14:11:09.433
> 
> 标签：c#, .net, entity-framework, database-migration

我试图找出 EF 中 System.Data.Entity.Migrations.Infrastructure.IMigrationMetadata 接口的语义是什么。我知道它用于管理和应用数据库迁移。但我找不到有关它的详细信息。具体来说，我想知道：

1.  Source 属性用于什么？为什么当我使用工具生成迁移时它总是为空？
2.  什么目标属性用于？我看到这些工具正在生成类似 Base64 的东西并放入资源中。它是什么？为什么它以这种不友好的格式生成？
3.  是否可以在不使用工具的情况下手动开发迁移？我想这并不容易，因为应该以某种方式生成 Target 属性 Base64-like 值。我对吗？
4.  什么时候实际使用这个接口？目前我发现迁移器无法自动找到未实现此接口的迁移。我对吗？它是界面的唯一目的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-22T15:33:20.823

我知道的 IMigrationMetadata 接口具有以下职责[。](http://msdn.microsoft.com/en-us/library/hh829563%28v=vs.103%29.aspx)

1.  通过 ID 属性识别迁移，以便可以通过诸如`Update-Database`.
2.  在通过 Target 属性应用迁移后，提供模型的快照。这用于确定应包含在新迁移中的更改。

我猜测 Source 属性通常不是由工具实现的，因为它在`Add-Migration`. 该代码可能只是将最近的现有迁移结束时的模型与从代码生成的模型进行比较，以确定需要包含在新迁移中的更改。

Target 属性返回 EDMX 格式的模型，该模型已使用 GZipStream 压缩并使用 Convert.ToBase64String 编码。我编写了以下代码来解码和编码这些值。如果您要手动编写迁移代码，您可能会发现这很有用。

```
using System;
using System.IO;
using System.IO.Compression;
using System.Text;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main()
        {
            var minimalModel = File.ReadAllText("Model1.edmx");

            var encodedMinimalModel = Encode(minimalModel);

            var decodedMinimalModel = Decode(encodedMinimalModel);
        }

        private static string Decode(string encodedText)
        {
            var compressedBytes = Convert.FromBase64String(encodedText);

            var decompressedBytes = Decompress(compressedBytes);

            return Encoding.UTF8.GetString(decompressedBytes);
        }

        private static string Encode(string plainText)
        {
            var bytes = Encoding.UTF8.GetBytes(plainText);

            var compressedBytes = Compress(bytes);

            return Convert.ToBase64String(compressedBytes);
        }

        public static byte[] Decompress(byte[] bytes)
        {
            using (var memorySteam = new MemoryStream(bytes))
            {
                using (var gzipStream = new GZipStream(memorySteam, CompressionMode.Decompress))
                {
                    return ToByteArray(gzipStream);
                }
            }
        }

        private static byte[] ToByteArray(Stream stream)
        {
            using (var resultMemoryStream = new MemoryStream())
            {
                stream.CopyTo(resultMemoryStream);

                return resultMemoryStream.ToArray();
            }
        }

        public static byte[] Compress(byte[] bytes)
        {
            using (var memoryStream = new MemoryStream())
            {
                using (var gzipStream = new GZipStream(memoryStream, CompressionMode.Compress))
                {
                    gzipStream.Write(bytes,0, bytes.Length);
                }

                return memoryStream.ToArray();
            }
        }
    }
} 
```

压缩可能解释了您关于为什么选择非人类可读格式的查询。对于每次迁移，此内容至少重复一次（在 Target 属性中），并且可能很大，具体取决于模型的大小。压缩节省空间。

关于这一点，据我所知，实际上只有最后一次迁移需要在应用模型后返回模型的真实表示。仅使用该迁移`Add-Migration`来计算新迁移中所需的更改。如果您正在处理非常大的模型和/或大量迁移，则删除该内容可能是有利的。这篇文章的其余部分介绍了我对 Target 属性的最小值的推导，该属性可用于除最近迁移之外的所有内容。

Target 属性必须返回一个字符串对象 - 如果 Target 返回 null，则在调用 update-database 时调用 System.Data.Entity.Migrations.DbMigrator.ApplyMigration 中的 System.Convert.FromBase64String 会引发 ArgumentNullException。

此外，它必须是有效的 XML 文档。当我从 Target 返回一个空字符串时，我收到了一个 XmlException 消息“缺少根元素。”。

从这一点开始，我使用上面的代码对值进行编码。

例如，我在逐步构建模型方面并没有走得太远，`<root />`所以我切换到丢弃空 EDMX 文件中的元素，我通过向我的项目添加新的“ADO.Net 实体数据模型”然后选择“空模型”选项。这就是结果。

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <edmx:Runtime>
    <edmx:StorageModels>
      <Schema xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl" Namespace="Model1.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2005">
      </Schema>
    </edmx:StorageModels>
  </edmx:Runtime>
</edmx:Edmx> 
```

当我使用上面的代码对其进行编码时，这就是结果。

```
H4sIAAAAAAAEAJVQy07DMBC8I/EP1t6xExASRA1VVTgWIYK4W/amtfCjeN2q/D12HsqJAxdLOzOe2Z3V+uIsO2MkE3wLNa+AoVdBG79v4ZT6mwdYP11frVC7S/OSH/Y5i++KOH/31BS2hUNKx0YIUgd0krgzKgYKfeIqOCF1ELdV9SjqWhQ5ZFfGRt/3k0/G4YDMWJdClHvcBY2WJiZz3WA+xv4vURBpC+xVOqSjVNjC4F3zkoTANtbIbNmh7YG9xXA2GmOefyih488ySd5926016NMi2ElveqT0Eb4wd5Lz7mHZVozrzoeJPy6biKWGCSh95+kXfT3Qv6UBAAA= 
```

请注意确保在源代码控制中保留每个迁移的真实目标值，以防您需要回滚到早期版本。您可以尝试将迁移应用到数据库，然后使用 Visual Studio 生成 EDMX 文件。另一种选择是回滚形成模型的类，然后执行`Add-Migration`. 从新创建的迁移中获取目标值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-25T09:32:12.337

我只是在研究这个，因为我想使用 Source 属性来强制执行严格的迁移顺序。

问题1的答案隐藏在`DbMigrator.Scaffold`

```
var scaffoldedMigration
    = _configuration.CodeGenerator.Generate(
        migrationId,
        migrationOperations,
        (sourceModel == _emptyModel.Value)
        || (sourceModel == _currentModel)
        || !sourceMigrationId.IsAutomaticMigration()
            ? null
            : Convert.ToBase64String(modelCompressor.Compress(sourceModel)),
        Convert.ToBase64String(modelCompressor.Compress(_currentModel)),
        @namespace,
        migrationName); 
```

换句话说，只有在之前的迁移是“自动迁移”时才会填充 Source 属性。刚刚对其进行了测试，自动迁移后的后续迁移会产生如下结果：

```
[GeneratedCode("EntityFramework.Migrations", "6.2.0-61023")]
public sealed partial class Fourth : IMigrationMetadata
{
    private readonly ResourceManager Resources = new ResourceManager(typeof(Fourth));

    string IMigrationMetadata.Id
    {
        get { return "201905250916038_Fourth"; }
    }

    string IMigrationMetadata.Source
    {
        get { return Resources.GetString("Source"); }
    }

    string IMigrationMetadata.Target
    {
        get { return Resources.GetString("Target"); }
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-06T00:15:17.037

您转到：[codeplex 上的 EF6 存储库](http://entityframework.codeplex.com/SourceControl/changeset/view/11983507ff74#src/EntityFramework/Migrations/Infrastructure/IMigrationMetadata.cs)，您会看到：

```
public interface IMigrationMetadata
{
    /// <summary>
    ///     Gets the unique identifier for the migration.
    /// </summary>
    string Id { get; }

    /// <summary>
    ///     Gets the state of the model before this migration is run.
    /// </summary>
    string Source { get; }

    /// <summary>
    ///     Gets the state of the model after this migration is run.
    /// </summary>
    string Target { get; }
} 
```

您可以获取项目并检查参考以了解如何使用此接口。base64 的东西是你的模型。再次使用代码，您应该能够跟踪它是如何完成的。

# javascript - jQuery Ajax WCF POST - 返回布尔值

> ID：13725105
> 
> 赞同：2
> 
> 时间：2012-12-05T14:11:23.870
> 
> 标签：javascript, jquery, wcf

我似乎找不到关于如何从 jQuery 发布到 WCF Web 服务并捕获返回的布尔值的示例。这是我到目前为止返回 JSON 数据的代码：

**Javascript**

```
function VerifyPINData(pin) {
$.ajax({
    type: 'POST',
    url: "http://localhost:8523/WebService/VerifyPINData?pinData=" + pin,
    data: JSON.stringify,
    contentType: 'application/json; charset=utf-8',
    success: function(data){ alert("result is: " + data); },
    error: function() {alert("error"); },
    complete: function() { alert("complete"); }
});
} 
```

**WCF**

```
[OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "VerifyPINData?pinData={pinData}")]
    bool VerifyPINData(string pinData); 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:42:27.673

弄清楚了：

将返回的数据转换为布尔值：

```
success: function(data){ alert("result is: " + Boolean(data)); }, 
```

在 WCF 中将响应指定为 JSON

```
[OperationContract]
    [WebInvoke(Method = "POST", UriTemplate = "VerifyPINData?pinData={pinData}", ResponseFormat = WebMessageFormat.Json)]
    bool VerifyPINData(string pinData); 
```

# javascript - 尝试使用 jquery 选择选择框的值

> ID：13725116
> 
> 赞同：0
> 
> 时间：2012-12-05T14:11:57.133
> 
> 标签：javascript, jquery, html

我查看了[这个示例](https://stackoverflow.com/questions/314636/how-do-you-select-a-particular-option-in-a-select-element-in-jquery)，但无法实现它。我想知道我是否遗漏了其他东西。

注意：`response.user_data['admin']`不为空。我检查了。

有任何想法吗？

谢谢

**没有工作线**

```
$('#select_administrator option[value="'+response.user_data['admin']+'"]');
$('#select_administrator option:eq('+response.user_data['admin']+')').attr('selected', 'selected');
$('#select_administrator option:eq('+response.user_data['admin']+')').prop('selected', true); 
```

**HTML**

```
<select id="select_administrator" name="select_administrator">
    <option value="NO" <?php echo ($administrator == 'NO') ? 'selected="selected"' : null; ?>>NO</option>
        <option value="YES" <?php echo ($administrator == 'YES') ? 'selected="selected"' : null; ?>>YES</option>
</select> 
```

**查询**

```
$(document).ready(function()
{
   $("#select_user").change(function(event)
   {
      event.preventDefault();

      var selected_user = null;
      selected_user = $(this).val();

      $.ajax({
                 type       : "POST",
                 url        : 'mypage.php',
                 data       : {select_user:selected_user},
                 dataType   : "json",
                 success        : function(response)
         {
            if(response.status == "success")
                    {
                        $("#form_errors_jquery").hide();

                        $("#text_username").val(response.user_data['username']);

                        //response.user_data['admin'];
                        //Should select admin combo here

        //$('#select_administrator option[value="'+response.user_data['admin']+'"]');
        //$('#select_administrator option:eq('+response.user_data['admin']+')').attr('selected', 'selected');
        //$('#select_administrator option:eq('+response.user_data['admin']+')').prop('selected', true);

                    }
                    else
                    {
                        $("#form_errors_jquery").html(response.error).fadeIn(1000);
                    }
         },
                 error      : function(response)
                 {
                     $("#form_errors_jquery").html("A network error occured").fadeIn(1000);
         }

      return false;
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:57:09.403

为了解决这个问题，我最终改用了这段代码，但为什么上面的原始代码不起作用？

```
if (response.user_data['admin'] == 'YES')
{
    $('#select_administrator').val('YES');
}
else
{
    $('#select_administrator').val('NO');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:15:36.063

对于初学者来说，您的 jquery 会在它更改时选择它，`$("#select_user").change(function(event)` 但您的 html 是`<select id="select_administrator" name="select_administrator">`这样，因此您可能希望选择正确的选择元素 id 并重试。

此外，这两者都可以在您的 HTML 中使用 jsfiddle。我的猜测是您的 response.user_data['admin'] 有空格，或者格式不正确。

```
$(document).ready(function() {
   $('#select_administrator option[value="NO"]').prop('selected', true); 
});​

$(document).ready(function() {
   $('#select_administrator option[value="NO"]').attr('selected','selected'); 
});​ 
```

编辑：我制作了一个[jsfiddle](http://jsfiddle.net/Pf2Dq/)，将上面的代码与你想要做的事情一起简化，这两个选项根本不起作用：

```
 $('#select_administrator option:eq('+response.user_data['admin']+')').attr('selected', 'selected');
 $('#select_administrator option:eq('+response.user_data['admin']+')').prop('selected', true); 
```

但是如果你添加 attr('selected', 'selected'); 第一次尝试使它看起来像这样：

```
$('#select_administrator option[value="'+response.user_data['admin']+'"]').attr('selected', 'selected'); 
```

它工作正常。试试看，让我知道？

# c++ - C++ 输入运算符重载“>>”

> ID：13725118
> 
> 赞同：6
> 
> 时间：2012-12-05T14:12:08.123
> 
> 标签：c++, input, operator-overloading, cin, rational-numbers

我有一个有理数类由两个整数组成：`num`，提名者，和`den`，分母。

以下运算符应该从流中读取有理数。

```
istream& operator >> (istream& Is, rational& r) {
  char c; //Test char.
   double n; //Could be either the numerator of the fraction or the antiperiod of the repeating decimal number.
    Is >> n;
    int i = 0;
    for (; n*10-pow(10, i+1) < 1 && int(n) != 0; i++) {
        n *= 10;
    }
    for (; int(n*10) % 10; i++) {
        n *= 10;
    }
    n /= pow(10, i);
    if (i == 0) {
        r.num = n;
        Is >> ws;
        c = Is.peek();
        if (c == '/') {
            c = Is.get();
            Is >> r.den;
        } else {
            r.den = 1;
        }
        r.normalize(); //This function normalizes the fraction.
    } else {
        Is >> ws;
        c = Is.peek();
        if (c == 'p' || c == 'P') {
            int p; //Period of the repeating decimal number.
            c = Is.get();
            Is >> p;
            vector<int> a = genFrac(n, p); //This function returns the fraction which express the decimal repeating number. It returns a "vector<int>" with the nominator at index 1 e denominator at index 0.
            r.num = a[1];
            r.den = a[0];
        } else {
            i = 0;
            for (; n*10-pow(10, i+1) < 1 && int(n) != 0; i++) {
                n *= 10;
            }
            for (; int(n*10) % 10 != 0; i++) {
                n *= 10;
            }
            int pot10 = pow(10, i);
            r.num = n;
            r.den = pot10;
        }
        r.normalize();
    }
    return Is;
} 
```

我编写了这段代码来实现我的“理性”类的输入。我从我的 C++ 书中写的那本书修改了它，以便可以输入十进制数字，包括重复数字。

它应该能够处理这些类型的输入：

*   9/8
*   9
*   9.87
*   1.p3 (= 1.3333333333)

但它不起作用，甚至我从书中复制的部分也不起作用。

谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:26:28.110

我想我会写这个有点不同¹。

除非你真的需要这样做，否则我会首先阅读整个“块”输入（即，直到下一个空格的所有字符），然后理清应该如何表示一个数字，然后调用一个单独的每个可能表示的函数：

```
std::istream &operator>>(std::istream &is, rational &r) {
    std::string temp;

    Is >> temp;
    if (temp.find('/') != std::string::npos)
        r = cvt_fraction(temp, Is);
    else if (temp.find_first_of("pP") != std::string::npos)
        r = cvt_repeating(temp, Is);
    else if (temp.find('.') != std::string::npos)
        r = cvt_float(temp, Is);
    else
        r = cvt_int(temp, Is);
    return Is;
} 
```

我将 istream 传递给每个原因有两个：首先，如果他们在输入中发现垃圾，他们可以设置流的失败位。其次，*如果*他们真的需要阅读更多输入，他们可以（但如果真的需要，我会有点惊讶）。

在我看来，这些转换函数中的每一个都应该是相当微不足道的：如果我从字符串应该是`digits "/" digits`或“数字“p”数字”这一事实开始，那么进行转换通常会非常简单——特别是，足够简单，我认为几乎任何人都可以浏览代码并整理出每个部分应该做什么。

* * *

1.  老实说，我并不是要讨厌，但是如果我在维护代码，并且遇到了您`operator>>`的 . 否则，将其列入“技术债”清单，并尽快更换。一个简单的事实是，就目前而言，甚至需要进行大量研究才能确定应该支持哪些输入格式，更不用说代码的哪一部分处理每一个，或者整个事情应该如何处理共同努力产生有意义的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:50:37.897

评论中提到的问题（`p`未出现在`c=is.peek()`语句中）来自`p`实际存储在中`ws`（它存储在中`is >> ws`）的事实。

上面的代码也没有提到`ws`，但我认为它是一个`char`.

# php - Eclipse / Aptana 正则表达式搜索和替换

> ID：13725121
> 
> 赞同：5
> 
> 时间：2012-12-05T14:12:15.573
> 
> 标签：php, regex, eclipse, aptana

在 Aptana (Eclipse) 中，我想用对象替换很多文件 PHP 关联数组：

```
$requete["something"] 
```

经过

```
$row->something 
```

我试过这个，搜索：

```
\$requete\[\"([\w.])+\"\] 
```

用，替换：

```
\$row->$1 
```

但正则表达式引擎只接受搜索的最后一个字符：g 表示某些东西

欢迎任何想法！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:38:26.200

正则表达式仅匹配组的最后一个字符的原因是加号在单词匹配组之外。此外，该期间是不需要的。

要修复正则表达式，请将后面的句点替换`w`为加号

`\$requete\[\"([\w]+)\"\]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:33:02.390

用于`\$requete\[\"(\w+?)\"\]`搜索部分的正则表达式。当前正则表达式的问题是您在捕获组之外使用量词。

# java - 如何使用云打印打印 Android 活动显示

> ID：13725122
> 
> 赞同：2
> 
> 时间：2012-12-05T14:12:23.090
> 
> 标签：java, android, webview, google-cloud-print

我正在尝试按照[集成指南](https://developers.google.com/cloud-print/docs/android)将 Google Cloud Print 实施到应用程序中。我试图通过打印出 google.com 来保持基本。单击我创建的打印按钮时，它会弹出对话框，但我收到一个 FileNotFoundException 说明

> java.io.FileNotFoundException：没有内容提供者： [http ://www.google.com](http://www.google.com)

如果我然后选择一台打印机并单击打印，对话框会给我一个“文档丢失”消息，这基于 FileNotFoundException 是有意义的。

我从指南中逐字获取了 print_dialog.xml 和 PrintDialogActivity.java。这是我调用活动的代码：

```
Intent printIntent = new Intent(getActivity(), PrintDialogActivity.class);
Uri docUri = Uri.parse("http://www.google.com");
printIntent.setDataAndType(docUri, "text/html");
printIntent.putExtra("title", "Google");
startActivity(printIntent); 
```

我试图弄清楚如何打印网页，但最终希望能够打印活动显示。

所以我的问题是：我需要做什么才能打印网页或活动显示？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-23T01:28:11.700

尝试将以下内容添加到您的应用程序清单中

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# php - 插入查询在每周日晚上 11:59 运行

> ID：13725126
> 
> 赞同：0
> 
> 时间：2012-12-05T14:12:29.597
> 
> 标签：php

我想在表格中插入数据，上周每周日11:59的数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:14:21.953

您必须通过 cronjob 来完成（如果它是 Linux 服务器）。

了解更多信息：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:17:26.163

不要为此使用 sleep() ，为此保持进程始终处于活动状态是一种不好的做法。使用 cron 作为正确工作的正确工具。

如果您使用 linux 而不是以 root 身份在控制台中执行此操作

```
crontab -e 
```

这将允许您编辑 cron 作业列表。添加一行

```
# m h  dom mon dow   command
59 11 * * 0 /bin/php /path/to/your_script.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:13:56.730

查看 cronjobs，或者让 PHP 脚本 24/7 运行并使用 time_sleep_until(float $timestamp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:17:39.513

我喜欢这样安排这种安排：

*   创建名为“计划”的数据库表，并插入到您所有计划的作业及其时间中。
*   创建每分钟运行的 crontab 作业，从计划中提取计划的作业并运行它们。

更容易进行更改 - 管理、停止和启动。

# jquery - 通过 Xajax 创建选择框后触发选择的插件

> ID：13725128
> 
> 赞同：0
> 
> 时间：2012-12-05T14:12:31.160
> 
> 标签：jquery, ajax, drop-down-menu, jquery-chosen

我想将 Jquery 插件绑定到`Chosen`我通过 Xajax 创建的选择框上，当页面加载时，选择不会出现在 DOM 中。

因此，我首先返回选择框，然后`.chosen()`在框 ID 上执行：

```
<? $objResponse = new xajaxResponse();
$objResponse->assign($selectID, 'innerHTML', $codeThatCreatesSelectBox);
$objResponse->script('$(function(){ $("#selectID").chosen(); });');
return $objResponse; ?> 
```

但我显然做错了什么......我怎么能这样做？

编辑

我尝试在使用 ajaxComplete() 触发插件之前等待 ajax 返回：

```
$objResponse->script('$("#selectID").ajaxComplete(function() {$("#selectID").chosen(); });'); 
```

但这并没有改变任何东西..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:22:27.353

您可以创建一个回调来执行此操作。从文档：[http ://www.xajax-project.org/En/docs-tutorials/upgrading-from-xajax-0-2-x-to-0-5/](http://www.xajax-project.org/En/docs-tutorials/upgrading-from-xajax-0-2-x-to-0-5/)

```
myCallback = xajax.callback.create(100, 10000);
myCallback.onRequest = function()
{
    xajax. $('loadingMsg').style.display = 'block';
};
myCallback.onComplete = function()
{
    xajax. $('loadingMsg').style.display = 'none';
};

// then, on the PHP side, specify the callback option when registering your function:
$xajax->register(XAJAX_FUNCTION, 'myFunction', array(
    'callback' => 'myCallback'
)); 
```

因此，您可以在所需的回调中调用您的 jQuery 插件代码。

# rpm - rpmBUILD : rpmbuild 显示客户端消息或日志

> ID：13725137
> 
> 赞同：0
> 
> 时间：2012-12-05T14:12:59.863
> 
> 标签：rpm, rpmbuild, rpm-spec, rpm-maven-plugin

> 对于指定服装条件下的指定服装消息，我在客户端控制台上打印 stderr 和 stdout 消息时遇到问题。我想把它放在规范文件或哪里？
> 
> “例如，如果我在卸载后构建了 rpm xyz.rpm，我想检查 xyz 的服务是否停止，然后应该卸载它，否则会给出错误消息并停止卸载。如果我使用，我还有一个自定义 - v 那么它应该显示，否则不会。有可能吗？”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:12:53.347

根据[rpm.org](http://www.rpm.org/max-rpm/s1-rpm-inside-scripts.html)，您可以使用 %preun 脚本在卸载发生之前运行任何正常的 shell 命令，这样您就可以停止服务，或者因错误而中止。

# javascript - javascript多维动态数组

> ID：13725138
> 
> 赞同：13
> 
> 时间：2012-12-05T14:13:00.613
> 
> 标签：javascript

我可以使用一些指导来指定 javascript 中的动态多维数组。我知道javascript本身并没有定义多暗淡数组，而是一个数组的数组，即。

```
 var items = [[1,2],[3,4],[5,6]]; 
```

或者

```
 var array = [[,],[,]] 
```

或者

```
 var a = [[1,2],[3,4]] 
```

我的问题是我不知道实际尺寸，并且像上面的第二个示例一样简单地定义数组，仍然不允许数组超出两个记录集。我认为有一个类似于 VB 的 REDIM stmt，但无法找到任何东西。

我的问题的另一个部分是，当我指定数组的第二维时，如下例所示，数组在 for 块之外变得无法访问。

```
var Exforsys=new Array(4)
for (i=0; i <4; i++) {
   Exforsys[i]=new Array(4)
} 
```

我正在尝试从我的特定数组中检索数据，如下所示......

```
 function newTest() {
        var myArray = [[],[]];
      //  myArray[] = new Array(14);

        var recCount = coordsAry.length / 15;
        var n =0;

        var i = 0;
        var s = 0;

        for (i = 0; i < recCount; i++) {
            for (s = 0; s < 15; s++) {
              //  myArray[i] = new Array(14);

                myArray[i][s] = coordsAry[n];
                n++;

              //  alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));

            }
            // var u = 4;
            s = 0;

            alert(myArray[0][3]);
            alert(myArray[0][4]);

            alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));              

        } 
```

coordsAry 有 105 条记录并且是平坦的，{"12","Frank","564", ... etc} 这已被证明。填充第二条记录后，我收到此错误....

```
Error: Unable to set value of the property '0': object is null or undefined. 
```

显然，我的 javascript 技能至少可以说有点粗糙。任何示例代码将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-05T14:23:30.637

您不会将数组调暗到实际大小，

您可以将任何索引上的变量设置为您想要的任何内容

如果你想要两个维度，你可以定义一个数组

`var arr = []`

将一个元素设置为另一个数组

`arr[0] = []`

并在“第二维”中的元素内放置一个值

`arr[0][10] = 10`

您只有“第一维”中的元素才能成为数组

你也可以做一些事情，比如将数组放入数组中

像

```
var arr = []
var arr1 = [1,2,3]
arr[0] = arr1
console.log(arr[0][2]) //3 
```

如果您有一个数组并且想要将元素推送到内部数组中，只需检查该元素是否已定义，例如

```
var arr = []
for ( var i = 0; i < 5 ; i++) {
    if(!arr[i])
        arr[i] = []
    for ( var j = 0; j < 3 ; j++)
        arr[i][j] = i + " - " + j // Or like this,
        //arr[i].push(i + " " + j) // 
}
console.log( arr[2][3]) // 2 - 3 
```

## 鉴于您发布的代码

```
function newTest() {
    var myArray = [[],[]];
  //  myArray[] = new Array(14);

    var recCount = 15
    var n =0;

    var i = 0;
    var s = 0;

    for (i = 0; i < recCount; i++) {
        if(!myArray[i])
             myArray[i] = []
        for (s = 0; s < 15; s++) {
            console.log(i)

          //  myArray[i] = new Array(14);

            myArray[i][s] = s;
            n++;

          //  alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));

        }
        // var u = 4;
        s = 0;

        alert(myArray[0][3]);
        alert(myArray[0][4]);

        alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));              

    }
}
newTest() 
```

这对我有用

​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:19:16.600

所有数组在 javascript 中都是动态的。你可以做类似的事情

```
var list = [];
list[15] = 15; 
```

它会简单地将数组扩展为长度为 16，前 15 个索引的值未定义（~ null）。因此，您的 3 个多维数组示例应该都可以工作。

**编辑：**刚刚看到您包含您的代码。您没有初始化第一个维度的数组。你的循环应该是

```
for (i = 0; i < recCount; i++) {

    //If the outer array does not have an inner array at this position already, create one
    if (!myArray[i])
        myArray[i] = []; //!!!

        for (s = 0; s < 15; s++) {
          //  myArray[i] = new Array(14);

            myArray[i][s] = coordsAry[n]; //myArray[i] returned null/undefined, when i got bigger then the declared array.
            n++;

          //  alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));

        }
        // var u = 4;
        s = 0;

        alert(myArray[0][3]);
        alert(myArray[0][4]);

        alert("i=" + i + " s=" + s + " Val: " + (myArray[i][s]));              

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:20:46.093

要将元素添加到数组中，您可以使用 push(val)（添加到数组的后面）或 unshift(val) 来添加到数组的前面。所以：

```
var Exforsys=[];
for (i=0; i <4; i++) {
   Exforsys.push([]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T21:00:28.700

最近，我一直在使用这种语法来创建一个由固定行和列组成的二维数组。

创建二维数组：

```
new Array(rows).fill(0).map(_ => new Array(cols)) 
```

创建二维数组并使用默认值填充：

```
new Array(rows).fill(0).map(_ => new Array(cols).fill(0)) 
```

细节：

1.  `rows`通过执行 -创建一个一维数组`new Array(rows)`。
2.  所以，我们使用 - 填充这个数组的值`.fill(0)`。这一步是必需的，因为 JavaScript 数组的 map 方法不会遍历空值。
3.  我们遍历一维数组的所有元素，并使用`.map(_ => new Array(cols))`.

# facebook - Heroku 加载时间“有时会重置连接并清空页面”

> ID：13725143
> 
> 赞同：-1
> 
> 时间：2012-12-05T14:13:15.713
> 
> 标签：facebook, performance, caching, heroku

我在 Heroku 上托管了一个 Facebook 应用程序。该代码在我的服务器上是完美的，但是当我将它托管在 Heroku 上并且数据库中的条目变得更多时，它现在有时会显示空白页并且它显示连接重置问题...。我该怎么办？我在比赛的中间。虽然我已经为主机安装了 ClearDB MySQL Database Punch、MemCachier 100 MB 和 5 dynos。请帮助我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:21:02.240

确保每次打开**数据库连接时都关闭它。**还要增加 php.ini 中的**memory_limit**。

# java - 关于地图不同的实现

> ID：13725148
> 
> 赞同：-3
> 
> 时间：2012-12-05T14:13:34.030
> 
> 标签：java, collections, map, guava

我有以下地图..

```
Map<String, Collection<Integer>> multiValueMap = new HashMap<String, Collection<Integer>>();
         multiValueMap.put("a", new ArrayList<Integer>());
         multiValueMap.get("a").add(new Integer(10));
         multiValueMap.get("a").add(new Integer(20));
         multiValueMap.get("a").add(new Integer(30));

         System.out.println("There are "+multiValueMap.size()+" elements in the map.");
         System.out.println("Content of multiValueMap are...");
         Set s=multiValueMap.entrySet();
         Iterator itr=s.iterator();
         while(itr.hasNext())
         {
             Map.Entry m=(Map.Entry)itr.next();
             System.out.println(m.getKey()+"\t"+m.getValue()+"\t"+ m.hashCode());
          } 
```

这个输出是..

```
There are 1 elements in the map.
Content of multiValueMap are...
a   [10, 20, 30]    39954 
```

请告知是否可以通过 Guava Multimap 实现同样的事情，如果那样，请告知..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:43:52.843

```
 Multimap<String, Integer> multimap = ArrayListMultimap.create();
 multimap.putAll("a", ImmutableList.of(10, 20, 30));
 System.out.println("There are " + multimap.keySet().size() +
     " elements in the map.");
 System.out.println("Content of multimap are...");
 for (Map.Entry<String, Collection<Integer>> asMapEntry :
     multimap.asMap().entrySet()) {
   System.out.printf("%s\t%s\t%s%n", asMapEntry.getKey(), asMapEntry.getValue(),
       asMapEntry.hashCode());
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:18:11.833

要获取一个中的键数，*可以*`MultiMap`使用[`Multimap.keySet().size()`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html#keySet%28%29)

您还可以迭代此集合并使用它[`Multimap.get(key)`](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html#get%28K%29) 来获取附加到此键的所有值的集合。

# token - 获取 ace 编辑器的令牌字符串

> ID：13725154
> 
> 赞同：12
> 
> 时间：2012-12-05T14:13:42.907
> 
> 标签：token, ace-editor

我刚刚查看了厨房水槽演示，发现有一个选项“显示令牌信息”显示鼠标在什么类型的文本上（变量、函数等）

我想创建类似的东西，可以在当前光标位置获取单词的当前标记字符串。有谁知道该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T22:41:52.567

这样：

```
editor.on('mousemove', function(e) {
    var position = e.getCursorPosition();
    var token = editor.session.getTokenAt(position.row, position.column);

}); 
```

它将返回一个对象：

```
token = {
  type: "paren.rparen",
  value: "}",
  index: 0,
  start: 0
} 
```

# c# - 用循环中的最后一个序列做一些不同的事情

> ID：13725163
> 
> 赞同：-3
> 
> 时间：2012-12-05T14:14:01.390
> 
> 标签：c#

我正在寻找使用 C# 通过循环的最后一次迭代做不同事情的基本语法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:16:18.590

它没有特殊的语法。

这只是一种可能的方法：

```
for (int i = 0; i < n; ++i)
{
    if (i == n - 1)
    {
        // Something special that must be done before the last iteration
    }

    // Normal iteration
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:17:19.623

什么样的循环，什么样的集合？

假设它具有以下`Count`属性`ICollection`：

```
for(int i=0; i < col.Count; i++)
{
    if(i == col.Count-1)
    {
        // ...
    }
} 
```

对于所有其他您可以使用[`Enumerable.Count`](http://msdn.microsoft.com/en-us/library/bb535181.aspx)执行查询并枚举它们以确定计数的方法（如果类型可转换为`ICollection<T>`它将使用该`Count`属性）：

```
int index = 0;
int count = col.Count();
foreach(var x in col)
{
    if(index++ == count - 1)
    {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:19:13.137

```
 var collection = new[] { "1", "2", "3" };
        for (var i = collection.Length - 2; i > -1; i--)
        {
            // do something with
            var element = collection[i];
        }

        // now do something with
        var last = collection.Last(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:17:45.053

一般而言，对于 的任何序列`T`，

```
bool waitingForOne = true;
T last = default(T);
foreach (T t in MySequenceOfT) // or for over whole collection or while...
{
    if (!waitingForOne)
        doSomethingWith(last);
    else
        waitingForOne = false;
    last = t;        
}
if (!waitingForOne)
    doSomethingElseWith(last); 
```

这个想法是，在每次迭代中，您都保留*当前*项目并对*前一个*项目（如果有的话）做一些事情。最后，您对*最后一项执行**其他*操作。

# java - Spring：如何通过注释替换构造函数参数？

> ID：13725165
> 
> 赞同：13
> 
> 时间：2012-12-05T14:14:15.633
> 
> 标签：java, spring, annotations

> **可能重复：**
> [用 Spring Annotation 替换 <constructor-arg>](https://stackoverflow.com/questions/4614349/replace-constructor-arg-with-spring-annotation)

我想用注释替换 XML applicationContext 配置。

如何用固定的构造函数参数替换简单的bean？

例子：

```
<bean id="myBean" class="test.MyBean">
    <constructor-arg index="0" value="$MYDIR/myfile.xml"/>
    <constructor-arg index="1" value="$MYDIR/myfile.xsd"/>
</bean> 
```

我正在阅读关于@Value 的一些解释，但我真的不明白如何传递一些固定值......

部署 Web 应用程序时是否可以加载此 bean？

谢谢你。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T14:20:41.633

我想你所追求的是：

```
@Component
public class MyBean {
    private String xmlFile;
    private String xsdFile;

    @Autowired
    public MyBean(@Value("$MYDIR/myfile.xml") final String xmlFile,
            @Value("$MYDIR/myfile.xsd") final String xsdFile) {
        this.xmlFile = xmlFile;
        this.xsdFile = xsdFile;
    }

    //methods
} 
```

您可能还希望这些文件可以通过系统属性进行配置。您可以使用注释来使用, 和语法`@Value`读取系统属性。`PropertyPlaceholderConfigurer``${}`

为此，您可以在注释中使用不同`String`的值：`@Value`

```
@Value("${my.xml.file.property}")
@Value("${my.xsd.file.property}") 
```

但您的系统属性中还需要这些属性：

```
my.xml.file.property=$MYDIR/myfile.xml
my.xsd.file.property=$MYDIR/myfile.xsd 
```

# java - 如何根据 JButton 的大小自动增加或减小 JButton 文本的大小？

> ID：13725166
> 
> 赞同：5
> 
> 时间：2012-12-05T14:14:16.940
> 
> 标签：java, swing, jpanel, jbutton, grid-layout

我正在尝试自动增加/减少 JButton 文本的字体大小（如果 JButton 增加/拉伸它的文本也会增加，如果 JButton 减小它的文本也会减少）。JButtons 的默认字体是 Sans-Serif 大小 20，它永远不会小于 20（它可以是 21、30、40 或大于或等于 20 的任何值，但永远不会小于 20）。我有一个名为 MenuJPanel 的 JPanel，它使用 GridLayout 添加 5 个 JButton，随着 JPanel 的增加/减少，这些按钮的大小会增加/减少。我选择了 GridLayout，因为它似乎是为此目的的最佳布局，我错了吗？我还在 MenuJPanel 中添加了一个 componentResized。您可以在下面看到我的部分有效的代码。

![在此处输入图像描述](../Images/2ab25aaf0257b5dc589ca4742d9a2b29.png)

```
public class MenuJPanel extends JPanel {

    private JButton resizeBtn1;
    private JButton resizeBtn2;
    private JButton resizeBtn3;
    private JButton resizeBtn4;
    private JButton resizeBtn5;

    public MenuJPanel() {
        initComponents();
      this.addComponentListener(new ComponentAdapter() {
            @Override
            public void componentResized(ComponentEvent e) {

                Font btnFont = resizeBtn1.getFont();
                String btnText = resizeBtn1.getText();

                int stringWidth = resizeBtn1.getFontMetrics(btnFont).stringWidth(btnText);
                int componentWidth = resizeBtn1.getWidth();

                // Find out how much the font can grow in width.
                double widthRatio = (double) componentWidth / (double) stringWidth;

                int newFontSize = (int) (btnFont.getSize() * widthRatio);
                int componentHeight = resizeBtn1.getHeight();

                // Pick a new font size so it will not be larger than the height of label.
                int fontSizeToUse = Math.min(newFontSize, componentHeight);

                // Set the label's font size to the newly determined size.
                resizeBtn1.setFont(new Font(btnFont.getName(), Font.BOLD, fontSizeToUse));
            }
        });
    }

    private void initComponents() {

        resizeBtn1 = new javax.swing.JButton();
        resizeBtn2 = new javax.swing.JButton();
        resizeBtn3 = new javax.swing.JButton();
        resizeBtn4 = new javax.swing.JButton();
        resizeBtn5 = new javax.swing.JButton();

        setLayout(new java.awt.GridLayout(5, 0));

        resizeBtn1.setText("Text to resize 1");
        add(resizeBtn1);

        resizeBtn2.setText("Text to resize 2");
        add(resizeBtn2);

        resizeBtn3.setText("Text to resize 3");
        add(resizeBtn3);

        resizeBtn4.setText("Text to resize 4");
        add(resizeBtn4);

        resizeBtn5.setText("Text to resize 5");
        add(resizeBtn5);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:17:57.930

通常，`ButtonUI`a 的委托`JButton`会根据设计者选择的字体和平台的美学来计算按钮的首选大小。当您的方法解决了这个问题时，由您决定文本将如何随按钮缩放并适应按钮装饰。

在没有创建自己的`ButtonUI`情况下，您可以简单地缩放文本。在这个[例子](https://stackoverflow.com/a/8282330/230513)中，`TextLayout`用于以`BufferedImage`任意大的尺寸呈现文本，可以根据需要缩小。在此[示例](https://stackoverflow.com/a/4151403/230513)中，单个数字的字形以 a 呈现`BufferedImage`并缩放以适合按钮的当前大小。如果您需要处理 an 的相对定位`Icon`，请参阅[此处](https://stackoverflow.com/a/3597688/230513)`SwingUtilities.layoutCompoundLabel()`检查。

# unity3d - 如何更改相交两个平面的纹理

> ID：13725167
> 
> 赞同：1
> 
> 时间：2012-12-05T14:14:17.323
> 
> 标签：unity3d

我有两个相交的平面。我想改变这个平面的交点纹理并向这个交点添加动画。这是怎么做的？

# php - 为什么从表单发送的存储的文本区域数据中添加了额外的换行符

> ID：13725173
> 
> 赞同：1
> 
> 时间：2012-12-05T14:14:33.283
> 
> 标签：php, html, textarea

我有一个Textarea，里面有这个：

```
Test can't talk<br />
Test 
```

当我将它发送到我的预览页面时，我使用它：

```
$Comments = htmlspecialchars("$_POST[CustComments]", ENT_QUOTES);
$Comments = str_replace("\n","<br />", $Comments); 
```

然后它在预览页面上显示：

```
Test can't talk<br />
Test 
```

当我回去编辑它时，在编辑页面代码中我有这个。

```
$Comments = str_replace("<br />","\n", $_POST['CustComments']);
$Comments = htmlspecialchars($Comments, ENT_QUOTES); 
```

但它表明了这一点：

```
Test can't talk

Test 
```

这个额外的休息来自哪里，我该如何摆脱它？

* * *

**更新：** 根据编辑页面上的建议，我有这个。

```
$Comments = htmlspecialchars($_POST['CustComments'], ENT_QUOTES); 
```

这表明了这一点：

```
Test can't talk
<br />Test 
```

这额外的钱又是`<br />`从哪里来的？如果我使用`strreplace`它会显示这样

```
Test can't talk

Test 
```

只使用这个：

```
$Comments = nl2br($_POST['CustComments']); 
```

它显示了这一点：

```
Test can't talk<br />
<br />Test 
```

再次添加随机`<br />`数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:46:25.357

在视图页面上需要使用这个：

```
$Comments = htmlspecialchars("$_POST[CustComments]", ENT_QUOTES);
$Comments = str_replace("\r\n","<br />",$Comments); 
```

在编辑页面上使用这个：

```
$Comments = str_replace("<br />","\n",$_POST['CustComments']) 
```

在提交页面：

```
function keepSafe($value) {
    if (get_magic_quotes_gpc()) {
        $value = stripslashes($value);
    }
    if (!is_numeric($value)) {
        $value = "'" . mysql_real_escape_string($value) . "'";
    }
    return $value;
}
$Comments = keepSafe($_POST['CustComments']); 
```

奇迹般有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:16:26.190

为什么要使用 str_replace()？试试这个：

```
$Comments = nl2br($Comments); 
```

# java - Java 意外类型进行字符串比较，奇怪

> ID：13725174
> 
> 赞同：0
> 
> 时间：2012-12-05T14:14:37.587
> 
> 标签：java, string, multithreading

该代码与Learning Java (Oracle Press Books) 一书中的代码完全相同，但它不起作用。我不明白为什么它不起作用，它应该起作用。我用 OpenJDK 和 Sun JDK 7 都试过了，错误是一样的。

```
ThreadCom.java:56: error: unexpected type
    if (thrd.getName().compareTo("Tick") = 0) {
                                ^
  required: variable
  found:    value
1 error 
```

有问题的代码...

```
class MyThread implements Runnable {
    Thread thrd;
    TickTock ttOb;

    MyThread(String name, TickTock tt) {
            thrd = new Thread(this, name);
            ttOb = tt;
            thrd.start();
    }

    public void run() {
            if (thrd.getName().compareTo("Tick") = 0) { // <- that line
                    for (int i=0; i<5; i++) ttOb.tick(true);
                    ttOb.tick(false);
            } else {
                    for (int i=0; i<5; i++) ttOb.tock(true);
                    ttOb.tock(false);
            }
    }
} 
```

代码与书中的完全一样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:15:55.910

这个

```
thrd.getName().compareTo("Tick") = 0 
```

应该

```
thrd.getName().compareTo("Tick") == 0 
```

第一个是任务。第二个是比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:16:02.563

我忘记了双等号，只是注意到了。

```
if (thrd.getName().compareTo("Tick") = 0) 
```

应该

```
if (thrd.getName().compareTo("Tick") == 0) 
```

# c# - 可以将双工服务的代理实例化为单向吗？

> ID：13725183
> 
> 赞同：0
> 
> 时间：2012-12-05T14:15:02.077
> 
> 标签：c#, wcf, constructor, duplex, wcf-callbacks

我已将以前的 WCF 单向服务更改为双工服务，因此我可以实现回调。

我的实际问题是，自从该更改以来，需要修改实例化服务代理的每一段代码，以将实例上下文作为参数传递给构造函数。

在几个不同的项目中有很多很多地方都在使用该服务。他们每个人现在都坏了。

我会被迫返回每个代理实例并将实例上下文传递给构造函数吗？我可以避免这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:41:06.493

简单地说 - 不，你不能避免这种情况。大概你需要一个 WCF 调用的双工服务才能回调......我可能只是在接口上创建一个单独的方法，而不是更改现有的方法，这样你就不会' t 破坏服务和客户之间的合同。

# playframework - log4j rollingfile appender 不备份每日文件

> ID：13725191
> 
> 赞同：0
> 
> 时间：2012-12-05T14:15:32.920
> 
> 标签：playframework, log4j

这是我对 log4j.properties 的配置

```
log4j.rootLogger=ERROR, Rolling

log4j.logger.play=INFO

# Rolling files
log4j.appender.Rolling=org.apache.log4j.RollingFileAppender
log4j.appender.Rolling.File=${application.path}/Temp/logs/application.log
log4j.appender.Rolling.MaxFileSize=1MB
log4j.appender.Rolling.MaxBackupIndex=100
log4j.appender.Rolling.layout=org.apache.log4j.PatternLayout
log4j.appender.Rolling.layout.ConversionPattern=%d{ABSOLUTE} %-5p ~ %m%n 
```

我的日志不会增长超过 1mb，但是即使我已经设置了，我也没有找到 dailylogs`MaxBackupIndex=100`

我搜索了整台机器，`App*.log`但只找到了当前日期的 1 个。

有没有我缺少的设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:43:44.983

我认为你必须在`DailyRollingFileAppender`这里使用（http://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/DailyRollingFileAppender.html）：

```
log4j.appender.Rolling=org.apache.log4j.DailyRollingFileAppender 
```

或者，如 Javadoc 中所述，附加内容：http: [//logging.apache.org/log4j/companions/extras/](http://logging.apache.org/log4j/companions/extras/)

# android - 如何在 Android 上获取/设置每个帐户的书签

> ID：13725192
> 
> 赞同：2
> 
> 时间：2012-12-05T14:15:31.617
> 
> 标签：android, android-contentprovider, bookmarks

使用 Android 的默认浏览器管理书签，可以看出它们是不同类型的书签。

*   本地书签，
*   每个 (Google) 帐户书签。

![列出书签](../Images/24cadecadecbcb46bb9c67b3eb2d7083.png)

获取所有书签（本地和每个帐户）非常简单。这是我如何进行的：

```
public static List<Bookmark> getBookmarks(ContentResolver contentResolver)
{
    String[] projection = new String[]
    { BookmarkColumns._ID, BookmarkColumns.TITLE, BookmarkColumns.URL, BookmarkColumns.VISITS, BookmarkColumns.DATE, BookmarkColumns.FAVICON};

    ArrayList<Bookmark> bookmarks = new ArrayList<Bookmark>();

    Cursor cursor = contentResolver.query(Browser.BOOKMARKS_URI, projection, BookmarkColumns.BOOKMARK, null, null);

    if (cursor.moveToFirst())
    {
        do
        {
            Bookmark bookmark = new Bookmark();

            bookmark.setId(cursor.getLong(cursor.getColumnIndex(Browser.BookmarkColumns._ID)));
            bookmark.setTitle(cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)));
            bookmark.setUrl(cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL)));
            bookmark.setNumberOfVisit(cursor.getInt(cursor.getColumnIndex(Browser.BookmarkColumns.VISITS)));

            byte[] data = cursor.getBlob(cursor.getColumnIndex(Browser.BookmarkColumns.FAVICON));
            if (data != null) {
                Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);
                if(bitmap!=null)
                    bookmark.setFavicon(bitmap);
            }

            bookmarks.add(bookmark);
        } while (cursor.moveToNext());
    }

    return bookmarks;
} 
```

但是我怎么知道哪些书签是本地的，哪些是“**每个帐户**”。最终，我希望能够为给定帐户创建书签。

我怎么能做到这一点？

默认的 Android 浏览器允许这样做，所以这应该是可行的。

为了说明这一点，这是 Android 的默认浏览器“添加书签”UI：

它允许添加书签并选择要添加的“位置”（“Ajouter à”）。在本地书签中 (favoris locaux) 或将其与设备上定义/已知的现有 google 帐户之一相关联

![添加书签](../Images/b04061569b7b7a4b38a15434daec9983.png)

# gwt - 用户如何在客户端下载文件（Google Web Toolkit）

> ID：13725198
> 
> 赞同：8
> 
> 时间：2012-12-05T14:15:44.167
> 
> 标签：gwt, download

我正在使用 GWT（Google Web Toolkit）制作网站。我需要向用户显示一个表格，并让用户下载表格的内容。

在客户端，用户按下“下载”按钮时如何下载文件？

“下载”按钮有一个`onClick()`监听器。客户端类扩展`Composite`。

我试图让类 extend `HttpServlet`，但它变得太复杂了。

我已经在这里阅读了帖子：

1.  [http://www.mkyong.com/java/how-to-download-file-from-website-java-jsp/](http://www.mkyong.com/java/how-to-download-file-from-website-java-jsp/)
2.  [使用 Servlet 下载文件时如何使用 GWT？](https://stackoverflow.com/questions/2937126/how-to-use-gwt-when-downloading-files-with-a-servlet)

但我仍然不知道如何在客户端向用户提供可下载的文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-06T08:52:31.163

**您真的需要区分 GWT 客户端 java 代码和服务器端 java 代码。**

**在您的 GWT Java 代码中的客户端**

```
String url = GWT.getModuleBaseURL() + "downloadService?fileInfo1=" + fileInfo1;
Window.open( url, "_blank", "status=0,toolbar=0,menubar=0,location=0"); 
```

**在您的非 gwt Java 代码中的服务器端 -**

在 web.xml 中

```
<servlet>
    <servlet-name>downloadService</servlet-name>
    <servlet-class>AAA.BBB.CCC.DownloadServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>downloadService</servlet-name>
    <url-pattern>/<gwtmodulename>/downloadService</url-pattern>
</servlet-mapping> 
```

在服务器包代码中，一个 servlet

```
 public class DownloadServlet extends HttpServlet{
    protected void doGet( HttpServletRequest req, HttpServletResponse resp ) throws ServletException, IOException
        {
            String fileName = req.getParameter( "fileInfo1" );

            int BUFFER = 1024 * 100;
            resp.setContentType( "application/octet-stream" );
            resp.setHeader( "Content-Disposition:", "attachment;filename=" + "\"" + fileName + "\"" );
            ServletOutputStream outputStream = resp.getOutputStream();
            resp.setContentLength( Long.valueOf( getfile(fileName).length() ).intValue() );
            resp.setBufferSize( BUFFER );
            //Your IO code goes here to create a file and set to outputStream//

        }
    } 
```

确保将文件内容推送到`**outputStream**`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:41:35.283

如果您知道文件的路径，代码片段如下所示。

```
button.addClickHandler(new ClickHandler()  
{ 

    @Overrid
    public void onClick(ClickEvent event) 
    {
        Window.open(GWT.getHostPageBaseURL() + "/file.rar", "name", "enabled");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T08:24:51.967

可以试试ClientIO用GWT在客户端读写文件

[http://www.emitrom.com/blog/client-io](http://www.emitrom.com/blog/client-io)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-28T03:26:45.350

完成io部分第一题的答案...

你可以参考这个链接

[http://www.programcreek.com/2009/02/java-convert-a-file-to-byte-array-then-convert-byte-array-to-a-file/](http://www.programcreek.com/2009/02/java-convert-a-file-to-byte-array-then-convert-byte-array-to-a-file/)

或参考此代码

```
File file = new File(enter the filepath here)
FileInputStream fis = new FileInputStream(file);
                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                byte[] buf = new byte[1024];
                try {
                    for (int readNum; (readNum = fis.read(buf)) != -1;) {
                        bos.write(buf, 0, readNum); //no doubt here is 0
                        //Writes len bytes from the specified byte array starting at offset off to this byte array output stream.
                        System.out.println("read " + readNum + " bytes,");
                    }
                } catch (IOException ex) {
                    System.err.println("unable to convert to bytes");
                }
                byte[] bytes = bos.toByteArray();
                outputStream.write(bytes);
                outputStream.flush();
                outputStream.close(); 
```

希望能帮助到你！

# c# - 静态字典没有被填满

> ID：13725201
> 
> 赞同：0
> 
> 时间：2012-12-05T14:15:54.120
> 
> 标签：c#

这是工作代码：

```
 static class Global
    {
        private static Dictionary<string, int> emails_compsIDs;
        private static Dictionary<string, int> set_emails_compsIDs { set { emails_compsIDs = value; } }
        private static DataTable MultiCompReport;

    static Global()
    {
        string e = string.Empty;
        Dictionary<string, int> emails_compsIDs = new Dictionary<string, int>();
        DataTable t = MySql.ExecuteSelect("SELECT Email, Company_ID FROM potencial_contact WHERE Email != '' AND Email IS NOT NULL");

        foreach (DataRow r in t.Rows)
        {
            int comp_id = Convert.ToInt32(r["Company_ID"]);
            e = r["Email"].ToString().Replace("\r", "").Replace("\t", "").Replace("\n", "").Trim().ToLower().Trim();
            if (!string.IsNullOrWhiteSpace(e) && !emails_compsIDs.ContainsKey(e))
            {
                try
                {
                    emails_compsIDs.Add(e, comp_id);
                }
                catch (Exception ex)
                {
                    throw ex;
                }
            }
        }
        if (emails_compsIDs.ContainsKey("linda@andatrade.com"))
            Console.WriteLine("Eureka");
        set_emails_compsIDs = emails_compsIDs;
    }
} 
```

但是，当我只是`emails_compsIDs = new Dictionary<string, int>();` 为了在构造函数中初始化字典时，代码只填充了第一行。通过在 ctor 中创建一个实例，然后将结果放入我的静态字典中，它填充了所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:20:16.110

错误是：

```
Dictionary<string, int> emails_compsIDs = ... 
```

它声明了一个局部变量而不是分配一个静态字段。它应该只是：

```
emails_compsIDs = new ... 
```

如果这只占一行，您应该逐步找出原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-01T14:21:17.443

我遇到了一个类似的问题，我在非静态类中声明了一个静态字典，但在类构造函数中初始化了字典。这导致每次都创建一个新字典。

```
private static Dictionary<string, Icon> IconDict;

public FileOps()
        {
            IconDict = new Dictionary<string, Icon>();
        } 
```

您需要在声明本身中初始化字典。

```
private static Dictionary<string, Icon> IconDict = new Dictionary<string, Icon>(); 
```

# javascript - 如何使用javascript在一系列日期之间递增

> ID：13725208
> 
> 赞同：0
> 
> 时间：2012-12-05T14:16:09.083
> 
> 标签：javascript, jquery

我需要使用 javascript 在一系列日期之间递增。我有以下格式的 start_date 和 end_date 。

```
var start_date = Fri Nov 09 2012
var end_date = Thu Nov 15 2012 
```

我需要调用一个函数，该函数通过在开始日期和结束日期之间循环作为参数来接受所有日期。像这样的东西

```
for (date = start_date; date < end_date; date++) {
    getCellFromDate(date, calInstance);
} 
```

我需要以相同的日期格式（Fri Nov 09 2012）向 getCellFromDate 提供参数。我如何实现这一点..我是javascript新手..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:21:08.463

要在纯 JavaScript 中进行迭代，无需任何其他日期库的帮助，您可以更改

```
date++ 
```

到

```
date = new Date(date.getTime() + 86400000) 
```

这将在同一时间进行到第二天。一天有 86400000 毫秒。

这将遍历日期对象。您将需要使用日期格式化程序和解析器在日期对象和字符串之间来回切换。有很多方法可以做到这一点。请参阅[此 SO 问题](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:24:37.440

```
date.setDate(date.getDate() + 1); 
```

适用于任意天数，负数和正数：

```
function addDays(date, count) {
    date.setDate(date.getDate() + count);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:15:15.087

最好使用一些日期库。它可以帮助您获得更多功能，一些高级和常用的日期库是

*   [http://code.google.com/p/datejs/](http://code.google.com/p/datejs/)
*   [http://momentjs.com/](http://momentjs.com/)

# algorithm - 从矩阵中消除舍入误差

> ID：13725210
> 
> 赞同：6
> 
> 时间：2012-12-05T14:16:14.210
> 
> 标签：algorithm, rounding, linear-equation

我的问题是我有一个矩阵，其中所有行的总和以及所有列的总和为零。所有数字都四舍五入到 x 位小数。

然后我将整个矩阵乘以 0 到 1 之间的数字（例如 1/6），并将所有数字四舍五入到小数点后 x。现在我不能确定行和列的总和是否为零。我希望通过尽可能小的调整（或至少非常小的调整）总和再次为零

是否存在可以解决此类问题的算法？

示例（非常简单）：矩阵：

```
 200  -200  0

    400  400  -800

   -600 -200  800 
```

圆2（（1/6）*矩阵）

```
33.33  -33.33  0   

66.67  66.67   -133.33

-100   -33.33  133.33 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:08:53.850

您在这里遇到的本质上是一个精度错误。除非你根本不圆，否则你无能为力。这类似于将照片保存为 256 色图像。您正在丢失信息（本质上是精度；由于离散化），您无能为力。对于图片，有一些算法可以使图像看起来更平滑/更接近原始图像（例如抖动），但是对于单值数字，您没有这样的东西。

可能的解决方案（实际上只有一种具有两种不同的可视化方式）：

*   仅圆形显示。用户应该可以解释数字被截断/四舍五入。在您的示例中，应该很明显`6.67`实际上是`6.66666...`.

*   根本不要四舍五入，只需截断固定小数位数后的数字（`...`如果需要，添加；这实际上类似于其他解决方案）。

通常，如果您想求解线性方程（或一般数学），请始终使用可用的（并且合理的；性能方面的）数据类型，其具有最大可用精度，通常是单精度或双精度值。否则，你引入的误差幅度会变得越来越差，你计算的越多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:41:05.797

这不是解决方案；只是对您要实现的目标进行更数学的描述（不判断这是否是正确的做法）：

由于您将所有数字四舍五入为 x 小数，我们可以将这些数字视为整数（只需将它们乘以 10^x）。

现在，您正在尝试解决以下问题：

给定矩阵

```
A11+Adj11   A12+Adj12   ...   A1n+Adj1n
A21+Adj21   A22+Adj22   ...   A2n+Adj2n
A31+Adj31   A32+Adj32   ...   A3n+Adj3n
...         ...         ...   ...
Am1+Adjm1   Am2+Adjm2   ...   Amn+Adjmn 
```

其中 A11..Amn 是常量整数，

查找整数 Adj11...Adjmn

最小化总和（abs（Adjxy））

（或者您可能更喜欢：最小化总和（（Adjxy）^2）

受制于：

```
- for each row m: Adjm1+Adjm2+...+Adjmn = - (Am1+Am2+...+Amn)
- for each col n: Adj1n+Adj2n+...+Adjmn = - (A1n+A2n+...+Amn) 
```

这是一个[整数规划](http://en.wikipedia.org/wiki/Integer_programming)问题，具有 m*n 个变量和 m+n 个约束。您试图最小化的函数不是线性的。

恐怕这个问题远非小事。我相信你最好把它贴在[https://math.stackexchange.com/](https://math.stackexchange.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T17:24:46.027

处理浮点数时无法消除舍入。您最好的解决方案可能是坚持矩阵中的整数，然后将最终结果应用于`1/6`结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T20:26:38.757

确保小的舍入误差不会导致总和出现大误差的常用方法是检查每个部分总和的误差不会变得太大。

使用一维向量`[a[1], a[2], ..., a[n]]`，您可以计算部分和`[a[1], a[1]+a[2], ..., a[1]+a[2]+...+a[n]]`，将其相乘，然后通过将前一个单元格减去当前单元格来恢复良好的向量`[a[1]*b, (a[1]+a[2])*b-a[1]*b, ..., (a[1]+a[2]+...+a[n])*b-(a[1]+a[2]+...+a[n-1])*b]`：通过使用这个技巧，任何部分和的误差都不会超过 10^(-x)。

您可以通过以下 3 个过程将此方法用于二维矩阵：

```
partial_sum(M) =
  for i = 0 to n-1 do
    for j = 1 to m-1 do
      M[i][j] += M[i][j-1]
    done
  done
  for i = 0 to n-1 do
    for j = 1 to m-1 do
      M[j][i] += M[j-1][i]
    done
  done

multiply(M, a) =
  for i = 0 to n-1 do
    for j = 0 to m-1 do
      M[i][j] *= a
    done
  done

restore(M) =
  for i = 0 to n-1 do
    for j = 1 to m-1 do
      M[i][j] -= M[i][j-1]
    done
  done
  for i = 0 to n-1 do
    for j = 1 to m-1 do
      M[j][i] -= M[j-1][i]
    done
  done 
```

# scala - 向量化具有多个返回值的 Scala 函数

> ID：13725211
> 
> 赞同：3
> 
> 时间：2012-12-05T14:16:15.347
> 
> 标签：scala

对返回多个值的 scala 函数进行矢量化的最优雅方法是什么？

例如，假设我有以下功能：

```
def Foobar(foo: Int, bar: Int): (Int, Int) = (foo, bar) 
```

如果它返回一个值，我会做这样的事情：

```
val a = Array(1, 2, 3)
val b = Array(4, 5, 6)
val c = (a,b).zipped.map(foobar) 
```

但由于它返回一个元组，我最终得到一个`Array[(Int,Int)]`，而我更喜欢一个`(Array[Int], Array[Int])`. 做这样的事情的正确方法是什么？是否有任何巧妙的模式可以将其概括为以下内容：

```
val c = vectorized(foobar,a,b) 
```

任何想法将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:28:46.400

您可以解压缩它（显然，它是与 zip 相对的操作）：

```
val c = foobar(a,b).unzip
//res2: (s.c.m.IndexedSeq[Int], s.c.m.IndexedSeq[Int]) = (ArrayBuffer(1, 2, 3),ArrayBuffer(4, 5, 6)) 
```

但是你最终会得到 IndexedSeqs，而不是 Arrays。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:29:58.670

好吧，如果您愿意，您当然可以编写一个`vectorized`函数，尽管您需要为每个输入和输出参数设置一个不同的函数。这是用于两进两出的 2.10 版本（2.9 将使用`Manifest`代替）：`ClassTag`

```
import reflect.ClassTag
def vectorized[A, B, C: ClassTag, D: ClassTag](
  f: (A,B) => (C,D), a: Array[A], b: Array[B]
): (Array[C], Array[D]) = {
  val c = Array.newBuilder[C]
  val d = Array.newBuilder[D]
  for (i <- 0 until math.min(a.length, b.length)) {
    val x = f(a(i), b(i))
    c += x._1
    d += x._2
  }
  (c.result, d.result)
} 
```

# python - python / scipy中3D方向的直方图

> ID：13725218
> 
> 赞同：2
> 
> 时间：2012-12-05T14:16:39.453
> 
> 标签：python, numpy, 3d, scipy, histogram

我有一个包含大量（加权）方向的数据集。我想做出一个很好的表示来测试/可视化在某些方向上是否存在方向簇。

首先，我制作了三个 2D 极坐标图：我扔掉了一个维度并绘制了一个“风玫瑰图”，显示了在其余两个维度中方向指向的方向。这似乎工作得很好：在其中两个表面中有一个或两个方向簇。然而，数据是 3D 的，我想看看方向集群在所有这三个维度中指向的位置。

然而，在 3D 中，问题变得更加困难。我的第一个猜测是制作一个“二维”极坐标图，将两个表面中的两个角度（倾角和方位角）结合起来，并将其显示为图像。然而，现在，一些 bin 在方向球上代表了比其他 bin 更大的表面区域（我认为这被称为极点奇点）。

我在 Matlab 中找到了这个关于这个问题的旧线程：http: [//www.mathworks.nl/matlabcentral/newsreader/view_thread/236925](http://www.mathworks.nl/matlabcentral/newsreader/view_thread/236925)，但那里并没​​有真正简单的解决方案：首先我宁愿不工作使用 matlab，但使用 Python/Scipy，其次，我没有此工具箱的许可证，第三，我宁愿拥有我知道的代码。

任何人对替代解决方案和/或在 Python/Num-/Scipy 中执行此操作的方法有任何想法吗？有没有一种很好的方法可以在类似大小的容器球体上放置 2D 网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:17:10.013

这不是“将 2Dgrid 放置在类似大小的容器的球体上”的解决方案，因为我不太确定您的意思是什么，但我认为可视化您的数据可能会很好。

如果您可以获取方向数据（3D 向量列表）并将其标准化，那么这可能会起作用：

```
import numpy as np
import matplotlib.pyplot as plt
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

orientation = np.random.random((3,50))
weight = np.random.randint(100, size=50)

ax.scatter(orientation[0], orientation[1], zs= orientation[2], s=weight)
plt.show() 
```

它将绘制表示归一化方向向量和与每个方向相关的权重大小的点。

或者更复杂但更符合您最初的想法，matplotlib 3D 绘图教程中的这个片段：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

u = np.linspace(0, 2 * np.pi, 100)
v = np.linspace(0, np.pi, 100)

x = 10 * np.outer(np.cos(u), np.sin(v))
y = 10 * np.outer(np.sin(u), np.sin(v))
z = 10 * np.outer(np.ones(np.size(u)), np.cos(v))
ax.plot_surface(x, y, z,  rstride=4, cstride=4, color='b')

plt.show() 
```

您只需要计算一个颜色图，它是一个数组，表示图的每个细分中存在的方向的加权密度，并将其作为颜色 kwarg 传递。（我明天会调查，但这应该让你开始）

# ssas - SSAS 浏览器中的错误（层次结构、维度）

> ID：13725219
> 
> 赞同：0
> 
> 时间：2012-12-05T14:16:45.723
> 
> 标签：ssas, hierarchy, dimension

我有一个用户定义的层次结构：

A > B

维度键是A和B的组合键。

现在，如果我浏览多维数据集并使用层次结构*作为过滤器*，它将不起作用（在度量中不显示任何内容）。

但是如果我使用层次结构*作为行字段*，它会起作用，很好地显示层次结构成员。

有任何想法吗？

.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:18:00.490

发现它是什么。

维度由另一个表构成，该表的成员比进行度量的表多。（维度成员比度量成员多 50%）

因此，在使用维度作为过滤器时，它显示了许多空行，按设计工作，并且在处理多维数据集时不会失败，因为在维度中找到了所有度量键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:16:38.680

SSMS 和 SSRS 查询编辑器中的 GUI 多维数据集浏览器为您编写 MDX 查询。要走得更远，您应该开始学习 MDX 的基础知识。

如果您在 X 轴上放置一个维度，然后可能取消选中一些项目，则生成的 MDX 将仅在 Select 子句中列出这些项目。

```
select 
{[Measures].[Measure1]} on 0,
{[A].&[ID1], [A].&[ID2], [A].&[ID3]} on 1
From mycube 
```

如果您将维度放在网格正上方的过滤器区域中，它会将过滤器添加到 WHERE 子句中 - 因此您不会看到维度成员，但会看到度量。您仍然需要在 X 或 Y 轴上添加一些东西以获得任何结果

```
select 
From mycube
Where {[A].&[ID1], [A].&[ID2], [A].&[ID3]} 
```

最后。如果您使用窗口顶部的过滤器字段，自动生成的 MDX 将创建一个子立方体。同样，您仍然必须指定要在至少一个轴上显示的内容才能进行测量。

```
Select 
From 
( Select {[A].&[ID1], [A].&[ID2], [A].&[ID3]} on 0 From mycube) 
```

# javascript - 将带有数据的 jquery 对象传递给函数

> ID：13725222
> 
> 赞同：0
> 
> 时间：2012-12-05T14:16:49.590
> 
> 标签：javascript, jquery

你如何将带有数据的 jQuery 对象传递给函数？

例如我有以下对象：

```
var el = $('#myelement').data('test1','yay1')
                    .data('test2','yay2')
                    .data('test3','yay3'); 
```

以及处理对象数据的附加功能：

```
jQuery.fn.allData = function() {
    var intID = jQuery.data(this.get(0));
    return(jQuery.cache[intID]);
};

function checkIt (myobj){
  $.each($(myobj).allData(), function(key, value) {
    alert(key + "=" + value);
  });
} 
```

然后我调用`checkIt`函数并传递`myelement`：

```
checkIt(el); 
```

但是出了点问题： **TypeError: obj is undefined**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:27:14.603

当您调用`jQuery.data()`一个元素时，它会返回附加到该元素的所有数据，因此`jQuery.fn.allData`是多余的。重写你的`checkIt`函数，让它看起来像这样：

```
function checkIt(myObj) {
  $.each($.data($(myObj)), function(key, value) {
    alert(key + "=" + value);
  })
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:27:31.437

实际上，该`allData`功能不是做你想做的事所必需的。你可以这样做：

```
function checkIt (myobj){
    $.each(myobj.data(), function(key, value) {
        alert(key + "=" + value);
    });
} 
```

`myobj.data()`将返回一个对象，其中包含分配给元素的所有数据。

# wpf - WPF DependencyProperty Validation 绑定到对象属性

> ID：13725223
> 
> 赞同：1
> 
> 时间：2012-12-05T14:16:53.603
> 
> 标签：wpf, validation, binding, validationrules, dependencyobject

我正在尝试为给定控件创建验证规则（在这种情况下，它是 TextBox）。

尽管采取了适当的步骤，但我无法成功绑定到对象的属性：利用了 ValidationRule 和 DepedencyProperty。

请在下面找到代码。附带说明的是，自定义验证类中的“必需”始终为 False，除非我在 XAML 中明确设置值（没有绑定，根据“Is Ranged”参数）。

任何提示和建议表示赞赏。

先感谢您 ：）

XAML 代码：

```
<TextBox Style="{StaticResource ValidationError}" LostFocus="ForceValidationCheck"
         Visibility="{Binding Type, Converter={StaticResource Visibility}, ConverterParameter='Number'}"
         IsEnabled="{Binding RelativeSource={x:Static RelativeSource.Self}, Converter={StaticResource IsEnabled}}">
    <TextBox.Text>
        <Binding Path="Value">
            <Binding.ValidationRules>
                <validation:NumericValidation>
                    <validation:NumericValidation.Dependency>
                        <validation:NumericDependency IsRequired="{Binding Path=IsRequired}" IsRanged="True" Min="5"/>
                    </validation:NumericValidation.Dependency>
                </validation:NumericValidation>
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

验证类：

```
public NumericDependency Dependency { get; set; }

public override ValidationResult Validate(object value, CultureInfo cultureInfo)
{
    isRequired = Dependency.IsRequired;
} 
```

验证依赖类：

```
public static readonly DependencyProperty IsRequiredProperty =
        DependencyProperty.Register("IsRequired", typeof(bool), typeof(NumericDependency), new UIPropertyMetadata(default(bool)));

public bool IsRequired
{
    get
    {
        return (bool) GetValue(IsRequiredProperty);
    }
    set
    {
        SetValue(IsRequiredProperty, value);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T12:34:19.487

您可以使用代理。它将允许您将属性绑定到您的 ValidationRule。

[代理示例](http://www.11011.net/wpf-binding-properties)

这是一个可以帮助您的代码示例：

```
<Utils:Proxy In="{Binding IsRequired, Mode=OneWay,UpdateSourceTrigger=PropertyChanged}" Out="{Binding ElementName=numericValidationRule, Path=IsRequired}" />
<TextBox>
    <TextBox.Text>
        <Binding Path="Value">
            <Binding.ValidationRules>
                <NumericValidation x:Name="numericValidationRule" />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T19:34:07.310

IsRequired 始终为 false，因为“依赖”对象不是逻辑树的一部分，因此您不能使用 ElementName 或 DataContext 作为内部数据绑定的源。

此问题的解决方案基于以下 Thomas Levesque 的文章：[http ://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-未继承/](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)

您必须创建一个继承“Freezable”并声明数据依赖属性的类。Freezable 类的有趣特性是 Freezable 对象可以继承 DataContext，即使它们不在可视树或逻辑树中：

```
public class BindingProxy : Freezable
{
   #region Overrides of Freezable
   protected override Freezable CreateInstanceCore()
   {
      return new BindingProxy();
   }
   #endregion

   public object Data
   {
      get { return (object)GetValue(DataProperty); }
      set { SetValue(DataProperty, value); }
   }

   // Using a DependencyProperty as the backing store for Data.  This enables animation, styling, binding, etc...
   public static readonly DependencyProperty DataProperty =
      DependencyProperty.Register("Data", typeof(object), typeof(BindingProxy), new UIPropertyMetadata(null));
} 
```

然后，您可以在文本框的资源中声明此类的实例，并将 Data 属性绑定到当前 DataContext：

```
<TextBox.Resources>
   <local:BindingProxy x:Key="proxy" Data="{Binding}"/>
<TextBox.Resources/> 
```

最后，将此 BindingProxy 对象指定为绑定的 Source：

```
<validation:NumericDependency IsRequired="{Binding Source={StaticResource proxy} Path=Data.IsRequired}" IsRanged="True" Min="5"/> 
```

请注意，绑定路径必须以“Data”为前缀，因为该路径现在是相对于 BindingProxy 对象的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T09:35:16.200

还有另一种实现控件验证的方法。但是，我仍然想知道如何解决我最初的问题，因此感谢您提供任何帮助。

另一种方法是实现模型的 IDataErrorInfo 接口。

例子：

```
public string this[string columnName]
{
    get
    {
        if (string.Equals(columnName, "Value", StringComparison.CurrentCultureIgnoreCase))
        {
            string value = Convert.ToString(Value);

            if (string.IsNullOrEmpty(value) && IsRequired)
            {
                return ValidationMessage.RequiredValue;
            }
        }

        return string.Empty;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-18T10:29:02.370

自定义验证类中的“是必需的”始终为 False，因为它没有设置。false 是 bool 的默认值。

来自[http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)

ValidationRule 甚至没有 DataContext 属性，因为它不是从 FrameworkElement 派生的！

请注意，IntegerContainer 是一个 FrameworkElement，而不是一个依赖对象。

# jenkins - 如何配置 jenkins 来处理 cmake 标志矩阵

> ID：13725224
> 
> 赞同：0
> 
> 时间：2012-12-05T14:16:55.357
> 
> 标签：jenkins, cmake

我有一个带有一些编译标志（-Denable_optims、-Denable_coverage）的 cmake 项目，我想用 jenkins 编译所有可能的标志组合。我得到的问题是詹金斯标签似乎不适用于 cmake 插件。cmake 或 jenkins 配置是否有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T12:06:19.910

一种解决方案是停止使用 cmake 插件。只需从 shell 构建步骤中调用 cmake。然后，您可以在 shell 构建步骤中使用矩阵配置项目中的所有变量，例如通过设置一些 CMake 变量。

# python - wxPython 应用程序从 Google 电子表格和用户输入获取数据的速度太慢了，需要加快解决方案

> ID：13725230
> 
> 赞同：0
> 
> 时间：2012-12-05T14:17:16.363
> 
> 标签：python, wxpython, user-input, google-sheets

我想制作一个应用程序，它可以从带有多个工作表的 Google 电子表格中读出城市名称、道路名称以及它们之间的距离。

到目前为止，我的代码正常工作。它从电子表格中读出，还从想要找出两个城市之间的道路名称（如 Rode 60）以及它们之间的距离的用户那里接收输入。但是，当我运行该应用程序时，它非常慢。

我想我有一个服务器端用户端的问题，但是在阅读了大量的文档之后我很困惑。也许我应该考虑一种完全不同的方法。也许我需要用 gspread 读出所有电子表格并只在用户端工作。反正。现在它很慢，我希望稍后在我的电子表格中包含数千个城市，可能我会在那里放一些关于它们的更多数据，比如它是一条乡间小路还是一条高速公路、国道等。这需要很长时间才能它将使用我当前的代码返回结果。

如果您建议我应该用图表做这些事情，请帮助并请注意我是 python、wxPython、Google API 或 IGraph 的新手。今天我也为我的 Python 2.7 设置了 IGraph。也许这是我问题的关键？请至少给我正确的方法，正确的教程。我不指望任何人为我做肮脏的工作。先感谢您！！！

```
import gdata.spreadsheet.service
import gdata.service
import atom.service
import gdata.spreadsheet
import atom
import gspread
import wx
import gdata.docs
import gdata.docs.service
import re
import os
import csv
import math

class laci(wx.Frame):

    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'distance calculator',size=(500,500))
        panel=wx.Panel(self)

        test=wx.TextEntryDialog(None,"Beginning point: ",'Name of beginning point','...')
        if test.ShowModal()==wx.ID_OK:
            all1=test.GetValue()

        test2=wx.TextEntryDialog(None,"Finishing point: ",'Name of finish','...')
        if test2.ShowModal()==wx.ID_OK:
            all2=test2.GetValue()

        c = gspread.Client(auth=('......@gmail.com','.............'))
        c.login()
        # open spreadsheet
        sht=c.open_by_key('.................................')
        worksheet = sht.get_worksheet(0)

        print worksheet

        i = 1
        j = 1

        What = None

        first_col = worksheet.col_values(1)
        print first_col
        stopper = 0
        n = 3
        m = 3

        while worksheet.cell(i,1).value != None and stopper != 1:
            if worksheet.cell(i,1).value == all1:
                print all1
                stopper = 1
            else:
                i = i+1
                print i
            if worksheet.cell(i,1).value == None:
                boxy=wx.MessageDialog(None,'Wrong start point. You wanna see correct start points list?','Mistake?',wx.YES_NO)
                answer=boxy.ShowModal()
                boxy.Destroy
                if answer == 5103:
                    boxl=wx.SingleChoiceDialog(None,'Accepted Starting point names:','In case of mistake',
                                               ['City1','City2','City3','City4','City5','City6','City7','City8'])
                    if boxl.ShowModal()==wx.ID_OK:
                        all1=boxl.GetStringSelection()
                        stopper = 0 # figyelj
                        i = 1
                        print all1
                    boxl.Destroy
                else:
                    print 'how unfortunate'
            if stopper == 1:
                sline = []
                while worksheet.cell(i,n).value != None:
                    line = worksheet.cell(i,n).value
                    sline.append(line)

                    n = n + 1
                    print sline
                    slinestr = str(sline) 

        stopper2 = 0
        print sline
        while worksheet.cell(j,1).value != None and stopper2 != 1:
            if worksheet.cell(j,1).value == all2:
                print all2
                stopper2 = 1
            else:
                j = j+1
                print j
            if worksheet.cell(j,1).value == None:
                boxz=wx.MessageDialog(None,'Wrong Finish point? Wanna see correct choices?','Mistake?',wx.YES_NO)
                answer2=boxz.ShowModal()
                boxz.Destroy
                if answer2 == 5103:
                    boxl2=wx.SingleChoiceDialog(None,'Accepted Finishing point names:','In case of mistake',
                                                ['City1','City2','City3','City4','City5','City6','City7','City8'])
                    if boxl2.ShowModal()==wx.ID_OK:
                        all2=boxl2.GetStringSelection()
                        print all2
                    boxl2.Destroy
                else:
                    print 'how unfortunate'
            if stopper2 == 1:
                sline2 = []
                while worksheet.cell(j,m).value != None:
                    line2 = worksheet.cell(j,m).value
                    sline2.append(line2)
                    m = m + 1
                    print sline2
                    slinestr2 = str(sline2)

        print sline
        print sline2
        t = list(set(sline) & set(sline2))
        print t
        t = t[0]
        t = str(t)
        worksheet2 = sht.worksheet(t)
        print worksheet2
        print worksheet2.cell(2,2)
        i = 2
        j = 2
        iszam = 1
        iszam2 = 1
        stopi = 0
        stopi2 = 0
        km = 0
        while worksheet2.cell(i,2).value != None and stopi != 1:
            if worksheet2.cell(i,2).value == all1:
                iszam = i
                print iszam
                print worksheet2.cell(i,3)
                stopi = 1
            i = i + 1
            print i
        while worksheet2.cell(j,2).value != None and stopi2 != 1:
            if worksheet2.cell(j,2).value == all2:
                iszam2 = j
                print iszam2
                print worksheet2.cell(j,3)
                stopi2 = 1
            j = j + 1
            print j
        if iszam2 < iszam:
            while iszam2 != iszam:
                km = km + int(worksheet2.cell(iszam2+1,3).value)
                iszam2 = iszam2 + 1
            print km

        elif iszam2 > iszam:
            while iszam != iszam2:
                km = km + int(worksheet2.cell(iszam+1,3).value)
                iszam = iszam + 1
            print km
        else:
            km = 0
            print km

        km = str(km)            
        wx.StaticText(panel, -1, all1, (20,30))
        wx.StaticText(panel, -1, slinestr, (80,30))
        wx.StaticText(panel, -1, all2, (20,60))
        wx.StaticText(panel, -1, slinestr2, (80,60))
        wx.StaticText(panel, -1, 'Path =', (20,90))
        wx.StaticText(panel, -1, t, (80,90))
        wx.StaticText(panel, -1, 'Distance =', (20,120))
        wx.StaticText(panel, -1, km, (80,120))

if __name__=='__main__':
    app=wx.PySimpleApp()   #runs it
    frame=laci(parent=None,id=-1)   #face of programme
    frame.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:22:21.123

开始恕我直言的第一个地方是找到延迟**在哪里。**

我首先将代码移动到不同的函数/方法中——这样你就可以分析代码并查看慢在哪里。

例如。（可能希望比这更进一步）

*   在构造函数中只设置 wx 对象
*   然后有一个与谷歌通信的功能
*   另一个将数据写入 wx.

之后，您将能够自己或使用 python 分析器进行一些分析：( [http://docs.python.org/2/library/profile.html](http://docs.python.org/2/library/profile.html) )。最重要的是找到需要时间的地方，然后你就会知道需要改进的地方。

我的*猜测*是，您不想远程执行所有操作，但应该立即获取您认为需要的所有内容，然后在本地进行搜索 - 因为如果电子表格上的每个函数调用，我不会感到惊讶导致与服务器的通信。但我没有使用 Google 电子表格 API，所以这***只是一种预感***

# ruby-on-rails - Rails IPv6 服务器

> ID：13725236
> 
> 赞同：12
> 
> 时间：2012-12-05T14:17:37.207
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ipv6

我正在使用目前只有 IPv6 连接的开发服务器，并且我正在开发一个 Rails 应用程序。

我试图用来`bundle exec rails s -e development -p 3003 -d`启动服务器，但它似乎只绑定到 IPv4：

```
tcp        0      0 0.0.0.0:3003                0.0.0.0:*                   LISTEN      27165/ruby 
```

因此我无法连接到它。我最好的选择是什么？我对 Rails 并不是很熟悉，只是试图解决现有应用程序上的一些问题。

版本信息：

```
:; ruby --version
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-linux]
:; rails --version
Rails 3.2.8 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T14:43:20.490

自己想出来，`-b ::`让它同时监听 IPv6 和 IPv4（可能取决于 sysctl net.ipv6.bindv6only）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-23T20:33:58.933

在 puma 你应该这样做：

```
rails s -b [::] 
```

根据[RFC2732](http://www.ietf.org/rfc/rfc2732.txt)，文字 IPv6 地址应放在正方形内。如果没有，您将收到解析错误。

# javascript - 简单的 Google Map 和 Ruby on Rails 3 问题

> ID：13725239
> 
> 赞同：0
> 
> 时间：2012-12-05T14:17:43.200
> 
> 标签：javascript, ruby-on-rails, ruby, google-maps

我是 Ruby on Rails 的新手（大约 2 个月的时间）。我有一个项目要完成，我认为这应该相当简单，但事实证明这很令人沮丧。

我有一个联系页面，我想说“我们位于这里！”，并带有商家所在位置的 Google 地图。就这样。

在Javascript中，我会在我的html页面中放置一个地图div并链接到我的js文件等......有人可以告诉我在我的Rails 3项目中需要做什么吗？我查看了那里的一些东西，但它与 Rails 2 或 1.8 有关，我不想冒险把它放进去弄乱我的项目。

谢谢你的帮助，

克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:25:44.317

If you want to use an interactive map, it's all javascript code. When you have your lat & lng values of the office, you can do something like the following:

```
<div id="map"></div> 
```

In the html, and have in your javascript (jquery).

```
$.fn.ready(function() {
  var lat = 10.0000; // change to your value
  var lng = 10.0000; // change to your value
  var bounds = new google.maps.LatLngBounds();
  var map = new google.maps.Map(document.getElementById("map"), { zoom: 5, mapTypeId: google.maps.MapTypeId.ROADMAP, center: new google.maps.LatLng(parseFloat(lat), parseFloat(lng)) });

  var lat_lng = new google.maps.LatLng(parseFloat(point.lat), parseFloat(point.lng));
  var marker = new google.maps.Marker({
    position: lat_lng,
    title: "point"
  });
  marker.setMap(map);
  bounds.extend(lat_lng);
  map.fitBounds(bounds);
}); 
```

I haven't tested the code. I kind of grabbed some logic i had from a project where i rendered several points on the map, and it was also in coffeescript, so i'm not sure if i missed anything. In short though, it's all the googlemaps api.

# java - 为什么这个抽象方法会出错？

> ID：13725241
> 
> 赞同：0
> 
> 时间：2012-12-05T14:17:57.440
> 
> 标签：java

我收到以下代码错误：

```
BankingServant is not abstract and does not override abstract method
CheckBalance(String) in BankingOperations public class BankingServant
extends _BankingImplBase 
```

这是我的代码：

```
import BankingApp._BankingImplBase;
import BankingApp.*;
import java.util.ArrayList;
import java.util.Iterator;

public class BankingServant extends _BankingImplBase {
  private int AccountName;
  private int LodgementAmount ;
  private int TransferAmount ;
  private int WithdrawlAmount;
  private int TransferAmount;
  private int TransferAccWith;
  private int TransferAccDep;
  private int CheckBalance;

  private class Account {
    String accName;
  }

  private class Trans {
    String accName;
    double transferAmount;
    double transferAccWith;
    double transferAccDep;
    double withAmount;
    double lodgementAmount;
  }

  private class With {
    String accName;
    double withAmount;
  }

  public boolean Lodgement(String accName, double lodgementAmount) {
    System.out.println("Enter Lodgement.");
    Account acc = new Account();
    acc.accName = accName;
    acc.lodgementAmount = lodgementAmount;
    acc.add(acc);
    System.out.println("Money was lodged.");
  }

  public boolean Transfer(String accName, double transferAmount, double transferAccWith, double transferAccDep){
    System.out.println("Transfer Amount: ");
    Trans bankingTemp = new Trans();
    bankingTemp.accName = accName;
    bankingTemp.transferAmount = transferAmount;
    bankingTemp.transferAccWith = transferAccWith;
    bankingTemp.transferAccDep = transferAccDep;
    bankingTemp.parts = this.parts;
    bankingTemp.planeId = planeId;
    banking.add(bankingTemp);
    System.out.println("Transfered");
    planeId++;
    return true;
  }

  public void CheckBalance(String accName) {
    System.out.println("Balance is: ");
    Account accB = new Account();
    accB.accName = accName;
    accB.checkBalance = checkBalance;
    accB.add(accB);
    System.out.println("Balance is: ");
  }
} 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:20:58.163

您的`CheckBalance`方法很可能具有不同的签名。看起来它们具有相同的参数，因此它可能具有不同的返回类型。`BankingServant``_BankingImplBase`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:26:49.933

你有

```
private int CheckBalance; 
```

和

```
public void CheckBalance(String accName) { 
```

您可以遵循两个 Java 约定来防止发生这样的事情：

1.  始终以小写字母开头的方法和字段名称。
2.  **在这个例子中更重要的是**字段应该被赋予**名词**名称，方法应该被赋予**动词**名称，因此它们几乎不应该具有相同的名称。

您可以在此处找到有关命名约定的一些很好的参考：

*   [Java 代码命名约定](http://www.appperfect.com/support/java-coding-rules/namingconvention.html)
*   [Java 实践](http://www.javapractices.com/topic/TopicAction.do?Id=58)

# android - 让我的 html 网站发送通知

> ID：13725243
> 
> 赞同：0
> 
> 时间：2012-12-05T14:17:59.437
> 
> 标签：android, web-services, push-notification, google-cloud-messaging, android-notifications

我想在我的网站上编写一些代码，让我可以将消息发送到我的 android 应用程序。我知道 gcm，它告诉我该怎么做才能让我的应用程序方面准备好接收通知。但它并没有告诉我如何在我的网站中实现这一点。我希望能够将约会日期和时间发送到我的应用程序。所以我可以在我的网站中创建部分来设置约会的日期和时间，我可以创建一个发送按钮。但是当我按下发送按钮时，什么都不会发生。所以说如果我有 6 个 android 设备有这个接收通知的应用程序。我想用我的网站选择一台设备，然后用我的网站将其发送到该设备。

我是一个认真的新手和一些链接，我可以有一个详细的答案。ps 我知道gcm，但也许我不能正确理解它，因为我看不出它是否对我的网站方面有帮助，我只能看到它在应用方面的帮助。如果您认为不同，请告诉我，甚至请将代码粘贴到您的答案中。谢谢你

# javascript - Javascript - 将按钮 onclick 更改为现有功能

> ID：13725249
> 
> 赞同：1
> 
> 时间：2012-12-05T14:18:09.173
> 
> 标签：javascript, jquery

我有一个按钮：

```
<button onclick = "doDisactivate(5);" id = "status_button_5" value = "Disactivate" /> 
```

其中 5 是动态添加的 ID。我有两个 javascript 函数，doDisactivate(ID) 和 doActivate(5)。

```
function doDisactivate(serviceID) {
    // logic that changes the button onclick to doActivate(serviceID)
}

function doActivate(serviceID) {
    // logic that changes the button onclick to doActivate(serviceID)
} 
```

我猜我可以用 jquery 做以下事情：

```
${"#status_button_" + serviceID}.click(function() {
    doActivate(serviceID);
}); 
```

但是有没有办法在将 ID 作为参数传递时直接分配函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:21:39.130

由于您没有使用 jquery 事件绑定，您可以使用`$("#status_button_5").attr("onclick", "doActivate(5);")`直接更改`onclick`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:22:19.340

做这样的事情

```
${"#status_button_" + serviceID}.click(function(event) {
    doActivate(event.target.id);
}); 
```

或者

```
onClick="doDisactivate(this.id)" 
```

# sql - 交叉表 postgres - 行到列

> ID：13725253
> 
> 赞同：4
> 
> 时间：2012-12-05T14:18:17.160
> 
> 标签：sql, postgresql, crosstab, return-type

在我的项目中，数据模型发生了变化，我必须发出一个新请求来获取信息，但过去看起来所有数据都在同一行，但现在部分数据在另一个表中，它返回我的专栏。

所以我的请求返回：

![http://www.hostingpics.net/viewer.php?id=724031request.jpg](../Images/b11d5a415117f353fbeeeea917eb793d.png)

我认为这很容易，但我并不真正了解该功能是如何`crosstab`工作的。我试过这个：

```
 SELECT *
    FROM crosstab(
      'SELECT c.cd_type as typcou, c.dt_envoi as dtenvcou, c.commentaire as comment, c.signataire as signur
           FROM comm.courrier c
           WHERE c.id_formalite=1
     order by 1,2',
    'select lf.valeur as valeur from formalite.ligne_formalite lf, formalite.formalite f where lf.fk_formalite=f.id AND lf.fk_formalite=1'
     )

AS c(typcou text, dtenvcou text, comment text, signataire text, valeur1 text, valeur2 text, valeur3 text); 
```

然而，我得到了

> ERREUR：无效的返回类型 État SQL：42601 详细信息：查询指定的返回元组有 7 列，但交叉表返回 5。

有人可以帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:50:39.807

您没有在问题中提及该列`formalite.libelle`，这对于解决方案至关重要。

我建议`JOIN`对您的主要查询使用显式语法 - 通常更易于阅读和理解。

由于无论如何您都必须拼出列定义列表中的所有列，因此使用`VALUES`表达式比函数`SELECT DISTINCT ...`的第二个参数更有效`crosstab()`：

```
SELECT *
FROM crosstab(
  'SELECT c.cd_type, c.dt_envoi, c.commentaire, c.signataire
        , r.libelle, lf.valeur
   FROM   comm.courrier             c
   JOIN   formalite.formalite       f  ON f.id  = c.id_formalite
   JOIN   formalite.ligne_formalite lf ON lf.fk_formalite = f.id
   JOIN   norme.rubrique            r  ON r.id = lf.id_rubrique 
   WHERE  c.id_formalite = 1
   ORDER  BY 1'

   ,$$VALUES ('codepost'::text), ('bureau'), ('date')$$
   )
AS (typcou char, dtenvcou text, comment text, signur text
  , codepost text, bureau text, date text); 
```

[**这个密切相关的答案中有更多解释和链接。**](https://stackoverflow.com/a/11751905/939860)

另外：我不会`date`用作列名，它是 SQL 中的[保留字](https://stackoverflow.com/a/11751905/939860)和 PostgreSQL 中的类型名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:17:22.603

我知道了 ！：

```
SELECT *
FROM crosstab(
  'SELECT c.cd_type as typcou, c.dt_envoi as dtenvcou, c.commentaire as comment, c.signataire as signur, r.libelle, lf.valeur
       FROM comm.courrier c, formalite.ligne_formalite lf, formalite.formalite f, norme.rubrique r
       WHERE c.id_formalite=f.id AND lf.fk_formalite=f.id
       AND c.id_formalite=1 AND r.id = lf.id_rubrique ORDER BY 1',
       'SELECT DISTINCT libelle FROM norme.rubrique ORDER BY 1')
AS (typcou char, dtenvcou text, comment text, signur text, codepost text, bureau text, date text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:19:36.250

按优先顺序尝试一些开源 ETL 工作室：

1.  人才
2.  pentaho
3.  碧玉软件

特别是如果您必须经常为大量数据执行此操作，但我想知道，您真的应该使用 Postgresql 吗？如果您愿意，还可以使用这些工具从一台数据库服务器迁移到另一台服务器。

# block - Moodle - 为什么课程完成块在 user/view.php 上为用户显示不正确的信息

> ID：13725254
> 
> 赞同：2
> 
> 时间：2012-12-05T14:18:17.393
> 
> 标签：block, moodle

当我单击课程完成报告中的学生姓名以查看该个人用户时，我注意到课程完成块的奇怪行为 - 当整体课程完成报告显示用户已完成所有活动时，它显示未完成任何活动。

如果我为课程选择课程完成报告，我可以看到学生已完成该课程的所有活动。当我点击学生姓名时，我被重定向到 user/view.php?id=36&course=28 并且课程完成块现在显示课程“尚未开始”并且没有完成任何活动。

我知道需要运行 cron 以更新课程完成状态并手动运行 cron 几次，但该块没有更新。我知道这无论如何都不是问题，因为课程完成报告以及课程页面上显示的课程完成块上的活动完成是正确的。

为什么 user/view.php?id=##&course=## 上的课程完成块没有显示正确的详细信息？这个街区应该在那里吗？

有人能帮忙吗？我正在使用moodle 2.2.3

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-27T14:25:54.747

假设您指的是 block_completionstatus；它被编码为显示当前登录用户的课程完成情况：

```
 * Block for displayed logged in user's course completion status 
```

即使您将其放置在用户的个人资料页面或其他用户特定页面上，它也会在您登录时继续显示您自己的课程。

# windows - 如何在 Windows 上使用 clang 编译 boost？

> ID：13725259
> 
> 赞同：1
> 
> 时间：2012-12-05T14:18:24.273
> 
> 标签：windows, boost, mingw, clang

我正在尝试将 Sublime Text 2 配置为使用 clang（使用 SublimeClang 插件）。一切似乎都很好，除了 clang 在解析 boost 文件时遇到问题。

具体来说，我收到此错误：“错误 - 可变参数函数不能使用 fastcall 调用约定”。我已经找到了关于它的主题（http://llvm.org/bugs/show_bug.cgi?id=12535），它似乎是提升错误。无论如何，我很乐意以某种方式禁用此错误。我试图使用 ms 兼容模式（-fms-compatibility），但它似乎并没有改变任何东西。

有什么方法可以禁用此错误，或者目前无法在 Windows 上使用 clang 编译 boost？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T12:01:19.437

现在我通过编辑 is_member_function_pointer.hpp 文件和更改调用约定“解决”了这个问题 因为我只需要它用于我的 IDE，所以我并不关心它是否会链接或正常工作。但是看起来它是增强方面的错误，需要在那里修复。

# gcc - 链接/构建 portaudio 静态库

> ID：13725260
> 
> 赞同：1
> 
> 时间：2012-12-05T14:18:25.613
> 
> 标签：gcc, makefile, static-libraries, qmake, portaudio

我试图通过在编译portaudio后将**“libportaudio.a”**放入我的项目中来使用portaudio的静态库（通过执行“./configre && make”然后我将文件放入lib/.libs/）。

由于这是一个 qt 项目，我的 Makefile Lib 行如下所示：

```
LIBS          = $(SUBLIBS)  -L/usr/lib/x86_64-linux-gnu -L/home/larose/babel/BabelAudio/lib -Lportaudio -Llibspeex -Llibspeexdsp -lQtGui -lQtNetwork -lQtCore -lpthread 
```

在我的 .pro 中，我有：

```
LIBS += -L$$PWD/lib -Lportaudio -Llibspeex -Llibspeexdsp 
```

但是当我尝试做时，结果是：

```
SpeakThread.cpp:(.text+0x388): undefined reference to `Pa_OpenStream'
SpeakThread.cpp:(.text+0x3c7): undefined reference to `Pa_OpenStream'
SpeakThread.cpp:(.text+0x3d0): undefined reference to `Pa_StartStream'
SpeakThread.cpp:(.text+0x3da): undefined reference to `Pa_StartStream'
SpeakThread.cpp:(.text+0x3e4): undefined reference to `Pa_IsStreamActive' 
```

在执行 ./configure 以使库可移植或只是在 Makefile 中进行更改时，有什么特别的事情要做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:29:10.917

`-l`你不应该使用`-L`

```
-lportaudio 
```

# jquery - 使用 RGBa 更改 div 的背景不透明度

> ID：13725263
> 
> 赞同：16
> 
> 时间：2012-12-05T14:18:30.390
> 
> 标签：jquery, css

我正在尝试使用 jquery ui 滑块更改 div 的背景不透明度。

用户可以更改 div 的背景颜色，所以我需要知道如何只更改背景的 alpha 参数而不更改颜色。

到目前为止，这是我的代码：

```
$('#opacity-slider').slider({ min: 0, max: 1, step: 0.1, value: 1 })
                .bind("slidechange", function() {
                    //get the value of the slider with this call
                    var o = $(this).slider('value');

                    var e = $('.element-active');
            var currentColor = $('.element-active').css('background-color');        
                    $(e).css('background-color', 'rgba(255, 255, 255, '+o+')')
                }); 
```

我需要了解如何仅更改 currentColor 变量的 alpha 部分。我希望有一个人可以帮助我！TIA

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T14:25:53.323

试试这个：

```
var alpha = $(this).slider('value');
var e = $('.element-active');
$(e).css('background-color', 'rgba(255,255,255,' + alpha + ')');​ 
```

[此处更新示例](http://jsfiddle.net/HXXP4/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:40:00.837

字符串操作可能是最好的方法：

```
var e = $('.element-active');
var currentColor = $('.element-active').css('background-color');
var lastComma = currentColor.lastIndexOf(',');
var newColor = currentColor.slice(0, lastComma + 1) + o + ")";
$(e).css('background-color', newColor); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:33:49.420

我设法通过使用字符串操作来学习和调整@Tom Smilack 建议的答案来解决这个问题。

我做了一个小改动，以便他的答案也适用于最初没有设置 alpha 的 div，这是我正在使用的最终代码：

```
$('#opacity-slider').slider({ min: 0, max: 1, step: 0.1, value: 1 })
            .bind("slidechange", function() {
                //get the value of the slider with this call
                var o = $(this).slider('value');

                var e = $('.element-active');
                var currentColor = $('.element-active').css('background-color');
                var lastComma = currentColor.lastIndexOf(')');
                var newColor = currentColor.slice(0, lastComma - 1) + ", "+ o + ")";
                $(e).css('background-color', newColor);

            }); 
```

感谢大家的建议，我希望这可以帮助想要相同功能的人

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-29T14:36:03.500

即使这已经解决了，也许我的小功能会帮助某人。作为参数，它需要一个 jQuery 元素，如 $('a')（具有 RGB 或 RGBA 背景颜色）和 0 - 1 的 alpha 值。

```
function RGBA(e, alpha) { //e = jQuery element, alpha = background-opacity
    b = e.css('backgroundColor');
    e.css('backgroundColor', 'rgba' + b.slice(b.indexOf('('), ( (b.match(/,/g).length == 2) ? -1 : b.lastIndexOf(',') - b.length) ) + ', '+alpha+')');
} 
```

你会像这样使用它：

```
RGBA(jQuery('a'), 0.2); 
```

重要的部分是`<a>`元素已经设置了 rgb 或 rgba 背景色。

```
<a href="#" style="background-color: rgb(100,10,50);">Sample</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-21T12:48:33.087

对我来说更容易理解的解决方案是用逗号分割 rgba 颜色并用新的不透明度值更改最后一个元素（当然它**只有在初始颜色为 rgba 时才有效**）：

```
var newAlpha = $(this).slider('value');
// initial background-color looks like 'rgba(255, 123, 0, 0.5)'
var initialBackgroundColor = $('.element-active').css('background-color');
var bgColorSeparated = initialBackgroundColor.split(',');
// last element contains opacity and closing bracket
// so I have to replace it with new opacity value:
bgColorSeparated[3] = newAlpha + ')';
var newColor = bgColorSeparated.join(',');
$('.element-active').css('background-color', newColor); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-24T00:28:23.590

为什么你不切换具有那种颜色和不透明度的类

```
 $(myelement).toggleclass(); 
```

[se jquery api](http://api.jquery.com/toggleClass/)

# c# - 解析 c# 类文件以获取属性和方法

> ID：13725267
> 
> 赞同：6
> 
> 时间：2012-12-05T14:18:44.833
> 
> 标签：c#, .net, regex, winforms, reflection

> **可能重复：**
> [C# 解析器](https://stackoverflow.com/questions/81406/parser-for-c-sharp)

假设我有一个简单的类，例如在 winforms 应用程序的文本框控件内：

```
public class Person
{
    public string Name { get; set; }
    public int Age { get; set; }

    public void DoSomething(string x)
    {
        return "Hello " + x;
    }
} 
```

有没有一种简单的方法可以从中解析以下项目：

*   班级名称
*   特性
*   任何公共方法

任何想法/建议表示赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T14:20:35.807

您可以为此使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)：

```
Type type = typeof(Person);
var properties = type.GetProperties(); // public properties
var methods = type.GetMethods(); // public methods
var name = type.Name; 
```

**更新**您的第一步是编译您的课程

```
sring source = textbox.Text;

CompilerParameters parameters = new CompilerParameters() {
   GenerateExecutable = false, 
   GenerateInMemory = true 
};

var provider = new CSharpCodeProvider();       
CompilerResults results = provider.CompileAssemblyFromSource(parameters, source); 
```

接下来，您应该验证您的文本是否是有效的 c# 代码。实际上您的代码无效 - 方法 DoSomething 标记为 void，但它返回一个字符串。

```
if (results.Errors.HasErrors)
{
    foreach(var error in results.Errors)
        MessageBox.Show(error.ToString());
    return;
} 
```

到现在为止还挺好。现在从已编译的内存程序集中获取类型：

```
var assembly = results.CompiledAssembly;
var types = assembly.GetTypes(); 
```

在您的情况下，只有`Person`类型。但无论如何 - 现在您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)从这些类型中获取属性、方法等：

```
foreach(Type type in types)
{
    var name = type.Name;  
    var properties = type.GetProperties();    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:24:31.233

如果您需要在运行时分析 C# 代码，请查看[Roslyn](http://en.wikipedia.org/wiki/Microsoft_Roslyn)。

# c# - 链接单击事件在第一次尝试时未触发按钮单击事件（仅限 IE）。在第二次点击时工作。

> ID：13725269
> 
> 赞同：0
> 
> 时间：2012-12-05T14:18:57.873
> 
> 标签：c#, javascript, jquery, asp.net

这让我发疯。我的页面上有一个在颜色框中打开的 div。当用户单击 div 中的一个链接时，它会向代码（如下）触发一个事件，该代码应该依次填充隐藏字段，然后单击服务器按钮以运行一些代码。

问题是，在 IE(9) 中，它不会在第一次尝试时单击服务器按钮（是的，它确实会进入客户端单击事件）。奇怪的是，它似乎在 Chrome 和 FF 中运行良好。

```
$(document).on('click', '.link', function (e) {
    e.preventDefault();
    var thisID = $(this).attr('href').replace('#ca', '');
    $("#hiddenField").val(thisID );
    $("#button1").submit();
}); 
```

值得一提的是，在 colorbox 中打开的 div 中的链接是动态填充的。但这应该会影响它，因为链接上的点击事件工作正常。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:46:48.620

似乎正确的形式是用 触发按钮提交`.trigger()`，而不是提交。根据定义，不带任何附加参数的 .submit() 镜像 .trigger('submit') ，这是您在表单上运行的，而不是按钮。

例如：`$("#button1").trigger("click");`

这是[关于`.trigger()`](http://api.jquery.com/trigger/)

对我来说，提交表单的更合乎逻辑的方法是完全绕过按钮并 .submit() 实际表单本身。您不这样做可能是有原因的，但它似乎更直接，而不是依赖于可能被用户“弄乱”的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:22:05.503

```
e=e?e:window.event;
if($.browser.msie)
{ 
  e.returnValue=false; 
  e.cancelBubble=true;
 }
else
 {e.preventDefault();} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:22:15.747

试试这个：

```
$(document).ready(function() {
    $('.link').click(function (e) {
        e.preventDefault();
        var thisID = $(this).attr('href').replace('#ca', '');
        $("#hiddenField").val(thisID);
        $("#button1").submit();
    }
)}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:11:41.063

这是 [fiddle][1] 为您提供的答案。它在所有浏览器上都能正常工作。

我的代码似乎没有任何问题

只是将代码移动到文档就绪功能中

# php - 缺少国际扩展名

> ID：13725271
> 
> 赞同：1
> 
> 时间：2012-12-05T14:18:59.993
> 
> 标签：php, symfony, int

我正在开发一个使用 PHP 和 Symfony 的项目。我的 intl.dll 文件存在于 wamp/bin/php/php5.3.10/ext 中。在我的 php.ini 文件中，我有

```
 extension_dir = "c:/wamp/bin/php/php5.3.10/ext/" 
```

并且 intl.dll 文件也被启用

但我仍然收到以下错误。

```
 The Symfony\Component\Locale\Stub\StubIntlDateFormatter::setLenient() is not implemented. Please install the 'intl' extension for full localization capabilities. 
```

谁能帮我我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-03T10:00:29.767

启用扩展`php_intl`。

`ic*.dll`并将文件从文件夹复制`php`到`apache/bin`文件夹：

`copy D:\wamp\bin\php\php5.3.10\ic*.dll D:\wamp\bin\apache\Apache2.2.21\bin\`

正如它在[类似问题](https://stackoverflow.com/questions/16372888/intl-extension-php-intl-dll-with-wamp?rq=1)中所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:21:12.030

尝试使用位于 apache 中的文件。(bin\apache\apache2.2.22\bin\php.ini)

从行中删除分号：;extension=php_intl.dll

Wamp 似乎从这个文件而不是从 php 目录中的那个文件加载配置。

# php - 数组插入phpexcel

> ID：13725275
> 
> 赞同：0
> 
> 时间：2012-12-05T14:19:09.383
> 
> 标签：php, phpexcel

我在数组中有元素，我想将值放在列中，但开始在单元格 2 中插入。例如，列 E 开始插入 E2 到 E6。

这是我尝试过的示例代码：

```
 foreach($distinctresults as $distinctres)
  {
   $distinctnow[]=$distinctres;
  }
  for($i=1;$i<=6;$i++){
   $objPHPExcel->getActiveSheet()->setCellValue('E'.$i,$distinctnow[$i]);
   } 
```

如果我添加另一个以 2 开头的循环来满足 E 中的行号，则会引发偏移错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:27:50.750

这就是您调整单元格引用的方式

```
 $objPHPExcel->getActiveSheet()->setCellValue('E'. ($i + 1),$distinctnow[$i]);
                                                     ^^^^^^^^ 
```

但请注意，您的 $distinctnow 数组实际上将具有键 0->5（假设 6 个数据点），并且您正在循环 1->6，因此您缺少一个项目。怎么样：

```
$i = 2;
foreach($distinctresults as $distinctres) {
    $objPHPExcel->getActiveSheet()->setCellValue('E'. $i,$distinctres);
    $i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:25:09.437

```
for($i=1;$i<6;$i++){
   $objPHPExcel->getActiveSheet()->setCellValue('E'.$i+1,$distinctnow[$i]);
} 
```

# zend-framework - zf 1：将 javascript 代码添加到我的视图中

> ID：13725277
> 
> 赞同：0
> 
> 时间：2012-12-05T14:19:11.980
> 
> 标签：zend-framework

我试图将 javascript 代码添加到我的视图中，所以我按照[本](http://www.stoimen.com/blog/2010/06/24/zend-framework-inject-javascript-code-in-a-actionview/)教程进行操作，并将其添加到我的控制器中：

```
$scripts = $this->view->inlineScript();
$scripts->appendScript('alert("jfkasd")'); 
```

但是我没有弹出警报，也没有`alert()`在页面的源代码中找到对函数的任何引用。

由于我不确切知道我是在动作还是视图中编写这些行，所以我也尝试了这个：

```
<!-- /views/scripts/contracts/generalinfo.phtml -->
<?php $scripts = $this->inlineScript() ?>
<?php $scripts->appendScript('alert("jfkasd")') ?> 
```

但结果和以前一样..

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:39:07.593

您必须回显脚本。基本想法是

```
<?php echo $scripts->appendScript('alert("jfkasd")') ?> 
```

或者，在控制器中设置，您可以将其放在视图或布局文件中：

```
<?php echo $this->inlineScript() ?> 
```

# wamp - WAMP 404 虚拟主机

> ID：13725283
> 
> 赞同：1
> 
> 时间：2012-12-05T14:19:27.877
> 
> 标签：wamp

我是一名学生，作为我大学课程的一部分进行实习，我在使用 apache 和虚拟主机方面遇到了很多问题。我必须使用 WAMP 作为我的开发环境，当我对 windows 主机文件和 httpd-vhosts.conf 文件进行更改时，它使我的 WAMP 服务器变得无法使用。我已将以下文件上传到 pastebin

*   Windows 主机文件： http: [//pastebin.com/X9XyJHEX](http://pastebin.com/X9XyJHEX)
*   httpd.conf 文件： http://pastebin.com/DHULTyKChttp: [//pastebin.com/UvptYTsy](http://pastebin.com/DHULTyKChttp://pastebin.com/UvptYTsy)
*   httpd-vhosts.conf 文件：

好的，这是我可以浏览到 localhost 和 127.0.0.1 的症状，我看到了 WAMP 服务器欢迎屏幕，但是我设置的虚拟主机没有显示在虚拟主机目录下。当我浏览到“http://localhost/phpmyadmin/”时，我无法访问 PHPMyAdmin，我收到以下错误：

> 未找到 在此服务器上未找到请求的 URL /phpmyadmin/。

我一直在谷歌上搜索并尝试各种不同的方法来设置这个虚拟主机，但它们都不起作用，而且所有这些都导致了同样的问题，即现在无法使用的瘫痪 WAMP 服务器。任何人都可以看到为什么这些文件（根据我在谷歌上找到的所有内容，其文本是正确的并且没有引起任何问题）无法正常工作。公司中似乎没有人有任何想法（我已经复制了他们的文件/设置，这没有任何区别），这让我在过去的两天里陷入了僵局，我束手无策。这占用了太多时间，如果我不能在第二天解决它，我将不得不卸载 WAMP 或重新安装 Windows。我知道很激烈，但我没有更多的时间来处理这个问题，如果我现在不做某事，我会扔掉这台电脑！

任何人都可以向我指出一个非常好的、非常详细且面向 n00b 的教程，介绍如何设置 VirtualHosts 并正确使用它们。我很乐意在我去的时候用我的发现来更新这个，因为没有人应该无缘无故地经历这么多的废话和胡说八道！！！！

# c# - String.Substring(...) 方法给出异常

> ID：13725285
> 
> 赞同：0
> 
> 时间：2012-12-05T14:19:49.160
> 
> 标签：c#, .net, string, substring

我想将一个字符串保留为来自 Richtextbox 的另一个字符串 strTotal。然后我想通过中间索引将它分成两个子字符串，比如 firstPart 和 secondPart：midIndex。

然后我想在上半场更改一些值并加入下半场。最后展示给richTextBox。

为此，我使用了以下代码：

对于我的最后一次调试：

rtxtQueryPan.Text.Length = 53; midIndex = 45;

```
 //string Totalqueryy = rtxtQueryPan.Text;
 string firstHalf = rtxtQueryPan.Text.Substring(0, midIndex-2); 
 string secondHalf = rtxtQueryPan.Text.Substring((midIndex- 1), (rtxtQueryPan.Text.Length - 1)); // THIS LINE SHOWS ERROR

 string duplicateFirstHalf = firstHalf;
 firstHalf += " " + clColumnNames.Text + ",";
 rtxtQueryPan.Text = firstHalf+secondHalf; 
```

在代码的第 3 行中说：

**索引和长度必须引用字符串中的位置。参数名称：长度**

我检查了长度、midIndexvalue 等。但没有发现任何线索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:24:32.717

C#`.Substring`函数的第二个参数是**长度**，而不是**位置。**

因此，您可能想编写以下代码：

```
rtxtQueryPan.Text.Substring(midIndex-1, (rtxtQueryPan.Text.Length-1) - midIndex); 
```

此外，长度参数是可选的，而不是您应该在您的情况下提供的东西，因为您希望包含字符串的其余部分。因此，您也可以编写：

```
rtxtQueryPan.Text.Substring(midIndex-1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:26:02.337

`Substring`只能在被作用的字符串的范围内工作。在这里，`rtxtQueryPan.Text`指的是`RichTextBox`其中的文本比字符串中当前包含的文本更长。请记住 的参数`Substring`是起始位置和长度。

你想`(rtxtQueryPan.Text.Length-1) - midIndex`作为第二个参数。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:27:45.627

问题是你从中途抓住第二根弦并说我想要整个弦。如果您使用子字符串，则第二个参数是您的子字符串的长度。这应该解决它。 `string secondHalf = rtxtQueryPan.Text.Substring((midIndex- 1), (rtxtQueryPan.Text.Length - 1-midIndex));`

# hibernate - Hibernate (2.1) - 通过两列连接表

> ID：13725286
> 
> 赞同：0
> 
> 时间：2012-12-05T14:19:52.397
> 
> 标签：hibernate

Hibernate xml映射中是否有任何解决方案可以通过两列（colC，colD）连接表（T1，T2）？例如

```
T1
cols: id...colC,colD

T2
cols: id...colC,colD 
```

（这意味着：...其中 t1.colC=t2.colC 和 t1.colD=t2.colD）提前致谢。

环境：休眠 2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:44:26.240

我们提出了将他们联合起来的观点，这似乎已经足够好了。我也真的很想念 HQL 访问...

# jakarta-ee - Java-EE6：为什么查询会抛出 org.eclipse.persistence.exceptions.QueryException？

> ID：13725289
> 
> 赞同：0
> 
> 时间：2012-12-05T14:20:00.877
> 
> 标签：jakarta-ee, exception, glassfish-3

我的项目具有以下配置：

*   MySQL 5.5 数据库服务器
*   玻璃鱼 3.1.2.2
*   Eclipselink 2.3.2 作为 JPA 提供者
*   通过 JNDI 查找和远程接口连接到 Glassfish 的 Java SE 独立客户端

我使用静态编织来懒惰地获取重关系（由负载组完成）。

我有以下实体来序列化文件并将其存储到数据库中：

```
@Entity
@Table(name = "Document")
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)
public class Document implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE)
    protected Long id;

    @Column(length = 128)
    protected String description;

    @Lob
    @Basic(optional=false, fetch=FetchType.LAZY)
    protected byte[] content;

    @Transient
    protected transient File file;

    public Document() { }

    // getters and setters ...

} 
```

以下是我的文档外观中的一个 coutout，其中包含管理功能（持久、修改、删除和查询）：

```
@Override
@RolesAllowed("User")
public Document queryById(Long id, LoadGroup group) {
    TypedQuery<Document> query = em.createQuery("SELECT d FROM Document d WHERE d.id = "+id, Document.class);
    if(group!=null) {
        query.setHint(QueryHints.LOAD_GROUP, group);
    }
    try {
        return query.getSingleResult();
    } catch(NoResultException ex) {
        return null;
    }
} 
```

这就是我在独立客户端上调用查询的方式：

```
DocumentFacadeRemote documentFacade = (DocumentFacadeRemote)ctx.lookup("java:global/LawSuiteEE/LawSuiteEE-ejb/DocumentFacade!ch.lawsuite.control.DocumentFacadeRemote");

LoadGroup group = new LoadGroup();
group.addAttribute("content");

Document document = documentFacade.queryById(new Long(1), group); 
```

现在我得到以下异常：

```
Exception Description: The parameter name [ID] in the query's selection criteria does not match any parameter name defined in the query. 
```

这是完整的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:213)
    at com.sun.ejb.containers.EJBObjectInvocationHandlerDelegate.invoke(EJBObjectInvocationHandlerDelegate.java:79)
    at $Proxy8492.queryById(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie.dispatchToMethod(ReflectiveTie.java:144)
    at com.sun.corba.ee.impl.presentation.rmi.ReflectiveTie._invoke(ReflectiveTie.java:174)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatchToServant(CorbaServerRequestDispatcherImpl.java:528)
    at com.sun.corba.ee.impl.protocol.CorbaServerRequestDispatcherImpl.dispatch(CorbaServerRequestDispatcherImpl.java:199)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequestRequest(CorbaMessageMediatorImpl.java:1624)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:1486)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleInput(CorbaMessageMediatorImpl.java:990)
    at com.sun.corba.ee.impl.protocol.giopmsgheaders.RequestMessage_1_2.callback(RequestMessage_1_2.java:214)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.handleRequest(CorbaMessageMediatorImpl.java:742)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.dispatch(CorbaMessageMediatorImpl.java:539)
    at com.sun.corba.ee.impl.protocol.CorbaMessageMediatorImpl.doWork(CorbaMessageMediatorImpl.java:2324)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
    at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: Exception [EclipseLink-6094] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.QueryException
Exception Description: The parameter name [ID] in the query's selection criteria does not match any parameter name defined in the query.
    at org.eclipse.persistence.exceptions.QueryException.parameterNameMismatch(QueryException.java:1063)
    at org.eclipse.persistence.internal.expressions.ParameterExpression.getValue(ParameterExpression.java:275)
    at org.eclipse.persistence.internal.databaseaccess.DatabaseCall.translate(DatabaseCall.java:1000)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:206)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:193)
    at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.selectOneRow(DatasourceCallQueryMechanism.java:666)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectOneRowFromTable(ExpressionQueryMechanism.java:2656)
    at org.eclipse.persistence.internal.queries.ExpressionQueryMechanism.selectOneRow(ExpressionQueryMechanism.java:2627)
    at org.eclipse.persistence.queries.ReadObjectQuery.executeObjectLevelReadQuery(ReadObjectQuery.java:450)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
    at org.eclipse.persistence.queries.ReadObjectQuery.execute(ReadObjectQuery.java:418)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.descriptors.TablePerClassPolicy.selectOneObject(TablePerClassPolicy.java:243)
    at org.eclipse.persistence.descriptors.InterfacePolicy.selectOneObjectUsingMultipleTableSubclassRead(InterfacePolicy.java:275)
    at org.eclipse.persistence.queries.ReadObjectQuery.executeObjectLevelReadQuery(ReadObjectQuery.java:430)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
    at org.eclipse.persistence.queries.ReadObjectQuery.execute(ReadObjectQuery.java:418)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.descriptors.TablePerClassPolicy.selectOneObject(TablePerClassPolicy.java:243)
    at org.eclipse.persistence.descriptors.InterfacePolicy.selectOneObjectUsingMultipleTableSubclassRead(InterfacePolicy.java:275)
    at org.eclipse.persistence.queries.ReadObjectQuery.executeObjectLevelReadQuery(ReadObjectQuery.java:430)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1081)
    at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:844)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1040)
    at org.eclipse.persistence.queries.ReadObjectQuery.execute(ReadObjectQuery.java:418)
    at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeInUnitOfWork(ObjectLevelReadQuery.java:1128)
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2871)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1516)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1498)
    at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1463)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.executeReadQuery(EJBQueryImpl.java:485)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:773)
    at ch.lawsuite.control.DocumentFacade.queryById(DocumentFacade.java:102)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
    at sun.reflect.GeneratedMethodAccessor6346.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor6345.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBObjectInvocationHandler.invoke(EJBObjectInvocationHandler.java:206)
    ... 19 more 
```

任何帮助都非常感谢！提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:50:23.577

我希望我没有误解你的问题。

我认为您应该能够使用 em.find 获取您的实体

```
long docId = 10;
Document doc = em.find(Document.class, docId); 
```

或者如果它不是 ID，这会更好：

```
TypedQuery<Document> query = em.createQuery("SELECT d FROM Document d WHERE d.id = :id", Document.class).setParameter("id",docId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:03:11.720

我变了

```
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) 
```

到

```
@Inheritance(strategy=InheritanceType.SINGLE_TABLE) 
```

现在它工作得很好。它以某种方式与继承的@Id 发生冲突。即使在对超类的对象实例调用查询时，JPA 也使用了子类的自动生成的提取组......可能是 eclipse-link 中的一个错误。

# javascript - show() 不适用于类

> ID：13725290
> 
> 赞同：0
> 
> 时间：2012-12-05T14:20:04.980
> 
> 标签：javascript, jquery

这是一个简单的编码，但有些地方我做错了。我只是想不通。

```
#div {
    display:none;
} 
```

JS：

```
function show() {
    var class = 1;
    $("#div." + class).show("slow");    
} 
```

HTML：

```
<div id="div" class="1">John</div>
<div id="div" class="2">Tanner</div>
<input type="button" onclick="show()" /> 
```

在这里，我试图“显示（）”一个`div`特定的类。
问题是，这段代码适用于`class="1"`. 但是当我更改`var class`为时`2`，它停止工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T14:22:02.603

一个类不能只是一个数字。将类重命名为`$("#div." + "name"+class)`

# php - 添加提示时activedropDownList不加载ajax函数

> ID：13725292
> 
> 赞同：0
> 
> 时间：2012-12-05T14:20:21.170
> 
> 标签：php, yii

我在 yii 中遇到了问题，我创建了代码来调用 activedropDownList 中的 ajax 来加载 dropDownList 中的值，并且一切正常！

但我的问题是：

1-添加时 array('prompt'=>'Select Yous country ') 所以代码将是这样的：

echo CHtml::activedropDownList($model,'country',$model->getcountry(),array('prompt'=>'Select Yous country'),

结果：不行。

但是，如果当我删除 array('prompt'=>'Select Yous country') 时，它的工作和 ajax 加载新列表！

这是我的代码

看法 ：

```
<?php
/* @var $this UsersController */
/* @var $model Users */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'users-index-form',
    'enableAjaxValidation'=>false,
)); ?>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'الأسم الأول'); ?>
        <?php echo $form->textField($model,'first_name'); ?>
        <?php echo $form->error($model,'الأسم الاول'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'العائلة'); ?>
        <?php echo $form->textField($model,'last_name'); ?>
        <?php echo $form->error($model,'العائلة'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'كلمة المرور'); ?>
        <?php echo $form->passwordField($model,'password'); ?>
        <?php echo $form->error($model,'password'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'تأكيد كلمة المرور'); ?>
        <?php echo $form->passwordField($model,'passwordconfirm'); ?>
        <?php echo $form->error($model,'passwordconfirm'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'البريد الإلكتروني '); ?>
        <?php echo $form->textField($model,'email'); ?>
        <?php echo $form->error($model,'email'); ?>
    </div>
        <div class="row">
        <?php echo $form->labelEx($model,'تأكيد البريد الإلكتروني'); ?>
        <?php echo $form->textField($model,'emailconfirm'); ?>
        <?php echo $form->error($model,'emailconfirm'); ?>
    </div>

        <div class="row">
        <?php echo $form->labelEx($model,'تاريخ الميلاد'); ?>
    <?php

$this->widget(
    'ext.jui.EJuiDateTimePicker',
    array(
        'model'     => $model,
        'attribute' => 'birth_date',
        'language'=> 'en',//default Yii::app()->language
         'mode'    => 'date',//'datetime' or 'time' ('datetime' default)
        'options'   => array(
        'dateFormat' => 'yy-mm-dd',
            //'timeFormat' => '',//'hh:mm tt' default
        ),
    )
);

?>

        <?php echo $form->error($model,'birth_date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'الجنس'); ?>
        <?php echo chtml::activeDropDownList($model,'gender',$model->getStatusOption(),array('prompt'=>'أختر جنسك')
); ?>
        <?php echo $form->error($model,'gender'); ?>
    </div>

        <div class="row">
        <?php echo $form->labelEx($model,'البلد'); ?>
    <?php

    /*
     echo chtml::activeDropDownList($model,'country',$model->getcountry(),array('prompt'=>'Select your country  ')   , 
    array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('current/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))

    ); 

    */
    echo CHtml::activedropDownList($model,'country',$model->getcountry(),array('prompt'=>'اختر البلد أو المنطقة '),

    array(
'ajax' => array(
'type'=>'POST', //request type
'url'=>CController::createUrl('register/dynamiccities'), //url to call.
//Style: CController::createUrl('currentController/methodToCall')
'update'=>'#city', //selector to update
//'data'=>'js:javascript statement' 
//leave out the data key to pass all form values through
))
    );

   ///

    ////

    ?>

        <?php echo $form->error($model,'country'); ?>
    </div>
    <div class="row">
        <?php echo $form->labelEx($model,'المدينة'); ?>
        <?php 
       //empty since it will be filled by the other dropdown
echo CHtml::dropDownList('city','', array());

//echo CHtml::activedropDownList($model,'city',array());
 ?>
        <?php echo $form->error($model,'city'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'رمز الاتصال'); ?>
        <?php echo $form->textField($model,'mobile_code'); ?>
        <?php echo $form->error($model,'mobile_code'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'رقم الجوال'); ?>
        <?php echo $form->textField($model,'mobile_number'); ?>
        <?php echo $form->error($model,'mobile_number'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('تسجيــــــــــــل'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

Ajax 控制器：

```
public function actionDynamiccities() /// Called Ajax
{
$country=intval($_POST['Users']['country']);

       $data=Cities::model()->findAll('country_id=:country_id', 
                  array(':country_id'=>$country));
 $data=CHtml::listData($data,'id','city_name_e');

    foreach($data as $value=>$name)
    {
        echo CHtml::tag('option',
                   array('value'=>$value),CHtml::encode($name),true);
    };

} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:26:59.017

`activeDropDownList`只需要 4 个参数。

> 公共静态字符串 activeDropDownList(CModel $model, string $attribute, array $data, array $htmlOptions=array ())

放入`'prompt'=>'اختر البلد أو المنطقة '`与您的 ajax 代码相同的数组中。

```
array(
  'prompt'=>'اختر البلد أو المنطقة ',
  'ajax' => array(
    'type'=>'POST', //request type
    'url'=>CController::createUrl('register/dynamiccities'), //url to call. //Style: CController::createUrl('currentController/methodToCall')
    'update'=>'#city', //selector to update
    //'data'=>'js:javascript statement' 
    //leave out the data key to pass all form values through
  )
) 
```

# sql - 在外部查询中使用 Order by 是必需的吗？

> ID：13725296
> 
> 赞同：1
> 
> 时间：2012-12-05T14:20:38.237
> 
> 标签：sql, oracle, function, sql-order-by

我很想知道在下面的查询中，我是否需要在外部查询中使用 order by 子句？

```
SELECT *
  FROM (SELECT a1, b1, 
               row_number() over(ORDER BY A.b1 DESC) rNum
           FROM TABLE_A)
 WHERE rNum between 1 and 10 
***ORDER BY B1 DESC*** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:23:47.907

是的，如果您想要按 b1 排序的最后 10 行，请使用 order by。因为不能保证其他任何事情（它可能会发生在它总是有序的示例中，但事情可能会改变）！

# filter - Windows 下层过滤器驱动程序

> ID：13725297
> 
> 赞同：0
> 
> 时间：2012-12-05T14:20:39.110
> 
> 标签：filter, driver, wdk

有一些特殊的 USB 驱动器，它们的 Oxford Semi 控制器声称自己是不可移动的，我需要使它们可移动 [当然它们是]。牛津不会合作。使用 Hitachi 的 cfadisk.c，调整 QueryPropertyCompletion 函数以确认供应商 ID 是我要查找的 ID，然后在返回之前设置可移动属性。使用 DDK 的 addfilter 为我的一个特殊 USB 设备插入一个较低的过滤器。addfilter listdevices 显示正确安装了下部过滤器。重新启动。现在特殊的 USB 设备不再出现；Windows 资源管理器看不到它。addfilter 当然不能用于删除较低的过滤器，因为设备必须首先在那里。在注册表中查找对我的过滤器驱动程序的所有引用，但 regedt32 拒绝删除“LowerFilter” 指定我的驱动程序的引用。我什至重命名了找到我的驱动程序的文件夹，重新启动，但 regedt32 仍然拒绝删除引用。如何说服 Windows 放弃较低的过滤驱动程序？而且我想我必须设置一个内核调试器来找出过滤器驱动程序在做什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T19:10:55.690

您在评论中描述的权限设置不允许除 SYSTEM 帐户之外的任何人，可能还有所有者将其删除。除非该管理员也是所有者*并且*所有者权限允许删除，否则以管理员身份登录并不重要，这显然不是您的机器上的情况。

我的机器 (Win7) 上包含 LowerFilters 值的每个键都可以完全控制管理员，这意味着我可以删除它们。因此，您要删除或修改这些值的唯一方法是让管理员完全控制这些键。他们是如何无法完全控制的，我不能说。

# jquery - 使用 jQuery 的 removeAttr 删除多个属性

> ID：13725301
> 
> 赞同：102
> 
> 时间：2012-12-05T14:20:47.060
> 
> 标签：jquery

我有以下代码。

```
$(document).ready(function(){
 $('#listing img')
 .attr('width', 250)
 .removeAttr('height').removeAttr('align').removeAttr('style')
 .wrap('<p />');
}); 
```

有没有更有效的方法来删除多个属性？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-12-05T14:21:58.963

是的 ：

```
.removeAttr('height align style') 
```

从[文档中](http://api.jquery.com/removeAttr/)：

> 从 1.7 版开始，它可以是一个以空格分隔的属性列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-06-17T02:15:20.107

是的，您可以通过以下方式删除它：

```
$('#listing img').removeAttr('height align style'); 
```

您还可以按如下方式添加这些属性：

```
$('#listing img').attr({ height: "20", align: left }).css({ color: red, text-align: center }); 
```

# python - Django：插入时多对多关系的新记录

> ID：13725304
> 
> 赞同：1
> 
> 时间：2012-12-05T14:20:57.057
> 
> 标签：python, django, django-models, django-forms

假设我有两个基本类，一个与另一个具有多对多关系：

```
class Foo(models.Model):
    abc = models.TextField()
    test = models.ManyToManyField(Bar)

class Bar(models.Model):
    zyx = models.TextField() 
```

然后我为 Foo 创建了一个 Django 表单：

```
class FooForm(forms.ModelForm):
    class Meta:
        model = Foo
        fields = ["abc", "test"] 
```

这将创建一个带有 TextArea 的表单，供我输入 new 变量的`Foo`值`abc`，以及一个列表框以将其链接到一个或多个`Bar`对象。我想为这个特定的表单做的是，而不是`Bar`对象的列表框，能够​​同时创建一个（并且只有一个）新`Bar`的（即，为`Bar`'s的值显示第二个 TextArea `zyx`）和然后将 new 链接`Bar`到 new `Foo`。ManyToMany 关系稍后在编辑中出现，但在创建时，我想要一个`Bar`与一个 new 绑定`Foo`。

是否可以通过发布表单一次完成所有操作，或者我将不得不使用一些 javascript 和 AJAX 来实际创建第`Bar`一个，获取它的新 ID，并将新的 ID 链接`Foo`到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:46:56.230

这*是*可能的，但我不确定 a`ModelForm`会为你做到这一点。

* * *

### 但是，您可以轻松地自己完成：

设置表格供用户填写：

*   创建一个表单让用户输入`abc`（*可以*是`ModelForm`）
*   从允许用户输入任意数量的表单[创建](http://docs.djangoproject.com/en/dev/topics/forms/formsets/)相关`zyx`实例`Bar`的表单集。（同样，formset`ModelForm`是可以的）

处理`POST`数据时，请执行以下操作：

1.  验证表单和表单集是否有效
2.  插入新实例
3.  Add your new `Bar` instances to your new `Foo`'s `Bar` ManyToMany relationship

* * *

*Small tip: remember that `ModelForm.save` returns the instance!*

# c# - 来自 C# 的 SqlCeRemoteDataAccess

> ID：13725313
> 
> 赞同：0
> 
> 时间：2012-12-05T14:21:21.150
> 
> 标签：c#, sql-server-ce, connection-string

有人可以帮助我了解如何设置 RemoteDataAccess 所需的 connectionString 和 InternetURL 吗？

我找不到任何有一些好的例子和解释的材料。

谢谢你。

我尝试使用以下代码，但在拉取过程中的连接字符串传递中出现错误。我可以使用 oledb 提供程序调用 mdf 文件吗？

```
String rdaOlebConnectionString = @"Data Source=\ProgramStore\Program Files\SyncTable\ssce.sdf";
String connectionStr = @"Data Source=192.168.77.160;Initial Catalog=Autotrolej;Persist Security Info=True;User Id=martina; Password=martina";

rda = new SqlCeRemoteDataAccess();
            rda.LocalConnectionString = rdaOlebConnectionString;
            rda.InternetUrl = "http://localhost:5011/Pidion/sqlcese35.dll ";
            rda.Pull("EXP.Vozilo", "SELECT * FROM EXP.Vozilo", "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=192.168.77.160;Initial Catalog=Autotrolej;Persist Security Info=True;User ID=martina;Password=martina");

            rda.Dispose(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:24:34.997

试试这个连接字符串.. 首先制作一个带有四个文本标签的测试表单。数据库服务器、数据库名称、用户 ID 和密码

```
private void button_test_Click(object sender, EventArgs e)
{
    try
    {
        string str = "data source=" + textBox_server.Text + "; initial catalog=" + textBox_db.Text
+ "; user id=" + textBox_user.Text + "; pwd=" + textBox_password.Text + ";";

        SqlConnection sqlcon = new SqlConnection(str);
        sqlcon.Open();
        sqlcon.Close();
        MessageBox.Show("Test Connection was successfull");
    }
    catch (Exception ex)
    {
        MessageBox.Show("Test Connection failed. "+ ex.Message);
    }
} 
```

然后添加它并测试。

请使用正确的数据库名称和服务器，并请检查服务器的身份验证

此时进行远程连接时，请确保输入正确的数据库服务器名称或它的ip，以及正确的表名。通过此测试，您可以验证从 c# 到您的代码的连接

# c# - 关于组拆分的正则表达式问题

> ID：13725314
> 
> 赞同：0
> 
> 时间：2012-12-05T14:21:23.630
> 
> 标签：c#, regex, split, string-matching

我正在尝试使用对象匹配通过正则表达式定义的组来拆分字符串，如下所示：

```
if(match.Success)
{
    foreach (Group group in match.Groups)
    {
        foreach(Capture capture in group.Captures)
        {
            //...
        }
    }
} 
```

我应该匹配的字符串是这样形成的：以“开头或不以”，任何字符任意次数（包括“，\r，\n等），如果以“结束”开头，后跟; 然后任意字符任意数量的时间，另一个；，至少完成一次空间和数字的混合。

我使用这个正则表达式：

```
("?[.|\n|\r|\r\n]*"?);(.*);([\d| ]*)(;([\d| ]*))* 
```

我想要第一组是带有任何字符的字符串，第二组：字符串，它只是文本/数字，第三组总是在这里，是空格和数字的混合，如果有更多组空格和数字，将它们放入 4,5 6 等组中。

我必须匹配的字符串示例：

> “VIS METAUX TETE CYLINDRIQUE FENDUE EN ACIER ZINGUE DIAMETRE M10”；长 60 毫米；0046 10 30
> 
> “Vis à métaux à tête cylindrique fendue。标准：DIN 84”；直径 3 毫米。长 16 毫米；0046 3 16
> 
> "Tournevis Torx sur monture : 10, 15, 20, 25, 30, 40";;0613 434 10;0613 434 10;0613 434 20

这根本不起作用，我匹配的组很少好，我不明白我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:42:25.873

这仅在您可以将每个“行”作为单独的字符串获取时才有效，而不是尝试拆分，我会使用正则表达式来*匹配*每个字段：

```
// Unescaped regular expression is (?<=")[^"]*(?=")|(?<=^|;)[^;]*(?=$|;)
Regex r = new Regex(@"(?<="")[^""]*(?="")|(?<=^|;)[^;]*(?=$|;)");
foreach (Match field in r.Matches(csvLine))
   ... // do something with field.Value 
```

正则表达式匹配“在它之前和之后带有引号的非引号字符的负载或带有分号的非分号字符的负载或字符串的开头/结尾在它之前和之后）

# php - PHP - 检查名称空间内是否存在全局类

> ID：13725315
> 
> 赞同：2
> 
> 时间：2012-12-05T14:21:35.970
> 
> 标签：php, class, namespaces

如果您在另一个类的命名空间中，如何使用 class_exists 检查全局类是否存在？例如：

```
<?php
namespace Rvdv\Test\Example;

class ExampleClass
{
    public function testNamespace()
    {
        // This says that it doesn't exists :(
        print class_exists('\\Test');
    }
} 
```

其中 class 是全局定义的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:36:51.567

你不得不在你的其他问题中搞砸一些东西——很可能类测试没有在这个范围内声明（你忘了包含吗？）。因此，我对此进行了测试：

phpcltest2.php：

```
<?php
class Test { } 
```

phpcltest.php：

```
<?php
namespace Rvdv\Test\Example;
require 'phpcltest2.php';

class ExampleClass
{
    public function testNamespace()
    {
    print class_exists('\\Test');
    }
}

$nc = new ExampleClass();
$nc->testNamespace(); 
```

结果是预期的：它打印出“1”。所以检查你的包含路径。

# sql - 我们可以在选择子句中使用关系运算符吗

> ID：13725317
> 
> 赞同：0
> 
> 时间：2012-12-05T14:21:41.140
> 
> 标签：sql, oracle11g

我想制作我的金额小于某个值的列。当我尝试这个时，查询运行

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",
   LOSA_EXP_SUMM_Z.group_exp AS "Group Exposure Amount",
   LOSA_EXP_SUMM_Z.group_exp - 25000 AS "Less than",
   columns AS "some Name"
   columns AS "some Name"
from 
     losa_app LOSA_APP
INNER JOIN
    code_branch CODE_BRANCH
ON
    LOSA_APP.attend_branch = CODE_BRANCH.branch_id
....
where 
    LOSA_APP.app_status in ('A','R')
and
    ....
 or 
 (
    '&&aplication' = 'Enhancement' 
    and 
    (
        nvl(LOSA_APP.review_type, '-') IN ('Enhancement', 'Additional')  and nvl(LOSA_APP.review_freq, '-') IN ('Enhancement', 'New')
    )
); 
```

但是，当我将行更改为 时`LOSA_EXP_SUMM_Z.group_exp - 25000 AS "Less than"`，`LOSA_EXP_SUMM_Z.group_exp < 25000 AS "Less than"`我得到的错误是

```
ORA-00923: FROM keyword not found where expected
00923\. 00000 -  "FROM keyword not found where expected"
*Cause:    
*Action:
Error at Line: 3 Column: 34 
```

第 3 行是`LOSA_EXP_SUMM_Z.group_exp < 25000 AS "Less than"`. 为什么在我们使用时会运行它`subtract sign`并在 的情况下给出错误`relational operator`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:27:03.727

If you want to use a relational operator in a `SELECT` then you will need to use it in a `CASE` statement similar to this:

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",
   LOSA_EXP_SUMM_Z.group_exp AS "Group Exposure Amount",
   CASE 
        WHEN LOSA_EXP_SUMM_Z.group_exp < 25000 
        then 'true'
        else 'false' 
     end AS "Less than",
   columns AS "some Name"
   columns AS "some Name"
from losa_app LOSA_APP
INNER JOIN code_branch CODE_BRANCH
    ONLOSA_APP.attend_branch = CODE_BRANCH.branch_id
....
where  LOSA_APP.app_status in ('A','R')
and
    ....
 or 
 (
    '&&aplication' = 'Enhancement' 
    and 
    (
        nvl(LOSA_APP.review_type, '-') IN ('Enhancement', 'Additional')  and nvl(LOSA_APP.review_freq, '-') IN ('Enhancement', 'New')
    )
); 
```

This will now return either a `true` or `false` if the record is less than 25000\. You can change the return to whatever you need, including:

```
select LOSA_APP.app_ref_no AS "App.Ref.No.",
   LOSA_EXP_SUMM_Z.group_exp AS "Group Exposure Amount",
   CASE WHEN LOSA_EXP_SUMM_Z.group_exp < 25000 
            then LOSA_EXP_SUMM_Z.group_exp - 25000
        else LOSA_EXP_SUMM_Z.group_exp end AS "Less than",
   columns AS "some Name"
   columns AS "some Name"
from losa_app LOSA_APP
INNER JOIN code_branch CODE_BRANCH
    ONLOSA_APP.attend_branch = CODE_BRANCH.branch_id
....
where  LOSA_APP.app_status in ('A','R')
and
    ....
 or 
 (
    '&&aplication' = 'Enhancement' 
    and 
    (
        nvl(LOSA_APP.review_type, '-') IN ('Enhancement', 'Additional')  and nvl(LOSA_APP.review_freq, '-') IN ('Enhancement', 'New')
    )
); 
```

# android - 当 android spinner 为空时显示 toast 消息

> ID：13725319
> 
> 赞同：1
> 
> 时间：2012-12-05T14:21:47.147
> 
> 标签：android, android-spinner

我有一个从数据库填充的微调器。因此，如果在其中没有任何项目的情况下单击微调器，则会显示一个带有空列表项的微调器。我想避免在微调器为空时显示该微调器并显示一条 toast 消息。我有检查项目计数并显示 toast 消息的逻辑，但我找不到调用函数的位置。单击微调器并加载微调器项目时调用的事件是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:28:55.973

为什么不设置一个`onClickListener`？

```
Spinner s = (Spinner)findViewById(R.id.myspinner);
s.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        checkForItemCount();    //where you show your Toast if it's empty.
    }
}); 
```

**编辑：** 我想我没有完全涵盖你的问题，所以我自己尝试了一些代码。这完全适合你。

```
final Spinner s = (Spinner)findViewById(R.id.spinner1); // get reference
    ArrayList<String> mList = new ArrayList<String>();  //some list without items
    s.setAdapter(new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, mList));
    s.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_UP && mList.size() == 0) {
                toast("Empty"); //lazy method for toasting
                s.setPressed(false); //closes the spinner.
            }
            return true;
        }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:32:38.990

`Spinner`是 的子类`View`，因此，`View.setOnClickListener()`可用于更改`onClick()`单击时将调用的实现。您可以覆盖`onClick()`以检查 是否`Spinner`为空，然后显示`Toast`.

**更正：**

既然你不能`setOnClickListener`for `Spinner`，你可以使用这个[问题](https://stackoverflow.com/questions/3928071/android-setting-a-spinner-onclicklistener/8520801#8520801)中建议的解决方案（我在下面粘贴的内容）。

我们没有设置微调器的 OnClickListener，而是设置了 OnTouchListener 和 OnKeyListener。

```
spinner.setOnTouchListener(Spinner_OnTouch);
spinner.setOnKeyListener(Spinner_OnKey); 
```

和听众：

```
private View.OnTouchListener Spinner_OnTouch = new View.OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP) {
            doWhatYouWantHere();
        }
        return true;
    }
};
private static View.OnKeyListener Spinner_OnKey = new View.OnKeyListener() {
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
            doWhatYouWantHere();
            return true;
        } else {
            return false;
        }
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:29:05.837

如果这是您所要求的，这是选择项目时的功能。如需更多帮助，您需要发布代码。否则，我们不知道你在做什么

`spinner.setOnItemSelectedListener(new OnItemSelectedListener()`

# javascript - Android浏览器：以编程方式更改焦点输入值

> ID：13725329
> 
> 赞同：4
> 
> 时间：2012-12-05T14:22:07.157
> 
> 标签：javascript, android, jquery

我正在尝试对文本输入强制执行日期格式 (00/00/0000)

（输入有一个 maxlength="10" 并且验证是单独处理的）。

这是我使用的代码（jQuery）：

```
 $(function() {

            $('input').live('keydown keyup', function(e) {

                var str = $(this).val(), len = str.length;

                if (e.which != 8) { /* Backspace */

                    if (len == 2 || len == 5) {

                        str += '/';

                        $(this).val(str);
                    }   
                }
            });
        }); 
```

除了三星 Galaxy Tab 10.1 上的 Android 本机浏览器和 Dolphin 浏览器外，这在我测试的所有地方都可以正常工作

问题是您无法在输入值聚焦时更改输入值：一旦失去焦点，斜线就会出现在字符串的末尾。

此错误已记录：[http ://code.google.com/p/android/issues/detail?id=39569](http://code.google.com/p/android/issues/detail?id=39569)

当需要更新值时，一个有点笨拙的解决方案是失去并重新获得焦点，但这会让你每次都失去键盘。

关于我如何找到解决此错误的方法的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:27:34.080

你可以试试这个插件：

[http://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

并指定：

```
$("input").mask("99/99/9999"); 
```

我自己没有要测试的三星平板电脑。

# c# - 针对 iOS 的 Unity3D 中的 ProtocolBuffer

> ID：13725331
> 
> 赞同：1
> 
> 时间：2012-12-05T14:22:17.153
> 
> 标签：c#, ios, unity3d, protocol-buffers, protobuf-net

我正在尝试在针对设备的项目中使用 Marc Gravell 的[protobuf-net](http://code.google.com/p/protobuf-net/) `C#`协议缓冲区实现。`Unity3D``iOS`

我设法使用. `C#`_`MyFile.cs``MyFile.proto``protogen`

导入文件后`protobuf-net.dll`（我在 unity 文件夹中使用 dll），我可以成功反序列化以前序列化的文件（我正在从 python 代码进行序列化，一切正常）：

```
MyType myType;
using (var file = File.OpenRead("Assets/MyTypeBin")) 
{
  myType = ProtoBuf.Serializer.Deserialize<MyType>(file) ;
} 
```

上述解决方案在模拟器上运行良好，但在针对`iOS`设备（es.ipad）时失败。

我试图从 to 切换，`unity/protobuf-net.dll`但`CoreOnly/ios/protobuf-net.dll`最后一个它无法编译。似乎该`Deserialize`方法未在核心 dll 中声明：

> 错误 CS0117：`ProtoBuf.Serializer' does not contain a definition for` 反序列化'

我读过这篇[文章](http://www.frictionpointstudios.com/blog/2011/3/31/using-protobuf-net-serialization-in-unity-iphone.html)，但它似乎已经过时了。它指的是`protobuf-net`. 我希望在此期间有所改变。

我的问题是：

1.  是否可以使用`protobuf-net r602`定位`iOS`设备`Unity3D`

    > 创建要序列化/反序列化的模型类的库 dll（程序集）

    喜欢链接的博客文章中的建议吗？我想要一个更快的工作流程，可能直接导入项目内部`C#`生成的文件`protogen``Unity3D`

2.  如果是，如何？`dll`我需要参考哪些？使上述代码段在设备上再次工作的步骤是`iOS`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-26T18:06:57.757

我相信这是解决方案：

> 在 iOS 上，Apple 存在一个问题，即不允许在运行时进行 JIT 编译，这会阻止 protobuf 的使用。可以用 Environment.SetEnvironmentVariable("MONO_REFLECTION_SERIALIZER", "yes"); 在使用任何 protobuf 之前，但它仅适用于 .NET 4.6。（我在 3.5 上试过，关于 JIT 的错误仍然出现）

[https://github.com/5argon/protobuf-unity](https://github.com/5argon/protobuf-unity)

# asp.net-mvc - 使用 XMLHttpRequest 我将文件发送到 MVC 3 控制器方法。如何获取文件的内容？

> ID：13725334
> 
> 赞同：3
> 
> 时间：2012-12-05T14:22:20.013
> 
> 标签：asp.net-mvc, xmlhttprequest

我正在这样做：

```
 xhr.open('post', '/Fish/Create', true);
 xhr.send(file); 
```

这会产生一个命中我的控制器方法的 HTTP 帖子，并且文件的内容被发布到它（正如我在提琴手中看到的那样）。

如何从 Request 对象中获取内容？

对于奖励积分，我想知道您是否可以使用标头或获取 HttpPostedFileBase 对象。我可以做类似的事情`xhr.setRequestHeader("X-File-Name", "file");`，然后在控制器方法中接受`object file`，但我无法弄清楚文件是什么类型，或者它是否甚至从流中正确创建它。

我不能使用 FormData，因为 IE9 不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:40:16.293

`HttpPostedFileBase`在您的控制器操作中放置一个类型的参数，如下所示：

```
 public ActionResult PostFile(HttpPostedFileBase httpPostedFile)
 {
     var stream  = httpPostedFile.InputStream;
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-11T12:15:51.943

试试这个

```
public JsonResult UploadPure()
   {
     string fileName = Request.Headers["X-File-Name"];
     string fileType = Request.Headers["X-File-Type"];
     int fileSize = int.Parse(Request.Headers["X-File-Size"]);
     System.IO.Stream fileContent = Request.InputStream;
     System.IO.FileStream fileStream = System.IO.File.Create(Server.MapPath("~/") + fileName);
     fileContent.Seek(0, System.IO.SeekOrigin.Begin);
     fileContent.CopyTo(fileStream);
     fileStream.Dispose();

     return Json("Uploaded files");
 } 
```

它对我有用，更多信息 [http://ajeeshms.in/Blog/Article/1/upload-files-using-ajax-in-asp-mvc](http://ajeeshms.in/Blog/Article/1/upload-files-using-ajax-in-asp-mvc) 我希望它有帮助

# cocoa - 通过 NSView 打印 NSDocument 时如何自动旋转页面？

> ID：13725335
> 
> 赞同：0
> 
> 时间：2012-12-05T14:22:24.810
> 
> 标签：cocoa, printing

我有一个 NSDocument 后代，我想打印到单个页面 - 当页面宽于高时拉伸以适应并自动旋转。渲染视图根据内容确定其边界。rectForPage 只返回 [self bounds]; knowPageRange 设置 range.length = 1 和 range.location = 1 并返回 YES。使用下面的代码完成打印。

一切正常，除了自动旋转。在打印面板中，我看到了正确形状的预览（宽于高，正确的尺寸等），但是当我打印时，页面已安装，但在纵向模式下，不必要地缩小图像。如果我没有设置 printInfo.paperSize，它会自动旋转 OK，但不会缩放，而是会剪切图像。任何想法？

附加信息：打印面板中的“查看 PDF”在预览中显示页面确定。从预览打印，然后在预览的打印面板中显示*旋转*的图像以匹配纸张纵向方向（即：横向图像本身出现旋转）。这与我在打印面板中显示未旋转的情况不同。从预览的打印面板打印然后做正确的事情。

```
- (NSPrintOperation *)printOperationWithSettings:(NSDictionary *)printSettings error:(NSError **)outError {
    MindMapRenderingView *renderingView = [[MindMapRenderingView alloc] initWithMindMap:_mindMap 
                                                                          printJobTitle:[_mindMap singleLineTitle]];
    NSSize pageSize = [renderingView bounds].size;
    NSPrintOperation *printOperation = [NSPrintOperation printOperationWithView:renderingView
                                                                      printInfo:[self printInfo]];
    [renderingView release];

    NSPrintInfo* printInfo = [printOperation printInfo];
    [[printInfo dictionary] addEntriesFromDictionary:printSettings];

    if (isLandscape)
        [printInfo setOrientation:NSLandscapeOrientation];
    else
        [printInfo setOrientation:NSPortraitOrientation];

    [printInfo setPaperSize:pageSize];

    [printInfo setHorizontalPagination:NSFitPagination];
    [printInfo setVerticalPagination:NSFitPagination];

    return printOperation;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:43:06.160

还没有找到自动旋转的方法，但经过更多试验后，我想出了模仿预览打印风景 pdf 方式的解决方案：我旋转用于绘制输出的 NSView 的框架。在 drawRect 中：我还使用 NSAffineTransform 绘制旋转的输出。这给出了所需的结果。唯一的缺点是使用打印面板中的“查看 PDF”现在也会显示旋转的 pdf。

# c# - 在 C# Windows 窗体上创建输入框

> ID：13725337
> 
> 赞同：0
> 
> 时间：2012-12-05T14:22:26.443
> 
> 标签：c#, visual-studio-2010, inputbox

我有 ac# windows 窗体，如果填充的 arraylist 包含多个项目，我需要在其中显示一个弹出框，以便用户可以从该 arraylist 中选择一个项目。如果可能的话，我想避免为此创建一个单独的窗口窗体。是否可以创建一个保留在此表单上并且看起来类似于 messageBox 的输入框。主要问题是我需要停止此表单上的代码继续运行，直到用户从所谓的输入框中选择一个项目或取消或关闭输入框。然后，代码将使用用户在输入框中选择的数组列表中的值恢复，或者如果用户决定不从输入框中选择项目，它将跳出此代码序列并且不执行任何操作。我以前从来没有做过这样的事情，并且希望能提出最有效的方法来实现这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:16:01.110

当我过去这样做时，我只是创建一个带有 ListView 的小表单来填充数组项。添加“确定”和“取消”按钮。使用 OK 单击处理程序，将 Dialog Result 设置为 OK：

```
this.DialogResult = System.Windows.Forms.DialogResult.OK;
this.Close(); 
```

对取消按钮执行相同操作：

```
this.DialogResult = System.Windows.Forms.DialogResult.Cancel;
this.Close(); 
```

从您要显示表单调用的主代码中，`ShowDialog();`这将强制用户在继续之前完成与对话框的交互。这也会返回您之前设置的 DialogResult。

希望这可以帮助。

# python - 来自csv文件python的字典

> ID：13725338
> 
> 赞同：1
> 
> 时间：2012-12-05T14:22:26.653
> 
> 标签：python, dictionary

我已经阅读了一个 cvs 文件，我想根据我在该文件上的信息创建一个字典。我尝试使用类 csv.DictReader 来提出该建议，但它没有给我想要的结果。

现在我正在阅读这样的文件：

```
size_reader = csv.reader(f,dialect='excel-tab') 
```

结果是：

```
['chr1', '249250621']
['chr2', '243199373']
['chr3', '198022430']
['chr4', '191154276']
['chr5', '180915260'] 
```

我想用这种结构制作一本字典：

```
dict ['chr4'] = 191154276
dict ['chr5'] = 180915260
dict ['chr2'] = 243199373 
```

我尝试使用正则表达式将元素拆分为文件中的行，但没有成功，也许我在拆分函数中使用了错误的字符。您能否就如何分离元素和构建字典提出一些建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:27:01.717

只需将其直接转换为 dict：

```
 result = dict(size_reader) 
```

这会从您的 CVS 阅读器获取每两列结果，`size_reader`并将其用作 python 字典的键和值。

To convert each value to integers, you'd need to use a dict comprehension to process each value:

```
result = {k: int(v) for k, v in size_reader} 
```

# jquery - 我应该提交关于更改、焦点或都不使用 jQuery 下拉的 ajax 调用吗？

> ID：13725340
> 
> 赞同：1
> 
> 时间：2012-12-05T14:22:30.983
> 
> 标签：jquery, html

我有一个常规的选择列表。

```
<select name="pets">
    <option>Dog</select>
    <option>Cat</select>
</select> 
```

一旦选定的项目发生了变化，我需要产生一个 ajax 调用来更新一个值。我的问题是，如果用户使用键盘随机播放这些值，则更改事件会被触发一堆。因此意味着对服务器的许多 ajax 调用。这种方法对我来说似乎不合适。

如果我使用模糊或焦点，用户可以更改值，并且他们的下一次单击可以将他们带到单独的页面，永远不允许 ajax 请求完成。

我不确定处理这种情况的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:40:44.843

可能您可以使用`setInterval`并`clearInterval`稍微延迟您的 AJAX 调用，例如一秒钟，如果用户在那段时间内再次更改它，您清除之前的间隔，并设置一个新的间隔，等等。

如果选择看起来很稳定，那么您的 AJAX 调用就会发生。

有关如何使用这些方法的示例，请参见此处。[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:41:31.007

只有在用户不活动一段时间后才能进行 ajax 调用。

[示例](http://jsfiddle.net/XcDnU/)：

```
$(document).ready(function(){
    var timer;
    $('select').change(function(){
        var self = this;
        window.clearTimeout(timer);
        timer = window.setTimeout(function(){
            delayedOnChange.apply(self, arguments);
        }, 300);
    });
    var delayedOnChange = function() {
        console.log($(this).val());
        // ajax call here
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:51:18.457

On`.blur`将是您的最佳选择。大多数浏览器在执行同步 ajax 请求时会锁定直到请求完成。如果您不需要服务器页面和 jquery 之间的同步握手，那么无论如何您都不会使用它。

默认情况下，jquery 中的 ajax 请求是异步的，一旦你触发了你的请求，你就不必一直等待响应。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# api - 如何使用 Translate 扩展通过 api 编写翻译后的 MediaWiki 文章？

> ID：13725344
> 
> 赞同：2
> 
> 时间：2012-12-05T14:22:37.207
> 
> 标签：api, localization, internationalization, mediawiki, machine-translation

[我使用依赖于WikiMate](https://github.com/hamstar/Wikimate)的自编程 PHP 脚本通过其 API 将数百篇文章写入 MediaWiki（版本 1.20.2）。目前，这些文章只用英文写成。但是我想使用[Translate 扩展](http://www.mediawiki.org/wiki/Extension%3aTranslate)来翻译它们，所以我必须批准每篇文章进行翻译。

对于每篇文章，已经有一个英文和一个法文文档，那么是否有任何自动化方法可以使用 API 一次以英文（默认）和翻译文章（法文）编写文章？翻译应该与翻译扩展兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T22:50:30.457

您是什么意思“批准每篇文章进行翻译”？要执行“标记翻译”操作，添加 <!--T:1--> 标签？不幸的是，目前没有 Web API 可以做到这一点。

如果您非常确定两种语言的页面具有非常相似的结构，您可以尝试编写自己的脚本来逐块导入它们，但也没有聪明的内置选项。

如果您为此编写任何解决方案，您将非常高兴分享它们:)

（评论：我是翻译扩展的开发者之一。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T08:52:13.313

所以这就是我让事情发挥作用的方式。您可以将方法`execute()`从复制`SpecialPageTranslation.php`到您的自定义类。此方法会将文章标记为可翻译。只需通过实例化一个新`Title`对象，将所需文章的标题传递给它`$title = Title::newFromText( 'Title_of_my_article' );`。将引用的所有方法也复制`$this`到您的自定义类中。例如方法`$this->markForTranslation(..)`及其依赖项。

调用该`execute()`方法后，文章被标记为翻译，因此您可以提交翻译的文章。我只是通过为英文翻译的文章命名`Title_of_my_article/1/en`并`Title_of_my_article/en`使用默认的 MW API 提交它们来做到这一点。（请注意，`1/en`标记您提交的翻译部分，因此您将提交整篇文章作为翻译部分）

遗憾的是，Translate 扩展的文档记录很差，因此很难理解它是如何工作的。

# windows - 是否有任何参数可以控制 Windows 服务器上 CLOSE_WAIT 连接状态的超时？

> ID：13725345
> 
> 赞同：1
> 
> 时间：2012-12-05T14:22:42.210
> 
> 标签：windows, windows-7, tcp

我有很多**`CLOSE_WAIT`**连接**`Windows server`**，有没有什么好方法可以加快`CLOSE_WAIT`消失的速度，比如在注册表中配置一个参数？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:36:20.663

CLOSE_WAIT 不是超时条件。表示对端已关闭连接，主机正在等待本地应用程序关闭此端。换句话说，它表示应用程序错误：套接字泄漏。

# c# - 递归枚举器

> ID：13725348
> 
> 赞同：0
> 
> 时间：2012-12-05T14:22:52.923
> 
> 标签：c#, iterator, ienumerable, binary-search-tree, yield-return

我正在准备面试，所以作为练习，我已经实现了算法来检查二叉树是否是 BST。

```
 public static bool CheckBST(this Node root)
    {
        if (root == null) throw new ArgumentException("root");
        Node previous = null;
        foreach (var node in GetNodes(root))
        {
            if (previous != null && node.value <= previous.value)
            {
                return false;
            }
            previous = node;
        }
        return true;
    }

    private static IEnumerable<Node> GetNodes(Node root)
    {
        if (root.left != null)
        {
            foreach (var node in GetNodes(root.left))
            {
                yield return node;
            }
        }
        yield return root;
        if (root.right != null)
        {
            foreach (var node in GetNodes(root.right))
            {
                yield return node;
            }
        }
    } 
```

可以摆脱 foreach 循环（仍然使用递归和产量）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:28:03.480

不，不幸的是，没有办法做到这一点。
没有`yield return many GetNodes(...);`和混合这样的东西`yield return`，正常`return`也是不允许的。

但是，您可以使用 LINQ 获得所需的结果（延迟执行）：

```
private static IEnumerable<Node> GetNodes(Node root)
{
    var result = Enumerable.Empty<Node>();

    if (root.left != null)
        result = result.Concat(GetNodes(root.left));

    result = result.Concat(new [] { root });

    if (root.right != null)
        result = result.Concat(GetNodes(root.right));

    return result;
} 
```

这是否比你目前拥有的更好是值得商榷的。

# border - 虚线边框的 CSS 边框半径

> ID：13725351
> 
> 赞同：2
> 
> 时间：2012-12-05T14:22:53.553
> 
> 标签：border, css

![它在你的屏幕上是这样冷却的吗？](../Images/409d8f45b06eaabc87764b29f96677c0.png)![这是截图](../Images/20d1fd541efed5b3563c36385a749504.png)我正在使用带圆角的虚线边框，但我遇到了问题。边角的颜色比侧边的颜色深。我希望所有人都具有相同的颜色。

如果您看到我的代码的输出，那么您就可以理解问题所在。这是我的代码：

```
<form action="checklogin.php" method="post">
    <table style="border:1px dotted #0000ff;-moz-border-radius:7px;
        -webkit-border-radius:7px;border-radius:7px;" align="center">
        <caption><b>Admin Login</b></caption>
        <tr>
            <td>Username : </td>
            <td><input name="username" id="username" type="text" /></td>
        </tr>
        <tr>
            <td>Password : </td>
            <td><input name="password" id="password" type="password" /></td>
        </tr>
        <tr>
            <td></td>
            <td><input name="submit" id="submit" type="submit" value="Log in" /></td>
        </tr>
    </table>
</form> 
```

请告诉我该如何解决。

谢谢。

[已解决**：**非常感谢大家的友好回复。]

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:47:46.530

实心角是 Firefox（和其他基于 Gecko 的浏览器）的限制。[MDN 说](https://developer.mozilla.org/en-US/docs/CSS/border-radius)：

> 虚线圆角在 Gecko 中呈现为实线；请参阅[错误 382721](https://bugzilla.mozilla.org/show_bug.cgi?id=382721)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T14:38:09.733

为什么不喜欢

```
<form action="checklogin.php" method="post" style="display:block;border:1px dotted #0000ff;-moz-border-radius:7px;-webkit-border-radius:7px;border-radius:10px; width:200px; padding:10px; margin-left:auto; margin-right:auto;"  >
<h2 style="text-align:center; font-weight:bold">Admin Login</h2>
<labe for="username">Username : </label>
<input name="username" id="username" type="text"/>
<labe for="password">Password : </label>
<input name="password" id="password" type="password" />
<input name="submit" id="submit" type="submit" value="Log in" style="display:block" />
</form>​ 
```

您将避免使用表格，并且对于用户而言，在输入顶部而不是左侧处理标签更容易。你可以在这里查看[jsfiddle](http://jsfiddle.net/CvRQJ/)

# wxpython - 默认情况下在 wxpython 中隐藏 TextCtrl

> ID：13725352
> 
> 赞同：0
> 
> 时间：2012-12-05T14:23:27.043
> 
> 标签：wxpython

我想要一个放置在水平框内的 textctrl。我使用以下代码制作了这个自动取款机：

self.myTextCtrl = wx.TextCtrl（面板，-1，“bleh”）

self.vbox.Add(self.myTextCtrl, ratio = 1)

此代码在屏幕上打印我的标签。

但是，我在其上方有一个单选按钮（默认为 false），当我将其设置为 true 时，我希望显示该框。我试图调用 self.myTextCtrl.Hide()

（隐藏发生在单选按钮切换触发的事件中）

但这导致 textctrl 以后无法加载...

Some1 告诉我这与 wxpython 编译您的程序有关，因为您禁用了该框，但我无法在网上找到相关信息。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:03:31.750

我举了一个快速而肮脏的例子。单选按钮一旦设置为 True 就不能“取消选中”，除非您在组中使用它们，所以我也包含了一个使用 CheckBox 小部件的示例。我还添加了一个空白文本控件，因为它需要在不触发其他小部件事件的情况下接受焦点：

```
import wx

########################################################################
class MyPanel(wx.Panel):
    """"""

    #----------------------------------------------------------------------
    def __init__(self, parent):
        """Constructor"""
        wx.Panel.__init__(self, parent)

        txt = wx.TextCtrl(self)
        radio1 = wx.RadioButton( self, -1, " Radio1 ")
        radio1.Bind(wx.EVT_RADIOBUTTON, self.onRadioButton)
        self.hiddenText = wx.TextCtrl(self)
        self.hiddenText.Hide()

        self.checkBtn = wx.CheckBox(self)
        self.checkBtn.Bind(wx.EVT_CHECKBOX, self.onCheckBox)
        self.hiddenText2 = wx.TextCtrl(self)
        self.hiddenText2.Hide()

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(txt, 0, wx.ALL, 5)
        sizer.Add(radio1, 0, wx.ALL, 5)
        sizer.Add(self.hiddenText, 0, wx.ALL, 5)
        sizer.Add(self.checkBtn, 0, wx.ALL, 5)
        sizer.Add(self.hiddenText2, 0, wx.ALL, 5)
        self.SetSizer(sizer)

    #----------------------------------------------------------------------
    def onRadioButton(self, event):
        """"""
        print "in onRadioButton"
        self.hiddenText.Show()
        self.Layout()

    #----------------------------------------------------------------------
    def onCheckBox(self, event):
        """"""
        print "in onCheckBox"
        state = event.IsChecked()
        if state:
            self.hiddenText2.Show()
        else:
            self.hiddenText2.Hide()
        self.Layout()

########################################################################
class MyFrame(wx.Frame):
    """"""

    #----------------------------------------------------------------------
    def __init__(self):
        """Constructor"""
        wx.Frame.__init__(self, None, title="Radios and Text")
        panel = MyPanel(self)
        self.Show()

if __name__ == "__main__":
    app = wx.App(False)
    f = MyFrame()
    app.MainLoop() 
```

# node.js - MongoDB nodejs驱动程序不返回超过100000行

> ID：13725354
> 
> 赞同：2
> 
> 时间：2012-12-05T14:23:34.533
> 
> 标签：node.js, mongodb, node-mongodb-native

这是复制我的问题的示例：

我用 100 万个这样的文档填充我的集合：

```
for(i=1; i<=1000000; i++){
if(i%3===0)
     db.numbers.insert({_id:i, stuff:"Some data", signUpDate: new Date()});
else
     db.numbers.insert({_id:i, stuff:"Some data"});
} 
```

因此，每个第三个文档都有一个 signUpDate

我创建以下索引：

```
db.numbers.ensureIndex({"signUpDate" : 1}); 
```

然后，我有以下使用 nodejs 的非常小的应用程序：

```
var Db = require('mongodb').Db
, Connection = require('mongodb').Connection
, Server = require('mongodb').Server
, format = require('util').format;

var host = 'localhost';
var port = Connection.DEFAULT_PORT;

console.log("Connecting to " + host + ":" + port);

Db.connect(format("mongodb://%s:%s/test?w=1", host, port), function(err, db) {
        var collection = db.collection('numbers');

        collection.find({'signedUp': true}, {'_id':1}).limit(100000).toArray(function(err, docs){
                console.log(docs.length)
        });
}); 
```

这工作正常。

但是，如果我删除 `.limit(100000)`，服务器会坐在那里并且从不响应。

简而言之，我要做的就是返回一个_id列表，其中signUpDate不为空（应该有大约333,000）

我很确定问题出在 mongodb 缓存的方式上，但我不确定如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:21:58.207

您不应该调用`toArray`这样的大型结果集。相反，要么：

使用 迭代结果[`each`](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html#each)：

```
collection.find({'signedUp': true}, {'_id':1}).each(function(err, doc){
    if (doc) {
        console.log(doc);
    } else {
        console.log('All done!');
    }
}); 
```

或[流式传输](http://mongodb.github.com/node-mongodb-native/api-generated/cursor.html#stream)结果：

```
var stream = collection.find({'signedUp': true}, {'_id':1}).stream();
stream.on('data', function(doc) {
    console.log(doc);
});
stream.on('close', function() {
    console.log('All done!');
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T15:23:23.253

您需要设置批量大小，然后流式传输或迭代结果，否则 mongo 驱动程序会将所有内容都粘贴到内存中。

还有`{'_id':1}`一股腥味，应该是`{fields: {'_id' : 1}}`

因此，您的结果将是：

```
collection.find({'signedUp': true}, {batchSize: 1000, fields: {'_id' : 1}}).each(function(err, item) { 
    do something with item
}); 
```

# javascript - 应用 jquery 插件后的成功函数（tag-it）

> ID：13725362
> 
> 赞同：1
> 
> 时间：2012-12-05T14:23:50.047
> 
> 标签：javascript, jquery, jquery-plugins, tag-it

我想知道在应用插件后有什么方法可以进行一些操作例如，

```
$("#mytags").tagit({
    tagSource: function (request, response) {

    }
}); 
```

我想要这样的东西：

```
$("#mytags").tagit({
    tagSource: function (request, response) {

    }
}, function(){
        $(#test).remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-07T17:31:03.220

我仔细查看了插件的源代码，它没有提供这样的回调。我和你一样需要。就我而言，它没有导入所需的属性，因此所需的消息在页面上似乎完全丢失了。我做了一个猴子补丁。它并不完美，但解决了我的问题。我会尝试将此回调添加到 tag-it 并将其发送到 github。无论如何，这是我的肮脏修复：

```
 var temp = setInterval(function()
       {
            if( $('.ui-widget-content.ui-autocomplete-input').length > 0 )
            {
                clearInterval(temp);
                $('.ui-widget-content.ui-autocomplete-input').doSomething();
            }
       }, 500); 
```

**编辑：**更好的解决方案。正如我刚才所说。我对代码进行了更改，并将其发送到主分支，您可以在此处查看我的插件版本：[https ://github.com/kalkehcoisa/tag-it/blob/master/js/tag- it.js](https://github.com/kalkehcoisa/tag-it/blob/master/js/tag-it.js) 它有一个回调“afterCreated”，当 tagit 完成应用时触发。如何使用它的一个例子：

```
 $('#singleFieldTags').tagit({
            availableTags: sampleTags,
            singleFieldNode: $('#mySingleField'),
    afterCreated: function(){ alert( 'test' ); },
        }); 
```

我希望这有帮助。;)

嘿！tag-it 首席开发人员就我的拉取请求回答了我 ( [https://github.com/aehlke/tag-it/pull/215#issuecomment-26191461 )。](https://github.com/aehlke/tag-it/pull/215#issuecomment-26191461)事情远比我们想象的要简单：

> 您只需要 $('#myWidget').('create', function (event) { /* ... */ }); 在 jQuery UI 中是标准的。也许文档中的一个例子是必要的......

发展和学习！;P

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-05T14:48:08.673

您需要为适当的事件发现插件 API。如果你使用[这个](http://aehlke.github.com/tag-it/)，它有这样的事件：`afterTagAdded (function, Callback)`.

阅读[文档](https://github.com/aehlke/tag-it/blob/master/README.markdown)以了解如何使用。

# jquery-animate - 添加类并在单击时执行动画，再次单击时反转

> ID：13725364
> 
> 赞同：1
> 
> 时间：2012-12-05T14:23:58.967
> 
> 标签：jquery-animate, toggle, removeclass

我有一个最初隐藏的 wrap 元素。单击隐藏元素后，需要添加一个可见类，然后才能在另一个元素上执行切换动画。然后再次单击，动画元素需要切换它的动画，然后从包装中删除所述类。

这是我到目前为止所拥有的。初始点击执行良好。添加类，并执行动画。但是再次单击时，动画会正确执行，但是一旦完成，该类就不会被删除。

```
$(document).ready(function () { 
$('.search-btn').click(function() {
    if ($('.search-form-wrap').hasClass('hidden')) {
        $('.search-form-wrap').addClass('visible', function() {
            $('.search-form').blindLeftToggle('slow'); 
        });
    }
    else {
        $('.search-form').blindLeftToggle('slow', function() {
            $('.search-form-wrap').removeClass('visible'); 
        });
    }
});
}); 
```

这似乎基于 Blazemonger 的代码工作，并添加了`$('.search-form-wrap').hide();`

```
$(document).ready(function () { 
$('.search-form-wrap').hide();
$('.search-btn').click(function() {
    if ($('.search-form-wrap').is(':hidden')) {
        $('.search-btn').toggleClass('active'); 
        $('.search-form-wrap').show();
        $('.search-form').blindLeftToggle('slow'); 
    } else {
        $('.search-form').blindLeftToggle('slow', function() {
            $('.search-form-wrap').hide();
        });
    }
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:27:47.070

那是因为你正在测试它是否`.hasClass('hidden')`。如果您要添加/删除`visible`该类，则需要测试它是否是`.not('.visible')`。

**更新**

但是，如果您的意思是要在不使用类的情况下测试元素是隐藏还是可见，请使用`:hidden`and`:visible`选择器而不是类：

```
$(document).ready(function () { 
    $('.search-btn').click(function() {
        if ($('.search-form-wrap').is(':hidden')) {
            $('.search-form-wrap').show();
            $('.search-form').blindLeftToggle('slow'); 
        } else {
            $('.search-form').blindLeftToggle('slow', function() {
                $('.search-form-wrap').hide();
            });
        }
    });
}); 
```

# c# - 当 ComboBox 选定索引更改时刷新 Windows 窗体 DataGridView

> ID：13725365
> 
> 赞同：1
> 
> 时间：2012-12-05T14:24:02.547
> 
> 标签：c#, .net, winforms, .net-4.0, datagridview

我有一个 Windows 窗体 DataGridView，它显示了已注册班级的学生列表。DataGridView 中的组合框列显示学生可以移动到的替代课程的列表。

如果用户使用组合框选择不同的类，然后在 DataGridView 中选择不同的行，则刚刚编辑的行将从 DataGridView 中删除 - 正确，因为它不再符合条件。

我的问题是，当用户从组合框中选择新值时，我需要发生这种情况，而无需等待用户选择另一行。原因是，如果在用户选择另一行之前未删除该行，则这些行会向上移动以填补被删除行留下的空白，使当前选择的行低于用户选择的行，这可能会造成混淆用户。

我已经尝试调用 DataGridView 的 Refresh 方法，但是在用户选择另一行之前，编辑的行仍然不会被删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:30:16.843

`myGrid.EndEdit();`在组合选择的索引更改后尝试将更改发布到网格。

您可能还需要更改当前单元格以强制更新：

```
DataGridViewCell currentCell = myGrid.CurrentCell;
try {             
    myGrid.EndEdit();
    myGrid.CurrentCell = null;
    myGrid.CurrentCell = currentCell;
}
catch {
    myGrid.CurrentCell = currentCell;
    myGrid.CurrentCell.Selected = true; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:05:36.463

最终解决了这个问题：我没有直接使用过滤后的 DataView 作为 DataGridView 的 DataSource，而是使用 DataView.ToTable() 方法获取一个仅包含过滤记录的 DataTable，并将其用作 DataGridView 的 DataSource。As the DataGridView is no longer bound to the filtered DataView, the changed rows are no longer removed from the DataGridView when the selection changes. 当用户单击“保存”按钮时，我将 DataTable 合并回原始 DataSet，保存更改，然后再次调用 DataView.ToTable() 方法并将 DataGridView 重新绑定到 DataTable 以删除更改的记录。感谢我的同事迈克尔的建议，感谢迈克尔。

# javascript - onclick 事件未触发

> ID：13725366
> 
> 赞同：2
> 
> 时间：2012-12-05T14:24:17.783
> 
> 标签：javascript

代码：

单击时不执行相应的功能

```
<body onload="initialize('2.44','12.331')" onunload="triggerUnLoad()">
        <select>
            <option onclick="initialize('2.44331','2.442211')">-sel places-</option>
            <option onclick="initialize('1.2','1.8')">china</option>
            <option onclick="initialize('1.3','1.2')">brazil</option>        
            <option onclick="initialize('1.4','13.3')">australia</option>
        </select> 
```

`Onclick`功能不工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:28:43.290

`<option>`在某些浏览器中，元素没有点击事件。相反，您应该为元素使用`change`事件：`<select>`

```
<select onchange="initialize.apply(null, this.value.split(','));">
    <option value="2.44331,2.442211">-sel places-</option>
    <option value="1.2,1.8">china</option>
    <option value="1.3,1.2">brazil</option>        
    <option value="1.4,13.3">australia</option>
</select> 
```

**演示：http:** [//jsfiddle.net/SgFKj/](http://jsfiddle.net/SgFKj/)

# android - Facebook - android 上的无摩擦请求

> ID：13725367
> 
> 赞同：4
> 
> 时间：2012-12-05T14:24:20.010
> 
> 标签：android, facebook

有没有办法告诉 facebook android SDK 在用户->用户应用程序请求上发送无摩擦请求？

我按照[facebook 网站](https://developers.facebook.com/docs/mobile/android/build/)上的教程在 android 上集成了一个应用程序。有一些关于如何使用 发送 facebook [user->user 请求](https://developers.facebook.com/docs/mobile/android/build/)的文档`mFacebook.dialog(context, "apprequests", params, new AppRequestsListener());`，但没有提到如何使这些请求顺畅。在网络上，该`frictionlessRequests:true`选项[似乎可以解决问题](http://developers.facebook.com/docs/reference/dialogs/requests/)。我尝试将其设置为调用的参数`mFacebook.dialog()`（使用 params 参考），但这没有帮助。facebook 请求对话框[文档页面](http://developers.facebook.com/docs/reference/dialogs/requests/)声称此功能在 android 上可用。没有任何地方提到如何启用它。

> 桌面画布和移动 Web 上的 Javascript SDK 以及原生移动应用程序上的 iOS 和 android SDK 支持无摩擦请求。

是否有可用于 android 的等效调用，以便用户在请求对话框中看到“不再询问”（见下图）选项？现在，即使之前发送了请求，每次都会显示请求对话框。

![无摩擦请求](../Images/0384b17b373a6763d383b791c707a8df.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T15:43:29.697

我今天也在为同样的事情而苦苦挣扎。我终于找到了一种适合我的方法。我正在使用 sdk 3.0.2b，我按照这里的指南[https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/](https://developers.facebook.com/docs/howtos/androidsdk/3.0/send-requests/)

在第 2 步中，指南建议使用以下代码：

```
private void sendRequestDialog() {
   Bundle params = new Bundle();
   params.putString("message", "Learn how to make your Android apps social");
   WebDialog requestsDialog = (
   ... 
```

经过大量的试验和错误添加参数摩擦 = 1 为我工作：

```
private void sendRequestDialog() {
   Bundle params = new Bundle();
   params.putString("message", "Learn how to make your Android apps social");

   params.putString("frictionless", "1"); //Turn on frictionless

   WebDialog requestsDialog = (
   ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T12:31:39.953

在捆绑包中使用无摩擦的“参数”，但也应该提供参数“to”然后它才能工作。实际上我在这两种情况下都使用了，当我传递“to”参数时，“不要再问”没有显示。但是当与“to”参数一起使用时，它的工作原理。

```
 Bundle params = new Bundle();
        params.putString("message", msg);
        params.putString("data", json);
        params.putString("title", title);
        params.putString("frictionless", "1"); 
```

在上面的代码中它不起作用。但在下面的代码中它正在工作。

```
 Bundle params = new Bundle();
        params.putString("message", msg);
        params.putString("data", json);
        params.putString("to", appendedFriendsID);
        params.putString("title", title);
        params.putString("redirect_uri", "");
        params.putString("frictionless", "1"); 
```

# java - scanNextInt() 忽略空行

> ID：13725368
> 
> 赞同：0
> 
> 时间：2012-12-05T14:24:25.160
> 
> 标签：java

我使用这段代码：

```
public String processFile(Scanner scanner) {
    String result = "";
    SumProcessor a = new SumProcessor();
    AverageProcessor b = new AverageProcessor();
    String line = null;
    while (scanner.hasNext()) {

        if (scanner.hasNext("avg") == true) {

            c = scanner.next("avg");
           while(scanner.hasNextInt()){

                int j = scanner.nextInt();
                a.processNumber(j);
            }
           System.out.println("Exit a");
            result += a.getResult();
            a.reset();
        }
        if (scanner.hasNext("sum") == true) {

            c = scanner.next("sum");
           while(scanner.hasNextInt()){

          int j = scanner.nextInt();
                b.processNumber(j);                    
            }
            System.out.println("Exit b");
             result += b.getResult();
             b.reset();
        }

    }
    return result;
} 
```

当我按下回车或发送空行时，我需要在循环（hasNexInt（））时结束。

我尝试使用 String == null 等的一些方法，但 Java 只是 IGNORE 空行

**输出**

```
run:
avg
1
2
3
4

sum
Exit a
1
2
3
4 
```

**但是我需要 ：**

```
run:
avg
1
2
3
4

Exit a
sum    
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:28:42.120

只需使用类似的东西：

```
String line = null;
while(!(line = keyboard.nextLine()).isEmpty()) {
// Your actions
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:30:55.333

`hasNextInt()`在第二个`while`循环中使用。当您不传递`int`值时，while 循环将中断。

或者您也可以确定一个特定的值，您可以传递该值来打破循环。例如，您可以传递字符`'x'`，然后检查是否传递了 'x' -> 中断循环。

```
while (scanner.hasNext()) {
        if (scanner.hasNext("avg") == true) {

            c = scanner.next("avg");
           while (scanner.hasNextInt()){ //THIS IS WHERE YOU USE hasNextInt()                       
                int j = scanner.scanNextInt();
                a.processNumber(j);
            }
           System.out.println("End While");
            result += a.getResult();
            a.reset();
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:36:44.270

如果在您的应用程序中使用 Scanner 不是绝对必须的，我可以提供：

```
BufferedReader rdr = new BufferedReader(new InputStreamReader(System.in));
for(;;) {
    String lile = rdr.readLine();
    if (lile.trim().isEmpty()) {
        break;
    }
    // process your line
} 
```

此代码肯定会在控制台的空行上停止。现在您可以使用 Scanner 进行行处理或正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:29:23.107

只需添加`scanner.nextLine()`以忽略该行中的其余条目：

```
 while (scanner.hasNextLine()){
                String line = scanner.nextLine();
                if("".equals(line)){
                   //exit out of the loop
                   break;
                }
                //assuming only one int in each line
                int j = Integer.parseInt(line);
                a.processNumber(j);
            } 
```

# nhibernate - 如何使用 NHibernate.Search 和 Lucene.Net 搜索文件内容

> ID：13725373
> 
> 赞同：0
> 
> 时间：2012-12-05T14:24:33.200
> 
> 标签：nhibernate, search, lucene.net, nhibernate.search

我已经将 Lucene.net 和 nhibernate.search 集成在一起。我有一个包含文件路径的域对象，该文件路径指向磁盘上的一个文件，该文件具有文件内容。如何使用 Lucene.Net/nhibernate.search 搜索已保存文件的文件内容？

每次我保存/删除/更新域对象时，我的索引都会被一些侦听器自动更改。

```
[Indexed]
public class Book {
    private int id;
    private string name;
    private string filename;

    public Book() {
    }

    public Book(int id,string name, string filename) {
        this.id = id;
        this.name = name;
        this.filename = filename;
    }

    [DocumentId]
    public virtual int Id {
        get { return id; }
        set { id = value; }
    }

    [Field(Index.Tokenized, Store = Store.Yes)]
    public virtual string Name {
        get { return name; }
        set { name = value; }
    }  

    [Field(Index.Tokenized, Store = Store.Yes)]
    public virtual string FileName {
        get { return filename; }
        set { filename = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:40:50.087

您必须首先使用 Lucene.Net 索引该文件内容

# git - PHPStorm 和其他 JetBrains IDE：如何更改默认 git 颜色？

> ID：13725376
> 
> 赞同：4
> 
> 时间：2012-12-05T14:24:41.340
> 
> 标签：git, version-control, phpstorm

我目前正在使用[PHPStorm 6 EAP 构建](http://blog.jetbrains.com/webide/2012/12/phpstorm-webstorm-6-eap-build-123-66/)和 git，但是对于使用其他 JetBrains IDE 或不同版本控制系统的人来说，回答这个问题可能很有用。

如何更改选项卡和项目文件窗口中的默认 git 颜色？我切换到“Darcula”IDE 主题，现在我通常看不到文件名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T14:43:37.627

设置 | 编辑 | 颜色和字体 | 文件状态

# html - 添加一个颜色块作为 项目项目符号

> ID：13725384
> 
> 赞同：1
> 
> 时间：2012-12-05T14:25:19.720
> 
> 标签：html, css

我想将无序列表中的项目符号点更改为扩展列表项整个深度的颜色块，即使列表项包含多行也是如此。单个列表项的所有换行都需要缩进相同的深度。

我正在寻找的最终效果是列表一侧的一条长彩色线

目前我使用的图像设置为与单个列表行相同的深度，但这显然不包括多行。它还在它们之间放置了一个小换行符，如果列表项换行，则换行的文本位于项目符号下方

这是我当前的 css

```
.content-main ul li {
  line-height: 1em;
  float:left;
  text-align:left;
  vertical-align:text-bottom;
  display:list-item;
  list-style-image: url('images/bullet.gif');
  list-style-position:inside;
} 
```

对此表示感谢的任何指示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:30:02.453

您必须切换到容器 ( `div, span`) 或类似的东西。

```
<div>
  first
  <div>
     second
     <div>
     third 
     </div>
  </div>
</div> 
```

CSS：

div {border-left:1px 纯红色}

这将生成从项目到列表末尾的行。

请参阅我的 JSFiddle 示例[http://jsfiddle.net/G82eQ/](http://jsfiddle.net/G82eQ/)

编辑：再次阅读您的帖子，只为每个项目显示一行 - 导致列表左侧有一长行，请参阅[http://jsfiddle.net/vENx3/](http://jsfiddle.net/vENx3/)

# php - Kirby CMS，如何使用 PHP 从对象中获取第一张图像？

> ID：13725385
> 
> 赞同：2
> 
> 时间：2012-12-05T14:25:21.243
> 
> 标签：php, arrays, object, slice, kirby

我目前正在尝试使用[Kirby CMS](http://getkirby.com)的一些东西。

现在我正在尝试用一些图片构建一个简单的博客，我想要实现的是，博客文章中的第一张也是唯一的第一张图片，与文章的简短摘录一起显示在文章概述中.

所以我使用了 kirby 的 $page->images() 函数，它为我提供了帖子中所有图片的 url。但我只想要第一张照片！因为我找不到任何记录的选项来使用 kirby 函数执行此操作，所以我尝试在 php 中执行此操作。

我发现了什么：

-kirby 返回一个对象。
-我找不到任何 php 方法从对象中切出某些东西，所以我尝试将其转换为数组：

```
$pictureArray = (array) $article->images(); 
```

- 然后我尝试使用 array_slice，它返回了奇怪的结果，所以我仔细查看了我的数组。print_r($pictureArray); 返回这个：

```
Array ( [pagination] => [_] => Array ( [test.jpg] => image Object ( [meta] => Array ( ) [_] => Array ( [name] => test [filename] => test.jpg [extension] => jpg [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/test.jpg [uri] => content/01-articles/02-zweiter-Eintrag/test.jpg [parent] => files Object ( [pagination] => [_] => Array ( [article.txt] => variables Object ( [meta] => Array ( ) [_] => Array ( [name] => article [filename] => article.txt [extension] => txt [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/article.txt [uri] => content/01-articles/02-zweiter-Eintrag/article.txt [parent] => files Object *RECURSION* [modified] => 1354712997 [type] => content [variables] => Array ( [title] => Der zweite Eintrag [description] => Zusammenfassung. [published] => 18.12.2012 [tags] => Image, Article [text] => Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. (image: test.jpg) (image: test2.jpg) ) [filecontent] => Title: Der zweite Eintrag ---- Description: Zusammenfassung. ---- Published: 18.12.2012 ---- Tags: Image, Article ---- Text: Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. (image: test.jpg) (image: test2.jpg) [languageCode] => en [template] => article ) ) [test.jpg] => image Object *RECURSION* [test2.jpg] => image Object ( [meta] => Array ( ) [_] => Array ( [name] => test2 [filename] => test2.jpg [extension] => jpg [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/test2.jpg [uri] => content/01-articles/02-zweiter-Eintrag/test2.jpg [parent] => files Object *RECURSION* [modified] => 1354713013 [type] => image [thumb] => image Object *RECURSION* [title] => test2 ) ) ) ) [modified] => 1354712200 [type] => image [thumb] => image Object *RECURSION* [title] => test ) ) [test2.jpg] => image Object ( [meta] => Array ( ) [_] => Array ( [name] => test2 [filename] => test2.jpg [extension] => jpg [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/test2.jpg [uri] => content/01-articles/02-zweiter-Eintrag/test2.jpg [parent] => files Object ( [pagination] => [_] => Array ( [article.txt] => variables Object ( [meta] => Array ( ) [_] => Array ( [name] => article [filename] => article.txt [extension] => txt [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/article.txt [uri] => content/01-articles/02-zweiter-Eintrag/article.txt [parent] => files Object *RECURSION* [modified] => 1354712997 [type] => content [variables] => Array ( [title] => Der zweite Eintrag [description] => Zusammenfassung. [published] => 18.12.2012 [tags] => Image, Article [text] => Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. (image: test.jpg) (image: test2.jpg) ) [filecontent] => Title: Der zweite Eintrag ---- Description: Zusammenfassung. ---- Published: 18.12.2012 ---- Tags: Image, Article ---- Text: Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. (image: test.jpg) (image: test2.jpg) [languageCode] => en [template] => article ) ) [test.jpg] => image Object ( [meta] => Array ( ) [_] => Array ( [name] => test [filename] => test.jpg [extension] => jpg [root] => /home/exampledbq/www.example.com/kirby/content/01-articles/02-zweiter-Eintrag/test.jpg [uri] => content/01-articles/02-zweiter-Eintrag/test.jpg [parent] => files Object *RECURSION* [modified] => 1354712200 [type] => image [thumb] => image Object *RECURSION* [title] => test ) ) [test2.jpg] => image Object *RECURSION* ) ) [modified] => 1354713013 [type] => image [thumb] => image Object *RECURSION* [title] => test2 ) ) ) ) 
```

有谁知道这是什么吗？我的意思是图片网址在那里，但是这些东西到底是从哪里来的？当我尝试回显 $page->images() 函数时，它只返回图像 url 而不是整篇文章。

有人可以帮忙吗？也许甚至可以通过仅 kirby 函数而不是 php 来实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:22:58.337

看看[柯比备忘](http://getkirby.com/blog/cheat-sheet)单就会发现：你可以像在 jquery 中一样链接它......

```
$page->images()->first() 
```

看看 [http://getkirby.com/blog/cheat-sheet](http://getkirby.com/blog/cheat-sheet)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:59:46.623

我从未使用过 Kirby，但我在[https://github.com/bastianallgeier/kirbycms](https://github.com/bastianallgeier/kirbycms)快速查看了它的源代码。

大多数对象，包括`image`对象，都扩展了一个泛型`obj`类，该类实现了[Iterator 接口](http://php.net/manual/en/class.iterator.php)。

这意味着您可以使用`foreach`, `reset`,`current`等对它们进行迭代`next`。

除此之外，`obj`该类包含一个`toArray`方法，这意味着它可以安全地转换为数组，就像您在代码中所做的那样。

因此，要拍摄第一张图像，您只需执行以下操作：

```
$pictureArray = (array) $article->images();
$firstImage = $pictureArray[0]; 
```

获得`image`对象后，您可以使用以下方法获取图像 url `url()`：

```
<img src="<?php echo $image->url(); ?>"> 
```

看看[http://getkirby.com](http://getkirby.com)网站。它似乎有据可查。

# php - Add innerhtml to top links

> ID：13725393
> 
> 赞同：1
> 
> 时间：2012-12-05T14:25:53.977
> 
> 标签：php, html, magento, innerhtml, magento-1.7

I am trying to add a small innerhtml function to the top links of Magento. Instead of the default text links, I have hidden the texts ('My account', 'My wishlist', 'My cart', 'login/register') and given them images.

See the image below.

![innerhtml-on-toplink-hover](../Images/6a51f6711caf816deebca649bd8b061c.png)

What I'm trying to do is, that when you hover over one of the top links buttons, you get the appropriate label/name of that top link somewhere in a div next to the buttons. So if you hover over the 'My cart' link/button, you get to see the text 'My cart' in that corresponding div.

The technical issue is *not* the innerhtml part, because I know how innerhtml works. My question is: **Where and how do I implement the pieces of innerhtml code so that it works correctly for all the 4 toplinks?**

(Basically, it doesn't really matter that these text links are made into image links, but this is so you won't ask yourself "why would he want to do that?".)

* * *

What I've tried is to add the parts to

*mystore\app\design\frontend\base\default\template\page\template\links.phtml*

or (never both)

*mystore\app\design\frontend\base\default\template\page\template\linksblock.phtml*. I used the following code pieces:

`<script type="text/javascript"> function changeDescription(content) { document.getElementById('description').innerHTML = content; } </script>`

`<a href="#" onmouseover="changeDescription('<?php echo $this->getTitle() ?>')"> <!-- I also tried getLabel() instead of getTitle() -->`

`<div id="description"> lorem ipsum </div>`

And tried put in different places in those files (separately), but wherever I place the code, it messes up the `<ul>` list and its list items.

* * *

p.s. these 'buttons' are f*ugly, I know. It's just temporarily ;)

* * *

**Edit:**

My best try (amongst other different things I), probably, was to put it in links.phtml like this:

```
<script type="text/javascript"> function changeDescription(content) { document.getElementById('description').innerHTML = content; } </script>
<div id="description"> lorem ipsum </div>
<?php $_links = $this->getLinks(); ?>
<?php if(count($_links)>0): ?>
<ul class="links"<?php if($this->getName()): ?> id="<?php echo $this->getName() ?>"<?php endif;?>>
    <?php foreach($_links as $_link): ?>
    <a href="#" title="<?php echo htmlspecialchars($this->getLabel()); ?>" onmouseover="changeDescription(this.title)">
        <?php if ($_link instanceof Mage_Core_Block_Abstract):?>
            <?php echo $_link->toHtml() ?>
        <?php else: ?>
            <li<?php if($_link->getIsFirst()||$_link->getIsLast()): ?> class="<?php if($_link->getIsFirst()): ?>first<?php endif; ?><?php if($_link->getIsLast()): ?> last<?php endif; ?>"<?php endif; ?> <?php echo $_link->getLiParams() ?>><?php echo $_link->getBeforeText() ?><a href="<?php echo $_link->getUrl() ?>" title="<?php echo $_link->getTitle() ?>" <?php echo $_link->getAParams() ?>><?php echo $_link->getLabel() ?></a><?php echo $_link->getAfterText() ?></li>
       <?php endif;?>
       </a>
    <?php endforeach; ?>
</ul>
<?php endif; ?> 
```

but to no avail. Whatever I do, it messes up the structure of the contents of the `<ul>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:31:04.547

为什么不简单：

```
<a href="#"
    title="<?php echo htmlspecialchars($this->getTitle()); ?>"
    onmouseover="changeDescription(this.title)">
...</a> 
```

请注意，您的 changeDescription 函数之间不`content`匹配`inhoud`。

# c# - 将文本框值从文本框传递到不同的（不是 form.cs）类

> ID：13725400
> 
> 赞同：2
> 
> 时间：2012-12-05T14:26:18.733
> 
> 标签：c#, .net, winforms

还是 C# .NET 的新手，所以首选如此简单（带有解释）。:) 我有一个带有几个文本框的 Windows 表单。我希望能够**在单独的文件中读取这些文本框的内容。** 我已经看过涵盖类似问题的文章（也在 stackoverflow 上），但在我的情况下不起作用。我想要的数据可以在 Form1 的文本框中找到。我希望这些数据去的地方是-> myOtherCS，它将在一个方法（Savedoc）中使用。

在 Form1.cs 我有：

```
private myOtherCS allOtherMethods;
public static string myText= "";
public static string mytitle = "";

public Form1()
{
    InitializeComponent();            
    allOtherMethods = new myOtherCS();
}
/* I would like the myText to be filled with the contents of Textbox1
 *  and mytitle to be filled with contents of Textbox2\. Ideally when the
 * Textboxes have been changed.  */

private void TextBox1_TextChanged(object sender, EventArgs e)
{
     myText = Textbox1.Text;
}

private void TextBox2_TextChanged(object sender, EventArgs e)
{
     myTitle = Textbox2.Text;
} 
```

在 myOtherCS 文件中，我希望能够在不同的方法中使用这些值。所以首先可能“获取”和“设置”它们。我已经尝试了很多东西，但这里有一个......从......我知道你必须改变两个文件中的东西，并且有，但这是为了得到这个想法。

```
public class GetTextBoxes
{
    private string title;
    private string text;

    public string Title
    {
        get { return title; }
        set { title = value; }
    }

    public string Text
    {
        get { return text; }
        set { text = value; }
    }
}

public void SaveDoc()
{ 
    GetTextBoxes.title;
    GetTextBoxes.text;
} 
```

到目前为止，这是 PSEUDOcode，试图展示我想要做什么。我已经尝试了很多东西，如果有人知道如何做到这一点，我将非常感激！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:36:10.367

如果您将字符串存储为公开，那么您所要做的就是说......

```
Form1 form=new Form1();
Console.out.write(form.myText); 
```

如果您的字符串是公开的，则无需使用 getter 和 setter。虽然我可能会将它们保持为静态。这些方法将在每次更改后更新，因此不需要额外的方法。您还可以将您的标题对象设置为公共它们是类型，这样您对字符串所做的操作就可以再次实现，但使用您的表单的一部分。

```
public System.Windows.Forms.Button button1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:40:56.493

我认为最好的方法是你所做的。拥有一个公共类来获取和设置值并在不同的 Windows 窗体之间共享它们是我自己一直使用的想法。您也可以通过表单构造函数传递您的值，但那是您只想在表单初始化时获取值的时候！所以在你的情况下，我认为这不是一个好主意。. . 祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:49:48.580

你可能想改变你的思维方式，这里有一些想法：

*   更多地从数据模型的角度考虑它。您的 Form1 试图在概念上表示什么？在此基础上创建您的数据模型来支持该需求。通过数据模型，我的意思是一个简单的类，如您在问题中定义的那样，您可以调用您的类 Document.getter/setter。

    公共类文档 { 公共字符串标题 {get;set;} 公共字符串文本 {get;set; }

    因此，不要在 Form1 中使用静态字段：

    公共静态字符串 myText=""; 公共静态字符串 mytitle = "";

    您可以定义一个公共属性`public Document MyDocument {get;set;}` 并在构造函数中对其进行初始化。

*   然后您可以使用数据绑定，以便您可以将模型（文档）绑定到 Form1 中的控件。

*   想想您在 Form1 和 myOtherCS 之间的交互。您如何设想用户的工作流程？填写Form1然后执行一个动作？转到另一种形式，等等？myOtherCS 只是一个将处理 Form1 数据的服务吗？

我不想帮助您解决特定的技术问题，而是想拓宽您的视野并确定您真正想做的事情，然后找到最合适的技术解决方案来满足该要求。相信我，我已经在 WinForms 上苦苦挣扎了很长时间，但更重要的是明确你想在高层次上完成什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:35:38.307

您需要在 textchanged 事件处理程序中设置 allOtherMethods 的属性。

这是代码：

```
private void TextBox1_TextChanged(object sender, EventArgs e)
{
   allOtherMethods.Text = Textbox1.Text;
}
private void TextBox2_TextChanged(object sender, EventArgs e)
{
   allOtherMethods.Title= Textbox2.Text;
} 
```

和代码

```
public void saveText()
{ 
       GetTextBoxes.title;
       GetTextBoxes.text;
} 
```

是没有意义的。您不能在类之外声明方法。

c# 是一种 OOP 语言。所以这里的常见概念是您应该始终尝试在事件处理程序中设置属性或调用实例的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T14:50:07.997

假设每个主窗体和另一个窗体都包含一个文本框。您可以做的是打开另一个表单`Show()`，将主表单作为参数传递。然后，您可以为文本更改添加事件处理程序。`TextBox`当主窗体的`TextBox`文本更改时，下面的示例将更新您在另一个窗体上的内容。这是您的主要形式：

```
public partial class Form1 : Form
{
    OtherForm otherForm;
    public Form1()
    {
        InitializeComponent();
        otherForm = new OtherForm();
        otherForm.Show(this);
        textBox1.TextChanged += textBox1_TextChanged;
    }

    void textBox1_TextChanged(object sender, EventArgs e)
    {
        otherForm.textBox1.Text = textBox1.Text;
    }
} 
```

在`OtherForm`设计器中，设置`textBox1` `Modifiers`为`Public`，如下图

![在此处输入图像描述](../Images/fcc1d2df5eec953bb779b1218ee37ee1.png)

**[编辑]**

这是基于[Servy](https://stackoverflow.com/users/1159478/servy)建议的更好方法。

```
public partial class Form1 : Form
{
    OtherForm otherForm;
    public Form1()
    {
        InitializeComponent();
        otherForm = new OtherForm();
        otherForm.Show(this);
    }
}

//...

public partial class OtherForm : Form
{
    public OtherForm()
    {
        InitializeComponent();
    }

    string SomeMethod()
    {
        var parent = (Form1)this.Owner;
        return parent.textBox1.Text;
    }

    private void textBox1_MouseClick(object sender, MouseEventArgs e)
    {
        textBox1.Text = SomeMethod();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T14:55:32.623

您已经说过，当您单击按钮时，您的表单正在调用另一个类中的方法，而这些其他方法在执行计算时需要使用您的文本框的当前值。处理这个问题的正确方法是让那些其他方法接受两个字符串参数，并`Text`在调用这些方法时传递文本框的值。

这样做将允许您删除文本更改的处理程序和公共静态字段。它将确保信息不会暴露给所有东西，而实际上只有这两个类需要访问它，并且它将使您的程序更易于维护。

# knockout.js - Clear error on Knockout-Validation

> ID：13725401
> 
> 赞同：16
> 
> 时间：2012-12-05T14:26:21.747
> 
> 标签：knockout.js, knockout-validation

I have a page setup with Knockout.js and using Knockout-Validation.

During the page load I put another plugin on a select box which fires a change, which fires the validation. I need to be able to clear that error using JS so I can start with a fresh looking UI and give feedback on the form post or select box change.

I can't find anything that allows me to clear an error in Knockout-Validation.

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-24T21:51:55.357

可能遵循淘汰验证中已经实施的更好方法是说`property.isModified(false);`

如果您要重置整个视图模型，只需遍历所有经过验证的属性并调用它`isModified(false)`

在此处查看[Eric Barnard 的评论](https://github.com/Knockout-Contrib/Knockout-Validation/issues/42)

希望有帮助

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-06-06T04:46:29.480

迟到的答案，但如果有人需要它：

```
// assuming the ko.observable on the checkbox is called propBoolean
var propBooleanlValid = ko.validation.group(self.propBoolean, { deep: false });
propBooleanlValid .showAllMessages(false); 
```

它将隐藏消息直到下一次验证。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-05T16:20:31.560

通过实现这个 Pull Request 找到了答案。

[https://github.com/Knockout-Contrib/Knockout-Validation/pull/184](https://github.com/Knockout-Contrib/Knockout-Validation/pull/184)

给了我我需要的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-01T13:22:58.160

解决它的一种方法是使用自定义验证器，您可以在其中检查视图模型中的标志，例如“ignoreValidation”。如果该标志为真，那么您让验证器通过。

该验证器的外观示例：

```
viewmodel.userHasPremiumMembership.extend({
    validation: [
        {
            validator: function () {
                if (viewmodel.ignoreValidation) {
                    return true;
                }

                return viewmodel.userHasPremiumMembership();
            },
            message: 'User needs to have premium membership.'
        }
    ]
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-14T11:06:47.500

如果您使用实体管理器，请确保在验证中不包含 entityAspect，因为它连接到所有其他实体。另请参阅 [如何回滚淘汰验证错误？](https://stackoverflow.com/questions/38345975/how-to-rollback-knockout-validation-errors)

# c# - 在 C# 中跟踪文件大小变化

> ID：13725405
> 
> 赞同：3
> 
> 时间：2012-12-05T14:26:40.840
> 
> 标签：c#

> **可能重复：**
> [C# 获取文件更改事件](https://stackoverflow.com/questions/3948542/c-sharp-get-file-change-events)

我想在使用 C# 达到特定大小时跟踪特定文件大小有没有办法在文件大小更改时添加事件处理程序，或者我是否需要在线程中运行无限进程以不断检查文件大小？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:28:24.650

使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)监视文件的更改。当它改变时，获取大小。例如：

```
var fsw = new FileSystemWatcher(@"C:\pathtoyourfile");
fsw.Changed += TheFileChanged;

private void TheFileChanged(object sender, FileSystemEventArgs e)
{
    if (e.ChangeType == WatcherChangeTypes.Changed)
    {
        var info = new FileInfo(e.FullPath);
        var theSize = info.Length;
    }
} 
```

完成监视更改后，请处理 FileSystemWatcher。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:29:07.633

您可以使用 a[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)并处理该[`Changed`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.changed.aspx)事件。然后，您只需要在必要时比较文件大小。

[**FileSystemWatcher-教程**](http://www.dotnetperls.com/filesystemwatcher)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:31:18.013

您想使用[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。这可用于在文件更改时引发事件。它的典型用途是

```
// Create a new FileSystemWatcher and set its properties.
FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = args[1];

// Watch for changes in LastAccess and LastWrite times, and
// the renaming of files or directories.
watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
   | NotifyFilters.FileName | NotifyFilters.DirectoryName;
// Only watch text files.
watcher.Filter = "*.txt";

// Add event handlers.
watcher.Changed += new FileSystemEventHandler(OnChanged);
watcher.Created += new FileSystemEventHandler(OnChanged);
watcher.Deleted += new FileSystemEventHandler(OnChanged);
watcher.Renamed += new RenamedEventHandler(OnRenamed);

// Begin watching.
watcher.EnableRaisingEvents = true; 
```

然后添加相关`EventHandler`的s

```
// Define the event handlers. 
private static void OnChanged(object source, FileSystemEventArgs e)
{
    // Specify what is done when a file is changed, created, or deleted.
   Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
}

private static void OnRenamed(object source, RenamedEventArgs e)
{
    // Specify what is done when a file is renamed.
    Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T14:33:23.627

使用[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类和[`Changed`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.changed.aspx)事件。

还有一个很酷的项目，叫做[.NET File System Watcher](http://www.codeproject.com/Articles/2157/A-NET-File-System-Watcher)。

![在此处输入图像描述](../Images/2b024ee6bb83631535296f62753125f8.png)

# linux - unistd.h implementation

> ID：13725414
> 
> 赞同：2
> 
> 时间：2012-12-05T14:27:05.507
> 
> 标签：linux, porting, realview

My toolchain (Realview) does not have implementation of `unistd.h`, I have a code that I need to use that **is** using `unistd.h`, some function like `access`, `open`.

So I need to implement this functions by myself.

My question is, is there another alternative or some reference (except the function description, found [here](http://pubs.opengroup.org/onlinepubs/009695399/functions/open.html)) that I can use in order to port/implement these functions?

What is the correct way to do that? It's my first time posting.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:40:22.393

您链接到的“功能描述”的页面标题为“The Open Group Base Specifications Issue 6”，这表明它可能比单纯的描述更重要。

如果您实现了一个正确地满足该页面上所有文本的功能，那么您很可能已经设法以兼容的方式重新实现它，以便符合相同标准的程序能够构建和工作。

不知道你觉得你还需要什么。

# php - PHPMailer Gmail SMTP works on localhost but not on server

> ID：13725415
> 
> 赞同：0
> 
> 时间：2012-12-05T14:27:05.487
> 
> 标签：php, smtp, gmail, phpmailer

This is what I get when running the PHPMailer script on the production server. PHPMailer version is **5.1**

```
SMTP -> ERROR: Failed to connect to server: Network is unreachable (101)
SMTP Error: Could not connect to SMTP host. Mailer Error: SMTP Error:
Could not connect to SMTP host 
```

**PHPMailer Configuration**

```
$mail->IsSMTP();
$mail->SMTPDebug  = 1;
$mail->SMTPAuth   = true;                  
$mail->SMTPSecure = "ssl";                 
$mail->Host       = "smtp.gmail.com";      
$mail->Port       = 465;                   
$mail->Username   = "xxxx@gmail.com";  
$mail->Password   = "xxxx"; 
```

Using this config, it worked perfectly on localhost running XAMPP.

**What I Tried**

```
$mail->SMTPSecure = "tls"; // no luck

$mail->Host = "ssl://smtp.gmail.com"; // no luck

$mail->SMTPKeepAlive = true; // no luck

$mail->Port = 587; // no luck

$mail->Port = 25; // no luck 
```

I tried with various combinations of the above but still I got the error message displayed above.

FYI, my localhost is on Windows while the server is on Linux. Don't know if that would cause a problem, but just wanted to put it out there.

# python - 二进制文件下载

> ID：13725417
> 
> 赞同：6
> 
> 时间：2012-12-05T14:27:11.670
> 
> 标签：python, web-services, bottle

我正在使用 python 和瓶子构建服务器。

如何处理对二进制文件的请求？

我读过我应该使用烧瓶。有一种方法可以在不使用烧瓶的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T02:43:33.030

是的，你应该使用`static_file`功能：

```
from bottle import static_file    

@route('/download/<filename:path>')
def download(filename):
    return static_file(filename, root='/path/to/static/files', download=filename) 
```

# android - how to use Context menu on listview containing RadioGroup

> ID：13725420
> 
> 赞同：0
> 
> 时间：2012-12-05T14:27:13.833
> 
> 标签：android, listview, radio-button

Hello Friends i am using a listview containing textview and radio group. Now i need to use context menu on Listview. when i was not using Radio Group it was working but now when i added Radio Buttons in my list row its not clickable. Can anyone give me solution?

This is my main layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <include layout="@layout/search_bar" />

    <ListView
        android:id="@+id/listview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/rel_my_search"
        android:cacheColorHint="#00000000"
        android:choiceMode="singleChoice"
        android:clickable="true"
        android:fastScrollEnabled="true" >
    </ListView>

</RelativeLayout> 
```

and this is row of listview

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativelay"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_bg" >

    <TextView
        android:id="@+id/tvname"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:maxLines="1"
        android:padding="10dp"
        android:textColor="#000000"
        android:textSize="18dp"
        android:textStyle="bold" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/check_present"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginRight="20dp"
            android:onClick="onPresentClick" />

        <RadioButton
            android:id="@+id/check_absent"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toLeftOf="@id/check_present"
            android:onClick="onPresentClick" />
    </RadioGroup>

</RelativeLayout> 
```

and this is the code i done

```
public class MainActivity extends Activity implements TextWatcher,
        OnItemClickListener/*, OnItemLongClickListener*/ {

    ListView listView;
    List<Items> items;
    List<Items> filterArray = new ArrayList<Items>();

    ArrayList<Item> itemsSection = new ArrayList<Item>();

    NamesAdapter objAdapter = null;

    EditText mySearch;
    String searchString;
    AlertDialog alert = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        listView = (ListView) findViewById(R.id.listview);
        listView.setOnItemClickListener(this);
        //listView.setOnItemLongClickListener(this);
        registerForContextMenu(listView);
        mySearch = (EditText) findViewById(R.id.input_search_query);
        mySearch.addTextChangedListener(this);

        // XML Parsing Using AsyncTask...
        if (isNetworkAvailable()) {
            new MyTask().execute();
        } else {
            showToast("No Netwrok Connection!!!");
            this.finish();
        }
    }

    public void onPresentClick(View view) {
        switch (view.getId()) {
        case R.id.check_present:
            Toast.makeText(MainActivity.this, "Student is Present",
                    Toast.LENGTH_LONG).show();
            break;
        case R.id.check_absent:
            Toast.makeText(MainActivity.this, "Student is Absent",
                    Toast.LENGTH_LONG).show();
            break;
        }
    }

    // My AsyncTask start...

    class MyTask extends AsyncTask<Void, Void, Void> {

        ProgressDialog pDialog;

        @Override
        protected void onPreExecute() {
            pDialog = new ProgressDialog(MainActivity.this);
            pDialog.setMessage("Loading...");
            pDialog.show();
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... params) {
            items = new NamesParser().getData(rssFeed);

            return null;

        }

        @Override
        protected void onPostExecute(Void result) {
            if (null != pDialog && pDialog.isShowing()) {
                pDialog.dismiss();
            }

            if (null == items || items.size() == 0) {
                showToast("No data found from web!!!");
                MainActivity.this.finish();
            } else {
                setAdapterToListview(items);
            }

            super.onPostExecute(result);
        }
    }

    // Textwatcher's ovveride methods

    @Override
    public void afterTextChanged(Editable s) {
        filterArray.clear();
        searchString = mySearch.getText().toString().trim()
                .replaceAll("\\s", "");

        if (items.size() > 0 && searchString.length() > 0) {
            for (Items name : items) {
                if (name.getName().toLowerCase()
                        .startsWith(searchString.toLowerCase())) {

                    filterArray.add(name);
                }
            }
            setAdapterToListview(filterArray);
        } else {
            filterArray.clear();
            setAdapterToListview(items);
        }
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
    }

    // Here Data is Filtered!!!
    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    // setAdapter Here....

    public void setAdapterToListview(List<Items> listForAdapter) {

        itemsSection.clear();

        if (null != listForAdapter && listForAdapter.size() != 0) {

            Collections.sort(listForAdapter);

            char checkChar = ' ';

            for (int index = 0; index < listForAdapter.size(); index++) {

                Items objItem = (Items) listForAdapter.get(index);

                char firstChar = objItem.getName().charAt(0);

                if (' ' != checkChar) {
                    if (checkChar != firstChar) {
                        ItemsSections objSectionItem = new ItemsSections();
                        objSectionItem.setSectionLetter(firstChar);
                        itemsSection.add(objSectionItem);
                    }
                } else {
                    ItemsSections objSectionItem = new ItemsSections();
                    objSectionItem.setSectionLetter(firstChar);
                    itemsSection.add(objSectionItem);
                }

                checkChar = firstChar;

                itemsSection.add(objItem);
            }
        } else {
            showAlertView();
        }

        if (null == objAdapter) {
            objAdapter = new NamesAdapter(MainActivity.this, itemsSection);
            listView.setAdapter(objAdapter);
            registerForContextMenu(listView);
        } else {
            objAdapter.notifyDataSetChanged();
        }

    }

    // Toast is here...
    private void showToast(String msg) {
        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();
    }

    // OnListClick,Get Name...
    /*@Override
    public boolean onItemLongClick(AdapterView<?> parent, View view,
            int position, long id) {
        // TODO Auto-generated method stub
        deleteStudentAlert(id);

        return false;
    }*/

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {

        Item item = itemsSection.get(position);

        if (view.getTag().getClass().getSimpleName().equals("ViewHolderName")) {
            Items objSchoolname = (Items) item;
            showToast(objSchoolname.getName());
        } else {
            ItemsSections objSectionsName = (ItemsSections) item;
            showToast("Section :: "
                    + String.valueOf(objSectionsName.getSectionLetter()));
        }

    }

    // Check Internet Connection!!!

    public boolean isNetworkAvailable() {
        ConnectivityManager connectivity = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity == null) {
            return false;
        } else {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) {
                for (int i = 0; i < info.length; i++) {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        return true;
                    }
                }
            }
        }
        return false;
    }

    // OnBackPressed...

    @Override
    public void onBackPressed() {
        AlertDialog alert_back = new AlertDialog.Builder(this).create();
        alert_back.setTitle("Quit?");
        alert_back.setMessage("Are you sure want to Quit?");

        alert_back.setButton("No", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });

        alert_back.setButton2("Yes", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                MainActivity.this.finish();
            }
        });
        alert_back.show();
    }

    private void showAlertView() {

        if (null == alert)
            alert = new AlertDialog.Builder(this).create();

        if (alert.isShowing()) {
            return;
        }

        alert.setTitle("Not Found!!!");
        alert.setMessage("Can not find name Like '" + searchString + "'");
        alert.setButton("Ok", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });
        alert.show();
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        if (v.getId() == R.id.listview) {
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo) menuInfo;
            menu.setHeaderTitle("Details");
            menu.add(0, 0, 0, "Delete Student");
            menu.add(1, 1, 1, "Add Student Below Current Student");
            menu.add(2, 2, 2, "Get Details of this Student");
            menu.add(3, 3, 3, "Bonafied or Marksheet of This Student");
        }
        super.onCreateContextMenu(menu, v, menuInfo);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO Auto-generated method stub

        if (item.getItemId() == 0) {
            deleteStudentAlert(0);
        } else if (item.getItemId() == 1) {
            deleteStudentAlert(1);
        } else if (item.getItemId() == 2) {
            deleteStudentAlert(2);
        } else if (item.getItemId() == 3) {
            deleteStudentAlert(3);
        }

        return super.onContextItemSelected(item);
    }

    private void deleteStudentAlert(long id) {

        // TODO Auto-generated method stub
        Log.v("Reaching ", "Into Delete???");
        AlertDialog alertDialogialog = new AlertDialog.Builder(
                MainActivity.this).create();
        alertDialogialog.setTitle("");
        alertDialogialog.setMessage("");

        alertDialogialog.setButton("Ok", new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog, int which) {
                // TODO Auto-generated method stub
                Toast.makeText(MainActivity.this, "Check working of ok",
                        Toast.LENGTH_LONG).show();
                final Dialog pwdDialog = new Dialog(MainActivity.this);
                pwdDialog.setContentView(R.layout.password_dialog_layout);
                pwdDialog.show();
                pwdDialog.setTitle("Are You Sure?");
                Button ok = (Button) pwdDialog.findViewById(R.id.btnPwdOk);
                ok.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // TODO Auto-generated method stub
                        pwdDialog.dismiss();
                    }
                });
                pwdDialog.show();
            }
        });
        alertDialogialog.setButton("Cancel",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        Toast.makeText(MainActivity.this,
                                "Check working of Cancel", Toast.LENGTH_LONG)
                                .show();

                    }
                });

    }

} 
```

Context menu works fine if i remove Radio button but i need radio buttons also.. Thanks in Advance....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:40:27.480

这些帖子可能对你有帮助，

[自定义 ListView 和上下文菜单。如何得到它？](https://stackoverflow.com/questions/3972945/custom-listview-and-context-menu-how-to-get-it)

[ListView 项目不可点击。为什么？](https://stackoverflow.com/questions/8955270/listview-items-are-not-clickable-why)

也看看这个

[https://github.com/gitextensions/gitextensions/issues/795](https://github.com/gitextensions/gitextensions/issues/795)

# java - Future result update UI as soon as they arrive

> ID：13725422
> 
> 赞同：2
> 
> 时间：2012-12-05T14:27:25.490
> 
> 标签：java, future

I have `JList` using `DefaultListModel` to update the strings in list in UI , returned by a class as shown

```
class ResponseGiver implements Callable<Future>{

        int i;

       //Constructor to initialize i

     String call(){
      ...............
      ...............
      return i;
  } 
```

and i have other class that will update the results obtained from above

```
class Viewer {

    ExecutorService es = new Executors.newFixedThreadPool(10);
    List<Future<String>> futures = new ArrayList<Future<String>>();
    for(int i =0;i<10;i++)
      {
         futures.add(new ResponseGiver(i));
      }
 for(Future<String> x : futures)  //loop 2nd will be called 10 times
  {
     String p = x.get(); 
       //update GUI with p
   } 
```

Now the question is, suppose in loop 2nd , in the 5th loop, the `get()` function takes some time say 10 seconds, and during the mean time, the other futures from 6th to 10th have their result ready. So my screen would wait for 5th result, even 6th to 10th are ready. I want my screen to be updated as soon as any of the 10 futures return the result.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-18T14:54:15.603

使用标准 API，您可以使用[ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html)。它允许提交`Callable`实例并返回`Future`对象，就像普通的`ExecutorService`. 但它还允许`Future`按完成顺序获取对象：使用[ExecutorCompletionService#take()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html#take%28%29)方法。此方法会阻塞，直到有新`Future`的可用。您可以将其想象为`Futures`被放入阻塞队列中。

`Future`您可以从完成服务启动一个使用这些对象的线程。`Future`然后可以使用这样的结果来更新 GUI。（请注意，此更新又必须在 Event Dispatch Thread 上使用 再次完成`SwingUtilities.invokeLater`）。

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Random;
import java.util.concurrent.Callable;
import java.util.concurrent.CompletionService;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorCompletionService;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;

import javax.swing.DefaultListModel;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class ExecutorCompletionServiceTest
{
    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                createAndShowGUI();
            }
        });
    }

    private static void createAndShowGUI()
    {
        JFrame f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        f.getContentPane().setLayout(new BorderLayout());

        JButton button = new JButton("Run");
        f.getContentPane().add(button, BorderLayout.NORTH);

        final DefaultListModel<String> listModel = new DefaultListModel<String>();
        JList<String> list = new JList<String>(listModel);
        f.getContentPane().add(new JScrollPane(list), BorderLayout.CENTER);

        final Callback callback = new Callback()
        {
            @Override
            public void call(final String result)
            {
                SwingUtilities.invokeLater(new Runnable()
                {
                    @Override
                    public void run()
                    {
                        listModel.addElement(result);
                    }
                });
            }
        };

        button.addActionListener(new ActionListener()
        {
            @Override
            public void actionPerformed(ActionEvent e)
            {
                createTasks(callback);
            }
        });

        f.setSize(300, 300);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    interface Callback
    {
        void call(String result);
    }

    private static Random random = new Random(0);

    static class ResponseGiver implements Callable<String>
    {
        private int i;

        ResponseGiver(int i)
        {
            this.i = i;
        }

        @Override
        public String call()
        {
            int delayMS = 250 + random.nextInt(500);

            // Simulate a longer delay for task 5
            if (i == 5)
            {
                delayMS += 3000;
            }
            try
            {
                System.out.println("For "+i+" waiting "+delayMS+" ms");
                Thread.sleep(delayMS);
                System.out.println("For "+i+" waiting "+delayMS+" ms DONE");
            }
            catch (InterruptedException e)
            {
                Thread.currentThread().interrupt();
            }
            return String.valueOf(i);
        }
    }

    private static void createTasks(final Callback callback)
    {
        ExecutorService executorService = Executors.newFixedThreadPool(10);
        final CompletionService<String> executorCompletionService =
            new ExecutorCompletionService<String>(executorService);
        final int n = 10;
        for (int i = 0; i < 10; i++)
        {
            executorCompletionService.submit(new ResponseGiver(i));
        }
        Thread thread = new Thread(new Runnable()
        {
            @Override
            public void run()
            {
                processResults(executorCompletionService, n, callback);
            }
        });
        thread.start();
    }

    private static void processResults(
        CompletionService<String> completionService, int n, Callback callback)
    {
        for (int i = 0; i < n; i++)
        {
            try
            {
                Future<String> future = completionService.take();
                String result = future.get();
                if (result != null)
                {
                    callback.call(result);
                }
                System.out.println("Processed "+(i+1)+" of "+n+" results");
            }
            catch (InterruptedException e)
            {
                Thread.currentThread().interrupt();
            }
            catch (ExecutionException e)
            {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:30:13.273

只需使用[`ListenableFuture`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/util/concurrent/ListenableFuture.html)番石榴。方便多了。

# c++ - c++ accumulate with move instead of copy

> ID：13725425
> 
> 赞同：12
> 
> 时间：2012-12-05T13:56:29.917
> 
> 标签：c++, visual-c++

I have the following code

```
auto adder = [](string& s1, const string& s2)->string&&
   {
      if (!s1.empty())
         s1 += " ";
      s1 += s2;
      return move(s1);
   };

   string test;
   test.reserve(wordArray.size() * 10);
   string words = accumulate(wordArray.begin(), wordArray.end(), 
       move(test), adder); 
```

What I would like here is to avoid string copying. Unfortunately this is not accomplished by the vs2012 implementation of accumulate. Internally accumulate calls another function _Accumulate and the rvalue functionality gets lost in the process.

It I instead call the _Accumulate function like so

```
string words = _Accumulate(wordArray.begin(), wordArray.end(), 
    move(test), adder); 
```

I get the intended performance gain.

Must the std library be rewritten to take rvalue arguments into consideration?

Is there some other way I may use accumulate to accomplish what I want without cheating too much?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T09:50:52.773

检查最近发布的 C++11 草案之一（N3337.pdf）我们可以看到 std::accumulate 的效果被指定为

> 通过使用初始值 init 初始化累加器 acc 来计算其结果，然后按顺序使用 acc = acc + *i 或 acc = binary_op(acc, *i) 为范围 [first,last) 中的每个迭代器 i 修改它。

因此，该标准实际上禁止使用 std::move 作为旧累加器值的实现，如下所示：

```
template <class InputIterator, class T, class BinOp>
T accumulate (InputIterator first, InputIterator last, T init, BinOp binop)
{
  while (first!=last) {
    init = binop(std::move(init), *first);
    ++first;
  }
  return init;
} 
```

这对你来说是不幸的。

选项（1）：自己实施这种移动感知积累。

选项（2）：继续使用仿函数

```
struct mutating_string_adder {
  string operator()(string const& a, string const& b) const {return a+b;}
  string operator()(string & a, string const& b)      const {a += b; return std::move(a);}
  string operator()(string && a, string const& b)     const {a += b; return std::move(a);}
}; 
```

请注意，我在这里*没有*使用右值引用返回类型。这是有意的，因为它可能会避免悬空引用问题，例如在拾取最后一个重载并将“a”初始化为引用临时对象的情况下。字符串的所有 operator+ 重载也有意按值返回。

除此之外，您可能希望将 std::copy 与 std::stringstream 和输出流迭代器结合使用。

附录：`mutating_string_adder`与一些部分完美转发交替：

```
struct mutating_string_adder {
  template<class T, class U>
  std::string operator()(T && a, U && b) const {
    return std::move(a) + std::forward<U>(b);
  }
}; 
```

# c# - 如何创建这种结构的 XML

> ID：13725426
> 
> 赞同：0
> 
> 时间：2012-12-05T14:27:34.743
> 
> 标签：c#, xelement

我想创建一个如下所示的 xml 结构：

```
<root>
    <element name= "text here 1">
        <child>asd</child>
        <child>asd</child>
    </element>
    <element name= "text here 2">
        <child>asd</child>
        <child>asd</child>
    </element>
</root> 
```

我熟悉

```
XElement doc = XElement.Load(mainDirectory);
XElement newElem = new XElement("element", new XElement(child, ""), new XElement(child, ""));
doc.Add(newElem);
doc.Save(mainDirectory); 
```

所以我认为这取决于我在创建“元素”时如何添加“属性”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:31:25.933

您可以添加这样的属性

```
new XElement("element",new XAttribute("attribute","value") ,
             new XElement(child, ""), 
             new XElement(child, "")); 
```

这将成为

```
<element attribute="value">
    <child/>
    <child/>
</element> 
```

* * *

`XElement`类似于

`public XElement(XName name,params object[] content)`

*   由于`params`您可以指定任意数量的对象

*   由于`object`您可以指定

-> `XAttribute`（被添加到该特定节点），

-> `string`（它被包装在 XText 中并被添加到节点），

-> `IEnumerable`,

->`Any other object`被转换为`string`using `ToString()`which 被转换为`XText`然后被添加到`node`

-> 如果`object`它`null`被忽略

-> 如果是`XNode`，则添加到`node`

# logging - How can I get sfRouting to shut up in a task?

> ID：13725427
> 
> 赞同：2
> 
> 时间：2012-12-05T14:27:36.223
> 
> 标签：logging, symfony1, symfony-1.4

I have a symfony task, with a context instance creation :

```
sfContext::createInstance($this->configuration); 
```

The context is needed because of a call to the `get_component` helper function (in order to generate the body of an email). I know [sfContext::getInstance() is bad](http://webmozarts.com/2009/07/01/why-sfcontextgetinstance-is-bad/), but I did not write it and can't remove it.

My problem is this line triggers the logging of routing - related messages:

```
 >> sfPatternRouting Match route "homepage" (/) for / with parameters array (  'module' => 'default',  'action' => 'index',) 
```

How can I get sfRouting to shut up? I keep getting email from my crontab repeating this useless piece of information.

How would I change the configuration so that the options passed to the routing constructor do not contain `"logging" => "true"` ?

I would like the routing to shut up no matter what my factories.yml files contain.

Of course, it there is an error, be it logged to STDOUT or STDERR, I still want to get an email.

Vlad asked me for my code, so I created a tiny project so you can easily reproduce the bug. Here it is: [https://github.com/greg0ire/pwet](https://github.com/greg0ire/pwet)

If you want to easily reproduce the bug, I created a brand new dummy project, which you can clone. Here are the steps to reproduce the bug:

```
git clone git://github.com/greg0ire/pwet.git
cd pwet
git submodule init
git submodule update
php web/frontend_dev.php
./symfony pwet --application="frontend" 
```

Notice how `php web/frontend_dev.php` is important. It does not generate the same cache files as the CLI would

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T16:22:04.450

我能够通过创建一个名为“task”的新环境并将“路由”类配置为我创建的名为“DummyRouting”的新类来实现这一点。

应用程序/前端/配置/factories.yml：

```
task:
  routing:
     class: DummyRouting 
```

DummyRouting.class.php

```
class DummyRouting extends sfPatternRouting
{
  public function connect($name, $route)
  {
  }

  public function parse($url)
  {
    return false;
  }
} 
```

当然，为了方便起见，请确保将“任务”环境指定为默认环境。

configure() 中的 YourTask.class.php

```
...
new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'task'),
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:18:29.703

仅当您在（默认情况下为开发环境）上进行调试时才会发生这种情况

环境的默认值在任务的配置方法中定义（类似于我的上一条消息中的行）。`--env=dev/prod/stage/etc`在执行任务时，您可以通过在命令行中使用参数来覆盖它。您可能想要切换到生产环境 (prod)，这样您就不会看到与路由相关的消息（或其他相关的调试消息）。这是我的一项任务的示例：

```
protected function configure()
{
    $this->addOptions(array(
      new sfCommandOption('application', null, sfCommandOption::PARAMETER_REQUIRED, 'The application name', 'frontend'),
      new sfCommandOption('env', null, sfCommandOption::PARAMETER_REQUIRED, 'The environment', 'prod'), 
      new sfCommandOption('connection', null, sfCommandOption::PARAMETER_REQUIRED, 'The connection name', 'propel'),
    ));

   // other stuff here      
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-29T16:47:02.920

`logging`可以设置为的唯一方法`false`是在您的`factories.yml`：

```
prod:
  routing:
    param:
      logging: false 
```

使用这个解决方案我的任务现在很安静！

# javascript - 用于 Javascript 正则表达式和数字的 Javascript 正则表达式

> ID：13725429
> 
> 赞同：3
> 
> 时间：2012-12-05T14:27:39.547
> 
> 标签：javascript, html, regex, highlight, digits

标题可能看起来有点递归，确实如此。

我正在研究一种 Javascript，它可以突出显示/着色 HTML 中显示的 Javascript 代码。因此，在 Internet 浏览器中，注释将变为绿色，定义（for、if、while 等）将变为深蓝色和斜体，数字将变为红色，等等其他元素。然而，着色并不是那么重要。

我试图找出两个不同的正则表达式，它们已经开始引起轻微的头痛。

### 1\. 使用正则表达式查找正则表达式

我想使用 Javascript 在 HTML 的脚本标签中查找正则表达式，例如：

```
 match(/findthis/i); 
```

，其中正则表达式部分当然是“ **/findthis/i** ”。

规则如下：

1.  查找多次出现 (/g) 并不重要。
2.  它必须在同一行（不是/m）。
3.  不区分大小写 (/i)。
4.  如果反斜杠（忽略字符）后面紧跟正斜杠“​​/”，则正斜杠是表达式的一部分，而不是转义字符。例如：`/itdoesntstop\/untilnow:/`
5.  两个紧挨着的正斜杠 (//) 是： (A) 开头：不是正则表达式；这是一条评论。(B) 稍后：第一个斜杠是正则表达式的结尾，第二个斜杠只是一个字符。
6.  正则表达式一直持续到换行符或输入结束 (\n|$)，或遇到转义字符（符合规则 4 的第二个正斜杠）。但是，只要在第二个正斜杠之后仅遇到字母字符，它们就被视为正则表达式的一部分。例如：`/aregex/allthisispartoftheregex`

到目前为止，我得到的是：

```
 '\\/(?:[^\\/\\\\]|\\/\\*)*\\/([a-zA-Z]*)?' 
```

但是，它并不一致。有什么建议么？

### 2\. 使用正则表达式查找数字（字母数字、浮点数）

自己查找数字很简单。但是，查找浮动数字（带有多个句点）和包括下划线在内的字母更具挑战性。

以下所有内容都被视为数字（每个空格后都有一个新数字）：

```
3 3.1 3.1.4 3a 3.A 3.a1 3_.1 
```

规则：

1.  查找多次出现 (/g) 并不重要。
2.  它必须在同一行（不是/m）。
3.  不区分大小写 (/i)。
4.  数字必须以数字开头。但是，数字前面或后面可以跟非单词 (\W) 字符。例如：“ **=9.9** ;” 其中“9.9”是实际数字。“ **a9** ”*不是*数字。数字之前的句点“ **.9** ”不被视为数字的一部分，因此实际数字是“9”。
5.  允许的字符：[a-zA-Z0-9_.]

我有什么：

```
'(^|\\W)\\d([a-zA-Z0-9_.]*?)(?=([^a-zA-Z0-9_.]|$))' 
```

它不像我想要的那样工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:36:34.993

对于第一部分，我认为您非常接近。这是我将使用的（作为正则表达式文字，以避免所有双重转义）：

```
/\/(?:[^\/\\\n\r]|\\.)+\/([a-z]*)/i 
```

我不知道你在角色类之后的第二个选择是什么意思。但在这里，第二种选择用于消耗反斜杠以及它们后面的任何内容。最后一部分很重要，这样您就可以识别出以如下形式结尾的正则表达式：`/backslash\\/`. 你`?`的正则表达式末尾的 是多余的。否则这应该没问题。

[在这里测试一下。](http://regexpal.com/?flags=gi&regex=%5C/%28?%3a%5B%5E%5C/%5C%5C%5D%7C%5C%5C.%29%2b%5C/%28%5Ba-z%5D%2a%29&input=/%5C/%28?%3a%5B%5E%5C/%5C%5C%5D%7C%5C/.%29%2b%5C/%28%5Ba-z%5D%2a%29/i)

您的第二个正则表达式适合您的规范。虽然有一些多余的元素。您可能想要做的主要事情是捕获除可能的第一个字符之外的所有内容：

```
/(?:^|\W)(\d[\w.]*)/i 
```

现在实际数字（没有第一个字符）将在捕获组`1`中。请注意，我删除了不贪婪和前瞻，因为贪婪本身就完全一样。

[在这里测试一下。](http://regexpal.com/?flags=gi&regex=%28?%3a%5E%7C%5CW%29%28%5Cd%5B%5Cw.%5D%2a%29&input=3%203.1%203.1.4%203a%203.A%203.a1%203_.1%20=9.9%20a9%20.9)

# c++ - CreateProecssAsUser 提升权限？

> ID：13725435
> 
> 赞同：2
> 
> 时间：2012-12-05T14:27:52.400
> 
> 标签：c++, createprocessasuser, privilege-elevation

我的 CreateProcessAsUser 函数出现错误。它说“请求的操作需要提升。”我以为我已经给了它最高权限。有人帮忙吗？谢谢

我的代码如下：

```
 activeSessionId = WTSGetActiveConsoleSessionId();//get the currently logged on user's active session id
            hProcessSnap = CreateToolhelp32Snapshot( TH32CS_SNAPPROCESS, 0 );//take snapshot of all processes in The system

            pe32.dwSize = sizeof(PROCESSENTRY32);
            Process32First(hProcessSnap, &pe32)

            do//iterate through all processes
            {   
                if(_wcsicmp(pe32.szExeFile, L"winlogon.exe") == 0)//narrow down to process called "winlogon.exe"
                {
                    if (ProcessIdToSessionId(pe32.th32ProcessID, &peSessionID)
                    && peSessionID == activeSessionId)//compare the sessionID of each winlog process to the active console session id
                    {
                        winlogonPID = pe32.th32ProcessID;
                        break;
                    }
                }
            }while( Process32Next( hProcessSnap, &pe32 ) );

            dwCreationFlags = (NORMAL_PRIORITY_CLASS|CREATE_NEW_CONSOLE);

            hProcess = OpenProcess(PROCESS_ALL_ACCESS,false,winlogonPID);//return handle to winlogon process

            OpenProcessToken(hProcess,TOKEN_ALL_ACCESS,&hPToken)//opens the access token
            LookupPrivilegeValue(NULL,SE_DEBUG_NAME,&luid)//get the locally unique identifier(luid)

            //creates a new access token and duplicates winlogon token of the active user
            DuplicateTokenEx(hPToken,MAXIMUM_ALLOWED,NULL,SecurityIdentification,TokenPrimary,&hUserTokenDup)

            }

            SetTokenInformation(hUserTokenDup,TokenSessionId,(void*)&activeSessionId,sizeof(DWORD))//sets info for duplicated token

            //adjust the privileges of the duplicated token
            tp.PrivilegeCount = 1;
            tp.Privileges[0].Luid = luid;
            tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;

            AdjustTokenPrivileges(hUserTokenDup, FALSE, &tp, sizeof(TOKEN_PRIVILEGES),(PTOKEN_PRIVILEGES)NULL,NULL)

            pEnv = NULL;
            if(CreateEnvironmentBlock(&pEnv,hUserTokenDup,TRUE))//retrieve environment variables for the user
            {
                dwCreationFlags|=CREATE_UNICODE_ENVIRONMENT;
            }
            else pEnv = NULL;

            ZeroMemory( &si, sizeof(si) );//set parameters to 0
            si.cb = sizeof(si);//the size of si
            si.lpDesktop = L"WinSta0\\Default";//window station and desktop of interactive user
            ZeroMemory( &pi, sizeof(pi) );//set parameters to 0

            //launch the process in active logged in user's session
            CreateProcessAsUser
                (
                hUserTokenDup,  
                NULL,
                Path,
                NULL,
                NULL,
                FALSE,
                dwCreationFlags,
                pEnv,
                NULL,
                &si,
                &pi
                )
              )

              //Destroy the Environment block
                      (DestroyEnvironmentBlock(pEnv)

              CloseHandle(hProcess)
              CloseHandle(hUserToken)
              CloseHandle(hUserTokenDup)
              CloseHandle(hPToken)

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T22:04:59.710

您的调用代码在哪个用户帐户下运行？该帐户是否有权以其他用户身份运行进程？

我使用的代码`CreateProcessAsUser()`在 SYSTEM 帐户下的服务中运行。以下方法对我来说很好，根本不需要枚举进程：

```
// error handling omitted for brevity...

DWORD dwSessionId = WTSGetActiveConsoleSessionId();
HANDLE hProcessToken = NULL;
HANDLE hUserToken = NULL;

TOKEN_PRIVILEGES TokenPriv, OldTokenPriv;
DWORD OldSize = 0;
OpenProcess(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &hProcessToken);
LookupPrivilegeValue(NULL, SE_TCB_NAME, &TokenPriv.Privileges[0].Luid);
TokenPriv.PrivilegeCount = 1;
TokenPriv.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
AdjustTokenPrivileges(hProcessToken, FALSE, &TokenPriv, sizeof(TokenPriv), &OldTokenPriv, &OldSize);

HANDLE hToken = NULL;
WTSQueryUserToken(dwSessionId, &hToken);
DuplicateTokenEx(hToken, MAXIMUM_ALLOWED, NULL, SecurityIdentification, TokenPrimary, &hUserToken);
CloseHandle(hToken);

LPVOID pEnv = NULL;
CreateEnvironmentBlock(&pEnv, hUserToken, FALSE);

STARTUPINFO si = {0};
si.cb = sizeof(si);
si.lpDesktop = TEXT("WinSta0\\Default");
//...

PROCESS_INFORMATION pi = {0};

//launch the process in active logged in user's session
CreateProcessAsUser(
    hUserToken,  
    NULL,
    Path,
    NULL,
    NULL,
    FALSE,
    NORMAL_PRIORITY_CLASS | CREATE_UNICODE_ENVIRONMENT | ...,
    pEnv,
    NULL,
    &si,
    &pi
);

CloseHandle(pi.hThread);
CloseHandle(pi.hProcess);
DestroyEnvironmentBlock(pEnv);
CloseHandle(hUserToken);

AdjustTokenPrivileges(hProcessToken, FALSE, &OldTokenPriv, sizeof(OldTokenPriv), NULL, NULL);
CloseHandle(hProcessToken); 
```

# sql - 从表 1 中选择 SUM（当 value1 =351 then 1 else 0 end）作为 value2

> ID：13725438
> 
> 赞同：1
> 
> 时间：2012-12-05T14:28:04.183
> 
> 标签：sql

我的 sql 查询是

```
Select SUM(case when value1 =351 then 1 else 0 end) as value2 from table1 
```

如果 value1 =351，输出将为 1。

是否可以将查询编写为

```
Select SUM(case when value1 =351 then Y else N end) as value2 from table1 
```

得到输出为 Y 还是 N？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:32:29.680

我会改用 MAX ：

```
Select MAX(case when value1 =351 then 'Y' else 'N' end) as value2 
from table1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:35:20.440

我认为您正在寻找：

```
SELECT (CASE WHEN value1=351 THEN 'Y' ELSE 'N' END) AS value2 FROM table1 
```

在这种情况下，围绕 的括号`CASE-WHEN-THEN-ELSE-END`是可选的。

# c# - 在 WP 上使用 MvvmCross 拍摄图像并显示它们的问题

> ID：13725439
> 
> 赞同：0
> 
> 时间：2012-12-05T14:28:08.160
> 
> 标签：c#, mvvmcross

我想用相机拍照并显示在我所在的页面上

所以我有一个视图模型，我可以在其中拍照并展示它

```
public class CamViewModel : MvxViewModel,
    IMvxServiceConsumer<IInstalledMeter>,
    IMvxServiceConsumer<ICamaraService>        
{
    public CamViewModel()
    {
        this.GetService<ICamaraService>().PhotoSavedEvent += PhotoSaved;

        if (!String.IsNullOrEmpty(this.GetService<IInstalledMeter>().ImagePath))
        {
            ImagePath = this.GetService<IInstalledMeter>().ImagePath;
        }

        TakePicture();
    }

    private string _imagePath;
    public string ImagePath
    {
        get { return _imagePath; }
        set { _imagePath = value; FirePropertyChanged("ImagePath"); }
    }

    //Navigate back to InstallUnit
    public IMvxCommand OpenCamaraCommand
    {
        get
        {
            return new MvxRelayCommand(TakePicture);
        }
    }

    private void PhotoSaved(object sender, PhotoSavedResultEventArgs e)
    {
        ImagePath = e.ImagePath;
    }

    private void TakePicture()
    {
        this.GetService<ICamaraService>().TakePhoto();
    }
} 
```

这使用了一个 CameraService ，它既可以拍照，又可以将图片保存在隔离的存储中（我知道，担心分离不好）

```
public class CamaraService : IMvxServiceConsumer<IMvxPictureChooserTask>, IMvxServiceConsumer<IMvxSimpleFileStoreService>, IMvxServiceConsumer<IInstalledMeter>, ICamaraService
{
    private const int MaxPixelDimension = 1024;
    private const int DefaultJpegQuality = 70;

    public event EventHandler<PhotoSavedResultEventArgs> PhotoSavedEvent;
    private void PhotoTaken(PhotoSavedResultEventArgs e)
    {
        if (PhotoSavedEvent != null)
        {
            PhotoSavedEvent(this, e);
        }
    }

    public string ImagePath { get; set; }

    public void TakePicture()
    {
        this.GetService<IMvxPictureChooserTask>().TakePicture(
            MaxPixelDimension, 
            DefaultJpegQuality,
            SavePicture, 
            () => { /* cancel is ignored */ });
    }
    public void TakePhoto()
    {
        TakePicture();
    }

    public void SavePicture(Stream image)
    {
        var newImage = Save(image);
        if (newImage != "")
        {
            DeleteOldImage(this.GetService<IInstalledMeter>().ImagePath);
            this.GetService<IInstalledMeter>().ImagePath = newImage;
            PhotoTaken(new PhotoSavedResultEventArgs {ImagePath = newImage});
        }
    }

    public void UpdateModel(string filename)
    {

    }

    public void DeleteOldImage(string fileName)
    {
        try
        {
            if (String.IsNullOrEmpty(fileName)) return;
            var fileService = this.GetService<IMvxSimpleFileStoreService>();
            fileService.DeleteFile(fileName);
        }
        catch
        {
        }
    }

    public string Save(Stream stream)
    {
        try
        {
            var fileName = Guid.NewGuid().ToString();
            var fileService = this.GetService<IMvxSimpleFileStoreService>();
            fileName = Path.Combine("Image", fileName);
            fileService.WriteFile(fileName, stream.CopyTo);
            return fileName;
        }
        catch (ThreadAbortException)
        {
            throw;
        }
        catch (Exception exception)
        {
            return "";
        }
    }
} 
```

Windows Phone 上显示图像的视图是

```
<Views:BaseCamView
x:Class="UI.WP7.Views.InstallMeter.CamView"
xmlns:Views="clr-namespace:UI.WP7.Views.InstallMeter"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
xmlns:nativeConverters="clr-namespace:UI.WP7.NativeConverters"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d"
shell:SystemTray.IsVisible="True">

<Views:BaseCamView.Resources>
    <nativeConverters:PathToImageConverter x:Name="PathToImageConverter" />
</Views:BaseCamView.Resources>

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel Grid.Row="0" Margin="12,17,0,28">
        <TextBlock Text="MY sdf" Style="{StaticResource PhoneTextNormalStyle}"/>
        <TextBlock Text="{Binding ImagePath}" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
    </StackPanel>

    <Image Grid.Row="1" Source="{Binding ImagePath, Converter={StaticResource PathToImageConverter}}"  Height="200" Width="700" Stretch="Uniform" />

</Grid> 
```

而这个视图使用转换器将路径转换为位图图像

```
public class PathToImageConverter : IValueConverter, IMvxServiceConsumer<IMvxSimpleFileStoreService>
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        byte[] contents = null;
        try
        {
            var file = this.GetService();
            file.TryReadBinaryFile((string)value, out contents);
        }
        catch (Exception)
        {
            // masked
        }

        if (contents == null)
            return null;

        using (var stream = new MemoryStream(contents))
        {
            var image = new BitmapImage();
            image.SetSource(stream);
            return image;
        }
    } 
```

但是，当我尝试拍照时，转换器中的这一位返回 null

```
if (contents == null)
        return null; 
```

所以我认为这意味着图像无法访问/保存或文件名错误，但不确定错误发生在哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T17:36:04.500

我认为您需要逐步调试照片代码。

您还可以尝试向异常捕获处理程序添加一些跟踪。

一种猜测是您基于 GUID 的文件名包含无效字符 - 请参阅[http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidpathchars%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.getinvalidpathchars%28v=vs.95%29.aspx)尝试`Guid.ToString("N") + ".jpg"`损坏的文件名略少

但实际上您需要跟踪代码并找出错误发生的位置。

# javascript - 图像 src 替换不起作用

> ID：13725442
> 
> 赞同：1
> 
> 时间：2012-12-05T14:28:29.237
> 
> 标签：javascript

我有一个手风琴菜单，活动链接下拉菜单，将外部页面加载到 中`div`，然后在同一次单击时更改横幅。除了更改横幅图像外，我一切正常。我以为我的代码是正确的，但似乎缺少一些东西，我无法弄清楚。

这是我的html：

```
<section id="commercialBanner">
    <img src="images/catalog/indoorBanner.jpg"/>
</section>  

<section id="accordionNav">
    <ul id="nav">
        <li id="indoorEntrance" class="category"><a class="ext" id="indoor" href="montage.html">Indoor Entrance</a>
            <ul id="indoorEntranceSubmenu" class="sideSub">
                <li><a href="montage.html" class="ext">Ecomat Squares</a></li>
                <li><a href="gatekeeper.html" class="ext">Gatekeeper</a></li>
                <li><a href="absorba.html" class="ext">Absorba</a></li>
            </ul>
        </li>
        <li id="outdoorEntrance" class="category"><a id="outdoor" class="ext" href="aquaFlow.html">Outdoor Mats</a>
            <ul id="outdoorEntranceSubmenu" class="sideSub">
                <li><a href="aquaFlow.html" class="ext" id="aquaflow">AquaFlow</a></li>
            </ul>
        </li>
    </ul>
    <section id="catalog"></section> 
```

这是我的脚本：

```
$('a.ext').click(function (event){
        event.preventDefault(); 
        $('#catalog').load(this.href);
});

$('.category > a').click(function(evt) {                 
    if ($(this).attr('class') != 'active'){
        $('#nav li ul').hide();
        $(this).next().show()
        // $(this).next('li > a').trigger('click')
        $('#nav li a').removeClass('active');
        $(this).addClass('active');
    };
    if ($('#indoor').attr('class') == 'active'){
        $("#commercialBanner img").attr("src", "images/catalog/indoorBanner.jpg");
    };  
    if ($('#outdoor').attr('class') == 'active'){
        $("#commercialBanner img").attr("src", "images/catalog/outdoorBanner.jpg");
    };  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:36:59.727

您似乎错误地检查了类属性 - 您在一个元素上有多个类，所以：

```
$('#indoor').attr('class') is 'ext active' or 'ext' 
```

正如@epascarello 所述：使用 hasClass("active")。

看到这个：

[jQuery 的 attr - 返回多个类，而不仅仅是第一个](https://stackoverflow.com/questions/2820916/jquerys-attr-return-multiple-classes-not-just-the-1st)

# html - 是否可以通过 :after 伪 CSS 选择器在 svg 标签内使用插入 img？

> ID：13725443
> 
> 赞同：3
> 
> 时间：2012-12-05T14:28:32.120
> 
> 标签：html, css, svg

我有一系列`<circle>`通过`<svg>`. 我想在每个圆圈旁边添加一个图标，我正在尝试通过：

```
.node:after {
      content:url(/img/icon.png);
} 
```

选择器是正确的，因为我在 Firebug 中看到它，但没有显示图标。我在尝试做一些不可能的事情吗？为什么我在某处看不到我的图标？

额外的问题：是否可以将此图标相对于圆形元素的中心定位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:55:15.943

我们会忽略 Firefox 中 SVG 标记中生成的内容，因此您将无法以这种方式执行此操作。您必须`<image>`使用 javascript 创建元素。

SVG 规范没有提到 :before 和 :after。它真的只在你有相对定位的html中才有意义，所以下一个项目会自动定位在前一个项目之后，而不是在所有东西都绝对定位的SVG中。

您必须尝试其他浏览器以查看它是否在那里工作，但我真的不知道他们如何明智地实现它。

# svn - Tortoise 如何在使用 WinMerge 提交之前查看更改？

> ID：13725444
> 
> 赞同：0
> 
> 时间：2012-12-05T14:28:38.410
> 
> 标签：svn, tortoisesvn, winmerge

是否可以在提交之前使用 Winmerge 查看与以前版本的文件更改？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:38:44.327

当然。

右键单击版本控制下的文件夹或文件，然后`Tortoise SVN->Settings`从弹出菜单中选择。

导航到`External Programs->Diff Viewer`左侧树视图中的项目。检查顶部的单选按钮，然后输入 WinMerge 的信息`External`。`Configure the program used for comparing different revisions of files`请参阅`TortoiseSVN Help file`（单击`Help`上述对话框右下角的按钮）以获取命令行选项（包括 WinMerge 所需的确切选项）。

# android - Android App 中没有滚动

> ID：13725450
> 
> 赞同：1
> 
> 时间：2012-12-05T14:28:50.767
> 
> 标签：android, cordova, html5-canvas

我正在使用 HTML/Canvas、Javascript 和 CSS 开发一个带有 Phonegap 的 Android 应用程序。使用下面的代码，我将画布拉伸到全屏。

```
var canvas = $("#mycanvas");
var ctx = canvas.get(0).getContext("2d");
canvas.attr("width", $(window).get(0).innerWidth);
canvas.attr("height", $(window).get(0).innerHeight);
ctx.clearRect(0, 0, canvas.width, canvas.height); 
```

我还在 AndroidManifest.xml 文件中修复了横向视图。

```
android:screenOrientation="landscape" 
```

在 config.xml 中，我要求全屏显示。

```
<preference name="fullscreen" value="true" /> 
```

到目前为止一切顺利，但有一个大问题。我可以从屏幕上滚动我的应用程序，尽管那里没有内容。我只看到一个深灰色的背景。

有谁知道如何解决这个问题？我会很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:32:01.210

我建议您使用 Viewport Meta-tag 尝试一下。这将使您的 html 文档正确缩放。 [https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

# ruby-on-rails-3 - Rspec，FactoryGirl 找不到 ActiveRecord 方法

> ID：13725451
> 
> 赞同：0
> 
> 时间：2012-12-05T14:28:53.057
> 
> 标签：ruby-on-rails-3, rspec2, factory-bot

我正在尝试在一个非常简单的 CRUD Rails 3.2.8 应用程序中学习 Rspec。我遵循迈克尔·哈特尔（Michael Hartl）示例的一般模式，并且在外用黄瓜方面取得了一定的成功。现在我想测试 Twilio SMS 功能，但似乎无法进入第一垒，主要是因为我没有问正确的问题，所以我希望在这里得到纠正并回到正轨。我的应用程序有两个模型，商品和价格，它们在我的黄瓜测试中相互交互，所以它出现了。我知道，就像在黄瓜中一样，我需要一个对象来开始测试它的交互。在我的价格控制器中，我看到我可以在我的价格#create 方法中使用以下内容获取商品的价格：

```
 @price = @commodity.prices.build(params[:price]) 
```

我最终想创建一个工厂，对给定的商品有很多价格。但我想先到基地。按照他们自述文件中的thinkbot示例，我正在rails控制台中尝试以下操作：

```
 FactoryGirl.create(:commodity) do |price|
   Commodity.prices.build(attributes_for(:price))
 end 
```

结果是： NoMethodError: undefined method `prices' for # 嗯，我一定不理解 Rspec 或 Factory Girl。这是我的基本工厂.rb：

```
 FactoryGirl.define do
   factory :commodity do
     name "corn"
   end

   sequence :price do |n|
     price
     date { Time.now }
   end
 end 
```

这是我的两个模型：

```
 class Commodity < ActiveRecord::Base
   attr_accessible :description, :name
   has_many :prices
 end

 MOST_RECENT = 5
 class Price < ActiveRecord::Base
   attr_accessible :buyer, :date, :price, :quality, :commodity_id
   scope :most_recent, lambda { order("id desc").limit(MOST_RECENT) }
    belongs_to :commodity
 end 
```

我试图理解这一点是在 Rails 控制台中简单地做到这一点，但是当我运行 rspec 时也会出现错误。但为什么 FactoryGirl 或 Rspec 似乎不使用我通过 Active Record 获得的价格方法？显然，我不了解某些内容，否则我会在 Stack、thanx、sam 上找到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:59:36.127

在你`FactoryGirl.create`有几个问题。首先， block 参数应该是`commodity`，而不是`price`。 `create`将创建的对象传递到块中。其次，你正试图`prices`在`Commodity`课堂上奔跑。在您的对象关系中，`prices`是与特定实例关联的访问器。没有`Commodity#prices`方法，但任何给定的实例`Commodity`都会有`prices`. 您可能可以`build`这样使用，但我认为规范的方法是使用 shift 运算符添加一个`Price`.

把它放在一起可以让你：

```
FactoryGirl.create(:commodity) do |commodity|
  commodity.prices << FactoryGirl.create(:price, commodity: commodity)
end 
```

我不确定您`sequence`在商品工厂定义中的用途。如果您试图确保默认情况下使用价格创建商品（而不像上面那样添加它们），请查看[http://icelab.com.au/articles/factorygirl-and-has-many上的一些提示-协会/](http://icelab.com.au/articles/factorygirl-and-has-many-associations/)。

# jsf - 如何在选择行时获取选定的 ap:datatable 行？

> ID：13725456
> 
> 赞同：3
> 
> 时间：2012-12-05T14:29:04.707
> 
> 标签：jsf, primefaces, datatable

如果用户选择一行，我想直接获取我的数据表的选定行。

我已经添加了

```
 <p:dataTable id="dataTableID" var="row"
                    value="#{bean.value}"
                    rowKey="${row.id}"
                    selection="#{bean.selectedValue}" selectionMode="single"> 
```

点击按钮后才有可能得到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T16:17:48.120

primefaces dataTable 中有两个用于即时行选择的 ajax 事件。一个用于选择，一个用于取消选择。

```
<p:dataTable ..>
    <p:ajax event="rowSelect" listener="#{yourBean.someListener}"/>
    ...
</p:dataTable> 
```

现在您可以像这样访问选定的项目（Foo 类）：

```
public void someListener(SelectEvent event) {  
    (Foo) event.getObject()     // cast "Object" to "Foo" 
} 
```

有关更多信息，请先查看 primefaces 展示：http: [//www.primefaces.org/showcase/ui/datatableRowSelectionInstant.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionInstant.jsf)

# dll - VBS - 注册和使用 Dsofile Windows 7 64 位

> ID：13725459
> 
> 赞同：1
> 
> 时间：2012-12-05T14:29:07.397
> 
> 标签：dll, vbscript, dllregistration, dsofile

我正在尝试在 Windows 7 64 位机器上使用带有 VBS 脚本的[Dsofile 。](http://technet.microsoft.com/en-us/library/ee692828.aspx)我相信我的问题在于注册 DLL。

我用它来注册DLL

```
regsvr32 D:\Desktop\dsofile.dll 
```

有人告诉我

```
"DllRegisterServer in D:\Desktop\dsofile.dll succeeded." 
```

让我相信一切正常。当我尝试运行 Microsoft 提供的测试代码时

```
Set objFile = CreateObject("DSOFile.OleDocumentProperties")
objFile.Open("D:\Desktop\test.xls")
Wscript.Echo "Author: " & objFile.SummaryProperties.Author 
```

它在第一行失败，说明

```
"ActiveX component can't create object: 'DOSFile.OLEDocumentProperties" 
```

这让我相信 DLL 实际上没有正确注册。

[然后，我尝试根据此](https://stackoverflow.com/a/4885637/1117216)解决方案注册 DLL，方法是执行以下操作

```
cd \Windows\SysWOW64
regsvr32 C:\dsofile.dll 
```

它还告诉我它注册正确，但脚本在第一行再次失败。

我该如何解决这个问题，以便我可以使用 Dsofile？

谢谢。

# iphone - UIText 字段的空白问题

> ID：13725460
> 
> 赞同：1
> 
> 时间：2012-12-05T14:29:08.803
> 
> 标签：iphone, ios, ipad

我有一个允许空间的 UITextField

使用以下代码片段，它会修剪字符串中的所有空白（文本字段文本）

```
NSCharacterSet *whitespace = [NSCharacterSet whitespaceAndNewlineCharacterSet];
NSString *trimmed = [rawString stringByTrimmingCharactersInSet:whitespace]; 
```

但我只想修剪文本的起始空间，这意味着

示例：@"SAMPLE TEXT"= @"SAMPLE TEXT"

任何人都可以帮助我如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:52:51.090

```
NSString *str = @" SAMPLE TEXT";
NSString *newStr = [str substringFromIndex:1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:01:31.333

试试这个：

```
NSString *String = @" SAMPLE TEXT";
NSString *firstLetter = [String substringToIndex:0];
if ([firstLetter isEqualToString:@" "]) 
    String = [String stringByReplacingCharactersInRange:NSMakeRange(0, 1) withString:@""]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:02:39.170

首先找到不是空格或换行符的第一个字符。然后从该字符的位置及以后创建一个子字符串。

```
NSString *justLeaveAPonyTail = @"   Bla bla bla    ";
NSCharacterSet *allExceptWhitespace = [[NSCharacterSet whitespaceAndNewlineCharacterSet] invertedSet];
NSRange range = [justLeaveAPonyTail rangeOfCharacterFromSet:allExceptWhitespace];
if (range.location != NSNotFound) 
{
    justLeaveAPonyTail = [justLeaveAPonyTail substringFromIndex:range.location];
}

// justLeaveAPonyTail is now @"Bla bla bla   " 
```

# php - Preg_replace 给出了错误的 URL

> ID：13725470
> 
> 赞同：0
> 
> 时间：2012-12-05T14:29:36.673
> 
> 标签：php, html

我有这部分代码用于我的 txt 到 url 转换

```
$message=preg_replace("/(?i)\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))/", "<a href=\"$1\">$1</a>", $message); 
```

上面的代码在我的 PHP 文件中，用于将 $message（来自用户提交的表单）转换为 html 中的 URL。当用户提供 www.google.com 时，输出为[http://www.MYDOMAIN.com/www.google.com](http://www.MYDOMAIN.com/www.google.com)。我无法弄清楚 `"<a href=\"$1\">$1</a>"`我的问题在哪里。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:45:59.770

像这样的东西

```
$message=preg_replace("/(?i)\b((?:https?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'\".,<>?«»“”‘’]))/", "<a href=\"http://$1\">$1</a>", $message); 
```

# jsf - 带有可滚动标题的 PrimeFaces DataTable

> ID：13725471
> 
> 赞同：0
> 
> 时间：2012-12-05T14:29:52.403
> 
> 标签：jsf, jsf-2, primefaces, scroll

我有一个 PrimeFaces 数据表，我想让它的标题可滚动。我将在标题中嵌入图像，因此当内容向下滚动时，图像应该消失。代码看起来像；

```
 <p:dataTable id="dataTable" liveScroll="true"
                     value="#{....}" var="...." scrollable="true"
                     scrollRows="3"
                     scrollHeight="490" rows="3">
            <f:facet name="header">
                <p:graphicImage value="/images/..."></p:graphicImage>
            </f:facet>
            <p:column ........ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T14:28:03.510

你可以把它放到一个滚动面板中

```
<p:scrollPanel>
     <p:dataTable id="dataTable" liveScroll="true"
                 value="#{....}" var="...." scrollable="true"
                 scrollRows="3"
                 scrollHeight="490" rows="3">
        <f:facet name="header">
            <p:graphicImage value="/images/..."></p:graphicImage>
        </f:facet>
        ...
</p:scrollPanel> 
```

# java - 如何在 Intentservice 上使用 loopj-async-http android 库？

> ID：13725472
> 
> 赞同：1
> 
> 时间：2012-12-05T14:29:55.393
> 
> 标签：java, android, intentservice

我正在尝试使用提供的 SyncClient 创建连接

[https://github.com/loopj/android-async-http](https://github.com/loopj/android-async-http)

我无法连接到我的 Web 服务，它显示了以下日志

```
12-05 19:54:45.397: W/System.err(3836): org.apache.http.client.ClientProtocolException
12-05 19:54:45.397: W/System.err(3836):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:557)
12-05 19:54:45.397: W/System.err(3836):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-05 19:54:45.397: W/System.err(3836):     at com.loopj.android.http.AsyncHttpRequest.makeRequest(AsyncHttpRequest.java:75)
12-05 19:54:45.397: W/System.err(3836):     at com.loopj.android.http.AsyncHttpRequest.makeRequestWithRetries(AsyncHttpRequest.java:94)
12-05 19:54:45.397: W/System.err(3836):     at com.loopj.android.http.AsyncHttpRequest.run(AsyncHttpRequest.java:56)
12-05 19:54:45.397: W/System.err(3836):     at com.loopj.android.http.SyncHttpClient.sendRequest(SyncHttpClient.java:66)
12-05 19:54:45.407: W/System.err(3836):     at com.loopj.android.http.AsyncHttpClient.get(AsyncHttpClient.java:340)
12-05 19:54:45.407: W/System.err(3836):     at com.loopj.android.http.AsyncHttpClient.get(AsyncHttpClient.java:329)
12-05 19:54:45.407: W/System.err(3836):     at net.connectedu.service.AlarmService.checkAppStatus(AlarmService.java:151)
12-05 19:54:45.407: W/System.err(3836):     at net.connectedu.service.AlarmService.doWakefulWork(AlarmService.java:146)
12-05 19:54:45.407: W/System.err(3836):     at com.commonsware.cwac.wakeful.WakefulIntentService.onHandleIntent(WakefulIntentService.java:108)
12-05 19:54:45.407: W/System.err(3836):     at android.app.IntentService$ServiceHandler.handleMessage(IntentService.java:65)
12-05 19:54:45.418: W/System.err(3836):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-05 19:54:45.418: W/System.err(3836):     at android.os.Looper.loop(Looper.java:137)
12-05 19:54:45.418: W/System.err(3836):     at android.os.HandlerThread.run(HandlerThread.java:60)
12-05 19:54:45.418: W/System.err(3836): Caused by: org.apache.http.client.CircularRedirectException: Circular redirect to 'https://localhost/api/get_logs/lalith/'
12-05 19:54:45.427: W/System.err(3836):     at org.apache.http.impl.client.DefaultRedirectHandler.getLocationURI(DefaultRedirectHandler.java:173)
12-05 19:54:45.427: W/System.err(3836):     at org.apache.http.impl.client.DefaultRequestDirector.handleResponse(DefaultRequestDirector.java:923)
12-05 19:54:45.437: W/System.err(3836):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:475)
12-05 19:54:45.437: W/System.err(3836):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-05 19:54:45.437: W/System.err(3836):     ... 14 more 
```

这可能是什么原因？loopj 中的同步库工作正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:19:29.317

我刚刚发现了如何在 loopj-android http lib 中使用同步库：下面是示例。我能够在第一次触发警报时得到响应，但是在下次安排警报接收器时我会得到上面的代码。希望能找到一些答案:(

```
String content = ConnectionManager.getSyncClient.get("http://www.google.com"); 
```

下次请求到来时，我得到了上面的异常。:(

我在库中发现了错误，它不允许循环重定向。我想，会有其他人有类似的问题。我发现这篇文章很有帮助，

[使用 HttpClient 4.1.1 避免循环重定向](https://stackoverflow.com/questions/6698214/avoid-circular-redirect-using-httpclient-4-1-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T07:36:58.127

在发送您请求的 URL 之前，检查您的请求是否未发送到代理。我发现一些移动服务提供商会对您的所有请求应用内容调整或内容变形，以确保请求的站点适用于移动视图，这意味着您的请求没有从代理正确重定向。您可以检查移动设备上的互联网设置，以确保您的连接没有通过代理重定向。

这可以在**无线和网络设置**->**移动网络**->**接入点名称**-> 然后您选择的互联网项目下找到

由于您似乎正在使用 localhost 您也可以尝试绕过这样的错误：

AsyncHttpClient 客户端 = new AsyncHttpClient();
client.getHttpClient().getParams().setParameter(ClientPNames.ALLOW_CIRCULAR_REDIRECTS, true);

如果您收到需要解析的响应并且您收到解析异常并假设您的解析代码是正确的，那么很可能是因为您收到的是来自代理服务器的响应而不是请求的响应

# java - Java：间隔中的随机长值

> ID：13725478
> 
> 赞同：15
> 
> 时间：2012-12-05T14:30:02.517
> 
> 标签：java, random, long-integer, intervals

> **可能重复：**
> [Java：0 <= x < n 范围内的随机长数](https://stackoverflow.com/questions/2546078/java-random-long-number-in-0-x-n-range)

我想在一个区间内生成一个随机长值，但似乎 Random 类 nextLong() 不接受像 nextInt() 这样的参数。我可以在这里做什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-05T14:33:39.310

如果您想要基于范围的长值，请执行以下操作：

```
 long LOWER_RANGE = 0; //assign lower range value
 long UPPER_RANGE = 1000000; //assign upper range value
 Random random = new Random();

 long randomValue = LOWER_RANGE + 
                           (long)(random.nextDouble()*(UPPER_RANGE - LOWER_RANGE)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T17:27:49.353

您可以使用 nextInt 生成更高和更低的长整数。甚至可以使用您自己的 nextLong 方法扩展 Random 类（即使对于更严肃的编程来说，组合可能是更安全的选择）。

看一下 nextInt(int n) 的 Javadoc。可以使用相同的算法实现 nextLong 方法。把它做好可能会有点棘手。准备用笔和纸做一些数学运算。如果您不只是为了好玩而编写代码，那么使用经过验证的库是明智的。

# asp.net-membership - 具有自定义字段的 Membership.CreateUser

> ID：13725480
> 
> 赞同：0
> 
> 时间：2012-12-05T14:30:07.180
> 
> 标签：asp.net-membership

在 asp.net 中，我使用 Membership，我使用过 Membership.CreateUser(login, password, email, null, null, true, out status); 但我有一个要求，我想从用户那里获得更多信息，例如联系电话和短名称

系统已使用 aspnet_regsql.exe 创建了成员资格表，但我已经满足了更多自定义列的要求

我怎样才能储存它们

我是否修改了这些表，但同时 Membership.CreateUser 只有有限的实体请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:34:00.770

您可以使用 asp.net Membership Profiles。但我发现它非常有限。对于我的上一个项目，我创建了一个单独的表，其中包含特定的列来保存额外的数据。PK 是用户名。然后我会简单地查询自定义属性。

```
var profile = context.Set<Profile>().Find(User.Identity.Name); 
```

您可能还想查看 Universal Membership Provider。它比 asp.net 会员提供程序灵活得多。

# mfc - 在我的应用程序中使用指定的主题

> ID：13725481
> 
> 赞同：0
> 
> 时间：2012-12-05T14:30:06.910
> 
> 标签：mfc

我正在 MFC 下开发，我想配置 CProgressBar 的颜色。

我有一个主题，当我运行我的程序时，我有一个很好的进度条，所以我的目标是知道当我使用任何其他 Windows 主题时如何产生相同的颜色模式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:51:01.803

您可以使用子类化来创建自己的自定义控件。子类化控件可以更改默认行为，因此通过处理绘制事件，您可以为控件提供所需的颜色，而不管当前主题如何。 [http://www.codeguru.com/cpp/controls/controls/progresscontrols/article.php/c2349/Enhanced-ProgressBar-Control-v11.htm](http://www.codeguru.com/cpp/controls/controls/progresscontrols/article.php/c2349/Enhanced-ProgressBar-Control-v11.htm) http://www.codeproject.com/Articles/7663/Status-Progress -反馈 [http://msdn.microsoft.com/en-us/library/windows/desktop/bb775501(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775501(v=vs.85).aspx)

# jquery - 如何将 div 放在不同的图层上？

> ID：13725487
> 
> 赞同：0
> 
> 时间：2012-12-05T14:30:18.877
> 
> 标签：jquery, css, z-index

CSS

```
#div1{
    height:50px;
    visibility:hidden;
    position:relative;
    z-index:1;
}

#div2{
    margin-top:70px:
    position:relative;
    z-index:0;
} 
```

JavaScript：

```
function switch01(){
    $("#div1").slideToggle("slow");
}; 
```

我预计在滑动过程中会`#div1`重叠`#div2`，因为它的 z-index 较高。就像在不同的图层上一样。但相反，`#div1`推`#div2`低增加了其最高利润率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:07:39.813

要获得您想要的“重叠”效果，您需要从布局流中删除滑动元素。

这是通过将 设置`position`为`absolute`或`fixed`

这是您要执行的操作的工作示例...

HTML

```
<a id="button" href="#">Click me!</a>
<div id="div1">Slides on Top</div>
<div id="div2">Rests in bottom</div> 
```

CSS

```
#div1 {
    height:100px;
    position:absolute;
    background-color: red;
    display: none;
}

#div2 {
    margin-top:10px;
    background-color: green;
} 
```

JS

```
$("#button").click(function () {
    $("#div2").slideToggle("slow");
}); 
```

有关`position`属性的更多信息，请[单击此处](http://www.barelyfitz.com/screencast/html-training/css/positioning/)。
希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:34:31.520

切换到绝对定位

```
#div1{
height:50px;
visibility:hidden;
position:absolute;
z-index:1;
}

#div2{
margin-top:70px:
position:absolute;
z-index:0;
} 
```

# python - 带编码的 SoupStrainer

> ID：13725489
> 
> 赞同：0
> 
> 时间：2012-12-05T14:30:29.937
> 
> 标签：python, beautifulsoup

我在下面写了一行：

```
[x['href'] for x in BeautifulSoup(data, parseOnlyThese=SoupStrainer('a'))] 
```

数据是`urllib.urlopen(XXX).read()`在python2.7中实现的。

当 XXX 是由全部英文字符组成的页面时，它可以很好地工作，例如[http://python.org](http://python.org)。但是当它去一个页面有一些汉字时，它就失败了。会有一个KeyError。并`[x for ...]`返回一个空列表。

更重要的是，如果没有`parseOnlyThese=SoupStrainer('a')`，两者都可以。

SoupStrainer 有什么错误吗？

```
from BeautifulSoup import BeautifulSoup, SoupStrainer
import urllib

data = urllib.urlopen('http://tudou.com').read()
[x['href'] for x in BeautifulSoup(data, parseOnlyThese=SoupStrainer('a'))] 
```

给出回溯：

```
Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    [x['href'] for x in BeautifulSoup(data, parseOnlyThese=SoupStrainer('a'))]
  File "F:\ActivePython27\lib\site-packages\beautifulsoup-3.2.1-py2.7.egg\BeautifulSoup‌​.py", line 613, in __getitem__
    return self._getAttrMap()[key]
KeyError: 'href' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:43:38.933

`<a>`该页面上有没有*属性*`href`的链接。请改用以下内容：

```
[x['href'] for x in BeautifulSoup(data, parseOnlyThese=SoupStrainer('a')) if x.has_key('href')] 
```

例如，用`<a name="something" />`;声明链接目标是完全正常的。您也在选择这些标签，但它们没有`href`属性，并且您的代码在该属性上失败。

# javascript - 主干获取复杂结构

> ID：13725496
> 
> 赞同：0
> 
> 时间：2012-12-05T14:30:58.430
> 
> 标签：javascript, backbone.js

我在主干上有 3 个模型：

```
var Level1Model = Backbone.Model.extend({
    defaults: {
        level2Collection: null
    }
});

var Level2Model = Backbone.Model.extend({
    defaults: {
        level3Collection: null,
        text: null
    }
});

var Level3Model = Backbone.Model.extend({
    defaults: {
        text: null
    }
}); 
```

我有两个 REST 服务（网址）：
1\. 一个获取 Level1Model id 并返回 Level1Model，Level2Model 和 id 为 Level3。
例如：

```
{
    Level2Collection: [
        { 
            text: "aaa",
            Level3Collection: [ {id:1}, {id:2}, {id:3} ]
        },
        {
            text: "bbb",
            Level3Collection: [ {id:4}, {id:5} ]
        }
    ]
} 
```

2.获取Level3Model id并返回Level3Model数据的一种。

我正在寻找一种方法来获取所有数据结构：

```
var level1Ins = new Level1Model({id:123});
level1Ins.fetch({
    success: function() {
        doSomething();
    }
}); 
```

我真的很困惑如何去做。例如，我不知道如何填充 Level3Collection 并`doSomething()`在成功加载所有元素时调用。
如何加载整个 level1 实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:48:19.650

您应该尝试[Backbone Relational](https://github.com/PaulUithol/Backbone-relational)。它使这种东西很容易使用。

# ruby-on-rails - Rails 种子文件未创建记录

> ID：13725498
> 
> 赞同：2
> 
> 时间：2012-12-05T14:31:04.493
> 
> 标签：ruby-on-rails

我正在为 Rails 项目播种数据库，但未创建我的一条记录。我可以在 rails 控制台中使用完全相同的语法创建它，但它在种子文件中不起作用。这是种子文件中的代码：

```
admin = Admin.find_by_email('example@example.com')
if !admin
admin = Admin.create(:email => 'example@example.com', :password => 'password',              :password_confirmation => 'password', :first_name =>
 'example', :last_name => 'admin')
end

if !Project.find_by_name('Templates')
  Project.create(:name => 'Templates', :admin => admin)
  if Project.find_by_name("Templates")
     puts "Project Found"
  else
    puts "Project not Found"
  end  
end 
```

当我运行“rake db:seed”时，它总是说“找不到项目”。如果我在 rails 控制台中运行相同的 create 语句，它会返回创建的 Project 对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:38:10.760

我认为这可能是因为您正在尝试创建无效的记录。我习惯在种子文件中使用 banged 方法（`save!`/ `create!`）来防止此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:12:29.720

首先猜测，您是否应该在创建项目时引用管理员 ID？项目表中的列实际上是“admin_id”吗？

```
Project.create(:name => 'Templates', :admin_id => admin.id) 
```

我要尝试的第二件事是在您创建管理员的位之后放置一个放置，以确保该位有效。您无话可说，在项目位失败之前该位是否有效。

编辑1：

尝试在种子文件的下半部分执行类似的操作，如果该步骤不起作用，它应该输出错误：

```
project = Project.find_or_initialize_by_name_and_admin('Templates', admin)
puts project.errors if project.nil? 
```

# autocomplete - 自动完成文本字段 CJuiAutoComplete 小部件 yii 存储隐藏字段 id 和显示名称

> ID：13725507
> 
> 赞同：3
> 
> 时间：2012-12-05T14:31:39.580
> 
> 标签：autocomplete, yii

我正在通过在自动完成文本字段中显示名称并存储隐藏字段 id 值来寻找自动完成功能。

当我检查网络时，我得到了名称和 ID。但能够显示名称但它没有选择记录的 ID，因此无法存储 ID

谁能给我任何用于自动完成的链接/代码。是否有任何有效的链接/代码请..

自动完成类:::

```
class EAutoCompleteAction extends CAction{
public $model;
public $attribute;
public $id;
private $results = array();
public $returnVal = '';
public function run()
{
    if(isset($this->model) && isset($this->attribute)) {
        $criteria = new CDbCriteria();
        $criteria->compare($this->attribute, $_GET['term'], true);
        $model = new $this->model;
        foreach($model->findAll($criteria) as $m)
        {
            $this->results[] = $m->{$this->attribute};
            $this->results[] = $m->{$this->id};
            //$this->results[] = array(
            //      'name' => $m->{$this->attribute},
            //      'id'=> $m->id
            //);

        }
    }

    echo CJSON::encode($this->results);
}
} 
```

我正在使用这样的控制器/动作::

```
public function actions()
{
    return array(
        'aclist'=>array(
            'class'=>'application.extensions.EAutoCompleteAction',
            'model'=>'Organisation', //My model's class name
            'attribute'=>'name', //The attribute of the model i will search

        )

} 
```

在我看来 form.php。

```
 <div class="row">
    <?php echo $form->labelEx($model,'organsiation'); ?>
    <?php echo $form->hiddenField($model,'organisation_id',array()); ?>
    <?php
$this->widget('zii.widgets.jui.CJuiAutoComplete', array(
'attribute'=>'organisation_id',
'model'=>$model,
'sourceUrl'=>array('benefit/aclist'),
'value'=>'Please select',
'name'=>'name',
'id'=>'organisation_id',
'options'=>array(
    'minLength'=>'2',
     'select'=>"js:function(event, ui) {
 alert(ui.item.id);
                                    $('#organisation_id').val(ui.item.id);
                                    }",
),
'htmlOptions'=>array(
'size'=>45,
'maxlength'=>45,
),
)); ?>
<?php echo $form->error($model,'organisation_id'); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-06T02:04:53.860

这是我的自动完成代码

1.  创建一个返回 json 的动作

    ```
    public function listaItemMarcaAction(){
        $cmd = Yii::app()->db->createCommand();
        $cmd->select('id, nombre as value, nombre as label, pais_origen');
        $cmd->from('item_marca');
        $cmd->where('nombre like :term', array(':term'=>'%'.request()->getParam('term').'%'));
        $data = $cmd->queryAll();
        header('Content-type: application/json');
        echo CJavaScript::jsonEncode($data);
        Yii::app()->end();
    } 
    ```

2.  创建自动完成字段和隐藏字段（在视图文件中，例如 _form.php）

    ```
    <?php echo $form->labelEx($model,'marca_id'); ?>
    <?php echo $form->hiddenField($model,'marca_id'); ?>
    <?php $this->widget('zii.widgets.jui.CJuiAutoComplete', array(
        'name'=>"Item[marca]",
        'value'=>$model->isNewRecord ? null : $model->marca->nombre,
        'sourceUrl'=>Yii::app()->createUrl('/item/listaitemmarca'),
        'options'=>array(
            'minLength'=>1,
            'change'=>'js:function(event,ui){fn_item_data(event,ui)}'
        ),
    )); ?> 
    ```

3.  创建一个 javascript 函数以通过自动完成设置值 retreives。注意：只使用更改事件，不再需要。在示例中，ActiveRecord 是“Item”，那么输入的 id 将是 Item_marca_id 和 Item_marca。

    ```
    function fn_item_data(event,ui){
        if(!ui.item){
            $("#Item_marca_id").val("");
            $("#Item_marca").val("");
        }else{
            $("#Item_marca_id").val(ui.item.id);
            $("#Item_marca").val(ui.item.value);
            //and use ui.item.pais_origen for another things
            if(ui.item.pais_origen == 'EEUU') alert('ok');
        }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T17:59:05.153

在您的情况下，我将从普通的 JQuery 而不是客户端的 CJuiAutoComplete 开始。[JQuery UI 文档在http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)上有一个很好的演示，其中包含工作源代码。要使事情正常进行，需要三个基本步骤：

1.  以 JSON 对象数组的形式提供数据，而不是字符串。

2.  使用自定义`_renderItem`函数将您的 JSON 对象呈现为可读的字符串。

3.  使用自定义函数将所选 JSON 对象的`select`可见记录到文本字段中，并将该对象记录到隐藏字段中。`name``id`

要进行第 1 步，您需要取消注释 EAutoCompleteAction 部分的注释，并删除其上方的两行。之后，您应该能够在`alert()`消息中看到项目 ID 和名称。

使用 CJuiAutoComplete第 2 步（覆盖`_renderItem`）特别棘手，这就是我建议使用纯 JQuery UI 的原因。有关纯 JQuery UI 的示例，请参见[上面的链接](http://jqueryui.com/autocomplete/#custom-data)。可以在 Yii 文档的评论部分找到 CJuiAutoComplete 的示例：[http](http://www.yiiframework.com/doc/api/1.1/CJuiAutoComplete#c8376) ://www.yiiframework.com/doc/api/1.1/CJuiAutoComplete#c8376 。在第 2 步之后，您应该能够看到可读的自动完成建议。

要进行第 3 步，您需要添加类似

```
$('#organisation_name').val( ui.item.name ); 
```

进入您的`select`函数，前提是这`organisation_name`是您的文本字段`organisation_id`的 id 并且是隐藏表单字段的 id（您需要进行一些更改才能做到这一点）。

# git - 如何找到提交合并到分支的时间

> ID：13725508
> 
> 赞同：1
> 
> 时间：2012-12-05T14:31:40.867
> 
> 标签：git

Git blame 显示对文件所做的更改。我想知道该更改何时合并到我们的实时分支中。

我可能可以用图形客户端来追踪它，但是还有很多其他的提交正在进行。提交不在实时分支的前几次合并中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:56:04.547

~~`git show <commit_hash>`将为您提供有关提交的详细信息。~~

做这个

`git rev-list <commit_hash>..<branch> --first-parent`

`git rev-list <commit_hash>..<branch> --ancestry-path`

最后一行共同将是您正在寻找的提交哈希。

您可以将它们都存储在单独的文件中，然后`sdiff`快速识别它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:03:45.377

如果我理解正确，你想要的应该是这样的：

```
git log --merges <interesting_hash>..<live_branch> 
```

这至少似乎在一次性合并情况下有效。不确定它将如何在持续集成场景中发挥作用，其中两个分支之间可能发生了多次合并（尽管在这种情况下，至少它缩小了您需要查看的位置集）......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T08:29:40.513

假设您的 git 流程是这样的：您将测试代码推送到`master`（或`production`）分支，一旦准备好，您只需将`master`分支拉到生产环境中。在这种情况下，如果你想知道“什么时候”你做了`pull`或`merge`（是昨天吗？上周？），你可以使用`reflog`如下：

命令： `git reflog show --date=default`

输出：

`5c4f140 HEAD@{Mon Aug 10 05:36:24 2015 +0000}: pull origin: Fast-forward 1ba6e4e HEAD@{Wed Aug 5 14:40:50 2015 +0000}: pull origin: Fast-forward 05382e4 HEAD@{Wed Jul 22 12:27:20 2015 +0000}: pull origin: Fast-forward bad194c HEAD@{Wed Jul 22 09:54:01 2015 +0000}: pull origin: Fast-forward 016f6cb HEAD@{Sat Jul 18 04:53:56 2015 +0000}: pull origin: Fast-forward b4839d3 HEAD@{Mon Jul 6 07:35:23 2015 +0000}: pull origin: Fast-forward`

# php - Order BY - 用相同的链接改变方向

> ID：13725511
> 
> 赞同：1
> 
> 时间：2012-12-05T14:32:00.810
> 
> 标签：php, mysql

我正在为某人做一个库存系统。我希望能够单击表头中的链接并使其按 PN 和 ASC 排序。然后，如果我再次单击 PN，按 DESC。但我也想通过描述订购它并做同样的事情。到目前为止，这是我的代码。我无法弄清楚如何让它轻松交换方向（ASC，DESC）。

```
 if (!isset($cd))
        {
            $cd = 0;
        }
        if (isset($_SESSION['direction']) && $cd == 1)
        {
            if ($_SESSION['direction'] == 'DESC')
            {
                $_SESSION['direction'] = 'ASC';
                $cd = 0;
            } elseif ($_SESSION['direction'] == 'ASC') 
            {
                $_SESSION['direction'] = 'DESC';
                $cd = 0;
            }
        } else
        {
            $_SESSION['direction'] = 'ASC';
        }
        if (isset($_REQUEST['sort']))
        {
            if ($_REQUEST['sort'] == 'pn')
            {
                $sql=mysql_query("select * from inventory ORDER BY pn {$_SESSION['direction']}");
            } elseif ($_REQUEST['sort'] == 'description') {
                $sql=mysql_query("select * from inventory ORDER BY description {$_SESSION['direction']}");
            } elseif ($_REQUEST['sort'] == 'wholesale') {
                $sql=mysql_query("select * from inventory ORDER BY wholesale {$_SESSION['direction']}");
            } elseif ($_REQUEST['sort'] == 'list') {
                $sql=mysql_query("select * from inventory ORDER BY list {$_SESSION['direction']}");
            } elseif ($_REQUEST['sort'] == 'stock') {
                $sql=mysql_query("select * from inventory ORDER BY stock {$_SESSION['direction']}");
            } elseif ($_REQUEST['sort'] == 'location') {
                $sql=mysql_query("select * from inventory ORDER BY location {$_SESSION['direction']}");
            }
        } else {
            $sql=mysql_query("select * from inventory ORDER BY pn {$_SESSION['direction']}");
        }      
        echo "<center><table class=\"myTable\">
        <th><a href=\"inventory.php?mode=list&sort=pn\">PN</a></th><th><a href=\"inventory.php?mode=list&sort=description\">Description</a></th><th><a href=\"inventory.php?mode=list&sort=wholesale\">Wholesale</th><th><a href=\"inventory.php?mode=list&sort=list\">List</th><th><a href=\"inventory.php?mode=list&sort=stock\">Stock</th><th><a href=\"inventory.php?mode=list&sort=location\">Location</th><th>Links</th>";
        while ($result=mysql_fetch_array($sql))
        {
            echo "<tr><td>{$result['pn']}</td><td>{$result['description']}</td><td>{$result['wholesale']}</td><td>{$result['list']}</td><td>{$result['stock']}</td><td>{$result['location']}</td><td>[<a href='inventory.php?mode=edit&id={$result['id']}'>Edit</a>]  [<a href='inventory.php?mode=delete&id={$result['id']}'>Delete</a>]  [<a href='orders.php?mode=list_c&id={$result['id']}'>View Orders</a>]</tr>";
        }
        echo "</table></center>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:45:35.977

我不会使用会话进行排序。

只需在您的查询字符串中添加一个方向，然后在您的 php 中针对白名单进行检查。如果不在白名单中，请使用您的默认值。

在您的链接中，您可以使用其他值，例如：

```
<th><a href="inventory.php?mode=list&sort=pn&sort_direction=<?php echo ($sort_order === 'ASC') ? 'DESC' : 'ASC'; ?>">PN</a></th> 
```

你真的应该切换到 PDO / mysqli 和准备好的语句以避免 sql 注入问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:57:56.643

我的天啊。

看看你所拥有的这个大大缩短的代码：

```
$sort_column = 'description'; // the default
$sort_dir = 'DESC'; // the default

$columns = array('pn', 'description', 'wholesale', 'name', 'list', 'stock', 'location');

if (isset($_GET['dir']) && in_array($_GET['dir'], array('ASC', 'DESC'))) {
    $sort_dir = $_GET['dir'];
}
if (isset($_GET['sort']) && in_array($_GET['sort'], $columns))
    $sort_column = $_GET['sort'];
}

$sql = "select * from inventory ORDER BY {$sort_column} {$sort_dir}";

$result = mysql_query($sql);

?>

<center><table class="myTable">
    <th><a href="inventory.php?mode=list&sort=pn<?php if($sort_column == 'pn' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">PN</a></th>
    <th><a href="inventory.php?mode=list&sort=description<?php if($sort_column == 'description' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">Description</a></th>
    <th><a href="inventory.php?mode=list&sort=wholesale<?php if($sort_column == 'wholesale' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">Wholesale</th>
    <th><a href="inventory.php?mode=list&sort=list<?php if($sort_column == 'list' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">List</th>
    <th><a href="inventory.php?mode=list&sort=stock<?php if($sort_column == 'stock' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">Stock</th>
    <th><a href="inventory.php?mode=list&sort=location<?php if($sort_column == 'location' && $sort_dir == 'DESC') echo '&dir=ASC'; ?>">Location</th><th>Links</th>

<?php while ($result=mysql_fetch_array($sql)) { ?>
    <tr>
        <td><?=$result['pn']?></td>
        <td><?=$result['description']?></td>
        <td><?=$result['wholesale']?></td>
        <td><?=$result['list']?></td>
        <td><?=$result['stock']?></td>
        <td><?=$result['location']?></td>
        <td>[<a href="inventory.php?mode=edit&id=<?=$result['id']?>">Edit</a>]  [<a href="inventory.php?mode=delete&id=<?=$result['id']?>">Delete</a>]  [<a href="orders.php?mode=list_c&id=<?=$result['id']?>">View Orders</a>]</td>
    </tr>
<?php } ?>

</table></center> 
```

但是你不应该使用`mysql_*`函数，学习[`PDO`](http://php.net/PDO)或至少[`mysqli_*`](http://php.net/mysqli)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:16:16.290

我接受了你所有的建议，并将它们合二为一！这是我的新代码。谢谢！

```
 if (isset($_REQUEST['direction']))
        {
            $direction = $_REQUEST['direction'];
        } else
        {
            $direction = 'ASC';
        }
        if (isset($_REQUEST['sort']))
        {
            $sort = $_REQUEST['sort'];
        } else
        {
            $sort = 'pn';
        }
        $sql=mysql_query("select * from inventory ORDER BY {$sort} {$direction}");
        echo "<center><table class=\"myTable\">";
            if ($direction == 'DESC')
            {
                echo "<th><a href=\"inventory.php?mode=list&sort=pn&direction=ASC\">PN</a></th>
                      <th><a href=\"inventory.php?mode=list&sort=description&direction=ASC\">Description</a></th>
                      <th><a href=\"inventory.php?mode=list&sort=wholesale&direction=ASC\">Wholesale</th>
                      <th><a href=\"inventory.php?mode=list&sort=list&direction=ASC\">List</th>
                      <th><a href=\"inventory.php?mode=list&sort=stock&direction=ASC\">Stock</th>
                      <th><a href=\"inventory.php?mode=list&sort=location&direction=ASC\">Location</th>
                      <th>Links</th>";

            } else 
            {
                echo "<th><a href=\"inventory.php?mode=list&sort=pn&direction=DESC\">PN</a></th>
                      <th><a href=\"inventory.php?mode=list&sort=description&direction=DESC\">Description</a></th>
                      <th><a href=\"inventory.php?mode=list&sort=wholesale&direction=DESC\">Wholesale</th>
                      <th><a href=\"inventory.php?mode=list&sort=list&direction=DESC\">List</th>
                      <th><a href=\"inventory.php?mode=list&sort=stock&direction=DESC\">Stock</th>
                      <th><a href=\"inventory.php?mode=list&sort=location&direction=DESC\">Location</th>
                      <th>Links</th>";
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-01T08:53:21.223

```
 $_SESSION['sort'] = isset($_REQUEST['sort']) ? $_REQUEST['sort'] : 'DESC';
    $sort = $_SESSION['sort'];

    if (isset($sort) && $sort == 'DESC')
    {
        $columns->name = "<a href='?sort=ASC&pageno=$pageno'> $columns->name </a>";
        echo $columns->name;
    } 
    else
    {
        $columns->name = "<a href='?sort=DESC&pageno=$pageno'> $columns->name </a>";
        echo $columns->name;

    }

//   kamalj27@gmail.com 
```

# c++ - 如何在 Visual Studio C++ 2010 中将 BSTR 转换为 std::string？

> ID：13725519
> 
> 赞同：6
> 
> 时间：2012-12-05T14:32:25.213
> 
> 标签：c++, api, visual-studio-2010, com

我正在研究一个 COM dll。我希望将 BSTR 转换为 std::string 以传递给采用 const 引用参数的方法。

似乎使用 _com_util::ConvertBSTRToString() 来获取 BSTR 的 char* 等效项是一种合适的方法。但是，API 文档很少，并且实现可能存在错误：

[http://msdn.microsoft.com/en-us/library/ewezf1f6(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ewezf1f6(v=vs.100).aspx) http://www.codeproject.com/Articles/1969/BUG-in-_com_util-ConvertStringToBSTR-and- _com_util

例子：

```
#include <comutil.h>
#include <string>

void Example(const std::string& Str) {}

int main()
{
    BSTR BStr = SysAllocString("Test");
    char* CharStr = _com_util::ConvertBSTRToString(BStr);
    if(CharStr != NULL)
    {
        std::string StdStr(CharStr);
        Example(StdStr);
        delete[] CharStr;
    }
    SysFreeString(BStr);
} 
```

使用 ConvertBSTRToString() 的替代方法的优缺点是什么，最好基于标准方法和类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-05T15:40:22.150

你可以自己做。如果可能的话，我更喜欢转换成目标`std::string`。如果不是，请使用临时值覆盖。

```
// convert a BSTR to a std::string. 
std::string& BstrToStdString(const BSTR bstr, std::string& dst, int cp = CP_UTF8)
{
    if (!bstr)
    {
        // define NULL functionality. I just clear the target.
        dst.clear();
        return dst;
    }

    // request content length in single-chars through a terminating
    //  nullchar in the BSTR. note: BSTR's support imbedded nullchars,
    //  so this will only convert through the first nullchar.
    int res = WideCharToMultiByte(cp, 0, bstr, -1, NULL, 0, NULL, NULL);
    if (res > 0)
    {
        dst.resize(res);
        WideCharToMultiByte(cp, 0, bstr, -1, &dst[0], res, NULL, NULL);
    }
    else
    {    // no content. clear target
        dst.clear();
    }
    return dst;
}

// conversion with temp.
std::string BstrToStdString(BSTR bstr, int cp = CP_UTF8)
{
    std::string str;
    BstrToStdString(bstr, str, cp);
    return str;
} 
```

调用为：

```
BSTR bstr = SysAllocString(L"Test Data String")
std::string str;

// convert directly into str-allocated buffer.
BstrToStdString(bstr, str);

// or by-temp-val conversion
std::string str2 = BstrToStdString(bstr);

// release BSTR when finished
SysFreeString(bstr); 
```

反正就是这样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T15:25:43.187

简单的方法

BSTR => CStringW => CW2A => std::string。

# c# - Nhibernate 子类存储为元数据

> ID：13725521
> 
> 赞同：0
> 
> 时间：2012-12-05T14:32:31.000
> 
> 标签：c#, nhibernate, subclass

我有以下课程：

```
public abstract class AbstractFoo
{        
    public virtual int Id { get; set; }
}

public class Foo : AbstractFoo
{
    public virtual string MyProp {get; set; }
} 
```

我在我的休眠映射文件中表示它：

```
<class name="AbstractFoo">
 <id name="Id">
   <generator class="native" />
 </id>
 <discriminator column="FooType" type="String" />

 <subclass name="Foo" discriminator-value="MoveFile">
     <property name="MyProp" />
 </subclass>
</class> 
```

从这一点来看，它工作正常。

我想做的是将我的子类中的每个属性存储为元数据。我的意思是我想将它序列化并将其存储为 xml，因此我可以拥有我想要的尽可能多的子类，而无需为每个子类创建一个表，也没有很多不会使用的列。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:54:53.880

```
<subclass name="Foo" discriminator-value="MoveFile">
  <property name="SerialisedProps" column="serialisedProps" access="Name.Space.FakeAccessor, Asse" />
</subclass>

class FakeAccessor : IPropertyAccessor, IGetter, ISetter
{
    public IGetter GetGetter(string name)
    {
        return this;
    }

    public ISetter GetSetter(string name)
    {
        return this;
    }

    public bool CanAccessThroughReflectionOptimizer { get { return false; } }

    public object Get(object target)
    {
        return Serialize(target);
    }
    object GetForInsert(object owner, IDictionary mergeMap, ISessionImplementor session)
    {
        return Get(owner);
    }

    public void Set(object target, object value)
    {
        // deserialize xml and set appropriate properties
    }

    Type ReturnType { get { return typeof(string); } }

    string PropertyName { get { return "SerialisedProps"; } }

    private string Serialize(object subclass)
    {
        // example implementation
        var type = subclass.GetType();
        var root = new XElement(type.Name);
        foreach (var prop in type.GetProperties())
        {
            root.Add(new XElement("property", new XAttribute("name", prop.name), new XAttribute("value", prop.GetValue(subclass, null) + ""));
        }
        return root.ToString();
    }
} 
```

# .net - 引用 ItemsControl 的分组控件

> ID：13725522
> 
> 赞同：1
> 
> 时间：2012-12-05T14:32:35.830
> 
> 标签：.net, itemscontrol, expander, listcollectionview

我有一个带有 ListCollectionView 作为数据源的 ItemControl。ItemControl 使用 Expander 控件对项目进行分组。当我执行 ListCollectionView.Refresh() 时，展开的 Expander 控件会折叠。如何使扩展的控件保持扩展状态？

```
<ItemsControl HorizontalAlignment="Stretch" ItemsSource="{Binding}" Name="ItemsControl1">
        <ItemsControl.Resources>
            <DataTemplate DataType="{x:Type GroupingWithExpander:DataItem}">
                <TextBlock Text="{Binding Text}" />
            </DataTemplate>
        </ItemsControl.Resources>
        <ItemsControl.GroupStyle>
            <GroupStyle>
                <GroupStyle.ContainerStyle>
                    <Style TargetType="GroupItem">
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="GroupItem">
                                    <Expander BorderThickness="1" BorderBrush="Gray" IsExpanded="{Binding IsExpanded}">
                                        <Expander.Resources>
                                            <GroupingWithExpander:DataGroupToNameConverter x:Key="DataGroupToNameConverter" />
                                        </Expander.Resources>
                                        <Expander.Header>
                                            <TextBlock Text="{Binding Name, Converter={StaticResource DataGroupToNameConverter}}" />
                                        </Expander.Header>
                                        <StackPanel Orientation="Vertical">
                                            <ItemsPresenter Margin="5 0" />
                                        </StackPanel>
                                    </Expander>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GroupStyle.ContainerStyle>
            </GroupStyle>
        </ItemsControl.GroupStyle>
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <VirtualizingStackPanel Orientation="Vertical" IsItemsHost="True" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>
    <TextBox Name="TextBox1" />
    <Button Click="Button_Click">
        <Button.Content>
            <TextBlock Text="do something" />
        </Button.Content>
    </Button>

 public partial class MainWindow : Window{
public MainWindow()
            {
                InitializeComponent();
                var group1 = new DataGroup {IsExpanded = false, Name = "group #1"};
                var group2 = new DataGroup {IsExpanded = true, Name = "group #2"};
                const int itemsCount = 6;
                DataItem[] dataItems = new DataItem[itemsCount];
                for (int i = 0; i < itemsCount; i++)
                {
                    DataItem item = new DataItem
                                        {
                                            Group = (i%2 == 0 ? group1 : group2),
                                            Text = System.IO.Path.GetRandomFileName()
                                        };
                    dataItems[i] = item;
                }
                ListCollectionView v = new ListCollectionView(dataItems);            
                v.GroupDescriptions.Add(new PropertyGroupDescription("Group"));
                v.Filter = FilterDataItem;
                this.DataContext = v;            
            }

            private bool FilterDataItem(object o)
            {
                DataItem item = o as DataItem;
                return item.Contains(this.TextBox1.Text);            
            }

            private void Button_Click(object sender, RoutedEventArgs e)
            {
                ListCollectionView v = (ListCollectionView) this.DataContext;
                v.Refresh();
            }
    }

    class DataGroup : IEquatable<DataGroup>, INotifyPropertyChanged
{
    public string Name { get; set; }

    private bool _isExpanded;
    public bool IsExpanded
    {
        get { return _isExpanded; }
        set 
        { 
            _isExpanded = value; 
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("IsExpanded"));
        }
    }

    public bool Equals(DataGroup other)
    {
        return other != null && this.Name == other.Name;
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

    class DataItem
{
    public string Text { get; set; }
    public DataGroup Group { get; set; }

    public virtual bool Contains(string filterString)
    {
        return Text != null && (string.IsNullOrEmpty(filterString) || Text.Contains(filterString));
    }
}

    class DataGroupToNameConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (!(value is DataGroup)) throw new ArgumentException("type DataGroup is expected", "value");
        DataGroup g = (DataGroup) value;
        return g.Name;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T17:07:05.717

您非常接近可行的解决方案。关键是要知道`DataContext`组模板中的控件将是一个`CollectionViewGroup`（实际上是它的后代，因为`CollectionViewGroup`是抽象的）。当框架绑定到应用了分组的​​数据源时，框架会为您创建这些组。

`CollectionViewGroup`有一个名为 的属性`Items`，它是一个集合，其中包含属于由 表示的组的项`CollectionViewGroup`。由于每个组都将至少有一个成员，因此您可以使用第一个成员`Items`来访问`DataGroup`，例如`Items[0].Group.IsExpanded`，但还有更简单的方法。

CollectionViewGroup 还有一个有点误导的属性，叫做`Name`. 乍一看，您可能会认为它是`string`包含组名的 a，但实际上它是`object`对您告诉数据源分组依据的任何实例的引用。

在您的示例中，您已告诉它按`Group`属性分组，即 a `DataGroup`，因此`Name`实际上将指向该`DataGroup`组的实例。

`DataGroup`因此，您可以通过在绑定中使用虚线路径来获取 的属性，即：

```
<Expander IsExpanded="{Binding Name.IsExpanded}">
    <Expander.Header>
        <TextBlock Text="{Binding Name.Name}" />
    </Expander.Header>
    <StackPanel Orientation="Vertical">
        <ItemsPresenter Margin="5 0" />
    </StackPanel>
</Expander> 
```

我进行了这些更改，您的示例现在可以正常工作。您也不再需要值转换器。

我还更改了您的按钮单击事件，以证明绑定在两个方向上都有效（当您单击按钮时，它会切换每个组的展开状态）：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    ListCollectionView v = (ListCollectionView)this.DataContext;

    var groups = new List<DataGroup>();
    for (int i = 0; i < v.Count; i++)
    {
        var item = v.GetItemAt(i) as DataItem;
        if (item != null)
        {
            if (!groups.Contains(item.Group))
            {
                groups.Add(item.Group);
            }
        }
    }

    foreach (var group in groups)
    {
        group.IsExpanded = !group.IsExpanded;
    }

    v.Refresh();
} 
```

我刚刚使用分组的 ComboBox 进行了类似的练习，所以我回答这个问题是希望虽然它可能不再与您相关，但它可以帮助处于类似困境的其他人。

# opengl - 建模不规则 3d 多面体所需的步骤是什么

> ID：13725526
> 
> 赞同：2
> 
> 时间：2012-12-05T14:32:48.123
> 
> 标签：opengl, glut

使用 GLUT对不规则 3d 多面体（例如“[五边形六面体](http://www.wolframalpha.com/input/?i=Pentagonal+Hexecontahedron&dataset=)”）建模的基本步骤是什么？

到目前为止我所了解的是我需要确定对象的顶点。如何？当我有顶点列表时，下一步是什么？如何使用 glVertex(..) 函数绘制多面体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:35:57.617

最好的办法是在 3D 建模程序中制作模型，除非您想手动计算所有顶点，这会很痛苦。使用保存文件中的顶点数据并将其放入一个数组中，您可以弄清楚如何从文件中读取，或者只是在包含所有顶点数据的标题中创建一个静态数组。

然后您可以使用顶点数组一举渲染模型[http://www.opengl.org/sdk/docs/tutorials/CodeColony/vertexarrays.php](http://www.opengl.org/sdk/docs/tutorials/CodeColony/vertexarrays.php)

# javascript - 查找排序数组中存在的一堆整数中的所有内容

> ID：13725527
> 
> 赞同：0
> 
> 时间：2012-12-05T14:32:52.117
> 
> 标签：javascript, jquery

> **可能重复：**
> [javascript中数组交集的最简单代码](https://stackoverflow.com/questions/1885557/simplest-code-for-array-intersection-in-javascript)

我在javascript中有一个排序的整数数组。我需要找出一堆整数中的哪一个存在于该排序数组中。最快的方法是什么？

*我使用 jQuery，但它似乎没有提供对排序数组的二进制搜索的内置支持，而只是`jQuery.inArray()`（不确定它实现了什么算法）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:01:02.713

JavaScript 语言和 jQuery 都没有提供二分搜索功能。

它看起来像这样：

```
function binarySearch(array, val, cmp) {
  cmp = cmp || function(v1, v2) { return v1 - v2; };
  var l = 0, h = array.length - 1;
  while (l <= h) {
    var m = Math.round((l + h) / 2), diff = cmp(array[m], val);
    if (!diff) {
      return m;
    }
    diff > 0 ? (h = m - 1) : (l = m + 1);
  }

  return -1;
}

binarySearch([1, 10, 100, 1000], 666); // -1 
```

# objective-c - 切断浮子的下端

> ID：13725528
> 
> 赞同：0
> 
> 时间：2012-12-05T14:32:57.167
> 
> 标签：objective-c, ios, floating-point

这更像是一个数学问题，但我只是没有运气。基本上我得到了下面的代码来改变单元格颜色，具体取决于它们在颜色数组中的等效行。这一切都很好，但我想要它，这样我就可以以某种方式切断亮度光谱的底端，这样我就永远不会得到低于 0.2 的任何东西。任何有关如何解决此问题的建议将不胜感激。

```
-(IBAction)reloadTable {
    float arrayCount = [masterListArray count];
    float increment = (1.0 / arrayCount);
    NSMutableArray *tempColor = [[NSMutableArray alloc]init];
    colors = [[NSMutableArray alloc]init];

    for (float brightness = 0.0; brightness < 1.0; brightness += increment) {
        UIColor *color = [UIColor colorWithHue:50.0f/255.0f
                                    saturation:1.0
                                    brightness:brightness
                                         alpha:1.0];
       [tempColor addObject:color];
       NSLog(@"brightness: %f", brightness);
    }

    colors = [[tempColor reverseObjectEnumerator] allObjects];
    [self.tableView reloadData];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:47:16.350

你可以使用一些额外的变量来确保你总是在 1.0 和底端之间结束。在下面的代码中，我们使用单元格的数量进行迭代（比以前更好的做法）并从亮度 1.0 开始并在底部结束。也不需要使用 tempColors。

```
-(IBAction)reloadTable {

    float arrayCount = [masterListArray count];
    float bottomEnd = 0.2;
    float brightnessRange = 1.0 - bottomEnd;
    float increment = (brightnessRange / arrayCount);

    colors = [NSMutableArray array];

    for (int i = 0; i < arrayCount; i++) {
        // We start with light and go darker per cell.
        float brightness = bottomEnd + (brightnessRange - i * increment); 
        UIColor *color = [UIColor colorWithHue:50.0f/255.0f
                                    saturation:1.0
                                    brightness:brightness
                                         alpha:1.0];
        [colors addObject:color];
        NSLog(@"brightness: %f", brightness);
    }

    [self.tableView reloadData];
} 
```

# jasper-reports - textField 忽略了显示货币总和的模式

> ID：13725529
> 
> 赞同：-1
> 
> 时间：2012-12-05T14:32:56.723
> 
> 标签：jasper-reports

我有一个未应用`V{Total}`模式的变量，`###0.00`我错过了什么？

```
<textField pattern="###0.00" isBlankWhenNull="false">
    <reportElement uuid="ea9933c9-1863-474f-a6e2-65cfe3f07426" x="390" y="9" width="144" height="20" forecolor="#000000"/>
    <box>
        <pen lineColor="#999999"/>
        <topPen lineColor="#999999"/>
        <leftPen lineColor="#999999"/>
        <bottomPen lineWidth="0.5" lineColor="#999999"/>
        <rightPen lineColor="#999999"/>
    </box>
    <textElement>
        <font fontName="Verdana" isBold="true" isUnderline="false"/>
    </textElement>
    <textFieldExpression><![CDATA[$V{Total}+".- €"]]</textFieldExpression>
</textField> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:05:48.823

# java - 如何在不同的 CDI-bean 实现运行时之间进行选择

> ID：13725530
> 
> 赞同：0
> 
> 时间：2012-12-05T14:33:15.093
> 
> 标签：java, inversion-of-control, cdi, jboss-weld

我有一个messageListener，目的是启动客户端实现客户端接口。客户端接口的不同实现在编译时是未知的。

messageListener 使用 Launcher-bean 来启动客户端。所以我的问题是我需要构建一个 Launcher-bean，其中注入了客户端接口的选定实现。我不知道该怎么做，或者我应该以不同的方式解决这个问题？

```
public class MyMessageConsumer implements MessageListener {
    public void onMessage(Message message) {
        String clientType = message.getClientType();

        //Here i need to construct a launcher-bean, which has the correct Client-implementation injected

        launcher.startClient(message);
    }   
}

public class Launcher {

    @Inject
    private Client client;

    public void startClient(Message message) {
        ...

        client.start(message);
    }

} 
```

编辑：我意识到棘手的部分是没有找到正确的实现，但我需要消息的消费作为新请求发生。是否有可能理解我所追求的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:19:56.457

你想要的是一个制作人。

这样您就可以将上下文实例的客户端和生产者分开。因此，将它们注入生产者并让它决定使用什么。

为了使其透明并避免模棱两可的依赖，您可以使用 @Dynamic 限定符生成一个值。

```
@Inject
@Dynamic
Foo foo; 
```

.........................................

```
@Produces
@Dynamic
public Foo getFoo() {
//find out what implementation to use and return it 
```

创建自己的限定符和生产者对谷歌来说非常简单。

# groovy - 模板中的 if 语句

> ID：13725531
> 
> 赞同：0
> 
> 时间：2012-12-05T14:33:17.197
> 
> 标签：groovy, playframework

我想创建自己的模板，我的代码是：

```
#{if _arg.status.equals(models.Status.FINISHED)}
  #{doBody /}
#{/if} 
```

当我将对象引用传递给我的标签时，它说它为空。如果我在我的模板中调用它的工作方式，如文档中所述：

```
${_arg.status} 
```

错误信息是：

> 模板执行错误
> 
> 模板 /app/views/tags/isNotFinished.html 发生执行错误。引发的异常是 NullPointerException：无法在空对象上获取属性“状态”。

我没有收到任何空指针异常。我在这里做错了什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:21:23.600

我真的不明白。但是今天我再次尝试使用 _arg 并且它现在按预期工作。现在可以关闭了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:49:59.877

似乎`_arg`在您正在使用的范围内找不到。 [这](http://www.playframework.org/documentation/1.0/templates#Retrievetagsparameters)似乎表明您`arg`隐含在标签中。`_arg.`您可以尝试从标签中省略。

# java - Java：将作业发送到服务器执行

> ID：13725535
> 
> 赞同：0
> 
> 时间：2012-12-05T14:33:28.200
> 
> 标签：java, rmi

我正在寻找一种在远程服务器上执行“作业”的方法。通常 RMI 会做得很好，但据我所知，这需要在服务器上实际实现逻辑。我的问题是我无法在服务器上预定义作业，因为我希望它们尽可能通用。

所以我想到的是：客户有他想要执行的特定工作的实现。这个实现显然必须遵循一组规则，以便服务器能够使用它。客户端将其打包成某种对象，将其发送到服务器执行，并等待他要求的任何计算的结果。

RMI 可以吗？如果没有，还有其他东西可以让我以这种方式工作吗？

感谢您的时间和洞察力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:43:50.137

您可以使用[Java RMI 使用动态代码下载，](http://docs.oracle.com/javase/1.5.0/docs/guide/rmi/codebase.html)但您必须设置服务器来保存客户端任务类

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:47:44.960

据我了解您的问题，服务器不“知道”要提前执行的代码。因此，您可以尝试发送一些运行时可解释的代码，如 groovy、javascript 或 python，并使用服务器端的众多解释器之一。

对于更简单的执行 UEL 和具体的 JUEL 可能值得一看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:38:56.590

任何可序列化的对象都可以通过 RMI 传递。您可以将逻辑包装在可序列化的对象中，将其传递给服务器，然后服务器执行它（它可能有一个执行方法，例如服务器调用）。

正如这里的评论中提到的，您从客户端传递到服务器的类需要客户端和服务器都知道。

# .net - 强制 AutoGenerateColumns 为布尔数据类型创建 DataGridViewTextBoxColumn

> ID：13725536
> 
> 赞同：1
> 
> 时间：2012-12-05T14:33:30.237
> 
> 标签：.net, winforms, datagridview, autogeneratecolumn

我有很多只读数据，我不喜欢`DataGridViewCheckBoxColumn`s 的可点击外观和感觉，不幸的是，它是呈现布尔数据的默认类型。

有什么办法，在使用之前或之后`AutoGenerateColumns`，`DataGridView`我可以强制它生成`DataGridViewTextBoxColumns`只打印`TRUE`或`FALSE`代替的`DataGridViewCheckBoxColumns`？

![当前返回数据的方式示例](../Images/dd4a779cac0b9e93459a95bbf14c5f3a.png)

`DataTable`如果在将其设置为 之前更容易解决此问题`DataSource`，那也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-30T15:39:03.163

如果您想继续使用`AutoGenerateColumns = True`and `DataGridViewCheckBoxColumn`，您可以修改外观和行为，使其看起来和行为类似于只读字段。

假设您想定位所有 CheckBoxCells，您可以禁用它们并更改它们的外观，如下所示：

```
For Each row In DataGridView1.Rows.Cast(Of DataGridViewRow)()
    For Each cell In row.Cells.OfType(Of DataGridViewCheckBoxCell)()
        cell.ReadOnly = True
        cell.FlatStyle = FlatStyle.Flat
        cell.Style.ForeColor = Color.DarkSlateGray
    Next
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:15:12.153

我想我会分享我针对上述问题的解决方法，以防其他人试图完成同样的事情。我只是通过循环遍历 DataTable 中的列集合来关闭`AutoGenerateColumns`并创建自己的列。每次都清除数据源和列很重要，以防它们因调用而异。除此之外，我只设置了 DataTable 列中的 col 名称、标题和数据属性，我们就可以开始了。

```
''' <summary>
''' Generates DataGridViewTextBox Columns for every field of data in the data source
''' </summary>
''' <param name="dgv">The DataGridView having columns and data generated</param>
''' <param name="dt">The source data as a DataTable</param>
''' <remarks></remarks>
Private Sub AutoGenerateTextBoxColumns(ByVal dgv As DataGridView, ByVal dt As DataTable)
    'declare local variables
    Dim column As DataGridViewTextBoxColumn
    'first clear datasource and columns
    If Not IsNothing(dgv.DataSource) Then dgv.DataSource.Clear()
    'clear way for potentially different columns
    If Not IsNothing(dgv.Columns) Then dgv.Columns.Clear()
    'set autogenerate columns to false
    dgv.AutoGenerateColumns = False
    'generate columns for DataGridView
    For Each col As DataColumn In dt.Columns
        column = New DataGridViewTextBoxColumn()
        With column
            .HeaderText = col.ColumnName
            .DataPropertyName = col.ColumnName
            .Name = col.ColumnName
        End With
        dgv.Columns.Add(column)
    Next
    'add datatable as datasource
    dgv.DataSource = dt
End Sub 
```

# python - __repr__() 返回非字符串

> ID：13725538
> 
> 赞同：4
> 
> 时间：2012-12-05T14:33:32.707
> 
> 标签：python, string, traceback, repr

所以我有一个类方法，我想用它来绘制字典及其值：

```
 def __repr__ (self): 
        for row in zip(*([ky]+map(str,val) for ky,val in (self.slovar.items()))):

           print"\t".join (row) 
```

如果是这样，我会得到想要的输出：

```
>>> test
n   n1  n2
1   a   2.3
2   b   2.1
3   d   2.5

Traceback (most recent call last):
  File "<pyshell#521>", line 1, in <module>
    test
TypeError: __repr__ returned non-string (type NoneType) 
```

但也是一个 Traceback 错误。

如果我返回值而不是打印出来，我只会得到这个：

```
>>> test
n   n1  n2 
```

如果我制作一个自定义方法而不是默认的“系统”方法，它工作正常......（我需要它是默认的）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T14:36:26.133

您的`__repr__`方法`print`用于输出信息，但没有`return`语句，因此它有效地返回`None`，它不是字符串。

* * *

你可以做的是：

```
def __repr__ (self): 
    parts = []
    for row in zip(*([ky]+map(str,val) for ky,val in (self.slovar.items()))):
       parts.append("\t".join (row))
    return '\n'.join(parts) 
```

* * *

您可能还想看看[模块](http://docs.python.org/2/library/pprint.html)[。`pprint`](http://docs.python.org/2/library/pprint.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:37:04.560

您的`__repr__(self)`方法必须返回一个字符串：

```
def __repr__ (self): 
 return "\n".join("\t".join (row) for row in zip(*([ky]+map(str,val) for ky,val in (self.slovar.items())))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:44:05.310

你可以这样做：

```
def __repr__ (self): 
    rows = zip(*([ky]+map(str,val) for ky,val in (self.slovar.items())))
    return "\n".join("\t".join(row) for row in rows) 
```

这样它就保持可读性和紧凑性。

# prolog - 无法在 Prolog 中定义谓词

> ID：13725541
> 
> 赞同：3
> 
> 时间：2012-12-05T14:33:41.017
> 
> 标签：prolog

我刚刚开始学习`Prolog`，如果这有点天真，或者说太天真，请原谅我。我正在尝试定义这个谓词

```
| ?- times(M,N,Product) :- Product is M*N. 
```

这给了我这个错误

```
uncaught exception: error(existence_error(procedure,(:-)/2),top_level/0) 
```

我正在使用 GNU Prolog。这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:45:18.223

正如 false 所说，如果要在解释器执行期间定义谓词或函数，则必须进入解释器的“用户”模式，输入：

```
['user']. 
```

输入谓词后，您只需要离开这个“区域”，以向解释器确认您已完成编码，并且它可以开始将您的谓词编译为字节码 - 您将是，然后，允许通过您的函数名称访问。

要离开“用户”模式，只需按`ctrl + d`。

在 swipl 和 gprolog 中测试：

```
SWI-Prolog version 5.10.4
(GNU Prolog) 1.3.0 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T13:37:35.920

检查用户手册 8.7 动态子句管理，尤其是：asserta/assertz。

接下来将帮助您在 gprolog 中定义新的谓词：

asserta( ( times(M,N,Product) :- 产品是 M*N ) )。

# c++ - 如何在使用 pthread 时将方法指针作为 C++ 中的函数参数传递

> ID：13725551
> 
> 赞同：0
> 
> 时间：2012-12-05T14:34:20.937
> 
> 标签：c++, multithreading, pointers, pthreads, function-pointers

我有一个与 C++ 和线程相关的问题。我比 C++ 更熟悉 Java，这个错误让我很困惑。

想象一下，在 xh 文件中，我有一个类，例如：

```
class A{

    public A();

    public virtual void* func(void*);

    public virtual void func2();

    public virtual void func3();

}; 
```

在 x.cpp 文件中，我想这样做：

```
void* A::func(void*) {

    while(....)
        func2();

    return NULL;
}

void A::func2() {

    ...some stuff there...

}

void A::func3() {

    pthread_t t1;

    pthread_create(&t1, NULL, &A::func, NULL);

    void* result;

    pthread_join(t1,&result);

    ...some other stuff...

} 
```

问题是它挂起并出现以下错误：

> “错误：ISO C++ 禁止使用不合格或带括号的非静态成员函数的地址来形成指向成员函数的指针。”

我应该怎么做才能解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:47:35.083

这是一条糟糕的错误消息，但从根本上说，它试图告诉您的是，您不能从实例方法中形成函数指针（我不确定这里的 Java 术语是什么）。这是因为要调用实例方法，您需要实际代码的地址和对象的地址`this`，而常规函数指针只存储前者。

您在这里需要的是一个`static`包装方法，它与`pthread_create`线程启动例程的期望相匹配。您将`this`作为第四个参数传递给`pthread_create`，包装器将其参数转换回对象指针并调用`func`。这种类型的包装器通常被称为“ [thunk](https://stackoverflow.com/a/2641625/388520) ”，因为它使一种调用约定适应另一种。

```
class A {
    // ...
    static void* thread_start_thunk(void* self);
};

void*
A::thread_start_thunk(void* self)
{
    return static_cast<A*>(self)->func();
}

// ...

void
A::func3()
{
    // ....
    pthread_create(&t1, 0, &A::thread_start_thunk, static_cast<void*>(this));
    // ...
} 
```

演员表是不可避免的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:44:19.563

您不能只将指向方法的指针传递给线程。单独的方法指针没有任何意义，因为它不知道它属于哪个实例。如果您需要在不同的线程中调用实例方法，请向该类添加一个私有静态方法并将其地址以及指向该实例的指针作为参数传递给该线程。

该静态方法可能看起来像这样：

```
class A
{
    public: virtual void threadMethod();

    public:
        static void staticThreadMethod(void* instanceObj)
        {
            ((A*)instanceObj)->threadMethod();
        }
}; 
```

我没有测试该代码，它显然不会检查错误，但这是我通常的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:44:00.317

使用以下之一：

*   提升::线程
*   C++11
*   其他一些 C++ 库线程（很多）
*   向您的类添加一个静态方法，然后将其地址传递给`pthread_create`提供`void*`给您的类实例（指针/引用）和您要调用的类::*方法对的用户。然后在静态函数中，只需使用从参数获取的实例和方法地址调用所需的方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:09:31.040

在`pthread_create(&t1, NULL, &func, NULL);`您尝试获取成员函数的地址。有两个问题

1.  正确的形式是

    `&A::func`

    这就是编译器试图告诉你的。

2.  [`pthread_create`](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)想要一个指向函数的指针，*而不是*指向非静态成员函数的指针。相反，您可以做的是创建一个静态成员函数并将该静态成员函数的地址作为参数传递给`pthread_create`.

例子：

```
class A {
public:
    static void *func(void *);
};

pthread_t t1;
pthread_create(&t1, NULL, &A::func, NULL); 
```

# wpf - wpf/databinding 如何解决这种歧义？

> ID：13725559
> 
> 赞同：0
> 
> 时间：2012-12-05T14:35:01.053
> 
> 标签：wpf, data-binding

```
<StackPanel DataContext="{StaticResource Employees1}">
    <ListBox ItemsSource="{Binding}" DisplayMemberPath="Name" 
                  IsSynchronizedWithCurrentItem="True"/>
    <Label Content="{Binding Path=Count}"/>
    <Label Content="{Binding Path=Name}"/>
</StackPanel> 
```

标签的绑定是如何解决的？如何决定第二个标签的内容绑定到Employees1.Count（而不是Employee.Count），而第一个标签绑定到Employee.Name 并与列表框选择同步？另外，如果我想将第一个标签绑定到 Employee.Count 怎么办？

（Employee 有属性 Name（可能还有 Count），Employees1 是一个 Employee 类型的 ObservableCollection）。

* * *

编辑：所以，这里的问题是*为什么*第一个标签显示 ObservableCollection 中的员工人数，而第二个标签显示集合中*特定*员工的姓名，即当前在 ListBox 中选择的员工。显然，第一个标签绑定到整个集合，第二个标签绑定到集合中的特定员工。但是为什么，以及如何控制这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:39:12.507

从 MSDN [Data Binding Overview, Binding To Collections](http://msdn.microsoft.com/en-us/library/ms752347.aspx#binding_to_collections) , section "Current Item Pointer":

> 因为 WPF 仅通过使用视图（您指定的视图或集合的默认视图）绑定到集合，所以到集合的所有绑定都具有当前项指针。

和“主从绑定场景”部分：

> 这是因为当单例对象（在本例中为 ContentControl）绑定到集合视图时，它会自动绑定到视图的 CurrentItem。

在您的示例中，第二个 Label*自动*绑定到 Employees1 集合的默认视图的当前项。第一个 Label 也会像这样绑定，但由于 item 对象没有`Count`属性，它显然会回退到对`Count`集合本身属性的绑定。但是我不知道后一种行为是否记录在某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:39:58.230

正如 Blam 所说-标签与列表框没有关系-我认为您在这里尝试做的是将具有属性 Count 和 Name 的员工的 observableCollection 绑定到列表框。

为此，您需要列表框中的 ItemsTemplate

```
<ListBox ItemSource={Binding Employees1}>
<ListBox.ItemTemplate>
  <DataTemplate>
    <StackPanel Orientation="Horizontal">
        <Label Content="{Binding Count}" />
        <Label Content="{Binding Name}" />

    </StackPanel>
  </DataTemplate>
</ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:06:00.967

让我试着回答问题。

ObservableCollection 有一个属性 Count。

至于在第二个标签上获得单个属性，它正在做出一些假设。
在其他版本的 .NET 中您可能不会获得相同的行为。
不应将显示单个值的控件绑定到集合。

如果您想从 ListBox 中选择项目，请参阅此链接

[在此处输入链接描述](https://stackoverflow.com/questions/1289908/listbox-selected-tem)

# git - 使用快进合并 sourcetree 中的 git-flow 修补程序

> ID：13725560
> 
> 赞同：2
> 
> 时间：2012-12-05T14:35:05.863
> 
> 标签：git, git-flow

我很难理解如何在 SourceTree 中正确合并修补程序（在 git-flow 意义上）。SourceTree 网站[指出](http://blog.sourcetreeapp.com/2012/08/01/smart-branching-with-sourcetree-and-git-flow/)：

> 完成更改后，修补程序分支将合并回主分支（以更新已发布版本）和开发分支（以确保修复程序也进入下一个版本）

但是当我在 SourceTree 中完成一个修补程序时，我得到了这个： ![](../Images/420472b174e9f049f7de8779c7f5fda8.png)

实际上，Sourcetree 确实将修补程序合并到 master 和 develop 中，但这显然导致这两个分支出现分歧，这迫使我再次手动将 development 合并到 master 中。由此产生的结构很丑陋。

在修补程序之前，master 和 develop 都在同一个提交上。因此，我希望在修补程序之后，SourceTree 会通过快进将这两个分支与修补程序分支合并，基本上得到一个像这样的简单布局： ![在此处输入图像描述](../Images/5d584a1dd7d989041f9371dbfbae3295.png)

在这里，修补程序“修复更多...”就像一个简单的提交一样可见。是否有任何选项可以导致 SourceTree 通过如此简单的快进合并在修补程序中合并，基本上同时推进 master 和 development？有什么我可能会错过 aobut git 或 git-flow 的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:49:07.170

描述 git flow的原始[文章](http://nvie.com/posts/a-successful-git-branching-model/)已使用`git merge --no-ff`. 听起来 SourceTree 正在做正确的事情。

请注意，如果您想自己进行快进合并，您可以手动发出命令，而无需选择该`--no-ff`选项。

# javascript - 如何使用javascript在span中添加元素

> ID：13725565
> 
> 赞同：0
> 
> 时间：2012-12-05T14:35:14.303
> 
> 标签：javascript, jquery, model-view-controller

我通过选择国家/地区来获得下拉列表，使用javascript动态填充状态下拉列表

```
<div id="ddlState" class='selectBox'>                   
    <span class='selected' id="StatesID">Select a State</span> 
    <span class='selectArrow'>&#9660</span>                         
    <div class="selectOptions" id="stateSelectOption">               
        <span class="selectOption" id="ddlStateText" >Select a State</span>                
    </div>
</div> 
```

单击国家/地区时，会填充该州，代码如下

```
$('#CountriesID').click(function () {
    var items;
    $('#CountriesID').removeClass("input-validation-error");
    if (!$("select#CountriesID").val() == "Select a Country") {
        document.getElementById("disableasterisk9").style.display = "";
    }
    else {
        document.getElementById("disableasterisk9").style.display = "none";
    }
    var countryid = $('#CountriesID').text();

    $.getJSON(
        "@Url.Action("StateList1", "UserRegistration")" + '/' + countryid, 
        function (data) {                  
            var items = "<span id='ddlStateText'  class='selectOption'>Select a State </span>";
            $.each(data, function (i, state) {
                items += "<span id='ddlStateText' value='" + state.Value + "' class='selectOption'>" + state.Text + "</span>";
            });                  
            $('#stateSelectOption span').html(items);
        }
    );
}); 
```

列表已填充，但选择无法正常工作，它将所有状态项呈现在一个跨度标记中，因此对于选择任何元素，所有列表都被选中

我需要选择单个元素

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:55:47.230

在这一行的代码中看到的是您在跨度内添加了 html，所以只需去掉它：

```
$('#stateSelectOption span').html(items) 
```

该行必须如下所示（它将代码插入 div 而不是跨度）：

```
$('#stateSelectOption').html(items) 
```

我在 jsfiddle 上对其进行了测试：http: [//jsfiddle.net/uz2vf/](http://jsfiddle.net/uz2vf/)

# python - 在 Excel 中使用 Python 和 DataNitro 转换时间

> ID：13725567
> 
> 赞同：1
> 
> 时间：2012-12-05T14:35:19.643
> 
> 标签：python, excel, time, number-formatting, datanitro

我在 Excel 电子表格中有一个 h:m 格式的时间列表，我正在尝试使用 DataNitro 进行一些操作，但它似乎不喜欢 Excel 格式化时间的方式。

例如，在 Excel 中，时间 8:32 实际上只是十进制数 .355556，其格式显示为 8:32。当我使用 DataNitro 访问该时间时，它会将其视为小数，而不是字符串 8:32。如果我将 Excel 中的格式从时间更改为常规或数字，它会将其转换为小数（我不想要）。我发现唯一可行的方法是手动遍历每个单元格并将 ' 放在每个单元格前面，然后遍历并将格式类型更改为 General。

有什么方法可以将 Excel 中的这些时间转换为字符串，以便我可以使用 DataNitro 提取信息（仅将其视为小数）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:42:50.590

如果 .355556（表示为 8:32）在 A1 中，那么`=HOUR(A1)&":"&MINUTE(A1)`复制/粘贴特殊值应该会让你得到一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T13:11:40.387

理想情况下，您可能不想更改 excel 保存数据的方式（显然取决于您的用例）。

如果是这种情况，有一篇很棒的帖子[如何在 Python 中读取 Excel 格式的日期？](https://stackoverflow.com/questions/1108428/how-do-i-read-a-date-in-excel-format-in-python)这解释了如何将浮点数转换为 python 日期时间对象。特别是@John Machin 的脚本效果很好。

```
import datetime

def minimalist_xldate_as_datetime(xldate, datemode):
    # datemode: 0 for 1900-based, 1 for 1904-based
    return (
        datetime.datetime(1899, 12, 30)
        + datetime.timedelta(days=xldate + 1462 * datemode)
        ) 
```

请注意他的免责声明“这是裸关节无安全带使用自有风险版本：”我使用它没有任何问题。

# github - 是否可以通过代理链启动jenkins

> ID：13725569
> 
> 赞同：0
> 
> 时间：2012-12-05T14:35:29.333
> 
> 标签：github, proxy, jenkins

我在 GitHub 和 CI 服务器 (Ubuntu) 上有代码存储库，Jenkins 位于防火墙后面。

所以我将代理设置设置为詹金斯，它工作正常（例如，我可以看到可用的插件）。我在 .gitconfig 中配置了代理设置。我在 jenkins home/.ssh 目录中也有 id_rsa 。

但是 jenkins 在作业执行过程中不能执行 git clone 因为一个错误：

ssh：连接到主机 github.com 端口 22：连接超时

Jenkins 用户在终端成功执行代理链 git clone 操作。

是否可以通过代理链强制詹金斯工作？或者有人可以建议我一些替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:52:57.417

我已经解决了我的问题：http: [//blog.paulbetts.org/index.php/2008/04/08/getting-ssh-to-connect-through-a-socks-proxy/](http://blog.paulbetts.org/index.php/2008/04/08/getting-ssh-to-connect-through-a-socks-proxy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:06:19.557

我已经使用 STDIO 代理隧道解决了类似的问题。

*   更新`~/.ssh/config`：

    ```
    Host github.com
      HostName github.com
      User git
      ProxyCommand gitproxy %h %p 
    ```

*   使用以下内容创建`~/bin/gitproxy`脚本：

    ```
    #!/bin/sh
    exec socat STDIO PROXY:proxy.com:$1:$2,proxyport=8080,proxyauth=user:password 
    ```

# c# - 获取错误的日期时间格式

> ID：13725575
> 
> 赞同：2
> 
> 时间：2012-12-05T14:35:49.367
> 
> 标签：c#, string-formatting

我有这个：

```
var dateString = string.Format("{0:dd/MM/yyyy}", date); 
```

但是 dateString 是 13.05.2011 而不是 13/05/2011。你能帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:40:14.613

```
// date separator in german culture is "." (so "/" changes to ".")
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9/3/2012 16:05:07" - english (en-US)
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9.3.2012 16:05:07" - german (de-DE) 
```

所以你必须把文化从德语改成英语！

你可以写 ：

```
date.ToString(new CultureInfo("en-EN")); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-05T14:44:58.923

您可以使用`DateTime.ToString`with`CultureInfo.InvariantCulture`代替：

```
var dateString = date.ToString("dd/MM/yyyy", CultureInfo.InvariantCulture); 
```

`/`替换`.`为的原因[`/`是自定义格式说明符](https://docs.microsoft.com/en-us/dotnet/standard/base-types/custom-date-and-time-format-strings#the--custom-format-specifier)

> “/”自定义格式说明符表示日期分隔符，用于区分年、月和日。`DateTimeFormatInfo.DateSeparator`从当前或指定区域性的属性中检索适当的本地化日期分隔符 。

因此，要么使用`InvariantCulture`which`/`用作日期分隔符，要么 - 更合适 - 通过将其嵌入到以下格式说明符中来转义它`'`：

```
var dateString = date.ToString("dd'/'MM'/'yyyy"); 
```

为什么这样更合适？因为您仍然可以应用本地文化，fe 如果您想输出月份名称，但`/`无论如何您都强制作为日期分隔符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T14:39:13.733

试试这个：

```
 var dateString = string.Format("{0:dd}/{0:MM}/{0:yyyy}", date); 
```

还可以查看 Steve X 的字符串格式网站：http: [//blog.stevex.net/string-formatting-in-csharp/](http://blog.stevex.net/string-formatting-in-csharp/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T14:41:41.803

如果您想强制使用日期分隔符而不考虑文化，您可以将其转义，如下所示：

```
var dateString = string.Format(@"{0:dd\/MM\/yyyy}", date); 
```

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-05T14:41:55.253

只需尝试

```
var dateString = date.ToString("dd/MM/yyyy", new System.Globalization.CultureInfo("en-GB")); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T14:40:40.227

这似乎是一个日期分隔符问题。用这个;

```
String.Format("{0:d/M/yyyy}", date); 
```

检查[`String Format DateTime`](http://www.csharp-examples.net/string-format-datetime/)并查看[`DateTimeFormatInfo.DateSeperator`](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.dateseparator.aspx)财产。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-05T14:43:05.603

试试这个：

```
var dateString = string.Format("{0:dd/MM/yyyy}", DateTime.Today, new System.Globalization.CultureInfo("en-GB")); 
```

# web-services - 使用 JAXB 和 Eclipselink Moxy 从 Web 服务方法返回 JPA 实体

> ID：13725580
> 
> 赞同：3
> 
> 时间：2012-12-05T14:36:10.287
> 
> 标签：web-services, jakarta-ee, jaxb, websphere, moxy

我正在开发要部署在 WebSphere 应用程序服务器上的 Java EE 应用程序。在这个应用程序中，我有一个 Web 服务，我想通过它传输 JPA 实体对象作为方法调用的结果。问题来自实体关系产生的循环。

我使用 Eclipselink Moxy 来解决 JPA 实体之间的反向引用问题。但是，由于我自己没有调用 JAXB 实现，而是 WAS 调用它自己的实现，所以 @XmlInverseReference 注释会被忽略。我不想使用 @XmlTransient 注释，因为获取所有引用的实体作为方法结果对我来说很重要。

是否可以使用 Moxy 作为默认的 WebSphere JAXB 实现？或者，我可以为我的实体创建 JAXB 适配器，然后在运行时添加 @XmlTransient 注释吗？我需要这个，因为我有方法返回引用其他实体的实体，但也返回引用的实体及其对数据库关系源的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:22:52.147

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

在 JAX-WS 实现中不要求它们能够交换替代的 JAXB 实现。在不支持 MOXy 作为 JAX-WS 中的 JAXB 提供程序的环境中，一种选择是使用标准`Provider`机制。

*   [如何在 Web 服务中使用 Moxy XPath 注释 bean？](https://stackoverflow.com/questions/13474816/how-to-use-moxy-xpath-annotated-beans-in-web-services/13477125#13477125)

您可以尝试替换`@XmlInverseReference`注释需求的一个技巧是利用解组事件回调机制。这涉及将以下方法放在子对象上。在该方法的实现中，您可以设置对父级的引用。

```
void afterUnmarshal(Unmarshaller, Object parent); 
```

注意：您需要使用 注释该属性`@XmlTransient`。

*   [http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshalEventCallback](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/Unmarshaller.html#unmarshalEventCallback)

MOXy 可在以下环境中用作 JAX-WS 的 JAXB 提供程序：

*   WebLogic - [http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html](http://blog.bdoughan.com/2011/12/eclipselink-moxy-is-jaxb-provider-in.html)
*   GlassFish - [http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html](http://blog.bdoughan.com/2012/02/glassfish-312-is-full-of-moxy.html)

# java - 在 Java 中执行 SQL 时处理所有异常

> ID：13725592
> 
> 赞同：2
> 
> 时间：2012-12-05T14:36:56.103
> 
> 标签：java, sql

在 Java 中执行一条 SQL 语句涉及许多步骤：

1.  创建连接
2.  创建语句
3.  执行语句，创建结果集
4.  关闭结果集
5.  关闭声明
6.  关闭连接

在每个步骤中都可能抛出 SQLException。如果我们能够正确处理所有异常并释放所有资源，代码将如下所示，其中 4 级 TRY 堆叠在彼此的顶部。

```
try {
     Connection connection = dataSource.getConnection();
     try {
           PreparedStatement statement = connection.prepareStatement("SELECT 1 FROM myTable");
           try {
                ResultSet result = statement.executeQuery();
                try {
                     if (result.next()) {
                           Integer theOne = result.getInt(1);
                     }
                }
                finally {
                     result.close();
                }
           }
           finally {
                statement.close();
           }
     }
     finally {
           connection.close();
     }
}
catch (SQLException e) {
// Handle exception
} 
```

您能否提出一种更好（更短）的方式来执行语句，同时释放所有消耗的资源？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:40:25.143

如果您使用的是 Java 7，[try with resources](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)语句将大大缩短这一点，并使其更易于维护：

```
try (Connection conn = ds.getConnection(); PreparedStatement ps = conn.prepareStatement(queryString); ResultSet rs = ps.execute()) {

} catch (SQLException e) {
    //Log the error somehow
} 
```

请注意，关闭连接会关闭所有关联的`Statements`和`ResultSets`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:40:13.487

查看[Apache Commons DbUtils](http://commons.apache.org/dbutils/)，尤其是[closeQuietly()](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/DbUtils.html#closeQuietly%28java.sql.Connection,%20java.sql.Statement,%20java.sql.ResultSet%29)方法。它将正确处理连接/语句/结果集关闭，包括一个或多个为空的情况。

另一种选择是[Spring JdbcTemplate](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)，它可以从您那里抽象出很多工作，并且您可以以更*实用*的方式处理数据库查询。您只需提供一个类作为回调，以便为 a 的每一行调用`ResultSet`。它将处理迭代、异常处理和正确关闭资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:39:43.377

我使用可以调用的静态方法创建了一个实用程序类：

```
package persistence;

// add imports.

public final class DatabaseUtils {

    // similar for the others Connection and Statement
    public static void close(ResultSet rs) {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (Exception e) {
            LOGGER.error("Failed to close ResultSet", e);
        }
    }
} 
```

所以你的代码是：

```
 Integer theOne = null;
     Connection connection = null;
     PreparedStatement statment = null;
     ResultSet result = null;
     try {
         connection = dataSource.getConnection();
         statement = connection.prepareStatement("SELECT 1 FROM myTable");
         result = statement.executeQuery();
         while (result.next()) {
             theOne = result.getInt(1);
         }
    } catch (SQLException e) {
        // do something
    } finally {
        DatabaseUtils.close(result);
        DatabaseUtils.close(statement);
        DatabaseUtils.close(connection);
    }
    return theOne; 
```

我建议在此方法之外实例化 Connection 并将其传入。您可以通过这种方式更好地处理事务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:43:36.900

只需关闭`Connection`，这将释放所有资源*。您不需要关闭`Statement`and `ResultSet`。

*只要确保您没有任何活跃的交易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T14:48:34.080

```
Connection connection = null;
PreparedStatement statement = null;
ResultSet result = null;
try {
     connection = dataSource.getConnection(); 
     statement = connection.prepareStatement("SELECT 1 FROM myTable");
     result = statement.executeQuery();
     if (result.next()) {
         Integer theOne = result.getInt(1);
     }
}
catch (SQLException e) { /* log error */ }
finally {           
     if (result != null) try { result.close(); } catch (Exception e) {/*log error or ignore*/}
     if (statement != null) try { statement.close(); } catch (Exception e) {/*log error or ignore*/}
     if (connection != null) try { connection.close(); } catch (Exception e) {/*log error or ignore*/}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T14:48:58.480

您的代码可以缩短并以这种方式编写...

```
Connection connection = dataSource.getConnection();
PreparedStatement statement = null;
ResultSet result = null;
try {
    statement= connection.prepareStatement("SELECT 1 FROM myTable");
    result = statement.executeQuery();
    if (result.next()) {
        Integer theOne = result.getInt(1);
    }
} catch (SQLException e) {
    // Handle exception

} finally {
    if(result != null) result.close();
    if(statement != null) statement.close();
    if(connection != null) connection.close();
} 
```

# vb.net - 在 Visual Basic.net 中显示通知

> ID：13725594
> 
> 赞同：-5
> 
> 时间：2012-12-05T14:36:57.400
> 
> 标签：vb.net

使用 Visual Basic .Net，每当在特定路径中创建新程序或快捷方式时，我都希望收到来自 Windows 的通知（假设例如：）`C:\Users\name\AppData\Roaming\...\Programs\Startup`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T14:40:09.010

您可以将 a[`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)用于该路径并处理该[`Created`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.created.aspx)事件。

[**FileSystemWatcher-教程**](http://www.dotnetperls.com/filesystemwatcher)

# php - 使用时区数据来锻炼本地用户时间

> ID：13725596
> 
> 赞同：3
> 
> 时间：2012-12-05T14:36:58.883
> 
> 标签：php, javascript, codeigniter, timezone, utc

我们正在建立一个将在全球范围内查看的网站，因此需要我们的日期和时间来了解时区。我正在使用来自[https://bitbucket.org/pellepim/jstimezonedetect](https://bitbucket.org/pellepim/jstimezonedetect)的库来恢复用户的时区以及他们是否观察 DST。

在检索到这些信息后，我的问题是我有点困惑如何处理它。我们将所有 UTC 信息存储在数据库中，但是当我们从图书馆收到偏移量时，我们如何处理 DST 以及它们来自北半球还是南半球。另外我们如何在服务器端处理它。我的想法是在 PHP 上以标准 UTC 处理所有日期和时间，然后在处理视图后应用偏移量。

任何帮助将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:41:42.497

首先，您应该只使用 jsTimezoneDetect 来猜测用户的时区。它应该是用户可配置的，因为它可能不正确，并且因为用户可能希望使用与他实际所在的时区不同的时区。至少如果您有一个用户登录的系统，或者如果您有一个系统用户正在进入时代。

对于仅查看内容的临时访问者，在用户碰巧所在的任何时区显示时间应该没问题，尽管如果 jsTimezoneDetect 猜测错误的时区并且夏令时规则不同，您可能会在一小时内出错。如果您依赖 jsTimezoneDetect 的猜测，请确保清楚地显示您猜测用户所在的时区。

其次，您需要将 UTC 日期转换为用户配置的时区（或 jsTimezoneDetect 已猜到）。您可以使用幸运的是 PHP 支持的 zoneinfo/tz/Olsen 数据库（一个数据库，多个名称）来做到这一点。

我能找到的大多数在 PHP 中执行此操作的方法都涉及为整个 php 设置时区，然后格式化日期。不要那样做，那太疯狂了，始终保持 php 的时区与您的系统时区相同。

相反，在[DateTime 库](http://php.net/manual/en/book.datetime.php)的 DateTimeZone 对象中，支持为 DateTimes 设置时区并对其进行格式化。这就是前进的道路。

所以你可以做这样的事情。首先使用从数据库中获取的数据创建一个 UTC 格式的 DateTime 对象。

```
php > $date = new DateTime('2000-01-01', new DateTimeZone('UTC'));
php > echo $date->format('Y-m-d H:i:sP') . "\n";
2000-01-01 00:00:00+00:00 
```

然后您可以将其转换为用户时区：

```
php > $date->setTimezone(new DateTimeZone('Pacific/Chatham'));
php > echo $date->format('Y-m-d H:i:sP') . "\n";
2000-01-01 13:45:00+13:45 
```

或者另一个：

```
php > $date->setTimezone(new DateTimeZone('US/Eastern'));
php > echo $date->format('Y-m-d H:i:sP') . "\n";
1999-12-31 19:00:00-05:00 
```

# visual-c++ - OpenCv 和 Visual C++ Eyedetection

> ID：13725609
> 
> 赞同：0
> 
> 时间：2012-12-05T14:37:54.703
> 
> 标签：visual-c++, opencv, opencascade

我正在编写一个用于在网络摄像头流中进行眼睛检测的软件。我在 Visual Studio 中使用 OpenCV，但是当我加载 haarcascade 文件时，我得到一个未处理的异常并在输出中：

```
OpenCV error: NULL pointer <NULL or empty buffer> in unknow function,
file ....persistence.cpp 
```

这是代码：

```
#include <opencv2/core/core.hpp>
#include "opencv2/objdetect/objdetect.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include <iostream>
#include <stdio.h>

using namespace std;
using namespace cv;

/** Function Headers */
void detectAndDisplay( Mat frame );

/** Global variables */
String face_cascade_name = "C:/opencv/data/haarcascades/haarcascade_frontalface_alt.xml";
String eyes_cascade_name = "C:/opencv/data/haarcascades/haarcascade_eye_tree_eyeglasses.xml";
CascadeClassifier face_cascade;
CascadeClassifier eyes_cascade;
string window_name = "Capture - Face detection";
RNG rng(12345);

/** @function main */
int main( int argc, const char** argv )
{
    CvCapture* capture;
    Mat frame;
    int a;
    //-- 1\. Load the cascades
    if (!face_cascade.load( face_cascade_name) ) {
        cout << "Couldn't load face_cascade" << endl;
        exit(-1);
    }
    if (!eyes_cascade.load( eyes_cascade_name) ) {
        cout << "Couldn't load face_cascade" << endl;
        exit(-1);
    }

    cout << "Loaded cascade" << endl;

    //-- 2\. Read the video stream
    capture = cvCaptureFromCAM( -1 );
    if( capture )
    {
        while( true )
        {
            frame = cvQueryFrame( capture );

            //-- 3\. Apply the classifier to the frame
            if( !frame.empty() )
            { detectAndDisplay( frame ); }
            else
            { printf(" --(!) No captured frame -- Break!"); break; }

            int c = waitKey(10);
            if( (char)c == 'c' ) { break; }
        }
    }
    return 0;
}

/** @function detectAndDisplay */
void detectAndDisplay( Mat frame )
{
    std::vector<Rect> faces;
    Mat frame_gray;

    cvtColor( frame, frame_gray, CV_BGR2GRAY );
    equalizeHist( frame_gray, frame_gray );

    //-- Detect faces
    face_cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );

    for( int i = 0; i < faces.size(); i++ )
    {
        Point center( faces[i].x + faces[i].width*0.5, faces[i].y + faces[i].height*0.5 );
        ellipse( frame, center, Size( faces[i].width*0.5, faces[i].height*0.5), 0, 0, 360,
                Scalar( 255, 0, 255 ), 4, 8, 0 );

        Mat faceROI = frame_gray( faces[i] );
        std::vector<Rect> eyes;

        //-- In each face, detect eyes
        eyes_cascade.detectMultiScale( faceROI, eyes, 1.1, 2, 0 |CV_HAAR_SCALE_IMAGE, Size(30,30) );

        for( int j = 0; j < eyes.size(); j++ )
        {
            Point center( faces[i].x + eyes[j].x + eyes[j].width*0.5, faces[i].y + eyes[j].y + eyes[j].height*0.5 );
            int radius = cvRound( (eyes[j].width + eyes[j].height)*0.25 );
            circle( frame, center, radius, Scalar( 255, 0, 0 ), 4, 8, 0 );
        }
    }
    //-- Show what you got
    imshow( window_name, frame );
} 
```

我已经完成了所有包含以使 OpenCV 与 Visual Studio 一起工作，并且级联分类器处于正确的路径中，所以我不知道为什么这段代码不起作用。

啊，当我尝试示例时，我也有例外`facerecognition.cpp`。任何帮助表示赞赏。

* * *

### 编辑：

我在巴拿巴的帮助下试过了，但例外是一样的。

但也许我发现了什么。如果我删除代码

```
if (!eyes_cascade.load( eyes_cascade_name) ) { 
    cout << "Couldn't load face_cascade" << endl;
    exit(-1); 
} 
```

打开网络摄像头软件后出现异常，如果我继续，结果是一个框架（只有一个），我可以看到我的脸被识别出来。所以如果我删除对眼睛级联分类器加载的控制，问题就会延迟。新的主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:16:06.527

基本上，问题在于您混淆了 C++ 和 C 接口。

相机捕捉不是`CvCapture*`。以下是正确从网络摄像头（或视频流）捕获的方法：

```
using namespace cv;
VideoCapture cap(0); // 0 for webcam input
if(cap.isOpened())   // use this instead of if( capture )

cap >> frame;        // instead of cvQueryFrame 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T10:22:15.617

当我意识到这可能与由于某种原因使用错误的 dll 的程序有关时，这个问题让我发疯了；我还没弄清楚为什么。我的预感是我的 OPENCV_DIR 环境变量设置为旧版本的 OpenCV，但检查后我已将其设置为较新版本。

无论如何，要在 VS 2012 (vc11) 中获取工作代码，我做了以下操作：

打开属性页面并转到配置属性 > 调试并添加到环境变量“path=C:/OpenCV2_4_5/build/x86/vc11/bin;%PATH%”，不带引号。显然，您到该 bin 文件夹的路径可能不同。

希望这可以帮助。

# c# - 如何从 Linq 方法将参数传递给自定义函数？

> ID：13725611
> 
> 赞同：0
> 
> 时间：2012-12-05T14:38:03.857
> 
> 标签：c#, linq

如何将 filterSettnig 参数从 Linq ConvertAll 方法传递给 CalculateEndDateTime 方法？

```
public static List<IAppointment> ConvertToIAppointment(
                                 List<Misa.Runtime.Entities.Agenda> appointments,
                                 AgFilterDisplay filterSettnig)
{
    List<Misa.Agenda.IAppointment> result = null;
    if (appointments != null)
        result = appointments.ConvertAll<IAppointment>(CalculateEndDateTime(/*here i want to pass filterSettnig parameter*/));
    return result;
}

private static IAppointment CalculateEndDateTime(Entities.Agenda agenda, 
                                                 AgFilterDisplay filterSettnig)
{
    IAppointment result = null;

    if (agenda.ClusterID > 0)
    {
        if (agenda.StartDateTime.Date != agenda.EndDateTime.Date)
        {
            agenda.EndDateTime = agenda.StartDateTime.Date.Add(new TimeSpan(23, 59, 59));
        }
    }

    result = (IAppointment)agenda;

    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:42:26.233

改用`Select`它，它是 LINQ 的一部分。`ConvertAll`是一种`List<T>`方法，而不是 LINQ 方法。

```
result = appointments.Select(a => CalculateEndDateTime(a, filterSetting))
                     .ToList(); 
```

# c# - 无法捕获 NullReferenceException

> ID：13725619
> 
> 赞同：1
> 
> 时间：2012-12-05T14:38:27.870
> 
> 标签：c#, exception-handling

第一次在这里发帖，如果我的一些细节有误，非常抱歉。我试图捕捉用户输入无效（不存在）员工的异常。我尝试了许多不同的变体，但从未引发错误。相反，代码只是终止，在这种情况下，它将在以下行之后退出：

```
 MyPostSalary = Convert.ToDouble(Console.ReadLine());
 Console.WriteLine(); 
```

谁能看到我做错了什么？

完整代码：

```
 Console.Write("Employee ID: ");
        myEID = Console.ReadLine();

        try
        {
            Console.Write("Post ID: ");
            myPID = Console.ReadLine();

            if ((myEmployees[myEID] is MonthlyPaidEmployee) || (myEmployees[myEID] isWeeklyPaidEmployee))
            {

                Console.Write("Post Name: ");
                MyPostName = Console.ReadLine();
                Console.Write("Post Start Date: ");
                MyPostStartDate = Convert.ToDateTime(Console.ReadLine());
                Console.Write("Post End Date: ");
                MyPostEndDate = Convert.ToDateTime(Console.ReadLine());
                Console.Write("Post Salary: ");
                MyPostSalary = Convert.ToDouble(Console.ReadLine());
                Console.WriteLine();

                myPost = new Post(myPID, MyPostName, MyPostStartDate, MyPostEndDate, MyPostSalary);

                if (myEmployees[myEID] is MonthlyPaidEmployee)
                {
                    myMonthlyEmp = (MonthlyPaidEmployee)myEmployees[myEID];
                    myMonthlyEmp.PostHistory.Add(myPID, myPost);
                }

                if (myEmployees[myEID] is WeeklyPaidEmployee)
                {
                    myWeeklyEmp = (WeeklyPaidEmployee)myEmployees[myEID];
                    myWeeklyEmp.WeeklyPaidEmployeePostHistory.Add(myPID, myPost);
                }

            }

        }
        catch (NullReferenceException ex)
        {

            Console.WriteLine("Employee ID does not exist.");
            Console.WriteLine(ex.Message);
            Console.WriteLine();
            Console.WriteLine("Press any key to continue");
            Console.ReadLine();

        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-31T13:05:01.213

您是否在 Visual Studio（或您的 IDE）上进行调试？如果是，则可能您正在捕获异常，但 IDE 设置为在引发异常时显示警告消息...尝试在 IDE 之外运行您的应用程序，如果它有效，您可以在 NullReferenceExceptions raise 时禁用警告，但它是相当危险。为此，请在 Visual Studio 中查找“异常设置”（或类似的东西，我不确定，因为我使用的是意大利语版本）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T14:43:18.723

您只捕获 NullReferenceException 异常，但正如您在[Convert.ToDouble()](http://msdn.microsoft.com/en-us/library/zh1hkw6k.aspx)的方法描述中看到的那样，它会引发**InvalidCastException**。

所以试试吧`catch (InvalidCastException ex)`。

还要注意`FormatException`和`OverflowException`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:25:04.027

很明显，您*没有*收到 NullReferenceException。我建议您尝试以下方法：

```
catch (Exception ex)
{
        Console.WriteLine(ex.ToString());
        Console.WriteLine();
        Console.WriteLine("Press any key to continue");
        Console.ReadLine();        
} 
```

找出您收到的异常，然后捕获该*特定*异常，或者从一开始就阻止它发生。

您*永远不*应该捕获 NullReferenceException。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:40:33.380

你没有得到双重转换例外吗？您可能应该使用 Double.TryConvert 而不是 Convert。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T14:40:36.000

看起来输入的文本无法转换为双精度。

尝试捕捉一个`InvalidCastException`.

# jasper-reports - iReport“保持组在一起”在某些情况下不起作用

> ID：13725621
> 
> 赞同：3
> 
> 时间：2012-12-05T14:38:32.487
> 
> 标签：jasper-reports, ireport

我有以下问题。我有 subreport_1，现在不相关，然后是 subreport_2，带有组页眉和组页脚，keepTogether = True。然后我将 subreport_1 和 subreport_2 放入 mainReport 并执行。在某些情况下，当 subreport2 的末尾接近页面末尾时，keepTogether 不起作用并且最后一行被拆分，其余部分、组页眉和页脚在下一页。当我在 mainReport 中更改底部边距的大小时它可以工作，但我认为当我有任何其他行数左右时它会再次发生......你能帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:43:22.083

我看到您的问题被发布为我的一个问题的答案（http://stackoverflow.com/questions/13830635/ireport-place-border-around-entire-group-in-column），然后注意到您创建了一个问题你自己。为了解决这个问题，我将我想保持在一起的字段分组，然后在 XML 视图中添加：

```
keepTogether="true" 
```

到组定义。它最终看起来像：

```
<group name="group_foobar" keepTogether="true> 
```

在我的报告中，这样做是为了让一个组不会跨页中断。如果组可以从一页开始但不完全适合，则它不会在该页上打印，而是从下一页开始。

您说您在报告中使用了 keepTogether 标签。是在 subreport_2 中实际发生分组的地方吗？那就是它需要的地方。而且由于您在动态扩展的子报表中执行此分组，我将设置 subreport_2 以忽略分页并在主报表中设置我的维度，以便主报表可以控制分页。

# sql - 将多值参数传递给子报表

> ID：13725622
> 
> 赞同：7
> 
> 时间：2012-12-05T14:38:38.243
> 
> 标签：sql, reporting-services, parameters, subreport, multivalue

我在处理`multivalue`报告之间的参数时遇到问题。

我有一个主报告，其中定义了一个多值参数，我用它来运行 SQL 查询来填充其数据集。该参数在 WHERE 子句中的使用方式如下：

```
WHERE values IN (@parameter) 
```

它工作正常，它检索了预期的数据。

然后这个主报表将此参数传递给子报表。该参数在子报表中也被定义为多值，据我在参数的下拉列表中看到的，它以正确的方式接收值。像这样的东西：A，B，C

问题是填充子报表数据集的查询不返回任何内容。它还有一个在主报告中定义的 WHERE 子句（已经在工作）

```
WHERE values IN (@parameter) 
```

如果我手动运行查询，将值硬编码为如下所示：

```
WHERE values IN ('A', 'B', 'C') 
```

它可以工作，但是当我尝试使用该参数时它不会。因此，它以某种方式丢失了格式或值。

我在子报表的数据集定义中尝试了这个解决方案，这是在另一个线程中提出的：

```
 =join(Parameters!<your param name>.Value,",") 
```

但这对我不起作用，数据集仍然是空的。

关于我所缺少的任何想法？

谢谢！:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T17:55:57.413

这应该“正常工作”。确保子报表中的参数设置为多值，并且我通常使用与父报表中完全相同的查询来提供“可用值”。

检查您是否将整个参数传递给子报表：在父报表的子报表属性中，参数的值应为`[@MyParamName]`not `<<Expr>>`。如果读取为后者，请编辑表达式并确保其末尾没有 (0)。但是`=Parameters!MyParamName.Value`是正确的，**不是** `=Parameters!MyParamName.Value(0)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T20:32:48.263

刚刚再次从头开始创建报告并且它有效。我肯定忘记了中间的东西。

无论如何，以防万一有人需要它，两个参数，一个在主报表中，一个在子报表中，必须定义为多值。然后在您的查询中，您应该`IN`在您的类中使用`WHERE`，如下所示：

```
WHERE field IN (@parameter) 
```

并且不需要其他任何东西。我不需要执行以下操作：

```
=join(Parameters!<your param name>.Value,",") 
```

它对我有用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-24T04:34:13.303

我想我知道你做了什么，因为我遇到了同样的问题。子报表设置得很好，但是在父报表中输入参数绑定时，`Value`下拉菜单没有提供我的参数，所以我使用表达式生成器来选择它。这会在值中留下灰色`<< Expr >>`标记，并且仅当我从列表中选择一个值时才会起作用。当我用它替换`[@MyParam]`它时，无论选择多少值，它都可以正常工作。当我查看值表达式构建器创建的值时，它已经更接近了`=Parameters!MyParam.Value(0)`。删除`(0)`也可以修复它。

# ms-access - 在 Access 2007 中运行 Access 2003 应用程序

> ID：13725633
> 
> 赞同：0
> 
> 时间：2012-12-05T14:39:37.017
> 
> 标签：ms-access

将 Access 2003 应用程序迁移到 Access 2007 需要付出哪些努力？将 mdb 转换为 accdb 是否有任何问题？必须进行哪些修改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:56:05.480

这将完全基于正在迁移的应用程序，任何人都无法回答。这就像问“我家厨房现代化需要多少钱？”。不知道更多（需要做什么，你想要什么样的新电器，你想要的橱柜，台面和地板的选择，你所在地区的劳动力和材料成本，现有结构的状况），这是无法预测的。

只需迁移它，然后处理出现的问题。确保完整备份原始应用程序；如果一切都毁了，只需从备份中恢复并重新开始（或将其保留为 Access 2003 应用程序）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:34:36.970

虽然这确实是一个悬而未决的问题，但有一些指导方针可以帮助您确定它的难度。看看这个：
[http ://www.sagekey.com/support_forum.aspx?g=posts&t=393](http://www.sagekey.com/support_forum.aspx?g=posts&t=393)

由于我升级的数据库都没有涉及那篇文章中描述的主要缺陷，所以我遇到的问题很少。我昨晚做的一个花了我大约30分钟。

# python - python 正则表达式，替换字符串中的模式

> ID：13725634
> 
> 赞同：0
> 
> 时间：2012-12-05T14:39:39.897
> 
> 标签：python, regex

我想用 wiki 标记替换字符串中的一些子字符串。例如我有一个字符串

```
some other string before
; Methods
{{columns-list|3|
* [[Anomaly detection|Anomaly/outlier/change detection]]
* [[Association rule learning]]
* [[Statistical classification|Classification]]
* [[Cluster analysis]]
* [[Decision trees]]
* [[Factor analysis]]
* [[Neural Networks]]
* [[Regression analysis]]
* [[Structured data analysis (statistics)|Structured data analysis]]
* [[Sequence mining]]
* [[Text mining]]
}}

; Application domains
{{columns-list|3|
* [[Analytics]]
* [[Bioinformatics]]
* [[Business intelligence]]
* [[Data analysis]]
* [[Data warehouse]]
* [[Decision support system]]
* [[Drug Discovery]]
* [[Exploratory data analysis]]
* [[Predictive analytics]]
* [[Web mining]]
}}
some other string after 
```

我想将原始子字符串替换为

```
[[Anomaly detection|Anomaly/outlier/change detection]]
[[Association rule learning]]
[[Statistical classification|Classification]]
[[Cluster analysis]]
[[Decision trees]]
[[Factor analysis]]
[[Neural Networks]]
[[Regression analysis]]
[[Structured data analysis (statistics)|Structured data analysis]]
[[Sequence mining]]
[[Text mining]]
[[Analytics]]
[[Bioinformatics]]
[[Business intelligence]]
[[Data analysis]]
[[Data warehouse]]
[[Decision support system]]
[[Drug Discovery]]
[[Exploratory data analysis]]
[[Predictive analytics]]
[[Web mining]] 
```

我首先尝试了一些正则表达式来提取 {{ }} 中的内容。但我总是没有。

ADD：问题是我只对 [[]] 中的内容感兴趣，它本身就在 {{}} 中。我在字符串的其他部分还出现了其他一些 [[]] 。

那么，我怎么能通过使用 re.sub 来做到这一点？谢谢

ADD：当前解决方案（丑陋）

```
def regt(matchobj):
  #store matchobj.group(0) somewhere else, later on add them to the string
  #Next, another function will remove all {{}} alway
  return ''

matches = re.sub(r'\[\[.*?\]\](?=[^{]*\}\})', regt,wiki_string2) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:43:26.953

尝试使用非贪婪的正则表达式，例如： r"\{\{.*?\}\}"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:46:02.003

**匹配**它而不是`replacing`它

```
\[\[.*?\]\](?=[^{]*\}\}) 
```

* * *

`.*?`懒惰地匹配。所以它会在第一次`]]`发生时停止

`.*`贪婪地匹配。所以它会在最后一次`]]`发生时停止

* * *

`(?=[^{]*}})` is a `lookahead` which means match content within `[[ ]]` only if it is followed by 0 to many characters except `{` till `}}`..

This is done because you want to match `[[``]]` if it is within `{{` `}}`..

So characters after `]]` would be any character except `{` till `}}`..

So this would avoid cases like this

```
[[xyz]]<-this would not match since { after it
{{
[[xyz]]<-this would match since it is not followed by { and it reaches }}
[[xyz]]<-this would match since it is not followed by { and it reaches }}
}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:52:04.883

You can try the following:

```
In [10]: p = "\[\[.*?\]\]"
In [11]: s1 = '\n'.join(re.findall(p, s)) 
```

**Update** With your additional constrain (only text inside {{}} matches) you can achieve your goal in two steps:

*   select the text inside braces
*   then select the text inside square braquets

You can do it as follow (I use a source string containing text in square braquets that doesn't match):

```
In [157]: print s
some [[other string before]]
Methods("")
{{columns-list|3|
* [[Cluster analysis]]
* [[Decision trees]]
* [[Factor analysis]]
}}
Application("domains")
{{columns-list|3|
* [[Analytics]]
* [[Bioinformatics]]
* [[Web mining]]
}}
some [[other string after]]

In [158]: p = "(?:\{\{)[\s\S]*?(?:\}\})"

In [159]: s1 = '\n'.join(re.findall(p, s))

In [160]: print s1
{{columns-list|3|
* [[Cluster analysis]]
* [[Decision trees]]
* [[Factor analysis]]
}}
{{columns-list|3|
* [[Analytics]]
* [[Bioinformatics]]
* [[Web mining]]
}}

In [161]: p1 = "\[\[.*\]\]"

In [162]: s2 = '\n'.join(re.findall(p1, s1))

In [163]: print s2
[[Cluster analysis]]
[[Decision trees]]
[[Factor analysis]]
[[Analytics]]
[[Bioinformatics]]
[[Web mining]] 
```

# windows - qaction翻译

> ID：13725638
> 
> 赞同：0
> 
> 时间：2012-12-05T14:39:50.740
> 
> 标签：windows, qt

我在翻译 QActions 时遇到了一些问题
在翻译文件中有 FILETAB_* 字符串的翻译，
但在应用程序中没有使用这些翻译，例如，用户参见
FILETAB_OPEN_FILE。
有人能帮忙吗？

```
void Application::setLanguage(const QString& locale)
{
    // remove previous
    if (current)
    {
        removeTranslator(current);
    }
    current_locale=locale;
    // install new

    current = translators.value(locale, 0);
    if (current)
    {
        installTranslator(current);
    }
}
void MainWindow::changeEvent(QEvent *event)
{
 if (event->type()==QEvent::LanguageChange)
 {
    retranslateUi(this);
 }
 QMainWindow::changeEvent(event);
}
void MainWindow::setupFileTabel()
{
    fileTableWidget->setSelectionBehavior(QAbstractItemView::SelectRows);
    fileTableWidget->setContextMenuPolicy(Qt::CustomContextMenu);
    setupFileTabelContextMenu();
}
void MainWindow::setupFileTabelContextMenu()
{
    fileTabMenu = new QMenu(fileTableWidget);
    openFile = new QAction(tr("FILETAB_OPEN_FILE"), fileTabMenu);
    QObject::connect(openFile, SIGNAL(triggered()), this, SLOT(OpenFileSelected()));
    fileTabMenu->addAction(openFile);
    openDir = new QAction(tr("FILETAB_OPEN_FOLDER"), this);
    QObject::connect(openDir, SIGNAL(triggered()), this, SLOT(OpenDirSelected()));
    fileTabMenu->addAction(openDir);
    fileTabMenu->addSeparator();
    priority = new QMenu(fileTabMenu);
    priority->setTitle(tr("FILETAB_PRIORITY"));
    lowPriority = new QAction(tr("FILETAB_PRIORITY_LOW"), fileTabMenu);
    lowPriority->setCheckable(true);
    QObject::connect(lowPriority, SIGNAL(triggered()), this, SLOT(setLowForCurrentFile()));
    priority->addAction(lowPriority);
    mediumPriority = new QAction(tr("FILETAB_PRIORITY_MEDIUM"), fileTabMenu);
    mediumPriority->setCheckable(true);
    QObject::connect(mediumPriority, SIGNAL(triggered()), this, SLOT(setMediumForCurrentFile()));
    priority->addAction(mediumPriority);
    highPriority = new QAction(tr("FILETAB_PRIORITY_HIGH"), fileTabMenu);
    highPriority->setCheckable(true);
    QObject::connect(highPriority, SIGNAL(triggered()), this, SLOT(setHighForCurrentFile()));
    priority->addAction(highPriority);
    fileTabMenu->addMenu(priority);
    fileTabMenu->addSeparator();
    dontDownload = new QAction(tr("FILETAB_PRIORITY_ZERO"), fileTabMenu);
    dontDownload->setCheckable(true);
    QObject::connect(dontDownload, SIGNAL(triggered()), this, SLOT(setNotDownloadForCurrentFile()));
    fileTabMenu->addAction(dontDownload);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T22:14:08.333

QAction 的第一个参数不是动作的名称，而是将出现在该动作的菜单中的文本。tr() 函数将传入的字符串标记为应本地化的字符串。看看这里的解释。

[http://qt-project.org/doc/qt-4.8/internationalization.html#use-tr-for-all-literal-text](http://qt-project.org/doc/qt-4.8/internationalization.html#use-tr-for-all-literal-text)

# c# - 如何在 C# 中同步值的集合

> ID：13725641
> 
> 赞同：2
> 
> 时间：2012-12-05T14:39:55.093
> 
> 标签：c#, synchronization

我继承了一些代码，这些代码具有一组通过在单独线程上运行的串行链接捕获的实时值：

```
class Data
{
    public static int nFooCount;
    public static decimal meanValue;
    // Lots more of a variety of types.
} 
```

线程只是将数据存储到没有锁定或其他同步的字段中。对我来说，这看起来像是一大堆比赛条件。所以我想给它增加一些安全性。问题是，什么是最好的？

我可以使 int 字段不稳定。但是，不能用十进制类型做到这一点。互锁可以帮助解决这个问题，尽管很混乱，使用拳击。或者我可以添加一个锁定对象

```
private static readonly object lockObj = new object(); 
```

然后访问所有内容。但这会锁定所有字段，即使它一次只修改一个字段。我不能锁定原语，这无论如何都是不好的形式，为每个字段添加一个锁定对象看起来很浪费。那么有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:44:17.023

您可以使用 . 根据所需的访问级别锁定[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx "ReaderWriterLockSlim 文档")。您可以通过将它们变成属性来更好地做到这一点：

```
public int Something
{
   get {
      locker.EnterReadLock();

      try {
         return something;
      } finally {
         locker.ExitReadLock();
      }
   }
   set {
      locker.EnterWriteLock();

      try {
         something = value;
      } finally {
         locker.ExitWriteLock();
      }
   }
} 
```

这允许多次读取和一次写入。

# ruby - 在 ruby 中创建哈希数组

> ID：13725643
> 
> 赞同：6
> 
> 时间：2012-12-05T14:40:00.083
> 
> 标签：ruby, arrays, hashmap

我想在 ruby​​ 中创建一个哈希数组：

```
 arr[0]
     "name": abc
     "mobile_num" :9898989898
     "email" :abc@xyz.com

 arr[1]
     "name": xyz
     "mobile_num" :9698989898
     "email" :abcd@xyz.com 
```

我看过[哈希](http://www.ruby-doc.org/core-1.9.3/Hash.html)和[数组](http://www.ruby-doc.org/core-1.9.3/Array.html)文档。在我发现的所有东西中，我必须做类似的事情

```
c = {}
c["name"] = "abc"
c["mobile_num"] = 9898989898
c["email"] = "abc@xyz.com"

arr << c 
```

在循环中按照上述语句进行迭代允许我填充`arr`. 我实际上 rowofrows 与一排喜欢`["abc",9898989898,"abc@xyz.com"]`。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-05T15:19:07.150

假设您所说的“rowofrows”是一个数组数组，这是我认为您想要完成的解决方案：

```
array_of_arrays = [["abc",9898989898,"abc@xyz.com"], ["def",9898989898,"def@xyz.com"]]

array_of_hashes = []
array_of_arrays.each { |record| array_of_hashes << {'name' => record[0], 'number' => record[1].to_i, 'email' => record[2]} }

p array_of_hashes 
```

将输出您的哈希数组：

```
[{"name"=>"abc", "number"=>9898989898, "email"=>"abc@xyz.com"}, {"name"=>"def", "number"=>9898989898, "email"=>"def@xyz.com"}] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-09-12T13:26:55.800

您可以首先将数组定义为

```
array = [] 
```

然后您可以按以下方式一一定义哈希并将它们推送到数组中。

```
hash1 = {:name => "mark" ,:age => 25} 
```

然后做

```
array.push(hash1) 
```

这会将散列插入到数组中。同样，您可以推送更多哈希来创建哈希数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-03T14:58:35.953

您也可以直接在 push 方法中执行此操作，如下所示：

1.  首先定义你的数组：

    `@shopping_list_items = []`

2.  并将新项目添加到您的列表中：

    `@shopping_list_items.push(description: "Apples", amount: 3)`

3.  这会给你这样的东西：

    `=> [{:description=>"Apples", :amount=>3}]`

# qt - Qt5 - 将一个简单的 Qt Quick 应用程序移植到 Qt5。需要帮助

> ID：13725644
> 
> 赞同：5
> 
> 时间：2012-12-05T14:40:02.753
> 
> 标签：qt, qml, qt-quick, qt5

我正在尝试将一个简单的 Qt Quick 应用程序从 Qt4.8 移植到 Qt5.0beta。我的初始（Qt4.8）代码类似于以下内容：

main.cpp 将在具有半透明背景的无框窗口中显示 QDeclarativeView

```
#include <QtGui/QApplication>
#include "qmlapplicationviewer.h"
#include <QtDeclarative>
#include <QDeclarativeContext>

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));

    QmlApplicationViewer viewer;
    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setMainQmlFile(QLatin1String("qml/main.qml"));

    viewer.setWindowFlags(Qt::FramelessWindowHint);

    viewer.setAttribute(Qt::WA_TranslucentBackground);
    viewer.setStyleSheet("background:transparent;");
    viewer.setResizeMode(QDeclarativeView::SizeViewToRootObject);
    viewer.showExpanded();

    return app->exec();
} 
```

main.qml 只会在另一个透明矩形内显示一个红色矩形。

```
import QtQuick 1.1

Rectangle {
    width: 360
    height: 360
    color: "transparent"
    Rectangle
    {
     x: 125
     y: 122
        width: 110
        height: 116
        anchors.centerIn: parent
        color: "red"
  radius: 27
    }

    Text {
     color: "black"
        text: qsTr("Press me!")
        font.pointSize: 14
        anchors.centerIn: parent
    }

    MouseArea {
        anchors.fill: parent
        onClicked: {
            Qt.quit();
        }
    }
} 
```

为了使其与 Qt5 兼容，需要进行一些更改。（我已经关注了[http://qt-project.org/doc/qt-5.0/portingqmlapp.html](http://qt-project.org/doc/qt-5.0/portingqmlapp.html) [qt-project.org] 为了不错过一些东西）

现在 main.cpp 类似于：

```
#include <QtGui/QGuiApplication>
#include "qtquick2applicationviewer.h"
#include <QtWidgets/QtWidgets>
#include <QtWidgets/QLabel>

int main(int argc, char *argv[])
{

    QGuiApplication app(argc, argv);
    QtQuick2ApplicationViewer viewer;
    viewer.setMainQmlFile(QStringLiteral("qml/main.qml"));
    viewer.setWindowFlags(Qt::FramelessWindowHint);
    viewer.showExpanded();

    return app.exec();
} 
```

在 main.qml 中只替换了一行。

```
import QtQuick 2.0 
```

但我无法找到保持透明度的方法

```
setAttribute(Qt::WA_TranslucentBackground);
setStyleSheet("background:transparent;"); 
```

setAttribute 和 setStyleSheet 可用于 QDeclarativeView（这是一个 QWidget），但不适用于 QQuickView（这是一个 QWindow）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T13:47:03.723

试试我的 QuickWidget，如果它对你有帮助：

[http://code.google.com/p/quickwidget/](http://code.google.com/p/quickwidget/)

或者，更好的是，使用`QQuickWidget`from `Qt 5.3+`。

# hibernate - Hibernate ElementCollection 子删除

> ID：13725650
> 
> 赞同：1
> 
> 时间：2012-12-05T14:40:22.940
> 
> 标签：hibernate, jpa, jpa-2.0

我的 UserPO 实体中有这个映射：

```
@ElementCollection
@JoinTable(name = "role", joinColumns = { @JoinColumn(name = "user_id") }, inverseJoinColumns = { @JoinColumn(name = "department") })
@MapKeyJoinColumn(name = "mission")
private Map<MissionPO, DepartmentListPO> departmentsByMission = new HashMap<MissionPO, DepartmentListPO>(); 
```

我使用表 DepartmentList 和 DepartmentListPO`Map<MissionPO, List<DepartmentPO>>`似乎不是 Hibernate（或 JPA）的选项

到目前为止一切顺利，用户可以被赋予仅限于部门列表的任务。

示例：Tom 在部门 10 和 11 执行任务 1

我的问题是，如果我删除一个任务：

```
departmentsByMission.remove(mission) 
```

链接 User/Mission/DepartmentList的`role`行不会被删除。我阅读了很多线程，似乎无法使用`ElementCollection`.

我尝试对`ON CASCADE DELETE`DepartmentList 外键上的角色表使用约束，但这似乎与我想要的相反。删除 DepartmentList 将删除该角色。

所以我想做`entityManager.remove(departmentList)`的`removeMission`是在`actor`.

不幸的是，似乎`PersistentContext`无法将其放入`User`实体中。

所以我有点困惑解决方案是什么，我知道我想避免数据库触发器。

感谢您的任何解决方案，我真的被困在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:46:33.700

我认为这个问题是由数据模型引起的，而不是 ORM、hibernate 或 JPA 的问题。根据我的经验，这似乎是一种非常规的方法。

一个任务可以是它自己的实体，它包含一个部门属性，它也作为一个实体存在。在创建任务地图时，使用数据库中的代理键作为地图的键会更有用。我会鼓励您花时间检查您的数据模型以查找需要映射的其他实体。

# iphone - 相对于文本标签，如何将按钮添加到 MBProgressHUD？

> ID：13725657
> 
> 赞同：1
> 
> 时间：2012-12-05T14:40:31.273
> 
> 标签：iphone, ios, uibutton, mbprogresshud

我想向 中添加一个自定义取消按钮`MBProgressHUD`，并且我希望它恰好位于文本标签的右侧。但是`MBProgresHUD`是通过覆盖`drawRect`方法绘制的，所以，虽然我可以将按钮作为子视图添加到 HUD，但我不知道文本标签会有多大，所以我可以正确定位我的按钮。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:14:48.980

我不确定这是否可以直接使用`MBProgressHUD`. 并非没有重写大部分内容。

一种选择可能是将您自己的按钮添加为您要向其中添加 HUD 的视图的子视图，这样只会关闭 HUD 或取消操作。

```
UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(50, 50, 50, 50)]; // made up coords here
// set button stuff here
[self.view addSubview:button]; 
```

您需要设置按钮操作、背景或图像（用于外观），然后将其添加到您的视图中。基本上2个视图来实现你所需要的。HUD 和按钮。`MBProgressHUD`可能比重写以允许按钮容易得多。

# java - 从片段创建新的 listadapter。知道如何从活动而不是片段中做到这一点

> ID：13725664
> 
> 赞同：1
> 
> 时间：2012-12-05T14:40:51.927
> 
> 标签：java, android, android-layout

我有一个 ArrayAdapter，我想从 Fragment 调用（创建），我知道如何从活动而不是从 Fragment 来做，也许你们中的一个人可以给我正确的语法？

无论如何，我尝试从片段中执行以下操作

```
ShareHoldingAdapter adapter = new ShareHoldingAdapter(this, R.layout.listview_item_row, allShareHoldings); 
```

但是我的适配器有构造函数`ShareHoldingAdapter(Context portfolioFragMent, int layoutResourceId, ArrayList<ShareHolding> data)`IE 它是一个“上下文”而不是一个“PortolioFragment”或只是一个片段

您将如何更改我的适配器，以便从片段而不是现在（从活动？）

这是我的适配器代码

```
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class ShareHoldingAdapter extends ArrayAdapter<ShareHolding>{

    Context context; 
    int layoutResourceId;    
    ArrayList<ShareHolding> data = null;
    private ShareHolder holder;
    private ShareHolding shareHold;

    private int buttonPressed = 0;
    public void setButtonPressed(int buttonPressed) {
        this.buttonPressed = buttonPressed;
        notifyDataSetChanged();
    }

    public ShareHoldingAdapter(Context portfolioFragMent, int layoutResourceId, ArrayList<ShareHolding> data) {//Need to change this constructor to accept a fragment instead of an activiy (context)
        super(portfolioFragMent, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = portfolioFragMent;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        holder = null;

        if(row == null)
        {
            LayoutInflater inflater = ((Activity)context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ShareHolder();
            holder.imgIcon = (TextView)row.findViewById(R.id.imgen);
            holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        }
        else
        {
            holder = (ShareHolder)row.getTag();
        }

        shareHold = data.get(position);
        holder.txtTitle.setText(shareHold.getName());

        //buttonPressed

        switch (buttonPressed) {
        case 0: 
            holder.imgIcon.setText(Double.toString(shareHold.getSharesChangeTodayPercent()));
          break;
        case 1: 
            holder.imgIcon.setText(Double.toString(shareHold.getCurrentRate()));
          break;
        case 2: 
            holder.imgIcon.setText(Double.toString(shareHold.getNrOfSharesInPortfolio()));
          break;
        case 3: 
            holder.imgIcon.setText(Double.toString(shareHold.getTotalPercentDifference()));
          break;
        case 4: 
            holder.imgIcon.setText(Double.toString(shareHold.getTotalDiffrenceKr()));
          break;
        case 5: 
            holder.imgIcon.setText(Double.toString(shareHold.getTotalKr()));
          break;
        default: 
            holder.imgIcon.setText(Double.toString(shareHold.getBuyingRate()));
      }

        //holder.imgIcon.setText(Double.toString(weather.getBuyingRate()));
        return row;
    }

    static class ShareHolder
    {
        TextView imgIcon;
        TextView txtTitle;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:56:21.670

要从片段创建适配器，您应该调用：

```
ShareHoldingAdapter adapter = new ShareHoldingAdapter(getActivity(), R.layout.listview_item_row, allShareHoldings); 
```

因为`Fragment.getActivity()`return`Activity`是的子类`Context`

# python - 变量 +=% 可能或如何在另一个数字之后获得一个数字的下一个区间

> ID：13725667
> 
> 赞同：1
> 
> 时间：2012-12-05T14:40:57.387
> 
> 标签：python, math, range, modulo

我希望能够执行以下操作...

假设我想要一个 100-500 的每个数字的列表，它是 33 的倍数。

```
>>> a = 100
>>> b = 500
>>> range(a,b,33)
[100, 133, 166, 199, 232, 265, 298, 331, 364, 397, 430, 463, 496] 
```

这不是我想要的，这是因为`a`不是 33 的倍数。

要获得下一个 33 的倍数，`a`我可以这样做：

```
a = a - a % 33 + 33 
```

我想知道是否有一种更简单的方法可以做到这一点，这样如果我想在不知道实际值并且不必事先定义它们的情况下创建这个范围..

如：

```
>>> def multiple(a, b, c):
    return range(a+=%c, b, c) #if this was possible 
```

显然它会返回一个正确的范围，例如：

```
>>> multiple(100, 500, 33)
[132, 165, 198, 231, 264, 297, 330, 363, 396, 429, 462, 495] 
```

我知道我可以做一些简单的事情，比如：

```
range(a - a%c + c, b, c) 
```

但是，没有详细说明，`a`在我的情况下调用 的值对我来说是昂贵的，我希望能够找到一种不必再次调用它的方法，而且上述方法真的不好看一点也不。

我真的不确定我的问题的标题应该是什么，但我想我正在寻找的是一种在另一个给定数字之后找到一个数字的下一个倍数的方法。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:45:25.083

以下是您想要的，并且只使用`a`一次：

```
In [4]: range((a + c - 1) // c * c, b + 1, c)
Out[4]: [132, 165, 198, 231, 264, 297, 330, 363, 396, 429, 462, 495] 
```

我仍然会将它放入一个辅助函数中，从而使使用多少次的问题变得毫无意义`a`。

与您问题中的代码不同，这实际上适用于`a`可被`c`. 此外，与您问题中的代码不同，它包含`b`在范围内（根据您在评论中对我的问题的回答，它应该包含在内）：

```
In [15]: range((a + c - 1) // c * c, b + 1, c)
Out[15]: [66, 99, 132] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:54:35.120

好吧，要获得`33`每次的倍数，您需要从 a `multiple of 33`only 开始。

`33`因此，从after的第一个倍数开始`100`，因为`range`函数将继续添加`33`以获得下一个倍数。

`33`要获得number 之后的第一个倍数`num`，您可以使用：-

```
num / 33 * 33 + 33  <==>  (num / 33 + 1) * 33 
```

因此，对于您的范围，您可以使用：-

```
>>> a = 100
>>> b = 500
>>> a = (a / 33 + 1) * 33
>>> range(a, b, 33)
[132, 165, 198, 231, 264, 297, 330, 363, 396, 429, 462, 495] 
```

# php - 按顺序连续执行php脚本

> ID：13725668
> 
> 赞同：0
> 
> 时间：2012-12-05T14:41:00.117
> 
> 标签：php, linux, apache, cron

我已经开发了一个应该连续和顺序执行的脚本。现在在为这个脚本创建一个 cron 作业时，它会一直异步执行。

1）我在脚本中保留了一个while循环并考虑执行一次这个脚本所以我使用@reboot执行一次脚本但是如果apache崩溃那么这个脚本将不会自己开始执行？？

2）使用 * * * * * cron 它执行此脚本，但会创建多线程，并且所有 cron 最终都会在服务器上重叠。

即使apache服务器重新启动，我也没有想法如何连续和顺序地执行服务器脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:01:27.763

您要求：

> 一个应该连续和顺序执行的脚本

这就是守护进程的定义。您可以使用[upstart](http://upstart.ubuntu.com/)轻松地使用您的 php 代码创建守护程序。

在这里你可以找到一篇很好的文章来解释如何用 upstart 和 node.js 创建一个守护进程（但是很容易适应一个 php 脚本）： http: [//kvz.io/blog/2009/12/15/run-nodejs -as-a-service-on-ubuntu-karmic/](http://kvz.io/blog/2009/12/15/run-nodejs-as-a-service-on-ubuntu-karmic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:47:20.607

有一些想法可以处理检查脚本是否在[这个问题](https://stackoverflow.com/questions/117226/how-to-check-if-a-php-script-is-still-running)中运行，并且您可以每隔几分钟运行一次 cron 以确保其运行并在没有运行时启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:44:49.033

cron 用于定时重复作业（最小间隔：1 分钟）。它适用于最终退出并需要从头开始重新启动的脚本。听起来您的脚本本质上是在尝试成为一个守护进程 - 启动一次，然后永久运行。

而不是 cron 重复启动脚本的新副本，只需通过 init 脚本启动您的脚本一次，例如 /etc/rc.local

# asp.net - 从 SharePoint 页面中删除 aspx 扩展

> ID：13725669
> 
> 赞同：3
> 
> 时间：2012-12-05T14:41:10.100
> 
> 标签：asp.net, sharepoint

我想从 SharePoint Web 应用程序的页面中删除“.aspx”扩展名。这可以通过 IIS Web 应用程序中的 URL 重写来完成，但我找不到任何方法来实现这一点，即 SharePoint 网站页面。

例如 abcsite/pages/default.aspx 应该是 abcsite/pages/default。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:13:53.963

我对 Sharepoint 了解不多，但您可以使用[带有 ASP.NET 的 Url Routing](http://msdn.microsoft.com/en-us/library/cc668201%28v=vs.100%29.aspx)作为 IIS Rewrite Modules 的替代方案。

一个优点是表单回发到我喜欢的正确 URL（无需使用 IIS Url Rewriting 反转映射）

注意：可从 .NET 4.0 获得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:11:38.227

我不确定`sherepoint`您使用的是哪个版本。

您可以使用`IIS URL Rewrite 2.0 module`

请查看这些示例，其中包含逐步说明

[IIS7 URL 重写模块](http://blog.mastykarz.nl/friendly-urls-sharepoint-site-4-steps-iis7-url-rewrite-module/)

[带有 IIS URL 重写 2.0 的 SharePoint 2010](http://johnliu.net/blog/2010/7/23/sharepoint-2010-with-iis-url-rewrite-20.html)

[使用 ASP.NET 4.0 进行 URL 路由](http://www.codeproject.com/Articles/77199/URL-Routing-with-ASP-NET-4-0)

# android - 如何以编程方式在图像上覆盖文本

> ID：13725673
> 
> 赞同：0
> 
> 时间：2012-12-05T14:41:19.183
> 
> 标签：android

我在相对布局中放置了一个图像。如何在背景图像上放置一个小图像，并在图像旁边并排放置两个文本视图。任何帮助将不胜感激。唯一的事情是我想以编程方式执行此操作。我尝试过以下方式，但由于某种原因，textview 出现在屏幕的左上角。我希望它出现在图像按钮上。

```
LinearLayout LinearLayout = new LinearLayout(this); 
RelativeLayout relativeLayout = new RelativeLayout(this);
RelativeLayout.LayoutParams relativeLayoutParams;  

Button[] btn = new Button[1];   
btn[0] = new Button(this);
btn[0].setId(1);
btn[0].setGravity(Gravity.CENTER);
btn[0].setText("text");        
btn[0].setBackgroundResource(R.drawable.button_grey);
btn[0].setTextColor(Color.parseColor("#FFFFFF"));

relativeLayoutParams = new     RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                                       RelativeLayout.LayoutParams.WRAP_CONTENT);

relativeLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT | RelativeLayout.ALIGN_PARENT_TOP);

relativeLayoutParams.setMargins(20, 20, 15, 15);

relativeLayout.addView(btn[0], relativeLayoutParams);

ImageButton[] Imgbtn = new ImageButton[10];
Imgbtn[0] = new ImageButton(this);
Imgbtn[0].setId(2);   
Imgbtn[0].setBackgroundResource(R.drawable.box_round_corners); 
Imgbtn[0].setMaxHeight(200);
Imgbtn[0].setClickable(true);

relativeLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                                       RelativeLayout.LayoutParams.WRAP_CONTENT);

relativeLayoutParams.addRule(RelativeLayout.BELOW,btn[0].getId());
relativeLayoutParams.height = 100;    
relativeLayoutParams.setMargins(15, 0, 15, 10);
Imgbtn[0].setLayoutParams(relativeLayoutParams);

relativeLayout.addView(Imgbtn[0], relativeLayoutParams);

TextView[] txtview = new TextView[10];
txtview[0] = new TextView(this);
txtview[0].setId(3);
txtview[0].setTextColor(Color.parseColor("#000000"));
txtview[0].setText("text");  

relativeLayoutParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
                                                       RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

// relativeLayoutParams.addRule(RelativeLayout.ALIGN_LEFT | RelativeLayout.ALIGN_TOP);

```
relativeLayoutParams.addRule(RelativeLayout.BELOW,Imgbtn[0].getId());
relativeLayoutParams.height = 20;    
relativeLayoutParams.setMargins(5, 5, 5, 5);
txtview[0].setLayoutParams(relativeLayoutParams);

relativeLayout.addView(txtview[0], relativeLayoutParams);

android.widget.ScrollView ScrollV = new ScrollView(this); 
ScrollV.addView( relativeLayout, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
addContentView(ScrollV, new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:57:13.430

尝试使用 setLayoutParams() 方法设置您的视图 LayoutParams；

```
RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(width,height);
lp.topMargin=//what is your desired y coordinate
lp.leftMargin=//what is your desired x coordinate
lp.gravity=Gravity.NO_GRAVITY;
view.setLayoutParams(lp); 
```

在我看来，FrameLayout 是覆盖目的的更好选择。

# python - 描述符作为 dict 值

> ID：13725675
> 
> 赞同：0
> 
> 时间：2012-12-05T14:41:24.550
> 
> 标签：python, dictionary, descriptor

我有一个类似字典的对象，其中存储描述符：

```
 class MyDict(object):
    def __init__(self):
        dict.__init__(self)

    def __getitem__(self, key):
        v = dict.__getitem__(self, key)
        if hasattr(v, '__get__'):
           return v.__get__(None, self)
        return v

class MyDescriptor(object):
    def __init__(self, value, attrib={}):
        self.__value = value
        self.attrib= attrib

    def __get__(self, instance, owner):
        return self.__value

    def __set__(self, instance, value):
        self.__value = value 
```

我希望能够做到以下几点：

```
d = MyDict()
d['1'] = MyDescriptor("123", {"name": "val"})
print d['1']                     # prints "123"
print d['1'].attrib["name"]      # prints "val" 
```

我的课不工作。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:02:39.107

我不确定这是否能解决您的用例，但就实现您所说的结果而言，您可以简单地删除您的`MyDict`课程并使用普通的`dict`：

```
d = {} 
```

然后，向返回的类添加一个`__str__`方法，您将获得您所描述的结果。`MyDescriptor``self.__value`

```
>>> d['1'] = MyDescriptor("123", {"name": "val"})
>>> d['1']                     
123
>>> d['1'].attrib["name"] 
val 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:29:21.870

除非显示了更多内容，否则您的解决方案看起来对于解决您的问题来说是不必要的复杂。为什么不简单地这样做：

```
class MyObject(object):
    def __init__(value, attrib=None):
        self.__value = value
        self.attrib = {} if attrib is None else attrib

    def __str__(self):
        return __value

d = {}
d['1'] = MyObject("123", {"name": "val"})
print d['1']                     # prints "123"
print d['1'].attrib["name"]      # prints "val" 
```

至于为什么你的代码不起作用，有几个明显的问题。

*   从您对 的各种特殊方法的调用来看`__dict__`，这似乎`MyDict`是为了子类`dict`化，所以定义应该是：

    ```
    class MyDict(dict):
        ... 
    ```

*   虽然不是不正确，但更好的做法是使用`super`而不是直接引用基类，所以`dict.__init__(self)`会成为`super(MyDict, self).__init__()`和`dict.__getitem__(self, key)`成为`super(MyDict, dict).__getitem__(key)`。

*   您要求**sill**工作的电话，但与方法规范不符。您应该将其称为`v.__get__(self, MyDict)`. 但是，您使用它的方式实际上是`__get__`多余的，我认为这种用法是主要问题所在。

*   在课堂`MyDescriptor`上，[提前绑定](https://stackoverflow.com/questions/1651154/why-are-default-arguments-evaluated-at-definition-time-in-python)会给你带来意想不到的效果`attrib`。有关声明它的更好方法，请参见上面的示例。

我怀疑你真正想要的不是描述，而是一个看起来像字符串的对象（对于“看起来像”的某些定义），但有一个属性`attrib`。为此，无需尝试创建完全用于不同用例的描述符。我上面的示例给出了一个满足“看起来像”字符串的对象要求的类，其中“看起来像”意味着它打印一个字符串，但这是另一个可能更像你想要的：

```
class MyString(str):
    def __init__(self, value, attrib=None):
        super(MyString, self).__init__(value)
        self.attrib = {} if attrib is None else attrib 
```

# batch-file - bat 文件 - 删除特定文件和特定子文件夹以外的目录内容

> ID：13725682
> 
> 赞同：0
> 
> 时间：2012-12-05T14:41:43.347
> 
> 标签：batch-file

我有一个部署 Web 应用程序的目录“帮助”。它包含许多根级别的文件和许多子文件夹。

我想运行一个 bat 文件（从目录外部），它会删除目录中的所有内容，除了 web.config 文件和一个名为“log”的文件夹。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:58:36.127

不是直接的，但是你可以做的是将文件和文件夹复制到不同的位置，删除文件夹的全部内容，然后恢复文件和文件夹。

# javascript - 如何为 YouTube 视频添加启动画面/占位符图像

> ID：13725683
> 
> 赞同：26
> 
> 时间：2012-12-05T14:41:43.113
> 
> 标签：javascript, jquery, html, css, youtube

我有一个包含大量嵌入 YouTube 视频的网站；目前这些是同时加载的，这当然会导致网站在最初加载时运行非常缓慢。

将图像加载为占位符/启动画面而不是视频 iframe 的最佳方法是什么？

*仅在单击时才*需要将图像替换为 YouTube iframe （仅应在请求时加载），从而大大减少了网站的文件大小。我之前发现了一些类似的问题，但他们似乎建议使用 CSS 和 jQuery 来改变视频的可见性。这在这种情况下不起作用，因为视频播放器仍将在后台加载。

我感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-05T14:46:00.190

它应该很简单，尝试这样的事情：

```
<img src="placeholder.jpg" data-video="http://www.youtube.com/embed/zP_D_YKnwi0"> 
```

```
$('img').click(function(){
    var video = '<iframe src="'+ $(this).attr('data-video') +'"></iframe>';
    $(this).replaceWith(video);
}); 
```

演示：http: [//jsfiddle.net/2fAxv/1/](http://jsfiddle.net/2fAxv/1/)

对于 youtube 视频，`&autoplay=1`如果您希望它们在单击图像时播放，请添加到 URL。

# java - 将长字符串转换为整数而不使用 parseLong 或 parseInt

> ID：13725685
> 
> 赞同：1
> 
> 时间：2012-12-05T14:41:49.337
> 
> 标签：java, converter, binaryfiles, integer-overflow, bit-masks

这是情况...我有一个包含 32 位二进制字符串的二进制文件（例如 1011011100100110101010101011010 ），我想将其转换为整数...我已经尝试使用 parse-Int 来实现，但如果最重要的值是 1，我得到一个负数，我不想要那个......然后我用 parse-Long 尝试了它，没关系，但之后当我得到这个整数时，我必须将它发送到另一个类只能接收整数，因此我从 long 转换为 int 并且我再次返回一个负整数......唯一的方法是使用我发现的一段代码做相反的事情（从 int 到string ) 但我不明白如何更改-转换它。这是关于我不知道很多事情的面具。

这是代码：

```
 private static String intToBitString(int n) {
         StringBuffer sb = new StringBuffer();
         for (int mask = 1 << 31; mask != 0; mask = mask >>> 1)
             sb.append((n & mask) == 0 ? "0" : "1");
         return sb.toString();
     } 
```

先感谢您...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:47:23.967

最高位设置为 1 的整数是负整数，与位数无关。只需将标题零添加到字符串中，或​​者使用按位与 (x & 0x7FFFFFFF) 清除最高位。您只能在 java int 中存储 31 位正整数。

即使您将这样的值分配给 long（long x = 0xFFFFFFFF，将为 -1），符号位也会扩展并且现在您有负 long（但是您可以写入 0x0FFFFFFFFL 以将预期的 00000000FFFFFFFF 分配给 long）。如果这是不受欢迎的行为，您仍然需要清除高位。

```
 int a = 0x80000007; // High bit 1 - negative!
    long b = a; // Sign expands!
            // Clearing high bits (mind leading 0 and 
            // the long type suffix (L) in the hex constant:
    long c = b & 0x0FFFFFFFFL; 
    System.out.println(a + ":" + Long.toHexString(b) + ":"
            + Long.toHexString(c)); 
```

输出：-2147483641:ffffffff80000007:80000007

# c# - 有没有办法用智能感知或其他方法制作匿名类？

> ID：13725689
> 
> 赞同：0
> 
> 时间：2012-12-05T14:41:58.670
> 
> 标签：c#, asp.net-mvc, anonymous-class

在我的项目中，我经常使用视图模型（仅用于将数据传输到视图的简单类），例如 ProductAdditionnalInformationForCustomFees 类，它们仅用于呈现数据并在项目中使用过几次。

但是，实际上我有很多这些，我认为这不是处理控制器和视图之间数据传输的最佳方式。

我可以使用匿名类，但我会失去智能感知的属性，这些属性大大缩短了开发时间和寻找错误。

有没有办法制作类似匿名类但使用智能感知的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:44:43.073

匿名类被标记`Internal`。这使得您的视图和控制器之间难以共享。有一些解决方法，但坚持使用强类型类。

一种可能且有趣的解决方法，但您不会得到智能感知： [Razor 中的动态匿名类型会导致 RuntimeBinderException](https://stackoverflow.com/questions/5120317/)

# javascript - 在我点击链接之前，背景是半黑的

> ID：13725691
> 
> 赞同：1
> 
> 时间：2012-12-05T14:42:01.650
> 
> 标签：javascript, iframe

在我的网站上，我们正在跟踪一艘船 (http://marineops.mlml.calstate.edu/ptsur1)，现在这艘船离港口越来越远，出现黑色背景。我知道修复它的唯一方法是单击描述船舶的弹出窗口中的链接（链接是“显示船舶的航迹距离......”。之后，我无法删除弹出窗口。

这是一个 drupal 6 站点，创建地图的代码是（我从[http://marinetraffic.com/ais/addyourarea.aspx?level1=150](http://marinetraffic.com/ais/addyourarea.aspx?level1=150)在“在您的网站中放置您所在地区的实时地图”下获得此代码）：

**如果背景为黑色，请单击“显示船只的航迹距离...”**

```
<script type="text/javascript">
        width='100%';           //the width of the embedded map in pixels or percentage
        height=400;             //the height of the embedded map in pixels or percentage
        border=1;               //the width of border around the map. Zero means no border
        notation=false;         //true or false to display or not the vessel icons and options at the left
        shownames=true;         //true or false to dispaly ship names on the map
        latitude=36.676;        //the latitude of the center of the map in decimal degrees
        longitude=-124.405;     //the longitude of the center of the map in decimal degrees
        zoom=12;                //the zoom level of the map. Use values between 2 and 17
        maptype=2;              //use 0 for Normal map, 1 for Satellite, 2 for Hybrid, 3 for Terrain
        trackvessel=366974890;  //the MMSI of the vessel to track, if within the range of the system
        fleet='';               //the registered email address of a user-defined fleet to display
        remember=false;         //true or false to remember or not the last position of the map
</script>
<script type="text/javascript" src="http://www.marinetraffic.com/ais/embed.js"></script> 
```

请访问网站 [http://marineops.mlml.calstate.edu](http://marineops.mlml.calstate.edu) 并提供任何建议。谢谢

# android - Android：对齐微调器文本

> ID：13725692
> 
> 赞同：1
> 
> 时间：2012-12-05T14:42:05.983
> 
> 标签：android

我正在尝试将微调器文本向左对齐，但重力和 textAlingment 属性对此无济于事。如何将文本放在 center_vertical|right 上？

那是我的微调器：

```
 <Spinner
            android:id="@+id/sPaymentFreq"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:entries="@array/payment_freq"
            android:gravity="center_vertical|right"
            android:prompt="@string/choose_payment_freq" /> 
```

还是没有办法只玩属性？我刚刚读到有些人实现了制作自定义微调器的结果，但我只需要这么小的变化。

# perl - 如何在 Perl 中使用 Amazon::S3 上传二进制文件？

> ID：13725693
> 
> 赞同：2
> 
> 时间：2012-12-05T14:42:08.167
> 
> 标签：perl, amazon-s3

我找不到任何关于如何使用 Perl 中的 Amazon::S3 库将二进制文件上传到 Amazon S3 的示例。所有示例都被复制/粘贴，只是进行文本/纯文本上传，就好像所有内容都只是纯文本一样。

[这是来自http://metacpan.org/pod/Amazon::S3](http://metacpan.org/pod/Amazon%3a%3aS3)的示例：

```
my $keyname = 'testing.txt';
my $value   = 'T';
$bucket->add_key(
    $keyname, $value,
    {   content_type        => 'text/plain',
        'x-amz-meta-colour' => 'orange',
    }
); 
```

这会在 Amazon S3 中创建一个纯文本文件“testing.txt”，内容为“T”。而网上所有的例子都只是复制这个例子，修改值“T”。我找不到上传二进制数据的单个示例。

如何将包含二进制内容的图像/jpeg 上传到 Amazon S3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-03T19:09:38.510

这个 perl 将一个 jpeg 文件上传到 S3，将其放在减少冗余存储中，将其公开，并设置其 mime 类型，以便它在 Web 浏览器中正确显示。请查看上传结果：[https ://s3.amazonaws.com/AppaApps/z/p.jpg](https://s3.amazonaws.com/AppaApps/z/p.jpg)

```
 use warnings FATAL => qw(all);
    use strict;
    use Data::Dump qw(dump);
    use Amazon::S3;

    #----------------------------------------------------------------------
    # Constants
    #----------------------------------------------------------------------

    my $s3 = Amazon::S3->new
     ({aws_access_key_id     => "...",
       aws_secret_access_key => "...",
       retry                 => 1
      }
     );

    my $b = $s3->bucket("AppaApps");   # Our bucket
    my $f = "z/p.jpg";                 # A specific file (key) on S3
    my $F = "p.jpg";                   # Local file to upload

    #----------------------------------------------------------------------
    # Upload a file
    #----------------------------------------------------------------------

    $b->add_key_filename($f, "p.jpg", 
     {"x-amz-storage-class"=>"REDUCED_REDUNDANCY", 'x-amz-meta-version'=>'12.11.22', acl_short=>'public-read',
      "Content-Type"=>"image/jpeg", 
     });
    print dump($b->errstr), "\n" if $b->errstr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T19:58:24.623

当然，这需要安装第 3 方软件，但作为一种解决方法，我在我的 perl 脚本中使用 s3cmd 和系统调用将任意数据上传到我的存储桶。

s3cmd 可以在这里找到：[http](http://s3tools.org/s3cmd) ://s3tools.org/s3cmd ，一旦你的密钥和权限设置好了，就像在 perl 脚本中调用以下命令一样简单。（**非常感谢 Michal Ludvig 使这个工具易于使用和免费。）

```
`s3cmd put YOUR_FILE s3://YOUR_BUCKET/`; 
```

这是一个 hack，但如果你愿意尝试一个不优雅但务实的解决方案，这就是我所做的。

# jquery - 视频结束时，youtube api 不会触发 ENDED 事件（使用 iframe）

> ID：13725695
> 
> 赞同：1
> 
> 时间：2012-12-05T14:42:14.410
> 
> 标签：jquery, html, youtube-api

我试图捕捉一个事件，以便当 youtube 播放器结束时，我可以重定向到另一个网页。但它不起作用。任何人都可以发现任何问题吗？javascript 似乎确实可以编译。

这是整个页面的代码（我实际上是从下面浏览器的查看源页面粘贴的。
它相当简单，事件列在 onYouTubePlayerAPIReady() 函数中，我假设它应该在代码结束时触发。我'我已经输入了“警报”以查看是否有。看起来它没有：

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">  
        $(document).ready(function () {
            var tag = document.createElement('script');
            tag.src = "http://www.youtube.com/player_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        })

          // 3\. This function creates an <iframe> (and YouTube player)
     //    after the API code downloads.
     function onYouTubePlayerAPIReady() {
         player = new YT.Player('iframeid', {
             events: {   
                 'onReady': onPlayerReady,          
                 'onStateChange': onPlayerStateChange
             }
         });
     }

     function onPlayerReady(event) {

     }
     function onPlayerStateChange(event) {

         if (event.data == YT.PlayerState.ENDED) {
             alert("video is over");
             location.href= 'k_Origins.aspx';
         }
         else if (event.data == YT.PlayerState.PAUSED) {

         }
         else if (event.data == YT.PlayerState.PLAYING) {

         }
         else if (event.data == YT.PlayerState.BUFFERING) {

         }
         else if (event.data == YT.PlayerState.CUED) {

         }
         else {

         }

     }

</script>

</head>
<body>
    <form method="post" action="dostuff.aspx" id="form1">

<div id="ContainPlayer">

    <iframe id="iframeid" width="420" height="315"
    src="http://www.youtube.com/embed/8X0ZkN_EtTE?hl=en&fs=1&autoplay=1&autohide=0&enablejsapi=1&modestbranding=1&playerapiid=ourvideoid&rel=0" 
    frameborder="0" ></iframe>
    </div>

    </div>

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:25:43.890

您在上面粘贴的内容中有错字；您在该行之前遗漏了一个开始标签：

```
$(document).ready(function () { 
```

所以javascript永远不会被浏览器解释。当我把你的代码添加进去时，它就像你想要的那样运行。

# opencv - 如何裁剪图像的 roi

> ID：13725696
> 
> 赞同：2
> 
> 时间：2012-12-05T14:42:23.670
> 
> 标签：opencv, crop, roi

在我的项目中，我想裁剪图像的 ROI。为此，我创建了一个包含感兴趣区域的地图。现在我想裁剪具有最重要像素的区域（黑色不重要，白色很重要）。

有人知道如何实现它吗？我认为这是一个最大化问题下图中的红色边框是我想如何裁剪此图像的示例 ![图片](../Images/836e443137a592960b4d334c5769c55f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T07:58:03.313

如果我正确理解了您的问题，那么您已经计算了图像中每个点的值。这些值表明每个点的“重要性”/“趣味性”/“显着性”。包含这些值的矩阵/图像是您所指的“地图”。您的目标是获得具有高“重要性”分数的感兴趣区域 (ROI) 的边界框。

我认为您可以分割 ROI 的方法是应用基于 Graph Cut 的分割，使用重要性图在每个像素处计算“分数”。分割的结果是一个二进制掩码，它掩盖了“重要”像素。接下来，在这个二进制掩码上运行 OpenCV 的[findcontours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontour#void%20findContours%28InputOutputArray%20image,%20OutputArrayOfArrays%20contours,%20OutputArray%20hierarchy,%20int%20mode,%20int%20method,%20Point%20offset%29)函数以获取各个连接的组件。然后在 findContours(...) 返回的轮廓上使用 OpenCV 的[boundingRect函数来获取边界框。](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=boundingrect#Rect%20boundingRect%28InputArray%20points%29)

以这种方式使用基于 Graph Cut 的分割算法的好处在于，它将连接碎片化的组件，即即使您的“重要性”图嘈杂，生成的二进制掩码也不会有小洞。

在 OpenCV 中已经实现的一种基于 Graph Cut 的分割算法是 GrabCut 算法。一个快速的技巧是将它应用到你的“重要性”地图上，以获得我上面提到的二进制掩码。一种更复杂的方法是使用您的“重要性”图构建前景和背景（可能是颜色？）模型并将其作为输入传递给函数。有关 OpenCV 中 GrabCut 的更多详细信息，请参见：[http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=grabcut#void grabCut(InputArray img, InputOutputArray mask, Rect rect, InputOutputArray bgdModel, InputOutputArray fgdModel, int iterCount, int mode)](http://docs.opencv.org/modules/imgproc/doc/miscellaneous_transformations.html?highlight=grabcut#void%20grabCut%28InputArray%20img,%20InputOutputArray%20mask,%20Rect%20rect,%20InputOutputArray%20bgdModel,%20InputOutputArray%20fgdModel,%20int%20iterCount,%20int%20mode%29)

如果您想要更大的灵活性，您可以使用以下 MRF 库破解您自己的基于图形的分割算法。该库允许您在计算图割时指定自定义目标函数：http: [//vision.middlebury.edu/MRF/code/](http://vision.middlebury.edu/MRF/code/)

要使用 MRF 库，您需要在图像中的每个点指定“成本”，指示该点是“前景”还是“背景”。您也可以将这种二分法视为“重要”或“不重要”，而不是“前景”与“背景”。MRF 库的目标是在每个点返回一个标签，以便分配这些标签的总成本尽可能小。因此，游戏是想出一个函数来计算你认为重要的点的小成本，否则大。

具体来说，每个点的成本由两部分组成：1）数据项/函数和 2）平滑项/函数。如前所述，每个点的数据项越小，该点被选中的可能性就越大。如果您的“重要性”分数 s_ij 在 [0, 1] 范围内，那么计算数据项的常用方法是 -log(s_ij)。

平滑项是一种建议 2 个相邻像素 p、q 是否应该具有相同标签的方法，即“前景”、“背景”或一个“前景”和另一个“背景”。与数据成本类似，您必须构建它，使得具有相似“重要性”分数的相邻像素的成本很小，以便为它们分配相同的标签。该术语负责“平滑”生成的蒙版，这样您就不会在“重要性”高的区域内散布低“重要性”的像素，反之亦然。如果有这样的区域，上面提到的 OpenCV 的 findContours(...) 函数将返回这些区域的轮廓，也许可以通过检查它们的大小来过滤掉它们。

有关计算成本的函数的详细信息，请参阅 GrabCut 论文：[GrabCut](http://www.google.com.sg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCcQFjAB&url=http://research.microsoft.com/pubs/67890/paper_siggraph04.pdf&ei=zErAUP3qKY3OrQfO-YGQDQ&usg=AFQjCNGYrPEjrR-yGbBv7Tn1qPyZuxqDZg)

这篇博客文章提供了更多关于在 OpenCV 中创建自己的图形分割算法的详细信息（和代码）：[http ://www.morethantechnical.com/2010/05/05/bust-out-your-own-graphcut-based-图像分割-with-opencv-w-code/](http://www.morethantechnical.com/2010/05/05/bust-out-your-own-graphcut-based-image-segmentation-with-opencv-w-code/)

另一篇论文展示了如何在 GrabCut 论文中使用更好的符号和没有复杂的图像抠图部分（未在 OpenCV 版本中实现）对灰度图像（您的情况）执行图形切割分割，这是：[Graph Cuts and Efficient ND Image Segmentation](http://www.google.com.sg/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDAQFjAB&url=http://lvelho.impa.br/ip12/reading/ijcv06.pdf&ei=P2zAUN2-NcfJrAeAkYCAAQ&usg=AFQjCNHBXkpQ-nurYgs2OitQS3naWbLgrw)

希望这可以帮助。

# kinect - 虚拟更衣室的增强现实项目

> ID：13725699
> 
> 赞同：-3
> 
> 时间：2012-12-05T14:42:25.967
> 
> 标签：kinect, augmented-reality

我正在做一个关于增强现实的项目，最终目标是实现一个虚拟更衣室。我也希望使用 Kinect 设备来获取身体的运动并将衣服映射到身体上。问题是我不知道如何开始，对 Kinect api 一无所知。你们能帮我用 Kinect 设备弄湿 AR 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:34:28.540

从 Kinect for Windows 网站，下载 Kinect for Windows Developer Toolkit：

[http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)

这包括允许您开始使用 API 的代码示例。有一些应用程序将向您介绍每个相机，如何管理骨架以及如何产生某些效果。一旦您了解了如何使用这些元素，您就可以进入工具包中的一些更复杂的示例——“绿屏”示例应该可以帮助您了解将元素隐藏到视频中的一些基础知识。

之前也展示了虚拟更衣室的概念。看看 YouTube 上的示例视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:36:37.233

你的问题太笼统了。对于未来应该是相当具体的。但是，我建议您开始阅读有关增强现实的参考文档：增强现实[调查](http://nzdis.otago.ac.nz/projects/projects/berlin/repository/revisions/22/raw/trunk/Master%27s%20Docs/Papers/A%20Survey%20of%20Augmented%20Reality.pdf "增强现实调查")

您可能还想查看此搜索的文档：[http ://scholar.google.com/scholar?hl=en&q=augmented+reality&btnG=&as_sdt=1%2C5&as_sdtp=](http://scholar.google.com/scholar?hl=en&q=augmented+reality&btnG=&as_sdt=1%2C5&as_sdtp=)

然后，您应该先阅读自己的 Kinect 教程。[http://www.microsoft.com/en-us/kinectforwindows/Develop/Learn.aspx](http://www.microsoft.com/en-us/kinectforwindows/Develop/Learn.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:42:11.997

Kinect Development 上有很多可用的资源。首先，您需要决定，您正在为**Kinect for XBox**或**Kinect for Windows**开发什么。 *（这里我假设你的目标是 Windows）*

访问Kinect 开发人员的[**官方网站**](http://www.microsoft.com/en-us/kinectforwindows/develop/)，在这里您会找到一切 - 文档、SDK 和大量示例以帮助您入门。

分两步搭建开发环境：

1.  安装**Kinect for Windows SDK**。（下载包括 API 和设备接口。）[下载](http://www.microsoft.com/en-us/kinectforwindows/Develop/Developer-Downloads.aspx)
2.  下载并安装**Kinect for Windows Developer Toolkit**。[下载](http://www.microsoft.com/en-us/kinectforwindows/Develop/Developer-Downloads.aspx)

Channel9 有一个[Kinect 快速入门系列](http://channel9.msdn.com/Series/KinectQuickstart)，您可以关注这些视频，它们将向您展示您需要了解的有关 Kinect 的所有信息，从设置开发环境到使用 Kinect 的高级跟踪功能。

**有用的链接：**

*   [安装 SDK 和 Toolkit 的分步说明](http://msdn.microsoft.com/en-us/library/hh855354.aspx)。

*   [快速入门幻灯片和示例](http://files.ch9.ms/coding4fun/KinectforWindowsSDKV1.zip)。

*   [Kinect 的推荐硬件配置](http://msdn.microsoft.com/en-us/library/jj131032.aspx#ID4EVC)。

*   一篇博客文章[开始使用 Kinect 进行开发，](http://msdn.microsoft.com/en-us/magazine/jj159883.aspx)以熟悉如何使用 Kinect 的**骨架跟踪功能**。

# google-chrome - 如何在chrome中强制缓存

> ID：13725702
> 
> 赞同：9
> 
> 时间：2012-12-05T14:42:41.033
> 
> 标签：google-chrome, caching, header

如何强制缓存页面、脚本、图像（资源），包括动态生成的内容（php、asp 等）的结果，我无法控制相关网站，我知道如果我缓存动态页面它变成静态的，这对我来说很好，，

但是...我不想缓存所有内容...页面加载 default.asp,,,以及 .js 脚本的基调,,, 反过来调用返回一些 XML 的 API,,

我想缓存 default.asp 和所有 .js 但不是 xml 文件。

我正在使用 chrome 和 chrome 会积极缓存它可以缓存的内容，但该站点的所有内容都有一个 max-age=0 标头。

那么从chrome我如何覆盖单个资源的标题？

# python - 抓取 PyQt Python ui 文件中的所有 QPushButton

> ID：13725704
> 
> 赞同：2
> 
> 时间：2012-12-05T14:42:45.963
> 
> 标签：python, pyqt, loops, qpushbutton

我使用带有大量 QPushButtons 的 Qt Designer 创建了一个 UI 文件，然后我使用 pyuic4 将其转换为 python 文件。

我想将所有 QPushButtons 添加到 QButtonGroup。

如何迭代或获取我的所有 QPushButtons 以从我的 UI Python 文件添加到 QButtonGroup？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T19:12:36.040

在 Qt Designer 中，将所有按钮放在容器小部件中。

然后，您可以使用[findChildren](https://qt-project.org/doc/qt-4.8/qobject.html#findChildren)遍历所有子按钮。因此，如果`self.buttonBox`是您的容器小部件，那么您可以执行以下操作：

```
self.buttonGroup = QtGui.QButtonGroup(self)
for button in self.buttonBox.findChildren(QtGui.QAbstractButton):
    self.buttonGroup.addButton(button) 
```

# asp.net - 卫星程序集，ASP.NET 语言不变

> ID：13725712
> 
> 赞同：5
> 
> 时间：2012-12-05T14:43:11.323
> 
> 标签：asp.net, asp.net-mvc, localization, satellite-assembly

我正在将一个项目转换为使用卫星程序集。我创建了一个新的类库（名为“资源”）。所有默认资源都位于根级别`*.resx`。然后每种文化都有一个文件夹。

"en/" 与 `*.en.resx`

en-GB/ 与`*.en-GB.resx`

我将 .resx 文件更改`Access Modifier`为“公共”并更改了这些设置。

```
BuildAction: EmbeddedResource
CopyToOutputDirectory: CopyAlways 
```

我确保`.resx`设计师`*.Designer.cs`使用“资源”命名空间。

我将类库添加到 ASP.NET MVC 应用程序中，并`global.asax.cs`根据需要设置文化。

```
System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-GB");
System.Threading.Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture("en-GB"); 
```

我尝试将`al.exe`and`Resgen.exe`命令添加到 Resources 类库中的构建后事件。

> "C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin\Resgen.exe" en-GB/MyResourceFile.en-GB.resx "C:\Program Files\Microsoft SDKs\Windows\v7.1\Bin \al.exe" /t:lib /embed:en-GB/MyResourceFile.en-GB.resources /culture:en-gb /out:Resources.resources.dll

查看 MVC 应用程序`bin/`文件夹，每种语言都有 3 个文件的文件夹：

> MyResources.en-GB.Designer.cs、MyResources.en-GB.resx、Resources.resources.dll

根级别只有`Resources.dll`，`Resources.resources.dll`但默认语言工作正常。第二个`*.resources.dll`是由于构建后事件。

当我更改 CurrentUICulture 时，它​​不会更改 UI 语言。在将资源移出`App_GlobalResources/`外部程序集之前，它运行良好（Razor 示例）。

```
@Resources.MyResources.StringIdentifier 
```

使用 .NET Reflector查看资源`.dlls`是这些差异。

```
Satellite Resources: (Project: Resources)
Resources.en_GB.MyResources.en-GB.resources 
App_GlobalResources: (Project MVCApp)
Namespace.MVCApp.App_GlobalResources.MyResources.en-GB.resources 
```

编辑：

在中设置 CurrentCulture 和 UICulture 后`global.asax.cs`，我测试了手动检索`ResourceManager`实际工作的 a 并以预期语言检索字符串。

```
 System.Resources.ResourceManager gStrings =
                new System.Resources.ResourceManager("Resources.MyResources", System.Reflection.Assembly.Load("Resources")); // Resources=Project Name
            string test = gStrings.GetString("TestString"); // WORKS IN GLOBAL.ASAX.CS!!! 
```

我在 MVC 控制器中尝试了相同的测试，但它不起作用。因此，可以检索 ResourceManager 的唯一位置是 Global.asax.cs。

奇怪的是，razor 中 UI 级别的相同测试只会返回默认的文化文本！CultureInfo 是正确的，但 ResourceManager 仅返回 ASP.NET MVC Razor UI 中的默认语言。（这只是为了测试）

```
 @{  
        System.Globalization.CultureInfo ci = System.Threading.Thread.CurrentThread.CurrentUICulture;
        System.Resources.ResourceManager gStrings =
            new System.Resources.ResourceManager("Resources.MyResource", System.Reflection.Assembly.Load("Resources"));
        string s = gStrings.GetString("Test");    // DOESN'T WORK IN UI
    } 
```

**TLDR 版本：**

从 App_GlobalResources 的资源 (.resx) 转换为附属程序集。

**手头的问题。**

我可以使用 CurrentUICulture 语言手动调用卫星程序集的 ResourceManager`global.asax`并且它按预期工作，但是相同的测试在 UI 端失败并且在 MVC 控制器中失败。

默认语言可以正常使用，那为什么 UI 不切换语言呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T06:13:14.787

如果最近建立了一个项目，其中内部化或多或少地像您描述的那样正常工作。

[https://github.com/Jacco/Perpetuality](https://github.com/Jacco/Perpetuality)

我在用作基础的控制器中的 OnAuthorize 中切换每个 HTTP 请求的语言：

```
using Perpetuality.Data;
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Security.Principal;
using System.Threading;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;

namespace Perpetuality.Controllers
{
    public partial class BaseController : Controller
    {
        private CultureInfo GetCultureInfo(AuthorizationContext filterContext)
        {
            switch ((string)filterContext.RouteData.Values["language"])
            {
                case "nl":
                    return CultureInfo.CreateSpecificCulture("nl-NL");
                case "en":
                    return CultureInfo.CreateSpecificCulture("en-US");
                case "pt":
                    return CultureInfo.CreateSpecificCulture("pt-PT");
                case "de":
                    return CultureInfo.CreateSpecificCulture("de-DE");
                case "es":
                    return CultureInfo.CreateSpecificCulture("es-ES");
                case "fr":
                    return CultureInfo.CreateSpecificCulture("fr-FR");
                case "it":
                    return CultureInfo.CreateSpecificCulture("it-IT");
                case "jp":
                    return CultureInfo.CreateSpecificCulture("ja-JP");
                default:
                    return CultureInfo.CreateSpecificCulture("en-US");
            }
        }

        protected override void OnAuthorization(AuthorizationContext filterContext)
        {
            Thread.CurrentThread.CurrentCulture = GetCultureInfo(filterContext);
            Thread.CurrentThread.CurrentUICulture = GetCultureInfo(filterContext);

            base.OnAuthorization(filterContext);
        }
    }
} 
```

在我的项目中，RESX 文件的指定方式与您的不同：

```
BuildAction: EmbeddedResource
CopyToOutputDirectory: DoNotCopy 
```

在我的观点中，我访问这样的字符串：

```
@Resources.Home.Index.FacebookButtonCaption 
```

我没有设置任何帖子或预构建。

在我的项目中，语言总是在 url 上。如果最初没有选择合适的语言，用户可以切换语言。

# jquery - 在 jqGrid 单元格编辑器上触发单击事件

> ID：13725714
> 
> 赞同：0
> 
> 时间：2012-12-05T14:43:18.540
> 
> 标签：jquery, jqgrid

我有一个启用了单元格编辑的 jqGrid。

我还有一个针对所有元素的委托`click`事件。`<input>`这意味着当用户单击`<input>`屏幕键盘时，会显示一个屏幕键盘，以便他们可以编辑值（此解决方案适用于触摸屏）。

当用户单击单元格开始编辑时，将显示单元格编辑器。但是，用户必须直接单击单元格编辑器来触发`click`事件并显示屏幕键盘（实际上必须“双击”来编辑值）。

**我想要一种能够`click`在编辑开始后立即触发单元格编辑器事件的方法。**

我尝试了以下方法，但它不起作用：

```
$('#myGrid').jqGrid({
    // ...
    afterEditCell: function() {
        $(document.activeElement).trigger('click');
    }
}); 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:31:04.463

我设法通过执行以下操作来实现这一目标。

首先，我设置以下内容：

```
$('#myGrid').jqGrid({
    //....
    cmTemplate: { editoptions: {class: 'jqg-editor'} }
    //....
}); 
```

这确保了 jqGrid 创建的单元格编辑器自动`jqg-editor`应用了 CSS 类。所以我们可以使用委托的“聚焦”事件来定位它，如下所示：

```
$(document).on('focus.jqg', '.jqg-editor', function() {
    $(this).trigger('click');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-08T20:31:37.590

伙计们！我确实喜欢@FixMaker 的想法，谢谢！我在下面展示了我所做的。

```
 $(document).ready(function () {

        $(document).on('click', '#grupo_pesquisadores input', function() {
             $(this).trigger('click');

             if ($(this).attr("class") == 'fileIndividual') {
                  if ( $(this).is(":checked") ) {
                            $("#grupo_pesquisadores").find(".fileShared").prop("checked", false);
                  }
             }
             if ($(this).attr("class") == 'fileShared') {
                  if ( $(this).is(":checked") ) {
                            $("#grupo_pesquisadores").find(".fileIndividual").prop("checked", false);
                  }
             }
        });

   }); //document.ready end 
```

我用它来控制我拥有的一些复选框。当我点击“fileIndividual”复选框时，它会取消选中所有选中的“fileShared”复选框，如果我点击任何“fileShared”复选框，它会取消选中“fileIndividual”复选框。

# c# - 获取 Windows 窗体中 TableLayoutPanel 单元格的高度和宽度

> ID：13725721
> 
> 赞同：18
> 
> 时间：2012-12-05T14:43:42.323
> 
> 标签：c#, .net, winforms, cell, tablelayoutpanel

在 Windows 窗体中使用 TableLayoutPanel。我使用 RowStyles 和 ColumnStyles SizeType 分别作为 AutoSize 和 Percent。我需要找出放置特定控件的单元格的绝对高度和宽度。

```
TableLayoutPanelCellPosition pos = tableLayoutPanel1.GetCellPosition(button1);
int height = (int)tableLayoutPanel1.RowStyles[pos.Row].Height;
int width = (int)tableLayoutPanel1.ColumnStyles[pos.Column].Width; 
```

上面，我得到的高度为 0。RowStyle 与 SizeType 作为 AutoSize。同样，我得到 33.33。ColumnStyle 设置为 SizeType 为 Percent，Size = 33.33。

我需要以像素为单位获取单元格的绝对大小。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-05T15:06:38.730

出于某种奇怪的原因，微软决定对智能感知隐藏这些功能。

这应该像写的那样工作：

```
 TableLayoutPanelCellPosition pos = tableLayoutPanel1.GetCellPosition(button1);
  int width = tableLayoutPanel1.GetColumnWidths()[pos.Column];
  int height = tableLayoutPanel1.GetRowHeights()[pos.Row]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-08-23T19:55:08.780

Microsoft 选择从 Intellisense 隐藏 GetColumnsWidths() 方法（使用属性 EditorBrowsableState.Never）可能是因为他们从未真正完成 GetColumnsWidths() 方法的实现。*只要*TableLayoutPanel 中没有 ColumnSpan 值大于 1 的控件，GetColumnsWidths() 方法就会返回一个数组。一旦该条件存在，您就不走运了，TableLayoutPanel 的 GetColumnsWidths() 方法将返回一个空数组反而。

另一种方法是使用 TableLayoutPanel 的 ColumnStyles 和 RowStyles 集合——当列/行 SizeType 为 Absolute 时，它​​们分别返回每列/行的宽度/高度。为百分比时，返回值为百分比值；当它是 AutoSize 时，返回值显示为 0。您可以通过获取 TableLayoutPanel 的总宽度并减去任何绝对列的总宽度然后将百分比计算应用于剩余像素（如果没有），将百分比值映射到像素测量值使用 AutoSize 列（同样适用于行）。

# python - Python：使用'with open'打开多个文件

> ID：13725722
> 
> 赞同：2
> 
> 时间：2012-12-05T14:43:42.160
> 
> 标签：python, syntax-error, with-statement

> **可能重复：**
> [Python：使用“with open”打开多个文件？](https://stackoverflow.com/questions/4617034/python-open-multiple-files-using-with-open)
> [是否，使用 open() 不适用于 python 2.6](https://stackoverflow.com/questions/12138298/does-with-open-not-works-with-python-2-6)

我已经看到其他答案来帮助我解决这个问题。但我似乎根本无法获得提供的任​​何解决方案！这是我的部分代码：

```
with open('Levels.dat', 'w') as l, open('Names.dat', 'w') as n: 
```

我收到了这个错误：

```
 with open('Levels.dat', 'w') as l, open('Names.dat', 'w') as n:  
                                     ^
SyntaxError: invalid syntax 
```

我该如何解决？

# linux - xterm中vim中的功能键

> ID：13725723
> 
> 赞同：0
> 
> 时间：2012-12-05T14:43:46.500
> 
> 标签：linux, vim, terminal, xterm

**控制台中 vim 的**功能键 (F1-F12)不起作用。但最糟糕的是，当我按下这样的键时，vim 停留在某种“模式”，不允许我在 2 秒内输入任何内容......非常烦人

另一件事是在进入正常模式之前按下 Esc 键 vim 暂停大约 0.5 秒。但这仅发生在**screen**，即使我设置

```
export TERM=xterm 
```

有人有一些干净而简短的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:06:02.613

听起来 vim 认为终端要发送的字节序列和它实际发送的序列之间存在一些分歧。

此外，半秒延迟是一些以 Escape 开头的映射的结果。

# c# - 清单工厂

> ID：13725726
> 
> 赞同：0
> 
> 时间：2012-12-05T14:43:51.253
> 
> 标签：c#, list, factory

如果这看起来很像我几周前提出的类似问题，我深表歉意；我在学习。

我有一个函数应该返回一个对象列表——有点像工厂。在下面的示例中，我有两个类 Truck 和 Car，它们都继承自超类 Vehicle。该功能不起作用，但它应该显示我想要完成的事情。

编辑：忘了说它是如何不起作用的。好吧，该函数创建了一个列表，例如卡车，但不能返回它，因为返回值必须是*车辆*列表。我不知道如何转换创建的列表，或者即使它*可以*转换。

显然，我主要是在寻求建议如何让这该死的东西发挥作用！但我也很感激任何关于如何让它更具可扩展性的想法——为每个可能的 Vehicle 类都有一个“案例”声明并不会让我高兴。

v.Populate 函数只是用来用来自 DataReader 的数据填充对象。应该不会影响手头的问题。

调用该函数，在这种情况下，我想要一个带有卡车对象的列表： **return PopulateList("Truck", gc);**

```
private List<Vehicle> PopulateList(String type, GenericConnection gc)
{
    Vehicle v;
    var ret = new List<Vehicle>();
    var r = gc.ExecuteReader();
    while (r.Read())
    {
        switch (type)
        {
            case "Truck":
                v = new Truck();
                break;
            case "Car":
                v = new Car();
                break;
            default:
                throw new ArgumentException("Unknown Vehicle: " + type, "type");
        }
        v.Populate(r);
        ret.Add(v);
    }
    r.Close();
    return ret;
} 
```

为清楚起见，这里是相同函数的副本，但现在所有非必要代码（主要与 DataReader 相关）都被删除了。返回值应该是一个列表，其中只有一个空对象。

```
private List<Vehicle> PopulateList(String type)
{
    Vehicle v;
    var ret = new List<Vehicle>();
    switch (type)
    {
        case "Truck":
            v = new Truck();
        case "Car":
            v = new Car();
        }
    }
    ret.Add(v);
    return ret;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:49:12.320

为什么不使用泛型：

```
public interface IPopulate {
   void Populate( DbDataReader dataReader );
}

....
private List<T> PopulateList<T>( GenericConnection gc )
    where T : IPopulate, new()
{
    T v;
    var ret = new List<T>();
    var r = gc.ExecuteReader();
    while (r.Read())
    {
        v = new T();
        v.Populate(r);
        ret.Add(v);
    }
    r.Close();
    return ret;
} 
```

你会这样称呼它

```
PopulateList<Truck>( connection );
PopulateList<Car>( connection ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:54:18.023

您可以创建通用方法：

```
private List<Vehicle> PopulateList<T>() where T: Vehicle
    {
        Vehicle v = new T();
        var ret = new List<Vehicle>();
        // main logic
        ret.Add(v);
        return ret;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:00:30.170

创建一个泛型方法：

```
public T CreateInstance<T>() where T : Vehicle, new()
{
    var obj = new T();
    return obj;
} 
```

用法：

```
var truck = CreateInstance<Truck>();
var car = CreateInstance<Car>(); 
```

# php - 未从 Microsoft Excel (PHPExcel) 打开超链接

> ID：13725727
> 
> 赞同：0
> 
> 时间：2012-12-05T14:43:50.860
> 
> 标签：php, linux, phpexcel

我正在使用以下代码在 excel 中生成超链接

```
$objPHPExcel->getActiveSheet()->getCell($column_index . $row_index)->getHyperlink()->setUrl( 'http://www.c4online.me/c4v2/index.php?q=file'); 
```

在 ubuntu 上使用“LibreOffice Calc”打开文件并在 Mac 上使用“Numbers”打开文件时，该链接将打开。但是当谈到 Microsoft Excel 2007 和 2010 时，我收到以下警告：

```
The internet site reports that the item you requested could not be found ( HTTp/1.0 404) 
```

你能告诉我我什么时候出错了吗？

# jquery - 使用 css/jquery 的多个内联下拉菜单

> ID：13725728
> 
> 赞同：1
> 
> 时间：2012-12-05T14:43:58.507
> 
> 标签：jquery, css, drop-down-menu, menu, inline-editing

我使用在[这个问题](https://stackoverflow.com/questions/8192143/any-ideas-how-to-replicate-this-inline-dropdown-menu-using-css-jquery)中找到的代码来帮助我在页面上显示内联下拉菜单。不过，我需要将其中四个放在一个页面上，而且它们都将使用相同的教学策略列表。我已经尝试了我能想到的一切，例如为第二个菜单重命名所有元素，但没有运气。

我知道这可能很容易而且很明显，但我不明白。我可能正在改变我不应该改变的事情。我对 javascript 和 jquery 很陌生（尽管多年来一直在使用 HTML、CSS 和一点 PHP），虽然我通常可以很好地掌握一些东西，但像这样的简单事情让我陷入了困境。

这是我此时的代码：http: [//jsfiddle.net/8npjQ/](http://jsfiddle.net/8npjQ/)

```
<script type='text/javascript' src='http://code.jquery.com/jquery-1.6.4.js'></script>
<div id="somecontent"><span id="sort" href="#">Click for Strategies</span></div>
<div id="pop">
<div class="link" data-sort="dq1-1" >DQ1-1: Providing Clear Learning Goals and Scales (Rubrics)</div>
<div class="link" data-sort="dq1-2">DQ1-2: Tracking Student Progress</div>
<div class="link" data-sort="dq1-3">DQ1-3: Celebrating Success</div>
<div class="link" data-sort="dq6-4">DQ6-4: Establishing Classroom Routines</div>
<div class="link" data-sort="dq6-5">DQ6-5: Organizing the Physical Layout of the Classroom</div>
<div class="link" data-sort="dq2-6">DQ2-6: Identifying Critical Information</div>
<div class="link" data-sort="dq2-7">DQ2-7: Organizing Students to Interact with New Knowledge</div>
<div class="link" data-sort="dq2-8">DQ2-8: Previewing New Content</div>
<div class="link" data-sort="dq2-9">DQ2-9: Chunking Content into "Digestible Bites"</div>
<div class="link" data-sort="dq2-10">DQ2-10: Processing of New Information</div>
<div class="link" data-sort="dq2-11">DQ2-11: Elaborating on New Information</div>
<div class="link" data-sort="dq2-12">DQ2-12: Recording and Representing Knowledge</div>
<div class="link" data-sort="dq2-13">DQ2-13: Reflecting on Learning</div>
</div>

<script type="application/javascript">
var $menu = $('#pop');

$('#sort').click(function(e) {
$menu.css({
    "left": e.offsetX + "px",
    "top": e.offSetY + "px"
}).show();
 });

$('#pop .link').click(function(e) {
    var ele = $(this);
    var sortKey = ele.attr('data-sort'); // save it somewhere
$('#sort').html(ele.html()
);

$menu.hide();
});
</script>

<style type="text/css">
#sort{
 color: black;
 border-bottom: 1px dotted blue;  
}

#pop2{
 color: #444;   
 width: 205px;
 border: 1px solid #ccc;
 padding: 5px;
 display: none;
 position: absolute;
line-height:140%;
background:#FFFFFF;
}

.link:hover {
 color: red;
 cursor: pointer;
}

</style> 
```

任何和所有的帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:11:52.667

我将您的处理程序分配包装到一个以预期元素的 id 作为参数的函数中，以便您可以将其分配给多个菜单。请注意，我还更改了一些标记；具体来说，通过去掉“点击获取策略”范围内的 id="sort" 来降低特异性（呵呵）。相反，我使用 data-sort-for 属性将元素链接到它的内联列表。

```
 <div id="somecontent"><span class="sort" href="#" data-sort-for="pop">Click for Strategies</span></div>
<div id="pop">
    <div class="link" data-sort="dq1-1" >DQ1-1: Providing Clear Learning Goals and Scales (Rubrics)</div>
    <div class="link" data-sort="dq1-2">DQ1-2: Tracking Student Progress</div>
    <div class="link" data-sort="dq1-3">DQ1-3: Celebrating Success</div>
    <div class="link" data-sort="dq6-4">DQ6-4: Establishing Classroom Routines</div>
    <div class="link" data-sort="dq6-5">DQ6-5: Organizing the Physical Layout of the Classroom</div>
    <div class="link" data-sort="dq2-6">DQ2-6: Identifying Critical Information</div>
    <div class="link" data-sort="dq2-7">DQ2-7: Organizing Students to Interact with New Knowledge</div>
    <div class="link" data-sort="dq2-8">DQ2-8: Previewing New Content</div>
    <div class="link" data-sort="dq2-9">DQ2-9: Chunking Content into "Digestible Bites"</div>
    <div class="link" data-sort="dq2-10">DQ2-10: Processing of New Information</div>
    <div class="link" data-sort="dq2-11">DQ2-11: Elaborating on New Information</div>
    <div class="link" data-sort="dq2-12">DQ2-12: Recording and Representing Knowledge</div>
    <div class="link" data-sort="dq2-13">DQ2-13: Reflecting on Learning</div>
</div>
<div id="someothercontent"><span class="sort" href="#" data-sort-for="popTwo">Click for Strategies</span></div>
<div id="popTwo">
    <div class="link" data-sort="dq1-1" >DQ1-1: Providing Clear Learning Goals and Scales (Rubrics)</div>
    <div class="link" data-sort="dq1-2">DQ1-2: Tracking Student Progress</div>
    <div class="link" data-sort="dq1-3">DQ1-3: Celebrating Success</div>
    <div class="link" data-sort="dq6-4">DQ6-4: Establishing Classroom Routines</div>
    <div class="link" data-sort="dq6-5">DQ6-5: Organizing the Physical Layout of the Classroom</div>
    <div class="link" data-sort="dq2-6">DQ2-6: Identifying Critical Information</div>
    <div class="link" data-sort="dq2-7">DQ2-7: Organizing Students to Interact with New Knowledge</div>
</div> 
```

​Javascript：

```
makeDropdown( '#pop' );
makeDropdown( '#popTwo' );
function makeDropdown( menu ) {
    var $menu = $( menu );
    var sorter = 'span.sort[data-sort-for='+ $menu.attr('id') +']';
    $( sorter ).click(function(e) {
        $menu.css({
            "left": e.offsetX + "px",
            "top": e.offSetY + "px"
        }).show();
    });

    $( menu + ' .link' ).click(function(e) {
        var ele = $(this);
        var sortKey = ele.attr('data-sort'); // save it somewhere
        $( sorter ).html( ele.html() );
        $menu.hide();
    });
} 
```

风格：

```
.sort{
 color: black;
 border-bottom: 1px dotted blue;  
}

#pop2{
 color: #444;   
 width: 205px;
 border: 1px solid #ccc;
 padding: 5px;
 display: none;
 position: absolute;
line-height:140%;
background:#FFFFFF;
}

.link:hover {
 color: red;
 cursor: pointer;
}​ 
```

在这里测试它：http: [//jsfiddle.net/cgspicer/2WxQa/](http://jsfiddle.net/cgspicer/2WxQa/)

# magento-1.7 - Ajax 调用 magento 中的 php 脚本

> ID：13725732
> 
> 赞同：0
> 
> 时间：2012-12-05T14:44:06.280
> 
> 标签：magento-1.7, magento

我创建了一个可在管理员中访问的模块。在该模块中，我在 .phtml(template) 文件中创建了一个表单，并在通过 javascript 对其进行验证后，我想将数据库中的值保存在 products 表中。我搜索了很多，但我无法调用脚本！请指导我如何将调用发送到 php 脚本并成功获取数据，我必须创建哪些模块、控制器等来做到这一点？这是我进行ajax调用的模块结构，

code->local->myspace->mymodule->(model,controllers,etc,helper) 我在 adminhtml->default->default->templates 中包含了模板文件。

配置.xml：

```
<?xml version="1.0"?>

<config>
    <modules>
        <Inchoo_CoffeeFreak>
            <version>0.1.0</version>
        </Inchoo_CoffeeFreak>
    </modules> 

    <global>
        <blocks>
            <coffefreakblock1>
                <class>Inchoo_CoffeeFreak_Block</class>
            </coffefreakblock1>  
            <coffefreakblock2>
                <class>Inchoo_CoffeeFreak_Block_EditSpecial</class>
            </coffefreakblock2> 
        </blocks>
        <helpers>
            <coffefreakhelper1>
                <class>Inchoo_CoffeeFreak_Helper</class>
            </coffefreakhelper1>
        </helpers>  
    </global>    

    <admin>
        <routers>

           <samplerouter1>
                <use>admin</use>
                <args>
                    <module>Inchoo_CoffeeFreak_AdminControllersHere</module>
                    <frontName>admin</frontName>

                    <modules>
                        <sintax after="Inchoo_CoffeeFreak_AdminControllersHere">Mage_Adminhtml</sintax>
                    </modules>
                </args>
           </samplerouter1>           
        </routers>      
    </admin>

    <adminhtml>

        <menu>
             <mymenu1 translate="title" module="coffefreakhelper1">
                <title>PrintInfo</title>
                <sort_order>20</sort_order>
                <children>
                <!-- Note the misleading "module" attribute. 
                    It actualy refers to one of the declared helpers -->

                    <myitem1 translate="title" module="coffefreakhelper1">
                        <title>Add configuration</title>
                        <action>samplerouter1/FreakOut</action>
                        <sort_order>1</sort_order>                        
                    </myitem1>

                    <myitem2 translate="title" module="coffefreakhelper1">
                        <title>Change configuration</title>
                        <action>samplerouter1/FreakOut2</action>
                        <sort_order>2</sort_order>                        
                    </myitem2>                    

                </children>
             </mymenu1>
        </menu>
    </adminhtml>  
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:34:46.937

您应该能够在产品管理员中完成大部分您尝试做的事情，但是如果您想创建自己的自定义模块来保存产品数据，那么您需要做这样的事情

app/code/local/myspace/mymodule/controllers/IndexController.php

```
<?php
class Myspace_Mymodule_IndexController extends Mage_Core_Controller_Front_Action
{
    public function SaveAction()
    {
        $product_id = Mage::app()->getRequest()->getParam('product_id')
        $product = Mage::getModel('catalog/product')->load($product_id);
        $product->setName('new_name');
        .....
        $product->save()
    }
} 
```

看看@http [://www.phpzag.com/create-custom-module-with-custom-database-table/](http://www.phpzag.com/create-custom-module-with-custom-database-table/)

在您的 phtml 文件中，您需要将您的 ajax 操作发布到 www.site.com/admin/mymodule/index/save

# java - 如何将图像从 java applet 发送到 javascript？

> ID：13725734
> 
> 赞同：1
> 
> 时间：2012-12-05T14:44:07.433
> 
> 标签：java, javascript, clipboard

我有 JAVA 代码

```
import java.applet.Applet; import java.awt.Container; import java.awt.FlowLayout; import java.awt.Graphics; import java.awt.Image; import java.awt.MediaTracker; import java.awt.TextArea; import java.awt.Toolkit; import java.awt.datatransfer.Clipboard; import java.awt.datatransfer.DataFlavor; import java.awt.datatransfer.UnsupportedFlavorException; import java.awt.image.BufferedImage; import java.awt.image.ImageObserver; import java.awt.image.ImageProducer; import java.io.File; import java.io.IOException; import javax.imageio.ImageIO;

public class JavaScriptToJava extends Applet{

    TextArea textBox;
    Image img;
    MediaTracker tr;
    public void init(){
        setLayout(new FlowLayout());
        textBox = new TextArea(5,40);
        add(textBox);
    }

    public void appendText(String text){
        textBox.append(text);

           Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();
                try {
                        //Get data from clipboard and assign it to an image.
                        //clipboard.getData() returns an object, so we need to cast it to a BufferdImage.
                        BufferedImage image = (BufferedImage)clipboard.getData(DataFlavor.imageFlavor);

                }
                //getData throws this.
                catch(UnsupportedFlavorException ufe) {
                        ufe.printStackTrace();
                }

                catch(IOException ioe) {
                        ioe.printStackTrace();
                }
    }       

} 
```

我需要在 javascript 中获取此图像。这是怎么做的？

我的主要任务是从剪贴板复制图像并将其传输到调用js的html页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:57:04.383

取决于你想用 javascript 中的图像做什么。如果您只想在屏幕上显示它，您可能想看看 [Embedding Base64 Images](https://stackoverflow.com/questions/1207190/embedding-base64-images)

否则，如果您想使用 javascript 裁剪或调整其大小，然后将其发送到服务器，事情将变得更加棘手；)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:53:40.267

创建一个 Java 方法以从 BufferedImage 中获取像素：

```
public int getPixel(int xLoc, int yLoc) {
    int argb = myImage.getRGB(xLoc, yLoc);
    int rgba = // ... convert to rgba;
    return rgba;
} 
```

我认为也应该可以只调用一次小程序并将一个数组传递给您的 JavaScript 代码。

在 JavaScript 中，创建一个 Canvas 元素，然后为每个像素调用小程序并在 Canvas 中设置。（[有关如何从 JavaScript 调用小程序的更多信息。](http://docs.oracle.com/javase/tutorial/deployment/applet/invokingAppletMethodsFromJavaScript.html)）（[HMTL Canvas 像素操作教程。](http://beej.us/blog/data/html5s-canvas-2-pixel/)）

更进一步：

```
var myCanvas = document.getElementById("myCanvas");
var myImg    = myCanvas.toDataURL("image/png");
document.write('<img src="'+myImg+'"/>'); 
```

# javascript - 用 JavaScript 替换字符串中的所有出现

> ID：13725739
> 
> 赞同：1
> 
> 时间：2012-12-05T14:44:41.453
> 
> 标签：javascript, regex

> **可能重复：**
> [替换字符串中的所有匹配项](https://stackoverflow.com/questions/6064956/replace-all-occurrences-in-a-string)

我的代码：

```
alert('111'.replace('1','2')); 
```

它给出的结果为`211`。但我需要结果为`222`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T14:45:11.267

为了替换*所有*出现的事件，您可以使用带有（即全局）标志的[正则表达式：](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)`g`

```
"111".replace(/1/g, "2"); 
```

# java - Android 多态性：反模式？

> ID：13725741
> 
> 赞同：8
> 
> 时间：2012-12-05T14:44:48.260
> 
> 标签：java, android, polymorphism

我正在阅读 O'Reilly 的“Programming Android”一书，并试图从第 99 页开始围绕“Overrides and Callbacks”部分展开思考。他们将此作为良好代码的示例：

```
public class MyModel {
    public MyModel(TextView textBox) {
        textBox.addTextChangedListener(
            new TextWatcher() {
                public void afterTextChanged(Editable s) {
                    handleTextChange(s);
                }
                // ...
    }
    void handleTextChange(Editable s) {
        // do something with s, the changed text.
    }
} 
```

~~由于缺乏可扩展性~~封装，后来将其称为反模式：

```
public class MyModel implements TextWatcher {
    public MyModel(TextView textBox) {
        textBox.addTextChangedListener(this);
    }

    public void afterTextChanged(Editable s) {
        handleTextChange(s);
    }

    // ...

    void handleTextChange(Editable s) {
        // do something with s, the changed text.
    }
} 
```

除了第二个更具可读性之外，我没有看到两者之间的功能差异。两者都采用 TextView，并实现一个处理函数来覆盖。用这样的东西扩展第二个不是很容易吗？

```
public class AnotherModel extends MyModel {
    @Override
    void handleTextChange(Editable s) {
         // another implementation
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:06:38.067

> 由于缺乏可扩展性而导致的反模式

在可扩展性方面，它们的相似之处在于这两种方法都可以让子类`TextChangeListener`通过覆盖轻松地修改现有的`handleTextChange`; 但它们的不同之处在于，唯一的方法#2 也使子类可以轻松地添加*新* `TextChangeListener`的，而无需修改现有的（继承的）。

即使超类使用方法#1，子类仍然可以`TextChangeListener`使用方法#2 添加新的；但是，如果我们谈论的是一般使用的模式，那么一致使用方法#2 将比一致使用方法#1 提供更多的可扩展性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:52:59.090

我不喜欢第二种形式，因为类实现接口是一种技巧，而不是因为类自然是接口的子类型。

第二种形式对于简单的情况是可以管理的，所以除非它变得太乱，否则没关系。

在 Java 8 中，我们可以以更好的语法使用第一种形式：

```
 textBox.addTextChangedListener(this#handleTextChange);  // method reference 
```

# c++ - 要求的参考折叠规则的简明解释：(1) A& & -> A& ，(2) A& && -> A& ，(3) A&& & -> A& ，和 (4) A&& && -> A&&

> ID：13725747
> 
> 赞同：57
> 
> 时间：2012-12-05T14:45:25.620
> 
> 标签：c++, stl

以下链接提供了 4 种参考折叠形式（如果我是正确的，这些是仅有的 4 种形式）：[http](http://thbecker.net/articles/rvalue_references/section_08.html) ://thbecker.net/articles/rvalue_references/section_08.html 。

从链接：

> 1.  A& & 变成 A&
> 2.  A& && 变成 A&
> 3.  A&& & 变成 A&
> 4.  A&& && 变成 A&&

尽管我可以做出有根据的猜测，但我想简明地解释这些参考折叠规则背后的基本原理。

一个相关的问题，如果可以的话：在典型的实际用例中，这些引用折叠规则是否**在 C++11 中**被诸如 、 等 STL 实用程序内部`std::move()`使用？`std::forward()`（注意：我特别询问是否在 C++11 中使用了引用折叠规则，而不是在 C++03 或更早版本中使用。）

我问这个相关问题是因为我知道 C++ 11*实用*程序`std::remove_reference`如它们是否*与*引用折叠规则一起使用。`std::remove_reference`

 *** * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-05T15:34:06.480

引用折叠规则（保存为`A& & -> A&`C++98/03）存在一个原因：允许完美转发工作。

“完美”转发意味着有效地转发参数，就好像用户直接调用了函数一样（减去省略，被转发破坏）。用户可以传递三种值：lvalues、xvalues 和 prvalues，并且接收位置可以通过三种方式获取值：按值、按（可能是 const）左值引用和按（可能是 const）右值参考。

考虑这个函数：

```
template<class T>
void Fwd(T &&v) { Call(std::forward<T>(v)); } 
```

### 按价值

如果`Call`按值获取其参数，则必须在该参数中进行复制/移动。哪一个取决于传入的值是什么。如果传入的值是左值，那么它必须复制左值。如果传入的值是一个右值（它们统称为 xvalues 和 prvalues），那么它必须从它移动。

如果`Fwd`使用左值调用，C++ 的类型推导规则意味着`T`将推导为`Type&`，其中`Type`是左值的类型。显然，如果左值是`const`，它将被推导出为`const Type&`。引用折叠规则意味着`Type & &&`变成`Type &`for `v`，一个左值引用。这正是我们需要调用`Call`的。用左值引用调用它会强制复制，就像我们直接调用它一样。

如果您`Fwd`使用右值调用（即：`Type`临时表达式或某些`Type&&`表达式），则`T`将推导出为`Type`. 引用折叠规则给了我们`Type &&`，它引发了移动/复制，这几乎就像我们直接调用它一样（减去省略号）。

### 通过左值引用

如果`Call`通过左值引用获取它的值，那么它应该只在用户使用左值参数时才可调用。如果它是一个 const-lvalue 引用，那么它可以被任何东西（lvalue、xvalue、prvalue）调用。

如果您`Fwd`使用左值调用，我们将再次`Type&`获得`v`. 这将绑定到非常量左值引用。如果我们用 const 左值调用它，我们会得到`const Type&`，它只会绑定到 中的 const 左值引用参数`Call`。

如果您`Fwd`使用 xvalue 调用，我们将再次`Type&&`获得`v`. 这将*不允许*您调用采用非常量左值的函数，因为 xvalue 不能绑定到非常量左值引用。它可以绑定到 const 左值引用，因此如果`Call`使用 a `const&`，我们可以`Fwd`使用 xvalue 调用。

如果您`Fwd`使用纯右值调用，我们再次得到`Type&&`，所以一切都像以前一样工作。您不能将临时值传递给采用非常量左值的函数，因此我们的转发函数同样会在尝试这样做时窒息。

### 通过右值引用

如果`Call`通过右值引用获取它的值，那么它应该只在用户使用 xvalue 或 rvalue 参数时才可调用。

如果你`Fwd`用左值调用，我们得到`Type&`. 这不会绑定到右值引用参数，因此会导致编译错误。A`const Type&`也不会绑定到右值引用参数，所以它仍然失败。`Call`如果我们直接使用左值调用，这正是会发生的情况。

如果您`Fwd`使用 xvalue 调用，我们会得到`Type&&`，它有效（当然，cv 限定仍然很重要）。

使用纯右值也是如此。

### 标准::转发

std::forward 本身以类似的方式使用引用折叠规则，以便将传入的右值引用作为 xvalues（作为 xvalues 的函数返回值`Type&&`）和传入的左值引用作为左值（返回`Type&`）传递。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T15:31:06.783

规则其实很简单。`Rvalue reference`是对某个临时值的引用，该临时值不会在使用它的表达式之外持续存在 - 与`lvalue reference`引用持久化数据相反。因此，如果您有对持久数据的引用，无论您将它与其他什么引用结合起来，实际引用的数据都是左值——这涵盖了前 3 条规则。第 4 条规则也很自然——对右值引用的右值引用仍然是对非持久数据的引用，因此产生了右值引用。

是的，C++11 实用程序依赖于这些规则，您的链接提供的实现与真正的标头匹配：[http ://en.cppreference.com/w/cpp/utility/forward](http://en.cppreference.com/w/cpp/utility/forward)

`std::move`是的，在使用和实用程序时正在应用折叠规则以及模板参数推导规则`std::forward`，就像您的链接中解释的那样。

诸如`remove_reference`is 之类的类型特征的使用实际上取决于您的需求；`move`并`forward`涵盖最随意的情况。**

# asp.net-mvc - ASP.NET MVC 返回损坏的压缩文件

> ID：13725748
> 
> 赞同：1
> 
> 时间：2012-12-05T14:45:26.590
> 
> 标签：asp.net-mvc, asp.net-mvc-3, http-headers, zip

我正在尝试下载 zip 文件。但下载的 zip 文件已损坏或损坏，我无法打开它。我使用`Ionic.Zip`库来创建我的`File.zip`. 我的代码：

```
public static Stream LoadImages(int[] ids)
{
    var images = new List<byte[]>();
    var imgNames = new List<string>();

    foreach (var id in ids)
    {
        string fName;
        images.Add(LoadImage(id, out fName));
        imgNames.Add(fName);
    }

    MemoryStream outputStream = new MemoryStream();

    using (var zip = new Ionic.Zip.ZipFile())
    {
        for(int i = 0; i < images.Count; i++)
        {
            zip.AddEntry(imgNames[i], images[i]);
        }

        zip.Save(outputStream);
    }
    return outputStream;
} 
```

我的控制器动作：

```
public FileResult DownloadGallery(int[] ids)
{
    var stream = ImageManager.LoadImages(ids);
    return File(stream, "application/zip", "gallery.zip");
} 
```

也许我的`zip file`不正确或我的问题`Http Response`......你有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T14:57:55.767

您需要将您的`MemoryStream`背部倒回到开头：

```
public FileResult DownloadGallery(int[] ids)
{
    var stream = ImageManager.LoadImages(ids);
    stream.Position = 0;
    return File(stream, "application/zip", "gallery.zip");
} 
```

`FileResult`唯一从当前位置所在的流开始写入。

# c# - DnsGetHostEntry 获取错误的 IP 地址

> ID：13725749
> 
> 赞同：0
> 
> 时间：2012-12-05T14:45:34.770
> 
> 标签：c#, sockets

我有以下问题。`socket.Bind()`我尝试通过该功能连接套接字。但它总是抛出。我猜是因为它从

`IPHostEntry ipHe = Dns.GetHostEntry(Dns.GetHostName());`

功能。我认为这个问题是由我的静态 IP 引起的。`Ipconfig /all`显示我`109.90.xxx.xxx`的 Ip 和程序获得的 Ip 是`192.168.xxx.xxx`.

它抛出的错误是“请求的地址在其上下文中无效”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:58:21.853

与您的主机关联的 IP 地址可能不止一个。尝试遍历返回的 IP 地址列表。

```
foreach (IPAddress ip in ipHe.AddressList)
{
    Console.WriteLine("    {0}", ip);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:58:51.383

`Dns.GetHostEntry`查询DNS，所以那里可能是错误的。从命令提示符`nslookup {your hostname}`返回什么？

基本上，没有什么可以阻止 DNS 和您的本地计算机失步。这可能是故意的，也可能表明存在问题，具体取决于您的本地网络要求和配置。

为了获得独立于 DNS 的本地 IP 地址，您需要直接查询接口：查看`System.Net.NetworkInformation.NetworkInterface.GetAllNetworkInterfaces()`，然后您可以枚举并调用`GetIPProperties()`每个接口，它返回多播和单播 IP 地址。

# multithreading - Perl 线程获得迭代速度

> ID：13725753
> 
> 赞同：1
> 
> 时间：2012-12-05T14:45:53.293
> 
> 标签：multithreading, perl, profiling

我有一些代码：

```
for my $t (1..$threads) {
  push @threads, threads->create(\&action_, $t);
}
for my $t (@threads) {
  $t->join();
}

sub action_ {
  while (@sites) {
    my $url = shift @sites;
    for my $data1 (@data) {
      for my $data2 (@data2) {
        something($url, $data1, $data2);
      }
    }
  }
} 
```

如何获得每秒（或每分钟）的速度（调用方法“某物”的次数）？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:56:09.883

Perl 在 CPAN 中有许多基准测试模块。看看： http: [//perldoc.perl.org/Benchmark.html](http://perldoc.perl.org/Benchmark.html)

这很好地解释了它；基本上，您要进行基准测试的代码包含在一个子例程中，您可以自由地计算或比较不同的例程。

我最常用的方法是在标题“方法”和“新”下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:19:27.223

如果您希望自己快速完成，可以像这样获得粗略估计：

```
use List::Util qw(sum);
use feature qw(say);
...

my $t0 = time();  # See also Time::HiRes
threads->create(\&action_) for 1 .. $nthreads;
my $nsomething = sum map { $_->join } threads->list();
my $elapsed = time() - $t0;

say "Among $nthreads threads we called something() ",
    ($nsomething/$elapsed),
    " times per second";

sub action_ {
  my $n;
  while (...) { ... something(); $n++; ... }
  return $n;
} 
```

如果这还不够好，您可能会在每次调用时`something()`将其被调用的时间推送到`threads::shared::share()`d 数组 - 或在您在 join() 之后收集的线程本地数组中，或打印到受互斥体保护的文件句柄或其他. 然后你可以对你生成的时间序列做任何你喜欢的事情。

# java - 将 JMeter 项目（ant）导入 Eclipse Juno

> ID：13725756
> 
> 赞同：1
> 
> 时间：2012-12-05T14:46:00.267
> 
> 标签：java, eclipse, ant, jmeter

我正在尝试用 JMeter 代码做一些事情，但我遇到了一些愚蠢的问题。
我已经安装了 Eclipse Juno，我已经安装了 Ant 并从 SVN 获取了 JMeter 代码，它可以很好地从命令行构建。问题是当我尝试将 JMeter ant 项目导入 Eclipse 时。在包资源管理器中我选择：`New/Project...`
然后我选择`Java/Java Project from existing Ant Build File`，接下来
我指向 JMeters 文件：`build.xml`，单击 Finish
看起来导入成功但我只能看到两个包含源代码的文件夹：`core`和`jorphan`. 应该有更多，至少 12 个目录。

那么我做错了什么？或者我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:53:05.207

我通常会做以下事情：

*   在 Eclipse 中，从 svn 签出 jmeter

*   通过修改.project文件将java性质添加到项目中（创建另一个java项目并复制.project的粘贴内容

    ```
     <projectDescription>
    <name>jmeter</name>
    <comment></comment>
    <projects>
    </projects>
    <buildSpec>
            <buildCommand>
                 <name>org.eclipse.jdt.core.javabuilder</name>
                        <arguments>
                        </arguments>
                </buildCommand>
    </buildSpec>
    <natures>
           <nature>org.eclipse.jdt.core.javanature</nature>
    </natures>
    </projectDescription> 
    ```

*   将 eclipse.classpath 复制到 .classpath

*   调用 ant download_jars

而已

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-17T17:00:53.510

build.xml 有一个 Eclipse 设置目标，由于某种原因在 MD 中未提及。`ant setup-eclipse-project`在将项目导入 Eclipse 之前运行。

# python - 如何让我的代码更 Pythonic？

> ID：13725759
> 
> 赞同：-1
> 
> 时间：2012-12-05T14:46:03.690
> 
> 标签：python

我尝试定义一个尽可能短的函数，如果函数`test`始终为真，则返回 True，如果有某个值为假，则返回假。我试过这样：

```
def res(v): for d in List: return True if v.test(d) else: pass 
```

这没用。如何定义这样的功能？

我只想在一行上定义它。

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:49:47.327

关于什么：

```
res = lambda x: all(test(v) for v in x) 
```

或者

```
res = lambda x: all(map(test, x)) 
```

* * *

正如[弗拉基米尔](https://stackoverflow.com/users/234745/vladimir)在评论中提到的那样，你`test`实际上是一个名为的对象的方法`v`，所以它实际上应该是：

```
lambda v: all(map(v.test, List)) # You should not use List as a variable name! 
```

不过，您可能也想将 the`List`作为参数传递。

* * *

查看[方法](http://docs.python.org/2/library/functions.html#all)[的](http://docs.python.org/2/library/functions.html#map)[文档，`all`](http://docs.python.org/2/library/functions.html#all)方法[和](http://docs.python.org/2/library/functions.html#map)函数[的](http://docs.python.org/2/reference/expressions.html#lambda)文档。[`map`](http://docs.python.org/2/library/functions.html#map)[`lambda`](http://docs.python.org/2/reference/expressions.html#lambda)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:54:11.343

这更接近你想要的：

```
def res(v, values):
    return all(v.test(d) for d in values) 
```

这也可以：

```
def res(v, values):
    return filter(v.test, values) == values 
```

如上所述，不要命名你的变量`list`。

# android - 从服务向接收者发送多个意图

> ID：13725760
> 
> 赞同：1
> 
> 时间：2012-12-05T14:46:05.197
> 
> 标签：android, android-intent

我正在制作一个简单的应用程序，它在一天中的 8 个不同时间生成通知。服务正在使用警报管理器生成警报，我正在使用广播接收器来捕捉警报并显示 toast/创建通知。

问题是我无法创建多个警报。我用来创建多个警报的方法对每个警报都有不同的意图。但是一旦我在模拟器上启动应用程序，所有消息都会得到一次同时显示..我不知道这是否是正确的方法..如果是，请帮我纠正如果不是，请提出一些替代方法

我附上我的服务和接收者代码

```
package com.example.firstapp;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.Calendar;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyService extends Service {

private static final String tag = null;
int number = 0;
// MediaPlayer player;
String str, bread;
StringBuffer buf1, buf2, buf3, buf4, buf5, buf6, buf7, buf8;
Calendar time1, time2, time3, time4, time5, time6, time7, time8;
Bundle basket;;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
    Toast.makeText(this, "Service created", Toast.LENGTH_LONG).show();
    Log.i(tag, "service created");
    // player=MediaPlayer.create(this, R.raw.song);
    // player.setLooping(false);
    try {
        createalarm();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

private void createalarm() throws IOException {
    // TODO Auto-generated method stub
    AlarmManager alarmMgr = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
    Intent i1 = new Intent(this, MyAlarmReceiver.class);
    Intent i2 = new Intent(this, MyAlarmReceiver.class);
    Intent i3 = new Intent(this, MyAlarmReceiver.class);
    Intent i4 = new Intent(this, MyAlarmReceiver.class);
    Intent i5 = new Intent(this, MyAlarmReceiver.class);
    Intent i6 = new Intent(this, MyAlarmReceiver.class);
    Intent i7 = new Intent(this, MyAlarmReceiver.class);
    Intent i8 = new Intent(this, MyAlarmReceiver.class);

    fillbuffers();
    /*
     * fillbread(4); Bundle basket = new Bundle(); basket.putString("key",
     * bread); i.putExtras(basket);
     */
    PendingIntent pendingi1,pendingi2,pendingi3,pendingi4,pendingi5,pendingi6,pendingi7,pendingi8;

    time1 = Calendar.getInstance();
    time2 = Calendar.getInstance();
    time3 = Calendar.getInstance();
    time4 = Calendar.getInstance();
    time5 = Calendar.getInstance();
    time6 = Calendar.getInstance();
    time7 = Calendar.getInstance();
    time8 = Calendar.getInstance();

    time1.setTimeInMillis(System.currentTimeMillis());
    time1.set(Calendar.HOUR_OF_DAY, 16);
    time1.set(Calendar.MINUTE, 40);
    time1.set(Calendar.SECOND, 0);
    time1.set(Calendar.MILLISECOND, 0);

    time2.setTimeInMillis(System.currentTimeMillis());
    time2.set(Calendar.HOUR_OF_DAY, 16);
    time2.set(Calendar.MINUTE, 41);
    time2.set(Calendar.SECOND, 0);
    time2.set(Calendar.MILLISECOND, 0);

    time3.setTimeInMillis(System.currentTimeMillis());
    time3.set(Calendar.HOUR_OF_DAY, 16);
    time3.set(Calendar.MINUTE, 42);
    time3.set(Calendar.SECOND, 0);
    time3.set(Calendar.MILLISECOND, 0);

    time4.setTimeInMillis(System.currentTimeMillis());
    time4.set(Calendar.HOUR_OF_DAY, 16);
    time4.set(Calendar.MINUTE, 43);
    time4.set(Calendar.SECOND, 0);
    time4.set(Calendar.MILLISECOND, 0);

    time5.setTimeInMillis(System.currentTimeMillis());
    time5.set(Calendar.HOUR_OF_DAY, 16);
    time5.set(Calendar.MINUTE, 44);
    time5.set(Calendar.SECOND, 0);
    time5.set(Calendar.MILLISECOND, 0);

    time6.setTimeInMillis(System.currentTimeMillis());
    time6.set(Calendar.HOUR_OF_DAY, 16);
    time6.set(Calendar.MINUTE,45);
    time6.set(Calendar.SECOND, 0);
    time6.set(Calendar.MILLISECOND, 0);

    time7.setTimeInMillis(System.currentTimeMillis());
    time7.set(Calendar.HOUR_OF_DAY, 16);
    time7.set(Calendar.MINUTE, 46);
    time7.set(Calendar.SECOND, 0);
    time7.set(Calendar.MILLISECOND, 0);

    time8.setTimeInMillis(System.currentTimeMillis());
    time8.set(Calendar.HOUR_OF_DAY, 16);
    time8.set(Calendar.MINUTE, 47);
    time8.set(Calendar.SECOND, 0);
    time8.set(Calendar.MILLISECOND, 0);

    // fillbread();
    //if (true) {
        fillbread(1);
        basket = new Bundle();
        basket.putString("key", bread);
        i1.putExtras(basket);
        pendingi1 = PendingIntent.getBroadcast(this, 0, i1,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, time1.getTimeInMillis(),
                pendingi1);

    //}
//if (System.currentTimeMillis() == time2.getTimeInMillis()) {
        fillbread(2);
        basket = new Bundle();
        basket.putString("key", bread);
        i2.putExtras(basket);
        pendingi2 = PendingIntent.getBroadcast(this, 0, i2,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, time2.getTimeInMillis(),
                pendingi2);

//  }
//   if (System.currentTimeMillis() == time3.getTimeInMillis()) {
        fillbread(3);
        basket = new Bundle();
        basket.putString("key", bread);
        i3.putExtras(basket);
        pendingi3 = PendingIntent.getBroadcast(this, 0, i3,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, time3.getTimeInMillis(),
                pendingi3);

//  } 
//if (System.currentTimeMillis() == time4.getTimeInMillis()) {
        fillbread(4);
        basket = new Bundle();
        basket.putString("key", bread);
        i4.putExtras(basket);
        pendingi4 = PendingIntent.getBroadcast(this, 0, i4,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
                pendingi4);

//  }
    //else if (System.currentTimeMillis() == time5.getTimeInMillis()) {
        fillbread(5);
        basket = new Bundle();
        basket.putString("key", bread);
        i5.putExtras(basket);
        pendingi5 = PendingIntent.getBroadcast(this, 0, i5,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
                pendingi5);

//      }     else if (System.currentTimeMillis() == time6.getTimeInMillis()) {
        fillbread(6);
        basket = new Bundle();
        basket.putString("key", bread);
        i6.putExtras(basket);
        pendingi6 = PendingIntent.getBroadcast(this, 0, i6,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
                pendingi6);

//  } else if (System.currentTimeMillis() == time7.getTimeInMillis()) {
        fillbread(7);
        basket = new Bundle();
        basket.putString("key", bread);
        i7.putExtras(basket);
        pendingi7 = PendingIntent.getBroadcast(this, 0, i7,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
                pendingi7);

    //} else if (System.currentTimeMillis() == time8.getTimeInMillis()) {
        fillbread(8);
        basket = new Bundle();
        basket.putString("key", bread);
        i8.putExtras(basket);
        pendingi8 = PendingIntent.getBroadcast(this, 0, i8,PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.set(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(),
                pendingi8);
//  }

}

private void fillbread(int number) {
    // TODO Auto-generated method stub
    switch (number) {
    case 1:
        bread = buf1.toString();
        break;
    case 2:
        bread = buf2.toString();
        break;
    case 3:
        bread = buf3.toString();
        break;
    case 4:
        bread = buf4.toString();
        break;
    case 5:
        bread = buf5.toString();
        break;
    case 6:
        bread = buf6.toString();
        break;
    case 7:
        bread = buf7.toString();
        break;
    case 8:
        bread = buf8.toString();
        break;
    }
}

private void fillbuffers() throws IOException {
    // TODO Auto-generated method stub
    StringBuffer buf = new StringBuffer();
    buf1 = new StringBuffer();
    buf2 = new StringBuffer();
    buf3 = new StringBuffer();
    buf4 = new StringBuffer();
    buf5 = new StringBuffer();
    buf6 = new StringBuffer();
    buf7 = new StringBuffer();
    buf8 = new StringBuffer();

    InputStream is = this.getResources().openRawResource(R.drawable.yo);
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    int index = 1, tcount = 0;
    String line;
    if (is != null) {
        while ((line = reader.readLine()) != null && tcount < 8) {
            switch (index) {
            case 1:
                buf1.append(line + "\n");
                break;
            case 2:
                buf2.append(line + "\n");
                break;
            case 3:
                buf3.append(line + "\n");
                break;
            case 4:
                buf4.append(line + "\n");
                break;
            case 5:
                buf5.append(line + "\n");
                break;
            case 6:
                buf6.append(line + "\n");
                break;
            case 7:
                buf7.append(line + "\n");
                break;
            case 8:
                buf8.append(line + "\n");
                break;
            }
            buf.append(line + "\n");
            tcount = tcount + 1;
            index = index + 1;
        }
    }
    // bread=buf1.toString();
    is.close();
}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "service destoryed", Toast.LENGTH_LONG).show();
    // player.stop();
}

@SuppressWarnings("deprecation")
@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Log.i(tag, "service started");
    // player.start();
} 
```

}

接收代码::

```
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.widget.Toast;

public class MyAlarmReceiver extends BroadcastReceiver {

@SuppressWarnings("deprecation")
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    Bundle gotBasket = intent.getExtras();
    String msg = gotBasket.getString("key");
    Toast.makeText(context, msg, Toast.LENGTH_LONG).show();

    NotificationManager nm =(NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
    @SuppressWarnings("deprecation")
    Notification notify=new Notification(android.R.drawable.stat_notify_missed_call, msg, System.currentTimeMillis());
    Intent intent1= new Intent(context, DisplayMessage.class);
    Bundle basket = new Bundle();
    basket.putString("msg", msg);
    intent1.putExtras(basket);
    PendingIntent pending= PendingIntent.getActivity(context, 0, intent1, 0);
    notify.setLatestEventInfo(context, msg, "just a greeting message for you", pending);

    Notification noti = new Notification.Builder(context)
    .setContentTitle("just a greeting message for you")
    .setContentText(msg)
    .setSmallIcon(android.R.drawable.alert_dark_frame)
    .build();

    nm.notify(0, notify);
    /*
     * Intent ourIntent= new Intent(context, Menu.class);
     * context.startActivity(ourIntent); //startAcTivity(ourIntent);
     */
    /*
     * AlertDialog.Builder builder = new AlertDialog.Builder(context);
     * builder.setMessage(msg); builder.setCancelable(false);
     * builder.setPositiveButton("ok", new DialogInterface.OnClickListener()
     * {
     * 
     * @Override public void onClick(DialogInterface dialog, int which) { //
     * TODO Auto-generated method stub } }); AlertDialog alert=
     * builder.create(); alert.show();
     */
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T12:25:30.053

我认为发生这种情况是因为您对所有重叠的通知 id 使用相同的通知 ID，因此对所有 nm.notify(0, notify); 使用不同的 ID。将 0 替换为 1,2,3...

有关更多信息，请访问 [如何在 android 中创建多个状态栏通知](https://stackoverflow.com/questions/6224178/how-to-create-multiple-statusbar-notifications-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:46:59.727

我猜这是因为您使用的是 FLAG_UPDATE_CURRENT 标志

```
 pendingi1 = PendingIntent.getBroadcast(this, 0, i1,PendingIntent.FLAG_UPDATE_CURRENT); 
```

如果您不想替换以前的 pendingIntent，请在任何地方使用 FLAG_ONE_SHOT。

```
 pendingi1 = PendingIntent.getBroadcast(this, 0, i1,PendingIntent.FLAG_ONE_SHOT); 
```

# android - 为垃圾回收声明变量的最有效方法

> ID：13725761
> 
> 赞同：2
> 
> 时间：2012-12-05T14:46:06.597
> 
> 标签：android

为性能和内存实例化变量的最有效方法是什么？

这个 ：

```
Context context = this;
Resources resources = context.getResources();
Drawable drawable = resources.getDrawable(R.drawable.image);
ListView list = (ListView) context.findViewById(R.id.list);
list.setBackgroundDrawable(drawable); 
```

或这个 ：

```
((ListView) findViewById(R.id.list)).setBackgroundDrawable(getResources().getDrawable(R.drawable.image)); 
```

或者没关系，它是一样的，所以我应该坚持我最喜欢的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:48:07.080

没关系。创建相同数量的对象。为了可读性，我更喜欢第一个。不过我会跳过第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:02:59.760

它实际上与垃圾收集无关。它与代码的执行速度和可读性有关。如果您在代码块中（在 {} 之间）多次引用全局变量，您通常会将其分配给局部变量，因为访问局部变量比访问全局变量要快。如果您多次调用具有相同参数的方法，您也可以这样做，在这种情况下，您不必多次执行该方法。

# android - 获取文件最后修改的日期

> ID：13725764
> 
> 赞同：0
> 
> 时间：2012-12-05T14:46:28.537
> 
> 标签：android, android-file

我正在编写一种方法，该方法应该检查文件夹中的最后一个文件是否存在一天。

```
 private void checkForPhotoDelete() {
        File directory = new File("/sdcard/LC/images");
        File[] files = directory.listFiles();
        if(files.length>0){
            File lastFile = files[files.length-1];
            Date lastMod = new Date(lastFile.lastModified());

            Calendar calendar = Calendar.getInstance();
            int today = calendar.get(Calendar.DAY_OF_WEEK); 
            Log.v("last modified","Last Modified Date : "+lastMod.getDay() + " vs "+today);
        }
        // TODO Auto-generated method stub

    } 
```

问题是我的文件最后一次修改是在星期二，今天是星期三。所以我希望我的日志说：

> “最后修改日期：3 对 4”

而是说 2 对 4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:50:41.307

尝试将`calendar`当前日期设置为实例：

```
private void checkForPhotoDelete() {
        File directory = new File("/sdcard/LC/images");
        File[] files = directory.listFiles();
        if(files.length>0){
            File lastFile = files[files.length-1];
            long lastMod = lastFile.lastModified();

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            int today = calendar.get(Calendar.DAY_OF_WEEK); 
            calendar.setTimeInMillis(lastMod);
            int lastModifyDay =  calendar.get(Calendar.DAY_OF_WEEK); 
            Log.v("last modified","Last Modified Date : "+ lastModifyDay + " vs "+today);
        }
        // TODO Auto-generated method stub

    } 
```

# xmpp - XEP-0133：获取用户名册的管理员请求 - 退货服务不可用

> ID：13725766
> 
> 赞同：3
> 
> 时间：2012-12-05T14:46:32.333
> 
> 标签：xmpp, ejabberd

我正在尝试通过 ejabberd 服务器上的管理员帐户获取用户名册。

这就是我想要做的：

```
 <iq 
    id='get-user-roster-2'
    to='localhost'
    type='set'
    xml:lang='en'>
  <command xmlns='http://jabber.org/protocol/commands' 
           node='http://jabber.org/protocol/admin#get-user-roster'
           sessionid='2012-12-04T12:44:27.123921Z'>
    <x xmlns='jabber:x:data' type='submit'>
      <field type='hidden' var='FORM_TYPE'>
        <value>http://jabber.org/protocol/admin</value>
      </field>
      <field var='accountjids'>
        <value>myuser@localhost</value>
      </field>
    </x>
  </command>
</iq> 
```

这将返回：

```
 <iq from='server@localhost' to='server@localhost/server@localhost/' type='error' id='purple64033b0f'>
<ping xmlns='urn:xmpp:ping'/>
<error code='503' type='cancel'>
<service-unavailable xmlns='urn:ietf:params:xml:ns:xmpp-stanzas'/>
</error>
</iq> 
```

任何想法这意味着什么以及我该如何解决？我是 XMPP 的新手。

任何指针表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:30:56.947

XEP-0133 简介：
存在一组与 Jabber/XMPP 服务器相关的管理员经常需要执行的常见服务级别任务........**本文档通过指定 Ad-Hoc 的配置文件来描述此类协议命令和相关的数据表单字段，而不是通过定义专门的和不同的协议。**
XEP-0133 要求：
**使具有适当权限的用户能够执行有关 Jabber/XMPP 服务器和组件的常见管理任务。
尽可能重复使用现有的 XMPP 和 Jabber 协议。**

> 所以我认为你没有 Ad-Hoc 命令或数据表单服务。你可以通过**服务发现 XEP-0030检查这个**

# arrays - MATLAB 逻辑索引 RAM 约束；解决方法？

> ID：13725767
> 
> 赞同：1
> 
> 时间：2012-12-05T14:46:36.807
> 
> 标签：arrays, matlab, vector, indexing

`I = 6100x6300x72`我有一个应用于函数的数组 ，结果`Icor`包含一些我想用零替换的负值。虽然这是一个很多问的问题，但在我的情况下，RAM 限制使任务变得更加困难。举个例子：

```
I=rand(6100,6300,72); %# example size of I
[x,y,z]=size(I); %# get the dimensions for later reshaping
I=reshape(I,x*y,z); %# reshape to columns
Icor=function(I) %# apply a function to I, result Icor
Icor(Icor < 0)=0; %# Icor has negatives which need removing
Icor=reshape(Icor,x,y,z); %# reshape back to same size as I (original size) 
```

我的问题在于逻辑索引步骤，`Icor(Icor < 0)=0;`这是我的 RAM 最大化的地方。有没有创造性的方法来解决这个问题？（或者如果我错过了一些非常明显的东西，请原谅我）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:24:11.290

我会遍历最后一个维度——它与使用`vectorized`逻辑索引一样有效。您**必须**遍历最后一个维度，因为前两个连续存储在内存中，因此这种访问是最有效的：

```
% forgive my lack of memory ;)
I = rand(610,630,72)-0.5;
s = size(I);

% temporary variables for the test
I1 = reshape(I, [], s(3));
I2 = I1;

% method 1
tic;
I1(I1<0) = 0;
toc

% method 2
tic;
for i=1:s(3)
    I2(I2(:,i)<0,i) = 0;
end
toc

isequal(I1, I2)

Elapsed time is 0.321225 seconds.
Elapsed time is 0.282395 seconds.

ans =

 1 
```

如您所见，循环实际上更快，因此对您来说是双赢的局面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:16:40.607

一旦你开始耗尽内存，通常你需要改变一些非常重要的东西来让你的内存使用恢复正常。

但是，如果您想专门找到与您的掩码调用等效的循环，请尝试以下代码：

完全矢量化的调用（就像你现在一样）

```
Icor(Icor < 0)=0; 
```

每行等效（假设为二维矩阵）

```
for ix = 1:size(Icor,1)
    Icor(Icor(ix,1)<0,  1) = 0;
end 
```

每个元素当量

```
for ix = 1:numel(Icor)
    if iCor(ix) < 0
        iCor(ix) = 0;
    end
end 
```

# java - 在正则表达式中需要帮助

> ID：13725769
> 
> 赞同：2
> 
> 时间：2012-12-05T14:46:43.937
> 
> 标签：java, regex

我一次输入了`"Varchar(10)`, `Number(10)`, `datetime(8)`, `varchar(17)`,之类的输入`char(3)`。

我只需要从中提取文本。我怎样才能在Java中做到这一点？

可以说我有 input`Varchar(50)`并期待 output `Varchar`。

我试过这个，但没有奏效：

```
String line = "varchar(0)";
String pattern = "\\D{.*}";
// Create a Pattern object 
Pattern r = Pattern.compile(pattern);
// Now create matcher object. 
Matcher m = r.matcher(line); 
if (m.find( )) { 
  System.out.println("Found value: " + m.group(0) ); 
} else { 
  System.out.println("NO MATCH"); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:54:26.660

您的组正则表达式一般

```
\w+\(\d+\) 
```

并捕捉第一部分，你可以把它变成一个组

```
(\w+)\(\d+\) 
```

试试这个功能：

```
private final Pattern TYPE_REGEX = Pattern.compile("(\\w+)\\(\\d+\\)");

public String extractType(String item) {
  Matcher matcher = TYPE_REGEX.matcher(item.trim());
  if(!matcher.matches())
    return null;
  return matcher.group(1);
} 
```

**赠品：**

您也可以使用类型安全枚举作为返回类型，因为我认为您正在处理一组固定的数据库类型

```
private enum Type { VARCHAR, NUMBER, DATETIME, CHAR, ADD_ALL_OTHERS_THAT_APPLY }
private final Pattern TYPE_REGEX = Pattern.compile("(\\w+)\\(\\d+\\)");

public Type extractType(String item) {
  Matcher matcher = TYPE_REGEX.matcher(item.trim());
  if(!matcher.matches())
    return null;
  return Type.valueOf(matcher.group(1).toUpperCase());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:51:13.867

如果您只处理单个外观，我认为正则表达式是矫枉过正的。

例如：

```
s = val.substring(1, val.indexOf ('(')) 
```

会做的工作。尽管这总是希望看到 '(' 作为输入字符串的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:53:42.417

您可以使用此正则表达式拆分输入字符串`"\\(\\d+\\),*"`：

**示例代码：**

```
String str = "Varchar(10), Number(10), datetime(8), varchar(17), char(3)";
String[] parts = str.split("\\(\\d+\\),*");

for (String part : parts)
    System.out.println(part.trim()); 
```

**输出**（注意`trim()`在打印元素之前调用。）：

```
Varchar
Number
datetime
varchar
char 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T11:53:21.850

```
line.replaceAll("\\([^\\)]*\\)",""); 
```

# java - 如何配置 MultipartResolver 以限制文件数量而不是大小？

> ID：13725770
> 
> 赞同：1
> 
> 时间：2012-12-05T14:46:48.297
> 
> 标签：java, xml, spring-mvc

目前，我有通过 Multipartfile 的 maxUoloadSize 限制文件上传的代码。我想一次上传 200-300 个文件，每个文件大约 1MB。有没有办法可以配置 bean 以限制上传的文件数量（大约 200 个）？但是，单张的上传大小应该还是10MB。我正在使用 Spring 3.0.5 MVC 框架。

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- 10 megs is 10485760 bytes.-->
    <property name="maxUploadSize" value="10486784"/>
</bean> 
```

任何建议表示赞赏....谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:54:01.513

不，您不能使用 CommonsMutipartResolver...但是如果您通过扩展 CommonsMutipartResolver 创建自己的多部分解析器，则可以！

# android - 如何在android中显示网页？

> ID：13725771
> 
> 赞同：3
> 
> 时间：2012-12-05T14:46:49.270
> 
> 标签：android, web, android-webview

如果我运行应用程序，我需要直接打开网页。无需在其中使用单个组件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:26:37.533

这是直接打开 google.com 的 Activity 的 onCreate 方法：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_browser);

    WebView wb = (WebView) findViewById(R.id.webView1);

    wb.loadUrl("http://www.google.com.tr");
} 
```

这是 activity_browser.xml 布局文件：

```
<WebView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".BrowserActivity"
    android:id="@+id/webView1" > 
</WebView> 
```

不要忘记在 AndroidManifest.xml 文件中添加互联网权限：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:51:52.497

在您的 onCreate 方法中创建并启动意图（当然使用 uri.parse）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T14:54:24.293

我不太明白，但我认为这就是你需要的......

[在 Android 中打开网页的四种不同方式](http://mgmblog.com/2009/01/06/four-different-ways-of-opening-a-web-page-in-android/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:54:38.660

正如 Ercan 所说，这就是它的完成方式：

```
String url = "http://www.example.com";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

在 Activity 的 onCreate 方法上执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-24T06:32:47.597

在 onCreate() 中添加代码

```
 webView.setWebViewClient(new WebViewClient());    //the lines of code added
    webView.setWebChromeClient(new WebChromeClient()); //same as above
    webView.getSettings().setJavaScriptEnabled(true);
  webView.canGoBack();

    webView.loadUrl("your url");

    final ProgressDialog progressBar = new ProgressDialog(getActivity());
    progressBar.setMessage("Please wait...");

    webView.setWebViewClient(new WebViewClient() {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }

        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            super.onPageStarted(view, url, favicon);
            if (!progressBar.isShowing()) {
                progressBar.show();
            }
        }

        public void onPageFinished(WebView view, String url) {
            if (progressBar.isShowing()) {
                progressBar.dismiss();
            }
        }

        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            if (progressBar.isShowing()) {
                progressBar.dismiss();
            }
        }
    });

    //To handle Webpage back in fragment
    webView.setOnKeyListener(new View.OnKeyListener() {

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (keyCode == KeyEvent.KEYCODE_BACK
                    && event.getAction() == MotionEvent.ACTION_UP
                    && webView.canGoBack()) {
                webView.goBack();
                return true;
            }
            return false;
        }
    }); 
```

在xml中添加webview：

```
<WebView
    android:id="@+id/webView"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

# android - 摩托罗拉 Droid 线上的 Android 服务失败

> ID：13725773
> 
> 赞同：0
> 
> 时间：2012-12-05T14:47:03.200
> 
> 标签：android, motorola-droid

我有一个解析大型 xml 文件并将数据存储在 sqlite 数据库中的 Android 服务。这种架构运行没有太多问题，但最近在几款不同型号的摩托罗拉手机上出现了问题。

这是错误：

```
 12-05 08:41:23.708: I/SqliteDatabaseCpp(19152): sqlite returned: error code = 14, msg = cannot open file at line 27360 of [8609a15dfa], db=/data/data/com.dsndata.sds2mobile.status.activities/databases/jobs.db
12-05 08:41:23.708: I/SqliteDatabaseCpp(19152): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27360 - "" errno=24 path=/data/data/com.dsndata.sds2mobile.status.activities/databases, db=/data/data/com.dsndata.sds2mobile.status.activities/databases/jobs.db
12-05 08:41:23.708: I/SqliteDatabaseCpp(19152): sqlite returned: error code = 14, msg = statement aborts at 28: [INSERT INTO JOBNAMETechnip_All_x_x_x_x_units_submaterial(Main,Description,Grade,Weight,Piecemark,Length,Finish,MaterialType,MemberGuid,ManufacturingGUID) VALUES (?,?,?,?,?,?,?,?,?,?)] , db=/data/data/com.dsndata.sds2mobile.status.activities/databases/jobs.db
12-05 08:41:23.802: E/SQLiteDatabase(19152): Error inserting Main=0 Description=FB11GAx1 Grade=310SS Weight=0.481653435459 Piecemark=FB63 Length=14.3125 Finish=None MaterialType=Flat bar MemberGuid=1f3e95c0-7289-4132-9218-296fcfcbcaad ManufacturingGUID=55d0399a-782d-476d-8619-5612c466905c
12-05 08:41:23.802: E/SQLiteDatabase(19152): android.database.sqlite.SQLiteCantOpenDatabaseException: error code 14: unable to open database file
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:113)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1827)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1700)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at com.dsndata.sds2mobile.provider.JobProvider.insert(JobProvider.java:164)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.content.ContentProvider$Transport.insert(ContentProvider.java:189)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at android.content.ContentResolver.insert(ContentResolver.java:730)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at com.dsndata.sds2mobile.xml.MobileParser.endElement(MobileParser.java:494)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.xml.sax.helpers.XMLReaderAdapter.endElement(XMLReaderAdapter.java:353)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:156)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatParser.appendChars(Native Method)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:497)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:484)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:309)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:267)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at org.xml.sax.helpers.XMLReaderAdapter.parse(XMLReaderAdapter.java:223)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at javax.xml.parsers.SAXParser.parse(SAXParser.java:359)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at com.dsndata.sds2mobile.xml.MobileParser.parse(MobileParser.java:172)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at com.dsndata.sds2mobile.xml.MobileParser.parse(MobileParser.java:144)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at com.dsndata.sds2mobile.services.ImportService$ServiceWorker.run(ImportService.java:58)
12-05 08:41:23.802: E/SQLiteDatabase(19152):    at java.lang.Thread.run(Thread.java:856)
12-05 08:41:23.802: W/System.err(19152): android.database.SQLException: Failed to insert row into content://com.dsndata.sds2mobile.jobprovider/JOBNAMETechnip_All_x_x_x_x_units/submaterial/55d0399a-782d-476d-8619-5612c466905c
12-05 08:41:23.802: W/System.err(19152):    at com.dsndata.sds2mobile.provider.JobProvider.insert(JobProvider.java:187)
12-05 08:41:23.802: W/System.err(19152):    at android.content.ContentProvider$Transport.insert(ContentProvider.java:189)
12-05 08:41:23.809: W/System.err(19152):    at android.content.ContentResolver.insert(ContentResolver.java:730)
12-05 08:41:23.809: W/System.err(19152):    at com.dsndata.sds2mobile.xml.MobileParser.endElement(MobileParser.java:494)
12-05 08:41:23.809: W/System.err(19152):    at org.xml.sax.helpers.XMLReaderAdapter.endElement(XMLReaderAdapter.java:353)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatParser.endElement(ExpatParser.java:156)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatParser.appendChars(Native Method)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatParser.parseFragment(ExpatParser.java:497)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatParser.parseDocument(ExpatParser.java:484)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:309)
12-05 08:41:23.809: W/System.err(19152):    at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:267)
12-05 08:41:23.809: W/System.err(19152):    at org.xml.sax.helpers.XMLReaderAdapter.parse(XMLReaderAdapter.java:223)
12-05 08:41:23.809: W/System.err(19152):    at javax.xml.parsers.SAXParser.parse(SAXParser.java:359)
12-05 08:41:23.809: W/System.err(19152):    at com.dsndata.sds2mobile.xml.MobileParser.parse(MobileParser.java:172)
12-05 08:41:23.809: W/System.err(19152):    at com.dsndata.sds2mobile.xml.MobileParser.parse(MobileParser.java:144)
12-05 08:41:23.809: W/System.err(19152):    at com.dsndata.sds2mobile.services.ImportService$ServiceWorker.run(ImportService.java:58)
12-05 08:41:23.817: W/System.err(19152):    at java.lang.Thread.run(Thread.java:856) 
```

最奇怪的部分是 xml 解析和存储工作到一定程度，然后失败并出现错误 14。

此外，此消息有许多日志：

```
2-05 08:39:15.700: D/ActivityThread(19152): Loading provider com.dsndata.sds2mobile.jobprovider: com.dsndata.sds2mobile.provider.JobProvider 
```

这不会出现在其他品牌的设备上。

我问了谷歌，没有发现任何有用的东西。有没有其他人有这个问题？或者至少有类似的东西可以为我指明正确的方向？

# c# - Exchange Web 服务 API：获取邮件附件

> ID：13725774
> 
> 赞同：8
> 
> 时间：2012-12-05T14:47:04.010
> 
> 标签：c#, .net, exchange-server

我正在使用 EWS API 1.2 访问我们 Exchange Server 上的邮箱。这很好用，但有一件事我无法实现：获取邮件附件。

我写了以下几行：

```
class Program
{
    public static void Main(string[] args)
    {
        try {
            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);
            service.Credentials = new WebCredentials("login","password");
            service.AutodiscoverUrl("mail@domaine.fr");

            ItemView view = new ItemView(10);
            FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, new ItemView(10));

            if (findResults != null && findResults.Items != null && findResults.Items.Count > 0)
                foreach (Item item in findResults.Items)
                {
                    if (item.Attachments != null)
                    {
                        IEnumerator<Attachment> e = item.Attachments.GetEnumerator();
                    }   
                    Console.WriteLine(item.Subject);
                }
            else
                Console.WriteLine("no items");
        } 
        catch (Exception e) {
            Console.WriteLine(e.Message);
        }
        Console.ReadLine();
    }
} 
```

我收到了测试邮箱中的所有邮件，但`IEnumerator<Attachment> e = item.Attachments.GetEnumerator();`似乎没有“看到”附件。

你知道我错过了什么吗？

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-06T11:13:50.887

我终于设法获得电子邮件附件。我修改了我的代码如下

```
class Program
{
    public static void Main(string[] args)
    {
        try {
            ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);
            service.Credentials = new WebCredentials("login","pwd");
            service.AutodiscoverUrl("mail@domaine.com");

            ItemView view = new ItemView(10);
            FindItemsResults<Item> findResults = service.FindItems(WellKnownFolderName.Inbox, new ItemView(10));

            if (findResults != null && findResults.Items != null && findResults.Items.Count > 0)
                foreach (Item item in findResults.Items)
                {
                    EmailMessage message = EmailMessage.Bind(service, item.Id, new PropertySet(BasePropertySet.IdOnly, ItemSchema.Attachments, ItemSchema.HasAttachments));
                    foreach (Attachment attachment in message.Attachments)
                    {
                        if (attachment is FileAttachment)
                        {
                            FileAttachment fileAttachment = attachment as FileAttachment;
                            fileAttachment.Load();
                            Console.WriteLine("Attachment name: " + fileAttachment.Name);
                        }
                    }
                    Console.WriteLine(item.Subject);
                }
            else
                Console.WriteLine("no items");
        } catch (Exception e) {

            Console.WriteLine(e.Message);
        }
        Console.ReadLine();
    }
} 
```

# maven - 如何从插件管理更改 Maven War 插件的配置？

> ID：13725778
> 
> 赞同：3
> 
> 时间：2012-12-05T14:47:14.647
> 
> 标签：maven, maven-plugin, war

我试图弄清楚如何从父 poms 插件管理中配置 maven war 插件。下面是两个示例 pom。这样子项目的战争是使用附加到战争名称末尾的版本创建的，尽管我试图仅使用 artifactId 创建战争。

如果我将配置元素复制到子 pom 中，那么将按预期仅使用 artifactId 创建战争。

那么，我在这里缺少什么？我以为插件管理部分只是为了这种东西？

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>deneme</groupId>
<artifactId>parent</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>pom</packaging>

<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <warName>${project.artifactId}</warName>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>
<artifactId>child</artifactId>
<packaging>war</packaging>
<version>0.0.1-SNAPSHOT</version>
<name>child Maven Webapp</name>
<url>http://maven.apache.org</url>

<parent>
    <groupId>deneme</groupId>
    <artifactId>parent</artifactId>
    <version>0.0.1-SNAPSHOT</version>
</parent>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
        </plugin>
    </plugins>
</build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:04:48.297

如果需要更改`war`maven创建的最终文件的名称，则需要在like中使用`finalName`tag 。`build`

```
<build>
    <directory>target</directory>
    <outputDirectory>target/classes</outputDirectory>
    <finalName>${artifactId}-${version}</finalName>
    <testOutputDirectory>target/test-classes</testOutputDirectory>
    <sourceDirectory>src/main/java</sourceDirectory>
    ....
</build> 
```

[检查这个 Maven 参考页面](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

# sql - 当我想更改表中的列数据类型时，是否存在自动转换数据的 ORM / 框架？

> ID：13725781
> 
> 赞同：4
> 
> 时间：2012-12-05T14:47:26.457
> 
> 标签：sql, orm, data-conversion, object-relational-model, application-framework

假设我有现有数据库和现有数据。

当我需要更改列数据类型时，是否有任何框架/ORM 可以生成数据转换 SQL 脚本？当然，像这样的转换存在问题

*   浮动到 int
*   字符串到整数

，但我希望有这样的默认功能，可以自动将数据从

*   int 浮动
*   int 为字符串。

在这两种情况下我都必须编写数据 SQL 数据转换脚本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T22:25:09.943

在 .Net 世界中，我对[LLBLGen Pro](http://www.llblgen.com/)有很好的体验。它支持生成 DDL 脚本以将底层数据库迁移到更新的实体定义。这里是[快速入门指南，它显示了它是如何工作的概述](http://www.llblgen.com/documentation/3.5/QuickStartGuides/mf_updatescripts.htm)，这里是[模型优先设计过程的文档部分](http://www.llblgen.com/documentation/3.5/Designer/hh_start.htm#How%20To/WorkModelFirst.htm)

您可以将它与自己的运行时框架一起使用，也可以简单地用作 Entity Framework、NHibernate 或 Linq to SQL 的设计工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:52:58.463

SauceDB 是用 .NET 编写的，当您更改访问对象的数据类型时，它能够进行自动模式修改。

[http://sauce.codeplex.com](http://sauce.codeplex.com)

免责声明：我写的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T09:49:29.237

[例如](http://nuget.org/packages/entityframework.migrations)EntityFramework.Migrations 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-17T13:44:23.187

另一个竞争对手：[推进迁移](http://propelorm.org/documentation/10-migrations.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T13:42:13.610

[教义迁移](http://docs.doctrine-project.org/projects/doctrine-migrations/en/latest/reference/generating_migrations.html)呢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-18T07:36:08.460

我会推荐[DataObjects.Net](http://dataobjects.net/)。

[当我们向模型添加新的类和属性时，自动升级](http://help.dataobjects.net/?__utma=1.1049005815.1355815191.1355815191.1355815191.1&__utmb=1.1.10.1355815191&__utmc=1&__utmx=-&__utmz=1.1355815191.1.1.utmcsr=%28direct%29%7Cutmccn=%28direct%29%7Cutmcmd=%28none%29&__utmv=-&__utmk=85915289##DataObjects.Net%20v4.5/html/364f669c-231b-455c-b64f-92179bf5ebad.htm)可以工作，但有时需要执行一些特定的模式修改，例如重命名属性或类，在这种情况下，您可以编写[升级处理程序](http://help.dataobjects.net/?__utma=1.1049005815.1355815191.1355815191.1355815191.1&__utmb=1.1.10.1355815191&__utmc=1&__utmx=-&__utmz=1.1355815191.1.1.utmcsr=%28direct%29%7Cutmccn=%28direct%29%7Cutmcmd=%28none%29&__utmv=-&__utmk=85915289##DataObjects.Net%20v4.5/html/34aeb6cd-61e8-4db2-88f8-1eff2031f103.htm)（RenameFieldHint、RemoveFieldHint 等）

# ruby-on-rails - 我想使用 Rails 在搜索结果中插入标记

> ID：13725783
> 
> 赞同：0
> 
> 时间：2012-12-05T14:47:32.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, sphinx, ads

我在寻求建议。这就是我想要做的。

我正在使用带有 Thinking Sphinx 的 Rails 来搜索我的图书数据库。有点像这样：

```
results = Books.search 'blabla' :where => {:author => author_id} 
```

哪个工作正常并返回给我一系列结果。然后，我循环遍历每个结果并在漂亮的网格中显示书籍信息。可爱的七月。

但是，因为我最终希望我的网站赚钱，所以我在这个网站上销售广告，理想情况下，我希望广告与结果位于同一网格内，在说每 5 个结果之后我想显示一个广告。

我已经绞尽脑汁，但想不出一个简单的方法来做到这一点。所以我想我会问你聪明的人。

欢迎任何建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:51:24.833

在您看来，您可以`elements.each_slice(4) do | batch |`在结果集上使用它来分解它。

前任：

```
elements.each_slice(4) do | batch |
    batch.each do |b|
        #print out the first batch
        #then print out your ad or whatever it is you want
    end
end 
```

# windows-phone-7 - 导航到“编码的 PhoneApplicationPage”

> ID：13725788
> 
> 赞同：0
> 
> 时间：2012-12-05T14:47:40.393
> 
> 标签：windows-phone-7, windows-phone-8

我现在有点困惑。如何导航到没有绑定***.xaml的****PhoneApplicationPage 。**我什至不知道我应该搜索什么来找到解决方案。也许是脑残。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:52:02.487

尝试这个 ： `Me.NavigationService.Navigate(New Uri("PhoneApplicationPage",Urikind.Relative))`

但是怎么可能没有 .xaml 呢？**

# php - 在支持 Facebook 的 PHP 网站上使用 Ajax 会导致 API 191 错误

> ID：13725789
> 
> 赞同：0
> 
> 时间：2012-12-05T14:47:39.733
> 
> 标签：php, ajax, facebook

好的，所以我有一个网站的 App ID 和密码。

当我设置它时，我必须指定一个 URL。

这指向 PHP 主页面（我们称之为 main.php），它使用 PHP SDK 与 facebook 交互。

但是，我想使用 Ajax 调用另一个 PHP 文件（我们称之为 process.php）来处理数据并更新流。

现在，我可以为 process.php 创建另一个 facebook 应用程序，它有自己的 id 和秘密，但这会很麻烦，你必须单独授予它 facebook 权限等。

但是，如果我使用我在 main.php 中使用的应用程序 ID 和密码，我会收到以下消息：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application
Error Message: Invalid redirect_uri: Given URL is not allowed by the Application
configuration. 
```

我确信一定有办法做到这一点，但我无法终生看到它是什么。

# excel - 用于在 IE 和 Firefox 中使用 Excel 打开 CSV 文件的 MIME 类型/内容类型

> ID：13725795
> 
> 赞同：3
> 
> 时间：2012-12-05T14:47:55.780
> 
> 标签：excel, csv, solr

我在让 CSV 输出被识别并在 Excel 中打开时遇到问题。在我的 Web 应用程序中，我有一个 java servlet，它将搜索结果返回给用户。搜索结果由 Apache Solr 服务器提供。GUI 前端有一个选项，允许用户以“CSV”格式请求搜索结果。如果选择此选项，则通过添加“wt=csv”参数对 Solr 重新运行查询。然后 java 过滤器添加标题以将结果作为 CSV 格式文本返回。但它不能正常工作。

*   在 IE（8.0 版）中，系统会提示我“打开”或“保存”文件。如果我选择“打开”；它只是在屏幕上转储 CSV 格式的文本，而不是在 Excel 中打开它。如果我选择“保存”；我收到一条错误消息 - “无法打开此 Internet 站点。请求的站点不可用或找不到。”</li>
*   在 Firefox (ver 10.0.9) 中；系统提示我打开或保存文件。但是对于打开 CSV 文件；默认选项是记事本，甚至没有列出 Excel。如果我单击“保存”，它会下载 CSV 文件，我可以在 Excel 中打开它，并且它可以被 Excel 正确识别。

我尝试了各种标题和组合 –</p>

```
 //((HttpServletResponse)response).setHeader("Content-Type", "application/octet; charset=utf-8");
  ((HttpServletResponse)response).setHeader("Content-Type", "text/csv");
  //((HttpServletResponse)response).setHeader("Content-Type", "application/vnd.ms-excel");
  //((HttpServletResponse)response).setHeader("Cache-Control", "private, private,max-age=0,must-revalidate");
  //((HttpServletResponse)response).setHeader("Content-Encoding", "gzip");
  //((HttpServletResponse)response).setHeader("Content-Encoding", "binary");
  ((HttpServletResponse)response).setHeader("Content-Disposition", "attachment; filename=Download.CSV");
  //((HttpServletResponse)response).setHeader("Content-Disposition", "inline; filename=Download.CSV;"); 
```

但他们似乎都没有工作。我使用 Firefox 检查发回的标头，我看到以下内容 -</p>

内容处置：附件；文件名=下载.CSV

内容类型：文本/纯文本；字符集=UTF-8

服务器：码头（7.xy-SNAPSHOT）

传输编码：分块

变化：接受编码

即使 content-type 被指定为 csv 或 excel；当它到达浏览器时，它被解释为文本/纯文本，我认为这就是问题所在。不确定我应该设置什么标头或编码？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T19:27:46.233

我正在做类似的事情，这是我正在使用的代码的一部分：

```
 Date dt = new Date();
    SimpleDateFormat fmt = new SimpleDateFormat("yyyy-MM-dd_HHmmss");
    String filename = fmt.format(dt) + ".csv";
    //Setup the output
    String contentType = "application/vnd.ms-excel";
    FacesContext fc = FacesContext.getCurrentInstance();
    HttpServletResponse response = (HttpServletResponse)fc.getExternalContext().getResponse();
    response.setHeader("Content-disposition","attachment; filename=" + filename);
    response.setContentType(contentType); 
```

请注意，我使用变量“contentType”来告诉 servlet 将生成哪种文件。

希望对你有效。

# django - 如何使用迭代器在 django 中构建查询？

> ID：13725797
> 
> 赞同：0
> 
> 时间：2012-12-05T14:48:05.717
> 
> 标签：django, django-queryset

如何使用迭代器在 django 中构建复杂的查询？实际上，我觉得这可能比 django 更像是“基本的 python”，但这让我很难过。

本质上，我想获取一个列表对象并生成与之等效的对象：

```
SELECT FROM examples WHERE mystuff LIKE 'EX1' OR mystuff LIKE 'EX2'; 
```

这是我尝试的一些示例代码。

```
from example.models import Examples
from django.db.models import Q

includes = ['EX1', 'EX2']

conditions = []
# I can do something like this, which does build a list of objects
for ex in excludes:
    conditions.append(~Q(fullblock_icontains='%s' % ex))

# print conditions
# [<django.db.models.query_utils.Q object at 0x03557AB0>, 
# <django.db.models.query_utils.Q object at 0x03557AD0>]

# then I need to do something like this, but obviously this won't work.
blocks = Examples.objects.filter('|'.split(conditions)) 
```

另外，我想做同样的事情，但消极（~Q）。我想一旦我们计算出 LIKE，NOT LIKE 就会变得明显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:21:32.143

```
import operator
qobjects = [ ~Q(...), Q(...), Q(...) ]
f = reduce(operator.or_, qobjects)
Examples.objects.filter(*f) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:21:58.493

检查[文档以生成 OR 子句](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)

要将`Q`s 链接在一起，请尝试`operator.or_`

```
import operator
blocks = Examples.objects.filter(reduce(operator.or_, conditions))
# which works as
blocks = Examples.objects.filter(conditions[0]|conditions[1]|...) 
```

# c - 从双精度参数开始的 80 位扩展精度计算的属性

> ID：13725802
> 
> 赞同：11
> 
> 时间：2012-12-05T14:48:26.997
> 
> 标签：c, floating-point, ieee-754, extended-precision

这是插值函数的两种实现。参数`u1`总是在`0.`和之间`1.`。

```
#include <stdio.h>

double interpol_64(double u1, double u2, double u3)
{ 
  return u2 * (1.0 - u1) + u1 * u3;  
}

double interpol_80(double u1, double u2, double u3)
{ 
  return u2 * (1.0 - (long double)u1) + u1 * (long double)u3;  
}

int main()
{
  double y64,y80,u1,u2,u3;
  u1 = 0.025;
  u2 = 0.195;
  u3 = 0.195;
  y64 = interpol_64(u1, u2, u3);
  y80 = interpol_80(u1, u2, u3);
  printf("u2: %a\ny64:%a\ny80:%a\n", u2, y64, y80);
} 
```

在具有 80 位`long double`的严格 IEEE 754 平台上，所有计算`interpol_64()`都根据 IEEE 754 双精度和`interpol_80()`80 位扩展精度进行。程序打印：

```
u2: 0x1.8f5c28f5c28f6p-3
y64:0x1.8f5c28f5c28f5p-3
y80:0x1.8f5c28f5c28f6p-3 
```

我对“函数返回的结果总是介于`u2`和`u3`”的属性感兴趣。此属性为 false `interpol_64()`，如`main()`上面的值所示。

房产有机会成真`interpol_80()`吗？如果不是，反例是什么？如果我们知道这一点`u2 != u3`或它们之间有最小距离是否有帮助？是否有一种方法可以确定中间计算的有效宽度，在该计算中该属性可以保证为真？

**编辑：**在我尝试的所有随机值上，当中间计算在内部以扩展精度完成时，该属性保持不变。如果`interpol_80()`带`long double`参数，构建反例相对容易，但这里的问题专门针对带`double`参数的函数。这使得建立一个反例变得更加困难，如果有的话。

* * *

注意：生成 x87 指令的编译器可能会为`interpol_64()`and生成相同的代码`interpol_80()`，但这与我的问题无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T21:24:55.813

是的，interpol_80() 是安全的，我们来演示一下。

问题指出输入是 64 位浮点数

```
rnd64(ui) = ui 
```

结果就是（假设 * 和 + 是数学运算）

```
r = u2*(1-u1)+(u1*u3) 
```

四舍五入到 64 位浮点数的最佳返回值是

```
r64 = rnd64(r) 
```

因为我们有这些属性

```
u2 <= r <= u3 
```

保证

```
rnd64(u2) <= rnd64(r) <= rnd64(u3)
u2 <= r64 <= u3 
```

转换为 80 位的 u1,u2,u3 也是准确的。

```
rnd80(ui)=ui 
```

现在，让我们假设`0 <= u2 <= u3`，然后执行不精确的浮点运算会导致最多 4 个舍入错误：

```
rf = rnd(rnd(u2*rnd(1-u1)) + rnd(u1*u3)) 
```

假设四舍五入到最接近的偶数，这将最多与精确值相差 2 ULP。如果使用 64 位浮点数或 80 位浮点数进行舍入：

```
r - 2 ulp64(r) <= rf64 <= r + 2 ulp64(r)
r - 2 ulp80(r) <= rf80 <= r + 2 ulp80(r) 
```

`rf64`可以关闭 2 ulp 所以 interpol-64() 是不安全的，但是呢`rnd64( rf80 )`？
我们可以这样说：

```
rnd64(r - 2 ulp80(r)) <= rnd64(rf80) <= rnd64(r + 2 ulp80(r)) 
```

既然`0 <= u2 <= u3`，那么

```
ulp80(u2) <= ulp80(r) <= ulp80(r3)
rnd64(u2 - 2 ulp80(u2)) <= rnd64(r - 2 ulp80(r)) <= rnd64(rf80)
rnd64(u3 + 2 ulp80(u3)) >= rnd64(r + 2 ulp80(r)) >= rnd64(rf80) 
```

幸运的是，就像`(u2-ulp64(u2)/2 , u2+ulp64(u2)/2)`我们得到的范围内的每个数字一样

```
rnd64(u2 - 2 ulp80(u2)) = u2
rnd64(u3 + 2 ulp80(u3)) = u3 
```

自从`ulp80(x)=ulp62(x)/2^(64-53)`

我们由此得到证明

```
u2 <= rnd64(rf80) <= u3 
```

对于 u2 <= u3 <= 0，我们可以轻松地应用相同的证明。

最后要研究的情况是 u2 <= 0 <= u3。如果我们减去 2 个大值，那么结果可以达到 ulp(big)/2 off 而不是 ulp(big-big)/2...
因此我们所做的这个断言不再成立：

```
r - 2 ulp64(r) <= rf64 <= r + 2 ulp64(r) 
```

幸运的是，`u2 <= u2*(1-u1) <= 0 <= u1*u3 <= u3`这是在四舍五入后保留的

```
u2 <= rnd(u2*rnd(1-u1)) <= 0 <= rnd(u1*u3) <= u3 
```

因此，由于添加量的符号相反：

```
u2 <= rnd(u2*rnd(1-u1)) + rnd(u1*u3) <= u3 
```

四舍五入后也是如此，所以我们可以再次保证

```
u2 <= rnd64( rf80 ) <= u3 
```

量子点

为了完整起见，我们应该关注非正规输入（逐渐下溢），但我希望你不会对压力测试那么恶毒。我不会演示这些会发生什么...

**编辑**：

这是一个后续，因为以下断言有点近似，并且在 0 <= u2 <= u3 时生成了一些注释

```
r - 2 ulp80(r) <= rf80 <= r + 2 ulp80(r) 
```

我们可以写出以下不等式：

```
rnd(1-u1) <= 1
rnd(1-u1) <= 1-u1+ulp(1)/4
u2*rnd(1-u1) <= u2 <= r
u2*rnd(1-u1) <= u2*(1-u1)+u2*ulp(1)/4
u2*ulp(1) < 2*ulp(u2) <= 2*ulp(r)
u2*rnd(1-u1) < u2*(1-u1)+ulp(r)/2 
```

对于下一次舍入操作，我们使用

```
ulp(u2*rnd(1-u1)) <= ulp(r)
rnd(u2*rnd(1-u1)) < u2*(1-u1)+ulp(r)/2 + ulp(u2*rnd(1-u1))/2
rnd(u2*rnd(1-u1)) < u2*(1-u1)+ulp(r)/2 + ulp(r)/2
rnd(u2*rnd(1-u1)) < u2*(1-u1)+ulp(r) 
```

对于总和的第二部分，我们有：

```
u1*u3 <= r
rnd(u1*u3) <= u1*u3 + ulp(u1*u3)/2
rnd(u1*u3) <= u1*u3 + ulp(r)/2

rnd(u2*rnd(1-u1))+rnd(u1*u3) < u2*(1-u1)+u1*u3 + 3*ulp(r)/2
rnd(rnd(u2*rnd(1-u1))+rnd(u1*u3)) < r + 3*ulp(r)/2 + ulp(r+3*ulp(r)/2)/2
ulp(r+3*ulp(r)/2) <= 2*ulp(r)
rnd(rnd(u2*rnd(1-u1))+rnd(u1*u3)) < r + 5*ulp(r)/2 
```

我没有证明最初的说法，但不是那么远......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:24:05.727

精度损失的主要来源`interpol_64`是乘法。将两个 53 位尾数相乘产生一个 105 位或 106 位（取决于高位是否携带）尾数。这对于 80 位扩展精度值来说太大了，因此通常在 80 位版本中也会出现精度损失。准确量化它何时发生是非常困难的；最容易说的是，当舍入误差累积时会发生这种情况。请注意，添加这两个术语时还有一个小的舍入步骤。

大多数人可能会使用以下功能解决此问题：

```
double interpol_64(double u1, double u2, double u3)
{ 
  return u2 + u1 * (u3 - u2);
} 
```

但看起来您正在寻找对舍入问题的洞察力，而不是更好的实现。

# java - 这个同步的锁定顺序有效吗？

> ID：13725805
> 
> 赞同：0
> 
> 时间：2012-12-05T14:48:39.953
> 
> 标签：java, locking, deadlock, synchronized

我写了一个游戏，它有时会陷入僵局，在谷歌搜索问题后，似乎锁定顺序方法可能有效，所以我去这里确保它不会有问题。

最多有三个用户相互交互：A、B 和 C。

行动是攻击、夺回和救援

示例：A攻击B，B从A处夺回，A从C处救出B

每个用户都有一个唯一的 id

如果我在按其 id desc 或 asc 排序的用户对象上订购同步，则两个用户之间的交互似乎有效。但它会在救援行动中与三个用户一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:03:40.043

如果所有锁都以相同的顺序获取，您将不会出现死锁。所以只要“A从C救B”按A、B、C的顺序获得锁，“B从A救C”**也**按A、B、C的顺序获得锁，应该没问题。

# php - 在 php 中为 CSS 进度条编写一个简单的 for 循环

> ID：13725808
> 
> 赞同：0
> 
> 时间：2012-12-05T14:48:45.343
> 
> 标签：php, mysql, css, loops, progress-bar

我的 mysql 数据库中有一个项目状态。根据状态，它是 1、2 或 3。我还有一个 CSS 状态栏，我可以设置它的宽度，以查看进度。

这是示例代码：

```
<td>" . $projstatid ."
    <div class='meter-wrap'>
        <div class='meter-value' style='background-color: #0a0; width: 33,3%;'>
            <div class='meter-text'></div>
            </div>
    </div>
</td> 
```

现在我可以按宽度大小做 3 个 if 语句，例如：

`if ($projstatid) = 1 { echo "33.3%"; } elseif {..} else {...}`

但是我如何编写一个简单的循环，循环遍历数字直到它达到`$projstatid`'s 的值，但每次重新循环都会增加 33.3%？

如果循环将循环的时间量除以 projstatid 的最大量，那就更好了。但是我会弄清楚，一旦我有这个基本循环工作。

**编辑**

我想要做的是创建一个循环来执行此操作：

```
x=1
y=0
$projectstatid = $record['projectstatid'] (in this example lets say it's 5)

loop: x=1, is it 5? Nope. return: y= +20%
loop: x=2, is it 5? Nope. return: y= +20%
etc. 
```

直到它达到 5（它将返回 100%）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:52:06.783

您可以执行以下操作来计算与当前值相对应的百分比：

```
$percent = floor($number * 100 / $nbmax); 
```

这`$percent`是放入您的 css 的值，`$number`是您当前的状态，`$nbmax`是它可能拥有的最大值。

在您的情况下，您将拥有：

```
$number  = $record['projstatid'];
$nbmax = 3;
$percent = floor($number * 100 / $nbmax); 
```

**编辑**：根据您的编辑，我猜您想要这样的东西：

```
$number = 5;
for($i = 1 ; $i < $number; $i++) {
    $percent = floor($i * 100 / $number);
    echo $percent;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:09:40.233

而不是递增`$x`until `$x == $projectstatid`，您可以使用 a `switch`（这是一种循环）：

```
switch ($projectstatid)
{
    case 1:
        $y = '20%';
    break;
    case 2:
        $y = '40%';
    break;
    //etc, until the max is reached, in which case:
    default:
        $y = '100%';
} 
```

有关该声明的所有信息，请参阅[文档。](http://www.php.net/manual/en/control-structures.switch.php) 此外，如果 this:是您的代码的样子，那么它不断 echo-ing 也就不足为奇了，因为它是赋值运算符，并且分配给变量几乎总是返回 true。此外，你的括号不在它们应该在的位置，它应该是这样的：`switch`
`if ($projstatid) = 1 { echo "33.3%"; } elseif {..} else {...}``33%``=`

```
if ($projstatid == 1)
{
    echo "33.3%";
}
else if ($projstatid == 2)
{..}
else {...} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:07:12.037

```
<?php $meter_val = 0; ?>
<?php if ($projstatid <= 5) $meter_val = ($projstatid * 20);
<td>" . $projstatid ."
 <div class='meter-wrap'>
  <div class='meter-value' style='background-color: #0a0; width: <?php echo $meter_val; ?>%;'>
    <div class='meter-text'></div>
  </div>
 </div>
</td> 
```

# javascript - 特定计算机上的 Ajax 状态未达到 200

> ID：13725809
> 
> 赞同：-1
> 
> 时间：2012-12-05T14:48:48.910
> 
> 标签：javascript, ajax

我有一个正在构建的 Web 应用程序，我认为这是一个简单的`Ajax`功能。该应用程序在办公室的五分之四的计算机上运行良好，但一台计算机的状态达到 200 时出现问题。这也不是浏览器特定的问题。他在所有四个浏览器上都尝试了该应用程序，以及相同的`IE`问题。`Chrome``Firefox``Safari`

在产品投入全面生产之前，这是我们真正必须弄清楚并纠正的事情。在那之后，我们不能到处纠正客户的计算机或试图向客户解释是他们的计算机出了问题。

那么有什么想法吗？

笔记：

1.  `Ajax`函数、查询脚本`PHP`和数据库都在同一台服务器上。
2.  他的电脑在 Pavilion DV7 电脑上运行 Windows 7

代码：

```
// Pull the information from the database
get_variables = 'action=grabUnitInformation'+
'&identifier='+identifier;

var xmlhttp;
if (window.XMLHttpRequest){
// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}else{
// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}

xmlhttp.onreadystatechange=function(){
if (xmlhttp.readyState==4 && xmlhttp.status==200){
    var receiver = eval('(' + xmlhttp.responseText + ')');

    // Process JSON
    alert("Got the info");
}else{
    alert("Ready state: "+xmlhttp.readyState);
    alert("Status: "+xmlhttp.status);
}
}

xmlhttp.open("GET", "http://www.mysite.com/search.php?"+get_variables, true);
xmlhttp.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:20:26.463

好的，我找到了让它工作的方法。

带有`Ajax`脚本的页面、被查询的`PHP`脚本和数据库都在同一台服务器上。所以..........

而不是绝对 URL：

```
xmlhttp.open("GET", "http://www.mysite.com/search.php?"+get_variables, true); 
```

我将其更改为相对 URL：

```
xmlhttp.open("GET", "search.php?"+get_variables, true); 
```

现在很好。可能不是最好的方法，但我还没有找到任何其他答案或帮助。

# jquery - 使用 jquery 删除 css :hover 属性

> ID：13725811
> 
> 赞同：18
> 
> 时间：2012-12-05T14:48:56.053
> 
> 标签：jquery

可以说我有

```
<style>
    #container:hover{background:red}
</style>
<div id="container"><input type="submit"></div> 
```

当我将鼠标悬停在提交上时，`#container`仍然是红色的。我可以用jquery删除：鼠标悬停在输入鼠标上吗？我不想改变 bg `$('#container').css('backgroundColor','color')`，我需要类似的东西 `$('#container').removeAttr('hover')`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T14:51:43.127

不幸的是，用 jQuery 管理 CSS 伪类是不可能的。

我建议您操作类，如下所示：

```
<style>
    .red:hover{background:red}
</style>

<div id="container" class="red"><input type="submit"></div>

<script>
    $("#container").removeClass("red");
</script> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T14:53:13.843

您不能删除伪类规则，但可以使用事件绑定覆盖它们：

```
$("#container").on('mouseover', function () {
   $(this).css('background', 'blue');
}).on('mouseout', function () {
   $(this).css('background', whateverItIsNormally);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-05T15:30:14.630

这可能有点复杂，当然可以使用优化，但您可以使用到目前为止发布的内容的组合：

jsFiddle：http: [//jsfiddle.net/psyon001/Vcnvz/2/](http://jsfiddle.net/psyon001/Vcnvz/2/)

```
<style>
    .red{background:red;}
</style>

<div id="container"><input type="submit"></div>

<script>
$('#container').on({
    'mouseenter' : function(){
        $(this).addClass('red');
    },
    'mouseleave' : function(){
        $(this).removeClass('red');
    }
});
$('#container').find('input').on({
    'mouseenter' : function(){
        $('#container').removeClass('red');
    },
    'mouseleave' : function(){
        $('#container').addClass('red');
    }
})
</script> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-14T15:03:01.783

根据您的浏览器指针事件：无可能有帮助

[https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-08T11:37:49.307

我们可以在 css 和 Jquery 的帮助下覆盖 CSS 悬停效果

```
$('div').hover(function(){ $(this).addClass('nohover');})

In CSS Add Class .nohover
.nohover {
pointer-events:none;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-15T00:57:21.880

我应用了这个：

```
element.click(function(){
  element.hover(
    function(){
     element.css('background-color', '');
     element.css('color', '');
  },
    function(){
     element.css('background-color', '');
     element.css('color', '');
  });
}); 
```

它似乎可以在保留原始 CSS 的同时删除悬停属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-30T11:04:53.063

我认为这更好

```
<style>
    .red:hover { background-color:red; }
</style>
<!-- by default is On-->
<div class="box red"></div>
<script>
    $('.box').click(function(){
        $(this).toggleClass('red');
    });
</script> 
```

# javascript - jQuery - 包装文本元素的特定部分

> ID：13725813
> 
> 赞同：1
> 
> 时间：2012-12-05T14:49:03.143
> 
> 标签：javascript, jquery, selector

这是我的 HTML 示例：

```
<td class="prod ">
  ACTIVE_server
  <br/> inactivename_1
  <br/> inactivename_2
  <br/> inactivename_3
  <br/>
</td>
```

我只想用专用跨度包装非活动数据。像这样的东西：

```
<td class="prod ">
  ACTIVE_server
  <br/>
  <span class="inactive">
           inactivename_1
           <br/>
           inactivename_2
           <br/>
           inactivename_3
           <br/>
       </span>
</td>
```

我已经尝试了一些这样的事情：

```
$('td[class*="prod"]>br').after('<span id="inactiveServer">');

$('td[class*="prod"]>br').wrap('<span id="inactiveServer">');

$('td[class*="prod"]>br').nextUntil('<br>').wrapAll('<span class="inactiveServer">');
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<td class="prod ">
  ACTIVE_server
  <br/> inactivename_1
  <br/> inactivename_2
  <br/> inactivename_3
  <br/>
</td>
```

但不幸的是，它根本不起作用。如何让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:59:17.357

您可以使用`contents`and`filter`方法：

```
$('td.prod').contents().filter(function(i){
    if (i > 1) return this
}).wrapAll('<span class="inactiveServer"/>'); 
```

[http://jsfiddle.net/YuZUp/](http://jsfiddle.net/YuZUp/)

正如@wirey 正确建议的那样，您也可以使用该`slice`方法；

```
$('p.prod').contents().slice(1).wrapAll('<span class="inactiveServer"/>'); 
```

# java - 通过输入 XML 文件来调用 Rest ful Web 服务？

> ID：13725822
> 
> 赞同：0
> 
> 时间：2012-12-05T14:49:39.550
> 
> 标签：java, spring, spring-integration

我正在使用弹簧集成并具有以下代码。

```
 @ServiceActivator
    public void postHibuFeedToClosely(Message<Document> input) {

        Document payload = input.getPayload();

    } 
```

这里“输入”有有效载荷。有效负载有一个 XML。现在我需要将 XML 作为输入传递给完整的 web 服务。

终点是： `https://somthing.com/someLocation/status`

要求 ：`POST`

如何从有效负载中获取 xml 内容？我如何使用 jersey 调用其余的 web 服务？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:06:24.103

您可以为此使用 Spring Webservices。spring-integration-http 中有适配器，文档相当不错。文档有效负载将自动转换，您不需要为此做任何特殊的事情，只要您想按原样发送实际文档。

我想你应该从[这里开始。](https://github.com/SpringSource/spring-integration-samples/blob/master/basic/http/src/main/resources/META-INF/spring/integration/http-outbound-config.xml)

# iphone - OpenGL ES 2.0 矩阵堆栈替换

> ID：13725823
> 
> 赞同：1
> 
> 时间：2012-12-05T14:49:40.440
> 
> 标签：iphone, opengl-es, matrix

我知道这已经涵盖了很多，但我保证这个是不同的。我正在制作一个必须支持 OpenGL ES 1.1 和 OpenGL ES 2.0 的应用程序，我想知道是否有一种在*OpenGL ES 1.1*中实现自定义矩阵堆栈的方法，它也适用于 2.0。如果没有，创建一个单独的上下文或其他东西并从中获取矩阵数据并将其放入 OpenGL ES 2.0 着色器是否有效？我的主要目标是能够为所有内容编写一个函数，而不是为每个版本的 OpenGL ES 编写每个函数的一个版本。

我通过为 OpenGL ES 编写一种包装器来解决这个问题，该包装器为 OpenGL ES 版本调用适当的东西，但我注意到 OpenGL ES 2.0 矩阵类（CC3GLMatrix，如此处使用[）](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)比传统的 OpenGL ES 1.1 矩阵堆栈，所以我想找到一种更有效的方法，或者干脆使用旧的矩阵堆栈。有什么想法/建议吗？

# php - 如何将一个或多个变量传递给 wordpress 上的永久链接

> ID：13725825
> 
> 赞同：1
> 
> 时间：2012-12-05T14:49:45.017
> 
> 标签：php, wordpress, permalinks

我有一个页面，我需要发送两个变量`'my_book_id'`和`'library_book_id'`.

在那个页面上，我会编写一些使用变量的代码。

我知道，由于 WordPress 页面不完全是 HTML 页面或 PHP 文件，因此我无法通过 URL 发送变量，然后将它们用于带有`$_GET['my_book_id']`.

我想实现这样的[东西](http://www.mysite.com/show_page?my_book_id=1&library_book_id=12)。我该怎么做？

我正在使用永久链接，并且我有`%postname%`定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:55:43.957

其实你可以使用

```
 $_GET['my_book_id'] 
```

您可以通过在页面/帖子模板中编码来获取变量，或者，

（好多了）通过创建一个插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:54:04.887

你可以简单地使用：

```
<?php echo get_permalink( $page_id ) . '?my_book_id=' . 1 . '&library_book_id=' . 12; ?> 
```

在建立链接的地方

# matlab - 在符号表达式中使用变量 - matlab

> ID：13725830
> 
> 赞同：1
> 
> 时间：2012-12-05T14:50:02.170
> 
> 标签：matlab, symbolic-math

如何在 Matlab 的符号变量中使用变量？

例如，我有以下代码：

```
function f = constr_fourier(vec);
dim=prod(size(vec));
n=(dim-1)/2;
a=@(k) vec(k+1);
b=@(k) vec(n+k-1);

f = @(x) subs(a,{k,0})/2 + symsum(subs(a,{k,i})*cos(i*x) + ...
subs(b,{k,i})*sin(i*x),i,1,n); 
```

在给定一个系数向量的情况下，我想在其中恢复傅里叶级数`vec`。我想将 vec 中的实际值替换为函数的符号表达式。我试过了，`subs`但它不起作用，或者我没有正确使用它。

这样做的正确方法是什么？

[编辑] 我试过

```
f = @(x) subs(a,k,0)/2 + symsum(subs(a,k,i)*cos(i*x) + ...
subs(b,{k,i})*sin(i*x),i,1,n); 
```

但结果是有`subs(...)`和没有的数值`a(k)`。

我也尝试了一个不同的变体，它给出了一个结果，但是以错误的方式......

```
function f = constr_fourier(w);
syms x k n u c t vector;

evalin(symengine,'assume(k,Type::Integer)');

dim=prod(size(w));
m=(dim-1)/2;

a0=w(1);
a= w(2:m+1);
b= w(m+2:2*m+1);

u=@(k,vector) vector(k);

fs = @(x,n,c) c/2 + symsum(subs(u,{k,vector},{t,a})*cos(t*x) + subs(u,{k,vector},          {t,b})*sin(t*x),t,1,n);

f= fs(x,m,a0); 
```

我尝试使用该功能`u=@(k,vec) vec(k)`而不是最初的功能。当我`subs(u,{k,vector},{t,a})`在终端中单独使用时，它可以正常工作，但在这里它不会......

我得到的结果是两个函数的向量而不是一个函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T16:35:55.707

[`subs`](http://www.mathworks.com/help/symbolic/subs.html)确实是正确的方法，你只是用错了。

有三个输入参数`subs`：符号表达式、要替换的参数及其新值。但是有一个例外：如果有两个输入参数，则将表达式中的*默认*`subs`符号参数替换为第二个参数。

 *无论如何，您似乎缺少 中的新值`subs`，因此它的行为不像您想要的那样。我认为它应该看起来像这样：

```
subs(a, k, 0) 
```

ETC...

`subs`附带说明一下，只使用一次就足够了（而且更优雅） 。计算*整个*符号表达式，然后使用`subs`一次。所以而不是：

```
subs(a, ...) + subs(b, ...) 
```

我建议你这样做：

```
subs(a + b, ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T06:42:13.120

如果你定义

```
a=@(k) vec(k+1); 
```

then`a`不是符号表达式，而是一个*函数，*并且要为其获取特定值`k`，您不能使用`subs`. 相反，您必须*调用*该函数`a`：

```
a(1)

f = @(x) a(0)/2 + sum(@(i) a(i)*cos(i*x) + b(i)*sin(i*x),1,n) 
```*

# java - 从另一个包访问您的主要活动

> ID：13725833
> 
> 赞同：0
> 
> 时间：2012-12-05T14:50:10.463
> 
> 标签：java, android, eclipse, libgdx, main-activity

我正在使用**libGDX**。创建了一个项目，有两个包**appName**，**appName-android**。我的代码在**appName**中，但**MainActivity.java**在**appName-android**包中。我在 MainActivity 中设置了 admob 广告，但我不想让它始终可见。

问题是，我如何从另一个包中编辑 adView.VISIBLE？或者有可能吗？如何从 appName 包中的类访问 MainActivity.java（在**appName** **-android**包中）？

 **提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T16:10:02.740

不幸的是，当您使用这些工具时，您无法更改某些内容。

没有办法改变 android 处理对主包的访问的方式。您可以创建静态方法来访问一些没有实例的代码，但我真的认为这不是一个好主意..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T23:19:26.687

从独立于平台的公共代码访问特定于平台的代码（如 Android adMob 库）的标准方法（在 libGDX 中）是创建一个您的公共代码可以使用的接口，并在该接口的实现中实现平台特定位.

因此，创建`public interface AdControlInterface`包含类似`hideAds`或任何您想要的方法的方法。让**appName-android**包创建该接口的特定于 Android 的实现并将其传递到**appName**包（通过`ApplicationListener`您在**appName**包中的子类上的构造函数）。

这是一个关于 libGDX 中 AdMob 的教程，涵盖了这个问题（参见`IActivityRequestHandler`界面）和其他一些 adMob 集成问题：[http ://code.google.com/p/libgdx/wiki/AdMobInLibgdx](http://code.google.com/p/libgdx/wiki/AdMobInLibgdx)**

# jquery - 拖放时更改类名，反之亦然 - jqueryUI - 更多

> ID：13725836
> 
> 赞同：-2
> 
> 时间：2012-12-05T14:50:34.613
> 
> 标签：jquery, user-interface, drag-and-drop

基于这两个示例（[拖放时更改类名，反之亦然 - jqueryUI](https://stackoverflow.com/questions/11294510/change-class-name-when-dragged-and-dropped-and-vice-versa-jqueryui)）和（[通过 POST 提交 UL 的最佳方式？](https://stackoverflow.com/questions/3287336/best-way-to-submit-ul-via-post)）我正在尝试构建一个表单，其中包含三个类别列表。

第一个包含完整列表，然后将您想要的类别拖到另一个列表中，通过表单提交。我们称它们为 Main、First 和 Second。

我想要做的是更改 ui 项的类，但不使用下面示例中的预定义名称类，而是通过将其放入列表中自动更改类名。因此，如果我将一个项目从主列表拖放到第一个列表，我希望脚本自动检测列表名称，并将项目类更改为该名称。

我不知道我是否清楚这一点。

任何帮助都将不胜感激。

这是我到目前为止所拥有的

```
<form action="prueba.html" method="get" accept-charset="utf-8">
<ul id="todos" class="droptrue ui-sortable" name="all">
  <li class="sortedli">
    1<input type='hidden' name='cats' value='1'/>
  </li>
  <li class="sortedli">
    2<input type='hidden' name='cats' value='2'/>
  </li>
  <li class="sortedli">
    3<input type='hidden' name='cats' value='3'/>
  </li>
</ul>

<ul id="seleccionados" class="droptrue ui-sortable" name="selected">
  <li class="sortedli" style="">
    4<input type='hidden' name='selected' value='4'/>
  </li>
  <li class="sortedli" style="">
    5<input type='hidden' name='selected' value='5'/>
  </li>
  <li class="sortedli" style="">
    6<input type='hidden' name='selected' value='6'/>
  </li>
</ul>
<input type="submit" name="submit" id="submit" value="Enviar" />

</body>

<script type="text/javascript">

var lists = [{
    "listid": "#todos",
    "connectid": "#seleccionados"
}, {
    "listid": "#seleccionados",
    "connectid": "#todos"
}];
$.each(lists, function(i, list) {
    $(list.listid).sortable({
        connectWith: list.connectid,
        opacity: 0.7,
        start: function(event, ui) {
            if ($(ui.item).parents('#todos').length > 0) {
                $(ui.item).addClass('dropped');
            } else {
                $(ui.item).addClass('sorted');
            }
        },
        stop: function(event, ui) {
            if ($(ui.item).parents('#todos').length > 0) {
                $(ui.item).switchClass('droppedli', 'sortedli');

            } else {
                $(ui.item).switchClass('sortedli', 'droppedli');

            }
            $(ui.item).removeClass('sorted');
            $(ui.item).removeClass('dropped');
        }
    });
});

// BOTTOM OF PAGE
</script> 
```

我仍在努力让它发挥作用。我想我必须使用这些行，并更改“sorteli”和“droppedli”以获取我要删除项目的父列表的属性值

```
 stop: function(event, ui) {
           if ($(ui.item).parents('#all-colls-list').length > 0) {
                $(ui.item).switchClass('droppedli', 'sortedli');
           } else {
                $(ui.item).switchClass('sortedli', 'droppedli');
           }
           $(ui.item).removeClass('sorted');
           $(ui.item).removeClass('dropped');
        }
   }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:46:13.087

所以我设法做到了，如果我的问题不够清楚，我很抱歉。

也许这可以帮助将来的人。

问候

```
<body>
<form action="prueba.html" method="get" accept-charset="utf-8">
<ul id="all-colls-list" class="droptrue ui-sortable" name="todos">
  <li class="sortedli" name="">
    1<input type='hidden' name='cats' value='1'/>
  </li>
  <li class="sortedli" name="">
    2<input type='hidden' name='cats' value='2'/>
  </li>
  <li class="sortedli" name="">
    3<input type='hidden' name='cats' value='3'/>
  </li>
</ul>

<ul id="coll-selected-list" class="droptrue ui-sortable" name="seleccionados">
  <li class="sortedli" name="">
    4<input type='hidden' name='cats' value='4'/>
  </li>
  <li class="sortedli" name="">
    5<input type='hidden' name='cats' value='5'/>
  </li>
  <li class="sortedli" name="">
    6<input type='hidden' name='cats' value='6'/>
  </li>
</ul>
<input type="submit" name="submit" id="submit" value="Enviar" />

</body>

<script type="text/javascript">

// BOTTOM OF PAGE
var lists = [{
    "listid": "#all-colls-list",
    "connectid": "#coll-selected-list"
}, {
    "listid": "#coll-selected-list",
    "connectid": "#all-colls-list"
}];
$.each(lists, function(i, list) {
    $(list.listid).sortable({
        connectWith: list.connectid,
        opacity: 0.7,
        start: function(event, ui) {
            if ($(ui.item).parents('#all-colls-list').length > 0) {
                $(ui.item).addClass('dropped');
            } else {
                $(ui.item).addClass('sorted');
            }
        },
        stop: function(event, ui) {
            if ($(ui.item).parents('#all-colls-list').length > 0) {
                $(ui.item).switchClass('droppedli', 'sortedli');
                $(ui.item).attr('name', $(ui.item).closest("ul").attr('name'));
                $(ui.item).children("input").attr('name', $(ui.item).closest("ul").attr('name'));

            } else {
                $(ui.item).switchClass('sortedli', 'droppedli');
                $(ui.item).attr('name', $(ui.item).closest("ul").attr('name'));
                $(ui.item).children("input").attr('name', $(ui.item).closest("ul").attr('name'));

            }
            $(ui.item).removeClass('sorted');
            $(ui.item).removeClass('dropped');
        }
    });
});

</script>

</html> 
```

# android - 在 Widget (RemoteViews) 中更改 GridView 中的 numColumns 无效

> ID：13725837
> 
> 赞同：6
> 
> 时间：2012-12-05T14:50:35.063
> 
> 标签：android, gridview, collections, widget, remoteview

我有一个带有 GridView 的小部件（可以工作），它在 1 个或多个列/行中显示信息。我想以编程方式设置列数，因为用户应该选择。如果我将 Layout-XML 中的 numColumns 设置为“1”，它可以正常工作。如果我尝试按以下方式设置 numColumns ，则无效：

```
 rViews.setInt(R.id.duration_view, "setNumColumns", 1); 
```

布局如下所示：

```
 <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/duration_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:minHeight="64dp"
        android:verticalSpacing="0dp"
        android:columnWidth="192dp"
        android:numColumns="auto_fit"
    /> 
```

我的小部件 onUpdate() 方法，使用 RemoteAdapter：

```
 public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
        // ....
        Intent intent = new Intent(context, ViewFlipperWidgetService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
        intent.setData(Uri.parse(intent.toUri(Intent.URI_INTENT_SCHEME)));
        RemoteViews rViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        rViews.setRemoteAdapter(R.id.duration_view, intent);
        rViews.setEmptyView(R.id.duration_view, R.id.empty_view);

        // This doesnt have any effect...:-(
        rViews.setInt(R.id.duration_view, "setNumColumns", 1); 

        appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.duration_view);            

        AppWidgetManager.getInstance(context).updateAppWidget(appWidgetId, rViews);

        // ....
        super.onUpdate(context, appWidgetManager, appWidgetIds); 
```

不仅 setNumColumns 无效，其他方法调用也无效。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-02T03:02:18.270

您可以针对`RemoteViews`视图调用的唯一方法是带有`@android.view.RemotableViewMethod`注释的方法。GridView 只有三个这样的方法：

```
@android.view.RemotableViewMethod
public void setRemoteViewsAdapter(Intent intent) {

@android.view.RemotableViewMethod
public void smoothScrollToPosition(int position) {

@android.view.RemotableViewMethod
public void smoothScrollByOffset(int offset) { 
```

您可以自己验证这一点：

[https://android.googlesource.com/platform/frameworks/base/+/jb-release/core/java/android/widget/GridView.java](https://android.googlesource.com/platform/frameworks/base/+/jb-release/core/java/android/widget/GridView.java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T15:07:08.553

我试图自己找到这个答案。

到目前为止，我发现这样做的唯一方法是更改​​您的初始 RemoteViews 对象以对每列数量使用不同的资源：

```
RemoteViews rViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout_1_column); 
```

或者

```
RemoteViews rViews = new RemoteViews(context.getPackageName(), R.layout.widget_layout_3_columns); 
```

这行得通，但我无法想象编码或运行它是有效的。但同样，它的工作原理......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-28T12:13:03.740

派对迟到了，但仍然......

我通过在应用程序中使用 columnCount = max 定义 GridLayout 解决了这个问题。（即 10 个）。

我让用户定义他想看到多少列。（即 3）。

与填充 GridLayout 时相比，我设置的实际按钮数量与用户设置的一样多，在其他列中，我只设置填充按钮并隐藏它们。当一行中的所有列都被填满时，我再次开始设置真正的按钮。

这是代码...注意appWidgetCols和buttonsInRow变量。

```
 @Override public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
  {
    super.onUpdate(context, appWidgetManager, appWidgetIds);
    for (int appWidgetId : appWidgetIds) {
      RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.novawidgets_widget);

      SharedPref                sp              = new SharedPref(context);
      String                    widgetsAllCache = sp.getString("widgets_all_cache");
      DoorWidgets.WidgetsAllMap widgetsAll      = new DoorWidgets.WidgetsAllMap();
      if (!"".equals(widgetsAllCache))
        widgetsAll = Json.fromJson(widgetsAllCache, DoorWidgets.WidgetsAllMap.class);

      String appWidgetHwIds = sp.getString("appwidget_hwids");
      int    appWidgetCols  = sp.getInt("appwidget_cols");
      if (appWidgetCols == 0)
        appWidgetCols = 2;
      views.removeAllViews(R.id.widget_buttons_container);
      int         buttonsInRow = 0;
      RemoteViews btn;
      if (widgetsAll != null) {
        for (String hwId : appWidgetHwIds.split(",")) {
          if (widgetsAll.containsKey(hwId)) {
            while (buttonsInRow >= appWidgetCols) {
              btn = new RemoteViews(context.getPackageName(), R.layout.novawidgets_button);
              btn.setViewVisibility(R.id.widget_button_container, GONE);
              views.addView(R.id.widget_buttons_container, btn);
              buttonsInRow++;

              if (buttonsInRow >= 10)
                buttonsInRow = 0;
            }
            WidgetCache widget = widgetsAll.get(hwId);
            assert widget != null;
            btn = new RemoteViews(context.getPackageName(), R.layout.novawidgets_button);
            btn.setImageViewResource(R.id.widget_button,
                                     widget.type == DOOR ? R.drawable.door_closed_vector : R.drawable.ic_light_vector);
            btn.setTextViewText(R.id.widget_name, widget.hwName);
            views.addView(R.id.widget_buttons_container, btn);
            buttonsInRow++;
          }
        }
      }
      appWidgetManager.updateAppWidget(appWidgetId, views);
    }
  } 
```

# qlikview - Web 浏览器中的 QlikView 应用程序。如何？

> ID：13725842
> 
> 赞同：4
> 
> 时间：2012-12-05T14:50:40.293
> 
> 标签：qlikview

我对 QlikView 很陌生。

我创建了一个测试 QlikView 应用程序。我想知道，是否可以在网络浏览器中访问该应用程序？如果是，如何？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-11T03:47:01.200

您在 Qlikview 个人版上创建了一个测试 QlikView 应用程序，对吗？
如果您想在 Web 浏览器中访问此应用程序，您需要设置 Qlikview 服务器。但是，Qlikview 服务器不是免费的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-18T21:18:11.843

如果您想查看应用程序在浏览器中的外观，您可以从桌面本身查看它。

您在设计菜单栏上有一个 Web 视图。如果您启用它，那么您可以像在浏览器中一样查看它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-28T08:38:47.660

如上所述，您需要一台服务器。这对于私人使用来说有点太多了，但是小型企业设置是负担得起的，更重要的是值得。您已经体验过 QlikView 在您的独立设置中可以做什么，想象一下这对公司意味着什么......

服务器还提供了一些很好的功能来自动重新加载应用程序中的数据（例如每晚）。让你的东西保持最新真的很好。在以前的公司中，我们也用它做了很多 ETL。QlikView 是一个不错的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-21T14:49:26.557

为此，您必须安装 qlikview 服务器。你可以[在这里阅读](https://community.qlik.com/docs/DOC-5291)

# c# - 如何获取用于访问 Internet 的网络适配器的 IP 地址

> ID：13725844
> 
> 赞同：6
> 
> 时间：2012-12-05T14:50:48.443
> 
> 标签：c#, .net

我想知道是否有一种可靠的方法可以在我的机器中找到用于访问 Internet 的网络适配器的 IPv4 地址（因为这是我想将我的服务器绑定到的那个）。我曾经获得这样的本地 IP 地址列表：

```
IPAddress ip = System.Net.Dns.GetHostByName(Environment.MachineName).AddressList[0]; 
```

它运行良好，但今天失败了，因为我要查找的 IP 地址不是此地址列表中的第一个，而是第三个（因为我有 2 个虚拟机正在运行，并且它们都创建了一个虚拟适配器）。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T14:56:30.803

```
IPAddress ip = System.Net.Dns.GetHostEntry(Environment.MachineName).AddressList.Where(i => i.AddressFamily == System.Net.Sockets.AddressFamily.InterNetwork).FirstOrDefault(); 
```

作为替代方式，您可以使用：

```
using System.Net.NetworkInformation;

//...

var local = NetworkInterface.GetAllNetworkInterfaces().Where(i => i.Name == "Local Area Connection").FirstOrDefault();
var stringAddress = local.GetIPProperties().UnicastAddresses[0].Address.ToString();
var ipAddress = IPAddress.Parse(stringAddress); 
```

您只需将*`"Local Area Connection"`*其中的适配器名称替换为`Control Panel\Network and Internet\Network Connections`

# c++ - 函数 ConvexityDefects 中的 C++ OpenCv 错误

> ID：13725845
> 
> 赞同：3
> 
> 时间：2012-12-05T14:50:49.640
> 
> 标签：c++, opencv, convex-hull

我已经阅读了[这里](https://stackoverflow.com/questions/10620981/calculating-convexitydefects-using-opencv-2-4-in-c)和[这里](https://stackoverflow.com/questions/11840752/opencv-c-cvconvexitydefects-error)的帖子，但它们并没有解决我得到的错误。

**我的代码**

```
vector<Vec4i> defects;
vector<vector<int> >hull( contours.size() );
for (int i = 0; i < contours.size(); i++)
{
    convexHull( contours[i], hull[i], false, false );
    if(contours[i].size() > 3 )
        convexityDefects(contours[i], hull[i], defects[i]);
} 
```

根据上面的帖子，这应该可以工作，但事实并非如此。我仍然收到错误
`error: (-215) hull.checkVector(1, CV_32S) > 2 in function convexityDefects`
，我真的没有在这里看到问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T10:55:17.170

好的，问题主要是由于一些奇怪的原因，我的轮廓太小了，以至于船体只是一条直线（意思是只包含 2 个点）。所以错误是指船体矢量的大小，而不是在其他似乎与矢量类型有关的帖子中。

因此，只需替换
`if(contours[i].size() > 3 )` 即可 `if(hulls[i].size() > 2 )` 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:02:28.847

[正如关于opencv 参考](http://opencv.willowgarage.com/documentation/python/structural_analysis_and_shape_descriptors.html#ConvexityDefects)的报道：

```
ConvexityDefects(contour, convexhull, storage) → convexity_defects
  Finds the convexity defects of a contour.

Parameters: 
  contour (CvArr or CvSeq) – Input contour
  convexhull (CvSeq) – Convex hull obtained using ConvexHull2 that should contain pointers or indices to the contour points, not the hull points themselves (the return_points parameter in ConvexHull2 should be 0)
  storage (CvMemStorage) – Container for the output sequence of convexity defects. If it is NULL, the contour or hull (in that order) storage is used 
```

特别是，看看第二个参数：你确定是使用*[ConvexHull2](http://opencv.willowgarage.com/documentation/python/imgproc_structural_analysis_and_shape_descriptors.html#convexhull2)*获得的吗？

# html - 网站（html5）在ie中完全空白

> ID：13725846
> 
> 赞同：1
> 
> 时间：2012-12-05T14:50:56.220
> 
> 标签：html, internet-explorer-8, html5shiv

我对 html5 很陌生，因此开始在 html5 中创建一个测试网站来学习、学习、学习..

我创建的网站在所有浏览器中都可以正常工作，除了（当然！）在 ie 9 的早期版本中。

我搜索了一下，发现使用这段 html5 shiv 脚本（放在头部）应该可以解决所有问题。

```
<!--[if lt IE 9]>
<script src="js/html5.js"></script>
<![endif]--> 
```

好吧，不幸的是它不适用于我的网站。它不是加载一个混乱的网站（布局/css 方式），而是在 ie 8 中加载一个完全空白的页面。

然后我用谷歌搜索了更多，找到了有关modernizr的信息。所以我也包括了他们的开发版脚本。不幸的是，同样的结果......

现在我已经分别尝试了这两个选项，但是在 ie 8 中发生的所有事情都是加载一个完整的空白页面。

我希望有人能够帮助我解决这个问题。

这是我网站的网址：http: [//kmnew.kadushimarketing.com/index.php](http://kmnew.kadushimarketing.com/index.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:01:08.653

您需要更正 HTML 中的错误。如果你打开 IE 的开发者工具（按 F12），你会发现一个空`body`元素；之后你忘记打开它了`</head>`。查看源代码，您会发现两个`html`元素也被打开：您只需要一个。

此外，如果您使用的是 Modernizr，则无需引用 html5.js - 它是内置的。

（感谢 Gaby，他也发现了所有这些错误！）

# sql - SQL Server 检查正在更新的数据

> ID：13725849
> 
> 赞同：0
> 
> 时间：2012-12-05T14:51:03.227
> 
> 标签：sql, sql-server, sql-server-2008

大家好，我有一个每天运行的应用程序，用于收集 SQL Server 2008 数据库中表的更新。我还有一个前端网站，可以为用户显示这些统计信息。

一旦用户登录网站，我试图弄清楚数据库当前正在更新中。

我到目前为止的代码是：

```
SELECT * 
FROM dataLog 
WHERE theDT >= '2012-12-05 00:00:00' 
  AND theDT <= '2012-12-05 23:59:59' 
  AND theType <> 'Completed' 
```

当应用程序启动时，它会将此记录写入`dataLog`表中：

```
 id   | theDT                    | theMsg      | theFunction     | theType
 130    2012-12-05 09:17:13.000    Beginning     Main              Starting 
```

当它完成时，它写道：

```
 id   | theDT                    | theMsg      | theFunction     | theType
 137    2012-12-05 09:47:13.000    Ended         Main              Completed 
```

我只是不确定如何检查它，因为我上面的代码每次都显示它，无论它是否*完成*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:09:06.683

试试这个：

```
select max_dt, theType from
datalog d inner join
(SELECT max(theDt) as max_dt FROM dataLog) m
on d.theDt = m.max_dt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:11:51.167

对不起，如果这太简单了。

```
Select Top 1
  *
From dataLog
Where theDate < GetDate()
Order By theDate DESC 
```

然后您的前端可以显示当前状态，如果状态为正在启动，则显示“更新：在 x 开始”消息，如果状态为“已完成”，则显示“更新在 x 完成”消息。

# java - 带有tomcat连接的IIS中的网站

> ID：13725850
> 
> 赞同：0
> 
> 时间：2012-12-05T14:51:08.367
> 
> 标签：java, iis, iis-7.5, tomcat6

我在 IIS 7.5 (mysite) 中有一个网站，我将绑定配置为

```
Type    Host Name            Port    IP Address
------------------------------------------------
http    test.mydomain.com    80      * 
```

它提供一些静态内容，例如`http://test.mydomain.com/images/image1.jpg`，它`myJavaApp`通过 tomcat 与应用程序连接。

`http://test.mydomain.com/myJavaApp/`正确地为 Java 应用程序提供服务。

我已经配置了`hosts`服务器的文件，因此域`test.mydomain.com`指向`192.168.0.8`（静态 ip）。

问题是当我调用`http://test.mydomain.com:8080`tomcat时没有响应并且我得到了错误`The server at test.mydomain.com is taking too long to respond.`

但是当我像我期望的那样打电话`http://localhost:8080`或`http://192.168.0.8:8080`tomcat响应时。

我试图将tomcat（server.xml）配置为

```
 <Host name="test.mydomain.com"  appBase="webapps"
        unpackWARs="true" autoDeploy="true"
        xmlValidation="false" xmlNamespaceAware="false">
 </Host> 
```

但它没有用。所有电话都是本地电话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:57:03.290

您的浏览器使用自己的 DNS 解析器/缓存，从公共 DNS 获取 test.mydomain.com 的错误地址，并且该地址的机器具有被防火墙过滤的端口 8080？

# r - 为什么在矩阵上使用 R 中的差异时会出错

> ID：13725856
> 
> 赞同：0
> 
> 时间：2012-12-05T14:51:30.763
> 
> 标签：r

我使用从 csv 文件中读取数据

```
d<-read.csv("myfile.csv",header=TRUE) 
```

数据被正确读取，并且有 10 列带标题的双数据。

我想创建一个日志差异的矩阵（我的话 - 不确定我在 R 中实际想要什么）。

```
logs<-log(d) 
```

这工作正常，但是

```
diffs<-diff(logs) 
```

给出这个错误：

-(length(r) - lag + 1L) <<< 我不知道这意味着什么......

编辑 1 我的数据（抱歉必须在这里输入 - 看不到附加文件的明显方式）

```
A,B,C
1.1,2.1,3.1
1.2,2.2,3.2
1.3,2.3,3.3
1.4,2.4,3.4
1.5,2.5,3.5
1.6,2.6,3.6 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:17:39.857

这里的关键（和您的问题）是，虽然`diff`（令我惊讶的是）在矩阵上自动按列工作，但它**不适**用于**data frames**，这是您从中得到的，`read.csv`并且与矩阵略有不同。

```
d <- read.csv(textConnection("
A,B,C
1.1,2.1,3.1
1.2,2.2,3.2
1.3,2.3,3.3
1.4,2.4,3.4
1.5,2.5,3.5
1.6,2.6,3.6"))
(logs <- log(d))
diff(logs)
Error in r[i1] - r[-length(r):-(length(r) - lag + 1L)] : 
  non-numeric argument to binary operator

diff(as.matrix(logs)) 
```

我最初的回答是你应该使用

```
apply(logs,2,diff) 
```

`diff`在每一列上显式使用。但是，从`?diff`：

> x：包含要区分的值的数字向量或矩阵。...如果“x”是一个矩阵，那么差分运算将分别在每一列上执行。

`diff(c(as.matrix(logs)))`如果您想将整个事物视为单个连续（按列排序）向量，您也可以这样做。

# lucene - 使用 Lucene 和 Hunspell 生成所有单词形式

> ID：13725861
> 
> 赞同：10
> 
> 时间：2012-12-05T14:51:43.987
> 
> 标签：lucene, nlp, word, hunspell

在我处理的一个应用程序中，我们使用 Lucene Analyzer，尤其是它的 Hunspell 部分。我面临的问题是：我需要使用一组词缀规则生成一个单词的所有单词形式。

例如，拥有单词“educate”和词缀规则ABC，生成所有形式的单词“educate”。- 教育，教育，教育等。

我想知道的是：是否可以使用 Lucene 的 Hunspell 实现来做到这一点（我们使用 Hunspell 字典（.dic）和词缀文件（.aff），所以它必须是一个 Hunspell API）？Lucene 的 Hunspell API 并没有那么大，我浏览了一下，没有找到合适的。

我能在 SO 上找到的最近的是[this](https://stackoverflow.com/questions/893436/best-practices-for-seaching-for-alternate-forms-of-a-word-with-lucene)，但没有与 hunspell 相关的答案。

**更新 1**我不再从事我面临上述问题的项目，但如果仍然有使用 Lucene 的分析器执行此操作的解决方案，我很高兴社区会看到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T17:39:54.083

Hunspell 带有 unmunch 命令，它将创建所有单词形式。你可以这样称呼它：

```
 unmunch en_GB.dic en_GB.aff 
```

因此，您可能会在 hunspell 源代码中查看它是如何实现的，以及它是否可以从外部调用。上次我检查在带有复合词的字典上使用该命令时，该命令有点错误 - 在这些情况下，无论如何您都无法创建*所有*单词形式，因为它们的数量是无限的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-03T12:56:28.647

我认为您正在寻找的是 Hunspell 的 wordforms 命令：

```
Usage: wordforms [-s | -p] dictionary.aff dictionary.dic word
-s: print only suffixed forms
-p: print only prefixed forms 
```

例子：

```
$ wordforms en_US.aff en_US.dic educate
educating
educated
educate
educates
educates 
```

[在文档](http://sourceforge.net/projects/hunspell/files/Hunspell/Documentation/)中阅读更多内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-03-16T18:49:39.777

（最初的问题是关于为一个给定的单词生成所有形式。这个答案侧重于为字典的所有单词生成所有形式的更难的问题。我在这里发布这个，因为这是在搜索更难的问题时出现的问题。）

# 更新`unmunch`_

截至 2021 年，Hunspell 提供了两种工具，称为`unmunch`和`wordforms`生成词形。它们各自的用法是：

```
# print all forms for all words whose roots are given in `roots.dic`
# and make use of affix rules defined in `affixes.aff`:
unmunch   roots.dic affixes.aff
# print the forms of ONE given word (a single root with no affix rule)
# which are allowed by the reference dictionary defined by the pair of
# `roots.dic` and `affixes.aff`:
wordforms affixes.aff roots.dic word 
```

So`affixes.aff`将由您的语言给出，并且`roots.dic`可以是您的语言的参考词典，也可以是您想要生成的新词的根源的自定义词典。

**不幸的是，Hunspell 已`unmunch`被弃用¹并且无法正常工作。**它继承自 MySpell，我猜它不支持 Hunspell 的所有功能。显然它不能正确支持 UTF-8。当我尝试将它与参考法语词典（Dicollecte，v7.0）一起使用时，它通过应用不应该应用的词缀规则（例如：共轭非动词）来生成垃圾词。

`wordforms`应该是最新的，所以你*可能会尝试*模仿`unmunch`with `wordforms`（正如自述文件所建议的那样），*但*后者只取*一个*不合格的根，并将其与`roots.dic`and所暗示的整个字典进行比较`affixes.aff`。每个根都需要花费大量时间，最糟糕的是，您必须`wordforms`轮流调用所有根在`roots.dic`. 所以你会有一个二次时间。对我来说，使用法语的参考词缀集，这太慢了以至于无法使用——即使只有 10 个词根！为了说明，不可用的 Bash 代码是：

```
# /!\ EXTREMELY SLOW
aff='affixes.aff'
dic='roots.dic'
cat "$dic" | while read -r root ; do # read each root of the file
    root="${root%%/*}" # strip the root from the optional slash (attached affix rules)
    wordforms "$aff" "$dic" "$root" # generate all forms for this root
done \
| sort -u # sort (according to the locale) and remove duplicates 
```

另外，请注意，它`wordforms`会产生裸词，而`unmunch`能够附加派生的元数据（例如词性或性别），因此`wordforms`您会丢失信息（这可能对您来说很重要，也可能不重要）。

缺少替代品`unmunch`是[一个已知问题](https://github.com/hunspell/hunspell/issues/404)。显然，Hunspell 开发人员不会在可预见的未来解决这个问题（关于资金的问题？）。这导致几个人重新实现了该功能，您会在整个 GitHub 问题中找到指针。

*   2012年有人通过改编源代码写[了一个sh/awk脚本](https://sourceforge.net/p/hunspell/patches/55/)`wordforms`；也许严重过时，但我还没有尝试过。
*   2014 年，有人编写了[另一个 sh/awk 脚本](https://github.com/Shreeshrii/hindi-hunspell/blob/master/tools/unmunch.sh)来处理印地语词典；它对我有用，至少比内置的`unmunch`. 我不知道它有多准确。
*   2020 年 12 月，有人写[了一个 Perl 模块](https://metacpan.org/pod/Text::Unmunch)和[一个 Perl 程序](https://github.com/hunspell/hunspell/issues/696#issuecomment-745329527)；看起来不错，但我不知道如何使用它们。

* * *

¹ 来自[repo](https://github.com/hunspell/hunspell)的自述文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T15:09:57.013

要查找一个单词的所有创建形式，假设 en_US.dic 包含：word/abc，创建一个文件：

```
1
word/abc 
```

并将其保存为 word.dic。利用：

```
unmunch word.dic en_US.aff 
```

你会得到所有创造的单词形式。

# android - HTML5 Web SQL 动态大小

> ID：13725866
> 
> 赞同：2
> 
> 时间：2012-12-05T14:52:00.643
> 
> 标签：android, ios, cordova, webkit, web-sql

使用以下部分：

```
var db = openDatabase('mydb', '1.0', 'my first database', 2 * 1024 * 1024); 
```

我需要能够拥有一个动态大小的数据库。上面的数据库是否会超出推荐的大小，还是会开始抛出错误？有解决方法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:00:38.653

[网络存储](http://dev.w3.org/html5/webstorage/#disk-space)

建议每个源（网站、应用程序等）任意限制为 5MB，并将其放置在所有 Web 存储上。

简单地说，我会限制数据库大小： `5 * 1024 * 1024` （5MB）

为了回答您的具体问题，至少在 iPhone 上，该变量被[Apple描述为 maxSize](http://developer.apple.com/library/safari/#documentation/iPhone/Conceptual/SafariJSDatabaseGuide/UsingtheJavascriptDatabase/UsingtheJavascriptDatabase.html)

# html - float: left 和 float: right 在同一行，不同大小的文本

> ID：13725871
> 
> 赞同：0
> 
> 时间：2012-12-05T14:52:13.517
> 
> 标签：html, css

我有一个标题和一个导航菜单，需要分别在同一行上左右对齐。

我的研究告诉我，这可以使用`float: left`和`float: right`with来完成`clear: both`。当文本大小相同时，这确实有效，但是当标题的字体大小大于导航菜单时，导航菜单不与行的底部对齐，它与顶部对齐，如下所示：

```
_____     _____         ___ 
  |    |    |    |     |                                    Link 1    Link 2    Link 3
  |    |    |    |     |___
  |    |    |    |___  |___ 
```

我想要实现的是：

```
_____     _____         ___ 
  |    |    |    |     |    
  |    |    |    |     |___
  |    |    |    |___  |___                                 Link 1    Link 2    Link 3 
```

我在[这里做了一个小提琴](http://jsfiddle.net/Z3a6Z/1/)

我怎样才能让导航菜单位于该行的底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:05:08.213

我已经修改了你的 jsFiddle 并使它正确：http: [//jsfiddle.net/Z3a6Z/8/](http://jsfiddle.net/Z3a6Z/8/)

以下是我在 CSS 中所做的主要更改：

```
#menu
{
    position: relative;
    float: right;
    height : 100px;    
    width: 160px;
}

#menu ul {
    bottom: 0;
    width: 100%;
    margin: 0;
    padding: 0;
    position: absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:54:10.707

你可以给他们相等`height`的 s 然后在链接`padding-top`上使用`div`-

请记住从 中减去`padding-top`以`height`保持相同的实际高度。

这是一个[http://jsfiddle.net/gUFy8/1/](http://jsfiddle.net/gUFy8/1/) JSFiddle 示例

这是您的小提琴的更新。为标题 div 添加了高度，为菜单 div 添加了高度和填充 [http://jsfiddle.net/Z3a6Z/3/](http://jsfiddle.net/Z3a6Z/3/)

您将需要调整高度和填充量以获得完美的阵容。

# c++ - 为什么我可以在 std::map 中使用 const char* 作为键

> ID：13725873
> 
> 赞同：7
> 
> 时间：2012-12-05T14:52:25.847
> 
> 标签：c++, type-conversion

我已经定义了一个数据结构

```
std::map<std::string, int> a; 
```

我发现我可以将 const char* 作为键传递，如下所示：

```
a["abc"] = 1; 
```

哪个函数提供从 const char* 到 std::string 的自动类型转换？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-05T14:54:19.737

`std::string`有一个[构造函数，允许从`const char*`](http://en.cppreference.com/w/cpp/string/basic_string/basic_string).

```
basic_string( const CharT* s,
              const Allocator& alloc = Allocator() ); 
```

意味着隐式转换，例如

```
std::string s = "Hello"; 
```

被允许。

这相当于做类似的事情

```
struct Foo
{
  Foo() {}
  Foo(int) {} // implicit converting constructor.
};

Foo f1 = 42;
Foo f2;
f2 = 33 + 9; 
```

如果您想禁止隐式转换构造，请将构造函数标记为`explicit`：

```
struct Foo 
{
  explicit Foo(int) {}
};

Foo f = 33+9; // error
Foo f(33+9); // OK
f = Foo(33+9); // OK 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T14:55:20.910

std::string 有一个构造函数，它以 const char* 作为参数。

```
string::string(const char*); 
```

除非构造函数被显式声明，否则编译器将在需要调用任何函数时应用一种使用定义的转换。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T14:56:01.663

请参阅[字符串构造函数](http://www.cplusplus.com/reference/string/string/string/)。构造函数提供映射中键的转换。相当于

```
a[std::string("abc")] = 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-05T14:59:42.427

在 C++ 中，如果您创建一个只接受一个参数的类构造函数，那么（除非您用 另有说明`explicit`），该参数的类型将[隐式转换](http://en.wikipedia.org/wiki/Type_conversion#Implicit_type_conversion)为您的类。

`std::string`有这样的构造函数`char *`

是的，这有时会导致一些意外行为。这就是为什么您通常应该`explicit`使用单参数构造函数的原因，除非您真的想要这些静默转换。

# c# - 如何在 Metro 风格应用程序 xaml 2012 中创建打开文件对话框

> ID：13725874
> 
> 赞同：3
> 
> 时间：2012-12-05T14:52:26.837
> 
> 标签：c#, xaml, microsoft-metro

我如何在 xaml 2012 中创建打开文件对话框，因为我是 Metro 风格的新手。我知道 c# 2010 有一个打开文件对话框的选项，这里没有选项，所以我怎样才能打开一个打开文件对话框，谁能建议我怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:27:36.923

在 Metro 风格应用 (WinRT) 中，您将为此目的使用[FileOpenPicker 类。](http://msdn.microsoft.com/library/windows/apps/BR207847)这是一个例子：

```
 var filePicker = new FileOpenPicker();
            filePicker.FileTypeFilter.Add(".jpg");
            filePicker.FileTypeFilter.Add(".jpeg");
            filePicker.FileTypeFilter.Add(".gif");
            filePicker.ViewMode = PickerViewMode.Thumbnail;
            filePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
            filePicker.SettingsIdentifier = "PicturePicker";
            filePicker.CommitButtonText = "Select Files";

            var selectedFiles = await filePicker.PickMultipleFilesAsync();
            if (selectedFiles != null)
            {
                // do something with the selected files
            } 
```

[这里](http://code.msdn.microsoft.com/windowsapps/File-picker-app-extension-0cb95155)有一个示例项目来演示它。

# devise - 设计、StripeConnect、门卫、OAuth2

> ID：13725876
> 
> 赞同：0
> 
> 时间：2012-12-05T14:52:36.870
> 
> 标签：devise, oauth-2.0, omniauth, stripe-payments

我正在开发一个 CrowdFunding 网站，并希望为 MerchantService 方面选择最佳组合。我一直与 Stripe 联系，他们认为他们会很合适，在与他们交谈后，我决定试一试。Brian C，几周前我看到你为你的客户使用 Stripe……你有什么想法吗？

我正在寻求有关设置的建议。

1.  我正在使用 Devise & StripeConnect - 我知道我需要 OAuth2 但我也应该使用 Doorkeeper。

2.  关于设置这些的最佳方法有什么想法？有任何示例代码可供查看吗？

3.  我应该使用（ gem 'omniauth-stripe-connect' ）还是有更好的解决方案？

4.  如果对#3 是肯定的，我是否需要所有三个 (gem 'omniauth') & (gem oauth2) & (gem 'omniauth-stripe-connect')

在此先感谢 - 杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:25:44.157

以下是我发现有助于起步的几个链接。

[Rails 应用教程 - 条带会员资格 SaaS 秘诀](http://railsapps.github.com/tutorial-rails-stripe-membership-saas.html "Rails 应用教程")

这个截屏视频不包括 webhook，但对我开始理解有很大帮助。

[Railscasts.com](http://railscasts.com/episodes/288-billing-with-stripe?view=asciicast/%20%22Railscasts.com)

希望这些链接有所帮助。

拉蒙

# arm - 手臂和拇指指令集

> ID：13725878
> 
> 赞同：1
> 
> 时间：2012-12-05T14:52:46.713
> 
> 标签：arm

如何区分手臂指令和拇指指令？例如：

```
add r1, r2, r3 ;add r2 and r3, then store the result in r1 register 
```

上述指令在手臂和拇指指令方面如何工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:30:16.533

那么请访问 infocenter.arm.com 并获取相关架构的架构参考手册，或者只是获取 ARMv7 手册（不是 -M，而是 -A 或 -R），其中将包括迄今为止从 ARMv4 到的所有指令编码ARMv7 包括 thumb 和最成熟的 thumb2 扩展。（您可能需要多个架构参考手册和/或技术参考手册，因为 arm 手册中的指令编码会受到影响）

在 thumb 指令下查看基于寄存器的 ADD 指令，其中有一个编码包含三个寄存器编码 T1，它被列为所有 thumb 变体（ARMv4T 到现在（ARMv4T、ARMv5、ARMv6、ARMv7 和可能的 ARMv8））

第 15 到 9 位是 0b0001100 rm 的 3 位、rn 的 3 位和 rd 的 3 位（通常 thumb 指令仅限于 r0-r7 需要 3 位进行编码，thumb2 扩展和一些特殊的 thumb 指令允许更高编号的寄存器（四个编码位））。

该指令在说明中列为 ADDS rd,rn,rm，S 表示保存标志，它来自于衍生 thumb 指令的父 ARM 指令，对于 ARM 指令，您可以选择是否修改标志，thumb 指令你没有（thumb2 有办法控制它，但它有限制（对于 add 指令））。

添加 rd,rn,rm

0001100 rm rn rd

所以 ADDS r1,r2,r3 就是这块位

0001100 011 010 001 = 0001100011010001 = 0001 1000 1101 0001 = 0x18D1

查看 ARM 模式下的 ADD 指令，你从一个条件字段开始，因为你已经写了你的问题，这是一个 ALWAYS 或 1110 模式（总是执行），也因为你写了你写的问题 add not added 所以不保存标志所以s 位在编码中为零

所以添加 rd,rn,shifter 操作数，我们从位模式 0b111000I01000 开始，然后 rn 的 4 位 rm 的 4 位和移位器操作数的 11 位。是的，这是一个我位位置 25 不是一个。I 是移位器操作数编码的一部分

现在转到描述移位器操作数编码的手册部分。只是一个寄存器 rm 的编码是第 25 位（I 位）为零，11 到 4 为零，3 到 0 是 rm 所以添加 rd,rn,rm

1110 00 0 01000 转 00000 000 转

1110 00 0 01000 0001 0010 00000 000 0011 = 1110 0000 1000 0001 0010 0000 0000 0011 = 0xE0812003

现在我们可以测试一下，使用这个程序

```
add r1,r2,r3
.thumb
add r1,r2,r3 
```

称它为 add.s 组装然后反汇编

```
arm-none-eabi-as add.s -o add.o
arm-none-eabi-objdump -D add.o 
```

并得到

```
Disassembly of section .text:

00000000 <.text>:
   0:   e0821003    add r1, r2, r3
   4:   18d1        adds    r1, r2, r3 
```

与手编码相匹配。

现在，如果您尝试反汇编一大块不知道它们是什么类型的字节，那就是另一回事了，这充其量是非常困难的，理想情况下，您希望通过执行和模式更改来反汇编整个二进制文件（如果不模拟执行，您可能无法弄清楚）。一条线索是 ARM 指令通常在指令开头使用 0xE 的 ALways 条件，因此如果您看到大量 0xExxxxxxx 形式的 32 位字，则这些字很可能是 arm 指令而不是数据而不是 thumb 指令。纯拇指将有一个不太典型的模式，比如 0x6xxx 和 0x7xxx，但也有所有其他起始值的混合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-21T17:27:01.963

在实践中，没有理由将库编译为 arm，除非您有意选择让一切变得更难。

在 arm 和 thumb 模式之间切换需要一些纳秒，它有硬件支持，顺便说一下，比在内核和用户模式之间切换要快得多。

如果你问我为什么 Google 的整个库都是 arm，我会告诉你，尽管他们应该保持东西向后兼容和一致，但绝对没有理由。

# asp.net - 向asp生成的html元素添加属性-没有编译它的代码

> ID：13725884
> 
> 赞同：0
> 
> 时间：2012-12-05T14:52:59.203
> 
> 标签：asp.net, html

如果我收到的文件中有两个输入，它们是“放在一起”的`aspx`

```
<tr>
    <td align="right">
        <asp:Label ID="Label1" runat="server" Text="User Name:" CssClass="login_label"></asp:Label></td>
    <td style="width: 200px">
        <asp:TextBox ID="txtUserName" runat="server" TabIndex="1" Width="200px"></asp:TextBox></td>
    <td style="width: 3px" align="left">
        <asp:RequiredFieldValidator ID="rfvUserName" runat="server" ErrorMessage="RequiredFieldValidator" ControlToValidate="txtUserName">Required</asp:RequiredFieldValidator></td>
</tr>
<tr>
    <td align="right">
        <asp:Label ID="Label2" runat="server" Text="Password:" CssClass="login_label"></asp:Label></td>
    <td style="width: 200px">
        <asp:TextBox ID="txtPassword" runat="server" TabIndex="2" Width="200px" TextMode="Password"></asp:TextBox></td>
    <td style="width: 3px">
        <asp:RequiredFieldValidator ID="rfvPassword" runat="server" ControlToValidate="txtPassword" ErrorMessage="Required">Required</asp:RequiredFieldValidator></td>
</tr> 
```

如何`autocapitalize="off"`向输入添加属性？每当我尝试向这段代码添加一些东西时——嗯，大多数时候——它就会完全崩溃。但我希望它可以在移动设备上使用。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:56:41.177

在后面的代码中：

```
NameOfInput.Attributes.Add('autocapitalize','off') 
```

这就是向服务器可见的 html 元素添加属性的方式。

javascript：请注意，这可能不适用于所有版本的 IE。这应该在文档加载事件中

```
document.getElementById('<%txtUserName.ClientID%>').setAttribute('autocapitalize','off'); 
```

jQuery：与上面相同的警告。这也应该在 $(docuemnt).ready() 函数或加载事件中。

```
$('#<%txtUserName.ClientID%>').attr('autocapitalize','off'); 
```

看到这个问题有一个更好的理由为什么你不能在这里做你想做的事：

[输入元素上的 Autocapitalize 属性（用于 iOS）会破坏验证](https://stackoverflow.com/questions/5333416/autocapitalize-attribute-on-input-element-used-for-ios-breaks-validation)

最后一个编辑：

显然来自 IOS 开发文档有一个示例，您可以将属性添加到表单元素。

[http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DesigningForms/DesigningForms.html](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/DesigningForms/DesigningForms.html)

所以也许你可以将它添加到表单元素中，它不是一个 asp 命名空间控件。验证器可能会哭，但您可能不会收到编译错误。

# python - python：多处理管理

> ID：13725885
> 
> 赞同：1
> 
> 时间：2012-12-05T14:53:00.503
> 
> 标签：python, multiprocessing, cpu-cores

使用多处理 python 库我可以启动多进程，比如

```
import multiprocessing as mu

def worker(n)
        print "worker:", n
        n = int(1e4)
        for i in range(n):
                for j in range(n):
                        i*j 
        return

if __name__ == '__main__':
        jobs = []
        for i in range(5):
                p = mu.Process(target=worker, args=(i,))
                jobs.append(p)
                p.start() 
```

我可以得到处理器（cpu核心）的数量

```
np = mu.cpu_count() 
```

但是如果我有一个进程列表，我如何启动而不会使处理器过度充电？
如果我有一个四核，我如何启动前 4 个进程？并在完成一个进程时启动其他进程。

### 参考

*   [http://pymotw.com/2/multiprocessing/basics.html](http://pymotw.com/2/multiprocessing/basics.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:59:40.790

我建议绕过问题并使用`multiprocessing.Pool`（[例如](http://docs.python.org/2/library/multiprocessing.html#using-a-pool-of-workers)，[api](http://docs.python.org/2/library/multiprocessing.html#module-multiprocessing.pool)）。

（从文档中的示例修改）

```
from multiprocessing import Pool

def f(x):
    return x*x

if __name__ == '__main__':
    num_proc = multiprocessing.cpu_count()
    pool = Pool(processes=num_proc)
    res = pool.map(f, range(10)) 
```

或者，您可以设置生产者/消费者方案并拥有固定数量的长时间运行的子流程。

第三种真正快速而肮脏的方法是使用一个`mu.Queue`. 请注意，`get`在获得结果之前会一直阻塞。

```
import multiprocessing as mu
import time
res = mu.Queue()

def worker(n):
    print "worker:", n
    time.sleep(1)
    res.put(n)
    return

if __name__ == '__main__':
    jobs = []
    np = mu.cpu_count()
    print np
    # start first round
    for j in range(np):
        p = mu.Process(target=worker, args=(j,))
        jobs.append(p)
        p.start()
    # every time one finishes, start the next one
    for i in range(np,15):
        r = res.get()
        print 'res', r
        p = mu.Process(target=worker, args=(i,))
        jobs.append(p)
        p.start()
    # get the remaining processes 
    for j in range(np):
        r = res.get()
        print 'res', r 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:48:32.703

我做这个解决方案

```
import multiprocessing as mu

def worker(n):
        print "worker:", n
        n = int(1e4/2)
        for i in range(n):
                for j in range(n):
                        i*j
        return

if __name__ == '__main__':
        jobs = []
        for i in range(5):
                p = mu.Process(target=worker, args=(i,))
                jobs.append(p)

        running = []
        np = mu.cpu_count()

        for i in range(np):
                p = jobs.pop()
                running.append(p)
                p.start()

        while jobs != []:
                for r in running:
                        if r.exitcode == 0:
                                running.remove(r)
                                p = jobs.pop()
                                p.start()
                                running.append(p) 
```

# java - Java：InputStreams 和 OutputStreams 被共享

> ID：13725886
> 
> 赞同：2
> 
> 时间：2012-12-05T14:53:08.243
> 
> 标签：java, inputstream, outputstream, datainputstream

我可以分享一个`InputStream`or`OutputStream`吗？

例如，假设我首先有：

```
DataInputStream incoming = new DataInputStream(socket.getInputStream())); 
```

...`incoming`作为一个对象变量。后来我暂时做：

```
BufferedReader dataReader = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

我知道流是具体的，并且从它读取它会消耗它的输入，无论它是从哪里完成的......但是在完成上述操作之后，我仍然可以同时访问两者还是`incoming`只是连接到一个对象并因此丢失它一旦我声明输入？我知道如果我关闭然后我也会关闭套接字并且我会避免这样做但是我想知道在将它“转移”到之后是否需要以某种方式“回收”它？我必须这样做吗：`dataReader``InputStream``incoming``dataReader``dataReader``InputStream``incoming``dataReader`

```
incoming = new DataInputStream(socket.getInputStream()); 
```

在整个手术之后再次？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T15:01:02.387

您正在使用茶匙和铲子从孔中清除污垢。

> 我知道流是具体的，从它读取将消耗它的输入，无论它是从哪里完成的

正确的。茶匙和铲子都可以从孔中清除污垢。**如果您正在异步（即同时）清除污垢，您可能会为谁拥有什么污垢而争吵 - 所以使用并发构造来提供互斥访问**。如果访问不是并发的，换句话说......

1）从孔中移出一或多茶匙污垢
2）从孔中移出一或多铲污垢
3）从孔中移出一或多茶匙污垢
...

没问题。茶匙和铲子都可以去除污垢。但是一旦污垢被去除，它就会被去除，它们不会得到同样的污垢。希望这可以帮助。让我们开始铲，我会用茶匙。:)

正如快速反应所发现的那样，在共享流时要非常小心，尤其是缓冲的阅读器，因为它们可以从流中吞噬比他们需要的更多的字节，所以当你回到你的其他输入流（或阅读器）时，它可能看起来像一大堆字节已被跳过。

**证明您可以从相同的输入流中读取：**

```
import java.io.*;

public class w {

    public static void main(String[] args) throws Exception {

        InputStream input = new FileInputStream("myfile.txt");
        DataInputStream b = new DataInputStream(input);

        int data, count = 0;

        // read first 20 characters with DataInputStream
        while ((data = b.read()) != -1 && ++count < 20) {
            System.out.print((char) data);
        }
        // if prematurely interrupted because of count
        // then spit out last char grabbed
        if (data != -1)
            System.out.print((char) data);

        // read remainder of file with underlying InputStream
        while ((data = input.read()) != -1) {
            System.out.print((char) data);
        }
        b.close();
    }
} 
```

输入文件：

```
hello OP
this is
a file
with some basic text
to see how this
works when moving dirt
from a hole with a teaspoon
and a shovel 
```

输出：

```
hello OP
this is 
a file
with some basic text
to see how this
works when moving dirt
from a hole with a teaspoon
and a shovel 
```

**证明 BufferedReader 不能保证工作，因为它会从流中吞噬大量字符：**

```
import java.io.*;

public class w {

    public static void main(String[] args) throws Exception {

        InputStream input = new FileInputStream("myfile.txt");
        BufferedReader b = new BufferedReader(new InputStreamReader(input));

        // read three lines with BufferedReader
        String line;
        for (int i = 0; (line = b.readLine()) != null && i < 3; ++i) {
            System.out.println(line);
        }

        // read remainder of file with underlying InputStream
        int data;
        while ((data = input.read()) != -1) {
            System.out.print((char) data);
        }
        b.close();
    }
} 
```

输入文件（同上）：

```
hello OP
this is
a file
with some basic text
to see how this
works when moving dirt
from a hole with a teaspoon
and a shovel 
```

输出：

```
hello OP
this is
a file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T14:57:17.970

这将是灾难性的。两个流都将具有损坏的数据。Java 怎么可能知道将哪些数据发送到哪个 Stream？

如果您需要用相同的数据做两件不同的事情，最好将它存储在某个地方（可能将其复制到两个[`Queue<String>`](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)），然后以这种方式读取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T17:02:51.993

好的，我自己解决了这个问题。有趣的链接：

[http://www.coderanch.com/t/276168//java/InputStream-multiple-Readers](http://www.coderanch.com/t/276168//java/InputStream-multiple-Readers)

[Java 中 InputStream 的多个阅读器](https://stackoverflow.com/questions/5034311/multiple-readers-for-inputstream-in-java)

基本上......`InputStream`可以连接到多个对象，从中读取并使用它。但是，a会提前读取，因此当涉及其中一个时，当您从例如 a 切换到 a`BufferedReader`时实现某种信号可能是一个好主意（也就是说，您想使用突然而不是)。因此，一旦我知道所有要处理的数据都已发送，我就停止向其发送数据。在此之后，我等待另一部分处理它应该使用. 然后它会发送一个信号以表明它已准备好接受新的输入。发送部分应该是阻塞的，直到它接收到信号输入，然后它才能再次开始发送数据。如果我不使用`BufferedReader``DataInputStream``DataInputStream``InputStream``BufferedReader``InputStream``BufferedReader``BufferedReader``BufferedReader`在此之后，它将没有机会缓冲所有输入并从中“窃取”它，`DataInputStream`并且一切都运行良好:) 但是请注意，从 中进行一次读取操作`BufferedReader`，您将回到相同的情况。 .. 很高兴知道！

# android - Android YoutubePlayer API

> ID：13725891
> 
> 赞同：2
> 
> 时间：2012-12-05T14:53:23.183
> 
> 标签：android, youtube-api

Android Youtube Player API 何时可供开发人员使用。Google 网站上是否有可用的 jar 文件，或者何时将其作为 API 公开发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T01:16:37.880

它现在可用。更多信息在这里：[http ://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:04:52.163

[http://www.youtube.com/watch?v=3WFsx-u-q3Y&feature=player_embedded](http://www.youtube.com/watch?v=3WFsx-u-q3Y&feature=player_embedded)

到现在还没有发布，我也在等Youtubeplayer API...

这是 android 播放器的替代解决方案 - [http://blog.denivip.ru/index.php/2011/09/developing-video-player-for-android/?lang=en](http://blog.denivip.ru/index.php/2011/09/developing-video-player-for-android/?lang=en)

如果除此之外..让我知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T21:37:07.667

看看[YouTubePlayerAPI 分发时间表？](https://stackoverflow.com/questions/12479365/youtubeplayerapi-schedule-for-distribution).

当时（9 月 18 日），他们希望“尽快”发布。从此再无更新。我一直在看[http://apiblog.youtube.com/](http://apiblog.youtube.com/)希望看到那里提到的东西。

我希望我们至少能在 5 月的下一次 I/O 会议上看到它可用！

我不确定 Kumar 的链接是否会有所帮助，除非它的 videoView 可以处理更高分辨率的 youtube api 链接提供的 mp4。

# android - WebView 的 Android 问题并覆盖 url

> ID：13725893
> 
> 赞同：1
> 
> 时间：2012-12-05T14:53:32.103
> 
> 标签：android, https, webview, url-redirection

下面是我们用来加载 WebView 的代码。捕获 url 并重定向到新的活动页面是使用“shouldOverrideUrlLoading”完成的，一旦用户单击 web 视图中 html 页面中的登录按钮。但是在加载页面时，页面在安全检查后重定向（重定向到 https 页面）并且控制进入“shouldOverrideUrlLoading”功能并将活动变为空白。如果我们删除“shouldOverrideUrlLoading”功能，我们可以在 WebView 上看到登录屏幕。但是我们无法参加新的活动。我试图捕获重定向 url 并将其加载到“shouldOverrideUrlLoading”函数中，但它不允许加载内容。我尝试从同样不起作用的“shouldOverrideUrlLoading”函数中返回不同条件的真假。

任何人都可以建议我在从安全检查重定向后在 WebView 中加载登录页面并在登录后覆盖 url 并重定向到新活动后需要做什么？

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login_page);
        WebView webview = (WebView) findViewById(R.id.wvLogin);     
        setContentView(webview);            
        webview.setWebViewClient(new WebViewClient()
                    {
        // Override URL         
        public boolean shouldOverrideUrlLoading(WebView view, String url)
        {
              if(url.equals("http://Url which needs to override after login"))
              {                             
                    Intent i = new Intent(getApplicationContext(), APImages.class);
                    startActivity(i);                         
              }                             
              return true;
        }

    });                                     
        webview.loadUrl("http://Login Page Url");

  } 
```

# delphi - TIdHMACSHA256.TIdHMACSHA384.TIdHMACSHA512 在 Delphi 中不起作用

> ID：13725895
> 
> 赞同：4
> 
> 时间：2012-12-05T14:53:39.127
> 
> 标签：delphi, indy

为什么 TIdHMACSHA256+ (Indy/delphi) 的 HashValue 函数总是返回空？例如，下面的代码不起作用。

```
var
  Hash: TIdHMACSHA256 ;
  HashValue: TBytes;
begin
  SetCurrentDir(ExtractFilePath(ParamStr(0)));
  Hash := TIdHMACSHA256 .Create;
  try
    Hash.Key := TEncoding.ASCII.GetBytes('devaee2');
    HashValue := Hash.HashValue(TFile.ReadAllBytes('menu.xml'));
    // HashValue is an empty array, why?
    Tag := Length(HashValue);
    TFile.WriteAllBytes('menu.xml.hash', HashValue);

  finally
    FreeAndNil(Hash);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:42:17.190

问题是您没有成功加载实现哈希所需的 OpenSSL 库。打电话`IdSSLOpenSSL.LoadOpenSSLLibrary`。您还需要确保您的程序可以找到合适的 OpenSSL DLL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-05T15:48:15.580

快速查看 Indy 10 源，他们没有编码 SHA256-512r 哈希，而是使用某种系统哈希 (??)。请检查 TIdHashSHA256.IsAvailable - 它很可能会返回 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-28T04:00:26.350

查找组件 TDCP（尝试[https://bitbucket.org/wpostma/dcpcrypt2010](https://bitbucket.org/wpostma/dcpcrypt2010)）。源码完整。在 Rad Studio 2007 上运行良好......来自 Delphi 的 XE5 Native，你有 SHA1 但没有 SHA2 和其他（我认为是因为法律，或者我不知道......）

# javascript - 如何从 DIV 中获取选定的文本

> ID：13725896
> 
> 赞同：1
> 
> 时间：2012-12-05T14:53:39.687
> 
> 标签：javascript

我从 textarea 获取选定的文本，但无法从 div 获取。我正在尝试使用 document.getElementById('myDiv') 但它不起作用。

更加具体。当我有文本时，使用这种方法我可以获得选定的文本

```
function TestSelection () 
{
            if (window.getSelection) {  
                var selectionRange = window.getSelection(); 
                alert ("The text content of the selection:\n" + selectionRange.toString());
            }
} 
```

但我不能指定 div 来获取它的选定文本。仅来自此 div，而不来自另一个。我试过了`var value = document.getElementById("myDiv").innerHTML;` ，`value.getSelection`但它也不起作用。非常感谢！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-21T21:58:07.143

只需执行以下操作：

```
var ss=getSelection();

ss.baseNode.data.substring(ss.baseOffset,ss.extentOffset); 
```

![在此处输入图像描述](../Images/ad244cda0db538f2638ab60b8dfd3bae.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T14:54:56.317

使用[innerHTML](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)属性

```
var html = document.getElementById('myDiv').innerHTML; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T14:55:20.673

你应该使用[`innerHTML`](https://developer.mozilla.org/en-US/docs/DOM/element.innerHTML)属性：

```
var value = document.getElementById("myDiv").innerHTML; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T14:58:13.520

你应该使用[选择](https://developer.mozilla.org/en-US/docs/DOM/Selection)

```
var selObj = window.getSelection();
window.alert(selObj); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-05T14:57:01.647

对于 jQuery

```
var str = $("#myDiv").text(); 
```

str 是文本

# c# - DataGrid 上的对象处理异常

> ID：13725900
> 
> 赞同：0
> 
> 时间：2012-12-05T14:53:46.020
> 
> 标签：c#, datagrid, compact-framework, dispose

我有一个 DataGrid，出于某种原因，我必须将其声明为全局。在第一次使用时，一切似乎都运行良好。但是当我返回表单进行另一次尝试时，会调用对象处理异常。无论如何我可以防止这种情况发生吗？像处理公共数据网格什么的？这是我的代码示例：

```
public static DataGrid dataGrid = new DataGrid();
public myForm()  
{
InitializeComponent();
dataGrid.Location = pt;
dataGrid.Font.Name = "Tahoma";
dataGrid.Font.Size = 9;
dataGrid.BackgroundColor = Color.Azure;
dataGrid.GridLineColor = Color.Black;
dataGrid.ColumnHeadersVisible = false;
dataGrid.RowHeadersVisible = false;
dataGrid.PreferredRowHeight = 60;
this.Controls.Add(dataGrid);
dataGrid.Height = 524;
dataGrid.Width = 468;
dataGrid.CurrentCellChanged += new
EventHandler(dataGrid_CurrentCellChanged);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:22:32.203

A `Form`（或实际上是 any `Control`）在处置时处置其子控件。所以你看到的是正常的。

要实现您想要的，您需要在释放 DataGrid 之前从 Form 的 Controls 集合中删除它。

**更新**

正如@ctacke 在评论中所说，几乎可以肯定有替代方案可以避免您需要制作`DataGrid`静态内容，但如果没有更多细节，很难做出推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:46:50.377

如果您要拥有一个静态控件，至少要为其提供一个包装器，以便您可以捕获和处理您的问题。

考虑将您的代码修改为如下所示。一旦你解决了你的错误，你就可以消除任何你不需要的东西。

```
private static DataGrid dataGrid;
private static myForm myInstance;

public myForm()  
{
  InitializeComponent();
  myInstance = this; // set 'myInstance' before DataGrid1 stuff
  DataGrid1.Height = 524;
  DataGrid1.Width = 468;
  DataGrid1.CurrentCellChanged += new EventHandler(dataGrid_CurrentCellChanged);
}

public static DataGrid DataGrid1 {
  get {
    try {
      if ((myInstance == null) || myInstance.IsDisposed) {
        throw new Exception("myForm is already disposed. No controls available.");
      }
      if ((dataGrid == null) || dataGrid.IsDisposed) {
        dataGrid = new DataGrid();
        dataGrid.Location = pt;
        dataGrid.Font.Name = "Tahoma";
        dataGrid.Font.Size = 9;
        dataGrid.BackgroundColor = Color.Azure;
        dataGrid.GridLineColor = Color.Black;
        dataGrid.ColumnHeadersVisible = false;
        dataGrid.RowHeadersVisible = false;
        dataGrid.PreferredRowHeight = 60;
        this.Controls.Add(dataGrid);
      }
    } catch (Exception err) {
      Console.WriteLine(err); // put a breakpoint HERE
    }
    return dataGrid;
  }
  set {
    try {
      if ((myInstance == null) || myInstance.IsDisposed) {
        throw new Exception("myForm is already disposed. No controls available.");
      }
      if ((dataGrid == null) || dataGrid.IsDisposed) {
        dataGrid = new DataGrid();
        dataGrid.Location = pt;
        dataGrid.Font.Name = "Tahoma";
        dataGrid.Font.Size = 9;
        dataGrid.BackgroundColor = Color.Azure;
        dataGrid.GridLineColor = Color.Black;
        dataGrid.ColumnHeadersVisible = false;
        dataGrid.RowHeadersVisible = false;
        dataGrid.PreferredRowHeight = 60;
        this.Controls.Add(dataGrid);
      }
    } catch (Exception err) {
      Console.WriteLine(err); // put a breakpoint HERE
    }
    dataGrid = value;
  }
} 
```

最后，确保您的`dataGrid_CurrentCellChanged`事件处理程序（以及程序中的所有其他内容）引用这个公共`DataGrid1`对象，而不是`dataGrid`- 否则您会发现自己再次遇到同样的错误。

# java - 在服务器启动时初始化同步线程池执行器

> ID：13725903
> 
> 赞同：0
> 
> 时间：2012-12-05T14:53:59.430
> 
> 标签：java, multithreading, singleton, synchronized

我想用我定义的属性初始化同步静态单例线程池执行器。

我希望它在整个应用程序中都可用，并且应该在服务器重新启动或停止时被销毁。

```
public class ThreadPoolExecutor extends java.util.concurrent.ThreadPoolExecutor {
    private static Properties properties;
    static {
        try {
            properties.load(ThreadPoolExecutor .class.getClassLoader().getResourceAsStream("config.properties"));
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    static final int defaultCorePoolSize = Integer.valueOf((String) properties.get("CORE_POOL_SIZE"));
    static final int defaultMaximumPoolSize = Integer.valueOf((String) properties.get("MAX_POOL_SIZE"));
    static final long defaultKeepAliveTime = Integer.valueOf((String) properties.get("KEEP_ALIVE_TIME"));
    static final TimeUnit defaultTimeUnit = TimeUnit.MINUTES;
    static final BlockingQueue<Runnable> workQueue = new LinkedBlockingQueue<Runnable>();
    private static ThreadPoolExecutor instance;

    private ThreadPoolExecutor() {
        super(defaultCorePoolSize, defaultMaximumPoolSize, defaultKeepAliveTime, defaultTimeUnit, workQueue);
    }

    synchronized static ThreadPoolExecutor getInstance() {
        if (instance == null) {
            instance = new ThreadPoolExecutor();
        }
        return instance;
    } 
```

这就是我到目前为止所做的（我是多线程的新手）。

由于我的应用程序完全基于多线程，我如何在这里实现我的要求和任何需要改进的地方！正如我所说，我如何在整个应用程序中维护/使其可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:03:17.280

使用在您的[ServletContextListener](http://download.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)`web.xml`中实现的类：

```
<web-app>
    <!-- ... -->
    <listener>
        <listener-class>com.domain.ThreadPoolManager</listener-class>
    </listener>
</web-app> 
```

该类`ThreadPoolManager`应覆盖方法[`contextInitilized(ServletContextEvent)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)和[`contextDestroyed(ServletContextEvent)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextDestroyed%28javax.servlet.ServletContextEvent%29). 该方法[`contextInitilized(ServletContextEvent)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextInitialized%28javax.servlet.ServletContextEvent%29)在 Web 应用程序初始化过程开始时被调用。所以，你应该在那里做你的初始化工作。类似地，[`contextDestroyed(ServletContextEvent)`](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html#contextDestroyed%28javax.servlet.ServletContextEvent%29)当 servlet 上下文即将关闭时，将调用该方法。所以，你应该在那里做你的清理工作。

# mongodb - mongo --shell file.js 和“使用”语句

> ID：13725904
> 
> 赞同：5
> 
> 时间：2012-12-05T14:53:59.820
> 
> 标签：mongodb, sublimetext2, sublimetext3

找不到简单问题的解决方案：

我有文件**text.js**

```
use somedb
db.somecollection.findOne() 
```

当我在 cmd 中使用来自文件的重定向命令运行此文件时： **“mongo < text.js”**

它**工作正常**

但是当我尝试这种方式时

“mongo text.js”或“mongo --shell test.js”

我收到此错误消息

MongoDB shell 版本：2.2.0 连接到：测试类型“帮助”寻求帮助 Wed Dec 05 16:05:21 SyntaxError: missing ; 之前的语句*pathToFile* \test.js.js:1 加载失败： *pathToFile* \test.js.js

“使用 somedb”失败了。如果我删除此行，它会正常运行，但控制台很清楚。

有什么想法，这是什么以及如何解决？

我正在为此寻找解决方案，为 Sublime Text 2 创建构建工具。默认构建文件是

```
{
"cmd": ["mongo","$file"]
} 
```

但在这种情况下，我得到了上面的错误

PS。发布此问题后，我立即找到了**SublimeText2**的解决方案：

```
{
"selector": "source.js",
"shell":true,
"cmd": ["mongo < ${file}"]
} 
```

PSS。发布此问题后，我立即找到了**SublimeText3**的解决方案：

```
{
"selector": "source.js",
"shell":true,
"cmd": ["mongo","<", "$file"]
} 
```

这个构建工具正常工作

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-05T22:39:23.067

`use dbname`是交互式 shell 中的一个辅助函数，当您将 mongo shell 与 JS 脚本文件一起使用时，它不起作用。

对此有多种解决方案。最好的一个，IMO 是像这样显式地将数据库名称以及主机和端口名称传递给 mongo：

`mongo hostname:27017/dbname`mongoscript.js // 用你的端口号替换 27017

更好的方法是在脚本开头定义数据库：

```
mydb=db.getSiblingDB("yourdbname");
mydb.collection.findOne();
etc. 
```

后者更可取，因为它允许您在需要时在同一个脚本中与多个数据库进行交互。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:40:07.963

您可以在启动 mongo 客户端时指定数据库：

```
mongo somedb text.js 
```

要从客户端获取输出到标准输出，只需在脚本中使用 printjson 函数：

```
printjson(db.somecollection.findOne()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T16:19:31.950

需要从 shell 调用 Mongo 才能获得该模式，使用 Ansible 你会得到这个：

```
- name: mongo using different databases
  action: shell /usr/bin/mongo < text.js 
```

而不是这个：

```
- name: mongo breaking
  command: /usr/bin/mongo < text.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-05T16:24:51.997

这就是最终在 Windows + Sublime Text 2 + MongoDB 2.6.5 上为我工作的方法

```
{
    "selector": "source.js",
    "shell":true,
    "cmd": ["mongo","<", "$file"],
    "working_dir" : "C:\\MongoDB\\bin"
} 
```

# iphone - 如何在文本标签而不是键中获取数组的值

> ID：13725908
> 
> 赞同：1
> 
> 时间：2012-12-05T14:54:10.127
> 
> 标签：iphone, objective-c, ios, arrays, label

我有一个文本标签，当我按下按钮时会改变，标签确实会随着数组的使用而改变，但是我得到的不是数组的值，而是数组的键。

我应该怎么做才能获得价值？

这是代码：

```
 NSString*path = [[NSBundle mainBundle]pathForResource:@"words" ofType:@"plist"];
    words = [[NSMutableArray alloc]initWithContentsOfFile:path];
    NSString*generateRandomLabel =[NSString stringWithFormat:@"%d", arc4random_uniform([ words count])];
    [self.randomLabel setText:generateRandomLabel]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:57:36.877

```
NSString*path = [[NSBundle mainBundle]pathForResource:@"words" ofType:@"plist"];
words = [[NSMutableArray alloc]initWithContentsOfFile:path];
NSString*generateRandomLabel = nil;
if ([words count] >0)
    generateRandomLabel = [NSString stringWithFormat:@"%@", [words objectAtIndex:arc4random_uniform([ words count]-1)]]; // To make sure object is not out of bounds of array add -1
else
    generateRandomLabel = @"No values in array";
[self.randomLabel setText:generateRandomLabel]; 
```

# oauth-2.0 - 使用 OAuth2 设备配置文件支持实现授权服务器

> ID：13725910
> 
> 赞同：0
> 
> 时间：2012-12-05T14:54:14.807
> 
> 标签：oauth-2.0, dotnetopenauth

我正在尝试实现支持 OAuth2 设备配置文件的 OAuth2 授权服务器。这不在最终的 RFC 中，但在 2010 年之前一直处于草稿中。您可以在此处找到草稿：

[https://datatracker.ietf.org/doc/html/draft-recordon-oauth-v2-device-00](https://datatracker.ietf.org/doc/html/draft-recordon-oauth-v2-device-00)

如何利用 DotNetOpenAuth 完成此任务？我目前正在使用 AuthorizationServer 示例，但收效甚微。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:18:26.953

DotNetOpenAuth 尚未声称支持设备配置文件规范。虽然您*可以*使用该库来完成此操作，但据我所知，以前从未这样做过。我建议您提交此功能[的请求](http://dotnetopenauth.uservoice.com/)

# php - 如何为设备制作文档查看器？

> ID：13725914
> 
> 赞同：-4
> 
> 时间：2012-12-05T14:54:17.973
> 
> 标签：php, image, codeigniter, device, document

我需要为设备（ipad、iphone 等，没关系）制作文档（doc、pdf）查看器。用户上传一个文档文件并希望在他的设备上查看它。我正在使用 php，代码点火器，尽管这并不重要。

最好的方法是什么？

我所能想到的就是将文档转换为图像（例如[为 DOC、TXT 和 RTF 文件生成预览图像](https://stackoverflow.com/questions/4171863/generating-preview-images-for-doc-txt-and-rtf-files)），然后将图像扔到设备上供用户查看。

有没有更简单/更有效/其他方式？我错过了什么，比如魔法解析器吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:34:15.857

您有几个关于 PDF 的选项：

*   将 PDF 转换为 swf：[http ://www.swftools.org/pdf2swf.html](http://www.swftools.org/pdf2swf.html)
*   使用 scribd API 嵌入：[http ://www.scribd.com/developers](http://www.scribd.com/developers)
*   将 PDF 转换为 HTML：http: [//sourceforge.net/projects/pdftohtml/](http://sourceforge.net/projects/pdftohtml/)

现在，关于 doc 这个词……它变得更难了。我的方法是使用[www.phpdocx.com](http://www.phpdocx.com)（我认为你至少需要 Pro+ 版本）/ [www.phplivedocx.org](http://www.phplivedocx.org)（这个作为服务工作），或者，如果运行 Windows 服务器是一种选择，可以在服务器上安装 word 并根据需要使用[COM](http://php.net/manual/en/book.com.php)转换文档（它可以保存为 xml 或 html - 甚至是 pdf）。

AFAIK 没有一个统一的包装器或库可以处理它。

编辑：还有使用 OpenOffice 转换 word 文档的选项（免费且在 linux 上运行）

# c# - 如何在忽略时区问题的情况下从 SQL Server 获取 DateTime 数据？

> ID：13725924
> 
> 赞同：5
> 
> 时间：2012-12-05T14:54:32.500
> 
> 标签：c#, sql-server, datetime, timezone

我的情况是我们将数据存储在一个SQL Server数据库中，支持2005就上去了。存储 DateTime 值时，它是客户端的本地时间。我需要能够在任何地方的任何其他客户端上获取该日期，而不考虑其他客户端可能位于的任何时区。

例如，当纽约的用户输入“2012-12-20 00:00”的 DateTime 值时，我希望加利福尼亚的用户看到相同的 DateTime 值。这些 DateTime 值不应该尊重时区的差异，但这就是我看到的情况。目前，SQL Server 会将 DateTime 作为“2012-12-19 21:00”交付给加利福尼亚用户。请注意由于从 EST 更改为 PST 导致的 -3 小时回滚，现在是前一天（出于本次对话的目的，请忘记 DST 问题）。

我需要完成的是逐字获取这些数据，而不是按时区翻译。那么你能提供什么建议呢？

**需要考虑的一些代码：**

这是表格：

```
CREATE TABLE [dbo].[tblMeterReadings](
[fldMeterReadingsID] [int] IDENTITY(1,1) NOT NULL,
[fldMeterID] [int] NOT NULL,
[fldUser] [varchar](50) NULL,
[fldBy] [varchar](50) NULL,
[fldDateOfReading] [datetime] NULL,
[fldReading] [float] NULL,
[fldIsArchived] [bit] NULL DEFAULT ((0)), 
```

我们有一个 Sql 类来完成这项工作，在下面的示例中，“sql”是该类的一个对象。使用参数化查询进行调用，其中@data0 是要存储在 SQL DateTime 字段中的 DateTime 对象：

```
sql.Execute(@"INSERT INTO tblMeterReadings (fldMeterID, fldDateOfReading) VALUES (" + MeterID + ", @data0)", Date); 
```

最终，这会设置一个 SqlCommand，分配参数，并触发一个 command.ExecuteNonQuery() 调用。

现在，要检索日期，我只需将其选择到 DataTable 中（同样，使用我们的 Sql 类助手）：

```
DataTable myTable = sql.readDataTable(@"SELECT fldMeterID, fldDateOfReading FROM tblMeterReadings"); 
```

所以我看到的是，在数据库本身中，日期是“2012-12-20 00:00”，正如我所料，但是当我在调试中检查 myTable 内容时，我看到该表中的日期是“2012- 12-19 21:00”。

该数据库是在运行在 EST 状态的机器上的 SQL Server 上创建的。但是，我的机器设置为 PST。因此，在 SELECT 中将 DateTime 值传递给我的方式有所不同。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:56:20.587

将 UTC 日期存储在数据库中。仅在客户端显示时将其转换为本地时间。

服务器端，使用`getutcdate()`而不是`getdate()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T19:21:36.407

感谢各位好心人的意见，以及根据您的建议进行的一些研究，我们已经解决了我们的问题。

特别感谢[ebyrob](https://stackoverflow.com/users/645280/ebyrob)的帮助和此链接：http: [//support.microsoft.com/kb/842545](http://support.microsoft.com/kb/842545)

该链接最终被证明是灵丹妙药。

基本问题是，当您构造 DataTable 或 DataSet 时，有关创建它的时区的信息会用它进行编码。然后，如果您通过连接将该对象传递到存在于不同时区的计算机，则其中的任何 DateTime 值都将根据时区的差异进行调整。

根据这种理解，解决方法是将`DateTimeMode`所有 DateTime DataColumns 的属性设置为`DataSetDateTime.Unspecified`. 这可以防止序列化后的日期调整，而是逐字传递 DateTime 值。

我还想指出，这篇文章指定了 DataSet，但我们已经证明 DataTable 也是易受攻击的。事实上，我很确定它归结为 DataColumn 本身（无论如何，那些具有 DateTime 类型的）。我认为文章也说明了这一点。

再次感谢；我想我们现在明白了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T15:43:58.890

您可以在任何地方查看特定时区的日期：

```
DateTime dtDateOfReading = TimeZoneInfo.ConvertTime(
    Convert.ToDateTime(myTables.Rows[i]["fldDateOfReading"]), 
    dtTimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time")
    ); 
```

如果您想要查看多个时区，则需要将时区与日期或它所在的客户站点一起存储。

注意：要小心转换后的 DateTime 值，因为它们会有一种未指定的类型，在某些情况下可能会（错误地）假定为本地。

编辑：为 SQL 连接设置时区以匹配 SQL Server 的时区可能更容易，但这篇文章： http: [//support.microsoft.com/kb/842545](http://support.microsoft.com/kb/842545)似乎表明时区配置可能不是至少由 SqlDataAdapter 支持。

# c# - 输入数据时出现 C# 表单错误，未设置为对象的实例

> ID：13725928
> 
> 赞同：1
> 
> 时间：2012-12-05T14:54:40.747
> 
> 标签：c#, forms

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form5 : Form
{
     private Pickups thePickups;
    //The pickups object being created/edited

    public Pickups appointment
    {   //Property to allow access to thePickups
        get { return thePickups; }
        set { thePickups = value; }
    }

    public Form5()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        thePickups.custName = textBox1.Text;
        thePickups.custAddress= textBox2.Text;
        thePickups.arrival = textBox3.Text;
        thePickups.delAddress = textBox4.Text;
        thePickups.delName = textBox5.Text;

        this.Hide();
        //Hide the form
    }

    private void Form5_Load(object sender, EventArgs e)
    {

      if (thePickups != null)
        {
            textBox1.Text = thePickups.custName;
            textBox2.Text = thePickups.delAddress.ToString();
            textBox3.Text = thePickups.arrival.ToString();
        } 
    }
    }
} 
```

我收到一条错误消息 - 对象引用未设置为对象的实例，这是我项目中的许多文件之一，但它是我遇到任何错误的第一个文件。我很难看到我在这里犯了错误，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T15:31:05.797

您需要确保在您创建的“约会”属性中设置了一些值。也可以在您的 button_click 事件中执行此操作。

```
private void button1_Click(object sender, EventArgs e)
{
    if(thePickups != null)
    {
        thePickups.custName = textBox1.Text;
        thePickups.custAddress= textBox2.Text;
        thePickups.arrival = textBox3.Text;
        thePickups.delAddress = textBox4.Text;
        thePickups.delName = textBox5.Text;

        this.Hide();
        //Hide the form
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:00:47.467

是我失明还是我看不到一条线

```
thePickups = new Pickups(); 
```

任何地方？

顺便说一句，form.Hide 看起来也很狡猾。你真的确定你想要它但隐藏吗？但这不会解释您的例外情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:01:31.083

您定义`thePickups`为；

```
 private Pickups thePickups;
//The pickups object being created/edited

public Pickups appointment
{   //Property to allow access to thePickups
    get { return thePickups; }
    set { thePickups = value; }
} 
```

但永远不要设置为对象的实例。然后，您尝试检查此 ojbect 实例是否`null`存在。

```
if (thePickups != null)
{

} 
```

# css - CSS: How to have to divs side by side with height 100%?

> ID：13725931
> 
> 赞同：3
> 
> 时间：2012-12-05T14:54:52.207
> 
> 标签：css, html, iframe

I am trying to create a two div's side by side that fill my screen 100%. The left div contains some menu and the right the content. Here's the code I have at the moment: [http://jsfiddle.net/HpWZW/](http://jsfiddle.net/HpWZW/) . The current problem is the height is only as large as my smallest div's content. So in this case my iframe in the right column is larger than my menu items in the left column; however, the height is limited to the left divs contents not the right. Any ideas? Thanks!

**Code**

```
<div>
    <div class="table">
        <div class="innerLeft">
            <span>Left Column</Span>
        </div>

        <div class="innerRight">
            <span>Content with Iframe</span>
        </div>
    </table>
</div>​ 
```

...

```
html, body {height: 100%}

.table {

    display: table;
    height: 100%;

}

.innerLeft {

    display: table-cell;
    min-width: 160px;    

    background-color: lightblue;
    color: black;
}

.innerRight {

    display: table-cell;
    width: 100%;
    vertical-align: top;

    background-color: red;
    color: white;
} 
```

​</p>

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:00:35.283

I have ran in the same problem so many times, until I found this: [http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

It is a valid CSS solution for making your colums share the height. Then both will be the height of the largest column.

If you want to make your colums fill the whole screen you could use something like

```
.innerLeft {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 50%; 
}

.innerRight {
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    right: 0; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:01:52.633

Note that this is css3 and wont work for old browsers.

css3

```
<style>
html, body{height:100%;padding:0;margin:0;}
        div.table, div.table *{box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;}
         div.table{width:100%;height:100%;}
          div.table div{border:1px solid black;width:50%;height:100%;float:left;}
</style> 
```

html:

```
<div class="table">
    <div class="innerLeft">
        <span>Left Column</Span>
    </div>

    <div class="innerRight">
        <span>Content with Iframe</span>
    </div>
</table> 
```

Page:

```
<!DOCTYPE html>
<html>
    <head>
        <style>
            html, body {
                height:100%;
                padding:0;
                margin:0;
            }
            div.table, div.table * {
                box-sizing:border-box;
                -moz-box-sizing:border-box;
                -webkit-box-sizing:border-box;
            }
            div.table {
                width:100%;
                height:100%;
            }
            div.table div {
                border:1px solid black;
                width:50%;
                height:100%;
                float:left;
            }
        </style>
    </head>
    <body>
        <div class="table">
            <div class="innerLeft"> <span>Left Column</span>

            </div>
            <div class="innerRight"> <span>Content with Iframe</span>

            </div>
        </div>
    </body>
</html> 
```

The above code would create two columns whenever you would like to fill the whole screen or a section.

The following code could be used to only fill the whole screen (containers behaves odd when using position absolute, there is workarounds though):

```
<!DOCTYPE html>
<html>

    <head>
        <style>
            html, body {
                height:100%;
                padding:0;
                margin:0;
            }
            #left {
                width:50%;
                height:100%;
                position:absolute;
                top:0;
                left:0;
                background:red;
            }
            #right {
                width:50%;
                height:100%;
                position:absolute;
                top:0;
                right:0;
                background:blue;
            }
        </style>
    </head>

    <body>
        <div id="left"></div>
        <div id="right"></div>
    </body>

</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T14:57:24.780

Shortest answear is to use proper table, min-height can also help you, but not all browsers respect it.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-05T15:07:44.363

Does this work for what your wanting?:

[http://jsfiddle.net/Sgfnm/](http://jsfiddle.net/Sgfnm/)

```
<div>
    <div class="table">
        <div class="innerLeft">
            <span>Left Column</Span>
        </div>

        <div class="innerRight">
            <span>Content with Iframe</span>
        </div>
    </div>
</div>

.table {

    display: block;

}

.innerLeft {

    display: block;
    width: 160px;    

    background-color: lightblue;
    color: black;
    float:left;
}

.innerRight {

    display: block;
    width: 100%;
    vertical-align: top;

    background-color: red;
    color: white;
} 
```

# javascript - AngularJS：如何将参数/函数传递给指令？

> ID：13725938
> 
> 赞同：46
> 
> 时间：2012-12-05T14:55:06.523
> 
> 标签：javascript, html, controller, scope, angularjs

看看[这个 Fiddle](http://jsfiddle.net/y85Ft/)，我需要改变什么，模板中的表达式使用我在 HTML 中定义的参数进行评估？保存按钮应该调用`blabla()`控制器的-function，因为我通过了它？

```
var myApp = angular.module('MyApp',[])
myApp.directive('editkeyvalue', function() {
    return {
        restrict: 'E',
        replace: true,
        scope: {
            accept: "expression"
        },
        template : '<div><label class="control-label">{{key}}</label>' +
        '<label class="control-label">{{key}}</label>' +
          '<input type="text" ng-model="value" />'+
        '<button type="button" x-ng-click="cancel()">CANCEL</button>' +
        '<button type="submit" x-ng-click="save()">SAVE</button></div>',

      controller: function($scope, $element, $attrs, $location) {
        $scope.save= function() {
          $scope.accept();
        };
      }
    }
}); 
```

我并没有真正看透这一点。感谢帮助！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-05T16:10:14.783

`property: '='`您可以按照 Roy 的建议设置两种方式的数据绑定。因此，如果您想要两者`key`并`value`绑定到本地范围，您会这样做

```
scope: {
    key: '=',
    value: '='
}, 
```

由于您正在传递这些值，因此您可以在指令的控制器中访问它们。但是如果您想在父范围的上下文中运行一个函数，这似乎是您想要对`accept`属性执行的操作，那么您需要像这样告诉 Angular

```
scope: {
    accept: "&"
} 
```

现在，从您的`save`方法中，您可以调用通过`accept`

```
controller: function($scope, $element, $attrs, $location) {
    $scope.save= function() {      
        $scope.accept()
    };
} 
```

这是一个[jsfiddle](http://jsfiddle.net/jaimem/y85Ft/7/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-09-15T07:50:21.730

```
scope: {
    accept: "&"
} 
```

函数名使用小写字母，否则不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T17:54:10.540

只是快速说明您不需要包装功能保存。只需在模板中调用它：

`'<button type="submit" x-ng-click="accept()">SAVE</button></div>',`

这会转置函数调用并按预期传递参数。

这简化了代码并使其更易于阅读。

# python - 为什么这个 python 代码会与自身发生冲突？

> ID：13725944
> 
> 赞同：3
> 
> 时间：2012-12-05T14:55:25.307
> 
> 标签：python

当我尝试跑步时

```
import csv
import sys
import operator

fieldnames = ["A","B","C","D","E"]
surveyfile = open("source.csv", "r")
left_file = open("left.csv",'wb')
right_file = open("right.csv",'wb')

left_reader = csv.DictReader(surveyfile, fieldnames=fieldnames, delimiter=",")
left_writer = csv.DictWriter(left_file, fieldnames, delimiter=",")
sortedlefts = sorted(left_reader,key=lambda x:float(x["B"]))

right_reader = csv.DictReader(surveyfile, fieldnames=fieldnames, delimiter=",")
right_writer = csv.DictWriter(right_file, fieldnames, delimiter=",")
sortedrights = sorted(right_reader,key=lambda x:float(x["B"]), reverse=True)

for row in sortedlefts:
    if row["E"] == "l":
        left_writer.writerow(row)

for row in sortedrights:
    if row["E"] == "r":
        right_writer.writerow(row) 
```

“right.csv”文件中没有任何反应。但是，如果我将所有与制作 right.csv 文件有关的内容放入另一个程序中，它就可以正常工作。我需要结束那个for循环吗？两者使用相同的阅读器是否有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:57:55.437

输入文件可能已用尽，所以是的，它与重用`reader`实例有关。

不知道*为什么*您希望`reader`对象神奇地知道它应该何时重新传递数据。

您需要对此更加明确，我只是建议根据需要重新创建阅读器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:02:38.800

虽然这确实是一个`reader`筋疲力尽的问题。您可以创建一个 for 循环并结合一些`itertools`帮助来解决此问题。

```
import itertools

left_reader, right_reader = itertools.tee(reader)

sortedlefts = sorted(left_reader,key=lambda x:float(x["B"]))
sortedrights = sorted(right_reader,key=lambda x:float(x["B"]), reverse=True)

for left, right in itertools.izip(sortedlefts, sortedrights):
    if left['E'] == 'l':
        left_writer.writerow(left)
    if right['E'] == 'r':
        right_writer.writerow(right) 
```

# java - Maven 尝试部署到 localhost 而不是远程服务器

> ID：13725945
> 
> 赞同：4
> 
> 时间：2012-12-05T14:55:27.060
> 
> 标签：java, tomcat, maven, tomcat7, maven-tomcat-plugin

这是我的`pom.xml`构建配置：

```
<build>
    <finalName>cfwd</finalName>
    <pluginManagement>
        <plugins>
            <plugin>
              <artifactId>maven-compiler-plugin</artifactId>
              <version>2.3.2</version>
              <configuration>
                <source>1.6</source>
                <target>1.6</target>
              </configuration>
            </plugin>
            <plugin>
              <groupId>org.apache.tomcat.maven</groupId>
              <artifactId>tomcat7-maven-plugin</artifactId>
              <version>2.0</version>        
              <configuration>
                <url>http://xx.xxx.xxx.xxx:8080/manager/text</url>
                <server>cifServer</server>
                <path>/cfwd</path>
                <addContextWarDependencies>true</addContextWarDependencies>
                <addWarDependenciesInClassloader>true</addWarDependenciesInClassloader>        
              </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

`http://xx.xxx.xxx.xxx:8080`远程服务器IP在哪里。

当我尝试通过部署时`mvn tomcat:deploy`出现此错误：

> [错误] 无法在项目 cfwd 上执行目标 org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli)：无法调用 Tomcat 管理器：服务器返回 HTTP 响应代码：URL 为 403： `http://localhost:8080/manager/deploy?path=%2Fcfwd&war=`-> [帮助1] org.apache.maven.lifecycle.LifecycleExecutionException: 无法在项目 cfwd 上执行目标 org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli): 无法调用 Tomcat 管理器

看起来maven正在尝试部署到`localhost:8080`而不是远程服务器IP。任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T15:18:09.927

您需要执行`mvn tomcat7:deploy`（注意“7”）才能触发您配置的插件。

有关可用目标的更多信息，请参阅[此页面](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/plugin-info.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:20:43.970

403 表示禁止。

检查[官方文档](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/deploy-mojo.html)以配置对 Tomcat 管理器的身份验证（参数服务器、密码、用户名）。

邓肯琼斯是对的：你没有执行正确的插件：使用 tomcat7。

# c# - 如何验证 UserControl 上的依赖属性？

> ID：13725950
> 
> 赞同：3
> 
> 时间：2012-12-05T14:55:42.627
> 
> 标签：c#, wpf, validation, mvvm

我的视图模型实现`IDataErrorInfo`并包含一个`Message`经过验证的属性。

我创建了`UserControl`一个`Text` `DependencyProperty`绑定到`Message`. my 上有几个控件`UserControl`绑定到`Text`（因此显示`Message`）。

如何在我`UserControl`的未`Message`直接绑定的控件上显示验证错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T14:47:12.750

很长一段时间后，我设法找到了一个我认为应该分享的解决方案，以防其他人发现它有用：

基本上我`PropertyChangedCallback`在我的`Text` `DependencyProperty`. 在这个回调中，我获得了`Text`视图模型上的属性和属性之间的绑定，并检查它是否存在验证错误。如果`ValidationError`找到 a ，我会检查`UserControl`绑定到的所有控件`Text`，并使用`Validation.MarkInvalid`.

编辑：

如果我将下面的代码放在按钮单击事件处理程序中，则复制这样的验证错误可以正常工作。但是，如果代码在`PropertyChangedCallback`for`Text`那么什么都不会发生。有没有人有办法解决吗？

```
// Get the binding from the Text property to the view model.
BindingExpression textBindingExpression = BindingOperations.GetBindingExpression(this,
    MyUserControl.TextProperty);

// If there is a validation error, then give it to the control bindings.
if (textBindingExpression != null && textBindingExpression.ValidationError != null) {

    Validation.MarkInvalid(this.MyTextBox.GetBindingExpression(TextBox.TextProperty),
        textBindingExpression.ValidationError);

    Validation.MarkInvalid(this.MyTextBlock.GetBindingExpression(TextBlock.TextProperty),
        textBindingExpression.ValidationError);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-19T12:24:50.927

这是我提出的解决方案，它允许`UserControl`具有依赖属性的“包装”来自它绑定的视图模型的验证。

首先，我按照[这篇文章](https://blog.scottlogic.com/2012/02/06/a-simple-pattern-for-creating-re-useable-usercontrols-in-wpf-silverlight.html)中的模式创建了所需的`DataContext`层次结构。

XAML：

```
<!-- Some boilerplate attributes snipped -->
<UserControl x:Class="App.Views.UserControls.MyUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:App.Views.UserControls"             
             Validation.ErrorTemplate="{x:Null}">

    <Grid x:Name="LayoutRoot"
          DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=local:MyUserControl}}">
         <TextBox Grid.Row="0" Grid.Column="0" Text="{Binding Text, UpdateSourceTrigger=PropertyChanged}" />
   </Grid>
</UserControl> 
```

这样，控件的 DataContext 就是从父级继承的视图模型，也就是验证完成的地方。然后在控件的根子元素上将其重写为控件本身，这允许绑定到代码隐藏中的依赖属性。另请注意，控件`ErrorTemplate`已被取消 - 这是为了防止出现默认的红色框。

现在可以很简单地从控件的代码中访问继承的视图模型：

```
private INotifyDataErrorInfo ViewModelErrors => DataContext as INotifyDataErrorInfo; 
```

现在`INotifyDataErrorInfo`在用户控件中实现并包装视图模型：

```
public bool HasErrors => ViewModelErrors.HasErrors;

public IEnumerable GetErrors(string propertyName)
{
    return ViewModelErrors.GetErrors(propertyName);
} 
```

当您需要知道您的控件依赖属性绑定到哪个模型属性时，棘手的部分就来了。如果您可以按名称查找已注册的依赖项属性并询问绑定，这将更容易，但我找不到没有反射的方法。因此，我使用了`PropertyChangedCallback`依赖属性来手动构建映射列表。回调的参数包含所有必需的信息。

```
// Maps User Control properties to their View Model properties.
private readonly Dictionary<string, string> _propertyMappings = new Dictionary<string, string>();

// This should work for any property.
private static void OnDependencyPropertyValueChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var userControl = (MyUserControl)d;
    var dependencyPropertyName = e.Property.Name;

    // Create this mapping one time only.
    if (!userControl._propertyMappings.ContainsKey(dependencyPropertyName))
    {
        // Get the binding from the property to the view model.
        var binding = BindingOperations.GetBindingExpression(d, e.Property);

        if (binding != null)
        {
            // Create a mapping of user control property to view model property.
            // This will let us look up the error from the view model.
            var boundPropertyName = binding.ResolvedSourcePropertyName;

            userControl._propertyMappings[dependencyPropertyName] = boundPropertyName;
         }
    }
} 
```

然后将其合并到`GetErrors`：

```
public IEnumerable GetErrors(string propertyName)
{
    if (ViewModelErrors != null && _propertyMappings.ContainsKey(propertyName))
    {
        return ViewModelErrors.GetErrors(_propertyMappings[propertyName]);
    }
    else
    {
        return Enumerable.Empty<string>();
    }
} 
```

这应该足够了。验证在模型中完成，并将结果下拉到用户控件。无需复制。

# android - ViewPager Circular 少于 4 次浏览

> ID：13725953
> 
> 赞同：5
> 
> 时间：2012-12-05T14:55:47.293
> 
> 标签：android, android-viewpager, carousel

我正在尝试使用 ViewPager 组件实现无限轮播。我基于[Antonyt](https://stackoverflow.com/questions/7546224/viewpager-as-a-circular-queue-wrapping)创建的一个，但使用少于 4 个视图时会出现问题。由于视图已经到位。必须是一种欺骗 Viewpager 在不同位置绘制相同视图/页面的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:53:48.213

我遇到了同样的问题，自己找不到解决方案。但我想只使用 1-4 个视图是不可能的。问题是所有视图（重复 1-4 个图像）将立即实例化（或至少在很短的时间间隔内）这会干扰图像加载过程，因为 prev 加载尚未完成，所以 prev一个返回损坏的视图。你可以处理这样的事情。

**1）**在实例化之后，使用延迟为 100-200ms 的处理程序在任一方向一次又一次（大约 10 次）翻转视图 setCurrentItem()，这样原来的 4 将超出范围（如果你有屏幕外页面限制，我希望你有因为你的代码的无限性质），稍后将一一创建。

**2）**使用多个缓冲区对象，

1 个图像 8 个缓冲区

2 个图像 - 每个 4 个缓冲区

3 个图像 - 每个缓冲区 2 个......类似这样的东西。

两者都不是理想的解决方案，但都对我有用，但是。我也想知道你尝试了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T06:14:12.563

您可能需要在 OnDestoryItem 方法中做一些工作来重新附加已分离的项目。
我已经在这里发布了我的解决方案，[https://github.com/antonyt/InfiniteViewPager/issues/2](https://github.com/antonyt/InfiniteViewPager/issues/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T15:49:39.637

解决方案是在 ViewPager 中使用相同的子视图。要做到这一点，而无需将同一个子级分配给父级，就是使用 ProxyView 和内部的真实视图。从 ViewGroup 扩展 Fake View 并覆盖 Draw 方法就可以了！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-17T08:35:42.983

尝试以下我已成功用于制作 (faux)infinite 的技巧`ListView`。

在适配器的`getCount()`方法中，返回 Integer.MAX_VALUE。

然后在适配器的`instantiateItem()`or`destroyItem()`中，使用`position % datasource.size()`

这个技巧取自[HERE](https://github.com/ragunathjawahar/circular-list-adapter)。

# ios - 如何在自动布局中滑动表格视图单元格？

> ID：13725957
> 
> 赞同：3
> 
> 时间：2012-12-05T14:56:03.483
> 
> 标签：ios, cocoa-touch, autolayout

我可以通过更改旧 ios 版本中的单元格框架来滑动 TableView 单元格的 contentView。但是，我不能在自动布局中滑动它。就我而言，我创建了一个自定义表格单元格，如下图所示：

![在此处输入图像描述](../Images/2915a05be4e9fa23c322acd61ba25808.png)

在滑动单元格之前，我已经删除了所有前导和顶部约束，但是仍然有一些约束阻止我滑动单元格，例如

```
"<NSAutoresizingMaskLayoutConstraint:0x8a39c60 h=--& v=--& UITableViewCellContentView:0x8a2f640.midX == + 160>",
"<NSAutoresizingMaskLayoutConstraint:0x8a39ca0 h=--& v=--& H:[UITableViewCellContentView:0x8a2f640(320)]>",
"<NSAutoresizingMaskLayoutConstraint:0x8a39ce0 h=--& v=--& UITableViewCellContentView:0x8a2f640.midY == + 21.5>",
"<NSAutoresizingMaskLayoutConstraint:0x8a39d20 h=--& v=--& V:[UITableViewCellContentView:0x8a2f640(43)]>" 
```

但是，如果我使用

```
 [self setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

在我的自定义单元格中，有一个问题：

```
*** -[UITableView layoutSublayersOfLayer:] 中的断言失败，/SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2012-12-05 22:45:14.987 Slider[3773:c07] *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“执行 -layoutSubviews 后仍需要自动布局。UITableView 的 -layoutSubviews 实现需要调用 super.'

```

我不知道如何解决它，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T22:15:11.573

我遇到了同样的问题。使用时出现错误

```
[aView setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

在单元格内容视图上。表格视图单元格似乎不支持此设置。

要解决此问题，请将所有内容嵌入到容器视图中，并将其添加为 tableview 单元格的子视图。

使用 UITableViewCell 子类查看此答案[“执行 -layoutSubviews 后仍需要自动布局”](https://stackoverflow.com/questions/12610783/auto-layout-still-required-after-executing-layoutsubviews-with-uitableviewcel)

# gps - gps 活动卡在 onStart()

> ID：13725961
> 
> 赞同：1
> 
> 时间：2012-12-05T14:56:10.420
> 
> 标签：gps

我想调用一个活动来获取当前的 gsp 位置并返回经度和纬度，但没有任何反应，所以我尝试了编程书中的以下简单代码：

```
{private static final String TAG = GetGps.class.getSimpleName();

private LocationManager manager;
private LocationListener listener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gps);
    // LocationManager-Instanz ermitteln
    manager = (LocationManager) getSystemService(LOCATION_SERVICE);
    // Liste mit Namen aller Provider erfragen
    List<String> providers = manager.getAllProviders();
    // Infos zu Location Providern ausgeben
    for (String name : providers) {
        LocationProvider lp = manager.getProvider(name);
        Log.d(TAG,
                lp.getName() + " --- isProviderEnabled(): "
                        + manager.isProviderEnabled(name));
        Log.d(TAG, "requiresCell(): " + lp.requiresCell());
        Log.d(TAG, "requiresNetwork(): " + lp.requiresNetwork());
        Log.d(TAG, "requiresSatellite(): " + lp.requiresSatellite());
    }
    // Provider mit grober Auflösung
    // und niedrigen Energieverbrauch
    Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_COARSE);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    // Namen ausgeben
    String name = manager.getBestProvider(criteria, true);
    Log.d(TAG, name);
    // LocationListener-Objekt erzeugen
    listener = new LocationListener() {
        public void onStatusChanged(String provider, int status,
                Bundle extras) {
            Log.d(TAG, "onStatusChanged()");
        }

        public void onProviderEnabled(String provider) {
            Log.d(TAG, "onProviderEnabled()");
        }

        public void onProviderDisabled(String provider) {
            Log.d(TAG, "onProviderDisabled()");
        }

        public void onLocationChanged(Location location) {
            Log.d(TAG, "onLocationChanged()");
            if (location != null) {
                String s = "Breite: " + location.getLatitude()
                        + "\nLänge: " + location.getLongitude();
                Toast.makeText(GetGps.this,
                        s,
                        Toast.LENGTH_LONG).show();
            }
        }
    };
}

@Override
protected void onStart() {
    super.onStart();
    Log.d(TAG, "onStart()");
    manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 3000, 0,
            listener);
}

@Override
protected void onPause() {
    super.onPause();
    Log.d(TAG, "onPause()");
    manager.removeUpdates(listener);
}} 
```

正如我所说，没有任何反应，所以这里是目录：

```
12-05 15:59:54.490: D/GetGps(6833): network --- isProviderEnabled(): true
12-05 15:59:54.490: D/GetGps(6833): requiresCell(): true
12-05 15:59:54.490: D/GetGps(6833): requiresNetwork(): true
12-05 15:59:54.490: D/GetGps(6833): requiresSatellite(): false
12-05 15:59:54.500: D/GetGps(6833): passive --- isProviderEnabled(): true
12-05 15:59:54.500: D/GetGps(6833): requiresCell(): false
12-05 15:59:54.500: D/GetGps(6833): requiresNetwork(): false
12-05 15:59:54.500: D/GetGps(6833): requiresSatellite(): false
12-05 15:59:54.500: D/GetGps(6833): gps --- isProviderEnabled(): true
12-05 15:59:54.500: D/GetGps(6833): requiresCell(): false
12-05 15:59:54.500: D/GetGps(6833): requiresNetwork(): true
12-05 15:59:54.500: D/GetGps(6833): requiresSatellite(): true
12-05 15:59:54.500: D/GetGps(6833): network
12-05 15:59:54.500: D/GetGps(6833): onStart()
12-05 15:59:54.530: D/OpenGLRenderer(6833): Flushing caches (mode 0) 
```

有人可以帮我吗？

# string - J2ME 将文本文件读入字符串数组

> ID：13725962
> 
> 赞同：1
> 
> 时间：2012-12-05T14:56:12.220
> 
> 标签：string, file-io, java-me

您能否指出我的代码中的错误在哪里？

我有一个具有以下数据结构的简单文本文件：

```
something1
something2
something3
... 
```

它导致`String[]`每个元素都是文件的最后一个元素。我找不到错误，但它在附近的某个地方出错了`line.setLength(0);`

有任何想法吗？

```
public String[] readText() throws IOException {
    InputStream file = getClass().getResourceAsStream("/questions.txt");
    DataInputStream in = new DataInputStream(file);

    StringBuffer line = new StringBuffer();
    Vector lines = new Vector();

    int c;
    try {
        while( ( c = in.read()) != -1 ) {
            if ((char)c == '\n') {
                if (line.length() > 0) {
                    // debug
                    //System.out.println(line.toString());
                    lines.addElement(line);
                    line.setLength(0);
                }
            }
            else{
                line.append((char)c);
            }
        }
        if(line.length() > 0){
            lines.addElement(line);
            line.setLength(0);
        }

        String[] splitArray = new String[lines.size()];
        for (int i = 0; i < splitArray.length; i++) {
            splitArray[i] = lines.elementAt(i).toString();
        }
        return splitArray;

    } catch(Exception e) {
        System.out.println(e.getMessage());
        return null;
    } finally {
        in.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T15:13:48.710

我看到一个明显的错误 - 您在 中`StringBuffer`多次存储同一个实例`Vector`，并且`StringBuffer`使用`setLength(0)`. 我猜你想做这样的事情

```
 StringBuffer s = new StringBuffer();
 Vector v = new Vector();

 ...
 String bufferContents = s.toString();
 v.addElement(bufferContents);
 s.setLength(0);
 // now it's ok to reuse s
 ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T15:44:53.200

如果您的问题是在 String[] 中读取文件的内容，那么您实际上可以使用 apache common 的 FileUtil 类并读取数组列表，然后转换为数组。

```
List<String> fileContentsInList = FileUtils.readLines(new File("filename"));
String[] fileContentsInArray = new String[fileContentsInList.size()];
fileContentsInArray = (String[]) fileContentsInList.toArray(fileContentsInArray); 
```

在您指定的代码中，您可以重新初始化 StringBuffer，而不是将长度设置为 0。

# iphone - 如何从 NSMutable 数组中提取值并将其放入 NSArray？

> ID：13725964
> 
> 赞同：0
> 
> 时间：2012-12-05T14:56:19.993
> 
> 标签：iphone, objective-c, ios, cocoa

我有 NSMutableArray 如下：

在.h

```
@property (nonatomic,retain) NSMutableArray *arrReceipes; 
```

在.m

```
@synthesize arrReceipe; 
```

在方法内部

```
arrReceipes = [[NSMutableArray alloc] init];    
NSArray *arrReceipesTime1;    
NSArray *arrReciepHeart;     
NSArray *arrRecipeLifestyle;     

arrReceipesTime1 = [NSArray arrayWithObjects:@"Half an hour or less",@"About an     hour",@"More than an hour", nil];     

NSDictionary *arrReceipeTime1Dict = [NSDictionary dictionaryWithObject:arrReceipesTime1 forKey:@"Find Recipes"];    

arrReciepHeart = [NSArray arrayWithObjects:@"HealthyAndDelicius", nil];    
NSDictionary *arrRecipesHeartDict = [NSDictionary dictionaryWithObject:arrReciepHeart   forKey:@"Find Recipes"];     

arrRecipeLifestyle = [NSArray arrayWithObjects:@"Recipe for fall",@"Quick and   easy",@"Cooking for kids",@"Easy entertaining",@"American classics",@"Outdoor cooking",   nil];     
NSDictionary *arrRecipeLifestyleDict = [NSDictionary dictionaryWithObject:arrRecipeLifestyle forKey:@"Find Recipes"];     

[arrReceipes addObject:arrReceipeTime1Dict];
[arrReceipes addObject:arrRecipesHeartDict];
[arrReceipes addObject:arrRecipeLifestyleDict]; 
```

那就是“arrReceipes”是我的 NSMutable 数组。

现在我想提取“arrReceipes”的值/字符串并将其放入“NSArray * somevariable”中。

我怎样才能做到这一点？

我这样做是为了：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showRecipeDetail"]) {
       NSIndexPath *indexPath = [self.tableView1 indexPathForSelectedRow];
       RecipeDetailViewController *destViewController = segue.destinationViewController;

       destViewController.recipeName = [arrReceipes objectAtIndex:indexPath.row];
    }
} 
```

在我上面的第 3 行中（在“if”中），如果我在“main”方法中给出“arrReceipes”它的抛出异常。但是，如果不是给出“arrReceipes”，我会给“somevariable”它的工作正常。

希望你能理解我的问题。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:00:59.013

您要放入的对象`arrReceipes`是字典，因此`destViewController.recipeName`如果您想将其中一个对象传递给它，则应该是字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T18:11:36.473

你可以试试

`NSArray *somevariable = [NSArray arrayWithArray:arrReceipes];`

NSMutableArray 是 NSArray 的子类，因此您可以只使用 NSArray 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T15:01:41.243

你不能在 NSArray 中写入。

但是，您可以执行以下操作：

```
NSArray * somevariable = [arrReceipes copy]; 
```

您还可以修改代码以将数据写入 NSMutableArray，然后将其复制到`arrRecipes`

# sql-server - SQL Server 连接字符串的 IP 与 localhost

> ID：13725967
> 
> 赞同：0
> 
> 时间：2012-12-05T14:56:29.747
> 
> 标签：sql-server, sql-server-2008, connection-string

假设我在 IP 为`10.1.2.3`. 如果我在该服务器上运行一个希望连接到数据库的进程，它可以使用：

*   10.1.2.3,1433
*   本地主机,1433
*   机器名,1433

第三个选项会产生更多的开销，因为它每次都需要查找 DNS 对吗？但是其他两个选项呢？对于所有意图和目的，它们是否相同？

显然 IP 可以更改，但 localhost 始终是 localhost，因此这是该选项的一个好处，但另一方面，IP 可以从网络中的任何机器使用，localhost 仅在服务器本身上，因此这是使用 IP 的一个好处。但我只关心速度/性能/可靠性/开销等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T15:01:48.593

为了速度，最好的选择是 IP，因为它避免了名称查找。但是，连接的服务器端可能存在反向查找。使用“localhost”时，您（很可能）实际上会访问 127.0.0.1，而不是外部 IP（或者您应该是，无论如何，如果您不正确的话）。这样做的好处是您可以更改机器的外部 IP，而无需更改连接字符串，并且仍然可以正常工作。

# css - 在 FF 中也无法在 Google Chrome 中选择文本，但它在 IE 10 中有效

> ID：13725968
> 
> 赞同：-2
> 
> 时间：2012-12-05T14:56:30.723
> 
> 标签：css, html, select, absolute

我目前正在开发一个网站，但我面临一个小问题。

问题是在 Google Chrome、Firefox 和 Safari 上，我无法选择文本，也无法单击页面中间的链接。

但在 IE 10 中，我可以选择文本或单击链接。

可以通过右键单击然后“查看页面源”来获得源:)

有人知道我为什么会有这种奇怪的行为吗？我认为这是因为顶部 div 与中间 div 重叠，但我不知道如何解决它:(

非常感谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:06:33.413

您需要在页脚和页眉之间的`#middle`div 内移动所有 div 及其所有内容，如下所示：`#wrapper`

```
<div id="wrapper">
   <header></header>
   <div id="middle"></div>
   <footer></footer>
</div> 
```

然后您需要将`z-index:999;`css 添加到 div `#top`。

# mysql - MySQL不会插入文本，只有数字

> ID：13725969
> 
> 赞同：1
> 
> 时间：2012-12-05T14:56:36.950
> 
> 标签：mysql, database, insert

我正在尝试将 $_POST 中的值插入 MySQL 表，如果我在表单中输入数字，它工作正常。但是，每当我输入文本时，我都会收到一条消息，例如“'字段列表'中的未知列'exampleinput'”。我是一个非常业余的编码员，所以我可能缺少一些基本的东西。Mysql 字段已经设置为 VARCHAR。我的代码如下所示：

```
mysql_query("INSERT INTO users2
            (username, primaryemail, password) VALUES($username, $newEmail, $newPassword)")
            or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:59:03.927

如果要将文本插入表格，则需要在输入周围添加引号：

```
mysql_query("INSERT INTO users2 (username, primaryemail, password)
            VALUES('$username', '$newEmail', '$newPassword')"); 
```

您还应该考虑使用[mysqli](http://php.net/manual/en/class.mysqli.php)对数据库执行查询，因为`mysql_*()`现在不推荐使用函数。

# npapi - NPAPI 支持 标签

> ID：13725973
> 
> 赞同：1
> 
> 时间：2012-12-05T14:56:46.660
> 
> 标签：npapi

我知道我可以使用带有`<embed>`标签的 NPAPI 插件，但我想知道是否可以实现将被称为`<video>`标签的 NPAPI 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T01:50:22.430

不，没有自动回`<video>`退到 NPAPI 插件。如果您想使用 NPAPI 插件来处理`<video>`，您需要为每个浏览器创建一个扩展，将`<video>`页面上的标签重写为`<embed>`/ `<object>`。

# java - 使用 java 在 Youtube 上上传视频时出现 NoLinkedYoutubeAccount 错误 401

> ID：13725974
> 
> 赞同：6
> 
> 时间：2012-12-05T14:56:46.903
> 
> 标签：java, youtube-api, google-api-java-client

我想从我的 java web 应用程序在 youtube 上上传视频：我想接收（服务器端）我的 authToken 和 form-action 以便上传视频。

*   我创建了一个新的 google/youtube 帐户
*   我在我的帐户中创建了一个 youtube 频道
*   我在我的 google 控制台 api 中创建了一个新项目作为服务帐户

现在我正在尝试使用 oAuth 2.0 实现我的代码。我有 accessToken 但是，当我尝试调用服务 getFormUploadToken(url, object) 时，响应总是相同的“ **NoLinkedYoutubeAccount 错误 401** ”。

我还通过 google 支持页面[http://www.youtube.com/my_account_unlink](http://www.youtube.com/my_account_unlink)验证了该帐户，但似乎没问题。

有人知道这个问题吗？

这是我的代码：

```
 HttpTransport HTTP_TRANSPORT = new NetHttpTransport();
    JsonFactory JSON_FACTORY = new JacksonFactory();
    String accessToken = "";
    GoogleCredential credential = null;

    credential = new GoogleCredential.Builder().setTransport(HTTP_TRANSPORT)
            .setJsonFactory(JSON_FACTORY)
            .setServiceAccountId(CLIENT_EMAIL)
            .setServiceAccountScopes("http://gdata.youtube.com")
            .setServiceAccountPrivateKeyFromP12File(new File(PRIVATE_KEY_PATH))
            .build();
    credential.refreshToken();
    accessToken = credential.getAccessToken();

    YouTubeService service = new YouTubeService(CLIENT_ID, DEV_KEY);
    service.setAuthSubToken(accessToken, null);
    VideoEntry newEntry = new YouTubeMediaGroup mg = newEntry.getOrCreateMediaGroup();
    mg.setTitle(new MediaTitle());
    mg.getTitle().setPlainTextContent("My Test Movie");

    URL uploadUrl = new URL("http://gdata.youtube.com/action/GetUploadToken");
    FormUploadToken token = service.getFormUploadToken(uploadUrl, newEntry); 
```

非常感谢，阿尔贝三世

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T16:58:41.640

正如错误所说，您尚未将帐户凭据链接到 youtube。

您可以解决这个问题： - 连接 www.youtube.com 中应用程序上使用的帐户 - 尝试上传视频 - 在 youtube 询问时设置姓名和姓氏，并处理链接到 gmail。

完毕！！！在使用我的应用程序使用 Firefox 上传视频之前，我尝试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T20:38:22.333

您无法将 YouTube 频道与服务帐户相关联，并且您尝试在服务帐户的上下文中上传。

您应该通过 OAuth 2 流程并授权访问，而不是使用服务帐户，同时使用您实际要上传到的帐户登录到浏览器。

我了解使用服务帐户的好处，但 YouTube 目前尚未设置为使用它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T07:46:53.863

如果您已创建 youtube 帐户并且已链接到您的 google 帐户，请确保您在 youtube 中创建自己的频道。

这将允许 API 将视频上传到您创建的频道。

希望能帮助到你。

# windows - 翻译快捷键

> ID：13725975
> 
> 赞同：0
> 
> 时间：2012-12-05T14:56:55.577
> 
> 标签：windows, internationalization, keyboard-shortcuts

从桌面 Windows 应用程序中提取字符串进行翻译时，我是否也应该翻译快捷键？

换句话说，即使对于中文软件，Ctrl-C 也应该复制到剪贴板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:00:15.490

是的，CTRL-C 是通用的。您可以放心地假设典型的 CTRL-something 快捷方式在所有（现代）Windows 版本中的行为都是相同的，而与语言无关。
但是，根据语言的不同，可能有多种呈现方式。例如，法语会翻译键的名称（组合保持不变）。

但是你问的是中文（大概是简体中文），它只会将它显示为 CTRL-C。毕竟，键盘布局是相同的（具有相同的符号），不同之处在于它们使用所谓的输入法编辑器。虽然有几种不同的 IME，但我还没有看到会覆盖 CTRL-C 的那个...

# validation - 如何防止取消对话框上的表单验证？

> ID：13725981
> 
> 赞同：3
> 
> 时间：2012-12-05T14:57:03.977
> 
> 标签：validation, primefaces

我有一个对话框，使用以下按钮关闭：

```
<p:commandButton
onclick="propertyEditDialog.hide(),propertyEditDialog.loaded=false" 
value="#{i18n['button.cancel']}" ajax="true"/> 
```

没有任何操作，只有客户端 javascript 只是隐藏了对话框。但是，我在日志中看到，表单在取消时得到验证。我已经设置`ajax="true"`为防止表单验证，但无论如何它都没有帮助。

在不验证表单的情况下关闭 PrimeFaces 中的对话框的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-05T15:14:48.683

`ajax="true"`是`p:commandButton`!的默认行为

正确的方法是排除蜜蜂处理的输入。使用 commandButton 中的属性`process="@this"`，只应处理按钮。

但是，如果您不想触发某些操作并且不想提交表单，也许您最好通过将属性添加`type="button"`到您的命令按钮来使用按钮（而不是提交按钮）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-18T14:18:42.163

您可以使用属性`immediate="true"`来避免验证。

# jquery - 使用 css3 变换原点居中和缩放

> ID：13725983
> 
> 赞同：9
> 
> 时间：2012-12-05T14:57:09.387
> 
> 标签：jquery, html, css

我的页面上有一系列 div。每个 div 都有一个背景图像，并以网格形式排列。我的页面上有任意数量的 div。页面被限制为使用`<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">`

我希望能够点击一个 div，让它缩放到特定的比例，然后居中。

我的标记：

```
<body id="body">
    <div id="container" style="position: relative">
        <div id="pack1" class="screenItem cardPack"></div>
        <div id="pack2" class="screenItem cardPack"></div>
        <div id="pack3" class="screenItem cardPack"></div>
        <div id="pack4" class="screenItem cardPack"></div>
    </div>
</body> 
```

我的CSS：

```
#pack1{
    margin-left: 20px;
    margin-top: 20px;
    height: 193px;
    width: 127px;
    background-image: url(../images/image1.png);
    background-size: 100% 100%;
    float: left;
    clear: both;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;     
    transition: all 1s ease-in-out;
}

#pack2{
    margin-right: 20px;
    margin-top: 20px;
    height: 193px;
    width: 127px;
    background-image: url(../images/image2.png);
    background-size: 100% 100%;
    float: right;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;     
    transition: all 1s ease-in-out;
}

#pack3{
    margin-left: 20px;
    margin-top: 20px;
    height: 193px;
    width: 127px;
    background-image: url(../images/image3.png);
    background-size: 100% 100%;
    float: left;
    clear: both;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;     
    transition: all 1s ease-in-out;
}

#pack4{
    margin-right: 20px;
    margin-top: 20px;
    height: 193px;
    width: 127px;
    background-image: url(../images/comingSoon.png);
    background-size: 100% 100%;
    float: right;
    -webkit-transition: all 1s ease-in-out;
    -moz-transition: all 1s ease-in-out;
    -o-transition: all 1s ease-in-out;
    -ms-transition: all 1s ease-in-out;     
    transition: all 1s ease-in-out;
}
#body,
.ui-page {
background-image: url(../images/bg.png);
background-size: auto 100%;
background-repeat: repeat-x;
}

#container {
margin: auto;
width: 310px;
height: 568px;
} 
```

我有一个几乎可以工作的软糖：

```
$(cardPack).click(function() {
    var left = $(cardPack).position().left;
    var top = $(cardPack).position().top;
    $(cardPack).css("-webkit-transform", "scale(2.5,2.5)");
    $(cardPack).css("-webkit-transform-origin", (3*(left/4)) + " " + (3*(top/4)));
}); 
```

但我认为这更多的是巧合和运气。我的大脑没有工作到可以锻炼设置位置的程度，`transform-origin`以便图像最终位于屏幕中心，无论其起点如何。

我很高兴考虑替代方案来`transform-origin`实现这一目标。

编辑：“与本地的行为不太一样”jsfiddle：http: [//jsfiddle.net/a7Cks/9/](http://jsfiddle.net/a7Cks/9/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T21:51:20.793

只是为了好玩，因为我们在谈论 css3，所以有纯 css 解决方案，使用`target:`选择器[http://codepen.io/dmi3y/full/keAds](http://codepen.io/dmi3y/full/keAds)，它从初始数据中清理了一下

HTML

```
 <div id="container">
    <a href="#pack1" id="pack1" class="screenItem cardPack"></a>
    <a href="#pack2" id="pack2" class="screenItem cardPack"></a>
    <a href="#pack3" id="pack3" class="screenItem cardPack"></a>
    <a href="#pack4" id="pack4" class="screenItem cardPack"></a>
  </div> 
```

较少的

```
#pack1{
    margin-left: 20px;
    margin-top: 20px;
    float: left;
    clear: both;

    &:target {
      top: 105px; left: 75px;
      margin-left: 0;
      margin-top: 0;
    }
}

#pack2{
    margin-right: 20px;
    margin-top: 20px;
    float: right;

    &:target {
      top: 105px; left: -75px;
      margin-right: 0;
      margin-top: 0;
    }
}

#pack3{
    margin-left: 20px;
    margin-top: 20px;
    float: left;
    clear: both;

    &:target {
      top: -105px; left: 75px;
      margin-left: 0;
      margin-top: 0;
    }
}

#pack4{
    margin-right: 20px;
    margin-top: 20px;
    float: right;

    &:target {
      top: -105px; left: -75px;
      margin-right: 0;
      margin-top: 0;
    }
}

#container {
  position: relative;
  margin: auto;
  width: 310px;
  height: 568px;
}

.screenItem {
  background: green;
  position: relative;
  height: 193px;
  width: 127px;
  -webkit-transition: all 1s ease-in-out;
  -moz-transition: all 1s ease-in-out;
  -o-transition: all 1s ease-in-out;
  -ms-transition: all 1s ease-in-out;     
  transition: all 1s ease-in-out;
}

:target {
  background: red;
  z-index: 100;
  padding: 10px; // + 20 px dimensions
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T17:06:02.320

给你，我的好先生。

有一个错误，如果您在动画运行时继续单击，它将再次运行。但我认为这是一个很好的方法。

使用动画：

```
 $(cardPack).animate({
            width: '50%',
            height: '50%',

        }, 700, function() {
            $(cardPack).animate({
                left: (contwidth - width * 1.5) / 2,
                top: (contheight - (height+height/2) * 1.5) / 2
            }, 300);
        }); 
```

[http://jsfiddle.net/a7Cks/11/](http://jsfiddle.net/a7Cks/11/)

添加`height/2`以使其居中于对象中间而不是对象顶部。

另一点是使用 position:absolute 来定位元素。css 中的 position:static 是多余的。

# asp.net - 如何在 ASP.NET MVC 中的浏览器缓存中确保最新的 Javascript 和 CSS

> ID：13725986
> 
> 赞同：0
> 
> 时间：2012-12-05T14:57:14.797
> 
> 标签：asp.net, asp.net-mvc-3, .net-4.0

我想确保最新版本的 js 和 css 在客户端浏览器缓存中。我已关注此链接（http://blog.robvolk.com/2009/04/ensure-latest-javascript-css-in-browser.html?showComment=1354714427404#c5850523542624593865）

问题是我没有在每次构建时都获得新的哈希码。我什至尝试清理和重建它确实具有相同的哈希码。

如果有人能建议我如何处理浏览器缓存，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:12:18.300

我建议使用脚本和样式表的捆绑和缩小。这是与 MVC 4 一起引入的一项新功能，但似乎有人能够使其与 MVC3 一起工作 - [ASP.NET MVC4 在 ASP.NET MVC3 中捆绑](http://www.jefclaes.be/2012/02/aspnet-mvc4-bundling-in-aspnet-mvc3.html)

ASP.NET 优化使用与您的解决方案类似的方法 - 它将哈希附加到脚本/样式的 URL，但此哈希基于 js/css 文件的内容，而不是基于应用程序程序集的实例。

注意：Jef Claes 的博文使用 Microsoft.Web.Optimization 包，该包已被 Microsoft.AspNet.Web.Optimization 取代，但我相信它甚至可以与 Microsoft.AspNet.Web.Optimization 包一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T07:52:51.603

**更新：**以前的版本在 Azure 上不起作用，我在下面进行了简化和更正。（注意，要在 IIS Express 的开发模式下工作，您需要从 Microsoft [http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)安装 URL Rewrite 2.0 - 它使用 WebPi 安装程序，确保首先关闭 Visual Studio）

我和它打了几天，最后自己滚了。（有关完整说明，请参见下面的链接）您基本上每次构建项目时都会自动增加程序集版本，并将该数字用于您希望保持刷新的特定资源的路由静态文件。（所以 something.js 包含在 something.v1234.js 中，每次构建项目时 1234 都会自动更改） - 我还添加了一些额外的功能，以确保在生产中使用 .min.js 文件并使用 regular.js 文件调试时（我正在使用 WebGrease 来自动化缩小过程）这个解决方案的一个好处是它可以在本地/开发模式以及生产模式下工作。（我使用的是 Visual Studio 2015 / Net 4.6，但我相信这也适用于早期版本。

要实施，您可以按照以下步骤操作：（我知道这是一篇旧帖子，但我在开发解决方案时遇到了它）：

***怎么做：*** 每次构建项目时自动增加程序集版本，并将该数字用于您希望保持刷新的特定资源的路由静态文件。（所以 something.js 包含在 something.v1234.js 中，每次构建项目时 1234 都会自动更改） - 我还添加了一些额外的功能，以确保在生产中使用 .min.js 文件并使用 regular.js 文件调试时（我正在使用 WebGrease 来自动化缩小过程）这个解决方案的一个好处是它可以在本地/开发模式以及生产模式下工作。（我使用的是 Visual Studio 2015 / Net 4.6，但我相信这也适用于早期版本。

**第 1 步：**在构建时启用程序集的自动增量在 AssemblyInfo.cs 文件中（在项目的“属性”部分下找到，更改以下行：

```
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")] 
```

至

```
[assembly: AssemblyVersion("1.0.*")]
//[assembly: AssemblyFileVersion("1.0.0.0")] 
```

**第 2 步：**在 web.config 中为具有嵌入式版本 slug 的文件设置 url 重写（参见第 3 步）

在 web.config（项目的主要部分）中，在 `<system.webServer>`我将其直接放在`</httpProtocol>`结束标记之后的部分中添加以下规则。

```
<rewrite>
  <rules>
    <rule name="static-autoversion">
      <match url="^(.*)([.]v[0-9]+)([.](js|css))$" />
      <action type="Rewrite" url="{R:1}{R:3}" />
    </rule>
    <rule name="static-autoversion-min">
      <match url="^(.*)([.]v[0-9]+)([.]min[.](js|css))$" />
      <action type="Rewrite" url="{R:1}{R:3}" />
    </rule>
  </rules>
</rewrite> 
```

**第 3 步：**设置应用程序变量以读取您当前的程序集版本并在您的 js 和 css 文件中创建版本 slug。

在 Global.asax.cs（在项目的根目录中找到）中将以下代码添加到受保护的 void Application_Start() （在注册行之后）

```
 // setup application variables to write versions in razor (including .min extension when not debugging)
            string addMin = ".min";
            if (System.Diagnostics.Debugger.IsAttached) { addMin = ""; }  // don't use minified files when executing locally
            Application["JSVer"] = "v" + System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString().Replace('.','0') + addMin + ".js";
            Application["CSSVer"] = "v" + System.Reflection.Assembly.GetExecutingAssembly().GetName().Version.ToString().Replace('.', '0') + addMin + ".css"; 
```

**第 4 步：**使用我们在 Global.asax.cs 中设置的应用程序变量更改 Razor 视图中的 src 链接

```
@HttpContext.Current.Application["CSSVer"]
@HttpContext.Current.Application["JSVer"] 
```

例如，在我的 _Layout.cshtml 中，在我的 head 部分中，我有以下样式表代码块：

```
<!-- Load all stylesheets -->
<link rel='stylesheet' href='https://fontastic.s3.amazonaws.com/8NNKTYdfdJLQS3D4kHqhLT/icons.css' />
<link rel='stylesheet' href='/Content/css/main-small.@HttpContext.Current.Application["CSSVer"]' />
<link rel='stylesheet' media='(min-width: 700px)' href='/Content/css/medium.@HttpContext.Current.Application["CSSVer"]' />
<link rel='stylesheet' media='(min-width: 700px)' href='/Content/css/large.@HttpContext.Current.Application["CSSVer"]' />
@RenderSection("PageCSS", required: false) 
```

这里需要注意几件事：1）文件上**没有扩展名**。2）也没有.min。这两个都由 Global.asax.cs 中的代码处理

同样，（也在 _Layout.cs 中）在我的 javascript 部分：我有以下代码：

```
<script src="~/Scripts/all3bnd100.min.js" type="text/javascript"></script>
<script src="~/Scripts/ui.@HttpContext.Current.Application["JSVer"]" type="text/javascript"></script>
@RenderSection("scripts", required: false) 
```

第一个文件是我使用 WebGrease 手动创建的所有第 3 方库的捆绑包。如果我添加或更改捆绑包中的任何文件（这种情况很少见），然后我手动将文件重命名为 all3bnd101.min.js、all3bnd102.min.js 等...此文件与重写处理程序不匹配，所以将一直缓存在客户端浏览器上，直到您手动重新捆绑/更改名称。

第二个文件是 ui.js（将被写为 ui.v12345123.js 或 ui.v12345123.min.js 取决于您是否在调试模式下运行）这将被处理/重写。（你可以在 Global.asax.cs 的 Application_OnBeginRequest 中设置一个断点来观察它的工作）

对此的完整讨论：[ASP.NET MVC 5 中 Javascript / CSS 的简化自动版本化以停止缓存问题（在 Azure 和本地工作）有或没有 URL 重写](https://stackoverflow.com/questions/34150401/simplified-auto-versioning-of-javascript-css-in-asp-net-mvc-5-to-stop-caching) ***（包括一种没有 URL 重写的方法）***

# exception - 在 Monomac 中捕获每个异常

> ID：13725989
> 
> 赞同：0
> 
> 时间：2012-12-05T14:57:24.350
> 
> 标签：exception, exception-handling, monomac

有人知道如何在 monomac 中捕获所有异常吗？

在 windows .net 上，我将运行循环包装在 try{}catch 中并使用：

Application.ThreadException + AppDomain.CurrentDomain.UnhandledException

很高兴能够从我正在进行 beta 测试的新 mac 软件中获取崩溃报告。

# iphone - 继承项目.. NSLog 不打印到控制台

> ID：13725991
> 
> 赞同：3
> 
> 时间：2012-12-05T14:57:33.020
> 
> 标签：iphone, objective-c, ios, xcode

我得到了一个项目文件，打开它后我注意到 NSLog 没有打印到控制台。

我试过 shift + command + c 但没有用。

奇怪的是，如果我打开他们打印到控制台的任何其他项目仍然很好。然而这个没有。这是xcode设置吗？如果是这样，为什么只有这一个项目受到影响？我该如何修复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T15:00:14.397

***1) 更新的帮助尝试***

确保从 NSLog打印出*所有内容。*您可以在控制台窗口中设置一个切换：

![应在控制台输出弹出窗口中选择所有输出](../Images/21f475e62c559393df145a142ddf20d3.png)

***2) 最初的帮助尝试***

尝试在`#undef NSLog`代码的顶部做一个“”，看看“ `NSLog`”是否再次起作用。

如果是这样，那么 Dave 是正确的……您需要搜索您的代码以查看“ `NSLog`”在哪里被重新定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T03:13:24.270

我知道这是一个旧线程，但我刚刚经历了一个 NSLog 突然停止显示的情况。我不知道究竟是什么原因造成的，但就我而言，简单地重新启动 Xcode 就可以解决问题。只是张贴以防万一它帮助别人。

# jquery - 在 jquery 中的 HTML 中添加动态行字段

> ID：13725994
> 
> 赞同：2
> 
> 时间：2012-12-05T14:57:36.923
> 
> 标签：jquery, html, jquery-selectors

我正在尝试开发一种可以将动态字段添加到表单的功能。现在这将复制现有字段，然后复制它。这是代码

```
/**
* This function is used to dynamically add or remove rows from an unordered List
**/
//For Dynamically Adding and Deleting the rows and columns
$('.addRow').click(function (e) {

    // This gets the number of textboxes
    var curMaxInput = $(this).closest('ul').find('input:text').length;

    //Clones the first row.
    var html = $(this).closest('ul').first().clone(true);

    //for every textbox the 
    html.find('input:text').each(function () {
        $(this).attr('id', $(this).attr('name') + '[' + (curMaxInput++) + ']');            
    });

    //Converting the '+' sign to '-' 
    html.find('span').removeClass('addRow').removeClass('ui-icon-plus').addClass('ui-icon-minus').addClass('removeRow');

    //Adding the onClick event to remove this row
    html.find('span').on('click', function () {
        $(this).parent().remove();
        return false;
    });

    // appending the html to the list and thus making it dynamic
    $(this).closest('ul').append(html.find('li').first());

    //avoiding Post backs if any
    return false;
}); 
```

​</p>

我能够复制它，但我能够克隆事件并将其附加到生成的新动态行字段。但是现在当我试图删除副本时，它不会删除。如果您需要更多信息，请告诉我。这是 jsfiddler 链接，以防万一你们需要更多信息 [http://http://jsfiddle.net/jshah11/QavKj/3/](http://jsfiddle.net/jshah11/QavKj/3/)

我已经根据评论更新了函数，并用它更新了 jsfiddler

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:16:12.923

感谢大家的帮助。我能够开发功能。这是可用于添加动态行字段和删除它们的函数。

```
/**
 * This function is used to dynamically add or remove rows from a un-ordered List
 **/
//For Dynamically Adding and Deleting the rows and columns
$('.addRow').click(function(e) {

// This gets the number of textboxes
var curMaxInput = $(this).closest('ul').find('input:text').length;

//Clones the first row.
var html = $(this).closest('ul').first().clone(true);

//for every textbox the 
html.find('input:text').each(function() {
    $(this).attr('id', $(this).attr('name') + '[' + (curMaxInput++) + ']');
});

//Converting the '+' sign to '-' 
html.find('span').removeClass('addRow').removeClass('ui-icon-plus').addClass('ui-icon-minus').addClass('removeRow');

//Turn off the current event
html.find('span').off('click');

//Adding the onClick event to remove this row
html.find('span').on('click', function() {
    $(this).parent().remove();
    return false;
});

// appending the html to the list and thus making it dynamic
$(this).closest('ul').append(html.find('li').first());

//avoiding Post backs if any
 return false;
});​ 
```

Here is the jsFiddler link for your references for this function [http://jsfiddle.net/jshah11/QavKj/4/](http://jsfiddle.net/jshah11/QavKj/4/)

Thanks again.

# javascript - JavaScript：是否值得将变量设为私有并定义 getter/setter？

> ID：13725995
> 
> 赞同：11
> 
> 时间：2012-12-05T14:57:39.123
> 
> 标签：javascript, oop, class, coding-style, web-standards

我想首先说我了解 JavaScript 是一种无类语言。我的背景是 Java、C++ 和 Objective-C，它们都是支持类的经典 OOP 语言。

我正在扩展到 Web 开发，并且一直在尝试使用 JavaScript 并学习它的模式。现在我正在使用在 JavaScript 中模拟类的构造函数模式。

所以这是我的“练习”课：

```
function Car( model, year, miles ) {
    this.model = model;
    this.year = year;
    this.miles = miles;

    var privateVarTest = 10;

    this.getPrivateVarTest = function() {
        return privateVarTest;
    }

    this.setPrivateVarTest = function( value ) {
        privateVarTest = value;
    }
}

Car.prototype.toString = function() {
    return this.model + " is a " + this.year + " model and has " + 
           this.miles + " miles.";
}

var myCar = new Car( "Ford Focus", "2006", "65,000" );
document.getElementById('notepad').innerHTML += '</br> Testing </br>';
document.getElementById('notepad').innerHTML += myCar.toString() + '</br>';
document.getElementById('notepad').innerHTML += myCar.model + '</br>';
document.getElementById('notepad').innerHTML += myCar.getPrivateVarTest() + '</br>';
myCar.setPrivateVarTest( 20 );
document.getElementById('notepad').innerHTML += myCar.getPrivateVarTest() + '</br>'; 
```

现在我喜欢使用`prototype`定义函数的方式，因为它不会为每个`Car`创建的对象实例化新版本的函数。然而，在经典的 OOP 语言中，我们创建变量`private`并创建`public`函数/方法来根据需要设置和获取这些变量。

JavaScript 是无类的，因此没有`private`或`public`关键字用于此用途，所以我想我会尝试一种“伪造”`private`变量的方法，然后发现 using`var`而不是`this`essential 使得它在`constructor`.能够定义允许我这样做的 getter 和 setter。

现在终于到了我的问题，对长时间的结束感到抱歉。对于经验丰富的 JavaScript 程序员的最佳实践，您是让所有变量`private`都遵循其他 OOP 语言的标准，并设置 getter 和 setter（不能为每个 Object 强制创建原型），还是尽可能避免它们，因为`this`关键字基本上可以让您获取和设置您想要的所有内容，并且仅`private`用于对课程所需的一些内部数据进行硬编码？

感谢您花时间阅读本文并参与讨论，我真的只是想了解经验丰富的 Web 开发人员用作最佳实践的标准。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-05T16:56:07.673

**一般面向对象**

我认为无论你用什么语言编写代码，getter 和 setter 基本上都是毫无意义和愚蠢的。

在大多数情况下，暴露的属性应该很少见，因为对象的任何属性通常都应该在对象的域内，因此只有对象实际上应该更改自己的内部结构作为其他操作的副作用，而不是因为其他对象直接告诉它改变一些东西。我确定有例外（总是有），但我不记得我最后一次需要做一个。

此外，当属性被公开时，使用方法公开的唯一原因是由于语言限制（Java），您不能仅仅公开属性，或者因为在更改该属性时必须进行一些验证或通知。仅仅添加 Java bean 风格的方法，这些方法除了实际更改或返回属性外，并不能保护封装。如果可以的话，你还不如把财产公开。

但是，想要从各地随意获取/设置所有内容的真正问题在于，您基本上只是编写了链式过程代码并将其称为 OOP。您仍然有一系列漫长而曲折的事情，只能根据一个接一个发生的情况来推理。使用 OOP，其想法是避免冗长缠绕的意大利面条链，因此您可以从更大的构造的角度更多地查看您的架构，这些构造拥有在关键点上相互交互的特定域。没有它，您可能会通过至少将您的函数分类到命名空间下来减少意大利面，这样就更容易知道在哪里寻找东西，但您并没有真正利用 OOP 可以为您的架构提供的关键优势。

私有或在 JS 的情况下本地构造函数/工厂关闭变量的真正价值是信号意图。如果它暴露了，那么外部真的应该改变它。如果不是，那么您已经明确表示 var 只是对象的业务。

**JS面向对象**

我的建议是忘记 JS 中的类仿真。这是完全没有必要的。一旦你理解了原型，它们就会变得优雅而简单。将构造函数的原型属性视为一种备份对象。如果你在一个实例上调用了一个它没有的方法，下一步就是检查实例的构造函数的原型对象属性。如果该对象没有它，则检查其构造函数的原型对象，依此类推，直到您最终到达核心 Object 构造函数的原型。

正是由于该查找过程，您可以动态地将新方法添加到构造函数，并让所有实例在构建后“继承”它，但它并不是真正的继承，而是回退过程。

JS 中的继承很简单。这并不意味着你应该做很多事情。长链级联继承在任何语言中都被视为一种反模式是有充分理由的，并且由于回调过程的工作方式，如果您通过 18 级原型对调用对象进行锤击，它也可以真正杀死性能JS 中的每一件小事。我会说更喜欢复合对象而不是继承，当继承似乎是一个更明智的选择时，请在您想要通过链中超过 2-3 个原型链接进行继承时检查自己。

哦，还有一个 JS 需要注意构造函数中的本地实例变量作为私有属性：这实际上只是 JS 在函数范围上下文中的闭包规则。在原型中或构造函数外部声明的方法无法访问这些内部变量。用 new 关键字调用的构造函数改变了“this”访问的规则，它们留下了一个实例，但以其他方式执行 JS 函数。

JS OOP 中其他一些疯狂但也很疯狂的值得理解的方式是 apply、call 和现在的 bind 方法。我倾向于将这些更多地视为您在工厂中想要的东西，但它们非常强大。

一旦你掌握了 JS OOP，开始从功能的角度理解 JS，你会发现它有一个非常强大的 1-2 拳组合。我们几乎可以用最少的 JS 代码轻松地做任何事情。设计权衡是性能（现代 JIT 编译器处理得非常好），并且它为您提供了很多可以吊死自己的绳索。我更喜欢绳子。自我私刑并不好玩，但这是学习/发展更好的本能过程的一部分，结果发生得更快，并且从长远来看会导致更可维护的代码。尽管 Java 基本上强制实施 OOP，但由于在开发人员对自己做愚蠢的事情方面过于保护主义，导致社区广泛采用与 OOP 的全部观点完全背道而驰的做法。

**简短版本：**

*   如果您这样做，请停止获取/设置很多内容，无论语言如何。它首先大大降低了实施 OOP 的获胜因素。
*   原型非常简单、优雅且功能强大。修补他们。学习它们。但请注意。相比之下，课程可能会开始感觉过时、笨拙和过度劳累（尽管公平地说，在非解释性语言中是完全必要的）。
*   为了让 JS 更好地为你工作，从你碰巧处理的任何方面自学废话。在原始优雅的语言能力方面的回报非常值得花时间。JS 比您列出的熟悉的语言更接近于 Scheme，所以这很奇怪，但它并不是任意奇怪或没有考虑设计原则，而且 JS 在 web UI 中的主导成功并非偶然，不管人们告诉大家我们“卡住了”有了它”会让你相信。
*   完全披露：我不喜欢 Java。

更新：

es6 class 关键字几乎没有改变 JS 中的 OOP。它是 100% 的语法糖。IMO，使用“类”这个词对新手没有任何好处，但是 JS 中对象构造器/创建和对象实例化的所有三种样式都有优点/缺点，它们都值得了解/理解。这三种方法是作为构造函数的函数、Object.create，以及现在的 class 关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T15:48:19.773

我们需要意识到我们倾向于希望我们学习的每一种新语言的行为都与我们学习的最后一种语言相同。还是第一个。等等。道格拉斯·克罗克福德（Douglas Crockford）有一个[很棒的（虽然有点过时）谷歌谈话](https://www.youtube.com/watch?v=hQVTIJBZook)，他在其中沉思道，“Javascript 是我所知道的唯一一种人们觉得在使用它之前不需要学习的语言”。那次演讲会回答很多你从来不知道的问题，包括你在这里问过的问题。

编写 setter 和 getter 并没有错。为保持自己的理智而工作很少有坏处。说 JS 时你会碰巧有“C 口音”，但至少你会清楚地告诉任何阅读你的代码的人。

我的关于跨范围管理“this”的理智保存技巧，请始终记住，您可以在进入新上下文之前保存当前的“this”：

```
var self = this; 
```

我通过在声明范围内包含我的对象方法来避免使用原型，除非在特殊情况下。

```
function MyClass(_arg){
    var self = this;
    this.arg = _arg;

    this.returnArg = function(){
         return self.arg; 
    }
}

var foo = new MyClass("bar");
foo.returnArg();  //"bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T09:39:04.707

在 OOP 的情况下，我不得不说事实上 javascript 提供了某种级别的 oop。

我的意思是，OOP 设计的 4 个主要概念可以在 javascript 中实现，尽管它不像 Java 或 C++ 那样强大且定义得很好。让我们检查一下这些概念，我将尝试为每个概念提供一个示例。

**1- 抽象**：正如我之前所说，我们可以理解为什么 OOP 没有像在 Java 中那样被很好地定义，在 Java 中我们使用类、变量、接口来实现抽象概念......但在 javascript 中，抽象是相当隐式定义的，与其他 OOP 语言，例如 Java。

**2-封装**：我想一个例子就足够了

```
function Student (stdName, stdEmail, stdAvg) {
  this.name = theName;
  this.email = theEmail;
  this.avg = stdAvg;
 } 
```

这里也正如你所看到的，我们使用函数定义了一个类似“类”的概念，实际上如果获取类型 Student，你会看到它是一个函数。

**3,4 - 继承和多态**：JavaScript 实现继承和多态的方式与 Java 或 C++ 不同，因为它的原型（老实说，我不知道任何其他方式可以这么说）方法。

```
const Gun = function(soundEffect){
  this.soundEffect = soundEffect;
};

Gun.prototype.fire = function(){
  console.log(this.soundEffect);
};

const DesertEagle = function(color,clipSize){
  this.color = color;
  this.clipSize = clipSize;
};

DesertEagle.prototype = new Gun("pew pew peeeew");

const myWeapon = new DesertEagle("black",15);

myWeapon.fire(); 
```

现在为了涵盖变量和函数的公共/私有访问，我们必须使用某种技术来实现这样的概念。检查下面的代码：

```
const Student = function(name, stdNumber, avg){
  this.name = name;
  this.stdNumber = stdNumber;
  this.avg = avg;
  var that = this; //NOTE : we need to store a reference to "this" in order for further calls to private members

  this.publicAccess = { // a set of functions and variables that we want as public
    describe: function () {
       console.log(that.name + " : " + that.stdNumber);
    },
    avg: this.avg,
  };

  return this.publicAccess; // return set of public access members
};

const newStd = new Student("john", "123", "3.4");

newStd.describe();
// output: john : 123
console.log(newStd.avg)
// output: 3.4 
```

在 ES6 中定义一个类要容易得多，但它只是语法糖，它的核心仍然是相同的东西。

我希望它会有所帮助。我还向您推荐这篇文章（[Javascript 设计模式](https://addyosmani.com/resources/essentialjsdesignpatterns/book/#constructorpatternjavascript)），它将提供一些有关 avascript 功能和设计模式的有用信息。

请接受我对我糟糕的英语的道歉。

# javascript - 与 javascript onClick 的 href 组合

> ID：13725997
> 
> 赞同：0
> 
> 时间：2012-12-05T14:57:43.143
> 
> 标签：javascript, html, onclick, hyperlink, ajax-request

你如何将一个 javascript“ **onClick** ”和一个 html“ **a href** ”合并到一个链接中？我希望当我单击链接时，第一步是“onClick”，第二步是当“onClick”成功时，您将使用“a href”重定向到另一个页面。

1.  第一步：onClick="ajaxrequest('/includes/docx/boekenlijst.php', 'docgegevens')

和

2.  第二步：a href="/Raymond_converters/docx/example.php">doc

我希望你能帮助我，但我的英语不太好。我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:07:54.863

使用 jQuery，你可以试试这个：

```
<script type="text/javascript">
    $(document).ready(function() {
        var call_ajax = true;
        $('#alink').click(function(e) {
            if (call_ajax) {
                e.preventDefault();
                // Do AJAX
                call_ajax = false;
            }
        }
</script>

<a href="http://www.google.com" id="alink">google</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:01:08.467

这并不简单，因为如果您让链接执行其默认操作，即重定向到其 href，则不会触发 AJAX 请求。

你需要做的是：

1.  处理 onclick 并取消默认操作`return false;`
2.  当 AJAX 请求完成时（在其成功回调方法中）手动将用户重定向到链接 href 位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T16:06:04.713

```
Try to use jquery with a dummy callback:

<a onclick="function1()" >function</a>

function function1(someVariable,function() {
          function2(someOtherVariable);
          window.location="http://www.yourpage.com/";   

})

function function2(someVariable, callback) {
  ...YUOR CODE HERE
  callback();
} 
```