# StackOverflow 问答 12825000-12825999

# java - 错误：androidmanifest.xml 文件丢失 --> 我错过了什么？

> ID：12825004
> 
> 赞同：21
> 
> 时间：2012-10-10T17:29:18.043
> 
> 标签：java, android, r.java-file

嗨，我对 Android 编程完全陌生，我问的问题可能非常简单，但我不知道如何让它工作，所以请多多包涵。

[我从Android 开发者网站](http://developer.android.com/training/basics/firstapp/creating-project.html)安装了 android-sdk 和相关工具。我按照他们的说明创建了一个 HelloWorld 应用程序，但我遇到了一些我不明白的错误。

文件 MainActivity.java 是一个自动生成的文件，我在这些地方不断收到这个文件中的错误：

```
@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main); // error in activity_main
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
  getMenuInflater().inflate(R.menu.activity_main, menu); // error in activity_main
   return true;
 } 
```

因此，我尝试查看生成的 layout.class 类文件，发现那里没有名为 activity_main 的变量。

谁能建议在这里做什么？任何帮助将不胜感激。

目录结构显示我确实有 AndroidManifest.xml。

当我尝试运行该应用程序时，我收到此特定错误：

```
 AndroidManifest.xml file missing!
     Unknown Android Packaging Problem 
```

这些是我在尝试使其运行时遇到的一些错误：

```
 10-10 23:31:11.305: E/Trace(946): error opening trace file: No such file or directory (2)
        10-10 23:31:11.955: E/AndroidRuntime(946): FATAL EXCEPTION: main
        10-10 23:31:11.955: E/AndroidRuntime(946): android.content.res.Resources$NotFoundException: Resource ID #0x2
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.content.res.Resources.getValue(Resources.java:1013)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.content.res.Resources.loadXmlResourceParser(Resources.java:2098)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.content.res.Resources.getLayout(Resources.java:852)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.view.MenuInflater.inflate(MenuInflater.java:107)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.example.myfirstapp.MainActivity.onCreateOptionsMenu(MainActivity.java:18)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.app.Activity.onCreatePanelMenu(Activity.java:2476)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:393)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.android.internal.policy.impl.PhoneWindow.invalidatePanelMenu(PhoneWindow.java:747)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:2913)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.os.Handler.handleCallback(Handler.java:615)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.os.Handler.dispatchMessage(Handler.java:92)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.os.Looper.loop(Looper.java:137)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at android.app.ActivityThread.main(ActivityThread.java:4745)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at java.lang.reflect.Method.invokeNative(Native Method)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at java.lang.reflect.Method.invoke(Method.java:511)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        10-10 23:31:11.955: E/AndroidRuntime(946):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-10T17:34:53.573

只需构建您的项目或将其清理为下面提到的“Clayton”。

项目 > 全部构建

项目 > 清洁

我相信这是因为您的 gen 文件夹中没有 R.java 文件。构建您的项目将`R.java`在您的`gen`文件夹中生成文件，并且错误应该会消失。

发生这种情况是因为您使用以下代码引用您的布局文件

```
setContentView(R.layout.activity_main); 
```

对的引用在需要通过构建项目生成的文件中`R.layout.activity_main`声明。`R.java`

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-03-29T19:49:09.420

项目->清洁为我工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:37:07.973

**-**首先请确保您已将 Eclipse 与 Android 正确同步。

**-**您是否在**系统环境路径**`tools`中添加了和`platform-tools`文件夹路径。

 ****-**我希望您正在创建一个 Android 项目而不是 Java。**请参阅Eclipse 中项目资源管理器中**的项目文件夹将具有`A`Android 和`J`Java 的标志。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-05T09:11:20.190

什么对我有用：

*   取消选中项目>自动构建
*   关闭项目
*   打开项目
*   清洁项目
*   手动项目>构建项目然后它工作。

最终我检查了自动构建。

我不知道“*自动构建*”是什么，当我导出我的 Google 玩游戏时（尤其是当我使用外部库，例如 AndEngine）时，它也给我带来了一些问题。

为了解决它，我做了类似的事情来解决问题（取消选中它，清理，手动构建）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T09:34:01.990

我有一个类似的问题。但是是由eclipse崩溃引起的。之后我是 AndroidManifest.xml 的 2 个交换文件和相同的错误：“AndroidManifest.xml 文件丢失！”。

所以，我删除了交换文件（.swo，.swp）

:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-30T16:10:03.120

这是构建问题。

转到 Eclipse 中的菜单，Project>clean 然后 Project>Build All

清洁指令将删除所有构建配置并修复所有构建问题。**

# database - 与“最近邻居”不完全匹配的数据库索引和查找

> ID：12825011
> 
> 赞同：1
> 
> 时间：2012-10-10T17:30:03.140
> 
> 标签：database, hash, binary, indexing, biometrics

我正在处理一个有趣的问题。

我有使用[约翰道格曼算法](http://www.cl.cam.ac.uk/~jgd1000/csvt.pdf)将人类虹膜转换为二进制代码的生物识别系统（用于我们大学的一些研究）。

虹膜代码是“扁平的”（它不是存储为圆形，而是转换为矩形）：

```
column 1 | column 2 | column 3 | ...

10011001 ...
10110111
01100010
... 
```

其中 column 代表 30 位。问题是虹膜的每次扫描都有自己的噪声掩码（眼睑，反射......），匹配不是 100%，但充其量在 96-98% 左右。

到目前为止，我们正在使用这样的算法（汉明距离匹配）：

```
mask = mask1 & mask2;
result = (code1 ^ code2) & mask;

// ration of 1 bits allowed by mask
double difference = (double)one_bits(result)/one_bits(mask); 
```

问题在于，我们现在正在构建真正的虹膜数据库（大约 1200-1300 个受试者，每个 3-5 个虹膜样本，您必须轮流计数，因此您需要为每个对象进行大约 10 次测试）。我们需要将当前样本与整个数据库进行比较（在 80*30 位上进行 65 000 次比较），结果证明这很慢。

**问题：**是否有任何散列函数反映数据结构（并且在少数位更改时仅更改一点）或“容错”？我们需要在整个数据库中构建快速搜索算法（因此我们正在寻找可能的方法来索引它）。

**更新：**我想它应该通过某种“最近邻”查找来实现，或者使用某种聚类（类似的虹膜将被分组，并且在第一轮中只检查一些代表）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-31T17:53:03.937

检查 Locality Sensitive Hashing ( [LSH](http://en.wikipedia.org/wiki/Locality-sensitive_hashing) )，这样的[实现](http://code.google.com/p/py-nilsimsa/)。

> “nilsimsa 代码类似于哈希，但与哈希不同，消息中的微小变化会导致 nilsimsa 代码发生微小变化。这样的函数称为局部敏感哈希。”

[如何理解局部敏感哈希？](https://stackoverflow.com/questions/12952729/how-to-understand-locality-sensitive-hashing/12967538#12967538)

# paypal - PayPal IPN 帮助（不更新数据库）

> ID：12825015
> 
> 赞同：1
> 
> 时间：2012-10-10T17:30:25.277
> 
> 标签：paypal, paypal-ipn

嗨，现在大家都试图让这个工作大约 2 天。付款没有问题，但没有更新数据库:(

这是代码：

```
<?php

require_once(WWW_DIR."/lib/users.php");

            // Connect to database
$con = mysql_connect("localhost","root","******");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

// read the post from PayPal system and add 'cmd'
$req = 'cmd=_notify-validate';
foreach ($_POST as $key => $value)
{
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
}
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
$fp = fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); // Test
//$fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30); // Live
// assign posted variables to local variables
$item_name = $_POST['item_name'];
$payment_status = $_POST['payment_status'];
$payment_amount = $_POST['mc_gross'];
$txn_id = $_POST['txn_id'];
$payer_email = $_POST['payer_email'];
$name = $_POST['first_name'] . " " . $_POST['last_name'];
$address_street = $_POST['address_street'];
$address_zip = $_POST['address_zip'];
$address_city = $_POST['address_city'];
$contact_phone = $_POST['contact_phone'];
$email = $_POST['payer_email'];
$uid = $users->currentUserId();
//timezone set
date_default_timezone_set('Europe/London');

if (!$fp)
{
    // HTTP ERROR
} else
{
    fputs($fp, $header . $req);
    while (!feof($fp))
    {
        $res = fgets($fp, 1024);
        if (strcmp($res, "VERIFIED") == 0)  {
if($payment_status != "Completed"){
                if($payment_amount == 2.00)
                {
                    $role = 6;
                }
                else
                if($payment_amount == 5.00)
                {
                    $role = 8;
                }
                else
                if($payment_amount == 8.00)
                {
                    $role = 9;
                }

                //update user records
$sql = sprintf("UPDATE users SET role = %d WHERE ID = %d", $role, $uid);
mysql_query($sql);  

 //log payment
            //mysql_query("INSERT INTO payments (email, item_name, payment_status, txn_id, payment_ammount) VALUES('" . mysql_escape_string($email) . "', '" . $item_name . "', '" . $payment_status . "', '" . $txn_id . "', '" . $payment_amount . "' ) ") or die(mysql_error());
      }} else
            if (strcmp($res, "INVALID") == 0)
            {
                // log for manual investigation
            }
    }
    fclose($fp);
} 
?> 
```

如果您有任何问题只要问我会尝试尽快回答如果你能得到这个工作我会很高兴

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:20:13.660

改变：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n\r\n"; 
```

至：

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Connection: close\r\n\r\n"; 
```

改变：

```
if (strcmp($res, "VERIFIED") == 0)  { 
```

至：

```
if (strcmp(trim($res), "VERIFIED") == 0)  { 
```

最后，改变：

```
if (strcmp($res, "INVALID") == 0) 
```

至：

```
if (strcmp(trim($res), "INVALID") == 0) 
```

原因：
PayPal 沙盒配置为拒绝未指定 Host 标头的 HTTP 1.0 请求，因此您当前的脚本将永远无法正确验证。

# php - Firebug 显示位于“wp-login.php #3 (line 25)”中的 CSS 源代码。找不到这个文件

> ID：12825022
> 
> 赞同：0
> 
> 时间：2012-10-10T17:30:30.393
> 
> 标签：php, css, duplicates, firebug

由于安全问题，在她的虚拟主机更新了她的 wordpress 版本后，一位新客户最近联系我对她的 wordpress 网站进行一些更新。该更新破坏了网站登录页面上的一些代码，使其显示不正确。我进去并删除了登录徽标和背景的引用图像，然后试图找到源代码。当我用萤火虫检查页面时，我得到以下信息：

```
 #login {
    background-image: url("http://www.descaid.com/wpcontent/themes/oceanic/images/login.png") >!important;
    background-repeat: no-repeat;
    min-height: 500px !important;
    padding-right: 7px;
    width: 600px !important;
} 
```

这段代码需要删除，因为它覆盖了其他规则，所以我当然会查看这段代码的右侧以查看正在引用的样式表，或者它是否是自定义 css 插件中的内容或其他内容. Firebug 指出此代码位于“wp-login.php #3”的第 25 行。#3？这意味着什么？我打开了 wp-login.php 文件，但在其中的任何地方都找不到此代码。它也不在主题的 style.css 文件中。我做了几次谷歌搜索，在文件中搜寻和啄了大约 3 个小时，但无济于事，我现在非常恼火。任何帮助将不胜感激。有问题的页面是：[http ://descaid.com/wp-login.php](http://descaid.com/wp-login.php)

看起来这不可能是一些重复/三份的 php 文件，但是代码是从某个地方通过 php 文件引用的，我只是不知道在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T00:28:39.433

它可能是由您的 WordPress 插件之一生成的。您可以禁用所有插件，然后查看那部分 CSS 是否消失。如果是这样，请一次打开每个插件，直到它恢复。这至少会将您的搜索范围缩小到该插件文件夹中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:36:31.407

Wordpress 会自动缩小所有 CSS 文件。这些文件位于目录中`wp-content/themes/[theme]/`。简单的解决方案是打开所有 CSS 文件并查找参考。

这些因模板而异，但从一开始`style.css`可能很聪明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:37:53.260

这意味着相关的 css 位于标记中的源代码中，`<style>..</style>`而不是您认为的此文件中。

# vb.net - MDI 子仅在 WindowState 最大化时可见

> ID：12825026
> 
> 赞同：5
> 
> 时间：2012-10-10T17:30:49.863
> 
> 标签：vb.net, size, zero, formborderstyle

我为我的 mdi 孩子制作了自定义边框。Mdi 子窗体属性：

*   FormBorderStyle = 无
*   控制框 = 假
*   文字 = ""
*   WindowState = 最大化

首先，当我将 Windowsstate 的属性设置为 Normal 时，我的 mdi child 不会出现，我猜它的大小为 0;0。我尝试在 Form_Load 方法中设置大小，但仍然没有任何改变。当我将 FormBorderStyle 更改为 FixedSingle 时，我可以看到非常小的表单，只有足够的空间来双击标题栏。然后表格真的最大化了。

我只是不明白了，这一切都很混乱。而且由于窗口状态已最大化，我无法使用函数在屏幕上拖动表单，因为它认为它已最大化......

![在此处输入图像描述](../Images/aeb2d6afe1ab71f64dd9cb6b386168eb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T16:12:58.727

试试这个代码 - 保证工作：

```
Public frmContainer As FormContainer
Public frmChild As FormChild

Public Sub OpenfrmChild()
    If Not IsNothing(frmChild) AndAlso frmChild.Visible = False Then 'This applies after form has been closed
        frmChild = Nothing '(frmChild does not test as nothing after being closed)
        frmChild = New FormChild
        frmChild.MdiParent = frmContainer
        frmChild.Show()
    ElseIf IsNothing(frmChild) Then 'This applies the first time form is opened
        Try
            frmChild = New FormChild
            frmChild.MdiParent = frmContainer
            frmChild.Show()
        Catch ex As Exception
            ErrorMsg(ex.Message() & "Description: " & ex.ToString)
        End Try
    Else 'This applies if form is visible and user clicks the button on FormChild again
        frmChild.BringToFront()
    End If
    frmChild.WindowState = FormWindowState.Maximized
    frmChild.Dock = DockStyle.Fill
 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:56:52.077

您已经编写了“WindowState = Maximized”。
也许正因为如此，您只能在父表单最大化时看到您的 MDI 表单。
我建议你写 "WindowState = Normal" ，并在 Form_Load 中写 "MDIForm.Size=ParentForm.Size" 或（类似的东西）。

# android - 如何将imageview下方的textview居中对齐为列表视图中的标题

> ID：12825033
> 
> 赞同：1
> 
> 时间：2012-10-10T17:31:10.713
> 
> 标签：android, android-layout

我无法在列表视图中对齐 imageview 下面的文本。下面是我的代码。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center"     >

    <ImageView 
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="50dp" />

    <TextView 
            android:id="@+id/name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/icon"
            android:layout_alignParentBottom="true"  
            android:gravity="center"
            android:singleLine="true"
            android:layout_marginLeft="20dp"
            android:textColor="@color/white"/>

</RelativeLayout> 
```

和 ListView 是

```
<ListView    android:id="@+id/grid_view"
            android:layout_width="wrap_content"
            android:layout_height="280sp"
            android:layout_alignParentLeft="true"
            android:layout_marginTop="20dp"
            android:layout_toLeftOf="@+id/imgView"
            android:scrollbars="none"
            android:divider="@null"
            android:gravity="center" >
</ListView> 
```

java代码从数组中动态添加文本和图像

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {         
        ViewHolder holder;
        if (convertView == null) {
            convertView = l_Inflater.inflate(R.layout.gridview_layout, null);
            holder = new ViewHolder();
            holder.imageName = (TextView) convertView.findViewById(R.id.name);
            holder.image = (ImageView) convertView.findViewById(R.id.icon);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.imageName.setText(name[position]);
        holder.image.setImageResource(mThumbIds[position]);

        return convertView;
    } 
```

没有得到如何在 imageview 下方居中文本。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:36:09.517

只需[`layout_centerHorizontal`](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_centerHorizontal)在 TextView 中使用该属性：

```
<TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/icon"
        android:layout_alignParentBottom="true"  
        android:layout_centerHorizontal="true"
        android:singleLine="true"
        android:textColor="@color/white" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:33:45.943

在文本视图中更改

```
android:layout_width="wrap_content" 
```

至

```
android:layout_width="match_parent" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T06:17:23.673

您应该使用线性布局来设置方向属性。将线性布局的方向设置为垂直并设置 imageview 属性`android:layout_gravity="center"` 这是完整的代码：

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:layout_marginLeft="@dimen/activity_horizontal_margin"
        android:layout_marginRight="@dimen/activity_horizontal_margin"
        android:layout_marginTop="@dimen/activity_horizontal_margin"
        android:layout_marginBottom="@dimen/activity_horizontal_margin"
         >

        <ImageView
            android:id="@+id/grid_item_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
           android:layout_gravity="center"
            android:src="@drawable/home" >
        </ImageView>

        <TextView
            android:id="@+id/grid_item_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cardiology"
            android:layout_gravity="center"
            android:layout_marginTop="5px"
            android:textSize="20sp" >
        </TextView>

    </LinearLayout> 
```

希望它会有所帮助

# c - 这个“位集”在 C 中是如何工作的？

> ID：12825037
> 
> 赞同：4
> 
> 时间：2012-10-10T17:31:18.733
> 
> 标签：c, int, bit-manipulation

```
unsigned int    error_bits =       

                 ( X && Y )
                 | ( A == TRUE)                         << 1
                 | ( B == TRUE)                         << 2
                 | ( C == TRUE && 
                     D == TRUE)                         << 4; 
```

我相信这里的一般概念是根据某些条件将 32 位中的每一个设置为真或假 - 每个位代表某事的错误。

使用上面的语法，我对设置什么、转移什么以及在哪里/为什么有点困惑。

任何澄清都是有帮助的。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:36:29.957

你说的对。行后位的布局为：

```
Bits X-5: 0
Bit 4: (C == TRUE && D == TRUE)
Bit 3: 0
Bit 2: B == TRUE
Bit 1: A == TRUE
Bit 0: (X && Y) 
```

从最高有效位到最低有效位。可能这样的东西会更具可读性（一个品味问题）：

```
unsigned int error_bits = 0;

if( X && Y )     
    error_bits |= 1;

if( A == TRUE )     
    error_bits |= 2;

if( B == TRUE )     
    error_bits |= 4;

if( C == TRUE && D == TRUE )     
    error_bits |= 16; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:36:14.467

如果 A 为 TRUE，A == TRUE 将评估为 1。1 << 1 是 2，或仅设置了第 2 位的整数（从最低有效位开始编号）。1 << 4 是 16，或仅设置了第 5 位的整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:36:13.950

`error_bits`值根据以下设置：

*   当 (X && Y) 为真时设置最低有效位 (b0)，即 X 和 Y 都为真。
*   当 A 为真时设置 b1
*   当 B 为真时设置 b2
*   b3 清晰
*   当 C 和 D 都为真时设置 b4

# routes - 帖子上的mvc自定义路由空模型

> ID：12825038
> 
> 赞同：3
> 
> 时间：2012-10-10T17:31:20.510
> 
> 标签：routes, asp.net-mvc-4

MVC4 动作帖子中的奇怪行为。我创建了一个自定义路线，如下所示：

```
routes.MapRoute(
            name: "Projects",
            url: "{company}/{project}/{id}/{action}",
            defaults: new { controller = "Projects", action = "Index" },
            constraints: new { id = @"\d+" } 
```

当我的编辑页面使用

```
<form action="/COMPANY/Projects/Edit/1" method="post"> 
```

（其中 Projects 是控制器的名称）更新工作正常，但是当我使用

```
@using (Html.BeginForm()) 
```

这转化为

```
<form action="/COMPANY/PROJECT/1/Edit" method="post"> 
```

COMPANY 和 PROJECT 都是动态值，看起来像这样

```
<form action="/sith-co/death-star/1/Edit" method="post"> 
```

模型为空。无论哪种方式，数据都是相同的`Request.Form`，它确实采取了正确的行动。唯一的区别是操作字符串和模型为空

**控制器**

```
 [HttpPost]
 public ActionResult Edit(project project)
 { 
```

**编辑**

感谢JOBG的回答，当我与另一个控制器遇到类似问题时，我能够发现。由于某种原因，`{project}`路由中的参数被绑定而不是模型。通过将参数名称更改为`{projectName}`all 再次在 MVC 领域中表现良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:18:52.910

尝试将变量的名称更改为其他名称，例如：

```
[HttpPost]
 public ActionResult Edit(project model)
 {
} 
```

# css - CSS - SASS：使用基于 @each 的 mixins 生成多个背景

> ID：12825039
> 
> 赞同：2
> 
> 时间：2012-10-10T17:31:20.737
> 
> 标签：css, sass

我正在使用 CSS 创建发型和颜色的目录。我有 55 种不同颜色和发型的组合。每种发型和颜色都有自己的图像 SVG 文件，我需要将它们全部组合成一个背景（使用 CSS3 的多背景功能）。

我已经编写了这个混合来生成多个背景：（它基于[这篇文章](https://stackoverflow.com/questions/12645962/sass-using-two-each-lists-in-scss)中的 mixin ）

```
@mixin style-matrix($colors, $styles) {
    @each $s in $styles {
        @each $c in $colors {

                url("pps#{$s}#{$c}.svg"),
        }
    }
}

$colors: blonde, red, dkbrown, ltbrown, black;
$styles: hairboy1, hairboy2, hairboy3, hairboy4, hairboy5, hairgirl6, hairgirl1, hairgirl4, hairgirl2, hairgirl3, hairgirl5;

.hidden {
background: @include style-matrix($colors, $styles) url("base.svg);
} 
```

（请参阅此处[的代码笔](http://codepen.io/anon/pen/AExig)）

但是，每次运行 mixin 时，都会收到以下错误消息：

```
Invalid CSS after "...            url": expected "{", was "("pps#{$s}#{$c}..." 
```

如何使用 mixin 生成多个背景？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T03:47:00.897

Mixins 返回属性/值对。如果你只想要这个值，你需要一个函数。它看起来像这样：

```
@function style-matrix($colors, $styles) {
  $bg: compact();
  @each $s in $styles {
    @each $c in $colors {
      $bg: join($bg, url("pps#{$s}#{$c}.svg"), comma);
    }
  }
  @return $bg;
}

.hidden {
  background: style-matrix($colors, $styles), url("base.svg");
} 
```

# google-maps - 带有自定义图块的动态谷歌地图可防止重复平移

> ID：12825040
> 
> 赞同：6
> 
> 时间：2012-10-10T17:31:22.297
> 
> 标签：google-maps

我有一个动态图块集，我不想让平移超出其范围。

下面的代码让我很接近，但用户仍然可以在严格范围之外水平滚动，因为它使用地图中心进行比较

```
var strictBounds = new google.maps.LatLngBounds(
 new google.maps.LatLng(sw_lat, sw_lon), 
 new google.maps.LatLng(ne_lat, ne_lon)
);

google.maps.event.addListener(map, 'drag', function() 
{
  if (strictBounds.contains(map.getCenter())) return;

 // We're out of bounds - Move the map back within the bounds

 var c = map.getCenter(),
     x = c.lng(),
     y = c.lat(),
     maxX = strictBounds.getNorthEast().lng(),
     maxY = strictBounds.getNorthEast().lat(),
     minX = strictBounds.getSouthWest().lng(),
     minY = strictBounds.getSouthWest().lat();

 if (x < minX) x = minX;
 if (x > maxX) x = maxX;
 if (y < minY) y = minY;
 if (y > maxY) y = maxY;

 map.setCenter(new google.maps.LatLng(y, x));
}); 
```

![怎么了](../Images/f42ee943e982c73bb90e82bbeb461b73.png)

![我想要的是](../Images/4b0b010a06288dd1933cd7bdc99cd042.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T14:58:47.577

为了快速访问，这里是这个解决方案的 jsfiddle：http: [//jsfiddle.net/nYz6k/](http://jsfiddle.net/nYz6k/)

* * *

假设您对当前检测中心边界的解决方案感到满意，您所要做的就是根据当前地图画布大小限制边界。

您现在得到的结果是，当完全限制时（即纬度和经度都超过边界角），限制边界的每个角落都会出现在地图的中心。

解决方案是实际从边界中删除 x 和 y 偏移，并且仍然能够检查中心（与其他基于边界的检查解决方案相比，这是最有效的解决方案）。

此外，只有在初始化地图和调整窗口大小时，您才必须限制边界，这意味着当您平移时，除了您已经提供的检查方法之外没有额外的处理开销。

不要忘记为地图设置**maxZoom**属性（根据需要对其进行调整），因为在确定的缩放级别之上，限制边界本身将适合视口，并且没有解决方案。

**重要的！使用 'center_changed' 而不是 'drag' 因为 'drag' 具有滑动行为，当您完成拖动并设置中心时，地图仍会沿平移方向滑动。**

* * *

在您实施该解决方案之前，我建议您查看 Maps API 坐标系和投影的工作原理，因为该解决方案在很大程度上基于它，如果您想对其进行调整，了解这些信息很有用。

[https://developers.google.com/maps/documentation/javascript/maptypes](https://developers.google.com/maps/documentation/javascript/maptypes)并查看自定义地图类型 -> 地图坐标部分。

* * *

这是你需要做的。首先，您需要实现 2 个在地理坐标 (LatLng) 和像素坐标之间转换的简短方法。

```
var fromLatLngToPixel = function (latLng) {
  var point = map.getProjection().fromLatLngToPoint(latLng);
  var zoom = map.getZoom();
  return new google.maps.Point(
    Math.floor(point.x * Math.pow(2, zoom)),
    Math.floor(point.y * Math.pow(2, zoom))
  );
}

var fromPixelToLatLng = function (pixel) {
  var zoom = map.getZoom();
  var point = new google.maps.Point(
    pixel.x / Math.pow(2, zoom),
    pixel.y / Math.pow(2, zoom)
  );
  return map.getProjection().fromPointToLatLng(point);
} 
```

接下来，实现有效限制边界的方法。请注意，您始终必须保留一个存储原始边界的变量，因为每次调整地图画布的大小时，生成的边界都会改变。

为此，假设**originalBounds**保留您使用 sw_lat、sw_long 等提供的边界，并且此方法修改了**shrinkedBounds 。**您可以将其重命名为 strictBounds 以仍然在您的方法中工作，但这取决于您。这使用 jQuery 获取画布对象的宽度和高度。

```
var shrinkBounds = function () {
  zoom = map.getZoom();

  // The x and y offset will always be half the current map canvas
  // width and height respectively
  xoffset = $('#map_canvas').width() / 2;
  yoffset = $('#map_canvas').height() / 2;

  // Convert the bounds extremities to global pixel coordinates
  var pixswOriginal = fromLatLngToPixel(originalBounds.getSouthWest());
  var pixneOriginal = fromLatLngToPixel(originalBounds.getNorthEast());

  // Shrink the original bounds with the x and y offset
  var pixswShrinked = new google.maps.Point(pixswOriginal.x + xoffset, pixswOriginal.y - yoffset);
  var pixneShrinked = new google.maps.Point(pixneOriginal.x - xoffset, pixneOriginal.y + yoffset);

  // Rebuild the shrinkedBounds object with the modified 
  shrinkedBounds = new google.maps.LatLngBounds(
    fromPixelToLatLng(pixswShrinked),
    fromPixelToLatLng(pixneShrinked));
} 
```

接下来，您所要做的就是调用此方法：

*   地图初始化时一次。请注意，根据您调用该方法的时间，您可能会遇到一些奇怪的错误，因为地图可能尚未初始化它的所有属性。最好的方法是使用 projection_changed 事件。

    ```
    google.maps.event.addListener(map, 'projection_changed', function (e) {
      shrinkBounds();
    }); 
    ```

*   每次调整地图画布大小时

    ```
     google.maps.event.addListener(map, 'resize', function (e) {
       shrinkBounds();
     }); 
    ```

但其中最重要的部分是“resize”事件永远不会因地图容器的编程调整大小而触发，因此每次以编程方式调整画布大小时都必须手动触发它（如果你这样做，但我怀疑你这样做） .

最常见的方法是在调整窗口大小时触发它：

```
$(window).resize(function () {
  google.maps.event.trigger(map, 'resize');
}); 
```

在所有这些之后，您现在可以安全地使用您的方法，但作为 'center_changed' 的处理程序，而不是我之前提到的 'drag' 的处理程序。

* * *

我用完整的工作代码设置了一个 jsfiddle。

[http://jsfiddle.net/nYz6k/](http://jsfiddle.net/nYz6k/)

您可以在左下角看到限制，并显示那个小半标记，它位于边界的 SW 角。西北角也有一个，但自然看不到，因为它显示在位置上方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T20:42:54.453

不要使用 map.getCenter() 作为检查，而是使用 map.getBounds()

未经测试，但完成此操作的一种简单方法是检查两个边界的并集是否相同（如果不是，则您的地图边界超出您的严格边界）：

```
var union = strictBounds.union(map.getBounds());
if (strictBounds.equals(union)) { //new map bounds is within strict bounds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-23T18:36:51.023

上面的 Tiborg 版本是迄今为止保持边界的最佳版本......我注意到当缩放级别和宽度/高度大于原始边界时会出现一个错误

我修改了他的代码并添加了一个矩形来查看它的实际效果。

```
var buildBounds = function(sw, ne) {
    var swY = sw.lat();
    var swX = sw.lng();
    var neY = ne.lat();
    var neX = ne.lng();
    if (swY > neY) {
      var cY = (swY + neY) / 2;
      swY = cY;
      neY = cY;
    }
    if (swX > neX) {
      var cX = (swX + neX) / 2;
      swX = cX;
      neX = cX;
    }
    return new google.maps.LatLngBounds(
      new google.maps.LatLng(swY, swX),
      new google.maps.LatLng(neY, neX));
  } 
```

[http://jsfiddle.net/p4wgjs6s/](http://jsfiddle.net/p4wgjs6s/)

# ios - 点积和亮度/ Findmyicone

> ID：12825041
> 
> 赞同：1
> 
> 时间：2012-10-10T17:31:31.983
> 
> 标签：ios, opengl-es, avfoundation, avcapturesession, luminance

全部，

我有一个基本问题，我在这里苦苦挣扎。当您查看 WWDC 2010 中的 findmyicone 示例代码时，您会看到：

```
static const uint8_t orangeColor[] = {255, 127, 0};
uint8_t referenceColor[3];

// Remove luminance
static inline void normalize( const uint8_t colorIn[], uint8_t colorOut[] ) {

// Dot product
int sum = 0;
for (int i = 0; i < 3; i++)
sum += colorIn[i] / 3;

for (int j = 0; j < 3; j++)
colorOut[j] = (float) ((colorIn[j] / (float) sum) * 255);
} 
```

然后它被称为：

```
normalize(orangeColor, referenceColor); 
```

运行调试器，它将 BGRA: (Red 255, Green 127, Blue 0) 转换为 (Red 0, Green 255, Blue 0)。我在网上和 SO 上查看了有关亮度和点积的详细信息，但实际上没有任何信息。

1-有人可以指导我这个功能在做什么吗？

2- 你能在网上指导我一些有用的主题/入门吗？

再次感谢九巴

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T20:16:00.330

他们试图做的是在亮度变化中跟踪特定颜色，因此他们正在对颜色的亮度进行归一化。[我在基于 Apple 的 GPU Gems 论文](http://www.sunsetlakesoftware.com/2010/10/22/gpu-accelerated-video-processing-mac-and-ios)以及我的[GPUImage](https://github.com/BradLarson/GPUImage)框架中的 ColorObjectTracking 示例应用程序的颜色跟踪示例中使用的片段着色器中做了类似的事情：

```
vec3 normalizeColor(vec3 color)
{
    return color / max(dot(color, vec3(1.0/3.0)), 0.3);
}

vec4 maskPixel(vec3 pixelColor, vec3 maskColor)
{
    float  d;
    vec4   calculatedColor;

    // Compute distance between current pixel color and reference color
    d = distance(normalizeColor(pixelColor), normalizeColor(maskColor));

    // If color difference is larger than threshold, return black.
    calculatedColor =  (d > threshold)  ?  vec4(0.0)  :  vec4(1.0);

    //Multiply color by texture
    return calculatedColor;
} 
```

上面的计算通过将每个通道乘以 1/3 然后将它们相加来取三个颜色分量的平均值（这就是点积在这里所做的）。然后，它将每个颜色通道除以该平均值，以得到归一化的颜色。

计算该归一化颜色与目标颜色之间的距离，如果它在某个阈值内，则将像素标记为该颜色。

这只是确定一种颜色与另一种颜色接近度的一种方法。另一种方法是将 RGB 值转换为 Y、Cr 和 Cb（Y、U 和 V）分量，然后仅计算色度部分（Cr 和 Cb）之间的距离：

```
 vec4 textureColor = texture2D(inputImageTexture, textureCoordinate);
 vec4 textureColor2 = texture2D(inputImageTexture2, textureCoordinate2);

 float maskY = 0.2989 * colorToReplace.r + 0.5866 * colorToReplace.g + 0.1145 * colorToReplace.b;
 float maskCr = 0.7132 * (colorToReplace.r - maskY);
 float maskCb = 0.5647 * (colorToReplace.b - maskY);

 float Y = 0.2989 * textureColor.r + 0.5866 * textureColor.g + 0.1145 * textureColor.b;
 float Cr = 0.7132 * (textureColor.r - Y);
 float Cb = 0.5647 * (textureColor.b - Y);

 float blendValue = 1.0 - smoothstep(thresholdSensitivity, thresholdSensitivity + smoothing, distance(vec2(Cr, Cb), vec2(maskCr, maskCb))); 
```

此代码是我在色度键控着色器中使用的代码，它基于 Apple 在其示例应用程序之一中使用的类似计算。哪个最好取决于您所面临的特定情况。

# php - PHP nodeValue 和字符数

> ID：12825042
> 
> 赞同：1
> 
> 时间：2012-10-10T17:31:32.280
> 
> 标签：php

我有一个使用 fopen() 包含文本文件（例如 .html）的字符串变量，接下来我将使用 strip_tags() 以便我可以使用该未标记文本进行文章预览，但在此之前，我需要获取 h1 nodeValue，并计算它的字符，所以我可以用该值替换下面代码中的零，并以 150+ 该值结束。

```
$f = fopen($filepath,"r");
$WholeFile = fread($f, filesize($filepath));
fclose($f);
$StrippedFile=strip_tags($WholeFile);
$TextExtract = mb_substr("$StrippedFile", 0,150); 
```

对我来说最好的方法是什么？解析器是答案吗？由于这是唯一的情况 [到目前为止] 我将从 html 标签中提取值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:01:32.803

当您有结构化文本（如 HTML、XML、json、YAML 等）时，您应该*始终*使用适当的解析器，除非您有充分的理由不这样做。

在这种情况下，您可能能够摆脱正则表达式，但您将有一个非常脆弱的解决方案，并且可能会遇到与字符编码、实体或空格相关的问题。上述所有解决方案都会巧妙地打破。例如，如果您有这样的输入：

```
<html><head><meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>Page title</title></head>
<body><div><h1 title="attributes or the space in the closing tag may confuse code"
>Title &mdash;    maybe emdash counted as 7 characters</h1 >
<p> and      whitespace counted excessively too. And here's
a utf-8 character that may get split in the middle: ©; creating  
an invalid string.</p></div></body></html> 
```

这是一个解决方案[`DOMDocument`](http://php.net/manual/en/class.domdocument.php)，[`DOMXPath`](http://php.net/manual/en/class.domxpath.php)它应该适用于除了最差的 HTML 之外的所有内容，并且总是会给你一个 150 个字符（不是*byte*，字符）的 utf-8 回复，所有实体都标准化为它们的字符值。

```
$html = '<html><head><meta http-equiv="content-type" content="text/html;charset=utf-8" />
<title>Page title</title></head>
<body><div><h1 title="attributes or the space in the closing tag may confuse code"
>Title &mdash;    maybe emdash counted as 7 characters</h1 >
<p> and      whitespace counted excessively too. And here\'s
a utf-8 character that may get split in the middle: ©; creating  
an invalid string.</p></div></body></html>';

$doc = new DOMDocument();
$doc->loadHTML($html);
// if you have a url or filename, you can use this instead:
// $doc->loadHTMLFile($url);
$xp = new DOMXPath($doc);

// you can easily modify the xquery to match the "title" of different documents
$titlenode = $xp->query('/html/body//h1[1]');

$xpath = 'normalize-space(substring(
        concat(
            normalize-space(.),
            " ",
            normalize-space(./following-sibling::*)
        ), 0, 150))';

$excerpt = null;
if ($titlenode->length) {
    $excerpt = $xp->evaluate($xpath, $titlenode->item(0));
}

var_export($excerpt); 
```

此代码将输出：

```
'Title — maybe emdash counted as 7 characters and whitespace counted excessively too. And here\'s a utf-8 character that may get split in the middle: ©' 
```

这里的基本思想是将您的`h1`（或任何标题元素）与 XPath 匹配，然后获取该元素和所有后续元素的字符串值并截断 150 个字符，同样使用 XPath。将所有内容保存在 XPath 中可以避免您必须使用 PHP 处理的所有混乱的字符集和实体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:43:11.687

If you are certain of the content of the file you are processing, and know that the title is in H1, you could potentially slice the string you are getting at the `</h1>` location (using `strstr()` for example although there are a plethora of ways to do that), into two strings.

You can then strip tags on the first one to get the title and strip tags on the second one to get the content. This is assuming your file ONLY has a single h1 containing the title, before the dom element that contains the content of the article.

Keep in mind this is not the best way to parse a wide range of articles online, for a more general solution I'd look into a dedicated parser class.

Here is a code sample :

**Code sample**

```
$f = fopen($filepath,"r");
$WholeFile = fread($f, filesize($filepath));
fclose($f);
// Modified part
$content = strip_tags(strstr($WholeFile, '</h1>'));
$title = strip_tags(strstr($WholeFile, '</h1>', true)); // Valid with PHP 5.3.0 only I think
$TextExtract = mb_substr($content, 0,150); 
```

# ruby-on-rails-3 - Rails 将参数传递给条件验证

> ID：12825048
> 
> 赞同：1
> 
> 时间：2012-10-10T17:31:53.490
> 
> 标签：ruby-on-rails-3, validation, activerecord

我正在从电子表格文档中导入大量学生数据。每行学生数据将代表一个新用户，但是，存在导入现有学生的可能性，我想相应地绕过一些用户验证，例如用户名唯一性，以便我可以为新记录和现有记录建立关联，但前提是它们被导入同一所学校。

到目前为止，我的用户模型中有以下验证设置：

**用户.rb**

```
validates_uniqueness_of :username, :unless => :not_unique_to_school?

def not_unique_to_school?
  user = find_by_username(self.username)
  user.present? && user.school_id == 6
end 
```

现在我将如何用我可以在控制器中访问的值替换那个 6？教师将是处理导入的人，他们会将学生导入他们的学校，所以我通常会运行 current_user.school_id 来检索我希望他们导入的学校 ID，但我无权访问 current_user我的模型中的助手。

我不担心重复用户名，因为我将在不同的步骤中处理它，这只是初步验证。

* * *

**编辑**

简化的学校和用户模型：

**用户.rb**

```
class User < ActiveRecord::Base    

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :username, 
                  :first_name, :last_name, :school_id, :roles_mask

  belongs_to :school

  validates_presence_of :username, :on => :create, :message => "can't be blank"
  validates_uniqueness_of :username, :unless => :unique_to_school?

  def unique_to_school?
    user = find_by_username(self.username)
    user.present? && user.school_id == 6
  end 

  def find_by_username(username)
    User.where(:username => username).first
  end     

end 
```

**学校.rb**

```
class School < ActiveRecord::Base
  attr_accessible :country_id, :name, :state_id

  has_many :users    

end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T17:50:07.147

我会在你的 School 模型中添加一个方法：

```
def student_named?(name)
  self.users.where(:username => name).any?
end 
```

然后在您的验证中：

```
def not_unique_to_school?
  self.school.student_named?(self.username)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T20:46:50.657

这就是最终为我工作的东西：

```
validate :user_cant_be_duplicate_in_other_schools  

def user_cant_be_duplicate_in_other_schools
    errors.add(:username, :taken) if User.count(:conditions => ["school_id != ? AND username = ?", self.school_id, self.username]) > 0
end 
```

与测试用户是否属于特定学校相反，我们正在测试用户是否属于特定学校。我没有想出这个答案，另一位用户将此作为答案发布，但不久后出于未知原因将其删除。

# ios - libicucore.dylib 和 libicucore.A.dylib 有什么区别？

> ID：12825050
> 
> 赞同：2
> 
> 时间：2012-10-10T17:32:03.040
> 
> 标签：ios, dylib

我确定 .A 意味着什么，但搜索它只会产生噪音。请赐教。

![在此处输入图像描述](../Images/baf458b3c572dabffd4e88e268af533c.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:27:16.170

哦，他们是一样的。

```
-rwxr-xr-x  1 root  wheel  4969408 Sep 25 16:06 libicucore.A.dylib* 
lrwxr-xr-x  1 root  wheel       18 Oct  7  2011 libicucore.dylib@ -> libicucore.A.dylib 
```

# hibernate - 无法反序列化 eof 异常

> ID：12825051
> 
> 赞同：1
> 
> 时间：2012-10-10T17:32:04.400
> 
> 标签：hibernate, serialization

我的应用程序使用 hsql 作为数据库。到目前为止它工作正常。在生产中，我得到了异常 org.hibernate.SerializationException 无法反序列化 EOF 异常。我无法获得完整的堆栈跟踪，因为我的代码中没有正确捕获异常。

我也没有导致此异常的确切事件顺序。在我重新启动tomcat和hql后，问题就消失了。

抱歉含糊不清，但我需要一些有关根本原因分析的帮助。这里可能是什么问题？

```
validateSession();
        Session session = SessionFactory.getInstance(SessionContext.DISTRIBUTED).getSession();
        session.beginTransaction();
        List results;
        try {
            Criteria cri = session.createCriteria(Filter.class);
            cri.add(Restrictions.eq( "user", userVO.user() ));
            setLazyMode(cri);
            results = cri.list();
            session.getTransaction().commit();
        } finally {
            rollbackIfStillOpen(session);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T14:14:53.193

不知道它是否会对您有所帮助，但我遇到了同样的问题，而且似乎我的 @Id 高于成员而不是吸气剂......

我觉得休眠异常消息非常非常差。我必须调试并创建特殊的测试用例来确定问题。hibernate 会这么难说：我找不到 Id。它是带注释的还是映射的？将您的注释放在 getter 而不是成员上。

这让我想到了这样一个事实，我不明白为什么一次必须在 getter 上，而另一次必须在 member 上……为什么不把所有都放在 member 或 getter 上？getter 和 member 都相互关联，那么为什么会有这些废话呢？

# lucene.net - 在应用服务器上构建 Lucene 索引并复制到多个 Web 服务器的良好模式

> ID：12825053
> 
> 赞同：0
> 
> 时间：2012-10-10T17:32:08.467
> 
> 标签：lucene.net, lucene

我们正在考虑一种架构，其中应用程序（通常）重建我们正在使用的大量 Lucene 索引。重建中的最后一项任务是使用文件共享或 FTP 将重建的索引复制到最后一个索引上。

我有点担心如果最终用户在我们复制新索引期间搜索该索引会发生什么。

任何人有任何想法，经验，更好的模式来实现这一目标？我熟悉 SOLR，这将是一种方法，不像 LinkedIn 的 Zoie 那样熟悉。我宁愿在这个阶段避免这两种情况，而是使用我们自己开发的、相当简单的“只需重建它并在上面复制它”的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:40:04.357

一种选择是将索引直接存储在 AppFabric 缓存之类的东西中，而不是文件系统中。另一种方法是创建您自己的目录实现，该目录有点环绕 FSDirectory 并监视一个单独的暂存目录，如果它看到准备好的新索引，则阻止后续调用，直到将它们复制过来。

# arrays - WCF RESTful JSON Web 服务客户端中的单元素数组

> ID：12825062
> 
> 赞同：1
> 
> 时间：2012-10-10T17:32:33.183
> 
> 标签：arrays, json, wcf, rest

我正在尝试在客户端使用 WCF 使用 RESTful JSON Web 服务。该服务是第 3 方，因此我无法对服务器响应进行任何更改。

当只有一个数据点时，服务器正在发回一个看起来像这样的响应......

**单个数据点**

```
{
  "Data":
  {
    "MyPropertyA":"Value1",
    "MyPropertyB":"Value2"
  },
} 
```

当有多个数据点时会出现类似的情况......

**多个数据点**

```
{
  "Data":
  [
    {
      "MyPropertyA":"Value1",
      "MyPropertyB":"Value2"
    },
    {
      "MyPropertyA":"Value3",
      "MyPropertyB":"Value4"
    },
    {
      "MyPropertyA":"Value5",
      "MyPropertyB":"Value6"
    }
  ],
} 
```

我的服务合同是这样设置的...

```
[ServiceContract]
public interface IRewardStreamService
{
    [OperationContract]
    [WebInvoke]
    MyResponse GetMyStuff();
} 
```

和这样的数据点的数据合同......

```
[DataContract]
public class MyData
{
  [DataMember]
  public string MyPropertyA { get; set; }

  [DataMember]
  public string MyPropertyB { get; set; }
} 
```

我可以让单个数据点响应工作的唯一方法是如果我有一个像这样的单个实例属性，但这不会解析多个数据点响应......

**单例响应**

```
[DataContract]
public class MyResponse
{
  [DataMember]
  public MyData Data { get; set; }
} 
```

我可以让多个数据点响应工作的唯一方法是如果我有一个这样的数组/列表实例属性，但这不会解析单个数据点响应......

**多实例响应**

```
[DataContract]
public class MyResponse
{
  [DataMember]
  public IList<MyData> Data { get; set; }
} 
```

我理解问题在于，当只返回一个数据点时，响应会省略括号，但 WCF 似乎不能很好地反序列化该语法。有什么方法可以告诉 DataContractJsonSerializer 允许单元素数组不包含括号，然后告诉我的服务使用该序列化程序？也许是服务行为或什么？

任何方向都会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:01:29.570

您可以使用自定义消息格式化程序将 JSON 的反序列化更改为您想要的数据协定。在下面的代码中，数据合约被定义为具有`List<MyData>`; 如果响应只包含一个数据点，它将在传递给反序列化器之前将其“包装”到一个数组中，因此它适用于所有情况。

请注意，我使用 JSON.NET 库来进行 JSON 修改，但这不是必需的（它只是有一个很好的 JSON DOM 来处理 JSON 文档）。

```
public class StackOverflow_12825062
{
    [ServiceContract]
    public class Service
    {
        [WebGet]
        public Stream GetData(bool singleDataPoint)
        {
            string result;
            if (singleDataPoint)
            {
                result = @"{ 
                  ""Data"": 
                  { 
                    ""MyPropertyA"":""Value1"", 
                    ""MyPropertyB"":""Value2"" 
                  }, 
                }";
            }
            else
            {
                result = @"{ 
                  ""Data"": 
                  [ 
                    { 
                      ""MyPropertyA"":""Value1"", 
                      ""MyPropertyB"":""Value2"" 
                    }, 
                    { 
                      ""MyPropertyA"":""Value3"", 
                      ""MyPropertyB"":""Value4"" 
                    }, 
                    { 
                      ""MyPropertyA"":""Value5"", 
                      ""MyPropertyB"":""Value6"" 
                    } 
                  ], 
                } ";
            }

            WebOperationContext.Current.OutgoingResponse.ContentType = "application/json";
            return new MemoryStream(Encoding.UTF8.GetBytes(result));
        }
    }
    [DataContract]
    public class MyData
    {
        [DataMember]
        public string MyPropertyA { get; set; }

        [DataMember]
        public string MyPropertyB { get; set; }
    }
    [DataContract]
    public class MyResponse
    {
        [DataMember]
        public List<MyData> Data { get; set; }

        public override string ToString()
        {
            return string.Format("MyResponse, Data.Length={0}", Data.Count);
        }
    }
    [ServiceContract]
    public interface ITest
    {
        [WebGet]
        MyResponse GetData(bool singleDataPoint);
    }
    public class MyResponseSingleOrMultipleClientReplyFormatter : IClientMessageFormatter
    {
        IClientMessageFormatter original;
        public MyResponseSingleOrMultipleClientReplyFormatter(IClientMessageFormatter original)
        {
            this.original = original;
        }

        public object DeserializeReply(Message message, object[] parameters)
        {
            WebBodyFormatMessageProperty messageFormat = (WebBodyFormatMessageProperty)message.Properties[WebBodyFormatMessageProperty.Name];
            if (messageFormat.Format == WebContentFormat.Json)
            {
                MemoryStream ms = new MemoryStream();
                XmlDictionaryWriter jsonWriter = JsonReaderWriterFactory.CreateJsonWriter(ms);
                message.WriteMessage(jsonWriter);
                jsonWriter.Flush();
                string json = Encoding.UTF8.GetString(ms.ToArray());
                JObject root = JObject.Parse(json);
                JToken data = root["Data"];
                if (data != null)
                {
                    if (data.Type == JTokenType.Object)
                    {
                        // single case, let's wrap it in an array
                        root["Data"] = new JArray(data);
                    }
                }

                // Now we need to recreate the message
                ms = new MemoryStream(Encoding.UTF8.GetBytes(root.ToString(Newtonsoft.Json.Formatting.None)));
                XmlDictionaryReader jsonReader = JsonReaderWriterFactory.CreateJsonReader(ms, XmlDictionaryReaderQuotas.Max);
                Message newMessage = Message.CreateMessage(MessageVersion.None, null, jsonReader);
                newMessage.Headers.CopyHeadersFrom(message);
                newMessage.Properties.CopyProperties(message.Properties);
                message = newMessage;
            }

            return this.original.DeserializeReply(message, parameters);
        }

        public Message SerializeRequest(MessageVersion messageVersion, object[] parameters)
        {
            throw new NotSupportedException("This formatter only supports deserializing reply messages");
        }
    }
    public class MyWebHttpBehavior : WebHttpBehavior
    {
        protected override IClientMessageFormatter GetReplyClientFormatter(OperationDescription operationDescription, ServiceEndpoint endpoint)
        {
            IClientMessageFormatter result = base.GetReplyClientFormatter(operationDescription, endpoint);
            if (operationDescription.Messages[1].Body.ReturnValue.Type == typeof(MyResponse))
            {
                return new MyResponseSingleOrMultipleClientReplyFormatter(result);
            }
            else
            {
                return result;
            }
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        WebServiceHost host = new WebServiceHost(typeof(Service), new Uri(baseAddress));
        host.Open();
        Console.WriteLine("Host opened");

        ChannelFactory<ITest> factory = new ChannelFactory<ITest>(new WebHttpBinding(), new EndpointAddress(baseAddress));
        factory.Endpoint.Behaviors.Add(new MyWebHttpBehavior());
        ITest proxy = factory.CreateChannel();

        Console.WriteLine(proxy.GetData(false));
        Console.WriteLine(proxy.GetData(true));

        Console.Write("Press ENTER to close the host");
        ((IClientChannel)proxy).Close();
        factory.Close();
        Console.ReadLine();
        host.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T23:59:49.120

我不知道如何使用 WCF，所以我将更改为 Asp.Net WCF。这是一篇文章，它将为您提供帮助

[http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing](http://www.west-wind.com/weblog/posts/2012/Aug/30/Using-JSONNET-for-dynamic-JSON-parsing)

我只是不知道如何确定它是数组还是单个对象。这是一个小代码。

```
 [TestMethod]
    public void SingleObject()
    {
        using (var client = new HttpClient())
        {
            var result = client.GetStringAsync("http://localhost:8080/api/JSONTestOne");
            string content = result.Result;
            JObject jsonVal = JObject.Parse(content);
            dynamic aFooObj = jsonVal;
            Console.WriteLine(aFooObj.afoo.A);
        }
    }

    [TestMethod]
    public void ArrayWithObject()
    {
        using (var client = new HttpClient())
        {
            var result = client.GetStringAsync("http://localhost:8080/api/JSONTest");
            string content = result.Result;
            JObject jsonVal = JObject.Parse(content);
            dynamic foos = jsonVal;
            Console.WriteLine(foos[0].A);
        }
    } 
```

# objective-c - UIScreen mainScreen bounds.size.height 总是 1024

> ID：12825065
> 
> 赞同：1
> 
> 时间：2012-10-10T17:32:36.023
> 
> 标签：objective-c, ios, cgrectmake, uiscreen

为什么`[UIScreen mainScreen].bounds.size.height`无论 iPad 应用程序处于何种布局模式，总是返回 1024？

我正在尝试根据布局模式动态生成自定义视图，但我总是得到 1024 的高度？

```
+ (CGRect)rectForView {
NSLog(@"The height is %f", [UIScreen mainScreen].bounds.size.height );
return CGRectMake( 0.0f, 0.0f, [[UIScreen mainScreen]bounds].size.width, (([UIScreen mainScreen].bounds.size.height ) - 100));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:56:16.320

这是我为修复它所做的。

```
+ (CGRect)rectForView {

if (UIInterfaceOrientationIsLandscape([[UIDevice currentDevice] orientation])) {

    return CGRectMake( 0.0f, 0.0f, [[UIScreen mainScreen]bounds].size.height, (([UIScreen mainScreen].bounds.size.width ) - 100));

}

NSLog(@"The height is %f", [UIScreen mainScreen].bounds.size.height );
return CGRectMake( 0.0f, 0.0f, [[UIScreen mainScreen]bounds].size.width, (([UIScreen mainScreen].bounds.size.height ) - 100));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T17:39:00.063

这是边界的正确功能，我相信它会在启动的方向上返回屏幕的大小。您将需要查看 viewController 或导航控制器以获得取决于方向的适当框架大小。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T17:55:34.947

它总是以纵向模式返回坐标。如果您有其他方向，则必须更改它。

```
UIScreen *screen = [UIScreen mainScreen];
CGRect screenRect = screen.bounds; // implicitly in Portrait orientation.

if (UIDeviceOrientationIsLandscape(orientation)) {
    CGRect temp;
    temp.size.width = screenRect.size.height;
    temp.size.height = screenRect.size.width;
    screenRect = temp;
} 
```

上面的代码直接取自 OLGhostAlertView.m，它是在线提供的免费警报视图，但它让您了解如何获取 coorect 坐标。

# android - Android NDK API 列表？

> ID：12825071
> 
> 赞同：3
> 
> 时间：2012-10-10T17:33:05.617
> 
> 标签：android, api, android-ndk

有没有一种方法/工具可以从 NDK 文件夹子目录（即 C:\android-ndk-r8b\platforms\android-9\arch 中的 .h 文件中枚举所有 C 函数原型（不确定这是否正确） -arm\usr\include) 并生成类似 javadoc 的内容？我问的原因是因为我们有一个开发人员正在尝试将他的 Windows 代码移植到 android 平台上，在他开始进行这样的努力之前，他需要知道支持哪些 API 调用所以他可以开始更改他的代码库以使其兼容 Android-NDK。我在寻找答案时遇到了以下链接：

```
http://mobilepearls.com/labs/native-android-api/#c++
C:/android-ndk-r8b/docs/STABLE-APIS.html
C:/android-ndk-r8b/docs/CPLUSPLUS-SUPPORT.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T22:13:11.413

首先，让代码与 Linux 兼容。Android 库和 Linux 之间的细微差别通常可以逐步解决。请注意，您在这里有一个移动目标：platform-14 支持的 Linux 标头比 9 多得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:23:48.373

检查代码是否合规的正确方法是编译它，看看有什么问题。Win32 API 肯定会 - 检查是否存在 NDK 对应项甚至没有意义。C/C++ RTL 有点棘手——有些函数有对应的，有些没有。但坦率地说，将它们全部枚举并手动匹配是浪费时间。编译器会更快地完成相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:47:40.797

[http://www.tenouk.com/Module000linuxnm3.html](http://www.tenouk.com/Module000linuxnm3.html)

您可以使用库而不是 .h 文件吗？

该链接解释了使用“nm”从库中转储符号

# node.js - 运行nodeJS时Jenkins构建失败

> ID：12825072
> 
> 赞同：5
> 
> 时间：2012-10-10T17:33:07.943
> 
> 标签：node.js, jenkins

我在一台带有 NodeJS 插件的机器上设置了 Jenkins。可悲的是，每当我尝试在构建中使用该插件时，它都会失败：

```
[workspace] $ node /tmp/hudson3477900862350780409.js
FATAL: command execution failed
java.io.IOException: Cannot run program "node" (in directory          
"/var/lib/jenkins/jobs/XXX/workspace"): error=2, No such file or directory 
```

当我以 jenkins 用户身份登录机器时，我可以通过命令行使用 node。我还将节点 ( `/opt/node-0.6.18/bin`) 的路径添加到当前工作节点的配置屏幕中（只有一个：主节点）。

我已经坚持了一段时间，任何帮助将不胜感激。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T19:56:03.533

好吧，这不是最优雅的解决方案，但它确实有效：我只是创建了一个从 /bin/ 到 node 安装路径的符号链接，现在问题已经解决了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T14:28:48.227

很简单，运行“执行 shell”构建任务时需要勾选“将 Node/npm bin 文件夹提供给 PATH”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-08T14:24:21.463

我正在使用 NVM，我遇到了同样的问题。一种解决方法是创建一个符号链接：

```
ln -s /root/.nvm/versions/node/v8.11.3/bin/node /bin/node
ln -s /root/.nvm/versions/node/v8.11.3/bin/npm /bin/npm 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-22T14:41:22.870

对于在 Docker 中运行的 Jenkins，请使用 jenkins/jenkins:latest image 来避免此问题。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-10-09T07:02:27.583

错误只是因为你没有在你的机器上安装node。安装它后，将它添加到PATH，然后问题就可以解决了。希望能帮助到你。

# jquery - 使用 jQuery 制作 iframe 响应式，全部用于移动设备

> ID：12825074
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:09.707
> 
> 标签：jquery, sharepoint, mobile, iframe

在我的 SharePoint 环境中，我必须使用页面查看器将自定义 HTML 表单加载到 iframe 中。除了布局设置为强制宽度之外，一切正常。这意味着屏幕的左侧和右侧非常开放。我对 CSS 甚至覆盖选择器都非常擅长，但我还没有研究过如何使 iframe 及其子框架在布局设计中具有响应性。我们如何使用 jquery 从头开始​​实现它？

我非常希望 iframe 的宽度与其父容器一样宽，并且也能够滚动更长的内容。我知道它不仅仅是 100% 的宽度。另外，这是否适用于移动设备——这是我的最终目标。

有什么小例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:46:00.530

获取浏览器的宽度：

```
$(window).width(); 
```

要获取窗口的高度：

```
$(window).height(); 
```

要设置 iframe 的宽度和高度的宽度（假设只有一个）：

```
$('iframe').height($(window).height());
$('iframe').width($(window).width()); 
```

# android - 无法使用 ksoap2 解析复杂对象（实体）

> ID：12825076
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:18.210
> 
> 标签：android, web-services, ksoap2

我尝试使用[本教程](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)和[文档](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks)，但无法从响应中获取实体。
这是我的**用户实体**：[http](http://pastebin.com/Exx5Fgt6)
://pastebin.com/Exx5Fgt6 请求代码：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

DoubleMarshal marshal = new DoubleMarshal();
marshal.register(envelope);
PropertyInfo userInfo = new PropertyInfo();
userInfo.setName("user");
userInfo.setValue(user);
userInfo.setType(user.getClass());
request.addProperty(userInfo);

envelope.setOutputSoapObject(request);
HttpTransportSE androidHttpTransport = new   HttpTransportSE(URL);
androidHttpTransport.debug = true;
envelope.addMapping(NAMESPACE, "user", new User().getClass());
                androidHttpTransport.call(SOAP_ACTION, envelope);

Log.i(TAG, "dump Request: " + androidHttpTransport.requestDump);
Log.i(TAG, "dump Response: " + androidHttpTransport.responseDump);

SoapObject response = (SoapObject) envelope.bodyIn;
Log.d(TAG, "Property 0: " +     response.getProperty(0).toString());
Log.d(TAG, "Property 1: " + response.getProperty(1).toString());
Log.d(TAG, "Property 2: " + response.getProperty(2).toString());

// Try pasrsing entity
User userReponse = (User) envelope.bodyIn;
Log.d(TAG, "user name: " + userReponse.username); 
```

响应xml：

```
 <SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="http://axn12.com">
<SOAP-ENV:Body>
    <ns1:registerUserResponse xmlns:ns1="http://axn12.com">
        <code xsi:type="xsd:int">1</code>
        <desc xsi:type="xsd:string">Success. (Executed time: 0.10681s)</desc>
        <user xsi:type="tns:user">
            <user_id xsi:type="xsd:int">5195</user_id>
            <username xsi:type="xsd:string">xcvx423424c</username>
            <email xsi:type="xsd:string">424242dasdfsadf@gmail.com</email>
            <password xsi:type="xsd:string">e258314984050bb53a9309592c6f96ab</password>
            <salt xsi:type="xsd:string">PXN</salt>
            <id_card xsi:type="xsd:string">Array</id_card>
            <fullname xsi:type="xsd:string">o0</fullname>
            <birthdate xsi:nil="true" xsi:type="xsd:string"/>
            <gender xsi:nil="true" xsi:type="xsd:string"/>
            <address xsi:nil="true" xsi:type="xsd:string"/>
            <country xsi:type="xsd:string">233</country>
            <location xsi:type="xsd:string">0</location>
            <zipcode xsi:nil="true" xsi:type="xsd:string"/>
            <mobile xsi:nil="true" xsi:type="xsd:string"/>
            <is_active xsi:type="xsd:int">0</is_active>
            <is_lock xsi:type="xsd:int">0</is_lock>
            <active_token xsi:type="xsd:string">elPp</active_token>
            <created_date xsi:type="xsd:string">2012-10-11 00:28:36</created_date>
            <point xsi:type="xsd:double">300000</point>
            <gold xsi:type="xsd:double">0</gold>
            <level xsi:type="xsd:int">0</level>
            <level_point xsi:type="xsd:int">0</level_point>
        </user>
    </ns1:registerUserResponse>
</SOAP-ENV:Body> 
```

双元帅：

```
public class DoubleMarshal implements Marshal {

public Object readInstance(XmlPullParser parser, String namespace, String name,
        PropertyInfo expected) throws IOException, XmlPullParserException {

    return Double.parseDouble(parser.nextText());
}

public void register(SoapSerializationEnvelope cm) {
    cm.addMapping(cm.xsd, "double", Double.class, this);

}

public void writeInstance(XmlSerializer writer, Object obj) throws IOException {
    writer.text(obj.toString());
}

} 
```

问题是我在投射实体用户时出错：

```
 10-11 00:08:23.952: W/System.err(1420): java.lang.ClassCastException: org.ksoap2.serialization.SoapObject cannot be cast to com.org.domains.User
 10-11 00:08:23.963: W/System.err(1420):    at com.org.ducminh.WebServiceActivty$1.run(WebServiceActivty.java:125)
 10-11 00:08:23.963: W/System.err(1420):    at java.lang.Thread.run(Thread.java:856) 
```

我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:00:47.590

> 请回答我的问题，然后我可以接受。– R4j

好吧，好吧:)

包含整个`bodyIn`响应。你必须得到它，`SoapObject`然后将属性`User`作为类`User`

# c# - 如何配置 MonoMac 应用程序？

> ID：12825078
> 
> 赞同：3
> 
> 时间：2012-10-10T17:33:30.717
> 
> 标签：c#, macos, mono, profiling, monomac

我试图从我的 MonoMac 应用程序中获取一些分析信息，但无法让它工作，我试过这个：

```
MONO_ENV_OPTIONS="--trace --gc=sgen --profile=log:heapshot" App.app/Contents/MacOS/AppSync 
```

但这行不通。

知道如何让它运行吗？

# css - 需要仅 CSS 的菜单帮助

> ID：12825080
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:33.987
> 
> 标签：css, drop-down-menu

我想向网站添加一个仅 CSS 的下拉菜单。我只需一滴就可以做到这一点，但是在向菜单添加另一层时遇到了麻烦。

我可以让列表最初隐藏，但是当触发器悬停时，整个列表变得可见，而不仅仅是下拉列表的第一层。

这是列表的一部分：

```
 <ul id="DealerNav">
<li><a href="#" class="first">Order from your dealer</a>
    <ul>
    <li><a href="#">BFC Syringe (empty)</a>
            <ul>
            <li><a href="http://www.atlantadental.com" target="_blank">Atlanta Dental</a></li>
            <li><a href="http://www.benco.com" target="_blank">Benco Dental</a></li> 
       </ul> 
    </li> 
    <li><a href="#">BFC Complete</a>
          <ul>
          <li><a href="http://practicon.com/Harmony-Intro-Pack/p/70-90122/" target="_blank">Practicon Dental</a></li>
          </ul>
             </li>
    <li><a href="#">Vaccu•sil Heavy Body</a>
         <ul>
            <li><a href="http://www.atlantadental.com" target="_blank">Atlanta Dental</a></li>
            <li><a href="http://www.benco.com" target="_blank">Benco Dental</a></li> 
             <li><a href="http://www.burkhartdental.com" target="_blank">Burkhart Dental</a></li>

       </ul> 
    </li>      
  </ul> 
```

而且，这是控制它的 CSS：

```
#DealerNav { margin: 0; padding: 0; font-weight: bold; }

#DealerNav li { list-style-type: none; font-size: 100%; position: relative; margin-left: -3em; }

#DealerNav li li { margin: 2px 0; }

#DealerNav li ul { display: none; }

#DealerNav a.first { width:100%; color: #555; background-color: #FFF; margin-left: 2.5em; }

#DealerNav a { display:block; width: 12em; padding: .5em; background-color: #CEF; color: #FFF;  }

#DealerNav a:hover { color: #555; }

#DealerNav a:hover.first { color: #CEF; }

#DealerNav li:hover ul { display: block; }

#DealerNav ul ul { margin-left:10em; margin-top: -2.25em; } 
```

这是否太复杂而无法寻求帮助？

有问题的页面暂时位于： http: [//www.hodentalcompany.com/pages/syringe2.html](http://www.hodentalcompany.com/pages/syringe2.html)

菜单位于文本右栏的底部，“从您的经销商处订购”

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:01:34.643

像这样？

[http://jsfiddle.net/kboucher/nrAPu/](http://jsfiddle.net/kboucher/nrAPu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:02:29.010

改变这个：

```
#DealerNav li:hover ul { display: block;} 
```

对此：

```
#DealerNav li:hover > ul { display: block; } 
```

您只希望显示第一个子 UL，而不是全部显示。

# java - 尝试从链接列表值设置 JButton 字符串字段

> ID：12825081
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:33.840
> 
> 标签：java, swing, linked-list

这就是我的问题，我正在创建一个包含 20 个单选按钮和 jbutton 的 GUI 打印输出，并尝试交换元素。我在侧面构建了我的方法，直到我确定我可以交换我的链接列表节点，他们这样做了，但现在我无法让 JButton 从我的节点中获取字符串值来填充按钮面。（它现在显示 20 个空值）。任何想法，指针，我哪里出错了？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;

public class ProbGuiDrv
{

    public static void main(String[] args) throws IOException
    {
        ProbdrvGuiWindow myWindow = new ProbdrvGuiWindow();
        myWindow.setSize(550,550);
        myWindow.setLocation(300,200);
        myWindow.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        myWindow.setVisible(true);
    }

}
//===================== GUI Window Creation Classes ============================
@SuppressWarnings("serial")
class ProbdrvGuiWindow extends JFrame
{
        ProbNode        head;
        ProbNode        teamList;
        JRadioButton    teamRBtn[]  =   new JRadioButton[20];
        JButton         teamBtn[]   =   new JButton[20];
        static String   teamNames[] = new String[20];

      public ProbdrvGuiWindow() throws IOException
      {
          super("Switching Elements");
            int i;
            MoveHandler moveHdlr = new MoveHandler();
            ButtonGroup teamGrp  = new ButtonGroup();
            JPanel      pnlWest  = new JPanel();
            JPanel      pnlEast  = new JPanel();
            pnlWest.setLayout(new GridLayout(20,1));
            pnlEast.setLayout(new GridLayout(20,1));

            for(i=0;i<20;i++)
              {
                teamRBtn[i]  = new JRadioButton(""+(i+1));
                teamRBtn[i].setFont(new Font("Courier", Font.PLAIN, 15));
                pnlWest.add(teamRBtn[i]);
                teamGrp.add(teamRBtn[i]);

                teamBtn[i] = new JButton(); //can't figure out how to set the text from my Node.name value//
                teamBtn[i].setFont(new Font("Courier", Font.PLAIN, 15));
                teamBtn[i].setHorizontalAlignment(SwingConstants.LEFT);
                teamBtn[i].addActionListener(moveHdlr);
                pnlEast.add(teamBtn[i]);
              }

            setLayout(new BorderLayout());
            add(pnlWest,BorderLayout.WEST);
            add(pnlEast,BorderLayout.CENTER);
      }
      //--------------------------------------------------------------------------------------
      private class MoveHandler implements ActionListener
      {
        public void actionPerformed(ActionEvent event)
        {
          int    i;
          int    from = 0;
          int    to;
          String nameAtToSlot;

          nameAtToSlot = event.getActionCommand();  // to button

          i = 0;
          while(!nameAtToSlot.equals(teamBtn[i].getText()))
            i++;

          to = i;

          for(i=0;i<20;i++)
            if(teamRBtn[i].isSelected())  //from radiobutton
              from = i;

          moveNode(from, to);

          teamRBtn[to].setSelected(true);
        }
      }
      //----------------------------------------------------------------
      public void addNode(String n)
        {
            ProbNode newNode = new ProbNode(n, head);
            head = newNode;
        }
      //----------------------------------------------------------------
      public ProbNode getNodeAt(int pos)
        {
            ProbNode node = head;
            for (int i = 0; i < pos; i++)
            {
                if (node.next == null)
                    break;
                node = node.next;
            }
            return node;
        }
    //----------------------------------------------------------------
        public ProbNode removeNodeAt(int pos)
        {
            ProbNode node = head;
            ProbNode prev = head;
            for (int i = 0; i < pos; i++)
            {
                if (node.next == null)
                    break;
                prev = node;
                node = node.next;
            }
            if (head == node)
            {
                head = null;
            }
            else
            {
                if (node != null)
                {
                    prev.next = node.next;
                    node.next = null;
                }
            }
            return node;
        }
        //--move a node from one position to another -------------
        public void moveNode(int from, int to)
        {
            ProbNode node = removeNodeAt(from-1); //
            insert(to-1, node);
        }
        //--------------------------------------------------------
        public void insert(int pos, ProbNode node)
        {
            if (pos == 0)
            {
                node.next = head;
                head = node;
            }
            else
            {
                ProbNode prev = getNodeAt(pos - 1);
                node.next = prev.next;
                prev.next = node;
            }
        }
      //-----------------------------------------------------------
      public static ProbMgr readList() throws IOException 
        {
              ProbMgr teamList    = new ProbMgr();
            FileReader inFile   = new FileReader("teamNames.txt");
            BufferedReader data = new BufferedReader(inFile);
            int i;

            String name;
            i = 1;
            while( (name = data.readLine()) != null )
            {
                teamList.addNode(name);
                //for(i=0;i<20;i++)
                //  teamNames[i] = teamList.getName();
                i++;
            }
            return teamList;
        }
}//end outer class 
```

ProbMgr 构造函数：

```
 public class ProbMgr
{
    public ProbNode head;

    public ProbMgr()
    {
        head = null;
    }
} 
```

我的 ProbNode：

```
public class ProbNode
{
     public String          name;
     public ProbNode        next;

        public ProbNode(String n, ProbNode ptr)//constructor
        {
            name = n;
            next = ptr;
        }
        public String getName()
        {
            return name;
        }
} 
```

# ios - 核心位置距离过滤器电池寿命

> ID：12825082
> 
> 赞同：4
> 
> 时间：2012-10-10T17:33:36.257
> 
> 标签：ios, core-location, battery

更改`distanceFilter`值对电池寿命有影响吗？如果是这样，这种效果是什么？为什么它会有任何效果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:11:56.233

distanceFilter 属性对电池寿命没有影响或影响极小。它所做的只是将对代表的调用限制为它移动的每 n 米。如果您希望使用 gps 来节省电池寿命，那么我建议您只打开 gps 并每隔 n 秒读取一次读数，然后再次将其关闭，直到下一次读数。我会使用计时器。如果您希望它也可以在后台运行，请执行以下步骤：

1.  在您的应用程序 plist 文件中，将“应用程序注册位置更新”添加到所需的后台模式键。

2.  在你的 applicationDidEnterBackground 方法中做这样的事情

    ```
    UIBackgroundTaskIdentifier __block bgTask;

    UIApplication *application = [ UIApplication sharedApplication];

    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        //Prevent from going inactive by starting location update
        [[ ApplicationContext sharedInstance].coreLocationController startUpdatingLocation ];
        [application endBackgroundTask:bgTask];
         bgTask = UIBackgroundTaskInvalid;
     }];

      dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
       while (YES) {
          if ( [[UIApplication sharedApplication] applicationState] == UIApplicationStateActive ) {
            break;
        } else {
         //DO something in the background
        }

    }
    }); 
    ```

    您在应用程序到期之前启动位置管理器的位置，以确保它在后台继续其活动状态。这将允许应用程序始终在后台运行，因此您可以通过打开/关闭 gps 来间歇性地检查位置

# asp-classic - WINHTTP_ACCESS_TYPE_NO_PROXY 值的 ASP 表示法是什么？

> ID：12825083
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:42.367
> 
> 标签：asp-classic, winhttp

我整个早上都在网上搜索。

我只想知道它的价值以及如何在 asp classic 中表示它。

我认为它是十进制表示法中的 1。

```
WINHTTP_ACCESS_TYPE_NO_PROXY = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:36:19.043

```
const uint WINHTTP_ACCESS_TYPE_NO_PROXY = 1;
const long WINHTTP_ACCESS_TYPE_NO_PROXY = 1; 
```

# java - C++ 客户端到 Java 服务器（TCP/IP）

> ID：12825084
> 
> 赞同：0
> 
> 时间：2012-10-10T17:33:43.623
> 
> 标签：java, c++, sockets, tcp, ip

首先，我对使用 sockect 和 TCP/IP 数据包进行网络非常陌生，如果您能以非常清晰的方式解释，我将不胜感激。我的机器人程序第一次尝试将 kinect 与我们当前的机器人一起使用，但我们遇到了问题。目前他们用 java 编码，而他们计划用 C++ 编码 kinect。是否可以使用 TCP/IP 数据包在两种语言之间发送信息？我们需要一个 C++ 客户端和一个 Java 服务器。如果有人有链接或示例，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:46:28.180

Java 和 C/C++ 之间通信的真正问题是字节顺序问题。如果要发送二进制数据，则必须清楚完整地设计通信结构，包括数字大小（以字节为单位）、位顺序（lsb/msb、交换字节或简而言之非交换字节、整数和longs）和结构打包（结构中字段之间的填充字节数）。

如果可以避免，我建议您不要使用二进制进行通信。有两个原因；

1.  无需担心位顺序、字节交换和结构打包。
2.  在不解码数据的情况下窃听通信。你在这里仍然有 ascii/unicode 问题。

**编辑** 在 C/C++ 中，数据的存储方式使 CPU 访问变得快速而轻松。类/结构的字段在字边界上对齐（因为大多数 CPU 只能以完整的字块访问内存），并且位的顺序与 CPU 匹配。但是，CPU 可以有不同的位顺序和字长（16、32、64，...）。大多数英特尔 CPU 都是小端，而大多数其他设计都是大端。为了让生活更有趣，java 虚拟机在每个平台上都是大端的。[http://en.wikipedia.org/wiki/Endianness](http://en.wikipedia.org/wiki/Endianness)

因此，如果您希望两台 C/C++ 机器能够通信，那么您必须以双方都可以读取的方式发送数据。通常，要在异构环境中进行通信（称为“有线”），您需要指定所有通信都以特定格式完成。TCP/IP 使用 MSB（最高有效位）排序。然后，所有程序都必须从有线格式转换（如有必要）。

因为 CPU 在字长块中消耗内存，所以编译器会将填充字节放在不填充整个机器字的字段之间。对于读取 32 位字的机器，结构如下：

```
struct example1 {
  char someFlag;
  int  someCount;
}; 
```

实际上会占用 8 个字节的内存。第一个字段由一个数据字节和 3 个填充字节组成，因此整数引用在字边界上对齐。如果一个幼稚的通信器尝试以这种结构发送数据，例如`send(&example1, sizeof(example1));`向另一个具有不同字长或字节顺序的系统发送数据，而另一个系统则这样做`read(&example1, sizeof(example1));`，那么 example1.someCount 的值可能与预期的非常不同。

在您将 Java 投入其中之前，大部分内容通常都是学术性的。因为Java总是MSB格式。因此，即使在相同的硬件上，从 C/C++ 应用程序发送到 Java 应用程序，也可能导致同样的意外结果。

Java 包含我最喜欢的 I/O 类，`java.nio.ByteBuffer`. 它能够从几乎任何来源读取整数、长整数、浮点数和双精度数。如果您知道数据是如何创建的，它将读取它。ByteBuffer 有`getShort`,`getInt`等方法来获取任何类型，以及`order()`设置数据字节顺序的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:40:41.667

每当您希望两个程序通过网络相互通信时，您需要定义一个[协议](http://en.wikipedia.org/wiki/Communications_protocol)。

在 TCP 之上定义的协议需要指定一种方法来告诉接收者何时收到了整个消息。两种常见的方法是：

*   指定一些特殊的数据序列来表示“结束”。一个例子是 HTTP，它使用一个特殊的 CRLF 字符来表示消息的非有效负载部分的结束。
*   在消息的某些预定义部分中指定消息的长度。一个示例是 HTTP，它在“Content-Length”标头中指定有效负载的长度。

您可以在此处找到有关 HTTP 消息结构的更多信息：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec4.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html)

此外，您可能希望使用与平台无关的格式来编码有效负载。一个好的二进制格式是 Google 的协议缓冲区，它在 Java 和 C++ 中得到很好的支持：[http ://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:10:31.513

当然，您可以在实现不同语言的程序之间交换信息。（您是否期望整个 Internet 都使用 Java？）

这是我在谷歌搜索“socket programming {Java, C++}”后发现的：

[http://codebase.eu/tutorial/linux-socket-programming-c/](http://codebase.eu/tutorial/linux-socket-programming-c/) - 似乎没问题

[http://www.javaworld.com/jw-12-1996/jw-12-sockets.html](http://www.javaworld.com/jw-12-1996/jw-12-sockets.html) - Java 教程

但小心点。根据您的硬件架构，您在交换二进制数据（字节顺序等）时可能会遇到一些问题。当您使用面向对象的语言时，您可以考虑使用某种处理低级通信的中间件——例如[Ice](http://www.zeroc.com/ice.html)。但是，在您的情况下，这可能是矫枉过正。

# matlab - 在 Matlab 中，如何将音频与绘图同步？

> ID：12825092
> 
> 赞同：3
> 
> 时间：2012-10-10T17:34:10.173
> 
> 标签：matlab, audio, callback, playback, audio-player

我`[y, Fs, nbits, opts] = wavread(filename)`用来读取波形文件。接下来我`plot(t, y)`在哪里`t = 0:1/Fs:(length(y)-1)/Fs`。我通过 播放 wav `sound(y, Fs)`。我的问题是，有没有办法在情节中显示某种标记，与来自 wav 的音频同步？我希望在通过在情节中移动的标记观察情节中相应声音的位置时听音频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:45:48.397

以下是具有良好同步性的解决方案。这很有效，因为`audioplayer`对象正在启动更新播放头位置的回调。这是调用脚本。. .

```
fs = 44100;
durT = 3; %seconds
durS = fs*durT; %samples
x = randn(durS, 1);

dt = 1/fs;
tAxis = dt:dt:durT;

frameRate = 25; %fps
frameT = 1/frameRate;

mag = 5;

figure;
plot(tAxis, x);
ylim([-mag mag])
xlim([0 durT])
xlabel('Time [s]')

playHeadLoc = 0;
hold on; ax = plot([playHeadLoc playHeadLoc], [-mag mag], 'r', 'LineWidth', 2);

player = audioplayer(x, fs);
myStruct.playHeadLoc = playHeadLoc;
myStruct.frameT = frameT;
myStruct.ax = ax;

set(player, 'UserData', myStruct);
set(player, 'TimerFcn', @apCallback);
set(player, 'TimerPeriod', frameT);
play(player); 
```

...这是您可以存储在单独文件中的回调函数...

```
function src = apCallback(src, eventdata)
    myStruct = get(src, 'UserData'); %//Unwrap

    newPlayHeadLoc = ...
        myStruct.playHeadLoc + ...
        myStruct.frameT;
    set(myStruct.ax, 'Xdata', [newPlayHeadLoc newPlayHeadLoc])

    myStruct.playHeadLoc = newPlayHeadLoc;
    set(src, 'UserData', myStruct); %//Rewrap
end 
```

我刚刚将信号设为噪声样本，你可以用任何你喜欢的东西替换它。遗憾的是，`audioplayer`对象具有`stop`和`resume`方法无法访问当前播放头位置。幸运的是，有一个用户数据属性可让您随意填写任何内容。

# android - 通过 Android 操作系统公开 gps NMEA 流

> ID：12825097
> 
> 赞同：2
> 
> 时间：2012-10-10T17:34:36.150
> 
> 标签：android, android-ndk, gpsd

我正在尝试在 Android 上运行 C 应用程序/驱动程序，以读取来自 GPS 设备的串行 NMEA 流。只要我从正确的设备（例如 /dev/ttyUSB0、ttyS0 等）读取数据，我就可以在 Linux 平台上成功运行此驱动程序。

该驱动程序在 Android 操作系统上运行，但我不知道该设备是如何暴露于操作系统的，因此我无法读取 GPS 流。有谁知道这是否可以通过操作系统直接访问，或者我是否需要额外的驱动程序/内核模块？

我不是在寻找任何 LocationManager 或 JNI 答案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-10T05:41:24.937

恐怕它必须是 LocationManager API，除非你有一个植根手机。漫长的路线是通过实现 GpsStatus.NmeaListener 并调用 JNI 回调并在 C 中获取流来获取 GPS 流。但我认为这不是你所追求的。我认为您想直接访问连接了 GPS 硬件的串行设备。我认为这很难通过 android 安全/权限模型实现。

# ruby-on-rails - Fancybox gem 导致图片在点击后消失？

> ID：12825098
> 
> 赞同：0
> 
> 时间：2012-10-10T17:34:37.900
> 
> 标签：ruby-on-rails, fancybox

我正在尝试使用fancybox，以便可以很好地查看我的照片。[我有与Fancy box 使图像在 rails 上消失](https://stackoverflow.com/questions/9940103/fancy-box-making-image-disappear-on-rails)的问题相同的问题，但即使将 href 添加到我的链接后它也不起作用。

问题是当我点击图片时，fancybox 图像查看器会弹出，但我网站上的图像消失了。

这是我的代码中不起作用的部分：

```
<% if @album.photos.any? %>
    <% @album.photos.each do |photo| %>
        <div class="picthumb">
            <%= link_to image_tag(photo.avatar.url(:small), :class => "fancybox"), "#" %>
        </div>
    <% end %> 
<% else %>
    There are no pics in this album
<% end %> 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:39:21.700

所以我最终想通了。这是因为我在图像上使用了 fancybox 而不是链接。

```
<% if @album.photos.any? %>
    <% @album.photos.each do |photo| %>
        <div class="picthumb">
            <%= link_to image_tag(photo.avatar.url(:small)), photo.avatar.url , :class => "fancybox" %>
        </div>
    <% end %> 
<% else %>
    There are no pics in this album
<% end %> 
```

那是新的html。

```
$(document).ready(function() {
#before, I had img.fancybox in the element selector instead of a.fancybox
$("a.fancybox").fancybox();
}); 
```

# arrays - 使用 Delphi 从 VarArray 获取数据

> ID：12825099
> 
> 赞同：1
> 
> 时间：2012-10-10T17:34:39.690
> 
> 标签：arrays, web-services, delphi, variant

我有一个 WebService，它返回一个 Variant 我它有一个数组，即 varArray，想知道如何获取 varArray 的数据。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:45:03.120

要获取 varArray 的内容，您必须使用[`VarArrayLowBound`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Variants.VarArrayLowBound)and[`VarArrayHighBound`](http://docwiki.embarcadero.com/Libraries/XE3/en/System.Variants.VarArrayHighBound)函数，然后使用循环您可以遍历数组以获取数据。

试试这个样本

```
var
 i : integer;
 s : string; 
begin
  for i := VarArrayLowBound(vArray, 1) to VarArrayHighBound(vArray, 1) do
    s:=vArray[i];//copy the the content of the array i element into a string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T17:30:54.587

假设基础数据类型是`Byte`，并且数组是一维的，我解决这个问题的方法如下：

```
function GetBytesFromVariant(const V: Variant): TBytes;
var
  Len: Integer;
  SafeArray: PVarArray;
begin
  Len := 1+VarArrayHighBound(vArray, 1)-VarArrayLowBound(vArray, 1);
  SetLength(Result, Len);
  SafeArray := VarArrayAsPSafeArray(V);
  Move(SafeArray.Data^, Pointer(Result)^, Length(a)*SizeOf(a[0]));
end; 
```

如果底层元素类型是其他东西，例如`Word`等`Integer`，那么如何修改它以匹配应该是显而易见的。

# javascript - 以正确的方式加载 js 脚本/库

> ID：12825103
> 
> 赞同：0
> 
> 时间：2012-10-10T17:34:50.203
> 
> 标签：javascript, performance, optimization, requirejs, js-amd

我负责建立我的乐队的网站和 tumblr。我在纸草稿阶段。目前正在思考如何处理脚本以优化性能。

基本上，我需要：

1.  jQuery：在 DOM 准备好后进行操作以及一些交互性。
2.  jPlayer 带有 jPlayer 的播放列表插件，用于带有 Flash 后备的 HTML5 音乐播放器。
3.  从 Songkick API（巡演日期）加载数据的自定义脚本。它将巡回演出添加到页面。应该在 DOM 准备好（Ajax 请求）之后发生。
4.  使用其 API 从 SoundCloud 加载歌曲的自定义脚本。当用户从音乐播放器单击播放按钮时应该会发生这种情况（这些是长曲目，在页面加载期间加载它们是一种不好的做法）。

所以，我正在考虑如何构建所有这些脚本，以便事情在正确的时间以良好的顺序发生。我已经离开开发场景几年了，但在发布之前阅读了一些内容。看到现在JS的设计模式倾向于使用模块化的方法。我在 RequireJS 网站上阅读了一些内容，可能会尝试一下。

好吧，我的主要问题是，我应该如何构建我的脚本，以便它在正确的时间以最佳性能加载？RequireJS 是解决此类设计模式问题的一种选择吗？

抱歉，这不是语法问题，而是思维预编码问题。我只是想在弄脏我的手之前好好想想。

问候，O。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:08:03.523

我认为你有[过早优化](http://c2.com/cgi/wiki?PrematureOptimization)的风险。我只是正常加载脚本，如果您发现性能问题，那么您可以引入 Require.js 之类的工具。只有 4 个脚本，我怀疑你会遇到任何问题。

也就是说，加载脚本的一些指针：

*   在底部`<body>`（就在`</body>`结束标记之前）加载脚本，而不是在`<head>`- 这样页面内容的加载不会被脚本阻止。

*   将您的自定义脚本包装在`document.ready`：

    ```
    $(document).ready(function() {
      // your code
    }); 
    ```

    这意味着您的脚本在加载所有内容之前不会运行，从而避免了加载顺序的任何问题。

*   使用 Google 的 CDN 加载 jQuery。它很快，而且（更重要的是）很多网站都在使用它，所以它很可能已经被用户缓存了：

    ```
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"> 
    ```

    [https://developers.google.com/speed/libraries/devguide](https://developers.google.com/speed/libraries/devguide)

如果您仍然担心加载脚本的不同方法，这是我所知道的最好的资源，每种方法都有详尽的优点/缺点：

[https://developer.mozilla.org/en-US/docs/XUL_School/Appendix_D:_Loading_Scripts](https://developer.mozilla.org/en-US/docs/XUL_School/Appendix_D:_Loading_Scripts)

# facebook - 用于网站的 Facebook Insights API

> ID：12825104
> 
> 赞同：6
> 
> 时间：2012-10-10T17:34:51.470
> 
> 标签：facebook, api, web, metrics, facebook-insights

这个问题被问了很多，但我似乎无法在任何地方找到答案。

我想做的事：通过那里的 API 从 facebook 洞察力接收我的一个网站的指标和数据。到目前为止我所做的：元标记和一切都到位。我已阅读文档。我可以在洞察仪表板上看到一些简单的指标，例如份额。

根据 facebook 文档，他们的 api 可用于页面、应用程序和域。当我尝试从应用程序（https://graph.facebook.com/324923697601554/insights）获取数据时，它运行得非常好，但每次我尝试使用我的域 id 完全相同的东西（由元标记给出）时，我得到的只是一个空页面，如下所示：

```
:{
    "data": [

   ],
   "paging": {
      "previous": "https://graph.facebook.com/415793855145069/insights?access_token=...&since=1349198931&until=1349458131",
      "next": "https://graph.facebook.com/415793855145069/insights?access_token=...&since=1349717331&until=1349976531"
   }
} 
```

我已经阅读了 facebook 文档，但我无法解决问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T13:00:35.157

你试过'&access_token'吗？

有关访问令牌的更多信息： [https ://developers.facebook.com/docs/facebook-login/access-tokens/](https://developers.facebook.com/docs/facebook-login/access-tokens/)

# c# - 如何在数据中存储带有多个引号的字符串？

> ID：12825106
> 
> 赞同：0
> 
> 时间：2012-10-10T17:34:55.573
> 
> 标签：c#, string

我有一个输入需要存储在字符串中以便我可以操作，但我无法存储为字符串，因为输入有多个引号。

例如

```
string s = "dfasdf" : "FASDFSD" ["FSADFSA"]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:38:23.523

有两种方法可以做到：

*   使用常规字符串并转义双引号，或
*   使用[逐字](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx) `@""`字符串，并加双引号。

```
 "\"This string is quoted\"" 
```

或者

```
 @"""This string is quoted""" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T17:37:34.757

`\"`您可以通过编写而不是仅转义应视为数据一部分的引号`"`：

```
string s = "\"dfasdf\" : \"FASDFSD\" [\"FSADFSA\"]"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:40:29.773

您可以使用`\"`以注入双引号

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T17:37:44.780

一种解决方案是将字符串中所需的每个引号文字加倍，如下所示：

```
string s = """dfasdf"":""FASDFSD""[""FSADFSA""]"; 
```

另一个是逃避他们：

```
string s ="\"dfasdf\":\"FASDFSD\"[\"FSADFSA\"]"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T17:38:56.717

使用转义很好：

```
 string s = "\"dfasdf\" : \"FASDFSD\" [\"FSADFSA\"]"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T17:38:51.470

您可以通过写两次在逐字字符串中包含双引号字符（请参阅下面的注释）

所以如果你需要存储

```
hello "Hi!" 
```

你需要像这样存储它

```
string s=@"hello ""Hi!"" "; 
```

**或者**

逃脱它使用`\`

```
string s="hello \"Hi!\" "; 
```

* * *

**笔记**

逐字字符串不解释控制字符，如 \n,\r..所以当 \n,\r 用于逐字字符串时，它永远不会被解释。

所以`string s="hello \n hi!";`

将打印为

```
hello \n hi! 
```

**不是**

```
hello
hi! 
```

# javascript - 函数目标 ID 范围

> ID：12825112
> 
> 赞同：1
> 
> 时间：2012-10-10T17:35:44.420
> 
> 标签：javascript, range, element

我当前的 init() 代码以元素 ID 为目标，从“desc_1”、“desc_2”、“desc_3”...等开始。

```
function init(){
   var max = 50000;
   for (i = 1; i < max; i++){
      makeEditable('desc_'+i);}
} 
```

页面上的大多数元素实际上不会从 1 开始。例如，它们可能是 'desc_47'、'desc_48'、'desc_49' - 或者在某些情况下，甚至不是连续的：'desc_96'、'desc_99 '，'desc_101'。

我的 init() 语句必须针对这些类型的元素 ID 是什么？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:38:24.597

无需猜测 50000 个 ID，只需选择 ID 以 开头的所有元素`desc_`，然后将元素传递给`makeEditable()`.

```
var els = document.querySelectorAll("*[id^=desc_]");

for (var i = 0; i < els.length; i++) {
    makeEditable(els[i]);
} 
```

如果它们都是相同的元素类型，`*`请在选择器中替换为标签名称。

如果还有其他以该 ID 开头的元素，则为这些元素分配一个类，以便您可以直接定位它们。

如果你不能添加一个类，那么在传递它之前，你只需要测试`id`每个元素的，以确保它的末尾有一个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:51:39.127

如果您正在寻找对旧浏览器的支持，可以通过以下方式完成（可能有点混乱）：

```
var divs = document.getElementsByTagName('div'),
        len = divs.length,
        myArray = [];

    for (var i = 0;i<len;i++)   {
        if (divs[i].id.substring(0,4) == "desc")    {
            makeEditable(divs[i]);
        }
    } 
```

# jquery - jQuery - 使用元素ID来调用同名的现有变量......？

> ID：12825116
> 
> 赞同：0
> 
> 时间：2012-10-10T17:35:57.320
> 
> 标签：jquery, variables

我发现了一些看起来与我需要的相似的帖子，但似乎没有一个可以解决我的问题。

我有一组包含数据数组的变量。例如：

```
var data1 = [1,2,3,4,5]; 
```

我在页面上有与这些变量名称匹配的 id 元素。

```
<li id="data1">Data 1</li> 
```

我希望能够单击`<li>`元素，并调用关联的变量。如何通过单击 id 为 data1 的元素来使用变量 data1 ...？

作为一个基本示例，假设我想提醒 data1 数组的内容。我从这样的事情开始：

```
$('li').click(function() {
   dataID = $(this).attr('id');

   alert( ...? ); // <- how do I get the contents of the variable data1 now that I know the clicked element's id was 'data1'?
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:39:13.177

如果将变量存储在对象上，则可以使用数组表示法轻松引用它。

```
var dataObj = {};
dataOjb.data1 = [1,2,3,4,5];
$('li').click(function() {
   alert( dataObj[this.id] );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:38:37.720

您总是可以使用`eval(dataID)`来调用您的变量，但我建议您将值存储在一个对象中。事实上，`eval`除非绝对必要，否则不要使用。最好将您的值存储在对象中。

# java - jmx/jstatd 通过 ssh 隧道访问远程机器

> ID：12825117
> 
> 赞同：14
> 
> 时间：2012-10-10T17:36:01.930
> 
> 标签：java, jmx, visualvm

我想使用 jmx 或 jstatd 通过 ssh 隧道（到 EC2 机器）使用 visualvm 应用程序。我该怎么做呢？以下是已尝试（但失败）的列表：（顺便说一句：如果视觉 vm 不合适，我如何在远程机器上找到内存泄漏？）

## jstatd：尝试：

我在 EC2 机器上设置了 jstatd 服务器（应用程序已经在上面运行）然后我设置了一个将本地端口 3333 映射到远程端口 1099 的隧道在 VisualVM 中我尝试在端口 3333 上使用 jstatd 进行连接......没有任何进程在 EC2 上出现

这个链接说 jstatd 打开了另一个端口： [http](http://rukuro-blog.heroku.com/2011/06/30/monitoring-remote-java-applications-with-visualvm) ://rukuro-blog.heroku.com/2011/06/30/monitoring-remote-java-applications-with-visualvm ...所以我从本地主机隧道那个端口到远程。我重新启动了视觉虚拟机......仍然没有

当我尝试使用以下命令列出从 EC2 运行的进程时：

```
jps -l -m -v rmi://localhost 
```

...我有一个进程列表

当我在我的家用机器上列出它时

```
jps -l -m -v rmi://localhost:3333 
```

....我没有！那么，rmi 端口是否没有与 jstatd 端口（3333）建立隧道......？

## jmx 尝试：

我使用以下命令在远程机器上启动了应用程序：

```
java -Dcom.sun.management.jmxremote.port=3333 \
     -Dcom.sun.management.jmxremote.ssl=false \
     -Dcom.sun.management.jmxremote.authenticate=false\
        -cp :post/* <appName> 
```

...该应用程序有效，因此我将本地端口 3333 隧道传输到远程 3333

然后我尝试从可视 vm 界面设置到 localhost:3333 的 jmx 链接：...它弹出一个错误说：

```
cannot connect to localhost:3333 using service:jmx:rmi:///jndi/rmi://localhost:3333/jmxrmi 
```

如果我需要设置到删除 RMI 服务器的链接，我不知道该怎么做。

## JMXMP 尝试：

这很有希望，但有些地方不太对劲：

首先，我将 jmx_remote jar 添加到类路径中，并使用与上面显示的 JMX 案例中相同的命令在远程机器上启动应用程序。[我在oracle 下载链接](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-plat-419418.html)找到了 jar

我建立了一个从本地端口 3333 到远程端口 3333 的 ssh 隧道。然后我在 calsspath 中使用相同的 jmx_remote 文件启动了 visualvm。

```
visualvm -cp:a ~/jmx/jmxremote_optional.jar 
```

然后我尝试将visualvm连接到远程服务器：

```
service:jmx:jmxmp://localhost:3333 
```

现在visual vm似乎试图无限期地连接。它在状态栏中显示“添加服务：jmx：jmxp：// localhost：3333”......并继续这样做，直到我关闭远程端的应用程序，此时它抛出一个弹出窗口说它无法连接与服务器。

## 关于使用袜子：

我尝试同时使用 JMX 和 jstatd 都失败了。

我不确定 SOCKS 代理是否正常工作，所以这是我尝试连接的方式：

```
ssh -i ~/.ssh/starter.pem -v -D 9696 user@host 
```

为了完整起见，我在另一端启动了命令：

```
 java -Dcom.sun.management.jmxremote\
 -Dcom.sun.management.jmxremote.ssl=false\
 -Dcom.sun.management.jmxremote.authenticate=false\
 -Dcom.sun.management.jmxremote.port=3333 <app> 
```

在本地端，我根据此[*LINK to VisualVm help page*](http://theholyjava.wordpress.com/2012/09/21/visualvm-monitoring-remote-jvm-over-ssh-jmx-or-not/)设置了 visualvm 连接。

使用 JMX 连接，我通过在 visualvm 上右键单击主机并在提示我时填写主机端口来设置机器名称和端口。此时底部的状态栏显示 visualvm 正在尝试连接到远程机器，但几分钟后它失败了。

使用 jstatd 连接，我希望远程进程自动显示。这没有发生......没有错误消息或任何东西。

在袜子一侧，以下消息循环重复：

```
debug1: Connection to port 9696 forwarding to socks port 0 requested.
debug1: channel 2: new [dynamic-tcpip]
channel 3: open failed: connect failed: Connection timed out
debug1: channel 3: free: direct-tcpip: listening port 9696 for 50.16.35.69 port 3333, connect from 127.0.0.1 port 43909, nchannels 4
debug1: Connection to port 9696 forwarding to socks port 0 requested.
debug1: channel 3: new [dynamic-tcpip]
channel 2: open failed: connect failed: Connection timed out
debug1: channel 2: free: direct-tcpip: listening port 9696 for 50.16.35.69 port 1099, connect from 127.0.0.1 port 44644, nchannels 4 
```

我想知道这是否与袜子频道有关。我之前已经通过隧道将单个端口连接到远程机器，所以我无法想象这是隧道的配置问题。我在两边都运行 ubuntu linux。

谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T06:30:07.560

将 SSH 隧道与 SOCKS 代理一起使用。有关更多详细信息，请参阅[此帖子](http://theholyjava.wordpress.com/2012/09/21/visualvm-monitoring-remote-jvm-over-ssh-jmx-or-not/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T10:16:57.767

我两分钟前刚做的...

*   在端口 8686 上使用 jmx 的远程服务器 - 此端口已锁定
*   远程框上的 sshd_config 应该有“AllowTcpForwarding yes”或注释掉
*   打开一个腻子 ssh 会话，将本地端口 8686（或其他）端口转发到 localhost:8686
*   在 VisualVm 中添加一个指向本地转发端口的本地 jmx 连接
*   VisualVm 自动看到 jvm 并开始监控

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:25:30.123

JMX/RMI 很难直接建立隧道，因为如果是 RMI。基本上，服务器会创建一个 RMI 存根定义，该定义具有从何处连接回服务器的指示，但是当您进行调谐时，存根会从服务器上掉下来，但它们的方向都是错误的，而且它们可以从这里到那里。

解决此问题的最简单方法是[放弃](http://docs.oracle.com/javase/1.5.0/docs/guide/jmx/overview/connectors.html)RMI 连接器并使用*JMXMP*。底层协议是纯套接字，因此非常适合隧道。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-03T14:32:33.337

以下是对我有用的步骤：

1.  以这种方式在远程主机中启动[ejstatd](https://github.com/anthony-o/ejstatd)（在 ejstatd 文件夹中）：（`mvn exec:java -Dexec.args="-pr 2000 -ph 2001 -pv 2002"`用于“jstatd”类型的连接）
2.  使用这些额外的 Java 参数启动您的 Java 应用程序：（`-Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -Dcom.sun.management.jmxremote.port=2003 -Dcom.sun.management.jmxremote.rmi.port=2003`用于“JMX”类型的连接）
3.  打开与这 4 个端口（包括 2000 到 2003 年）的远程主机的 SSH 会话。例如对于 OpenSSH 客户端，您必须添加这些参数：`-L2000:localhost:2000 -L2001:localhost:2001 -L2002:localhost:2002 -L2003:localhost:2003`
4.  启动 JVisualVM
    1.  右键单击“本地”>“添加 jstatd 连接...”>“添加自定义”并`2000`在“端口”选择中输入“”；
    2.  右键单击“本地”>“添加 JMX 连接...”并`localhost:2003`在“连接”输入中输入“”，并选中“不需要 SSL 连接”
    3.  您的 Java 进程将出现两次：一次来自“jstatd”连接类型，一次来自“JMX”连接类型。

免责声明：我是开源[ejstatd](https://github.com/anthony-o/ejstatd)工具的作者。

# regex - 从脚本运行时，Powershell 开关正则表达式失败，但在控制台中成功

> ID：12825118
> 
> 赞同：0
> 
> 时间：2012-10-10T17:36:01.737
> 
> 标签：regex, powershell, switch-statement, powershell-2.0

这是在 powershell -noprofile 中的 Windows XP SP3 上的 Powershell v2 中运行的。

如果我将下面的 Powershell 脚本复制并粘贴到控制台中，则它可以工作，但如果我将其作为脚本运行，则它不起作用。谁能看到可能导致这种情况的原因？

脚本如下（部分名称已更改以保护无辜者）。

```
#Known Error values to count instances of
$KnownErrorText = @"
Invalid Descriptor Index
Syntax error or access violation
An error occurred while attemping to update a record
Message from LDAP server: Invalid credentials
Error sending data over TCP connection
"@

#Fix the variable so it's an array
$KnownErrorText = $knownErrorText.split("`n")

#output variables
$KnownErrors = @{}
$UnknownErrors = @()

#Generate the hash to contain counts of the the known errors
foreach ($line in $knownErrorText) {$KnownErrors.Add($line,0)}

#Get error lines from the log
$scerrors = Select-String -Path "\\myserver01\d$\logs\application.log" -Pattern "Error"

"$($scerrors.count) errors to process"
$ProcessedErrors = 1

#Look at each error.  Pass the error through a switch to identify whether it's
#a known error or not. If it's Known, increment the appropriate count in the hash
#if it's not known, add it to the unknown errors output variable
foreach ($e in $scerrors) {
    "$($ProcessedErrors)`tProcessing`t$($e.line)"
    $addToUnknown = $true
    "e.line type:`t$($e.line.gettype().name)`tLength$($e.line.length)"
    switch -regex ($knownErrorText) {
             #Look in the text of the current error for the any of the errors in
             #the KnownErrorText array
             #THIS IS THE PART THAT DOESN'T WORK WHEN RUNNING IN A SCRIPT
     {"$($e.line)" -match "^.*$($_).*`$"} {
        Write-host "Matched $($_)" -ForegroundColor Green -BackgroundColor Black
        $KnownErrors.Set_Item($_,([int]$KnownErrors.Get_Item($_))+1)
        $addToUnknown = $false
                    #We found our match so stop 
                    #processing the KnownErrorText array through the switch
        break
     }
     default {
        Write-host "UnMatched`t$($_)" -ForegroundColor Red -BackgroundColor Black
     }
 }

     #If we got through all the KnownErrorText values without finding a match, 
     #add the error to the UnknownErrors array to be displayed
 if ($addToUnknown) {$UnknownErrors += $e}

 $ProcessedErrors++
 if ($ProcessedErrors -ge 5) {break}
 }

#Console reporting
"Known Errors:"
$KnownErrors.GetEnumerator() | Sort-Object Value -Descending
""
"$($UnknownErrors.count) Unknown Errors:"
$UnknownErrors | Foreach {$_.line} 
```

当我将其作为脚本运行时（例如，如果保存到 c:\temp\ErrorReporting.ps1 并使用 `& c:\Temp\ErrorReporting.ps1`

匹配部分失败：

`{"$($e.line)" -match "^.*$($_).*`$"}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:03:19.047

问题是由于字符串拆分操作在脚本和控制台中的工作方式不同。粘贴到控制台可能会产生保存的脚本文件包含的不同行尾（`\r\n`与 just 相比`\n`）。`$knownErrorText`因此，明确指定数组而不是拆分字符串来生成它会有所帮助。

```
$knownErrorText = 'Invalid Descriptor Index',
                  'Syntax error or access violation',
                  ... 
```

*在旁边：*

您没有`switch -Regex`按预期使用。标准用法不是有一个脚本块来进行`-match`比较来定义案例，而是简单地提供一个输入匹配的正则表达式字符串。例如

```
$myStr = 'abc123'
switch -regex ($myStr)
{
   'abc\d\d\d' { 'abc with 3 numbers'; break }
   'xyz\d\d\d' { 'xyz with 3 numbers'; break }
} 
```

如果您在脚本块内部进行检查以定义案例，那么您实际上根本不需要该`-regex`标志。

您的目标似乎是检查是否`$e.Line`包含任何已知的错误消息。如果是这样，那么开关可能不是最好的工具，无论如何。您可以非常简单地执行此操作，如下所示：

```
foreach ($e in $scerrors)
{
   if( $knownErrors |?{$e.Line -match $_} )
   {
      "$($e.Line) matches a known error"
   }
   else
   {
      "$($e.Line) does not match a known error"
   }
} 
```

# c# - 在 Android 中将属性绑定到 mvxBindableListView

> ID：12825121
> 
> 赞同：1
> 
> 时间：2012-10-10T17:36:11.277
> 
> 标签：c#, android, mvvmcross

我在尝试将 mvxBindableListView 中的对象属性与 MVVMCross 和 Android 绑定时遇到问题。

类的结构如下：

```
public class A 
{
    public string MyPropertyA1 { get; set; }
    public int MyPropertyA2 { get; set; }
}
public class B 
{
    public int MyPropertyB1 { get; set; }
    public int MyPropertyB2 { get; set; }
}

public class C
{
    public int MyPropertyC1 { get; set; }
    public A MyPropertyA { get; set; }
    public B MyPropertyB { get; set; }
} 
```

mvxBindableListView 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<Mvx.mvxBindableListView xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:local="http://schemas.android.com/apk/res/Android.Client"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
local:MvxBind="{'ItemsSource':{'Path':'Results'}}"
local:MvxItemTemplate="@layout/detail_viewmodel" /> 
```

结果是： public ObservableCollection Results { get; 放; 和 detail_viewmodel 是：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:local="http://schemas.android.com/apk/res/Android.Client"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="6dip"
    android:layout_marginTop="6dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    local:MvxBind="{'Text':{'Path':'MyPropertyA.MyPropertyA1'}}" /> 
```

当应用程序运行时，它向我显示 mvxBindableListView 以及包含变量 'Results' 的元素数量，但行是空的。

有谁知道发生了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T06:44:36.490

我尝试更改教程应用程序以使用电子邮件：

```
 public class Thing
    {
        public string Life { get; set; }

        public Thing()
        {
            Life = Guid.NewGuid().ToString();
        }
    }

    public class SimpleEmail
    {
        public Thing MyThing { get; set; }
        public string From { get; set; }    
        public string Header { get; set; }    
        public string Message { get; set; }

        public SimpleEmail()
        {
            MyThing = new Thing();
        }
    } 
```

以及要包括的模板：

```
<TextView
android:id="@+id/email_header"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_marginLeft="6dip"
android:layout_marginTop="6dip"
android:layout_toRightOf="@id/email_from"
local:MvxBind="{'Text':{'Path':'MyThing.Life'}}"
/> 
```

这表明Guid很好。

看你的代码，因为你的模型不支持INotifyPropertyChanged，那么我想知道你是不是在绑定之前设置了ViewModel属性？

为了解决这个问题，我可能会尝试：

```
public class A 
{
    public string MyPropertyA1 { get; set; }
    public int MyPropertyA2 { get; set; }
}
public class B 
{
    public int MyPropertyB1 { get; set; }
    public int MyPropertyB2 { get; set; }
}

public class C
{
    public int MyPropertyC1 { get; set; }
    public A MyPropertyA { get; set; }
    public B MyPropertyB { get; set; }
    public C()
    {
       MyPropertyA = new A() { MyPropertyA1 = "TestValue" };
    }
} 
```

如果您的应用程序随后显示“TestValue”，那么您就知道绑定正在工作。

如果您需要显示正确的值，您有两种选择：

1.  在将视图绑定到数据之前设置属性
2.  不知何故，绑定链上的某处会发出 INotifyPropertyChange 事件的信号，以便绑定知道它必须刷新

# javascript - Jade 部分继承块/扩展实现

> ID：12825124
> 
> 赞同：0
> 
> 时间：2012-10-10T17:36:17.553
> 
> 标签：javascript, node.js, template-engine, pug

一段时间以来，我一直在跨多个不同框架的应用程序中使用 partials；我对 Jade 的实现或我的错误使用感到困惑，并希望获得其他开发者的经验以及对我的理解的任何更正。

文件夹结构：

```
$ cd <app_root>/views
$ ls
  myHoverToolTip.jade
  layout.jade 
```

呼叫者：

```
httpJadeViewerRsp = (req, res) -> res.render('myHoverToolTip.jade', { variable: 'here' }) 
```

myHoverToolTip.jade

```
extends layout

block myHoverToolTip
  .some-div
    h1 Awesome-O Rocks 
```

布局.jade

```
<...bunch of jade markup...>
.div
  block myHoverToolTip
    h5 Content to remove 
```

这适用于仅提供页面并正在寻找提供布局的标准方式的少数用例。然而，偏离这一点并以更模块的方式使用部分来干燥，你会发现扩展/块的这种实现让我摸不着头脑。我想将我的工具提示分成一个部分，以便在数据网格中重用（当然将许多变量传递给部分，所以忘记包含），这个实现禁止我拥有这种能力。任何人都可以为我提供进一步的见解，更正我的用法，或者将我引导到一个更好的 NodeJs-ready 模板库，它可以与 Express 3 一起使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:13:59.813

听起来[mixins](https://github.com/visionmedia/jade#mixins)可能会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:45:04.377

自 2012 年 8 月和 Express 3 起，“partials”支持已被删除，但该功能仍可通过不带引号或括号的表达式“include [yourtemplatename]”获得。

我发现 Jade 的另一个有用的替代方法是 EJS 模板，它更像 ASP.NET / JSTL。

编辑：在这两种情况下，可用的父上下文和变量都可以通过包含访问。

# asp.net-mvc - 在 MVC 中用于灵活调查的正确模型

> ID：12825129
> 
> 赞同：3
> 
> 时间：2012-10-10T17:36:38.150
> 
> 标签：asp.net-mvc, model-view-controller

我正在寻找创建一个 MVC 应用程序来编辑各种客户调查的结果。但我正在努力让这种方法/模型在我的脑海中出现。

我的调查结果存储在不同的数据库表（每个版本的调查一个表）中，每个版本的列集略有不同。我创建了一个组合（Sql）视图，它只显示我想要编辑的表列，因为源表包含很多不相关的列。

> 创建视图 [vw_CombinedSurveyResults] AS
> 
> 选择 'V10_v2' 作为 anTable，UniqueRecordID，ddDate，iIncidNo，bA，bB，bC，null 作为 'bD FROM V10_v2
> 
> UNION SELECT '10_v1' as anTable, UniqueRecordID, ddDate, iIncidNo, bA, bB, null as bC, bD FROM V10_v1
> 
> UNION SELECT 'V9_v6' as anTable, UniqueRecordID, ddDate, iIncidNo, bA, null as bB, null as bC, bD FROM V9_v6

我的第一个想法是搜索组合（sql）视图（按日期和事件编号过滤），然后在表格中显示结果，到目前为止一切都很好。

我脑筋急转弯的部分是决定如何最好地更新选定的个人调查记录，这是一种整洁的方式，并且在创建未来版本的调查时需要最少的努力。

到目前为止，我已经为每个源表创建了一个 sql 视图（缩减为只包含我感兴趣的列）并使用这些视图为每个源缩减视图创建一些 Linq To Sql 类. （这些是“模型”）

我使用其中一个自动生成的类作为模型 a 来创建用于编辑调查值的强类型视图（只有一个版本，v10_v2）。

我有一个用于更新缩减视图 (V10_v2) 的控制器，并且一切正常……但这仅适用于证明概念的一个调查版本，但它非常笨重。

继续沿着这条路走意味着我需要创建多个（MVC）视图和控制器，每个调查表一个，但必须有一种更流畅/更简单的方式来组织模型或视图或两者兼而有之？

在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:46:51.513

你可以用不同的方式分解表格......

```
Surveys
-------
Id
Name
...

Fields
------
Id
SurveyId
Name
DataType

Answers
-------
Id
SurveyId
UserId
...

IntegerValues
-------------
Id
FieldId
AnswerId
Value (INTEGER)

StringValues
------------
Id
FieldId
AnswerId
Value (VARCHAR) 
```

通过这种方式，一切都是完全灵活的，您最终会为每种数据类型创建一个表，因此可以以强类型的方式访问它。您需要一个`switch`/`select case`语句来确定要根据字段定义查询哪些值表

**回复：视图模型**

这里有很多选择...

首先，您可以创建多个模型，这些模型继承自一个通用字段模型，每种数据类型一个。然后，您的问卷视图模型看起来像......

```
Public Class QViewModel
    Public Property QuestionnaireId As Integer
    Public Property Fields As List(Of QField)
    ...
End Class

Public Class QField
    Public Property FieldName As String
End Class

Public Class QFieldInteger
    Inherits QField
    Public Property Value as Integer
End Class

Public Class QFieldString
    Inherits QField
    Public Property Value as String
End Class 
```

这将允许您在创建模型时向模型添加任意数量的`QFieldstring`、等... 以表示您的问卷。`QFieldInteger`如果您需要其他字段类型的自定义编辑器（例如映射到整数的多项选择答案，很像枚举），您还可以添加自定义编辑器

或者，您*可以通过*[Reflection.Emit](http://msdn.microsoft.com/en-us/library/3y322t50.aspx)（快速，复杂）或[CodeDOM](http://msdn.microsoft.com/en-us/library/y2k85ax6.aspx)（运行时较慢，易于使用）使用反射动态构建整个事物。这意味着您可以为每个调查创建一个具有适当类型属性的抽象类。

后一种方法（Reflection.Emit/CodeDOM）设置起来更复杂，但如果您想进一步调整事情，则可以提供更大的灵活性（例如，您可以在定义类时直接向类属性添加自定义验证属性） . 您必须担心缓存实例化类等事情，确保您生成的类不会被破坏（例如，有人将 .Net 代码存储在数据库中的字段名称中），让您的操作和方法处理动态生成的课程和一大堆其他事情。

我建议您从多模型方法开始，如果您无法获得所需的控制，请切换。

# excel - 如何打开现有 PowerPoint 图表的数据表

> ID：12825131
> 
> 赞同：2
> 
> 时间：2012-10-10T17:36:53.747
> 
> 标签：excel, powerpoint, vba

我进行了广泛的搜索，似乎没有找到答案。我想更新现有 powerpoint 图表中的数据。到目前为止，我可以打开他的演示文稿，选择页面，但我无法越过下面的最后一行。

我需要打开数据表，以便将数据粘贴到那里。我可以使用新图表来完成此操作，但随后数据表会立即打开，但我想使用现有图表，因为它将具有所需的所有格式。然后，我将对多个页面中的多个图表执行此操作，以更新一组新客户的标准预设。

有人可以展示我将如何打开数据表，以便我可以选择正确的单元格并粘贴我的新数据（来自 Excel）。由于许多原因我不想粘贴excel图表，我希望daa驻留在PowerPoint中。此宏从具有新数据的 excel 文件运行。

```
Sub test2()

Set rngData = Range("A1:D6")

Set ObjPPT = CreateObject("PowerPoint.Application")
Set ObjPresentation = ObjPPT.Presentations.Open("C:\Documents and Settings\ewnym5s\My Documents\Document_sample.pptx")
Set ObjSlide = ObjPresentation.Slides(1)
Set mychart = ObjSlide.Shapes("Chart 1").Chart
mychart.Select

Set wb = mychart.ChartData
Set ws = wb.Worksheets(1) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T23:49:20.593

要打开数据表，您必须选择形状，然后激活图表数据。然后您可以访问工作簿。我用一些评论稍微修改了你的代码

```
 Sub test2()

    Set rngData = Range("A1:D6")

    Set ObjPPT = CreateObject("PowerPoint.Application")
    Set ObjPresentation = ObjPPT.Presentations.Open("C:\Documents and Settings\ewnym5s\My Documents\Document_sample.pptx")
    Set ObjSlide = ObjPresentation.Slides(1)
    Set mychart = ObjSlide.Shapes("Chart 1").Chart
    mychart.Select

    'Activate the chart data
    mychart.ChartData.Activate
    'Retrieve the workbook.
    Set wb = mychart.ChartData.Workbook
    Set ws = wb.Worksheets(1)

    'Do stuff with the workbook then close with save
    wb.Close True
  end Sub 
```

如果您不知道这一点，当您激活图表数据时，Excel 将打开以显示工作簿。如果使用此方法，则无法避免它至少闪烁。为了使闪烁尽可能简短，您可以添加`wb.parent.Visible = false`. 如果你不能忍受闪烁，我[在这个线程中指出了一个可能的解决](https://stackoverflow.com/a/11524525/1316573)方法，但它需要使用 OLEObjects 和旧控件。

# php - 如果 URL 包含 X 回显 Y，否则为 URL

> ID：12825137
> 
> 赞同：0
> 
> 时间：2012-10-10T17:37:32.403
> 
> 标签：php, strpos

我想根据 URL 在 div 中回显不同的类。它适用于本地化的 wordpress 主题，其中 div 将根据您所在的站点使用不同的背景。

```
<?php 
    if (strpos($_SERVER['REQUEST_URI'],'/language/no') !== false) 
    {
        echo 'class="project_decal_no"';
    } 
    elseif (strpos($_SERVER['REQUEST_URI'],'/language/en') !== false) 
    {
        echo 'class="project_decal_en"';
    } 
    else 
    {
        echo 'class="project_decal"';
    }
?> 
```

我在正确的道路上吗？应该改变什么才能让它发挥作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:46:03.380

如果它是针对主题的，那么您`/language/en`不太可能在 URL 中 - 它可能只是一个目录路径，无论 URL 本身如何，它都会改变。请记住，这`$_SERVER['REQUEST_URI']`是出现在浏览器地址栏中的文本 - 所以对于这个页面`strpos($_SERVER['REQUEST_URI'], '/questions/12825137') !== false`来说是正确的。

# python - 在变量中拆分长 SQL 查询

> ID：12825140
> 
> 赞同：2
> 
> 时间：2012-10-10T17:37:35.650
> 
> 标签：python, pep8

遵循 PEP8 指南，将很长的 sql 语句格式化为变量的最佳实践是什么？

下面是一个示例，说明我如何拆分变量：

```
var= "some value"
query = "select a,b,c,d,e,f,g,h from a_very_long_tablename" +\
"where a_very_long_sql_statement='is_really_very_long' " +\
"or a_very_long_sql_statement='" + var + "' order by a" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:38:38.223

使用三引号字符串：

```
query= """\
select a,b,c,d,e,f,g,h from a_very_long_tablename
where a_very_long_sql_statement='is_really_very_long'
or a_very_long_sql_statement='is_really_really_very_long'
""" 
```

SQL 是一种与空格无关的语言，您可以使用换行符和空格来分隔。最初的反斜杠转义了第一个换行符；这是个人喜好，但不是必需的。

如果您真的不想要换行符，请在字符串周围加上括号；不需要使用`+`符号，因为 python 会为你制作一个长字符串：

```
query = (
    "select a,b,c,d,e,f,g,h from a_very_long_tablename "
    "where a_very_long_sql_statement='is_really_very_long' "
    "or a_very_long_sql_statement='is_really_really_very_long'") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T17:38:53.320

试试下面的代码：

```
query = """
SELECT a,b,c,d,e,f,g,h
FROM a_very_long_tablename
WHERE a_very_long_sql_statement='is_really_very_long
OR a_very_long_sql_statement='is_really_really_very_long
""" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:50:37.530

编辑后，如果要在 sql 查询中包含变量。

```
query = """
SELECT a,b,c,d,e,f,g,h
FROM a_very_long_tablename
WHERE a_very_long_sql_statement='is_really_very_long
OR a_very_long_sql_statement= %s
""" % var 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-18T15:49:35.347

使用三引号`'''`和**格式**字符串更具可读性。

```
var= "some value"

query = '''
select a,b,c,d,e,f,g,h from a_very_long_tablename
where a_very_long_sql_statement='is_really_very_long'
or a_very_long_sql_statement="{var}" order by a
'''.format(var=var) 
```

# asp.net-mvc - Developer Express MVC GridView的客户端变更回调路由

> ID：12825142
> 
> 赞同：0
> 
> 时间：2012-10-10T17:37:39.987
> 
> 标签：asp.net-mvc, asp.net-mvc-2, gridview, devexpress

是否可以在客户端更改 Developer Express GridView 的回调路由？或者可能对另一个路由执行回调，而不是在`settings.CallbackRouteValues`属性中指定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:41:23.237

通过 GridView 的 property 似乎是可能的`callbackUrl`。只需要在执行回调之前设置属性：

```
GridViewName.callbackUrl = '/Desired/Route'; 
```

我还建议通过 End Callback 客户端事件处理程序将此属性设置为回调结束时的原始值。

# c++ - 与记忆相关的“竞技场”一词的含义是什么？

> ID：12825148
> 
> 赞同：130
> 
> 时间：2012-10-10T17:38:03.593
> 
> 标签：c++, c, memory-management, terminology

我正在阅读一本关于内存作为编程概念的书。在后面的一章中，作者大量使用了**arena**一词，但从未对其进行定义。我搜索了这个词的含义以及它与记忆的关系，但一无所获。以下是作者使用该术语的一些上下文：

> “下一个序列化示例包含一种称为从特定**领域**分配内存的策略。”
> 
> “......这在处理内存泄漏或从特定**领域**分配时很有用。”
> 
> “......如果我们想释放内存，那么我们将释放整个**arena**。”

作者在一章中使用了这个词超过 100 次。词汇表中的唯一定义是：

> **从 arena 分配**- 首先分配一个 arena，然后由程序本身（而不是由进程内存管理器）管理 arena 内的分配/解除分配的技术；用于复杂数据结构和对象的压缩和序列化，或用于管理安全关键和/或容错系统中的内存。

鉴于这些情况，谁能为我定义**竞技场？**

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-10-10T17:43:00.260

竞技场只是一块大的、连续的内存，您分配一次，然后通过分发部分内存来手动管理内存。例如：

```
char * arena = malloc(HUGE_NUMBER);

unsigned int current = 0;

void * my_malloc(size_t n) { current += n; return arena + current - n; } 
```

关键是您可以完全控制内存分配的工作方式。唯一不受您控制的是初始分配的单个库调用。

一个流行的用例是每个 arena 仅用于分配一个固定大小的内存块。在这种情况下，您可以编写非常有效的回收算法。另一个用例是每个“任务”有一个竞技场，当您完成任务后，您可以一次性释放整个竞技场，而无需担心跟踪单个释放。

这些技术中的每一个都非常专业，并且通常只有在您确切知道自己在做什么以及为什么正常的库分配不够好时才会派上用场。请注意，一个好的内存分配器本身已经可以发挥很多作用，在您开始自己处理内存之前，您需要大量证据证明这还不够好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-10T17:41:37.123

[我会用这个](http://www.linuxjournal.com/article/4681)作为可能的答案。

`•Memory Arena (also known as break space)--the area where dynamic runtime memory is stored. The memory arena consists of the heap and unused memory. The heap is where all user-allocated memory is located. The heap grows up from a lower memory address to a higher memory address.`

我将添加[Wikipedia 的同义词](http://en.wikipedia.org/wiki/Region-based_memory_management)：region、zone、arena、area 或 memory context。

基本上它是您从操作系统获得的内存，然后分配出去，然后可以一次全部释放。这样做的好处是重复的小调用`malloc()`可能代价高昂（每次内存分配都有性能成本：在程序的逻辑地址空间中分配内存所花费的时间以及将该地址空间分配给物理内存所花费的时间）就好像您知道一个球场一样，您可以为自己获得一大块内存，然后根据需要/如何将其分配给您的变量。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-10T17:43:04.060

将其视为“堆”的同义词。通常，您的进程只有一个堆/竞技场，所有内存分配都从那里发生。

但是，有时您会遇到将一系列分配组合在一起的情况（例如，为了性能，避免碎片等）。在这种情况下，最好分配一个新的堆/竞技场，然后对于任何分配，您可以决定从哪个堆分配。

例如，您可能有一个粒子系统，其中经常分配和释放大量相同大小的对象。为避免内存碎片，您可以从仅用于这些粒子的堆中分配每个粒子，所有其他分配将来自默认堆。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-10T17:43:37.617

来自[http://www.bozemanpass.com/info/linux/malloc/Linux_Heap_Contention.html](http://www.bozemanpass.com/info/linux/malloc/Linux_Heap_Contention.html)：

> libc.so.x 共享库包含 glibc 组件，堆代码位于其中。堆的当前实现使用多个独立的子堆，称为 arenas。每个 arena 都有自己的互斥锁用于并发保护。因此，如果一个进程的堆中有足够的区域，并且有一种机制可以在它们之间平均分配线程的堆访问，那么对互斥体的争用可能性应该是最小的。事实证明，这对分配很有效。在 malloc() 中，进行测试以查看当前线程的当前目标 arena 的互斥锁是否空闲（trylock）。如果是这样，那么竞技场现在被锁定并且分配继续进行。如果互斥体忙，则依次尝试每个剩余的竞技场并在互斥体不忙时使用。如果没有任何竞技场可以在没有阻塞的情况下被锁定，则会创建一个新的竞技场。根据定义，该区域尚未锁定，因此分配现在可以继续进行而不会阻塞。最后，线程最后一次使用的 arena 的 ID 保留在线程本地存储中，随后用作该线程下一次调用 malloc() 时尝试的第一个 arena。因此，所有对 malloc() 的调用都将继续进行而不会阻塞。

你也可以参考这个链接：

[http://www.codeproject.com/Articles/44850/Arena-Allocator-DTOR-and-Embedded-Preallocated-Buf](http://www.codeproject.com/Articles/44850/Arena-Allocator-DTOR-and-Embedded-Preallocated-Buf)

# hyperthreading - 英特尔 IPP 库要求

> ID：12825153
> 
> 赞同：1
> 
> 时间：2012-10-10T17:38:21.843
> 
> 标签：hyperthreading, intel-ipp

所以我正在尝试编译库附带的英特尔 IPP 示例应用程序——字符串匹配——我似乎无法利用 IPP 指令。当我禁用机器上的一个核心时，计算时间保持不变。我想知道我的机器是否满足 IPP 的所有要求，和/或为什么会出现这种情况。

这里是环境：

*   Windows 7的
*   IPP 7.0
*   Intel Core i3（2 个内核，每个内核 2 个线程）
*   我使用 msconfig 选项禁用内核（启动选项卡 > 高级选项...）

我假设我的机器上支持/启用了超线程，因为正如您在图片中看到的那样![在此处输入图像描述](../Images/209046f6abcd38a736292573ddf8ccac.png) ，逻辑处理器的数量大于处理器的数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:44:11.740

您是否使用了提供的 intel icc 编译器？结合使用intel编译器和ipp性能更好。

# uitableview - UITableView 细节

> ID：12825156
> 
> 赞同：0
> 
> 时间：2012-10-10T17:38:36.353
> 
> 标签：uitableview

当我从 UITable 加载详细视图时，我遇到了一个奇怪的问题。就好像在 segue（到细节）发生之后，视图似乎是在自身之上加载的。有没有人见过这种类型的东西，或者有什么想法？几个月来一直运行良好，现在发生了这种情况。

表格视图很好

![：](../Images/3bd93a8efe3bd3eb80df7625f816ef26.png)

但是当我点击进入详细视图时，我得到了这个：导航栏是重复的，一个在另一个之上，后退按钮只将自己推到底部栏上。

![](../Images/abfe33088ca1f0ec7bbd58cf83a2540a.png)

![在此处输入图像描述](../Images/0dfda88824ea06bf2a492e25a7d9a6d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:00:36.840

在 detailViewController 中，您已通过拖放添加了一个 navigationItem，将其删除。因为它们已经是从根导航控制器存在的导航栏。

从您的图像中我已经指出，只需将其删除即可。

![在此处输入图像描述](../Images/1a4046e361954a4058ae14ba6f827e5d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:06:57.527

在此链接中找到了解决方案：

[Xcode 4 导航项提示属性异常？](https://stackoverflow.com/questions/6419849/xcode-4-navigation-item-prompt-property-misbehaving)

解决这个问题的代码行很简单：

```
 self.navigationItem.prompt = nil 
```

# c# - 更改列表中包含的类成员的值

> ID：12825157
> 
> 赞同：1
> 
> 时间：2012-10-10T17:38:36.030
> 
> 标签：c#

我有这门课`Variables`

```
public class Variables
{

    public enum DataType
    {
        INT, CHAR, BOOL, FLOAT
    }

    public string Name { get; set; }
    public DataType Type { get; set; }
    public object Value { get; set; }

    public Variables(string name, DataType type, object value)
    {
        Name = name;
        Type = type;
        Value = value;
    }

} 
```

还假设`Name`是*唯一的*。在另一个类中，我有一个变量列表，`List<Variables>`

```
public void Main()
{
    List<Variables> varList = new List<Variables>();
    varList.Add(new Variables("x",DataType.BOOL, true));
    varList.Add(new Variables("y",DataType.BOOL, false));
    varList.Add(new Variables("z",DataType.BOOL, true));
    varList.Add(new Variables("a",DataType.INT, 1));
    varList.Add(new Variables("b",DataType.INT, 10));

    // I need this to convert into LiNQ.
    foreach (Variables _x in varList)
    {
        if (_x.Name == "z")
        {
            _x.Value = false;
        }
    }
} 
```

我怎样才能转换`foreach`成`LiNQ`？我试过了`.Where`，`.Select`但他们回来了`IEnumerable`。是否有一种`LinQ`方法只返回与给定条件匹配的单个值？例如，

```
Variables _var = varList.MethodName(LambDa Expression)..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:39:53.823

那么你*可以*使用`Single`：

```
varList.Single(x => x.Name == "z").Value = false; 
```

*但是，如果除了一场*比赛之外还有其他任何事情，那将失败。

替代品是`SingleOrDefault`、`FirstOrDefault`、`First`和。例如，如果您期望“0 或 1”结果：`LastOrDefault``Last`

```
var match = varList.SingleOrDefault(x => x.Name == "z");
if (match != null)
{
    match.Value = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:41:32.860

```
var variablesInstance = varList.Where(v => v.Name == "z").FirstOrDefault();
if(variablesInstance != null)
{
    variablesInstance.Value = false;
} 
```

You can use First instead of FirstOrDefault if you know the thing exists with that name.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:43:10.830

You can use also First

```
varList.First(a => a.Name == "z").Value = false; 
```

# html - 通过 CSS 禁用选择的符合标准的方法

> ID：12825170
> 
> 赞同：3
> 
> 时间：2012-10-10T17:39:09.093
> 
> 标签：html, css, selection

[这个问题](https://stackoverflow.com/q/826782/399317)是关于如何通过用户交互禁用对 DOM 元素的选择。（这对于游戏等富 HTML 应用程序来说非常重要。）

最常见的解决方案是`user-select: none`CSS 规则（加上其特定于浏览器的变体），它现在确实可以解决问题。

然而，有[评论](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting/4358620#comment17348769_4358620)提到这个特性只是一个草案，并没有出现在当前的 CSS 规范中。

这里有什么故事？此功能是否已重命名，或者是否故意过时？我可以指望此功能保持功能还是应该开始以不同的方式实现它或完全避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:59:57.670

这将隐藏所有选择

```
::selection {
    background: transparent;

} 
```

# xcode - Xcode Storyboard：如何在设备屏幕边界之外进行编辑

> ID：12825173
> 
> 赞同：0
> 
> 时间：2012-10-10T17:39:38.313
> 
> 标签：xcode, uiscrollview, storyboard

FWIW 我正在使用 Xcode 4.5.1。

我有一个包含 UI 元素（例如 UIButtons）的视图。View 比设备屏幕宽，所以它会被放置在一个滚动视图下。

问题是我看不到情节提要中的视图，除了物理上位于屏幕边界内的那部分。xcode/storyboard 中有没有办法显示视图的完整宽度和高度（用于编辑、拖放按钮等）？以图形方式编辑这个超大视图非常困难......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:25:01.763

通过stackoverflow进一步挖掘发现以下内容：

[在大型 uiscrollview 中直观地排列子视图](https://stackoverflow.com/questions/9288070/visually-arrange-subviews-in-a-large-uiscrollview)

这仍然不是最佳的，因为似乎每次您想要编辑底层内容视图时都必须重新放大 UIScrollView。但这就是我目前处理的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:01:33.053

你有没有想过在故事板中创建一个你想要在滚动视图之外的任何大小的视图对象？

然后，您可以在加载时通​​过视图控制器将此视图添加为滚动视图的内容视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:00:22.083

我有一个简单的解决方案，（不失一般性，假设你只需要一个长的垂直滚动，大约是屏幕高度的两倍）

首先向滚动视图添加一个高度比滚动视图本身小一点的视图。这个视图将包含所有应该出现在滚动视图下半部分的子视图。称之为“底部”视图。

现在，您想出现在长滚动视图的下半部分的任何子视图，只需将其添加到“底部”视图即可。完成编辑后，您可以向下拖动“底部”视图，从而重新定位所有子视图。当您需要对其进行编辑时，只需将其向上拖动即可。当然不要忘记为 uiscrollview 设置正确的 contentsize。

# architecture - 异步访问器

> ID：12825174
> 
> 赞同：0
> 
> 时间：2012-10-10T17:39:46.610
> 
> 标签：architecture, asynchronous, functional-programming

**问题**：可以使用哪些技术来实现异步返回值的函数？

所需效果的无效代码（在 ActionScript 中...借口 Prettify）：

```
public function get item() : InventoryItem {
    return InventoryItem.find(this.id);
}

public class InventoryItem {
    public static function find(id : int) : InventoryItem {
        var statement:SQLStatement = statementCreator.create('FIND_BY_ID');
        statement.parameters['@id'] = id.toString();
        statement.addEventListener(SQLEvent.RESULT, 
            function (event : SQLEvent) : InventoryItem {
                // find returns from here
                return (event.target as SQLStatement).getResult().data[0] as InventoryItem;
            });
        statement.execute();
    }
} 
```

**背景**：我目前正在使用 Flex，但出现了一个持续存在的问题：需要异步函数甚至回调将值返回给访问器函数或使用来自另一个函数的返回值的任何其他函数。

在 Flex 中，这似乎无法实现。我一直在研究延续、互斥体、并发编程，试图在 ActionScript 中找到与“yield”等效的东西，以查看是否可以使用协程，但绝对无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:40:55.203

您可以切换到延续传递样式并使用`setTimeout`.

# php - 带有 $_GET 函数的 PHP 代码不起作用，没有错误

> ID：12825176
> 
> 赞同：0
> 
> 时间：2012-10-10T17:39:57.630
> 
> 标签：php, get, isset

我写了一个简单的 PHP 代码：

```
<?php
    if (isset($_GET['day']) && isset($_GET['date']) && isset($GET['year'])) {
        $day = $_GET['day'];
        $date = $_GET['date'];
        $year = $_GET['year'];
        if (!empty($day) && !empty($date) && !empty($year)) {
            echo 'It is '.$day.' '.$date.' '.$year;
        } else {
            echo 'Fill in all fields.';
        }
    }
?>

<form action="index.php" method="GET">
    Day:<br><input type="text" name="day"><br>
    Date:<br><input type="text" name="date"><br>
    Year:<br><input type="text" name="year"><br><br>
    <input type="submit" value="Submit">
</form> 
```

对我来说，一切看起来都很好。运行后没有错误。但是，既没有输出。没有任何回声出现。表格在那里，我输入数据，但是当我点击“提交”时，它保持不变。页面的 URL 发生了变化，我可以在那里看到输入的数据，但页面上没有回声。我检查了代码的拼写错误，但没有发现任何错误。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T17:41:58.257

您在此忘记了下划线：

```
 if (isset($_GET['day']) && isset($_GET['date']) && isset($GET['year'])) { 
```

最后得到

```
 if (isset($_GET['day']) && isset($_GET['date']) && isset($_GET['year'])) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T17:42:47.523

它[`$_GET`](http://php.net/manual/en/reserved.variables.get.php)不是`$GET`

您需要添加一个下划线：

```
$GET['year'] 
```

到：

```
$_GET['year'] 
```

# mongodb - MongoDB和HBase的一致性区别？交易？

> ID：12825177
> 
> 赞同：3
> 
> 时间：2012-10-10T17:40:00.157
> 
> 标签：mongodb, hbase, consistency

我多次听到像 HBase 强一致性这样的公司。我读过 HBase 并喜欢它。然后我想到了mongodb write和那时的区别。查了一下MongoDB似乎也有很强的一致性。但它是一致的吗？看起来 HBase 有事务，而 MongoDB 没有。我有点困惑。我发现的只是它们的简单插入和更新，以及它们如何复制的解释。我没有看到交易。

MongoDB 和 HBase 一致性有什么区别？我相信 HBase 有 ACID 事务，mongodb 是否有任何东西可以处理多个插入，或者是否期望所有内容都应该在一个文档中？（我想不出atm不够好的原因）。

出于一致性和复制的原因，有什么区别？为什么有人会选择另一种？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T08:47:47.003

我只能回答 MongoDB。

MongoDB 没有服务器端事务。这并不意味着所有插入都应该是一个文档，因为 3 或 5 层深的文档的多级嵌套可能会变得难以管理。更重要的是，它目前根本不受支持，使用 MongoDB 的社区个人选择投票并支持不同的功能。

话虽这么说 MongoDB 可以进行客户端事务：[http](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/) ://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/但是由于这不是与数据库服务器本身隔离的，因此它仍然对某些失败开放可能影响其创建完整事务的能力的场景。

话虽如此，如果您要编写一个可以跨集群管理事务查询的守护程序，我看不出它比 HBase 提供的持久性差的任何原因。

我不能说 HBase 一致性，因为我个人实际上并没有在生产环境中使用 HBase，但是 MongoDB 确实具有所有正常级别的单个查询的读写一致性，您期望 HBase 和 SQL 允许安全插入级别，实际上可以在您的应用程序获得操作的成功回调之前复制到集群的其他节点。事实上，MongoDB 的默认设置最终并不一致，但是您可以这样做。

我个人在这里和其他地方听说过，两者之间的一致性和复制之间的偏好是主观的，归结为您的场景、硬件、平台和其他细节，我们可能无法在这里完全讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-22T14:41:13.880

从 v4.0（2018 年夏季推出）开始，MongoDB 将支持多文档 ACID 事务。在以下位置注册测试版程序：[https ://www.mongodb.com/transactions](https://www.mongodb.com/transactions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-23T19:28:49.223

我可以回答 hbase 方面的问题。首先，每行只能在 hbase 中进行事务。你有两种原子操作。

1.  检查并放置。

2.  原子计数器

如果您希望能够为多行编写事务。我可以为您推荐 2 个开源：1\. [https://github.com/VCNC/haeinsa](https://github.com/VCNC/haeinsa)。我认为这个开源是我目前发现的最好的。它使用 check & put 并在行上执行某种 2 阶段提交。

2.  [https://github.com/caskdata/tephra](https://github.com/caskdata/tephra)。这个开源结合了客户端服务器和协处理器。在我看来，这可能不是规模，因为服务器是一个瓶颈。

还有2阶段提交。而且我猜对于非常快速的交易，它可能比海印快。

# php - 获取类中声明的所有公共方法，而不是继承

> ID：12825187
> 
> 赞同：16
> 
> 时间：2012-10-10T17:40:49.387
> 
> 标签：php, oop, reflection

我想要得到的是继承树中最低类的所有公共方法的数组，而且只有公共方法。例如：

```
class MyClass {  }

class MyExtendedClass extends MyClass {  }

class SomeOtherClass extends MyClass {  } 
```

从 MyClass 内部，我想从 MyExtendedClass 和 SomeOtherClass 中获取所有 PUBLIC 方法。

我发现我可以使用反射类来做到这一点，但是当我这样做时，我也从 MyClass 中获取方法，我不想得到它们：

```
$class = new ReflectionClass('MyClass');
$methods = $class->getMethods(ReflectionMethod::IS_PUBLIC); 
```

有没有办法做到这一点？或者我在这种情况下唯一的解决方案就是过滤掉反射类的结果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T17:48:14.137

不，我认为您不能一次过滤掉父方法。但是仅按类索引过滤结果会非常简单。

```
$methods = [];
foreach ($reflection->getMethods(ReflectionMethod::IS_PUBLIC) as $method)
    if ($method['class'] == $reflection->getName())
         $methods[] = $method['name']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-07T10:57:39.803

我刚刚编写了一个具有一些额外功能的方法，该方法扩展了 Daniel 的答案。

它只允许您返回静态或对象方法。

它还允许您仅返回已在该类中定义的方法。

提供您自己的命名空间或仅复制该方法。

示例用法：

```
$methods = Reflection::getClassMethods(__CLASS__); 
```

代码：

```
<?php

namespace [Your]\[Namespace];

class Reflection {
    /**
     * Return class methods by scope
     * 
     * @param string $class
     * @param bool $inherit 
     * @static bool|null $static returns static methods | object methods | both
     * @param array $scope ['public', 'protected', 'private']
     * @return array
     */
    public static function getClassMethods($class, $inherit = false, $static = null, $scope = ['public', 'protected', 'private'])
    {
        $return = [
            'public' => [],
            'protected' => [],
            'private' => []
        ];
        $reflection = new \ReflectionClass($class);
        foreach ($scope as $key) {
            $pass = false;
            switch ($key) {
                case 'public': $pass = \ReflectionMethod::IS_PUBLIC;
                    break;
                case 'protected': $pass = \ReflectionMethod::IS_PROTECTED;
                    break;
                case 'private': $pass = \ReflectionMethod::IS_PRIVATE;
                    break;
            }
            if ($pass) {
                $methods = $reflection->getMethods($pass);
                foreach ($methods as $method) {
                    $isStatic = $method->isStatic();
                    if (!is_null($static) && $static && !$isStatic) {
                        continue;
                    } elseif (!is_null($static) && !$static && $isStatic) {
                        continue;
                    }
                    if (!$inherit && $method->class === $reflection->getName()) {
                        $return[$key][] = $method->name;
                    } elseif ($inherit) {
                        $return[$key][] = $method->name;
                    }
                }
            }
        }
        return $return;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T13:31:46.780

我需要做同样的事情并想出了以下功能：

```
function getMethods($class, $visibility = "")
{

    $reflect = new ReflectionClass($class);
    $methods = [];
    // Iterate the methods
    foreach ($reflect->getMethods() as $value){

        /*
         * $value->getFileName() returns actual file name a method was set in.
         * if it does not match the current filename it is a inherited method assuming a file contains only one class
         */
        if ($value->getFileName() == $reflect->getFileName()) {
            if ($value->isPublic() === true) {
                $methods['public'][] = $value->name;
            }
            elseif ($value->isPrivate() === true) {
                $methods['private'][] = $value->name;
            }
            elseif ($value->isProtected() === true) {
                $methods['protected'][] = $value->name;
            }
        }
    }
    switch ($visibility) {
        case "private":
        case "public":
        case "protected":
            return $methods[$visibility];
            break;
        default:
            return $methods;
            break;
    }
} 
```

在 Father.php 和 Child.php 中使用以下测试代码

```
class Father{
    public function parentTest() { }
}
class Child extends Father {
    public function __construct() { }
    private function test() { }
    protected function test2() { }
} 
```

它返回以下内容：

```
 array (size=3)
  'public' => 
    array (size=1)
      0 => string '__construct' (length=11)
  'private' => 
    array (size=1)
      0 => string 'test' (length=4)
  'protected' => 
    array (size=1)
      0 => string 'test2' (length=5) 
```

# nunit - 从詹金斯执行 Nunit

> ID：12825188
> 
> 赞同：2
> 
> 时间：2012-10-10T17:40:49.240
> 
> 标签：nunit, jenkins

我从 jenkins 执行了大约 600 个测试用例..但是在某个时间点它会抛出一个错误

`Unhandled exception Win32Exception,Error creating window handle.,System.Windows.Forms, at System.Windows.Forms.NativeWindow.CreateHandle(CreateParams cp)`

当我查找该进程的句柄计数时，它只有 700 ..但我觉得进程的句柄配额是 10000 ..比为什么它的行为方式很奇怪..请帮助它非常紧急..

注意：我使用 NUnit 控制台运行测试用例。詹金斯机器上的所有安装都是正确的。

最好的部分是当我从控制台运行测试用例时不会出现本地问题..它只在从詹金斯运行时发生..这是一些奇怪的詹金斯行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T20:41:47.147

这可能是因为 NUnit 试图在服务器上的屏幕上绘制它无权执行的某些内容。如果您的配置使 Jenkins 在本地系统帐户下运行，则可能会发生这种情况。

验证您的 Jenkins 服务是否配置为启用了“允许服务与桌面交互”权限。这可以通过查看服务的属性并选择登录选项卡来完成。如果设置了“本地系统帐户”复选框，请确认您还选中了“允许服务与桌面交互”复选框。

配置的最佳实践是创建一个命名用户来运行 Jenkins 服务，并将服务配置为以该用户身份运行。

# html - 如何修复表格中的每一列？

> ID：12825193
> 
> 赞同：0
> 
> 时间：2012-10-10T17:41:05.767
> 
> 标签：html, css, wordpress, html-table

我试图在下面的图片中阅读 Wordpress 中的源代码。

我不知道他们如何修复每一列 HTML/CSS，不知道他们使用什么。

当您转到其他页面时，列仍然在同一位置。

但是当我通过转到其他页面来尝试 CodeIgniter 中的分页/表格库时，表格是灵活的并且依赖于单元格中的信息。

图片在这里：

[![](../Images/9382d4b519e43e22c220ea4e3cacc8c4.png)](https://i.stack.imgur.com/CRdvu.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:45:37.553

该`width`属性在 CSS 中指定：

```
.fixed .column-response, 
.fixed .column-author, 
.fixed .column-categories, 
.fixed .column-tags, 
.fixed .column-rel, 
.fixed .column-role {
    width: 15%;
} 
```

同样，`table`元素是固定宽度：

```
table.fixed {
    table-layout: fixed;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:45:38.363

使用[`table-layout`](https://developer.mozilla.org/en-US/docs/CSS/table-layout)CSS 属性，例如：

```
#mytable
{
    table-layout: fixed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:53:06.070

您可以使用带宽度的 div

```
<table>
    <tr>
        <td><div style="width: 200px;">
        test...
        </div></td>
        <td><div style="width: 600px;">
        test...
        </div></td>
    </tr>
</table> 
```

# c# - EF LINQ 多对一过滤器/位置

> ID：12825195
> 
> 赞同：1
> 
> 时间：2012-10-10T17:41:19.003
> 
> 标签：c#, .net, linq, entity-framework, linq-to-entities

`GetProducts()`在下面调用该方法时出现异常。我实际上是在尝试按指定国家/地区的可用产品来过滤我的产品列表。产品和国家之间存在一对多的关系设置。

```
 public static List<Product> GetProducts(Country country)
    {
        Context db = new Context();
        return db.Products.Where(m => m.Countries.Contains(country)).ToList<Product>();
    } 
```

> 无法创建“DataModels.Country”类型的常量值。此上下文仅支持原始类型或枚举类型。

如果我没有以正确的方式进行此操作，那么按单个选定国家/地区过滤产品的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:44:59.720

您只能根据原始类型进行比较。

我会改变它以使用该`Any`方法。替换`ID`为 Country 实体键（或唯一属性）

```
db.Products.Where(m => m.Countries.Any(c => c.ID == country.ID)).ToList<Product>(); 
```

# oracle - Top n percent top n%

> ID：12825196
> 
> 赞同：2
> 
> 时间：2012-10-10T17:41:21.190
> 
> 标签：oracle, sqlplus

I do have the following code.

```
 SQL> select * from student_gpa;

    SSN                    GPA
    --------------- ----------
   22222                    3
   11111                    4
   55555                    3
   33333                    4
   44444                    3 
```

I do have this function to get the top two gpa score rows.

SQL> select * from (select ssn, gpa from student_gpa order by gpa desc) where rownum <= 2;

```
 SSN                    GPA
    --------------- ----------
    11111                    4
    33333                    4 
```

My question is what function do I use to get the top n% of the GPA score. For example, Since I have two individuals with a GPA of 4, dense rank would return 11111 occupying row 1 and 22222 occupying row 2\. I was actually looking for a function say that calculates 5% of the GPA score and the returned value would be both 11111 and 22222\. The 5% function SHOULD NOT return 11111 only. Even if I had more entries that had gpa of 4, the 5% function would still return all rows that had gpa of 4.Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-17T15:10:17.123

你可以试试这个：

```
WITH     got_analytics     AS
(
     SELECT     ssn, gpa
     ,     ROW_NUMBER () OVER (ORDER BY  gpa  DESC)     AS r_num
     ,     COUNT (*)     OVER ()                                AS n_rows 
     FROM  student_gpa   
)
SELECT       ssn, gpa
FROM       got_analytics 
WHERE       r_num     <= ROUND (n_rows * 12/*insert here your n%*/ / 100)
ORDER BY  gpa     DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T15:41:38.507

前 30% 有 2 个选择：

```
select ssn,gpa from(
select ssn, gpa,rank() over (order by gpa asc) as rn, count(*) over() as cnt
from student_gpa
)
where rn < 0.3*cnt ; 
```

具有 4 个选择和 rownum 的解决方案（非常难看）：

```
select ssn,gpa from(
select ssn, gpa
from student_gpa
)
where rownum < 0.3*(select count(*) from (select ssn, gpa from student_gpa)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T17:59:19.720

```
 create table student_gpa(ssn number,gpa number);

 insert into student_gpa values(1111,4);
 insert into student_gpa values(2222,4);
 insert into student_gpa values(3333,3);
 insert into student_gpa values(4444,2);

 select ssn,gpa from(
   select ssn, gpa,dense_rank() over (order by gpa desc) rn from student_gpa
     )
   where rn =1;

    ssn   gpa
   --------------
   1111   4
   2222   4 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-20T09:19:11.177

在 Oracle 中，像这样的 Top-N 查询通常使用分析函数完成，例如 NTILE，因此在您的情况下：

```
WITH     got_tenth_gpa     AS
(
     SELECT     ssn, gpa
     ,     NTILE (10) OVER (ORDER BY gpa DESC)     AS tenth_gpa
     FROM     student_gpa
)
SELECT       ssn, gpa
FROM       got_tenth_gpa
WHERE       tenth_gpa     = 10
ORDER BY  gpa     DESC; 
```

# c# - 使用 ViewModel 进行验证

> ID：12825200
> 
> 赞同：1
> 
> 时间：2012-10-10T17:41:27.483
> 
> 标签：c#, asp.net-mvc, entity-framework, ado.net

我有一个带有 ado.net 实体框架的 asp.net mvc3 进行一些验证。

我已经创建了一个视图模型

```
public class id
{

    [Required]
    public decimal l_ID
    {
        get;
        set;
    }

    [Required]
    public decimal v_ID
    {
        get;
        set;
    }
} 
```

是否可以添加一些验证规则以使 l_id 必须大于 v_id？一旦用户提交了页面，就应该进行验证。这将如何完成？有教程吗？这个验证需要在控制器中完成还是使用部分类？有没有例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:16:26.670

我一直在使用 IValidatable 接口，与自定义属性验证相比，它相当简单。这是代码：

```
public class id : IValidatableObject
    {
        [Required]
        public decimal l_ID { get; set; }

        [Required]
        public decimal v_ID { get; set; }

        private bool _hasBeenValidated = false;

        public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
        {

            if (!_hasBeenValidated)
            {
                // validation rules go here. 
                if (l_ID <= v_ID)
                    yield return new ValidationResult("Bad thing!", new string[] { "l_ID" });
            }

            _hasBeenValidated = true;
        }
    } 
```

需要注意的是，当从将 ViewModel 作为参数的 POST 操作发生绑定时，将自动调用 Validate 方法，因此您不必对事件进行任何连接。事情就在那里，`bool _hasBeenValidated`因为现在 MVC3（恕我直言）中有一个准错误，在某些情况下会调用该验证方法两次（*比如当这个 ViewModel 也被用作另一个 ViewModel 的成员并且被发布时*）

ValidationResult 构造函数的第二个参数是验证绑定到的属性的名称，因此在这种情况下，您的视图中 l_ID 的 ValidatorFor 标记将在其中收到“坏事”消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:56:06.837

ViewModel 存在于 MVVM 模式中，对于您和 MV​​C，您使用 Controller、Model 和 View

是的，您可以在模型中添加 DataAnnotation。

链接：[http ://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-%28data%29/validation-with-the-data-annotation-validators-cs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:09:02.743

您需要创建一个自定义验证属性 - 网络上有很多帮助。以下是对类似依赖属性的改编。

```
public class GreaterThanOtherAttribute : ValidationAttribute, IClientValidatable
{
    public string DependentProperty { get; set; }

    public GreaterThanOtherAttribute (string dependentProperty)
    {
        this.DependentProperty = dependentProperty;
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        // get a reference to the property this validation depends upon
        var containerType = validationContext.ObjectInstance.GetType();
        var field = containerType.GetProperty(this.DependentProperty);

        if (field != null)
        {
            // get the value of the dependent property
            var dependentvalue = field.GetValue(validationContext.ObjectInstance, null);

            // compare the value against the target value
            if ((dependentvalue == null && this.TargetValue == null) ||
                (dependentvalue != null && dependentvalue < this.TargetValue)))
            {
                // match => means we should try validating this field
                return new ValidationResult(this.ErrorMessage, new[] { validationContext.MemberName });
            }
        }

        return ValidationResult.Success;
    } 
```

然后装饰你的模型：

```
public class id           
{      
    [Required]           
    public decimal l_ID           
    {           
        get;           
        set;           
    }           

    [Required]   
    [GreaterThanOtherAttribute("l_ID")]        
    public decimal v_ID           
    {           
        get;           
        set;           
    }           
} 
```

您现在需要做的是找到一个示例自定义属性并对其进行调整以使用上述内容。

健康警告 - 未经任何测试，可能包含错误。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:05:22.067

我建议您使用[Fluent Validation](http://fluentvalidation.codeplex.com/)组件。它可以[与 Asp.Net MVC 集成，](http://fluentvalidation.codeplex.com/wikipage?title=mvc&referringTitle=Documentation)您可以使用流利的 sintaxe 轻松添加一些验证规则。DataAnnotations 也可以正常工作，但我不喜欢，因为它会污染您的域模型或视图模型。我喜欢创建一个单独的职责结构。

# ruby-on-rails - Configuring a Ruby Project to use gems outside of a Gemfile

> ID：12825203
> 
> 赞同：0
> 
> 时间：2012-10-10T17:41:44.543
> 
> 标签：ruby-on-rails, ruby, rubygems, bundler

From my understanding (And from what I've seen by using this) if a project has a Gemfile, it only has access to gems that are in the Gemfile (Or more specifically, the Gemfile.lock file).

I want to be able to use some gems that are installed on the system, but not particularly in the Gemfile.lock file - How would I go about this?

For my reasoning: We have a developer VM setup that ensures everything is up to date; however without running `bundle update` within the project, a tool that we use (That relies on a Gem) cannot be updated (Or even used, if it isn't in the Gemfile).

I can keep the gem updated, but cannot force the project to use the version without updating the Gemfile.lock information - So I would prefer to just let the project use all or specific system gems, and just have the Gemfile as a "quick way to get your system up to date with the project".

Another note: The application uses rake tasks to operate (Tool has a gem, the gem looks for a specific rake file for custom configuration).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:39:44.903

您的系统 gem 安装在哪里？

确保将`GEM_PATH`env var 设置为该位置。

用于`gem env gempath`检查您的设置是否正确。

如果没有，请将其设置为`~/.bashrc`或`~/.bash_profile`

```
export GEM_PATH='/path/to/system/gems' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:51:15.853

您只需要需要该库（阅读 gem）。

您可以在使用 gem 功能的特定文件中要求它，或者您可以在`config/application.rb`（在 Rails 3 中）要求它以使其可用于整个应用程序。

为了安全起见，请确保 gem 可用：

```
if Gem::Specification::find_by_name('my_gem')
  require 'my_gem'
end 
```

# gridview - 修改 GridView 模板时查看完整的 Grid 项

> ID：12825209
> 
> 赞同：0
> 
> 时间：2012-10-10T17:42:16.517
> 
> 标签：gridview, windows-8, microsoft-metro, datatemplate

我有这个 xaml 代码：

```
 <local:MyGridView x:Name="topDeal" ItemsSource="{Binding}" Margin="60,0,0,0" Grid.Row="1">
                    <GridView.ItemTemplate> 
                        <DataTemplate>
                            <Grid Margin="0">
                                <Grid.Background>
                                    <ImageBrush ImageSource="{Binding image1}"/>
                                </Grid.Background>

                                <StackPanel VerticalAlignment="Bottom" Background="#0072B0" Opacity="0.6">
                                    <Border BorderBrush="LightGray" BorderThickness="0,0,0,1"/>
                                    <TextBlock Text="{Binding name}" Foreground="white"/>
                                </StackPanel>
                            </Grid>
                        </DataTemplate>
                    </GridView.ItemTemplate>
                    <GridView.ItemsPanel>
                        <ItemsPanelTemplate>
                            <VariableSizedWrapGrid ItemHeight="180" ItemWidth="180" Orientation="Horizontal" MaximumRowsOrColumns="4"/>
                        </ItemsPanelTemplate>
                    </GridView.ItemsPanel>
                </local:MyGridView> 
```

和后面的c#代码：

```
public class MyGridView : GridView
{

    protected override void PrepareContainerForItemOverride(DependencyObject element, object item)
    {
        var gi = element as GridViewItem;
        //First griditem of MyGridView will be modified
        if (this.Items.IndexOf(item) == 0)
        {
            gi.SetValue(VariableSizedWrapGrid.ColumnSpanProperty, 2);
            gi.SetValue(VariableSizedWrapGrid.RowSpanProperty, 2);
        }
        base.PrepareContainerForItemOverride(gi, item);
    }
} 
```

我想让第一个项目以其他项目的两倍大小显示，其中包含背景图像。此 [链接](https://i.stack.imgur.com/TxZlS.jpg)中的结果。背景图像仅填充了 TextBlock。

![在此处输入图像描述](../Images/7bc61683c56ca7daab40fed30497a27a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T07:26:15.927

在您的数据模板中，您可以尝试这种方式，如果我没记错的话，它应该对您有用：

```
`<Border Background="{StaticResource ListViewItemPlaceholderBackgroundThemeBrush}" Margin="0,0,0,80"><Image Source="{Binding Image}" AutomationProperties.Name="{Binding Title}" Stretch="UniformToFill" Height="Auto" Width="Auto"/></Border>` 
```

# visual-studio-2010 - Visual Studio 2010 C++ Project: Build Release EXE File generates EXE, LIB and EXP File. Why?

> ID：12825212
> 
> 赞同：2
> 
> 时间：2012-10-10T17:42:32.193
> 
> 标签：visual-studio-2010, release, exe, exp

I'm building a C++ project in Release-Mode and the target type is an EXE-File. The project also generates a .lib and a .exp-file. What is wrong? I only want to build an exe-file.

Any ideas?

Thank you very much!!!

# python - Pygtk - Liststore, Remove the last row

> ID：12825213
> 
> 赞同：0
> 
> 时间：2012-10-10T17:42:32.703
> 
> 标签：python, pygtk

how could I remove the last row of a liststore?

I have this code running before deleting the last row:

```
 iter = self.model_add.insert(0, ["Hi", "Hello", "Python", "World!"])
  iter = self.model_add.insert(1, ["Hi2", "Hello2", "Python2", "World!2"]) 
```

I'd like to remove the second one row, how can I do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:14:13.780

你可以尝试使用

```
self.model_add.remove(self.model_add[-1].iter) 
```

您需要 a`gtk.TreeIter`删除一行。对模型进行索引（例如，使用`-1`以获取最后一行）为您提供 a `gtk.TreeModelRow`，其`iter`属性是`gtk.TreeIter`指向该行的 a 。

# c# - 错误 CS1002: ; 预期 & (31,13): 错误 CS1525: 无效的表达式术语 'else'

> ID：12825218
> 
> 赞同：2
> 
> 时间：2012-10-10T17:42:47.873
> 
> 标签：c#

我的布局有问题，我知道我很接近。/// 我有两个错误是（`31,18): error CS1002: ; expected & (31,13): error CS1525: Invalid expression term 'else'`/// 我试图按照所说的去做，但它犯了更多的错误，所以我现在完全不知道如何使它工作。

目前我有这个

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CE0721a
{
    class Tut4_7
    {
        public void run()
          {
            double under16_Free = 2.5;
            double oap = 3.0;
            double other = 5.0;
            int groupSize = 0;
            double totalCost = 0;
            int age = 0;

        while (age!=-1)
        {
            Console.WriteLine("Enter an Age or -1 to quit");
            age=int.Parse(Console.ReadLine());

            if(age<16)&(age>-1);
            {
                groupSize++;
                totalCost = totalCost + under16_Free;
            }
            else if(age>16)
            {
                groupSize++;
                totalCost = totalCost + oap;
            }
            else if(age>16)&(age<=65);
            {
                groupSize++;
                totalCost = totalCost + other;
            }
        }
        if (groupSize>6)
        {
            totalCost = totalCost - (totalCost/5);
        }
        Console.WriteLine("Total Cost = "(totalCost));
        }
    }
} 
```

我正在尝试这样做

**为当地游泳池编写一个程序，根据他们的年龄显示一组人的入场费用。程序应继续提示用户输入年龄，直到输入–1，然后显示该组的总人数和该组的总费用。入场费如下： - 16 岁以下 2.50 英镑 65 岁以上 - 3 英镑和所有其他游泳者 - 5 英镑

超过 6 人的团体应享受 20% 的折扣。**

这连接到另一个名为 Program.cs 的 cs，像这样布局并且可以工作，因为我已经用其他 cs 文件进行了测试，这显示了程序

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CE0721a
{
    class Program
    {
        static void Main(string[] args)
        {
            Tut4_7 myProgram = new Tut4_7();
            myProgram.run();
        }
    }
} 
```

再次感谢，如果有人可以提供帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:46:17.327

几个语法问题：

*   if 语句的开头行不应以分号结尾
*   您需要在复合比较周围使用另一组括号
*   你几乎总是想使用`&&`而不是`&`因为前者会短路

所以

```
if(age<16)&(age>-1); 
```

应该成为

```
if ((age<16) && (age>-1)) 
```

或者，正如评论中提到的@Servy

```
if (age<16 && age>-1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:45:51.607

您在一些 if/else 语句的末尾有分号，并且您使用了错误的逻辑运算符：

```
if(age<16)&(age>-1); 
```

应该

```
if(age < 16 && age >= 1)
{
    //Code here
} 
```

和

```
else if(age>16)&(age<=65); 
```

应该

```
else if(age > 16 && age <= 65)
{
    //Code here
} 
```

您想使用`&&`运算符而不是`&`运算符，@Servy 在评论中很好地解释了原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:47:51.873

```
if(age<16)&(age>-1); 
```

三个问题：

*   首先，您不应该添加 ; 在 if 语句之后，这不会导致任何内容（空语句）被执行。

*   第二个问题是括号。您正在关闭 if 条件下的断点。您不能关闭它们并重新打开它们，但您可以使用括号来分隔外部括号中的部分。

*   最后一个问题是 AND 运算符。您使用二进制 AND & 而不是逻辑 AND &&。

该行应如下所示：

```
if(age<16 && age>-1) 
```

同样的事情也适用于另一条线。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T17:51:45.243

试试这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace CE0721a
{
    class Tut4_7
    {
        public void run() 
          { 
            double under16_Free = 2.5; 
            double oap = 3.0; 
            double other = 5.0; 
            int groupSize = 0; 
            double totalCost = 0; 
            int age = 0; 

        while (age!=-1) 
        { 
            Console.WriteLine("Enter an Age or -1 to quit"); 
            age=int.Parse(Console.ReadLine()); 

            if((age<16)&&(age>-1))
            { 
                groupSize++; 
                totalCost = totalCost + under16_Free; 
            } 
            else if(age>16) 
            { 
                groupSize++; 
                totalCost = totalCost + oap; 
            } 
            else if((age>16)&&(age<=65))
            { 
                groupSize++; 
                totalCost = totalCost + other; 
            } 
        } 
        if (groupSize>6) 
        { 
            totalCost = totalCost - (totalCost/5); 
        } 
        Console.WriteLine("Total Cost = " + totalCost); 
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:45:42.667

对于初学者来说：

```
 if(age<16)&(age>-1); 
```

应该是`&&`。你想要一个逻辑而不是按位与。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T17:46:32.557

你可以试试

```
if ( (age<16) & (age>-1)) 
```

句法

```
if(condition)
{
  //Treatment
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-10T17:48:50.603

您的 if 语句格式不正确，您使用的是二进制 & 而不是逻辑 && 并且两个条件只需要在一个 () 中，最重要的是您不需要在 if 语句后加分号，这表示结束

```
namespace CE0721a
{
    class Tut4_7
    {
        public void run()
          {
            double under16_Free = 2.5;
            double oap = 3.0;
            double other = 5.0;
            int groupSize = 0;
            double totalCost = 0;
            int age = 0;

        while (age!=-1)
        {
            Console.WriteLine("Enter an Age or -1 to quit");
            age=int.Parse(Console.ReadLine());

            if(age<16 && age>-1)
            {
                groupSize++;
                totalCost = totalCost + under16_Free;
            }
            else if(age>16)
            {
                groupSize++;
                totalCost = totalCost + oap;
            }
            else if(age>16 && age<=65)
            {
                groupSize++;
                totalCost = totalCost + other;
            }
        }
        if (groupSize>6)
        {
            totalCost = totalCost - (totalCost/5);
        }
        Console.WriteLine("Total Cost = "(totalCost));
        }
    }
} 
```

# asp.net - Alternative to ValidateRequest="false"

> ID：12825222
> 
> 赞同：1
> 
> 时间：2012-10-10T17:43:03.823
> 
> 标签：asp.net, http-post, validate-request

Is there a way to prevent the error "A potentially dangerous Request.Form value was detected from the client" other than setting `ValidateRequest="false"`?

**Update:** I removed the "on the page" part. I'd like to not use `ValidateRequest="false"` at all, on the page or in web.config.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:47:32.120

查看新的[ASP.NET 4.5 请求验证功能](https://msdn.microsoft.com/en-us/library/hh882339(v=vs.110).aspx)。

如果你设置

```
<httpRuntime requestValidationMode="4.5" ... /> 
```

在您的 web.config 中，值只会在您访问它们时得到验证。这称为*延迟验证*。

您也可以通过以下方式获得未经验证的值

```
var s = context.Request.Unvalidated.Form["forum_post"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:49:02.443

是的，您可以在 web.config 中全局执行此操作。

如果您正在运行 .net 4.0，您可以将其添加到您的 web.config

```
<httpRuntime requestValidationMode="2.0"/> 
```

或者你可以添加这个

```
<pages validateRequest="false" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:45:12.480

1 您还可以在输入中添加 javascript 验证

2 您可以添加自定义验证器

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-10T17:48:39.237

您可以通过编辑 web.config 文件为整个应用程序禁用它

```
<configuration>
   <system.web>
      <pages validateRequest="false" />
   </system.web>
</configuration> 
```

知道您是否只想抑制错误，或者您是否想阻止它从一开始就被提出，这将有所帮助。如果您想阻止它，请在提交表单之前清理您的输入（使用 javascript 或验证器）。

# data-binding - 如何使用 Spring MVC DataBinding 实例化子类

> ID：12825228
> 
> 赞同：2
> 
> 时间：2012-10-10T17:43:17.977
> 
> 标签：data-binding, spring-mvc

考虑以下三个类，C是B的子类。B是A的字段。如何将包含C类实例的A类实例作为其字段，从JSP页面传递给Spring Controller方法？

```
class A{
     private B b;
     public B getB(){return b;}
     public void setB( B b){ this.b = b;}
}

class B{
     private int id;     
     public int getId(){return id;}
     public void setId(int id){this.id = id;}
}
class C extends B{
     private name;
     public String getName(){return name;}
     public void setName(String name){this.name = name;}
} 
```

示例 Spring 控制器：

```
@Controller
public class Handler{
     @RequestMapping("/work")
     public String work(@RequestParam( "objA" ) A objA ){
         if( C.getClass().isInstance( objA.getB() ) ){
               System.out.println("It works.");
          }
     }
} 
```

假定的 JSP 页面但不起作用：

```
<form method="post" action="work" commandName="objA" >

        <input type="submit" value="submit" /><br/>

        <input type="hidden" name="b.name" value="name" /><br/>
        <input type="hidden" name="b.id" value="1" /><br/>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T03:32:45.027

我认为我们可以使用 Jackson 来绑定数据。那么我们可以把它当成[Jackson 多态类型处理问题](http://www.cowtowncoder.com/blog/archives/2010/03/entry_372.html) 这里有一个关于如何在 Spring mvc 上下文中使用 Jackson 和 ajax的[链接。](http://blog.springsource.org/2010/01/25/ajax-simplifications-in-spring-3-0/)

# java - Gson，只专注于内在对象

> ID：12825229
> 
> 赞同：0
> 
> 时间：2012-10-10T17:43:19.700
> 
> 标签：java, gson

好的，我有一个 json 进来，看起来像这样：

```
{count:xxx, important:[{...}]} 
```

我只关心重要的对象。有什么我可以用自定义反序列化器或任何我可以让 GSON 反序列化那个重要的 json 对象的东西吗？

我希望反序列化对象的外观也是这样的：

```
List<Important> = Gson.fromJson(arg0, new TypeToken<ArrayList<Important>>(){}.getType() ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:49:45.183

是的，您可以使用[`JsonParser`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonParser.html)Gson 库中的类将其作为 JsonObject 读取。然后，拉出你需要的内部对象并使用 Gson 来填充你的 java 类。

例子：

```
Reader jsonReader =
                new BufferedReader(
                new InputStreamReader(getIStream("myFile.json")));
JsonParser parser = new JsonParser();
JsonObject top = parser.parse(jsonReader).getAsJsonObject();

JsonElement importantEl = top.get("important");

//Parse the important element into whatever structure you're creating
Gson gson = new Gson();
List<Important> important 
    = Gson.fromJson(importantEl, new TypeToken<ArrayList<Important>>(){}.getType() ); 
```

# ios - ios segue 消除部分卷曲 - 触摸卷曲以消除时叫什么？

> ID：12825230
> 
> 赞同：2
> 
> 时间：2012-10-10T17:43:24.377
> 
> 标签：ios, storyboard, dismiss, uistoryboardsegue

我在 iOS 6 中使用故事板，并使用带有部分卷曲的模态 segue。一切正常，通过模式视图中的按钮，我可以与委托进行通信并通过代码关闭模式视图。

您也可以通过触摸页面卷曲来关闭视图。但在这种情况下，我不知道如何连接到代表。当用户触摸页面卷曲以关闭时，代理如何知道它已从模态视图返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T20:03:36.797

自己找到了解决方案：

当您关闭模态视图控制器时，会在该控制器中调用两个函数（viewWillDisappear 和 viewDidDisappear）。您可以使用这些来调用呈现视图的委托函数，让呈现视图知道并采取任何行动。

例如，在 modalViewController.m 中：

```
- (void)viewWillDisappear:(BOOL)animated {
    [self.delegate settingsViewControllerWillDisappear:self];
}

- (void)viewDidDisappear:(BOOL)animated {
    [self.delegate settingsViewControllerDidDisappear:self];
} 
```

# python - python用“重复键更新”执行很多？

> ID：12825232
> 
> 赞同：6
> 
> 时间：2012-10-10T17:43:37.820
> 
> 标签：python, mysql-python

我正在尝试使用以下脚本在 python 中执行重复密钥更新：

```
# data from a previous query (returns 4 integers in each row)
rows = first_cursor.fetchall()

query="""
INSERT INTO data (a, b, c)
VALUES (%s,%s,%s) ON DUPLICATE KEY UPDATE a=%s
"""
second_cursor.executemany(query,rows) 
```

我收到此错误：

```
File "/usr/lib/pymodules/python2.6/MySQLdb/cursors.py", line 212, in executemany
  self.errorhandler(self, TypeError, msg)
File "/usr/lib/pymodules/python2.6/MySQLdb/connections.py", line 35, in defaulterrorhandler
  raise errorclass, errorvalue
TypeError: not all arguments converted during string formatting 
```

如果不创建我自己的循环，这甚至可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-10T18:02:22.770

这是 MySQLdb 中的一个错误，因为 MySQLdb 使用正则表达式来解析`INSERT`语句：

在**/usr/lib/pymodules/python2.7/MySQLdb/cursors.py**：

```
restr = (r"\svalues\s*"
        r"(\(((?<!\\)'[^\)]*?\)[^\)]*(?<!\\)?'"
        r"|[^\(\)]|"
        r"(?:\([^\)]*\))"
        r")+\))")

insert_values= re.compile(restr) 
```

尽管有很多关于这个问题的[错误报告](http://sourceforge.net/p/mysql-python/bugs/209/)已经被关闭，但我能够在 MySQLdb 版本 1.2.3 中重现该错误。（注意目前 MySQLdb 的[最新版本](http://sourceforge.net/projects/mysql-python/)是 1.2.4b4。）

也许这个错误是可以修复的，我真的不知道。但我认为这只是冰山一角——它表明更多的麻烦潜伏在更深的地方。例如，您可以有一个`INSERT ... SELECT`带有嵌套`SELECT`语句的语句，其中`WHERE`散布着条件和参数……在我看来，使正则表达式越来越复杂以处理这些情况似乎是一场失败的战斗。

你可以使用[oursql](http://packages.python.org/oursql/)；它不使用正则表达式或字符串格式。它分别将参数化查询和参数传递给服务器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-05-25T09:24:50.923

当您编写如下 sql 时：

```
sql = insert into A (id, last_date, count) values(%s, %s, %s) on duplicate key update last_date=%s, count=count+%s' 
```

您将收到以下错误：`TypeError: not all arguments converted during string formatting.`

所以`"ON DUPLICATE KEY UPDATE"`在python中使用的时候，需要这样写sql：

```
sql = 'insert into A (id, last_date, count) values(%s, %s, %s) on duplicate key update last_date=values(last_date),count=count+values(count)' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-13T05:26:55.263

成立：

```
on duplicate key update col1=VALUES(col1), col2=VALUES(col2) 
```

[https://hardforum.com/threads/python-mysql-not-all-arguments-converted-during-string-formatting.1367039/](https://hardforum.com/threads/python-mysql-not-all-arguments-converted-during-string-formatting.1367039/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-05T03:19:52.883

正如ubuntu所说，这是mysqldb的一个错误，只需更改sql即可：

```
insert into tb_name(col1, col2) select 1,2 on duplicate key update col1=1 
```

# .net - 异步加载大的 BitmapImage

> ID：12825233
> 
> 赞同：2
> 
> 时间：2012-10-10T17:43:39.073
> 
> 标签：.net, wpf, async-await

我正在尝试将一个非常大的图像（大约 16000x7000 像素）加载到材质中，并且我尝试异步加载它。我的第一次尝试是创建一个加载 BitmapImage 的任务，然后将其用于材质：

```
var bmp = await System.Threading.Tasks.Task.Run(() =>
{
    BitmapImage img = new BitmapImage(new Uri(path));
    ImageBrush brush = new ImageBrush(img);
    var material = new System.Windows.Media.Media3D.DiffuseMaterial(brush);
    material.Freeze();
    return material;
});
BackMaterial = bmp; 
```

但是我发现，在显示材料之前，它没有加载图像并扩展到内存中（如果我直接使用 ImageBrush 也是一样的）。

我试图避免这种情况，因为它会冻结我的 UI，但我还没有找到强制位图加载和解码的正确方法。如果我添加一个 WriteableBitmap，图片的加载是在任务内部执行的，但是我将使用的内存量加倍：

```
var bmp = await System.Threading.Tasks.Task.Run(() =>
{
    BitmapImage img = new BitmapImage(new Uri(path));
    WriteableBitmap wbmp = new WriteableBitmap(img);
    ImageBrush brush = new ImageBrush(wbmp);
    var material = new System.Windows.Media.Media3D.DiffuseMaterial(brush);
    material.Freeze();
    return material;
});
BackMaterial = bmp; 
```

有什么方法可以强制加载而不将其加倍到内存中。我也尝试用解码器加载它，但我也两次加载到内存中：

```
var decoder = BitmapDecoder.Create(new Uri(path), BitmapCreateOptions.PreservePixelFormat,
     BitmapCacheOption.None);
var frame = decoder.Frames[0];
int stride = frame.PixelWidth * frame.Format.BitsPerPixel / 8;
byte[] lines = new byte[frame.PixelHeight * stride];
frame.CopyPixels(lines, stride, 0);
var img = BitmapImage.Create(
    frame.PixelWidth, frame.PixelHeight, frame.DpiX, frame.DpiY, frame.Format,
    frame.Palette, lines, stride);
frame = null;
lines = null; 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T19:10:27.477

我不确定这种异步方案，但您通常会设置[BitmapCacheOption.OnLoad](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapcacheoption.aspx)以强制立即缓存到内存：

```
var bmp = await System.Threading.Tasks.Task.Run(() => 
{ 
    BitmapImage img = new BitmapImage(); 
    img.BeginInit(); 
    img.CacheOption = BitmapCacheOption.OnLoad; 
    img.UriSource = new Uri(path); 
    img.EndInit(); 
    ImageBrush brush = new ImageBrush(img); 
    ...
} 
```

# java - RESTful 服务器上的 ISO 到 UTF-8

> ID：12825235
> 
> 赞同：0
> 
> 时间：2012-10-10T17:43:48.753
> 
> 标签：java, rest, utf-8, jersey, iso

我有一个 RESTful 服务，它需要请求中的字符串。从浏览器传递字符串时，重音字符会出现乱码 (�)，因为默认浏览器编码是 ISO-8859-1。如果我将浏览器编码更改为 UTF-8，重音字符会保留在请求字符串中。

有没有办法更改字符串编码并在服务器端以 UTF-8 重新构造字符串，这样我就不需要每次都更改浏览器编码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:23:14.180

我发现大多数浏览器的默认编码取决于它们所安装的系统。我的大多数（尤其是在 Windows 上）默认为 ISO-8859-1 或 CP1252，这与这个原始帖子相对应。确保您的 http 标头和 html 元标记指定 UTF-8 编码，并确保您的 servlet 容器默认设置为使用 UTF-8（请参阅[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding#Q8)如果你正在使用tomcat）。

有时，您仍然会通过使用（例如）CP1252 将应用程序的复制粘贴逐位粘贴到 UTF-8 页面上的文本区域中。我从来没有让这个工作没有乱码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:15:08.990

UTF-8 编码标准能够编码任何 Unicode 代码点。ISO-8859-1 只能处理其中的一小部分。因此，从 ISO-8859-1 转码到 UTF-8 不是问题。当发现不受支持的字符时，从 UTF-8 倒退到 ISO-8859-1 将导致“替换字符”(�) 出现在您的文本中。要对您的测试进行转码，您可以这样做：

```
byte[] utf8 = new String(latin1, "ISO-8859-1").getBytes("UTF-8"); 
```

或者

```
byte[] latin1 = new String(utf8, "UTF-8").getBytes("ISO-8859-1"); 
```

# algorithm - 从邻接表表示中删除重复顶点和自环的图算法

> ID：12825237
> 
> 赞同：0
> 
> 时间：2012-10-10T17:43:59.277
> 
> 标签：algorithm, graph

给定有向多重图的邻接表表示，是否有 O(V+E) 算法将其转换为无向简单图？该算法显然应该使用最小的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T21:04:17.907

**[编辑 6/5/2013：将 a[] 始终视为二维数组。]**

是的，只要列出的每个邻接中的顶点按排序顺序排列，并且在一对顶点之间最多可以有一条边。假设顶点 i 的第 j 个孩子是 a[i][j]：

```
# First make sure each edge appears only in the lower endpoint's adjacency list.
# We don't care if this duplicates vertices in a list.
For each vertex i:
    j = 1
    For each k from 1 to len(a[i]):
        a[i][j] = a[i][k]
        If a[i][k] > i:
            j = j + 1        # Only save space for edges to higher vertices

        If a[i][k] < i:
            Append i to a[a[i][k]]

    Adjust len(a[i]) to j - 1 
```

此时，每个邻接列表最多包含 2 个已排序的子序列 - 子顶点的原始列表（删除了任何更高的顶点），可能后面是从更高顶点的邻接列表附加的父顶点列表。通过寻找小于前一个元素的第一个元素，可以在线性时间内找到第二个序列的开始；如果找到，这两个子序列可以使用相同大小的缓冲区在线性时间中合并（或者在不使用额外空间的情况下以对数线性时间排序，或者使用桶排序和对数额外空间在线性时间中排序）。任何邻居都不能出现超过两次，并且任何重复的都可以在合并期间删除。

# .htaccess - 使用 .htaccess 重定向子域

> ID：12825241
> 
> 赞同：0
> 
> 时间：2012-10-10T17:44:17.600
> 
> 标签：.htaccess, mod-rewrite, amazon-ec2, subdomain

我有一个 EC2 实例并在服务器上托管多个站点。我可以将不同的域重定向到它们的特定文件夹，但我似乎无法重定向子域。

到目前为止，这是我的 www.domain1.com 代码，它指向“folder1”并在地址栏中保留“www.domain1.com”地址 - 这工作正常：

```
Options +FollowSymlinks
RewriteEngine On

RewriteCond %{HTTP_HOST} domain1.com
RewriteCond %{REQUEST_URI} !^/folder1
RewriteRule ^(.*)$ folder1/$1 [L] 
```

但是我找不到子域的解决方案 - 我尝试了许多类似的解决方案 - 这不起作用：

```
RewriteCond %{HTTP_HOST} sub.domain1.com
RewriteCond %{REQUEST_URI} !^/folder2
RewriteRule ^(.*)$ folder2/$1 [L] 
```

我希望[http://sub.domain1.com](http://sub.domain1.com)指向“folder2”，但在地址栏中保留 sub.domain1.com。如果可能的话，我要避免的一件事是在代码中使用我很长的 EC2 实例静态地址“http://ec2-12-34-567-890.compute-1.amazonaws.com/”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:54:13.223

尝试将主机部分更改为具有边界：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com$ [NC] 
```

和

```
RewriteCond %{HTTP_HOST} ^sub\.domain1\.com$ [NC] 
```

第一条规则与主机匹配，`sub.domain1.com`因为它包含`domain1.com`

# jquery - Jquery 用户是否在文本字段上处于活动状态？

> ID：12825243
> 
> 赞同：0
> 
> 时间：2012-10-10T17:44:32.553
> 
> 标签：jquery, keypress

jQuery中有很多关于keypress、keyup、...的例子。这些示例是关于在文本字段中输入的。当用户在文本字段中输入消息或其他内容时，我们可以显示用户正在输入的内容，但当用户不输入时，我们无法显示有关情况的消息。[这是来自http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)的示例：

```
$("#target").keypress(function() {
  $("#other).html("User is typing");
});  

<form>
  <fieldset>
    <input id="target" type="text" value="" />
  </fieldset>
</form>
<div id="other">
  Trigger the handler
</div> 
```

当他不键入时，如何更改此代码并显示消息（用户未键入）？像其他选项一样的东西....

编辑：这是我的想法。它与您的想法（代码）相似。感谢您的帮助。

```
$(document).ready(function(){
  $("#target").keyup(function(){
      setTimeout(function(){
          $("#other").html("User is not typing");
      }, 2000);   
  });
  $("#target").keydown(function(){
    $("#other").html("User is typing");
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:52:14.480

我建议使用延迟：

```
$("#target").keypress(function() {
      $("#other").html("User is typing");
      $("#other").delay(1000).queue(function(n) {
        $(this).html("User is not typing");
        n();
    });  
    }); 
```

[http://jsfiddle.net/CbGL9/9/](http://jsfiddle.net/CbGL9/9/)

# android - 在 setBase 之后 Chronometer 是如何工作的？

> ID：12825244
> 
> 赞同：0
> 
> 时间：2012-10-10T17:44:36.287
> 
> 标签：android

当我在 setBase 中放入一些随机数时，出现了一些疯狂的时间，但是当我放入 SystemClock.elapsedRealtime 或 current 时，它工作正常，我不明白为什么。我知道 setBase 接收一个数字作为参考，但是他们如何知道我通过的时间是 elapsedRealtime，他们比较数字？因为任何其他与默认值不同的数字（经过，当前）都不能正常工作。

# android - 我应该在 Android 中的哪里存储文件？

> ID：12825245
> 
> 赞同：2
> 
> 时间：2012-10-10T17:44:36.913
> 
> 标签：android, file

我有一个创建配置文件和日志文件的应用程序。我将这些存储在外部存储中，但是当我在我的 android 模拟器中尝试它时它不起作用，因为外部存储不可写。如果发生这种情况，我应该将文件存储在哪里？

这是我的代码：

```
private void createConfigurationFile(){
    File ssConfigDirectory = 
        new File(Environment.getExternalStorageDirectory()+"/MyApp/config/");
    File file = new File(ssConfigDirectory, mUsername+".cfg");

    if(!file.exists()){
        try{
            String state = Environment.getExternalStorageState();
            if (!Environment.MEDIA_MOUNTED.equals(state)){
                ssConfigDirectory = new File("PATH_WHERE_I_SHOULD_STORE_IT");
            }
            File ssLogDirectory = new File(ssConfigDirectory+"/SweetSyncal/log/");
            ssLogDirectory.mkdirs();                
            ssConfigDirectory.mkdirs();

            File outputFile = new File(ssConfigDirectory, mUsername+".cfg");                
            FileOutputStream fOut = new FileOutputStream(outputFile);
            OutputStreamWriter osw = new OutputStreamWriter(fOut); 

            writeFile(osw);
            osw.flush();
            osw.close();
        }catch(Exception e){
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:47:24.457

如果文件不是太大，您可以将其保存在设备的内部存储中。

要访问内部存储，您可以使用以下方法：

`FileOutputStream openFileOutput (String name, int mode)`

（您需要一个实例`Context`才能使用它）

例子：

```
String FILENAME = "hello_file";
String string = "hello world!";

FileOutputStream fos = openFileOutput(FILENAME, Context.MODE_PRIVATE);
fos.write(string.getBytes());
fos.close(); 
```

至于为什么您提供的代码不起作用，那么有两种可能性：

1.  您忘记添加所需的权限 ( `WRITE_EXTERNAL_STORAGE`)。
2.  您的模拟器没有启用 SD 卡。假设您使用的是 Eclipse，您可以在 AVD Manager 中启用它。只需编辑您的 AVD 实例并在相应字段中输入 SD 卡的大小。您还应该添加一个名为的硬件功能`SD Card Support`并将其设置为 TRUE。

官方开发者指南中有一篇很棒的文章，它将告诉您有关 Android 存储的所有信息。

你可以在[这里阅读](http://developer.android.com/guide/topics/data/data-storage.html)

# symfony - Symfony2用户由于缓存而被登录为其他用户

> ID：12825246
> 
> 赞同：3
> 
> 时间：2012-10-10T17:44:42.133
> 
> 标签：symfony, varnish

最坏的情况发生了。

尽管我采取了所有必要的预防措施，但 varnish 似乎缓存了用户登录的页面。

**现在，当你访问我的网站时，你被连接为这个 XXX 人，显然不是你。你可以编辑他的个人资料...**

**我只缓存**了我有标签的 2 个页面（主页和一个列表页面）：

```
@Cache(smaxage="10800") 
```

在我所有的模板中，我使用 ESI（用于菜单/页脚/登录模式）来防止这种情况：

```
{% render "HomeBundle:Home:login" with { 'appRequestUri' : app.request.uri }, { 'standalone': true } %}
{% render 'HomeBundle:Home:menu' with { 'locale' : app.request.locale }, { 'standalone': true } %} 
```

登录操作没有`@Cache`注释。

这是 Varnish 使用的我的[default.vcl 。](http://pastie.org/private/ehjfeg2pxvtynhacsgjzw)

请问我做错了什么？

PS：我确实有`esi: { enabled: true }`并导入了esi路由`routing.yml`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:37:36.287

查看您的 VCL 后，您似乎将缓存每个请求，其中包含一个**Cookie**。这不是你真正想要的，不是吗？

我建议您尽快关闭**vcl_recv**：

```
sub vcl_recv {
    if (req.http.Cache-Control ~ "no-cache") {
        return (pass);
    }
    set req.http.Surrogate-Capability = "abc=ESI/1.0";
 } 
```

这样做，默认的**vcl_recv**将在之后被调用，并且所有记录的请求都不会被缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T08:25:47.773

我不认为这是因为缓存。如果只是缓存，您将无法编辑配置文件，因为您将获得用户的缓存页面而不是他的会话......

# c# - 使用 Sider .NET 客户端大量插入 Redis DB 的性能不佳

> ID：12825247
> 
> 赞同：1
> 
> 时间：2012-10-10T17:44:45.517
> 
> 标签：c#, database, nosql, redis

**[我需要在Redis DB](http://redis.io)**中插入大约一百万个键值对。我的 C# 应用程序在同一台计算机上有一个 Redis 服务器实例。我使用**[Sider](https://github.com/chakrit/sider)**客户端连接到 Redis。所有设置均为默认设置。以下代码执行**4 秒**：

```
 redis_client.Pipeline(c =>
    {
        for (int i = 0; i < 1000; ++i)
        {
            Console.Write("\r" + i);
            string key = "aaaaaaaaaaa" + i;
            string value = "bbbbbbbbbb";
            c.Set(key, value);
        }
    }); 
```

我尝试了通常的插入方法和管道插入方法。Redis 的标准基准测试显示了类似的结果。CPU 或 HDD 没有问题，它们足以在不同的数据库中进行另一次大规模插入。**[Redis 的官方基准页面](http://redis.io/topics/benchmarks)**显示每秒大约 100000 次 SET 操作的可能性。我有不到 1000 个...有什么问题？

# javascript - 在 chrome 中使用 javascript 启用禁用样式表

> ID：12825248
> 
> 赞同：2
> 
> 时间：2012-10-10T17:44:49.120
> 
> 标签：javascript, stylesheet

问题的改写：为文档提供备用样式表的最佳方式是什么？

我有一个样式表列表，所有这些都在 html 文件中引用。我使用 javascript 来禁用除一个文件之外的所有文件。

例子：

```
style1   disabled = false
style2   disabled = true 
```

实际上，要加载的最后一个样式表 (style2) 是活动样式表，而与 disabled 属性无关。

如何在 chrome 文档上的样式表之间切换？

我试图设置`href`属性的值，但它似乎是只读的。

我一直在使用的代码示例：（我正在使用一个名为 MenuStyles 的对象，它存储各种 css 信息）

```
function setActiveStyleSheet(name) {

    var selectedSheet;
    var currentSheet;
    for (var i = 0; i < MenuStyles.styleSheets.length; i++) {
        currentSheet = MenuStyles.styleSheets[i];
        if (currentSheet.name === name) {
            selectedSheet = currentSheet.sheetObj;
            currentSheet.disabled = false;
        } else {
            currentSheet.disabled = true;
        }
    }
    return selectedSheet;
} 
```

**编辑：** 事实证明问题完全是由于代码中的错误。disabled 属性工作正常。以下是固定功能：

```
function setActiveStyleSheet(name) {
    var selectedSheet;
    var currentSheet;
    for (var i = 0; i < MenuStyles.styleSheets.length; i++) {
        currentSheet = MenuStyles.styleSheets[i];
        if (currentSheet.name === name) {
            selectedSheet = currentSheet.sheetObj;
            currentSheet.sheetObj.disabled = false;
        } else {
            currentSheet.sheetObj.disabled = true;
        }
    }
    return selectedSheet;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:38:00.413

如果您知道样式表的顺序，您可以使用 -

```
document.styleSheets[i].disabled=true or
document.styleSheets[i].disabled=false; 
```

如果您有 2 个样式表，您可以在它们之间切换 -

```
var S=document.styleSheets;
if(S[0].disabled){
  S[0].disabled=false;
  S[1].disabled=true;
}
else{
  S[1].disabled=false;
  S[0].disabled=true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:48:35.433

通常，您会从 BODY 标记子类化并使用使用这些类的单个样式表。然后只需交换 BODY 类，而不是样式表。否则，您应该在服务器端执行此操作。

```
<body class="sheet1"> 
```

然后

```
sheet1.h1 {
 ...
}
sheet2.h1 {
 ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-13T18:35:18.760

当前的浏览器提供了通过使用“禁用”DOM 属性（Gecko）或添加/删除禁用属性（Webkit 和 IE）来动态启用/禁用样式表的合理能力。不幸的是，除非您使用的是 IE10+，否则这些方法仅适用于引用外部样式表的“链接”标签（而不是“样式”标签）。是的 - 我说过 - 只有 IE 在这里做正确的事情。

对于在非 IE 浏览器上使用“样式”标签的内联 CSS，您需要找到一种更粗略的方法来启用/禁用，就像上面讨论的那样（删除样式元素等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-08T00:33:54.117

I've found a great way (IMHO) to achieve this:

Let's suppose you know the exactly order of your stylesheet. Let's say you want to alternate stylesheet 0 and 1 (first and second):

To get a stylesheet state (enabled/disabled) you can try this (i.e. testing the second one):

`document.styleSheets[1].disabled`

...and it returns `true`or `false`.

So to alternate you can write this code in an `onclick` event:

`document.styleSheets[0].disabled = !( document.styleSheets[1].disabled = !(document.styleSheets[1].disabled) );`

HTH!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:01:46.300

我能够通过设置禁用属性并在样式表中包含“标题”属性来使其工作。title 属性使样式表成为 PREFERRED 而不是 PERSISTENT。见[http://www.alistapart.com/articles/alternate/](http://www.alistapart.com/articles/alternate/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-21T22:12:00.510

对我来说，如果链接被禁用，document.styleSheets 不会返回集合中的链接（在 Chrome 中）。仅返回启用的链接。

我使用 document.head.getElementsByTagName('LINK') 将它们全部从 HEAD 中取出。

喜欢：

```
 private changeStyle(styleName: string): void {
       const links = document.head.getElementsByTagName('LINK');
       for (let i = 0; i < links.length; i++) {
            const link = links[i] as any;

            if( !link.href) continue;

            if (link.href.indexOf(styleName) === -1) {
                link.disabled = true;
            } else {
                link.disabled = false;
            }
        }
    } 
```

# javascript - jQuery：分配多个事件处理程序是非法的还是不好的做法？

> ID：12825249
> 
> 赞同：2
> 
> 时间：2012-10-10T17:44:49.410
> 
> 标签：javascript, jquery, event-handling, onclick

> **可能重复：**
> [jQuery：同一事件的多个处理程序](https://stackoverflow.com/questions/1491718/jquery-more-than-one-handler-for-same-event)

我正在使用创建两个按钮的 jQuery 滑块插件。这些按钮通过插件附加了点击事件，因为它们用于控制滑块。我创建了自己的 mouseover\mouseout 事件，独立于插件（与网页内联）来处理动画。我也想为点击创建一个（以便按钮改变颜色）。我会创建另一个单击事件处理程序覆盖或破坏插件的功能吗？这是不好的做法，有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:49:32.560

有两个事件是没有问题的。您可以根据需要为对象分配任意数量的事件。

这是合乎逻辑的，因为您很可能希望根据触发的事件触发不同的函数。并且 99% 的每个 jQuery 插件在处理具有多个事件的对象时都没有问题。如果您有任何问题，请尝试并提出问题。

唯一不好的是内联js；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T17:51:20.640

它不会破坏任何已经绑定的处理程序。jQuery 绑定的方式是使用事件注册模型，因此它支持多个事件处理程序。

`addEventListeners/attachEvent`这是使用传统方法的优势之一。

**更多阅读：** [https ://stackoverflow.com/a/12627478/297641](https://stackoverflow.com/a/12627478/297641)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T17:49:18.327

并非如此，但如果您可以在一个处理程序中处理所有功能，那您为什么不呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T17:51:25.600

你应该没有问题。只需使用 jQuery 的 API 添加您自己的事件处理程序，您就可以设置好了。来自 jQuery 文档`.on()`：

> 从 jQuery 1.4 开始，同一个事件处理程序可以多次绑定到一个元素。

```
$('#myButton').on('click', myHandler) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-10T17:54:43.790

在某些情况下，我会说这是不好的做法。在单个元素上创建多个事件处理程序几乎总是可以避免的。如果您足够舒适，您可以随时打开插件的源代码（如果它不是缩小版本）并修改事件处理程序以包含您的修改。

如果您对此感到不舒服，那么我会说继续您正在做的事情。只知道有更好的选择。

这假设您在插件已经有一个点击事件绑定时添加了另一个点击事件绑定。

-麦克风

# objective-c - Facebook 登录在 parse.com SDK v1.1.12 的设备上不起作用

> ID：12825251
> 
> 赞同：1
> 
> 时间：2012-10-10T17:45:00.313
> 
> 标签：objective-c, ios, facebook, parse-platform

到目前为止，我的 FB 登录没有任何问题。在我首先更新到最新的 SDK 后，我在登录时在 iOS 6 设备上的 FB 应用程序中收到了一个错误。现在，当我在视图中点击 facebook 时，我只是收到一个错误，表明出现问题并且 FB 应用程序没有打开。我没有看到任何错误报告。这是我的登录代码

```
if(![PFUser currentUser]){
    MyLoginViewController *logInController = [[MyLoginViewController alloc] init];
    logInController.delegate = self;
    logInController.signUpController.delegate = self;
    logInController.fields =  PFLogInFieldsFacebook|PFLogInFieldsDismissButton;
    logInController.facebookPermissions = [NSArray arrayWithObjects:@"user_about_me",@"status_update",@"user_birthday", nil];
    [self presentModalViewController:logInController animated:YES];
} 
```

这个问题可能与对 fb sdk 3.1 和写入权限的更改有关，但我不确定。任何建议将不胜感激！

谢谢你！

# objective-c - Objective-c 动态加载更多 UITableViewCells

> ID：12825254
> 
> 赞同：0
> 
> 时间：2012-10-10T17:45:02.560
> 
> 标签：objective-c, ios, uitableview

我正在编写一个调用 Web 服务的 iPhone 应用程序。假设 Web 服务在 json 对象中返回 1000 个元素。我不想加载所有 1000 个，因为解析可能需要一些时间。我想做的是加载我从 json 对象创建的 NSDictionary 的前 15 个元素，然后当用户滚动到 tableview 的底部时，第 16 行显示“加载更多......”。由于我已经将所有数据存储在 NSDictionary 对象中，因此有办法将其分解，使其返回 15，然后用户单击“加载更多……”并加载下一个 15 并继续直到那里NSDictionary 中没有更多元素了吗？我可以展示我的代码示例，但我想知道是否有人有如何完成此操作的示例。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:59:08.297

我认为 UITableView 可以为您做到这一点。只构建了可见的单元格。然后，当您向下滚动时，它们的内存将与下一行交换。我认为重新发明轮子没有意义。

另请注意，只有可见的单元格在您输入时被“解析”。它不会在加载时为数据源中的每个项目构建一个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:54:30.937

假设我没听错，我会说你只需要一些棘手的逻辑来让它工作

我会简单地维护一个索引偏移量，我将乘以您想要随时显示的行数（在您的情况下为 15）

您的逻辑是始终返回您希望允许 + 1 用于最终结果的行数。例如：返回_indexOffset * 15 + 1；//为你的 numberOfRowsForSection

在你的 didSelectIndexPathOf 你检查你是否是最后一行：

```
if(indexPath.row == _indexOffset * 15)
{
     _indexOffset ++;
     [tableView reloadData];
} 
```

这不是一个确切的答案，但我认为它可以让你开始

# php - .htaccess 文件不适用于某些服务器

> ID：12825260
> 
> 赞同：0
> 
> 时间：2012-10-10T17:45:31.077
> 
> 标签：php, apache, .htaccess

您好，感谢您花时间帮助我解决我的问题。我喜欢使用我在旅途中创建的简单 MVC 框架来构建我的所有 Web 项目。我似乎无法让`.htaccess`文件在特定服务器上正常工作。

例如...

如果你去：

[http://thomsonbrothersindustries.com/northside/](http://thomsonbrothersindustries.com/northside/)并尝试访问一个页面（现在只有“关于我们”功能可用 - [http://thomsonbrothersindustries.com/northside/about](http://thomsonbrothersindustries.com/northside/about)），但您可以看到“关于”页面将您引导至**404 错误**。

现在，如果你去：（同一个站点，但在不同的服务器上）

[http://ericzdisposal.com/northside/](http://ericzdisposal.com/northside/)

[http://ericzdisposal.com/northside/about](http://ericzdisposal.com/northside/about)

一切正常...

这是 .HTACCESS 文件：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

我的权限在当前不工作的服务器上受到限制，我仍在努力更好地访问域工具，但与此同时，我只是想更好地了解问题并希望可能有一个简单的在我的未来修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:24:07.550

看起来将目录添加到 .htaccess 文件中就可以了！

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ **/northside/**index.php?rt=$1 [L,QSA] 
```

我没有意识到这很重要，因为在另一台服务器上这并不重要

谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:12:17.413

除了@bigman 建议的内容外，请确保该`AllowOverride`指令设置对您的网站目录不是很严格。为了使 mod_rewrite 在 .htaccess 中工作，您需要设置`AllowOverride FileInfo`，但出于测试目的，您可以设置`AllowOverride All`.

# jquery - 此功能如何与单击而不是悬停一起使用？

> ID：12825263
> 
> 赞同：0
> 
> 时间：2012-10-10T17:45:34.043
> 
> 标签：jquery, click, hover

到目前为止，我可以接受，但理想情况下，我希望每个部分仅在单击时显示，并且在单击下一个时，淡出当前的 div 并淡入下一个相应的 div。看起来很简单，但我无法理解。不确定我是否需要更改我的标记，但这感觉很有效。

```
 $(document).ready(function() {

    $('.nav li a').hover(function() {

            $(this).siblings('div').stop(true,true).fadeIn()
            },
            function () {
            $(this).siblings('div').stop(true,true).fadeOut()

        });

    }); 
```

可能需要上下文，所以这里是小提琴：

[http://jsfiddle.net/5XbrY/](http://jsfiddle.net/5XbrY/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:07:24.337

试试这个

```
$('.nav li a').toggle(
    function() {
        $(this).siblings('div').stop(true,true).fadeIn();
    },
    function () {
        $(this).siblings('div').stop(true,true).fadeOut();
    }
); 
```

**[演示](http://jsfiddle.net/5XbrY/15/)**

祝你好运 ！！

# shell - 从 shell 脚本调用 grep 并保留彩色图案

> ID：12825275
> 
> 赞同：0
> 
> 时间：2012-10-10T17:46:01.110
> 
> 标签：shell, colors, terminal

出于某种神秘的原因，每当我从“独立”shell 脚本而不是简单函数运行 grep 时，输出的颜色都不会保留。

*为什么会发生这种情况，我该如何预防？*

最好用一个例子来说明这一点： ![在此处输入图像描述](../Images/32402ea215d6be884e65fd2a0c749a26.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:49:25.183

你应该在你的脚本中尝试：

```
grep --color 
```

但拜托，没必要

```
echo `ls` |  grep ".txt" 
```

只是

```
ls -1 | grep --color ".txt" 
```

或者

```
printf '%s\n' | grep --color ".txt" 
```

见[http://porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)

**编辑**

要更改 grep 的默认颜色，请参阅`man grep`并搜索`GREP_COLORS`

# jquery - 使用单选按钮（或更好的东西）确认 jQuery 中的第一和第二选择？

> ID：12825278
> 
> 赞同：0
> 
> 时间：2012-10-10T17:46:07.667
> 
> 标签：jquery, radio-button, conditional-statements

用户需要能够选择第一和第二时间选项。我正在使用单选按钮......但是，如果有更好的东西，我很感激输入。

当他们选择他们的第一选择时，我想要一条页面消息说“你已经选择了你的第一选择”......当他们选择他们的第二选择时，我想要“你已经选择了你的第二选择”。

是的，我意识到这看起来很简单......我对 jquery 很陌生......

谢谢你的帮助！

HTML：

```
<table class="tblWorkshop">
<tr>
<td>DAY ONE</td>
</tr>
<th>Morning Workshops</th>
<th></th>
<th></th>
<th></th>
<th>Afternoon Workshops</th>
<th></th>
<th></th>
<tr>
<td>9:00 am</td><td><input type="radio" name="choice"  class="firstChoice" value="0"  />First Choice</td><td><input type="radio" name="choice"  class="secondChoice" value="1" />Second Choice</td><td class="spotsLeft"></td>
<td>12:00 pm</td><td><input type="radio" name="choice"  class="firstChoice"  />First Choice</td><td><input type="radio" name="choice"  class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
</tr>
<tr>
<td>10:30 am</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
<td>12:30 pm</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
</tr>
<tr>
<td>11:00 am</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
<td>1:00 pm</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
</tr>
<tr>
<td>11:30 am</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
<td>2:30 pm</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
</tr>
<tr>
<td>11:45 am</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
<td>3:45 pm</td><td><input type="radio" name="firstChoice" value="0" class="firstChoice"  />First Choice</td><td><input type="radio" name="SecondChoice" value="1" class="secondChoice" />Second Choice</td><td class="spotsLeft"></td>
</tr>
</table> 
```

脚本：

```
<script type="text/javascript">
var selected =$('input[name=choice]:checked', '.tblWorkshop').val()

        if (selected == $('input[value=1]:checked', '.tblWorkshop').val()) {

            alert('First choice selected');

        }

        else if (selected == $('input[value=0]:checked', '.tblWorkshop').val()){
            alert('Second choice selected');
        }

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:48:20.017

您可以使用具有多项选择的选择框。这里的 JQuery api 页面上甚至还有一个示例：[val API page](http://api.jquery.com/val/)

# mysql - 针对表 4.000.000 条记录优化 Mysql

> ID：12825279
> 
> 赞同：0
> 
> 时间：2012-10-10T17:46:13.963
> 
> 标签：mysql, optimization, where

我有一张有 4.000.000 条记录的表。

我想运行单个查询来选择男性成员

```
SELECT * FROM member WHERE gender='0' ORDER BY member_id DESC LIMIT 0,20; 
```

执行此查询需要 12 秒。我已经有了带有性别、成员 ID 字段的索引。0：男 1：女

```
Keyname Type    Unique  Packed  Field   Cardinality
gender  BTREE   No  No  gender  2 
```

所以，我怎样才能加快这个查询:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:48:18.810

您需要一个包含 2 个字段的索引：gender、member_id DESC

这应该将其加速到几分之一秒。

SQL 命令：

```
ALTER TABLE  myTable ADD INDEX (  `gender` ,  `memcber_id` DESC ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T17:51:43.613

尝试仅索引`member_id`. 的低[基数](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)意味着该列上`gender`的索引将无济于事。无论如何，这将是一个缓慢的查询，除非您可以向`WHERE`子句添加额外的过滤器。

有关更多信息，请参阅：[什么是好的 MySQL 索引？第 2 部分：基数](http://webmonkeyuk.wordpress.com/2010/09/27/what-makes-a-good-mysql-index-part-2-cardinality/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:22:29.750

我怀疑它应该花这么长时间。你为什么不通过一次只扫描 100K 行来扫描它的一部分（不要使用限制，这没有帮助）。您甚至可能希望按日期（将被编入索引）拆分内容。

你应该只使用夹头。无论如何，您不需要一次全部。此外，您可能没有足够的内存来存储密钥/重要数据。这是我今天写的实际代码

```
var offsetStep=5000;
for(int offset=0; offset<countOrMax; offset+=offsetStep)
{
    using (var tns = conn.BeginTransaction())
    {
        var res = conn.Query<long>("select id from table1 where id>=@l and id<@u and t=@t", new { u = offset + offsetStep, l = offset, t = blah });
        //work with chuck 
```

# c - 在文本文件中搜索 C 中的字符串

> ID：12825282
> 
> 赞同：1
> 
> 时间：2012-10-10T17:46:19.033
> 
> 标签：c, string, file, search, text

对于我正在编写的程序的一部分，我需要搜索文本文件以查看文件中是否存在某个单词，如果存在，我想将其打印到屏幕上。为什么要使用 for 循环来进行字符串比较，例如：

```
int in_dictionary(char dict[][8], char word[], int size) {
int i;

for (i = 0; i<size; i++)
    if (strcmp(word, dict[i]) == 0){
        return 0;
    }
    else{
        return 1;
    }

} 
```

不为我工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T17:49:49.423

您只是将字典中的*第一个*单词与您正在搜索的单词进行比较。*您应该只在比较所有*单词后返回失败：

```
for(...) {
    if(dict[i] matches)
        return MATCH;
}
return NO_MATCH; 
```

此外，您的返回值是向后的——通常，您会返回 0 表示失败（不匹配），返回 1 表示成功（匹配）。`main()`按照惯例，函数和许多 POSIX 系统调用（成功返回 0，失败返回 -1）是例外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:49:54.613

当`strcmp()`返回 a`0`时，表示找到了匹配项。那时你需要返回 a`1`而不是`0`。此外，如果`strcmp()`返回`1`则表示字典中的当前元素与搜索字符串不匹配，此时您不能断定字典中不存在匹配项，它可能会稍后出现。因此，只有当您将搜索字符串与字典中的所有元素进行比较并且没有找到任何匹配项时，您才能得出搜索字符串不在字典中的结论。

你需要：

```
for (i = 0; i<size; i++) 
    if (strcmp(word, dict[i]) == 0){
        return 1;
    }
return 0; 
```

# android - 项目构建时收到错误 - “解析 XML 时出错：未绑定前缀”

> ID：12825284
> 
> 赞同：2
> 
> 时间：2012-10-10T17:46:30.267
> 
> 标签：android, android-layout

我是 Android 开发的新手，正在尝试创建一个示例应用程序。谁能告诉我以下布局（activity_sample.xml）有什么问题？-

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/app_name"
        tools:context=".SampleActivity" />
</LinearLayout> 
```

在构建时，我收到以下错误 -

```
error: Error parsing XML: unbound prefix    activity_sample.xml /Sample/res/layout  line 4  Android AAPT Problem 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T17:48:03.883

您尚未在 XML 中声明工具前缀。尝试使用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    android:orientation="vertical">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/app_name"
        tools:context=".SampleActivity" />
</LinearLayout> 
```

# java - 在eclipse中增加服务器超时

> ID：12825288
> 
> 赞同：40
> 
> 时间：2012-10-10T17:46:35.413
> 
> 标签：java, eclipse, tomcat

我想在 Eclipse 中增加服务器超时但不确定如何在我的 Eclipse 中配置服务器，我无法在任何地方找到超时设置。检查我的项目的屏幕截图。

我已经尝试过 Windows > Show Views > Server 但没有任何反应...没有显示任何窗口 我已经尝试过 Windows > Perefences > Server 在这里查看屏幕截图 我找不到超时设置

![在此处输入图像描述](../Images/7ef5d9161e733d05238f6aa31c33ffc6.png)

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-10T17:48:53.130

![在此处输入图像描述](../Images/e642e43c7576d29739057061f657a2ff.png)转到服务器视图，双击其中一个服务器，展开超时选项并为其设置值

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T17:56:45.757

要查看您`server`的状态（**如果服务器视图未显示，只需右键单击透视图，例如 Java 或 J2EE 并选择 reset**。希望对您有所帮助）`server view`，`eclipse`

 **```
 right click (in server server view pane) -> new -> server 
```

您将看到以下屏幕：

![在此处输入图像描述](../Images/145d675777590e09d13206922e45cfc4.png)

现在选择`Apache` `Tomcat`正确的版本，然后选择下一步，您将看到以下屏幕：

![在此处输入图像描述](../Images/5056ccfd872a24927dfce6385f90e72a.png)

浏览`Tomcat`服务器安装目录并完成。现在您将能够`Tomcat`在 Eclipse 的服务器视图中看到服务器。

作为问题的最后一步，双击`Tomcat`eclipse 的服务器视图中列出的服务器并更改超时，如下面的屏幕所示： ![在此处输入图像描述](../Images/b8ff27831e3d732fad7b9b96946d0ee0.png)

希望这可以帮助！。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-08T09:27:01.923

这是你需要做的：

```
Open the Servers view -> double click tomcat -> click on Timeouts section 
```

根据您的要求进行更改。

参考：[在 Eclipse 中更改 Tomcat 服务器的超时时间](https://stackoverflow.com/questions/4845219/change-tomcat-servers-timeout-in-eclipse)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-15T14:43:22.103

`Open the Servers view -> double click tomcat -> drop down the Timeouts section`

在那里，您可以增加每个特定服务器的启动时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T11:56:37.573

打开 Servers 视图 -> 双击 tomcat -> Server 并单击 Open ..

您可以在 Timeouts 标签中增加启动时间

指定完成服务器操作的时间限制。开始（秒）增加 600**

# mysql - 如何使用mysql：SELECT * FROM `tablename` WHERE `field`.length > 20

> ID：12825293
> 
> 赞同：0
> 
> 时间：2012-10-10T17:46:50.710
> 
> 标签：mysql

如何找出列的值有多长。就像是：

```
SELECT * FROM `tablename` WHERE `field`.length > 20 
```

我知道这种说法是错误的。我只是不知道如何表达它。我似乎找不到任何关于此事的文件。

所以我需要从表中选择电话字段超过 20 个字符的所有行。

我导入了一个文件，我的客户在 1 个字段中合并了 2 个电话号码，因此我需要获取所有受影响的行来修复它们。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:48:43.387

您可以使用该[`length()`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_length)函数来确定该字段中有多少个字符。

```
SELECT * 
FROM `tablename` 
WHERE length(`field`) > 20 
```

如果你认为你会有空格，那么你可以将它与[`TRIM()`](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_trim)：

```
SELECT * 
FROM `tablename` 
WHERE length(trim(`field`)) > 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T17:48:47.410

```
SELECT * FROM tablename WHERE LENGTH(field) > 20 
```

在这种情况下检查文档；[http://dev.mysql.com/doc/refman/5.0/en/string-functions.html](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:53:11.930

如果你想要以字节为单位的字段长度（ascii 字符），你可以使用[LENGTH()](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_length)函数，如果你想对 UTF-8 等国际字符集“多字节安全”，你可以使用[CHAR_LENGTH()](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_char-length)计算实际字符。

```
SELECT * FROM `tablename` WHERE CHAR_LENGTH(`field`) > 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T10:16:18.140

使用长度（）：

```
SELECT * FROM tablename WHERE LENGTH(field) > 20 
```

# jquery - jquery mobile - 样式图标位置不起作用可折叠集

> ID：12825302
> 
> 赞同：0
> 
> 时间：2012-10-10T17:47:24.293
> 
> 标签：jquery, jquery-mobile

这毫无意义，真的。我正在尝试使用一个简单的可折叠集，然后取消样式并更改链接等的颜色。第一个任务-更改图标并将其移动到右侧而不是左侧。我正在尝试以`data-iconpos="right"`与我相同的方式使用`data-collapsed="true"`，但它似乎不起作用。像这样的规定的 jQuery 数据函数似乎都不起作用，比如主题更改，而不是 a、b 或 c。我在这里想念什么？根据文档，这应该非常容易！

实时取景：[https ://www.ubat.com/mobile/test.html](https://www.ubat.com/mobile/test.html)

页面代码：

```
<!DOCTYPE html>
<html>
<head>
<title>My Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="css/jquery.mobile-1.0a3.min.css" rel="stylesheet" type="text/css"/>
<script src="css/jquery-1.5.min.js" type="text/javascript"></script>

<script src="css/jquery.mobile-1.0a3.min.js" type="text/javascript"></script>
<script type="text/javascript" src="//use.typekit.net/kxv5fxv.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>
<div data-role="page">
  <div data-role="header">
    <h1>My Title</h1>
  </div>
  <!-- /header -->

  <div data-role="content">
    <p>Hello world</p>

    <div data-role="collapsible-set">
      <div data-role="collapsible" data-collapsed="true" data-iconpos="right">
        <h3>Section 1</h3>
        <p>I'm the collapsible set content for section 1.</p>
      </div>
      <div data-role="collapsible" data-collapsed="true">
        <h3>Section 2</h3>
        <p>I'm the collapsible set content for section 2.</p>
      </div>
    </div>

  </div>
  <!-- /content --> 

</div>
<!-- /page -->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:05:47.197

您使用的是非常过时的（alpha！）版本的 jQuery Mobile。最新的是[1.2.0](http://jquerymobile.com/demos/1.2.0/docs/content/content-collapsible-set.html)和自定义图标位置的可折叠集直到版本[1.1.0才出现](http://jquerymobile.com/demos/1.1.0/docs/content/content-collapsible-set.html)

请同时升级 jQuery 和 jQuery Mobile 版本以使您的代码正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:22:48.620

我在使用 jQuery Mobile 时经常遇到的问题是，在运行时会向 DOM 添加更多的类和元素，因此您的 CSS 样式需要考虑到这种新结构。我并不是建议使用“jQuery 方式”来使用它们的数据属性来解决您的问题，但是当您遇到想要更改且没有内置选项的事物时，这将帮助您。

下面只是两个可折叠部分之一。我试图将它隔开以提高可读性（它仍然很乱）。

```
<div data-role="collapsible-set" class="ui-collapsible-set">
  <div data-role="collapsible" data-collapsed="true" data-iconpos="right" class="ui-collapsible-contain">

  <h3 class="ui-collapsible-heading">
    <a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-icon-left ui-corner-top ui-btn-down-c ui-btn-up-c" data-theme="c">

      <span class="ui-btn-inner ui-corner-top">
        <span class="ui-btn-text">Section 1
          <span class="ui-collapsible-heading-status"> click to collapse contents</span>
        </span>

        <span data-theme="d" class="ui-btn ui-btn-up-d ui-btn-icon-left ui-btn-corner-all ui-shadow">
          <span class="ui-btn-inner ui-btn-corner-all ui-corner-top">
            <span class="ui-btn-text"></span><span class="ui-icon ui-icon-shadow ui-icon-minus"></span>
          </span>
        </span>
      </span>
    </a>
  </h3>
  <div class="ui-collapsible-content" aria-hidden="false">
    <p>I'm the collapsible set content for section 1.</p>
  </div>
</div>
</div> 
```

您可以将按钮图标向右移动的一种方法是在 CSS 中执行此操作：

```
 .ui-collapsible-heading a span.ui-btn{
    left: inherit;
    right: 6px; /* Previously left was 6px */
  } 
```

我发现解决这些问题的最佳方法是在浏览器中打开检查器并查看 jQuery Mobile 创建的最终结构。

# c# - Xaml C# 中 Windows 8 商店应用程序的游戏循环

> ID：12825305
> 
> 赞同：2
> 
> 时间：2012-10-10T17:47:30.517
> 
> 标签：c#, xaml, windows-8, windows-runtime, windows-store-apps

在设计 Windows 8 商店、回合制游戏应用程序 (XAML / C#) 时，我正在寻找一些指导。

每回合，AI 执行一些任务，玩家执行一些任务。这可以被视为状态机/固定工作流。

我可以考虑使用游戏循环 [1] 或在由用户输入触发的状态机中创建和跟踪每个状态 [2]：

```
[1]:
where(true)
{
    BeginTurn();
    AiDoSomething1();
    await PlayerInput1();

    AiDoSomething2();
    await PlayerInput2();
    EndTurn();
}

[2]:
void PlayerInput1()
{
    lock(_lock)
    {
        if(State == State.State1)
        {
            State = State.State2;
            AiDoSomething2();
        }
    }
}

void PlayerInput2()
{
    lock(_lock)
    {
        if(State == State.State2)
        {
           State = State.State1;
           EndTurn(); BeginTurn();
           AiDoSomething1();
        }
    }
} 
```

对于使用 XAML/C# 的 Windows 8 商店应用程序，是否有一种众所周知的模式来解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:23:34.047

您可以使用[`VisualStateManager`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.visualstatemanager). 使用它，您只需在 VM 中设置一个值，然后对视图中的视图状态做出反应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T12:03:02.953

不确定您是否指的是更字面意义上的游戏循环，但以防万一有人搜索，您可以通过以下三种方式在 Windows 8 中创建游戏循环：

1.  使用 XNA/MonoGame 并完成它。需要承担很大的外部依赖
2.  使用 CompositionTarget.Rendering。简单，但无法知道帧之间经过了多少时间
3.  使用 MonoGame 的 GameTimer。使用幕后的最后一种方法和秒表来跟踪经过的时间。如果您不使用 XNA，可能是您最好的选择

更多细节可以在[http://www.spottedzebrasoftware.com/blog/windows-8-game-loop.html找到](http://www.spottedzebrasoftware.com/blog/windows-8-game-loop.html)

# sql - 将 SQL 连接到 SPSS

> ID：12825311
> 
> 赞同：3
> 
> 时间：2012-10-10T17:47:50.577
> 
> 标签：sql, spss

我在 Microsoft SQL 服务器中有表；我正在使用 SPSS 14.1。现在我想将 SQL 表连接到 SPSS，所以我可以直接使用 SPSS 中的 SQL 表。

在 SPSS 中，SQL 数据库 -> 数据源 -> 添加新数据库连接 -> 然后我只有 3 个数据源选项：dBASE 文件、Excel 文件和 MS Access 数据库。哪一个可以连接到SQL server？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:27:15.700

You should open the Microsoft ODBC Administrator from Start or the Control Panel. There you should activate the System SDN tab, click Add... and add a SQL Server data source.

A wizard will open, where you can enter the details. First the name of the connection, which will be used as a reference by SPSS. Then optionally a description, and the ip address or name of the server.

On the next page select the authentication method, and if needed, enter the user and password. From this point, the default settings will most likely be good. If you will have character coding problems or something like that, you may need to change these settings.

I also use ODBC connection to connect to the database from SPSS, and it works well.

I hope this will help.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T03:00:16.330

您可能需要 MS 的 ODBC 驱动程序或使用 Data Access Pack for SPSS 中的驱动程序，但您需要专门用于 SQL Server 的驱动程序。

# rabbitmq - 为什么使用 RabbitMQ 等队列系统

> ID：12825314
> 
> 赞同：1
> 
> 时间：2012-10-10T17:47:54.947
> 
> 标签：rabbitmq, queueing

我不是高级程序员，但我已经部署了一段时间的应用程序并开发了小型完整系统。

我开始听说诸如 RabbitMQ 之类的排队系统。可能是，我从未开发过任何必须使用排队系统的系统。但是，如果我不使用它，我会担心，因为我不知道该怎么做。我已经在他们的网站上阅读了 RabbitMQ 教程，但我不确定我为什么要使用它。我不确定这些中的任何一个是否不能通过没有附加组件和常规数据库或类似的常规编程来实现。

有人可以用一个小例子解释为什么我会使用排队系统。我的意思不是一个hello world的例子，而是一个实际的场景。

非常感谢您的时间

*   R M

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T20:53:43.863

One of the key uses of middleware like message queues is to be able to send data between non homogenous systems. The messages themselves can be many things. Strings are the easiest to be understood by different languages on different systems but are often less useful for transferring more meaningful data. As a result JSON and XML are very popular for the messages. These are just structured strings that can be converted into objects in the language of choice at the consumer end.

Additional useful features:

*   In some MQ systems like RabbitMQ (not true in all MQ systems) is that the client handles the communication side of things very nicely.
*   The messages can be asynchronous. If the consumer goes down, the messages will remain until the consumer is back online.
*   The MQ system can be setup to varying degrees of message durability. They can be removed from the queue once read or remain until the are acknowledged. They can be persistent so even if the MQ systems goes down message will not be lost.

Here goes with some possibly contrived examples. A Java program on a local system wants to send a message to a system on the connected through the internet. The local system has a server connected to the internet. Everything is blocked coming from the internet except a connection to the MQ. The Java program can publish the message to the MQ with out needing access to the internet. The message sits on the queue until the external system picks it up. The Java program publishes a message, lets say XML, and the consumer could be a Perl program. As long as they have some way of understanding the XML with a predefined way of serialization and deserialization it will be fine.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T21:05:12.043

MQ 系统往往在“即发即弃”的情况下工作得最好。如果一个事件发生并且需要通知其他人，但源系统不需要来自其他系统的反馈，那么 MQ 可能是一个不错的选择。

如果您了解 MQ 的优缺点，但仍然不明白为什么它非常适合特定系统，那么它可能不是。我见过使用了 MQ 但不需要的系统，结果并不漂亮。

我见过的大多数情况下它都很好地解决了不相关系统之间的集成（通常是开箱即用的类型系统）。假设您有一个接受订单的系统，以及一个不同的系统来完成订单并发货。在这种情况下，订单系统可以使用 MQ 将订单通知履行系统，但订单系统没有兴趣等待履行系统收到订单。因此，它将消息放入队列中继续前进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T04:26:19.690

这是一个非常简化的答案，但它给出了一般的想法。

让我们从电话与电子邮件的角度来考虑这一点。假装一分钟电子邮件不存在。要完成工作，您必须给每个人打电话。当您通过电话与某人交流时，您需要让他们在他们的办公桌前才能联系到他们（假设他们在工厂并且听不到他们的手机铃声）:-) 如果您希望联系的人不是'在办公桌前，您被困在等待他们回电话之前（或者更有可能，您稍后再给他们回电话）。你也一样——在有人打电话给你之前，你没有任何工作要做。如果多人同时打电话，你不知道，因为你一次只能处理一个人。

但是，如果我们有电子邮件，您可以将您的请求与其他人“排队”，在他们方便的时候回答（但更有可能忽略）。如果他们确实忽略了您的电子邮件，您可以随时重新发送。您不必等待他们在办公桌前，他们也不必等到您挂断电话。工作量均匀，事情运行得更加顺利。作为额外的奖励，您可以将不想处理的消息转发给您的 peons。

在系统工程中，我们使用术语“紧密耦合”来定义像上面的电话场景一样工作的程序（或程序的一部分）。它们彼此非常紧密地依赖，经常在程序的各个部分之间共享实现。在这些程序中，数据按串行顺序处理，一次一个。这些系统通常很容易构建，但有一些重要的缺点需要考虑：（1）更改程序的任何部分可能会导致整个代码的级联更改，这会引入错误；(2) 系统的可扩展性不是很好，通常必须随着需求的增长而报废和重建；(3) 系统的所有部分必须同时运行，否则整个系统将无法运行。

基本上，如果程序非常简单或者有一些特殊的原因需要使用紧密耦合的程序，那么紧密耦合的程序是好的。

在现实世界中，事情要复杂得多。程序不可能那么简单，以紧密耦合的方式开发企业应用程序成为一场噩梦。因此，我们使用术语“松散耦合”来定义由许多较小部分组成的大型系统。这些部件具有非常明确的边界和功能，因此可以更轻松地完成系统的更改。它是面向对象设计的精髓。消息队列（如 RabbitMQ）允许在各种程序和程序的各个部分之间进行类似电子邮件的通信，从而使工作流程更像与人一起工作。然后，添加额外的容量就变得很简单，只需在需要的地方启动和额外的计算机即可。

显然，这是一个粗略的简化，但我认为它传达了总体思路。构建使用消息队列的应用程序使您能够利用云服务提供商部署可大规模扩展的应用程序。这是一篇关于云设计的文章：http: [//blogs.msdn.com/b/silverlining/archive/2011/08/23/designing-and-building-applications-for-the-cloud.aspx](http://blogs.msdn.com/b/silverlining/archive/2011/08/23/designing-and-building-applications-for-the-cloud.aspx)

# ruby-on-rails - 使用 Ajax 使用 observe_field 重新加载部分会触发多个事件

> ID：12825320
> 
> 赞同：1
> 
> 时间：2012-10-10T17:48:24.370
> 
> 标签：ruby-on-rails, ajax, prototype

我有一个带有 3 个下拉列表的表单 - A、B 和 C。当 A 更改时，B 应该使用新的选项列表进行更新，并且 C 应该被清除。当 B 更改时，应使用新的选项列表更新 C。

我有 A、B 和 C 的部分，并且 A 和 B 都包含`observe_field`对 watch 本身的调用。

每次 A 更改时，B 都会重新加载并添加一个新的观察者。这意味着每次 B 更改时，都会触发 N+1 个重新加载 C 的请求（其中 N 是 A 更改的次数）。

我已经尝试将`observe_field`调用移出替换 B 的下拉列表的部分（将其放置在 A 的部分中），但是在第一次更改为 A 之后，B 不再触发事件。

我也尝试在 B 上添加对观察者的`$('b').stopObserving();`调用`:before`，但这具有相同的效果 - 在第一次更改 A 之后，事件停止在 B 上触发。

有没有办法使这项工作？

**编辑：**

以下是`observe_field`调用生成的 Javascript：

```
new Form.Element.EventObserver('a', function(element, value) {
  $('b_loading_indicator').show();
  new Ajax.Updater('b',
    'http://localhost:3000/foos/b_control', {
      asynchronous: true,
      evalScripts: true,
      onComplete: function(request) { $('b_loading_indicator').hide(); },
      parameters: 'a_id=' + encodeURIComponent(value) + '&object_name=foo' + '&authenticity_token=' + encodeURIComponent('kH/TmOfvSKeNLxO4N0gxtqV0niNfAUlJ3guk6KAvPig=')
    });
});

new Form.Element.EventObserver('b', function(element, value) {
  $('c_loading_indicator').show();
  new Ajax.Updater('c', 
    'http://localhost:3000/foos/c_control', {
      asynchronous: true,
      evalScripts: true,
      onComplete: function(request) { $('c_loading_indicator').hide(); },
      parameters: 'a_id=' + encodeURIComponent($('a').value) + '&b_id=' + encodeURIComponent(value) + '&object_name=foo' + '&authenticity_token=' + encodeURIComponent('kH/TmOfvSKeNLxO4N0gxtqV0niNfAUlJ3guk6KAvPig=')
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:19:32.247

```
 $(document).ready(function() {
   $("#section").bind("keyup", function() {
   data = {this.name: this.val()}; // the value of input that need to send to server
   $.get(url, data, // make ajax request
     function(html) { // function to handle the response
      $("#article_list").html(html); // change the inner html of update div
     });
   });
 }); 
```

# css - 所有四个侧面的 CSS 盒子阴影

> ID：12825324
> 
> 赞同：7
> 
> 时间：2012-10-10T17:48:38.907
> 
> 标签：css

我在这里有这门课，我使用 box-shadow 效果很好，但它只显示两侧的阴影，是否可以在所有四个侧上获得阴影？

谢谢，J

```
.contactBackground{
    background-color:#FFF;
    padding:20px;
    box-shadow: 10px 10px 10px #000000;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T17:49:53.037

如果将偏移设置为零，则阴影在所有四个边上都将相等。

```
.contactBackground{
    background-color:#FFF;
    padding:20px;
    box-shadow: 0 0 10px #000000;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T18:07:41.940

## 箱形阴影

CSS3 box-shadow 属性具有以下属性：（[W3Schools](http://www.w3schools.com/cssref/css3_pr_box-shadow.asp)）

`box-shadow: h-shadow v-shadow blur spread color inset;`

在您的示例中，您将阴影垂直和水平偏移 10px。

就像在其他评论中一样，将前两个值设置为 0px，以便在所有方面都有均匀的阴影。

## 更多关于阴影

shadow 支持最新浏览器的主要前缀是`box-shadow`.

我建议将另外 2 个用于较旧的 Mozilla 和 Webkit：

*   `-moz-box-shadow`
*   `-webkit-box-shadow`

此外，通过使用`rgba`而不是十六进制颜色值，您可以设置阴影的 alpha/opacity： `box-shadow: 0px 0px 20px 10px rgba(0, 0, 0, 0.3);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T17:50:33.853

移除偏移定义，只使用模糊半径（第三个参数）：

```
.contactBackground{
    background-color: #fff;
    padding: 20px;
    box-shadow: 0 0 10px #000;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T18:42:09.193

试试：box-shadow: 0 0 10px 10px #000000;

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-10T17:53:21.523

你需要指定 box-shadow: 10px 10px 10px 10px BLACK；

右、下、左、上

或者你可以说 box-shadow-top: 10px BLACK; ETC

# objective-c - UIButton 在构建 NSObject 后不会点击

> ID：12825325
> 
> 赞同：0
> 
> 时间：2012-10-10T17:48:41.483
> 
> 标签：objective-c, ios, uiview, uibutton

我目前正在构建一个配置文件对象，它可以返回包含用户所有信息的视图。我希望能够在许多不同的地方重用代码，所以我试图在 NSObject 中构建它，但是当我将它添加为我的视图的子视图时，我无法单击按钮。这些按钮是用一个矩形创建的，然后在它们上面放一个 UILabel。如果我将代码复制到我试图放置的地方，它就可以工作。我也尝试过创建一个委托，但这也没有做任何事情。

**编辑**

```
UIView *profile = [[UIView alloc] initWithFrame:CGRectMake(10.0, 0.0, 300.0, 175.0)];
UIView *votesView = [[UIView alloc] initWithFrame:CGRectMake(60.0, 125.0, 60.0, 50.0)];
UILabel *votesLabel = [[UILabel alloc] initWithFrame:CGRectMake(5.0, 0.0, 50.0, 40.0)];
votesView.backgroundColor = [UIColor lightGrayColor];
votesLabel.text = votes;
votesLabel.textAlignment = UITextAlignmentCenter;
votesLabel.backgroundColor = [UIColor clearColor];
votesLabel.tag = 2;
[votesView addSubview:votesLabel];
[profile addSubview:votesView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:41:22.800

为什么要子类化 NSObject，可以子类化 UIView 并实现要包含的所有视图，

另外，我看不到您是如何添加按钮的，我只能看到代码中的标签。

但建议您需要提及动作和目标，对于目标，您可以在其中添加您的类，它被称为

```
[btn addTarget:<class where you will add UIView returned by your class> action:<SEL in your class where you will add UIView> forControlEvents:<UIControlEvents>] 
```

# sharepoint - SSRS 未经授权的 401 与 SharePoint

> ID：12825333
> 
> 赞同：2
> 
> 时间：2012-10-10T17:48:59.060
> 
> 标签：sharepoint, ssl, reporting-services, bids

我已经配置了 SSRS 和 SharePoint 集成，并且在没有打开 SSL 的情况下一切正常。

我可以在 SSRS (BIDS) 中创建报告并连接到 SharePoint 列表并运行它们。我可以通过 SharePoint 文档库创建报告，它们运行得非常好。

一旦我在 IIS 中为我​​的 SharePoint 网站打开“需要 SSL”，我就开始遇到问题。突然，我当然不能再在 BIDS 的数据源连接中使用 localhost，这会导致问题。一旦我将它切换到我的公共 https:// URL，我就无法再让它工作了。我收到 401 未经授权的错误。

我尝试向 SSRS 添加一个“执行帐户”，但似乎没有帮助。我尝试通过 SSRS 数据源指定 Windows 身份验证以外的凭据，这给了我另一个错误，即插件不支持 Windows 身份验证以外的任何内容。我尝试从远程框中通过网络通过 Report Builder 3.0 进行连接，但我得到了相同的错误。

在 Windows Server 2008 r2 上使用 SharePoint 2010 Foundation 和 SQL Server 2008 r2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:22:39.727

当我无法弄清楚如何做你正在做的事情时，这是我没有尝试的一件事。

> 在管理中心配置报表服务器集成时，请按以下格式指定报表服务器 URL： `https://<SSLCertifcateName>:<SSLport>/reportserver.`
> 
> 有关详细信息，请参阅如何：在 SharePoint 管理中心中配置报表服务器集成功能

.

[http://msdn.microsoft.com/en-us/library/ms345223%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms345223%28v=sql.90%29.aspx)

# c# - 在 C# 中即时序列化大量对象而不是一次全部序列化？

> ID：12825338
> 
> 赞同：1
> 
> 时间：2012-10-10T17:49:09.580
> 
> 标签：c#, xml, oop, serialization

我创建了几个类来表示关系数据结构（父子结构）。下面是迄今为止的 XML 表示示例，让您了解我的意思

```
<BillingFile>
    <Account>
      <acctnum>122344231414</acctnum>
      <adjustments>34.44</adjustments>
      <Charges>
        <lineitem>
          <chargetype>PENALTY</chargetype>
          <amount>40.50</amount>
          <ratecode>E101</ratecode>
        </lineitem>
        <lineitem>
          <chargetype>LATE CHARGE</chargetype>
          <amount>445.35</amount>
          <ratecode>D101</ratecode>
        </lineitem>
      </Charges>
    </Account>
</BillingFile> 
```

我正在对我的应用程序执行的操作是解析一个大型文本文件，其中可能包含超过 50,000 个帐户。每次读取帐户时，我都会创建一个包含父对象等的“帐户”对象。最终目标是能够创建一个 XML 文件，其中包含从创建的对象序列化的所有这些帐户信息。

我看到的问题是，如果我将所有这些对象存储在内存中，则会导致性能问题，因为它在那些 50k+ 记录文件中运行。

我想知道的是，有没有办法在 C# 中顺序序列化一个对象，而不是一次全部序列化？

我做了一些谷歌搜索，似乎.NET 的内置序列化方法是一劳永逸的交易。有没有更好的方法可以做到这一点？

我宁愿避免执行任何中间步骤，例如将数据存储在数据库中，因为修改代码比弄乱一堆表和 JOIN 语句更容易。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T17:52:13.287

> 我看到的问题是，如果我将所有这些对象存储在内存中，则会导致性能问题，因为它在那些 50k+ 记录文件中运行。

先测试一下。50k * 1kB 仍然只有 50 MB。

不要解决你没有的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T07:10:37.847

[`XmlSerializer.Deserialize`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.deserialize)接受一个[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader)参数。您可以将`XmlReader`just 放在`<Account>`标签上，然后调用`XmlSerializer`那里。

```
public IEnumerable<Account> ReadAccounts(TextReader source)
{
    var ser = new XmlSerializer(typeof(Account));

    using (var reader = XmlReader.Create(source))
    {
        if (!reader.IsStartElement("BillingFile"))
        {
            yield break;
        }

        reader.Read();

        while (reader.MoveToContent() == XmlNodeType.Element)
        {
            yield return (Account) ser.Deserialize(reader);
        }
    }
} 
```

同样对于序列化

```
public void WriteAccounts(IEnumerable<Account> data, TextWriter target)
{
    // Use XmlSerializerNamespaces to supress xmlns:xsi and xmlns:xsd
    var namespaces = new XmlSerializerNamespaces();
    namespaces.Add("", "");

    var ser = new XmlSerializer(typeof(Account));

    using (var writer = XmlWriter.Create(target))
    {
        writer.WriteStartElement("BillingFile");

        foreach (var acct in data)
        {
            ser.Serialize(writer, acct, namespaces);
            writer.Flush();
        }

        writer.WriteEndElement();
    }
} 
```

您还可以创建一个`BillingFile`实现 的类，[`IXmlSerializable`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable)并将此功能放在那里。

或者，如果您更喜欢基于推送的模型：

```
public class AccountWriter : IDisposable
{
    private XmlWriter _writer;
    private XmlSerializer _ser;
    private XmlSerializerNamespaces _namespaces;

    private bool _wroteHeader = false;
    private bool _disposed = false;

    public bool IsDisposed { get { return _disposed; } }

    public AccountWriter(TextWriter target)
    {
        _namespaces = new XmlSerializerNamespaces();
        _namespaces.Add("", "");

        _ser = new XmlSerializer(typeof(Account));

        _writer = XmlWriter.Create(target);
    }

    public void Write(Account acct)
    {
        if (_disposed) throw new ObjectDisposedException("AccountWriter");

        if (!_wroteHeader)
        {
            _writer.WriteStartElement("BillingFile");
            _wroteHeader = true;
        }

        _ser.Serialize(_writer, acct, _namespaces);
    }

    public void Flush()
    {
        if (_disposed) throw new ObjectDisposedException("AccountWriter");
        _writer.Flush();
    }

    public void Dispose()
    {
        if (!_disposed)
        {
            if (_wroteHeader)
            {
                _writer.WriteEndElement();
                _wroteHeader = true;
            }

            _writer.Dispose();
            _disposed = true;
        }
    }
} 
```

```
using (var writer = new AccountWriter(Console.Out))
{
    foreach (var acct in accounts)
    {
        writer.Write(acct);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:27:18.463

您可以创建自己的 Account 对象，这些对象将采用 XElement 并从该节点读取数据，例如：

```
public class Account
{
    XElement self;
    public Account(XElement account)
    { 
        if(null == account)
            self = new XElement("Account");
        else
            self = account; 
    }

    public int Number
    {
        get { return self.Get("acctnum", 0); }
        set { self.Set("acctnum", value, false); }
    }

    public Charges Charges { get { return new Charges(self.GetElement("Charges")); } }
} 
```

我正在使用[这些扩展](https://github.com/ChuckSavage/XmlLib/blob/master/XElementExtensions.cs)来获取处理空节点/默认值的信息，例如上面，0 是 Number get 的默认 int 值。`GetElement()`如果不存在，则创建一个新的 Charges 节点。

您将需要创建可枚举的 Charges 类和 LineItem 类，但您只需根据需要创建所需的内容。

您可以使用 XPath 查找来填充帐户，例如：

```
Account account = new Account(
    root.XPathSelectElement("Account[acctnum='"+ someAccount + "']")); 
```

XPath 与`using System.Xml.XPath`.

# objective-c - 剪辑区域之间的间隙

> ID：12825343
> 
> 赞同：5
> 
> 时间：2012-10-10T17:49:32.953
> 
> 标签：objective-c, cocoa, core-graphics

我正在画很多充满 NSGradient 的梯形。我希望他们能够无缝加入，但事实并非如此。在这种情况下，我更喜欢使用剪辑而不是使用渐变显式填充 NSBezierPath。

![两个裁剪区域之间的间隙](../Images/4998297da54a1dc813f8fa45e81cc0a6.png)

以下是涉案代码：

```
-(void)drawRect:(NSRect)dirtyRect {
    [[NSColor blackColor]set];
    NSRectFill(self.bounds);

    NSPoint v0 =  NSMakePoint(100,100);
    NSPoint v1 =  NSMakePoint(200,100);
    NSPoint v2 =  NSMakePoint(100,200);
    NSPoint v3 =  NSMakePoint(200,200);
    NSPoint v4 = NSMakePoint(150, 150);

    NSBezierPath * triangle0 = [NSBezierPath bezierPath];
    [triangle0 moveToPoint:v0];
    [triangle0 lineToPoint:v1];
    [triangle0 lineToPoint:v2];
    [triangle0 closePath];

    NSBezierPath * triangle1 = [NSBezierPath bezierPath];
    [triangle1 moveToPoint:v1];
    [triangle1 lineToPoint:v2];
    [triangle1 lineToPoint:v3];
    [triangle1 closePath];

    NSGradient * gradient = [[NSGradient alloc] initWithColorsAndLocations:[NSColor whiteColor],0.0,[NSColor orangeColor],1.0,nil];

    [NSGraphicsContext saveGraphicsState];
    [triangle0 addClip];
    [gradient drawFromPoint:v0 toPoint:v4 options:NSGradientDrawsAfterEndingLocation|NSGradientDrawsBeforeStartingLocation];
     //   [gradient drawFromPoint:v0 toPoint:v4 options:0];

    [NSGraphicsContext restoreGraphicsState];

    [NSGraphicsContext saveGraphicsState];
    [triangle1 addClip];
    [gradient drawFromPoint:v3 toPoint:v4 options:NSGradientDrawsAfterEndingLocation|NSGradientDrawsBeforeStartingLocation];

    //[gradient drawFromPoint:v3 toPoint:v4 options:0];

    [NSGraphicsContext restoreGraphicsState]; 
```

我应该怎么做才能避免两个三角形之间的间隙？

编辑：这是通过显式填充 NSBezierPath 来解决此问题的尝试。

```
-(void)drawRect:(NSRect)dirtyRect {
[[NSColor blackColor]set];
NSRectFill([self bounds]);

CGContextRef c = [[NSGraphicsContext currentContext] graphicsPort];
CGContextTranslateCTM(c, 0.5, 0.5);

NSPoint v0 =  NSMakePoint(100,100);
NSPoint v1 =  NSMakePoint(200,100);
NSPoint v2 =  NSMakePoint(100,200);
NSPoint v3 =  NSMakePoint(200,200);

NSBezierPath * triangle0 = [NSBezierPath bezierPath];
[triangle0 moveToPoint:v0];
[triangle0 lineToPoint:v1];
[triangle0 lineToPoint:v2];
[triangle0 closePath];

NSBezierPath * triangle1 = [NSBezierPath bezierPath];
[triangle1 moveToPoint:v1];
[triangle1 lineToPoint:v2];
[triangle1 lineToPoint:v3];
[triangle1 closePath];

[[NSColor whiteColor]set];

NSGradient * gradient = [[NSGradient alloc] initWithColorsAndLocations:[NSColor whiteColor],0.0,[NSColor orangeColor],1.0,nil];
[gradient drawInBezierPath:triangle0 angle:45];
[gradient drawInBezierPath:triangle1 angle:45+180];

NSBezierPath  * seam = [ NSBezierPath bezierPath]; [seam moveToPoint:v1]; [seam lineToPoint:v2];
[[NSColor orangeColor]set]; [seam stroke];

NSGradient * gradient2 = [[NSGradient alloc] initWithColorsAndLocations:[NSColor whiteColor],0.0,[NSColor orangeColor],0.5,[NSColor whiteColor],1.0,nil];
NSBezierPath * squarePath = [NSBezierPath bezierPath];
[squarePath moveToPoint:v0];
[squarePath lineToPoint:v1];
[squarePath lineToPoint:v3];
[squarePath lineToPoint:v2];
[squarePath closePath];
CGContextTranslateCTM(c, 200, 0);
[gradient2 drawInBezierPath:squarePath angle:45];
} 
```

![两条路径之间的接缝](../Images/92d1e6fb92932b8c283930929981ca22.png)

在左侧，两个三角形填充了相同的 NSGradient。在右边，一个充满了 NSGradient 的正方形，这是我想要达到的目标。接缝是试图隐藏两个 NSBezierPath 之间的黑线，但它并没有真正起作用。在这种情况下，它几乎不可见，但如果我绘制大量这样的三角形，它将是可见的。

**编辑 Rengers 答案：**

这是没有抗锯齿的外观：

![没有抗锯齿，但问题已经转移](../Images/a6decab44b98746a5951932769b7b125.png)

从技术上讲，这是一个很好的答案，但现在的问题是，不出所料，多边形的边缘不再抗锯齿。知道如何在不丢失边缘抗锯齿的情况下消除剪切区域之间的间隙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T16:18:34.737

这可能是因为默认情况下启用了抗锯齿。您可以使用以下方法禁用它：

```
[[NSGraphicsContext currentContext] setShouldAntialias:NO]; 
```

# messaging - IBM MQ - 一对多消息流

> ID：12825344
> 
> 赞同：2
> 
> 时间：2012-10-10T17:49:33.433
> 
> 标签：messaging, ibm-mq

我的问题是关于在 IBM MQ 中使用单个队列的一对多消息流。我是 MQ 的新手。

场景 - 假设有多个进程从单个队列中读取，当它们从队列中读取消息时，它们是否都得到相同的消息。

ie - 可以说队列上没有消息，并且两个阅读器被阻止（在其上执行 MQGET）。

1.  1 条消息进入队列（逻辑上用于进程 1）。他们是否都会在等待（在其上执行 MQGET）或仅随机到一个进程时收到消息。

2.  一旦消息被读取，它就会从队列中删除。

3.  如果消息在读取后从队列中删除，则假设进程 1 正在处理并且有一条新消息为它而来，而进程 2 得到它并被删除。当进程 1 尝试获取时，它不会收到任何消息。这可能吗。

基本上我想知道如何在单个队列上管理多个进程，以便消息进入正确的进程并且不会丢失任何消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T20:21:44.650

如果不使用选择器，则多个应用程序在队列上读取消息会竞争消息。直接 FIFO 读取将消息传递给竞争的应用程序，这样任何一条消息都会被传递给一个应用程序实例。假设应用程序在同步点之外获取消息或发出`COMMIT`然后没有其他应用程序将看到该消息，它将被永久删除。

改变行为的事情包括：

*   消息选择器。如果应用程序通过`MsgID`或其他选择标准获取消息，则 QMgr 仅将满足选择的消息提供给应用程序。如果多个应用程序实例使用相同的选择标准，它们会在选择器定义的子集中竞争消息。
*   回滚。如果一个应用程序回滚一条消息，它会再次可用，并且可能会转到相同或不同的应用程序实例。
*   优先发货。行为与 FIFO 相同，只是消息按优先级排序，优先级最高的消息首先传递。
*   消息组。可以按组 ID 选择消息，并指定 GET 在组中的所有消息都存在之前不会成功。如果部分组位于队列上，则可以看到队列的深度，但没有消息传递到应用程序。

一次一个地看你的问题：

1.  消息进入队列（逻辑上用于进程 1）。他们是否都会在等待（在其上执行 MQGET）或仅随机到一个进程时收到消息。
    *排队很便宜。如果应用正在读取 FIFO，则不要将发往 App1 和 App2 的消息放在同一个队列中。跨不同应用程序（或同一应用程序的不同实例）共享队列的唯一方法是，如果从队列中读取的所有内容都使用选择器，并且选择器有效地隔离消息，以便它们进入正确的应用程序。如果甚至一个实例正在运行 FIFO，那么它就不起作用。*

2.  一旦消息被读取，它就会从队列中删除。
    *是的，只要应用程序发出一个`GET`同步点`COMMIT`或`GET`同步点之外的问题。如果应用程序浏览队列，则消息会保留下来，一旦浏览光标移开，其他应用程序就可以使用该消息。*

3.  如果消息在读取后从队列中删除，则假设进程 1 正在处理并且有一条新消息为它而来，而进程 2 得到它并被删除。当进程 1 尝试获取时，它不会收到任何消息。这可能吗。
    *绝对地。如前所述，以 FIFO 模式读取队列的应用程序或应用程序实例将竞争消息。如果确实有消息到达“进程 1”，则要么使用阻止其他进程读取消息的选择器，要么为每个实例使用不同的队列。*

# php - 使用 PHP 获取 mySQL 行项目 ID

> ID：12825351
> 
> 赞同：0
> 
> 时间：2012-10-10T17:50:05.133
> 
> 标签：php, mysql, html-table

现在我有一个显示菜单项的表，我希望管理员能够删除和编辑特定的行项目。如果我的 id 等于特定数字，我的 delete.php 代码可以正常工作，但我希望 id 等于删除按钮所在行的 id。所以我的问题是如何获得该 id 号？因为我现在做的不正确。

这是我的 delete.php 文件：

```
<?php 
$con = mysql_connect("localhost", "root", "");
if(!$con)
    {
    die('Could not connect: ' .mysql_error());
    }
mysql_select_db("bics_place", $con);

echo "mysql connected";

$myid = $_POST['id'];

$sql = "DELETE FROM menu WHERE id='$myid'";

echo "sql = $sql";

if(!mysql_query($sql, $con))
    {
    die('Error: ' .mysql_Error());
    }
echo "1 record deleted";
header("location:admin_menu.php");

mysql_close($con);

?> 
```

这是在 admin_menu.php 中制作的表格

```
 $result = mysql_query("SELECT * FROM menu");

            echo "<table border='1' id='menu'>
            <form method='post' action='delete.php'>
            <tr>
            <th> Id </th>
            <th> Type </th>
            <th> Product Name </th>
            <th> Price </th>
            <th></th>
            <th></th>
            </tr>";

            while($row = mysql_fetch_assoc($result))
              {
              echo "<tr>";
              echo "<td>" . $row['id'] . "</td>";
              echo "<td>" . $row['type'] . "</td>";
              echo "<td>" . $row['productName'] . "</td>";
              echo "<td>" . $row['price'] . "</td>";
              echo "<td>" . '<input type="submit" name="delete" value="Delete">' . "</td>";
              echo "<td>" . '<input type="submit" name="edit" value="Edit">' . "</td>";
              echo "</tr>";
              }
            echo "</form>";
            echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T17:57:50.930

在表单中使用隐藏字段。然后在提交之前将按钮 onclick 事件设置为隐藏字段。

```
<script>
function setId(idValue){
    document.getElementById('myid').value=idValue;
}
</script>
echo "<table border='1' id='menu'>
            <form method='post' action='delete.php'>
            <input type="hidden" name="id" id="myid" value="" />
            <tr>
            <th> Id </th>
            <th> Type </th>
            <th> Product Name </th>
            <th> Price </th>
            <th></th>
            <th></th>
            </tr>";

            while($row = mysql_fetch_assoc($result))
              {
              $myID = $row["id"];

              echo "<tr>";
              echo "<td>" . $row['id'] . "</td>";
              echo "<td>" . $row['type'] . "</td>";
              echo "<td>" . $row['productName'] . "</td>";
              echo "<td>" . $row['price'] . "</td>";
              echo "<td>" . '<input type="submit" name="delete" value="Delete" onClick="setId('.$myID.');">' . "</td>";
              echo "<td>" . '<input type="submit" name="edit" value="Edit">' . "</td>";
              echo "</tr>";
              }
            echo "</form>";
            echo "</table>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:55:35.957

在表单中添加一个隐藏字段 - id：

```
 while($row = mysql_fetch_assoc($result)) {
    //your <td>'s here

           echo '<input type="hidden" name="id" value="{$row[id]}">';
    // echoes for form submit
 } 
```

注意：不推荐使用 mysql_* 函数。您应该改用 mysqli_ 函数。[在这里](http://us3.php.net/mysqli)阅读

# android - Android EditText 控件滚动条

> ID：12825353
> 
> 赞同：0
> 
> 时间：2012-10-10T17:50:07.263
> 
> 标签：android, scroll, android-edittext

```
<EditText
        android:id="@+id/textbox"
        android:singleLine="true"
        android:scrollbars="horizontal"
        android:scrollHorizontally="true" />

    ((EditText)findViewById(R.id.display)).setKeyListener(null); 
```

EditText 用作某种日志框，在某些事件中会附加文本。

我需要始终将 EditText 滚动到右侧，我的意思是滚动条应位于最右侧，以便最新的文本可见。

我似乎无法完成它，不知道如何读取滚动条的当前位置并相应地调整它。

我试过玩 EditText.setScrollX() 虽然 setScrollX(10000) 没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:20:26.530

尝试

`editText.setSelection(editText.getText().length()-1);`

# jquery - 阿贾克斯互动地图

> ID：12825354
> 
> 赞同：-1
> 
> 时间：2012-10-10T17:50:09.730
> 
> 标签：jquery, ajax, map, interactive

我是这个论坛的新手，也是 jquery 和 ajax 的新手。所以，我正在尝试创建一个交互式地图。然而，在地图旁边会有一个表格（例如带有复选框）。比如说，我们有一张欧洲地图和一个带有选项的表格，例如“有海”或“有英语作为主要语言”或“有超过 [用户定义的值] 公民”等等。当用户选择一个选项时，将对数据库进行查询，查找所有满足所选标准的国家。然后，这些国家/地区会在地图上突出显示，并且可以点击，而其他国家/地区则不能。我希望在不重新加载页面的情况下发生这种情况，所以我必须使用 ajax，也许还可以使用带有 SVG 地图的 jquery。那正确吗？还有其他解决方案吗？

问题是，互联网上有什么可以修改的吗？我用谷歌搜索了它，但没有发现任何非常相似的东西。正如我所说，我在 ajax 和 jquery 方面的经验很少，所以我不能从头开始。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:26:49.747

我建议改用**Google Geochart API**。我认为它在视觉上看起来会更好，并且更容易突出国家。如果您的数据库构建良好，那么动态构建交互式地图并不难。我已经使用 geochart API 构建了一个 wp 插件，并且在后端我有一个大表单，因此用户可以输入数据，并且每次他更改字段时，地图的预览都会即时更改。因此，与您想要做的非常相似。在此处查看 api：[https ://developers.google.com/chart/interactive/docs/gallery/geochart](https://developers.google.com/chart/interactive/docs/gallery/geochart)

而且，所以你知道我能用它做什么： [http ://cmoreira.net/interactive-world-maps-demo/administration-screenshots/](http://cmoreira.net/interactive-world-maps-demo/administration-screenshots/)

希望能帮助到你！干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:33:34.100

[Google Maps API](https://developers.google.com/maps/)提供您所追求的功能。您可能需要仔细查看 Overlay 和 Layers 类，它们为您提供在地图上的某种绘图功能（例如覆盖一个区域的 poligon）。

此外，您需要将所有数据放在一个单独的位置，因为 Google Maps API 根本不提供任何数据。

我不同意@thatidiotguy，因为这看起来并不难。

1.  创建一个覆盖指定区域的多边形；
2.  在该国家/地区放置一个可点击的标记以显示任何其他相关信息。

祝你好运 ：）

# iphone - 将 UIView 顺时针旋转大于 180 度的角度

> ID：12825356
> 
> 赞同：6
> 
> 时间：2012-10-10T17:50:18.470
> 
> 标签：iphone, objective-c, ios, uiviewanimation

我正在为时钟臂设置动画，从指向 12 点到当前时间。如果是 11 点钟，我想让手臂顺时针旋转到 11 点钟的位置。但当然，如果我使用：

```
 CGAffineTransform rotation = CGAffineTransformMakeRotation(2*M_PI*11/12);

 [UIView animateWithDuration:3.0
                  animations:^{
                         clockArm.transform = rotation;
                     }]; 
```

旋转逆时针。我试过了：

```
CGFloat angle = 2*M_PI*11/12;
CGAffineTransform firstRotation = CGAffineTransformMakeRotation(M_PI-0.001);
CGFloat firstRotationTime = 3.0*(M_PI/angle);
CGAffineTransform secondRotation = CGAffineTransformMakeRotation(angle);
CGFloat secondRotationTime = 3.0 - firstRotationTime;

[UIView animateWithDuration:firstRotationTime
                      delay:0.0
                    options:UIViewAnimationCurveLinear
                 animations:^{
                         self.clockArm1.transform = firstRotation;
                     }
                 completion:^(BOOL finished) {
                     [UIView animateWithDuration:secondRotationTime
                                           delay:0.0
                                         options:UIViewAnimationCurveLinear
                                      animations:^{
                                          self.clockArm1.transform = secondRotation;
                                      }
                                      completion:^(BOOL finished){
                                      }];
                 }]; 
```

动画确实是顺时针方向的，但它很不稳定——动画似乎仍然在为第一个动画做 UIViewAnimationEaseInOut。我做错了什么，还是有另一种方法来完成我想要的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T17:19:16.043

当动画完成时，您可以使用完成块`CATransaction`来设置视图的旋转属性。以下功能在我的测试用例中起作用：

```
- (void) rotateViewAnimated:(UIView*)view
               withDuration:(CFTimeInterval)duration
                    byAngle:(CGFloat)angle
{
    [CATransaction begin];
    CABasicAnimation *rotationAnimation;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.byValue = [NSNumber numberWithFloat:angle];
    rotationAnimation.duration = duration;
    rotationAnimation.removedOnCompletion = YES;

    [CATransaction setCompletionBlock:^{
        view.transform = CGAffineTransformRotate(view.transform, angle);
    }];

    [view.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
    [CATransaction commit];
} 
```

你像这样使用它

```
[self rotateViewAnimated:self.clockArm1 withDuration:3.0 byAngle:2*M_PI*11./12.]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-07T12:03:21.110

感谢@Martin R 接受的答案。我编辑了一下：

我换了这条线

```
rotationAnimation.removedOnCompletion = YES; 
```

用这两行：

```
rotationAnimation.removedOnCompletion = NO;
rotationAnimation.fillMode = kCAFillModeForwards; 
```

然后，在 CompletionBlock 中，我又添加了一行：

```
[view.layer removeAllAnimations]; 
```

所以，代码最终变成：

```
 - (void) rotateViewAnimated:(UIView*)view
           withDuration:(CFTimeInterval)duration
                byAngle:(CGFloat)angle
    {
        [CATransaction begin];
        CABasicAnimation *rotationAnimation;
        rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
        rotationAnimation.byValue = [NSNumber numberWithFloat:angle];
        rotationAnimation.duration = duration;
        // changed by me
        rotationAnimation.removedOnCompletion = NO;
        rotationAnimation.fillMode = kCAFillModeForwards;

        [CATransaction setCompletionBlock:^{
        view.transform = CGAffineTransformRotate(view.transform, angle);
        // added by me
        [view.layer removeAllAnimations]; // this is important

        }];

    [view.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
    [CATransaction commit];

    } 
```

我的参考资料来自：

1、[https://stackoverflow.com/a/3586433/2481444](https://stackoverflow.com/a/3586433/2481444)

2、[使用 CABasicAnimation 旋转 CALayer 后，图层跳回未旋转的位置](https://stackoverflow.com/questions/1376753/after-rotating-a-calayer-using-cabasicanimation-the-layer-jumps-back-to-its-unr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:50:50.923

正如评论中提到的，试试这个[iphone UIImageView 旋转](https://stackoverflow.com/questions/1421050/iphone-uiimageview-rotation) 或[UIView Infinite 360​​ 度旋转动画？](https://stackoverflow.com/questions/9844925/uiview-infinite-360-degree-rotation-animation)

```
#import <QuartzCore/QuartzCore.h>

- (void) runSpinAnimationWithDuration:(CGFloat) duration;
{
    CABasicAnimation* rotationAnimation;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 2.0 /* full rotation*/ * rotations * duration ];
    rotationAnimation.duration = duration;
    rotationAnimation.cumulative = YES;
    rotationAnimation.repeatCount = 1.0; 
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut];

    [myView.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
} 
```

# asp.net-mvc - MVC 4 - VS 2010 安装无法更新 NuGet

> ID：12825357
> 
> 赞同：1
> 
> 时间：2012-10-10T17:50:26.703
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-4, nuget

我正在使用最新**VS 2010的机器上安装****MVC 4**并收到**NuGet 安装错误**。已安装的 NuGet 是最新可用的。我尝试安装 MVC 4，同时安装了 NuGet，但未安装。

 ****该错误要求**NuGet.msi**，但我一直找不到。

是否有任何已知问题可能导致此问题？

![在此处输入图像描述](../Images/1713af41c37a40ffa12215426fe7b76e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:11:32.697

我们也遇到了 nuget 更新的问题。此修复帮助我们：[Visual Studio 2010 SP1 Hotfix 可用](http://connect.microsoft.com/VisualStudio/Downloads/DownloadDetails.aspx?DownloadID=38654)

更多详细信息：[NuGet 包管理器](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c)

`Review current release notes/known issues on the NuGet Docs site, including details and solution for about a common upgrade failure (Visual Studio 2010 SP1 Hotfix available)`

**添加：**

您也可以尝试`Microsoft Web Platform Installer`在卸载后安装 MVC 4 `Nuget`。****

# c# - 根据 XML 中的另一个属性值选择一个属性的值

> ID：12825362
> 
> 赞同：0
> 
> 时间：2012-10-10T17:50:47.490
> 
> 标签：c#, xpath, xml-parsing

我有一个 xmlNodeList 作为

```
<Fields>
  <Field FieldId="1" Value="123" FieldTitle="id" FieldType="Text"/>
  <Field FieldId="2" Value="abc" FieldTitle="First Name" FieldType="Text"/>
  <Field FieldId="3" Value="efg" FieldTitle="Last Name" FieldType="Text"/>
</Fields> 
```

现在我想要的是

```
var id        = 123   //select the `value` if `FieldId == "1";
var firstName = abc   //select the `value` if `FieldId == "2";
var last name = efg  //select the `value` if `FieldId == "3"; 
```

**编辑：**我不想循环抛出字段并使用 if 条件检查每个字段。

一种衬垫解决方案是最受欢迎的。

**注意：**我正在处理非常大的 XML，并且它`Fields`是单个节点的一部分，并且有大约 500 个字段的数千个节点，欢迎任何其他更好的解决方案将这个更大的 XML 文件转换为插入查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:06:32.143

你可以有一个很好的想法，如何使用这段代码来完成它：

```
XDocument doc = XDocument.Load(@"XmlFile1.xml");
var elem = doc.Descendants("Field");

var id = elem.Where(c => c.Attribute("FieldId").Value.Equals("1")).Select(s => s.Attribute("Value").Value).FirstOrDefault();
var firstName = elem.Where(c => c.Attribute("FieldId").Value.Equals("2")).Select(s => s.Attribute("Value").Value).FirstOrDefault();
var lastName = elem.Where(c => c.Attribute("FieldId").Value.Equals("3")).Select(s => s.Attribute("Value").Value).FirstOrDefault(); 
```

由于无法在一行代码中分离 id、firstName 和 lastName 之间的数据，因此无法实现一种线性解决方案。

**添加：**

```
var result = doc.Descendants("Field").Select(s => new { Field = s.Parent.GetHashCode(), FieldId = s.Attribute("FieldId").Value, Value = s.Attribute("Value").Value });
foreach (var val in result.GroupBy(g => g.Field).Select(s => s))
{
    var id = result.Where(c => c.Field == val.Key && c.FieldId == "1").Select(s => s.Value).FirstOrDefault();
    var firstName = result.Where(c => c.Field == val.Key && c.FieldId == "2").Select(s => s.Value).FirstOrDefault();
    var lastName = result.Where(c => c.Field == val.Key && c.FieldId == "3").Select(s => s.Value).FirstOrDefault();
    // ... do something ...
} 
```

希望这个新添加的代码能给你一些更好的主意:)

# python - 从 pexpect 捕获输出

> ID：12825363
> 
> 赞同：5
> 
> 时间：2012-10-10T17:50:51.217
> 
> 标签：python, mathml, pexpect

我遇到了麻烦`pexpect`。我正在尝试获取`tralics`读取乳胶方程的输出并发出 MathML 表示，如下所示：

```
1 ~/ % tralics --interactivemath
This is tralics 2.14.5, a LaTeX to XML translator, running on tlocal
Copyright INRIA/MIAOU/APICS/MARELLE 2002-2012, Jos\'e Grimm
Licensed under the CeCILL Free Software Licensing Agreement
Starting translation of file texput.tex.
No configuration file.
> $x+y=z$
<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>x</mi>   <mo>+</mo><mi>y</mi><mo>=</mo><mi>z</mi></mrow></math></formula>
> 
```

所以我尝试使用 pexpect 得到公式：

```
import pexpect
c = pexpect.spawn('tralics --interactivemath')
c.expect('>')
c.sendline('$x+y=z$')
s = c.read_nonblocking(size=2000)
print s 
```

输出有公式，但开头是原始输入，最后是一些控制字符：

```
"x+y=z$\r\n<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>x</mi><mo>+</mo><mi>y</mi><mo>=</mo><mi>z</mi></mrow></math></formula>\r\n\r> \x1b[K" 
```

我可以清理输出字符串，但我必须缺少一些基本的东西。有没有更简洁的方法来获取 MathML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:50:39.357

据我了解，您正试图从 pexpect 获得此信息：

```
<formula type='inline'><math xmlns='http://www.w3.org/1998/Math/MathML'><mrow><mi>x</mi>   <mo>+</mo><mi>y</mi><mo>=</mo><mi>z</mi></mrow></math></formula> 
```

您可以使用正则表达式而不是“>”进行匹配，以获得预期的结果。这是最简单的例子：

```
c.expect("<formula.*formula>"); 
```

之后，您可以通过调用 pexpect 的 match 属性来访问匹配的字符串：

```
print c.match 
```

您也可以尝试不同的正则表达式，因为我发布的那个是一个贪婪的，如果公式很大，它可能会阻碍您的执行时间。

# c# - ContentControl 旋转装饰器渲染

> ID：12825369
> 
> 赞同：19
> 
> 时间：2012-10-10T17:51:29.923
> 
> 标签：c#, .net, wpf

我最近偶然发现了以下问题：在我的 WPF 应用程序中，我实现了一个小设计器，您可以在其中将元素放在画布上、移动、缩放和旋转它们。

在网上搜索时，我发现了[以下解决](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)此问题的方法。这个解决方案实现了按类移动、缩放和旋转，`System.Windows.Controls.Primitives.Thumb`所以我想我会根据我的应用程序调整这个解决方案并继续前进。问题是，虽然在我的机器上一切都很好，但在其他机器上却存在一些渲染问题。我已经截取了我所说的内容：

![截屏](../Images/f5257f61411f3fbc3743ef5cd744edb1.png)

我正在使用 Windows 7，即使我在其他 Windows 7 上运行我的应用程序并且它也呈现错误。我在我的机器上使用 Windows XP 和其他兼容性设置运行我的应用程序，但我无法重现此错误。这是关于什么的，我可能做错了什么？

这是我用于内容控制样式的 xaml 文件：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="clr-namespace:COMPANY.WPUI.LayoutDesignModel.Thumbs">
    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="MoveThumb.xaml"/>
        <ResourceDictionary Source="ResizeDecorator.xaml"/>
        <ResourceDictionary Source="RotateDecorator.xaml"/>
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="DesignerItemStyle" TargetType="ContentControl">
        <Setter Property="MinHeight" Value="50"/>
        <Setter Property="MinWidth" Value="50"/>
        <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
        <Setter Property="SnapsToDevicePixels" Value="true"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContentControl">
                    <Grid DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                        <Control Name="RotateDecorator" Template="{StaticResource RotateDecoratorTemplate}" Visibility="Collapsed"/>
                        <s:MoveThumb Template="{StaticResource MoveThumbTemplate}" Cursor="SizeAll"/>
                        <Control x:Name="ResizeDecorator" Template="{StaticResource ResizeDecoratorTemplate}" Visibility="Collapsed"/>
                        <ContentPresenter Content="{TemplateBinding ContentControl.Content}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Selector.IsSelected" Value="True">
                            <Setter TargetName="ResizeDecorator" Property="Visibility" Value="Visible"/>
                            <Setter TargetName="RotateDecorator" Property="Visibility" Value="Visible"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

这是 RotateDecorator.xaml 文件，碰巧会导致问题：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:s="clr-namespace:COMPANY.WPUI.LayoutDesignModel.Thumbs">

    <Style TargetType="{x:Type s:RotateThumb}">
        <Setter Property="Cursor" Value="Hand"/>
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type s:RotateThumb}">
                    <Grid Width="30" Height="30">
                        <Ellipse Width="30" Height="30" Fill="#B0B0BB" />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <ControlTemplate x:Key="RotateDecoratorTemplate" TargetType="{x:Type Control}">
        <Grid>
            <s:RotateThumb Margin="-18,-18,0,0" VerticalAlignment="Top" HorizontalAlignment="Left"/>
            <s:RotateThumb Margin="0,-18,-18,0" VerticalAlignment="Top" HorizontalAlignment="Right" />
            <s:RotateThumb Margin="0,0,-18,-18" VerticalAlignment="Bottom" HorizontalAlignment="Right" />
            <s:RotateThumb Margin="-18,0,0,-18" VerticalAlignment="Bottom" HorizontalAlignment="Left" />
        </Grid>
    </ControlTemplate>
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-22T15:36:38.430

每当看到这样的东西，我首先想到的就是显卡。某些显卡可能会出现一些奇怪的行为，特别是如果它们的驱动程序未正确安装/更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T17:13:38.487

这是由 MergedDictionaries 引起的。Diagram Designer Project 将 Move、Resize 和 Rotate 操作拆分为 3 个单独的字典。从屏幕截图中，您可以看到调整大小拇指已加载。在我的情况下，移动操作也有效，但就像问题一样，旋转拇指没有显示。没有抛出任何错误，但使用 Snoop 进行检查表明它无法找到旋转字典。

此解决方案扩展了我上面介绍的内容：[https ://stackoverflow.com/a/17083360/978622](https://stackoverflow.com/a/17083360/978622)

解决方法：将资源字典组合成一个资源字典。

# python - 从文件拆分中获取字符串

> ID：12825376
> 
> 赞同：1
> 
> 时间：2012-10-10T17:51:51.107
> 
> 标签：python, string, file

基本上我有一个文件 txt.txt

```
item1, item2 
```

在代码中我想做一个对象

```
Object(item1, item2) 
```

而且我不知道如何以我需要的方式获取`item1`和`item2`获取文件。我尝试使用`file = open("txt.txt").read()`字符串并以某种方式拆分它，但失败了。尝试将它放在一个列表中，并导致在字符串中包含和`[`其他内容。`item1``item2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T17:57:59.150

这个答案创建了一个对象列表，这些对象是通过迭代文件中的每一行并将每一行分成两个项目，然后使用它们来构造对象来创建的。

```
objects = [] #the object list
with open("path/to/file") as reader: #opens the file
    for line in reader: #iterates the lines
        objects.append(Object(*line.strip().split(", "))) #appends the objects to the list 
```

关于最后一行的更多细节，可以这样打开：

```
parts = line.strip.split(", ") #each item in the line
obj = Object(parts[0], parts[1]) #like doing Objects(item1, item2) from the line.
objects.append(obj) #add the object to the list 
```

# c# - C# 中的非整数索引索引器属性

> ID：12825378
> 
> 赞同：2
> 
> 时间：2012-10-10T17:51:57.770
> 
> 标签：c#, properties, indexed-properties

我想在 C# 中有一个索引属性：

```
public Boolean IsSelected[Guid personGuid]
{
   get {
      Person person = GetPersonByGuid(personGuid);
      return person.IsSelected;
   }
   set {
      Person person = GetPersonByGuid(personGuid);
      person.IsSelected = value;
   }
}
public Boolean IsApproved[Guid personGuid]
{
   get {
      Person person = GetPersonByGuid(personGuid);
      return person.IsApproved;
   }
   set {
      Person person = GetPersonByGuid(personGuid);
      person.IsApproved= value;
   }
} 
```

Visual Studio 抱怨非整数索引器语法：

我知道[.NET 支持非整数索引器](http://msdn.microsoft.com/en-us/library/1a8yx17k.aspx)。

* * *

用另一种语言我会写：

```
private
   function GetIsSelected(ApproverGUID: TGUID): Boolean;
   procedure SetIsSelected(ApproverGUID: TGUID; Value: Boolean);
   function GetIsApproved(ApproverGUID: TGUID): Boolean;
   procedure SetIsApproved(ApproverGUID: TGUID; Value: Boolean);
public
   property IsSelected[ApproverGuid: TGUID]:Boolean read GetIsSelected write SetIsSelected;
   property IsApproved[ApproverGuid: TGUID]:Boolean read GetIsApproved write SetIsApproved;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:57:55.017

您的语法不正确：

```
public Boolean this[Guid personGuid]
{
   get {
      Person person = GetPersonByGuid(personGuid);
      return person.IsSelected;
   }
   set {
      Person person = GetPersonByGuid(personGuid);
      person.IsSelected = value;
   }
} 
```

索引器是使用`this`关键字声明的 - 您不能使用自己的名称。

从[使用索引器（C# 编程指南）](http://msdn.microsoft.com/en-us/library/2549tw02.aspx)：

> 要在类或结构上声明索引器，请使用 this 关键字

* * *

此外，只能有一个接受类型的索引器 - 这是 C# 索引器语法的限制（可能是 IL 限制，不确定）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T17:57:13.433

索引器仅适用于`this`关键字。见[这里](http://msdn.microsoft.com/en-us/library/6x16t2tx.aspx)。

> this 关键字用于定义索引器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:03:45.950

就像 Matt Burland 和 Oded 说的，索引器只能使用这个关键字，所以你需要一个代理类，它有你需要的接口：

```
public class PersonSelector
{
    private MyClass owner;

    public PersonSelector(MyClass owner)
    {
        this.owner = owner;
    }

    public bool this[Guid personGuid]
    {
       get {
          Person person = owner.GetPersonByGuid(personGuid);
          return person.IsSelected;
       }
       set {
          Person person = owner.GetPersonByGuid(personGuid);
          person.IsSelected = value;
       }
    }

}

public class MyClass
{
    public MyClass()
    {
        this.IsSelected = new PersonSelector(this);
    }   

    public PersonSelector IsSelected { get; private set; }

    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:25:50.730

@Jojan[在这里](https://stackoverflow.com/questions/431339/c-sharp-multiple-indexers)回答：

> C# 3.0 规范
> 
> “索引器的重载允许类、结构或接口声明多个索引器，前提是它们的签名在该类、结构或接口中是**唯一的。”**

或者如果您的数据集很小，您可以使用 IList

```
public IList<Boolean> IsSelected
{
   get { ... }
}

public IList<Boolean> IsApproved
{
   get { .... }
} 
```

或使用[接口使用多个索引器技术](http://www.codeproject.com/Articles/12732/Multiple-Indexers-In-a-Class-Using-Interface-Index)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-18T14:53:21.023

实际上，您可以有多个索引器接受类型。

但是，您不能有两个具有相同签名的索引器。相同的签名意味着参数编号和类型 - 所以上面的代码有两个具有相同签名的索引器。

如果代码更改为：

```
 Boolean this[string x, Guid personguid] 
```

和 ：

```
 Boolean this[Guid personguid] 
```

它应该工作。

# php - 如何在 Vtiger 5.4 中增加 ListView 中的行高

> ID：12825382
> 
> 赞同：0
> 
> 时间：2012-10-10T17:52:13.447
> 
> 标签：php, vtiger

我是新来的，这么说的。我将不胜感激所有可能的帮助，这将帮助我了解如何充分利用 StackOVerflow。尽管我从事自由编程/设计工作，但我确实有很多问题。

所以我的第一个问题是如何在 Vtiger 5.4 中增加 ListView 中的行高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:51:16.413

您可以通过更新位于的当前主题的 style.css 来更改 ListView 中的行高

[http://www.yoursite.com/themes/your-current-theme/style.css](http://www.yoursite.com/themes/your-current-theme/style.css)

您必须将高度属性添加到名为“lvtColData”和“lvtColDataHover”的两个类中，我在 firebug 中展示了一个演示，请参见下面的快照。

![快照](../Images/d0d0b0422156a6e0f0fb2b2de9a38c0e.png) [看全尺寸](https://i.stack.imgur.com/cAUsL.png)

# c - 如何获取发送 IRP 请求的模块

> ID：12825383
> 
> 赞同：0
> 
> 时间：2012-10-10T17:52:14.767
> 
> 标签：c, module, kernel, driver, irp

我有一个内核驱动程序。我在进程中的 dll（注入的 dll）向该驱动程序发送 IRP 请求。这个驱动程序如何获得这个模块句柄？类似`IoGetRequestorProcess(Irp)`但模块句柄而不是进程的东西。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-07-10T06:44:50.943

你可以尝试一些内核 API，就像`IoGetRequestorProcess`或`IoGetRequestorProcessId`

# cookies - CURLOPT_COOKIEFILE 选项中的 Cookie 路径

> ID：12825387
> 
> 赞同：0
> 
> 时间：2012-10-10T17:52:33.387
> 
> 标签：cookies

我有一个 PHP cURL 脚本来登录网站并发布数据......

一切都很好....我只想将cookie文件的路径提供给我域中的一个文件夹，其中有许多cookie文件...

我的剧本----

[http://pastebin.com/45bRELNN](http://pastebin.com/45bRENLN)

我想要的修改......

[http://pastebin.com/KDtDYEXV](http://pastebin.com/KDtDYEXV)

这行不通... Y?? 谁能帮我吗....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T19:01:37.467

我没有得到你要找的东西。您编写的两个文档的唯一区别是您要保存 cookie 的文件夹中的 /g/。

为了将 cookie 保存在同一个文件夹中并从中读取它们，您可以使用以下代码

```
curl_setopt($ch, CURLOPT_COOKIEFILE, dirname(__FILE__). '/cookie.txt'); //read cookies from here
curl_setopt($ch, CURLOPT_COOKIEJAR, dirname(__FILE__) . '/cookie.txt'); //save cookies here 
```

希望能帮助到你。

# python - 返回 unicode 字符串的 __str__ 方法在一种环境中有效，但在另一种环境中失败

> ID：12825390
> 
> 赞同：3
> 
> 时间：2012-10-10T17:52:40.647
> 
> 标签：python

我想，我理解 unicode 和 python。但是这个问题让我很困惑。看这个小测试程序：

```
# -*- coding: utf-8 -*-

class TestC(object):

    def __str__(self):
        return u'äöü'

import sys
print sys.version
print sys.stdin.encoding
print sys.stdout.encoding    
print u'öäü' #this works
x = TestC()
print x #this doesn't always work 
```

当我从 ubuntu 上的 bash 终端运行它时，我得到以下结果：

```
2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3]
utf-8
utf-8
öäü
Traceback (most recent call last):
  File "test_mod.py", line 14, in <module>
    print x #this doesn't '
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-2: ordinal not in range(128) 
```

但是，当我在 Eclipse 中运行相同的东西（使用 pydev 模块）时，两个打印语句都可以完美运行。控制台窗口说：

```
2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3]
utf-8
utf-8
öäü
äöü 
```

有人可以向我解释问题是什么吗？为什么 __str__ 方法在一种情况下有效，而在另一种情况下无效？解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T17:56:49.637

请参阅此相关问题：[Python __str__ 与 __unicode__](https://stackoverflow.com/questions/1307014/python-str-versus-unicode)

基本上，您可能应该实现特殊方法`__unicode__`而不是`__str__`，并添加一个`__str__`调用`__unicode__`：

```
def __str__(self):
    return unicode(self).encode('utf-8') 
```

# javascript - IE8 不调用闭包返回函数

> ID：12825391
> 
> 赞同：1
> 
> 时间：2012-10-10T17:52:41.410
> 
> 标签：javascript, jquery, internet-explorer-8, closures

以下代码适用于我需要的所有东西，但 IE8 除外。一切都执行到 .load 上的闭包，返回函数永远不会被执行。

```
entries.resize_images = function(imgs) {
    for (var x = 0; x < imgs.length; x++) {
        var img = imgs[x];
        var pic_real_width, src;
        src = $(img).attr("src");
        $("<img/>") // Make in memory copy of image to avoid css issues
            .attr("src", src)
            .load(function(i) {
                return function () {
                    pic_real_width = this.width;
                    $(i).css("width", Math.round(pic_real_width * img_ratio));
                };
            }(img));
    }
}; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:53:16.317

以下是我将如何解决这个问题。我发现通读您的版本对于变量范围、传递参数和 jQuery 应用参数的特定组合有点令人困惑——这可能是您发现难以调试的原因。

1.  如果您不需要，请避免使用闭包，它们可能很复杂，容易出错，如果您不小心，还会导致内存泄漏。
2.  将 src 属性应用于图像时，我认为最好在这样做之前应用负载侦听器，但这可能只是虚构的，这只是我一直认为有意义的事情。
3.  尽可能使用 jQuery 的强大功能，因为它让您的生活更轻松 :)
4.  您不需要使用临时图像来避免 css 大小问题。
5.  IMG.complete 在图像缓存问题方面是您的朋友。

这使我想到以下内容：

```
var resizeImages = function( imgs, img_ratio ){
  /// not sure what you're passing to this function but the following
  /// should handle an array of images elms or a jQuery collection of images
  var images = ( imgs instanceof jQuery ? imgs : $().pushStack(imgs) );
  var resizeImage = function( img ){
    var cn, st, ow;
    /// make it so we can call this function in two ways
    if ( !img ) { img = $(this); }
    /// store items of the image
    cn = img.attr('class');
    st = img.attr('style');
    /// remove those items so they don't get in the way of original width
    img.attr('class','').attr('style','');
    /// get the original width
    ow = img.width();
    /// place back the things we've removed - changes wont render visibly
    /// till code execution finishes at the end of this function call.
    img.attr('class',cn);
    img.attr('style',st);
    /// apply the resize
    img.css('width', ow * img_ratio );
  }
  images.each(function(){
    var img = $(this);
    /// check if the image is already loaded, if so, resize directly
    if ( img.get(0).complete ) {
      resizeImage(img);
    }
    /// if the image isn't loaded yet, rely on an image load event
    else {
      img.load(resizeImage);
    };
  });
}; 
```

现在是不那么罗嗦的版本:)

```
var resizeImages = function( images, scale ){
  var cn, st, ow, resizeImage = function( img ){
    img = img || $(this);
    cn = img.attr('class');
    st = img.attr('style');
    ow = img.attr('class','').attr('style','').width();
    img.attr('class',cn).attr('style',st).css('width', ow * scale );
  }
  ( images instanceof jQuery ? images : $().pushStack(images) )
    .each(function(){
      ( this.complete ? resizeImage($(this)) : $(this).load(resizeImage) );
    });
};

$(function(){
  resizeImages( document.images, 0.5 );
}); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-10T17:58:50.400

**//编辑**；在得知 jQuery 对 load 方法有魔力之后，我删除了我的答案并更改了我的代码以回复给出的评论。

我们将调用我们的魔法 3 次；添加一个 Timeout 以防我们很快在我们的初始*调用*中，以便如果它实际缓存在 img 加载时执行你的魔法或最新的。

```
var img=$("<img/>");
    img
        .attr("src", src)
        .load( function(ielem) {
                var called=false,
                    doMagic=function(e) {
                        if ( !called && this.complete ){
                            //your code
                            called=true;
                            clearTimeout(tout);                                
                        }
                    },
                    tOut=setTimeout(doMagic,100);
                //try a direct call first.. whynot? browser may be ready
                doMagic.call(ielem);
                return doMagic; 
            }(img[0])
        ); 
```

是的，正如你所知道的，我更像是原生的 javascripter 与 jQueryster。它没有真正经过测试，我只是在展示方式。欢迎评论。顺便提一句。只需`+(new Date()).getTime()`在您的 src 后面添加以重新获取并始终触发加载事件。如果你不介意带宽。

# unix - -z 在 unix 中的工作

> ID：12825401
> 
> 赞同：13
> 
> 时间：2012-10-10T17:53:47.373
> 
> 标签：unix

```
if [ -z "${ABC}" ] 
then
LOGDIR=`${JAVA_HOME}/bin/java -cp ${a}/aim.jar my.app.util.GetLogDir "${rsp}"` 
```

有人可以帮我弄这个吗。这 if 到底在做什么。是否检查 abc 是否存在以及是否使用一些参数调用 GetLogDir 的 main？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-10T17:56:45.660

```
 -z string
              True if the length of string is zero. 
```

检查是否`ABC`为空。如果是，那么命令将被执行，结果将在`LOGDIR`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T17:56:26.320

从人测试：

```
 -z string                   True if  the  length  of  string
                             string is zero. 
```

# google-maps - Google Maps API：可视化我的用户随时间的增长情况

> ID：12825402
> 
> 赞同：0
> 
> 时间：2012-10-10T17:53:51.420
> 
> 标签：google-maps, google-maps-api-3, data-visualization

我最近看到[www.morethanamap.com](http://www.morethanamap.com)展示了您可以在您的一个应用程序中使用 Google 的 Map API 的各种方式。我对[人口可视化](http://www.morethanamap.com/demos/visualization/population)特别感兴趣。我有一个网站已经存在了几年，我想将我的用户群的增长映射到美国地图上。

上面的网站和他们的演示真的很有趣，但我没有找到任何关于如何实际构建/复制任何示例的文档。

所以，我的问题是：**我将如何可视化我的用户随着时间的推移相对于他们的位置的增长？** 我有以下数据：

1.  用户帐户的创建日期
2.  用户的邮政编码（也是城市和州）

我真的只是在寻找能指引我正确方向的人。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:31:14.070

您必须决定使用什么区域标准。邮政编码将在地图上拥有最多和最少的标记数量。

如果您的数据存储在 MySQL 或类似数据库中，您可以在不同的时间段查询它以获得用户数。

使用[MarkerClusterer](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)可能是最好的显示方法

# javascript - jQuery用可变组件查找ID

> ID：12825409
> 
> 赞同：2
> 
> 时间：2012-10-10T17:54:28.347
> 
> 标签：javascript, jquery

> **可能重复：**
> [jquery 或 css 选择器？选择所有以](https://stackoverflow.com/questions/5002966/jquery-or-css-selector-select-all-ids-that-start-with)

此代码更改ids 1-3 的鼠标悬停时`#idview`的`src`属性。

```
$("#id_1, #id_2, #id_3, #etc").mouseover(function(){
    $("#idview").attr("src","id_" + this.id.substr(3,4) + ".jpg");
}); 
```

如何通过“#id_”选择一个 ID，然后选择一个变量整数？例如，如果有 1000 张图像，那么在哪里写出来是不切实际的？

可能是这样的`$("#id_"+*)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T17:55:31.280

使用[属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)：

```
$("[id^='id_']").mouseover(function () {
    //Do stuff
}); 
```

在属性选择器之前澄清元素类型会更有效率，但是从您的问题中不清楚您要选择哪些元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T17:57:00.057

只需将变量整数合并到一个字符串中：

```
var integer = 2
    myid = "id_" + integer;

$( "#" + myid ) // Selector 
```

尽管如果您不需要针对特定​​ ID，那么我会选择 James 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:03:09.377

```
$('[id^="id_"]').mouseover(function(){
    $('#idview').attr('src', this.id + ".jpg"));
}); 
```

或者，您可以向要绑定的元素添加一个类，然后将其用作选择器。

```
$('.myClass').mouseover(function() {
    //...
}); 
```

# facebook - 春季社交客户端ajax登录提供程序

> ID：12825415
> 
> 赞同：2
> 
> 时间：2012-10-10T17:54:48.797
> 
> 标签：facebook, cordova, spring-security, spring-social, childbrowser

## 故事：

我在这里寻找一些社会融合专家来启发我这个难题。我的网络服务器正在使用 spring security 来验证用户登录、注册。我最近在我的网络服务器中实现了 spring social，一切都很顺利。以 fb 为例，当用户从 facebook 登录时，spring social 将构建 outh url 并将用户重定向到 facebook。一旦用户在 facebook 中通过身份验证，它会将他们重定向回我的网站。

## 谜题：

我需要实现具有相同“登录”功能的移动应用程序（html5 + phonegap）。我去了facebook集成页面。有几种方法可以对 html5 应用程序进行身份验证。我选择了服务器端实现： http: [//developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)通过客户端登录，因为我仍然需要弹簧辅助来检查我的网络服务器中是否存在电子邮件，否则重定向注册页面.

我遇到的第一个问题是在移动应用程序中重定向，我需要弹出窗口重定向到提供商登录页面而不是应用程序窗口。我设法通过 ajax 调用获取重定向 url 并在 childbrowser phonegap 插件中打开新窗口。现在的问题是，当用户通过提供者进行身份验证时，服务器没有简单的方法将“用户身份验证”通知给客户端，因为它位于单独的浏览器中。

### 示例代码

```
onFBlogin: function(){
Ext.Ajax.request({
    url: APP.domain + "api/mobile/signin/facebook.json",
    method: 'POST',
    success: function(result, request) {
    var json = JSON.parse(result.responseText);
         window.plugins.childBrowser.onLocationChange = function (url) {
            if(url==APP.domain+"api/mobile/success"){
            window.plugins.childBrowser.close();
            }
    };
    window.plugins.childBrowser.showWebPage(json.outhurl,{ showLocationBar: true });
    },
    failure: function(result, request) {
          console.log("request facebook signin redirect url" + result);
    },
});
} 
```

通常，在spring security中，如果用户通过我的rest api进行身份验证，客户端可以通过成功回调发布请求并获取经过身份验证的令牌。我可以为每个 rest api 调用重用这些令牌。根据上面的代码。我无法知道身份验证是否完成以及何时应该将令牌从服务器发送到客户端。

如果您能给我一些想法，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T18:48:03.033

我面临同样的问题。我即将尝试实现这一点：

在 Facebook 中配置您的应用程序，以便返回地址类似于 http://whatever com/receiveFacebookResponse，它基本上响应要在刚刚打开的弹出窗口上执行的 javascript 代码。此 js 代码将关闭弹出窗口并在父窗口（您的应用程序所在的窗口）上执行一项功能。此功能必须存在于您的应用程序中。您将它（及其所有参数）放在会话（或 cookie）中。这个函数应该做一个 ajax 调用来改变你的应用程序的标题，基本上是把“登录这里”消息改为“你好登录用户”（以及你可能需要的许多其他东西），并且很可能完成已启动但登录过程中断的操作。

我会试试的，我会告诉你的。如果你以其他方式做到这一点，我会很高兴听到的。

# silverlight - 在 GridValidating 事件中异步调用服务

> ID：12825417
> 
> 赞同：1
> 
> 时间：2012-10-10T17:54:56.210
> 
> 标签：silverlight, mvvm

在 Telerik GridValidating 事件中，我想异步进行服务调用。当返回的数据是异步的时，我将如何验证网格。请帮忙。我正在使用 Silverlight MVVM 模式。验证事件在 ViewModel 中，对服务的调用在另一个类（模型）中完成

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:29:43.803

您是否在 Telerik 的在线演示站点上查看过这个[RowValidation示例？](http://demos.telerik.com/silverlight/#GridView/RowValidation "行验证")

# c# - 使用实体框架更新客户数据库架构

> ID：12825420
> 
> 赞同：0
> 
> 时间：2012-10-10T17:55:23.963
> 
> 标签：c#, database-schema, sql-server-2012, entity-framework-5

我在我的 WPF 应用程序中使用 EF 5。

现在，随着我们推出第一个版本（以及客户使用的数据库），我们当然正在开发和实现功能。

其中一些可能需要更改数据库（新表、更改的数据类型等）。

是否有一些自动化的方法来自动更新客户数据库？假设当他们运行应用程序时，检查他们的 DB-Schema 是否与代码中的 DBModel-Schema 不同，如果不让它更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:52:39.597

您可能想阅读有关迁移的内容。你可以去这里[http://msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907)并且有一些关于迁移的链接。去看一下。

# php - PHP 中非常规的 .ZIP 处理和查找/替换

> ID：12825421
> 
> 赞同：0
> 
> 时间：2012-10-10T17:55:25.210
> 
> 标签：php, zip, base64

我有一个稍微非常规的任务，我试图用 PHP 中的 .ZIP 档案来完成。我有一个用于自动化任务的 zip 存档（它是 Amazon EC2 实例的启动包），其中包含许多文本和 xml 文件。我需要做的是在这些文件中查找/替换一些文本，并使用 PHP 即时输出 BASE 64 编码字符串（而不是编写新的 .zip 文件）。

我可以毫无问题地获取文件内容并使用 file_get_contents() 和 base64_encode() 或 find/replace 对它们进行 base64 编码，这是我似乎无法弄清楚的解压缩和压缩字符串。

我想避免解压缩存档、复制文件、编辑将新 .zip 写入磁盘的文件，然后获取内容并对其进行编码。我希望可能有一个看起来更像这样的解决方案：

1.  将 zip 文件的内容转换为字符串。

    ```
    $originalZipFile = file_get_contents('Path/To/ZipFile'); 
    ```

2.  将该字符串中的数据“解压缩”为一个新字符串，以公开我想要查找/替换的文本位。

    ```
    $unzippedFile = someFunction($originalZipFile); 
    ```

3.  查找和替换文本位。

    ```
    $processedString = str_replace($find, $replace, $unzippedFile); 
    ```

4.  将处理后的字符串“重新压缩”成一个新字符串。

    ```
    $rezippedFile = someOtherFunction($processedString); 
    ```

5.  Base64 编码“rezzziped”字符串。

    ```
    $desiredOutputString = base64_encode($rezippedFile); 
    ```

我查看了 PHP ZipArchive 类，但它似乎没有我正在寻找的功能。

非常感谢任何见解！

-奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:03:41.713

好吧，我相信我找到了一个很好的解决方案。对于寻找类似解决方案的任何其他人，我建议查看 Paul Duncan 的[ZipStream-PHP](http://pablotron.org/software/zipstream-php/)类。

使用此类，您可以将文件、内容和目录动态写入 zip 文件，然后将其流式传输，而无需将文件写入磁盘。

相当自动。

# javascript - 如何存储来自 Facebook SDK 登录的信息

> ID：12825422
> 
> 赞同：2
> 
> 时间：2012-10-10T17:55:26.157
> 
> 标签：javascript, facebook

我试图在我的网站中实现 Facebook Javascript SDK 登录，但需要存储有关用户的信息，以便当用户使用 Facebook 重新登录时，我会存储有关他们的信息，例如他们以前的网站内活动。我可以将它集成到 MySQL 数据库中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T06:01:32.040

我想您可能会搜索以下将记录的用户信息存储到 mysql 数据库中的方法，

```
FB.login(function(response) {
  if (response.authResponse) {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
     var fbname=response.name;
     var fbid=response.id;
     $.ajax({
     type: "POST",
     url: page_for_storing_information,
     data: "name="+fbname+"&uid="+fbid,
         success: function(msg){ 
          }
         });
    console.log('Good to see you, ' + response.name + '.');
   });
  } else {
    console.log('User cancelled login or did not fully authorize.');
  }
}); 
```

# excel - Selection.End(xlToRight) 不起作用

> ID：12825425
> 
> 赞同：1
> 
> 时间：2012-10-10T17:55:33.810
> 
> 标签：excel, vbscript

我很难让这条 VBscript 行与 excel 对象一起工作：

```
set fso=CreateObject("Scripting.FileSystemObject") 
Set WShell = CreateObject("WScript.Shell") 
Set objExcel = createobject("Excel.application") 

objexcel.Visible = true 
objexcel.Application.ScreenUpdating = True 

objexcel.Workbooks.Open dir & masterFileName 
objexcel.Activeworkbook.Worksheets("xActive_User_Ratio").Activate 
objexcel.Range("A1").Select 
objexcel.Range(Selection, Selection.End(xlToRight)).Select 
```

当我运行此代码时，出现错误：

```
Object required: 'Selection' 
```

我究竟做错了什么？任何示例都会非常有帮助。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:00:46.410

这是因为您是从 Excel 外部运行它的。

使用`objExcel.Selection`而不仅仅是`Selection`. 这样您的代码就知道 Selection 与 Excel 应用程序相关联。此外，您需要定义 xlToRight 或将其替换为它的数值。

更好的是，我会像这样使用并重写整个事情：

```
Set fso = CreateObject("Scripting.FileSystemObject")
Set WShell = CreateObject("WScript.Shell")
Set objexcel = CreateObject("Excel.application")
xlToRight = -4161 ' -4161 is the value of xlToRight
With objexcel
    .Visible = True
    .Application.ScreenUpdating = True
    'using variables for workbook and worksheet to be explicit
    Set wb = .Workbooks.Open(Dir & masterFileName)
    Set ws = wb.Worksheets("xActive_User_Ratio")
    ws.Activate
    ws.Range("A1").Select
    ws.Range(.Selection, .Selection.End(xlToRight)).Select        
End With 
```

# haskell - 有没有为 Haskell 的类型族指定返回类型的灵活方法？

> ID：12825426
> 
> 赞同：3
> 
> 时间：2012-10-10T17:55:33.920
> 
> 标签：haskell, type-families, repa

最近我开始使用 Haskell 的 Repa 库，它严重依赖于[类型族](http://www.haskell.org/ghc/docs/latest/html/users_guide/type-families.html)和相关类型。我可以像这样定义一个 Repa 数组：

```
ghci> let x = fromListUnboxed (Z :. (5 :: Int) :. (2 :: Int)) [1..10] 
```

并像这样操作它：

```
ghci> computeP $ R.map id x :: IO (Array U DIM2 Double)
AUnboxed ((Z :. 5) :. 2) (fromList [1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0]) 
```

其中 U 是一个关联的数据类型，它将导致结果被表示为一个未装箱的数组；DIM2 是数组维度。我不喜欢我必须指定一个具体的尺寸，即使它可以被推断出来。相反，我想写这样的东西：

```
ghci> computeP $ R.map id x :: Shape sh => IO (Array U sh Double) 
```

这是无效的，但我的意图是能够通过传递适当的关联数据类型（本例中为 U）来指定数组类型，但保持形状不变。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:04:51.020

这样的事情有用吗？

```
asArrayU :: Array U sh a -> Array U sh a
asArrayU = id

computeP $ asArrayU <$> R.map id x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T09:02:41.267

你的例子

```
ghci> computeP $ R.map id x :: Shape sh => IO (Array U sh Double) 
```

不起作用，因为在这里您声明结果值是多态的并且可以具有*任何可能的 shape*，但这显然是不正确的，因为`x`具有特定的形状，因此结果只能具有相同的特定形状，即`DIM2`.

你可以说的是，组合`computeP`和`R.map id`保持相同的形状，不管原来的形状是什么。IE

```
ghci> (computeP . R.map id :: Shape sh => Array U sh Double -> IO (Array U sh Double)) x
AUnboxed ((Z :. 5) :. 2) (fromList [1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0]) 
```

这里重要的部分是我们将表示锁定为未装箱的值，因为这是编译器无法自动确定的部分。

但是，如果不了解更多关于您的真实用例的信息，就很难说从语法上表达您想要什么的最佳选择是什么。您是否主要对在 GHCi 中测试东西而不指定显式类型感兴趣，或者您是否想避免在实际程序中的某处显式键入？

例如，您可以定义类似

```
computeMap :: (Unbox a, Unbox b, Shape sh) => (a -> b) -> Array U sh a -> IO (Array U sh b)
computeMap f = computeP . R.map f 
```

然后你可以说

```
ghci> computeMap id x
AUnboxed ((Z :. 5) :. 2) (fromList [1.0,2.0,3.0,4.0,5.0,6.0,7.0,8.0,9.0,10.0]) 
```

# c# - TPL DataFlow TransformBlock 输入顺序和输出顺序项不匹配

> ID：12825429
> 
> 赞同：1
> 
> 时间：2012-10-10T17:55:36.390
> 
> 标签：c#, .net, task, task-parallel-library, tpl-dataflow

编辑：按照 svick 的建议，我用一个简单的 TransformBlock 替换了自定义 IPropagatorBlock，但是，我仍然看到输入项的顺序和输出项的顺序不匹配。在我传入的 TransformBlock 实例化和 Func 下方：

```
quoteBuffer = new TransformBlock<Tuple<Symbol, int>, List<Quote>>(syncExecution, new ExecutionDataflowBlockOptions { SingleProducerConstrained = true,  MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded });

//Function that performs Sync Processing
Func<Tuple<Symbol, int>, List<Quote>> syncExecution = new Func<Tuple<Symbol, int>, List<Quote>>(partitionTuple =>
{
    Symbol symbol = partitionTuple.Item1;
    int partitionIndex = partitionTuple.Item2;

    //Read Binary Data
    byte[] byteArray = binaryDataReaders[symbol].ReadBytes(partitionIndex);

    //Deserialize and return quote list
    List<Quote> quoteList = dataInterfaces[symbol].Deserialize(symbol, byteArray);

    return quoteList;
}); 
```

这就是我发布到转换块的方式：

```
quoteBuffer.SendAsync(new Tuple<Symbol, int>(symbol, counter)); 
```

原始问题：

有人帮助我使用以下自定义转换块。这个想法是发布/发送 TInput 并以异步方式对 TInput 进行操作，而自定义转换块在返回转换后的项目时保留发布项目的顺序。

例如，如果以相应的顺序发布 1、2、3，并且变换函数对每个输入进行平方并返回项目，则正确的输出值和顺序应该是 1、4、9，而不管 3 个变换操作中的哪一个在何时完成.

但是，我怀疑代码有错误，因为输出顺序不正确。更糟糕的是，混乱的订单位置是随机的，这使得调试变得更加困难，但这反映了一个事实，即显然将输入元素转换为输出元素的任务总是以不同的方式完成。

有人可以看看并可能给出一些我在这里缺少的提示吗？谢谢

```
public static IPropagatorBlock<TInput, TOutput> CreateConcurrentOrderedTransformBlock<TInput, TOutput>(Func<TInput, TOutput> transform)
    {
        var queue = new TransformBlock<Task<TOutput>, TOutput>(t => t);

        var processor = new ActionBlock<Tuple<TInput, Action<TOutput>>>(
            tuple => tuple.Item2(transform(tuple.Item1)),
            new ExecutionDataflowBlockOptions
            {
                MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded
            });

        var enqueuer = new ActionBlock<TInput>(
            async item =>
            {
                var tcs = new TaskCompletionSource<TOutput>();
                await processor.SendAsync(
                    new Tuple<TInput, Action<TOutput>>(item, tcs.SetResult));
                await queue.SendAsync(tcs.Task);
            });

        enqueuer.Completion.ContinueWith(
            _ =>
            {
                queue.Complete();
                processor.Complete();
            });

        return DataflowBlock.Encapsulate(enqueuer, queue);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T19:07:13.030

我回答了我自己的问题，因为我发现了导致所有这些麻烦的错误。从我的 lambda 表达式可以看出，我在数据块中读取字节数组，这意味着只要并行度设置为 >1，就会同时从物理磁盘的同一文件中读取字节数组。这显然真的与读取字节的位置混淆了。我使用 br.basestream.seek(...) 设置读取操作的起点，并通过 br.readbytes(numberBytes) 读取字节。由于多个操作同时影响文件中的位置，二进制读取器很可能以无序方式读取字节，从而导致混乱。

我通过将二进制读取器从 lambda 表达式中提取出来解决了这个问题，而是将读取的字节数组传递到表达式中，并且仅将并发用于解决问题的反序列化和合并/排序目的。是的，变换块保留了顺序。感谢 svick 分享您在 tpl 数据流方面的丰富专业知识。

# actionscript-3 - 如何在 11700 帧的过程中将影片剪辑从一个位置转移到另一个位置？

> ID：12825430
> 
> 赞同：0
> 
> 时间：2012-10-10T17:55:41.950
> 
> 标签：actionscript-3, flash, actionscript

我正在尝试使影片剪辑从 X24.5 移动到 X275，从 Y400 移动到 Y100，但在 11700 帧或 6.5 分钟的过程中。我已经尝试了几个小时，但无济于事。我敢打赌，答案很简单，但我一直无法弄清楚。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:09:18.947

您可以使用 Flash 内置的[补间](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)方法对其进行补间，或者您可以尝试我对[Greensock 的 TweenLite 的](http://www.greensock.com/tweenlite/)偏好。

代码的区别如下：

**Flash 默认补间**

```
import fl.transitions.Tween;
import fl.transitions.TweenEvent;
import fl.transitions.easing.*;

myTween = new Tween(myObj, "x", Regular.easeIn, startingX, endingX, animationTiming, true);
myTween.addEventListener(TweenEvent.MOTION_FINISH, functionToCall); 
```

**TweenLite：**

```
import com.greensock.TweenLite;
import com.greensock.easing.*;

TweenLite.to(myObj, aniTiming, {x:endingX, ease:Regular.easeIn, onComplete:functionToCall}); 
```

# sqlite - 在 bash 中合并两个 SQLite 数据库

> ID：12825431
> 
> 赞同：1
> 
> 时间：2012-10-10T17:55:55.027
> 
> 标签：sqlite, bash

我有两个在 bash 文件中创建的数据库，我们称它们`1.sqlite`为`2.sqlite`. 我想将它们组合成一个新的数据库（`3.sqlite`）。bash中是否有一个命令可以做到这一点？

编辑：

sputnick 给我的答案让我走上了正轨。但我不得不将其重新排列为：

```
sqlite3 1.sqlite .dump > tempdb.sqlite 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:01:02.570

是的，试试下面的`shell`代码：

```
sqlite3 .dump 1.sqlite > dump
sqlite3 .dump 2.sqlite >> dump
sqlite3 3.sqlite < dump 
```

但是，如果它们具有相同的名称，请注意表冲突。

# telerik - 如何防止 KendoGrid 的 RemoveRow 函数出现提示？

> ID：12825438
> 
> 赞同：5
> 
> 时间：2012-10-10T17:56:12.260
> 
> 标签：telerik, kendo-ui

我正在使用 Kendo Grid 的 removeRow 函数。可以，但是总是提示“你确定要删除这条记录吗？” 每当我以编程方式删除一行时。我已经决定是否应该删除该行，所以我不希望显示此消息。谷歌搜索没有帮助，我在 StackOverflow 或 Kendo 的论坛上找不到任何类似的问题。我知道我可以更改代码，但我想知道是否有办法将网格配置为不显示它？另一种解决方案可能是暂时阻止确认提示，可能吗？不确定这是否可能。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T11:19:58.370

设置`editable.confirmation`为`false`应该可以解决问题：

```
kendoGrid( {
  editable: {
      confirmation: false
  }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:07:51.473

与此同时，我有一个我刚刚想出的解决方法。它工作正常，但有点hacky：

```
var oldConfirm = window.confirm;
window.confirm = function() { return true; };
grid.getKendoGrid().removeRow(selectedRow);
window.confirm = oldConfirm; 
```

但是，我仍然有兴趣听到任何禁用确认的信息，如果出现，我会接受它作为答案。

# doctrine-orm - zf2的模板系统？

> ID：12825441
> 
> 赞同：1
> 
> 时间：2012-10-10T17:56:28.427
> 
> 标签：doctrine-orm, zend-framework2, php

我们计划用 zf2 和教义 orm 创建一个 CMS。

实际上，我们担心我们的 cms 模板，我们希望我们的系统可以使用多个模板，并通过管理员轻松地在主题之间切换

对于最终用户开发人员来说，创建新模板应该很容易

我们想要关于如何构建模板系统的建议或建议：

有一个核心模块，还有很多子模块都有自己的 phtml，所以在哪里存储 theme1 phtml 以及在哪里存储 theme2 phtmls ...

任何建议或建议，请谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:06:26.947

我鼓励你看看[Twig](http://twig.sensiolabs.org/)，它是迄今为止我见过的最好的模板引擎 :) 学习 Twig 语法确实需要一些时间，但如果你看看你得到了什么，它是非常值得的 :)

我还不能写评论，所以我写了这个作为答案。希望这可以帮助。相信我，树枝是要走的路。Joust 查看他的文档以了解如何使用它的更具体细节！

编辑：

您尝试解决的问题与模板引擎无关。您可以使用任何模板引擎来做到这一点。如果你愿意，你甚至可以用普通的 PHP 来做到这一点。

我构建了 Web 应用程序，用户可以在其中注册，获取自己的子域，然后他们可以在那里构建自己的网页。更改主题、编辑文本、添加页面。简单的 CMS 功能。

最简单的方法是创建主题文件夹，您可以在其中存储主题，如下所示：

```
themes/
    - themeBlue
        - css/
        - images/
        - js/
        - html or views/

    - themeRose
        ... 
```

现在这是您放置所有主题的地方，每个主题都有自己的文件夹，其中包含图像、css、js 文件......

然后你会有用户，每个用户都可以选择和更改主题。该信息将存储在数据库中。您需要存储 Jack 正在使用 themeBlue 的用户。你可以随心所欲地这样做。您可以将其放在用户表中，如 user_theme 列。

现在，当有人访问网站时，您首先查询数据库以查看该用户或网络创建者使用的主题。然后从当前主题文件夹加载所有文件。并使用存储在数据库中的数据填充 html 文件，就像在任何其他 CMS 中一样。

这是最简单的实现。例如，您可以将 css 和 html 文件存储在数据库中:)

希望这能回答你的问题。祝你好运，我几乎疯狂地构建我的系统 :) 我最终编写了自己的 PHP MVC 框架角逐来完成我想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T21:47:00.707

如果您在 application.config.php 中激活另一个具有相同视图和布局（相同的文件夹结构和文件名）的模块，它的视图脚本和布局将在核心模块之后加载时自动使用。

所以你可以简单地让你的 application.config.php 动态加载只包含视图文件夹的活动模板模块。这将是一个简单有效的解决方案，无需任何其他库。

此外，您还可以使用资产管理器（如assetic）在您的（模板）模块中提供图像、css 等。（看看zf2-assetic-module，我根据assetic编写了自己的assetize-module以满足我的需求......）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T02:10:00.797

新浪，

我在我的 Application->Module.php onBootstrap 中执行此操作

```
 $ss = $serviceManager->get('application_settings_service');
    $settings = $ss->loadSettings();

    $serviceManager->get('translator');
    $templatePathResolver = $serviceManager->get('Zend\View\Resolver\TemplatePathStack'); 
    $templatePathResolver->setPaths(array(__DIR__ . '/view/'.$settings['theme'])); // here is your skin name 

    $viewModel = $application->getMvcEvent()->getViewModel();
    $viewModel->themeurl = 'theme/'.$settings['theme'].'/'; 
```

在这种情况下，我的视图文件夹中有这个结构

```
 view/
       default/
          application/
          error/
          layout/
          zfcuser/
       red/
          application/
          error/
          layout/
          zfcuser/ 
```

上面的 $viewmodel 将一个变量注入到 public_html 文件夹 /theme/red/ 中的主题 URL 的布局中，所有资源都为红色

访问 layout.phtml -> themeurl;?> 在 vi​​ewscript layout()->themeurl;?>

我仍在制定我的动态视图。现在我有一个 BaseController 并且我所有的 ActionControllers 都扩展了它。它有一个 render() 函数可以构建所需的视图，但不确定它是否可以扩展，希望尝试一些占位符的想法。

application_settings_service 是一个设置服务，它获取用于调用系统的任何域的设置，并构建一个可通过站点的任何服务感知部分访问的数组。那是一个完全不同的帖子，它可能会或可能不会摩擦 MVC 窥视错误的方式

我知道您的问题已标记为已回答，只是想我会分享

埃里克

# jquery - mvc3 + jQuery 验证：如何捕获错误或正常事件

> ID：12825443
> 
> 赞同：0
> 
> 时间：2012-10-10T17:56:29.993
> 
> 标签：jquery, asp.net-mvc-3, validation, unobtrusive-validation

我正在使用 MVC3 C#，并且我有一个带有一些数据注释的模型（验证规则）

在我的 view.cshtml 文件中，我有一个带有一些复杂逻辑的表单，它使用现有元素上的绝对坐标绘制一些图形。

当用户提交带有不正确数据的表单时，jQuery 检查会使 @Html.ValidationMessageFor(...) 的某些字段可见，现在用户可以更正数据 - 并立即使 @Html.ValidationMessageFor(...) 消息消失。

所以，这个显示/隐藏移动了其他页面元素，这个移动打破了我的绝对定位，我需要调用重绘函数（ CorrectSizesAndPos(); ）。

我怎样才能捕捉到这些讨厌的高光/非高光事件？

目前：

1.  我将 id 添加到我的表单中：

    ```
    @using (Html.BeginForm("Action1", "Controller1", FormMethod.Post, 
            new {id="VMCreateForm"})) 
    ```

2.  我添加事件来检查提交数据：

    ```
    $("#VMCreateForm").submit(function () {
        if (true == $("#VMCreateForm").valid()) {
            $(":disabled").removeAttr('disabled'); //<-- I need this to transfer data to server from some disabled fields... 
        }
        CorrectSizesAndPos();
        return true;
    }); 
    ```

3.  如果表单不好，我可以在提交之前发现：

    ```
    $(document).ready(function () {
        $("#VMCreateForm").bind('invalid-form.validate',
            function (form, validator) {
                console.log('invalid-form.validate');
                CorrectSizesAndPos();
            }
        );
     }); 
    ```

4.  我尝试在 $("#VMCreateForm").validate({ .. }) 内添加一些事件，但它们没有被调用......

当不显眼的验证显示或隐藏验证消息时，我如何捕捉到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:57:36.510

我做了几次测试，最后我找到了适合我的案例的解决方案。可能不是最佳的，但这里是：

```
 $(document).ready(function () {
        var existingValdiation = $("#VMCreateForm").validate();
        var Original_errorPlacement = existingValdiation.settings.errorPlacement;
        var Original_success = existingValdiation.settings.success;
        existingValdiation.settings.errorPlacement = function (error, element) {
            Original_errorPlacement(error, element);
            CorrectSizesAndPos();
            //console.log('errorPlacement'); //for test
        };
        existingValdiation.settings.success = function (label) {
            Original_success(label);
            CorrectSizesAndPos();
            //console.log('success'); //for test
        };
    }) 
```

# c++ - C++ 类和 .H 排序

> ID：12825453
> 
> 赞同：0
> 
> 时间：2012-10-10T17:56:51.730
> 
> 标签：c++

晚上好专家和大师！

我有一个记录以下内容的数组对象..

这是在**record.h**

```
Class Record
{
private:
string name;
int data;
float valueData;
public:
bool operator<(const Record&) const;
} 
```

并且构造函数是在**record.cpp中创建的**

record.cpp 我添加了这个

```
bool Record::operator<(const Record& rhs) const
{
return valueData < rhs.valueData;
} 
```

在 main.cpp 我创建了大小为 10 的记录数组

```
#include "record.h"

Record rec[10]; 
```

我做了

```
sort(&rec[0], &rec[2]); 
```

**但似乎没有任何变化或排序**..我有 3 个元素，rec[0]，rec[1]，rec[2]，我想对它们进行排序，但它们是另一个头文件 record.h 及其 record.cpp 描述以上。

**原始问题** 接下来是我向对象记录了几个值

现在rec得到了3个索引

```
rec[0]
name = "jack1"
data = 1
valueData = 20

rec[1]
name = "jack2"
data = 2
valueData = 15

rec[2]
name = "jack3"
data = 3
valueData = 25 
```

我想要实现的是做一个排序，可以通过**valueData**最高升序形式重新排列这个数组，所以..它将是

`rec[2]`然后.. `rec[0]`_`rec[1]`

但我想按类数组对象排序。并将值重新排列在一起，我该如何实现。

3 值是私有的，所以我不确定我在哪里创建排序函数，在 main.cpp 或在 record.cpp ，接下来是我如何对其进行排序以便它可以以下面的方式输出..

```
-- Highest to lowest --
1) Name: Jack3, Data = 3, Value =25
2) Name: Jack1 , Data =1 , Value = 20
3) Name: Jack2, Data = 2, Value = 15 
```

**感谢大家的帮助和指导！！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:41:25.933

改为这样做：

```
sort(&rec[0], &rec[3]); 
```

您只对第一个两个元素进行排序，因为按照惯例，由迭代器对定义的范围内的第二个迭代器始终指向*您*要操作的范围末尾的一个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:12:20.730

与比较两个s 的`std::sort`东西一起使用。`Record`至少有 3 种方法可以提供这种比较。

1：实现一个`operator<`on `Record`：

```
class Record
{
public:
  bool operator<(const Record& rhs) const
  {
    return valueData < rhs.valurData;
  }
}; 
```

...然后：

```
sort(&rec[0], &rec[10]); 
```

2：提供[函子](http://en.wikipedia.org/wiki/Function_object)：

```
struct compare_records : public std::binary_function<bool, Record, Record>
{
  bool operator()(const Record& lhs, const Record& rhs) const
  { 
    return lhs.valueData < rhs.valueData;
  }
}; 
```

...然后：

```
sort_if(&rec[0], &rec[10], compare_records()); 
```

3：（如果你有 C++11 编译器）使用 lambda：

```
sort_if(&rec[0], &rec[10], [](const Record& lhs, const Record& rhs) -> bool
{
  return lhs.vaklueData < rhs.valueData;
}); 
```

编辑：

这是一个完整的示例，展示了如何使用第一种方法：

```
#include <cstdlib>
#include <map>
#include <algorithm>
using namespace std;

class Record
{
public:
    string name;
    int data;
    float valueData;
public:
    bool operator<(const Record& rhs) const
    {
        return valueData < rhs.valueData;
    }
};

int main()
{
    Record rec[10];
    rec[0].name = "jack1";
    rec[0].data = 1;
    rec[0].valueData = 20;

    rec[1].name = "jack2";
    rec[1].data = 2;
    rec[1].valueData = 15;

    rec[2].name = "jack3";
    rec[2].data = 3;
    rec[2].valueData = 25;

    sort(&rec[0], &rec[3]);

    bool bk = true;
} 
```

# textfield - 空字符串或 TextField.replacetext 上的 TextField.appendText 不显示

> ID：12825456
> 
> 赞同：0
> 
> 时间：2012-10-10T17:56:58.297
> 
> 标签：textfield, flashdevelop

我有一个问题：当我在文本为空 ( "" ) 或 TextField.replaceText( 0, text.length, "some text" ) 的 TExtField 上使用 TextField.appendText( ) 时，不会显示文本，但是text 属性已正确更改。有人知道为什么吗？

例子：

```
_textField.replaceText( 0, _textField.text.length, String.fromCharCode( ke.charCode ) );    //if it is the first key, we replace the text, otherwise append to it 
```

GR，全科医生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:05:48.447

显然，我需要先使用 _textField.setSelection =o

# mysql - mySQL 查询只返回一个结果

> ID：12825463
> 
> 赞同：1
> 
> 时间：2012-10-10T17:57:23.383
> 
> 标签：mysql, database

我试图让表格中的每一行作为调查的一部分出现。以下代码仅返回表中的第一行（因此用户只能看到一个问题）。我已经一遍又一遍，看不出我做错了什么。非常感谢任何输入。

谢谢！

```
function getQuestions ($dbc) <!--$dbc=database connection-->  {
$query = "SELECT * FROM survey_questions" <!--survey_questions=table-->  ;
$result = @mysqli_query ($dbc, $query);

while ($row = mysqli_fetch_array ($result, MYSQLI_ASSOC) )  {
    $body = $row ['question_body'] <!--question_body=row in table-->  ;

        echo '
            <div class="entry">  <!--user entry form-->
            <h3 class="qTitle">'.$body.'</h3>
                <form action="index.php" method="post">
                    <input type="text" name="answer" size="85" />
                    <input type="submit" value="Submit" name="submit" />
                    <input type="hidden" name="questionid" value="questionid" />
                    <input type="hidden" name="submitted" value="1" />
                </form>
            </div> 
        ';

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:04:03.447

首先，你不需要使用 php 来回显这么多......

您必须在 PHP中使用`//`或评论，而不是因为那是 HTML`/* */``<!---->`

其次来到你的代码..

你为什么使用？

```
function getQuestions($dbc) //I dont know what this is doing here, why you are wrapping your code in a function??? 
```

你可以简单地这样写（使用 echo 打印出你的问题）：

```
<?php
$result = mysqli_query($dbc, "SELECT * FROM survey_questions");

while ($row = mysqli_fetch_array ($result) )  {
        ?>
   <div class="entry">  <!--user entry form-->
      <h3 class="qTitle"><?php echo $row['whatever']; ?></h3>
          <form action="index.php" method="post">
             <input type="text" name="answer" size="85" />
             <input type="submit" value="Submit" name="submit" />
             <input type="hidden" name="questionid" value="questionid" />
             <input type="hidden" name="submitted" value="1" />
          </form>
   </div> 
<?php
     }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:40:19.697

结果现在是两个输入表单（一种改进），但仍然没有显示数据库中两行的文本。我得到的不是行文本，而是文本应该位于的 > 字符。这是更新的代码，适应了@Mr.的建议。外星人：

```
function getQuestions($dbc) {

$result = mysqli_query($dbc, "SELECT * FROM survey_questions");

 while ($row = mysqli_fetch_array ($result) )  {
         echo ' 
              <div class="entry">  
              <h3 class="qTitle">'. $row['survey_questions'].'></h3>
                   <form action="index.php" method="post">
                        <input type="text" name="answer" size="85" >
                        <input type="submit" value="Submit" name="submit" >
                        <input type="hidden" name="questionid" value="questionid" >
                        <input type="hidden" name="submitted" value="1" >
                  </form>
             </div> 
        ';
    }
} 
```

# javascript - TinyMce 编辑器不返回标签

> ID：12825464
> 
> 赞同：1
> 
> 时间：2012-10-10T17:57:27.453
> 
> 标签：javascript, editor, tinymce, rte

H7i 伙计们，我在使用 TinyMce 编辑器时遇到了一个奇怪的问题。我要做的是选择一些文本，单击一个按钮并在开头和结尾附加一个标签。

例如，如果原始文本是`<p>hello</p>`，则结束文本是`<myTag><p>hello</p></myTag>`。

它可以正常工作，但选择单行文本时，不会返回现有标记。所以在前面的例子中，我会得到`hello`only 而不是`<p>hello</p>`。

当我选择多行时，它会返回标签。

这是我到目前为止所尝试的：

```
 var se = ed.selection.getContent(); //Doesn't return tags on single line
            var be = ed.selection.getNode().outerHtml; //Doesn't work with multiline
            var ke = ed.selection.getContent({ format: 'raw' }); //Same as the first option 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:29:05.643

您将需要使用不同的功能来获取内容，具体取决于用户选择的内容

```
var node = ed.selection.getNode();

if (node.nodeName != 'P' )
{
     content = ed.selection.getContent();
}
else content = node.outerHtml; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-24T10:22:40.660

我用这个，效果很好：

```
var textt= tinyMCE.activeEditor.selection.getContent({format : 'text'});
alert(textt); 
```

但请注意：您不应选择从段落开头到段落结尾的文本，

![enter image description here](../Images/2a4536a5d24f83707cfcda9ed3eb1d97.png)

because in that case(maybe bug of TinyMce), it cant get content .

# javascript - 将信息从 c++ cgi-script 传递到 javascript-tag 的问题

> ID：12825465
> 
> 赞同：1
> 
> 时间：2012-10-10T17:57:29.283
> 
> 标签：javascript, c++, web-applications, cgi

我尝试使用托管在本地 IIS（Win7）上的 cgi 脚本为 javascript 函数设置变量：

计算机图形学：

```
cout<<"Content-type: text/javascript\r\n\r\n";
cout<<"var value=2;"; 
```

javascript:

```
<script type="text/javascript" src="./cgi-bin/value.exe"></script>
<script type="text/javascript">
<!--
document.write('The number is: ' + value);
-->
</script> 
```

但是当我用 js-code document.write 打开 html 文件时，什么都不做。当我用萤火虫分析页面时，js-tag中有很多奇怪的字符，在这些字符中间的某个地方有我的输出：“var value = 2”。

有人知道发生了什么吗？任何帮助将不胜感激！

编辑：这里萤火虫告诉我的片段在脚本标签之间：

```
MZ�������ÿÿ��¸�������@�����

)��")��4)��F)��\)��p)��z)��)��)��)��¬)��Æ)
��Ø)��)��ô(��Ê(��¼  (��°(��¤(��(��(��(�
(��l(��^(��<(��à(����������@���������È@�û��
������bad allocation��Content-type: text/javascript
���var NumberOfFiles = 2; 

?�������������0���������������� ��H���
X@��V��ä������<assembly xmlns="urn:schemas-microsoft-com:asm.v1"
manifestVersion="1.0">
<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
<security>
<requestedPrivileges>
<requestedExecutionLevel level="asInvoker" uiAccess="false"></requestedExecutionLevel>
</requestedPrivileges>
</security>
</trustInfo>
<dependency>
<dependentAssembly>
<assemblyIdentity type="win32" name="Microsoft.VC90.CRT" 
version="9.0.21022.8" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b">
</assemblyIdentity>
</dependentAssembly>
</dependency>
/assembly>PAPADDINGXXPADDINGPADDINGXXPADDINGPADDINGXXPADDINGPADDING
XXPADDINGPADDINGXXPADDINGPADDINGXXPADDINGPADD���0������� 
```

谁能告诉这个输出来自哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:04:18.497

在这里似乎还不错。自然，您必须从 localhost（或其他服务器）运行它

**测试Cgi.html**

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="/cgi-bin/cgiBinNum.cgi"></script>
<script type="text/javascript">
    document.write('The number is: ' + value);
</script>
</head>
<body>
</body>
</html> 
```

**cgiBinNum.cpp**

```
#include <iostream>

using namespace std;

int main()
{
    cout<<"Content-type: text/javascript\r\n\r\n";
    cout<<"var value=2;";
    return 0;
} 
```

**输出：**

```
<!DOCTYPE html>
<html><head>

<script type="text/javascript" src="/cgi-bin/cgiBinNum.cgi"></script>
<script type="text/javascript">
document.write('The number is: ' + value);
</script></head><body>The number is: 2

</body></html> 
```

是的，'MZ' 会立即送人 - Mark Zbikowski。

基本上，它实际上是在提供 exe 文件本身，而不仅仅是它的结果。

如果您在十六进制编辑器中打开文件，它看起来会非常相似。

当你说，这就是你所拥有的“几乎”时，魔鬼总是在细节中。

还有更多吗？

我有 2 条建议 - (1) 提供最小的*完整*源来复制您的问题，就像我所做的那样 (2) 将文件扩展名更改为 .cgi 并更改 javascript 以反映这一点。（您还应该养成在项目中添加另一个构建目标并将其输出文件夹设置为您的 cgi-bin 文件夹的习惯，也是 cgi 的扩展名，而不是 exe）这不应该对这个问题产生影响，但通常最好不要在该文件夹中有容易执行的文件 - 很容易，因为您可以双击它们并且它们将运行，如果您使用完整路径，您始终可以从命令行运行，就像 apache 一样。

啊！刚刚意识到您正在使用 IIS - 我想您会发现这是一个搞砸了您的输出的东西。可能使第 (1) 点没有实际意义——在我看来，它更有可能是一个 IIS 设置——尽管它也可以提供文件的内容，而不是输出——仅仅基于它的扩展名。试试看！

# c# - 自定义控件上的箭头助手弹出窗口

> ID：12825468
> 
> 赞同：0
> 
> 时间：2012-10-10T17:57:53.603
> 
> 标签：c#, .net, winforms

我创建了一个自定义控件（用户控件），现在我想添加出现在大多数控件上的箭头，这些控件显示一个弹出窗口来填充一些对于正确使用控件很重要的属性。

这就是我想要实现的

![在此处输入图像描述](../Images/219faecfcfde62bdb238982b46193d51.png)

控件右上角的那个箭头。

有没有办法做到这一点？

# c++ - 除零预防：检查除数的表达式不会导致零与检查除数不为零？

> ID：12825471
> 
> 赞同：7
> 
> 时间：2012-10-10T17:58:00.390
> 
> 标签：c++, floating-point, floating-accuracy, floating-point-precision, divide-by-zero

由于减法中的浮点错误，在以下情况下是否可能除以零？

```
float x, y, z;
...
if (y != 1.0)
    z = x / (y - 1.0); 
```

换句话说，以下是否更安全？

```
float divisor = y - 1.0;
if (divisor != 0.0)
    z = x / divisor; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T19:04:49.433

假设 IEEE-754 浮点，它们是等价的。

这是 FP 算术的基本定理，对于有限的 x 和 y，x - y == 0 当且仅当 x == y，假设逐渐下溢。

如果低于正常的结果被刷新为零（而不是逐渐下溢），则该定理仅在结果 x - y 正常时才成立。因为 1.0 被很好地缩放，`y - 1.0`绝不是次正规的，所以`y - 1.0`当且仅当 y 正好是 1.0 时为零，无论如何处理下溢。

当然，C++ 不保证 IEEE-754，但该定理对于大多数“合理的”浮点系统都是正确的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T18:15:31.107

这将阻止您完全除以零，但这并不意味着仍然不会因此而结束`+/-inf`。分母可能仍然足够小，以至于答案不能用 a 表示`double`，你最终会得到 a `inf`。例如：

```
#include <iostream>
#include <limits>

int main(int argc, char const *argv[])
{
    double small = std::numeric_limits<double>::epsilon();
    double large = std::numeric_limits<double>::max() / small;
    std::cout << "small: " << small << std::endl;
    std::cout << "large: " << large << std::endl;
    return 0;
} 
```

在这个程序`small`中 是非零的，但它是如此之小以至于`large`超出了`double`和的范围`inf`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-10T18:04:11.490

两个代码片段 () 之间没有区别 - 事实上，优化器甚至可以将两个片段优化为相同的二进制代码，假设没有进一步使用该`divisor`变量。

但是请注意，除以浮点零`0.0`不会导致运行时错误，而是会产生`inf`or `-inf`。

# javascript - 为什么 IE9 会忽略这些 javascript 链接但不产生错误？

> ID：12825473
> 
> 赞同：0
> 
> 时间：2012-10-10T17:58:11.107
> 
> 标签：javascript, jquery, internet-explorer, magento, prototypejs

在此[Magento 产品页面](http://portodivino.com.br/casa-rivas-carmenere-2008)的底部，您可以看到三个选项卡（附加信息、描述和标签），但在 Internet Explorer 9 中无法在它们之间切换（即使我将该站点添加到受信任的站点组）。IE Javascript 控制台（通过 F12）不显示一个错误或警告。

**到底是怎么回事？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:09:21.223

我在去年做的一个网站上有这个 - 这不是一个新网站，对吧？一些曾经使用强制 IE9 进入 IE8 模式的技术；

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

但我使用这个线程解决了我的问题；

[http://www.magentocommerce.com/boards/viewthread/219259/#t328876](http://www.magentocommerce.com/boards/viewthread/219259/#t328876)

在这里转发链接腐烂，在`template/catalog/product/view/tabs.phtml`

您删除有序列表（ol）；

```
showContent: function(a) {
    var li = $(a.parentNode), ul = $(li.parentNode);
    ul.select('li', 'ol').each(function(el){ 
```

会成为;

```
showContent: function(a) {
    var li = $(a.parentNode), ul = $(li.parentNode);
    ul.select('li').each(function(el){ 
```

（我没有复制完整的功能，只是最后一行发生了变化）。

希望对你也有帮助。

**编辑**- 是的，我检查了 - 像这样的附属信息的文件和目录结构已经消失，但对于 CE 1.5，product/view/ 中有一个 tabs.phtml 文件

# html - 实现停靠页脚的最有效和兼容的方式

> ID：12825477
> 
> 赞同：2
> 
> 时间：2012-10-10T17:58:37.333
> 
> 标签：html, css, sticky-footer

我正在尝试在 CSS 模板中执行以下操作：

1.  当没有足够的内容来填充页面时，将页脚停靠在底部
2.  在整个宽度上拉伸页眉和页脚背景
3.  将所有内容放在页面中间

这是我的代码，在此处的帮助下创建：http: [//tinkerbin.com/lCNs7Upq](http://tinkerbin.com/lCNs7Upq)

我的问题是，我已经看到了一些实现这一目标的方法。这是最好的吗？还必须有空的 div 似乎很可惜，这是一个麻烦吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T18:45:16.167

您可以使用 CSS 修复和元素到页脚：

```
position: fixed;
bottom: 0; 
```

但是，我试图弄清楚你到底想做什么。

如果它是一个 div，你的页眉和页脚应该自动 100% 跨页。

您的中间部分可以设置为 height: auto; 通过 css 将填充视口，将页脚一直推到底部，但要做到这一点，您还必须将 body 设置为 100% 才能使其工作。

```
html, body, #content {
    height: 100%;
    min-height: 100%;
}
#header {
    height: 100px;
    width: 100%;
    background: blue;
    position: fixed;
    top: 0;
}
#content {
    height: auto;
    margin: 100px auto;
    background: green;
}
#footer {
    position: fixed;
    bottom: 0;
    height: 100px;
    width: 100%;
    background: red;
} 
```

您的 HTML 应该看起来像这样：

```
<div id="header"></div>
<div id="content"></div>
<div id="footer"></div> 
```

工作示例：http: [//jsfiddle.net/s4rT3/1/](http://jsfiddle.net/s4rT3/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T18:00:30.913

这是我见过的最好的例子：

[http://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

```
* {
  margin: 0;
}
html, body {
  height: 100%;
}
.page-wrap {
  min-height: 100%;
  /* equal to footer height */
  margin-bottom: -142px; 
}
.page-wrap:after {
  content: "";
  display: block;
}
.site-footer, .page-wrap:after {
  height: 142px; 
}
.site-footer {
  background: orange;
}
```

```
<div class="page-wrap">

  Content!

</div>

<footer class="site-footer">
  I'm the Sticky Footer.
</footer>
```

更新：在 2019 年使用 flex 是一个更好的选择。

# javascript - 多个元素的jQuery UI类切换

> ID：12825481
> 
> 赞同：1
> 
> 时间：2012-10-10T17:59:09.480
> 
> 标签：javascript, jquery, css, jquery-ui, class

我试图让 div**仅**在具有“正常”类的情况下将类从“正常”更改为“瘦”。但不知何故，他们只是来回改变，**IF**语句似乎写得完全错误:)

这是代码

```
<div class="normal">1</div>
<div class="normal">2</div>
<div class="normal">3</div>
<div class="normal">4</div>
<div class="normal">5</div>
<div class="normal">6</div> 
```

CSS：

```
.normal{
float:left;
height:200px;
width:100px;
border:1px dotted gray;
}

.thin{
float:left;
width:50px;
height:200px;
border:1px dotted gray;
background-color:#5a5a5a;
} 
```

jQuery

```
$(document.body).click(function () {
  $("div").each(function () {
    if ($(this).hasClass("normal")) {
      $(this).toggleClass("thin", 300);         //Problem here?
    } else {
      this.style.color = "red";
    }
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:39:55.033

@Egis 根据您的要求，代码应如下所示：

```
$(document.body).toggle(
    function () {
        $("div.normal").animate({
            width: "50px",
        }, "slow", function(){ $(this).addClass("thin"); });
    },
    function(){
        $("div.normal").animate({
            width: "100px",
        }, "slow", function(){ $(this).removeClass("thin"); });
    }
); 
```

**[演示](http://jsfiddle.net/eLyCA/)**

我希望这就是你要找的，祝你好运！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:03:37.217

ToggleClass ( [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/) ) 将添加和删除类。因此，您想删除“正常”类并添加“瘦”类：

```
$(this).removeClass("normal").addClass("thin"); 
```

关于动画，看起来您正在使用 jQueryUI 项目（对不起，我第一次错过了标签）：http: [//jqueryui.com/toggleClass/](http://jqueryui.com/addClass/)，它允许您指定动画持续时间。考虑到这一点，您可以包括持续时间：

```
$(this).removeClass("normal", 300).addClass("thin", 300); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:13:40.573

`'normal'`在您第一次到达您的代码块后，您没有删除该类，`if`您的代码块`div`将始终具有`'normal'` `class`，因此您的条件`if`将始终为真。

用于`removeClass`此目的。

此外，如果您想将`class`from更改`'normal'`为`'thin'`，请使用`addClass`for add`thin`而不是`toggle`。

编辑：也许这就是你想要的：

```
$(document.body).click(function () {
  $("div").each(function () {
    if ($(this).hasClass("normal")) {
      $(this).removeClass("normal");
      $(this).addClass("thin");
    }
    else if ($(this).hasClass("thin")) {
      $(this).removeClass("thin");
      $(this).addClass("normal");
    } else {
      this.style.color = "red";
    }
  });
}); 
```

# ios - 独立选择输入和输出音频路径

> ID：12825488
> 
> 赞同：5
> 
> 时间：2012-10-10T17:59:38.120
> 
> 标签：ios, audio

我愿意为 iPad 制作一个应用程序，它执行以下操作：

当耳机和 30 针连接器扬声器/麦克风同时插入时，用户可以独立选择输入和输出路径以进行实时音频流传输。

示例：
用户通过触摸事件选择输入设备作为耳机麦克风，并选择输出设备作为内部扬声器。然后，用户可以对着耳机麦克风说话，并在内部扬声器上实时听到他们的声音。

然后用户选择 30 针麦克风作为输入，耳机扬声器作为输出。同样，对着 30 针麦克风讲话并听到耳机扬声器的输出。

像下面这样的调用不起作用，因为它会自动将输入或输出更改为同一个外围设备。

```
CFStringRef audioInputOverride = kAudioSessionInputRoute_HeadsetMic;

AudioSessionSetProperty (kAudioSessionProperty_InputSource, sizeof(audioInputOverride), &audioInputOverride);

CFStringRef audioOutputOverride = kAudioSessionOutputRoute_USBAudio;

AudioSessionSetProperty (kAudioSessionProperty_OutputDestination, sizeof(audioOutputOverride),&audioOutputOverride); 
```

我可以在实时音频流中独立选择输入/输出吗？

# mongodb - Twitter 使用 MongoDB 练习并且缺少交易？

> ID：12825489
> 
> 赞同：0
> 
> 时间：2012-10-10T17:59:40.373
> 
> 标签：mongodb, twitter

我试图弄清楚 MongoDB 是否需要事务，以及为什么你不会将所有内容都放在一个文档中。我也知道 twitter 使用确实有交易的 HBase，所以我想到了一条推文和观察者。

如果我发布推文，它将毫无问题地插入。但是我或其他人如何找到我的推文？我听说 mongodb 有索引，所以也许我可以索引作者并找到我的推文，但是我无法想象如果每个人都这样做会很有效率。时间也必须被索引。

所以据我了解（我想我看到了一些推特发布的幻灯片）推特有一个“时间线”，所以每次一个人发推文时，推特都会在每个人的时间线中插入推文 ID，该时间线按日期索引，当给定用户浏览时，它会抓取可用的推文排序时间。

这将如何在 mongodb 中完成？我能想到的唯一解决方案是在推文文档中有一列写着 {SendOut:DateStamp}，完成后将其删除。如果它在第一次尝试时没有完成（检查时间戳以猜测它现在是否应该完成），那么我需要检查所有观察者，看看谁没有收到它，如果没有则插入。但也因为没有交易，我想我需要索引 SendOut 列？这个解决方案行得通吗？我如何有效地插入推文并将其提供给所有观看用户的人？（如果此解决方案不起作用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:57:45.550

听起来您正在描述类似于 pub/sub 的模型。你不能用用户最后阅读的每个用户对象来跟踪最后一篇文章（按日期）吗？用户会以相同的方式请求推文，使用包括时间在内的各种索引。

我不确定您需要交易做什么，但 Mongo 确实支持原子操作。

*[更新]*

所以换句话说，每个用户的对象都存储了最后一条推文读取/发送的日期时间。显然，您还需要订阅作者 ID 的列表。要获取新的推文，你会要求由 author_id、time 属性索引的推文，然后按时间排序。

通过使用用户对象的最后读取日期并将其用作推文集合的二级索引，我认为您不需要发布/订阅或事务来执行此操作。

不过，我可能会遗漏一些东西。

# wpf - 一个集合，两个绑定

> ID：12825492
> 
> 赞同：1
> 
> 时间：2012-10-10T17:59:43.910
> 
> 标签：wpf

是否可以将一个 ObservableCollection 绑定到同一视图中的两个 Listbox ItemsSource？

```
public ObservableCollection<CameraListBoxItem> Window1CameraListBoxItems
{
    get { return cameraListBoxItems; }
}

<ListBox x:Name="DeviceList" ItemsSource="{Binding Window1CameraListBoxItems}" />
<ListBox x:Name="DeviceList2" ItemsSource="{Binding Window1CameraListBoxItems}" /> 
```

它似乎不起作用，我不明白为什么。

**更新**

```
<DataTemplate DataType="{x:Type vm:WindowViewModel}">
    <vw:WindowView />
</DataTemplate> 
```

使用 MVVM 将视图绑定到视图模型。

```
public WindowViewModel(ObservableCollection<CameraListBoxItem> items)
{
    cameraListBoxItems = items;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:02:19.057

是的。您可以将任意数量的元素绑定到同一个源属性。

我会在输出窗口中检查绑定调试信息。这可能不起作用，因为*两个*绑定都不正确，如果`DataContext`设置不正确，可能会发生这种情况。

# javascript - 将函数句柄纳入 jquery 点击事件函数的范围问题？

> ID：12825493
> 
> 赞同：0
> 
> 时间：2012-10-10T17:59:45.647
> 
> 标签：javascript, jquery

> **可能重复：**
> [Javascript 关闭问题](https://stackoverflow.com/questions/6569005/javascript-closure-problem)

在下面的代码中，`TrueThis.aChoices[i]['CallBack']`当点击事件创建时是一个函数，当点击事件实际发生时为“false”。如何将函数引用获取到单击事件处理程序中？

**我的对象：**

```
ATK.MultiChoiceDialog = function() {

   var TrueThis = this;
   var aChoices;

   this.Show = function(sTitle,sPrompt,aChoices){
      this.aChoices = aChoices;

      var HTML = '[snip]';
      $('body').append(HTML);

      for(var i in this.aChoices)
      {      
         console.log(TrueThis.aChoices[i]['CallBack']); // shows "function"
         $('#ATKDialogButton'+i).click(function(e){
            console.log(TrueThis.aChoices[i]['CallBack']); // shows "false" ???
            if(TrueThis.aChoices[i]['CallBack'])
            {
               TrueThis.aChoices[i]['CallBack'].call(aChoices[i]['Context']);
            }
         });      
      }
   }
}; 
```

**我也试过这个：**

```
for(var i in this.aChoices)
{      
   var CB = TrueThis.aChoices[i]['CallBack'];
   console.log(CB); // function
   $('#ATKDialogButton'+i).click(function(e){
      console.log(CB); // false
      if(TrueThis.aChoices[i]['CallBack'])
      {
         TrueThis.aChoices[i]['CallBack'].call(aChoices[i]['Context']);
      }
   });      
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:20:43.487

jQuery 通过将事件数据传递给绑定到事件的回调函数来处理这种情况。

```
ATK.MultiChoiceDialog = function() {

   var TrueThis = this;
   var aChoices;

   this.Show = function(sTitle,sPrompt,aChoices){
      this.aChoices = aChoices;

      var HTML = '[snip]';
      $('body').append(HTML);

      for(var i in this.aChoices){ // in js the '{' should be on same line
         console.log(TrueThis.aChoices[i]['CallBack']); // shows "function"
          $('#ATKDialogButton'+i).click({i:i},function(e){ // data passed in with {i:i}
            console.log(TrueThis.aChoices[e.data.i]['CallBack']); // shows "function" 
            if(TrueThis.aChoices[e.data.i]['CallBack']){ // in js the '{' should be on same line
               TrueThis.aChoices[e.data.i]['CallBack'].call(aChoices[e.data.i]['Context']);
            }
         });      
      }
   }
};​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:24:22.057

感谢评论，我得到了这个工作。首先创建一个新函数来“修复” i 的值，该函数返回事件处理程序的函数。

```
this.FixI = function (i){
   return function(e){
      if(TrueThis.aChoices[i]['CallBack'])
      {
         TrueThis.aChoices[i]['CallBack'].call(TrueThis.aChoices[i]['Context']);
      }
   }
} 
```

使用新函数在循环中生成偶数处理函数：

```
for(var i in this.aChoices)
{
   $('#ATKDialogButton'+i).click(TrueThis.FixI(i));      
} 
```

**更新：**看起来 Kevin B 找到了一种 Jquery 方法来解决不需要额外的“preserver”功能的问题。

# tridion - 是否需要工作流程管理权限才能创建定义了工作流程流程的 SG？

> ID：12825498
> 
> 赞同：4
> 
> 时间：2012-10-10T18:00:04.893
> 
> 标签：tridion

我们注意到，如果对出版物没有工作流管理权限的用户尝试创建结构组并设置“工作流”选项卡上设置的“关联页面流程”，他们会收到权限错误。如果删除工作流设置，用户可以毫无问题地保存。

我认为这是产品的设计，对吧？我想验证我们没有在自定义代码中遇到什么问题。如果重要，以下是记录的内容：

无法保存结构组 (tcm:0-0-0)。您无权执行此操作。错误代码：0x80040242 (-2147220926) 调用堆栈：Tridion.ContentManager.Security.AuthorizationManager.AssertAccess(IdentifiableObjectData,Permissions,Rights) Tridion.ContentManager.CommunicationManagement.StructureGroup.OnSaving(SaveEventArgs) Tridion.ContentManager.IdentifiableObject.Save(SaveEventArgs) Tridion .ContentManager.IdentifiableObject.Save() Tridion.ContentManager.BLFacade.ContentManagement.RepositoryLocalObjectFacade.Create(UserContext,String) XMLState.Save StructureGroup.Save

谢谢，

〜华纳

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:23:36.457

是的，要将工作流程过程定义分配给项目（架构或 SG），您需要工作流程管理权限。

# oauth-2.0 - 带密码授权的 DotNetOpenAuth OAuth 2.0 授权服务器

> ID：12825501
> 
> 赞同：6
> 
> 时间：2012-10-10T18:00:26.640
> 
> 标签：oauth-2.0, dotnetopenauth

我们要基于以下角色建立自己的 OAuth 2.0 授权服务器：

*   资源服务器 - 使用 ASP.NET Web API 构建的 API
*   客户端 - 使用 ASP.NET MVC 构建的 Web 应用程序
*   资源所有者 - 最终用户

我们计划使用密码授予类型（[资源所有者密码凭据授予](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.3)），以便资源所有者将他们的凭据提交给客户端，然后客户端将发出授权请求。我们想使用基本身份验证来验证客户端请求。

我正在努力解决如何使用支持此授权类型的 DNOA 设置授权服务器。我已经下载了授权服务器示例项目，但这似乎是使用基于令牌的授权（用户直接使用授权服务器进行身份验证 - 在示例中，通过 OpenID）。

当我尝试使用提琴手发出授权请求时，我只是被重定向到登录页面，所以我假设这个示例不支持这种授权类型：

```
POST http://localhost:50172/oauth/authorize HTTP/1.1
User-Agent: Fiddler
Host: localhost:50172
Content-Length: 103

grant_type=password&client_id=sampleconsumer&client_secret=samplesecret&username=user&password=password 
```

如果我使用基本身份验证，情况也是如此。

任何帮助，将不胜感激。过去我曾成功使用 DNOA 来使用 OAuth 服务，但我发现有关设置/配置服务器的文档非常少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T05:08:53.627

看起来您正在向授权服务器的*授权端点*发送密码授权，这是错误的。授权应直接发送到*令牌端点*，该端点必须位于授权服务器不需要经过身份验证的请求即可访问的 URL（即不会导致 ASP.NET 重定向到登录页面）。

也就是说，基于 Web 的客户端应用程序要求用户输入另一个 Web 服务的密码是非常不寻常的（并且不鼓励）。到目前为止，授权代码流是您所描述的场景的首选。

# c# - XML 操作和注入

> ID：12825503
> 
> 赞同：1
> 
> 时间：2012-10-10T18:00:31.450
> 
> 标签：c#, .net, xml, xml-parsing

我有以下 XML 结构，它是 xml 文档的一部分：

```
<p:sp xmlns:p="http://schemas.openxmlformats.org/presentationml/2006/main">
....
....
....
<p:txBody>
 <a:bodyPr wrap="square" rtlCol="0" xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"><a:noAutofit />
 </a:bodyPr>
 <a:lstStyle xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" />
 <a:p xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">
   <a:endParaRPr lang="en-US" sz="1200" dirty="0">
   <a:solidFill><a:schemeClr val="tx1" />
   </a:solidFill>
   <a:latin typeface="Verdana" pitchFamily="34" charset="0" />
   <a:ea typeface="Verdana" pitchFamily="34" charset="0" />
   <a:cs typeface="Verdana" pitchFamily="34" charset="0" /></a:endParaRPr>
 </a:p>
</p:txBody>
</p:sp> 
```

我想选择**p:txBody**并想在最后注入**a:p**，我正在使用以下代码，但我收到的**txBody**不是正确的，因为我猜它是从 doc 对象中提取的，而不是从形状对象：

```
 XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable);
        nsmgr.AddNamespace("p", "http://schemas.openxmlformats.org/presentationml/2006/main");
        XmlNode txBody = shape.SelectSingleNode("//p:txBody", nsmgr); 
```

其中**shape**是具有上述 OuterXml 的 XMLNode 对象，并使用以下代码进行 xml 注入：

```
 XmlDocumentFragment fragment = doc.CreateDocumentFragment();
        string xml = "valid xml";
        fragment.InnerXml = xml;
        txBody.Append(fragment); 
```

但注射的形状不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:42:29.333

如果 xpath 给您带来错误的节点，则您的 xpath 不够具体。您需要为其提供更多信息才能获得所需的节点。IE 是什么让您想要的节点与其他节点不同？

正如你现在所拥有的，你是说给我你找到的第一个节点，它在文件中的任何位置都有 p 命名空间和节点名称**txBody**。

你有**形状。**但是**`//`**in`"//p:txBody"`说从文件的根目录开始。如果您的意思是从形状开始，请使用**`.//`**so like`".//p:txBody"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:51:58.217

使用 LINQ2XML。它完全替代了其他 XML API。

```
XElement doc=XElement.Load("yourXML.xml");
XNamespace p = "http://schemas.openxmlformats.org/presentationml/2006/main";
XNamespace s= "http://schemas.openxmlformats.org/drawingml/2006/main";

doc.Elements(p+"txBody").First().Add(new XElement(s+"tagName","value")); 
```

# php - PHP API FACEBOOK - 用户发布到 facebook 页面和个人墙

> ID：12825505
> 
> 赞同：2
> 
> 时间：2012-10-10T18:00:36.017
> 
> 标签：php, facebook, facebook-graph-api

我创建了一个比赛，提交的表格将：

1.  在 Facebook 员工的墙上写下评论和
2.  在我的页面墙上写评论

我对第 1 步没有任何问题，但第 2 步不起作用。我的代码如下：

连接.php

```
<?php
//include the Facebook PHP SDK
include_once 'facebook.php';

//instantiate the Facebook library with the APP ID and APP SECRET
$facebook = new Facebook(array(
    'appId' => 'CRYPT FOR THIS FORUM',
    'secret' => 'CRYPT FOR THIS FORUM',
    'cookie' => true
));

//Get the FB UID of the currently logged in user
$user = $facebook->getUser();

//if the user has already allowed the application, you'll be able to get his/her FB UID
if($user) {
    //start the session if needed
    if( session_id() ) {

    } else {
        session_start();
    }

    //do stuff when already logged in

    //get the user's access token
    $access_token = $facebook->getAccessToken();
    //check permissions list
    $permissions_list = $facebook->api(
        '/me/permissions',
        'GET',
        array(
            'access_token' => $access_token
        )
    );

    //check if the permissions we need have been allowed by the user
    //if not then redirect them again to facebook's permissions page
    $permissions_needed = array('publish_stream', 'read_stream');
    foreach($permissions_needed as $perm) {
        if( !isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0][$perm] != 1 ) {
            $login_url_params = array(
                'scope' => 'publish_stream,read_stream',
                'fbconnect' =>  1,
                'display'   =>  "page",
                'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
            );
            $login_url = $facebook->getLoginUrl($login_url_params);
            header("Location: {$login_url}");
            exit();
        }
    }

    //if the user has allowed all the permissions we need,
    //get the information about the pages that he or she managers
    //id pag sposiamo è 494659577226200
    $accounts = $facebook->api(
        '/me/accounts',
        'GET',
        array(
            'access_token' => $access_token
        )
    );

    //save the information inside the session
    $_SESSION['access_token'] = $access_token;
    $_SESSION['accounts'] = $accounts['data'];
    //save the first page as the default active page
    //$_SESSION['active'] = $accounts['data'][0];*/

    //redirect to manage.php
    header('Location: manage.php');
} else {
    //if not, let's redirect to the ALLOW page so we can get access
    //Create a login URL using the Facebook library's getLoginUrl() method
    $login_url_params = array(
        'scope' => 'publish_stream,read_stream',
        'fbconnect' =>  1,
        'display'   =>  "page",
        'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
    );
    $login_url = $facebook->getLoginUrl($login_url_params);

    //redirect to the login URL on facebook
    header("Location: {$login_url}");
    exit();
}

?> 
```

新帖子.php

```
<?php
//include the Facebook PHP SDK
include_once 'facebook.php';

//start the session if necessary
if( session_id() ) {

} else {
    session_start();
}

//instantiate the Facebook library with the APP ID and APP SECRET
$facebook = new Facebook(array(
    'appId' => 'CRYPT',
    'secret' => 'CRYPT',
    'cookie' => true
));

//get the info from the form
$parameters = array(
    'message' => $_POST['message'],
    'picture' => $_POST['picture'],
    'link' => $_POST['link'],
    'name' => $_POST['name'],
    'caption' => $_POST['caption'],
    'description' => $_POST['description']
);

//add the access token to it
$parameters['access_token'] = $_SESSION['active']['access_token'];

//build and call our Graph API request
$newpost = $facebook->api(
    '/494659577226200/feed',
    '/me/feed',
    'POST',
    $parameters
);

//redirect back to the manage page
header('Location: manage.php');
exit(); 
```

494659577226200 = FBPAGEID

问题是“/494659577226200/feed”，并且错误 AuthCode 200...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:23:03.073

您需要让您的用户授予您的应用`manage_pages`发布到他们代表他们管理的页面的权限。[在此处](https://developers.facebook.com/docs/authentication/permissions/)查看他们的权限文档，请参阅`Page Permissions`部分。

引用自文档： `manage_pages`

> 使您的应用程序能够检索用户管理的页面和应用程序的 access_tokens。可以通过 Graph API 调用 //accounts 来查询访问令牌。此权限仅与 Graph API 兼容，而不与已弃用的 REST API 兼容。请参阅此处以生成在 60 天后不会过期的长期页面访问令牌。

获得此权限后，您可以使用[页面访问令牌发布墙帖](https://developers.facebook.com/docs/authentication/pages/)

# javascript - 在 Body 上关闭图层，而不是在图层内单击

> ID：12825506
> 
> 赞同：0
> 
> 时间：2012-10-10T18:00:44.080
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [单击页面上除图层以外的任何位置时隐藏图层](https://stackoverflow.com/questions/12817019/hiding-a-layer-when-clicking-anywhere-on-page-except-the-layer)

我有一层说代码是：

```
<div id=id1">

<div id="id2">

textssssss colorrrrrrrr and other stuff

</div>

textssssss colorrrrrrrr and other stuff

</div> 
```

当我点击图层时我想要它继续可见，如果我点击 body 的任何其他部分，图层应该关闭。

请帮忙 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:12:01.887

尝试这个：

```
$('#id1').on('click', function (e) {
    e.stopPropagation();
    $(this).find('#id2').hide();
}); 
```

# c - TSR 程序在 windows/dos 中更改屏幕上字符的大小写

> ID：12825511
> 
> 赞同：2
> 
> 时间：2012-10-10T18:01:16.567
> 
> 标签：c, tsr

我想知道如何使用 C 更改屏幕上字符的字母。这是一个使用 dos.h 头文件的 TSR 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:42:59.667

我可能能够部分帮助我记得我早期的本科生。

在 DOS 中，地址*0xB8000000*（0xB800:0 作为段：注释中正确指出的偏移量）是文本模式视频内存的起始地址（*0xA8000000*是图形的起始地址）。写入该区域的任何内容都直接复制到VGA卡。现在屏幕上的每个字符都由两个字节组成。第一个字节是 ascii 字符，第二个是颜色。

因此，您可以有效地在 16 位 c 中获取一个远指针（因为普通的近指针不会这样做）并将其分配给上述地址。然后假设您的屏幕尺寸 (25*80) 或任何 * 2 是填充屏幕的单字节地址总数。

我记得我用上面写了一个普通的 printf 函数的等价物。

回到你的问题，你必须编写代码来循环从上面的地址开始直到屏幕大小的所有偶数地址。偶数地址，因为奇数代表颜色。它在那里检查分配的字符是否是有效的 ascii 并根据需要添加或减去，例如 'A' + 32 会让你得到 'a' 等等。

关于您的上述程序*何时*执行此操作的问题仍然存在。我相信你可以在 dos.h 中有一些中断或类似的事情，每次更改任何屏幕字符时都会触发。但这部分在我的记忆中不是很清楚。

看看这是否适合你。

# tcp - 如果一个客户端丢失连接怎么办，如何将数据从服务器发送到其他活动客户端

> ID：12825513
> 
> 赞同：0
> 
> 时间：2012-10-10T18:01:24.987
> 
> 标签：tcp

我有一台服务器和 3 个使用 executorservice 的客户端（TCP 连接）。

我正在尝试将数据从服务器 S 发送到 C1、C2 和 C3。总数据为 3000 行。

如果所有 3 个客户端都处于活动状态，那么这 3 个客户端总共可以获得 3000 行。

现在我的问题是如果 1 个客户端死了（失去连接），如何让其他两个客户端得到

剩下的所有数据？

比如C1收到了200行，我把它关掉了。如何让C2+C3接收2800行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:40:54.740

所有 TCP 会话都是独立的，因此您只需将剩余的 2800 行写入剩余的两个套接字。

Using`select(...)`将告诉您连接何时可以接受更多数据、有数据要读取或已关闭（准备好读取但有 0 个字节可用）。

一旦“选择”告诉您连接已关闭，只需将其从轮询文件描述符列表中删除并继续写入其他文件。每个都需要自己的状态来了解您写入了多少字节，因为它们可能以不同的速率流动。

# xcode - NSComboBoxTableColumn

> ID：12825515
> 
> 赞同：1
> 
> 时间：2012-10-10T18:01:28.043
> 
> 标签：xcode, macos, class

我是一名新手，正在开发一个开源应用程序，其创建者自 2008 年以来就没有对其进行更新。其中一个 .nib 文件使用`NSComboBoxTableColumn`，我不知道如何找到/复制它。有什么想法吗？

![在此处输入图像描述](../Images/b180d589e14e0853f72db0012f789965.png)

# javascript - 如何使用 jsf 数据表列中的 javascript 访问 commandLink

> ID：12825517
> 
> 赞同：0
> 
> 时间：2012-10-10T18:01:31.900
> 
> 标签：javascript, jsf-2, datatable

我的表单中有一个 jsf 数据表，就像这样。

```
<h:form id="personId">
     <h:dataTable id="hdatatable" value="#{Person.personList}" 
            border="0" cellpadding="10" cellspacing="5"
            var="per" styleClass="order-table"
            headerClass="order-table-header"
            rowClass="order-table-odd-row,order-table-even-row"
            syle="width: 950px" >

      <h:column id="tcoulm">
        <f:facet name="header">Action</f:facet>
        <h:commandLink id="editLink" value="Edit" action="#{person.editAction(per)}"/>
        <h:commandLink id="cancelLink" value="Undo" action="#{person.undoAction()}"/>
 </h:column>

</h:datatable>
</h:form> 
```

在上表中，我尝试使用 javascript 访问 Edit 和 Undo 操作。所以，我为它们分配了 Id。但是当我在 html 源代码中看到这些元素的 Id 时，就像这样。这里的意思是我猜表的第三行。我可以在源中看到列 ID。

> personId:hdatatable:3:editLink

如果我只给命令链接 ID 并在表单中给出 'prependId="false" 我仍然看到 commdndLink 的 ID 如下

> j_id1267631877_14a2c285:editLink

如果我只使用表单 ID 和 commandLink Id

> formId:j_id1267631877_14a2c285:editLink

如何准确访问数据表列中的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:34:03.243

只需使用

```
var editLink = document.getElementById("personId:hdatatable:3:editLink"); 
```

?

如果您不想单独访问它们，但想全部访问它们，那么给它们一个样式类会容易得多

```
<h:commandLink ... styleClass="editLink" /> 
```

这样您就可以通过类名来选择它们（假设是 jQuery）

```
var $editLinks = $(".editLink"); 
```

# matplotlib - 如何设置 mplot3d 的边框，并使网格线位于绘图后面？

> ID：12825519
> 
> 赞同：1
> 
> 时间：2012-10-10T18:01:40.460
> 
> 标签：matplotlib, mplot3d

我将此图作为 PySide 程序的一部分；

![在此处输入图像描述](../Images/baf22cf35a3c63e23b171d82fbd5753a.png)

我有两个问题。首先是丑陋的灰色边框。我知道我可以使用工具栏选项摆脱它，但我无法以编程方式找到它，或者在绘图时将其设为默认值......

第二个问题是它在表面顶部绘制网格线，我宁愿它没有这样做......我如何在表面下方绘制网格线？

编辑：

我使用的是 1.1.1 版；

并非所有情节类型都会发生这种情况 - 即

![在此处输入图像描述](../Images/ba98be8838d07eee0cf3840e8aa36b7d.png)

那也行。

如果我尝试绘制多个对象，那么这可能是个问题；

![在此处输入图像描述](../Images/fab6e66835f0f40702224b20cf270c95.png)

但我知道这是 mplot3d 不是尝试 3D 引擎的限制，只是一组具有*Z-Ordering*的 3D 图像，因此绘制的对象的顺序变得依赖于方向。（相同的图表 - 不同的角度：[在此处输入链接描述](https://i.imgur.com/e9PLa.jpg)）。

网格线当然应该始终位于绘图的底部，不是吗？有没有办法强迫他们这样做？

将要。

# javascript - CSS3 vs JavaScript：优势是什么？

> ID：12825520
> 
> 赞同：7
> 
> 时间：2012-10-10T18:01:43.300
> 
> 标签：javascript, html, css

似乎在 HTML5/CSS3 中，对纯 CSS 动画、效果、导航等的推动力更大。

这纯粹是因为 C/Java/etc 开发人员倾向于“错误地”使用 JavaScript（我猜主要是在语义上）？

还是 CSS 比 JavaScript 有优势？如果是这样，为什么 CSS 会更好？它更快吗？

另外，从语义上讲，CSS不应该只用于样式/定位吗？那么 CSS 是否开始超出它的设计范围？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-10T18:04:45.423

> 这纯粹是因为 C/Java/etc 开发人员倾向于“错误地”使用 JavaScript（我猜主要是在语义上）？

不，你差一点就错过了这一点。人们使用 JavaScript 的主要原因是他们希望支持尽可能多的浏览器。CSS3 是一项新技术，只有最新最好的浏览器才能理解，而 JavaScript 已经存在了几十年。

> 还是 CSS 比 JavaScript 有优势？如果是这样，为什么 CSS 会更好？它更快吗？

是的，因为浏览器最清楚如何利用系统资源来执行动画，并且在使用 CSS （例如硬件加速）本机实现它们时，它可以最好地完成这项工作。使用 JavaScript，您依赖浏览器的脚本引擎为您计算动画，这可能会变得非常昂贵。

但如上所述，最大的缺点是支持乏善可陈。

> 另外，从语义上讲，CSS不应该只用于样式/定位吗？那么 CSS 是否开始超出它的设计范围？

从广义上讲，它一直是用于演示的——将其与内容和结构分开，当 HTML 充斥着到处都是演示属性时，对于他们那个时代的任何前端开发人员来说都是开发地狱。

您描述的所有这些花哨的效果都可以很容易地归类到表示下（即它们与应用程序逻辑、业务逻辑、内容、数据等没有任何关系），因此它们应该使用 CSS 来完成似乎很合适。这将我们带到了今天的位置。

所以，总结一下：

*   当浏览器支持是最重要的优先级时使用 JavaScript（在业务应用程序中几乎总是如此）。如果转换或迁移到另一种技术的成本太高，它也经常保持原样。

*   否则，使用 CSS。当然，通常会提供 JavaScript 后备。您经常会在实验或新/启动项目中看到这一点。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-10T18:16:51.083

I can't see a VS here. Actually I think a great web app should be made mixing both of them!

I like to think about JavaScript for user interactions and CSS for design. That's how I decide which one I should use for a specific purpose.

Now days you have a lot of great works from brilliant people in order to solve the compatibility issues. E.g.: [http://modernizr.com/](http://modernizr.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:05:18.463

是的，css 比 javascript 快。此外，javascript 需要额外的 http 请求，而如果您只使用 css，则可以避免这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:03:44.313

一个主要问题是并非每个人的浏览器都启用了 Javascript。因此，如果您可以使用 HTML5/CSS3 实现相同的效果，那么它的优势在于它可以在所有现代浏览器上运行，无论它们是否启用了 Javascript。

# ipad - iOS6上的UINavigationController后退按钮弹出视图动画

> ID：12825521
> 
> 赞同：1
> 
> 时间：2012-10-10T18:01:43.690
> 
> 标签：ipad, ios6

我没有在后退按钮上添加任何过渡动画。

我的代码非常简单，如下所示，

```
 categorySubListViewController *categorySub =[[categorySubListViewController alloc] initWithNibName:@"categorySubListViewController" bundle:nil];

 categorySub.detailViewController=self.detailViewController;

 [self.navigationController pushViewController:categorySub animated:YES]; 
```

但是，popview 控制器动画是错误的，它显示如下（从上到下动画）。

![在此处输入图像描述](../Images/1bdef1df1b275572d89dadc9e51c8ffe.png)

它应该是从右到左的动画。

我的代码或 iOS 6 问题有什么问题吗？

在 iPhone iOS 6、iPad iOS 6 Portrait 上运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:21:56.593

固定的。

问题是

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;

} 
```

它应该是

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;

} 
```

# xml - phpunit 在 100 个断言处停止

> ID：12825522
> 
> 赞同：0
> 
> 时间：2012-10-10T18:01:45.600
> 
> 标签：xml, zend-framework, phpunit

我一直在努力使用 phpunit 和 zend 框架试图变得敏捷。我有一个 xml 文件，其中包含已经工作了一段时间的配置

```
<phpunit bootstrap="./bootstrap.php">
    <testsuite name="Unit test">
        <directory>./unit</directory>
    </testsuite>

    <filter>
        <whitelist>
            <directory suffix=".php">../../library/Zend</directory>
        </whitelist>
    </filter>
</phpunit> 
```

看到这是一个简单的配置文件。现在，当我达到 100 个断言（yuppi ！！）或者它是 10.00Mb 内存时，我发现 phpunit 不再评估任何类或方法。我一直有同样的输出

```
PHPUnit 3.6.3 by Sebastian Bergmann.
Configuration read from C:\folder\tests\phpunit.xml
.............................
Time: 4 seconds, Memory: 10.00Mb
OK (29 tests, 100 assertions) 
```

我在这里错过了什么吗？我也尝试过`testsuites`，`groups`但最后我不认为最后一个按预期工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:27:40.353

编写一个 phpunit 测试，输出内存限制的当前值`echo ini_get('memory_limit');`

如果是 10M 或关闭，请在 php.ini 中编辑它（设置为 -1 以完全没有限制）。

PS 确保您正在查看 php 的 cli 版本的正确配置文件。

```
php -i | grep "Loaded Config" 
```

`memory_limit`PPS一旦你确认这是问题所在，我不会在 -1 离开。我会将其设置为更大的值，例如 64M。然后，将来，如果一个完整的脚本需要更多，请再次增加它。

# objective-c - 覆盖 UIView 上的 hitTest

> ID：12825526
> 
> 赞同：1
> 
> 时间：2012-10-10T18:02:18.123
> 
> 标签：objective-c, hittest

我有一个应用程序，其中将有一个非常广泛的形式。五十个左右的条目。我的层次结构看起来像这样。由于覆盖视图，表单视图中的文本字段在单击时不会在其中获得光标：

viewController.view (UIView)

svParent (UIScrollView)

部分（UIView）

titlebar(UIView)/contentWrapper(UIScrollView) （以下兄弟姐妹是 contentWrapper 的孩子）

表单（UIView）

文本字段（UITextField）

文本字段（UITextField）

文本字段（UITextField）

...等等...

我理解在超级视图上覆盖 hitTest 的概念，以便可以访问子视图上的对象，但我不完全确定如何对其进行编程。

在我的 viewController 我添加了这个：

```
 - (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {

    NSLog(@"ok");
    return NO;
} 
```

但无论我在模拟器窗口中的哪个位置单击，都不会记录任何内容。还有什么我需要做的吗？然后有人可以澄清之后会发生什么 - 这是一些自动的事情，当正常运行时，最低的子视图将获得第一响应者状态并变为活动状态（即在文本字段可编辑的情况下）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:16:24.053

`- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event ;`

AFAIK it is implemented in UIView subclass, and not in view controller.

For better understanding hierarchy, [refer this answer](https://stackoverflow.com/a/4961492/1357774)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T18:34:16.423

首先，`hitTest:`是一个方法`UIView`，不是`UIViewController`，所以你需要一个自定义`UIView`子类在你的视图层次结构中的某个地方（可能在顶部）。

其次，该方法应该返回一个视图，而不是 a `BOOL`，因此返回`NO`没有多大意义。

# database - 根据第二个表过滤一个表中的数据，不重复

> ID：12825530
> 
> 赞同：1
> 
> 时间：2012-10-10T18:02:22.787
> 
> 标签：database, ms-access, filter, subforms

*注意：我正在使用一个大型复杂数据库，所以为了清楚起见，我简化了下面的设置。*

我对如何命名这个问题有点挣扎，因为它是一个有点复杂的问题。我希望它足够准确......

**先说一点背景：**

我有一个 Access 2010 数据库，其中包含一个名为“产品”的表和一个名为“数据集”的表之间的一对多关系（即我有一堆产品，每个产品都有多个数据集）。每个都有一个自动编号键字段（分别为 p_ID 和 d_ID）以及许多其他字段。

我有一个表单（我们称之为 frm_Main），它有两个子表单：sub_Products（基于“Products”表）和 sub_Datasets（基于“Datasets”表）。在主窗体上，我有一个控件 ctrl_SelectedProduct ，它链接到 [sub_Products]![p_ID] 以查看 sub_Products 中的哪条记录被选中/具有焦点，并且 sub_Datasets 子窗体链接到此控件，因此它只显示 Datasets 记录属于选定的产品记录。

在主窗体上，我还有一些控件用于过滤子窗体中的数据。例如，我有一个控件 ctrl_Category。我对这个控件进行了编码，因此当用户更改控件的值时，将应用一个过滤器，将 sub_Products 中的记录限制为仅 p_Category 值等于 ctrl_Category 中选择的值的那些记录。如果控件为空白，它将显示所有记录。如果基于 Products 表中的字段进行过滤，所有这些都非常有用。

**现在的问题：**

我的问题是我还希望能够根据数据集表中的字段进行过滤。例如，Datasets 有一个名为 d_Status 的字段。我希望用户能够在控件（ctrl_Status）中选择状态，并基于此：

**1)** sub_Products 将被过滤以仅显示那些具有关联数据集记录（或记录）的产品记录，其 d_Status 等于在 ctrl_Status 中选择的任何内容

然后

**2)**当在此过滤的 sub_Products 中选择 Products 记录时，sub_Datasets 将仅显示 d_Status 等于 ctrl_Status 中选择的任何内容的 Datasets 记录

我知道如何做第 2 部分。但我不知道如何让 part1 工作。由于 sub_Products 当前基于 Products 表，该表没有 d_Status 字段，因此我无法根据该字段对其进行过滤。因此，我假设我的第一步是更改我的设置，以便 sub_Products 基于组合两个表的查询（或至少添加 d_Status 字段）。

但是，如果我这样做，我会得到重复的产品记录。我不能使用查询的唯一值属性，因为如果我的产品有两个数据集，一个状态为“当前”，一个状态为“存档”，那么这些不被视为重复，并且产品信息在那里两次。如果我没有显示状态字段，它最初只显示独特的产品，但随后我不能基于该未显示的字段应用过滤器。

我还尝试将 sub_Products 基于 Totals 查询以利用 Group By 功能，但我仍然无法使其正常工作。即使我可以，我也不认为这是最好的解决方案，因为 Group By 只能有 10 个字段，而我的 Products 表有超过 10 个字段需要在 sub_Products 中显示。

我觉得我现在只是在兜圈子，不知道从这里尝试什么。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:39:53.033

你不能添加这样的东西吗？

```
Private Sub ctrl_Category_AfterUpdate()
    Form_frm_Main.Recordsource = "Select * from Products where p_ID IN(" & _
                                 "Select p_ID from Datasets where d_Status = " & _
                                 Me!ctrl_Category.Value & ")"
End Sub 
```

或者，您可以通过另一个子窗体的父窗体访问子窗体。这是一个无效的片段，只是为了给你一个想法：

```
Me.Parent.otherChildFormName.Form.Recordsource = whatever 
```

# java - 在枚举监视器上同步

> ID：12825531
> 
> 赞同：0
> 
> 时间：2012-10-10T18:02:27.420
> 
> 标签：java, monitor, synchronized

我从 1.5 读到我们可以将枚举用于单例

```
public enum Singleton {

  INSTANCE;

  //Singleton method
  public void someMethod( ) {...}
}

Singleton.INSTANCE.someMethod( ); 
```

这是否意味着枚举类型中的每个条目本身都是一个实例？如果我用一个类定义一个枚举类型，我可以在枚举类型的每个条目上使用块同步吗？

```
class smokers extends Thread{

    public enum restype{
        TOBACCO,MATCH,PAPER 
    }

    public void run(){
        if(xxxx){

        synchronized(restype.PAPER){
                    ....
            }
        }
        else
        {
            synchronized(restype.MATCH){
                    ....
            }

        }
    } 
```

这是有效的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:03:56.233

`TOBACCO,MATCH,PAPER`每个都是 type 的实例`restype`。

你不能修改枚举常量，所以不需要同步。

如果您想将它们用作对象锁，是的，它是有效的。

注意：Java 命名约定建议使用第一个字母作为类名的大写字母。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:09:42.717

你可以在`Enums` [这里](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)阅读。由于它是一个常量并且只有一个实例，因此您不需要同步。

但是，如果您使用 setter 更改成员的值，那么您将需要添加同步。

```
public enum Restype {
    TOBACCO(1), MATCH(2), PAPER(3);

    private int value = 0;//I have purposefully not declare it as final

    private Restype(int value) {
        this.setValue(value);
    }

    public void setValue(int value) {// now I can change value in multiple
                                        // threads.
        this.value = value;
    }

    public int getValue() {
        return value;
    }
} 
```

现在我将有多种方法来实现同步`setValue`，`getValue`最简单的方法是声明它们`synchronized`。

**但显然上面是滥用枚举。**

在java中，您可以在任何对象上拥有同步块，因此您也可以在枚举实例上拥有同步块。

```
synchronized (Restype.TOBACCO) {
        // Allowed not recommenced 
        //every class should define its own mutex
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:06:40.943

代码看起来有效，但如果您需要这样做，请将逻辑放入枚举中

```
public enum RestType{
    PAPER{
        public synchronized void foo(){ return true };
    },
    MATCH{
        public void foo(){ return false };
    };

    public abstract boolean foo(); //I've never see an abstract method define a 
                                   //synchronized method... so I have not 
                                   //idea if it's valid
} 
```

# drupal-7 - Drupal 7：动态为表单字段添加重复项

> ID：12825538
> 
> 赞同：1
> 
> 时间：2012-10-10T18:03:01.637
> 
> 标签：drupal-7, drupal-modules, drupal-forms

我有一个使用表单 API 生成的表单。有一个包含多个文本字段的字段集。我需要做的是有一个链接或按钮，如果用户想要将该字段集的副本添加到表单中，他们可以单击该链接或按钮，以便他们可以将另一组类似信息添加到表单中。这实质上是允许他们添加多条记录，而不必单独添加每条记录。在 Drupal 7 中使用 Forms API 添加这种功能有什么好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:24:44.333

在示例模块包中有一个很好的例子：

[http://api.drupal.org/api/examples/ajax_example%21ajax_example_graceful_degradation.inc/function/ajax_example_add_more/7](http://api.drupal.org/api/examples/ajax_example%21ajax_example_graceful_degradation.inc/function/ajax_example_add_more/7)

这有点复杂，但有很好的记录，所以你应该能够跟随。

您还需要查看相关菜单回调的整个 ajax_example 模块（[http://drupal.org/project/examples](http://drupal.org/project/examples)的一部分）。

# extjs - Ext.ux.Exporter.Button 不使用 ExtJS 导出带有数据的 excel

> ID：12825539
> 
> 赞同：1
> 
> 时间：2012-10-10T18:03:03.230
> 
> 标签：extjs, export-to-excel, extjs3

我正在尝试在 excel 或 .xls 中导出 Ext.Grid，但由于某种原因，它不会在 Mac 中获取数据。该文件在 Windows 中以 .xlt 格式导出，不会在 MS Office excel 中打开。虽然导出的文件在 Ubuntu 中导出并使用 Libre 打开时包含所有数据。

我正在使用 github 中提供的[Ext.ux.Exporter](https://github.com/edspencer/Ext.ux.Exporter)。该文件是执行所有工作的 Exporter-all.js。我真的很困惑我哪里错了？

这是excel导出按钮上的代码，

```
var grid = new Ext.grid.GridPanel({
    title: "Intersected Species Info",
    store: stor,
    width: 585,
    height: 260,
    stripeRows: true,
    tbar: [],
    columns: columns,
    listeners: {
        render: function (grid) {
            grid.getSelectionModel().selectFirstRow();
        }
    }
});

var exportCSV = new Ext.ux.Exporter.Button({
    component: grid,
    text: 'Download CSV'
});

grid.getTopToolbar().add(exportCSV); 
```

这是我导入 js 文件的地方，

`<script src="../exporter/Exporter-all.js" type="text/javascript"></script>`

我哪里不对？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T03:20:49.053

如果我没记错的话，您使用的那个 github 存储库适用于 ExtJS 3。您可以改用此[https://github.com/iwiznia/Ext.ux.Exporter](https://github.com/iwiznia/Ext.ux.Exporter)。

[请记住使用此](http://www.sencha.com/forum/showthread.php?136598-Export-store-to-Excel&p=773479&viewfull=1#post773479)替换 excelFormatter 文件夹中的 Style.js

很抱歉抛出一堆链接，但[这个](http://www.sencha.com/forum/showthread.php?136598-Export-store-to-Excel)线程解释得很好。您也可以按照[此处](http://www.sencha.com/forum/showthread.php?136598-Export-store-to-Excel&p=658711&viewfull=1#post658711)的示例进行操作。

# mysql - MIME 电子邮件 - While 循环 - 数据库 - 错误

> ID：12825542
> 
> 赞同：3
> 
> 时间：2012-10-10T18:03:11.340
> 
> 标签：mysql, while-loop, mime

**已解决：安装 PHPMailer 后，它现在可以工作了。**

* * *

我正在尝试使用 MIME 电子邮件向大量成员发送邮件。看到我的网络主机对一个功能可以在他们的服务器上运行多长时间有限制，我不得不调整旧功能。这就是我希望它的工作方式：

1.  从数据库表中获取每个成员的电子邮件地址，并使用所有这些电子邮件地址创建一个新表。
2.  在新表中，我还创建了两个名为“Sent”和“Error”的属性。
3.  我打算在这个功能上使用[Cron 。](https://en.wikipedia.org/wiki/Cron)这样每一行电子邮件地址最终都将设置为 Sent = True(1) 或 Error = True (1)。

只有一个问题。我尝试在 4 个电子邮件地址上对此进行测试。当其中一个返回错误时，以下所有电子邮件地址都会收到相同的错误。

错误消息示例：

```
Error: 501 : malformed address: �&gt; may not follow **Probably caused of ÆØÅ**
Error: 501 : domain missing or malformed  **Because @service.com is missing** 
```

ETC..

输出示例：

```
1: Before function. Error value: 
1: After function. Error value: 501 : domain missing or malformed
2012-10-10 20:07:46 : 1: MemberID: 1, Mail:testme
Error: 501 : domain missing or malformed 

2: Before function. Error value: 
2: After function. Error value: 501 : domain missing or malformed
2012-10-10 20:07:46 : 2: MemberID: 2, Mail:testme@gmail.com
Error: 501 : domain missing or malformed 

3: Before function. Error value: 
3: After function. Error value: 501 : domain missing or malformed
2012-10-10 20:07:46 : 3: MemberID: 3, Mail:testme@hotmail.com
Error: 501 : domain missing or malformed* 
```

我不明白为什么会这样。

```
######################################
### START NEW MAIL FUNCTION   ####
######################################
##############################################
### Deletes table if already exists   ####
##############################################

$dropExistingTable = "DROP TABLE IF EXISTS $databaseTableNameContainingMembers";
mysql_query($dropExistingTable) or die(mysql_error());

####################################
### Creating new table  ####
####################################
$queryCreateTable = "CREATE TABLE $databaseTableNameContainingMembers(ID mediumint(6) NOT NULL AUTO_INCREMENT, Mail TEXT, MailSent BOOLEAN DEFAULT 0, Error BOOLEAN DEFAULT 0, PRIMARY KEY (ID))";
mysql_query($queryCreateTable) or die(mysql_error());

####################################
### Filling new table   ####
####################################
//Now we fill the new table with all our members (MemberID, Mail, Sendt = 0).

while ($medlem = mysql_fetch_array($query_medlem)) {
    //insert all member mails to new table
    $memberMail = $medlem["Epost"];
    $queryInsertMemberToNewTable = "INSERT INTO $databaseTableNameContainingMembers (`Mail`) VALUES ('" . $memberMail . "')";
    mysql_query($queryInsertMemberToNewTable) or die(mysql_error());
}

######################################
### Sending function      ####
######################################

function sendMail($table, $email_message) {
##########################################
###     Selecting the new table       ####
##########################################
    $querySelectAllMembersThatHasNotAlreadyBeenSentTo = "SELECT * FROM $table WHERE `MailSent` = 0 AND `Error` = 0";

//Selects all members that havent been sendt mail to yet.

    $allMembersThatHasNotAlreadyBeenSentTo = mysql_query($querySelectAllMembersThatHasNotAlreadyBeenSentTo) or die("Problem with selecting table. <br>" . mysql_error());

    $i = 1;
    while ($row = mysql_fetch_array($allMembersThatHasNotAlreadyBeenSentTo)) {

        $to_address = $row["Mail"];
        $memberId = $row["ID"];

       $email_message->SetEncodedEmailHeader("To", $to_address, ""); 

        $error = "";
        echo $i . ": Before function. Error value: " . $error . "</br></br>";
        $error = $email_message->Send();
        echo $i . ": After function. Error value: " . $error . "</br></br>";
        echo "</br>";

        if (strcmp($error, "") > 0) {
            ##########################################################
            ###      IF ERROR UPDATE MEMBER VARIABLE "Error"      ####
            ##########################################################
            updateErrorToMember($memberId, $table, 1);
            echo date("Y-m-d H:i:s") . " : " . $i . ": MemberID: " . $memberId . ", Mail:" . $to_address . "</br>Error: $error </br></br></br>";
        } else {
            ##################################################################
            ###    IF SENDING SUCCEEDS UPDATE MEMBER VARIABLE "Sent"      ####
            ##################################################################
            updateSentToMember($memberId, $table);
            echo date("Y-m-d H:i:s") . ": " . $i . " :  Message sent to $to_address<br></br>";
        }
        $i++;
    } //while
}//function

######################################
###    End of sending function    ####
######################################
######################################
###     Run sending function      ####
######################################
sendMail($databaseTableNameContainingMembers, $email_message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:39:21.380

您没有`$email_message`在每次发送后清除对象，您使用的是相同的`$email_message`对象，只是附加新地址并发送，如果其中一个地址不正确，您会将错误传递给以下收件人。

您可以尝试替换以下代码：

```
$email_message->SetEncodedEmailHeader("To", $to_address, ""); 
```

对于这个：

```
$email_message->ClearAddresses();
$email_message->AddAddress($to_address, $to_address); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:22:25.613

```
$headers = "MIME-Version: 1.0"."\r\n";
$headers .= "Content-type:text/html; charset=utf-8"."\r\n";
$headers .= "Reply-To: ". $from . "\r\n";
$headers .= "From: ".$from."\r\n";
$message = '<html><body>';
$message .= stripslashes($msg);
$message .= '</body></html>';

if(mail($to_address, $subject, $message, $headers)){
    updateSentToMember($memberId, $table);
    echo date("Y-m-d H:i:s") . ": " . $i . " :  Message sent to $to_address<br></br>";
}else{
    updateErrorToMember($memberId, $table, 1);
    echo date("Y-m-d H:i:s") . " : " . $i . ": MemberID: " . $memberId . ", Mail:" . $to_address . "</br>Error: $error </br></br></br>";
} 
```

试试这个 PHP mail() 函数，如果它运行良好，那么我可以确定问题出在 phpMailer 类中。

# configuration - 以编程方式设置 hadoop 作业配置

> ID：12825547
> 
> 赞同：0
> 
> 时间：2012-10-10T18:03:36.363
> 
> 标签：configuration, hadoop, mapreduce

我正在为减少子级获取 OOM 异常（Java 堆空间）。我在文档中读到将值`mapred.reduce.child.java.opts`增加到 -Xmx512M 或更多会有所帮助。由于我不是管理员，因此我无法更改 mapred-site.xml 中的该值。我想通过 java 程序仅为我的工作设置该值。我尝试使用`Configuration`如下的类设置它，但这不起作用。

`Configuration config = new Configuration(); config.set("mapred.reduce.child.java.opts", "-Xmx512M"); JobConf conf1 = new JobConf(config, this.getClass());`

Hadoop的版本是1.0.3

以编程方式设置配置值的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T01:32:16.733

正如@ThomasJungblut 和@octo 所指出的，我在问题中提到的程序是正确的做法。OOM 异常仍然存在，所以我会开始一个新线程而不是继续在这里。

# java - FindBugs 拒绝在类路径上找到 bcel jar

> ID：12825551
> 
> 赞同：7
> 
> 时间：2012-10-10T18:03:52.440
> 
> 标签：java, ant, findbugs

对于我的一生，我试图让 FindBugs (2.0.1) 作为我的命令行 Ant 构建的一部分运行。我下载了 FindBugs JAR 并将其解压缩到 /home/myuser/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1：

![在此处输入图像描述](../Images/4a82ea587c51f8fcd0dcbbee08428663.png)

正如您在屏幕截图中看到的那样，在 /home/myuser/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1/lib 下有一个名为 的 JAR `bcel-1.0.jar`，如果打开它，您可以看到我已经深入到一个名为`org.apache.bcel.classfile.ClassFormatException`. 保持这个想法。

然后我将 /home/myuser/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1/lib/findbugs-ant.jar 复制到 ${env.ANT_HOME}/lib 以使其可以访问从命令行运行的 Ant（而不是 Eclipse 内置的 Ant 实例）。

我的项目目录结构如下：

```
/home/myuser/sandbox/workbench/eclipse/workspace/myapp/
    src/
        main/
            java/
        test/
            java/
    build/
        build.xml
        build.properties
    gen/
        bin/
            main/ --> where all main Java class files compiled to
            test/ --> where all test Java class files compiled to
        audits/
            qual/
        staging/ 
```

内部`build.xml`：

```
<project name="myapp-build" basedir=".." default="package"
    xmlns:fb="antlib:edu.umd.cs.findbugs">

    <path id="findbugs.source.path">
        <fileset dir="src/main/java">
            <include name="**.*java"/>
        </fileset>
        <fileset dir="src/main/test">
            <include name="**.*java"/>
        </fileset>
    </path>

    <taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"
        uri="antlib:edu.umd.cs.findbugs"/>

    <!-- Other Ant target omitted for brevity. -->

    <target name="run-findbugs">
        <!-- Create a temp JAR that FindBugs can use for analysis. -->
        <property name="fb.tmp.jar" value="gen/staging/${ant.project.name}-findbugs-temp.jar"/>
        <echo message="Creating ${fb.tmp.jar} for FindBugs."/>
        <jar destfile="gen/staging/${ant.project.name}-findbugs-temp.jar">
            <fileset dir="gen/bin/main" includes="**/*.class"/>
            <fileset dir="gen/bin/test" includes="**/*.class"/>
        </jar>

        <echo message="Conducting code quality tests with FindBugs."/>
        <fb:findbugs home="/home/myuser/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1"
            output="html" outputFile="gen/audits/qual/findbugs.html" stylesheet="fancy-hist.xsl" failOnError="true">
            <sourcePath refid="findbugs.source.path"/>
            <class location="${fb.tmp.jar}"/>
        </fb:findbugs>
    </target>

    <target name="echoMsg" depends="run-findbugs">
        <echo message="The build is still alive!!!"/>
    </target>
</project> 
```

但是当我从命令行运行时`ant -buildfile build.xml echoMsg`，我在 FindBugs 中得到一个错误：

```
run-findbugs:
    [echo] Creating gen/staging/myapp-build-findbugs-temp.jar for FindBugs.
    [jar] Building jar: /home/myuser/sandbox/workbench/eclipse/workspace/myapp/gen/staging/myapp-build-findbugs-temp.jar
    [echo] Conducting code quality tests with FindBugs.
[fb:findbugs] Executing findbugs from ant task
[fb:findbugs] Running FindBugs...
[fb:findbugs] Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/bcel/classfile/ClassFormatException
[fb:findbugs] Caused by: java.lang.ClassNotFoundException: org.apache.bcel.classfile.ClassFormatException
[fb:findbugs]   at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
[fb:findbugs]   at java.security.AccessController.doPrivileged(Native Method)
[fb:findbugs]   at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
[fb:findbugs]   at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
[fb:findbugs]   at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
[fb:findbugs]   at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
[fb:findbugs] Could not find the main class: edu.umd.cs.findbugs.FindBugs2\.  Program will exit.
[fb:findbugs] Java Result: 1
[fb:findbugs] Output saved to gen/audits/qual/findbugs.html

echoMsg:
    [echo] The build is still alive!!! 
```

这让我*感到惊讶*：

*   即使使用`failOnError="true"`，即使遇到此运行时异常，FindBugs 也不会停止构建
*   最后一段输出“ `Output saved to gen/audits/qual/findbugs.html`”是骗人的！*里面什么*都没有`gen/audits/qual`！
*   它`bcel-1.0.jar`绝对位于 FindBugs 的主目录下，就像 lib/ 目录中的所有其他 JAR 一样。

**请注意**：`findbugs-ant.jar`绝对复制到 ANT_HOME/lib；否则我会得到一个失败的构建，抱怨它找不到 Ant 任务。作为一个健全的检查，我继续这样做（我`findbugs-ant.jar`从 ANT_HOME/lib 中删除了并且构建失败）。这个构建不会失败（它成功了！）。它只是不运行 findbugs。

谁能发现这里发生了什么？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T01:09:23.007

您可以使用 jvm 的 -verbose:class 参数来调试加载 BCEL 的位置。

要将此参数传递给运行 findbugs 的 jvm，请使用 find bugs 插件上的 jvmargs 标志

> jvmargs
> 
> 可选属性。它指定应该传递给用于运行 FindBugs 的 Java 虚拟机的任何参数。如果您正在分析一个非常大的程序，您可能需要使用此属性来指定标志以增加 JVM 可能使用的内存量。

你是如何填充 find bugs lib jar 的？当我下载 findbugs.zip 时，我得到一个 lib 目录，它看起来与您显示的非常不同。特别是，我的包含一个版本为 5.3 的 bcel，而不是您显示的 1.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:09:53.410

我的猜测是你实际上在类路径中有两次 BCEL。并且正在从 FindBugs 库之外的 jar 中加载该文件。然后，当 FindBugs 尝试加载 jar 时，它**在**FindBugs 库中找到了 BCEL 并且无法加载它，因为它已经加载了。

解决方案是找到 BCEL 在类路径中的其他位置并将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T20:37:35.210

您可能必须定义 AuxClasspath 以包含您的`<javac>`任务在编译类文件时使用的类路径。

您没有显示编译是如何发生的，所以我假设您创建了一个`compile.classapath`类路径引用：

```
<javac destdir="gen/bin/main"
   srcdir="src/main/java"
   classpathref="compile.classpath"/>

<fb:findbugs home="/home/myuser/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1"
    output="html" outputFile="gen/audits/qual/findbugs.html" stylesheet="fancy-hist.xsl" failOnError="true">
    <auxClasspath refid="compile.classpath"/>
    <sourcePath refid="findbugs.source.path"/>
    <class location="${fb.tmp.jar}"/>
</fb:findbugs> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T19:53:16.187

我没有从您的 Ant 脚本中看到 bcel 正在登陆 findbugs 任务能够从中加载它的任何类路径。您可能想尝试使您的 taskdef 明确包含 findbugs 需要的所有内容。

```
<taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"
    uri="antlib:edu.umd.cs.findbugs">
  <classpath>
    <fileset dir="/home/java/repo/umd/findbugs/2.0.1/findbugs-2.0.1">
      <include name="*.jar"/>
    </fileset>
  </classpath>
</taskdef> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T01:03:59.550

有趣的是，因为我使用的是相同版本的 Findbugs 并且 jar 文件名为`bcel.jar`not `bcel-1.0.jar`。我也在从`Ant`脚本运行 Findbugs。尽管听起来很疯狂，但请尝试再次下载 Findbugs，将其解压缩到您当前的位置，然后再次运行您的脚本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-20T10:18:09.393

您可以使用[tattle](http://www.jboss.org/tattletale/docs)调试大多数类路径问题。它会报告你项目中的所有 jars。所有重复的课程等为我节省了很多时间。

还有准备好蚂蚁任务：http: [//docs.jboss.org/tattletale/userguide/1.2/en-US/html/ant.html](http://docs.jboss.org/tattletale/userguide/1.2/en-US/html/ant.html)

# python - sci-kit learn：使用 SelectKBest 时识别对应的 feature-id 值

> ID：12825559
> 
> 赞同：3
> 
> 时间：2012-10-10T18:04:11.800
> 
> 标签：python, scikit-learn, feature-selection

我正在使用 sci-kit learn（0.11 版和 Python 2.7.3 版）从 svmlight 格式的二进制分类数据集中选择前 K 个特征。

我正在尝试识别所选功能的功能 ID 值。我认为这会很简单——而且很可能！[（通过 feature-id，我的意思是这里](http://scikit-learn.org/stable/datasets/index.html#datasets-in-svmlight-libsvm-format)描述的特征值之前的数字）

下面的代码准确地说明了我是如何尝试这样做的：

```
from sklearn.datasets import load_svmlight_file
from sklearn.feature_selection import SelectKBest

svmlight_format_train_file = 'contrived_svmlight_train_file.txt' #I present the contents of this file below

X_train_data, Y_train_data = load_svmlight_file(svmlight_format_train_file)

featureSelector = SelectKBest(score_func=chi2,k=2)

featureSelector.fit(X_train_data,Y_train_data)

assumed_to_be_the_feature_ids_of_the_top_k_features = list(featureSelector.get_support(indices=True)) #indices=False just gives me a list of True,False etc...

print assumed_to_be_the_feature_ids_of_the_top_k_features #this gives: [0, 2] 
```

显然，`assumed_to_be_the_feature_ids_of_the_top_k_features` 不能对应于特征 ID 值 - 因为（见下文）我的输入文件中的特征 ID 值从 1 开始。

现在，我怀疑这`assumed_to_be_the_feature_ids_of_the_top_k_features`实际上可能对应于按递增值排序的特征 ID 值的列表索引。在我的情况下，索引 0 将对应于`feature-id=1`等 - 这样代码告诉我`feature-id=1`并被`feature-id=3`选中。

但是，如果有人可以确认或否认这一点，我将不胜感激。

提前致谢。

contrived_svmlight_train_file.txt 的**内容**：

```
1 1:1.000000 2:1.000000 4:1.000000 6:1.000000#mA
1 1:1.000000 2:1.000000#mB
0 5:1.000000#mC
1 1:1.000000 2:1.000000#mD
0 3:1.000000 4:1.000000#mE
0 3:1.000000#mF
0 2:1.000000 4:1.000000 5:1.000000 6:1.000000#mG
0 2:1.000000#mH 
```

PS抱歉格式不正确（第一次在这里）；我希望这是清晰易懂的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T23:49:35.440

> 显然，`assumed_to_be_the_feature_ids_of_the_top_k_features`不能对应于特征 ID 值 - 因为（见下文）我的输入文件中的特征 ID 值从 1 开始。

事实上，他们是。SVMlight 格式加载器将检测到您的输入文件具有基于 1 的索引，并将从每个索引中减去一个，以免浪费一列。如果这不是您想要的，则传递`zero_based=True`给以`load_svmlight_file`假装它实际上是从零开始的并插入一个额外的列；有关详细信息，请参阅[其文档](http://scikit-learn.org/stable/modules/generated/sklearn.datasets.load_svmlight_file.html#sklearn.datasets.load_svmlight_file)。

# c# - 如何使 WindowsFormsHost 透明？

> ID：12825578
> 
> 赞同：0
> 
> 时间：2012-10-10T18:05:26.100
> 
> 标签：c#, wpf, winforms, windowsformshost

我`System.Windows.Forms.Integration.WindowsFormsHost`在我的 WPF 应用程序中使用。这`System.Windows.Forms.Integration.WindowsFormsHost`是`Panel`控件的父级，我正在渲染它`Panel`以显示来自网络摄像头的实时摄像头图像。

如何使其透明，以使最终用户无法在用户界面上看到网络摄像头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:55:25.847

透明度不适用于 WindowsFormsHost。所以，你应该找到另一种选择。您可以设置它的可见性。

# c++ - 计算数组中的反转次数，C++

> ID：12825579
> 
> 赞同：0
> 
> 时间：2012-10-10T18:05:33.290
> 
> 标签：c++, algorithm, mergesort, divide-and-conquer

`a`大小数组中的反转`n`称为一对`(i,j)`，它持有`i<j`和`a[i]>a[j]`。我正在尝试在 C++ 中实现一个函数，该函数计算给定数组中的反转次数。我遵循分而治之的方法，它只是修改了归并排序算法，并在 O(n log n ) 时间内运行。到目前为止，这是我的代码：

```
long long int glob;

template< class T >
long long int merge( T *arr, int beg, int mid, int end ) {
  queue< int > left;
  queue< int > right;

  for( int i=beg; i<=mid; ++i ) {
    left.push( arr[i] );
  }
  for( int i=mid+1; i<=end; ++i ) {
    right.push( arr[i] );
  }

  int index=beg;
  int ret=0;

  while( !left.empty() && !right.empty() ) {
    if( left.front() < right.front() ) {
      arr[index++] = left.front();
      left.pop();
    } else {
      arr[index++] = right.front();
      right.pop();
      ret+=left.size();
    }
  }

  while( !left.empty() ) { arr[index++]=left.front();left.pop(); }
  while( !right.empty() ) { arr[index++]=right.front();right.pop(); }

  return ret;
}

template< class T >
void mergesortInvCount( T *arr, int beg, int end ) {
  if( beg < end ) {
    int mid = (int)((beg+end)/2);
    mergesortInvCount( arr, beg, mid );
    mergesortInvCount( arr, mid+1, end );
    glob += merge( arr, beg, mid, end );
  }
} 
```

对于某些测试用例，它会产生正确的结果，但对于其他一些测试用例，它会给我错误的输出。我是否错误地理解了算法，或者我在实现时犯了错误？有人可以帮我吗？提前致谢。

```
Test case: 2 1 3 1 2
Correct: 4
Mine: 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:08:44.190

我没有检查您代码中的所有步骤，但您的行

```
if( left.front() < right.front() ) 
```

向我建议，在 else 分支中，“ret”不仅在 a(j)>a(i) 时增加，而且在它们相等时也会增加，这与您对案例的描述不符。因此，也许您应该尝试将上面引用的行更改为：

```
if( left.front() <= right.front() ) 
```

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:02:17.590

考试

```
if( left.front() < right.front() ) 
```

应该是`<=`。您现在将相同的值从右半部分移到左半部分之前，计算不存在的反转（每次出现这种情况都会计算左侧相同项目的数量）虚假反转。在您的示例中，您必须复制对，每对都创建一个幻像反转。

# oop - 制作 CakePHP Helper 所需的建议

> ID：12825580
> 
> 赞同：1
> 
> 时间：2012-10-10T18:05:40.317
> 
> 标签：oop, cakephp, cakephp-helper

我需要制作一个 CakePHP 助手，其中涉及动态制作一些 HTML。但是部分代码是进行1-2个数据库查询。这些查询对于这个助手来说非常重要，因为它填充的所有文本都在数据库中。

根据 MVC 模式，我不应该在视图（助手）中进行数据库查询。我想知道这种情况下最好的设计是什么，因为我希望它也与 PHPUnit 测试保持一致。

任何想法都会受到欢迎...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:43:42.580

由于这项`View`工作纯粹是为了显示从 传递给它的（已经可用的）信息`Controller`，我认为它会是这样的：

你的控制器：

```
public function foo() {
    $bar = $this->MyModel->find('all');
    $this->set(array('bar' => $bar));
} 
```

您的看法：

```
$result = $this->MyHelper->foo($bar); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:29:08.213

您可以创建一个组件：

```
/**
* Set data info
* @access public
* @return void
*/
public function setData()
{
   $data = $this->Model->find('first', $params);
   $this->Controller->set('data', $data);
} 
```

并在布局中打印助手：

```
echo $this->MyNewHelper->someHtml($data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T22:42:52.207

如果它可能是一个元素而不是一个助手，你可以使用 CakePHP 的 RequestAction [[详情在这里]](http://book.cakephp.org/2.0/en/views.html#passing-variables-into-an-element)来拉取元素所需的数据。

然后，您可以将任何参数传递给 Element，并使用这些参数传递给执行模型调用的控制器。

这非常适合 MVC，因为 Element 只显示视图，但它指定了它应该从哪里获取数据（仍然使用模型来检索它），这使得它非常可重用。

# javascript - JavaScript 日期时间解析

> ID：12825588
> 
> 赞同：12
> 
> 时间：2012-10-10T18:06:08.313
> 
> 标签：javascript, parsing, datetime, format, datetime-format

> **可能重复：**
> [如何使用 JavaScript 中的格式规范将字符串转换为日期时间？](https://stackoverflow.com/questions/476105/how-can-i-convert-string-to-datetime-with-format-specification-in-javascript)

我有一个 json 响应，其中包含一个像这样的哈希图；

```
{"map":{"2012-10-10 03:47:00.0":23.400000000000002,"2012-10-10 03:52:00.0":23.3,"2012-10-10 03:57:00.0":23.3,"2012-10-10 04:02:00.0":23.3,"2012-10-10 04:07:00.0":23.200000000000003,"2012-10-10 04:13:00.0":23.1,"2012-10-10 04:18:00.0":23.1,"2012-10-10 04:23:00.0":23.0,"2012-10-10 04:28:00.0":23.0,"2012-10-10 04:33:00.0":23.0,"2012-10-10 04:38:00.0":22.900000000000002,"2012-10-10 04:43:00.0":22.8,"2012-10-10 04:48:00.0":22.8,"2012-10-10 04:53:00.0":22.700000000000003,"2012-10-10 04:58:00.0":22.6,"2012-10-10 05:03:00.0":22.6,"2012-10-10 05:08:00.0":22.5,"2012-10-10 05:13:00.0":22.5,"2012-10-10 05:18:00.0":22.5,"2012-10-10 05:23:00.0":22.400000000000002}} 
```

我想格式化json的日期时间部分，例如；

> dd/mm/yyyy HH:mm:ss

假设我把所有对元素都像这样；

```
var myArr = [["2012-10-10 03:47:00.0", 23.400000000000002], ["2012-10-10 03:52:00.0", 23.3], ....]; 
```

然后，我尝试解析日期时间部分，如下所示，我在控制台上得到了**Date {Invalid Date} ；**

```
new Date(myArr[0][0]); 
```

如何格式化这种类型的日期时间。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-10T18:18:56.673

尝试以下操作：

```
new Date(Date.parse(myArr[0][0])); 
```

**[例子](http://jsfiddle.net/m2hy5/)**

使用[日期](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。[parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)方法将字符串解析为自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。花费该毫秒数并再次调用[Date方法以将该时间转换为日期对象。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

**编辑**：

好吧，对于这种情况，这可能有点难看，但似乎 Firefox 的`-`s 和`00.0`.

```
var myArr = [["2012-10-10 03:47:00.0", 23.400000000000002], ["2012-10-10 03:52:00.0", 23.3]];

var date = convertDateTime(myArr[0][0]);
console.log(date);

function convertDateTime(dateTime){
    dateTime = myArr[0][0].split(" ");

    var date = dateTime[0].split("-");
    var yyyy = date[0];
    var mm = date[1]-1;
    var dd = date[2];

    var time = dateTime[1].split(":");
    var h = time[0];
    var m = time[1];
    var s = parseInt(time[2]); //get rid of that 00.0;

    return new Date(yyyy,mm,dd,h,m,s);
} 
```

**[例子](http://jsfiddle.net/m2hy5/2/)**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-10T19:07:48.567

```
function dateFromString(str) {
  var m = str.match(/(\d+)-(\d+)-(\d+)\s+(\d+):(\d+):(\d+)\.(\d+)/);
  return new Date(+m[1], +m[2] - 1, +m[3], +m[4], +m[5], +m[6] * 100);
}

dateFromString(myArr[0][0]); // Sat Oct 10 2012 03:47:00 GMT-0500 (EST) 
```

# r - 将 Oracle 时间戳转换为 R 中的日期/时间

> ID：12825589
> 
> 赞同：1
> 
> 时间：2012-10-10T18:06:10.803
> 
> 标签：r, datetime

`Oracle`我经常从`R`. 为了绕过我的某些表中的格式，我在 SQL 语句中将 `TIMESTAMP`in 列作为字符串读取。`TO_CHAR`

但是，我想将字符串中保存的数据转换回 R 可以使用的日期+时间格式。不幸的是，我不知道如何最好地做到这一点，尤其是考虑到 AM/PM 组件。删除日期很容易，但我不知道如何保留每条记录的时间部分。

以下是一些数据记录：

```
c("31-JUL-12 10.08.35.432 AM", "31-JUL-12 08.53.18.316 AM", "18-JUL-12 01.17.52.939 PM", 
"13-AUG-12 05.34.11.405 PM", "15-AUG-12 02.04.31.505 PM", "21-AUG-12 09.10.03.976 AM"
) 
```

注意：这些数据是时区 EST。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T18:13:02.677

如果您经常处理日期/时间，您应该熟悉`?strptime`

```
> strptime(oracle, format='%d-%b-%y %I.%M.%OS %p', tz='America/New_York')
[1] "2012-07-31 10:08:35.432 EDT" "2012-07-31 08:53:18.316 EDT" "2012-07-18 13:17:52.939 EDT" "2012-08-13 17:34:11.405 EDT" "2012-08-15 14:04:31.505 EDT" "2012-08-21 09:10:03.976 EDT" 
```

请注意，我假设您所说的“EST”实际上是指纽约州纽约的东部时间。来自`help(timezone)`：

> 请注意，其中一些名称可能与您的想法不同：特别是 EST 是加拿大使用的时区，没有夏令时，而不是 EST5EDT 或（澳大利亚）东部标准时间。

# php - 类函数在heredoc字符串中回显输出，但位置错误

> ID：12825592
> 
> 赞同：0
> 
> 时间：2012-10-10T18:06:16.217
> 
> 标签：php, class, function, heredoc

我试图在我的脚本的一个部分中使用一个heredoc 字符串，在这个heredoc 字符串内部是一个来自类内部的函数，它输入一些动态的东西。

该函数正确输出代码......但在错误的地方。这就是我的意思：

```
$output = <<<HTML
blah blah
blah
blah blah
<select>
{$admin->dropAcctNumbers()}
</select>
blah blah
blah
HTML; 
```

当它显示在 Web 浏览器中时，它会显示从内部`dropAcctNumbers()`一直回显的代码：

```
 <option>Account Numbers</option>
blah blah
blah
blah blah
<select>
</select>
blah blah
blah 
```

什么时候应该在这里：

```
blah blah
blah
blah blah
<select>
    <option>Account Numbers</option>
</select>
blah blah
blah 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:08:08.957

你的方法`$admin->dropAcctNumbers`是打印信息而不是`returning`它..

例子

```
echo "<pre>";
$admin = function () {
    print "    Account Numbers";
};

$output = <<<HTML
blah blah
blah
blah blah
{$admin()}
blah blah
blah
HTML;

echo $output; 
```

输出

```
 Account Numbersblah blah
blah
blah blah

blah blah
blah 
```

和

```
echo "<pre>";
$admin = function () {  return "    Account Numbers" ; } ;

$output = <<<HTML
blah blah
blah
blah blah
{$admin()}
blah blah
blah
HTML;

echo $output ; 
```

输出

```
blah blah
blah
blah blah
    Account Numbers
blah blah
blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:11:17.310

试试这个

```
echo "<pre>".$output."</pre>"; 
```

# sql - 如何组合不同字段数据的计数

> ID：12825599
> 
> 赞同：3
> 
> 时间：2012-10-10T18:06:51.553
> 
> 标签：sql, sql-server-2008, count

我的查询结果：

```
SELECT SYS_Product, 
       CASE 
         WHEN MEMVendor_Name = 'Unavailable' OR MEMVendor_Name = 'unknown' 
           THEN 'Error' 
         ELSE MEMVendor_Name 
       END AS MEMVendor_Name, 
       COUNT(MEMVendor_Name) AS MEMVendor_NameCount
FROM  dbo.ahs_master_bc_system_mem_vendor AS V
WHERE (AHS_CurrentCfg = 1) 
and SYS_Product='Gen8'
GROUP BY SYS_Product, MEMVendor_Name 
```

如下：

```
SYS_Product | MEMVendor_Name| MEMVendor_NameCount
_____________________________________________
Gen8          Elpida           1
Gen8          Micron           84
Gen8          Nanya            28
Gen8          Netlist          0
Gen8          Samsung          55
Gen8          SK-Hynix         86
Gen8          Error            0 <----
Gen8          Error            2 <---- 
```

问题：我怎样才能得到 JUST the Error 的“总和”为 2(0+2​​) 仍然保持其他人的计数：

```
SYS_Product | MEMVendor_Name| MEMVendor_NameCount
_____________________________________________
Gen8          Elpida            1
Gen8          Micron            84
Gen8          Nanya             28
Gen8          Netlist           0
Gen8          Samsung           55
Gen8          SK-Hynix          86
Gen8          Error             2 <=== 
```

我需要 group by，因为这些结果将与基于 SYS_Product 和 MEMVendor_Name 的另一个查询相结合

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:09:43.417

更改您`group by`以平等对待所有错误：

```
GROUP BY 
        SYS_Product
,       case 
        when MEMVendor_Name in ('Unavailable', 'unknown') then 'Error' 
        else MEMVendor_Name
        end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:11:37.820

尝试添加`case`语句`group by`如下

```
SELECT SYS_Product, 
       CASE 
         WHEN MEMVendor_Name = 'Unavailable' OR MEMVendor_Name = 'unknown' 
           THEN 'Error' 
         ELSE MEMVendor_Name 
      END AS MEMVendor_Name, 
COUNT(MEMVendor_Name) AS MEMVendor_NameCount
FROM dbo.ahs_master_bc_system_mem_vendor AS V
WHERE (AHS_CurrentCfg = 1) 
and SYS_Product='Gen8'
GROUP BY SYS_Product, 
      CASE 
        WHEN MEMVendor_Name = 'Unavailable' OR MEMVendor_Name = 'unknown' 
          THEN 'Error' 
        ELSE MEMVendor_Name 
      END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:12:41.200

只需引用列*位置*而不是子句中的*名称：*`GROUP BY`

```
SELECT
    SYS_Product, 
    CASE 
        WHEN MEMVendor_Name in ('Unavailable', 'unknown') THEN 'Error'
        ELSE MEMVendor_Name
    END AS MEMVendor_Name, 
    COUNT(MEMVendor_Name) AS MEMVendor_NameCount
FROM dbo.ahs_master_bc_system_mem_vendor AS V
WHERE AHS_CurrentCfg = 1
AND SYS_Product = 'Gen8'
GROUP BY 1, 2 -- The SQL standard allows group-by to reference column position 
```

还要注意案例陈述的简化和重新格式化为更易读的格式

# performance - 如何利用“软引用统计”和“弱引用统计”来改进 Java EE 应用程序

> ID：12825602
> 
> 赞同：0
> 
> 时间：2012-10-10T18:06:56.697
> 
> 标签：performance, jakarta-ee, websphere, health-monitoring

我专注于

*   通过足迹分析获得对 Java 应用程序的架构理解
*   通过调整内存占用和优化 Java 集合和 Java 缓存使用来提高应用程序性能

为此，我在使用 WebSphere 应用程序服务器 v7 的 Java EE 应用程序上运行了负载测试并使用 Java 堆分析工具[memoryanalyzer分析了 Java 堆转储快照。](http://www.ibm.com/developerworks/java/jdk/tools/memoryanalyzer/)

我在问“软参考统计”和“弱参考统计”是否有助于实现我的目标，即：了解我们是否有问题或在应用程序 java 代码或应用服务器的配置。

建议找出如何弄清楚如何利用这些数据将不胜感激

> 软参考统计
> 
> 总共找到了 11.416 个 java.lang.ref.SoftReference 对象，其中软引用了 393 个对象。总共 122,9 KB 的 2.414 个对象仅通过软引用保留（保持活动状态）。没有总计 0 B 的对象被软引用，并且还通过软引用强烈保留（保持活动状态）。
> 
> 弱参考统计
> 
> 一共找到了28.849个java.lang.ref.WeakReference对象，其中弱引用了11.663个对象。总共 7,4 MB 的 132.437 个对象仅通过弱引用保留（保持活动状态）。没有总计 0 B 的对象被弱引用，并且还通过弱引用强保留（保持活动状态）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:12:32.690

第一条规则：永远不要使用软参考。那些补充说的人对他们的决定感到遗憾，因为他们没用并且使 GC 更昂贵。

弱引用是可以的。

问题是：如果您确实需要内存中的所有数据，那么尝试减少占用空间将导致额外的 CPU、网络或磁盘开销，因为您需要将数据存储在其他地方。

应用程序的堆有多大，您需要使其性能更好？当 GC 启动时，您能够接受的最大延迟是多少？您是否尝试过调整 GC？

* * *

## 编辑

为什么从不使用软引用。软引用不好，因为

*   它们需要 2 个 GC 周期来收集。第一个 GC 循环标记它们，第二个实际收集内存。（这与 MarkSweep 收集器没有任何关系）
*   它们被标记为在完整 GC 后收集。

如果你真的需要SoftReference中保存的数据，加载SF，full GC，再次加载SF，full GC将启动，这很糟糕。该应用程序可能不会因为 OOME 而崩溃，但它将接近无法使用。

弱引用更好，因为它们仅在“弱”可访问时清除，而不是在应用程序内存不足时清除。我所知道的使用弱引用的框架中最好的（也是唯一的）例子是[Robotium](http://code.google.com/p/robotium/)（一个 android 测试框架）。

# c# - Directory.GetFiles 未返回正确数量的文件

> ID：12825605
> 
> 赞同：0
> 
> 时间：2012-10-10T18:07:17.340
> 
> 标签：c#

我从 Threading.Timer 每 2 分钟触发一次函数。该函数通过一个目录（硬编码）并删除其中的所有 .ev1 文件。该目录位于服务器上，每隔约 2 分钟就有一个文件移动到该目录中。

它工作了大约一天左右，目录是空的，或者里面有 1 个文件。现在我去查了一下，里面有746个文件。我在这一行之后放了一个断点：

```
String[] Files = System.IO.Directory.GetFiles(MachineDir, WatcherFileType, SearchOption.AllDirectories); 
```

MachineDir 是我正在查看的目录（我仔细检查了目录字符串是否正确）。WatcherFileType 是 .ev1。

Directory.GetFiles 有一些错误吗？或者可能长时间运行此应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:08:42.157

您是否尝试将 WatcherFileType 设置为“*.ev1”

此外，您可能想查看不使用轮询的 FileSystemWatcher 对象：http: [//msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-10T18:18:12.387

看看[这个来自](http://msdn.microsoft.com/en-us/library/ms143316.aspx)**MSDN**的摘录

 **当扩展名正好是三个字符时，`GetFiles`将返回所有**匹配**的扩展名并**以**该 3 个字母的扩展名开头。

因此， `*.txt`将匹配`hello.txt`, `hello.txter`,`hello.txtworld`

Insted 使用`?.txt`将`hello.txt`完全匹配。

此问题仅适用于 3 个字母扩展

所以你应该使用

```
?.ev1 
```**

# list - 序言列表。检查列表中的第一个和最后一个元素是否相似

> ID：12825606
> 
> 赞同：5
> 
> 时间：2012-10-10T18:07:18.350
> 
> 标签：list, prolog, dcg

例子：

```
firstlast([1,2,3,4,1]).
true;

firstlast([1,2,3,4]).
false;

firstlast([5,10,4,3]).
false;

exc... 
```

问题是我只允许对谓词“firstlast”使用递归。? 我真的试图打破这一点，但我似乎无法检查/比较最后一个元素与第一个元素。

有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:13:29.780

**更新：**由于您不允许使用其他谓词，请尝试以下操作：

```
firstlast([H,H]).
firstlast([F,_|T]) :- firstlast([F|T]). 
```

第一个谓词处理基本情况，第二个谓词删除三个或更多项目列表中的第二个元素，并向下递归。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:15:28.210

You probably mean that the first and last element are the same. Here is a solution using [dcg](/questions/tagged/dcg "show questions tagged 'dcg'")-notation:

```
firstlast(Xs) :-
    phrase(([X],...,[X]), Xs).

... --> [] | [_], ... .

```

I am not sure whether `firstlast([1])` should succeed or not ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:18:06.980

好吧，因为您只能使用 firstlast/1 的递归，所以解决方案将如下所示：

```
firstlast(...) :- ... .
firstlast(...) :- ... .
firstlast(...) :- ... .
....
firstlast(...) :- ... . 
```

其中一些将是关于基本案例的规则，其中一些将是“蚕食”问题的规则。这个问题需要一个检查：比较第一个和最后一个元素。所以，在你的基本情况下，你应该只有这两个元素；你不需要其他任何东西。所以解决方案将忽略所有其他元素

最后提示：您可以使用以下统一模式访问列表的前 2 个元素：

```
foo([H1,H2|T]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:32:39.950

太公平了，我得到了这个：

```
firstlast([H,_|T]) :-
(T1 = H, T1 = T) -> firstlast([H|T]). 
```

我的代码比较了最后一个元素和第一个元素，但递归是错误的：/

如上所述，不应允许列表中的一个元素成功。虽然我只允许使用谓词“firstlast”。

# android - 在 Android（三星 Tab 2）浏览器上替代 ☐ 和 ☒

> ID：12825609
> 
> 赞同：1
> 
> 时间：2012-10-10T18:07:26.943
> 
> 标签：android, browser, unicode, samsung-mobile

我在三星 Tab2 上安装（默认）的 Internet 浏览器不显示 ☐<code>☐ 和 ☒<code>☒ 字符正确。有哪些替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:48:49.920

Android 上的字体不包含这些字符，因此您的选择似乎是：

1.  使用可下载的字体，通过`@font-face`. 可能很难找到适合此的字体，因为大多数免费字体的字符覆盖范围相当有限。在包含这些字符的相对较少的字体中（参见 Fileformat.info 中的[字体覆盖信息](http://www.fileformat.info/info/unicode/char/2610/fontsupport.htm)），DejaVu Sans 可能是合适的（尽管文件大小有点大，大约 668 KB）。
2.  使用图像。这些天有点沉闷，但一个可行的解决方案。在这种情况下，创建比预期字体大小大几倍的图像，然后按比例缩小它们以匹配字体大小，例如`width: 0.6em`用于图像。
3.  使用不间断空格和乘号“×”，并使用 CSS 将它们放入带边框的小框中。下面的示例代码。这似乎是这里最好的方法。

    ```
    <style>
    .box {
      display: inline-block;
      vertical-align: baseline;
      line-height: 0.6;
      border: solid 0.08em;
      width: 0.6em;
      height: 0.6em;
      text-align: center;
      font-weight: bold;
    }
    </style>
    <span class=box>&nbsp;</span>
    <span class=box>&times;</span> 
    ```

# android - ImageButton 在点击透明背景时不突出显示

> ID：12825613
> 
> 赞同：41
> 
> 时间：2012-10-10T18:07:36.760
> 
> 标签：android, button, transparency

我已将 ImageButton 设置为透明的，因此图标与 Android ActionBar 等背景面板相匹配。这看起来不错，就像我想要的那样。

但是，当背景透明时，不会像在操作栏中按下透明按钮时那样看到蓝色高亮。

我可以有一个透明的 ImageButton 并且单击时高亮闪烁吗？

```
<ImageButton
    android:id="@+id/nextItemButton"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="@null"
    android:src="@drawable/ic_media_ff" /> 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-12-13T00:45:48.987

我遇到了同样的问题。最后，我得到了一个具有该属性的代码示例：

```
android:background="?android:selectableItemBackground" 
```

此属性将为任何视图（按钮、图像按钮、文本视图...）提供具有可选突出显示的透明背景，**无需更多编码！！！**

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-10T19:48:46.200

您需要做的就是设置适当的背景。如果您希望它在正常状态下透明而在按下状态下呈蓝色。

在目录中创建一个像这样的[StateListDrawable](https://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)`res/drawable`。

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@color/my_bluish_color" android:state_pressed="true"/>
    <item android:drawable="@android:color/transparent"/>
</selector> 
```

这样默认背景是透明的。按下时，背景具有您指定的颜色（而不是颜色，您可以在此处使用任何可绘制对象）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-16T13:59:29.903

只是为了补充费尔南德斯的好答案：

如果您希望效果是圆形而不是矩形，请使用：

```
android:background="?android:selectableItemBackgroundBorderless" 
```

（*适用于 V21 及更高版本）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T19:58:11.307

如果您想以编程方式执行此操作，这是一种解决方案：

创建一个自定义`ImageButton`类并覆盖`drawableStateChange()`：

```
public class CustomImageButton extends ImageButton {

    @Override
    protected void drawableStateChanged() {
        Log.d("Button", "isPressed: " + isPressed() );
        if( isPressed() ){
            setBackgroundResource( android.R.color.holo_blue_dark );
        }  else {
            setBackgroundResource( android.R.color.transparent );
        }
        super.drawableStateChanged();

    }

    public CustomImageButton( Context context ) {
        super( context );
    }

    public CustomImageButton( Context context, AttributeSet attrs ) {
        super( context, attrs );
    }

    public CustomImageButton( Context context, AttributeSet attrs, int defStyle ) {
        super( context, attrs, defStyle );
        // TODO Auto-generated constructor stub
    }

} 
```

# ruby-on-rails-3 - Rack::Cache 与 redis 无法正常工作

> ID：12825614
> 
> 赞同：2
> 
> 时间：2012-10-10T18:07:41.180
> 
> 标签：ruby-on-rails-3, caching, redis, rack

我正在尝试将我的 Rack::Cache 设置为与蜻蜓一起使用。我想在单独的服务器上有一个共享的 redis 缓存，以便可以在 Web 服务器之间共享缓存。问题是，无论我传入什么配置，它都假定 url 是 localhost 而不是我提供的 IP 地址。这是我的代码：

```
require 'uri'
require 'dragonfly'
require 'rack/cache'
require 'redis-store'
require 'redis-rack-cache'

### The dragonfly app ###
app = Dragonfly[:images]
app.configure_with(:rails)
app.configure_with(:imagemagick)

### Extend active record ###
app.define_macro(ActiveRecord::Base, :image_accessor)
app.define_macro(ActiveRecord::Base, :file_accessor)

### Insert the middleware ###
rack_cache_already_inserted = Rails.application.config.action_controller.perform_caching && Rails.application.config.action_dispatch.rack_cache

Rails.application.middleware.insert 0, Rack::Cache, {
  :verbose     => Rails.env.development?,
  :metastore   => "redis://SOMEIP:SOME_PORT/0/metastore", # URI encoded in case of spaces
  :entitystore => "redis://SOMEIP:SOME_PORT/0/entitystore",
} unless rack_cache_already_inserted

Rails.application.middleware.insert_after Rack::Cache, Dragonfly::Middleware, :images 
```

无论我放什么而不是 SOMEIP:SOME_PORT 该值都会被忽略，它会连接到本地主机上的 redis。

有任何想法吗？

（使用 Rails 3.0.10）

# java - 我无法正确划分两个数字

> ID：12825617
> 
> 赞同：10
> 
> 时间：2012-10-10T18:08:02.027
> 
> 标签：java, android

```
int percent = (score/numberOfQuestions)*100;
progressText.setText(score+"/"+numberOfQuestions+"  "+percent+"%"); 
```

无论我累什么都会返回 0%。我尝试将其转换为 int、double、float

为什么像 score=5 numberOfQuestions=8 这样的数字返回 0%？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-10T18:11:43.467

问题是两个整数相除会给你结果的整数部分。所以， `(score/numberOfQuestions)`将永远是 0。
你应该做的是

```
int percent = (score * 100 / numberOfQuestions); 
```

然后`*100`将首先执行，然后除法会给你正确的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-10T18:09:23.220

您需要对它们中的任何一个进行强制转换：-

```
float percent = ((float)score/numberOfQuestions)*100; 
```

因为，`5 / 10`已经是 0.. 将最终结果转换为任何类型只会给你 0，如下面的代码： -

```
float percent = ((float)(score/numberOfQuestions))*100; 
```

这也会给你`0.0`。由于您`0`要浮动。没关系。。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-10T18:12:33.767

检查你的整数数学。如果不强制转换小值，您的代码将无法工作，因此只需移动操作：

```
int percent = 100*score/numberOfQuestions; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-10T18:09:28.583

您正在使用`int`（整数）来存储该百分比。尝试使用`float`或`double`代替得分和问题数量`float`（`double`感谢您的评论，我完全跳过了这个......）。如果您在显示该值时遇到问题，我建议您使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)对其进行格式化。

`int`如果您想在结果中包含小数，我建议您使用其他替代方法，而不是使用纯数学来计算和存储百分比。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T18:14:54.617

`score/numberOfQuestions`将始终提供一个介于 0 和 1 之间的数字。您有两种选择，具体取决于您需要计算的准确度。对于大多数情况，您可以将表达式更改为`(score * 100)/numberOfQUestions`。这将为您提供两位数的准确性。`score * 100`如果溢出一个 int就会出现问题。鉴于您的变量名称，我怀疑在这种情况下会发生这种情况。第二种可能性是将表达式转换为 double 以进行计算。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-10T18:17:22.447

```
int percent=(int)(((double)score/numberOfQuestions)*100); 
```

# objective-c - CFMessagePort 怪异

> ID：12825620
> 
> 赞同：1
> 
> 时间：2012-10-10T18:08:04.913
> 
> 标签：objective-c, ipc, port, core-foundation, mach

关于通过马赫端口发送/接收消息，我面临一个奇怪的延迟问题。我的实现的基本概念如下：

> 插件创建本地端口→启动向所述端口发送消息的远程进程→返回接收到的数据。

这是插件部分：

```
static NSArray *returned=nil;
static CFDataRef handle_port (
   CFMessagePortRef local,
   SInt32 msgid,
   CFDataRef d,
   void *info
) {
    NSPropertyListFormat format;
    NSDictionary* ret = [NSPropertyListSerialization propertyListWithData:(NSData*)d
                                            options: NSPropertyListImmutable
                                            format: &format
                                            error: nil];
    returned=[NSArray arrayWithArray:[ret objectForKey:@"aKey"]]; //this is what I want returned from the portRet()
    NSLog(@"returned array %@",returned); 
    return NULL;     
}

NSArray* portRet(){
    CFMessagePortRef port = CFMessagePortCreateLocal(kCFAllocatorDefault, CFSTR("com.someport"), handle_port, NULL, NULL);
    CFRunLoopSourceRef source =  CFMessagePortCreateRunLoopSource(kCFAllocatorDefault, port, 0);
    CFRunLoopAddSource(CFRunLoopGetCurrent(), source, kCFRunLoopCommonModes);
    CFRelease(source);
    int r=system("/path/someExecutable"); 
    if(r !=0) NSLog(@"Program error");
    //CFMessagePortInvalidate(port);    
    //CFRelease(port);
    return returned; // always returns nil
} 
```

someExecutable 的代码的重要部分如下：

```
int main(){
...
CFMessagePortRef port = CFMessagePortCreateRemote(NULL, CFSTR("com.someport"));
    if(port == NULL) exit(1);
    CFDataRef d=CFPropertyListCreateData(kCFAllocatorDefault,[NSDictionary dictionaryWithObject:anArray forKey:@"aKey"], kCFPropertyListXMLFormat_v1_0, 0, NULL);
    CFMessagePortSendRequest (port, 0, d, 0, 0, NULL, NULL);
    NSLog(@"Program is about to exit");
    CFRelease(d);
...
    exit(0);
} 
```

来自远程进程的消息被优雅地发送，但在进程结束并返回空值*后*调用回调。`portRet()`如果我使函数内的端口无效`portRet()`，则永远不会收到消息。

我无法弄清楚发生这种延迟的原因。我想要实现的是在`portRet()`返回之前调用端口回调。我还尝试使用主调度队列而不是`CFRunLoopSource`端口的回调调度：

```
 CFMessagePortSetDispatchQueue(port, dispatch_get_main_queue()); 
```

但结果几乎是一样的。我不确定我做错了什么。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T03:43:33.343

您需要运行您的运行循环，`portRet`直到第二个进程返回一个值。例如：

```
SInt32 runLoopRunReturnValue = CFRunLoopRunInMode(kCFRunLoopDefaultMode, CFDateGetTimeIntervalSinceDate((__bridge CFDateRef)[NSDate distantFuture], (__bridge CFDateRef)[NSDate date]), true);

if (runLoopRunReturnValue == kCFRunLoopRunHandledSource)
    return returned;
else {
    // Throw exception or whatever
    // (although this will never be called using the above implementation
    // since [NSDate distantFuture] is wayy into the future...)
} 
```

# java - 避免 JSpinner 取信

> ID：12825622
> 
> 赞同：1
> 
> 时间：2012-10-10T18:08:15.927
> 
> 标签：java, swing, jspinner

我有一个`jSpinner`这样的`SpinnerNumberModel`：

```
spinnerModelFix = new SpinnerNumberModel(0, 0, 65535, 1);
JSpinner fixedValueSpinner = new JSpinner(spinnerModelFix); 
```

我只想在微调器中显示整数，这样如果用户插入字母，它们就不会显示。

我想我应该和`extends SpinnerNumberModel`方法...`override``fireStateChanged()`

但我不确定我需要用这种方法做什么。

谁能给我一些提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:07:42.610

*   是的，解决方法很简单，

*   有两种方法可以做到这一点，必须派生`JTextField`或`JFormattedTextField`来自`JSpinner`，

*   然后添加

    一个）`DocumentListener`

    b)`DocumentFilter`

我认为[DocumentFilter 的使用对于代码解决方法来说是最简单的，更好，也许更安全](https://stackoverflow.com/a/9779203/714968)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T19:07:33.233

您可以在微调器的格式化程序上尝试[setAllowsInvalid(false) 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/DefaultFormatter.html#setAllowsInvalid%28boolean%29)例如：

```
SpinnerNumberModel spinnerModelFix = new SpinnerNumberModel(0, 0, 65535, 1);
JSpinner fixedValueSpinner = new JSpinner(spinnerModelFix);
JFormattedTextField textField = ((JSpinner.NumberEditor) fixedValueSpinner
        .getEditor()).getTextField();
((NumberFormatter) textField.getFormatter()).setAllowsInvalid(false); 
```

# office-automation - 获取格式化的 PowerPoint 2010 幻灯片注释

> ID：12825623
> 
> 赞同：1
> 
> 时间：2012-10-10T18:08:22.707
> 
> 标签：office-automation, powerpoint-2010

使用以下 C# 代码，我可以获得原始文本。然而，我需要的是一种获取文本格式（粗体、斜体等）的方法。

```
string noteText;

for ( var i = 1; i <= mySlide.NotesPage.Shapes.Count; i++ )
{
   var noteShape = mySlide.NotesPage.Shapes[i];

   if ( noteShape.Type == OfficeCore.MsoShapeType.msoPlaceholder )
   {
      if ( noteShape.PlaceholderFormat.Type == PowerPoint.PpPlaceholderType.ppPlaceholderBody )
      {
         if ( noteShape.HasTextFrame == OfficeCore.MsoTriState.msoTrue )
         {
            if ( noteShape.TextFrame2.HasText == OfficeCore.MsoTriState.msoTrue )
            {
               noteText = noteShape.TextFrame.TextRange.Text;
               break;
            }
         }
      }
   }
} 
```

任何人都可以帮忙吗？

# jquery - 在 Jquery 中使用 RegEx 进行过滤

> ID：12825624
> 
> 赞同：0
> 
> 时间：2012-10-10T18:08:27.650
> 
> 标签：jquery, regex

我正在使用下面的插件来获取推文并显示它们。

[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)

插件中有一个过滤器功能，下面的正则表达式过滤掉帐户上所有回复的推文：

```
filter: function(t){ return ! /^@\w+/.test(t.tweet_raw_text); } 
```

我现在希望在此过滤器的基础上仅显示包含主题标签“#capetowntrains”的推文

任何人都可以帮助我正确形成正则表达式语句吗？

谢谢您的帮助

问候

德文

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:10:00.330

应该只需要将其更改为此

```
filter: function(t){ 
    return (! /^@\w+/.test(t.tweet_raw_text)) && (/#capetowntrains/.test(t.tweet_raw_text)); 
} 
```

我们只保留不回复的内容，也包含#capetowntrains。

编辑：如果您希望它不区分大小写（请注意添加的`i`）

```
filter: function(t){ 
    return (! /^@\w+/.test(t.tweet_raw_text)) && (/#capetowntrains/i.test(t.tweet_raw_text)); 
} 
```

# php - php htmlentities 显示 utf-8 编码字符

> ID：12825629
> 
> 赞同：0
> 
> 时间：2012-10-10T18:08:45.013
> 
> 标签：php

请点击此处的第一个缩略图：http://dev.holiday.ge/?s= [bar](http://dev.holiday.ge/?s=bar)

`??????`将显示。这是 utf-8 文本，我通过 php 运行它`htmlentities()`

有人可以解释发生了什么吗？

我是否必须对 htmlentities 进行编码以使其正确显示 utf-8 文本显示？

有什么想法吗？

谢谢！

![在此处输入图像描述](../Images/12e7269ebbafe679b8dd88b8ab828171.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:24:42.193

我知道我的评论有助于解决您的问题。

这是答案

```
echo htmlentities($str, ENT_QUOTES | ENT_IGNORE, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:13:35.850

你检查过字段的排序规则是 utf8_general_ci 你也用过吗

在使用 mysql_select_db('dbName'); 选择数据库后，您还添加了此代码吗？

```
mysql_query('SET character_set_results=utf8');
mysql_query('SET names=utf8');
mysql_query('SET character_set_client=utf8');
mysql_query('SET character_set_connection=utf8');
mysql_query('SET character_set_results=utf8');
mysql_query('SET collation_connection=utf8_general_ci'); 
```

请评论它。

# d3.js - 为各个轴文本元素分配 ID

> ID：12825630
> 
> 赞同：1
> 
> 时间：2012-10-10T18:08:48.063
> 
> 标签：d3.js, label, axis

我正在使用 d3.axis() 创建轴标签和刻度线，我想使用 d3.select("#axisTextIDValue") 单独引用它们，但我看不到任何方法来操作单个文本元素的 id 属性一个轴。有谁知道如何为轴的刻度或文本元素创建 ID 值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-17T06:19:58.693

虽然另一个答案确实解释了如何选择刻度，但如果您想为这些生成的元素分配唯一的 id，您可以通过为您为轴调用的 g 提供一个 id 或类，然后使用子选择来做到这一点根据数组位置为子文本元素设置 id：

```
 d3.select("svg").append("g").attr("id", "axisG").call(axis);
 d3.select("#axisG").selectAll("text").attr("id", function(d,i) {return "axisText" + i});

 d3.select("#axisText0").node(); //demonstrates selectability 
```

也就是说，这可能不是一个好主意，并且有更好的方法来处理由 D3 即时生成的刻度/标签/voronoi/等，但我想确保在这里给出答案以防万一有人正在寻找如何做这种事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T22:50:02.803

棘手的部分是你不会提前知道你有什么刻度或有多少（除非你在你的轴上使用 tickValues 属性）。

通常，您可以对创建轴的组进行分类，并将其用作进一步选择的基础。例如

```
var axisGroup = parent.append('g')
                .attr('class', 'axis')

axisGroup.call(axis); 
```

我相信刻度线被分配了“刻度线”类，因此您可以选择所有刻度线：

```
axisGroup.selectAll('.tick'); 
```

或所有文本标签：

```
axisGroup.selectAll('text'); 
```

# asp.net-mvc-4 - 如何在 ASP.NET MVC 4 中使用 Request.Unvalidated？

> ID：12825631
> 
> 赞同：2
> 
> 时间：2012-10-10T18:08:51.677
> 
> 标签：asp.net-mvc-4, validation

根据此链接，现在我们可以使用 Request.Unvalidated 访问表单字段的*原始*值而不触发请求验证（并查看可怕的错误消息*A 潜在危险 Request.Form...*）。不幸的是，我无法让它工作。

网页配置

```
<httpRuntime targetFramework="4.5" requestValidationMode="4.5" /> 
```

视图模型中的一个简单字段：

```
// [AllowHtml] - even I tried this, it still did not work :(
public string Description { get; set; } 
```

和控制器动作：

```
[HttpPost]
public ActionResult Edit([Bind(Prefix = "Edit")] EditModel model)
{
  string s = Request.Unvalidated.Form["Edit.Description"];
} 
```

我仍然看到错误“潜在危险的 Request.Form...”，为什么？试过谷歌，但没有 ASP.NET MVC 的例子。

工具箱：我正在处理一个针对 .NET 4.5 和 VS2012 的 ASP.NET MVC 4 项目。

谢谢，

**更新**：使用带有 Description 属性的 AllowHtml 解决了我的问题，甚至不需要 Request.Unvalidated。正如我在@webdeveloper 的回答中评论的那样，仍然存在一个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:19:33.670

看看这个链接：

*   [ASP.NET 中的请求验证](http://msdn.microsoft.com/en-us/library/hh882339%28v=vs.100%29.aspx)
*   [了解 ASP.NET MVC 3 中的请求验证](http://dotnet.dzone.com/news/understanding-request)
*   [ASP.NET MVC 技巧 #48 – 禁用请求验证](http://stephenwalther.com/archive/2009/02/20/tip-48-ndash-disable-request-validation.aspx)

他们将帮助您了解它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T09:56:11.220

**我知道@webdeveloper**已经解决了这个问题。但是，有关`requestValidationMode`.

例如：它可以是**2.0**或**4.0**。

```
<httpRuntime targetFramework="4.5" requestValidationMode="2.0" /> 
```

或者

```
<httpRuntime targetFramework="4.5" requestValidationMode="4.0" /> 
```

此请求验证仅对页面启用。以下内容来自[MSDN的参考](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode%28v=vs.110%29.aspx)

*   **4.0**（默认）。HttpRequest 对象在内部设置一个标志，指示在访问任何 HTTP 请求数据时都应触发请求验证。这保证了在请求期间访问 cookie 和 URL 等数据之前触发请求验证。配置文件中 pages 元素（如果有）或单个页面中 @Page 指令的请求验证设置将被忽略。

*   **2.0**请求验证仅对页面启用，并非对所有 HTTP 请求启用。此外，配置文件中 pages 元素（如果有）或单个页面中 @Page 指令的请求验证设置用于确定要验证哪些页面请求。

**分配给此属性的值未经过验证以匹配特定版本的 ASP.NET。任何小于 4.0 的数值（例如，3.7、2.9 或 2.0）都被解释为 2.0。任何大于 4.0 的数字都被解释为 4.0。**

所以定义`requestValidationMode="4.5"`最初将被解释为`requestValidationMode="4.0"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T20:43:32.997

看起来您需要将请求验证模式设置为 2.0，如 webdeveloper 的第一个链接中所述。尝试这个：

```
<httpRuntime targetFramework="4.5" requestValidationMode="2.0" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-06T05:12:47.660

这个问题是由于模型绑定器造成的。对于您的代码，您需要从模型绑定中排除属性“描述”。另一种允许在属性中使用 html 的方法，您可以在视图模型中的属性中使用 [AllowHtml] 属性

# c++ - 当字节序很重要时 - 强制转换操作

> ID：12825632
> 
> 赞同：2
> 
> 时间：2012-10-10T18:08:57.830
> 
> 标签：c++, memory, types, byte, endianness

> **可能的重复：**
> [字节顺序何时成为一个因素？](https://stackoverflow.com/questions/7179907/when-does-endianness-become-a-factor)

阅读这个关于字节序的[tuto](http://www.ibm.com/developerworks/aix/library/au-endianc/index.html?ca=drs-)，我落在这个字节序确实很重要的例子上。它是关于写一个用 1 和 0 填充的 char*。然后它可以转换为一个短的，结果取决于字节序，小或大。这是引用的示例。

> unsigned char endian[2] = {1, 0}; 短 x；
> 
> ```
> x = *(short *) endian; 
> ```
> 
> x 的值是多少？让我们看看这段代码在做什么。您正在创建一个包含两个字节的数组，然后将该包含两个字节的数组转换为一个短数组。通过使用数组，您基本上强制了某个字节顺序，您将看到系统如何处理这两个字节。如果这是一个小端系统，则 0 和 1 被向后解释并被视为 0,1。由于高字节为0，无所谓，低字节为1，所以x等于1。反之，如果是big-endian系统，高字节为1，x的值为256.

我想知道：当您使用给定数量的内存字节分配（这里是两个字节）实例化一个数组时，只要数组已分配了数字，如何转换为任何类型（short，int ...）对应于这个字节的字节数？如果没有分配足够的内存来“包含这种类型”，是否仍会读取下一个内存地址？例如，如果我想将 endian 转换为 long，这会被执行，从 endian 的开头读取四个字节，还是会失败？

然后，关于字节序的问题：这是处理器习惯于在内存中写入字节的特性，其中最重要的字节位于最低内存位置（大端）或最高内存位置（小端）。在这种情况下，分配了一个包含两个单字节元素的数组。为什么说 1 是最有意义的字节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:28:36.820

不要忘记编译器只会编写汇编代码。如果您忽略编译器的所有警告，您可以检查编译器生成的汇编代码并找出真正发生的情况。

我采用了这个简单的程序：

```
#include <iostream>

int main()
{
    unsigned endian[2] = { 0, 0 } ;
    long * casted_endian = reinterpret_cast<long*>( endian );
    std::cout << *casted_endian << std::endl;
} 
```

我使用`objdump`. 让我们破译一下。

```
 804879c:   55                      push   %ebp
 804879d:   89 e5                   mov    %esp,%ebp
 804879f:   83 e4 f0                and    $0xfffffff0,%esp
 80487a2:   83 ec 20                sub    $0x20,%esp 
```

这些行只是函数的序言，忽略它们。

```
 unsigned endian[2] = { 0, 0 } ;
 80487a5:   c7 44 24 14 00 00 00    movl   $0x0,0x14(%esp)
 80487ac:   00 
 80487ad:   c7 44 24 18 00 00 00    movl   $0x0,0x18(%esp)
 80487b4:   00 
```

从这两行中，您可以看到 (0x14)%esp 初始化为 0。因此您知道数组`endian`在堆栈上，位于寄存器 %ESP（堆栈指针）+ 0x14 中的地址。

```
 long * casted_endian = reinterpret_cast<long*>( endian );
 80487b5:   8d 44 24 14             lea    0x14(%esp),%eax 
```

LEA 只是一个算术运算。EAX 现在包含 %ESP+0x14，它是堆栈上数组的地址。

```
 80487b9:   89 44 24 1c             mov    %eax,0x1c(%esp) 
```

在地址 ESP + 0x1c （这是变量的位置`casted_endian`）我们放置 EAX，因此是字节序的第一个字节的地址。

```
 std::cout << *casted_endian << std::endl;
 80487bd:   8b 44 24 1c             mov    0x1c(%esp),%eax
 80487c1:   8b 00                   mov    (%eax),%eax
 80487c3:   89 44 24 04             mov    %eax,0x4(%esp)
 80487c7:   c7 04 24 40 a0 04 08    movl   $0x804a040,(%esp)
 80487ce:   e8 1d fe ff ff          call   80485f0 <std::ostream::operator<<(long)@plt> 
```

然后我们使用相关参数准备对 operator << 的调用，而不再进行任何检查。就是这样，程序将不再进行任何检查。变量的类型与机器完全无关。

现在，当读取不在数组中`operator<<`的部分时，可能会发生两件事。`*casted_endian`

它的地址要么在当前映射的内存页中，要么不在。在第一种情况下，`operator<<`将阅读该地址的任何内容而不会抱怨。这可能会在屏幕上写一些奇怪的东西。在第二种情况下，您的操作系统会抱怨程序试图读取他无法读取的内容，并引发中断。这就是著名的分段错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:17:02.650

If you try to cast to a size larger than the array, you'll get undefined behavior. It will probably try to read the contents of the memory that comes right after the array, but that result is not guaranteed and need not be consistent either.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:24:42.090

我的天。我在这里要说的是为什么这适用于*大多数*架构，但我不能说这实际上有多少是标准的。

你在那里做的是将数组`endian`转换成一个短的。现在，数组基本上是指针，数组的名称实际上保存了第一个元素的地址。唯一真正的区别是数组包含更多有用的元数据，并且数组上的某些操作是不同的（`sizeof`例如）。然后，您将使用该地址 ( `endian`) 并从中创建一个`short`指针。内存地址保持不变，只是您对指向的数据进行了不同的解释。然后，您将取消引用此指针以取回该值，并将其分配给`x`.

一个快速的旁注。这可能不适用于所有系统。在 C 中，`int`仅定义为与架构的本机字大小一样宽（x86 上为 4 个字节，x86_64 上为 8 个字节）。`short`然后仅定义为比 int 短（或等于，如果内存服务正确）。因此，该代码将在 8 位架构上失败。为此，目标数据类型的字节大小必须等于或小于数组的大小。

同样，`long`只是定义为比 长`int`，通常在 x86 和 x86_64 上分别为 8 或 16 个字节。在这种情况下，此代码将适用于 x86：

```
unsigned char endian[8] = {1,2,3,4,5,6,7,8};
long x = *(long*)endian; 
```

无论如何，处理器的字节顺序完全取决于处理器。x86 是小端（并且基本上开始了 LE 设备的约定，IIRC）。SPARC 是大端（直到 9，它可以是两者）。ARM 和 MIPS 也是可配置的，Microblaze 取决于使用的总线（AXI 或 PLB）。无论如何，字节序不仅限于处理器，在与硬件或其他计算机通信时也是一个问题。

对于您的最后一个问题，最重要的字节被称为因为该值表示大于较小字节可以表示的最大值。在 16 位字的情况下，最低有效字节可以表示 0-255，最高有效字节可以表示 256-65535。

在任何情况下，除非您正在进行低级系统编程（我的意思是直接修改内存）或编写通信协议，否则您永远*不需要*担心字节顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:33:11.823

```
unsigned char endian[2] = {1, 0};
short x;

x = *(short *) endian; 
```

此代码具有未定义的行为。结果可以`x`设置为 1、256、4000，或者程序可能会崩溃，或者其他任何事情都可能合法地发生。即使不考虑数组是否足够大以适应它所转换的类型，情况也是如此。

这是对代码的重写，以使其合法并按照作者的意图进行。

```
unsigned char endian[sizeof(short)] = {1};
short x;
std::memcpy(&x, endian, sizeof(short)); 
```

如果您要编写试图`int`从该数组中取出一个的代码，那么它将访问合法数组边界之外，您将再次遇到未定义的行为；什么事情都可能发生。

> 在这种情况下，分配了一个包含两个单字节元素的数组。为什么说 1 是最有意义的字节？

（我猜你的意思是问为什么`endian[1]`据说保存最重要的字节。）

因为在那个例子中，系统是小端的，正如你所说，小端的定义是内存位置中具有最高地址的最高有效字节。`endian[1]`具有比`endian[0]`因此`endian[1]`保存最高有效字节更高的地址。

# oracle - ORA-12154: TNS: 无法解析指定的连接标识符 (PLSQL Developer)

> ID：12825635
> 
> 赞同：5
> 
> 时间：2012-10-10T18:09:14.000
> 
> 标签：oracle, plsql, sqlplus, plsqldeveloper, tnsnames

我需要使用 PLSQL Developer 来访问 oracle 数据库。当我尝试连接到我的数据库时出现以下错误。`ORA-12154: TNS:could not resolve the connect identifier specified.`我可以从命令行使用 SQLPLUS 连接到数据库，并且**tnsping**成功返回，但我不知道为什么 PLSQL Developer 不起作用 - 它使用了正确的*tnsnames.ora*文件，以及那里的连接字符串是正确的，因为它与**tnsping**使用的相同。

任何人都知道我能做些什么来解决这个问题？我已经查看了有关此特定错误的其他线程，但没有运气。

**tnsnames.ora**

```
 ORCL =
      (DESCRIPTION = 
      (ADDRESS = (PROTOCOL = TCP)(HOST = MININT-AIVKVBM)(PORT = 1521)) 
      (CONNECT_DATA = 
        (SERVER = DEDICATED) 
        (SERVICE_NAME = orcl)
      )
    ) 
```

**sqlnet.ora**

```
 SQLNET.AUTHENTICATION_SERVICES= (NTS)
     NAMES.DIRECTORY_PATH= (TNSNAMES, EZCONNECT) 
```

**sqlpus 命令行** [图像在这里](http://i.stack.imgur.com/yH5lL.png)

**PLSQL 开发人员连接首选项**：[图片在这里](http://i.stack.imgur.com/WdbUP.png)

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-11T14:19:08.187

答案只是将 PLSQL Developer 文件夹从“Program Files (x86)”文件夹移动到“Program Files”文件夹中——很奇怪！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T16:13:59.857

此错误非常常见，通常是您尝试建立与数据库的连接时遇到的第一个错误。我建议修复 ORA-12154 的 6 个步骤：

1.  检查实例名称是否已在 tnsnames.ora 中正确输入。
2.  实例或数据库名称的末尾不应有控制字符。
3.  TNS 条目周围的所有括号都应正确终止
4.  sqlnet.ora 中的域名条目不应与完整的数据库名称冲突。
5.  如果问题仍然存在，请尝试在 tnsnames.ora 中重新创建 TNS 条目。
6.  最后，您可以使用 SQL*Net Easy 配置实用程序添加新条目。

欲了解更多信息：[http ://turfybot.free.fr/oracle/11g/errors/ORA-12154.html](http://turfybot.free.fr/oracle/11g/errors/ORA-12154.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T14:34:26.973

由于我无法添加评论，只是想我会发布这个以完成。tufy 的回答是正确的，它与正在运行的应用程序路径中的括号（括号）有关。

> 存在一个现有的网络错误，其中网络层无法解析在尝试连接到 Oracle 的可执行文件的路径中包含括号的程序位置。

提交给 Oracle，参考错误 3807408。

[资源](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/ab662d63-6385-4f73-b27f-d526048f601f/connecting-to-oracle-on-64bit-x64-machine)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-28T08:38:55.313

在程序文件 x86 和程序文件中复制粘贴 pl sql developer。如果客户端安装在其他分区/驱动器中，则也将 pl sql developer 复制到该驱动器。并从 pl sql developer 文件夹而不是桌面快捷方式运行。

终极解决方案！寒意

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T14:44:53.197

对我来说，tnsnames.ora 连接标识符的格式不正确。标识符字符串的缩进是必需的，如注释中的 tnsnames.ora 示例所示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-24T14:23:10.633

*   它不起作用，所以我切换到 oracle sql developer 并且它没有问题（在 1 分钟内建立连接）。
*   这个链接给了我一个[连接到 MS Access](https://forums.oracle.com/thread/2489641)的想法，所以我在 oracle sql developer 中创建了一个用户，并尝试在 Toad 中连接到它并且它工作。

或第二种解决方案

您可以通过在 Toad 的连接屏幕中提供主机和端口来尝试使用 Direct 而不是 TNS 进行连接

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-06-19T15:37:28.880

另外除了上述解决方案，还要检查tnsname ora文件存在的位置，并与环境变量中的路径进行比较

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-11-05T09:58:10.300

我在工作中遇到了问题。oracle 服务器已“修补”，我使用的数据库之一无法通过 TNSNames 条目连接，而是通过基本连接。数据库已启动，管理员可以看到它已启动并正在运行。

此外，任何使用 TNS 连接到数据库的应用程序也无法正常工作。

发现的问题是 TNS 文件中的数据库名称不正确，但由于某种原因，它已经工作了多年。更正名称为我们修复了它。我确实发现 Oracle SQL Developer 即使在我更新它之后仍然使用旧的 TNS 条目，而且我不想只为一个数据库连接重新安装它。似乎在创建数据库时，它被赋予了一个比其他名称更小的名称，并且通过 TNSNames 文件中的一些剪切和粘贴操作，它被混淆了。没有人确定它是如何工作的，因为我们正在对其进行调查，但 oracle 补丁确保名称必须是正确的

名称的一个例子是它被记录为“DBName.Part1.Part2”，但实际上数据库名称是“DBName”

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-28T21:05:58.770

只是想补充一下——显然这也可能是由于安装了 Instant Client for 10，然后意识到您想要完整安装并在并行目录中再次安装它。我不知道为什么这会破坏它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-18T02:04:35.250

只需将 tnsnames 和 sqlnet 文件从 Oracle home 复制并粘贴到 PLSQL Developer Main 文件夹中。使用以下查询获取 oracle 主页

select substr(file_spec, 1, instr(file_spec, '\', -1, 2) -1) ORACLE_HOME from dba_libraries where library_name = 'DBMS_SUMADV_LIB';

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-04-07T14:20:04.123

我在运行 CentOS7 和可从 Windows 7 访问的 Oracle 11GR2 的 VM 上遇到了同样的问题，解决方案很奇怪，在我的本地计算机上，指向数据库的 tnsnames 在服务名称之前有一个空格，我只是删除了这个空间然后我是能够连接。

一个简单的例子。

错误的 tns 名称。

[这是一个空白]XE = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE) )

EXTPROC_CONNECTION_DATA = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))) (CONNECT_DATA = (SID = PLSExtProc) (PRESENTATION = RO))

正确的 tnsnames。

XE = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))

EXTPROC_CONNECTION_DATA = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))) (CONNECT_DATA = (SID = PLSExtProc) (PRESENTATION = RO))

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2014-10-10T09:39:10.143

## ORA-12154: TNS: 无法解析指定的连接标识符 (PLSQL Developer)

答：转到您安装了 ORACLE DATABASE 的文件夹。比如`E:\oracle\product\10.2.0 [or as your oracle version]\db-1\network\ADMIN`然后复制两个文件（1）sqlnet.ora，（2）tnsnames.ora并关闭这个文件夹。转到已安装 ORACLE DEVELOPER 的文件夹。例如`E:\DevSuitHome_1\NETWORK\ADMIN`然后重命名这两个文件（1）sqlnet.ora，（2）tnsnames.ora并将两个复制的文件粘贴到这里就可以了。

# c# - ResolveUrl 将随机字符串添加到实际 url

> ID：12825639
> 
> 赞同：1
> 
> 时间：2012-10-10T18:09:21.387
> 
> 标签：c#, url, resolveurl

我`resolveUrl`用来调用我的`web config`. 最近我的错误日志给了我一个问题，它在该路径前添加了一个长字符串。所以要清楚，它解决了正确的问题，`url`但添加了一个超过 240 个字符长的字符串。我想知道是否有人对此有任何疑问。

这是电话：

```
string originalImage = ResolveUrl(m_photoVirtualPath) + "/" + table.Rows[0]["Key"].ToString() + "/" + table.Rows[0]["LargeImageFileName"].ToString(); 
```

这是输出错误：

> (F(7teHGa3jtAWTm0cKjtcKe8aKQMb99ykEWnc2c8L7RGHP28aRwzXYDhA8vWHRepIqFN67FGtHRN41v3kiseUsbMoNZqUDgS9h7g8acMSFRDPTYxbM3UA2pUXAUzWJcCWU4A3oVlFz6YoAqXVCAGNJiGbUiWdjcsREGNAkdQHkzX6SjCf12QonsibppUVPiean-saajTAzQjgoRK1qnFactg2)) **/storage-pub/Photo** /2901502/40719_19760_2903337.jpg

这`/storage-pub/Photo`是上面粗体显示的正确解析`url`，之后的目录也是正确的，但我不知道解析之前的字符串是什么`url`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:12:28.080

你可以试试`Server.MapPath`

```
string originalImage = Path.Combine(Server.MapPath(m_photoVirtualPath) , table.Rows[0]["Key"].ToString() , table.Rows[0]["LargeImageFileName"].ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:51:03.510

经过一些调试后发现，它是预先附加到 URL 的 cookie 字符串。仍然不确定它为什么或如何发生，但通过使用 vs2010 中的跟踪功能，我能够查看我所有的 cookie 和会话字符串，并从那里我能够将它们与 URL 中的字符串进行比较。谢谢大家的帮助和指导。

# c# - 为什么这个 Include 不起作用？

> ID：12825643
> 
> 赞同：2
> 
> 时间：2012-10-10T18:09:31.717
> 
> 标签：c#, mysql, entity-framework-4, eager-loading

我将值传递给一个使用 foreach 循环遍历集合的方法。在循环中，`Include`使用从实体框架到预加载的语句。这是我传入的：

```
var exp = new Collection<Expression<Func<Foo,object>>>(); 
```

为什么当我使用它时：

```
exp.Add(f => f.Bars.Select(b=> b.Employees.Select( e=> e.Position)));
exp.Add(f => f.Bars.Select(b=> b.Employees.Select( e=> e.Bank))); 
```

和 Employee、Position 和 Bank 都有字段`Name`，它会在不同字段之间混淆 Name？如中，银行和职位都将在其姓名字段中包含员工姓名。更明确地说，无论出于何种原因

在数据库中：

```
Employee.Name = "Jon";
Employee.Bank.Name = "World Bank";
Employee.Position.Name = "CEO"; 
```

数据来自`.Include`：

```
Employee.Bank.Name == "Jon" //true
Employee.Position.Name == "Jon" //true 
```

额外信息，在接受 exp 的方法内部

```
DbSet<Foo> dbSet = context.Set<Foo>();
IQueryable<Foo> query = dbSet;

if (exp != null)
{
 foreach (var incProp in exp)
 {
  query = query.Include(incProp);
 }
} 
```

我在我的代码中做错了吗？

*编辑*

```
public class Foo
{
 public int FooId { get; set; }
 public virtual List<Bar> Bars { get; set; }
}

public class Bar
{
 public int BarId { get; set; }
 public virtual Foo Foo { get; set; }
 public int FooId { get; set; }
 public virtual List<Employee> Employees { get; set; }
}

public class Employee
{
 public int EmployeeId { get; set; }
 public int BarId { get; set; }
 public virtual Bar Bar { get; set; }
 public int BankId { get; set; }
 public virtual Bank Bank { get; set; }
 public int PositionId { get; set; }
 public virtual Position Position { get; set; }
 public string Name { get; set; }
}

public class Bank
{
 public int BankId { get; set; }
 public string Name { get; set; }
}

public class Position
{
 public int PositionId { get; set; }
 public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:58:44.200

我认为问题不在于您显示的代码。我根据您在上面放置的内容创建了一个控制台应用程序，它输出了数据库中的内容。这是整个应用程序：

```
namespace ExampleCF
{
    public class Foo
    {
        public int FooId { get; set; }
        public virtual List<Bar> Bars { get; set; }
    }

    public class Bar
    {
        public int BarId { get; set; }
        public virtual Foo Foo { get; set; }
        public int FooId { get; set; }
        public virtual List<Employee> Employees { get; set; }
    }

    public class Employee
    {
        public int EmployeeId { get; set; }
        public int BarId { get; set; }
        public virtual Bar Bar { get; set; }
        public int BankId { get; set; }
        public virtual Bank Bank { get; set; }
        public int PositionId { get; set; }
        public virtual Position Position { get; set; }
        public string Name { get; set; }
    }

    public class Bank
    {
        public int BankId { get; set; }
        public string Name { get; set; }
    }

    public class Position
    {
        public int PositionId { get; set; }
        public string Name { get; set; }
    }

    public class Model : DbContext
    {
        public DbSet<Foo> Foos { get; set; }
        public DbSet<Bar> Bars { get; set; }
        public DbSet<Employee> Employees { get; set; }
        public DbSet<Bank> Banks { get; set; }
        public DbSet<Position> Positions { get; set; }

        public Model()
        {
            Configuration.LazyLoadingEnabled = false;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Model context = new Model();
            var exp = new Collection<Expression<Func<Foo, object>>>();

            Foo foo = new Foo();
            Bar bar = new Bar();
            Employee emp = new Employee() { Name = "employee" };
            Bank bank = new Bank() { Name = "bank" };
            Position position = new Position() { Name = "position" };
            foo.Bars = new List<Bar>();
            foo.Bars.Add(bar);
            bar.Employees = new List<Employee>();
            bar.Employees.Add(emp);
            emp.Position = position;
            emp.Bank = bank;
            context.Foos.Add(foo);
            context.SaveChanges();

            exp.Add(f => f.Bars.Select(b => b.Employees.Select(e => e.Position)));
            exp.Add(f => f.Bars.Select(b => b.Employees.Select(e => e.Bank)));

            DbSet<Foo> dbSet = context.Set<Foo>();
            IQueryable<Foo> query = dbSet;

            if (exp != null)
            {
                foreach (var incProp in exp)
                {
                    query = query.Include(incProp);
                }
            }

            var first = query.ToList().FirstOrDefault();
            var firstEmp = first.Bars.First().Employees.First();
            Console.WriteLine(String.Format("{0} | {1} | {2}", firstEmp.Name, firstEmp.Bank.Name, firstEmp.Position.Name));
        }
    }

} 
```

输出： `employee | bank |position`

您是否要向查询中添加任何其他内容，或者您​​可能正在以某种方式创建匿名类型？

# scala - 如何使用 Play 读取 Scala 中的文件！2.0？

> ID：12825644
> 
> 赞同：3
> 
> 时间：2012-10-10T18:09:32.053
> 
> 标签：scala, file, csv, playframework-2.0

我有一个 CSV 文件。我应该把它放在哪里以及如何读取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T20:11:25.593

Using`io.Source.fromFile("/public/myfile.csv")`也适用于类路径之外的文件。

**警告：**对于公用文件夹的*相对路径*`"public/..."`，您应该以绝对路径开头，或者`"./public/..."`不要使用*绝对*路径`"/public/..."`。

*（nb 我没有直接回复 Luigi Plinge 评论的声誉）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:23:54.443

您可以[将此 scala 包装器](https://github.com/tototoshi/scala-csv)用于[opencsv](http://opencsv.sourceforge.net/)。您可以将文件放在类路径中，然后用于`getClass.getResourceAsStream("file.csv")`获取`InputStream`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:51:52.443

我最终将文件放在`/public`.

然后阅读使用

```
import scala.io.Source

val is = Application.getClass().getResourceAsStream("/public/myfile.csv")    
val src = Source.fromInputStream(is)
val iter = src.getLines 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-11T00:15:27.577

这就是我在这里工作的方式：

```
import java.io._

def index = Action {

    //Ok(views.html.index())

    Ok.sendFile(new java.io.File("../spark-backend/csv/UsersGroupedByRegistrationMonthYear.csv"))

} 
```

这里有一些很好的文档： [https ://www.playframework.com/documentation/2.0.1/ScalaStream](https://www.playframework.com/documentation/2.0.1/ScalaStream)

# asp.net - 使用来自 HTTP 处理程序的 ASP.NET 资源文件

> ID：12825649
> 
> 赞同：3
> 
> 时间：2012-10-10T18:09:53.033
> 
> 标签：asp.net, resources, httphandler

有什么方法可以访问存储在 App_LoacalResource 或 App_GlobalResources 中的资源？我熟悉如何为网页表单页面执行此操作，但无法从 .ashx 文件中弄清楚如何执行此操作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-17T00:44:54.460

试试这个：

```
HttpContext.GetGlobalResourceObject 
```

或者

```
HttpContext.GetLocalResourceObject 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:23:21.700

你可以试试

本地资源

```
var result = GetLocalResourceObject("Name").ToString(); 
```

全球资源

您可以尝试使用`GetGlobalResourceObject`方法

链接：http: [//msdn.microsoft.com/fr-fr/library/vstudio/ms153593.aspx](http://msdn.microsoft.com/fr-fr/library/vstudio/ms153593.aspx)

注意：GetLocalResourceObject 在 IHttpHandler 中不可用（与 Alex 一起查看）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:05:56.370

好的，经过一段时间的调查，我选择了下一种方式：

```
 Dictionary<string, string> resAttrs = new Dictionary<string, string>();

        ResXResourceReader rsxr = new ResXResourceReader(HttpContext.Current.Request.PhysicalApplicationPath + "Resource.resx");

        foreach (DictionaryEntry d in rsxr)
            resAttrs.Add(d.Key.ToString(), d.Value.ToString()); 
```

然后通过`resAttrs`字典访问资源。也许这不是最好的方法，但对我有用。

# intellij-idea - 我可以使用 gradle 自动更新我的 Intellij 项目以使用最新的快照吗？

> ID：12825650
> 
> 赞同：4
> 
> 时间：2012-10-10T18:09:53.160
> 
> 标签：intellij-idea, jenkins, gradle, artifactory

有没有办法让 IntelliJ 使用 gradle 自动更新到依赖项的最新快照？

我目前有两个项目，A 和 B。A 是 B 使用的库。我同时从头开始开发它们。

我有一个 Jenkins 构建，它从开发分支检查代码，运行 gradle 构建脚本，然后将工件发布到我的快照工件存储库。

我`build.gradle`设置为使用我的快照存储库中的 integration.latest，但 IntelliJ 不会自动提取更改。我必须去jetgradle，点击刷新然后导入新的快照，然后删除之前的快照。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:42:11.217

So it seems like there is not a way to pull in the latest snapshot automatically. I wanted to have nicely modularized library projects but still actively develop them at the same time I was working on projects that depended on them.

I ended up creating a main project with its own build.gradle. I then added git submodules for my library projects.

This allows me to have separated library projects that I can reuse but also a fast development cycle as I don't have to wait for artifacts to get pushed to my artifactory server.

My Jenkins builds still pull artifacts from my artifactory server though.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-08T17:10:04.860

如果您更新项目 A 中的本地代码并希望看到它们反映在项目 B 中并以 A 作为依赖项，您应该`gradle install`在项目 A 上运行。（安装在 IntelliJ 任务面板上可用）安装将更新本地 maven 存储库中的 jar，并且将使用最新代码更新 IntelliJ。

# java - 来自 Spring Tool Suite 中 org/apache/commons/logging/LogFactory 的 NoClassDefFound 异常

> ID：12825652
> 
> 赞同：2
> 
> 时间：2012-10-10T18:10:01.973
> 
> 标签：java, spring, exception, logfactory

我正在使用 Spring Tool Suite 进行一些测试以熟悉它。我正在运行一个简单的持久性测试。当我尝试运行测试时，出现以下异常。有没有人对这是来自哪里以及如何解决它有任何建议？

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory
at org.springframework.context.support.AbstractApplicationContext.<init>(AbstractApplicationContext.java:162)
at org.springframework.context.support.AbstractRefreshableApplicationContext.<init>(AbstractRefreshableApplicationContext.java:90)
at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.<init>(AbstractRefreshableConfigApplicationContext.java:59)
at org.springframework.context.support.AbstractXmlApplicationContext.<init>(AbstractXmlApplicationContext.java:61)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:136)
at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
at com.persistencetest.repositories.test.UserRepositoryImplementationTest.main(UserRepositoryImplementationTest.java:17) 
```

我怀疑错误是否在我的代码中，因为这似乎来自 Spring 内部的某些东西。但我的代码如下。

```
package com.persistencetest.repositories.test;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.persistencetest.entities.User;
import com.persistencetest.repositories.UserRepository;
import com.persistencetest.repositories.UserRepositoryImplementation;

public class UserRepositoryImplementationTest {

    /**
     * @param args
     */
    public static void main(String[] args)
    {
        ApplicationContext context = new ClassPathXmlApplicationContext("application-config.xml");

        UserRepository userRepository = context.getBean("userRepository", UserRepositoryImplementation.class);

        User user = context.getBean("user", User.class);

        userRepository.registerUser(user);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:25:45.230

您需要包含 commons-logging JAR 或使用实现它的日志系统。

# matlab - 在 Matlab 中向 Surf 添加标签和轴

> ID：12825653
> 
> 赞同：1
> 
> 时间：2012-10-10T18:10:02.533
> 
> 标签：matlab

> **可能重复：**
> [创建带有标签的 Surf()](https://stackoverflow.com/questions/12821605/creating-surf-with-labels)

```
title('Euro Swap Rates');

xlabel('Maturity');

ylabel('Date');

zlabel('Swap Rate');

set(gca, 'YTick', 1:100:length(dates));

set(gca, 'YTickLabel', dates(1:100:length(dates))); 

set(gca, 'XTick', 0:10:length(rates_header)); 

set(gca, 'XTickLabel', rates_header(0:10:length(rates_header))); 
```

剩下两个问题：1\. 2.

1.  我希望`x`Tick 是`1y`然后`10y20y...50y`所以第一步大小适用`9y`于`10y`所有剩余的点，除了最后`2`一个是`55y`，`60y`所以应该间隔`5y`开，我该如何处理这个不规则的间距？
2.  我希望日期仅显示每年 1 月 1 日和 6 月上旬（或最接近这些日期的工作日）。（目前，上面的代码只是获取向量的长度并按照指示对其进行拆分，我需要某种方式来查看数组中的值并进行相应的拆分。

好的，做到了，似乎是一种有点笨拙的方法，但它完成了

```
keydates={'01/01/2000','01/06/2000','01/01/2001','01/06/2001','01/01/2002','01/06/2002','01/01/2003','01/06/2003','01/01/2004','01/06/2004','01/01/2005','01/06/2005','01/01/2006','01/06/2006','01/01/2007','01/06/2007','01/01/2008','01/06/2008','01/01/2009','01/06/2009','01/01/2010','01/06/2010','01/01/2011','01/06/2011','01/01/2012','01/06/2012'};
 keydates2=datenum(keydates,'dd/mm/yyyy');
 dates2=datenum(dates,'dd/mm/yyyy');
 [index]=ClosestDate(dates2,keydates2);
 ytick = index;
 yticklabels = keydates;
 set(gca, 'YTick', ytick); 
 set(gca, 'YTickLabel', yticklabels); 
```

ClosestDate 是我在 dates2 中查找第一个日期的函数，它比 keydates2 中的每个日期都多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T04:00:19.887

对于第一季度，只需`XTick`完全按照您的描述设置属性：[编辑：将双引号 (") 的错误使用更改为单引号 (')]

```
xtick = [1, 10, 20, 30, 40, 50, 55, 60];
xticklabels = {'1y', '10y', '20y', '30y', '40y', '50y', '55y', '60y'};

set(gca, 'XTick', xtick);
set(gca, 'XTickLabel', xticklabels); 
```

`dates`如果没有关于数组包含什么的信息，很难回答 Q2 ，但你可以做同样的事情：

```
ytick = 1:6:60; % or whatever is appropriate according to the scale you are using
yticklabels = {'Jan 2005', 'Jun 2005', 'Jan 2006', 'Jun 2006', ...etc };

set(gca, 'YTick', ytick);
set(gca, 'YTickLabel', yticklabels); 
```

当然，您也可以从刻度值自动生成字符串 - 如果您需要帮助，只需请求帮助即可。

# vsto - VSTO 重新映射关闭窗口按钮

> ID：12825656
> 
> 赞同：1
> 
> 时间：2012-10-10T18:10:13.993
> 
> 标签：vsto

我正在创建一个 vsto excel 加载项，并试图找到一种方法来更改当前功能或添加在为当前电子表格按下关闭窗口按钮时调用函数的能力。有谁知道这是否可能或有任何建议？到目前为止，我还没有找到很多东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T13:53:01.937

Workbook 类有一个名为 BeforeClose 的事件，您可以使用它来检测工作簿何时被关闭。您还可以通过将 Cancel 参数设置为 true 来使用此事件来阻止它被关闭。

若要在当前工作簿上检测此事件，您必须为当前工作簿上的 BeforeClose 事件附加事件处理程序。

最简单的方法是在引发 Application.WorkbookActivate 时将事件处理程序附加到 BeforeClose 事件。并将其从先前活动的工作簿中分离出来。

例如

```
private Workbook _activeWorkbook = null;

private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    Application.WorkbookActivate += Application_WorkbookActivate;

    // Attach to the BeforeClose event on the Workbook that 
    // was created when Excel started
    _activeWorkbook = Application.ActiveWorkbook;
    if (_activeWorkbook != null)
    {
        _activeWorkbook.BeforeClose += ActiveWorkbook_BeforeClose;
    }
}

private void Application_WorkbookActivate(Microsoft.Office.Interop.Excel.Workbook Wb)
{
    if (_activeWorkbook != null)
    {
        _activeWorkbook.BeforeClose -= ActiveWorkbook_BeforeClose;
        Marshal.ReleaseComObject(_activeWorkbook);
    }

    _activeWorkbook = Wb;
    _activeWorkbook.BeforeClose += ActiveWorkbook_BeforeClose;
}

private void ActiveWorkbook_BeforeClose(ref bool Cancel)
{
    Cancel = MessageBox.Show("Do you want to close the workbook?", "Close Workbook", MessageBoxButtons.YesNo) != DialogResult.Yes;
} 
```

因此，如果您想更改当前功能或添加在按下当前电子表格的关闭窗口按钮时调用函数的能力，请在 ActiveWorkbook_BeforeClose 方法中添加您的代码。

# java - 在 log4j 中包含堆栈跟踪

> ID：12825660
> 
> 赞同：2
> 
> 时间：2012-10-10T18:10:37.627
> 
> 标签：java, log4j

> **可能重复：**
> [我如何在 java 中将堆栈跟踪添加到我的调试打印输出中](https://stackoverflow.com/questions/54882/how-do-i-in-java-add-a-stacktrace-to-my-debugging-printout)

当没有异常时，在**log4j**的输出中包含堆栈跟踪的最佳方法是什么？我能想到的唯一方法是创建一个新`Exception`实例。

```
log.error("description", new Exception()); 
```

**追问**：我完全了解`Thread.currentThread().getStackTrace()`和`Thread.dumpStack()`。这些输出到控制台，在许多环境中与 log4j 输出是分开的。我正在寻找一种将堆栈跟踪记录到 log4j 而不是控制台的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T18:25:12.890

史蒂夫，我知道你想要当前线程的堆栈跟踪。如果是这样，您可以通过使用`currentThread()`Thread 类的静态方法，然后获取堆栈跟踪来获取它。就像是：

```
StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace(); 
```

如果要转储所有正在运行的线程的堆栈跟踪，可以使用`getAllStackTraces()`Thread 类的静态方法。

```
Map<Thread,StackTraceElement[]> stackTraces = Thread.getAllStackTraces(); 
```

**更新**

史蒂夫，我尝试了`dumpStack()`Thread 类的静态方法，它使用一个空的 exeption 来执行转储，所以，我认为你正在做的方式是正确的，或者“最好的方式”。

# postgresql - 同一张表上的两个“SELECT FOR UPDATE”语句会导致死锁吗？

> ID：12825663
> 
> 赞同：13
> 
> 时间：2012-10-10T18:10:48.320
> 
> 标签：postgresql, rails-postgresql, database-deadlocks

假设两个并发事务在 Postgresql DB 上执行以下查询：

*交易A：*

```
SELECT * FROM mytable WHERE id IN (1, 2, 3, 4) FOR UPDATE 
```

*交易乙：*

```
SELECT * FROM mytable WHERE id IN (6, 3, 2, 1) FOR UPDATE 
```

由于 Postgresql 以不一致的顺序获取行锁，是否可能发生死锁？例如，如果 Postgresql 以本例中给出的 id 顺序获取行锁，那么就有可能发生死锁。

或者 Postgresql 内部是否足够智能以始终`SELECT FOR UPDATE`以同一表上的同时、离散语句不能相互死锁的方式获取行锁（例如，始终按主键的顺序获取行锁）？

如果 Postgresql*不能*自动防止这种死锁的发生，有没有办法修改查询来防止这种情况发生（例如，如果事实上 Postgresql 按照给定 id 的顺序获取行锁，那么一致地对 id 进行排序应该可以防止死锁)?

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:52:03.493

对不起，我有另一个答案，但它是错误的。

该文档声明在 FOR UPDATE 子句之前应用了 ORDER BY 子句。因此，无论选择行的顺序如何，都可以获取锁（我已经通过测试确认了这一点）。如果您需要以不同的顺序选择它们，您可以使用：

```
SELECT * FROM (SELECT * FROM table ORDER BY id FOR UPDATE) ORDER BY another_column; 
```

您可能想在 PostgreSQL[邮件列表](http://archives.postgresql.org/pgsql-general/)上尝试您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:51:22.927

来自[http://www.postgresql.org/docs/9.1/static/explicit-locking.html](http://www.postgresql.org/docs/9.1/static/explicit-locking.html)：

> PostgreSQL 自动检测死锁情况并通过中止涉及的事务之一来解决它们

该页面使用了一个涉及`UPDATE`s 的示例，这相当于`SELECT ... FOR UPDATE`锁定。

# javascript - 访问 JavaScript 数组中的数据

> ID：12825664
> 
> 赞同：0
> 
> 时间：2012-10-10T18:10:48.867
> 
> 标签：javascript, arrays

> **可能重复：**
> [在 javascript 对象数组中按 id 查找对象](https://stackoverflow.com/questions/7364150/find-object-by-id-in-array-of-javascript-objects)

所以我有这个：

```
mapArray=
[{"Title":"crop_rotation","subs":"5,6,7,10"},
{"Title":"cover_crops","subs":"2,5,7,8,9,13,14"},
{"Title":"binary_wetlands","subs":"1,2,3,4,5,6,7,8,9,10,11"}] 
```

我正在尝试根据标题访问 subs 值。我在尝试

```
listofSubs=mapArray["crop_rotation"]("subs"); 
```

我没有得到任何回报。我在这里想念什么？我需要获取该列表并转换为字符串，但我认为它会作为字符串出现，因为我已经解析了对象？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:14:40.937

首先，您必须找到具有特定标题的对象。您必须通过遍历数组并将每个对象`Title`与您的值进行比较来做到这一点：

```
function find(arr, key, value) {
    for(var i = 0, l = arr.length; i < l; i++) {
        if(arr[i][key] === value)) {
            return arr[i];
        }
    }
    // return {}; // if you would want it null-safe
} 
```

然后就可以访问对应的`subs`属性了：

```
var obj = find(mapArray, 'Title', 'crop_rotation');
if(obj) {
    var listofSubs = obj.subs;
} 
```

* * *

为什么您的代码不起作用的解释：

```
mapArray["crop_rotation"]("subs");
//      |-      1      -|-   2  -| 
```

*   `|1|`尝试访问`crop_rotation`中对象的属性`mapArray`。数组没有这样的属性，在你的情况下没有对象。`crop_rotation`是属性之一的**值。**
*   `|2|`是一个函数调用。它尝试调用所引用的函数并作为第一个参数`mapArray["crop_rotation"]`传递。如果不是函数（如您的情况），`"subs"`它将引发错误。`mapArray["crop_rotation"]`

* * *

**更多的信息：**

*   [MDN JavaScript 指南 # 数组](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Predefined_Core_Objects#Array_Object)
*   [MDN JavaScript 指南 # 使用对象](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)
*   [访问/处理（嵌套）对象、数组或 JSON](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-access-a-specific-value)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:15:07.487

`alert(mapArray[0].Title)`=“作物旋转”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:15:08.963

您所拥有的是那里的一组对象。并且数组是数字索引的。因此，要获得您正在寻找的价值：

```
mapArray;    // returns array of objects
mapArray[0]; // returns first object in the array

// returns the value of the `"subs"` key in the first object in the array
mapArray[0]['subs']; 
```

请注意，这不会按标题找到它，您需要更多逻辑。请参阅 Felix Kling 的回答，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:18:34.553

您只能通过其元素的字段访问列表（数组）。出于目的，它被命名为 list(array) - 除了位置之外，它没有任何索引。所以你可以访问这样的 mapArray[0] 列表。如果想按标题访问它你应该有这样的结构

```
{ "crop_rotation": ...,
  "cover_crops" :....,
  .... 
} 
```

如果您的输入是固定的，您无法更改它，则必须对其进行预处理以满足您的需求。因此，您必须遍历数组并从中生成字典，将`"Title"`值更改为新字典的键。

# java - Eclipse 插件：向项目添加自定义性质时将 jar 添加到类路径

> ID：12825668
> 
> 赞同：1
> 
> 时间：2012-10-10T18:11:01.597
> 
> 标签：java, eclipse, eclipse-plugin

我目前正在开发一个 Eclipse 插件，我有点迷路了......

我有一个自定义性质，我想在用户添加这个性质时将.jar 添加到用户项目的类路径中（我想以`configure()`我的性质的方法更新项目的类路径）。

我只是不知道该怎么做......我想我明白我必须将这个.jar“映射”到一个IClasspathEntry，然后我可以将它添加到我的IJavaProject中。问题是如何在我的插件中干净地包含这个 jar，以及如何将它“映射”到 IClasspathEntry（.jar 当前位于我的插件项目根目录的 lib 文件夹中）

提前感谢您的宝贵时间！

瓦伦丁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:04:53.080

首先，如何将其映射到类路径条目：

`IClasspathEntry jar = JavaCore.newLibraryEntry(new Path(jarPath), null, null)`

然后，您可以将此 IClasspathEntry 添加到项目现有类路径的末尾并使用 IJavaProject 中的 get/setRawClasspath 方法进行设置：

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IJavaProject.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/IJavaProject.html)

将此 jar 保存在您的 lib 目录中很好，但您可能需要确保在安装插件时将其解压缩（而不是作为 .jar 保存在 /plugins 目录中），否则项目将无法访问此 jar . 您可以使用 FileLocator 类找到此 jar 的路径：

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FFileLocator.html](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2FFileLocator.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:57:09.310

您需要编写一个 IClasspathContainer，这是您提供的代码，可以在运行时解析具体的类路径条目。

有各种资源可用于如何编写类路径容器，包括[本教程](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-classpath/index.html)。

# asp.net - 注销时删除 cookie

> ID：12825669
> 
> 赞同：11
> 
> 时间：2012-10-10T18:11:02.707
> 
> 标签：asp.net, cookies

在主页的页面加载中，我设置了这样的 cookie：-

```
if (abc == true)
{
    HttpCookie cookie = new HttpCookie("Administrator");
    cookie.Value = "Admin";
    cookie.Expires = DateTime.Now.AddDays(-1);
    Response.SetCookie(cookie);
} 
```

并将cookie用作：-

```
if (Request.Cookies["Administrator"] != null)
{
    if (Request.Cookies["Administrator"].Value == "Admin")
        //some code
} 
```

注销时，我希望此 cookie 过期或被删除。所以我写了： -`Seesion.Abandon();`

现在，即使在我注销后，当我重新登录到主页时.. 该行`Request.Cookies["Administrator"]`仍然不是空的。

奇怪的...！请让我知道这是什么原因和解决方案。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-10T18:14:24.563

来自[**MSDN 文档**](http://msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx)，

> 您不能直接删除用户计算机上的 cookie。但是，您可以通过将 cookie 的到期日期设置为过去的日期来指示用户的浏览器删除 cookie。下次用户向设置 cookie 的域或路径中的页面发出请求时，浏览器将确定 cookie 已过期并将其删除。

你可以这样做：

```
if (Request.Cookies["Administrator"] != null)
{
    HttpCookie myCookie = new HttpCookie("Administrator");
    myCookie.Expires = DateTime.Now.AddDays(-1d);
    Response.Cookies.Add(myCookie);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-10T18:13:54.397

你可以试试

```
Session.Abandon();
Response.Cookies.Clear(); 
```

或者也

```
YourCookies.Expires = DateTime.Now.AddDays(-1d); 
```

链接：http: [//msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-10T18:14:13.557

您必须指定过去的到期日期才能删除特定的 cookie：

```
HttpCookie myCookie = new HttpCookie("Administrator");
myCookie.Expires = DateTime.Now.AddDays(-1d);
Response.Cookies.Add(myCookie); 
```

更多信息可以在这篇 msdn 文章中找到：

[如何：删除 Cookie](http://msdn.microsoft.com/en-us/library/ms178195%28v=vs.100%29.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-10T18:15:50.070

在我看来，你的线

```
cookie.Expires = DateTime.Now.AddDays(-1); 
```

应该立即使您的 cookie 过期。

如果您只是输入错误，那么好消息！您可以通过将过期日期设置为过去来使您的 cookie 过期。

# xcode4 - 尝试导出快照时，我应该如何处理这个 Xcode 管理器错误？

> ID：12825674
> 
> 赞同：0
> 
> 时间：2012-10-10T18:11:14.633
> 
> 标签：xcode4, snapshot, organizer

这是在“项目”屏幕上的 Xcode 4.5 Organizer 中。我有很多快照，包括更新到 Xcode 4.5 后制作的许多快照。如果我选择其中一个（无论哪个都无所谓），然后单击“导出快照”，我会收到一个包含以下消息的对话框：

致命：不明确的参数“ae30b7dea8b5..a934b593abf6”：未知修订版或路径不在工作树中。使用“--”将路径与修订分开。

这使我所有的快照都没用。任何人都可以解释发生了什么以及如何解决它？

我现在实际上不需要恢复快照，所以如果我能修复这个错误，我可以丢弃所有旧的并制作一个新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-02T23:41:34.873

像 Xcode 中的许多问题一样，我只是执行了 cmd + Q 并重新启动了 Xcode。现在它按预期工作。所以至少请尝试一下！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:51:24.377

我不知道原因，但我摆弄了一下，发现了如何解决它。在 Xcode 4.5 中，单击 File =>“Project Settings”，然后在 Snapshots 选项卡上为 Snapshots location 选择“Custom”并输入一个新位置。我输入了 ~/Developer/Xcode/Snapshots 但输入的内容可能并不重要。然后“文件”菜单中的“创建快照”和“恢复快照”项工作，指的是新的自定义位置。

令人惊讶的是，组织者“导出快照”现在也可以使用了！奇怪的！。它指的是旧位置，所有旧快照仍然存在，现在可以访问和导出它们而不会出现错误消息。去搞清楚。

# iphone - 操作 iOS 短信数据库

> ID：12825678
> 
> 赞同：0
> 
> 时间：2012-10-10T18:11:24.620
> 
> 标签：iphone, ios, sms

> **可能重复：**
> [访问 iPhone SMS 文件](https://stackoverflow.com/questions/8501941/accessing-the-iphone-sms-file)

在iOS平台上，是否可以操作核心短信数据库。

例如，假设我想创建一个短信应用程序，这个应用程序基本上是读取 iOS 平台上短信应用程序的数据库。如果有人给我发短信，它会转到默认应用程序，然后也会转到我的。如果我从我的应用程序中删除了特定消息，是否也会将其从默认应用程序中删除？

我知道我可以在 Android 上做到这一点，因为 GoSMS 确实证明这是一次成功，但 iOS 似乎更严格一些，所以首先想知道这是否可能。

如果可能的话，是否有任何关于这样做的教程、指南等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:13:12.293

不，这是不可能的，也永远不会。它对用户是私有的。不允许任何人篡改、阅读、操纵它。绝对没有理由这样做。

您无法创建 SMS 应用程序。

不要将 SMS 应用程序与 IM 应用程序（例如 WhatsApp）混淆。

# redis - 为什么在 Redis 上连续运行相同的查询会产生越来越快的结果？

> ID：12825680
> 
> 赞同：4
> 
> 时间：2012-10-10T18:11:30.357
> 
> 标签：redis

我不相信redis会缓存命令的结果，对吗？如果是这样，那么为什么我会在我的 redis 服务器上看到相同查询的以下内容。作为参考，这是在 VM 中运行的 redis。[我按照http://redis.io/topics/latency](http://redis.io/topics/latency)中的描述检查了 smaps 文件，发现操作系统级别没有交换（进程交换中的所有 0kb），但是是否有可能在 VM 中运行 redis 页面内存磁盘和返回？或者...这些结果是否是由于对常用命令进行了某种 redis 优化而导致的？

```
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(4.46s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(3.77s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(0.92s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(0.64s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(0.67s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(0.73s)
redis 127.0.0.1:6379[4]> scard ClientId:1637
(integer) 796529
redis 127.0.0.1:6379[4]> scard PublisherId:1
(integer) 311092
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(1.88s)
redis 127.0.0.1:6379[4]> sinterstore testdb ClientId:1637 PublisherId:1
(integer) 240001
(0.69s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T06:19:16.407

CPU缓存！很有趣，更多阅读可以[在这里](http://en.wikipedia.org/wiki/CPU_cache)（以及其他地方）

# python - 当我要求 Python 将一个数字乘以 100 时，它会打印该数字 100 次吗？

> ID：12825684
> 
> 赞同：0
> 
> 时间：2012-10-10T18:11:36.010
> 
> 标签：python, math

例如，当我输入时`2 * 100`，我得到： `5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555`

为什么是这样？这是我的代码

```
import math
KeepProgramRunning = True
while KeepProgramRunning:
    print 'Please enter the centimetre value you wish to convert to millimetres '
    a = raw_input()
    print 'The answer is', 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-10T18:12:50.497

那是因为`raw_input()`返回一个字符串

用于`int()`将该字符串转换为整数：

```
a = int(raw_input()) 
```

例子：

```
>>> x = raw_input()
2
>>> x * 5
'22222'
>>> x = int(raw_input())
2
>>> x * 5
10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-10T18:13:21.160

那是因为输入检索一个字符串，所以在这里做：

```
import math
KeepProgramRunning = True
while KeepProgramRunning:
    print 'Please enter the centimetre value you wish to convert to millimetres '
    a = int(raw_input())
    print 'The answer is', 
```

# file - unix sort -s 选项似乎被忽略了

> ID：12825686
> 
> 赞同：2
> 
> 时间：2012-10-10T18:11:41.937
> 
> 标签：file, unix, sorting

我正在尝试对前 2 列的大（10mb）文件进行排序。该文件由 ASCII 241 (±) 分隔。问题是，在正确排序前 2 个数据字段后，无论是否包含 -s 选项，unix 都会继续对行的其余部分进行排序。

命令 ：`sort -k1bn -k2n -s -t$'\xF1' -o sorted_file file_to_sort`

示例数据：（排序合理，所以我可以突出显示问题）

```
 6033718±2±    0±20817742
   6033718±3±20817742      
   6033718±3±20862761      
   6033718±3±SRDV408BC     
   6033718±3±KFT474        
   6033718±3±941764        
   6033718±4±20817742      
   6033718±4±20862761      
   6033718±4±SRDV408BC     
   6033718±4±KFT474        
   6033718±4±941764        
   6033718±5±21501-0-06   ±D13 * TIMING
   6033718±5±17003-0-01   ±VEHICLE OPER
   6033718±6±21501-0-06   ±10  ±0±     
   6033718±6±17003-0-01   ±10  ±0±     
   6033718±9±I± === Applicable Coverage
   6033718±9±I±Volvo D11/13/16 / TIMING
   6033718±9±E±check for oil leak, insp 
```

运行命令后，我得到：

```
 6033718±2±    0±20817742            
   6033718±3±20817742                  
   6033718±3±20862761                  
   6033718±3±941764                    
   6033718±3±KFT474                    
   6033718±3±SRDV408BC                 
   6033718±4±20817742                  
   6033718±4±20862761                  
   6033718±4±941764                    
   6033718±4±KFT474                    
   6033718±4±SRDV408BC                 
   6033718±5±17003-0-01   ±VEHICLE OPER
   6033718±5±21501-0-06   ±D13 * TIMING
   6033718±6±17003-0-01   ±10  ±0±     
   6033718±6±21501-0-06   ±10  ±0±     
   6033718±9±E±check for oil leak, insp
   6033718±9±I± === Applicable Coverage
   6033718±9±I±Volvo D11/13/16 / TIMING 
```

如您所见，查看“3”、“4”和“9”记录，它们后面的第二个字段的数据已被排序，即使排序手册指出 -s 选项将阻止对其余字段进行排序键用完后的线路。

我在哪里错了？

顺便说一句，它似乎在较小的文件上工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:43:12.660

排序键指定为`-k <start>[,<end>]`。如果`<end>`不指定，则使用的键是从`<start>`到行尾，这有点不直观。你可能想要更像这样的东西：

```
sort -k1,1bn -k2,2n -s -t$'\xF1' -o sorted_file file_to_sort 
```

请注意，这些键指定单个字段，而不是“所有字段从...开始直到行尾”的默认值。

# jquery - jQuery：“diff”两个表；显示不常见的行

> ID：12825687
> 
> 赞同：0
> 
> 时间：2012-10-10T18:11:41.233
> 
> 标签：jquery

## 在结帐应用程序中：

只需要显示最近添加的项目。

## 约束：

无法控制表单中的提交操作。
无法控制“行添加”机制

## 我的想法：

1.  加载文档时克隆表
2.  在“完成”时将表与克隆进行比较或“比较”表
3.  显示唯一行

## 到目前为止我在哪里：

[http://jsfiddle.net/XLsCx/10/](http://jsfiddle.net/XLsCx/10/)

我无法在新表中显示唯一行。如果您查看红色突出显示的内容，结果也是错误的。

**（蟋蟀啁啾的声音）**

还没弄明白，嗯？好吧，我做到了……终于。

[http://jsfiddle.net/FkrBc/](http://jsfiddle.net/FkrBc/)

我稍后会提交这个作为答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T22:37:27.650

阅读它们并为女士们哭泣！

[http://jsfiddle.net/FkrBc/](http://jsfiddle.net/FkrBc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:29:54.117

您不需要克隆所有表，您只需要存储最后一个`tr`并更改所有`tr`在存储的按钮单击后出现的样式。

尝试这个：

```
var $lastRow;
function updateLastRow() {
    $lastRow = $('#firstTable tr:last')
}

updateLastRow();

$("#houston button").click ( function () {
    var row = "<tr><td>new</td><td>item</td><td>added</td></tr>";
    $(row).insertAfter('#firstTable tbody>tr:last');
});

$("#newItems button").click ( function () {
    $lastRow.nextAll().find('td:eq(1)').css('background-color', 'red');
    updateLastRow();
}); 
```

[**演示**](http://jsfiddle.net/XLsCx/11/)

# jquery - 为什么在调整窗口大小时不会触发非匿名函数？

> ID：12825689
> 
> 赞同：2
> 
> 时间：2012-10-10T18:11:53.753
> 
> 标签：jquery, javascript-events

我想将事件侦听器绑定/取消绑定到窗口大小调整我正在使用 .on()/.off() 函数来做到这一点。因为 .off() 需要传递与 .on() 相同的函数，所以我创建了一个单独的函数，该函数在两个地方都传递。

这是代码（不工作）：

```
var i = 0;
function onResizeListener(){
    $('#debug').html(i);
    i++;
}
$(document).ready(function() {
    $(window).on('resize',onResizeListener());
}); 
```

示例：http: [//jsfiddle.net/eRupC/2/](http://jsfiddle.net/eRupC/2/)

这个正在工作： http: [//jsfiddle.net/eRupC/1/](http://jsfiddle.net/eRupC/1/)当我`onResizeListener()`用匿名函数包装时。

示例中的理想结果：当您调整窗口大小时，数字已更改。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:15:04.203

Try this if you need to pass something to `onResizeListener`. If not, remove the parenthesis from onResizeListener as the the other answers say. [Bind Documentation](http://api.jquery.com/bind/)

```
$(document).ready(function() {
  var x = 2;
  var y = 4;
  $(window).bind('resize', function() {
    onResizeListener(x, y);
  });
}); 
```

This would also work:

```
$(document).ready(function() {
  $(window).on('resize', function() {
    onResizeListener();
  });
}); 
```

To [unbind](http://api.jquery.com/unbind/) the function call from the resize event but still pass parameters to the function you could use:

```
$(document).ready(function() {
    //bind
    $(window).bind('resize', { foo: 'bar' },onResizeListener);

    //unbind, wrap in event you wish to use to unbind it
    $(window).unbind('click', onResizeListener);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:15:23.097

You need to remove the brackets from the event handler code...

```
var i = 0;
function onResizeListener(){
    $('#debug').html(i);
    i++;
}
$(document).ready(function() {
    $(window).on('resize',onResizeListener);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:21:27.347

替换这一行

```
 $(window).on('resize',onResizeListener()); 
```

有了这个

```
 $(window).on('resize',onResizeListener); 
```

[http://jsfiddle.net/pc5uC/](http://jsfiddle.net/pc5uC/)

# android - 查询Android字典总是空的

> ID：12825690
> 
> 赞同：0
> 
> 时间：2012-10-10T18:11:58.983
> 
> 标签：android

我一直在尝试检查字典中是否存在一个单词，但我总是得到“假”作为回应。现在我尝试作为选择标准传递，这意味着我应该获取字典中的所有行，但在执行“moveToFirst()”时仍然得到“false”。有什么建议么？

```
Cursor cursor = this.mainMenuActivity.getContentResolver().query(UserDictionary.Words.CONTENT_URI, new String[]{ UserDictionary.Words.WORD }, null, null, null);
boolean matched = cursor.moveToFirst(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:29:11.897

我刚刚意识到我对 UserDictionary.Words 内容提供者的目的有不同的理解。检查[此链接](http://developer.android.com/reference/android/provider/package-summary.html)后，我注意到提供程序适用于**用户输入的单词**，而不仅仅是字典中可用的所有单词。

# java - Java - 无法完成写入文本文件

> ID：12825693
> 
> 赞同：0
> 
> 时间：2012-10-10T18:12:03.807
> 
> 标签：java, bufferedreader, bufferedwriter

我需要处理一个大文本文件（大约 600 MB）才能正确格式化，将格式化的输出写入一个新的文本文件。问题在于将内容写入新文件时会停止在大约 6.2 MB 处。这是代码：

```
/* Analysis of the text in fileName to see if the lines are in the correct format 
     * (Theme\tDate\tTitle\tDescription). If there are lines that are in the incorrect format,
     * the method corrects them.
     */
    public static void cleanTextFile(String fileName, String destFile) throws IOException {
        OutputStreamWriter writer = null;
        BufferedReader reader = null;

        try {
            writer = new OutputStreamWriter(new FileOutputStream(destFile), "UTF8");
        } catch (IOException e) {
            System.out.println("Could not open or create the file " + destFile);
        }

        try {
            reader = new BufferedReader(new FileReader(fileName));
        } catch (FileNotFoundException e) {
            System.out.println("The file " + fileName + " doesn't exist in the folder.");
        }

        String line;
        String[] splitLine;
        StringBuilder stringBuilder = new StringBuilder("");

        while ((line = reader.readLine()) != null) {
            splitLine = line.split("\t");
            stringBuilder.append(line);

            /* If the String array resulting of the split operation doesn't have size 4,
             * then it means that there are elements of the news item missing in the line
             */
            while (splitLine.length != 4) {
                line = reader.readLine();
                stringBuilder.append(line);

                splitLine = stringBuilder.toString().split("\t");
            }
            stringBuilder.append("\n");
            writer.write(stringBuilder.toString());
            stringBuilder = new StringBuilder("");

            writer.flush();
        }

        writer.close();
        reader.close();

    } 
```

我已经在寻找答案，但问题通常与作者没有被关闭或没有`flush()`方法有关。因此，我认为问题出在 BufferedReader 中。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:34:05.020

看看这个循环：

```
while (splitLine.length != 4) {
    line = reader.readLine();
    stringBuilder.append(line);

    splitLine = stringBuilder.toString().split("\t");
} 
```

如果您最终在. *_* 我不知道这是否正在发生（我们不知道您的数据是什么样的），但这当然是可行的，您应该提防它。`splitLine``null``StringBuilder`

（您还应该使用`try`/`finally`块来关闭资源，但这是另一回事。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:54:50.167

1.  try/catch 没有很好地编码，如果出现错误，过程会继续。
2.  你可以更换

    ```
     stringBuilder = new StringBuilder(""); 
    ```

    经过

    ```
     stringBuilder.setLength( 0 ); 
    ```

3.  使用您自己的解析器`line.indexOf('\t',from)`代替`String.split()`

4.  将使用 line.substring( b, e ) 获得的部分添加到 List<String>
5.  使用具有正确字符集的 PrintStream，使用带有两个参数的构造函数
6.  当 list.size() >= 4 时，将信息 4 x 4 写入，使用列表中的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:37:55.843

将 FileOutputStream 分离为它自己的变量并关闭它：

```
FileOutputStream fos = new FileOutputStream(destFile);
writer = new OutputStreamWriter(fos);

   ...

writer.flush();
fos.flush(); 
```

# java - Android，并创建一个非常简单的数据库

> ID：12825697
> 
> 赞同：0
> 
> 时间：2012-10-10T18:12:21.263
> 
> 标签：java, php, android, mysql, sqlite

我正在创建一个 Android 应用程序，它基本上什么都不做，只是将“1”添加到从数据库中获取的数字上。之后将新号码写入数据库。但是，我对整个 Android 事物有点陌生，我似乎无法在此站点或任何其他站点上找到任何解决方案。基本上我知道你可以在 Android 中使用两种数据库连接：创建一个 SQLite 数据库，然后连接到它。这不会太难，但应用程序的预算是简单的 0 美元，所以我负担不起托管服务器的费用，而且 SQLite 没有免费的托管服务。尽管流量将非常少（最多 10 个用户），但我自己托管它不是一种选择。

现在第二种方法是，使用像 MySQL 这样的不同数据库并在 PHP 中创建一个 web 服务来与应用程序交互。然而，同样的问题出现了，但我得到了一个允许免费 MySQL 托管并启用 PHP 功能的网站。但是我似乎无法弄清楚我到底是如何连接到这个数据库的，甚至无法在 PHP 中创建一个 web 服务（以前从未这样做过）。

另外，没有更简单的方法来解决这个问题吗？先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:09:11.800

根据我们的评论讨论和您对应用程序很小的指示，我建议尝试[Parse。](http://www.parse.com) 它确实需要您学习他们的 API，但在大多数情况下它相当简单。他们（目前）有一个免费帐户，用于最少使用量的应用程序或开发测试。

我的警告是，如果你正在做这个项目来*学习*，那么我会跳过 Parse，因为它隐藏了很多细节中发生的事情。但无论如何，我认为它可以满足您的要求。

# asp.net-mvc - 如何创建全局辅助函数？

> ID：12825699
> 
> 赞同：3
> 
> 时间：2012-10-10T18:12:31.067
> 
> 标签：asp.net-mvc

我想创建一些全局辅助函数。我知道我必须将它们放在 App_Code 中的 .cshtml 文件中。我创建了这个文件：

```
@helper CreatePostForm(string action, string controller, string id, params string[] hiddens)
{       
    using (BeginForm(action, controller, System.Web.Mvc.FormMethod.Post, new { id = id }))
    {
        @Html.AntiForgeryToken()
        foreach(string hidden in hiddens)
        {
            @Html.Hidden(hidden)   
        }
    }
} 
```

问题是`BeginForm`和`AntiForgeryToken`方法也不被认可。如何使它正确？

PS：我正在使用.net 4.5，asp.net mvc 4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:20:50.377

解决方案是将`HtmlHelper`对象作为参数传递给您的助手：

```
@helper CreatePostForm(HtmlHelper html, 
                       string action, string controller, string id, 
                       params string[] hiddens)
{       
    using (html.BeginForm(action, controller, FormMethod.Post, new { id = id }))
    {
        @html.AntiForgeryToken()
        foreach(string hidden in hiddens)
        {
            @html.Hidden(hidden)   
        }
    }
} 
```

您还应该将所需的`@using`语句添加到您的帮助文件中，以使扩展方法`BeginForm`能够正常工作：

```
@using System.Web.Mvc.Html
@using System.Web.Mvc 
```

然后你需要像这样调用你的辅助方法：

```
@MyHelpers.CreatePostForm(Html, "SomeAtion", "SomeContoller" , "SomeId") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-07T13:58:02.017

您不必将`HtmlHelper`对象作为参数传递。只需将其放在 App_Code 中的 .cshtml 文件中即可：

```
@functions {
    private new static HtmlHelper<dynamic> Html => ((WebViewPage)WebPageContext.Current.Page).Html;
} 
```

其他有用的成员是：

```
private static UrlHelper Url => ((WebViewPage)WebPageContext.Current.Page).Url; 
```

```
private static ViewContext ViewContext => ((WebViewPage)WebPageContext.Current.Page).ViewContext; 
```

# mysql - 在 MYSQL 中引用一个值

> ID：12825702
> 
> 赞同：0
> 
> 时间：2012-10-10T18:12:36.043
> 
> 标签：mysql, sql, zen-cart

我有以下 MySQL 安装 SQL 文件。我要做的是修改，以便不再将安装 ID 称为 31，而是在脚本尝试运行时设置一个值。任何人都可以帮忙吗？

```
# Install Easy Populate Configuration for zen cart v1.5
INSERT INTO admin_pages VALUES ('easyPopulate', 'BOX_TOOLS_EASY_POPULATE', 'FILENAME_EASYPOPULATE', '', 'tools', 'Y', '14');
INSERT INTO admin_pages_to_profiles VALUES ('1', 'easyPopulate');
INSERT INTO admin_pages VALUES ('easyPopulateConfig', 'BOX_CONFIGURATION_EASY_POPULATE', 'FILENAME_CONFIGURATION', 'gID=31', 'configuration', 'Y', '26');
INSERT INTO configuration_group VALUES ('', 'Easy Populate', 'Config options for Easy Populate', '31', '1');
INSERT INTO configuration VALUES
('', 'Uploads Directory', 'EASYPOPULATE_CONFIG_TEMP_DIR', 'tempEP/', 'Name of directory for your uploads (default: tempEP/).', '31', '0', NULL, now(), NULL, NULL),
('', 'Upload File Date Format', 'EASYPOPULATE_CONFIG_FILE_DATE_FORMAT', 'm-d-y', 'Choose order of date values that corresponds to your uploads file, usually generated by MS Excel. Raw dates in your uploads file (Eg 2005-09-26 09:00:00) are not affected, and will upload as they are.', '31', '1', NULL, now(), NULL, 'zen_cfg_select_option(array("m-d-y", "d-m-y", "y-m-d"),'),
('', 'Default Raw Time', 'EASYPOPULATE_CONFIG_DEFAULT_RAW_TIME', '09:00:00', 'If no time value stipulated in upload file, use this value. Useful for ensuring specials begin after a specific time of the day (default: 09:00:00)', '31', '2', NULL, now(), NULL, NULL),
('', 'Split File On # Records', 'EASYPOPULATE_CONFIG_SPLIT_MAX', '300', 'Default number of records for split-file uploads. Used to avoid timeouts on large uploads (default: 300).', '31', '3', NULL, now(), NULL, NULL),
('', 'Maximum Category Depth', 'EASYPOPULATE_CONFIG_MAX_CATEGORY_LEVELS', '7', 'Maximum depth of categories required for your store. Is the number of category columns in downloaded file (default: 7).', '31', '4', NULL, now(), NULL, NULL),
('', 'Upload/Download Prices Include Tax', 'EASYPOPULATE_CONFIG_PRICE_INC_TAX', 'false', 'Choose to include or exclude tax, depending on how you manage prices outside of Zen Cart.', '31', '5', NULL, now(), NULL, 'zen_cfg_select_option(array("true", "false"),'),
('', 'Make Zero Qty Products Inactive', 'EASYPOPULATE_CONFIG_ZERO_QTY_INACTIVE', 'false', 'When uploading, make the status Inactive for products with zero qty (default: false).', '31', '6', NULL, now(), NULL, 'zen_cfg_select_option(array("true", "false"),'),
('', 'Smart Tags Replacement of Newlines', 'EASYPOPULATE_CONFIG_SMART_TAGS', 'true', 'Allows your description fields in your uploads file to have carriage returns and/or new-lines converted to HTML line-breaks on uploading, thus preserving some rudimentary formatting (default: true).', '31', '7', NULL, now(), NULL, 'zen_cfg_select_option(array("true", "false"),'),
('', 'Advanced Smart Tags', 'EASYPOPULATE_CONFIG_ADV_SMART_TAGS', 'false', 'Allow the use of complex regular expressions to format descriptions, making headings bold, add bullets, etc. Configuration is in ADMIN/easypopulate.php (default: false).', '31', '8', NULL, now(), NULL, 'zen_cfg_select_option(array("true", "false"),'),
('', 'Debug Logging', 'EASYPOPULATE_CONFIG_DEBUG_LOGGING', 'true', 'Allow Easy Populate to generate an error log on errors only (default: true)', '31', '9', NULL, now(), NULL, 'zen_cfg_select_option(array("true", "false"),'),
('', 'Custom Products Fields', 'EASYPOPULATE_CONFIG_CUSTOM_FIELDS', '', 'Enter a comma seperated list of fields to be automatically added to import/export file(ie: products_length, products_width). Please make sure field exists in PRODUCTS table.', '31' , '10', NULL, now(), NULL, NULL); 
```

附加信息：（对不起，我忘记了……）

有没有办法做到这一点，这样我就不必使用 ID 31？31 应该代表从命令自动生成的 ID `INSERT INTO configuration_group VALUES ('', 'Easy Populate', 'Config options for Easy Populate', '31', '1');.`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:19:13.787

正如您所评论的 - 使用 SET：

```
SET @installId = '31'; 
```

然后使用`@installId`而不是'31'：

```
INSERT INTO configuration_group VALUES ('', 'Easy Populate', 'Config options for Easy Populate', @installId, '1'); 
```

**更新**

如果 id 是上一个 INSERT 语句中最后一个自动递增的字段，那么您可以使用该`LAST_INSERT_ID()`函数来检索它：

```
INSERT INTO configuration_group VALUES ('', 'Easy Populate', 'Config options for Easy Populate', NULL, '1');
SET @autoId = LAST_INSERT_ID(); 
```

然后，您可以使用该`@autoId`变量代替上面的“31”。

# php - RewriteRule 不能按我的意愿工作

> ID：12825706
> 
> 赞同：0
> 
> 时间：2012-10-10T18:12:48.730
> 
> 标签：php, html, .htaccess, mod-rewrite

我有一个小问题。我有一个图像的颜色自定义代码，我使用 RewriteRule 使它更短：

```
RewriteRule ^cc-(.*?)-(.*?)\.png$ cc.php?col1=$1&col2=$2 [L] 
```

当我输入 localhost/Gen/cc-1122ff-ffffff.png 时，它通常会为我打开。但是，当我想用​​ PHP 向这个生成的图片添加文本时，我使用另一个 RewriteRule：

```
RewriteRule ^sig,(.*?),(.*?),(.*?),(.*?),([^,]+),(.*?),([^,]+)\.png$ test.php?nam=$6&font=$5.ttf&bg=$7.png&gn=$1&badg=$2&typ=$3&itm=$4 [L] 
```

我去这个链接： localhost/Gen/sig,y,y,mem,no,Pixel,test,cc-1122ff-ffffff.png 我得到这个错误：

```
Warning: imagecreatefrompng(cc-1122ff-ffffff.png): failed to open stream: No such file or directory in D:\Xampp\htdocs\Gen\test.php on line 31 
```

第二个 RewriteRule 通常适用，例如 localhost/Gen/sig,y,y,mem,no,Pixel,test,white.png 第二个 RewriteRule 不适用于第一个 RewriteRule。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:36:19.330

`imagecreatefrompng`当 URL 是相对的（如 ）时不发出 HTTP 请求`cc-1122ff-ffffff.png`；它将其视为文件路径。

如果您将 URL 设为绝对 URL，例如`localhost/Gen/sig,y,y,mem,no,Pixel,test,http%3A%2F%2Flocalhost%2FGen%2Fcc-1122ff-ffffff.png`， imagecreatefrompng 会将其视为 URL，而不是文件路径。

# javascript - 如何仅在调用时使用该函数？

> ID：12825708
> 
> 赞同：0
> 
> 时间：2012-10-10T18:12:51.153
> 
> 标签：javascript

抱歉 - 我不能准确地解释这个问题，所以我给你举个例子。

```
window.onload = function() {
    var obj = new classs(2);
    alert(obj.x2);

    function classs(value){
        this.value = value;

        var multiplication = function(value, n){
            console.log(n);
            return parseInt(value) * parseInt(n);
        }

        this.x1 = multiplication(this.value, 1);
        this.x2 = multiplication(this.value, 2);
        this.x3 = multiplication(this.value, 3);
    }
} 
```

所以我只打电话`obj.x2`，但`console.log(n);`打印了 3 次。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:17:00.530

Reading the `x2` property doesn't cause anything to be logged to the console, it will only read the already calculated value.

The properties `x1`, `x2` and `x3` are calculated when the `classs` object is created, so the values are logged to the console before you read the `x2` property. If you comment out the line that uses the `x2` property, the values will still be logged.

* * *

If you want to do the calculation after the object is created, you need to use functions instead:

```
this.x2 = function() { multiplication(this.value, 2); } 
```

Usage:

```
alert(obj.x2()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:16:23.777

because you simply make call of multiplication 3 times

when you create your object

```
var obj = new classs(2); 
```

it execute code inside of it and as you can see there are 3 call of function "multiplication".

```
this.x1 = multiplication(this.value, 1);
this.x2 = multiplication(this.value, 2);
this.x3 = multiplication(this.value, 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:19:04.700

执行 classes 时，设置 x1、x2 和 x3 时，乘法函数执行 3 次。这就是为什么 console.log 被命中 3 次的原因。另一方面，警报只发生一次，因为您在 obj.x2 上调用警报。

# eclipse - 有没有办法在 Eclipse 中删除“垂直标尺”

> ID：12825710
> 
> 赞同：13
> 
> 时间：2012-10-10T18:13:03.413
> 
> 标签：eclipse

您好，我已经搜索了一段时间从 Eclipse 中移除垂直标尺，但我还没有找到任何解决方案。它甚至没有在 Eclipse 的“帮助”部分中列出。

有谁碰巧知道，如何删除或禁用它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-10-23T16:13:03.193

对我来说，它只出现在 PyDev 中，您可以轻松地从以下位置禁用它：

Preferences → PyDev → Editor → Overview Ruler Minimap →
取消勾选 Show Minimap & Show Overview Items in Minimap。

完成并完成！如果您禁用小地图，您应该检查显示垂直滚动条

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T06:16:50.690

您只能使用 Preferences -> General -> Editors -> Text Editors -> Annotations 配置垂直标尺中显示的内容。您不能禁用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T00:49:58.283

将小地图宽度更改为 10 使其两全其美。在旧版本的 eclipse 中曾经小得多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-07T12:13:48.730

您可以禁用它。

*   `Window`→ `Preferences`→ `General`→ `Editors`→`Text Editors`
*   取消选中`Show print margin`。
*   完毕！

# asp.net - 如何在 TFS 中映射和打开 ASP.NET 解决方案文件？

> ID：12825715
> 
> 赞同：1
> 
> 时间：2012-10-10T18:13:25.183
> 
> 标签：asp.net, visual-studio-2010, tfs

我想要完成的是从 TFS Team System Foundation 获取最新的解决方案，构建和调试它。我可以将解决方案映射到我的本地文件夹，但是当我尝试打开它时，我遇到了无法构建的问题并调试它。这是我正在采取的步骤：

1.  打开 Visual Studio 2010；打开团队资源管理器（使用 TFS2010）窗口；打开源代码管理资源管理器窗口

2.  导航到解决方案目录示例：$/WebSites/English/Development/Source/WebApp

3.  右键单击映射到本地文件夹

4.  选择文件夹; 单击是获取文件并等待文件移动到本地文件夹

5.  打开 Windows 资源管理器，导航到包含 sln 文件的文件夹

6.  双击 sln 文件打开

• 我想做的是打开解决方案；构建和调试它

• 7\. 发生的是另一个获取进度，它再次获取所有文件并更改 Windows 资源管理器中的文件结构

然后，当我尝试运行和调试解决方案时，它没有所有文件。例如，在浏览器中查看网站时缺少很多内容，无法正确呈现。

在同事的机器上，它工作得很好。

为什么 sln 文件不能正确打开？

如何打开解决方案来构建和调试它？

先感谢您，

卡托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:10:26.623

在执行此操作之前，我假设您正在获取最新版本。

这里有一些事情要检查。

首先展开解决方案中所有项目的引用并确保它们都正确，任何缺少的图标都会有所不同。

确保网络设置正确，它们是否可以保存在解决方案文件中，这是一个选项。

确保没有搞砸事情的构建前或构建后事件

确保有人没有忘记将文件添加到 TFS，或者他们可能还没有签入

如果所有这些都无助于确保您引用的 dll 的版本与您的同事相同......以及 GAC（如果正在使用）

# iphone - 应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交

> ID：12825724
> 
> 赞同：21
> 
> 时间：2012-10-10T18:14:13.557
> 
> 标签：iphone, ios, xcode, app-store, app-store-connect

当我尝试推送我的应用程序进行审核时，我得到了：

> 应用程序必须准备好上传到 iTunes Connect，然后才能在 Xcode 中进行验证或提交。

什么意思`ready for upload on iTunes Connect`？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-10T18:15:41.443

您需要进入[iTunesConnect](http://itunesconnect.apple.com)并开始为您的应用填写信息。它会告诉您何时准备好实际上传。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-26T08:54:42.130

就我而言，我尝试将二进制文件上传到错误的开发者帐户。

# sql - 修改 SQL 触发器以在插入的表包含多于一行时工作

> ID：12825727
> 
> 赞同：2
> 
> 时间：2012-10-10T18:14:33.567
> 
> 标签：sql, sql-server, performance, tsql, triggers

我为 SQL Server 2008 中的表编写了一个 SQL 触发器。当“插入”表中只有一行时，它运行良好。当有多行时，如何修改此触发器以使其正常工作？性能是这里的关键，所以我想远离游标、临时表等（如果可能的话）。

本质上，触发器会检查“ClientID”或“TemplateID”字段是否已更改。如果它们是，并且 OriginalClientID 或 OriginalTemplateID 字段为空，它会填充它们（因此设置 OriginalXXX 字段一次且仅一次，因此我总能看到第一个值是什么）。

```
CREATE TRIGGER [dbo].[trigSetOriginalValues]
   ON  [dbo].[Review]
   FOR INSERT, UPDATE
AS 
BEGIN
    IF (NOT UPDATE(TemplateID) AND NOT UPDATE(ClientID)) return

    DECLARE @TemplateID int
    DECLARE @OriginalTemplateID int
    DECLARE @ClientID int
    DECLARE @OriginalClientID int   
    DECLARE @ReviewID int

    SET @ReviewID = (SELECT ReviewID FROM inserted)
    SET @ClientID = (SELECT ClientID FROM inserted)
    SET @TemplateID = (SELECT TemplateID FROM inserted)
    SET @OriginalTemplateID = (SELECT OriginalTemplateID FROM inserted);
    SET @OriginalClientID = (SELECT OriginalClientID FROM inserted);

    IF (@OriginalTemplateID IS NULL AND @TemplateID IS NOT NULL) 
    BEGIN
        UPDATE [dbo].[Review] SET OriginalTemplateID = @TemplateID WHERE ReviewID=@ReviewID
    END

    IF (@OriginalClientID IS NULL AND @ClientID IS NOT NULL) 
    BEGIN
        UPDATE [dbo].[Review] SET OriginalClientID = @ClientID WHERE ReviewID=@ReviewID
    END 
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:28:20.280

这应该是你的触发器：

```
UPDATE A
SET A.OriginalTemplateID = B.TemplateID
FROM [dbo].[Review] A
INNER JOIN INSERTED B
    ON A.ReviewID = B.ReviewID
WHERE A.OriginalTemplateID IS NULL AND B.TemplateID IS NOT NULL

UPDATE A
SET A.OriginalClientID = B.ClientID 
FROM [dbo].[Review] A
INNER JOIN INSERTED B
    ON A.ReviewID = B.ReviewID
WHERE A.OriginalClientID IS NULL AND B.ClientID IS NOT NULL 
```

尽管您仍然可以在单个 上执行此操作`UPDATE`，但使用更复杂的过滤器。

# c++ - 将代码从一个命令行参数更新为两个

> ID：12825728
> 
> 赞同：0
> 
> 时间：2012-10-10T18:14:36.613
> 
> 标签：c++, command-line

我有执行以下操作的代码：

```
const char* filename = argc >= 2 ? argv[1] : "stuff.jpg"; 
```

它读取照片作为命令行参数并显示它。

我现在想拍两张照片，我试过这个代码：

```
const char* filename = argc >= 3 ? argv[1] : "stuff.jpg", argv[2] : "tester.jpg"; 
```

但我收到这样的错误：

```
error: expected initializer before ‘:’ token 
```

有谁知道怎么了？有没有类似的方式来以编程方式进行输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:19:41.563

您在这里处理的是三元 if 运算符。看看[这个页面](http://en.wikipedia.org/wiki/%3F%3a)。它基本上是一个内联 if 语句。

可以做你正在寻找的代码，看起来有点像这样：

```
const char* filename1 = argc >= 2 ? argv[1] : "stuff.jpg";
const char* filename2 = argc >= 3 ? argv[2] : "tester.jpg"; 
```

这给您留下了两个文件名变量，分别存储提供的参数或默认值（`stuff.jpg`和`tester.jpg`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T18:20:46.130

为了以易于使用的格式获取所有参数，我这样做：

```
int main(int argc, char* argv[])
{
    std::vector<std::string>   args(&argv[1], &argv[argc]);

    // args.size() is the number of arguments.
    //             In your case the number of files.
    //             So now you can just loop over the file names and display each one.

    // Note The above is guranteed to be OK
    // As argv[] will always have a minimum of 2 members.
    //   argv[0]    is the command name           thus argc is always >= 1
    //   argv[argc] is always a NULL terminator.

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:21:49.523

当您需要 4、5 或更多照片时会发生什么？伪代码：

```
 vector<char *> photos;
    if(argc > 1)
    {
       for i to argc-1
          photos.push_back(argv[i]) ;
    } 
```

# xsd - 架构中的 XML 架构

> ID：12825729
> 
> 赞同：1
> 
> 时间：2012-10-10T18:14:37.737
> 
> 标签：xsd

简而言之，问题是“我可以在可以整体验证的模式中定义一个模式吗？

解释：

是否可以为以下 XML 定义模式。我需要为“客户”定义一个模式。“customertype”子元素本身就是一个模式。在 customertype 中，我应该有一个名为“Source”的元素，这是强制性的。

```
 <customer>
    <customername>acustomer</customername>
    <customertype>
      <xs:schema>
      <xs:element name="profession">
         <xs:complexType>
              <xs:sequence>
                 <xs:element name="Source" type="xs:int" />
                 <xs:element name="ProfessionName" type="xs:string" />
             </xs:sequence>
          </xs:complexType>     
         </xs:schema>
      </customertype>
  </customer> 
```

是否可以定义此 xml 的架构以满足所有要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T17:10:09.567

正如 Mimo 所指出的，将 customertype（或另一个其他元素）定义为包含 XSD 名称空间中的元素是没有问题的，这似乎就是您要问的问题。

但是，如果您的目标是能够验证客户元素（或职业元素，这是您示例中的架构所声明的），那么很难想象一个验证架构是最好的方式（甚至是可行的方式）去关于它。一个原因是，根据正在验证的实例提供的模式信息验证文档实例不会产生与根据已知模式验证数据相同的信心。（将自己置于一个试图破坏您的验证并说服您的系统接受虚假数据为有效的对手的立场。如果对手指定什么是有效的文档实例，那么知道该文档是有效的有多大用处?)

是什么阻止您编写模式并以通常的方式使用它？

[添加，2012 年 10 月 15 日，在 OP 评论之后]

如果我正确理解了您今天早些时候的评论，您的要求是允许除您以外的人指定 `customer`他们喜欢的元素类型，但条件是该类型必须包含一个名为 Source 的子元素，其类型将是`xsd:int`。您没有指定是否需要访问他们正在使用的类型定义，因此我将尝试考虑您确实需要它的情况和您不需要它的情况。

下面描述了使这种情况起作用的三种方法。他们的共同点是

*   定义模式基本版本的“主”模式文档，以及
*   用于不同情况的一个或多个“辅助”模式文档。

一般来说，您可能会发现找到一本关于 XSD 的好教科书并查看它关于从多个模式文档中的声明创建模式的内容会很有帮助。

(1) 一种方法使用`xsi:type`. 您定义一个主模式文档，其中`customer`元素具有命名类型；我假设类型是命名的`Customer`。该`Customer`类型接受其第一个子元素名为 的任何元素`Source`。例如：

```
<xs:element name="customer" type="Customer"/>
<xs:complexType name="Customer">
  <xs:sequence>
    <xs:element name="Source" type="xs:int"/>
    <xs:any minOccurs="0" 
            maxOccurs="unbounded" 
            processContents="lax"/>
  </xs:sequence>
  <xs:anyAttribute processContents="lax"/>
</xs:complexType> 
```

那些想要`customer`元素更具体类型的人（我称他们为“用户”）为您的目标命名空间提供辅助模式文档，他们在其中声明了其他复杂的类型限制`Customer`。例如，他们可能希望`customer`元素包含名为姓名、地址和电话号码的元素：

```
<xs:complexType name="Customer-for-us">
  <xs:complexContent>
    <xs:restriction base="Customer">
      <xs:sequence>
        <xs:element name="Source" type="xs:int"/>
        <xs:element ref="name"/>
        <xs:element ref="address"/>
        <xs:element ref="phone"/>
      </xs:sequence>
    </xs:restriction>
  </xs:complexContent>
</xs:complexType> 
```

这是 Customer 类型的法律限制，因此`customer`元素可以使用它。因此，文档实例可能包含如下元素：

```
<customer xsi:type="Customer-for-us">
  <Source>83760273</Source>
  <name>Willy Wonka</name>
  <address> ... </address>
  <phone> ... </phone>
</customer> 
```

该文档根据从其辅助模式文档以及主模式文档构造的模式进行验证，因此以`Customer-for-us`通常的方式强制执行类型的定义。

通过使用通配符和宽松的验证，客户类型确保用户可以在他们的类型版本中做任何他们喜欢的事情，只要第一个孩子被命名为 Source 并且具有 int 类型。

(2) 第二种方法在主模式文档中使用了一个漏洞。

您像以前一样编写主模式文档，包括将`customer`元素声明为具有 type `Customer`。但是主模式文档不包含该类型的声明。相反，您在辅助模式文档中声明 Customer 类型，该类型在验证时以通常的方式与主要模式文档结合（我建议您使用第三个模式文档作为驱动程序并包含其他两个，但是有很多方法可以让它工作）。

同时，需要更具体的 Customer 类型的用户为 Customer 类型编写自己的声明，受制于名为 Source 的第一个子类型的兼容性约束，依此类推。用户使用他们自己的驱动程序文件，该文件将主模式文档和他们的辅助模式文档版本与他们自己的客户类型声明一起嵌入。

这样，`xsi:type`就不需要使用该属性。

(3) 第三种方法使用`xs:redefine`或（在 XSD 1.1 中）`xs:override`工具。

您按照解决方案 (1) 中的描述编写主模式文档。用户根据需要使用`xs:redefine`或`xs:override`重新定义客户。这个答案已经很长了，所以我不建议包含有关使用重新定义或覆盖的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T23:02:55.600

可以创建导入和使用另一个模式的模式。这定义了包含架构的`customer`元素：`customertype`

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
            targetNamespace="http://xml.netbeans.org/schema/Notes"
            xmlns:tns="http://xml.netbeans.org/schema/Notes"
            elementFormDefault="qualified">

  <xsd:import namespace="http://www.w3.org/2001/XMLSchema"/>

  <xsd:element name="customer">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="customername" type="xsd:string"/>
        <xsd:element name="customertype">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element ref="xsd:schema"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

问题是你对`customertype`模式有一个额外的条件——所以理论上你应该得到标准的 XSD 模式并修改它，但是在模式定义中有很多不同的方法可以满足这个条件，所以它非常棘手（也许不可能）做这个“修改”

可能更好的方法是限制内部使用的可能模式`customertype`（例如，它必须是直接指定复杂类型的单个元素定义等）并编写描述此受限模式定义的 XSD 模式的子集。

# proguard - How do I tell proguard to not do anything except some stripping

> ID：12825737
> 
> 赞同：1
> 
> 时间：2012-10-10T18:15:04.440
> 
> 标签：proguard

I'm using progurad to get rid of some logging:

```
-assumenosideeffects class android.util.Log {
    public static int d(...);
    public static int v(...);
} 
```

I don't want anything else to happen to any classes. In particular I don't want any obfuscation, since this is a library. The clients of the library will apply obfuscation themselfs.

Is there a way to tell proguard to do "nothing" except the -assumenosideeffects rule please?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T01:02:42.037

此选项在优化步骤中应用，因此您可以禁用收缩和混淆。您仍然需要提供 -keep 选项，例如 ProGuard 手册 > 示例 > 典型库。

# performance - Zend Framework Application Runtime Benchmarking

> ID：12825745
> 
> 赞同：0
> 
> 时间：2012-10-10T18:15:23.860
> 
> 标签：performance, zend-framework, doctrine-orm

Been trying to understand the overall performance of our application by comparing the benchmark we get from our dev environment and our prod environment.

Interestingly, in our dev environment, which is our local machine, we get application run time as fast as 98ms.

The same application runs on avg at 400ms in our production server, which is a VPS with CentOS 5.8 running.

I'm assuming that this increase must be because of network connection lag between web server and database server, since we didn't have this gap in the dev environment, everything is local.

We're using Doctrine 2.0 as an ORM for our application, we haven't really gotten into optimizing it by caching.

Is there a way to optimize this lag time? Or am I completely wrong about the case?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:36:15.830

衡量实际使用的数据库和查询时间的最佳选择是设置数据库分析器。

你可以阅读：[Profiling Doctrine 2 with Zend Framework](http://www.uvd.co.uk/blog/labs/profiling-doctrine-2-with-zend-framework/)

需要注意的是，运行分析器仅应用于测试。您不应该一直运行它，尤其是在您的生产服务器容量很大的情况下。它会增加一些处理时间，但会为您提供有关查询和连接时间的更多信息。

您假设它是盒子之间的延迟可能是正确的，这将为您验证。

# ms-access - 在访问中从 VBA 调用嵌入的宏

> ID：12825746
> 
> 赞同：3
> 
> 时间：2012-10-10T18:15:26.200
> 
> 标签：ms-access, macros

我有一个宏分配给表单中按钮的 onClick 事件。如何以编程方式调用此宏？

我试过

```
btnName_Click 
```

但这不起作用，因为没有调用函数`btnName_Click()`......显然:)

我可以通过访问 onClick 成员，`Me.btnNewRecord.OnClick`但看不到运行宏的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:22:01.213

经过广泛搜索，我认为不可能引用嵌入的宏并运行它。您可以查看宏的 XML，但我不知道除了存储为字符串的 XML 之外无法运行它，甚至无法访问它。一种可能的解决方法是将所有宏转换为 VBA。去做这个：

1.  在设计视图中打开表单。
2.  单击将窗体的宏转换为 Visual Basic

现在您应该能够`btnName_Click`按照您在问题中显示的那样调用按钮的代码。显然，如果您这样做，您将牺牲使用宏的优势（即，在用户不需要信任您的数据库的情况下，功能有限）。

* * *

原始答案，不适用于嵌入式宏：

使用[DoCmd.RunMacro](http://msdn.microsoft.com/en-us/library/office/ff192075.aspx)

例子：

```
Docmd.RunMacro(macroname) 
```

其中`macroname`是表示宏名称的字符串。

# ant - Condition Property Override

> ID：12825751
> 
> 赞同：2
> 
> 时间：2012-10-10T18:15:43.883
> 
> 标签：ant

I want to use an condition property to set the property value to X if another property is defined and Y otherwise. However, I don't want the user to be able to override the condition property from the command line.

How can this be achieved?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T08:02:27.200

从 ant 1.8 开始，一些用例**[`local`](http://ant.apache.org/manual/Tasks/local.html)任务可能适用**。由于属性是本地的，因此它以空值开头。它的范围仅限于当前目标，但您可以使用`param`in 中的参数将其传递给后续目标[`antcall`](http://ant.apache.org/manual/Tasks/antcall.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T20:22:14.870

不，您不能覆盖命令行上设置的属性。至少，这并不容易做到。在命令行上覆盖属性的全部目的是允许用户覆盖默认值，以便在项目构建方式中进行修改。例如：

```
 <property file="${basedir}/build.properties"/>
 <property name="javac.debug"  value="no"/>

 <target name="compile">
    <javac destdir="${main.destdir}"
         debug="${javac.debug}"> 
```

默认情况下，编译 Java 代码时没有调试信息。也许这样做是为了使 jar 文件更小，或者更快地解释，或者可能使代码更难反编译和阅读。无论出于何种原因，此构建都不会将调试信息放入类文件中。

但是，开发人员确实需要此调试信息，因此他们希望能够覆盖此设置：

```
$ ant -Djavac.debug=true compile 
```

或者，他们可以创建一个`build.properties`文件并将值放入其中。

当您不使用 Ant 进行构建时，就会出现此类问题。我知道几个使用 Ant 脚本进行部署的站点。我通常不鼓励这样做，因为 Ant 并不是为这种类型的东西而设计的。例如，Ant 没有任何内置逻辑或循环。属性一经设置，便无法更改。这些对于构建语言来说是个好主意，但对于通用编程语言来说却是个糟糕的主意。

此外，开发人员不应该为 QA 或生产进行构建。这些应该由不会覆盖默认值的构建服务器完成。

* * *

现在如何摧毁这个经过深思熟虑的系统并造成绝对的破坏：

您可以在项目中使用[ant-contrib](http://ant-contrib.sourceforge.net/)任务。这样做将允许您访问 Ant Contrib [var](http://ant-contrib.sourceforge.net/tasks/tasks/variable_task.html)任务以取消设置属性。

下载 ant-contrib.jar 文件（无论最新版本是什么），并将其放在`lib`项目下的目录中。然后你可以这样做：

```
<project name="danger-will-robinson" default="package" basedir="."
   xmlns:ac="http://ant-contrib.sourceforge.net">

  <!-- Define the Ant-Contrib tasks -->
  <taskdef=resource="net/sf/antcontrib/antlib.xml"
       uri="http://ant-contrib.sourceforge.net">
       <classpath>
            <fileset dir="${basedir}/lib">
                <include name="ant-contrib*.jar"/>
            </fileset>
       </classpath>
  </taskdef>

  <!-- Unset Property "foo", so you can use it -->
  <ac:var name="foo" unset="true"/> 
```

请注意，`<classpath>`指向`${basedir}/lib`目录中的 ant-contrib jar。如果您将其签入您的源存储库，它将允许签出您的项目的每个人都能够进行构建，而无需在他们的系统上安装 ant-contrib jar。

请注意，我已经定义了一个“ac” [XML 命名空间](http://ant.apache.org/manual/Types/namespace.html)，因此 Ant-Contrib 任务不会与其他可能的第三方任务重叠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T20:54:24.823

一旦设置，ant 中的属性在设计上是不可变的。您可以使用任何提供对 ant api 访问的脚本语言（即 javascript）覆盖现有属性。
JDK >= 1.6 已经附带了一个 javascript 引擎，所以你可以使用类似的东西：

```
<project>

 <property name="x" value="whatever"/>

 <script language="javascript">
  project.getProperty('x') ?
   project.setProperty('foo', 'true') :
    project.setProperty('foo', 'false');
 </script>

 <echo>$$[foo} => ${foo}</echo>

</project> 
```

盒子外面。
但是，如果有人使用，那将无济于事`ant -f yourbuild.xml -Dfoo=bla`！因为 userproperties（通过 -Dkey=value 定义的那些属性）具有特殊保护。
所以你的要求“..但是，我不希望用户能够从命令行覆盖条件属性”。
未满。

但是`let`来自[**Ant addon Flaka**](http://code.google.com/p/flaka/)的任务提供了覆盖甚至 userproperties 的可能性：

```
<project xmlns:fl="antlib:it.haefelinger.flaka">

<property name="x" value="whatever"/>

 <!--
  := defines a new property whereas
  ::= overwrites any existing property
  even userproperties
 -->
 <fl:let> foo ::= has.property['x'] ? 'true' : 'false'</fl:let>

 <echo>$$[foo} => ${foo}</echo>

</project> 
```

使用 ant -f yourbuild.xml -Dfoo=bla 运行这两个脚本以查看差异。

Ant api 也有方法 project.setUserProperty(String,String) 所以你也可以使用：

```
...
 <script language="javascript">

 project.getProperty('x') ?
    project.setProperty('foo', 'true') :
    project.setProperty('foo', 'false');

 project.getUserProperty('x') ?
  project.setUserProperty('foo', 'true') :
  project.setUserProperty('foo', 'false');

 </script>
... 
```

防止通过 .. -D .. 设置 foo 属性，即使在命令行上定义了属性 x 也可以工作 -Dx=whatever
您必须做出选择，使用开箱即用的 javascript 脚本任务或 Flaka let 任务oneline 解决方案，但需要 Flaka jar。

# apache-flex - Flex：过滤 HierarchicalData 子行

> ID：12825752
> 
> 赞同：2
> 
> 时间：2012-10-10T18:15:47.953
> 
> 标签：apache-flex, filter, flex4, flex3, hierarchical-data

我有一个`ArrayCollection`对象用作对象的源`HierarchicalData`。我的对象大致是这样的：

```
ObjectName (String)
SubCollection (ArrayCollection) 
```

我`HierarchicalData`在 AdvancedDataGrid 中使用 以分组格式显示数据。

我能够`ArrayCollection`使用`filterFunction`. 我现在要做的也是过滤 中的记录，`SubCollection`以便只有与过滤器匹配的项目才会显示在`AdvancedDataGrid`.

谁能告诉我如何过滤 a 中的子行`HierarchicalData`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:09:24.917

[这个答案](https://stackoverflow.com/questions/12498719/add-children-to-hierarchicalcollectionview/12534734#12534734)不是您问题的直接答案，但它应该有助于了解一些背景知识。本质上我和你处于相同的位置，我需要根据我拥有的父节点类型显示特定的数据集。

在这种情况下，从覆盖开始，`HierarchicalData.getChildren(node:Object):Object`这将使您可以访问过滤第一级子级，并且还使您能够为子子级调用过滤方法到任何第 n 级。

然后，您将扩展类用作 ADG 的源。

**一个伪代码示例：**

```
Class MyCollection extends HierarchicalData

override public function getChildren(node:Object):Object 
{
    if (node is a TopLevelObject)
        (node.children as ArrayCollection).filterFunction = filterSub;
        node.children.refresh();
    else if (node is a SubCollectionObject)
        (node.children as ArrayCollection).filterFunction = filterGrandChildren;
        node.children.refresh();

    // - OR -
        //a more complex process of allowing the sub-node to determine it's filter
        return node.filterSubCollectionGrandChildren();

    return node;
} 
```

# tomcat - Spring Security 3.1 xsd and jars mismatch issue

> ID：12825755
> 
> 赞同：0
> 
> 时间：2012-10-10T18:15:54.193
> 
> 标签：tomcat, spring-security, ivy, spring-3, ivyde

I'm Trying to migrate from spring framework 3.0.5 to 3.1 and spring-security 3.0.5 to 3.1 (not to mention hibernate 3.6 to 4.1). Using Apache IVY.

I'm getting the following error trying to start Tomcat 7.23 within Eclipse Helios (among a host of others, however this is the last in the console):

```
org.springframework.beans.factory.BeanDefinitionStoreException: Line 7 in XML document from ServletContext resource [/WEB-INF/focus-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException: Document root element "beans:beans", must match DOCTYPE root "null".
org.xml.sax.SAXParseException: Document root element "beans:beans", must match DOCTYPE root "null". 
```

my security config file looks like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
xmlns:beans="http://www.springframework.org/schema/beans"    xmlns:jdbc="http://www.springframework.org/schema/jdbc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                    http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
                    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd"> 
```

Ivy.xml looks like this:

```
<dependencies>
<dependency org="org.hibernate" name="hibernate-core" rev="4.1.7.Final"/>
<dependency org="org.hibernate" name="com.springsource.org.hibernate.validator" rev="4.2.0.Final" />
<dependency org="org.hibernate.javax.persistence" name="hibernate-jpa-2.0-api" rev="1.0.1.Final"/>
<dependency org="org.hibernate" name="hibernate-entitymanager" rev="4.1.7.Final"/>
<dependency org="org.hibernate" name="hibernate-validator" rev="4.3.0.Final"/>

<dependency org="org.springframework" name="spring-context" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework" name="spring-web" rev="3.1.2.RELEASE"/>   
<dependency org="org.springframework" name="spring-tx" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework" name="spring-webmvc" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework" name="spring-test" rev="3.1.2.RELEASE"/>

<dependency org="org.springframework.security" name="spring-security-core" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework.security" name="spring-security-web" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework.security" name="spring-security-config" rev="3.1.2.RELEASE"/>
<dependency org="org.springframework.security" name="spring-security-taglibs" rev="3.1.2.RELEASE"/>

<dependency org="net.sf.dozer" name="dozer" rev="5.3.2"/>
<dependency org="org.apache.poi" name="poi" rev="3.8"/>
<dependency org="commons-io" name="commons-io" rev="2.4"/>
<dependency org="org.slf4j" name="slf4j-api" rev="1.6.6"/>
<dependency org="org.slf4j" name="slf4j-log4j12" rev="1.6.6"/>
<dependency org="org.slf4j" name="slf4j-ext" rev="1.6.6"/>
<dependency org="log4j" name="log4j" rev="1.2.17"/>
<dependency org="org.testng" name="testng" rev="6.8"/>
<dependency org="org.dbunit" name="dbunit" rev="2.4.8"/>
<dependency org="org.easymock" name="easymock" rev="3.1"/>
</dependencies> 
```

I understand (hope) this error is due to a mismatch between the declared xsd and the jars on the classpath. Any pointers will be greatly appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T21:34:19.903

试试这个模式位置： xsi:schemaLocation="http://www.springframework.org/schema/beans [http://www.springframework.org/schema/beans/spring-beans.xsd](http://www.springframework.org/schema/beans/spring-beans.xsd) " 这也指向最新架构。还要删除您在tomcat中的工作文件夹以确保没有冲突..

# grails - Grails 域类单元测试错误

> ID：12825756
> 
> 赞同：0
> 
> 时间：2012-10-10T18:16:13.947
> 
> 标签：grails, grails-orm

我编写了以下域类及其单元测试。当我运行测试时，我收到错误消息
`No such property: admittedMobileUser`。当我在域类中评论该行时，我在其他领域遇到了同样的问题。有谁知道如何解决它？

```
class MobileUser {
    String userName
    String userDevice="Android"
    Integer userCluster
    Boolean admittedMobileUser
    Date lastTimeUpdatedUserSpaceTime=new Date()
    byte[] userSpaceTimeXml

    static constraints = {
        userName blank:false, unique:true
        userDevice blank:false
        userCluster validator : {val-> return val > 0}
        admittedMobileUser
        lastTimeUpdatedUserSpaceTime
        userSpaceTimeXml maxSize:1024*1024
    }

    String toString(){
        return "${userName}_${userCluster}"
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:23:37.067

从约束中删除此类行：

```
 ....
    admittedMobileUser
    lastTimeUpdatedUserSpaceTime
    .... 
```

或为每个添加至少一个约束！

# c# - 将双精度数组转换为列表

> ID：12825766
> 
> 赞同：0
> 
> 时间：2012-10-10T18:16:45.280
> 
> 标签：c#, list

txt 文件，其中包含几列数字，每一列都保存在一个双精度数组中，我想做的是获取特定列的平均值，但要做到这一点，我必须将数组转换为列表然后开始计算. 到目前为止我有这个代码：

```
 List<double> 1 = new List<double>(NumSepaERG);
  List<double> 12 = NumSepaERG.ToList(); 
```

但是我得到了 Invalid Expression term double 的错误

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:19:34.443

变量名称不能以数字字符开头。更改为：

```
List<double> list1 = new List<double>(NumSepaERG); 
```

但是您可以使用 Linq 计算平均值而无需转换为列表：

```
double average = NumSepaERG.Average(); 
```

如果`NumSepaERG`是一个锯齿数组（数组的数组），则语法为：

```
double average = NumSepaERG[i].Average(); 
```

其中`i`介于 0 和数组数量 - 1 之间；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:18:44.407

我认为这是一个语法错误，你不能将数字作为变量名。实际上，您甚至不需要将其列在清单上。

```
double average = NumSepERG.Average(); 
```

# string - 在 MIPS 程序集中切换字符位置

> ID：12825768
> 
> 赞同：1
> 
> 时间：2012-10-10T18:16:53.960
> 
> 标签：string, assembly, mips

我正在尝试打印

```
Hello, world.
ello, world.H
llo, world.He
lo, world.Hel
o, world.Hell
, world.Hello
 world.Hello,
world.Hello,
orld.Hello, w
rld.Hello, wo
ld.Hello, wor
d.Hello, worl
.Hello, world
Hello, world. 
```

仅在内存中使用此字符串`String: .asciiz "Hello, world."`。到目前为止，这是我的代码：

```
 .text
String:    .asciiz "Hello, world."
x:         .float 13

    .data 
Main:       lw $t0,x
            jal PrintString
            li $v0, 10
            syscall

PrintString:    la $a0,String
                li $v0,4
                syscall
                bgtz $t0, MoveString
                jr $ra

MoveString: (CODE) 
```

但我不确定在 MoveString 标签中放什么。我需要将字符移`String`一位，然后将其中的内容减去`x`1。我不知道该怎么做。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T23:14:05.197

首先注意几点：

*   你有`.text`并且`.data`混淆了
*   继续在字符串末尾添加一个换行符，它会使显示更好一些：

    ```
    String:    .asciiz "Hello, world.\n" 
    ```

*   假设 13 用于字符串的长度，您应该使用整数而不是浮点数：

    ```
    x:         .word 13 
    ```

现在，进入问题。有两种方法可以做到这一点：1）就地旋转字符串并`syscall 4`每次调用，或2）保持字符串原样并一次打印一个字母，而不是使用索引来实现旋转效果。您选择了方法 1，所以让我们开始吧。

首先编写一些伪代码。您需要一个子程序，它将存储的字符串`$a0`向左旋转一个字母。立即，您应该考虑某种循环遍历字符串中的每个字母：

```
for int index from 0 to 12
    copy letter from (index + 1) to index 
```

但是等等：第一个字母会发生什么？它会被破坏。当我们到达终点时会发生什么？我们将把边界之外的东西复制`String`到最后一个字母槽。因此，让我们通过将第一个字母存储到临时寄存器来解决它：

```
temp = letter[0]

for int index from 0 to 11
    copy letter from (index + 1) to index

letter[12] = temp 
```

这样更好；应该这样做。下一个问题：我们如何在 MIPS 中做到这一点？

我们知道`$a0`它将保存字符串的地址，所以让我们认为这是理所当然的。我们至少需要一个临时寄存器——因为我们已经在使用`$t0`for `x`，让我们用它`$t1`来保存第一个字母：

```
MoveString:
lb $t1, String 
```

我们还需要一个索引寄存器，所以让我们使用`$t2`它。将其初始化为零：

```
li $t2, 0 
```

为每个字母增加一次地址寄存器会很好，但我们不想破坏`$a0`，因为它会搞砸`PrintString`。所以让我们将它复制到`$a1`我们的循环中：

```
move $a1, $a0 
```

最后，我们需要知道字符串有多长，所以让我们加载另一个副本`x`into `$t3`：

```
lb $t3, x
sub $t3, $t3, 1               ; We're only iterating over the first 12 letters,
                              ; since the last letter is done manually with temp 
```

现在我们可以开始循环了。我们需要将字母（只是一个字节）从复制`$a1 + 1`到`$a1`：

```
MoveStringLoop:
lb $t4, 1($a1)                  ; Load the letter from (address + 1)
sb $t4, 0($a1)                  ; Store it to (address)
add $a1, $a1, 1                 ; Increment our address
add $t2, $t2, 1                 ; Increment our index
blt $t2, $t3, MoveStringLoop    ; Loop again if index < (length - 1)

sb $t1, 0($a1)                  ; Copy the temp letter to the end of the string 
```

应该是这样的。之后，我们可以递减`x`并返回`PrintString`：

```
sub $t0, $t0, 1
b PrintString 
```

无论如何，这都不是最佳解决方案。我确信一个真正的编译器和一些更好的编码可以用一半的指令完成工作。但是由于您正在学习如何编写程序集，所以暂时不要担心微优化。这是最终代码及其输出：

```
 .data
String:    .asciiz "Hello, world.\n"
x:         .word 13

    .text 
Main:       lw $t0,x
            jal PrintString
            li $v0, 10
            syscall

PrintString:    la $a0,String
                li $v0,4
                syscall
                bgtz $t0, MoveString
                jr $ra

MoveString:
                lb $t1, String
                li $t2, 0
                move $a1, $a0
                lb $t3, x
                sub $t3, $t3, 1

MoveStringLoop:
                    lb $t4, 1($a1)
                    sb $t4, 0($a1)
                    add $a1, $a1, 1
                    add $t2, $t2, 1
                    blt $t2, $t3, MoveStringLoop

                sb $t1, 0($a1)

                sub $t0, $t0, 1
                b PrintString 
```

输出：

```
Hello, world.
ello, world.H
llo, world.He
lo, world.Hel
o, world.Hell
, world.Hello
 world.Hello,
world.Hello,
orld.Hello, w
rld.Hello, wo
ld.Hello, wor
d.Hello, worl
.Hello, world
Hello, world. 
```

# javascript - Invoke JS method from C# using SignalR?

> ID：12825771
> 
> 赞同：4
> 
> 时间：2012-10-10T18:17:02.213
> 
> 标签：javascript, c#, asp.net, signalr, dom-events

I know there are lots of examples out there to do with SignalR but I can't seem to get it working, I was hoping that one of you may be able to show (in full) how a WebPage (threaded loop so we can see it happening over and over) could call a JS method on a Page and change a text label or create a popup or, just something so that we an see the method execute?

I'll give you my code and maybe you can point out the error, but any basic example of Server->Client invocation without a Client first making a request would be amazing!

Hub:

```
[HubName("chat")]
public class Chat : Hub
{
    public void Send(string message)
    {
        // Call the addMessage method on all clients?
        Clients.addMessage(message);
    }
} 
```

Calling (Threaded) method:

```
private void DoIt()
{
    int i = 0;
    while (true)
    {
        var hubContext = GlobalHost.ConnectionManager.GetHubContext<Chat>();
        hubContext.Clients.addMessage("Doing it... " + i);
        i++;
        Thread.Sleep(500);
    }
} 
```

JS:

```
$(function () {
    // Proxy created on the fly
    var chat = $.connection.chat;

    // Declare a function on the chat hub so the server can invoke it
    chat.addMessage = function (message) {
        confirm("Are you having fun?");
        confirm(message);
    };

    // Start the connection
    $.connection.hub.start();        
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T20:02:08.023

我遇到的问题是一个自关闭的 JS 导入标签，它停止了页面上正在运行的所有 JS ......

对于其他有同样问题的人，这是我在服务器上将数据推送到所有客户端的工作示例，而无需客户端的任何提示：

Javascript：

```
$(function () {
    // Proxy created on the fly
    var chat = $.connection.chat;

    // Declare a function so the hub can invoke it
    chat.addMessage = function (message) {
        document.getElementById('lblQuestion').innerHTML = message;
    };

    // Start the connection
    $.connection.hub.start();
}); 
```

HTML：

```
<h2 id="lblQuestion" runat="server">Please wait for a question...</h2> 
```

中心：

```
[HubName("chat")]
public class Chat : Hub
{
    public void Send(string message)
    {
        // Call the addMessage method on all clients
        Clients.addMessage(message);
    }

    public void Broadcast(string message)
    {
        IHubContext context = GlobalHost.ConnectionManager.GetHubContext<Chat>();
        context.Clients.addMessage(message);
    }
} 
```

致电客户：

```
private void DoIt()
{
    int i = 0;
    while (true)
    {
        var hubContext = GlobalHost.ConnectionManager.GetHubContext<Chat>();
        hubContext.Clients.addMessage("Doing it... " + i);
        i++;
        Thread.Sleep(500);
    }
} 
```

对 DoIt() 的线程调用：

```
 var thread = new Thread(new ThreadStart(DoIt));

    thread.SetApartmentState(ApartmentState.STA);
    thread.Start(); 
```

# linux - 在 Linux 上关闭（）套接字的正确方法，Linux 和 Windows 之间的区别？

> ID：12825774
> 
> 赞同：4
> 
> 时间：2012-10-10T18:17:27.493
> 
> 标签：linux, sockets, flush

我正在**丢失**套接字上的数据，因为我正在执行`close()`.

Linux 特定的[`shutdown()`](http://linux.die.net/man/2/shutdown)联机帮助页没有帮助：

> shutdown() 调用导致与 sockfd 关联的套接字上的全双工连接全部或部分关闭。如果 SHUT_RD 是多少，将不允许进一步的接收。如果 SHUT_WR 怎样，则不允许进一步传输。如果 SHUT_RDWR 怎么样，将不允许进一步的接收和传输。

微软的[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740481.aspx)更好，但它是特定于 Windows 的，它与 Linux 之间存在差异：

> 为确保在连接的套接字关闭之前发送和接收所有数据，应用程序应在调用 closesocket 之前使用 shutdown 关闭连接。等待通知远程端已发送其所有数据并启动正常断开连接的一种方法使用 WSAEventSelect 函数，如下所示：
> 
> ```
> 1\. Call WSAEventSelect to register for FD_CLOSE notification.
> 2\. Call shutdown with how=SD_SEND.
> 3\. When FD_CLOSE received, call the recv or WSARecv until the function completes with success and indicates that zero bytes were received. If SOCKET_ERROR is returned, then the graceful disconnect is not possible.
> 4\. Call closesocket. 
> ```

## 我的问题

*   在 Linux 下，什么相当于等待`FD_CLOSE`（步骤 1）？

我收到的答案和评论认为我在询问 Windows 上的行为。我问的是 Linux 上的行为，我只是*参考*Windows 文档，因为它比 Linux 联机帮助页更清晰和完整。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T07:07:24.770

[在我对close() 没有正确关闭套接字的](https://stackoverflow.com/questions/12730477/close-is-not-closing-socket-properly/12730776#12730776)*非常详细*的回答中遵循了 MSDN 建议。[这与Remy Lebeau 的](https://stackoverflow.com/users/65863/remy-lebeau)回答基本相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T22:04:46.843

请注意您引用的 Microsoft 文档如何使用`WSAEventSelect`. 这意味着它不是*唯一*的方法。相同的文档还描述了使用“重叠接收呼叫”的类似方法`WSARecv()`。然而，更常见（而非事件驱动）的方法是先调用`shutdown()`，然后`recv()`在循环中调用，直到它返回 0（正常断开连接）或`SOCKET_ERROR`(-1)，然后再调用`closesocket()`。

# java - Install trouble for Android SDK in Eclipse Helios

> ID：12825776
> 
> 赞同：1
> 
> 时间：2012-10-10T18:17:34.253
> 
> 标签：java, android, eclipse, installation

EDIT: I fixed it by not installing the NDK Development stuff. I don't know what it is, or what it does, but it fixed my problem.

I'm on Windows 64-bit, using Eclipse Helios, and trying to install the latest Android SDK. So far, I've been able to download and install the SDK Manager and successfully ran through its stuff.

The trouble comes in when I try to install inside of Eclipse (Help -> Install New Software). Every time I try to install using either the URL address (http://developer.android.com/sdk/installing/installing-adt.html) or the .zip file I get this error:

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, >     phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Comparison method violates its general contract!
Comparison method violates its general contract! 
```

The internet doesn't seem to have any answers that I can find. Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:28:31.900

以管理员身份运行 eclipse 并安装 Android SDK。

您必须使用[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)安装 SDK。

请参阅[安装 ADT 插件](http://developer.android.com/sdk/installing/installing-adt.html)

顺便问一下，您使用的是哪个版本的java？我认为该错误可能是与 Java 1.7 相关的 Eclipse 错误。

试试 JRE 1.6 看看它是否有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:23:36.377

您需要以下工具来启动android开发 (1) Eclipse ide (2) ADT for eclipse (android plugin for eclipse) (3) Android SDK

[您可以从以下链接http://codeglympse.blogspot.in/2012/10/installing-eclipse-and-android-sdk.html](http://codeglympse.blogspot.in/2012/10/installing-eclipse-and-android-sdk.html)中简要了解这些步骤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T20:57:57.810

谈话迟到了……

但是我在尝试从较旧的 Eclipse 版本（现在包括 Helios）安装包时发现了这个错误，这些包与 Android 完全无关。实际上，我花了一段时间才弄清楚所有这些 Eclipse 项目名称实际上是版本。在撰写本文时，Eclipse Kepler 是最新的，一旦我升级（几乎是全新安装）到 Kepler 并再次尝试安装软件包，一切正常。

希望这对某人有帮助。

# spring-mvc - Unit Testing I18N RESTful Web Services with Spring, RestTemplate and Java Config

> ID：12825778
> 
> 赞同：1
> 
> 时间：2012-10-10T18:17:37.753
> 
> 标签：spring-mvc, configuration

Trying to get Unit Tests to work when using Spring RestTemplate and I18N. Everything in the setup works fine for all the other test cases.

Based upon what I read, this is what I put into the Java Config:

```
@Bean
public LocaleChangeInterceptor localeChangeInterceptor() {
    return new LocaleChangeInterceptor();
}

@Bean
public DefaultAnnotationHandlerMapping handlerMapping() {
    DefaultAnnotationHandlerMapping mapping = new DefaultAnnotationHandlerMapping();
    Object[] interceptors = new Object[1];
    interceptors[0] = new LocaleChangeInterceptor();
    mapping.setInterceptors(interceptors);
    return mapping;
}

@Bean
public AnnotationMethodHandlerAdapter handlerAdapter() {
    return new AnnotationMethodHandlerAdapter();
} 
```

Then in my usage with RestTemplate I have:

```
 public MyEntity createMyEntity(MyEntity bean) {
    Locale locale = LocaleContextHolder.getLocale();
    String localeString = "";
    if (locale != Locale.getDefault()) {
        localeString = "?locale=" + locale.getLanguage();
    }
    HttpEntity<MyEntity> req = new HttpEntity<MyEntity>(bean);
    ResponseEntity<MyEntity> response = restTemplate.exchange(restEndpoint + "/url_path" + localeString, HttpMethod.POST, req, MyEntity.class);
    return response.getBody();
} 
```

While this could be cleaned up a bit, it should work - but the LocalChangeInterceptor never gets invoked. I am debugging this now and will post again as soon as I figure it out - but in the hope this is a race condition that I lose - does anyone know why?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:45:38.357

很幸运，偶然发现了这个[线程](https://stackoverflow.com/questions/10745736/spring-3-1-handlerinterceptor-not-being-called)。其中一个笔记让我找到了正确的方向。您不需要 Java Config 中的所有这些 bean。但是***，如果您***像我一样使用@EnableWebMvc，但我不知道它是否重要到足以提及，那么您在 Java Config 中需要做的就是：

```
@Bean
public LocaleChangeInterceptor localeChangeInterceptor() {
    return new LocaleChangeInterceptor();
}

@Override
public void addInterceptors(InterceptorRegistry registry) {
    registry.addInterceptor(new LocaleChangeInterceptor());
    super.addInterceptors(registry);
} 
```

为拦截器添加一个 bean，然后覆盖添加拦截器的方法。这里我的配置类（用@Configuration和@EnableWebMvc注解）也扩展了WebMvcConfigurerAdapter，应该是常用的。

至少，这对我有用。希望它可以帮助别人。

# common-lisp - 有没有办法在 GCL 中使用 quicklisp？

> ID：12825781
> 
> 赞同：1
> 
> 时间：2012-10-10T18:17:47.353
> 
> 标签：common-lisp, quicklisp, gnu-common-lisp

安装/`(load "/home/inaimathi/quicklisp/setup.lisp")`都失败。2011 年的这个[仍然开放的任务](http://savannah.gnu.org/support/?107611#discussion)告诉我它可能没有得到修复。

有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-07T18:42:08.067

[Clozure CL](http://ccl.clozure.com/)和[SBCl](http://www.sbcl.org/)都可以在 ARM 上运行 hunchentoot Web 服务器。

# javascript - 如何每 15 秒通过 ajax 自动重新加载内容，同时检查容器是“活动”还是“悬停”

> ID：12825783
> 
> 赞同：1
> 
> 时间：2012-10-10T18:18:00.677
> 
> 标签：javascript, jquery, css

我有一些代码可以通过 ajax 重新加载我的内容，但是如果某些内容在帖子中间，我不希望它重新加载（这是论坛，我正在通过 ajax 拉入）

```
 //refresh every 15 secs
    var refreshId = setInterval(function()
    {
        $('#fluxbb-forum').load(current_forum_url);

    }, 15000); 
```

我将如何检查表单字段是否“活动”？如果可能，我会尽量避免设置不必要的标志。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:21:38.730

```
$("#formField").is(":focus") 
```

...将告诉您用户是否将焦点放在 ID 为“formField”的表单字段中。在您的 AJAX 函数之前执行此操作。

您还可以启动计时器并确定用户最后一次按键的时间，以防他们走开。

# css - 为什么使用 draggable="true" 拖动时不显示 div 的内容？

> ID：12825786
> 
> 赞同：4
> 
> 时间：2012-10-10T18:18:06.837
> 
> 标签：css, html, twitter-bootstrap, draggable

因此，我使用`draggable="true"`div 来保存其他几个 div，这些 div 具有`span`从[Twitter 的 Bootstrap](http://twitter.github.com/bootstrap/)应用的类。引发的问题是，当我拖动支架时，未显示子元素。如果我从 Bootstrap 中删除类，则元素会在拖动过程中显示。

损坏的示例可以在[jsfiddle.net/8umGq/](http://jsfiddle.net/8umGq/4/)上找到。

究竟是什么导致了这个问题，为了使用这些`span`类并且在拖动时仍然可以看到内容，我应该覆盖什么？

我想让它在 Chrome 的最新或 beta 版本上运行，并且仍然保留样式和`span`类的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T20:36:06.617

我设法通过添加`position: relative;`到`.holder`元素来修复它。

请参阅此处的示例[jsfiddle.net/bq9qw/](http://jsfiddle.net/bq9qw/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-10T19:23:35.167

我认为您必须退回到 jQuery 才能使可拖动功能正常工作，例如：

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <style type="text/css">
        .holder {
            height: 20px;
            background-color: rgba(255, 0, 0, 0.5);
        }

        .span2 {
            background-color: rgba(0, 255, 0, 0.5);
        }
    </style>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js"></script>
    <script>
        function init(){
            $('div.holder').draggable();
        }

        $(document).ready(function(){init()});
    </script>
</head>
<body>
<div class="row">
    <div class="holder">
        <div class="span2">
            Foo
        </div>
        <div class="span2">
            Bar
        </div>
    </div>
</div>​
</body>
</html> 
```

# c# - 从存储过程构建定义特定列和行的网格

> ID：12825787
> 
> 赞同：1
> 
> 时间：2012-10-10T18:18:11.227
> 
> 标签：c#, asp.net

我有一个返回几列的存储过程，我只对构建一个`ProjectID`值为 null 的 gridview 感兴趣。我下面的代码返回所有列的所有行，它只是应该返回 where column = projectID。有人可以看看它。谢谢

```
DataRowCollection rowCollection = spDataTable.Rows;
DataTable dt = new DataTable();

foreach (DataColumn col in spDataTable.Columns)
{
                if (col.ColumnName == "ProjectID")
                {
                    dt.Columns.Add(col.ColumnName);
                    lb_Test.Items.Add(col.ColumnName);
                        foreach(DataRow ros in col.Table.Rows)
                        {
                            foreach (object oObj in ros.ItemArray)
                            {
                                if (oObj != null)
                                {
                                    if (col.ColumnName == "ProjectID")
                                    {
                                        lb_Test.Items.Add(oObj.ToString());
                                        dt.Rows.Add(oObj);
                                    }
                                }
                                else
                                {
                                    lb_Test.Items.Add("Null");
                                }
                            }   
                        }
                        grd_test.DataSource = dt;
                        grd_test.DataBind();
                }
                else
                {
                    lb_Test.Items.Add("Not valid Name");
                }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:40:17.040

如果我理解这个问题，似乎你所需要的就是这个......

```
DataRowCollection rowCollection = spDataTable.Rows; 
DataTable dt = new DataTable(); 

foreach(DataRow dr in spDataTable.Rows)
{
        object projectId = dr["ProjectID"];
        if (projectId == null)
        {
            dt.Rows.Add(dr);
        }
     } 
```

这将使用 ProjectID 列中的值为空的所有行填充 rowCollection。

话虽如此，如果可以的话，您可以考虑将存储过程更改为只返回您想要的行。这将节省网络流量。

Also, a DataTable has built-in filtering capabilities...[http://msdn.microsoft.com/en-us/library/zk13kdh0(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/zk13kdh0%28v=vs.71%29.aspx). Maybe this would be a better approach.

DataViews also have the capability to filter data. Then you can bind your GridView to a DataView... [https://stackoverflow.com/questions/10893860/how-to-filter-gridview-from-textbox](https://stackoverflow.com/questions/10893860/how-to-filter-gridview-from-textbox)

There are several ways to filter DataTables that are built into .Net. There is no need to roll your own.

# android - 在真实设备上阅读android中的书签失败

> ID：12825789
> 
> 赞同：0
> 
> 时间：2012-10-10T18:18:15.210
> 
> 标签：android

我正在我的应用程序中从浏览器中读取书签。它正在计算机中的模拟器上运行，但是当我在真实设备上运行该应用程序时，它崩溃了。

首先，我正在填充这样的 ListView：

`String[] proj = new String[]{Browser.BookmarkColumns.TITLE, Browser.BookmarkColumns.URL};
String sel = Browser.BookmarkColumns.BOOKMARK;
myCursor = getContentResolver().query(Browser.BOOKMARKS_URI, proj, sel, null, null);
int[] to = new int[]{R.id.txtTitle, R.id.txtUrl};
adapter = new SimpleCursorAdapter(getBaseContext(), R.layout.list_view_row, myCursor, proj, to, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);
bookMarksListView = (ListView)findViewById(R.id.listViewBookMarks);
bookMarksListView.setAdapter(adapter);`

这正在模拟器上工作。模拟器运行的是 Android 2.3.3

并且真机运行的是android 4.0.4

我认为 Android 4.0.4 可以运行 2.3.3？关于我应该如何让它工作的任何建议？

我希望该应用程序能够在 2.3.3 到 4.0 的设备上运行

# windows - 是否可以像在 unix 中一样在 windows cmd 中获取批处理文件？

> ID：12825790
> 
> 赞同：19
> 
> 时间：2012-10-10T18:18:17.190
> 
> 标签：windows, batch-file, call

我是一个 unix 人，但我必须在 windows 中编写一个系统，并且我正在尝试编写一个脚本来移动一些文件。我试图让父批处理文件调用一个子批处理文件，其中包含：

```
set REPORTFILE=c:\report.txt 
```

然后我希望父母能够使用 %REPORTFILE% 变量。显然 CALL 命令创建了一个新的上下文。在 unix 中，您只需获取脚本，这在 windows 中可能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-10T18:39:27.360

如果我理解...这似乎在 Vista 中对我有用：

调用者.bat

```
echo this is the caller
echo initial value is: %reportfile%
call setter.bat
echo value is: %reportfile% 
```

设置器.bat

```
echo this is the value setter
set reportfile=c:\report.txt 
```

C:\temp>调用者

> C:\temp>echo 这是调用者
> `this is the caller`
> C:\temp>echo 初始值为：
> `initial value is:`
> C:\temp>call setter.bat
> 
> > C:\temp>echo 这是值设置器
> > `this is the value setter`
> > C:\temp>set reportfile=c:\report.txt
> 
> C:\temp>echo 值为：c:\report.txt
> `value is: c:\report.txt`

更新为使用 goto 而不是括号：

```
if not exist file.txt goto doit
goto notfound
:doit 
echo this is the caller 
echo initial value is: %reportfile% 
call setter.bat
echo value is: %reportfile%
goto end
:notfound
 echo file found 
:end 
```

# asp.net - 如何使用 SQL Server 和 ASP.NET MVC 将图像作为字段插入

> ID：12825791
> 
> 赞同：3
> 
> 时间：2012-10-10T18:18:26.483
> 
> 标签：asp.net, asp.net-mvc

我对 ASP.NET MVC 很陌生。我有一个模型，它有一些图像字段 ( `byte[]`)。

我也创建了控制器和视图，但是当我运行代码时，没有任何东西可以上传图像字段。我的图像是我模型的某些字段，而其他字段是字符串。

请帮我。控制器和视图应该如何？

模型类：

```
 public int Id { get; set; }
  public string Name { get; set; }
  public string Activity { get; set; }
  public string Address { get; set; }
  public string Tel { get; set; }
  public string Work_Hours { get; set; }
  public byte[] img1 { get; set; }
  public byte[] img2 { get; set; } 
```

控制器（创建）：

```
 public ActionResult Create(Shop shop)
    {
        try
        {

            var bytes = new byte[0];
            ViewBag.Mime = "image/png";

            if (Request.Files.Count == 1)
            {
                bytes = new byte[Request.Files[0].ContentLength];
                Request.Files[0].InputStream.Read(bytes, 0, bytes.Length);
                ViewBag.Mime = Request.Files[0].ContentType;
            }

            db.Shop.Add(shop);
            db.SaveChanges();

            return RedirectToAction("Index");
        }
        catch
        {
            return View();
        }
    } 
```

我的观点的所有部分都是这样的：

```
 <div class="editor-label">
        <%: Html.LabelFor(model => model.Activity) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.Activity) %>
        <%: Html.ValidationMessageFor(model => model.Activity) %>
    </div>
<div class="editor-label">
        <%: Html.LabelFor(model => model.img2) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.img2)%>
        <%: Html.ValidationMessageFor(model => model.Shop_img2) %>
    </div> 
```

但是我应该用什么来上传图片？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:03:44.383

```
 @{ Html.BeginForm("Load", "Image", FormMethod.Post, 
        new { enctype = "multipart/form-data" }); }
    <input id="file" type="file" name="file" />
    <input id="submit" type="submit" value="Upload Image" style="display: none;" />
    @{ Html.EndForm(); }

    [HttpPost]
    public ActionResult Load(HttpPostedFileBase file)
    {
        if (file.ContentLength == 0)
            RedirectToAction("LoadImage");

        var fileBytes = new byte[file.ContentLength];
        file.InputStream.Read(fileBytes, 0, file.ContentLength);

        // save fileByptes here...

        return RedirectToAction("Edit");
    } 
```

# javascript - 隐藏/显示点击问题的 div

> ID：12825796
> 
> 赞同：0
> 
> 时间：2012-10-10T18:18:41.707
> 
> 标签：javascript, html, onclick

我有一个代码，它应该隐藏并显示任何标签的 div onclick。这有效，但只有当我单击标签两次时它才有效。在我单击它两次后，它会在每次单击时开始显示和隐藏。我该如何解决？

点击

```
<span style="cursor:pointer;" onClick="ShowDIV();"><img src="pictures/view.png" /></span> 
```

Javascript

```
function ShowDIV(){
if (DIV1.style.display=="none") DIV1.style.display="block";
else DIV1.style.display="none";
} 
```

HTML 分区 CSS

```
div.popup
{
display:none;
background-image:url('pictures/opacitycover.png');
width:100%;
height:100%;
position:fixed;
top:0;
left:0;
z-index:2;
} 
```

# mysql - MySQL - 计数记录并按流行顺序显示计数

> ID：12825803
> 
> 赞同：0
> 
> 时间：2012-10-10T18:18:57.660
> 
> 标签：mysql, sql

每次有人访问我网站上的博客文章时，我都会将其记录在表 [blog_article_hits] 中。每次访问都有一行。我现在想显示过去 14 天的热门文章列表，显示文章标题和收到的点击量或百分比。

**例子：**

```
This is a blog article        1,0732
This is another article       930 
```

**我的尝试：**

```
SELECT
tre.article_id, COUNT(*) AS total_hits, art.title, art.description,
pho.photo_id
FROM blog_article_stats tre
LEFT JOIN blog_articles AS art ON tre.article_id = art.article_id
LEFT JOIN blog_photos AS pho ON art.article_id = pho.article_id
WHERE tre.d_time BETWEEN DATE_SUB(Now(), INTERVAL 14 DAY) AND Now()
AND pho.status = 'Published' AND art.status = 'Published'
GROUP BY tre.article_id
ORDER BY total_hits DESC LIMIT 5 
```

它非常接近，但并不完全正确。最受欢迎的文章按正确的顺序列出，但每个标题旁边的计数不正确。它实际上显示了每篇文章有多少张照片，而不是访问了多少次。我认为通过 GROUP BY 会有所帮助，我什至尝试在 [pho.article_id] 上添加辅助 GROUP 子句，但这没有帮助。

我选择 [pho.photo_id] 并加入 [pho.blog_photos]，纯粹是因为我想在每个列出的结果旁边显示一张照片。

有人可以告诉我如何解决这个问题吗？

非常感谢 adv。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:33:11.283

将计数更改为：

```
COUNT(DISTINCT tre.PK) AS total_hits 
```

`PK`该表的主键在哪里。

# c# - 在 WPF 应用程序上管理 Word 文档

> ID：12825806
> 
> 赞同：0
> 
> 时间：2012-10-10T18:19:06.560
> 
> 标签：c#, .net, wpf

我正在创建一个加载和编辑 Word 文档的 WPF 应用程序。代码如下：

```
 public bool Generate(string path, ProjectVO project)
            {
                saveAs = path;
                projectName = project.Name;
                projectVersion = project.Version;

                object missing = System.Reflection.Missing.Value;
                Microsoft.Office.Interop.Word.Application wordApp = new Microsoft.Office.Interop.Word.Application();
                //Setup our Word.Document class we'll use.
                Microsoft.Office.Interop.Word.Document aDoc = null;

                // Check to see that file exists
                if (File.Exists((string)fileName))
                {
                    DateTime today = DateTime.Now;

                    object readOnly = false;
                    object isVisible = false;
                    try
                    {

                        //Set Word to be not visible.
                        wordApp.Visible = false;

                        //Open the word document
                        aDoc = wordApp.Documents.Open(ref fileName, ref missing,
                            ref readOnly, ref missing, ref missing, ref missing,
                            ref missing, ref missing, ref missing, ref missing,
                            ref missing, ref isVisible, ref missing, ref missing,
                            ref missing, ref missing);

                        // Activate the document
                        aDoc.Activate();

                        // Find Place Holders and Replace them with Values.
                        this.FindAndReplace(wordApp, "{Name}", projectName);
                        this.FindAndReplace(wordApp, "{Version}", projectVersion);

                    }
                    catch (Exception ex)
                    {
                        MessageBox.Show(ex.Message);
                        //Close the document
                        aDoc.Close(ref missing, ref missing, ref missing);
                        return false;

                    }

                }
                else
                {
                   return false;
                }

                //Save the document as the correct file name.
                aDoc.SaveAs(ref saveAs, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing,
                        ref missing, ref missing, ref missing, ref missing);

                //Close the document
                aDoc.Close(ref missing, ref missing, ref missing);
                return true;

        } 
```

它工作正常，但是当客户端没有 Microsoft Word 时，不会创建 Word 文档。有没有办法创建它，并保存在一个文件夹中，即使客户端无法打开它？或者有没有办法将它保存为 PDF 或 TXT 作为未安装 Word 时的替代形式？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:56:06.237

如果客户端计算机未安装 Word，则无法创建 Word 文档。

您当然可以创建一个 txt 文件，但不能通过 Office Interop。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T20:11:25.450

您可以使用“open xml sdk”生成不带单词的 docx，但这并不容易。

[http://www.microsoft.com/en-us/download/details.aspx?id=5124](http://www.microsoft.com/en-us/download/details.aspx?id=5124)

Sdk 包含一个从现有 docx 文件自动生成代码的工具。

要生成 pdf，我建议使用“iTextSharp”库 [http://itextpdf.com/](http://itextpdf.com/)

# jquery - jQuery悬停2张图像的无尽动画

> ID：12825809
> 
> 赞同：1
> 
> 时间：2012-10-10T18:19:15.223
> 
> 标签：jquery

有示例：[http](http://www.jquery4u.com/jquery-functions/setinterval-example/#.UHW6_IYY18E) : //www.jquery4u.com/jquery-functions/setinterval-example/#.UHW6_IYY18E 将鼠标悬停在 RSS feedburner 图像上 - 它会摇晃。

就我而言，我有 2 个图像：non-hover.png、hover.png。

当 a:link - 它显示为背景 non-hover.png，当你悬停时它显示 hover.png 并以 3 秒的间隔切换到 non-hover.png（当光标仍在此链接上时），就像无限循环，您悬停，它会以 3 秒的间隔将 non-hover.png 切换为 hover.png。

当光标在锚点上方时，我希望 jquery 每三秒在两个图像之间切换一次。

**解决方案。**

```
 $(document).ready(function() {

      function pizdec() {
        setTimeout(function(){ $('.istina').css('background-image','url("<?php print $base_path . $directory ?>/img/istina.png")'); }, 500);
        $('.istina').css('background-image', 'url("<?php print $base_path . $directory ?>/img/istina-hover.png")');
      }

  var IntervalID;

  $('.istina').hover(function() {
    pizdec();
    IntervalID = setInterval(pizdec, 1000)
  }, function() {
      clearInterval(IntervalID);
    }
  )

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:27:24.913

在您发布的网站上，feedburner 图像的隆隆声效果是通过以下方式实现的

```
/* jRumble RSS Animate Hover */
jQuery.noConflict().getScript('http://www.jquery4u.com/scripts/jrumble.1.1.min.js', function()
{
    jQuery.noConflict()('#rss-feedburner-image').jrumble({
        rumbleEvent: 'hover'
    });
}); 
```

有关当鼠标悬停在其上时会导致跳舞广场的示例，请参见[http://jsfiddle.net/xACuf/](http://jsfiddle.net/xACuf/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:30:59.483

你有两张图片，所以我想你可以使用 jQuery 和一个计时器来实现效果。

使用 jQuery 将自定义函数绑定到要在鼠标进入和离开时调用的元素。使用它们来启动和停止计时器，该计时器可以调用第三个函数，替换图像。查看[http://api.jquery.com/hover/](http://api.jquery.com/hover/)和[http://www.w3schools.com/js/js_timing.asp](http://www.w3schools.com/js/js_timing.asp)了解更多信息。

如果您需要有关代码的任何帮助，请告诉我。

# mysql - 如何在数据库中存储 8000 亿个 GPS 标记

> ID：12825810
> 
> 赞同：14
> 
> 时间：2012-10-10T18:19:16.113
> 
> 标签：mysql, database, database-design, gps, nosql

我需要将用户记录的 GPS 轨迹存储到数据库中。轨道每移动 5 米就会包含一个标记，用于在地图上绘制一条线。我估计有 200 公里的轨道，这意味着 40,000 个 lnlt 标记。我估计最少有 50,000 个用户，每个用户有 20 条 200 公里的轨道。这意味着至少有 400 亿个 lnlt 标记。

这也需要扩展，因此对于 100 万用户，我需要 8000 亿个 GPS 标记的容量。

由于每组 40,000 个标记属于单个轨道，因此我们说的是 1 - 2000 万条记录/组 GPS 轨道。

要求：用户将请求在移动应用程序的谷歌地图上查看这些轨迹。

关系：我目前有 2 张桌子。表一有：[trackid]、[userid]、[comment]、[distance]、[time]、[top speed]。

表 2 有 [trackid] [longitude] [latitude]，这是所有 GPS 标记的存储位置。在保持读取性能的同时存储大量 GPS 数据的有效方法是什么？

新的信息：

将 GPS 数据存储在 KML 文件中，以便在 Google 地图上将它们显示为轨迹，这是一种节省数据库空间的好解决方案。将 KML 压缩到 KMZ（基本上是带有 KMZ 扩展名的压缩 KML）会大大减少文件大小。KMZ 的加载速度比 GPX 快得多，并且可以作为 KML 层与 Google Maps API 集成。[请参阅 Google 提供的此信息](https://developers.google.com/maps/documentation/javascript/layers#KMLLayers)以获取更多帮助。到目前为止，这似乎是满足预期要求的最佳解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:24:12.660

与往常一样，特定数据库的选择取决于您希望如何存储信息以及如何使用它。因此，在不了解项目的确切要求以及数据关系的情况下，最好的办法是**阅读该主题，以确定最适合您的特定产品或存储模型。**

一个好的起点是阅读比较数据库的性能和使用的博客（见附件）：

[http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis](http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis)

# asp.net - 在全日历中将所有事件显示为 AllDay，如果它为假的话。

> ID：12825811
> 
> 赞同：0
> 
> 时间：2012-10-10T18:19:19.003
> 
> 标签：asp.net, fullcalendar

我在全日历中遇到了 AllDay 事件的问题，如果我将 allday 设置为 false，那么它仍然显示为 allday，有人可以看到为什么！？我添加了 allday，所以我不知道我使用的名称是否正确，但日历工作正常，它只是将所有事件显示为 AllDays。

```
<%@ WebHandler Language="VB" Class="fullcalendarjson" %>

Imports System
Imports System.Collections.Generic
Imports System.Web
Imports System.IO

Public Class fullcalendarjson : Implements IHttpHandler

Public Sub ProcessRequest(context As HttpContext) Implements IHttpHandler.ProcessRequest
    context.Response.ContentType = "text/plain"
    context.Response.Expires = -1
    Dim tasksList As IList(Of CalendarDTO) = New List(Of CalendarDTO)()

    tasksList.Add(New CalendarDTO() With { _
        .id = 1, _
        .title = "Google search", _
        .start = ToUnixTimespan(DateTime.Now), _
        .[end] = ToUnixTimespan(DateTime.Now.AddHours(4)), _
        .url = "www.google.com", _
        .allday = False _
    })
    tasksList.Add(New CalendarDTO() With { _
        .id = 1, _
        .title = "Bing search", _
        .start = ToUnixTimespan(DateTime.Now.AddDays(1)), _
        .[end] = ToUnixTimespan(DateTime.Now.AddDays(1).AddHours(4)), _
        .url = "www.bing.com", _
        .allday = False _
    })
    tasksList.Add(New CalendarDTO() With { _
        .id = 1, _
        .title = "AllDay search", _
        .start = ToUnixTimespan(DateTime.Now.AddDays(3)), _
        .[end] = ToUnixTimespan(DateTime.Now.AddDays(3)), _
        .url = "www.bing.com", _
        .allday = True _
    })
    Dim oSerializer As New System.Web.Script.Serialization.JavaScriptSerializer()
    Dim sJSON As String = oSerializer.Serialize(tasksList)
    context.Response.Write(sJSON)
End Sub

Private Function ToUnixTimespan([date] As DateTime) As Long
    Dim tspan As TimeSpan = [date].ToUniversalTime().Subtract(New DateTime(1970, 1, 1, 0, 0, 0))

    Return CLng(Math.Truncate(tspan.TotalSeconds))
End Function

Public ReadOnly Property IsReusable() As Boolean Implements IHttpHandler.IsReusable
    Get
        Return False
    End Get
End Property
Public Class CalendarDTO
    Public Property id() As Integer
        Get
            Return m_id
        End Get
        Set(value As Integer)
            m_id = Value
        End Set
    End Property
    Private m_id As Integer
    Public Property title() As String
        Get
            Return m_title
        End Get
        Set(value As String)
            m_title = Value
        End Set
    End Property
    Private m_title As String
    Public Property start() As Long
        Get
            Return m_start
        End Get
        Set(value As Long)
            m_start = Value
        End Set
    End Property
    Private m_start As Long
    Public Property [end]() As Long
        Get
            Return m_end
        End Get
        Set(value As Long)
            m_end = Value
        End Set
    End Property
    Private m_end As Long
    Public Property url() As String
        Get
            Return m_url
        End Get
        Set(value As String)
            m_url = Value
        End Set
    End Property
    Private m_url As String
    Public Property allday() As String
        Get
            Return m_allday
        End Get
        Set(value As String)
            m_allday = value
        End Set
    End Property
    Private m_allday As String
End Class

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:24:39.810

allday 应该是 allDay - d 是大写字母。默认情况下 allDay 为 true - 但可以使用`allDayDefault`选项控制此默认行为 - [http://arshaw.com/fullcalendar/docs/event_data/allDayDefault/](http://arshaw.com/fullcalendar/docs/event_data/allDayDefault/)

# perl - 拆分大写字母和数字

> ID：12825813
> 
> 赞同：0
> 
> 时间：2012-10-10T18:19:27.107
> 
> 标签：perl, cgi, cgi-bin

我需要这个脚本来拆分大写字母和数字。我已经对大写字母部分进行了拆分，但我似乎无法弄清楚它的数字方面。

需要的结果：`Hvac System 8000 Series :: Heating System 8000 Series :: Boilers`

```
#!/usr/bin/perl

print "Content-type: text/html\n\n";

use CGI qw(:standard);
use CGI::Carp qw(warningsToBrowser fatalsToBrowser);
use strict;

my $Last_URL = "HvacSystem8000Series/HeatingSystem8000Series/Boilers";

my ($Cat,$Sub1,$Sub2) = split(/\//, $Last_URL, 3);

if ($Sub2) {

    $Last_URL = "<b>$Cat :: $Sub1 :: $Sub2</b>";
}
else {

    $Last_URL = "<b>$Cat :: $Sub1</b>";
}

my @Last_URL = $Last_URL =~ s/(.)([A-Z][^A-Z][^0-9])/$1 $2/g;
print "$Last_URL"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:28:23.927

一些`s///`转换将为您提供所需的内容：

```
for ($Last_URL) {
    s/ ([a-z]) ([A-Z0-9]) / "$1 $2" /egx;  # Foo123 -> Foo 123
    s/ ([0-9]) ([A-Z]) / "$1 $2" /egx;     # 123Bar -> 123 Bar
    s! / ! " :: " !egx;                    #   /    -> " :: "
}
print $Last_URL, "\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:59:54.503

我建议您只使用正则表达式匹配来查找字符串中所有必需的“单词”，然后用空格将它们连接起来。这个程序演示。它算作`/`一个词，所以这些可以用双冒号代替来完成这个过程

```
use strict;
use warnings;

my $Last_URL = "HvacSystem8000Series/HeatingSystem8000Series/Boilers";

(my $string = join ' ', $Last_URL =~ m<[A-Z][a-z]*|\d+|/>g) =~ s|/|::|g;

print $string; 
```

**输出**

```
Hvac System 8000 Series :: Heating System 8000 Series :: Boilers 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T23:57:39.967

就像 pilcrow 的回答，但是，你知道，不同

```
#!/usr/bin/env perl

use strict;
use warnings;

my $string = "HvacSystem8000Series/HeatingSystem8000Series/Boilers";

$string =~ s/(?<=\p{Ll})(?=\p{Lu}|\pN)/ /g;
$string =~ s/(?<=\pN)(?=\p{Lu})/ /g;
$string =~ s'/' :: 'g;

print "$string\n"; 
```

# django - 在浏览器上录制音频

> ID：12825818
> 
> 赞同：5
> 
> 时间：2012-10-10T18:19:41.860
> 
> 标签：django, audio, audio-recording

我有我用 Django 和 SQL lite 开发的基本网站。我想给它添加这个功能。

用户应该能够单击按钮并记录不超过 10 秒的消息并保存。

它可以作为音频文件保存在服务器上，或者如果更有效和可能的话，可以保存在数据库中。

如果 Django 已经有任何组件或插件或我可以使用的东西，你能告诉我吗？

如果它不存在，我最好的选择是什么。如果我需要从头开始写，你能指出我的任何教程/博客等吗？

谢谢你的时间

*   R M

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-22T08:25:50.920

据我所知，django 没有这样的插件。但这主要不是 django 的工作。[您可以使用Web Audio API](http://webaudio.github.io/web-audio-api/)通过 javascript 录制音频，也可以使用多个项目之一（请参阅[此答案](https://stackoverflow.com/a/20759947/921736)）。此外，如果您必须支持较旧的浏览器，我认为您最好的选择是为此目的使用 Flash（但某些移动浏览器不支持它）。所以最好的办法是为支持音频 API 的浏览器使用某种带有 html5 和 javascript 实现的后备模式，并为其他浏览器使用 flash。

# mysql - MySQL 恢复数据

> ID：12825820
> 
> 赞同：0
> 
> 时间：2012-10-10T18:19:48.797
> 
> 标签：mysql, restore

有时mysql会恢复数据——我更新了一行，半小时后一切都和以前一样。这很奇怪……

也许它与临时文件有关？

# javascript - 在 setTimeout() 之后检查鼠标是否还在

> ID：12825826
> 
> 赞同：1
> 
> 时间：2012-10-10T18:20:04.543
> 
> 标签：javascript, jquery

我有一段代码在鼠标移出时隐藏了一个元素。

代码如下所示：

```
var myMouseOutFunction = function (event) {

    setTimeout(function () {

    $(".classToHide").hide();

    $(".classToShow").show();

    }, 200);

}; 
```

这会产生非常接近我想要做的结果。但是，我想等待超时时间（在本例中为 200 毫秒），然后检查我的鼠标是否仍然“超出”元素。如果是，我想对所需元素执行 .hide() 和 .show() 。

我想这样做是因为如果用户稍微将鼠标移出然后迅速将鼠标移回，当用户只想查看元素时，我不希望元素闪烁（意思是：隐藏然后快速显示）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-10T18:22:40.007

将超时的返回值分配给一个变量，然后`clearTimeout`在 onmouseover 事件中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:28:26.813

[详解](https://stackoverflow.com/a/12825853/297641)Kolink答案

**演示：http:** [//jsfiddle.net/EpMQ2/1/](http://jsfiddle.net/EpMQ2/1/)

```
var timer = null;
element.onmouseout = function () {
    timer = setTimeout(function () {
      $(".classToHide").hide();
      $(".classToShow").show();
    }, 200);
}

element.onmouseover = function () {
    clearTimeout(timer);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T18:23:21.890

你应该使用jquery 的`mouseenter`和`mouseleave`。mouseenter 和 mouseleave 只会被调用一次。如果`mouseenter`再次调用，请使用标志 if 检查。

```
 var isMouseEnter ;
    var mouseLeaveFunction = function (event) {
       isMouseEnter = false;
        setTimeout(function () {
             if(isMouseEnter ){ return;}
             $(".classToHide").hide();

                $(".classToShow").show();

           }, 200);
    };
    var mouseEnterFunction = function(){

        isMouseEnter = true;
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T18:24:34.047

使用布尔标志：

```
var mustWait = true;
var myMouseOutFunction = function (event) {

    setTimeout(function () {
        if(mustWait){
            mustWait = false;
        }
        else{
            $(".classToHide").hide();
            $(".classToShow").show();
            mustWait = true;
       }
    }, 200);
}; 
```

# android - 应用程序意外关闭

> ID：12825828
> 
> 赞同：0
> 
> 时间：2012-10-10T18:20:16.047
> 
> 标签：android, broadcastreceiver

我正在android中开发一个应用程序并使用BroadcastReceiver类来覆盖onReceive方法。但是当短信来临时，我的应用程序意外关闭。代码如下所示。

```
package com.jb.blinkme;
import android.os.Bundle;
import android.os.Handler;
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.telephony.SmsMessage;
import android.view.Menu;
import android.widget.Toast;

public class BlinkMe extends Activity {

private static final int LED_NOTIFICATION_ID = 33;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_blink_me);
    RedFlashLight();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_blink_me, menu);
    return true;
}
public void RedFlashLight() {
    NotificationManager nm = ( NotificationManager ) getSystemService( NOTIFICATION_SERVICE );
    Notification notif = new Notification();
    notif.ledARGB = 0xF7FE2E;
    notif.flags = Notification.FLAG_SHOW_LIGHTS;
    notif.ledOnMS = 1000; 
    notif.ledOffMS = 1000; 
    nm.notify(LED_NOTIFICATION_ID, notif);
    Handler myHandler = new Handler();
    myHandler.postDelayed(mClearLED_Task, 10000);
}
public void ClearLED() {
    NotificationManager nm = ( NotificationManager ) getSystemService( NOTIFICATION_SERVICE );
    nm.cancel( LED_NOTIFICATION_ID );
}
public Runnable mClearLED_Task = new Runnable() {
    public void run() {
        ClearLED();
    }
};

}

package com.jb.blinkme;
import android.content.BroadcastReceiver;
import android.os.Bundle;
import android.content.Context;
import android.content.Intent;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class SMSReceiver extends BroadcastReceiver {

/**
 * @see android.content.BroadcastReceiver#onReceive(android.content.Context, android.content.Intent)
 */
@Override
public void onReceive(Context context, Intent intent) {
    BlinkMe blink = new BlinkMe();
    blink.RedFlashLight();

}
} 
```

我的清单文件是

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.jb.blinkme"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.RECEIVE_SMS" />
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:debuggable="true" >
    <activity
        android:name=".BlinkMe"
        android:label="@string/title_activity_blink_me" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <receiver android:name=".SMSReceiver" android:enabled="true">
        <intent-filter>
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
    </receiver>
</application> 
```

但是在运行应用程序时，它意外关闭，我从 LogCat 收到以下错误。

```
10-10 23:38:53.410: E/AndroidRuntime(6248): FATAL EXCEPTION: main
10-10 23:38:53.410: E/AndroidRuntime(6248): java.lang.RuntimeException: Unable to start receiver com.jb.blinkme.SMSReceiver: java.lang.IllegalStateException: System services not available to Activities before onCreate()
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2146)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.ActivityThread.access$1500(ActivityThread.java:127)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1208)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.os.Looper.loop(Looper.java:137)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.ActivityThread.main(ActivityThread.java:4441)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at java.lang.reflect.Method.invokeNative(Native Method)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at java.lang.reflect.Method.invoke(Method.java:511)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at dalvik.system.NativeStart.main(Native Method)
10-10 23:38:53.410: E/AndroidRuntime(6248): Caused by: java.lang.IllegalStateException: System services not available to Activities before onCreate()
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.Activity.getSystemService(Activity.java:3989)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at com.jb.blinkme.BlinkMe.RedFlashLight(BlinkMe.java:32)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at com.jb.blinkme.SMSReceiver.onReceive(SMSReceiver.java:18)
10-10 23:38:53.410: E/AndroidRuntime(6248):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2139)
10-10 23:38:53.410: E/AndroidRuntime(6248):     ... 10 more 
```

有什么问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:23:50.787

```
BlinkMe blink = new BlinkMe();
blink.RedFlashLight(); 
```

那是你的错误`onReceive`。您不能创建这样的实例，`Activity`因为它不是`Class`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T22:22:10.227

而不是：BlinkMe 闪烁 = new BlinkMe(); 闪烁.RedFlashLight();

做：BlinkMe.RedFlashLight()

并确保将该方法设为静态（尝试将变量设为静态）

# c++ - C++：从子类访问父类

> ID：12825829
> 
> 赞同：3
> 
> 时间：2012-10-10T18:20:17.143
> 
> 标签：c++, class, parent

我有两节课：

```
class ClassA {
    public:
        ClassB *classB;
        int i = 100;
}
// and:
class ClassB {
    public:
        void longProcess();
} 
```

我从 ClassB() 中运行 void：

```
ClassA classA = new ClassA();
classA->i = 100;
classA->classB = new ClassB();
classB->longProcess(); // it's a long process!
// but when it will finish - I need to get the "i" variable from ClassA 
```

如何从方法中获取“int i”变量：longProcess()？实际上，我需要在另一个线程中运行这个长代码，这就是为什么当 longProcess() 完成工作时我需要从 ClassB 中检索“i”变量的原因。有什么建议么？

**更新：我尝试编写一些代码来保存指向父类的指针**

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[ ChildClass.h ]-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

```
#include "ParentClass.h"
class ChildClass {
    public:
        ChildClass();
        ParentClass *pointerToParentClass; // ERROR: ISO C++ forbids declaration of 'ParentClass' with no type
        void tryGet_I_FromParentClass();
}; 
```

错误：ISO C++ 禁止声明没有类型的“ParentClass”

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[ ChildClass.cpp ]-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

```
#include "ChildClass.h"
ChildClass::ChildClass(){}
void ChildClass::tryGet_I_FromParentClass(){
    // this->pointerToParentClass...??? it's not work
} 
```

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[ ParentClass.h ]-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

```
#include "ChildClass.h"
class ParentClass {
    public:
        ParentClass();
        ChildClass *childClass;
        int i;
}; 
```

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[ ParentClass.cpp ]-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

```
#include "ParentClass.h"
ParentClass::ParentClass(){
    childClass = new ChildClass();
    childClass->pointerToParentClass = this;
} 
```

//-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=[ MainWindow.cpp ]-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=

```
ParentClass *parentClass = new ParentClass(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-10T18:25:48.577

您需要将`this`指针从 A 类（或任何指向它的指针）传递给 B 类（可能在构造函数中），以便它知道它包含在哪里，并且可能有一个指向 A 的 B 类成员。然后像调用其他方法一样调用实例方法。

这里没有继承，所以其他一些例子不起作用。

编辑：根据您的用户名，我猜您对 Java 更熟悉？你需要的是一个前向声明。基本上这将是`ChildClass.h`：

```
class ParentClass; // Empty
class ChildClass
{
    ParentClass* myParent;
    // Body omitted
} 
```

确保`ChildClass.h`包含在顶部`ParentClass.h`并正常声明，并包含`ParentClass.h`在两个 .cpp 文件中。并确保所有的实现`ChildClass`都在 .cpp 文件中，并且对于`ParentClass`（每个都在自己的，与否无关紧要）中相同。

这里发生的是您正在为编译器创建循环引用，但`ChildClass.h`您只需要告诉编译器“这里有一个指针”就可以了。因此，您不需要类的“全尺寸”，因此“空”前向声明就足够了。当 .cpp 文件滚动时，编译器“知道”每个文件的完整大小，并且不会抛出错误。

有关这方面的更多信息，请参阅[C++ 常见问题解答。](http://www.parashift.com/c++-faq/forward-decl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:32:41.783

如果`A::callMeWhenLongProcessFinished()`实际上是您每个人都想从中调用的唯一函数`B::longProcess()`，则可以将指向`A`对象的指针传递给该函数：

```
void B::longProcess(A* object) {
    // long process
    object->callMeWhenLongProcessFinished();
} 
```

如果设置不是那么简单，您可以改为使用`B::longProcess()`设置`std::function<void()>`来调用正确的函数并调用它：

```
void B::longProcess(std::function<void()> callback) {
    // long process
    if (callback) {
        callback();
    }
}

void some_function() {
    A* aptr = get_A_object();
    B* bptr = get_B_object();
    bptr->longProcess(std::bind(&A::callMeWhenLongProcessFinished, aptr));
} 
```

在不同线程中完成调用需要以适当的线程安全方式发送对象，但这是一个完全独立的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:23:19.030

在子方法结束时调用父方法：

```
void ClassB::longProcess() {
  // do your processing
  // ...

  callMeWhenLongProcessHasFinished();
} 
```

如果由于某种奇怪的原因，您无法修改`longProcess`，请编写另一个方法来串行调用这两个方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T18:23:29.740

您应该[加入](http://msdn.microsoft.com/en-us/library/aa332368%28v=vs.71%29.aspx "加入")ClassB 以便 ClassA 在 ClassB 完成之前不会执行它的方法。或者，只需在 ClassB 的方法末尾调用 ClassA 中的方法。

# internet-explorer - IE9 将同级 HTML 节点视为后代

> ID：12825831
> 
> 赞同：2
> 
> 时间：2012-10-10T18:20:39.420
> 
> 标签：internet-explorer, xpath, html-parsing

我正在研究现有 Web 应用程序的自动化测试。我在尝试通过 XPath 选择某些文档节点时遇到了以下问题。

在特定屏幕上，应用程序显示一个带有五个选项卡的选项卡控件。此选项卡控件背后的原始 HTML 如下：

```
<ul class="tab_set-tabs">
    <span id="forTab">
        <li class="tab_set-tabSelectionAware">
            <a href="javascript:void(0);" id="tabOption_tabSet1">
                <strong id="tabOption_tabSet1" class="">
                    Vendor
                </strong>   
            </a>
        </li>
    </span><span id="forTab_0">
        <li class="tab_set-tabSelectionAware">
            <a href="javascript:void(0);" id="tabOption_tabSet2">
                <strong id="tabOption_tabSet2" class="">
                    Ship To
                </strong>   
            </a>
        </li>
    </span><span id="forTab_1">
        <li class="tab_set-tabSelectionAware">
            <a href="javascript:void(0);" id="tabOption_tabSet3">
                <strong id="tabOption_tabSet3" class="">
                    Comments
                </strong>   
            </a>
        </li>
    </span><span id="forTab_2">
        <li class="tab_set-tabSelectionAware">
            <a href="javascript:void(0);" id="tabOption_tabSet4">
                <strong id="tabOption_tabSet4" class="">
                    Custom
                </strong>   
            </a>
        </li>
    </span><span id="forTab_3">
        <li class="tab_set-tabSelectionAware">
            <a href="javascript:void(0);" id="tabOption_tabSet5">
                <strong id="tabOption_tabSet5" class="">
                    History
                </strong>   
            </a>
        </li>
    </span>
</ul> 
```

如您所见，有 5 个同级“跨度”节点，每个节点代表 5 个选项卡之一。然而，当我在 IE9 的开发者工具中查看 HTML 的同一部分时，我看到了：

试图发布 IE DevTools 的屏幕截图，但作为一个新用户，该网站不会让我这样做，所以这是我所看到的近似值：

```
[-] <ul class="tab_seet-tabs>
    [-] <span id="forTab">
        [-] <li ...>
            [+] <a ...>
            [-] <span id="forTab_0">
                [-] <li ...>
                    [+] <a ...>
                    [-] <span id="forTab_1">
                        [-] <li ...>
                            [+] <a ...>
                            [-] <span id="forTab_2">
                                [-] <li ...>
                                    [+] <a ...>
                                    [-] <span id="forTab_3">
                                        [-] <a ...>
                                            [+] <strong id="tabOption_tabSet5"> 
```

因此 IE 似乎错误地解析了 HTML 并将兄弟跨度节点视为彼此的后代（或者更具体地说，它将每个跨度视为前一个跨度的 li 子级的子级）。

这不仅仅是开发者工具的一个怪癖。使用我们的测试工具，我尝试使用以下 xpath 单击标有“历史”的第 5 个选项卡：

```
//form[@id="form"]/ul/span/li/a[contains(strong,"History")] 
```

这在 Firefox 和 chrome 中运行良好，但无法在 IE9 中找到该节点。但是，如果我在 IE9 中尝试这个 xpath，它可以工作：

```
//form[@id="form"]/ul/span/li/span/li/span/li/span/li/span/li/a[contains(strong,"History")] 
```

知道什么会导致 IE9 在解析基本的 HTML 父/兄弟/子节点关系时如此悲惨地失败吗？

# android - 带有两个 EditText 字段的 AlertDIalog

> ID：12825834
> 
> 赞同：3
> 
> 时间：2012-10-10T18:20:46.123
> 
> 标签：android, layout, dialog, android-edittext

我正在尝试使用两个 EditText 字段创建自定义 AlertDialog 以供输入。这是代码：

```
void newItemInput(){

    AlertDialog.Builder builder = new AlertDialog.Builder(this);

    LayoutInflater inflater = this.getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.dialog_signin, null));

    builder.setTitle("");
    builder.setMessage("");

    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        @Override
        public void onClick(DialogInterface dialog, int whichButton) {

            EditText item_name = (EditText)findViewById(R.id.item_name);
            EditText item_price =(EditText)findViewById(R.id.item_price);

            String text = item_name.getText().toString();
            String text_price = item_price.getText().toString();
            int price = Integer.parseInt(text_price);

            // Do something with value!
            products.add(new Product(text, price, R.drawable.unread, false));

        }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

        }
    });
    builder.show();
} 
```

`AlertDialog`出现，我可以输入数据。但是，当我按下 OK，同时将文本和价格作为参数传递给 时`products.add(new Product(text, price, R.drawable.unread, false))`，应用程序崩溃了。这是布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
    <EditText
        android:id="@+id/item_name"
        android:inputType="text"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"/>
    <EditText
        android:id="@+id/item_price"
        android:inputType="number"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="16dp"/>
</LinearLayout> 
```

请让我知道，我做错了什么。当我不使用自定义对话框并且只使用一个文本字段时，它可以正常工作。但我需要两个字段，我假设这次崩溃是因为`LayoutInflater`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:31:15.107

**首先**，将来当您收到 LogCat 错误时，请发布它们。

**最好的解决方案**是将对话框转换为`AlertDialog`，然后使用它。

```
AlertDialog aDialog = (AlertDialog) dialog; // This will ONLY work if (dialog instanceof AlertDialog)
EditText item_name = (EditText) aDialog.findViewById(R.id.item_name);
EditText item_price =(EditText) aDialog.findViewById(R.id.item_price); 
```

或者，**如果上述方法不起作用**，您可以将`View`您提供给构建器的内容保存起来，然后改用它。

像这样，使用`final`修饰符访问`OnClickListener`：

```
final View v = inflater.inflate(R.layout.dialog_signin, null);
builder.setView(v); 
```

然后，访问`v.findViewById`内部`OnClickListener`以查找视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:24:17.673

其中 AlertDialog alertDialog = (AletrDialog) 对话框；

```
EditText item_name = (EditText)**alertDialog **.findViewById(R.id.item_name);

EditText item_price =(EditText)**alertDialog **.findViewById(R.id.item_price); 
```

您必须以这种方式在对话框中找到视图。

正如 Eric 提到的，对话框应该被强制转换为 AlertDialog

# ruby - 说“anwer="this" 或 answer="that" 的更短的方式

> ID：12825835
> 
> 赞同：0
> 
> 时间：2012-10-10T18:20:47.600
> 
> 标签：ruby, function, expression

> **可能重复：**
> [优雅的链式“或”用于在 Ruby 中对同一变量进行测试](https://stackoverflow.com/questions/10260050/elegant-chained-ors-for-tests-on-same-variable-in-ruby)

`answer="this" or answer = "that"`罗嗦

我希望能够使用更像的表达式，`answer =("this" or that")`但我知道我不能`or`在完成后使用该表达式，然后将（真或假）结果与答案进行比较，所以这不是我想要的。更像 a =~ [a/c] 但我需要插值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T18:38:15.113

我假设您的意思是`==`（平等比较）而不是`=`（分配）。如果是这种情况，根据具体情况，您可以执行以下操作之一：

```
if [this, that].include? answer

# or #

case answer
when this, that
  # do something
end 
```

后者更适合当您有许多要检查的选项集时，而前者在您只有一组您感兴趣的选项时更具可读性。（我通常会将选项粘贴在命名变量，所以它会更像`if right_answers.include? answer`. 这样它就可以清楚地读取并且易于维护。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T21:20:21.303

您还可以使用正则表达式：

```
answer = 'this'
true if answer =~ /th[is|at]/
=> true

answer = 'that'
true if answer =~ /th[is|at]/
=> true

answer = 'blah'
true if answer =~ /th[is|at]/
=> nil 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T19:31:00.483

实际上，`this || that`实际上并不返回 TRUE 或 FALSE。它将返回第一项，除非该项为 'falsey'（false 或 nil，注意 "" 不是 false 或 nil），否则将返回第二项。因此，以下将起作用：

```
foo = nil
bar = "that"
baz = ""
qux = false

answer = foo || bar # => "that"
answer = bar || foo # => "that"
answer = baz || bar # => ""
answer = foo || qux # => false
answer = qux || foo # => nil 
```

因此，实际上，您的表达式`answer =("this" or that")`实际上会起作用，只是它总是会评估为“this”，因为“this”不是“假”。

# forms - 水平对数回归解释？

> ID：12825837
> 
> 赞同：0
> 
> 时间：2012-10-10T18:20:55.807
> 
> 标签：forms, statistics, regression, economics

如果我想通过 OLS 估计水平对数回归，我这样做是因为我相信我的 x 值（自变量）显示我的 y 值（因变量）的边际收益递减。

例如小时 = beta0 + beta1*log(wage) 其中小时 = 每周工作小时工资 = 小时工资

然后 OLS 拟合一条直线。为了解释我的 beta1 系数，我将其除以 100，即工资增加 1% 对每周工作时间有 XX 影响。

但是从我估计的 beta1 系数来看，既然它是一条线性线，我怎么能看到独立变量对依赖项的递减影响呢？

在估计之后突然我看不出我如何将这个常数解释为对因变量的递减影响？

亲切的问候玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:07:25.753

这应该已经发布到 StackOverflow 的统计版本中。无论如何，我的建议是试试这个（从基本的线性模型开始）：

1）检查残差图。如果线性模型中没有异方差的迹象，则停止。否则，如果您可以在残差中看到模式（漏斗、正弦曲线或其他任何东西），请继续。-> E[sigma_i]!=sigma for i=1..k 其中 k = 模型尺寸。

2）尝试使用平方模型。在这种情况下，我会这样做：

```
Y = beta[0]+beta[1]*X+beta[2]*X^2 
```

那么如果你的想法是正确的，你应该得到一个正的 beta[1] 和一个负的 beta[2]。最有可能是 abs(beta[1])>abs(beta[2])。这意味着对于较小的值或 X，平方分量（负）的影响将很小甚至没有，而对于较大的 X 值，负平方分量将非常强。现在回到 1) 如果你得到正常的残差，你就完成了。

3）尝试：

```
Y = beta[0]+beta[1]*log(X) 
```

与：

```
Y = beta[0]+beta[1]*log(X^2) 
```

看看哪一个给你最好的残差。

你的推理只有一个问题。你不再有一条直线，而是一条曲线，用关系 Y = b*LN(X) 表示。因此，对数曲线本身解释了您的“收益递减”。

# android - 即使应用程序被杀死，eclipse android也会保存微调器值

> ID：12825840
> 
> 赞同：0
> 
> 时间：2012-10-10T18:21:23.020
> 
> 标签：android, button, save, spinner, switch-statement

我想让这个微调器选择的值被保存（永远），直到你改变它，所以它会触发将它跳转到选定的项目意图。我已经尝试过 mPres_doctor 的东西，但我无法让它工作......这是我的鳕鱼。

```
android.widget.Spinner spinner3 = (android.widget.Spinner) findViewById(R.id.spinner3);
ArrayAdapter<CharSequence> adapter4 = ArrayAdapter.createFromResource(
        this, R.array.dinklass, android.R.layout.simple_spinner_item);
adapter4.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner3.setAdapter(adapter4);

    spinner3.setOnItemSelectedListener(new OnItemSelectedListener()
    {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub

                switch (arg2) {
                case 0:                 
                    //Intent intent1 = new Intent(Schema.this, EKE1A.class);
                    //startActivity(intent1);                        
                    break;

                case 1:
                    Toast.makeText(getApplicationContext(), "Schema laddas...", Toast.LENGTH_SHORT).show();
                    Intent eke1a = new Intent(Schema.this, EKE1A.class);
                    startActivity(eke1a);                       
                    break; 
```

等等。

# android - 带有来自 XAMPP 服务器的图像的 GridView

> ID：12825844
> 
> 赞同：0
> 
> 时间：2012-10-10T18:21:48.823
> 
> 标签：android, xml, gridview, xampp, gallery

我必须做包含带有 GridView 的 Gallery 的 android 应用程序，并且图像应该来自 XAMPP 服务器，而不是来自这样的文件夹（可绘制）：

```
public class ImageAdapter extends BaseAdapter implements ListAdapter {

public static int[] images = {R.drawable.image1, R.drawable.image2,
                R.drawable.image3, R.drawable.image4,
                R.drawable.image5, R.drawable.image6,
                R.drawable.image7, R.drawable.image8,
                R.drawable.image9, R.drawable.image10,
                R.drawable.image11, R.drawable.image12,
                R.drawable.image13, R.drawable.image14};
private Context context;

public ImageAdapter (Context applicationContext)
{
    context = applicationContext;
} 
```

并且图像应该是可点击的（缩放）。谢谢:)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:30:56.050

给你：[https ://github.com/palmerc/Android-Universal-Image-Loader](https://github.com/palmerc/Android-Universal-Image-Loader)

此代码满足您的两个要求。

原始代码来自 Nostra13，但如果我没记错的话，从之前的 stackoverflow 帖子中，这个家伙 Palmerc 纠正了其中的一两件事。

# javascript - 如何跟踪慢速 JS 或 JQuery 代码

> ID：12825845
> 
> 赞同：4
> 
> 时间：2012-10-10T18:21:51.120
> 
> 标签：javascript, jquery, performance, image, firebug

我创建了一个用于查看图像的网页。这个页面有一些我没有写的其他代码。该页面在加载时会加载 40 个小图像。然后用户将向下滚动并可以通过 ajax 加载 40 张图像的附加页面。一旦我达到 15-20 页，我注意到页面开始显着变慢。我检查了应用程序计数器，它可以达到 100% cpu，内存可以超过 3GB。然后我不可避免地会得到 JQuery 执行时间过长的模态，问我是否要停止执行脚本。现在我意识到一个包含多达 800 个图像的页面是一个很大的负载，但是 JQuery 的问题向我表明，一些代码也可能会迭代这个越来越大的 dom 对象组。当我通过 15 页左右时，它几乎似乎呈指数级变慢。一旦我达到 20 页，它就几乎无法使用。

首先，当您有这么多图像时，即使使用最少的 JS，是否也可以高效地运行页面？其次，是否有推荐的方法来“跟踪” JS 并查看正在执行哪些类型的函数来帮助确定最可能的罪魁祸首是什么？这对我来说是最重要的——在 Firebug 中有什么好的方法吗？

谢谢 ：）

编辑 - 我找到了我的答案。我有一些旧代码用于替换无法用通用图像加载的图像。此代码使用 Jquery 的 .each 运算符，因此每次加载页面时都会遍历整个页面和每个新的 ajax 添加。我将为需要在 CSS 中检查的图像设置一个类，以便 ajax 加载的图像不受影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:33:27.360

Firebug 和所有其他调试工具可让您分析您的功能。您可以看到它们运行需要多长时间以及它们被调用了多少次。

[http://getfirebug.com/javascript](http://getfirebug.com/javascript)

请参阅：分析 JavaScript 性能

另一个有用的工具是 profile() 函数

```
console.log('Starting Profile');
console.profile();
SuspectFunction();
console.profileEnd(); 
```

通过调试器中的控制台窗口，您可以看到配置文件结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:06:52.110

我用过的最好的工具是[https://developers.google.com/web-toolkit/speedtracer/](https://developers.google.com/web-toolkit/speedtracer/)用于 Chrome

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T20:25:02.117

要回答您的第一个问题，计算机处理 15 页图像应该不是问题。谷歌加载多达 46 页的图像，完全没有滞后。尽管它确实会阻止您在那之后加载更多内容。

回答你的第二个问题，有很多方法可以跟踪 JS 代码。由于您正在进行与性能相关的调试，因此我将使用带时间戳的控制台日志：

console.log("消息" + new Date());

我会在您有兴趣测量其性能的函数的开头和结尾放置一个，并通读日志以查看执行每个函数需要多长时间。您将比较时间戳以查看正在执行的多余代码以及代码执行所需的时间。

最后，在 Firebug 中，转到控制台选项卡，然后在开始向下滚动页面之前单击 Pofile。然后滚动到第 15 页，然后再次单击个人资料。它分解了调用的函数和花费的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T20:39:08.140

我更喜欢在 Firebug 或 Chrome 中使用定时器功能，可以这样调用：

```
 console.time('someFunction timer');

   function someFunction(){ ... }

   console.timeEnd('someFunction timer'); 
```

这不像分析器函数那样健壮，但它应该让您了解函数需要多长时间。

此外，如果您以 100% 的 CPU 和 3GB 内存运行，则几乎可以肯定存在内存泄漏。当加载更多页面时，您可能需要考虑删除一些初始图像。例如，在显示 5 个页面后，当用户查看第 6 个页面时，您会删除第一个页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-14T16:36:50.047

我能够通过再次检查我的代码来解决问题。我正在通过 ajax 加载新图像，但我有一条旧代码行正在检查所有图像，即 $('img') 以用通用图像替换任何无法加载的图像。这意味着当我不断加载新图像时，这个选择器必须一次又一次地遍历整个不断增长的 dom。我更改了该代码，现在页面正在运行！感谢大家的帮助。

# java - 为什么局部变量在 Java 中是线程安全的

> ID：12825847
> 
> 赞同：100
> 
> 时间：2012-10-10T18:22:05.520
> 
> 标签：java, thread-safety

我正在阅读 Java 中的多线程，我遇到了这个

> 局部变量在 Java 中是线程安全的。

从那时起，我一直在思考局部变量如何/为什么是线程安全的。

有人可以告诉我。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-10T18:22:39.663

当您创建一个线程时，它将创建自己的堆栈。两个线程将有两个堆栈，一个线程永远不会与另一个线程共享其堆栈。

程序中定义的所有局部变量都将在堆栈中分配内存（正如 Jatin 评论的那样，这里的内存意味着对象的引用值和原始类型的值）（线程的每个方法调用都会在自己的堆栈上创建一个堆栈帧）。一旦该线程完成方法执行，堆栈帧将被删除。

[youtube 上有斯坦福教授的](http://www.youtube.com/watch?v=W8nNdNZ40EQ&feature=relmfu)精彩讲座，可以帮助您理解这个概念。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-10T18:25:57.300

局部变量存储在每个线程自己的堆栈中。这意味着局部变量永远不会在线程之间共享。这也意味着所有局部原始变量都是线程安全的。

```
public void someMethod(){

   long threadSafeInt = 0;

   threadSafeInt++;
} 
```

对对象的本地引用有点不同。引用本身不共享。然而，引用的对象并不存储在每个线程的本地堆栈中。所有对象都存储在共享堆中。如果本地创建的对象从不逃避创建它的方法，则它是线程安全的。实际上，您也可以将其传递给其他方法和对象，只要这些方法或对象都不使传递的对象可用于其他线程

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-10T18:25:31.083

想想像功能定义这样的方法。当两个线程运行相同的方法时，它们绝不相关。他们每个人都会为每个局部变量创建自己的版本，并且无法以任何方式相互交互。

如果变量不是本地的（例如在类级别的方法之外定义的实例变量），那么它们将附加到实例（而不是方法的单个运行）。在这种情况下，运行相同方法的两个线程都看到一个变量，这不是线程安全的。

考虑以下两种情况：

```
public class NotThreadsafe {
    int x = 0;
    public int incrementX() {
        x++;
        return x;
    }
}

public class Threadsafe {
    public int getTwoTimesTwo() {
        int x = 1;
        x++;
        return x*x;
    }
} 
```

首先，在同一个实例上运行的两个线程`NotThreadsafe`将看到相同的 x。这可能很危险，因为线程正在尝试更改 x! 第二，在同一个实例上运行的两个线程`Threadsafe`会看到完全不同的变量，并且不会相互影响。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-10T18:33:43.350

每个方法调用都有自己的局部变量，显然，方法调用发生在单个线程中。仅由单个线程更新的变量本质上是线程安全的。

**但是**，请密切注意这究竟是什么意思：**只有**对变量本身的写入是线程安全的；在它引用的对象上调用方法**本质上不是线程安全的**。直接更新对象的变量也是如此。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-10-13T09:38:20.580

除了 Nambari 等其他答案。

我想指出您可以在匿名类型方法中使用局部变量：

这个方法可以在其他线程中调用，这可能会危及线程安全，因此 java 强制将匿名类型中使用的所有局部变量声明为 final。

考虑这个非法代码：

```
public void nonCompilableMethod() {
    int i=0;
    for(int t=0; t<100; t++)
    {
      new Thread(new Runnable() {
                    public void run() {
                      i++; //compile error, i must be final:
                      //Cannot refer to a non-final variable i inside an
                      //inner class defined in a different method
                    }
       }).start();
     }
  } 
```

如果 java 确实允许这样做（就像 C# 通过“闭包”所做的那样），则局部变量在所有情况下都不再是线程安全的。在这种情况下，`i`所有线程结束时的值不能保证为`100`。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-04-17T07:08:42.700

线程将有自己的堆栈。两个线程将有两个堆栈，一个线程永远不会与另一个线程共享其堆栈。局部变量存储在每个线程自己的堆栈中。这意味着局部变量永远不会在线程之间共享。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-09T06:56:39.867

java中基本上有四种存储类型来存储类信息和数据：

**方法区、堆、JAVA栈、PC**

所以方法区和堆由所有线程共享，但每个线程都有自己的 JAVA 堆栈和 PC，并且不被任何其他线程共享。

java中的每个方法都是堆栈帧。因此，当线程调用一个方法时，堆栈帧将加载到其 JAVA 堆栈上。该堆栈帧和相关操作数堆栈中的所有局部变量都不会被其他人共享。PC 将在方法的字节码中包含下一条要执行的指令的信息。所以所有的局部变量都是线程安全的。

@Weston 也给出了很好的答案。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-12-29T16:38:06.963

**局部变量的Java线程安全**

**只有** **局部**变量存储在线程堆栈上。

**局部变量**（`primitive type`例如 int、long...）存储在`thread stack`并且因此 - 其他线程无法访问它。

**局部变量**（`reference type`的后继`Object`）包含两部分 - 地址（存储在 上`thread stack`）和对象（存储在 上`heap`）

```
class MyRunnable implements Runnable() {
    public void run() {
        method1();
    }

    void method1() {
        int intPrimitive = 1;

        method2();
    }

    void method2() {
        MyObject1 myObject1 = new MyObject1();
    }
}

class MyObject1 {
    MyObject2 myObject2 = new MyObject2();
}

class MyObject2 {
    MyObject3 myObject3 = MyObject3.shared;
}

class MyObject3 {
    static MyObject3 shared = new MyObject3();

    boolean b = false;
} 
```

[![在此处输入图像描述](../Images/261127cb65151411f6b40847699ad418.png)](https://i.stack.imgur.com/eEIo2.png)

[【JVM内存模型】](https://stackoverflow.com/a/65382087/4770877)

# ajax - Zend getParams 不返回 url 参数

> ID：12825854
> 
> 赞同：0
> 
> 时间：2012-10-10T18:22:39.827
> 
> 标签：ajax, zend-framework

我有一个查询： [https ://myaddress.ee/admin/usersearchajax?country=EE&query=arno](https://myaddress.ee/admin/usersearchajax?country=EE&query=arno)

$this->_request->getParam('query');
返回：NULL

var_dump($_REQUEST['查询']);
返回：字符串（5）“arno”

如何解决这个问题？我的意思是如何使用 zend 框架获取 GET 值？假设我无法更改查询字符串。

Zend 版本 1.11.11

```
 public function usersearchajaxAction(){
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender( true );

    $userService = new Application_Services_User();

    $userList = $userService->searchByName($this->_request->getParam('query'));
    $this->_helper->json($userService->getArrayForAutoComplete($this->_request->getParam('query'), $userList));

} 
```

我发现了问题，在我的项目中存在并覆盖了 $_GET 变量。所以现在修复了。感谢大家阅读和思考这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:44:14.737

代替

```
$this->_request->getParam('query'); 
```

用这个

```
$this->_getParam('query'); 
```

不需要在 Action 中使用 request action helper 来获取这个参数

或尝试使用这种使用请求操作助手的方式

```
$request  = $this->getRequest();
$query = $request->getParam('query'); 
```

希望此[链接](http://framework.zend.com/manual/1.12/en/zend.controller.action.html#zend.controller.action.accessors)对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T20:26:26.353

您也可以连续查看所有参数`$this->_request->getParams();` 然后连续找到针参数并开始使用`$this->_request->getParam('needle');`

# css - JqZoom 和 Twitter 引导冲突

> ID：12825855
> 
> 赞同：1
> 
> 时间：2012-10-10T18:22:41.240
> 
> 标签：css, twitter-bootstrap, jqzoom

这是一个[jsfiddle](http://jsfiddle.net/kmurph73/REqVx/)。

使用内部缩放（尽管它不适用于任何缩放类型），它应该像这样工作：http: [//www.mind-projects.it/projects/jqzoom/demos.php#demo4](http://www.mind-projects.it/projects/jqzoom/demos.php#demo4)

有任何想法吗？似乎是 Bootstrap 响应性的问题。删除 img 标签上的 Bootstrap 的`max-width:100%`CSS 声明会稍微改善一点，但它仍然损坏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T20:49:22.190

您需要覆盖最大宽度。

```
.zoomWindow img {max-width:none} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T00:52:39.043

我有同样的问题。我修复了它添加了这个：

```
.zoomWrapperImage img{
  max-width: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T00:56:06.930

您可能想添加一些其他修复`img max-width:100%`

此代码可以在实例化 jqzoom 后立即执行：

```
jQuery('.zoomPup img').css('width', jQuery('.zoomPad img').width() );
jQuery('.zoomPup img').css('height', jQuery('.zoomPad img').height() ); 
```

这在一般的 CSS 中：

```
.zoomPup img {max-width:none; max-height: none;}
.zoomWindow img {max-width:none; max-height: none;} 
```

# typo3 - TYPO3 - 个性化后端盒子的内容

> ID：12825857
> 
> 赞同：0
> 
> 时间：2012-10-10T18:22:49.530
> 
> 标签：typo3, typoscript

我已经构建了一个新的内容元素类型，当您查看后端时，在框内您只能看到模块的名称。我想更改里面显示的信息。

我可以使用“标题”字段，但是有没有办法使用另一个字段？

![示例模块](../Images/28c27f798d283eb03559cd54b1cfa47f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T18:14:31.897

两个答案

## 第一个答案

那里显示的字段与列表模块中显示的字段相同。它是使用扩展名中的 ['ctrl']['label'] 在表的 TCA 中设置的`ext_tables.php`

```
$TCA['tx_myext_mytable'] = array(   
        'ctrl' => array(
        'title' => 'My Table'
        'label' => 'name_of_the_field_to_display_as_header' 
// end snip 
```

## 第二个答案

如果这对您来说还不够，您可以使用挂钩在预览中显示任意 HTML。钩子叫做`$GLOBALS['TYPO3_CONF_VARS']['SC_OPTIONS']['cms/layout/class.tx_cms_layout.php']['tt_content_drawItem']`.

将使用具有此签名的函数调用该钩子：

```
public function preProcess(
    tx_cms_layout &$parentObject,  // parent object
    &$drawItem,   // i have no idea what this is
    &$headerContent,  /* the content of the header
                         (the grey bar in the screenshot i think) */
    &$itemContent,  /* the content of the preview
                       (the white area in your screenshot */
    array &$row // the content element's record
) 
```

因此，您在该函数中所要做的就是将 itemContent 和 headerContent 设置为您想要显示的任何内容。

陷阱：

1.  输出在跨度内，因此 html 中不允许有块元素。任何样式都必须在 style 属性中内联完成。
2.  该函数将在*每个*内容元素上调用，因此您必须检查行`CType`和（如果适用）`list_type`字段，以便您只操作自己的内容元素。

可以在“fed”扩展中找到一个示例。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-10T13:50:38.580

只是对 adhominem answear #2 的一点更新，这是正确的。

今天在 TYPO3 6.2 及更高版本中，你的钩子类必须继承接口`TYPO3\CMS\Backend\View\PageLayoutViewDrawItemHookInterface`

长得像爱人

```
<?php
namespace TYPO3\CMS\Backend\View;

/**
 * Interface for classes which hook into PageLayoutView and do additional
 * tt_content_drawItem processing.
 *
 * @author Oliver Hader <oliver@typo3.org>
 */
interface PageLayoutViewDrawItemHookInterface {

    /**
     * Preprocesses the preview rendering of a content element.
     *
     * @param \TYPO3\CMS\Backend\View\PageLayoutView $parentObject Calling parent object
     * @param boolean $drawItem Whether to draw the item using the default functionalities
     * @param string $headerContent Header content
     * @param string $itemContent Item content
     * @param array $row Record row of tt_content
     * @return void
     */
    public function preProcess(\TYPO3\CMS\Backend\View\PageLayoutView &$parentObject, &$drawItem, &$headerContent, &$itemContent, array &$row);

} 
```

`&$drawItem`是布尔值并作为参考发送，通过将其更改为`$drawItem = false;`将停止预览的默认呈现。

# jquery - IE9 中的 Max-Width 解决方案（带有文本溢出）

> ID：12825858
> 
> 赞同：0
> 
> 时间：2012-10-10T18:23:01.493
> 
> 标签：jquery, html, internet-explorer, css, datatables

我正在尝试在 IE9 中使用 max-width 属性。它被用于具有动态生成宽度的表格单元（我正在使用 dataTables）。我也在使用“文本溢出：省略号；” 所以它基本上具有在视觉上切断字符的效果，但如果没有最大宽度，我就无法做到这一点。

我不想在每个表格单元格上定义一个设置宽度，因为动态创建的在其他情况下都可以正常工作。

这是我的CSS：

```
.tableViewer tbody tr td {
max-width:220px;
overflow:hidden;
text-overflow: ellipsis;
 color: #000000;
font-size: 12px;
margin: 0 0 0 20px;
padding: 5px 5px 5px 10px;
border-left: 1px solid #fff;
border-right: 1px solid #ccc;
/*border-bottom:  1px solid #D8D8D8; */
 -webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
-o-user-select: none;
user-select: none;
} 
```

如前所述，HTML 是通过 DataTables 生成的。但这里是它的呈现形式：

```
<tr class="odd">
<td class=" sorting_1" title="aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb@aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb.com" style="max-width: 220px; overflow: hidden; ">aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb@aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb.com</td>
<td class="" title="aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb" style="max-width: 220px; overflow: hidden; ">aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb</td><td class="" title="aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb" style="max-width: 220px; overflow: hidden; ">aaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbbaaaaabbbbb</td>
<td class="" title="" style="max-width: 220px; overflow: hidden; "></td><td class="" title="" style="max-width: 220px; overflow: hidden; "></td>
<td class="" title="" style="max-width: 220px; overflow: hidden; "></td><td class="" style="max-width: 220px; overflow: hidden; ">2 <a href="#">view</a></td></tr> 
```

很抱歉标题很长，但这就是我试图弄清楚这一点的原因。有人有什么建议吗？

**编辑**：

根据要求，这是一个显示 CSS/HTML 和问题的 JSfiddle！[http://jsfiddle.net/PY4cb/](http://jsfiddle.net/PY4cb/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T11:40:56.713

好的，所以我找到了答案（感谢@MrOBrian 的一些指针）——包含表**需要**有这个属性：

```
table-layout: fixed; 
```

仅在 IE 中。出于某种原因，IE 不会接受没有此元素的表格中单元格的最大宽度（而所有其他浏览器都可以）。

# twitter-bootstrap - Twitter Bootstrap 导航选项卡与 KnockoutJS 冲突

> ID：12825859
> 
> 赞同：1
> 
> 时间：2012-10-10T18:23:02.533
> 
> 标签：twitter-bootstrap, knockout.js, asp.net-mvc-4

我在使用[“基本标签”](http://twitter.github.com/bootstrap/components.html#navs)时遇到问题。我在 MVC 的视图中呈现选项卡，然后在三个不同的部分视图中拥有一堆 KnockoutJS 代码。

我的问题是 Knockout 与其他 Knockout 代码冲突，因为每个 Partial View 创建一个 MVVM 并应用绑定。

有什么方法可以跳过渲染 DIV（使用部分视图），直到按下相关选项卡？

这是我的常规视图代码：

```
<ul class="nav nav-tabs" id="myTab">
    <li class="active"><a href="#attributes">Attributes</a></li>
    <li><a href="#interestgroups">Interest groups</a></li>
    <li><a href="#categories">Categories</a></li>
</ul>
<div class="tab-content">
    <div id="attributes" class="tab-pane active">
        @Html.Partial("_AttributesPartial")
    </div>
    <div id="interestgroups" class="tab-pane">
        @Html.Partial("_InterestGroupsPartial")
    </div>
    <div id="categories" class="tab-pane">
        @Html.Partial("_InterestGroupCategoriesPartial")
    </div>
</div>

<script type="text/javascript">
    $(function () {
        $('#myTab a:first').tab('show');
    });

    $('#myTab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:35:53.910

需要注意的是只使用一个参数多次调用 ko.applyBindings。

例如，如果您在页面上有多个视图模型（我从您的问题中推断），那么您需要通过将容器元素作为第二个参数传入来确定它的范围。

根据您的评论，如果您想延迟加载内容，您只需监听“显示”事件即可。

（这是伪代码，您必须填写详细信息）

```
$('#attributes').on('shown', function (e) {
   initKOView(e.target);  // some logic to determine which viewModel to bind to.
})

function initKOView(target) {
   $(target).load('controller/_RenderPartial?path=' + target, function(data) {
      $(this).html(data);
      // Once the data comes back, apply your bindings and make sure to scope it.
      ko.applyBindings(viewModels[target], this);
   })
} 
```

正如这里所讨论的，目前还没有真正的方法来拆除整套绑定 - 所以您仍然希望确定您的视图模型的范围。

[https://github.com/SteveSanderson/knockout/issues/41#issuecomment-749171](https://github.com/SteveSanderson/knockout/issues/41#issuecomment-749171)

然后在您的控制器中，您需要添加一个`PartialViewResult`

```
public PartialViewResult _RenderPartial(string path)
{
    return PartialView(path);
} 
```

当然，您也可以为每个控制器设置一个单独的控制器操作，并跳过参数化加载。此外，您还希望将所有`@Html.Partial()`内容从您的主视图中删除。

# python - 在 python 中创建 .html 文件时权限被拒绝

> ID：12825860
> 
> 赞同：0
> 
> 时间：2012-10-10T18:23:04.943
> 
> 标签：python

所以这是我的第一次 python 体验。我在尝试转换为 html 页面的文件夹中有一个图像列表。为此，我有以下代码：

```
import inspect, os, errno, markup
path =  os.path.dirname(os.path.abspath(inspect.getfile(inspect.currentframe())))+'/www/img/'
print path

for f in os.listdir(path):
  counter = 1
  page = markup.page()
  page.init(charset="UTF-8")
  from markup import oneliner as e
  page.a(e.img(src='img/'+f, width=1024, height=768), href='')
  final = open('/index'+str(counter)+'.html','w')
  final.write(page) 
```

我收到一条`IOError: [Errno 13] Permission denied: '/index1.html'`消息....任何线索或想法都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:26:16.493

我认为主要问题与根文件夹（`/`）的文件权限有关。尝试以 root 身份运行脚本或选择您确定具有写入权限的其他目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T18:27:06.627

你的问题在这里：`open('/index'+str(counter)+'.html','w')`

以“/”开头的路径是绝对路径，无论您当前的目录是什么。它不是特定于 python 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:27:05.280

假设您使用的是 Unix/Linux（通过正斜杠），任何以 a 开头的路径`/`都是绝对路径。因此，您正在尝试将一个名为的文件写入`index.html`文件系统的根目录。只有 root 可以做到这一点。

如果您希望路径是相对的，请更改：

```
final = open('/index'+str(counter)+'.html','w') 
```

至：

```
final = open('index'+str(counter)+'.html','w') 
```

`/`注意前面的缺失`index`

# c# - System.Collections.Generic.SortedList 的同步版本？

> ID：12825861
> 
> 赞同：2
> 
> 时间：2012-10-10T18:23:08.953
> 
> 标签：c#, .net

我需要 a 的线程安全版本`SortedList<T,U>`，但与它的[通用形式](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)不同，[非通用形式](http://msdn.microsoft.com/en-us/library/ms132319.aspx)似乎没有[`Synchronized`](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.synchronized.aspx)功能。我可以使用不同的技巧来获得线程安全版本吗？还是我必须求助于`lock (SyncRoot)`手动使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T18:35:48.623

**简短的回答**：不，你必须求助`lock`。

即使在新的命名空间中`System.Collections.Concurrent`你有线程安全的集合，线程安全版本`SortedList<T, U>`也不存在。如果您需要 a`SortedList<T, U>`使用 a`lock`或 a `ReadWriterLockSlim`（如果适用）来保护每个调用，或者，为`SortedList<T, U>`（以相同的方式`Synchronized()`）创建一个线程安全的包装器。

**更长的答案**：不，您没有准备好任何东西，但是您可以一起使用`OrderablePartitioner<TSource>`（每次提取一个项目）和`ConcurrentBag<T>`. 坦率地说，我不知道这种策略是否有任何投资回报率，因为如果您不需要分区器，那么您只需增加不应该的复杂性。

# ruby-on-rails - Sidekiq——Email.delay.sendMail

> ID：12825863
> 
> 赞同：0
> 
> 时间：2012-10-10T18:23:13.663
> 
> 标签：ruby-on-rails, redis, actionmailer, sidekiq

所以，我有这个代码

```
class InvoiceNotifier < ActionMailer::Base
  include Sidekiq::Worker
  default from: 'from@email.com',
          return_path: 'any@email.com'

  def testEmail(recipient)
    @account = recipient

    mail(to: recipient).deliver
  end

end 
```

运行命令（从控制台）

```
InvoiceNotifier.sendMail('my@email.com') 
```

虽然有效

```
InvoiceNotifier.delay.sendMail('my@email.com') 
```

不起作用，它返回一个字符串。

我该如何调试？我查看了 redis，它有 3 个键，尽管它们似乎都没有任何值。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T19:41:01.987

perform 方法不是必需的。问题是我没有做

```
bundle exec sidekiq 
```

从命令行到实际有一个交互界面.. [http://railscasts.com/episodes/366-sidekiq?view=asciicast](http://railscasts.com/episodes/366-sidekiq?view=asciicast)是一个学习的好地方，因为我并没有真正看sidekiq 做他们的“入门指南”，虽然它在首页上执行此命令，但我在潜入时没有注意到它。

# wordpress - 更改 WordPress 的登录标签，“用户名”

> ID：12825865
> 
> 赞同：4
> 
> 时间：2012-10-10T18:23:18.483
> 
> 标签：wordpress, wordpress-theming

在默认的 WordPress 登录页面上，如何将标签“用户名”更改为其他内容？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-10T21:36:33.920

我认为这是对先前答案的更好选择。

```
function login_function() {
    add_filter( 'gettext', 'username_change', 20, 3 );
    function username_change( $translated_text, $text, $domain ) 
    {
        if ($text === 'Username') 
        {
            $translated_text = 'customLoginName';
        }
        return $translated_text;
    }
}
add_action( 'login_head', 'login_function' ); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2018-01-29T13:19:04.097

**简单而简短的解决方案**

```
add_filter(  'gettext',  'register_text'  );
function register_text( $translating ) {
    $translated = str_ireplace(  'Username or Email Address',  'Your Custom Text',  $translating );
    return $translated;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-17T17:16:13.187

它对我有用。使用此 functions.php 代码，您可以更改任何文本。

```
add_filter(  'gettext',  'register_text'  );
function register_text( $translating ) {
    $translated = str_ireplace(  'Username or Email Address',  'Your Custom Text',  $translating );
    return $translated;
} 
```

感谢@Mohammad Bilal

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-09T19:49:28.357

最近我遇到了同样的情况，虽然我需要把翻译的字符串来改变这个登录标签，我以前尝试使用 jQuery 但没有奏效，所以我使用 javascript 如下：

```
function login_script_function() {
?>
<script type="text/javascript">

window.addEventListener('DOMContentLoaded', (event) => {
    console.log('DOM fully loaded and parsed'); // to test DOM ready
    var label_user_login = document.getElementsByTagName('label')[0];
    var label_user_pass = document.getElementsByTagName('label')[1];
    label_user_login.innerText = "<?php _e('User Name', 'text-domain'); ?>";
    label_user_pass.innerText = "<?php _e('Password', 'text-domain'); ?>";
});
</script>
<?php
}
add_action( 'login_head', 'login_script_function' ); 
```

我将它与自定义插件一起使用，并使用例如[Poedit](https://poedit.net/)或[Loco Translate添加字符串翻译](https://wordpress.org/plugins/loco-translate/)

# svn - 有没有办法在 Subversion 1.4 中伪造合并跟踪？

> ID：12825872
> 
> 赞同：0
> 
> 时间：2012-10-10T18:23:42.743
> 
> 标签：svn, branching-and-merging

我正在与仍在运行 1.4 版的第 3 方 Subversion 存储库进行交互，让它们升级的可能性几乎为零。所以，当然，我在这个存储库中的工作是我做过的一些最繁重的合并工作，而且我没有任何合并信息可以使用。

任何人都可以推荐一个好的工作流程来跟踪 1.4 存储库中的分支和合并吗？带有提交消息和/或属性的东西？还有什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T09:07:58.360

David 是对的，Subversion 没有在 1.4 中内置任何合并跟踪支持。但是，有一个[svnmerge](http://www.orcaware.com/svn/wiki/Svnmerge.py)脚本，当前的 Subversion 合并跟踪功能是根据该脚本建模的。一些项目，如 Python，成功地使用它来维护长期和短期分支。

根据项目的不同，使用[bzr-svn](http://doc.bazaar.canonical.com/migration/en/foreign/bzr-on-svn-projects.html)、[git-svn](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html)或[hg-subversion](https://bitbucket.org/durin42/hgsubversion/overview)可能会让你更接近你正在寻找的东西。IMO，bzr-svn 工作得相当好，并且支持真正的分支合并（另一个要求您使用 rebase 工作流程）。我已经在几个项目中成功使用了它，但有一些警告。例如，如果您的项目使用外部工具，那么使用这些工具中的任何一个的故事就没有那么吸引人了，因为它们都不支持外部工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:37:32.647

Subversion 1.4 没有原生的合并跟踪。由于 Subversion 有一个本地 API，一些第三方客户端很可能有一个内置的合并跟踪器。

在 1.5 之前，您应该通过添加合并信息作为提交消息的一部分来跟踪合并。您还试图避免从项目的根目录之外的任何地方进行挑选和合并。否则，事情很快就会变得相当复杂。

我会使用标签来标记我的合并点。例如，我会有一个标记`5.1->trunk`，标记我从 5.1 分支到主干的最后一个合并点。寻找标签而不是通过 SVN 日志寻找合并评论要容易得多。

我想您也可以使用该`svn:merge-info`属性，因为它没有在您的 Subversion 版本中使用。如果您将其格式化为标准 svn:mergeinfo 属性格式，可能会很有帮助。也许有一天，它们会升级，而您的“svn:mergeinfo”属性可能会对您有所帮助。

再说一次，这可能是你不应该使用 svn:mergeinfo 属性的完美理由。弄乱它的格式，他们升级的 1.5 后版本的 Subversion 也会抛出 conniptions。你最好使用类似的东西，`local:mergeinfo`直到你的服务器升级（如果它曾经升级过）。

# java - 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：10

> ID：12825875
> 
> 赞同：-2
> 
> 时间：2012-10-10T18:23:59.080
> 
> 标签：java

当我尝试使用此方法时，我收到标题中的消息，但我找不到原因。谁能帮助我？

谢谢！

```
void companyInfo() {
    int tel = 0;
    System.out.print("Name of company: ");
    String tmpCompany = sc.next();
    for (int i = 0; i < tel; i++){
        if (tmpCompany.equals(null)){
        }
    }
    for (int i = 0; i < 10; i++) {
        int count = 0;
        for (int j = 0; j < field.length; j++){
            for (int k = 0; k < field[k].length; k++){
                if (tmpCompany != (null) && field[i][j] != 0 && tmpCompany.equals(felt[i][j])){
                    count++;
                }
            }
        }
        if (tmpCompany != null && count > 0) {
            System.out.print("The company " + tmpCompany + " owns " + count + " field(s).");
        }
    }
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:25:45.817

我不完全确定，你的数组中有什么，因为我看到这样的一行：

```
for (int k = 0; k < field[k].length; k++) 
```

字段[k]。但是您会收到错误，因为您尝试在长度小于 10 的数组中查找索引 10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:27:18.907

在你的`if`情况下，不应该`field[j][k]`如下：

```
 if (tmpCompany != (null) && field[j][k] != 0 && tmpCompany.equals(field[j][k])){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T18:26:26.907

这个：

```
for (int k = 0; k < field[k].length; k++) 
```

几乎可以肯定是：

```
for (int k = 0; k < field[j].length; k++) 
```

尽管您*随后*`field[i][j]`在循环体内使用，但这似乎不太可能是您想要的。我注意到您根本没有`k`在循环中使用。当你只有一个二维数组¹时，你为什么认为你需要三层循环还不清楚。

基本上，你应该重新审视你的循环边界和*每一次*访问`field`，从它的外观来看。

* * *

¹是的，我知道它实际上只是一个数组数组。关键是它不是数组数组的数组。

# ruby-on-rails - Rails 3.2提交has_many：通过表单触发验证

> ID：12825877
> 
> 赞同：0
> 
> 时间：2012-10-10T18:24:05.617
> 
> 标签：ruby-on-rails, validation, ruby-on-rails-3.2

奇怪的错误，我以前从未遇到过。如果我提交多对多表单，它会触发对 has_many :through 关系中的模型之一的验证。当我取出验证时，表单提交正常。为什么验证会阻止 has_many :through 表单提交？这是信息

```
class Client
  has_many :client_routes
  has_many :routes, :through => :client_routes
  #plus many validations below
end

class Route
  has_many :client_routes
  has_many :clients, :through => :client_routes
end

class ClientRoute
  belongs_to :client
  belongs_to :route 
```

在我创建路线的表单中，我有一个 ul div，用于拖放，并带有以下隐藏字段。这些隐藏的字段通过一组客户端循环。

```
<%= hidden_field_tag("route[client_ids][]", c.id) %> 
```

我在 Client 类中有几个验证规则。当我注释掉所有表单时，表单正确提交。我已经一一添加了验证，以尝试查看是哪一个出错了，但是所有验证似乎都给了我这个问题。

验证错误如下

```
1 error prohibited this route from being saved:
There were problems with the following fields
Clients is invalid 
```

以下是部分只是用于拖放的空 ul 的形式：

```
<%= form_for Route.new, :remote => true do |f| %>

  <p>
    <%= f.label :name %>    <br/>
    <%= f.text_field :name %>
  </p>
  <p>
    <%= f.label :mileage %> <br/>
    <%= f.text_field :mileage %>
  </p>
  <p>
    <%= f.label :rate %>         <br/>
    <%= f.text_field :rate %>
  </p>
  <p>
    <%= f.submit %>
  </p>
  <div class="assign_clients">
    <%= render :partial => "client_routes" %>
  </div>

<% end %> 
```

这是控制器的创建动作

```
def create
  @route = Route.new(params[:route])
  if @route.save
    respond_with @route, :location => routes_url
  else
    flash[:notice]= "Not saved due to your incompetence"
  end
end 
```

另一个可行的测试是我添加了以下跳过验证的内容，但是这个结果现在跳过了我对 Route 模型的验证。

```
if @route.save(:validation => false) 
```

# c++ - 一个愚蠢的 rand() Not Found 错误

> ID：12825892
> 
> 赞同：1
> 
> 时间：2012-10-10T18:24:44.460
> 
> 标签：c++, random

我正在开发一个小程序来在 C++ 中实现某种算法。我决定为这个任务定义一个小对象，它有一些生成器和排序功能。但是，在 randomGenerator() 函数中，它给出了“错误 C3861: 'rand': identifier not found”。即使我包含 ctime lib，它也不会消失，我认为没有理由得到这个错误......

这是代码：

排序库

```
#ifndef SORTLIB_H
#define SORTLIB_H

#include<ctime>

class SortLib
{
public:

    void randomGenerator( int* userArray, int upperLimit);
    void orderedGenerator( int* userArray, int upperLimit );
    void reverseOrderedGenerator( int* userArray, int upperLimit );

    void insertionSort( int* userArray, int upperLimit );
    void selectionSortSort( int* userArray, int upperLimit );
    void bubbleSort( int* userArray, int upperLimit );
    void mergeSort( int* userArray, int upperLimit );

};

#endif 
```

排序库.cpp

```
#include "SortLib.h"

void SortLib::randomGenerator( int* userArray, int upperLimit)
{

    for(int i=0; i<upperLimit; i++ )
    {
        userArray[i] = ( rand() % upperLimit );
    }
} 
```

你知道发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:26:20.520

在代码的开头执行此操作。

```
#include <cstdlib> 
```

Rand 函数包含在 C 标准通用实用程序库中。

# c++ - 存储点的四叉树移动

> ID：12825893
> 
> 赞同：3
> 
> 时间：2012-10-10T18:24:45.667
> 
> 标签：c++, data-structures, quadtree

我使用四叉树作为数据结构来存储点。因为我需要快速找到某个区域的所有点。

但是我需要移动这些点。在我的 C++ 程序中。由于移动发生在所有点上，但对于不同方向的每个点，我目前破坏了我的四叉树并重建它，这会导致大量分配和删除。

因此，我的问题是这种问题是否有更好的数据结构？

我有以下要求：我有 n 点。

我需要快速获取给定特定区域的所有点。对于我的四叉树，这大约是 O(log(n))。然而，这个操作被称为 m 次，其中 m > n，因此它大约为 O(m*log(n))。

我需要移动所有点。目前，这大约运行 O(n*logn)。此方法只对所有 m 调用一次。

但是，我目前发现此解决方案不能令人满意。因为我总是破坏我的四叉树并重建它，这会由于分配而导致开销。

**更新：** 积分分布不均匀。有密集的位置，也有点少的位置。

这是一些简化的代码。这里存储的指针代码：

```
class Point
{
    public:
    Point(double x, double y):x(x),y(y){};

    void movePoint(double ux, double uy);

    double x;
    double y;
}; 
```

这是四叉树的界面

```
class QuadTree
{
public:
    QuadTree(double north, double west, double south, double east,
             int maxItems);

    //inserts a point into the tree runs in log(n)
    bool put(Point* pt);
    // returns all point in the rectange defined by the four variables runs in log(n)
    std::vector<Point*> get(double north, double west, double south, double east);
    // deletes everything in the quad tree
    void clear();

private:

    QuadTreeNode* top_=nullptr;

}; 
```

这里是 QuadTreeNode 的接口与 get 和 put 方法实现，以显示如何存储点。

```
class QuadTreeNode
{
public:

    QuadTreeNode(double north, double west, double south, double east,
                 int maximumItems);

    ~QuadTreeNode();

    //split the node if to much items are stored.
    void split();
    //returns the children of the node
    QuadTreeNode* getChild(double x, double y);

    bool put(Point* leaf){
      if (children_ == nullptr) {
        items_.push_back(leaf);

        if (items_.size() > maxItems_)
            split();
        return true;
      } else {
        QuadTreeNode* node = getChild(leaf->getX(), leaf->getY());
        if (node != nullptr) {
            return node->put(leaf);
        }
       }
      return false;
    }

    std::vector<Point*> QuadTreeNode::get(QuadRectangle rect, std::vector<Point*>& vector) {
      if (children_ == nullptr) {
        for (Point* pt : items_) {
            if (rect.pointWithinBounds(pt->getX(),pt->getY())) {
                vector.push_back(pt);
            }
        }
      } else {
        for (QuadTreeNode* child : *children_) {
            if (child->bounds_.within(rect)) {
                child->get(rect, vector);
            }
        }
      }
      return vector;
}

    std::vector<Point*> items_;

    unsigned int maxItems_;

    std::array<QuadTreeNode*,4>* children_ = nullptr;

    QuadRectangle bounds_;    
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T20:09:11.657

想到的一些想法：

1.  对于每个移动的点，检查它是否移出边界矩形 ( `bounds_`)。如果是，请将其从树中移除。移动所有点后，要么将它们插入同一棵树，要么插入另一棵树。每隔一段时间（例如，当另一棵树的大小变为主树的 1/10 时），重建所有内容。
2.  拆分节点时，您可能会为每个子音符中的点计算一个边界矩形。执行此操作时，请在边界内留出一些余量，因此可以将每个点移动几次迭代而不会超出边界。

这些想法无助于复杂性（它仍然是 O(n*log(n)），但可能会通过某些因素提高速度。

# jqgrid - 空白编辑网格

> ID：12825894
> 
> 赞同：1
> 
> 时间：2012-10-10T18:24:51.480
> 
> 标签：jqgrid

我有 jqgrid 的问题。单击“添加行”后，我只有带有“保存”和“取消”按钮的空白表单。这是我的代码：

```
<script type="text/javascript">
var grid = $("#list");
$(function () { 
    var grid = $("#list");
    grid.jqGrid({
        url: 'grid.php',
        datatype: 'xml',
        mtype: 'GET',
        colNames:['ID sprzetu', 'Kod sprzetu', 'Wlasciciel', 'Konfiguracja'],
        colModel :[ 
            {name:'SprzetID', index:'SprzetID', width:90}, 
            {name:'Kod', index:'Kod', width:120}, 
            {name:'Wlasciciel', index:'Wlasciciel', width:200, align:'left'}, 
            {name:'Konfiguracja', index:'Konfiguracja', width:400, align:'left'}, 
        ],
        pager: '#pager',
        rowNum: 10,
        rowList: [10, 20, 30],
        sortname: 'SprzetID',
        sortorder: 'asc',
        viewrecords: true,
        gridview: true,
        caption: 'Lista sprzetu'
    });
    grid.jqGrid('navGrid', '#pager');
}); 
</script> 
```

结果是： ![结果](../Images/a4918ff2f2c5c58d1e19a1676e07d39e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T18:44:49.020

[editGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#editgridrow)显示网格中的所有*可编辑*列。`editable: true`您应该在添加或编辑表单中希望看到的某些列中插入属性。

# python-3.x - Pylint 在 Eclipse 上没有显示任何内容

> ID：12825900
> 
> 赞同：1
> 
> 时间：2012-10-10T18:25:13.640
> 
> 标签：python-3.x, pydev, pylint

我已经安装了最新的 pylint，它在 Windows 命令行中运行良好。我添加了 Pydev-PYTHONPATH 和我想要 lint 的源目录。同样从 PyDev->PyLint 我选择了“使用 pylint”并使用正确的 lint.py 更新了“pylint 的位置（lint.py）：”。我在控制台或问题视图上都没有看到任何 lint 输出。我的 Eclipse 是 3.7.2 版。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T08:24:59.653

pylint 0.26 (http://www.logilab.org/ticket/104572) 中的消息格式有一些变化，可能需要正确处理 pydev 更新。您应该联系 Pydev 作者并为此请求支持。

如果您可以轻松地在 pydev 中为 pylint 配置命令行，请尝试添加`--include_ids=y`并查看是否有帮助。

# chirpy - 如何在 Chirpy 中指定最小文件名后缀？

> ID：12825902
> 
> 赞同：0
> 
> 时间：2012-10-10T18:25:17.867
> 
> 标签：chirpy

我在我的项目中使用 Chirpy 来缩小 js 文件。现在以 .min.js 作为后缀创建缩小文件名。例如，如果文件名为 script.js，那么当 Minify 设置为 true 时，Chirpy 会将其生成为 script.min.js。

有没有办法告诉 Chirpy 在生成缩小文件时不要在文件名中添加“.min”后缀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T13:50:27.823

[2.04 版](http://chirpy.codeplex.com/releases/view/79914)没有在文件名中添加“min”。

# django - Django 查询集中的计数和 OR 子句

> ID：12825913
> 
> 赞同：1
> 
> 时间：2012-10-10T18:25:54.333
> 
> 标签：django, django-queryset

我有一个非常简单的查询，它没有按预期运行。

```
# Retrieve news                                                               
news = News.objects.filter(available=True)                                    
if area:                                                                      
    news = news.annotate(Count('areas')).filter(Q(areas__count=0)
                                                |Q(areas=area)) 
```

我希望有没有受影响区域或指定区域的新闻。但我一个都没有。

当我打印查询时，我得到：

```
SELECT "chimere_news"."id", "chimere_news"."title", 
       "chimere_news"."available","chimere_news"."date", "chimere_news"."content",
       COUNT("chimere_news_areas"."area_id") AS "areas__count"
FROM "chimere_news"
LEFT OUTER JOIN "chimere_news_areas" ON ("chimere_news"."id" = "chimere_news_areas"."news_id")
LEFT OUTER JOIN "chimere_news_areas" T4 ON ("chimere_news"."id" = T4."news_id")
WHERE ("chimere_news"."available" = True  AND (T4."area_id" = 1 ))
GROUP BY "chimere_news"."id", "chimere_news"."title", "chimere_news"."available", 
"chimere_news"."date", "chimere_news"."content"
HAVING COUNT("chimere_news_areas"."area_id") = 0 
```

我做错了什么还是 Django 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T22:45:21.250

如果您只需要将计数与零进行比较，请尝试`isnull`改用。

```
if area:                                                                      
    news = news.filter(Q(areas__isnull=True)|Q(areas=area)) 
```

# ruby-on-rails-3 - rails 3中的空白页没有错误

> ID：12825918
> 
> 赞同：1
> 
> 时间：2012-10-10T18:25:59.927
> 
> 标签：ruby-on-rails-3, rspec

我遇到了一个问题，即我的开发机器上总是出现空白页面，即使服务器看起来可以正常提供页面。

我会重新加载页面和同样的事情——我去的任何页面都只是一个空白页面。我四处搜索，人们从 2010 年开始有了一些解决方案，这些解决方案指出了过时的会话并删除了这些会话文件，但这并没有为我解决问题。

最后，在对我的旧代码进行了多次 git 侦查之后，我发现我的 gemfile 中的这一行是罪魁祸首。

```
group :development, :test do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
  gem 'rspec_multi_matchers'
end 
```

变成

```
group :development, :test do
  gem 'rspec-rails'
  gem 'factory_girl_rails'
end 
```

我删除了 rspec_multi_matchers，进行了捆绑安装，一切都恢复了。我不知道为什么这会导致这个问题。很想知道是否有人知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:01:46.123

你有`do..end`你的测试吗？

他们的页面上有一条警告说

> 注意使用括号'{ ... }'而不是'do ... end'这是必要的，因为'do .. end'绑定不够强

# jenkins - 如果管道中正在等待新构建，如何强制 Jenkins 跳过下游作业？

> ID：12825919
> 
> 赞同：12
> 
> 时间：2012-10-10T18:25:59.140
> 
> 标签：jenkins

我在 Jenkins 中的构建管道分为三个工作：

1.  构建代码
2.  将代码部署到环境
3.  运行自动化功能测试

我已对其进行设置，以便可以发生并发构建，并且如果#2 或#3 当前正在为另一个构建运行，则构建管道将阻止构建进入#2。

我想要做的是设置Jenkins在有多个构建等待并且#2和#3完成时处理，只有最新的构建进入#2和#3。

有没有办法做到这一点？如果你有《持续交付》这本书，我想做的就是实现第 1 页的内容。第 118 页 119

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-11T11:53:29.453

应该尝试其中一种，在**Advanced Project Options**下：

*   **在构建上游项目时阻止构建**
    （应确保它不会导致第 2 步和第 3 步卡在队列中）

*   **在构建下游项目时阻止构建**
    （我知道这听起来与您的要求相反，
    但实际结果是您将更改累积到单个构建周期，
    防止额外运行）

如果这导致不需要的构建堆积，
请查看以下链接，这些链接应该可以帮助您
清空队列或终止正在运行的作业：

*   [**停止 Jenkins 工作，以防万一开始新的工作**](https://stackoverflow.com/questions/10280846/stopping-jenkins-job-in-case-newer-one-is-started)（通过[malenkiy_scot](https://stackoverflow.com/users/1178189/malenkiy-scot)）

*   [**清除构建队列插件**](https://wiki.jenkins-ci.org/display/JENKINS/Purge+Build+Queue+Plugin)

*   [**信号杀手**](https://wiki.jenkins-ci.org/display/JENKINS/Signal+killer)

*   [**杀死所有的建筑**](http://scriptlerweb.appspot.com/script/show/59001)（由[*Kohsuke Kawaguchi*](http://kohsuke.org/)提供）

    ```
    import hudson.model.*;

    Hudson.instance.computers.each { c ->
      c.executors.each { e ->
         e.interrupt();
      } 
    } 
    ```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T20:38:11.223

“阻止上游”或“阻止下游”的问题是你总是阻止一些可能正在工作的东西。

如果你使用“git”，你可以按照这些思路做一些事情——这恰好是我正在做的事情......

我使用了一个跟踪分支，它指向任何步骤的最近完成的构建作业，命名如下`<branch>-latest-<step>`：因此，如果您基于 master 运行“构建”步骤，您将获得`master-latest-build`. 将此分支移至构建脚本的末尾非常容易，只需运行：`git branch -f <name> HEAD`，然后推送。

然后我让下游作业从该跟踪分支触发。这样，所有作业都是松散耦合的，并且无论上游作业产生什么，都会做正确的事情，而与上游作业当前正在做什么无关。

如果除此之外，您还标记了您的构建，您的下游作业可以检索该标签并将其重新用作构建名称，以便您轻松关联各种运行。

如果管道的步骤长度相差很大，这将非常有效 - 特别是当您的下游步骤比上游步骤花费的时间长得多时，这在我的世界中是常态，因为下游测试包括一整套性能和集成测试。 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T01:59:16.407

Workflow 插件可让您将整个管道编写为一个脚本。在这种情况下，该`stage`步骤可用于控制访问：

```
stage 'build'
// any number of builds get here
stage name: 'deployAndTest', concurrency: 1
// only the last to build successfully enters here 
```

（出于可视化目的，[JENKINS-29892](https://issues.jenkins-ci.org/browse/JENKINS-29892)`deploy`可以让您在和`test`阶段之间标记边界。）

# javascript - 使用 jQuery 使内容动态化

> ID：12825922
> 
> 赞同：0
> 
> 时间：2012-10-10T18:26:19.273
> 
> 标签：javascript, jquery, html, css

我有一个网络应用程序，我希望允许用户通过简单地单击照片来创建相册，然后 jquery 将它们附加到另一个 div 以表示它们被选中。我的问题是当照片位于选定的 div（蓝色 div）中时，如何将照片重新调整为 50px x 50px。我正在使用 jquery masonry，所以我不能让照片只是一个普通的图像。下半部分的图像（用户从中选择的图像）需要位于名为“#brick”的父容器中。我很茫然，我该怎么办？

这是我的问题：

[http://jsfiddle.net/EPWSL/5/](http://jsfiddle.net/EPWSL/5/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:32:12.830

```
$('.photo').click(function(){

  var html = '<img class="selected-photo" src="' + $(this).find('img').attr('src') + '" />';
  $(html).appendTo('#photos');

});​ 
```

顺便说一句，不要有多个具有相同 id 属性的元素。

# c# - 给定一个 MatrixTransform 我如何确定它的当前角度？

> ID：12825924
> 
> 赞同：1
> 
> 时间：2012-10-10T18:26:37.230
> 
> 标签：c#, wpf, transform

我正在使用 WPF 的 MatrixTransform 来管理我在 Canvas（全 2D）上的平移、缩放和旋转。它运作良好。但是，我希望能够计算当前的旋转角度。这是怎么做到的？我需要反转矩阵然后用它来旋转一些东西吗？如有必要，我可以提供“旋转”点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:40:37.063

假设：

1.  该矩阵绝对是平移/旋转/缩放矩阵（无偏斜或其他非正交性）。
2.  该矩阵被指定为首先应用缩放，然后是旋转，然后是平移。

脚步：

1.  您可以忽略最终的平移组件，为您提供包含缩放和旋转的左上角 3x3 矩阵。

2.  缩放只是乘以缩放因子的对角矩阵（缩放矩阵中的每一列），因此您可以对列向量进行归一化，从而为您提供一个纯粹表达旋转的正交矩阵。

3.  要获得旋转角度，您需要选择旋转轴或要旋转的矢量（您可以从中计算旋转轴和角度。）

后一种情况更容易：

1.  取一个大小为 1 的样本向量 v（简化数学。）
2.  通过旋转矩阵变换得到v'。
3.  对于旋转轴 (vx v')，它们之间的角度定义为 acos(v * v')。'x' 是叉积，'*' 是点积。

# google-app-engine - 使用 Objectify 保存实体时出错

> ID：12825930
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:10.037
> 
> 标签：google-app-engine, objectify

这是我尝试持久化实体时的错误：

```
com.googlecode.objectify.SaveException: Error saving com.mycomp.simplify.KeyValueVersion@60991f: You cannot create a Key for an object with a null @Id. Object was com.mycomp.simplify.Key@1bf3d87
    at com.googlecode.objectify.impl.Transmog.save(Transmog.java:102)
    at com.googlecode.objectify.impl.Concret

> Blockquote

eEntityMetadata.save(ConcreteEntityMetadata.java:150)
    at com.googlecode.objectify.impl.engine.WriteEngine.save(WriteEngine.java:68)
    at com.googlecode.objectify.impl.cmd.SaverImpl.entities(SaverImpl.java:56)
    at com.googlecode.objectify.impl.cmd.SaverImpl.entity(SaverImpl.java:33)
    at com.mycomp.simplify.core.ObjectifyGenericDao.put(ObjectifyGenericDao.java:52)
    at com.mycomp.simplify.SimplifyImpl.access$0(SimplifyImpl.java:1)
    at com.mycomp.simplify.SimplifyImpl$1.run(SimplifyImpl.java:43)
    at com.mycomp.simplify.SimplifyImpl$1.run(SimplifyImpl.java:1)
    at com.googlecode.objectify.impl.cmd.ObjectifyImpl.transactOnce(ObjectifyImpl.java:255)
    at com.googlecode.objectify.impl.cmd.ObjectifyImpl.transactNew(ObjectifyImpl.java:232)
    at com.googlecode.objectify.impl.cmd.ObjectifyImpl.transactNew(ObjectifyImpl.java:222)
    at com.googlecode.objectify.impl.cmd.ObjectifyImpl.transact(ObjectifyImpl.java:214)
    at com.googlecode.objectify.util.cmd.ObjectifyWrapper.transact(ObjectifyWrapper.java:165)
    at com.mycomp.simplify.SimplifyImpl.put(SimplifyImpl.java:37)
    at com.mycomp.simplify.ResourceTest.testCreateFetch(ResourceTest.java:36)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.IllegalArgumentException: You cannot create a Key for an object with a null @Id. Object was com.mycomp.simplify.Key@1bf3d87
    at com.googlecode.objectify.impl.translate.EntityClassTranslator.getRawKey(EntityClassTranslator.java:160)
    at com.googlecode.objectify.ObjectifyFactory.getRawKey(ObjectifyFactory.java:270)
    at com.googlecode.objectify.impl.translate.EntityReferenceTranslatorFactory$1.saveValue(EntityReferenceTranslatorFactory.java:39)
    at com.googlecode.objectify.impl.translate.EntityReferenceTranslatorFactory$1.saveValue(EntityReferenceTranslatorFactory.java:1)
    at com.googlecode.objectify.impl.translate.ValueTranslator.savePropertyValue(ValueTranslator.java:51)
    at com.googlecode.objectify.impl.translate.PropertyValueNodeTranslator.saveAbstract(PropertyValueNodeTranslator.java:38)
    at com.googlecode.objectify.impl.translate.AbstractTranslator.save(AbstractTranslator.java:38)
    at com.googlecode.objectify.impl.TranslatableProperty.executeSave(TranslatableProperty.java:145)
    at com.googlecode.objectify.impl.translate.ClassTranslator.saveMap(ClassTranslator.java:94)
    at com.googlecode.objectify.impl.translate.MapNodeTranslator.saveAbstract(MapNodeTranslator.java:38)
    at com.googlecode.objectify.impl.translate.AbstractTranslator.save(AbstractTranslator.java:38)
    at com.googlecode.objectify.impl.Transmog.saveToNode(Transmog.java:109)
    at com.googlecode.objectify.impl.Transmog.save(Transmog.java:96)
    ... 39 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T19:36:06.793

您的实体类中有一个没有 id 的实体引用。也就是说，像这样：

```
@Entity
class MyEntity {
    @Id Long id;
    OtherEntity other;   // this thing has a null id
} 
```

Objectify 无法为 OtherEntity 保存密钥，因为它无法创建密钥。

这是在 Objectify 的下一个版本中删除这种放置直接实体引用的能力的一个（几个）原因。您需要将代码更改为：

```
@Entity
class MyEntity {
    @Id Long id;
    Ref<OtherEntity> other;
    public OtherEntity getOther() { return other.get(); }
    public void setOther(OtherEntity value) { this.other = Ref.create(value); }
} 
```

这种模式消除了混淆，因为当您尝试创建无效的 Ref 时，您会立即得到一个明确的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:27:58.823

对于要使用 Objectify 持久化的每个实体，您应该拥有一个带有 @Id 注释的 Long、long 或 String 类型的属性。这用作实体的密钥。有关详细信息，请查看[Objectify 用户指南](https://code.google.com/p/objectify-appengine/wiki/Entities)

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T02:32:24.963

我只是有这个确切的例外并解决了它。

如果您未能使用 now() 方法同步自动生成一个 Long Id，然后尝试使用该 Id，您可以获得确切的堆栈跟踪输出。

**坏的**

```
ofy().save().entity(myEntity);
Ref.create(myEntity); 
```

**好的**

```
ofy().save().entity(myEntity).now();
Ref.create(myEntity); 
```

您可能遇到该异常的原因有多种。忘记设置 @Id 注释不是其中之一。

# tomcat - 通过 ipaddress 而不是 localhost 访问 tomcat 的问题

> ID：12825931
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:10.470
> 
> 标签：tomcat, webserver

我的问题很奇怪。。

我在 apache 中部署了我的项目，如果通过本地主机（http://localhost:8080/MyProject）访问，一切都很好。如果通过 ip 地址访问（即 172.xxx:8080/MyProject）.. 页面正在加载，但我可以看到页面上的扭曲和一些小部件丢失.. 每次都有来自服务器的大数据（大约 1MB）（我没有怀疑这是问题，因为解析json没有错误）..

如果防火墙问题，那么它根本不应该是可访问的，但它是可访问的，但是我说有一些问题。

可能是什么错误？任何想法..请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:27:06.063

听起来您在 HTML 中引用 CSS 文件的方式有问题。尝试在扭曲的页面上使用浏览器“查看源代码”，并查看对 CSS 文件的引用是否使用带有 IP 地址的正确路径。

# c# - 将网格返回到原始列和行位置

> ID：12825932
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:13.913
> 
> 标签：c#, wpf, binding

我有一个带有几个“子网格”的主网格（10 列/ 10 行）。这些“子网格”的列/行位置是使用绑定设置的，并且会随着记录的变化而变化。示例：subGrid_1 位于主网格的第 5 列/第 5 行。使用 MouseEnter 事件，subGrid_1 移动到主网格的第 1 列/第 1 行，代码如下：

```
Grid.SetColumn(subGrid_1,1);
Grid.SetRow(subGrid_1,1); 
```

我遇到的问题是找到一种方法让 subGrid_1 在 MouseLeave 事件期间返回到原始第 5 列/第 5 行位置。

附加信息：有一个专门用于捕获 MouseEnter\Leave 事件的“控制”网格。这个网格是独立的，不受鼠标事件的影响。当 MouseEnter 触发时，它正确地将子网格移动到 col 1\row 1，其他代码隐藏了剩余的子网格。当 MouseLeave 触发时，一切都恢复正常（可见性），除了子网格停留在 col 1\row 1 而不是返回到它的原始位置。原始子网格位置保存在 xml 文档中，并更改记录以记录。我注意到一件事——一旦子网格被移动，即使记录发生变化，它也是永久的。

# drupal - 推广到首页时的 Drupal SEO 友好 URL

> ID：12825939
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:25.520
> 
> 标签：drupal

当我在 Drupal 中将页面提升到首页时，首页上显示“阅读更多”的链接指向`node/11`.

我启用了 Pathauto，并且该文章的发布设置下的复选框已选中“生成自动 URL 别名”

我希望“阅读更多”按钮指向友好的 URL。

如果我手动导航到它有效的友好 URL，则只有主页上的链接链接到“node/11”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:56:49.407

这听起来很像您的主题或模块正在覆盖这些链接。当 Drupal 动态生成链接时（与核心或大多数贡献的主题/模块一样），它会自动使用路径别名。

另一个需要注意的地方是，如果您正在为主页使用自定义视图（使用视图模块）（而不是由节点模块呈现的 Drupal 的默认视图），您可能已将视图配置为以某种方式输出链接它也不会被重写。

我建议切换到 Garland 或 Bartik 主题（取决于您的版本），看看它们是如何输出的。如果他们仍然没有使用别名，那么一个模块正在覆盖它们（没有核心模块会这样做，几乎所有的 contrib 模块也不会这样做，所以它可能是一个自定义模块或视图）。

# c++ - 如何修复错误 LNK2001 和 LNK2019

> ID：12825941
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:39.653
> 
> 标签：c++, boost

> ProjectAAA.obj：错误 LNK2001：未解析的外部符号“public：__thiscall X::ClassEvent::ClassEvent(unsigned int)”(??0ClassEvent@X@@QAE@I@Z)

```
boost::shared_ptr<ClassEvent> bcfEvent(new ClassEvent((unsigned int) 10)); 
```

我已经定义`ClassEvent::ClassEvent(unsigned int)`并且不知道如何修复此 LINK 错误。

任何建议表示赞赏。

谢谢

更多信息：

1>ProjectAAA.obj：错误LNK2019：函数中引用的未解析外部符号“public：__thiscall APP::X::ClassEvent::ClassEvent(unsigned int)”(??0ClassEvent@X@APP@@QAE@I@Z) “私有：类 std::vector，类 std::allocator > > __thiscall APP::X::ProjectAAA::GenerateEvents(类 std::map > > const &)” (?GenerateEvents@ProjectAAA@X@APP@@ AAE?AV?$vector@V?$shared_ptr@VClassEvent@X@APP@@@boost@@V?$allocator@V?$shared_ptr@VClassEvent@X@APP@@@boost@@@std@@@std @@ABV?$map@VDate@APP@@IUEventAttributesMapCompare@ProjectAAA@X@2@V?$allocator@U?$pair@$$CBVDate@APP@@I@std@@@std@@@5@@ Z)

**现在我已经完全隔离了错误：**

1>ProjectAAA.obj：错误LNK2019：函数中引用的未解析外部符号“public：__thiscall APP::X::ClassEvent::ClassEvent(unsigned int)”(??0ClassEvent@X@APP@@QAE@I@Z) “私有：void __thiscall APP::X::ProjectAAA::TestGenerateEvents(void)”(?TestGenerateEvents@ProjectAAA@X@APP@@AAEXXZ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:29:24.697

您的问题是您的解决方案中有两个`ClassEvent.cpp`文件。当 VC++ 编译您的解决方案时，它会将所有 obj 文件输出到一个目录中，从而生成两个 ClassEvent.obj 文件。以后编译的任何 cpp 都会覆盖前者。这会导致第一个符号中的符号丢失并且对链接器不可见。

您可以通过打开其中一个文件的属性，选择 C/C++ -> 输出文件 -> 对象文件名并将其更改为某个非冲突值（例如`ClassEvent2.obj`）来解决此问题。

我相信这是 Visual Studio 中的一个错误，但它在最近 4 个版本中没有得到解决，因此很可能会继续存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-10T19:42:19.210

经过多次测试，我找到了解决方案。

团队中有人将 ClassEvent.CPP 排除在项目之外！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-15T18:45:47.810

In my case all begun working correctly after I changed the build architecture from **x64** to **x86** bit. Two days ago I had the same problem. This was caused by deploying my program to another computer. For some reason, which I don't know, the architecture settings have changed from x86 (as I write) to x64\. PS. I used Visual Studio 2015;

# asp.net - 哪个更快（在浏览器渲染中）：.aspx 脚本的 Include() 或 Server.Execute()？

> ID：12825944
> 
> 赞同：0
> 
> 时间：2012-10-10T18:27:50.730
> 
> 标签：asp.net, performance

我有一个小的 cookie 离开 aspx 脚本。

我想知道这样做是否更快

或 Server.Execute （相同的脚本）

还是没关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:36:19.937

`Server.Execute`应该导致服务器缓存脚本字节码一次，这意味着，理论上，与简单地扩展运行脚本相比，您应该实现净性能提升`include`。

# sql - Rails - 删除所有符合条件的记录

> ID：12825945
> 
> 赞同：50
> 
> 时间：2012-10-10T18:27:59.300
> 
> 标签：sql, ruby-on-rails, activerecord

您如何以 Rails 方式编写代码？我有一个模型 - 经理。我想删除满足 manager_level 为 5 条件的 Managers 中的所有记录。

谢谢你。

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-10-10T18:33:19.590

我认为最好使用destroy而不是delete

> 因为destroy会从db中删除当前对象记录以及从db中关联的子记录（[https://stackoverflow.com/a/22757656/5452072](https://stackoverflow.com/a/22757656/5452072)）

delete 也会跳过回调，但 destroy 不会。

```
Manager.where(:manager_level => 5).destroy_all 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-10-10T18:33:10.653

尝试这个：

```
Manager.delete_all(manager_level: 5) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-10-10T18:32:35.920

这应该有效：

```
Manager.where(:manager_level => 5).delete_all 
```

注意：这不会删除相关记录。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-26T15:50:19.557

在 Rails 5.1 之后，我们无法将条件传递给`delete_all/destroy_all`方法

```
Manager.where(:manager_level => 5).delete_all 
```

> 这将运行多个查询以删除每条记录

但是在 Rails 6 中，我们可以使用 delete_by 来删除使用条件，

```
Manager.delete_by(manager_level: 5) 
```

> 这将运行单个删除查询
> 
> `delete from managers where manager_level = 5`

# javascript - JavaScript .replace() 仅替换最后一个匹配项？

> ID：12825946
> 
> 赞同：2
> 
> 时间：2012-10-10T18:28:02.737
> 
> 标签：javascript, regex, node.js

似乎 JS 只是替换了正则表达式字符串的最后一个匹配项。我的正则表达式很可能有问题。

```
var data = "<div class=\"separator\" style=\"clear: both; text-align: center;\"><img border=\"0\" src=\"https://lh3.googleusercontent.com/-dJnr7dsB21Y/UEhijTGNweI/AAAAAAAAA_w/DWiWYDOHXBA/s640/blogger-image-438529929.jpg\" /></div><div class=\"separator\" style=\"clear: both; text-align: center;\"><img border=\"0\" src=\"https://lh4.googleusercontent.com/-B3wU95K7DLI/UEhiuu75V-I/AAAAAAAAA_4/lxzGd2WajNE/s640/blogger-image-1479348845.jpg\" /></div>";
var regex = /<img (.*)src=\"(.*)\" (.*)\/>/g;
console.log("Before: "+data);
console.log("After: "+data.replace(regex, "[$2]")); 
```

它输出以下内容；

```
Before: <normal before string>
After: <div class="separator" style="clear: both; text-align: center;">[https://lh4.googleusercontent.com/-B3wU95K7DLI/UEhiuu75V-I/AAAAAAAAA_4/lxzGd2WajNE/s640/blogger-image-1479348845.jpg]</div> 
```

（只返回最后一张图片）

顺便说一下，这是 node.js。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:31:51.567

这是因为您正在使用匹配标签结尾的贪婪匹配。

试试这个：

```
var regex = /<img ([^>]*)src="([^"]*)" ([^>]*)\/>/g; 
```

我没有使用 (.*)，而是使用了 ([^>] *) 或 ([^"]* )，它们被称为否定字符类，并且否定字符类匹配不包括字符类中列出的字符的范围。

编辑：删除转义双引号，根据菲利克斯的评论，谢谢！

# javascript - 为什么这个 Javascript match() 函数会使我的浏览器崩溃？

> ID：12825950
> 
> 赞同：1
> 
> 时间：2012-10-10T18:28:28.530
> 
> 标签：javascript, regex, crash

### 我所做的：

*   确保 Firebug 正常工作。
*   在 isWrappedInParens() 函数中放置一个断点。
*   导航到我的网络应用程序。
*   触发对 isWrappedInParens() 的调用。
*   逐步执行 isWrappedInParens()。一切都很好，但它并没有超过指示为“CRASH POINT”的代码行。
*   我也尝试过没有运行 Firebug 或有断点，但它仍然冻结。

### 我注意到：

*   在大多数情况下， isWrappedInParens() 工作正常。
*   当它不起作用时，Firefox 会冻结。不过，我仍然可以最小化/展开/关闭窗口。
*   我还注意到，当测试字符串稍短（括号更少）时，firefox 会挂起，但最终会正确完成（约 30 秒）。

### 导致 Firefox 崩溃的示例字符串

```
// Note that this is not wrapped in parentheses,
// since it is two separate sets of nested parentheses
var test = "(the OR (and) OR (and) OR (and)) AND ((to) OR (to) OR (to))"; 
```

### 背景

*   浏览器：火狐3.6.18
*   webapp 是一个码头应用程序。

### 代码

```
isWrappedInParens = function(str){
    if(_.isNull(str)) {
        return false;
    }
    str = str.trim();

    var pattern = /^[(](([(][^()]+[)]|[^()]+)|[(]([(][^()]+[)]|[^()]+)+[)])+[)]$/;

    var matchesPattern;
    try{
        matchesPattern = str.match(pattern) || null; //CRASH POINT!!!!!!!!!!!
    }catch(err){
        return false; //Note that no error is ever caught from freezing
    }

    var isWrapped = !_.isUndefined(matchesPattern) && !_.isNull(matchesPattern);
    return isWrapped;
} 
```

### 正则表达式的来源：

```
// Atoms, building blocks for the expressions
var parenAtom = "[(][^()]+[)]";
var nonParenAtom = "[^()]+";

// Expressions, building blocks for the final regular expression
var baseCase = "(" + parenAtom + "|" + nonParenAtom + ")";
var nestedCase = "[(]_base_[)]"
    .replace("_base_", baseCase);

// Regular Expression
var wholeCase = "^[(](_base_|_nested_)+[)]$"
    .replace("_base_", baseCase)
    .replace("_nested_", nestedCase);
var pattern = new RegExp(wholeCase, ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:54:04.397

从我的评论：

> 浏览 Firefox 错误数据库，发现了许多正则表达式错误，并松散地归类为“指数行为”错误。其中大部分已在较新版本的浏览器中得到修复。

[在这个错误](https://bugzilla.mozilla.org/show_bug.cgi?id=539080#c7)中，Brendan Eich 对这个问题发表了一些评论，他还列出了其他几个错误（一些非常古老）。那里的另一条评论暗示了 Firefox 4 中的“正则表达式大修”，表明许多变化早在那时就发生了。

# actionscript-3 - 从特定的脱机文件路径中洗牌 Actionscript 3 中的数组

> ID：12825958
> 
> 赞同：1
> 
> 时间：2012-10-10T18:28:51.537
> 
> 标签：actionscript-3, flash, mp3, actionscript-2, shuffle

正如标题中所说。这是我目前正在使用的脚本

```
import flash.media.Sound;
import flash.net.URLRequest;
import flash.media.SoundChannel;
import flash.events.Event;

playsong();

//var songs:Array=new Array("part0.mp3","part1.mp3","part2.mp3","part3.mp3","part4.mp3","part5.mp3","part6.mp3","part7.mp3","part8.mp3","part9.mp3","part10.mp3","part11.mp3","part12.mp3","part13.mp3","part14.mp3","part15.mp3","part16.mp3","part17.mp3","part18.mp3","part19.mp3","part20.mp3","part21.mp3","part22.mp3","part23.mp3","part24.mp3","part25.mp3","part26.mp3","part27.mp3","part28.mp3","part29.mp3","part30.mp3","part31.mp3","part32.mp3","part33.mp3","part34.mp3","part35.mp3","part36.mp3","part37.mp3","part38.mp3","part39.mp3","part40.mp3","part41.mp3","part42.mp3","part43.mp3","part44.mp3","part45.mp3","part46.mp3","part47.mp3","part48.mp3","part49.mp3","part50.mp3","part51.mp3","part52.mp3","part53.mp3","part54.mp3","part55.mp3","part56.mp3","part57.mp3","part58.mp3","part59.mp3","part60.mp3","part61.mp3","part62.mp3","part63.mp3","part64.mp3","part65.mp3","part66.mp3","part67.mp3","part68.mp3","part69.mp3","part70.mp3","part71.mp3","part72.mp3","part73.mp3","part74.mp3","part75.mp3","part76.mp3","part77.mp3","part78.mp3","part79.mp3","part80.mp3","part81.mp3","part82.mp3","part83.mp3","part84.mp3","part85.mp3","part86.mp3","part87.mp3","part88.mp3","part89.mp3","part90.mp3","part91.mp3","part92.mp3","part93.mp3","part94.mp3","part95.mp3","part96.mp3","part97.mp3","part98.mp3","part99.mp3","part100.mp3","part101.mp3","part102.mp3","part103.mp3","part104.mp3","part105.mp3","part106.mp3","part107.mp3","part108.mp3","part109.mp3","part110.mp3","part111.mp3","part112.mp3","part113.mp3","part114.mp3","part115.mp3","part116.mp3","part117.mp3","part118.mp3","part119.mp3","part120.mp3","part121.mp3","part122.mp3","part123.mp3","part124.mp3","part125.mp3","part126.mp3");
var sound:Sound;
var soundChannel:SoundChannel;
var randnum:uint;

function playsong()
{
    randnum=Math.floor(Math.random()*127);
    sound=new Sound();
    var songs:String= "part" + randnum + ".mp3";  
    sound.load(new URLRequest("parts/"+songs)); 
    soundChannel=sound.play();
    soundChannel.addEventListener(Event.SOUND_COMPLETE,playrandomsong);
}

function playrandomsong(e:Event)
{
    playsong();
} 
```

它可以工作......但只有在与 SWF 文件类似的目录中时，我才将其另存为。我需要像 MP3 在“D:/parts”中一样工作。Actionscript 和 flash 不是我真正的东西，所以我为我的笨拙表示歉意，但我最终需要一个 SWF 文件，它可以对位于特定目录中的 MP3 进行随机播放……因此，非常感谢任何帮助！谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T07:36:26.280

从您的问题看来，您只想在本地播放 swf？

如果是这样，您应该能够通过更改从另一个位置加载本地文件：

```
sound.load(new URLRequest("parts/"+songs)); 
```

到

```
sound.load(new URLRequest("file:///D:/path/to/parts/"+songs)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:03:21.810

据我了解，没有必要完全制作网络应用程序。它将在本地工作。因此，您可以通过 ActionScript 3 制作 AIR 应用程序。

# amazon-ec2 - 为什么当我关闭笔记本电脑时，我与 EC2 上的 linux AMI 的连接会断开

> ID：12825966
> 
> 赞同：1
> 
> 时间：2012-10-10T18:29:16.660
> 
> 标签：amazon-ec2

当我关闭或关闭计算机时，有没有办法防止进程在 linux AMI 上停止？当我通过我的 OSX 机器上的终端连接时会发生这种情况。无论我的计算机在做什么，似乎该过程仍应运行。不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T22:30:50.623

对的，这是可能的。您需要在后台使用`nohup`或`screen`运行一个进程，以便与它断开连接。

这里有一个使用[教程](http://www.kuro5hin.org/story/2004/3/9/16838/14935)`screen`。教程中的相关部分：

> screen 的另一个主要很酷的功能是它能够将终端仿真器与正在运行的程序分离。这意味着您可以在意外关闭终端仿真器后，甚至在您注销后使用 screen 来保持程序运行，然后再从原来的位置恢复。这意味着您在其中运行多个控制台程序的“会话”的概念是一个自由浮动的实体，您可以在任何地方绑定到任何终端，或者如果您愿意，可以根本没有终端。

如果你选择走这`nohup`条路，这里有一个[教程](http://www.cyberciti.biz/tips/nohup-execute-commands-after-you-exit-from-a-shell-prompt.html)。

# agile - 第一个 Scrum 案例研究

> ID：12825967
> 
> 赞同：1
> 
> 时间：2012-10-10T18:29:18.637
> 
> 标签：agile, scrum

我想知道是否有人知道我在哪里可以找到 scrum 的第一个案例研究？我需要它作为参考。我找不到任何与之相关的东西。

它必须是 Jeff Sutherland 用来证明 Scrum 作为一种开发方法的第一个方法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T22:26:58.970

在Ken Schwaber 和 Mike Beedle所著的《[使用 Scrum 进行敏捷软件开发](https://rads.stackoverflow.com/amzn/click/com/0130676349)》一书中，有一两章关于第一个 Scrum 案例研究的信息。我知道这是一本书，但那是你想要开始的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T22:24:41.580

我怀疑您可能想要 1986 年 1 月的*哈佛商业评论*文章*“新产品开发游戏”，*作者是 Hirotaka Takeuchi 和 Ikujiro Nonaka，其中有案例研究。

> 在当今快节奏、竞争激烈的商业新产品开发世界中，速度和灵活性至关重要。公司越来越意识到，开发新产品的旧的、顺序的方法根本无法完成工作。取而代之的是，日本和美国的公司正在使用一种整体方法——就像在橄榄球比赛中，当球作为一个整体向场上移动时，球会在球队内部传球。这种整体方法有六个特点：内在的不稳定性、自组织的项目团队、重叠的开发阶段、“多元学习”、微妙的控制和学习的组织转移。这六个部分像拼图游戏一样组合在一起，形成了一个快速灵活的新产品开发流程，最重要的是，新方法可以充当变革推动者：

它有一个标题为*移动 scrum*的部分。有一个[pdf 可用](http://www.sao.corvallis.or.us/drupal/files/The%20New%20New%20Product%20Development%20Game.pdf)。

Sutherland 在 SCRUM 上发表的第一部作品似乎是在 90 年代中期。

# c# - Smartthreadpool 如何知道所有线程何时完成？

> ID：12825968
> 
> 赞同：0
> 
> 时间：2012-10-10T18:29:26.993
> 
> 标签：c#, multithreading

我试图弄清楚如何找出`threads`队列中的所有内容何时完成..当他们完成时，我想显示`MessageBox`类似“操作完成”的说法。

这是我用来排队我的线程的代码：

```
Smart.STPStartInfo stpStartInfo = new Smart.STPStartInfo();
stpStartInfo.MaxWorkerThreads = Convert.ToInt32(numericUpDown5.Value);
stpStartInfo.MinWorkerThreads = 2;
_smartThreadPool = new Smart.SmartThreadPool(stpStartInfo);

foreach (string item in urlQueue)
{
    _smartThreadPool.QueueWorkItem(
        new Amib.Threading.Func<string, int, int, string, int>(checkURLSmart),
                                item, iia, 5000, kryptonTextBox1.Text);

    iia++;
} 
```

任何想法如何知道所有线程何时完成工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T18:41:25.967

您可以在 SmartThreadPool 上使用 WaitAll 或 WaitAny。

[http://www.codeproject.com/Articles/7933/Smart-Thread-Pool#Feature4](http://www.codeproject.com/Articles/7933/Smart-Thread-Pool#Feature4)

# jquery - jQuery.Cycle 100% 宽度 w/隐藏溢出

> ID：12825969
> 
> 赞同：0
> 
> 时间：2012-10-10T18:29:29.423
> 
> 标签：jquery, scaling, cycle, jquery-cycle

我已经使用 jQuery.Cycle 创建了一个图像轮播，我希望宽度与浏览器大小 (100%) 一起缩放，但我希望将高度限制为 500px 高 div。

我希望图像从中心点缩放，并按比例缩放。需要隐藏 div 内的图像溢出（即裁剪图像）。

```
#slideshow {
    margin: 0 auto;
    width:100% !important;
    height:500px;
    z-index: 1;
    position: relative;
    overflow: hidden;
}
#slideshow img{
    margin: 0 auto;
    width:100%;
    height:100%;
    display:block;
    overflow: hidden;
} 
```

HTML

```
<div id="slideshow">    
        <div class="ss2_wrapper">
        <a href="#" class="slideshow_prev"><span>Previous</span></a>
        <a href="#" class="slideshow_next"><span>Next</span></a>
        <div id="slideshow_2" class="slideshow">                
            <div class="slideshow_item">
                <div class="image"><a href="#"><img src="images/HomePage/ban1.jpg" alt="photo 2" /></a></div>
            </div>                              
            <div class="slideshow_item">
                <div class="image"><a href="#"><img src="images/HomePage/ban2.jpg" alt="photo 3" /></a></div>
            </div>              
            <div class="slideshow_item">
                <div class="image"><a href="#"><img src="images/HomePage/ban3.jpg" alt="photo 1" /></a></div>
            </div>          
            <div class="slideshow_item">
                <div class="image"><a href="#"><img src="images/HomePage/ban4.jpg" alt="photo 4" /></a></div>
            </div>              
        </div> <!-- slideshow_2 -->
    </div><!-- ss2_wrapper -->    
</div><!-- slideshow --> 
```

该页面位于：http: [//samaradionne.com/euro](http://samaradionne.com/euro)

现在图像正在拉伸浏览器的宽度，但不成比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:37:54.827

如果您希望图像按比例缩放并与中心对齐，则应设置**height: auto;** 并使用**text-align: center 将图像居中；**

```
#slideshow img {
  margin: 0 auto;
  width: 100%;
  height: auto;
  display: block;
  overflow: hidden;
  text-align: center;
} 
```

这将从图像底部“裁剪”。

# windows-8 - Windows 8 应用商店应用 WinRT 本地 toast 通知未显示

> ID：12825972
> 
> 赞同：7
> 
> 时间：2012-10-10T18:29:37.463
> 
> 标签：windows-8, windows-runtime, toast

我有以下代码在 C#/XAML Windows Store 应用程序中本地显示 toast 通知：

```
private static void ShowToast(string message)
{
   var toastXmlString = string.Format("<toast><visual version='1'><binding template='ToastText01'><text id='1'>{0}</text></binding></visual></toast>", message);
   var xmlDoc = new Windows.Data.Xml.Dom.XmlDocument();
   xmlDoc.LoadXml(toastXmlString);
   var toast = new ToastNotification(xmlDoc);
   ToastNotificationManager.CreateToastNotifier().Show(toast);
} 
```

Toast 永远不会显示在 UI 中。您可以使用空的默认 VS 2012 Windows 应用商店应用项目和此代码进行尝试。有什么需要先配置的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-10T18:40:46.717

确保您在清单中设置了“能够吐司”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T22:58:30.033

嘿，还要确保你不在模拟器模式下测试你的应用程序（你需要使用本地机器模式）！我花了 20 分钟才弄明白那个....

# objective-c - 如何在 Cocoa Touch 中创建等效的外观代理

> ID：12825977
> 
> 赞同：0
> 
> 时间：2012-10-10T18:29:53.970
> 
> 标签：objective-c, cocoa-touch

我可以使用外观代理为 iOS 中给定类型的所有控件设置属性。例如，我可以说：

```
UIFont *futura = [UIFont fontWithName:@"Futura" size:13];
NSDictionary *attributes = [NSDictionary dictionaryWithObject:futura forKey:UITextAttributeFont];

[[UIBarButtonItem appearance] setTitleTextAttributes:attributes forState:UIControlStateNormal]; 
```

让我所有的工具栏按钮都使用 Futura 字体。

我有自己的自定义控件，它是 UIControl 的子类。有什么方法可以使用相同的技术来设置我的控件独有的一些自定义属性？否则，它会直接遍历应用程序设置属性中的每个实例。问题是，如何像外观代理一样创建自己的属性代理？

我可以想象设置一个单例来保存我关心的属性，然后让我的控件调用它来获取它们的值。这似乎很难处理我想将某些实例的属性设置为与全局默认值不同的情况，就像我可以使用上面的一两个 UIBarButtonItems 一样。那么然后变成一个每个新实例向​​代理注册自己的地方，所以如果它们发生变化，代理可以通知他们设置......但是现在我想知道是否有更好的方法？这似乎很复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T23:07:53.857

检查文档以获取`UIAppearanceContainer`. 您可以让您的子类符合`UIAppearanceContainer`协议，然后`UI_APPEARANCE_SELECTOR`在头文件中标记访问器。方法声明的示例`UIBarButtonItem`如下：

```
@property(nonatomic,retain) UIColor *tintColor UI_APPEARANCE_SELECTOR;

- (UIImage *)backButtonBackgroundImageForState:(UIControlState)state
         barMetrics:(UIBarMetrics)barMetrics UI_APPEARANCE_SELECTOR;
- (void)setBackButtonBackgroundImage:(UIImage *)backgroundImage
    forState:(UIControlState)state
    barMetrics:(UIBarMetrics)barMetrics UI_APPEARANCE_SELECTOR; 
```

# python - Django syncdb 对 unicode 字符串表现异常

> ID：12825978
> 
> 赞同：1
> 
> 时间：2012-10-10T18:29:56.877
> 
> 标签：python, django, unicode, virtualenv, rhel

我要提前为这篇文章的长度道歉。我只是想确保我没有遗漏任何信息。

我有一个在 django 应用程序之外使用 django 的 ORM 的应用程序，它通过`call_command('syncdb')`直接调用使用“syncdb”（注意：我对下面列出的每个场景都使用了 virtualenv）。

我在应用程序中的单元测试尝试使用 SQLite 作为后端设置一个“测试”django 数据库（而生产环境使用 MySQL）。

每次运行一个单元测试时，它都会`call_command('syncdb')`在每个测试中使用相同的测试 django 设置进行调用。

我能够在 2 个不同的环境（一个使用 Windows 7/Python 2.7.3，另一个使用 Mac OS X ML/Python 2.7.2）上运行这些单元测试。测试完全没有问题；但这些都是相对干净的 Python 安装。

但是，当我尝试在 RHEL 服务器上运行它时，当单元测试尝试运行 syncdb 时，我收到以下错误：

> DatabaseError：表“my_app_mytable”已经存在

经过大量令人沮丧的谷歌搜索和调试后，我（认为）我已经消除了[此处](https://code.djangoproject.com/ticket/9116)和[此处](https://stackoverflow.com/questions/1283792/django-is-telling-me-table-already-exists-on-syncdb-cant-figure-out-why)报告的错误。

我做了很多修改，我想我已经将问题缩小到[django 的 syncdb 命令文件](https://github.com/django/django/blob/master/django/core/management/commands/syncdb.py)中的这个语句（听起来很疯狂）（第 59 行）：

```
tables = connection.introspection.table_names() 
```

我`pdb.set_trace()`在两个环境中都设置了一个内部 django 的 syncdb 源来查看。这是我发现的：

（有效的环境）

```
(Pdb) tables
[u'my_app_mytable', u'my_app_myothertable'] 
```

那里似乎还可以。从 syncdb 文件的外观来看，django 使用该`tables`变量来检查应用程序的模型与数据库中已有的模型。

（环境不起作用）

```
(Pdb) tables
[u'm\x00y\x00_\x00a\x00p\x00p\x00_\x00m\x00y\x00t\x00a\x00', u'm\x00y\x00_\x00a\x00p\x00p\x00_\x00m\x00y\x00o\x00t\x00'] 
```

除非我快疯了，否则我认为这会使 django 源代码中的以下语句返回 false：

```
def model_installed(model):
        opts = model._meta
        converter = connection.introspection.table_name_converter
        return not ((converter(opts.db_table) in tables) or
            (opts.auto_created and converter(opts.auto_created._meta.db_table) in tables)) 
```

该方法`filter`在该定义之后通过几行调用，看起来它检查是否`converter(opts.db_table)`在`tables`列表中。我也在两种环境中手动运行它们：

（有效的环境）

```
(Pdb) opts = all_models[0][1][0]._meta
(Pdb) converter = connection.introspection.table_name_converter
(Pdb) converter(opts.db_table) in tables
True 
```

如您所见，我（有点）手动运行该`model_installed`函数以查看`converter(opts.db_table)`返回的内容，并且在两种环境中它看起来都像是一个完全正常的字符串。然而：

（环境不起作用）

```
(Pdb) opts = all_models[0][1][0]._meta
(Pdb) converter = connection.introspection.table_name_converter
(Pdb) converter(opts.db_table) in tables
False 
```

因此，看起来由于`tables`变量是损坏环境中看起来很疯狂的 crud 列表，因此该方法错误地声称每个模型的表名不在数据库中，这给了我在开始时所说的原始错误。

为了确保我真的没有发疯，我还尝试手动插入正确的列表进行比较：

（环境不起作用）

```
(Pdb) converter(opts.db_table) in [u'my_app_mytable', u'my_app_myothertable']
True 
```

我需要在这个环境中重新编译 Python 吗？我在 stackoverflow 上阅读了[以下问题](https://stackoverflow.com/questions/10253405/python-x00-filled-utf-32-string-from-cstringio)，发现我破碎的环境表现出奇怪的行为：

```
(myvirtualenv)[username@myserver]$ python
Python 2.7.3 (default, Apr 12 2012, 10:40:11)
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import StringIO, cStringIO, sys
>>> StringIO.StringIO(u"fubar").getvalue()
u'fubar'
>>> cStringIO.StringIO(u"fubar").getvalue()
'fubar'
>>> cStringIO.StringIO(u"\u0405\u0406").getvalue()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)
>>> sys.maxunicode
65535
>>> sys.byteorder
'little' 
```

编辑：好的，所以我稍微浏览了 django 源代码，看起来他们正在以这种方式获取表格列表：

```
def get_table_list(self, cursor):
    "Returns a list of table names in the current database."
    # Skip the sqlite_sequence system table used for autoincrement key
    # generation.
    cursor.execute("""
        SELECT name FROM sqlite_master
        WHERE type='table' AND NOT name='sqlite_sequence'
        ORDER BY name""")
    return [row[0] for row in cursor.fetchall()] 
```

所以我在 python 解释器中手动连接到 sqlite 文件，并运行该查询：

（环境不起作用）

```
>>> import sqlite3
>>> conn = sqlite3.connect('/path/to/sqlite/file')
>>> curs = conn.cursor()
>>> curs.execute("""
... SELECT name FROM sqlite_master
... WHERE type='table' AND NOT name='sqlite_sequence'
... ORDER BY name""")
<sqlite3.Cursor object at 0xb7557500>
>>> curs.fetchall()
[(u'c\x00c\x00_\x00s\x00t\x00a\x00t\x00s\x00_\x00c\x00c\x00',), (u'c\x00c\x00_\x00s\x00t\x00a\x00t\x00s\x00_\x00c\x00c\x00s',)] 
```

所以看起来 SQLite 为该查询返回了一个 UTF16-LE 字符串。在工作环境上，它返回以下内容：

（有效的环境）

```
>>> curs.fetchall()
[(u'my_app_mytable',), (u'my_app_myothertable',)] 
```

`models`即使没有在顶部定义编码，“工作”环境在解释我的文件和适当地创建表时似乎也没有任何问题。是否有一些 SQLite 默认设置导致了这种情况？还是 git 在损坏的环境中将文件转换为 UTF-16LE，并在工作环境中坚持使用 UTF-8/ASCII？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-20T05:10:47.463

我遇到了类似的问题，相同的 syncdb 命令在一个环境中成功执行，而不是在具有相同数据库导入和模型的其他环境中成功执行。更改`call_command(syncdb)`为`os.system('python ' + |path|, 'manage.py syncdb'))`我解决了它。

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T18:57:17.340

您的文本编辑器已决定将文件保存为 UTF-16LE。[将以下内容放在源文件的顶部，shebang 下方：](http://www.python.org/dev/peps/pep-0263/)

```
# -*- coding: utf-16le -*- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T02:22:16.583

好吧，看来我的`sqlite3`模块正在运行。我最终重新安装了 Red Hat 的`sqlite-devel`软件包，重新编译了 Python 2.7.3，然后更新了 virtualenv 中的可执行文件。

似乎现在运作良好。现在，当我运行 django 的`get_table_list()`查询时，我得到以下信息：

```
>>> import sqlite3
>>> conn = sqlite3.connect('/path/to/sqlite/file')
>>> curs = conn.cursor()
>>> curs.execute("""
... SELECT name FROM sqlite_master
... WHERE type='table' AND NOT name='sqlite_sequence'
... ORDER BY name""")
<sqlite3.Cursor object at 0xb7774ca0>
>>> curs.fetchall()
[(u'my_app_mytable',), (u'my_app_myothertable',)] 
```

我没有对 sqlite 文件本身进行任何更改，所以这似乎是`sqlite3`模块和/或我的 Python 2.7.3 安装的问题。

# svn - Mac SVN E175002：无法解析主机名`'

> ID：12825979
> 
> 赞同：3
> 
> 时间：2012-10-10T18:29:59.443
> 
> 标签：svn, osx-mountain-lion

对于我输入的使用 http/https 协议的任何主机名，我都会收到“无法解析主机名 `'”。无论我使用什么主机名，它都会返回反引号单引号。DNS 工作正常，我可以 ping 域，并使用浏览器导航到 repo。我还可以在 Windows 机器上使用 TortoiseSVN 浏览 repo。

```
svn: E175002: OPTIONS of 'http://mysite.com/svnrepo': Could not resolve hostname `': Host not found (http://mysite.com)
svn: E175002: OPTIONS of 'http://nonexistantdomain': Could not resolve hostname `': Host not found (http://nonexistantdomain) 
```

如果我使用 svn:// 协议，主机名解析就好了。我试过使用 Mac OS X 10.8 Mountain Lion 附带的 svn、Ports 的 SVN、WANDisco，我什至编译了源代码，但我仍然得到同样的结果。我还下载了 serf-1.1.1 并对其进行了编译。

我不知道 svn 如何解析主机名。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T03:58:20.133

在尝试了很多东西，包括用霓虹灯和农奴编译颠覆之后，我终于弄明白了。

~/.subversion/servers

在该文件的末尾是

```
http-timeout = 
http-proxy-port = 
http-proxy-host = 
http-proxy-username = 
http-proxy-password = 
```

我假设那些等于什么都没有被忽略，但事实并非如此。将它们注释掉后，svn 可以再次解析名称。

# javascript - 在咖啡脚本中将多个 jQuery nextAll() 函数串在一起？

> ID：12825982
> 
> 赞同：0
> 
> 时间：2012-10-10T18:30:11.100
> 
> 标签：javascript, jquery, coffeescript

我有一个带有多个 s 的页面，我希望能够在单击这些单独的 h2 时在不同的子元素上运行函数。这是我的咖啡脚本：

```
$("h2").click ->
  $(@).nextAll('#data').toggle("blind")
  $(@).nextAll('.c1').toggleClass("minsize")
  $(@).nextAll("#datacontainer").toggleClass("datacontainer")
  $(@).addClass("showtext") 
```

这是我正在使用的相关 HTML 结构（在 haml 中，这是 Rails 应用程序的一部分）：

```
#clipboard
%ul.clipmenu
    -@snapshots.each do |snapshot|
        %li.clip.c1[snapshot]
            = image_tag snapshot.attachment.url
            #datacontainer.c1
                %h2= snapshot.default_name
                #data.c1{:style => "display:none"}
                    %textarea
                    %p Some text 
```

问题是它只运行**$(@).nextAll('#data').toggle("blind")**函数，而不是它下面的其他三个函数。当我在前面没有**$(@).nextAll**代码的情况下运行相同的咖啡脚本时，所有功能都在工作，但仅适用于页面上的第一个。

# c++ - 不能重载 = 使 object1 = 0;

> ID：12825983
> 
> 赞同：1
> 
> 时间：2012-10-10T18:30:16.700
> 
> 标签：c++, operator-overloading

我是一名大学生，正在从 java 切换到 c++ 。我们已经介绍了重载运算符，我大部分时间都得到了，但是对于我的任务，我被难住了。主要要求：

```
 Weight w1( -5, 35 ), w2( 5, -35 ), w3( 2, 5 ), w4( 1 ), w5, w6;
 //later on in main
 cout << "(w5 = 0) is " << ( w5 = 0 ) << endl; 
```

我的重量对象有两个整数，一个是磅，一个是盎司。当我的程序到达这一行时，w5 已经设置为 (0,0) 但是我觉得我正在返回地址，因为当我打印 w5 时我得到一个非常长的数字。这是我在 .h 和 .cpp 中针对 = 的特定重载的代码

```
//Weight.h
Weight& operator=(const int);

//Weight.cpp
Weight& Weight::operator=(const int number)
{
Weight changer(number); //constructs weight object with one int to (int, 0)
return changer;
} 
```

我从论坛中了解到，我无法制作 = 朋友重载，这使我可以为该功能接受 2 个参数。任何帮助是极大的赞赏！

```
//code for my << overload
ostream& operator << (ostream& output, const Weight& w)
{
switch(w.pounds)
{
    case 1:
    case -1:
        output << w.pounds << "lb";
        break;
    case 0:
        break;
    default:
        output << w.pounds << "lbs";
        break;
}
switch(w.ounces)
{
case 1:
case -1:
    output << w.ounces << "oz";
    break;  
case 0:
    break;
default:
    output << w.ounces << "ozs";
    break;
}

if (w.pounds == 0 && w.ounces == 0)
{
    output << w.ounces << "oz";
}

return output;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:34:41.427

```
//Weight.cpp
Weight& Weight::operator=(const int number)
{
   Weight changer(number); //constructs weight object with one int to (int, 0)
   return changer;
} 
```

这是错误的，您正在返回对临时对象的引用。该对象超出范围，然后您会得到不正确的结果。

一般来说，`operator=`是赋值，意思是你想改变对象本身的状态。因此，它通常应如下所示：

```
//Weight.cpp
Weight& Weight::operator=(const int number)
{
   // whatever functionality it means to assign the number to this object
   return *this;
} 
```

# sql - 在新表中保留“分组依据”值 (ST_MakeLine)

> ID：12825984
> 
> 赞同：0
> 
> 时间：2012-10-10T18:30:28.680
> 
> 标签：sql, postgis, pgadmin

在将点分组为线后，我想保留一些关于组的信息。

我的数据。

点表（点按分段分组，按帧分段，按时间排序）

我有以下 SQL 查询来创建按帧分组的点的新表：

```
-- Create frames from points

CREATE TABLE data.greenland_2011_p3_frames
(frm_id serial PRIMARY KEY,
geom GEOMETRY (LineString,3413));

INSERT INTO data.greenland_2011_p3_segs(geom) 

SELECT ST_MakeLine(geom) as point_geom 
FROM (SELECT * FROM data.greenland_2011_p3 ORDER BY time) a GROUP BY frame; 
```

我想在新表中保留帧值和段值（来自原始表）

所以新表的形式为：

```
frm_id      geom       frame   segment
1        linestring    ######   ######
2        linestring    ######   ######
3        linestring    ######   ######
...          ...         ...      ... 
```

这是一个示例框架/段

```
SEGMENT = 2011031614  (YYYYMMDD(SEG))  ***segment 14

FRAME = 2011031614001  or 2011031614002 (YYYYMMDD(SEG)(FRM))   ***segment 14 frames 1 and 2 
```

编辑：

我想为此添加第二步。使用 Mike 的解决方案，我现在有一个包含以下内容的表格：

```
frm_id      geom       frame   segment
1        linestring   *14001    *14
2        linestring   *14002    *14
3        linestring   *14003    *14
4        linestring   *15001    *15
5        linestring   *15002    *15
.... 
```

我现在想创建这样的东西：

```
seg_id      geom      segment         frames
1        linestring     *14    <*14001,*14002,*14003>
2        linestring     *14       <*15001,*15002>
.... 
```

如何实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T00:24:14.567

假设你有一个点几何、帧、段和时间的主表：

```
create table greenland_2011_p3 (
  gid serial primary key,
  geom geometry(Point,3413),
  frame integer,
  segment integer,
  time timestamp
);
insert into greenland_2011_p3(geom, frame, segment, time)
values
('SRID=3413;POINT(0 0)', 10, 20, '2011-08-03 10:30'),
('SRID=3413;POINT(0 1)', 10, 20, '2011-08-03 10:32'),
('SRID=3413;POINT(1 1)', 12, 20, '2011-08-03 10:35'),
('SRID=3413;POINT(1 0)', 12, 20, '2011-08-03 10:38'); 
```

您可以在 select 语句中编写一个具有“ORDER BY”的聚合，并确定需要为结果分组哪些其他列：

```
SELECT ST_MakeLine(geom ORDER BY time) AS geom, frame, segment
FROM greenland_2011_p3
GROUP BY frame, segment; 
```

或者，如果要将所有帧作为字符串列出，可以使用[string_agg](http://www.postgresql.org/docs/9.2/static/functions-aggregate.html) aggagrate 函数：

```
SELECT ST_MakeLine(geom ORDER BY time) AS geom, segment,
    '<' || array_agg(DISTINCT frame::text, ',') || '>' AS frames
FROM greenland_2011_p3
GROUP BY segment; 
```

`array_agg`如果您想要一个用于其他目的的数组对象，还有一个函数。

# .net - 我需要在两个项目中添加相同的引用吗？

> ID：12825988
> 
> 赞同：0
> 
> 时间：2012-10-10T18:30:58.233
> 
> 标签：.net, visual-studio

由于我是 .NET 开发的新手，我认为这是一个概念问题。

我的解决方案中有 3 个项目：

1.  **Foo.Core：**一个引用 Fluent NHibernate、NHibernate 和 Npgsql 的类库。这是我的业务层，包含服务、实体和 NHibernate 映射。
2.  **Foo.Core.Tests：**一个类库，其中包含引用 NUnit 和**Foo.Core**的测试；
3.  **Foo.MVC：仅引用****Foo.Core**的 MVC 应用程序；

在**Foo.Core**我有`FooService`一个`GetFoo`方法，它`Foo`从数据库返回一个（实体）实例。

在 MVC 项目中，我创建了一个实例`FooService`并调用`GetFoo`，但它引发了一个异常，即无法创建 NpgsqlDriver 实例。如果我添加对 Npgsql 的引用，它就可以工作。

**Foo.Core**已经**引用**了驱动程序，并且在那里打开了连接。为什么我需要在 MVC 项目中再次引用驱动程序？

**编辑**

经过更多搜索，我找到[了这个链接](http://pgfoundry.org/forum/forum.php?thread_id=10544&forum_id=519)。如果在 GAC 中引用它，则构建会忽略*Copy Local*，但我检查了 Npgsql.dll 并没有在那里注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:27:21.007

检查您是否`true`在 Foo.Core 中对 Npgsql 的引用设置了“复制本地”（在解决方案资源管理器中选择引用，然后单击 F4 以查看属性）。

如果设置为 true，则无需在 Foo.MVC 中添加引用。

# mysql - 匹配来自两个不同表的值

> ID：12825994
> 
> 赞同：2
> 
> 时间：2012-10-10T18:31:14.797
> 
> 标签：mysql, sql, match

给定 2 个表，TableA 和 TableB，当“值”与 TableB 的任何“值”都不匹配时，如何获取 TableA 的“id”？

**表 A**

```
+----+-------+
| id | value |
+----+-------+
| 1  |   a   |
| 2  |   b   |
| 3  |   c   |
| 4  |   d   |
| 5  |   e   |
+----+-------+ 
```

**表 B**

```
+----+-------+
| id | value |
+----+-------+
| 1  |   a   |
| 2  |   b   |
| 3  |   c   |
| 4  |   c   |
| 5  |   f   |
+----+-------+ 
```

**结果表**

```
+----+
| id |
+----+
| 4  |
| 5  |
+----+ 
```

**已编辑（SQLFiddle）：** [http ://sqlfiddle.com/#!2/4c8c9](http://sqlfiddle.com/#!2/4c8c9)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T18:35:28.083

如果要验证两个表中的 id/值是否相同，请使用：

```
select distinct id
from tablea
where (id, value) not in (select id, value
                          from tableb) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/9a881/4)

如果您只想比较值：

```
select distinct id
from tablea
where (value) not in (select value
                          from tableb) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b2230/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T18:33:40.257

```
select a.id
from tableA a
left outer join tableB b on a.id = b.id and a.value = b.value
where a.id is not null and b.value is null 
```

## [SQLFiddle 演示](http://sqlfiddle.com/#!2/3db18/2)

# xml - 是否有支持 XML Schema 目录和 XML Validation 的轻量级、免费的 XML/XML Schema 编辑器？

> ID：12825996
> 
> 赞同：1
> 
> 时间：2012-10-10T18:31:21.607
> 
> 标签：xml, xsd, xml-validation, xml-editor, xmlcatalog

我最近从使用*Android*`Eclipse`转为使用*Xcode*`iOS`开发应用程序。我真的很喜欢 Eclipse XML 编辑器界面（它具有自动完成、CDATA 文档工具提示、链接到模式库和 xml 验证等功能）。由于 Xcode 在我的 CPU 上很困难，而 Eclipse 也相当消耗 cpu（并且同时打开两者会很忙），我选择不使用 Eclipse 进行 XML 编辑，而是寻找适合上面列出的需求的轻量级工具。

 *那么，正如标题所述，**是否有任何免费的、轻量级的 xml 和 xml-schema 编辑器可用？**我查看了 Oracle 的 CAM 编辑器，但找不到添加 XML Schema 目录的方法。除此之外，我很难找到一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T20:29:25.047

我最终下载了 Eclipse 的基本安装，并添加了 webtools XML 编辑器插件。这大约是 90MB，并没有导致 CPU 问题。

Bare-Bones Eclipse 下载：http: [//download.eclipse.org/eclipse/downloads/drops4/S-4.3M2-201209201300/](http://download.eclipse.org/eclipse/downloads/drops4/S-4.3M2-201209201300/)

Webtools 插件站点网址：http: [//download.eclipse.org/releases/juno/](http://download.eclipse.org/releases/juno/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T23:21:18.343

模式目录在 CAM 编辑器中的工作方式略有不同 - 您需要从要使用的模式集中生成组件的字典。

首先，您使用“*”asterix 选项将 XSD 模式作为新模板导入 CAM 编辑器以提取所有组件 - 然后生成字典 - 然后将其添加到您希望使用的集合中。

然后，您可以在字典查看器中搜索组件，并在设计和构建这些组件时拖放到新的 XML 结构中。

这里有[Youtube 视频](http://www.niemtrainingvideos.org)可以解释这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-08T13:27:36.920

jEdit 程序员的文本编辑器，带有 XML 插件。*

# python - 在 Git Pull 上 Pip install -r requirements.txt？

> ID：12825997
> 
> 赞同：5
> 
> 时间：2012-10-10T18:31:30.217
> 
> 标签：python, git, pip

我现在通过 pip 进行 Python 包管理，但我团队中的人在重新运行我们的代码库时总是忘记重做 pip install -r requirements.txt，然后对为什么这些东西不起作用感到困惑。就是说，有什么方法可以将这个命令与他们无论如何都必须做的其他事情联系起来，比如`git pull`这样它就为他们完成了，他们不需要考虑它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T18:44:15.840

[您可以在 git post-merge hook](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)中使用 shell 脚本，只要发生合并，就会执行该脚本。请注意，此钩子将在每次合并时执行（所有实际执行某些操作的拉取都是合并，但并非所有合并都是拉取）。

我不知道是否可以在克隆存储库时自动安装客户端挂钩，但是您至少应该能够安装一次合并后挂钩，而不是让您的团队记住每次拉动都做某事.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-26T16:38:15.627

`post-merge`钩子在这里应该可以正常工作。打开`.git/hooks/post-merge`项目`.git`目录中的文件。将以下代码段粘贴到文件中。

```
#/usr/bin/env bash
changed_files="$(git diff-tree -r --name-only --no-commit-id ORIG_HEAD HEAD)"

check_and_run() {
       echo "$changed_files" | grep --quiet "$1" && eval "$2"
}

check_and_run requirements.txt  "/path/to/virtualenv/bin/pip install -r /path/to/requirements.txt" 
```

运行`chmod +x post-merge`以使文件可执行。

而已。现在每次执行 git merge 并且`requirements.txt`文件发生更改时`pip install`都会自动运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-26T16:54:24.863

如果您有能力将工具添加到所有用户的路径中；例如，你们都在一台服务器上工作。创建一个脚本来做到这一点将是微不足道的。

本质上它会是

```
#!/usr/bin/env bash
# Save as `git-pull2`
# Mark as executable (chmod +x git-pull2)
# Include on system path.

git pull $@
pip install -r requirements.txt 
```

`@$`会将所有命令参数传递给 scripted ，`git pull`尽管我不能保证它会一直工作 100%，但它应该涵盖大多数用例。

你可以随意命名它，我没有测试过用脚本命令替换 git 内部命令，例如我不建议命名它`git-pull`，因为这可能与真正的 git-pull 冲突并进入循环循环，但 git 也可能是足够聪明，不会那样递归。

当 git 扩展自定义命令时，`git`删除关键字后的第一个连字符，例如要运行，`git-pull2`您可以按字面意思运行它，也可以`git-pull2`作为嵌入式 git 命令运行`git pull2`。

# iphone - GCDAsyncsocket如何读取xmpp文件传输

> ID：12825999
> 
> 赞同：1
> 
> 时间：2012-10-10T18:31:32.730
> 
> 标签：iphone, ios, xmpp, gcdasyncsocket

我正在使用 xmpp 框架和 TURNSocket 类。一旦我有一个 socks5 连接，GCDasyncsocket 我需要接收另一个客户端正在发送的数据。

readdatattodata 的所有样本都使用像 CrLF 这样的终止符，我如何才能读取正在发送的完整文件数据。