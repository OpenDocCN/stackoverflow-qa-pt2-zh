# StackOverflow 问答 16012000-16012999

# sql - 具有相同标签的两个布尔行的并集

> ID：16012001
> 
> 赞同：0
> 
> 时间：2013-04-15T09:40:28.570
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures, sql-server-2012

我有一个 select 语句，它为每个标签返回一个元素数组：

```
|TAG  | Bool1 | Bool2 | Bool3 |
|-----------------------------|
|tag1 |  0    |   1   |  0    |
|tag1 |  1    |   1   |  0    |
------------------------------- 
```

我希望结果是带有 OR 语句的两行的并集：

```
_______________________________
|TAG  | Bool1 | Bool2 | Bool3 |
|-----------------------------|
|tag1 |  1    |   1   |  0    |
------------------------------- 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-15T09:47:39.443

```
SELECT TAG,
    CAST(MAX(CAST(Bool1 as int)) as bit) as Bool1,
    CAST(MAX(CAST(Bool2 as int)) as bit) as Bool2,
    CAST(MAX(CAST(Bool3 as int)) as bit) as Bool3
from Table group by TAG 
```

似乎符合要求，因为即使单行也有`1`值，那将克服`0`其他行中的所有 s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:55:28.507

请注意，`MAX`运算符不使用`BIT`字段。`CAST`如果它的类型不`INT`使用@Damien_The_Unbeliever 提出的解决方案，您必须填写您的字段

**追加**：*我假设一个简单的 1/0 值的字段可能有点*。

# silverlight - Silverlight 应用程序拒绝访问 Internet Explorer 10 中的域服务

> ID：16012003
> 
> 赞同：1
> 
> 时间：2013-04-15T09:40:39.163
> 
> 标签：silverlight, iis, ria, internet-explorer-10, domainservices

我看到一个奇怪的问题，我的 Silverlight 应用程序由于“查询的加载操作失败..”而无法加载，原因是“在 System.ServiceModel.DomainServices.Server.DomainService.ValidateMethodPermissions 拒绝访问”

如果我使用 IE 9 浏览到完全相同的页面，请求就会通过并加载 silverlight 应用程序！这发生在不止一台服务器上，并且它们的 IIS 和 SQL Server 的配置与我们设置的所有其他系统相同。

关闭自定义错误后，我在 Fiddler 中看到以下堆栈跟踪 -

`Denied Access@Detail@DomainServiceFaultDomainServices i)[http://www.w3.org/2001/XMLSchema-instance@](http://www.w3.org/2001/XMLSchema-instance@) ErrorCode��@ErrorMessage� Denied Access@IsDomainException�@ StackTrace�r at System.ServiceModel.DomainServices.Server.DomainService.ValidateMethodPermissions(DomainOperationEntry domainOperationEntry, Object entity) at System.ServiceModel.DomainServices.Server.DomainService.ValidateMethodCall(DomainOperationEntry domainOperationEntry, Object[] parameters, List`1 validationResults) at System.ServiceModel.DomainServices.Server.DomainService.Query(QueryDescription queryDescription, IEnumerable`1& validationErrors, Int32& totalCount) at System.ServiceModel.DomainServices.Hosting.QueryProcessor.Process[TEntity](DomainService domainService, DomainOperationEntry queryOperation, Object[] parameters, ServiceQuery serviceQuery, IEnumerable`1& validationErrors, Int32& totalCount) at System.ServiceModel.DomainServices.Hosting.QueryOperationBehavior`1.QueryOperationInvoker.InvokeCore(Object instance, Object[] inputs, Object[]& outputs)`

该站点位于我信任的站点中。

当我附加到 silverlight 应用程序并调试身份验证过程时，它似乎可以通过并且用户得到验证。但是，当它实际上尝试在此之后对服务运行查询时，它们会因访问被拒绝而失败！

我不知道为什么这在 IE 10 中会有任何不同，任何想法都将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:40:27.963

还没有 100% 证明这一点，但出现了这篇文章中建议的修补程序 - [IE10 User-Agent 导致 ASP.Net 不发回 Set-Cookie（IE10 不设置 cookie）](https://stackoverflow.com/questions/6983732/ie10-user-agent-causes-asp-net-to-not-send-back-set-cookie-ie10-not-setting-coo)解决了这个问题。

似乎 IIS 没有正确处理 IE10 cookie 存在问题，因此最初设置了身份验证 cookie，然后随后被忽略。

我猜我们的机器已经过时了，windows update-wise，因为我认为这个修复程序现在一定已经分发了。但尚未确认。

# javascript - 在Javascript中将字符串转换为数组并返回

> ID：16012007
> 
> 赞同：1
> 
> 时间：2013-04-15T09:41:00.680
> 
> 标签：javascript

我只是在这样的字符串中有一个巨大的数组：

`"test", "blabla", "anothertest", "et", "cetera"`

我需要能够将其转换为数组，最好不要留下“”。我不知道 javascript 是如何做到这一点的，但我听说 JSON 能够做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:44:28.320

JSON确实很好：

```
var string = '"test", "blabla", "anothertest", "et", "cetera"';
JSON.parse('[' + string + ']'); 
```

请记住，`string`必须尊重 JSON 语法。更准确地说，您必须检查是否使用了双引号，分隔符是逗号等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:44:45.050

如果您的字符串包含引号中的数据，并用逗号分隔，则它几乎是有效的 json。就这样做

```
var myparsedarray = JSON.parse("[" + yourstring + "]"); 
```

# single-page-application - 在单页应用程序中保留表单数据值

> ID：16012011
> 
> 赞同：0
> 
> 时间：2013-04-15T09:41:06.213
> 
> 标签：single-page-application, singlepage, durandal

我在使用 durandal 建立的 SPA 中有 2 个视图。我在第一个视图中有一个表格（考虑基本的员工信息表格）。此外，我在视图中有一个名为“上传”的按钮，该按钮路由到不同的视图以上传一些文档。一旦用户完成上传，它会重定向回我的第一个视图，当它这样做时，第一个视图会重新加载（渲染）再次丢失我之前输入的所有值。当我在第二个视图（上传页面）上按下浏览器后退按钮时也是如此。

在这种情况下如何保存数据的任何解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T13:42:32.260

发布代码会更容易一些，但我认为您可能需要存储在 LocalStorage 中输入的内容或其他内容，然后稍后再检索它？

[AmplifyJS](http://amplifyjs.com/)可以使这更容易。

# javascript - Esri Maps：使用 SVG 查看 Esri 地图的框架或控制集

> ID：16012013
> 
> 赞同：1
> 
> 时间：2013-04-15T09:41:09.310
> 
> 标签：javascript, asp.net, .net, svg, esri

是否有任何控件或框架可以以 html5 SVG 格式呈现[esri地图？](http://www.esri.com/)

我更喜欢控件在 asp.net 网络表单中，但纯 javascript 也很有帮助。

提前致谢

# excel - 在公式范围内应用条件限制

> ID：16012015
> 
> 赞同：0
> 
> 时间：2013-04-15T09:41:11.667
> 
> 标签：excel, conditional, range, excel-formula, excel-2010

我必须为图表选择值，一系列值：

```
C7:K7 
```

而且我想知道是否可以为整个范围设置条件，因此当任何值是某个字符时，它都被视为`NA()`.

例如，我们有：

```
'-       56       '-       78'5       12 
```

我希望它被视为：

```
=NA()    56       =NA()    78'5       12 
```

**编辑澄清：**

我想使用一个公式，其中某个范围的某些值被视为原始值的另一个值。这是因为我有一些被认为是 0 ( `'-`) 的值，我想保留这些值，但在公式中指出这些值必须像`=NA()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:46:01.603

我认为您最好使用以下 cel 示例公式创建另一个引用这些单元格的工作表，`A1`并使用这个新范围来绘制图表：

```
=IF(Sheet1!A1="'-",NA(),Sheet1!A1) 
```

我不完全确定这是否可以通过图表构建器/数据属性本身来完成......

# c# - Solr.Net 中的发布方法

> ID：16012016
> 
> 赞同：1
> 
> 时间：2013-04-15T09:41:14.180
> 
> 标签：c#, solr, solrnet

我在我的 C# 应用程序中使用 solr.net。为了得到结果，我在 solr 中使用了以下查询。

```
 solr.Query(query, queryOptions); 
```

问题是，当我们有一个很长的查询然后我们执行这个命令时它会产生错误，因为它正在使用 Get 方法并且在 Get 方法的查询字符串中有一个限制。为什么我们可以使用 Post 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:21:29.123

请参阅此博客文章 - SolrNet 作者的[自定义 SolrNet](http://bugsquash.blogspot.com/2010/12/customizing-solrnet.html)，其中描述了如何创建自定义`PostSolrConnection`类。

# javascript - 将值传递给 Worklight SQL 适配器中的 IN 运算符

> ID：16012017
> 
> 赞同：0
> 
> 时间：2013-04-15T09:41:14.337
> 
> 标签：javascript, sql, ibm-mobilefirst

我已开始在 Worklight 中使用 SQL 适配器，但我不明白如何在调用适配器过程时将值传递给 IN 条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:22:04.337

您将需要使用适配器的 XML 以及实现 JavaScript 来编辑您的问题...此外，请务必[阅读 SQL 适配器培训模块](http://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v506/04_03_SQL_adapter_-_Communicating_with_SQL_database.pdf)。

* * *

您需要做的是让您的函数获取值：

```
function myFunction (value1, value2) { ... } 
```

并且您的 SQL 查询将使用它们，就像这样（作为一个示例，如何将变量传递给任何 SQL 查询，不管它是否包含 IN 条件）：

```
SELECT * FROM person where name='$[value1]' or id=$[value2]; 
```

注意 value1 的引号（文本）和 value2 的引号（数字）。

# emacs - 使用 emacsclient 代替 emacs - 翻译参数

> ID：16012024
> 
> 赞同：2
> 
> 时间：2013-04-15T09:41:50.887
> 
> 标签：emacs, gnus

我目前正在使用一个单独的枪支实例，我开始如下：

```
emacs --name Mail --title Mail --no-desktop --no-splash --funcall gnus 
```

由于 gnus 响应良好，并且我所有其他 emacs 东西都作为 emacsclient 从不同的 emacs 实例运行，我想尝试从 emacsclient 运行 gnus。但我正在努力翻译我使用的命令行选项。我必须设置 windows 名称和标题，因为我使用了很棒的 windows 管理器，并且应该根据窗口名称对窗口进行排序。另外，我想自动启动 gnus。

那么如何翻译上述命令，即 gnus 以 emacsclient 启动，windows 名称和标题设置为 Mail？

```
emacsclient ...??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-25T07:18:43.250

您也可以使用`-F`设置框架列表的参数，并将其与`-e`执行您喜欢的参数组合，因此无需定义任何函数。调用将如下所示：

```
emacsclient -F '((name . "Mail"))' -e '(gnus)' 
```

有关参数的信息，请参阅`(info "(elisp)Frame parameters")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T13:21:03.203

我不确定您是否可以仅使用命令行开关来执行此操作。但是，可以定义一个 elisp 函数来设置一个 gnus 框架，并从 emacsclient 调用这个函数。

尝试将其放入您的 emacs 初始化文件中：

```
(defun my/create-gnus-frame ()
  "Create a new frame running `gnus'."
  (select-frame
   (make-frame '((name . "Mail"))))
  (gnus)) 
```

并从命令行像这样运行 gnus：

```
emacsclient -e '(my/create-gnus-frame)' 
```

并且新创建的框架的 X 属性（通过 获得`xprop`）似乎是正确的：

```
WM_CLASS(STRING) = "Mail", "Emacs"
WM_ICON_NAME(STRING) = "Mail"
WM_NAME(STRING) = "Mail" 
```

# meteor - 为什么不执行脚本标签？

> ID：16012025
> 
> 赞同：6
> 
> 时间：2013-04-15T09:41:50.980
> 
> 标签：meteor

我试图在[Meteor 应用程序中包含 Google Plus One 按钮以进行协作草图绘制](http://gosketch.meteor.com)，但我注意到`script`模板内的标签未执行。

```
<template name="gplus">
    <!-- Place this tag where you want the +1 button to render. -->
    <div class="g-plusone" data-href="{{url}}"></div>

    <!-- Place this tag after the last +1 button tag. -->
    <script type="text/javascript">
        console.log("Google Plus button");
        (function() {
            var po = document.createElement('script');
            po.type = 'text/javascript';
            po.async = true;
            po.src = 'https://apis.google.com/js/plusone.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(po, s);
        })();
    </script>
</template> 
```

我通过将脚本移动到单独的 JavaScript 文件来使按钮工作，但我仍然想知道为什么内联脚本不起作用。

我在控制台上看到了脚本标签，但脚本本身没有运行。Meteor 是如何做到这一点的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T15:01:18.130

Meteor 只是将 gplus 模板的内容插入到 DOM 中，所以当然不会发生任何事情，因为在将元素添加到 DOM 时没有脚本执行。

要解决此问题，您可以创建一个 .js 文件并将其放在客户端文件夹中，Meteor 将自动包含并为您执行（以及在生产中缩小）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-22T09:22:28.447

Here is what I do to load the Google +1 Button in my application:

### 1\. Add the JS library between the `<head>` tag of your application.

```
<head>
  <!-- Load JS Library -->
  <script src="https://apis.google.com/js/platform.js" async="async" defer="defer"></script>
</head> 
```

### 2\. Insert the +1 Button.

```
<template name="myTemplate">
  <div data-href="https://hackisition.com/" data-size="medium" class="g-plusone"></div>
</template> 
```

### 3\. Render the Button.

```
Template.myTemplate.rendered = function() {
  return gapi.plusone.go();
}; 
```

# php - 保护 PHPExcel 背后的公式

> ID：16012028
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:00.813
> 
> 标签：php, security, phpexcel

大家好：D 如何保护 PHPExcel 后面的公式（在 Excel 文档中）？

我正在使用 HTML 表单发布用户输入的值，让 PHP 从 Excel 文档中检索公式并使用该用户输入的值进行计算，然后将计算结果返回给用户。该公式不在 HTML 或 PHP 脚本中，而是在 Excel 文档中。

如何保护 Excel 文档中的公式？我已将 ftp 中 Excel 文档的文件权限设置为 400（Group 和 Public 没有读取、写入、执行权限，Owner 只有读取权限），因此公众无法下载它们。但这种保护就足够了吗？还有其他方法可以读取这些 Excel 文档中的公式吗？

对于那些想知道的人，这个 Excel Docs 中的公式是`=IF(A1>0,"Greater than Zero",IF(A1<0,"Less than Zero","Equals Zero"))`这个公式是我想要保护的，这是我不希望任何人看到的，除了那些当然可以访问服务器的人。

HTML 表单脚本

```
<form action="./FirstInteraction.php" method="post">
Input A1: <input type="number" name="A1">
<input type="submit">
</form> 
```

PHP 脚本：FirstInteraction.php

```
/** Include path **/
set_include_path(get_include_path() . PATH_SEPARATOR . '../Classes/');

/** PHPExcel_IOFactory */
include 'PHPExcel/IOFactory.php';

/** Load Excel File **/
$inputFileName = './TrueFalse.xlsx';
$objPHPExcel = PHPExcel_IOFactory::load($inputFileName);

/** Change A1 Value **/
$objPHPExcel->getActiveSheet()->setCellValue('A1',$_REQUEST["A1"]);

/** Calculate and State B1 Value **/
echo "<br> It is ".$objPHPExcel->getActiveSheet()->getCell('B1')->getCalculatedValue(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:49:36.997

由于没有人可以访问您的 .xlsx 文件，也无法下载它，而且 PHP 脚本仅在服务器端可见，因此不需要任何进一步的安全性。

但是，您对此有何恐惧？您认为他们如何访问您的公式？如果您对任何漏洞利用有一些建议，也许我们可以给出如何修复它的适当建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:51:21.387

保护的意思是什么？如果您的意思是阻止该单元格被编辑，那么：

```
$objPHPExcel->getActiveSheet()->getStyle('B1')->getProtection()->setLocked(
    PHPExcel_Style_Protection::PROTECTION_PROTECTED
);
$objPHPExcel->getActiveSheet()->getProtection()->setSheet(true); 
```

# ruby-on-rails - 如何创建 12 小时（上午/下午）时间选择元素？

> ID：16012035
> 
> 赞同：5
> 
> 时间：2013-04-15T09:42:21.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time, ruby-on-rails-3.2, time-select

我正在使用导轨 3.2.13。我想在下拉列表中显示 12 小时的时钟和上午/下午。似乎很多人都在谈论这个，但没有内置的解决方案。

```
time_select("post", "written_on", {:ampm => true})  # it gives me just two dropdowns. No dropdown for am/pm
f.time_select :written_on, :ampm => true  # same here. No third dropdown for am/pm 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T17:32:54.210

最好将其委托给一个好的客户端 JS 库。以下是我个人为我的客户使用的；这很棒。

[http://amsul.ca/pickadate.js/](http://amsul.ca/pickadate.js/)

# jsf - tomcat7 无法使用 JPA 运行

> ID：16012038
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:29.767
> 
> 标签：jsf, jpa, tomcat7

我正在使用 JSF（使用 JSF Majorra 2.1.6）和 JPA（使用库 EclipseLink Juno）和 tomcat 7 server 开发 Java EE 应用程序。问题是当我将 JPA 应用程序添加到 tomcat 时，Tomcat 无法运行，并且我在控制台末尾有以下消息：

```
 Infos: Cleaned up javabean caches
                       java.lang.OutOfMemoryError: PermGen space
                                              at java.lang.ClassLoader.findBootstrapClass(Native Method)
                                              at java.lang.ClassLoader.findBootstrapClassOrNull(Unknown Source)
                                              at java.lang.ClassLoader.loadClass(Unknown Source)
                                                       at java.lang.ClassLoader.loadClass(Unknown Source)
                   at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
                   at java.lang.ClassLoader.loadClass(Unknown Source)
                   at java.lang.ClassLoader.loadClass(Unknown Source)
                                              at java.lang.Class.forName0(Native Method)
                                                       at java.lang.Class.forName(Unknown Source)
                                              at org.apache.catalina.loader.WebappClassLoader.clearReferencesRmiTargets(WebappClassLoader.java:2556)
                                              at org.apache.catalina.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1961)
                                              at org.apache.catalina.loader.WebappClassLoader.stop(WebappClassLoader.java:1864)
                                              at org.apache.catalina.loader.WebappLoader.stopInternal(WebappLoader.java:658)
                                              at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
                                              at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5509)
                                              at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:225)
                                              at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:153)
                                              at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812)
                                              at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787)
                                              at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607)
                                              at org.apache.catalina.startup.HostConfig.deployDirectory(HostConfig.java:1055)
                                              at org.apache.catalina.startup.HostConfig.deployDirectories(HostConfig.java:978)
                                              at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:472)
                                              at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1322)
                                              at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:311)
                                              at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
                                              at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:89)
                                              at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:379)
                                              at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:324)
                                              at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1041)
                                              at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
                                              at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:12:14.660

看起来你的内存不足了。

您需要增加堆大小或烫发大小。

# tcl - 如何检查 spawn_id 是否存在？(TCL)

> ID：16012040
> 
> 赞同：4
> 
> 时间：2013-04-15T09:42:35.963
> 
> 标签：tcl, expect

我向主机生成了一个 telnet 进程。我发送一个命令，期待一些回报。这会持续一段时间。但是在这种交互之间的某个地方，与主机的连接神秘地丢失了，我的脚本在试图“发送”一些东西到产生的（现在已经死的）telnet 进程时死了。我想编写一个程序，它将生成 id 和要作为参数发送的命令。在我“发送”命令之前，我想检查 spawn id 是否存在（即程序和主机之间的连接是否存在）。否则，我想退出。像这样的东西：

```
proc Send {cmd sid} {
if { $sid is not dead yet } { ;## don't know how to do this
part
send -i $sid "$cmd\r"
} else {
puts "channel id: $sid does not exist anymore. Exiting"
exit
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T16:43:28.627

您可以在发送到死进程时引发`catch`错误，而不是检查生成的进程是否仍然存在：`send`

```
proc Send {cmd sid} {
    if {[catch {send -i $sid "$cmd\r"} err]} {
        puts "error sending to $sid: $err"
        exit
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T16:25:54.817

我之前遇到过这个问题并使用 Mac/Linux`ps`命令来做到这一点：

```
if {[catch {exec ps $pid} std_out] == 0} { 
    puts "Alive"
} else {
    puts "It's dead, Jim"
} 
```

如果您使用的是 Windows，我听说 tlist.exe 命令执行类似的操作，但我没有 Windows 机器来测试它。

# html - 播放放置在 li 标签中的音频文件

> ID：16012041
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:38.040
> 
> 标签：html, html5-audio, tizen

我在 li 标签中使用了音频标签来播放不同的文件。我看不到它们的音频滚动条。为什么会这样？请帮帮我。这是我尝试运行的示例代码

```
 <ul>
            <li>Enduko Emo<audio id="18000">
        <source src="./musicfiles/01._Enduko_Emo.mp3">
            </audio>
            </li>

             <li>Ela Ela<audio id="18001">
        <source src="./musicfiles/02\. Ela Ela.mp3">
            </audio>
           </li>

        </ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T14:25:35.323

您的源代码中似乎没有元素。请将以下元素添加到您的源代码中。再试一次。

```
<head>
    <script src="tizen-web-ui-fw/latest/js/jquery.js"></script>
    <script src="tizen-web-ui-fw/latest/js/tizen-web-ui-fw-libs.js"></script>
    <script src="tizen-web-ui-fw/latest/js/tizen-web-ui-fw.js" data-framework-theme="tizen-white"></script>
</head> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:15:43.653

你在什么浏览器上测试这个？它们并不都支持 MP3。

# c# - 专家 PDF 软件组件

> ID：16012042
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:38.597
> 
> 标签：c#, asp.net, visual-studio-2008

我正在使用 Expert PDF Software Components 使用 ExpertPdf.HtmlToPdf 将 HTML 覆盖到 PDF；但转换后它在PDF文档“专家PDF软件组件演示版”上显示水印

请帮助我如何删除此水印

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:48:42.287

这是因为您使用的组件是评估版。我想您需要购买许可证才能删除水印。如果您已经购买了许可证，但仍有水印，请考虑联系客户支持。

如果您在这里寻求破解解决方案，那么没有人会在这里帮助您破解它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T09:34:24.237

iTextSharp 很好，因为它是唯一一个开源的 PDF 转换器，并且不会在文档中添加水印。此外，它还有一些合理的 API 参考文档。另一种选择是EVO PDF，它也是一个不错的选择，试试看。

# php - 如何从 2 个不同的表 id 中获取列名

> ID：16012044
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:40.120
> 
> 标签：php, select

我有两张桌子，并将它们连接到一张不同的桌子上

```
1 table named 'rec_dept'
id_dept
id_divisi
nama_dept

2 table named 'rec_divisi'
id_divisi
nama_div

3 joined table named 'rec_divdep'
id_divdep
id_divisi
id_dept 
```

如何`nama_dept`在同一个地方获得`id_divisi`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:45:03.300

您可以使用函数进行`SELECT`查询`LEFT JOIN`以获取数据

```
SELECT a.`nama_dept` FROM `rec_dept` a 
LEFT JOIN `rec_divisi` b 
ON a.`id_divisi` = b.`id_divisi` 
ORDER BY a.`id_divisi` ASC 
```

[选择文档](http://dev.mysql.com/doc/refman/5.0/en/select.html)
[LEFT JOIN 文档](http://dev.mysql.com/doc/refman/5.0/en/left-join-optimization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:50:19.000

也许你正在寻找这个：

```
SELECT `nama_dept` FROM `rec_dept` WHERE `id_divisi` IN (SELECT `id_divisi` FROM `rec_divdep`); 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:57:27.767

```
select a.id_dept, a.id_divisi, a.nama_dept, b.id_divisi, b.nama_div, c.id_divdep, c.id_divisi from rec_divdep as c left join rec_divisi as b on (c.id_divisi = b.id_divisi) left join rec_dept as a on (c.id_divisi = a.id_divisi) 
```

你用什么数据库。我将我的代码编码为 mysql，基本上我调整了具有相同 id_divisi 的三个表。我没有测试它，但我很确定基于我所理解的逻辑。

# shell - 使用 && 的多个语句

> ID：16012046
> 
> 赞同：0
> 
> 时间：2013-04-15T09:42:48.157
> 
> 标签：shell, powershell, syntax, cmd

CMD 的等效语句是什么：

```
dir && cd .. 
```

在 Powershell 中？

我试过了：

```
dir -and cd .. 
```

但它会引发错误：

> Get-ChildItem ：找不到与参数名称“和”匹配的参数。
> 
> 在行：1 字符：5
> 
> `+`dir -and (cd ..)
> 
> `+`CategoryInfo : InvalidArgument: (:) [Get-ChildItem], ParameterBindingException
> 
> `+`FullyQualifiedErrorId : NamedParameterNotFound,Microsoft.PowerShell .Commands.GetChildItemCommand

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T17:25:05.457

**PowerShell 中没有 cmd.exe &&**的直接等效项，这意味着“如果左侧成功，则仅执行右侧”。但是，您可以编写一个简短的函数来执行等效操作：

```
function IfTrue([ScriptBlock] $testExpression, [ScriptBlock] $runExpression) {
  if ( & $testExpression ) { & $runExpression }
} 
```

例如：

```
IfTrue { get-childitem "fileThatExists.txt" -ea SilentlyContinue } { "File exists..." } 
```

如果你想让 $testExpression 产生输出，IfTrue 函数可以写成如下：

```
function IfTrue([ScriptBlock] $testExpression, [ScriptBlock] $runExpression) {
  & $testExpression
  if ( $? ) { & $runExpression }
} 
```

账单

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T15:13:59.417

这个怎么样？

```
dir; if ($?) {cd ..} 
```

运行`get-help about_automatic_variables | more`说明：

> 美元？包含上次操作的执行状态。如果最后一个操作成功则包含 TRUE，如果失败则包含 FALSE。

在 PS 中，`dir`只是 ; 的别名`get-ChildItem`。`cd`同样对于`Set-Location`.

**编辑：**[这里](https://stackoverflow.com/questions/563600/can-i-get-to-work-in-powershell)有同样的问题，包括直接从马嘴里得到[的答案。](https://stackoverflow.com/a/573295/1751302)

# asp.net - asp.net 中的 if 子句

> ID：16012047
> 
> 赞同：1
> 
> 时间：2013-04-15T09:42:49.973
> 
> 标签：asp.net, asp.net-mvc-2

我在 ASP.net MVC2 中有一个代码段，如下所示：

```
<% if (Model.EnrollmentNumber.Equals("Global"))
{ %>
  <div id="div1" class="slidingDiv" style="display:none;">
<% }%> 
<% else
{ %>
  <div id="div1" class="slidingDiv" style="display: inline;">                        
<%} %>
<%= Html.TextBoxFor(model => model.EnteredEnrollmentNumber)%>
</div> 
```

也就是说，如果 Model.EnrollmentNum 为“Global”，则隐藏 div。否则，div 是可见的。但是上面的代码有错误。编译器说“元素 div 缺少结束标记”

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:47:20.600

这是因为编译器不理解`<% if`标签，并且看到两个开`<div`一关`</div>`。

您可以忽略它，或者在结束标记周围使用相同的 if 语句：

```
<% if (Model.EnrollmentNumber.Equals("Global"))
{ %>
  </div>
<% }%> 
<% else
{ %>
  </div>
<%} %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:50:58.770

编译器不明白只写了一个div。为什么不使用 asp:Panel 代替？在我看来，这是一个更清洁的解决方案：

```
<asp:Panel ID="div1" cssclass="slidingDiv" Visible='<%# !Model.EnrollmentNumber.Equals("Global") %>'>
<%= Html.TextBoxFor(model => model.EnteredEnrollmentNumber)%>
</asp:Panel> 
```

# ios - 仅为一个 uitableview 设置标题

> ID：16012065
> 
> 赞同：0
> 
> 时间：2013-04-15T09:44:04.147
> 
> 标签：ios, xcode, uitableview

我需要帮助。我三合一`UITableViews`。`UIView`但是，我只希望`UITableView`有一个标题。我怎么能用代码说出来？我已经有以下代码。多谢你们。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {   
    if (tableView == Table1) {
        return @"My Header Text";
    } else if (tableView == Table2) {
        return nil;
    } else if (tableView == Table3) {
        return nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:58:54.960

您提供的代码将**仅为特定部分添加标题视图。**因此，如果您有两个或更多部分，那么您需要编写额外的逻辑来为每个部分设置标题视图。

这是设置`tableHeaderView`单表的简单方法。

```
UILabel *label = [[UILabel alloc]initWithFrame:CGRectZero];
label.text = @"my table header";
table1.tableHeaderView = label; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:50:53.137

如果这不起作用，您也可以尝试为标题的高度返回零：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    if (tableView == Table1) 
    {
        return 50.0; // or what's the height?
    } 
    else
    {
         return 0.0;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:14:04.593

尝试这个

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
NSString *sectionTitle = [self tableView:tableView titleForHeaderInSection:section];
if (sectionTitle == nil) {
return nil;
}
 UILabel *label = [[[UILabel alloc] init] autorelease];
 label.frame = CGRectMake(20, 6, 300, 30);
 label.textColor = [UIColor blackColor];
 label.font = [UIFont boldSystemFontOfSize:16];
 label.text = sectionTitle;

  UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, SectionHeaderHeight)];
  [view addSubview:label];
  return view;
  } 
```

# c# - 表单上的透明背景图像

> ID：16012069
> 
> 赞同：2
> 
> 时间：2013-04-15T09:44:13.350
> 
> 标签：c#, winforms, image, background, transparency

我正在创建一个具有透明背景和粘贴在表单背景中的透明背景图像的 C# WinForms 应用程序。背景图像显示不正确，因为它显示了图像某些部分的绿色背景。当我在应用程序的背景中显示图像而不设置 TransparencyKey 和 BackColor 时，图像会正确显示。

```
BackColor = Color.LimeGreen;
TransparencyKey = Color.LimeGreen;
BackgroundImage = Image.FromFile(@"c:\Temp\cherries.png"); 
```

请看图片： ![图片 vs winform 应用程序](https://i.stack.imgur.com/Sb9fq.png)

# c++ - C++模板类自引用

> ID：16012070
> 
> 赞同：0
> 
> 时间：2013-04-15T09:44:23.450
> 
> 标签：c++, templates, self-reference

我正在尝试创建一个`Info<P,S>`包含指向另一个类型对象的指针的类`Info<S,P>`。我有以下代码。

```
template <class P, class S>
class Info {
….
public:
Info(…, Info<S,P>* parentInfo) : …, parentInfo(parentInfo)
{}
…
private:
Info<S, P> *parentInfo;
};

….

typedef Info<ActualP, ActualS> OneInfo;
typedef Info<ActualS, ActualP> OtherInfo;
…
OtherInfo* parentInfo =…;
OneInfo info(…, parentInfo); 
```

这不是编译并且说构造函数不是有效的（在调用时）。

我想这会在尝试解决时导致无限递归。我对吗？实现这种引用意图的替代方法是`Info<S,P>`什么`Info<P,S>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:28:03.187

使用[typename](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/keyword_typename.htm)来引用依赖于模板参数的类型：

```
template <class T>
class Info
{
    public:
    Info() : parentInfo(NULL) {}

    Info(Info<typename T> *info) :
        parentInfo(info)
    {
    }

    private:
        Info<typename T> *parentInfo;
};

int _tmain(int, _TCHAR**)
{
    Info<int> parent;
    Info<int> child(&parent);
} 
```

# python - 如何使用python向浏览器显示.txt文件内容

> ID：16012071
> 
> 赞同：4
> 
> 时间：2013-04-15T09:44:23.520
> 
> 标签：python

我们有一个`test.py`应该在同一个浏览器中显示一个`.png`文件和文件。`.txt`下面是我的代码：

```
print "Content-type: image/png\n"
print file(r"/var/www/cgi-bin/testpie.png", "rb").read()
myurl = "file://var/www/html/test.txt"

webbrowser.open(myurl) 
```

但我`.png`在浏览器中只得到文件。那么如何使用python在浏览器中显示两者？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:23:19.720

浏览器显示 HTML 文档。HTML 文档可以在`div`, `span`,`p`等标签中包含文本，只需将文本包含在元素中即可。例如，`<div>Hello!</div>`显示文本`Hello`。但它们不直接包含图像；相反，它们包含指向图像的*链接*`src`，作为`img`标签的 。例如，`<img src="http://example.com/foo.png">`显示 foo.png 图像。

所以，有两种方法可以做你想做的事。

* * *

最简单的方法是公开*两个*资源（使用单独的 URL）：(1) PNG 图像，以及 (2) 包含指向 PNG 图像的链接（并直接包含文本）的 HTML 页面。

比如……</p>

testpie_image.py：

```
print "Content-type: image/png\n"
print open(r"/var/www/cgi-bin/testpie.png", "rb").read() 
```

测试派.py：

```
print """Content-type: text/html

<html><head></head><body>
<img src="testpie_image.py" />
<div>{}</div>
</body></html>
""".format(open(r"/var/www/html/test.txt").read()) 
```

现在，如果有人浏览到`http://example.com/cgi-bin/testpie.py`，那将触发您的第二个脚本，因此他们将获得如下 HTML 页面：

```
<html><head></head><body>
<img src="testpie_image.py" />
<div>Blah blah this is my text file.</div>
</body></html> 
```

然后，他们的浏览器将按照该链接指向`http://example.com/cgi-bin/testpie-image.py`，这将触发您的第一个脚本，因此他们将获得 PNG 图像。

* * *

更难的方法是使用一种称为 的特殊 URL 方案[`data:`](https://en.wikipedia.org/wiki/Data_URI_scheme)，它可以让您将数据嵌入内联，就好像它是指向单独资源的链接一样。您必须做更多的工作才能嵌入它，但这意味着您只需要一个 URL 而不是两个：

```
print """Content-type: text/html

<html><head></head><body>
<img src="data:image/png;base64,{}"</img>
<div>{}</div>
</body></html>
""".format(open(r"/var/www/cgi-bin/testpie.png", "rb").read().encode("base64"),
           open(r"/var/www/html/test.txt").read()) 
```

现在，当有人浏览 时`http://example.com/cgi-bin/testpie.py`，他们会得到一个这样的 HTML 页面：

```
<html><head></head><body>
<img src="data:image/png;base64,1Ab…
Z2y" />
<div>Blah blah this is my text file.</div>
</body></html> 
```

* * *

> 嗨，我正在从 html 文件中执行 python 文件，当我在文本框中输入一些关键字并单击提交时，它将执行 python 文件。所以python文件生成两个文件1）.png和2）文本文件。所以我的要求是当我在 html 中单击提交时，立即在网络浏览器中显示 .png 和 .txt 文件。

好的，让我解释一下。

我假设您正在使用连接到传统 CGI 服务器的传统表单提交。当您在 Web 浏览器中单击提交按钮时，这会向构建 HTML 文档的 CGI 脚本发送一个请求。该文档包含文本文件，还包含链接到第二个 CGI 脚本的图像。您的 Web 浏览器通过点击第二个 CGI 的链接自动加载图像，该 CGI 生成并返回 PNG 文件，该文件将被显示。因此，您可以在一个浏览器页面中看到图像和文本。

* * *

最后一件事：您可能不想将文本文件放在 /var/www 层次结构中，如果您使用的是`data:`URL，您可能也不希望将图像文件放在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:46:27.543

如果要显示两种类型的数据，则需要：

*   有两个单独的 HTTP 请求
*   使用一种可以嵌入另一种的数据格式（例如，HTML 代替文本，将 PNG 作为 URI 嵌入`data:`方案）。

您不能同时返回文本文档和 PNG 图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:05:42.090

您可以使用 Python 创建一个包含文本和图像内容的简单 HTML 文件，然后在浏览器中打开该文件。

# jquery - 如何获得通过轮渡和汽车的路线？GMAPS

> ID：16012077
> 
> 赞同：0
> 
> 时间：2013-04-15T09:44:44.417
> 
> 标签：jquery, google-maps-api-3

我目前正在将 gmaps V2 更新到第 3 版。到目前为止，大部分进展都非常好，但我坚持这一点。

我需要一条通过渡轮旅行的路线，但我将旅行模式设置为驾驶。我有一个路线始终使用的航路点，但由于它忽略了大海，它会到达我的航路点并返回一点以使用桥梁在水上行驶。

澄清：用户指定一个城市旅行---->通过标准航路点---->使用渡轮在海上旅行--->继续开车到目的地。

我的问题只是 gmaps 忽略了大海，并在有桥梁的地方找到了路线，而没有。

代码：

```
<asp:PlaceHolder ID="International" runat="server" visible="false">
                /*Ferry is required*/
                viaAddress = document.getElementById('viaAddress').value;
                var noOfPoints = 4;
                var waypoints = new Array(noOfPoints); 
                waypoints[0] = fromAddress;
                if (viaAddress == 'Rostock')
                    waypoints[<%=GetVia(1) %>] = '55.366936,13.151429'; //(Trelleborg - Rostock) 55.372387,13.149916
                else
                    waypoints[<%=GetVia(1) %>] = '55.368844,13.151515';
                waypoints[<%=GetVia(2) %>] = viaAddress;
                waypoints[3] = '<%=GetToAddress() %>';
            </asp:PlaceHolder>

            directionsDisplay = new google.maps.DirectionsRenderer();
            directionsDisplay.setMap(mapdir);

            gdir.route({
            origin: waypoints[0],
            destination: waypoints[3],
            waypoints: [{
            location: waypoints[1]
            }
            ],
            provideRouteAlternatives: false,
            travelMode: google.maps.DirectionsTravelMode.DRIVING
          }, function(result, status) {
            if (status == google.maps.DirectionsStatus.OK) {
              directionsDisplay.setDirections(result);
            }
          });
        } 
```

如果有人问：这不在脚本文件中，我从几年前这样做的经验丰富的开发人员那里“继承”了这个任务，不要问我为什么。

我一直在网上搜索如何做到这一点，但我没有想出任何东西，一直在阅读以下内容，但没有运气：

[https://developers.google.com/maps/documentation/javascript/directions?hl=sv](https://developers.google.com/maps/documentation/javascript/directions?hl=sv) [https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint](https://developers.google.com/maps/documentation/javascript/reference#DirectionsWaypoint)

如果有人有答案，我非常感谢，如果我能得到一些链接，我会很感激，这样我就可以阅读这个。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T00:39:44.733

从[更新日志](https://code.google.com/p/gmaps-api-issues/wiki/JavascriptMapsAPIv3Changelog)

3.16 2014 年 2 月 24 日

补充：距离矩阵和方向服务中的渡轮支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T10:13:08.320

半天后，我终于找到了解决方案！在这里检查：

[http://www.codeproject.com/Answers/579741/How-to-get-a-route-that-travels-over-water.aspx#answer2](http://www.codeproject.com/Answers/579741/How-to-get-a-route-that-travels-over-water.aspx#answer2)

# mysql - 如何计算小数点？

> ID：16012081
> 
> 赞同：2
> 
> 时间：2013-04-15T09:44:54.270
> 
> 标签：mysql, sql, sql-function

正如`round`将向上或向下舍入一样，尽管您可以控制小数点，但它不能在我的情况下使用。

问题是`floor`并且`ceil`不允许控制小数点，在地板的情况下您可以使用`truncate`which will turn: `123.1233`to `123.12`，这基本相同。

但是如果你想转向`123.123`ceil `123.13`。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:36:13.127

尝试：

`FLOOR(100*your_number)/100`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:47:16.087

1.  乘以 100
2.  上限结果
3.  乘以 1.0 得到浮点数
4.  除以 100

# r - 在 R 中运行 multinom() 后如何更改输出

> ID：16012082
> 
> 赞同：0
> 
> 时间：2013-04-15T09:44:55.057
> 
> 标签：r, output, regression, stata

亲爱的 Stackoverflow 社区，

从 nnet 包运行后，R 产生的默认输出`multinom()`仅包括因变量的系数、残差和 Akaike 信息准则。不幸的是，没有关于拟合模型、Wald Chi Square 和伪 R2 的观测数量的任何信息，后者`Stata`在多项 logit 之后提供。之后如何获得这些模型统计信息`multinom`？我对观察的数量、伪 R2 和 Wald-chi2 及其意义特别感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T05:21:55.617

至少要获得 Wald，您应该安装并加载 'car' 包，然后您可以使用 Anova（注意这与小写的 'anova' 不同）。这里有一个工作示例： [http ://www.datavis.ca/courses/VCD/R/output/wlf-glogit.html](http://www.datavis.ca/courses/VCD/R/output/wlf-glogit.html)

# dynamics-crm-2011 - 插件未在订单状态更改时触发

> ID：16012085
> 
> 赞同：0
> 
> 时间：2013-04-15T09:44:59.717
> 
> 标签：dynamics-crm-2011

任何人都知道插件注册但没有启动的`SetState`任何`SetStateDynamicEntity`原因`salesorder`？如果我`Update`针对状态码注册它会正确触发。

我已经尝试在管道中的所有不同阶段注册，iisreset，取消注册/注册但没有成功。还检查了它针对不同实体正确触发这些消息，它确实如此。

检查了 SDK 中的电子表格，它们是`salesorder`. 我知道`orderclose`“幕后”也创建了一项活动，所以不确定在整个订单过程中是否还有其他事情在起作用？

`Update`在这种情况下，我可以通过针对 statecode 属性注册消息来实现我想要的。但是，我想了解这种行为的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:30:00.613

我尝试了一个简单的插件（只是抛出一个`InvalidPluginExecutionException`），实际上如果在`SetState`or上注册，插件不会被触发`SetStateDynamicEntity`。

查看 MSDN 我发现了这个例子：

[示例：履行销售订单](http://msdn.microsoft.com/en-us/library/hh547399.aspx)

它`FulfillSalesOrderRequest`以这种方式使用消息：

```
// Close the sales order with a status of Complete
int newStatus = (int)salesorder_statuscode.Complete;
var request = new FulfillSalesOrderRequest
{
    OrderClose = new OrderClose
    {
        SalesOrderId = new EntityReference 
            { LogicalName = SalesOrder.EntityLogicalName, Id = _salesOrderId.Value }

    },
    Status = new OptionSetValue(newStatus)
}; 
```

并在 FulfillSalesOrderRequest 类的 MSDN 中

[http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.fulfillsalesorderrequest.aspx](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.fulfillsalesorderrequest.aspx)

写着：

> **权限和访问权限**
> 要执行此操作，调用者必须具有对 OrderClose 实体的权限以及对 OrderClose 属性中指定的记录的访问权限。
> 有关所需权限的完整列表，请参阅 FulfillSalesOrder 权限。

在我`Create`为`OrderClose`实体（`Pre-operation`阶段）注册我的插件之后，当我尝试履行订单时它可以工作（向我抛出异常）。

看起来这是拦截订单履行的建议方式（至少来自 MSDN）。

# vim - C语言中如何调用vim脚本

> ID：16012088
> 
> 赞同：0
> 
> 时间：2013-04-15T09:45:14.110
> 
> 标签：vim

# 我的目标是什么：

我想要一个程序为 vim 编辑的每个文件获取 session.vim 和 viminfo.info 文件，并将这些文件 scp 到另一台电脑，然后我可以在另一台电脑上继续工作。

## 问题：

*   也许文件没有保存。
    *   应该在程序生成 session.vim 之前保存文件。
*   如何获取文件的绝对路径。
    *   我只是可以使用 ps -ef | 获取文件名 grep vim。
    *   getcwd() 可以获得当前工作目录。但是，我无法将其推送到我用 C 编写的程序中。

这是我的解决方案，但它不起作用，也许你有更好的解决方案，我需要你的帮助。

杀死所有 vim 进程，并获取每个文件的 session.vim 和 viminfo.info。在我的 C 代码中：

```
system(kill -9 pid);//pid is the pid of vim process. 
```

在我的 .vimrc 文件中：

```
autocmd VimEnter * let s:this_session='.'.expand('%:t').'.vim'
autocmd VimLeave * if v:dying | call Somefunc() | endif
function! Somefunc()
    silent! wa
    execute 'mksession! '.fnameescape(s:this_session)
endfunction 
```

这没用。

我说清楚了吗？我英语说的不好。

我会非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:49:42.390

`man kill`说：

> SIGKILL 9 杀（不能被抓住或忽略）

有了这个`-9`参数，Vim（以及任何其他进程）没有机会对信号做出反应；该进程将被强制终止。尝试`SIGTERM (15)`通过省略`-9`参数发送默认值。请参阅[此处](https://superuser.com/questions/107543/bash-man-page-kill-pid-vs-kill-9-pid)了解更多信息。

# html - 网页中的中心元素 - 边距 0 自动或左 50%？

> ID：16012090
> 
> 赞同：3
> 
> 时间：2013-04-15T09:45:17.277
> 
> 标签：html, css

为了使用 CSS 使父容器中的元素居中，我总是这样做：

```
div.element-to-center { width: ...; margin: 0 auto; } 
```

但我一直觉得这不是正确的做法；总的来说，我对利润率不太有信心。

我知道您可以使用边距`position: fixed;`然后`left:50%; top:50%;`进行计算，以便将元素定位在确切的中心......但这是一个有价值的选择吗？

我的问题是：`margin: 0 auto;`在页面上居中元素是一种很好的技术吗？我可以在其他方面做得更好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:31:17.007

是的，`margin: 0 auto;`是一个很好的技术。

`Left: 50%`需要一个非静态位置，并且它不居中，因为它从总宽度的 50% 开始您的 div，而不考虑 div 本身的长度。

要正确使用 Left，您应该（知道并）将 div 宽度的一半减去该值，其中`CSS3 Calc`：

演示：http: [//jsfiddle.net/r7EwW/](http://jsfiddle.net/r7EwW/)

HTML

```
<div class="auto">Div with margin: 0 auto;</div>
<div class="percentage">Div with Left: 50%;</div>
<div class="percentageDynamic">Div with Left: (50% - half of div's width) </div> 
```

CSS

```
div.auto {
    width: 100px;
    border: 1px solid green;
    margin: 0 auto;    
}

div.percentage {
    width: 100px;
    border: 1px solid red;
    position: relative;
    left: 50%;    
}

div.percentageDynamic {
    width: 100px;
    border: 1px solid green;
    position: relative;
    left: calc(50% - 50px);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:30:14.720

这将取决于您要实施的方案。就我个人而言，我会/一直使用`width:960px; margin:0 auto;`容器主体（如果这是你的问题）。

如果你想在你的主容器中嵌入 div，你必须考虑你知道它将包含什么。如果你能保证内容的大小，那么你可以使用宽度/边距方法，但我发现有时我并不总是知道我想限制容器的大小，在这种情况下，我只需`width:100%; margin:0 1em;`将我在容器的每一侧都有一个边距。

我最近使用的一种方法是我在制作梦幻足球队布局时使用的，其中多个项目都居中对齐，如下所示：

HTML

```
<div class="squad">
    <div>GK</div>
    <br/>
    <div>DF</div>
    <div>DF</div>
    <div>DF</div>
    <div>DF</div>
    <br/>
    <div>MF</div>
    <div>MF</div>
    <div>MF</div>
    <br/>
    <div>ST</div>
    <div>ST</div>
    <div>ST</div>
</div> 
```

CSS

```
.squad {
    width: 320px;
    font-size:0;
    text-align: center;
}

.squad div {
    font-size: 16px;
    display: inline-block;
    width: 40px;
    background-color:red;
    margin:1px 5px;
    text-align:center;
} 
```

就我个人而言，我通常远离，`position:fixed/absolute`因为它们更有可能与其他方式/地方的样式发生冲突。

我认为答案是，这实际上取决于您的场景是什么，您打算在其中放入什么内容以及您对该内容了解多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:57:16.973

我很正常`margin: 0 auto`，这是正确的，`margin: 50%`不是太好。

您也可以尝试类似的方法，它也是正确的：

```
<center>
    <div style="width: 1200px; text-align: left;">
    </div>
</center> 
```

# sql - sql中字符串到数据时间转换的错误

> ID：16012094
> 
> 赞同：1
> 
> 时间：2013-04-15T09:45:23.107
> 
> 标签：sql

我在将字符串（'DD.MM.YYYY' 格式）转换为日期时间（'YYYY-MM-DD' 格式）时遇到问题。你可以看到相关的例子和结果如下：

```
DECLARE @DATE date  
DECLARE @RESULT datetime 
SET @DATE = '12.04.2013' /* DD.MM.YYYY */  
SET @RESULT = CONVERT(datetime,@DATE,104)
SELECT @RESULT 
```

结果是：`2013-12-04 00:00:00.000 in YYYY-MM-DD`

问题是 sql 将 @DATE 变量的日期转换为 @Result 变量的月份。

有什么办法可以纠正这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:48:09.850

试试这样

```
 SELECT convert(datetime, '12.04.2013', 104) 
```

或者

在您的代码中，只需将`datetime`变量类型更改为`varchar(15)`

```
DECLARE @DATE varchar(15)--date

DECLARE @RESULT datetime

 --because in below line if the variable type is datetime than value is get 
 --converted to datetime and consider 12 as month and 04 as day but if the 
 --variable type is  varchar  than this doent happen
SET @DATE = '12.04.2013' --/* DD.MM.YYYY */.

--now this will work as you need 
SET @RESULT = CONVERT(datetime,@DATE,104) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:50:27.877

A`datetime`没有固有的*格式*，它只是一个带值的日期时间。您必须将其转换为`varchar`：

```
DECLARE @RESULT varchar(10)
SET @RESULT = CONVERT(varchar(10),@DATE,126) 
```

[**演示**](http://sqlfiddle.com/#!3/d41d8/12466/0)

# .net - 使用 TPL 限制任务数量

> ID：16012096
> 
> 赞同：1
> 
> 时间：2013-04-15T09:45:27.013
> 
> 标签：.net, task-parallel-library

我正在研究创建需要在多个线程上执行的任务。我可以创建大量任务，例如 2000 个。我想限制同时排队和执行的任务数量。有没有办法创建一定数量的任务，然后在完成时创建新的任务？尝试确定任务调度程序是否对此有所帮助。

编辑：

换一种说法……我是否有理由要限制同时创建/排队/执行的任务数量，因为我可能有一个非常大的数字，例如 2000。任务调度程序是否以最佳方式调度任务，可以'似乎找不到任何关于它如何实际工作的信息......

编辑：

我没有使用 Parallel.Foreach。我决定使用计数器并根据最大数量的计数器和当前的任务数，创建任务或等到不超过最大数量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:37:01.753

如果您想发送 2000 封电子邮件，并且不想阻塞当前线程并且只想使用有限数量的线程，那么我认为您应该使用一个`Task`调用`Parallel.ForEach()`. 就像是：

```
List<Email> emails = …;

var task = Task.Factory.StartNew(() =>
{
    Parallel.ForEach(
        emails,
        new ParallelOptions { MaxDegreeOfParallelism = maxNumberOfThreads },
        email => email.Send());
});

// handle the completion of task here 
```

如果您不知道最佳线程数，那么您将不得不通过实验找到它。TPL 能够合理地猜测 CPU 密集型计算的最佳线程数。但是您的代码不是 CPU 绑定的，而是网络绑定的，这意味着最佳线程数与 CPU 的内核数无关，它取决于网络连接的带宽和延迟（也可能您的邮件服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:42:10.697

在评论中回复问题：

> “我不明确知道有多少核心……”

您可以获得核心数量`Environment.ProcessorCount`并使用它们来设置`MaxDegreeOfParallelism`：

```
ParallelOptions po = new ParallelOptions
{ 
    MaxDegreeOfParallelism = Environment.ProcessorCount
}; 
```

是的，人们可能经常想要限制或调整由并行任务（.NET 线程池）提供的新线程的默认生成。有很多这样的讨论：

*   [Parallel.ForEach 不断产生新线程](https://stackoverflow.com/questions/14039051/parallel-foreach-keeps-spawning-new-threads)
*   [Parallel.Foreach 产生太多线程](https://stackoverflow.com/questions/2002864/parallel-foreach-spawning-way-too-many-threads)
*   等等

# mysql - Mysql 在透视视图中显示数据

> ID：16012098
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:45:29.247
> 
> 标签：mysql, select, pivot, mysql-workbench

抱歉伙计们，由于遇到 sqlfiddle.com 的一些问题，因此无法生成小提琴

我在mysql数据库中有一个表，如下所示：

```
Username    mailtime    mailid
User4   3/23/2013 10:26 4473
User1   4/6/2013 16:13  10934
User4   4/6/2013 17:17  10957
User1   4/6/2013 23:56  11092
User2   4/7/2013 11:58  11187
User1   4/7/2013 12:06  11190
User4   4/7/2013 13:11  11216
User4   4/7/2013 13:14  11217
User1   4/7/2013 14:40  11245
User5   4/7/2013 15:52  11259
User1   4/7/2013 18:12  11303
User5   4/7/2013 19:56  11323
User1   4/7/2013 22:52  11358
User4   4/8/2013 11:13  11465
User1   4/8/2013 11:20  11475
User1   4/8/2013 11:35  11491
User4   4/8/2013 12:10  11511
User4   4/8/2013 12:38  11532
User4   4/8/2013 12:51  11540
User4   4/8/2013 13:06  11551
User1   4/8/2013 13:09  11552
User4   4/8/2013 13:15  11560
User1   4/8/2013 13:24  11572
User1   4/8/2013 14:01  11614
User4   4/8/2013 14:27  11640
User1   4/8/2013 15:41  11700
User5   4/8/2013 16:04  11730
User1   4/8/2013 17:40  11814
User4   4/9/2013 11:16  12117
User1   4/9/2013 12:41  12198
User1   4/9/2013 12:59  12209
User4   4/9/2013 13:58  12243
User4   4/9/2013 14:05  12250
User1   4/9/2013 14:15  12256
User4   4/9/2013 16:51  12351
User1   4/9/2013 17:33  12397
User1   4/9/2013 19:01  12455
User4   4/9/2013 19:15  12463
User5   4/9/2013 20:59  12517
User1   4/9/2013 21:26  12530
User1   4/9/2013 22:46  12561
User1   4/10/2013 1:01  12595
User1   4/10/2013 8:42  12631
User1   4/10/2013 10:18 12663
User1   4/10/2013 11:21 12697
User3   4/10/2013 11:27 12701
User4   4/10/2013 11:34 12705
User1   4/10/2013 15:26 12856
User4   4/10/2013 16:51 12909
User2   4/10/2013 16:53 12913 
```

我需要的输出如下：

```
Username    < 5 days    6-Apr   7-Apr   8-Apr   9-Apr   10-Apr  Grand Total
User1                           
User2                           
User3                           
User4                           
User5                           
Grand Total 
```

不知道该怎么做。

最大邮件时间显示在倒数第 2 列，前几天显示在前一列中，< 5 天是所有其他天数的累积

编辑：：

需要的数据是mailids的计数

< 5 天、6-Apr、7-Apr、8-Apr、9-Apr 和 10-Apr 列是来自 mailtime Column 的列。如果列中的最大日期是 3 月 25 日，则列应小于 5 天、3 月 20 日、3 月 21 日、3 月 22 日、3 月 23 日、3 月 24 日和 3 月 25 日

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:34:49.783

您对所需结果的描述并不完全清楚，但似乎您可以使用以下内容来获得结果。这将获取前 5 天中每个用户名的总行数（基于最大日期）以及在这 5 天期间之前每个用户的总行数：

```
select 
  coalesce(username, 'Grand Total') username,
  max(`< 5 days`) `< 5 days`,
  sum(case when maildate = '6-Apr' then 1 else 0 end) `6-Apr`,
  sum(case when maildate = '7-Apr' then 1 else 0 end) `7-Apr`,
  sum(case when maildate = '8-Apr' then 1 else 0 end) `8-Apr`,
  sum(case when maildate = '9-Apr' then 1 else 0 end) `9-Apr`,
  sum(case when maildate = '10-Apr' then 1 else 0 end) `10-Apr`,
  count(*) GrandTotal
from
(
  select c.username,
    date_format(c.mailtime, '%e-%b') maildate,
    coalesce(o.`< 5 days`, 0) `< 5 days`
  from yt c
  left join
  (
    select username,
      count(*) `< 5 days`
    from yt
    where mailtime <= (select date_sub(max(mailtime), interval 4 DAY)
                        from yt)
  ) o
    on c.username = o.username
  where c.mailtime >= (select date_sub(max(mailtime), interval 4 DAY)
                          from yt)
) d
group by username with rollup; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!8/71b7b/32)。

我编写了一个硬编码版本，因此您可以看到代码是如何编写的，但是如果您基于数据，`max(mailtime)`那么您很可能希望使用动态 SQL 来获得结果。您可以使用准备好的语句来生成将要执行的 SQL 字符串：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'sum(CASE WHEN maildate = ''',
      date_format(mailtime, '%e-%b'),
      ''' THEN 1 else 0 END) AS `',
      date_format(mailtime, '%e-%b'), '`'
    )
  ) INTO @sql
FROM yt
WHERE mailtime >= (select date_sub(max(mailtime), interval 4 DAY)
                   from yt);

SET @sql 
  = CONCAT('SELECT coalesce(username, ''Grand Total'') username,
              max(`< 5 days`) `< 5 days`, ', @sql, ' ,
              count(*) GrandTotal
            from
            (
              select c.username,
                date_format(c.mailtime, ''%e-%b'') maildate,
                coalesce(o.`< 5 days`, 0) `< 5 days`
              from yt c
              left join
              (
                select username,
                  count(*) `< 5 days`
                from yt
                where mailtime <= (select date_sub(max(mailtime), interval 4 DAY)
                                    from yt)
              ) o
                on c.username = o.username
              where c.mailtime >= (select date_sub(max(mailtime), interval 4 DAY)
                                      from yt)
            ) d
            group by username with rollup ');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!8/71b7b/40)。两个查询都给出了结果：

```
|    USERNAME | < 5 DAYS | 6-APR | 7-APR | 8-APR | 9-APR | 10-APR | GRANDTOTAL |
--------------------------------------------------------------------------------
|       User1 |        0 |     1 |     4 |     7 |     7 |      5 |         24 |
|       User2 |        0 |     0 |     1 |     0 |     0 |      1 |          2 |
|       User3 |        0 |     0 |     0 |     0 |     0 |      1 |          1 |
|       User4 |        2 |     1 |     2 |     7 |     5 |      2 |         17 |
|       User5 |        0 |     0 |     2 |     1 |     1 |      0 |          4 |
| Grand Total |        2 |     2 |     9 |    15 |    13 |      9 |         48 | 
```

如果这不是您想要的结果，那么您将不得不进一步解释您的需求。

# c - 调用具有可变参数计数的 C 函数

> ID：16012108
> 
> 赞同：0
> 
> 时间：2013-04-15T09:45:52.660
> 
> 标签：c, printf, variadic-functions

如何重写以下代码块？我需要通过函数 token() 提取一些参数，然后使用这些参数调用 printf。参数数量未知。

```
char *S[32]; int i=0;
while (t) {
    char *s=token(&t, lineno, 0);
    assert(i<sizeof(S)/sizeof(S[0]));
    S[i++]=s;
}
printf(f, S[0], S[1], S[2], S[3], S[4], S[5], S[6], S[7], S[8], S[9],
     S[10], S[11], S[12], S[13], S[14], S[15], S[16], S[17], S[18], S[19],
     S[20], S[21], S[22], S[23], S[24], S[25], S[26], S[27], S[28], S[29],
     S[30], S[31]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:03:23.270

这些参数是否要从命令行中获取？如果是这样，那么利用`argc`and `argv`:`main (int argc, char *argv[])`并将它们传递给一个函数以根据需要解析它们，消除对标记化的需要并将处理多个变量参数:)

**附录：** 用于从文件中读取参数：

我有几个 C 答案给你，取决于你希望如何实现它们，第二个示例代码只是直接读取和转储，第一次读取然后标记化转储 9你可以不同地使用它们这只是一个快速演示展示如何对文件中的 args 进行标记:)：

```
#include "stdio.h"
#include "stdlib.h"
#include "string.h"

int main()
{
    FILE *f;
    int sizerValue = 1024;
    char s1[sizerValue],*p;
    f = fopen("testFile.txt", "r");
    while (fgets(s1, sizerValue, f))
    {
    while (fgets(s1, sizerValue, f))
    {
        p=strtok(s1, ";n");
        do
        {
             printf ("%sn",p);
        }
        while(p=strtok(NULL,";n"));
        }
    }
return 0;
}       

#include <stdio.h>
#define BLOCK   1024

int main() {
    FILE *f=fopen("TestFile.txt","r");
    int size;
    char buffer[BLOCK];
    while((size=fread(buffer,BLOCK,sizeof(char),f)>0)
            fwrite(buffer,size,sizeof(char),stdout);
    fclose(f);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:49:21.590

我认为您应该使用 vprintf ： [cplusplus.com 上的 vprintf 参考](http://www.cplusplus.com/reference/cstdio/vprintf/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:50:17.453

`array[] = { aPointer,aPointer,...,NULL}`

# java - 将一组 Mats 传递给本机代码

> ID：16012115
> 
> 赞同：6
> 
> 时间：2013-04-15T09:46:08.860
> 
> 标签：java, android, opencv, java-native-interface

我要使用的本机函数需要一个 7 `Mat`s 的数组：

```
static int nativeCode(cv::Mat &inputImg, cv::Mat bufImgs[7]); 
```

在`jni_part`我有：

```
Mat& mRgba = *(Mat*)inRgba;
Mat& bufImgs[7] = *(Mat*)inBufImgs;
nativeCode(mRgba,bufImgs); 
```

在我的 Java 代码中，我声明了我的字段：

```
private Mat mRgba;
private Mat[] bufImgs = new Mat[7]; 
```

我可以调用`getNativeObjAddr`，`mRgba`但是如何为数组做等效的操作？

一些背景：

我正在使用 OpenCV，用相机进行实时图像处理。我在每一帧上调用的函数都需要一些额外的对象。为了防止每帧创建和销毁这些对象，我想创建一次，每次只传递引用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T18:41:02.797

您必须将 Java 对象引用数组转换为`cv::Mat`. 由于您有一种方法可以获取本机对象的地址，所以这很简单。您在 java 端创建一个本机方法：

```
public class MyClass {
    private Mat mRgba;
    private Mat[] bufImgs = new Mat[7];

    // set the fields and all...
    // ...

    // Call the native method
    private native int callNativeCode();
} 
```

然后在 C/C++ 端，你可以`callNativeCode`这样实现：

```
JNIEXPORT jint JNICALL Java_MyClass_callNativeCode(::JNIEnv* env, jobject thisobject)
{
    // Find the required classes
    jclass thisclass = env->GetObjectClass(thisobject);
    jclass matclass = env->FindClass("org/opencv/core/Mat");

    // Get methods and fields
    jmethodID getPtrMethod = env->GetMethodID(matclass, "getNativeObjAddr", "()J");
    jfieldID mrgbafieldid = env->GetFieldID(thisclass, "mRgba", "Lorg/opencv/core/Mat;");
    jfieldID bufimgsfieldid = env->GetFieldID(thisclass, "bufImgs", "[Lorg/opencv/core/Mat;");

    // Let's start: Get the fields
    jobject mrgba = env->GetObjectField(thisobject, mrgbafieldid);
    jobjectArray bufimgsArray = (jobjectArray)env->GetObjectField(thisobject, bufimgsfieldid);

    // Convert the array
    cv::Mat nativeBufImgs[7];
    for (int i = 0; i < 7; i++)
        nativeBufImgs[i] = *(cv::Mat*)env->CallLongMethod(env->GetObjectArrayElement(bufimgsArray, i), getPtrMethod);

    // Get the address for mRgba
    cv::Mat* mrgbaptr = (cv::Mat*)env->CallLongMethod(mrgba, getPtrMethod);

    // We're done! Call the method and return!
    return nativeCode(mrgbaptr, nativeBufImgs);
} 
```

# dojo - 使用 TextArea 编辑器在 InlineEditBox 中阻止空格键

> ID：16012117
> 
> 赞同：0
> 
> 时间：2013-04-15T09:46:11.583
> 
> 标签：dojo, inlineeditbox

我有一个定制的 DOJO 小部件和模板，它使用 dijit.form.Textarea 呈现一个 InlineEditBox(dijit.form)。InlineEditBox 本身包装在 TabController (dijit.layout) 的 ContentPane 下。

大多数工作=> TabContainer 被渲染， ContentPanes 被渲染。

InlineEditBox 也似乎使用默认手写符号 (noValueIndicator) 呈现。当我单击时，我得到一个 TextArea，我可以在其中输入所有字符，但空格键（至少在我尝试过的常见字符中）。似乎，一些按键事件处理程序阻止了空格键按下。值得注意的是，TextBox 层次结构小部件（作为 InlineEditBox 中的编辑器小部件）似乎正在响应空格键，但 html 文本区域渲染小部件（尝试过 TextArea、SimpleTextArea）只是忽略空格键。不知道是谁在阻止空格键。

无法在网上看到与该问题相关的任何内容。将不胜感激任何帮助。

代码片段：

```
<div class="tab_container" dojoType="dijit.layout.TabContainer" doLayout="false" controllerWidget="dijit.layout.TabController">
    <div dojoType="dijit.layout.ContentPane" class="tab_one" title="ONE"></div>
    <div dojoType="dijit.layout.ContentPane" class="tab_two" title="TWO"></div>
    <div dojoType="dijit.layout.ContentPane" class="tab_three" title="THREE">
        <div dojoType="dijit.InlineEditBox" class="inline_edit_box" editor="dijit.form.Textarea"></div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:20:55.937

原来是内部问题。

在另一段代码中有一个空格键阻止程序。

谢谢！

# c# - 获取所有正在运行的 .Net（非 Java）应用程序

> ID：16012118
> 
> 赞同：1
> 
> 时间：2013-04-15T09:46:12.707
> 
> 标签：c#, hook

我在下面使用了这段代码，我得到了在窗口中运行的所有应用程序。

现在我只想获取.Net (.exe) 的应用程序。你能帮助我吗？

```
public Form1()
{
    InitializeComponent();
    EnumWindows(new WindowEnumCallback(this.AddWnd), 0);
}

public delegate bool WindowEnumCallback(int hwnd, int lparam);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool EnumWindows(WindowEnumCallback lpEnumFunc, int lParam);

[DllImport("user32.dll")]
public static extern void GetWindowText(int h, StringBuilder s, int nMaxCount);

[DllImport("user32.dll")]
public static extern bool IsWindowVisible(int h);

private List<string> Windows = new List<string>();
private bool AddWnd(int hwnd, int lparam)
{
    if (IsWindowVisible(hwnd))
    {
        StringBuilder sb = new StringBuilder(255);
        GetWindowText(hwnd, sb, sb.Capacity);
        Windows.Add(sb.ToString());
        txtTest.Text += hwnd.ToString()+" ";
        lst.Items.Add(sb.ToString());
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:05:22.273

您可以使用如下方法以及 P/Invoke 函数`GetFileVersion()`：

```
[DllImport("mscoree.dll", CharSet = CharSet.Unicode)]
private static extern int GetFileVersion(string path, StringBuilder buffer, int buflen, out int written);

public static bool IsDotNetExecutable(string path)
{
    StringBuilder sBuilder = new StringBuilder(256);
    int written;
    int gvf = GetFileVersion(path, sBuilder, sBuilder.Capacity, out written);

    return gvf == 0;
} 
```

该函数在失败时不会抛出异常。0 以外的返回值表示发生错误并且可执行文件不是 .Net 程序集。因此`IsDotNetExecutable`上面的方法返回`true`或`false`相应地返回。

# mysql - 依赖于多个表的可更新视图

> ID：16012119
> 
> 赞同：2
> 
> 时间：2013-04-15T09:46:15.720
> 
> 标签：mysql, sql, join, view

我`Updateable View`在[MySQL](http://dev.mysql.com/doc/refman/5.5/en/view-updatability.html)中阅读：

> 更具体地说，如果视图包含以下任何内容，则它是不可更新的： ....
> 
> *某些*联接（请参阅本节后面的附加联接讨论）

在那之后：

> 假设可以使用 MERGE 算法对其进行处理，多表视图有时可能是可更新的。为此，视图必须使用内部联接（不是外部联接或 UNION）。

但是没有明确的例子，我没有成功更新我创建的涉及`NATURAL JOIN`.

`multi-tables`依赖于可更新的视图的示例是什么？什么时候不？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T11:03:30.470

示例表架构

```
CREATE TABLE customers(customer_id INT, `name` VARCHAR(32));
CREATE TABLE orders(order_id INT, customer_id INT, order_date DATE); 
```

风景

```
CREATE VIEW vw_orders AS 
SELECT order_id, o.customer_id order_customer_id, c.customer_id, c.name customer_name, order_date
  FROM orders o INNER JOIN 
       customers c ON o.customer_id = c.customer_id; 
```

然后你可以像这样插入

```
INSERT INTO vw_orders (customer_id, customer_name) VALUES (1, 'Customer1');
INSERT INTO vw_orders (order_id, order_customer_id, order_date) VALUES (1, 1, CURDATE()); 
```

或更新

```
UPDATE vw_orders SET customer_name = 'Customer11' WHERE customer_id = 1; 
```

*注意：您将无法使用单个语句在两个基础表中插入或更新值*

这个说法

```
INSERT INTO vw_orders (customer_id, customer_name, order_id, order_customer_id, order_date) 
VALUES (2, 'Customer2', 2, 2, CURDATE()); 
```

将因错误而失败

```
Can not modify more than one base table through a join view 'vw_orders' 
```

# php - 获取对象值

> ID：16012123
> 
> 赞同：0
> 
> 时间：2013-04-15T09:46:28.127
> 
> 标签：php, javascript, arrays, object

所以我有一个看起来像这样的对象：

```
Object
    maddiekeller: Object
    rickbross: Object
        firstname:"Rick"
        lastname:"Bross"
        firstname:"1234 Fictional Drive"
        ...
    __proto__: Object 
```

我可以通过说：

```
alert(potentialmodels.rickbross.firstname);
//Alerts "Rick" 
```

现在如何将所有模型中的所有名字存储在一个数组中？当它们都有不同的名字时，我可以遍历它们吗？

```
potentialmodels.*differentfirstname*.firstname 
```

这是我生成对象的方式：

```
$result = mysql_query("SELECT * FROM `potentials`") or die(mysql_error());
$rows = array();

//retrieve and print every record
while($r = mysql_fetch_assoc($result)){
    $rows[strtolower($r['firstname'].$r['lastname'])] = $r;
}

$myJSON =  json_encode($rows); 
```

和我的 JavaScript：

```
var potentialModels = <?php print($myJSON); ?>;
console.log(potentialModels);
console.log(potentialModels.rickbross.firstname); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:55:22.260

将您的对象重新组织为数值数组：

```
$result = mysql_query("SELECT * FROM `potentials`") or die(mysql_error());
$rows = array();

//retrieve and print every record
while($r = mysql_fetch_assoc($result)){
    $rows[] = $r; // numeric array
}

$myJSON =  json_encode($rows); 
```

将名字作为数组获取：

```
var result = JSON.parse(yourJSONstring);
var firstnames = [];
for (var i = 0; i < result.length; i++) {
    firstnames.push(result[i].firstname);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:05:52.443

您可以使用[Object.keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)获取模型数组，并且可以使用[Array.prototype.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)从中获取模型名称数组。

例子：

```
var potentialmodels = {
    "maddiekeller": {
        "firstname":"Maddie",
        "lastname":"Keller"
        },
    "rickbross": {
        "firstname":"Rick",
        "lastname":"Bross"
    }
}

var nameArray = Object.keys(potentialmodels).map(function(model) {
                            return potentialmodels[model].firstname
                        });

// nameArray = ["Maddie", "Rick"] 
```

jsFiddle 示例：http: [//jsfiddle.net/cgqxe/](http://jsfiddle.net/cgqxe/)

# selenium - Android webDriver selenium 测试无法在模拟器上运行，但在真实设备上运行良好

> ID：16012124
> 
> 赞同：1
> 
> 时间：2013-04-15T09:46:30.583
> 
> 标签：selenium, android-emulator, webdriver

在测试执行时遇到不同类型的错误，

1)`NosuchelementFound`

2)`Could not locate the element`

3)`NullPointerException, etc.,`

是否有任何修复或仍然存在问题？

# ios - Xcode：当应用程序在后台超过 5 分钟时，转到情节提要中的第一页？

> ID：16012125
> 
> 赞同：2
> 
> 时间：2013-04-15T09:46:33.410
> 
> 标签：ios, xcode, background, storyboard, execute

我正在 Xcode 中尝试我的第一个应用程序......并且有一个关于使用故事板的问题：

我有：-Tab Bar Controller（第一个）与两个导航控制器连接......在每个导航控制器都是一个视图控制器之后......

问题：如果我的应用程序在后台运行的时间超过 5 分钟，我的应用程序是否有可能（可能使用 applicationWillEnterForeground）切换到这些视图控制器之一？...或者它再次从我的应用程序中的“第一个”视图开始？因为如果用户用他的手机移动，我想重新加载我的位置查找器。

尝试了我在“applicationDidEnterBackground”（在 AppDelegate.m 中）中在网上找到的一些代码，但无法使其正常工作:(

（或者我应该/我可以从每个视图到“第一个视图”并在我的“applicationWillEnterForeground”中调用它吗？）

希望我能解释一下你理解我的问题；）

最好的问候格哈德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:59:29.917

If what you need to do is change the selected view controller of your tabBarController you can achieve it putting this code in your `applicationWillEnterForeground:` method

```
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
tabBarController.selectedIndex = 0; 
```

**EDIT**

If you want to go back to the first controller in your navigation stack you can do it like this:

```
UINavigationController *navController = [tabBarController.viewControllers objectAtIndex:0];
[navController popToRootViewControllerAnimated:YES]; 
```

# windows-phone-7 - 是否可以在后台在 Windows Phone 中运行应用程序？

> ID：16012135
> 
> 赞同：1
> 
> 时间：2013-04-15T09:47:10.867
> 
> 标签：windows-phone-7, background, windows-phone-8, windows-phone

是否可以在后台在 Windows Phone 中运行应用程序？

我想将聊天应用程序从 Android 移植到 Windows Phone，这需要具有持久的 Internet 连接，因此用户不需要保持该应用程序处于打开状态。当应用程序收到消息时 - 需要显示通知。

在 Android 上，连接逻辑位于 中`Service`，但我没有找到 Windows Phone 的类似物。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:26:35.503

[后台代理](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942(v=vs.105).aspx)和[后台服务](http://weblogs.asp.net/jgalloway/archive/2011/11/23/leveraging-background-services-and-agents-in-windows-phone-7-mango.aspx)- 这就是您所需要的。

> 计划任务和后台代理允许应用程序在后台执行代码，即使应用程序没有在前台运行。不同类型的计划任务是针对不同类型的后台处理场景而设计的，因此具有不同的行为和约束。本主题介绍计划任务的计划、持续时间和限制。

您还需要检查[有关 WP Toast Notification 的 SO 问题](https://stackoverflow.com/questions/15209535/toast-notification-when-app-is-not-running)

希望它的帮助。

# qt - Qwt 示波器示例结合 qextserialport

> ID：16012136
> 
> 赞同：1
> 
> 时间：2013-04-15T09:47:13.497
> 
> 标签：qt, qwt, qextserialport

我正在研究 qwt 和 qextserialport 示例。到目前为止，我以示波器为例并添加了打开和配置端口的行。当我编译代码编译器给出以下错误。这是编译器输出：

```
12:21:41: Running build steps for project oscilloscope...
12:21:41: Configuration unchanged, skipping qmake step.
12:21:41: Starting: "C:\QtSDK\mingw\bin\mingw32-make.exe" 
C:/QtSDK/mingw/bin/mingw32-make.exe -f Makefile.Debug all
mingw32-make.exe[1]: Entering directory `C:/Users/Edgaras/Downloads/qwt-6.0.0-rc5/examples/oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug'
compiling ../oscilloscope/main.cpp 
linking ..\..\examples\bin\oscilloscope.exe 
mingw32-make.exe[1]: Leaving directory `C:/Users/Edgaras/Downloads/qwt-6.0.0-rc5/examples/oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug'
./debug\main.o: In function `Z5qMainiPPc':
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:33: undefined reference to `QextSerialPort::QextSerialPort(QString const&, QextSerialPort::QueryMode, QObject*)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:42: undefined reference to `QextSerialPort::setBaudRate(BaudRateType)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:43: undefined reference to `QextSerialPort::setQueryMode(QextSerialPort::QueryMode)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:44: undefined reference to `QextSerialPort::setFlowControl(FlowType)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:45: undefined reference to `QextSerialPort::setParity(ParityType)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:46: undefined reference to `QextSerialPort::setDataBits(DataBitsType)'
C:\Users\Edgaras\Downloads\qwt-6.0.0-rc5\examples\oscilloscope-build-desktop-Qt_4_8_1_for_Desktop_-_MinGW__Qt_SDK__Debug/../oscilloscope/main.cpp:47: undefined reference to `QextSerialPort::setStopBits(StopBitsType)'
collect2: ld returned 1 exit status
mingw32-make.exe[1]: *** [..\..\examples\bin\oscilloscope.exe] Error 1
mingw32-make.exe: *** [debug-all] Error 2
12:21:43: The process "C:\QtSDK\mingw\bin\mingw32-make.exe" exited with code 2.
Error while building project oscilloscope (target: Desktop)
When executing build step 'Make' 
```

这是我的代码：

示波器.pri

```
include( C:\DIR\qwt-6.0.0-rc5\examples\examples.pri )
include(C:\DIR\qextserialport-1.2rc\qextserialport-1.2rc\src\qextserialport.pri) 
```

主文件

```
int main(int argc, char **argv)
{
    QApplication app(argc, argv);

    MainWindow window;
    window.resize(800,400);

    SamplingThread samplingThread;
    samplingThread.setFrequency(window.frequency());
    samplingThread.setAmplitude(window.amplitude());
    samplingThread.setInterval(window.signalInterval());

    window.connect(&window, SIGNAL(frequencyChanged(double)),
        &samplingThread, SLOT(setFrequency(double)));
    window.connect(&window, SIGNAL(amplitudeChanged(double)),
        &samplingThread, SLOT(setAmplitude(double)));
    window.connect(&window, SIGNAL(signalIntervalChanged(double)),
        &samplingThread, SLOT(setInterval(double)));

    window.show();

    samplingThread.start();
    window.start();

    bool ok = app.exec(); 

   QextSerialPort* port = new QextSerialPort("COM11"); //we create the port
    port->open(QIODevice::ReadWrite); //we open the port

        if(!port->isOpen())
         {
            //QMessageBox::warning(this, "port error", "Impossible to open the port!");
         }

    //we set the port properties
    port->setBaudRate((BaudRateType)460800);          //modify the port settings on your own
    port->setQueryMode(QextSerialPort::EventDriven);
    port->setFlowControl(FLOW_OFF);
    port->setParity(PAR_NONE);
    port->setDataBits(DATA_8);
    port->setStopBits(STOP_1);
   // port->setTimeout(500);

    samplingThread.stop();
    samplingThread.wait(1000);

    return ok; 
```

如果有人可以提供帮助，我会很感激，我不知道出了什么问题..

最好的问候埃德加拉斯

# timestamp - 将 unix 时间戳转换为 H2 时间戳

> ID：16012138
> 
> 赞同：9
> 
> 时间：2013-04-15T09:47:17.370
> 
> 标签：timestamp, h2

如何将 unix 时间戳值转换`1348560343598`为 H2 `Timestamp`？

我的一个表在一列中包含这些 un​​ix 时间戳，`BIGINT(19)`我需要将它们转换为一列类型`TIMESTAMP`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T10:29:43.240

好的，使用以下公式有效：

```
select DATEADD('SECOND', 1348560343, DATE '1970-01-01') 
```

只要记住将时间戳除以 1000。使用`'MILLISECOND'`不起作用，你会得到`Numeric value out of range`.

# hash - PHP中的快速哈希函数而不关心安全性

> ID：16012141
> 
> 赞同：0
> 
> 时间：2013-04-15T09:47:30.220
> 
> 标签：hash, md5

我正在寻找我将在我的 web 应用程序内部使用的快速哈希函数。它不需要是安全的（例如，我不在乎可能的攻击者是否可以找到具有相同哈希的消息）。

它只需要快速且明显抗碰撞。目前看来 MD5 将是最好的方法（请参阅 stackoverflow 线程[计算 MD5 哈希的 CPU 密集程度是否低于 SHA 系列函数？](https://stackoverflow.com/questions/2722943/is-calculating-an-md5-hash-less-cpu-intensive-than-sha-1-or-sha-2)）。或者有没有人遇到过类似的问题并且知道更好的哈希算法？

**更新**

抱歉，我想我应该更仔细地看一下：[寻找一个快速的哈希函数](https://stackoverflow.com/questions/2575787/looking-for-a-fast-hash-function)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-18T10:40:10.603

如果您正在寻找快速且低冲突的哈希函数。Murmur3 哈希将是要走的路。[您可以在此处](https://code.google.com/p/smhasher/source/browse/#svn/branches/chandlerc_dev%253Fstate%253Dclosed)获取 c++ 副本。

[这里](https://github.com/taskaz/labloom/blob/master/murmur3.php)的许多 php 实现之一。

评论： http: [//www.strchr.com/hash_functions](http://www.strchr.com/hash_functions)

# android - 如何检查服务是否正在运行

> ID：16012142
> 
> 赞同：6
> 
> 时间：2013-04-15T09:47:31.053
> 
> 标签：android

我想显示服务状态，如果它正在运行或停止。我正在使用下面的代码，但它在开始服务之前显示“已停止”。当服务启动时，它显示“正在运行”。当它再次停止时，它只显示“正在运行”。我在设置 sharedPreference 状态时是否犯了任何错误。在 mainActivity

```
 onCreate()
  {
   checkServiceStatus() ;
  }

  private void checkServiceStatus() 
{
    Toast.makeText(getApplicationContext(),"in enableControls", Toast.LENGTH_LONG).show();
    boolean isServiceRunning = AppSettings.getServiceRunning(this);     
    if (isServiceRunning)
    {
        Toast.makeText(getApplicationContext(),"service running", Toast.LENGTH_LONG).show();    
    } 
    else 
    {   
        Toast.makeText(getApplicationContext(),"service stopped", Toast.LENGTH_LONG).show();        
    }
}

  public class AppSettings 
  {
 public static final String SERVICE_STATE = "isServiceRunning";
 public static boolean getServiceRunning(Context context){
         SharedPreferences pref = context.getSharedPreferences(GPSLOGGER_PREF_NAME, 0);

         return pref.getBoolean(SERVICE_STATE, false);
 }

 public static void setServiceRunning(Context context, boolean isRunning){
         SharedPreferences pref = context.getSharedPreferences(GPSLOGGER_PREF_NAME, 0);
         SharedPreferences.Editor editor = pref.edit();

         editor.putBoolean(SERVICE_STATE, isRunning);
         editor.commit();
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T10:53:05.810

```
public class Receiver extends BroadcastReceiver {       
    @Override
    public void onReceive(Context context, Intent intent) {    
        ActivityManager manager = (ActivityManager) context.getSystemService(Context.ACTIVITY_SERVICE);
        for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
            if (YourService.class.getName().equals(service.service.getClassName())) {
                //your service is running
            }
        }
        //your service is not running
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T10:59:30.397

```
 ActivityManager manager = (ActivityManager)context.   getSystemService(Context.ACTIVITY_SERVICE);//use context received in broadcastreceiver

for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE))
 {

     if (MyService.class.getName().equals(service.service.getClassName())) {
                         //running 
        }
    else{
          //not running 
        }

 } 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-04-15T10:03:28.117

```
 public static boolean CheckServiceConnectivity(Context mContext) 
     {
        ConnectivityManager connec = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);

        if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED)
            return true;

        return false;

    } 
```

# mysql - MySQL中的嵌套select语句

> ID：16012143
> 
> 赞同：0
> 
> 时间：2013-04-15T09:47:37.437
> 
> 标签：mysql, database, jdbc

我是关系数据库的新手......我想列出同一个数据库中许多表中的所有数据。

我有一个包含其他表名称的表。像这样：

```
mysql> select * from CarKeys;

+-------+
| Name  |
+-------+
| Audi  |
| Honda |
+-------+

mysql> select * from Audi;

+-------+---------+--------+
| Model | NumDoor | Colour |
+-------+---------+--------+
| A4    | 4       | White  |
+-------+---------+--------+

mysql> select * from Honda;
+------------+---------+--------+
| Model      | NumDoor | Colour |
+------------+---------+--------+
| Civic      | 4       | White  |
| Civic      | 4       | White  |
| HomdaModel | 5       | Red    |
+------------+---------+--------+ 
```

`select * from Honda`但现在，我不想单独打电话`select * from Audi`。我想要一个命令将`select * from`所有表命名为`CarKeys`表

我试过这个：
`SELECT * FROM (SELECT * FROM CarKeys);`

但我收到一条错误消息：
`ERROR 1248 (42000): Every derived table must have its own alias`

如何获取此数据库中所有表的所有信息？我正在使用的模式的名称是`WebApp`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:00:57.793

this tables are haven't good relation, you can try:

```
SELECT * FROM Audi
UNION
SELECT * FROM Honda 
```

Result:

```
+------------+---------+--------+
| Model      | NumDoor | Colour |
+------------+---------+--------+
| A4         | 4       | White  |
| Civic      | 4       | White  |
| Civic      | 4       | White  |
| HomdaModel | 5       | Red    |
+------------+---------+--------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:50:32.033

您的 SQL 设计存在大问题。你不应该这样称呼桌子。为什么不为所有汽车创建一个表并添加一个引用包含名称的表的列？

```
+-------+-------+
| ID    | Name  |
+-------+-------+
| 1     | Audi  |
| 2     | Honda |
+-------+-------+

+------------+---------+--------+--------+
| Model      | NumDoor | Colour | Brand  |
+------------+---------+--------+--------+
| Civic      | 4       | White  | 2      |
| A4         | 4       | White  | 1      |
| Civic      | 4       | White  | 2      |
| HomdaModel | 5       | Red    | 2      |
+------------+---------+--------+--------+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:55:49.070

您必须使用**存储过程**。

使用**循环**，将其过度`Carkeys.Name`存储在`variable (v1)`

现在使用**[Prepared Statement执行](https://stackoverflow.com/questions/190776/how-to-have-dynamic-sql-in-mysql-stored-procedure)**

```
select * from v1 
```

# c++ - 动态堆栈分配（来自 Thinking in C++）

> ID：16012145
> 
> 赞同：0
> 
> 时间：2013-04-15T09:47:39.630
> 
> 标签：c++, stack

我正在尝试解决*Thinking in C++ 中*的练习 22（第 4 章），但我缺少一些东西，因为经过几天的工作，我的解决方案也无法完成工作。我不太喜欢在解决练习中寻求帮助，但此刻我感到不知所措。

> 创建一个包含 Stashes 的堆栈。每个 Stash 将保存来自输入文件的五行。使用 new 创建 Stashes。将文件读入您​​的堆栈，然后通过从堆栈中提取它以原始形式重新打印它。

```
#include "CppLib.h"
#include "Stack.h"
#include <iostream>
#include <fstream>
#include <string>
#include <vector>

using namespace std;

//typedef unsigned int uint;

int main() {
    ifstream in("main.cpp");

    Stack stackStashes;
    stackStashes.initialize();

    Stash linesStash;
    linesStash.initialize(sizeof(char) * 80);

    string line;
    bool flag = true;
    while (flag) {
        for (int i = 1; flag && (i <= 5); i++) 
            if ((flag = (bool)getline(in, line)))
                linesStash.add(line.c_str());

        if (flag) {
            stackStashes.push(new Stash(linesStash));
            linesStash.cleanup();
            linesStash.initialize(sizeof(char) * 80);
        }
    }

    Stash* s;
    char* cp;
    int z = 0;
    while ((s = (Stash*)stackStashes.pop()) != 0) {
        while ((cp = (char*)s->fetch(z++)) != 0) 
            cout << "s->fetch(" << z << ") = "
                 << cp << endl;

        delete s;
    }

    s->cleanup();
    stackStashes.cleanup();
    return 0;
} 
```

我试图用向量解决它，而不使用标志，我的所有解决方案都返回了错误。此外，在我所有的实验中，这是最糟糕的一个，但也是唯一剩下的一个。
以下是本书提供的库。下面的所有代码都是由 Bruce Eckel 编写的。
[CppLib.cpp](http://pastebin.com/05JCRYeb)，[CppLib.h](http://pastebin.com/hCERN4R6)，[Stack.cpp](http://pastebin.com/BSJZUXgY)，[Stack.h](http://pastebin.com/CB8jbAuB)，[require.h](http://pastebin.com/cWmZVyaS)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:07:17.853

哇，这太糟糕了。恐怕您的代码没有问题，只有布鲁斯·埃克尔的代码。问题是`Stash`无法复制对象，但是你在这里复制

```
 stackStashes.push(new Stash(linesStash)); 
```

这会使程序崩溃。

你不可能知道。你必须像这样重写你的程序

```
while (flag) {
    Stash * stash_ptr = new Stash();
    for (int i = 1; flag && (i <= 5); i++) 
        if ((flag = (bool)getline(in, line)))
            stash_ptr->add(line.c_str());

    if (flag) {
        stackStashes.push(stash_ptr);
    } 
```

反正是这样的，我没有测试过。关键是它不复制任何`Stash`对象，一切都是通过`Stash`指针完成的。

建议你试试更好的书？尽管对 Bruce Eckel 公平地说，他可能还没有引入对象复制的概念，也没有预料到有人会编写尝试复制`Stash`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T05:45:18.887

我也在这个练习中挣扎了很多，但最终解决了。我希望这就是你要找的。

请检查此 main.cpp：它与原始来源（您在问题中已链接）一样工作，无需对其进行任何修改。

我希望这有帮助。随意询问是否有任何不清楚的地方。

```
//Create a Stack that holds Stashes. Each Stash will hold
//five lines from an input file. Create the Stashes using
//new. Read a file into your Stack, then reprint it in its
//original form by extracting it from the Stack.

#include <iostream>
#include <fstream>
#include "cpplib.h"
#include "stack.h"
#include <stdexcept>
#include <string>
#include <cstdlib>

const std::string FILENAME = "file.txt";
const unsigned int LINES_PER_STASH = 5;
const unsigned int MAX_LINE_LENGTH = 80;

int main(){

  std::ifstream in;

  try
  {
    in.open(FILENAME.c_str(),std::ios_base::in);
    if(!in.is_open())
    {
      throw new std::exception();
    }
  }
  catch(...)
  {
    std::cout << "Error should be handled" << std::endl;
    exit(-1);
  }

  unsigned int lineCount = 0;

  Stack stack;
  stack.initialize();

  Stash* pStash = 0;
  std::string line;

  while(std::getline(in, line) )
  {
    if(! (lineCount % LINES_PER_STASH))
    {
      if(lineCount)
      {
        stack.push(pStash);
      }
      pStash = new Stash();
      pStash->initialize(MAX_LINE_LENGTH);
    }
    pStash->add(line.c_str());

    lineCount++;
  }
  if(0 < pStash->count()) {
        stack.push(pStash);
  }

  in.close();

  Stash* tempStash;
  Stack* pTempStack = new Stack();
  pTempStack->initialize();

  //revert the order of stashes in a new stack
  while((tempStash = static_cast<Stash*>(stack.pop())) != 0)
  {
    pTempStack->push(tempStash);
  }

  stack.cleanup();

  while(0 != (tempStash = static_cast<Stash*>(pTempStack->pop()) ) )
  {
    //a more elegant and consistent way should be to solve this loop with 'while', still 'for' and worked fine at first try, so I left it as it is:
    for(int i = 0; i < LINES_PER_STASH; i++){
      std::cout << (char*)tempStash->fetch(i) << std::endl;
    }
    delete tempStash;
  }

  pTempStack->cleanup();
  delete pTempStack;  

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-20T11:46:36.940

我也得到了练习 23 的解决方案。

修改练习 22，以便您创建一个封装存储堆栈的结构。用户应该只通过成员函数添加和获取行，但在幕后结构碰巧使用了堆栈堆栈。

Stack.cpp的源代码

```
#include "CppLib.h"
#include "Stack.h"
#include "require.h"
using namespace::std;

const int bufsize = 80;

void Stack::Link::initialize(Stash* dat, Link* nxt) {
    data = dat;
    next = nxt;
}

void Stack::initialize() {
    head = 0;

    Stash* stash = new Stash;
    stash->initialize(sizeof(char) * bufsize);
    Link* newLink = new Link;
    newLink->initialize(stash, head);
    head = newLink;
}

void Stack::push(const void * element) {
    // each stash stores 5 lines
    if (head->data->count() < 5) {
        head->data->add(element);
    } else {
        // Push old stash
        Link* newLink = new Link;
        newLink->initialize(head->data, head);
        head = newLink;
        // Create new stash
        Stash* newStash = new Stash;
        newStash->initialize(sizeof(char) * bufsize);
        head->data = newStash;
        // Add element to new stash
        head->data->add(element);
    }
}

void* Stack::peek() {
    require(head != 0, "Stack empty");
    return head->data->fetch(head->data->next);
}

void* Stack::pop() {
    if (head == 0) return 0;

    void* result;
    Stash* stash = head->data;
    int index = stash->next;
    // retrieve next stash
    if (index < 1) {
        stash->cleanup();
        head = head->next;
        if (head == 0) return 0; // Check if next stash exists
        stash = head->data;
        index = stash->next;
    }
    // pop 5 lines within stash
    result = stash->fetch(index - 1);
    stash->next = index - 1;

    return result;
}

void Stack::cleanup() {
    require(head == 0, "Stack not empty");
} 
```

# coldfusion - 如何忽略 如果 什么都不返回？

> ID：16012146
> 
> 赞同：3
> 
> 时间：2013-04-15T09:47:44.087
> 
> 标签：coldfusion

我`<cfoutput>`在表格中放置了地址变量。我遇到的问题是这些变量有时为空，但由于换行符，它们仍然占用表中的空间。

```
 <td>  
    <cfoutput>
       #getMeeting.meetingDemographicsAddressLine1#<br />
       #getMeeting.meetingDemographicsAddressLine2#<br />
       #getMeeting.meetingDemographicsCity#
    </cfoutput>
   </td> 
```

**`<br />`如果变量为空，如何让浏览器忽略标签？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T09:57:47.697

您可以使用创建打印行函数`cffunction`并使用它`cfif`来检查值的长度是否超过 0。即

确保您实际上也表示 null，请参阅[http://www.bennadel.com/blog/1654-Learning-ColdFusion-9-IsNull-And-Working-With-NULL-Values.htm](http://www.bennadel.com/blog/1654-Learning-ColdFusion-9-IsNull-And-Working-With-NULL-Values.htm)

**例子**

```
<cffunction name="PrintLine" returntype="void">
  <cfargument name="Value" />
  <cfif len(arguments.Value) GT 0>
    <cfoutput>#arguments.Value#<br /></cfoutput>
  </cfif>
</cffunction> 
```

或从函数返回：-

```
<cffunction name="PrintLine2" returntype="string">
  <cfargument name="Value" />
  <cfset var foo = "" />
  <cfif len(trim(arguments.Value)) GT 0>
    <cfset foo = arguments.Value & "</br />" />
  </cfif>
  <cfreturn foo />
</cffunction> 
```

可以根据需要添加您的返回类型/提示/必需属性

**文档**

请参阅[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_21.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_f_21.html)

和

[http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_i_01.html](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_i_01.html)

然后你可以这样做： -

```
<td>  
  <cfoutput>
   #PrintLine(getMeeting.meetingDemographicsAddressLine1)#
   #PrintLine(getMeeting.meetingDemographicsAddressLine2)#
   #getMeeting.meetingDemographicsCity#
  </cfoutput>
</td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:59:04.970

```
 <cfoutput>
    <cfif len(getMeeting.meetingDemographicsAddressLine1) gt 0 >
           #getMeeting.meetingDemographicsAddressLine1#
    </cfif>
    <cfif len(getMeeting.meetingDemographicsAddressLine2) gt 0 >
           <br />#getMeeting.meetingDemographicsAddressLine2#
    </cfif>
    <cfif len(getMeeting.meetingDemographicsCity) gt 0 >
            <cfif len(getMeeting.meetingDemographicsAddressLine1) gt 0 or  len(getMeeting.meetingDemographicsAddressLine2) gt 0>
                 <br />#getMeeting.meetingDemographicsCity#
            <cfelse>
                #getMeeting.meetingDemographicsCity#
            </cfif>
    </cfif>
</cfoutput> 
```

# java - 错误消息未显示在我的 JSP 中

> ID：16012149
> 
> 赞同：1
> 
> 时间：2013-04-15T09:47:48.667
> 
> 标签：java, jsp, validation, struts2, interceptor

嗨，我的应用程序有问题，我的 jsp 没有显示错误消息。

我真的不明白我的jsp中的这段代码：

```
<s:if test="hasActionMessages()">
   <div class="message">
      <s:actionmessage/>
   </div>
</s:if>

<s:if test="hasFieldErrors()">
   <div class="errors">
      <s:fielderror />
   </div>
</s:if> 
```

我不明白`hasActionMessages()`&`hasFieldErrors()` 他们是在哪里定义的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:47:41.220

错误和消息通过[拦截器](https://struts.apache.org/core-developers/validation-interceptor.html)用于[验证](https://struts.apache.org/core-developers/validation.html)。上面的代码检查值堆栈上是否有操作消息或字段错误。[`validation`](https://struts.apache.org/core-developers/validation-interceptor.html)

该操作应实施`WalidationAware`以获取这些方法`hasActionMessages()`并`hasFieldErrors()`可供 OGNL 使用。如果您的操作 extends ，则不需要实现它`ActionSupport`。已经实现了这些方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:12:44.440

我不知道您尝试了什么，但这将帮助您
[Struts 2 ActionError 和 ActionMessage 示例](http://www.mkyong.com/struts2/struts-2-actionerror-actionmessage-example/)
[工作流拦截器](http://www.javatpoint.com/struts-2-custom-validation-workflow-interceptor)
[使用 Struts 2 主题和模板](http://www.mkyong.com/struts2/working-with-struts-2-theme-template/)

# android - Android 渲染脚本 rotateLeft

> ID：16012151
> 
> 赞同：0
> 
> 时间：2013-04-15T09:47:56.797
> 
> 标签：android, renderscript

如何实现这个 Java 函数：

```
 public static int rotateLeft(int i, int distance) {
        // Shift distances are mod 32 (JLS3 15.19), so we needn't mask -distance
        return (i << distance) | (i >>> -distance);
    } 
```

在[渲染脚本](http://developer.android.com/guide/topics/renderscript/compute.html)中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:58:22.720

它与 C 相同，所以类似于

```
static int rotateLeft(int i, int distance) {
  return (i << (distance % 32)) | ((unsigned int)i >> (32 - (distance % 32)));
} 
```

# android - 如何返回主要活动？

> ID：16012152
> 
> 赞同：-3
> 
> 时间：2013-04-15T09:47:58.273
> 
> 标签：android

我有 4 个活动，我想在单击按钮时从 4 个活动移动到主要活动（第一个）。我试过这段代码：

```
 Intent intent = new Intent(this, Menu.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent); 
```

但它不起作用，在 Logcat 中向我显示问题：“您是否在 AndroidManifest.xml 中声明了此活动？” 如果我调用其他活动，它会起作用。请帮忙！（抱歉英语不好^_^）清单：

```
 <activity
        android:name=".Menu"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.tooti.fast.MAINACTIVITY" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TimeMode_Choose"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.tooti.fast.TIMEMODE_CHOOSE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name=".TimeMode"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="com.tooti.fast.TIMEMODE" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:53:27.013

更改 Activity - Menu.class 的名称，因为 android 已经有名为 Menu android.view.Menu 的视图

因此，给您的活动起一个其他名称并尝试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:51:24.337

那里有一定程度的模棱两可，您可能对自己和 Java 感到困惑。

假设您的`Menu`类实际上已在您的清单中声明（您可以发布吗？），然后确保您的导入是准确的。

您将寻找：

`import com.yourpackage.Menu`

**并不是**

`android.R.Menu`或者`android.View.Menu`

**编辑：**所以现在你已经发布了你的清单，你的代码是错误的。你需要：

```
Intent intent = new Intent(this, MainActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:18:40.190

更改 Activity 的名称 - Menu.class`Other name`并注册`Androidmanifest.xml` 并尝试喜欢

```
 Intent intent = new Intent(this, OthernewName.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent); 
```

# c++ - Boost::fusion、Eigen 和 zip 变换

> ID：16012153
> 
> 赞同：3
> 
> 时间：2013-04-15T09:47:59.707
> 
> 标签：c++, boost, constants, eigen, boost-fusion

这个问题是我所关心的[另一个问题](https://stackoverflow.com/questions/15961855/boost-fusion-adapt-tpl-struct-and-template-array-size)的衍生`boost::fusion`。这个想法是用来`boost::fusion`迭代包含 N 维数组的大型 C 风格结构。这些数组的计算由 完成`Eigen`。通过使用`boost::fusion`，可以对整个 C 结构应用简单的算术运算，例如标量乘法或向量加法。

在处理二进制操作时，我使用[`boost::fusion::zip`](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/algorithm/transformation/functions/zip.html)形成单个序列，并[`boost::fusion::for_each`](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/algorithm/iteration/functions/for_each.html)迭代其他序列。

问题`boost::fusion::zip`在于它`const`在我需要修改其中一个值（例如加法的返回值）时构造序列。因此，我最终使用`const_cast`来修改该值（`Eigen`向量），但由于某种原因，我不能`result_ref`在`add()`函数中使用 a 。这是为什么？

此外，有没有更好（或更简单）的方法来实现我想要做的事情？`boost::fusion::zip`可能不是最合适的，但我找不到任何其他简单的方法来做到这一点。

```
#include <iostream>

#include <boost/fusion/adapted/struct/adapt_struct.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/algorithm/iteration/for_each.hpp>
#include <boost/fusion/include/for_each.hpp>
#include <boost/fusion/algorithm/transformation/zip.hpp>
#include <boost/fusion/include/zip.hpp>
#include <boost/bind.hpp>
#include <boost/fusion/container/vector/vector30.hpp>
#include <boost/fusion/include/vector30.hpp>
#include <boost/fusion/sequence/intrinsic/at_c.hpp>
#include <boost/fusion/include/at_c.hpp>
#include <boost/type_traits/remove_const.hpp>
#include <boost/type_traits/remove_reference.hpp>

#include <Eigen/Core>

template <class type_const_ref>
struct remove_const_ref
{
    typedef typename boost::remove_reference <type_const_ref>::type type_const;
    typedef typename boost::remove_const <type_const_ref>::type     type_ref;
    typedef typename boost::remove_const <type_const >::type        type;
};

namespace demo
{
template<typename T, int SIZE1, int SIZE2>
struct data
{
    T ar1[SIZE1][SIZE2];
    T ar2[SIZE1][SIZE2];
};

template<typename T>
struct EigenMap
{
    typedef Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> > type;
};

template<typename T>
struct data_eigen
{
    template <int SIZE1, int SIZE2>
    data_eigen(data<T,SIZE1,SIZE2>& src)
        : ar1(typename EigenMap<T>::type(&src.ar1[0][0], SIZE1*SIZE2)),
          ar2(typename EigenMap<T>::type(&src.ar2[0][0], SIZE1*SIZE2))
    {
    }

    typename EigenMap<T>::type ar1;
    typename EigenMap<T>::type ar2;
};

struct print
{
    template<typename T>
    void operator()(const Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> >& t) const
    {
        std::cout << t.transpose() << std::endl;
    }
};

struct scalarMult
{
    template<typename T, typename U>
    void operator()(T& t, U& u) const
    {
        t *= u;
    }
};

template <typename T>
struct add
{
    template <typename U>
    void operator() (const boost::fusion::vector3<U,U,U>& t) const
    {
        typedef typename remove_const_ref<U>::type_ref vector_ref;
        typedef typename remove_const_ref<U>::type     vector_type;

        // FIXME: find why we cannot use vector_ref
        vector_type result_ref = const_cast<vector_ref>(boost::fusion::at_c<2>(t));
        result_ref = boost::fusion::at_c<0>(t) + boost::fusion::at_c<1>(t);
    }
};

}

BOOST_FUSION_ADAPT_TPL_STRUCT
(
    (T),
    (demo::data_eigen) (T),
    (typename demo::EigenMap<T>::type, ar1)
    (typename demo::EigenMap<T>::type, ar2)
)

int main()
{
    typedef float REALTYPE;
    const int SIZE1 = 2;
    const int SIZE2 = 2;

    // Basic data structure with multidimensional arrays
    demo::data<REALTYPE, SIZE1, SIZE2> d1;
    for (unsigned int i = 0; i < SIZE1; ++i)
        for (unsigned int j = 0; j < SIZE2; ++j)
        {
            d1.ar1[i][j] = (i+1)*(j+1);
            d1.ar2[i][j] = i + j;
        }
    demo::data<REALTYPE, SIZE1, SIZE2> d2;
    demo::data<REALTYPE, SIZE1, SIZE2> d3;
    memset(&d3, 0, sizeof(demo::data<REALTYPE, SIZE1, SIZE2>));

    for (unsigned int i = 0; i < SIZE1; ++i)
        for (unsigned int j = 0; j < SIZE2; ++j)
        {
            d2.ar1[i][j] = 1.0;
            d2.ar2[i][j] = 2.0;
        }

    // Eigen::Map + BOOST_FUSION_ADAPT_TPL_STRUCT
    demo::data_eigen<REALTYPE> eig_d1(d1);
    demo::data_eigen<REALTYPE> eig_d2(d2);
    demo::data_eigen<REALTYPE> eig_d3(d3);

    std::cout << "d1:" << std::endl;
    boost::fusion::for_each(eig_d1, demo::print());
    std::cout << std::endl;

    std::cout << "d2:" << std::endl;
    boost::fusion::for_each(eig_d2, demo::print());
    std::cout << std::endl;

    boost::fusion::for_each(eig_d1, boost::bind<void>(demo::scalarMult(), _1, 2.0));
    std::cout << "d1 = 2 * d1:" << std::endl;
    boost::fusion::for_each(eig_d1, demo::print());
    std::cout << std::endl;

    boost::fusion::for_each(boost::fusion::zip(eig_d1, eig_d2, eig_d3),
                            demo::add<REALTYPE>());
    std::cout << "d3 = d1 + d2:" << std::endl;
    boost::fusion::for_each(eig_d3, demo::print());
    std::cout << std::endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:31:02.777

我相信你需要使用的是[`zip_view`](http://www.boost.org/libs/fusion/doc/html/fusion/view/zip_view.html).

您的`for_each`调用将是：

```
typedef demo::data_eigen<REALTYPE>& vector_ref;                                             
typedef boost::fusion::vector<vector_ref,vector_ref,vector_ref> my_zip;                     

boost::fusion::for_each(boost::fusion::zip_view<my_zip>(my_zip(eig_d1, eig_d2, eig_d3)), demo::add()); 
```

你的`add`函子就是：

```
struct add
{
    template <typename ZipView>
    void operator() (const ZipView& t) const            //CHANGED
    {
        boost::fusion::at_c<2>(t) = boost::fusion::at_c<0>(t) + boost::fusion::at_c<1>(t);
    }
}; 
```

以下代码已使用 g++ 4.8.0 进行了测试，并输出与您相同的结果：

```
#include <iostream>

#include <boost/bind.hpp>

#include <boost/fusion/include/at_c.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/include/for_each.hpp>
#include <boost/fusion/include/zip_view.hpp>
#include <boost/fusion/include/vector.hpp>

#include <Eigen/Core>

namespace demo
{
template<typename T, int SIZE1, int SIZE2>
struct data
{
    T ar1[SIZE1][SIZE2];
    T ar2[SIZE1][SIZE2];
};

template<typename T>
struct EigenMap
{
    typedef Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> > type;
};

template<typename T>
struct data_eigen
{
    template <int SIZE1, int SIZE2>
    data_eigen(data<T,SIZE1,SIZE2>& src)
        : ar1(typename EigenMap<T>::type(&src.ar1[0][0], SIZE1*SIZE2)),
          ar2(typename EigenMap<T>::type(&src.ar2[0][0], SIZE1*SIZE2))
    {
    }

    typename EigenMap<T>::type ar1;
    typename EigenMap<T>::type ar2;
};

struct print
{
    template<typename T>
    void operator()(const Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> >& t) const
    {
        std::cout << t.transpose() << std::endl;
    }
};

struct scalarMult
{
    template<typename T, typename U>
    void operator()(T& t, U& u) const
    {
        t *= u;
    }
};

struct add
{
    template <typename ZipView>
    void operator() (const ZipView& t) const            //CHANGED
    {
        boost::fusion::at_c<2>(t) = boost::fusion::at_c<0>(t) + boost::fusion::at_c<1>(t);
    }
};

}

BOOST_FUSION_ADAPT_TPL_STRUCT
(
    (T),
    (demo::data_eigen) (T),
    (typename demo::EigenMap<T>::type, ar1)
    (typename demo::EigenMap<T>::type, ar2)
)

int main()
{
    typedef float REALTYPE;
    const int SIZE1 = 2;
    const int SIZE2 = 2;

    // Basic data structure with multidimensional arrays
    demo::data<REALTYPE, SIZE1, SIZE2> d1;
    for (unsigned int i = 0; i < SIZE1; ++i)
        for (unsigned int j = 0; j < SIZE2; ++j)
        {
            d1.ar1[i][j] = (i+1)*(j+1);
            d1.ar2[i][j] = i + j;
        }
    demo::data<REALTYPE, SIZE1, SIZE2> d2;
    demo::data<REALTYPE, SIZE1, SIZE2> d3;
    memset(&d3, 0, sizeof(demo::data<REALTYPE, SIZE1, SIZE2>));

    for (unsigned int i = 0; i < SIZE1; ++i)
        for (unsigned int j = 0; j < SIZE2; ++j)
        {
            d2.ar1[i][j] = 1.0;
            d2.ar2[i][j] = 2.0;
        }

    // Eigen::Map + BOOST_FUSION_ADAPT_TPL_STRUCT
    demo::data_eigen<REALTYPE> eig_d1(d1);
    demo::data_eigen<REALTYPE> eig_d2(d2);
    demo::data_eigen<REALTYPE> eig_d3(d3);

    std::cout << "d1:" << std::endl;
    boost::fusion::for_each(eig_d1, demo::print());
    std::cout << std::endl;

    std::cout << "d2:" << std::endl;
    boost::fusion::for_each(eig_d2, demo::print());
    std::cout << std::endl;

    boost::fusion::for_each(eig_d1, boost::bind<void>(demo::scalarMult(), _1, 2.0));
    std::cout << "d1 = 2 * d1:" << std::endl;
    boost::fusion::for_each(eig_d1, demo::print());
    std::cout << std::endl;

    typedef demo::data_eigen<REALTYPE>& vector_ref;                                             //ADDITION
    typedef boost::fusion::vector<vector_ref,vector_ref,vector_ref> my_zip;                     //ADDITION

    boost::fusion::for_each(boost::fusion::zip_view<my_zip>(my_zip(eig_d1, eig_d2, eig_d3)),    //CHANGED
                            demo::add());
    std::cout << "d3 = d1 + d2:" << std::endl;
    boost::fusion::for_each(eig_d3, demo::print());
    std::cout << std::endl;

    return EXIT_SUCCESS;
} 
```

# jquery - jqGrid with `multiselect: true` how can I make each row checked or not according to what the DB returns?

> ID：16012156
> 
> 赞同：0
> 
> 时间：2013-04-15T09:48:23.320
> 
> 标签：jquery, jqgrid

Using jqGrid with `multiselect: true` how can I make each row checked or not according to what the DB returns?

I know that I can use on "loadcomplete" and loop though all elements that are already on the grid and checked them according to a hidden column value (or something like that.) However this is not what I am looking for (afterInsertRow is similar on the way that it is a "manualy" action to set the check value). I really need to set this checked or not while the grid "draws" the rows.

Is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:55:08.843

If you have not enabled `gridview` option, then there is an event `afterInsertRow` available for handling:

```
afterInsertRow: function(rowid, rowdata, rowelem) {
    // code for selection here
    // example:
    $('selector for grid').jqgrid('setSelection', rowid);
}, 
```

More details in the documentation: [events](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents) and [methods](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3amethods).

**Update.** Other option is to define custom formatter for the column model. Assuming objects that are coming from DB contain property named `checked` that determines whether the row is selected, code might look something like this:

```
colModel:[
    {
        name:'checked',
        formatter: function (cellvalue, options, rowObject) {
            if (cellvalue) {
                return '<input type="checkbox" checked="checked" />';
            }
            return '<input type="checkbox" />';
        }
    },
    // rest of column models 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-07T18:16:18.207

Use the template: "booleanCheckbox" property like below. , where available is the variable name from the backend.

```
{name:'available', hidden:false, width:30, sortable:true, search:false,
 template: "booleanCheckbox", resizable:false, formatoptions: {disabled : false}} 
```

# php - 如何在 Moodle 上的所有课程中注册用户

> ID：16012157
> 
> 赞同：2
> 
> 时间：2013-04-15T09:48:23.803
> 
> 标签：php, mysql, moodle

我有一个带有 SSO 的 Moodle。

用户登录一个网站并点击一个链接来访问我的 Moodle。

当他们到达时，我想让他们参加我 Moodle 上的每门课程。

但是，我无法让 sql 工作。

这是我所拥有的：

```
$ra = new object();
$ra->roleid = 5;
$ra->contextid = $contextid;
$ra->userid = $user->id;
$ra->hidden = 0;
$ra->enrol = 'manual';
//$ra->enrol = 'self';
/// Always round timestart downto 100 secs to help DBs to use their own caching algorithms
/// by repeating queries with the same exact parameters in a 100 secs time window
$ra->timestart = 0;
$ra->timeend = 0;
$ra->timemodified = time();
$ra->modifierid = 0;

// Enrol the User for the Course
$ra->id = $DB->insert_record('role_assignments',$ra); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-12T11:31:09.370

要注册用户，以下代码片段可能很有用它以自动方式模拟手动注册。

```
function enroll_user($userid, $course, $modifier) {                                                
    global $DB;                                                                                    
    $enrolData = $DB->get_record('enrol', array('enrol'=>'manual', 'courseid'=>$course));          
    $user_enrolment = new stdClass();                                                              
        $user_enrolment->enrolid = $enrolData->id;                                                 
        $user_enrolment->status = '0';                                                             
        $user_enrolment->userid = $userid;                                                         
        $user_enrolment->timestart = time();                                                       
        $user_enrolment->timeend =  '0';                                                           
        $user_enrolment->modifierid = $modifier;                                                   
        //Modifierid in this table is userid who enrolled this user manually
        $user_enrolment->timecreated = time();                                                     
        $user_enrolment->timemodified = time();                                                    
    $insertId = $DB->insert_record('user_enrolments', $user_enrolment);                            
    //addto log                                                                                    
    $context = $DB->get_record('context', array('contextlevel'=>50, 'instanceid'=>$course));          
    $role = new stdClass();                                                                        
        $role->roleid = 5;                                                                         
        $role->contextid = $context->id;                                                           
        $role->userid = $userid;                                                                   
        $role->component = '';                                                                     
        $role->itemid = 0;                                                                         
        $role->timemodified = time();                                                              
        $role->modifierid = $modifier;                                                             
    $insertId2 = $DB->insert_record('role_assignments', $role);                                    
    add_to_log($course, '', $modifierid, 'automated');                
    return array('user_enrolment'=>$insertId, 'role_assignment'=>$insertId2);                      
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-31T16:06:48.977

这是我自动为学生注册课程的方式。您只需稍微操作一下即可将其用于所有课程 ID。我希望这可以帮助你。

```
// enroll student to course (roleid = 5 is student role)
function enroll_to_course($courseid, $userid, $roleid=5, $extendbase=3, $extendperiod=0)  {
    global $DB;

    $instance = $DB->get_record('enrol', array('courseid'=>$courseid, 'enrol'=>'manual'), '*', MUST_EXIST);
    $course = $DB->get_record('course', array('id'=>$instance->courseid), '*', MUST_EXIST);
    $today = time();
    $today = make_timestamp(date('Y', $today), date('m', $today), date('d', $today), 0, 0, 0);

    if(!$enrol_manual = enrol_get_plugin('manual')) { throw new coding_exception('Can not instantiate enrol_manual'); }
    switch($extendbase) {
        case 2:
            $timestart = $course->startdate;
            break;
        case 3:
        default:
            $timestart = $today;
            break;
    }  
    if ($extendperiod <= 0) { $timeend = 0; }   // extendperiod are seconds
    else { $timeend = $timestart + $extendperiod; }
    $enrolled = $enrol_manual->enrol_user($instance, $userid, $roleid, $timestart, $timeend);
    add_to_log($course->id, 'course', 'enrol', '../enrol/users.php?id='.$course->id, $course->id);

    return $enrolled;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-30T10:03:11.857

您可以使用自动注册插件进行注册。当用户点击课程时，他们会通过使用此插件自动注册课程。链接：[https ://moodle.org/plugins/enrol_auto](https://moodle.org/plugins/enrol_auto)

# sql - 我可以找到当前/正在使用的索引吗

> ID：16012160
> 
> 赞同：0
> 
> 时间：2013-04-15T09:48:36.067
> 
> 标签：sql, sql-server, sql-server-2012

我有以下内容：

```
SELECT name AS index_name,
       STATS_DATE(OBJECT_ID, index_id) AS StatsUpdated
FROM   sys.indexes 
```

是否可以添加一些信息，以便我知道每个索引是否是当前的并且正在使用中？

另外我想在 SELECT 子句中返回索引所在的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:17:45.650

我正在使用以下查询来查找是否使用了索引 - 如果搜索、扫描和查找为零，则不使用它。

```
SELECT TOP 25
o.name AS ObjectName
, i.name AS IndexName
, i.index_id AS IndexID  
, dm_ius.user_seeks AS UserSeek
, dm_ius.user_scans AS UserScans
, dm_ius.user_lookups AS UserLookups
, dm_ius.user_updates AS UserUpdates
, p.TableRows 
, is_disabled
,STATS_DATE(i.[OBJECT_ID], i.index_id) AS StatsUpdated
FROM sys.dm_db_index_usage_stats dm_ius  
INNER JOIN sys.indexes i ON i.index_id = dm_ius.index_id AND dm_ius.object_id = i.object_id   
INNER JOIN sys.objects o on dm_ius.object_id = o.object_id
INNER JOIN sys.schemas s on o.schema_id = s.schema_id
INNER JOIN (SELECT SUM(p.rows) TableRows, p.index_id, p.object_id 
                FROM sys.partitions p GROUP BY p.index_id, p.object_id) p 
        ON p.index_id = dm_ius.index_id AND dm_ius.object_id = p.object_id
WHERE OBJECTPROPERTY(dm_ius.object_id,'IsUserTable') = 1
AND dm_ius.database_id = DB_ID()   
AND i.type_desc = 'nonclustered'
AND i.is_primary_key = 0
AND i.is_unique_constraint = 0
ORDER BY (dm_ius.user_seeks + dm_ius.user_scans + dm_ius.user_lookups) ASC
GO 
```

# java - 使用 Jsoup 查找元素的烦恼

> ID：16012165
> 
> 赞同：0
> 
> 时间：2013-04-15T09:48:42.703
> 
> 标签：java, html, parsing, jsoup, nodes

我对 HTML 解析器（目前使用 Jsoup）知之甚少，并且由于我对 HTML 解析器的理解不足而尝试了很多次但无法使其工作，所以请记住这一点。

无论如何，我正在尝试获取 HTML 文档的某些部分。这是我要提取的内容：

```
<div class ="detNane" >
<a class="detLink" title="Details for Hock part3">Hock part3</a></div> 
```

显然 HTML 文档有多个 [div class="detName"] 我想提取每个 detName div 类中的所有文本。我将不胜感激。

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:42:13.723

您可以为此使用选择器：

```
Document doc = // parse your document here or connect to a website

for( Element element : doc.select("div.detNane") )
{
    System.out.println(element.text()); // Print the text of that element
} 
```

# jsf - 带有 jboss 5.1 的richfaces - deploy-> ClassNotFoundException context.spi.context

> ID：16012169
> 
> 赞同：0
> 
> 时间：2013-04-15T09:49:07.183
> 
> 标签：jsf, jboss, richfaces

我尝试使用 Richfaces 创建 JSF 应用程序，但在 JBoss 5.1 (Java 1.6) 上部署应用程序后立即收到 ClassNotFoundException（我无法切换另一个 JBoss 版本）

我在pom中定义了如下依赖：

```
 <dependencies>
        <dependency>
            <groupId>org.richfaces</groupId>
            <artifactId>richfaces-bom</artifactId>
            <version>${org.richfaces.bom.version}</version>
            <scope>import</scope>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>org.richfaces.ui</groupId>
            <artifactId>richfaces-components-ui</artifactId>
        </dependency>
        <dependency>
            <groupId>org.richfaces.core</groupId>
            <artifactId>richfaces-core-impl</artifactId>
        </dependency> 
```

...

```
<properties>
    <org.richfaces.bom.version>4.1.0.Final</org.richfaces.bom.version>       
</properties> 
```

任何想法？D3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:12:02.650

Jboss 5.1 支持 JSF 1.2 而不是 JSF 2.x。Rich Faces 4.x 是为在 JSF 2.x 上工作而构建的

您正在使用 Jboss 5.1，但将依赖项定义为 Rich Faces 4.x。

既然你告诉你不能切换到另一个 Jboss 版本（我假设更高版本），你必须考虑降到 RichFaces 3.x

# java - 好的 json 库，例如 ios JSONModel

> ID：16012170
> 
> 赞同：4
> 
> 时间：2013-04-15T09:49:10.700
> 
> 标签：java, android, json

可以告诉我android是否有相同的lib链接

[https://github.com/icanzilb/JSONModel](https://github.com/icanzilb/JSONModel)

或者

[http://www.touch-code-magazine.com/JSONModel/](http://www.touch-code-magazine.com/JSONModel/)

我解析 JSON 只需要 write set 和 get，然后进行 JSON 到对象的映射和序列化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:50:24.903

Gson 在这方面做得很好。

你可以在这里阅读一些关于它的小教程，这应该可以帮助你入门； [http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T09:51:27.240

检查[Gson](http://code.google.com/p/google-gson/)和[Jackson](http://jackson.codehaus.org/)。两者都非常易于使用，我更喜欢 Gson，因为它在 POJO 中无需注释即可工作。有很多关于如何使用它们来序列化和反序列化 JSON 的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:50:05.270

我会推荐 lib [FastJson](https://github.com/alibaba/fastjson)，它比协议 buf 和 jackson 快，你可以试试这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:25:52.233

您还拥有[Genson](http://code.google.com/p/genson/)库，它具有很好的功能、性能、提供注释的替代方案并且易于使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-06T12:50:39.280

也许 FastPojo 可以帮助你，一个王牌 pojo 类

[https://github.com/BaselHorany/FastPojo](https://github.com/BaselHorany/FastPojo)

通常你会做一个这样的模型类

```
public class Msg {
    private int id;
    private String name;
    private Double doub;
    private Boolean bool;

    public Msg(String id,.....,.........) {
        this.id = id;
        ........
    }

    public String getId() {
        return id;
    }
    ........

    public void setId(String id) {
        this.id = id;
    }
    ........

} 
```

对于每个变量，您定义它的类型并制作 setter 和 getter void 并将其传递给 Routine 过程，然后您通常像这样使用它

```
//set
Msg msg = new Msg();
msg.setId(id);
msg.setName(name);
........
//get
msg.getId();
......... 
```

但是使用 FastPojo，您不需要自定义模型，因为它是一个“Wilde Card 类”，可以定义对象类型，然后适当地设置和获取它们，您只需设置并直接获取 > 所以：

只需将类复制到您的项目中

```
FastPojo msg = new FastPojo();
msg.set1(id);
msg.set2(name);
msg.set3(1.55);
msg.set4(true);
//get first variable where s is the type you should remember it s for string, i for int, d for double and b for boolean.
msg.get1i();//get id int
msg.get2s();//get string name
msg.get3d();//get double 1.55
msg.get4b();//get boolean true 
```

# javascript - SEAM + JSF 1.2 中的 JavaScript TO Bean

> ID：16012174
> 
> 赞同：0
> 
> 时间：2013-04-15T09:49:15.847
> 
> 标签：javascript, jsf, javabeans, seam2

我想将变量“位置”保存在我的 BEAN 中，有人知道该怎么做吗？我从 javascipt 开始。

```
 function placeMarker(position, map) {
      var marker = new google.maps.Marker({
        position: position,
        map: map
      });
      map.panTo(position);
      alert(position);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:52:13.863

最好的方法是`<h:inputHidden>`在页面上包含一个组件，并通过使用 Javascript 为其赋值。当您将隐藏输入绑定到托管 bean 属性时，下次将此输入表单提交到服务器时，它将应用其请求值到托管 bean 属性。

```
<h:form id="googleMapForm">
  <h:inputHidden id="positionInput" value="#{managedBean.positionProperty}" />
  <h:commandButton id="myButton" value="Submit" />
</h:form> 
```

在 javascript 中，如果您知道页面上 positionInput 的 ID，那么您可以在 jQuery 中获取它。

```
var positionVar = jQuery('#googleMapForm\\:positionInput');
if (positionVar) {
  positionVar.val(position);
} 
```

如果您在提交表单之前执行此脚本，则位置的值应应用于托管 bean 属性。

# jquery - 同时在两个单独的列中延迟加载图像

> ID：16012178
> 
> 赞同：7
> 
> 时间：2013-04-15T09:49:20.223
> 
> 标签：jquery, css, image, lazy-loading

我正在建立一个摄影作品集。我有两个相邻的 div 列向左浮动，每个列都包含一长串图像，大小为列宽的 100%。这样就形成了一个很好的垂直方向的照片网格。但是，左列需要在右列开始加载之前完全加载，这可能会花费大量时间。我希望两列同时从顶部加载，以便在用户加载页面时，列顶部的两个图像首先可见。

我试图纠正这个问题涉及 jQuery Lazyload。但是，它似乎不想正常工作。它不是在滚动页面时加载图像，而是一次加载整个左列，然后加载整个右列。我想解决这个问题，以便它首先加载每列顶部的前几张图像，然后在滚动时加载其他图像。

提前致谢！

**Javascript**：

```
$(document).ready(function () {
    $(".leftcol img").lazyload({
        failure_limit : 4, 
        effect : "fadeIn",
        threshold : 10
    });
    $(".rightcol img").lazyload({ 
        failure_limit : 4, 
        effect : "fadeIn",
        threshold : 10
    });
    $(window).trigger('scroll');
}); 
```

**HTML：**

```
<div class="leftcol col">
 <div class='item'>
   <a href='filename.jpg>
    <img data-src='js/holder/holder.js/200x300' data-original='filename.jpg' alt='' />
   </a>
 </div>
 <div class='item'>
   <a href='filename.jpg>
    <img data-src='js/holder/holder.js/200x300' data-original='filename.jpg' alt='' />
   </a>
 </div>
</div>

<div class="rightcol col">
 <div class='item'>
   <a href='filename.jpg>
    <img data-src='js/holder/holder.js/200x300' data-original='filename.jpg' alt='' />
   </a>
 </div>
 <div class='item'>
   <a href='filename.jpg>
    <img data-src='js/holder/holder.js/200x300' data-original='filename.jpg' alt='' />
   </a>
 </div>
</div> 
```

**CSS：**

```
.item{
    width:100%; 
    float: left;
    margin-bottom:8px;
    clear:both;
}
.item img{
    width:100%;
}
.col{
    max-width:650px;
    width:45%;
    float:left;
    margin-right:12px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T03:24:13.340

我遇到了同样的问题，将 failure_limit 参数增加到 9999 就可以了。

文档（[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)）说“将 failure_limit 设置为 10 会导致插件在找到首屏下方的 10 个图像后停止搜索要加载的图像。如果您有一个时髦的布局，请将此数字设置为高的东西。”

这将被归类为“时髦”。

# objective-c - 如何在选择 NSOutlineView 行时设置背景颜色

> ID：16012187
> 
> 赞同：3
> 
> 时间：2013-04-15T09:49:39.077
> 
> 标签：objective-c, macos, cocoa, nsoutlineview, nsbuttoncell

我有一个大问题，无法解决。

我有一个`NSOutlineView`包含一个从那里`NSButtonCell`绑定到`arrayController`它的内容，它正在设置它`Title`，并且基于某个值，通过代码在单元格背景中设置了一个图像。

使用这些代码设置图像

```
[cell setImage:[NSImage imageNamed:@"sbWarn.png"]];
[cell setImagePosition:NSImageOverlaps];
[cell setBackgroundColor:[NSColor clearColor]]; 
```

问题是当我选择一行时，所选行显示黑色背景。我尝试了所有可能的方法，例如将背景设置为 clearColor 等。

我怎样才能让它看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:39:30.560

这种方法应该有效。它来自记忆，所以不能保证，但一个快速的模型似乎给出了你正在寻找的结果：

```
// Outline view delegate

-(void)outlineView:(NSOutlineView *)outlineView willDisplayCell:(id)cell forTableColumn:(NSTableColumn *)tableColumn item:(id)item {

    NSUInteger rowNo = [outlineView rowForItem:item];

    NSColor *backgroundColor;
    if ( [[outlineView selectedRowIndexes] containsIndex:rowNo] ) {
        backgroundColor = // Highlighted color;
    }
    else {
        backgroundColor = // Normal background color;
    }

    [cell setBackgroundColor: backgroundColor];
} 
```

在您的情况下，您当然只会在带有按钮单元格的列上应用单元格背景颜色。

这是使用的纽扣电池，创建于`outlineView:dataCellForTableColumn:item:`.

```
NSButtonCell *cell = [[NSButtonCell alloc] init];

[cell setBezelStyle:NSRegularSquareBezelStyle];
[cell setButtonType:NSToggleButton];
[cell setBordered:NO];
[cell setTitle:@""];
[cell setImage:[NSImage imageNamed:@"green.png"]];
[cell setAlternateImage:[NSImage imageNamed:@"red.png"]];
[cell setImagePosition:NSImageOverlaps]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T12:54:19.793

我认为您必须将按钮类型用作“瞬时更改”。您可以从按钮属性中更改它。

# buffer - 在 for 循环中使用 echo 命令时的不可预测的结果

> ID：16012189
> 
> 赞同：1
> 
> 时间：2013-04-15T09:49:46.420
> 
> 标签：buffer, stdin, code-signing

我正在尝试编写一个小的 shell 脚本来找出特定目录中已签名和未签名的 jar。虽然脚本在 4-5 个 jar 之前工作正常，但如果我的目录有更多 jar（目前大约 25 个 jar），它会开始显示不可预测的结果。我不确定，但可能的原因可能与 STDIN/STDOUT 的缓冲有关。我试图在相关帖子中找到解决方案，但无法得到明确的答案。

这是我的脚本：（它以 JAVA_HOME 作为参数）：

```
#! /bin/bash
JV_HOME=$1

for i in `ls *.jar`
do
echo "scanning $i ..."
FILE=$i
$JV_HOME/bin/jarsigner -verify -verbose -certs $FILE | grep "jar verified" ;
if [ $? -eq 0 ]; then
    echo "\n$FILE is code-signed\n"
else
    echo "\n$FILE is unsigned/unverified..\n"
fi 
```

# 完毕

对于某些罐子，它说罐子是未签名的，当它们在使用以下命令单独检查时实际签名时：

$JAVA_HOME/bin/jarsigner -verify -verbose -certs

上面的脚本可能有什么问题？

在此先感谢，帕比

# c# - 为 C# 时间段预订表拖动动画 (flash?/java?)

> ID：16012190
> 
> 赞同：0
> 
> 时间：2013-04-15T09:49:48.407
> 
> 标签：c#, java, flash

我有处理时间段预订的 ac# 预订应用程序。我想知道是否值得尝试实现一个拖动动画功能，即用户将时间段拖出以直观地指示时间，而不是仅仅将预订时间显示为文本。

```
7.am 8.am 9.am 10.am 11.am 12.am 1.pm 2.pm 3.pm etc
 |========|      |===============| ----> Drag 
```

我可以通过 Flash 动画和可变通信来做到这一点，但这似乎需要做很多工作而回报却很少。java会更简单吗？

还有其他建议吗？

编辑：我有一个 WinForm 版本和一个用于不同客户端的 ASP.net 版本......

# python - 如何从 python 中的文件中读取图形以获取其邻接列表？

> ID：16012192
> 
> 赞同：0
> 
> 时间：2013-04-15T09:49:53.593
> 
> 标签：python

我正在从一个文件中读取，该文件具有代表图形及其邻接列表的数字。第一个数字是顶点，其余的是邻居。

假设我有一串以空格分隔的数字存储在字符串中：1 2 3 4。

我如何拆分它使得 x=1 并且 y 是一个列表 [2,3,4]？

```
 y=[]
         g=open('graph','r')
         for line in g:
             x,y=line.split() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:52:11.093

在 Python 3 中，你可以这样做：

```
x, *y = line.split() 
```

但在 Python 2 中，您需要先拆分为*一个*变量，然后分配给`x`and `y`：

```
values = line.split()
x, y = values[0], values[1:] 
```

如果这些需要是*整数*而不是字符串，则需要首先将值映射到`int()`：

```
x, *y = map(int, line.split()) 
```

或者，再次使用 Python 2：

```
values = map(int, line.split())
x, y = values[0], values[1:] 
```

Python 3 演示：

```
>>> x, *y = '1 2 3 4'.split()
>>> x, y
('1', ['2', '3', '4'])
>>> x, *y = map(int, '1 2 3 4'.split())
>>> x, y
(1, [2, 3, 4]) 
```

蟒蛇2：

```
>>> values = '1 2 3 4'.split()
>>> x, y = values[0], values[1:]
>>> x, y
('1', ['2', '3', '4'])
>>> values = map(int, '1 2 3 4'.split())
>>> x, y = values[0], values[1:]
>>> x, y
(1, [2, 3, 4]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:56:13.763

这是一个使用 Namedtuple [1] 以面向对象的方式存储数据的解决方案。

Namedtuple 是一个生成器，用于创建用于存储数据的小类。生成的类可以自己打印，这对调试很有帮助。但是这些对象是不可变的，要更改任何内容，您必须创建新对象。

```
from collections import namedtuple

VertexInfo = namedtuple("VertexInfo", "vert, adj")

graph = []
g = open('graph','r')
for line in g:
   nums = line.split()
   info = VertexInfo(vert=nums[0], adj=nums[1:])
   graph.append(info) 
```

您可以通过以下方式获得第一个顶点编号：

```
graph[0].vert 
```

和第一个邻接表

```
graph[0].adj 
```

[1] [http://docs.python.org/2/library/collections.html#collections.namedtuple](http://docs.python.org/2/library/collections.html#collections.namedtuple)

# java - 未设置 JSF SessionScoped 属性

> ID：16012193
> 
> 赞同：1
> 
> 时间：2013-04-15T09:49:57.053
> 
> 标签：java, jsf, javabeans, cdi, session-scope

我正在使用 SessionScoped bean 来存储我从使用 JPA 的 ClientService 检索的 Client 对象。当我的网页被加载时，我传递了一个 GET Id 参数来检索正确的客户端对象。一切都很好，但是当我尝试编辑客户端对象属性时，由于某种原因它不会改变。

这是我的代码：

看法 ：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

        <body>

            <ui:composition template="./../../WEB-INF/templates/master.xhtml">

                <ui:define name="functions">
                    <li><h:link outcome="clients/overview"><i class="icon-chevron-right"></i> <h:outputText value="#{trans['sidebar.links.overview']}" /> </h:link></li> 
                </ui:define>

                <ui:define name="page-header">
                    Edit - Clients
                </ui:define>

                <ui:define name="content">

                    <f:metadata>
                        <f:viewParam name="id" value="#{editClientBean.id}" required="false"/>
                        <f:event type="preRenderComponent" listener="#{editClientBean.findClient()}"/>
                    </f:metadata>

                    <h:form class="form-horizontal">
                        <div class="control-group">
                            <label class="control-label" for="inputEmail">Firstname</label>
                            <div class="controls">
                                <h:inputText  value="#{editClientBean.client.firstname}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Lastname</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.lastname}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Birthdate</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.dateToString()}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">City</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.city}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Address</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.address}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Zip</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.zipcode}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Info</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.info}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Info</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.info}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Email</label>
                            <div class="controls">
                                <h:inputText value ="#{editClientBean.client.email}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Password</label>
                            <div class="controls">
                                <h:inputSecret value="#{editClientBean.client.password}" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label" for="inputPassword">Cartrack ID(s)</label>
                            <div class="controls">

                            </div>
                        </div>

                        <div class="control-group">
                            <div class="controls">

                                <h:commandButton  value="Change" >
                                    <f:ajax listener="#{editClientBean.edit}" />
                                </h:commandButton>
                            </div>
                        </div>

                    </h:form>

                </ui:define>

            </ui:composition>

        </body>
    </html> 
```

豆 ：

```
package Beans;

import Entities.Cartrack;
import Entities.Client;
import Services.CarTrackService;
import Services.ClientService;
import java.io.Serializable;
import java.util.List;
import javax.enterprise.context.SessionScoped;
import javax.inject.Inject;
import javax.inject.Named;

/**
 *
 * @author Roel
 */
@Named
@SessionScoped
public class EditClientBean implements Serializable {

    @Inject
    private ClientService clientService;
    @Inject 
    private CarTrackService cartrackService;
    private Client client;
    private Long id;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public void findClient(){
        this.client = this.clientService.Find(this.id);
    }

    /**
     * @return the client
     */
    public Client getClient() {
        return client;
    }

    /**
     * @param client the client to set
     */
    public void setClient(Client client) {
        this.client = client;
    }

    public List<Cartrack> getCarTracks(){
        return this.cartrackService.FindAll();
    }

    public void edit(){
        System.out.println(this.client.getFirstname());
        System.out.println(this.client.getCartracks().size());

        //this.clientService.Edit(this.client);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:38:46.910

编辑的表单值不会在启用 Ajax 的 commandButton 上提交，除非它们在`execute`属性中明确命名。尝试添加这个：

```
<h:commandButton  value="Change" >
  <f:ajax execute="@form" render="@form" listener="#{editClientBean.edit}" />
</h:commandButton> 
```

`@form`是`execute`and属性中的保留关键字，`render`用于指示 Ajax 表单提交包括表单命名容器和该表单中的所有子项。您指定提交要应用于模型的所有表单值，然后在`render`您指示在服务器端处理后重新呈现所有表单元素的属性中。

# jboss - JBoss ESB 管道拦截器

> ID：16012201
> 
> 赞同：0
> 
> 时间：2013-04-15T09:50:23.870
> 
> 标签：jboss, esb, interceptor, jboss6.x

我是 JBoss ESB 的新手，我正在尝试拦截和处理在我的应用程序服务器上发生的所有消息。

我发现**管道拦截器**是我正在寻找的。但是，我无法让它们工作。你能指导我看任何关于这个问题的教程吗？我尝试了 JBoss ESB 的文档，但这部分内容非常模糊。是否有任何带有管道拦截器的工作示例？我没有找到任何...

这是我尝试过的：

```
import org.jboss.soa.esb.helpers.ConfigTree;
import org.jboss.soa.esb.listeners.message.PipelineInterceptor;
import org.jboss.soa.esb.message.Message;

public class Interceptor implements PipelineInterceptor {

    @Override
    public void processMessage(Message msg, ConfigTree arg1) {
        System.out.println("Intercepted" + msg.getContext());

    }

} 
```

我编写了这个非常简单的类并将其转换为 .jar 文件并将其放在我项目的根目录中。我还在它旁边复制了 jbossesb-properties.xml 并取消了拦截器部分的注释。我还应该做什么？我在哪里指定我的拦截器类的路径？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T06:29:26.793

好的，经过一天的尝试，我想我已经解决了。您必须将带有 Interceptor 的 .jar 文件放在 ESB 路径中的某个位置（最好的方法可能是在 AS 中部署 ESB 的文件夹）并在 jbossesb-properties.xml 文件中指定它的路径...

# regex - 解析源代码中的注释和字符串

> ID：16012211
> 
> 赞同：3
> 
> 时间：2013-04-15T09:50:39.817
> 
> 标签：regex, parsing, tags, token, tokenize

我正在设计和实现一种脚本语言，在“阅读”阶段，我采用了久经考验且直接的方法，将代码拆分为标记（词法分析），然后使用基于堆栈的 AST 生成器进行压缩令牌流之外的句法结构（解析）。但是，我遇到了字符串、注释以及它们如何交互的问题。

（作为参考，我的语言中的代码`~`用于开始评论）

这可能是错误的方法，但我正在使用正则表达式执行词法分析步骤。对于`n`各种标记，我`n`在我的代码上运行标记化传递，每次传递都查找与给定正则表达式匹配的子字符串并“标记”它们，直到最终标记每个字符。每个正则表达式都会忽略已标记的源代码部分中的匹配项，只标记无人认领的土地。这很有用，因为您不希望，例如，一个`number`令牌渗入像`translate3d`.

我遇到的问题是嵌入在字符串中的注释和嵌入在注释中的字符串。我不知道如何同时使这个

```
"The ~ is my favorite character!  It's so happy-looking!" 
```

被标记为一个字符串，并有这个

```
~ "handles" the Exception (just logs it to a file nobody ever reads and moves on) 
```

被标记为评论。似乎无论哪种方式，您都必须对词法分析的传递进行一些排序，并且注释或字符串传递将“获胜”并标记它没有业务标记的子字符串。例如，字符串被标记如下：（我使用 XML 表示法，因为它是表示文本标记区域的好方法。XML 在任何时候实际上都没有在我的程序中使用）

```
"The <comment>~ is my favorite character!  It's so happy-looking!"</comment> 
```

或评论标记如下：

```
<comment>~ </comment><string>"handles"</string>the Exception (just logs it to a file and moves on) 
```

假设一个字符串从注释的中间开始，或者一个注释从一个字符串的中间开始。

奇怪的是，这个正则表达式系统似乎传递标记子字符串*正是*文本编辑器上的语法突出显示所做的，并且注释和字符串在那里工作正常。我已经为我的语言开发了 textmate/submlimime text 2 语法定义，我所要做的就是（在所用实际格式的简化版本中）

```
<syntax>
    <color>
        string_color
    </color>
    <pattern>
        "[^"]*"
    </pattern>
</syntax>
<syntax>
    <color>
        comment_color
    </color>
    <pattern>
        ~.*
    </pattern>
</syntax> 
```

当我编写示例代码时，一切正常。然而，当我试图模仿我想象的文本编辑器的行为时，我遇到了上面提到的问题。如何解决这个问题，最好以最优雅的方式解决？显然，可以添加特殊处理，在进行任何词法分析之前从源代码中删除所有注释，字符串中的注释除外（这需要阅读器（在这种情况下，阅读器是机器，而不是人类）检测哪些部分的代码是字符串*两次*），但我相信一定有更好的方法，仅仅是因为崇高的文本只知道用于指定两种代码区域的正则表达式，并且只有这些信息它的行为完全符合预期.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:08:08.713

我建议您放弃标记，只使用一个正则表达式一次性标记代码，而不是在标记源代码之前先标记它，然后使用多次传递来这样做。

如果您构建一个包罗万象的正则表达式，其中包含用于匹配和捕获每个标记的子模式，那么您可以全局匹配并通过检查捕获组内容来确定标记类型。

在简单的示例中，如果您有一个正则表达式，例如

```
"([^"]*)"|~([^\n]*)|(\d+(?:.\d+)?) 
```

要匹配字符串、注释或数字，则如果匹配字符串，则第一个捕获组`()`将包含它，而所有其他捕获组将为空。

因此，在您的`for each`循环（[D 语言正](http://dlang.org/regular-expression.html)则表达式）中，您将使用条件语句和匹配对象的捕获组内容来确定要添加的下一个标记。

而且您不必只使用一个大的正则表达式，您可以在一个捕获组中匹配多个令牌类型，然后在`for each`块内对捕获组内容应用进一步的正则表达式（或`indexOf`等）以确定令牌。

# php - 我应该如何为 PHP 中的所有页面设置全局变量

> ID：16012212
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:50:42.493
> 
> 标签：php

**问题**

我想制作一个`$associate_name`全局`$app_key`变量，这样我就可以在我想要的任何页面上访问它们。下面是我的头文件中的代码，get 变量将进入索引页面。它在索引页面上工作正常，因为 $_GET 数据可用，但是当用户移动到下一页但包含相同的头文件时，它会抛出一个错误，说**Undefined index**。请让我知道如何使此变量在所有页面上可用。谢谢！

**代码**

```
$associate_name = $_REQUEST['an'];
$app_key = $_REQUEST['key'];
define('associate_name',$associate_name);
define('app_key',$app_key);

//echo "Sorry but there seems to be a problem in your code. We can't find one of the following: App name or App key";           

$select_associate = "SELECT * FROM associate_account WHERE associate_name='".associate_name."' and app_key='".app_key."'";
$assoc_result = mysql_query($select_associate) or die($select_associate.mysql_error());

if(mysql_num_rows($assoc_result)<=0){
    echo "Oops there seems to be a problem in your iFrame code. Please login into your Associate panel and copy/paste the link again.";
}else{
    $row_assoc = mysql_fetch_assoc($assoc_result);
    $associate_name=ucwords($row_assoc['associate_name']);
    $app_logo=$row_assoc['app_logo'];
    $app_intro_content=$row_assoc['app_intro_content'];
    $bg_color=$row_assoc['bg_color'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:53:41.313

将您想要的那些变量作为会话或 cookie 数据。否则，您将不得不求助于`global`关键字，这在现代 PHP 应用程序中是一种非常糟糕的处理方式。

它会是这样的（对于会话）：

```
$_SESSION["myvar"] = <value>; 
```

使用 cookie 会更复杂一些，但这应该能让你继续前进；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:54:02.403

[如果值被修改，会话](http://php.net/manual/en/ref.session.php)是您的选择。否则（该值在您的配置中是恒定的，而不是来自用户的修改，请选择[常量](http://php.net/manual/en/function.define.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:53:20.633

*   将您的所有内容放在一个单独的文件中，无论您想在哪里访问该变量，`variables/constants`都可以`constants.php` 包含该文件。`constants.php`
*   使用[$_SESSION](http://php.net/manual/en/session.examples.basic.php)

# php - 在 php 中使用 'header' 在加载时重定向的问题

> ID：16012214
> 
> 赞同：0
> 
> 时间：2013-04-15T09:50:55.757
> 
> 标签：php, redirect, header

尚未发送任何标题，这是页面上访问的第一段代码。

我正在制作一个多语言网站，因为它的文本很少，我试图根据用户的语言将用户重定向到不同的目录。我已经写了这个`php`，每次我评估网站时，我都会收到一个错误，它不会加载。

```
$lang=$_SERVER['HTTP_ACCEPT_LANGUAGE'];
$es=array("es", "es-es", "es-us", "es-mx");

if(array_key_exists($es, $lang)){
header('Location: http://www.site.com/es');
exit;
}else{
header('Location: http://www.site.com');
exit;
} 
```

在 Firefox 中，我收到错误***消息“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”***

在 Safari 中***，试图打开“网站名称”时发生了太多重定向。当打开一个页面时会发生这种情况，它将您重定向到另一个页面，当打开时，您将被重定向到另一个页面。***

但我在子文件夹中没有语言检查脚本的副本。当我使 if 语句非常简单*`if($lang =='es-es')`*时，它可以完美运行。我的语法一定有问题，但我看不出它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:55:48.913

据我了解，如果错误，请纠正我，如果您在 ELSE 语句中，它会将您重定向到同一站点，再次执行检查，并再次重定向您，从而导致无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T09:54:04.547

用于`in_array`检查 - 或将您的字典数组转换为哈希：

1)

```
if (in_array($lang, $es)){
  // ...
} 
```

2)

```
$es = array_flip(array("es", "es-es", "es-us", "es-mx"));
if (isset($es[$lang])) {
  // ...
} 
```

就目前而言，您的`$es`数组是一个索引数组，但您正在尝试在其*键*中搜索- 这些键是简单的数字（0、1、2、3...）。

然而这里还有另一个问题。如果有人试图在没有任何标题变化的情况下访问您的`site.com`内容怎么办？他们将再次被重定向到它……一次又一次……一次又一次，因为每个后续重定向都由该子句*重新检查。*`es``HTTP_ACCEPT_LANGUAGE`*`if`*

 *解决方案是制作一些默认页面，*不会*检查该语言设置；因此，永恒的重定向循环将被打破。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:55:23.050

您需要使用`in_array`而不是`array_key_exists`

首先，尝试这样做： `var_dump("<pre>", $lang); die();` 看看你实际上得到了什么`$lang`。

你得到什么，把它复制到你的`$es`数组值中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:33:18.250

当我遇到你的问题时...

改变这两行

```
 $es=array("es", "es-es", "es-us", "es-mx");

          if(array_key_exists($es, $lang)){ 
```

有以下几行

```
 $es=array("es"=>es, "es-es"=>es-es, "es-us"=>es-us, "es-mx"=>es-mx);

    if(array_key_exists($lang, $es)){ 
```

基本上在**array_keys_exits($key, $array-name)**函数中有两个参数传递&它是第一个参数是您要搜索的 (key) 的值，或者第二个参数是传递数组名称。

我认为您将带有空值的 array_key_exits 作为键和错误的语法描述传递。

[http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:57:04.700

之所以这么说，是因为您一次又一次地将其重定向到同一页面。`alert`如果您的条件为假或只是一条消息说找不到语言或类似的东西，请尝试重定向到其他页面。*

# c++ - __attribute__((packed)) 替代

> ID：16012221
> 
> 赞同：4
> 
> 时间：2013-04-15T09:51:05.537
> 
> 标签：c++, c, padding, packed

考虑以下结构：

```
typedef struct __attribute__((packed)) a{
    int a1;
    int b2;
    char cArray[5];
    int c3;
} Mystruct; 
```

现在在我的代码中，我这样做：

```
char source[50];
Mystruct mm;
//...
//initialization and other codes
//...
memcpy(&mm,source,sizeof(mm)); 
```

我正在尝试从字符串（更具体的文件）填充结构，因此我不想要填充。但认为包装也会影响性能。

所以我的问题是，还有其他方法可以完成我想要的吗？
是否可以对 C++ 中类的成员变量执行相同的操作（从字符串填充）？如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:13:12.197

我强烈建议您购买并阅读[Write Portable Code](http://www.hookatooka.com/wpc/)。你不想采用这种方法。不仅因为它不可移植（想想字节顺序问题），而且它确实会影响性能和原子性（非对齐的 32 位访问在没有 LOCK 前缀的 x86 上不是原子的）。编组/取消编组会好得多[‌</a>​，尽管前面的工作要多一些。](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)

[](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)

[编组/解组背后的想法是将您的数据从一种格式转换为另一种格式，然后再将它们转换回来。这就是像](http://en.wikipedia.org/wiki/Marshalling_%28computer_science%29)[Google Protocol Buffers](https://code.google.com/p/protobuf/)、[ZeroMQ](http://www.zeromq.org/)和许多其他框架这样以可移植的方式传输数据的方式。你基本上有专门的函数来获取你所说的“字符串”数据，你解析它，*验证*它，然后将它分配到你的结构中。您会看到编组和序列化在许多情况下可以互换使用。

例如，在您的情况下，您可能有一个带有原型的函数：

```
int
unmarshal_mystruct(const char *data, MyStruct &m); 
```

在内部，您将解析来自 的数据`data`，然后填充`m`. 它确实变得乏味，这就是为什么这么多人使用这些框架的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T10:02:42.620

使用序列化/反序列化代码。例如，读入字节数组，然后将值转换为结构。这就是许多框架所做的（即 CORBA 等）。

缺点：要编写更多的代码。

优点：更好的可移植性，LE/BE 平台之间的兼容性。例如，您的代码可能无法在某些 ARM 设备上运行。

示例（结构）：

```
typedef struct a
{
    int a1;
    int b2;
    char cArray[5];
    int c3;
} Mystruct; 
```

写作：

```
void write_int(FILE *f, int value)
{
    int32_t tmp = htonl(value); // write in BE form
    fwrite(&tmp, 4, 1, f);
}

void a_write(Mystruct *d, FILE *f)
{
    write_int(f, d->a1);
    write_int(f, d->b2);
    fwrite(d->cArray, 5, 1, f);
    write_int(f, d->c3);
} 
```

阅读：

```
void read_int(FILE *f, int *value)
{
    int32_t tmp;
    fread(&tmp, 4, 1, f);
    *value = ntohl(tmp);
}

void a_read(Mystruct *d, FILE *f)
{
    read_int(f, &d->a1);
    read_int(f, &d->b2);
    fread(d->cArray, 5, 1, f);
    read_int(f, &d->c3);
} 
```

# objective-c - NSDateFormater 带前导零

> ID：16012233
> 
> 赞同：0
> 
> 时间：2013-04-15T09:51:31.683
> 
> 标签：objective-c, cocoa

如何获得前导零的日、分和秒？

```
NSDateFormatter *lDateFormatter = [[NSDateFormatter alloc] init];
[lDateFormatter setDateFormat:@"LL-d-yyyy-H-m-s"];  
NSString *lTime = [lDateFormatter stringFromDate:[NSDate date]];
// Output : 04-3-2013-14-4-1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T09:53:50.290

您添加了两次日期说明符：`LL-dd-yyyy-HH-mm-ss`

```
NSDateFormatter *lDateFormatter = [[NSDateFormatter alloc] init];
[lDateFormatter setDateFormat:@"LL-dd-yyyy-HH-mm-ss"];
NSString *lTime = [lDateFormatter stringFromDate:[NSDate date]];
NSLog(@"Date: %@", lTime); 
```

将输出：`Date: 04-15-2013-12-04-51`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:54:19.927

使用`MM-dd-yyyy-HH-mm-ss`格式

# linux - 将 Shell 脚本 SQLite Select 语句的结果保存到变量

> ID：16012234
> 
> 赞同：1
> 
> 时间：2013-04-15T09:51:32.497
> 
> 标签：linux, sqlite, shell

我对 shell 脚本还很陌生，我只是在做这些脚本，因为我该是学习的时候了，而且我需要工作。

我一直在环顾四周，并尝试了多种方法来使其正常工作，但似乎无法弄清楚。

我有一个脚本，我想在其中访问 SQLite 数据库并将 select 语句的结果存储在变量中。

**到目前为止我尝试过的**

这只是与撇号内的内容相呼应。如果我在撇号之前删除美元符号，我会得到相同的结果。

```
track_name=$'sqlite3 "$database_name" << EOF
select name from track where id = "$required_track";
exit;
EOF' 
```

在这里，“track_name”附近出现语法错误

```
sqlite3 "$database_name" << EOF
track_name='select name from track where id = "$required_track";'
exit;
EOF 
```

我已经成功执行了 select 语句，但没有尝试将其存储在变量中，但它对我没有多大用处，无法存储它......

**任何帮助将非常感激**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:15:35.410

要将命令的输出存储到 BASH 变量中，您应该使用：

```
VAR_NAME=$(command); 
```

例如，如果要将系统当前时间存储到变量或列表目录命令弹出的结果中：

```
DATE_EXAMPLE_VAR=$(date); #Stores 'date' command output into DATE_EXAMPLE_VAR
echo $DATE_EXAMPLE_VAR; #Shows DATE_EXAMPLE_VAR contents

DIRCONTENTS=$(ls); #Stores a list of your current directory contents. 
```

同样，这应该适用于`sqlite3`：

```
track_name=$(sqlite3 "$database_name" "select name from track where id = $required_track") 
```

# d3.js - 支持鼠标悬停，鼠标移出，点击r3d4？

> ID：16012238
> 
> 赞同：0
> 
> 时间：2013-04-15T09:51:45.327
> 
> 标签：d3.js, raphael

我正在使用 d3 和 raphael 来支持较低版本的 Internet Explorer。我几乎完成了它，但我需要在我的用户界面上有鼠标事件，但正如我正在使用的那样

```
var d3_raphael = d3.raphael(paper); 
```

它不支持任何事件。我天真地尝试了一切..我的代码是

```
var node = chart.selectAll("g.node")
    .data(bubble.nodes(stuff).filter(function(d) { 
            return !d.children; 
        }))
    .enter().append("circle")
            .attr("class", "node")
    .attr("cx",function(d) { return d.x; })
    .attr("cy",function(d) { return d.y; })
    .attr("r", function(d) { return d.r; })
    .attr("fill", function(d) {return fill(d.packageName); })
            .on("mouseover",function(){alert('heeloo');}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T17:55:39.870

`;`设置填充属性后有一个分号。删除它必须解决您的问题。

# mysql - MySQL Union（或类似）查询

> ID：16012241
> 
> 赞同：0
> 
> 时间：2013-04-15T09:51:58.023
> 
> 标签：mysql, distinct, union

我有一些来自 MySQL 中的一对视图的预订数据。它们完美匹配列，主要区别在于放置在这些行之一中的预订代码。

上下文如下：这是用于计算运动营的数字。人们已预订，但可以进行额外的活动。

查看 1：所有专业预订（例如：足球课）。

视图 2：一般组。

由于软件老旧，订票过程中很多人为普通团订票，然后升级到旧舱位。业务中其他地方的一些事情使这进一步复杂化。

需要明确的是 - 视图 1 实际上包含视图 2 中的一些（但不完全是全部）人员。这两个组有一个交集。显然，人们不能同时分成两组（只有一组！）。

查找视图 2 中的所有人当然很容易......视图 1 也是如此。但是，我需要生成一份报告，该报告基本上是：

*   “View 1”覆盖“View 2”......或者换一种方式：
*   “查看 1” [排序] UNION “查看 2”

但是：我不确定这样做的最佳方法，因为有额外的复杂性：

每行大致如下（省略其他内容）如下：

```
User ID Timeslot Activity
1          A     Football
1          A     General
2          A     General
3          A     Football 
```

如您所见，这些行都涉及时间段 A： - 用户 2 进行一般活动。- 用户 3 踢足球。- 用户 1 做足球和一般运动。

由于这些项目不是唯一的，因此上面是一个 UNION（不同的），因为没有真正不同的行。

我需要的输出如下：

```
User ID Timeslot Activity
1          A     Football
2          A     General
3          A     Football 
```

在这里，足球已经“优先”于“一般”，因此我可以随时了解人们的位置。

这个 UNION 在许多字段上有一个不同的子句，但忽略了其他字段。

所以：有谁知道如何做相当于：

*   “将两个表加在一起，如果它是相同的时间段，则覆盖其中一个”

或者类似的东西：

*   “在 UNION DISTINCT 上选择性不同”。

干杯瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:46:05.713

尝试这个：

```
SELECT *
FROM
  (SELECT *,
          IF(Activity='General',1,0) AS order_column
   FROM `Table1`
   ORDER BY order_column) AS tmp
GROUP BY UserId 
```

如果 Activity 值为;这将添加`order_column`到您的原始表中作为值 这样做，我们可以选择这个临时表按此列排序（升序），所有具有一般活动的记录都排在所有其他记录之后。之后，我们可以简单地按用户 id 选择这个临时表分组的结果。没有任何聚合函数的按 clouse 分组采用匹配的第一条记录。`1``general`

编辑：如果你不使用 group by 而不使用聚合函数，这是一个“丑陋”的选择：

```
SELECT UserId,
       Timeslot,
       SUBSTRING(MAX(CASE Activity WHEN "General" THEN "00General" WHEN "Football" THEN "01Football" ELSE Activity END) , 3)
FROM `Table1`
GROUP BY UserId,
         Timeslot LIMIT 0 ,
                        30 
```

在这里，我们需要为 定义每个可能的值`Activity`。

# python - 在列表中搜索列表以及更多python 2.7不确定我需要更改什么

> ID：16012242
> 
> 赞同：0
> 
> 时间：2013-04-15T09:52:01.413
> 
> 标签：python, string, list

我有一个列表，其中包含一个名为`words`. 我有一个`random_sentence`可以使用任何句子调用的函数。我想在随机句子中搜索列表中`[0]`每个列表中的任何单词，然后用该列表中的相应单词切换它。希望这是有道理的。

```
words = [["I", "you"], ["i", "you"], ["we", "you"], ["my", "your"], ["our", "your"]]

def random_sentence(sentence):
   list = sentence.split()
   string = sentence
   for y in list:
      for i in words:
         for u in i:
            if y == u:
              mylist = i[1]
              string = string.replace(y, mylist)
   return string 
```

所以`random_sentence("I have a my pet dog")` 应该返回“你有你的宠物狗”。我的功能有时有效，但有时无效。说`random_sentence("I went and we")` 产生“你和你”没有意义。

如何修复我的功能以产生正确的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:53:31.443

首先，您粘贴的代码甚至无法运行。您的函数定义中有一个空格而不是下划线，并且您永远不会返回任何内容。

但是，在修复它之后，您的代码完全按照您的描述进行。

要找出原因，请尝试添加`print`s 以查看它在每个步骤中所做的事情，或者通过可视化器运行它，例如[this one](http://cscircles.cemc.uwaterloo.ca/visualize/)。

当你到达`y`is的时候`"we"`，你最终会这样做：

```
string = string.replace("we", "you") 
```

但这将取代*every* `we` in `string`，包括 in `went`。

如果你想以这种方式做事，你可能想修改每个`y`in `list`，然后`join`在最后将它们重新组合在一起，如下所示：

```
def random_sentence(sentence):
    list = sentence.split()
    for index, y in enumerate(list):
        for i in words:
            for u in i:
                if y == u:
                    mylist = i[1]
                    list[index] = mylist
    return ' '.join(list) 
```

如果你觉得这很难理解……好吧，我也是。你所有的变量名要么是一个字母，要么是一个误导性的名称（比如`mylist`，它甚至不是一个列表）。`i`此外，当您真的只想检查第一个元素时，您正在查看。看看这是否更具可读性：

```
replacements = [["I", "you"], ["i", "you"], ["we", "you"], ["my", "your"], ["our", "your"]]
def random_sentence(sentence):
    words = sentence.split()
    for index, word in enumerate(words):
        for replacement in replacements:
            if word == replacement[0]:
                words[index] = replacement[1]
    return ' '.join(words) 
```

但是，有一个更好的方法来解决这个问题。

首先，不要使用单词替换对列表，而是使用字典。然后，您可以摆脱整个循环并使其更易于阅读（也更快）：

```
replacements = {"I": "you", "i": "you", "we": "you", "my": "your", "our": "your"}
def random_sentence(sentence):
    words = sentence.split()
    for index, word in enumerate(words):
        replacement = replacements.get(word, word)
        words[index] = replacement
    return ' '.join(words) 
```

然后，与其尝试修改原始列表，不如构建一个新列表：

```
def random_sentence(sentence):
    result = []
    for word in sentence.split():
        result.append(replacements.get(word, word))
    return ' '.join(result) 
```

那么，这`result = []`正是`for …: result.append(…)`列表推导的用途：

```
def random_sentence(sentence):
    result = [replacements.get(word, word) for word in sentence.split()]
    return ' '.join(result) 
```

... 或者，由于您实际上不需要将列表用于任何目的，而是将其提供给`join`，因此您可以使用生成器表达式：

```
def random_sentence(sentence):
    return ' '.join(replacements.get(word, word) for word in sentence.split()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:00:09.477

```
>>> words = {'I': 'you', 'i': 'you', 'we': 'you', 'my': 'your', 'our': 'your'}
>>> def random_sentence(sentence):
        return ' '.join([words.get(word, word) for word in sentence.split()])
>>> random_sentence('I have a my pet dog')
'you have a your pet dog' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:57:11.110

字典/地图在这里更有意义，而不是数组数组。将您的字典定义`words`为：

```
words = {"I":"you", "i":"you", "we":"you","my":"your","our":"your"} 
```

然后，将其用作：

```
def randomsentence(text):
    result = []
    for word in text.split():
        if word in words:  #Check if the current word exists in our dictionary
            result.append(words[word])   #Append the value against the word
        else:
            result.append(word)          

    return " ".join(result) 
```

**输出：**

```
>>> randomsentence("I have a my pet dog")
'you have a your pet dog' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:52:53.827

问题是`string.replace`替换了作为单词一部分的子字符串。您可以手动构建这样的答案：

```
def random_sentence(sentence):
    list = sentence.split()
    result = []
    for y in list:
        for i in words:
            if i[0] == y:
                result.append(i[1])
                break
        else:
            result.append(y)

    return " ".join(result) 
```

注意`else`对应于`for`not `if`。

# actionscript-3 - AS3：如何打印整页影片剪辑？

> ID：16012243
> 
> 赞同：0
> 
> 时间：2013-04-15T09:52:01.783
> 
> 标签：actionscript-3, flash

我正在尝试在单击按钮时打印影片剪辑。影片剪辑最初是 300 x 400。我想将影片剪辑缩放到页面内可能的最大尺寸，然后打印它。

目前，我可以使用以下方法打印影片剪辑：

```
on(release)
{

   var pj:PrintJob = new PrintJob();
   pj.start();
   pj.addPage(my_mc);
   pj.send();

} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T12:06:12.013

您可以首先缩放动画剪辑，使其大小与页面的最大宽度和高度相匹配：

```
my_mc.width = pj.pageWidth;
my_mc.height = pj.pageHeight; 
```

然而，这将拉伸影片剪辑，因此为了解决这个问题，我们将 x 和 y 的比例设置为最小比例：

```
my_mc.scaleX = my_mc.scaleY = Math.min(my_mc.scaleX, my_mc.scaleY); 
```

最终代码：

```
var pj:PrintJob = new PrintJob();
pj.start();

var printArea : Rectangle = new Rectangle(0, 0, my_mc.width, my_mc.height);

my_mc.width = pj.pageWidth;
my_mc.height = pj.pageHeight;
my_mc.scaleX = my_mc.scaleY = Math.min(my_mc.scaleX, my_mc.scaleY);

pj.addPage(my_mc, printArea );
pj.send(); 
```

# python - 是否有一个命令或一段代码阻止 Python（命令行）在执行代码后立即关闭？

> ID：16012245
> 
> 赞同：0
> 
> 时间：2013-04-15T09:52:04.327
> 
> 标签：python, python-2.7

我需要你的帮助。我是新手，正在学习python。我知道编写基本代码。但是，当我在 Python（命令行）中执行代码时，它会立即关闭。有没有可以防止这种情况发生的代码或技巧？请帮帮我。干杯! PS：我在 Windows 中使用 Python 2.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:53:12.123

如果您在双击`.py`文件时看到命令提示符打开并立即关闭，这是意料之中的 - 这不是您应该运行基于控制台的 Python 脚本的方式。

您应该做的是通过“开始”菜单启动命令提示符，然后通过键入`c:\python27\python.exe myscript.py`或类似的方式运行您的程序。

或者，使用可以运行 Python 脚本的 Python IDE（例如 Idle）或编辑器（例如 Scite）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:55:23.867

正如 RichieHindle 的回答所示，通常的方法是从 Python 外部进行。

但是，如果您想创建一个可以双击的 .py 脚本，并且它会在退出之前等待响应，您可以将其添加到程序的末尾：

```
raw_input('Press ENTER to quit') 
```

（如果您以前编写过 .BAT 文件，这类似于写入`PAUSE`批处理文件。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T09:59:57.737

蟒蛇 2

```
raw_input('Press Enter To Continue') 
```

蟒蛇 3

```
input('Press Enter To Continue') 
```

# asp.net-mvc-4 - FluentSecurity 2.0 支持带参数的操作

> ID：16012246
> 
> 赞同：1
> 
> 时间：2013-04-15T09:52:06.290
> 
> 标签：asp.net-mvc-4, fluent-security

在我的 .net mvc 4 应用程序中，我使用最新版本的[FluentSecurity](https://github.com/kristofferahl/FluentSecurity) (1.4) 来保护我的操作。

这是一个说明我的问题的示例：

假设我有一个带有 2 个编辑操作（获取和发布）的控制器：

```
 public class MyController : Controller
{
    //
    // GET: /My/

    public ActionResult Edit(decimal id)
    {
        var modelToReturn = GetFromDb(id);
        return View(modelToReturn);
    }

    [HttpPost]
    public ActionResult Edit(MyModel model)
    {
        Service.saveToDb(model);
        return View(model);
    }

} 
```

现在，我想为每个操作设置不同的安全策略。为此，我定义（使用流利的安全性）：

```
 configuration.For<MyController>(x => x.Edit(0))
                                         .AddPolicy(new MyPolicy("my.VIEW.permission"));
    configuration.For<MyController>(x => x.Edit(null))
                                         .AddPolicy(new MyPolicy("my.EDIT.permission")); 
```

第一个配置是指get，第二个是post。如果你想知道我为什么要发送虚拟参数，你可以看看[这里](https://stackoverflow.com/questions/13663429/how-can-i-configure-fluent-security-policies-for-methods-that-take-parameters)和[这里](https://stackoverflow.com/questions/13203875/fluent-security-configuring-parameterized-controller-actions)。

问题是流利的安全性无法区分这两者之间的区别，因此这不起作用。

找不到克服它的方法（我对想法持开放态度），我想知道安装[新的 2.0 beta 版本](https://github.com/kristofferahl/FluentSecurity/wiki/Release-notes-2.0)是否可以解决这个问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:45:06.343

**目前无法对 FluentSecurity 中的每个签名应用不同的策略。**这是因为 FluentSecurity 无法知道 ASP.NET MVC 将调用什么签名。它所知道的只是动作的名称。因此 FluentSecurity 必须将两个动作签名视为一个动作。

**但是**，您可以将多个策略应用于同一操作（您不限于每个操作只有一个策略）。有了这个，您可以为每个策略应用一个 Http 动词过滤器。以下是它的外观示例：

**1）创建一个可以继承的基本策略**

```
public abstract class HttpVerbFilteredPolicy : ISecurityPolicy
{
    private readonly List<HttpVerbs> _httpVerbs;

    protected HttpVerbFilteredPolicy(params HttpVerbs[] httpVerbs)
    {
        _httpVerbs = httpVerbs.ToList();
    }

    public PolicyResult Enforce(ISecurityContext securityContext)
    {
        HttpVerbs httpVerb;
        Enum.TryParse(securityContext.Data.HttpVerb, true, out httpVerb);

        return !_httpVerbs.Contains(httpVerb)
            ? PolicyResult.CreateSuccessResult(this)
            : EnforcePolicy(securityContext);
    }

    protected abstract PolicyResult EnforcePolicy(ISecurityContext securityContext);
} 
```

**2) 创建您的自定义策略**

```
public class CustomPolicy : HttpVerbFilteredPolicy
{
    private readonly string _role;

    public CustomPolicy(string role, params HttpVerbs[] httpVerbs) : base(httpVerbs)
    {
        _role = role;
    }

    protected override PolicyResult EnforcePolicy(ISecurityContext securityContext)
    {
        var accessAllowed = //... Do your checks here;
        return accessAllowed
            ? PolicyResult.CreateSuccessResult(this)
            : PolicyResult.CreateFailureResult(this, "Access denied");
    }
} 
```

**3) 将当前请求的 HTTP 动词添加到 ISecurityContext 的 Data 属性并保护您的操作**

```
SecurityConfigurator.Configure(configuration =>
{
    // General setup goes here...

    configuration.For<MyController>(x => x.Edit(0)).AddPolicy(new CustomPolicy("my.VIEW.permission", HttpVerbs.Get));
    configuration.For<MyController>(x => x.Edit(null)).AddPolicy(new CustomPolicy("my.EDIT.permission", HttpVerbs.Post));

    configuration.Advanced.ModifySecurityContext(context => context.Data.HttpVerb = HttpContext.Current.Request.HttpMethod);
}); 
```

# android - 异步 OnCreate 错误

> ID：16012248
> 
> 赞同：0
> 
> 时间：2013-04-15T09:52:10.917
> 
> 标签：android, android-asynctask

嗨\我的 Async onCreate 不断出现错误。这是代码和 logcat 跟踪。任何反馈表示赞赏。启动画面运行，然后应用程序在启动主屏幕后停止

```
public class HomeActivity extends ListActivity { 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:00:00.157

doInBackground() runs on the background thread. So you cannot make changes to the ui on the background thread. You need to make changes or update ui on the ui thread.

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

When an asynchronous task is executed, the task goes through 4 steps:

1.  onPreExecute(), invoked on the UI thread before the task is executed. This step is normally used to setup the task, for instance by showing a progress bar in the user interface.

2.  doInBackground(Params...), **invoked on the background thread immediately after onPreExecute() finishes executing**. **This step is used to perform background computation that can take a long time**. The parameters of the asynchronous task are passed to this step. The result of the computation must be returned by this step and will be passed back to the last step. This step can also use publishProgress(Progress...) to publish one or more units of progress. These values are published on the UI thread, in the onProgressUpdate(Progress...) step.

3.  onProgressUpdate(Progress...), invoked on the UI thread after a call to publishProgress(Progress...). The timing of the execution is undefined. This method is used to display any form of progress in the user interface while the background computation is still executing. For instance, it can be used to animate a progress bar or show logs in a text field.

4.  onPostExecute(Result), invoked on the UI thread after the background computation finishes. The result of the background computation is passed to this step as a parameter.

Use runonuithread or update ui in onPostExecute() depending on the result returned in doInbackground().

Check the link below

[Doing UI task in doinbackground() in Android](https://stackoverflow.com/questions/15757251/doing-ui-task-in-doinbackground-in-android)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T09:54:55.793

你不应该在你的**doInBackground**`AsyncTask`中操作视图。

# javascript - 如何找到没有id的li的索引？

> ID：16012252
> 
> 赞同：1
> 
> 时间：2013-04-15T09:52:16.540
> 
> 标签：javascript, jquery, jsp

嗨，我正在使用 twitter 引导程序在 JSP 中创建选项卡。

```
<ul>
    <li id="first"><a href="#datacollector" target="main"data-toggle="tab">General</a></li>
    <li><a href="#dataTab" data-toggle="tab">Transport</a></li>
    <li><a href="#datamap" data-toggle="tab">Data Map</a></li>
    <li><a href="#schedule" data-toggle="tab">Schedule</a></li>
</ul> 
```

现在我首先给出了 id`LI`但动态地我将把 id 给`LI`.

如何找到`LI`没有id的索引？如果第二个没有 id，它应该只找到那个 LI 的索引，而不应该检查剩余的`LI`我怎么能得到那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:01:01.083

```
$('ul li').each(function(index){

            $(this).addClass('index-'+index);

        }); 
```

Example here:

[http://jsfiddle.net/superbshivam/HqpSF/](http://jsfiddle.net/superbshivam/HqpSF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:03:37.640

尝试使用`:not .first()`和`.index()`：

```
var idx = $('li:not([id])').first().index();
console.log(idx); 
```

### [演示](http://jsfiddle.net/2sg76/)

这将为您提供没有 id 的第一个 li 的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T09:58:21.453

您可能正在寻找[Siblings()](http://api.jquery.com/siblings/)。您还可以获得对[Parent()](http://api.jquery.com/parent/)的引用并从那里开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:07:43.450

非常快速和肮脏的方法，但它应该让你开始你需要的东西。

```
var indexWithoutId = -1;

$(document).ready(function() {
    findIndexWithoutId();
    console.log("without id: " + indexWithoutId);
});

function findIndexWithoutId() {
    $("li").each(function() {
        var index = $(this).index();
        var id = $(this).attr("id");

        if (typeof(id) === "undefined") {
            indexWithoutId = index;
            return false;
        }
    });
} 
```

[工作jsfiddle示例](http://jsfiddle.net/pcaldredbann/Gghxz/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T09:59:16.870

jQuery 有一个功能：

```
$('li').on('click',function(){
    alert($(this).index());
}); 
```

注意：`.index()`返回一个从零开始的索引。

[这](http://jsfiddle.net/AdK3s/)是一个工作的jsfiddle

要仅针对没有 id 的 li，请使用`:not()`选择器和`[id]`属性选择器：

```
$('li:not([id])').on('click',function(){
    alert($(this).index());
}); 
```

[更新了 jsFiddle](http://jsfiddle.net/AdK3s/1/)

**来源**

[jQuery API - .index()](http://api.jquery.com/index/)

# haskell - Haskell 高阶函数中的“减法”行为

> ID：16012255
> 
> 赞同：4
> 
> 时间：2013-04-15T09:52:29.310
> 
> 标签：haskell

我正在尝试编写此函数，该函数`f`在 x 上两次应用该函数

```
Prelude> applyTwice :: (a -> a) -> a -> a
Prelude> let applyTwice f x = f (f x) 
```

现在，当我尝试评估以下表达式时

```
Prelude> applyTwice (`subtract` 3) 10
Output: 10

Prelude> applyTwice (3 `subtract`) 10
Output: 4 
```

根据我的理解，`subtract`是一个中缀函数，所以给定的参数应该填充空位置（左或右操作数），因此第一个表达式`applyTwice (`subtract` 3) 10`应该表现得像

```
10 `subtract` 3 `subtract` 3 
```

因此，这种情况下的结果应该是`4`，但输出是`10`

而在另一种情况下，即`applyTwice (3 `subtract`) 10`输出是`4`，我期望它在哪里`10`

我在某个地方出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:06:14.063

您对`applyTwice`运算符部分符号的理解是正确的。但是，您可能对`subtract`所做的事情感到困惑。请参阅[库文档](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:subtract)，其中说：

> 一样`flip (-)`

`subtract`就像，`(-)`但论点颠倒了。所以，

```
 applyTwice (`subtract` 3) 10
=
  (`subtract` 3) ((`subtract` 3) 10)
=
  (`subtract` 3) (10 `subtract` 3)
=
  ((10 `subtract` 3) `subtract` 3)
=
  (3 - 10) `subtract` 3
=
  (-7) `subtract` 3
=
  3 - (-7)
=
  10 
```

对于其他表达式也是如此。

# hadoop - 无法通过 gdb env 中的 libhdfs.so

> ID：16012258
> 
> 赞同：0
> 
> 时间：2013-04-15T09:52:35.577
> 
> 标签：hadoop, gdb, hdfs

我的程序正在使用 libhdfs.so 进行 hdfs 读/写，我想设置一个断点进行调试，但是当这个程序运行到 hdfsConnect 点时，它会因分段错误而退出。

有趣的是，当我正常运行程序时，根本不会发生分段错误。

可能的根本原因是什么？在调试 libhdfs.so 时我应该设置一些运行时环境吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T06:28:28.633

事实证明这是一个 JNI 问题，而不是 libhdfs.so 特定问题，可以在这里找到解决方案： [Strange sigsegv while call java code from c++ through jni](https://stackoverflow.com/questions/13132669/strange-sigsegv-while-calling-java-code-from-c-through-jni)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:10:23.313

> 可能的根本原因是什么？

可能的根本原因是程序中的错误，它在 GDB 下表现为崩溃，但在 GDB 之外运行时仍然隐藏。

这使得问题更容易调试：相反（在 GDB 之外崩溃，在 GDB 下工作）通常更难。

你的第一步应该是在 Valgrind 下运行程序并确保它是干净的。

# pdf - TCPDF 显示空白页

> ID：16012261
> 
> 赞同：1
> 
> 时间：2013-04-15T09:52:43.287
> 
> 标签：pdf, tcpdf

我正在使用 tcpdf.php 创建一个 pdf。这是我的简单 html，当我打印 html 时，没关系，但是当我写 pdf 时它什么也没显示。

```
require_once('../config/lang/eng.php');
require_once('../tcpdf.php');
$pdf = new TCPDF(PDF_PAGE_ORIENTATION, PDF_UNIT, PDF_PAGE_FORMAT, true, 'UTF-8', false);
$html='
<div  style="background:#2185E7;color:#fff;padding:5px;overflow:hidden;width:786px;">
  <h3 style="margin-bottom: 0;  margin-top: 0;padding-left: 17px;text-align: left;  white-space: nowrap;float:left;">My Company name: 2533</h3>
  <p  style="margin: 0;  padding-right: 14px;text-align: right; white-space: nowrap;float:right;">321 32111 4</p>
</div>

<div  style="background:#2185E7;color:#fff;padding:5px;overflow:hidden;width:786px; margin:10px 0 0 0;">
  <p style="margin: 0;">Elegant 3 B/R + Maids in , Dubai </p>
</div>
';
$pdf->writeHTML($html, true, false, true, false, '');
$pdf->Output('example_006.pdf', 'I'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T07:35:14.317

您需要`color:#fff`在第一个 div 中删除 css attr。我不知道为什么，但是取出时就可以了。

P/S：TCPD 不理解属性边距和填充。我的解决方案是始终使用 html 标签表来布局所有通用 PDF。你应该试试看。

# java - 单链表到循环链表

> ID：16012264
> 
> 赞同：1
> 
> 时间：2013-04-15T09:52:53.530
> 
> 标签：java, linked-list, doubly-linked-list, circular-list

我一直试图通过调整我的 add() 和 remove() 方法将我的单链表变成一个双循环链表。

这是我的代码：

```
private LLNode<E> head;     // the first node in the list
private LLNode<E> tail;     // the last node in the list

// Adds the specified new item to the back of the list.
public void add(E newData)
{
    if (head == null)   // if the list is empty...
        addToHead(newData);       
    else    
        addAfter(newData, nodeAt(size - 1));
}

// Removes and returns the item at the specified index of the list.
public E remove(int index)
{
    if (index == 0)         // if removing from the head...
        return removeFromHead();
    else
        return removeAfter(nodeAt(index - 1));
}

    private void addToHead(E newItem)
    {
        LLNode<E> newNode = new LLNode<E>();
        newNode.data = newItem;
        newNode.next = head;      
        head = newNode;
        head.prev = tail;
        tail.next = newNode;
        size++;
    }

// Removes the head node from the list.
private E removeFromHead()
{
    if (head != null) {
        E temp = head.data;
        head = head.next;
        head.prev = tail;
        tail.next = head;
        size--;
        return temp;
    } else
        throw new NoSuchElementException();
}

// Adds a new node containing the specified data, after the
//  specified node in the list.
private void addAfter(E newItem, LLNode<E> where)
{
    if (where != null) {
        LLNode<E> newNode = new LLNode<E>();
        newNode.data = newItem;
        newNode.next = where.next;
        where.next = newNode;
        newNode.prev = where;
        size++;
    } else {
        throw new NoSuchElementException();
    }
}

// Removes the node after the specified node in the list.
private E removeAfter(LLNode<E> where)
{
    if (where != null && where.next != null) {
        E temp = where.next.data;
        where.next = where.next.next;
        where.next.prev = where;
        size--;
        return temp;
    } else
        throw new NoSuchElementException();
} 
```

在我的主要方法中：

```
TopSpinLinkedList<Integer> ll = new TopSpinLinkedList<Integer>(numTokens, spinSize);

    //fills LinkedList with tokens
    for(int i = 1; i <= numTokens; i++) {
        ll.add(i);
    } 
```

当我尝试调用此方法时：

```
//shifts all elements in LinkedList to left by one
public void shiftLeft()
{
    if(head == null || head.next == null)
        return;
    LLNode<E> temp = new LLNode<E>();
    temp = head;
    head = head.next;
    temp.next = null;
    tail.next = temp;
    tail = temp;
} 
```

在运行时出现 NullPointerException。我很确定这与我的 add() 和 remove() 方法有关。我只是不明白我到底做错了什么，使它成为一个双循环链表。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:57:24.860

在你的`addToHead`方法中，你确定你在做的`tail`时候已经初始化了你的变量`tail.next = newNode`吗？

尝试这个 ：

```
private void addToHead(E newItem)
    {
        LLNode<E> newNode = new LLNode<E>();
        newNode.data = newItem;
        head = newNode;
        tail = newNode;
        newNode.prev = newNode.next = newNode;
        size++;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:05:46.417

```
private void addToHead(E newItem){
    LLNode<E> newNode = new LLNode<E>();
    newNode.data = newItem;

    // head and tail are empty
    head = newNode;
    tail = newNode;
    head.next = newNode;
    tail.next = newNode;
    head.prev = newNode;
    tail.prev = newNode;
}

private void addAfter(E newItem, LLNode<E> where){
    if (where != null) {
        LLNode<E> newNode = new LLNode<E>();
        newNode.data = newItem;

        //this part is what you need
        newNode.next = where;
        newNode.prev = where.prev;
        where.prev.next = newNode; 
        where.prev = newNode;
        size++;
    } else {
        throw new NoSuchElementException();
    }
} 
```

//我已经更改了我的代码，现在应该可以了。//我将元素`where`向右移动了一个位置，并在其位置插入了 newNode。

另外，如果你使用双循环链表，你不需要有尾。你可以简单地摆脱它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-16T18:44:53.087

```
template<class T>
ostream& operator<<(ostream& os, CircularList<T>& ll) 
{
	if(!(ll.isEmpty()))
	{
		os<<"[";

		int size=ll.size();
		int counting=0;
		while(counting<size)
		{
			os<<ll.get(counting);
			if(counting+1<size)
				os<<",";
			counting++;
		}
		os<<"]";

	}
	else
	{
		os<<"[]";
	}
}

template<class T>		
CircularList<T>::CircularList()
{
	this->head = NULL;
}

template<class T>
CircularList<T>::CircularList(const CircularList<T>& other) 
{
	this->head=0;
	Node<T>* tempHead=other.getLeader();
	while(tempHead!=0)
	{
		Node<T> *temp = new Node<T>(tempHead->data);
		temp->next = 0;
		Node<T>* curr = this->getLeader();
		if (curr != 0)
		{
			while (curr->next != 0)
			{
			curr = curr->next;
			}
			curr->next = temp;
		}
		else
		{
			this->head = temp;
		}
		tempHead=tempHead->next;
	}
}

template<class T>
CircularList<T>& CircularList<T>::operator=(const CircularList<T>& other) 
{
	if(&other != this)
	{
		this->head=0;
		Node<T>* tempHead=other.head;
		while(tempHead!=0)
		{
			Node<T>* temp = new Node<T>(tempHead->data);
			temp->next = 0;
			Node<T>* curr = this->head;
			if (curr != 0)
			{
				while (curr->next != 0)
				{
				curr = curr->next;
				}
				curr->next = temp;
			}
			else
			{
				this->head = temp;
			}
			tempHead=tempHead->next;
		}
	}
    return *this;	
}

template<class T>
CircularList<T>* CircularList<T>::clone() 
{
	CircularList<T>* circle = new CircularList<T>(*this);
}

template<class T>
CircularList<T>::~CircularList()
{
	int count =size();
	Node<T>* current = this->head;
	int i=0;
	while (i<count)
	{
		Node<T>* next = current->next;
		delete current;
		current = next;
		i++;
	}
this->head = 0;
}

template<class T>
void CircularList<T>::insert(int index, T data) 
{
	Node<T> *j= new Node<T>(data);

	if((0 <= index) &&( index<= size()))
	{
		if(index==0)
		{
			if(isEmpty())
			{
				this->head=j;
			}
			else
			{
				Node<T>*skipping=this->head;
				this->head=j;
				this->head->next=skipping;	
			}
		}
		else
		{
			Node<T> *tempping =this->head;
			int counting =1;
			while(counting!=index)
			{
				tempping=tempping->next;
				counting++;
			}
			j->next=tempping->next;
			tempping->next=j;
		}
	}
	else
	{
		throw ("invalid index");
	}
}

template<class T>
T CircularList<T>::remove(int index)
{
	T pet;
	if(0 <= index && index<= size()-1)
	{
		if(!isEmpty())
		{
			Node<T> *ret=getLeader();
			Node<T>* skip=NULL;
			if(index!=0)
			{
			int i=1;
			while(i!=(index))
			{
				ret=ret->next;
				i++;
			}
			skip=ret;
			pet=get(index);
			ret=ret->next;
			if(ret->next==NULL)
			{
				delete ret;
				skip->next=NULL;
				ret=NULL;
			}
			else
			{
				skip->next=ret->next;
				delete ret;
				ret=NULL;
			}
		}
		else
		{
			    Node<T> *tmp = this->head->next;
			    pet=get(index);
				delete this->head;
				this->head = tmp;
		}
		return pet;
		}
		else
		{
			throw ("Empty list");
		}

	}
	else
	{
		throw ("Invalid index");
	}
}

template<class T>	
T CircularList<T>::get(int index) const
{
	if(this->head!=NULL)
	{
		if(0 <= index && index<= size()-1)	
		{
			int counting=0;
			Node<T>* p =this->head;
			while(p!=NULL)
			{
				if(counting==index)
				{
					return p->data;
				}
				counting++;
				p=p->next;
			}
	}
		else
		{
		throw ("invalid index");
		}
	}	
	else
	{
		throw("empty list");
	}
}

template<class T>
bool CircularList<T>::isEmpty()
{
	if(this->head==0)
	{
		return true ;
	}
	else
	{
		return false;
	}
}

template<class T>
void CircularList<T>::clear()
{
	Node<T>*serp=this->head;
	while(this->head!=NULL)
	{
		this->head=this->head->next;
		delete serp;
		serp=this->head;
	}
}

template<class T>
Node<T>* CircularList<T>::getLeader() const
{
	return this->head;
}

template<class T>
ostream& CircularList<T>::print(ostream& os)
{
	os<<*this;
}

template<class T>
int CircularList<T>::size() const
{
	int counting=0;
	Node<T> *serp =getLeader();
	while(serp!=NULL)
	{
		serp=serp->next;
		counting++;
	}
	return counting;
}

template <class T>
CircularList<T>& CircularList<T>::operator+(const CircularList<T>& other)
{
	CircularList<T>* serp=new CircularList<T>(*this);
	Node<T>* hey=other.getLeader();
	int counting=serp->size();
	int position=0;
	while(hey!=NULL)
	{
		serp->insert(counting,other.get(position));
		hey=hey->next;
		position++;
		counting++;
	}
	return *serp;
}
//a friend asked me to help him with some assignment i still have the code
```

# python - 将 bz2 压缩二进制文件导入为 numpy 数组

> ID：16012266
> 
> 赞同：3
> 
> 时间：2013-04-15T09:52:55.860
> 
> 标签：python, numpy, bzip2

我有一个包含数据数组的 bz2 压缩二进制（大端）文件。使用外部工具解压缩，然后将文件读入 Numpy 可以：

```
import numpy as np
dim = 3
rows = 1000
cols = 2000
mydata = np.fromfile('myfile.bin').reshape(dim,rows,cols) 
```

但是，由于有很多其他类似的文件，我无法事先单独提取每个文件。因此，我在 Python 中找到了 bz2 模块，它可能可以直接在 Python 中解压它。但是我收到一条错误消息：

```
dfile = bz2.BZ2File('myfile.bz2').read()
mydata = np.fromfile(dfile).reshape(dim,rows,cols)

>>IOError: first argument must be an open file 
```

显然，BZ2File 函数不返回文件对象。你知道读取压缩文件的正确方法是什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T09:57:41.173

`BZ2File` *确实*返回一个类似文件的对象（虽然不是一个实际的文件）。问题是您正在调用`read()`它：

```
dfile = bz2.BZ2File('myfile.bz2').read() 
```

这会将整个文件作为一个大字符串读入内存，然后您将其传递给`fromfile`.

根据您的版本`numpy`和`python`平台，从不是实际文件的类似文件的对象中读取可能无法正常工作。在这种情况下，您可以使用您读入的缓冲区`frombuffer`。

所以，要么这样：

```
dfile = bz2.BZ2File('myfile.bz2')
mydata = np.fromfile(dfile).reshape(dim,rows,cols) 
```

… 或这个：

```
dbuf = bz2.BZ2File('myfile.bz2').read()
mydata = np.frombuffer(dbuf).reshape(dim,rows,cols) 
```

（不用说，还有许多其他选择可能比将整个缓冲区读入内存更好。但如果您的文件不是太大，这将起作用。）

# angularjs - AngularJS - 获取已定义路由的列表 - $routeProvider

> ID：16012270
> 
> 赞同：11
> 
> 时间：2013-04-15T09:53:15.327
> 
> 标签：angularjs, angular-routing

我正在尝试实现`named routes`，所以我不必编写整个路径（经常更改）。

我在想我可以写一个服务来返回定义的路由列表和一个将对象转换为路由的过滤器

使用示例如下所示：

```
<a ng-href="{id:1}|route:'detail'">Click here!</a> 
```

如果我在路由定义中添加了 name:'detail'，这将生成以下结果：

```
<a href="#/detail/1/">Click here!</a> 
```

我认为这很简单，但是：

**如何获取已定义路线的列表？**

我在想我可以使用`routeProvider`，但是 AFAIK 它没有我可以访问的公共方法或属性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-03T22:49:01.147

事实证明这很简单：

[http://plunker.co/edit/GNZxcvK4hfQ9LrlSvasK?p=preview](http://plunker.co/edit/GNZxcvK4hfQ9LrlSvasK?p=preview)

```
Components.filter('url', function ($route) {
  function resolveRoute(options, route) {
    var parts = route.split('/');
    for (var i = 0; i < parts.length; i++) {
      var part = parts[i];
      if (part[0] === ':') {
        parts[i] = options[part.replace(':', '')];
        if (parts[i] == undefined) throw Error('Attribute \'' + part + '\' was not given for route \'' + route + '\'')
      }
    }
    return parts.join('/');
  }

  return function (options, routeName) {
    var routes = [];

    angular.forEach($route.routes,function (config,route) {
      if(config.name===routeName){
        routes.push(route);
      }
    });

    if (routes.length == 1) {
      return resolveRoute(options, routes[0]);
    }
    else if (routes.length == 0) {
      throw Error('Route ' + routeName + ' not found');
    }
    throw Error('Multiple routes matching ' + routeName + ' were found');
  }
}); 
```

# wpf - 什么取代了过时的属性 Window.PersistId

> ID：16012273
> 
> 赞同：0
> 
> 时间：2013-04-15T09:53:15.973
> 
> 标签：wpf, application-settings

我正在使用以下代码：

[http://www.codeproject.com/Articles/15926/Save-and-Restore-the-Location-Position-and-State-o](http://www.codeproject.com/Articles/15926/Save-and-Restore-the-Location-Position-and-State-o)

坚持我的 XAML 窗口位置。

```
#region WindowApplicationSettings Helper Class
public class WindowApplicationSettings : ApplicationSettingsBase
{
    private WindowSettings windowSettings;

    public WindowApplicationSettings(WindowSettings windowSettings)
        : base(windowSettings.window.PersistId.ToString())
    {
        this.windowSettings = windowSettings;
    } 
```

不幸的是，该代码使用了微软现在已经过时的 Window.PersistId。

> “PersistId 是一个过时的属性，可能会在未来的版本中删除。此属性的值未定义。”

替换此属性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:55:12.423

我不知道应该使用哪个属性来代替 PersistId。我找到了这个解决方案来保留窗口设置。不过我自己没试过。

[http://www.thomaslevesque.com/2008/11/18/wpf-binding-to-application-settings-using-a-markup-extension/](http://www.thomaslevesque.com/2008/11/18/wpf-binding-to-application-settings-using-a-markup-extension/)

# sqlite - 如何确定范围值的数量？

> ID：16012282
> 
> 赞同：-2
> 
> 时间：2013-04-15T09:53:35.823
> 
> 标签：sqlite

如何获得范围值的数量？
例子：

FromMemberNo 100 到MemberNo 101

所以 QUANTITY 将是 2。

```
Group  FromMemberNo      ToMemberNo    
    A             100       101            
    A             200       204            
    X             100       101            
    X             301       302           
    A             500       500            
    A             600       600 
```

我想获得每个范围的数量

```
 Quantity
    2
    5
    2
    2
    1
    1 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:20:53.787

`select (ToMemberNo-FromMemberNo+1) as Quantity from your_table;`

# c# - C# 项目上的项目协作

> ID：16012285
> 
> 赞同：1
> 
> 时间：2013-04-15T09:53:41.990
> 
> 标签：c#, winforms, collaboration

我的一个朋友和我正在一起做一个 C# 项目。他正在制作一个角色，我正在制作一个角色，但在他的角色中，他正在调用我的一个窗口。现在，我们如何以最佳方式将工作组合在一起？所以我们可以在不同的屏幕上同时工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:16:30.840

有许多工具可以与团队共享项目，例如[SVN](http://www.visualsvn.com/server/)或 Microsoft 的团队基础服务器

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:28:55.470

您应该使用任何源代码控制系统。

在您的情况下，请避免使用 Microsoft 的源代码控制系统产品。Visual Source Safe 是一团糟，而且非常危险。TFS 的设置非常繁重且复杂。

SVN 在 Windows 上很容易设置，因为[Visual SVN Server](http://www.visualsvn.com/server/)对于简单的场景是免费的。

[Git](http://git-scm.com/)也可以是一个不错的选择，因为它支持简单的离线模式（实际上是这种情况，因为 Git 的去中心化特性），这很有用。

SVN 和 Git 在 Windows + Visual Studio 上都有很好的工具支持。

可能还有更多协议，但我成功地使用了这两个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:16:18.887

SVN 是一个好的开始，但我更推荐查看[Team Foundation Services](http://tfs.visualstudio.com/)。在这种情况下，您不需要设置任何东西。只需使用 Windows LiveId 注册，然后开始使用 SourceControl。它与 Visual Studio 集成，在我看来使用起来非常直观。虽然它需要互联网访问，但可以在局域网中安装和使用 SVN。

# r - 在 Emacs 中启动 R 时如何启用自动完成模式？

> ID：16012289
> 
> 赞同：4
> 
> 时间：2013-04-15T09:54:01.430
> 
> 标签：r, emacs, autocomplete, ess

在 Emacs + ESS 中，我可以通过

```
M-x R Return 
```

在我的系统上，目前尚未启用自动完成模式。我必须

```
M-x auto-complete-mode Return 
```

启用它。

有没有办法自动启用它？

```
1 OS:       Ubuntu  12.10   64-bit
2 R:        2.15.1
3 Emacs:    24.1.1
4 ESS:      12.04-4 
```

谢谢。

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:56:34.960

您可以通过自定义或使用以下内容将`ess-use-auto-complete`变量设置为：`t``.emacs`

```
(setq ess-use-auto-complete t) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-28T04:23:17.113

我遇到了同样的问题，以下代码对我有用。

```
(require 'package)
(add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/") t)
(package-initialize)  ;load and activate packages, including auto-complete
(ac-config-default)
(setq ess-use-auto-complete 'script-only)
;;if not working, use the following instead of (setq ess-use-auto-complete 'script-only)
;;(global-auto-complete-mode t) 
```

# git - Git - 克隆回购后我的分支没有显示

> ID：16012291
> 
> 赞同：1
> 
> 时间：2013-04-15T09:54:03.300
> 
> 标签：git

我知道（截至目前），当我克隆一个 repo 时，我并没有真正克隆它，我只是将 master 关闭 - 这就是它的工作原理，对吗？

所以我需要用跟踪检查一个远程分支，这很好，但是我如何查看远程分支以知道我可以检查什么？

**更新**

所以事实证明我应该在本地看到他们使用`git branch -a`or`-r`但我没有。所以我的问题仍然存在，如果我所有的分支都被推送到远程，我如何看到它们？他们在哪里？

卢克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:58:38.677

> 我知道（截至目前），当我克隆一个 repo 时，我并没有真正克隆它，我只是将 master 关闭 - 这就是它的工作原理，对吗？

不，当你克隆一个 repo 时，你确实克隆了它。在那之后，您拥有与该回购相关的所有内容。

使用命令`git branch -r`列出远程分支。

编辑：

以为我可以详细说明一下。术语“远程分支”在这里可能有点误导。这些分支并不完全是远程的，它们是本地的，但它们代表了您上次执行 git fetch（或 pull）时远程分支的状态。我希望这可以为你澄清一些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:57:22.790

使用“git branch -r”查看远程分支。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:23:31.707

我认为服务器有问题。显然，没有带有 Git 的服务器产品，所以我必须使用我能找到的任何东西，所以我使用了一个简单的 ASP.NET Git 服务器项目，可在一个人的博客上找到。

有时 Git 挂起，我注意到 IIS 工作进程以 99% 的速度旋转，这是个坏消息。我们也都在通过 VPN 运行，这可能是一个促成因素。

我经常不得不擦除服务器存储库并再次推送所有内容，问题非常严重。

我还在使用新的 Visual Studio 2012 Git 支持。这告诉我我的所有分支都已发布，尽管我不认为它们已发布。

再次推送我的所有分支后，它们现在在克隆到新文件夹时显示。正如我所说，我认为我们这里的 Git 设置已经损坏或者真的不喜欢我们的环境。

# c# - 在内存中创建 XML 并传递给另一个方法以通过 XSLT 进行转换

> ID：16012292
> 
> 赞同：0
> 
> 时间：2013-04-15T09:54:03.407
> 
> 标签：c#, .net, xml, xslt, xmltextwriter

这就是我想要做的。我确信解决方案很简单，我只是还没有找到它（相信我我一直在尝试）。

*   我有一个我想用来创建 XML 数据的对象。（我使用 XmlTextWriter 来创建元素。）
*   然后我想将 XML 数据传递给另一个方法。
*   此方法应获取 XML 数据并将其用作 XSLT 转换以获取 HTML 的输入。

Transform 方法适用于 XMLReader，所以基本上我想先用 XmlTextWriter 编写一些东西，然后将其传递给 XmlReader。

当然，我可以只写入文件然后再次读取文件，但我认为只处理内存中的数据而不实际将其写入文件会更容易。

我不直接使用 HtmlTextWriter 的原因很简单：据我了解，这仅适用于 .NET 4.5，并且由于各种原因，该项目需要保留在 4.0 中。

稍后还可以选择从另一个来源传递 XML，这就是我想坚持使用 XSLT 转换的原因。此外，这将使以后更容易更改 HTML 表单的布局，因为我只需要更改 XSLT 模板而不更改实际代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:06:00.460

你可以：

```
StringBuilder sb = new StringBuilder();
var writer = new XmlWriter(sb);

WriteStuff( writer );

writer.Flush();

string s = sb.ToString();

XmlReader reader = new XmlReader(s);

DoStuff(reader); 
```

不确定你想做什么，或者这是否是最好的方法......但你可以。

* * *

这也将与 MemoryStream 以类似的方式工作，这可能更适合大量数据......只是不要忘记刷新......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:39:35.377

每当您想将有序数量的字节发送到另一个“thingy”时，它需要以与发送字节相同的顺序来解释字节，使用 System.IO.Stream 类是明智的。

使用这个类，你声明你并不真正关心字节的去向，只要顺序保持不变。所以字节的写入者和读取者都不关心字节流是否被放入一个文件，一块内存，甚至是纸带阅读器，只要顺序没有改变，并且没有字节被放入添加或丢失。

在实践中：只要您认为可以将它们写入文件，然后将文件名提供给其他人，您也可以使用流。您或命令您将其写入文件的对象会使用流的目标（内存/纸带/文件）创建流。然后将流传递给可以读取流的另一个。

示例：MySpecialObject 有一些数据：MySpecialData。有一些类可以序列化和反序列化这些特殊数据。这些类对数据在何处被序列化不感兴趣：patertape？软盘？记忆。他们只需要知道他们可以通过写入和读取字节流来（反）序列化它。在这种情况下，您使用 System.IO.Stream 的实例。

（我写了命名空间，以便更容易找到类）

```
class MySerializer
{
    private System.IO.Stream myStream = null;

    public MySerializer(system.IO.Stream stream)
    {
        this.myStream = stream;
    }

    public void Serialize(object data)
    {
        System.Xml.Serialization.XmlSerializer serializer =
            new System.Xml.SerializationXmlSerializer(data.GetType());

    System.XML.XmlWriter writer = System.XML XmlWriter.Create(this.MyStream);

    serializer.Serialize(writer, data);
    }
} 
```

如果仔细观察，您会发现使用文件的唯一区别是 XMLWriter.Create() 中的参数

现在在 mySpecialObject 中使用 this：

```
public void SerializeMySpecialData()
{
    System.IO.Stream myStream = new System.IO.MemoryStream();
    // in this case: read and write using only memory.
    // if you want to write to something else, for instance a file,
    // create a file stream.
    // or any other subclass from Sytem.IO.Stream. The serializer won't notice
    // where it is actually stored.
    MySerializer mySerializer = new MySerializer(myStream);
    mySerializer.Serialize(mySpecialData);
    myStream.Flush();
    myStream.Close();
    myStream.Dispose(); // this function will probably also flush and close
} 
```

从流中读取 XML 类似于从文件中读取 XML：

```
public object Deserialize(System.Type expectedDataType)
{
    object data = null;
    System.Xml.Serialization.XmlSerializer deserializer =
        new System.Xml.SerializationXmlSerializer(expectedDataType);

    System.XML.XmlReader reader = System.XML XmlReader.Create(this.MyStream);

    deserializer.Deserialize(reader, data);
    return data;
} 
```

再一次：优点是调用者决定数据的实际存储位置。如果数据存储在不同类型的媒体上，序列化类将看不到差异，因此不必更改。

您还可以决定对存储数据的序列化类的用户隐藏。在这种情况下，序列化类的构造函数会创建流。如果您希望所有数据都在同一个介质上进行序列化，这种方法会很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T22:21:02.163

为了节省 xml 解析，我建议使用 XmlWriter 将所有数据写入 XmlDocument，然后从中创建 XmlReader：

```
//create xml data
XmlDocument doc = new XmlDocument(); 
using (XmlWriter writer = doc.CreateNavigator().AppendChild()) 
{
   CreateXmlData(writer);  
}

//pass xml data to transform as reader
using (XmlReader reader = new XmlNodeReader(doc))
{
  Transform(reader);
} 
```

# google-app-engine - NDB HRD 事务，哪个祖先确定实体组？

> ID：16012302
> 
> 赞同：0
> 
> 时间：2013-04-15T09:54:41.113
> 
> 标签：google-app-engine, app-engine-ndb, ancestor

它是正在写入的实体的最近还是最远的父亲属，它决定了实体组？（**问题 1**）因为，如果我有，

两个同时请求写入两个不同的实体，在此示例中，它们都具有 Data 实体的直接父级（键为“2”），并且具有以下祖先：

```
Person:9 > Collection:3 > Script:4 > Data:2 > Record of Tom Cruise
Person:9 > Collection:3 > Script:4 > Data:2 > Record of Shia La Boef 
```

在任何一种情况下，它们都属于同一个实体组，要么锚定在实体 Person:9，要么锚定在实体 Data:2。哪个是实体组的正确确定者，Person:9 或 Data:2？此外，如果有*两种*从 Data:2 派生的实体，比如 Record 和 Scheme，那么所有 Record 和 Scheme 实体是否属于同一个实体组，由 Data:2 锚定，或者由于是不同的种类而属于单独的实体组？（**问题2**）

*顺便说一句，如果是 Person:9 确定了实体组，并且父级下的不同种类不会在该父级下形成不同的实体组，那么**从**Person:9 继承的所有内容都是同一个实体组，并且必须编写在系列中，恐怖*

由于在此示例中，我同时对同一个实体组执行这些相同类型的实体的写入，因此它们将被连续应用，因此与可以同时应用它们相比，需要“双倍的时间”。

对于这种“加倍”时间，有什么好的解决方案？（**问题 3 - 可选！**）

我想到了以下几点：

因为我知道两个单独的写入必须由两个单独的客户端实例启动，所以我可以向链中添加另一个祖先，它表示执行写入的客户端实例，如下所示：

```
Person:9 > Collection:3 > Script:4 > Data:2 > **Client:92** > Record of Tom Cruise
Person:9 > Collection:3 > Script:4 > Data:2 > **Client:37** > Record of Shia La Boef 
```

这样，写入将属于不同的实体组（只要 Person:9 锚定该组的假设是错误的），因此始终可以同时执行。AppEngineer/专家可以对此进行权衡吗？（**问题4**）

此外，由于我强制限制单独的客户端只能向数据存储发出串行请求，并且我可以保证单个客户端进行的任何写入永远不会超过每秒 1 次，如果没有任何性能影响，则上述方法，如果它有效，意味着*对性能的影响为零*，只要我有足够的独立客户端（而且，他有足够的**配额**），我可以尽可能快地对数据存储进行尽可能多的写入，就像 HTTP 可以携带它们一样快。AppEngineer/专家可以对此进行权衡吗？(**问题 5** )

我看到的这种***组拆分***方法的唯一问题是，查询 Data:2 父项下的 Record 实体现在很复杂，因为即使记录在语义上相关，它们也被不同的客户端**分开**。所以为了收集*所有*的记录，我需要先收集**所有**的客户，然后收集所有的记录。任何人都可以看到这是否会产生极其可怕的性能影响，执行这种“查询您刚刚查询的孩子的所有孩子”查询......？AppEngineer/专家可以对此进行权衡吗？(**问题 6** )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:39:38.360

你在这里有一些误解。

首先，文档对实体组的构成非常明确：它是根实体下的*所有内容。*

但是，我不知道您从哪里得到这样的想法，即在实体组中写入在某种程度上比在实体组外部更“连续”。文档没有说，或暗示它。它唯一提到的一点是，对单个实体组的写入速度不超过每秒 1 次。

您的其余问题根本没有意义：向链中添加另一个元素不会更改根实体。

我不确定你为什么首先需要如此深的实体组链。文档[关于扩展的建议](https://developers.google.com/appengine/articles/scaling/contention?hl=en)是保持实体组较小。如果每个叶子实体只会被一个客户端写入，听起来客户端本身应该是根，路径的其余部分根本不应该是祖先的一部分：也许你可以使用 ReferenceProperty 来引用这些实体中的一个或多个通过其密钥。

# regex - 正则表达式在等号之后捕获所有内容并在逗号之前结束

> ID：16012303
> 
> 赞同：0
> 
> 时间：2013-04-15T09:54:43.423
> 
> 标签：regex

我有一个要分隔的字符串，但问题是，正如您在我的字符串中的 strTitle 参数下面看到的那样，在文本“sim，test”中包含一个逗号

我如何使用正则表达式来捕获结​​果并将逗号替换为 `&sbquo;`？

```
string strTest = "intWhole = 1, strTitle = sim, test, intClass = 3,"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:10:01.867

鉴于您的语言/平台支持前瞻，您可以尝试以下操作：

搜索：`,(?!\s*$|\s*\S+\s*=)`
替换为：`&sbquo;`

将匹配任何**不**跟`zero or more white spaces and then end of line`or的逗号`zero or more white spaces, one or more non-whitespace characters, one or more white spaces and a = character`

所以基本上任何不在声明末尾的逗号（因为这些逗号后面是行尾或新变量）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:18:05.637

试试这个正则表达式。每场比赛都应该有两个捕获组 - 名称和值。基本上，它搜索**在逗号****开头**或之后的字符串，然后捕获组为您获取**名称**。然后**等号**匹配。然后一个捕获组为您提供必须后跟**字符串结尾的****值**或**另一个值**（通过正向前瞻）。

 ******这里的关键是***不***具有相等的登录值。

```
(?:^|(?:, )([a-zA-Z]+)(?: = )(.+)(?=$|(?:, [a-zA-Z]+ = )) 
```

有了结果，您可以在值中轻松替换逗号（取决于您使用的语言）。顺便说一句，上面是java正则表达式。******

# css - 如何固定div的位置

> ID：16012307
> 
> 赞同：0
> 
> 时间：2013-04-15T09:54:55.043
> 
> 标签：css

在我的网页中，一个分区应该位于页面左侧的固定位置。据我所知，我使用过

`position:fixed;top:100px;left:20px;`. 通过使用此代码，我得到了我想要的确切位置。但是当我向下滚动页面时，该部门位于同一位置并且在该部门的顶部，我得到了 100px 的空间，因为我已经放弃了`top:100px`。但我不想要那个空间。请帮我。

提前致谢， Sree 公羊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T09:57:03.730

如果您的意思是您希望事物保持在*确切*位置，无论当前视口如何，而是与整个文档相关，那么您需要一个*绝对*位置，而不是*固定*位置：

```
position:absolute;
top:100px;
left:20px; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:01:06.500

So as to fix the position of a div, you must apply the absolute position.

It makes the div stay in the particular position no matter what.

The code shall be:

```
position : absolute;
top : 100px;
left : 20px; 
```

Good Luck! :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:14:44.857

您可以从[CSS POSITIONS REFERENCE更好地了解各种 CSS 位置](http://www.w3schools.com/css/css_positioning.asp)

现在请尝试进行以下更改

```
position : absolute;
top : 100px;
left : 20px; 
```

# javascript - emberjs 没有处理该事件

> ID：16012309
> 
> 赞同：0
> 
> 时间：2013-04-15T09:54:58.723
> 
> 标签：javascript, jquery, ember.js

我尝试复制搜索字段，就像它们在[emberjs.com](http://emberjs.com/guides/controllers/#toc_storing-application-properties)上显示的那样，但是由于某种原因，我的代码在输入查询并按 Enter 或单击提交按钮时不断产生以下错误（在 google chrome 中）：

```
Uncaught Error: Nothing handled the event 'MyApp.ApplicationController.doSearch'. 
```

我正在使用的代码可以在[http://jsfiddle.net/Mn2yy/查看](http://jsfiddle.net/Mn2yy/)

有人可以解释为什么会发生此错误以及我需要做什么来解决它吗？

编辑：如果链接断开，这些是代码的相关部分：

搜索页面路径：

```
MyApp.SearchRoute = Ember.Route.extend({
    setupController: function(controller) {
        controller.set('searchQuery', this.get('query'));
    },

    renderTemplate: function() {
        this.render('searchpage', { into: 'container' });
    }
}); 
```

应用控制器：

```
MyApp.ApplicationController = Ember.Controller.extend({
    // the initial value of the `search` property
    search: '',

    doSearch: function() {
        // the current value of the text field
        var query = this.get('search');
        this.transitionToRoute('search', { query: query });
    }
}); 
```

和模板：

```
<script type="text/x-handlebars" data-template-name="container">
    <button {{action "doSearch" target="MyApp.ApplicationController"}} rel="tooltip-bottom" title="search" class="icon"><i class="icofont-search"></i></button>
    {{view Ember.TextField valueBinding="MyApp.ApplicationController.search" action="MyApp.ApplicationController.doSearch"}}

    {{outlet}}
</script>
<script type="text/x-handlebars" data-template-name="searchpage">
    <h1>Search</h1>
    {{#linkTo "home"}}Homepage{{/linkTo}}
    <p>You searched for: "{{searchQuery}}"</p>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:59:40.367

您不应该对绑定、目标等使用绝对路径，例如`MyApp.ApplicationController.search`.

由于您在应用程序控制器上声明了`search`属性和`doSearch`操作，因此只需键入：`{{view Ember.TextField valueBinding="search" action="doSearch"}}`

# sharepoint-2013 - 部署 Sharepoint 2013 计时器作业时出错：对象“proc_putObjectTVP”、数据库“MSSQL”、模式“dbo”的执行权限被拒绝

> ID：16012310
> 
> 赞同：2
> 
> 时间：2013-04-15T09:55:00.623
> 
> 标签：sharepoint-2013, sharepoint-timer-job

在功能激活时尝试创建自定义 SharePoint 计时器作业时，我从日志文件中收到以下错误：

System.Data.SqlClient.SqlException (0x80131904)：**对象“proc_putObjectTVP”、数据库“MSSQL”、模式“dbo”的执行权限被拒绝。** 在 System.Data.SqlClient.SqlConnection.OnError（SqlException 异常，布尔 breakConnection，Action`1 wrapCloseInAction）在 System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning（TdsParserStateObject stateObj，布尔 callerHasConnectionLock，布尔 asyncClose）在 System.Data.SqlClient.TdsParser System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) 在 System.Data.SqlClient.Sql 的 .TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)。 .. 5c6d109c-dbc6-e02e-7ae4-010d7f559e0b

为了使它工作，我找到了存储过程 proc_putObjectTVP 并授予站点 apppool 用户 ID 的执行权限。它按预期工作。

我的问题是：

这是 Sharepoint 2013 中的错误吗？这是正确的方法吗？（在生产环境中，服务器管理员可能不允许我执行此类操作）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-31T09:51:49.390

我在用于 SharePoint 2013 服务的帐户的事件日志中遇到了类似的错误：

> SQL Server 实例 'XXXXXXXXX' 上的数据库 'XXXX_Config' 中的用户 'Name: XXXXX\SP_Services SID: xxxxxxxxxxxxxxx ImpersonationLevel: None' 的 SQL 数据库权限不足。下面包括来自 SQL Server 的其他错误信息。
> 
> 对象“proc_putObjectTVP”、数据库“XXXX_Config”、模式“dbo”的 EXECUTE 权限被拒绝。

谷歌搜索大量博客文章推荐了将所需权限应用于存储过程的相同方法。我个人不喜欢这种方法，但是我最终发现这篇[TechNet 帖子](https://social.technet.microsoft.com/Forums/office/en-US/88c2c219-e1b0-4ed2-807a-267dba1a2c0b/execute-permission-was-denied-on-the-object-procputobjecttvp?forum=sharepointadmin)通过将存储的过程添加到`WSS_Content_Application_Pools`角色的安全对象来授予所需的权限。

使用 SQL Server Management Studio 执行以下操作：

> 1.  展开数据库，然后展开 SharePoint_Config 数据库。
> 2.  展开安全 -> 角色 -> 数据库角色
> 3.  找到 WSS_Content_Application_Pools 角色，右键单击它，然后选择 Properties
> 4.  单击 Securables，然后单击搜索
> 5.  接下来单击特定对象，然后单击确定
> 6.  单击对象类型并选择存储过程。点击确定
> 7.  添加存储过程'proc_putObjectTVP'并单击确定（如果它没有自动授予它执行权限；您需要单击“执行”上的复选框并保存）

使用此方法，添加到`WSS_Content_Application_Pools`角色的任何新帐户都将拥有正确的权限，从而防止问题再次出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T00:30:00.680

`SPDataAccess` role in `SharePoint_Config` was configured to execute `proc_putObjectTVP` for my install of SharePoint 2013 (which has been a trial-by-fire to get used to SQL Server 2012), anyway, making sure my sharepoint users had that role set seems to have done the trick (and of course brought up more errors to debug, now that more things are successfully starting...)

`SPDataAccess` (also written as `SP_DATA_ACCESS`) has been a useful role to Google for, bringing up tons of good resources and tips to fix one problem or another. I'll be reading blogs all night. I suspect configuring databases is old hat for quite a few SharePoint admins and devs, but it's not as well-explained, particularly as the wizard does so much (and so little) for you.

I signed up for Safari Books just to access [http://my.safaribooksonline.com/book/programming/microsoft-sharepoint/9781118655047](http://my.safaribooksonline.com/book/programming/microsoft-sharepoint/9781118655047) and books like it. It's useful to help me "think like SharePoint", though Google has been just as much help. (More, really.)

# javascript - Fineuploader fileState Type Error on cancel/cancelAll/reset

> ID：16012313
> 
> 赞同：0
> 
> 时间：2013-04-15T09:55:11.033
> 
> 标签：javascript, fine-uploader

我正在使用 FineUploaderBasic 将一些上传功能构建到应用程序中。除了我尝试取消文件（在 onupload 回调期间满足条件时）之外，一切都很好。我收到此错误：

TypeError: fileState[id] is undefined ...var fileOrBlob = fileState[id].file || 文件状态[id].blobData.blob,

onupload 回调参数 id 为 0，名称为文件的正确名称。在这一点上没有很多 fileState 信息是有道理的，因为 onupload 过程在上传之前运行 - 那么为什么 reset 或 cancel* 仍然会走这么远......

我应该如何取消一个（或多个文件）或如何随意重置上传器。

注意我还应该补充一点，该错误不是致命的——事实上，该功能甚至看起来工作正常——但日志中的错误并不是很好。

代码摘录：

```
function UploadButton(element, opts)
{
    this.fineUploaderInst = null;
    this.opts = opts;
    this.element = element;
    var container = this;
    var originalBorder = null;
    var uploader = null;

    this.element.addClass("qq-upload-button");

    this.applyFineUploader = function() {
        this.uploader = new qq.FineUploaderBasic({
            button: this.element[0],
            request: {
                endpoint: "/files/fine-uploader"
            },
            validation: {
                allowedExtensions : this.opts.extensions
            },
            multiple: false,
            callbacks: {
                onSubmit: function() {
                    container.element.find("span.ui-icon")
                        .removeClass("ui-icon-arrowthick-1-n")
                        .addClass("file-uploading");
                },
                onUpload: (opts.onUpload)
                    ? function(id, name) {
                        if(! container.opts.onUpload(id, name)) {
                            container.uploader.reset();
                        }

                        container.element.find("span.ui-icon")
                            .addClass("ui-icon-arrowthick-1-n")
                            .removeClass("file-uploading");
                    }
                    : function(id, name) {},
//... more stuff ... 
```

很抱歉上面摘录的不整洁。变量*元素*以 jQuery 选择器结果的形式出现，而*opts*只是一个简单的选项字典。我希望它有所帮助。

我正在使用 FineUploader 3.4.1。

谢谢人们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:48:13.583

正如我在上一条评论中提到的，请使用`onValidate`or`onValidateBatch`回调来执行额外的验证。您可以在这些回调中返回 false 以指示 Fine Uploader 忽略文件 ( `onValidate`) 或批处理中的所有文件 ( `onValidateBatch`)。有关这些和其他回调的更多详细信息，请参阅[回调文档](http://docs.fineuploader.com/api/callbacks.html)。

# php - 如何使用 Wordpress salt 在 Wordpress 中加密密码？

> ID：16012314
> 
> 赞同：4
> 
> 时间：2013-04-15T09:55:13.203
> 
> 标签：php, sql, wordpress, passwords, salt

我想使用标准的 Wordpress salt 对发送到数据库的密码进行加密，就像 Wordpress 在创建新用户时所做的那样。我知道我可以在 wp-config.php 中找到我的盐。所以我不需要生成盐；我只需要加密密码。

因此，当我创建 mypassword0 时，发送到数据库的是由我的 Wordpress salt 加密的文本字符串。

这是我的原始代码。（感谢[Yadav Chetan](https://stackoverflow.com/users/2257413/yadav-chetan)的帮助！）现在我只需要添加盐加密代码。

```
 <?php
        if(isset($_POST['submit'])){

        $query = "INSERT INTO mytable_one
          (user, pass)
          VALUES
          ('".$_POST['user']."', '".$_POST['pass']."')";

        $query = "INSERT INTO mytable_two
          (fname, lname)
          VALUES
          ('".$_POST['fname']."', '".$_POST['lname']."')";

        mysql_query($query);

         }else{
    ?>
    <div class="content">
        <form method="post">
            <div><strong>First Name:</strong><span class="errortext">*</span></div>
            <div><input id="first-name" name="fname" type="text" /></div>

            <div><strong>Last Name:</strong><span class="errortext">*</span></div>
            <div><input id="last-name" name="lname" type="text" /></div>

            <div><strong>User:</strong><span class="errortext">*</span></div>
            <div><input id="user-login" name="user" type="text" /></div>

            <div><strong>Password:</strong><span class="errortext">*</span></div>
            <div><input id="user-pass" name="pass" type="text" /></div>

            <div><input id="submit-button" value="submit" type="submit" />
        </div>          
        </form>
    <?php }?> 
```

* * *

**更新：**

[RRikesh](https://stackoverflow.com/users/1370034/rrikesh)建议我将 mysql_* 更改为 WPDB 代码。所以我尝试将其更改为 wpdb，并且我需要将其与其他代码集成。那么你能帮我修复这个更新的代码吗？

```
<?php
    if(isset($_POST['submit'])){

    $firstname = $_POST['fname'];
    $lastname = $_POST['lname'];
    $username = $_POST['user'];
    $password = $_POST['pass'];

    $wpdb->query( 
        $wpdb->prepare( 
           "INSERT INTO  mytable_one
          (user, pass) VALUES (%s, %s)",
             $username,
             wp_hash_password($password)
      )
    );
    $wpdb->query( 
        $wpdb->prepare( 
            "INSERT INTO  mytable_two
            (fname, lname) VALUES (%s, %s)",
               $firstname,
               $lastname,
        )
    );

    }else{
?>
<div class="content">
    <form method="post">
                <div><strong>First Name:</strong><span class="errortext">*</span></div>
                <div><input id="first-name" name="fname" type="text" /></div>

                <div><strong>Last Name:</strong><span class="errortext">*</span></div>
                <div><input id="last-name" name="lname" type="text" /></div>

                <div><strong>Username:</strong><span class="errortext">*</span></div>
                <div><input id="user-login" name="user" type="text" /></div>

                <div>Password:</div>
                <div><input id="user-pass" name="pass" type="text" /></div>

        <div><input id="submit-button" value="submit" name="submit" type="submit" /></div>          
    </form>
<?php }?> 
```

* * *

* * *

**更新2**

我无法让 WPDB 方法工作。但是，使用我的 otd 方法，我能够获得密码。这是工作代码：

```
 <?php
        if(isset($_POST['submit'])){

            $password = $_POST['user_pass'];
            $hash = wp_hash_password('$password');

            $query = "INSERT INTO wp_users
              (fname, lname, user, pass) VALUES ('".$_POST['fname']."', '".$_POST['lname']."', '".$_POST['user']."', '".$hash."')";

            mysql_query($query);

        }else{
    ?> 
```

也许我应该提出一个关于 WPDB 的新问题，因为这个问题是关于对密码进行哈希处理的，这个问题已经解决了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:59:46.413

用于[`wp_hash_password()`](http://codex.wordpress.org/Function_Reference/wp_hash_password)散列您的密码。

[**不要使用`mysql_*`函数，因为它们在 PHP 5.5.0 中已被弃用，并在 PHP 7.0.0 中被删除。**](http://php.net/manual/en/function.mysql-query.php)

请改用[WPDB 类](http://codex.wordpress.org/Class_Reference/wpdb)。

```
$wpdb->query( 
    $wpdb->prepare( 
        "
        INSERT INTO  mytable_one
        ( fname, lname, user, pass )
        VALUES ( %s, %s, %s, %s )
        ",
           $firstname,
           $lastname,
           $username,
           wp_hash_password( $password )
        )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:39:22.607

你应该使用 bcrypt 来保护密码

这是用于我的项目的示例类。

```
<?php

    // How to use it

    // $bcrypt = new Bcrypt(15);
    // $hash = $bcrypt->hash('password');
    // $isGood = $bcrypt->verify('password', $hash);

    class Bcrypt {
      private $rounds;
      public function __construct($rounds = 12) {
        if(CRYPT_BLOWFISH != 1) {
          throw new Exception("bcrypt not supported in this installation. See http://php.net/crypt");
        }

        $this->rounds = $rounds;
      }

      public function hash($input) {
        $hash = crypt($input, $this->getSalt());

        if(strlen($hash) > 13)
          return $hash;

        return false;
      }

      public function verify($input, $existingHash) {
        $hash = crypt($input, $existingHash);

        return $hash === $existingHash;
      }

      private function getSalt() {
        $salt = sprintf('$2a$%02d$', $this->rounds);

        $bytes = $this->getRandomBytes(16);

        $salt .= $this->encodeBytes($bytes);

        return $salt;
      }

      private $randomState;
      private function getRandomBytes($count) {
        $bytes = '';

        if(function_exists('openssl_random_pseudo_bytes') &&
            (strtoupper(substr(PHP_OS, 0, 3)) !== 'WIN')) { // OpenSSL slow on Win
          $bytes = openssl_random_pseudo_bytes($count);
        }

        if($bytes === '' && is_readable('/dev/urandom') &&
           ($hRand = @fopen('/dev/urandom', 'rb')) !== FALSE) {
          $bytes = fread($hRand, $count);
          fclose($hRand);
        }

        if(strlen($bytes) < $count) {
          $bytes = '';

          if($this->randomState === null) {
            $this->randomState = microtime();
            if(function_exists('getmypid')) {
              $this->randomState .= getmypid();
            }
          }

          for($i = 0; $i < $count; $i += 16) {
            $this->randomState = md5(microtime() . $this->randomState);

            if (PHP_VERSION >= '5') {
              $bytes .= md5($this->randomState, true);
            } else {
              $bytes .= pack('H*', md5($this->randomState));
            }
          }

          $bytes = substr($bytes, 0, $count);
        }

        return $bytes;
      }

      private function encodeBytes($input) {
        // The following is code from the PHP Password Hashing Framework
        $itoa64 = './ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

        $output = '';
        $i = 0;
        do {
          $c1 = ord($input[$i++]);
          $output .= $itoa64[$c1 >> 2];
          $c1 = ($c1 & 0x03) << 4;
          if ($i >= 16) {
            $output .= $itoa64[$c1];
            break;
          }

          $c2 = ord($input[$i++]);
          $c1 |= $c2 >> 4;
          $output .= $itoa64[$c1];
          $c1 = ($c2 & 0x0f) << 2;

          $c2 = ord($input[$i++]);
          $c1 |= $c2 >> 6;
          $output .= $itoa64[$c1];
          $output .= $itoa64[$c2 & 0x3f];
        } while (1);

        return $output;
      }
    }

    ?> 
```

# html5-canvas - kineticjs 图层重绘优化

> ID：16012318
> 
> 赞同：1
> 
> 时间：2013-04-15T09:55:23.270
> 
> 标签：html5-canvas, kineticjs

背景：我正在使用 kineticjs 开发一个实时多人 html5 画布游戏，主要将在手机浏览器上播放。游戏中发生了很多事情，例如每秒与服务器的套接字通信，使用基于服务器响应的 kineticjs 重绘和动画，所有这些都在繁重的图形界面之上。该游戏在桌面浏览器中运行良好，但在手机上运行缓慢。所以，我需要找到可以优化代码的所有方法。

我的问题，

1.  假设我需要根据刚刚从服务器收到的服务器响应重绘屏幕的特定部分，我是否应该将这些需要重绘的元素保留在单独的层中，以便我需要重绘更少的元素。就我而言，我需要每秒钟重新绘制一次，这会导致性能提升吗？

2.  如果上面的答案是肯定的，那么我应该划分布局的最佳层数是多少。我问这个是因为屏幕上有很多不同的部分需要根据不同的服务器响应重新绘制（尽管不是同时），如果所有这些都需要放在单独的层中，我需要知道如何到目前为止，我可以扩展上面的逻辑，例如，我可以在不牺牲性能的情况下拥有 10 个不同的层，而这正是所有这些练习的目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T13:12:49.247

Eric Rowell（KineticJS 的创建者）在这里做了一些压力测试：http: [//www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/](http://www.html5canvastutorials.com/labs/html5-canvas-kineticjs-drag-and-drop-stress-test-with-1000-shapes/)

他说：

“创建 10 个图层，每个图层包含 1000 个形状以创建 10,000 个形状。这极大地提高了性能，因为从图层中删除一个圆圈时，一次只需要绘制 1,000 个形状，而不是所有 10,000 个形状。”

“请记住，层数过多也会降低性能。我发现使用 10 层，每层由 1,000 个形状组成，其性能优于 20 层和 500 个形状或 5 层和 2,000 个形状。”

所以你的收获是

1.**是**的，隔离不同组的可重绘对象的多个画布层是要走的路。

和，

2.为了优化权衡（多个画布的开销与 1 个画布的简单性），**您需要**在它们将在其中运行的环境中使用您自己的特定代码进行测试。

祝你的游戏好运:)

# jquery - Jquery在输入键时删除换行符

> ID：16012326
> 
> 赞同：2
> 
> 时间：2013-04-15T09:55:38.567
> 
> 标签：jquery

我在文本区域有一个 keyup 功能。当用户按下回车键时，光标将转到下一行并计算空格。如何删除它？

这是我的代码。

```
data.keyup('#id',function(e)
                   {

                       code= (e.keyCode ? e.keyCode : e.which);
                         if (code == 13) { 
                                var xyz = $("#test").val();
                                xyz.length;
                             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T09:57:44.250

```
jQuery.fn.cleanWhitespace = function() {
    textNodes = this.contents().filter(
        function() { return (this.nodeType == 3 && !/\S/.test(this.nodeValue)); })
        .remove();
    return this;
}

$('selector').cleanWhitespace(); 
```

[看这里](https://stackoverflow.com/questions/1539367/remove-whitespace-and-line-breaks-between-html-elements-using-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:10:14.750

我认为你应该尝试这样的简单方法

```
 if (code == 13) 
 {
                var xyz = $.trim($("#id").val()).length
                alert(xyz);
 } 
```

# multithreading - 我们可以强制将数据放在特定的缓存中吗

> ID：16012333
> 
> 赞同：1
> 
> 时间：2013-04-15T09:55:52.360
> 
> 标签：multithreading, memory, memory-management, operating-system, scheduling

我试图强行将数据放入缓存（L1、L2 或 L3）。之后，我将创建两个线程并通过访问缓存中存在的数据来执行一些读/写操作，并根据数据在缓存中的放置来测量 CPU 的性能。我将通过强制将线程分配给不同/相同的处理器内核来重复该过程。如何做到这一点（强制将数据放在特定的缓存中）。顺便说一句，我正在使用英特尔至强 x5675 处理器和 linux

# php - 为从 mysql 调用的表数据添加排序功能

> ID：16012334
> 
> 赞同：-1
> 
> 时间：2013-04-15T09:55:52.360
> 
> 标签：php, mysql

我正在尝试对从 mysql 数据库调用的表中的数据进行排序，我知道它的基本信息，但我看到混淆了，我试图`a href tags`输入`th tags`但似乎它们不起作用，这是我下面的代码

```
<?php

include'includes/connect.php';

$sql = mysql_query("SELECT * FROM customers")
or die(mysql_error());

echo "<table border='1' cellpadding='10'>";
echo "<tr>
<th><font color='Red'>Id</font></th>
<th><font color='Red'>First Name</font></th>
<th><font color='Red'>Last Name</font></th>
<th><font color='Red'>Address</font></th>
<th><font color='Red'>Phone Number</font></th>
</tr>";

while($row = mysql_fetch_array( $sql ))
{

echo "<tr>";
echo '<td><b><font color="#663300">' . $row['id'] . '</font></b></td>';
echo '<td><b><font color="#663300">' . $row['first_name'] . '</font></b></td>';
echo '<td><b><font color="#663300">' . $row['last_name'] . '</font></b></td>';
echo '<td><b><font color="#663300">' . $row['address'] . '</font></b></td>';
echo '<td><b><font color="#663300">' . $row['phone_number'] . '</font></b></td>';
echo "</tr>";

}

echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:02:56.980

我建议使用一些 jquery lite 插件对表格进行排序

喜欢 ：

[分拣机](http://tablesorter.com/docs/#Demo)

[表格固定表头](http://www.tablefixedheader.com/demonstration/)

[笨表](http://joequery.github.io/Stupid-Table-Plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T09:58:14.773

你需要使用`ORDER BY`功能

```
 mysql_query("SELECT * FROM customers ORDER BY YOURFIELD ASC") 
```

更改`YOURFIELD`您要
更改`ASC`的字段`DESC`以更改顺序

**文档** [在这里](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:15:14.953

如果你想让你的标题可排序，那么你应该试试这个。

将此 'a href="yourPHP path&sortingHeader=id"' 作为 href 添加到您的标题中，例如 ID

注意：-您还应该在 sql 查询上方的 php 标头中添加一些 javascript 代码

$sortingHeader = $_GET["sortingHeader"];

$子查询 = "";

if ($sortingHeader != null && $sortingHeader != ''){

子查询 = "按 "+$sortingHeader; 排序

}

$sql = mysql_query("SELECT * FROM customers"+$subquery );

试试这个.....希望它能解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:20:06.627

如果你想让你的标题可排序，那么你应该试试这个。

"a href='yourPHP path&sortingHeader=id'> 将此作为超链接添加到您的标题中，例如：- Id

注意：-您还应该在 sql 查询上方的 php 标头中添加一些 javascript 代码

$sortingHeader = $_GET["sortingHeader"];

$子查询 = "";

if ($sortingHeader != null && $sortingHeader != ''){

子查询 = "按 "+$sortingHeader; 排序

}

$sql = mysql_query("SELECT * FROM customers"+$subquery );

试试这个.....希望它能解决你的问题。

# java - 音频转实数

> ID：16012341
> 
> 赞同：2
> 
> 时间：2013-04-15T09:56:27.877
> 
> 标签：java, audio

我能够将我的音频转换为字节值。

```
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.UnsupportedAudioFileException;

public class Audio_to_bytes {

    public static void main(String args[]) throws IOException {
        File WAV_FILE = new File("/home/cybersecurity/Desktop/scream2.wav");
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        AudioInputStream in = null;
        try {
            in = AudioSystem.getAudioInputStream(WAV_FILE);
        } catch (UnsupportedAudioFileException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }

        int read, i;
        byte[] buff = new byte[1024];
        while ((read = in.read(buff)) > 0) {
            out.write(buff, 0, read);
        }
        out.flush();
        byte[] audioBytes = out.toByteArray();

    }
} 
```

我想识别其中包含尖叫的音频。为此，我需要将我的音频转换为实数，以便我可以对其应用 fft。任何人都可以帮助我如何做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:19:38.297

我想出了这个代码片段并对其进行了测试。我希望它有所帮助。我正在分配我之前创建并转换为字节的 4 个浮点数（作为字节）。然后我使用 ByteBuffer 的 NIO FloatBuffer 视图，因此 NIO 会自动返回 4 个字节作为浮点数，无需进一步处理。

```
 ByteBuffer bb = ByteBuffer.allocate(4*4);
    bb.put(new byte[]{64,-112,0,0,66,-10, 22,-68, 66,9, 73, -43, 63,-114, 56, -38});
    bb.rewind();
    FloatBuffer floatBuffer = bb.asFloatBuffer();

    for(int i = 0; i < 4;i++){
        System.out.println(floatBuffer.get());
    } 
```

# linux - /usr/bin/ld: 找不到 -lvtkCommon

> ID：16012343
> 
> 赞同：0
> 
> 时间：2013-04-15T09:56:44.730
> 
> 标签：linux, static-libraries, vtk

我尝试学习如何使用 realityGrid，所以我使用 cmake 来构建一些示例。完成使用 ccmake 命令后，我尝试使用 make 命令。但我不断地得到错误：

```
/usr/bin/ld: cannot find -lvtkCommon
/usr/bin/ld: cannot find -lvtkFiltering
/usr/bin/ld: cannot find -lvtkGraphics
/usr/bin/ld: cannot find -lvtkImaging
/usr/bin/ld: cannot find -lvtkIO
/usr/bin/ld: cannot find -lvtkRendering 
```

我在 /usr/lib/vtk-5.10 中找到了 libvtkCommon.a。我应该怎么办？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:00:31.280

you should install the package containing the "vtk" libraries so ld can find them.

if you installed them manually you need to add the path at which those files are located to the library path configuration.

[http://blog.andrewbeacock.com/2007/10/how-to-add-shared-libraries-to-linuxs.html](http://blog.andrewbeacock.com/2007/10/how-to-add-shared-libraries-to-linuxs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:06:45.923

您需要告诉 CMake 您需要 VTK 模块。我没有太多使用 CMake，但我相信你需要的行是这样的：

```
find_package(VTK REQUIRED NO_MODULE)
include(${VTK_USE_FILE}) 
```

如果这不起作用，您可能会退回到这样的事情：

```
set(CMAKE_LIBRARY_PATH ${CMAKE_LIBRARY_PATH} /usr/lib/vtk-5.10) 
```

最后一行的坏处是它不能很好地移植到版本略有不同的其他环境。

# c++ - 在代码块 12.11 中编译线程程序时出错

> ID：16012345
> 
> 赞同：0
> 
> 时间：2013-04-15T09:56:56.067
> 
> 标签：c++, c++11, codeblocks

我的线程程序是：

```
#include<iostream>
#include<thread>
using namespace std;

void t()
{
cout<<"from thread\n";
}

 int main()
 {
 thread i(&t);
 cout <<"from main\n";
 i.join();
  } 
```

但它在代码块中显示以下错误：

```
 1)'thread ' was not declared in this scope 

  2)expected ';' before 'i'

  3)'i' was not declared in this scope 
```

我该如何解决？我使用的是 windows 和 codeblocks 12.11

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:17:48.193

我也有同样的问题。不幸的是，GCC Code::Blocks 使用的版本不支持您想要的 C++11 功能。打开该选项`-std=c++0x`只会将编译器升级到新标准的较新版本。这意味着您将只启用对 C+11 的基本支持。

# c# - ModalPopUp 上的 Detailsview 仅显示 gridview 的第一行

> ID：16012348
> 
> 赞同：0
> 
> 时间：2013-04-15T09:57:05.433
> 
> 标签：c#, asp.net, ajax, gridview, modalpopupextender

我在 modalpopup 中有一个 detailsview，它应该在我的 gridivew 中显示选定的行，但它只显示我的 gridview 中的第一行。我做错了什么？感谢您的帮助。

```
 protected void gvStudent_SelectedIndexChanged(object sender, EventArgs e)
    {

        this.dvstudent.Visible = true;
        this.dvstudent.DataBind();
        this.UpdatePanelDetailsView1.Update();
        this.modalstudent.Show();

    }
 protected void Selecttomodifystudent_Click(object sender, EventArgs e)
    {
        LinkButton buttonstudent = sender as LinkButton;
        GridViewRow row = (GridViewRow)buttonstudent.NamingContainer;
        this.sqlModifyStudent1.SelectParameters.Clear();
        this.dvstudent.DataBind();
        this.UpdatePanelDetailsView1.Update();
        this.modalstudent.Show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:25:34.377

我找到了我的问题的答案。就在我眼前：

```
protected void gvStudent_SelectedIndexChanged(object sender, EventArgs e)
    {
        dvstudent.PageIndex = gvStudent.SelectedIndex;
    } 
```

# mysql - 创建视图后添加检查选项

> ID：16012352
> 
> 赞同：1
> 
> 时间：2013-04-15T09:57:14.537
> 
> 标签：mysql, sql, view

我有一个`VIEW`创建。我想弄清楚如何添加一个`CHECK`选项。
那么有没有办法`ALTER`a`VIEW`和添加 a `WITH CHECK OPTION`？
还是唯一的方法是`DROP`重新`VIEW`创建它？

试过：
`ALTER VIEW my_view ADD WITH CHECK OPTION`没用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:30:01.623

您可以使用 ALTER VIEW 语句，但您需要重新输入视图内容。因此，如果您将视图创建为：

```
CREATE VIEW MyView AS
SELECT * FROM MyTable; 
```

并且您想添加一个您将使用的 CHECK OPTION

```
ALTER VIEW MyView AS
SELECT * FROM MyTable
WITH CHECK OPTION; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-13T16:54:44.883

我认为你可以使用`CREATE OR REPLACE VIEW`声明。

首先创建一个视图：

`CREATE VIEW my_view AS SELECT * FROM my_table;`

其次添加`WITH CHECK OPTION`到现有视图中；

`CREATE OR REPLACE VIEW my_view AS SELECT * FROM my_table WITH CHECK OPTION;`

我希望它有所帮助。

# c# - 来自静态线程函数的访问控制元素

> ID：16012354
> 
> 赞同：0
> 
> 时间：2013-04-15T09:57:17.147
> 
> 标签：c#, multithreading, static, controls

我已经阅读了很多关于这些东西的信息，我试过这个：

```
class Server
{
... 
  public Server(int Port, ListBox ex_lb, PictureBox ex_pb)
  {
    ServerWork = new Thread(() => ServerFunction(Listener, ex_lb, ex_pb));
    ServerWork.Start();
  }
  static void ServerFunction(TcpListener ex_listener, ListBox ex_lb, PictureBox ex_pb)
  {
    //and any access to ex_lb throws exception, didnt debug to access to ex_pb
  }
} 
```

这个：

```
private static IncomingDataClass g_IDC = new IncomingDataClass();

private class IncomingDataClass
{
  static string data = "";
  public string Data
  {
    get { return data; }
    set { 
      data = value;
      SomeEvent(this,null,data);
    }
  }            
}

void IncomingDataClass_SomeEvent(object sender, EventArgs e, string ex_data)
{
  if (ex_data.Contains("listbox"))
  {
    ex_data = ex_data.Remove(ex_data.IndexOf("listbox"), "listbox".Length);
    listBox1.Items.Add(ex_data);
  }
}

delegate void MyEventHandler(object sender, EventArgs e, string ex_data);
static event MyEventHandler SomeEvent;
// in form load event
SomeEvent += IncomingDataClass_SomeEvent;
class Server
{
... 
  public Server(int Port, ListBox ex_lb, PictureBox ex_pb)
  {
    ServerWork = new Thread(() => ServerFunction(Listener));
    ServerWork.Start();
  }
  static void ServerFunction(TcpListener ex_listener)
  {
    //and any change of g_IDC.Data throws exception here
  }
} 
```

这个：

```
private static ListBox listBox1 = new ListBox();

private void Form1_Load(object sender, EventArgs e)
{
  ...
  listBox1.FormattingEnabled = true;
  listBox1.Location = new System.Drawing.Point(12, 256);
  listBox1.Name = "listBox1";
  listBox1.Size = new System.Drawing.Size(258, 108);
  listBox1.TabIndex = 6;
  Controls.Add(listBox1);
}
//anyways, even if i create new ListBox lb = listBox1 in ServerFunction(..), it throws System.InvalidOperationException => Access attempt to listBox1 not from thread where is was created. 
```

我做错了什么？我认为创建静态控制是解决这个问题的终极问题，但即使这样也行不通......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:10:17.797

如果我没记错的话，为了从另一个线程更新 UI，你需要使用这个调用：

```
this.Invoke((MethodInvoker)delegate
    {
        MethodForUpdatingUI();
    }); 
```

这将从`MethodForUpdatingUI()`UI 线程开始，使您能够访问控件。

因此，为了在您的代码中使用它，我将尝试更改`IncomingDataClass_SomeEvent`：

```
void IncomingDataClass_SomeEvent(object sender, EventArgs e, string ex_data)
{
        this.Invoke((MethodInvoker)delegate
        {
            UpdateListBox(ex_data);
        });
}

UpdateListBox(string ex_data)
{
  if (ex_data.Contains("listbox"))
  {
    ex_data = ex_data.Remove(ex_data.IndexOf("listbox"), "listbox".Length);
    listBox1.Items.Add(ex_data);
  }
} 
```

如果这不是您要求的情况或者这是一种不好的做法，请随时纠正我。我没有测试过代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:28:29.303

您只能从 UI 线程操作 UI 控件。这些控件是否是静态的并不重要，afaik。使用 Dispatcher 对象或 SynchronizationContext 对象来修改来自不同线程的控件。

# objective-c - ASIHTTPRequest 缓存不能过期

> ID：16012360
> 
> 赞同：0
> 
> 时间：2013-04-15T09:57:30.883
> 
> 标签：objective-c, xml, caching, asihttprequest

我想设置一个 60 秒到期的缓存。xml 文件已成功缓存，但即使服务器更新数据，缓存也会在时间到期后继续使用。因此，我想弄清楚我犯了什么错误，并寻求任何解决方案来解决它。

我为发送异步 http 请求编写的代码：

```
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:url]];
[[ASIDownloadCache sharedCache] setShouldRespectCacheControlHeaders:NO];
[request setDownloadCache:[ASIDownloadCache sharedCache]];

[request setDelegate:self];
[request setDidFinishSelector:@selector(requestFinished:)];
[request setDidFailSelector:@selector(requestFailed:)];

[request setSecondsToCache:60];
[request setCacheStoragePolicy:ASICachePermanentlyCacheStoragePolicy];
[request setCachePolicy:ASIOnlyLoadIfNotCachedCachePolicy | ASIAskServerIfModifiedWhenStaleCachePolicy];

[request setNumberOfTimesToRetryOnTimeout:2];
[request setTimeOutSeconds:30];

[[self queue] addOperation:request]; 
```

我为接收请求编写的代码：

```
- (void)requestFinished:(ASIHTTPRequest *)request {
    BOOL success = [request didUseCachedResponse];
    NSLog(@"Success is %@\n", (success ? @"YES" : @"NO"));

    NSData *data = [request responseData];
} 
```

这是 xml 的标头：

```
Request Method:GET
Status Code:200 OK
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Content-Type:application/xml;charset=utf-8
Date:Mon, 15 Apr 2013 08:49:59 GMT
Keep-Alive:timeout=5, max=100
Server:Apache/2.2.14 (Unix) mod_ssl/2.2.14 OpenSSL/0.9.8b mod_jk/1.2.26 PHP/5.2.5
Set-Cookie:Expires=Mon, 15-Apr-2013 08:50:29 GMT; 
```

这是我在 /iPhone Simulator/5.0/Applications/XXX/Library/Caches/ASIHTTPRequestCache/PermanentStore 中找到的 .cachedheaders 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>Connection</key>
<string>Keep-Alive</string>
<key>Content-Length</key>
<string>9296</string>
<key>Content-Type</key>
<string>application/xml;charset=utf-8</string>
<key>Date</key>
<string>Fri, 12 Apr 2013 09:49:33 GMT</string>
<key>Keep-Alive</key>
<string>timeout=5, max=99</string>
<key>Server</key>
<string>Apache/2.2.14 (Unix) mod_ssl/2.2.14 OpenSSL/0.9.8b mod_jk/1.2.26 PHP/5.2.5</string>
<key>Set-Cookie</key>
<string>Expires=Fri, 12-Apr-2013 09:50:04 GMT;</string>
<key>X-ASIHTTPRequest-Expires</key>
<real>1365989738.766006</real>
<key>X-ASIHTTPRequest-Response-Status-Code</key>
<integer>200</integer>
</dict>
</plist> 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:13:02.783

我通过阅读这篇文章解决了这个问题。

[https://groups.google.com/forum/#!topic/asihttprequest/Z0XRuBlZBSY](https://groups.google.com/forum/#!topic/asihttprequest/Z0XRuBlZBSY)

我们必须修改 ASIownloadCache 中的代码。

我相信这是 ASIHTTPRequest 的一个错误。

# durandal - 在 Durandal 拥有远程视图

> ID：16012367
> 
> 赞同：1
> 
> 时间：2013-04-15T09:57:53.220
> 
> 标签：durandal

我正在使用 Durandal 开发 SPA，到目前为止它非常棒。手头的挑战是 - 一些视图和视图模型位于不同的服务器 (SERVER2) 中，应用程序必须访问服务器并在 SERVER1 中的 SPA 中呈现内容。

从目前所做的分析来看，router 和 viewLocator 提供了可以为不同结构取值的使用约定，但这始终着眼于相同的应用程序级别。对于手头的场景，视图需要来自不同的服务器 - `http://server2/anotherapp/app/views/someview.html`.

这有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:12:43.487

是的，这是可能的。

Durandal 使用 RequireJs 来解析和加载视图和视图模型。一旦你正确设置了 requireJS 配置，Durandal 将从不同的服务器加载视图和视图模型，而不知道它们的区别。

看看这个答案，它描述了如何设置 RequireJS 来解析来自第二个服务器的某些路径： [RequireJS：有没有办法实现多个基本 URL？](https://stackoverflow.com/questions/12302440/requirejs-is-there-a-way-to-achieve-multiple-base-urls)

它的要点是您可以在路径中配置一个元素以解析到不同的服务器。如果您只有几个模块，您可以为整个路径设置别名，但如果您有很多文件，您可能需要重新考虑文件的组织结构，以便您可以将第二台服务器中的所有文件分组到一个公共小路。

你也许可以配置或调整 Durandal 来做你想做的事，但我认为最好的解决方案是配置 RequireJS。

# database - SQL 2008 中的标量用户定义函数未被识别

> ID：16012372
> 
> 赞同：0
> 
> 时间：2013-04-15T09:58:14.763
> 
> 标签：database, sql-server-2008, sql-function

我在 SQL 2008 中创建了以下函数

```
CREATE FUNCTION dbo.udfSetSupplyStatus(@strOrderID nvarchar(16), @intLineNo int, @intOrderQty int, @strPartID nvarchar(16), @strWarehouseID nvarchar(16), @dtAsOfDate datetime, @strCalcMode nvarchar(16))
    RETURNS nvarchar(32)
AS
BEGIN
    DECLARE @strReturnValue nvarchar(32), @intQtyOnHand int, @intQtyOnOrder int, @intQtyPlanned int, @dtWantDate datetime

    IF (@strCalcMode = 'S')
        BEGIN
            SELECT 
                @intQtyOnHand = (pw.available_qty + pw.committed_co + pw.committed_req + pw.committed_ibt + pw.locked_qty),
                @intQtyOnOrder = (pw.expected_po + pw.expected_wo)
            FROM VE_PART_WAREHOUSE as pw
                INNER JOIN VE_PART as p on pw.part_id = p.id
                WHERE pw.part_id = @strPartID
                and pw.warehouse_id = @strWarehouseID
        END

        BEGIN
            select 
                @dtWantDate = WANT_DATE, 
                @intQtyPlanned = ORDER_QTY 
            from VE_PLANNED_ORDER 
            where PART_ID = @strPartID
            AND WAREHOUSE_ID = @strWarehouseID
        END

        IF(@intQtyOnHand >= @intOrderQty)
            SET @strReturnValue = 'InStock'
        ELSE IF(@intQtyOnHand + @intQtyPlanned) >= @intOrderQty
            SET @strReturnValue = 'Expected'
        ELSE
            SET @strReturnValue = 'NoSupply'

    RETURN @strReturnValue
END 
```

我可以在我正在使用的数据库的可编程性下的标量值函数中看到该函数，但是当我尝试调用该函数时，Intellisense 没有检测到我的函数。

# ember.js - 如何将不同的数据集传递给 ContainerView 内的不同子视图

> ID：16012375
> 
> 赞同：1
> 
> 时间：2013-04-15T09:58:27.920
> 
> 标签：ember.js

**容器代码：**

```
ViewsContainer = emberextensions.Views.ContainerView.extend({                
    setupContainer: function () {
        this.setObjects([]);
        var controller = this.get('controller');
        $.each(controller.get('content'), $.proxy(function (index, val) {
            //asdfsadf/
            if (val.ProductType === "v1") {
                this.pushObject(v1.create()
                    ),
            if (val.ProductType === "v2") {
                this.pushObject(v2.create()
                    ),                        
            }));
            }
        }, this));
    }.observes('controller.content.@each'),
}); 
```

我想将不同的数据集传递给容器中的不同视图。我已经创建了一个容器视图并尝试根据某些条件推送子视图。每个视图都有一组不同的数据。整个数据与 appcontroller 如何将不同的数据集传递给容器视图内的不同子视图

# javascript - 结合两个表单元素与 JS 和非 JS 备份

> ID：16012378
> 
> 赞同：0
> 
> 时间：2013-04-15T09:58:40.853
> 
> 标签：javascript, html, noscript

所以我打算将两个表单输入字段与 jQuery 结合起来：

```
//onSubmit of form
//$('#element').val(element1 + element2); 
```

即使未启用 JS，如何组合这两个字段/提交正确的值？

我可以使用

```
<noscript> 
```

以某种方式标记来实现这一点？

服务器端逻辑不是一个选项。不幸的是，它必须在前端。

它适用于电话领域，例如：

```
Phone:  <select name="countrycode">
<option value="44" selected>UK (+44)</option> 
<option value="1">USA (+1)</option> 
<option value="213">Algeria (+213)</option> 
<option value="376">Andorra (+376)</option> 
</select>
<input type="text" name="phone_number" id="phone_number"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:59:26.503

如果未启用 JavaScript，您可以在服务器端组合它们。

如果不启用 JavaScript，则无法执行此操作，如果它们是不同的字段，则需要脚本来获取它们的值并将它们连接起来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:11:26.783

如果没有 JS，我要说的第一个建议是过去会如何做到这一点。

一种方法将涉及您网站上的至少 2 个页面。一个页面会填满国家，用户将选择一个。单击一个会将浏览器重定向到一个页面，该页面的电话号码输入预填充了上一页中选择的国家/地区的国家代码。这将部分涉及服务器，只是为了预填充输入。

另一个建议是列出区号，并在您的输入中预先填写格式。对于较新的浏览器，可以使用该`placeholder`属性来提供一种格式。这样，用户就知道如何编写它了。该区号列表可能隐藏在`<noscript>`元素中。

* * *

PS：如您所知，世界上 95% 的浏览器都启用了 JavaScript。另外 5% 是功能手机浏览器、网络爬虫和禁用 JS 或使用脚本阻止程序禁用某些分析工具的偏执狂的人。你不应该为他们开发。相反，关注 95% 的使用 JS 的人。

# c++ - 获取 Lua 状态指针的地址以在外部程序中获取结果

> ID：16012379
> 
> 赞同：0
> 
> 时间：2013-04-15T09:58:41.120
> 
> 标签：c++, lua, reverse-engineering, ida

我想知道如何从使用 Lua 的程序中获取 Lua_State 的地址。我对汇编程序并不是很熟悉，但我对 C++ 非常了解。

这就是源代码的样子：

```
#pragma comment(lib, "lua51.lib")
#pragma comment(lib, "lua5.1.lib")

extern "C" {
#include <lua.h>
#include <lauxlib.h>
}

lua_State* L; // I want to get address of it but I haven't got source for remote program.
              // So I could use this state in my DLL injected to remote program.

int main()
{
     L = lua_open();
     //////loops here and functions registers.

     lua_close(L);
     return 1;
} 
```

我在 IDA 中自己尝试过，但并不知道如何找到它。在 IDA 中它看起来像这样

```
 .text:00401000 ; =============== S U B R O U T I N E =======================================
.text:00401000
.text:00401000
.text:00401000 ; int __cdecl main(int argc, const char **argv, const char **envp)
.text:00401000 _main           proc near               ; CODE XREF: __tmainCRTStartup+10Ap
.text:00401000
.text:00401000 argc            = dword ptr  4
.text:00401000 argv            = dword ptr  8
.text:00401000 envp            = dword ptr  0Ch
.text:00401000
.text:00401000                 push    esi
.text:00401001                 call    _luaL_newstate
.text:00401006                 mov     esi, ds:__imp__Sleep@4 ; Sleep(x)
.text:0040100C                 mov     ?L@@3PAUlua_State@@A, eax ; lua_State * L
.text:00401011
.text:00401011 loc_401011:                             ; CODE XREF: _main+15j
.text:00401011                 push    64h             ; dwMilliseconds
.text:00401013                 call    esi ; Sleep(x)  ; Sleep(x)
.text:00401015                 jmp     short loc_401011
.text:00401015 _main           endp
.text:00401015
.text:00401015 ; ---------------------------------------------------------------------------
.text:00401017                 align 4

.text:00401018 ; =============== S U B R O U T I N E =======================================
.text:00401018
.text:00401018 ; Attributes: thunk
.text:00401018
.text:00401018 _luaL_newstate  proc near               ; CODE XREF: _main+1p
.text:00401018                 jmp     ds:__imp__luaL_newstate
.text:00401018 _luaL_newstate  endp
.text:00401018
.text:0040101E 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T22:38:57.947

如果您双击或将鼠标悬停在 上`?L@@3PAUlua_State@@A`，您应该会得到 的地址`L`。你知道这个[内存](http://slush.warosu.org/c++filtjs/)位置是`L`因为.`?L@@3PAUlua_State@@A``struct lua_State * L`

在上面的示例中，由于您有符号，因此很容易以`L`这种方式找到。如果要分析没有符号的二进制文件，则必须依赖上下文。一般来说，这需要对汇编有更多的了解，因为您可能需要能够执行诸如跟踪函数参数的使用和[识别结构](https://reverseengineering.stackexchange.com/questions/4/how-is-a-structure-located-within-a-disassembled-program/136#136)之类的事情。假设您可以找到或创建 Lua 的FLIRT[签名](https://reverseengineering.stackexchange.com/questions/175/what-is-a-flirt-signature)，将大大简化此过程。

# c# - 使用 LINQ 合并 2 个数组

> ID：16012380
> 
> 赞同：18
> 
> 时间：2013-04-15T09:58:43.583
> 
> 标签：c#, linq, data-structures

我有两个简单的数组，我想使用 join linq 进行合并：

```
int[] num1 = new int[] { 1, 55, 89, 43, 67, -3 };
int[] num2 = new int[] { 11, 35, 79, 23, 7, -10 };

var result = from n1 in num1
             from n2 in num2
             select result; 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-04-15T10:00:46.470

You can do it using [`Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx) and [`ToArray`](http://msdn.microsoft.com/en-us/library/bb298736.aspx), like this:

```
var res = num1.Concat(num2).ToArray(); 
```

This will put all elements of `num2` after elements of `num1`, producing `res` that looks like

```
int[] { 1, 55, 89, 43, 67, -3, 11, 35, 79, 23, 7, -10 }; 
```

**EDIT :** (in response to a comment: "how can I also sort either allNumbers and res?")

Once your two arrays are merged, you can use `OrderBy` to sort the result, like this:

```
var res = num1.Concat(num2).OrderBy(v=>v).ToArray(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T10:03:23.947

```
var result = num1.Concat(num2); 
```

不分配任何内存。这足以满足您的需求吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T10:00:54.910

```
var allNumbers = num1.Concat(num2); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:01:42.253

Use `Concat`

```
 var res= num1.Concat(num2); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:03:25.657

试试下面...它会帮助你..

```
int[] num1 = new int[] { 1, 55, 89, 43, 67, -3 };
int[] num2 = new int[] { 11, 35, 79, 23, 7, -10 };
var result = num1.Union(num2).ToArray(); 
```

# antlr - 没有可行的替代错误

> ID：16012382
> 
> 赞同：1
> 
> 时间：2013-04-15T09:58:53.527
> 
> 标签：antlr

我正在使用 ANTLR 为类 java 语言生成识别器，以下规则用于识别泛型类型：

```
referenceType
:   singleType ('.' singleType)*
;

singleType
: Identifier typeArguments?
;

typeArguments
:   '<' typeArgument (',' typeArgument)* '>' 
;

typeArgument
:    referenceType
; 
```

现在，对于以下输入语句，ANTLR 会产生“没有可行的替代方案”错误。

```
Iterator<Entry<K,V>> i = entrySet().iterator(); 
```

但是，如果我在两个连续的 '>' 字符之间放置一个空格，则不会产生错误。ANTLR似乎无法区分上述规则和用于识别移位表达式的规则，但我不知道如何修改语法来解决这种歧义。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:55:35.107

您可能在词法分析器中有如下规则：

```
RightShift : '>>'; 
```

要使 ANTLR 识别`>>`为两个`>`字符或一个`>>`运算符，取决于上下文，您需要将移位运算符放在解析器中：

```
rightShift : '>' '>'; 
```

如果您的语言包含`>>>`or`>>=`运算符，则也需要将它们移至解析器。

要验证这`x > > y`是不允许的，您需要通过生成的解析树 (ANTLR 4) 或 AST (ANTLR 3) 来验证解析器规则`>`解析的两个字符是否按`rightShift`顺序出现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T18:34:28.823

280Z28 在他的诊断中可能是正确的，你有一个规则

```
RightShift : '>>'; 
```

另一种解决方案是在解析器中明确包含尾随 >> 的可能性。（我在其他语法中看到过这一点，但只在 LALR 中看到过。）

```
typeArguments
:   ('<' typeArgument (',' typeArgument)* '>') |
    ('<' typeArgument ',' referenceType '<' typeArgument RightShift );

; 
```

在 Antlr3 中，这将需要考虑在内。

这是否更清晰或有第二遍验证您的右移运算符取决于您需要使用它的频率。

# mysql - 将 Liferay 从 Oracle 迁移到 MySQL 时应该考虑什么？

> ID：16012385
> 
> 赞同：1
> 
> 时间：2013-04-15T09:58:56.987
> 
> 标签：mysql, oracle, migration, liferay

我们目前正在运行连接到 Oracle 11.2.0.2.0 的 Liferay 6.0.6。由于围绕 Oracle 许可的业务需求，我需要研究将其转移到带有 InnoDB 的 MySQL 5.5。此迁移可以接受停机时间。

*   我可以复制代码和数据结构吗？
*   使用 MySQL 进行新安装是否最好，然后从 Oracle 安装中复制数据？
*   这里有人做过吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T12:50:02.283

在迁移数据库方面，最简单的方法是转到控制面板，在服务器管理下，您会找到一个带有数据库迁移 UI 的页面。这将从您当前的数据库（例如 oracle）读取并写入您在该 UI 上配置的数据库。确保在此期间没有人访问门户 - 此功能专为迁移数据库而创建：数据库之间可能存在一些差异，在此过程中将自动“翻译”。

在一些相关的旁注中：如果您想获得更新和修复（包括安全性），您应该考虑升级到维护版本，CE 或 EE。6.0 CE（这就是 6.0.6）不久前就已经结束了。6.0 EE 以及 6.1 CE 和 EE 仍然可用。

2017 年编辑：请注意，Liferay 7 和 DXP 不再支持此功能：数据库迁移工具不涵盖（所有）模块的表。

# php - 我无法在 php 中调用 asp.net 网络服务

> ID：16012389
> 
> 赞同：0
> 
> 时间：2013-04-15T09:59:06.003
> 
> 标签：php, asp.net, web-services

我使用 asp.net 框架 4 创建了 Web 服务：

```
[WebMethod]
public DataSet GetMembers(string memberId, string thirdName)
{
    string connStr = ConfigurationManager.ConnectionStrings["conStr"].ConnectionString;
    SqlConnection cn = new SqlConnection(connStr);
    SqlDataAdapter da = new SqlDataAdapter();
    DataSet ds = new DataSet();

    da.SelectCommand = new SqlCommand(@"SELECT MemberMaster.MemberId,MemberMaster.FirstName,MemberMaster.SecondName,MemberMaster.ThirdName,MemberMaster.CivilNo,MemberMaster.DateOfBirth,MemberSubcription.MemberId
                                        FROM MemberMaster inner join MemberSubcription on MemberMaster.MemberId=MemberSubcription.MemberId
                                        WHERE MemberMaster.MemberId=@MemberId and MemberMaster.ThirdName=@ThirdName", cn);
    da.SelectCommand.Parameters.Add("@MemberId", SqlDbType.NVarChar).Value = memberId;
    da.SelectCommand.Parameters.Add("@ThirdName", SqlDbType.NVarChar).Value = thirdName;

    ds.Clear();
    da.Fill(ds);
    return ds;
} 
```

它在 localhost 中运行良好，但是当我在 php 中调用它时：

```
<?php
$wsdlUrl = "http://xxxx/WS/WebService.asmx?WSDL";  
$client = new soapclient($wsdlUrl);
$params = array('memberId' => 'W1100045','thirdName' => 'Ali');              
$result = $client->GetMembers($params);
$echoText = '';
if (is_null($result->GetMembersResult))
{
   echo "no result";
}
else
{
  echo $result->GetMembersResult;
}
?> 
```

出现此错误：Catchable fatal error: Object of class stdClass could not be convert to string on line 23

有什么问题，我该如何解决这个问题？

# c# - 如何仅使用 XPath 和 C# .NET 获取元素内容

> ID：16012390
> 
> 赞同：5
> 
> 时间：2013-04-15T09:59:07.677
> 
> 标签：c#, .net, xml, xpath

我找到了很多关于如何使用简单的 XPath 表达式和 C# 获取节点内容的文章，例如：

XPath：

```
/bookstore/author/first-name 
```

C＃：

```
string xpathExpression = "/bookstore/author/first-name";

nodes = navigator.Select(xpathExpression); 
```

我想知道如何获取元素内部的内容，并且同一个元素在另一个元素和另一个元素内部。
看看下面的代码：

```
<Cell>          
    <CellContent>
        <Para>                               
            <ParaLine>                      
                <String>ABCabcABC abcABC abc ABCABCABC.</string> 
            </ParaLine>                      
        </Para>     
    </CellContent>
</Cell> 
```

我只想`ABCabcABC abcABC abc ABCABCABC.`从`String`元素中提取内容。

你知道如何通过使用**XPath 表达式**和**.Net C#**来解决问题吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-15T10:17:44.243

[谷歌搜索`c# .net xpath`](https://www.google.com/search?hl=en&q=c#%20.net%20xpath)几秒钟后，您会找到[这篇文章](http://support.microsoft.com/kb/308333)，其中提供了您可以轻松修改以使用的示例[`XPathDocument`](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathdocument.aspx)，[`XPathNavigator`](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathnavigator.aspx)并且[`XPathNavigator::SelectSingleNode()`](http://msdn.microsoft.com/en-us/library/50wkzt09.aspx)：

```
XPathNavigator nav;
XPathDocument docNav;
string xPath;

docNav = new XPathDocument("c:\\books.xml");
nav = docNav.CreateNavigator();
xPath = "/Cell/CellContent/Para/ParaLine/String/text()";

string value = nav.SelectSingleNode(xPath).Value 
```

我推荐更多阅读[xPath 语法](http://msdn.microsoft.com/en-us/library/ms256086.aspx)。多得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T10:09:35.560

```
navigator.SelectSingleNode("/Cell/CellContent/Para/ParaLine/String/text()").Value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T10:45:41.983

您也可以使用 Linq to XML 来获取指定元素的值

```
var list = XDocument.Parse("xml string").Descendants("ParaLine")
                 .Select(x => x.Element("string").Value).ToList(); 
```

从上面的查询中，您将获得 ParaLine 标记内的所有字符串元素的值。

# symfony - 产品中的 Symfony 2.2 白色/空白屏幕（另一个）

> ID：16012391
> 
> 赞同：1
> 
> 时间：2013-04-15T09:59:08.697
> 
> 标签：symfony, symfony-2.2

我更新了我的服务器上的一些文件，删除了缓存目录并且必须认识到，我收到一个白页，刷新后我能够登录，然后得到一个空白屏幕。我尝试了这个本地主机并得到了相同的结果。app_dev 运行良好。谷歌搜索我在 app.php 中发现了这个变化

```
$kernel = new AppKernel('prod', true); // >> before: new AppKernel('prod', false); 
```

这有帮助，因为我再次删除了缓存。加热缓存也无济于事：

```
php console cache:clear --env=prod --no-debug 
```

我在 Symfony 2.0 下开发了这个应用程序，并在开发时对其进行了更新。这是我第一次遇到这个问题。我只能为这个问题找到较旧的线程，所以在我看来，我可能在迁移时出错了。

有什么提示吗？

* * *

编辑：1.日志只是说（昨天）：

> pushHandler.INFO：获取：[] []

但我记得，它并不是每次都记录下来。顺便说一句：我没有安装加速器。

# javascript - html not working on chrome. [+ knockout] I'm using to fallback to default image if there is no concrete image for current item. This is working properly for firefox and even for IE8+ but chrome always display default image. 问问题 问问题 2013-04-15T09:59:23.387 1265 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm using to fallback to default image if there is no concrete image for current item. This is working properly for firefox and even for IE8+ but chrome always display default image. <object style="display: inline-block; width: 226px; height: 340px;" data-bind="attr: { data: ImageUrl }"> <img style="display: inline-block; width: 226px; height: 340px;" src="~/Content/images/default.png" /> </object> to be honest I don't know even where to start searching for issue. If JavaScript is not enabled you can combine them server-side. You cant do this without JavaScript enabled, if they are different fields you need script to get their values and concatenate them. javascripthtmlknockout-2.0 4 1 回答 1 This answer is useful 0 这是因为您必须指定 type 属性，这似乎对 chrome 是强制性的。 <object style="display: inline-block; width: 226px; height: 340px;" data-bind="attr: { data: ImageUrl }" type="image/png"> <img style="display: inline-block; width: 226px; height: 340px;" src="~/Content/images/default.png" /> </object> 试试这个说明问题解决方案的小提琴：http: //jsfiddle.net/SEYwf/ 于 2013-08-12T14:44:19.570 回答 Related 1 jquery - RequireJS + Waypoints：对象 [object Object] 没有方法'waypoint' 1 symfony - Symfony2 自定义控制台命令 1 c# - 为 Windows 应用商店应用安装 WCF 数据服务客户端时出错 1 vb.net - 如何在vb中拖动任何标签 2 c# - 使用 PrintDocument 打印表格 1 php - 使用 PHP 从 Oracle 数据库中检索数据 5 c# - 如果用户名不在数据库中，如何显示消息框？C＃ 1 html - Windows 7.5 手机！和其他移动设备，如何使文本保持相同的大小？ 1 symfony - 注册成功后如何分配角色？ 2 c++ - How to throw an exception on data mismatch Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：16012395
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, html, knockout-2.0

I'm using to fallback to default image if there is no concrete image for current item. This is working properly for firefox and even for IE8+ but chrome always display default image.

```
<object style="display: inline-block; width: 226px; height: 340px;" data-bind="attr: { data: ImageUrl }">
    <img style="display: inline-block; width: 226px; height: 340px;" src="~/Content/images/default.png" />
</object> 
```

to be honest I don't know even where to start searching for issue.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:44:19.570

这是因为您必须指定 type 属性，这似乎对 chrome 是强制性的。

```
<object style="display: inline-block; width: 226px; height: 340px;" data-bind="attr: { data: ImageUrl }" type="image/png">
    <img style="display: inline-block; width: 226px; height: 340px;" src="~/Content/images/default.png" />
</object> 
```

试试这个说明问题解决方案的小提琴：http: [//jsfiddle.net/SEYwf/](http://jsfiddle.net/SEYwf/)

# python - Python单元测试中的实例初始化错误

> ID：16012408
> 
> 赞同：0
> 
> 时间：2013-04-15T10:00:09.120
> 
> 标签：python, unit-testing

我对 Python 有点陌生，我遇到了一个错误，我似乎在这里或互联网上的其他任何地方都找不到。不过可能很简单：

我有一个单元测试类，我想测试我的“控制器”类的方法。单元测试类如下所示：

```
import unittest
from Controller import Controller

class ControllerUnitTests(unittest.TestCase):

    def test_no_ants_must_be_in_own_dead_ants_list(self):
        controller = Controller()
        self.assertTrue(controller.__ourBots[0] is None)

if __name__ == "__main__":
    #import sys;sys.argv = ['', 'Test.testName']
    unittest.main() 
```

我只是检查控制器类（ourBots，列表）中的属性是否没有项目。

当我运行代码时，出现以下错误：

```
Finding files... done.
Importing test modules ... done.

======================================================================
ERROR:   test_no_ants_must_be_in_own_dead_ants_list
(ControllerUnitTests.ControllerUnitTests)
----------------------------------------------------------------------
Traceback (most recent call last):
File "C:\Users\rgroenve\Python\KamikazeMieren\src\ControllerUnitTests.py", line 22, in   test_no_ants_must_be_in_own_dead_ants_list
self.assertTrue(controller.__ourBots[0] is None)
AttributeError: Controller instance has no attribute '_ControllerUnitTests__ourBots'

----------------------------------------------------------------------
Ran 1 test in 0.000s

FAILED (errors=1) 
```

看起来它正在自己的类中搜索属性，而不是我的控制器类。我不明白为什么以及如何。

控制器类的顶部如下所示：

```
class Controller:

__priority = 0
__ourBots = []

def __init__(self):
    pass 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:06:28.120

具有两个前导下划线的成员是 Python 中的“私有”变量，即。他们使用名称映射来不那么容易从外部访问：[http ://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references](http://docs.python.org/2/tutorial/classes.html#private-variables-and-class-local-references)

您必须将单元测试中的成员名称更改为损坏的名称（这非常难看），或者最好使用类的一些非“私有”接口。

# android - 不推荐使用 Google Maps Android v1 API - 获取 API 密钥以进行开发

> ID：16012413
> 
> 赞同：3
> 
> 时间：2013-04-15T10:00:29.530
> 
> 标签：android, google-maps, maps

我有几个使用 MapView 发布的 Android 应用程序。我刚刚尝试设置另一台计算机进行开发，我发现 Google Maps Android API 的第 1 版已于 2012 年 12 月 3 日正式弃用，从 2013 年 3 月 18 日起，无法为此请求 API 密钥版本。有什么建议如何继续开发我的应用程序，而无需切换到 Google Maps Android API v2？谢谢 ：-）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:34:40.667

由于 API 密钥绑定到 APK 签名密钥，问题归结为签名密钥。

对于发布的 APK，无论如何您都应该使用相同的密钥库来签署旧应用程序的新版本，所以那里没有问题。

对于开发 APK，您可以将调试密钥库（`~/.android/debug.keystore`或`%USERPROFILE%\.android\debug.keystore`）从旧开发计算机复制到新计算机。这让您有更多时间迁移到新 API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T10:02:06.747

你不能。您必须使用更新（最新）版本的 API，因为 API 将在 3 年后“关闭”（根据 Google 的 API 弃用政策）。

# c# - 主窗体打开后如何隐藏或关闭启动登录窗体？

> ID：16012422
> 
> 赞同：1
> 
> 时间：2013-04-15T10:00:58.643
> 
> 标签：c#, forms, login

经过 6 个小时的分析和遵循这个[POST](https://stackoverflow.com/questions/4759334/how-can-i-close-a-login-form-and-show-the-main-form-without-my-application-closi)解决方案，我的登录表单 frmLog 仍然不会关闭。我在 Microsoft Visual Studio C# 窗口窗体应用程序中创建了两个窗体。我的问题是即使我使用不同的方法并尝试了登录表单不会关闭或隐藏的所有内容。这很烦人，让我在这个问题上花费了很多时间。请帮我。

这是我在 Program.cs 中初始化启动表单的代码。

```
 public static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            frmLog fLogin = new frmLog();
            if (fLogin.ShowDialog() == DialogResult.OK)
            {
                Application.Run(new frmMain());
            }
            else
            {
                Application.Exit();
            }
        } 
```

这是我的登录表单代码，`frmMain`如果用户和密码为真，则显示主表单，它们实际上已连接到数据库。

```
 private void btnSubmit_Click(object sender, EventArgs e)
        {

                Mylibrary a = new Mylibrary("localhost", "root", "", "cashieringdb");
                string user = txtLogin.Text;
                string pass = txtPassword.Text;
                string query = "SELECT * FROM register WHERE username='" + user + "' AND password=MD5('" + pass + "')";
                int result = a.Count(query);
                if (result == 1)
                {
                    LOGIN_USER = txtLogin.Text;
                    frmMain main = new frmMain();
                    main.Show();
                    this.close
                }
                else
                {
                    MessageBox.Show("Login Failed! Try Again");
                    txtLogin.Text = "";
                    txtPassword.Text = "";
                }

        } 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:10:33.987

用这个

```
 static void Main()

{
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new frmLog ());

    } 
```

在frmlog里面

利用

```
this.hide();
new frmMain().ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:08:01.600

`loginform login = new loginfrom(); login.Hide();`

请尝试以这种方式隐藏您的登录表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:09:13.543

您的登录表单不应该负责显示主表单，这已经在您的`Main`方法中稍后处理！相反，您应该做的是返回 DialogResult，因为稍后您将检查它的值。

我宁愿不评论您的代码，因为这是架构自杀。将各种层混合成一个丑陋的烂摊子，呸。

`.Hide()`建议作为解决方案的公认答案是**BAD**。Hide() 相当于说`.Visible=false`，这在您的场景中没有意义。它仍然存在于背景中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-20T08:38:58.527

很多 Q/A 建议你正确地开始了。
从作为模态`Main()`调用`LoginForm`，如果结果正常`LoginForm`，则自动关闭并且 MainForm 由`ApplicationRun(MainForm)`.

但是，您已经`MainForm`从`LoginForm`.

```
if (result == 1)
{
  LOGIN_USER = txtLogin.Text;
  frmMain main = new frmMain();
  main.Show();
  this.close
} 
```

所以改变它：

```
if (result == 1)
{
  LOGIN_USER = txtLogin.Text;
  //Logged in
  // return DialogResult.OK as it needed for Program.cs to allow load MainForm
  this.DialogResult = DialogResult.OK;
} 
```

[模态对话框](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)- “......它后面的代码直到对话框**关闭**后才会执行......”

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:10:52.457

修改`Main()`为默认：

```
 static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new frmLog ());
    } 
```

使用`this.Hide();`而不是`this.Close();`，试试这个：

```
private void btnSubmit_Click(object sender, EventArgs e)
    {
            Mylibrary a = new Mylibrary("localhost", "root", "", "cashieringdb");
            string user = txtLogin.Text;
            string pass = txtPassword.Text;
            string query = "SELECT * FROM register WHERE username='" + user + "' AND password=MD5('" + pass + "')";
            int result = a.Count(query);
            if (result == 1)
            {
                LOGIN_USER = txtLogin.Text;
                frmMain main = new frmMain();
                main.Show();
                this.Hide();
            }
            else
            {
                MessageBox.Show("Login Failed! Try Again");
                txtLogin.Text = "";
                txtPassword.Text = "";
            }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T10:29:06.627

您的登录表单应该是一个单独的表单，您应该将其显示为主表单中的对话框。您的代码可能如下所示：

```
private void btnSubmit_Click(object sender, EventArgs e)
{
    bool loginSuccessful = false;
    var frmLogin = new FormLogin();
    while (frmLogin.ShowDialog() == DialogResult.OK)
    {
        // verify login details
        Mylibrary a = new Mylibrary("localhost", "root", "", "cashieringdb");
        string user = frmLogin.txtLogin.Text;
        string pass = frmLogin.txtPassword.Text;
        string query = "SELECT * FROM register WHERE username='" + user + "' AND password=MD5('" + pass + "')";
        int result = a.Count(query);
        if (result != 1)
        {
            MessageBox.Show("Login failed, try again", "Login");
        }
        else
        {
            loginSuccessful = true;
            break;
        }
    }

    if (!loginSuccessful)
    {
        // user cancelled - close main window to end application
        this.Close();
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-07T08:21:42.607

显示下一个窗口时不需要隐藏第一个窗口。只需在 Program.cs 文件中 Program 类的 Main 方法中执行以下步骤：

```
static void Main()
{
        if (Process.GetProcessesByName(Process.GetCurrentProcess().ProcessName).Length > 1)
        {
            return;
        }

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        MyFirstWindow fw = null;
        do
        {
            fw = new MyFirstWindow();
            Application.Run(fw);
        } while (!fw.checked);

        Application.Run(new MyNextWindow());
    } 
```

正如您在 MyFirstWindow 类中看到的那样，您拥有 isChecked 属性，该属性类型为布尔值，默认值为 false。因此，您可以进行一些检查（例如登录），更改选中属性的值并关闭第一个窗口。在选中的属性不为真之前，您的下一个窗口将不会运行

# asp.net - linq 按国家/地区分组，然后动态生成列的总和

> ID：16012426
> 
> 赞同：0
> 
> 时间：2013-04-15T10:01:09.693
> 
> 标签：asp.net, linq, c#-4.0, group-by

我的`datatable`长相是这样的。。

```
 -Fix colms---            -----This Columns are dynamic created not fix ---
  |           |            |                                               |
Country    Partners     JAN-1990     FEB-1990     SEP-1990 . . . . . DEC-1995 
----------------------------------------------------------------------------
-> India      US           55.00        -             45.50               -
|  Spain      UK           43.54        12.23         -                   -
|  Japan      India        46.45        55.45         40.00               - 
|-> India      UK          45.50        54.65         21.20               85.36 
```

我需要这样的输出..

```
Country    JAN-1990     FEB-1990     SEP-1990 . . . . . DEC-1995 
-----------------------------------------------------------------
India       100.50       54.65         66.70             85.36
Spain       43.54        12.23         -                 -
Japan       46.45        55.45         40.00             - 
```

我正在使用以下`linq query`来分组国家，但不知道如何获得分组国家的总和..

```
var result = from tab in dt.AsEnumerable()
             group tab by tab["Country"]
             into groupDt
             select new
             {
                Country = groupDt.Key
              }; 
```

是否可以使用 linq 对国家和动态生成的列进行分组和总和？

如果有任何其他可能的解决方案表示赞赏。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:18:20.420

这可以工作（假设您的动态列是 type `decimal`）：

```
var dtResult = new DataTable();
dtResult.Columns.Add("Country", typeof(string));
foreach (var col in dt.Columns.Cast<DataColumn>().Skip(2))
{
    dtResult.Columns.Add(col);
}
var countryGroups = dt.AsEnumerable().GroupBy(r => r.Field<string>("Country"));
foreach (var countryGroup in countryGroups)
{
    DataRow row = dtResult.Rows.Add();
    row.SetField("Country", countryGroup.Key);
    foreach (var col in dtResult.Columns.Cast<DataColumn>().Skip(1))
    {
        row.SetField(col, countryGroup.Sum(g => g.Field<decimal>(col)));
    }
} 
```

# c# - 仅显示枚举的一些选项

> ID：16012427
> 
> 赞同：2
> 
> 时间：2013-04-15T10:01:10.287
> 
> 标签：c#, enums, propertygrid

我有一个枚举显示在`PropertyGrid`：

```
private My_Enum _ee;

public My_Enum  EE
{
    get { return _ee; }
    set
    {
        _ee= value;
    }
}

public enum My_Enum 
{
    NUM1 = 0,
    NUM2 = 1,
    NUM3 = 2,
    NUM4 = 3,
    NUM5 = 4,
    NUM6 = 5,
    NUM7 = 6,
    DEF
}; 
```

有没有办法`PropertyGrid`只显示枚举中的两个选项（例如`NUM1`，`NUM2`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:09:42.053

检查下面的链接，你需要使用`TypeConverter`

*   [在 .NET 中使用 PropertyGrid](http://www.c-sharpcorner.com/uploadfile/witnes/using-propertygrid-in-net/)

*   [具有枚举值的 C# Propertygrid 组合框（Win Forms）](https://stackoverflow.com/questions/12492436/c-sharp-propertygrid-combobox-with-enum-values-win-forms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:41:38.987

您可以定义一个用于将字段标记为特殊的属性，然后使用自定义[UITypeEditor](http://msdn.microsoft.com/library/system.drawing.design.uitypeeditor.aspx)，如下所示：

```
[Editor(typeof(MyEnumEditor), typeof(UITypeEditor))]
public enum My_Enum
{
    NUM1 = 0,
    NUM2 = 1,
    NUM3 = 2,
    [Browsable(false)]
    NUM4 = 3,
    NUM5 = 4,
    NUM6 = 5,
    NUM7 = 6,
    DEF
}

public class MyEnumEditor : UITypeEditor
{
    private IWindowsFormsEditorService _editorService;
    private bool _cancel;

    public override UITypeEditorEditStyle GetEditStyle(ITypeDescriptorContext context)
    {
        return UITypeEditorEditStyle.DropDown;
    }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value)
    {
        _cancel = false;
        _editorService = (IWindowsFormsEditorService)provider.GetService(typeof(IWindowsFormsEditorService));
        ListBox listBox = new ListBox();
        listBox.IntegralHeight = true;
        listBox.SelectionMode = SelectionMode.One;
        listBox.MouseClick += OnListBoxMouseClick;
        listBox.KeyDown += OnListBoxKeyDown;
        listBox.PreviewKeyDown += OnListBoxPreviewKeyDown;

        Type enumType = value.GetType();
        if (!enumType.IsEnum)
            throw new InvalidOperationException();

        foreach (FieldInfo fi in enumType.GetFields(BindingFlags.Public | BindingFlags.Static))
        {
            object[] atts = fi.GetCustomAttributes(typeof(BrowsableAttribute), true);
            if (atts != null && atts.Length > 0 && !((BrowsableAttribute)atts[0]).Browsable)
                    continue;

            int index = listBox.Items.Add(fi.Name);

            if (fi.Name == value.ToString())
            {
                listBox.SetSelected(index, true);
            }
        }

        _editorService.DropDownControl(listBox);
        if ((_cancel) || (listBox.SelectedIndices.Count == 0))
            return value;

        return Enum.Parse(enumType, (string)listBox.SelectedItem);
    }

    private void OnListBoxPreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        if (e.KeyCode == Keys.Escape)
        {
            _cancel = true;
            _editorService.CloseDropDown();
        }
    }

    private void OnListBoxMouseClick(object sender, MouseEventArgs e)
    {
        int index = ((ListBox)sender).IndexFromPoint(e.Location);
        if (index >= 0)
        {
            _editorService.CloseDropDown();
        }
    }

    private void OnListBoxKeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            _editorService.CloseDropDown();
        }
    }
} 
```

注意：这不支持标有[Flags 属性](http://msdn.microsoft.com/library/system.flagsattribute.aspx)的枚举，这需要一个复选框列表。如果您需要它，它会更复杂，我建议您看看这个免费库：[CodeFluentRuntimeClient](https://nuget.org/packages/CodeFluentRuntimeClient)，它在支持此功能的 CodeFluent.Runtime.Design 命名空间中包含一个 EnumEditor UITypeEditor 类。

# jdbc - 为 JDBC 弹性搜索河设置映射

> ID：16012433
> 
> 赞同：2
> 
> 时间：2013-04-15T10:01:40.767
> 
> 标签：jdbc, mapping, elasticsearch, elasticsearch-jdbc-river

我将 ES 0.20.6 与 elasticsearch [-river-jdbc 插件](https://github.com/jprante/elasticsearch-river-jdbc)一起使用。我创建了一条可以使用的河流：

```
SQL="SELECT ..."
curl -XPUT 'localhost:9200/_river/myindex_river/_meta' -d '{
    "type" : "jdbc",
    "jdbc" : {
        "driver" : "org.postgresql.Driver",
        "url" : "jdbc:postgresql://localhost:5432/mydb_db",
        "user" : "myuser",
        "password" : "mypassword",
        "sql" : "'"$SQL"'"
    },
    "index" : {
        "index" : "myindex",
        "type" : "mytype",
        "type_mapping" : null
    }
}' 
```

现在我想要添加类型映射，因为[插件文档中定义了该选项](https://github.com/jprante/elasticsearch-river-jdbc/wiki/JDBC-River-parameters)。但我真的无法弄清楚语法并且总是得到以下错误（`"Source: "`部分取决于我的尝试）

```
org.elasticsearch.index.mapper.MapperParsingException: Failed to parse mapping definition
        at org.elasticsearch.index.mapper.DocumentMapperParser.extractMapping(DocumentMapperParser.java:237)
        at org.elasticsearch.index.mapper.DocumentMapperParser.parse(DocumentMapperParser.java:147)
        at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:379)
        at org.elasticsearch.index.mapper.MapperService.parse(MapperService.java:375)
        at org.elasticsearch.cluster.metadata.MetaDataMappingService$4.execute(MetaDataMappingService.java:309)
        at org.elasticsearch.cluster.service.InternalClusterService$2.run(InternalClusterService.java:223)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Caused by: org.elasticsearch.common.jackson.core.JsonParseException: Unexpected character ('=' (code 61)): was expecting a colon to separate field name and value
 at [Source: {mytype={properties={active={index_analyzer=standard, store=yes, type=boolean}}}}; line: 1, column: 9]
        at org.elasticsearch.common.jackson.core.JsonParser._constructError(JsonParser.java:1378)
        at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:599)
        at org.elasticsearch.common.jackson.core.base.ParserMinimalBase._reportUnexpectedChar(ParserMinimalBase.java:520)
        at org.elasticsearch.common.jackson.core.json.ReaderBasedJsonParser.nextToken(ReaderBasedJsonParser.java:616)
        at org.elasticsearch.common.xcontent.json.JsonXContentParser.nextToken(JsonXContentParser.java:48)
        at org.elasticsearch.common.xcontent.support.XContentMapConverter.readMap(XContentMapConverter.java:70)
        at org.elasticsearch.common.xcontent.support.XContentMapConverter.readOrderedMap(XContentMapConverter.java:60)
        at org.elasticsearch.common.xcontent.support.AbstractXContentParser.mapOrdered(AbstractXContentParser.java:116)
        at org.elasticsearch.index.mapper.DocumentMapperParser.extractMapping(DocumentMapperParser.java:235)
        ... 8 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T18:25:01.413

我认为您提交的内容甚至不是正确的 json 对象。我可以想象 type_mapping 对象必须包含映射，几乎与您使用[put 映射 api](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping/)提交的映射或[创建](http://www.elasticsearch.org/guide/reference/api/admin-indices-create-index/)索引的映射相同。

# java - 如何在已绘制到 SWT 画布上绘制半透明彩色蒙版？

> ID：16012434
> 
> 赞同：1
> 
> 时间：2013-04-15T10:01:41.193
> 
> 标签：java, drawing, swt, java-canvas

所以我想在现有的画布上绘制一个彩色（红色）区域，就像一个红色的镜头被放置在它上面，所以原始图像在下面仍然可见。

问题是我正在扩展一个画布来绘制它自己的图像，并且我正在它的顶部进行绘制。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:24:56.107

天真的解决`SWT.Paint`方案是`Canvas`向`EventTable.hook()`表...）。因此，原始侦听器可能会在您的侦听器之前或之后运行。

一个更好的解决方案 - 我没有尝试过，但相信可以工作 - 应该是`Composite`在原来的顶部添加一个新的`Canvas`，然后将你的监听器添加到这个小部件，因为任何`Paint`新的监听`Composite`器都保证在所有监听器之后运行`Canvas`本身。记得

*   向 中添加一个`Size`侦听器以`Canvas`确保 的大小`Composite`始终正确
*   使用`setBackgroundMode(SWT.INHERIT_FORCE)`在`Canvas`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T14:29:27.687

In your `Canvas paint()` method,

1.  draw image
2.  `gc.setAlpha(100)` //decide your value
3.  `gc.fillRectangle(rect)` //rect is client area of the canvas

I believe you should get what you are looking for.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-11T10:39:32.310

将 alpha 值设置为画布只会使颜色变暗，不会使其透明。使用 shell.setAlpha(x); 只有在 shell 中才能实现真正的透明 gui；

# php - 比较数据库中的时间和使用 date() 函数检索的当前时间

> ID：16012437
> 
> 赞同：0
> 
> 时间：2013-04-15T10:01:47.757
> 
> 标签：php, mysql

```
 date_default_timezone_set('Asia/Calcutta');

$currenttimeminus30=date('H:i:s', strtotime("-30 minutes"));

 $query1=mysql_query("select * from outdoor where latitude='$latitude%' && longitude='$longitude%' && user_id='$userid' && last_updated<$currenttimeminus30"); 
```

我需要比较 last_updated < $currenttimeminus30 .last_updated 是否是室外表中的字段并且它是时间类型。last_updated 值就像 13:05:11

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:19:46.000

您可以使用以下[`TIME()`](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time)功能：

```
SELECT * 
FROM outdoor 
WHERE latitude = '$latitude%' 
AND longitude = '$longitude%' 
AND user_id = '$userid' 
AND last_updated < TIME($currenttimeminus30) 
```

如果您不使用不同的时区，您就不想使用 PHP 创建时间。你可以只使用一个`INTERVAL`：

```
SELECT * 
FROM outdoor 
WHERE latitude = '$latitude%' 
AND longitude = '$longitude%' 
AND user_id = '$userid' 
AND last_updated < TIME( NOW() - INTERVAL 30 MINUTE ) 
```

**笔记：**

最好`datetime`用作字段类型。在您的情况下，当记录不是今天更新，而是在几天、几个月、几年等之前更新时，您可能会得到错误的结果。

请不要使用[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)，因为它已被**弃用**：

> 此扩展自 PHP 5.5.0 起已弃用，并将在未来删除。相反，应该使用[MySQLi](http://www.php.net/manual/en/book.mysqli.php)或[PDO_MySQL扩展。](http://www.php.net/manual/en/ref.pdo-mysql.php)另请参阅[MySQL：选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)指南和[相关的常见问题解答](http://www.php.net/manual/en/faq.databases.php#faq.databases.mysql.deprecated)以获取更多信息。此功能的替代方案包括：
> 
> [mysqli_query()](http://www.php.net/manual/en/mysqli.query.php)
> 
> [PDO::查询（）](http://www.php.net/manual/en/pdo.query.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:06:16.343

更好地使用mysql的[INTERVAL](http://dev.mysql.com/doc/refman/5.6/en/date-and-time-functions.html#function_date-add)：

```
last_updated < time ( now() - INTERVAL 30 MINUTE ) 
```

这里：

```
$query1=mysql_query("select * from outdoor where latitude='$latitude%' and longitude='$longitude%' and user_id='$userid' and last_updated < time ( now() - INTERVAL 30 MINUTE) )"; 
```

# xslt - xslt normalize-space 但保留评论

> ID：16012438
> 
> 赞同：0
> 
> 时间：2013-04-15T10:01:53.860
> 
> 标签：xslt

有没有办法标准化元素文本的空间但保留可能存在的任何评论？

目前它过滤空间和评论？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:10:34.080

是的，你可以这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()" priority="-1">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:value-of select="normalize-space()" />
  </xsl:template>
</xsl:stylesheet> 
```

在此输入上运行时：

```
<root>
  <mynode>

    here is some    text <!-- That is some text -->

    and here    is some other text

    <!-- That was some other text -->
  </mynode>

  <!-- Here are some more comments -->
</root> 
```

结果是：

```
<root><mynode>here is some text<!-- That is some text -->and here is some other text<!-- That was some other text --></mynode><!-- Here are some more comments --></root> 
```

为了展示如何将其集成到实际执行某些操作的 XSLT 中：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()" priority="-1">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="text()">
    <xsl:value-of select="normalize-space()" />
  </xsl:template>

  <xsl:template match="/">
    <myNewRoot>
      <myNewNode>
        <xsl:apply-templates select="root/mynode/node()" />
      </myNewNode>
    </myNewRoot>
  </xsl:template>
</xsl:stylesheet> 
```

当在上面的输入上运行时，结果是：

```
<myNewRoot>
  <myNewNode>here is some text<!-- That is some text -->and here is some other text<!-- That was some other text --></myNewNode>
</myNewRoot> 
```

# sql - 从变更数据捕获中排除特定更新

> ID：16012454
> 
> 赞同：1
> 
> 时间：2013-04-15T10:03:16.387
> 
> 标签：sql, sql-server, sql-server-2008, cdc, change-data-capture

我有一个概念验证应用程序，它使用变更数据捕获监视其数据库的更改，并使用服务总线传输这些更改。应用程序还接收来自总线的通知并将这些更改提交到本地数据库。

问题是，当应用程序将更改提交到本地数据库时，更改会显示在 CDC 中，导致应用程序在总线上重新传输更改。

是否有可靠的方法从 CDC 中排除特定变更集？

如果可能，我想避免更改源表架构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T13:32:13.430

我无法找到 CDC 内置的这个问题的解决方案。

最后，我决定在事务中执行更新，并在事务中为每次更新检索新的 lsn 值。在此之后，我忽略了由我自己的更新引起的 lsns 更改。

# java - java super没有按预期工作

> ID：16012458
> 
> 赞同：1
> 
> 时间：2013-04-15T10:03:19.287
> 
> 标签：java, inheritance, overriding

```
public  class Counter{
    private int value;

    public int getValue(){
        return value;
    }

    public void setValue (int value){
        this.value = value;
    }

    public  void increment() {

        /* */
    }

    public  void decrement() {
        /* */
    }
}

public class LoopingCounter extends Counter{

    private int limit;

    public LoopingCounter(int limit){
        this.limit = limit;
    }

    public void increment(){
        int value = super.getValue();
        if( value == limit){

            System.out.println("Value has reached the limit, cannot increment any further!");
            setValue(0);

        } else{
            value++;
            setValue(value);
        }
    }
    public void decrement(){
        int value = super.getValue();
        if(value == limit){
            System.out.println("Value has reached the limit, cannot decrement any further!");            
        } else{
            value--;
            setValue(value);
        }
    }

    public int getValue() {
        System.out.println("override");
        return 1000;
    }

}

public class CounterTest{
    public static void main(String[] args){

        LoopingCounter lc = new LoopingCounter(100);

        for(int i=0; i<150; i++){
            lc.increment();
            System.out.println(lc.getValue());
        }

    }
} 
```

在这种情况下，LoopingCounter 应该触发`getValue`Counter 类中的方法。但是由于某种原因，当我运行它时，它一直使用自己的`getValue`方法。

请帮助我理解为什么我不能以这种方式调用父方法。

道歉：

我现在看到了我的错误。我道歉。我没有意识到 lc.getValue() 并且很困惑为什么 lc.increment 未能正确调用 super.getValue() 。故事的精神是在发帖之前有足够的睡眠。-_-”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:23:30.783

您的父方法被调用，但由于您的继承类也具有 getValue() 方法，因此在执行父类方法后调用它。您应该改变从基类中获取价值的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:13:55.847

行为是正确的。如果你想调用`Counter`类`getValue()`，那么你需要在类方法`super.getValue()`的某个地方。将始终调用类内部定义的方法，就像.`LoopingCounter``getvalue()``lc.getValue()``getValue()``LoopingCounter``lc``LoopingCounter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:18:23.077

每当您通过子类调用任何方法时，它总是首先调用子类方法，然后调用超类方法。

如果要先调用超类方法，则在类的`super.getValue()`内部`getValue()`方法中编写`LoopingCounter`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T11:11:05.597

如果类 B 扩展类 A，类 A 具有方法，并且类 B 还提供方法的实现，则这`Object Oriented Programming` 称为[覆盖](http://en.wikipedia.org/wiki/Method_overriding)，这称为覆盖，如果您创建 B 类的对象并调用子类的方法 foo()，则将调用该方法。`void foo()``void foo()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:20:57.663

来自[JLS 8.4.9 重载](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.4.9)和[JLS 8.4.8.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.8.1)。

> 如果您在子类中覆盖父方法，并且使用子类实例运行该方法，则应该运行被覆盖的方法。

所以你在你的程序中得到了正确的行为。

要使用子实例调用父覆盖方法，您可以使用`super` [关键字](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)。

# android - 如何对相同的微调器值选择调用操作

> ID：16012470
> 
> 赞同：6
> 
> 时间：2013-04-15T10:03:53.657
> 
> 标签：android, android-spinner

我从微调器中选择值，当我再次选择相同的值时，单击时不会执行任何操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T10:07:15.553

使用这个自定义 Spinner 类...

```
/** Spinner extension that calls onItemSelected even when the selection is the same as its previous value */
public class NDSpinner extends Spinner {

  public NDSpinner(Context context)
  { super(context); }

  public NDSpinner(Context context, AttributeSet attrs)
  { super(context, attrs); }

  public NDSpinner(Context context, AttributeSet attrs, int defStyle)
  { super(context, attrs, defStyle); }

  @Override public void
  setSelection(int position, boolean animate)
  {
    boolean sameSelected = position == getSelectedItemPosition();
    super.setSelection(position, animate);
    if (sameSelected) {
      // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
      getOnItemSelectedListener().onItemSelected(this, getSelectedView(), position, getSelectedItemId());
    }
  }

  @Override public void
  setSelection(int position)
  {
    boolean sameSelected = position == getSelectedItemPosition();
    super.setSelection(position);
    if (sameSelected) {
      // Spinner does not call the OnItemSelectedListener if the same item is selected, so do it manually now
      getOnItemSelectedListener().onItemSelected(this, getSelectedView(), position, getSelectedItemId());
    }
  }
} 
```

# sql-server-2008 - 更改数据库排序规则而不更改列排序规则

> ID：16012471
> 
> 赞同：2
> 
> 时间：2013-04-15T10:04:01.550
> 
> 标签：sql-server-2008

我将我的数据库的排序规则从

`SQL_Latin1_General_CP1_CI_AS`到

```
Persian_100_CI_AI 
```

但我不想更改我以前的**表格列**排序规则，他们有

`SQL_Latin1_General_CP1_CI_AS collation` 现在 。

它是正确的解决方案还是会导致问题？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:15:03.683

更改数据库排序规则不会影响任何现有对象：

```
create database DB1
collate Latin1_General_CS_AS
go
use DB1
go
create table T1 (c varchar(20) not null)
go
alter database DB1 collate Latin1_General_CI_AI
go
select collation_name from sys.columns where name='c' 
```

结果：

```
collation_name
---------------
Latin1_General_CS_AS 
```

从[设置或更改数据库排序规则](http://msdn.microsoft.com/en-gb/library/ms175835.aspx)：

> *   您可以使用 ALTER DATABASE 语句的 COLLATE 子句更改在用户数据库中创建的任何新对象的排序规则。此语句不会更改任何现有用户定义表中列的排序规则。这些可以通过使用 ALTER TABLE 的 COLLATE 子句来更改。

# java - 有源噪声抑制的理论方法

> ID：16012475
> 
> 赞同：0
> 
> 时间：2013-04-15T10:04:18.607
> 
> 标签：java, algorithm, audio, signal-processing

假设：我有 2 个录音设备，麦克风 1 正在记录我感兴趣的声音和一些噪音，麦克风 2 只记录噪音。从文件 1 中去除噪音的基本方法是什么？分析文件 1 后，我可以简单地删除不需要的频率吗？你知道任何有用的java库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:25:26.947

如果您可以区分有用信号和噪声，或者如果您可以从它和有用信号的总和中减去噪声，您只能去除噪声。对于后者，您可能需要研究自适应滤波器。

# android - 想在Android中将事件添加到日历

> ID：16012476
> 
> 赞同：0
> 
> 时间：2013-04-15T10:04:30.160
> 
> 标签：android, events, insert, calendar

嗨，我正在开发一个我想在其中处理日历的 android 应用程序。我无法在自己的日历中添加活动。我使用了以下代码。使用该代码我可以在默认日历中添加事件..请建议我在我的代码中所需的更改以在我的应用程序的日历中添加事件

```
private void addevent() {
        // TODO Auto-generated method stub
        Intent calIntent = new Intent(Intent.ACTION_INSERT);
        calIntent.setType("vnd.android.cursor.item/event");
        calIntent.putExtra(Events.TITLE, "My House Party");
        calIntent.putExtra(Events.EVENT_LOCATION, "My Beach House");
        calIntent.putExtra(Events.DESCRIPTION, "A Pig Roast on the Beach");
        GregorianCalendar calDate = new GregorianCalendar(2013, 4, 16);
        calIntent.putExtra(CalendarContract.EXTRA_EVENT_ALL_DAY, true);
        calIntent.putExtra(CalendarContract.EXTRA_EVENT_BEGIN_TIME,
             calDate.getTimeInMillis());
        calIntent.putExtra(CalendarContract.EXTRA_EVENT_END_TIME,
             calDate.getTimeInMillis());
        startActivity(calIntent);
        Toast.makeText(this, "event added", Toast.LENGTH_SHORT).show();

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:25:06.260

如果在日历中添加事件，请使用下面的代码，这在我的日历中有效。

// 此代码用于在日历中添加事件。

```
 ContentResolver cr = getContentResolver();
    ContentValues values = new ContentValues();
    values.put(Events.ALL_DAY, Events.ALL_DAY_VALUE);
    values.put(Events.DTSTART, startTimeInMilli);
    values.put(Events.DTEND, endTimeInMilli);
    values.put(Events.TITLE, strTaskName);
    values.put(Events.DESCRIPTION, strDescription);
    values.put(Events.CALENDAR_ID, 0);
    values.put(Events.VISIBILITY, Events.VISIBILITY_VALUE);

    Uri EVENTS_URI = Uri.parse(getCalendarUriBase(this) + "events");
    Uri uri = cr.insert(EVENTS_URI, values);
    long eventID = Long.parseLong(uri.getLastPathSegment()); 
```

// 这个函数调用上层代码。

```
 private String getCalendarUriBase(Activity act) {

    String calendarUriBase = null;
    Uri calendars = Uri.parse("content://calendar/calendars");
    Cursor managedCursor = null;
    try {
        managedCursor = act.managedQuery(calendars, null, null, null, null);
    } catch (Exception e) {
    }
    if (managedCursor != null) {
        calendarUriBase = "content://calendar/";
    } else {
        calendars = Uri.parse("content://com.android.calendar/calendars");
        try {
            managedCursor = act.managedQuery(calendars, null, null, null,
                    null);
        } catch (Exception e) {
        }
        if (managedCursor != null) {
            calendarUriBase = "content://com.android.calendar/";
        }
    }
    return calendarUriBase;
} 
```

// 事件常量的其他静态类。

```
 public class Events {

public static String ALL_DAY = "allDay";
public static String DTSTART = "dtstart";
public static String DTEND = "dtend";
public static String TITLE = "title";
public static String DESCRIPTION = "description";
public static String CALENDAR_ID = "calendar_id";
public static String EVENT_TIMEZONE = "eventTimezone";

public static String VISIBILITY = "visibility";
public static String HASALARM = "hasAlarm";

public static int VISIBILITY_VALUE = 0;
public static int HASALARM_VALUE = 1;
public static int ALL_DAY_VALUE = 0;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:26:17.793

您需要在您的意图 putExtra 中**传递您的应用程序的日历 ID 。**

```
calIntent.putExtra(Events.CALENDAR_ID , my_cal_id); 
```

要获取设备中所有可用日历的列表，您可以使用以下代码：

```
if(android.os.Build.VERSION.SDK_INT 
                       >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH_MR1)
    cursor = getContentResolver().query(Calendars.CONTENT_URI,new String[] 
          { Calendars._ID, Calendars.CALENDAR_DISPLAY_NAME }, null ,null, null);
else
    cursor = getContentResolver().query(Uri.parse("content://com.android.calendar
    /calendars"),new String[] { "_id", "displayName" }, "selected=1",null, null);

        if (cursor != null && cursor.moveToFirst()) {
            String[] calNames = new String[cursor.getCount()];
            int[] calIds = new int[cursor.getCount()];
            for (int i = 0; i < calNames.length; i++) {

                calIds[i] = cursor.getInt(0);
                calNames[i] = cursor.getString(1);
                System.out.println(""+cursor.getInt(0) + " -- "+ 
                                                           cursor.getString(1));
                cursor.moveToNext();
            }
            cursor.close(); 
```

# c++ - 使用 C++ xerces 库出现异常“节点用于与创建它的文档不同的文档”

> ID：16012477
> 
> 赞同：3
> 
> 时间：2013-04-15T10:04:33.607
> 
> 标签：c++, xml, dom, xerces, xerces-c

我`DomNode`从 XML 中提取了一个。然后我尝试将它插入到另一个使用`DomNode`不同的地方，但我得到了一个.`DOMDocument``appendChild(DOMNode*)``DOMException`

例外：

> 节点在与创建它的文档不同的文档中使用

问题：

我怎样才能将一个`DomNode`从一个移动`DOMDocument`到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-28T15:10:21.637

我继续回答这个问题，问这个问题的人让我得到了这个答案，但我花了一些时间来弄清楚整个概念。

```
// Result is from an xpath query
while(result->iterateNext())
{
  // Creating the new document
  DOMDocument * doc  = this->domImplementation->createDocument();

  // Importing the node from the old document to the new document scope
  DOMNode     * node = doc->importNode(result->getNodeValue(), true);

  // Appending the node to the new document
  doc->appendChild(node);

  ... 
```

如上所示，首先您需要将节点导入到文档中，为节点提供所有者文档，然后将其附加到该文档的任何您希望放置的位置。

# php - PHP MySql 更新多行

> ID：16012478
> 
> 赞同：0
> 
> 时间：2013-04-15T10:04:41.810
> 
> 标签：php, mysql, arrays

大家好，我需要以下代码的帮助。

我正在建立一个客户管理系统。我在这里尝试的是更新 ORDERS 表的多行 => 一键提交多行。在此页面之前，我有另一个页面，我的表单中有输入：

```
<input type="text" name="qty[]" value="<?php echo $row["qty"]; ?>" />
<input type="text" name="desc[]" value="<?php echo $row["desc"]; ?>" />
<input type="text" name="price[]"value="<?php echo $row["price"]; ?>" /> 
```

提交表单后，它将转到下一页：

```
 <?php
    if(isset($_POST["submit"])){

        $qty    =  $_POST['qty'];
        $desc   = $_POST['desc'];
        $price  = $_POST['price'];
        $order  = $_POST['order'];
        $customer   = $_POST['customer'];

    $i = 0;
    $count = count($qty);

    for($i=0; $i < $count; $i++){
        $qty      = $qty[$i];
        $desc     = $desc[$i];
        $price    = $price[$i];

        $update = mysql_query("UPDATE `orders` SET `qty` = '".$qty."', `desc` = '".$desc."', `price` = '".$price."' WHERE `order_id` = '".$order."' ");
    }

?> 
```

这段代码有时看起来像更新，而不是，当我更新多行时，我也收到此代码的此错误。

```
Notice: Uninitialized string offset: 1 in 
```

请大家帮忙解决这个问题。

感谢艾迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:12:25.227

您已经覆盖了变量，例如`$qty`.

尝试这个：

```
$qty    = $_POST['qty'];
$desc   = $_POST['desc'];
$price  = $_POST['price'];
$order  = $_POST['order'];
$customer   = $_POST['customer'];

$count = count($qty);

for($i = 0; $i < $count; $i++){
    $qty1      = $qty[$i];
    $desc1     = $desc[$i];
    $price1    = $price[$i];

    $update = mysql_query("UPDATE `orders` SET `qty` = '{$qty1}', `desc` = '{$desc1}', `price` = '{$price1}' WHERE `order_id` = '{$order}';");
} 
```

** 我建议使用`MySQLi`或`PDO`扩展而不是`MySQL`.

**升级版：**

您的`$qty`, `$desc`&`$price`可能有不同的长度。我建议你，像这样修改循环：

```
$sql = "UPDATE `orders` SET `qty` = '{$qty1}', `desc` = '{$desc1}', `price` = '{$price1}' WHERE `order_id` = '{$order}';";

$update = mysql_query($sql);

if(mysql_errno())echo PHP_EOL, mysql_error(); 
```

它可能会帮助您获取 MySQL 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:18:52.583

您不能确保所有三个数组都具有相同的长度。如果不插入价格或描述，则该项目不会随请求一起发送（浏览器仅发送非空值）。

您应该重新处理 HTML 输出并设置一个包含多个以键命名的列的数组，这样您只需要遍历一个数组，而不是三个。

一个例子是：

```
<input type="text" name="product[0][qty]" value="QTY_1" />
<input type="text" name="product[0][desc]" value="DESC_1" />
<input type="text" name="product[0][price]"value="PRICE_1" />

<input type="text" name="product[1][qty]" value="QTY_2" />
<input type="text" name="product[1][desc]" value="DESC_2" />
<input type="text" name="product[1][price]"value="PRICE_2" /> 
```

遍历 products 数组`foreach`并检查是否设置了列：

```
foreach( $_POST['product'] as $inputRow )
{
    if( !isset( $inputRow['qty'] ) || !isset( $inputRow['desc'] ) || !isset( $inputRow['price'] ) )
    {
        echo 'Some input is missing; can\'t store to database';
        continue;
    }

    /* insert to DB here, but please use prepared statement or at least escape the user inputs properly! */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:08:30.977

检查值是否设置..并使用`mysqli or PDO`而不是`mysql`避免sql注入

```
for($i=0; $i < $count; $i++){

    $qty_val      = isset($qty[$i])?$qty[$i]:'';
    $desc_val     = isset($desc[$i])?$desc[$i]:'';
    $price_val    = isset($price[$i])?$price[$i]:'';

    $update = mysql_query("UPDATE `orders` SET `qty` = '".$qty_val."', `desc` = '".$desc_val."', `price` = '".$price_val."' WHERE `order_id` = '".$order."' ");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:10:26.487

使用 foreach 而不是 for，但我们假设您的数组保持同步索引：

```
 foreach ($qty as $index => $quantity_entry){
    $update = mysql_query("UPDATE `orders` SET
              `qty` = '" . mysql_real_escape_string($quantity_entry) . "',
              `desc` = '" . mysql_real_escape_string($desc[$index]) . "',
              `price` = '" . mysql_real_escape_string($price[$index]) . "'
               WHERE `order_id` = '" . mysql_real_escape_string($order) . "' ");
} 
```

这样你就不必担心不存在的索引...... PS：注意 mysql 转义 - 你永远不应该跳过！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:14:26.863

您在每次迭代中都覆盖了 $qty、$desc 和 $price 变量，因此它们只会在第一个迭代中起作用

```
 `$qty    =  $_POST['qty'];
    $desc   = $_POST['desc'];
    $price  = $_POST['price'];
    $order  = $_POST['order'];
    $customer   = $_POST['customer'];

$i = 0;
$count = count($qty);

for($i=0; $i < $count; $i++){
    $currentQty      = mysql_real_escape_string($qty[$i]);
    $currentDesc     = mysql_real_escape_string($desc[$i]);
    $currentPrice    = mysql_real_escape_string($price[$i]);

    $update = mysql_query("UPDATE `orders` SET `qty` = '".$currentQty."', `desc` = '".$currentDesc."', `price` = '".$currentPrice."' WHERE `order_id` = '".$order."' ");
}` 
```

 `无论如何，该代码中有很多错误。您应该在将条目发送到 mysql 之前对其进行过滤或转义，并且您的所有订单项目将具有相同的数量、说明和价格，因为您不断地使用相同的 order_id 覆盖数据。`

# .htaccess - codeigniter hide mode re-write hide index.php in url 不适用于本地主机

> ID：16012483
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:05:14.463
> 
> 标签：.htaccess, codeigniter, mod-rewrite

我正在使用 mamp 或 mac os，codeigniter 版本 2.1.3。Codeigniter 文件夹结构是默认的。这是非常基本的。

我想在 url 中隐藏 index.php。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:44:17.683

`.htaccess`将您的文件更改为：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php?$1 [L] 
```

这样，主页和“reg”页面就可以正常加载`index.php`了。

# csv - 如何将 csv 文件（prestashop 实体除外）导入 prestashop？

> ID：16012484
> 
> 赞同：0
> 
> 时间：2013-04-15T10:05:16.010
> 
> 标签：csv, import, prestashop

如何将 csv 文件导入 prestahop。我搜索了很多东西，并了解了 prestashop 中的导入工具。但我想为我自己的表而不是默认的 prestashop 实体导入 csv 文件。我是 prestashop 的新手，任何人都可以帮助我如何将 csv 文件导入到单独的模块并获取这些 csv 文件的值。帮我 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T16:54:09.633

您需要上传 csv 文件，然后处理 csv 文件。取所有数据，按照PS数据库排列。然后你需要将那些安排好的插入到相关的表中。这是您将数据导入 PS 的唯一方法。

希望这会帮助你。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:02:36.613

您首先必须将 csv 文件转换为 sql 文件。试试这个[在线转换器](http://www.convertcsvtomysql.com/)。

转换后，不要去您网站的后台。相反，转到您主机的 cPanel 并转到 phpMyAdmin。选择您的数据库，您将看到“导入”。

# sql - 在 Oracle 中按小时分配时间

> ID：16012486
> 
> 赞同：0
> 
> 时间：2013-04-15T10:05:20.837
> 
> 标签：sql, oracle

我有各种活动的记录，这些活动的开始和结束时间可能跨越数小时，例如 12:00 = 13:30。我需要将时间分配到小时，以便将时间分配为该活动的 12:00 - 1 小时、13:00、00:30。实现这一目标的最佳方法是什么？

这是创建表、插入和预期结果。需要帮助请叫我。谢谢！

```
CREATE TABLE Z_SCHED_ACTIVITY
(
SCHED_ACTIVITY_ID decimal(38),
STARTTIME timestamp,
ENDTIME timestamp,
ACTIVITY_ID decimal(38),
EMPLOYEE_ID decimal(38),
SHIFT_ID decimal(38)
); 
```

插入：

```
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16452556,{ts '2013-04-11 01:00:00.0'},{ts '2013-04-11 02:00:00.0'},-4107,5217,252849);
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16456677,{ts '2013-04-11 05:30:00.0'},{ts '2013-04-11 05:45:00.0'},-4104,1878,249440);
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16457993,{ts '2013-04-11 03:52:00.0'},{ts '2013-04-11 04:07:00.0'},-4104,5217,252849);
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16613742,{ts '2013-04-11 08:00:00.0'},{ts '2013-04-11 09:00:00.0'},-4107,1878,249440);
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16613744,{ts '2013-04-11 10:30:00.0'},{ts '2013-04-11 10:45:00.0'},-4104,1878,249440);
INSERT INTO Z_SCHED_ACTIVITY  VALUES (16613744,{ts '2013-04-10 23:45.00.0'},{ts '2013-04-11 00:45:00.0'},-4104,1878,249440);

EXPECTED RESULT
Shift ID     EmployeeID            hour start                Sched Time          Activity
249440           1878            04/10/2013 23:00:00           15               -4104
249440           1878            04/11/2013 00:00:00           45               -4104
249440           1878            04/11/2013 05:00:00           15               -4104
249440           1878            04/11/2013 08:00:00           60               -4107
249440           1878            04/11/2013 10:00:00           15               -4104
252849           5217            04/11/2013 01:00:00           60               -4107
252849           5217            04/11/2013 03:00:00            8               -4104
252849           5217            04/11/2013 04:00:00            7               -4104 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:13:08.733

一个有用的技巧是从您的数据中生成所有可能的每小时时间段，然后将其用作连接的一部分，例如：

```
select min_start + ((level - 1) / 24) as hour_start,
    min_start + (level / 24) as hour_end
from (
    select trunc(min(starttime), 'HH') as min_start,
        trunc(max(endtime), 'HH') as max_end
    from z_sched_activity
)
connect by level <= ((max_end - min_start) * 24) + 1;

HOUR_START          HOUR_END
------------------- -------------------
04/10/2013 23:00:00 04/11/2013 00:00:00
04/11/2013 00:00:00 04/11/2013 01:00:00
04/11/2013 01:00:00 04/11/2013 02:00:00
04/11/2013 02:00:00 04/11/2013 03:00:00
04/11/2013 03:00:00 04/11/2013 04:00:00
04/11/2013 04:00:00 04/11/2013 05:00:00
04/11/2013 05:00:00 04/11/2013 06:00:00
04/11/2013 06:00:00 04/11/2013 07:00:00
04/11/2013 07:00:00 04/11/2013 08:00:00
04/11/2013 08:00:00 04/11/2013 09:00:00
04/11/2013 09:00:00 04/11/2013 10:00:00
04/11/2013 10:00:00 04/11/2013 11:00:00

12 rows selected. 
```

您可以在匹配期间加入您的基表：

```
with hours as (
    select min_start + ((level - 1) / 24) as hour_start,
        min_start + (level / 24) as hour_end
    from (
        select trunc(min(starttime), 'HH') as min_start,
            trunc(max(endtime), 'HH') as max_end
        from z_sched_activity
    )
    connect by level <= ((max_end - min_start) * 24) + 1
)
select h.hour_start, h.hour_end, zsa.sched_activity_id, zsa.starttime,
    zsa.endtime, zsa.activity_id, zsa.employee_id, zsa.shift_id
from hours h
join z_sched_activity zsa
on not (zsa.starttime >= h.hour_end or zsa.endtime < h.hour_start)
order by h.hour_start, zsa.sched_activity_id, zsa.starttime; 
```

我不会显示输出，因为它有点乱，但它显示了所有周期，其中一个或多个与基础数据`starttime`和`endtime`.

然后，您可以计算每个伪记录在匹配期间的时间量：

```
with hours as (
    select min_start + ((level - 1) / 24) as hour_start,
        min_start + (level / 24) as hour_end
    from (
        select trunc(min(starttime), 'HH') as min_start,
            trunc(max(endtime), 'HH') as max_end
        from z_sched_activity
    )
    connect by level <= ((max_end - min_start) * 24) + 1
)
select zsa.shift_id, zsa.employee_id, h.hour_start,
    (60*24) * (least(h.hour_end, zsa.endtime)
        - greatest(h.hour_start, zsa.starttime)) as sched_time,
    zsa.activity_id
from hours h
join z_sched_activity zsa
on not (zsa.starttime >= h.hour_end or zsa.endtime < h.hour_start)
order by zsa.shift_id, zsa.employee_id, h.hour_start, zsa.sched_activity_id;

  SHIFT_ID EMPLOYEE_ID HOUR_START          SCHED_TIME ACTIVITY_ID
---------- ----------- ------------------- ---------- -----------
    249440        1878 04/10/2013 23:00:00         15       -4104
    249440        1878 04/11/2013 00:00:00         45       -4104
    249440        1878 04/11/2013 05:00:00         15       -4104
    249440        1878 04/11/2013 08:00:00         60       -4107
    249440        1878 04/11/2013 09:00:00          0       -4107
    249440        1878 04/11/2013 10:00:00         15       -4104
    252849        5217 04/11/2013 01:00:00         60       -4107
    252849        5217 04/11/2013 02:00:00          0       -4107
    252849        5217 04/11/2013 03:00:00          8       -4104
    252849        5217 04/11/2013 04:00:00          7       -4104

10 rows selected. 
```

这里有点奇怪的是，对于带有`endtime`of的记录`2013-04-11 02:00:00.0`，可以说结束时间正好在下一小时的开始，这给你的记录`sched_time`为零。您可以通过重复计算将它们排除在`where`子句中，或者将其包装在外部`select`而不是删除它们，或者您可以添加另一个连接条件，以便根本不考虑它们：

```
...
from hours h
join z_sched_activity zsa
on not (zsa.starttime >= h.hour_end or zsa.endtime < h.hour_start)
and zsa.endtime != h.hour_start
...

  SHIFT_ID EMPLOYEE_ID HOUR_START          SCHED_TIME ACTIVITY_ID
---------- ----------- ------------------- ---------- -----------
    249440        1878 04/10/2013 23:00:00         15       -4104
    249440        1878 04/11/2013 00:00:00         45       -4104
    249440        1878 04/11/2013 05:00:00         15       -4104
    249440        1878 04/11/2013 08:00:00         60       -4107
    249440        1878 04/11/2013 10:00:00         15       -4104
    252849        5217 04/11/2013 01:00:00         60       -4107
    252849        5217 04/11/2013 03:00:00          8       -4104
    252849        5217 04/11/2013 04:00:00          7       -4104

8 rows selected. 
```

# security - 在模块化系统 mvc 4 中使用 fluentsecurity

> ID：16012488
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:05:23.257
> 
> 标签：security, asp.net-mvc-4, authorization, fluent-security

我的解决方案中有一个 MVC 应用程序`app_ui`作为启动项目命名，解决方案中的其他一些应用程序作为模块命名。然后在启动项目中，我通过路由表访问模块及其操作。我`fluentsecurity`用于授权并将其配置`Global.asax`为控制器`app_ui`，一切正常。但是对于模块中的控制器和操作，我无法将配置添加到 fluentsecurity，并且想知道如何为它们添加设置策略。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:52:23.547

您可以使用FluentSecurity 2.0 (beta1)中的**配置文件来做到这一点！**这是文档的链接：[https ://github.com/kristofferahl/FluentSecurity/wiki/Profiles](https://github.com/kristofferahl/FluentSecurity/wiki/Profiles)

**1）在您的模块中创建一个配置文件**

```
public class AdminAreaSecurityProfile : SecurityProfile
{
    public override void Configure()
    {
        For<UserAdminController>().RequireRole(UserRole.Administrator)
        For<BlogAdminController>().RequireRole(UserRole.Editor)
    }
} 
```

**2) 从主应用程序扫描配置文件**

```
SecurityConfigurator.Configure(configuration =>
{
    configuration.GetAuthenticationStatusFrom(() => HttpContext.Current.User.Identity.IsAuthenticated);

    configuration.Scan(scan =>
    {
        scan.AssembliesFromApplicationBaseDirectory();
        scan.LookForProfiles();
    });
}); 
```

# iphone - 从相机拍摄照片后如何跳过“重拍并使用”选项

> ID：16012492
> 
> 赞同：8
> 
> 时间：2013-04-15T10:05:46.287
> 
> 标签：iphone, ios, objective-c, camera

![在此处输入图像描述](https://i.stack.imgur.com/lb9Ts.png)

从相机拍摄照片后如何跳过“重拍并使用”选项或如何更改这些按钮的字体和颜色。

我们使用了以下代码

```
 self.gimgPicker = [[GKImagePicker alloc] init];
    self.gimgPicker.cropSize = CGSizeMake(310, 310);
    self.gimgPicker.delegate = self;
    self.gimgPicker.desiredSize = CGSizeMake(640, 640);
    imgPicker = [[UIImagePickerController alloc] init];
            // Set type to Photo Library if button at index is selected
            if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera]) {

                self.gimgPicker.imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
                [parentController presentModalViewController:self.gimgPicker.imagePickerController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:30:53.110

this view is brought to you by [showsCameraControls](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/showsCameraControls) property of `UIImagePickerController` class

If you set it to `NO` you won't see that screen, but you will have to provide camera controls.

Your alternative is to use [AVFoundation](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/04_MediaCapture.html#//apple_ref/doc/uid/TP40010188-CH5-SW2) which will give you full flexibility on how it looks and performs. Although it will take a bit more time to setup, it will pay-off in the long run.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-31T12:31:12.680

我使用 swizzle 来解决这个问题，虽然有点 hack ......

使用揭示我知道快门按钮的类名是 CAMShutterButton，它是 UIButton 的子类

所以我只是在加载到超级视图时隐藏这个按钮，并放置一个自定义快门按钮来发送 takePicture 消息

好吧，既然我可以隐藏它，我实际上可以将目标操作添加到此按钮或使用通知

记得在调用 takePicture 之前 setShowsCameraControls 跳过重拍和使用

![没有快门按钮的相机](https://i.stack.imgur.com/3Cgus.jpg)

然后你可以做任何你想做的事

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-18T18:17:14.890

关于什么？

**imagepicker.allowsEditing = 否**

# php - PHP SimpleXML - xpath 不起作用，但在在线生成器中它可以

> ID：16012502
> 
> 赞同：1
> 
> 时间：2013-04-15T10:06:07.443
> 
> 标签：php, xml, xpath, simplexml

我有一个带有以下示例内容的大型 xml 文件：

```
<transferData version="1.0">
<item id="1885880" itemType="kivihomepagetransfer">
<property name="country_id">
<value>4402</value>
</property>
<property name="rc_maintenance_other"></property>
<property name="claim_right_shareholder"></property>
<property name="charges_other"></property>
<property name="investment_flag"></property>
<property name="rc_repair_need"></property>
<property name="realtycompany">
<value>Asunto Oy Aulangtie 20</value>
</property> 
```

我已经使用了 xpath 的在线生成器

[http://www.xmltoolbox.com/index.html](http://www.xmltoolbox.com/index.html)

我想访问 的值`<property name="realtycompany">`，我的 xpath 调用如下所示：

```
$path = '//item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value/text()';
$company = $xml->xpath($path);
print_r($company); 
```

在在线生成器中，这是有效的，但原始 xml 不是。我只是收到空的 SimpleXMLElement 对象。在foreach中生成了ItemId，但是是正确的。

为什么这在小例子中有效，但在大文件中却找不到任何东西？

我尝试了其他几个版本：

```
$path = '//item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value';
$path = '//item[@id="1885880"]/property[@name="realtycompany"]/value/text()';
$path = '/item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value/text()';
$path = '/transferData[@version="1.0"]/item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value/text()'; 
```

等等……他们都没有找到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:28:13.633

**编辑：**我发现了问题。您的 XPath 工作正常，但 var_dump/print_r 没有向您显示任何有用的信息。尝试以下操作：

```
$path = '//item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value/text()';
$company = $xml->xpath($path)[0];
print_r((string)$company); 
```

* * *

*较早的回应*

我没有太多使用 XPath，但问题似乎出在“价值”位上。您的 XPath 在`value`不使用时会返回正确的内容。

这对我有用：（*当然，在访问数组索引之前我没有添加任何完整性检查）*

```
<?php

$path = '//item[@id="'.$itemId.'"]/property[@name="realtycompany"]';
$company = (string)$xml->xpath($path)[0]->value;
print_r($company); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:48:10.607

您正在使用*SimpleXML* 扩展及其`SimpleXMLElement::xpath()`方法专门运行 xpath 查询。

但是*SimpleXMLElement* xpath 查询不能返回文本节点 ( `text()`)。在您的情况下，即使您`text()`在 xpath 查询的末尾编写，它也会返回文本父元素节点。

由于这是 SimpleXML，您只需要将其转换为字符串 / 在字符串上下文中使用它：

```
list($company) = $xml->xpath($path);

# echo is string context and output is: "Asunto Oy Aulangtie 20"
echo "Value: ", $company, "\n"; 
```

如果您想直接从文档中检索文本值作为字符串，您可以将其导入*DOMXPath*并评估：

```
$path = 'string(//item[@id="'.$itemId.'"]/property[@name="realtycompany"]/value)';

$xpath = new DOMXPath(dom_import_simplexml($xml)->ownerDocument);

var_dump($xpath->evaluate($path)); # string(22) "Asunto Oy Aulangtie 20" 
```

正如 *var_dump* 所示，您从*评估*调用中获得了一个字符串，因为 xpath 查询查询了一个字符串（*`text()`*最后您将获得一个*DOMText*节点，这是 Simplexml 无法表示的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:29:05.900

如果您只想访问元素的值，则使用[Simple HTML DOM可能更容易](http://simplehtmldom.sourceforge.net/)

```
include('simple_html_dom.php');
$xml = file_get_html('file.xml');
$value = $html->find('property[name=realtycompany]');
echo $value->plaintext; 
```

# sql - SQL 聚合调用

> ID：16012503
> 
> 赞同：0
> 
> 时间：2013-04-15T10:06:07.540
> 
> 标签：sql, postgresql

我有两张桌子

1) 客户

```
 id  |       name        
------+-------------------
    1 | xyz1
    2 | xyz2
    3 | xyz3
    4 | xyz4
    5 | xyz5 
```

2) 产品

```
 id  |       name  | customer | state      
------+-------------+----------+-------
    1 | product 1   |    1     |Shipped    
    2 | product 2   |    1     |Pending 
    3 | product 3   |    1     |Shipped 
    4 | product 4   |    1     |Pending 
    5 | product 5   |    2     |Shipped 
```

我想要一个类似的查询：

`SELECT name from customer, SELECT count(*) from products where state='SHIPPED', SELECT count(*) from product where state='PENDING' for all developers`产生下面提到的结果：

```
 name  | count_shipped | count_pending      
  -------+---------------+---------------
    xyz1 | 2             | 2
    xyz2 | 1             | 0
    xyz3 | 0             | 0
    xyz4 | 0             | 0
    xyz5 | 0             | 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:10:20.313

```
select c.name,
       sum(case when p.state = 'Pending' then 1 else 0 end) as count_pending,
       sum(case when p.state = 'Shipped' then 1 else 0 end) as count_shipped
from customer c 
   left join products p on p.customer = c.id
group by name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:10:17.310

```
SELECT
    c.id , 
    c.name ,
    SUM(IF p.state = 'Shipped',1,0) AS count_shipped,
    SUM(IF p.state = 'Pending',1,0) AS count_pending
FROM Customer AS c
LEFT JOIN Products AS p ON p.customer = c.id
GROUP BY c.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:17:26.533

您也可以使用 COUNT...

```
SELECT c.name
     , COUNT(CASE WHEN state = 'shipped' THEN 'foo' END) count_shipped 
     , COUNT(CASE WHEN state = 'pending' THEN 'foo' END) count_pending 
  FROM customer c 
  LEFT
  JOIN products p  
    ON p.customer = c.id 
 GROUP  
    BY c.id; 
```

# c - 在 Mac OS X 上构建 libconfig 64bit

> ID：16012505
> 
> 赞同：0
> 
> 时间：2013-04-15T10:06:14.430
> 
> 标签：c, macos, compilation, 64-bit, libconfig

我想在我的 Mac OS X (v10.8.3) 上构建和安装[libconfig](http://www.hyperrealm.com/libconfig/)为 64 位。我可以在终端内使用哪些命令？如果我只是使用`./configure`并且`sudo make install`库将安装为 32 位。

否则...如何在安装过程后从系统中正确删除库（库在`/usr/local/`路径中）？

亲切的问候，维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:21:55.217

您可能需要传递`CFLAGS='-arch x86_64'`配置命令行以正确设置架构：

```
./configure CFLAGS='-arch x86_64' 
```

**更新：**

添加`CFLAGS`不会改变 configure 检测系统的方式，它只会改变传递给`gcc`. 但它将构建为 64 位可执行文件：

```
$ file lib/.libs/libconfig.*.dylib
lib/.libs/libconfig.9.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

如果你真的希望`configure`输出正确，那么你需要传入一个`--build`参数：

```
$ ./configure --build=x86_64-apple-darwin10.8.0
checking build system type... x86_64-apple-darwin10.8.0
checking host system type... x86_64-apple-darwin10.8.0
checking target system type... x86_64-apple-darwin10.8.0
... 
```

生成的库也是 64 位的：

```
$ file lib/.libs/libconfig.*.dylib
lib/.libs/libconfig.9.dylib: Mach-O 64-bit dynamically linked shared library x86_64 
```

不可否认，在`--build`这里使用该选项是更好的选择。然而，由于 Mac OS X 上的 gcc 可以构建“胖”二进制文件，它有点模糊了您正在构建的机器的界限，因为它可以为 i386 和 x86_64 构建。

# css - jQuery mobile 修复了 iPad 中的标题问题

> ID：16012508
> 
> 赞同：0
> 
> 时间：2013-04-15T10:06:19.210
> 
> 标签：css, ipad, jquery-mobile, css-position, hybrid-mobile-app

我正在使用 jQueryMobile 为 iOS 构建一个混合应用程序。我的页眉和页脚通过应用程序固定。所以最初我选择了`data-position="fixed"`. 当表单元素获得焦点时，iPad 键盘会弹出并推动整个页面对齐，以便焦点字段可见。

离开场地时，iPad 键盘向下滑动。这让我的标题跳到了页面的中心。

**我徒劳的尝试：**

1.  删除`data-position="fixed"`包括我的样式中的所有 css（位置：固定；顶部：0；）。
2.  关于输入字段注入定位脚本的模糊

    $('input').live('blur',function(){setTimeout(function(){ $('#header').css('position','fixed');},150);

3.  在模糊功能上插入视口`<meta>`标签。

**参考修复：**

[iPad底部：0px问题](https://stackoverflow.com/questions/12792093/ipad-bottom0px-issue)

[https://github.com/jquery/jquery-mobile/issues/5532](https://github.com/jquery/jquery-mobile/issues/5532)

邀请您的宝贵建议或解决方法..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T07:34:36.083

在离开输入字段时将整个页面滚动 2px 可以解决我的问题。但是，它会产生一点点闪烁效果。

```
$('input').live('blur',function(){
        setTimeout(function(){
            var pos = $('body').scrollTop();
            $('body').scrollTop(pos+'2');
        },10);
    }); 
```

# android - 在 android web 视图中播放嵌入的视频

> ID：16012510
> 
> 赞同：1
> 
> 时间：2013-04-15T10:06:25.837
> 
> 标签：android, titanium, android-webview, appcelerator

我想在 android web 视图中播放视频。我正在使用嵌入式 HTML 代码在 android web 视图中打开它。我的设备中安装了 Flash 播放器。当我播放视频时，我会听到视频的声音，但没有图片或视频显示。请帮助在 android web 视图中运行嵌入式视频。我也设置了硬件加速。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T05:07:44.407

在浏览器中打开 URL .. 嵌入式视频未在 Web 视图中播放这是 appcelerator Titan 中的打开错误这里是链接... [https://jira.appcelerator.org/browse/TIMOB-4801](https://jira.appcelerator.org/browse/TIMOB-4801)

# github - 从没有主目录的 Github 下载 repo

> ID：16012513
> 
> 赞同：1
> 
> 时间：2013-04-15T10:06:37.340
> 
> 标签：github

*虽然github*上的下载功能非常好，但它总是创建一个主目录`<repository_name>-<tag/branch>`而不是直接保存内容。有没有办法阻止创建主目录？

# iphone - 在触摸事件中获取自定义 SuperView？

> ID：16012514
> 
> 赞同：2
> 
> 时间：2013-04-15T10:06:43.043
> 
> 标签：iphone, ios

我正在开发一个小游戏，我想在超级视图上做一些功能..超级视图是一个自定义类，即[反射视图..](https://github.com/nicklockwood/ReflectionView)并且希望在用户移动视图时隐藏反射..

这是我所做的...... **（查看代码中的评论以获取详细信息）**

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    NSLog(@"Touch Began");
    frame2 = dragImageView1.frame;
     NSLog(@"uiview origin: %@", NSStringFromCGPoint(frame2.origin));
     // here i want to get the superview Programatically because i will work on multiple such views and [touch view].superview does not give me the ReflectionView Functions
     [_reflectionView1 hideReflection];
    UITouch *touch = [[event allTouches] anyObject];

      if ([[touch view] tag]!=0) {
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        [[touch view] setFrame:CGRectMake(frame2.origin.x, frame2.origin.y, 125.0 * 1.1, 135.0 * 1.1)];
    } else {
        [[touch view] setFrame:CGRectMake(frame2.origin.x, frame2.origin.y, 52.08 * 1.1, 63.28 * 1.1)];
    }
        [self.view bringSubviewToFront:[touch view].superview]; 
      }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-23T08:27:58.480

正如 0x7fffff 提到的，您需要将超级视图转换为自定义视图。喜欢

```
[(ReflectionView *)touch.view.superview updateReflection]; 
```

如果您确定在哪里调用它，而超级视图将始终是 ReeflectionView，则使用它，否则如果您在超级视图不是反射的情况下使用它，您的应用程序将崩溃。然后将此添加到您的代码中

```
if(touch.view.superview isEqual:[ReflectionView class])
{
   [(ReflectionView *)touch.view.superview updateReflection];
} 
```

# android - Android 2.3.3 的闹钟源

> ID：16012515
> 
> 赞同：1
> 
> 时间：2013-04-15T10:06:43.430
> 
> 标签：android, android-source

我正在尝试查找适用于 Android 2.3.3 的内置闹钟的来源。

我检查了她： git clone [https://android.googlesource.com/platform/packages/apps/DeskClock](https://android.googlesource.com/platform/packages/apps/DeskClock) 但这适用于 Android 4.0 及更高版本。

在哪里可以找到以前的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:52:07.600

如果您打开链接，左上角有一个分支列表。你可以`gingerbread`在那里选择。

您只能`gingerbread`像这样克隆 DeskClock 源的分支：

```
git clone -b gingerbread https://android.googlesource.com/platform/packages/apps/DeskClock 
```

# jquery - JQuery在文档准备好和调整大小时启动功能

> ID：16012518
> 
> 赞同：0
> 
> 时间：2013-04-15T10:06:55.530
> 
> 标签：jquery, window-resize, document-ready

我试图让一个菜单在单击图标时从左侧滑入和滑出。我可以毫无问题地工作，但是我需要根据浏览器大小使菜单的行为略有不同。因此，我需要知道文档准备好和调整大小时的浏览器宽度。我似乎根本无法正常工作，它要么没有根据屏幕尺寸激活正确的“点击”功能，要么激活了多次。我尝试了以下许多不同的变体。任何人都可以帮忙。我创建了一个 jsFiddle： http : [//jsfiddle.net/cDppA/42/init](http://jsfiddle.net/cDppA/42/)

```
 var menuInitialized = false;

function doMenu() {
    var width = $(window).width(); 

    if (width < 550) {

         if (!menuInitialized) {
              $('.icon-menu-2').on('click', function (event) { 
            console.log('small');
               });     
            menuInitialized = true;
         }
    } else if ((width < 800) && (width > 550)) {
        if (menuInitialized) {
             $('.icon-menu-2').on('click', function (event) { 
            console.log('large');
              });     
            menuInitialized = false;
        }
    }

}
$(document).ready(doMenu);
$(window).resize(doMenu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:22:26.370

每次使用 时`.on('click', function(){})`，都会为 click 事件**添加**一个绑定，而不是像我假设的那样替换它。所以最终发生的是它在点击时被调用了几次。您可以在再次绑定之前取消绑定 click 事件，使用`$('.icon-menu').unbind('click');`. 我在[这里只修改了你小提琴上的第 5 行](http://jsfiddle.net/asifrc/cDppA/43/)

此外，我的屏幕大于 800 像素，因此如果我在屏幕最大化时单击，则不会发生任何事情，因为您的 if 条件都不涵盖 >800 。

让我知道它是否有效或者您有任何问题:)

# ios - 如何在tableview中创建包含许多数据的单元格

> ID：16012523
> 
> 赞同：-3
> 
> 时间：2013-04-15T10:07:20.627
> 
> 标签：ios, objective-c, uitableview, nsmutablearray

我是 iphone 的新手，我想知道什么可以创建具有多个对象单元格的 tableview，如下所示：

```
NSMutableArray *animal = [[NSMutableArray alloc]initWithObjects:@"Lion",@"Tiger",@"Dog",@"Cat",@"Sheep",@"Wolf", nil]; 
```

在 tableview 中，何时单击下一页上的任何单元格 fo，该单元格是具有第一个对象的许多对象的 tableview（例如：lion 1，lion 2，lion 3，lion 4，lion 5，...）

所以我希望在另一个 tableview 中创建 tableview ...

请指导我。谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:14:14.437

使用下表View的方法

```
#pragma mark -
#pragma mark TableView data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.
    return 1;
}

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        // Return the number of rows in the section.
        return animal.count;
    }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

     cell.textLabel.text = [array objectAtIdex:indexPath.row];

    return cell;
} 
```

当您从 UITableView 中选择行时，以下方法用于触发动作。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
         // Create Object of you SecondViewController for go on.
     SecondViewController *tlController = [[SecondViewController alloc] init];
     tlController.animalName = [array objectAtIndex:insexpath.row];// here you need to pass name of animal on SecondViewController, and in SecondViewController you need to display animal name related to pass from previous view controller.

     [self.navigationController pushViewController:tlController animated:YES];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:19:58.570

首先，您需要通过 xib 设置 tableview 的数据源和委托。

现在要返回 tableview 中的 numberofrows ，有一个委托方法

> *   (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section { }

在这里你可以返回animal.count；如果数组中有 10 个对象，这将创建 10 个单元格。

```
> 

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {  UITableViewCell
    *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];
         if (cell == nil) {
              cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"MyIdentifier"] autorelease];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }

        cell.textLabel.text = [animal objectatIndex:indexpath.ro];
        return cell;
} 
```

这将返回您的动物数组中存在的对象的表格视图。之后要获取所选行的详细信息，有一种方法 didselectrowatindexpath 。尝试用谷歌搜索它。而已 .. ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:26:14.683

请在此处发布任何问题之前进行更好的研究。可能对您[UITableView有所帮助](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# android - 平板电脑上的“片段 android：片段无法实例化片段”

> ID：16012526
> 
> 赞同：2
> 
> 时间：2013-04-15T10:07:40.353
> 
> 标签：android

当我的应用程序在平板电脑上运行时出现以下错误，尽管它似乎在 nexus 7 的模拟器中运行良好：

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.my.myapp/com.my.myapp.PrefsActivity}: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.my.myapp.PrefsActivity$GeneralPreferenceFragment: make sure class name exists, is public, and has an empty constructor that is public
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2063)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2088)
at android.app.ActivityThread.access$600(ActivityThread.java:126)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1168)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4561)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.my.myapp.PrefsActivity$GeneralPreferenceFragment: make sure class name exists, is public, and has an empty constructor that is public
at android.app.Fragment.instantiate(Fragment.java:581)
at android.preference.PreferenceActivity.switchToHeaderInner(PreferenceActivity.java:1117)
at android.preference.PreferenceActivity.switchToHeader(PreferenceActivity.java:1150)
at android.preference.PreferenceActivity.onCreate(PreferenceActivity.java:551)
at com.my.myapp.PrefsActivity.onCreate(SourceFile:40)
at android.app.Activity.performCreate(Activity.java:4637)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2027)
... 11 more
Caused by: java.lang.ClassNotFoundException: com.my.myapp.PrefsActivity$GeneralPreferenceFragment
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.Fragment.instantiate(Fragment.java:571)
... 18 more 
```

我正在使用统一偏好库，我将 GeneralPreferenceFragment 放在它的输出类（而不是内部类）中，但这并没有解决问题

```
 package com.my.myapp;

import net.saik0.android.unifiedpreference.UnifiedPreferenceFragment;

public class GeneralPreferenceFragment extends UnifiedPreferenceFragment {
   public GeneralPreferenceFragment(){

   }
} 
```

GeneralPreferenceFragment 仅在 prefs_headers.xml 中的 XML 中提及：

```
 <preference-headers xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:unified="http://schemas.android.com/apk/res-auto" >

<!--
/*
** Header definitions are identical to android:* except for preferenceRes which should be a reference to a preference xml file
** Unlike the native headers these are also used for building the single pane version.
*/
-->
<header
    unified:fragment="com.my.myapp.PrefsActivity$GeneralPreferenceFragment"
    unified:title="@string/pref_header_general"
    unified:preferenceRes="@xml/pref_general" /> 
```

AndroidManifest.xml

```
 <activity
        android:name="com.my.myapp.PrefsActivity"
          android:configChanges="keyboardHidden|orientation"
        >
    </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T14:14:22.497

我整个早上都在为同样的问题苦苦挣扎……终于找到了解决方案。请注意，我截取了屏幕截图以配合这个解释，但我没有足够的代表来发布它们！道歉。

我在构建和运行 UnifiedPreference 演示项目时遇到了同样的错误，所以我认为这些步骤也会帮助您完成自己的项目。

首先，确保将 actionbarsherlock 和 UnifiedPreference 添加为库引用 - jar 文件将无法工作，因为它们有 layout/xml 文件！

演示项目实际上带有对名为“库”的 UnifiedPreference 项目的引用，但我已将其重命名为 UnifiedReference，因此演示项目无法再找到它。所以我不得不删除 Project Properties -> Android -> Library 下的库引用并使用新名称重新添加。我还以同样的方式添加了对 actionbarsherlock 的引用。

然后我将这两个项目添加到项目属性 - 构建路径 - 项目中的演示项目的构建路径中，并在项目属性 - 构建路径 - 订单和导出中勾选它们。

现在，这解决了参考问题。

但是现在您可能在 Eclipse 中遇到了一些代码问题，即在 net.saik0.android.unifiedpreference.UnifiedPreferenceHelper 中。

首先，我必须用 @TargetApi(Build.VERSION_CODES.HONEYCOMB) 标记方法 loadHeadersFromResource 以便 Eclipse 关闭：

```
@TargetApi(Build.VERSION_CODES.HONEYCOMB)
public void loadHeadersFromResource(int resid, List<Header> target) { 
```

但 Eclipse 仍然抱怨标题和图标标题......即：

```
sa.peekValue(R.styleable.PreferenceHeader_title); (in 2 places)
...and...
header.iconRes = sa.getResourceId(R.styleable.PreferenceHeader_icon, 0); 
```

因此，在 UnifiedPreference 项目的 res -> values -> atrs.xml 中，我注意到 title 和 icon 元素没有格式属性。我像这样添加了 format="string" ：

```
<attr name="title" format="string" />
...
<attr name="icon" format="string" /> 
```

但是现在 Eclipse 抱怨这些属性已经被声明了。原来，他们在 ActionBarSherlock 项目中！所以我给了他们一个新名字：

```
<attr name="up_title" format="string" />
...
<attr name="up_icon" format="string" /> 
```

并相应地更改了 UnifiedPreferenceHelper 中的代码：

```
sa.peekValue(R.styleable.PreferenceHeader_up_title); (in 2 places)
...and...
header.iconRes = sa.getResourceId(R.styleable.PreferenceHeader_up_icon, 0); 
```

刷新和清理依赖项目，然后是主项目，瞧！Eclipse 中没有错误，运行 Demo 项目并且没有 ClassNotFoundException 错误，我现在已经在我的手机上运行了演示。

希望这可以帮助某人。

康纳

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:39:40.750

问题描述如下：

```
Caused by: java.lang.ClassNotFoundException: com.my.myapp.PrefsActivity$GeneralPreferenceFragment 
```

首先 - 尝试清理项目，然后尝试是否仍然存在问题。

# email - cPanel 中的电子邮件转发器设置是私有的吗？

> ID：16012528
> 
> 赞同：1
> 
> 时间：2013-04-15T10:07:47.683
> 
> 标签：email, cpanel, privacy

如果我在 cPanel 中设置了电子邮件转发器，有人能找到它转发到的地址吗？可以使用某种跟踪程序吗？

我有许多低价值的网站，我不想相互关联，也不想在隐私保护上每个花费 10 美元。

谢谢。

# cmd - 如何使用 imagemagick 将 sRGB 颜色配置文件分配给图像

> ID：16012532
> 
> 赞同：2
> 
> 时间：2013-04-15T10:08:06.513
> 
> 标签：cmd, imagemagick

通过命令行如何使用 imagemagick 将 sRGB 颜色配置文件分配给图像？

当我在 windows cmd 中输入以下内容时

```
convert logo: -profile "sRGB.icc" logo.gif 
```

我收到以下错误：

```
convert.exe: unable to open image `sRGB.icc': No such file or directory @ error/blob.c/OpenBlob/26
41.
convert.exe: unable to open file `sRGB.icc': No such file or directory @ error/blob.c/FileToBlob/9
58. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T13:33:31.750

错误消息说找不到包含颜色配置文件的文件。您可以[从 ICC 下载 sRGB 颜色配置文件](http://www.color.org/srgbprofiles.xalter)。我会根据您的用例使用版本 2 配置文件之一。

# plugins - Symfony sfGuardPlugin 不起作用

> ID：16012539
> 
> 赞同：1
> 
> 时间：2013-04-15T10:08:29.557
> 
> 标签：plugins, symfony1, symfony-1.4, sfguard

我已经尝试安装 sfGuardPlugin 几个小时，但仍然无法正常工作。

首先我尝试以这种方式安装它： php symfony plugin:install sfGuardPlugin

但我得到这个错误：

> 致命错误：require_once()：无法打开所需的“PEAR.php”（include_path='/users/alex/fsp:/users/alex/fsp/lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor:/ users/alex/fsp/lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/task:') 在 /users/alex/fsp/lib/vendor/symfony/lib/plugin/sfPearEnvironment.class.php 第 15 行

虽然我加了

```
 include_path = ".:/php/includes:/Users/alex/Documents/PEAR/PEAR" 
```

到 php.ini（分别为 php.ini.default）。这是我使用 phpinfo() 函数时得到的 php.ini。

我已经尝试了很多方法来让它工作，但后来我尝试手动安装插件。我已经从 symfony 网站下载了这个包并解压了它。我添加了

```
 $this->enablePlugins(array('sfPropelPlugin', 'sfGuardPlugin')); 
```

到 ProjectConfiguration.class.php 文件。然后我使用重建模型

```
 php symfony propel:build --all --and-load. 
```

然后我将 myUser 的基类更改为 sfGuardSecurityUser。我编辑了 settings.yml 并添加了（格式正确:)）：

> 全部：.settings：... enabled_modules：[默认，sfGuardAuth] .actions：login_module：sfGuardAuth login_action：登录

构建后我收到此错误：

> 警告：需要（/users/alex/fsp/plugins/sfGuardPlugin/lib/user/sfGuardSecurityUser.class.php）[function.require]：无法打开流：/users/alex/fsp/lib/vendor/ 中的权限被拒绝symfony/lib/autoload/sfAutoload.class.php 第 188 行
> 
> 致命错误：require() [function.require]：无法打开所需的“/users/alex/fsp/plugins/sfGuardPlugin/lib/user/sfGuardSecurityUser.class.php”（include_path='/users/alex/fsp:/users /alex/fsp/lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor:.:') 在 /users/alex/fsp/lib/vendor/symfony/lib/autoload/sfAutoload.class.php 上线188

清除缓存后出现此错误：

> 致命错误：在第 4 行的 /users/alex/fsp/apps/frontend/lib/myUser.class.php 中找不到类“sfGuardSecurityUser”

sfGuardSecurityUser 类存在于 plugins/sfGuardPlugin/lib/user 中。这些表是在数据库中创建的。当然，我还在 security.yml 文件中将 is_secure 条目切换为 true。

我已经尝试并搜索和阅读了两天来解决这个问题，但我无法让它工作。有人可以帮忙吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:55:41.350

您的服务器用户似乎确实具有对插件文件夹的读取权限。这就是为什么它无法加载必要的类。配置没问题。

更改文件夹的权限，它将起作用。

# c# - 根据给定的字符串生成一个唯一的整数

> ID：16012543
> 
> 赞同：0
> 
> 时间：2013-04-15T10:08:38.923
> 
> 标签：c#, uniqueidentifier

关于这个主题已经有很多答案，但我找不到任何看起来像我正在寻找的答案。

我需要从给定的字符串生成一个唯一的负 ID (int)。如果也有解码会很高兴，但不是强制性的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:10:56.213

您可以尝试`myString.GetHashCode()`它不保证是唯一的，但肯定会为相同的字符串返回相同的键。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T10:12:58.510

显然，没有这样的转换。`int`大小受 32 位限制，而`string`大小几乎不受限制。除非您对字符串应用一些限制，否则您将遇到冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:15:14.233

不可能为**任意长度**的字符串生成唯一的 int。

int 有 32 位数据，一个 100 个字符的字符串（假设 C#）将有 1600 位数据，因此您将至少有 1600/32 次冲突。

[搞笑]

你可以 ：

```
string a = "dgfadg";
var bytes = System.Text.Encoding.Unicode.GetBytes(a);
BigInteger integer=  new BigInteger(bytes); 
```

[/有趣]

# javascript - 是否可以向任何滑块控件添加单击事件

> ID：16012544
> 
> 赞同：0
> 
> 时间：2013-04-15T10:08:46.117
> 
> 标签：javascript, javascript-events, anythingslider

嗨，我在我的网站中使用任何滑块，我想在其中向控件添加点击事件。这可能吗？当我尝试这样做时，我的事件没有触发。有人知道这一点吗？

我的点击事件详情

```
 $(function(){
$('.thumbNav li a').click(function () {
$(".spec li a").css('color','#fff');
    });
}); 
```

小提琴链接 [jsfiddle.net/Mottie/ycUB6/5340](http://jsfiddle.net/Mottie/ycUB6/5340)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:22:42.133

你检查过 JS 控制台是否有错误？您错过了`$`事件处理程序中的 before 选择器。

以防万一，您可以考虑使用[`live`](http://api.jquery.com/live/)方法来绑定事件。

编辑：

在您的小提琴中，没有带有“spec”类的元素 - 链接`Tab#`在带有 class 的 div 中`spec-nav`。以下代码可以正常工作：

```
$('.thumbNav li a').click(function () {
    $(".spec-nav li a").css('color','#f0f');
}); 
```

检查[更新的小提琴](http://jsfiddle.net/ycUB6/5351/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:35:42.867

您编码不起作用的原因是导航控件在 AnySlider 初始化之前不存在。所以，你真的有两个选择：

1）在`onInitialized`回调函数（[演示](http://jsfiddle.net/Mottie/ycUB6/5375/)）中使用您的函数：

```
var tabContainers = $('div.spec-nav > div');
tabContainers.hide().filter(':first').show();

$(function () {
    $('#slider1, #slider2, #slider3').anythingSlider({
        theme: 'metallic',
        easing: 'easeInOutBack',
        navigationFormatter: function (index, panel) {
            return ['Slab', 'Parking Lot', 'Drive', 'Glorius Dawn', 'Bjork?', 'Traffic Circle'][index - 1];
        },

        // Callback when the plugin finished initializing
        onInitialized: function (e, slider) {
            $('div.spec-nav ul li a').click(function () {
                tabContainers.hide();
                tabContainers.filter(this.hash).show();
                $('div.spec-nav ul li a').removeClass('spec-actv');
                $(this).addClass('spec-actv');
                return false;
            }).filter(':first').click();
        },

        onSlideComplete: function (slider) {
            // alert('Welcome to Slide #' + slider.currentPage);
        }
    });

}); 
```

2）在创建导航选项卡时构建此功能......如果您查看[`navigationFormatter`文档](https://github.com/CSS-Tricks/AnythingSlider/wiki/Navigation-options#navigationformatter-null)，您会看到您可以返回选项卡的任何属性；这使用了创建 DOM 元素的[`jQuery()`方法](http://api.jquery.com/jQuery/#creating-new-elements)。

```
$('#slider').anythingSlider({
  navigationFormatter : function(i, panel){
    return {
      'class'    : 'imatab',
      'data-hdr' : 'Header: ' + panel.find('h2').text(), // save text from the h2 in the panel
      'title'    : 'This text will end up in a tooltip',
      'html'     : '<a class="panel' + i + '" href="#"><span>' + ['Cat', 'Dog', 'Bear', 'Wolf', 'Horse', 'Bjork?'][index - 1] + '</span></a>',
      'click'    : function(){ alert("AHHH I've been clicked"); }
    };
  }
}); 
```

如果你使用的是 jQuery 1.8+，你可以像这样传递任何 jQuery 实例方法：

```
$('#slider').anythingSlider({
  navigationFormatter : function(i, panel){
    return {
      class : 'imatab',
      on    : {
          click : function( event ) {
              // do something
          }
      },
      html  : '<a class="panel' + i + '" href="#"><span>' + i + '</span></a>'
    }
  }
}); 
```

我没有为这个方法做一个演示，但我希望你能明白。

# handlebars.js - 通过 var 访问 Handlebars Objectvars

> ID：16012546
> 
> 赞同：0
> 
> 时间：2013-04-15T10:08:48.400
> 
> 标签：handlebars.js

车把上有类似`{{foo.*index*.title}}`的东西吗？`{{foo.4.title}}`

```
var foo = {
   1: { title: 'foo a' },
   4: { title: 'foo b' }
   7: { title: 'foo c' }
}

var index = 4 
```

# android - 隐藏和取消隐藏 EditText

> ID：16012548
> 
> 赞同：2
> 
> 时间：2013-04-15T10:09:10.197
> 
> 标签：android

我试图在我的应用程序中从微调器中选择项目时隐藏或显示编辑文本。这里是代码，请建议如何修复它

```
 ArrayAdapter adapter1 = ArrayAdapter.createFromResource(
            this, R.array.country_array, android.R.layout.simple_spinner_item);
        adapter1.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner1.setAdapter(adapter1);
 spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
     @Override
     public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
         rlDate.setVisibility(View.VISIBLE);
         rlTime.setVisibility(View.VISIBLE);

     }

     @Override
     public void onNothingSelected(AdapterView<?> parentView) {

     }
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:24:19.263

```
rlDate.setVisibility(View.GONE); 
```

将使视图“消失”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:26:58.767

希望您的微调器及其点击事件运行良好。然后您可以添加以下代码来禁用或启用编辑文本：

```
 int count = 0;
         spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
             @Override
             public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
            **if(count == 0){
               rlDate.setVisibility(View.VISIBLE);
              count == 1;
            }else{
              rlDate.setVisibility(View.INVISIBLE);
              count = 0;
        }**
   }
    }); 
```

每次单击微调器时，它都会设置edittext可见性。希望这有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-14T13:11:31.910

这就是我如何实现我认为你正在尝试的：

```
spinner1.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {

@Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

            if (Objects.equals(spinner1.getSelectedItem().toString(), "<item_text_value>")) {

                rlDate.setVisibility(View.VISIBLE);
                rlTime.setVisibility(View.VISIBLE);

            } 
        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {

            rlDate.setVisibility(View.GONE);
            rlTime.setVisibility(View.GONE);

        }
    }); 
```

希望这对您有所帮助 - 如果您仍然遇到此问题 - 或其他任何目前遇到此问题的人。

干杯!

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-13T14:27:15.193

```
EditText ta=(EditText)findviewById(R.id.***);
ta.setVisibility(View.GONE); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-15T10:25:41.737

下面的代码为 hode Edittext

```
EditText.setVisibility(View.GONE); 
```

# java - Java将字节数组转换为十六进制字节数组

> ID：16012550
> 
> 赞同：2
> 
> 时间：2013-04-15T10:09:15.520
> 
> 标签：java, android, hex, decimal

我有一个字节数组，我想将其值转换为十六进制。

字节数组 =`[48, 48, 28, ...]`

--->

十六进制字节数组 =`[30, 30, 1C, ...]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:15:39.347

这应该有效。如果它没有隐式转换，也许你必须转换`byte`为。`int`

```
String[] hexArray = new String[byteArray.length];
for(int index = 0; index < byteArray.length; index++) {
    hexArray[index] = Integer.toHexString(byteArray[index]);
    // maybe you have to convert your byte to int before this can be done
    // (cannot check reight now)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:19:40.350

检查[Integer.toHexString](http://developer.android.com/reference/java/lang/Integer.html#toHexString%28int%29)方法。iT 会将 int 转换为十六进制字符串。所以遍历你的数组并转换每个数字。

# linux - Bash 脚本 if 循环

> ID：16012552
> 
> 赞同：1
> 
> 时间：2013-04-15T10:09:21.380
> 
> 标签：linux, scripting

```
User=0
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ $User = av ]
        then
                echo `$User`
elfi [ $User = ma ]
        then     # --> This line giving problem "syntax error near unexpected token `then'"
                echo `$User`
elfi [ $User = pr ]
        then
                echo `$User`
else
echo "ur name dsoes not exist"
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:19:27.887

有两个问题。第一个是`elfi`应该的`elif`。

第二个是周围的反引号`$user`。他们应该被删除。如果变量包含空格，则应在变量周围使用双引号。

```
User=0
echo "Please select av ma ji im pr"
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ "$User" = av ]
        then
                echo "$User"
elif [ "$User" = ma ]
        then
                echo $User
elif [ "$User" = pr ]
        then
                echo "$User"
else
echo "ur name dsoes not exist"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:16:22.520

`elif`你的陈述有错字。在 echo 语句中也不需要反引号。否则将导致执行 it as 命令，这不是您想要的。

```
User=0
echo "Please select av ma ji im pr"    
echo -n "First 2 initial of your Name eg: [av ma ji im pr]? "
read User
if [ $User = av ]
    then
            echo $User
elif [ $User = ma ]
    then
            echo $User
elif [ $User = pr ]
    then
            echo $User
else
echo "ur name dsoes not exist"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:17:37.443

请您下次尝试更好地格式化您的问题。

您的错误来自您的“else if”命令。

不是精灵，是 **精灵**

# html - 在调整窗口大小时，各种文本和图像重叠

> ID：16012553
> 
> 赞同：0
> 
> 时间：2013-04-15T10:09:24.043
> 
> 标签：html, css, overlapping

我有一个网站，我面临一个问题。在缩小窗口大小时，我页面的各种内容重叠。

尺寸越小，看到的重叠越多。

如果您想检查我的问题，[这是我的网站。](http://www.saimotorsandac.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:12:13.337

习惯了这个

```
body{min-width:1250px;} // according to your website 
```

定义`min-width`你的`body`

**如果你的主要** `div` `width is 1200px`定义你的`body {min-width:1200px;}`

# java - Java 在 Eclipse 中运行良好，但在终端中无法正常运行

> ID：16012554
> 
> 赞同：0
> 
> 时间：2013-04-15T10:09:31.153
> 
> 标签：java, noclassdeffounderror

环境：Ubuntu 12.04，JRE 1.6.0

在我的zsh中，即使是简单的`hello.java`也无法正常运行。用 编译时没问题`javac`，但随后键入`java hello`：

```
Exception in thread "main" java.lang.NoClassDefFoundError: hello
Caused by: java.lang.ClassNotFoundException: hello
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
Could not find the main class: hello.  Program will exit. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:12:11.603

你的班级名称似乎是`helloworld`，你想说`java hello`

（因此 JVM 试图找到一个`hello`不存在的类）

请试试`java -classpath . helloworld`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:12:58.487

类名是`helloworld`，你想说`java hello`。检查一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:16:27.473

试试java helloworld。默认情况下，Java 将使用与文件相同的名称进行编译。

所以 javac helloworld.java 输出 helloworld.class，这是您运行字节码需要访问的内容。

# matlab - MATLAB，高斯参数

> ID：16012558
> 
> 赞同：-2
> 
> 时间：2013-04-15T10:09:58.617
> 
> 标签：matlab, gaussian

我必须找到具有至少两个峰值的数据系列的高斯参数。我该如何管理？假设我有`yi = f(xi`) 并且我需要参数 mu 和 sigma。

我知道我可以取所有数据的对数，然后用 polyfit 计算出来，但这样一来，我就得到了一些我不需要的东西（太长了，说不出原因）。

我应该怎么办？

重要细节：**我的 MATLAB 版本没有 normfit。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T12:06:25.153

如果您的 MATLAB 支持[`kmeans`](http://www.mathworks.com/help/stats/kmeans.html)，您可以尝试将数据聚类到两个集群中，然后分别计算每个集群的均值和方差：

```
%// Cluster bimodal data
idx = kmeans(y, 2);
y1 = y(idx == 1);
y2 = y(idx == 2);

%// Compute means and variances of clusters
M = [mean(y1), mean(y2)];
V = [var(y1), var(y2)]; 
```

对于*k*模式的一般情况，您可以使用以下代码：

```
idx = kmeans(y, k);    %// Cluster data
C = arrayfun(@(x)y(idx == x), 1:k, 'UniformOutput', false);
M = cellfun(@mean, C); %// Mean of clusters
V = cellfun(@var, C);  %// Variance of clusters 
```

这种方法的好处是它适用于任何数量的集群，只要它是*先验已知的*。

### 例子

我们先生成一些任意的双峰高斯数据：

```
N = 1e4;                    %// Number of samples per mode
M = [1, 5]; V = [0.2, 0.4]; %// Means and variances of two normal distributions
y = bsxfun(@plus, bsxfun(@times, randn(1e4, 1), sqrt(V), M);
y = y(randperm(numel(y)));  %// Shuffle samples 
```

我们应该得到以下直方图：

![在此处输入图像描述](https://i.stack.imgur.com/ds679.jpg)

现在让我们执行 k-means 聚类并计算每个聚类的均值和方差：

```
idx = kmeans(y, 2);    %// Cluster bimodal data
C = arrayfun(@(x)y(idx == x), 1:k, 'UniformOutput', false);
M = cellfun(@mean, C); %// Mean of clusters
V = cellfun(@var, C);  %// Variance of clusters 
```

我得到的结果是：

```
M =
    0.9985    4.9802

V =
    0.1949    0.3854 
```

这与原始数据非常接近。

* * *

如果您没有 MATLAB `kmeans`，您可以使用 FEX 实现，例如[`litekmeans`](http://www.mathworks.com/matlabcentral/fileexchange/24616-kmeans-clustering).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:58:47.247

我已经在这里回答过这种类型的问题几次，每次我都认为“**必须**可以更简单地做这种事情......”但是，我还没有看到或想到更简单的方法，所以...忍受我:)

如果您事先知道峰值的数量，您可以这样做：

```
function GaussFit

    % DATA TO REPRODUCE
    mu    = [112  -45];
    sigma = [ 12   24];

    F =[...
        mu(1) + sigma(1)*randn(1e4, 1)
        mu(2) + sigma(2)*randn(1e4, 1)];

    % interpolate with splines through the histogram
    [y,x] = hist(F, 1500);
    G = spline(x,y);

    % Find optimum curve fit 
    P0 = [% mu  S    A
            80  2   2e3;  % (some rough initial estimate)
            -8  12  2e3];        
    P = fminunc(@(P) Obj(P, x,G), P0); % refine the estimate

    % REPRODUCED DATA
    P(:,1:2).'

    figure, clf, hold on
    plot(x, P(1,3)*Gaussian(P(1,1),P(1,2),x) + P(2,3)*Gaussian(P(2,1),P(2,2),x))
    plot(x, ppval(G,x),'r.', 'MarkerSize', 1)

end

% The objective function for the curve fitting optimizer
function val = Obj(P, x,F)

    G = zeros(size(x));    
    for ii = 1:size(P,1);

        mu = P(ii,1);    % mean
        sigma = P(ii,2); % std. deviation
        A = P(ii,3);     % "amplitude"

        G = G + A/sigma/sqrt(2*pi) * exp(-(x-mu).^2/2/sigma^2);

    end    

    val = sum((G-ppval(F,x)).^2);

end

% just a function for plotting
function G = Gaussian(mu,sigma,x)
    G = 1/sigma/sqrt(2*pi) * exp(-(x-mu).^2/2/sigma^2);    
end 
```

结果：

```
ans =
  112.1633   -45.2013
  12.6777     24.6723 
```

![高斯拟合](https://i.stack.imgur.com/rc28g.jpg)

我会说相当不错的结果:)

与往常一样，这种方法有一些缺点。它需要你事先知道

1.  数据集中的峰数
2.  初始估计“足够接近”优化器收敛到实际解决方案

`kmeans`如果您事先不知道峰值的数量（并且想自动找到峰值的数量） ，则必须使用[一些启发式方法](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set)来定位数据集中的峰值数量（及其平均值）。

无论如何，重要的是有*办法*找到峰值的数量，但没有办法自动找到合适的初始估计。如果您只有一个或几十个数据集，仍然可以手动完成初始估计，但除此之外的任何事情都会使上述方法越来越不吸引人。

但是，您可以使用*全局*优化器，在这种情况下，您不必再提出初始估计。但正是在这一点上，我不禁思考

> “这么简单的问题，应该不需要吧！”

但是哦，好吧。

# iphone - 自动录制视频 15 秒并保存到目录

> ID：16012561
> 
> 赞同：0
> 
> 时间：2013-04-15T10:10:00.140
> 
> 标签：iphone, ios, video

我想在我按下按钮时自动从我的 iphone 设备录制视频，录制 15 秒后视频应该停止，我想将视频保存到目录中。

我曾尝试使用 imagepicker，但为此我们需要手动按下开始按钮来开始视频录制。我希望当用户按下按钮时相机应该开始重新编码视频。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:17:49.570

您可以通过使用`UIImagePickerController`自身来做到这一点。您提到您需要手动按下开始按钮，但这是不对的。

参考[Apple 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

有可用于通过代码捕获视频的实例方法。`startVideoCapture`和`stopVideoCapture`。

在按钮的单击上实例化 imagePicker 对象.. 然后调用以下方法。

```
[yourImagePickerObject startVideoCapture]; 
```

之后，您可以在 15 dec 延迟后调用计时器或执行选择器，然后可以调用

```
[yourImagePickerObject stopVideoCapture]; 
```

此方法将调用您的图像选择器的委托方法`– imagePickerController:didFinishPickingMediaWithInfo:`

您可以在此处处理媒体并将其写入文档目录。

**更新**

单击按钮时，您将显示图像选择器并调用该`startVideoCapture`方法，即使这也不起作用，而只是尝试在 presentModalView 行之后关注按钮的事件：

```
int64_t delayInSeconds = 1.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    [yourImagePickerobj startVideoCapture];
    [objImgPicker performSelector:@selector(stopVideoCapture) withObject:nil afterDelay:15];
}); 
```

您可以尝试更改 delayInSeconds 的值。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-21T07:05:38.433

可能设置`VideoMaximumuration`为 15 秒将解决您的问题

`[yourImagePickerObject setVideoMaximumDuration:15];`

# javascript - 如何在 extjs4 中选择其对应的 Ext.selection.CheckboxModel 复选框时更新特定的网格面板单元格？

> ID：16012563
> 
> 赞同：1
> 
> 时间：2013-04-15T10:10:01.153
> 
> 标签：javascript, extjs, extjs4, extjs4.1

以下是我的代码片段： store-
>

```
 this.segmentsList = { segments: [] };
   this.segmentfields = [ {name: 'pvName', mapping : 'pvName'},         
                          {name: 'tierName', mapping : 'tierName'}] 
   this.segmentsStore = new Ext.data.JsonStore({
                         fields : this.segmentfields,
                         autoLoad: true,         
                         data   : this.segmentsList,            
                         root   : 'segments'         
                         }); 
```

网格->

```
this.datatieringSelectModel = new Ext.selection.CheckboxModel({checkOnly:true});
      this.segmentsGrid = new Ext.grid.Panel({
         autoScroll : true
         ,id: 'segmentsGrid'
         ,store: this.segmentsStore
         ,height:200
         ,border: true
         ,columns: [           
              {header : 'TierName',  sortable: false, dataIndex: 'tierName'}
             ,{header : 'PV Name', sortable: false, dataIndex: 'pvName'}
         ]
         ,viewConfig: {forceFit: true}
         ,selModel:this.datatieringSelectModel
         ,selType:'checkboxmodel'         
         ,enableColumnHide : true
         ,stripeRows: true
      });
  this.datatieringSelectModel.on('select', this.checkboxSelectedHandler, this); 
```

我用以下数据填充我的网格：

```
{ "segments":  [{"tierName": "tire4","pvName": "d2"}
               ,{"tierName": "tire3","pvName": "d1"}]} 
```

现在，当我选择任何复选框时，会触发 select 事件并调用 checkboxSelectedHandler 方法：

```
checkboxSelectedHandler: function(selectionModel, record, rowIndex ) {            
                 tierName = 'tier2';                     
                 record.set("tierName",tierName);
                 record.commit();                
   } 
```

在这里它成功更新了轮胎名称，但复选框中的刻度线消失了。在调试时，我观察到刻度线一旦 record.set("tierName",tierName); 被调用。请建议如何在不影响相应复选框选择的情况下更新 tierName 单元格。

# sharepoint - “Sharepoint 未安装”Visual Studio 2012 错误

> ID：16012566
> 
> 赞同：5
> 
> 时间：2013-04-15T10:10:07.907
> 
> 标签：sharepoint, visual-studio-2012

我在 VMware 机器上安装了 SharePoint 2013，我还可以使用 VS 2012 创建和部署项目。我正在尝试从装有 Win 7 64b 的主机 PC 创建一个 SharePoint 2013 项目，我也安装了 VS 2012。我已经使用[官方说明](http://blogs.msdn.com/b/timquin/archive/2013/01/22/setting-up-visual-studio-2012-for-sharepoint-2013-development-offline.aspx)安装了 Microsoft Office Developer Tools for Visual Studio 2012 。

在我的主机上，我无法创建 SharePoint 项目并进行 SharePoint 开发并收到此错误：

> 未安装 SharePoint。此系统上未安装所需版本的 SharePoint Foundation 2013 或 SharePoint Server 2013。要在服务器资源管理器中开发 SharePoint 解决方案或浏览 SharePoint 连接，必须在本地系统上安装 SharePoint。确保 SharePoint 项目引用的本地服务器存在。

![错误截图](https://i.stack.imgur.com/7yR89.png)

我的环境是：

1.  窗口 7 专业版
2.  安装了 Office 组件的 VS 2012
3.  远程服务器上的 SharePoint 2010 Server

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:35:12.183

您的主机 PC 没有安装 SharePoint。vmware 实例被视为 SharePoint 的远程安装，它也可以安装在外部服务器上。

如果您想使用标准 SharePoint 项目模板进行开发，您需要在安装了 SharePoint 的同一台计算机/服务器上运行 Visual Studio。如果您不喜欢这个概念，您可以查看 SharePoint 2013 的远程应用程序，但这是另一回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T16:16:00.100

您的屏幕截图指向创建 2010 年空项目的尝试，但您的文本指的是 2013 年。我假设您使用 2013 年。下面的答案主要适用于两者。

在 2010 年，您只能选择 SharePoint 项目 - 在 SP 服务器上运行的代码。这些在 2013 年仍然可用（空项目、可视 Web 部件等）。要开发这种解决方案，您需要**在开发机器上**安装适当的运行时（即安装 SP2010 或 SP2013） 。

SP2013 引入了一种新的项目/模型**——App**。这些解决方案并未*安装*在服务器上，而是通过 js/css 和可能的其他非服务器 Web 服务应用一个或多个配置/库/列表交互。这些被称为应用程序。MS 文档对此通常是一致的，但在阅读时确实需要注意，特别是如果像我一样，您可以将应用程序与项目与解决方案互换。

因此，要回答这个问题，错误消息是正确的 - 您正在尝试启动一个 2010/2013 项目，而没有在同一台机器上安装运行时。如果您想开发 2013 应用程序，则无需安装 SP2013 产品即可完成，但您需要一份适用于 Visual Studio 的 Office 开发人员工具。

[MSDN 文章](http://msdn.microsoft.com/en-us/library/office/jj220047.aspx)在第一部分下方有关于应用程序的“重要”说明

> 如果 Microsoft SharePoint 2013 安装在远程服务器上，您可以在 Visual Studio 2012 中为 SharePoint 解决方案开发应用程序。但是，您必须先在本地安装 Microsoft SharePoint 2013，然后才能开发其他 SharePoint 解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-18T08:49:20.330

我也遇到了这个问题，但我设法通过简单的步骤解决了这个问题：

1.  从此直接链接[http://go.microsoft.com/fwlink/?LinkID=279063&clcid=0x409下载 officetools_bundle](http://go.microsoft.com/fwlink/?LinkID=279063&clcid=0x409)

2.  运行设置并允许它完成。

3.  打开 Visual Studio 2012 并享受为 SP 2013 开发应用程序的乐趣。

希望它有帮助..干杯！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-26T22:24:20.170

您必须在您的机器上安装了 sharepoint 2010 服务！远程服务器仅适用于 SharePoint 2013 中的 AppPart

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-09T12:02:45.660

转到 Visual Studio，单击项目并在属性中，转到站点 URL 并输入本地计算机的 url，即在 iis 中运行的服务器名称。或者转到服务器资源管理器并在服务器连接下添加您的连接。

# mysql - Workbench 使用识别关系创建不必要的主键

> ID：16012567
> 
> 赞同：0
> 
> 时间：2013-04-15T10:10:12.483
> 
> 标签：mysql, mysql-workbench

我目前正在尝试使用 Workbench 应用程序为 MySQL 开发一个模式，并遇到了问题，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/rC0mL.png)

我的模型应具有以下属性：

存在许多区域（例如特定地形上的建筑物）。对于这些区域，每个楼层都有地图。在每张地图上可以放置几个视点。

所以关系很清楚：1个区域可以有n个地图。1 张地图可以有 n 个视点。

我把它们画到图像中。但是，为什么 Workbench 将 map_id 和 area_id 插入视点，尽管 map_id 就足够了？是不是有点重复？

还有一个问题：这些关系正在识别是否正确？我以为会是这样，因为没有区域就不可能存在地图，没有地图就不可能存在视点。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:45:00.157

请不要在一个 Stackoverflow 问题中提出两个不同的问题。为他们每个人打开 SO 问题。

对于关系：我不确定为什么要插入 area_id。也许那是因为 map_id 和 area_id 都在 PK 中。但是，如果您在 FK 中不需要它，您应该能够删除 area_id。

重新识别关系：那是另一回事。地图只有在区域存在时才能存在的要求等由关系的序数（这是您通过 1:n 强制关系得到的）建模。要识别关系，请阅读[此 Stackoverflow 问题](https://stackoverflow.com/questions/762937/whats-the-difference-between-identifying-and-non-identifying-relationships)。

# c# - 在 DatePicker 中激活 Insert(Key)

> ID：16012569
> 
> 赞同：1
> 
> 时间：2013-04-15T10:10:14.617
> 
> 标签：c#, wpf

如何`DatePicker`在 WPF 中激活插入键？

```
<DatePicker x:Name="DateTpicker"
              SelectedDate="{x:Static sys:DateTime.Now}"
              DisplayDate="{x:Static sys:DateTime.Now}"
              PreviewTextInput="ActivateInsertKey"/>

private void ActivateInsertKey()
{
    // activate Insert-key ?????
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:22:17.037

我在[这里](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/a38c6aec-81a2-4b1c-9a77-c0ae890c1363/)找到了解决方案（请参阅最后的帖子）：

```
PropertyInfo textEditorProperty = typeof (TextBox).GetProperty(
   "TextEditor", BindingFlags.NonPublic | BindingFlags.Instance);
object textEditor = textEditorProperty.GetValue(hexTextBox, null);

// set _OvertypeMode on the TextEditor
PropertyInfo overtypeModeProperty = textEditor.GetType().GetProperty(
   "_OvertypeMode", BindingFlags.NonPublic | BindingFlags.Instance);
overtypeModeProperty.SetValue(textEditor, true, null); 
```

我在后面`Copy/Pasted`的代码和上面的代码中创建了一个方法。

# ios - 将数据写入 HTML 模板

> ID：16012572
> 
> 赞同：1
> 
> 时间：2013-04-15T10:10:16.170
> 
> 标签：ios, objective-c, parsing, html-parsing

我的项目包中有一个 HTML 模板。它的结构方式是我需要将参数传递给各种 %@，如图所示

```
@"<h3>Test</h3>"
"<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">Name: %@</div>"
"<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">City: %@</div>"
"<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">Country: %@</div>" 
```

我做过类似的功能，其中我的模板是一个 XML 文件，我使用 DDXMLParser 写入模板。是否有任何这样的解析器可以让我写入 HTML 模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:18:12.467

您可以先从文件中读取字符串，然后使用`stringWithFormat:`

```
NSFileHandle *fileHandle = [NSFileHandle fileHandleForReadingAtPath:filePath];

// Read whole content
NSData *data = [fileHandle readDataToEndOfFile];
NSString *templateString = [[[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding] autorelease];
[fileHandle closeFile];

// Replace here
NSString *htmlString = [NSString stringWithFormat:templateString, param1, param2, param3]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:25:28.547

只需使用正常的字符串插值

```
NSString *template = @"<h3>Test</h3>"
    "<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">Name: %@</div>"
    "<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">City: %@</div>"
    "<div style=\"color:#000;margin:5px;padding:4px;font-family:HelveticaNeueLTPro-LtCn;font-size:16;\">Country: %@</div>";

NSLog(@"%@", [NSString stringWithFormat:template, @"Paul", @"Leeds", @"UK"]); 
```

# c++ - 编辑另一个 library2 中使用的 library1 中的类导致访问冲突异常

> ID：16012578
> 
> 赞同：0
> 
> 时间：2013-04-15T10:10:27.650
> 
> 标签：c++, exception, dll, dllexport

我有一个 dll 库 1，它有很多类，这些类在 dll 库 2 中使用，我无法访问库 2 代码，我无法重新编译它，我想在不影响库 1 的类中添加一些功能图书馆2的工作，我遇到了问题

我做了什么？？（1）我在库 1 中的类中添加了另一个构造函数，并且库 2 继续正常工作，（2）我在库 1 中的类中添加了一个公共 bool 变量，库 2 抛出异常 - 访问冲突读取 - ！！我没有删除任何东西，我只是添加了导致其他库停止工作并引发访问冲突读取异常的新变量。

这是正常的还是解决方案是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:10:27.650

我通过将新变量放在类声明的末尾解决了这个问题

```
class A // before editing
{
public:
    int a;
    bool b;
};

//i was doing thia
class A // when problem was caused
{
public:
    bool q;//my new item
    int a;
    bool b;
};

//what solved the problem

class A // after the problem  was solved
{
public:
    int a;
    bool b;
    bool q;//my new item
}; 
```

但我对此没有真正的解释。

# mongodb - MongoDB查询检查数组属性中的值

> ID：16012580
> 
> 赞同：3
> 
> 时间：2013-04-15T10:10:31.837
> 
> 标签：mongodb, querying

如果某些值在 mongo 文档的数组属性中，我无法找到如何检查。例如，我有一些收藏用户，以及这样的文档：

```
{
  'name':'Paul',
  'age':43,
  'friendsIDs': [ ObjectId('qqq...'), ObjectId('www...'), ObjectId('eee...') ],
} 
```

现在假设我要检查，ID 为 ObjectId('qqq...') 的用户是否是 Paul 的朋友。这在几乎所有编程语言中都很容易做到，例如在 php 中它会是这样的：

```
$isFriendOfPaul = in_array( ObjectId('qqq...'), $friendsIds ); 
```

但是如何在 mongo 中查询呢？有任何想法吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-15T11:20:42.073

实际上，它在[手册中是](http://docs.mongodb.org/manual/reference/operator/in/)**$**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T10:23:33.183

您的查询必须是这样的：

```
db.collection.find({"name": "Paul", "friendsIDs": "qqq"}) 
```

此查询查找名称为`Paul`且`friendsIDs`等于的文档`qqq`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-17T13:40:08.877

这也可以用[$eq来完成](http://docs.mongodb.org/manual/reference/operator/query/eq/)

```
> db.person.insert({name: 'Paul', age: 43, friends: [1234, 2345, 3456]})
> db.person.insert({name: 'Dave', age: 23, friends: [2345, 3456]})
> db.person.insert({name: 'Stephen', age: 12, friends: [2345, 3456, 7890]}) 
```

下面是一个使用 $eq 的例子：

```
> db.person.find({friends: {$eq : 2345}}) 
{ "_id" : ObjectId("54e34124fe135475834334da"), "name" : "Paul", "age" : 43, "friends" : [ 1234, 2345, 3456 ] }
{ "_id" : ObjectId("54e34138fe135475834334db"), "name" : "Dave", "age" : 23, "friends" : [ 2345, 3456 ] }
{ "_id" : ObjectId("54e3414bfe135475834334dc"), "name" : "Stephen", "age" : 12, "friends" : [ 2345, 3456, 7890 ] } 
```

但下面的查询也发现相同。因此，正如 Sven 所建议的，您可以省略 $eq。

```
> db.person.find({friends: 2345})
{ "_id" : ObjectId("54e34124fe135475834334da"), "name" : "Paul", "age" : 43, "friends" : [ 1234, 2345, 3456 ] }
{ "_id" : ObjectId("54e34138fe135475834334db"), "name" : "Dave", "age" : 23, "friends" : [ 2345, 3456 ] }
{ "_id" : ObjectId("54e3414bfe135475834334dc"), "name" : "Stephen", "age" : 12, "friends" : [ 2345, 3456, 7890 ] }

> db.person.find({friends: 1234})
{ "_id" : ObjectId("54e34124fe135475834334da"), "name" : "Paul", "age" : 43, "friends" : [ 1234, 2345, 3456 ] } 
```

# javascript - Jquery 函数在本地服务器上有效，但在 Live 上无效？

> ID：16012589
> 
> 赞同：0
> 
> 时间：2013-04-15T10:10:52.517
> 
> 标签：javascript, jquery, asp.net, visual-studio-2010

我遇到了一个小问题，我有下拉水平菜单栏，并且我已经应用 jquery 函数来打开和关闭父项和子项。太胖了，它在我的本地服务器上工作正常，但在我的实时服务器上不起作用。每件事都是实时上传的，我已经从实时服务器多次检查了所有脚本文件的引用。

这是我的 HTML 参考：

```
 <script src="../../resources/scripts/jquery-ui-1.8.16.custom.min.js" type="text/javascript"></script>

   </script>
    <script src="../../resources/scripts/smooth.js" type="text/javascript"></script> 
```

HTML 代码：

```
 <div id="menu">
                    <ul id="Ul2" class="opened">
                        <li class="collapsible"><a href="#" class="collapsible plus">Settings</a>
                            <ul id="Ul3" class="collapsed">
                                <li><a href="#">General Settings</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul id="Ul4" class="opened">
                        <li class="collapsible"><a href="#" class="collapsible plus">Email Templates</a>
                            <ul id="Ul5" class="collapsed">
                                <li><a href="#">All Email Templates</a></li>
                                <li><a href="#">Add Email Template</a></li>
                            </ul>
                        </li>
                    </ul>
                    <ul id="Ul6" class="opened">
                        <li class="collapsible"><a href="#" class="collapsible plus">City</a>
                            <ul id="Ul7" class="collapsed">
                                <li><a href="#">All Cities</a></li>
                                <li><a href="#">Add City</a></li>
                            </ul>
                        </li>
                    </ul> 
```

这是我的脚本：

```
$("#menu li a[class~=collapsible]").click(function () {
        var element = $(this);

        if (element.attr("class") == "collapsible plus") {
            element.attr("class", "collapsible minus");
        } else {
            element.attr("class", "collapsible plus");
        }

        var list = element.next();

        if (list.attr("class") == "collapsed") {
            list.attr("class", "expanded");
        } else {
            list.attr("class", "collapsed");
        }
    }); 
```

[单击此处](http://pakistantransporters.com/project/CMS/Hotels.aspx)以实时查看我的站点，以便您可以轻松检查脚本未实时调用的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:12:43.207

这是由于您的**所有**JavaScript 文件都给出了 404 错误消息，因此您的所有 JS 都无法正常工作。您可以在 Firebug 中看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:17:37.533

我建议您不要使用相对路径，例如：

```
 ../../resources/scripts/jquery-1.6.4.min.js 
```

只需使用浏览器可访问的 URL，例如：

```
yourdomaain.com/resources/scripts/jquery-1.6.4.min.js 
```

或者只是将您的资产放在 webroot 中。把你的assets(css, js, img)放到webroot外面是没有用的，如果你想展示给每个人，那么每个asset也必须是每个人都可以访问的；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:12:53.030

几乎所有的 js 包括`[http://pakistantransporters.com/resources/scripts/jquery-ui-1.8.16.custom.min.js](http://pakistantransporters.com/resources/scripts/jquery-ui-1.8.16.custom.min.js)`显示 404 未找到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:13:31.740

这是因为您的许多 URL 都指向无处（未找到 404），包括 jQuery 引用 - 所以 jQuery 没有加载，并且您的脚本尝试使用它，但`ReferenceError: $ is not defined`.

首先，您需要修复路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-15T10:13:46.163

我想你要么有： -

1) 未在服务器上上传脚本文件夹。

2) 您的 javascript 文件路径错误。

3）您的脚本文件夹没有读取权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-25T07:58:15.203

首先将 jquery 相关版本下载到本地，然后使用它。

舔：- xpath/jquery-1.11.1.min.js

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-18T17:48:05.273

导致此类问题的另一个可能原因是从托管的 HTML 文件中引用`http`jQuery JavaScript文件。`https`

错误的：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

对：

```
<script type="text/javascript" src="https://code.jquery.com/jquery-latest.js"></script> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-02T07:58:45.600

我不知道这是否是您已经看到或使用过的问题，但是在 asp.net 核心中有 `<environment include="Development">`一个布局，它在您看到之前破坏了我的部署，我想把它写到这里。如果您使用，请不要忘记它。[你可以在这里](https://scottsauber.com/2017/07/19/environment-taghelper-exclude-and-include-attributes-in-asp-net-core-2/)看到更多关于它的信息。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-09-05T16:13:38.700

尝试检查链接是否以“http”而不是“https”开头。当您在新选项卡中打开 jquery 的链接时会发生这种情况，“https”更改为“http”

# javascript - 单击设备后退按钮时应用程序崩溃？

> ID：16012592
> 
> 赞同：1
> 
> 时间：2013-04-15T10:11:07.043
> 
> 标签：javascript, android, jquery, cordova

我正在开发 android phonegap 应用程序。我编写了一些代码来禁用后退按钮。

```
function onLoad(){
    document.addEventListener("deviceready", onDeviceReady, false);
}
function onDeviceReady() {
document.addEventListener("backbutton", backKeyDown, true);
console.log("device is ready");
}
function backKeyDown() {
try{
    /document.body.style.cursor = 'none';
    if(!(($('#LoadingImage').is(':visible') )){
        /*document.body.style.cursor = 'none';*/
        jConfirm('Are you sure you want to exit?', 'Confirm', function(r) {        
            if (r == true) {
            localStorage.clear();
                navigator.app.exitApp();
            }      
        });  
    }
    else{

    }

}
catch(err){
    alert(err.message);
}
finally{

}
} 
```

其中 loading Image 是一个显示加载符号的 div。

```
 <div id="LoadingImage" style="display:none">
            <div id="floatingCirclesG">
                <div class="f_circleG" id="frotateG_01">
                </div>
                <div class="f_circleG" id="frotateG_02">
                </div>
                <div class="f_circleG" id="frotateG_03">
                </div>
                <div class="f_circleG" id="frotateG_04">
                </div>
                <div class="f_circleG" id="frotateG_05">
                </div>
                <div class="f_circleG" id="frotateG_06">
                </div>
                <div class="f_circleG" id="frotateG_07">
                </div>
                <div class="f_circleG" id="frotateG_08">
                </div>
            </div>
        </div> 
```

我的问题是在加载 div 节目时，我单击设备后退按钮应用程序在 Galaxy ace 2.3 版中崩溃，但它在 Galaxy s2 4.0 版中运行良好。请帮我解决这个问题。提前致谢！

# android - 无法在 android 中使用 Graph API 获取 Facebook 墙贴的所有评论

> ID：16012593
> 
> 赞同：0
> 
> 时间：2013-04-15T10:11:17.310
> 
> 标签：android, json, facebook

我已经创建了与 Facebook 集成的应用程序以从中获取信息。我实际上得到了正确的回复，但现在的问题是我无法使用图形 API 获得所有评论。假设其中一个帖子有 30 条评论，而我使用列表视图仅获得 facebook 墙上每个帖子的最后 2 条评论。

请帮助我从帖子中获取所有评论。提前致谢。这是我使用 JSON 解析的代码片段。

```
childList=new ArrayList<HashMap<String,Object>>();
HashMap<String, Object> childlist_hashMap=new HashMap<String, Object>();
JSONObject comments_Show=data.getJSONObject(i).getJSONObject("comments");

if(comments_Show.has("data"))
{
  JSONArray datacomments=comments_Show.getJSONArray("data");

   for(int c=0;c<datacomments.length();c++) {
    childlist_hashMap=new HashMap<String, Object>();
    childlist_hashMap.put("UserName", datacomments.getJSONObject(c).getJSONObject("from").getString("name"));
    URL url= new URL("http://graph.facebook.com/"+datacomments.getJSONObject(c).getJSONObject("from").getString("id")+"/picture?type=normal");
    childlist_hashMap.put("Image", BitmapFactory.decodeStream(url.openConnection().getInputStream()));
    childlist_hashMap.put("CommentsFull",datacomments.getJSONObject(c).getString("message"));
    childlist_hashMap.put("Comments_id",datacomments.getJSONObject(c).getString("id"));
    childlist_hashMap.put("Comments_date",datacomments.getJSONObject(c).getString("created_time"));
    childList.add(childlist_hashMap);
   }                       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T15:50:22.363

我通常听说 Facebook GraphApi 没有像预期的那样提供足够的信息。

我建议你使用 FQL，更底层的方法来获取数据。FQL 在[此](https://stackoverflow.com/a/8401089/361100)答案和[此](https://developers.facebook.com/docs/reference/fql/comment/)链接中进行了描述。

# java - 接口作为方法参数

> ID：16012594
> 
> 赞同：1
> 
> 时间：2013-04-15T10:11:18.700
> 
> 标签：java, generics, groovy

我想在方法调用中提供一个接口。根据给定的接口，该方法应该创建一个实例。为此，我使用泛型为方法提供不同类型的接口。这里有一个例子：

```
static <T> T createClient(T, String endpointAddress) {
  JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean()
  factory.setServiceClass(T.class)
  factory.setAddress(endpointAddress)
  (T) factory.create() // error -> java.lang.IllegalArgumentException: java.lang.Class is not an interface
}

// AccessibleClient is an interface. call method
createClient(AccessibleClient, "http://localhost/service") 
```

我不知道我的方法是否是合适的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T22:42:37.703

您不能说`T.class`——在 Java 中，信息在运行时不可用。

根据[gontard](https://stackoverflow.com/users/1594933/gontard)的[评论](https://stackoverflow.com/questions/16012594/inteface-as-method-parameter#comment22837494_16012594)，您可能想要这样的东西：

```
static <T> T createClient ( Class<T> t, String endpointAddress )
{
    JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
    factory.setServiceClass( t );
    factory.setAddress( endpointAddress );
    return (T) factory.create();
}

createClient( AccessibleClient.class, "..."); 
```

（另外，在 Java 中你需要分号和`return`关键字——这是 Groovy 还是什么？）

# slider - SlideJS - 移除缓入效果

> ID：16012598
> 
> 赞同：0
> 
> 时间：2013-04-15T10:11:31.597
> 
> 标签：slider, slideshow, slide

我在我的项目中使用 SlideJs ( [http://www.slidesjs.com/](http://www.slidesjs.com/) ) 幻灯片。

在这里，我想要一个重复的图像，它会向左滑动。现在，我已将间隔设置为“0”，以便幻灯片向左移动而没有任何间隔。但这里的问题是我不想要那种让人停顿的缓入效果。只是想让幻灯片连续向左滑动，这样我的重复背景看起来就像向左流畅地流动。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:59:07.487

我在你的小提琴上添加了一些补丁，你可以在这里看到：

[http://jsfiddle.net/vc9w4/6/](http://jsfiddle.net/vc9w4/6/)

首先，在 Fiddle 中获取新版本的插件，然后只需使用新选项设置您的 Slider 以进行减速控制：

```
$(function() {
      $('#slides').slidesjs({
        width: 940,
        height: 528,
        navigation: false,
          effect: {
              slide: {
                  easing: {
                      animate: 'linear', // 'linear' or 'swing'
                      CSS3: 'linear' // 'linear' or 'ease' or anything you want: http://www.w3schools.com/cssref/css3_pr_transition-timing-function.asp
                  }
              }
          }
     });
}); 
```

请注意，此滑块在可用时使用 CSS3 动画属性，并且 CSS3 TransitionTimingFunction 和 jQuery animate 之间的缓动选项不同，因此您需要管理 2 个参数以保持对旧浏览器的兼容性。

# c# - 如何使用 EWS 在会议正文中添加超链接到 c#？

> ID：16012601
> 
> 赞同：1
> 
> 时间：2013-04-15T10:11:34.403
> 
> 标签：c#, exchange-server, exchangewebservices

如何在 EWS 会议中将正文信息添加为超链接？

```
// Create the appointment.
Appointment appointment = new Appointment(service);

// Set properties on the appointment.
appointment.Subject = "Dentist Appointment";
appointment.Body = "The appointment is with Dr. Smith.";
appointment.Start = new DateTime(2009, 3, 1, 9, 0, 0);
appointment.End = appointment.Start.AddHours(2);

// Save the appointment.
appointment.Save(SendInvitationsMode.SendToNone); 
```

上面的代码是创建约会。Appointment.Body 有一个纯文本。我如何将其作为超链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:56:12.043

尝试为正文使用 HTML 片段：

```
appointment.Body = "The <a href="http://your.link">appointment</a> is with Dr. Smith."; 
```

# ios - 在界面生成器中使用现有的自定义 UIView

> ID：16012602
> 
> 赞同：2
> 
> 时间：2013-04-15T10:11:55.330
> 
> 标签：ios, objective-c, interface-builder, xib

我创建了一个 UIView 子类，因为我需要一些自定义的东西。

然后，我在我的一个 xib 上添加了一个 UIView，并将类从 UIView 更改为我的自定义类。当我运行时，它不会实例化自定义类。

我需要做什么？将使用什么构造函数来实例化自定义类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:16:48.883

将`xib`被实例化

```
- (id)initWithCoder:(NSCoder *)decoder 
```

如果您依赖于`xib`可用的连接和其他对象，那么您还可以将代码添加到

```
- (void)awakeFromNib 
```

这是当对象`... is guaranteed to have all its outlet and action connections already established.`

* * *

要处理代码重复，您可以执行以下操作

```
- (instancetype)initWithFrame:(CGRect)frame
{
  self = [super initWithFrame:frame];
  if (self) {
    [self commonInit];
  }
  return self;
}

- (instancetype)initWithCoder:(NSCoder *)aDecoder
{
  self = [super initWithCoder:aDecoder];
  if (self) {
    [self commonInit];
  }
  return self;
}

- (void)commonInit
{
  // any common setup
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:15:36.800

从 XIB 创建 UIView 时调用的方法是

```
- (id) initWithCoder:(NSCoder *)aCoder 
```

# c# - 多选数据网格

> ID：16012608
> 
> 赞同：4
> 
> 时间：2013-04-15T10:12:04.820
> 
> 标签：c#, asp.net, web-applications, datagrid, multi-select

我必须在 asp.net 中创建一个多选 DataGrid，为此我在代码后面（C#）中创建了一个类（MultiGrid）。

```
namespace Portal
{
public class MultiGrid : DataGrid
{
    // Constructor that sets some styles and graphical properties    
    public MultiGrid()
    {
        AllowMultiSelect = false;
        AllowMultiSelectFooter = false;

        // Set event handlers
        Init += new EventHandler(OnInit);
        ItemCreated += new DataGridItemEventHandler(OnItemCreated);
    }

    // PROPERTY: SelectedItems
    public ArrayList SelectedItems
    {
        get
        {
            if (!AllowMultiSelect) return null;

            ArrayList a = new ArrayList();
            foreach (DataGridItem dgi in Items)
            {
                CheckBox cb = (CheckBox)dgi.Cells[0].Controls[0];
                if (cb.Checked)
                    a.Add(dgi);
            }
            return a;
        }
    }

    // PROPERTY: AllowMultiSelect 
    public bool AllowMultiSelect = false;

    // PROPERTY: AllowMultiSelectFooter 
    public bool AllowMultiSelectFooter = false;

    // METHOD: ClearSelection
    public void ClearSelection()
    {
        foreach (DataGridItem dgi in Items)
        {
            CheckBox cb = (CheckBox)dgi.Cells[0].Controls[0];
            cb.Checked = false;
        }
    }

    ///////////////////////////////////////////////////////////////////
    // Event Handlers        // EVENT HANDLER: Init            
    private void OnInit(Object sender, EventArgs e)
    {
        // Add a templated column that would allow for selection.
        // The item template contains a checkbox. It also features a 
        // templated footer containing links for Unselect/Select all 
        if (AllowMultiSelect)
            AddSelectColumn();
    }

    // EVENT HANDLER: Deselect
    private void OnDeselect(Object sender, EventArgs e)
    {
        ClearSelection();
    }

    // EVENT HANDLER: ItemCreated            
    private void OnItemCreated(Object sender, DataGridItemEventArgs e)
    {
        // Get the newly created item
        ListItemType itemType = e.Item.ItemType;

        ///////////////////////////////////////////////////////////////
        // FOOTER
        if (itemType == ListItemType.Footer && AllowMultiSelectFooter
            && AllowMultiSelect)
        {
            // Look for a link button called "lnkSelect" in the context 
            // of the grid item that represents the footer
            LinkButton lb = (LinkButton)
                e.Item.FindControl("lnkDeselect");

            // Now you hold the living instance of the link 
            // button in the footer and can bind it to any code in the 
            // context of the MultiGrid control
            lb.Click += new EventHandler(OnDeselect);

            // Force ShowFooter to true
            ShowFooter = true;

            // Removes all the cells but the first 
            TableCell cell = e.Item.Cells[0];
            for (int i = 1; i < Columns.Count; i++)
            {
                e.Item.Cells.RemoveAt(1);
            }
            cell.ColumnSpan = Columns.Count;
        }
    }

    ///////////////////////////////////////////////////////////////////
    // Helper Functions

    private void AddSelectColumn()
    {
        // Create the new templated column
        TemplateColumn tc = new TemplateColumn();
        tc.ItemStyle.BackColor = Color.SkyBlue;
        tc.ItemTemplate = new SelectColumnTemplate();
        tc.FooterTemplate = new SelectFooterTemplate();
        Columns.AddAt(0, tc);
    }
}
///////////////////////////////////////////////////////////////////////
// Template Classes

public class SelectColumnTemplate : ITemplate
{
    public void InstantiateIn(Control container)
    {
        CheckBox cb = new CheckBox();
        container.Controls.Add(cb);
    }
}

public class SelectFooterTemplate : ITemplate
{
    public void InstantiateIn(Control container)
    {
        LinkButton lb = new LinkButton();
        lb.Text = "Deselect all";
        lb.ID = "lnkDeselect";
        container.Controls.Add(lb);
    }
}
} 
```

**问题**：我需要在 aspx 文件中访问这个类，但它显示“元素“MultiGrid”不是已知元素”。我的aspx代码。

```
<%@ Register TagPrefix="expo" Namespace="Portal" Assembly="MultiGrid" %>
<expo:MultiGrid id="grid" runat="server" 
AutoGenerateColumns="false"
AllowMultiSelect="true"
AllowMultiSelectFooter="true"
font-size="x-small" font-names="verdana"
BorderStyle="solid" BorderWidth="1"
GridLines="both"> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:00:26.223

尝试重建您的解决方案，然后关闭 Visual Studio，然后再次打开以查看它是否有效。

如果没有，请尝试以下链接：

[解析验证元素](https://stackoverflow.com/questions/1474716/resolving-validation-element-xxxx-is-not-supported-warning-in-visual-stu)

# java - 将 Java 日期转换为另一种时间作为日期格式

> ID：16012614
> 
> 赞同：0
> 
> 时间：2013-04-15T10:12:17.237
> 
> 标签：java, timezone, date-conversion

我想将日期转换为“独立时间”。具体来说：“亚洲/加尔各答”。

代码：

```
// TODO Auto-generated method stub
Date date=new Date();
SimpleDateFormat simpleDateFormat=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");

simpleDateFormat.setTimeZone(TimeZone.getTimeZone("Asia/Calcutta"));

String dateString=simpleDateFormat.format(date);

System.out.println("Currect Date : " + dateString);
// This is returning a string and I want a date.

System.out.println("Wrong Output : "+simpleDateFormat.parse(dateString)); 
//This returns a Date but has incorrect result. 
```

以下是上述代码的输出：

```
Correct Date : 2013-04-15 15:40:04
Wrong Output : Mon Apr 15 03:10:04 MST 2013 
```

我想要 DATE，而不是字符串，但是当我检索日期时，时间是`3:10`，当我得到字符串时，我得到`15:40:04`. 为什么这些不一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:29:37.077

parse() 解析日期文本并构造一个长值的 Date 对象。parse() javadoc 说

```
The TimeZone value may be overwritten, depending on the given pattern and 
the time zone value in text. Any TimeZone value that has previously been 
set by a call to setTimeZone may need to be restored for further operations. 
```

您的解析 Date 对象是通过调用在 MST 时区打印的 Date 上的 toString() 来打印的。如果您将其从 MST 转换为 IST，那么您将获得您所期望的时间戳。所以，你的输出是正确的。您需要做的就是使用正确的时区格式化和打印您的长日期值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:18:47.917

Parse 将返回一个 DateObject，因此调用：

```
System.out.println("Wrong Output : "+simpleDateFormat.parse(dateString)); 
```

有点类似于：

```
Date d1 = simpleDateFormat.parse(dateString);
System.out.println("Wrong Output : "+d1.toString()); 
```

请记住，解析日期只是解析字符串以生成日期对象，如果要以某种格式显示它，请使用该日期对象并在其上调用 sdf.format 。例如

```
 String dateStringOut=simpleDateFormat.format(d1);
 System.out.println("Output : "+dateStringOut); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:18:56.060

A`Date`不包含任何格式。它只是一个`Date`. 因此，您不能`Date`在不同的输出格式之间转换您的对象。一旦有了日期，就无需尝试将其转换为不同的格式。当你`String`用你的`SimpleDateFormat`. 所以一旦你解析了你`Date`的 .

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T10:22:25.667

使用 DateFormat 类的静态函数 getDateTimeInstance(int dateStyle,int timeStyle)。有关详细信息，请参阅 DateFormat 类。它可能会帮助你。

# javascript - Windows 8 App Javascript：applicationData localSettings 是否持久？

> ID：16012619
> 
> 赞同：0
> 
> 时间：2013-04-15T10:12:32.550
> 
> 标签：javascript, windows-8, local-storage

我正在寻找一种将用户设置存储在 Windows 8 应用程序中的方法。我找到了这个存储：

```
applicationData.localSettings["exampleSetting"] = "example"; 
```

我的问题是：**这些数据是永久存储在 localSettings 中还是受到垃圾收集器的影响？**首先我尝试了localStorage，但有时系统会清除此存储空间，我不知道确切的时间。重现它的每一次尝试都失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:26:35.597

这可能与 ApplicationData 存储的版本控制有关。

[http://danielfrost.dk/post/2013/04/15/Saving-stuff-to-RoamingSettings-and-LocalSettings-in-Windows-8.aspx](http://danielfrost.dk/post/2013/04/15/Saving-stuff-to-RoamingSettings-and-LocalSettings-in-Windows-8.aspx)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T19:17:56.313

感谢所有做出贡献的人。LocalSettings 似乎一直持续到现在。

# php - 在 php 中导出 .sql

> ID：16012625
> 
> 赞同：0
> 
> 时间：2013-04-15T10:12:46.357
> 
> 标签：php, sql, phpmyadmin

我想使用数据库中的 php 导出 sql 和 excel 文件。尝试了在这里找到的每一个薄，但没有工作。

查看代码它显示错误“严格标准：只有变量应该通过引用在 C:\xampp\htdocs\dan\index.php 导出学校到 ~/one.sql 期间出现警告”

```
<?php

$mysqlDatabaseName ='school';
$mysqlUserName ='root';
$mysqlPassword ='';
$mysqlHostName ='';
$mysqlExportPath ='one.sql';

$command='mysqldump --opt -h' .$mysqlHostName .' -u' .$mysqlUserName .' -p' .$mysqlPassword .' ' .$mysqlDatabaseName .' > ~/' .$mysqlExportPath;
exec($command,$output=array(),$worked);
switch($worked){
    case 0:
        echo 'Database <b>' .$mysqlDatabaseName .'</b> successfully exported to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 1:
        echo 'There was a warning during the export of <b>' .$mysqlDatabaseName .'</b> to <b>~/' .$mysqlExportPath .'</b>';
        break;
    case 2:
        echo 'There was an error during export. Please check your values:<br/><br/><table><tr><td>MySQL Database Name:</td><td><b>' .$mysqlDatabaseName .'</b></td></tr><tr><td>MySQL User Name:</td><td><b>' .$mysqlUserName .'</b></td></tr><tr><td>MySQL Password:</td><td><b>NOTSHOWN</b></td></tr><tr><td>MySQL Host Name:</td><td><b>' .$mysqlHostName .'</b></td></tr></table>';
        break;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:43:10.893

1.  指定完整路径`mysqldump`
2.  如果主机名和密码为空，请不要指定相应的选项
3.  确保导出路径是可写的

试试这个

```
$output = array();
$worked = 2;
$command = "/usr/local/mysql/bin/mysqldump --opt";
if (!empty($mysqlHostName))
    $command .= " -h$mysqlHostName";
$command .= " -u$mysqlUserName ";
if (!empty($mysqlPassword)) 
    $command .= " -p'$mysqlPassword'";
$command .= " $mysqlDatabaseName > /tmp/$mysqlExportPath";
// your code goes here 
```

*调整 mysqldump 的路径并相应地导出文件夹*

# android - 单击关联的文本视图时如何启用复选框

> ID：16012627
> 
> 赞同：4
> 
> 时间：2013-04-15T10:12:54.950
> 
> 标签：android

我在我的应用程序中使用 CheckBox 和 TextView（我在 Checkbox 和 Textview 之间使用图像视图，所以我不能使用 CheckBox 文本）。如果单击相应的 TextView，我想启用/禁用我的复选框。任何人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:39:47.583

试试这个：

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:orientation="vertical"
          android:layout_height="match_parent"
          >
<TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="First text box"
     android:id="@+id/tb_1"
     />
<CheckBox
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_margin="10dp"
        android:id="@+id/cb_1"
        />

<TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Second text box"
        android:id="@+id/tb_2"
        android:layout_marginTop="50dp"
        />
<CheckBox
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_margin="10dp"
        android:id="@+id/cb_2"
        />
    </LinearLayout> 
```

我的活动.java

```
public class MyActivity extends Activity implements  View.OnClickListener {

private TextView tv1;
private CheckBox cb1;
private TextView tv2;
private CheckBox cb2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
          setContentView(R.layout.main);
    tv1 = (TextView)findViewById(R.id.tb_1);
    tv2 = (TextView)findViewById(R.id.tb_2);

    cb1 = (CheckBox)findViewById(R.id.cb_1);
    cb2 = (CheckBox)findViewById(R.id.cb_2);

    tv1.setOnClickListener(this);
    tv2.setOnClickListener(this);
    }

 @Override
public void onClick(View v) {
   switch (v.getId())
   {
       case (R.id.tb_1):
       {
           cb1.setChecked(!cb1.isChecked());
           break;
       }
       case (R.id.tb_2):
       {
           cb2.setChecked(!cb2.isChecked());
           break;
       }
   }
}
} 
```

当您单击其中一个时，只需为嵌套（一个或多个）`TextView`设置当前值。这就是你所需要的。希望有帮助。`setChecked``CheckBox`

![在此处输入图像描述](https://i.stack.imgur.com/iVcCC.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:38:09.370

我认为这是一件容易的事。在你的 textview 上实现一个点击监听器，并在 onClickListener 中选中和取消选中你的复选框。

# jquery-ui - 用jquery获取图片的名字

> ID：16012628
> 
> 赞同：0
> 
> 时间：2013-04-15T10:12:58.097
> 
> 标签：jquery-ui, jquery

我有以下 HTML：-

```
<li class="rpItem rpFirst d1">
   <a href="#" class="rpLink 1">
      <span class="rpOut"><img alt="" src="http://localhost:64034/Images/favorites_small.png" class="rpImage">
         <span class="rpExpandHandle"></span>
         <span class="rpText">Product1</span>
      </span>
   </a>
</li>
<li class="rpItem">
    <a href="#" class="rpLink 2">
       <span class="rpOut"><img alt="" src="Images/transparent.png" class="rpImage">
          <span class="rpExpandHandle"></span>
          <span class="rpText">Product2</span>
       </span>
    </a>
</li>
<li class="rpItem">
     <a href="#" class="rpLink 3">
     <span class="rpOut"><img alt="" src="Images/transparent.png" class="rpImage">
        <span class="rpExpandHandle"></span>
        <span class="rpText">Product3</span>
     </span>
     </a>
</li>
<li class="rpItem d1">
     <a href="#" class="rpLink 4">
     <span class="rpOut"><img alt="" src="Images/transparent.png" class="rpImage">
        <span class="rpExpandHandle"></span>
        <span class="rpText">Product4</span>
     </span>
     </a>
</li>
<li class="rpItem d1">
     <a href="#" class="rpLink 5">
     <span class="rpOut"><img alt="" src="Images/transparent.png" class="rpImage">
        <span class="rpExpandHandle"></span>
        <span class="rpText">Product5</span>
     </span>
     </a>
</li>
<li class="rpItem d1">
     <a href="#" class="rpLink 6">
     <span class="rpOut"><img alt="" src="Images/transparent.png" class="rpImage">
        <span class="rpExpandHandle"></span>
        <span class="rpText">Product6</span>
     </span>
     </a>
</li> 
```

我希望针对第一个 li，它具有`src="http://localhost:64034/Images/favorites_small.png"`.

所以我想做类似的事情

`if (imagename = favorites_small.png)` 然后从该项中移除点击事件，即不允许点击。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:18:23.537

```
$('li img[src*=small.png]').each(function(){
    $(this).parents('a').contents().unwrap();
}); 
```

[这](http://jsfiddle.net/7MCKA/2/)是一个工作的jsFiddle

**来源**

[CSS 选择器](http://css.maxdesign.com.au/selectutorial/selectors_attribute.htm)
[jQuery API - .unwrap()](http://api.jquery.com/unwrap/)
[jQuery API - .parents()](http://api.jquery.com/parents/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:18:11.650

这可以用 jQuery 在一行中完成：`$('li img[src~=imagename]').unbind('click');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:57:08.377

用这个。

```
var imagesrc = $('selector img').attr('src');

var imagesrc1 = imagesrc.split("/") ;

var isize = imagesrc1.length;

var imagename = imagesrc1[isize-1]; 
```

这样，您将获得图像名称，然后进行比较。

如果（图像名=收藏夹_small.png）

# email - cakePHP 电子邮件未使用我的模板发送电子邮件

> ID：16012629
> 
> 赞同：0
> 
> 时间：2013-04-15T10:12:58.183
> 
> 标签：email, cakephp

发送电子邮件时，它在页脚中具有以下标准消息。

这封电子邮件是使用 CakePHP 框架[http://cakephp.org](http://cakephp.org)发送的。

它似乎使用这个：`/lib/Cake/Console/Templates/skel/View/Layouts/Emails/text`

在我的控制器中，我有这个。

```
$this->Email->sendAs = 'text';
$this->Email->template = 'dream'; 
```

创建视图：

*   /app/View/Emails/text/dream.ctp
*   /app/View/Layouts/Emails/text/dream.ctp

有没有其他我想念 cakephp 使用我的布局的设置？

*注意：如果我将我的 dream.ctp 重命名为 default.ctp，它会使用那个，所以它似乎忽略了我的模板命令？多么奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:40:25.190

## CakeEmail 没有模板属性

根据问题中显示的路径，您使用的是 Cakephp 2。Cake[电子邮件](http://api.cakephp.org/2.3/class-CakeEmail.html)类没有模板属性 - 这就是操作它没有效果的原因。

## 参考文档

该[文档](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html#sending-templated-emails)包括使用示例，例如：

```
$Email = new CakeEmail();
$Email->template('dream', 'dreamy')
    ->emailFormat('text')
    ->to('bob@example.com')
    ->from('app@domain.com')
    ->send(); 
```

这将使用布局发送`dream`电子邮件。`dreamy`

# mysql - 在MySql中执行一个sql select的结果

> ID：16012630
> 
> 赞同：3
> 
> 时间：2013-04-15T10:12:58.383
> 
> 标签：mysql, command-line

我试图让 MySql 将以下语句的结果作为进一步的 sql 语句执行。我相信在 oracle sqlplus 中这是使用该`spool`功能实现的。这是如何在**Mysql**中实现的？

```
select concat('OPTIMIZE TABLE `', ist.TABLE_SCHEMA,'`.',  ist.TABLE_NAME, ';') FROM INFORMATION_SCHEMA.TABLES ist where table_schema = 'my_schema'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T11:49:50.157

您必须使用[准备好的语句](https://dev.mysql.com/doc/refman/5.7/en/sql-prepared-statements.html)。

```
SET @s:='';
SELECT @s:=concat(@s, 'OPTIMIZE TABLE `', ist.TABLE_SCHEMA,'`.',  ist.TABLE_NAME, ';') FROM INFORMATION_SCHEMA.TABLES ist where table_schema = 'my_schema';    
PREPARE stmt FROM @s;
EXECUTE stmt;

DEALLOCATE PREPARE stmt; 
```

但是您必须将所有优化表语句放入一个变量中，这就是我`@s`与自身连接的原因。否则，您必须使用光标，这是不必要的工作。

> 从 MySQL 5.0.23 开始，支持以下附加语句：

```
ANALYZE TABLE
OPTIMIZE TABLE
REPAIR TABLE 
```

编辑：一个更简单的方法是：

```
SELECT CONCAT('OPTIMIZE TABLE `', ist.TABLE_SCHEMA,'`.',  ist.TABLE_NAME, ';') FROM INFORMATION_SCHEMA.TABLES ist WHERE table_schema = 'my_schema'
INTO OUTFILE '/tmp/my_optimization';
SOURCE 'tmp/my_optimization'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-06T11:38:51.070

如果您通过 mysql 命令行客户端访问它，您可以再次将第一个命令的输出通过管道传输到 cli 工具中。

```
mysql --batch --silent -nBe "select concat('OPTIMIZE TABLE `', ist.TABLE_SCHEMA,'`.',  ist.TABLE_NAME, ';') FROM INFORMATION_SCHEMA.TABLES ist where table_schema = 'my_schema'" | mysql my_schema 
```

# c# - 当该文本框上的 iframe 控件具有焦点时，如何保持页面的滚动位置？

> ID：16012634
> 
> 赞同：3
> 
> 时间：2013-04-15T10:13:10.710
> 
> 标签：c#, javascript, asp.net, ajax

在我的网页中，我使用了一个 iframe 控件，它位于更新面板中，它将每 4 秒刷新一次，并且焦点设置为 iframe 中的文本框之一。我想保持页面的滚动位置，但每 4 秒滚动位置将转到焦点文本框。

我用过`MAintainScrollpositononPostBack`选项

并遵循javascript代码

```
function scroll()
      {
      var obj = document.getElementById("Form1"); 
      obj.scrollTop = obj.scrollHeight;
      } 
```

谁能解释一下如何摆脱这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:55:52.090

最简单的答案是在文本框更新时不要将焦点设置到文本框，这意味着 scoll 位置根本不会改变，除非您使用的某些代码仍在将焦点设置到屏幕外元素。

如果更新时必须在文本框上设置焦点，则保存滚动位置并恢复它。

```
var doc = document.documentElement, body = document.body;
var left = (doc && doc.scrollLeft || body && body.scrollLeft || 0);
var top = (doc && doc.scrollTop  || body && body.scrollTop  || 0);

//update your text box and set focus here

window.scrollTo(left, top); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-07T11:27:25.237

检查以下链接中的代码

[http://medikola.blogspot.in/2013/05/script-for-maintaing-scroll-position.html](http://medikola.blogspot.in/2013/05/script-for-maintaing-scroll-position.html)

# codeigniter - Datamapper ORM Codeigniter 中的 from_array() 方法

> ID：16012637
> 
> 赞同：0
> 
> 时间：2013-04-15T10:13:15.943
> 
> 标签：codeigniter, codeigniter-datamapper

我正在使用 DATAMAPPER ORM V1.8.2。**我对from_array**方法有疑问：

首先，我有一个带有 *name="group_id"* 的下拉列表

```
<select name="group_id" class="small-input">
      <option value="1">Guest</option>
      <option value="2" selected="selected">Member</option>
      <option value="3">Manager</option>
       <option value="4">Administrator</option>
</select> 
```

在表用户（数据库）中，我有一个名为：**group_id**的字段。

在控制器中：

```
....
$user->from_array($_POST, array('username', 'email', 'status', 'group_id'));
....
// then save
.... 
```

一切正常。

但是当我传递**from_array()**的第三个参数为**TRUE**时立即保存，例如：

```
$user->from_array($_POST, array('username', 'email', 'status', 'group_id', TRUE)); 
```

**它无法从 $_POST 获取 group_id。** 请帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:39:38.033

`group_id`将表单字段重命名为`$has_one`（很可能`group`）或`$has_many`（可能`groups`）中的关系名称，并`$fields`在调用`from_array()`. 所以是这样的：

```
// $_POST = array('group' => 3); // let's say this is what's coming in    
$user->from_array($_POST, array('username', 'email', 'status', 'group', TRUE)); 
```

注意对称性：

*   称为*群的关系*
*   称为*组的输入参数*
*   称为*组的字段*

* * *

这就是正在发生的事情：

1.  您的模型字段`required`上有一个，这是关系的名称。`User``group`
2.  您尝试`User`使用名为 的输入字段更新和保存实例`group_id`，但关系名为**group**。
3.  在数组扩展的`from_array()`方法中，代码[检查每个键是它的一个`has_one`或一个`has_many`关系](https://github.com/WanWizard/sparks-datamapper/blob/1.8.2.1/extensions/array.php#L150)，以收集相关对象以进行最终保存。由于您的数据有`group_id`但您的关系被命名为`group`它们**不匹配**，因此不会获取相关的组实例。
4.  在`from_array()` [保存结束时调用相关对象](https://github.com/WanWizard/sparks-datamapper/blob/1.8.2.1/extensions/array.php#L209)，同时在字段中循环时收集相关对象，在您的情况下没有对象。
5.  验证开始，并[尝试`_count_related()`](https://github.com/WanWizard/sparks-datamapper/blob/1.8.2.1/libraries/datamapper.php#L5543)为您的用户组，但它不会找到该组，并且[“并随身携带这些”第二个数组](https://github.com/WanWizard/sparks-datamapper/blob/1.8.2.1/libraries/datamapper.php#L5268)是空的（这是在步骤 3 中收集的对象将出现的位置）
6.  验证失败并`related_required`停止保存过程。

# c# - 从行和列索引中查找数组中的值

> ID：16012643
> 
> 赞同：0
> 
> 时间：2013-04-15T10:13:36.607
> 
> 标签：c#, arrays

所以我有一个 5 x 6 的二维数组（A）。从这个数组（A）中，我想根据用户输入的行和列返回一个值。我目前所拥有的...

```
private int FindValue(int[,] A, int row, int col)
{
    richTextBox1.Clear();

    for (int i = 0; i < row; i++)
    {
        for (int j = 0; j < col; j++)
        {
            if (A[i, j] == A)
            {
                return A[i, j];
            }
        }
    }

    return -1;
}

private void button3_Click(object sender, EventArgs e)
{
    int row = int.Parse(textBox1.Text);
    int col = int.Parse(textBox2.Text);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:16:18.710

如果用户同时输入`row`和`col`，则无需搜索；不需要循环。您只需要根据数组的限制检查输入的数组坐标，并`A[row,col]`在它们正确或`-1`错误时返回：

```
private int FindValue(int[,] A, int row, int col) {
    if (row < 0 || row >= 5 || col < 0 || col >= 6) return -1;
    return A[row, col];
} 
```

如果您在数组中搜索一个*值*`X`（即用户输入，然后您告诉他们`row`and `col`），那么您将需要两个循环，比较`A[row,col]`to `X`，如果找到匹配项则返回`row`并返回给用户。`col`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:16:37.567

不太清楚为什么要检查

```
 if (A[i, j] == A) 
```

相反，您可以简单地返回：

```
private int FindValue(int[,] A, int row, int col)
{
    if (row >= 0 &&  row < A.GetLength(0) && col >= 0 && col < A.GetLength(1))
        return A[row, col];
    else
        return -1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:18:30.807

更新：如果你想从 A[,] 中获取值，你不需要循环。`A[i,j]`就足够了。也不要忘记数组索引从 0 开始。

# css - CSS IE 正文背景渐变

> ID：16012651
> 
> 赞同：1
> 
> 时间：2013-04-15T10:13:59.107
> 
> 标签：css, internet-explorer, background

我在网站上使用 CSS 线性渐变背景。在我测试过的所有浏览器中，背景都运行良好——除了 IE。不知何故，它似​​乎没有将背景扩展到 wordpress 页脚下方。所有其他浏览器都会缩放整个页面的背景。

我使用以下代码 - 其中包括大多数浏览器的特定代码：

```
body{
background: #ffffff; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 0%, #d0d3e6 100%, #d0d3e6 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#d0d3e6), color-stop(100%,#d0d3e6)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#d0d3e6',GradientType=0 );!important /* IE6-9 */
font: normal 12px/100% "Arial", Arial;
} 
```

知道为什么 IE 会切断背景吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:31:00.250

我认为您可以在正文样式声明之前添加此行来解决此问题：

```
html {height:100%;} 
```

[在小提琴](http://jsfiddle.net/CknKf/1/)中看到它

注意：您需要`!important`在分号之前设置，如下所示：

`filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#d0d3e6',GradientType=0 )!important /* IE6-9 */;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:40:09.710

尝试：

```
html, body {
    height: 100%;
    min-height: 100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:16:17.193

您需要使用图像在背景中具有渐变：

```
body{
background: url(yourimage.jpg) repeat-x left top #ffffff; /* Old browsers */
background: -moz-linear-gradient(top,  #ffffff 0%, #d0d3e6 100%, #d0d3e6 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#d0d3e6), color-stop(100%,#d0d3e6)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* IE10+ */
background: linear-gradient(to bottom,  #ffffff 0%,#d0d3e6 100%,#d0d3e6 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#d0d3e6',GradientType=0 );!important /* IE6-9 */
font: normal 12px/100% "Arial", Arial;
} 
```

对于旧版本的浏览器，它们仍然需要图像来提供相同的效果。

要使渐变到页面底部，请尝试以下操作：

```
var bodyheight =$(window).height();
$('body').css({'min-height':bodyheight +'px'}); 
```

上面的 jquery 将强制 body 具有用户窗口大小的最小高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T07:56:56.460

过滤器：progid:DXImageTransform.Microsoft.gradient(startColorstr='#cccccc', endColorstr='#000000'); /* 对于 IE */

# c++ - 无法通过文件指针逐行读取文件

> ID：16012656
> 
> 赞同：-3
> 
> 时间：2013-04-15T10:14:16.577
> 
> 标签：c++

**我已经回答了我的 onw 问题，并且它运行正常。谁有同样的问题，请看第二个答案部分。**

* * *

我必须逐行读取一个文件**，**并将输出逐行存储在另一个文件中，但我无法读取所有行，它只是读取具有三个记录的一行。

或者

请告诉我如何/何时使用`ifstream/ofstream`。`file*`等代码中是否有任何错误。

但它不工作。

```
//    initialization
int convertFileToSingleLine( char *p_record, char *sEor,long l); 
char sEor[25]={"& 0000200222! MB00200"}; //end of record
ofstream outdata;                         //is it legal to initialize this here???? 

int main()           
{

    outdata.open("output.txt", ios::app);  //output file

    ifstream infile;
    infile.open("sample.txt");            //inputfile

    FILE *p_record=NULL;
    char buf[4000];
    long int lineC;
    string line;

    while (getline(infile, line))
    {
        lineC++;
    }

    lineC = 3 * lineC - 2;                // every line has three records, first and            last are header and footer
    cout << lineC;                      //in my case file is having 20019 records     

    p_record = fopen("SWITCH.txt","r");      //input file for file pointer

    for(int l = 1; l <= lineC; l++)
    {
        while ((fgets(buf, sizeof buf, p_record)) != NULL)
        {
            convertFileToSingleLine(buf, sEor, lineC);
        }
    }

    fclose(p_record);
    return 0;
}

int convertFileToSingleLine(char *sInFile, char *sEor, long lC)    //convert into     single line
{

    //ofstream outdata;
    //outdata.open("output.txt", ios::app);

    char  sTemp[1087] = "\0"; 
    FILE *fpIn=NULL, *fpOut=NULL;
    static long int l = 0;
    char *ch = NULL; 
    char *ch1 = NULL;
    //int l=0;

    try
    {
        static int pos=0;
        int c;
        //outdata<<"HI TO";
        while(l!=lC)
        {  
            if( (ch=strstr(sInFile+pos, "001")) != NULL)
            {
                //if((ch1=strstr(ch, "& 00002! AB00200"))!=NULL)    
                //{
                strncpy(sTemp, ch, 1086);   //one record is 1086 charater long      
                //}
                pos = pos + 1086;   //move to next position in one line, by 1086 chacters.
                outdata << sTemp;

            }
        l++;

        }              
        return 0;           
    }
    catch(char *str1)
    {
        cout << "ERROR while opening" << sInFile << endl;
    }
    return 0;
} 
```

它只读取一行，读取第一条记录两次，然后读取第二条记录。我需要整个文件。我必须删除那些 ifstream 和 ofstream，是他们的另一种方式。

```
**sample file:**

{
three records in one line:
002 ahjfdghfuisyguigeuihgjkgfjkbjbgjbfggfdbjbhj & 00002! AB00200  001 uyrugjnbfhdgyudgfshdfj & 00002! AB00200    001 ytygfhvghghjbv uhruighvluhjkl heuifhuihfuh & 00002! AB00200

001 jhsdjkagfdsf .....
}

output:=>
{
001 uyrugjnbfhdgyudgfshdfj & 00002! AB00200  
001 uyrugjnbfhdgyudgfshdfj & 00002! AB00200
001 ytygfhvghghjbv uhruighvluhjkl heuifhuihfuh & 00002! AB00200
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:01:26.267

我得到了我的问题的解决方案......现在我的文件正在被正确解析......

但我觉得。我应该在这里发布我的程序。

这样，您就可以做到这一点。

```
using namespace std;

void convertFileToSingleLine( char *p_record, char *sEor,long l); 
char sEor[25]={"& 0000200222! MB00200"};
ofstream outdata;
static int pos=0;

int main()
{   
outdata.open("output.txt", ios::app);
ifstream infile;
infile.open("sample.txt");
FILE *p_record=NULL;
char buf[4000];         // char buffer to store one whole record             
long int lineC;
string line;

while (getline(infile, line))
{
lineC++;   // count the number of lines
}

cout<<lineC<<endl; //23066 lineC

p_record= fopen("sample.txt","r");
 while ((fgets(buf,sizeof buf, p_record)) != NULL)  // fetching one line in buf from file pointer p_record
    {       
    convertFileToSingleLine(buf, sEor, lineC); 
    }

fclose(p_record);
return 0;

}

void convertFileToSingleLine( char *sInFile, char *sEor, long lC)
{
ofstream outdata;
outdata.open("output.txt", ios::app);
char  sTemp[ 1087]="\0";
FILE *fpIn=NULL, *fpOut=NULL;
static int l=0;
char *ch = NULL; 
char *ch1 = NULL;
pos=0;

    int val;

try
{
    while(true)
    {  

        if( (ch=strstr(sInFile+pos, "001086")) != NULL)
        {               
            strncpy(sTemp, ch, 1086);           
        }
            pos=pos+1086;   
            outdata<<sTemp<<endl;
            if(pos>=3257)
            {
                break;
            }
    }

}
catch(char *str1)
{
    cout<<"ERROR while opening"<<sInFile<<endl;
}

} 
```

我的文件大小为 1GB。现在它被正确解析了。

```
 sample file:
{
three records in one line:
002 ahjfdghfuisyguigeuihgjkgfjkbjbgjbfggfdbjbhj & 00002! AB00200  001     uyrugjnbfhdgyudgfshdfj & 00002! AB00200    001 ytygfhvghghjbv uhruighvluhjkl heuifhuihfuh & 00002! AB00200   \\next line
001 jhdgfjksdkhv .... \\next line
001 jhsdjkagfdsf ..... \\next line
} //23066 lines in my one file, each having 3 records.

 output:=>
 {
 001 uyrugjnbfhdgyudgfshdfj & 00002! AB00200 \next line
 001 uyrugjnbfhdgyudgfshdfj & 00002! AB00200 \next line
 001 ytygfhvghghjbv uhruighvluhjkl heuifhuihfuh \next line
 001 jhdgfjksdkhv .... \\next line
 001 jhsdjkagfdsf ..... \\next line
 }  //69198 record i got in my outputfile. 
```

# assembly - 库函数 (C) 如何调用 gnu 汇编语言？

> ID：16012659
> 
> 赞同：1
> 
> 时间：2013-04-15T10:14:28.507
> 
> 标签：assembly, x86-64, gnu-assembler

我编译了一个代码。

```
.data
ssttrr:
.string "%d\n"
.text
.globl main
main:
mov $213, %rdx
push %rdx
push $ssttrr
call _printf
add  $8, %rsp 
```

或者它

```
.global main

    .text
main:

push    %rax                    # caller-save register
push    %rcx                    # caller-save register

mov     $format, %rdi           # set 1st parameter (format)
mov     %rax, %rsi              # set 2nd parameter (current_number)
xor     %rax, %rax              # because printf is varargs
call    printf                  # printf(format, current_number)

pop     %rcx                    # restore caller-save register
pop     %rax                    # restore caller-save register

mov     %rax, %rdx              # save the current number
mov     %rbx, %rax              # next number is now current
add     %rdx, %rbx              # get the new next number
dec     %ecx                    # count down
jnz     print                   # if not done counting, do some more

pop     %rbx                    # restore rbx before returning

mov  $60, %rax
xor  %rdi, %rdi
syscall

format:
    .asciz  "%20ld\n" 
```

为什么“格式”在 .text 字段中？

```
gcc -nostdlib file.s -o program 
```

为什么我会收到错误消息？

> /universe/earth/asm/file.s:14：未定义对“_printf”的引用 collect2：ld 返回 1 退出状态

如何解决此错误？

如果是这样，那么所有代码​​都有效。为什么？？？

```
.global main

    .text
main:
    push    %rbx                    # we have to save this since we use it

    mov     $90, %ecx               # ecx will countdown to 0
    xor     %rax, %rax              # rax will hold the current number
    xor     %rbx, %rbx              # rbx will hold the next number
    inc     %rbx                    # rbx is originally 1
print:
    # We need to call printf, but we are using eax, ebx, and ecx.  printf
    # may destroy eax and ecx so we will save these before the call and
    # restore them afterwards.

    push    %rax                    # caller-save register
    push    %rcx                    # caller-save register

    mov     $format, %rdi           # set 1st parameter (format)
    mov     %rax, %rsi              # set 2nd parameter (current_number)
    xor     %rax, %rax              # because printf is varargs
    call    printf                  # printf(format, current_number)

    pop     %rcx                    # restore caller-save register
    pop     %rax                    # restore caller-save register

    mov     %rax, %rdx              # save the current number
    mov     %rbx, %rax              # next number is now current
    add     %rdx, %rbx              # get the new next number
    dec     %ecx                    # count down
    jnz     print                   # if not done counting, do some more

    pop     %rbx                    # restore rbx before returning
    ret
 format:
    .asciz  "%20ld\n" 
```

为什么函数 print: 不在 main 字段中调用？

cpy：intel-64 操作系统：debian

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:18:21.697

> 为什么“格式”在 .text 字段中？

.text 汇编中的意思是“代码部分”

> gcc -nostdlib file.s -o program 为什么会报错？/universe/earth/asm/file.s:14：未定义对“_printf”的引用 collect2：ld 返回 1 退出状态

您没有链接 printf 所在的标准库（-nostdlib 选项）：链接器找不到它

> 如何解决此错误？

要么显式链接标准库 (stdlib)，要么链接另一个提供 printf 实现的库，或者删除 -nostdlib 开关

> 为什么函数 print: 不在 main 字段中调用？

“print”只是一个标签：你可以调用它，跳转到它，或者只是让程序的控制流进入它，就像在这个例子中一样。（我可以说 print 不是“功能”，因为它缺少适当的序言）。

我可以向您推荐一些组装介绍吗？

*   [http://asm.sourceforge.net/intro.html](http://asm.sourceforge.net/intro.html)
*   [http://en.wikibooks.org/wiki/X86_Assembly/Introduction](http://en.wikibooks.org/wiki/X86_Assembly/Introduction)
*   [http://www.tldp.org/HOWTO/html_single/Assembly-HOWTO/](http://www.tldp.org/HOWTO/html_single/Assembly-HOWTO/)

或者您可以在互联网上找到的许多其他内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:22:08.373

*为什么“格式”在 .text 字段中？* 目前还不清楚你在这里问什么，但我认为你在问两件事，在这里压缩：

```
mov     $format, %rdi           # set 1st parameter (format)

format:
    .asciz  "%20ld\n" 
```

在您的`.text`部分中，您指的是`format`标签。稍后，您定义`format`标签。

*为什么我会收到错误消息？* 您正在指定`-nostdlib`排除通常包含的库的编译器选项，包括`printf`函数。

*为什么函数 print: 不在 main 字段中调用？* 没有打印*功能*，但有一个标签，并且*正在*使用它：

```
jnz     print                   # if not done counting, do some more 
```

它似乎是基于 的循环的终止点，`%ecx`从 0x90 计数到 0。

# php - 坚持动态添加的行+jquery和动态添加的行上的服务器端验证

> ID：16012660
> 
> 赞同：1
> 
> 时间：2013-04-15T10:14:29.597
> 
> 标签：php, javascript, jquery

由于需要向表中动态添加/删除行，我使用以下 jquery 向表中添加/删除行：这里我解决了更改输入标签的名称属性的问题。但是我在添加动态行时在同一个表中获取发布数据结果（同时服务器端验证）时遇到问题。有没有办法将动态 php 脚本设置为输入标签的值属性？另外，如何在刷新后保持动态添加的行？

$(document).ready(function(){ //这一行克隆了 '.row' 类中的行并将其转换为纯 html。var clonedRow = $('.row').clone().html() ;

```
//This line wraps the clonedRow and wraps it <tr> tags since cloning ignores those tags
var appendRow = '<tr class = "row">' + clonedRow + '</tr>';  

//$('#btnAddMore').click(function(){
//this line get's the last row and appends the appendRow when it finds the correct row.
  //    $('.employmentHistoryForm tr:last').after(appendRow);
    //});

$("#btnAddMore").click(function() {
    $(".employmentHistoryForm tr:last")
        .clone()
        .appendTo(".employmentHistoryForm")
        .find(':input')
        .attr('name', function(index, name) {
        return name.replace(/(\d+)$/, function(fullMatch, n) {
        return Number(n) + 1;
        });
    })
});

//when you click on the button called "delete", the function inside will be triggered.
$('.deleteThisRow').live('click',function(){
    var rowLength = $('.row').length;
    //this line makes sure that we don't ever run out of rows.
    if(rowLength > 1){
deleteRow(this);
}else{
$('.employmentHistoryForm tr:last').after(appendRow);
deleteRow(this);
}
});

function deleteRow(currentNode){
$(currentNode).parent().parent().remove();
}
}); 
```

# google-app-engine - 如何使用 Google Plus 选项卡将登录选项卡添加到您的网站？

> ID：16012666
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:14:34.933
> 
> 标签：google-app-engine, google-plus

虽然已创建登录选项卡，但我无法将用户信息存储到我的数据库中！如果有的话，我需要 Java 中的代码和 Java 中的 API

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T21:50:00.917

我不知道您在这里要求什么，但如果您需要有关使用 Java 集成 Google+ 登录的建议，请查看我们的快速入门以了解我们是如何做到的。可以在[https://developers.google.com/+/quickstart/java](https://developers.google.com/+/quickstart/java)找到说明。或者您可以查看我们的 GitHub 页面，直接在[https://github.com/googleplus/gplus-quickstart-java/](https://github.com/googleplus/gplus-quickstart-java/)查看代码。

# java - 正则表达式单独使用大括号或使用“else”词

> ID：16012669
> 
> 赞同：0
> 
> 时间：2013-04-15T10:14:42.683
> 
> 标签：java, regex, curly-braces

我正在尝试为代码计数工具编写一些自定义定义`cloc`，但不幸的是，正则表达式不是我的强项。

我正在努力编写一个正则表达式，它将匹配仅包含空格之前和/或之后的行`{`或`}`

我还需要匹配包含空格并`}`后跟关键字的行`else`

即在以下示例中：

```
1  if ( some condition ) {
2     do something
3  } else if ( some other condition ) {
4     do this
5  } else {
6     do this
7  }
8  
9  if ( some other condition ) 
10 {
11   do this
12 } 
```

我需要一个匹配第 5、7、10 和 12 行的正则表达式。

我从一个非常简单的开始，`\s*{` 但这与包含单词的行匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:17:22.883

此正则表达式遵循您概述的规范：

```
String regex = "\\s*[{}]\\s*|\\s*\\}\\s*else.*"; 
```

它匹配包含以下任一项的行：

*   `0`或多个空格，后跟`{`or `}`，后跟 0 个或多个空格

    *或者*

*   `0`或多个空格，然后是 a `}`，然后是`0`或多个空格，然后`else`是 ，然后是任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:19:17.840

以下正则表达式将匹配由以下更多实例组成的行：`whitespaces`、、或单词组件`{`，但仅此而已：`}``else`

```
^(?:[\s{}]|else)+$ 
```

# android - 获取图片路径

> ID：16012671
> 
> 赞同：2
> 
> 时间：2013-04-15T10:14:45.817
> 
> 标签：android, android-intent, mime-types, mime

我创建了一个 mime 类型的活动，如下图所示。

```
<activity android:name=".xxxx"                        
            android:launchMode="singleTop"
            android:excludeFromRecents="true"
            android:configChanges="orientation|screenSize|keyboardHidden"
            android:theme="@style/AppTheme">                        
            <intent-filter>
                <action android:name="android.intent.action.SEND" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:host="xxxx.xxxx.net"></data>
                 <data android:mimeType="image/*" />            
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.CHOOSER" />
                <category android:name="android.intent.category.DEFAULT" />
                <data android:host="xxxx.xxxx.net"/>
                 <data android:mimeType="image/*" />
            </intent-filter>
            </activity> 
```

现在，当用户单击照片并转到图库并确实共享我的应用程序时，当他单击它时，我能够启动上述活动...现在我的问题是如何获取该图像的路径？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:37:36.290

这将为您提供*.xxxx中 Uri 实例中的路径* `Activity`

```
Uri uri = (Uri) getIntent().getExtras().get(Intent.EXTRA_STREAM); 
```

然后，如果您需要在 中显示图像`ImageView`，请使用以下命令：

```
imageView.setImageURI(uri); 
```

**可选代码：**

如果您还需要设备上图像的*绝对路径*（当我使用 TwitPic API 将图像上传到 Twitter 时，我发现这是一个必要的约束），那么以下代码将为您提供设备上图像的*绝对路径*`File`实例。由于这一点在 OP 中并不清楚，我认为一些额外的代码不会受到伤害。;-)

```
// PASS THE URI INSTANCE FROM THE CODE ABOVE IN THE CONSTRUCTOR
File file = new File(getRealPathFromURI(uri)); 
```

和方法`getRealPathFromURI(Uri uri)`：

```
public String getRealPathFromURI(Uri uri) {
    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 
    cursor.moveToFirst(); 
    int idx = cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA); 
    return cursor.getString(idx); 
} 
```

并使用 File 文件实例设置图像：

```
imageView.setImageUri(Uri.fromFile(file)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:36:37.387

```
protected void onActivityResult(int requestCode, int resultCode,
        Intent resultData) {
    super.onActivityResult(requestCode, resultCode, resultData);

    Uri selectedImage = resultData.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);

            uploadImagePath = cursor.getString(columnIndex);
            bitmapUploadImage = BitmapFactory.decodeFile(uploadImagePath);
            profileImageView.setImageBitmap(bitmapUploadImage);
            cursor.close();

} 
```

# postgresql - 在 Windows 上将 Postgres 从 32 位升级到 64 位版本

> ID：16012673
> 
> 赞同：2
> 
> 时间：2013-04-15T10:14:55.937
> 
> 标签：postgresql, upgrade, 32bit-64bit

我找不到有关如何正确执行此操作的具体步骤。当我进行简单升级时，出现错误：

```
Exception in thread "main" org.postgresql.util.PSQLException: ERROR: expected "]" to end datum, but got "80}"; length = 4
org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2102)
org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:1835)
org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:257)
org.postgresql.jdbc2.AbstractJdbc2Statement.execute(AbstractJdbc2Statement.java:500)
org.postgresql.jdbc2.AbstractJdbc2Statement.executeWithFlags(AbstractJdbc2Statement.java:374)
org.postgresql.jdbc2.AbstractJdbc2Statement.executeQuery(AbstractJdbc2Statement.java:254) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T00:09:58.383

一般程序是：

*   使用 32 位版本`pg_dump`转储数据库的副本并`pg_dumpall --globals-only`转储用户角色等
*   关闭并选择卸载 32 位版本 - 但实际上不需要删除数据库目录
*   安装64位版本并启动
*   恢复全局转储，`psql`然后恢复数据库转储

（实际上，澄清一下 - 如果 64 位版本也是比您要升级的 32 位版本更新的 PostgreSQL 版本，您应该先安装较新版本，然后使用较新版本`pg_dump`转储旧版本的数据库。以上仅适用于版本相同且您只是转换为 64 位的情况）。

另一件需要注意的是，从 32 位升级到 64 位通常没有什么意义。PostgreSQL 使用每进程模型，这意味着每个进程可以使用 (2GB - shared_buffers) RAM 在 32 位 Windows 上工作。对于大多数任务来说，这通常就足够了，因为即使在具有大量 RAM 的系统上，您也可以将 shared_buffers 留得相当小，而让剩余的 RAM 用作操作系统磁盘缓存。如果您需要大量`work_mem`用于非常大的个人查询，这只是一个问题。

# python - 从 wsdl 创建 python soap 服务

> ID：16012674
> 
> 赞同：2
> 
> 时间：2013-04-15T10:14:59.323
> 
> 标签：python, soap, wsdl, marshalling

我正在尝试开发一个处理soap请求的python脚本。我需要在 wsdl 中定义的具有正确属性的 python 对象，以及来自请求的数据以将它们写入数据库。如何解组带有数据的肥皂请求？

然后我必须给出一个响应，作为一个肥皂请求，在同一个 wsdl 中定义。哪个图书馆可以提供帮助？

我试过 suds 但它不允许我解组/编组，对吗？据我所知，它也不能编组一个 sudsobject 并给我一个字符串以添加到我的 http 响应中。网络上没有太多关于该主题的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:50:54.527

我认为泡沫可以帮助你。我给你看一个例子：

```
from suds.client import Client

# Web Service Connection
WSDL_URL_PATTERN = "http://{host}:{port}/{service_page}?WSDL"
SERVICE_PAGE = "Example.asmx"
host = host
port = port
username = username
password = password
wsdl_url = WSDL_URL_PATTERN.format(host=host, port=port, service_page=SERVICE_PAGE)
client = Client(wsdl_url, **kwargs)

#Authentication header (optional)
auth = client.factory.create('tns:AuthenticationHeader')
auth.Username = user
auth.Password = passwd
client.set_options(soapheaders=auth)

#My Function Service Call
param1 = "param1"
param2 = "param2"
result = client.service.MyFunction(param1, param2)

for item in result:
    print item.myfield 
```

# javascript - 如何在javascript中检查表单上的脏数据？

> ID：16012680
> 
> 赞同：1
> 
> 时间：2013-04-15T10:15:10.353
> 
> 标签：javascript

我的表单中有两个按钮，保存和返回。我正在使用以下代码在javascript中单击后退按钮时检查脏数据：

```
$(document).ready(function()
{ 
$('#formName').form('dirtyDataCheck'); 
}); 
```

并单击保存按钮：

```
var formData = $('#formName').serialize(); 
$.ajax(
{
type: 'POST',
url: CTX_ROOT + '/save.go?' + formData,
blockItem: $('#btnSave'),
success: function()
{
   // on save make dirty data flag false.
   $.dirtyData.isDirty = false;

   // Display message on successful save.
   $.msg.append('save successful');  
}
}); 
```

但这不起作用。如果更改了任何字段的值，则页面将返回而不会出现任何有关脏数据的警报消息。

# scala - Scala中的scanr1？

> ID：16012684
> 
> 赞同：2
> 
> 时间：2013-04-15T10:15:20.373
> 
> 标签：scala, haskell, functional-programming

在 Scala 中，是否有一个`scanr1`类似于 Haskell 的`scanr1`，它不接受零元素并产生中间结果，否则这些结果将由有序`reduce`操作创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:37:05.383

核心 Scala 中没有这样的功能。Scalaz 或其他社区库采用的一些有用功能。例如[马达](https://github.com/okomok/mada)确实有[scanRight1](https://github.com/okomok/mada/blob/8f3a4cc734ff47de67bf07db36e00b62cd35ee13/src/main/scala/sequence/list/List.scala#L329)

# ruby-on-rails - Rails 中的 Mysql2 和 Sqlite3

> ID：16012689
> 
> 赞同：2
> 
> 时间：2013-04-15T10:15:41.170
> 
> 标签：ruby-on-rails, sqlite, mysql2

我有一个使用两种不同类型数据库的 rails 应用程序：sqlite3 和 mysql2。

我做了一些搜索并设法做到了这一点，我的 database.yml 文件如下所示：

```
development:
  adapter: sqlite3
  database: db/development.sqlite3
  pool: 5
  timeout: 5000

mysql2_development:
  adapter: mysql2
  database: db_name
  username: user_name
  password: pass_word
  host: somehost.net
  port: 3306
  socket: /tmp/mysql.sock 
```

我在模型中创建了以下类来访问我的 Mysql2 数据库：

```
class NewDB < ActiveRecord::Base

  # To change this template use File | Settings | File Templates.
  self.abstract_class = true
  establish_connection "mysql2_#{Rails.env}"
end

class PROJECT < NewDB
end 
```

这里 PROJECT 是“NewDB”数据库中存在的表。

**问题：**

这是正确的方法吗，我如何从控制器访问它们？

在我的控制器中，我尝试了这个：

```
class NewDBController < ApplicationController

  def index
    @projects=PROJECT.all
  end
end 
```

但我收到以下错误“Mysql2::Error: Table 'newdb.projects' doesn't exist: SHOW FULL FIELDS FROM `projects`”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:21:05.833

您是否为其他环境运行了迁移？

```
rake db:migrate RAILS_ENV=mysql2_development 
```

您的 Project 类也应该被调用`Project`。您可以使用：

```
class Project < NewDB
  set_table_name "PROJECT"
end 
```

# batch-file - 停止批处理文件只处理最后一个文件？

> ID：16012691
> 
> 赞同：0
> 
> 时间：2013-04-15T10:15:43.827
> 
> 标签：batch-file, dos

我有以下简单的批处理文件，用于重命名 *.txt 文件并删除前 x 个字符

```
@Echo Off

for %%i in ("*.txt") do (
  set fname=%%i
  echo %fname%
  copy %fname% %fname:~9%
) 
```

但是，它只处理最后一个文件？如果我有 4 个文件，最后一个文件也会被复制 4 次？

我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:39:48.653

问题是 %var% 在第一次解析循环时被变量的值替换，并且在执行期间不会改变。

这是一个可以让您修复代码的演示：

```
@ECHO off&setlocal&CLS
ECHO Demonstrating the use of %%var%% IN a block
ECHO.
SET var=Original value
ECHO Before the block, %%var%%=%var%
FOR %%i IN (1 2 3) DO (
  SET var=New value %%i
  ECHO loop %%i : %%var%%=%var%
  )
ECHO After the block, %%var%%=%var%
ECHO.
ECHO BECAUSE the block is first PARSED, then executed.
ECHO in the parsing process, %%var%% is replaced by its
ECHO value as it stood when the block was parsed - BEFORE execution
ECHO.
ECHO now try using a SETLOCAL ENABLEDELAYEDEXPANSION command first:
ECHO.
SETLOCAL ENABLEDELAYEDEXPANSION
SET var=Original value
ECHO Before the block, %%var%%=%var% and ^^!var^^!=!var!
FOR %%i IN (1 2 3) DO (
  SET var=New value %%i
  ECHO loop %%i : %%var%%=%var% BUT ^^!var^^!=!var!
  )
ECHO After the block, %%var%%=%var% and ^^!var^^!=!var!
ECHO. 
```

* * *

附录

哦，这么多插入符号！一个不识字的兔子的天堂。

插入符号 ( `^`) “转义”后面的字符的特殊含义 - 除了`%`被另一个`%` So 转义 - 在行中

```
ECHO Before the block, %%var%%=%var% 
```

回显的是“Before the block”，然后是一个单曲`%`，文本`var`，另一个单曲`%`，`=`和`the value of var`

`SETLOCAL ENABLEDELAYEDEXPANSION`字符`!`变成特殊字符后。所以

```
ECHO Before the block, %%var%%=%var% and ^^!var^^!=!var! 
```

或者

```
ECHO loop %%i : %%var%%=%var% BUT ^^!var^^!=!var! 
```

附加一个 single `!`、 string `var`、另一个 single`!`和`=`，`the run-time value of var`因为在 PARSE 时，`^^`被替换为，然后在 EXECUTION 时`^`将结果`^!`解释为文字`!`。在`!var!`PARSE 时保持不变，但被`var`执行时的值替换。

# php - 数据迁移查询

> ID：16012693
> 
> 赞同：0
> 
> 时间：2013-04-15T10:15:45.043
> 
> 标签：php, mysql, database-migration

我已经搜索了许多问题并准备了许多关于此的不同文章，但似乎没有人能帮助我，或者我可能无法完全理解。我想将数据从一个数据库迁移到另一个数据库。
这是我的查询

```
$query = mysql_query("
    Insert into database2.table2 (id, data)
    select (id, name) from database1.table1
");
if($query == false){   
    die(mysql_error());   
} 
```

当我执行此查询时，它会显示此错误消息，这真的很烦人*操作数应包含 1 列*

我搜索了一下，但没有发现任何可以帮助我的东西。

**注意：**这个查询最初是针对我的测试用例的。实际查询将在稍后进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:18:44.030

试试这个查询（从选择字段中删除括号），

```
INSERT into database2.table2 (id, data) SELECT id, name from database1.table1 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:18:29.813

去掉括号

```
select (id, name) 
```

至

```
select id, name 
```

最后结果：

```
$query = mysql_query("Insert into database2.table2 (id, data) select id, name from database1.table1"); 
```

# windows-phone-7 - 用于数据绑定以显示来自 API 的文本“文章”提要的 WP 控件？

> ID：16012694
> 
> 赞同：0
> 
> 时间：2013-04-15T10:15:44.800
> 
> 标签：windows-phone-7, xaml, windows-phone-8, controls, windows-phone

我有一个 API 返回一个 Json 提要，其中包含一个由文本段落和标题组成的“文章”列表。我应该使用什么 windows phone 8 XAML 控件来显示所述文章？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:23:57.633

[`ListBox`](http://msdn.microsoft.com/en-us/library/windowsphone/design/hh202882%28v=vs.105%29.aspx)与自定义列表框一起使用[`ItemTemplate`](http://msdn.microsoft.com/ru-ru/library/system.windows.controls.itemscontrol.itemtemplate%28v=vs.95%29.aspx)

*   [关于 ListBox 处理的诺基亚文章](http://www.developer.nokia.com/Community/Wiki/Listbox_handling_in_Windows_Phone_7)
*   [来自某人博客的教程](http://3water.wordpress.com/2010/07/25/listbox-on-wp7/)

# wpf - WPF 绑定 - 避免间接级别

> ID：16012695
> 
> 赞同：0
> 
> 时间：2013-04-15T10:15:46.250
> 
> 标签：wpf, binding

我正在动态填充上下文菜单，使用这样的类来表示每个项目：-

```
public class ContextMenuItem : INotifyPropertyChanged
{
    public string Header {get;set;}
    public bool IsChecked {get;set;}
    public ICommand Command {get;set;}
    ..etc..
} 
```

*请注意，这些属性实现了标准的 INotifyPropertyChanged 内容，我在此处省略了这些内容以节省空间。*

我不会包含 XAML - 上面的属性只是绑定到它们的`MenuItem`对应项。

这是我的问题。我想要一个菜单​​项的`IsChecked`状态来“跟踪”另一个模型的布尔属性的值。例如：-

```
var menuItem = new ContextMenuItem
    {
       Caption = "Online?", 
       IsChecked = user.IsOnline
    }; 
```

这显然不能正常工作——尽管菜单项的选中状态最初*会*反映用户的在线状态，但选中状态不会随着更改而`user.IsOnline`改变。

一种方法是订阅`user`对象的 PropertyChanged 事件，并在更改`IsChecked`时`IsOnline`更改，但这感觉有点复杂。有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:36:24.610

如果您的用户对象也实现了 INotifyPropertyChanged，您可以在 VM 中公开 User 并直接绑定到它。

```
 <... IsCheck="{Binding User.IsOnline}" ... > 
```

但是您订阅用户 PropertyChanged 的​​方法也很有效:) 周围有一些帮助程序类可以减少锅炉代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:28:20.110

如果您创建`IsChecked`一个[依赖属性](http://www.codeproject.com/Articles/140620/WPF-Tutorial-Dependency-Property)并且您的类是一个 DependencyObject，您可以像这样将它们绑定在一起

```
 public class ContextMenuItem : DependencyObject
 {
     public static readonly DependencyProperty IsCheckedProperty = 
          DependencyProperty.Register("IsChecked", typeof(bool), typeof(ContextMenuItem ));

    public bool IsChecked
    {
        get
        {
            return this.GetValue(IsCheckedProperty) as string;
        }
        set
        {
            this.SetValue(IsCheckedProperty, value);
        }
    }
 }

 var binding = new Binding("IsOnline");
 binding.Source = user;
 binding.Mode = BindingMode.OneWay;
 BindingOperations.SetBinding(menuItem,ContextMenuItem.IsCheckedProperty,binding); 
```

# c - 内联递增数组索引

> ID：16012696
> 
> 赞同：2
> 
> 时间：2013-04-15T10:15:46.297
> 
> 标签：c

我是 C 的新手。对于这样一个基本问题，我很抱歉。

```
int ArrayIndex = 0;
int intArray[ArrayIndex++] = somevalue; 
```

我读过一本书，它说*何时执行后缀递增/递减并不是一个简单的问题*。这本书还模糊地提到了一个被称为`sequence points`回答问题的概念。它说更新值[递增/递减]将在前一个和下一个序列点之间进行。这种序列点的示例是表达式语句的结尾。

我的问题是，在所有编译器/平台中，上述代码片段是否总是分配`some value`给数组索引零并增加 ArrayIndex？是否有可能先增加 ArrayIndex，然后将某个值分配给 intArry[1];？

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:19:43.450

`++ArrayIndex` **递增** `ArrayIndex`并计算为 的新值`ArrayIndex`。

`ArrayIndex++` **计算为**, 的旧值**`ArrayIndex`并递增`ArrayIndex`.**

 **这应该回答你的问题。（提示：答案是肯定的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:17:20.527

> 我的问题是，在所有编译器/平台中，上述代码片段是否总是为数组索引零分配一些值并增加 ArrayIndex？

答案：是的

> 是否有可能先增加 ArrayIndex，然后将某个值分配给 intArry[1];？

答：如果你使用

```
int intArray[++ArrayIndex] = somevalue; 
```

这将递增`ArrayIndex`，然后将值分配给数组索引 1**

# teamcity-7.1 - 如何在 TeamCity7.1 中创建服务消息？

> ID：16012697
> 
> 赞同：1
> 
> 时间：2013-04-15T10:15:47.300
> 
> 标签：teamcity-7.1

如何在 TeamCity7.1 中创建服务消息？我的要求是在 Visual Studio2012 中使用 MSbuild 和 MS test 运行测试。正如我[通过 TeamCity 在 MStests](https://stackoverflow.com/questions/1625645/mstests-through-teamcity)中发现的那样，如果我配置服务 meeagses，它将帮助我使用 xml 报告处理以报告格式获取测试结果。要尝试这个，我不知道如何设置服务消息以及可用的选项。如果有人可以指导我，那也将帮助我解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T19:45:38.413

我不确定我是否理解您的问题，但为了生成服务消息，您只需输出到 stdout 流，例如使用带有命令“ ***echo ##teamcity[importData type='mstest*** *”的命令行运行器****'路径='']*** ”在里面。这将触发报告的生成。

关于在 TeamCity 中使用 MSTest 的相关文档，您可以在[此处](http://confluence.jetbrains.com/display/TCD7/MSTest+Support)找到官方文档。

# c++ - 兼容模式下 x64 窗口上的原生 x32 应用程序与 x32 窗口上的 x32 应用程序之间的区别

> ID：16012708
> 
> 赞同：0
> 
> 时间：2013-04-15T10:16:26.507
> 
> 标签：c++, winapi, 64-bit, native

我有一个用 C++ 编写的旧本机 win32 应用程序，它在 Windows x32 上运行良好，但在 Windows x64 上崩溃。即使我选择兼容模式。我有一个源代码，但是不方便阅读，因为它是由一个不再在我们公司工作的人写的，代码很大而且是异步的。调试任务并不容易。

我想知道我应该关注什么。与 x32 窗口相比，x32 兼容模式下的 x64 窗口有什么不同？我知道注册表会造成一些问题，但似乎不是这种情况。还有别的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T10:38:59.630

这些是您需要采取的步骤来解决您的问题：

1.  在调试器中运行它。
2.  等它崩溃。
3.  调试它。

# ios - 从使用 Audacity 创建的音频文件中丢失一些元数据

> ID：16012711
> 
> 赞同：0
> 
> 时间：2013-04-15T10:16:31.283
> 
> 标签：ios, objective-c, ios4, audacity

我有许多用 Audacity（Windows）创建并使用 Audacity（Apple）以 m4a 格式导出的短语音剪辑。该项目最初是针对 Android 的，这就是我在测试是否可以取回数据之前创建剪辑的原因。当我使用 AVFoundation 读取元数据时，我丢失了一些字段。具体来说

1.  艺术家姓名
2.  追踪号码

我努力了

```
AVAsset *asset;
asset = [AVURLAsset URLAssetWithURL:url options:nil];
for (NSString *format in [asset availableMetadataFormats]) {
    for (AVMetadataItem *item in [asset metadataForFormat:format]) {
        NSLog(@"Item %@ Value: %@",[item commonKey],[item value]); 
```

有了这个，我得到了价值观

1.  标题映射到 Audacity：轨道标题
2.  albumnName 映射到 Audacity:Album Title
3.  软件价值Lavf52.6
4.  (null) 映射到 Audacity：评论
5.  (null) 映射到 Audacity: Genre
6.  另一个我无法识别数据的 null

我也尝试过，但这给了我上面的非空值

```
NSArray *metaDataList = [asset commonMetadata];
for (AVMetadateItem *item in metadataList) 
```

是否有替代元数据阅读器/或 Audacity 的替代品，我可以使用它来轻松检索这些数据。

我是 IOS 和 Apple 世界的新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:36:20.643

似乎问题出在 Mac 的 Audacity 上，它丢失了我的元数据。我在 Windows Audacity 上将它导出到 m4a 可以复制文件，现在可以找到我的艺术家

# captcha - hava jsp MyFaces Tomahawk Captha 问题

> ID：16012713
> 
> 赞同：0
> 
> 时间：2013-04-15T10:16:39.507
> 
> 标签：captcha, myfaces, tomahawk

我有一个远足俱乐部的网站，该网站最近被某个机器人的自动注册发送了垃圾邮件。激活涉及人为步骤，但大量的废话注册让我很烦。为了阻止这种情况发生，我添加了一个验证码功能。它在我的 Windows 开发环境中运行良好，但在 CentOS 5.4 64 位服务器上效果较差。它会生成这个毫无意义的难以辨认的图像。问题可能是什么？

我正在使用 Myfaces 2.1.11 和 Tomahawk2 1.1.14。

[点击这里查看](http://www.spore.co.za/spore/register/register.jsf)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:40:25.287

事实证明，这是一个字体问题。使用[这个链接](http://myfaces.apache.org/tomahawk-project/tomahawk/xref/org/apache/myfaces/custom/captcha/CAPTCHARenderer.html)，我们找到了对[这段代码](http://myfaces.apache.org/tomahawk-project/tomahawk/xref/org/apache/myfaces/custom/captcha/util/CAPTCHAImageGenerator.html)的引用。在第 61 行，很明显他们使用 Arial，这是一种 truetype 字体，默认情况下未安装在 CentOS 服务器上。

# mysql - 范围查询中未使用索引

> ID：16012715
> 
> 赞同：1
> 
> 时间：2013-04-15T10:16:51.317
> 
> 标签：mysql

你好我有这个查询

```
SELECT * FROM customers WHERE height > 180 AND height < 200 
```

这是`explain`应用于它的结果：

```
mysql> explain SELECT * FROM customers WHERE height > 180 AND height < 200;
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table     | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | customers | ALL  | height        | NULL | NULL    | NULL | 10423 | Using where |
+----+-------------+-----------+------+---------------+------+---------+------+-------+-------------+ 
```

请注意，该字段有一个索引`height`没有被拾取，不知何故......

该`height`字段是一个整数。我不知道。我期待它被使用，`type`也是`range`

任何人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:15:06.897

问题在于指定的范围。明显太松了。在这种特殊情况下，Mysql 更喜欢全扫描而不是使用索引。如果我限制范围，或增加使用`height`索引的记录数，搜索访问策略将`range`按照手册进行。

# c++ - 包含标题时，'operator Apple' 不是可识别的运算符或类型

> ID：16012717
> 
> 赞同：0
> 
> 时间：2013-04-15T10:16:57.257
> 
> 标签：c++, visual-c++, operator-overloading

我会简短地说。

我有 2 个类：`Apple`和`Orange`，如下所示：

`Apple.h`（`Apple.c`为空白）

```
#ifndef APPLE_H_
#define APPLE_H_

class Apple {};

#endif /* APPLE_H_ */ 
```

`Orange.h`：

```
#ifndef ORANGE_H_
#define ORANGE_H_

#include "Apple.h"

class Orange {
public:
    Orange();
    virtual ~Orange();
    operator Apple ();
};

#endif /* ORANGE_H_ */ 
```

`Orange.cpp`：

```
#include "Orange.h"

Orange::Orange() {
    // TODO Auto-generated constructor stub

}

Orange::~Orange() {
    // TODO Auto-generated destructor stub
}

Orange::operator Apple() {
    Apple y;
    return y;
} 
```

正如这些，这些作品很棒。

但是当我添加`#include "Orange.h"`到时`Apple.h`，我得到了`'operator Apple' is not a recognized operator or type`错误。

如下：

```
#ifndef APPLE_H_
#define APPLE_H_

#include "Orange.h"

class Apple {};

#endif /* APPLE_H_ */ 
```

造成了什么问题`#include "Orange.h"`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:22:49.440

这是因为你现在有一个循环依赖：`Orange.h`取决于`Apple.h`哪个取决于等`Orange.h`。

在`Orange.h`头文件中声明类可能就足够了`Apple`：

```
// Tell the compiler that there is a class named `Apple`
class Apple;

class Orange {
public:
    Orange();
    virtual ~Orange();
    operator Apple ();
}; 
```

然后在`Orange.cpp`源文件中包含`Apple.h`头文件。

# c - C中箭头运算符之间的空格

> ID：16012721
> 
> 赞同：4
> 
> 时间：2013-04-15T10:17:16.267
> 
> 标签：c, pointers, standards, arrows

前几天我被告知我不应该在 C 中以某种方式使用指针箭头。我所做的是：

```
struct info {
    int x;
    char *data;
}

int main() {
    struct info *information;
    information -> x = 0; /*Notice the spacing here between information and -> x*/
    information -> data = "";
} 
```

我平时看到的

```
struct info *information;
information->x = 0; 
```

我只是想问一下，这只是常规的编码标准吗？
我只是觉得`->`比`p->stuff`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T10:20:14.453

从句法的角度来看，这并不重要，它是微不足道的空格。

我会说（有趣地）没有空格的样式更常见。我觉得它很好，因为它以某种方式反映了结构遏制的“紧密性”。当然，我*用*空格写的几乎所有其他二元运算符，即

```
a->b = 1 + 2; 
```

永不

```
a -> b = 1+2; 
```

或者

```
a->b = 1+2; 
```

最后，这只是个人喜好。当然，在许多专业环境中，“项目/公司风格指南规定这就是它的完成方式，在这里”。

此外，当使用`.`运算符直接处理结构时，我使用相同的方式。总是：

```
a.b = 1 + 2; 
```

永不：

```
a . b = 1+2; 
```

我认为前一种格式对我有用，因为正如我在上面所说的那样，运算符两侧的两件事是同一件事的一部分，“ `a.b`”是一个术语，而不是两个。使用`+`，它的两个操作数是独立的，所以间距对我来说更有意义。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-15T10:20:03.133

C 是一种非常自由格式的语言，解析器会忽略空格（制表符、空格、换行符等）。

```
information -> x = 0; 
```

是相同的

```
information->x=0; 
```

和

```
information
->
x
=
0
; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:23:06.640

这是一个口味问题，因此对于[https://softwareengineering.stackexchange.com/](https://softwareengineering.stackexchange.com/)可能更好。

一般来说，我认为标准是没有空间。在我的 C 代码中，我将算术运算符写为`x + y`etc，将成员访问运算符写为`a->y`etc。这是因为成员及其所有者可以视为“一个单元”，而算术是对多个不同值的操作，其唯一关系是它们恰好在你的表达中一起使用。另一方面，成员或从根本上与其所有者绑定，而空间不足表明了这一点。

使用你喜欢的任何一个 - 它没有太大的区别。不过，如果您想知道更频繁地使用什么，那就是无空格版本。

# php - 分页链接未显示在 codeigniter 分页中

> ID：16012722
> 
> 赞同：0
> 
> 时间：2013-04-15T10:17:18.473
> 
> 标签：php, codeigniter, pagination

我使用 codeigniter 分页类对我的记录进行分页，下面你可以看到我的代码

```
$data['success'] = "";
  $data['error'] = "";
  $data['offset'] = 0;

  $this->load->library('pagination');
  $per_page = 4;
  $total = $this->m_workshop->totalworkshoppay();
  $baseUrl = site_url('sitemanager/workshop/workshopayment');
  $data['query'] = $this->m_workshop->getallwpay($per_page, (int) $this->uri->segment(4));     
  $confignew['base_url'] = $baseUrl;
  $confignew['total_rows'] = $total;
  $confignew['per_page'] = $per_page;
  $confignew['uri_segment'] = '4';
  $this->pagination->initialize($confignew);

  $data['offset'] = (int) $this->uri->segment(4);
  $this->load->view('sitemanager/workshop/viewallworkshoppay',$data); 
```

我在我的视图页面中使用`<?php echo $this->pagination->create_links(); ?>` 代码来显示分页链接。但是分页链接没有显示在浏览器中。当我打印 `$data['query']`时，记录会根据变量进行限制 `$per_page`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:26:58.787

首先在控制器中创建链接。您还必须确保获取足够的记录来建立链接。我通常在第一次设置时将每页设置为 1 以确保它正常工作。

控制器：

```
 $data['success'] = "";
  $data['error'] = "";
  $data['offset'] = 0;

  $this->load->library('pagination');
  $per_page = 4;
  $total = $this->m_workshop->totalworkshoppay();
  $baseUrl = site_url('sitemanager/workshop/workshopayment');
  $data['query'] = $this->m_workshop->getallwpay($per_page, (int) $this->uri->segment(4));     
  $confignew['base_url'] = $baseUrl;
  $confignew['total_rows'] = $total;
  $confignew['per_page'] = $per_page;
  $confignew['uri_segment'] = '4';
  $this->pagination->initialize($confignew);
  $data['pages'] = $this->pagination->create_links();

  $data['offset'] = (int) $this->uri->segment(4);
  $this->load->view('sitemanager/workshop/viewallworkshoppay',$data); 
```

看法：

```
echo $pages; 
```

# javascript - IE 9 可以在 HTML 文件中加载的最大图像数

> ID：16012724
> 
> 赞同：0
> 
> 时间：2013-04-15T10:17:20.957
> 
> 标签：javascript, html, internet-explorer

IE 9 可以在一个 HTML 文件中加载使用图像标签的最大图像数量吗？

我在一个 HTML 文件中加载了 60 到 120 张图像 (1675x2638)。我注意到在第 55 张图像之后，图像不再被加载。“损坏的图像”标签反映在图像标签中。

在我的 HTML 文件中，我先加载了 10 张图像，然后在它们向下扫描时加载。我通过 AJAX 加载后续图像，直到所有图像都加载完毕。

我在加载 HTML 内容（即图像）时是否缺少 IE 9 的任何限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:39:21.547

自然在某处存在某种限制，因为浏览器无法在有限系统中加载无限数量的图像。

然而，大多数限制将远高于仅 55 张图像。例如，浏览器在一个页面中可能有 40 亿 (2 ^(32) ) 个元素的限制。

最可能的限制是缓存允许的磁盘空间量，这也导致问题实际上更有可能是缓存太大而不是太小。某些版本的 IE 将缓存的默认空间确定为可用磁盘空间的百分比，因此如果磁盘很大，则该值会超过缓存实际处理的能力。

您应该检查浏览器中允许多少缓存空间，如果它太高或太低，请将其设置为合理的值（例如 100 MB）。

# java - 没有参数的方法泛型

> ID：16012729
> 
> 赞同：7
> 
> 时间：2013-04-15T10:17:35.280
> 
> 标签：java, generics

假设我有这样的方法：

```
static class Example 
{
    public static <N extends Number> Number getOddBits(N type)
    {
        if (type instanceof Byte) return (byte)0xAA;
        else if (type instanceof Short) return (short)0xAAAA;
        else if (type instanceof Integer) return 0xAAAAAAAA;
        else if (type instanceof Float) return Float.intBitsToFloat(0xAAAAAAAA);
        else if (type instanceof Long) return 0xAAAAAAAAAAAAAAAAL;
        else if (type instanceof Double) return Double.longBitsToDouble(0xAAAAAAAAAAAAAAAAL);
        throw new IllegalArgumentException();
    }
} 
```

该方法的实际细节并不重要。但是，要调用此方法，我们使用：

```
Example.<Float>getOddBits(0f); 
```

我的问题是，是否可以在**没有**常规参数的情况下编写这样的方法。没有重载，最终没有拳击。

理想情况下调用：

```
Example.<Byte>getOddBits(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T10:24:36.660

就拿一个`.class`怎么样？

```
public static Number getOddBits(Class<? extends Number> cls)
{
    if (cls == Byte.class) {
        return (byte)0xAA;
    } else if (cls == Short.class) {
        return (short)0xAAAA;
    } else if (cls == Integer.class) {
        return 0xAAAAAAAA;
    } else if (cls == Float.class) {
        return Float.intBitsToFloat(0xAAAAAAAA);
    } else if (cls == Long.class) {
        return 0xAAAAAAAAAAAAAAAAL;
    } else if (cls == Double.class) {
        return Double.longBitsToDouble(0xAAAAAAAAAAAAAAAAL);
    }
    throw new IllegalArgumentException();
}

...

Example.getOddBits(Float.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:18:30.937

作为对 KennyTM 建议的增强，您可以将 Class 参数与方法泛型结合以返回专用类型：

```
@SuppressWarnings("unchecked")
public static <N extends Number> N getOddBits(Class<N> cls) {
    Number out;
    if (cls == Byte.class) {
        out = (byte)0xAA;
    } else if (cls == Short.class) {
        out = (short)0xAAAA;
    } else if (cls == Integer.class) {
        out = 0xAAAAAAAA;
    } else if (cls == Float.class) {
        out = Float.intBitsToFloat(0xAAAAAAAA);
    } else if (cls == Long.class) {
        out = 0xAAAAAAAAAAAAAAAAL;
    } else if (cls == Double.class) {
        out = Double.longBitsToDouble(0xAAAAAAAAAAAAAAAAL);
    } else {
        throw new IllegalArgumentException();
    }
    return (N)out;
} 
```

这将允许您分配以下内容，并避免在每次调用时强制转换：

```
 float result = Example.getOddBits(Float.class); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:40:24.250

我不确定这是否会对您有所帮助，但我过去曾使用它来反序列化和返回适当类型的对象。

```
public <T> T deserialize(String xml){
    T object=null;
    ...
    //pull type information from method param
    ...
    return object=(T)type.newInstance(); //helper to instantiate class
} 
```

但是，我不完全确定您需要做什么。实现此目的的一种更简单、更简洁的方法可能是为您需要的给定类型创建一个 Converter 接口，并让任何需要使用它的类来实现它。然后，您需要的任何类型都可以直接在 Object 本身上调用。例如：

```
inerface Convertor<T>{

    T convert();

    void set(T value);

}

class Something implements Converter<Long,ByteArray>{

    ...

    public ByteArray convert(){...}

    public void set(ByteArray value){...}

} 
```

# c - 浮动_复杂的标识符变体Windows？

> ID：16012732
> 
> 赞同：1
> 
> 时间：2013-04-15T10:17:37.417
> 
> 标签：c, windows, visual-studio-2010

```
# define COMPLEX_FLOAT float _Complex 
# define _Complex_I 1.0fi 
```

这存在于我项目的主头文件中。

```
extern COMPLEX_FLOAT quantum_conj(COMPLEX_FLOAT a); 
```

这在另一个头文件中。但是，`error C2061: syntax error : identifier 'quantum_conj'`当我使用 MSVC 编译时，我得到了。我已经包括`<math.h>`.

`float _Complex`我想在 Windows 中没有标识符。这个项目为 UNIX/LINUX 系列编译得很好。另外，我知道这些宏（`_Complex_I and _Complex`）存在于`<complex.h>`gnu/bsd 发行版中。但是，没有`complex.h`适用于 windows 的头文件。

但是，我想为 Windows 编译这个。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:38:04.860

复数算术是 C99 的一个特性。而 MSVC 只支持近似 C89 的东西。MS 已公开声明其 C 编译器不会超越 C89。

因此，您需要一个不同的编译器。例如，GNU 编译器将完成这项工作。在 Windows 上，这通常意味着 mingw 端口。

# php - 如何在数组中搜索整数和 strlen

> ID：16012735
> 
> 赞同：0
> 
> 时间：2013-04-15T10:17:38.697
> 
> 标签：php, html, arrays

我想在一个数组中搜索是否有一个字符串长度正好为 5 个字符的键，并且它必须是整数类型。

我试过了：

```
$key = array_search( strlen( is_int($array)=== true) === 5 , $array); 
```

但这不起作用。所以我想知道它是否存在以及它是哪个键。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:22:00.270

怎么样：

```
$filtered = array_filter($array, function($v){
  return !!(is_int($v)&&strlen($v)==5);
}); 
```

[运行代码](http://ideone.com/gPR9nP)

本质上[`array_filter`](http://php.net/manual/en/function.array-filter.php)迭代数组的每个元素，将每个值传递`$v`给可调用函数。根据您所需的条件，它返回一个布尔值（真或假），以确定它是否保留在结果`$filtered`数组中。

这`!!`不是绝对必要的，因为`(...)`它将确保正确转换布尔值，但感叹号只是语法糖-个人对可读性的偏好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:22:40.770

这不是 array_search() 的工作方式。它在值中搜索匹配的字符串，并返回一个键。如果你想搜索一个键，最好的办法是简单地迭代它。

```
foreach ($array as $key => $value) {
    if (strlen($key) === 5) { 
        echo $key . ": " . $value; 
        break; //Finish the loop once a match is found
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:25:08.897

array_search 不会像这样尝试

```
foreach ($array as $key => $value) {

if ((strlen($value) == 5) && is_int($value)) 
 { 
    echo $key . ": " . $value;  
 }
} 
```

您可以使用[array_walk](http://www.php.net/manual/en/function.array-walk.php)

```
array_walk($array, function(&$value, $index){
if (strlen($value) == 5 && (is_int($index))) echo "$index:$value";
}); 
```

数组遍历遍历每个元素并应用用户定义的函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T10:30:20.017

这是将值与整数和精确 5 字符进行比较的示例示例

```
$array = array(12345,'asatae');

$key_val = array();
foreach($array as $each_val){    
    if(is_int($each_val) && strlen($each_val) == 5){        
        $key_val[] = $each_val;
    }
}

echo "<pre>";
print_r($key_val); 
```

你的输出会像

```
Array
(
    [0] => 12345
) 
```

注意：在数组中必须是整数值而不是引号

像数组（23，“23”，23.5，“23.5”）

23 是第一个键的整数..

# linux - 在大文件上使用 awk 计算出现次数

> ID：16012741
> 
> 赞同：2
> 
> 时间：2013-04-15T10:18:03.880
> 
> 标签：linux, shell

我有 2 个文件。首先有很少的记录也存在于 file2 中。文件 2 大于文件 1。我想在 file2 显示单词的出现次数（来自 file1）。

这是我尝试过的

```
file1.txt
bash-3.00# cat file1.txt |wc -l
17102666

more file1.txt
123advertise3
123advertise4
123advertise5
123advertiseb
123advertisec
123advertised
123advertisedebtconsolidation
123advertisee
123advertisef
123advertiseg
123advertiseh
123advertisehomaxproducts 
```

文件2

```
file2.txt
bash-3.00#cat file2.txt | wc -l
113842500

more file2.txt
123123apartment
123123attorney
123123auction
123123auto
123advertisedebtconsolidation
123advertiseb
123123automate
123123automatic
123123bank
123advertisedebtconsolidation
123advertiseb
123123banking
123123bankruptcy
123advertisedebtconsolidation
123123bargain
123123best
123123blog
123advertisedebtconsolidation
123123building 
```

我想要这样的输出

```
123advertisedebtconsolidation 3
123advertiseb 2 
```

我在命令下运行

```
bash-3.00# nawk 'FNR==NR{c[$1];next}$1 in c{++c[$1]}END{for(i in c) print i,c[i]}' file1.txt file2.txt 
```

但我没有得到想要的输出。

我只有字符串之类的东西

```
peaktablethomecsuchico
browsepropertyhomebase
clickflowershomedsn
worldwideflowerstravelagency
acepigb
acepigc
browsecompanytravelagent
liveearnhomedownpaymentassistance
acepigd
bargainsystemhomebvcure
acepige
acepigf
uniquecasinohomecycling
alternativeanyhomecanningrecipes
acepigj
annualsurveyhomedma 
```

任何人都可以帮助我在更大的文件中使用 grep 或 awk 获得这样的输出。我在较小的文件上尝试了同样的事情，效果很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:35:05.533

该`uniq`命令可能是一种输出常见字符串的简单方法。-c 选项指定输入中的匹配数。awk 命令仅输出多次出现的行。

```
cat file1.txt file2.txt | sort | uniq -c | awk '{ if ($1 > 1) print $0; }' 
```

# kendo-ui - Kendo UI 在标记为必填的字段上将空白数据发布到服务器

> ID：16012754
> 
> 赞同：0
> 
> 时间：2013-04-15T10:18:32.663
> 
> 标签：kendo-ui

我的小问题是当我点击剑道网格上的添加新记录按钮时，它会添加一个新的空白行，当我单击保存更改时，即使在使用验证标记字段后它实际上也会向服务器发送一个发布请求：{required: true }。

尽管当我尝试将现有字段更新为空值时，验证开始阻止我保存正确的值。

当我点击删除按钮或保存更改按钮时，我如何收到一条显示“你确定要......”的消息？它是自动实现的还是我自己实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:50:18.040

*   required 是 UI 验证，但不会阻止将其保存在服务器上。– OnaBai 1 分钟前 编辑
*   将要求`delete`确认的弹出窗口设置`editable.confirmation`为`true`. [请参阅此处](http://docs.kendoui.com/api/web/grid#configuration-editable.confirmation)的文档
*   没有*内置*确认`save`。您需要拦截`save`请求并显示确认，然后进行实际保存。

# r - 绘制 gvisMotionChart 与 timevar 作为月份和年份

> ID：16012756
> 
> 赞同：1
> 
> 时间：2013-04-15T10:18:43.307
> 
> 标签：r, googlevis

我有一个`df`带有一列的数据框

```
df$year_month = "2011-1" "2011-02" "2011-03" ... 
```

我想用它作为函数的`timevar`参数`gvisMotionChart`。我试过了：

```
library(zoo)
df$year_month = as.yearmon(df$year_month) 
```

但是，当我尝试绘制图表时，我收到以下错误：

> timevar 必须是数字或日期格式。现在是yearmon

绘图时`gvisMotionChart`是否可以让时间变量显示值：

```
"Jan 2011" "Feb 2011" ... 
```

正如罗兰建议的那样，我可以转换为数字，例如`201101, 201102, ...`，但大概时间变量会显示这些值：

```
"201101" "201102" ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:55:19.913

而不是使用类“yearmon”，您需要使用类“Date”：

```
df$date <- as.Date(paste0(df$year_month,"-1"),format="%Y-%m-%d") 
```

然后就可以使用`date.format`参数了`gvisMotionChart`。

从帮助页面：

```
M3 <- gvisMotionChart(Fruits, "Fruit", "Date", date.format="%YW%W") 
```

# windows - 是否可以确定是否来自鼠标或触摸板的 WM_MOUSEMOVE？

> ID：16012759
> 
> 赞同：1
> 
> 时间：2013-04-15T10:18:47.127
> 
> 标签：windows, winapi, user-interface

我需要检测消息 WM_MOUSEMOVE 的来源，但在 Internet 上找不到任何资源。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:28:35.137

我坚信这是不可能的。`WM_MOUSEMOVE`描述鼠标光标在屏幕上的移动，无论是什么设备引起的动作。实际上它甚至可能是鼠标光标的软件模拟移动，即根本不是由任何硬件设备引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T05:10:28.793

是的，实际上 Raw Input 可以检测到 mouse_move 消息的来源，否则其他输入设备（如操纵杆等）将无法工作。

# eclipse - 如何在 Eclipse 中添加 JFace 源

> ID：16012763
> 
> 赞同：3
> 
> 时间：2013-04-15T10:18:51.060
> 
> 标签：eclipse, jface

根据[http://wiki.eclipse.org/JFace](http://wiki.eclipse.org/JFace) 我应该在`plugins\org.eclipse.rpc.source_<version>`.

> 21.  现在按下`Extension...`按钮。这将打开变量扩展选择对话框。再次，展开插件目录。找到名为`org.eclipse.rcp.source_<version infomation>`. 请注意，这是一个目录，而不是 JAR 文件。
> 22.  展开此目录，展开`src`子目录，向下滚动到名为`org.eclipse.jface_<version information>`. 展开它，然后选择名为`src.zip`.

安装后`Eclipse platform SDK`我得到了这个目录（`features\org.eclipse.rcp.source_4.2.2.v20130129-152330-7IARAABrMQkGSvMgQnUlz-DQz00h`而不是`plugins`），但我只能找到`META-INF`文件夹但没有`src`文件夹，我也找不到`src.zip`

如何在 Eclipse 中将 JFace 源添加到 jar 中？什么 Eclipse 4.2 包包含它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-17T19:38:47.973

我正在使用[托管在此 URL](http://swt-repo.googlecode.com/svn/repo/)的 SWT 存储库，其中包含例如 jface 3.8.0 和 swt 4.4（都包括源）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-15T14:42:02.030

不要在这些文件夹中搜索 src 文件夹和 src.zip 文件，而是在插件文件夹中查找“org.eclipse...source...jar”文件。

例如 org.eclipse.jface.source_3.13.2.v20171022-1656.jar

它至少适用于我的 Eclipse Oxigen。如果您没有此类文件，请安装“Eclipse SDK”插件并重试

# jquery - jQuery 按钮框阴影颜色选择器

> ID：16012767
> 
> 赞同：0
> 
> 时间：2013-04-15T10:18:54.793
> 
> 标签：jquery

我正在研究按钮生成器，我正在尝试定位可以使用颜色选择器更改的框阴影颜色。任何人都可以帮助我使用颜色选择器并定位十六进制值。我目前正在使用 jsColor lib 来更改按钮颜色，但我无法让它为框阴影和文本阴影工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:17:44.030

只需使用[jscolor 文档即可](http://jscolor.com/)帮助您入门。为了动态更新阴影，您可以在输入元素的类属性中指定参数，例如在用户将鼠标拖到颜色上`color {onImmediateChange:'updateColor();'}`时调用。`updateColor()`这是一个功能小提琴：http: [//jsfiddle.net/asifrc/cuZsK/1/](http://jsfiddle.net/asifrc/cuZsK/1/)

# php - 解析和显示来自 xml 的数据

> ID：16012769
> 
> 赞同：0
> 
> 时间：2013-04-15T10:18:58.837
> 
> 标签：php, mysql, xml, xslt, xml-parsing

您好，我有来自在线商家的 xml 目录，我的问题是：如何使用 php 正确显示此文件的结果，我试图获得一些结果，但我不知道如何正确显示图像或特定图像（默认，小型或中型..）和 url。谢谢我在 php 中是全新的。

```
<?xml version="1.0" encoding="UTF-8"?>
<catalog id="[Identifiant du programme]">
<products>
<product>
<product_id>
      <ean>["European Article Numbering" du produit]</ean>
      <store>[Reference produit du marchand]</store>
      <manufacturer>[Reference produit du fabricant]</manufacturer>
    </product_id>
    <trademark>[Marque du produit]</trademark>
    <title>[Nom du produit]</title>
    <desc>[Description du produit]</desc>
    <full_desc>[Description élargie du produit]</full_desc>
    <url>[Lien de redirection tracké Public-Idées du produit]</url>
    <other>[Informations complémentaires sur le produit]</other>
    <product_images>
      <image type="default">[Lien vers l'image par défaut du produit]</image>
      <image type="small">[Lien vers l'image de petite taille du produit]</image>
      <image type="medium">[Lien vers l'image de taille moyenne du produit]</image>
      <image type="large">[Lien vers l'image de grande taille du produit]</image>
    </product_images>
    <price currency="[Unité monétaire utilisée du prix du produit]">[Prix du produit]</price>
    <tax>
      <name>[Nom de la taxe associée au produit]</name>
      <price currency="[Unité monétaire de la taxe du produit]">[Montant de la taxe associée au produit]</price>
    </tax>
    <shipping>
      <delivery>[Texte associé aux frais de port du produit]</delivery>
      <price currency="[Unité monétaire des frais de port]">[Montant des frais de port du produit]</price>
    </shipping>
    <category>
      <merchant>
        <name>[Catégorie du marchand associée au produit]</name>
        <id>[Identifiant de la catégorie du marchand associée au produit]</id>
      </merchant>
    </category>
  </product>
</products> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:36:35.073

PHP 为您提供了两个最推荐的库来执行此操作（[还有更多，内置的和外部的](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml)）。一种是[*SimpleXML*](http://php.net/SimpleXML)，另一种是[*DOMDocument*](http://php.net/DOMDocument)。两者都对 XML 进行操作，这里仅举两个示例，每个示例一个。有关详细信息，请参阅在线文档：

```
$images   = $simpleXMLElement->xpath('//image');

printf("Found %d image(s):\n", count($images));
foreach($images as $i => $image) {
    printf(" * %d. %s\n", $i+1, $image);
}

/**** output:

Found 4 image(s):
 * 1\. [Lien vers l'image par défaut du produit]
 * 2\. [Lien vers l'image de petite taille du produit]
 * 3\. [Lien vers l'image de taille moyenne du produit]
 * 4\. [Lien vers l'image de grande taille du produit] 
```

*DOMDocument*的第二个示例：

```
$images = $domDocument->getElementsByTagName('image');

printf("Found %d image(s):\n", $images->length);
foreach($images as $i => $image) {
    printf(" * %d. %s\n", $i+1, $image->nodeValue);
}

/**** output:

Found 4 image(s):
 * 1\. [Lien vers l'image par défaut du produit]
 * 2\. [Lien vers l'image de petite taille du produit]
 * 3\. [Lien vers l'image de taille moyenne du produit]
 * 4\. [Lien vers l'image de grande taille du produit] 
```

您选择哪个库取决于您。我建议你尝试两者。DOMDocument 遵循使其易于使用的标准，而 SimpleXMLElement 则不这样做，并且试图不那么冗长，但是您需要了解更多才能充分利用它。

如果您的问题与 XML 无关，而与如何链接/显示图像有关，那么您需要指定图像的限定条件以及您提供的数据的方式。到目前为止，我只看到方括号中的法语描述；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:37:20.263

工作示例：您的 xml 不完整：缺少目录结束标记，因此我添加了它：

```
$xml = '<?xml version="1.0" encoding="UTF-8"?>
        <catalog id="[Identifiant du programme]">
            <products>
            <product>
                <product_id>
                  <ean>["European Article Numbering" du produit]</ean>
                  <store>[Reference produit du marchand]</store>
                  <manufacturer>[Reference produit du fabricant]</manufacturer>
                </product_id>
                <trademark>[Marque du produit]</trademark>
                <title>[Nom du produit]</title>
                <desc>[Description du produit]</desc>
                <full_desc>[Description élargie du produit]</full_desc>
                <url>[Lien de redirection tracké Public-Idées du produit]</url>
                <other>[Informations complémentaires sur le produit]</other>
                <product_images>
                  <image type="default">[Lien vers l\'image par défaut du produit]</image>
                  <image type="small">[Lien vers l\'image de petite taille du produit]</image>
                  <image type="medium">[Lien vers l\'image de taille moyenne du produit]</image>
                  <image type="large">[Lien vers l\'image de grande taille du produit]</image>
                </product_images>
                <price currency="[Unité monétaire utilisée du prix du produit]">[Prix du produit]</price>
                <tax>
                  <name>[Nom de la taxe associée au produit]</name>
                  <price currency="[Unité monétaire de la taxe du produit]">[Montant de la taxe associée au produit]</price>
                </tax>
                <shipping>
                  <delivery>[Texte associé aux frais de port du produit]</delivery>
                  <price currency="[Unité monétaire des frais de port]">[Montant des frais de port du produit]</price>
                </shipping>
                <category>
                  <merchant>
                    <name>[Catégorie du marchand associée au produit]</name>
                    <id>[Identifiant de la catégorie du marchand associée au produit]</id>
                  </merchant>
                </category>
              </product>
            </products>
        </catalog>';

       $dom = simplexml_load_string($xml);

       $producs = $dom->products->product;

       foreach($producs as $product){

            echo('ean:' . (string)$product->product_id->ean);   
            echo('<br />');   
            $images = $product->product_images->image; 
            foreach($images as $img){
                echo('type:' . (string)$img['type'] . ' value:' . (string)$img);
                echo('<br />');         
            }

       } 
```

# javascript - 谷歌浏览器在 JavaScript 动态更改后未更新 iframe 元素 innerHTML

> ID：16012770
> 
> 赞同：1
> 
> 时间：2013-04-15T10:19:03.630
> 
> 标签：javascript, google-chrome, iframe, innerhtml

我有一个很大的页面，其中包含 Iframe 和 javascript 函数来使用它。我将简化我的代码，例如：

```
Simple html:
<html>
<head>
    head tags
</head>
<body>
    <iframe id="iframe_1" align="center" src="iframe-test.html"></iframe>
</body>
</html> 
```

iframe-test.html 的内容：

```
<html>
<head>
</head>
<body>
    <span id="my_element">50</span>
</body>
</html> 
```

我的 JavaScript 函数：

```
function test(){
var my_element = document.getElementById("iframe_1").contentWindow.document.getElementById("my_element");
my_element.innerHTML = "60";
} 
```

所以。它在 IE 和 FF 中完美运行，但 Chrome 不会更新 my_element 的 innerHTML，直到我用鼠标选择它！是的，没错。我正在调用 js 函数，但在 Chrome 中没有看到更新，在我用鼠标光标选择“50”后，它会用新值“60”刷新。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:26:17.393

当我在自己的机器上尝试过它时，它谈到了 3 个错误：

```
1.Uncaught TypeError: Cannot set property 'innerHTML' of null test.html:12
2.Unsafe JavaScript attempt to access frame with URL file:///C:/Users/sadaf2605/Downloads/New%20folder/iframe-test.html from frame with URL file:///C:/Users/sadaf2605/Downloads/New%20folder/test.html. Domains, protocols and ports must match.
3\. Uncaught TypeError: Cannot call method 'getElementById' of undefined 
```

正如数字 2 所说：`Domains, protocols and ports must match.`所以我认为当您将其上传到服务器时，不应发生此错误，因为域、协议和端口在真实服务器中将是相同的。

# php - 谷歌地图上的标记移动

> ID：16012772
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:19:22.340
> 
> 标签：php, javascript, codeigniter, google-maps

我是 PHP 新手，我只是添加了谷歌地图，但我不知道如何创建标记以及如何移动标记。之后我将如何获取制造商的经度和纬度。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:25:29.070

我建议您使用适用于 Google 地图的 JavaScript API。

Google 提供了可帮助您入门的代码示例。您可以在此处访问这些代码示例：[https ://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

至于创建标记，您可以使用以下内容：

```
 function initialize() {
    var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var mapOptions = {
      zoom: 4,
      center: myLatlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

    var marker = new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: 'Hello World!'
    });

  }

  <div id="map-canvas"></div> 
```

您需要知道放置标记的位置的纬度/经度。

# linux - shell find 在搜索结果中不显示根目录

> ID：16012776
> 
> 赞同：4
> 
> 时间：2013-04-15T10:19:32.980
> 
> 标签：linux, bash, shell

我有一个快速且可能很容易解决的问题。我通过列出目录列表

`find ~/me/ -maxdepth 1 -type d -not -name "test1" -and -not -name "test4"`

```
$ find ~/me/ -maxdepth 1 -type d -not -name "test1" -and -not -name "test4"
/home/me/
/home/me/test2
/home/me/test3 
```

我想使用类似的东西：`find ~/me/ -maxdepth 1 -type d -not -name "test1" -and -not -name "test4" | xargs rm -rf`，但是 find 显示了： **/home/me root dir**。

我正在寻找一种不将其包含在搜索结果中的方法。有什么提示吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T10:21:59.680

`-mindepth 1`不为你工作？

# window - 如何单击窗口中的特定按钮（不使用 XPOS YPOS）

> ID：16012777
> 
> 赞同：1
> 
> 时间：2013-04-15T10:19:39.403
> 
> 标签：window, autohotkey, buttonclick

我刚刚开始使用 AUTOHOTKEY，它非常棒。不过我有一个疑问。我想自动启动应用程序，然后单击其中的特定按钮。我想使用 AHK 完成此操作。

一旦我启动应用程序，这个窗口就会出现[在这里](https://www.dropbox.com/s/vkmoccc4hhhxmng/LOGIN%20screenshot.jpg)。我想点击“连接”按钮，但我想不出将光标移动到连接按钮的好方法。我尝试了以下使用选项卡的代码。

```
Loop ,5
    {    
sleep 2*1000    
Send {Tab down}    
} 
```

**这行得通，但我觉得这很粗糙，需要更好的方法。有没有办法使用 button_name 或 button_text 对我有利？**

**我也不想使用屏幕位置 XPOS 和 YPOS。**

我的 applcn 窗口截图的链接是[这个](https://www.dropbox.com/s/vkmoccc4hhhxmng/LOGIN%20screenshot.jpg)。

我从**AutoHotKey**的 WINDOW-SPY 功能中获得了以下信息。希望您能发现这很有用。

> > > > > > > > > > ( 窗口标题 & 类别 )<<<<<<<<<<< 亚洲网登录 ahk_class QWidget
> > > > > > > > > > 
> > > > > > > > > > > > （鼠标位置）<<<<<<<<<<<<在屏幕上：881、306（不常用）在活动窗口中：462、76
> > > > > > > > > 
> > > > > > > > > （现在在鼠标光标下）<<<<<<<< ClassNN: QWidget2 Text: bnConnect Color: 0xC8D0D4 (Blue=C8 Green=D0 Red=D4)
> > > > > > > > > 
> > > > > > > > > > （活动窗口位置）<<<<<<<<<< 左：419 顶部：230 宽度：529 高度：238
> > > > > > > > > > 
> > > > > > > > > > > （状态栏文字）<<<<<<<<<<
> > > > > > > > > > > 
> > > > > > > > > > > （可见窗口文本）<<<<<<<<<<< layoutWidget bnConnect bnAbout bnClose chkRemember edPassword lbPassword edUsername teLog qt_scrollarea_viewport lbUsername
> > > > > > > > > > > 
> > > > > > > > > > > （隐藏窗口文本）<<<<<<<<<<< qt_scrollarea_vcontainer qt_scrollarea_hcontainer
> > > > 
> > > > (TitleMatchMode=慢可见文本)<<<<
> > > > 
> > > > （TitleMatchMode=慢隐藏文本）<<<<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:30:25.673

使用 ControlClick：

```
ControlClick, ClassNN QWidget2, ahk_class QWidget, , Left, 1 
```

也许改用 WinTitle，尝试使用记事本中的另存为窗口。

```
SetTitleMatchMode,2
ControlClick, Button1, Save As, , Left, 1 
```

所以这将是亚洲网登录：

```
SetTitleMatchMode,2
ControlClick, QWidget2, Asianet Login, , Left, 1 
```

假设您在制作 AHK Windows Spy 快照时将鼠标悬停在登录按钮上。

# html - 删除 html 列表中的填充

> ID：16012782
> 
> 赞同：2
> 
> 时间：2013-04-15T10:19:49.183
> 
> 标签：html, css, web

我在 div 中添加了一个无序列表，并删除了它的项目符号。现在我想删除 div 和列表之间的空间，以便列表可以移动到左角。谁能建议我如何删除列表和 div 之间的剩余空间/间隙。谢谢

```
 <div class="divLeftPanel">
                    <div>
                        <ul>
                            <li>Location</li>
                            <li>Bangalore</li>
                            <li><br/></li>
                            <li>Work area</li>
                            <li>IT</li>
                            <li><br/></li>
                            <li>Employment type</li>
                            <li>Regular full time</li>
                            <li><br/></li>
                        </ul>
                    </div>
                </div> 
```

这是我的CSS

```
.divLeftPanel{
   float: left; 
   height: 100%;
   width:30%;
   padding-left: 0px;
}
ul
{
    font-style: italic;
    font-weight: bold;
    list-style-type: none;
    margin-left: 0px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:22:05.293

如果你已经提供`padding`给 div 然后像这样使用

```
div
{
  padding-left:0px;
} 
```

如果你的列表从左边有边距，那么你可以这样做

```
#myList
{
  margin-left:0px;
} 
```

简单来说：

> padding 定义元素边框和元素内容之间的空间。而 margin 定义元素周围的空间。

编辑：像这样为 ul 重置 css

```
ul
{
    list-style:none;
    margin: 0; 
    padding: 0;
} 
```

[JS 小提琴演示](http://jsfiddle.net/zfJQc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:31:32.430

**现在习惯了**

定义你的`.divLeftPanle ul` `padding-left:0;`

```
.divLeftPanel ul{padding-left:0;} 
```

**[演示](http://jsfiddle.net/rohitazad/2U3Ww/1/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:38:47.467

对不起大家。我找到了解决方案，感谢@sachin。我添加了 ul{padding:0px;} 现在它可以工作了。再次感谢

# mongodb - 我可以将 Apache Solr 与 MongoDB 同步吗

> ID：16012783
> 
> 赞同：4
> 
> 时间：2013-04-15T10:19:51.597
> 
> 标签：mongodb, architecture, solr, lucene, synchronization

我在我的应用程序中使用 SOLR 在 Windows 平台上实现搜索技术。

我的数据库是 MongoDB。

我的问题是是否可以在 windows 平台上将 SOLR 与 MongoDb 同步或集成。

如果我在 Google 中搜索，结果似乎只指定使用 Ruby 脚本。

我们之前使用 Postgres 和 Apache Solr 的实现运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T11:38:01.987

如果您正在寻找 mongo 数据导入处理程序，github 上有两个项目：

简单的方法：[https ://github.com/james75/SolrMongoImporter](https://github.com/james75/SolrMongoImporter)

支持增量导入：[https ://github.com/sucode/solrMongoDBImporter](https://github.com/sucode/solrMongoDBImporter)

我正在写一个新的来弥补一些缺失的功能，我很快就会发布它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T15:22:10.727

[这个相关问题](https://stackoverflow.com/questions/13542564/easy-way-to-sync-data-between-mongodb-and-apache-solr)列出了几种可能性。在我看来，有趣的是使用[10gen-labs 的 mongo-connector。](https://github.com/10gen-labs/mongo-connector)

根据他们的描述：

> mongo-connector 系统旨在将 mongoDB 连接到任何目标系统。这允许 mongoDB 中的所有文档存储在其他系统中，并且在连接器运行时 mongo 和目标系统将保持同步。它已经用 python 2.7 和 python 3 进行了测试。

此外，他们有[一节描述与 Solr 的集成。](https://github.com/10gen-labs/mongo-connector#usage-with-solr)

好像是两个月前更新的，所以不是废弃的项目。我认为它是一个“10gen-labs”项目这一事实也对其有利，因为 10gen 是制造 MongoDB 的公司的旧名称。

# c# - 如何通过 wcf 发送具有特定位置的流？

> ID：16012789
> 
> 赞同：1
> 
> 时间：2013-04-15T10:20:18.070
> 
> 标签：c#, wcf, streaming

我的问题是，当客户端调用服务器上的方法以获取具有特定位置的流时，流每次都带有 position = 0。

我能做些什么？

服务器方式：

```
public Stream SearchTorrent(int TorrentID, int Position)
        {
            string FilePatch = ClientBusinessLogic.MyTorrents().Where((MyTorrent1) => MyTorrent1.TorrentID == TorrentID).ToList().First().Patch;
            Stream File = new FileStream(FilePatch, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
            File.Position = Position;
            return File;
        } 
```

客户端方法：

```
Stream SeederFile = this.SeederInterface.SearchTorrent(TorrentID, Part.From); 
```

Part.From 值不是 0。但是返回的流以位置 vlaue 0 返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:36:12.590

`Stream`从您的服务器方法返回的不是通过引用客户端返回的。那就是：他们没有得到你的信息流。

他们得到的是您的内容（从 开始`Position`）流式传输给他们，因此他们从 0 开始获得一个流，数据的尾端来自您的原始流。

基本上：您不能返回对流的引用。你会得到一份内容的副本。

你到底想做什么？

更新：如果要返回文件的一部分，可以使用`byte[]`. 无论如何，这基本上是通过电线进行的。这种方法的缺点是您必须将块读入服务器上的内存。

因此，作为一种优化，您仍然可以返回`Stream`. 此流可以包装您要返回的文件部分。请注意，它将始终从零位置开始。

# dart - dart 从 Map 扩展生成一个错误，即 Map 中的默认构造函数不是生成的

> ID：16012793
> 
> 赞同：1
> 
> 时间：2013-04-15T10:20:39.400
> 
> 标签：dart

我试图从`Map`这样扩展：

```
class TestClass extends Map {
} 
```

只是这样做我得到了一个错误`Constructor '<default>' in class 'Map<dynamic, dynamic>' is not generative.`

不知道怎么办，我补充一下：`TestClass() : super();`

我仍然遇到同样的错误。

额外的问题：

哪一个是最好的方法，通过`Map`像上面那样扩展或创建一个具有这样属性的新类`Map`：

```
class TestClass {
    Map attr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:57:04.940

Map 是一个抽象类（参见：[http](http://api.dartlang.org/docs/releases/latest/dart_core/Map.html) ://api.dartlang.org/docs/releases/latest/dart_core/Map.html ），它有一个工厂（查看源代码）创建一个默认的 HashMap 实现。

（您可以自己从编辑器中看到大部分内容：右键单击“地图”并选择“打开声明”）

简单地调用工厂会导致关于 HashMap 不是您的类的子类的错误。

但我认为简单地继承 HashMap 会给你你想要的，因为无论如何这都是默认实现。

对于您的额外问题：子类化哈希图通常是一种反模式（至少在 Java 中，如果 Dart 的某些内容使其更安全，请纠正我）并且很少是您想要做的事情，尤其是在包容有效的情况下。我建议这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-03T08:05:53.050

您可以使用类型别名 ( [https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067](https://medium.com/dartlang/announcing-dart-2-13-c6d547b57067) ) 而不是扩展 Map。

写吧`typedef TestClass = Map<String, YourClass>;`

# google-analytics - 使用海关变量进行电子商务跟踪

> ID：16012796
> 
> 赞同：0
> 
> 时间：2013-04-15T10:20:47.960
> 
> 标签：google-analytics, e-commerce, google-tag-manager

我想了解有关交易的更多详细信息实际上，我使用了放在最后一个交易页面上的基本代码（确认）：

```
_gaq.push(['_addTrans',
  '$!{Transactionid}',           // transaction ID
  'Womens Apparel', // affiliation or store name
  '$!{pvAmount}',          // total
  '$!{taxesPrice}',           // tax
  '15.00',          // shipping
  'San Jose',       // city
  'California',     // state or province
  'USA'             // country
]); 
```

但是我在此页面上有其他信息（关于乘客），例如客户姓名、他的电子邮件、他的邮政编码等......获取更多信息的最佳方法是什么？我听说我可以在“附属”字段中输入我想要的内容，但它只有一个可用的位置。我可以使用海关变量（在我的 trackpageview 之前声明）：

```
gaq.push(['_setCustomVar',1,'Name','$CLIENT_NAME', 1]);

gaq.push(['_trackPageview' ]);

gaq.push(['_addTrans', ]);

gaq.push(['_addItem', ]);

gaq.push(['_trackTrans' ]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:04:13.457

在任何情况下，您都不能将个人身份信息 (PII) 发送到 GA 的服务器，因此您应该非常小心：这不是使用自定义变量的问题，而是确定您正在跟踪的信息可以“ t 被解释为 PII。

谷歌本身在这个问题上有点狡猾。GUID、ID、哈希、电子邮件地址、地址数据和其他一些位或多或少是明确禁止的；但是电子商务的 ga.js 实现为您留下了一个交易 ID 的位置，它可以变成 PII，或者至少是一个类似于禁止字段的字段。

他们变得狡猾，我们必须小心。如果您有任何理由相信您正在捕获的数据可以以任何方式被解释为或指向 PII，那么请忽略它。关闭您的帐户并擦除您的数据是不值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:29:05.967

那么它不可能跟踪。自定义变量可以帮助您：跟踪优惠券代码/促销代码、付款方式、运输方式或更多。

如果您想知道如何为这些目的使用自定义可变电源，请访问[http://cutroni.com/blog/2011/06/14/5-google-analytics-custom-variables-for-ecommerce/](http://cutroni.com/blog/2011/06/14/5-google-analytics-custom-variables-for-ecommerce/)

# list - 从下拉菜单中选择值时重置列表的分页 sencha touch 2.1

> ID：16012797
> 
> 赞同：1
> 
> 时间：2013-04-15T10:20:48.507
> 
> 标签：list, drop-down-menu, paging, reset, sencha-touch-2.1

我需要通过从下拉列表中选择值来动态填充列表。

例如，当我选择**活动**记录时，我的列表将填充活动记录**。**如果我选​​择**删除**记录，那么列表将填充已**删除**的记录。

请在下面查看我的代码

模型.js

```
 Ext.define('bluebutton.model.BlueButton.TransactionList', {
    extend: 'Ext.data.Model',
    config: {
        idProperty:'transactionId',
//         id:'transactionlistmodel',

        fields: [
            {  name: "transactionId" ,type:"string" },
            {  name: "merchant_bbID" ,type:"string" },
            {  name: "sessionId"  ,type:"string"},
            {  name: "deviceId"  ,type:"string"},
            {  name: "createDateTime" ,type:"string"},
            {  name: "fullName" ,type:"string"},
            {  name: "action" ,type:"string"},
            {  name: "updatedPoint" ,type:"string"},
            {  name: "createDate" ,type:"string"},
            {  name: "status",type:"string" },

        ],

        proxy: {
            type: 'rest',

           url: 'http://localhost:8080/WebCommon/rest/BBWebService/getPointTransactionList',
//            url: 'http://mixsoloffice.no-ip.biz:82/WebCommon/rest/BBWebService/getPointTransactionList',
            actionMethods: {
                create: 'POST',
                read: 'GET',
                update: 'PUT',
                destroy: 'DELETE'
            },

//                      noCache: false, // get rid of the '_dc' url parameter

                    extraParams: {
                        sessionId: "1",
                        deviceId: "1",
                        merchant_bbID: "merchant1",
                        filterType :"0"

                    // add as many as you need
                },

            reader: {
                type: 'json',
                rootProperty: 'pointTransHistoryList',
                 totalProperty: 'totalRecord',
                 successProperty: 'success',

            },

            writer: {
                type: 'json',

            },
        }

    }

}); 
```

Store.js

```
Ext.define('bluebutton.store.BlueButton.TransactionList', {
    extend: 'Ext.data.Store',
       requires: [
              'bluebutton.model.BlueButton.TransactionList'
    ],

    config: {
        grouper: {
            groupFn: function (record) {
                return record.get('createDateTime');
            }

        },

            model: 'bluebutton.model.BlueButton.TransactionList',
            pageSize: 5,
             autoLoad: true,
            storeId: 'transactionliststore',
            sorters: 'createDateTime',
            groupDir: 'DESC',
             autoSync: true,
            clearOnPageLoad: false, 

    }
}); 
```

视图.js

```
 Ext.define('bluebutton.view.BlueButton.TransactionList', {
    extend: 'Ext.List',
    xtype: 'transactionlistcard',

    requires: [
        'Ext.field.Select',
        'Ext.field.Search',

        'Ext.plugin.ListPaging',
        'Ext.plugin.PullRefresh',

        'bluebutton.store.BlueButton.TransactionList',

    ],
    config: {

        styleHtmlContent: true,
               scrollable: {
            direction: 'vertical',
            directionLock: true
        },

        singleSelect: true,

        grouped: true,
        variableHeights : false,
           store : { xclass : 'bluebutton.store.BlueButton.TransactionList'},
            itemHeight :100,
        loadingText : 'loading',
        id :'transactionlist',

            masked: {
                xtype: 'loadmask',
                message: 'loading...'
            }, // masked
       plugins: [

                        {

                            xclass: 'Ext.plugin.PullRefresh',
                             pullRefreshText: 'Pull down for more new Tweets!',         

//                                      refreshFn: function(callback, plugin) {
//                                                 var store = plugin.list.getStore();
//                                            store.load(function(records, operation, success) {
//                                                callback.call(plugin);
//                                                console.log( records );
//                                     });

//                                 }

                        },

                        { 
                            xclass: 'Ext.plugin.ListPaging',
//                               

                        }
                ],

        emptyText: '<p class="no-search-results">No Transaction record found matching that search</p>',
        itemTpl: Ext.create(
           'Ext.XTemplate',
            '<div class="tweet-wrapper">',
                '<table>',
                    '<tr>',
                        '<td rowspan="2" width="28%" >',
//                        '<div style="padding-left: 30px;">',
//                        '   <img src="{imgUrl}" width="140" height="130" /></div>',
                        '</td>',
                        '<td>',
                        '   <div class="tweet">',

                        '       <h3>Transaction ID: {transactionId} , Point: {updatedPoint} pts , Action: {action}</h3>',
                        '       <h3>Status: {status}, Transaction By: {fullName} , Transaction Date: {createDateTime}</h3>',

                        '   </div>',
                        '</td>',
                    '</tr>',
                '</table>',
            '</div>'

        ),

         listeners: {
            updatedata: function (me, newData, eOpts ) {
                alert(newData)
            }
        },

    },

}); 
```

控制器.js

```
 onTransactionStatusChange:  function (selectField, value) {

                var sto = Ext.getCmp('transactionlist').getStore();

                sto.removeAll();
                sto.sync()

             var thelist = this.getTransactionlist();
              thelist.setStore(sto);

                sto.load({
                    params:{
                        filterType : value,
                        sessionId :'1',
                        merchant_bbID:'merchant1',
                        page:'1',
                        start:'0',
                        limit:'5'

                    }

            });

    }, 
```

现在我面临一个问题。

假设在**活动** 列表中，当前页面是第 2 页，它显示**不再加载记录** 。但是当我更改为**删除**列表时，该列表也显示**no more record loaded**。从下拉列表中选择值时如何重置分页

# javascript - 在第一次页面加载而不是在 javascript 中的页面刷新时运行一个函数

> ID：16012800
> 
> 赞同：6
> 
> 时间：2013-04-15T10:20:54.013
> 
> 标签：javascript

我希望一个函数只在第一个页面加载时执行，而不是在页面刷新时执行。

例如，当用户单击提交按钮或其他页面刷新时，它不应该执行。

我可以通过使用该属性在 .net 中避免它`ispostback`，但是如何在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:34:19.823

因此，您只想捕获第一页视图。它也被称为[独特的页面视图](http://support.google.com/analytics/answer/1257084?hl=en#pageviews_vs_unique_views)。然后是页面浏览量，在每次页面重新加载时都会增加。

第一个应该被跟踪管理访问的会话（例如使用 cookie）。第一次访问该页面时，会设置一个 cookie 并递增计数器。如果 cookie 已设置，则再次访问该页面，则计数器不会增加。*除非*cookie 已被删除并且用户已更改浏览器。

第二个将在每次页面刷新时一遍又一遍地递增。通过 javascript 轻松实现。要以编程方式管理页面刷新状态，我建议您使用[这个答案](https://stackoverflow.com/a/11793636/1083946)。要动态管理脚本的执行，我建议您使用[ClientScriptManager](http://msdn.microsoft.com/en-us/library/0skaxdwf.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:30:06.010

由于您使用 asp 并检查回发是否适合您，因此只需渲染客户端标志；

在 aspx 中：

```
<script type="text/javascript">window.ispostback = <%= Page.IsPostBack %>;</script> 
```

在客户端脚本中：

```
if (!window.ispostback) {
   // do stuff
}; 
```

# python - BaseHTTPServer Python 和 xmlhttprequest 授权

> ID：16012804
> 
> 赞同：1
> 
> 时间：2013-04-15T10:21:02.243
> 
> 标签：python, xmlhttprequest, authorization

对不起，我会说一点英语。我有一个js代码

```
url = '/auth'
var http_request = window.XDomainRequest || window.XMLHttpRequest;
http_request = new http_request;
http_request.open( "post", url, true, 'jack', 'pass_jack' );
http_request.send(); 
```

和 python BaseHTTPServer

```
def do_POST(self):
    if self.path == '/auth': 
```

我如何在python中检查用户名和密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:04:59.497

`XMLHttpRequest`设置`Authentication`标题，您需要解析该标题：

```
auth = self.headers['Authentication'] 
```

有关用户代理如何通过该标头与服务器交互的详细信息，请参阅[RFC 2617 （HTTP 身份验证：基本和摘要式访问身份验证）。](https://www.rfc-editor.org/rfc/rfc2617)

# c# - 数据库图表示

> ID：16012805
> 
> 赞同：0
> 
> 时间：2013-04-15T10:21:04.273
> 
> 标签：c#, database, diagram

这是我在这里的第一篇文章，对这个社区感觉很好。

我实际上是使用 C# 的 .NET 新手。我的任务是构建一个分析 sql server 数据库的桌面应用程序。我使用 Sql Server 2008。

在我的应用程序中，我需要提供一种工具来显示/表示数据库图（如 Sql Server 2008 中的数据库图表示）。

我想知道是否有一些库/组件可以满足应用程序的需求？

# javascript - 聊天应用程序好友存在状态视图刷新响应设计？

> ID：16012807
> 
> 赞同：1
> 
> 时间：2013-04-15T10:21:06.377
> 
> 标签：javascript, html, xhtml

`div`在带有自定义s的表格单元格中显示朋友存在状态的优化方式是什么？显示顺序应为*在线*朋友，然后*离线*朋友按字母顺序排序。

一种粗略的方法是一旦浏览器接收到基于排序数据结构的服务器响应，就发送一个 ajax 请求并刷新/重绘整个朋友表（页面的其余部分除外）。但我认为也应该有一些其他更好的优化方式，可以针对特定的 div，重新排列它们或其他方式。对此方向的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:42:59.400

> 在带有自定义 div 的表格单元格中显示朋友状态的优化方式是什么？

如果你想显示好友*列表*，为什么不使用`UL`/`LI`元素而不是无意义的`DIV`？

> 显示顺序应为在线朋友，然后离线朋友按字母顺序排序。

`appendChild`好吧，您可以使用/`insertBefore`或类似（或 jQuery 的`append`/ fe）重新排列现有的 DOM 元素`prepend`——这将在将元素插入目标位置之前自动从其当前父节点中删除元素。

因此，将元素从 on 元素重新分配`#online`到`#offline`将很简单——但由于您也需要字母顺序，因此您必须事先确定要在之前/之后插入的元素的位置。

但是如果这些列表不会变得*太大*，那么我想我宁愿避免这种情况，而是用从服务器接收到的新（排序）数据替换整个列表......因为我不确定是否循环通过另一个找出正确排序的插入位置的元素实际上比让浏览器一次性重建整个内容要便宜。

# salesforce - Salesforce/Apex - 保存复选框动态数量的值

> ID：16012808
> 
> 赞同：1
> 
> 时间：2013-04-15T10:21:15.130
> 
> 标签：salesforce, apex-code, visualforce

我目前在联系人记录中嵌入了一个 Visualforce 页面，该页面显示所有活动的活动，并带有一个复选框，指示联系人是否是活动的成员（如果选中，则联系人是成员）。我还有一个命令按钮来保存更改。visualforce 代码是使用**apex:repeat**生成的，如下所示：

```
<apex:repeat value="{!campaignWrappers}" var="cm">
  <div class="MailingRow">
     <apex:outputText styleClass="CampaignLabel" value="{!cm.c.Name}" ></apex:outputText>
     <apex:inputCheckbox styleClass="CampaignCheck" value="{!cm.selected}" />
  </div>
</apex:重复>
```

我的问题是，将复选框值传递给控制器​​的最佳方法是什么？理想情况下，我只想传递已更改的复选框，传递已从选中变为未选中的列表以及包含已从未选中变为选中的复选框的第二个列表。然后我可以插入和删除这些列表。

这是应该在复选框上使用 actionSupport 标签的情况吗？

```
<apex:actionSupport event="onChange" action="{!updateChangeList}" />
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T14:37:27.107

您可以使用联系人对象的 Wrapper 类来存储联系人的当前和新状态，以检查联系人是否是活动的成员。

```
public class ContactWrapper 
{                 
 public Boolean checked{ get; set; }            
 public Contact con { get; set;}                     

 public AccountSKUWrapper()
 {                
   con = new Contact();                
   checked = false;            
 }                     

 public ContactWrapper(Contact c)
 {                
   con= c;                
   checked = c.selected;            
 } 
```

}

使用**选定**的字段，我们可以识别联系人是否是 Campaign 的成员，并且包装器中的**检查**变量有助于识别 VF 页面中给出的输入。创建 ContactWrapper 列表并使用重载的构造函数“ContactWrapper(Contact c)”初始化每个 ContactWrapper 对象。

```
 <apex:repeat value="<ContactWrapper Object>" var="cm">
  <div class="MailingRow">
     <apex:outputText styleClass="CampaignLabel" value="{!cm.con.Name}" ></apex:outputText>
     <apex:inputCheckbox styleClass="CampaignCheck" value="{!cm.checked}" />
  </div>
</apex:repeat> 
```

在单击保存按钮期间，请执行以下步骤： 检查选中变量的值与所选字段不同。

```
Create 2 list **CHANGEDCONTACTLIST** and **UNCHANGEDCONTACTLIST** and then Loop through the list of ContactWrapper

begin loop
1.If checked differs then load **CHANGEDCONTACTLIST** with Contact Wrapper object as this need to be updated in Contact object; in order to update selected field of contact. 

2.Else load **UNCHANGEDCONTACTLIST**.
end loop 
```

最终使用这两个列表 **CHANGEDCONTACTLIST**和**UNCHANGEDCONTACTLIST**。您可以插入或删除 dml。

我相信这里没有使用 ActionSupport 标签，因为所有需要的值都将使用 ContactWrapper 列表的 getter 和 setter 来使用（读/写）。

```
public List<ContactWrapper> wrapper {get;set;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T11:15:23.143

整个集合将被发送回服务器（所有复选框的状态）。这在 Salesforce 和任何其他与 Web 相关的语言之间并没有太大的不同（例如，请参阅[从多个复选框中获取 $_POST](https://stackoverflow.com/questions/4997252/get-post-from-multiple-checkboxes)。主要区别在于通常您会使用名称以结尾的变量，`[]`而 SF 将使用带有递增数字的唯一名称名字）。

如果您真的想构建 2 个列表 - 也许是添加/删除 2 个隐藏文本字段内容的一些 javascript 魔术......但这有点混乱。

当表单将被提交并且您`updateChangeList()`被调用时，您可以迭代 CampaignWrappers 的集合并与之前的值进行比较。要么将先前的值存储在包装器中的另外 1 个变量中，并且不将其公开给用户，否则您仍然会根据 Campaign 中的内容知道：

```
Set<Id> campaignsToBeAddedTo = new Set<Id>();
Set<Id> campaignsToBeRemovedFrom = new Set<Id>();

for(CampaignMember cm : campaignWrappers){
   if(cm.selected && cm.c.CampaignMembers.isEmpty(){
      // is ticket but wasn't a member before
      campaignsToBeAddedTo.add(cm.c.Id);
   } else if (!cm.selected && !cm.c.CampaignMembers.isEmpty()){
      // not ticked but used to be a member
      campaignsToBeRemovedFrom.add(cm.c.Id);
   }
} 
```

您甚至可以对其进行一些优化（例如将 isEmpty() 检查放入辅助变量）。或者阅读可能有“副作用”的 setter 方法。毕竟，当反序列化表单数据时，无论如何都会为您运行这样的循环。[http://blogs.developerforce.com/developer-relations/2008/06/property-access.html](http://blogs.developerforce.com/developer-relations/2008/06/property-access.html)是一个不错的起点（我知道这很古老。基本上在这篇博文之前，我们必须为我们想要`Boolean getSelected()`的`void setSelected(Boolan b)`每个变量编写在 VF 中使用）。

最后但并非最不重要的 -[页面执行顺序](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_lifecycle.htm)的链接。

# python - 在 Django 中服务多个域

> ID：16012809
> 
> 赞同：0
> 
> 时间：2013-04-15T10:21:22.270
> 
> 标签：python, django

我目前有 2 个域，我想通过使用 Apache（和 wsgi）共享一个 Django 项目我使用了我在这里找到的以下指南：[http ://www.fir3net.com/Django/how-服务-多个域-from-within-a-single-django-project.html](http://www.fir3net.com/Django/how-to-serve-multiple-domains-from-within-a-single-django-project.html)

注意：域 1 没有使用数据库，但域 2 使用了。我目前在主 settings.py 文件中配置了一个数据库。

我首先遇到的问题是找到了 domain1 的模板，但对于 domain2 却找不到它。经过一些故障排除后，我将 TEMPLATE_DIRs 添加到 domain2_settings.py 文件中。尽管我预计这会被主 settings.py 文件拾取。现在我收到一个错误，即 domain2 无法找到数据库，并且从调试输出中显示没有分配数据库。即使我希望从主 settings.py 文件中提取数据库设置。

这是我的布局的摘要：

```
/opt/
`-- django
    |
    `-- myproject
        |-- __init__.py
        |-- domain1
        |   |-- __init__.py
        |   |-- domain1.wsgi
        |   |-- domain1_settings.py
        |   |-- domain1_urls.py
        |   |-- models.py
        |   |-- tests.py
        |   |-- views.py
        |-- domain2
        |   |-- __init__.py
        |   |-- domain2.wsgi
        |   |-- domain2_settings.py
        |   |-- domain2_urls.py
        |   |-- models.py
        |   |-- tests.py
        |   |-- views.py
        |-- manage.py
        |-- settings.py
        |-- templates
        |   |-- domain1-base.html
        |   |-- domain2-base.html
        `-- urls.py 
```

**设置.py**

```
[root@william myproject]# cat settings.py
# Django settings for myproject project.

DEBUG = False
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'postgresql', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '123',                      # Or path to database file if using sqlite3.
        'USER': '123',                      # Not used with sqlite3.
        'PASSWORD': '##########',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': ''                      # Set to empty string for default. Not used with sqlite3.
    },
} 
```

**domain2_settings.py**

```
[root@william myproject]#  cat domain2/domain2_settings.py
from settings import *

DEBUG = True
TEMPLATE_DEBUG = DEBUG

SITE_ID = 2

ROOT_URLCONF = 'domain2.domain2_urls'

TEMPLATE_DIRS = (
        "/opt/django/myproject/templates"
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'domain2',
) 
```

我是否以正确的方式进行此操作（即多个域、单个项目、apache 和使用单个数据库）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:05:59.597

问题是我在 domain2 文件夹中仍然有一个 settings.py 和 urls.py 文件。一旦我删除了这些问题就解决了。

# java - Jsoup - 按单元格条目搜索表格，返回下一个单元格数据

> ID：16012811
> 
> 赞同：0
> 
> 时间：2013-04-15T10:21:33.787
> 
> 标签：java, html, jsoup

我有以下要解析的嵌入式 html：

```
<table class="repeated table name" width="100%"
    <tbody>
        <tr class="label">
          <td>Search Item</td>
        </tr>
        <tr class="row1">
           <td>Return Item </td>
        </tr>
     </tbody>
 </table> 
```

Search Item 的条目是一致的，所以我想搜索这个条目，但是我想返回下一行中的条目，Return Item。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T08:14:27.323

一种方法是：

```
Element els = doc.select("td:containsOwn(search item)").parents().first();
Element nextSibling = els.nextElementSibling();

System.out.println(nextSibling.select("td").text()); 
```

我假设存在一种更优雅的方法，但这可以完成工作。

# javascript - GWT 生产崩溃

> ID：16012812
> 
> 赞同：0
> 
> 时间：2013-04-15T10:21:33.807
> 
> 标签：javascript, debugging, gwt

我正在开发一个 GWT-GAE Java 交易应用程序，客户在其中下订单，在服务器上处理，然后通知客户（通过 AppEngine 频道）更新。我的问题是我遇到了不规则的客户端崩溃 - 交易 5 到 10 分钟后，客户端可能会崩溃（在 Chrome 中我看到此页面：chrome://crash/）。我已经在生产中测试了这一点，最多有 10 个同时交易者（在不同的机器上）交易 30 分钟，我通常会遇到 4 或 5 个独立的客户端崩溃。由于连接较少或交易活动较少，我看不到崩溃。

我认为问题可能是 ConcurrentModificationExceptions，所以我尝试 1) 使用带有 Scheduler.get().scheduleDeferred 的延迟命令，以及 2) 实现消息队列，但这些似乎都没有帮助。

我的问题是 - 我该如何调试？在开发过程中，在出现内存错误之前我可以同时建立的连接数（2 或 3）是有限的，所以我无法复制我的问题。有没有办法查看导致这些崩溃的生产中引发了哪些异常？

我查看了[GWT 日志记录机制](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)- 我可以在服务器上记录选项卡崩溃吗？

谢谢！

## 更新

我已经设置了 gwt-log，但是当我重现我的客户端崩溃时，它似乎没有记录它。它记录各种其他信息，但客户端崩溃时没有错误。在客户端上，我有一个围绕频道消息的 try-catch：

```
try {
  SerializationStreamReader reader = ((SerializationStreamFactory)rpcService).createStreamReader(encodedData);
  Message message = (Message) reader.readObject();
  Log.info(name + ": " + message.toString());
  processMessage(message);
} catch (Exception e) {
  Log.fatal(name + ": error encoding " + encodedData);
} 
```

当客户端崩溃时，我是否应该在服务器日志中看到某些内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:01:45.043

使用`dev-mode`你很快就会遇到大型应用程序或使用大量 jsni 的应用程序的内存和性能问题。这是由于开发模式的架构需要IDE和浏览器插件之间的复杂通信过程，以及JVM和JS之间频繁的执行上下文切换。

要调试复杂的东西，最好使用[super-dev 模式](https://developers.google.com/web-toolkit/articles/superdevmode)，它只会在你的浏览器中执行 javascript，并提供了一种很好的方式（[source-maps](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)）在你的浏览器中调试应用程序，但使用你的 java 源代码。

请注意，超级开发模式设置有点复杂，特别是当您需要与后端通信时，重新加载过程有点慢，并且请注意您会错过您的 IDE java 调试控制台。但值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:45:45.727

是的，您可以使用[Remote_Logging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging#Remote_Logging)

还有[https://code.google.com/p/gwt-log/](https://code.google.com/p/gwt-log/)

这为您提供了更多选择，例如

*   自定义网址

    [https://code.google.com/p/gwt-log/wiki/GettingStarted#Override_the_default_URL_which_the_RemoteLogger_connects_to](https://code.google.com/p/gwt-log/wiki/GettingStarted#Override_the_default_URL_which_the_RemoteLogger_connects_to)

*   格式化

    [https://code.google.com/p/gwt-log/wiki/GettingStarted#Server_side_log_messages](https://code.google.com/p/gwt-log/wiki/GettingStarted#Server_side_log_messages)

    - - - - - - - 编辑 - - - - - - -

    你试过 UncaughtExceptionHandler 吗？

    // 安装一个会产生`FATAL`日志消息的 UncaughtExceptionHandler

    ```
    Log.setUncaughtExceptionHandler(); 
    ```

# php - jquery 不想要 json_encode

> ID：16012814
> 
> 赞同：0
> 
> 时间：2013-04-15T10:21:34.367
> 
> 标签：php, jquery, ajax, json

我有 jquery 不想要我的 json 的问题。

这是我的jQuery代码：

```
 $.ajax({
            type: "POST",
            url: "js/resize.php",
            data: data,
            success: function(data) {       

/* works
          var data = [
                    {"og_src":"img\/base\/logo.png","src":"img\/base\/das-logo.png"},
                    {"og_src":"\/img\/studio\/lounge-2.JPG","src":"\/img\/studio\/lounge-2.JPG"},
                    {"og_src":"\/img\/studio\/desk.JPG","src":"\/img\/studio\/desk.JPG"}
                    ];

*/

    // console.log(data);
                $.each(data, function(key, image){
                 console.log(image);
                    var el = $("img[rel='"+image.og_src+"']");
                    ... 
```

如果我将发送的数据复制到我的脚本并制作一个 var data = ... 它工作正常。

php 数据由简单的 echo json_encode($stack);

如果我制作一个 php-echo 之类的

```
echo '[{"og_src":"img\/base\/logo.png","src":"img\/base\/das-logo.png"}, {"og_src":"\/img\/studio\/lounge-2.JPG","src":"\/img\/studio\/lounge-2.JPG"}, {"og_src":"\/img\/studio\/desk.JPG","src":"\/img\/studio\/desk.JPG"}]'; 
```

它不起作用以太。

所有文件都在 UTF-8 上。

Console.log 显示了 console.log(image) 的结果；作为一个字母；怎么了，我现在尝试了几个小时，我非常绝望。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:27:45.177

看起来您的 JSON 被解释为 HTML（因此当您运行`each`它时，它会遍历 HTML 源代码的每个字符）。

确保您的 PHP 脚本说它正在输出 JSON（PHP 默认为 HTML）。

```
header("Content-Type: application/json"); 
```

您还可以将`dataType: "json"`选项传递给，`ajax`以便 jQuery 库尝试将 HTTP 请求的结果解析为 JSON，无论服务器说什么。不过，在 HTTP 响应中包含正确的信息是一种更简洁的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:29:00.673

您应该使用 dataType 属性告诉 jQuery 返回的数据应该是“json”：

```
$.ajax({
        type: "POST",
        url: "js/resize.php",
        data: data,
        dataType: 'json',
        success: function(data) { 
    }
}); 
```

# jquery - jquery ajax 200 OK JSON.ParseError

> ID：16012815
> 
> 赞同：5
> 
> 时间：2013-04-15T10:21:41.727
> 
> 标签：jquery, webmethod

我有一个控件，它有一个文本框，当它的内容发生变化时，它会欺骗这个 javascript 函数：

`page`参数是`document.URL`因为控件没有附加的 .asxc 页面并且`fieldValue`是文本框的值。

```
function UpdateFieldsOnListSelection(page, fieldValue) {
    $.ajax({
        type: "POST",
        url: page + "/IsSelectedListPictureLibrary",
        data: { "libraryInfo": fieldValue },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            alert("Success!");
        },
        error: function (jqXHR, textStatus, errorThrown) {
            alert("jqXHR: " + jqXHR.status + "\ntextStatus: " + textStatus + "\nerrorThrown: " + errorThrown);
        }
    });
}; 
```

它不断抛出这个错误：

> jqXHR：200
> textStatus：parsererror
> errorThrown：SyntaxError：JSON.parse：意外字符

代码`IsSelectedListPictureLibrary`：

```
[WebMethod]
public static bool IsSelectedListPictureLibrary(string libraryInfo)
{
    if (string.IsNullOrEmpty(libraryInfo)) return false;

    var common = new Utility();
    var storedLibraryInfo = common.GetStoredLibraryInfo(libraryInfo);

    if (storedLibraryInfo == null) return false;

    var web = SPContext.Current.Site.OpenWeb(storedLibraryInfo.WebId);
    var spList = web.Lists[storedLibraryInfo.LibraryId];

    if (spList.BaseTemplate == SPListTemplateType.PictureLibrary)
    {
        web.Dispose();
        return true;
    }

    web.Dispose();
    return false;
} 
```

我尝试将`json`ajax 更改为`jsonp`，但发生了同样的错误。
我尝试更改`data`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T10:40:47.803

尝试从 Ajax 参数中移除`contentType`和让它们被自动识别`dataType`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-24T13:19:11.483

AJAX 的“发布”命令也有同样的问题。

发送了一个 JSON 发布请求，得到了 200 OK 响应，但 textStatus`parseerror`和 errorThrown 是`SyntaxError: JSON.parse: unexpected character`。

这是我的 JS 代码：

```
$.post(url, JSON.stringify(reportVarsJson), function(response) {}, 'json')
.fail(function(jqXHR, textStatus, errorThrown) {
    alert('Error saving report request variables:\n\n' + jqXHR.responseText);
}); 
```

问题原来是我的服务器视图（Django）返回了一个空响应，它不是 JSON 响应。

我更改了我的服务器视图以返回一个空的 json 响应，并且一切正常！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T10:30:21.720

不确定[WebMethod]，但似乎问题在那里，并且与该方法的输出有关。它必须是格式良好的 JSON 才能使 ajax 方法正常工作。所以我要做的是在一个单独的窗口中检查调用以查看响应并使用[http://jsonlint.com/](http://jsonlint.com/)之类的东西来确保它格式正确。

# sql - PostgreSQL 分组错误

> ID：16012818
> 
> 赞同：4
> 
> 时间：2013-04-15T10:21:50.053
> 
> 标签：sql, postgresql, laravel

在 PostgreSQL 上执行此查询时出现此错误：

```
SQLSTATE[42803]：分组错误：7 错误：列“posts.title”必须出现在 GROUP BY 子句中或在聚合函数中使用
第 1 行：SELECT DISTINCT posts.id, posts.* FROM "posts" GROUP BY "pos..

```

这是我的查询：

```
SELECT DISTINCT posts.id, posts.* 
FROM "posts" 
GROUP BY "posts"."id" 
ORDER BY "posts"."id" DESC 
LIMIT 20 OFFSET 0 
```

虽然当我用mysql执行它时它确实有效，但我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:23:39.563

问题是，在 PostgreSQL 中，您需要将您希望在您的选择中包含的所有列添加到您的分组依据。

所以你的陈述应该是

```
SELECT * FROM table GROUP BY column1, column2... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T10:27:10.953

尝试这个。

```
SELECT DISTINCT * FROM 
(SELECT ROW_NUMBER() OVER(PARTITION BY  "posts"."id" ORDER BY   "posts"."id") No, posts.*
 FROM "posts"  ) AS T1 WHERE T1.NO = 1
 ORDER BY "id" DESC LIMIT 20 OFFSET 0 
```

# iphone - 将数据添加到日历不起作用

> ID：16012819
> 
> 赞同：2
> 
> 时间：2013-04-15T10:21:50.870
> 
> 标签：iphone, ios, objective-c, ios6, calendar

我正在尝试使用以下代码在日历中添加会议详细信息。但是它不起作用。我总是得到错误代码（其他部分正在执行）。

```
EKEventStore *eventSotre = [[EKEventStore alloc] init];

EKEvent *event = [EKEvent eventWithEventStore:eventSotre];

event.title= @"Event Title";

NSDate *duedate = [[NSDate alloc] init];
event.startDate = duedate;
// also tried with below
// event.startDate = [[NSDate alloc] initWithTimeInterval:200 sinceDate:duedate];
event.endDate= [[NSDate alloc] initWithTimeInterval:600 sinceDate:duedate];

NSArray *arrAlarm = [NSArray arrayWithObject:[EKAlarm alarmWithAbsoluteDate:duedate]];
event.alarms= arrAlarm;

[event setCalendar:[eventSotre defaultCalendarForNewEvents]];
NSError *err;
BOOL isSuceess=[eventSotre saveEvent:event span:EKSpanThisEvent error:&err];

if(isSuceess){
    UIAlertView *alertview = [[UIAlertView alloc] initWithTitle:@"Event" message:@"Event added in calendar" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertview show];
    [alertview release];
}
else{
    UIAlertView *alertview = [[UIAlertView alloc] initWithTitle:@"Error" message:[err description] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [alertview show];
    [alertview release];
}
[eventSotre release]; 
```

知道我为什么要面对这个吗？我的代码中也有`#import <EventKit/EventKit.h>`，我也添加了相同的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:38:57.777

下面的链接解决了我的问题。

[https://stackoverflow.com/a/13451544/1066828](https://stackoverflow.com/a/13451544/1066828)

问题是我有 iOS 6。

# c# - 检查目录或子目录中是否存在文件

> ID：16012825
> 
> 赞同：-4
> 
> 时间：2013-04-15T10:22:00.727
> 
> 标签：c#, file-exists

我想检查一个文件是否存在于目录或子目录中。

```
string[] filePaths = Directory.GetFiles(padserver, "*", SearchOption.AllDirectories);
try {
    DataContainer.bestaatal = false;
    lusfilebestaat = 0;
    while (DataContainer.bestaatal == false) {
        filePaths[lusfilebestaat] = Path.GetFileName(filePaths[lusfilebestaat]);
        if (filePaths[lusfilebestaat] == bestandsnaam) {
            DataContainer.bestaatal = true;
        }
        lusfilebestaat = lusfilebestaat + 1;
    }
} 
```

这可行，但速度很慢，因为我的服务器上有很多文件。

有没有人对此有解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:24:48.997

使用`System.IO.File.Exists()`方法。请参阅[msdn](http://msdn.microsoft.com/en-au/library/system.io.file.exists.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:26:12.060

这可能会帮助你

```
internal static bool FileOrDirectoryExists(string name)
{
   return (Directory.Exists(name) || File.Exists(name))
} 
```

或者另一种方法是自己编写搜索功能，其中一个应该可以工作：

```
private bool FileExists(string rootpath, string filename)
{
    if(File.Exists(Path.Combine(rootpath, filename)))
        return true;

    foreach(string subDir in Directory.GetDirectories(rootpath, "*", SearchOption.AllDirectories))
    {
        if(File.Exists(Path.Combine(rootpath, filename)))
        return true;
    }

    return false;
}

private bool FileExistsRecursive(string rootPath, string filename)
{
    if(File.Exists(Path.Combine(rootPath, filename)))
        return true;

    foreach (string subDir in Directory.GetDirectories(rootPath))
    {
        return FileExistsRecursive(subDir, filename);
    }

    return false;
} 
```

第一个仍然首先提取所有目录名称，因此如果有很多子目录并且文件靠近顶部，则可能会很慢。

第二个是递归的，在“最坏情况”的情况下可能会更慢，但如果有许多嵌套的子目录并且文件位于顶级目录中，则速度会更快。

# symfony - PHP 已弃用：forward() 自 2.2 版以来已弃用，并将在 2.3 中删除。在 /app/bootstrap.php.cache 上线

> ID：16012828
> 
> 赞同：1
> 
> 时间：2013-04-15T10:22:05.330
> 
> 标签：symfony

这是怎么回事？

我应该用什么来代替 $this->forward()？

PHP 已弃用：forward() 自 2.2 版以来已弃用，并将在 2.3 中删除。在 /app/bootstrap.php.cache 上线...

--

我正在运行它：

```
public function onKernelException(GetResponseForExceptionEvent $event)
{

   $httpKernel = $this->container->get('http_kernel');
   $response = $httpKernel->forward('MyBundle:Default:pageAction');

   //etc. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:49:43.483

看看这个`Symfony\Bundle\FrameworkBundle\Controller`类，使用该`handle()`方法似乎是一种方法，因为他们已经弃用了框架包中的整个 httpkernal 类：

```
public function forward($controller, array $path = array(), array $query = array())
    {
        $path['_controller'] = $controller;
        $subRequest = $this->container->get('request')->duplicate($query, null, $path);

        return $this->container->get('http_kernel')->handle($subRequest, HttpKernelInterface::SUB_REQUEST);
    } 
```

有关弃用更改日志，请参见此处：

[https://github.com/symfony/FrameworkBundle/blob/master/CHANGELOG.md#220](https://github.com/symfony/FrameworkBundle/blob/master/CHANGELOG.md#220)

因此，您可以执行以下操作：

```
public function onKernelException(GetResponseForExceptionEvent $event)
{
    $subRequest = $this->container->get('request')->duplicate(array(), null, array("_controller" => 'MyBundle:Default:page'));

    $response = $this->container->get('http_kernel')->handle($subRequest, HttpKernelInterface::SUB_REQUEST);
} 
```

# javascript - 前端测试策略？

> ID：16012835
> 
> 赞同：2
> 
> 时间：2013-04-15T10:22:33.530
> 
> 标签：javascript, performance, frontend, user-experience, performance-testing

我是一名前端开发人员，正在考虑是否有针对前端的完整测试策略。由于有很多前端工具，我们每天都在使用一个。为了开发具有出色性能的丰富 UI，是否需要遵循任何特定的方法？我想到了一些应该注意的事情，比如

1.  使用精灵
2.  检查我的 JavaScript 一致性
3.  检查页面加载时间

为了构建最强大的前端，人们觉得要专注于哪些其他方面。我们如何测试它们以及正在采用的不同策略是什么。请帮我弄清楚这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:51:35.233

你试过qunit吗？

[关联](http://qunitjs.com/)

我喜欢它，因为它很容易编写您自己的测试......对于页面加载时间，您可以使用 Google chrome 的 PageSpeed 插件，它可以为您提供关于改进的很好的反馈

# javascript - 如何为页面中的所有动画添加通用回调？

> ID：16012836
> 
> 赞同：1
> 
> 时间：2013-04-15T10:22:33.840
> 
> 标签：javascript, jquery, animation, callback

我目前正在开发一个包含许多动画的网页。

代码示例

```
<div id="a1">
    <img src="aaa/Test1.png" style="display:none;" id="img1"/>
</div>
<div id="a2">
    <img src="aaa/Test2.png" style="display:none;" id="img2"/>
</div>
<div id="a3">
    <img src="aaa/Test3.png" style="display:none;" id="img3"/>
</div>
<script>        
    $("#img1").fadeIn(3000);
    $("#img2").fadeIn(3000);
    $("#img3").animate({
             'marginLeft' : "0px"
        }, 2000);
</script> 
```

我想添加在每个动画结束后调用的通用回调。我不想这样写

```
$("#img1").fadeIn(3000,function(){callback();});
$("#img2").fadeIn(3000,function(){callback();});
$("#img3").animate({
   'marginLeft' : "0px"
}, 2000,function(){callback();}); 
```

我只想将回调作为一个整体添加（例如为 jquery $('div').css("height","100px"); 中的所有 div 赋予样式）

有没有这样的代码可以回调页面中的所有动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:23:50.920

你真的需要每个都绑定`img`吗？如果绑定属性相同，最好给它们一个类并以它为目标。

反正：

```
$("#img1").fadeIn(3000,callback); //notice the use of the function name without trailing "()"
$("#img2").fadeIn(3000,callback);

function callback() {
//you can use $(this) here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:34:55.140

ID 用于使项目唯一的标识符。使用类

更改所有图像标签并添加类

```
<img src="aaa/Test1.png" style="display:none;" class="my_img"/> 
```

然后在jquery中使用

```
$(".my_img").fadeIn(3000,function(){callback();}); 
```

或任何你想要的。如果您想将其绑定到 div 内所有您可以使用的 my_img 类的所有图像，此代码会将 fadeIn 绑定到所有具有“my_img”类的项目

```
$("div img.my_img").fadeIn(3000,function(){callback();}); 
```

# ios - UIActionsheet Picker 中的日期和时间

> ID：16012838
> 
> 赞同：1
> 
> 时间：2013-04-15T10:22:40.823
> 
> 标签：ios, objective-c, ipad, uiactionsheet, actionsheetpicker

嗨，我有一个要求，我需要在仅限 iPad 的应用程序的 uiactionsheet 中显示日期和时间。

我的 google /sof 搜索将我带到以下资源 [https://github.com/TimCinel/ActionSheetPicker](https://github.com/TimCinel/ActionSheetPicker)

```
ActionSheetDatePicker *actionSheetPicker = [[ActionSheetDatePicker alloc] initWithTitle:@"" datePickerMode:UIDatePickerModeDateAndTime selectedDate:[NSDate date] target:self action:@selector(onDateSelected:element:) origin:sender];
actionSheetPicker.hideCancel = YES;
[actionSheetPicker showActionSheetPicker]; 
```

它很好用，除了我的生活我找不到可以设置最小、最大日期和间隔的地方。请如果有人使用过这可能会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:32:02.087

在这里，我在 iPhone/iPod 上使用 Actionsheet + UIDatePicker，但在 iPAD 上使用 POPOVERCONTROLLER + UIDATEPICKER。

```
- (IBAction)showAction:(id)sender
{

aac = [[UIActionSheet alloc] initWithTitle:@""
                                                 delegate:self
                                        cancelButtonTitle:nil
                                   destructiveButtonTitle:nil
                                        otherButtonTitles:nil];

self.dtPicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];

UIToolbar *pickerDateToolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
pickerDateToolbar.barStyle = UIBarStyleBlackOpaque;
[pickerDateToolbar sizeToFit];

NSMutableArray *barItems = [[NSMutableArray alloc] init];

UIBarButtonItem *cancelBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(DatePickerCancelClick:)];
[barItems addObject:cancelBtn];

UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DatePickerDoneClick:)];

[barItems addObject:doneBtn];

[pickerDateToolbar setItems:barItems animated:NO];

if (IS_IPHONE) {

    [aac addSubview:pickerDateToolbar];
    [aac addSubview:dtPicker];
    [self.view addSubview:aac];
}
else {
    UIView *view = [[UIView alloc] init];

    [view addSubview:pickerDateToolbar];
    [view addSubview:dtPicker];

    UIViewController *vc = [[UIViewController alloc] init];
    [vc setView:view];
    [vc setContentSizeForViewInPopover:CGSizeMake(320, 260)];

    popover = [[UIPopoverController alloc] initWithContentViewController:vc];
    popover.delegate = self;

    [popover presentPopoverFromRect:myButton.bounds inView:myButton
           permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

}
} 
```

//希望你明白了。谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:25:08.293

```
 UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Date Picker" 
                                                  delegate:self
                                         cancelButtonTitle:@"Cancel"
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:nil];

    // Add the picker
    UIDatePicker *pickerView = [[UIDatePicker alloc] init];
    pickerView.datePickerMode = UIDatePickerModeDateAndTime;
    [menu addSubview:pickerView];
    [menu showInView:self.view];    
    [menu setBounds:CGRectMake(0,0,320, 300)];

    CGRect pickerRect = pickerView.bounds;
    pickerRect.origin.y = -100;
    pickerView.bounds = pickerRect; 
```

上面的代码对于添加`UIDatePicker`到`UIActionSheet`. 在上面的代码中，您可以使用显示日期和时间`UIDatePicker`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T11:35:16.480

[根据 ibiren在 UIPopover](https://stackoverflow.com/questions/7341835/uidatepicker-in-uipopover) thread中 UIDatePicker 的建议，我最终使用了这段代码。

```
UIViewController* popoverContent = [[UIViewController alloc] init]; //ViewController

UIView *popoverView = [[UIView alloc] init];   //view
popoverView.backgroundColor = [UIColor blackColor];

UIDatePicker *datePicker=[[UIDatePicker alloc]init];//Date picker
datePicker.frame=CGRectMake(0,44,320, 216);
datePicker.datePickerMode = UIDatePickerModeDateAndTime;
[datePicker setMinuteInterval:5];
[datePicker setTag:10];
[datePicker addTarget:self action:@selector(Result) forControlEvents:UIControlEventValueChanged];
[popoverView addSubview:datePicker];

popoverContent.view = popoverView;
popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
popoverController.delegate=self;
[popoverContent release];

[popoverController setPopoverContentSize:CGSizeMake(320, 264) animated:NO];
[popoverController presentPopoverFromRect:tempButton.frame inView:self.view     permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
//tempButton.frame where you need you can put that frame 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-08-27T12:59:16.787

我知道这个答案来晚了。但是对于任何想使用这个库的人来说……新版本的 ActionSheetDatePicker 具有以下属性：

```
NSDate *minimumDate;
NSInteger minuteInterval;
NSCalendar *calendar;
NSTimeZone *timeZone;
NSLocale *locale; 
```

允许您根据需要修改 DatePicker 的基本选项。

# angularjs - Angular 资源，自定义 GET 对象

> ID：16012843
> 
> 赞同：1
> 
> 时间：2013-04-15T10:22:53.467
> 
> 标签：angularjs

我正在使用角度资源，

我想用对象本身的一些计算属性来扩展工厂返回的任何对象。

如何向 ngResource 工厂添加 post get 步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T10:41:23.387

你可以像这样扩展原型：

```
angular.factory('Person', ['$resource', function($resource) {
  var Person = $resource(...);

  ...

  Person.prototype.computedProp = this.prop1 + this.prop2;

  return Person;

}]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T19:40:07.460

我还没有测试兼容性，但无论如何我想分享我是如何做到这一点的，以便在我的视图代码中保持 Angular 的风格。

这个想法是 REST 调用给了我一个以 KM 为单位的距离和一个持续时间（以 moment.js 可解析的格式）。我想要实现的是计算属性，它会产生以公里/小时为单位的平均速度。

```
.factory('Times', function ($resource) {
  var Times = $resource("api/users/:userid/times/:id", {});
  Times.prototype.__defineGetter__("average_speed", function () {
    return this.distance / moment.duration(this.duration).asHours();
  });
  return Times;
}) 
```

# javascript - 如何调用项目中未定义的函数？

> ID：16012845
> 
> 赞同：3
> 
> 时间：2013-04-15T10:22:54.670
> 
> 标签：javascript, interop, typescript

假设您有以下内容：

```
class Foo {
  public bar(): void { baz(); }
} 
```

`baz`加载到此页面的 JavaScript 代码中存在但在此项目中不存在的函数在哪里。我如何提示 TypeScript 编译器该函数将在那里？

（现在回答我自己的问题还为时过早，但我已经弄清楚了，或者看起来是这样）：

```
declare function baz():void; 
```

在类定义之前应该做的伎俩。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T10:37:14.253

使用环境声明：

```
declare var baz: any; 
```

这将告诉 Typescript`baz`存在于某处。您还可以添加参数信息和返回类型以获得 IDE 帮助

```
 declare var baz: (params: string) => string; 
```

# python - 根据先前的字段值选择过滤 Django 管理字段中的值列表

> ID：16012859
> 
> 赞同：1
> 
> 时间：2013-04-15T10:23:44.487
> 
> 标签：python, django, admin

在我拥有的 Django 应用程序中，我正在使用这些模型：

*   机构
*   客户
*   轮廓

一个`Client`可以只有一个`Agency`，一个`Agency`可以有很多`Clients`。

当我编辑/创建一个时，`Profile`我首先选择`Agency`，然后我可以选择多个`Clients`（这没关系）。

我的问题是，在该`Clients`领域我看到所有存在`Clients`，而我只想看到`Clients`与选定的相关`Agency`。我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:02:53.740

我认为该应用程序可以提供帮助（处理链式模型字段的 Django 应用程序）- [https://github.com/digi604/django-smart-selects](https://github.com/digi604/django-smart-selects)

pypi 中的链接 - [https://pypi.python.org/pypi/django-smart-selects/](https://pypi.python.org/pypi/django-smart-selects/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T11:00:45.233

如果您正在编辑配置文件，您可以使用“formfield_for_manytomany”为客户字段编写过滤器[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany)或“formfield_for_choice_field”。

但是对于创建配置文件，只能使用 javascript afaik 更改客户端列表。这在管理表单上可能是一件棘手的事情。

为什么您不只选择客户并省略代理机构的表单域？之后您可以使用验证器验证选择。

# c# - 将非托管数据映射到 .NET 中的托管结构

> ID：16012864
> 
> 赞同：7
> 
> 时间：2013-04-15T10:24:05.930
> 
> 标签：c#, .net, winapi, pinvoke, unmanaged

我花了很多时间处理非托管代码和 .NET 中的平台调用。下面的代码说明了一些让我感到困惑的事情，即非托管数据如何映射到 .NET 中的托管对象。

对于这个例子，我将使用[RECT](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd162897%28v=vs.85%29.aspx)结构：

**C++ RECT 实现（非托管 Win32 API）**

```
typedef struct _RECT {
  LONG left;
  LONG top;
  LONG right;
  LONG bottom;
} RECT, *PRECT; 
```

**C# RECT 实现（托管 .NET/C#）**

```
[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int left, top, right, bottom;
} 
```

好的，所以我的 C# 等效项应该可以工作，对吧？我的意思是，所有变量都与 C++ 结构的顺序相同，并且使用相同的变量名。

我的假设`LayoutKind.Sequential`意味着非托管数据按照它出现在 C++ 结构中的相同顺序映射到托管对象。即数据将被映射，从左开始，然后是顶部，然后是右，然后是底部。

在此基础上，我应该能够修改我的 C# 结构......

**C# RECT 实现（更简洁）**

```
[StructLayout(LayoutKind.Sequential)]
public struct Rect //I've started by giving it a .NET compliant name
{
    private int _left, _top, _right, _bottom; // variables are no longer directly accessible.

    /* I can now access the coordinates via properties */
    public Int32 Left
    {
        get { return _left; }
        set { this._left = value; }
    }

    public Int32 Top
    {
        get { return _top; }
        set { this._top = value; }
    }

    public Int32 Right
    {
        get { return _right; }
        set { this._right = value; }
    }

    public Int32 Bottom
    {
        get { return _bottom; }
        set { this._bottom = value; }
    }
} 
```

那么如果变量以错误的顺序声明会发生什么？大概这会破坏坐标，因为它们将不再映射到正确的东西？

```
public struct RECT
{
    public int top, right, bottom, left;
} 
```

猜测一下，这将像这样映射：

> 上=左
> 
> 右=上
> 
> 底部=右
> 
> 左=底部

所以我的问题很简单，我的假设是否正确，我可以根据每个变量的访问说明符甚至变量名来修改托管结构，但我不能改变变量的顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T10:31:57.677

如果你真的想改变你的成员变量的顺序，你可以使用[`FieldOffsetAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.fieldoffsetattribute.aspx). 只是让它的可读性降低了一点。

您还需要设置 your[`StructLayout`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)以[`LayoutKind.Explicit`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.layoutkind.aspx)表明您正在自己设置偏移量。

例子：

```
[StructLayout(LayoutKind.Explicit)]
public struct RECT
{
    [FieldOffset(4)]  public int top;
    [FieldOffset(8)]  public int right;
    [FieldOffset(12)] public int bottom;
    [FieldOffset(0)]  public int left;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T10:34:55.223

是的，看来你的想法还可以。`StructLayout(LayoutKind.Sequential)`是应用于 C# 的默认值，`struct`因此您甚至不需要这样做。但是，如果您想拥有不同的字段顺序，您可以通过使用`StructLayout(LayoutKind.Explicite)`然后将`FieldOffset`属性应用于每个字段来做到这一点 - 这是更好的方法，因为您明确了隐含的内容，而不再依赖于可以轻松更改的内容像字段定义顺序。

看看 MSDN 示例：[`StructLayoutAttribute Class`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.structlayoutattribute.aspx)它应该更清楚。另外 - 在 C++ 和 C# 中创建示例应用程序并使用它来掌握它 - 这将使您受益匪浅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:36:46.553

`struct`C#中 a 的默认映射是`LayoutKind.Sequential`. 这可以防止编译器通过重新排列变量来优化内存并确保正确的映射。

但是，您可以使用`LayoutKind.Explicit`, 和告诉编译器变量的不同顺序`FieldOffsetAttribute`：

```
[StructLayout(LayoutKind.Explicit)]
public struct Rect
{
    [FieldOffset(8)]
    public int right;

    [FieldOffset(4)]
    public int top;

    [FieldOffset(0)]
    public int left;

    [FieldOffset(12)]
    public int bottom;
} 
```

的值`FieldOffsetAttribute`指示变量开始的结构中的字节位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:11:27.820

> 我的假设是否正确，我可以根据每个变量的访问说明符甚至变量名称来修改托管结构，但我不能改变变量的顺序？

对，那是正确的。访问说明符和变量名都不会影响结构的布局方式。

# r - 在 R 和 knitr 中，我可以抑制 readOGR 的消息吗？

> ID：16012865
> 
> 赞同：18
> 
> 时间：2013-04-15T10:24:15.583
> 
> 标签：r, knitr, ogr

我正在使用 R & knitr 构建小型报告，将输出发送到 pdf。

我在分析中使用了几个形状文件，每当我使用包`readOGR`的功能时，`rgdal`我都会获得有关正在读取的内容的信息，例如：

```
OGR data source with driver: ESRI Shapefile 
Source: "__PATH_HERE__", layer: "__NAME__OF__LAYER__HERE__"
with 148 features and 5 fields
Feature type: wkbPolygon with 2 dimensions 
```

通常，拥有它是有用的。但不幸的是，它也会在我的 pdf 输出中打印出来。

我尝试将 knitr 的块选项设置为`echo=FALSE, message=FALSE`但不幸的是它没有帮助。

有什么更好的解决方案吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-15T10:25:22.273

您是否尝试过`verbose = FALSE`在`readOGR`功能本身中进行设置？

例如

```
> dsn <- system.file("vectors", package = "rgdal")[1]
> cities <- readOGR(dsn=dsn, layer="cities")
OGR data source with driver: ESRI Shapefile 
Source: "C:/Users/sohanlon/Dropbox/R/R64_Win_Libs/rgdal/vectors", layer: "cities"
with 606 features and 4 fields
Feature type: wkbPoint with 2 dimensions
# Set verbose = FALSE
> cities <- readOGR(dsn=dsn, layer="cities" , verbose = FALSE) 
```

那么，相关的 knitr 块可能是：

```
```{r, echo=FALSE, message=FALSE}
library(rgdal)
dsn <- system.file("vectors", package = "rgdal")[1]
cities <- readOGR(dsn=dsn, layer="cities", verbose=FALSE)
``` 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-15T10:31:26.507

执行此操作的“knitr”方法是使用`results = 'hide'`. 借用@SimonO101 的示例数据，尝试：

```
```{r, results='hide', echo=FALSE, message=FALSE}
library(rgdal)
dsn <- system.file("vectors", package = "rgdal")[1]
cities <- readOGR(dsn=dsn, layer="cities")
``` 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-23T09:57:14.700

如果您使用`st_read`而不是`readOGR`用作`quiet=TRUE`附加参数来隐藏日志

# compact-framework - 如何更改智能设备 cab 项目中的默认安装目录？

> ID：16012875
> 
> 赞同：1
> 
> 时间：2013-04-15T10:24:51.013
> 
> 标签：compact-framework, windows-ce, cab

我已经创建了智能设备 CAB 项目并成功安装在

> \程序文件

默认情况下，但我想创建默认安装目录

> \应用

文件夹而不是

> \Program Files 在 Windows CE 设备 6.0 中

（MC3190 摩托罗拉设备）。

您是否知道设置默认路径或更改“%InstallDir% 宏值”？如果有任何对我非常需要的帮助，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:10:53.873

`[DefaultDestDir]`在 INF 的[`\[DestinationDirs\]`部分中](http://msdn.microsoft.com/en-us/library/ms906510.aspx)设置。

# c# - 如何在edititemtemplate-datagridview中获取下拉列表的选定值？

> ID：16012880
> 
> 赞同：0
> 
> 时间：2013-04-15T10:25:07.960
> 
> 标签：c#, asp.net, gridview, drop-down-menu

我在 DataGrid EditItemTemplate 中创建了一个 DropDownList。（手动）

```
<EditItemTemplate>
<asp:DropDownList ID="DropDownList1" runat="server" 
                        DataSourceID="SqlDataSource1" DataTextField="nazwa" DataValueField="nazwa" 
                        SelectedValue='<%# Bind("nazwa") %>'>
                    </asp:DropDownList>
                    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
                        ConnectionString="<%$ ConnectionStrings:baza_pismConnectionString1 %>" 
                        SelectCommand="SELECT [nazwa] FROM [podmioty]"></asp:SqlDataSource>
</EditItemTemplate> 
```

如何从后面代码中的下拉列表中获取选定的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:30:41.177

我猜你想在编辑期间找到下拉列表的值，这段代码就可以了

```
 protected void gridview1_RowEditing(object sender, GridViewEditEventArgs e)
        {
GridViewRow row = gridview1.Rows[e.RowIndex];

            DropDownList ddl = row.FindControl("DropDownList1") as DropDownList;
        var value=ddl.SelectedValue;
            //now do whatever with that value
        } 
```

# kendo-ui - .k-state-error 未应用于 Kendo 日期选择器

> ID：16012884
> 
> 赞同：0
> 
> 时间：2013-04-15T10:25:19.993
> 
> 标签：kendo-ui

我正在使用模型验证，并且 k-state-error css 类未应用于它以防验证失败。我还能做些什么来将这个类添加到我的日期选择器中

```
 function onChange(e) {
    if (e.date == undefined) {
        var item = $(this).find('.k-picker-wrap');
        $(item).addClass("k-state-error");
       // $(e).css("border-color", "red");
    }
} 
```

使用此代码添加类，但它不工作。也许 jquery 选择器不正确

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T12:12:58.920

从您的代码看来，您正在尝试实施检查日期是否为*必需*的验证。为什么不将其实现为：

HTML：

```
<input id="date" required/> 
```

JavaScript：

```
$("#date")
        .kendoDatePicker({})
        .kendoValidator({
            validateOnBlur: true,
            messages : {
                required      : "My custom required message"
            }
        }); 
```

# firefox - Firefox Addon builder：如何保持面板显示

> ID：16012885
> 
> 赞同：1
> 
> 时间：2013-04-15T10:25:20.240
> 
> 标签：firefox, panel, firefox-addon-sdk, add-on

我已经使用 Addon Builder 完成了一个 firefox 插件。这个插件显示一个包含网页的面板。我遇到的问题是我想保持这个面板显示并且可能有一个关闭按钮来隐藏它。实际上，当我们点击面板外时，面板就会消失。

这是我用来制作面板的代码：

```
var HauteurPopup = 400;
var LargeurPopup = 650;

function getPanel(contentURL){
    var popupPanel = require("panel").Panel({
          width:LargeurPopup,
          height:HauteurPopup,
          contentURL: contentURL
         }); 
    return popupPanel;   
}

var btn = require("toolbarbutton").ToolbarButton({
        id: 'propelink-button',
        label: 'Propulesez ce lien!',
        image: 'https://www.users.prplk.com/img/mini-logo-propel-bar.jpg',
        onCommand: function() {
            if (typeof(tabs.activeTab._worker) == 'undefined') {
                let worker = tabs.activeTab.attach({
                    contentScript: btnContentScript
                });
                tabs.activeTab._worker = worker;
            }
            tabs.activeTab._worker.port.emit("btnContentScript");
            var panelPopup = myPanel.getPanel("http://example.com");        
            panelPopup.show();
        }
    }); 
```

有人知道如何保持这个面板显示并关闭它添加一个按钮？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T14:18:44.860

在基于 xul 的扩展中，有一个选项可以创建面板来完成此操作（[panel.noautohide](https://developer.mozilla.org/en-US/docs/XUL/panel#a-panel.noautohide)）。在 firefox-addon-sdk 中，它似乎不存在。请参见[595040 – 为面板添加“isPersistent”属性](https://bugzilla.mozilla.org/show_bug.cgi?id=595040)

虽然有人提到您可以通过编辑 panel.js 来解决问题，但我从未尝试过这样做，但您可能想尝试一下。

# sqlyog - 错误 2007 - SQLyog

> ID：16012893
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:25:34.683
> 
> 标签：sqlyog

早上好，

我正在尝试使用 SqlYog 连接到 Mysql 数据库，我创建了一个新连接并输入了所有必要的信息（登录名、密码和端口）。但是当我单击“确定”时，我收到此错误消息（错误 2007：协议不匹配；服务器版本 = 1，客户端版本 = 10）。我已经对数据库进行了 ping 操作，它成功响应了我！！！

你能告诉我如何解决这个问题，我急需访问数据库。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T04:52:45.207

这通常是由于使用了具有不同协议版本的非常旧的 MySQL 服务器（3.22.x 之前）。

您可以查看此[链接](http://faq.webyog.com/content/1/178/en/sqlyog-is-a-client-for-the-mysql-server-_-but-what-server-versions-are-supported.html)以了解支持的所有服务器版本。

要检查您的服务器协议版本，请转到 MySQL 命令行并键入：

```
SHOW VARIABLES LIKE "%version%" 
```

SQLyog 仅支持协议版本 10。

# javascript - jQuery .append() 以错误的方式改变页面布局

> ID：16012896
> 
> 赞同：2
> 
> 时间：2013-04-15T10:25:51.803
> 
> 标签：javascript, jquery, html, css

我有一点问题 - 我正在尝试这样做：

```
$('#content').append('<div class="square"><h2>'+item.name+'</h2><h3>'+item.comment+'</h3></div>'); 
```

它显示的内容如下：![实际结果](https://i.stack.imgur.com/dFO43.png)

...但我希望它显示如下内容：![在此处输入图像描述](https://i.stack.imgur.com/fU1cD.png) ...如果我从追加中删除 javascript 变量并将其替换为任何旧文本，它确实会这样做。

有谁知道发生了什么？

如有必要，这是代码的更完整版本：

```
$.ajax({ 
      url: 'yourcurations.php', 
      data: '', 
      dataType: 'json', 
      success: function(data){
        $.each(data, function(i, item) {
        $('#content').append('<div class="square"><h2>'+item.name+'</h2><h3>'+item.comment+'</h3></div>');
        })
      }
}); 
```

## CSS

```
.square {
    width: 150px;
    height: 150px;
    margin-right:50px;
    margin-bottom: 50px;
    display: inline-block;
    border: 1px solid gray;
}

h2 {
    margin-top: 0;
    font-size: 1.5em;
    color: black;
}

h3 {
    font-size: 1em;
    margin-top: -15px;
    color: gray;
} 
```

HTML

![http://i.imgur.com/yG1UWja.png?1](https://i.stack.imgur.com/vmWPp.png)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:59:18.430

不太明白为什么它会起作用，但如果你把
`vertical-align: top;`

在`.square`课堂上，它似乎解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:44:19.760

您会看到不需要的结果，因为标题被包裹在将下一个元素向下推一点的框中。您可以通过在标题元素上设置固定高度来修复它。

# c# - 通过 ip 连接到 sql server 数据库

> ID：16012897
> 
> 赞同：1
> 
> 时间：2013-04-15T10:26:10.880
> 
> 标签：c#, sql-server-2005, ado.net, connection-string, windows-authentication

我正在做一个连接到位于同一网络中的数据库的应用程序。DBMS 是 SQL Server 2005，我想测试`ping`到 IP 地址，然后通过 ado.net 测试与数据库的连接：

```
 Ping p = new Ping();
            try
            {
                PingReply pingReply6 = p.Send(ip.Text);
                MessageBox.Show("IP: " + pingReply6.Address + " \n Etat : " + pingReply6.Status);
                string connexionString;
                connexionString = @"Data Source=Owner;Initial Catalog=base;Integrated Security=true;";
                IDbConnection connexion = new SqlConnection(connexionString);
                try { connexion.Open(); MessageBox.Show(" the connection is established "); }
                catch(Exception ex) { MessageBox.Show(ex.ToString()); }
            }
            catch { MessageBox.Show("Invalid IP"); } 
```

如您所见，我想通过它的地址 ip 连接到数据库，我测试 ping 并且它可以工作，但是当我在我的服务器中测试与我的数据库的连接时它不工作

1.  连接字符串中的错误是什么？
2.  如何更改连接字符串以不连接到我自己的数据库，而是连接到具有指定地址 ip（Windows 身份验证）的其他数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:34:31.293

使用[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx). 将该属性分配[`DataSource`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.datasource.aspx)给您要连接的服务器名称。[`ConnectionString`](http://msdn.microsoft.com/en-us/library/system.data.common.dbconnectionstringbuilder.connectionstring.aspx)当您想要打开连接时，从构建器中提取。这保证了格式正确的连接字符串。

一般来说，使用 IP 是一种不好的做法。使用计算机名称。

ping 测试与连接性无关。SQL 连接可以使用与 TCP/IP 无关的协议（例如共享内存）。Ping 可能会失败，具体取决于各种公司网络[ICMP](http://en.wikipedia.org/wiki/Internet_Control_Message_Protocol)设置。Ping 可以成功，但根据防火墙和 IPSec 规则，连接可能会失败。TCP/IP 连接不保证 T-SQL 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:32:20.560

这样的事情可能会有所帮助

```
connexionString = @"Data Source=" + pingReply6.Address +  "\Owner;Initial Catalog=base;Integrated Security=true;"; 
```

在您上面`.`的连接字符串中表示 localhost

正如@RemusRusanu 所说，IP 地址被认为是糟糕的形式，但上述内容将起作用。主机名会更好

# mongodb - 在分片 MongoDB 环境中不包含分片键的查询的性能如何？

> ID：16012903
> 
> 赞同：0
> 
> 时间：2013-04-15T10:26:22.613
> 
> 标签：mongodb, sharding

标题说明了一切。假设您有一个分片的 MongoDB 环境，并且用户提供了一个不包含分片键的查询。查询的实际性能如何？后台发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:45:31.563

性能取决于许多因素，但是，在这种情况下，MongoDB 的默认操作是执行全局分散和收集操作，它将查询发送到所有分片，然后合并重复项以提供最终结果。

回到性能，它通常取决于每个分片上的索引和它们的数据集的独立优化以及它们持有的数据集的范围。

然而，处理在分片中是并行的，这意味着它们都得到查询，并且“主”`mongod`将在它们进入时合并，所以性能不应该是：去分片 1，得到它，然后分片 2；相反，它应该是：转到所有分片，每个分片返回其结果，主分片合并并返回。

这是一个很好的演示文稿（带有漂亮的图片），关于在某些情况下使用分片的查询是如何工作的：[http ://www.slideshare.net/mongodb/how-queries-work-with-sharding](http://www.slideshare.net/mongodb/how-queries-work-with-sharding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:37:49.527

如果在分片集合上进行查询，则在所有分片上进行查询，如果在非共享集合上进行查询，则 mongoDB 将所有数据放在同一个分片上。

我在 MongoDB 上添加了分片常见问题解答的链接

[http://docs.mongodb.org/manual/faq/sharding/](http://docs.mongodb.org/manual/faq/sharding/)

# scala - Play 框架 2.1 中期货之间的时间延迟

> ID：16012905
> 
> 赞同：0
> 
> 时间：2013-04-15T10:26:56.047
> 
> 标签：scala, playframework, playframework-2.1, future, timedelay

我有许多完全异步且大致同时开始的消耗性作品。我的意思是这样的：

```
for (i <- 1 to n) {
  Future { startWork("work" + i) }
} 
```

但是我需要添加一些时间延迟才能在不同的时间依次开始这些工作。例如，if (time lag = 1 seconds) => i-work 在 i 秒后开始。怎么能简单地做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:46:36.890

Play 集成了 Akka 进行调度。[在 Play 的文档](http://www.playframework.com/documentation/2.1.1/ScalaAkka)中，您可以找到一个以设置的延迟运行一次代码块的示例：

```
import play.api.libs.concurrent.Execution.Implicits._
Akka.system.scheduler.scheduleOnce(10.seconds) {
    file.delete()
} 
```

[Akka 的文档](http://doc.akka.io/docs/akka/2.1.2/scala/scheduler.html)有一些关于其调度程序的更多信息。示例中的参数 ( `10.seconds`) 是 a `FiniteDuration`，因此在您的情况下，您可能希望将其设置为`i seconds`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T20:44:53.450

哟道格！我听说您喜欢 Futures，所以我将向您展示如何在未来执行 Future，以便您将来可以从您的 Future 组合其他 Futures。

```
import play.api.concurrent.Akka
import scala.concurrent._
import scala.concurrent.duration._

val promise = Promise[Unit]
Akka.system.scheduler.scheduleOnce(1.seconds) { promise.success() }
promise.future.map { _ => /* The body of the Future to be run in the future */ } 
```

这应该是一个非阻塞解决方案，将 Future 的执行延迟到未来的某个时间。

# arrays - XSLT 中重复项的列表

> ID：16012908
> 
> 赞同：1
> 
> 时间：2013-04-15T10:27:14.597
> 
> 标签：arrays, list, xslt, unique

我是 XSLT 的新手，我正在为我的问题寻求帮助。这是我的 XML 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
    <nadrazi jmeno="Podlešín">
        <vlak typ="os" cislo="5112" z="Hostivice" cil="Podlešín" naVlak="53001">
            <prijezd>16:20:00</prijezd>
            <slozeni>
                <vuz cislo="1" oznaceniC="810" />
                <vuz cislo="2" oznaceniC="010" oznaceniT="Btax" />
            </slozeni>
        </vlak>
        <vlak typ="os" cislo="53001" z="Podlešín" smer="Zloněves" cil="Kralupy nad Vltavou" zVlaku="5112">
            <odjezd>17:00:00</odjezd>
            <slozeni>
                <vuz cislo="1" oznaceniC="810" />
                <vuz cislo="2" oznaceniC="010" oznaceniT="Btax" />
            </slozeni>
        </vlak>
        <vlak typ="sp" cislo="1389" z="Louny" smer="Zloněves" cil="Praha Holešovice">
            <prijezd>16:18:00</prijezd>
            <odjezd>16:23:00</odjezd>
            <slozeni>
                <vuz cislo="1" oznaceniC="843" />
                <vuz cislo="2" oznaceniT="Btn" />
                <vuz cislo="3" oznaceniT="Btn" />
            </slozeni>
        </vlak>
        <vlak typ="r" cislo="572" z="Praha Holešovice" smer="Slaný předměstí" cil="Chomutov">
            Nechranice
            <prijezd>14:27:00</prijezd>
            <odjezd>14:28:00</odjezd>
            <slozeni>
                <vuz cislo="0" oznaceniC="754" />
                <vuz cislo="250" oznaceniT="B" />
                <vuz cislo="251" oznaceniT="B" />
                <vuz cislo="252" oznaceniT="Bp" />
                <vuz cislo="253" oznaceniT="Bp" />
                <vuz cislo="254" oznaceniT="BDs" />
                <vuz cislo="255" oznaceniT="A" />
            </slozeni>
        </vlak>
    </nadrazi> 
```

我想从所有元素`vlak`属性中获取一个`smer`值，从这些值中创建一个数组（或一个列表或类似的东西），然后使用类似`unique()`函数的东西来让每个重复值只有一个项目。在这种情况下，我的数组中将是“Zloněves”和“Slaný předměstí”。

这是我的 XSLT 代码。我尝试了一些方法来创建一些数组，但我失败并删除了那些行（前一段时间）。

```
<?xml version="1.0" encoding="UTF-8"?>
    <xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" />
    <xsl:template match="/">
<html>
<head>
    <title>Rozpis vlaků pro stanici <xsl:value-of select="nadrazi/@jmeno" /></title>
</head>
<script type="text/javascript">
function show(element) {
    var srcElement = document.getElementById(element);
    if(srcElement != null) {
        if(srcElement.style.display == "block") {
            srcElement.style.display= 'none';
        } else {
            srcElement.style.display='block';
        }
    return false;
    }
}
</script>
<body>
    <h1>Stanice <xsl:value-of select="nadrazi/@jmeno" /></h1>
    <xsl:apply-templates select="nadrazi" mode="smer" />
</body>
</html>
    </xsl:template>
    <xsl:template match="vlak" mode="smer">
    <div>
        <xsl:attribute name="id"><xsl:value-of select="@smer" /></xsl:attribute>
    </div>
    <xsl:apply-templates />
    </xsl:template>
</xsl:stylesheet> 
```

输出将是 HTML 文件，其中数组的项目将是 div 的 id (div id="arrayItem")。现在输出是（时间和空间现在并不重要，但我会欢迎一些帮助（链接等））：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Rozpis vlaků pro stanici Podlešín</title>
</head>
<script type="text/javascript">
function show(element) {
    var srcElement = document.getElementById(element);
    if(srcElement != null) {
        if(srcElement.style.display == "block") {
            srcElement.style.display= 'none';
        } else {
            srcElement.style.display='block';
        }
    return false;
    }
}
</script><body>
<h1>Stanice Podlešín</h1>
    <div id=""></div>
        16:20:00

    <div id="Zloněves"></div>
        17:00:00

    <div id="Zloněves"></div>
        16:18:00
        16:23:00

    <div id="Slaný předměstí"></div>
        Nechranice
        14:27:00
        14:28:00

</body>
</html> 
```

我想要这个：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Rozpis vlaků pro stanici Podlešín</title>
</head>
<script type="text/javascript">
function show(element) {
    var srcElement = document.getElementById(element);
    if(srcElement != null) {
        if(srcElement.style.display == "block") {
            srcElement.style.display= 'none';
        } else {
            srcElement.style.display='block';
        }
    return false;
    }
}
</script><body>
<h1>Stanice Podlešín</h1>
    <div id="Zloněves"></div>
    <div id="Slaný předměstí"></div>
</body>
</html> 
```

在这些 div 中，我将添加更多数据以及使用 Javascript 函数隐藏 div 所需的 id `show(id)`。并且所有具有 smer="Zloněves" 的元素将在一个中`<div id="Zloněves">`，所有具有 smer="Slaný předměstí" 的元素将在另一个中`<div id="Slaný předměstí">`

我发现了一些如何制作数组的问题，但没有解决这个问题。感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:51:07.947

这是一个分组问题，在 XSLT 1.0 中您需要使用一种称为[Muenchain 分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)的技术。

您正在按它们的**smer属性对****vlak**元素进行分组，因此您可以像这样定义一个键：

 **```
<xsl:key name="vlak" match="vlak[@smer]" use="@smer" /> 
```

因此，对于给定值，键将返回其**@smer**属性等于该值的所有**vlak**元素。

 **现在，要获得不同的元素，您需要将键中首先出现的**vlak**元素与它们的给定**@smer**值相匹配。这样做是这样的：

```
<xsl:template match="vlak[generate-id() = generate-id(key('vlak', @smer)[1])]" mode="smer"> 
```

然后在此模板中，如果您愿意，要获取该组的所有**vlak**元素，只需访问密钥

```
<xsl:for-each select="key('vlak', @smer)"> 
```

您唯一需要的另一件事是一个模板来匹配其他**vlak**元素以阻止它们在此循环之外输出

```
<xsl:template match="vlak" mode="smer" /> 
```

这是完整的 XSLT（为简洁起见，我删除了 javascript）

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes" />
    <xsl:key name="vlak" match="vlak[@smer]" use="@smer" />
    <xsl:template match="/">
<html>
<head>
    <title>Rozpis vlaků pro stanici <xsl:value-of select="nadrazi/@jmeno" /></title>
</head>
<body>
    <h1>Stanice <xsl:value-of select="nadrazi/@jmeno" /></h1>
    <xsl:apply-templates select="nadrazi" mode="smer" />
</body>
</html>
    </xsl:template>
    <xsl:template match="vlak[generate-id() = generate-id(key('vlak', @smer)[1])]" mode="smer">
    <div>
        <xsl:attribute name="id"><xsl:value-of select="@smer" /></xsl:attribute>
        <xsl:for-each select="key('vlak', @smer)">
        <xsl:value-of select="odjezd" />
        </xsl:for-each>
    </div>
    </xsl:template>

    <xsl:template match="vlak" mode="smer" />
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<html>
<head>
<META http-equiv="Content-Type" content="text/html">
<title>Rozpis vlaků pro stanici Podlešín</title>
</head>
<body>
<h1>Stanice Podlešín</h1>
<div id="Zloněves">17:00:00 16:23:00</div>
<div id="Slaný předměstí">14:28:00</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T13:22:45.303

嗨
，这里我没有给出完整的代码，只是给出了获取值的示例

```
<xsl:for-each select="nadrazi/vlak">
    <xsl:if test="@smer='Zloneves'">
      <div id =<xsl:value-of select="@smer"/>>
        <xsl:value-of select="prijezd"/>
         <xsl:value-of select="odjezd"/>
        </div>
    </xsl:if>
    </xsl:for-each> 
```

在上面的例子中，我使用了 `<xsl:if>`元素`<xsl:choose>`

上述代码的示例输出将是

```
<div id=Zloněves></div>
        17:00:00

    <div id=Zloněves></div>
        16:18:00
        16:23:00 
```****

# sql - 在 Perl 中，如何正确引用用于构建 SQL 查询的字符串片段？

> ID：16012910
> 
> 赞同：0
> 
> 时间：2013-04-15T10:27:15.487
> 
> 标签：sql, perl

我在从文件中读取的数组中有一组元素。现在我想在 sql 语句中使用这个数组值`in Claus`！因为我需要用'（单引号）括起来这些字符串。所以我试过了用 for 循环来做到这一点！有没有办法做同样的opp？像 qw 之类的构建函数一样... 代码：

```
open FILE, "<tab_name.txt" or die $!;
my @tab=<FILE>;
chomp(@tab);
@tab=split(",",$tab[0]);#set of like eg:$tab[0]=asc,cdf,sad,casd,aea,aee,asdf 
my @sql_str=();
foreach my $item(@tab){

        $item="'".$item."'";
        push(@sql_str,$item);#add comma
         push(@sql_str,",");
}
pop(@sql_str);#remove lase unwanted comma 
```

我得到了想要的输出，`'asc','cdf','sad','casd','aea','aee','asdf'` 但是有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T11:16:18.320

你需要一个数组，还是一个字符串`in`？我假设一个字符串是正确的，那么这个呢？

```
my $sql_str = join ",", map { $dbh->quote $_ } split ",", $tab[0]; 
```

但是`Miguel Prz`是对的，您应该改用[参数绑定](http://docstore.mik.ua/orelly/linux/dbi/ch05_03.htm)！这将节省您的 Oracle 服务器，以便一遍又一遍地解析相同的 SQL 语句。

其他小问题。如果您使用`my @tab=<FILE>;`它将读取整个文件。但是在代码中只使用了第一行。所以你可以`my $tab = <FILE>;`用来只读第一行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T14:10:00.340

要使用占位符（即，正确地）执行此操作，您需要首先将`IN`子句的所有值收集到一个数组（`@values`）中，以便您知道其中有多少，然后：

```
my $in_clause = join(', ', ('?') x scalar @values);
my $sql_str = "select field1, field2 from my_table where id in ( $in_clause )";
my $sth = $dbh->prepare($sql_str);
$sth->execute(@values); 
```

（`scalar`这里不是绝对必要的，但包括在内是为了让 OP 的情况更加明显。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T11:17:38.250

这可能有效：

```
my $sql_str = join ',' => map { $_ = qq|'$_'|; } @tab; 
```

但是，以这种方式手动构建 SQL 是个**坏主意™**。[参数绑定](https://stackoverflow.com/q/2207654/100754)是解决这个问题的正确方法。

# sticky-footer - 无论屏幕大小如何，强制 div/image 到屏幕底部

> ID：16012913
> 
> 赞同：0
> 
> 时间：2013-04-15T10:27:23.583
> 
> 标签：sticky-footer

编辑 4 月 17 日上午 10 点 12 分。`你的 jsfiddle 和模拟器上的工作完美，正如我所料，但我没有运气。我的html是

```
<img src="/images/mobile/m_tech_fuss.png" alt="Payco Tech logo" width="100%">
<div id="wrap">
<div id="main">
<div><a href="page/127/Tech-Welcome.asp"><img src="images/mobile/m_tech_welcome.png"  width="100%" /></a>
</div>
<div><a href="page/125/Tech-Guide-to-Self-Employed-Contracts.asp"><img src="images/mobile/m_tech_self_e-contracts.png" width="100%" /></a>
</div>
<div><a href="page/126/Tech-The-Opt-Out-Notification-Explained.asp"><img src="images/mobile/m_tech_optout.png" width="100%" /></a>
</div>
</div>
</div>
<div id="footer"><a href="page/92/Self-Employment.asp"><img  src="images/mobile/m_tech_soundsgood.png" width="100%" /></a>
</div> 
```

和 css 完全如您所说，但这不仅不会移动橙色页脚图像，而且还会与我的主页布局混淆:(

编辑：4 月 6 日下午 5:10

我找到了一个似乎可以正常工作的指南[http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page](http://matthewjamestaylor.com/blog/keeping-footers-at-the-bottom-of-the-page)

橙色页脚在任何移动屏幕上都停留在底部，但是在最后一点内容和页脚之间仍然存在一些差距，这迫使我向下滚动，而在内容很少的页面上，页脚应该只是坐在那里已经。此外，本指南还弄乱了我的绿色条形图像，这些图像现在不再是 100% 宽 :(

这是我的代码：

```
<div id="container">
<div id="header"></div>
<div id="body">
<div><a href="page/127/Tech-Welcome.asp"><img src="images/mobile/m_tech_welcome.png" width="100%"></a></div>
<div><a href="page/125/Tech-Guide-to-Self-Employed-Contracts.asp"><img src="images/mobile/m_tech_self_e-contracts.png" width="100%"></a></div>
<div><a href="page/126/Tech-The-Opt-Out-Notification-Explained.asp"><img src="images/mobile/m_tech_optout.png" width="100%"></a></div>
</div>
<div id="footer"><a href="page/92/Self-Employment.asp"><img src="images/mobile/m_tech_soundsgood.png" width="100%"></a></div>
</div> 
```

和我的 CSS

```
`}
html,
body {
margin:0;
padding:0;
height:100%;
}
#container {
min-height:100%;
position:relative;
}
#header {
background:#fff;
padding:10px;
}
#body {
padding:10px;
padding-bottom:70px;   /* Height of the footer */
}
#footer {
position:absolute;
bottom:0;
width:100%;
height:70px;   /* Height of the footer */
content:url("../images/mobile/m_tech_soundsgood.png");
}
#container {
height:100%;
}` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:34:29.333

如果你想要的只是让该图像始终位于屏幕底部，那么看起来你让它有点太复杂了。尝试：

```
div#content
{
  position: fixed;
  bottom: 0px;
} 
```

要使 CSS 粘性页脚起作用，您不能`#wrap`在`#footer`div 或 div 之外有任何内容，否则会弄乱高度计算。它会将`#wrap`具有`min-height`of的 div 推`100%`到页面下方。这意味着`#wrap`div 的底部低于屏幕底部。导致行为不可靠。`#wrap`特别是如果 div或div之外的内容的高度`#footer`是可变的，这就是在这种特殊情况下发生的情况。

您可以`#wrap`在配置中的 div 内放置一个标题，如下所示：

```
<div id="wrap">
  <div id="header">
    <!-- Header content -->
  </div>
  <div id="main">
    <!-- Main content -->
  </div>
</div>
<div id="footer">
  <!-- Footer content -->
</div> 
```

或者，您可以将其留在`#wrap`和div 之外，并通过在 div 上添加一个等于标题高度的值来进行`#footer`补偿。这是为了阻止 div 内的内容呈现在 div和div之外的标题顶部 。`padding-top``#main``#main``#wrap``#footer`

# ios - 如何将选定的 UIDatePicker 日期显示为 UIButton 文本？

> ID：16012914
> 
> 赞同：0
> 
> 时间：2013-04-15T10:27:23.963
> 
> 标签：ios, objective-c, image, uibutton

我有`UIImage`箭头标记，我有地方自定义按钮。当我单击此按钮时，我想显示日期选择器。从日期选择器中选择日期后，我需要将所选日期显示为按钮文本。我正在使用XIB的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:33:24.420

使用以下代码，

```
[self.DatePicker addTarget:self
                   action:@selector(SetDatePickerTime:)
         forControlEvents:UIControlEventValueChanged];

    -(void)SetDatePickerTime:(id)sender
    {
       NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
        [outputFormatter setDateFormat:@"dd/MM/yyy"];

        NSString *title = [outputFormatter stringFromDate:self.DatePicker.date];
        NSLog(@"%@",[outputFormatter stringFromDate:self.DatePicker.date]);

       [yourButton setTitle:title forState:UIControlStateNormal];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:34:35.870

您可以从关闭 datePicker 的方法中执行类似的操作

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
[dateFormatter setDateFormat:@"MM/dd/yyyy hh:mm:ss a"];

NSString *dateString = [dateFormatter stringFromDate:[self.datePicker date]];

[self.dateButton setTitle:dateString forState:UIControlStateNormal]; 
```

# python - 将值从python中的元组附加到列表

> ID：16012915
> 
> 赞同：2
> 
> 时间：2013-04-15T10:27:25.147
> 
> 标签：python, python-2.7

我写了这样的代码，

```
x=[]
y=[]
z=[]
d={u'a':(1,2,4), u'b':(1, 0, 1), u'c':(8, 3,1)}

for k,v in d.items():
       x.append(v[0])
       y.append(v[1])
       z.append(v[2])

m=column_val(x,y) #Function call
n=column_val(x,z) 
```

我怎样才能使这些步骤更简单，而不是创建 3 个列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T10:31:34.933

你可以`zip()`使用`d.values()`：

```
x, y, z = zip(*d.values()) 
```

这仍然会创建 3 个列表，但更紧凑。你想避免为单个`column_val()`参数创建循环，你最终会得到*4 个*循环。

您的样品演示`d`：

```
>>> d = {u'a': (1,2,4), u'b': (1, 0, 1), u'c': (8, 3,1)}
>>> x, y, z = zip(*d.values())
>>> x, y, z
((1, 8, 1), (2, 3, 0), (4, 1, 1)) 
```

请注意， 和 中的值的顺序不是给*定*的，因为字典不保留顺序。`x``y``z`

# java - 我可以在休眠中使用相对路径指示映射文件吗？

> ID：16012917
> 
> 赞同：1
> 
> 时间：2013-04-15T10:27:35.050
> 
> 标签：java, hibernate, orm, mapping

我正在使用 hibernate 开发一个独立的应用程序，为我的项目使用以下结构： ![在此处输入图像描述](https://i.stack.imgur.com/qCIoD.gif)

这就是我告诉 hibernate（是的，我正在与 Hibernate 聊天）在哪里可以找到 hibernate.cfg.xml 文件的方式：

```
File hibernateConfigurationFile = new File("..\\resources\\hibernate.cfg.xml");
...
Configuration().configure(hibernateConfigurationFile).buildSessionFactory(); 
```

这就是我告诉 hibernate 在哪里可以找到 Event.hbm.xml 文件的方式：

```
<mapping resource="../resources/test/Event.hbm.xml"/> 
```

我也试过：

```
<mapping resource="test/Event.hbm.xml"/> 
```

但是当我编译它时，我有以下错误：

> 初始 SessionFactory 创建 failed.org.hibernate.MappingNotFoundException: resource: test/Event.hbm.xml not found

我理解这是因为我在 hibernate.cfg.xml 文件中指出了错误的映射文件路径。所以我移动了我的 Event.hbm.xml 文件，我的项目结构现在是：![在此处输入图像描述](https://i.stack.imgur.com/KPkmV.gif)

一切正常。

我的问题是我想将 Event.hbm.xml 保留在 resource\test 目录中。如何在我的 hibernate.cfg.xml 文件中指出这一点？我尝试了相对路径，但它不起作用。我阅读了休眠文档，但一无所获。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T10:44:37.143

您可以尝试[以编程方式构建休眠配置](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/session-configuration.html#configuration-programmatic)，并且可以说

```
SessionFactory sf = new Configuration()
    .addFile("yourpath/Event.hbm.xml") 
```

而不是在`hibernate.cfg.xml`

看[这个方法](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/Configuration.html#addFile%28java.io.File%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-29T06:33:14.937

我面临同样的问题

我用这个

```
<mapping file=".\hibernate\groupResult.hbm.xml" /> 
```

表示映射中有属性文件

> .\hibernate\groupResult.hbm.xml

将在 groupResult.hbm.xml 的 hibernate 文件夹中的项目文件夹中

希望对你有帮助！

干杯!

# arrays - 在 senchatouch2 中使用 POST 方法将数组作为参数发送

> ID：16012922
> 
> 赞同：0
> 
> 时间：2013-04-15T10:27:47.910
> 
> 标签：arrays, wcf, post, parameters

使用此服务，我想使用 senchatouch2 中的 POST 方法将数组值存储到数据库中。服务是用（WCF）编写的

**服务声明：**

```
[OperationContract]
[WebInvoke(Method = "POST", 
           ResponseFormat = WebMessageFormat.Json,
           RequestFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.Wrapped,
           UriTemplate = "/Check1")]
int Psngr(string[] FirstName); 
```

**服务定义：**

```
public static int Psngr(string[] FirstName)
{  
    List<Psgr> psgr = new List<Psgr>();
    var getVal = from s in FirstName select s;
    int count = getVal.Count();

    SqlConnection con = new SqlConnection(WebConfigurationManager.ConnectionStrings["db"].ToString());
    con.Open();

    using (var cmd = new SqlCommand("SP_InsertCheck1", con))
    {
        int result;
        cmd.CommandType = CommandType.StoredProcedure;

        for (int i = 0; i < count; i++)
        {
            cmd.Parameters.Clear();
            cmd.Parameters.AddWithValue("@FirstName", FirstName[i]);

            using (var Da = new SqlDataAdapter(cmd))
            using (var Ds = new DataSet())
            {
                Da.Fill(Ds);
                result = Convert.ToInt16(Ds.Tables[0].Rows[0]["Result"].ToString());
            }
        }
        return 1;
    }
} 
```

我通过我的 ajax 请求访问了这个服务，如下所示：

```
Ext.Ajax.request({
    url:'http://ws.easy4booking.com/E4b.svc/Check1',                                                   
    method:'POST',                                            
    disableCaching: false,                                          
    headers: {
       'Accept': 'application/json',
       'Content-Type': 'application/json'
    },
    params: {
        FirstName:fname_toString,  //FirstName:["Sam","Paul"],
},
    success:function(response) {
        console.log(response);
    }
}); 
```

当我像上面提到的那样访问此服务时，出现以下错误

**请求错误：**

> 服务器在处理请求时遇到错误。异常消息是'格式化程序在尝试反序列化消息时抛出异常：反序列化操作'Psngr'的请求消息正文时出错。遇到意外的字符“F”。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：
> 
> 在 System.ServiceModel.Dispatcher.OperationFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.DemultiplexingDispatchMessageFormatter.DeserializeRequest（消息消息，对象 [] 参数）在 System.ServiceModel.Dispatcher.UriTemplateDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.CompositeDispatchFormatter.DeserializeRequest（消息消息，Object[] 参数）在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.DeserializeInputs(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin (MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher .ImmutableDispatchRuntime.ProcessMessage1(MessageRpc& rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)rpc) 在 System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:22:40.933

当 v 在 SenchaTouch2 中使用 POST 方法传递参数时，在 Ajax 请求中使用**jsonData ，例如，**

> Ext.Ajax.request({ url:'', method:'POST', disableCaching:false, headers: { 'Accept':'application/json', 'Content-Type':'application/json' }, **jsonData** : { FirstName:fname //{"FirstName":["Sam","paul"]} }，成功：function(response) { console.log(response.responseText); }，失败：function(response) { console.日志（response.responseText）；}，}）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:23:43.663

当您的客户端向 WCF Rest 服务发出请求时，原始请求应如下所示：

```
POST http://localhost/SampleService/RestService/Check1 HTTP/1.1
User-Agent: Fiddler
Content-Type: application/json
Host: localhost
Content-Length: 33

{"FirstName":["Sam","paul"]} 
```

似乎您的 sencha 代码正在传递 WCF 无法反序列化的字符串 []。您可能会考虑将其作为 jsonData 而不是参数传递。

另请查看可能有帮助的此[链接](http://www.sencha.com/forum/showthread.php?255470-Not-able-to-PUT-json-array-in-Ext.ajax.request)。（他们尝试使用的服务在 Spring MVC 中，但我想 WCF 服务也应该相同）

# windows - 从 Node.js 使用 WinRT

> ID：16012925
> 
> 赞同：3
> 
> 时间：2013-04-15T10:28:01.647
> 
> 标签：windows, node.js, windows-runtime

WinRT 使其完整的 API 可用于 Windows 8 和 Windows Server 2012 [JavaScript 应用程序](http://en.wikipedia.org/wiki/Windows_Runtime#JavaScript)。

在 Windows Server 2012 上运行的 node.js 应用程序是否可以访问此 API？

我之所以问，是因为并非所有低级节点模块都支持 Windows（例如查询指标），并且使用 WinRT，您可以直接访问操作系统。

* * *

@Roger Rowland - 我不确定您的信息是否完全正确。

MSDN 表示 WinRT 可用于非应用商店应用程序 - 请参阅“[托管桌面应用程序和 Windows 运行时](http://msdn.microsoft.com/en-us/library/windows/apps/jj856306.aspx)”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-20T15:07:33.640

如上所述 - 可以从常规桌面应用程序调用 WinRT API。因此，您可以编写一个本机 node.js 插件，该插件使用 WinRT api 将它们公开给 javascript。

Windows 8 中的 Javascript 应用程序使用与 node.js 不同的 javascript 引擎（Microsoft 的 Chakra）和主机，因此您不会获得应用程序获得的“内置”支持。

如果您有兴趣从 node.js 调用 WinRT API - 我们最近刚刚开源了一个名为 NodeRT 的新项目，它会自动生成 node.js 本机插件，将 WinRT API 公开到 node.js 中（在描述的方法中上）：[https ://github.com/NodeRT/NodeRT](https://github.com/NodeRT/NodeRT)

使用它，您应该能够从 node.js 内部调用 WinRT API。

# mobile - 尝试发布到 Feed 时，移动设备上出现错误代码 191

> ID：16012927
> 
> 赞同：1
> 
> 时间：2013-04-15T10:28:09.113
> 
> 标签：mobile, facebook-javascript-sdk, feed

我试图找出为什么我的 Facebook 提要代码只能在桌面上运行，而不能在 android 和 iOS 上运行。我正在使用 FB JS SDK。这是有问题的代码：

```
<script>function postToFeed() {
            var obj = {
                method: 'feed',
                link: 'http://carscup.com/?vr=b518c73dd8915bc38da9d12fac0954a7',
                picture: 'http://carscup.com/pics_clubs/2_big.png',
                name: 'Join me in CarsCup! Together we can make HondaFan the best car club!',
                caption: 'Join your favourite car club, pass through various real life locations during your career, upgrade your car, collaborate with friends and compete in challenges against rival car clubs.'
            };

            var callback = function(response) {
                if (response && response.post_id) {
                    $.ajax({
                        url: "club_ajax.php?user_id=1753498414&fb_feed_posted"
                    }).done(function ( data ) {
                        $('div.share_bar').html(data);
                    });
                }
             }

            FB.ui(obj, callback);
        }</script> 
```

我再说一遍，代码在桌面（Firefox 和 Chrome）上运行良好，但在移动设备上不起作用。我在我的 Android 手机上尝试了不同的浏览器，但没有任何区别。

我的应用程序也不处于沙盒模式。

更新：我将“show_error：true”添加到参数列表中，我收到此错误：“API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：redirect_uri 不属于应用程序。 "

所以这可能是一个 URL 问题。在 Facebook 应用程序设置中，我将站点 URL 和移动站点 URL 设置为相同的内容：“ [http://carscup.com](http://carscup.com) ”，这是因为该站点应该在移动设备上运行。这也只是一个网站，而不是画布应用程序。应用程序域也设置正确：“carscup.com”

有人有想法么？

# r - 将具有不同长度的数值向量列表转换为 data.frame

> ID：16012930
> 
> 赞同：0
> 
> 时间：2013-04-15T10:28:18.460
> 
> 标签：r, plyr, lapply

我有一个 df ：

```
dput(head(data))

structure(list(company_code = c(1L, 1L, 1L, 1L, 1L, 11L, 11L, 
11L, 12L, 13L, 13L), company_name = c("AB Billingsfors-Långed", 
"AB Billingsfors-Långed", "AB Billingsfors-Långed", "AB Billingsfors-Långed", 
"AB Billingsfors-Långed", "AB Iggesunds B", "AB Iggesunds B", 
"AB Iggesunds B", "AB Industripapp", "AB Klippans FinpB", "AB Klippans FinpB"
), year_cg_code = c(11920L, 11920L, 11920L, 11920L, 11920L, 111929L, 
111929L, 111929L, 121929L, 131929L, 131929L), plant_code = c(122L, 
123L, 125L, 124L, 110L, 186L, 187L, 188L, 362L, 120L, 199L), 
    plant_name = c("Billingsfors", "Billingsfors", "Långed", 
    "Billingsfors", "Jåssefors", "Iggesund", "Iggesund", "Iggesund", 
    "Värö", "Fredriksberg", "Klippan"), plant_location = c("Billingsfors", 
    "Billingsfors", "Dals Långed", "Billingsfors", "Dals Långed", 
    "Iggesund", "Iggesund", "Iggesund", "Värö", "Lessebo", "Klippan"
    ), plant_location_by_municipal = c("Bengtsfors", "Bengtsfors", 
    "Bengtsfors", "Bengtsfors", "Bengtsfors", "Hudiksvall", "Hudiksvall", 
    "Hudiksvall", "Varbergs", "Lessebo", "Klippan"), year = c(1920L, 
    1920L, 1920L, 1920L, 1920L, 1929L, 1929L, 1929L, 1929L, 1929L, 
    1929L), Output_value_1000_sek = c(384L, 1920L, 1689L, 2288L, 
    6183L, 1620L, 4224L, 4248L, 459L, 1458L, 2958L), Labour_cost_1000_sek = c(50L, 
    252L, 207L, 615L, 396L, 229L, 638L, 744L, 93L, 216L, 648L
    ), Capital_cost_1000_sek = c(66L, 330L, 450L, 648L, 540L, 
    243L, 858L, 1008L, 57L, 300L, 270L), Electricity_cost_1000_sek = c(10L, 
    80L, 10L, 20L, 30L, 310L, 170L, 140L, 20L, 50L, 130L), Raw_material_cost_1000_sek = c(80L, 
    402L, 414L, 780L, 2880L, 391L, 1364L, 1416L, 345L, 354L, 
    1260L), Output_price_1_sek.ton = c(550L, 550L, 550L, 550L, 
    550L, 220L, 220L, 220L, 220L, 220L, 220L), Output_price__sek.ton = c(341L, 
    341L, 341L, 341L, 341L, 196L, 196L, 196L, 196L, 196L, 196L
    ), Labour_price_sek.hour = c(1.5625, 1.555555556, 1.710743802, 
    1.703601108, 1.571428571, 1, 1.208333333, 1.476190476, 1.081395349, 
    1.125, 1.069306931), Capital_price_interest.rate = c(6.005, 
    6.005, 6.005, 6.005, 6.005, 4.556666667, 4.556666667, 4.556666667, 
    4.556666667, 4.556666667, 4.556666667), Motive_Power_pricekr.MwH = c(22.32142857, 
    35.65062389, 28.9017341, 50.37783375, 34.36426117, 45.68228706, 
    69.64358869, 55.11811024, 72.46376812, 68.30601093, 120.3703704
    ), Electricity_price_kr.MwH = c(13.02083333, 20.83333333, 
    12.34567901, 19.34235977, 16.66666667, 25.80108198, 24.92668622, 
    24.30555556, 23.64066194, 21.92982456, 25.49019608), Raw_Material_price_kr.m3 = c(33.5, 
    33.5, 23, 27, 32, 14.5, 15.5, 11.8, 19.2, 9.8, 14.3), Mean_raw.material_price = c(27, 
    27, 27, 27, 27, 14.3, 14.3, 14.3, 14.3, 14.3, 14.3), Output_capacity_ton = c(1200L, 
    6000L, 3000L, 4700L, 9000L, 13500L, 22000L, 24000L, 1800L, 
    6000L, 6000L), Ouput_ton = c(698L, 3490L, 3070L, 4160L, 11241L, 
    7363L, 19200L, 19309L, 2086L, 6627L, 13445L), Labour_input_1000_hour = c(32L, 
    162L, 121L, 361L, 252L, 229L, 528L, 504L, 86L, 192L, 606L
    ), Capital_input_1000_sek = c(10990L, 54954L, 74937L, 108009L, 
    89925L, 6803L, 3731L, 3072L, 439L, 1097L, 2853L), Motive_Power_Mwh = c(448L, 
    2244L, 346L, 397L, 873L, 6786L, 2441L, 2540L, 276L, 732L, 
    1080L), Electric_input_Mwh = c(768L, 3840L, 810L, 1034L, 
    1800L, 12015L, 6820L, 5760L, 846L, 2280L, 5100L), Rawmaterial_input_M3 = c(2388L, 
    12000L, 18000L, 28888L, 90000L, 26965L, 88000L, 120000L, 
    17968L, 36122L, 88111L), Capacity_Utilization = c(58.16666667, 
    58.16666667, 102.3333333, 88.5106383, 124.9, 54.54074074, 
    87.27272727, 80.45416667, 115.8888889, 110.45, 224.0833333
    ), Labour_cost_share = c(13.02083333, 13.125, 12.25577265, 
    26.87937063, 6.404657933, 14.13580247, 15.10416667, 17.51412429, 
    20.26143791, 14.81481481, 21.90669371), Capital_cost_share = c(17.1875, 
    17.1875, 26.64298401, 28.32167832, 8.733624454, 15, 20.3125, 
    23.72881356, 12.41830065, 20.57613169, 9.127789047), Electricity_cost_share = c(2.604166667, 
    4.166666667, 0.592066311, 0.874125874, 0.485201359, 19.13580247, 
    4.024621212, 3.29566855, 4.357298475, 3.429355281, 4.394861393
    ), Raw_Material_cost_share = c(20.83333333, 20.9375, 24.51154529, 
    34.09090909, 46.57933042, 24.13580247, 32.29166667, 33.33333333, 
    75.16339869, 24.27983539, 42.59634888), Labour_productivity = c(0.974515229, 
    0.962484177, 1.13353828, 0.514836483, 1.992909572, 1.43648966, 
    1.624615125, 1.711640019, 1.083674961, 1.542051677, 0.991222995
    ), Capital_productivity = c(0.26451432, 0.264495066, 0.170621412, 
    0.160407564, 0.52061414, 4.50745941, 21.43339784, 26.1740221, 
    19.79351964, 25.15276216, 19.62710167), Power_productivity = c(0.857142857, 
    0.855614973, 4.88150289, 5.763224181, 7.082474227, 0.23872679, 
    1.730438345, 1.672440945, 1.663043478, 1.991803279, 2.738888889
    ), Electricity_productivity = c(0.5, 0.5, 2.085185185, 2.212765957, 
    3.435, 0.134831461, 0.619354839, 0.7375, 0.542553191, 0.639473684, 
    0.58), Raw.material.productivity = c(1.758105508, 1.74931498, 
    1.025863799, 0.866163123, 0.751253092, 1.642397254, 1.312327987, 
    0.967837334, 0.698294143, 1.103491562, 0.917813646), uniquez = c("AB Billingsfors-Långed - 122", 
    "AB Billingsfors-Långed - 123", "AB Billingsfors-Långed - 125", 
    "AB Billingsfors-Långed - 124", "AB Billingsfors-Långed - 110", 
    "AB Iggesunds B - 186", "AB Iggesunds B - 187", "AB Iggesunds B - 188", 
    "AB Industripapp - 362", "AB Klippans FinpB - 120", "AB Klippans FinpB - 199"
    )), .Names = c("company_code", "company_name", "year_cg_code", 
"plant_code", "plant_name", "plant_location", "plant_location_by_municipal", 
"year", "Output_value_1000_sek", "Labour_cost_1000_sek", "Capital_cost_1000_sek", 
"Electricity_cost_1000_sek", "Raw_material_cost_1000_sek", "Output_price_1_sek.ton", 
"Output_price__sek.ton", "Labour_price_sek.hour", "Capital_price_interest.rate", 
"Motive_Power_pricekr.MwH", "Electricity_price_kr.MwH", "Raw_Material_price_kr.m3", 
"Mean_raw.material_price", "Output_capacity_ton", "Ouput_ton", 
"Labour_input_1000_hour", "Capital_input_1000_sek", "Motive_Power_Mwh", 
"Electric_input_Mwh", "Rawmaterial_input_M3", "Capacity_Utilization", 
"Labour_cost_share", "Capital_cost_share", "Electricity_cost_share", 
"Raw_Material_cost_share", "Labour_productivity", "Capital_productivity", 
"Power_productivity", "Electricity_productivity", "Raw.material.productivity", 
"uniquez"), row.names = c(1L, 2L, 3L, 4L, 5L, 255L, 256L, 257L, 
258L, 259L, 260L), class = "data.frame") 
```

然后我使用 lapply 来获得`library(Benchmarking)`df 中每年的技术效率：

```
hh=lapply(unique(data$year),function(x){

  library(Benchmarking)

  datat=data[data$year==x,]
  y <- datat[,"Output_capacity_ton",drop=FALSE]
  rownames(y)=paste(datat[,2],"-",datat[,4])

  x=with(datat,cbind(Labour_input_1000_hour,Capital_input_1000_sek,Electric_input_Mwh,Rawmaterial_input_M3))

  rownames(x)=paste(datat[,2],"-",datat[,4],"-",datat[,3])

  e <- dea(x,y)

  return(e$eff) }

  ) 
```

`plyr`然后我用包创建上述列表的data.frame

```
library(plyr)

x <- ldply(hh, data.frame)

rownames(x)=paste(data$uniquez,data$year_cg_code)

colnames(x)=c("Year",unique(data$year)) 
```

这是我得到的：

```
head(x)
                                   Year      1920      1929
AB Billingsfors-Långed - 122 11920 1920 0.9854402        NA
AB Billingsfors-Långed - 123 11920 1920 0.9935262        NA
AB Billingsfors-Långed - 125 11920 1920 0.6968468        NA
AB Billingsfors-Långed - 124 11920 1920 0.8462399        NA
AB Billingsfors-Långed - 110 11920 1920 0.9620256        NA
AB Iggesunds B - 186 111929        1929        NA 0.9906348 
```

它有效，但我不知道如何使用`lapply`函数来创建与上面相同的 data.frame `x`？有人吗？：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:35:22.367

您的`lapply`结果似乎是一个长度为 1 的列表，它是一个数字向量。您可以直接使用`as.data.frame`来获得您需要的结果，然后您可以设置`row`和`column`名称：

```
hh <- as.data.frame(hh)
rownames(hh) <- seq_len(nrow(hh))
colnames(hh) <- c("x")

> hh
  x
1 1
2 1
3 1
4 1
5 1
6 1 
```

# eclipse - 找不到 EntityManager 的持久性提供程序

> ID：16012931
> 
> 赞同：0
> 
> 时间：2013-04-15T10:28:19.930
> 
> 标签：eclipse, jakarta-ee, eclipselink, persistence.xml

我正在尝试使用 JPA 和 EclipseLink 保留元素。所以我创建了一个类来坚持

```
@Entity
public class Couple implements Serializable{
    private static final long serialVersionUID = 1L;
    @Column(name = "OBJECTID")
    private String objectID;
    @Column(name = "EPCNUMBER")
    private String epcNumber;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id; 
```

等等。我创建了一个类来“使用”它：

```
public class Main {
  private static final String PERSISTENCE_UNIT_NAME = "MyPU";
  private static EntityManagerFactory factory;

  public static void main(String[] args) {
    factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
    EntityManager em = factory.createEntityManager();
    TypedQuery<Couple> q = em.createQuery("SELECT c FROM Couple c", Couple.class);
    List<Couple> couples = (List<Couple>) q.getResultList(); 
```

然后，我有以下 persistence.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="MyPU">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <jta-data-source>localJTA</jta-data-source>
        <class>fr.mypackage.com.Couple</class>
        <properties>
            <property name="eclipselink.ddl-generation" value="create-tables"/>
            <property name="eclipselink.ddl-generation.output-mode" value="database" />
            <property name="eclipselink.logging.level" value="INFO"/>
        </properties>
    </persistence-unit>
</persistence> 
```

但是，即使我更改了属性，我也遇到了同样的错误：

> 线程“主”javax.persistence.PersistenceException 中的异常：没有名为 MyPU 的 EntityManager 的持久性提供程序（调用 factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME); 时）。

我对 ling xml 和持久性单元做错了吗？我已经在类路径中添加了以下内容：

```
javax.persistence.jar
javax.ejb.jar
eclipselink.jar
javax.persistence_1.0.0.jar
javax.persistence_2.0.4.v201112161009.jar
derby.jar 
```

你可以帮帮我吗 ？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-26T19:35:39.107

在我的应用程序上，我一直遇到这个问题，直到我编译了我的 Netbeans 项目。然后它起作用了。

# html - 带有选项作为文本框的 HTML 选择

> ID：16012933
> 
> 赞同：-1
> 
> 时间：2013-04-15T10:28:23.457
> 
> 标签：html, select, textbox

我正在用 html 写一个选择下拉菜单，它有

```
<option><input type="text"></option> 
```

但是当我运行该程序时，文本框从下拉列表中出来，在选择中插入文本框的目的是，如果用户无法找到所需的选项。他将能够添加一个新的。

这是选择代码。**您可以看到运行此代码的活动演示[http://jsfiddle.net/_nikhilagrawal/eJ7k6/3/](http://jsfiddle.net/_nikhilagrawal/eJ7k6/3/)**。为什么此输入类型文本出现在选择之外。请看一看。

```
<select name="color"> 
    <option>pick a color</option>  
    <option value="red">RED</option>
    <option value="blue">BLUE</option>    
    <option><input type="text" name="color" /></option>
</select> 
```

这是下拉菜单的输出。 ![在此处输入图像描述](https://i.stack.imgur.com/7S7Ru.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:29:58.373

`<option>`元素中不能有除文本以外的任何内容。

如果您想要一个将文本输入与下拉菜单组合在一起的小部件，那么您必须使用 JavaScript 构建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:36:52.087

你不能写

```
<input type="text" name="color" /> 
```

`<option></option>`标签内。

您应该添加最接近选择框的文本框如果用户无法找到所需的选项，用户可以添加新的。或者您需要使用**css+jquery自定义您的选择框**

# redirect - xPages-Notes-redirection-pagination ：如何重定向到分页视图的某个页码？

> ID：16012937
> 
> 赞同：0
> 
> 时间：2013-04-15T10:28:33.797
> 
> 标签：redirect, pagination, xpages, lotus

我有一个经典`xPage`的视图面板（在自定义控件中）链接到显示记录的分页视图。

我有不止一页要显示。每个都有一个关键列，定义为将文档发送到表单编辑页面的链接。

然后在此页面中，我单击“保存按钮”更新记录，该按钮将用户重定向到原始视图页面（该 URL 已存储在 sessionScope 中）。

问题是它重定向到第一页而不是包含记录的那个。

返回查看页面时如何指定要显示的页码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:23:15.737

我必须为我的一个应用程序做类似的事情，而不是使用简单的操作来重定向到 XPage，我使用了 context.redirectToPage，它允许我传递我用下面的代码存储的 sessionScope 变量。

```
var url:XSPUrl;
URL = context.getUrl();
sessionScope.put('your scope name',@RightBack(url.getPath().toString(),"/")); 
```

# javascript - 从 InAppBrowser 返回变量

> ID：16012941
> 
> 赞同：2
> 
> 时间：2013-04-15T10:28:56.087
> 
> 标签：javascript, jquery, html, cordova

我使用的是cordova 2.5.0，但在使用InAppBrowser 与我的应用程序通信新窗口时遇到问题。可以将使用 InAppBrowser 插件打开的页面中的信息发送回我的 cordova 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-06-28T10:15:24.953

这曾经有点涉及（如[轮询](https://www.telerik.com/blogs/cross-window-communication-with-cordova's-inappbrowser)或[自定义 urls](https://www.npmjs.com/package/cordova-plugin-customurlscheme)），但由于 inAppBrowser [3.0.0](https://github.com/apache/cordova-plugin-inappbrowser/blob/master/RELEASENOTES.md#300-apr-12-2018)您可以使用`AllowedSchemes`该`customscheme`事件。这尚未记录，但可以按如下方式使用。

到你的`config.xml`，添加

```
<preference name="AllowedSchemes" value="myscheme" /> 
```

在您的 Cordova 应用程序中使用以下代码：

```
function onCustomScheme(e) {
  if (e.url.match(/^myscheme:\/\/message\b/)) {
     var q = parseQueryString(e.url);
     console.log("Got foo message: " + q.text);
  }
}

url = "https://my.example.com/";
app = cordova.InAppBrowser.open(url, "_blank");
app.addEventListener("customscheme", onCustomScheme, false); 
```

然后从在 inAppBrowser 中打开的网站中，您可以嵌入这样的链接，如果您关注它，它会在控制台中显示消息*hi 。*

```
<a href="myscheme://message?text=hi+there">Test</a> 
```

这不适用于 Cordova 2.5（看起来您至少需要 3.1），但由于 8 现已推出，无论如何升级可能是个好主意。

# ios - 检查是否在 iOS 6 中安装了 Google 地图应用

> ID：16012945
> 
> 赞同：10
> 
> 时间：2013-04-15T10:29:05.870
> 
> 标签：ios, objective-c, google-maps, cocoa-touch, uialertview

我试图弄清楚如何处理此代码的结果，以查看应用程序中是否安装了 Google 地图。

```
[[UIApplication sharedApplication] canOpenURL:
[NSURL URLWithString:@"comgooglemaps://"]]; 
```

我正在创建一个`UIAlertView`带有选项的选项，如果是或不是，我希望为用户提供不同的选项。

如何获取上面代码的结果并将其转换为布尔值？

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-15T10:34:02.823

结果已经是[`canOpenURL:`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006728-CH3-SW50)一个布尔值：

```
BOOL canHandle = [[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps:"]];

if (canHandle) {
   // Google maps installed
} else {
   // Use Apple maps?
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-30T07:04:24.963

以上适用于 iOS 9.0

**步骤 1.**在您的应用程序 info.plist 中的 LSApplicationQueriesSchemes 中添加**comgooglemaps**

**第2步。**

```
BOOL isGoogleMap = [[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps://"]];
UIAlertView *alert;

if(isGoogleMap)
{
    alert = [[UIAlertView alloc]
             initWithTitle:@"Get Directions"
             message:@"Show Map"
             delegate:self
             cancelButtonTitle:@"Cancel"
             otherButtonTitles:@"View in Apple Maps", @"View in Google Maps", nil];
}
else
{
    alert = [[UIAlertView alloc]
             initWithTitle:@"Get Directions"
             message:@"Show Map"
             delegate:self
             cancelButtonTitle:@"Cancel"
             otherButtonTitles:@"View in Apple Maps", nil];
}
alert.tag = 1010;
[alert show]; 
```

# c# - 为什么 Windows 窗体中的多页打印会以这种方式工作？

> ID：16012946
> 
> 赞同：0
> 
> 时间：2013-04-15T10:29:06.433
> 
> 标签：c#, winforms, printing

因为我们最近学习了如何在 Windows 窗体中打印，所以我想知道为什么要打印多个页面，`OnPrintPage(PrintPageEventArgs e)`你`PrintDocument`会为每个页面调用并告诉它我有多个页面我必须设置`e.HasMorePages`为 true。我想到了多种其他解决方案，例如`Page`您可以绘制的对象以及`OnPrintPage`返回这些对象数组的方法。

但是因为我认为微软有充分的理由按照他们的方式实现它，所以我想知道是否有人知道 API 看起来如此的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T11:29:14.580

它只是从根本上映射到 Windows 上的打印工作方式。这是基于页面的，打印机驱动程序一次只在一个页面上工作。StartDoc 和 EndDoc 是选择驱动程序并将其关闭的外部 winapi 函数。它们映射到 PrintDocument.BeginPrint 和 EndPrint 事件。

然后，应用程序必须在开始将图形渲染到打印机的设备上下文之前调用 StartPage winapi 函数。它映射到 PrintPage 事件，PrintController 在调用 StartPage 之后立即触发它。当应用程序完成页面渲染后，必须调用 EndPage。当 PrintPage 事件处理程序返回时由 PrintController 完成。这会在后台打印程序中添加一个页面。

设置 e.MorePages = true 只是告诉 PrintController 它需要留在循环中，再次调用 StartPage 并触发 PrintPage 事件。

这会使打印有点痛苦，您必须在 PrintPage 事件调用之间自己维护状态。必须将它们存储在类内的字段中，它们不能是 PrintPage 事件处理程序的局部变量。我已经为 PrintDocument 编写了一个没有此问题的功能替代品，您可以在一个方法中呈现整个文档。使用分隔页面的 FormFeed() 方法。您可以在此[MSDN 论坛帖子](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/577f1ecc-0434-4083-a50c-027db781595c/)中找到代码。还要注意 C# 迭代器（yield return 语句）如何成为该问题的良好通用解决方案。

# javascript - 鼠标按钮按下 div 并移动鼠标会改变滚动位置

> ID：16012948
> 
> 赞同：-5
> 
> 时间：2013-04-15T10:29:10.773
> 
> 标签：javascript, jquery, html

想象一下，我们有一个具有静态宽度和高度的 div 元素。overflow:scroll css 导致滚动它并出现滚动条。如果我按下鼠标按钮并移动鼠标，我想改变滚动位置。

更新：喜欢这个网站，但这里用闪存实现： [http ://www.royalalberthall.com/tickets/default/2013-25-09-1930/29642.aspx](http://www.royalalberthall.com/tickets/default/2013-25-09-1930/29642.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:03:32.743

尝试使用[http://mootools.net/](http://mootools.net/)，这是一个不错的库

示例： http://mootools.net/demos/?demo= [Drag.Scroll](http://mootools.net/demos/?demo=Drag.Scroll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T10:36:35.950

您必须将 jquery animate 与 scrollTop 一起使用。

试试这个代码：

```
$("#button").click(function() {
     $('div').animate({
         scrollTop : 0  // scroll position
     }, 2000);
 }); 
```

# perl - 在 Perl 中，当我使用 @_[0]、@_[1] 等访问子例程的参数时，为什么会收到警告？

> ID：16012955
> 
> 赞同：9
> 
> 时间：2013-04-15T10:29:43.327
> 
> 标签：perl, warnings

下面是代码。

```
sub max 
    {
        if (@_[0] > @_[1]) 
        {
            @_[0];
        }
        else
        {
            @_[1];
        }
    }
    print "biggest is ".&max(37,25); 
```

当我运行它时，我收到以下警告，

```
Scalar values @_[0] better written as $_[0] at file.pl line 3.
Scalar values @_[1] better written as $_[1] at file.pl line 3.
Scalar values @_[0] better written as $_[0] at file.pl line 5.
Scalar values @_[0] better written as $_[0] at file.pl line 9.
biggest is 37. 
```

虽然我得到了正确的输出，但我想知道这个警告背后的原因是什么，因为我认为`@_`在子例程中使用比`$_`.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-15T10:36:29.323

问题是您通过使用数组切片而不是标量来引用*单个数组元素。*就像错误所说的那样。数组切片是数组中元素的列表，例如：

```
my @a = (0 .. 9);
print @a[0,3,4];    # prints 034 
```

相反，当您引用单个数组元素时，您使用标量前缀`$`：

```
print $a[3];        # prints 3 
```

所以当你这样做时

```
@_[0]; 
```

Perl 告诉您引用*标*量值的正确方法是不使用数组切片，而是使用标量表示法：

```
$_[0]; 
```

就这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T10:46:05.003

试着用这个例子来理解它：

```
@array = (1,2,3); #array is the name of the array and @ means that it's an array
print $array[1];  
#this will print element at index 1 and you're doing it in scalar context 
```

相似地，

```
@_ = (1,2,3); #_ is the name of the array
print $_[1]; 
#this will print element at index 1 of array _ and again you're doing it in scalar context 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T10:57:58.810

您指的是数组，而不是标量。`@_[0]`意味着`($_[0])`。但是 perl 是这样的，`clever`所以它会警告您，您应该返回一个标量，而不是显式的单个元素列表。在这里你应该使用`$_[0]`.

我建议使用原型，因为现在您可以调用`max (1, 2, 3)`，结果将是`2`，而不是`3`. 所以定义为

```
sub max ($$) { $_[0] > $_[1]) ? $_[0] : $_[1] } 
```

或者更好的是，您可以使用未定义数量 (>=2) 的元素。用 0 或 1 个项目来调用它可能毫无意义。

```
sub max (@) { 
    return undef if $#_<0; 
    my $s = shift; 
    for(@_) { $s = $_ if $_ > $s } $s 
} 
```

# webview - 使用 Titanium eventListerner/fireEvent 与 webview 通信的正确方法是什么

> ID：16012959
> 
> 赞同：1
> 
> 时间：2013-04-15T10:29:55.500
> 
> 标签：webview, titanium

所以我正在开发一个使用 webview 来显示数据的应用程序。目前我正在尝试从中获取数据，并将数据发送到 webview。似乎从 webview 获取数据工作正常，但是将数据发送回 webview 形成了问题。

我使用 fireEvents 和 Eventlisteners 进行通信。它看起来像这样：

网络视图：index.html

```
// declared at the beginning of the html file
Ti.App.addEventListener('sendToWebview', function(data) {
  alert('alert in webview');
});

// fires when button is pushed
function onClick(){
  Ti.App.fireEvent('sendToTi', { "someDataToTi"  });
} 
```

应用程序.js

```
Ti.App.addEventListener('sendToTi', function(data) {        
  alert('alert in Ti');
  Ti.App.fireEvent('sendToWebview', { "someDataToWebview" });
}); 
```

有效的是 sendToTi 事件。在这里，我总是得到警报。似乎一直不起作用的是 sendToWebview 事件。奇怪的是，它有时似乎有效，有时则无效，即使我回到有效的代码，它似乎也不再有效。我究竟做错了什么？有没有办法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T17:03:01.177

你的' `sendToTi`'是正确的。但是您不能以这种方式将事件发送到 WebView。

要在 WebView 中执行 JavaScript（发送事件），您可以使用

```
webview.evalJS('someJSFunction(with, parameters, for, instance);');
webview.evalJS('alert("Hello World!");'); 
```

不需要 EventListeners（尤其是没有应用程序范围的事件侦听器）。

# regex - plsql 正则表达式删除引号之间的文本

> ID：16012963
> 
> 赞同：0
> 
> 时间：2013-04-15T10:30:04.357
> 
> 标签：regex, plsql

我正在努力使用正则表达式替换解决方案，该解决方案将删除 VARCHAR2 字段中引号之间的所有文本，即使这些引号之间的文本也引用了文本例如文本：

```
'text start 'text inside' text end' leftover 'some other text' 
```

正则表达式替换后应包含： `leftover`

我想出的是这段代码：

```
with tbl as (
  select
    '''text start ''text inside'' text end'' leftover ''some other text''' as str
    ,'\''(.*?)\''' as regex
  from dual
)
select
  tbl.str as strA
  ,regexp_replace(tbl.str,tbl.regex, '') as strB
from tbl; 
```

但子引号之间的文字仍然存在。

甚至可以使用正则表达式来实现这一点，还是应该在某个循环中拆分和分析内容？一个理想的解决方案是如果它可以处理引用文本中引用文本的无限级别出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T12:46:40.687

> 一个理想的解决方案是如果它可以处理引用文本中引用文本的无限级别出现。

使用单个正则表达式是不可能的。
Oracle 中既不提供递归正则表达式，也不提供递归捕获缓冲区。

* * *

**UPD：**
但它可以通过 SQL 来完成：

```
with tbl as (
  select
    '''text start ''text inside'' text end'' leftover ''some other text''' 
    as str
  from dual
)
select
  listagg(text) within group (order by n) 
from 
  (
    select 
      n,
      sum(decode(regexp_replace(str, '^(.*?([<>])){'||n||'}.*$', '\2'),
        '<', 1, '>', -1, 0)) over (order by n) as nest,
      regexp_replace(str, '^(.*?[<>]){'||n||'}([^<>]*).*$', '\2') as text
    from 
      ( select regexp_replace(regexp_replace(str, '(\s|^)''', '\1<'), 
          '''(\s|$)', '>\1') as str from tbl ), 
      ( select level-1 as n from dual 
        connect by level-1 <= (select regexp_count(str, '''') from tbl) )
  )
where nest = 0 
```

[小提琴](http://www.sqlfiddle.com/#!4/d41d8/9807)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T12:10:59.113

尝试

```
, '^[^'']*(''.*'')[^'']*$' as regex 
```

警告：这将愚蠢地捕获捕获组 1 中测试文本中第一次和最后一次出现单引号之间的所有内容，包括最外面的引号本身。特别是它不检查正确的嵌套。

更重要的是你的替换 expr 会更复杂：

```
, CASE WHEN REGEXP_INSTR(test, regex) > 0
     THEN REPLACE ( test, REGEXP_REPLACE(test, regex, '\1'), '' )
     ELSE test
  END 
```

如果正则表达式匹配，则首先提取捕获组以用于普通替换（这是因为保证匹配的部分是最大的）。

重要提示：该解决方案不会在您提供的特定上下文中产生所需的结果。但是，您不能更好地使用 plsql`regexp`函数，因为 oracle 正则表达式引擎不提供扩展来表达模式中的递归（例如 pcre 所做的）。您需要此工具来解决嵌套结构（即执行平衡计数）。

# java - java.sql.SqlException：将数据插入表时未找到数据

> ID：16012965
> 
> 赞同：0
> 
> 时间：2013-04-15T10:30:07.977
> 
> 标签：java, swing, ms-access, odbc

我正在尝试使用 ms access 2007 将数据插入表中，但出现异常“java.sql.SqlException：未找到数据”我的数据源名称是员工

```
 import java.sql.*;

             class AccessDatabase
              {
                    public static void main(String[] args) 
                   {
                     try 
                         {
                   Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                   Connection con = DriverManager.getConnection ("jdbc:odbc:employee");
                   Statement st = con.createStatement();

                  String name = "roseindia";
                  String address = "delhi";
                  int i = st.executeUpdate("insert into user(name,address) values
                  ('" +  name + "','" + address + "')");
                  System.out.println("Row is added");

                        } 
                   catch (Exception e)
                   {
                     System.out.println(e);
                   }
                }
           } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:58:00.453

我认为您没有创建数据库。以下代码应该可以工作：

```
import java.sql.*;
class ExecuteSqlQuery {
 public static void main(String[] args) {
  try {
  Class.forName("com.mysql.jdbc.Driver").newInstance();
  Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "root");
  Statement st=con.createStatement();
  String str = "CREATE TABLE user(id INTEGER, " + "name VARCHAR(25), address VARCHAR(100), primary key(id))";
  st.executeUpdate(str);
  System.out.println("Table is created into the database.");
  st.executeUpdate("insert into user(id,name,address) values(1111,'roseindia','Rohini,Delhi')");
  System.out.println("Row is inserted.");
   st.close();
  con.close();
  } 
   catch (Exception ex) {
  System.out.println("Unable to connect to database.");
  }
  }
} 
```

# c# - 打开文件对话框问题

> ID：16012966
> 
> 赞同：-2
> 
> 时间：2013-04-15T10:30:12.363
> 
> 标签：c#

我在下面编写了仅选择 pdf 文件的代码，但它不起作用。

```
OpenFileDialog fd = new OpenFileDialog();
fd.ShowDialog();
fd.Filter = "Pdf files (*.Pdf)|*.Pdf"; 
```

请帮助这是有什么问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T10:31:36.400

您需要`Filter` **在打开对话框之前**设置第一个。

```
OpenFileDialog fd = new OpenFileDialog();
fd.Filter = "Pdf files (*.Pdf)|*.Pdf"; //this should be before
fd.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:56:27.843

Habib 有正确的答案，但我觉得我会补充一点，您应该检查响应以`ShowDialog`确保用户没有取消对话框。如果他们在没有选择文件的情况下取消对话框，`OpenFileDialog`则会说文件名为“”，这在您的应用程序的其余部分中没有用处。

**例子**

```
OpenFileDialog fd = new OpenFileDialog();
fd.Filter = "PDF Files(*.pdf)|*.pdf";
if (fd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    // Do stuff here
}
else
{
    // The user cancelled the request to select a PDF
} 
```

希望这可以帮助

# c# - 当中国时区过去时，Java 会不会工作得那么好？

> ID：16012970
> 
> 赞同：6
> 
> 时间：2013-04-15T10:30:21.580
> 
> 标签：c#, java, timezone, jodatime, nodatime

由于某些游戏开发可能会使用过去或将来的日期时间，并且在日期时间仿真的任何时区中，即使我们在现实中也无法到达它们。对于这个假设，并不是说我是在假`date time`s 上计算，而是在任何时区的任何日期时间计算的正确性，就像在现实中一样。

我之前在Java中问了一个关于中国时区问题的问题，被认为是重复问题，因此我将其删除。但是，从这个[评论线程](https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result#comment22605987_6841479)中，我知道这是 Java 中的某种*时间倒带*（转换？）问题，而不仅仅是时区变化。

现在，我以不同的方式重新发布这个问题，用以下内容提出这个问题：

*   Java中的代码

    ```
    import org.joda.time.*;
    import java.util.*;

    class PandaTest {
        static long Subtract(
            Date minuend, Date subtrahend, DateTimeZone zone) {
            long millis;

            if(null==zone)
                millis=minuend.getTime()-subtrahend.getTime();
            else {
                long rhs=
                    (new LocalDateTime(subtrahend)).toDateTime(zone)
                    .getMillis();

                long lhs=
                    (new LocalDateTime(minuend)).toDateTime(zone)
                    .getMillis();

                millis=lhs-rhs;
            }

            return millis/1000;
        }

        static Date MakeTime(
            int year, int month, int day, int hour, int minute, int second
            ) {
            Calendar calendar=
                Calendar.getInstance(TimeZone.getTimeZone("PRC"));

            calendar.set(year, month-1, day, hour, minute, second);
            return calendar.getTime();
        }

        static void puts(String arg0) {
            System.out.println(arg0);
        }

        static void ShowDuration(DateTimeZone zone, Date ... args) {
            int argc=args.length;

            puts("--- ");
            puts("Time Zone: "+(null!=zone?zone.toString():"unspecified"));

            for(int i=0; argc-->0; ++i) {
                puts("Time "+i+": "+args[i]);

                if(i>0) {
                    long duration=Subtract(args[i], args[i-1], zone);
                    puts("Duration = "+duration);
                }
            }
        }

        public static void main(String[] args) {
            Date retainsOfTheDay=MakeTime(1900, 1, 1, 8, 5, 51+0);
            Date somewhereInTime=MakeTime(1900, 1, 1, 8, 5, 51+1);
            DateTimeZone zone=DateTimeZone.forID("PRC");
            ShowDuration(null, retainsOfTheDay, somewhereInTime);
            ShowDuration(zone, retainsOfTheDay, somewhereInTime);
        }
    } 
    ```

如果我从Java 中构造了`LocalDateTime`JodaTime，则会出现问题。`Date`JDK的版本是7u17，JodaTime是2.2。在带有 NodaTime 的 C# 中不会发生这种情况，我在这篇文章的后面放置了一个替代版本的代码以进行对比。

*   问题

    1.  过渡是如何发生的，与 Unix 纪元一样吗？

        我可能以错误的方式使用术语*转换*。我的意思是在 Java中减去`1900/1/1 8:5:52`by的奇怪结果。`1900/1/1 8:5:51`那时没有时区变化。

        像这样的事情只发生在特定的时区，还是所有的时区（可能在某个不同的时刻）？

    2.  如果有人可能`date time`在任何时区计算任意 s 并期望结果总是正确的，那么应该`Date`使用`Calendar`吗？

        如果是，如何在不出现问题的情况下使用它们？

        一旦我们可能在 1970 年之前或 2038 年之后计算s，我们是否应该不再在 Java 中使用`Date`and ？`Calender``date time`

* * *

**替代代码**

代码中同时包含了 C# 和 Java 的内容，我们可以方便地对比 C# 和 Java 的结果：

```
// Like Java, like Sharp ... the code contains content either in Java or C# 
// An odd number of `slash-star-slash` at the beginning to compile in Java
// An even number of `slash-star-slash` at the beginning to compile in C#
// p.s.: zero would be treated as an even number

using Date=System.DateTime;
using NodaTime.TimeZones;
using NodaTime;
using System.Collections.Generic;
using System.Linq;
using System; /*/
import org.joda.time.*;
import java.util.*;

// ClockCant in Java 
class ClockCant {
    public static Date MakeTime(
        int year, int month, int day, int hour, int minute, int second
        ) {
        Calendar calendar=
            Calendar.getInstance(TimeZone.getTimeZone("PRC"));

        calendar.set(year, month-1, day, hour, minute, second);
        return calendar.getTime();
    }

    public static DateTimeZone GetZoneFromId(String id) {
        return DateTimeZone.forID(id);
    }

    public static String GetYourZoneId() {
        return DateTimeZone.getDefault().getID();
    }

    public static long Subtract(
        Date minuend, Date subtrahend, DateTimeZone zone) {
        long millis;

        if(null==zone)
            millis=minuend.getTime()-subtrahend.getTime();
        else {
            long rhs=
                (new LocalDateTime(subtrahend)).toDateTime(zone)
                .getMillis();

            long lhs=
                (new LocalDateTime(minuend)).toDateTime(zone)
                .getMillis();

            millis=lhs-rhs;
        }

        return millis/1000;
    }
}

// a minimum implementation of C#-like List<T> for Java
class List<T> {
    public T[] ToArray() {
        return _items;
    }

    public int Count() {
        return _items.length;
    }

    public List(T ... args) {
        _items=args;
    }

    T[] _items;
}

/*/// ClockCant in C#
class ClockCant {
    public static Date MakeTime(
        int year, int month, int day, int hour, int minute, int second) {
        return new Date(year, month, day, hour, minute, second);
    }

    public static DateTimeZone GetZoneFromId(String id) {
        return DateTimeZoneProviders.Tzdb[id];
    }

    public static String GetYourZoneId() {
        return DateTimeZoneProviders.Tzdb.GetSystemDefault().Id;
    }

    public static long Subtract(
        Date minuend, Date subtrahend, DateTimeZone zone) {
        long ticks;

        if(null==zone)
            ticks=minuend.Subtract(subtrahend).Ticks;
        else {
            var rhs=
                LocalDateTime.FromDateTime(subtrahend)
                .InZoneLeniently(zone);

            var lhs=
                LocalDateTime.FromDateTime(minuend)
                .InZoneLeniently(zone);

            ticks=(lhs.ToInstant()-rhs.ToInstant()).Ticks;
        }

        return ticks/TimeSpan.TicksPerSecond;
    }
}

// extension for Java-like methods in C#
static partial class JavaExtensions {
    public static String toString(this Object x) {
        return x.ToString();
    }
}

class PandaTest { /*/ class PandaTest {
    // in Java
    public static void main(String[] args) {
        Language="Java";
        Main(args);
    }

    static void puts(String arg0) {
        System.out.println(arg0);
    }

    static void ShowDuration(DateTimeZone zone, Date ... args) {
        ShowDuration(zone, new List<Date>(args));
    }

    /*/// in C#
    static void puts(String arg0) {
        Console.WriteLine(arg0);
    }

    static void ShowDuration(DateTimeZone zone, params Date[] args) {
        ShowDuration(zone, args.ToList());
    }

    /**/// the following code are for both C# and Java
    static void ShowDuration(DateTimeZone zone, List<Date> args) {
        int argc=args.Count();
        Date[] argv=args.ToArray();

        puts("--- ");
        puts("Time Zone: "+(null!=zone?zone.toString():"unspecified"));

        for(int i=0; argc-->0; ++i) {
            puts("Time "+i+": "+argv[i]);

            if(i>0) {
                long duration=ClockCant.Subtract(argv[i], argv[i-1], zone);
                puts("Duration = "+duration);
            }
        }
    }

    static void Main(String[] args) {
        Date retainsOfTheDay=ClockCant.MakeTime(1900, 1, 1, 8, 5, 51+0);
        Date somewhereInTime=ClockCant.MakeTime(1900, 1, 1, 8, 5, 51+1);
        DateTimeZone zone=ClockCant.GetZoneFromId("PRC");
        puts("Current Time Zone: "+ClockCant.GetYourZoneId());
        puts("Language: "+Language);
        ShowDuration(null, retainsOfTheDay, somewhereInTime);
        ShowDuration(zone, retainsOfTheDay, somewhereInTime);
    }

    static String Language="C#";
} 
```

要在 Java 中编译，`/*/`请在代码开头添加 a，如下所示：

```
/*/// Like Java, like Sharp ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T09:48:11.597

我相信你的 Joda Time 测试被打破了，因为你让它变得不必要的复杂，基本上。这是一个简单的简短但完整的程序，展示了不同之处：

```
import java.util.*;
import org.joda.time.*;

public class ChinaTest {
    public static void main(String[] args) {
        DateTime startOf1900 = new DateTime(1900, 1, 1, 0, 0, 0, DateTimeZone.UTC);
        DateTime endOf1899 = startOf1900.minusMillis(1);

        DateTimeZone jodaZone = DateTimeZone.forID("Asia/Shanghai");
        System.out.println("Joda at start of 1900: " +
                           jodaZone.getOffset(startOf1900));
        System.out.println("Joda at end of 1899: " +
                           jodaZone.getOffset(endOf1899));
        TimeZone javaZone = TimeZone.getTimeZone("Asia/Shanghai");
        System.out.println("Java at start of 1900: " + 
                           javaZone.getOffset(startOf1900.getMillis()));
        System.out.println("Java at end of 1899: " + 
                           javaZone.getOffset(startOf1900.getMillis() - 1));
    }
} 
```

输出：

```
Joda at start of 1900: 29152000
Joda at end of 1899: 29152000
Java at start of 1900: 29152000
Java at end of 1899: 28800000 
```

所以基本上，Java 的时区认为在 1900 年初有一个过渡，而 Joda Time 没有。

正如我之前所写，Java 的时区实现基本上假定夏令时在 1900 UTC 开始之前不存在 - 所以在夏令时在 1900 年初生效的任何时区*，*这代表了一个过渡.

Joda Time 和 Noda Time 都没有做出这个假设，这就是你看到差异的原因。

这与 Unix 纪元无关，也与 2038 年无关。这意味着您应该期望`java.util.TimeZone`将 1900 UTC 开始之前的任何日期/时间视为该时区的“标准时间”。

# android - Android : OpenGL 2.0 第一人称相机

> ID：16012975
> 
> 赞同：2
> 
> 时间：2013-04-15T10:30:28.063
> 
> 标签：android, opengl-es, opengl-es-2.0

所以我正在尝试在 Android 上学习 OpenGL 2.0，我确实在 iOS 上玩了很多 OpenGL 1，并且非常喜欢它。

我的简单问题是关于相机和制作一个可以移动的 3D 环境（第一人称）

我应该使用

```
Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ); 
```

控制相机和我在世界上的位置（在 onDrawFrame 上更新），或者在 onSurfaceCreated 上设置（一次）并使用

```
Matrix.setIdentityM(mViewMatrix, 0);
Matrix.translateM(mViewMatrix, 0, mMoveY, 0.0f, mMoveX);
Matrix.rotateM(mViewMatrix, 0, mDeltaY, 1.0f, 0.0f, 0.0f);
Matrix.rotateM(mViewMatrix, 0, mDeltaX, 0.0f, 1.0f, 0.0f); 
```

相反，这感觉就像我在旋转我周围的世界。

我曾经在 OpenGL 1 上看到过他们做的例子，我曾经使用 GLLookAt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:08:50.783

这两种方法中的任何一种都可以，因为您可以获得相同的结果。一般的区别在于您希望如何存储对象状态。对于 3D 环境，我总是使用 3 个向量来确定对象状态（位置、向前、向上），并使用修改版本的 lookAt 和 modelMatrix 可以放置具有与 lookAt 相同参数的对象。这种方法的好处是您可以根据其他对象直接放置参数，例如：导弹跟随您，无论您身在何处或如何移动，它始终朝向您。然后它的前向向量是简单的`taregetPosition-missilePosition`（通常是标准化的）。另一方面，如果您必须直接计算角度，则需要做`asin`很多`acos`工作`if`2 个角度中的每一个的陈述。接下来，例如在房间内简单移动，继续前进：如果您使用基向量，那么`position = position+forward*speedFactor`在使用角度时，您必须再次计算您面对的方向，然后做同样的事情......（有很多情况是有用）

但也有缺点。您需要拥有自己的系统来移动和旋转这些矢量。例如，如果你想说向左转 45 度，它看起来像这样：

```
forward = (forward+cross(up,forward)*tan(45)).normalized 
```

这仅适用于区间 (-90, 90) 中的角度。出现时它变得完全相同，但您还需要更正向上向量。

所以总结一下，如果你创建了所有使用基向量的方法（旋转、查看、模型矩阵......），它们是一种真正节省劳动力的方法。但这仅取决于您正在编写的项目来决定使用什么。

# ruby-on-rails - 如何在我的 Rails 控制台中执行简单的“Date.today”

> ID：16012978
> 
> 赞同：0
> 
> 时间：2013-04-15T10:30:33.867
> 
> 标签：ruby-on-rails, ruby, datetime, irb

当我`Date.today`在 rails 命令中执行命令时，出现以下错误：

我不能`Date.today`在我的 Rails 控制台中做一个简单的事情

```
ruby-1.9.2-p180 :026 >   >> require 'date'
 => false 

ruby-1.9.2-p180 :027 >   >> Date.today
ArgumentError: invalid date
    from /Users/besi/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/date.rb:809:in `civil'
    from /Users/besi/.rvm/rubies/ruby-1.9.2-p180/lib/ruby/1.9.1/Date.rb:1810:in `today'
    from (irb):27
    from /Users/besi/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.2.11/lib/rails/commands/console.rb:47:in `start'
    from /Users/besi/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.2.11/lib/rails/commands/console.rb:8:in `start'
    from /Users/besi/.rvm/gems/ruby-1.9.2-p180/gems/railties-3.2.11/lib/rails/commands.rb:41:in `<top (required)>'
    from /Users/besi/Dropbox/projects/Freelance/vidis/VidiServer/script/rails:6:in `require'
    from /Users/besi/Dropbox/projects/Freelance/vidis/VidiServer/script/rails:6:in `<top (required)>'
    from -e:1:in `load'
    from -e:1:in `<main>' 
```

在 irb 控制台中，这可以正常工作：

```
ruby-1.9.2-p180 :001 > require 'date'
 => true 
ruby-1.9.2-p180 :002 > Date.today
 => #<Date: 2013-04-15 (4912795/2,0,2299161)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T10:42:45.893

看起来这里的 RubyMine 插件有问题。当我在控制台中做同样的事情时，它会起作用。我不知道为什么这么简单的事情不应该在 RubyMine 中工作。

# c# - 带有适配器和组合框的 DataGridView

> ID：16012980
> 
> 赞同：0
> 
> 时间：2013-04-15T10:30:37.273
> 
> 标签：c#, mysql, data-binding, datagridview

如果我将 DataGridView(dgv) 绑定到适配器，则 d​​gv 会自动填充表的内容。但是，现在显示为文本的列之一，我想将其更改为 ComboBox。

此代码准备一个数据适配器：

```
MySqlDataAdapter awardsAdapter, spendingsAdapter;
DataSet cachedData = new DataSet(); 
MySqlDataAdapter PrepareSpendingsAdapter() {
try {
        MySqlDataAdapter adapter;
        adapter = new MySqlDataAdapter("select * from spendings", connection);
        adapter.TableMappings.Add("Table", "spendings");

        adapter.UpdateCommand = new MySqlCommand(
            "UPDATE spendings SET category=@category, points=@points WHERE id=@id;",
            connection);
        adapter.UpdateCommand.Parameters.Add("@id", MySqlDbType.Int32, 10, "ID");                
        adapter.UpdateCommand.Parameters.Add("@category", MySqlDbType.Int32, 10, "Category");
        adapter.UpdateCommand.Parameters.Add("@points", MySqlDbType.Int32, 10, "Points");                
        adapter.UpdateCommand.UpdatedRowSource = UpdateRowSource.None;

        adapter.InsertCommand = new MySqlCommand(
            "INSERT INTO spendings VALUES (@id,@category,@points);",
            connection);
        adapter.InsertCommand.Parameters.Add("@id", MySqlDbType.Int32, 10, "ID");
        adapter.InsertCommand.Parameters.Add("@category", MySqlDbType.Int32, 10, "Category");
        adapter.InsertCommand.Parameters.Add("@points", MySqlDbType.Int32, 10, "Points");
        adapter.InsertCommand.UpdatedRowSource = UpdateRowSource.None;

        adapter.DeleteCommand = new MySqlCommand(
            "DELETE FROM spendings WHERE id=@id;", connection);
        adapter.DeleteCommand.Parameters.Add("@id", MySqlDbType.Int32, 10, "ID");
        adapter.DeleteCommand.UpdatedRowSource = UpdateRowSource.None;

        return adapter;
    } catch (Exception ex) {
        MessageBox.Show(ex.Message);
    }
    return null;
} 
```

此代码添加了一个额外的列，其中包含我需要的信息

```
DataGridViewComboBoxColumn cmb = new DataGridViewComboBoxColumn();
MySqlDataAdapter adapterSpendCategory = new MySqlDataAdapter("select category,details from spendcategory", connection);
adapterSpendCategory.TableMappings.Add("Table", "spendcategory");
adapterSpendCategory.Fill(cachedData);
cmb.DataSource = cachedData.Tables["spendcategory"];
cmb.DisplayMember = "details";
cmb.ValueMember = "category";
//Put the missing piece of the puzzle here 
```

此代码填充 DataGridView：

```
spendingsAdapter = PrepareSpendingsAdapter();
spendingsAdapter.Fill(cachedData);
dgvPointsSpent.DataSource = cachedData.Tables["spendings"]; 
```

而不是添加这个额外的列，我希望类别列改变并且看起来像额外的列

![在此处输入图像描述](https://i.stack.imgur.com/pHJQm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:55:04.880

如果您使用设计器添加数据网格视图并选择它，您会看到一些属性的小箭头。您通常使用它来将 datagridview 绑定到绑定源。您还可以使用箭头“编辑列”。对于每个coiumn，您可以选择是否必须显示它，以何种顺序以及必须如何显示数据（作为文本？作为组合框？作为数字？）。

因此，如果您已经设法添加了一个适合您需要的组合框列，您所要做的就是转到“编辑列”，选择您不想看到的列，然后将它们从列中的列表中删除datagridview，或使用该列的属性使其不可见。

通常您不会添加额外的列，而是更改属性以显示组合框而不是文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T08:18:53.753

似乎答案是添加行`colCategory.DataPropertyName = "Category"`。在调用之前添加这一行就`spendingsAdapter.Fill(..)`可以了，因为它识别出该列已经存在并且没有创建一个新列。

# svn - 如何给詹金斯正确的权限？

> ID：16012982
> 
> 赞同：5
> 
> 时间：2013-04-15T10:30:51.110
> 
> 标签：svn, jenkins

我在 ubuntu 服务器上安装了 Jenkins。Jenkins 在 tomcat6 下，所有文件都属于用户和组 tomcat6。

当我要求 jenkins 在构建作业之前使用 svn 更新目录时，它似乎有权限访问问题。我尝试上传的目录属于包含用户 tomcat6 的组 www-data。我在上面设置了权限 775，我得到了下面的错误。如果我将权限设置为 777，它就可以正常工作。

我如何知道 jenkins 使用哪个用户进行 svn 更新，并赋予它正确的权限，因为它似乎不是 tomcat6 ？

```
ERROR: Failed to update svn+ssh://myserver/myrepository
org.tmatesoft.svn.core.SVNException: svn: E200030: READONLY 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:52:54.553

最后，我确实发现了问题所在。项目文件由用户 tomcat6 拥有，以允许 jenkins 更新其上的文件。似乎仅仅属于拥有文件的组是不够的，即使有 775 权限。所以一个简单的`sudo chown -R tomcat6:mygroup myproject`确实解决了更新问题

# javascript - 弹出窗口关闭时向父级发送信息，跨域

> ID：16012984
> 
> 赞同：0
> 
> 时间：2013-04-15T10:30:59.093
> 
> 标签：javascript, html

我使用此代码来演示相同域上的概念：

家长：

```
<html>
    <body>
<form>
    <input id="details" name="details">
    <input type="button" name="choice" onClick="window.open('http://domainB.com/popuppage.html','popuppage','width=850,toolbar=1,resizable=1,scrollbars=yes,height=700,top=100,left=100');" value="Open popup">
</form>
</body>
</html> 
```

和弹出文件：

```
<html>
<head>
</head>
<body>
<SCRIPT LANGUAGE="JavaScript">
<!-- Begin
function sendValue (s){
var selvalue = s.value;
window.opener.document.getElementById('details').value = selvalue;
window.close();
}
//  End -->
</script>
<form name="selectform">
<input name="details" value="">
<input type=button value="Copy input to parent opener" onClick="sendValue(this.form.details);">
</form>
</body>
</html> 
```

这很好用，但是由于弹出窗口对父页面的内容进行了修改，`window.opener.document.getElementById('details').value = selvalue;`出于安全原因，这在跨域示例中不起作用。我不想修改父级上的内容，我只想向父级脚本传达一个值，所以我需要父级上的一个侦听器脚本来参加关闭时从弹出窗口发送的信息。这可能吗？备择方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T20:01:53.123

正如 Passerby 所建议的，postMessage ( [https://developer.mozilla.org/en-US/docs/DOM/window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage) ) 是您想要做的事情的理想解决方案。因为它不适用于旧浏览器，你要么必须将你的东西限制在较新的浏览器上，要么使用 iframe 等黑客技术来实现跨域通信。

您可以在弹出窗口中运行 easyXDM 并将 domainA.com 加载到 iframe 中，然后从该 iframe 中您应该能够访问和操作 domainA.com 上启动弹出窗口的其他页面。

# android - 如何使edittext在动画类型中从左到右移动，反之亦然

> ID：16012989
> 
> 赞同：2
> 
> 时间：2013-04-15T10:31:23.553
> 
> 标签：android

我已经对按钮的edittext进行了验证，如果它是空的，将显示一个吐司，说特定的字段是空的，此外还希望edittext让它从左到右移动，反之亦然作为动画形式，这将有助于使应用程序有吸引力是有可能吗？？如果是这样，请帮助我提前谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T10:41:56.730

创建以下内容并将其写入 anim/shake.xml：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromXDelta="0" android:toXDelta="10" android:duration="1000"
    android:interpolator="@anim/cycle_7" /> 
```

创建以下内容并将其写入 anim/cycle_7.xml：

```
<cycleInterpolator xmlns:android="http://schemas.android.com/apk/res/android" android:cycles="7" /> 
```

现在使用 Animation 类通过传入参数为任何视图设置动画。通过传递任何视图调用此方法

```
public void onShake(View v, String your_msg) {
    Animation shake = AnimationUtils.loadAnimation(this, R.anim.shake);
    findViewById(R.id.pw).startAnimation(shake);
    Toast.makeText(this, your_msg, Toast.LENGTH_SHORT).show();
} 
```

# android - 在 Google Play 上上传更新

> ID：16012992
> 
> 赞同：1
> 
> 时间：2013-04-15T10:31:29.413
> 
> 标签：android, google-play

我开发了一个应用程序。在 assets 文件夹中有 SQLite 数据库。然后我在 Google Play 上上传了 .apk。现在我拥有同一应用程序的更新数据库。

所以我的问题是：

**1.如何上传更新的SQLite数据库。**

我应该创建新的 .apk 并上传它。如果是，那么：

**2\. 用户必须重新下载.apk 还是只提示更新？**

我不清楚。到目前为止，我刚刚上传了非更新应用程序。所以请指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T10:33:51.657

> 如何上传更新的 SQLite 数据库。我应该创建新的 .apk 并上传它。

=> 由于您通过放置在`Assets`文件夹中拥有静态数据库，因此您必须包含更新的数据库并上传使用相同密钥库签名的新 APK。

> 用户必须再次下载 .apk 还是只提示更新？

=> 是的，只要您为同一应用上传新的 APK，用户就会收到应用更新的通知。