# StackOverflow 问答 14866000-14866999

# java - XML 中的空白

> ID：14866004
> 
> 赞同：0
> 
> 时间：2013-02-14T00:47:58.123
> 
> 标签：java, xml, xpath

我正在尝试使用来自 SBA api 的 xml 文件。

> [http://api.sba.gov/loans_grants/federal_and_state_financing_for/ny.xml](http://api.sba.gov/loans_grants/federal_and_state_financing_for/ny.xml)

问题是当我尝试用 xpath 解析这个 xml 时，我得到了这个错误：

> [致命错误] loan_grants.dtd:3:22：元素“count”的属性“CDATA”声明中的属性类型之前需要空格。线程“main”org.xml.sax.SAXParseException 中的异常：元素“count”的属性“CDATA”声明中的属性类型之前需要空格。

观察 xml 文件后，我认为问题出在以下几行和之后的类似行中：

`<grant_loans count="103">`

`<industry nil="true"/>`

`<state_name nil="true"/>`

`count`我认为如果and`"103"`和`nil`and之间有空格，`"true"`那么这个错误就不会发生。由于整个 xml 太大，我复制了其中的一部分并进行了这些更改并保存在我的本地存储中。然后我可以运行并解析它而不会出错。我只是放了一些这样的空格：

```
<grant_loans count = "103"> 
```

如何使用我的程序对所有需要空间的地方执行此操作，然后将其用于进一步解析？

如果您需要，我可以在这里发布我的 java 代码，但该代码适用于其他 xml 文件，所以我认为这个 xml 文件有问题。

**编辑**

Java代码段：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    DocumentBuilder builder;
    Document doc = null;
    XPathExpression expr = null;
    builder = factory.newDocumentBuilder();
    doc = (Document) builder
            .parse("http://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway&sensor=false");

    // Create a XPathFactory
    XPathFactory xFactory = XPathFactory.newInstance();

    // Create a XPath object
    XPath xpath = xFactory.newXPath();

    // Compile the XPath expression
    expr = xpath.compile("//geometry/location/lat/text()");
    System.out.println("expr" + expr);
    // Run the query and get a nodeset
    Object result = expr.evaluate(doc, XPathConstants.NODESET);

    // Cast the result to a DOM NodeList
    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i).getNodeValue());  
    }

                       //this works
// 
// some other code
//
builder = factory.newDocumentBuilder();
    url = "http://api.sba.gov/loans_grants/federal_and_state_financing_for/ny.xml";
    doc = builder.parse(url); // problem occurs here
    xFactory = XPathFactory.newInstance();

    // Create a XPath object
    xpath = xFactory.newXPath();

    // Compile the XPath expression
    expr = xpath.compile("//grant_loan/url/text()");
    result = expr.evaluate(doc, XPathConstants.NODESET);

    // Cast the result to a DOM NodeList
    nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i).getNodeValue());
    }

//other stuffs 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:10:46.053

这不是 XML。它告诉您[DTD](http://api.sba.gov/dtd/loans_grants.dtd)已被顶起。请注意`loans_grants.dtd:3:22`错误开头的 。它指向第 3 行：

```
<!ATTLIST count CDATA> 
```

这可能应该改为

```
<!ATTLIST grant_loans count CDATA #REQUIRED> 
```

错误指出an的[正确格式](http://www.w3schools.com/dtd/dtd_attributes.asp)`ATTLIST`是：

```
<!ATTLIST element-name attribute-name attribute-type default-value> 
```

它在第三个位置看到字符串“CDATA”，假定这是属性名称，并且仍然希望获得属性类型，但相反，它找到了`ATTLIST`. 这就是为什么它给出了关于预期空白的可能令人困惑的信息。

最有可能的是，当您复制一些 xml 以在本地运行时，您放弃了 DTD 声明，这也可以解决问题。

# asp.net - 我可以使用外部配置文件并且在源 web.config 中还有子元素吗？

> ID：14866005
> 
> 赞同：1
> 
> 时间：2013-02-14T00:48:02.477
> 
> 标签：asp.net, iis-7, web-config

出于不值得讨论的原因，我想知道是否可以通过一些设置将 web.config 的一部分外部化，并且在原始.config 中也有一些设置？

像这样：

网络配置：

```
 <connectionStrings configSource = "conn.config">
    <add name="blahblah3" connectionString="Blah3>
 </connectionStrings> 
```

连接配置：

```
 <connectionStrings>
        <add name="Blahblah" 
             connectionString="blah1" />
        <add name="blahblah2"
             connectionString="blah2" />
   </connectionStrings> 
```

以上可能吗？

# html - div的相邻对齐

> ID：14866007
> 
> 赞同：0
> 
> 时间：2013-02-14T00:48:04.217
> 
> 标签：html, css

如何移动与前一个 div 相邻的 div ...？我给了浮动属性并减小了宽度......仍然无法正常工作......在下面提供我的代码......

[http://jsfiddle.net/YQYBG/1/](http://jsfiddle.net/YQYBG/1/)

```
 <div style="padding-left: 41px; padding-top: 10px;">
     <a class="" href="#">
        <img alt="change" class="defieLogo" src="http://www.defie.co/designerImages/defie_logo_only.png">
     </a>
     <p style="margin-top: 5px; margin-bottom: 0px;">47657 Lakeview Blvd, Fremont CA 94538</p>
     <p>Tel: 510-657-8981 <span style="padding-left: 18px;">wwww.abcdfg.com</span></p>
 </div>

 <div style="border: 1px solid red; width: 300px;">
     <p style="">Vendor No ABC01</p>
     <p style="">Purchase Order No 100001</p>
     <p style="">Est. Ship Date 2/24/2013</p>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T00:54:51.380

它对我有用，除了两个需要的元素外，删除了所有内容。

应用

`float:left;`

到第一个 div。

[http://jsfiddle.net/YQYBG/3/](http://jsfiddle.net/YQYBG/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:52:14.527

`display: inline-block`在 div 上使用。

[http://jsfiddle.net/YQYBG/2/](http://jsfiddle.net/YQYBG/2/)

# windows - 为什么在模拟会话中定义的 DOS 设备不会出现在资源管理器中

> ID：14866008
> 
> 赞同：5
> 
> 时间：2013-02-14T00:48:05.720
> 
> 标签：windows, winapi, impersonation, remote-desktop, terminal-services

我有一个在本地系统帐户下运行的 Windows 服务，它使用 DefineDosDevice 函数创建 DOS 设备。该服务在 W2K8 远程桌面服务器上运行。如果设备是使用服务的凭据创建的，则它们是在 GLOBAL 设备命名空间中创建的，因此对所有用户可见。我需要仅对特定交互会话可见的设备。

我通过模拟我希望驱动器出现在其会话中的用户来实现这一点。这相当简单，只要会话 id 可用。这是我为说明问题而编写的一个简单的测试应用程序：

```
int _tmain(int argc, _TCHAR* argv[])
{
BOOL result = TRUE;

if(argc > 3 && !wcscmp(argv[2], L"/i"))
{
    HANDLE hToken = 0;
    DWORD dwSessionId = _wtoi(argv[3]);
    result = WTSQueryUserToken(dwSessionId, &hToken);
    if(result) result = ImpersonateLoggedOnUser(hToken);
}
if(result)
{
    LPTSTR drive = argv[1];
    DefineDosDevice(DDD_REMOVE_DEFINITION, drive, NULL);
    result = DefineDosDevice(0, drive, L"C:\\test");
}

if(!result)
{
    printf("Error: %d\n", GetLastError());
}
return 0;
} 
```

为了测试这段代码，我创建了一个在 LocalSystem 帐户下启动命令 shell 的服务：

> sc create test_svc binpath=“cmd /K start”类型=自己的类型=交互

此服务无法启动，但在它失败之前，它会生成一个在 LocalSystem 帐户下运行的命令 shell。

从 LocalSystem cmd.exe，我运行：

> MySubst.exe x: /i 2

它调用 ImpersonateLoggedOnUser()，然后调用 DefineDosDevice()

从用户会话中运行的 cmd.exe，我运行：

> MySubst.exe y：

**在不**调用 ImpersonateLoggedOnUser() 的情况下调用DefineDosDevice 。

这行得通。从 cmd.exe 我可以访问两个驱动器 X: 和 Y:。我可以从开始菜单启动 notepad.exe，然后查看 X: 和 Y: 驱动器。此外，如果我与其他用户创建新的终端服务会话，我看不到 X: 或 Y:。

但是，资源管理器仅在“所有计算机”下显示 Y：驱动器。Y：是通过在目标会话中运行的 cmd.exe 运行我的测试应用程序创建的驱动器，即未完成模拟。如果我从任务管理器重新启动 explorer.exe，X: 和 Y: 驱动器都会出现。

我还使用 SysInternals 的 WinObj.exe 来检查定义的 Win NT 设备。我看到的是：

```
- Sessions
    - 0
        - DosDevices
            00000000-000057607 
```

（57607 是与我正在模拟的会话关联的登录会话的 ID）

“00000000-000057607”的内容为：

```
Global    SymbolicLink    \Global??
X:        SymbolicLink    \\??\C:\test
Y:        SymbolicLink    \\??\C:\test 
```

根据 WinObj，这两个 dos 设备是相同的。它们属于同一个会话和登录会话。它们是指向同一个 NT 对象的符号链接。

怎么可能其中一个出现在资源管理器中而另一个没有。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T17:53:44.890

@arx 和 @HarryJohnston 很赚钱。如果我从与资源管理器相同的会话中的线程广播 WM_DEVICECHANGE 消息，则新驱动器将出现在我的电脑中。这是代码：

```
DWORD recipients = BSM_ALLDESKTOPS | BSM_APPLICATIONS;

DEV_BROADCAST_VOLUME msg;
ZeroMemory(&msg, sizeof(msg));
msg.dbcv_size = sizeof(msg);
msg.dbcv_devicetype = DBT_DEVTYP_VOLUME;
msg.dbcv_unitmask = 1 << ('X' - 'A');

long success = BroadcastSystemMessage(0, &recipients, WM_DEVICECHANGE, DBT_DEVICEARRIVAL, (LPARAM)&msg); 
```

# javascript - 通过移动 Safari 中的 getUserMedia 在 iPhone 上选择视频后，如何播放视频文件？

> ID：14866012
> 
> 赞同：0
> 
> 时间：2013-02-14T00:48:23.863
> 
> 标签：javascript, iphone, video, mobile-safari, getusermedia

对于任何可以提供帮助的人，我都束手无策，不知道如何从我的 iphone 播放 tmp 视频文件。我正在使用 getUserMedia，我可以将文件保存到我的数据库并在上传后播放。但是，我想在将视频发送到数据库之前预览它。那可能吗？页面流程如下所示： 1\. 录制视频，单击链接，然后 2\. 显示一个新页面，其中正在播放 tmp 文件。我像这样引用 tmp 文件： $_FILES["media"]["tmp_name"]; （当我从数据库中调用同一个文件时，我只需添加一个 .mov 就可以正常播放）。有人有想法么？提前谢谢！

```
<!-------- HTML & VIDEO CAPTURE / page 1 -------->
<form action="play_video.php" method="post" enctype="multipart/form-data">
<input type="file" name="media" id="media" accept="video/*" capture="camcorder" style="display:none; width:0px; height:40px;padding:0px;">
<input type="submit" name="submit" id="submit" value="Submit"/>
</form>

<!-------- play_video.php / page 2 -------->
<script>
$(".play").click(function() {
var video_src = "<?php echo $_FILES["media"]["tmp_name"]; ?>";
var videoUrl = video_src + ".mp4";

$('#frag source').attr('src', videoUrl);
$('#frag')[0].load();
$('#frag')[0].play();
});
</script>

<body>
<video id="frag" autoplay controls>
<source src="" type="video/mp4">
</video>
<div class="play">play vid</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:37:39.990

我刚刚在 Apple iPhone 论坛上读到无法从 iphone 的文件系统中读取 tmp 文件。哦，好吧，我想我只是将文件保存到 tmp 数据库。

无论如何，谢谢。

# javascript - 调试 Javascript（主干和木偶）

> ID：14866014
> 
> 赞同：14
> 
> 时间：2013-02-14T00:48:41.273
> 
> 标签：javascript, backbone.js, google-chrome-devtools, marionette

现在，当我使用 chrome 开发工具调试主干或木偶时，我最终设置了断点和诸如此类的东西，但是一旦代码暂停，就很难判断我正在使用什么类型的对象，因为 chrome 将所有内容标记为“孩子”。
（我认为因为那是构造函数）

是否有任何简单的方法可以更改此声明或确定我正在使用哪种类型的模型/集合。

这导致我的疯狂程度想要开始做这样的事情：

```
MyModel = Backbone.Model.Extend({
    // the $$$ puts it at the top of the inspector, the NAME is just for other devs
    $$$NAME = "MyModel",  
    ...
}); 
```

我真的不喜欢它，因为它......丑陋，它是一个变量......它只有在我检查和扩展变量时才有帮助......改变 chrome 用来显示它的名称会很棒。

无论如何，有人知道如何更改名称吗？还是您使用其他一些更清洁的约定？

谢谢！

马特

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-22T22:07:58.577

**背景**

看看为什么浏览器使用“child”在控制台/调试器中显示 Backbone 对象的类型是很有趣的。

所有 JavaScript 对象都有一个构造函数属性，即对用于创建对象的函数的引用。浏览器使用构造函数在控制台/调试器中显示对象的“类型”。如果构造函数的 name 属性的值不为空，则将使用它。但是，只有使用命名函数表达式定义的函数才能获得有用的名称属性：

```
function A() {  }
console.log(A.name); // 'A' 
```

匿名函数有一个空的 name 属性：

```
var B = function() {  };
console.log(B.name); // '' 
```

那么，匿名函数会发生什么？Chrome 从函数首次分配的变量或属性的名称推断匿名函数的名称。这里有些例子：

```
// 1\. named function expression - objects will show as “a” in the console
function a() { … }

// 2\. anonymous function assigned to variable - objects will show as “b” in the console
var b = function(){ … };

// 3\. anonymous function assigned to property of object - objects will show as “container.c” in the debugger
var container = {
    c: function() { … }
}; 
```

此处提供了更详细的脚本：http: [//jsfiddle.net/danmalcolm/Xa7ma/6/](http://jsfiddle.net/danmalcolm/Xa7ma/6/)

浏览器似乎从源代码中获得了这个名称——没有一个 JavaScript 功能可以在运行时告诉您函数分配给的第一个变量的名称。其他浏览器支持使用在匿名构造函数上定义的 displayName 属性的约定，但这目前在 Chrome 中不会发生：[http](http://code.google.com/p/chromium/issues/detail?id=17356) ://code.google.com/p/chromium/issues/detail?id=17356 。

回到 Backbone，假设你没有使用自定义构造函数（见下文），你的类型最终会得到一个匿名构造函数，它是在模型、视图、集合和路由使用的[Backbone 的扩展函数](http://backbonejs.org/docs/backbone.html#section-186)中创建的，如下所示：

```
child = function(){ return parent.apply(this, arguments); }; 
```

这就是您在控制台/调试器中的 Backbone 对象旁边看到“子”的原因。这是浏览器对对象构造函数的合适名称的最佳猜测。

**解决方案**

为了给您的对象一个更好的类型名称，您可以在定义 Backbone 类型时通过第一个“protoProps”参数提供一个命名构造函数。只需添加一个包含对“父”构造函数的调用的构造函数属性，如下所示：

```
var Product = Backbone.Model.extend({
    constructor: function Product() {
        Backbone.Model.prototype.constructor.apply(this, arguments);
    }
}); 
```

您的 Product 模型实例现在在调试器中看起来*非常好。*

对您定义的每个 View、Model、Collection 和 Route 执行此操作有点麻烦。您可以使用猴子补丁 Backbone 的扩展功能来为您完成这项工作。

您首先需要建立定义类型名称的约定。在这里，我们使用一个`__name__`属性，您指定如下：

```
var Product = Backbone.Model.extend({
    __name__: 'Product'
    // other props
}); 
```

然后，您替换 Model、View、Collection 和 Route 使用的扩展函数来读取此属性并将命名构造函数添加到您的类型。您不需要修改backbone.js 本身，只需将以下内容包含在一个单独的脚本中，该脚本在backbone.js 之后加载。

```
(function () {

    function createNamedConstructor(name, constructor) {

        var fn = new Function('constructor', 'return function ' + name + '()\n'
            + '{\n'
            + '    // wrapper function created dynamically for "' + name + '" constructor to allow instances to be identified in the debugger\n'
            + '    constructor.apply(this, arguments);\n'
            + '};');
        return fn(constructor);
    }

    var originalExtend = Backbone.View.extend; // Model, Collection, Router and View shared the same extend function
    var nameProp = '__name__';
    var newExtend = function (protoProps, classProps) {
        if (protoProps && protoProps.hasOwnProperty(nameProp)) {
            // TODO - check that name is a valid identifier
            var name = protoProps[nameProp];
            // wrap constructor from protoProps if supplied or 'this' (the function we are extending)
            var constructor = protoProps.hasOwnProperty('constructor') ? protoProps.constructor : this;
            protoProps = _.extend(protoProps, {
                constructor: createNamedConstructor(name, constructor)
            });
        }
        return originalExtend.call(this, protoProps, classProps);
    };

    Backbone.Model.extend = Backbone.Collection.extend = Backbone.Router.extend = Backbone.View.extend = newExtend;
})(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T06:45:31.807

是的。`constructor`您可以通过使用命名函数表达式覆盖模型/集合/视图来更改控制台显示名称。`toString`当模型被强制使用字符串类型时，覆盖以控制控制台输出也可能是有帮助的，例如，`+`运算符：

```
App.Model = Backbone.Model.extend({

  //define constructor using a named function expression
  constructor: function Model() {
    Backbone.Model.prototype.constructor.apply(this, arguments);
  },

  //override toString to return something more meaningful
  toString: function() {
    return "Model(" + JSON.stringify(this.attributes) + ")";
  }
}); 
```

所以：

```
var model = new Model({id:1,foo:"bar"})

console.log("state: " + model);
console.log(model); 
```

你会得到：

```
state: Model({"id":1,"foo":"bar"})
► Model 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-07T05:39:50.453

考虑使用这个扩展[的这个](https://github.com/Maluen/Backbone-Debugger)[库](http://andrewterris.com/backbone.debug/)进行调试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-27T03:24:05.737

也尝试添加

```
"use strict" 
```

在您的应用程序的顶部。它不会在backbone.marionette.js 的第1 行上给您提供堆栈跟踪错误（例如未定义），而是会输出实例并且是更具描述性的信息，例如未找到HistoryView。

# ruby-on-rails - 为什么我的 Rspec 测试失败了？

> ID：14866015
> 
> 赞同：0
> 
> 时间：2013-02-14T00:48:45.683
> 
> 标签：ruby-on-rails, rspec

我正在编写一个用于练习的小型 Rails 待办事项应用程序。我正在尝试为各种事情编写自己的 Rspec 测试，而不仅仅是遵循教程。我只有几个测试，但有几个失败了，我不知道为什么。我尝试在这里发布问题作为最后的手段，但每次我在这里提出问题时，我都得到了解决问题的好方法。

这是一些代码：

```
require 'spec_helper'

describe "TodosPages" do
  describe "home page" do
before { visit root_path }

it "should have the content 'Todo App'" do      
    page.should have_content('Todo App')
end  
it "should have title tag" do       
    page.should have_selector 'title'
end  
  it "should delete a todo and redirect to index" do    
      expect { click_link "Delete last todo" }.to change(Todo, :count).by(-1)
      response.should redirect_to :action => 'index'
  end
 describe "Add Todo" do
  subject { page }
   before {click_button "Add todo"}
   it { should have_selector('div.alert.alert-success', text: 'Todo Successfully Created') }

  end

  it "should have a error message" do
    pending
  end

  it "should create a Todo" do
   expect { click_button "Add todo" }.to change(Todo, :count).by(1)
  end

 end

end 
```

* * *

```
 todos_controller

  class TodosController < ApplicationController
  def index
    @todo_items = Todo.all
    @new_todo = Todo.new
    render :index

  end

  def delete
    @todo_delete = Todo.last
    @todo_delete.delete
    redirect_to :action => 'index'

  end

   def add
   todo = Todo.create(:todo_item => params[:todo][:todo_item])
   unless todo.valid?
     flash[:error] = todo.errors.full_messages.join("<br>").html_safe
   else
     flash[:success] = "Todo Successfully Created"  
   end
  redirect_to :action => 'index'
end

def complete
    params[:todos_checkbox].each do |check|
       todo_id = check
       t = Todo.find_by_id(todo_id)
       t.update_attribute(:completed, true)
     end
     redirect_to :action => 'index'
    end
  end 
```

* * *

```
 index.html.erb

<% @title = "Todo App" %>
<div class="container"> 
    <div class="row">
     <div class='span6' >

      <h1 class="hero-unit">Simple Todo App</h1>

      <p>All your todos here</p>
            <%= form_for @new_todo, :url => { :action => "add" }  do |f|  %>
            <%= f.text_field  :todo_item %>
            <%= f.submit "Add todo", class: "btn btn-primary" %>
         <%end%>

            <% if flash[:error] %>
             <div class="alert alert-error">
                <button type="button" class="close" data-dismiss="alert" >×</button>
                <strong><%= flash[:error] %></strong>
                </div>
            <% end %>

            <% if flash[:success] %>
           <div class="alert alert-success">
             <button type="button" class="close" data-dismiss="alert" >×</button>
                <strong><%= flash[:success] %></strong>
           </div>
      <% end %>

<div class="well">
    <%= form_tag("/todos/complete/", :method => "post") do %>
        <ul style="list-style-type:none;">
        <% @todo_items.each do |t| %> 
         <% if t.completed == true %>
         <li style="color:grey;"> <%= check_box_tag  "todos_checkbox[]",t.id %>  <strike><%= t.todo_item %></strike> </li>
      <% else %>
         <li> <%= check_box_tag  "todos_checkbox[]",t.id %> <%= t.todo_item %> </li>
      <% end %>
            <%end%>
            </ul>
                <%= submit_tag("Complete Todos", :class=>"btn btn-success") %>
            <%end %>
        </div> <!-- well --> 
        <%=  link_to "Delete last todo", delete_path %>

    </div> <!-- span6--> 
 </div> <!-- row --> 
```

```
 Failures:

 1) TodosPages home page should create a Todo
 Failure/Error: expect { click_button "Add todo" }.to change(Todo, :count).by(1)
   count should have been changed by 1, but was changed by 0
 # ./spec/views/index_page_spec.rb:29:in `block (3 levels) in <top (required)>'

 2) TodosPages home page should delete a todo and redirect to index
 Failure/Error: expect { click_link "Delete last todo" }.to change(Todo, :count).by(-1)
 NoMethodError:
   undefined method `delete' for nil:NilClass
 # ./app/controllers/todos_controller.rb:11:in `delete'
 # (eval):2:in `click_link'
 # ./spec/views/index_page_spec.rb:14:in `block (4 levels) in <top (required)>'
 # ./spec/views/index_page_spec.rb:14:in `block (3 levels) in <top (required)>'

 3) TodosPages home page Add Todo 
 Failure/Error: it { should have_selector('div.alert.alert-success', text: 'Todo Successfully   Created') }
   expected css "div.alert.alert-success" with text "Todo Successfully Created" to return something
 # ./spec/views/index_page_spec.rb:20:in `block (4 levels) in <top (required)>'

 Finished in 0.33114 seconds
 8 examples, 3 failures, 1 pending

 Failed examples:

 rspec ./spec/views/index_page_spec.rb:28 # TodosPages home page should create a Todo
 rspec ./spec/views/index_page_spec.rb:13 # TodosPages home page should delete a todo and redirect to index
 rspec ./spec/views/index_page_spec.rb:20 # TodosPages home page Add Todo 

 Randomized with seed 32260 
```

提前致谢！

------Todo.rb

* * *

```
 class Todo < ActiveRecord::Base
    attr_accessible :todo_item, :completed
    validates :todo_item, presence: true , length: { maximum: 25 }

    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:58:55.517

我会试一试。没有特别的顺序：

**测试 2（TodosPages 主页应该删除一个待办事项并重定向到索引）**

看起来你的 Todo 表在你的测试数据库中是空的，所以当你在控制器操作中调用 Todo.last 时，你会得到 nil，然后尝试在 nil 上调用 delete。

我在您的测试中看不到您在删除测试之前至少创建了一个 Todo 对象的任何地方。

另外，在您的控制器中，您可能需要考虑使用destroy 而不是delete 方法。

**测试 1（TodosPages 主页应该创建一个 Todo）**

在验证方面，您的 Todo 模型中有哪些内容？是否有任何必填字段？我猜 :todo_item 是必填字段，但是在您的 rspec 测试中，您只需单击按钮并且不为该字段提供任何输入，因此它可能无法通过模型验证。

在添加的控制器操作中，使用 create！而不是创建，如果模型验证失败，它应该会给你额外的错误消息。

**测试 3（TodosPages 主页添加 Todo ）**

可能与上述测试失败的原因相同，即验证失败。首先修复它，然后查看此测试是否通过。

希望这可以帮助。

编辑：通过参数的测试示例

我个人的偏好是将控制器测试（测试特定的控制器功能）与集成类型测试（确保页面正确填充，按钮出现并且可点击等）分开。对于后者，我喜欢使用 Cucumber。然后你可以使用 Rspec 编写一些更简单的控制器测试，它允许你测试特定的逻辑以及将参数直接传递给你正在测试的动作。测试看起来像

```
describe "add Todo" do
 it "increases count by 1" do 
  expect {post: :add, todo_item: "string"}.to change(Todo, :count).by(1)
 end
end 
```

或者，如果您想继续在 Rspec 中进行集成测试（假设您使用 Capybara 来模拟浏览器），那么您需要为您的 todo_item 文本字段提供一个唯一的 id 或名称，您可以这样做：

```
it "should create a Todo" do
 fill_in "*todo_item_unique_id" with "some text"
 expect { click_button "Add todo" }.to change(Todo, :count).by(1)
end 
```

# objective-c - 是否使用保护 setter 和 getter 的属性？

> ID：14866017
> 
> 赞同：2
> 
> 时间：2013-02-14T00:49:15.330
> 
> 标签：objective-c

如果我声明一个具有属性的类，例如：

```
@property float radius, diameter; 
```

所以任何将在这个类中创建或继承自它的对象，都会有自己的实例，`radius`对`diameter`吗？

这也意味着他们也有自己的 setter 和 getter 对吗？

我试图完全理解的是如何以两种方式处理变量访问：

1.当我想确保用户没有弄乱原始值时。

2.当我想限制实例变量的用户时，他可以访问而他不能访问。

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:05:54.703

至于第一部分，是的，任何子类都将继承它的超类属性和方法，只要它们是公共的。只需记住将它们合成以获取 getter 和 setter。

因此，如果您想拥有一个无法修改的公共属性：

```
// This returns a copy - whatever the receiver does with it doesn't affect the original
@property (nonatomic, copy) BOOL someVariable;

// This declares the property as only having a getter - no setter
@property (nonatomic, readonly) NSArray *someArray; 
```

除非另有说明，否则在头文件中声明的任何属性都被视为公共属性。如果您想拥有私有属性、ivars 或方法，请在您的实现文件中的类延续类别中声明它们：

```
// In your .m *above* the @implementation MyClass
@interface MyClass()
@property (nonatomic, strong) NSArray *myPrivateModel;
@end 
```

斯坦福大学在 iTunesU 上做了一个很棒的系列讲座，我真的推荐它来学习 ObjectiveC

希望有帮助

# jsp - struts2 url 到默认命名空间图像

> ID：14866028
> 
> 赞同：2
> 
> 时间：2013-02-14T00:49:39.987
> 
> 标签：jsp, url, tomcat, web-applications, struts2

我在 some.address/webapp/images/ 中有很多图像，这些图像在我的应用程序中的各种 JSP 中引用。

当图像在默认命名空间 (/) 中的操作中被引用时，它们可以很好地检索：`<img src="images/x.png" />`但如果操作在另一个命名空间中，显然它会尝试在[http://some.host/webapp/namespace/images找到图像/x.png](http://some.host/webapp/namespace/images/x.png)

我需要能够在 JSP 中检索到图像的正确路径。

我试过这个：

```
<img src="<s:url value='images/x.png' namespace='/' />" /> 
```

但命名空间似乎被忽略了，它试图访问上面 URL 中的图像。

没有在 src 属性中显式写入完整路径的情况下解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:20:44.577

你试过了吗：

```
<img src="<s:url value="/images/x.png"/>"/> 
```

您需要一个可公开访问的图像文件夹。

即：[http](http://some.host/webapp/images/x.png) ://some.host/webapp/images/x.png需要是指向图像的 url。

这就是我的 css 文件的读取方式：

```
<link href="<s:url value="/style/cssbase-min.css"/>" rel="stylesheet" type="text/css"> 
```

JavaScript 看起来像：

```
<script src="<s:url value="/script/jquery/1.8.1/jquery.min.js"/>"></script> 
```

像这样定义 css 和 js 文件非常有用，因此如果有人决定以不同的名称部署应用程序，这是完全合理的，您的应用程序也将是合理的。

# c# - Crystal Report 参数再次不起作用

> ID：14866031
> 
> 赞同：2
> 
> 时间：2013-02-14T00:49:57.763
> 
> 标签：c#, winforms, parameters, crystal-reports

我正在尝试将参数传递给我的报告。我尝试了不同的方法，但每次它都会提示我输入参数值。我阅读了大量类似的问题，但对我没有任何帮助。

`P_REQUEST_ID`是一个静态数字参数字段，用于过滤报表中的数据。

这是我的代码：

```
// creating report
var reportDocument = new ReportDocument();
reportDocument.Load("ReportRequestPrice.rpt");

// creating report form 
var dialog = new FormReport();

// not working
var paramFields = new ParameterFields();
var paramField = new ParameterField();
var paramDiscreteValue = new ParameterDiscreteValue();
paramField.Name = "P_REQUEST_ID";
paramDiscreteValue.Value = 1;
// not working
// paramDiscreteValue.Value = "1";
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);
dialog.reportViewer.ParameterFieldInfo = paramFields;

/*
// not working
var param = new ParameterDiscreteValue();
param.Value = 1;
reportDocument.ParameterFields["P_REQUEST_ID"].CurrentValues.Add(param);
// not working
//reportDocument.ParameterFields[0].CurrentValues.Add(param);
*/

// setting datasource
reportDocument.SetDataSource(printshopDS);
reportDocument.Subreports[0].SetDataSource(printshopDS);

dialog.reportViewer.ReportSource = reportDocument;            

dialog.ShowDialog(this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-04T06:44:43.387

可以使用 Crystal Reports for Visual Studio 2005 复制此问题。解决方法是先设置 CrystalReportViewer 的 ReportSource 属性，然后通过属性 ParameterFieldInfo 设置参数值。因此，您的代码应该是：

```
// creating report
var reportDocument = new ReportDocument();
reportDocument.Load("ReportRequestPrice.rpt");

// creating report form 
var dialog = new FormReport();

dialog.reportViewer.ReportSource = reportDocument;            

// not working
var paramFields = new ParameterFields();
var paramField = new ParameterField();
var paramDiscreteValue = new ParameterDiscreteValue();
paramField.Name = "P_REQUEST_ID";
paramDiscreteValue.Value = 1;
// not working
// paramDiscreteValue.Value = "1";
paramField.CurrentValues.Add(paramDiscreteValue);
paramFields.Add(paramField);
dialog.reportViewer.ParameterFieldInfo = paramFields;

// setting datasource
reportDocument.SetDataSource(printshopDS);
reportDocument.Subreports[0].SetDataSource(printshopDS);

dialog.ShowDialog(this); 
```

# svm - predict() 在 scikit learn 中返回与 SVM 的图像相似度

> ID：14866034
> 
> 赞同：2
> 
> 时间：2013-02-14T00:50:30.070
> 
> 标签：svm, scikit-learn

一个愚蠢的问题：在我用 scikit-learn 训练我的 SVM 之后，我必须使用预测函数：predict(X) 来预测属于哪个类？（[http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC.predict](http://scikit-learn.org/dev/modules/generated/sklearn.svm.SVC.html#sklearn.svm.SVC.predict)）

X参数是图像特征向量？如果我给出未训练的图像（未训练，因为 SVM 要求至少 3 个样本作为类），返回什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:21:45.750

第一句话：“predict() 在 scikit learn 中返回与 SVM 的图像相似性”不是问题。请在 Stack Overflow 条目的标题中提出问题。

第二点：sklearn中SVC类的predict方法返回的不是“图像相似度”而是类分配预测。阅读[http://scikit-learn.org](http://scikit-learn.org)文档和[教程](http://scikit-learn.org/stable/tutorial/index.html)，了解机器学习中分类和预测的含义。

> X参数是图像特征向量？

不，X 不是“图像”特征向量：它是一组图像特征向量，其形状`(n_samples, n_features)`如您参考的文档中所述。在您的情况下，样本是图像，因此预期的形状是`(n_images, n_features)`. 出于效率原因，预测 API 旨在一次计算多个预测。如果要计算单个预测，则必须将单个特征向量包装在一个带有 shape 的数组中`(1, n_features)`。

例如，如果您有一个名为`my_single_image_features`shape的单个特征向量 (1D)，`(n_features,)`您可以调用 predict ：

```
predictions = clf.predict([my_single_image_features])
my_single_prediction = predictions[0] 
```

请注意变量`[]`周围的符号以将其转换为二维数组。`my_single_image_features`

`my_single_prediction`将是一个整数，其含义取决于您在`clf.fit(X_train, y_train)`首先调用该方法时提供的整数值。

> 如果我给出未训练的图像（未训练，因为 SVM 要求至少 3 个样本作为类），返回什么？

图像未经“训练”。仅训练模型。当然，您可以将不属于训练集的样本/图像传递给预测方法。这就是机器学习的全部目的：根据你从过去训练数据中看到的统计规律中学到的知识，对新的看不见的数据进行预测。

# mongodb - Mongo 不安全的世界目录

> ID：14866042
> 
> 赞同：3
> 
> 时间：2013-02-14T00:50:52.303
> 
> 标签：mongodb, terminal

我对使用终端命令非常陌生。我试图在我的 Mac 上本地运行一个应用程序，但我遇到了困难，所以我试图找出可能的问题。第一个是使用 mongod 命令时出现流动错误

/usr/local/bin/mongod:3：警告：不安全的世界可写目录 /usr/local 在 PATH，模式 040777 所有输出到：/usr/local/var/log/mongodb/mongo.log

这似乎是一个问题还是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T01:09:26.040

让 /usr/local 世界可写绝不是一个好主意。普通权限只允许超级用户（root）写入这些系统目录。

为了让您更接近默认运行：

```
sudo chmod 755 /usr/local 
```

此外，您可能希望通过运行以下命令清除每个子目录和文件上的世界可写位：

```
sudo chmod -R o-w /usr/local 
```

这意味着您必须以 root 身份启动 mongod 或将数据库路径更改为您可以写入的位置（例如在您的 homedir 中）。

我使用以下命令在我的开发人员机器上运行 mongod：

```
mongod --bind_ip 127.0.0.1 --dbpath ~/mongo -v --profile 2 
```

这意味着以下内容：

*   `--bind_ip 127.0.0.1`确保您网络中的其他人无法访问您的数据库
*   `--dbpath ~/mongo`将数据库文件保存在 mongo 目录中的主目录中
*   `-v`显示正在执行的查询
*   `--profile 2`显示查询的性能和配置文件信息

您应该运行`mongod -h`以查看所有可用选项。

# java - ReadableByteChannel.read() 的行为

> ID：14866045
> 
> 赞同：0
> 
> 时间：2013-02-14T00:50:57.027
> 
> 标签：java

如果在读取操作期间或在后续调用中达到 EOF，read() 是否返回 -1？Java 文档对此并不完全清楚，我正在阅读的书也不是。

本书中的以下代码正在读取具有三种不同类型的重复值的文件，一个双精度值，一个可变长度的字符串和一个二进制长整数。缓冲区应该填充在任何值中间的某个随机位置，代码将处理它。我不明白的是，如果在读取操作**期间**返回 -1 ，则最后一个值不会在 prinf 语句中得到输出。

```
    try(ReadableByteChannel inCh = Files.newByteChannel(file)) {

 `ByteBuffer buf = ByteBuffer.allocateDirect(256);
        buf.position(buf.limit());
        int strLength = 0;
        byte[] strChars = null;

        while(true) {
            if(buf.remaining() < 8) {
                if(inCh.read(buf.compact()) == -1) {
                    break;
                }
                buf.flip();
            }
            strLength = (int)buf.getDouble();

            if (buf.remaining() < 2*strLength) {
                if(inCh.read(buf.compact()) == -1) {
                    System.err.println("EOF found while reading the prime string.");
                    break;
                }
                buf.flip();
            }
            strChars = new byte[2*strLength];
            buf.get(strChars);

            if(buf.remaining() <8) {
                if(inCh.read(buf.compact()) == -1) {
                    System.err.println("EOF found reading the binary prime value.");
                    break;
                }
                buf.flip();
            }
            System.out.printf("String length: %3s String: %-12s Binary Value: %3d%n", 
                                strLength, ByteBuffer.wrap(strChars).asCharBuffer(), buf.getLong());
        }
        System.out.println("\n EOF Reached.");` 

            回答 #1

赞同：1

时间：2013-02-14T03:25:56.867

我建议做一个简单的测试来了解它是如何工作的，像这样

```
 ReadableByteChannel in = Files.newByteChannel(Paths.get("1.txt"));
    ByteBuffer b = ByteBuffer.allocate(100);
    System.out.println(in.read(b));
    System.out.println(in.read(b)); 
```

1.txt 包含 1 个字节，测试打印

```
1
-1 
```

```

# sql - 使用 LIKE 从没有 JOIN 的内部查询中查找 COUNT

> ID：14866046
> 
> 赞同：0
> 
> 时间：2013-02-14T00:50:59.100
> 
> 标签：sql

所以我试图在表格中生成艺术家列表并查找不同表格的所有行中的总匹配项，这些行与名称类似，不准确。我无法加入表格，因为他们没有可加入的 col。

当我使用预设的艺术家姓名运行内部查询时，它会返回正确的计数。但是，作为内部查询运行，它总是返回 0 作为计数。

只是好奇是否有人知道我如何使用 sql 来做到这一点，或者甚至可以做到。否则我可以通过一些循环来弄清楚。这是我在做什么的一个例子：

```
SELECT ar.name, 
    (SELECT COUNT(*) FROM audio au WHERE au.artist LIKE('%'+ar.name+'%')) AS count
FROM artist ar
ORDER BY ar.name ASC; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:59:48.417

尝试：

```
SELECT ar.name, count(*) as count
FROM artist ar, audio au
WHERE au.artist LIKE('%'+ar.name+'%'))
GROUP BY ar.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T00:56:20.093

这是你在找什么？

```
SELECT ar.name, count(*) as count
FROM artist ar, audio au
WHERE (ar.artist like '%'+ar.name+'%')
Group by ar.Name
ORDER BY ar.name ASC; 
```

# applescript - 从文件名创建新文件夹并移动文件

> ID：14866051
> 
> 赞同：-2
> 
> 时间：2013-02-14T00:51:16.167
> 
> 标签：applescript, automator

*（这是我上一个问题的新编辑，获得了-3票。希望这个新的有更好的资格）*

我需要创建一个**Automator 服务**来将大量文件组织到文件夹中。我与**illustrator**合作，从每个**.ai**文件中我创建了另外**3 种格式**：[ **name.pdf** ]、[ **name BAJA.jpg** ] 和 [ **name.jpg** ] ，总共 4 个文件

我的问题是，在一周内，我对 90 多个不同的 .ai 文件重复此过程。所以 90 个文件 * 4 是**360 个独立的文件**都到某个项目文件夹中。

我想将所有 4 个相关文件抓取到一个文件夹中，并将**文件夹名称设置为与 .ai 文件相同**。

由于所有文件名都是相同的（除了一个），我想告诉 finder 抓取所有同名的文件，复制名称，创建一个文件夹并将这些文件放入其中，但我有一个文件名变体 [name LOW.jpg] 也许我可以告诉脚本将其作为例外剥离。

这样我会将所有 4 个文件统一到一个文件夹中。先感谢您

* * *

**更新：**这个问题最初是在 2013 年发布的，现在我有一个解决方案。人们帮我组装了这个脚本以满足我的需要。

我将此添加为一项*服务*，并在 MacO 上分配了一个键盘快捷键。这是代码：

```
on run {input, parameters} -- create folders from file names and move

    set output to {} -- this will be a list of the moved files

    repeat with anItem in the input -- step through each item in the input
        set {theContainer, theName, theExtension} to (getTheNames from anItem)
        try

            # check for a suffix and strip it off for the folder name
            if theName ends with " BAJA" then
                set destination to (makeNewFolder for (text 1 thru -6 of theName) at theContainer)
            else
                set destination to (makeNewFolder for theName at theContainer)
            end if

            tell application "Finder"
                move anItem to destination
                set the end of the output to the result as alias -- success
            end tell
        on error errorMessage -- duplicate name, permissions, etc
            log errorMessage
            # handle errors if desired - just skip for now
        end try
    end repeat

    return the output -- pass on the results to following actions
end run

to getTheNames from someItem -- get a container, name, and extension from a file item
    tell application "System Events" to tell disk item (someItem as text)
        set theContainer to the path of the container
        set {theName, theExtension} to {name, name extension}
    end tell
    if theExtension is not "" then
        set theName to text 1 thru -((count theExtension) + 2) of theName -- just the name part
        set theExtension to "." & theExtension
    end if
    return {theContainer, theName, theExtension}
end getTheNames

to makeNewFolder for theChild at theParent -- make a new child folder at the parent location if it doesn't already exist
    set theParent to theParent as text
    if theParent begins with "/" then set theParent to theParent as POSIX file as text
    try
        return (theParent & theChild) as alias
    on error errorMessage -- no folder
        log errorMessage
        tell application "Finder" to make new folder at theParent with properties {name:theChild}
        return the result as alias
    end try
end makeNewFolder 
```

希望这可以帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-12-26T00:59:18.417

很遗憾你被否决了，因为我个人喜欢回答这类问题，因为它可以帮助我练习和提高自己的技能。

感谢您发布您的解决方案。我认为这是一个很好的姿态，其他人会发现它很有用。

此脚本比使用“系统事件”而不是“Finder”短一些，因此对于大量文件会更快：

```
 set IllustratorOutputFolder to "/Users/CK/Desktop/example"

    tell application "System Events" to ¬
        set ai_files to every file in folder IllustratorOutputFolder ¬
            whose name extension is "ai"

    set Output to {}

    repeat with ai_file in ai_files
        set AppleScript's text item delimiters to "."

        get name of ai_file
        get text items of result

        set basename to reverse of rest of reverse of result as text

        tell application "System Events"
            get (every file in folder IllustratorOutputFolder ¬
                whose name begins with basename)

            move result to (make new folder ¬
                in folder IllustratorOutputFolder ¬
                with properties {name:basename})
        end tell

        set end of Output to result
    end repeat

    return Output -- list of lists of moved files 
```

只是另一种做事方式。并不是说它更好或更坏，而只是一个不同的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:28:43.800

您也可以将其保存为`script.sh`（在纯文本模式下的 TextEdit 中）并`bash script.sh`在终端中运行它：

```
cd ~/Target\ Folder/
for f in *.ai *.pdf *.jpg; do
    dir=${f%.*}
    dir=${dir% LOW}
    mkdir -p "$dir"
    mv "$f" "$dir"
done 
```

# java - 用于格式化二进制数的正则表达式，每 4 个字符有一个空格，在 Java 中从右到左

> ID：14866054
> 
> 赞同：3
> 
> 时间：2013-02-14T00:51:25.763
> 
> 标签：java, regex, binary

我正在为 Android 编写二进制/十进制/十六进制转换器，并尝试使用正则表达式在 Java 中格式化字符串，该正则表达式将从右到左每四个字符添加一个空格。

这段代码从左到右工作，但我想知道是否有办法可以反转它。

```
stringNum = stringNum.replaceAll("....", "$0 "); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:04:38.457

也许不是`StringBuilder`像这样使用正则表达式

```
String data = "abcdefghij";
StringBuilder sb = new StringBuilder(data);
for (int i = sb.length() - 4; i > 0; i -= 4)
    sb.insert(i, ' ');
data = sb.toString();
System.out.println(data); 
```

输出：

```
ab cdef ghij 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:01:58.230

在`C#`你会做类似的事情`Regex.Replace("1234567890", ".{4}", " $0", RegexOptions.RightToLeft)`。

**不幸的是，`Java` [你不能](https://stackoverflow.com/a/2482145/297114)。**

正如 Explossion Pills 在评论中建议的那样，您可以反转字符串，应用正则表达式，然后再次反转它。

另一种解决方案可能是`N`从字符串中获取最后一个数字，其中`N`可以被`4`. 然后您可以成功应用替换，并在开头连接字符串的剩余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:11:34.637

```
String str = "0123456789ABCDE";
// Use a StringBuffer to reverse the string
StringBuffer sb = new StringBuffer(str).reverse();
// This regex causes " " to occur before each instance of four characters
str = sb.toString().replaceAll("....", "$0 ");
// Reverse it again
str = (new StringBuffer(str)).reverse().toString();
System.out.println(str); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-03T11:03:00.147

对我来说，最好的做法是从字符串的开头到结尾：

```
String inputString = "1234123412341234";
int j = 0;
StringBuilder sb = new StringBuilder(inputString);
for (int i = 4; i < kkm.getFiscalNumber().length(); i += 4) {
    sb.insert(i + j, ' ');
    j++;
}
String result = sb.toString(); // 1234 1234 1234 1234 
```

# c# - A 已经使用相同的参数定义了一个名为 B 的成员 - 卡住了

> ID：14866060
> 
> 赞同：-5
> 
> 时间：2013-02-14T00:52:00.973
> 
> 标签：c#, windows, windows-phone-8

我正在尝试为 Windoes Phone 8 制作 Simon Says 游戏，但我碰壁了，无法弄清楚出了什么问题……我非常感谢一些帮助。

问题在于“continueGame”和“initializeColorSequence”参数。

干杯。

```
{
namespace SimonSez
{
    public sealed partial class MainPage : PhoneApplicationPage
    {

        #region Variables
        //Variables
        const int colours_amount = 4;
        const int colour1 = 1;
        const int colour2 = 2;
        const int colour3 = 3;
        const int colour4= 4;
        const int max_seq_count = 100; // TODO: Make 100 for release version
        const String startgame_click = "Click to begin!";
        const String win = "YOU WIN!";

        int currentLengthOfSequence = 0;

        Random randomNumber;
        int[] correctColorSequence;
        int[] playerColorSequence;
        int correctColorSequenceIndex = 0;
        int playerColorSequenceIndex = 0;

        Boolean isPlayerTurn = true;
        Boolean isSequenceCorrect = false;
        Boolean isGameStarted = false;
        Boolean isDoingAnimation = false;

        long timeStart, timeEnd, timeDifference;
        #endregion

        // Constructor
        public MainPage()
        {
            this.InitializeComponent();

            randomNumber = new Random();

            correctColorSequence = new int[max_seq_count];
            playerColorSequence = new int[max_seq_count];
            initializeColorSequence();

            textBlockRoundNumber.Opacity = 0;

            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        private void startGame()
        {
            currentLengthOfSequence = 0;
            //textBlockCenter.Text = "Round " + roundNumber;
            textBlockRoundNumber.Text = currentLengthOfSequence.ToString();
            textBlockRoundNumber.Foreground = new SolidColorBrush(Colors.White);
            textBlockRoundNumber.Opacity = 100;
            textBlockStartGame.Opacity = 0;
            isGameStarted = true;
            playerColorSequenceIndex = 0;
            initializeColorSequence();
            isPlayerTurn = false;
            continueGame();
        }
        private void continueGame()
        {
            isSequenceCorrect = true;
            for (int i = 0; i < playerColorSequenceIndex; i++)
            {
                if (correctColorSequence[i] == playerColorSequence[i])
                {
                    // do nothing
                }
                else
                {
                    isSequenceCorrect = false;
                    break;
                }
            }
        }
              private void initializeColorSequence()
        {
            for (int i = 0; i < max_seq_count; i++)
            {
                correctColorSequence[i] = randomNumber.Next(1, colours_amount);
                playerColorSequence[i] = 0;
            }
        }

              #region Grip Tapping
              private void Rect1_Tap(object sender, GestureEventArgs e)
              {
                  if (isPlayerTurn)
                  {
                      //storyboardRectangle0Player.Begin();
                      //audioPiano12.Volume = 0.5;
                      //audioPiano12.Play();

                      if (isGameStarted)
                      {
                          playerColorSequence[playerColorSequenceIndex++] = colour1;
                          isPlayerTurn = false;
                          continueGame();
                      }
                  }
              }
              private void Rect2_Tap(object sender, GestureEventArgs e)
              {
                  if (isPlayerTurn)
                  {
                      //storyboardRectangle1Player.Begin();
                      //audioPiano12.Volume = 0.5;
                      //audioPiano12.Play();

                      if (isGameStarted)
                      {
                          playerColorSequence[playerColorSequenceIndex++] = colour2;
                          isPlayerTurn = false;
                          continueGame();
                      }
                  }
              }
              private void Rect3_Tap(object sender, GestureEventArgs e)
              {
                  if (isPlayerTurn)
                  {
                      //storyboardRectangle2Player.Begin();
                      //audioPiano12.Volume = 0.5;
                      //audioPiano12.Play();

                      if (isGameStarted)
                      {
                          playerColorSequence[playerColorSequenceIndex++] = colour3;
                          isPlayerTurn = false;
                          continueGame();
                      }
                  }
              }
              private void Rect4_Tap(object sender, GestureEventArgs e)
              {
                  if (isPlayerTurn)
                  {
                      //storyboardRectangle3Player.Begin();
                      //audioPiano12.Volume = 0.5;
                      //audioPiano12.Play();

                      if (isGameStarted)
                      {
                          playerColorSequence[playerColorSequenceIndex++] = colour4;
                          isPlayerTurn = false;
                          continueGame();
                      }
                  }
              }
              private void StartGame_Tap(object sender, GestureEventArgs e)
              {
                  if (textBlockStartGame.Text.Equals(startgame_click))
                  {
                      if (textBlockStartGame.Opacity != 0)
                      {
                          startGame();
                      }
                  }
                  else if (textBlockStartGame.Text.Equals(win))
                  {
                      endGame(startgame_click);
                  }
                  else
                  {
                      // Do nothing
                  }
              }

              #endregion 

              private void continueGame()
              {
                  isSequenceCorrect = true;
                  for (int i = 0; i < playerColorSequenceIndex; i++)
                  {
                      if (correctColorSequence[i] == playerColorSequence[i])
                      {
                          // do nothing
                      }
                      else
                      {
                          isSequenceCorrect = false;
                          break;
                      }
                  }

                  if (isSequenceCorrect)
                  {
                      if (playerColorSequenceIndex >= currentLengthOfSequence)
                      {
                          currentLengthOfSequence++;
                          if (currentLengthOfSequence < max_seq_count)
                          {
                              //audioShinyDing.Volume = 0.5;
                              //audioShinyDing.Play();
                              textBlockRoundNumber.Text = currentLengthOfSequence.ToString();
                          }
                          else // roundNumber == MAX_SEQUENCE_COUNT
                          {
                             // audioApplause.Volume = 0.5;
                              //audioApplause.Play();
                              endGame(win);
                          }
                      }
                      else // playerColorSequenceIndex < roundNumber
                      {
                          //playerColorSequenceIndex++;
                          isPlayerTurn = true;
                      }
                  }
                  else // isSquenceCorrect == false
                  {
                      endGame(startGame);
                  }
              }
              private void endGame(String endGameMessage)
              {
                  isGameStarted = false;
                  textBlockStartGame.Text = endGameMessage;
                  textBlockStartGame.Opacity = 100;
                  textBlockRoundNumber.Foreground = new SolidColorBrush(Colors.Gray);
                  textBlockRoundNumber.Opacity = 40;
                  isPlayerTurn = true;
              }

              #region Helper Functions

              private void initializeColorSequence()
              {
                  for (int i = 0; i < max_seq_count; i++)
                  {
                      correctColorSequence[i] = randomNumber.Next(1, colours_amount);
                      playerColorSequence[i] = 0;
                  }
              }

              private void waitMilliseconds(int waitTime) // Not used
              {
                  timeStart = DateTime.Now.Ticks;

                  long totalWaitTimeInTicks = waitTime * 10000;

                  do
                  {
                      timeEnd = DateTime.Now.Ticks;
                      timeDifference = timeEnd - timeStart;
                  }
                  while (timeDifference < totalWaitTimeInTicks);
              }

              #endregion

    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T00:56:44.593

您似乎有两个名为“continueGame”的函数和两个“initializeColorSequence”，因此它说已经定义了一个成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T00:58:48.790

您似乎在您提供的代码中定义了这两种方法两次。

# c# - Windows 窗体 - 如何在 C# 的组合框中添加不可选择的标题？

> ID：14866064
> 
> 赞同：3
> 
> 时间：2013-02-14T00:52:23.140
> 
> 标签：c#, winforms, combobox

我需要创建一个自定义组合框控件，该控件允许标题作为分隔符，不应使用鼠标移动或按键选择。

这是示例：

```
Header1
  item1
  item2
  item3
Header2
  item4
  item5 
```

我尝试了许多解决方案，但没有成功。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T01:32:28.287

再一次，WPF 可以轻松地提供解决方案，这些解决方案需要在 winforms 中进行大量可怕的 hack。

将我的代码复制并粘贴到 Visual Studio 中的 File -> New Project -> WPF Application 中。

您会很快注意到，我的解决方案不仅为 Header Items 提供了不同的视觉外观，而且还防止了不必要的选择，无论是通过鼠标还是键盘，并且它不需要子类化常规 ComboBox 类，这会导致更少可维护性。

![组合框](../Images/5467c8523e4c7f01dfc4058d54143453.png)

XAML：

```
<Window x:Class="WpfApplication5.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication5"
        Title="Window2" Height="300" Width="300">
    <Grid>
        <ComboBox ItemsSource="{Binding}" DisplayMemberPath="DisplayText"
                  VerticalAlignment="Center" HorizontalAlignment="Center" 
                  Height="25" Width="100">
            <ComboBox.ItemContainerStyle>
                <Style TargetType="ComboBoxItem">
                    <Setter Property="Foreground" Value="Black"/>
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsHeader}" Value="True">
                            <Setter Property="IsEnabled" Value="False"/>
                            <Setter Property="FontWeight" Value="Bold"/>
                        </DataTrigger>
                        <DataTrigger Binding="{Binding IsHeader}" Value="False">
                            <Setter Property="Margin" Value="10,0,0,0"/>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ComboBox.ItemContainerStyle>
        </ComboBox>
    </Grid>
</Window> 
```

代码背后：

```
using System.Collections.Generic;
using System.Windows;

namespace WpfApplication5
{
    public partial class Window2 : Window
    {
        public Window2()
        {
            InitializeComponent();

            var list = new List<ComboBoxItem>
                {
                    new ComboBoxItem {DisplayText = "Header1", IsHeader = true},
                    new ComboBoxItem {DisplayText = "Item1", IsHeader = false},
                    new ComboBoxItem {DisplayText = "Item2", IsHeader = false},
                    new ComboBoxItem {DisplayText = "Item3", IsHeader = false},
                    new ComboBoxItem {DisplayText = "Header2", IsHeader = true},
                    new ComboBoxItem {DisplayText = "Item4", IsHeader = false},
                    new ComboBoxItem {DisplayText = "Item5", IsHeader = false},
                    new ComboBoxItem {DisplayText = "Item6", IsHeader = false},
                };

            DataContext = list;
        }
    }

    public class ComboBoxItem
    {
        public string DisplayText { get; set; }
        public bool IsHeader { get; set; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:25:25.993

试试这个自定义组合框。它忽略标题，但标题的绘制与任何其他项目完全相同，当您选择子项目时，它将包含那些额外的空格。但希望这会引导您朝着正确的方向前进。

```
public class CustomComboBox : ComboBox
{
    int currentlySelectedIndex = -1;

    protected override void OnSelectionChangeCommitted(EventArgs e)
    {
        if (this.SelectedIndex != -1)
        {
            // Check if we shouldn ignore it:
            object currentlySelectedItem = this.Items[this.SelectedIndex];

            if (ShouldIgnore(currentlySelectedItem))
            {
                Console.WriteLine("Ignoring it! Resetting the index.");

                this.SelectedIndex = currentlySelectedIndex;
            }
        }

        base.OnSelectionChangeCommitted(e);
    }

    protected virtual bool ShouldIgnore(object selectedItem)
    {
        // This is a category if it starts with a space. 
        return !selectedItem.ToString().StartsWith(" ");     
    }

    protected override void OnDropDown(EventArgs e)
    {
        // Save the current index when the drop down shows:
        currentlySelectedIndex = this.SelectedIndex;

        base.OnDropDown(e);
    }
} 
```

# c# - 托管 Http 模块的配置文件

> ID：14866066
> 
> 赞同：3
> 
> 时间：2013-02-14T00:52:26.887
> 
> 标签：c#, asp.net, .net, iis-7

我在 IIS 7 上安装了一个自定义 HttpModule，并且运行良好。现在我想将设置放在一个配置文件中，我可以在其中更改它们而无需每次都重新构建一个新模块。

我应该把这些设置放在哪里，因为这个模块没有托管在任何应用程序中并且是服务器级模块。（在任何申请之前执行）。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T05:26:12.407

好的，

这是谷歌搜索的结果和对此问题的更多研究：

1.  还有一个[关于在 iis 中添加自定义部分的问题](https://stackoverflow.com/questions/5750213/edit-config-custom-section-in-iis)
2.  它本身链接到[另一篇文章](http://www.iis.net/learn/develop/extending-iis-configuration/extending-iis-schema-and-accessing-the-custom-sections-using-mwa)

因此，似乎可以在自定义配置部分中存储站点之间的共享配置（由 IIS7 服务器级模块使用）。

# php - 从函数中包含的文件中返回数组值

> ID：14866070
> 
> 赞同：0
> 
> 时间：2013-02-14T00:52:42.920
> 
> 标签：php, arrays, function, if-statement, include

好吧，愚蠢的问题，我想......

我正在尝试这样做：

**文件：** pt.php

```
<?php $langlist = array ( "Car" => "Carro", "Big Car" => "Carro grande") ?> 
```

**文件：** index.php

```
<?php
$lang = 'pt';
if ($lang != 'en') include('locale/' . $lang . '.php');
function __($langstring){
    if ($lang != 'en'){
        echo $langlist[$langstring];
    } else {
        echo $langstring;
    }
}
?> 
```

但这不起作用（注意：未定义的变量：lang 和 langlist）。

我究竟做错了什么？

**PS：**我知道在函数内部使用`echo`而不是`return`不正确，但我不想`echo __();`每次需要使用此函数时都使用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:54:08.740

您的语法错误：

```
<?php $langlist = array { "Car" => "Carro", "Big Car" => "Carro grande"} ?> 
```

应该

```
<?php $langlist = array("Car" => "Carro", "Big Car" => "Carro grande") ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:01:25.207

`$lang`和`$langlist`是全局变量，但在函数内部是看不到的。只需在函数的第一行添加以下内容即可访问它们：

```
global $lang, $langlist; 
```

或者，您可以使用`$GLOBALS['lang']`或`$GLOBALS['langlist']`不使用`global`声明来访问它们。

# apache-flex - 这个接口分配有什么问题？

> ID：14866071
> 
> 赞同：0
> 
> 时间：2013-02-14T00:52:52.130
> 
> 标签：apache-flex, actionscript

我正在尝试构建一些我刚刚继承的旧 ActionScript 代码，我认为这些代码最初是为旧版本的 flex 编写的，而我刚刚开始学习该语言。我在下一行收到一个错误，我不知道如何解决。

```
import mx.collections.ArrayCollection;
import mx.collections.Sort;
// ...
public var actualModelList : ArrayCollection = new ArrayCollection();
// ...
var actualSort : Sort = actualModelList.sort; 
```

`1118: Implicit coercion of a value with static type mx.collections:ISort to a possibly unrelated type mx.collections:Sort.`

我假设它`Sort`实现了一个接口，`ISort`但是在我使用过的其他语言中，这个任务似乎是合法的。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:07:24.507

您的答案就在您的问题本身中，让我们用您的话说-

> Sort 实现了一个接口，ISort，但在我使用过的其他语言中，这个任务似乎是合法的。这段代码有什么问题？

如您所知，Sort 实现了 ISort 接口，或者可以说 ISort 是 Sort 类的基础，因此 Sort 类可以转换为 ISort，但反向不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:12:17.753

这成功了：

```
var actualSort : Sort = actualModelList.sort as Sort; 
```

# objective-c - 从一个 UICollectionViewLayout 切换到另一个时的自定义动画？

> ID：14866079
> 
> 赞同：38
> 
> 时间：2013-02-14T00:53:33.440
> 
> 标签：objective-c, ios6, uicollectionview, uicollectionviewlayout

作为测试，我制作了一种布局，以垂直线显示单元格，另一种以水平布局显示单元格。当我称它为`[collectionView setCollectionViewLayout:layout animated:YES];`两个位置之间的动画时，它非常干净。

现在我想做*的*是让所有视图在最终到达目的地之前在屏幕上进行一些旋转、扭曲和翻转（可能使用 CAKeyframeAnimations），但我找不到一个很好的地方来连接它。

我尝试子类化`UICollectionViewLayoutAttributes`以包含动画属性，然后在我正在使用的重写`applyLayoutAttributes:`方法中设置这些动画。`UICollectionViewCell`这有效......除了它似乎只*在*布局转换完成后发生。如果我想使用它，我必须让布局不要立即更改对象的当前位置，只有在它到达代码的这个应用属性部分之后，这似乎需要做很多工作......

或者我可以 subclass`UICollectionView`和 override `setCollectionViewLayout:animated:`，但这似乎也需要在布局之间保留很多状态。这些选项似乎都不正确，因为有*一种*简单的方法可以为布局*中的单元格添加/删除设置动画。*我觉得应该有类似的东西来挂钩布局 *之间的动画。*

有谁知道获得我想要完成的事情的最佳方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T08:44:32.213

```
#define degreesToRadians(x) (M_PI * (x) / 180.0)

UICollectionView *collectionView = self.viewController.collectionView;
HorizontalCollectionViewLayout *horizontalLayout = [HorizontalCollectionViewLayout new];
NSTimeInterval duration = 2;

[collectionView.visibleCells enumerateObjectsUsingBlock:^(UICollectionViewCell *cell, NSUInteger index, BOOL *stop)
 {
     CABasicAnimation *rotationAnimation;
     rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
     rotationAnimation.toValue = @(degreesToRadians(360));
     rotationAnimation.duration = duration;
     rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];

     [cell.layer addAnimation:rotationAnimation forKey:@"rotationAnimation"];
 }];

[UIView animateWithDuration:duration
                 animations:^
 {
     collectionView.collectionViewLayout = horizontalLayout;
 }]; 
```

# c# - 为什么我的 RelayCommand 不会触发和 ObservableCollection 捕获选定的值？

> ID：14866081
> 
> 赞同：0
> 
> 时间：2013-02-14T00:53:46.870
> 
> 标签：c#, wpf, mvvm, observablecollection, relaycommand

我是使用 RelayCommands 的新手（遵循 Josh Smith 的 MVVMDemoApp）并且可以使用一些帮助来识别我的错误。

我有两个列表框。当第一个中的一个项目被选中并按下“添加”按钮时，将执行 AddCommand 并且第二个列表的 ObservableCollection 将 selectedItem 添加到其中。

我的观点：

```
<DockPanel >

    <Border DockPanel.Dock="Bottom" Height="50" HorizontalAlignment="Left" Width="150" >
        <!--Notice here that the Button was disabled until it was given a DataContext, which allowed the CanAddPN to be true-->
        <Button Command="{Binding Path=AddToPartsBinCommand}" Content="Add >" />
    </Border>

    <UniformGrid Columns="2" Rows="1" DockPanel.Dock="Top" >
        <!--ListBox 1 (PartNumbersCollection)-->
        <ListBox Background="PaleGoldenrod"
                 ItemsSource="{Binding PnsCollection, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                 SelectedItem="{Binding SelectedPartNumber, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding pn}">

                    </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <!--ListBox 2 (SelectedPartNumbersCollection)-->
        <ListBox ItemsSource="{Binding PartsBinCollection, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding pn}">

                    </TextBlock>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </UniformGrid>

</DockPanel> 
```

我的视图模型：

```
 //DummyDBEntities _context;
    public ObservableCollection<PartNumber> _pnsCollection;
    public ObservableCollection<PartNumber> _partsBinCollection;

    PartNumber _selectedPN;
    public ICommand _addToPartsBinCommand;

    public MasterViewModel(DummyDBEntities _context)
    {
        _context = new DummyDBEntities();
        this._pnsCollection = new ObservableCollection<PartNumber>(_context.PartNumbers);
        this._partsBinCollection = new ObservableCollection<PartNumber>();

    }

    public ObservableCollection<PartNumber> PnsCollection
    {
        get { return this._pnsCollection; }
        set
        {
            _pnsCollection = value;
            OnPropertyChanged("PnsCollection");
        }
    }

    public PartNumber SelectedPN
    {
        get { return this._selectedPN; }
        set 
        {
            this._selectedPN = value;
            OnPropertyChanged("SelectedPN");
            OnPropertyChanged("PartsBinCollection");
        }

    }

    public ObservableCollection<PartNumber> PartsBinCollection
    {
        get
        {
            if (_partsBinCollection == null)
            {
                _partsBinCollection = new ObservableCollection<PartNumber>();
            }
            return this._partsBinCollection;
        }
        set 
        {
           this._partsBinCollection = value;
            OnPropertyChanged("PartsBinCollection");
        }
    }

    public ICommand AddToPartsBinCommand
    {
        get
        {
            if (_addToPartsBinCommand == null)
                _addToPartsBinCommand = new RelayCommand(() => this.AddPN(),
                                                         () => this.CanAddPN());
            return this._addToPartsBinCommand;
        } 
    }

    private bool CanAddPN()
    {
        return true;
    }

    private void AddPN()
    {
        if (this._partsBinCollection == null)
        {
            this._partsBinCollection = new ObservableCollection<PartNumber>();
        }

        this._partsBinCollection.Add(this._selectedPN);

    } 
```

提前致谢！

另外：为什么会：

```
 private bool CanAddPN()
    {
        return this._selectedPN != null;
    } 
```

让我的添加按钮永久禁用？我没有做什么让按钮知道一个项目已被选中？这似乎是我理解为什么命令永远不会触发的相同缺失的链接。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:13:08.240

You need to raise the `CanExecuteChanged` on your command to let the client know that it should check again to see if it can execute. Not sure about the `RelayCommand` but I would assume it's something along the lines of `mycommand.RaiseCanExecuteChanged();` Don't forget to cast your command to a relaycommand first since you have it exposed as `ICommand`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:19:39.203

OOPS! Right after posting this after an hour of struggling I realized that in my View I was referring to the selectedItem property "SelectedPartNumber" and not "SelectedPN". This solved both problems. CanExecuteChanged is evaluated already.

# php - 如何将 PHP 插入 jQuery 显示

> ID：14866082
> 
> 赞同：-1
> 
> 时间：2013-02-14T00:53:48.927
> 
> 标签：php, jquery, wordpress

你好我正在尝试插入

```
<?php comments_template(); ?> 
```

进入下面的jQuery显示功能，但它不起作用。甚至可以将php函数插入jQuery吗？*更新

```
<head> 
<script src="code.jquery.com/jquery-latest.js"></script>; 
</head> 
<button>Show it</button> 
<a style="display: none"><?php comments_template(); ?></a> 
<script>
$("button").click(function () { $("a").show("slow"); }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:02:05.717

May be if your comments_template returns its result as a string, instead of directly printing it with echo, you just need something like this:

```
<?php echo comments_template(); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:04:42.770

Firstly, make your `comments_template()` return a full string.

Then, try structuring your code like this. You want to `.hide()` the comments on `.ready()`, and then `.show()` them when you click the `.comment-button` button.

```
<head>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
  <button class="comment-button">Show Comments</button>
  <p class="comments"><?php echo comments_template(); ?></p>
  <script>
    $("document").ready(function() {
      $(".comments").hide();
      $(".comment-button").click(function () {
        $(".comments").show("slow");
      });
    });
  </script>
</body> 
```

Don't use direct elements with `$()` in jQuery, either; use a class or an ID.

Also, if you want a **brilliant** framework to use that can collapse elements with subtle animations, try [Bootstrap for Twitter](http://getbootstrap.com) and then do something like this:

```
<div class="comment-1 collapse">
  <?php echo comments_template(); ?>
</div>
<button data-target=".comment-1" data-toggle="collapse">Show Comment</button> 
```

No Javascript needed, since it's already in the bootstrap library.

# visual-c++ - D3D11.1 调整窗口大小时内存不足？

> ID：14866084
> 
> 赞同：1
> 
> 时间：2013-02-14T00:53:56.883
> 
> 标签：visual-c++, out-of-memory, directx-11

我正在努力解决这个问题；使用 D3D11.1 和标准 Win32 桌面窗口，我在调整窗口大小时出现内存不足错误，但仅在手动调整大小几秒钟时出现。最大化工作正常，并且非常快速地调整大小工作正常。好像在手动调整大小期间不断分配某些东西，但我无法弄清楚它是什么。

```
LRESULT CALLBACK ProcessWindow(HWND hWnd, uint32 nMessage, WPARAM wParam, LPARAM lParam)
{
switch(nMessage)
{
case WM_SIZE:
    OnResize();
    return DefWindowProc(hWnd, nMessage, wParam, lParam);
}

return DefWindowProc(hWnd, nMessage, wParam, lParam);
}

void OnResize()
{
    ResizeSwapChain();
    ResetRenderTargets();
    ResetDepthStencil();
}

void ResizeSwapChain()
{
if(m_pD3DSwapChain)
{
    m_D3DDepthStencilView.ReleaseAndGetAddressOf();
    m_pD3DRenderTarget.ReleaseAndGetAddressOf();

    //THE SWAP CHAIN ALREADY EXISTS, RESIZE IT
    DXErrorOnFail(m_pD3DSwapChain->ResizeBuffers(nBufferCount, 0, 0, SwapChainFormat, 0));
} 
}

bool ResetRenderTargets()
{
ComPtr<ID3D11Texture2D> B;
DXErrorOnFail(m_pD3DSwapChain->GetBuffer(0, IID_PPV_ARGS(&B)));

DXErrorOnFail(m_pD3DDevice->CreateRenderTargetView(B.Get(), nullptr, &m_pD3DRenderTarget));

B.ReleaseAndGetAddressOf();

if(!m_pD3DRenderTarget)
{
    return false;
}

return true;
}

bool ResetDepthStencil()
{
D3D11_TEXTURE2D_DESC BBD;

ComPtr<ID3D11Texture2D> B;
DXErrorOnFail(m_pD3DSwapChain->GetBuffer(0, IID_PPV_ARGS(&B)));

B->GetDesc(&BBD);

D3D11_TEXTURE2D_DESC DSD; //DEPTH STENCIL DESC
memset(&DSD, 0, sizeof(D3D11_TEXTURE2D_DESC));

DSD.Width               = BBD.Width;
DSD.Height              = BBD.Height;
DSD.MipLevels           = 1;
DSD.ArraySize           = 1;
DSD.Format              = DXGI_FORMAT_D24_UNORM_S8_UINT;
DSD.SampleDesc.Count    = 1;
DSD.SampleDesc.Quality  = 0;
DSD.Usage               = D3D11_USAGE_DEFAULT;
DSD.BindFlags           = D3D11_BIND_DEPTH_STENCIL;
DSD.CPUAccessFlags      = 0;
DSD.MiscFlags           = 0;

ComPtr<ID3D11Texture2D> DS;
DXErrorOnFail(m_pD3DDevice->CreateTexture2D(&DSD, nullptr, &DS));

D3D11_DEPTH_STENCIL_VIEW_DESC DVD;
memset(&DVD, 0, sizeof(D3D11_DEPTH_STENCIL_VIEW_DESC));

DVD.Format              = DSD.Format;
DVD.ViewDimension       = D3D11_DSV_DIMENSION_TEXTURE2D;
DVD.Flags               = 0;
DVD.Texture2D.MipSlice  = 0;

DXErrorOnFail(m_pD3DDevice->CreateDepthStencilView(DS.Get(), &DVD, &m_D3DDepthStencilView));

B.ReleaseAndGetAddressOf();
DS.ReleaseAndGetAddressOf();

if(!m_D3DDepthStencilView)
{
    return false;
}

return true;
}

bool ResetViewports()
{
D3D11_TEXTURE2D_DESC BBD; //BACK BUFFER DESC
memset(&BBD, 0, sizeof(D3D11_TEXTURE2D_DESC));

ComPtr<ID3D11Texture2D> B;
DXErrorOnFail(m_pD3DSwapChain->GetBuffer(0, IID_PPV_ARGS(&B)));

B->GetDesc(&BBD);

D3D11_VIEWPORT V;
V.TopLeftX = 0.0f;
V.TopLeftY = 0.0f;
V.Width    = static_cast<float32>(BBD.Width);
V.Height   = static_cast<float32>(BBD.Height);
V.MinDepth = D3D11_MIN_DEPTH;
V.MaxDepth = D3D11_MAX_DEPTH;

m_pD3DDeviceContext->RSSetViewports(1, &V);

return true;
} 
```

我真的很感谢任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:32:57.240

在调整大小期间重新分配不是一个好主意，原因如下：

*   您将大量销毁和重新创建资源（在这种情况下，这是一个简单的示例，请考虑具有大量中间纹理的复杂应用程序）。
*   当您调用 ReleaseAndGetAddressOf 时，DX 不会立即销毁资源，它会在您下次刷新缓冲区时执行此操作，因为在调整大小时您可能不会渲染，上下文不会被刷新。

一种更简洁的解决方案是使用 Begin/EndResize 事件。 [WM_ENTERSIZEMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632622%28v=vs.85%29.aspx) [WM_EXITSIZEMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632623%28v=vs.85%29.aspx)

在输入消息上设置一个标志，并在退出时应用您的更改。

# php - 带有 proc_open 的 php pcntl_signal

> ID：14866094
> 
> 赞同：0
> 
> 时间：2013-02-14T00:54:59.350
> 
> 标签：php, signals

我有一个自定义 php 脚本，它使用 proc_open 打开第三方 perl 脚本。我试图放入一些 pcntl_signal 句柄，以便我可以在中断时优雅地清理。

我能够让我的信号处理程序在更狭窄的测试床上工作，它只是在循环中旋转或其他东西。

但是，当它通过带有 proc_open 的子脚本循环时，CTRL+C 似乎就完全死在那里了。需要明确的是，我的意思是立即完全停止父进程和子进程。*并不是*说 ctrl+c 被第 3 方子进程捕获，返回并且我的脚本继续。

我在 php 文档中读过，已知信号处理不能很好地与 sleep() 之类的东西配合使用，并认为它可能与 POSIX proc_open 函数类似。仔细查看 SO，似乎有一些类似的帖子提供了一种解决方案，可以根据情况在子进程中移动信号处理或将 restart_syscalls 参数切换为 proc_open。

我尝试将restart_syscalls 参数切换为false，但这对我没有任何好处。

不幸的是，子进程是第 3 方脚本，所以我不熟悉实际代码。在试图解决这个问题以使信号重新传播之前（如果可能的话，甚至是要做的事情），我想知道我的设置是否缺少一些东西，所以我可以只维护我的代码。

我所拥有的看起来像

```
<?php

declare(ticks=1);

class signalHandler{

    public static function handle($signal){
        throw new KillException("Received Kill signal $signal", $signal);
    }

}
pcntl_signal(SIGINT,array('signalHandler','handle')); 
```

然后稍后，调用实际的子进程：

```
$childCmd = "thirdPartyScript.pl";

// Set up how we'll interact with the IO file handlers of the process
$descriptors = Array(
    0 => Array('file', '/dev/null', 'r'), // Process will read from /dev/null
    1 => Array('pipe', 'w'), // Process will write to STDOUT pipe
    2 => Array('pipe', 'w')  // Process will write to STDERR pipe
);

// Start the process
$childProc = proc_open($childCmd, $descriptors, $pipes);

// Check the status of the backup every second...
$streamContents = '';

stream_set_blocking($pipes[2], 0);
do {
    $streamContents .= stream_get_contents($pipes[2]);

    if( ! ( $childStatus = proc_get_status($childProc) ) ) {
        throw new Exception("Error: Unable to retrieve status on child process.");
    }

} while ($childStatus['running']); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:50:09.160

You should listen to SIGCHLD too, if you want to be notified when your child dies. I think that you can also put safely for example sleep(1) inside the polling cycle to reduce busy work.

# pointers - vala: 参数方向 - 值类型输出参数的自动空值检查

> ID：14866096
> 
> 赞同：3
> 
> 时间：2013-02-14T00:55:07.803
> 
> 标签：pointers, parameter-passing, vala

## 问题：

我实际上在使用 Vala/Tutorial 网站上关于输出参数声明的看似不错的功能时遇到问题。

这里引用来自：[https ://live.gnome.org/Vala/Tutorial#Parameter_Directions](https://live.gnome.org/Vala/Tutorial#Parameter_Directions)

> 下面是如何实现 method_1() 的示例：

```
void method_1(int a, out int b, ref int c) {
    b = a + c;
    c = 3; } 
```

> 当将值设置为 out 参数“b”时，Vala 将确保“b”不为空。因此，如果您对此值不感兴趣，则可以安全地将 null 作为 method_1() 的第二个参数传递。

看一下生成的 C 代码，似乎很明显，与上面的声明相矛盾，而不是在分配之前进行检查，而是很高兴地取消引用可能的 NULL 指针。

```
void method_1 (gint a, gint* b, gint* c) {
    *b = a + (*c);
    *c = 3;
} 
```

我期望的代码会采用这种形式：

```
void method_1 (gint a, gint* b, gint* c) {
    if (b != NULL)
      *b = a + (*c);
    *c = 3;
} 
```

到目前为止，我发现的唯一解决方法是将整个 out 参数声明扔掉，而是直接使用指针。

```
void method_1 (gint a, int* b, ref int c) {
    if (b != null)
      *b = a + c;
    c = 3;
} 
```

对于审美共鸣，我非常喜欢上面引用中提到的想法，所以我想问以下问题

## 问题：

*   我是否误解了上面引用中的描述，并且声明的值类型参数不能自动检查空指针？

*   或者这可能是 vala 编译器中的一个错误，在以后的版本中修复了？ `valac --version`返回`Vala 0.8.1`所以这是我正在使用的版本。

*   是否有任何其他机会通过我仍然缺少的任何语言元素手动检查声明的值类型参数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:31:17.170

Vala 0.8.1 是你的问题。Vala 0.16 出品

```
void method_1 (gint a, gint* b, gint* c) {
  gint _vala_b = 0;
  gint _tmp0_;
  gint _tmp1_;
  _tmp0_ = a;
  _tmp1_ = *c;
  _vala_b = _tmp0_ + _tmp1_;
  *c = 3;
  if (b) {
    *b = _vala_b;
  }
} 
```

# php - 如何为每个答案按钮关联标记

> ID：14866099
> 
> 赞同：0
> 
> 时间：2013-02-14T00:55:37.943
> 
> 标签：php, javascript, jquery, ajax, mysqli

我在下面有一段代码，它显示了每个问题的可能答案列表，显示为复选框按钮。我想要做的是为每个可以从数据库中检索的答案按钮关联标记。对于正确的答案，从 db 中检索他们的分数。对于不正确的答案，他们的分数都是 0。我的问题是如何以及最好的方法是：

数据库表：

**问题：**

```
QuestionId (PK auto)  QuestionNo  SessionId (FK Session) OptionId (FK Option)    
72                    1           26                     3
73                    2           26                     4 
```

**选项表：**

```
OptionId (PK Auto)  OptionType
1                   A-C
2                   A-D
3                   A-E
4                   A-F 
```

**回答：**

```
AnswerId (PK auto)    QuestionId (FK Question)      Answer  
1                          72                         C             
2                          73                         A             
3                          73                         C             
4                          73                         D 
```

**个人回答：**

```
AnswerId (PK auto)  AnswerMarks
1                   2
2                   2
3                   1
4                   2 
```

下面的代码编译查询并编译每个问题的答案按钮：

```
 $qandaquery = "SELECT q.QuestionId, q.QuestionNo, o.OptionType, GROUP_CONCAT( DISTINCT Answer
                    ORDER BY Answer
                    SEPARATOR ',' ) AS Answer
                    FROM Question q
                    LEFT JOIN Answer an ON q.QuestionId = an.QuestionId
                    LEFT JOIN Individual_Answer ia ON an.AnswerId = ia.AnswerId
                    LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
                    ";

    global $mysqli;
    $qandaqrystmt=$mysqli->prepare($qandaquery);
    // get result and assign variables (prefix with db)
    $qandaqrystmt->execute(); 
    $qandaqrystmt->bind_result($qandaQuestionId,$qandaQuestionNo,$qandaOptionType,$qandaAnswer);

    $arrQuestionId = array();
    $arrQuestionNo = array();
    $arrOptionType = array();
    $arrAnswer = array();
    $arrReplyType = array();

foreach ($arrQuestionId as $key=>$question) {

?>

<div class="queWrap">

//LOOP THROUGH EACH QUESTION
<p><?php echo "<strong>".htmlspecialchars($arrQuestionNo[$key])."</strong>"; ?></p>

//BELOW DISPLAYS THE ANSWER BUTTONS FOR EACH QUESTION
$options = explode('-', $arrOptionType[$key]);
if(count($options) > 1) {
    $start = array_shift($options);
    $end = array_shift($options);
    do {
        $options[] = $start;
    }while(++$start <= $end);
 }
 else{
    $options = explode(' or ', $option);
 }

       foreach($options as $indivOption) {
     echo '<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-' . $indivOption . '" value="' . $indivOption . '" /><span>' . $indivOption . '</span></label></div>';
 }
?>

//HIDDEN INPUT SHOWING DB's QUESTIONID FOR EACH QUESTION
<p><input type='hidden' class='questionIds' name='questionids' value='<?php echo htmlspecialchars($arrQuestionId[$key]); ?>' /></p>

</div>

<?php

}

?> 
```

以下是显示 2 个问题及其答案的源代码：

```
 <div class="queWrap">

    //QUESTION 1

    <p><strong>1:</strong></p>

    //ANSWER BUTTONS FOR QUESTION 1

    <div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-A" value="A" /><span>A</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-B" value="B" /><span>B</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-C" value="C" /><span>C</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-D" value="D" /><span>D</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-E" value="E" /><span>E</span></label></div>

    //QUESTIONID FOR QUESTION 1

    <p><input type='text' class='questionIds' name='questionids' value='72' /></p>

    </div>

    <div class="queWrap">

    //QUESTION 2

    <p><strong>2:</strong></p>

    //ANSWER BUTTONS FOR QUESTION 2

    <div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-A" value="A" /><span>A</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-B" value="B" /><span>B</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-C" value="C" /><span>C</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-D" value="D" /><span>D</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-E" value="E" /><span>E</span></label></div>
<div class="ck-button"><label class="fixedLabelCheckbox"><input type="checkbox" name="options_<?php echo $key; ?>[]" id="option-F" value="F" /><span>F</span></label></div>

    //QUESTIONID FOR QUESTION 2

    <p><input type='text' class='questionIds' name='questionids' value='73' /></p>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:52:43.357

每次选中复选框时，您都可以向服务器发出 AJAX 请求。这使您可以将所有答案保存在服务器上并在那里监控进度。

首先，我将向`data-`问题包装器添加一个属性，而不是使用额外的输入来存储问题 ID：

```
<div class="queWrap" data-q_id="72"> 
```

jQuery：

```
$function(){
    $('.queWrap input:checkbox').change(function() {
        var $ch_box = $(this),
            $qwrap=$ch_box.closest('.queWrap')
            q_id = $qwrap.data('q_id'),
            val = $ch_box.val();

        var dataToServer = {
            q_id: q_id,
            valueSelected: val
        }

        /* due to demo environment sending dummy data*/

        $.post('/echo/json/', dataToServer, function (response) {
            /* disable checkboxes for this question- would need to track at server that user only submits once for each question*/
            $qwrap.find('input:checkbox').prop('disabled',true);
             /* demo uses JSON response {"status":"correct"}*/
            var status=response.status
            $qwrap.find('.status').text( status).addClass(status);
        });    
    });
}); 
```

演示：http: [//jsfiddle.net/bWthd/](http://jsfiddle.net/bWthd/)

# ruby-on-rails - rails 根据条件更改列默认值

> ID：14866108
> 
> 赞同：0
> 
> 时间：2013-02-14T00:56:41.023
> 
> 标签：ruby-on-rails, migration

我有用户模型（has_one：profile）和配置文件模型（belongs_to：user）。

我想将默认值更改`profile.deliver_project_news`为`:twice_a_week`from `:none if user.user_type != "customer"`。

我可以通过迁移处理这个问题吗？如果可以，那我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:59:43.850

在我看来，您不应该将该逻辑放入您的数据库中。我认为它应该进入你的模型层

```
class Profile < ActiveRecord::Base

    before_validate: set_defaults

    def set_defaults
        if user.user_type != "customer"
            deliver_project_news ||= "twice_a_week"
        else
            deliver_project_news ||= "none"
        end
    end
end 
```

# c# - wchar_t 数据从非托管混乱到托管

> ID：14866112
> 
> 赞同：0
> 
> 时间：2013-02-14T00:57:27.937
> 
> 标签：c#, c++, pinvoke

我有一个 C# 中的托管 GUI 和 C++ 中的非托管 DLL。我通过引用填充它的 DLL 函数来传递一个结构。该结构有几个 wchar_t 元素和几个字符串。

在 DLL 中，所有数据在返回 GUI 之前看起来都很好。例如：

```
struct1->ch1 = 0x1234;
struct1->ch2 = 0x5678;
struct1->ch3 = 'ab';
struct1->ch4 = 'cd'; 
```

但是当从 DLL 返回结构时，数据会出现乱码。

```
struct1->ch1 == 0x0034
struct1->ch2 == 0x0012
struct1->ch3 == 0x0078
struct1->ch4 == 0x0056 
```

其他字符串元素返回正常。

填充的 char 数据是单字节，所以我知道我可以只使用 BYTE 类型，但我想弄清楚这一点。

我是托管/非托管关系的新手，所以我不确定发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:21:12.920

有几种选择。首先，您可以将整个结构标记为 Unicode（因此`chars`将被解释为`wchar_t`）：

```
[StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
struct MyStruct { ... } 
```

或者，您可以使用 16 位 int：

```
short ch1; 
```

或者告诉编组器使用以下命令明确地执行每个项目：

```
[MarshalAs(UnmanagedType.U2)] char ch1; 
```

# c# - 基于给定语句的类结构

> ID：14866113
> 
> 赞同：0
> 
> 时间：2013-02-14T00:57:36.477
> 
> 标签：c#, oop

我正在尝试了解 C# 中集合的用法，并练习如何根据 msdn 示例中给出的语句定义类，因为它的类没有发布并留给读者。我想出了以下课程，但需要知道这是对还是错：

声明说：

```
 // ListLeagueList is a list of League objects. 
    // Each League object has a Name and a collection of Division objects. 
    // Each Division has a Name and a collection of Team objects, 
    // and each Team object has a Name.

public class Team
{
    private string teamName;
    public string TeamName
    {
        get { return teamName; }
        set { teamName = value; }
    }
}

public class Division
{
    private string name;
    public string Name
    {
        get { return name; }
        set { name = value; }
    }

    public List<Team> DivisionList;
}

public class League
{
    private string Name;
    public string name
    {
        get { return name; }
        set { name = value; }
    }

    List<Division> DivisionList;
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:03:12.473

这似乎是正确的，但是您将 a 命名`List<Team>`为`DivisionList`.. 我会将其更改为`TeamList`：

```
public class Division
{
    public string Name { get; set; }

    public List<Team> TeamList { get; set; } // Change this, because its a List of Teams.
} 
```

编辑：

gilly 击败了我的速记属性：$

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:03:09.000

[您可以使用Auto-Implemented Properties](http://msdn.microsoft.com/en-us/library/bb384054.aspx)来缩短您的属性定义：

```
public string Name { get; set; } 
```

这样，您就不需要支持字段。如果以后由于某种原因需要使用支持字段，请在那时添加它。

# android - 此 Android SDK 需要 Android Developer Toolkit 版本 21.0.0 或更高版本

> ID：14866118
> 
> 赞同：2
> 
> 时间：2013-02-14T00:58:30.610
> 
> 标签：android, windows

（环境：Windows 7 Eclipse）

当我在 Android SDK Manager 中更新时，我选择了所有的 SDK、平台、示例等。重启 Eclipse 后，当我尝试访问 Android SDK Manager 时，我收到此消息： **android sdk 的位置尚未在首选项中设置** ！

当我试图在 Window->preference->Android 中找到 SDK 时，我收到此警告： **此 Android SDK 需要 Android Developer Toolkit 版本 21.0.0 或更高版本。当前版本是 20.0.3.v201208082019-427395。请将 ADT 更新到最新版本。** ！

我试图更新最新的 ADT。它告诉我：**无法完成请求。有关详细信息，请参阅错误日志。Android 开发工具将被忽略，因为它已经安装，并且不允许更新。**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T14:23:37.480

转到 Help > Install New Software... 在“Work With”中选择“Android Developer Tools Updater Site”（如果不可用，请单击 Add... 并输入：名称：Android Developer Tools Updater Site，位置：[https:// dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) )

检查“开发者工具”和“NDK 插件”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-22T12:06:09.420

我已经手动下载了 ADT-22.3.0.zip 并安装在 eclipse 中。这对我有用，希望这会对某人有所帮助。

请参阅下面的说明

如果您仍然无法使用 Eclipse 下载 ADT 插件作为远程更新站点，您可以将 ADT zip 文件下载到本地机器并手动安装：

1.  下载 ADT Plugin zip 文件（不要解压）：ADT-22.3.0.zip [http://dl.google.com/android/ADT-22.3.0.zip](http://dl.google.com/android/ADT-22.3.0.zip)
2.  启动 Eclipse，然后选择帮助 > 安装新软件。
3.  单击右上角的添加。
4.  在添加存储库对话框中，单击存档。
5.  选择下载的 ADT-22.3.0.zip 文件并单击确定。
6.  输入“ADT Plugin”作为名称，然后单击“确定”。
7.  在可用软件对话框中，选中开发人员工具旁边的复选框，然后单击下一步。
8.  在下一个窗口中，您将看到要下载的工具列表。点击下一步。阅读并接受许可协议，然后单击完成。
9.  如果您收到安全警告，提示无法确定软件的真实性或有效性，请单击“确定”。
10.  安装完成后，重新启动 Eclipse。

要在使用 zip 文件安装后更新插件，您必须再次执行这些步骤，而不是默认的更新说明。

可以在此链接[http://developer.android.com/sdk/installing/installing-adt.html中找到相同的说明](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T01:05:17.810

> Location of the android sdk has not been setup in the preferences !

Go to Window > Preferences > Android and indicate where you installed the SDK.

> This Android SDK requires Android Developer Toolkit version 21.0.0 or above. Current version is 20.0.3.v201208082019-427395\. Please update ADT to the latest version.

Go to Help > Check for Updates and update the Android-related plugins.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T15:09:09.330

或许升级 Eclipse 可以解决这个问题。我遇到了同样的问题，尝试在线和离线升级 ADT（从[站点](http://developer.android.com/tools/sdk/eclipse-adt.html)下载包，但在我下载更新的 eclipse 之前没有任何变化。

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-30T06:33:07.560

为什么我提出这个答案？

> 转到你的 Eclipse，点击帮助 -> 安装新软件 -> 添加... ->
> 
> 输入“ADT插件”作为名称，
> 
> 输入[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)作为 URL，
> 
> 然后包括 ADT 在内的几个选项将显示在窗口中，单击您要更新的内容，然后单击确定，您将能够更新您的 ADT。

我建议您立即单击“添加”按钮并填写上述引用中的字段，因为我尝试通过选择“Work with ..”等进行多次安装，安装时出现错误，只是几次，当我第一次选择“添加”按钮时，整个安装成功。

也许有人也有这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-31T13:02:22.853

我已经尝试了上述所有解决方案，但无法更新 Eclipse。要首先更新 Eclipse，我们必须从 Eclipse 中卸载开发人员工具，然后在 Eclipse 中重新安装以解决此问题。

# redirect - 具体的301重定向

> ID：14866120
> 
> 赞同：0
> 
> 时间：2013-02-14T00:58:48.260
> 
> 标签：redirect, opencart

我想在 .htaccess 中执行以下 301 重定向：www.mysite.com/products/xxxxxx 到 www.mysite.com/index.php?route=product/product&product_id=xxxxxx

其中“xxxxxx”是我的产品 ID

请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:01:15.113

```
//301 Redirect Entire Directory
RedirectMatch 301 
www.mysite.com/products/(.*) 
www.mysite.com/index.php?route=product/product&product_id=$1 
```

# javascript - 根据浏览器缩放更改 css

> ID：14866123
> 
> 赞同：1
> 
> 时间：2013-02-14T00:58:57.380
> 
> 标签：javascript, jquery, css

在谷歌快速搜索**如何使用 javascript 计算浏览器分辨率后，**您会获得大量有用的链接，说明如何通过计算屏幕宽度（使用`screen.width`）来更改元素的宽度（例如），然后从那里开始简单的数学运算确定您想要的元素宽度。*酷*但是，如果浏览器放大，则计算屏幕分辨率，而不是浏览器的当前分辨率，这是不幸的。当然，您可以为父级设置一个恒定的宽度`div`，然后该元素根本不会受到缩放的影响。**但是**有没有办法确定浏览器中留下的视口的总分辨率**之后**发生了放大或缩小，而不仅仅是初始分辨率？我似乎找不到任何东西...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:02:21.043

你的意思是像那个用户正在寻找的东西吗？

[浏览器缩放时查找任何 DOM 元素的实际高度](https://stackoverflow.com/questions/10022134/find-real-height-of-any-dom-element-when-browser-zoomed)

尝试跟随它。

# ios - iOS：在视图控制器之间传递数据

> ID：14866126
> 
> 赞同：0
> 
> 时间：2013-02-14T00:59:14.023
> 
> 标签：ios, facebook-graph-api, uiviewcontroller

我正在使用 Facebook API，当用户选择一个地方（CheckIn）时，我想打开另一个视图并传递这个地方（FBGraphPlace），但是在“SecondViewController”中，当方法“viewDidLoad”被执行时，变量为空. 当用户选择地点时：

```
if (secondViewController == nil)
{
    SecondViewcontroller *secondViewcontroller =
    [[SecondViewcontroller alloc]
     initWithNibName:NSStringFromClass([SecondViewcontroller class])
     bundle:[NSBundle mainBundle]];

    self.secondViewcontroller = secondViewcontroller;
}

// How you reference your navigation controller will
// probably be a little different
UIBarButtonItem *newBackButton = [[UIBarButtonItem alloc] initWithTitle: @"Back" style: UIBarButtonItemStyleBordered target: nil action: nil];

[[self navigationItem] setBackBarButtonItem: newBackButton];

secondViewController.place = self.selectedPlace;

[self.navigationController
 pushViewController:self.secondViewcontroller
 animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:07:07.343

你应该先做 pushViewController，然后分配 place 变量

# javascript - 如何在不将所有 & 替换为 & 的情况下替换 href url

> ID：14866132
> 
> 赞同：0
> 
> 时间：2013-02-14T00:59:52.300
> 
> 标签：javascript, jquery, html, href, replace

我正在尝试用`href=""`页面加载时计算的 URL 替换一些空语句。

然而，替换字符串包含几个 &，它们需要在 href 中。

无论我尝试什么，一旦使用`setAttribute("href", url);`或`$(id).attr('href', url)`使用，所有 & 都被替换为 a`&`并且链接失败。

我怎样才能防止这种情况发生？我很确定任何以结尾`.href`或包含`href`的代码都在经历翻译阶段并且都会失败。

**您可能已经注意到我已经多次编辑此消息，因为您根本无法输入完整的 '&' 在此框中，此处也未将其翻译为“&”。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:53:15.193

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:17:14.647

在设置标签的属性之前，您必须在 url中替换`&`为。`&amp;``href``a`

```
var url = 'www.example.com?a=1&b=2'
url = url.replace(/\&/g, '&amp;')
$('a').attr('href', url) 
```

# cassandra - Cassandra 中的一个或两个键空间，用于单个应用程序的不同类型的数据

> ID：14866136
> 
> 赞同：1
> 
> 时间：2013-02-14T01:00:17.953
> 
> 标签：cassandra

在我的项目中，我使用 Cassandra 进行分析，使用 MySQL 存储数据。我看到 Cassandra 也可能非常适合数据。

我的问题是：我应该为数据创建一个新的键空间，还是应该使用已经存在的用于分析数据的键空间？在做出这样的决定时我应该考虑什么？

我的堆栈是 Python (Django) + pycassa，cassandra 1.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:35:54.310

键空间只是类似列族的高级分组。没有硬性规定，任何一个决定最重要的影响都与特定客户端库的 API 有关。就个人而言，当我想将关注点与我的数据分离时，我会创建一个新的键空间。这有点类似于在关系数据库中创建不同的数据库。

# php - Storing text cleanly into mysql TEXT field

> ID：14866153
> 
> 赞同：0
> 
> 时间：2013-02-14T01:02:58.643
> 
> 标签：php, mysql

Im attempting to store the following word in a TEXT field in my MYSQL db table:

> Valentine’s

But for some reason it stores as the following:

> Valentineâs

Is there a PHP function I can use to clean the string before i store it in the database..

> the CHARSET of the table is latin1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:05:32.227

`htmlspecialchars();` is what you're looking for I guess.

# wordpress - WordPress：不同的 WP_Query 用法：哪个是正确的，在哪个上下文中？

> ID：14866154
> 
> 赞同：0
> 
> 时间：2013-02-14T01:03:07.043
> 
> 标签：wordpress, loops

我一直在使用两种不同的方法创建自定义 WordPress 循环，这两种方法都涉及创建`WP_Query`对象的新实例。我通常在一个页面上有多个循环。

我不明白这两种方法有何不同，以及使用每种方法的正确上下文。

方法1：[http ://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

```
$the_query = new WP_Query( $args );

if ( $the_query->have_posts() ) :
    while ( $the_query->have_posts() ) : $the_query->the_post();
        // output
    endwhile;
endif;

wp_reset_postdata(); 
```

方法2：[http ://codex.wordpress.org/Function_Reference/wp_reset_postdata](http://codex.wordpress.org/Function_Reference/wp_reset_postdata)

```
$original_query = $wp_query;
$wp_query = null;

$wp_query = new WP_Query( $args );
if ( have_posts() ) :
    while ( have_posts() ) : the_post();
        // output
    endwhile;
endif;

$wp_query = null;
$wp_query = $original_query;
wp_reset_postdata(); 
```

两者似乎产生相同的结果，但是当我打开时`WP_DEBUG`，我看到第二种方法的错误，例如：

> 注意： is_singular 调用不正确。条件查询标签在查询运行之前不起作用。

我的问题是：

*   我什么时候应该使用这种`$original_query = $wp_query;`方法？
*   存储和恢复的相关性是什么`$wp_query`？
*   为什么我使用时返回错误信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:07:36.563

一些核心功能——例如一些分页功能（[这里是一个例子，这似乎是一个因素](https://stackoverflow.com/questions/14863366/wordpress-only-displaying-2-pages-maximum-for-pagination-when-there-should-be-8)）——假设了这个`$wp_query`值。如果没有设置这些功能将不起作用。您可以通过保存原始文件`$wp_query`、运行自定义循环并`$wp_query`放回原件来作弊。我认为这很少是最好的方法，如果你认为你需要这样做，你应该使用`pre_get_posts`或其他过滤器来改变主查询本身，而不是进行新的查询。我不会发誓绝对没有合适的情况，但我确实认为通常有更好的方法。

当我尝试时，您的代码不会触发任何通知，但如果您这样做，它会：

```
$original_query = $wp_query;
$wp_query = null;
if (is_single()) {
  echo 'single post';
}
$wp_query = new WP_Query( array('posts_per_page' => 5) ); 
```

`is_single`,等函数`is_archive`依赖于`$wp_query`未设置的全局对象。我希望在这种情况下您会看到通知。

您需要参考的大部分内容都在[http://core.trac.wordpress.org/browser/trunk/wp-includes/query.php](http://core.trac.wordpress.org/browser/trunk/wp-includes/query.php)和[http://core.trac.wordpress.org/browser/trunk/wp-包括/post-template.php](http://core.trac.wordpress.org/browser/trunk/wp-includes/post-template.php)

# codeigniter - CodeIgniter 404 Bad request error

> ID：14866158
> 
> 赞同：0
> 
> 时间：2013-02-14T01:03:13.973
> 
> 标签：codeigniter, http-status-code-404, php

I'm working with codeIgniter. I am making a login form which checks the members details with the database.

However when I click to login I get this error message:

```
The requested URL /waitronmain/login.php/login/validate_credentials was not found on this server. 
```

However this is my login.php file and as you can see validate_credentials() does exist.

```
class Login extends CI_Controller{

function index()
{
    $data['main_content'] = 'login_form';
    $this->load->view('includes/template', $data);
}

function validate_credentials()
{
    //load model to query db
    $this->load->model('membership_model');
    $query = $this->membership_model->validate();

    if($query){ //if credentials validated
        $data = array(
            'username' => $this->input->post('username'),
            'is_logged_in' => true

            );

            $this ->session->set_userdata($data);
            redirect('site/members_area');
    }

    else{ //if not validated load login form again.
        $this->index();

    }

} 
```

}

Any idea what's going wrong? I should be going on to the 'members_area' page as I know the details I am entering are correct.

Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:14:09.413

这是什么？？

/waitronmain`/login.php/`登录/validate_credentials

login.php 不应该在 url 我认为你应该这样做：

```
/waitronmain/login/validate_credentials 
```

（假设您从 url 中删除了 index.php 并且您在 waitronmain/ root 中）

# c++ - How to make collisions affect rotation only on X and Z axes in lib Bullet?

> ID：14866159
> 
> 赞同：2
> 
> 时间：2013-02-14T01:03:15.940
> 
> 标签：c++, bulletphysics

Having a terrain and some mesh objects placed as STATIC I throw capsule like objects onto my world (for example agents my engine wants to navigate).

I need tham to bahaive as normal collidable objects yet I need tham not to rotate on one axis at all (for me it is `Y`) so agents always are in a "standing" vertical position like so:

![enter image description here](../Images/9a2bbdc2b4ae020a79bcfbca3ce70e3e.png)

thay will be able jump and move... So I wonder how to make collisions affect rotation only on X and Z axes in Bullet?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-08T12:40:27.503

有一些方法可以做到这一点，但我认为这种情况下最好的方法是将 setAngularFactor() 应用于具有向量 (0, 1, 0) 的代理刚体

# redis - 在 Redis 计数器中避免 SET 之前的 GET

> ID：14866166
> 
> 赞同：1
> 
> 时间：2013-02-14T01:03:36.017
> 
> 标签：redis

我有兴趣在我的 Web 应用程序中创建几个不同的基于 redis 的计数器。很多这些东西基本上是用于指标等的，但这并没有什么区别。我的问题基本上如下，是否可以避免这样做：

```
if $redis.get(key) != null
  // increment key
else
  // create key with a counter of 1 
```

理想情况下，这样的事情会更理想

```
$redis.incr(key, 1) // increment key by 1, and if it does not exist, start it at the value 1 
```

我是否忽略了 redis 文档？目前有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:07:44.753

有一个 INCR 命令，如果键不存在，则将键的值设置为 1

```
$redis.incr() 
```

应该管用。

见[http://redis.io/commands/incr](http://redis.io/commands/incr)

# delphi - 在 Tchart 上绘制 stringgrid 值

> ID：14866170
> 
> 赞同：2
> 
> 时间：2013-02-14T01:04:24.790
> 
> 标签：delphi, tstringgrid

我正在尝试在我的`Stringgrid`. 它有 140x140 rowxCol，只有数字。应该在`Tchart`X 轴上显示单元格坐标，在 y 轴上显示值。

我正在使用这段代码：

```
procedure TForm2.Button2Click(Sender: TObject);
var 
  Count: Integer;
begin
  with StringGrid1 do
  begin
    for Count := 0 to RowCount-1 do
    begin
      Chart1.Series[0].AddXY(StrToFloat(Cells[0, Count]), 
                             StrToFloat(Cells[1, Count]), '', clTeeColor);
    end;
  end;
end; 
```

但我不断收到此错误：`'' is not a floating point value.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T01:38:34.413

您正在将空字符串转换为浮点值，这自然是不可能的。我的猜测是您将错误的坐标传递给[`Cells`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Grids.TStringGrid.Cells)属性。请注意，它们都是基于 0 的，并且它们还包括字符串网格的固定部分。这是[`Cells`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Grids.TStringGrid.Cells)坐标打印输出：

![在此处输入图像描述](../Images/22806e08ac6460779103f5f5609e35be.png)

# javascript - 编写了 javascript 来动态创建表。需要帮助验证用户输入

> ID：14866174
> 
> 赞同：1
> 
> 时间：2013-02-14T01:04:44.313
> 
> 标签：javascript, validation, dynamic, html-table

我已经在 javascript 中创建了一个表。它基于用户输入，并会检查以确保输入的值是一个数字。但是我如何也让它检查以确保输入的值高于 0 并且小于 10

```
<html>
<head>
    <title>Homework 1</title>

    <script language="javascript" type="text/javascript">
    function doWork(){
    var rows = document.getElementById("input1").value;
    var columns = document.getElementById("input2").value;
    //alert(rows);
    //alert(columns);
    if(isNaN(rows) == true || isNaN(columns) == true){
        document.getElementById('tablePlacement').innerHTML = "Input must be integer";
    }
    else{
    var htmlInput = "";
    htmlInput += "<table border='1'>";
    htmlInput += "<tr>";

    //Column Headers
    for (i = 0; i <= columns; i++){
        htmlInput += ("<td><b>" + i + "</b></td>");
    }
    htmlInput += "</tr>";
    for (i = 1; i <= rows; i++){
        htmlInput += ("</br><tr><td><b>" + i + "</b></td>");

        for (j = 1; j<= columns; j++){
            var multiplyResult = i * j;
            htmlInput += ("<td>" + multiplyResult + "</td>");
        }
        htmlInput += "</tr>";
    }
    htmlInput += "</table>";
    document.getElementById('tablePlacement').innerHTML = htmlInput;
    }

    };
    </script>
</head>
<body>
    <form id="input1Form">
        Rows: <input type="text" id="input1">
    </form>
    <form id="input2Form">
        Columns: <input type="text" id="input2">
    </form>
    <button type="button" onclick="doWork()">Enter</button>
    <div id="tablePlacement">
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:07:39.090

```
 if(rows <=0 || rows >= 10){
    document.getElementById('tablePlacement').innerHTML = "Input rows must be between 1 and 9";
}

 if(cols <=0 || cols >= 10){
    document.getElementById('tablePlacement').innerHTML = "Input cols must be between 1 and 9";
} 
```

# jquery - AJAX - First Time Refresh using Handlebars

> ID：14866178
> 
> 赞同：0
> 
> 时间：2013-02-14T01:05:22.987
> 
> 标签：jquery, handlebars.js

The code below is attempting to first display previous comments, and then on submit button click, refresh by showing the newer comment.

The second AJax call works fine. But the first Ajax call does nothing ('/show' is a valid request - and the first call '/comment' calls '/show')

Here is my code snippet:

```
<script>
   $(document).ready(function() {
        var source   = $("#login_template");
        var srcHTML =source.html();
        var login_template = Handlebars.compile(srcHTML);
        source   = $("#comment_template");
        srcHTML =source.html();
        var comment_template = Handlebars.compile(srcHTML);
        // First time call to server to get the comments
        $.ajax({ // ajax call starts
            type: "post",
            url: "/show", 
            contentType: 'application/json',
            success: function(data,textStatus,jqXHR) 
            {
              data = JSON.parse(data);
              var html = login_template(data);
              $("#login_content").html(html);
              html = comment_template(data);
              $("#comment_content").html(html);
            }
         });        

        $("#comment_button").click(function(event) {
          $.ajax({ // ajax call to send comment to server and refresh with newer comment
            type: "post",
            url: "/comment", 
            contentType: 'application/json',
            data:  JSON.stringify(
                {
                  'source' : source.value,
                  'comment': comment.value,
                }),
            success: function(data,textStatus,jqXHR) 
            {
              data = JSON.parse(data);
              var html = login_template(data);
              $("#login_content").html(html);
              html = comment_template(data);
              $("#comment_content").html(html);
            }
         });        
      });
   });
 </script> 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:54:53.000

是的，我在成功块内做了 console.log/alert ，但它似乎没有到达那里。正如您在上面看到的，两个 ajax 功能几乎相同。第一个使服务器调用“show”，第二个使服务器调用“comment”，然后在处理“comment”后重定向到服务器调用“show”。第二个 ajax 调用工作正常。

这是我的车把模板代码：

```
 <script id="login_template" type="text/x-handlebars-template">
          logout={{logout}}
          login={{login}}
          {{#if user}}
            {{user.nickname}}!  
            [<a href="{{logout}}"><b>sign out</b></a>]
          {{else}}
            Guest  
            [<a href="{{login}}"><b>sign in</b></a>]
          {{/if}}
    </script>

    <script id ="comment_template" type="text/x-handlebars-template"> 
        <h2>Top 10 Most Recent Guestbook Entries</h2>
          no of greetings {{greetings.length}}
          {{#each greetings}}
             greetings!
            <br>
              <small>[<i>{{date.ctime}}</i>]</small>
              <b>
              {{#if author }}
                <code>{{author.nickname}}</code>
              {{else}}
                <i>anonymous</i>
              {{/if}}
              </b>
              wrote:
              {{comment}}
          {{/each}}
    </script> 
```

这是我在 HTML 正文中的 DOM 元素：

```
 <div id="login_content"></div>
  <div id="comment_content"></div> 
```

这是服务器代码：

```
class ShowComment(webapp2.RequestHandler):
     def get(self):
        user = users.get_current_user()
        greetings = Greeting.all().order('-date').fetch(10)
        results = {
            'user':      user,
            'greetings': greetings,
            'login':     users.create_login_url(self.request.uri),
            'logout':    users.create_logout_url(self.request.uri),
        }
        self.response.headers['Content-Type'] = 'application/json'
        self.response.out.write( JSONUtils.GqlEncoder().encode(results) )

class Guestbook(webapp2.RequestHandler):
  def post(self):
    Jguest_data = json.loads(self.request.body) 
    greeting = Greeting()
    for gb_name,gb_comment in Jguest_data.iteritems():

        user = users.get_current_user()
        if user:
           greeting.author = user
        greeting.content = gb_comment
        greeting.put()
        self.redirect('/show')

app = webapp2.WSGIApplication([('/', MainPage),
                              ('/comment', Guestbook),
                              ('/show',ShowComment)
                               ],
                              debug=True) 
```

**谢谢一米。**

# android - Firefox for Android (v18) CSS Reset?

> ID：14866179
> 
> 赞同：3
> 
> 时间：2013-02-14T01:05:23.750
> 
> 标签：android, firefox, css

I'm struggling to remove unwanted box shadows and gradients from elements such as including `<input type="text">`, `<textarea>`, `<select>`, and `<button>` in the latest version of [Firefox for Android](http://www.mozilla.org/en-US/mobile/) (v18). The desktop counterpart of Firefox for Ubuntu and Windows **does not** exhibit the same issue.

Safari on iOS also adds styling to make certain elements appear more *native-like*, however resetting the unwanted styles was fairly easy thanks to `-webkit-appearance: none`.

[Mozilla's Developer Docs](https://developer.mozilla.org/en-US/docs/CSS/-moz-appearance) do mention support for `-moz-appearance: none`, however it does not seem to work as intended on Firefox for Android.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-13T11:30:15.007

这个问题在引导程序上有很好的记录，删除背景图像对我有用

[https://github.com/twbs/bootstrap/issues/8702](https://github.com/twbs/bootstrap/issues/8702)

```
background-image: none; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T08:15:39.773

你需要设置

```
background:#fff;
border:0;
border-radius:0;
box-shadow:none; 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T05:01:28.413

覆盖 Firefox 特定的按钮背景渐变，例如：

```
background: -moz-linear-gradient(top, #ffffff, #ffffff); 
```

# api - How can I check the total contents of chrome.storage?

> ID：14866180
> 
> 赞同：1
> 
> 时间：2013-02-14T01:05:24.140
> 
> 标签：api, google-chrome, google-chrome-extension, storage

In the chrome developer tools you can switch between different contexts in the javascript console and individually query the `chrome.storage.local.get()` and `chrome.storage.sync.get()` APIs. Is there a way to view the totality of what is stored there for all of chrome?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:40:53.230

如果您查看 API 的源代码

```
bool StorageGetFunction::RunWithStorage(ValueStore* storage) {
  Value* input = NULL;
  EXTENSION_FUNCTION_VALIDATE(args_->Get(0, &input));

  switch (input->GetType()) {
    case Value::TYPE_NULL:
      return UseReadResult(storage->Get());

    case Value::TYPE_STRING: {
      std::string as_string;
      input->GetAsString(&as_string);
      return UseReadResult(storage->Get(as_string));
    }

    case Value::TYPE_LIST: {
      std::vector<std::string> as_string_list;
      AddAllStringValues(*static_cast<ListValue*>(input), &as_string_list);
      return UseReadResult(storage->Get(as_string_list));
    }

    case Value::TYPE_DICTIONARY: {
      DictionaryValue* as_dict = static_cast<DictionaryValue*>(input);
      ValueStore::ReadResult result = storage->Get(GetKeys(*as_dict));
      if (result->HasError()) {
        return UseReadResult(result.Pass());
      }

      DictionaryValue* with_default_values = as_dict->DeepCopy();
      with_default_values->MergeDictionary(result->settings().get());
      return UseReadResult(
          ValueStore::MakeReadResult(with_default_values));
    }

    default:
      return UseReadResult(
          ValueStore::MakeReadResult(kUnsupportedArgumentType));
  }
} 
```

存储类型用作查询结果的参数。因此，到目前为止，还无法查看所有 chrome 中存储的全部内容，您必须使用两个不同的查询（`chrome.storage.local.get()`和`chrome.storage.sync.get()`API）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T04:42:44.380

你试过这个吗？控制台.log(chrome.storage);

# embed - Yammer 嵌入不显示帖子图像

> ID：14866184
> 
> 赞同：0
> 
> 时间：2013-02-14T01:05:40.227
> 
> 标签：embed, yammer

我正在使用此处概述的方法嵌入 Yammer 组提要，[https://help.yammer.com/entries/21262512-Embed-a-feed](https://help.yammer.com/entries/21262512-Embed-a-feed)但我没有在嵌入的提要中看到任何发布的图像。有没有其他人遇到过这个？请注意，我使用的是免费版本。

**脚本**

```
<script data-app-id="fyB2pTcfL36Y80py8RTj6F" src="https://assets.yammer.com/platform/yam.js"></script>

<script>
    yam.connect.embedFeed({
        container: "#design-ideas",
        network: "myYammerFeed",
        feedType: "group",
        feedId: "1053789"});
</script> 
```

**CSS**

```
.fleft{ float:left;} 
```

**HTML**

```
<div>
    <h1>Design Ideas</h1>
    <div id="design-ideas" class="fleft"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:01:31.457

我找到了答案。我正在浮动显示提要的 div，并且更改它会导致图像不出现。如果您希望有多个 div，每个 div 都显示来自不同 Yammer 组的提要，这会很麻烦。

# angularjs - 列表中的项目数过滤 AngularJS

> ID：14866185
> 
> 赞同：20
> 
> 时间：2013-02-14T01:05:41.307
> 
> 标签：angularjs, filtering

您如何获得 AngularJS 中过滤器预测返回的项目的长度/数量？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-02-14T01:14:59.400

感谢 Pawel Kozlowski，我设法在 AngularJS Google Group 上找到了一个很好的答案。

```
ng-repeat="item in filtered = (items | filter:filterExpr)" 
```

将动态创建`filtered`列表，您可以使用`filtered.length`当前范围内的任何其他位置来显示计数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-15T10:40:32.530

# 解决方案

试试这个 ：

**HTML**

```
<span ng-bind="nb"></span> 
```

**Javascript**

```
$scope.nb = $filter('filter')(items, filterExpr).length; 
```

# 文档

**在 HTML 模板绑定中**

```
{{ filter_expression | filter : array : expression : comparator}} 
```

**在 JavaScript 中**

```
$filter('filter')(array, expression, comparator) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-15T13:59:17.653

我还必须显示过滤数组的长度，这个对我有用：

```
{{ (items | filter:filterExpr).length }} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T20:27:04.773

事实上，这将与 display filter( `orderBy`, `limitTo`)一起使用

```
item in list = ( item_array|filter:some_str) | orderBy: pref | limitTo: nItemToDisplay 
```

如果您需要一次显示 5 个项目，您仍然可以使用 list.length。用于分页或数据表。

# ios - Monotouch.Dialog 从数据库生成并保留值

> ID：14866188
> 
> 赞同：2
> 
> 时间：2013-02-14T01:06:22.867
> 
> 标签：ios, xamarin.ios, monotouch.dialog

我有一个设置视图，我在其中使用 MT.D 来构建我的 UI。我只是让它从数据库中读取元素以填充部分中的元素。

我不知道如何访问每个元素的属性或值。我想根据每个项目在数据库中的值为元素设置不同的背景颜色。我还希望能够获取选定的值，以便可以在数据库中更新它。这是使用`MT.D`. 我可以让值显示出来并像他们应该的那样滑出......但是，为它们设置样式或添加代表以处理我丢失的点击。

```
List<StyledStringElement> clientTypes = SettingsController.GetClientTypes ();

        public SettingsiPhoneView () : base (new RootElement("Home"), true)
        {
            Root = new RootElement("Settings") {
                new Section ("Types") {
                    new RootElement ("Types") {
                        new Section ("Client Types") {
                             from ct in clientTypes
                                select (Element) ct
                        }
                    },
                    new StringElement ("Other Types")
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:23:41.353

下面是我如何处理它。基本上你必须在 foreach 循环中创建元素，然后用你想在那里做的任何事情填充委托。像这样：

```
public static List<StyledStringElement> GetClientTypesAsElement ()
        {
            List<ClientType> clientTypes = new List<ClientType> ();
            List<StyledStringElement> ctStringElements = new List<StyledStringElement> ();

            using (var db = new SQLite.SQLiteConnection(Database.db)) {
                var query = db.Table<ClientType> ().Where (ct => ct.IsActive == true && ct.Description != "Default");

                foreach (ClientType ct in query)
                    clientTypes.Add (ct);
            }

            foreach (ClientType ct in clientTypes) {
                // Build RGB values from the hex stored in the db (Hex example : #0E40BF)
                UIColor bgColor = UIColor.Clear.FromHexString(ct.Color, 1.0f);
                var localRef = ct;
                StyledStringElement element = new StyledStringElement(ct.Type, delegate {
                    ClientTypeView.EditClientTypeView(localRef.Type, localRef.ClientTypeId);
                });

                element.BackgroundColor = bgColor;
                ctStringElements.Add (element);
            }

            return ctStringElements;
        } 
```

# compilation - 在编译期间是否可以链接到不同的对象？

> ID：14866189
> 
> 赞同：0
> 
> 时间：2013-02-14T01:06:24.707
> 
> 标签：compilation, linker

假设我有两个版本的库位于文件夹“V1”和“V2”中，并且我有两个 C 文件：“v1.c”和“v2.c”，其中“v1.c”将使用库“V1” ”，而“v2.c”将使用库“V2”。请注意，“V1”和“V2”具有相同的接口。我试过了：

```
g++ -c v1.c -o v1.o -I${V1}include
g++ -c v2.c -o v2.o -I${V2}include
g++ main.c -L${V1}lib v1.o -L${V2}lib v2.o -lsomething 
```

请注意，我在最后一个链接步骤中的 2 个目标文件之前提供了 2 个库路径。显然它不会达到我的预期，但我展示它只是为了表达我的意图。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:33:59.290

它将使用第一个找到的合适符号，即如果您在两个库中都有一个函数“bar”，并且库具有相同的名称，则将使用搜索中首先出现的文件中的函数“bar”。

您可以为不同库中的符号赋予不同的名称（它们仍然具有相同的名称），或者为库赋予不同的名称。

虽然我仍然不确定重命名符号是否会有所帮助，因为链接器可能只是链接到第一次遇到的库，然后抱怨它不包含其他需要的符号。最可靠的方法是重命名库。

如果有不清楚的地方请评论，我会尝试进一步解释。

# linux - 设置本地SVN

> ID：14866190
> 
> 赞同：0
> 
> 时间：2013-02-14T01:06:29.077
> 
> 标签：linux, svn

我正在尝试设置一个本地 svn 来对一个非常大的项目进行版本控制。通常我只将预制的 SVN 用于学校的东西，甚至可以创建一个本地 svn 文件夹来跟踪更改。

我`svnadmin create myrepo`用来创建存储库，然后`svn import home/dev/svntest file:///home/dev/myrepo`在那里导入文件。但是，当我运行该命令时，会创建一个名为的文件`svn-commit.tmp`，其中包含以下文本：

```
"--This line, and those below, will be ignored--

A    hello.txt:///~myrepo/test1" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:29:18.713

您缺少`svn import`. 添加`-m "Initial import of project svntest"`到您的`svn import`行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:17:14.713

@Mike 的后续行动

1.  不用担心这个奇怪的文件，只测试导入的结果
2.  从一开始就按常规布局 repo 树（/trunk+ /tags +/branches）可能有一些好处（即在导入之前执行 3 mkdir 和 import into `file:///home/dev/myrepo/trunk`）
3.  您始终可以使用`svn ls -v -R file:///home/dev/myrepo`命令在 repo 和控制结果树中看到

# php - jQuery调用php脚本onload

> ID：14866194
> 
> 赞同：1
> 
> 时间：2013-02-14T01:07:09.260
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 jQuery 的 ajax 来调用 php 脚本 onload。此脚本将从 url Web 服务返回 xml，对其进行解析，然后在页面加载（onload）时将其部分显示到 div 标签中。在使用表单时，我对 php 没意见，但是让 php 脚本运行 onload 对我不起作用。有人可以看看我的代码并给我你的建议吗？提前致谢。

**HTML：**

```
<!doctype html>
<html>
  <head>

    <title>Word of the Day</title>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="code.js"></script>

  </head>
<body>

<h3>Word of the Day: </h3>
<div id="word_day"></div>

</body>
</html> 
```

**JavaScript：**

```
$(document).ready(function() {

  $(window).load(function() {

    $.ajax({
      post: "GET",
      url: "word_day.php"
    }).done(function() {
      alert(this.responseText);
    }).fail(function() {
      alert(this.responseText);
    });

  });

}); 
```

我没有添加我的 PHP 代码，因为我很确定这不是我沮丧的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:11:54.810

您不需要这两个处理程序，只需要一个：

```
$(document).ready(function() 
{
    $.ajax(
    {
        post: "GET",
        url: "word_day.php"
    }).done(function() 
    {
        alert(this.responseText);
    }).fail(function() 
    {
        alert(this.responseText);
    });

}); 
```

正如您所拥有的那样，您试图在处理程序触发时创建一个处理程序，但它永远不会起作用。

**编辑：**

您的完成/失败部分应如下所示：

```
}).done(function(data) 
{
    alert(data);
}).fail(function(jqXHR, textStatus, errorThrown) 
{
    alert(textStatus);
}); 
```

# c++ - 重用现有的 GtkTreeView

> ID：14866196
> 
> 赞同：0
> 
> 时间：2013-02-14T01:07:21.133
> 
> 标签：c++, gtk, gtktreeview

**TL；DR** `assertion 'VALID_ITER (parent, tree_store)' failed`：。我如何解决它？

我已经使用以下（修剪过的）代码在我的应用程序中成功显示了 GtkTreeView：

```
enum { DISPLAY_COLUMN, N_COLUMNS };
GValue comment = G_VALUE_INIT;
GValue amount = G_VALUE_INIT;

GtkTreeIter toplevel, child;
GtkTreeStore *treestore = gtk_tree_store_new(N_COLUMNS, G_TYPE_STRING);

for(int step = 0; step < recipe_count; step++) {
    g_value_init(&comment, G_TYPE_STRING);
    g_value_set_string(&comment, recipe[step].comment);
    gtk_tree_store_append(treestore, &toplevel, NULL);
    gtk_tree_store_set_value(treestore, &toplevel,
        COMMENT_COLUMN, &comment
    );

    g_value_init(&amount, G_TYPE_STRING);
    g_value_set_string(&amount, recipe[step].amount);
    gtk_tree_store_append(treestore, &toplevel, &child);
    gtk_tree_store_set_value(treestore, &toplevel,
       COMMENT_COLUMN, &amount
    );

    g_value_unset(&amount);
    g_value_unset(&comment);
}

gtk_tree_view_set_model(GTK_TREE_VIEW(app->step_tree),GTK_TREE_MODEL(treestore));

GtkCellRenderer *renderer = gtk_cell_renderer_text_new();
GtkTreeViewColumn *column = gtk_tree_view_column_new_with_attributes ("Step",
                                    renderer,
                                    "text", DISPLAY_COLUMN,
                                    NULL);
gtk_tree_view_append_column(GTK_TREE_VIEW(app->step_tree), column); 
```

以上所有内容都包含在一个函数中，以便稍后我可以再次加载新数据。但是，我第二次尝试

```
(recipe_editor:11451): Gtk-CRITICAL **: IA__gtk_tree_store_append: assertion `VALID_ITER (parent, tree_store)' failed
(recipe_editor:11451): Gtk-CRITICAL **: IA__gtk_tree_store_set_value: assertion `VALID_ITER (iter, tree_store)' failed 
```

我知道这意味着我的迭代器有问题，但我不确定如何实际修复它。

# hibernate - 有没有办法在不使用迭代器的情况下检索 SQL 结果？（使用休眠）

> ID：14866201
> 
> 赞同：0
> 
> 时间：2013-02-14T01:07:53.863
> 
> 标签：hibernate

我有一个返回多条记录的 HQL。

例如

```
select * from employees where surname like 'A%' order by employee_id 
```

如何在不遍历列表的情况下访问第三条记录中的第三个字段？我在网上搜索过，但空手而归。

我知道 get 函数，但列表是对象列表（即不是特定类），所以我**不能**使用类似的东西：

```
myList.get(2).getSurname(); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:25:08.703

如果您有一个列表，那么您可以从其中获取第三个项目[`list.get(2)`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#get%28int%29)，就像任何地方一样。如果您做了类似的事情[`Query.iterate()`](http://docs.jboss.org/hibernate/orm/3.5/javadoc/org/hibernate/Query.html#iterate%28%29)，那么您故意要求按需加载结果而不是全部预先加载，并且您会被这样做的后果所困扰。如果您在调用[`next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#next%28%29)几次时遇到问题，请修复`order by`查询的子句以将该记录放在首位。否则`Query.list()`请改用，它将查询的整个结果作为列表一次加载到内存中。

至于第三个字段，当您使用 HQL 时，您加载的是对象，而不是字段，因此以这种方式谈论字段并没有任何意义。

# jquery - 悬停子菜单 (jQuery)

> ID：14866202
> 
> 赞同：0
> 
> 时间：2013-02-14T01:07:53.623
> 
> 标签：jquery, hover

我设置了一个悬停子菜单，几乎可以 100% 工作......唯一的问题是在页面加载时菜单没有隐藏。一旦你将它悬停一次，它就会正常工作，但我试图在页面加载时隐藏它。任何想法将不胜感激

```
<script>

$(document).ready(function() {

$('.nav2').hide(); 
$(".nav").hover(function() {
$(this).find('.nav2').show();
}, 
function() {
$(this).find('.nav2').hide();
});

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:10:10.387

也许添加一个“显示：无”样式属性到您的 .nav2 容器

# facebook-fql - FQL：查询对我的 me() 发表评论的组中的帖子

> ID：14866204
> 
> 赞同：2
> 
> 时间：2013-02-14T01:08:15.183
> 
> 标签：facebook-fql

我一直在 StackOverflow 上查看此查询的许多排列，但没有像这样的，我无法弄清楚。

我正在关注特定组中已由`me()`（当前用户）评论过的帖子。

我可以看到如何获取所有足够简单的帖子（和评论）：

```
SELECT post_id, comments FROM stream WHERE source_id=GROUP_ID 
```

但是，然后进入评论以进一步过滤`fromid`of`me()`是在暗示我。这是多查询的工作吗？`IN`或者我需要运行某种条款吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:12:09.637

如果您得到的只是帖子 ID 和评论，那么您不需要多查询。尝试这个：

```
SELECT post_id, fromid, text FROM comment WHERE post_id IN
  (SELECT post_id FROM stream WHERE source_id=GROUP_IDENTIFIER)
  AND fromid=me() 
```

# java - 来自谷歌云存储的文件列表

> ID：14866206
> 
> 赞同：6
> 
> 时间：2013-02-14T01:08:30.393
> 
> 标签：java, google-app-engine, servlets, google-cloud-storage

对于我正在做的一个项目，我会将文件存储在 Google 的云存储中，并正在构建一个 Web 应用程序来连接这些文件。我希望我的应用程序显示存储在我的存储桶中的文件列表（或对象可能是适当的名称）。我对网络开发和谷歌 API 完全陌生。

我一直在研究如何做到这一点，并找到了这段代码......

```
Storage storage = new Storage(httpTransport, jsonFactory, credential);
    ObjectsList list = storage.objects().list("bucket-name").execute();
    for (Object obj : list.getItems()) {

      } 
```

并声明使用 AppIdentityCredential。

任何关于如何将上述代码与 AppIdentityCredential 一起使用的建议或关于使用 java 列出存储在存储桶中的文件的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T09:43:06.070

[这](http://code.google.com/p/google-api-java-client/source/browse/storage-cmdline-sample/src/main/java/com/google/api/services/samples/storage/cmdline/StorageSample.java?repo=samples)应该可以帮助你。

请记住，您需要 Cloud Storage API 而不是 GAE API（仅供参考：）。您可以在此处阅读该 API -> [https://developers.google.com/storage/docs/json_api/v1/json-api-java-samples（JSON](https://developers.google.com/storage/docs/json_api/v1/json-api-java-samples)，还有一个 XML API）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-07-12T22:45:55.217

从 Java 访问 Google Cloud Storage 存储桶的最简单方法是使用[NIO Filesystem Provider for Google Cloud Storage](https://github.com/GoogleCloudPlatform/google-cloud-java/tree/master/google-cloud-clients/google-cloud-contrib/google-cloud-nio)。

该链接显示了如何将依赖项添加到您的项目并进行设置。然后，列出存储桶中的文件：

```
try (FileSystem fs = CloudStorageFileSystem.forBucket("bucket-name")) {
  for (Path path : Files.newDirectoryStream(fs.getPath("folder-name/"))) {
        System.out.println(path);
      }
} 
```

我没有在 AppEngine 本身中尝试过这个，但是我在外面测试过它并且它可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T18:34:38.897

以下要点可以列出 Google Cloud Storage 存储桶中的所有文件/文件夹：

[https://gist.github.com/hkarakose/d8f9ff78f7deb692e5302e06e8612ca6](https://gist.github.com/hkarakose/d8f9ff78f7deb692e5302e06e8612ca6)

您需要以下 maven 依赖项来运行代码：

```
<dependency>
  <groupId>com.google.cloud</groupId>
  <artifactId>google-cloud</artifactId>
  <version>0.8.0</version>
</dependency> 
```

# php - mail() 在新服务器上不起作用

> ID：14866207
> 
> 赞同：8
> 
> 时间：2013-02-14T01:08:42.040
> 
> 标签：php, email, nginx, debian, sendmail

可能这是一个愚蠢的问题，但我找不到php邮件功能不起作用的原因我在debian挤压上有一个nginx服务器，我最近搬到了它。我尝试了简单的邮件执行，但它返回错误。

```
if(mail('test@email.com', 'test-subject', 'test-text-blablabla'))
   echo 'ok';
else
   echo 'bad'; 
```

我能用它做什么？

谢谢。

我的 php.ini 邮件部分：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
;sendmail_from = me@example.com 

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
;sendmail_path =

; Force the addition of the specified parameters to be passed as extra parameters
; to the sendmail binary. These parameters will always replace the value of
; the 5th parameter to mail(), even in safe mode.
;mail.force_extra_parameters =

; Add X-PHP-Originating-Script: that will include uid of the script followed by the filename
mail.add_x_header = On

; The path to a log file that will log all mail() calls. Log entries include
; the full path of the script, line number, To address and headers.
;mail.log = 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-15T00:40:52.323

好的，我做到了。我如何使用 nginx 服务器进行 debian 挤压：（我从 root 用户执行的所有命令）

首先你需要安装sendmail

```
apt-get install sendmail 
```

接下来，你必须配置这个比我想象的更容易的文件

```
sendmailconfig 
```

好的，下一步我要做的是 php.ini 配置（我不是一个优秀的管理员，我是初学者，所以我不知道是否有必要。）

我设置

```
sendmail_path= /usr/sbin/sendmail -t -i 
```

好的，从这一刻起，理论上你可以发送电子邮件，但对于我来说，它导致了 504 http 错误网关超时。但正如我后来发现的那样，电子邮件已经到了邮箱。所以，我的测试 php 文件是：

```
<?php 
   mail('myWorkingEmail@example.com', 'test', 'you done that');
   echo 'ok'; // I use this to check that script is end the execution 
?> 
```

这很清楚。

下一个问题是 504 错误。我去日志文件

```
nano /var/log/mail.log 
```

在这里我发现了这个错误（不是唯一的一个错误，而是那个导致 504 错误的错误）：

```
sm-msp-queue[***]: My unqualified host name (myhostname) unknown; sleeping for retry 
```

然后，找到解决这个问题的方法： [http](http://forums.fedoraforum.org/archive/index.php/t-85365.html) ://forums.fedoraforum.org/archive/index.php/t-85365.html该页面上的最后一条评论。

或者我做了这个：

```
nano /etc/hosts 
```

在那个文件中我改变了主机的顺序

```
127.0.0.1 my_ip localhost myhostname 
```

保存，完成。打开您的测试 php 文件，没有任何 504 错误，并且电子邮件是您在邮件功能中提到的电子邮件的收入。正如我所说，我是一个新手，这可能对你不起作用，但无论如何它对我有用。当然，这不是最终配置。希望对您有所帮助。

# c++ - 隐藏 QWidget 时重新分配布局空间

> ID：14866211
> 
> 赞同：1
> 
> 时间：2013-02-14T01:09:08.467
> 
> 标签：c++, qt

我们有一个 QGridLayout ，它有一个特定的行，排列如下：

```
+---------------------------+
|     |                |    |
|  A  |       B        |  C |
|     |                |    |
+---------------------------+ 
```

有时，表示为“B”的 QWidget（一个 QLabel）是隐藏的。发生这种情况时，我希望小部件“A”和“C”（两个 QButton）重新分配 50/50。稍后我想将“B”放回流程中，并给他们 20/60/20'ish 的布局。

我已经尝试过`B->hide()` `B->setVisible(false)` `layout->removeWidget(B)`，但在每种情况下，'B 的空间仍然保留在屏幕上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:01:29.880

你必须改变你的布局（因为它是一个«网格»，所有的列都必须缩小）。

不要将所有 3 个都放在 GridLayout 中，而是将它们添加到您添加的 QHBoxLayout `gridLayout->addLayout(vLayout, 0, row, 1, -1)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:39:40.720

假设您有 colspan 10，那么 A 将占用 2 列，B - 6 和 C - 2

您将小部件添加到布局中，如下所示：

```
layout->addWidget(A,0,0,1,2); // 2 - is rowspan
layout->addWidget(B,0,2,1,6); // 6 - is rowspan
layout->addWidget(C,0,8,1,2); // 2 - is rowspan 
```

那里：20-60-20，但是当您只需要 50 x 50 的 A 和 C 时，您需要从布局中删除 A、B、C 并再次将它们添加为

```
layout->addWidget(A,0,0,1,5); // 5 - is rowspan
layout->addWidget(C,0,5,1,5); // 5 - is rowspan 
```

# c - 递归代码模棱两可的答案

> ID：14866216
> 
> 赞同：0
> 
> 时间：2013-02-14T01:09:53.610
> 
> 标签：c, recursion, reference

`f(p,p)`如果 p 的值在调用前被初始化为 5，返回值是多少？请注意，第一个参数是通过引用传递的，而第二个参数是通过值传递的。

```
int f (int & x, int c )
{
    c = c − 1;
    if ( c == 0 ) return 1;
    x = x + 1;
    return f ( x, c ) * x;
} 
```

(A) 3024
(B) 6561
(C) 55440
(D) 161051

根据我的说法，它是 3024，因为我们从 `f(5,5)` `f(6,4)*6` `f(7,3)*7` `f(8,2)*8` `f(9,1)*9` then开始`1`，而且我对按引用部分调用有点困惑`return f ( x, c ) * x` ，每次调用后 x 的值会改变还是保持不变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:24:23.107

假设这真的是 C++ 而不是 C（所以引用声明是有意义的），结果是未指定的（但不是未定义的行为）。

问题是在表达式中，程序是否会在调用之前或之后`f(x,c) * x`评估第二个是未指定的。`x``f(x,c)`

请注意，由于未指定此行为，因此您根本不能依赖它 - 更改编译器选项可能会更改评估顺序。事实上，在技术上允许编译器使用一个顺序来评估表达式，对某些调用使用另一种顺序，`f()`而对其他调用使用另一种顺序`f()`（尽管我认为这在实践中不会发生）。

# javascript - 禁用加载动画砌体无限滚动

> ID：14866227
> 
> 赞同：1
> 
> 时间：2013-02-14T01:10:49.333
> 
> 标签：javascript, jquery-masonry, infinite-scroll

我正在尝试禁用加载`#infsrc-loading`容器的烦人动画。看看这里的无限滚动演示[http://masonry.desandro.com/demos/infinite-scroll.html](http://masonry.desandro.com/demos/infinite-scroll.html)。

加载 div 第一次出现时它是静态的，但之后当它加载更多内容时会有一个动画，就像它从底部出现并增长一样。我想禁用它，但我找不到它的设置位置。

`$('#infsrc-loading').show()`我尝试在插件的回调中禁用 CSS 过渡。我查看了 Masonry 和 InfiniteScroll 的来源，但仍然无法确定此设置的设置位置。我也禁用了 Masonry 中的动画。

如果有帮助，我正在使用 WordPress 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:20:30.217

我找到了这段代码。它[位于 Infinite Scroll 的第 155 行](https://github.com/paulirish/infinite-scroll/blob/master/jquery.infinitescroll.js#L155)。我只是改为`show`让它`fadeIn`按我需要的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T19:47:14.410

也许其中一些不是必需的，但对我有用：

```
<style>
  #infscr-loading { display:none; }
</style> 
```

对于无限滚动的初始化，设置这些选项：

```
loadingImg : "",
loadingText : "",
loading: {
    finishedMsg: "",
    msgText: "",
    img: "" } 
```

更新：这里的最后一行隐藏了蓝色动画进度条 gif。

我正在使用这个版本：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-infinitescroll/2.0b2.120519/jquery.infinitescroll.min.js"></script> 
```

如果您可以改进我的答案，请随时纠正我:-)

# python - 在 scikit learn 中结合网格搜索和交叉验证

> ID：14866228
> 
> 赞同：11
> 
> 时间：2013-02-14T01:11:00.630
> 
> 标签：python, svm, scikit-learn, cross-validation

为了改善支持向量机的结果，我必须使用网格搜索来搜索更好的参数和交叉验证。我不确定如何在 scikit-learn 中组合它们。网格搜索搜索最佳参数（[http://scikit-learn.org/stable/modules/grid_search.html](http://scikit-learn.org/stable/modules/grid_search.html)）和交叉验证避免过度拟合（[http://scikit-learn.org/dev/modules/cross_validation.html](http://scikit-learn.org/dev/modules/cross_validation.html)）

```
#GRID SEARCH
from sklearn import grid_search
parameters = {'kernel':('linear', 'rbf'), 'C':[1, 10]}
svr = svm.SVC()
clf = grid_search.GridSearchCV(svr, parameters)
#print(clf.fit(X, Y))

#CROSS VALIDATION
from sklearn import cross_validation
X_train, X_test, y_train, y_test = cross_validation.train_test_split(X, Y, test_size=0.4, random_state=0)
clf = svm.SVC(kernel='linear', C=1).fit(X_train, y_train)

print("crossvalidation")
print(clf.score(X_test, y_test))
clf = svm.SVC(kernel='linear', C=1)
scores = cross_validation.cross_val_score(clf, X, Y, cv=3)
print(scores ) 
```

结果：

```
GridSearchCV(cv=None,
   estimator=SVC(C=1.0, cache_size=200, class_weight=None, coef0=0.0, degree=3, gamma=0.0,
kernel=rbf, probability=False, shrinking=True, tol=0.001, verbose=False),
   estimator__C=1.0, estimator__cache_size=200,
   estimator__class_weight=None, estimator__coef0=0.0,
   estimator__degree=3, estimator__gamma=0.0, estimator__kernel=rbf,
   estimator__probability=False, estimator__shrinking=True,
   estimator__tol=0.001, estimator__verbose=False, fit_params={},
   iid=True, loss_func=None, n_jobs=1,
   param_grid={'kernel': ('linear', 'rbf'), 'C': [1, 10]},
   pre_dispatch=2*n_jobs, refit=True, score_func=None, verbose=0)

crossvalidation
0.0
[ 0.11111111  0.11111111  0\.        ] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T10:06:26.200

您应该先进行开发/评估拆分，在开发部分运行网格搜索，最后在评估部分测量唯一的最终分数：

[文档](http://scikit-learn.org/stable/modules/grid_search.html)中有[一个示例](http://scikit-learn.org/stable/auto_examples/model_selection/grid_search_digits.html)。

# assembly - 为什么这会出现段错误？

> ID：14866235
> 
> 赞同：0
> 
> 时间：2013-02-14T01:11:46.073
> 
> 标签：assembly, segmentation-fault, fasm

我想`argv[1]`从另一个例程而不是从启动例程（这是入口点）打印（在 C 终端学中）。但它给出了一个段错误：

```
format ELF executable 3
entry start
segment readable executable

start:
    pop ebx ;argc
    pop ebp ;argv[0]
    call printarg

    ;; exit
    xor ebx,ebx
    mov eax,1
    int 80h

printarg:
    pop ebp ;argv[1]
    call puts
    ret
puts:
    pusha
    mov eax,ebp
    xor edx,edx
    ;; get string length
.loop1:
    cmp byte [eax],0
    je .loop2
    inc eax
    inc edx
    jmp .loop1
    ;; print it
.loop2:
    mov eax,4
    mov ebx,1
    mov ecx,ebp
    int 80h
    ;print a new line
    mov eax,4
    mov ebx,1
    mov ecx,NL
    mov edx,1
    int 80h 
    popa
    ret

segment readable writeable
NL db 0xA 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:27:10.287

你不能做

```
call something 
```

接着

```
something:
  pop ebp 
```

并期望它能够工作 - 在例程中，您弹出的内容是调用刚刚推送的返回地址。

# java - ExecutorService 没有正确调用中断（）

> ID：14866238
> 
> 赞同：4
> 
> 时间：2013-02-14T01:11:57.647
> 
> 标签：java, sockets, executorservice

我创建了一个 ExecutorService 来管理我所有的单独线程，每个线程都处理一个套接字连接。我覆盖了每个线程中的中断方法以在线程中断时关闭套接字，以防套接字当前处于不可中断的方法中（如 socketserver.accept()）。

如果我在应用程序关闭时手动调用线程上的中断，一切都会正常关闭。但是，如果我使用我的 ExecutorService 并运行 shutdownNow，它似乎根本没有调用被覆盖的中断方法。

为什么它不调用我的重写方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T22:10:58.463

我遇到了同样的问题，并找到了使用线程池的解决方案。请参阅下面的描述和简化代码。

1) 创建了我自己的线程类，它覆盖了 interrupt() 以调用一个 close() 方法，该方法是使用我创建的 set 方法和 Closeable 接口配置的。如果已配置，则覆盖 interrupt() 以调用 close 方法。

```
public class CloseableThread extends Thread {
    private Closeable mCloseable = null;

    public interface Closeable {
        void close();
    }

    // Constructors deleted

    public void interrupt() {
        super.interrupt();
        if (mCloseable != null) {
            mCloseable.close();
        }
    }

    public void setCloseable(Closeable closeable) {
        mCloseable = closeable;
    }
} 
```

2) 创建了我自己的池类，它扩展了 ThreadPool，它为我的可关闭线程提供了一个工厂，并覆盖 beforeExecute() 以设置可关闭。

```
public class CloseableThreadPoolExecutor extends ThreadPoolExecutor {
    static class CloseableThreadFactory implements ThreadFactory {
        public Thread newThread(Runnable r) {
            return (Thread) new CloseableThread(r);
        }
    }

    // Constructors deleted

    @Override
    protected void beforeExecute(Thread t, Runnable r) {
        super.beforeExecute(t, r);

        if (t instanceof CloseableThread && r instanceof Closeable) {
            ((CloseableThread) t).setCloseable((Closeable) r);
        }
    }
} 
```

3) 确保任何使用套接字的任务都实现了 Closeable 并且 close() 方法以某种方式导致套接字关闭。确保干净地处理以这种方式关闭时将生成的套接字异常。

# testing - QA 测试工具集成

> ID：14866243
> 
> 赞同：1
> 
> 时间：2013-02-14T01:12:42.183
> 
> 标签：testing, qa, regression-testing, alm

我需要一些关于为我的回归测试策略选择正确工具的建议。主要标准是正确工具的“最佳购买”。在分析了 Gartner 的案例研究后，我尝试在 Atlassian 和 IBM QA 解决方案之间进行选择。主要的困境是IBM Jazz 平台集成了Rational 功能测试器作为自动化测试解决方案，而Atlassian 依赖于默认不集成自动化测试收费的Jira 平台。

我的公司是面向 Java 的，所以我们取消了 HP Quick Test Professional，因为 VB 脚本语言。

选项是：

1.  Atlassian：Jira - Greenhoper - Zephyr - Selenium 2
2.  IBM：Jazz - Rational 质量中心 - Rational 团队音乐会 - Rational 功能测试器。

第一个显然是更便宜的解决方案，但我认为 Selenium 不是长期解决方案，因为当应用程序发生变化时，维护大量测试脚本变得更加困难 - 当我在脚本中替换某些内容时，RFT 会映射对象（或者也许我'我错了）。

负责自动化测试的人将是开发人员，因为我无法仅通过记录器创建大部分测试。

要测试的应用程序是 java web 应用程序并与另一个系统集成。

问题：RFC 是否有可能与 Jira 集成而不是 Jazz？如果是，您如何看待 Atlassian - Jira - Greenhoper - Zephyr - Rational 功能测试器解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:30:06.157

我不同意 Selenium 测试很难管理，如果它们写得好，它们可以很容易维护和扩展。我同意虽然它们更难编写，但实际上大多数更复杂的自动化测试都必须在没有记录器的情况下编写。Recorder 是帮助更快编写测试的工具，但不是完全替代任何编码的工具。

如果被测试的接口发生重大变化，改变部分测试是不可避免的。除了 Selenium，您还可以使用 Jenkins，它是一个很棒的回归测试工具，可以让您轻松执行、安排测试和集成。它还提供了各种不同的插件来使用，而且很简单。

从长远来看，我建议聘请具有基本编码技能的测试人员来编写自动化测试。问题是，开发人员和质量保证人员由于他们所做的工作类型而有不同的心态。开发人员熟悉他编写的代码，因此自动化测试将依赖它，这可能会导致一些错误被遗漏（在某种程度上，这将是白盒测试）。另一方面，QA 对代码一无所知，他们在编写测试时尝试以用户的身份思考，这可能不如开发人员测试代码的质量高，但在功能测试中他们会更好（在某种程度上这将是黑盒测试）。

总之，我肯定会检查 Selenium。另外，通过使用代码编写测试，您可以使用用于编写测试以进一步扩展它们的编程语言。没有录音工具可以做到这一点。也请查看 Jenkins，它将允许您团队中的任何人运行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T06:35:45.983

这是一个复杂的问题，不仅因为您要问什么，您还需要考虑到，如果您开始在多个供应商之间进行集成，那么您的流程就会变得更加脆弱。这与集成或供应商的质量无关，只是让多个公司分开工作，需要不断进行更改以适应其他公司所做的更改......简而言之，这是另一点反对您要求在 3 个不同公司的解决方案之间进行集成的第一个选项。

话虽如此，即使您使用 Selenium 开发测试框架，您也可以以可扩展的方式进行，即使您的对象被修改，也可以支持。您可以使用定义明确的功能和智能识别对象。您不应将此作为选择任一解决方案的标准。

我想我会尝试这两个选项（或表中的任何其他选项），运行一个简短的试点项目，对所有选项都有利弊，然后做出最佳决定。我认为您很难做出其他决定（除非您即将掷硬币:-)

在我的公司，我们创建了一份简短的白皮书，可以帮助您构建评估流程。这是[链接](http://www.practitest.com/resources/five-steps-for-choosing-the-right-qa-management-system/)，它是免费的顺便说一句。

还提醒我的是，Zephyr 并不是唯一与 Jira 集成并知道如何运行 Selenium（或 TestComplete，或任何其他自动化框架）的人。您也可以查看我们的解决方案。它被称为[PractiTest](http://www.practitest.com)，它可能是您尝试的另一种选择（对不起，如果我没有让事情变得更容易，我给您添加了另一个要考虑的事情 :-)

无论如何祝你好运！

-乔尔

# wordpress - WordPress 自定义菜单错误

> ID：14866249
> 
> 赞同：0
> 
> 时间：2013-02-14T01:13:31.770
> 
> 标签：wordpress

我正在尝试为[wordpress](http://www.botkai.com/baseball/)创建自定义菜单，但遇到了一些问题。

我有 3 个其他菜单可以使用此代码完美运行：

```
add_action( 'init', 'register_my_menus' );

function register_my_menus() {
    register_nav_menus(
        array(
            'primary-menu' => __( 'Primary Menu' ),
            'top-menu' => __( 'Top Menu' ),
            'footer-menu' => __( 'Footer Menu' ),
            'baseball-menu' => __( 'Baseball Menu' ),
        )
    );
} 
```

然而问题是，即使我在管理面板中添加菜单，当我在自定义页面上调用此 -Baseball menu- 时，也会显示错误的菜单。

[菜单的图像](http://www.botkai.com/wp-content/uploads/2013/02/menus.png)

这是我用来调用棒球菜单的代码，但是当我检查页面时，显示的是正常的导航菜单。

我的想法不多了。什么可能导致这个问题？

```
<?php 
    /* Template Name: Baseball Page */

get_header(); ?>

            <!-- BEGIN MAIN WRAPPER -->
            <div id="main-wrapper">

            <div>

                <?php wp_nav_menu( array( 'container' => false, 'theme-location' => 'baseball-menu' ) ); ?>

            </div>

            </div>

            <?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:04:14.480

It looks like the issue is with the 'theme-location'. It is using a dash instead of an underscore.

It should be 'theme_location'.

Hope that helps,

~ crw

# playorm - 我的代码在本地运行并发出警告，但未在服务器上运行

> ID：14866254
> 
> 赞同：1
> 
> 时间：2013-02-14T01:14:09.223
> 
> 标签：playorm

我有一个需要使用 PlayORM 来完成插入/查询等工作的网络应用程序。我的代码在本地运行没有任何问题，但出现以下*警告*消息：

> com.alvazan.orm.impl.meta.scan.ScannerForClass processIdFieldWorksWARN：我们避免重复扫描一个 class=class com.alvazan.orm.impl.meta.data.MetaClassSingle 一切仍然可以正常工作，但请向我们发送堆栈跟踪，以便我们可以看到为什么会发生这种情况 java.lang.RuntimeException: null at com.alvazan.orm.impl.meta.scan.ScannerForClass.processIdFieldWorks(ScannerForClass.java:234) [playorm-1.4.3.jar:1.4.3 December 13 2012]

但是当我尝试在 JSF 页面上执行该代码时，该代码不起作用。以下是错误信息：

> INFO caoimpl.meta.scan.ScannerForClass - 扫描类=类 com.alvazan.orm.api.z8spi.meta.DboColumnMeta java.lang.RuntimeException: 失败扫描类（参见链式异常）=类 com.alvazan.orm.api。 z8spi.meta.DboColumnMeta

有人知道我能做些什么来解决这个问题吗？

更新：

*   第一个堆栈跟踪 - 在本地运行良好（运行外部网站）

> 2013-02-13 19:20:18,173 com.alvazan.orm.impl.meta.scan.ScannerForClass processIdFieldWorksWARN：我们避免双重扫描一个类=类 com.alvazan.orm.impl.meta.data.MetaClassSingle 一切仍然有效很好，但是请向我们发送堆栈跟踪，以便我们了解为什么会发生这种情况 java.lang.RuntimeException: null at com.alvazan.orm.impl.meta.scan.ScannerForClass.processIdFieldWorks(ScannerForClass.java:234) [playorm- 1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectFieldImpl(ScannerForClass.java:206) [playorm-1.4.3.jar:1.4.3 December 13 2012] 在 com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectField(ScannerForClass.java:193) [playorm-1.4.3.jar:1.4.3 December 13 2012] 在 com.alvazan.orm.impl。 meta.scan.ScannerForClass.scanFields(ScannerForClass.java:188) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanSingle(ScannerForClass.java:111) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm .impl.meta.scan.ScannerForClass.scanMultipleClasses(ScannerForClass.java:104) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.impl.meta.scan.ScannerForClass.addClass( ScannerForClass.java:64) [playorm-1.4.3.jar:1.4.3 December 13 2012] 在 com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42) [playorm-1.4.3。 jar:1.4.3 December 13 2012] at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.impetus .annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197) [playorm-1.4.3.jar:1.4.3 2012 年 12 月 13 日] 在 com.impetus.annovention.Discoverer.discover(Discoverer.java:155) [playorm-1.4.3.jar:1.4.3 2012 年 12 月 13 日] at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:82) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl .setup(BaseEntityManagerFactoryImpl.java:133) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64) [playorm-1.4 .3.jar:1.4.3 December 13 2012] at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57) [playorm-1.4.3.jar:1.4.3 December 13 2012] 在 com。alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52) [playorm-1.4.3.jar:1.4.3 December 13 2012] at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap .java:45) [playorm-1.4.3.jar:1.4.3 December 13 2012] 在 com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24) [playorm-1.4.3.jar :1.4.3 December 13 2012] at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45) [classes/:na] at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager( PlayOrmConfiguration.java:51) [classes/:na] 在 com.s1mbi0se.dmp.da.dao.AbstractDao.getEm(AbstractDao.java:10) [classes/:na] 在 com.s1mbi0se.dmp.da.dao。 UserDao.findInputPhase(UserDao.java:201) [classes/:na] 在 com.s1mbi0se.dmp.da.bean.InputPhaseStru.manageInputPhase(InputPhaseStru.java:105) [classes/:na] 在 com.s1mbi0se.dashboard。服务。DashboardService.readSolrLogFile(DashboardService.java:44) [classes/:na] at com.s1mbi0se.dashboard.service.DashboardService.main(DashboardService.java:29) [classes/:na]

*   第二个堆栈跟踪 - 不起作用（网络环境）

> 19:05:54.090 [http-bio-8080-exec-3] 信息 c.alvazan.orm.logging.NoSqlRawLogger - [rawlogger] 启动 NoSQL 服务提供程序并连接 19:05:54.101 [http-bio-8080-exec- 3] INFO caolsdcColumnFamilyHelper - On keyspace=dmpExisting column family=[inputphasestru, stringindice, dbocolumnmeta, integerindice, user, dbodatabasemeta, dbotablemeta] 注意：我们将在您保存没有列族的实体时自动创建新的列族 19:05:54.101 [http-bio-8080-exec-3] INFO caolbBaseEntityManagerFactoryImpl - 使用 nosql.Persistence.class 19:05:54.102 开始扫描 jars [http-bio-8080-exec-3] INFO ciannovention.ClasspathDiscoverer - 添加 jar 文件进行扫描=jar:file:/opt/apache-tomcat-7.0.30/wtpwebapps/teste28/WEB-INF/lib/playorm-1.4.3.jar!/ 19:05:54.102 [http-bio-8080-exec-3 ] 信息annovention.ClasspathDiscoverer - 添加用于扫描的 jar 文件=jar:file:/opt/apache-tomcat-7.0.30/lib/playorm-1.4.3.jar!/ 19:05:54.102 [http-bio-8080-exec- 3] INFO ciannovention.ClasspathDiscoverer - 添加用于扫描的 jar 文件=jar:file:/opt/apache-tomcat-7.0.30/wtpwebapps/teste28/WEB-INF/lib/dmpDataAccess-0.0.1-SNAPSHOT.jar!/ 19 ：05：54.119 [http-bio-8080-exec-3] 调试 caolbMyClassAnnotationDiscoveryListener - class=com.alvazan.orm.api.z8spi.meta.DboColumnMeta anno=com.alvazan.orm.api.base.anno.NoSqlEntity 19： 05:54.119 [http-bio-8080-exec-3] INFO caoimpl.meta.scan.ScannerForClass - 扫描类=类 com.alvazan.orm.api.z8spi.meta.DboColumnMeta java.lang.RuntimeException：失败扫描类（见链式异常）=com.alvazan.orm.layer0.base 的类 com.alvazan.orm.api.z8spi.meta.DboColumnMeta。MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:44) at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34) at com.impetus.annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197) at com .impetus.annovention.Discoverer.discover(Discoverer.java:155) 在 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:82) 在 com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup (BaseEntityManagerFactoryImpl.java:133) 在 com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64) 在 com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35) 在com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57) 在 com。alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52) 在 com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45) 在 com.alvazan.orm.api.base。 Bootstrap.create(Bootstrap.java:24) 在 com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45) 在 com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java: 51) 在 com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45) 在 com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java:51) 在 com.s1mbi0se.dmp .da.dao.AbstractDao.getEm(AbstractDao.java:10) 在 com.s1mbi0se.dmp.da.dao.UserDao.findInputPhase(UserDao.java:201) 在 com.s1mbi0se.dmp.da.bean.InputPhaseStru.manageInputPhase (InputPhaseStru.java:105) 在 com.s1mbi0se.dashboard.service.DashboardService。在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl. java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 javax.el.BeanELResolver.getValue(BeanELResolver.java:87 ) 在 javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67) 在 org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:169) 在 org.apache.el.parser.AstValue。 getValue(AstValue.java:183) 在 org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185) 在 org.apache.jasper.el.JspValueExpression。getValue(JspValueExpression.java:106) 在 javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:246) 在 javax.faces.component.UIOutput.getValue(UIOutput.java:67) 在 javax.faces.component.UIInput .getValue(UIInput.java:150) 在 org.apache.myfaces.shared.renderkit.RendererUtils.getValue(RendererUtils.java:505) 在 org.apache.myfaces.shared.renderkit.RendererUtils.getStringValue(RendererUtils.java:331 ) 在 org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderInput(HtmlTextRendererBase.java:186) 在 org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderInputBegin(HtmlTextRendererBase.java:197)。 apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:75) 在 javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:580) 在 javax。faces.component.UIComponent.encodeAll(UIComponent.java:762) at javax.faces.component.UIComponent.encodeAll(UIComponent.java:758) at org.apache.myfaces.shared.view.JspViewDeclarationLanguageBase.actuallyRenderView(JspViewDeclarationLanguageBase.java: 362) 在 org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285) 在 org.apache.myfaces.lifecycle .RenderResponseExecutor.execute(RenderResponseExecutor.java:115) at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241) at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199) at org. org.apache.catalina.core 中的 apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)。ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) 在 org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org .apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve .java:99) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina。 org.apache.coyote.http11.AbstractHttp11Processor.process（AbstractHttp11Processor.java：1002) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310) at java.util.concurrent .ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) at java.lang.Thread.run(Thread.java:662) 原因： com.google.inject.ProvisionException：Guice 配置错误：908) 在 java.lang.Thread.run(Thread.java:662) 引起：com.google.inject.ProvisionException：Guice 提供错误：908) 在 java.lang.Thread.run(Thread.java:662) 引起：com.google.inject.ProvisionException：Guice 提供错误：
> 
> 1) 注入构造函数时出错，java.lang.NoClassDefFoundError: Could not initialize class com.alvazan.orm.api.z8spi.meta.DboTableMeta at com.alvazan.orm.impl.meta.data.MetaClassInheritance.(MetaClassInheritance.java:25 ) 同时定位 com.alvazan.orm.impl.meta.data.MetaClassInheritance
> 
> 在 com.alvazan.orm.impl.meta.data.MetaInfo.findOrCreate(MetaInfo.java:58) 在 com.alvazan 的 com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987) 出现 1 个错误。 orm.impl.meta.scan.ScannerForClass.addClass(ScannerForClass.java:59) at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42) ... 63 更多原因：java.lang .NoClassDefFoundError：无法在 com.alvazan.orm.impl.meta.data.MetaAbstractClass.(MetaAbstractClass.java:17) 在 com.alvazan.orm.impl 初始化类 com.alvazan.orm.api.z8spi.meta.DboTableMeta .meta.data.MetaClassInheritance.(MetaClassInheritance.java:25) 在 com.alvazan.orm.impl.meta.data.MetaClassInheritance$$FastClassByGuice$$9298a112.newInstance() 在 com.google.inject.internal.cglib.reflect .$FastConstructor。newInstance(FastConstructor.java:40) 在 com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60) 在 com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85) 在 com. google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254) 在 com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978) 在 com.google.inject.internal.InjectorImpl。 callInContext(InjectorImpl.java:1024) 在 com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974) ... 66 更多inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254) 在 com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978) 在 com.google.inject.internal.InjectorImpl.callInContext( InjectorImpl.java:1024) 在 com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974) ... 66 更多inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254) 在 com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978) 在 com.google.inject.internal.InjectorImpl.callInContext( InjectorImpl.java:1024) 在 com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974) ... 66 更多

* * *

遵循整个堆栈跟踪...

```
*** first stack trace - works fine locally (running outsite web)**

2013-02-13 19:20:18,173 com.alvazan.orm.impl.meta.scan.ScannerForClass processIdFieldWorksWARN: We avoided double scanning a class=class com.alvazan.orm.impl.meta.data.MetaClassSingle Everything will still work fine, but please send us the stack trace so we can see why this is happening
java.lang.RuntimeException: null
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.processIdFieldWorks(ScannerForClass.java:234) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectFieldImpl(ScannerForClass.java:206) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectField(ScannerForClass.java:193) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanFields(ScannerForClass.java:188) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanSingle(ScannerForClass.java:111) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanMultipleClasses(ScannerForClass.java:104) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.addClass(ScannerForClass.java:64) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.impetus.annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.impetus.annovention.Discoverer.discover(Discoverer.java:155) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:82) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:133) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24) [playorm-1.4.3.jar:1.4.3 December 13 2012]
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45) [classes/:na]
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java:51) [classes/:na]
    at com.s1mbi0se.dmp.da.dao.AbstractDao.getEm(AbstractDao.java:10) [classes/:na]
    at com.s1mbi0se.dmp.da.dao.UserDao.findInputPhase(UserDao.java:201) [classes/:na]
    at com.s1mbi0se.dmp.da.bean.InputPhaseStru.manageInputPhase(InputPhaseStru.java:105) [classes/:na]
    at com.s1mbi0se.dashboard.service.DashboardService.readSolrLogFile(DashboardService.java:44) [classes/:na]
    at com.s1mbi0se.dashboard.service.DashboardService.main(DashboardService.java:29) [classes/:na]

*** second stack trace - not works ( web environment)**

19:05:54.090 [http-bio-8080-exec-3] INFO  c.alvazan.orm.logging.NoSqlRawLogger - [rawlogger] starting NoSQL Service Provider and connecting
19:05:54.101 [http-bio-8080-exec-3] INFO  c.a.o.l.s.d.c.ColumnFamilyHelper - On keyspace=dmpExisting column families=[inputphasestru, stringindice, dbocolumnmeta, integerindice, user, dbodatabasemeta, dbotablemeta]
NOTE: WE WILL CREATE new column families automatically as you save entites that have no column family
19:05:54.101 [http-bio-8080-exec-3] INFO  c.a.o.l.b.BaseEntityManagerFactoryImpl - Begin scanning for jars with nosql.Persistence.class
19:05:54.102 [http-bio-8080-exec-3] INFO  c.i.annovention.ClasspathDiscoverer - adding jar file for scanning=jar:file:/opt/apache-tomcat-7.0.30/wtpwebapps/teste28/WEB-INF/lib/playorm-1.4.3.jar!/
19:05:54.102 [http-bio-8080-exec-3] INFO  c.i.annovention.ClasspathDiscoverer - adding jar file for scanning=jar:file:/opt/apache-tomcat-7.0.30/lib/playorm-1.4.3.jar!/
19:05:54.102 [http-bio-8080-exec-3] INFO  c.i.annovention.ClasspathDiscoverer - adding jar file for scanning=jar:file:/opt/apache-tomcat-7.0.30/wtpwebapps/teste28/WEB-INF/lib/dmpDataAccess-0.0.1-SNAPSHOT.jar!/
19:05:54.119 [http-bio-8080-exec-3] DEBUG c.a.o.l.b.MyClassAnnotationDiscoveryListener - class=com.alvazan.orm.api.z8spi.meta.DboColumnMeta anno=com.alvazan.orm.api.base.anno.NoSqlEntity
19:05:54.119 [http-bio-8080-exec-3] INFO  c.a.o.impl.meta.scan.ScannerForClass - scanning class=class com.alvazan.orm.api.z8spi.meta.DboColumnMeta
java.lang.RuntimeException: Failure scanning class(see chained exception)=class com.alvazan.orm.api.z8spi.meta.DboColumnMeta
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:44)
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34)
    at com.impetus.annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197)
    at com.impetus.annovention.Discoverer.discover(Discoverer.java:155)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:82)
    at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:133)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64)
    at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45)
    at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java:51)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45)
    at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.getEntityManager(PlayOrmConfiguration.java:51)
    at com.s1mbi0se.dmp.da.dao.AbstractDao.getEm(AbstractDao.java:10)
    at com.s1mbi0se.dmp.da.dao.UserDao.findInputPhase(UserDao.java:201)
    at com.s1mbi0se.dmp.da.bean.InputPhaseStru.manageInputPhase(InputPhaseStru.java:105)
    at com.s1mbi0se.dashboard.service.DashboardService.readSolrLogFile(DashboardService.java:44)
    at com.s1mbi0se.dashboard.mbean.DashboardMBean.getTestehash(DashboardMBean.java:18)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:169)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:183)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:185)
    at org.apache.jasper.el.JspValueExpression.getValue(JspValueExpression.java:106)
    at javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:246)
    at javax.faces.component.UIOutput.getValue(UIOutput.java:67)
    at javax.faces.component.UIInput.getValue(UIInput.java:150)
    at org.apache.myfaces.shared.renderkit.RendererUtils.getValue(RendererUtils.java:505)
    at org.apache.myfaces.shared.renderkit.RendererUtils.getStringValue(RendererUtils.java:331)
    at org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderInputBegin(HtmlTextRendererBase.java:197)
    at org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.renderInput(HtmlTextRendererBase.java:186)
    at org.apache.myfaces.shared.renderkit.html.HtmlTextRendererBase.encodeEnd(HtmlTextRendererBase.java:75)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:580)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:762)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:758)
    at org.apache.myfaces.shared.view.JspViewDeclarationLanguageBase.actuallyRenderView(JspViewDeclarationLanguageBase.java:362)
    at org.apache.myfaces.shared.view.JspViewDeclarationLanguageBase.renderView(JspViewDeclarationLanguageBase.java:199)
    at org.apache.myfaces.application.ViewHandlerImpl.renderView(ViewHandlerImpl.java:285)
    at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:115)
    at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:241)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:199)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.google.inject.ProvisionException: Guice provision errors:

1) Error injecting constructor, java.lang.NoClassDefFoundError: Could not initialize class com.alvazan.orm.api.z8spi.meta.DboTableMeta
  at com.alvazan.orm.impl.meta.data.MetaClassInheritance.<init>(MetaClassInheritance.java:25)
  while locating com.alvazan.orm.impl.meta.data.MetaClassInheritance

1 error
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:987)
    at com.alvazan.orm.impl.meta.data.MetaInfo.findOrCreate(MetaInfo.java:58)
    at com.alvazan.orm.impl.meta.scan.ScannerForClass.addClass(ScannerForClass.java:59)
    at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42)
    ... 63 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class com.alvazan.orm.api.z8spi.meta.DboTableMeta
    at com.alvazan.orm.impl.meta.data.MetaAbstractClass.<init>(MetaAbstractClass.java:17)
    at com.alvazan.orm.impl.meta.data.MetaClassInheritance.<init>(MetaClassInheritance.java:25)
    at com.alvazan.orm.impl.meta.data.MetaClassInheritance$$FastClassByGuice$$9298a112.newInstance(<generated>)
    at com.google.inject.internal.cglib.reflect.$FastConstructor.newInstance(FastConstructor.java:40)
    at com.google.inject.internal.DefaultConstructionProxyFactory$1.newInstance(DefaultConstructionProxyFactory.java:60)
    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:85)
    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:254)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:978)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1024)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:974)
    ... 66 more 
```

谢谢 ！

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T21:01:46.633

好的，确实有两个不同的问题正在发生

1.  你为什么要进行第二次扫描
2.  NoClassDefFoundError

让我们先解决 NoClassDefFoundError。请不要生气，但我将从基础开始，因为我不知道你的水平，所以你可能已经知道这些东西。

1.  我们看到 NoClassDefError 或基本上是[http://docs.oracle.com/javase/6/docs/api/java/lang/NoClassDefFoundError.html](http://docs.oracle.com/javase/6/docs/api/java/lang/NoClassDefFoundError.html)
2.  我们知道如果缺少 jar 可能会发生这种情况，但是在代码中我们看到它是从另一个应该在同一个 jar 中的类调用的
3.  另一次我们得到这个错误是我们在某个框架新创建的类加载器中
4.  在这条线上 com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:45) 你应该像这样添加一行

    类 temp = DboColumnMeta.class 类 temp2 = MetaAbstractClass.class temp.getSimpleName(); temp2.​​getSimpleName();

如果您的代码看不到该类，那么这当然是您的代码无法访问它的问题。这是否通过？

让我们跳到问题#1，这不是一个关键问题。在最新版本中，我们添加了 if(log.isDebugEnabled()) savePreviousTrace() 以便我们可以同时获取两个跟踪。如果你有时间，你可以从 git 中检查出来，如果你在 windows 上运行“./gradlew build”或“gradle.bat build”。

让我知道数字 2 的状态，因为如果它在代码下方失败，那么“应该”上面的那些行会失败。

谢谢，院长

# javascript - 在 jquery / javascript 中对带有分数的选择进行排序

> ID：14866255
> 
> 赞同：4
> 
> 时间：2013-02-14T01:14:17.283
> 
> 标签：javascript, jquery

我想按计算的小数值对以下选择选项进行排序，不包括 --please select-- 选项。

```
<select class="wpsc_select_variation">
<option value="0">-- Please Select --</option>
<option value="13">1"</option>
<option value="21">2''</option>
<option value="11">3/4"</option>
<option value="6">3/8"</option>
<option value="10">5/8"</option>
<option value="17">1-1/2''</option>
<option value="15">1-1/4''</option>
<option value="19">1-3/4''</option>
<option value="7">1/2"</option>
</select> 
```

到目前为止我整理的代码：为简洁起见，添加到 pastebin 中。

## [关联](http://pastebin.com/8reTt8sR)

这可以解释注释 1 数组的长度为 3。但为什么是 3？为什么不是9？为什么Chrome显示全数组，但长度还是3，而Firefox点击父+后显示全数组，父却说undefined, option, option？

使困惑...

编辑：编辑以允许多个选择框：如果我错了，请纠正我。

```
$(".wpsc_select_variation").each(function(index, element){
        $($(element).children().get().sort(function (a, b) {
        return parseInt(a.value) - parseInt(b.value);
        })).appendTo($(element));
    }); 
```

使用对象的最新编辑。开始：

```
var els = new Array();
var counter = 0;
$j("select.wpsc_select_variation option").each(function(index, ele){
var obj = new Object;
var i = $j(ele).text();
i = i.replace("\"", "");
i = i.replace("''", "");
if (i.indexOf("-") >= 0){
    i = i.split('-');
    split = i[1].split('/');
    i = eval(i[0]) + split[0] / split[1];
}
else if(i.indexOf("/") >= 0){
    split = i.split('/');
    i = split[0] / split[1];
}
i = eval(i);
obj.ind = i;
obj.ele = ele;
els[counter] = obj;
counter++;
});
els.sort(function (a, b) { return parseInt(a.ind) - parseInt(b.ind) });
console.log(els); 
```

上述结果：

```
[Object { ind=NaN,  ele=option}, Object { ind=0.75,  ele=option}, Object { ind=0.375,  ele=option}, Object { ind=0.625,  ele=option}, Object { ind=0.5,  ele=option}, Object { ind=1,  ele=option}, Object { ind=1.5,  ele=option}, Object { ind=1.25,  ele=option}, Object { ind=1.75,  ele=option}, Object { ind=2,  ele=option}] 
```

它似乎在某种程度上对它们进行了排序，但正如您所看到的，它们仍然是乱序的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:51:24.157

由于选项*值*已经按照您需要的顺序排列，您可以对它们进行排序：

```
$($(".select_variation option").get().sort(function (a, b) {
    return parseInt(a.value) - parseInt(b.value);
})).appendTo(".select_variation"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:40:26.513

下面的 jsfiddle 解决了这个问题。感谢 ExplosionPills 的一般帮助和 Kolink 帮助我发现更多关于数组的信息。感谢这里的 vol7ron：
[Turning a array of jquery objects into html](https://stackoverflow.com/questions/14900115/turning-an-array-of-jquery-objects-into-html)以获取他对函数的帮助。多谢你们！

```
function sortByRationalValue (a,b){
        return a.rationalValue - b.rationalValue;
    }
function returnObjectFromMeasurements(element, text) {
    var obj = {},
        range = text.replace(/["'”″]/g, '').split('-'),
        rational;

    if (range.length > 1)
        rational = eval(range[0]) + eval(range[1]);
    else
        rational = eval(range[0]);

    obj.rationalValue = rational;
    obj.element       = element;
    return obj;
}
jQuery(document).ready(function( $ ) {
    $(".wpsc_select_variation").each(function (index, element) {
        var els = new Array();
        var counter = 0;
        var children = $(element).children();
        $(children).each(function (index, ele) {
            els[index] = returnObjectFromMeasurements(ele, $(ele).text());
        });
        els.sort(sortByRationalValue);
        var elements = new Array();
        $.each(els, function (index, value) {
            elements[index] = value.element;
        });
        $(this).html(elements);
    });
}); 
```

[http://jsfiddle.net/vwWJ3/5/](http://jsfiddle.net/vwWJ3/5/)

# sql-server - 选择列值在预定义范围内出现的频率

> ID：14866256
> 
> 赞同：0
> 
> 时间：2013-02-14T01:14:20.313
> 
> 标签：sql-server, tsql

我想在自定义范围内选择 [price] 字段值的出现次数：

我的价格范围是：

```
< 10  
10-20  
20-50  
> 50 
```

因此，如果价格为 3、4、11 和 20，则结果将是：

```
< 10 (2)  
10-20 (1)  
21-50 (1)  
> 50 (0) 
```

这是表定义：

```
CREATE TABLE [dbo].[products](
[id] [int] IDENTITY(1,1) NOT NULL,
[price] [decimal](8, 0) NULL,
[createdate] [datetime] NOT NULL,
CONSTRAINT [PK_products] PRIMARY KEY CLUSTERED 
(
[id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[products] ADD  CONSTRAINT [DF_products_createdate]  DEFAULT (getdate()) FOR [createdate]
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:26:29.690

```
With 
Categorized as
(
 Select 
 CASE When Price < 10 Then '<10'
      When Price >= 10 and Price < 20 Then '[10-20)'
      Else '>20'
 END as Category
 From SomeTable
)
Select Category, Count(*) From Categorized
Group By Category 
```

*像*这样的东西。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:32:02.483

你可以这样做。

```
;WITH Ranges_CTE ([sequence], [range], [lower_limit], [upper_limit]) AS
  (
   SELECT 1,'<10', 0, 9
    UNION
    SELECT 2,'10-20', 10, 19
    UNION
    SELECT 3, '20-50', 20, 50
    UNION
    SELECT 4, '>50', 51, 1000
   )

SELECT r.range, count(p.id) AS ROW_COUNT
FROM ranges_cte r
LEFT OUTER JOIN products p ON p.price BETWEEN r.lower_limit AND r.upper_limit
GROUP BY r.range, r.sequence
ORDER BY r.sequence 
```

请注意，您的范围不明确。你`20-50`在一个地方和`21-50`其他地方展示。数据似乎表明这`20-50`是正确的。但是，那么价格 20 将适合`10-20`和`20-50`。我假设`10-20`上限为 19。

# vim - 在vim中环绕

> ID：14866257
> 
> 赞同：0
> 
> 时间：2013-02-14T01:14:29.903
> 
> 标签：vim, macvim

有没有一种简单的方法来包围文字，我知道这个[插件](https://github.com/tpope/vim-surround)

但是钥匙太多了。

我尝试了我的方法

```
vmap ' <D-x>i'<esc><D-v>i'
vmap " <D-x>i"<esc><D-v>i" 
```

但这不起作用。无论如何，如果这种方式是固定的，我怎么能将此行为提取到一个允许我这样做的函数中：

1.  我选择任何文本（我认为这将是视觉模式）
2.  我为“对称”环绕（例如 '、“、`、|、/、、***、-）或“不对称”环绕（例如 <>、{}、[]、 ())
3.  选定的文本被符号包围。
4.  如果选定的单词已经被包围并切换符号，可能会很好检测。

关于如何做到这一点的任何推荐阅读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T08:04:06.547

`s'`并且`s"`是“太多的钥匙”？真的吗？

环绕是要走*的路。*

映射（以及使用 Cmd 键的映射）不会走得太远。如果你想要一个切换引号的“智能”命令，你就不能真正跳过 vimscript，从那里开始，最好只使用最好的 Vim 插件之一的 Surround。

无论如何，这可能是一个（快速且未经彻底测试）的基础：

```
function! SurroundWithDoubleQuotes()
  let old_n = @n
  normal! gv
  normal! "nd
  let @n = "\"" . @n . "\""
  normal! "nP
  let @n = old_n
endfunction 
```

`@n`您需要找到一种方法来输入所需的字符并测试该字符是否存在于寄存器的两端。

`:h functions`如果您想这样做，肯定会帮助您。

这是我将如何处理映射：

```
vnoremap " <Esc>`>a"<Esc>`<i"<Esc>

`> marks the end of the visual selection
`< marks its beginning 
```

但要小心你的映射。在视觉模式下，`(){}[]`具有您*不想*超载的含义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T08:07:29.207

如果您喜欢环绕插件，但更喜欢较短的映射，您可以自己制作：

```
:vmap ' S'
:vmap " S" 
```

（在这里，您必须使用`:vmap`over Preferred `:vnoremap`，因为您希望应用插件的映射。或者，您可以直接映射到插件的`<Plug>`映射`:vmap ' <Plug>VSurround'`：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:01:54.190

这就是我要做的：

```
:vmap ' s''<esc>P 
```

# google-visualization - 如何结合气泡图和折线图？

> ID：14866261
> 
> 赞同：0
> 
> 时间：2013-02-14T01:14:59.243
> 
> 标签：google-visualization, linechart, bubble-chart

我正在尝试制作一个气泡图并画一条线将气泡分成两个区域，一个位于该线下方，一个位于该线上方。那么我可以结合谷歌的可视化气泡和折线图吗？如果没有，还有其他替代谷歌可视化的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T01:43:17.140

图表类型目前`combochart`不支持气泡图。这意味着您将无法以这种方式组合它们。

如[帮助文档](https://developers.google.com/chart/interactive/docs/gallery/combochart#Configuration_Options)所述，组合图表支持以下图表类型`seriesType`：

> series 属性中未指定的任何系列的默认线型。可用值是“line”、“area”、“bars”、“candlesticks”和“steppedArea”。

由于也不支持散点 (XY) 图表，因此您不能做一些时髦的事情，比如制作一堆系列并手动更改气泡的大小。所以你需要尝试一些更棘手的事情。

**选项 1：时髦的 CSS**

注意：这绝对不会在许多版本的 IE 上工作。

第 1 步：创建 2 个相同大小的重叠`<div>`元素。

第 2 步：使用相同的 chartArea 选项格式化两个单独的 Google Visualization 图表。

第 3 步：创建一个函数来确定两个图表的最大值/最小值，以确保它们处于相同的比例。

样本：

```
// Take the Max/Min of all data values in all graphs
var totalMax = 345;
var totalMin = -123;

// Figure out the largest number (positive or negative)
var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));

// Round to an exponent of 10 appropriate for the biggest number
var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
var roundingDec = Math.pow(10,roundingExp);

// Round your max and min to the nearest exponent of 10
var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
var newMin = Math.floor(totalMin/roundingDec)*roundingDec;

// Determine the range of your values
var range = newMax - newMin;

// Define the number of gridlines (default 5)
var gridlines = 5;

// Determine an appropriate gap between gridlines
var interval = range / (gridlines - 1);

// Round that interval up to the exponent of 10
var newInterval = Math.ceil(interval/roundingDec)*roundingDec;

// Re-round your max and min to the new interval
var finalMax = Math.ceil(totalMax/newInterval)*newInterval;
var finalMin = Math.floor(totalMin/newInterval)*newInterval; 
```

第4步：使用顶部`backgroundColor: "transparent"`的元素将背景颜色设置为透明。`<div>`（这是让IE哭的步骤）

`<div>`第 5 步：在两个重叠的元素中使用相同的比例轴绘制两个图表。

第6步：看看它看起来是否正确。由于元素重叠，交互性可能会因浏览器的不同而有点痛苦。`<div>`当可选图表元素之一未悬停时，您可能需要为顶部图表编写自己的精美代码，以将其 Z-index移到后面。

**选项 2：散点图乐趣**

这也适用于 IE，并且不那么棘手，但在数据方面设置起来会困难得多。

第 1 步：创建折线图系列和气泡图点`DataTable`。您的设置方式将根据您的数据以及您希望气泡/线条如何排列而发生巨大变化。

样本：

我想要这些气泡：

```
X    Y    Size
1    2    3
2    3    4
3    4    5
4    5    1
5    1    2 
```

但我想要这条线：

```
X    Y
1.2  5
2.3  4
3.4  3
4.5  2
5.6  1 
```

然后我需要在第一列中包含所有这些不同的 X 值，并为各种系列有很多空值，如下所示：

```
X    Line Bubble Size
1    null 2    3
2    null 3    4
3    null 4    5
4    null 5    1
5    null 1    2
1.2  5    null null
2.3  4    null null
3.4  3    null null
4.5  2    null null
5.6  1    null null 
```

第 2 步：将视图设置为第 1/2 列，以便仅绘制两个系列的 XY 值（第 3 列是气泡大小，您不想将其显示为额外的系列）。

第 3 步：设置每个系列的选项。系列 1（折线图）将具有`lineWidth: 1`或您想要的任何东西，而系列 2 将具有`lineWidth: 0`（因此每个项目都是一个点）。

`pointSize`第 4 步：为气泡系列设置气泡大小。不幸的是，整个系列将具有相同的`pointSize`. 所以在上面的例子中，我们需要重新格式化我们的格式`DataTable`，让每个不同的气泡在不同的系列中（更多的列），或者编写一个函数来为每个不同的气泡大小创建一个新的系列。然后我们可以使用气泡大小系列`pointSize`为每个不同的系列设置。

两种解决方案都应该有效，具体取决于您的应用程序和数据的复杂性，您应该选择最有效的解决方案。让我们知道你最终会做什么，因为我相信将来会有人使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T11:31:20.477

编辑：完全混乱的论坛，回答了 Excel 的问题。

# solr - solr 主查询 vs fq

> ID：14866263
> 
> 赞同：14
> 
> 时间：2013-02-14T01:15:01.743
> 
> 标签：solr

我阅读了同一问题的所有答案，但对于我的用例应该使用哪一个以及为什么使用这一点并不清楚。两者都返回相同的结果。我知道“FilterQuery 将被缓存，从而使整体查询时间更快”，就像有人正确回答一样。

我也明白“过滤还允许标记方面，因此您可以标记方面以包括为您的查询返回的所有方面”，就像其他人也正确回答一样。

我不明白阅读这篇文章的原因是为什么有人会使用 Q，因为根据我看过的所有答案和书籍，FQ 似乎要好得多。

除了，我敢肯定两者都存在可能是有原因的。

我想要找出最适合我的用例的方法——文档中非常缺乏有用的示例。

*   我的文档有：日期、客户、报告和其他一些字段
*   1 个营业日期 = 350 万份文件。
*   文档总数为 2.5 亿并且还在增加（60 个日期 * 8000 个客户 * 1000 个报告）
*   我对日期、客户、报告进行分面，并且我确实使用分面标记。
*   UI 整体看起来像任何电子商务网站，例如：亚马逊，左侧有多个方面。
*   不使用评分。

业务规则 #1：日期必须始终出现在每个查询中。

业务规则 #2：99% 的查询将使用最新日期，但随机客户端和随机报告。

事实：我们确定是分面速度较慢，而不是搜索。

问题：

给定这个搜索条件，以及编写查询的这些方法：

 *A) q=date:20130214 AND client:Joe & facet.field=date & facet.field=client...

B) q=date:20130214 & fq=client:Joe & facet.field=date & facet.field=client...

C) q=client:Joe & fq= date:20130214 & facet.field=date & facet.field=client...

*D) q=*:* & fq=date:20130214 & fq=client:Joe & facet.field=date & facet.field=client...*

*   您认为以上哪一项是最好的，为什么？请记住，大多数查询将针对 20130214 运行
*   在 FQ 过滤中首先完成，然后应用 Q 条件，还是相反？

今天，我在所有情况下都使用了 D)，但我怀疑这是错误的，并导致 Solr（版本 3.6）中的 OOM。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T02:13:12.237

`q`query 是 Request 的主要查询。
它可以让您实际搜索多个字段。
`q`查询将决定每个文档的分数，因此将参与相关性计算。

`q=*:*`只会返回具有相同分数的所有文档。

`fq`是用于过滤文档的过滤查询，与搜索无关。
因此，如果您有任何要过滤的固定值，您应该使用过滤器来限制您的结果。
`fq`不影响结果的评分。
在过滤时，Solr 使用过滤器缓存来增强后续过滤器查询的性能。

因此，理想情况下，您应该检查需求的要求。如果要搜索，则应始终使用`q`，如果要过滤/限制结果，则应使用`fq`.

构面只是结果的附加组件，不会影响您的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T02:08:22.127

要回答您的问题：

*   根据您的业务规则，我建议您将日期放在 fq 值中，因为您总是按日期值限制（过滤）结果，并且听起来日期值可以被 Solr 重用。并且 Q 可以包含对随机客户端的搜索并根据需要报告值。

*   当用户第一次来到 UI 时，由于您只显示方面，我建议您使用`q=<id field>:*`where `<id field>`is your document id in index 并设置 `rows=0`. 再次使用 fq 值中的日期限制。指定`rows=0`将生成仅方面的查询，参考[Solr - 获取方面计数而不返回结果](https://stackoverflow.com/questions/212446/solr-getting-facet-counts-without-returning-search-results)*

# php - 试图返回数据库查询的计数。但是，虽然数组有正确的数据，但返回值为空白

> ID：14866270
> 
> 赞同：2
> 
> 时间：2013-02-14T01:15:41.793
> 
> 标签：php, wordpress

```
function get_entry_count($pagename) {
    global $wpdb;
    $count = $wpdb->get_results("SELECT COUNT( * ) FROM wp_fpc_rg_lead_detail WHERE form_id =12 AND field_number =5 AND value =  '$pagename'" );
    return $count[0]->count;
    }

    $numofpeople = get_entry_count($post->post_title);
    echo "$numofpeople people filled out the form"; 
```

我正在尝试运行上面的查询并输出匹配的记录数。如果我添加：

```
print_r($count); 
```

在返回命令之上，我得到了这个：

```
Array ( [0] => stdClass Object ( [COUNT( * )] => 7 ) ) 
```

有**7**条记录；并且返回值应该是 7。

但是，返回的值（ $count[0]->count; ）似乎为空。我敢肯定这是愚蠢的，但我就是无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:21:52.497

尝试`COUNT(*)`在查询中给您的别名。然后您应该能够将别名引用为对象的属性。在下面的示例中，我使用过`lead_detail_count`，但可以随意将其更改为您想要的任何内容。

```
function get_entry_count($pagename) {
    global $wpdb;
    $count = $wpdb->get_results("SELECT COUNT( * ) as lead_detail_count FROM wp_fpc_rg_lead_detail WHERE form_id =12 AND field_number =5 AND value =  '$pagename'" );
    return $count[0]->lead_detail_count;
} 
```

`get_results`还可以采用第二个参数来更改返回值，可能值得一看。法典的链接如下。 [http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)

# iphone - Twitter iOS App v5.3 UINavigationController 返回按钮

> ID：14866272
> 
> 赞同：1
> 
> 时间：2013-02-14T01:15:59.097
> 
> 标签：iphone, ios, objective-c, twitter, sdk

在最近发布的 Twitter 应用程序更新中，文本从后退按钮中删除并替换为箭头。它看起来非常漂亮和简单，但我无法弄清楚他们是如何做到的。

![新的 Twitter 后退按钮](../Images/20a89dbb18d9b57f19e0ae8b23a3ba6f.png)

我尝试过使用 iOS 5 UI 自定义，但没有什么效果很好。如果我设置 leftBarButtonItem，我可以让它工作，但这意味着我必须在每个视图控制器中执行它并编写我自己的操作来弹出视图控制器。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:21:33.213

它是一个自定义导航栏和按钮项。添加此代码：

```
 UINavigationBar * bar =[[UINavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
[self.view addSubview:bar];

//Back Button
UIButton *btnback = [UIButton buttonWithType:UIButtonTypeCustom];
[btnback setFrame:CGRectMake(0, 7, 54, 29)];
[btnback setBackgroundImage:[UIImage imageNamed:@"back.png"] forState:UIControlStateNormal];
//UILabel * btnlabel =  [[UILabel alloc]initWithFrame:CGRectMake(15, 0, 40, 23)];
//btnlabel.backgroundColor = [UIColor clearColor];
//btnlabel.textColor = [UIColor whiteColor];
//btnlabel.font = [UIFont boldSystemFontOfSize:13];
//btnlabel.text = @"back";
//[btnback addSubview:btnlabel];
//[btnlabel release];
//btnlabel = nil;
[btnback addTarget:self action:@selector(BackAction:) forControlEvents:UIControlEventTouchUpInside];
[bar addSubview:btnback];
[bar release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:50:52.373

无需设置 backButton 或将其添加为 navigationController 的子视图。您只需要在 mainViewController 中设置返回按钮属性。像

```
UIBarButtonItem *backButton = [[[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"Back", nil) style:UIBarButtonItemStyleBordered target:nil action:nil] autorelease];

buttonBack32 = [[UIImage imageNamed:@"back_button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 4)];

buttonBack24 = [[UIImage imageNamed:@"back_button.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 12, 0, 4)];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack32 forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];

[[UIBarButtonItem appearance] setBackButtonBackgroundImage:buttonBack24 forState:UIControlStateNormal barMetrics:UIBarMetricsLandscapePhone];
self.navigationItem.backButton = backButton; 
```

或者你可以按照本教程[http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# c# - 方法中的类耦合警告

> ID：14866275
> 
> 赞同：3
> 
> 时间：2013-02-14T01:16:18.923
> 
> 标签：c#, code-analysis

我收到以下代码分析警告消息，但我不知道如何解决该问题。请指教。

> CA1506 避免过度的类耦合
> “RetailerController.RetailerFormSummary(string)”与来自 13 个不同命名空间的 33 种不同类型耦合。重写或重构方法以减少其类耦合，或考虑将方法移至与其紧密耦合的其他类型之一。40 以上的类耦合表示可维护性差，40 到 30 之间的类耦合表示可维护性中等，低于 30 的类耦合表示可维护性好。OnePlaceWebApp.Web RetailerController.cs 564

方法 RetailerFormSummary(string) 看起来像：

```
 public ViewResult RetailerFormSummary(string retailerId)
 {
            AlertService alertService = new AlertService();
            PageInfo winnersPageInfo = new PageInfo();
            RetailerFormModelSummary model = new RetailerFormModelSummary();

            winnersPageInfo.ItemsPerPage = _configurationUtility.SummaryWinnersCount;
            winnersPageInfo.PageIndex = 0;

            model.CurrencyFormat = _configurationUtility.CurrencyFormat;
            model.DateFormat = _configurationUtility.DateFormat;
            model.DatePickerFormat = _configurationUtility.DatePickerFormat;
            model.Reps = _userService.GetReps(_userService.GetCurrentWebAppUserId());
            model.UsesDistricts = _configurationService.GetUsesDistricts();
            RetailerDto retailer = _retailerService.SelectRetailer(retailerId);

            if (retailer != null)
            {
                RetailerJurisdictionDto retailerJurisdiction = _retailerSummaryService.SelectRetailerJurisdiction(retailer.Id);
                JurisdictionDto territory = null;
                JurisdictionDto district = null;
                JurisdictionDto region = null;
                DateTime? lastVisit = _retailerSummaryService.SelectLastVisitUtcDate(retailer.Id);

                if (retailerJurisdiction != null)
                {
                    territory = _jurisdictionService.SelectJurisdictionUsingIdAndType(retailerJurisdiction.JurisdictionId, JurisdictionTypes.Territory);
                    district = _jurisdictionService.SelectJurisdictionUsingIdAndType(retailerJurisdiction.JurisdictionId, JurisdictionTypes.District);
                    region = _jurisdictionService.SelectJurisdictionUsingIdAndType(retailerJurisdiction.JurisdictionId, JurisdictionTypes.Region);
                }
                model.Address1 = retailer.Street1;
                if (retailer.Street2 != null)
                {
                    model.Address2 = retailer.Street2;
                }
                if (retailer.CorporateAccount != null)
                {
                    model.CorporateAccount = FormatService.GetTwoPartName(retailer.CorporateAccount.Number, retailer.CorporateAccount.Name, " - ");
                }
                model.CorporateAccountName = _termsService.SelectSingularTermValue(TermTypes.CorporateAccount);
                model.City = retailer.City;
                if (district != null)
                {
                    model.District = FormatService.GetTwoPartName(district.Number, district.Name, " - ");
                }
                if (lastVisit.HasValue)
                {
                    model.LastVisit = lastVisit.Value.DayOfWeek.ToString() + " " + lastVisit.Value.ToLocalTime().ToString(model.DateFormat, CultureInfo.CurrentCulture);
                }
                model.Note = _retailerSummaryService.SelectRetailerComment(retailer.Id);
                model.Phone = FormatService.FormatPhoneNumber(retailer.Phone);
                if (region != null)
                {
                    model.Region = FormatService.GetTwoPartName(region.Number, region.Name, " - ");
                }
                model.RegionTerm = _termsService.SelectSingularTermValue(TermTypes.Region);
                model.RetailerId = retailer.Id.ToString(CultureInfo.CurrentCulture);
                model.RetailerName = retailer.BusinessName;
                ViewBag.Title = retailer.BusinessName;
                model.RetailerNumber = retailer.DisplayNumber;
                model.RetailerAlerts = alertService.GetRetailerAlertsStringArray(retailer.RetailerAlerts);
                model.Route = _routeManagerService.GetRouteStringForRetailer(retailerId);
                model.Tasks = _retailerSummaryService.SelectRetailerTasks(retailer.Id);
                if (territory != null)
                {
                    model.Territory = FormatService.GetTwoPartName(territory.Number, territory.Name, " - ");
                }
                model.TerritoryTerm = _termsService.SelectSingularTermValue(TermTypes.Territory);
                model.WeeklySales = _retailerSummaryService.SelectWeeklySales(retailerId);
                model.Winners = _retailerWinnersService.SelectWinners(retailerId, WinnersSortTypes.Date, winnersPageInfo);
                model.ZipCode = retailer.ZipCode;
            }

            return View("RetailerFormSummary/RetailerFormSummary", model);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:24:32.947

此警告告诉您，在您的方法中实例化依赖的具体对象可能会导致可维护性问题。

这里有些例子：

```
AlertService alertService = new AlertService();
PageInfo winnersPageInfo = new PageInfo();
RetailerFormModelSummary model = new RetailerFormModelSummary();
RetailerJurisdictionDto retailerJurisdiction = _retailerSummaryService.SelectRetailerJurisdiction(retailer.Id);
JurisdictionDto territory = null;
JurisdictionDto district = null;
JurisdictionDto region = null; 
```

这种方法职责**太多，依赖太多**。您绝对应该查看[依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle)，也许还有[控制反转框架](http://blog.ashmind.com/index.php/2008/09/08/comparing-net-di-ioc-frameworks-part-2/)来帮助您进行依赖注入。这将有助于减少类/方法中的耦合。

口头禅是“依赖于抽象”。

同样，[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)也适用于此。

# android - Android ListView 改变 ArrayAdapters

> ID：14866276
> 
> 赞同：0
> 
> 时间：2013-02-14T01:16:26.753
> 
> 标签：android

我有一个`PullToRefreshListView`我正在`ArrayAdapter`根据用户选择的选项切换 s 的选项。我能够让数据显示，但由于某种原因，无法强制重绘`PullToRefreshListView`. 因此，当列表缩短时，您仍然可以看到其中`PullToRefreshListView`有更多数据时的白色，因此更长。

我的代码如下：

```
if (adapter == null) {
    adapter = new CustomAdapter(this.getActivity(), array);

} else {
    adapter.clear();
    adapter.addAll(array);
}

list.setAdapter(adapter); 
```

我还能做些什么来刷新列表吗？我尝试搜索有关 SO 的其他几个问题，包括：

[Android - 我无法刷新/重绘 ListView](https://stackoverflow.com/questions/4308061/android-i-cant-refresh-redraw-a-listview)

但是，它对我的​​解决方案没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:55:00.590

我认为您需要发布更多代码。如果列表在缩短，并且你看到它原来的位置是白色的，这不是 ListView 刷新的问题，而是 ListView 的容器刷新的问题。容器是否设置了背景？

# javascript - 使用 TypeScript 创建 JSON 对象

> ID：14866279
> 
> 赞同：2
> 
> 时间：2013-02-14T01:16:49.360
> 
> 标签：javascript, typescript

我目前在我的代码中有一个 Highcharts，我使用 JavaScript 通过创建 JSON 对象来处理数据，代码片段看起来像

```
var yearChartOptions = {
    chart: {
        renderTo: 'YearChartContainer',
        type: 'column',
        margin: [ 50, 50, 50, 50]
    },
    title: {
        text: ''
    },
    xAxis: {
        categories: [],
        labels: {
            rotation: -90,
            align: 'right'
        }
    },
    yAxis: {
        title: {
            text: ''
        },
        plotLines: [{
            color: '#FF0000',
            width: 2,
            label: {
                style: {
                    color: 'blue',
                    fontWeight: 'bold',
                    zIndex: -1
                },
                formatter: function () {
                    return '$' + Highcharts.numberFormat(this.value/1000, 0) +'k ';
                }
            },
            zIndex: 10
        }]
    },
};

// Create the chart
var yearChart = new Highcharts.Chart(yearChartOptions); 
```

如何在 TypeScript 中编写以获得相同的 JavaScript 结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:27:59.600

为您的文件添加`/// <reference path="highcharts.d.ts" />`标签。您可以从[DefinedTyped](https://github.com/borisyankov/DefinitelyTyped/blob/master/highcharts/highcharts.d.ts)获取文件。一切都应该从那里开始。

# c# - 在 Silverlight 中调用 show() 后 ChildWindow 的 MaxHeight 变为 Infinity

> ID：14866288
> 
> 赞同：0
> 
> 时间：2013-02-14T01:17:44.930
> 
> 标签：c#, silverlight, xaml

我的 xml 代码如下。

```
<ChildWindow x:Class="Donas.Client.Common.MessageWindow"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
       Width="450" Height="180" MaxHeight="600" FontFamily="Malgun Gothic" FontSize="12"
       Title="Title"> 
```

`Show()`虽然我将最大高度设置为 600px，但在调用方法后最大高度更改为 Infinity 。我从调试中注意到了这一点。我想知道为什么最大高度变为无穷大以及如何防止这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:21:25.767

尝试在调用 Show() 方法的下方或上方的代码中设置最大高度。也许您的 xaml 代码在设置时出现了某种错误..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T12:20:36.817

您的 UI 中是否有某种面板正在增加高度？如果是这样，请尝试在该元素中设置最大高度。它往往会出人意料地成长。

# excel - Excel 排名平局问题

> ID：14866295
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:03.587
> 
> 标签：excel, ranking, tie

有谁知道如何处理 Excel 中的平局记录问题？我只想在第一次出现时显示一次记录。如果两次找到相同的数字，它将不会像我上面显示的那样显示。

![](../Images/6fb93fd1bd79307966617ebaa7d12d80.png) ![](../Images/0b98a0d2c574d67b76cf0f45accc4942.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:49:42.593

我将生成您在链接图像中显示的结果的方式是有两列用于排名，1 列用于原始排名结果，1 列用于显示排名。

假设您的数据从单元格 A2 开始，原始排名结果从单元格 B2 开始，您可以在单元格 C2 中插入以下公式：

```
 =IF(ISERROR(MATCH(B2,B$1:B1,0)),B2,"") 
```

然后，您将公式复制到数据的底行。

这是这个公式的工作原理。*MATCH 函数在该行上方*的 B 列行中查找 B 列当前行中显示的排名。如果没有匹配，MATCH 函数会返回错误，在这种情况下意味着当前 B 单元格尚未出现。这是您要显示的排名。

如果 MATCH 没有错误，则上面的行中的排名相同 - 在这种情况下，公式返回一个空字符串。

最后，您将隐藏 B 列，只显示 A 列和 C 列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:48:22.377

要获得显示的结果，您可以在 AA2 中使用此“数组公式”

`=IF(OR(Z2=0,COUNTIF(Z$2:Z2,Z2)>1),"",SUM(IF(FREQUENCY(IF(Z$2:Z$19>Z2,Z$2:Z$19),Z$2:Z$19),1))+1)`

使用 CTRL+SHIFT+ENTER 确认并向下复制公式

见[样本文件](https://www.dropbox.com/s/uvpoeilr9aqalt6/Ranks.xls)

# python - 执行 db.session.commit() 时出现“表 flask_db.user 不存在”错误

> ID：14866296
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:04.370
> 
> 标签：python, flask, flask-sqlalchemy

我正在使用*Flask Python*微框架构建我的第一个应用程序，但在将模型提交到数据库时遇到了问题。当我在命令行上测试我的用户模型时，一切正常。但是当我执行 a 时`db.session.commit()`，出现**错误 1146：“表不存在。”**

我在本地模式下使用 MySQL 数据库，登录名/密码没有错误 也许我在配置或其他方面做错了。所以这是我的配置应用程序配置文件

```
from flask import Flask
from flask.ext.sqlalchemy import SQLAlchemy
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://root:admin@localhost/flask_db'
db = SQLAlchemy(app)

from app import views 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:12:17.323

该错误说明了一切——虽然您可能拥有数据模型，但您尚未在数据库中创建表来存储和查询它们。只需导入您的模型，然后运行`db.create_all()`以生成表格，您应该一切顺利。

值得您阅读[Flask-SQLAlchemy 的快速入门指南，](http://pythonhosted.org/Flask-SQLAlchemy/quickstart.html)以了解一般流程。

# expressionengine - safecracker 矩阵菜单未出现在叠加层中

> ID：14866297
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:08.667
> 
> 标签：expressionengine

我有一个网站，对公众不可见，我在多个位置使用安全破解器和矩阵字段。在正常加载的页面上，一切都很好。但是当矩阵字段出现在叠加层中（使用颜色框）时，不会创建矩阵菜单 div。

使用 FireBug 单步执行代码，问题似乎在于：

```
var $body = $(document.body); 
```

没有正确设置 $body （也许这是覆盖加载的竞争条件？）。因此，当它到达 matrix.js 中的这段代码时：

```
obj.menu.$ul = $('<ul id="matrix-menu" />').appendTo($body).css({
    opacity: 0,
    display: 'none'
}); 
```

$body 无法解析，因此菜单无法附加到任何地方。我想我已经修复了它，但想检查一下我是否应该担心我会破坏其他任何东西。如果我将上面的代码更改为：

```
obj.menu.$ul = $('<ul id="matrix-menu" />').appendTo($(document.body)).css({
    opacity: 0,
    display: 'none'
}); 
```

一切似乎都很好。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T16:55:28.397

如果 Matrix 字段在第一次初始化时没有高度，它会将其大部分初始化内容搁置，假设它默认隐藏或位于辅助发布选项卡上。这减少了初始页面加载时间，还解决了一些需要知道其单元格内 DOM 元素尺寸的单元格类型（文本、资产，可能还有其他）的问题。

Matrix 将在展开或单击其选项卡时自动恢复其初始化，但如果您在“发布”页面之外使用 Matrix*并将*其隐藏，则需要自己触发该初始化恢复：

```
for (var i = 0; i < Matrix.instances; i++)
{
    Matrix.instances[i].initRowsIfVisible();
} 
```

# django - 从没有 for 循环的查询集中提取对象值

> ID：14866298
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:09.687
> 
> 标签：django

我有一个模型叫

```
class UserTag(models.Model):
  name = models.CharField(max_length=64, unique= True)
  users = models.ManyToManyField(User) 
```

我正在尝试根据这样的用户过滤其内容

```
usertags = UserTag.objects.filter(users=request.user) 
```

现在我想要这个特定查询的所有标签名称的列表。我知道我可能可以使用循环

```
for tag in usertags:
  tags.append(tag.name) 
```

但是如果一个用户有 1000 个标签呢？这不会减慢响应速度吗？有没有更有效的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T01:36:58.183

如果您只想要标签名称，请使用`values_list`查询：

```
tags = UserTag.objects.filter(users=request.user).values_list('name', flat=True) 
```

# c# - 如何绑定到动态类型的属性？

> ID：14866299
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:12.963
> 
> 标签：c#, wpf, xaml, data-binding

```
public interface IClassA
{
    string Description { get; set; }
    // more IClassA specific definitions
}

public interface IClassB
{
    string Description { get; set; }
    // more IClassB specific definitions
}

public class ClassA : IClassA
{
    public string Description { get; set; }
}

public class ClassB : IClassB
{
    public string Description { get; set; }
} 
```

这是非常简化的代码。为简单起见，所有类都缺少`INotifyPropertyChanged`实现。只需观看所有代码，就好像它已正确实现一样。

*还*不能考虑将`Description`其放入基础接口中`IClassA`，因此我对通过 WPF 中的数据绑定绑定的属性感到好奇。这就是我尝试过的：`IClassB`*`dynamic`*

 *```
public class CustomClass
{
    public dynamic Instance { get; set; }

    // passed instance is a ClassA or ClassB object
    public CustomClass(dynamic instance)
    {
        Instance = instance;
    }
} 
```

我的 Xaml 包含一个`TextBlock`，它的 DataContext 设置为一个`CutomClass`对象。如果我将`Instance`属性的类型更改为例如 IClassA 并正确填充它，一切都会按预期工作。`dynamic`虽然不是。

```
<TextBlock Text="{Binding Instance.Description}" /> 
```

VS2012 中的 Xaml Designer/ReSharper 告诉我：*Cannot resolve property 'Description' in data context of type 'object'*。

虽然`CodeInstance`被描述为`dynamic`. 但是编译的代码，所以我认为这可能是一个设计时问题。但`TextBlock`仍然是空的。

我可能误解了这种情况下的原理`dynamic`，我不知道。因此，使用 Google 搜索结果不足可能是由于不完全了解要搜索的内容造成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:33:23.933

您可以像绑定任何属性一样绑定到动态属性。所以你的问题必须在其他地方表现出来，或者`ReSharper`给出另一个无益的错误，（讨厌那个程序）

**动态绑定示例：**

xml:

```
<Window x:Class="WpfApplication7.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="104" Width="223" Name="UI">
    <StackPanel DataContext="{Binding ElementName=UI}">
        <TextBlock Text="{Binding MyProperty}" />
        <TextBlock Text="{Binding MyObject.MyProperty}" />
    </StackPanel>
</Window> 
```

代码：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    public MainWindow()
    {
        InitializeComponent();
        MyProperty = "Hello";
        MyObject = new ObjectTest { MyProperty = "Hello" };
    }

    private dynamic myVar;
    public dynamic MyProperty
    {
        get { return myVar; }
        set { myVar = value; NotifyPropertyChanged("MyProperty"); }
    }

    private dynamic myObject;
    public dynamic MyObject
    {
        get { return myObject; }
        set { myObject = value; NotifyPropertyChanged("MyObject"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string p)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(p));
        }
    }
}

public class ObjectTest
{
    public string MyProperty { get; set; }
} 
```

结果：

![在此处输入图像描述](../Images/c52ba6622b22c2a93d847b31177b035e.png)*

# c# - 如何以编程方式将事件处理程序添加到 .NET 按钮？

> ID：14866302
> 
> 赞同：3
> 
> 时间：2013-02-14T01:18:54.213
> 
> 标签：c#, asp.net, .net, event-handling

我正在尝试使用我在开发 Web 应用程序时可以召集的最强大的 OOP，但是当我使用代码创建对象时，我遇到了向我的对象添加事件处理程序的问题。我确信这是一个相当简单的解决方案，我只是不断地放弃，但我不知道接下来要尝试什么。下面是我一直在玩的一些测试代码，只是想按下按钮去做一些事情。

（想象一下“int i;”行上有一个断点）

```
 Button b = new Button();
    b.Text = "Do Something";
    b.Attributes.Add("runat", "server");
    b.Attributes.Add("OnClick", "click");
    form1.Controls.Add(b);

    private void click(object sender, EventArgs e)
    {
        int i;
    } 
```

由于这是我的 Page_Load 创建的一个新按钮，我不能只对 XHTML 进行硬编码。调试永远不会达到我的断点。我也没有在 CheckBoxes 上取得任何成功。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T01:22:41.680

您必须订阅该`Click`事件：

```
Button b = new Button();
b.Text = "Do Something";
b.Click += click;
form1.Controls.Add(b);

private void click(object sender, EventArgs e)
{
    int i;
} 
```

通过将`onclick`Attribute 添加到 Button 的`Attributes`集合中，它将呈现为 HTML 输入标记上的属性。在这种情况下，您可以使用它在客户端执行一些 javascript 代码。

```
b.Attributes.Add("onclick", "alert('Hey')");

//Will render the button as
<input type="submit" name="x" value="Do Something" onclick="alert('Hey')"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-04T15:13:47.497

你可以做：

```
Button b = new Button();
b.Text = "Do Something";
b.Click += new EventHandler((s, ev) =>
                        {
                            int i;
                        });
form1.Controls.Add(b); 
```

# android - 使用嵌入式 TTS 在 Android 上进行离线语音识别

> ID：14866303
> 
> 赞同：1
> 
> 时间：2013-02-14T01:18:57.230
> 
> 标签：android, voice-recognition

我有兴趣看看是否可以在 Android 上使用 Google TTS 进行离线语音识别，并试图使其工作但没有成功。我正在开发一个 Android 应用程序，该应用程序要求用户对着手机说出一个“神奇的词”，手机会在听到正确的词时做出响应。当我连接到网络时，语音识别工作得很好，但我需要让它离线工作。

我正在查看 Android 文档并遇到了这个问题：[KEY_FEATURE_EMBEDDED_SYNTHESIS][1] 文档说使用 getFeatures(Locale) 检索功能以查看引擎支持的功能。它返回了两个功能：用于 Google 文本转语音引擎的 embeddedTts 和 networkTts，因此可以使用 embeddedTts 功能。在下面代码的第 3 行中，我根据 Android 文档启用了此功能，但它似乎没有效果。我还尝试将 networkTts 功能设置为 false，这也没有改变行为。每当我未连接到数据网络时，我都会收到错误消息“目前无法访问 Google”。

我希望这里有人可以帮助我了解如何使用 EmbeddedTts。

我正在运行 Android 4.1.1 的三星 Galaxy S3 上测试我的应用程序

谢谢你。

以下是相关代码：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        HashMap<String, String> localSpeech = new HashMap<String, String>();
        localSpeech.put(TextToSpeech.Engine.KEY_FEATURE_EMBEDDED_SYNTHESIS, "true");
          if (requestCode == VOICE_RECOGNITION_REQUEST_CODE && resultCode == RESULT_OK) {
        // Fill the list view with the strings the recognizer thought it could have heard
        ArrayList<String> matches = data.getStringArrayListExtra(
                RecognizerIntent.EXTRA_RESULTS);
        if (matches.size() == 0)
        {
            tts.speak("Heard nothing", TextToSpeech.QUEUE_FLUSH, null);

        } else {
            String mostLikelyThingHeard = matches.get(0); 
            String magicWord = "Magic";
            if (mostLikelyThingHeard.equals(magicWord)) {
                //tts.speak("You got it!", TextToSpeech.QUEUE_FLUSH, null);
                tts.speak("You got it!", TextToSpeech.QUEUE_FLUSH, localSpeech);
            } else {
                tts.speak("The magic word is not " + mostLikelyThingHeard + " try again", TextToSpeech.QUEUE_FLUSH, localSpeech);
            }
        }

    }
    else {
        Log.d("APP", "result NOT ok");
    }

    super.onActivityResult(requestCode, resultCode, data);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T08:17:40.427

您将语音识别（也称为“语音识别”和“语音到文本”）与语音合成（也称为“TTS”和“文本到语音”）混合在一起。要回答您的问题，使用语音合成 API 来实现语音识别是不可能的。

# jquery - jQuery Odd Even 将偶数添加到奇数元素

> ID：14866305
> 
> 赞同：0
> 
> 时间：2013-02-14T01:19:02.010
> 
> 标签：jquery, drop-down-menu

```
jQuery('li.has-sub ul li:even').addClass('even');
jQuery('li.has-sub ul li:odd').addClass('odd'); 
```

这些类被添加到下拉菜单中。在一个下拉菜单中，类被正确添加，但另一个下拉菜单正在向`even`奇数元素添加类。我认为 jquery 可能会将所有列表项一起计算，这仍然无法解释为什么它会将 1 视为偶数。您可以在此 url 上看到问题：

黄色背景的菜单以漂流之旅开始。
[http://bit.ly/XAEmh7](http://bit.ly/XAEmh7)

我尝试添加`this`以尝试使 jQuery 仅计算有问题的 ul 但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:45:08.937

给定您的代码，jQuery 的行为正确：

```
jQuery('li.has-sub ul li:even').addClass('even');
jQuery('li.has-sub ul li:odd').addClass('odd'); 
```

如果您将其更改为：

```
jQuery('li.has-sub').each(function(){
   jQuery('ul li:even',this).addClass('even');
   jQuery('ul li:odd',this).addClass('odd');
}); 
```

应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:05:03.290

:ODD/:EVEN 选择器是基于 0 的索引，因此它将突出显示第二、第四等行为奇数（索引 1,3 等）

此外，为了提高性能，您应该使用 .filter 如下：

```
$(document).ready(function() {
    $('li ul').filter(':even').addClass('even').end()
              .filter(':odd').addClass('odd');
}); 
```

请参考 jQuery 文档：[http ://api.jquery.com/odd-selector/](http://api.jquery.com/odd-selector/)

# python - 设置 py.Saunter 时 saunter.ini 的 IO 错误

> ID：14866306
> 
> 赞同：0
> 
> 时间：2013-02-14T01:19:03.220
> 
> 标签：python, selenium, webdriver

在我的系统上设置 py.saunter 时，我收到 saunter.ini 文件的 IO 错误。

目录结构完全如示例中所示 - [https://github.com/Element-34/Py.Saunter-Examples](https://github.com/Element-34/Py.Saunter-Examples)

以下是错误消息 -

```
IOError: [Errno 2] No such file or directory: '/src/conf/saunter.ini'
ERROR: Module: Tests could not be imported
(file:/Users/.../PythonWorkspace/PySaunter/src/scripts/Tests.py) 
```

我知道有很多与进口相关的问题。他们中的大多数人建议添加**init** .py 如果还没有的话。我在每个文件夹中添加了**init** .py。

读取 saunter.ini 的代码片段如下 -

```
def configure(self, config = "saunter.ini"):
    self.config = ConfigParser.SafeConfigParser()
    self.config.readfp(open(os.path.join("conf", config))) 
```

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:51:01.617

There isn't really enough here to diagnose the problem. But, in the examples directory there is actually two different projects (ebay and sauce) -- you have to be in one of them, not the top.

Also, Py.Saunter won't create saunter.ini for you. You need to create it (most easily by renaming saunter.ini.default).

Oh, and don't try and run it from checkout from Github -- it really does need to be from an egg. If there are bits missing from [http://element34.ca/products/saunter/pysaunter](http://element34.ca/products/saunter/pysaunter) which prevent you from getting started, let me know and I'll modify the page.

(Now if only I remembered by SO credentials...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T05:48:09.953

我从 Eclipse 运行项目作为单元测试，这就是它抛出导入错误的原因。Py.Saunter 是一个固执己见的框架，目前不支持 eclipse 或任何其他 IDE。从命令行执行时它工作正常，如站点所示 - [http://element34.ca/products/saunter/pysaunter](http://element34.ca/products/saunter/pysaunter)

应确保从主目录执行。

# python - Convert some C function to Python

> ID：14866307
> 
> 赞同：0
> 
> 时间：2013-02-14T01:19:15.967
> 
> 标签：python, c, linux, encryption

i need to convert this function in C to Python:

```
void myencrypt(char password[],int mkey)
{
    unsigned int i;
    for(i=0;i<strlen(password);++i)
    {
    password[i] = password[i] - mkey;
    }
} 
```

I try this, but fails...

```
def myencrypt(password, mkey):

    i = 0
    newpass = []

    for i in range(len(password)):
        newpass[i] = ord(password[i]) - mkey;

    return newpass 
```

any help ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:39:19.247

C 代码正在`password`就地修改。因此，最接近的等价物是：

```
def myencrypt(password, mkey):
    for i in range(len(password)):
        password[i] = chr(ord(password[i]) - mkey) 
```

假设`password`是一个`list`字符，而不是一个字符串。

另外，请注意我正在调用`chr`each 的结果`ord(password[i]) - mkey`，因为否则您将用数字替换每个字符 - 例如，`myencrypt(['a'], 32)`会给您`[65]`而不是`['A']`. （这在 C 中不是必需的，因为`65`和在 C`'A'`中是相同的值。）

你更有可能想要用一个字符串调用这个函数，然后取回一个字符串。您仍然*可以*使用 C 风格的就地功能来做到这一点，只需转换和转换回来：

```
def myencrypt(password, mkey):
    newpass = list(password)
    for i in range(len(newpass)):
        newpass[i] = chr(ord(newpass[i]) - mkey)
    return ''.join(newpass) 
```

但是，这不是一种非常 Pythonic 的做事方式。一个更惯用的解决方案是：

```
def myencrypt(password, mkey):
    return ''.join(chr(ord(ch) - mkey) for ch in password) 
```

这带来了一个更普遍的观点：除了在非常琐碎的情况下，直接尝试“将 C 代码转换为 Python”是一个坏主意。相反，要弄清楚 C 代码做了什么，并编写新的 Python 代码，以最适合 Python 的方式完成相同的任务，而不是按照 C 代码的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T01:21:19.457

In Python, you can only assign to an index in a list if the list is long enough, otherwise you will get an IndexError. Try the following:

```
def myencrypt(password, mkey):
    i = 0
    newpass = []
    for i in range(len(password)):
        newpass.append(ord(password[i]) - mkey)
    return newpass 
```

By using `newpass.append()`, you will just add each new element to the end of the list. As a side note, you can iterate directly over the elements of `password` which is a bit more concise:

```
def myencrypt(password, mkey):
    newpass = []
    for x in password:
        newpass.append(ord(x) - mkey)
    return newpass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T01:29:27.227

首先，我不会在这个函数中使用“加密”这个词。在现代 Python 中，您可以使用`bytearray`可变的对象。然后转换为字符串。

```
def myobfuscate(password, mkey):
    a = bytearray(password)
    for i, c in enumerate(password):
        a[i] = ord(c) - mkey
    return str(a)

myobfuscate("secret", 10)
# OUT: 'i[Yh[j' 
```

在 Python 中，字符串是不可变的，它们不能就地更改。所以你会使用这样的函数：

```
pw = myobfuscate(pw, 10) 
```

假设您不再需要原始值。这将使用函数返回的新对象替换原始引用。

# javascript - Show coordinates LAT / LONG Google Maps - Track Markers Busses of External Website

> ID：14866309
> 
> 赞同：0
> 
> 时间：2013-02-14T01:19:22.023
> 
> 标签：javascript, html, google-maps, canvas, gps

I'm looking for a way to show the coordinates **LAT / LONG of the Bus (Markers)** of a particular bus line shown on Google Maps, but I can not extract this information from the site. I used Firebug and have not found the Coordinates LAT / LONG.

**The address for the url I'm trying to extract LAT / LONG is:**

[http://olhovivo.sptrans.com.br/#sp?cat=Mapa&l=34694&s=857P-10&sc=TERMINAL%20CAMPO%20LIMPO](http://olhovivo.sptrans.com.br/#sp?cat=Mapa&l=34694&s=857P-10&sc=TERMINAL%20CAMPO%20LIMPO)

(.. OR ..)

[http://olhovivo.sptrans.com.br/#sp?cat=Mapa&l=829&s=9789-10&sc=BARRA%20FUNDA&nc](http://olhovivo.sptrans.com.br/#sp?cat=Mapa&l=829&s=9789-10&sc=BARRA%20FUNDA&nc)

I want to use a **script Javascript** to capture Coordinates (LAT / LONG). I'm trying the following code in Firebug console:

**javascript:void(prompt("TEST",gApplication.getMap().getCenter()));**

, but it only works on URLs that have the domain GoogleMaps.

Have any tip or trick to help extract the Long / Lat objects (bus) on Google Map?

Which adjustments do you recommend? Any suggestions would be appreciated. Thanks...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:51:17.793

这不是世界上最漂亮的东西，但坐标位于地图中“*点击在 Google 地图上查看该区域*”的链接内，所以如果你抓住那个链接，你可以发挥一些神奇的作用。例如，将其复制/粘贴到 Firebug 中，您应该会得到您正在寻找的东西......

```
var x=($('a[title="Click to see this area on Google Maps"]').attr("href")); x.split("?ll=")[1].split("&z")[0]; 
```

祝你好运！:-)

# ruby - Accessing constants outside a class

> ID：14866315
> 
> 赞同：6
> 
> 时间：2013-02-14T01:20:21.333
> 
> 标签：ruby, oop

When I want to access the constant `CONST` in class `Test` in

```
class Test
  CONST = 7
end 
```

from outside of the class, I have to do this:

```
puts Test::CONST 
```

Why do I get an error when I do this?

```
puts obj::CONST 
```

If `obj` is an object of the `Test` class, why do I get an error if I try to access the constant through the object?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-14T01:30:00.157

因为实例对象和类对象不是一回事。命名空间存在于类对象上，不存在于实例上。

但是，您可以向实例询问它的类，然后深入研究。

```
puts obj.class::CONST 
```

# javascript - Javascript Adding Two Fields Together for Tiggzi App

> ID：14866316
> 
> 赞同：0
> 
> 时间：2013-02-14T01:20:25.757
> 
> 标签：javascript, jquery

I need some help putting together a line of javascript. I Am looking to add the values of two different fields and display them in a text area. The fields are "AP" and "MP" and the text are is "TotalCost".

I am not sure of how to make his happen at all. Please help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:38:04.013

HTML：

```
<input name="AP" />
<input name="MP" />
<textarea name="TotalCost" rows="4" cols="20"></textarea>
<button>Add</button> 
```

jQuery：

```
$(document).ready(function(){
    $("button").click(function(){
       $("textarea[name='TotalCost']").val($("input[name='AP']").val()+$("input[name='MP']").val());
    });
}); 
```

工作[小提琴](http://jsfiddle.net/kPvPq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:25:17.237

所以像：

```
<input id="AP" />
<input id="MP" />
<input id="TotalCost" />
<button onclick="add()">Add</button>

<script>
function add()
{
   var ap = +document.getElementById('AP').value; // Value of AP (plus will cast the value to a number)
   var mp = +document.getElementById('MP').value; // Value of MP
   document.getElementById('TotalCost').value = ap + mp; // Set TotalCost to ap + mp
}
</script> 
```

如果你想使用 jQuery，你可以这样做：

```
<button id="btnAdd">Add</button>

<script>    
   $('#btnAdd').click(function ()
   { 
       var ap = +$('#AP').val();
       var mp = +$('#MP').val();
       $('#TotalCost').val(ap + mp);
   });
</script> 
```

# php - Find Available time in a day of one person

> ID：14866319
> 
> 赞同：0
> 
> 时间：2013-02-14T01:21:14.967
> 
> 标签：php, sql-server-2008, datetime

I am doing resource allocation for an event.

My event table for one resource is looks like this:

```
(Int)---(nvarchar(100)---(datetime)--(datetime)

EventId --- Event ---    StartTime ---              EndTime

1    /       test    /    2013-02-20 13:00:00   /   2013-02-20 15:00:00

2    /       test2   /     2013-02-20 09:30:00  /   2013-02-20 11:00:00

3    /       test3   /     2013-02-25 11:30:00  /   2013-02-25 14:30:00 
```

Now I want to find the total availablity for this resource on one day.

Like on 20th Feb 2013 I want to remove the busy hours from this resource and want to show only available hours for new event.

I am using php and sql server 2008 r2.

It works fine with only one record of a single day. Right now I am using a foreach loop with calculation.

My Code is:

```
$id = 6;    
$cdata = $test->getResourceEvents($id);

$h = "";
$final= array();

foreach($cdata as $c)
   {

   $sh = $c['starttime']->Format('H'); // Starting hour
   $eh = $c['endtime']->Format('H'); // End hour

   $hh = $sh;
   $final = array();
   $sdate = $c['starttime']->Format('Y-m-d');
   $edate = $c['endtime']->Format('Y-m-d');
   if($edate == $sdate)
   {

   $dh = $eh-$sh; // Duration
       for($i=1;$i<=$dh;$i++)
       {
           $hh = $hh.",".($sh+$i); // Busy hours
       }    
   $busyhrs[$sdate] = explode(",",$hh);
       $final[$sdate] = $busyhrs;
   }
   else
   {
       echo "false";
   }
}

print_r($final); 
```

and my result is :

```
Array
(
    [2013-02-20] => Array
        (
            [2013-02-20] => Array
                (
                    [0] => 9
                    [1] => 10
                    [2] => 11
                )

        )

    [2013-02-26] => Array
        (
            [2013-02-26] => Array
                (
                    [0] => 11
                    [1] => 12
                    [2] => 13
                    [3] => 14
                )

        )

)

```

First two records have the same dates. but this only calculates 2nd row's hours. Not calculating first row's hours that is 13,14,15.

Can anyone please tell me how to match the dates and how to get total busy hours of one date?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:12:21.263

我在 Java 中做了类似的事情。

我有一个包含日期范围的表格，还有一个日期范围，我必须从已经存在的日期范围插入到覆盖范围的失效中。

我基本上采用了我感兴趣的日期范围，并“减去”了所有现有的日期范围。您将在下面的代码中找到我的减法。

从 DateRange_A 中减去 DateRange_B 会导致 DateRange_A 被原地修改，并且如果 DateRange_A 完全被 DateRange_B 分割，则该方法返回一个新的 DateRange。

当然还有其他方法可以解决这个问题，比如 SQL SERVER 中的迭代，但我已经处于 Java 思维模式，这个解决方案就这样发生了。

```
 /*
 * Copyright (c) 2009, Ben Fortuna
 * (Modified by Alex Marunowski)
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 
 *  o Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 * 
 *  o Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 * 
 *  o Neither the name of Ben Fortuna nor the names of any other contributors
 * may be used to endorse or promote products derived from this software
 * without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

import java.io.Serializable;
import java.util.Date;

/**
 * @author fortuna
 *
 */
public class DateRange implements Serializable {

    private static final long serialVersionUID = -7303846680559287286L;

    /**
     * A flag indicating whether to include the start of the period in test functions.
     */
    public static final int INCLUSIVE_START = 1;

    /**
     * A flag indicating whether to include the end of the period in test functions.
     */
    public static final int INCLUSIVE_END = 2;

    private Date rangeStart;

    private Date rangeEnd;

    /**
     * @param start the start of the range
     * @param end the end of the range
     */
    public DateRange(Date start, Date end) {
        if (start == null) {
            throw new IllegalArgumentException("Range start is null");
        }
        if (end == null) {
            throw new IllegalArgumentException("Range end is null");
        }
        if (end.before(start)) {
            throw new IllegalArgumentException("Range start must be before range end");
        }
        this.rangeStart = start;
        this.rangeEnd = end;
    }

    /**
     * @return the rangeStart
     */
    public Date getStartDate() {
        return rangeStart;
    }

    /**
     * @return the rangeEnd
     */
    public Date getEndDate() {
        return rangeEnd;
    }

    public void setRangeStart(Date rangeStart) {
        if(rangeStart.after(getEndDate()))
            throw new IllegalArgumentException("The start of a date range cannot be after its end!");

        this.rangeStart = rangeStart;
    }

    public void setRangeEnd(Date rangeEnd) {
        if(rangeStart.after(getEndDate()))
            throw new IllegalArgumentException("The end of a date range cannot be after its start!");

        this.rangeEnd = rangeEnd;
    }

    /**
     * Determines if the specified date occurs within this period (inclusive of
     * period start and end).
     * @param date a date to test for inclusion
     * @return true if the specified date occurs within the current period
     * 
     */
    public final boolean includes(final Date date) {
        return includes(date, INCLUSIVE_START | INCLUSIVE_END);
    }

    /**
     * Decides whether a date falls within this period.
     * @param date the date to be tested
     * @param inclusiveMask specifies whether period start and end are included
     * in the calculation
     * @return true if the date is in the period, false otherwise
     * @see Period#INCLUSIVE_START
     * @see Period#INCLUSIVE_END
     */
    public final boolean includes(final Date date, final int inclusiveMask) {
        boolean includes = true;
        if ((inclusiveMask & INCLUSIVE_START) > 0) {
            includes = includes && !rangeStart.after(date);
        }
        else {
            includes = includes && rangeStart.before(date);
        }
        if ((inclusiveMask & INCLUSIVE_END) > 0) {
            includes = includes && !rangeEnd.before(date);
        }
        else {
            includes = includes && rangeEnd.after(date);
        }
        return includes;
    }

    /**
     * Decides whether this period is completed before the given period starts.
     * 
     * @param range
     *            a period that may or may not start after this period ends
     * @return true if the specified period starts after this periods ends,
     *         otherwise false
     */
    public final boolean before(final DateRange range) {
        return (rangeEnd.before(range.getStartDate()));
    }

    /**
     * Decides whether this period starts after the given period ends.
     * 
     * @param range
     *            a period that may or may not end before this period starts
     * @return true if the specified period end before this periods starts,
     *         otherwise false
     */
    public final boolean after(final DateRange range) {
        return (rangeStart.after(range.getEndDate()));
    }

    /**
     * Decides whether this period intersects with another one.
     * 
     * @param range
     *            a possible intersecting period
     * @return true if the specified period intersects this one, false
     *         otherwise.
     */
    public final boolean intersects(final DateRange range) {
        boolean intersects = false;
        // Test for our start date in period
        // (Exclude if it is the end date of test range)
        if (range.includes(rangeStart) && !range.getEndDate().equals(rangeStart)) {
            intersects = true;
        }
        // Test for test range's start date in our range
        // (Exclude if it is the end date of our range)
        else if (includes(range.getStartDate())
                && !rangeEnd.equals(range.getStartDate())) {
            intersects = true;
        }
        return intersects;
    }

    /**
     * Decides whether these periods are serial without a gap.
     * @param range a period to test for adjacency
     * @return true if one period immediately follows the other, false otherwise
     */
    public final boolean adjacent(final DateRange range) {
        boolean adjacent = false;
        if (rangeStart.equals(range.getEndDate())) {
            adjacent = true;
        } else if (rangeEnd.equals(range.getStartDate())) {
            adjacent = true;
        }
        return adjacent;
    }

    /**
     * Decides whether the given period is completely contained within this one.
     * 
     * @param range
     *            the period that may be contained by this one
     * @return true if this period covers all the dates of the specified period,
     *         otherwise false
     */
    public final boolean contains(final DateRange range) {
        // Test for period's start and end dates in our range
        return (includes(range.getStartDate()) && includes(range.getEndDate()));
    }

    /**
     * Decides whether the given period is completely contained within this one, taking into consideration whether date ranges with matching start or end dates 
     * are counted as being contained
     * 
     * @param range
     *            the period that may be contained by this one
     * @param inclusiveMask
     *              if this is set to 0, the start and end dates cannot be the same date and have it be considered to be contained within this date range.
     *              this.contains(this, 1) returns true 
     *              this.contains(this, 0) returns false 
     * @return true if this period covers all the dates of the specified period,
     *         otherwise false
     */
    public final boolean contains(final DateRange range, int inclusiveMask) {
        // Test for period's start and end dates in our range
        return (includes(range.getStartDate(), inclusiveMask) && includes(range.getEndDate(), inclusiveMask));
    }

    /**
     * Exclude otherRange from the dates covered by this DateRange. Note: This will put the specified buffer around the range being subtracted from this date range. 
     * @param otherRange
     * @return an additional date range if subtracting otherRange from this DateRange results in a part of this objects DateRange being separated from the rest of the range. 
     * i.e. if this.includes(otherRange, 0), then there will be two remaining portions of this daterange.
     * If no dangling date range remains, then the method returns null.
     * @author Alex Marunowski. 2012.10.31
     */
    public DateRange subtract(DateRange otherRange, long buffer) throws DateRangeObliteratedException{

        Date bufferedStart = new Date(otherRange.getStartDate().getTime()-buffer);
        Date bufferedEnd= new Date(otherRange.getEndDate().getTime()+buffer);
        otherRange = new DateRange(bufferedStart, bufferedEnd);

        // If the other range is entirely after this range, nothing happens
        if(getEndDate().before(otherRange.getStartDate()))
            return null;

        // If the other range is entirely before this range, nothing happens
        if(getStartDate().after(otherRange.getEndDate()))
            return null;

        if(otherRange.contains(this))
            throw new DateRangeObliteratedException();

        DateRange separatedTimeInterval = null;
        if(this.contains(otherRange, 0)){

            // The trailing daterange is the time between the end date of the inner daterange, and the end date of the outer date range
            separatedTimeInterval = new DateRange(otherRange.getEndDate(), getEndDate());

            // This date range now ends at the start time of the inner date range
            this.setRangeEnd(otherRange.getStartDate());

            return separatedTimeInterval;
        }

        if(otherRange.getEndDate().before(getEndDate())){
            // This date range is now the time between the end of the otherRange plus the buffer time, and the end of this date range
            long newRangeStart = otherRange.getEndDate().getTime();
            this.setRangeStart(new Date(newRangeStart));
            return null;
        }

        if(otherRange.getStartDate().after(getStartDate())){
            // This date range is now the time between this date range's start, and the other date ranges start minus the buffer time
            long newRangeEnd = otherRange.getStartDate().getTime();
            this.setRangeEnd(new Date(newRangeEnd));
            return null;
        }

        // This will never happen, but the compiler doesn't know that
        System.out.println("This should never have happened. No comparisons between the date ranges was discovered");
        return null;

    }

    public static class DateRangeObliteratedException extends Exception {
        /**
         * 
         */
        private static final long serialVersionUID = -5642891561498447972L;

        public DateRangeObliteratedException() {
            super("This date range no longer exists. It was entirely contained within the range you subtracted from it.");
        }
    }
}

                        for(int rangeIndex = 0; rangeIndex less than rangesBusy.size(); rangeIndex++) {
                            DateRange busyRange = rangesBusy.get(rangeIndex);
                            try {
                                DateRange trailingRange =  freeTimeBlock.subtract(busyRange, 0);

                                if(trailingRange != null) {
                                    freeTimeRanges.add(trailingRange);
                                }

                            } catch (DateRangeObliteratedException e) {
                                freeTimeRanges.remove(rangeIndex);
                                rangeIndex--;
                            }
                        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:19:03.953

我认为这符合您的预期。关键是那些涉及 $all_finals 和 $final 的移动。我通常用python编写并且不知道在php中附加到数组的最佳方法所以我使用了这个[http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

```
$id = 6;    
$cdata = $test->getResourceEvents($id);

$h = "";
$all_finals = array();

foreach($cdata as $c)
   {
   $final= array();
   $sh = $c['starttime']->Format('H'); // Starting hour
   $eh = $c['endtime']->Format('H'); // End hour

   $hh = $sh;
   $final = array();
   $sdate = $c['starttime']->Format('Y-m-d');
   $edate = $c['endtime']->Format('Y-m-d');
   if($edate == $sdate)
   {

   $dh = $eh-$sh; // Duration
       for($i=1;$i<=$dh;$i++)
       {
           $hh = $hh.",".($sh+$i); // Busy hours
       }    
   $busyhrs[$sdate] = explode(",",$hh);
       $final[$sdate] = $busyhrs;
   }
   else
   {
       echo "false";
   }
   array_push($all_finals, $final);
}

print_r($all_final); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T23:22:52.477

我找到了解决方案。我改变了制作最终数组的过程。非常感谢大家帮助我。我认为它很简单。这是我的代码。

可能会对某人有所帮助。

```
 $id = 6;    
        $cdata = $test->getResourceEvents($id);

        $h = "";
        $final= array();

        foreach($cdata as $c)
        {
            $sh = $c['starttime']->Format('H'); // Starting hour

            $eh = $c['endtime']->Format('H'); // End hour

            $hh = $sh;
            $busyhrs = array();
            $sdate = $c['starttime']->Format('Y-m-d');
            $edate = $c['endtime']->Format('Y-m-d');
            if($edate == $sdate)
            {
                $dh = $eh-$sh; // Duration
                for($i=1;$i<=$dh;$i++)
                {
                    $hh = $hh.",".($sh+$i); // Busy hours
                }   

                if($final != array() || $final != NULL)
                {
                    foreach($final as $key=>$val)
                    {
                        if($key==$sdate)
                        {
                            $final[$key] = $val.",".$hh;
                        }
                        else
                        {
                            $final[$sdate] = $hh;
                        }
                    }
                }
                else
                {
                    $final[$sdate] = $hh;
                }                           
            }
            else
            {
                echo "false";
            }
        }

        echo "<pre>";
        print_r($final); 
```

# jquery - Multiple flexslider remove current slide

> ID：14866320
> 
> 赞同：0
> 
> 时间：2013-02-14T01:21:19.220
> 
> 标签：jquery, flexslider

I'm trying to remove the current slide from a flexslider on a page with multiple sliders who currently share the same class. [http://flexslider.woothemes.com/](http://flexslider.woothemes.com/)

What it currently does is if I click on the close link to remove the current slide on the 2nd flexslider, it removes the current slide from the 1st flexslider.

I need it to correctly remove the current slide on the respective sliders. Any ideas?

**HTML**

```
<!-- flexslider 1 -->
<section class='choices'>
  <ul class='slides'>
    <li class='flex-active-slide'>
       <a class='close'></a>
       content here
    </li>
    <li>
       <a class='close'></a>
       content here
    </li>        
    <li>
       <a class='close'></a>
       content here
    </li>
  </ul>
</section>

<!-- flexslider 2 -->
<section class='choices'>
  <ul class='slides'>
    <li class='flex-active-slide'>
       <a class='close'></a>
       content here
    </li>
    <li>
       <a class='close'></a>
       content here
    </li>
  </ul>
</section> 
```

**script**

```
(window).load(function() {

    $('.choices').flexslider({
        animation: "slide",
    });

    var slider = $('.choices').data('flexslider');

    $('.slides .close').click(function(){
         slider.removeSlide(slider.currentSlide);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T13:20:33.327

设法找到解决方法， currentSlide 只返回幻灯片索引号。所以它需要更具体的选择器。

```
$('.choices .close').click(function(){
    var sliderid = $(this).closest(".choices");
    var slider = sliderid.data('flexslider');
    slider.removeSlide(slider.currentSlide);
}); 
```

# angularjs - 为什么使用 wrap inside 指令编译函数会导致无限循环？

> ID：14866323
> 
> 赞同：0
> 
> 时间：2013-02-14T01:21:32.983
> 
> 标签：angularjs, angularjs-directive

我正在尝试在a 的函数中使用该`wrap`函数。`compile``directive`

以下将导致无限循环并导致浏览器崩溃：

```
function compiler(tElement, tAttrs, transcludeFn) {
    var wrapper = angular.element('<div />');
    tElement.wrap(wrapper);

    return linker;
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T05:03:28.597

我猜……第一次`compiler`调用你的函数时，它会将元素（即，HTML 中你放置指令属性的元素）包装在一个新的 <div></div> 中。Angular 将其视为一个新元素并对其进行编译……找到您的指令，该指令再次调用编译器函数，再次包装它，Angular 将其视为一个新元素……无穷无尽。

# java - OpenGL 3 (LWJGL) LookAt 矩阵混淆

> ID：14866325
> 
> 赞同：6
> 
> 时间：2013-02-14T01:21:37.190
> 
> 标签：java, opengl, matrix, lwjgl, glulookat

我正在使用 LWJGL 学习 OpenGL 3。我试图实现等效于`gluLookAt()`，虽然它有效，但我对为什么有些困惑。

我承认只是从网络上的各种来源复制此代码，但经过大量研究，我认为了解其背后的数学原理，并且我了解 LWJGL 在做什么。

但是，“正确”`gluLookAt`代码在我的应用程序中表现不正确，因为相机似乎转向了错误的方向。我只能通过转置正交向量`forward`,`side`和`up`(希望我使用正确的术语！) 来让我的代码工作，我很确定这是错误的......

```
private static final Vector3f forward = new Vector3f();
private static final Vector3f side = new Vector3f();
private static final Vector3f up = new Vector3f();
private static final Vector3f eye = new Vector3f();

public static Matrix4f lookAt(float eyeX, float eyeY, float eyeZ, 
                              float centerX, float centerY, float centerZ, 
                              float upX, float upY, float upZ) {
    forward.set(centerX - eyeX, centerY - eyeY, centerZ - eyeZ);
    forward.normalise();

    up.set(upX, upY, upZ);

    Vector3f.cross(forward, up, side);
    side.normalise();

    Vector3f.cross(side, forward, up);
    up.normalise();

    Matrix4f matrix = new Matrix4f();
    matrix.m00 = side.x;
    matrix.m01 = side.y;
    matrix.m02 = side.z;

    matrix.m10 = up.x;
    matrix.m11 = up.y;
    matrix.m12 = up.z;

    matrix.m20 = -forward.x;
    matrix.m21 = -forward.y;
    matrix.m22 = -forward.z;

    matrix.transpose(); // <------ My dumb hack

    eye.set(-eyeX, -eyeY, -eyeZ);
    matrix.translate(eye);

    return matrix;
} 
```

我不认为我应该做转置，但没有它就行不通。我放`transpose()`是因为我懒得重新输入所有矩阵单元格的位置顺便说一句！

我的理解是lookAt矩阵的形式应该如下

```
[ side.x  up.x  fwd.x  0 ] [ 1  0  0  -eye.x ]
[ side.y  up.y  fwd.y  0 ] [ 0  1  0  -eye.y ]
[ side.z  up.z  fwd.z  0 ] [ 0  0  1  -eye.z ]
[      0     0      0  1 ] [ 0  0  0       1 ] 
```

而且我认为 LWJGL`Matrix4f`类将矩阵单元表示为`m<col><row>`. 该`translate(Vector3f)`方法执行以下操作

```
public static Matrix4f translate(Vector3f vec, Matrix4f src, Matrix4f dest) {
  ...
    dest.m30 += src.m00 * vec.x + src.m10 * vec.y + src.m20 * vec.z;
    dest.m31 += src.m01 * vec.x + src.m11 * vec.y + src.m21 * vec.z;
    dest.m32 += src.m02 * vec.x + src.m12 * vec.y + src.m22 * vec.z;
    dest.m33 += src.m03 * vec.x + src.m13 * vec.y + src.m23 * vec.z;
  ...
} 
```

所以我对我搞砸了这部分内容感到非常困惑。是我对 lookAt 矩阵、列/行专业性（是一个词吗？！）的理解`Matrix4f`，还是其他什么？我的其余代码是否刚刚损坏？它真的正确吗，我只是担心太多了吗？我只是个白痴吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T13:04:37.040

你不应该转置任何东西。你应该否定lookAt（）矩阵的“眼睛”向量和观察方向。“眼睛”对应于应该始终反转的相机位置。所有这些都在lookAt（）内完成

这是[著名 GLM 数学库](http://glm.g-truc.net/)的 Java 端口的 lookAt() 方法。

```
 public static Mat4 lookAt(Vec3 eye, Vec3 center, Vec3 up) {

    Vec3 f = normalize(Vec3.sub(center, eye));
    Vec3 u = normalize(up);
    Vec3 s = normalize(cross(f, u));
    u = cross(s, f);

    Mat4 result = new Mat4(1.0f);
    result.set(0, 0, s.x);
    result.set(1, 0, s.y);
    result.set(2, 0, s.z);
    result.set(0, 1, u.x);
    result.set(1, 1, u.y);
    result.set(2, 1, u.z);
    result.set(0, 2, -f.x);
    result.set(1, 2, -f.y);
    result.set(2, 2, -f.z);

    return translate(result, new Vec3(-eye.x,-eye.y,-eye.z));
} 
```

我将它与基于 LWJGL 的 OpenGL 4 渲染器一起使用，它就像一个魅力:)

# ios - Parsing and processing Text Strings in iOS

> ID：14866326
> 
> 赞同：3
> 
> 时间：2013-02-14T01:21:38.257
> 
> 标签：ios, text-files, multiline, nsstringencoding

Wanted to find the best programming approach in iOS to manipulate and process text strings. Thanks!

Would like to take a file with strings to manipulate the characters similar to the following:

```
NQXB26JT1RKLP9VHarren              Daggett B0BMAF00SSQ   ME03B98TBAA8D

NBQB25KT1RKLP05Billison             Whiner X0AMAF00UWE   8E21B98TBAF8W 
```

...

...

...

Each string would process in series then loop to the next string, etc.

Strip out the name and the following strings:

Take the following 3 string fragments and convert to another number base. Have the code to process the new result but unsure of how to send these short strings to be processed in series.

```
QXB26

B0BM

BAA8 
```

Then output the results to a file. The xxx represents the converted numbers.

```
xxxxxxxxx   Harren Daggett   xxxxxxxx  xxxxxxxx

xxxxxxxxx   Billison  Whiner xxxxxxxx  xxxxxxxx 
```

...

...

...

The end result would be pulling parts of strings out of the first file and create a new file with the desired result.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T10:26:49.167

有几种方法可以完成您所追求的目标，但是如果您想要一些简单且相当容易调试的东西，您可以简单地通过您已识别的每个字段（数字、名称）的固定位置来拆分每条记录，然后使用简单的正则表达式替换来压缩名称并将它们重新组合在一起。

出于这样的目的，我更喜欢一个简单（甚至有点笨拙）的解决方案，该解决方案易于遵循和调试，因此未优化此示例：

```
NSFileManager *fm = [NSFileManager defaultManager];
NSArray *URLs = [fm URLsForDirectory: NSDocumentDirectory
                           inDomains: NSUserDomainMask];

NSURL *workingdirURL = URLs.lastObject;
NSURL *inputFileURL  = [workingdirURL URLByAppendingPathComponent:@"input.txt" isDirectory:NO];
NSURL *outputFileURL = [workingdirURL URLByAppendingPathComponent:@"output.txt" isDirectory:NO];

// For the purpose of this example, just read it all in one chunk
NSError *error;
NSString *stringFromFileAtURL = [[NSString alloc]
                                 initWithContentsOfURL:inputFileURL
                                 encoding:NSUTF8StringEncoding
                                 error:&error];

if ( !stringFromFileAtURL) {
    // Error, do something more intelligent that just returning
    return;
}

NSArray *records = [stringFromFileAtURL componentsSeparatedByCharactersInSet: [NSCharacterSet newlineCharacterSet]];

NSMutableArray *newRecords = [NSMutableArray array];

for (NSString *record in records) {

    NSString *firstNumberString  = [record substringWithRange:NSMakeRange(1, 5)];
    NSString *nameString         = [record substringWithRange:NSMakeRange(15, 27)];
    NSString *secondNumberString = [record substringWithRange:NSMakeRange(43, 4)];
    NSString *thirdNumberString  = [record substringWithRange:NSMakeRange(65, 4)];

    NSString *condensedNameString = [nameString stringByReplacingOccurrencesOfString:@" +"
                                                                          withString:@" "
                                                                             options:NSRegularExpressionSearch
                                                                               range:NSMakeRange(0, nameString.length)];

    NSString *newRecord = [NSString stringWithFormat: @"%@ %@ %@ %@",
                           convertNumberString(firstNumberString),
                           condensedNameString,
                           convertNumberString(secondNumberString),
                           convertNumberString(thirdNumberString) ];

    [newRecords addObject: newRecord];
}

NSString *outputString = [newRecords componentsJoinedByString:@"\n"];

[outputString writeToURL: outputFileURL
              atomically: YES
                encoding: NSUTF8StringEncoding
                   error: &error]; 
```

在这个例子`convertNumberString`中是一个普通的 C 函数，它可以转换你的数字字符串。当然，它也可以是一种方法，具体取决于架构或您的偏好。

# url - 使用逗号的主题定位关键字在验证期间拆分为两个关键字

> ID：14866329
> 
> 赞同：1
> 
> 时间：2013-02-14T01:21:57.710
> 
> 标签：url, facebook-graph-api

在搜索关键字和关键字建议时，facebook 会返回一些关键字，例如“ **#Dude，我的车在哪里？** ”，其中包含逗号。在尝试验证它们时，这些关键字被分成两部分。我已经尝试了很多东西，从斜杠到 urlencode，以防止它们分开，但我没有成功。有人有想法么？

下面的 url 部分返回对每个关键字有效，但不适用于`%23Dude%2c+Where%27s+My+Car%3f`

```
search?type=adkeywordvalid&keyword_list=Hey+Dude+Wheres+My+Car,Dude+Where+Is+My+Car,Dude+Wheres+My+Car,%23Dude%2c+Where%27s+My+Car%3f,Dude+Wheres+My+Car+Then,Dude+Where039s+My+Car,%23The+Hangover,%23Harold+%26+Kumar+Go+to+White+Castle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:03:11.337

事实证明，这与其说是一个错误，不如说是一个文档问题。您只需要用 urlencoded 引号和方括号将关键字括起来：

```
["#Dude, Where's My Car?"] 
```

变成

```
%5B%22%23Dude%2C%20Where's%20My%20Car%3F%22%5D 
```

...结果是正确的：

```
{
  "data": [
  {
     "name": "#Dude, Where's My Car?",
     "valid": true,
         "id": "6003406131991"
      }
   ]
} 
```

# ios - 移动位于键盘下方的表单内容

> ID：14866331
> 
> 赞同：0
> 
> 时间：2013-02-14T01:22:24.367
> 
> 标签：ios, uitableview, uikeyboard

我正在使用`UITableView`，其中每个单元格包含一个`UITextField`，并且使用 Apple 官方示例，我希望执行目标，如果它已经隐藏，则将键盘上方的活动字段移动。`UITableView`但是，尽管启用了滚动功能，但表单并没有移动。这是我的相关代码，请帮助我指出似乎缺少/错误的内容：

```
@interface ViewController (){
    UITextField *activeField;
}

- (void)viewDidLoad
{
//....
    objTableView.scrollEnabled=YES;

//....
}

#pragma mark - Keyboard notifications

// Call this method somewhere in your view controller setup code.
- (void)registerForKeyboardNotifications

{

    [[NSNotificationCenter defaultCenter] addObserver:self

                                             selector:@selector(keyboardWasShown:)

                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self

                                             selector:@selector(keyboardWillBeHidden:)

                                                 name:UIKeyboardWillHideNotification object:nil];

}
// Called when the UIKeyboardDidShowNotification is sent.

- (void)keyboardWasShown:(NSNotification*)aNotification

{

    NSDictionary* info = [aNotification userInfo];

    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);

    objTableView.contentInset = contentInsets;

    objTableView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible

    // Your application might not need or want this behavior.

    CGRect aRect = self.view.frame;

    aRect.size.height -= kbSize.height;

    if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {

        CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);

        [objTableView setContentOffset:scrollPoint animated:YES];

    }

}

// Called when the UIKeyboardWillHideNotification is sent

- (void)keyboardWillBeHidden:(NSNotification*)aNotification

{

    UIEdgeInsets contentInsets = UIEdgeInsetsZero;

    objTableView.contentInset = contentInsets;

    objTableView.scrollIndicatorInsets = contentInsets;

}
#pragma mark - UITextFieldDelegate protocol method

- (void)textFieldDidBeginEditing:(UITextField *)textField

{

    activeField = textField;

}
- (void)textFieldDidEndEditing:(UITextField *)textField

{

    activeField = nil;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:51:51.917

试试这个代码：

```
if (!CGRectContainsPoint(aRect, activeField.frame.origin) ) {
    CGRect rc = [activeField bounds];
    rc = [activeField convertRect:rc toView:objTableView];
    [objTableView scrollRectToVisible:rc animated:YES];
} 
```

# c - 为 Mingw 构建/链接 libgcrypt

> ID：14866333
> 
> 赞同：1
> 
> 时间：2013-02-14T01:22:50.247
> 
> 标签：c, linux, mingw, libgcrypt

我想在我的程序中实现 libgcrypt 的一些功能，但它目前在 Windows、OSX 和 Linux（Arch/Xubuntu）上运行，所以我只有在能够为所有三个平台构建它的情况下才能真正做到这一点。在 OSX 和 Linux 上我没有问题。

我从 github 页面获取了[libgcrypt](https://github.com/Chronic-Dev/libgcrypt.git)和[libgpg-error](https://github.com/Chronic-Dev/libgcrypt.git)的源代码，并且我已经在 Linux 和 OSX 上成功构建并运行了这些库，所以我知道我的[测试代码](https://gist.github.com/PaytonTurnage/4949861)是有效的（我现在在 Windows 上遇到了问题带MinGW）。

我在 Xubuntu 上做了以下事情（在 Arch 上类似，但使用 pacman 而不是 apt-get）：

```
sudo apt-get install mingw32 mingw32-runtime mingw32-binutils 
```

获取交叉编译工具链和

```
git clone https://github.com/Chronic-Dev/libgcrypt.git
git clone https://github.com/Chronic-Dev/libgpg-error.git
cd libgpg-error
autoreconf -vfi
./autogen.sh --build-w32
make
sudo make install
cd ../libgcrypt
autoreconf -vfi
./autogen.sh --build-w32
make
sudo make install 
```

构建，它成功地在 home/myuser/w32root/ 中构建了这些文件：

*   libgcrypt.a
*   libgcrypt.def
*   libgcrypt.dll.a
*   libgcrypt.la
*   libgpg-error.dll.a
*   libgpg-error.la
*   包括/

    *   gcrypt.h
    *   gcrypt-module.h
    *   gpg-error.h

我将这些文件带到 Windows，并尝试编译测试代码（本地命名为 main.c）

```
gcc main.c -o main.exe -lgcrypt 
```

但我得到未定义的引用错误，导致我得出的结论是库没有正确链接（最初只使用 libgcrypt.a），所以我查了一些东西，发现有些库需要一组文件，如 .a, .定义，等。工作，所以我把它们都放在 C:\Mingw\lib 中，看看它是否有所作为；它没有。以下在查找要链接的库文件时也保持沉默，但没有解决未定义的引用：

```
gcc main.c -o main.exe -lgcrypt -lgpg-error 
```

所以我不确定从这里去哪里。自述文件不会过多地涉及交叉编译，例如在 Windows 端复制和链接哪些文件。任何指针（我可能错过的文档？）表示赞赏！非常感谢您阅读我的文字墙。

# sql - 从 Rails 中的 belongs_to 和 has_many 关系中的多个表中获取数据

> ID：14866337
> 
> 赞同：0
> 
> 时间：2013-02-14T01:23:23.893
> 
> 标签：sql, ruby-on-rails, ruby, rails-activerecord

我是一名使用 Rails 的 PHP 程序员，但似乎无法理解这个简单的 Active Record 调用。基本上，我有两张桌子，`exchanges`和`markets`. 它们如下：

```
class Market < ActiveRecord::Base
  attr_accessible :date_created, :exchange_id, :market_name, :market_year

  belongs_to :exchange 

end

class Exchange < ActiveRecord::Base
  attr_accessible :date_created, :exchange_name, :exchange_type

  has_many :markets

end 
```

我想`Markets`在同一个调用中检索所有`exchange`关于这些的信息`markets`。

在 PHP 中，这看起来像：`"SELECT * FROM markets, exchanges WHERE markets.id>0"`

我所能做的就是选择所有市场，然后单独查询以查找有关每个市场的交易所信息：

```
market = Market.first
exchange = Exchange.where(:id => market.exchange_id) 
```

必须有一个更简单的方法。这有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:30:02.123

如果您想要所有市场，包括他们的交易所，那么请执行以下操作：

```
@markets = Market.includes(:exchange) 
```

如果您想要一个交易所及其所有市场，请执行以下操作：

```
@exchange = Exchange.includes(:markets).first
@markets = @exchange.markets 
```

如果您需要手动传入 id，请执行以下操作：

```
@markets = Market.where("exchange_id = ?", put_id_here) 
```

[这里有一些关于Rails 中急切加载关联](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)的更多信息。

# ruby-on-rails-3 - Rails Flash 可以正常工作，但现在不行了

> ID：14866338
> 
> 赞同：0
> 
> 时间：2013-02-14T01:23:30.203
> 
> 标签：ruby-on-rails-3

突然 flash 和 params 对我不起作用。甚至我正常的闪存错误/成功消息也不起作用。

这只是一个示例 - 我有以下观点：

```
 <%= link_to 'New Comment', new_comment_path, :class => 'btn btn-primary', :onclick => flash[:worequest_id] = @worequest.id %> 
```

在新的评论表单中：

```
 <% if flash[:worequest_id] != nil %>
 <%= f.hidden_field :worequest_id, :value => flash[:worequest_id] %> 
```

我一直在使用 Flash 在我的 Rails 应用程序中很多地方的视图和表单之间传递数据。现在，他们都没有工作！

我可以设置一些可以关闭 flash 和 params 的配置吗？

我感谢您的帮助！！

更新

我在另一篇文章中读到，有人在使用 FLASH 时遇到“会话问题”。我在哪里寻找会话问题？

更新2

我将以下内容添加到从闪存接收数据的视图中：

```
 <% if flash[:worequest_id].blank?  %>
      <h3>flash blank</h3>
    <% end %> 
```

并且出现了“闪存空白”。

真的 - 这几个月来一直在我的应用程序的许多地方。现在它不工作了！！！！！！！

更新3

我也试过这个：

```
<% flash.keep[:worequest_id] = @worequest.id %> 
```

是否有处理会话的 rails 配置文件？也许我搞砸了一个参数或什么的。

UDPATE4

这是我的 initializers/session_store.rb 文件中唯一的一行：

```
Ndeavor::Application.config.session_store :cookie_store, key: '_ndeavor_session' 
```

更新5

参数也不起作用！！！！

```
params[:worequest_id] 
```

更新6

我刚刚使用 Rails 3.2.11 从头开始​​创建了一个新应用程序，并且 flash 和 params 工作正常。所以，它不是 Rails 的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:20:06.290

我对您要达到的目标/方式感到有些困惑。你看过这个产生的输出吗？

```
<%= link_to 'New Comment', new_comment_path, :class => 'btn btn-primary', :onclick => flash[:worequest_id] = @worequest.id %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:35:54.830

我删除了 jbuilder gem，现在 flash 和 params 正在工作。它必须是我做的，因为我只是在另一个应用程序中尝试了 jbuilder，它并没有破坏 flash。我将尝试找出为什么我使用 gem 会导致问题。

# magento - Magento Home Infinite Scroll 是否存在？

> ID：14866339
> 
> 赞同：0
> 
> 时间：2013-02-14T01:23:31.930
> 
> 标签：magento, webpage, infinite-scroll

我整晚都在寻找一种方法，让我的 Magento HomePage 以无限滚动模式加载它的产品列表，但直到现在我发现这方面的正面信息为零。真的有那么不可能吗？有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:04:16.217

In you Magento homepage, try to get all the products you want first. May be from some category or some other criteria as you desire.

Then, implement Lazy Loading (loads images/products as you scroll down the page) to your homepage.

As an example, here is the paid extension which does this. But you could do this yourself too.

[https://www.themes-mgnto.com/magento-extensions/lazy-load](https://www.themes-mgnto.com/magento-extensions/lazy-load)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T16:14:04.683

是的，它真的很可能而且很容易。您可以从 xthemers.com 试用 Continuous Paging Scroller magento 扩展。

检查扩展以及您正在寻找的演示。

扩展网址：[http ://www.xthemers.com/magento-themes-extensions/magento-extensions/continuous-paging-scroller.html](http://www.xthemers.com/magento-themes-extensions/magento-extensions/continuous-paging-scroller.html)

他们的支持太好了！他们确实为您提供优惠券代码以提供 10% 的折扣。只需与他们的支持和扩展开始聊天就会对您来说更便宜。

# jquery - jQuery为照片库编码上一个和下一个按钮

> ID：14866341
> 
> 赞同：1
> 
> 时间：2013-02-14T01:23:53.847
> 
> 标签：jquery

我正在尝试制作照片库。大照片容器开始为空，当您单击缩略图时，它使用 ID 将全尺寸照片加载到容器中，并且淡入淡出功能确保在淡入淡出之前加载它。画廊的这部分工作正常，但它的上一个和下一个按钮不完全在那里。

我无法让上一个和下一个按钮工作。我想要它，所以它将下一张照片加载到容器中，再次等待它加载然后淡入。这是我到目前为止所拥有的，这是 jsbin 中的演示[http://jsbin.com/esiduz /10/编辑](http://jsbin.com/esiduz/10/edit)

JS

```
function fadeIn(obj) {
    $(obj).fadeIn(1000);
}

$(".photo").click(function() {
    var id = $(this).attr('id');
    $('#preload').prop('src',   
    'http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');

    fadeIn('#' + id);

$("#next").click(function() {  
  var id_a = $(id).next().attr('id');

  $('#preload').prop('src', 'http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');

  fadeIn('#' + id);
  });

  $("#prev").click(function() {  
  var id_b = $(id).prev().attr('id');

  $('#preload').prop('src', 'http://www.klossal.com/klossviolins/instruments/violins/full/' + id + '.jpg');

  fadeIn('#' + id);

});

}); 
```

CSS

```
ul {
  list-style-type: none;
}

.UNH_album li{
  float:left;
  padding:10px;
}

#prev {
  width:50px;
  height:50px;
  background:green;
  float:left;
}

#next {
  width:50px;
  height:50px;
  background:blue;
  float:left;
} 
```

HTML

```
<div id="loading_box_container">
   <div id="loading_box">
        <img id="preload" onload="fadeIn(this)" src="#" style="display:none;"/>
</div>

<div id="nav">
  <div id="prev"></div>
  <div id="next"></div>
  <br style="clear:both;">
</div>

</div>  

<ul class="UNH_album">
  <li id="DanteBalboni_1918" class="photo">
    <img src="http://www.klossal.com/klossviolins/instruments/violins/DanteBalboni_1918.jpg">
</li>
<li id="KarlWurm_1978" class="photo">
    <img src="http://www.klossal.com/klossviolins/instruments/violins/KarlWurm_1978.jpg">
</li>
<li id="KarlGramm_1923" class="photo">
    <img src="http://www.klossal.com/klossviolins/instruments/violins/KarlGramm_1923.jpg">
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:28:13.993

我遇到的问题是变量定义，我需要使用全局变量，它最终看起来像这样：'

答案是全局变量，所以它最终是这样的：

```
$(".photo").click(function() {
    id = $(this).attr('id');
});

$("#next").click(function() {  
      var id_a = $('#' + id).next().attr('id');
      id = id_a;
});

$("#prev").click(function() {  
      var id_b = $('#' + id).prev().attr('id');
      id = id_b;
}); 
```

# php - 重复发生的日历事件

> ID：14866343
> 
> 赞同：9
> 
> 时间：2013-02-14T01:24:09.217
> 
> 标签：php, mysql

我正在尝试构建自己的日历，并且我有一个用于输入事件的表单，如下所示。

我对如何设计 MySQL 表以及如何以可以轻松提取的方式记录这些信息感到困惑？

## ![日历活动表格](../Images/fba9ff3839fe781d5683c428a195ce9e.png)

以下是我的尝试，它有效，但真的很丑，我相信它可以改进：

```
CREATE TABLE events (
  event_id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  title VARCHAR(100) NOT NULL,
  location VARCHAR(100) NOT NULL,
  body TEXT NOT NULL,
  start_ts DATETIME NOT NULL,
  end_ts DATETIME NOT NULL,
  valid ENUM('Y','N') DEFAULT 'Y',
  reoccurring ENUM('Y','N') DEFAULT 'N',
  every ENUM('day','week','month','year',''),
  bymonth ENUM('day','weekday',''),
  end_date DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00',

  PRIMARY KEY (event_id)
);

CREATE TABLE events_byweek (
  event_id INTEGER UNSIGNED NOT NULL,
  weekday TINYINT UNSIGNED NOT NULL,

  FOREIGN KEY (event_id)
    REFERENCES events(event_id)
);

-- returns all dates, reoccurring or otherwise within specified time range
-- by month
SELECT * FROM events WHERE (:year = YEAR(start_ts) AND :month = MONTH(start_ts))
OR (reoccurring = 'Y' AND ((YEAR(end_date) >= :year AND MONTH(end_date) >= :month) OR end_date = '0000-00-00 00:00:00')
AND (every != 'year' OR MONTH(start_ts) = :month)) AND valid = 'Y'

-- by day
SELECT * FROM events WHERE DATE(start_ts) = :date
OR (reoccurring = 'Y' AND (DATE(end_date) >= :date OR end_date = '0000-00-00 00:00:00')
AND (every != 'year' OR MONTH(start_ts) = :month)) AND valid = 'Y'

-- by week
SELECT * FROM events_byweek WHERE event_id = :event_id 
```

我真的很感激任何建议，拜托！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T18:46:14.270

我认为您不需要任何关系数组。

您的数据库表可能是：

```
event_id UINT(10) auto_increment NOT NULL
/* not important fields omitted */
start DATETIME not null
end DATETIME not null
reoccurring ENUM('NO', 'WEEKDAY', 'MONTHDAY', 'MONTH_REL', 'YEARLY') DEFAULT 'NO';
weekdays UINT(1) DEFAULT 0;
until TIMESTAMP DEFAULT NULL 
```

我使用`DATETIME`它是因为它更容易查询（见下文），但实际上没关系。`TIMESTAMP`如果你愿意，你可以保留它。

在`weekdays`一个字节中可以保留一个字节，其位为`2^0`：星期日，`2^1`：星期一等。因此，如果事件每天都再次发生，您会放在那里`127`。

如果`until`是`NULL`，则事件将永远重复。

因为通过SQL很难找到“每月的第三个星期三”是否在特定范围内，我认为没有用户定义的函数即使不是不可能，但很难，代码也不会清晰，我建议你把所有的事件，在 php 中获取它们并在那里过滤掉。

仅加载必要事件（预过滤）的查询将是：

```
SELECT ... FROM events
  WHERE 
     /* We take all non-reoccuring events in period */
    ((reoccurring = 'NO') AND (start >= :start) AND (end <= :end))
  OR
     /* We take some part of reoccurring events */
    ((reoccuring <> 'NO') AND ((start <= :end) OR (end >= :start)) AND ((until >= :start) OR until IS NULL)
  ORDER BY start ASC; 
```

因此，在获取时，您可以测试记录是否满足以下条件：

1.  不会再次发生，所以保留它
2.  在特定的工作日重复发生（例如每周三和每周五） - 检查期间之间是否有这样的工作日，如果至少有一个，则事件保留，否则，将其丢弃
3.  如果重复发生在月日（例如，每 12 月 21 日），请执行相同操作。
4.  如果每月重复发生 - 相对日期（如第三个星期三），请执行相同操作等。

如果您的记录不符合条件，请从数组中删除它，当然不是从数据库 :-)。

一些任务也很容易放入 SQL 查询中。例如，您可以过滤特定月份的重复事件`SELECT ... WHERE ... OR ... (start LIKE '%-:month-:day %)`（假设事件的开始和结束是相同的，如问题中的图片所示）。这是该`DATETIME`字段的一些优点，您可以像搜索字符串一样轻松地搜索它们，因此`%-12-21 %`可以找到包含第 12 个月和第 21 天的所有记录（当然，它们应该始终是两位数）。（优点`TIMESTAMP`是很容易计算日期差异等）

如果事件在每个月重复，使用`... LIKE`%-%-:day %` 等等。

所以最后你需要两个函数返回`boolean`来检查两种情况：

1.  是特定时期的工作日
2.  是该期间每月的第 n 个工作日（请注意，如果第一个失败，则不需要运行第二个）

`foreach`您甚至可以通过使用或其他东西通过蛮力对它们进行编码。

此外，如果字段值为 127，您不需要执行工作日检查 - 所以它每天都会发生。

**编辑于 2013-03-29 - 解释如何使用比特作为工作日**

在该字段`weekdays`中，可以将天保留为位，因为一个（无符号）INT(1) 数字中有 7 天和 8 位。因此，您不必添加更多列，如“occurs_monday”、“occurs_tuesday”等，也不必使用任何关系。我这样提议是因为我认为“每周一”和“每周五”都有可能发生事件。如果没有，请在此处保留一个数字（0=星期日，1=星期一等）。

而且，每天发生的事件也是一周7天发生的事件的特例，所以我不需要列`ENUM`中的另一个值`reoccurring`。

现在如何在 PHP 中使用它？

您只需要测试是否设置了特定工作日的位。您可以使用按位运算符执行此`AND`操作。如果你定义一些常量，它会更简单：

```
define("WEEKDAY_SUNDAY",1); // 2^0
define("WEEKDAY_MONDAY",2); // 2^1
define("WEEKDAY_TUESDAY",4); // 2^2
// ....
define("WEEKDAY_SATURDAY",64); // 2^6

// Does the event occur on Friday, maybe also other weekdays?
if($row['weekdays'] & WEEKDAY_FRIDAY){

// Does the event occurs only on Friday, and no other day?
if($row['weekdays'] == WEEKDAY_FRIDAY){

// Let's make the event occur on Friday and the day(s) that it already occurs
$row['weekdays'] = $row['weekdays'] | WEEKDAY_FRIDAY;

// Make the event occur only on Friday and no other weekday
$row['weekdays'] = WEEKDAY_FRIDAY;

// Let's check if the event occurs today:
if(pow(2,date('w')) & $row['weekdays']){ //... 
```

带有“w”参数的`date`函数返回从 0 到 6 的星期几，所以这就是我使用它的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T16:16:53.153

我以前解决过这个问题，它很复杂。但是，我确实提出了一个我认为有意义的解决方案（借助堆栈溢出）。我最终要做的是创建一个事件表和一个事件重复表。事件表全权负责举办个别事件。事件重复表负责保存重复实例。

然后我要做的是使用事件重复表来生成进入事件表的事件。这允许的是一种显示事件的简化方式。这是因为已经为您完成了重复计算。创建重复时，我会生成两年的事件。如果用户在该两年范围之外导航，那么我会根据需要生成更多事件。

还有一个每天晚上运行的 cron 作业，以确保每次重复生成至少两年的事件。然后，每个重复都需要生成一个直到字段、结束重复、重复类型以及标题、描述、时间等信息。

如果你决定走这条路，并且需要代码示例，一定要告诉我。

# java - 在java中跳过输入行

> ID：14866349
> 
> 赞同：0
> 
> 时间：2013-02-14T01:25:08.970
> 
> 标签：java, input, java.util.scanner, output

所以我有一个 addItem() 方法，我可以在其中将一本书、磁带或 cd 对象添加到我的库存中。为了存储书籍、磁带或 cd 对象，我从用户那里获取对象的标题、作者和价格。但是，当我运行该程序时，它会跳过“请输入标题：”并向右转到“请输入作者：”。然后当我让它显示信息时，标题字段为“空”。

```
static void addItem(int type) {     

    String title;
    String author;
    Double price;

    System.out.println("Please enter the title");
    title = keyboard.nextLine()

    System.out.println("Please enter the author");
    author = keyboard.nextLine();

    System.out.println("Please enter the price");
    price = keyboard.nextDouble();

        if(type == 0){
            Book BookStoreItem;

                BookStoreItem = new Book(title, author, price);

            System.out.println("You've entered:");
            System.out.println("Title: " + BookStoreItem.getTitle());
            System.out.println("Author: " + BookStoreItem.getAuthor());
            System.out.println("Price: " + BookStoreItem.getPrice());
        }

        if(type == 1){
            Tape BookStoreItem;

            BookStoreItem = new Tape(title, author, price);

            System.out.println("You've entered:");
            System.out.println("Title: " + BookStoreItem.getTitle());
            System.out.println("Author: " + BookStoreItem.getAuthor());
            System.out.println("Price: " + BookStoreItem.getPrice());
        }

        if(type == 2){                  
            CD BookStoreItem;

            BookStoreItem = new CD(title, author, price);

            System.out.println("You've entered:");
            System.out.println("Title: " + BookStoreItem.getTitle());
            System.out.println("Author: " + BookStoreItem.getAuthor());
            System.out.println("Price: " + BookStoreItem.getPrice());
        }

}//end of addItem() 
```

这是一个示例输出：

```
Press:
    0    To add a book to the inventory
    1    To add a tape to the inventory
    2    To add a Cd to the inventory
Please enter your choice: 0
Please enter the title:
Please enter the author: John Smith
Please enter the price: 55.50

Title: null
Author: John Smith
Price: 55.5 
```

这是菜单上的更新：

```
static void printMenu() {
    System.out.println("\nPress:");
    System.out.println("\t" + ADD_BOOK + "\tTo add a book to the inventory\n");
    System.out.println("\t" + ADD_TAPE + "\tTo add a tape to the inventory\n");
    System.out.println("\t" + ADD_CD + "\tTo add a CD to the inventory\n");
    System.out.println("\t" + SHOW_ITEM_LIST + "\tTo display a list of available books\n");
    System.out.println("\t" + SEARCH_ITEM + "\tTo search for a specific book\n");
    System.out.println("\t" + QUIT + "\tTo exit\n");
} 
```

并有选择：

```
static void runBookStoreApplication() {
    int userChoice = QUIT;
    String quitMessage = "\nThank you for using the BookStoreApplication!";
    String invalidOptionMessage = "\nInvalid option!"; 

    do{
        printMenu();
        userChoice = getUserChoice();

        switch (userChoice) {
            case ADD_BOOK:
                addItem(0);
                break;
            case ADD_TAPE:
                addItem(1);
            case ADD_CD:
                addItem(2);
            case SHOW_ITEM_LIST:
                showItemList();
                break;
            case SEARCH_ITEM:
                searchItem();
                break;
            case QUIT:
                System.out.println(quitMessage);
                break;
            default:
                System.out.println(invalidOptionMessage);
        }
    } while(userChoice != QUIT);

}//end of runBookStoreApplication 
```

使用 getUserChoice：

```
static int getUserChoice() {
    int choice;

    System.out.print("Please enter your choice: ");
    choice = keyboard.nextInt();

    return choice;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:28:19.800

您没有向我们展示您询问“请输入您的选择：”的代码，但我敢打赌您正在使用`keyboard.nextInt()`或其他东西。此方法不会消耗所有行，只消耗 integer `0`，因此当您`nextLine()`随后调用时，它实际上会立即返回该行的其余部分（即使用空字符串）。

要解决此问题，请`keyboard.nextLine()`在您的方法之前调用。

### 编辑：

既然你已经把你的`getUserChoice()`方法，你可以看到有一个电话`keyboard.nextInt()`，正如我假设的那样。只需`nextLine()`在它之后调用，这样您就可以使用所有线路并且扫描仪已准备好进行下一次输入：

```
static int getUserChoice() {
    int choice;

    System.out.print("Please enter your choice: ");
    choice = keyboard.nextInt(); // consume just the integer

    // consume the rest of the line
    keyboard.nextLine();

    return choice;
} 
```

# ruby-on-rails - 设计登录未完成

> ID：14866353
> 
> 赞同：1
> 
> 时间：2013-02-14T01:25:25.950
> 
> 标签：ruby-on-rails, devise

我使用我的用户模型进行了正常的设计安装。注册和注销工作正常，但登录表单只是重定向回登录页面。

我几乎将所有内容都保留为默认值：

**会话/new.html.erb**

```
<h2>Sign in</h2>

    <%= form_for(resource, :as => resource_name, :url => user_session_path) do |f| %>
      <div><%= f.label :email %><br />
      <%= f.email_field :email %></div><br/>

      <div><%= f.label :password %><br />
      <%= f.password_field :password %></div><br/>

      <% if devise_mapping.rememberable? -%>
        <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
      <% end -%>

      <div><%= f.submit "Sign in" %></div>
    <% end %> 
```

**users_controller.rb**

```
class UsersController < ApplicationController
  # GET /users
  # GET /users.json

  def index
    @users = User.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @users }
    end
  end

  # GET /users/1
  # GET /users/1.json
  def show
    @user = User.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/new
  # GET /users/new.json
  def new
    @user = User.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user }
    end
  end

  # GET /users/1/edit
  def edit
    @user = User.find(params[:id])
  end

  # POST /users
  # POST /users.json
  def create
    @user = User.new(params[:user])

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /users/1
  # PUT /users/1.json
  def update
    @user = User.find(params[:id])

    if params[:user][:password].blank?
      params[:user].delete(:password)
      params[:user].delete(:password_confirmation)
    end

    respond_to do |format|
      if @user.update_attributes(params[:user])
        format.html { redirect_to @user, notice: 'User was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /users/1
  # DELETE /users/1.json
  def destroy
    @user = User.find(params[:id])
    @user.destroy

    respond_to do |format|
      format.html { redirect_to users_url }
      format.json { head :no_content }
    end
  end
end 
```

**路线**

```
 devise_for :users, path_names: {sign_in: "login", sign_out: "logout"}

 resources :users 
```

以下是尝试登录后创建的日志。

```
Started POST "/users/login" for 127.0.0.1 at 2013-02-13 19:18:34 -0600
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oPVQIraxxQ3m8I4hbqy0r/BLIUaESkNDLFhvtoRIf2Q=", "user"=>{"email"=>"MYEMAIL@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 1ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oPVQIraxxQ3m8I4hbqy0r/BLIUaESkNDLFhvtoRIf2Q=", "user"=>{"email"=>"MYEMAIL@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered devise/_links.erb (0.5ms)
  Rendered devise/sessions/new.html.erb within layouts/application (5.5ms)
Completed 200 OK in 108ms (Views: 29.8ms | ActiveRecord: 0.0ms | Solr: 0.0ms) 
```

我尝试将更改添加`form_for`到以下内容：

```
<%= form_for(resource, :as => resource_name, :url => user_session_path(resource_name)) do |f| %> 
```

但这`http://localhost:3000/users/login.user`让我在开发日志中得到了这个：

```
Started POST "/users/login.user" for 127.0.0.1 at 2013-02-13 19:21:36 -0600
Processing by Devise::SessionsController#create as 
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oPVQIraxxQ3m8I4hbqy0r/BLIUaESkNDLFhvtoRIf2Q=", "user"=>{"email"=>"demeuseja@gmail.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 1ms 
```

我确定这是一个错误的输入或我忽略的东西，因为除了登录之外一切正常，但我已经修改了几个小时并且不知道问题是什么。任何正确方向的观点将不胜感激！

谢谢！

**编辑**

这也是我的用户模型：

```
class User < ActiveRecord::Base

  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible :bio, :employer, :looking, :name, :password, :statement, :user_id, :username

  validates :name, :presence => true, :length => { :minimum => 3 }

  has_many :venues

  scope :employer, where(employer:true)
  scope :looking, where(looking:true)
  scope :recent, order("created_at_desc").limit(3)

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T01:00:08.353

所以为了临时解决这个问题，我改变了`sessions/new.html.erb`默认的表单：

```
<h2>Sign in</h2>

<%= form_for(resource, :as => resource_name, :url => user_session_path) do |f| %>
  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div><br/>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div><br/>

  <% if devise_mapping.rememberable? -%>
    <div><%= f.check_box :remember_me %> <%= f.label :remember_me %></div>
  <% end -%>

  <div><%= f.submit "Sign in" %></div>
<% end %> 
```

到以下：

```
<%= form_tag new_user_session_path do %>
    <%= text_field_tag 'user[email]' %>
    <%= password_field_tag 'user[password]' %>
    <%=  submit_tag 'Login' %>
<% end %> 
```

现在登录工作正常，以及注册和注销。我确信我必须回去解决真正的问题，但至少现在为了测试目的它可以工作。如果有人发布实际修复而不是像这样的解决方法，我会接受他们的答案。

感谢您的其他答案！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:44:06.073

也许是我，但我看不到您在第一个示例中对 form_for 所做的更改，但第二个请求路径不正确。

对于您的第一个示例，它正确使用 Devise::SessionController 创建操作来登录用户，但它返回 401 未授权。您提供的控制器是 UserController，它处理用于创建新用户的创建和更新操作。这里不相关。

尝试取出`resource_name`url 上的，使其看起来像：

```
<%= form_for :resource, as: :resource_name, url: user_session_path do |f| %> 
```

这是一个 401 未经授权的错误被返回，因此您可能想尝试重置用户密码，看看是否能先解决它。

**编辑：** 根据您在下面提供的答案，它给了我另一个想法。设计示例可能有点过时，特别是如果您使用登录表单做任何事情（尽管看起来不像）。您可以将这些放入您的`application_helper`其中，这将确保设置资源定义。[您可以在此处](https://github.com/plataformatec/devise/wiki/How-To%3a-Display-a-custom-sign_in-form-anywhere-in-your-app)查看有关它的文档：

```
def resource_name
  :user
end

def resource
  @resource ||= User.new
end

def devise_mapping
   @devise_mapping ||= Devise.mappings[:user]
end 
```

在哪里`User.new`引用您的用户模型定义。另一个想法是完全去除资源，而只使用您的实际模型名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:33:53.090

我没有使用过最新版本的设计，但我大胆猜测：

```
path_names: {sign_in: "login", sign_out: "logout"} 
```

意味着您应该使用`login_path` 而不是`user_session_path`

* * *

再次疯狂猜测您可能已经尝试过......但是，在您的用户控制器中，您是否有“在过滤器验证之前跳过”或类似的？

如果是这样 - 登录操作通常需要跳过该前置过滤器，否则它将无法进入操作本身，因为“您尚未登录”而您仍在尝试登录。

# c++ - 在链表中重载 << 运算符

> ID：14866356
> 
> 赞同：0
> 
> 时间：2013-02-14T01:26:12.220
> 
> 标签：c++

我无法为此创建重载编码。不确定从哪里开始或如何开始。我是 C++ 新手，即使在阅读了此内容之后，也无法理解链表和节点。这就是我到目前为止所拥有的。

```
#include "LList.h"
#include <iostream>

using namespace std;

std::ostream& operator<<(ostream& out, const LList& llist);

int main( )
{
LList a;

a.push_back(  "30" );
a.push_front( "20" );
a.push_back(  "40" );
a.push_front( "10" );
a.push_back(  "50" );

cout << "list a:\n" << a << '\n';

return 0;

}

ostream &operator <<( ostream &out, const LList& llist )
{
LList ::          //not sure what to really put from here

return out;
} 
```

这是屏幕截图![在此处输入图像描述](../Images/59461e45825cc6b9ff5c4a6989c46712.png)

LList.h

```
#ifndef LList_h
#define LList_h

#include <iostream>
#include "node.h"

class LList
{
public:
LList(void);            //constructor
LList(const LList &);   //copy constructor
~LList();           //destructor
LList *next;            //points to next node
void push_back(const string &str);
void push_front(const string &str);
friend ostream& operator<<(ostream& out, const LList& llist);
LList &operator=(const LList &);        

private:
Node *_head;
Node *_tail;
LList *front;       //points to front of the list

};

inline LList::LList(void)
{
cerr << "default constructor";
}

inline void LList::push_back(const string &str)
{
Node *p = new Node(str);
if (_tail == 0)
{
    _head = _tail = p;
}
else
{
    _tail ->next(p);
    _tail = p;
}
if (_head == 0)
{
    _head = _tail = p;
}
else
{
    _head ->next(p);
    _head = p;
}
}

inline void LList::push_front(const string &str)
{
Node *p = new Node(str);
if (_tail == 0)
{
    _head = _tail = p;
}
else
{
    _tail ->next(p);
    _tail = p;
}
if (_head == 0)
{
    _head = _tail = p;
}
else
{
    _head ->next(p);
    _head = p;
}

}

inline LList::~LList( )
{
Node *p = new Node (str);

if ( _head == 0)
{
    _head = p;
}
else
{
Node *q;
//&Node::next;
    for (q = _head; q->next(); q = q -> next)
{
    //loop until we have
    //q pointing to the last node
}
q->next ( p);   //last node points to p
}       //_uead still points to the first node

}

#endif 
```

我不确定我在哪里。我只是在尝试并从教授的一些例子中得到一些想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:38:00.417

您基本上只是`<<`要在重载中打印的元素。例如，假设您有一个`LList::front()`返回第一个元素的成员函数，您可以这样打印：

```
ostream &operator <<( ostream &out, const LList& llist ) {
  return out << llist.front();
} 
```

显然，您希望打印整个列表，而不仅仅是第一个元素（并检查列表是否为空），但以相同的方式完成。这假设您的 存储的元素存在重载`LList`，如果没有，您也必须提供它。

# java - 使用 castor 解组对象列表给出 java.lang.IllegalArgumentException: object is not an instance of declaring class

> ID：14866358
> 
> 赞同：2
> 
> 时间：2013-02-14T01:26:21.007
> 
> 标签：java, xml, unmarshalling, castor

我正在使用 castor 1.3.3-rc1，我一直对这个问题感到困惑。几次阅读手册，我相信我已经在这里完成了所有工作，但我不断得到：

```
java.lang.IllegalArgumentException: object is not an instance of declaring class{File: [not available]; line: 4; column: 43} 
```

解组我的 xml 时。

这些是我的java类：

```
public class ReportConfiguration {
    private List<ColumnMapping> columnMappings;

    // getters and setters omitted
}

public class ColumnMapping {
    private int index;
    private String label;
    private String sumTotal;

    // getters and setters omitted
} 
```

这是我的 xml 数据文件，它将被解组到上面的 java 类中

```
<reportConfiguration>
    <columnMappings>
        <columnMapping index="0" label="Login"/>
        <columnMapping index="1" label="Group"/>
        <columnMapping index="2" label="Profit" sumTotal="yes"/>
    </columnMappings>
</reportConfiguration> 
```

这是我的脚轮映射文件

```
<mapping>
    <class name="my.company.ReportConfiguration">
        <map-to xml="reportConfiguration"/>
        <field name="columnMappings" collection="arraylist" type="my.company.ColumnMapping">
            <bind-xml name="columnMappings"/>
        </field>
    </class>

    <class name="my.company.ColumnMapping">
        <map-to xml="columnMapping"/>
        <field name="index" type="integer" required="true">
            <bind-xml name="index" node="attribute"/>
        </field>
        <field name="label" type="string" required="true">
            <bind-xml name="label" node="attribute"/>
        </field>
        <field name="sumTotal" type="string">
            <bind-xml name="sumTotal" node="attribute"/>
        </field>
    </class>
</mapping> 
```

我使用了 Spring OXM，在我的应用程序上下文中创建了一个 org.springframework.oxm.castor.CastorMarshaller 实例，并注入了一个 Unmarshaller 实例作为依赖项。解组时我只是做这样的事情：

```
ReportConfiguration config = (ReportConfiguration) unmarshaller.unmarshall(new StreamSource(inputStream)); 
```

谁能发现我做错了什么/我还能如何调试这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:44:33.267

啊其实我找到了答案。我需要`container="false"`在脚轮映射上提供属性：

```
<field name="columnMappings" collection="arraylist" type="my.company.ColumnMapping" container="false">
        <bind-xml name="columnMappings"/>
</field> 
```

脚轮手册是这样说的：

> container 指示字段是否应该被视为一个容器，即只有它的字段应该被持久化，而不是包含类本身。在这种情况下，容器属性应设置为 true（仅在 Castor XML 中支持）。

我认为默认值是 true ——在这种情况下 castor 希望找到`<columnMapping>`直接在下面的多个实例`<reportConfiguration>`，而不是包含在 a`<columnMappings>`

可能会显示更有用的错误消息。

# c++ - Why can I std::move a stream rvalue ref into an lvalue ref?

> ID：14866360
> 
> 赞同：6
> 
> 时间：2013-02-14T01:26:33.767
> 
> 标签：c++, c++11, iostream, move-semantics, rvalue-reference

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T01:36:36.643

`basic_ostream` has an overload of `operator<<` that looks like this:

```
template <typename Elem, typename Traits, typename T>
basic_ostream<Elem, Traits>&
    operator<<(basic_ostream<Elem, Traits>&& sink, const T& val)
{
    return sink << val;
} 
```

This is called "Rvalue stream insertion" in the standard, at §27.7.3.9 [ostream.rvalue].

It allows implicit conversion (of sorts) from an rvalue `basic_ostream` to an lvalue. It was introduced specifically to allow [temporary streams to be usable without resorting to tricks](https://stackoverflow.com/questions/5179522/why-does-writing-to-temporary-stream-fail).

* * *

As for why the compile fails when you omit the move:

When `Stream& operator<<(Stream& s, Dummy)` is called *without* the move, `Stream` will be `std::fstream` which inherits from `std::ostream` (i.e. `basic_ostream<char>`).

It will use the `basic_ostream<E, T>& operator<<(basic_ostream<E, T>&, const char*)` overload to insert your string, then try to return the result of that expression *which will be an `ostream`*. You cannot implicitly downcast from `std::ostream&` to `std::fstream&`, so you get an error.

You can fix this by returning `s` on it's own line (where it won't have been implicitly upcasted.)

This isn't a problem *with* move because you go through that rvalue-to-lvalue insertion operator we just discovered first. Inside that function, the stream is a `basic_ostream` and so `Stream` is as well, and the return types will match.

# asp.net-mvc-3 - w3wp.exe 有内存限制吗？

> ID：14866361
> 
> 赞同：2
> 
> 时间：2013-02-14T01:26:39.893
> 
> 标签：asp.net-mvc-3, iis-7, asp.net-mvc-4, asp.net-web-api, memorycache

w3wp.exe 是否有最大内存大小？我的速度高达 2.5-3G，然后似乎崩溃/重置。

根据下面的“ **GIVEN** ”维度，我设置了一些计数器，并注意到 w3wp.exe 将服务于 http 请求，然后随着 w3wp.exe 进程崩溃（更改 pid）重置为 0。结果，REQUESTS_QUEUED 和 ACTIVE_REQUESTS 变大，导致处理延迟，直到 w3wp.exe 可以自行重新启动。它每 3-4 分钟执行一次，因此很可能是由于峰值负载期间系统容量大。但不确定是不是内存问题。

我在我的网络服务器 (IIS) 日志中看到大量警告：

> 为应用程序池“MyApplication”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“1732”。数据字段包含错误号。

结果：客户报告 http 请求的响应时间不定时。

我可以增加此内存限制或重新配置 IIS 以处理增加的负载吗？

**给定**：

*   系统已传给我，因此 IIS 配置等方面可能存在差距。
*   数据库：SQL Server 2008R2
*   Web 服务器：Windows Server 2008R2 Enterprise SP1（64 位，64G RAM）
*   IIS 7.5
*   将 MVC4 Web API 与 MemoryCache 积极地结合使用，将模型和业务对象逐出设置为 2 小时
*   查看了日志，但实际上没有看到任何显着相关的内容
*   一个应用程序池...此服务器上没有运行其他 LOB 应用程序

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T05:22:14.060

实际上，在解决了导致 w3wpe.exe 进程崩溃的内存缓存过度使用的 RC 之后，我可以肯定地说，mvc4 Web api 服务可以从 3G（64 位机器和应用程序池）的基线增长到 20G。至少那是我在驱逐政策开始清理事情之前看到的最后一个级别。占用空间可能有点过多，但应用程序非常快速地返回机器学习目标内容，低于 100 毫秒。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T19:43:34.140

应用程序池是否设置为在 32 位模式下运行？即使您有足够的 RAM，这也可能导致内存问题。在 64 位系统上，32 位进程的内存限制为 4 GB。

# java - BasicClientConnManager 使用无效：连接仍然分配

> ID：14866362
> 
> 赞同：43
> 
> 时间：2013-02-14T01:26:53.003
> 
> 标签：java, rest, apache-httpclient-4.x

我正在调用 REST URL 并尝试测量获取响应所需的时间。

我正在使用`DefaultHttpClient`它来从`REST URL`.

在我下面的程序中，每个线程都将在特定范围内工作。就像每个线程将在之间工作`1 - 100`，第二个线程将在`101 - 200`等之间工作。

所以在我下面的代码中，它第一次正常工作。但是第二次，它第二次在这条线上抛出异常，`httpclient.execute`因为-

```
java.lang.IllegalStateException: Invalid use of BasicClientConnManager: connection still allocated.
Make sure to release the connection before allocating another one. 
```

我在这里做错什么了吗？-

下面是我的代码-

```
class Task implements Runnable {

    private DefaultHttpClient httpclient = new DefaultHttpClient();
    private HttpGet httpGet;
    private HttpResponse response;

    @Override
    public void run() {

        try {

            httpGet = new HttpGet(
                    "http://localhost:8080/service/BEService/v1/get/USERID=10000/profile.ACCOUNT.SERVICE
            httpGet.getRequestLine();

            for (int userId = id; userId < id + noOfTasks; userId++) {

                    long start = System.nanoTime();

                    response = httpclient.execute(httpGet);

                    long end = System.nanoTime() - start;
                }
        } catch (Exception e) {
            LOG.error("Threw a Exception in " + getClass().getSimpleName(), e);
        }
    }
} 
```

**更新代码：-**

如果我这样做是这样的-

```
class Task implements Runnable {

    private DefaultHttpClient httpclient = new DefaultHttpClient();
    private HttpGet httpGet;
    private HttpResponse response;

    @Override
    public void run() {

        try {

            for (int userId = id; userId < id + noOfTasks; userId++) {

                httpGet = new HttpGet("http://localhost:8080/service/BEService/v1/get/USERID=10000/profile.ACCOUNT.SERVICE");
                httpGet.getRequestLine();

                long start = System.nanoTime();

                response = httpclient.execute(httpGet);

                long end = System.nanoTime() - start;

                HttpEntity entity = response.getEntity();
                EntityUtils.consume(entity);
                }
        } catch (Exception e) {
            LOG.error("Threw a Exception in " + getClass().getSimpleName(), e);
        }
    }
} 
```

那么好还是不好？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-02-14T01:31:17.690

> 我在这里做错了什么吗？

是的。如[文档中所述](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e619)：

> BasicClientConnectionManager 是一个简单的连接管理器，一次只维护一个连接。即使这个类是线程安全的，它也应该只被一个执行线程使用。BasicClientConnectionManager 将努力为具有相同路由的后续请求重用连接。但是，如果持久连接的路由与连接请求的路由不匹配，它将关闭现有连接并为给定路由重新打开它。如果已分配连接，则抛出 java.lang.IllegalStateException。
> 
> HttpClient 默认使用 BasicClientConnectionManager。

有关如何使用可以跨多个线程处理请求的[池连接管理器](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e627)，请参阅[“多线程请求执行” 。](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/connmgmt.html#d5e639)

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-25T09:56:48.933

假设您使用的是香草`DefaultHttpClient`（`BasicClientConnectionManager`内部使用），您首先需要使用未完成/最后的响应。

`EntityUtils.consumeQuietly(httpResponse.getEntity());`

否则，您可以`DefaultHttpClient`每次重新分配。

来源：[每次使用后不关闭 DefaultHttpClient() 的解决方法](https://stackoverflow.com/questions/4728683/workaround-to-not-shutdown-defaulthttpclient-each-time-after-usage)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-12T08:16:59.530

这是我使用池连接管理器对 RestTemplate 的配置。它在另外 5 个并发线程中运行良好。

```
<!-- RestTemplate -->
<beans:bean id="restTemplateYT" class="org.springframework.web.client.RestTemplate">
    <beans:constructor-arg ref="httpRequestFactoryYT" />
</beans:bean>

<beans:bean id="httpRequestFactoryYT" class="org.springframework.http.client.HttpComponentsClientHttpRequestFactory"> 
    <beans:constructor-arg>
        <beans:bean class="org.apache.http.impl.client.DefaultHttpClient">
            <beans:constructor-arg>
                <beans:bean class="org.apache.http.impl.conn.PoolingClientConnectionManager"/>
            </beans:constructor-arg>
        </beans:bean>
    </beans:constructor-arg>
    <beans:property name="connectTimeout" value="5000" />
</beans:bean> 
```

春季版：3.1.0

# meteor - 发出 http get 请求以休息 api 并转换为集合

> ID：14866363
> 
> 赞同：0
> 
> 时间：2013-02-14T01:27:08.387
> 
> 标签：meteor

是否可以制作 Meteor.http.get("localhost:4000/api/resource.json") 并将返回的响应用作 Meteor.collection？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T03:15:31.203

当然。假设 JSON 看起来像：

```
{
  'results': [
    {
      'name': 'bob',
      'eyes': 'brown'
    },
    {
      'name': 'sue',
      'eyes': 'blue'
    }
  ]
} 
```

要将其插入集合中，您将执行以下操作：

```
Meteor.http.get("localhost:4000/api/resource.json", function(error, result) {
  if (result.statusCode === 200) {
    for (var i = 0; i < result.data.results.length; i++) {
      MyCollection.insert(result.data.results[i])
    }
  }
  else {
    console.log(result);
  }
}); 
```

# javascript - 在列表中更新后无法让 sencha touch 2 对我的数据进行排序

> ID：14866365
> 
> 赞同：1
> 
> 时间：2013-02-14T01:27:14.343
> 
> 标签：javascript, html, mobile, sencha-touch, sencha-touch-2

我目前正在尝试在 sencha 中显示一个包含商店数据的列表。当我触发 ajax 请求并更新此存储时，更改会反映在列表中（正确的数字已更改），但它不会重新排序列表。该列表在第一次加载时排序，但以后不再排序。有人知道如何在更新后重新排序列表吗？我尝试添加一个侦听器来刷新并从那里重新访问我的商店，但这并没有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:52:18.287

我不确定您是否使用了拉动刷新插件？我必须覆盖刷新方法所做的事情（根据文档）：

```
 plugins: [
        {
            xclass: 'Ext.plugin.PullRefresh',
            pullRefreshText: 'Refresh',
            refreshFn: function() {
                this.getList().setMasked(true);
                this.getList().getStore().load();
            }
        }
    ] 
```

额外的掩码调用用于掩盖列表，因为拉动刷新不会在隐藏自身之前等待数据返回（给人以列表已经更新的错误印象）。

# jquery - 在 PhoneGap 中使用 POST 发送 cookie

> ID：14866373
> 
> 赞同：0
> 
> 时间：2013-02-14T01:28:30.173
> 
> 标签：jquery, json, cordova, jquery-mobile, cookies

我正在使用 PhoneGap 制作移动应用程序。`.ajax()`为了验证用户身份，我使用jQuery中的命令发送数据。这会向我发送一个 cookie 作为回报，我可以访问 cookie 和 cookie 的内容。

下一步是发出另一个 API 请求，这涉及发送我在上一步中收到的 cookie。我正在尝试做这样的事情：

```
$.ajax({
       url:"https://SomeDomain.asmx/getProjectList",
       type:"jsonp",

       xhrFields: {
               withCredentials: true
       },

       beforeSend: function(xhr) {
       xhr.setRequestHeader("Cookie", "ASP.NET_SessionId");
       },

       contentType: "application/json; charset=utf-8",
       data: JSON.stringify(textJson),

       success: function(result){
              alert('success');
       },
       error: function(result){
              console.log(result);
       }

}); 
```

目前，响应是`404 Not Found`错误页面的文本。是因为我附加到请求的 cookie 有问题吗？

PS - 我无权访问服务器端代码。我只是将数据发送到网络服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:53:38.157

以下将有所帮助。

1.  在隐藏字段中设置 cookie 值并使用 jquery 获取这些隐藏值并将其与`$.ajax`调用中的数据一起传递。

2.  如果您不想使用隐藏字段，那么[**jQueryCookies**](https://github.com/carhartl/jquery-cookie)插件将帮助读取 cookie，然后根据需要传递它。

# javascript - 获取对使用 JQuery 调用内联函数的元素的引用

> ID：14866381
> 
> 赞同：0
> 
> 时间：2013-02-14T01:29:51.313
> 
> 标签：javascript, jquery, json

我正在将元素插入到填充有我从 Web 服务检索到的一些数据的 DOM 中。我附加了一个内联单击事件以在调用时调用函数。问题是我没有得到对调用该函数的元素的引用。

附加新元素的代码：

```
$.getJSON("/search?" + $(this).serialize(), function (data) {
  if (data != null) {
    $.each(data, function (index, video) {
      resultItem.append("<li ><a onclick='loadNewVideo(e)' href='play?video=" + video.video_id + "'>" + "<img width='185' src='" + video.defaultImg + "'/>" + "<span class='video_left_title'>" + video.song.song_name + "<h6 class='artist_name'>" + video.artist.artist_name + "</h6></span></a>");
    });
  }
}); 
```

功能：

```
function loadNewVideo (e) {
     e.preventDefault();
     alert($(this).attr("href"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:55:35.250

`a`您可以将所有点击委托给：而不是使用内联事件处理程序`resultItem`：

```
// Call this only once, when resultItem is already in the DOM
// (for example, on a document.ready callback)
resultItem.on('click', 'a', loadNewVideo);

// Proceed with your current code (slightly modified):
function loadNewVideo (e) {
     e.preventDefault();
     alert($(this).attr("href"));
}

$.getJSON ("/search?" + $(this).serialize(),function (data) {
    if (data != null) {
        $.each (data,function (index,video) {
            resultItem.append("<li ><a href='play?video=" + video.video_id +"'>"
               + "<img width='185' src='"+video.defaultImg +"'/>"
               + "<span class='video_left_title'>"+ video.song.song_name
               + "<h6 class='artist_name'>"+video.artist.artist_name
               + "</h6></span></a>");
         });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:47:20.363

内联`onclick`处理程序不通过 jQuery，这就是您无权访问的原因。

您可以将它们留在那里并更改处理程序：

```
function loadNewVideo(e) {
  e.preventDefault();
  alert($(e.target).attr("href"));
} 
```

或者，更优选的是，不要使用内联处理程序。只需给`a`元素一个类`video`（或其他）并使用 jQuery 安装处理程序：

```
...
resultItem.append("<li><a class='video' href=...'")
...

// and elsewhere
$(resultItem).on('click', 'a.video', loadNewVideo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-14T18:29:10.500

jQuery 的事件对象让我能够获取文档所称的“[事件冒泡阶段中的当前 DOM 元素](http://api.jquery.com/event.currentTarget/)”。

```
var originatingElement = event.currentTarget; 
```

# android - 在具有向后兼容性的 ListFragment 上搜索

> ID：14866386
> 
> 赞同：1
> 
> 时间：2013-02-14T01:30:05.297
> 
> 标签：android, fragment, android-support-library

我有一个与Android Dev 站点中显示的[示例](http://developer.android.com/guide/components/loaders.html#example)非常相似的代码。

我希望它向后兼容 API 10，以便支持 API 10+。该示例在 API 11+ 中运行良好。

如果我们删除 OnQueryTextListener 部分，该示例也可以正常工作。当我添加它时它停止工作。

所以我想知道如何在 API 10 上提供类似于此示例的搜索功能。

谢谢。

# java - 在绘画上叠加一个按钮

> ID：14866389
> 
> 赞同：0
> 
> 时间：2013-02-14T01:30:06.337
> 
> 标签：java, swing

有一个窗口，我想在其中放置一个按钮，然后在其下方绘制整个区域。换句话说，按钮应该覆盖一幅画。

```
import java.awt.*;
import javax.swing.*;

class Window
{
    private JFrame frame;
    private JButton launchButton;
    private JPanel pnllaunchButton;
    private JPanel paintingPanel;
    //width and height of client area
    private Rectangle dim;

    //w,h - width and height of the whole window 
    public Window(String title,int w,int h)
    {  
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(0,0);
        frame.setMinimumSize( new Dimension(110,110));
        frame.setSize(w, h);
        frame.setVisible(true);
        frame.setTitle(title);           
        frame.setResizable(false);

        addLaunchButton();
    }        

    private void addLaunchButton()
    {   
        pnllaunchButton = new JPanel();
        launchButton = new JButton("Plot!");
        dim = new Rectangle();

        frame.getContentPane().getBounds(dim);

        pnllaunchButton.setBounds(dim.width-100,dim.height-25,100,25);

        launchButton.setBounds(dim.width-100,dim.height-25,100,25);

        pnllaunchButton.setLayout(null);

        pnllaunchButton.add(launchButton);

        frame.getContentPane().add(pnllaunchButton);          
        frame.getContentPane().setComponentZOrder(pnllaunchButton, new Integer(2));    
    }    
    public void drawCoordinateSystem()
    {      
        paintingPanel = new JPanel();

        paintingPanel.add(new CoordinateSystem());

        frame.getContentPane().add(paintingPanel);
        frame.getContentPane().setComponentZOrder(paintingPanel,new Integer(3));

    }

 }   

class CoordinateSystem extends JPanel 
{
    @Override 
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        Dimension size = this.getSize();

        g.setColor(Color.BLACK);
        g.drawLine(0,size.height/2,size.width, size.height/2);

        g.drawLine(size.width/2, 0, size.width/2, size.height);

    }
}        

public class GC {

    public static void main(String[] args) 
    {
        Window h = new Window("GC",800,600);        
        h.drawCoordinateSystem();    
    }
} 
```

此代码不符合规范。程序创建一个空窗口并输出：

```
 run:
Exception in thread "main" java.lang.IllegalArgumentException: illegal component position
    at java.awt.Container.checkAdding(Container.java:504)
    at java.awt.Container.setComponentZOrder(Container.java:759)
    at Window.addLaunchButton(Window.java:46)
    at Window.<init>(Window.java:26)
    at GC.main(GC.java:10) 
```

你能指出我的错误吗？javadoc 中似乎没有准确描述 [setComponentZOrder()方法。](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#setComponentZOrder(java.awt.Component,%20int))

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:35:05.147

*   重命名您的班级。Window 类已经是标准核心 Java 库的一部分，您的类名可能会导致当前或将来出现问题。
*   不要使用空布局和`setBounds(...)`. 这很糟糕，很糟糕，很糟糕，并且会使您的应用程序的维护或升级变得非常困难。相反，了解并使用布局管理器。
*   考虑将 JLabel 设置为 contentPane，使其不透明，为其提供布局和 ImageIcon，然后将组件添加到其中。
*   ImageIcon 可以保存带有网格的 BufferedImage。

例如：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.GradientPaint;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;

import javax.swing.*;

public class MyWindow {
   private static final int PREF_W = 800;
   private static final int PREF_H = 600;
   private static final Color COLOR0 = Color.red;
   private static final Color COLOR1 = Color.blue;
   private static final float COLOR_REPEAT_DIST = 30f;
   private JLabel backGroundLabel = new JLabel();

   public MyWindow() {
      backGroundLabel.setOpaque(true);
      backGroundLabel.setLayout(new BorderLayout());
      int eb = 15;
      BufferedImage bkgrndImg = createBkgrndImage();
      ImageIcon icon = new ImageIcon(bkgrndImg);
      backGroundLabel.setIcon(icon);

      JPanel bottomPanel = new JPanel();
      bottomPanel.setLayout(new FlowLayout(SwingConstants.RIGHT, eb, eb));
      bottomPanel.setOpaque(false);
      bottomPanel.add(new JButton("Plot"));
      backGroundLabel.add(bottomPanel, BorderLayout.PAGE_END);
   }

   private BufferedImage createBkgrndImage() {
      BufferedImage img = new BufferedImage(PREF_W, PREF_H, BufferedImage.TYPE_INT_ARGB);
      Graphics2D g2 = img.createGraphics();
      g2.setPaint(new GradientPaint(0f, 0f, COLOR0, COLOR_REPEAT_DIST, COLOR_REPEAT_DIST, COLOR1, true));
      g2.fillRect(0, 0, PREF_W, PREF_H);
      g2.dispose();
      return img;
   }

   public JComponent getMainPane() {
      return backGroundLabel;
   }

   private static void createAndShowGui() {
      MyWindow mainPanel = new MyWindow();

      JFrame frame = new JFrame("MyWindow");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel.getMainPane());
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

看起来像这样：
![在此处输入图像描述](../Images/01cec6f94eb09d16380b34b3ca0e4e5b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:38:55.963

将 an`int`而不是 an`Integer`传递给`setComponentZOrder`方法。

```
private void addLaunchButton()
{   
    pnllaunchButton = new JPanel();
    launchButton = new JButton("Plot!");
    dim = new Rectangle();

    frame.getContentPane().getBounds(dim);

    pnllaunchButton.setBounds(dim.width-100,dim.height-25,100,25);

    launchButton.setBounds(dim.width-100,dim.height-25,100,25);

    pnllaunchButton.setLayout(null);

    pnllaunchButton.add(launchButton);

    frame.getContentPane().add(pnllaunchButton);    
    frame.getContentPane().setComponentZOrder(pnllaunchButton, 2);    
} 
```

# python - 如何在没有 ROOT ACCESS 的情况下安装 python 模块 YAML（“easy_install”和“pip”不可用）？

> ID：14866392
> 
> 赞同：2
> 
> 时间：2013-02-14T01:31:15.447
> 
> 标签：python, installation, pyyaml, root-access

我正在尝试运行一个调用服务器上的**yaml 模块**的 python 脚本。我只有在我的主目录中有写权限。服务器安装了 Python 2.7.3。我没有root访问权限。此外，**pip**和**easy_install**都不可用。

我已经下载了包并尝试运行

```
python setup.py install --user 
```

这给出了错误

```
error: can't combine user with with prefix/exec_prefix/home or install_(plat)base 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-07T05:56:23.600

设置和使用 virtualenv 几乎总是一个不错的选择，正如您所指出的，您可以下载[virtualenv.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py)，但是如果不安装它就不会运行（不再）`pip`，因为它会尝试安装轮子。在带有 Python 2.7.6 的 Linux Mint 上，脚本例如抛出：

> OSError: Command /home/ruamel/venv/bin/python -c "import sys, pip; sys...d\"] + sys.argv[1:]))" setuptools wheel failed with error code 1

您可能可以通过使用较旧的`virtualenv.py`.

在其他一些情况下，使用 virtualenv 是不可行的：例如，当系统 python 预先安装了您需要使用的各种库并且无法复制到本地 virtualenv 中时。在这种情况下，您可以下载最新版本的[ruamel.yaml](https://pypi.python.org/pypi/ruamel.yaml)（我是它的作者），它本质上是 PyYAML 功能的超集。当我分叉代码时，我从头开始创建了一个 setup.py，它允许你做

```
python setup.py install --user 
```

从 PyPI 下载的 tar.gz 文件中提取的 `setup.py 没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-12T12:57:16.783

根据安东回答的想法，这些步骤对我有用

```
pip install --user ruamel.yaml 
```

然后在你的脚本中替换

```
import yaml 
```

和：

```
from ruamel.yaml import YAML
yaml=YAML(typ='safe') 
```

# python - 如何替换txt文件中的单词

> ID：14866395
> 
> 赞同：2
> 
> 时间：2013-02-14T01:31:42.530
> 
> 标签：python, python-3.x, text, file-io

好的，所以基本上我正在制作一个涉及高分的简单游戏。如果高于以前的高分，我希望保存高分。这是我的代码。我有一些不同的错误，其中一些涉及我在字符串和整数之间切换的事实以及其他错误，因为我的代码完全错误。我尝试理解问题，但似乎不断出现新错误。

```
hisc = open("Hscore.txt", "r+")
hiscore = hisc.read(3) # 3 because the max score would never reach 1000
highscore = int(hiscore)
if score > highscore:
    hiscore = hiscore.replace(hiscore, score)
    hisc.write(hiscore) 
```

这是我最后一次尝试。这可能是100％错误，我尽了最大努力。我需要的是，每当我运行游戏时，它都会显示我的高分。如果我的分数大于我的高分，则更改文本文件中的高分。然后将其重新加载到游戏中以再次在此代码中执行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:58:51.800

您的代码的问题是您试图调用`hiscore.replace`when `hiscore`is an `int`.

我不确定你为什么首先尝试使用`replace`。这对于用不同的字符串替换字符串的一部分很有用。如果你想替换整个东西，只需分配一个新值：`hiscore = score`.

```
hisc = open("Hscore.txt", "r+")
hiscore = hisc.read(3) # 3 because the max score would never reach 1000
highscore = int(hiscore)
if score > highscore:
    hiscore = score
    hisc.write(hiscore) 
```

但是，您还有第二个问题：您正在将`int`输出写入文件，而您想要的（我认为）是将`int`其精确地表示为 3 个字符的字符串。因此，将最后一行替换为：

```
 hisc.write('{:3}'.format(hiscore)) 
```

同时，以模式打开文件`"r+"`可能不会像您认为的那样。在 Python 3 中，“r+”文件的“读指针”和“写指针”总是在同一个位置。因此，如果您读取 3 个字符，然后写入 3 个字符，则最终会覆盖字符 3-6，或在末尾添加 3 个新字符，而不是根据需要覆盖字符 0-3。您可以通过`seek(0, 0)`在`read`.

最后，你永远`close`不会保存文件，这意味着你写的任何东西都可能永远不会被保存——它可能会留在内存中的缓冲区中，并且永远不会被刷新到实际的磁盘文件中。在这里打开读取，然后关闭，然后打开写入，然后关闭可能更简单，所以你不需要担心所有的`seek`废话。关闭文件最简单的方法是使用`with`语句。

所以，把它们放在一起：

```
with open("Hscore.txt", "r") as hisc:
    hiscore = hisc.read(3) # 3 because the max score would never reach 1000
highscore = int(hiscore)
if score > highscore:
    with open("Hscore.txt", "w") as hisc:
        hisc.write('{:3}'.format(score)) 
```

但这依赖于这样一个事实，即保证 Hscore.txt 存在（在当前工作目录中），并且其中有一个数字。如果某些错误导致您在其中粘贴“x”，或者将文件完全清空，则每次运行时都会出现异常，并且永远无法恢复。所以，你可能想要这样的东西：

```
try:
    with open("Hscore.txt", "r") as hisc:
        hiscore = hisc.read(3) # 3 because the max score would never reach 1000
    highscore = int(hiscore)
except IOError as e:
    print('Warning: couldn't open "Hscore.txt": {}'.format(e))
    highscore = 0
except ValueError as e:
    print('Warning: couldn't convert "{}" from "Hscore.txt" to an integer: {}'.format(hiscore, e))
    highscore = 0 
```

这样，它会打印出一个警告，希望能帮助您找出问题所在，并尝试恢复（假设丢失或损坏的文件意味着高分为 0）。

[`open`](http://docs.python.org/3/library/functions.html#open)文档和[`io`模块概述](http://docs.python.org/3/library/io.html#io-overview)解释了大部分内容，但它并不完全适合初学者。[教程中的读写文件](http://docs.python.org/3/tutorial/inputoutput.html#reading-and-writing-files)可能会更有帮助。

# bash - 使用 DIGEST 命令生成哈希值的 Bash 脚本

> ID：14866400
> 
> 赞同：1
> 
> 时间：2013-02-14T01:32:38.853
> 
> 标签：bash, md5

谁能告诉我如何使用 bash 脚本执行命令`digest -a md5 -v /filename`，并将生成的哈希值存储到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:35:54.740

我不太熟悉`digest`，但这应该可以

```
digest -a md5 -v /filename > digest.log 
```

# c - 查找代码的复杂性

> ID：14866401
> 
> 赞同：0
> 
> 时间：2013-02-14T01:32:48.660
> 
> 标签：c, queue, analysis, time-complexity

考虑以下操作以及队列上的入队和出队操作，其中 k 是全局参数

```
MultiDequeue ( Q )
{
  m=k
  while ( Q is not empty ) and (m > 0 ) 
  {
    Dequeue ( Q )
    m = m −1
  }
} 
```

在最初为空的队列上，一系列 n 个队列操作的最坏情况时间复杂度是多少？(A) Θ (n) (B) Θ (n + k ) (C) Θ (nk )

这不是我的作业，它在我的考试中被问到……n 根据我的说法，它应该是 (n + k)。

它不能是 (n)，因为在 while 循环中有一个 and 条件，所以它同时依赖于 n 和 k....并且由于它不是嵌套循环或某个矩阵，所以它不是 (nk)....

我以这种方式解决了它，如果 while ( Q is not empty ) 而不是 while ( Q is not empty ) and (m > 0 ) 那么时间复杂度将是 (n) 如果 m = 4 它应该是 n+k而不是 nk .....这实际上是一个猜测

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:06:33.160

无论 n Enqueue、Dequeue 还是 MultiDequeue 的顺序是原始 O(1) 操作的数量，Enqueue/Dequeue 都不能超过 2*n。所以它是O（n）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-06T16:34:34.140

队列最初是空的，所以while循环的条件永远不会为真，所以时间复杂度将是Theta(n)。或者其他方式，如果只执行入队和出队操作，那么它也将是 Theta(n)（n 次插入和 n 次删除）。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-10-03T16:36:13.533

答案是 C。在最坏的情况下，您将执行 n 次入队操作。

# javascript - 在 Backbone 中 this.model 是未定义的，为什么？

> ID：14866402
> 
> 赞同：9
> 
> 时间：2013-02-14T01:33:04.840
> 
> 标签：javascript, backbone.js, backbone-views

我到处寻找答案，但对我的发现并不满意。

问题是，我正在做一个来自 Addy Osmani 的教程，以在 Backbone 中制作一个“Todo”应用程序，但是当我查看控制台时，我收到一条错误消息`this.model is undefined`。

我什至尝试了这个 SO answer [Backbone model error shown in console](https://stackoverflow.com/questions/14396586/backbone-model-error-displayed-in-console)，但我仍然得到同样的错误。请告诉我有什么问题。

顺便说一句，什么是`this.model`或`this.collection`？我有一个想法，他们指的是`Backbone.Model`，`Backbone.Collection`但他们是如何工作的？我问这个是因为在另一个教程中`this.collection`并且`this.model.models`也未定义，当我明确定义`Model`and时`Collection`。

非常感谢

JS：

```
//Model
var Todo = Backbone.Model.extend({

  defaults: {
    title: 'Enter title here',
    completed: true
  },

  validate: function(attrs) {
    if (attrs.title === undefined) {
        return 'Remember to enter a title';
    }
  },

  initialize: function() {
    console.log('This model has been initialized');

    this.on('change:title', function() {
        console.log('-Title values for this model have changed');
    });

    this.on('invalid', function(model, error) {
        console.log(error);
    });
  } 
});

//View
var TodoView = Backbone.View.extend({

  el: '#todo',
  tagName: 'li',
  template: _.template($('#todoTemplate').html()),

  events: {
    'dbclick label': 'edit',
    'click .edit': 'updateOnEnter',
    'blur .edit': 'close'
  },

  initialize: function() {
    _.bindAll(this, 'render');
            this.render();

  },

  render: function() {
    this.$el.html(this.template(this.model.toJSON()));
    this.input = this.$('.edit');
    console.log(this.model.toJSON());
    return this;
  },

  edit: function() {
    //do something...
  },

  close: function() {
    //do something...
  },

  updateOnEnter: function() {
    //do something...
  }
});

var todoview = new TodoView();
console.log(todoview.el);

//Collection
var TodoList = Backbone.Collection.extend({
  model: Todo
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T01:37:49.290

您需要实例化一个`Model`or`Collection`并将其传递给您的视图。否则，当在 TodoView 上调用 render 方法时，`this.model`将为 null。

例如，尝试重新排列代码的最后几行，如下所示：

```
//Collection
var TodoList = Backbone.Collection.extend({
  model: Todo
});

var todos = new TodoList();

var todoview = new TodoView({model: todos}); 
```

从那时起，您可以修改 todos（即 a `Collection`）并且您的视图可以监听 todos 的事件并相应地重新渲染。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T01:42:37.217

另一个问题的答案就是您的问题的答案：实例化视图时，您没有将模型传递给视图。

```
var model = new Todo();
var todoview = new TodoView({model: model}); 
```

当您将对象传递给视图的构造函数时，它会查找某些键并将它们直接附加到视图。

您可以通过查看[Backbone 的源代码](http://backbonejs.org/docs/backbone.html)并搜索`viewOptions`.

这就是你如何获得`this.model`并`this.collection`自动附加到视图的`this`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T01:41:42.717

你没有说，但我认为你得到的错误发生在 render() 方法中。

您的问题是您定义了一种新类型的模型（`var Todo = Backbone.Model.extend({...`）但是您从未实例化它，也没有将模型传递给 todoview 构造函数。

所以至少你需要做：

```
var todomodel = new Todo();

var todoview = new TodoView({
    model: todomodel
}); 
```

# ruby-on-rails - 为什么控制器不会向 test.log 输出一些东西？

> ID：14866405
> 
> 赞同：0
> 
> 时间：2013-02-14T01:33:19.647
> 
> 标签：ruby-on-rails, rspec

在使用 RSpec/Guard 运行测试后，我正在从控制器尝试以下操作

```
 Rails.logger.info "My info message"
  Rails.logger.debug "My debugging message"
  Rails.logger.warn "My warning message" 
```

这些都没有出现在 test.log 中。到底是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:35:40.180

您可以按照示例访问记录器。

```
RAILS_DEFAULT_LOGGER.info "My info message" 
```

# c++ - 我正在尝试将 lambda 作为参数传递

> ID：14866406
> 
> 赞同：1
> 
> 时间：2013-02-14T01:33:22.913
> 
> 标签：c++, c++11, lambda, std-function

尝试将 lambda 传递给构造函数：

```
#include <functional>
#include <exception> 

template<typename R>
class Nisse
{
    private:
        Nisse(Nisse const&)             = delete;
        Nisse(Nisse&&)                  = delete;
        Nisse& operator=(Nisse const&)  = delete;
        Nisse& operator=(Nisse&&)       = delete;
    public:
        Nisse(std::function<R> const& func) {}
};

int main()
{
    Nisse<int>   nisse([](){return 5;});
} 
```

当我编译时，我收到一条错误消息：

```
Test.cpp: In function ‘int main()’:
Test.cpp:19:39: error: no matching function for call to ‘Nisse<int>::Nisse(main()::<lambda()>)’
Test.cpp:19:39: note: candidate is:
Test.cpp:14:9: note: Nisse<R>::Nisse(const std::function<R>&) [with R = int]
Test.cpp:14:9: note:   no known conversion for argument 1 from ‘main()::<lambda()>’ to ‘const std::function<int>&’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:37:04.950

模板 arg 的类型`std::function`错误。尝试使用

```
Nisse(std::function<R()> const& func) {} 
```

具体来说，模板参数必须是函数类型，但您传递的只是所需的返回类型。

# php - 嵌套的foreach（）循环php Codeigniter-Php错误

> ID：14866408
> 
> 赞同：0
> 
> 时间：2013-02-14T01:33:51.707
> 
> 标签：php, loops, foreach

我越来越`Message: Invalid argument supplied for foreach()`

在这条线上`foreach($element->action as $URI){ // find action="" attr of <form> element`

我的代码是一个嵌套的 foreach() 循环：

```
 $siteToSearch = file_get_html($prefix.$sss);
                foreach($siteToSearch->find('form') as $element){ // find <form> element
                    foreach($element->action as $URI){ // find action="" attr of <form> element
                        $submit_vars["name"] = "' OR ''='";                     
                        $submit_vars["passwd"] = "' OR ''='";                   
                        $submit_vars["submit"] = "Submit";  
                        $snoopy->submit($URI,$submit_vars);
                        echo "response code: ".$snoopy->response_code."<br>\n";
                        print $snoopy->results;
                    }
   } 
```

我尝试`$URI`在第一行定义为，`$URI = $element->action;`但这似乎并没有解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T19:00:38.907

当参数（这里是，`$element->action`）不是数组（或类似数组的东西）时，您会收到“为 foreach() 提供的参数无效”消息。

我认为这里的问题是你真的根本不需要内部`foreach`循环。`$element->action`似乎代表 HTML 表单元素的“动作”属性。每个表单只有一个动作，它可能在 PHP 中表示为字符串，而不是数组。

取出内部循环并像您提到的那样简单地添加一行`$URI = $element->action`，应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:57:58.657

请检查是否`$element->action`有一些价值请`print_r( $element);`在第一个循环之后使用，并将内循环放入 contion ==>`if($element->action) { }`

代码将如下所示

`$siteToSearch = file_get_html($prefix.$sss); foreach($siteToSearch->find('form') as $element){ // find <form> element if($element->action) { foreach($element->action as $URI){ // find action="" attr of <form> element $submit_vars["name"] = "' OR ''='";
$submit_vars["passwd"] = "' OR ''='";
$submit_vars["submit"] = "Submit";
$snoopy->submit($URI,$submit_vars); echo "response code: ".$snoopy->response_code."<br>\n"; print $snoopy->results; } } }`

# wordpress - 在 Wordpress Android/iOS 应用程序上显示自定义元框

> ID：14866412
> 
> 赞同：0
> 
> 时间：2013-02-14T01:34:23.967
> 
> 标签：wordpress

我有一个在创作页面和帖子时显示自定义元框的插件。有什么方法可以让这些信息出现在 Wordpress 提供的移动应用程序上？我的一般预感是没有的——但我想我会问，以防我遗漏了什么。

# javascript - 使用 d3.max 在 CSV 列中查找最大值

> ID：14866414
> 
> 赞同：5
> 
> 时间：2013-02-14T01:34:41.607
> 
> 标签：javascript, d3.js

在 D3.js 中使用 data().enter().append() 后，只需使用`d.valuename`. 但我想在 CSV 列中找到线性比例的最大值。由于比例之前没有任何数据调用，我真的不确定如何指定从中找到最大值的正确列。

这是我失败的尝试。我用什么代替`d.column1`？

```
d3.csv("file.csv", function (data) {

var x = d3.scale.linear()
    .domain([0, d3.max(d.column1)])
    .range([0, 960]); 
```

**编辑：**

[好的，通过查看类似的示例](http://bl.ocks.org/4062085)，我进一步了解了。我不明白为什么我的代码现在不起作用。

```
 d3.csv("file.csv", function (data) {

 data.forEach(function(d) {
    d.column1 = +d.column1;
 });

 var max = d3.max(data, function(d) { return d.column1; });

 var x = d3.scale.linear()
     .domain([0, max])
     .range([0, 960]); 
```

**编辑＃2：**

如果问题源于数据本身，这里有一个片段。我尝试删除所有引号，并保留除顶行之外的所有引号，但没有任何效果。

```
"product", "price"
"bread",20
"meat",100
"meat, sausage",200 
```

**编辑#3：**

好的，我保证，最后一次编辑。但要绝对清楚；我正在使用 x 比例来确定条形图中条形的宽度：`.attr("width", x)`并且比例返回 NaN。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T02:27:33.047

解释为什么您的代码有效：

```
data.forEach(function(d) {
  d.column1 = +d.column1;
}); 
```

上述语句将所有 column1 值转换为整数（d.column1 前面的 + 号将类型强制为数字）。

一旦您的值都是数字，d3 现在可以将它们作为数字而不是字符串进行比较。这样 10 将大于 9。如果它们是字符串，“9”将大于“10”。

```
var max = d3.max(data, function(d) { return d.column1; }); 
```

上面的行只是取数据数组的最大值。由于您的数据数组由对象组成，因此 d3 无法知道如何将一个对象与另一个对象进行比较。第二个参数是一个函数，它给 d3 一个值给每个对象，以便 d3 可以比较每个对象。在您的情况下，您告诉 d3 使用 column1 来确定最大值。这类似于比较器功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:42:08.543

我才意识到问题出在哪里。难怪我们不能一起解决这个问题。上面的所有代码都很好。只是当我调用 x-scale 来确定我的条的宽度时，我没有指定数据中的哪一列将输入到比例中。我有

```
.attr("width", x) 
```

但现在我将该行更改为：

```
.attr("width", function(d) { return x(d.column1); }) 
```

感谢您的帮助和耐心。

# javascript - 在页面加载时使用 javascript（无 jquery）自行调整窗口大小并居中

> ID：14866418
> 
> 赞同：5
> 
> 时间：2013-02-14T01:35:23.247
> 
> 标签：javascript, resize, window, center

这不是我们通常会做的事情，但我们正在尝试将视频加载到由 clickTag（来自横幅广告）打开的空白窗口中 - 并尽可能让它感觉像一个模态窗口。

**是否可以使用javascript自行调整clickTag打开的空白窗口并将其置于屏幕中央？**

*   我们不能对点击的链接应用任何东西，所以......
*   一切都必须在页面加载时自行运行
*   如果可能，最好不要看到浏览器选项卡和地址栏
*   我们没有加载 jquery
*   浏览器安全警报​​是一个潜在问题吗？

本质上，用户点击观看视频，我们希望他们在观看视频时不会觉得他们去了一个完全不同的网站。

到目前为止，我可以调整窗口大小，但无法弄清楚如何将其居中：

```
<script language="javascript">

  function resizeVideoPage(){
    resizeTo(400,390);
    window.focus();
  }
</script> 

// Then...

<body onload="resizeVideoPage();"></body> 
```

任何指向正确方向的指针都将不胜感激。

干杯

本

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T01:51:55.353

得到它的工作：

```
<script language="javascript">

  function resizeVideoPage(){
    var width = 600;
    var height = 400;
    window.resizeTo(width, height);
    window.moveTo(((screen.width - width) / 2), ((screen.height - height) / 2));      
  }
</script>

// Then...

<body onload="resizeVideoPage();"></body> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T02:15:31.163

我个人建议不要对 Popups 进行 Javascript 窗口操作。（由于弹出窗口阻止程序、Javascript 错误……）覆盖可能会更好。

这将是另一个解决方案。

文件一（链接应指向此帮助程序，打开视频 HTML）

```
<html>
<body>
<script>
    var windowWidth = 400;
    var windowHeight = 200;
    var xPos = (screen.width/2) - (windowWidth/2);
    var yPos = (screen.height/2) - (windowHeight/2);
    window.open("popup.html","POPUP","width=" 
    + windowWidth+",height="+windowHeight +",left="+xPos+",top="+yPos);
</script>
</body>
</html> 
```

文件二（关闭助手的视频）

```
<html>
<body onload="window.opener.close();">
</body>
</html> 
```

# sass - 让背景扩展到容器之外的技巧是什么？

> ID：14866423
> 
> 赞同：0
> 
> 时间：2013-02-14T01:36:13.077
> 
> 标签：sass, susy-compass

我有一个主要内容 div，嵌套了一个内容和侧边栏 div。我的内容部分是背景色，我想一直走到屏幕的左侧，但停在我设置它的列明智的位置，即 8。

```
<div id="main-content">
  <div class="container">
    <div id="content">
    </div>
    <div id="sidebar">
    </div>
  </div>
</div>

#content { 
  @include span-columns(8, 12);
  background-color: rgba(0, 0, 0, .5);
}

#sidebar { @include span-columns(4 omega, 12); } 
```

我尝试了 bleed mixin，给了它 10000px 之类的东西，但这把我所有的内容都弄乱了。我能做些什么来实现我的目标？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:51:06.697

我懂了。我可以想出几种方法来做到这一点，但它们都需要一点创造力。旧的（原始的）Susy 网站实际上使用出血方法创建了这种效果。这将像这样工作：

```
.container { @include container; }

#content {
  @include span-columns(8, 12);
  @include bleed(200%, left);
  background-color: rgba(0, 0, 0, .5);
}

#sidebar { @include span-columns(4 omega, 12); } 
```

你发现这种方法有什么问题？

# highcharts - 我希望在 highcharts 中将空天显示为 0

> ID：14866425
> 
> 赞同：4
> 
> 时间：2013-02-14T01:36:18.703
> 
> 标签：highcharts

我使用折线图/面积图来显示日期时间数据。见例子：http: [//jsfiddle.net/YFERb/](http://jsfiddle.net/YFERb/)

```
$(function () {
    var chart = new Highcharts.Chart({

        chart: {
            renderTo: 'container'
        },

        xAxis: {
            type: 'datetime'
        },
        series: [{
            data: [
                [Date.UTC(2010, 0, 1), 29.9],
                [Date.UTC(2010, 0, 3), 106.4],
                [Date.UTC(2010, 0, 5), 75],
                [Date.UTC(2010, 0, 6), 129.2],
                [Date.UTC(2010, 0, 10), 176.0]
             ]
        }]

    });
}); 
```

但我想将空天填充为 0。请参见示例：http: [//jsfiddle.net/RSPNU/](http://jsfiddle.net/RSPNU/)

所以下面的天被填满 0\. 2010.0.2, 2010.0.4, 2010.0.7, 2010.0.8, 2010.0.9

我在空天插入0。但它很重。

所以我想像第二个例子一样显示，除了插入 0 或空数据。

如果您有其他方法，请回复此。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:27:57.333

为避免积分，您可以将其值设置为`null`.
当你这样做时，你的图表将在零点之间有一个差距，所以你必须设置`connectNulls`为`true`.

```
series: [{
    data: [
        [Date.UTC(2010, 0, 1), 29.9],
        [Date.UTC(2010, 0, 2), null],
        [Date.UTC(2010, 0, 3), 106.4],
        [Date.UTC(2010, 0, 4), null],
        [Date.UTC(2010, 0, 5), 75],
        [Date.UTC(2010, 0, 6), 129.2],
        [Date.UTC(2010, 0, 7), null],
        [Date.UTC(2010, 0, 8), null],
        [Date.UTC(2010, 0, 9), null],
        [Date.UTC(2010, 0, 10), 176.0]
     ]
}],

plotOptions: {
    series: {
        connectNulls: true
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/RSPNU/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T12:05:46.083

一般来说，Highcharts 应该如何知道你想每天输入 0，而不是每小时，或者每秒？如果你知道你的数据是如何被裁剪的，你可以设置`pointInterval`一个`pointStart`系列。然后您可以更新每个应该具有不同值的点，请参见示例：http: [//jsfiddle.net/YFERb/3/](http://jsfiddle.net/YFERb/3/)

# python - 初学者的 python 类构造函数不需要参数

> ID：14866427
> 
> 赞同：1
> 
> 时间：2013-02-14T01:36:25.177
> 
> 标签：python, class

我只是在学习python，似乎犯了一个小错误。有了这段代码，使用构造函数来获取和报错。

“ cit_ref = Patterns(patstring, 3) TypeError: 这个构造函数不带参数”

```
import re

class Patterns:
    """A simple struct to hold our regex """
def __init__(self, pat, bodynumArg=2):
    self.pat = pat
    self.bodynum = bodynumArg
    self.reg = re.compile(self.pat, re.M+re.S)

patstring = r'<((us-)?references-cited)>(.*?)</\1>'
cit_ref = Patterns( patstring, 3) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:39:20.433

您只需要缩进您的`__init__`函数，使其位于`class Patterns`. 像这样：

```
import re

class Patterns:
    """A simple struct to hold our regex """
    def __init__(self, pat, bodynumArg=2):
        self.pat = pat
        self.bodynum = bodynumArg
        self.reg = re.compile(self.pat, re.M+re.S)

patstring = r'<((us-)?references-cited)>(.*?)</\1>'
cit_ref = Patterns( patstring, 3) 
```

在 Python 中，缩进与其他语言中的方括号/大括号的作用基本相同——它们分隔代码，因此您必须小心缩进。

# java - 如何使用 imgscalr 向图像添加文本

> ID：14866430
> 
> 赞同：2
> 
> 时间：2013-02-14T01:36:54.773
> 
> 标签：java, image, imgscalr

我想在图像中添加一些文字。我正在使用 imgscalr。

我正在寻找一些示例或教程。

如果您知道一些更好的基于 Java 的图像库，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:34:14.430

嗯，有趣的建议。我从没想过人们会想要使用 imgscalr 将文本渲染到他们的图像中——但是随着 meme 图像的流行，也许我应该想到这一点:)

由于 imgscalr 在 Java 中处理和返回标准的 BufferedImage，因此您可以自由使用所有现有的 Java2D 渲染库来将文本绘制到图像上。

为此，您需要在正在处理的图像上调用[BufferedImage.getGraphics() ，将其转换为](http://docs.oracle.com/javase/6/docs/api/java/awt/image/BufferedImage.html#getGraphics%28%29)[Graphics2D](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics2D.html)对象，如下所示：

```
Graphics2D g2d = (Graphics2D)myImage.getGraphics(); 
```

然后，您可以使用标准的 Graphics2D 字体渲染方法将文本“绘制”到图像上。例如，类似：

```
g2d.drawString("I haz a hat!", 50, 50); 
```

您还可以使用[Graphics.setFont(...)](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#setFont%28java.awt.Font%29)调用来更改字体的外观。

将来我可能会在 imgscalr 中添加方便的方法来为你做这件事，因为你已经给了我这个想法；）

# mysql - SQL 查询未返回条件集

> ID：14866433
> 
> 赞同：1
> 
> 时间：2013-02-14T01:37:01.740
> 
> 标签：mysql, sql, criteria, where

我正在开发一个花坛种植系统，并编写了一个查询 8 个表的 SQL 语句，以返回适合植物的列表。

**表结构：** [http://pastebin.com/0DUYQis1](http://pastebin.com/0DUYQis1)【从phpmyadmin输出】

**示例数据： http:** [//gyazo.com/13dad0b3370b5053dbcad2a32013a54a](http://gyazo.com/13dad0b3370b5053dbcad2a32013a54a) / [http://gyazo.com/1bd313adb3e8ccd01354c979e69fd059](http://gyazo.com/1bd313adb3e8ccd01354c979e69fd059)

**SQL 语句：**

```
SELECT Plant.Plant_ID, Plant.Plant_Quantity, Plant.Plant_Price, Plant.Plant_Description, Plant.Plant_Latin_Name, Plant.Plant_Common_Name, Plant.Plant_Height, Plant.Plant_Spread, Plant.Plant_Type, Plant.Plant_Family, Plant.Plant_Picture, Plant_Aspect.Plant_Aspect, Plant_Flower_Colour.Plant_Flower_Colour, Plant_Flower_Colour.Plant_Season, Plant_Foliage_Colour.Plant_Foliage_Colour, Plant_Foliage_Colour.Plant_Season, Plant_Moisture.Plant_Moisture, Plant_Soil_PH.Plant_Soil_PH, Plant_Soil_Type.Plant_Soil_Type, Plant_Sun_Type.Plant_Sun_Type 

FROM Plant 

INNER JOIN Plant_Aspect ON Plant.Plant_ID = Plant_Aspect.Plant_ID 
INNER JOIN Plant_Flower_Colour ON Plant.Plant_ID = Plant_Flower_Colour.Plant_ID 
INNER JOIN Plant_Foliage_Colour ON Plant.Plant_ID = Plant_Foliage_Colour.Plant_ID 
INNER JOIN Plant_Moisture ON Plant.Plant_ID = Plant_Moisture.Plant_ID
INNER JOIN Plant_Soil_PH ON Plant.Plant_ID = Plant_Soil_PH.Plant_ID 
INNER JOIN Plant_Soil_Type ON Plant.Plant_ID = Plant_Soil_Type.Plant_ID 
INNER JOIN Plant_Sun_Type ON Plant.Plant_ID = Plant_Sun_Type.Plant_ID 

WHERE Plant_Aspect.Plant_Aspect = 'East-facing'
OR Plant_Aspect.Plant_Aspect = 'Any'
AND Plant_Soil_Type.Plant_Soil_Type = 'Sand' 
OR Plant_Soil_Type.Plant_Soil_Type = 'Any'
AND Plant_Moisture.Plant_Moisture = 'Well-drained' 
OR Plant_Moisture.Plant_Moisture = 'Any'
AND Plant_Soil_PH.Plant_Soil_PH = 'Acid'
OR Plant_Soil_PH.Plant_Soil_PH = 'Any'
AND Plant_Foliage_Colour.Plant_Foliage_Colour = 'Green'
AND Plant_Foliage_Colour.Plant_Season = 'Winter'
OR Plant_Foliage_Colour.Plant_Season = 'Any'
AND Plant_Flower_Colour.Plant_Flower_Colour = 'Orange'
AND Plant_Flower_Colour.Plant_Season = 'Winter'
OR Plant_Flower_Colour.Plant_Season = 'Any'

GROUP BY Plant_ID; 
```

我希望查询只返回那些记录与搜索条件匹配的植物，即。只有那些可以在“冬季”或“任何”季节种植的植物，但它是不应该种植的植物。

例如： http: [//gyazo.com/d2ca989fc6def79854a1d9b11e4bc310](http://gyazo.com/d2ca989fc6def79854a1d9b11e4bc310) -表`Plant_ID: 1`中仅包含一条记录`Plant_Flower_Colour`- 春季期间的深蓝色。为什么这个记录被退回了？就好像尾随`AND`的 s 和`OR`s 被忽略了。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:45:02.043

您需要使用括号对您的 where 条件进行分组。

```
WHERE 
(Plant_Aspect.Plant_Aspect = 'East-facing'
OR Plant_Aspect.Plant_Aspect = 'Any')
AND (Plant_Soil_Type.Plant_Soil_Type = 'Sand' 
OR Plant_Soil_Type.Plant_Soil_Type = 'Any')... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T01:49:10.443

和/或的另一种形式是使用 IN() 子句，它更易于阅读、更易于编辑且不易发生意外。

```
WHERE Plant_Aspect.Plant_Aspect IN( 'East-facing' , 'Any' )
AND Plant_Soil_Type.Plant_Soil_Type IN( 'Sand' , 'Any' )
AND Plant_Moisture.Plant_Moisture IN( 'Well-drained' , 'Any' )
AND Plant_Soil_PH.Plant_Soil_PH IN( 'Acid' , 'Any' )
AND Plant_Foliage_Colour.Plant_Foliage_Colour IN( 'Green' )
AND Plant_Foliage_Colour.Plant_Season IN( 'Winter' , 'Any' )
AND Plant_Flower_Colour.Plant_Flower_Colour IN( 'Orange' )
AND Plant_Flower_Colour.Plant_Season IN( 'Winter' , 'Any' ) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T01:42:08.980

我认为您至少需要在 OR 标准周围加上括号：

```
...
WHERE (Plant_Aspect.Plant_Aspect = 'East-facing'
OR Plant_Aspect.Plant_Aspect = 'Any')
AND (Plant_Soil_Type.Plant_Soil_Type = 'Sand' 
OR Plant_Soil_Type.Plant_Soil_Type = 'Any')
... 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T01:43:57.760

尝试在 OR 比较周围放置括号。

```
WHERE (Plant_Aspect.Plant_Aspect = 'East-facing'
OR Plant_Aspect.Plant_Aspect = 'Any')
AND (Plant_Soil_Type.Plant_Soil_Type = 'Sand' 
OR Plant_Soil_Type.Plant_Soil_Type = 'Any')
AND (Plant_Moisture.Plant_Moisture = 'Well-drained' 
OR Plant_Moisture.Plant_Moisture = 'Any')
AND (Plant_Soil_PH.Plant_Soil_PH = 'Acid'
OR Plant_Soil_PH.Plant_Soil_PH = 'Any')
AND Plant_Foliage_Colour.Plant_Foliage_Colour = 'Green'
AND (Plant_Foliage_Colour.Plant_Season = 'Winter'
OR Plant_Foliage_Colour.Plant_Season = 'Any')
AND Plant_Flower_Colour.Plant_Flower_Colour = 'Orange'
AND (Plant_Flower_Colour.Plant_Season = 'Winter' OR Plant_Flower_Colour.Plant_Season = 'Any') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T01:42:37.537

WHERE 子句中的分组是错误的——对于普通读者来说是模棱两可的。AND 绑定比 OR 更紧密，因此您需要使用括号向 DBMS 表明您的意图：

```
WHERE (Plant_Aspect.Plant_Aspect = 'East-facing'
   OR  Plant_Aspect.Plant_Aspect = 'Any')
  AND (Plant_Soil_Type.Plant_Soil_Type = 'Sand' 
   OR  Plant_Soil_Type.Plant_Soil_Type = 'Any')
  AND (Plant_Moisture.Plant_Moisture = 'Well-drained' 
   OR  Plant_Moisture.Plant_Moisture = 'Any')
  AND (Plant_Soil_PH.Plant_Soil_PH = 'Acid'
   OR  Plant_Soil_PH.Plant_Soil_PH = 'Any')
  AND  Plant_Foliage_Colour.Plant_Foliage_Colour = 'Green'
  AND (Plant_Foliage_Colour.Plant_Season = 'Winter'
   OR  Plant_Foliage_Colour.Plant_Season = 'Any')
  AND  Plant_Flower_Colour.Plant_Flower_Colour = 'Orange'
  AND (Plant_Flower_Colour.Plant_Season = 'Winter'
   OR  Plant_Flower_Colour.Plant_Season = 'Any') 
```

你写的东西被当作你写的：

 ~~~~```
WHERE  Plant_Aspect.Plant_Aspect = 'East-facing'
   OR (Plant_Aspect.Plant_Aspect = 'Any'
  AND  Plant_Soil_Type.Plant_Soil_Type = 'Sand')
   OR (Plant_Soil_Type.Plant_Soil_Type = 'Any'
  AND  Plant_Moisture.Plant_Moisture = 'Well-drained')
   OR (Plant_Moisture.Plant_Moisture = 'Any'
  AND  Plant_Soil_PH.Plant_Soil_PH = 'Acid')
   OR (Plant_Soil_PH.Plant_Soil_PH = 'Any'
  AND  Plant_Foliage_Colour.Plant_Foliage_Colour = 'Green'
  AND  Plant_Foliage_Colour.Plant_Season = 'Winter')
   OR (Plant_Foliage_Colour.Plant_Season = 'Any'
  AND  Plant_Flower_Colour.Plant_Flower_Colour = 'Orange'
  AND  Plant_Flower_Colour.Plant_Season = 'Winter')
   OR  Plant_Flower_Colour.Plant_Season = 'Any' 
```~~~~

# php - 使用select插入mysql else更新？

> ID：14866435
> 
> 赞同：0
> 
> 时间：2013-02-14T01:37:12.090
> 
> 标签：php, mysql

有人可以帮忙吗，我试图让这个脚本在适当的地方从我的 mysql 表中选择值，如果它们存在则更新它们，如果它们不存在则插入它们。

有人可以告诉我哪里出错了谢谢。

```
 <?php
        require_once("session.php"); 
        require_once("functions.php");
        require('_config/connection.php');

        session_start();

        include '_config/connection.php'; 

        $height_ft = $_POST['height_ft'];
        $height_in = $_POST['height_in'];
        $weight_st = $_POST['weight_st'];
        $weight_lb = $_POST['weight_lb'];    

        $result = mysql_query("SELECT height_ft FROM ptb_stats WHERE id=".$_SESSION['user_id']."");

        $result2 = mysql_query("SELECT height_in FROM ptb_stats WHERE id=".$_SESSION['user_id']."");

        $result3 = mysql_query("SELECT weight_st FROM ptb_stats WHERE id=".$_SESSION['user_id']."");

    $result4 = mysql_query("SELECT weight_lb FROM ptb_stats WHERE id=".$_SESSION['user_id']."");

    if( !$result ) { 
       echo "The username you entered does not exist"; 
    } else if( $height_ft != mysql_result( $result, 0 ) ) { 
       echo "";    

         $sql = mysql_query("UPDATE ptb_stats SET height_ft='$height_ft' WHERE id=".$_SESSION['user_id'].""); 

         $sql = mysql_query("UPDATE ptb_stats SET height_in='$height_in' WHERE id=".$_SESSION['user_id'].""); 

         $sql = mysql_query("UPDATE ptb_stats SET weight_st='$weight_st' WHERE id=".$_SESSION['user_id'].""); 

         $sql = mysql_query("UPDATE ptb_stats SET weight_lb='$weight_lb' WHERE id=".$_SESSION['user_id']."");    

         mysql_query("INSERT INTO ptb_stats (user_id, height_ft) VALUES (".$_SESSION['user_id'].", ".$height_ft.")"); 

         mysql_query("INSERT INTO ptb_stats (user_id, height_in) VALUES (".$_SESSION['user_id'].", ".$height_in.")"); 

         mysql_query("INSERT INTO ptb_stats (user_id, weight_st) VALUES (".$_SESSION['user_id'].", ".$weight_st.")");

         mysql_query("INSERT INTO ptb_stats (user_id, weight_lb) VALUES (".$_SESSION['user_id'].", ".$weight_lb.")");
    }

    if( $sql ) { 
        $_SESSION['edit_done']="<div class=\"infobox-edit-done\"><strong>Thank You -</strong> Your Details were changed.</div>"; 
        header("Location: {$_SERVER['HTTP_REFERER']}");
    } else { 
        $_SESSION['edit_done2']="<div class=\"infobox-edit-done\"><strong>Oooops! -</strong> That didn't work. Try again.</div>"; 
        header("Location: {$_SERVER['HTTP_REFERER']}");
    }  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:47:24.780

MySQL 中有一个用于更新或插入的选项`ON DUPLICATE KEY UPDATE`，可以更简洁地解决您的问题。

[http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)

你的查询看起来像：

```
$sql=mysql_query("INSERT INTO ptb_stats (user_id, height_ft) 
VALUES (".mysql_real_escape_string($_SESSION['user_id']).", "
         .mysql_real_escape_string($height_ft).") 
ON DUPLICATE KEY UPDATE user_id = ".mysql_real_escape_string($_SESSION['user_id'])."); 
```

# shell - 从 Shell 脚本 /bin/sh 运行 FFMPEG

> ID：14866436
> 
> 赞同：0
> 
> 时间：2013-02-14T01:37:16.270
> 
> 标签：shell, ffmpeg, sh

我正在尝试设置一个 Shell 脚本以在自动机监视文件夹中工作...

除了 Run Shell Scrip 部分外，一切都有效......

本质上，当文件出现在监视文件夹中时，它会运行调用 FFMPEG 的 shell 脚本，然后将文件移动到存档文件夹以进行安全保存。但是现在自动机告诉我一切正常，但现在正在创建文件。

我将 Shell 设置为 /bin/sh 并将输入设置为参数

这是我的脚本：

```
for f in "$@"
do
name=$(basename "$f")
dir=$(dirname "$f")
ffmpeg -i "$f" -b 250k -strict experimental -deinterlace -vcodec h264 -acodec aac "$dir/mp4/${name%.*}.mp4"
echo "$dir/mp4/${name%.*}.mp4"
done 
```

它确实回显了正确的文件名，但实际上并没有运行 ffmpeg

我已经尝试`-exec`在它之前添加，就像我在一些脚本中看到的那样，但仍然没有......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T01:44:01.153

FFmpeg 在运行时搜索 STDIN。这是为了允许用户点击`q`停止编码，以及其他任务。这可能会导致脚本出现问题。也许解决方法试试这个：

```
# notice --+
#          |
#          v
ffmpeg -nostdin -i "$f" -b 250k -strict experimental -deinterlace \
  -vcodec h264 -acodec aac "$dir/mp4/${name%.*}.mp4" 
```

[OSX上ffmpeg的神秘错误](https://stackoverflow.com/q/33205030/#33205173)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:43:09.847

不确定是不是因为我在 Mac OS X Server 上运行，但我想是的，我必须包含 ffmpeg 的绝对路径...修复了它

```
for f in "$@"
do
name=$(basename "$f")
dir=$(dirname "$f")
/opt/local/bin/ffmpeg -i "$f" -b 250k -strict experimental -deinterlace -vcodec h264 -acodec aac "$dir/mp4/${name%.*}.mp4"
echo "$dir/mp4/${name%.*}.mp4"
done 
```

# java - 在数组列表中插入/追加元素的方法

> ID：14866438
> 
> 赞同：-1
> 
> 时间：2013-02-14T01:37:36.490
> 
> 标签：java, insert, arraylist, append

我不确定我是否正确实现了插入或附加，但我收到了这个错误：

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: -1 at AListInt.insert(AListInt.java:81) // listArray[i+1] = listArray[i]; 在 ListTest.main(ListTest.java:52) // list.insert(i);

我也不能使用 java.util.ArrayList 这是它的代码和类：

班级：

```
public class AListInt {

int [] listArray;
int listSize;
int curr; // current position

AListInt() {
    listSize = 0;

    // note that curr = -1 when listSize = 0
    curr = -1;
    listArray = new int [2];
}

public int getValue () throws DSException {
    return listArray[curr];
      //returns the value of current position
      //throw exception when there are no elements in the list
}

public int length() {
    return listSize;
    //return # of elements in the list
}

public int currPos() {
    return curr;
    //return current position.
}

public void moveToPos ( int pos ) throws DSException {
    curr = pos;
      //move the current position to pos
      //throw exception if pos is not a valid position
}

public void moveToStart () throws DSException {
    curr = 0;
      //move the current position to the start of the list
      //throw exception if no elements are in the list
}

public void moveToEnd () throws DSException {
    curr = listSize;
      //move the current position to the end of the list
      //throw exception if no elements are in the list
}

public void prev () throws DSException {
    if(curr != 0)
    {
        curr--;
    }
      //move current position to the previous element
      //throws exception if the previous position is not legal or
      //    if there are no elements in the list
}

public void next () throws DSException {
    if(curr < listSize)
    {
        curr++;
    }
      //move current position to the next element
      //throws exception if the next position is not legal or
      //    if there are no elements in the list
}

public void insert ( int item ) {

    for(int i = listSize-1; i >= curr; i++)
    {
        listArray[i+1] = listArray[i];

    }
    listArray[curr] = item;
    listSize ++;

    int[]temp = new int[listArray.length*2];
    for(int i = 0; i< listSize; i++)
    {
        temp[i] = listArray[i];
    }
    listArray = temp;

    // inserts item to the current position
    // if not enough memory, double the size of listArray
}

public void append ( int item ) {
    listArray[listSize++] = item;

    int[]temp = new int[listArray.length*2];
    for(int i = 0; i< listSize; i++)
    {
        temp[i] = listArray[i];
        listArray = temp;
    }
    // inserts item to the end of the list
    // if not enough memory, double the size of listArray       
}

public int remove () throws DSException {
     if((curr < 0)||(curr > listSize))
     {
            return -1;
     }

 int item;
 item = listArray[curr];

    for(int i = curr; i < listSize - 1; i++)
    {
        listArray[i] = listArray[i+1];
    }
    listSize --;
    return item;
      //removes the element at the current position
      //returns the removed element

}

public void clear() {
    listSize = 0;
    curr = -1;
    //reset size.  Set current position to be -1
}

public boolean find ( int val ) {
    for(int i = 0; i > listSize; i ++)
    {
        if(listArray[i] == val)
        {
            return true;
        }
    }
    return false;
  //searches for val in the list
    //returns true if found and false if not found
}

public void print () {
    System.out.print("<");
    for(int i = 0; i < listSize; i++)
    {
        System.out.print(listArray[i]);

        if(listSize == -1)
        {
            System.out.print("-1");
        }
    }
    System.out.print(">");
    //outprint the list
} 
```

}

例外：

```
 public class DSException extends Exception {
  public DSException() {
  }

  public DSException(String msg) {
    super(msg);
  }
} 
```

主要的：

```
public class ListTest {

public static void main ( String[] args ) {

try {
    AListInt list = new AListInt();

    list.print();

    // test length()
    System.out.println ( list.length() );

    // test currPos()
    System.out.println ( list.currPos() );

    // insert some numbers
    for ( int i = 0; i < 4; i++ ) {
    list.append(i);
    list.print();
    }

    list.moveToPos(0);
    list.print();

    list.moveToEnd();
    list.print();

    // test getValue()                                                                                                                                                     
    System.out.println ( list.getValue() );

    System.out.println ( "remove: " + list.remove() );
    list.print();

    list.moveToStart();
    list.print();

    System.out.println ( "remove: " + list.remove() );
    list.print();

    list.clear();
    list.print();

    list.clear();
    list.print();

    System.out.println ( "find 0 : " + list.find ( 0 ) );

    for ( int i = 0; i < 4; i++ ) {
    list.insert(i);
    list.print();
    }

    for ( int i = 0; i < 5; i++ ) {
    System.out.println ( "find " + i + " : " + list.find ( i ) );
    list.print();
    }

    list.next();
    list.print();

    list.insert ( -9 );
    list.print();

    list.append ( -2 );
    list.print();

    list.moveToEnd();
    list.insert ( -1 );
    list.print();

    System.out.println ( "remove: " + list.remove() );
    list.print();

} catch ( DSException e ) {
    e.printStackTrace();
}

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:48:13.343

你在阵列外阅读。在

```
for(int i = listSize-1; i >= curr; i++)
{
    listArray[i+1] = listArray[i];

} 
```

if `i = listSize -1`, then `listArray[i+1]`is `listArray[listSize]`，这是超出范围的，因为数组从`0`到`length -1`

*编辑：*

但是由于`listArray`初始大小为 2，并且您在每次插入时将大小加倍，您就可以逃脱。但是，在第一次插入时`curr`is `-1`，并且由于终止是`i >= curr`，因此将进入循环并且您将阅读`listArray[-1]` (Out of bounds)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T04:24:56.500

它必须是 listArray[i]=listArray[i-1]

因为您正在将 listArray[i-1] 的位置移动到 listArray[i] 的位置

# .htaccess - htaccess 从子目录重定向到备用域

> ID：14866443
> 
> 赞同：0
> 
> 时间：2013-02-14T01:38:00.760
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试使用 htaccess 完成一项简单的任务，但我对 htaccess 没有任何经验。基本上，这就是我想要实现的目标。

我有一个带有托管帐户的网站 (www.example1.com)。现在，我正在启动第二个网站 (www.example2.com)，它使用相同的托管帐户。

www.example2.com 的文件实际上存在于 www.example1.com/example2 中。

正如您所料，我想要实现的是，当用户编写 www.example1.com/example2 时，他们会被重定向到 www.example2.com。

这是我尝试过的

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{HTTP_HOST} ^/example1.com/
RewriteRule !^/example2.com/ 
```

并且...

```
Order Deny,Allow
Deny from all
Allow from example2.com 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:58:36.287

```
RewriteCond %{HTTP_HOST} ^(www\.)?example1\.com$ [NC]
RewriteRule ^example2(.*) http://www.example2.com$1 [R=301, L] 
```

First line - check if the host matches example1.com with or without the "www.".

Second line - check if the path starts with example2 and, if it does, redirect to www.example2.com, maintaining any existing path after example2.

# ruby-on-rails - 活动记录和时区

> ID：14866446
> 
> 赞同：2
> 
> 时间：2013-02-14T01:38:14.033
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, timezone, rails-activerecord

这是情况。我们有一个在 heroku 上运行的 rails 3.2 应用程序，开发人员遍布世界各地。我们希望对所有事物都采用 UTC 标准化。我们的团队甚至在我们自己之间也使用 UTC（例如，在计划会议时间时）。我们希望应用程序也能做到这一点。我们可以将事物转换回人们的本地时区，以便稍后显示。

问题是，当我将某些内容保存到数据库中（例如，在论坛中创建新帖子）时，它认为我的本地时间（由我的计算机报告）是 UTC，并将其保存为 UTC。

例如，澳大利亚阳光明媚的墨尔本 (UTC+11) 是 2 月 14 日星期四的午餐时间。我发了一个新帖子，然后在控制台中查看：

```
1.9.3p194 :009 > p = Post.first
 => #<Post id: 12, author_id: 1, subject: "Another post ", body: "a very recent one!", created_at: "2013-02-14 12:13:53", updated_at: "2013-02-14 12:13:53", slug: "test1-20130214-another-post", forum_id: 1> 
1.9.3p194 :010 > p.created_at
 => Thu, 14 Feb 2013 12:13:53 UTC +00:00 
```

如您所见， created_at 时间戳保存为 14 日的午餐时间，并标记为该时间*IN UTC*。我真正想要的是它查看当地时间，注意我在墨尔本，并通过（在这种情况下）减去 11 小时转换为 UTC。

现在，我知道我可以在 config/application.rb 中编辑这些行：

```
config.time_zone = 'UTC'
config.active_record.default_timezone = 'UTC' 
```

（我认为将 config.time_zone 更改为 'Australia/Melbourne' 会解决这个问题？可能吗？）

但是，如果我将其中任何一个更改为“澳大利亚/墨尔本”（或其他），那么我们部署的应用程序（在 Heroku 上）以及我在马里兰州、俄勒冈州和格拉斯哥的联合开发人员会发生什么情况？我们都必须单独设定我们的时间吗？也许我们应该通过环境变量来做到这一点？还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:50:43.560

好的，所以看起来这为我们修复了它：

```
config.time_zone = 'UTC'
config.active_record.default_timezone = :local 
```

我们有点怀疑，并且会等着看我们在每个人的时区部署和/或运行我们的测试套件时情况如何，但现在它似乎工作......至少在墨尔本;）

# ios - 圆化 UIView 的一些角并圆化视图层的边框

> ID：14866450
> 
> 赞同：15
> 
> 时间：2013-02-14T01:38:38.797
> 
> 标签：ios, objective-c, calayer

我正在尝试将 UIView 的底部两个角变圆，并让图层的边框也显示为圆角。我目前正在做：

```
UIRectCorners corners = UIRectCornerBottomLeft | UIRectCornerBottomRight;
CGSize radii = CGSizeMake(kThisViewCornerRadius, kThisViewCornerRadius);
UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:myView.bounds
                                           byRoundingCorners:corners
                                                 cornerRadii:radii];

CAShapeLayer *maskLayer = [CAShapeLayer layer];
[maskLayer setPath:path.CGPath];
myView.layer.mask = maskLayer; 
```

这适用于普通视图。但是，`myView`的图层有其`borderColor`和`borderWidth`设置，并且从屏幕截图中可以看出，图层的边框没有变圆：

![问题截图](../Images/2d434c95fc990f85299ebb5979a34986.png)

我还尝试将 UIView 子类化并`[CAShapeLayer layer]`从中返回`+[Class layerClass]`，并将视图的图层设置*为*形状图层，但边框最终位于视图的子视图下方。

是否可以圆化视图的某些角，圆化视图图层的边框，并将子视图剪辑到图层边框下方？

请注意，这*不是*关于如何圆一些角而不是其他角，而是如何使笔划正确运行。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-14T05:19:32.587

[感谢David Rönnqvist](https://stackoverflow.com/users/608157/david-ronnqvist)的评论，我找到了一种新的思考方式。

我试图在一层中进行圆角和笔画。相反，我将它分成两层：一层用来遮罩视图的图层以圆角，另一层在视图中添加描边。

```
UIView *containerView = [[UIView alloc] initWithFrame:someFrame];

UIRectCorners corners = UIRectCornerBottomLeft | UIRectCornerBottomRight;
CGSize radii = CGSizeMake(kThisViewCornerRadius, kThisViewCornerRadius);

UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:myView.bounds
                                           byRoundingCorners:corners
                                                 cornerRadii:radii];

// Mask the container view’s layer to round the corners.
CAShapeLayer *cornerMaskLayer = [CAShapeLayer layer];
[cornerMaskLayer setPath:path.CGPath];
containerView.layer.mask = cornerMaskLayer;

// Make a transparent, stroked layer which will dispay the stroke.
CAShapeLayer *strokeLayer = [CAShapeLayer layer];
strokeLayer.path = path.CGPath;
strokeLayer.fillColor = [UIColor clearColor].CGColor;
strokeLayer.strokeColor = [UIColor redColor].CGColor;
strokeLayer.lineWidth = 2; // the stroke splits the width evenly inside and outside,
                           // but the outside part will be clipped by the containerView’s mask.

// Transparent view that will contain the stroke layer
UIView *strokeView = [[UIView alloc] initWithFrame:containerView.bounds];
strokeView.userInteractionEnabled = NO; // in case your container view contains controls
[strokeView.layer addSublayer:strokeLayer];

// configure and add any subviews to the container view

// stroke view goes in last, above all the subviews
[containerView addSubview:strokeView]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-13T12:48:41.197

Zev Eisenberg 的答案是正确的。

虽然我更喜欢：

```
[self.layer addSublayer:strokeLayer]; 
```

而不是创建和添加子视图：

```
CGSize radii = CGSizeMake(radius, radius);

UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:self.bounds
                                           byRoundingCorners:corners
                                                 cornerRadii:radii];

// Mask the container view’s layer to round the corners.
CAShapeLayer *cornerMaskLayer = [CAShapeLayer layer];
[cornerMaskLayer setPath:path.CGPath];
self.layer.mask = cornerMaskLayer;

// Make a transparent, stroked layer which will dispay the stroke.
CAShapeLayer *strokeLayer = [CAShapeLayer layer];
strokeLayer.path = path.CGPath;
strokeLayer.fillColor = [UIColor clearColor].CGColor;
strokeLayer.strokeColor = color.CGColor;
strokeLayer.lineWidth = 2; // the stroke splits the width evenly inside and outside,
// but the outside part will be clipped by the containerView’s mask.

[self.layer addSublayer:strokeLayer]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T12:03:56.020

这是小代码。Alloc 初始化一个视图并发送到此方法以获取圆角。您可以选择绕过您想要的任何角落。也给阴影描边颜色。

```
 -(void) setMaskTo:(UIView*)view byRoundingCorners:(UIRectCorner)corners withColor:  (UIColor*) color
{
 UIBezierPath* rounded = [UIBezierPath bezierPathWithRoundedRect:view.bounds  byRoundingCorners:corners cornerRadii:CGSizeMake(9.0, 9.0)];

CAShapeLayer* shape = [[[CAShapeLayer alloc] init] autorelease];
[shape setPath:rounded.CGPath];
shape.strokeColor = [[UIColor grayColor] CGColor];

view.backgroundColor=color;
view.layer.mask = shape;
} 
```

像这样调用方法。

```
[self setMaskTo:ABCView byRoundingCorners:UIRectCornerAllCorners withColor:[UIColor greenColor]]; 
```

# eclipse - Eclipse : Eclipse Java 远程调试

> ID：14866458
> 
> 赞同：1
> 
> 时间：2013-02-14T01:39:36.423
> 
> 标签：eclipse, remote-debugging

我有一个关于 Eclipse IDE、Java Remote Debugging 的问题。

如果我获得了应用程序的所有源代码并在 Eclipse 远程调试配置下远程配置了主机、端口，断点会自动启动吗？

例如，如果我在 Eclipse IDE 中获得了所有 Citi Bank 源代码，并且在远程调试配置中提到了主机和端口（生产环境），如果满足特定条件，是否会启用断点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:42:46.453

在服务器上启动 JVM 以侦听特定端口时，通常需要添加调试选项，同样，在 Eclipse 中使用相同的端口。请参阅这个先前的问题 -[远程调试](https://stackoverflow.com/questions/975271/remote-debugging-a-java-application)

# jquery - 通过单击按钮删除错误的输入字段

> ID：14866460
> 
> 赞同：0
> 
> 时间：2013-02-14T01:39:42.657
> 
> 标签：jquery

我编写的一些 jQuery 代码有问题。

似乎**Page 2**上的输入字段正在被一个按钮删除，该按钮旨在删除**Page 1**上的输入字段。我该如何解决这个问题？这是[我](http://jsfiddle.net/psL2s/)在 jsFiddle 上的代码 - 尝试在**第 2 页**上添加新的输入字段，然后使用**第 1 页**上的删除按钮。有趣的是，它似乎无法反过来工作。这是我的代码：

```
$(document).ready(function () {
    $('#add_roomFac').click(function () {
        var $objs = $('select[name*=roomFac]');
        var n = $objs.size() + 1;
        var $obj = $objs.first().clone();
        $obj.attr('name', 'roomFac' + n).attr('id', 'roomFac' + n);
        $obj.appendTo($('#search_fac'));
    });

    $('#remove_roomFac').click(function () {
        var $objs = $('select[name*=roomFac]');
        if ($objs.size() > 1) {
            $objs.last().remove();
        }
    });

    $('#addFac').click(function () {
        var $objs = $('select[name*=request_roomFac]');
        var n = $objs.size() + 1;
        var $obj = $objs.first().clone();
        $obj.attr('name', 'request_roomFac' + n).attr('id', 'research_roomFac' + n);
        $obj.appendTo($('#request_fac'));
    });
    $('#removeFac').click(function () {
        var $objs = $('select[name*=request_roomFac]');
        if ($objs.size() > 1) {
            $objs.last().remove();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:55:14.910

当您使用 ('select[name*=roomFac]'); 您选择两个下拉菜单，因为您使用的是包含选择器。尝试使用带有选择器的开头 ('select[name^=roomFac]');

[http://jsfiddle.net/eyecode/psL2s/2/][1]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:55:49.890

您需要在选择器中有更多上下文才能正确定位元素：

```
$('#remove_roomFac').click(function () {
    var $objs = $('#search_fac select[name*=roomFac]');
    if ($objs.size() > 1) {
        $objs.last().remove();
    }
});

/////////////////////////////////////////////////////

$('#removeFac').click(function () {
    var $objs = $('#request_fac select[name*=request_roomFac]');
    if ($objs.size() > 1) {
        $objs.last().remove();
    }
}); 
```

[在这里](http://jsfiddle.net/Ema59/1/)工作小提琴

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:03:18.840

您需要每页一个 div 来确定您的选择器相对于单击的元素的范围。$(this) 是单击的按钮， .closest 然后向上查找父页面，然后再向下查找该页面上的选择框：

[http://jsfiddle.net/psL2s/11/](http://jsfiddle.net/psL2s/11/)

```
$('#remove_roomFac').click(function () {
    var $objs = $(this).closest('.page').find('select[name*=roomFac] option');
    if ($objs.size() > 1) {
        $objs.last().remove();
    }
}); 
```

您可以将事件更改为使其适用于两个按钮并将此类放在按钮上： `$('.remove_option').click(function () {`

这允许您通过向元素添加类来创建行为，而不是在 JS 中硬编码 ID。

# ios - 奇怪的 UICollectionView 选择行为

> ID：14866461
> 
> 赞同：10
> 
> 时间：2013-02-14T01:40:48.383
> 
> 标签：ios, objective-c, xcode, uistoryboard, uicollectionview

我正在使用 a`UICollectionView`来显示菜单，并且正在以非常奇怪的方式选择项目。

这是我填充它们的静态数据：

```
self.menuItems = @[@{@"text" : @"First", @"image" : @"180-stickynote.png"},
                   @{@"text" : @"Second", @"image" : @"180-stickynote.png"},
                   @{@"text" : @"Third", @"image" : @"180-stickynote.png"},
                   @{@"text" : @"Fourth", @"image" : @"180-stickynote.png"},
                   @{@"text" : @"Fifth", @"image" : @"180-stickynote.png"},
                   @{@"text" : @"Sixth", @"image" : @"180-stickynote.png"}]; 
```

还有单元格提供者，其中自定义子类只是附加到原型单元格并具有 a`UILabel`和 a `UIImageView`：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{

    CUMenuCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"MenuCell" forIndexPath:indexPath];

    NSDictionary *cellInfo = [self.menuItems objectAtIndex:indexPath.row];

    cell.imageView.image = [UIImage imageNamed:[cellInfo valueForKey:@"image"]];

    cell.label.text = [cellInfo valueForKey:@"text"];

    return cell;
} 
```

这是 do select row 方法，记录标题和项目的行（它们都在第 0 节中）：

```
- (void)collectionView:(UICollectionView *)collectionView didDeselectItemAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"%@: %d", [[self.menuItems objectAtIndex:indexPath.row] valueForKey:@"text"], indexPath.row);
} 
```

最后，我的菜单截图：

![在此处输入图像描述](../Images/3f060cc0aee5e8d00e19977f8b3c71b7.png)

这是我从第一到第六选择项目，然后从第六到第一（第一、第二、第三、第四、第五、第六、第六、第五、第四、第三、第二、第一）选择项目时的日志（总共点击 12 次，请注意，第一次点击甚至没有注册，第二次点击也没有注册）：

```
------------------------------------- FIRST TAP ON FIRST HERE
2013-02-13 19:38:37.343 App[1383:c07] First: 0  // second tap, on Second
2013-02-13 19:38:38.095 App[1383:c07] Second: 1 // third tap, on Third
2013-02-13 19:38:38.678 App[1383:c07] Third: 2  // fourth tap, on Fourth
2013-02-13 19:38:39.375 App[1383:c07] Fourth: 3 // fifth tap, on Fifth
2013-02-13 19:38:40.167 App[1383:c07] Fifth: 4  // so on
2013-02-13 19:38:41.751 App[1383:c07] Sixth: 5
------------------------------------- SECOND TAP ON SIXTH HERE
2013-02-13 19:38:42.654 App[1383:c07] Fifth: 4
2013-02-13 19:38:43.318 App[1383:c07] Fourth: 3
2013-02-13 19:38:44.495 App[1383:c07] Third: 2
2013-02-13 19:38:45.071 App[1383:c07] Second: 1 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-14T01:52:10.780

那是因为您使用的是`didDeselectItemAtIndexPath:`method 而不是`didSelectItemAtIndexPath:`. 一个容易犯的错误，特别是如果您在输入代码时使用代码完成。

# html - 在导航中突出显示活动选项卡

> ID：14866463
> 
> 赞同：1
> 
> 时间：2013-02-14T01:41:05.860
> 
> 标签：html, css

我正在尝试突出显示我的选项卡式导航站点中的活动选项卡。这是标签的 html 片段。

```
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Title here</title>
<link href="style.css" media="all" rel="stylesheet" type="text/css" />
<style type="text/css">
.auto-style1 {
        font-size: medium;
}
</style>
</head>

<body>

<div id="container">
     <div id="navigation">                    
        <ul>
           <li class="link"><a href="default.html" title="Product">Home</a></li>
           <li class="link"><a href="Research.html" title="Product">Research</a></li>    
           <li class="link"><a href="Teaching.html" title="Progress">Teaching</a></li>
           <li class="link"><a href="about.html" title="About">Contact</a></li>
           <li class="link"><a href="CV.html" title="CV">CV</a></li>
        </ul>
     </div> 
```

**这是我的样式表**

```
/* --------------------------------------------- RESET */
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, 
a, abbr, acronym, address, big, cite, code, del, dfn, em, font, img, ins, kbd, q, s, samp, 
small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, 
form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td 
{ margin: 0; padding: 0; border: 0; outline: 0; font-size: 100%; vertical-align: baseline; background: transparent; text-decoration: none; font-weight: normal;}
body { margin: 0pt;}
ol, ul { list-style-type: none; }
blockquote, q { quotes: none; }
blockquote:before, blockquote:after, q:before, q:after { content: ''; content: none; }
:focus { outline: 0; }
ins { text-decoration: none; }
del { text-decoration: line-through; }
/* tables still need 'cellspacing="0"' in the markup */
table { border-collapse: collapse; border-spacing: 0; }

/* --------------------------------------------- STRUCTURE STYLES */
body {
        font-family: Georgia, "Times New Roman", Times, serif;
        background: url('bg.jpg') repeat-x top left #f0f0f0;
}

#container {
        width: 960px;
        height: auto;
        margin: 0 auto 0 auto;
}

#header {
        color: #fff;
        font-size: .9em;
        width: 190px;
        height: 40px;
        float: left;
        margin-right: 2px;
}

   /* --------------------------------------------- NAVIGATION */
#navigation {
        padding-top: 15px;
        width: 960px;
        float: left;
}

#navigation .link {
        background: #f0f0f0;
        float: left;
        text-align:center;
        font-size:0.5cm
  }

#navigation .link:hover {
        background: #92c19b;
}

#navigation .link:focus{
        background:silver;      
  }
#navigation .link:active{ 
background:silver; 
} 

#navigation li a {
        padding-top: 15px;
        padding-left: 15px;
        width: 176px;
        height: 45px;
        margin-bottom: 1px;
        border-left: #fff solid 1px;
        color: #000;
        float: left;
        font-size: 1em;
}

#navigation p {
        position: absolute;
        font-size: .8em;
        top: 45px;
        padding-left: 15px;
}

/* --------------------------------------------- FONTS & IMAGES */
h1 {font-size: 1.9em;}
#header h1 {padding: 15px; background: #000; text-align: center; font-weight: bold;}
#header a {color: #fff;}
h2 {font-size: 1.9em;}
#splash h2 {color: #12884f;}
h3 {font-size: 1.4em; line-height: 1.1em;}
h4 {font-size: 1em; font-weight: bold;}
p {font-size: .8em; line-height: 1.6em;}
p.footer {font-size: .6em; color: #000; text-align: right; padding-top: 100px;}
p.header {font-size: .8em; font-style: italic; color: #ababab;}
#content p, #content h3, #sidebar h3, #content h4, #sidebar p {margin-bottom: 25px;}
img {margin: 0 0 25px 0;}
li {font-size: .7em; margin-bottom: 10px;} 
```

两者`li:active`都`li:focus`不要突出显示活动选项卡。但奇怪`li:hover`的是确实有效

我能做些什么来解决这个问题？？

我正在寻找突出显示这样的内容：

![在此处输入图像描述](../Images/ccd4fe8dc6fbca61359967235168db8a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:24:32.340

CSS :active 选择器仅在链接处于活动状态时适用 - 即被点击。:focus 选择器只允许用于接受键盘事件或其他用户输入的元素。我本人对 Web 开发还很陌生，但我认为您将无法使用这些选择器实现您正在寻找的东西。

您可以尝试为选项卡菜单中的每个页面的 body 标签分配一个 id，并为菜单中的每个 li 分配一个不同的 id。例如：

```
<body id="home">        <!-- on default.html -->
<body id="research">    <!-- on research.html -->
<body id="teaching">    <!-- on teaching.html -->
<body id="contact">     <!-- on about.html -->
<body id="cv">          <!-- on cv.html --> 
```

您的菜单可能如下所示：

```
<ul>
    <li class="link" id="nav_home"><a href="default.html" title="Product">Home</a></li>
    <li class="link" id="nav_research"><a href="Research.html" title="Product">Research</a></li>
    <li class="link" id="nav_teaching"><a href="Teaching.html" title="Progress">Teaching</a></li>
    <li class="link" id="nav_contact"><a href="about.html" title="About">Contact</a></li>
    <li class="link" id="nav_cv"><a href="CV.html" title="CV">CV</a></li>
</ul> 
```

然后在您的 CSS 上，您可以执行以下操作：

```
#home #nav_home a,
#research #nav_research a,
#teaching #nav_teaching a,
#contact #nav_contact a,
#cv #nav_cv a, {
    background:silver;
} 
```

另一种选择是只为活动选项卡创建一个新类（例如 class="active_link"）和关联样式，然后在每页手动设置它。

正如我所说，我自己对 Web 开发还很陌生，但两种解决方案都应该有效。如果您正在寻找更动态的东西，您可能需要一些 Javascript。

我希望这有帮助。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:06:01.393

抱歉我的错误，只需在打开大括号“{”之前删除最后一个逗号“，”它应该可以工作。这是我刚刚测试的一个示例：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Home</title>
        <style>
            #home #nav_home a,
            #research #nav_research a,
            #teaching #nav_teaching a,
            #about #nav_about a,
            #cv #nav_cv a {
                color:aqua;
            }
        </style>
    </head>
    <body id="research">
        <ul>
            <li id="nav_home"><a href="">Home</a></li>
            <li id="nav_research"><a href="">Research</a></li>
            <li id="nav_teaching"><a href="">Teaching</a></li>
            <li id="nav_about"><a href="">About</a></li>
            <li id="nav_cv"><a href="">CV</a></li>
        </ul>
    </body>
</html> 
```

我希望这会有所帮助 :) 抱歉之前的错误答案，正如我所说的，我自己刚刚开始 Web 开发。

干杯!

# c - C中的分段错误

> ID：14866464
> 
> 赞同：-1
> 
> 时间：2013-02-14T01:41:06.017
> 
> 标签：c, linux, data-structures, segmentation-fault

编辑：开关的默认值为“无效选项”，我只是想创建一棵树，程序正在编译，当我选择创建树的选项时，它只是说分段错误

过去几天我一直在做简单的数据结构程序，分段错误是困扰我很多的一个，我在互联网上研究了这个错误并得到了这个 [链接](http://web.mit.edu/10.001/Web/Tips/tips_on_segmentation.html)，实际上它并没有帮助。

我正在尝试创建一个二叉搜索树。并且 create 的返回类型不是 void，它是 struct tree *

程序：

```
struct tree{
      int data;
      struct tree *rchild, *lchild;
    };

struct tree * create(struct tree * root, int d){
  if(root==NULL) {
      root = (struct tree *) malloc(sizeof(struct tree));
      root->data=d;
      root->rchild=NULL;
      root->lchild=NULL;
  }else  if(root->data < d)     create(root->rchild, d);

  else if(root->data > d)     create(root->lchild, d);

  else if(root->data == d)  printf("duplication error");

}  
main(){
  struct tree *root;
  int choice, c;

  while(choice!=5){
  printf("Enter choice\n1-insert into  tree\n5-exit");
  scanf("%d", &choice);

  switch(choice){
     case 1: 
     printf("enter data to be inserted");
     scanf("%d",&c);          
     printf("error after scanf  ");
     create(root,c); 
     break; 
     case 5: exit(0); default: printf("invalid option");
  }
  }
} 
```

我使用的操作系统是 Backtrack 5 R1

给给-1的人：先生，如果我的问题如此愚蠢和没有建设性，请告诉我的答案

有一个类似的[链表问题](https://stackoverflow.com/questions/4821013/segmentation-fault-error-in-c)，我也回答了这个问题，顺便写了一个树程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:50:47.487

至少，我认为 create() 不能正常工作。

您应该使用 struct tree ** 而不是 struct tree *。

由于您的节点根为 NULL，因此 create(root) 表示 create(NULL)，它不能将分配的内存分配给根。您应该将其定义为 create(struct tree**)，并使用 create(&root) 调用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:19:03.347

您`root`在 create 函数中进行 malloc'ing，但没有理由在调用中幸存下来，因为它不是通过引用传递的。如果你通过了 &root，你就可以改变 *root。实际上，您不会在树中创建新节点...每次您从 中返回时`create`，`root`指针都是 NULL...

或者，您可以将新值`root`作为调用的返回值返回，并使用

```
root = create( root, c); 
```

您可以通过添加来向自己证明这一点

```
printf("root is now %p\n", root); 
```

在你`create`打电话后...

简而言之，以下工作：

```
struct tree{
      int data;
      struct tree *rchild, *lchild;
    };

struct tree* create(struct tree * root, int d){
  printf("creating node with d = %d\n", d);
  if(root==NULL) {
      root = (struct tree *) malloc(sizeof(struct tree));
      root->data=d;
      root->rchild=NULL;
      root->lchild=NULL;
  }else  if(root->data < d)     create(root->rchild, d);

  else if(root->data > d)     create(root->lchild, d);

  else if(root->data == d)  printf("duplication error");
 return root;
}
main(){
  struct tree *root;
  int choice, c;

  while(choice!=5){
  printf("Enter choice\n1-insert into  tree\n5-exit");
  scanf("%d", &choice);
  printf("root is now %p\n", root);
  switch(choice){
     case 1:
     printf("enter data to be inserted");
     scanf("%d",&c);
     printf("made it past scanf\n");
     root = create(root,c);
     break;
     case 5: exit(0);
     default: printf("invalid option\n");
 }
  }
} 
```

# java - 有没有办法根据Apache POI中另一个单元格的值找到一个单元格的值

> ID：14866466
> 
> 赞同：0
> 
> 时间：2013-02-14T01:41:22.820
> 
> 标签：java, apache-poi, xssf

我已经根据其他单元格的值在 excel 电子表格中获得了一个单元格的值。我有一个 XLSX，其中一列包含城市名称，另一列包含该名称的状态。所以，我想做的就是找到州为“CA”的“橙城”。据我所知，我必须遍历每一行和每一列以找到城市，然后向前迭代两列（因为状态在两列之后）以检查州代码是否正确。

有没有其他有效的方法来做到这一点？（在数据库中会很容易..）

# cakephp - 模型关联的未知列错误

> ID：14866470
> 
> 赞同：0
> 
> 时间：2013-02-14T01:42:08.400
> 
> 标签：cakephp

我有两个相关的模型：

1.  位置有很多运动
2.  运动属于位置

在我的运动模型中，我使用这个顺序：

```
public $order = 'Location.name ASC, Sport.name ASC'; 
```

那里没问题。问题是，当我尝试通过 Location 模型删除记录时，我在 ON 子句中收到 Unknown column 错误，它使用的是 Sport 模型顺序：

```
SELECT `Sport`.`id` FROM `scheduler`.`sports` AS `Sport` WHERE `Sport`.`location_id` = 6 ORDER BY `Location`.`name` ASC, `Sport`.`name` ASC 
```

我在 Location hasMany 关联中有 'dependent' => true ，所以我希望它删除 Sport 记录，但为什么该 select 语句没有正确加入 Location 表。我将递归设置为 1。如果我按顺序删除 Location.name，它可以正常工作。

cakePHP 有点新意。使用 2.x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:16:45.997

从 Sport 中删除 $order - 模型中的 $order 定义模型的默认排序顺序 - 不是任何相关模型。

如果您需要订购查询，您可以这样做：

```
$results = $this->Sport->find('all', array(
    'conditions'=>array(...),
    'contain'=>array(
        'Location'=>array(
            'order'=>array('Location.name'=>'ASC')
        )
    ),
    'order'=>array(
        'Sport.name'=>'ASC'
    )
)); 
```

或者，在您的运动模型中留下 $order，但它应该只是：

```
public $order = array('Sport.name'=>'ASC'); 
```

并在位置模型中添加一个类似的：

```
public $order = array('Location.name'=>'ASC'); 
```

# javascript - 以英尺为单位的高度/长度生成器？

> ID：14866473
> 
> 赞同：0
> 
> 时间：2013-02-14T01:42:29.860
> 
> 标签：javascript, html, generator

我目前有这段代码，用于确定给定长度的高度和翼展。我真的很希望将结果输入为英尺和英寸的测量值，以及由此产生的翼展和高度在相同的测量值中做出响应。我不介意它是否使用撇号或句号。

```
<SCRIPT LANGUAGE="LiveScript">
    function wings(form) {
        form.wingspan.value = (form.length.value * .75) * 2
        form.height.value = form.length.value * .5
    }
</SCRIPT>

<TABLE>
    <TR>
        <TD>Dragon Length:</TD>
        <TD><INPUT TYPE="text" NAME="length" SIZE=15 /></TD>
    </TR>
    <TR>
        <TD>Dragon Wingspan:</TD>
        <TD><INPUT TYPE="text" NAME="wingspan" SIZE=15 /></TD>
    </TR>
    <TR>
        <TD>Dragon Height:</TD>
        <TD><INPUT TYPE="text" NAME="height" SIZE=15 /></TD>
    </TR>
    <TR>
        <TD><INPUT TYPE="button" VALUE="Calculate" ONCLICK="wings(this.form)" /></TD>
    </TR>
</TABLE>

</FORM> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:53:28.153

With no plugins or libraries, here is your example working...

Take a look at this example: [http://jsfiddle.net/BtC4K/](http://jsfiddle.net/BtC4K/)

**Javascript:**

```
function wings(){
    var lenght = document.getElementsByName("length")[0];
    var wingspan = document.getElementsByName("wingspan")[0];
    var height = document.getElementsByName("height")[0];

    wingspan.value = (lenght.value * 0.75) * 2;
    height.value = lenght.value * 0.5;
} 
```

**HTML:**

```
<table>
    <tr>
        <td>Dragon Length:</td>
        <td><input type="text" name="length" SIZE=15 /></td>
    </tr>
    <tr>
        <td>Dragon Wingspan:</td>
        <td><input type="text" name="wingspan" SIZE=15 readonly /></td>
    </tr>
    <tr>
        <td>Dragon Height:</td>
        <td><input type="text" name="height" SIZE=15 readonly /></td>
    </tr>
    <tr>
        <td><button onclick="wings()">Calculate</button></td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:34:16.150

你是在浏览器中加载这个吗？

如果是，那么 LiveScript 在大多数情况下都不会运行。您可能希望改用 Javascript 或 JQuery 进行编程。

这是一个帮助您入门的片段，其中包含用于解释的内联注释。注意我实际上并没有为你计算任何东西......你应该尝试自己做这件事作为练习：

```
<!DOCTYPE html>
<html>
<head>
    <!-- You need this line so you can load the JQuery functions that you will be using -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<form id="wings">
<TABLE>
<TR><TD>Dragon Length:</TD><TD>
    <INPUT TYPE ="text" id="winglength" SIZE=15</TD></TR>
</TABLE>
</form>

<!-- ID of this element is called "trigger" and will be used for clicking -->
<div id="trigger">Click me to calculate the Wingspan and Height!</div>

<!-- This div tag is called "wingspan" -->
<div id="wingspan">Wingspan is: </div>

<!-- Can you write the HTML code for "height" here? -->

<script>

    // Everything in here will run when your page is loaded
    $(document).ready(function() {

        // When you click on the DIV tag called "trigger", you run this cod below.
        $("#trigger").click(function() {

            // "append" the wing length to the HTML tag above: the # refers to id called winglength
            $("#wingspan").append($("#winglength").val());

            // How you calculate the "height" is left as an exercise for the original poaster!
        });
    });
</script>

</body>
</html> 
```

# actionscript-3 - 使用三个 ModuleLoaders 时，我的应用程序有时会失败并出现错误 #1009

> ID：14866474
> 
> 赞同：1
> 
> 时间：2013-02-14T01:42:31.243
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex3

当我尝试使用超过 2 个模块加载器时，就会出现我的问题。我的第一个问题是当我尝试使用多个 1 时。您可以在下面看到我的解决方法。我对 Modules 还有些陌生，所以如果我在这里遗漏了一些明显的东西，我不会感到惊讶。让我丧命的是它有时如何工作，但有时却没有？

**错误：**

```
TypeError: Error #1009: Cannot access a property or method of a null object reference.
at ModuleInfo/completeHandler()[C:\autobuild\3.x\frameworks\projects\framework\src\mx\modules\ModuleManager.as:717] 
```

**我的应用程序：**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600">
    <mx:Script>
        <![CDATA[           
            import mx.core.Application;
            import mx.events.ModuleEvent;
            import mx.managers.PopUpManager;
            import mx.modules.IModuleInfo;
            import mx.modules.ModuleManager;

            private var popUpManager:PopUpManager;          
            private var podXml:XML;

            private var moduleIsReady:Boolean;

            private function getSwf():String
            {
                return "location/SimpleModule.swf";
            }

            private function onModuleUnload(moduleEvent:ModuleEvent):void
            {
                // Had to release in order to get 2 to work, now it breaks on 3
                var info:IModuleInfo = ModuleManager.getModule(getSwf());
                info.release();
                info = null;
                trace("module unloaded");
            }

            private function onModuleReady(moduleEvent:ModuleEvent):void
            {           
                // Module loaded

                // moduleIsReady = true; //used as a flag for child to know when the module itself is ready
                //var ichild:MyInterface = module.child as MyInterface
                //if (module.child != null)
                //{
                //  ichild.doStuff();
                //}                         
            }
        ]]>
    </mx:Script>

    <mx:Canvas>
        <mx:ModuleLoader url="{getSwf()}" id="module" ready="onModuleReady(event)" unload="onModuleUnload(event)" x="50" y="50" width="100" height="100"/>
        <mx:ModuleLoader url="{getSwf()}" id="module1" ready="onModuleReady(event)" unload="onModuleUnload(event)" x="50" y="250" width="100" height="100"/>
        <mx:ModuleLoader url="{getSwf()}" id="module2" ready="onModuleReady(event)" unload="onModuleUnload(event)" x="50" y="450" width="100" height="100"/>
    </mx:Canvas>
</mx:Application> 
```

**我的模块：**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Module layout="absolute" xmlns:mx="http://www.adobe.com/2006/mxml" 
           width="100%" height="100%"
           backgroundColor="0xFF0000">
</mx:Module> 
```

谢谢。

# google-api - Google Analytics API "ga:day" 维度和超过 1 个月的数据返回聚合而不是绝对值

> ID：14866476
> 
> 赞同：5
> 
> 时间：2013-02-14T01:42:35.953
> 
> 标签：google-api, google-analytics-api

我正在尝试检索 Google Analytics 的每日访问者计数。我正在关注[这篇博文](http://analytics.blogspot.com/2011/02/mastering-unique-visitors-in-api.html)。

对于不到 30 天的连续数据，一切正常。问题是结果行被“组合在一起”。考虑这个查询：

```
 { ids: 'ga:44339606',
  'start-date': '2013-01-01',
  'end-date': '2013-02-14',
  dimensions: 'ga:day',
  metrics: 'ga:visits',
  segment: 'gaid::-1' } 
```

第 01 -14 天返回的值不正确，因为它们实际上表示 1 月 1 日 + 2 月 1 日的总和，以及 1 月 2 日和 2 月 2 日的总和，依此类推。换句话说：一个月中的每一天（1-30）只返回一个条目，而不是返回 44 个条目。

在不将查询分解为多个调用的情况下，如何对此进行调整？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T16:03:52.443

原来，我想要的是`ga:date`维度而不是`ga:day` Check out the playground；它非常适合找出参数：[https ://ga-dev-tools.appspot.com/explorer/](https://ga-dev-tools.appspot.com/explorer/)

# jquery - 选择listview jquery后如何显示警报

> ID：14866486
> 
> 赞同：0
> 
> 时间：2013-02-14T01:43:56.983
> 
> 标签：jquery, ios, listview, jquery-mobile, alert

嗨，伙计们，这似乎是有史以来最愚蠢的问题，但帮助我解决这个问题的网站正在维护中。我正处于学习 jquery mobile 的早期阶段，需要一些帮助。

我在 html5 页面中有一个非动态的有序列表视图。我想在手机上显示一个警报（如 ios 上的弹出警报），向用户显示文本，然后他们可以单击确定关闭它以返回到有序列表视图。我的html是这样的。我希望当我从该列表中单击 Montview 时，例如在 iphone 上弹出一条警报，并为用户提供一些文本，然后他们单击确定将其关闭。

有人可以帮助我使用所需的 jquery 移动 javascript，就像我说我正在学习但后来网站关闭了。

谢谢

```
<head>
    <title>title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="lib/jquery-1.6.4.js"></script>
    <script src="lib/jquery.mobile-1.1.0.js"></script>
    <script type="text/javascript" src="https://ajax.microsoft.com/ajax/jQuery/jquery-1.4.2.min.js"></script>
    <link href="src/css/jquery.mobile.structure-1.1.0.css" rel="stylesheet">
    <link href="src/css/jquery.mobile.theme-1.1.0.css" rel="stylesheet">
</head>

<body>
    <div data-role="page" id="page1">
        <div data-role="header">
            <h1>Grounds</h1>
        </div>
        <div data-role="content">
            <ol data-role="listview" data-theme="c" data-inset="true">
                <li>
                    <a>Montview</a>
                </li>
                <li data-theme="b">
                    <a>Asquith</a>
                </li>
                <li>
                    <a>Button</a>
                </li>
                <li>
                    <a>Button</a>
                </li>
            </ol>
        </div>
    </div>
    <div data-role="page" id="page2">
        <div data-role="header">
            <h1>Header</h1>
        </div>
        <div data-role="content"></div>
        <div data-role="footer">
            <h1>Footer</h1>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:51:29.123

对不起，如果我误解了这个问题，但您是否正在寻找类似的东西？

```
// this will bind all of the items
$(function(){
    $("ol[data-role='listview']").click(function(){
        alert("woah!");
    });
}); 
```

编辑：如果你想为每个列表项绑定一个不同的事件，你需要给项目一个 id （或区分它们的东西，你也可以选择每个 - 浏览它们的内容并以这种方式区分它们，但是我会建议不要使用这种方法）。

```
 <ol data-role="listview" data-theme="c" data-inset="true">
            <li id="mountView">
                <a>Montview</a>
            </li>
            <li id="asquith" data-theme="b">
                <a>Asquith</a>
            </li>
            <li id="someButton">
                <a>Button</a>
            </li>
            <li>
                <a>Button</a>
            </li>
        </ol> 
```

然后在你的javascript中：

```
$(function(){
    $("li#mountView").click(function(){
        alert("Mount View Event!!!");
    });

    $("li#asquith").click(function(){
        alert("Asquith Event!!!");
    });
}); 
```

**编辑 2**

在仔细检查您的 html 后，我注意到您添加了另一个“页面”部分。我怀疑您想在单击其中一个链接时打开此页面的内容。检查这个[JSFIDDLE](http://jsfiddle.net/nMR85/833/)，你就会明白我的意思。（此解决方案甚至不需要代码，只要您正确注释了元素，jquery mobile 就会自动连接您的事件）。注意这部分->`<a href="#page2" data-rel="dialog">bar</a>`

# java - 扫描器 nextLine() 允许输入是一个或两个单词

> ID：14866493
> 
> 赞同：1
> 
> 时间：2013-02-14T01:44:37.360
> 
> 标签：java, string, input

我知道这已经被问死了，但我还没有搜索并找到一个和我很相似的案例，所以我想我会问......我这里有这个小代码......

```
System.out.print("What would you like the name of your new recipe to be? ");
        Recipe tempRecipe = new Recipe(name);
        name = scan.nextLine();
        scan.nextLine();
        tempRecipe.setName(name);

        System.out.print("How many ingredients does this recipe have? ");
        ingredientCount = scan.nextInt();
        scan.nextLine(); 
```

现在很明显我遇到了 println 语句在同一行并且不允许输入的问题，所以我投入了那个 scan.nextLine() 来解决这个问题。但现在的问题是，当我读到其中的内容时，因为 nextLine() 太多而让我空白！如果我将其更改为 name = scan.next() 我只能读一个单词，并且如果需要，我需要能够不分青红皂白地读 1 个或 2 个单词，这也可能有助于知道遵循此代码是这些线条

```
Ingredient tempIngredient = new Ingredient(name, quantity, null);

            System.out.print("Enter the name of ingredient number " + (i+1) + ": ");
            name = scan.nextLine();
            tempIngredient.setName(name);

            System.out.print("Enter the quantity of ingredient number " + (i+1) + ": ");
            quantity = scan.nextDouble();
            scan.nextLine();
            tempIngredient.setQuantity(quantity);

            System.out.print("Enter the unit of measurement of ingredient number " + (i+1) + ": ");
            unit = scan.nextLine();
            tempIngredient.setUnit(UnitOfMeasurement.valueOf(unit)); 
```

如果需要，tempRecipes 名称和 tempIngredients 名称都需要能够容纳 1 或 2 个单词，我该如何在解决 nextLine() 问题的同时做到这一点！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:50:17.087

`scan.nextLine()`仅在之后调用额外的`scan.nextInt()`，而不是在之后`scan.nextLine()`。使用额外的想法`scan.nextLine()`是跳到换行符并转到下一行（因为`scan.nextInt()`不这样做）。

请参阅[在 nextXXX 之后使用 nextLine 时的扫描仪问题](https://stackoverflow.com/q/7056749/597657)

# java - Iterable 和常规数组是否有“超类”？

> ID：14866494
> 
> 赞同：1
> 
> 时间：2013-02-14T01:44:38.527
> 
> 标签：java

我正在使用增强的 for 循环，它看起来像这样：

```
public void addItems (Iterable<Item> items) {
    for (Item item : items) {
        addItem(item);
    }
}

public void addItems(Item[] items) {
    for(Item item : items) {
        addItem(item);
    }
} 
```

使用`Iterable`允许我使用`List`等，但我必须有一个单独的方法用于常规数组。有什么方法可以结合这个（不使用反射，或增加行数，或创建垃圾），所以我不必重复代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T01:46:56.700

```
public void addItems(Item[] items) {
    addItems(Arrays.asList(items));
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T01:48:07.760

您可以重载该方法（首选）

```
public void addItems(Item[] items) {
   addItems(Arrays.asList(items));
} 
```

或每次调用该方法时转换为列表。

```
addItems(Arrays.asList(new int[]{1,2,3})); 
```

第二种方法不是最优的。正如 Sticky 所提到的：

> 我想 Arrays.asList 到处都有更多的重复，而不是我班上的 3 行。

# c++ - 从另一个函数创建一个函数（参数更少）

> ID：14866496
> 
> 赞同：0
> 
> 时间：2013-02-14T01:44:55.657
> 
> 标签：c++

我想做以下事情。说我有这个：

```
void f(const char* c) {
    // Do stuff with c
}

void g(const char* c, int x, int y) {
    // Do other stuff
} 
```

我想做的是从 g 创建一个函数，它需要一个 const char* c。那是：

```
int a = 5;
int b = 9;
expression(g, a, b)("Hi!"); 
```

优选地，`expression(g)`也可以存储在变量中。我也不确定如何声明这个变量。

我试过使用 boost::bind; 但是 boost::bind 返回一个 boost::function，我想要一个普通的 C++ 函数指针。此外，我还看到了这个线程： [demote boost::function to a plain function pointer](https://stackoverflow.com/questions/282372/demote-boostfunction-to-a-plain-function-pointer/3453616#3453616) 前两个解决方案都不起作用。我的函数 f 被限制为采用一个参数（没有 void* user_data 指针）。我需要这个的原因是我有第三个函数 h，它接受一个参数的函数，即 const char* 并用它做事。我希望能够以 g 到 h 的形式传递。

```
h(f) // Valid
h(expression(g, a, b)) // Would like for this to be valid, too 
```

我不确定这是否可能，但如果是，请告诉:)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:47:05.043

使用`bind`：

```
#include <functional>

auto h = std::bind(g, std::placeholders::_1, 5, 9);

h("hi"); 
```

`bind`制作参数的副本，因此如果您打算通过引用获取参数，请注意（在这种情况下，您可能需要`std::ref`）。尽量保留结果类型`auto`以避免不必要的转换。

* * *

要获得一个普通的 C++ 函数：

```
void h(char const * s) { g(s, 5, 9); } 
```

或者：

```
void (*ph)(char const *) = [](const char * s) { g(s, 5, 9); }; 
```

或者对于疯子：

```
struct Foo { static void bar(char const * s) { g(s, 5, 9); } };
void (*qh)(char const *) = &Foo::bar; 
```

用法：

```
h("hi");
ph("hi");
Foo::bar("hi");
qh("hi"); 
```

# php - php后输入验证

> ID：14866505
> 
> 赞同：0
> 
> 时间：2013-02-14T01:45:30.177
> 
> 标签：php, validation

我如何在 test.php 上验证以回显所有输入的文本，以便 fname 值回显为文本，并且只有文本（无论是 html、js 还是 php）

```
<html>
<body>
<form action="test.php" method="POST">
Enter Your name : <input type="text" name="fname">
<input type="submit">
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:00:09.840

这是关键
`htmlspecialchars()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:18:26.190

[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)或[`htmlentities()`](http://php.net/htmlentities)将实现您所需要的。

一个例子：

```
if (isset($_POST['txtExample'])) {
    echo(htmlentities($_POST['txtExample']), ENT_QUOTES));
} 
```

祝你好运。

# php - 使用密码保护从 PHP 执行 CGI？/ PHP Apache 没有运行 curl_init(); 在 Web 中，仅在 CLI 中

> ID：14866507
> 
> 赞同：1
> 
> 时间：2013-02-14T01:45:58.927
> 
> 标签：php, html, authentication, curl, cgi

我正在开发一个项目，我有一个计费服务器（服务器 1）和一个控制面板服务器（服务器 2 / Virtualmin），其中计费系统必须在服务器 2 上执行一个接受变量的脚本，但服务器 2 上的文件需要验证。

我能够在不同的服务器上使用 shell 命令来实现我想要的，如下所示：

```
wget --http-user=root --http-passwd=pass --no-check-certificate https://example.com:10000/virtual-server/remote.cgi?program=create-domain&domain=example.net&pass=123&default-features 
```

这样做的问题是计费服务器**只能执行特定的 PHP 文件**，并且服务器没有安装 wget，所以我不能用 shell_exec 来做。

我尝试使用 PHP cURL，但是我真的不知道如何使用它，并且它不起作用。这是我尝试过的：

```
$serverip = "example.com:10000";
$domain = "example.net";
$password = "123";

$ch = curl_init("https://$serverip/virtual-server/remote.cgi?program=create-domain&domain=$domain&pass=$password&default-features");

$userpwd = 'root:pass';

curl_setopt($ch, CURLOPT_USERPWD, $userpwd);

curl_exec($ch);
curl_close($ch); 
```

如果您需要更多详细信息，请告诉我，我很乐意提供更多信息。在此先感谢，我知道这看起来很奇怪。

**编辑一个** 这是我尝试过的新代码，但仍然无法正常工作。

```
<html>
<h1>Provision Test</h1><hr />

<?php

$domain = "example.net";
$password = "123";
$serverip = "example.com:10000";

$ch = curl_init();

$userpwd = 'root:pass';

curl_setopt($ch, CURLOPT_URL, "http://{$serverip}/virtual-server/remote.cgi?program=create-domain&domain={$domain}&pass={$password}&default-features");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
curl_setopt($ch, CURLOPT_USERPWD, $userpwd);

curl_exec($ch);
curl_close($ch);

?>

</html> 
```

**编辑二** 似乎可以很好地执行上述代码（编辑 1），但只能通过 CLI 执行，并且当通过 Web 界面尝试时，没有任何反应，脚本会在遇到 curl_init(); 时停止。任何想法将不胜感激。

# cakephp - Tried everything and can't turn off errors in CakePHP

> ID：14866508
> 
> 赞同：3
> 
> 时间：2013-02-14T01:46:10.303
> 
> 标签：cakephp, error-reporting, debug-mode

I have tried everything I can think of to stop errors from displaying in CakePHP. I have checked the CakePHP instruction manual and have searched the internet and stackoverflow for phrases like "turn off error reporting in CakePHP" and "turn off debug mode in CakePHP". Here's a description of the errors that are still displaying and what I have tried to hide these errors in CakePHP:

**Errors I'm Still Getting**

*   Error One: I intentionally declared a variable incorrectly in one of my Controller classes to test whether errors were displaying, and received "Parse error: syntax error, unexpected T_VARIABLE, expecting T_FUNCTION in (file paths and line number)"

*   Error Two: I tried typing a bunch of gibberish into the URL as a test to see if it would display an error. I get a "Missing Controller" error from Cake.

**Things I've Tried to Stop Errors from Displaying**

*   Configure::write('debug', 0); (edited to zero) in \app\Core.php

*   error_reporting(0); (added the line) in \app\Config\bootstrap.php

*   Configure::write has a 'level' key in an array in \app\Core.php so I changed it from "E_ALL & E_DEPRECATED" to 0\. Then I tried blanking it out.

*   Added a php.ini file to public_html which contained a whole pile of commands to turn off errors. I also deleted this file to make sure it had not been there all along interfering.

*   Commented out sections of ___construct() in \lib\Cake\Utility\Debugger.php (this removed error messages out of the title tags of the page that shows up when gibberish is typed into the url but not the missing controller error). By the way, error messages were being put into the HTML titles. That's weird.

*   Commented out echo $self->outputError($data); in showError in \lib\Cake\Utility\Debugger.php

*   Double checked the manual's "Deployment" page, which referred me to the "Debug" page. That page talked about setting "Configure::debug", which is written slightly differently from "Configure::write('debug', 0);" so I tried variations.

*   I searched all directories containing php for the phrases "error_reporting(" and "ini_set(" to ensure I hadn't enabled errors somewhere in there and forgotten.

If anyone has any idea why these are still displaying despite all that I've tried or what can be done to turn them off, I would appreciate it very much.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:26:04.987

I tried Mark's suggestion, which worked. When I searched my entire Cake installation for "Configure::write('debug'", I found tons of lines to turn debugging on - although most of these were present in the original files as downloaded from the official CakePHP site. As an experiment, I made a copy of my Cake installation, changed all instances that set debug higher than 0, and that worked. Then, assuming that some of them *should* be there, and not being sure which were supposed to be there, I decided to completely delete CakePHP, download a fresh copy, and replace it.

After I configured the new core.php, the missing controller error was replaced with a not found error, and the parse error that I intentionally caused for testing purposes was replaced with an internal server error. I'm not sure that showing an internal server error is what it is supposed to do... but the behavior did change after editing the debug setting, and it doesn't reveal the file paths anymore. So, I guess that it's behaving the way that it's supposed to.

I would like to give Mark credit for helping me solve this, but he only posted a comment.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:40:39.447

i think there is some options for u :

1.  *Configure your errors*

    here you go app/Config/core.php

    `Configure::write('Error', array( 'handler' => 'ErrorHandler::handleError', 'level' => E_ALL & ~E_DEPRECATED, 'trace' => true ));` You have 5 built-in options when configuring error handlers:

**handler** - callback - The callback to handle errors. You can set this to any callable type, including anonymous functions.

**level** - int - The level of errors you are interested in capturing. Use the built-in php error constants, and bitmasks to select the level of error you are interested in.

**trace** - boolean - Include stack traces for errors in log files. Stack traces will be included in the log after each error. This is helpful for finding where/when errors are being raised.

**consoleHandler** - callback - The callback used to handle errors when running in the console. If undefined, CakePHP’s default handlers will be used.

1.  create error handler as your own

    //in app/Config/core.php

    `Configure::write('Error.handler', 'AppError::handleError');`

//in app/Config/bootstrap.php

```
`App::uses('AppError', 'Lib');` 
```

//in app/Lib/AppError.php

`class AppError { public static function handleError($code, $description, $file = null, $line = null, $context = null) { echo 'There has been an error!'; } }`

This class/method will print out ‘There has been an error!’ each time an error occurs. Since you can define an error handler as any callback type, you could use an anonymous function if you are using PHP5.3 or greater.:

```
Configure::write('Error.handler', function($code, $description, $file = null, $line = null, $context = null) {
    echo 'Oh no something bad happened';
}); 
```

also u can see [**here**](http://nuts-and-bolts-of-cakephp.com/2008/08/29/dealing-with-errors-in-cakephp/) for more help

# python - 修改 matplotlib 的比例

> ID：14866510
> 
> 赞同：2
> 
> 时间：2013-02-14T01:46:13.687
> 
> 标签：python, matplotlib, scatter

我已经设法使用命令生成了一个比例为 1:1 的散点图`plt.axis('equal')`，但是输出的两侧包含太多的空白。我一直在寻找一种方法来删除那个空白，使这个数字更矩形，但我还没有成功。这是我的代码：

```
import matplotlib.pyplot as plt

E = [892.255, 837.587, 1227.914, 1212.741, 1053.381]
N = [395.173, 828.072, 662.757, 115.177, 519.491]
Labels = ['J1', 'J3', 'J5', 'C']

plt.scatter(E,N)
plt.annotate('J1', xy=(E[0] - 15, N[0] + 15))
plt.annotate('J3', xy=(E[1] + 10, N[1] + 5))
plt.annotate('J5', xy=(E[2] + 10, N[2] + 5))
plt.annotate('C', xy=(E[3] + 5, N[3] + 5))
plt.annotate('V1', xy=(E[4] + 15, N[4] - 20))
plt.annotate('V2', xy=(1015, 810))

plt.annotate('102,96', xy=(850, 540), size=8.5)
plt.annotate('29,99', xy=(965,655), size=8.5)
plt.annotate('65,13', xy=(1090, 640), size=8.5)
plt.annotate('119,83', xy=(1180, 500), size=8.5)
plt.annotate('82,09', xy=(980, 370), size=8.5)

plt.plot([E[0], E[4]], [N[0], N[4]], color='k', linestyle='-', linewidth=1)
plt.plot([E[1], E[4]], [N[1], N[4]], color='k', linestyle='-', linewidth=1)
plt.plot([E[2], E[4]], [N[2], N[4]], color='k', linestyle='-', linewidth=1)
plt.plot([E[3], E[4]], [N[3], N[4]], color='k', linestyle='-', linewidth=1)
plt.plot([1011.591064, E[4]], [817.704131, N[4]], color='k', linestyle='--', linewidth=1)
plt.scatter(E[4],N[4], s=6500,facecolors='none',  color='k')

plt.grid()
plt.xlabel('E (m)')
plt.ylabel('N (m)')
#plt.ylim((100,900))
#plt.xlim((800,1250))
plt.axis('equal')
plt.axis([800, 1250, 100, 900])
plt.show() 
```

产生：

![输出](../Images/93b7128fa00f8a59525bf4c37873ba7d.png)

哪个很好，但是如果 x 轴从 800 到 1300 会更好。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T02:05:40.833

我相信您只想将“可调整”参数设置为`"box"`而不是默认值`"datalim"`。

`plt.gca().set(adjustable='box')`只需在代码末尾附近添加一行类似的内容。

使用上面的代码，此更改会产生：

![在此处输入图像描述](../Images/c13cae168f655c21c5641084a8abf8fb.png)

（我还将 x 轴限制更改为 800-1300 而不是 800-1250，以避免某些文本悬在边缘上，并且自动放置的刻度太密集。）

# objective-c - NSTextView 暂时禁用自动拼写更正

> ID：14866512
> 
> 赞同：3
> 
> 时间：2013-02-14T01:46:34.420
> 
> 标签：objective-c, cocoa, nstextview

## 问题

在某些应用程序中，例如邮件客户端或 Twitter 客户端，我发现自己正在打字，当我按下发送/推文按钮时，一切看起来都很好，文本视图会自动将最后一个单词更正为错误的拼写。显然，那时我在完成输入之前等待了错误的时间，然后才发送，所以拼写检查仍在进行中。

我想这里的第一个问题真的应该是您对删除该功能有何看法？因为另一方面，我确信同样的事情也会发生在人们身上，但它实际上修复了最后一个单词的拼写，而不是把它弄乱。否则，如果您认为这是一个有效的想法，是否有办法在`NSTextView`失去焦点时禁用自动拼写更正？

## 我看过的：

*   [这个](https://stackoverflow.com/questions/8718330/how-to-handle-nstextview-preferences-spelling-and-grammar-substitutions)`NSTextView`关于如何处理s中的拼写问题的问题

*   [这个](https://stackoverflow.com/questions/11806146/completely-disable-nstextview-spell-checking)关于关闭拼写检查的问题。

*   [议定书](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTextInput_Protocol/Reference/Reference.html)_[`NSTextInput`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTextInput_Protocol/Reference/Reference.html)

*   [议定书](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSIgnoreMisspelledWords_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSIgnoreMisspelledWords)_[`NSIgnoreMisspelledWords`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSIgnoreMisspelledWords_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSIgnoreMisspelledWords)

*   [议定书](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSChangeSpelling_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSChangeSpelling)_[`NSChangeSpelling`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSChangeSpelling_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSChangeSpelling)

*   [`NSSpellChecker`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpellChecker_Class/Reference/Reference.html)特别是它的自动拼写校正方法（我真的认为这会让我到达某个地方）我想知道为什么 a`NSSpellCheckerDelegate`不存在

*   [这个](https://stackoverflow.com/questions/6971396/notification-of-autocorrect/6980876)关于误导[`NSSpellChecker`的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSpellChecker_Class/Reference/Reference.html)`NSNotification`问题（阅读评论）

*   [`NSTextCheckingTypes`](http://developer.apple.com/library/mac/#documentation/AppKit/Reference/NSTextCheckingResult_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSTextCheckingTypes)（在底部）具体`NSTextCheckingTypeCorrection`

*   [这个](https://stackoverflow.com/questions/2825269/how-do-i-enable-spell-checking-within-an-nstextfield-on-mac-os-x/2825341#2825341)关于一般进行拼写检查的问题

*   [`NSTextView`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTextView_Class/Reference/Reference.html)特别是“使用拼写检查器”和“文本检查和替换”方法

*   [这个问题](https://stackoverflow.com/questions/8144784/turn-off-os-x-10-7-lions-auto-correct-feature-programmatically/)只是关于打开和关闭功能

*   [拼写检查编程主题](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SpellCheck/SpellCheck.html#//apple_ref/doc/uid/10000092i)，实际上只讨论非自动拼写检查

*   [`NSTextViewDelegate`](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSTextViewDelegate_Protocol/Reference/Reference.html)特别是“使用拼写检查器”方法

## 我实际尝试过的（在 Xcode 中的一个空项目中）

*   分别实现调用and的and和 inside （起初我也叫's但这只是用于用户设置，如（c）到版权符号）[`NSTextDelegate`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTextDelegate_Protocol/Reference/Reference.html) `textShouldBeginEditing:``textShouldEndEditing:``[self.textView setAutomaticSpellingCorrectionEnabled:true];``[self.textView setAutomaticSpellingCorrectionEnabled:false];``NSTextView``setAutomaticTextReplacementEnabled:`

*   在相同的`textShouldBeginEditing:`和`textShouldEndEditing:`（从上面）中分别设置`NSTextView`'和。`enabledTextCheckingTypes``NSTextCheckingAllTypes``NSTextCheckingAllTypes - NSTextCheckingTypeCorrection`

*   子类化`NSTextView`和实现`becomeFirstResponder`，`resignFirstResponder`并在其中更改与上述相同的属性。

*   `NSSpellChecker`从`resignFirstResponder`或调用方法`textShouldEndEditing:`（这适用于`[[NSSpellChecker sharedSpellChecker] dismissCorrectionIndicatorForView:self];`）隐藏弹出窗口，但它仍然更正拼写）

## 例子

我在[Tweetbot](http://tapbots.com/software/tweetbot/mac/)中注意到了这个功能，你可以使用外国和外国来测试它。如果你在气泡还在的时候输入它并在推特上发布它，它会在推特上发布不正确的拼写。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-07-03T00:34:38.897

解决方案是继承 NSTextView 并覆盖该`handleTextCheckingResults:`方法。

```
- (void)handleTextCheckingResults:(NSArray<NSTextCheckingResult *> *)results forRange:(NSRange)range types:(NSTextCheckingTypes)checkingTypes options:(NSDictionary<NSTextCheckingOptionKey,id> *)options orthography:(NSOrthography *)orthography wordCount:(NSInteger)wordCount {
    for (NSTextCheckingResult *result in results) {
        if (result.resultType == NSTextCheckingTypeSpelling) {
            // you can either suppress all corrections by using `return` here

            // or you can compare the original string to the replacement like this:
            NSString *originalString = [self.string substringWithRange:result.range];
            NSString *replacement = result.replacementString;

            // or you can do something more complex (like suppressing correction only under
            // certain conditions

            return; // we don't do the correction
        }
    }

    // default behaviors, including auto-correct
    [super handleTextCheckingResults:results forRange:range types:checkingTypes options:options orthography:orthography wordCount:wordCount];
} 
```

这适用于所有 NSTextCheckingTypes。

# php - 填充下拉 带有目录内容

> ID：14866513
> 
> 赞同：1
> 
> 时间：2013-02-14T01:46:40.287
> 
> 标签：php, html, twitter-bootstrap

我正在尝试编写一个简单的 php 脚本，该脚本将使用目录的文件内容填充下拉无序列表。特别是 .wav 文件。我正在使用 HTML 和 Bootstrap 来这样做。

这是我一直在处理的清单：

```
<ul class="nav">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <h4 style="color: #333333">Select a Sound -</h4> <b class="caret"></b>
          </a>

          <ul class="dropdown-menu">
            <li><a href="#">Moose.wav</a></li>
            <li><a href="#">Duck.wav</a></li>
            <li><a href="#">Goose.wav</a></li>
          </ul>
        </li>
</ul>

<?php 
          foreach(glob('sounds/*.wav') as $filename){
          $rest = substr($filename, 7);    
          echo "<option>".$rest."</option>";
          }
?> 
```

现在它填充了硬编码值、Moose、Duck 等。. . 我一直在研究这个 php 脚本，我只是不知道如何将两者结合起来。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T01:48:50.757

这是你要找的吗？

```
<ul>
<?php 
      foreach(glob('sounds/*.wav') as $filename){
      $rest = substr($filename, 7);    
      echo "<li><a href='#'>".$rest."</a></li>";
      }
    ?>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:51:18.940

我写这篇文章的假设是您提供的所有代码都按预期完美运行。

```
<ul class="nav">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <h4 style="color: #333333">Select a Sound -</h4> <b class="caret"></b>
          </a>

          <ul class="dropdown-menu">
            <?php foreach(glob('sounds/*.wav') as $filename){
              $rest = substr($filename, 7);    
              echo "<li>".$rest."</li>";
            }
            ?>
          </ul>
        </li>
</ul> 
```

这个想法是编写一个 PHP 循环来生成您的列表项。该循环将驻留在标签内，从而形成列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:53:30.967

您可以使用 basename() 只获取文件名，不需要 substr()

```
<ul class="nav">
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown" href="#">
            <h4 style="color: #333333">Select a Sound -</h4> <b class="caret"></b>
          </a>

          <ul class="dropdown-menu">
          <?php foreach(glob('sounds/*.wav') as $filename):?>
             <li><a href="#"><?php echo basename($filename);?></a></li>
          <?php endforeach;?>
          </ul>
        </li>
</ul> 
```

# regex - 在多个文件中查找和替换测试

> ID：14866517
> 
> 赞同：0
> 
> 时间：2013-02-14T01:47:04.043
> 
> 标签：regex, powershell, batch-file

我考虑为一个文件执行此操作，我真的很喜欢 powershell 提供的解决方案：

```
Get-Content test.txt | ForEach-Object { $_ -replace "foo", "bar" } | Set-Content test2.txt 
```

有没有办法可以获取文件列表的内容，执行相同的搜索和替换，并生成第二组文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:57:32.610

这完成了我想要的：

```
(Get-Content *.txt) | ForEach-Object { $_ -replace "foo", "bar" } | Set-Content *.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:02:15.190

试试这个——

```
dir *.txt | % {[IO.File]::ReadAllText($_).Replace('bar', 'test') | sc $_} 
```

# asp.net - Bing 地图中的每个图层都可以有自己的数据源吗？

> ID：14866522
> 
> 赞同：0
> 
> 时间：2013-02-14T01:47:32.690
> 
> 标签：asp.net, bing-maps, pushpin

如果是这样，是否可以将该数据源绑定到该层，以便它根据数据源中的值生成适当数量的图钉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:08:48.390

如果您只想拆分图层以更轻松地管理图钉，您可以将一些实体添加到地图中，如下所示：

```
pinLayer = new Microsoft.Maps.EntityCollection({ zIndex: 13 });
map.entities.push(pinLayer); 
```

按照此[链接](http://www.garzilla.net/vemaps/Layers-via-the-Entity-Collection-with-Bing-Maps-7.aspx)获取有关 Bing 地图上的图层的更多说明

# github - 如何从 Github API 获取最新的“稳定”回购版本？

> ID：14866528
> 
> 赞同：2
> 
> 时间：2013-02-14T01:48:12.687
> 
> 标签：github, github-api

Github 的[tag 方法](http://developer.github.com/v3/repos/#list-tags)返回推送到你的仓库的所有标签的列表，最新的标签列在顶部。这是一个示例调用：[https](https://api.github.com/repos/ff0000/rosy/tags) ://api.github.com/repos/ff0000/rosy/tags生成以下 json 对象。

```
[{
    name: "rbp-folder-rename",
    zipball_url: "https://api.github.com/repos/ff0000/rosy/zipball/rbp-folder-rename",
    tarball_url: "https://api.github.com/repos/ff0000/rosy/tarball/rbp-folder-rename",
    commit: {
        sha: "09ebda2678d932a005fc86ab78f6c04eebdcd50d",
        url: "https://api.github.com/repos/ff0000/rosy/commits/09ebda2678d932a005fc86ab78f6c04eebdcd50d"
    }
},
{
    name: "2.0.10",
    zipball_url: "https://api.github.com/repos/ff0000/rosy/zipball/2.0.10",
    tarball_url: "https://api.github.com/repos/ff0000/rosy/tarball/2.0.10",
    commit: {
        sha: "fe284c7d461107d9d08d2d4dcb676759f9485fc1",
        url: "https://api.github.com/repos/ff0000/rosy/commits/fe284c7d461107d9d08d2d4dcb676759f9485fc1"
    }
},

// ....

{
    name: "2.1.5",
    zipball_url: "https://api.github.com/repos/ff0000/rosy/zipball/2.1.5",
    tarball_url: "https://api.github.com/repos/ff0000/rosy/tarball/2.1.5",
    commit: {
        sha: "db92baa49657b3c3d27b1475c415c19525cb2118",
        url: "https://api.github.com/repos/ff0000/rosy/commits/db92baa49657b3c3d27b1475c415c19525cb2118"
    }
}] 
```

### 问题

1.  此列表顶部似乎有最新的标签，然后是按时间倒序排列的以前标签的历史记录。为什么？第一个结果的排序与其他结果不同，这似乎很奇怪，也许我读错了？
2.  有没有办法以编程方式检索仅应用于`master`分支的最新版本？我想以编程方式检索 repo 的最新稳定版本。

任何帮助/见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-29T01:45:25.957

获取最新版本号：

```
https://api.github.com/repos/user/repo/releases/latest 
```

例如，对于这个 repo ( [https://github.com/pyIDM/PyIDM](https://github.com/pyIDM/PyIDM) )，你可以使用下面的 url：

```
https://api.github.com/repos/pyidm/pyidm/releases/latest 
```

您将获得一个带有 tag_name=latest 版本的 json 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-02T00:11:02.300

> 此列表顶部似乎有最新的标签，然后是按时间倒序排列的以前标签的历史记录。

您不应该依赖 GitHub API 返回标签的顺序，因为没有时间戳，并且 repo 贡献者可能使用了不一致的标签名称，例如`v1.9.0`和`2.5.14`. 在该特定示例中，`v1.9.0`将首先显示 - 请参阅[此 repo](https://web.archive.org/web/20150901210847/https://api.github.com/repos/webix-hub/tracker/tags)。

您应该让维护者使用一致的标签（[example](https://github.com/webix-hub/tracker/issues/248)），并根据[semver](http://semver.org/)规则对 GitHub 的输出进行排序。由于这些规则很重要（请参阅该链接的第 11 点），因此最好使用[semver 库](https://docs.npmjs.com/misc/semver)（[为浏览器移植](https://github.com/hippich/bower-semver)）。

```
var gitHubPath = 'ff0000/rosy';  // your example repo
var url = 'https://api.github.com/repos/' + gitHubPath + '/tags';

$.get(url).done(function (data) {
  var versions = data.sort(function (v1, v2) {
    return semver.compare(v2.name, v1.name)
  });
  $('#result').html(versions[0].name);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://rawgit.com/hippich/bower-semver/master/semver.min.js"></script>
<p>Latest tag: <span id="result"></span></p>
```

# 获取最新的“稳定”版本

GitHub 版本有一个`prerelease`标志，可以是真或假。如果您将“稳定”定义为`prerelease: false`，那么您可以获取版本、过滤`prerelease: false`和排序。

```
var gitHubPath = 'idorecall/selection-menu';  // your example repo doesn't have releases
var url = 'https://api.github.com/repos/' + gitHubPath + '/releases';

$.get(url).done(function (data) {
  var releases = data.filter(function (release) {
    return !release.prerelease;
  })
  releases = releases.sort(function (v1, v2) {
    return Date.parse(v2.published_at) - Date.parse(v1.published_at);
  });
  console.log(releases[0]);
  $('#result').html(releases[0].name);
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<p>Latest release name: <span id="result"></span></p>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T06:41:18.440

您可以简单地将标签替换为分支名称：

```
https://api.github.com/repos/ff0000/rosy/zipball/master 
```

[请参阅“无论如何以编程方式获取私有 github 存储库的 zipball？](https://stackoverflow.com/q/9504791/6309) ”中该查询的更一般形式（对于给定分支）。

但这假设一个 repo 的最新稳定版本在`master`（它可能是最新的“开发”，在它编译并通过基本单元测试的事实之后可能不是很稳定）：每个项目都可以有自己的约定。

对于它的价值，`https://api.github.com/repos/ff0000/rosy/branches`会列出同一个 repo 的分支。

# ios - 如何找出 UILabel wordwraps 的时间

> ID：14866534
> 
> 赞同：1
> 
> 时间：2013-02-14T01:48:47.057
> 
> 标签：ios, uitableview, nsstring, uilabel

我为我的 s 创建了几个不同`UITableViewCell`的 s `tableViewController`，这是因为我有不同的数据位要显示，具体取决于返回的内容。正因为如此，每个`UITableViewCell`人的高度都不一样。

这一切都很好，但是我的一个`UILabel`s 必须显示一个大的`NSString`，大到我不得不将它换行到第二行，这里唯一的问题是它弄乱了我的`UITableViewCell`格式。

`UILabel`我的问题是，当接收 a`NSString`必须使用 wordrap时，是否可以标记或捕获某种类型的操作，因为它的大小`NSString`太长？

或者有没有办法计算物理长度（不是字符串中有多少个字符），`NSString`所以我可以决定嘿我需要重新格式化我的`UITableViewCell`..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:33:13.210

通常的方法是使用 sizeWithFont:constrainedToSize:lineBreakMode: 来获取字符串的大小。你像这样使用它：

```
CGSize stringSize = [theString sizeWithFont:[UIFont fontWithName:@"Helvetica Neue" size:12] constrainedToSize:CGSizeMake(320, 3000) lineBreakMode:NSLineBreakByWordWrapping ]; 
```

这是为表格单元格的整个宽度设置的，但您可能希望使用标签的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:05:55.470

我不知道我是否理解得很好，但你有你的 tableviewcell 的高度吗？并且您可能在 UITextView 中有一个 NSString，并且 textview 的内容高度高于 tableviewcell。好吧，你应该首先计算 UITextview 的内容，添加到一个列表中，当 heightforRowAtindexPath 被调用时，你应该计算新的高度（内容 textview）加上一些东西......并且要解决最大长度，你应该计算字符的限制或限制对于线..

一些有用的代码：

```
//resize height with content of UITextView
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame;

//delegate textview to calculate limit for text.
- (void)textViewDidChange:(UITextView *)textView{

NSInteger restrictedLength=140;

NSString *temp=textView.text;

if([[textView text] length] > restrictedLength){
    textView.text=[temp substringToIndex:[temp length]-1];
} 
```

}

请记住，您需要在调用 heightforRowAtIndexPath 之前从 UITextview 计算限制/大小内容。当它调用时，您已经需要知道单元格的最大高度。

# apache-flex - flex继承类共享

> ID：14866538
> 
> 赞同：0
> 
> 时间：2013-02-14T01:49:30.180
> 
> 标签：apache-flex, class, inheritance, share

```
//Base.as
public class Base
{
    private var _foo:String;

    [Bindable]
    public function set foo(value:String):void
    {
        _foo = value;
    }

    public function get foo():String
    {
        return _foo;
    }

    /*
    Many many setter/getter, methods, events
    */
}

//Control.as
public class MyControl extends Group
{
    public function MyControl()
    {
    }
}

//Window.as
public class MyWindow extends spark.components.Window
{
    public function MyWindow()
    {
    }
}

//Module
public class MyModule extends spark.modules.Module
{
    public function MyModule()
    {
    }
} 
```

我想在其他类上公开（友好的）基本属性、方法和事件。像这样的东西：

```
var window:MyWindow = new MyWindow();
window.foo = 'Hello World!';
var module:MyModule = new MyModule();
module.foo = 'bar';

<namespace:MyControl foo="Hello World!"/> 
```

我不想定义每个类中的所有属性，因为它们很多且对所有类都相同。

理想情况下会定义如下内容：

```
public class MyControl extends Group, Base
{
    public function MyControl()
    {
    }
} 
```

（我知道这是不可能的。）

谢谢！

**更新：** 再次感谢！

也许这更能说明我的需求......在业务层上，我有一个名为 processID 的变量（以及 businessID、operationID、localityID 等），它从 Menu 传递给 Window，然后 Window 将其传递给 Module。在 Module Container 上，我有一个 CustomComponent 使用此变量作为参数查询数据库。这适用于模块上的所有（几乎）组件。这些变量被定义为级别业务层，然后我定义了一个类来存储和管理这些变量（以及使用业务逻辑与这些变量一起操作的一些相关方法），因此我可以为每个环境创建一个独立的类（或库）以重用我的常用组件。这个想法是......插入一个新的 CustomComponent 并通过 mxml 设置这些变量，如下所示：

```
<custom:MyCustomComponent id="zzz" processID="{processID}" businessID="{businessID}"/> 
```

模块具有设置（不）任何变量的业务逻辑。

否则，我将不得不为 CustomComponent（和模块）实现不同的逻辑以读取父级的变量，并仅在 MyWindow 中定义这些变量（使用复合模式）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:54:22.017

您可以从以下链接获得答案 -

[http://flexinonroids.wordpress.com/2009/05/27/flex-3-dynamically-loading-components-at-runtime/](http://flexinonroids.wordpress.com/2009/05/27/flex-3-dynamically-loading-components-at-runtime/) [http://thecomcor.blogspot.in/2007/11/adobe-flex-dynamically-加载类.html](http://thecomcor.blogspot.in/2007/11/adobe-flex-dynamically-loading-classes.html)

或者您可以按照以下方法 -

1) 创建一个接口作为基础
2) 使用接口扩展您的类
3) 在运行时使用 SWFLoader.loaderContext.applicationDomain.getDefinition 方法加载类

谢谢，

瓦伦

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:48:02.227

您可以将需要友好访问的类与您的`Base`类放在同一个包中，并定义不带任何访问修饰符的私有字段（相当于`internal`修饰符）。

否则，您可以像这样定义命名空间：

`namespace my_internal;`

然后像这样定义类成员：

`my_internal var _foo:String;`

之后，这些成员将对所有代码隐藏，除了包含

`use namespace my_internal;`

您可以在此处阅读更多信息：http: [//help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9e.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f91](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9e.html#WS5b3ccc516d4fbf351e63e3d118a9b90204-7f91)

但是，使用“朋友访问”可能是设计不佳的证据，所以如果我是你，我会在定义名称空间之前三思而后行。

**更新：**

伪超类 1：

```
package proxy
{
    public class Simple1
    {
        public var x:int;
        public var y:int;
    }
} 
```

伪超类 2：

```
package proxy
{
    import mx.controls.Alert;
    public class Simple2
    {
        public var name:String = 'noname';
        public function doAlert():void{
            Alert.show(name);
        }

        //not normal method to replace 'this' with proxy
        Simple2.prototype.doCrossClass =  function doCrossClass():void{
            Alert.show(''+(Number(this['x'])+Number(this['y'])));
        }
    }
} 
```

测试结果的代码（看起来和你期望的一样？）：

```
var mega:Mega = new Mega();
mega.x = 100;
mega.y = 200;
mega.name = 'Multiple inheritance';
mega.doAlert();
mega.doCrossClass(); //300 
```

现在是具有多重继承的伪子类：

```
package proxy
{
    import flash.utils.Proxy;
    import flash.utils.flash_proxy;

    public dynamic class Mega extends Proxy
    {
        public function Mega()
        {
            super();
        }

        public var superArray:Array = [new Simple1(), new Simple2()];

        flash_proxy override function getProperty(name:*):*{
            for each(var superClass:Object in superArray){
                if( name in superClass){
                    return superClass[name];
                }
            }
            throw new Error('no such property');
        }

        flash_proxy override function setProperty(name:*, value:*):void{
            for each(var superClass:Object in superArray){
                if( name in superClass){
                    superClass[name] = value;
                    return;
                }
            }
            throw new Error('no such property');
        }

        flash_proxy override function callProperty(name:*, ...args):*{
            for each(var superClass:Object in superArray){
                if( name in superClass){
                    var f:Function = superClass[name] as Function;                  
                    return f.apply(this, args);
                }
            }
            throw new Error('no such function');
        }
    }
} 
```

您还可以使用类似 javascript 的类构造（即仅使用简单的 Object 并以您想要的任何组合为其分配属性和函数）。

# javascript - 如何使用 MVC4 和 Razor 设置 javascript 变量

> ID：14866539
> 
> 赞同：50
> 
> 时间：2013-02-14T01:49:35.233
> 
> 标签：javascript, c#, asp.net-mvc, asp.net-core, .net-core

有人可以格式化下面的代码，以便我可以使用 razor 使用 c# 代码设置 srcript 变量吗？

下面的方法不起作用，我知道这样做很容易让别人帮忙。

```
@{int proID = 123; int nonProID = 456;}

<script type="text/javascript">
    @{

     <text>  

    var nonID =@nonProID;
    var proID= @proID;
    window.nonID = @nonProID;
    window.proID=@proID;

    </text>
}
</script> 
```

我收到设计时错误

![在此处输入图像描述](../Images/ea6aa7070468bed10e441a92f8f16361.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-02-14T01:51:45.367

您应该查看剃刀页面产生的输出。实际上，您需要知道`server-side`and执行了什么`client-side`。试试这个：

```
@{
    int proID = 123; 
    int nonProID = 456;
}

<script>

    var nonID = @nonProID;
    var proID = @proID;
    window.nonID = @nonProID;
    window.proID = @proID;

</script> 
```

输出应该是这样的：

![在此处输入图像描述](../Images/c70c04410c214b51bd3c53ea6b794560.png)

根据您使用的 Visual Studio 版本，它会在设计时为带有剃刀的视图指出一些亮点。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-17T18:30:29.710

由于在处理视图时可能会出现 razor 语法错误，因此我完全明白为什么要避免它们。这是其他几个选项。

```
<script type="text/javascript">
    // @Model.Count is an int
    var count = '@Model.Count';
    var countInt = parseInt('@Model.ActiveLocsCount');
</script> 
```

引号充当分隔符，因此剃刀解析器很高兴。但当然，您的 C# int 在第一条语句中变成了 JS 字符串。对于纯粹主义者来说，第二种选择可能更好。

如果有人有更好的方法来做到这一点而不会出现剃刀语法错误，特别是维护 var 的类型，我很乐意看到它！

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-10-02T00:01:39.110

这就是我解决问题的方法：

```
@{int proID = 123; int nonProID = 456;}

<script type="text/javascript">
var nonID = Number(@nonProID);
var proID = Number(@proID);
</script> 
```

它是自记录的，不涉及到文本的转换。

* * *

注意：小心使用`Number()`函数而不是创建`new Number()`对象 - 因为完全等于运算符可能会以不明显的方式表现：

```
var y = new Number(123); // Note incorrect usage of "new"
var x = new Number(123);
alert(y === 123); // displays false
alert(x == y); // displays false 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-03-14T22:26:04.377

我已经看到了几种解决该错误的方法，并且我运行了一些计时测试以查看什么对速度有效（[http://jsfiddle.net/5dwwy/](http://jsfiddle.net/5dwwy/)）

## 方法：

1.  直接赋值

    在这种方法中，剃刀语法直接分配给变量。这就是引发错误的原因。作为基线，JavaScript 速度测试只是将数字直接分配给变量。

2.  通过 `Number` 构造函数

    在这种方法中，我们将 razor 语法包装在对“Number”构造函数的调用中，就像在“Number(@ViewBag.Value)”中一样。

3.  解析整数

    在这种方法中，剃刀语法放在引号内并传递给 `parseInt` 函数。

4.  价值返回功能

    在这种方法中，创建了一个函数，它简单地将剃刀语法作为参数并返回它。

5.  类型检查功能

    在这种方法中，该函数执行一些基本的类型检查（基本上是寻找 null），如果它不为 null，则返回该值。

## 程序：

使用上面提到的每种方法，a`for-loop`重复每个函数调用 10M 次，得到整个循环的总时间。然后，该 for 循环重复 30 次以获得每 10M 动作的平均时间。然后将这些时间相互比较，以确定哪些动作比其他动作更快。

请注意，由于它是在运行 JavaScript，因此其他人收到的实际数字会有所不同，但重要性不在于实际数字，而是数字与其他数字的比较。

## 结果：

使用直接分配方法，处理 10M 分配的平均时间为 98.033 毫秒。使用`Number`构造函数每 10M 产生 1554.93ms。同样，该`parseInt`方法耗时 1404.27ms。两个函数调用对于简单函数花费了 97.5ms，对于更复杂的函数花费了 101.4ms。

## 结论：

要理解的最简洁的代码是直接赋值。但是，由于 Visual Studio 中的错误，这会报告错误，并可能导致 Intellisense 出现问题并给人一种模糊的错误感。

最快的代码是简单的函数调用，但只差一点点。由于我没有做进一步的分析，我不知道这种差异是否具有统计学意义。类型检查功能也非常快，仅比直接赋值稍慢，并且包括变量可能为空的可能性。但是，这并不实际，因为如果参数未定义（剃刀语法中的 null），即使是基本函数也会返回 undefined。

将 razor 值解析为 int 并通过构造函数运行它非常慢，比直接赋值慢 15 倍。很可能`Number`构造函数实际上是在内部调用`parseInt`，这可以解释为什么它比简单的`parseInt`. 然而，它们确实具有更有意义的优点，不需要执行外部定义的（即文件或应用程序中的其他地方）函数，`Number`构造函数实际上最小化了整数到字符串的可见转换。

最重要的是，这些数字是通过 10M 次迭代生成的。单品上，速度小得不可估量。对于大多数人来说，简单地通过`Number`构造函数运行它可能是最易读的代码，尽管它是最慢的。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2014-04-28T13:17:28.253

```
@{
int proID = 123; 
int nonProID = 456;
}

<script>

var nonID = '@nonProID';
var proID = '@proID';
window.nonID = '@nonProID';
window.proID = '@proID';

</script> 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-09-22T07:23:50.587

一种简单的方法是：

```
<input type="hidden" id="SaleDateValue" value="@ViewBag.SaleDate" />
<input type="hidden" id="VoidItem" value="@Model.SecurityControl["VoidItem"].ToString()" /> 
```

然后在javascript中获取值：

```
var SaleDate = document.getElementById('SaleDateValue').value;
var Item = document.getElementById('VoidItem').value; 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-09-20T14:16:55.637

我找到了一个非常干净的解决方案，它允许单独的逻辑和 GUI：

在你的 razor .cshtml 页面中试试这个：

```
<body id="myId" data-my-variable="myValue">

...your page code here

</body> 
```

在您的 .js 文件或 .ts （如果您使用 typeScript）中从您的视图中读取存储的值，放置一些像这样的内容（需要 jquery 库）：

```
$("#myId").data("my-variable") 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-07-17T14:35:39.847

与其说是一个警示故事，不如说是一个答案：这也困扰着我——我认为我有一个解决方案，方法是在前面加上一个零并使用`@(...)`语法。即您的代码将是：

```
var nonID = 0@(nonProID);
var proID = 0@(proID); 
```

获得如下输出：

```
var nonId = 0123; 
```

我没有意识到这就是 JavaScript（版本 3）如何表示八进制/base-8 数字并且实际上正在改变值。此外，如果您使用该`"use strict";`命令，那么它将完全破坏您的代码，因为八进制数已被删除。

我仍在寻找适当的解决方案。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-12-12T15:08:58.587

如果您执行以下操作，它会起作用：

```
var proID = @proID + 0; 
```

它产生的代码类似于：

```
var proID = 4 + 0; 
```

肯定有点奇怪，但至少没有更多的假语法错误。遗憾的是，VS2013 中仍然报告了这些错误，所以这个问题（还没有）得到妥善解决。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-02-25T20:55:40.320

我一直在研究这种方法：

```
function getServerObject(serverObject) {
  if (typeof serverObject === "undefined") {
    return null;
  }
  return serverObject;
}

var itCameFromDotNet = getServerObject(@dotNetObject); 
```

对我来说，这似乎使它在 JS 方面更安全......最坏的情况是你最终得到一个空变量。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-09-18T13:34:38.760

这应该涵盖所有主要类型：

```
public class ViewBagUtils
{
    public static string ToJavascriptValue(dynamic val)
    {
        if (val == null) return "null";
        if (val is string) return val;
        if (val is bool) return val.ToString().ToLower();
        if (val is DateTime) return val.ToString();
        if (double.TryParse(val.ToString(), out double dval)) return dval.ToString();

        throw new ArgumentException("Could not convert value.");
    }
} 
```

在`<script>`标签内的 .cshtml 文件中：

```
@using Namespace_Of_ViewBagUtils
const someValue = @ViewBagUtils.ToJavascriptValue(ViewBag.SomeValue); 
```

请注意，对于字符串值，您必须`@ViewBagUtils`在单（或双）引号内使用表达式，如下所示：

```
const someValue = "@ViewBagUtils.ToJavascriptValue(ViewBag.SomeValue)"; 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-12T16:10:00.837

我使用一个非常简单的方法来解决与代码混合的代码`function`体中的语法错误**；）**`JavaScript``Razor`

 **```
function n(num){return num;}

var nonID = n(@nonProID);
var proID= n(@proID); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-09-20T18:34:01.897

这直接从 web.config 定义的 appSetting 为我设置了一个 JavaScript var。

```
var pv = '@System.Web.Configuration.WebConfigurationManager.AppSettings["pv"]'; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-01T19:19:37.273

和

```
var jsVar = JSON.parse(@Html.Raw(Json.Serialize(razorObject))); 
```

您可以将任何 razor 对象解析为 JavaScript 对象。

它很长但普遍**

# javascript - 从多个数组Javascript返回第二个值

> ID：14866540
> 
> 赞同：0
> 
> 时间：2013-02-14T01:49:37.130
> 
> 标签：javascript, arrays

如何从一组数组中返回第一个值？

```
var arr = [
    ['2009', 1000, 400, 800],
    ['2010', 1170, 460, 1200],
    ['2011', 660, 1120, 500],
    ['2012', 1030, 540, 800]
], res, i, a, b, c, d, e;

!function doMerge() {
    for(i = 0; i < arr.length; i++) {
        res = arr[i];       
        console.log(res.splice(1));
    }    
}(arr)

// get rid of years
// prints    
[1000, 400, 800] 
[1170, 460, 1200] 
[660, 1120, 500] 
[1030, 540, 800] 
```

我正在尝试构建这些值中的第一个的数组`[1000, 1170, 660, 1030]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:52:30.890

```
res = [];

function doMerge() {
    for(i = 0; i < arr.length; i++) {
        res.push(arr[i][1]);       
    }    
}

doMerge();

console.log(res); 
```

输出`[ 1000, 1170, 660, 1030 ]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:54:04.273

```
var arr = [
    ['2009', 1000, 400, 800],
    ['2010', 1170, 460, 1200],
    ['2011', 660, 1120, 500],
    ['2012', 1030, 540, 800]
];

var newArr = [];

for (var x = 0; x < arr.length; x++){
  newArr.push(arr[x][1]);
}

console.log(newArr); 
```

这是一个解决方案。

[http://jsfiddle.net/wcVZH/](http://jsfiddle.net/wcVZH/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:56:24.460

如果你不想要一个`for`or`while`循环，你可以用一行[`Array.prototype.map`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
var myArr = arr.map(function (a) {return a[1];}); 
```

# javascript - 使用同位素阅读 onLayout 时的 firefox 问题

> ID：14866544
> 
> 赞同：0
> 
> 时间：2013-02-14T01:49:50.220
> 
> 标签：javascript, jquery, firefox, jquery-isotope

我运行这个：

```
$(".navMore li a").on("click", function(e) {

e.preventDefault();

var clicked = $(this);

$('.loadContent').css('visibility', "visible");

$('.loading').css('visibility', "visible");

    $(".nav li").removeClass("active");
    $(this).parent().addClass("active");     

url = this.href + " .content";
$newItems = $('<div></div>').css('visibility', 'hidden').fadeTo('fast', 0);
$newItems.load(url, function(){
    $('#main').prepend( $newItems).isotope( 'reloadItems' ).isotope({ sortBy: 'original-order', onLayout: fadeIt }); <== fadeIt is the function I am calling
    $(".fotorama").fotorama();
    Shadowbox.setup();
    clicked.removeAttr("href");
    $('.loadContent').css('visibility', "hidden");
    $(".fotorama-fullscreen").bind('click', function(){
        $this = $(this);
        $("#wrapper").fadeTo(1000, 0,function(){
            $("#main").isotope("destroy");
            $this.parent().find(".fotorama").trigger('fullscreenopen');
            $("#wrapper").fadeTo(1000, 1);
        });
    });
});
}); 
```

然后这个：

```
function fadeIt() {
   alert("ciao");
   $("#main div").css("visibility", "visible").fadeTo(1000, 1);
} 
```

Chrome 很好，代码有效，我收到警报，而 Firefox 完全忽略它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T01:55:44.317

在外部删除`onLayout`和调用该函数可以解决它。[因此，我认为jquery isotope onLayout](http://isotope.metafizzy.co/docs/options.html#onlayout)和 firefox一定存在一些问题

# java - 更新从 HQL 中的 Select 获得的实体

> ID：14866548
> 
> 赞同：0
> 
> 时间：2013-02-14T01:50:44.307
> 
> 标签：java, hql

假设我从 SELECT 语句中获得了类对象列表，例如

```
List<MyClass> something = em.createQuery("SELECT m FROM MyClass m").getResultList(); 
```

我叫了几个二传手

```
for (MyClass thing : something)
thing.setName("a name"); 
```

将这些类对象更新回数据库的语法是什么？我会写类似的东西吗`UPDATE MyClass m SET m = :newObject . setParameter("newObject", thing);`

这纯粹是关于更新语法，尽管我知道管理器能够获取更改并将其写回数据库。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:15:10.427

您使用的是传统的休眠还是休眠 JPA 实现？对于传统休眠，如果您的代码使用 JPA hibernate 实现运行，则 yourSession.saveOrUpdate( **thing ) 应该可以工作，请使用 em.merge(** **thing** )；

# android - 在 Android 浏览器和桌面之间创建一致的尺寸？

> ID：14866555
> 
> 赞同：0
> 
> 时间：2013-02-14T01:51:25.157
> 
> 标签：android, web-applications, layout, scaling, dpi

我有一个在普通计算机上运行良好的网页，并且可以很好地处理缩小/您可以将窗口重新调整为您喜欢的任何大小，并且该应用程序仍然有用。如果您愿意，您也可以放大，`Ctrl``+`应用程序的布局将自动更改以适应。

现在让我们谈谈智能手机。我用
`<meta name="viewport" content="width=device-width"/>`

不幸的是，我的 Android 手机的 dpi 大约是普通电脑的两倍。简单的解决方案是放大，但我必须一直滚动。

我可以把所有东西都放在一个 中`position:fixed;width:100%` `div`，但这会产生相当不稳定的体验，因为滚动仍然可以访问。

这让我想到了最后一个解决方案，即我自己编写扩展代码来增加智能手机用户相关内容的大小。那么，我该怎么做呢？一种方法是检查用户代理，并使用它来更改我的 CSS。我不喜欢这样的原因有两个，1\. 它正在嗅探用户代理和 2\. 它假设 ~200dpi，而这实际上在手机之间非常重要。

如果有办法检测 dpi，我更喜欢这条路线。我可以这样做吗？你有更好的主意吗？

# vba - 高级排序

> ID：14866557
> 
> 赞同：0
> 
> 时间：2013-02-14T01:51:46.490
> 
> 标签：vba, date, sorting

例如`06-02-24052012-22860-A`

大家好，以上是我的主键，我想从顶部的最早日期，底部的最新日期排序。

06-02- `DDMMYYYY`-22860-A

所有其他数字都是随机的，日期位于中心。无论如何我可以用这样的主键进行排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:05:23.223

用 - 分割，然后使用正则表达式匹配日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T02:07:49.980

使用 MS Access SQL：

```
SELECT t.AKey, 
       DateSerial(Mid([AKey],11,4),Mid([AKey],9,2),Mid([AKey],7,2)) AS DSort
FROM table t
ORDER BY DateSerial(Mid([AKey],11,4),Mid([AKey],9,2),Mid([AKey],7,2)) AS DSort 
```

# mysql - mysql计算字符串的出现次数

> ID：14866565
> 
> 赞同：1
> 
> 时间：2013-02-14T01:52:27.597
> 
> 标签：mysql

我需要计算几个类别在列中出现的次数。它们存储为 Sports、Medicine 等字符串，列名称为 ct.category_name。

这是我正在适应的查询。我想要每个类别类型的列。

```
select co.order_id, co.catalog_item_id, ct.category_name               
from customer_order as co
join item_category as ic on (ic.item_id = co.customer_id )
join category_translations as ct on (ct.category_id = ic.category_id)
where co.paid = 1 and co.customer_id = 22500 and ct.locale = "en" 
```

当我将它放在 select 语句中时，它会计算所有内容，我可以看到原因，但我不确定该往哪个方向发展。

```
count(CASE 
    WHEN ct.category_name = "sports" THEN ct.category_name 
     ELSE 0 
    end) AS 'sports' 
```

同样，我希望每个字符串的计数成为它自己的列。任何帮助将非常感激。

当我尝试：

```
select co.order_id, co.catalog_item_id, ct.category_name
, SUM(ct.category_name = "sports") AS `sports`
, SUM(ct.category_name = "medici") AS `medicine`

from customer_order as co

join item_category as ic on (ic.item_id = co.customer_id )
join category_translations as ct on (ct.category_id = ic.category_id)

where co.paid = 1 and co.customer_id = 22500 and ct.locale = "en" 
```

它计算了两次运动。什么时候放错地方了？结果：

```
`23115  271708  sports  483 483` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:53:58.007

它计算所有内容，因为它会`COUNT`为每个非空值递增其值，而`0`不是`NULL`.

可能的解决方案：

*   替换`0`为`NULL`OR
*   使用`SUM`代替`COUNT`：

    ```
    SUM(CASE 
    WHEN ct.category_name = "sports" THEN 1
     ELSE 0 
    end) AS 'sports' 
    ```

甚至

```
SUM(ct.category_name = "sports") AS `sports` 
```

# php - 如何使片段修剪为人类可读的句子 - php

> ID：14866569
> 
> 赞同：0
> 
> 时间：2013-02-14T01:53:00.150
> 
> 标签：php, search, mysqli, code-snippets

首先，我要感谢帮助我创建了一个非常好的搜索结果查询。希望各位朋友能帮我改进一下。

这是查询

```
$searchresult = $mysql->query("SELECT * FROM pages WHERE PageContent LIKE '%$searchTerm%'");

if($searchresult->num_rows > 0) {

    while (($row = $searchresult->fetch_assoc()) !== null)
    {
        echo '<h3>' . $row["PageTitle"] . '</h1>';

        $position = strpos($row["PageContent"], $search);
        $snippet = substr($row["PageContent"], $position - 200, $position + 200);

        echo $snippet . '<hr><br />';  
    }

} else {
     echo "<p>Sorry, but we can not find an entry to match your query</p><br><br>"; 
} 
```

我喜欢做的是以不破坏任何单词的方式修剪片段，以便句子可读......并且如果可能的话，使搜索词以粗体显示。亲爱的朋友们，我需要你的帮助。谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:30:51.920

有很大的改进空间，但这里有一个方法：

```
<?php

echo trimsnippet("Some really, really, really reaaally long text I don't really care about, at all.", "text", 30) . "\n";

function trimsnippet($text, $query, $max_length){
  $position = strpos($text, $query); 
  $snippet = substr($text, max($position - $max_length - 1, 0), strlen($query) + $max_length*2 + 1);
  echo "<$snippet>\n";
  preg_match("/[^\w](?P<pre>.*)".$query."(?P<post>.*)[^\w]/", $snippet, $extracted); 
  return $extracted["pre"]."<strong>".$query."</strong>".$extracted["post"];
} 
```

### 输出：

真的，真的很长的**文字**，我真的不在乎，

### 如何使用它：

忽略第一行（echo ...），这只是一个演示。将函数放在使用它的 php 中的任何位置，然后替换您的行：

```
 $position = strpos($row["PageContent"], $search);
    $snippet = substr($row["PageContent"], $position - 200, $position + 200) 
```

和：

```
 $snippet = trimsnippet($row["PageContent"], $search, 200); 
```

### 您可以对此功能进行一些改进：

*   检查 $query 是否真的出现在 $text
*   在结果的开头或结尾添加省略号 (...)
*   控制当 $query 接近开头和结尾时会发生什么（并避免在这种情况下添加省略号）
*   清理 $query （可能还有 $text ），使其不能包含可能与您的正则表达式模式混淆的“正则表达式语法”。

# php - WHMCS PHP Sessions Not working

> ID：14866573
> 
> 赞同：0
> 
> 时间：2013-02-14T01:53:36.753
> 
> 标签：php, session, debian, whmcs

My WHMCS installation suddenly stopped working two days ago. I can access the client area, but can't login... after I input the correct details, the browser keeps trying to load a page but no page ever loads. I created a test file and confirmed it an issue with PHP sessions. Seeing as it's probably not the script, since WHMCS is a widely-used and tested software, I'm trying to figure out what possible configurations could cause php sessions to not work. /tmp is writable, and I set the directory specified in php.in, session.save_path = "/var/lib/php/session" to 777 permissions. I read somehwere that the session.save_path folder should NOT be under the user control of root; mine is. What should I set it to? I have no other users. In the gc.compatibility was 1 and I set it to 0, and restarted httpd, but still can't login. Here's the phpinfo:

```
http://192.155.82.64/clients/phpinfo.php 
```

This is running on the latest Debian distro. Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-05-07T15:43:54.703

您在使用 Cloudflare 吗？如果是这样，请确保将防火墙设置为 LOW。

或者，转到 WHMCS 设置 > 安全并选中禁用会话 IP 检查。

检查 WHMCS 管理日志后，我注意到我是从 Cloudflare ips 登录的，每次 ip 更改时，我都会注销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:49:44.397

您的会话目录 (/var/lib/php/session) 不应设置为 root 用户。它需要设置为运行 Apache 的用户和组（有时是它的 apache，或者没有人）。您可以通过定位 PHPSESSID cookie 值来检查目录是否存在问题，并查看是否在会话目录中创建了文件。您可以尝试向 WHMCS 询问此事，但他们可能会向您收取时间费用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-21T14:39:05.030

我遇到了同样的问题，并且`session.auto_start`启用了罪魁祸首。禁用它后，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T10:06:21.390

我有同样的问题并通过禁用`zlib.output_compression`我的`php.ini`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-03-30T15:58:43.503

检查您的`.htaccess`文件并将其重命名为`.htaccess2`只是为了确保它不会弄乱它。

您可以通过设置会话配置、参数等在此文件中设置可能导致问题的 PHP 配置。

# java - 使用 Regex Java 从文件中获取所有 IP 地址

> ID：14866578
> 
> 赞同：0
> 
> 时间：2013-02-14T01:54:06.020
> 
> 标签：java, regex

我正在尝试读取文本文件，搜索所有有效的 IP 地址并打印它们。使用 Scanner 类读取文件，文件的全部内容存储在字符串中；然后我使用 Java 的 util.regex Pattern 和 Matcher 来搜索所有有效的 IP 地址并一一打印出来。这是我到目前为止写的代码：

```
 String inp ="";
    File file = new File("C:\\input.txt");
    try {
        Scanner scan = new Scanner(file);
        while(scan.hasNextLine()) {
            inp += scan.nextLine() + " ";
        }
    } catch (FileNotFoundException f) {
        f.printStackTrace();
    }

    System.out.println("File inp string is "+inp);
    Pattern pattern = 
        Pattern.compile("^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)");
    Matcher match = pattern.matcher(inp);
    while(match.find()) {
        System.out.println("IP found: "+match.group());
    } 
```

该文件的内容如下：

```
127.0.0.1 1:00 AM
User entered host
255.1.2.2 11:00 PM
127.0.0.1 1:00 AM 
```

我得到的输出是：

```
File inp string is 127.0.0.1 1:00 AM User entered host 255.1.2.2 11:00 PM 127.0.0.1 1:00 AM 
IP found: 127.0.0.1 
```

这是我从输入字符串中获得的唯一 IP。我不明白为什么模式匹配器会忽略其他 3 个 IP。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:59:44.217

从您的正则表达式的开头删除，或在您从文件中读取的每一行之后`^`添加新的行标记。`\n`

Also don't concatenate lines of your file with `+=` operator because it creates new String every time you do it. Instead use [`StringBuilder#append(yourLine)`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#append%28java.lang.String%29).

# java - 在突破性比赛球速方面需要帮助

> ID：14866580
> 
> 赞同：1
> 
> 时间：2013-02-14T01:54:20.293
> 
> 标签：java

这是一个 12 年级的面向对象编程项目。

我有一个名为 Ball 的类来构造我的球对象。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.*;

public class Ball{
    private double xPos;
    private double yPos;
    private int direction;
    public Ball(int ixPos, int iyPos, int idirection){
        xPos = ixPos;
        yPos = iyPos;
        direction = idirection;
    }
    public int returnX(){
        return (int)xPos;
    }
    public int returnY(){
        return (int)yPos;
    }
    public int returnDirection(){
        return direction;
    }
    public void move(){
        xPos += 1*Math.cos(Math.toRadians(direction));
        yPos -= 1*Math.sin(Math.toRadians(direction));
    }
    public void collide(int collideWith){
        if(collideWith==1){//collide with left wall
            if(90<direction && direction<180){
                direction = 180-direction;
            }
            if(180<direction && direction<270){
                direction = 540-direction;
            }
        }
        if(collideWith==2){//collide with right wall
            if(0<direction && direction<90){
                direction = 180-direction;
            }
            if(270<direction && direction<360){
                direction = 540-direction;
            }
        }
        if(collideWith==3){//collide with up wall
            if(0<direction && direction<90){
                direction = 360-direction;
            }
            if(90<direction && direction<180){
                direction = 360-direction;
            }
        }
        if(collideWith==4){//collide with down wall
            direction = 360-direction;
        }
    }
    public void collidePaddle(int collidePos){
        if(collidePos!=50 && collidePos!=0){
            direction = (50-collidePos)*180/50;
        }
    }
} 
```

正如您在“移动”功能中看到的那样，现在球的速度非常低。但我需要球跑得更快。如果我将 1 更改为 5 之类的东西，就会出现问题。在我的主要课程中，它检查球是否撞到墙壁或块以改变方向，如果球每次可以移动的像素量大于 1，则球将进入墙壁或块。

对我来说，似乎没有办法解决这个问题，不知道我会从哪里开始思考，有没有更好的方法来检查碰撞或其他什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:01:20.850

`collidePaddle`您应该允许范围，而不是在检查中使用绝对检查。

例如...

```
public void collidePaddle(int collidePos){
    if (collidePos >= 50) {
        direction = (50-collidePos)*180/50;
        // Correct the position of the ball to meet the minimum requirements
        // of the collision...
    } else if (collidePos <= 0) {
        direction = (50-collidePos)*180/50;
        // Correct the position of the ball to meet the minimum requirements
        // of the collision...
    }
} 
```

（抱歉，我很高兴编写您的代码；））

这将允许球在虚拟环境中“传球”超出这些点，但如果您纠正位置以进行补偿，它应该没有区别......当它被渲染时......

**更新**

这是我所说的一个非常简单的例子......

```
public class SimpleBouncyBall {

    public static void main(String[] args) {
        new SimpleBouncyBall();
    }

    public SimpleBouncyBall() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new CourtPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class CourtPane extends JPanel {

        private Ball ball;
        private int speed = 5;

        public CourtPane() {
            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Rectangle bounds = new Rectangle(new Point(0, 0), getSize());
                    if (ball == null) {
                        ball = new Ball(bounds);
                    }
                    speed = ball.move(speed, bounds);
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(100, 100);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            if (ball != null) {
                Graphics2D g2d = (Graphics2D) g.create();
                g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                Point p = ball.getPoint();
                g2d.translate(p.x, p.y);
                ball.paint(g2d);
                g2d.dispose();
            }
        }

    }

    public class Ball {

        private Point p;
        private int radius = 12;

        public Ball(Rectangle bounds) {                
            p = new Point();
            p.x = 0;
            p.y = bounds.y + (bounds.height - radius) / 2;                
        }

        public Point getPoint() {
            return p;
        }

        public int move(int speed, Rectangle bounds) {                
            p.x += speed;
            if (p.x + radius >= (bounds.x + bounds.width)) {                    
                speed *= -1;
                p.x = ((bounds.x + bounds.width) - radius) + speed;                    
            } else if (p.x <= bounds.x) {
                speed *= -1;
                p.x = bounds.x + speed;                    
            }
            p.y = bounds.y + (bounds.height - radius) / 2;                
            return speed;                
        }

        public void paint(Graphics2D g) {
            g.setColor(Color.RED);
            g.fillOval(0, 0, radius, radius);
        }            
    }        
} 
```

我的移动方法不在乎你是否已经越过了边界，因为它会将球重新定位到边界内

```
public int move(int speed, Rectangle bounds) {                
    // Apply the delta
    p.x += speed;
    // Have we passed beyond the right side??
    if (p.x + radius >= (bounds.x + bounds.width)) {                    
        speed *= -1;
        p.x = ((bounds.x + bounds.width) - radius) + speed;                    
    // Have we past beyond the left side??
    } else if (p.x <= bounds.x) {
        speed *= -1;
        p.x = bounds.x + speed;                    
    }
    p.y = bounds.y + (bounds.height - radius) / 2;                
    return speed;                
} 
```

玩转速度，看看你得到了什么；）

# php - 是否可以使用包含所有变量的 PHP if 语句？

> ID：14866581
> 
> 赞同：1
> 
> 时间：2013-02-14T01:54:20.483
> 
> 标签：php, if-statement

真的很简单的问题。我遇到了一个工作问题，将 >= <= 和 == 存储到一个变量中以便在任何情况下都吐出某些 if 语句是理想的。

```
$numb1 = 5
$numb2 = 10
$option = >=

if($numb1 $option $numb2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:55:15.673

并非没有使用`eval()`通常被认为是一个坏主意

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T01:59:42.547

直接这样做，只能使用[eval()](http://www.w3schools.com/php/func_misc_eval.asp) - 使用 eval 不被认为是好的做法。主要问题是如果 eval() 语句接受用户输入，则用户可以将 php 注入您的代码中。这显然很糟糕。请参阅此线程- [php 中的 eval 何时是邪恶的？](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)

你最好做的是为所有各种操作创建一系列 switch 语句，例如“大于”、“小于”、“等于”等等......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:06:14.223

对此最好的做法是进行函数调用或对象包装，然后调用该函数以达到相同的结果。

例子：

```
$func = '__my_eq_op_';

if ($func($numb1,$numb2)) {
  // Do stuff
} 
```

然后操作员函数...

```
function __my_eq_op($a,$b) {
  return $a == $b;
}

function __my_gte_op($a,$b) {
  return $a >= $b;
}

function __my_lte_op($a,$b) {
  return $a <= $b;
} 
```

例如。所以你真的可以把它分解成使用函数。

为了这：

如果 ($x == $y)

解析器看到 6 个标记... 1) KEYWORD IF: 2) LPAREN 3) VAR X 4) EQ 5) VAR Y 6) RPAREN

解析器使用这些标记为 IF 条件构造 AST。您的想法需要远离将“==”视为变量。是运营商！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T02:10:00.050

您不能在控制指令中放置一个 var 来测试它。这将返回一些：`syntax error, unexpected T_VARIABLE`

您可以使用一些 eval() 来执行此操作，但不建议这样做。

也许您可以通过以下方式做出不同的事情：

```
$option=$_GET['option']; // or POST or something else...
$numb1 = 5;
$numb2 = 10;

switch($option) {
 case ">=":
    if($numb1 >= $numb2){//someting}
    break;
 case "<=":
    if($numb1 <= $numb2){//someting}
    break;
 case "==":
    if($numb1 == $numb2){//someting}
    break;
 default://something else if there is no $option
    break;
} 
```

或使用如下功能

```
function testVar($numb1,$numb2,$option)
{
   // Same switch
} 
```

# android - android中的分层视图

> ID：14866582
> 
> 赞同：3
> 
> 时间：2013-02-14T01:54:38.573
> 
> 标签：android

我正在尝试用饼形块制作一个色轮，其中每块饼都是一个按钮。这是两个切片的代码。目前，第二个切片用白色背景覆盖了第一个切片。我的目标可能吗？

```
 ShapeDrawable slice1 = new ShapeDrawable(new ArcShape(0, 30));
    slice1.setIntrinsicHeight(100);     
    slice1.setIntrinsicWidth(100);     
    slice1.getPaint().setColor(Color.MAGENTA);
    View slice1View = (View) findViewById(R.id.slice1);
    slice1View.setBackgroundDrawable(slice1);
    slice1View.setOnClickListener(magentaButtonListener);

    ShapeDrawable slice2 = new ShapeDrawable(new ArcShape(30, 60));
    slice2.setIntrinsicHeight(100);
    slice2.setIntrinsicWidth(100);
    slice2.getPaint().setColor(Color.BLUE);
    View slice2View = (View) findViewById(R.id.slice2);
    slice1View.setBackgroundDrawable(slice2);
    slice1View.setOnClickListener(blueButtonListener); 
```

布局代码是：

```
 <FrameLayout
    android:layout_width="100dp"
    android:layout_height="100dp"
    android:id="@+id/pie" >

    <View
    android:id="@+id/slice1" 
    android:layout_width="40dp"
    android:layout_height="40dp"/>
    <View
    android:id="@+id/slice2" 
    android:layout_width="40dp"
    android:layout_height="40dp"/>

    </FrameLayout> 
```

**编辑！解决方案：** 我将 x 和 y 坐标设置为圆直径的一半。然后：我使用 getAngle 方法来计算角度，这将决定点击什么颜色。

```
//from StackOverflow post by Dave Discoid, at http://stackoverflow.com/questions/2676719/calculating-the-angle-between-the-line-defined-by-two-points

    public double getAngle(float x, float y )
    {
        double dx = x - DIAMETER/2;
        // Minus to correct for coord re-mapping
        double dy = -(y - DIAMETER/2);

        double inRads = Math.atan2(dy,dx);

        // We need to map to coord system when 0 degree is at 3 O'clock, 270 at 12 O'clock
        if (inRads < 0)
            inRads = Math.abs(inRads);
        else
            inRads = 2*Math.PI - inRads;

        return Math.toDegrees(inRads);
    } 
```

# c# - 用户名中的转义字符

> ID：14866584
> 
> 赞同：0
> 
> 时间：2013-02-14T01:54:48.543
> 
> 标签：c#, escaping

我有一个示例用户名：

公司\我的用户名

因此，如果我把它放在 C# 中，它想用 "\" 来逃避它，所以结果是：

corp\\myusername 但我需要是 corp\\myusername。任何想法如何让它工作？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T01:57:04.520

使用`verbatim string`

```
string username = @"corp\\myusername" 
```

或者

`"\\"`=`\`所以`"\\\\"`=`\\`

```
string username = "corp\\\\myusername" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:57:19.373

尝试在字符串前面添加一个“@”符号，如下所示：

```
String.Format(@"corp\myusername")

or double up the "\" to escape the escape :) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:59:13.113

使用逐字字符串文字。

[http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa691090(v=vs.71).aspx)

在文字前面加上“@”字符，然后您可以键入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T02:02:13.687

我想您正在尝试将域与用户名分开，以便在您的站点中使用 Windows 身份验证时获取应用程序的用户名，是吗？我还遇到了一些机器会以大写形式返回值，而有些机器会以小写形式返回值的问题，因此请小心在源代码（或数据库）中强制大小写！

```
 string windowsLogin = HttpContext.Current.User.Identity.Name;
    int hasDomain = windowsLogin.IndexOf(@"\");
    if (hasDomain > 0)
    {
        windowsLogin = windowsLogin.Remove(0, hasDomain + 1);
    }
    return windowsLogin.ToLower(); 
```

# php - 现在制作一个 DateTime 对象并从现在开始计算 1 小时 php

> ID：14866596
> 
> 赞同：1
> 
> 时间：2013-02-14T01:56:29.013
> 
> 标签：php, mysql, datetime

我有一些 PHP 代码：

```
$time = new DateTime();
$sub = new DateInterval('P1H');
echo $time->sub($sub); 
```

我收到此错误：

```
Fatal error: Uncaught exception 'Exception' with message 
'DateInterval::__construct(): Unknown or bad format (P1H)' 
in C:\xampp\htdocs\dailylog\test.php:4 Stack trace: #0 
C:\xampp\htdocs\dailylog\test.php(4): DateInterval->__construct('P1H') 
#1 {main} thrown in C:\xampp\htdocs\dailylog\test.php on line 4 
```

我究竟做错了什么？我怎样才能让它工作？

编辑：我想我实际上会从数据库中提取时间并检查是否已经 + 1 小时。所以，很抱歉没有说清楚。

编辑#2：因为我不能回答我自己的问题......这就是我要说的：

我自己做了一个测试，效果很好！这是代码：

```
try {
    $time = new DateTime();
    $add = new DateInterval('PT1H');
    $test = new DateTime();
    $ing = new DateInterval('PT1H');

    $time->add($add);
    $test->add($ing);

    if ($time->format('g:i a') == $test->format('g:i a')) {
        echo 'Match';
    }
     else {
        echo 'No match';
    }
}
 catch (Exception $e) {
    echo $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:00:16.357

您的`DateInterval`值存在格式问题和语法错误：

```
<?php
$time = new DateTime();
$sub = new DateInterval('PT1H'); // <-- error #1
$time->add($sub);                // <-- error #2
echo $time->format('c');         // Here you can format your time 
```

[看到它在行动](http://3v4l.org/mA41l)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:59:31.110

尝试仅`strtotime`在 MySQL 中存储的值上运行，然后添加`3600`到它并与之进行比较`time()`（如果修改后的值小于，您希望允许访问`time()`）

# knockout.js - 从可观察数组中剔除 + 填充值，但在数组更新时不更新值

> ID：14866597
> 
> 赞同：1
> 
> 时间：2013-02-14T01:56:33.337
> 
> 标签：knockout.js, ko.observablearray

我想获取可观察数组中的值并将它们显示在下拉列表中，但是我不希望下拉列表中的值随着可观察数组的变化而更新？由于其他原因，该数组必须是可观察的。

我知道会有一个简单的方法来做到这一点！

这是一个[小提琴](http://jsfiddle.net/uZ6Yy/1/)来解释我的意思和下面的代码。

视图模型：

```
ViewModel = function () {
    var self = this;
    self.Owners = ko.observableArray([
        {FullName: 'Bob Jones',Id: 1},
        {FullName: 'Joe Bloggs',Id: 2},
        {FullName: 'Joe Bloggs',Id: 2}
    ]);

    self.GetOwners = function () {
        var ownerIds = [],
            addedIds = [],
            count = 0;

        var owners = ko.utils.arrayForEach(self.Owners(), function (owner) {
            if (addedIds.indexOf(owner.Id) == -1) {
                addedIds[count] = owner.Id;
                ownerIds[count] = {
                    FullName: owner.FullName,
                    Id: owner.Id
                };

                count++;
            }
        });

        return ownerIds;
    }

    self.Add = function() {
        self.Owners.push({ FullName: 'Jane Doe', Id: 3 });
    }
};

var vm = new ViewModel();
ko.applyBindings(vm); 
```

HTML：

```
<select data-bind="options: GetOwners(), optionsText: 'FullName', optionsValue: 'Id'">    </select>
<!-- I dont want the values in this select to update when I add an owner by clicking the button below -->

<button data-bind="click: Add">Add</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T02:04:28.673

听起来您应该只对下拉列表中的值使用第二个 observableArray。这样，原始的 observable 就可以在没有影响的情况下发生变化。

# java - 初始化默认 SSL 上下文失败

> ID：14866600
> 
> 赞同：1
> 
> 时间：2013-02-14T01:56:41.697
> 
> 标签：java, json, rest, ssl, apache-httpclient-4.x

我正在打电话`REST URL`并试图衡量需要多少时间才能得到回复。

我正在使用`DefaultHttpClient`它来从`REST URL`.

在我下面的程序中，每个线程都将在特定范围内工作。就像每个线程将在之间工作`1 - 100`，第二个线程将在`101 - 200`等之间工作。

所以在我下面的代码中，它有时对我有用，但过了一段时间它会抛出异常

```
Failure initializing default SSL context 
```

还有这个错误——

```
I/O exception (java.net.SocketException) caught when connecting to the target host: No buffer space available (maximum connections reached?): connect 
```

我在这里做错了什么吗？-或者我可以使用任何更好的客户端`DefaultHttpClient`来进行 RESTFUL 调用。

下面是我的代码-

```
class Task implements Runnable {

private DefaultHttpClient httpclient;
private HttpResponse response;

    @Override
    public void run() {

        try {

            for (int userId = id; userId < id + noOfTasks; userId++) {

                httpclient = new DefaultHttpClient();

               HttpGet httpGet = new HttpGet("http://localhost:8080/service/BEService/v1/get/USERID=10000/profile.ACCOUNT.SERVICE");

                long start = System.nanoTime();

                response = httpclient.execute(httpGet);

                long end = System.nanoTime() - start;

                HttpEntity entity = response.getEntity();
                EntityUtils.consume(entity);
                }
        } catch (Exception e) {
            LOG.error("Threw a Exception in " + getClass().getSimpleName(), e);
        } finally {
        httpclient.getConnectionManager().shutdown();
    }
    }
} 
```

如果我的代码有任何问题。我该如何改进它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T11:00:44.807

我没有看到您的代码有任何特别错误，但您看到的错误消息听起来更像是操作系统级别的错误。

还有另一篇文章可能会为您回答这个问题：http: [//support.microsoft.com/kb/2577795](http://support.microsoft.com/kb/2577795)

# javascript - 根据复选框值显示/隐藏 div

> ID：14866601
> 
> 赞同：2
> 
> 时间：2013-02-14T01:56:43.520
> 
> 标签：javascript, jquery

当用户选中“学生”时（check-1）。2 个复选框值应该消失并显示一个文本输入 div。截至目前，我已将输入显示记录下来。但我似乎无法让复选框消失。

我试过了：

```
$(function () {
  $('#check-1').change(function () {                
      $('.name').toggle(this.checked);
      $('#check-1').hide();
      $('#check-2').hide();
  }).change();
}); 
```

但这不起作用。选中“学生”后如何隐藏复选框？有任何想法吗？

这是一个小[小提琴](http://jsfiddle.net/vkAy4/8/)。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T02:32:36.893

请看下面的代码：

```
$(".my-check").change(function() {
    if ( $(this).is(':checked') ) {
        $(".my-box").show();
    } else {
        $(".my-box").hide();
    }
}); 
```

更多细节在：http: [//jsfiddle.net/marloscarmo/vMFQd/](http://jsfiddle.net/marloscarmo/vMFQd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T02:05:18.023

用 div 包裹你的文本框，说“thisWrapper”

```
<div id="thisWrapper">
    <input type="checkbox" id="check-1" class="checkchoice staff" required><label for="check-1" class="choice staff">Staff</label>
    <input type="checkbox" id="check-2" class="checkchoice student" required><label for="check-2" class="choice student">Student</label>
</div> 
```

并在您发布的更改事件中添加：

```
 $("thisWrapper").hide(); 
```

这应该同时隐藏两个复选框。当然，您必须添加“取消”或“重置”按钮才能再次显示复选框。

或者你可以给复选框一个新的类名，比如“mycheckboxes”，然后调用它：

```
$(".mycheckboxes").click(function() {
        $('#check-1').hide();
$("#check-2").hide();
}); 
```

*** 这是我在 Fiddler 中工作的完整示例 ****

试试这个：

```
<div id="thisWrapper">
    <input type="checkbox" id="check-1" class="checkchoice" required><label for="check-1" class="choice staff">Staff</label>
    <input type="checkbox" id="check-2" class="checkchoice" required><label for="check-2" class="choice student">Student</label>
</div>
<div id="nameinput">
    <input type="text" placeholder="So what's your name?" />
</div>

<script>
    $(function() {

       $(".checkchoice").change(function() {
              $("#thisWrapper").hide();
               $("#nameinput").show();
       });

    });
</script> 
```

# c# - 尝试使用 Image.Save 时出现“GDI+ 中发生一般错误”

> ID：14866603
> 
> 赞同：6
> 
> 时间：2013-02-14T01:56:45.750
> 
> 标签：c#, .net, gdi+

我正在开发 Outlook 2010 加载项，并且正在从序列化的 XML 文件加载图像。图像加载良好，并且能够将其分配给 Winform 上的图片框对象没有问题。对象保存在

```
[XmlIgnore]
public Bitmap Image
{
   get { return this.templateImage; }
   set { this.templateImage = value; }
 } 
```

但是，当我尝试将物理文件保存到硬盘上时，我正在做：

```
string filePath = Path.Combine(dirPath, item.Id + ".jpg");
try
{
    item.Image.Save(filePath, System.Drawing.Imaging.ImageFormat.Jpeg);
}
catch (Exception e)
{
    Debug.WriteLine("DEBUG::LoadImages()::Error attempting to create image::" + e.Message);
} 
```

并且在 GDI+ 中出现一般错误。我检查了文件夹的写权限，它确实有写权限。我不确定这里有什么问题。我还将 ImageFormat 更改为 bmp 和 png 等，以查看是否是转换问题……但不是。有人会建议尝试吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T02:13:39.313

感谢 Simon Whitehead 在评论中回答这个问题。他说，“3）确保文件没有被其他任何东西（包括你的代码）使用。”

所以问题是我自己的代码正在使用 item.Image 对象，并阻止 GDI+ 调用它的 dispose() 方法。解决方案是将对象复制到一个新对象中，然后使用该对象“写入”。结果代码如下：

```
try
{
   using (Bitmap tempImage = new Bitmap(item.Image)) 
   {
      tempImage.Save(filePath, System.Drawing.Imaging.ImageFormat.Png);
   }    
}
catch (Exception e)
{
    Debug.WriteLine("DEBUG::LoadImages()::Error attempting to create image::" + e.Message);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-09-17T04:14:37.790

对于代码行，我也遇到了同样的错误：

```
wmImg.Save(BrandImgPath,ImageFormat.Png);

BrandImgPath = "D:/XYZ/fileName; 
```

**找到原因：**

D: 驱动器中不存在 XYZ 文件夹。所以我的代码稍后会创建这个文件夹。应该确保该路径是否存在。

```
if (Directory.Exists(@"D:/XYZ")) return; 
```

希望它能帮助某人解决他的代码错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-16T06:00:52.203

1.确保您的目标文件夹具有读/写权限（检查两次！）。
2\. 使用 Server.MapPath 更好
3\. 确保您的目标驱动器或文件夹上有可用空间。4\. 大多数时候我们不能在共享服务器上使用 Memory Streamers，所以我们应该确保提供者允许我们使用它。

希望微软给出详细的异常错误而不是“Generic GDI+ Errror”！！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-14T22:30:05.520

我自己有这个问题，需要检查文件夹是否存在，GDI 没有告诉我出了什么问题，会很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-26T15:59:48.503

就我而言，这是我保存图像的目录的路径中的拼写错误：

```
if (Directory.Exists(directory_path))
{
 image.SaveAs(directory_path + filename);
} 
```

正如 gaffleck 所说，如果 GDI+ 抛出更多信息异常会很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-24T10:10:36.987

我有相同的通用异常，但后来我在并行 plesk 文件管理器上向 IIS 授予了写权限。如果您在 Windows 服务器上，请确保向 IIS 用户授予写入权限，该用户在我的服务器中为 IIS_IUSR

还要确保您尝试保存的文件夹是正确的，如上述评论中所述

# sql - 如何显示捐赠是否发生在上一年但不是当前？

> ID：14866614
> 
> 赞同：2
> 
> 时间：2013-02-14T01:57:46.873
> 
> 标签：sql, sql-server, tsql

我正在使用 Server 2012 中的以下架构和查询创建年度捐赠报告：

```
CREATE TABLE Donation
(
   HouseholdID INT, 
   HouseholdName VARCHAR(150), 
   [Donation] REAL, 
   DateOrdered DATE
);

INSERT Donation VALUES
(1,'The Smiths',50,'2011-01-01'),
(1,'The Smiths',75,'2012-02-02'),
(2,'The Wilsons',10,'2011-03-01'),
(2,'The Wilsons',60,'2011-07-01'),
(3,'The Kellys',500,'2012-06-01');

--Params
DECLARE @RunYear   INT=2012
DECLARE @PriorYear INT=@RunYear-1

SELECT 
    [HouseholdID],[HouseholdName],YEAR(DateOrdered) [Year], MAX(Donation) [MaxGift], SUM(Donation) [TotalDonated]
FROM 
    Donation 
WHERE 
    YEAR([DateOrdered]) IN (@RunYear,@PriorYear)
    GROUP BY HouseholdID, [HouseholdName], YEAR(DateOrdered)
    ORDER BY HouseholdID, YEAR(DateOrdered) 
```

我想添加一个`BIT`类似于 [DonatedInPriorYearOnly] 的列，仅当家庭在前一年（2011 年）有捐款但在运行年（2012 年）没有捐款时才为 1。

如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:09:42.333

根据您的 SQLServer 版本，您可以包装摘要查询（在子查询或 CTE 中）并使用[LAG](http://msdn.microsoft.com/en-us/library/hh231256.aspx)。如果 HouseholdID 和 Year 与 LAG HouseholdID 和 (Year - 1) 不匹配，则上一年没有捐款。

大致是这样的（未经测试）：

```
SELECT [HouseholdID], [HouseholdName], [Year], [MaxGift], [TotalDonated]
      ,CASE WHEN YEAR = previous_year +1 THEN 1 ELSE 0 END AS DonatedPreviousYear

   FROM ( SELECT [HouseholdID], [HouseholdName], [Year], [MaxGift], [TotalDonated]
                ,LAG(Year, 1, 0) OVER (PARTITION BY HouseholdID ORDER BY Year) AS previous_year

            FROM ( SELECT [HouseholdID],[HouseholdName],YEAR(DateOrdered) [Year], MAX(Donation) [MaxGift], SUM(Donation) [TotalDonated]
                     FROM  Donation 
                     WHERE [DateOrdered] BETWEEN @StartDt AND @EndDt
                     GROUP BY HouseholdID, [HouseholdName], YEAR(DateOrdered)
                     ORDER BY HouseholdID, YEAR(DateOrdered)
                  )
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:40:16.903

您可以查询每个家庭在上一年所做的任何捐赠`OUTER APPLY`。`SELECT TOP`

```
SELECT 
     <your select list>
    ,ISNULL(lastyear.donated_bit,0) AS donated_last_year
FROM Donation AS d
OUTER APPLY(
    SELECT TOP 1 1 AS donated_bit
    FROM Donation AS d_lastyear
    WHERE d_lastyear.HouseholdID = d.HouseholdID
        AND DATEPART(year, d_lastyear.DateOrdered) = @RunYear - 1
        AND d_lastyear.Donation IS NOT NULL
        AND d_lastyear.Donation > 0
) AS lastyear 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:30:57.717

```
select blah, blah, blah
from donation
where householdid in 
(select householdid
from donation
where year(dateordered) = @runyear -1
except
select householdid
from donation
where year(dateordered) = @runyear ) 
```

这就是逻辑。如果您希望它运行得更快，请创建一组日期以与每年的第一天和年底同时使用，并使用这些日期而不是年份（dateordered）

**在下面编辑**

要拥有基于此逻辑的位列，请执行此操作。

```
select blah, blah, blah
, case 
when householdid in 
(select householdid
from donation
where year(dateordered) = @runyear -1
except
select householdid
from donation
where year(dateordered) = @runyear )
then 1 else 0 end nameofcolumn
from donation
where whatever 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T04:01:51.807

在查看了各种建议后，我能够解决它。

```
[DonatedPriorYearOnly] = 
(
   CASE
   WHEN EXISTS 
   (
      SELECT HouseholdID FROM Donation d2
      WHERE YEAR(d2.DateOrdered)=@PriorYear AND d2.HouseholdID=d.HouseholdID
      EXCEPT
      SELECT HouseholdID FROM Donation d3 
      WHERE YEAR(d3.DateOrdered)=@RunYear AND d3.HouseholdID=d.HouseholdID

   )
   THEN 1 ELSE 0 END
) 
```

谢谢大家的回复。他们都很有帮助。

# entity-framework - 如何将一个代码优先对象中的两个属性映射到相同的父类型

> ID：14866615
> 
> 赞同：3
> 
> 时间：2013-02-14T01:57:50.900
> 
> 标签：entity-framework, ef-code-first, code-first, entity-relationship

我已经在这里待了几个小时，并尝试了很多我发现的建议，但没有运气。我首先使用代码 EF 5。

情况是我有一个 Employee 类。然后我有另一个类，上面有两个属性，都是 Employee 类型。我希望这两个都是外键约束，但要求允许来自相同用户的许多相同请求，所以我不能只将它们用作键。我并不真正关心员工拥有两个导航集合，但在我解决似乎需要的问题时。如果它简化了问题，我可以删除这些。

我得到这个消息。System.Data.Entity.Edm.EdmAssociationEnd: : 多重性在关系“Employee_RequestsForEmployee”中的角色“Employee_RequestsForEmployee_Target”中无效。因为从属角色属性不是关键属性，所以从属角色的多重性的上限必须是“*”。

我已经在上下文的 OnModelCreation 方法中使用 Fluent API 进行了尝试；

> modelBuilder.Entity() .HasRequired(u => u.ForEmployee) .WithMany() .HasForeignKey(u => u.ForEmployeeId);
> 
> ```
>  modelBuilder.Entity<RevenueTransferRequest>()
>                     .HasRequired(u => u.FromEmployee)
>                     .WithMany()
>                     .HasForeignKey(u => u.FromEmployeeId); 
> ```

有冲突的类是（为了清楚起见，我删除了一些属性）；

```
 public class Employee : IEmployee
    {
        [Key]
        public string Id { get; set; }

        [InverseProperty("ForEmployee")]
        public ICollection<RevenueTransferRequest> RequestsForEmployee { get; set; }

        [InverseProperty("FromEmployee")]
        public ICollection<RevenueTransferRequest> RequestsFromEmployee { get; set; }
    }

 public class RevenueTransferRequest : IRevenueTransferRequest
    {
        [Key]
        public Guid Id { get; set; }

        [Required]
        [ForeignKey("ForEmployee")]
        public String ForEmployeeId { get; set; }

        [InverseProperty("RequestsForEmployee")]
        public Employee ForEmployee { get; set; }

        [Required]
        [ForeignKey("FromEmployee")]
        public String FromEmployeeId { get; set; }

        [InverseProperty("RequestsFromEmployee")]
        public Employee FromEmployee { get; set; }
    } 
```

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:36:14.060

我从来没有弄清楚如何使用数据注释来做到这一点，但使用 Fluent API 我能够做到这一点。我缺少的是我必须在 HasMany() 方法中指定另一边的关系是什么，我认为这是通过数据注释和约定来理解的。

这在 DbContext OnModelCreating 覆盖中调用（WillCascadeOnDelete(false) 与另一个问题有关）。

```
 modelBuilder.Entity<RevenueTransferRequest>()
                .HasRequired(e => e.FromEmployee)
                .WithMany(x=>x.RequestsFromEmployee)
                .WillCascadeOnDelete(false);

    modelBuilder.Entity<RevenueTransferRequest>()
              .HasRequired(e => e.ForEmployee)
              .WithMany(x => x.RequestsForEmployee)
              .WillCascadeOnDelete(false); 
```

随着课程：

```
[Key]
        public String Id { get; set; }

        public String BusinessUnitLeaderId { get; set; }

        public Employee BusinessUnitLeader { get; set; }

        [Required]
        [MaxLength(150)]
        public String DisplayName { get; set; }

        public ICollection<Project> BusinessUnitLeaderProjects { get; set; }

        public ICollection<RevenueTransferRequest> RequestsForEmployee { get; set; }

        public ICollection<RevenueTransferRequest> RequestsFromEmployee { get; set; } 

public class RevenueTransferRequest
    {
        [Key]
        public Guid Id { get; set; }

        [Required]
        public String ForEmployeeId { get; set; }

        public Employee ForEmployee { get; set; }

        [Required]
        public String FromEmployeeId { get; set; }

        public Employee FromEmployee { get; set; }

        [Required]
        public String ProjectId { get; set; }

        public Project Project { get; set; }

        [Required]
        public Double? TransferAmount { get; set; }

        public int WorkflowState { get; set; }
    } 
```

# hibernate - 连接错误的预期路径

> ID：14866618
> 
> 赞同：0
> 
> 时间：2013-02-14T01:58:26.547
> 
> 标签：hibernate, createquery

我正在尝试执行以下查询，但出现上述错误。有任何想法吗？

```
session.CreateQuery("SELECT SUM(NumberHead) AS numberhead " +
                     "FROM Purchase "
                     +"INNER JOIN Lot " 
                     + "ON Purchase.FeedLot = Lot.Id "
                     + "WHERE Purchase.CohortState = 0").List(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:03:43.677

试试这个

```
SELECT SUM(purchase.NumberHead) AS numberhead FROM Purchase purchase INNER JOIN Lot lot ON purchase.FeedLot = lot.Id WHERE purchase.CohortState = 0 
```

# javascript - 使用 e.preventDefault() 后提交表单；

> ID：14866626
> 
> 赞同：5
> 
> 时间：2013-02-14T01:59:32.603
> 
> 标签：javascript, jquery, forms

我有一个表格，我停止使用 e.preventDefault() 提交。（我也试过 return false）。

我会使用以下代码手动告诉表单在短暂延迟后提交：

```
$('form').delay(2000).submit(); 
```

不幸的是， e.preventDefault() 似乎禁用了表单提交，即使它使用该`submit()`函数显式提交。

知道如何结合这些意图吗？我想显示加载屏幕几秒钟。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:01:34.457

```
$("form").on('submit.blocker', function (e) {
    setTimeout(function () {
        $("form").off('submit.blocker').trigger('submit');
    }, 2000);
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:13:37.397

试试这个。

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function ()
    {
        var okToSubmit = false;
        $('form').submit(function (e)
        {
            if ( ! okToSubmit)
            {
                e.preventDefault();

                var $form = $(this);
                setTimeout(function ()
                {
                    okToSubmit = true;
                    $form.submit();
                }, 2000);
            }
        });
    });
</script>
<form action="somewhere">
    <input type="text" name="something" />
    <input type="submit" />
</form>
```

上面的代码经过测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:47:54.010

```
$('form').on('submit', function(e) {
    if (!e.isTrigger) {
        setTimeout(function() {
            $("form").trigger('submit');
        }, 2000);
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T11:56:51.467

你可能想试试这个它对我有用：

```
<form name="demo" action="111" onSubmit="fun();return false">
<input type="text" name="name1" />
<input type="submit" />
</form> 
```

并在 javascript

```
fun()
{
var x= document.forms["demo"];
setTimeout(x.submit(),2000);//time in milliseconds
} 
```

# c#-4.0 - 使用枚举在c#中构建一个自定义消息框，如Messagebox

> ID：14866627
> 
> 赞同：0
> 
> 时间：2013-02-14T01:59:34.730
> 
> 标签：c#-4.0, messagebox

使用枚举在c#中构建一个自定义消息框，如Messagebox

我正在使用以下代码：

```
 public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void Sow()
    {
        CuMessageBox.SowMessage("text", "caption", CuMessageBox.MsgBoxButtons.Yes);

        MessageBox.Show("text", "caption", MessageBoxButtons.OK);
    }
}

public class CuMessageBox
{
    public enum MsgBoxButtons { Yes, No, Ok, Cancel }
    public static void SowMessage(string text, string caption, MsgBoxButtons msg)
    {
        //Todo
    }
} 
```

在这一行：

```
 CuMessageBox.SowMessage("text", "caption", CuMessageBox.MsgBoxButtons.Yes); // Custom MessageBox 
```

我不想显示类名。如何不显示类名。C#中的消息框不会显示类名

我想用这段代码来显示：

```
CuMessageBox.SowMessage("text", "caption", MsgBoxButtons.Yes); // Custom MessageBox 
```

错误：当前上下文中不存在名称“MsgBoxButtons”

我该如何解决这个错误。条件是我不想写类名

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:56:31.873

您必须将枚举移出类，因此它不是嵌套类型。

```
public enum MsgBoxButtons { Yes, No, Ok, Cancel }
public class CuMessageBox
{
   // etc..
} 
```

小心你在做什么，一个带有“是”或“否”按钮的消息框是相当奇怪的。如果要组合按钮，则至少必须使用 [Flags] 属性，以便可以在 Show 调用中指定多个按钮：

```
[Flags]
public enum MsgBoxButtons { 
   Yes = 1,
   No = 2,
   Ok = 4,
   Cancel = 8
} 
```

或者只是使用现有的 MessageBoxButton 枚举类型来避免这一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:02:53.657

您可以尝试将 toString() 添加到枚举的末尾吗？例如 MsgBoxButtons.Yes.ToString()。

# node.js - Express NodeJS web.config in Azure for SVG & Fonts

> ID：14866628
> 
> 赞同：4
> 
> 时间：2013-02-14T01:59:34.740
> 
> 标签：node.js, azure, svg, web-config, mime-types

I had a problem in an Express website, which uses SVG and other files like fonts.

Did not have any problem when running app locally, but once deployed on Azure, SVG and fonts didn't appear anymore.

Created a `web.config` file at project root:

```
<?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <system.webServer>

      <staticContent>
        <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
        <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
        <mimeMap fileExtension=".ttf" mimeType="application/x-woff" />
      </staticContent>

    </system.webServer>
  </configuration> 
```

Also used this solution: ([Svgs and other mime types in windows azure](https://stackoverflow.com/questions/11622376/svgs-and-other-mime-types-in-windows-azure))

Both solutions now permit to load SVG files, but webpages are not loaded anymore. *(HTTP 500)*

It seems it overrides configuration for **Dynamic Content**.

How should Dynamic Content be configured to make app work again?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T12:57:45.493

I found the problem.

Used this solution: ([Svgs and other mime types in windows azure](https://stackoverflow.com/questions/11622376/svgs-and-other-mime-types-in-windows-azure))

And in **Dynamic Content Rewrite Rule**, replaced `server.js` by `app.js`, which is the default entry point created by Express.

Final result is:

```
<?xml version="1.0" encoding="utf-8"?>
  <configuration>
    <system.webServer>

      <staticContent>
        <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
        <mimeMap fileExtension=".woff" mimeType="application/x-woff" />
        <mimeMap fileExtension=".ttf" mimeType="application/x-woff" />
      </staticContent>

      <handlers>
        <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
      </handlers>

      <rewrite>
        <rules>
          <rule name="DynamicContent">
            <match url="/*" />
            <action type="Rewrite" url="app.js" />
          </rule>
        </rules>
      </rewrite>

    </system.webServer>
  </configuration> 
```

# jquery - jQuery 1.9.1 .ready() 未在 Chrome 中触发

> ID：14866629
> 
> 赞同：2
> 
> 时间：2013-02-14T01:59:36.923
> 
> 标签：jquery, google-chrome, requirejs

根据[文档](http://api.jquery.com/ready/)，

> 虽然 JavaScript 提供了在页面呈现时执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。

我正在使用`$(handler)`没有按预期工作的代码，没有明显的原因。这是我在控制台中运行的一些代码：

```
>>> document.readyState
"complete"
>>> $(function () { console.log("A") })
[    #document    ]
>>> jQuery(function () { console.log("B") })
[    #document    ] 
```

我要补充一点，此时不会`handler`在其他任何`$().ready`地方写任何东西。

但是，请注意何时进行以下后续调用：

```
>>> jQuery.ready()
A
B 
```

同时，其他地方的任何其他处理程序也将被调用。

准备好的处理程序现在将按预期工作。IE

```
>>> $(function () { console.log("D"); }
D 
```

我只是好奇为什么 jQuery 在这种情况下可能不起作用，如果有人遇到过类似的事情，以及如何去寻找可能会干扰的东西。

在我使用的 Chrome 开发者工具中，似乎没有任何资源未加载。

不管它值多少钱，代码使用 RequireJS 来异步加载脚本，包括 jQuery，尽管所有的处理程序都是在 jQuery 被加载之后定义的（即包装在 a`define(['jquery'], ...)`或`require(['jquery'], ...)`等效的.

### 编辑

我注意到该问题发生在 Google Chrome 中，但不是 Firefox。我可能错误地认为这个问题也出现在 Firefox 中。

感谢任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:29:56.350

不管它值多少钱，对于下一个遇到这种情况的人来说，包含的`uservoice`代码似乎一直在破坏本机 jQuery 调用，因此`jQuery.ready()`永远不会被调用。

# javascript - 拖放后在 iframe 中保留内容 - TinyMCE

> ID：14866630
> 
> 赞同：1
> 
> 时间：2013-02-14T01:59:39.200
> 
> 标签：javascript, jquery, html, dom, tinymce

我正在尝试将 TinyMCE 用于我正在从事的大型专业项目。在一个地方，我们需要在可拖动的表格行中有多个实例。但是，当您开始拖动其中一行时，TinyMCE iFrame 中的内容（无论是随页面加载还是由用户更改）都会消失。删除该行后，内容仍然消失，但会在页面刷新/重新加载时重新出现。有没有办法让 TinyMCE iFrame 保留其内容而无需重新加载页面？我这里有一个例子：

[http://cmzmedia.com/tinymce/examples/simple.html](http://cmzmedia.com/tinymce/examples/simple.html)

我不能用 jsfiddle 之类的东西来做，因为如果你在那里做并刷新页面，它会从头开始一切。

或者也许有一种方法可以只重新加载拖放的 iframe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:27:45.273

由于编辑器是通过拖放重新渲染的，我认为您应该自己手动设置内容。

您应该首先抓取被拖动的编辑器的内容，然后在拖放后将其恢复。

要访问您可以使用的特定编辑器`TinyMCE.get('myiframe')`，然后在返回的编辑器对象上应该有一个`getContent`and`setContent`函数来访问编辑器内容。

# android - 如何从 Jenkins 作业更新 Android 项目？

> ID：14866633
> 
> 赞同：2
> 
> 时间：2013-02-14T01:59:55.153
> 
> 标签：android, jenkins

我正在设置 Jenkins 来克隆我的 git 项目，更新项目，然后使用 ant 构建。如果我在克隆 repo 后在作业中执行 ls ，我会看到我的 project.properties 文件存在（包含目标）。

要更新项目（并因此生成 build.xml 文件），我发出以下命令：

```
android update project -p ./ 
```

但是，我得到以下控制台输出：

```
Error: The project either has no target set or the target is invalid. 
```

有谁知道如何从 Jenkins 更新一个 android 项目并避免这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:52:27.123

所以你已经消除了错误的第一部分（即项目*确实*有一个目标集），但没有消除第二部分。

消息“ `target is invalid`”表示您没有在 Jenkins 使用的 Android SDK 中安装目标平台。

例如，如果您的目标是`android-17`，那么您需要安装 Android 4.2 平台（例如通过命令`android update sdk -u -t android-17`）。

顺便说一句，您可以使用适用于 Jenkins的[Android 模拟器插件](https://wiki.jenkins-ci.org/display/JENKINS/Android+Emulator+Plugin)`android update -p`自动执行对所需目标平台的相关调用和安装。

# c - 翻转C中句子中的单个单词？

> ID：14866636
> 
> 赞同：-1
> 
> 时间：2013-02-14T02:00:02.147
> 
> 标签：c, loops, flip, words

我试图在 C 中的一个句子中翻转每个单词，以便类似于：

“I like big dogs”会变成：“dogs big like I”

到目前为止，我有以下代码：

```
//  the following effectively flips a sentence so "I like big dogs" would become
    "sgod gib ekil I"

for (i=0;i<length/2;i++){ // length is length of the string
    temp=ret[length-(i+1)]; //ret is the string
    ret[length-(i+1)]=ret[i];
    ret[i]=temp;
}
    //now this part should flip each individual word to the right way
//pos and lengthPlacer are both initialized as 0
while(pos<length){
    lengthPlacer++;
    if (ret[lengthPlacer]==' ' || lengthPlacer==length){
for (i=pos;i<(lengthPlacer)/2;i++){
    temp=ret[lengthPlacer-(i+pos+1)];
    ret[lengthPlacer-(i+pos+1)]=ret[i];
    ret[i]=temp;
}   
    pos=lengthPlacer+1;
    }
}
return ret; //this returns "dogs gib ekil I" unfortunately (only flips 1st word)

} 
```

任何帮助深表感谢。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:14:27.080

您在增加 pos 变量的同时增加 lengthPlacer 变量。您需要一个内部循环首先增加直到空间，然后循环反转是在那之后。

```
while(pos<length){
  while (lengthPlacer < length)
    if (ret[lengthPlacer]==' ') break;
  }
  next = pos + (lengthPlacer-pos)/2;
  while (pos < next){
    etc...
  }   
  // Also here skip any spaces that might be dangling
} 
```

# jquery - 使用 jquery 数据设置变量

> ID：14866642
> 
> 赞同：0
> 
> 时间：2013-02-14T02:00:54.407
> 
> 标签：jquery, jquery-data

我正在尝试在函数中创建一个变量，然后我可以在不同的函数中再次重新定义它，我想使用 jquery .data 来做到这一点，但不确定如何。

我有这个

```
$(".photo").click(function() {
  var id = $(this).attr('id');
}); 
```

在下一个函数中，我想重新定义 id 变量......使用以前的 id 变量值，关于如何做到这一点的任何想法？

```
$("#next").click(function() {  
  var id = $(id).next().attr('id');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T04:07:57.387

您需要定义该变量`globally`，以便其他函数可以使用它。

**示例测试代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        var GlobalScope;

        $('#boxes').click(function()
        {
            GlobalScope = $.trim($(this).html());
        });

        $('#boxes_').click(function()
        {
            console.log(GlobalScope);
        });
    });

</script>

<div id="boxes">
    One
</div>

<div id="boxes_">
    Two
</div>
```

当您单击框时，它将在单击后将`GlobalScope`变量值设置为`One`现在，`boxes`当您单击`boxes_` `GlobalScope`值时将`One`位于`Console.log`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:25:32.357

答案是全局变量，所以它最终是这样的：

```
$(".photo").click(function() {
    id = $(this).attr('id');
});

$("#next").click(function() {  
      var id_a = $('#' + id).next().attr('id');
      id = id_a;
});

$("#prev").click(function() {  
      var id_b = $('#' + id).prev().attr('id');
      id = id_b;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T03:29:58.737

您需要为这两个函数定义新的公共变量作为@loriensleafs 的答案。

此外，我建议使用 Closure 来防止范围问题。

```
(function() {
    var id;    // common value but canb be accessed only in this function.

    $(".button").click(function() {
        id = $(this).attr('id');
    });

    $("#output").click(function() {  
        $("p").css( "background", "none" );
        $("div").find('#' + id).css( "background", "red" );
    });
})(); 
```

检查[http://jsfiddle.net/cwdoh/G2RjH/2/](http://jsfiddle.net/cwdoh/G2RjH/2/)

# fedora - 如何在fedora18中为python3安装pygobject

> ID：14866643
> 
> 赞同：1
> 
> 时间：2013-02-14T02:00:55.353
> 
> 标签：fedora, gtk3, pygobject, python-3.3

我尝试在 Fedora 18 中为 python 3 安装 pygobject 我阅读了这个文档[https://python-gtk-3-tutorial.readthedocs.org/en/latest/install.html](https://python-gtk-3-tutorial.readthedocs.org/en/latest/install.html)然后我尝试在我输入 $ 时安装 jhbuild jhbuild sanitycheck 得到这个错误：bash: jhbuild: command not found...

我尝试使用 yum 安装，我安装了“pygobject3-devel”，但这不适用于 fedora 18 中的 python3 默认 python 是 python2.7.3，我使用 yum 安装 python3.3.0 并测试第一个演示代码：

```
#!/usr/bin/python
from gi.repository import Gtk

win = Gtk.Window()
win.connect("delete-event", Gtk.main_quit)
win.show_all()
Gtk.main() 
```

在为这个 python 文件提供 chmod +x 之后，可以使用这个命令“./test.py”运行，如果我尝试用 python 运行（不使用 #! ....）并输入这个命令“$python test.py " 运行和工作没有任何问题，但是当我输入这个命令 "$python3 test.py" 我得到这个错误：

```
Traceback (most recent call last):
  File "test.py", line 2, in <module>
    from gi.repository import Gtk
ImportError: No module named 'gi' 
```

有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:34:56.260

尝试安装`pygobject3`而不是`pygobject3-dev`（事实上，pygobject3 似乎已经安装在 Fedora 的普通安装中）。

安装该软件包后，您应该能够打开解释器（python2.7）并执行以下操作：

`from gi.repository import Gtk`

~~如果你想使用python3（我不明白你的意思是你*尝试*使用python3还是你*想使用python3），根据*[this page](https://fedoraproject.org/wiki/Python3)总结的状态，似乎gnome自省绑定尚不可用正在开发中的与 python3 相关的不同软件包。~~

**编辑：**我刚刚尝试安装`python3-gobject`（应该在安装时安装`pygobject3`，但由于某种原因它没有安装），它似乎在 python3 上也能正常工作。

# c++ - 为什么在尝试推送到向量时出现 std::bad_alloc 错误？

> ID：14866644
> 
> 赞同：0
> 
> 时间：2013-02-14T02:01:13.880
> 
> 标签：c++, parsing, vector, bad-alloc

**C++** 这是我的代码中引发错误的部分：

```
IDlist->push_back(lex->getCurrentToken()); 
```

IDList 是一个向量，定义如下：

```
std::vector<Token*>* IDlist; 
```

为什么那行代码不能推送我的 Token 对象？谢谢。

编辑：

当我尝试这个时：

```
Token* t = lex->getCurrentToken();
IDlist->push_back(t); 
```

我犯了同样的错误; 当尝试推入向量时会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:23:56.723

```
std::vector<Token*>* IDlist; 
```

IDlist 是一个指针，它指向一个向量，并且您没有通过`new`. 使用前需要先分配 IDlist：

```
IDlist = new  std::vector<Token*>(); 
```

但是使用指向向量的指针有什么意义呢？只需将 IDlist 声明为变量：

```
std::vector<Token*> IDlist;
Token* t = lex->getCurrentToken();
IDlist.push_back(t); 
```

# sql - SQL查询中NOT IN和NOT EQUALS不同行为的区别

> ID：14866645
> 
> 赞同：6
> 
> 时间：2013-02-14T02:01:14.747
> 
> 标签：sql, oracle

我认为`NOT IN`行为与`!=`查询相同。但是使用的查询`!=`比使用的查询返回更多的行`NOT IN`：

```
SELECT  count(A.NO)
FROM A
WHERE
A.CODE != 'a' 
AND 
A.CODE  != 'b'
AND
A.CODE  != 'c'
AND 
A.NAME  != 'd' 
AND
A.NAME  != 'e' 
```

返回 1566 行，而

```
SELECT  count(A.NO)
FROM A
WHERE
A.CODE NOT IN ('a','b','c')
AND
A.NAME NOT IN ('d','e') 
```

仅返回 1200 行。

我想`NOT IN`不包括`NULL`价值观 - 那是唯一的区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:41:08.717

我试图使用[这个](http://sqlfiddle.com/#!2/6d801/1)简化的 SQL 小提琴来重现问题，但是，它为两个版本返回相同的数字。

你的数据有什么不同？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T15:00:22.423

没有答案，但什么提供以下内容？

```
SELECT *
FROM A
WHERE
A.CODE != 'a' 
AND 
A.CODE  != 'b'
AND
A.CODE  != 'c'
AND 
A.NAME  != 'd' 
AND
A.NAME  != 'e'
AND NOT (
    A.CODE NOT IN ('a','b','c')
    AND
    A.NAME NOT IN ('d','e') 
)
LIMIT 0, 20 
```

# android - 更新到 SDK 21.1 后，无法在 eclipse Juno (Windows 7) 上安装 Android ADT 21.1

> ID：14866656
> 
> 赞同：19
> 
> 时间：2013-02-14T02:02:16.887
> 
> 标签：android, adt

我已经下载了 ADT 21.1，并尝试在 eclipse 上安装它 ![在此处输入图像描述](../Images/5672e2a0b3ecdfccb7d219ffbeed66c5.png)

我得到了那些：

操作无法完成。查看详细信息。

细节：

无法完成请求。有关详细信息，请参阅错误日志。

Tracer for OpenGL ES 将被忽略，因为它已经安装，并且不允许更新。

Android DDMS 将被忽略，因为它已经安装，并且不允许更新。

Android 开发工具将被忽略，因为它已经安装，并且不允许更新。

Android Traceview 将被忽略，因为它已经安装，并且不允许更新。

Android Hierarchy Viewer 将被忽略，因为它已经安装，并且不允许更新。

![在此处输入图像描述](../Images/4bcc4717799d1f1c1c4870000a5c3d8e.png)

当我重新打开 SDK Manager 时，我仍然得到这个： ![在此处输入图像描述](../Images/61dab3dd4bd0f18e28cb60f77c2734f0.png)

在 Windows->Preference->Android 中，我得到了这个： ![在此处输入图像描述](../Images/987b35f507f0292a6778dba34f6654b5.png)

因此，我想重新安装 ADT，但我发现我无法卸载任何插件，卸载.. 按钮是灰色的！ ![在此处输入图像描述](../Images/ebdbb45626a99d13c811b5d056cefe81.png)

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2013-02-15T13:57:34.463

在 Eclipse 中，尝试：

帮助 > 安装新软件

然后选择您为[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)提供的名称（工作链接）

选择要安装的更新，然后至关重要的是，取消选中“在安装过程中联系所有更新站点以查找所需的软件”。

![在此处输入图像描述](../Images/7e195a3b6ae7a386e591b29af166bf1d.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T12:05:44.210

> 选择要安装的更新，然后至关重要的是，取消选中“在安装过程中联系所有更新站点以查找所需的软件”

我确认 ing0 的这个答案也适用于 Linux。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T23:06:24.863

我也确认这有效（ing0 已经提到过）

在 Eclipse (ADT) 中

> 帮助 --> 安装新软件 ---> 使用 --> Android 开发者工具更新站点 - [http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

选择您要安装的所有更新并取消选中“安装期间联系所有更新站点以查找所需软件”选项。之后，一切都应该按照提到的方式安装。

# xslt - 使用 XSLT key() 函数根据不同元素中的两个属性查找节点

> ID：14866666
> 
> 赞同：2
> 
> 时间：2013-02-14T02:03:24.327
> 
> 标签：xslt, xslkey

我正在尝试使用 XSLT key() 函数返回`<Code>`XML 文件中符合以下两个条件的所有元素：

```
Code[code=$code] AND ancestor::CodeType[type=$codeType]` 
```

以下是输入 XML 的简化示例：

```
<Items>
    <Item code-number="C1" category="ABC" />
    <Item code-number="C3" category="ABC" />
    <Item code-number="C1" category="XYZ" />
</Items>

<CodeTypes>
    <CodeType type="ABC">
        <SubType title="Category III Codes">   <!-- <SubType> elements are optional -->
            <SubType title="Subcategory III-15 Codes">
                <Code code="C1" description="Red" />
                <Code code="C2" description="Green" />
                <Code code="C3" description="Blue" />
                <Code code="C3" description="Purple" />   <!-- Same code can appear more than once -->
            </SubType>
        </SubType>
    <CodeType>
    <CodeType type="XYZ">
        <Code code="C1" description="Black" />   <!-- Same code can be used for multiple CodeTypes -->
        <Code code="C2" description="Orange" />
        <Code code="C3" description="Yellow" />
    <CodeType>
</CodeTypes> 
```

请注意，注释实际上并不存在于实际的 XML 中，我只是在此处添加它们以阐明 XML 结构。

这是我尝试使用的 XSLT 转换，尽管它似乎不起作用：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:key name="LookupMatchingCodeElements" match="Code" use="concat(../@code, '+', ancestor::CodeType/@type)" />

    <xsl:template match="Item">
        <xsl:call-template name="GetCodeElements">
            <xsl:with-param name="code" select="@code-number" />
            <xsl:with-param name="codeType" select="@category" />
        </xsl:call-template>
    </xsl:template>

    <xsl:template name="GetCodeElements">
        <xsl:param name="code" />
        <xsl:param name="codeType" />

        <xsl:for-each select="key('LookupMatchingCodeElements', concat($code, '+', $codeType))">
            <!-- process each <Code> element -->
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

这就是我希望 key() 函数返回不同输入的内容：

```
<!-- For code="C1" AND codeType="ABC" -->
<Code code="C1" description="Red" />

<!-- For code="C3" AND codeType="ABC" -->
<Code code="C3" description="Blue" />
<Code code="C3" description="Purple" />

<!-- For code="C1" AND codeType="XYZ" -->
<Code code="C1" description="Black" /> 
```

这可以通过 key() 函数实现吗？由于有成千上万的元素`<Item>`和`<Code>`元素，因此能够使用`<xsl:key>`非常重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T03:30:56.600

**使用**：

```
 <xsl:key name="kCode" match="Code"
  use="concat(ancestor::CodeType[1]/@type, '+', @code)"/> 
```

**这是一个完整的转换：**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:key name="kCode" match="Code"
  use="concat(ancestor::CodeType[1]/@type, '+', @code)"/>

 <xsl:template match="/">
  <xsl:copy-of select="key('kCode', 'ABC+C1')"/>
====================
  <xsl:copy-of select="key('kCode', 'ABC+C3')"/>
====================
  <xsl:copy-of select="key('kCode', 'XYZ+C1')"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下文档**（提供的 XML 文本 -- 已纠正格式错误）时：

```
<t>
    <Items>
        <Item code-number="C1" category="ABC" />
        <Item code-number="C3" category="ABC" />
        <Item code-number="C1" category="XYZ" />
    </Items>
    <CodeTypes>
        <CodeType type="ABC">
            <SubType title="Category III Codes">
                <!-- <SubType> elements are optional -->
                <SubType title="Subcategory III-15 Codes">
                    <Code code="C1" description="Red" />
                    <Code code="C2" description="Green" />
                    <Code code="C3" description="Blue" />
                    <Code code="C3" description="Purple" />
                    <!-- Same code can appear more than once -->
                </SubType>
            </SubType>
        </CodeType>
        <CodeType type="XYZ">
            <Code code="C1" description="Black" />
            <!-- Same code can be used for multiple CodeTypes -->
            <Code code="C2" description="Orange" />
            <Code code="C3" description="Yellow" />
        </CodeType>
    </CodeTypes>
</t> 
```

**产生了想要的正确结果**：

```
<Code code="C1" description="Red"/>
====================
  <Code code="C3" description="Blue"/>
<Code code="C3" description="Purple"/>
====================
  <Code code="C1" description="Black"/> 
```

# ruby-on-rails - 如何将数据库中的随机文本保存在 cookie 中，以便访问者在下次访问时再次看到它？

> ID：14866672
> 
> 赞同：0
> 
> 时间：2013-02-14T02:04:14.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我向访问者展示了一些来自数据库的随机文本（城市名称和电话号码）。每个访问者都会看到一个随机值。我希望向同一位访客显示相同的数据（x 天）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:40:12.910

像这样的东西？

```
class HomeController < ApplicationController

  def index
    @random_text = cookies[:random_text] || Model.find(1).random_text
    cookies[:random_text] ||= @random_text
  end

end 
```

# solr - 为什么我的领先通配符搜索在 Solr 中失败？

> ID：14866675
> 
> 赞同：3
> 
> 时间：2013-02-14T02:04:37.070
> 
> 标签：solr, tokenize, lucene

我定义了一个文本字段，我使用 copyField 填充各种源字段，目标是让这个字段成为我用来搜索 Solr 索引的字段。

此文本字段被定义为使用此自定义字段类型“text_en_splitting_reversed”。我通过复制示例“text_en_splitting”并将 ReversedWildcardFilterFactory 添加到索引分析器来创建此字段类型。

```
<!-- Just like text_en_splitting, but with the addition of reversed tokens for leading wildcard matches -->
<fieldType name="text_en_splitting_reversed" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <!-- Case insensitive stop word removal.
      add enablePositionIncrements=true in both the index and query
      analyzers to leave a 'gap' for more accurate phrase queries.
    -->
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1" types="word-delim-types.txt" />
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
    <filter class="solr.ReversedWildcardFilterFactory" withOriginal="true"
       maxPosAsterisk="3" maxPosQuestion="2" maxFractionAsterisk="0.33"/>
 </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="lang/stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"  types="word-delim-types.txt" />
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.PorterStemFilterFactory"/>
  </analyzer>
</fieldType> 
```

我的主要问题：当我使用前导通配符进行搜索时，我得到了意想不到的结果。例如，我知道我对“*car”进行的一次特定搜索应该返回一个匹配项（文档包含单词“racecar”）。由于这失败了，我决定在 Solr Admin 的分析器工具中对其进行调试。这是我的测试截图：

![领先的通配符问题](../Images/ce920e82e4a22107f2ced82e0b482fe6.png)

我是这个分析器工具的新手，但右侧不应该一直保留前导星号吗？为什么这最终不匹配？我是否应该对用户输入的关键字进行反向处理？

现在，在我的索引查询配置中，我设置为使用 edismax。但是，在管理分析器 gui 中，我看不到控制它是使用标准解析器还是 edismax 的方法。（也许没关系？）

如果这些信息可能有助于提供更多上下文，我将为这个被索引的特定字段降低我的目标：

*   我希望 *car 与赛车相匹配。**这是行不通的。**
*   我想要 $30 来匹配包含 $30 的文档，但不是包含 30 的文档（前面没有美元符号）。所以我添加了一个 types="" 属性，我将 $ 定义为 DIGIT。这**是**有效的。
*   我想要 30 来匹配包含 $30 的文档。**这是行不通的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:00:52.877

从您的屏幕截图中，很明显 WordDelimiterFilterFactory 已经剥离了您的前导 *. 尝试添加`preserveOriginal="1"`到您的查询分析器端，即

```
<filter class="solr.WordDelimiterFilterFactory" 
    preserveOriginal="1" 
    generateWordParts="1" 
    generateNumberParts="1" 
    catenateWords="0" 
    catenateNumbers="0" 
    catenateAll="0" 
    splitOnCaseChange="1" 
    types="word-delim-types.txt" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:25:14.163

最终，主要的通配符问题是我们搜索引擎前端的一个错误。在将查询提交给 Solr 之前，我们有一些代码将所有关键字或短语用引号括起来。这样，如果输入了一个短语，它将被引号包围，并且工作正常。它对常规关键字搜索没有影响。

但显然，如果它是通配符搜索，在它周围加上引号会导致搜索由于某种原因而失败。当我删除引号时，*car 与希望的包含 racecar 的帖子相匹配。

关于我的次要问题（为什么“30”与包含“$30”的文档不匹配），我还在一个单独的 StackOverflow 线程中解决了这个问题：[如何在 Solr 中找到包含数字和美元符号的文档？](https://stackoverflow.com/questions/14886310/how-do-i-find-documents-containing-digits-and-dollar-signs-in-solr/14914853#14914853)

顺便说一句，我认为 Solr 分析管理 gui 中有一个错误。在测试领先的通配符搜索时，我永远无法得到任何突出显示，表明会进行匹配......这进一步增加了我试图调试问题的困惑。

# java - 检查对象在哪个子类中，然后在该子类中运行一个方法 - Java

> ID：14866677
> 
> 赞同：0
> 
> 时间：2013-02-14T02:04:56.560
> 
> 标签：java, abstract

我有一个名为 Policy 的抽象类，以及两个子类 DepreciablePolicy 和 ExpirablePolicy 我有一个 Policy 数组，policies[]

我想检查我的对象在哪个子类中（如果它是 Policy、DepreciablePolicy 或 ExpirablePolicy）

我通过使用这个 if 语句来做到这一点。

```
if (this.policies[polNum] instanceof DepreciablePolicy){ 
```

对于每种类型的子类，我必须运行不同的方法。唯一的问题是我只能使用 Policy 方法，而不能使用子类方法或构造函数。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:07:18.803

> 对于每种类型的子类，我必须运行不同的方法。

那你就设计错了。在Policy中定义一个抽象方法，让所有的派生类根据自己的需求实现。然后只需调用该方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T02:07:27.170

这是错误的继承方式。多态性的全部意义在于您的代码不关心对象是哪个子类。你需要做的任何事情都应该通过Policy表达出来，它应该是一个真正的接口。您的代码应该与基于该接口的 Policy 交互，并且子类选择如何做出反应。

话虽如此，您可能正在寻找简单的向下转换：

```
DepreciablePolicy d = (DepreciablePolicy) policy; 
```

不过，这只不过是糟糕的设计上的糟糕绷带。

# iphone - Objective C Segues，以编程方式溶解

> ID：14866682
> 
> 赞同：1
> 
> 时间：2013-02-14T02:05:21.790
> 
> 标签：iphone, objective-c, segue

我有两个类，machineClass 和buttonClass ...从按钮类，我想要一个按钮以编程方式推入machineClass。

我已经得到了它的工作：

```
machineClass *mc = [self.storyboard instantiateViewControllerWithIdentifier:@"machineClass"];
mc.passedString = purchase;

[self presentViewController:mc animated:YES completion:nil]; 
```

*但是，这使用了默认的 segue 动画（视图垂直出现的位置），我认为如果我使用***交叉溶解**过渡，我的应用程序看起来会更好。

任何人都可以帮忙吗？我想出的最佳解决方案是将其更改为：

```
 [self presentViewController:mc animated:NO completion:nil]; 
```

但是我不是很喜欢这个...

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T02:16:46.740

您可以在情节提要中设置目标视图控制器的模态转换样式。或在代码中：

```
machineClass *mc = [self.storyboard instantiateViewControllerWithIdentifier:@"machineClass"];
mc.passedString = purchase;
mc.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self presentViewController:mc animated:YES completion:nil]; 
```

# c# - 在应用程序设置中存储 blob

> ID：14866687
> 
> 赞同：0
> 
> 时间：2013-02-14T02:06:01.117
> 
> 标签：c#, .net, blob, app-config, application-settings

在 .NET 的应用程序设置中（或使用）存储 blob（一大串字节）的适当方法是什么？

我可以想到几种方法，但没有一个看起来像它应该的那么简单。

*   存储 base64 或十六进制字符串
    *   序列化/反序列化有点笨拙
*   在 user.config（或 app.config）文件旁边存储一个文件并手动管理它
    *   我不知道如何以编程方式定位 user.config 文件
*   将文件存储在 AppData 的其他位置并手动管理
    *   防止我的应用程序数据在一个位置

我需要能够在运行时更改值，并为每个用户提供不同的值，因为这些数据将与 user.config 中的内容密切相关。

存储这样一个值的理想方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:12:16.317

在 Visual Studio 项目中，您可以将文件存储在资源文件中。**资源文件**可以存储字符串和文件。这是迄今为止最方便的解决方案，不需要序列化。

胜利者

# backbone.js - backbonejs loading model

> ID：14866694
> 
> 赞同：0
> 
> 时间：2013-02-14T02:06:56.007
> 
> 标签：backbone.js, loading, models

In backbonejs documentation it has been said that we can load bootstrapped models under [loading bootstrapped models](http://backbonejs.org/#FAQ-bootstrap)

So I did the same as there like

```
employeeCollection.reset(<%= @employees.to_json %>); 
```

But I threw a error

```
Uncaught SyntaxError: Unexpected token & 
```

When I clicked that error it took me to

```
employeeCollection.reset([{&quot;address&quot;:&quot;Madhyapur thimi 13, wamunae tole&quot;,&quot;fired&quot;:false,&quot;first_name&quot;:&quot;Gagan Shrestha&quot;,&quot;id&quot;:1,&quot;last_name&quot;:&quot;Shrestha&quot;,&quot;phone&quot;:&quot;9841971919&quot;},{&quot;address&quot;:&quot;Madhyapur thimi 13, wamunae tole&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;Prem Krishna&quot;,&quot;id&quot;:2,&quot;last_name&quot;:&quot;Shrestha&quot;,&quot;phone&quot;:&quot;9841755640&quot;},{&quot;address&quot;:&quot;sdgd&quot;,&quot;fired&quot;:false,&quot;first_name&quot;:&quot;fdsfs&quot;,&quot;id&quot;:3,&quot;last_name&quot;:&quot;sfdsf&quot;,&quot;phone&quot;:&quot;5345435&quot;},{&quot;address&quot;:&quot;sdfsf&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;dsfsd&quot;,&quot;id&quot;:4,&quot;last_name&quot;:&quot;fsd&quot;,&quot;phone&quot;:&quot;sfdsf&quot;},{&quot;address&quot;:&quot;Madhyapur thimi 13, wamunae tole&quot;,&quot;fired&quot;:false,&quot;first_name&quot;:&quot;Prafulla&quot;,&quot;id&quot;:5,&quot;last_name&quot;:&quot;Shrestha&quot;,&quot;phone&quot;:&quot;9841971919&quot;},{&quot;address&quot;:&quot;South africa&quot;,&quot;fired&quot;:false,&quot;first_name&quot;:&quot;ram&quot;,&quot;id&quot;:6,&quot;last_name&quot;:&quot;krishna&quot;,&quot;phone&quot;:&quot;86879979&quot;},{&quot;address&quot;:&quot;sdfdsf&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;fs&quot;,&quot;id&quot;:7,&quot;last_name&quot;:&quot;sdfdsfdsf&quot;,&quot;phone&quot;:&quot;sdfdsfds&quot;},{&quot;address&quot;:&quot;juj&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;rfr&quot;,&quot;id&quot;:8,&quot;last_name&quot;:&quot;hgtg&quot;,&quot;phone&quot;:&quot;9898&quot;},{&quot;address&quot;:&quot;gthy&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;olo&quot;,&quot;id&quot;:9,&quot;last_name&quot;:&quot;plo&quot;,&quot;phone&quot;:&quot;6766&quot;},{&quot;address&quot;:&quot;rfrf&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;uyuy&quot;,&quot;id&quot;:10,&quot;last_name&quot;:&quot;uyuy&quot;,&quot;phone&quot;:&quot;7676&quot;},{&quot;address&quot;:&quot;madhyapur thimi 12&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;shuvam1&quot;,&quot;id&quot;:11,&quot;last_name&quot;:&quot;shrestha&quot;,&quot;phone&quot;:&quot;1234556778&quot;},{&quot;address&quot;:&quot;dodale&quot;,&quot;fired&quot;:true,&quot;first_name&quot;:&quot;sarita2&quot;,&quot;id&quot;:12,&quot;last_name&quot;:&quot;prajapati&quot;,&quot;phone&quot;:&quot;985757&quot;},{&quot;address&quot;:&quot;kathmandu&quot;,&quot;fired&quot;:false,&quot;first_name&quot;:&quot;hello&quot;,&quot;id&quot;:13,&quot;last_name&quot;:&quot;world&quot;,&quot;phone&quot;:&quot;0155675432&quot;}]); 
```

I guess the error is due to escaping of json data, but not quite sure.

Do I need to do additional thing so that I can load necessary data when page loads, so that I need not fire ajax request to get those data from servers

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:22:51.550

Rails is HTML encoding your JSON. There are a few ways around this, but be aware that there are security implications (XSS) to just using something like `html_safe`.

[How to Securely Bootstrap JSON in a Rails View](http://jfire.io/blog/2012/04/30/how-to-securely-bootstrap-json-in-a-rails-view/) gives a good overview of one way to do this safely (the author chooses to overwrite `json_escape`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:09:59.103

You probably need to replace all `&quot;` with a single quote `"'"`, this is not valid javascript otherwise.

# extjs - Sencha Touch Navigation View - 更改标题在后退按钮上不起作用

> ID：14866695
> 
> 赞同：2
> 
> 时间：2013-02-14T02:07:02.610
> 
> 标签：extjs, navigation, sencha-touch, back

我在导航视图中有一个选项卡面板作为我的初始项目。当我更改选项卡时，我正在通过以下方式更新导航栏中的标题：

```
activeitemchange: function(container){
    var navigationView = container.up('navigationview'),
        navigationBar = navigationView.getNavigationBar(),
        newTabTitle = value.tab._title;

    navigationBar.setTitle(newTabTitle);
} 
```

问题是当我将新视图推送到导航视图时，后退按钮的文本使用旧的/原始标题，而不是更新的标题。单击后退按钮还将导航视图标题设置为旧/原始标题。

我找到解决方案最接近的是： [http://www.sencha.com/forum/showthread.php?189284-Navigation-View-Title-(iPad-App)](http://www.sencha.com/forum/showthread.php?189284-Navigation-View-Title-(IPad-App))

但是我在 navigationBar.refreshProxy() 调用中得到一个“未定义”错误，所以我假设它只适用于旧版本的 ST。

任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:09:39.373

我不知道你是否找到了这个问题的任何答案，或者你自己解决了这个问题，因为这个问题已经很老了。但是我尝试了您想做的事情，并且成功地获得了结果。所以这里是代码。我严格遵循 MVC，因此发布了需要它工作的必要文件。基本上，视图和控制器。

**包含 TabPanel 的**Main.js****

 **```
Ext.define('SO.view.Main', {
extend: 'Ext.tab.Panel',
xtype: 'main',
requires: [
    'Ext.TitleBar',
    'Ext.Video'
],
config: {
    tabBarPosition: 'bottom',

    items: [
        {
            title: 'Welcome',
            iconCls: 'home',

            styleHtmlContent: true,
            scrollable: true,

            html: [
                "You've just generated a new Sencha Touch 2 project. What you're looking at right now is the ",
            ].join("")
        },
        {
            title: 'Get Started',
            iconCls: 'action',

            items: [
                {
                    xtype: 'button',
                    text: 'Push a new view!',
                    action:'push_new_view'
                }
            ]
        }
    ]
} 
```

});

**Nav.js**具有导航视图和默认项目，如上面的选项卡面板

```
Ext.define('SO.view.Nav', {
extend: 'Ext.NavigationView',
xtype: 'nav',
config:{
    fullscreen: true,

    items: [
        {
            title: 'Default View',
            xtype:'main'
        }
    ]
} 
```

});

最后，控制器。我在控制器本身中进行了每个用户交互处理。

```
Ext.define('SO.controller.Nav',{
    extend:'Ext.app.Controller',
    config:{
        refs:{
            views:['SO.view.Main','SO.view.Nav'],
            navView:'nav',
            tabView:'main'
        },
        control:{
            tabView:{
                activeitemchange:'changeTitle'
            },
            'button[action=push_new_view]':{
                tap:'pushNewView'
            }
        }
    },
    changeTitle:function(container,value,oldValue,eOpts ){
        console.log(value.title);
        this.getNavView().getNavigationBar().setTitle(value.title);
    },
    pushNewView:function(){
        var activeTabTitle = this.getTabView().getActiveItem().title;
        var controller = this;
        controller.getNavView().push({
            title: 'Second',
            html: 'Second view!'
        });
        controller.getNavView().getNavigationBar().getBackButton().setText(activeTabTitle);
        controller.getNavView().getNavigationBar().getBackButton().on('tap',function(self){             
            controller.getNavView().getNavigationBar().setTitle(activeTabTitle);
        });
    }
} 
```

);

如您所见，我附加了根据功能中所选选项卡更改标题的`changeTitle`功能。

该功能`pushNewView`推送新视图，让您在点击时覆盖后退按钮行为。我所做的很简单，`activeItem()`从选项卡面板中获取，该面板包含一个推送新视图的按钮。一旦我们获得了 activeItem，我们就可以获得它的标题，并且该标题需要设置为`backButtnoText`. 所以我遍历导航视图和 getBackButton 实例，并简单地通过调用`setText()`方法更改后退按钮文本。

同时，我将事件处理程序附加到后退按钮，因为我们确实想将导航栏标题更改为前一个标题。因此，一旦使用点击返回按钮，我们将标题设置回我们在上面步骤中获得的标题。一旦你完成了一切，你可能想要分离事件处理程序，因为它可能会导致问题，或者我宁愿说它会很好。

试试这个，它只是工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:14:47.157

您将需要更改父视口的标题，而不仅仅是导航视图图块。基本上，导航标题已经根据父视图**标题**和所有推送的组件**标题**自行更改。

```
var view = Ext.create('Ext.NavigationView', {
    fullscreen: true,

    items: [{
        title: 'Change this title ',
        items: [{
            xtype: 'button',
            text: 'Push a new view!',
            handler: function() {
                view.push({
                    title: 'Second Title',
                    html: 'Second view!'
                });
            }
        }]
    }]
}); 
```

它应该看起来像这样：

```
activeitemchange: function(container){
    var newTabTitle = value.tab._title;
    container.setTitle(newTabTitle);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-01T11:15:50.173

```
//viewAppt is the reference of the view 
//Use this 
viewAppts.query('#headerTitlebar')[0].setTitle('Title');
// Instead of this
this.getApptsHeaderTitlebar().setTitle('Title'); 
```**

# javascript - 如何使用 jQuery 使表单输入字段充当链接？

> ID：14866709
> 
> 赞同：0
> 
> 时间：2013-02-14T02:08:30.457
> 
> 标签：javascript, jquery, forms

我在页面上有一个带有两个文本字段和一个提交按钮的表单。在短时间内，我想做的是使按钮和文本字段都像指向同一事物的链接一样。单击其中任何一个时，我希望出现一个是/否对话框，显示“正在维护的表单。您将被重定向到某个页面。继续吗？” No 关闭并且什么也不做， Yes 将您发送到 URL。

这可能吗？如果是这样，如何使用 vanilla js 或 jQuery 来实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T02:12:08.880

您可以将处理程序附加到所有这些输入字段上的单击事件。然后，您可以使用确认功能来提示用户并在用户选择“确定”时重定向用户。

HTML：

```
<input type="text" />
<input type="text" />
<input type="submit" /> 
```

jQuery：

```
 $("input").click(function(){
       if(window.confirm("Form under maintenance. You're being redirected to such and such page. Proceed?")){
           location.href = "http://example.com/temp_page";
       }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:12:29.533

在 jquery 中，您只需在输入上附加一个单击事件侦听器即可：http: [//jsfiddle.net/CuWHH/](http://jsfiddle.net/CuWHH/)

```
<input type='text' id='fred' value='none'>
$("#fred").on("click",function()
{
   //can add a confirm box that redirects to new page here
   window.alert("going fishing");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:13:03.743

```
$('input[type=submit], input[type=text]').click(function() {
    var r=confirm("Form under maintenance. You're being redirected to such and such page. Proceed?");
    if (r==true)
     {
        window.location = "/...";
     }
  }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T02:14:04.897

试试这个 jQuery 代码：

```
$("button, input").click(function(e){
    e.preventDefault(); //Stops the default action of an element from happening
    if(confirm("Form under maintenance. You're being redirected to such and such page. Proceed?")) {
        location.href = "http://www.google.com"; //Change it to your URL
    }
}); 
```

# asp.net - ASP.Net MVC MvcBuildViews 大幅增加编译时间

> ID：14866711
> 
> 赞同：9
> 
> 时间：2013-02-14T02:08:38.977
> 
> 标签：asp.net, asp.net-mvc

我们有一个项目，如果视图的 .cshtml 文件中有任何错误，我们希望构建视图以生成编译时错误。

尽管如此，编译时间还是会急剧增加：

*   `MvcBuildViews = true`耗时 62 秒
*   `MvcBuildViews = false`需要 9 秒

这是可以接受的吗？因为增长非常剧烈，我们无法忍受等待这样的编译时间。我们有什么办法可以改进这种编译？

到目前为止，该项目包含大约 130 个视图和部分视图（.cshtml 文件）。这被认为是大/中/小吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-07T00:08:56.630

好吧，我认为有可能编译视图本身就是一件好事，但我也不能等那么久。所以我更喜欢做的是`MvcBuildViews = true`在`ProperyGroup`Release 中添加它，这样你就只在 Release 时和部署之前编译视图

属性组应如下所示：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' "> 
```

所以把你的

```
<MvcBuildViews>true</MvcBuildViews> 
```

在此 Release 块内。这样，您仍然可以编译一次视图，而不是每次尝试调试时...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T02:46:57.170

我们在同样的问题上苦苦挣扎。我们开始编译 Views 是为了捕捉在**集成测试**和**UX 测试**期间会出现在我们身上的明显问题。更糟糕的是不知何故潜入生产的错误。

但是，正如您所注意到的，我们的构建时间变得无法忍受。像您一样，我们的开发人员构建了无数次，这成为我们一天的主要部分。我们在午餐后开玩笑说要进行测试，这样我们就可以在外出时完成构建。

**我们最终在UX-tests**之前开始构建。

现在我们正朝着预编译的方向发展。目前我们团队中只有一个人采用了它，并且显然预编译明显优于构建（增量与总）。设置基本上是一个 nuget 提取。

这些文章应该是一个好的开始

[http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/](http://stacktoheap.com/blog/2013/01/19/precompiling-razor-views-in-asp-dot-net-mvc-3/)

[http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html](http://blog.davidebbo.com/2011/06/precompile-your-mvc-views-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T16:48:16.023

在调试配置的 csproj 中将 MvcBuildViews 设置为 false。

```
<MvcBuildViews Condition=" '$(Configuration)' != 'Debug' ">true</MvcBuildViews> 
```

在菜单“工具/外部工具”中添加以下外部命令

```
Title: Compile with MVC views
Command: C:\Windows\Microsoft.NET\Framework64\v4.0.30319\MSBuild.exe
Arguments: $(SolutionDir)$(SolutionFileName) /p:MvcBuildViews=true
Initial directory: $(SolutionDir) 
Use Output window:  checked 
```

然后添加一个快捷方式：进入工具/选项/环境/键盘找到命令“Tools.ExternalCommandX”，其中X是您刚刚添加的外部命令的位置。分配一个键（例如：Ctrl-shift-1）

现在解释：我们有同样的问题。大多数时候我们不想编译视图，但我们喜欢在签入代码之前编译它们，这样我们在 50 个视图中编译 1 次。为了实现这一点，我使用 mvcbuildviews 参数向 msbuild 添加了一个外部工具命令。唯一的缺点是 Visual Studio 的错误窗口中没有列出错误，您必须查看输出窗口并双击错误（如果有）。

# php - 检查数字是否在 PHP 中浮动

> ID：14866713
> 
> 赞同：6
> 
> 时间：2013-02-14T02:08:53.337
> 
> 标签：php, validation, floating-point

这真的很奇怪。我有这段代码。

```
$rewardAmt = $amt;
if(is_float($rewardAmt)){
      print_r("is float");die;
} else {
      print_r("is not float"); die;
} 
```

$amt 的值为 0.01。但它正在进入其他条件。所以我做了一个 $amt 的 var_dump。它说 string(4) 所以我决定输入 $amt

```
 $rewardAmt = (float)$amt; 
```

但是这样做的问题是，即使 $amt 的值为 1，它仍然会被类型转换为浮动并进入 if 条件，这是不应该发生的。有没有其他方法可以做到这一点？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T02:11:14.767

[`filter_var()`](http://us3.php.net/manual/en/function.filter-var.php)与_[`FILTER_VALIDATE_FLOAT`](http://us3.php.net/manual/en/filter.filters.validate.php)

```
if (filter_var($amount, FILTER_VALIDATE_FLOAT))
{
     // good
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T02:17:43.410

如果将第一行更改为

```
$rewardAmt = $amt+0; 
```

$rewardAmt 应该被转换为一个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-25T13:48:54.640

您可以使用一元运算`+`符，它将字符串转换为适当的类型（`int`或`float`），然后使用以下命令测试生成的数据类型`is_float`：

```
$s = "3.00";
$n = +$s;
var_dump( $n ); // float(3)
var_dump( is_float($n) ); // true

$s = "3";
$n = +$s;
var_dump( $n ); // int(3)
var_dump( is_float($n) ); // false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T10:18:18.913

您可以通过以下方式检查

```
$float = floatval($num); //Convert the string to a float
if($float && intval($float) != $float) // Check if the converted int is same as the float value...
{
    // $num is a float
}else{
    // $num is an integer
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-07T14:55:17.903

正如[is_float 函数文档中所建议的](https://www.php.net/manual/en/function.is-float.php)：

> 注意：要测试变量是数字还是数字字符串（例如表单输入，它始终是字符串），您必须使用[is_numeric()](https://www.php.net/manual/en/function.is-numeric.php)。

答案是使用**is_numeric()**而不是 is_float()。如果测试的数字是“0”或 0，这也有效。

# algorithm - 加权图的 Dijkstra 与 A*

> ID：14866714
> 
> 赞同：0
> 
> 时间：2013-02-14T02:08:53.160
> 
> 标签：algorithm

我试图找出使用哪种算法来获得从给定起始节点到目标节点的最低成本路径。

```
A ----5---- B ---3--- C
|           |
|           /
D ----1-----E ------10------ F 
```

我一直在研究 Dijkstra 和 A*，因为它们都为此类问题提供了最佳解决方案。我理解它的方式是 Dijkstra 只是启发式为 0 的 A*。我已经实现了 Dijkstra 的算法，但想知道是否可以使用 A* 代替。在上述非常简单的图表中（没有任何其他信息），与 Dijkstra 相比，A* 是否可以使用一个可接受的启发式算法来提供更好的结果，或者 Dijkstra 是最优算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:52:24.707

If you don't have any knowledge of an heuristic that fits to the content of the graph then you have to choose Dijkstra.

A* was developed for road maps, where for road distances the constraint applies that the direct distance is always shorter than going via another node. This constraint does not apply for general weighted graphs.

If you don't know such an additional constraint / heuristic of the content of your graph then you have to use Dijkstra

Further keep in mind that road map graphs are so huge that it is worth using A*. If your graph is not huge, then probably it is even not worth thinking whether to find any heuristic. Such a wrong heuristic could even make things worse.

So you could use Dijkstra, and only if you have a performance problem you could start thinking to find a heuristic.

# java - 我如何查看从 GSON JsonReader 收到了多少字节

> ID：14866722
> 
> 赞同：0
> 
> 时间：2013-02-14T02:09:59.393
> 
> 标签：java, json, byte, gson, jsonreader

[在此处](https://sites.google.com/site/gson/streaming)阅读并使用 JsonWriter 和 JsonReader 创建一个要发送和接收的大型对象时。我想跟踪发送的总字节数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T22:31:57.163

没有任何东西`JsonWriter`可以`JsonReader`为你提供这些。

真正做到这一点的唯一方法是包装/扩展`Reader`或`Writer`您当前传递给`JsonReader`/`JsonWriter`并跟踪正在读取/写入/输出的字节。

**编辑添加：**例如，您可以执行以下操作：

```
class MyWriterWrapper extends Writer {

    private Writer realWriter;
    private int bytesWritten;

    public MyWriterWrapper(Writer realWriter) {
        super(); 
        this.realWriter = realWriter;
    }

    public int getBytesWritten() {
        return bytesWritten;
    }

    @Override
    public Writer append(CharSequence csq) throws IOException {
         realWriter.append(csq);
         bytesWritten += csq.length();
         return this;
    }

    // Implement/Override all other Writer methods the same way

} 
```

如果是一个界面，它会更干净，`Writer`但是......嗯，你能做什么。如果您知道您只会使用一种类型`Writer`（例如 a `BufferedWriter`），您可以扩展它，覆盖所有方法并重新调用方法，而不是通过构造函数传入 `this`的私有实例。`realWriter`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T07:04:31.463

没有从 JsonReader 获取接收字节数的默认方法。我写了一个有点棘手的 Hack，如下所述：

1.  从输入流中读取字节并将它们写入内部存储文件

    > ```
    > while ((count = inputStream.read(data)) != -1)  {
    >               total += count;
    >               final long downloadedLength = total;
    >               final long totalLength = lengthOfData;
    >            **// Here you get the size of bytes received**
    >               outStream.write(data, 0, count);
    >           } 
    > ```

2.  关闭所有打开的流（上面创建的输入和输出流）

3.  打开新建文件的输入流

    > InputStream 流 = mContext.openFileInput(FILE_NAME);
    > InputStreamReader inputStreamReader = new InputStreamReader(stream);

4.  现在你有一个 JsonReader 的输入流（流）

5.  让 JsonReader 使用这个输入流来解析数据

6.  解析完成后，删除你创建的临时使用的文件

    > InputStream 流 = mContext.openFileInput(FILE_NAME);
    > InputStreamReader inputStreamReader = new InputStreamReader(stream);
    > jsonReader = new JsonReader(inputStreamReader);
    > parseMyJSON(jsonReader);
    > 
    > 文件 file = new File(mContext.getFilesDir(), FILE_NAME);
    > 文件.删除（）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T08:44:45.457

没门。即使您将输入流包装在某种包装器中以计算字节数（例如 apache 的 CountingInputStream），由于 JsonReader 的内部缓冲，结果也会不正确。我已经尝试了大约 300 字节长的 JSON。CountingInputStream 报告每次读取约 4kb。

# css - 如何使三列全部占页面的高度？

> ID：14866724
> 
> 赞同：1
> 
> 时间：2013-02-14T02:10:15.027
> 
> 标签：css

我有一个设置了 3 列的页面：一个主要内容 div，以及两侧的阴影/边框。

这里的例子：http: [//jsfiddle.net/rfPJC/](http://jsfiddle.net/rfPJC/)

我需要两侧的“影子”div 才能进入页面底部。我怎样才能做到这一点？

示例 HTML

```
 <div id="wrapper">
        <div id="left"></div>
        <div id="main">
            <div id="content"></div>
        </div>
        <div id="right"></div>  
    </div> 
```

示例 CSS

```
html, body {height: 100%;}
#wrapper {height: 100%;}
#left {background: #555; width: 30px; height: 100%; float: left;}
#main {background: #999; width: 300px; float: left;}
#content {height: 2000px;}
#right {background: #555; width: 30px; height: 100%; float: left;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:17:44.243

如果“影子”div 有`position: fixed`，它们将保持在 100% 的高度。但是，这可能会遮挡部分内容，并且右阴影将与左侧对齐。要解决此问题，请使`left`右侧 div 的值等于两个 div 组合的宽度，并为主 div 添加一个左边距。

[http://jsfiddle.net/rfPJC/](http://jsfiddle.net/rfPJC/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:48:41.813

我给双方一个容器......像这样：

```
<html>
<body>
    <div id="wrapper">
        <div id="sides_container">
            <div id="left">Left Banner</div>
            <div id="right">Right Banner</div> 
            <div id="main">
                <div id="content">Hello</div>
            </div>

        </div>
    </div>
</body> 
```

然后像这样的CSS：

```
html, body {height: 100%}
#wrapper {height: 100%}
#sides_container{width:360px; margin-left:auto; margin-right:auto; background:#555;}
#left {background: #555; width: 30px; height: 100%; float: left}
#main {background: #999; width: 300px; margin-right:auto; margin-left:auto;}
#content {height: 2000px}
#right {background: #555; width: 30px; height: 100%; float: right;} 
```

我也喜欢居中，对不起... [http://jsfiddle.net/uhJHF/](http://jsfiddle.net/uhJHF/)

# c# - IIS 服务器上根目录的路径是什么？

> ID：14866726
> 
> 赞同：0
> 
> 时间：2013-02-14T02:10:26.617
> 
> 标签：c#, asp.net, iis

我正在尝试写入日志文件，但`File.Write(path, string)`没有给我访问权限。

这是错误消息：

```
Access to the path 'C:\Windows\SysWOW64\inetsrv\20130213190451765 49cb4a74-de61-49e5-93de-94d982073f89.txt' is denied. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:13:05.783

路径是通过给出的`Server.MapPath("~")`。在大多数情况下，我建议不要使您网站的根文件夹可写。为什么不选择一个不同的、隔离的位置并为您的应用程序池身份授予该位置的写入权限？

# elasticsearch - elasticsearch 和 not_analyzed - 仍然找不到东西

> ID：14866727
> 
> 赞同：0
> 
> 时间：2013-02-14T02:10:34.420
> 
> 标签：elasticsearch

我有一个这样的映射实体：

```
{ "Organisation":{
  "properties":{
     "_abstract_":{
        "type":"string",
        "store":"yes"
     },
     "_author_":{
        "type":"string",
        "store":"yes"
     },
     "_editdate_":{
        "type":"date",
        "index":"analyzed",
        "store":"yes",
        "format":"dateOptionalTime"
     },
     "_id_":{
        "type":"string",
        "index":"not_analyzed",
        "store":"yes",
        "omit_norms":true,
        "index_options":"docs"
     },
     "_title_":{
        "type":"string",
        "store":"yes"
     },
     "country":{
        "type":"string",
        "store":"yes"
     },
     "countrycode":{
        "type":"string",
        "index":"not_analyzed",
        "omit_norms":true,
        "index_options":"docs"
     },
     "creationdateutc":{
        "type":"date",
        "index":"analyzed",
        "store":"yes",
        "format":"dateOptionalTime"
     }, ... 
```

CountryCode 可以具有类似 CNTRY/US 的值。我无法查询这个 - 即使它没有被分析，它仍然想将值分成两个标记。例如：

```
{ "query":{
  "bool":{
     "must":[
        {
           "term":{
              "countrycode":"cntry/us"
           }
        }
     ],
     "must_not":[

     ],
     "should":[

     ]
  }},   "from":0,   "size":50} 
```

我不明白。我误解了一些简单的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:24:12.927

我通过在字段映射中将搜索和索引分析器指定为“关键字”来解决这个问题。

我还通过对我正在搜索的值使用错误的大小写（当关键字时，值没有降低）以及在使用 Head 我获取查询而不是发布它时，使我的问题更加复杂。嗬！

谢谢

# ios - 将照片保存到 UIImageView

> ID：14866728
> 
> 赞同：0
> 
> 时间：2013-02-14T02:10:44.940
> 
> 标签：ios, cocoa-touch

该应用程序应该拍摄/选择一张照片，然后将其分配给图像视图。一切似乎都正常，但图像视图永远不会改变。我的代码：

```
- (IBAction)takePicture:(id)sender
{
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
// Lazily allocate image picker controller
if (!imagePickerController) {
    imagePickerController = [[UIImagePickerController alloc] init];

    // If our device has a camera, we want to take a picture, otherwise, we just pick from
    // photo library
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
    {
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypeCamera];
    }else
    {
        [imagePickerController setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    }
}
// Place image picker on the screen
[self presentViewController:imagePickerController animated:YES completion:nil];

}

-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
    [self dismissViewControllerAnimated:YES completion:nil];
} else {
    [imagePickerPopover dismissPopoverAnimated:YES];
    imagePickerPopover = nil;
}

UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

[imageView setImage:image];
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:22:30.470

你需要一个代表。添加：

```
imagePickerController.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:22:51.300

在我看来，您没有为图像选择器设置委托，例如： `[imagePickerController setDelegate:self];`我认为这将在您的`takePicture`方法中。

# jquery - jquery ajax解析xml没有find

> ID：14866732
> 
> 赞同：0
> 
> 时间：2013-02-14T02:11:20.187
> 
> 标签：jquery, asp.net, xml, ajax

我正在努力让我们的网络服务使用 ajax 以尝试加速某些页面。下面是一个我正在工作的示例，但我想让它更容易在具有不同 Web 服务的多个页面中使用。有没有办法在不知道节点名称的情况下解析 XML？因此，在下面的示例中，我执行 $(this).find('ID').text()，但我想要做的只是找到第一个节点并动态获取其名称，然后能够创建我的带有名称的标题行和带有值的值行。我也想在不知道有多少列和/或行的情况下这样做。

```
 $.ajax({
            url: 'http://localhost:51558/Service1.asmx/GetData',
            type: 'GET',
            dataType: 'xml',
            success: function (xml) {
                var tbl = '<table border="1"><tr><th>ID</th><th>StartDate</th><th>EndDate</th><th>Title</th></tr>';
                $(xml).find('SiteMessages ').each(function () {
                    tbl += '<tr><td>' + $(this).find('ID').text() + '</td>';
                    tbl += '<td>' + $(this).find('StartDate').text() + '</td>';
                    tbl += '<td>' + $(this).find('EndDate').text() + '</td>';
                    tbl += '<td>' + $(this).find('Title').text() + '</td></tr>';
                });
                $('#datagrid').html(tbl + '</table>');
                alert('success');
            }
        }); 
```

**编辑：* *我查看了 jquery.parseXML，但我找不到任何不使用类似 $title = $xml.find("title"); 的示例

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:29:39.347

我建议您使用 JSON 并为每个响应发送一个模式数组

```
{"columns":["ID","StartDate","EndDate","Title"],
  "data" :[ [1, "12/12/2012", "1/1/2013","Manager"]]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:20:14.843

您可以使用 XML DOM 在节点中导航。请参阅[http://www.w3schools.com/dom/dom_node.asp](http://www.w3schools.com/dom/dom_node.asp)

# uinavigationcontroller - 导航栏隐藏时UIButton向上滑动

> ID：14866734
> 
> 赞同：0
> 
> 时间：2013-02-14T02:11:22.313
> 
> 标签：uinavigationcontroller, uibutton, hide, uinavigationbar

遇到了一个奇怪的问题

带有 2 个自定义 UIButtons 的 NavigationViewController（使用故事板）。它们都在屏幕底部水平对齐。

当我跑步（模拟或真实）时，一切看起来/表现都很好。

我需要通过以下方式隐藏顶部导航栏：

```
[self.navigationController setNavigationBarHidden:YES animated:YES]; 
```

现在，当我跑步时，导航栏滑出视线的同时，我的两个按钮之一也滑了上去！

删除按钮并重新创建，但仍然是相同的行为。

还检查了情节提要中的“文档大纲”面板，以防出现一些时髦的分层问题，但两个按钮都在视图中按顺序列出。

有人帮忙吗？谢谢托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:25:48.777

如果您不使用自动布局，请检查情节提要中 2 个按钮的自动调整大小掩码，或者如果您使用自动布局，请检查您的约束。

# ios - 在 Ios 设备上同时捕获电源按钮 + 主页键上的事件

> ID：14866736
> 
> 赞同：1
> 
> 时间：2013-02-14T02:11:46.740
> 
> 标签：ios, xcode, jailbreak, iphone-privateapi

我想知道，是否有任何私有框架可以捕获电源按钮 + 主页键同时按下以关闭 ios 设备的事件。当用户同时按下这些按钮而不是关闭电源时，我需要打开另一个应用程序或打开类似这样的相机。我知道这是垃圾主意..但我没有其他选择。这是我的客户要求。

因为他打算将 Iron 面板用于 ios 设备。关机的唯一方法是同时按下电源按钮和主页键。所以，当这个人一起按下这些按钮时，ios设备想要打开一个像iGotya这样的应用程序，找到我的设备等等。我们知道，Apple 永远不会接受这一点，它将成为越狱应用程序。我们很清楚这一点。请有人在这方面指导我，并给我一些关于这方面的教程。我对IOS开发很陌生。请帮助我。提前致谢。

# java - 如何在android中设置计时器？

> ID：14866737
> 
> 赞同：1
> 
> 时间：2013-02-14T02:11:52.033
> 
> 标签：java, android

```
timer.scheduleAtFixedRate(function_to_execute, 0, 5000); 
```

我已经阅读了上面的示例，但我想在特定日期和时间启动该功能，例如 2013/01/13, 13:15pm。

如何设置`timer.scheduleAtFixedRate`参数？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:29:04.827

该`scheduleAtFixedRate`方法已重载。

第一的 ：

```
public void scheduleAtFixedRate(TimerTask task,
                                Date firstTime,
                                long period) 
```

第二（你的代码使用了这个）：

```
public void scheduleAtFixedRate(TimerTask task,
                                long delay,
                                long period) 
```

因此，要在特定时间运行，您可以使用 pass `Date`object 作为第二个参数。

```
Date date = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss a", Locale.ENGLISH).parse("2013/01/13 13:15 pm");
timer.scheduleAtFixedRate(function_to_execute, date, 5000); 
```

更多：[Timer.scheduleAtFixedRate](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Timer.html#scheduleAtFixedRate%28java.util.TimerTask,%20java.util.Date,%20long%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:30:55.570

您需要将 DateTime 转换为 Long 值，然后在延迟时间参数中使用此 Long 值。

这是将日期转换为长值的示例，与将日期时间转换为长值并在延迟时间参数中使用此长值的方式相同。

```
String str_date="11-June-07";
  DateFormat formatter ; 
  Date date ; 
  formatter = new SimpleDateFormat("dd-MMM-yy");
  date = (Date)formatter.parse(str_date); 
  long longDate=date.getTime();
  System.out.println("Today is " +longDate ); 
```

谢谢。

# string - 从递归定义的字符串表示法构建二叉树

> ID：14866738
> 
> 赞同：0
> 
> 时间：2013-02-14T02:11:58.127
> 
> 标签：string, parsing, recursion, tree, binary-tree

我已经为此苦苦挣扎了几个小时，所以在不断地谷歌搜索并发现没什么可继续的之后，我终于决定看看 SO 可以为我的最新 CS hw 提供什么样的帮助。

我们的任务是读取和存储二叉树，它们以如下格式提供给我们： ( (root) (left_subtree) (right_subtree))

每组匹配的parens代表一棵树，第一个是根，接下来是左子树，然后是右子树。如果子树是叶子，则不需要被括号包围，但可以。为了澄清我的意思，请参阅以下示例，这些示例都是代码块下方所示树的所有有效表示。

```
(A B C)
(A (B) C)
(A B (C))
((A) (B) (C)) 
```

[![一颗树](../Images/a455df9036257901e6b8dcf86286359c.png)](https://i.stack.imgur.com/GGW8x.jpg)
[（来源：[otterbein.edu](http://faculty.otterbein.edu/psanderson/csc205/notes/binaryTreeABC.jpg)）]

对于一个更复杂的示例，可以更好地说明定义的递归性质，以下树的一个可能字符串是：

```
(F(B A (D C E)) (G () (I (H)))) 
```

注意，在F的右子树[即“(G()(I(H)))”]中，G后面的“()”是必要的，用来表示空的左孩子——但还要注意， G ["(I (H))"] 也可以更简单地表示为 "(IH)"。

![一棵更大的树](../Images/f92b6225bb367c9f19386ce6ca0df68d.png)

我已经完成了一个二叉树类（和匹配的 TreeNode 类），除了从这个输入构建树的基本功能，但我似乎无法理解如何准确地解析字符串。我对如何做到这一点有一个大致的了解——至少，递归是如何工作的——但是如何将问题分解成更小的部分让我头疼。

```
//pseudocode musings
TreeNode* Tree::buildFromString(string s){
TreeNode* temp = NULL
if ( the string doesn't represent an empty tree )
  temp = new TreeNode
  temp->data = part of s representing root
  temp->leftChild = buildFromString( part of s representing left subtree)
  temp->rightChild = same as above, but with right subtree     
}
return temp; 
```

我对递归本身没有问题——这是有道理的，在你的脑海中粗略地追踪它并不难。基本情况有效 - 一旦到达叶节点，您就退出递归并返回调用，并在返回时链接子树。

但是我不知道如何在代码中将问题分解成更小的部分，这显然是递归的全部意义所在。我想创建原始的子字符串以传递给递归调用，但我似乎无法理解如何获得适当的部分。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:19:13.227

你是对的，缺少的是：

*   如果字符串以'（'开始，它开始一棵树，'A'之后是根
*   如果它是，例如，'B'，那是一片叶子
*   如果是'('，递归
*   如果next是')'，关闭上面启动的节点

# gcc - 包括 并用 arm-linux-gnueabi-gcc 编译

> ID：14866739
> 
> 赞同：1
> 
> 时间：2013-02-14T02:11:59.187
> 
> 标签：gcc, android-ndk, arm

由于在 Ubuntu 上编译 NDK 项目的 [Android gcc sysroot 和链接器](https://stackoverflow.com/questions/14680791/android-gcc-sysroot-and-linker)给出的原因，我正在使用 `arm-linux-gnueabi-gcc`. 在没有 Android-NDK 特定包含的情况下编译时没有问题，但现在包含`jni.h`，

`arm-linux-gnueabi-gcc -static -o main.exe main.c -I'path/to/native_app_glue' -I'/path/to/android-14/arch-arm/usr/include'`

我得到一些神秘的错误`undefined reference to __sF`。

有谁知道可能出了什么问题，或者有没有人`jni.h`使用这样的独立工具链成功编译 Android NDK 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:09:56.407

除非您静态链接所有内容，否则使用`arm-linux-gnueabi-`工具链编译将不起作用，因为 Android 使用与 Ubuntu 不同的 soname。

# iphone - iOS dev: How to change text in the textfield?

> ID：14866740
> 
> 赞同：5
> 
> 时间：2013-02-14T02:12:06.223
> 
> 标签：iphone, ios, objective-c, ios6

I'm a beginner trying to create my first app. I'm trying to get the user to enter in a number into the the textfield, the app does what it does, and then the answer gets placed into the textfield itself. I'm using the storyboard to make this.

For example:

User puts '1' into textfield, 'a' gets placed in place once the user presses enter.

Thanks.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T02:14:25.300

You can change the `.text` property, for example:

```
self.textField.text = [NSString stringWithFormat:@"%@a", self.textField.text]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T04:41:50.927

If youy're simply passing the string then,

```
txtField.text = @"Hello" 
```

and If you're getting text from UITextField then,

```
txtField.text = [NSString stringWithFormat:@"%@a",txtField.text]; 
```

**txtField** is an outlet of UItextField

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T07:20:12.120

Just go through some beginners guide and understand the concepts. Please refer [http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uitextfield-uitextfielddelegate/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-uitextfield-uitextfielddelegate/) to get an idea of how to place UITextfield and adding events and all.

# windows - 如何改变ghc的路径？

> ID：14866760
> 
> 赞同：6
> 
> 时间：2013-02-14T02:14:22.460
> 
> 标签：windows, haskell, path, ghc, haskell-platform

我在 Win7 上使用 HaskellPlatform-2012.4.0.0。它安装为便携式。路径是通过 .bat 文件管理的，因此 ghci 和 ghc 可以工作。Cabal 配置和文件夹由此变得半便携[。](https://stackoverflow.com/questions/14368401/how-to-change-path-of-cabal-config-file)

问题是`ghc`文件夹。它自己安装在`C:\Users\name\AppData\Roaming\ghc\i386-mingw32-7.4.1.`

如何更改它的默认路径？所以我可以在 Windows 上拥有真正便携的 Haskell :)

编辑：有 3 个新的系统变量什么都不做。以下是结果：

```
SET APPDATA=%~dp0AppData   -- has no effect. ghc is still made in roaming
SET USERPROFILE=%~dp0  -- kills cabal
SET LOCALAPPDATA=%~dp0Local   --not sure if this is ever used. 
```

[杀死阴谋集团错误链接](https://github.com/haskell/cabal/issues/700)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T16:33:37.130

您可以尝试`SET USERPROFILE=%~dp0`同时确保文件夹结构支持 Cabal 的期望。它可能正试图去`%USERPROFILE%AppData\Roaming`或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-04T04:32:12.360

您可以使用符号链接`mklink /D linkName target`/D 表示目录符号链接。此命令自 Windows Vista/2008+ 起可用

```
cd C:\Users\myself\AppData\Roaming
mklink /D cabal C:\installed\cabal
mklink /D ghc C:\installed\ghc 
```

有关符号链接的更多信息[http://en.wikipedia.org/wiki/NTFS_symbolic_link](http://en.wikipedia.org/wiki/NTFS_symbolic_link)

# c# - 这两者有区别吗？

> ID：14866763
> 
> 赞同：3
> 
> 时间：2013-02-14T02:14:34.140
> 
> 标签：c#, .net

有区别吗？

```
class example
{
    int i = 5;
}

class example2
{
    int i;

    public example2()
    {
        i = 5;
    }
} 
```

我更喜欢第二个，因为我不喜欢在声明变量后给出值。但是技术上有区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T02:20:30.303

~~是的。如果有人从您的类派生`example2`并忘记调用基类构造函数，则跳过初始化，这可能很糟糕。~~

如果不依赖于构造函数参数，我倾向于在声明点进行初始化（如您的第一个示例）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T02:20:50.507

简短的回答：**没有**

长答案：

如果您查看生成的`IL code`，则在`example`类初始化完成的情况下，在调用构造函数之前，类中的`example2`类初始化是在构造函数中完成的。

`example`班级

```
.class private auto ansi beforefieldinit example
    extends [mscorlib]System.Object
{
    .method public hidebysig specialname rtspecialname instance void .ctor() cil managed
    {
        .maxstack 8
        L_0000: ldarg.0 
        L_0001: ldc.i4.5 
        L_0002: stfld int32 ConsoleApplication1.example::i
        L_0007: ldarg.0 
        L_0008: call instance void [mscorlib]System.Object::.ctor()
        L_000d: ret 
    }

    .field private int32 i

} 
```

和`example2`类

```
.class private auto ansi beforefieldinit example2
    extends [mscorlib]System.Object
{
    .method public hidebysig specialname rtspecialname instance void .ctor() cil managed
    {
        .maxstack 8
        L_0000: ldarg.0 
        L_0001: call instance void [mscorlib]System.Object::.ctor()
        L_0006: ldarg.0 
        L_0007: ldc.i4.5 
        L_0008: stfld int32 ConsoleApplication1.example2::i
        L_000d: ret 
    }

    .field private int32 i

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T02:28:54.263

我应该说，在某些情况下可能存在差异（尽管如果代码很简单，就像问题中发布的那样，当然没有任何区别）。

考虑以下代码：

```
public class Class1
{
    public Class1()
    {
        Foo();
    }

    public virtual void Foo()
    {

    }
}

public class Class2 : Class1
{
    protected int i = 5;
    protected int j;

    public Class2()
    {
        j = 5;
    }

    public override void Foo()
    {
        Console.WriteLine("i:" + i);
        Console.WriteLine("j:" + j);
    }
} 
```

并测试它

```
new Class2().Foo(); 
```

输出将是：

```
i:5
j:0
i:5
j:5 
```

线索是初始化程序（当您在字段声明中分配值时）在基类构造函数之前运行。因此，当`Foo`从`Class1`构造函数调用时`j`具有其默认值，即`0`. 但是当我们调用`Foo`一个完全创建的变量`new Class2().Foo();`时（当`Class2`构造函数完成时），`j`已经有了 value `5`。

尽管这是一种危险的设计——`virtual`在基类构造函数中调用方法，但是，它并没有被禁止，人们应该意识到这一点。

以下是通过 C# 摘录的 J.Richter CLR：

> 编译器在调用基类的构造函数之前使用方便的语法初始化任何字段，以保持这些字段始终具有源代码外观所指示的值的印象。当基类的构造函数调用一个虚方法，该方法回调到派生类定义的方法时，就会出现潜在的问题。如果发生这种情况，使用方便语法初始化的字段在调用虚拟方法之前已经初始化。

# intellij-idea - 使用 Lombok 的 @Slf4j 和 Intellij 构建：找不到符号日志

> ID：14866765
> 
> 赞同：150
> 
> 时间：2013-02-14T02:15:07.827
> 
> 标签：intellij-idea, slf4j, lombok

我有一个从命令行构建没有问题的 Maven 项目。但是，当我使用 IntelliJ 构建它时，出现错误：

```
java: FileName.java:89: cannot find symbol
symbol  : variable log 
```

java文件中没有定义或导入日志，但是有一个

```
@Slf4j
final public class FileName { 
```

应该定义日志类的类主体之前的语句。

在项目结构窗口中，类：

```
Maven: org.slf4j:jcl-over-slf4j:1.6.1
Maven: org.slf4j:slf4j-api:1.6.6
Maven: org.slf4j:slf4j-log4j12:1.6.6
Maven: org.slf4j:slf4j-simple:1.6.6 
```

列在库下，并指示已下载并可用。

知道为什么这会通过命令行使用 maven 构建，而不是通过 IntelliJ 构建，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-03-04T23:14:21.280

除了[安装 Lombok 插件](https://stackoverflow.com/a/46934215/3061686)外，还要确保勾选“ `Enable annotation processing`”复选框：

```
Preferences > Compiler > Annotation Processors 
```

**注意：**从 IntelliJ 2017 开始，“ `Enable Annotation Processing`”复选框已移至：

```
Settings > Build, Execution, Deployment > Compiler > Annotation Processors 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-14T02:19:25.673

据推测，这就是您正在使用的[Lombok @Slf4j注释。](http://projectlombok.org/features/Log.html)如果您希望 IntelliJ 识别 Lombok 注释，则需要在 IntelliJ 中安装 Lombok 插件。否则，如果您尝试使用不存在的字段，您会期待什么？

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2017-04-06T11:17:54.037

在 Intellij 版本 2016、2017 中，启用 Preferences -> Compiler -> Annotation Processors 对我不起作用！

以下附加复选框有帮助：[![在此处输入图像描述](../Images/1970a65f3447526afea86c1acce8fe49.png)](https://i.stack.imgur.com/y6Xs8.png)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2020-09-16T18:55:25.717

**这里有以下步骤：**

**步骤 1.**在 File -> Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processor 下为您的项目启用注释处理

截屏 [![在此处输入图像描述](../Images/b7e2d076dcd3d43d3375875975495fc5.png)](https://i.stack.imgur.com/Y7mgG.png)

**步骤 2.**重启 IDE 后在 IntelliJ IDE 中安装 lombok 插件。截屏

[![在此处输入图像描述](../Images/49ed8ad318df490b642153181ae6819c.png)](https://i.stack.imgur.com/sSwr4.png)

**步骤 3.**在 build.gradle 文件中添加依赖项。

```
 compileOnly 'org.projectlombok:lombok:1.18.12'
 annotationProcessor 'org.projectlombok:lombok:1.18.12' 
```

如果您在测试中使用 lombok，则需要添加：

```
testCompileOnly 'org.projectlombok:lombok:1.18.12'  
testAnnotationProcessor 'org.projectlombok:lombok:1.18.12' 
```

或[https://developervisits.wordpress.com/2020/09/16/building-with-lomboks-slf4j-and-intellij-cannot-find-symbol-log/](https://developervisits.wordpress.com/2020/09/16/building-with-lomboks-slf4j-and-intellij-cannot-find-symbol-log/)

希望这个答案对您有所帮助。

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-10-25T13:48:52.467

**2019：**

获取一个插件，您就可以排序了...

**文件 > 设置 > 插件**

[![在此处输入图像描述](../Images/849e9c958e5593b875f444da4d910e3a.png)](https://i.stack.imgur.com/ZG8kU.png)

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2019-07-02T16:26:10.703

为我工作！！！它在 CircleCI 和 Jenkins 上也失败了。

如果您是 Gradle 用户，请尝试将以下内容添加到您的依赖项中：

```
dependencies {
    //Other Dependencies >>

    //LOMBOK Dependencies
    annotationProcessor 'org.projectlombok:lombok'
    compileOnly 'org.projectlombok:lombok'
    testAnnotationProcessor 'org.projectlombok:lombok'
    testCompileOnly 'org.projectlombok:lombok'
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2015-02-12T08:08:37.853

**如果您包含logback-core**和**logback-classic**，我可能会取消一个死主题，但一个简单的解决方案是检查您的依赖项（例如 Maven 的 pom）。

**Slf4j**只是接口，你需要它背后的具体实现才能工作。

我已经被**IDEA**搞砸了两次，现在我可以走了：D

* * *

## 回答 #8

> 赞同：12
> 
> 时间：2020-12-08T15:28:17.243

因此，即使在启用注释处理并安装 Lombok 插件后问题仍然存在。

IDEA 2020.3 和 Lombok存在[问题](https://github.com/mplushnikov/lombok-intellij-plugin/issues/952)，您可以按照[此修复程序](https://github.com/rzwitserloot/lombok/issues/2592)解决此问题。

基本上，添加`-Djps.track.ap.dependencies=false`到 VM 选项中，您可以在：Preferences -> Compiler 中找到它。命名为“共享构建过程 VM 选项”

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-11-23T19:46:27.467

这不是 IntelliJ 问题。如果您在控制台下尝试，运行*mvn install*，也会中断。**lombok.extern 中**的所有注释都需要添加依赖项。这个包将下一个注释分组：

*   公共日志
*   鞭打者
*   日志
*   JBoss日志
*   日志4
*   日志4j2
*   slf4j
*   XSlf4j

例如，对于 Slf4j，有必要将此依赖项添加到您的*pom.xml*

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>${slf4j.version}</version>
</dependency> 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-11-28T13:31:01.067

如果您使用的是 maven，请尝试将 Lombok 路径添加到`maven-compiler-plugin`注释处理器列表，如下所示。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.8.1</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
                <annotationProcessorPaths>
                    <path>
                        <groupId>org.mapstruct</groupId>
                        <artifactId>mapstruct-processor</artifactId>
                        <version>1.3.0.Final</version>
                    </path>
                    <path>
                        <groupId>org.projectlombok</groupId>
                        <artifactId>lombok</artifactId>
                        <version>1.18.10</version>
                    </path>
                </annotationProcessorPaths>
            </configuration>
        </plugin> 
```

根据您的 Lombok 版本更改版本。除此之外，请确保您已完成以下操作

*   为 Intellij 安装了 Lombok 插件。
*   为您的项目启用注释处理`File -> Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processor`。对我来说，`Obtain processors from project classpath`并且`Processor path`正在工作。所以不确定什么对你有用，但试试哪个有效。

而不是在黑暗中拍摄几个小时。阅读一点注释处理器的工作原理以及编译器如何使用可能会有所帮助。所以请在下面快速阅读。

[http://hannesdorfmann.com/annotation-processing/annotationprocessing101](http://hannesdorfmann.com/annotation-processing/annotationprocessing101)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-04-24T15:18:34.677

在 IDEA 13 中，这似乎不再是问题，您只需要安装 Lombok 插件即可。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-07-19T03:33:18.537

我刚刚安装了最新的idea版本2108.1，发现这个问题，安装lombok插件后重启idea解决了。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-09-12T18:47:51.347

从类中删除 @Slf4J 注释，然后重新添加它对我有用。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2019-08-28T12:40:32.190

我尝试了几乎所有提到的答案，但对我没有任何帮助。我的 gradle 构建每次都失败。刚刚找到这个解决方案：

添加`annotationProcessor 'org.projectlombok:lombok'` 你的 build.gradle。

这对我有用。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2019-11-06T21:47:18.063

1 My gradle lombok dependecies:

```
implementation 'org.projectlombok:lombok:1.18.10'
annotationProcessor 'org.projectlombok:lombok:1.18.10' 
```

2 After enabling "Annotations..." in IDEA (Settings), taking into account that you have installed Lombok plugin, that resolved my the same issue

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2020-12-03T13:02:18.070

在如下警告之后，我遇到了同样的错误：

```
java: You aren't using a compiler supported by lombok, so lombok will not work and has been disabled.
  Your processor is: com.sun.proxy.$Proxy27
  Lombok supports: OpenJDK javac, ECJ 
```

就我而言，这是[lombok < 1.18.16 和 IDEA 2020.3 的不幸组合](https://github.com/mplushnikov/lombok-intellij-plugin/issues/988)。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-10-08T05:34:27.260

这对我有用： `File -> Settings -> Build, Execution, Deployment -> Compiler -> Annotation Processor`

勾选“启用注释处理”。 `Apply`

关

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-03-30T23:30:48.223

在 JDK8 下编译时，我在旧版本的 Lombok 上看到了这个问题。将项目设置回 JDK7 使问题消失了。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-05-14T23:52:45.860

这不会是 OP 的问题，但对于尝试*一切都*没有成功的其他人：

我有类似的症状。每当我在 a 之后构建`mvn clean`时，它都不会找到`log`, or `getXYZ()`, or `builder()`, 或任何东西。

```
[ERROR]   symbol:   variable log
[ERROR]   location: class com.example.MyClass
[ERROR] /Path/To/Some/Java/src/main/com/example/MyClass.java:[30,38] cannot find symbol
[ERROR]   symbol:   method builder()
[ERROR]   location: class com.example.MyClass 
```

在阅读了我能找到的关于 QueryDSL/JPA/Hibernate/Lombok/IntelliJ/Maven 问题的所有答案后，我发现罪魁祸首是**在静态字段上注释****的方法的单个静态导入`@Getter`**。

*春季 1.15.14.RELEASE，Intellij 2019.1.1*

```
@SpringBootApplication
public class BarApplication implements ApplicationContextAware {
  @Getter
  private static ApplicationContext applicationContext;

  // ... start Spring application, and grab hold of ApplicationContext as it comes past
} 
```

```
import ...
import static BarApplication.getApplicationContext;

@Slf4j
public class IMakeItAllFail {
   public IMakeItAllFail() {
      log.info("{}", getApplicationContext());
   }
} 
```

```
@Slf4j
public class Foo {
  Foo() {
    log.info("I fail to compile but I have nothing to do with the other classes!");
  }
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2019-05-30T11:42:37.120

启用注释处理器并安装 lombok 插件后，它仍然无法正常工作。我们通过检查 Idea 选项“将 IDE 构建委托给 gradle”来解决它

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-05-21T16:19:24.017

IDEA 2021 仍然存在问题，要解决它，请确保您的项目依赖项中有最新版本的 lombok。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-28T14:06:28.357

如果有人仍然面临这个问题，那不是因为 IntelliJ，而是您需要为 maven 编译器插件指定注释处理器（如果您使用的是 maven，则原因）

```
 <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <version>3.8.0</version>
                    <configuration>
                        <source>11</source>
                        <target>11</target>

                            <annotationProcessorPath>
                                <groupId>org.projectlombok</groupId>
                                <artifactId>lombok</artifactId>
                                <version>1.18.12</version>
                            </annotationProcessorPath>

                        </annotationProcessorPaths>
                    </configuration>
             </plugin> 
    ``` 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-04-17T16:26:59.277

使用此依赖项并尝试：

```
<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>1.7.30</version>
</dependency> 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-08-03T07:51:18.970

对我来说，如果您使用的是 Maven，它就可以工作。我在我的 spring boot 项目的 pom.xml 中添加了这个。

```
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
</dependency> 
```

然后在我重新启动 IntelliJ 后，您只需在键入 @Slf4j 时控制+空格即可自动导入库。

并且不要忘记启用启用注释处理：设置>构建，执行，部署>编译器>注释处理器

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-08-11T06:55:13.277

我有同样的问题; 我使用 gradle 和 IDEA；

事实证明，这是由错误的gradle版本引起的。

在 gradle\wrapper\gradle-wrapper.properties 中，它是：

`distributionUrl=https\://services.gradle.org/distributions/gradle-4.8-bin.zip`

但是，我将 IDEA 中的版本指定为

`D:\Library\gradle-5.2.1`

将 gradle 版本降低到 4.10.x 后，问题就消失了。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-11-30T17:56:30.700

没有一个答案可以解决您的项目中可能存在不正确依赖项的事实，如果您使用的是 spring boot，则依赖项定义很容易：

```
 <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
        <!--<version>1.18.12</version> you dont need to specify a version-->
        <type>jar</type>
    </dependency> 
```

但是如果你没有使用 spring boot，你可以导入所有依赖项：

```
 <!--region Lombok Configuration -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.8.0-beta2</version>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>1.1.5</version>
        </dependency>
        <!-- https://mvnrepository.com/artifact/org.projectlombok/lombok -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <version>1.18.12</version>
            <type>jar</type>
        </dependency>
        <!-- endregion --> 
```

这假设您有[插件](https://stackoverflow.com/a/46934215/3061686)工作并且在以下`"Enable Annotation Processing"`位置激活了复选框：

**设置**[Ctrl+Alt+S] >**构建、执行、部署**>**编译器**>**注释处理器**

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-03-15T10:54:26.717

这就是我为什么 IntelliJ 没有找到我的 maven 依赖项的问题：我在 pom.xml 的其他地方有一个重复的标签“依赖项”。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-08-13T12:54:56.483

尝试在***项目基础目录***`lombok.config`下创建文件并提供价值。**`lombok.log.fieldName`**

 **例子：`lombok.log.fieldName = LOG`

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2019-07-26T02:29:06.557

对我来说，解决问题的是在 Maven 设置中勾选“使用插件注册表”复选框。

路径为：文件 -> 首选项 -> 构建、执行、部署 -> 构建工具 -> Maven

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2020-07-04T13:59:35.010

我有 Lombok 插件，启用了注释，它是从命令行编译的 - 一切都没有将我的项目视为 maven（所有 maven 依赖项在源文件中都是红色的）。然后我单击 SHIFT 两次并搜索“maven”，结果中有“重新加载所有 Maven 项目”。运行后出现 Maven 选项卡，我能够编译，源代码中的所有红色下划线都消失了。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2020-08-09T09:53:11.993

一件简单的事情，但我想通了：我错过了加入`@Log`课程。

```
@Log
public class YourClassName {

} 
```

它可能会帮助某人。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2020-06-03T11:10:02.380

删除每个模块中的 .idea 文件夹和 .iml 文件并重建解决方案。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-01-09T01:46:07.420

这是另一篇相关文章[Lombok not working with IntelliJ 2020.3 Community Edition](https://stackoverflow.com/questions/65095215/lombok-not-working-with-intellij-2020-3-community-edition)，它可能会解决用户使用`lombook`和`IntelliJ 2020.3 CommunityEdition`.

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2021-10-12T13:22:14.417

使用的编译器 javac 为 14 或 17，而项目的目标版本为 1.8**

# c# - 为什么我不能使用反射加载 AssemblyVersion 属性？

> ID：14866768
> 
> 赞同：7
> 
> 时间：2013-02-14T02:15:09.533
> 
> 标签：c#, .net, exception, reflection, .net-assembly

assemblyinfo.cs 文件具有 AssemblyVersion 属性，但是当我运行以下命令时：

```
Attribute[] y = Assembly.GetExecutingAssembly().GetCustomAttributes(); 
```

我得到：

```
System.Runtime.InteropServices.ComVisibleAttribute
System.Runtime.CompilerServices.RuntimeCompatibilityAttribute
System.Runtime.CompilerServices.CompilationRelaxationsAttribute
System.Runtime.InteropServices.GuidAttribute

System.Diagnostics.DebuggableAttribute

System.Reflection.AssemblyTrademarkAttribute
System.Reflection.AssemblyCopyrightAttribute
System.Reflection.AssemblyCompanyAttribute
System.Reflection.AssemblyConfigurationAttribute
System.Reflection.AssemblyFileVersionAttribute
System.Reflection.AssemblyProductAttribute
System.Reflection.AssemblyDescriptionAttribute 
```

但是我已经无数次检查了这个属性是否存在于我的代码中：

```
 [assembly: AssemblyVersion("5.5.5.5")] 
```

...如果我尝试直接访问它，我会得到一个异常：

```
Attribute x = Attribute.GetCustomAttribute(Assembly.GetExecutingAssembly(), typeof(AssemblyVersionAttribute)); //exception 
```

我想我将无法使用该属性，但.NET 为何不读取它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T02:21:03.280

如果您只是想获得汇编版本，那很简单：

```
Console.WriteLine("The version of the currently executing assembly is: {0}", Assembly.GetExecutingAssembly().GetName().Version); 
```

该属性是[System.Version](http://msdn.microsoft.com/en-us/library/system.version.aspx)的一种类型，它具有`Major`、`Minor`、`Build`和`Revision`属性。

例如。一个版本的程序集`1.2.3.4`有：

*   `Major`=`1`
*   `Minor`=`2`
*   `Build`=`3`
*   `Revision`=`4`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T00:30:44.487

我将重复 Hans Passant 的评论：

[AssemblyVersion] 在 .NET 中非常重要。编译器特别对待属性，它在生成程序集的元数据时使用它。并且实际上并没有发出该属性，那将是两次。请改用 AssemblyName.Version，如图所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:26:58.610

（只是为了完善获得版本的味道......）

如果您尝试获取任意程序集的**文件**`FileVersionInfo`版本信息（即，不是一个加载/运行的程序集），您可以使用- 但是，请注意这可能`AssemblyVersion`与元数据中指定的不同：

```
var filePath = @"c:\path-to-assembly-file";
FileVersionInfo info = FileVersionInfo.GetVersionInfo(filePath);

// the following two statements are roughly equivalent
Console.WriteLine(info.FileVersion);
Console.WriteLine(string.Format("{0}.{1}.{2}.{3}", 
         info.FileMajorPart, 
         info.FileMinorPart, 
         info.FileBuildPart, 
         info.FilePrivatePart)); 
```

# boolean-logic - 如何将（abc）转换为与非门？

> ID：14866770
> 
> 赞同：3
> 
> 时间：2013-02-14T02:15:49.473
> 
> 标签：boolean-logic, boolean-expression, circuit-diagram

使用 DeMorgans 我得到：

```
~~(abc)  // ~ is the not. 
```

我的问题是当我尝试构建电路时，与非门只需要 2 个输入。那么我将如何将其拆分为 3？如果它是一个与门，我将只使用两个，等式将是：

```
(a AND b) AND c 
```

但是，这不适用于我的 NAND，因为

```
~((a NAND b) NAND c) != (abc) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-10T10:12:49.150

**我建议使用 Rott's grids**。Rott 网格是 De Morgan 定律的图形应用，对于解决像您这样的问题特别有用。一些逻辑门比其他逻辑门需要更多的晶体管。减少逻辑门潜在延迟的需要可能是使用 NOR 或 NAND 门优化设计的动机。使用 Rott 的网格可以非常快速地找到相应的功能 - 使用您需要的逻辑门：

每个 Rott 的网格都是根据以下三个原则创建的：

*   德摩根定律通过在 ⋅ （连词）和 + （析取词）之间切换并用水平线（否定词）划分它们来得到尊重，
*   垂直线分隔各个输入，改变逻辑门输入的数量，
*   最后一行以质数或否定形式放置输入变量 - 这由它们上方的水平线数单独确定。

以下所有五个网格都是给定函数的不同表示：

```
 a ⋅ b ⋅ c      a ⋅ b ⋅ c      a ⋅ b ⋅ c      a ⋅ b ⋅ c      a ⋅ b ⋅ c 
   |   |       -----------    -----------    -----------    -----------
 a | b | c        +   +          +   +          +   +          +   + 
               -----------    -----------       | ------       | ------
                  ⋅   ⋅          ⋅   ⋅          |   ⋅          |   ⋅
                  | ------    ------ |          | ------       |   |
                  |   +          +   |          |   +       ¬a | b | c
                  | ------    ------ |          |   |
                  |   ⋅          ⋅   |       ¬a | ¬b|¬c
                  |   |          |   |
                a | b | c      a | b | c 
```

[![给定函数的等效布尔表达式](../Images/f4b2665fe07276b8b67b4ed996708c08.png)](https://i.stack.imgur.com/A0WbG.gif)

第一个网格并不是很有用，它只是由 3 输入 AND 实现的原始函数：

```
f = a ⋅ b ⋅ c 
```

第二个 Rott 网格仅使用 2 输入 NAND 实现。您可以使用两个 2 输入 NAND 和两个反相器或四个 2 输入 NAND——其中两个在反相器的位置，因为两个引脚上具有相同输入的 2 输入 NAND 会反转信号。

```
f = ¬(nand(a,¬(nand(b,c)))) 
```

第三个罗特的网格只是第一个的变体。

```
f = ¬(nand(¬(nand(a,b)),c)) 
```

第四个罗特网格可以通过使用两个 2 输入 NOR 和四个反相器来实现。反相器可以用 2 输入 NOR 或 2 输入 NAND 代替。

```
f = nor(¬a,¬(nor(¬b,¬c)))) 
```

第五罗特栅极可以通过1个2输入NOR、1个2输入NAND和1个反相器的组合来实现。

```
f = nor(not(a),nand(b,c)) 
```

（图片是使用[在线乳胶工具](http://www.codecogs.com/latex/eqneditor.php)生成的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:31:57.280

2 ~ 是否意味着您不想输出两次？如果是这样，~~（abc）=（abc），（两个NOT相互抵消）所以你可以做（​​a AND b）AND c。

如果您只想取 (abc) 的 NOT 一次，您可以先执行 (a AND b) AND c，然后您可以将该输出通过逆变器。你需要两个芯片而不是一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:25:50.283

如果你想要的只是一个当所有输入为 1 时输出 0 的电路......

您可以简单地检查它们中的任何一个是否为 0，然后否定它。

你已经说了答案：德摩根定律。只需应用它们：~(a^b^c) = ~a or ~b or ~c

虽然也许我错过了一些东西。还有其他我可能没有注意到的限制吗？

# ios - 我想要的意思是，在 SourceType PhotoLibrary 的 UIImagePickerController 上添加 UIToolbar

> ID：14866773
> 
> 赞同：-2
> 
> 时间：2013-02-14T02:16:04.610
> 
> 标签：ios, objective-c, ios5, uiimagepickercontroller, photolibrary

我想要的意思是，添加`UIToolbar`SourceType `UIImagePickerController`PhotoLibrary。

我尝试使用：

```
[UIViewController presentViewController:UIImagePickerController completion:^{}]; 
```

一次就像成功一样。但是，PhotoLibrary 的 UINavigation Back 按钮使用`UIToolbar`是隐藏的。

请，如何手段或参考，文件，其他。

我试过使用`presentViewController: completion: block`.

```
- (void)showPhotoLibrary {

    if ( ![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary] ) {
        return;
    }

    UIImagePickerController* ipc = [[UIImagePickerController alloc] init];
    [ipc setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [ipc setDelegate:self];

    [self presentViewController:ipc animated:YES completion:^{
        [ipc setToolbarHidden:NO];
    }];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:21:16.113

Self resolved. thank you.

```
- (void)showPhotoLibrary {

    if ( ![UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary] ) {
        return;
    }

    UIImagePickerController* ipc = [[UIImagePickerController alloc] init];
    [ipc setSourceType:UIImagePickerControllerSourceTypePhotoLibrary];
    [ipc setDelegate:self];

    UIToolbar* tb = [[UIToolbar alloc] init];
    float tbh = 44.0f;
    float tbw = [[ipc view] frame].size.width;
    float tby = [[ipc view] frame].size.height - tbh;
    [tb setFrame:CGRectMake(0, tby, tbw, tbh)];

    [self presentViewController:ipc animated:YES completion:^{
        [[ipc view] addSubview:tb];
    }];
}

```

# javascript - 检测文档高度变化

> ID：14866775
> 
> 赞同：87
> 
> 时间：2013-02-14T02:16:18.643
> 
> 标签：javascript, domdocument

我试图检测我的`document`身高何时发生变化。完成后，我需要运行一些函数来帮助组织我的页面布局。

我不是在寻找`window.onresize`。我需要整个文档，它比窗口大。

我如何观察这种变化？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-02-15T18:33:26.813

## 更新（2020 年 10 月）：

[resizeObserver](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver/observe)是一个很棒的 AP​​I（[支持表](https://caniuse.com/resizeobserver)）

```
// create an Observer instance
const resizeObserver = new ResizeObserver(entries => 
  console.log('Body height changed:', entries[0].target.clientHeight)
)

// start observing a DOM node
resizeObserver.observe(document.body)

// click anywhere to rnadomize height
window.addEventListener('click', () =>
  document.body.style.height = Math.floor((Math.random() * 5000) + 1) + 'px'
)
```

```
click anywhere to change the height
```

* * *

## 老答案：

虽然是“hack”，但这个简单的函数会持续“监听”（通过 setTimeout）元素高度的变化，并在检测到变化时触发回调。

重要的是要考虑到元素的**高度**可能会发生变化，而不管用户采取的任何操作（*调整大小*、*单击*等），因此，由于不可能知道什么会导致高度变化，所以可以做到的一切都是绝对的保证 100% 检测是放置一个间隔高度检查器：

```
function onElementHeightChange(elm, callback) {
  var lastHeight = elm.clientHeight, newHeight;

  (function run() {
    newHeight = elm.clientHeight;
    if (lastHeight != newHeight)
      callback(newHeight)
    lastHeight = newHeight

    if (elm.onElementHeightChangeTimer)
      clearTimeout(elm.onElementHeightChangeTimer)

    elm.onElementHeightChangeTimer = setTimeout(run, 200)
  })()
}

// to clear the timer use:
// clearTimeout(document.body.onElementHeightChangeTimer);

// DEMO:
document.write("click anywhere to change the height")

onElementHeightChange(document.body, function(h) {
  console.log('Body height changed:', h)
})

window.addEventListener('click', function() {
  document.body.style.height = Math.floor((Math.random() * 5000) + 1) + 'px'
})
```

[现场演示](http://jsbin.com/tozeqi/edit?html,js,output)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-03-28T22:53:17.503

您可以在要监视高度变化的元素内使用宽度为零的`absolute`定位，并在其. 例如：`iframe``resize``contentWindow`

HTML

```
<body>
  Your content...
  <iframe class="height-change-listener" tabindex="-1"></iframe>
</body> 
```

CSS

```
body {
  position: relative;
}
.height-change-listener {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  height: 100%;
  width: 0;
  border: 0;
  background-color: transparent;
} 
```

JavaScript（使用 jQuery，但可以适应纯 JS）

```
$('.height-change-listener').each(function() {
  $(this.contentWindow).resize(function() {
    // Do something more useful
    console.log('doc height is ' + $(document).height());
  });
}); 
```

如果出于任何原因`height:100%`，`body`您需要找到（或添加）另一个容器元素来实现它。如果要`iframe`动态添加，您可能需要使用`<iframe>.load`事件来附加`contentWindow.resize`侦听器。如果您希望它在 IE7 和浏览器中工作，您需要将`*zoom:1`hack 添加到容器元素并监听元素本身的“专有”`resize`事件（这将在 IE8-10 中重复）。`<iframe>``contentWindow.resize`

[这是一个小提琴](https://jsfiddle.net/Lgn6jnmh/)...

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-03-19T17:37:32.373

只是我的两分钱。如果您有任何机会使用角度，那么这将完成这项工作：

```
$scope.$watch(function(){ 
 return document.height();
},function onHeightChange(newValue, oldValue){
 ...
}); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-02-13T02:52:44.427

**更新：2020**

现在有一种方法可以使用新的[ResizeObserver](https://developer.mozilla.org/en-US/docs/Web/API/ResizeObserver)来完成此操作。这使您可以在元素更改大小时收听整个元素列表。基本用法相当简单：

```
const observer = new ResizeObserver(entries => {
  for (const entry of entries) {
    // each entry is an instance of ResizeObserverEntry
    console.log(entry.contentRect.height)
  }
})
observer.observe(document.querySelector('body')) 
```

一个缺点是目前只支持 Chrome/Firefox，但你可以在那里找到一些可靠的 polyfill。这是我写的一个codepen示例：

[https://codepen.io/justin-schroeder/pen/poJjGJQ?editors=1111](https://codepen.io/justin-schroeder/pen/poJjGJQ?editors=1111)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-14T02:28:45.323

正如 vsync 所提到的，没有事件，但您可以使用计时器或将处理程序附加到其他地方：

```
// get the height
var refreshDocHeight = function(){
    var h = $(document).height();
    $('#result').html("Document height: " + h);
};

// update the height every 200ms
window.setInterval(refreshDocHeight, 200);

// or attach the handler to all events which are able to change 
// the document height, for example
$('div').keyup(refreshDocHeight); 
```

在这里找到[jsfiddle](http://jsfiddle.net/marcgrabow/54c9S/)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-15T11:42:39.577

vsync 的回答完全没问题。以防万一您不喜欢使用`setTimeout`并且可以使用`requestAnimationFrame`（[请参阅支持](http://caniuse.com/#search=requestAnimationFrame)），当然您仍然感兴趣。

在下面的示例中，主体获得了一个额外的事件`sizechange`。并且每次身体的高度或宽度发生变化时都会触发它。

```
(function checkForBodySizeChange() {
    var last_body_size = {
        width: document.body.clientWidth,
        height: document.body.clientHeight
    };

    function checkBodySizeChange()
    {
        var width_changed = last_body_size.width !== document.body.clientWidth,
            height_changed = last_body_size.height !== document.body.clientHeight;

        if(width_changed || height_changed) {
            trigger(document.body, 'sizechange');
            last_body_size = {
                width: document.body.clientWidth,
                height: document.body.clientHeight
            };
        }

        window.requestAnimationFrame(checkBodySizeChange);
    }

    function trigger(element, event_name, event_detail)
    {
        var evt;

        if(document.dispatchEvent) {
            if(typeof CustomEvent === 'undefined') {
                var CustomEvent;

                CustomEvent = function(event, params) {
                    var evt;
                    params = params || {
                        bubbles: false,
                        cancelable: false,
                        detail: undefined
                    };
                    evt = document.createEvent("CustomEvent");
                    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);
                    return evt;
                };

                CustomEvent.prototype = window.Event.prototype;

                window.CustomEvent = CustomEvent;
            }

            evt = new CustomEvent(event_name, {"detail": event_detail});

            element.dispatchEvent(evt);
        }
        else {
            evt = document.createEventObject();
            evt.eventType = event_name;
            evt.eventName = event_name;
            element.fireEvent('on' + event_name, evt);
        }
    }

    window.requestAnimationFrame(checkBodySizeChange);
})(); 
```

[现场演示](https://codepen.io/anon/pen/zEGpyK)

`triggerEvent`如果您的项目中有自己的功能，则可以大大减少代码。因此，只需删除完整的功能`trigger`并将该行替换`trigger(document.body, 'sizechange');`为 jQuery 中的示例`$(document.body).trigger('sizechange');`。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-06-13T12:52:41.903

我正在使用@vsync 的解决方案，就像这样。我正在使用它在 twitter 之类的页面上自动滚动。

```
const scrollInterval = (timeInterval, retry, cb) => {
    let tmpHeight = 0;
    const myInterval = setInterval(() => {
        console.log('interval');
        if (retry++ > 3) {
            clearInterval(this);
        }
        const change = document.body.clientHeight - tmpHeight;
        tmpHeight = document.body.clientHeight;
        if (change > 0) {
            cb(change, (retry * timeInterval));
            scrollBy(0, 10000);
        }
        retry = 0;
    }, timeInterval);
    return myInterval;
};

const onBodyChange = (change, timeout) => {
    console.log(`document.body.clientHeight, changed: ${change}, after: ${timeout}`);
}

const createdInterval = scrollInterval(500, 3, onBodyChange);

// stop the scroller on some event
setTimeout(() => {
    clearInterval(createdInterval);
}, 10000); 
```

您还可以添加最小更改以及许多其他内容...但这对我有用

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-14T02:50:28.437

The command watch() checks any change in a property.

See this [link](https://stackoverflow.com/questions/358072/how-to-detect-when-the-height-of-your-page-changes).

# java - Java：使用按钮停止声音播放

> ID：14866776
> 
> 赞同：0
> 
> 时间：2013-02-14T02:16:41.147
> 
> 标签：java, audio

当按下按钮时，我试图让这个声音停止。下面是我的播放功能。我已经设置好了按钮，我只需要给它做点什么……谢谢！

```
void play() {

       try {  
           URL url2 = this.getClass().getClassLoader().getResource("tone.wav");
           AudioInputStream audioIn = AudioSystem.getAudioInputStream(url2);
           Clip clip = AudioSystem.getClip();

           clip.open(audioIn);
           clip.loop(Clip.LOOP_CONTINUOUSLY);
       }catch (UnsupportedAudioFileException e){
           e.printStackTrace();
       }catch (IOException e) {
             e.printStackTrace();
          } catch(LineUnavailableException e) {
             e.printStackTrace();
          }finally{}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T07:46:28.270

在 Java Audio 中，`Clip`继承自[`DataLine`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/DataLine.html)which 有一个`stop()`方法。根据文档 for [`Clip`](http://docs.oracle.com/javase/1.5.0/docs/api/javax/sound/sampled/Clip.html#loop%28int%29)：如果在循环过程中停止播放，则清除当前循环状态；后续循环和启动请求的行为不受中断循环操作的影响。

因此，您需要在`clip`某处保留对该对象的引用并在您的按钮`onClick()`方法中使用它。

# ruby-on-rails-3 - ActiveRecord：创建重复的 ActiveRecord 结果

> ID：14866778
> 
> 赞同：0
> 
> 时间：2013-02-14T02:16:47.453
> 
> 标签：ruby-on-rails-3, activerecord

我想按需复制几条记录。这些记录为新用户播种了示例记录，他们可能会随着时间的推移对其进行自定义。我从以下内容开始：

```
MaintenanceSchedule.find_each do |schedule|
  @example=MaintenanceSchedule.new(schedule)
  @example.org_id=current_user.active_org.id
  @example.save
end 
```

这是一个很长的镜头，它在第二行按预期失败了：

```
undefined method `stringify_keys' for #<MaintenanceSchedule:0x4c4d450> 
```

不要介意错误。复制记录的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:48:16.427

The following does the trick, although I'd be happy to find a more efficient way:

```
MaintenanceSchedule.find_each do |schedule|
  @example=schedule.dup
  @example.org_id=current_user.active_org.id
  @example.save
end 
```

# python - GAE Python：上传的图像加载。如何更快地加载图像？

> ID：14866781
> 
> 赞同：1
> 
> 时间：2013-02-14T02:17:40.463
> 
> 标签：python, google-app-engine

```
class ImageHandler(webapp2.RequestHandler):
    def get(self):
        a_user = db.get(self.request.get('img_id'))
        if a_user.profile_img:
            self.response.headers['Content-Type'] = 'image/png'
            self.response.out.write(a_user.profile_img)
        else:
            self.response.out.write("No image") 
```

加载图像时这非常慢。每次重新加载页面时，我都会看到图像从图像顶部开始重新加载并逐渐加载整个图像（如果您不明白我的意思，请告诉我）。我应该缓存 img_id 吗？但在我看来，当您使用处理程序加载图像时，应用程序加载更快的图像并没有帮助。关于如何更快地加载图像的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:25:16.560

你还在开发中吗？开发服务器中的事情会慢得多，因为它一次只处理一个请求。生产性能会好很多。

也就是说，使用 GAE 的内置图像托管可能会更好。为此，您无需将图像数据存储在模型中的 blob 属性中，而是将其直接上传到 blobstore 并使用`BlobReferenceProperty`. 完成后，您可以使用[`Image.get_serving_url()`](https://developers.google.com/appengine/docs/python/images/functions#Image_get_serving_url)GAE 直接为其提供服务，因此它根本不需要通过您的应用程序。

# c - fprintf 在使用 Make 编译的 C 程序中不起作用

> ID：14866786
> 
> 赞同：1
> 
> 时间：2013-02-14T02:18:12.157
> 
> 标签：c, makefile, printf

我有两个具有相同 C 代码的文件。我正在编译一个使用 Make 和一个直接使用 GCC ( `gcc NAME.c -o NAME`)。

在 GCC 编译的程序中，所有 fprintf 语句都可以正常工作。在 Make 编译的程序中，只有 if 语句中的 fprintf 语句有效。其他的不打印任何东西。我一直无法弄清楚为什么。

代码是：

```
#include <stdio.h>                       
#include <stdlib.h>                      
#include <string.h>                      

#define BUFFER_SIZE 1000                 

int main(int argc, char ** argv) {       
    fprintf(stdout, "test\n");   
    if (argc != 2) {                     
        fprintf(stderr, "You must have one argument: filename or -h\n");
        return 1;
    }   

    if (strcmp(argv[1], "-h") == 0) {    
        fprintf(stdout, "HELP\n"); /*ADD TEXT HERE*/
    }   
    fprintf(stdout, "got to the end\n"); 
    return 0;                            
} 
```

我的生成文件：

```
COMPILER = gcc
CCFLAGS = -ansi -pedantic -Wall

all: wordstat

debug:
    make DEBUG = TRUE

wordstat: wordstat.o
    $(COMPILER) $(CCFLAGS) -o wordstat wordstat.o
wordstat.o: wordstat.c
    $(COMPILER) $(CCFLAGS) wordstat.c

clean:
    rm -f wordstat *.o 
```

GCC 之一（使用 -h 运行）输出：

```
changed text
HELP
got to the end 
```

Make one 输出：

```
HELP 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:48:38.893

您忘记了 makefile 中的 -c 选项：

```
.
.
.    
wordstat.o: wordstat.c  
    $(COMPILER) $(CCFLAGS) -c wordstat.c
                            ↑ - important! 
```

否则，此行不会生成目标文件，而是生成可执行的 elf 文件 (a.out)，因此可能会导致意外行为，因为您将其重新编译为 wordstat（并且它已经编译）。

# ios - iPhone 多人游戏代码有效，但 iPad 无效。委托问题？

> ID：14866789
> 
> 赞同：1
> 
> 时间：2013-02-14T02:18:32.597
> 
> 标签：ios, objective-c, cocos2d-iphone, game-center, multiplayer

我已经完成了我的 iPhone 应用程序的多人游戏代码，并开始着手更新 iPad 版本的图形。更新完所有精灵后，令我惊讶的是，我的 iPad 版本的行为与 iPhone 完全不同。我正在使用由自由开发人员和 Ray Wenderlich 的 GCHelper 编写的一些自定义代码的组合。到目前为止，一切都运行良好。对于 iphone 应用程序，我的游戏层发送和接收所有玩家动作。在 iPad 应用程序中，**MainMenu**场景出于某种原因正在接收数据。

**主菜单.h**

```
@protocol GCHelperDelegate
- (void)matchStarted;
- (void)matchEnded;
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID;
- (void)inviteReceived;
@end

@interface MainMenu: CCLayer <GCHelperDelegate>
{//some code
} 
```

**主菜单**

```
- (void) StartMultiplayerGame  //button calls up gamecenter matchmaking
{
    NSLog(@"***In StartMultiplayerGame***");

    delegate1 = (AppDelegate *) [UIApplication sharedApplication].delegate;
    [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:4 viewController:delegate1.viewController delegate:self]; 

    boo_multiplayer=true;
    boo_startgame=true;

    colorLayer = [CCLayerColor layerWithColor:ccc4(0, 0, 0, 255)];
    [colorLayer setOpacity:175];
    [self addChild:colorLayer z:2]; 

    return;    
} 
```

**GCHelper.h**

```
#import <Foundation/Foundation.h>
#import <GameKit/GameKit.h>
#import "cocos2d.h"
#import "AppDelegate.h"

@protocol GCHelperDelegate
- (void)matchStarted;
- (void)matchEnded;
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID;
- (void)inviteReceived;
@end

@interface GCHelper : NSObject <GKMatchmakerViewControllerDelegate, GKMatchDelegate> {
    BOOL gameCenterAvailable;
    BOOL userAuthenticated;

    bool boo_invite;

    UIViewController *presentingViewController;
    GKMatch *match;
    BOOL matchStarted;
    __strong id <GCHelperDelegate> delegate;
    NSMutableDictionary *playersDict;
    GKInvite *pendingInvite;
    NSArray *pendingPlayersToInvite;

    NSMutableArray *playernames;
    NSMutableArray *playeridentification;

    NSError *lastError;

    GKMatchRequest *request;

   // // AppDelegate *delegate1;

}

@property (assign, readonly) BOOL gameCenterAvailable;
@property (strong) UIViewController *presentingViewController;
@property (strong) GKMatch *match;
@property (strong) id <GCHelperDelegate> delegate;
@property (strong) NSMutableDictionary *playersDict;
@property (strong) GKInvite *pendingInvite;
@property (strong) NSArray *pendingPlayersToInvite;

+ (GCHelper *)sharedInstance;
- (void)authenticateLocalUser;
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate;

@end 
```

**GCHelper.m**

```
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate
{    
    if (!gameCenterAvailable) return;

    matchStarted = NO;
    self.match = nil;
    self.presentingViewController = viewController;
    delegate = theDelegate;

    if (pendingInvite != nil) {

        [presentingViewController dismissModalViewControllerAnimated:NO];
        GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithInvite:pendingInvite];
        mmvc.matchmakerDelegate = self;
        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }
    else {

        [presentingViewController dismissModalViewControllerAnimated:NO];
        request=[[GKMatchRequest alloc] init];
        request.minPlayers = minPlayers;
        request.maxPlayers = maxPlayers;
        request.playersToInvite = pendingPlayersToInvite;

        GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithMatchRequest:request];    
        mmvc.matchmakerDelegate = self;

        [presentingViewController presentModalViewController:mmvc animated:YES];

        self.pendingInvite = nil;
        self.pendingPlayersToInvite = nil;

    }

}

// A peer-to-peer match has been found, the game should start
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch {
    [presentingViewController dismissModalViewControllerAnimated:YES];
    self.match = theMatch;
    self.match.delegate = self;
    currentMatch=match;

    if (!matchStarted && match.expectedPlayerCount == 0)
    {
        NSLog(@"Ready to start match!");

        TXGameCenterManager * gameCenterManager = [TXGameCenterManager sharedTXGameCenterManager];
        gameCenterManager.multiplayerMatch = match;
        // The delegate of the match is HelloWorldLayer

        gameCenterManager.multiplayerMatch.delegate = self;
        AppDelegate * delegate1 = (AppDelegate *) [UIApplication sharedApplication].delegate;
        [delegate1.viewController dismissModalViewControllerAnimated:NO];

       [self lookupPlayers];

    }
}

- (void)lookupPlayers
{

    NSLog(@"Looking up %d players...", match.playerIDs.count);
    [GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error) {

        if (error != nil) {
            NSLog(@"Error retrieving player info: %@", error.localizedDescription);
            matchStarted = NO;
            //[delegate matchEnded];
        }
        else
        {
// some code.  
    [[CCDirector sharedDirector] replaceScene:[HelloWorldLayer node]];
        } 
```

我真的不明白 iPad 模拟器工作得很好。我的应用程序在这里发生了什么，如何强制 didReceiveData 方法在游戏层而不是菜单场景中运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T03:20:12.537

这样的白痴。iPad iOS 需要升级到 6.0。

# asp.net - 复选框字段详细信息视图中的超链接

> ID：14866790
> 
> 赞同：-1
> 
> 时间：2013-02-14T02:18:33.913
> 
> 标签：asp.net

在我的 detailsview 控件中，我有几个带有 boolean = true 的复选框字段。我想要的任何文本（例如数据字段的 HeaderText）上都有超链接，以便导航到其他页面。可能吗？如果没有，有什么建议吗？

对于模式详细信息，当单击gridview 中的超链接时，详细信息视图将显示详细信息，如果 boolean=true 则复选框将选中，如果 false 则取消选中。我想在 Checked CheckedBoxField 上有超链接文本（未选中的复选框我用后面的代码隐藏它）。

下面是aspx：

`  

```
 <Fields>
         <asp:CheckBoxField DataField="Sample_Preparation_SP" HeaderImageUrl="~/Images/Coal/Coal.jpg"
                    HeaderText="Sample_Preparation" Text="Sample_Preparation" />

        <asp:CheckBoxField DataField="Free_Moisture_FM" HeaderImageUrl="~/Images/Biomass/Wood Chips.jpg"
            HeaderText="Free_Moisture_FM" SortExpression="Free_Moisture_FM" Text="Free Moisture" />

        <asp:CheckBoxField DataField="Inherent_Moisture_IM" HeaderImageUrl="~/Images/Coal/Coal.jpg"
            HeaderText="Inherent_Moisture_IM" SortExpression="Inherent Moisture" Text="Inherent Moisture" />

        <asp:CheckBoxField DataField="Total_Moisture_TM" HeaderText="Total_Moisture_TM" SortExpression="Total_Moisture_TM" HeaderImageUrl="~/Images/Biomass/Wood Pellet3.jpg" Text="Total Moisture" />

        <asp:CheckBoxField DataField="Gross_Calorific_Value_GCV" HeaderText="Gross_Calorific_Value_GCV"
            SortExpression="Gross_Calorific_Value_GCV" HeaderImageUrl="~/Images/Biomass/EFB.jpg" Text="Gross Calorific Value" />

        <asp:CheckBoxField DataField="Net_Calorific_Value_NCV" HeaderText="Net_Calorific_Value_NCV" SortExpression="Net_Calorific_Value_NCV" HeaderImageUrl="~/Images/Biomass/Wood Chips.jpg" Text="Net Calorific Value" />

    </Fields>

</asp:DetailsView>

<asp:SqlDataSource 
            ID="SqlDataSource1" 
            runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionString2 %>"
            SelectCommand="SELECT [SampleID],[Sample_Preparation_SP], [Free_Moisture_FM], [Inherent_Moisture_IM],  [Total_Moisture_TM]  ,[Gross_Calorific_Value_GCV], [Net_Calorific_Value_NCV] FROM [tbl_SampleRegistration] WHERE SampleID =@SampleID" >

    <SelectParameters>
        <asp:QueryStringParameter Name="SampleID" QueryStringField="SampleID" />
    </SelectParameters>
</asp:SqlDataSource>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:27:06.140

最好的方法是将模板字段用于详细信息视图，以便您可以自定义任何级别的内容。

请参阅 MSDN 的此出色链接

```
http://msdn.microsoft.com/en-us/library/bb288033.aspx 
```

# c++ - 为什么在 C++ 中使用 try 和 catch()？

> ID：14866791
> 
> 赞同：10
> 
> 时间：2013-02-14T02:18:36.340
> 
> 标签：c++, exception, exception-handling, try-catch

我理解`try`并`catch()`用于异常处理，以防在某些情况下程序中发生错误或崩溃。我也了解它们的工作原理。但是为什么要使用`try`and`catch()`呢？为什么不只使用一个`if()`查找某个案例的语句，如果该案例为真，它会`cout << //error code`呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T02:27:10.403

异常处理：

*   可以与没有机会返回单独错误代码的构造函数和运算符一起使用（它们可以将对象设置为某种错误状态 - 这意味着进一步的内存使用 - 但客户端代码还必须记住稍后检查该错误状态）
    *   例如：用户定义类型 - 类`X`- 支持符号`x1 = x2 + x3`- 哪里可以返回错误代码？
*   可以在初始化列表中构造特定的类/结构数据成员时加入 - 避免进一步的数据成员构造可能注定或浪费；相比之下，显式错误处理只能在构造函数主体的后期进行
*   更隐含——强调代码正常的成功流程，这样可以使其更简洁、可读、可维护
*   因数不同 - 可以在一个地方捕获来自许多地方的异常，这有时会使错误处理代码本身更加简洁、可读、可维护
*   在错误处理会重复的情况下，简洁的好处实际上可以导致更可靠的错误处理
*   通常使用自己的内存区域，独立于堆栈用于局部变量、函数参数、保存CPU寄存器和返回地址等；这意味着即使剩余堆栈内存小于异常对象，throw 语句也可以直接在该内存区域中可靠地构造异常对象（尽管这是一个实现细节并且标准不保证）
*   具有不同的性能配置文件，因此在某些情况下两者都可以更快
*   促进更丰富的错误信息从低级代码向上传播到中间代码，您可能不“拥有”或希望/能够更改以传播错误代码 C 风格，到处理点

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T02:22:05.200

`try...catch`做得更多。它展开堆栈，该堆栈调用自`try`进入以来所有自动分配的对象的析构函数。如果您按照建议的方式执行此操作，则必须手动跟踪这些对象，否则您会遇到内存问题（泄漏、覆盖、过时的指针、双重删除）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:41:26.620

另一个原因是：您编写的代码也可能被其他人用作更大项目的一部分。并且由于使用内置的异常处理例程是一种标准，大型项目的维护者期望您同样处理您的异常，以便可以在上层正确完成异常处理 - 更不用说使用标准的事实作为错误输出的输出是一种可疑的做法（例如，它可能被抑制；或者根本不被使用）。

UPD：我有点误解了你的问题。我描述的原因实际上证明了手动抛出异常是合理的，但不使用`try...catch`块。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-14T02:35:01.780

我将引用我的一位英雄，ZeroMQ 成名的 Martin Sústrik 的话来回答，摘自[http://www.250bpm.com/blog:4上的博客条目](http://www.250bpm.com/blog:4)

> 然而，当您的目标是保证不会发生未定义的行为时，避免直接失败的好处就变成了一场噩梦。引发异常和处理异常之间的解耦使得在 C++ 中避免失败变得如此容易，这使得几乎不可能保证程序永远不会运行信息未定义的行为。

然后补充一点，我发现我使用 try/catch 进行非常高级别的重启层，比其他任何东西都多。补充一下，我的意见真的不重要。我相信，如何以及为什么使用异常处理背后的*选择*与喜欢绿色多于蓝色的选择非常相似。个人的，其他人的任何意见都不可能改变它。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-14T02:45:09.527

The question poses a **false dichotomy**. In Java and C# `try`-`catch` competes with `if` for cleanup on failure. In C++ it's mainly RAII technique (using destructors and single phase construction) that competes with `if` for cleanup on failure.

If the question had been about using exceptions versus using `if`, then it would have been more sensible and relevant to ordinary C++ programming.

# linux - sed 命令替换字符串

> ID：14866796
> 
> 赞同：0
> 
> 时间：2013-02-14T02:18:50.900
> 
> 标签：linux

我试图用 %2$u 替换

```
 <ph name='NUMBER' ex='%2$u'/> 
```

使用以下命令跨多个文件。

```
find . -name "*.txt" -print | xargs sed -i 's/%2$u/<ph name='NUMBER' ex='%2$u'\/>/g' 
```

实际上 %2$u 正在像这样被替换

```
<ph name=NUMBER ex=%2/> 
```

有人可以给我解决方案吗？提前致谢。

-兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:33:40.897

当[用单引号引用时](http://www.gnu.org/software/bash/manual/bashref.html#Single-Quotes)，下一个单引号结束引用。所以后一个表达式实际上由以下部分组成：

```
's/%2$u/<ph name='
NUMBER
' ex='
%2$u
'\/>/g' 
```

在未引用的部分中，发生了[参数扩展](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)。`$u`被参数的值`u`或空字符串（如果不存在）替换也是如此。你可以用一个简单的方法来测试它`echo`：

```
echo 's/%2$u/<ph name='NUMBER' ex='%2$u'\/>/g' 
```

为避免这种情况，请使用不同的引用技术，例如包含单引号的部分的双引号（记住要转义其中`$`的，否则会发生扩展）：

```
's/%2$u/<ph name='"'NUMBER'"' ex='"'%2\$u'"'\/>/g' 
```

或者在被替换的字符串中使用双引号（如果适用）：

```
's/%2$u/<ph name="NUMBER" ex="%2$u"\/>/g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:25:19.067

您不能在单引号字符串中嵌入单引号。尝试：

```
find . -name "*.txt" -print |
  xargs sed -i 's/%2$u/<ph name='"'"'NUMBER'"'"' ex='"'"'%2$u'"'"'\/>/g' 
```

或者

```
find . -name "*.txt" -print |
    xargs sed -i "s/%2\$u/<ph name='NUMBER' ex='%2\$u'\/>/g" 
```

根据 sed 的版本，您可能需要将 $ 转义为​​ sed 以防止它仅匹配行尾：

```
xargs sed -i "s/%2\\\$u/<ph name='NUMBER' ex='%2\\\$u'\/>/g" 
```

# mysql - 笛卡尔积 - 对同一张表中的两列求和

> ID：14866797
> 
> 赞同：3
> 
> 时间：2013-02-14T02:18:50.470
> 
> 标签：mysql, sql

我正在尝试对同一个表中的两列进行求和，但求和的条件不同。我遇到的问题是试图将结果放入两个不同的列。如果我使用这个查询，我会得到笛卡尔积。

```
SELECT SUM(p1.arc_baseEventCount)  AS 'Total Logger Event Count',
       SUM(p2.arc_deviceCustomNumber3) AS 'Total Connector Event Count'
FROM EVENTS AS p1, EVENTS AS p2
WHERE p2.arc_name = "Connector Raw Event Statistics" 
```

当我运行这个查询时，我得到了预期的结果，但结果是两行而不是两列。

```
SELECT SUM(arc_baseEventCount) 'total event count'
FROM Events
UNION ALL
SELECT SUM(arc_deviceCustomNumber3)
FROM EVENTS
WHERE arc_name = "Connector Raw Event Statistics" 
```

我知道我很接近，但我肯定错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:21:53.353

你可以用`CASE`这个，

```
SELECT  SUM(arc_baseEventCount) 'total event count', 
        SUM(CASE WHEN arc_name = 'Connector Raw Event Statistics' THEN arc_baseEventCount ELSE NULL END) 'Connector Raw Event Statistics'
FROM    Events 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/121f2/2)

**更新 1**

```
SELECT  SUM(arc_baseEventCount) 'total event count', 
        SUM(CASE WHEN arc_name = 'Connector Raw Event Statistics' THEN arc_baseEventCount ELSE NULL END) 'total_1',
        SUM(CASE WHEN name = 'Connector Raw Event Statistics' THEN arc_deviceCustomNumber3 ELSE NULL END) 'total_2'
FROM    Events 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:36:20.493

您可以使用子查询

```
select distinct sum(p1.arc_baseEventCount)  AS 'Total Logger Event Count'
, (select sum(p2.arc_deviceCustomNumber3) 
from events p2 on p1.something = p2.something
where p2.arc_name = 'Connector Raw Event Statistics') as 'Total Connector Event Count'

from events p1 
```

# xcode - 尝试将地图放在 Pin 上（MKMapView）

> ID：14866812
> 
> 赞同：6
> 
> 时间：2013-02-14T02:21:01.707
> 
> 标签：xcode, xcode4, annotations, mkmapview

努力寻找一种方法来使地图缩放并以注释针为中心。引脚掉落，但地图加载海洋。代码如下。

```
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
  [self setString];

  NSDictionary *dic = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:nil];
  NSDictionary *location = [dic objectForKey:@"location"];
  NSDictionary *coordinate = [location objectForKey:@"coordinate"];
  NSString *lat = [coordinate objectForKey:@"latitude"];
  NSString *lon = [coordinate objectForKey:@"longitude"];

  for (NSDictionary *diction in coordinate)
  {
    [array addObject:lat];
    [array addObject:lon];
  }
  {
    CLLocationCoordinate2D track;
    track.latitude = [lat doubleValue];
    track.longitude = [lon doubleValue];

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Title of Place Here" andCoordinate:track];

    [self.mapView addAnnotation:newAnnotation];
  }
} 
```

第二个问题，非常相关：

在实现上述问题的答案后，我已经修改了我的代码。现在，我的坐标从前一个视图传到了我的 MKMapView，这样我就不必费心进行两次 API 调用，第二次是在 MKMapView 中。目前在我的 ViewWillAppear 中，我有以下内容，并且再次遇到视图无法居中并放大图钉的问题：

```
if ([self.stringToDisplay isEqualToString: @"Firehouse Gallery"])
{
    UIImage *img = [UIImage imageNamed:@"firehouse.jpg"];
    [imageView setImage:img];

    CLLocationCoordinate2D track;
    track.latitude = [lat doubleValue];
    track.longitude = [lon doubleValue];

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.01;
    span.longitudeDelta = 0.01;
    region.span = span;
    region.center = track;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Firehouse Gallery" andCoordinate:track];

    [self.mapView addAnnotation:newAnnotation];
    [self.mapView setRegion:region animated:TRUE];
    [self.mapView regionThatFits:region];
} 
```

非常感谢您的反馈，因为我不知道我还应该做什么。销加载在正确的坐标上，只是不居中/缩放......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T02:41:41.200

试试这个：

```
{
    CLLocationCoordinate2D track;
    track.latitude = [lat doubleValue];
    track.longitude = [lon doubleValue];

    MKCoordinateRegion region;
    MKCoordinateSpan span;
    span.latitudeDelta = 0.01;
    span.longitudeDelta = 0.01;
    region.span = span;
    region.center = track;

    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Title of Place Here" andCoordinate:track];

    [self.mapView addAnnotation:newAnnotation];
    [self.mapView setRegion:region animated:TRUE];
    [self.mapView regionThatFits:region];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-27T10:36:30.403

```
 - (void)zoomMapViewToFitAnnotationsWithExtraZoomToAdjust:(double)extraZoom
 {
    if ([self.annotations count] == 0) return;

    int i = 0;
    MKMapPoint points[[self.annotations count]];

    for (id<MKAnnotation> annotation in [self annotations])
    {
        points[i++] = MKMapPointForCoordinate(annotation.coordinate);
    }

    MKPolygon *poly = [MKPolygon polygonWithPoints:points count:i];

    MKCoordinateRegion r = MKCoordinateRegionForMapRect([poly boundingMapRect]);
    r.span.latitudeDelta += extraZoom;
    r.span.longitudeDelta += extraZoom;

    [self setRegion: r animated:YES];
 } 
```

# javascript - 如何在javascript中访问此功能

> ID：14866815
> 
> 赞同：0
> 
> 时间：2013-02-14T02:21:17.340
> 
> 标签：javascript, ruby-on-rails, google-maps

我试图从全局点到达另一个函数内部的函数。

这里的例子

```
A(function B{...}, function C{...});
...
B(); 
```

我想知道这是否可能？如果不是我如何移动我的功能以便我可以到达它，我也在这样做，因为它必须是同步的。该功能适用​​于谷歌地图，因此我可以在我的地图中添加侦听器或对其做出响应。

这里有更多真正的代码

```
if(navigator.geolocation)
{
  navigator.geolocation.getCurrentPosition(function(position){...},function geocode_lookup( type, value, update ){...});
}
...
geocode_lookup(t1,t2,t3); 
```

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:24:31.803

不确定我是否理解这个问题，所以这里是基于我理解的答案。

```
function B{...}
function C{...}

A(B, C);
...

B(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:24:52.233

由于闭包，该函数仅在另一个函数的范围内可用。如果您希望它可以从全局范围访问，您可以从函数中返回它或在函数本身内调用它，或者将它作为原型访问

# ios - 使用 Twilio API/SDK 在 iOS 上创建一个基本的手机应用程序

> ID：14866817
> 
> 赞同：3
> 
> 时间：2013-02-14T02:21:37.503
> 
> 标签：ios, twilio

Twilio 文档建议可以创建一个简单的 iOS 应用程序来拨打和接听电话。甚至还有一个示例项目。名为 MonkeyPhone 的示例项目包含 ARC 错误，因此它拒绝运行。

更广泛的问题是，Twilio 是用于在 ios 或 android 应用程序上拨打和接听电话的最佳 API/平台吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:54:22.920

为此，您可以使用 TCConnectionDelegate 方法。它会自动处理您的调用过程。

这是您必须遵循的几个步骤。

1.> 需要先创建一个twilio账号并获取账号sid和auth token ![在此处输入图像描述](../Images/3b513e8fcab33f12035365102cb30cf6.png)

2.> 之后转到开发工具 -> TWIML 应用程序

创建一个新的 twiml 应用程序并创建 ![在此处输入图像描述](../Images/32e9636adbbd4a43c7c2c43fab5978f1.png)

请提及您将传递电话号码的语音请求 URL。

3.> 将您的电话号码传递给 TCConnectionDelegate 连接方法

```
 YourTwilioDeviceClass *phone = appDelegate.phone;
   [phone connect:self.textFieldPhoneNumber.text]; 
```

4.> 现在通过将 accountSid、authToken、appId 传递给服务器上的 auth.php 文件来获取身份验证令牌。

```
 #pragma mark -
    #pragma mark TCDevice Capability Token

    -(NSString*)getCapabilityToken:(NSError**)error
    {
        //Creates a new capability token from the auth.php file on server
        NSString *capabilityToken = nil;

        NSString *accountSid = [[NSUserDefaults standardUserDefaults] objectForKey:@"accountSid"];
        NSString *authToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"authToken"];
        NSString *appId = [[NSUserDefaults standardUserDefaults] objectForKey:@"appId"];

        //Make the URL Connection to your server

        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.yourauthfilepath.com/twillo/auth.php?accountSid=%@&authToken=%@&appSid=%@",accountSid,authToken,appId]];
        NSURLResponse *response = nil;
        NSData *data = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:url]
                                             returningResponse:&response error:error];
        if (data)
        {
            NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;

            if (httpResponse.statusCode==200)
            {
                capabilityToken = [[[NSString alloc] initWithData:data
                                                         encoding:NSUTF8StringEncoding] autorelease];
            }
            else
            {
                //*error = [ConferencePhone errorFromHTTPResponse:httpResponse domain:@"CapabilityTokenDomain"];
            }
        }
        // else there is likely an error which got assigned to the incoming error pointer.

        return capabilityToken;
    }

    -(BOOL)capabilityTokenValid
    {
        //Check TCDevice's capability token to see if it is still valid
        BOOL isValid = NO;
       // NSLog(@"_device.capabilities %@",_device.capabilities);
        NSNumber *expirationTimeObject = [_device.capabilities objectForKey:@"expiration"];
        long long expirationTimeValue = [expirationTimeObject longLongValue];
        long long currentTimeValue = (long long)[[NSDate date] timeIntervalSince1970];

        if ((expirationTimeValue-currentTimeValue)>0)
            isValid = YES;

        return isValid;
    }

    #pragma mark -
    #pragma mark Device Network connect and disconnect

    -(void)connect:(NSString*)phoneNumber
    {
        // first check to see if the token we have is valid, and if not, refresh it.
        // Your own client may ask the user to re-authenticate to obtain a new token depending on
        // your security requirements.

        HelloMonkeyAppDelegate *appDelegate=(HelloMonkeyAppDelegate*)[[UIApplication sharedApplication]delegate];

        if (![self capabilityTokenValid] || (!appDelegate.isTokenGet))
        {
            //Capability token is not valid, so create a new one and update device
            [self login];
        }

        if (![self reachabiltyCheck])
        {
            NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"5", nil] forKeys:[NSArray arrayWithObjects:CPLoginDidFailWithError, nil]];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];

            HelloMonkeyAppDelegate *appDelegate=(HelloMonkeyAppDelegate*)[[UIApplication sharedApplication]delegate];
            appDelegate.isTokenGet=FALSE;
        }
        else
        {
            NSDictionary* parameters = nil;
            if ( [phoneNumber length] > 0 )
            {
                parameters = [NSDictionary dictionaryWithObject:phoneNumber forKey:@"PhoneNumber"];
            }

            NSLog(@"parameters ===%@",parameters);
            _connection = [_device connect:parameters delegate:self];
            [_connection retain];
        }

    }

    -(void)disconnect
    {
        [_connection disconnect];
        [_connection release];
        _connection = nil;

        [[NSNotificationCenter defaultCenter] postNotificationName:@"hideCallingView" object:nil];
    }

    #pragma mark -
    #pragma mark - TCConnection Delegate Methods

    -(void)connectionDidDisconnect:(TCConnection*)connection
    {
        NSLog(@"Call disconnected");

        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"4", nil] forKeys:[NSArray arrayWithObjects:@"Disconnected", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];

    }

    -(void)connection:(TCConnection*)connection didFailWithError:(NSError*)error
    {
        NSLog(@"Failed %@",[error description]);
        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"3", nil] forKeys:[NSArray arrayWithObjects:@"Error", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)connectionDidStartConnecting:(TCConnection*)connection
    {
        NSLog(@"Calling..");
        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"1", nil] forKeys:[NSArray arrayWithObjects:@"Calling", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)connectionDidConnect:(TCConnection*)connection
    {
        NSLog(@"In call..");

        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"2", nil] forKeys:[NSArray arrayWithObjects:@"In call", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)dealloc
    {
        [_device release];
        [_connection release];

        [super dealloc];
    } 
```

5.> 最后使用 TCConnectionDelegate 方法

```
 #pragma mark -
    #pragma mark TCDevice Capability Token

    -(NSString*)getCapabilityToken:(NSError**)error
    {
        //Creates a new capability token from the auth.php file on server
        NSString *capabilityToken = nil;

        NSString *accountSid = [[NSUserDefaults standardUserDefaults] objectForKey:@"accountSid"];
        NSString *authToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"authToken"];
        NSString *appId = [[NSUserDefaults standardUserDefaults] objectForKey:@"appId"];

        //Make the URL Connection to your server

        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.e-home.com/twillo/auth.php?accountSid=%@&authToken=%@&appSid=%@",accountSid,authToken,appId]];
        NSURLResponse *response = nil;
        NSData *data = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:url]
                                             returningResponse:&response error:error];
        if (data)
        {
            NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;

            if (httpResponse.statusCode==200)
            {
                capabilityToken = [[[NSString alloc] initWithData:data
                                                         encoding:NSUTF8StringEncoding] autorelease];
            }
            else
            {
                //*error = [ConferencePhone errorFromHTTPResponse:httpResponse domain:@"CapabilityTokenDomain"];
            }
        }
        // else there is likely an error which got assigned to the incoming error pointer.

        return capabilityToken;
    }

    -(BOOL)capabilityTokenValid
    {
        //Check TCDevice's capability token to see if it is still valid
        BOOL isValid = NO;
       // NSLog(@"_device.capabilities %@",_device.capabilities);
        NSNumber *expirationTimeObject = [_device.capabilities objectForKey:@"expiration"];
        long long expirationTimeValue = [expirationTimeObject longLongValue];
        long long currentTimeValue = (long long)[[NSDate date] timeIntervalSince1970];

        if ((expirationTimeValue-currentTimeValue)>0)
            isValid = YES;

        return isValid;
    }

    #pragma mark -
    #pragma mark Device Network connect and disconnect

    -(void)connect:(NSString*)phoneNumber
    {
        // first check to see if the token we have is valid, and if not, refresh it.
        // Your own client may ask the user to re-authenticate to obtain a new token depending on
        // your security requirements.

        HelloMonkeyAppDelegate *appDelegate=(HelloMonkeyAppDelegate*)[[UIApplication sharedApplication]delegate];

        if (![self capabilityTokenValid] || (!appDelegate.isTokenGet))
        {
            //Capability token is not valid, so create a new one and update device
            [self login];
        }

        if (![self reachabiltyCheck])
        {
            NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"5", nil] forKeys:[NSArray arrayWithObjects:CPLoginDidFailWithError, nil]];
            [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];

            HelloMonkeyAppDelegate *appDelegate=(HelloMonkeyAppDelegate*)[[UIApplication sharedApplication]delegate];
            appDelegate.isTokenGet=FALSE;
        }
        else
        {
            NSDictionary* parameters = nil;
            if ( [phoneNumber length] > 0 )
            {
                parameters = [NSDictionary dictionaryWithObject:phoneNumber forKey:@"PhoneNumber"];
            }

            NSLog(@"parameters ===%@",parameters);
            _connection = [_device connect:parameters delegate:self];
            [_connection retain];
        }

    }

    -(void)disconnect
    {
        [_connection disconnect];
        [_connection release];
        _connection = nil;

        [[NSNotificationCenter defaultCenter] postNotificationName:@"hideCallingView" object:nil];
    }

    #pragma mark -
    #pragma mark - TCConnection Delegate Methods

    -(void)connectionDidDisconnect:(TCConnection*)connection
    {
        NSLog(@"Call disconnected");

        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"4", nil] forKeys:[NSArray arrayWithObjects:@"Disconnected", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];

    }

    -(void)connection:(TCConnection*)connection didFailWithError:(NSError*)error
    {
        NSLog(@"Failed %@",[error description]);
        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"3", nil] forKeys:[NSArray arrayWithObjects:@"Error", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)connectionDidStartConnecting:(TCConnection*)connection
    {
        NSLog(@"Calling..");
        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"1", nil] forKeys:[NSArray arrayWithObjects:@"Calling", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)connectionDidConnect:(TCConnection*)connection
    {
        NSLog(@"In call..");

        NSDictionary *dict = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"2", nil] forKeys:[NSArray arrayWithObjects:@"In call", nil]];
        [[NSNotificationCenter defaultCenter] postNotificationName:@"showCallingStatusView" object:nil userInfo:dict];
    }

    -(void)dealloc
    {
        [_device release];
        [_connection release];

        [super dealloc];
    } 
```

我希望它对你有帮助。如果您遇到任何问题，请告诉我。

# html - CSS中浮动的元素排序效果

> ID：14866819
> 
> 赞同：0
> 
> 时间：2013-02-14T02:21:48.947
> 
> 标签：html, css, layout, web, css-float

我有这个简单的 HTML：

```
<body>          
    <div class="square" id="black"></div>
    <div class="square" id="yellow"></div>           
</body> 
```

这是CSS：

```
.square {
    height: 50px;
    width: 50px;    
}

#black {
    background-color: black;            
    float:left;   
}

#yellow {
    background-color: yellow;          
} 
```

据我所知，当一个元素浮动时，它会从页面流中取出。就好像浮动和非浮动元素相互忽略一样。所以黑色方块只是坐在黄色的顶部并隐藏它：

![在此处输入图像描述](../Images/7fcdeefab1eecfe58cb600871570abf8.png)

但是当浮动黄色方块时：

```
#black {
    background-color: black;                      
}

#yellow {
    background-color: yellow; 
    float:left;          
} 
```

我们得到：

![在此处输入图像描述](../Images/b323e66e9e5c56273e6a806cebff37bf.png)

我试图弄清楚这背后的逻辑。html 中的**元素排序和****浮动机制**如何协同工作？什么时候谁赢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:34:00.957

[W3C Float Spec](http://www.w3.org/TR/CSS21/visuren.html#floats)实际上很好地回答了这个问题。

> 浮动是在当前行向左或向右移动的框...由于浮动不在流中，因此在浮动框之前和之后创建的非定位块框垂直流动，就好像浮动不存在一样.

这就解释了为什么浮动覆盖了第一个示例中的黄色框。

至于第二个例子，`#black` *是*在内容流中`display: block`，因此有它自己的行。 `#yellow`在那种情况下是在另一条线上。

# javascript - HTML5 JavaScript - 旋转对象面对目标

> ID：14866821
> 
> 赞同：0
> 
> 时间：2013-02-14T02:21:58.567
> 
> 标签：javascript, html, rotation

我试图让我的对象始终面向我的玩家，但我正在努力解决其背后的数学问题。到目前为止，我的对象在我的玩家移动的任何地方都会旋转，但它是不一致的。

这就是我用来旋转对象的方法：

```
var targetX = player.x - this.width/2;
var targetY = player.y - this.height/2;

this.rotation = Math.atan2(targetY, targetX);
ctx.transform(1, 0, 0, 1, this.x, this.y);

//ART WORK
ctx.save()
    ctx.translate(15, 15);
    ctx.rotate(this.rotation);

    ctx.fillStyle = "866c4a";
    ctx.fillRect(-15, -15, this.width, this.height);
ctx.restore(); 
```

就像我说的，它不能正常工作，我相信这与我的数学有关。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:25:00.280

好！！

我立即发现了问题所在。我没有考虑到物体的位置：

```
var targetX = player.x - this.x;
var targetY = player.y - this.y;

this.rotation = Math.atan2(targetY, targetX);
ctx.transform(1, 0, 0, 1, this.x, this.y);

//ART WORK
ctx.save()
    ctx.translate(15, 15);
    ctx.rotate(this.rotation);

    ctx.fillStyle = "866c4a";
    ctx.fillRect(-15, -15, this.width, this.height);
ctx.restore(); 
```

我将保留此 QnA，以防其他人遇到此问题。:)

# ruby-on-rails - 控制器变量在视图中为零

> ID：14866841
> 
> 赞同：0
> 
> 时间：2013-02-14T02:25:01.067
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我对 ruby​​ on rails 很陌生，但简单的操作让我发疯

我将变量从控制器传递到视图

但在我阅读了所有与我类似的问题但没有一个是解决方案的观点中，它是零

我有一个方法叫`news_read`

```
def news_read
    @name = "Come On "
end 
```

在**正确**的 关联视图中，`(news_read.html.erb)`我尝试了这个

```
<%= @name.inspect %> 
```

但是浏览器上的值是

```
nil 
```

我在 3 小时前遇到了问题，它根本不工作

任何帮助将不胜感激

**编辑**

我试图记录一些东西，但它没有被调用，所以我的路线看起来像这样

```
get "main/news_read"
  get "main/index"
  root :to => 'main#index', :as => 'main'

  resources :categories
  resources :testimonials
  resources :news
  resources :products
  resources :teams
  resources :abouts
  resources :main
  resources :header_titles 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:57:01.097

我无法评论你的答案（没有足够的 SO 点）所以我在这里添加这个。

似乎您正在覆盖内部`ActionView::TemplateRenderer#resolve_layout`（[docs](http://apidock.com/rails/ActionView/TemplateRenderer/resolve_layout)），我认为这不是您想要实现的目标，并且可能会给您带来问题。

我建议您将控制器中的该方法重命名为其他名称，但将其保留为受保护或私有，这样如果您有自由路由，它就不会被视为操作方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:59:49.627

采用：

```
<%= debug @name %> 
```

据我所知，`.inspect`将哈希/数组作为字符串返回。

还可以考虑添加到您的 Gemfile：

```
group :development do
  gem 'better_errors'
end 
```

然后运行`bundle install`

编辑

在你的路线中试试这个

```
match 'main/news' => 'main#news_read' 
```

然后你的 API 是**localhost/main/news**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T03:11:08.420

我修复了我试图根据操作名称指定另一个布局并且该方法是私有的我不知道为什么它会阻止它但删除它可以解决问题

**就像这样**

```
 layout :resolve_layout

  private 
  def resolve_layout
    case action_name
    when "news_read"
      "news"
    else
      "application"
    end
  end 
```

**解决方案是这样的**

```
 layout :resolve_layout

  def resolve_layout
    case action_name
    when "news_read"
      "news"
    else
      "application"
    end
  end 
```

# c - 查找位数组中的第一个零

> ID：14866848
> 
> 赞同：4
> 
> 时间：2013-02-14T02:25:36.133
> 
> 标签：c, linux, bitmap, bit-manipulation

我有一张位图

```
uint64_t bitmap[10000] 
```

跟踪系统中分配的资源。现在的问题是如何有效地找到该位图中的第一个未设置（零）位？

我知道`ffsll(unsigned long long)`在 glibc 中可以找到第一个设置位，我假设它使用硬件指令来完成。

要在我的情况下使用此函数，首先我需要初始化数组以将每个位设置为 1，然后在进行资源分配时，我必须线性搜索数组以查找第一个非零字。然后使用 ffsll() 找到第一个设置位。

我怎样才能更快地做到这一点？

更新：我在 x86-64 cpu 上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:44:45.687

您可以维护位图*树*以有效地找到最低位集。在 64 位 CPU 上，您只需拥有 3 的树深度即可跟踪 4096 个 64 位元素——这意味着只需使用三个`ffsll`调用。

基本上，这是通过将您的数组划分为 64 个字的块并为每个块分配一个 64 位索引来实现的。如果相应的位集字已设置所有位，则设置索引字的位。当您更改位集中的位时，您会调整相应的索引字。

然后，您可以在顶部构建另一个索引数组以形成一棵树。

它需要对每个位更改进行一些额外的工作，但是与您在需要空闲位时不必线性搜索位集所获得的节省相比，额外工作（和存储）的总量可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:33:30.440

我不确定你怎么会比这快得多，但我愿意被证明是错误的：

```
uint64_t bitmap[10000];
unsigned int i;
for (i = 0; i < (sizeof(bitmap) / sizeof(*bitmap)) && 0xFFFFFFFFFFFFFFFF == bitmap[i]; ++i);
const int bitInWord = ffsll(bitmap[i]);
const unsigned int firstZeroBit = bitInWord ? i * sizeof(*bitmap) * CHAR_BIT + bitInWord : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:34:23.467

如果您使用的是 32 位 cpu，那么您不想这样做。而是使用 32 位整数数组。数组上的循环会更快。

您也可以将每个值编码为 1 个字节，然后预存储该字节中设置的第一位。因此，当您找到一个并非全部为 0xFFFFFFFF 的整数时，您可以简单地比较字节。如果第一个字节不是 0xFF，那么它就在那个字节中，依此类推。

因此，如果一个字节不是 0xFF，则意味着它是该字节的 255 个可能值之一。每个值都有一个第一位设置。

另一种看待问题的方法是尽可能将其分成块。我不知道你的资源是什么，所以我不能说。

还要考虑在上一次扫描它向前循环的未设置位。如果你存储上一个结果的索引，那么你可以简单地从下一个搜索的相同索引开始。将此索引称为 pos 并每次都使用它。

您还可以在每次将位设置为零时创建一个小的“空闲”索引数组，因此当您的“pos”到达数组末尾时，只需从保存的索引之一重新开始。

换句话说，你真的不想每次都运行这么长的循环。那是您的问题，而不是获得该位的最终说明。使用上面概述的索引跟踪，它会快数百倍。

# c++ - 责任链模式 C++

> ID：14866853
> 
> 赞同：0
> 
> 时间：2013-02-14T02:26:02.887
> 
> 标签：c++, design-patterns, chain-of-responsibility, argouml

我正在研究设计模式。我不确定如何在 C++ 中实现责任链模式。我正在使用 Argo 工具从我的图表生成我的代码![在此处输入图像描述](../Images/7c041732028078a99dbfb768252a5dee.png)。

在此图中，Oracle 类是一个“客户端”。Oracle.cpp 构造函数方法具有下一行

```
#include "Oracle.h"
Oracle::Oracle(){
    Validation v;//Here
} 
```

在这里我得到“错误：'验证'没有在这个范围内声明”。我的问题：是否有必要创建从 Oracle 到验证的 UML 关系“依赖关系”？或者我将如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:38:08.113

您的 Oracle 类不应具有 Validation 类型的成员，而应具有 Handler 类型的成员。

当然，这将在某处设置为验证（我假设这将是链的第一步）。

现在你还是要建链，链的步骤应该不知道其他步骤。

现在有两个选择，要么允许 Oracle 类知道链将如何运行，要么它可以自己构建它（包含所有产生的依赖关系）。或者您需要一个构建器类来构建链并将其注入 Oracle 实例（最好通过构造器）。

第二个选项最好遵循 CoR 模式的理念（链的用户不知道其内部工作）。

也许 ArgoUML 将该链接添加到验证以便能够创建处理程序的实例，但这很奇怪。

此外，我认为 setNext 方法不属于 Oracle 类。此类确实需要对链的第一个 Handler 对象的引用，但最好从构造函数中设置。如果通过 setter 进行设置，您应该给它一个正确的名称，例如 setHanlderChain 以明确目的。

成功

回复评论：

责任链的一个元素对链本身一无所知，它只是一个参与者。所以你需要在某个地方创建链：实例化参与者并设置他们的下一步。

对于您的示例，这可能看起来像这样（请注意，自从我用 C++ 编写任何严肃的东西以来已经有很长时间了，我假设您的类图中的顺序是执行顺序）

```
Handler buildOracleChain() 
{
  CalculePR step6 = new CalculePR();
  step1.setNext(null);
  SolutionKE step5 = new SolutionKE();
  step5.setNext(step6);
  CalculeSP step4 = new ValcvuleSP();
  step4.setNext(step5);
  KeyGeneration step3 = new KeyGeneration();
  step3.setNext(step4);
  Encrypt step2 = new Encrypt();
  step2.setNext(step3);
  Validation step1 = new Validation();
  step1.setNext(step2);
  return step1;
} 
```

对于您的第二个问题，我没有现实生活中的示例，但是：如果您将此方法放在构建器类（例如 OracleHandlerChainBuilder）中，则只有该类必须导入所有这些步骤，而 oracle 类必须仅导入 Handler。

在您创建 Oracle 实例的地方，您将其链（在您的情况下使用 setNext）设置为构建方法的结果。将实例化 Oracle 类的类需要同时导入 Oracle 类和 OracleHandlerChainBuilder 类。

这样，类之间的依赖关系就最小化了。

# android - 为什么在销毁 Activity 时调用 DialogFragment.onCreateView？

> ID：14866854
> 
> 赞同：13
> 
> 时间：2013-02-14T02:26:05.873
> 
> 标签：android, android-dialogfragment, android-support-library

我正在使用 android 支持库 v4 修订版 11，并且不时地看到下面的堆栈跟踪；我怀疑这是由于最近的发布而发生的，因此我尝试访问的模型为空。无论如何，这个跟踪让我想知道为什么在销毁活动时调用 onCreateView ，以及处理这种情况的最佳方法是什么？

```
java.lang.NullPointerException
    at com.example.dialogs.ExampleDialogFragment.onCreateView(ExampleDialogFragment.java:53)
    at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
    at android.support.v4.app.FragmentManagerImpl.dispatchReallyStop(FragmentManager.java:1888)
    at android.support.v4.app.FragmentActivity.onReallyStop(FragmentActivity.java:787)
    at android.support.v4.app.FragmentActivity.doReallyStop(FragmentActivity.java:764)
    at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:322)
    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3642)
    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3673)
    at android.app.ActivityThread.access$2900(ActivityThread.java:125)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2066)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

崩溃后，来自后台堆栈的活动被恢复，我会检查模型在活动中是否有效`onResume()`，`onStart()`并且`onCreate(Bundle savedInstanceState)`。如果模型无效，我会从那里开始另一个活动`FLAG_ACTIVITY_NO_HISTORY`，调用`finish()`，`return;`例如

```
@Override
public void onResume() {        
    Model cm = Application.getModel();
    final boolean isModelAvailable = cm != null;
    if (!isModelAvailable) {
        Intent restartIntent = IntentUtil.intentForAction(Constants.INTENT_RESTART);
        restartIntent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);
        startActivity(restartIntent);
        finish();
        super.onResume();
        return;
    } else {

    } 
```

在`INTENT_RESTART`活动完成重新初始化模型后，它开始使用标志活动`FLAG_ACTIVITY_CLEAR_TOP`，此活动将事务提交到片段`FirstFragment`

使用 . 查看日志`FragmentManager.enableDebugLogging(true);`。

```
05-13 13:24:53.051: V/FragmentManager(7468): Commit: BackStackEntry{40710fa0}
05-13 13:24:53.111: V/FragmentManager(7468): Commit: BackStackEntry{40771e78}
05-13 13:24:53.151: V/FragmentManager(7468): Run: BackStackEntry{40710fa0}
05-13 13:24:53.151: V/FragmentManager(7468): add: RetainFragment{4077d048 app_ImageCache}
05-13 13:24:53.151: V/FragmentManager(7468): Allocated fragment index RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:24:53.151: V/FragmentManager(7468): moveto CREATED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:24:53.151: V/FragmentManager(7468): moveto ACTIVITY_CREATED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:24:53.151: V/FragmentManager(7468): Run: BackStackEntry{40771e78}
05-13 13:24:53.151: V/FragmentManager(7468): add: FirstFragment{4077dfa8 id=0x7f04000d}
05-13 13:24:53.151: V/FragmentManager(7468): Allocated fragment index FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:24:53.151: V/FragmentManager(7468): moveto CREATED: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:24:53.151: V/FragmentManager(7468): moveto ACTIVITY_CREATED: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:24:53.791: V/FragmentManager(7468): moveto STARTED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:24:53.791: V/FragmentManager(7468): moveto STARTED: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:24:53.811: V/FragmentManager(7468): moveto RESUMED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:24:53.811: V/FragmentManager(7468): moveto RESUMED: FirstFragment{4077dfa8 #1 id=0x7f04000d}

05-13 13:25:58.414: V/FragmentManager(7468): Commit: BackStackEntry{40727530}
05-13 13:25:58.434: V/FragmentManager(7468): Run: BackStackEntry{4078fe00}
05-13 13:25:58.434: V/FragmentManager(7468): add: RetainFragment{4076f1b0 app_ImageCache}
05-13 13:25:58.434: V/FragmentManager(7468): Allocated fragment index RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:25:58.434: V/FragmentManager(7468): moveto CREATED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:25:58.434: V/FragmentManager(7468): moveto ACTIVITY_CREATED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:25:58.434: V/FragmentManager(7468): Run: BackStackEntry{40727530}
05-13 13:25:58.434: V/FragmentManager(7468): add: SecondFragment{40713c28 id=0x7f04000d}
05-13 13:25:58.434: V/FragmentManager(7468): Allocated fragment index SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:25:58.434: V/FragmentManager(7468): moveto CREATED: SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:25:58.434: V/FragmentManager(7468): moveto ACTIVITY_CREATED: SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:25:58.545: V/FragmentManager(7468): moveto STARTED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:25:58.545: V/FragmentManager(7468): moveto STARTED: SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:25:58.565: V/FragmentManager(7468): moveto RESUMED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:25:58.565: V/FragmentManager(7468): moveto RESUMED: SecondFragment{40713c28 #1 id=0x7f04000d}

05-13 13:26:02.338: V/FragmentManager(7468): Saved state of RetainFragment{4077d048 #0 app_ImageCache}: null
05-13 13:26:02.338: V/FragmentManager(7468): Saved state of FirstFragment{4077dfa8 #1 id=0x7f04000d}: Bundle[{android:view_state=android.util.SparseArray@40b15b60}]
05-13 13:26:02.338: V/FragmentManager(7468): saveAllState: adding fragment #0: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:26:02.338: V/FragmentManager(7468): saveAllState: adding fragment #1: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:26:02.348: V/FragmentManager(7468): movefrom STARTED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:26:02.348: V/FragmentManager(7468): movefrom STARTED: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:26:02.358: V/FragmentManager(7468): movefrom STOPPED: RetainFragment{4077d048 #0 app_ImageCache}
05-13 13:26:02.358: V/FragmentManager(7468): movefrom STOPPED: FirstFragment{4077dfa8 #1 id=0x7f04000d}
05-13 13:27:15.219: V/FragmentManager(7468): movefrom RESUMED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:27:15.219: V/FragmentManager(7468): movefrom RESUMED: SecondFragment{40713c28 #1 id=0x7f04000d}

05-13 13:27:15.239: V/FragmentManager(7468): Commit: BackStackEntry{40a8a6d0}
05-13 13:27:15.259: V/FragmentManager(7468): Commit: BackStackEntry{40a90190}

05-13 13:27:15.279: V/FragmentManager(7468): Run: BackStackEntry{40a8a6d0}
05-13 13:27:15.279: V/FragmentManager(7468): add: RetainFragment{40a7fdf0 app_ImageCache}
05-13 13:27:15.279: V/FragmentManager(7468): Allocated fragment index RetainFragment{40a7fdf0 #0 app_ImageCache}
05-13 13:27:15.279: V/FragmentManager(7468): moveto CREATED: RetainFragment{40a7fdf0 #0 app_ImageCache}
05-13 13:27:15.279: V/FragmentManager(7468): moveto ACTIVITY_CREATED: RetainFragment{40a7fdf0 #0 app_ImageCache}
05-13 13:27:15.279: V/FragmentManager(7468): Run: BackStackEntry{40a90190}
05-13 13:27:15.279: V/FragmentManager(7468): add: ThirdFragment{406c2308 id=0x7f04000d}
05-13 13:27:15.279: V/FragmentManager(7468): Allocated fragment index ThirdFragment{406c2308 #1 id=0x7f04000d}
05-13 13:27:15.289: V/FragmentManager(7468): moveto CREATED: ThirdFragment{406c2308 #1 id=0x7f04000d}
05-13 13:27:15.289: V/FragmentManager(7468): moveto ACTIVITY_CREATED: ThirdFragment{406c2308 #1 id=0x7f04000d}
05-13 13:27:15.410: V/FragmentManager(7468): moveto STARTED: RetainFragment{40a7fdf0 #0 app_ImageCache}
05-13 13:27:15.410: V/FragmentManager(7468): moveto STARTED: ThirdFragment{406c2308 #1 id=0x7f04000d}
05-13 13:27:15.430: V/FragmentManager(7468): moveto RESUMED: RetainFragment{40a7fdf0 #0 app_ImageCache}
05-13 13:27:15.430: V/FragmentManager(7468): moveto RESUMED: ThirdFragment{406c2308 #1 id=0x7f04000d}
05-13 13:27:15.810: V/FragmentManager(7468): Saved state of RetainFragment{4076f1b0 #0 app_ImageCache}: null
05-13 13:27:15.810: V/FragmentManager(7468): Saved state of SecondFragment{40713c28 #1 id=0x7f04000d}: Bundle[{android:view_state=android.util.SparseArray@40aa62c0}]
05-13 13:27:15.810: V/FragmentManager(7468): saveAllState: adding fragment #0: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:27:15.810: V/FragmentManager(7468): saveAllState: adding fragment #1: SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:27:15.810: V/FragmentManager(7468): movefrom STARTED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:27:15.810: V/FragmentManager(7468): movefrom STARTED: SecondFragment{40713c28 #1 id=0x7f04000d}
05-13 13:27:15.820: V/FragmentManager(7468): movefrom STOPPED: RetainFragment{4076f1b0 #0 app_ImageCache}
05-13 13:27:15.820: V/FragmentManager(7468): movefrom STOPPED: SecondFragment{40713c28 #1 id=0x7f04000d}

// Here I'm waiting for a while to make sure Android has enough time to do anything it wants, then I press a button gorse-closing the app  
05-13 13:27:59.783: D/AndroidRuntime(7468): Shutting down VM

05-13 13:28:14.928: V/FragmentManager(7523): Instantiated fragment RetainFragment{406cde80 #0 app_ImageCache}
05-13 13:28:14.938: V/FragmentManager(7523): restoreAllState: active #0: RetainFragment{406cde80 #0 app_ImageCache}
05-13 13:28:14.938: V/FragmentManager(7523): Instantiated fragment FirstFragment{406d8410 #1 id=0x7f04000d}
05-13 13:28:14.938: V/FragmentManager(7523): restoreAllState: active #1: FirstFragment{406d8410 #1 id=0x7f04000d}
05-13 13:28:14.938: V/FragmentManager(7523): restoreAllState: added #0: RetainFragment{406cde80 #0 app_ImageCache}
05-13 13:28:14.938: V/FragmentManager(7523): restoreAllState: added #1: FirstFragment{406d8410 #1 id=0x7f04000d}
05-13 13:28:14.938: V/FragmentManager(7523): moveto CREATED: RetainFragment{406cde80 #0 app_ImageCache}
05-13 13:28:14.938: V/FragmentManager(7523): moveto CREATED: FirstFragment{406d8410 #1 id=0x7f04000d}

05-13 13:28:15.128: V/msm8660.gralloc(7523): PmemUserspaceAllocator::PmemUserspaceAllocator(PmemUserspaceAllocator::Deps&, PmemUserspaceAllocator::Deps::Allocator&, const char*) begin
05-13 13:28:15.138: V/msm8660.gralloc(7523): PmemUserspaceAllocator::PmemUserspaceAllocator(PmemUserspaceAllocator::Deps&, PmemUserspaceAllocator::Deps::Allocator&, const char*) end
05-13 13:28:15.138: V/msm8660.gralloc(7523): PmemKernelAllocator::PmemKernelAllocator(PmemKernelAllocator::Deps&) begin
05-13 13:28:15.138: V/msm8660.gralloc(7523): PmemKernelAllocator::PmemKernelAllocator(PmemKernelAllocator::Deps&) end

05-13 13:28:15.408: V/FragmentManager(7523): moveto ACTIVITY_CREATED: RetainFragment{406cde80 #0 app_ImageCache}
05-13 13:28:15.408: V/FragmentManager(7523): moveto ACTIVITY_CREATED: FirstFragment{406d8410 #1 id=0x7f04000d}

java.lang.RuntimeException: Unable to destroy activity {com.myapp/com.myapp.activity.FirstFragment}: java.lang.NullPointerException

05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3272)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3299)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread.access$2100(ActivityThread.java:134)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1143)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.os.Looper.loop(Looper.java:152)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread.main(ActivityThread.java:4606)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at java.lang.reflect.Method.invokeNative(Native Method)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at java.lang.reflect.Method.invoke(Method.java:491)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at dalvik.system.NativeStart.main(Native Method)

// see the original question log, it is quite the same
05-13 13:35:41.824: E/AndroidRuntime(7691): Caused by: java.lang.NullPointerException
05-13 13:35:41.824: E/AndroidRuntime(7691):     at com.myapp/com.myapp.activity.FirstFragment.onCreateView(FirstFragment.java:41)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.Fragment.performCreateView(Fragment.java:1460)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentManagerImpl.dispatchReallyStop(FragmentManager.java:1888)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentActivity.onReallyStop(FragmentActivity.java:787)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentActivity.doReallyStop(FragmentActivity.java:764)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:322)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at com.myapp.activity.FragmentsContainerActivity.onDestroy(FragmentsContainerActivity.java:806)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.Activity.performDestroy(Activity.java:4662)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1113)
05-13 13:35:41.824: E/AndroidRuntime(7691):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3255)
05-13 13:35:41.824: E/AndroidRuntime(7691):     ... 11 more 
```

第 806 行`FragmentsContainerActivity`是`super.onDestroy();`：

```
@Override
public void onDestroy() {
    try {
        unregister(receiver);
    } catch (Exception e) {
    }
    super.onDestroy(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T21:31:26.520

按照此处的代码示例中的指导，[您](http://developer.android.com/training/basics/activity-lifecycle/pausing.html#Resume)`onResume`应该**：**

> 总是先调用超类方法

这意味着你应该把你的`super.onResume();`权利放在开始。那一定是问题所在。

在您正在运行的当前代码中，您混淆了被告知停止（即`finish`）然后被告知停止的 FragmentActivity `resume`。在活动生命周期中不“合法”的生命周期。片段直接受此影响，因为它们的生命周期是从活动生命周期中调用的，如果活动从**完成 -> 恢复**它肯定意味着片段从**完成/销毁 -> 恢复（通过 onCreateView）**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T09:02:15.527

如果没有看到代码，我们无法帮助您解决手头的具体问题。但是，其中一个事实是，它是一个 DialogFragment 是无关紧要的。

这就是说，根据我的经验，`FragmentManager.enableDebugLogging()`当您遇到生命周期问题时，这是一个救命稻草。例如，它会告诉你最后一个 moveToState 做了什么（即，它在什么状态之间移动），这可能会揭示一些错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-13T11:30:38.163

对于您的具体问题，您是否尝试在调用 finish() 之前调用 super.resume() ？

否则你应该看看源代码： [https ://github.com/mastro/android-support-library-archive/blob/23ad71b245e7b7bbde6a501671ab411725ce16f5/v4/src/java/android/support/v4/app/FragmentManager.java](https://github.com/mastro/android-support-library-archive/blob/23ad71b245e7b7bbde6a501671ab411725ce16f5/v4/src/java/android/support/v4/app/FragmentManager.java)

从这个堆栈跟踪行 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:911)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-07T17:57:08.860

请参阅[这个](https://stackoverflow.com/questions/14322014/how-is-my-fragments-oncreateview-called-before-its-oncreate-when-finishing-the)类似的问题，它描述了您所看到的相同行为，但该解决方案可能不适用于您的情况。要解决您的问题，您可以简单地检查您的代码所依赖的任何内容是否`onCreateView`为`null`.

# jquery - ipad 上的视频 - 灯箱中的 iphone

> ID：14866856
> 
> 赞同：1
> 
> 时间：2013-02-14T02:26:27.897
> 
> 标签：jquery, ipad, fancybox, lightbox, jwplayer

我正在寻找一个可以在 ipad、iphone 上播放带有 html5 的视频的灯箱（最好是花式箱）。我已经在 fancybox 中尝试过 jwplayer，但无法让 html5 正常工作。我很想看到这个问题的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T18:31:12.433

[jplayer](http://www.jplayer.org)也适用于fancybox。

# performance - 关于indexeddb有多快

> ID：14866859
> 
> 赞同：4
> 
> 时间：2013-02-14T02:26:49.317
> 
> 标签：performance, html, indexeddb

我正在决定是否应该使用 IndexedDB。我将大规模使用它，所以有人可以告诉我性能是否合理，有 2-3 个对象存储，每个对象存储上有几个索引（可能 5+），几百条记录，每条记录都有几十个属性和 20-30 MB 的数据？我不需要很大的速度，我只希望它合理，比访问服务器上的数据库更快。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T09:27:15.070

用它！！！我即将完成一个在相对较大的范围内使用 IndexedDB 的离线应用程序，我正在使用 16 个表/objectStores 并且通过 AJAX 我能够连接到服务器，创建所有 objectStores 并下载/同步大约一分钟内从 sql server 获取 260 000 条记录，其中大部分用于在服务器端进行查询。一旦数据在你身边，管理几乎是光速的，当然在 ARM 设备中会减少一点（如预期的那样），但真他妈的，它工作得很好，而且它在每台机器上都能工作（win、mac、linux、android）因为 Firefox 在最新规格中始终处于领先地位（chrome 几乎就在那里）。有关更多信息，请访问[Kristof Degrave](http://www.kristofdegrave.be/)博客，他知道这一切。

# javascript - 无法在信息窗口中显示内容，我使用的是谷歌地图 API v3

> ID：14866861
> 
> 赞同：1
> 
> 时间：2013-02-14T02:26:50.843
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, infowindow

在此先感谢，我现在正试图弄清楚为什么我的代码不能正常工作，过去几个小时我一直在尝试使用 infowindow 显示内容，我找不到为什么内容没有在里面显示盒子。目前，我可以根据坐标在地图中的不同位置显示多个标记，现在我只需要在单击标记时显示带有一些相关内容的信息窗口。我可以显示信息窗口，但它是空白的，它没有显示字符串。在这里我粘贴我的功能。再次感谢。

```
 function initialize() {

        var mapOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
        var infowindow = new google.maps.InfoWindow(); 
        var marker, i;
        var bounds = new google.maps.LatLngBounds();

        var image = 'http://193.168.3.5/Location&Tracking/images/taxiv7_trans_small.png';

        for (i = 0; i < markers.length; i++) { 
            var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
            bounds.extend(pos);
            marker = new google.maps.Marker({
                position: pos,
                map: map,
                icon: image

            });

            function placeMarker(location) {
                var marker = new google.maps.Marker({
                    position: location,
                    map: map
                });
                var infowindow = new google.maps.InfoWindow({
                    content: 'Latitude: ' + location.lat() +
                        '<br>Longitude: ' + location.lng()
                });
                infowindow.open(map,marker);
            }

            var infowindow = new google.maps.InfoWindow({
                content:"Hello World!"
            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {

                    infowindow.setContent(markers[i][0]);
                    infowindow.open(map, marker);

                }
            })(marker, i));

        }
        map.fitBounds(bounds);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:15:58.360

最后我找到了解决我自己问题的方法：显示信息窗口内的文本，但文本颜色为白色作为背景，使其不可见。我通过应用 html 代码更改了文本颜色并将其更改为蓝色。我在提供内容时也重复了： value 和 infowindow.open 两次，这对写前一个没有任何意义。在这里我粘贴了更正的代码，它现在对我有用。不管怎么说，还是要谢谢你。

```
 function initialize() {

        //Create an object variable containing set of properties, to pass to the map
        var mapOptions = {
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: false
        };

        // Intializing map by calling constructor
        var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
        var infowindow = new google.maps.InfoWindow(); 
        var marker, i;
        var bounds = new google.maps.LatLngBounds();

       //set image to the icon marker
       var image = 'http://193.168.3.5/Location&Tracking/images/taxiv7_trans_small.png';

        for (i = 0; i < markers.length; i++) { 
            var pos = new google.maps.LatLng(markers[i][1], markers[i][2]);
            bounds.extend(pos);
            marker = new google.maps.Marker({
                position: pos,
                map: map,
                icon: image

            });

            google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {

           var infowindow = new google.maps.InfoWindow({
               content:'<p style="color:blue;"> This is marker No.'+markers[i][0]+'</p>'});

                    infowindow.open(map, marker);

                }
            })(marker, i));

        }
        map.fitBounds(bounds);
    } 
```

# perl - 催化剂不能转发到私人行动

> ID：14866862
> 
> 赞同：3
> 
> 时间：2013-02-14T02:26:55.800
> 
> 标签：perl, action, private, catalyst, forward

在[Catalyst](http://www.catalystframework.org/)中，我试图转发到一个私人行动来做一些工作。这是函数定义：

```
sub get_form :Private :Args(1) {
  my ($self, $c, $type_id) = @_;
  #do stuff
} 
```

我尝试像这样转发它：

```
$c->forward('get_form',[$type_id]); 
```

但它只是给了我这个错误：

```
Couldn't forward to command "get_form": Invalid action or component. 
```

但是，如果我将操作从 更改`:Private`为`:Local`，那么它可以工作。有谁知道这是为什么以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T07:19:42.327

您不需要而不能`:Args(1)`用于 Catalyst 中的私人操作。

[来自 cpan Catalyst Manual](http://search.cpan.org/~hkclark/Catalyst-Manual-5.9006/lib/Catalyst/Manual/Intro.pod#Flow_Control)：您可以通过将新参数添加到匿名数组中来将新参数传递给转发操作。在被调用的方法（或转发的方法）中，您将在`$c->req->args`.

```
sub hello : Global {
    my ( $self, $c ) = @_;
    $c->stash->{message} = 'Hello World!';
    $c->forward('check_message',[qw/test1/]);
}

sub check_message : Private {
    my ( $self, $c, $first_argument ) = @_;
    my $also_first_argument = $c->req->args->[0]; # now = 'test1'
    # do something...
} 
```

您也可以使用 stash`$c->stash->{typeid};`代替。然后你可以直接使用`$c->forward('priv_method');`.

前任：

```
 sub hello : Global {
        my ( $self, $c ) = @_;
        $c->stash->{message} = 'Hello World!';
        $c->forward('check_message'); # $c is automatically included
    }

    sub check_message : Private {
        my ( $self, $c ) = @_;
        return unless $c->stash->{message};
        $c->forward('show_message');
    }

    sub show_message : Private {
        my ( $self, $c ) = @_;
        $c->res->body( $c->stash->{message} );
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T05:47:45.070

如果我猜，那是因为您告诉要匹配某些 url ( `:Args(1)`)，但`:Private`“永远不会匹配 URL”。“催化剂的`:Private`属性是专有的，不能与其他属性一起使用”。尝试通过上下文对象传递信息。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-14T17:08:16.357

如果您愿意，您也可以完全避免 forward() ，如果它是同一个控制器，则只需调用该方法：

```
sub myaction : Global {
    my ( $self, $c ) = @_;
    $self->dosomething( $c, 'mystring' );
}

sub dosomething {
    my ( $self, $c, $argument ) = @_;
    $c->log->info( $argument );
} 
```

即使您必须`$c`四处走动，这通常也是一种更易于阅读的方法。

# facebook - 使用评论者的照片获取公共事件源

> ID：14866865
> 
> 赞同：0
> 
> 时间：2013-02-14T02:27:08.723
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在创建一个网站，该网站将实现相当于 facebook 墙的功能。对于每个公共事件，我正在创建一个页面并通过图形 api 通过在 /event_id/feed 上发布一条消息来获取每个事件的提要。

Facebook 以数组的形式返回用户的评论/帖子，我可以检索每个帖子的消息以及发帖或写消息的 user_id。

问题是我需要显示通过 facebook 的 json 对象获取的 user_id 的图片。

我可以以某种方式将用户图片包含在我从 facebook 收到的 json 对象中吗？如果没有，进行一系列 facebook api 调用（循环通过用户 id）似乎非常不专业。还有其他解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:02:43.100

[领域扩展](https://developers.facebook.com/docs/reference/api/field_expansion/)是您的朋友：

```
EVENT_ID/feed?fields=id,message,from.fields(name,id,picture) 
```

# ios - Twilio 平台上的回声消除

> ID：14866867
> 
> 赞同：1
> 
> 时间：2013-02-14T02:27:30.457
> 
> 标签：ios, audio, codec, twilio

我们正在考虑使用 Twilio 通过 iOS 应用程序拨打和接听电话。Twilio 平台是否处理回声消除，或者这是我们需要实现的东西？文档没有指定这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T18:56:04.773

在这里从 Twilio 抢夺。

很高兴您正在考虑在 iOS 上使用 Twilio Client 构建一些东西。我们的 SDK 使用 CoreAudio API，因此它利用了每个设备上可用的硬件回声消除。

您无需配置任何内容即可使用它。如果您希望快速入门，请随时[在此处查看我们的快速入门指南](https://www.twilio.com/docs/quickstart/php/ios-client?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)或利用我的同事 Devin 的[Twilio Client Cocoapod](https://www.twilio.com/blog/2013/08/installing-twilio-client-for-ios-using-cocoapods-2.html?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon)。希望有帮助！

# java - 为什么所有的opengl枚举都是十六进制的？

> ID：14866868
> 
> 赞同：0
> 
> 时间：2013-02-14T02:27:30.207
> 
> 标签：java, opengl, enums, hex

为什么所有的opengl枚举都是十六进制的？

例子：

```
GL_MAX_VERTEX_UNIFORM_COMPONENTS = 0x8B4A 
```

枚举用作 GL 函数中的参数。所以我的问题是，为什么所有参数都是十六进制的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:31:55.907

在这种情况下不确定，但在设置哪些位很重要的情况下，使用十六进制更容易找出设置了哪些位。

# javascript - heatmap-leafet 用更多数据更新热图

> ID：14866870
> 
> 赞同：2
> 
> 时间：2013-02-14T02:27:37.380
> 
> 标签：javascript, heatmap

我在 github 中成功使用了来自 pa7 的 heatmap.js 库来制作一些热图 [http://www.patrick-wied.at/static/heatmapjs/example-heatmap-leaflet.html](http://www.patrick-wied.at/static/heatmapjs/example-heatmap-leaflet.html)

但是当我用额外的数据或新的数据点更新热图时，传单库并没有真正用额外的数据点更新。似乎没有可用于重绘的方法。我不知道是否有人已经解决了这个问题，这就是我要求查看的原因。这是我的附加脚本的简单部分：

```
ndata=[{lat: 13.59, lon:-17.05, value: 11},{lat: 33.08, lon:-103.24, value: 19}]
testData.data.push.apply(ndata)
layer.addData(testData.data); 
```

谷歌浏览器的控制台没有错误或没有异常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T20:39:58.443

层中有一个`redraw`方法：

```
var heatmapLayer = L.TileLayer.heatMap();
// add layer to map
heatmapLayer.redraw() 
```

话虽如此，在最新版本中，当您设置数据时，热图图层会自动重绘（参见[https://github.com/pa7/heatmap.js/blob/d09c4e99852b4849e2b4d4f12976a9fce0327ca5/src/heatmap-leaflet.js#L112](https://github.com/pa7/heatmap.js/blob/d09c4e99852b4849e2b4d4f12976a9fce0327ca5/src/heatmap-leaflet.js#L112)）。

# vb6 - 使用 TriStateUseDefault 时，文件编码是如何确定的

> ID：14866876
> 
> 赞同：1
> 
> 时间：2013-02-14T02:28:12.187
> 
> 标签：vb6, filesystemobject

我有一些代码使用 fileSystemObject 打开文件，然后使用 OpenAsTextStream 获取流进行读取。为了处理 ASCII 和 Unicode 文件，我一直使用 TriStateUseDefault (-2) 作为第二个参数。但是我遇到了一个绝对是 ASCII 文件的情况（没有特殊的 2 字节标题来启动文件，没有 BOM）。但该文件似乎被解释为 Unicode。当 OpenAsTextStream 方法通过 TriStateUseDefault 时，它是否会对文件内容进行更“有趣”的检查以尝试猜测文件是否为 Unicode？

例如，问题文件有几行文本，其中一行包含如下内容：“... ^123^....”并将文件视为 Unicode。

当我将该行的文本更改为“...^1234^...”时，FSO 将文件视为 ASCII。

如果 fso 正在猜测编码，是否有办法避免这种猜测错误的极端情况？

另一个注意事项 - 此文件确实具有“扩展 ASCII”字符，包括“刺”字符（ascii 254）。

示例代码：

```
TriStateUseDefault = -2
Set fso = CreateObject("Scripting.FileSystemObject")
set objFIL = FSO.GetFile("myfile.txt")
Set TS =objFIL.OpenAsTextStream(ForReading, TristateUseDefault)
strLine = TS.ReadLine 
```

# php - 提交表单时，Jquery输入表单不会传递变量

> ID：14866881
> 
> 赞同：0
> 
> 时间：2013-02-14T02:28:20.050
> 
> 标签：php, jquery, forms

我无法让我的变量在我的表单中发布。如果用户想输入一个新的子类别，我会使用 jquery 来加载一个框。

这是表格中的选择

```
<select id="sub_cat1" name="sub_cat1">
   <option value=""></option>
   <option value="new">New Sub Cat</option>
<?php
$query = "SELECT sub_category FROM blog_posts GROUP BY sub_category";
$data = mysqli_query($dbc, $query);
    if (mysqli_num_rows($data) > 0) {
      while ($row = mysqli_fetch_array($data)) {
    $sub_category = $row['sub_category'];
    echo '<option value="' . $sub_category . '">' . $sub_category . '</option>';
    }
     }
?>
        </select>
<div id="load_sub_cat_box"></div> 
```

这是jquery

```
$(document).ready(function(){ 
$("#sub_cat1").on("keyup change", function() {  
  var prod = $("#sub_cat1").val();
  if(prod == 'new'){
  $("#load_sub_cat_box").append('<div style="padding-top:15px;">Enter New Sub Category</div><input type="text" name="sub_cat2" />');
  }
    }); 
}); 
```

这是表单验证代码

```
 if($_POST['sub_cat1'] == "new"){
$sub_cat = mysqli_real_escape_string($dbc, trim($_POST['sub_cat2']));
  }
  else{
$sub_cat = mysqli_real_escape_string($dbc, trim($_POST['sub_cat1']));  
  } 
```

如果我选择新的，该框会加载到页面上，但由于某种原因，提交表单时它不会加载 $sub_cat1 的变量。关于 jquery 和表单有什么我不知道的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:34:17.023

您有两个 id="sub_cat1" 的选择元素。

每个页面的 id 必须是唯一的。

它也是无效的 HTML，在选择中带有选择。

# c - C中大型磁盘文件的二进制搜索 - 问题

> ID：14866882
> 
> 赞同：6
> 
> 时间：2013-02-14T02:28:22.617
> 
> 标签：c, linux, binary-search

这个问题在 StackOverflow 上经常出现，但是我已经阅读了之前所有的相关答案，并且对这个问题有轻微的扭曲。

我有一个 23Gb 的文件，其中包含 4.75 亿行大小相等的行，每行包含一个 40 个字符的哈希码，后跟一个标识符（一个整数）。

我有一个传入的哈希码流——总共有数十亿个——对于每个传入的哈希码，我需要找到它并打印出相应的标识符。这项工作虽然很大，但只需要完成一次。

该文件太大，我无法读入内存，因此我一直在尝试通过以下方式使用 mmap：

```
codes = (char *) mmap(0,statbuf.st_size,PROT_READ,MAP_SHARED,codefile,0); 
```

然后我只是根据代码中的地址使用地址算法进行二进制搜索。

这似乎*开始工作*得很好，并在几秒钟内产生了几百万个标识符，使用了 100% 的 cpu，但是在经过一些看似随机的时间后，它会减速到爬行。当我使用 ps 查看进程时，它已从使用 100% 的 cpu 的状态“R”变为使用 1% 的 cpu 的状态“D”（磁盘绑定）。

这是不可重复的——我可以在相同的数据上再次启动该过程，并且它可能会在“爬行缓慢”发生之前运行 5 秒或 10 秒。昨晚有一次，在这件事发生之前我花了将近一分钟的时间。

一切都是只读的，我没有尝试对文件进行任何写入，并且我已经停止了机器上的所有其他进程（我控制的）。它是现代 Red Hat Enterprise Linux 64 位机器。

有谁知道为什么该进程成为磁盘绑定以及如何停止它？

更新：

感谢大家的回答和您的想法；我以前没有尝试过所有各种改进，因为我想知道我是否以某种方式错误地使用了 mmap。但答案的要点似乎是，除非我能将所有内容都挤进内存，否则我将不可避免地遇到问题。所以我将散列码的大小压缩到不产生任何重复的前导前缀的大小——前 15 个字符就足够了。然后我将生成的文件拉入内存，并以大约 20 亿个批次运行传入的哈希码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:45:33.517

首先要做的是拆分文件。

用哈希码制作一个文件，用整数 id 制作另一个文件。由于行相同，因此在找到结果后它将很好地排列。您也可以尝试将每个第 n 个哈希放入另一个文件然后存储索引的方法。

例如，每 1000 个哈希键放入一个带有索引的新文件，然后将其加载到内存中。然后二进制扫描它。这将告诉您需要在文件中进一步扫描的 1000 个条目的范围。是的，那会做得很好！但可能远不止于此。可能每 20 条左右的记录就会将该文件大小除以 20 +- 如果我想得好的话。

换句话说，扫描后您只需要触摸磁盘上几千字节的文件。

另一种选择是拆分文件并将其放在多台机器的内存中。然后只需二进制扫描每个文件。这将在零磁盘访问的情况下产生绝对最快的搜索......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T04:15:06.100

您是否考虑过破解 PATRICIA trie 算法？在我看来，如果您可以构建数据文件的 PATRICIA 树表示，它指的是哈希和整数值的文件，那么您可能能够将每个项目减少为节点指针（2 * 64 位？），位测试偏移量（在这种情况下为 1 个字节）和文件偏移量（uint64_t，可能需要对应多个 fseek()s）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T04:32:38.187

> 有谁知道为什么该进程成为磁盘绑定以及如何停止它？

二进制搜索需要在文件中进行大量搜索。在整个文件不适合内存的情况下，页面缓存不能很好地处理大搜索，从而导致您看到的行为。

处理这个问题的最好方法是减少/防止大搜索并使页面缓存为您工作。

给你三个想法：

**如果您可以对输入流进行排序**，则可以使用类似于以下算法的方法分块搜索文件：

```
code_block <- mmap the first N entries of the file, where N entries fit in memory
max_code <- code_block[N - 1]
while(input codes remain) {
  input_code <- next input code
  while(input_code > max_code)  {
    code_block <- mmap the next N entries of the file
    max_code <- code_block[N - 1]
  }
  binary search for input code in code_block
} 
```

* * *

**如果您无法对输入流进行排序**，则可以通过构建数据的内存索引来减少磁盘查找。传递大文件，并制作一个`table`：

```
record_hash, offset into file where this record starts 
```

不要将所有记录存储在此表中 - 仅存储每个 Kth 记录。选择一个大的 K，但要足够小以适应内存。

要在大文件中搜索给定的目标哈希，请在内存表中进行二进制搜索，以找到`table`小于目标哈希的最大哈希。说这是`table[h]`。然后，对从 开始`table[h].offset`和结束的段进行 mmap `table[h+1].offset`，并进行最终的二进制搜索。这将大大减少磁盘寻道次数。

如果这还不够，您可以拥有多层索引：

```
 record_hash, offset into index where the next index starts 
```

当然，您需要提前知道有多少层索引。

* * *

最后，**如果您有多余的钱可用**，您总是可以购买超过 23 GB 的 RAM，这又是一个内存限制问题（我刚刚查看了戴尔的网站 - 您购买了一个具有 32 GB RAM 的新低端工作站不到 1,400 澳元）。当然，从磁盘中读取这么多数据需要一段时间，但是一旦它在那里，你就会被设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T04:59:22.210

不要使用`mmap`，而是考虑使用普通的旧`lseek`+ `read`。您可以定义一些辅助函数来读取哈希值或其对应的整数：

```
void read_hash(int line, char *hashbuf) {
    lseek64(fd, ((uint64_t)line) * line_len, SEEK_SET);
    read(fd, hashbuf, 40);
}

int read_int(int line) {
    lseek64(fd, ((uint64_t)line) * line_len + 40, SEEK_SET);
    int ret;
    read(fd, &ret, sizeof(int));
    return ret;
} 
```

然后像往常一样进行二进制搜索。它可能会慢一点，但它不会开始占用您的虚拟内存。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T06:28:39.507

我们不知道背后的故事。所以很难给你明确的建议。你有多少内存？你的硬盘有多复杂？这是一个学习项目吗？谁为你的时间买单？与每小时 50 美元的两天工作相比，32GB 的内存似乎并不昂贵。这需要运行多快？你愿意走出多远？您的解决方案是否需要使用高级操作系统概念？你嫁给了 C 语言的程序吗？让 Postgres 处理这个怎么样？

这是一个低风险的替代方案。此选项在智力上不像其他建议那样吸引人，但有可能为您带来显着收益。将文件分成 3 个 8GB 块或 6 个 4GB 块（取决于您周围的机器，它需要舒适地放入内存中）。在每台机器上运行相同的软件，但在内存中并在每个机器周围放置一个 RPC 存根。为 3 或 6 个工作人员中的每个工作人员编写一个 RPC 调用程序，以确定与给定哈希码关联的整数。

# python - 最终与 atexit

> ID：14866891
> 
> 赞同：1
> 
> 时间：2013-02-14T02:30:31.390
> 
> 标签：python, exception-handling, atexit

我最终不得不编写并支持具有以下高级结构的短 python 包装脚本：

```
try:
    code
    ...
    ...
except:
    raise
finally:
    file_handle.close()
    db_conn.close() 
```

请注意，我在`except`块中所做的只是将异常重新引发**给脚本调用者，而**不是装点门面；在我的特定情况下，这不是问题。这里的想法是清理代码应该始终通过`finally`块执行，无论是否异常。

我最好`atexit`为此目的使用处理程序吗？我可以不用`try`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T04:42:13.753

该`atexit`模块提供了一个简单的接口来注册程序正常关闭时要调用的函数。注册的函数会在解释器正常终止时自动执行。

```
import atexit

def cleanup():
    print 'performimg cleanup'

# multiple functions can be registered here...    
atexit.register(cleanup) 
```

sys 模块还提供了一个钩子 sys.exitfunc，但在那里只能注册一个函数。

`Finally`伴随着`try except`块，功能`finally`也可以用于类似的清理，但是在`finally`块 sys.exc_info 是全无的。

如果 finally 子句引发另一个异常，则保存的异常将被丢弃，但是您可以将 try except 放在注册的函数中`atexit`以处理它们。

另一个`pro-con`是`atexit`函数仅在程序终止时执行，但是您可以`finally`在代码中的任何位置使用（使用 try-except）并执行清理

在您想要从清理内容中引发异常的情况下`atexit`，如果您可以在程序结束时进行清理，那么使用 会很有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:35:38.723

`atexit`在程序终止时被调用，所以这不是你要找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T03:06:33.573

只需使用`contextlib.closing`

```
with closing(resource1) as f1, closing(resource2) as f2:
    f1.something()
    f2.something() 
```

它们将自动关闭。Files 对象可以直接用作上下文，因此您不需要`closing`调用。

如果`close`不是您的资源使用的唯一方法，您可以使用[`contextlib.contextmanager`](http://docs.python.org/2/library/contextlib.html#contextlib.contextmanager)装饰器创建自定义函数。

# ubuntu - 在 Amazon EC2 实例上运行 Rails 3.2 的 Gmail 的 ActionMailer 设置

> ID：14866892
> 
> 赞同：3
> 
> 时间：2013-02-14T02:30:39.390
> 
> 标签：ubuntu, amazon-ec2, ruby-on-rails-3.2, gmail, actionmailer

**背景**

尝试解决在 Amazon EC2 的 Ubuntu 实例上运行的 Rails 3.2.x 中 ActionMailer 的 Gmail 设置问题。该应用程序使用 Nginx + Passenger 运行。

设置如下

文件： **config/environments/production.rb**

```
config.action_mailer.delivery_method = :smtp
      config.action_mailer.smtp_settings = {
         :address => "smtp.gmail.com",
         :port => 587,
         :domain => "gmail.com",
         :authentication => :plain,
         :user_name => "<username>@gmail.com",
         :password => "<secret-word>",
         :enable_starttls_auto => true
 } 
```

电子邮件正在使用 Google 帐户，已通过 Web 登录验证并发送测试消息。

控制器通过以下方法启动发送：

**email_list_controller.rb**

```
def email_test_send
   @email = params[:email]
   @message = Message.find(params[:id])

   @member = Member.find_by_last_name("Bloggs")
   MemberMailer.delay.all_member_email(@member.email, @message)

   redirect_to messages_path, :notice => "Test Email has been sent."
 end 
```

MemberMailer 类定义为：

```
class MemberMailer < ActionMailer::Base
  default from: "blah@gmail.com"
  default cc: "blah1@gmail.com, blah2@gmail.com"
  default content_type: "text/html"

  # send a message to member
  def all_member_email(email, message)

      @message = message
      mail(:to => email, :subject => message.subject)
  end 
```

结尾

系统正在使用 Delayed_Job Gem 进行后台处理，并且无论有无后台作业处理，都已对发送进行了测试。

**结果**

问题是没有消息发送，出现以下情况

1.  **production.log 中的输出（在 DEBUG 处设置 log_level**

    EmailListController#email_test_send 作为 HTML 参数处理：{"utf8"=>"✓", "authenticity_token"=>"D5ZCb+Ha63WbPmd47/1/P3rpFJFiSbnrYya+YaSmBic=", "email"=>"blah@gmail.com", "commit"=>"提交", "id"=>"1", "method"=>"post"}

2.  没有消息被传递

3.  Google 帐户**已发送文件夹**不显示任何出站邮件详细信息。

4.  验证 EC2 上的服务器可以通过**telnet 587连接到 Google SMTP 服务器**

5.  调查了其他 StackOverflow 问题，例如[在 Rails 3 中设置 Gmail 帐户以使用 ActionMailer](https://stackoverflow.com/questions/4929680/setting-up-a-gmail-account-to-work-with-actionmailer-in-rails-3)

6.  delay_jobs 表中的数据库中没有故障。

所以卡在任何其他领域看？我尝试重新启动服务器以确保干净加载配置文件等，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T05:25:49.257

确保在以下位置设置这两个选项`config/environments/production.rb`：

```
config.action_mailer.raise_delivery_errors = true
config.action_mailer.perform_deliveries = true 
```

# php - 将 LOAD DATA INFILE 用于日期格式的多个 SET 字段

> ID：14866893
> 
> 赞同：2
> 
> 时间：2013-02-14T02:30:39.200
> 
> 标签：php, mysql

我可以使用 LOAD DATA INFILE 成功上传我的 csv 文件。我可以跳过所有不需要的数据/列（[手册 13.2.6](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)）

我能够使用 SET 命令来设置日期格式。我的问题是，如果我有多个日期字段，当我有超过 1 个 SET 时，SET 命令的任何变体与上述组合都不想工作。

```
<?php 

if (isset($_POST['load']))
{
include '_inc/include.php'; 

$temp = $_FILES['myfile']['tmp_name'];
$sqlstatement="LOAD DATA LOCAL INFILE '$temp' INTO TABLE 000_1616 FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES (id, @somedate, name, anotherdate, color, 1moredate) SET sdate = IF(LENGTH(@somedate)=7,STR_TO_DATE(@somedate,'%m/%d/%Y'),STR_TO_DATE(@somedate,'%m/%d/%y'))";
mysql_query($sqlstatement) or die(mysql_error()); 

echo "It worked";
echo "<p><a href='upload-display.php'>go to page</a></p>";
} 

?>

<form method="post" action="upload.php" enctype="multipart/form-data">
<input name="myfile" type="file" />
<input name="load" type="submit" value="submit" /></form> 
```

我的 SET 是这样的

```
SET sdate = IF(LENGTH(@somedate)=7,STR_TO_DATE(@somedate,'%m/%d/%Y'),STR_TO_DATE(@somedate,'%m/%d/%y'))"; 
```

或者

```
$sqlstatement="LOAD DATA LOCAL INFILE '$temp' INTO TABLE 000_1616 FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '\"' LINES TERMINATED BY '\r\n' IGNORE 1 LINES (id, @somedate, name, anotherdate, color, 1moredate) SET sdate = IF(LENGTH(@somedate)=7,STR_TO_DATE(@somedate,'%m/%d/%Y'),STR_TO_DATE(@somedate,'%m/%d/%y'))"; 
```

我将@somedate 用于第一个日期字段，这确实是 sdate。只要我不尝试使用 SET 再添加 4 个日期字段，这就会很好地工作。我想添加@anotherdate(anotherdate) 和@1moredate(1moredate) 一定要设置数组吗？我需要在 phpMyADMIN 端的表中做些什么吗？现在它们被格式化为日期，但除了第一个日期之外，它们都返回 000-00-00。

这是SQL：

```
SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `database_track`
--

-- --------------------------------------------------------

--
-- Table structure for table `000_datetest`
--

CREATE TABLE IF NOT EXISTS `000_datetest` (
  `id` int(11) NOT NULL auto_increment,
  `sdate` date default NULL,
  `name` varchar(100) collate utf8_unicode_ci default NULL,
  `anotherdate` date NOT NULL,
  `color` varchar(50) collate utf8_unicode_ci NOT NULL,
  `1moredate` date NOT NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=6 ;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

.csv 示例：

```
+----+---------------+-------------------+---------------------+------------+-------------------+
| id | sdate          | name             | anotherdate     | color        | 1moredate     |
+----+---------------+------------------------+---------------+------------+-------------------+
|  1 | 2011-08-21 | Tom Thumb |    08/16/2010     |   Blue     | 1/5/08            |
+----+---------------+------------------------+---------------+------------+-------------------+
|  1 | 2009-05-12 | Don Duck      |    03/22/2012     |   Yellow   | 9/15/03       |
+----+---------------+------------------------+---------------+------------+-------------------+
1 row in set (0.00 sec) 
```

我希望这会有所帮助，请在下面的评论中查看物理文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T02:14:49.747

To use multiple SET commands with LOAD DATA INFILE you only need to specify SET once and separate each variable definition with commas eg.

```
LOAD DATA INFILE 'my_file' INTO TABLE 'my_table' (column1, @date1, @date2)
SET column2 = STR_TO_DATE(@date1, '%d/%m/%Y %H:%i:%s'),
column3 = STR_TO_DATE(@date2, '%d/%m/%Y %H:%i:%s'); 
```

# objective-c - 将数据从一种方法传递到另一种方法

> ID：14866897
> 
> 赞同：0
> 
> 时间：2013-02-14T02:30:56.220
> 
> 标签：objective-c, uitableview, youtube-api, afnetworking

我使用 AFNetworking 用 youtube 视频填充 UITableView。YouTube API 只允许每个请求最多 50 个结果。所以我必须使用多个 URL 来获得超过 50 个结果。

我创建了一个方法，它将在给定的 URL 上执行 AFNetworkings AFJSONRequestOperation。

我认为 UITable 是在我收到 JSON 数据之前创建的。在我创建方法之前，一切都运行良好。

这是我第一次创建一个方法。在过去的几天里，我一直在尝试在 UITable 上加载 50 多个 youtube 视频。请查看我的代码。

这是我的代码，你也可以从这里下载整个项目

QQViewController.m

```
-(void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    //[super viewDidLoad];

    NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50";

    // I am not sure how i am supposed to populate the uitableview with the second link :(

     NSString *urlAsString2 = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50&start-index=51";

    self.myurl = [NSURL URLWithString:urlAsString];

    [self getJSONfromURL:self.myurl]; 
```

[self.tableView reloadData];

```
}

-(void)viewDidAppear:(BOOL)animated {

        [super viewDidAppear:animated]; 

        self.videoMetaData = [self.myJSON valueForKeyPath:@"items.video"];

        NSLog(@" QQVC video Meta Data %@", self.videoMetaData);

        self.allThumbnails = [self.myJSON valueForKeyPath:@"data.items.video.thumbnail"];

        // The table need to be reloaded or else we will get an empty table.

        [self.tableView reloadData]; // Must Reload

        // NSLog(@" video Meta Data %@", self.videoMetaData);

} 
```

// 这里是方法

```
-(void)getJSONfromURL:(NSURL *)url {

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    // setup AFNetworking stuff
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // call delegate or processing method on success

       // [self.myJSON = (NSArray *)JSON];

        self.myJSON = [JSON valueForKey:@"data"];
        [self.tableView reloadData];
       //NSLog(@" in get JSon method %@", self.myJSON);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

}

- (void)viewDidLoad
{
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T05:09:28.637

getJSONfromURL: 方法中有几个问题。主要问题是您将 self.myJSON 定义为 [JSON valueForKey:@"data"]，但随后将 self.allThumbnails 定义为 [self.myJSON valueForKeyPath:@"data.items.video.thumbnail"] - 您使用再次“数据”，所以 self.thumbnails 为空。这似乎工作正常：

```
-(void)getJSONfromURL:(NSURL *)url {
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    // setup AFNetworking stuff
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.myJSON = [JSON valueForKey:@"data"];
        self.allThumbnails = [self.myJSON valueForKeyPath:@"items.video.thumbnail"];
        self.videoMetaData = [self.myJSON valueForKeyPath:@"items.video"];
        [self.tableView reloadData];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];
} 
```

如果你想从多个 URL 加载日期，你可以这样做。我添加了一个计数器来跟踪 URL 字符串数组的进度。每次下载后都会重新加载该表，因此不必等待整个过程完成后才会显示一些数据。

```
@interface QWViewController ()
@property (strong,nonatomic) NSArray *urlStrings;
@end

@implementation QWViewController {
    int counter;
}

-(void)viewDidLoad {
    [super viewDidLoad];
    counter = 0;
    NSString *urlAsString = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50";
    NSString *urlAsString2 = @"http://gdata.youtube.com/feeds/api/playlists/PL7CF5B0AC3B1EB1D5?v=2&alt=jsonc&max-results=50&start-index=51";
    self.urlStrings = @[urlAsString,urlAsString2];
    self.allThumbnails = [NSMutableArray array];
    self.videoMetaData = [NSMutableArray array];
    [self getJSONFromURL:self.urlStrings[0]];
}

-(void)getJSONFromURL:(NSString *) urlString {
    NSURL *url = [NSURL URLWithString:urlString];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        self.myJSON = [JSON valueForKey:@"data"];
        [self.allThumbnails addObjectsFromArray:[self.myJSON valueForKeyPath:@"items.video.thumbnail"]];
        [self.videoMetaData  addObjectsFromArray:[self.myJSON valueForKeyPath:@"items.video"]];
        [self.tableView reloadData];
        counter += 1;
        if (counter < self.urlStrings.count) [self getJSONFromURL:self.urlStrings[counter]];
    }

    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];
    [operation start];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:12:55.623

将您的 reload tableview 调用移至此处。

```
-(void)getJSONfromURL:(NSURL *)url {

    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    // setup AFNetworking stuff
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
        // call delegate or processing method on success

       // [self.myJSON = (NSArray *)JSON];

        self.myJSON = [JSON valueForKey:@"data"];
        [self.tableView reloadData];
       //NSLog(@" in get JSon method %@", self.myJSON);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
        NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
    }];

    [operation start];

} 
```

# html5-canvas - 如何衡量 CSS 过渡和动画的性能

> ID：14866898
> 
> 赞同：2
> 
> 时间：2013-02-14T02:31:01.313
> 
> 标签：html5-canvas, css-transitions, performance-testing, requestanimationframe, jsperf

我想比较 jQuery 的动画功能和纯 CSS3 过渡的性能。我发现有一个[requestAnimationFrame API](http://ie.microsoft.com/testdrive/Graphics/RequestAnimationFrame/Default.html)来衡量性能，但它似乎只能与 canvas 元素一起使用？

与CSS3和canvas相比，有什么好方法可以测试绝对定位的性能吗？

stats.js[有用](https://github.com/mrdoob/stats.js)且值得信赖吗？你有什么经验？

我构建了这个[jsPerf 测试](http://jsperf.com/css3-translate-vs-jquery-animate)。不幸的是 jQuery.on 方法没有被执行。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:50:41.550

我认为过渡/动画规则应该在 CSS 中，因为它们是一个表示元素，而 JavaScript 是用于行为的。出于这个原因，我会坚持使用 CSS 转换，让 JavaScript 来做表单验证/ajax/等。但这并不意味着 JavaScript 是用于动画的错误技术，Web 的本质是您可以以多种方式使用技术，因为它们之间有很多重叠。

我为您提供了一些我认为您可能会觉得有用的链接；[Paul Irish/Chris Coyier 关于 translate 的讨论，一个关于](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)[CSS 过渡与 Javascript 中](http://vimeo.com/22649023)的动画的视频，以及显示jQuery 和 CSS 之间[帧率比较的链接。](http://css3.bradshawenterprises.com/blog/jquery-vs-css3-transitions/)**您可以在第三个链接中看到，CSS 绝对比 JavaScript 更快、更流畅**；我猜是因为它是硬件加速的。

几个类似结论的stackoverflow问题：[什么更快？CSS3 过渡还是 jQuery 动画？](https://stackoverflow.com/questions/10984771/whats-faster-css3-transitions-or-jquery-animations?lq=1):: [CSS 过渡与 JS 动画包的性能](https://stackoverflow.com/questions/2999749/performance-of-css-transitions-vs-js-animation-packages)

* * *

您是对的，该`requestAnimationFrame`功能仅适用于画布元素。如果您打算将 CSS 转换与画布输出同步，我建议您使用它，因为它是为此而构建的，而不是与`setInterval`.

# linux - Linux cdc_acm 设备 - 发送到设备的意外字符

> ID：14866899
> 
> 赞同：7
> 
> 时间：2013-02-14T02:31:03.057
> 
> 标签：linux, usb, cdc

我在使用 cdc_acm 驱动程序在 USB 端口上发送意外字符时遇到问题。让这一切更令人困惑的是代码在 Ubuntu 12.04（3.2 内核）上运行良好，但在 Centos 6（3.6 内核）上失败（这个问题的主题）

USB 设备是 Bluegiga BLED112 蓝牙智能加密狗。它的嵌入式微控制器将随时在其 USB 接口上出现意外输入时重置。

测试代码打开端口，写入 4 个字节（一个 hello 消息）并期望读取响应。读取永远不会完成，因为意外字符会导致设备重置，从而导致集线器丢弃设备并重新枚举。

为了排除故障，这是我所做的：

*   下载了 cdc_acm 驱动程序的源代码。添加了一堆 printk 调试消息和 stack_dumps 来跟踪正在发生的事情。
*   我对“库存”cdc_acm 进行了 rmmod，并且对我的检测模块进行了 insmod。所有设备枚举都有效，附加了正确的驱动程序等。
*   由于代码在 Ubuntu 12.04/Linux 3.2 上运行，我获取了 3.2 cdc_acm 代码并在 Centos 6/Linux 3.6 平台上编译了该模块。使用 3.2 模块而不是 3.6 模块并没有什么不同。我恢复到 3.6 模块。
*   使用 usbmon 打开调试文件系统并观察 USB 流量。我可以看到 USB 接口上发送了额外的字符。
*   为了观察发生了什么，在 cdc_acm 模块中的 printk 之上，我合并了 usb mon 的输出 (cat /sys/kernel/debug/usb/usbmon/3u | logger) 和测试应用程序的输出 ( scan_example /dev/ttyACM0 | logger -s) 所以我有一个时间相关的调试跟踪流。
*   在 USB 端点上发送的虚假字符是 x5E x40 x5E x40 x5E x40 x5E x40 x41（在 ASCII 中是 ^@^@^@^@A），看起来像是某种探测或试图引起调制解调器的注意这些字符在应用程序的 write() 导致 4 个 hello 字节被发送到端点后立即发送。
*   由于 cdc_acm 设备应该是调制解调器，我试图通过将其添加到 cdc_acm.c 中的 usb_device_id acm_ids[] 来关闭调制解调器控制

    ```
    /* bluegiga BLED112*/
    { USB_DEVICE(0x2458, 0x0001),
    .driver_info = NOT_A_MODEM,
    }, 
    ```

*   重新编译和 insmod'd 和 syslog 显示这已被识别（怪癖是 8），但功能没有变化。

NetowrkManager 和调制解调器管理器都没有运行，但我仍然怀疑某处有某种调制解调器控制功能，我只是不知道在哪里。

这是一个带注释的调试日志（MDV 为我添加到 cdc_acm 的那些 printk 加上前缀）

```
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_bulk
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_done 
```

这是应用程序发送的 4 个字节 00 00 00 01

```
Feb 13 18:14:32 localhost cpcenter: df046a80 3672670191 C Bi:3:006:4 0 4 = 00000001
Feb 13 18:14:32 localhost cpcenter: 1360797272.669690 write: data2: len=0 contains: 
```

...这些额外的字符出乎意料地出现了 5e 40 5e 40 5e 40 ....

```
Feb 13 18:14:32 localhost cpcenter: df046a80 3672670232 S Bi:3:006:4 -115 128 <
Feb 13 18:14:32 localhost cpcenter: f3cc5740 3672670297 S Bo:3:006:4 -115 1 = 5e
Feb 13 18:14:32 localhost cpcenter: df2e1300 3672670332 S Bo:3:006:4 -115 1 = 40
Feb 13 18:14:32 localhost cpcenter: f3cc5740 3672670347 C Bo:3:006:4 0 1 >
Feb 13 18:14:32 localhost cpcenter: f3cc5740 3672670392 S Bo:3:006:4 -115 1 = 5e
Feb 13 18:14:32 localhost cpcenter: df2e1180 3672670426 S Bo:3:006:4 -115 1 = 40
Feb 13 18:14:32 localhost cpcenter: df2e1c00 3672670461 S Bo:3:006:4 -115 1 = 5e
Feb 13 18:14:32 localhost cpcenter: df2e1840 3672670496 S Bo:3:006:4 -115 1 = 40
Feb 13 18:14:32 localhost cpcenter: df2e1300 3672670591 C Bo:3:006:4 0 1 > 
```

在这一点上，我们会自发地断开连接。

```
Feb 13 18:14:32 localhost kernel: usb 3-1: USB disconnect, device number 6
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_bulk
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_done
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm read_bulk_callback
Feb 13 18:14:32 localhost kernel: MDV 1 acm_read_bulk_callback - urb 1, len 0
Feb 13 18:14:32 localhost kernel: MDV 3 acm_read_bulk_callback - non-zero urb status: -71
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_bulk
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_done
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm read_bulk_callback
Feb 13 18:14:32 localhost kernel: MDV 1 acm_read_bulk_callback - urb 1, len 0
Feb 13 18:14:32 localhost kernel: MDV 3 acm_read_bulk_callback - non-zero urb status: -71
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_bulk
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_done
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm read_bulk_callback
Feb 13 18:14:32 localhost kernel: MDV 1 acm_read_bulk_callback - urb 2, len 0
Feb 13 18:14:32 localhost cpcenter: df2e1d80 3672670629 S Bo:3:006:4 -115 1 = 5e
Feb 13 18:14:32 localhost kernel: MDV 3 acm_read_bulk_callback - non-zero urb status: -71
Feb 13 18:14:32 localhost cpcenter: df2e1300 3672670677 S Bo:3:006:4 -115 1 = 41
Feb 13 18:14:32 localhost cpcenter: f3cc5740 3672670802 C Bo:3:006:4 0 1 >
Feb 13 18:14:32 localhost cpcenter: df2e1180 3672671019 C Bo:3:006:4 0 1 >
Feb 13 18:14:32 localhost cpcenter: df2e1c00 3672671237 C Bo:3:006:4 0 1 >
Feb 13 18:14:32 localhost cpcenter: dfbf8c00 3672673193 C Ii:3:001:1 0:2048 1 = 02
Feb 13 18:14:32 localhost cpcenter: dfbf8c00 3672673207 S Ii:3:001:1 -115:2048 4 <
Feb 13 18:14:32 localhost cpcenter: f3c26c00 3672673221 S Ci:3:001:0 s a3 00 0000 0001 0004 4 <
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_disconnect
Feb 13 18:14:32 localhost kernel: Pid: 29, comm: khubd Tainted: G           O 3.5.3-1.el6.elrepo.i686 #1 
```

断开连接时的堆栈跟踪

```
Feb 13 18:14:32 localhost kernel: Call Trace:
Feb 13 18:14:32 localhost kernel: [<f82dabc5>] acm_disconnect+0x35/0x1f0 [cdc_acm]
Feb 13 18:14:32 localhost kernel: [<c13835db>] usb_unbind_interface+0x4b/0x180
Feb 13 18:14:32 localhost cpcenter: f3c26c00 3672673239 C Ci:3:001:0 0 4 = 00010100
Feb 13 18:14:32 localhost kernel: [<c1318bfb>] __device_release_driver+0x5b/0xb0
Feb 13 18:14:32 localhost kernel: [<c1318d05>] device_release_driver+0x25/0x40
Feb 13 18:14:32 localhost kernel: [<c1317f0c>] bus_remove_device+0xcc/0x130
Feb 13 18:14:32 localhost kernel: [<c131612f>] ? device_remove_attrs+0x2f/0x90
Feb 13 18:14:32 localhost kernel: [<c1316275>] device_del+0xe5/0x180
Feb 13 18:14:32 localhost kernel: [<c1380326>] usb_disable_device+0x96/0x240    Feb 13 18:14:32 localhost kernel: [<c1379f91>] usb_disconnect+0x91/0x130
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_bulk
Feb 13 18:14:32 localhost kernel: [<c137a2c0>] hub_port_connect_change+0xb0/0xa60
Feb 13 18:14:32 localhost kernel: [<c1380f4e>] ? usb_control_msg+0xce/0xe0
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm acm_write_done
Feb 13 18:14:32 localhost kernel: [<c137b296>] hub_events+0x536/0x810
Feb 13 18:14:32 localhost cpcenter: f3c26c00 3672673243 S Co:3:001:0 s 23 01 0010 0001 0000 0
Feb 13 18:14:32 localhost cpcenter: f3c26c00 3672673250 C Co:3:001:0 0 0
Feb 13 18:14:32 localhost kernel: [<c1065bdf>] ? finish_wait+0x4f/0x70
Feb 13 18:14:32 localhost kernel: [<c137b5aa>] hub_thread+0x3a/0x1d0
Feb 13 18:14:32 localhost cpcenter: df2e1840 3672673260 C Bo:3:006:4 -71 0
Feb 13 18:14:32 localhost kernel: [<c1065a70>] ? wake_up_bit+0x30/0x30
Feb 13 18:14:32 localhost kernel: [<c137b570>] ? hub_events+0x810/0x810
Feb 13 18:14:32 localhost kernel: [<c106564c>] kthread+0x7c/0x90
Feb 13 18:14:32 localhost cpcenter: f3c16c80 3672673292 C Bi:3:006:4 -71 0
Feb 13 18:14:32 localhost cpcenter: df2e1d80 3672673453 C Bo:3:006:4 -71 0
Feb 13 18:14:32 localhost cpcenter: f3c16d40 3672673553 C Bi:3:006:4 -71 0
Feb 13 18:14:32 localhost kernel: [<c10655d0>] ? kthread_freezable_should_stop+0x60/0x60
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm read_bulk_callback
Feb 13 18:14:32 localhost kernel: [<c14dedbe>] kernel_thread_helper+0x6/0x10
Feb 13 18:14:32 localhost kernel: MDV 1 acm_read_bulk_callback - urb 3, len 0
Feb 13 18:14:32 localhost kernel: MDV:cdc-acm stop_data_traffic
Feb 13 18:14:32 localhost cpcenter: f3d19500 3672674474 C Ii:3:006:2 -108:64 0
Feb 13 18:14:32 localhost kernel: MDV 2 acm_read_bulk_callback - disconnected
Feb 13 18:14:32 localhost cpcenter: df2e1300 3672674636 C Bo:3:006:4 -71 0
Feb 13 18:14:32 localhost cpcenter: f3c16140 3672674753 C Bi:3:006:4 -71 0 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-31T19:32:01.840

发送到您的设备的`^@^@^@^A`字符串是内核中的终端子系统为响应来自您的设备的传入字节而执行的回显结果。

日志中的这一行：

```
Feb 13 18:14:32 localhost cpcenter: df046a80 3672670191 C Bi:3:006:4 0 4 = 00000001 
```

实际上意味着您的设备向计算机发送了 4 个字节（`Bi`表示“批量端点，输入”）。默认情况下，所有终端设备都启用了回显，因此内核将这些字节回显给设备，但由于这些字节在控制字符范围内，它们以转义形式回显：`^@^@^@^A`. 这些回显的字节也在单独的 1 字节写入调用中发送，这对应于后续日志中的 1 字节批量输出 URB。

您需要修复您的测试程序，以便在尝试与您的设备通信之前关闭回显和其他 tty 处理。如果您的测试程序是 C/C++ 语言，则该`cfmakeraw()`函数可用于此目的。

该程序可能在 Ubuntu 中运行，只是因为其他一些程序碰巧在您的测试程序之前接触了端口并更改端口设置以关闭回显。

# javascript - 谷歌地图 - 特定日期和时间的地图

> ID：14866901
> 
> 赞同：6
> 
> 时间：2013-02-14T02:31:17.280
> 
> 标签：javascript, google-maps

请在您投反对票之前考虑这个问题，因为我无法概念化更好的方式或地点来询问它：

我已经对谷歌地图进行了充分的实验，以了解整体结构。发出请求、创建自定义标志等。这一切都非常简单，并且与 jCharts 库非常相似。

现在，谷歌显然有一些不可用的东西：过去某个日期的地图。我不需要一整天的迭代，但即使每 6 个月左右也会很庞大。

这可能吗？有没有其他人尝试过这个？

是在本地保存结果并重新发明谷歌地图轮的唯一选择吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T22:35:20.117

谷歌地球有这个功能：[http ://www.google.com/earth/explore/showcase/historical.html](http://www.google.com/earth/explore/showcase/historical.html)

> 使用 Google 地球中的历史图像回到过去。查看您的社区、家乡和其他熟悉的地方，了解它们随时间的变化。

**至于谷歌地图：**

*   建议使用旧 URL 获取旧卫星图像[的讨论。](https://groups.google.com/forum/?fromgroups=#!topic/google-maps-api/fV-CZjSDhA0)

*   [如果旧图像可用，此示例](http://markjeronimus.patrickbregman.eu/subpages/maps/bigmap.html)应该会提取旧图像。不适合我。

*   [在 Google 群组上进行的搜索](https://groups.google.com/group/google-maps-api/search?group=google-maps-api&q=old%20satellite&pli=1)可能会有所帮助，但我看到很多关于它的帖子尚未正式发布。

    > 没有官方服务。这些帖子暗示了在某些情况下可以返回一小段时间的方法。
    > [http://groups.google.com/group/google-maps-api/search?group=google-maps-api&q=old+satellite](http://groups.google.com/group/google-maps-api/search?group=google-maps-api&q=old+satellite) 注意关于查看它是否在条款范围内的评论 - 可能不在 - 以及风险（暂时）被阻止。

# ruby-on-rails - 我应该象征钥匙吗？

> ID：14866908
> 
> 赞同：2
> 
> 时间：2013-02-14T02:33:00.073
> 
> 标签：ruby-on-rails, rails-activerecord

1）我在 HAML 中为数据库抓取一些记录以显示，每行的属性方法返回一个哈希。哈希的键是字符串。我应该把那些钥匙变成符号吗？我不确定打电话`symbolize_keys`是否值得。IE，

```
%td #{app['comment']} 
```

或者

```
%td #{app[:comment] 
```

2）我试图符号化我返回的哈希数组，但它不起作用：

```
rows = Comment.all(:order => 'created DESC')
result = rows.each_with_object([]) do |row, comments|
   comments << row.attributes.symbolize_keys
end 
```

它实际上不是将符号化哈希推入评论数组吗？我也试过`symbolize_keys!`了，但没有帮助。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:09:15.813

由于您使用的是 Rails，[`HashWithIndifferentAccess`](http://api.rubyonrails.org/classes/ActiveSupport/HashWithIndifferentAccess.html)因此您可以通过允许两者轻松绕过“字符串或符号”问题：

```
h = HashWithIndifferentAccess.new(some_model.attributes)
puts h['id'] # Gives you some_model.id
puts h[:id]  # Also gives you some_model.id 
```

你的`each_with_object`方法：

```
result = rows.each_with_object([]) do |row, comments|
  comments << row.attributes.symbolize_keys
end 
```

应该可以正常工作，所以我认为您的问题在于其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:15:46.777

你有理由使用`ActiveRecord::Base#attributes[your_attribute]`而不是`ActiveRecord::Base#your_attribute`直接使用吗？你没有说原因。

`ActiveRecord::Base`自动为您的数据库字段设置访问器：

```
object = Model.new
object.your_column = "foo"  # Writer
object.your_column          # Reader 
```

您应该能够在您的视图中使用阅读器，而不是通过`ActiveRecord::Base#attributes`.

**更新：**

我不确定这是否让你感到困惑。

`Comment.find(:all)`已经在您的数据库中检索这些行的*所有*列值并将它们存储在您的 Comment 对象中（我们在`@comments`下面分配）。这些值已经存储在您的 Comment 对象中，因此您可以随意在视图中使用它们。

在您的控制器中，如果您有：

```
def index
  @comments = Commend.find(:all)  # Fetch columns and rows.
end 
```

您可以在 HAML 视图中执行此操作：

```
- @comments.each do |comment|     # Iterate through array of Comment objects
  %tr
    %td= comment.comment          # Use value for "comment" column. 
```

# java - Java - 将转义字符串转换为字符

> ID：14866909
> 
> 赞同：2
> 
> 时间：2013-02-14T02:33:02.500
> 
> 标签：java, string, unicode, char

编辑：错误！下面的代码有效，在我的例子中，字符串被读取为“\n”，这给了我 2 个字符而不是 1 个字符。我很傻。

我正在尝试将孤立的单个字符从字符串转换为字符。我无法将转义字符转换为单个字符，因为它将 \ 视为单独的字符。

```
String str = "\n"; 
char charVal = str.charAt(0); // Gives charVal as \ 
```

是否有一个函数可以将转义序列解释为单个字符而不是单独的字符？

我试图在没有 Apache commons 包的情况下做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:38:15.090

**对更新问题的回答：**您的结果不知何故变得混乱。`str`只有一个字符，所以`charVal`那个字符，换行符。检查输出，如果仍然不是您所期望的，请给我们一个[SSCCE 来](http://sscce.org)证明您的问题。

**原始答案：** `temp`不是`str`，而且`str.charAt(0)`绝对不会给出`\`结果。`str`是一个单字符的字符串，所以你只会得到一个字符，这是一个换行符。很可能，您的代码中有更进一步的内容，例如：

```
String temp = "\\n"; 
```

在这种情况下，您有一个由两个字符组成的字符串，其中第一个是反斜杠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T02:36:18.757

无法重现

```
 String str = "\n";
    char charVal = str.charAt(0);

    System.out.println(charVal); 
```

给出换行符

# ruby - 如何在 Ruby 中实现选项哈希？

> ID：14866910
> 
> 赞同：4
> 
> 时间：2013-02-14T02:33:03.447
> 
> 标签：ruby, hash, options

如何实现选项哈希？包含选项哈希的类的结构如何？假设我有一个人班。我想实现一个方法，例如 my_age ，当被调用时，它会使用选项哈希告诉我我的年龄。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T06:59:16.290

你可以这样做：

```
class Person

  def initialize(opts = {})
    @options = opts
  end

  def my_age
    return @options[:age] if @options.has_key?(:age)
  end

end 
```

现在你可以像这样呼唤这个时代

```
p1 = Person.new(:age => 24)<br/>
p2 = Person.new

p1.my_age # => 24<br/>
p2.my_age # => nil 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T02:44:07.993

```
class Person
  def birth_date
    Time.parse('1776-07-04')
  end

  def my_age(opts=nil)
    opts = {
      as_of_date: Time.now, 
      birth_date: birth_date,
      unit: :year
    }.merge(opts || {})
    (opts[:as_of_date] - opts[:birth_date]) / 1.send(opts[:unit])
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-15T07:45:48.417

值得一提的是，Ruby 2.1 增加了传递不需要按特定顺序排列的关键字参数的功能，您可以将它们设为必需或具有默认值。

放弃选项散列减少了提取散列选项的样板代码。不必要的样板代码增加了拼写错误和错误的机会。

同样使用在方法签名本身中定义的关键字参数，您可以立即发现参数的名称，而无需阅读方法的主体。

必需的参数后跟一个冒号，而具有默认值的参数按照您的期望在签名中传递。

例如：

```
class Person
  attr_accessor(:first_name, :last_name, :date_of_birth)

  def initialize(first_name:, last_name:, date_of_birth: Time.now)   
    self.first_name = first_name
    self.last_name = last_name
    self.date_of_birth = date_of_birth
  end

  def my_age(as_of_date: Time.now, unit: :year)
    (as_of_date - date_of_birth) / 1.send(unit)
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-23T05:08:24.140

在 Ruby 2.x 中，您可以使用`**`运算符：

```
class Some
  def initialize(**options)
    @options = options
  end

  def it_is?
    return @options[:body] if @options.has_key?(:body)
  end
end 
```

# azure - nservicebus 和 azure sdk 2

> ID：14866917
> 
> 赞同：1
> 
> 时间：2013-02-14T02:33:39.433
> 
> 标签：azure, nservicebus

似乎以 azure worker 角色托管的 nservicebus 不适用于 azure SDK 1.7 版以上的任何东西。

有没有办法让工作人员角色与 azure SDK 2 一起工作？如果没有，有谁知道 nservicebus 何时会支持更新的 SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:17:18.660

下一个 NServiceBus 主要版本 v4 将支持 Azure SDK 版本 1.8

# javascript - 如何在javascript中更改确认框的字体颜色？

> ID：14866924
> 
> 赞同：0
> 
> 时间：2013-02-14T02:35:00.493
> 
> 标签：javascript

我需要将确认框中的消息样式更改为红色字体颜色或粗体字体粗细。请帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:37:55.230

你不能这样做。

但是在您的问题上使用 jquery Library 和 jquery UI Dialog 可能很有用。

请参阅此链接：http: [//jqueryui.com/dialog/](http://jqueryui.com/dialog/)

最好的祝福

# jquery - jquery点击循环

> ID：14866928
> 
> 赞同：1
> 
> 时间：2013-02-14T02:35:16.547
> 
> 标签：jquery, slide

我想知道是否有人可以帮助我使用 jquery 循环或脚本。当一个按钮被点击时，我想让一个 div 动画在屏幕上滑动，当再次点击另一个 div 时，另一个 div 会向下滑动。当再次单击按钮时，另一个 div 依此类推。

这是到目前为止我完成的 html 标记

```
<div class="page-container">

<h2 class="gallery-heading"> WAIKANAE BEACH HOUSE </h2>
    <img src="images/waikanae/next button.png" id="gallery-next"/>

    <div id="slider">

      <section class="horizontal-gallery">
        <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-horizontal"/>
        <p class="horizontal-gallery-text">Test text.</p>
      </section>

      <section class="vertical-gallery">
        <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-horizontal"/>
        <p class="horizontal-gallery-text">Test text.</p>
      </section>

      <section class="horizontal-gallery">
        <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-horizontal"/>
        <p class="horizontal-gallery-text">Test text.</p>
      </section>

    </div> 

$('#gallery-next').click(function() {
   $('.horizontal-gallery').hide('slide',{direction:'left'},1000);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:39:17.947

根据您的描述，您将需要：

```
$('div selector').hide('slide',{direction:'right'},1000); 
```

并且：

```
$('button').click(function() {
   //sliding code
}); 
```

请参阅：[http](http://docs.jquery.com/UI/Effects/Slide) ://docs.jquery.com/UI/Effects/Slide 和：[http://api.jquery.com/click/](http://api.jquery.com/click/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:26:30.450

这可能不是*您*想要的，但希望您能找到一些有用的代码想法。采取有效的方法，然后发布另一个问题以微调您的解决方案。它看起来有点乱，因为我在页面中包含了 javascript 和样式表，而不是使它们成为单独的文档。

请注意， hide('slide') 方法来自 jQueryUI，您还必须包含该库。

另请注意，根据另一位不幸删除帖子的发布者的建议，ID 已添加到每个部分元素中。

这是一个完整的示例（只需确保您的图像存在。它们可以是不同的图像）

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script type="text/javascript">
        var totalslides = 3;
        var slidenum = 0;
        var slidenext = 0;
        var slideType = '';
        $(function(){
            $('#gallery-next').data('counter',1);
            $('#gallery-next').click(function() {
               slidenum = parseInt($('#gallery-next').data('counter'));
               slidenext = slidenum+1
               slideType = $('#'+slidenum+'-slide').attr('class')
               slideType = slideType.split('-')[0]
               if (slideType=='horizontal') slideType='up';
               else slideType = 'left';
//alert('Next slideType is: ' + slideType)
                //hide(slide) is a jQueryUI function, so ensure you include that lib
               $('#'+slidenum+'-slide').hide('slide',{direction:slideType},500);
               $('#'+slidenext+'-slide').fadeIn(1000);
               slidenum = slidenum % totalslides + 1;
               $('#gallery-next').data('counter',slidenum);
            });
        });
    </script>
    <style type="text/css" >
        .init-hidden {display:none;}
    </style>
</head>
<body>
<div class="page-container">

    <h2 class="gallery-heading"> WAIKANAE BEACH HOUSE </h2>
    <img src="images/waikanae/next button.png" id="gallery-next"/>

    <div id="slider">
        <section id="1-slide" class="horizontal-gallery">
            <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-horizontal"/>
            <p class="horizontal-gallery-text">Test text.</p>
        </section>

        <section id="2-slide" class="vertical-gallery init-hidden">
            <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-vertical"/>
            <p class="vertical-gallery-text">Test text.</p>
        </section>

        <section id="3-slide" class="horizontal-gallery init-hidden">
            <img src="images/waikanae/crafar_h1.jpg" class="waikanae-gallery-horizontal"/>
            <p class="horizontal-gallery-text">Test-text.</p>
        </section>
    </div> <!-- endDiv slider -->
</div> <!-- endDiv page-container -->
</body>
</html> 
```

# asp.net - 对用户隐藏站点地图节点

> ID：14866937
> 
> 赞同：-1
> 
> 时间：2013-02-14T02:36:36.400
> 
> 标签：asp.net, vb.net

我想做sitemapnode，管理员可以查看所有节点，但用户可以查看某些节点。问题是我如何向用户隐藏某些节点。我用 VB.net 和 asp

```
 <siteMapNode url="Form\Report.aspx" title="Report"  description="" roles="admin" >
    </siteMapNode> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:45:27.750

你有登录页面吗？如果您设置了登录页面，则可以为用户创建规则。如果用户登录网络，则拒绝用户对这些页面的权限。此外，如果您使用菜单显示站点地图节点，则打开菜单任务将视图更改为动态。

希望它是有帮助的。

# laravel - 使用 Laravel 4 的“bench”命令创建的 Composer 包文件夹结构

> ID：14866940
> 
> 赞同：0
> 
> 时间：2013-02-14T02:37:24.657
> 
> 标签：laravel, composer-php, laravel-4

因此，我使用 Laravel 4 创建了一个作曲家包`php artisan bench --composer`

这一切都很好，

但是，我查看了`Basset`Packages vendor 文件夹，发现我们的结构略有不同。

```
Basset:
/vendor/jasonlewis/basset/src/Basset/BassetServiceProvider.php
Mine:
/vendor/hailwood/smartless4laravel/src/Hailwood/Smartless4laravel/Smartless4laravelServiceProvider.php 
```

所以基本上我们在这里拥有的是

```
<v> = vendor Lower case,  <p> = package lower case, 
<V> = vendor Upper cased  <P> = package upper cased

Basset:
/<v>/<p>/src/<P>/
Mine:
/<v>/<p>/src/<V>/<P>/ 
```

那么，为什么我的包再次嵌套在 vendor 下，或者 Basset 也应该再次列在 vendor 下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T15:26:09.957

我相信约定是 vendor/package/src/namespace。如果您的命名空间包含供应商名称，您可能应该保持原样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:48:47.147

基本上它归结为你工作台创建一个供应商名称和包名称文件夹，其中在 basset 包中只有包名称文件夹。Basset 包可能不是使用工作台创建的，因为我认为它的使用时间比工作台长。（框架的新成员）。

# c# - 当应用程序作为站点下的虚拟目录托管时，ASP.NET MVC ReturnUrl 混淆

> ID：14866941
> 
> 赞同：1
> 
> 时间：2013-02-14T02:37:38.850
> 
> 标签：c#, asp.net-mvc-4, web-config, forms-authentication, returnurl

我希望有人可以阐明如何解决我遇到的 ReturnUrl 问题。我有一个在默认网站下运行的 ASP.NET MVC 4 Web 应用程序，一切看起来都很好...... ReturnUrl 指向基本控制器上的搜索操作：

```
http://localhost/Login/Index?ReturnUrl=%2fBasic%2fSearch 
```

如果我将此应用程序移到另一台机器上并将其部署在虚拟目录中，我会得到一个不同的 ReturnUrl：

```
http://localhost2/virtualdirectory/Login/Index?ReturnUrl=%2fvirtualdirectory%2fBasic%2fSearch 
```

现在“虚拟目录”显示在 ReturnUrl 中，当然它没有正确路由。

在我的 web.config 中，我配置了以下内容：

```
<authentication mode="Forms">
  <forms loginUrl="~/Login/Index" timeout="2880" />
</authentication> 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T16:04:22.653

这取决于您如何进行重定向。如果您像这样重定向，它应该可以工作：

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
   //... omitted some preliminary validation ...
   return Redirect(returnUrl);
} 
```

我们正在使用此设置，它适用于虚拟目录。

# jsp - JSP不平衡自定义标签

> ID：14866944
> 
> 赞同：1
> 
> 时间：2013-02-14T02:37:57.757
> 
> 标签：jsp, custom-tags

我试图有条件地显示一个自定义标签，如下所示：

```
<c:if test="${condition}">
  <my:mytag>
</c:if>

My content here

<c:if test="${condition}">
  </my:mytag>
</c:if> 
```

如果条件为真，那么我希望内容在 mytag 中。否则，我希望内容简单明了。假设内容可能很复杂并包含其他标签。

不幸的是，当我尝试运行此代码时，我收到一条错误消息：'结束标签“</my:mytag”不平衡'。

是否可以使用 JSP 实现我想要实现的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:44:02.237

不，它仍然需要是有效的 XML。

整个东西需要被一个`<c:if>`块包裹起来。

# hadoop - Hadoop：AWS EMR 作业中的输入和输出路径

> ID：14866945
> 
> 赞同：5
> 
> 时间：2013-02-14T02:37:59.493
> 
> 标签：hadoop, amazon-web-services, amazon-s3, amazon-emr, emr

我正在尝试在 Amazon Elastic Mapreduce 中运行 Hadoop 作业。我的数据和 jar 位于 aws s3 中。当我设置工作流程时，我将 JAR 参数传递为

```
s3n://my-hadoop/input s3n://my-hadoop/output 
```

下面是我的hadoop主要功能

```
public static void main(String[] args) throws Exception
    {
        Configuration conf = new Configuration();
        Job job = new Job(conf, "MyMR");
        job.setJarByClass(MyMR.class);
        job.setMapperClass(MyMapper.class);
        job.setReducerClass(CountryReducer.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(Text.class);
        job.setInputFormatClass(TextInputFormat.class);
        FileInputFormat.addInputPath(job, new Path(args[0]));
        FileOutputFormat.setOutputPath(job, new Path(args[1]));
        System.exit(job.waitForCompletion(true) ? 0 : 1);
    } 
```

但是，我的工作流程因以下登录 stderr 而失败

```
Exception in thread "main" java.lang.ClassNotFoundException: s3n://my-hadoop/input
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:180) 
```

那么如何在 aws emr 中指定我的输入和输出路径呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:51:22.587

所以基本上这是在尝试创建可执行 jar 时*未定义主类的经典错误。*当你不让 jar 知道主类的知识时，第一个参数被认为是主类，因此这里的错误。

因此，请确保在创建可执行 jar 时，在清单中指定主类。

或者

分别使用 args[1] 和 args[2] 进行输入和输出，并执行 hadoop 步骤，如下所示：

```
ruby elastic-mapreduce -j $jobflow --jar s3:/my-jar-location/myjar.jar --arg com.somecompany.MyMainClass --arg s3:/input --arg s3:/output 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-24T22:30:03.837

我遇到了同样的问题。这是因为您在提交自定义 jar 文件时需要 3 个参数（除了 2 个）。第一个是您的 Main 类名，第二个是输入文件的输入路径，第三个是输出文件夹的输出路径。无论如何，我想你可能已经解决了这个问题。

# sql - 在 SQL 中列出的文本

> ID：14866947
> 
> 赞同：4
> 
> 时间：2013-02-14T02:38:05.120
> 
> 标签：sql, postgresql, pattern-matching

有什么方法可以将逗号分隔的文本值转换为列表，以便我可以在 SQL 中将其与“IN”一起使用？我为此使用了 PostgreSQL。

前任。：

```
select location from tbl where 
location in (replace(replace(replace('[Location].[SG],[Location].[PH]', ',[Location].[', ','''), '[Location].[', ''''), ']','''')) 
```

这个查询：

```
select (replace(replace(replace('[Location].[SG],[Location].[PH]', ',[Location].[', ','''), '[Location].[', ''''), ']','''')) 
```

产生'SG'，'PH'

我想产生这个查询：

```
select location from tbl where location in ('SG','PH') 
```

当我执行第一个查询时没有返回任何内容。该表已填满位置值“SG”和“PH”。

谁能在不使用 PL/pgSQL 的情况下帮助我完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T04:03:24.350

所以你面临着一个*友好*且*易于使用*的工具，它不会让你完成任何工作，我感受到你的痛苦。

对您所结合的内容进行轻微修改[`string_to_array`](http://www.postgresql.org/docs/current/static/functions-array.html#ARRAY-FUNCTIONS-TABLE)应该能够完成工作。

首先，我们将用`replace`更好的调用替换您的嵌套`replace`调用：

```
=> select replace(replace(replace('[Location].[SG],[Location].[PH]', '[Location].', ''), '[', ''), ']', '');
 replace 
---------
 SG,PH 
```

所以我们`[Location].`去掉噪音，然后去掉剩下的括号，得到一个逗号分隔的两个字符的位置代码列表。还有其他方法可以`SG,PH`使用 PostgreSQL 的其他[字符串和正则表达式](http://www.postgresql.org/docs/current/interactive/functions-string.html)函数，但`replace(replace(replace(...`对于具有您特定结构的字符串也可以。

然后我们可以使用以下方法将该 CSV 拆分为一个数组`string_to_array`：

```
=> select string_to_array(replace(replace(replace('[Location].[SG],[Location].[PH]', '[Location].', ''), '[', ''), ']', ''), ',');
 string_to_array 
-----------------
 {SG,PH} 
```

给我们一系列位置代码。现在我们有了一个数组，我们可以使用[`= ANY`](http://www.postgresql.org/docs/current/interactive/functions-comparisons.html#AEN18025)而不是`IN`查看数组内部：

```
=> select 'SG' = any (string_to_array(replace(replace(replace('[Location].[SG],[Location].[PH]', '[Location].', ''), '[', ''), ']', ''), ','));
 ?column? 
----------
 t 
```

这`t`是一个布尔值 TRUE BTW；如果你说`'XX' = any (...)`你会得到一个`f`（即 FALSE）而不是。

将所有这些放在一起可以为您提供如下结构的最终查询：

```
select location
from tbl
where location = any (string_to_array(...)) 
```

您可以自己填写`...`嵌套的`replace`讨厌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:11:40.797

假设我们正在处理表单中以逗号分隔的元素列表`[Location].[XX]`，我希望这个结构表现最好：

```
SELECT location
FROM   tbl
JOIN  (
    SELECT substring(unnest(string_to_array(
             '[Location].[SG],[Location].[PH]'::text, ',')), 13, 2) AS location
    ) t USING (location) 
```

### 一步步

*   将逗号分隔的列表转换为数组，并将其拆分为带有[`unnest(string_to_array(...))`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE).
    您可以对以下内容执行相同操作：[`regexp_split_to_table()`](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)。稍短，较长的字符串较慢。

*   用提取`XX`部分`substring()`。非常简单和快速。

*   `JOIN`to`tbl`而不是`IN`表达式。应该更快。
    我分配列别名`location`以启用等值连接`USING (..)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T02:50:47.140

直接使用（'某物'）中的位置有效

我创建了一个在列`IN`上使用子句的小提琴`VARCHAR`

[http://sqlfiddle.com/#!12/cdf915/1](http://sqlfiddle.com/#!12/cdf915/1)

# php - Drupal 7 - 如何向网络表单添加另一个按钮？

> ID：14866951
> 
> 赞同：1
> 
> 时间：2013-02-14T02:38:28.790
> 
> 标签：php, drupal, button, add, drupal-webform

我想知道，除了提交按钮之外，有谁知道如何在 Drupal 7 中向网络表单添加另一个按钮？我尝试通过谷歌浏览并在 Drupal 论坛上提出这个问题，但没有运气。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:12:55.187

Webform 是一个 drupal 表单，您可以使用[hook_form_alter](http://api.drupal.org/hook_form_alter)：假设您有一个名为**mymodule**的自定义模块，并且您的 webform id 是“ **webform_client_form_XXXXX** ”。然后使用下面的示例代码。

```
/**
 * Implements hook_form_alter.
 */
function mymodule_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'webform_client_form_XXXXX':
      $form['actions']['custom_submit']  = array(
        '#type' => 'submit',
        '#value' => t('Custom Button'),
        '#submit' => array('mymodule_custom_submit'),
      );
      $form['#validate'][] = 'mymodule_custom_validate';
      break;
  }
}
/**
 * Custom validation handler for your webform.
 */
function mymodule_custom_validate($form, &$form_state) {
  // your validation code
}
/**
 * Custom submit handler for your form
 */
function mymodule_custom_submit($form, &$form_state) {
  // your submit handler code
} 
```

* * *

更新：

您必须将上述代码中的**mymodule**实例替换为yoru **modules 的 name**。我也稍微修改了 hook_form_alter。我建议您将提交按钮移到 下`$form['actions']`，这样它就会出现在当前提交按钮旁边。

## 清除缓存：

访问`/admin/config/development/performance`并单击**清除所有缓存**按钮。

## 要查找 weform 表单 ID：

[本](http://w3courses.com/content/find-formid-webforms-use-captcha-module-drupal)教程在网上讨论如何找到表单 id。请注意，表单标签中使用的 id 将带有“-”（连字符），必须将其替换为“_”（下划线）才能获得表单 ID。

另一种方法是打印 hook_form_alter 中的 $form_id 变量（我们上面定义的函数）并访问 webform 页面。如果该页面上没有其他表单，则打印的 id 将是与 webform 对应的那个。如果启用[devel](http://drupal.org/project/devel)模块，则使用优秀的 krumo 库更容易显示调试信息。

```
/**
 * Implements hook_form_alter.
 */
function mymodule_form_alter(&$form, &$form_state, $form_id) {
  // Below function would print out the form id in message area if devel module
  // is enabled on the site.
  dpm($form_id);
  switch ($form_id) { 
```

之后删除`dpm( $form_id );`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-19T09:51:50.637

知道 webform id 比上述方法更容易。您只需转到：content->webforms 并将鼠标光标放在属于您想要 id 的 webform 的编辑选项上。在导航器屏幕下方，将出现格式 node/id 的原始路径。该节点号是 webform_client_form_XXX 中的 XXX。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T04:59:12.117

您可以在网络表单中使用类型标记。为标记设置主题，因为它看起来像与提交按钮相同的按钮。

并为此编写JS。例如，您想提供重置按钮，然后 onclick 事件应该清空这些字段中的值。尝试这个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T04:59:40.010

首先在 webform 中为按钮创建标记，然后使用 java 脚本单击此按钮，它会根据您的要求处理请求。

# iphone - 我想生成两个 4 行和 2 行的可扩展部分。以下代码生成两个可扩展部分，每个 4 行

> ID：14866955
> 
> 赞同：0
> 
> 时间：2013-02-14T02:38:49.790
> 
> 标签：iphone, ios, objective-c

在下面的示例中，第 1 节和第 2 节可扩展。但是每个可扩展节都有 4 个单元格。我需要一种方法来适应第 1 节中的 4 行和第 2 节中的 2 行。第一种方法指定要扩展的行，其余的是tableview 委托和数据源方法

```
 - (BOOL)tableView:(UITableView *)tableView canCollapseSection:(NSInteger)section
    {
        if (section>0 && section<3) return YES;

        return NO;
    }

    - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
    {
        // Return the number of sections.
        return 4;
    }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    if ([self tableView:tableView canCollapseSection:section])
    {

        if ([expandedSections containsIndex:section])
        {

            NSLog(@"section number:%d",section);
            return 3; // return rows when expanded

        }
            return 1; // only top row showing

    }

    // Return the number of rows in the section.
    return 1;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            // first row
            cell.textLabel.text = @"Expandable"; // only top row showing

            if ([expandedSections containsIndex:indexPath.section])
            {
            //some code
            }
            else
            {
                //some code
            }
        }
        else
        {
            // all other rows
            cell.textLabel.text = @"Some Detail";
            cell.accessoryView = nil;
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
        }
    }
    else
    {
        cell.accessoryView = nil;
        cell.textLabel.text = @"Normal Cell";

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T02:42:38.383

在 numberOfRowsInSection 方法中返回正确的行数

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([self tableView:tableView canCollapseSection:section])
    {
        if ([expandedSections containsIndex:section])
        {
            NSLog(@"section number:%d",section);
            // -------------- UPDATE HERE --------------
            return (indexPath.section == 1 ? 4 : 2); // return rows when expanded
        }
        return 1; // only top row showing
    }
    // Return the number of rows in the section.
    return 1;
} 
```

# jquery - 在 phonegap 中，如果我来自表单点击，我无法从数据库中选择

> ID：14866957
> 
> 赞同：0
> 
> 时间：2013-02-14T02:39:18.473
> 
> 标签：jquery, sqlite, cordova

我试图找出数据库中有多少行。我想知道数据库中是否已经有一个项目。我能够创建一个按钮，该按钮将转到数据库并执行 gotLog3 函数调用，结果没有问题。

```
$("#countButton").click(function(e){
    teacherInfo.transaction(function(tx) {
        tx.executeSql("select * from logTeacherInfo",[],gotLog3,errorHandler);
    }, errorHandler, function() {});
}); 
```

现在，如果我尝试提交表单并进行相同的检查，它将不会调用 gotLog3。

```
$(".button").click(function() { 
teacherInfo.transaction(function(tx) {
    tx.executeSql("select * from logTeacherInfo",[], gotLog3,errorHandler);
}, errorHandler, function() {});
}); 
```

这些代码块彼此相邻。一个有效，另一个无效。任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T04:02:01.090

我发现如果您在 html 表单上使用类型“按钮”而不是类型“提交”，它将调用函数 gotLog3。我不确定为什么会这样。

# java - 奇怪的 Tomcat 字符集翻译

> ID：14866964
> 
> 赞同：0
> 
> 时间：2013-02-14T02:41:10.333
> 
> 标签：java, jsp, tomcat, jakarta-mail

想不通这个。当我的 tomcat 应用程序发送电子邮件（Javamail API）时，“$”被替换为“¤”......

仅在 Linux 上。在 Windows 上它工作正常。

我到处都有 UTF-8 和语言环境 EN - 在 Javamail 代码中，在每个页面上，在应用程序配置中。我会认为 $ 将是 ascii 足以没有字符集问题。

例如

```
Each    Price
¤99.97  ¤99.97
Subtotal:   ¤99.97
Shipping:   ¤10.00 
```

任何人都可以建议在哪里看？我怀疑它不是字符集或语言环境......再说一次，它只是来自 Linux 服务器......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T03:35:59.727

如果您在消息内容中发送一条带有文字“$”的简单消息，来自 Java String 对象，它仍然会失败吗？例如，msg.setText("test $1")。如果您使用 msg.writeTo(new FileOutputStream("msg.txt"))，您会看到什么？

您使用的是什么版本的 JavaMail。某些版本的 Linux 包括 GNU 版本的 JavaMail，它有时会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:02:03.907

解决了！文字 $s 没问题。原来是formatNumber标签。

我已经设置了页面字符集...

```
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

但是忘记为 taglib 设置语言环境。

```
<fmt:setLocale value="en_US" scope="session"/>

<fmt:formatNumber value="${row.price}" type="currency"/> 
```

谢谢你的帮助。

# javascript - TypeError：无法调用未定义的方法“替换”

> ID：14866967
> 
> 赞同：1
> 
> 时间：2013-02-14T02:41:40.950
> 
> 标签：javascript, types

我正在尝试为 google docs 电子表格创建自定义函数。我觉得这是一个非常简单的问题，我很快就超出了我的深度。请帮我。一个正确方向的观点将不胜感激。

googledocs 脚本编辑器给出了这个错误：

> `TypeError: Cannot call method "replace" of undefined. (line 50)`

对于此代码：

```
 function replaceGender(name, gender, comment) {

      var genderedComment = String();
      var name;
      var gender;
      var comment;

      if(gender == "m")
      {
          genderedComment = ungenderedComment.replace("(name)", name).replace(/\(He\/She\)/g,"He").replace(/\(His\/\Her\)/g,"His").replace(/\(his\/\her\)/g,"his").replace(/\(him\/\her\)/g,"him").replace(/\(he\/\she\)/g,"he");
      }
      else
      {   
          genderedComment = ungenderedComment.replace("(name)", name).replace(/\(He\/She\)/g,"She").replace(/\(His\/\Her\)/g,"Her").replace(/\(his\/\her\)/g,"her").replace(/\(him\/\her\)/g,"her").replace(/\(he\/\she\)/g,"she");
      }

      return genderedComment;
}; 
```

我认为这很容易，但我做错了什么。

我已经更改了代码，它现在可以正常工作，但是最后一个`.replace(/\(he\/\she\)/g,"she");`并且`.replace(/\(he\/\she\)/g,"he");` 不要替换。？？不知道...再次感谢您的所有帮助...正如我所说，我学到了很多东西。

这是现在的代码

```
function replaceGender(name, gender, comment) {

  if(gender == "m")
  {
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"He").replace(/\(His\/\Her\)/g,"His").replace(/\(his\/\her\)/g,"his").replace(/\(him\/\her\)/g,"him").replace(/\(he\/\she\)/g,"he");
  }
  else if(gender == "f")
  {   
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"She").replace(/\(His\/\Her\)/g,"Her").replace(/\(his\/\her\)/g,"her").replace(/\(him\/\her\)/g,"her").replace(/\(he\/\she\)/g,"she");
  }

  return comment;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T02:51:35.360

Several problems actually, aside from the undefined error. You don't want to declare those variables at the top of the function, since what you need is already passed into the function.

```
function replaceGender(name, gender, comment) {
  var genderedComment;

  if(gender == "m")
  {
  genderedComment = comment.replace("(name)", name).replace(/\(He\/She\)/g,"He").replace(/\(His\/\Her\)/g,"His").replace(/\(his\/\her\)/g,"his").replace(/\(him\/\her\)/g,"him").replace(/\(he\/\she\)/g,"he");
  }
  else
  {   
  genderedComment = comment.replace("(name)", name).replace(/\(He\/She\)/g,"She").replace(/\(His\/\Her\)/g,"Her").replace(/\(his\/\her\)/g,"her").replace(/\(him\/\her\)/g,"her").replace(/\(he\/\she\)/g,"she");
  }

  return genderedComment;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T02:45:16.853

您命名`ungenderedComment`的变量未定义。

* * *

您可以测试以查看变量是否未定义，如下所示：

```
if (typeof someVariable === 'undefined') {
    alert("variable is undefined");
} 
```

或者像这样：

```
if (! someVariable) {
    alert("variable is either undefined, null, false, zero, or some falsey value");
} 
```

* * *

**编辑：**正如评论所指出的，看起来您完全使用了错误的变量！

# r - 观星者和省略正则表达式

> ID：14866969
> 
> 赞同：1
> 
> 时间：2013-02-14T02:42:35.203
> 
> 标签：r, stargazer

我正在尝试使用正则表达式来省略 stargazer 中的一些变量。我终于找到了一个有效的正则表达式，但它使用的是 Perl 标准。这不适用于 R 中的基本正则表达式，尽管 R 中的 regexpr 可以采用 perl=T 选项。鉴于您将变量集的正则表达式包装为在“”中省略，因此您无法真正传递此选项。关于如何将 perl 正则表达式与 stargazer 一起使用的任何想法？

我想使用的正则表达式的一个例子是

```
placed.ind2*(?:(?!:switchind).)*$ 
```

适用于这 4 个字符串：

```
placed.ind2PROF SERVICES
placed.ind2TRANSPORT
placed.ind2PROF SERVICES:switchind2TRUE
placed.ind2TRANSPORT:switchind2TRUE 
```

我希望选择前两个，但最后一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-06T01:13:02.880

从 4.0 版开始（现在在 CRAN 上），您可以使用参数 perl=TRUE 运行 stargazer 以允许在其他参数中使用与 Perl 兼容的正则表达式。

# cocoa - 在构造函数中传递控制器总是一种不好的做法吗？

> ID：14866979
> 
> 赞同：3
> 
> 时间：2013-02-14T02:44:30.177
> 
> 标签：cocoa, uiviewcontroller, delegates, protocols

我偶尔会通过传入视图控制器实例本身来从我的视图控制器实例化一个类，以便我创建的对象可以调用控制器的方法来更新视图。

这总是、经常或永远不是一个坏习惯吗？

具体来说：

ViewController.h 有

```
-(void)updateButtonValue:(NSString*)value; 
```

MyObject.h 有

```
-(id)initWithViewController:(ViewController*)aViewController; 
```

我从我的视图控制器实例化该类：

```
[[MyObject alloc] initWithViewController:self]; 
```

因此允许 MyObject 实例通过一个简单的调用来更新我视图中的按钮值，例如：

我的对象.m

```
[self.viewController updateButtonValue:@"example"]; 
```

这似乎并不理想，因为我传递给 MyObject 的内容（视图控制器本身）比它应该需要的多得多，但它肯定是快速且实用的。如果有更简洁的方法，例如依赖协议，也很简洁，一个简短的代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T03:21:45.363

传入类类型的指针总是不好的做法，因为您将对象紧密耦合在一起（每个对象都需要知道另一个对象的类，它们也可能是单个对象）。这就是委托模式的用途。它最大限度地减少了 MyObject 需要的信息（至少，只不过是一个指针类型`id`- 最好是由 MyObject 指定的协议，为它提供一些行为保证）

所以翻译你的例子

我的对象.h

代替...

```
-(id)initWithViewController:(ViewController*)aViewController; 
```

和...

```
-(id) init; 
```

（如果您没有进一步的理由覆盖，您可以免除）

和...

```
@property (nonatomic, weak) id delegate; 
```

myViewController 中的实例化（确实需要`#include MyObject`）...

```
MyObject* object = [[MyObject alloc] init]; 
```

其次是

```
object.delegate = self; 
```

（请注意，`object`获取指向 myViewController 的指针而无需了解其他任何信息）

现在您可以从内部执行此操作`object`：

```
 [self.delegate updateButtonValue:@"example"]; 
```

*但是*......您需要确保您的代表可以收到消息`updateButtonValue`：

为此，您在 MyObject.h 中声明一个带有此方法签名的协议

```
@protocol MyObjectDelegate

  - (void) updateButtonValue:(NSString*)string;

@end 
```

在您的 viewController 中，使用接口行中的 <> 声明您符合此协议

```
@interface ViewController <MyObjectDelegate> 
```

（这没什么大不了的，ViewController 已经必须分配`#include MyObject`/初始化它，所以不需要更多信息来执行此操作）

并因此扩展您的财产声明：

```
@property (nonatomic, weak) id <MyObjectDelegate> delegate 
```

现在您已经为编译器提供了足够的信息，以确保您只能传递一致的消息。这里的绝妙之处在于 MyObject 可以自信地将消息传递给 MyViewController，而不需要知道有关 MyViewController 的*任何*信息，除了通过委托指针到达它之外。

# java - 我的程序在不应该终止时不断终止。为什么？

> ID：14866981
> 
> 赞同：0
> 
> 时间：2013-02-14T02:44:53.330
> 
> 标签：java

嘿伙计们，我正在制作一个数字平均程序，我想插入这个函数，允许用户输入字母“y”再次运行并进行另一次计算，但是，我的程序显示了终止的消息（我正在使用Eclipse）在第一次计算之后，即使我希望用户能够输入输入。以下是令我困惑的源代码部分：

```
public static void main(String[] args)
{
    Scanner input= new Scanner(System.in);

    System.out.print("This is an averaging program. How many numbers would you like to average together?");
    int total=input.nextInt();
    int i;
    float sum=0;
    for(i=0; i<total; i++)
    {
        System.out.print("Enter your numbers: ");
        sum += input.nextFloat();
    }
    String y;

    System.out.print("Your average is: " + sum/total + "\n");
    System.out.print("Would you like to do another computation? Type y for yes, or something else for no.");
    y=input.nextLine(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T02:46:39.743

尝试这个：

改变

```
sum += input.nextFloat(); 
```

至

```
sum += input.nextFloat();
input.nextLine(); 
```

和

```
int total=input.nextInt(); 
```

至

```
int total=input.nextInt();
input.nextLine(); 
```

解释。`\n`您应该在阅读数字形式后手动阅读换行符`Scanner`

当然你也应该在`do` `while`循环中添加程序的相关部分以便重复执行，但你可能知道这一点。

# c - 范围问题：在 if 语句中无法访问双数组

> ID：14866991
> 
> 赞同：0
> 
> 时间：2013-02-14T02:45:44.623
> 
> 标签：c, arrays

我有一个类方法，它应该接受一个对象并在适当的位置填充一些值。这是在功能演示阶段，所以以后实现会更好。现在我只是想让这个工作。

在下面的代码中， DistrictID 整数已成功传递给 if 语句。rgb 双精度数组不会进入 if 语句范围。初始化时设置的值一直到 DistrictPoint.color，而无需在 if 语句中设置。

下面的代码不会按原样编译。我想知道如何让 rgb 变量在 if 语句范围内可见。

（注意：我尝试了在 if 语句中初始化变量的幼稚解决方案。这清除了错误，但不会让新的 rgb 变量超出 if 范围）

```
// This method populates properties
+(void)setContantPropertiesForID:(DistrictPoint *)districtPoint
{
    int districtID = [districtPoint.districtID intValue];
    double rgb[3] = {0,0,0};

    if (districtID == 1) {
        districtPoint.title = @"District 1";
        rgb = {1.0,0.0,0.0};                    // error is expected expression
    } else if (districtID == 2) {
        districtPoint.title = @"District 1";
        rgb = {0.0,1.0,0.0};
    } else if (districtID == 3) {
        districtPoint.title = @"District 1";
        rgb = {0.0,0.0,1.0};
    } else {
        districtPoint.title = nil;
        rgb = {1.0,1.0,1.0};                    // error condition
    }

    districtPoint.color = [UIColor colorWithRed:rgb[0] green:rgb[1] blue:rgb[2] alpha:0.5];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T02:50:00.293

这与 if 语句无关。您只能在初始化时使用花括号表示法来设置数组的元素（实际上，在代码的前面部分）。

# python - 是否可以在一个类中使用 create 方法插入 OpenERP 中的另一个类表？

> ID：14866992
> 
> 赞同：0
> 
> 时间：2013-02-14T02:45:45.183
> 
> 标签：python, class, openerp

我有一个`class student`，我的想法是，每次调用该类时，我都需要将一些数据插入另一个表中，让我们调用它`logs`，它`class logs`有自己的`logs`表

问题是当我打电话时

```
logs.create(cr, uid, i, context) 
```

在里面`class student`，OpenERP 会给我返回错误：

```
unbound method create() must be called with logs instance as first argument (got Cursor instance instead) 
```

我尝试更改`cr`with`logs`但它会不断给我一个类似的错误。

是否可以在给定类中由另一个类创建的表中插入记录？

任何具有此功能的提示或模块将不胜感激。谢谢！

**编辑：**我意识到也许我可以打电话

```
cr.execute() 
```

`INSERT INTO`从我的内部声明，`students class`但我不确定这是解决问题的*适当方法。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:28:44.357

如果是从（或）`logs`派生的类，那么您需要从模型池中获取模型对象，然后您可以使用该方法：`orm.Model``osv.osv``create`

```
from openerp.osv import orm, fields
class logs(orm.Model):
    _name = 'logs'
    _columns = {'name': fields.char('Name', ...),
                'message': fields.char('Message', ...),
               }
    # ...

class student(orm.Model):
    _name = 'student'
    _columns = {...}
    def some_method(self, cr, uid, ids, context=None):
        # get the logs model
        logs_obj = self.pool.get('logs')
        # prepare the value dict for new entry
        values = {'name': val_of_the_name_col,
                  'message':  val_of_the_message_col,
                  }
        # call create
        log_id = logs_obj.create(cr, uid, value, context=context) 
```

# java - 如何在java上制作开/关按钮？

> ID：14866994
> 
> 赞同：2
> 
> 时间：2013-02-14T02:45:59.117
> 
> 标签：java, swing, jbutton

我需要一个按钮，当按下时，启用所有其他按钮，并将标签的名称从“关”更改为“开”，再次按下时，禁用所有按钮并将开关再次切换回“关” ，就像一个开/关开关。问题是，我可以“打开”它，但不能将其关闭。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T02:50:02.900

如果是 Swing，那么您可能希望将希望控制的按钮放入数组或`ArrayList<AbstractButton>`. 这样，控制按钮的 ActionListener 可以简单地使用 for 循环遍历数组或集合，`setEnabled(true)`在按钮上调用或 false。考虑将控制按钮设为 JCheckBox 或 JToggleButton。

请注意，如果您使用 JToggleButton，则向其添加 ItemListener。如果这样做，则无需使用布尔值。只需检查传递给 ItemListener 的 itemStateChanged 方法的 ItemEvent 的状态。如果`getStateChanged()`返回 ItemEvent.SELECTED，则遍历您的 JButton 集合以启用所有按钮。如果它返回 ItemEvent.DESELECTED，则执行相反的操作。

另请注意，按照拜伦霍金斯的评论：

> 您可能需要考虑`ItemListener`当按钮以编程方式切换时以及用户切换按钮时将接收事件。唯一会根据`ActionListener`人类用户的输入触发。我经常遇到错误，因为我选错了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:53:11.343

如果您的按钮被按下并且不会弹出，那么您很可能在`JToggleButton`没有调用`super`它的版本的情况下覆盖了一个方法。而不是覆盖方法，而是创建一个`ActionListener`并使用`addActionListener()`来附加到按钮。当您的听众收到按钮操作的通知时，请检查切换按钮是向上还是向下，并`setEnabled()`相应地检查其他按钮。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T02:53:22.740

尝试使用这个简单的代码，使用变量作为标志

```
public int status = 0; //0 = on, 1=off

public void button_clicked()
{
    //on button clicked
    if(status == 0)
    {
        //logic here
        status = 1;
        buttonname.setText("Off");
    }
    //off button clicked
    else if(status == 1)
    {
        //logic here
        status = 0;
        buttonname.setText("On");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T02:56:08.873

您需要一个布尔值来表示按钮的状态。

换句话说，当您的按钮关闭时（您的布尔变量为 false），您将从 onClick 侦听器调用方法“turnButtonOn()”或类似的东西。

如果您的布尔变量为真，那么您将调用方法 turnButtonOff()

```
public void onClick() {
    if(buttonOn){
      turnOff();
    }
    else {
      turnOn();
    }
    buttonOn = !buttonOn;
} 
```

# php - 如何在没有用户交互的情况下在服务器上定期运行/刷新 PHP 计数器脚本（如果可能）

> ID：14866996
> 
> 赞同：1
> 
> 时间：2013-02-14T02:46:04.017
> 
> 标签：php, refresh, counter, icecast

我编写了一个 PHP 脚本，它从 IceCast 流中收集所有数据并将其存储在一个数组中。我想测量该流五分钟内有多少听众。有没有办法远程运行脚本，使其每五分钟“刷新”一次，并将听众的数量存入数据库？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:00:02.403

Cron 工作是您正在寻找的。您可以在 SO/Google/等上进行搜索。了解如何创建/设置 Cron 作业。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:10:44.410

我使用以下代码片段定期运行脚本。
它的主要优点是**在完成当前进程之后**`$min minutes`运行（可配置）。这不能通过每次 X 次运行的 cron 来实现。看到差异了吗？通过这种方式，您可以确保**在进程之间等待给定的时间。**

 ****也许不是你想要的，但我想分享这个有用的技术。

script_at.php 文件：

```
function init_at()
{
    // my code
    runNextPlease();
}

function runNextPlease()
{
    $min = 5;
    exec ("at now + $min minutes -f " . PATH_TO_SOURCE . "script_at.sh", $output, $out);
    my_logger("at return status: $out");
} 
```

script_at.sh 文件：

```
#!/bin/bash
/usr/bin/wget -c -t0 -o /dev/null -O /dev/null http://domain/script_at.php 
```****