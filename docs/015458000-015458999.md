# StackOverflow 问答 15458000-15458999

# sql-server - 如何在 T-SQL / SQL Server 中为超级/子类型（继承）实体模拟 BEFORE INSERT 触发器？

> ID：15458006
> 
> 赞同：23
> 
> 时间：2013-03-17T05:55:45.263
> 
> 标签：sql-server, tsql, triggers, azure-sql-database

这是在 Azure 上。

我有一个超类型实体和几个子类型实体，后者需要在每次插入时从超类型实体的主键中获取它们的外键。在 Oracle 中，我使用`BEFORE INSERT`触发器来完成此操作。如何在 SQL Server / T-SQL 中实现这一点？

DDL

```
CREATE TABLE super (
 super_id int IDENTITY(1,1)
 ,subtype_discriminator char(4) CHECK (subtype_discriminator IN ('SUB1', 'SUB2')
 ,CONSTRAINT super_id_pk PRIMARY KEY (super_id)
);
CREATE TABLE sub1 (
 sub_id int IDENTITY(1,1)
,super_id int NOT NULL
,CONSTRAINT sub_id_pk PRIMARY KEY (sub_id)
,CONSTRAINT sub_super_id_fk FOREIGN KEY (super_id) REFERENCES super (super_id)
); 
```

我希望 insert into`sub1`触发一个触发器，该触发器实际上将一个值插入`super`并使用`super_id`生成的 put into `sub1`。

在 Oracle 中，这将通过以下方式完成：

```
CREATE TRIGGER sub_trg
    BEFORE INSERT ON sub1
    FOR EACH ROW
DECLARE
    v_super_id int; //Ignore the fact that I could have used super_id_seq.CURRVAL
BEGIN
    INSERT INTO super (super_id, subtype_discriminator) 
        VALUES (super_id_seq.NEXTVAL, 'SUB1') 
        RETURNING super_id INTO v_super_id;
    :NEW.super_id := v_super_id;
END; 
```

请告知我将如何在 T-SQL 中模拟这一点，因为 T-SQL 缺乏这种`BEFORE INSERT`能力？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-17T20:42:36.427

有时`BEFORE`可以用一个触发器替换触发器`AFTER`，但在您的情况下似乎并非如此，因为您显然需要在插入发生之前提供一个值。因此，为此，最接近的功能似乎是`INSTEAD OF`触发功能，正如[@marc_s](https://stackoverflow.com/users/13302/marc-s)在他的评论中所建议的那样。

但是请注意，正如这两种触发器类型的名称所暗示的那样，`BEFORE`触发器和触发器之间存在根本区别`INSTEAD OF`。虽然在这两种情况下，触发器都是在由调用触发器的语句确定的操作尚未发生时执行的，但在`INSTEAD OF`触发器的情况下，操作根本*不应该*发生。你需要做的真正动作必须*由触发器本身*来完成。这与触发器功能非常不同，在`BEFORE`触发器功能中，语句总是要执行，当然，除非您显式回滚它。

但实际上还有另一个问题需要解决。正如您的 Oracle 脚本所揭示的，您需要转换的触发器使用了 SQL Server 不支持的另一个特性，即`FOR EACH ROW`. SQL Server 中也没有逐行触发器，只有逐语句触发器。这意味着您需要始终牢记插入的数据是一个行*集*，而不仅仅是单行。这增加了更多的复杂性，尽管这可能会结束您需要考虑的事项列表。

因此，实际上需要解决两件事：

*   替换`BEFORE`功能；

*   更换`FOR EACH ROW`功能。

我解决这些问题的尝试如下：

```
CREATE TRIGGER sub_trg
ON sub1
INSTEAD OF INSERT
AS
BEGIN
  DECLARE @new_super TABLE (
    super_id int
  );
  INSERT INTO super (subtype_discriminator)
  OUTPUT INSERTED.super_id INTO @new_super (super_id)
  SELECT 'SUB1' FROM INSERTED;

  INSERT INTO sub (super_id)
  SELECT super_id FROM @new_super;
END; 
```

这就是上面的工作方式：

1.  与插入的行数相同的行`sub1`首先添加到`super`. 生成的`super_id`值存储在临时存储器（称为 的表变量`@new_super`）中。

2.  新插入`super_id`的 s 现在插入到`sub1`.

真的没有什么太难的，但只有当您`sub1`在问题中指定的列之外没有其他列时，上述方法才会起作用。如果还有其他列，则上述触发器将需要更复杂一些。

问题是将新`super_id`的 s 分别分配给每个插入的行。实现映射的一种方法可能如下所示：

```
CREATE TRIGGER sub_trg
ON sub1
INSTEAD OF INSERT
AS
BEGIN
  DECLARE @new_super TABLE (
    **rownum   int IDENTITY (1, 1),**
    super_id int
  );
  INSERT INTO super (subtype_discriminator)
  OUTPUT INSERTED.super_id INTO @new_super (super_id)
  SELECT 'SUB1' FROM INSERTED;

  WITH enumerated AS (
    SELECT *, ROW_NUMBER() OVER (ORDER BY (SELECT 1)) AS rownum
    FROM inserted
  )
  INSERT INTO sub1 (super_id, *other columns*)
  SELECT n.super_id, i.*other columns*
  FROM enumerated AS i
  INNER JOIN @new_super AS n
  ON i.rownum = n.rownum;
END; 
```

可以看到，`IDENTIY(1,1)`添加了一列`@new_user`，因此临时插入的`super_id`值将从1开始额外枚举。为了提供新`super_id`s和新数据行之间的映射，该`ROW_NUMBER`函数也用于枚`INSERTED`举行。因此，`INSERTED`集合中的每一行现在都可以链接到一个单独`super_id`的行，从而补充到要插入的完整数据行`sub1`。

请注意，`super_id`插入新 s 的顺序可能与分配它们的顺序不匹配。我认为这没有问题。生成的所有新`super`行除了 ID 之外都是相同的。所以，你需要的只是`super_id`每新`sub1`行取一个新的。

但是，如果插入的逻辑`super`更复杂，并且由于某种原因您需要准确记住为哪个新行`super_id`生成了哪个新`sub`行，那么您可能需要考虑这个 Stack Overflow 问题中讨论的映射方法：

*   [使用 merge..output 获取 source.id 和 target.id 之间的映射](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-12T18:49:26.253

虽然 Andriy 的提议适用于少量记录的 INSERT，但全表扫描将在最终连接上完成，因为 'enumerated' 和 '@new_super' 都没有索引，导致大型插入的性能很差。

这可以通过在 @new_super 表上指定主键来解决，如下所示：

```
DECLARE @new_super TABLE (
  row_num INT IDENTITY(1,1) PRIMARY KEY CLUSTERED,
  super_id   int
); 
```

这将导致 SQL 优化器扫描“枚举”表，但在 @new_super 上执行索引连接以获取新键。

# java - 查找文件类型 unix

> ID：15458007
> 
> 赞同：-4
> 
> 时间：2013-03-17T05:55:58.970
> 
> 标签：java, file, unix

如何找到文件的类型？我正在编写代码来查找 unix 系统上的文件是否是图像文件？

可能有人更改了扩展名。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:00:39.693

使用`file`命令：

```
file <name of file> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:06:57.123

Java 7`Files.probeContentType(Path path)`可以探测文件的内容类型。有关详细信息，请参阅 API。

# python - matplotlib 3dbars：轴问题

> ID：15458010
> 
> 赞同：1
> 
> 时间：2013-03-17T05:57:24.247
> 
> 标签：python, matplotlib

我正在尝试绘制每个条形图，每个条形图都以 x,y 坐标为底，高度等于 az 值。下面的代码似乎没有正确捕获我的 x 轴，我不知道为什么。

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

x = [0.0245, 0.015, 0.0245, 0.0285, 0.0245, 0.0245]
y = [0.0024, 0.0075, 0.0095, 0.01, 0.008, 0.0018]
z = [11.71, 2.09, 2.49, 2.05, 2.72, 22.55]

ax.bar(x, y, z, zdir='z', color='g', alpha=.8)

plt.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:49:51.787

检查参数，您说您希望高度等于 z 值，但是您传入 y 作为条形的高度。这更好吗，使用`bar3d`？

![在此处输入图像描述](../Images/d64ec44caeb90a98a22169d47b6e7d7a.png)

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

x = [0.0245, 0.015, 0.0245, 0.0285, 0.0245, 0.0245]
y = [0.0024, 0.0075, 0.0095, 0.01, 0.008, 0.0018]
z = [11.71, 2.09, 2.49, 2.05, 2.72, 22.55]

ax.bar3d(x, y, [0]*6, 0.001, 0.001, z)

ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')

plt.show() 
```

# unit-testing - 测试 Tornado Mongo RESTful 网络服务

> ID：15458013
> 
> 赞同：0
> 
> 时间：2013-03-17T05:57:49.030
> 
> 标签：unit-testing, mongodb, rest, tornado

我有一个使用 Tornado 和 mongo 数据库开发的 RESTful API。我已经使用 httppie 手动测试了我的应用程序。

有没有办法自动测试 API？我一直在寻找测试 tornado mongo 应用程序，但找不到任何有用的资源。

谁能建议我一种方法，我可以用它来编写我的测试来自动测试我的 API。

任何帮助表示赞赏。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T06:22:02.447

RESTClient 是一个 Java 应用程序，用于测试自 2007 年以来一直在持续开发的 RESTful Web 服务。它可用于测试各种 HTTP 通信。有两个可执行文件：GUI版本；用于批量执行 .rcq 文件的 CLI 版本

```
https://github.com/wiztools/rest-client
http://code.fosshub.com/WizToolsorg-RESTClient/downloads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T08:56:13.337

使用[Tornado 的`AsyncHTTPTestCase`](http://www.tornadoweb.org/en/stable/testing.html#tornado.testing.AsyncHTTPTestCase)：

```
class MyHTTPTest(tornado.testing.AsyncHTTPTestCase):

    def get_app(self):
        return my_app

    def test_get_foo(self):
        foo_url = self.get_url('/foo')
        response = self.http_client.fetch(foo_url)
        # test contents of response
        self.assertEqual(response.code, 200)

    def test_post_new_foo(self):
        foo_url = self.get_url('/foo')
        foo_obj = tornado.escape.json_encode({
            'an_object': 'blah blah'
            }
        request = tornado.httpclient.HTTPRequest(foo_url,
            method='POST', body=foo_obj)
        # test contents of response 
```

等等

# jqmobi - jQMobi 文档镜像

> ID：15458016
> 
> 赞同：0
> 
> 时间：2013-03-17T05:59:17.933
> 
> 标签：jqmobi

刚开始使用 jqMobi 并运行它，现在称为“英特尔的应用程序框架”（俗称 eh）随着英特尔移植到他们的新站点，他们忘记将完整的文档放到网上（至少我找不到它）。现在只有最少的文档，比如入门。我想继续做下去。

有人知道（完整）文档的托管位置吗？我真的很讨厌再去寻找另一个框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T12:06:33.337

文档都在那里。他们唯一没有添加的是“testdrive”，它只是在 github 中找到的厨房水槽样本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T01:39:31.090

在我看来，这些文档有些分散，但如果你能找到的话，会有一些有用的东西。我为这些链接保留书签。有一些链接可以让您了解更多内容。

[http://html5dev-software.intel.com/documentation/jqmobiapis/index.html](http://html5dev-software.intel.com/documentation/jqmobiapis/index.html)

[http://app-framework-software.intel.com/documentation.php?r=9057](http://app-framework-software.intel.com/documentation.php?r=9057)

[http://developer.html5dev-software.intel.com/](http://developer.html5dev-software.intel.com/)

[http://www.html5dev-software.intel.com/documentation/](http://www.html5dev-software.intel.com/documentation/)

实际上，他们分开了 appMobi 是一家支持应用程序的云服务公司，而英特尔参与了构建应用程序的工作。所以你可能仍然需要/想要 appMobi。他们的文档当然在他们的网站上。appMobi 网站上仍有一些重复。

从技术上讲，我不认为 jqMobi 与 Intel App Framework 是一回事，但同时我也很难理解什么叫什么了。我相信他们会随着时间的推移解决这个问题。我希望他们在 stackoverflow.com 上找到可以成为有用标签的名称！

# javascript - CSS/Javascript 鼠标悬停弹出框

> ID：15458021
> 
> 赞同：5
> 
> 时间：2013-03-17T06:00:02.863
> 
> 标签：javascript, html, css, mouseover

我有一个带有 javascript/css 内容框的表格单元格，鼠标悬停时会弹出。

页面上有 20 个单元格。一切正常，当您将鼠标悬停在产品链接上时，您会看到内容框。但是，我想在内容框中放置一个链接，用户可以选择点击该链接。因此，弹出框必须保持足够长的时间让用户将鼠标悬停以单击链接。

真的，我希望 OnMouseOver 保持打开状态，直到一两秒过去和/或用户 OnMouseOver 的另一个单元格。

我遇到的问题是弹出框没有保持打开状态（由于 OnMouseOut）来单击链接。如果我关闭 OnMouseOut（我尝试过），那么所有弹出框都会保持打开状态，所以这也不起作用。

我的 CSS 看起来像这样：

```
<style type="text/css" title="">
    .NameHighlights         {position:relative; }
    .NameHighlights div     {display: none;}
    .NameHighlightsHover    {position:relative;}
    .NameHighlightsHover div {display:block;position:absolute;width: 15em;top:1.3em;*top:20px;left:70px;z-index:1000;}
</style> 
```

和html：

```
<td>
    <span class="NameHighlights" onMouseOver="javascript:this.className='NameHighlightsHover'" onMouseOut="javascript:this.className='NameHighlights'">
    <a href="product link is here">Product 1</a>
           <div>
            # of Votes:  123<br>
            % Liked<br>
            <a href="product review link>See User reviews</a>
            </div>
    </span>
</td> 
```

那么，我怎样才能让弹出框保持打开足够长的时间来点击链接，但如果另一个内容框被激活，也让它消失呢？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:14:36.477

您必须为此任务改进 HTML 标记，需要摆脱内联事件处理程序：

```
<span class="NameHighlights">
    <a href="product link is here">Product 1</a>
    <div>
        # of Votes:  123<br>
        % Liked<br>
        <a href="product review link">See User reviews</a>
    </div>
</span> 
```

然后你必须将你的事件绑定到所有`.NameHighlights`跨度：

```
var span = document.querySelectorAll('.NameHighlights');
for (var i = span.length; i--;) {
    (function () {
        var t;
        span[i].onmouseover = function () {
            hideAll();
            clearTimeout(t);
            this.className = 'NameHighlightsHover';
        };
        span[i].onmouseout = function () {
            var self = this;
            t = setTimeout(function () {
                self.className = 'NameHighlights';
            }, 300);
        };
    })();
} 
```

[http://jsfiddle.net/3wyHJ/](http://jsfiddle.net/3wyHJ/)

所以想法是使用`setTimeout`方法。

*注意*：我使用`querySelectorAll`的是IE7不支持的，如果你需要支持，那么你可以使用该`getElementsByClassName`方法的任何实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T21:35:26.687

如果有人正在寻找已接受答案的 jQuery 版本：

```
var t;
$(function(){
            $('span.NameHighlights').mouseover(

                    function(e){
                        hideAll();
                        clearTimeout(t);
                        $(this).attr('class', 'NameHighlightsHover');

                    }
            ).mouseout(

                    function(e){

                        t = setTimeout(function() {
                        //$(this).attr('class', 'NameHighlights');
                        hideAll();
                        }, 300);

                    }
            );
        });

function hideAll() {
    $('span.NameHighlightsHover').each(function(index) {
            console.log('insde hideAll');
                $(this).attr('class', 'NameHighlights');
            })
}; 
```

[jsFiddle](http://jsfiddle.net/msobczak/uhhhv929/13/)

# c# - 将 -1 转换为 uint C#

> ID：15458022
> 
> 赞同：7
> 
> 时间：2013-03-17T06:00:06.240
> 
> 标签：c#, overriding, unchecked, uint

将-1转换为uint将不起作用“（（uint）（-1））”解决方案？

```
num10 = ((uint)(-1)) >> (0x20 - num9); 
```

错误：常量值“-1”无法转换为“uint”（使用“未检查”语法覆盖）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-17T06:04:05.060

利用

```
uint minus1 = unchecked((uint)-1);
uint num10 = (minus1) >> (0x20 - num9); 
```

甚至更好

```
uint num10 = (uint.MaxValue) >> (0x20u - num9); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T06:03:55.933

编译器告诉你你需要做什么：

```
unchecked
{
     num10 = ((uint)(-1)) >> (0x20 - num9);
} 
```

但是，它可能不会给您想要的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T14:16:28.493

你确实可以有一些类似于负数、无符号数的东西。他们有这样的特点`x + (-x) == 0`

要在没有未经检查的区域的 c# 中创建“负”uint，您可以改用`(~x) + 1`与`-x`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T06:03:25.797

无符号整数只能表示正值。它不能代表-1。

如果要表示负值，则需要使用有[符号](http://en.wikipedia.org/wiki/Signedness)类型，例如`int`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T06:04:18.483

查找[未检查](http://msdn.microsoft.com/en-us/library/a569z7k8.aspx)的上下文。

# android - 如何从moodle webservice获取令牌？

> ID：15458023
> 
> 赞同：0
> 
> 时间：2013-03-17T06:00:08.150
> 
> 标签：android

```
package com.exmple.moodle_webservice;

import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ExecutionException;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;

public class MainActivity extends Activity {

    Button token;

    JSONParser jParser = new JSONParser();

    // Progress Dialog
        private ProgressDialog pDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        token=(Button)findViewById(R.id.button1);

        token.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String result = null;

                try {

                    result = new getToken().execute("").get();

                }
                catch (Exception e) {
                    // TODO Auto-generated catch block
                    Log.e("Error--->",e.toString());
                }

                Log.e("result--->",result);

            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

class getToken extends AsyncTask<String, String, String> {

    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(MainActivity.this);
        pDialog.setMessage("Loading products. Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }

    @Override
    protected String doInBackground(String... arg0) {
        // TODO Auto-generated method stub

        String getToken = "http://10.0.2.2:80/moodle/login/token.php";

    //String getToken = "http://localhost/moodle/login/token.php?                   username=niranga&password=S12345s@&service=moodle_mobile_app";

        // Building Parameters
         List<NameValuePair> params = new ArrayList<NameValuePair>();

        params.add(new BasicNameValuePair("username", "niranga"));
         params.add(new BasicNameValuePair("password", "S12345s@"));
         params.add(new BasicNameValuePair("service", "moodle_mobile_app"));

                    // getting JSON string from URL
         JSONObject json = jParser.makeHttpRequest(getToken, "GET", params);

         Log.e("json--->",json.toString());

         try {

            return json.getString("token");

        } catch (Exception e) {

            // TODO Auto-generated catch block
            Log.e("Errorrr--->",e.toString());

        }

        return null;

    }

    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products
        pDialog.dismiss();

    }

}
} 
```

我的 JSONParser 类：

```
package com.exmple.moodle_webservice;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
                       try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

                //Log.e("get Entity result--->",is.toString());
            }           

        } catch (Exception e) {

            Log.e("Error-------->>>",e.toString());
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

当我尝试从 moodle webservice 获取令牌时，出现错误：

## 日志猫

```
03-17 05:21:22.285: E/json--->(2008): {"stacktrace":null,"error":"Invalid url or port.","debuginfo":null,"errorcode":null}
03-17 05:21:22.295: E/Errorrr--->(2008): org.json.JSONException: No value for token
03-17 05:21:22.335: E/AndroidRuntime(2008): FATAL EXCEPTION: main
03-17 05:21:22.335: E/AndroidRuntime(2008): java.lang.NullPointerException: println needs a message
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.util.Log.println_native(Native Method)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.util.Log.e(Log.java:231)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at com.exmple.moodle_webservice.MainActivity$1.onClick(MainActivity.java:64)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.view.View.performClick(View.java:4202)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.view.View$PerformClick.run(View.java:17340)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.os.Handler.handleCallback(Handler.java:725)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.os.Handler.dispatchMessage(Handler.java:92)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.os.Looper.loop(Looper.java:137)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at android.app.ActivityThread.main(ActivityThread.java:5039)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at java.lang.reflect.Method.invokeNative(Native Method)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at java.lang.reflect.Method.invoke(Method.java:511)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-17 05:21:22.335: E/AndroidRuntime(2008):     at dalvik.system.NativeStart.main(Native Method) 
```

如何从moodle获得令牌？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T13:04:11.767

我有同样的问题。`config.php`为了解决它，我必须在位于 Moodle 根文件夹中的文件中编辑以下行（`/var/www/moodle/config.php`在我的例子中，在 Ubuntu 12.10 上）：

```
$CFG->wwwroot   = 'http://10.0.2.2/moodle'; 
```

您必须使用您的设备将看到的 IP 地址作为 Moodle 网络服务器的主机（在模拟器的情况下，主机位于 10.0.2.2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:29:33.533

[在 moodle 中创建 Web 服务令牌的](http://docs.moodle.org/24/en/Using_web_services)明确步骤。

请通过上述网址。回复以获取更多信息。

# algorithm - 排序算法对字符串列表进行排序（C#）

> ID：15458025
> 
> 赞同：1
> 
> 时间：2013-03-17T06:00:22.870
> 
> 标签：algorithm, list, sorting, alphabetical

我正在为 uni 做这个作业，要求是我使用任何排序算法按字母顺序对 List 进行排序（不区分大小写）。基本上说如果列表包含一些字符串，例如“a”“C”“b”“1”和“3”，它会将其排序为“1”“3”“a”“b”“C”或“ a" "b" "C" "1" "3" 我知道如何对整数数组进行排序（下面的代码使用交换排序），但我该如何使用字符串列表呢？如何修改下面的代码以按字母顺序对字符串列表进行排序，同时仍然保持交换排序的原则（在这种情况下）？

注意：我不允许使用`List<string>.Sort()`或其他一些简单的代码。

```
 // sort a vector of type int using exchange sort
        public void ExchangeSort(int[] array)
        {
            int pass, i, n = array.Length;
            int temp;
            // make n-1 passes through the data 
            for (pass = 0; pass < n - 1; pass++)
            {
                // locate least of array[pass] ... array[n - 1]  
                // at array[pass] 
                for (i = pass + 1; i < n; i++)
                {
                    if (array[i] < array[pass])
                    {
                        temp = array[pass];
                        array[pass] = array[i];
                        array[i] = temp;
                    }
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:26:32.253

您可能需要逐个字符地比较字符串。

在伪代码中：

```
for each I from 0 to (shorter string's length - 1):
    if left[I] is a letter and right[I] isn't (or vice versa):
        the string that has a letter at [I] is "less"
        done
    else:
        ("true" here means ignore case)
        (you could also say `StringComparison.InvariantCultureIgnoreCase`, but eh)
        result = String.Compare(left, I, right[I], I, 1, true)
        if result < 0
            left is "less"
        else if result > 0
            right is "less"
        else
            (both strings are equal so far)
            next I

(if you're here, the strings are "equal" up to this point)

if both strings have the same length:
    they're equal
else:
    the longer string is "greater" 
```

# php - Parsing js css and img sources from url

> ID：15458028
> 
> 赞同：0
> 
> 时间：2013-03-17T06:00:50.810
> 
> 标签：php, parsing

I want to get all javascript, css and image sources from an url. I am using simple dom parse for this. This is my current code:

Load url:

```
 $html = file_get_html($n); 
```

Parse javascript sources:

```
foreach($html->find('script') as $element){ 
    $value = $element->src;
        if ($value != null){        
            if (strpos($value, '//') === 0) {
            } else {
                if(filter_var($value, FILTER_VALIDATE_URL)){
                  $array[] = strip_tags($value);
                } 
                else {
                  $array[] = strip_tags($n.$value);  
                }       
            }
        }
    } 
```

Parse image sources:

```
foreach($html->find('img') as $element){ 
    $value = $element->src;
        if ($value != null){
            if (strpos($value, '//') === 0) {
            } else {        
                if(filter_var($value, FILTER_VALIDATE_URL)){
                  $array[] = strip_tags($value);
                } 
                else {
                  $array[] = strip_tags($n.$value);
                }
            }
        }
    } 
```

Parse css sources:

```
foreach($html->find('link') as $element){ 
    $value = $element->href;
        if ($value != null){
            if (strpos($value, '//') === 0) {
            } else {    
                if(filter_var($value, FILTER_VALIDATE_URL)){
                  $array[] = strip_tags($value);
                } 
                else {
                  $array[] = strip_tags($n.$value);
                }
            }
        }
    } 
```

My only problem is with parsing css, i would like to use something like this - `foreach($html->find('link rel="stylesheet"') as $element)` , but its not working that way. Is there a better (more accurate or appropriate) way to parse these things?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:06:29.643

Try this: `$html->find('link[rel=stylesheet]')`

# php - 如何在 2 个标签之间找到抓取信息？

> ID：15458029
> 
> 赞同：1
> 
> 时间：2013-03-17T06:00:54.483
> 
> 标签：php, html, regex

我正在尝试使用具有如下数据的 PHP来**抓取信息：**

```
<br>1998 - <a href="http://example.com/movie/id/2345">A Night at the Roxburry<a/> 
```

我需要得到介于`<br>`和`<a>`标签之间的年份。我通过使用 PHP Simple DOM HTML 解析器获得了电影的标题。这是我用来解析标题的代码

```
foreach($dom->getElementsByTagName('a') as $link){
    $title = $link->getAttribute('href');
} 
```

我尝试使用：

```
$string = '<br>1998 - <a href="http://example.com/movie/id/2345">A Night at the Roxburry<a/>';
$year = preg_match_all('/<br>(.*)<a>', $string); 
```

但它没有找到介于`<br>`和`<a>`标签之间的年份。有谁知道我可以做些什么来找到年份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T06:02:20.317

试试这个：

```
<?php
$subject = '<br>1998 - <a href="http://site.com/movie/id/2345">A Night at the Roxburry<a/>';
$pattern = '/<br>[0-9]{4}/';
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE);
print_r($matches);
?> 
```

请注意，如果年份以其他格式显示，您可以更改模式。如果您想查看两个标签之间的所有内容，您可以使用`$pattern = '/<br>.*<a/';`或任何其他适合您的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:32:42.703

您正在使用的表达式：将在and`$year = preg_match_all('/<br>(.*)<a>', $string);`之间找到文本，但在您的示例中，您没有任何地方。尝试在和之间查找文本，如下所示：`<br>``<a>``<a>``<br>``<a`

```
$year = preg_match_all ('/<br>([^<]*)<a/', $string); 
```

请注意，我也更改`.`为`[^<]`确保它将在下一个标签处停止，否则它将匹配如下字符串：

```
<br>foo<br><br>1998 - <a href="http://site.com/movie/id/2345">A Night at the Roxburry<a 
```

因为它们以 开头`<br>`和结尾`<a`，但这可能不是您所需要的，您的任何一年都将是这样的：

```
foo<br><br>1998 - <a href="http://site.com/movie/id/2345">A Night at the Roxburry 
```

# eclipse - NoClassDefFoundError apache commons UrlValidator in GAE with eclipse

> ID：15458032
> 
> 赞同：1
> 
> 时间：2013-03-17T06:01:17.370
> 
> 标签：eclipse, google-app-engine, apache-commons, noclassdeffounderror

我在我的一个 java 文件中使用 apache commons UrlValidator。该文件编译得很好，但是每当我运行它时，我都会得到 UrlValidator 类的 NoClassDefFoundError

我正在使用带有 Eclipse Juno for JavaEE 的 Google App Engine 1.7.5。我已经在构建路径以及源代码下我的项目的运行配置中包含了 commons jar 文件，但我仍然遇到相同的错误。

这是我的java文件的代码：

```
package com.serv.servshare;

import java.io.*;
import java.util.Properties;

import javax.mail.Message;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;
import javax.servlet.*;
import javax.servlet.http.*;
import com.google.appengine.api.datastore.DatastoreService;
import com.google.appengine.api.datastore.DatastoreServiceFactory;
import com.google.appengine.api.datastore.Entity;
import com.google.appengine.api.datastore.PreparedQuery;
import com.google.appengine.api.datastore.Query;
import org.apache.commons.validator.routines.UrlValidator;

public class Share extends HttpServlet implements Servlet{

private static final long serialVersionUID = 1L;

DatastoreService ds;
String link,email,msgBody,title,name;
String[] schemes={"https","http","ftp"};
UrlValidator urlValidator;
boolean valid;
Query q;
PrintWriter out;
PreparedQuery pq;
Properties props;
Session session;
Message msg;

public void service(ServletRequest req, ServletResponse res)throws ServletException,IOException{

    title=req.getParameter("title").toString();
    link=req.getParameter("link").toString();
    //Instantiate UrlValidator
    urlValidator = new UrlValidator(schemes);
    out=res.getWriter();

    //Validate URL
    if (urlValidator.isValid(link)) {
           valid=true;
        } 
    else {
           valid=false;
        }

    if(valid){
        try{

            ds=DatastoreServiceFactory.getDatastoreService();
            q=new Query("email");
            pq=ds.prepare(q);

            //Query database to get all email ids
            for(Entity result : pq.asIterable()){

                email=result.getProperty("email").toString();
                name=result.getProperty("name").toString();

                //Instantiating the email prerequisites
                props=new Properties();
                session=Session.getDefaultInstance(props, null);
                msgBody=link;
                msg = new MimeMessage(session);
                msg.setFrom(new InternetAddress("webmaster@servshare.appspotmail.com", "WebMaster@ServShare"));
                msg.addRecipient(Message.RecipientType.TO,new InternetAddress(email, name));
                msg.setSubject(title);
                msg.setText(msgBody);

                //Sending out the uploaded link to all subscribers
                Transport.send(msg);

                out.println("<html><head><title>ServShare</title><meta http-equiv=\"refresh\" content=\"3; URL=index.jsp\"></head><body>Email sent! You will be redirected to the home page shortly.</body></html>");
            }

        }
        catch(Exception e){
            out.println("<html><body>An error was encountered while processing your request. Please go back and try again");
            e.printStackTrace();
        }
    }

    else{
        out.println("<html><head><title>ServShare</title><meta http-equiv=\"refresh\" content=\"3; URL=index.jsp\"></head><body>The entered URL is not valid. You will be redirected to the home page shortly.</body></html>");
    }
}

public void doGet(HttpServletRequest req, HttpServletResponse res)throws IOException,ServletException{
    service(req,res);
}

public void doPost(HttpServletRequest req, HttpServletResponse res)throws IOException,ServletException{
    service(req,res);
}

} 
```

这是错误：

HTTP 错误 500

访问 /Share 时出现问题。原因：

```
org/apache/commons/validator/routines/UrlValidator 
```

造成的：

java.lang.NoClassDefFoundError: org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java) 的 com.serv.servshare.Share.service(Share.java:41) 的 org/apache/commons/validator/routines/UrlValidator :511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74) 在 org. mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123) 在 org.mortbay.jetty.servlet.ServletHandler$ org.mortbay.jetty.servlet 的 com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34) 的 CachedChain.doFilter(ServletHandler.java:1157)。ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter( ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com .google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development .BackendServersFilter.doFilter(BackendServersFilter.java:97) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler .handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com。 google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 com.google.appengine.tools.development.JettyContainerService$ ApiProxyHandler.handle(JettyContainerService.java:409) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay.jetty.HttpParser.parseNext(HttpParser .java:547）在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 org.mortbay.io.nio.SelectChannelEndPoint。 run(SelectChannelEndPoint.java:409) at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 原因：java.lang.ClassNotFoundException: org.apache.commons.validator.routines.UrlValidator at java。 net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213) 在 java .lang.ClassLoader.loadClass(ClassLoader.java:356) ... 34 更多原因：

java.lang.ClassNotFoundException: org.apache.commons.validator.routines.UrlValidator at java.net.URLClassLoader$1.run(URLClassLoader.java:366) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at com.google.appengine.tools 的 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 的 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 的 java.security.AccessController.doPrivileged(Native Method)。 development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213) at java.lang.ClassLoader.loadClass(ClassLoader.java:356) at com.serv.servshare.Share.service(Share.java:41) at org.mortbay.jetty .servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.appengine.api.socket.dev。DevSocketFilter.doFilter(DevSocketFilter.java:74) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java: 123) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34) 在 org.mortbay.jetty .servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain .doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125) 在 org.mortbay.jetty .servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter (ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay。 jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp。WebAppContext.handle(WebAppContext.java:418) 在 com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)在 com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server .handle(Server.java:326) 在 org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 org.mortbay。 jetty.HttpParser.parseNext(HttpParser.java:547) 在 org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) 在 org.mortbay.jetty.HttpConnection。handle(HttpConnection.java:404) at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 由 Jetty 提供支持： //

我不知道是什么原因造成的。谢谢你的帮助。

我添加了这三个文件：commons-validator-1.4.0.jar、commons-validator-1.4.0-javadoc.jar 和 commons-validator-1.4.0-sources.jar。我通过项目属性-> java 构建路径-> 库-> 添加外部 jar 将它们添加到项目中。我将它们添加到我的项目下的运行/调试设置中：运行/调试->->源->添加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:42:08.657

如果将这些文件添加到 war/WEB-INF/lib 会发生什么？

# c++ - opencv 中的 V4L/AVLD 是什么？

> ID：15458034
> 
> 赞同：1
> 
> 时间：2013-03-17T06:01:36.183
> 
> 标签：c++, opencv, detection, geometry

我按照此页面中的说明进行操作：[http](http://wiki.elphel.com/index.php?title=OpenCV_Tennis_balls_recognizing_tutorial) ://wiki.elphel.com/index.php?title=OpenCV_Tennis_balls_recognizing_tutorial 来检测网球。此代码可以为 Python 运行，并且它的要求是 V4L/AVLD 用于形态学操作。它的使用功能`cvClose()`和`cvOpen()`扩张和侵蚀面具。我用 C++ 编写我的代码，所以使用`cvDilate()`和`cvErode()`代替，但结果不如那个网站好。

这是我的结果：[output.jpg](https://www.dropbox.com/s/1rdjzp4sw5b2agq/output.jpg)。（对不起，因为我没有足够的声誉来发布图片 T_T）这是我的完整代码：

```
#include "highgui.h"
#include "cv.h"
void main()
{
    IplImage* img = cvLoadImage("tennis.jpg",1);
    CvSize size = cvGetSize(img);
    IplImage *hsv = cvCreateImage(size, IPL_DEPTH_8U, 3);
    cvCvtColor(img, hsv, CV_BGR2HSV);
    CvMat *mask = cvCreateMat(size.height, size.width, CV_8UC1);
    cvInRangeS(hsv, cvScalar(0.11*256, 0.60*256, 0.20*256, 0),
                    cvScalar(0.14*256, 1.00*256, 1.00*256, 0), mask);
    cvReleaseImage(&hsv);
    IplConvKernel *se21 = cvCreateStructuringElementEx(21, 21, 10, 10, CV_SHAPE_RECT, NULL);
    IplConvKernel *se11 = cvCreateStructuringElementEx(11, 11, 5,  5,  CV_SHAPE_RECT, NULL);
    cvErode(mask, mask, se21); 
    cvDilate(mask, mask, se11);   
    cvReleaseStructuringElement(&se21);
    cvReleaseStructuringElement(&se11);

    /* Copy mask into a grayscale image */
    IplImage *hough_in = cvCreateImage(size, 8, 1);
    cvCopy(mask, hough_in, NULL);
    cvSmooth(hough_in, hough_in, CV_GAUSSIAN, 15, 15, 0, 0);

    /* Run the Hough function */
    CvMemStorage *storage = cvCreateMemStorage(0);
    CvSeq *circles = cvHoughCircles(hough_in, storage,CV_HOUGH_GRADIENT, 4, size.height/10, 100, 40, 0, 0);
    cvReleaseMemStorage(&storage);
    int i;
    for (i = 0; i < circles->total; i++) {
         float *p = (float*)cvGetSeqElem(circles, i);
         CvPoint center = cvPoint(cvRound(p[0]),cvRound(p[1]));
         CvScalar val = cvGet2D(mask, center.y, center.x);
         if (val.val[0] < 1) continue;
             cvCircle(img,  center, 3,             CV_RGB(0,255,0), -1, CV_AA, 0);
             cvCircle(img,  center, cvRound(p[2]), CV_RGB(255,0,0),  3, CV_AA, 0);
             cvCircle(mask, center, 3,             CV_RGB(0,255,0), -1, CV_AA, 0);
             cvCircle(mask, center, cvRound(p[2]), CV_RGB(255,0,0),  3, CV_AA, 0);
    }

    cvNamedWindow( "Output", CV_WINDOW_AUTOSIZE );
    cvShowImage( "Output", img );
    cvNamedWindow( "mask", CV_WINDOW_AUTOSIZE );
    cvShowImage( "mask", mask );
    cvWaitKey(0);
} 
```

有人可以帮助我获得 V4L/AVLD 并改进此代码吗？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:45:07.423

V4L/AVLD 用于网络摄像头。它与代码或算法没有任何关系。[http://allonlinux.free.fr/Projets/AVLD/](http://allonlinux.free.fr/Projets/AVLD/)

如果您使用的是 Linux，则需要安装 v4l-utls 软件包才能使用网络摄像头。

# java - 使用开始和结束偏移突出显示 JTextArea 中特定行上的文本

> ID：15458041
> 
> 赞同：2
> 
> 时间：2013-03-17T06:03:17.737
> 
> 标签：java, jtextarea, swing-highlighter

我有一种方法可以突出显示文本区域中所有出现的单词。有没有办法使用开始和结束偏移来突出显示该行中的单词。

我目前的代码。

```
public static void highlight(JTextComponent textComp, String pattern) {

    try {
        Highlighter hilite = textComp.getHighlighter();
        javax.swing.text.Document doc = textComp.getDocument();
        String text = doc.getText(0, doc.getLength());
        int pos = 0;

        // Search for pattern
        while ((pos = text.indexOf(pattern, pos)) >= 0) {
            // Create highlighter using private painter and apply around pattern
            hilite.addHighlight(pos, pos + pattern.length(), painter2);
            pos += pattern.length();
        }
    } catch (BadLocationException e) {
    }
} 
```

这在执行的 JButton 操作上调用：

```
highlight(textArea_1, "in"); 
```

结果： ![在此处输入图像描述](../Images/31e4d6033fe99acc6771eb1a1f823d2e.png)

**我尝试使用开始和结束偏移方法，但没有运气。我试图仅在第 6 行突出显示“in”。非常感谢任何帮助。**

```
static int iline =6;

    public static void highlight(JTextComponent textComp, String pattern) {

    try {
        Highlighter hilite = textComp.getHighlighter();
        javax.swing.text.Document doc = textComp.getDocument();
        int start =((JTextArea) textComp).getLineStartOffset(iline);
        int end = ((JTextArea) textComp).getLineEndOffset(iline);
        String text = doc.getText(start,end);
        int pos = start;

        // Search for pattern
        while ((pos = text.indexOf(pattern, pos)) >= start) {
            // Create highlighter using private painter and apply around pattern
            hilite.addHighlight(pos, pos + pattern.length(), painter2);
            pos += pattern.length();
        }
    } catch (BadLocationException e) {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:14:30.007

```
int start =((JTextArea) textComp).getLineStartOffset(iline);
int end = ((JTextArea) textComp).getLineEndOffset(iline);
String text = doc.getText(start,end);
int pos = start; 
```

假设我们每行有 10 个字符。因此，如果您想要第 6 行的文本，则起始变量将等于 51，结束变量将等于 60。

当您获得第 6 行的文本时，它将仅包含 10 个字符。

因此，当您从 51 开始搜索时，您已经在搜索字符串的末尾，因此您不会得到任何匹配项。

您只需在偏移量 0 处开始搜索，然后在添加高亮时需要将 start 的值添加到高亮偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:35:44.817

让它工作谢谢@camickr

代码：

```
public static void highlight(JTextComponent textComp, String pattern) {

    try {
        Highlighter hilite = textComp.getHighlighter();

        String text = textComp.getText();
        String line =null;
        int start = 0;
        int end;
        int totalLines = ((JTextArea) textComp).getLineCount();
        for (int i=0; i < totalLines; i++) {

            if(i==5){ //Line Numbers Decrement by 1
            start = ((JTextArea) textComp).getLineStartOffset(i);
            end   = ((JTextArea) textComp).getLineEndOffset(i);
            line = text.substring(start, end);
            System.out.println("My Line: " + line);
            System.out.println("Start Position of Line: " + start);
            System.out.println("End Position of Line: " + end);
            }
        }
        int pos = start;

        // Search for pattern
        if ((pos =text.indexOf(pattern, pos)) >= start) {
            // Create highlighter using private painter and apply around pattern
            hilite.addHighlight(pos, pos + pattern.length(), painter2);
            pos += pattern.length();
        }
    } catch (BadLocationException e) {
    }
} 
```

# ios - iOS 中的 JSON 处理：删除换行符

> ID：15458048
> 
> 赞同：0
> 
> 时间：2013-03-17T06:04:19.610
> 
> 标签：ios, json, twitter

我正在尝试解码从 Twitter 的 Streaming API 发送到我的应用程序的 json。

Twitter 将发送我的客户数据，其结构如下：

> 流式 API 响应的主体由一系列以换行符分隔的消息组成，其中“换行”被认为是 \r\n（十六进制，0x0D 0x0A），“消息”是 JSON 编码的数据结构或空行.

他们基本上用 \r\n 分隔推文。有时他们会向您发送一条推文，有时他们会一次向您发送许多推文。

解码“许多”案例对我来说是有问题的。我使用 iOS 内置的 NSJSONSerialization 类。问题是它读取了第一条推文，然后看到了 \r\n 并将其视为垃圾并返回一个空数组和伴随的错误。

为了解决这个问题，我使用以下代码基本上删除了换行符。

```
// json is the received json data
    NSString* responseString = [[NSString alloc] initWithData:json encoding:NSASCIIStringEncoding];

    NSMutableArray* responseMutableArray = [[responseString componentsSeparatedByString:@"\r\n"] mutableCopy];
    [responseMutableArray removeLastObject];

    NSArray* responseArray = [NSArray arrayWithArray:responseMutableArray];
    [responseMutableArray removeAllObjects];

    NSError* error;

    for(NSString* tweetString in responseArray)
    {
        NSDictionary* dict = [NSJSONSerialization JSONObjectWithData:[tweetString dataUsingEncoding:NSUTF8StringEncoding] options: NSJSONReadingAllowFragments|NSJSONReadingMutableContainers error:&error];
        [responseMutableArray addObject:dict];
    }
 //responseMutableArray contains the parsed tweets 
```

方法是，将数据转换为 NSString，将 NSString 转换为数组（通过 \r\n 拆分），数组返回数据，然后将 JSON 解析为字典。这是一个混乱的过程，我想知道是否有更有效的方法可以做到这一点。

非常感谢

维生素B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:12:25.577

试试这个：

```
NSString *string = [[NSString alloc] initWithData:json encoding:NSASCIIStringEncoding]:
string = [NSString stringWithFormat:@"[%@]", [string stringByReplacingOccurrencesOfString:@"\\r\\n" withString:@","]];
NSArray *array= [NSJSONSerialization JSONObjectWithData:[string dataUsingEncoding:NSUTF8StringEncoding] options:NSJSONReadingAllowFragments|NSJSONReadingMutableContainers error:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-31T11:44:43.823

触摸这个：

```
let stringData = String(data: data, encoding: NSUTF8StringEncoding)
if let strData = stringData {
    let newString = strData.stringByReplacingOccurrencesOfString("\r\n", withString: "\\r\\n")
    if let newString = newString {
        do  {
            let dict:[AnyObject] = try NSJSONSerialization.JSONObjectWithData(newString.dataUsingEncoding(NSUTF8StringEncoding)!, options: [.AllowFragments, .MutableContainers]) as! [AnyObject]
        }catch let e as NSError {
            print(e.description)
        }  
    } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T05:37:02.783

免责声明：我实际上是通过自己遇到这个问题来到这里的。

我认为最简单的解决方案是修改@Elmundo 的答案，完全删除换行符。它对我有用。

注意：这是 Swift 版本 3.something

```
guard var string = String(data: data, encoding: .utf8) else {
    return
}

string = string.stringByReplacingOccurrencesOfString("\r\n", withString: "")

guard let data = string.data(using: .utf8) else {
    return false
}

do  {
    let json = try NSJSONSerialization.jsonObject(with: data, options: JSONSerialization.ReadingOptions.allowFragments) as! [String:Any]
}catch let e as NSError {
    print(e.description)
} 
```

# c++ - cin：检查数字是整数还是浮点数，即使浮点值为 1.000

> ID：15458051
> 
> 赞同：1
> 
> 时间：2013-03-17T06:04:55.457
> 
> 标签：c++, string, floating-point, integer, cin

在以下列方式使用 std::cin >> number 时：

```
float number;
while(std::cin >> number) {
     //perform a check here if possible

    //if number does not contain a decimal point do this
    for(int i = 0; i < number; i++) {
        std::cin >> readMoreFloats; 
    }
    //otherwise read 1000 more floats
} 
```

有没有办法能够区分以下类型的行：

```
1.500 (1000 more floats)
2 2.000 2.000 
```

这些行将以浮点数或整数开头。如果这些行以浮点数开头，我想再读 1000 个浮点数。如果它是一个 int，我想读取那个数量的浮点数。我知道我可以将 float 转换为 int 并检查转换的 int 是否等于 float，但是当 float 具有诸如 1.000 之类的平面值时，这将不起作用。

我宁愿不使用 getline() 读取整行，因为在后面拆分它非常耗时，而且我已经知道所有输入都是浮点数，除了可能的第一个数字。另一种方法是将每行的第一个值作为字符串读入并检查它是否包含句点。有没有办法在不首先将输入作为字符串读取的情况下进行检查？或者是否需要字符串步骤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:18:36.823

您真的需要将其作为字符串读取以检查是否有点吗？

为什么不先取一个整数？

```
int intNum = 0; char ch;

cin >> intNum;
cin.get(ch); 
```

现在你可以使用另一个整数读取并组合到一个浮点数，如果有 ia dot ie`ch=='.'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:18:27.310

搜索点，如果它们是字符串，则按原样解析它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:22:01.677

一种方法是将第一个字段作为字符串读取，然后测试它是否包含小数位。如果是这样，则将其转换为浮点数并阅读更多内容。否则，将其转换为整数并读取那么多。这很好用，因为 cin 也会在字符串的空格处自动中断。

我认为以下代码应该可以工作：

```
#include <iostream>
#include <string>
int main()
{

    std::string myStr;
    std::cin >> myStr;

    float myVal = 0;

    if(myStr.find('.') != std::string::npos)
    {
        std::cout << "Is floating point, now convert this and read lots.\n";
        float myFloat = atof(myStr.c_str());
        for(int k =0; k < 1000; k++)
        {
            std::cin >> myVal;
        }
    }
    else
    {
        std::cout << "Is integer, so read just that many\n";
        int myInt = atoi(myStr.c_str());

        for(int k =0; k < myInt; k++)
        {
            std::cin >> myVal;
        }

    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:25:51.383

假设我正确理解了这个问题，也许你需要这样的东西：

```
using namespace std; // I'm lazy

string temp;
int number;
while(std::cin >> temp)
{
    number = 0;
    if (temp.find(".") != string::npos) number = 1000; // string has decimal point
    else istringstream(temp) >> number; // no decimal point, probably an integer

    for(int i = 0; i < number; i++) {
        std::cin >> readMoreFloats; 
    }
} 
```

我们使用检查字符串是否有小数点的基本方法来指示它是否为浮点数。假设您的输入文件的格式始终正确，并且始终省略整数的小数点（尽管根据某些解释，“2.”之类的值可能是有效的），这应该可以按您的预期工作。

# android - 当移动设备离开特定区域时发送短信

> ID：15458061
> 
> 赞同：3
> 
> 时间：2013-03-17T06:07:58.980
> 
> 标签：android, google-maps, gps

我正在构建一个 android 应用程序，它 1.Tracks 使用 GPS 跟踪手机位置并将其存储为文件 2.当手机离开指定区域时，它会向一个号码发送 SMS。

我已经使用 commonsware 实现了第一个，`Locationpoller`但我想知道如何实现第二个。

如何在地图上选择特定区域？当手机不在该区域时如何创建警报（或事件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:26:29.063

实施

`It sends a SMS to a number when the phone goes out of a specified area.`

您可以决定相对于您在地图上当前位置的半径，例如 5 公里。现在您将当前位置存储在共享首选项中。实施[服务](http://www.vogella.com/articles/AndroidServices/article.html)。使用[位置监听器](http://developer.android.com/reference/android/location/LocationListener.html)。因此，当调用[onLocationChanged()](http://developer.android.com/reference/android/location/LocationListener.html#onLocationChanged%28android.location.Location%29)时，您[可以计算](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5B%5D%29)新位置与共享首选项中存储的位置之间的距离。如果它超出了您决定的区域，则发送短信。

可能会奏效。

**编辑**：因为你的人拒绝发布任何代码，我找到了一些。以下是使用 Android 2.2 及更高版本以[编程方式发送短信](http://www.allappsdevelopers.com/TopicDetail.aspx?TopicID=43948ae6-ab67-413b-a65c-e765aac7192d)的方法，如果您无法确定用户的位置，我也会写一些内容供您参考：

```
import android.app.Activity;
import android.os.Bundle;
import android.app.PendingIntent;
import android.content.Intent;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.Button;
public class MainActivity extends Activity {
    Button btnSendSMS;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
       btnSendSMS.setOnClickListener(new 
       View.OnClickListener() {
           public void onClick(View v) {
        sendSMS(System.getProperty("numberToSendTo"), “Hello my friends!”);
           }
       });
    }
    //---sends an SMS message to another device---
    private void sendSMS(String phoneNumber, String message) {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:33:06.457

有多种方法可以指定地理区域：

一些常见的场景：

1）最简单的：一个有圆心和半径的圆。
2) 轴平行矩形
3) 一个（闭合的）多边形

对于所有这些，您
- 将这些区域的坐标存储为纬度/经度坐标对。

从 Gps 修复到修复您检查`isIside(area)`状态；当它从外到内变化时，它是一个“EnterArea”，如果它从内到外变化，它是一个LeaveArea。
一旦检测到 LeaveArea，就发送 SMS。

剩下的就是如何计算`isInside(area)`：

对于圆形：内部 =`if (distanceMeters(currentPoint, circleCenter) <= radiusMeters)`
对于矩形：每个移动平台都有一个点在矩形方法中。
对于多边形：使用来自互联网的 pointInPolygon()。

对于内部矩形和多边形：您可以使用原始 GPS (WGS84) 坐标进行计算。
对于内圈：`distanceMeters`. 每个平台都提供一种方法来计算两个纬度/经度坐标之间的距离。

# winforms - 刷新组合框列表中的数据

> ID：15458063
> 
> 赞同：0
> 
> 时间：2013-03-17T06:08:08.777
> 
> 标签：winforms, data-binding

我有一个数据表（作业），该表中有一个名为 StatusId 的列。我有另一个数据表（jobStatus）。作业表有 1 条作业记录，作业状态表包含所有作业状态。

在我的 winforms 表单上，我显示了作业记录，作业状态是一个显示作业状态表内容的组合框。列表部分 (DisplayMember) 绑定到 jobstatus 表，数据部分绑定到作业表。（ValueMember）所以一切都很好，当我的工作被选中并显示时，组合框会选择相应的工作状态......一切都很好。

现在我有另一个表单（JobStatus），我可以在其中添加更多的工作状态记录。因此，当我输入/更改工作记录时，我发现我需要另一个工作状态，所以我跳到我的工作状态表并输入我的新状态。然后我跳回到工作表，现在我希望能够在组合框中选择我的新工作状态。

我的问题是这个场景的最佳实践是什么，其中新记录已添加或编辑到用于在另一个表单上填充组合框的查找样式列表中。我尝试将代码放在表单的激活事件中，除了表单闪烁之外，它看起来很丑陋。

有任何想法吗？？？

我实际上是在按照您所说的进行操作，这让我更仔细地查看了代码。问题是我处理代码行的顺序，我发现当

旧代码

```
 cboCustomer.DataSource = Business.Contact.GetContact( Enums.ContactType.Customer ).Tables[0];
            sorted = ( ( DataTable ) cboCustomer.DataSource ).DefaultView;
            sorted.Sort = "Name ASC"; 
```

新代码在这里

```
 DataView dv = Business.Contact.GetContact( Enums.ContactType.Customer ).Tables[0].DefaultView;
            dv.Sort = "Name ASC";
            DataTable dt = dv.ToTable();
            cboCustomer.DataSource = dt; 
```

奇迹般有效。为你的帮助干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:09:37.347

您应该能够`Activated`毫无问题地使用该事件。这甚至是[文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.activated.aspx)所说的有利于：

> 您可以将此事件用于诸如在未激活表单时根据对表单数据所做的更改来更新表单内容等任务。

当然，当您在父表单上订阅此事件时，您会得到一些误报。考虑用户切换到表单*而不*尝试使用组合框控件的情况。这不是什么大问题，但在这种情况下，您将无缘无故地更新组合框。这很容易通过切换到处理组合框控件的[`Enter`事件来解决。](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx)仅当该特定控件获得焦点时才会引发此问题。该`Enter`事件的唯一限制是您不能从该事件处理程序内部更改焦点控件（但无论如何您都不想这样做）。

所以现在我们需要解决闪烁问题，我想你会发现它非常简单。在事件处理程序方法的开头（无论您使用哪个），在您开始更新组合框之前，调用它的[`BeginUpdate`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.beginupdate.aspx)。这可以防止控件在更新时闪烁（通过抑制绘制）。最后，您需要调用 来完成[`EndUpdate`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.endupdate.aspx)，这将重新启用绘画并执行一次重新绘画以反映您的更改。

我只是自己测试了这个，我没有看到任何闪烁。在重新绘制控件以反映您的更改时，您将获得的最多只是一次闪烁。显然，你不能做得比这更好。

# python - 在 Python 线程中传递的最小参数数是多少

> ID：15458065
> 
> 赞同：1
> 
> 时间：2013-03-17T06:08:36.747
> 
> 标签：python, multithreading

每个线程可以接受的参数数量是否最少？目前，我有 1 个线程只接受 1 个参数，端口。但是，当我尝试只将 1 个参数传入线程时，会出现以下错误：

```
TypeError: TCPServer() argument after * must be a sequence, no int 
```

我调用线程的代码：

```
serverThread = Thread(target = TCPServer, args = (port)) 
```

函数，TCPServer：

```
def TCPServer(serverPort):
    ##Function information here 
```

但是，如果我传入一个虚拟 int 变量，我没有任何错误消息，比如

```
serverThread = Thread(target = TCPServer, args = (port,123)) 
```

并将我的 TCPServer 函数设置为

```
def TCPServer(serverPort,test):
    ##Function information here 
```

Test 是一个虚拟变量，未在 TCPServer 函数中使用。

我必须在线程中传递至少 2 个参数吗？我如何只传递 1 个变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:09:27.360

您必须传递一个参数元组。单项元组仍然必须用逗号编写。使用`(port,)`而不是`(port)`.

# nio - NIO 和 ByteBuffers 跨线程的可见性

> ID：15458067
> 
> 赞同：0
> 
> 时间：2013-03-17T06:09:07.950
> 
> 标签：nio, bytebuffer

似乎在实现依赖 java nio 的服务器时，以下做法是标准的：

使用单个线程（和单个选择器）进行读取：

```
ByteBuffer buffer = . . .
selector.select()
...
channel.read(buffer)
if (isRequestComplete(buffer))
    processRequest(buffer) //will run in a separate thread

void processRequest(ByteBuffer buffer)
    new Thread(new Handler(buffer)).start() 
```

是的，我省略了大量代码

我的问题不是关于从通道中选择/读取的机制，而是在单独的线程而不是选择器线程中读取#buffer 的可见性语义。我在 javadoc 中看不到任何内容，说明从线程 A（上面的“处理程序”）中的 ByteBuffer 读取可以保证看到对线程 B 中的 ByteBuffer 的写入（上面的“选择器”）。
现在，在我看来，上面的代码根本不是多线程安全的，即它是错误的。但是我在许多教程甚至一些代码库中都看到了相同的模式（甚至总是没有提到可见性问题）；所以我想知道我是否遗漏了一些明显的东西。

注意：我特别关注“处理程序”线程仅从#buffer**读取**的情况 - 它从不向其中写入新字节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:15:11.300

这实际上似乎没问题。您需要证明选择器线程中的写入“[发生](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)在处理程序线程中的读取之前”。根据内存可见性规则，同一线程中的动作按程序顺序发生。新线程的创建也建立了happens-before。所以写发生在线程创建之前发生在读取之前。

如果您将其传递给例如`ExecutorService`.

# wpf - 如何处理 MVVM 中的多个窗口和对话框？

> ID：15458072
> 
> 赞同：1
> 
> 时间：2013-03-17T06:09:37.747
> 
> 标签：wpf, mvvm

有没有使用 MVVM 模式显示对话框窗口、打开和关闭它们以及从中检索数据的标准方法？

我看过这个：[http ://www.daedtech.com/mvvm-and-dialogs](http://www.daedtech.com/mvvm-and-dialogs)

我想用于显示特殊的对话框（视图/视图模型）。

如何处理 MVVM 中的多个窗口和对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:42:38.397

[这就是](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)我在 mvvm 中使用对话框时所做的:)

```
var result = this.uiDialogService.ShowDialog("Dialogwindow title goes here", dialogwindowVM); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:58:02.293

我见过的这种情况的最佳解决方案是[PRISM 的交互请求](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx)（参见“使用交互请求对象”标题）。它是用于打开对话框的最 MVVM 友好的抽象。交互请求是视图模型，与控件和视图元素分离，可以绑定到特定的视图。

样本。查看型号：

```
public IInteractionRequest ConfirmCancelInteractionRequest
{
    get
    {
        return this.confirmCancelInteractionRequest;
    }
}

this.confirmCancelInteractionRequest.Raise(
    new Confirmation("Are you sure you wish to cancel?"),
    confirmation =>
    {
        if (confirmation.Confirmed)
        {
            this.NavigateToQuestionnaireList();
        }
    }); 
```

看法：

```
<i:Interaction.Triggers>
    <prism:InteractionRequestTrigger 
            SourceObject="{Binding ConfirmCancelInteractionRequest}">

        <prism:PopupChildWindowAction
                  ContentTemplate="{StaticResource ConfirmWindowTemplate}"/>

    </prism:InteractionRequestTrigger>
</i:Interaction.Triggers>

<UserControl.Resources>
    <DataTemplate x:Key="ConfirmWindowTemplate">
        <Grid MinWidth="250" MinHeight="100">
            <TextBlock TextWrapping="Wrap" Grid.Row="0" Text="{Binding}"/>
        </Grid>
    </DataTemplate>
</UserControl.Resources> 
```

Wpf PRISM 在[这里](http://compositewpf.codeplex.com/)

# android-animation - 在android中放大和缩小imageview的动画

> ID：15458073
> 
> 赞同：6
> 
> 时间：2013-03-17T06:10:22.197
> 
> 标签：android-animation

单击imageview时如何设置放大和缩小？我希望我的程序在用户单击imageview时做出反应，必须在一定程度上变大并且可以在该屏幕上移动imageview，有时它会在触摸时缩小尺寸屏幕上的任何地方。再次单击时恢复原始大小我该怎么办？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-07-13T09:15:26.623

据我所知有两种方法。

第一种方式：

在 res 中创建一个名为“anim”的新文件夹。比在里面创建一个 xml 文件，例如 zoomin.xml。然后将以下代码放入其中。

```
<scale  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromXScale="1" 
  android:toXScale="5" 
  android:fromYScale="1" 
  android:toYScale="5" 
  android:pivotX="50%" 
  android:pivotY="50%" 
  android:duration="1000" 
  android:fillAfter="true">
</scale> 
```

再做一个缩小，但值相反。

```
<scale  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromXScale="5" 
  android:toXScale="1" 
  android:fromYScale="5" 
  android:toYScale="1" 
  android:pivotX="50%" 
  android:pivotY="50%" 
  android:duration="1000" 
  android:fillAfter="true">
</scale> 
```

您可以根据需要更改这些值。我认为它们是不言自明的。

现在在你的java代码中。

```
ImageView imageView = (imageView)findViewById(R.id.yourImageViewId);

Animation zoomin = AnimationUtils.loadAnimation(this, R.anim.zoomin);
Animation zoomout = AnimationUtils.loadAnimation(this, R.anim.zoomout);
imageView.setAnimation(zoomin);
imageView.setAnimation(zoomout); 
```

现在您只需要跟踪哪个是当前状态。并且对于每个状态执行这行代码：

```
imageView.startAnimation(zoomin); 
```

和

```
imageView.startAnimation(zoomout); 
```

例如：

```
imageView.setOnClickListener(new OnClickListener(){
            public void onClick(View v) {
                if(!pressed) {
                    v.startAnimation(zoomin);
                    pressed = !pressed;
                } else {
                    v.startAnimation(zoomout);
                    pressed = !pressed;
                }
            }
        }); 
```

另一种方式在这里描述：http: [//developer.android.com/training/animation/zoom.html](http://developer.android.com/training/animation/zoom.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T13:59:43.093

您可以按照本指南轻松完成此操作

[http://developer.android.com/training/animation/zoom.html](http://developer.android.com/training/animation/zoom.html)

很快你应该使用第三个图像视图，当用户触摸你想要的任何图像视图时它是不可见的，你可以通过在不可见的图像视图中使用动画来显示它。

# servicebus - Windows 服务总线点对点通信以减少广播

> ID：15458075
> 
> 赞同：0
> 
> 时间：2013-03-17T06:10:35.937
> 
> 标签：servicebus

我`Windows Service Bus 1.0`用来在不同进程之间进行通信，每个上下文事件流作为一个主题存在于总线上。

使用服务总线在有界上下文之间链接事件我需要一种方法来同步事件（或者换句话说，请求重播过去的事件）当有界上下文重新联机但想要限制返回的潜在消息泛滥时只去到请求它的端点，至少如果这是可以通过使用现有服务总线功能轻松完成的事情。

所以给定一个虚构的 ContextC 发送一条消息来请求来自 ContextA 和 ContextB 的所有先前事件，有没有办法让这些重播消息只发送到 ContextC？

将上下文映射为主题所有者（或者换句话说，将单个总线订阅者映射到总线主题）以促进上述单播重播的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:10:23.293

在我的世界里，我保持这些东西是松耦合的——每个上下文都把东西放在一个主题上，任何需要东西的人都订阅。

每个 SB 订阅都可以使用基于属性的服务总线的过滤工具（例如，您可以通过在消息上添加属性来标记事件，然后在订阅上设置过滤条件，这意味着只有列入白名单的事件类别适用于每个消费者）。

再加上您已经按主题分类的事实。

然后订阅和主题允许您处理事件而不会丢失任何事件或让发布者担心或追逐订阅者。

您还提到您在其他问题中将其绑定到事件存储 - 在这种情况下，您的消息有可能需要按顺序使用。如果是这种情况，您需要在消息中添加会话 ID。

我可以推测你为什么想要这个订户驱动的重新交付，但现在不会。在任何人回答如何使用服务总线最好地实现这一点之前，您需要先进一步解释/验证该概念和要求（通过提出解释您的更高级别目标的问题）。

# ruby-on-rails - 为什么 Rails on Passenger 找不到 formtastic/bootstrap.rb？

> ID：15458082
> 
> 赞同：0
> 
> 时间：2013-03-17T06:11:53.330
> 
> 标签：ruby-on-rails, gem, bundler

好吧，我在 $RUBYLIB/gems/formtastic-2.2.1/lib/formtastic 中找不到它

我也有这个目​​录我不明白：

/home/web/.bundler/ruby/1.9.1/formtastic-bootstrap-3428fef4f787

其中也不包括 formtastic/bootstrap.rb ，但我不知道为什么捆绑在那里存放那个宝石。我`bundle install`以 root 身份运行，而不是 web（谁拥有 Rails 文件）。

这颗宝石有一些很奇怪的地方。当我运行`bundle package` Gemfile 中的所有其他 gem 时，会被写入 vendor/bundle/ruby/1.9.1/gems/ 但不是这个。下面是它在 Gemfile 中的引用方式：

```
gem 'formtastic-bootstrap',   :git => "git://github.com/cgunther/formtastic-bootstrap.git", :branch => "bootstrap-2" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:03:27.533

这显然是由于您的 ruby​​ 环境管理器安装错误造成的。你用的是rbenv还是vrm？

我建议你完全删除 rbenv 或 rvm（谷歌它“删除 rvm”或 rbenv，很容易找到），然后重新安装你最喜欢的管理器（如果你犹豫，我会建议 rbenv）。请注意，您应该使用不是 web 或 root 的用户进行 rbenv 安装和 gems 安装。您可以创建一个“部署者”用户，然后按照这些步骤[https://gist.github.com/olistik/2627011](https://gist.github.com/olistik/2627011)（这是特定于 ubuntu，但应该很容易适应）

# ios6 - 访问同一个 ViewController 时使用 NavigationController 返回会崩溃

> ID：15458086
> 
> 赞同：0
> 
> 时间：2013-03-17T06:13:42.820
> 
> 标签：ios6, uiviewcontroller, uinavigationcontroller, push, back

下面是有问题的层次结构。

左上角的“ViewController - MyConnection”是我的主 ViewController。我实现了一个 NavigationController 系统。用户可以从主 VC 使用 Push 转到“Choose Server VC”或“Choose Test Type”VC。完成后，用户可以按回并返回主 VC，没问题。

用户还可以从主 VC 推送到“首选项”VC。从首选项 VC 中，用户也可以转到“选择服务器 VC”或“选择测试类型”VC，同样没有问题。

但是，当返回首选项 VC**然后**返回主 VC 时，**应用程序崩溃**了！

使用调试器 viewWillAppear 在主 VC 中被调用，但如果失败，那就是这里。

![故事板](../Images/cdff42d484ff304d205bcfae5ad2e93a.png)

我敢肯定这是我想念的简单的东西。所有的segues都有唯一的名字。

**调试器没有提供有关导致崩溃的原因**的大量详细信息。**有什么方法可以从调试器中获取更多细节？**

 ****编辑：**

viewWill 出现在 ViewController-MyConnection 中：

```
-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    [self.tableView reloadData];    

} 
```

在首选项 VC 中：

```
-(void) viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];
    [self.tableView reloadData];

} 
```

其他两个 VC 中没有 ViewWillAppear 方法**

# ruby-on-rails - Rails canscan 与 before_filter 相关的问题

> ID：15458089
> 
> 赞同：1
> 
> 时间：2013-03-17T06:14:16.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我最近将 cancan (1.6.9) 集成到我的 Rails (3.2.10) 项目中以进行授权，并且在 before_filter 中手动加载资源时遇到问题。这是我的场景的简要描述。

在 config/routes.rb 中，我有以下条目...

```
resources :users
match '/profile', :to => 'users#show' 
```

这是我的 users_controller.rb 的样子......

```
class UsersController < ApplicationController
  before_filter :load_show_resource, :only => :show
  load_and_authorize_resource
  ...
  def show
  end
  ...
  private

    def load_show_resource
      @user = params[:id] ? User.find(params[:id]) : current_user
    end
end 
```

如果我的 current_user 的 id 为 1，此代码将允许我访问 localhost:3000/users/1 但不能访问 localhost:3000/profile。

我的 cancan ability.rb 类中阻止此访问的条目如下所示 - 它是 cancan 部分。如果我注释掉无法条目，则两个网址都有效。

```
...
can [:show, :update], User, :id => user.id
cannot [:show, :update, :destroy], User do |u|
  u.site_id != user.site_id
end
.... 
```

不管 params[:id] 是否存在，不应该使用在 before_filter 中手动加载的资源来进行 show 操作吗？

有趣的是，如果我修改我的用户控制器（见下文）以使用 skip_load_and_authorize_resource :only => :show 并手动调用授权！在表演动作中，两个网址都有效。此外，如果我完全删除 cancan，则两个 url 都可以工作。

```
class UsersController < ApplicationController
  load_and_authorize_resource
  skip_load_and_authorize_resource :only => :show
  ...
  def show
    @user = params[:id] ? User.find(params[:id]) : current_user
authorize! :show, @user
  end
  ...
  private

    def load_show_resource
      @user = params[:id] ? User.find(params[:id]) : current_user
    end
end 
```

所以，我的问题是为什么[cancan 文档](https://github.com/ryanb/cancan/wiki/authorizing-controller-actions)中的 Override loading 中解释的内容在这种情况下不起作用？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:18:29.090

```
# controller

class UsersController < ApplicationController
  load_and_authorize_resource, :except => :show
  # skip_load_and_authorize_resource :only => :show
  ...
  def show
    @user = params[:id] ? User.find(params[:id]) : current_user
    authorize! :show, @user
  end
  ...
end

# ability.rb

can [:show, :update, :destroy], User do |u|
  u.id == user.id && u.site_id == user.site_id
end 
```

# mysql - MySQL REPLACE 和 DUPLICATE KEY 不给出列值的总和

> ID：15458090
> 
> 赞同：0
> 
> 时间：2013-03-17T06:14:23.283
> 
> 标签：mysql, replace, key, sql-update, duplicates

我有以下格式的表 StoreID | 物品编号 | 物品名称 | 数量。StoreID 和 ItemID 是 Pkeys。我正在尝试执行 mysql 查询并插入 StoreID ='ST1' ItemID ='IT1' ItemName='IT' Qty=1000 但是在这里我想插入记录，如果不存在，如果存在更新 Qty =数量+ 100。我尝试使用 mysql Replace into 和 Duplicate key update。它做了我想做的事情，除了数量没有增加。第一次执行时，下面的两个查询都将 Qty 设置为 0。我可以理解那是因为第一次没有重复的条目。我想要做的是添加记录（如果不存在给定数量）并在之后每次执行时仅更新数量

```
INSERT INTO Store_Items (storeID, itemId,itemName)  
VALUES ('STR004', '4534','K40')  
ON DUPLICATE KEY UPDATE currentStock = currentStock + 100;  

REPLACE INTO Store_Items  
        SET storeID ='STR004',  
         itemId='4534',  
         itemName='K40',  
         SUM(currentStock) as 'Total',  
         reorderLevel=1000; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:42:38.673

如果我理解正确，您的查询应该如下所示

```
INSERT INTO Store_Items (storeID, itemId, itemName, Qty)  
VALUES ('STR004', '4534','K40', 100)  
ON DUPLICATE KEY UPDATE Qty = IFNULL(Qty, 0) + 100; 
```

第一次插入后：

```
+---------+--------+----------+------+
| storeID | itemId | itemName | Qty  |
+---------+--------+----------+------+
| STR004  |   4534 | K40      |  100 |
+---------+--------+----------+------+ 
```

第二次插入后：

```
+---------+--------+----------+------+
| storeID | itemId | itemName | Qty  |
+---------+--------+----------+------+
| STR004  |   4534 | K40      |  200 |
+---------+--------+----------+------+ 
```

**[SQLFiddle](http://sqlfiddle.com/#!2/e23aa/1)**

# android - SQLite 数据库表格显示格式

> ID：15458093
> 
> 赞同：0
> 
> 时间：2013-03-17T06:14:41.380
> 
> 标签：android, sqlite

我为我的 android 应用程序创建了一个 sqlite 数据库。我有两个文本视图和一个将这些值插入数据库的更新按钮。最初表格列标签看起来不错，因为我`android:stretchColumns="*"`在`<TableLayout>`. 但是当我输入时，这些值不会显示在特定列下！我希望列格式正确。如何才能做到这一点？有什么建议么？提前致谢。这是我的视图数据库代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center_horizontal"
android:background="#cc0000"
android:fadingEdge="vertical"
android:orientation="vertical" >

<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:stretchColumns="*" >

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:text="ID"
            android:textColor="#eeddff"
            android:textSize="15sp"
            android:textStyle="italic"
            android:typeface="serif" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:text="Subject Name"
            android:textColor="#eeddff"
            android:textSize="15sp"
            android:textStyle="italic"
            android:typeface="serif" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="50"
            android:text="Assignment Number"
            android:textColor="#eeddff"
            android:textSize="15sp"
            android:textStyle="italic"
            android:typeface="serif" />
    </TableRow>

    <TableRow
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:weightSum="5">

        <TextView
            android:id="@+id/dataDisplay"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#eeddff"
            android:textSize="15sp"
            android:textStyle="italic"
            android:typeface="serif" />
    </TableRow>
</TableLayout> 
```

# c# - 更改 SelectedItem 时，Silverlight ListBox 抛出超出范围异常

> ID：15458098
> 
> 赞同：0
> 
> 时间：2013-03-17T06:15:24.747
> 
> 标签：c#, silverlight, mvvm

我有一些过去可以工作的 Silverlight XAML，但我似乎无法弄清楚我做了什么突然让它停止工作，甚至不知道如何更改它。

这是一些 XAML：

```
<ListBox ItemsSource="{Binding ItemsForSelectedPublisher}"
         SelectedItem="{Binding SelectedItemForPublisher, Mode=TwoWay}"
         DisplayMemberPath="ItemNameWithSelectionCount"
         SelectionMode="Single"
         HorizontalAlignment="Left" 
         FontSize="14" 
         Width="300" 
         Height="500"
         /> 
```

以及来自视图模型的一些代码：

```
 public ObservableCollection<ItemViewModel> ItemsForSelectedPublisher
    {
        get { return _itemsForSelectedPublisher; }
        private set
        {
            if (_itemsForSelectedPublisher != value)
            {
                _itemsForSelectedPublisher = value;
                RaisePropertyChanged(() => ItemsForSelectedPublisher);
            }
        }
    }

    public ItemViewModel SelectedItemForPublisher
    {
        get { return _selectedItemForPublisher; }
        set
        {
            if (_selectedItemForPublisher != value)
            {
                _selectedItemForPublisher = value;
                RaisePropertyChanged(() => SelectedItemForPublisher);
            }
        }
    } 
```

在 ListBox 的 SelectedItem 更改（第一次设置）后，Silverlight Application.UnhandledException 处理程序中捕获了以下异常。

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index
   at System.ThrowHelper.ThrowArgumentOutOfRangeException()
   at System.Collections.Generic.List`1.get_Item(Int32 index)
   at System.Windows.Automation.Peers.SelectorAutomationPeer.RaiseSelectionEvents(SelectionChangedEventArgs e)
   at System.Windows.Controls.Primitives.Selector.InvokeSelectionChanged(List`1 unselectedItems, List`1 selectedItems)
   at System.Windows.Controls.Primitives.Selector.SelectionChanger.End()
   at System.Windows.Controls.Primitives.Selector.SelectionChanger.SelectJustThisItem(Int32 oldIndex, Int32 newIndex)
   at System.Windows.Controls.ListBox.MakeSingleSelection(Int32 index)
   at System.Windows.Controls.ListBox.HandleItemSelection(ListBoxItem item, Boolean isMouseSelection)
   at System.Windows.Controls.ListBox.OnListBoxItemClicked(ListBoxItem item)
   at System.Windows.Controls.ListBoxItem.OnMouseLeftButtonDown(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonDown(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

据我所知，ListBox 得到了一些不正确的索引，但不知道它是什么或为什么会发生这种情况。有人知道这是怎么发生的吗？在这一点上，我不知道还能去哪里看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T00:51:35.030

经过大量研究，我发现根本原因是我自己的错（这并不奇怪）。显然，我自己的代码中的错误在于我的某些视图模型的 Equals() 覆盖不正确。这导致 ListBox 绑定失控并抛出超出范围的异常。

# c# - 同一个整数可以有多个枚举值吗？

> ID：15458101
> 
> 赞同：10
> 
> 时间：2013-03-17T06:16:22.407
> 
> 标签：c#, .net, enums, clr

同一个整数`.NET`可以有多个`enum`值吗？

例如。

```
public enum PersonGender
    {
        Unknown = 0,
        Male = 1,
        Female = 2,
        Intersex = 3,
        Indeterminate = 3,
        NonStated = 9,
        InadequatelyDescribed = 9
    } 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-17T06:39:26.607

在 C# 中，这是允许的，根据[C# 语言规范](http://msdn.microsoft.com/en-us/library/ms228593.aspx)，版本 4。部分`1.10 Enums`没有*明确*提到这种可能性，但是，稍后在部分中`14 Enums, 14.3`，我们看到：

> 多个`enum`成员可以共享相同的关联值。这个例子
> 
> ```
> enum Color {
>    Red,
>    Green,
>    Blue,
>    Max = Blue
> } 
> ```
> 
> 显示`enum`其中两个`enum`成员 -`Blue`和`Max`- 具有相同的关联值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T06:19:09.627

这很好用。您发布的代码绝对没有问题。它编译得很好并且可以在代码中工作，但需要注意的是

```
PersonGender.NonStated == PersonGender.InadequatelyDescribed 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T06:36:16.063

我发现这个 StackOverflow 帖子与这个问题有关。我认为这是如何工作的非常明智的讨论。[非唯一枚举值](https://stackoverflow.com/questions/8043027/non-unique-enum-values)

现在，我还可以补充一点，我认为这将是对枚举的模棱两可（因此是不正确的）使用。编写对其他人阅读有意义的代码很重要，在这种情况下，我会被这个枚举推迟。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T06:26:33.420

我建议在您的上下文中使用**枚举**不是正确的事情，而是您可以使用创建一个可以解决您的目的的类和方法。在你的课堂上是这样的： -

```
class A
{

    static readonly ABCD= new Dictionary<int,string>
        {
            { 1, "X" },
            { 2, "X" },
            { 3, "Y" }
            { 4, "Y" }
        }
} 
```

# android - 如何在 Android 中禁用或更改 Tab 下划线的颜色？

> ID：15458108
> 
> 赞同：1
> 
> 时间：2013-03-17T06:17:47.513
> 
> 标签：android

![在此处输入图像描述](../Images/6768af774ec20f6f24f028a99469c314.png)

![在此处输入图像描述](../Images/d27bc958c9688edb78e467781cd0eef3.png)

默认为灰色，但当我按住时颜色会从灰色顶部变为橙色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:58:24.100

如果您想隐藏带状线，您可以创建自己的选项卡指示器，然后带状线将不会显示。这将在运行时动态添加选项卡（您必须单独构建每个选项卡）。

我想你和 TabHost 一起工作（如果不是，请告诉我）。这是一个标签创建的示例。

```
// Create tab indicator (background with icon)
LinearLayout tabIndicator = (LinearLayout)getLayoutInflater().inflate(R.layout.tab_indicator, null);

// Create new tab spec from the TabHost
TabSpec newTab = mTabhost.newTabSpec(FINAL_ANY_TAG).setIndicator(tabIndicator);

newTab.setContent(R.id.tabContentXml);

mTabhost.addTab(newTab); 
```

虽然 tab_indicator.xml 是指示器（顶部）的布局文件，但它具有您想要构建的背景（带有用于按下和未按下的选择器）。

# javascript - 对插件内的字符串进行排序

> ID：15458109
> 
> 赞同：3
> 
> 时间：2013-03-17T06:17:48.123
> 
> 标签：javascript, html, algorithm, sorting

我在这里有一个为网站编写的 javascript 插件，我正在修改插件以添加一些额外的功能。

该插件之前接受了一个项目数组作为输入，如下所示（最终创建一个小的可视化）：

```
Tom Hank
Will Smith
Chirstopher Nolan
Keanu Reeves 
```

在内部，插件使用排序函数对名称进行排序，如下所示：

```
groups = groups.sort(function (a, b) {
            if (a.content > b.content) {
                return 1;
            }
            if (a.content < b.content) {
                return -1;
            }
            return 0;
        }); 
```

where`a.content`和`b.content`are all 字符串，例如`"Keanu Reaves"`etc。

但是，现在我已经更改了发送到插件的输入，而不是发送 input `strings`，我现在发送 html 作为输入。例如：

```
<div class="sampleDiv"><span class="">Keanu Reaves</span></div>
<div class="sampleDiv"><span class="">Christopher</span></div> etc. 
```

其中每个项目由

```
var itemSrc= '<div class="sampleDiv"><span class="">' +
              'Keanu Reaves' + 
             '</span></div>'; 
```

我必须对插件中的项目进行类似的排序（在那个排序函数中），但是现在我正在发送 html（a.content 现在有上面的 html），我想从 SO 那里得到一些关于如何在上面的函数（以前的排序也应该保留，以防我稍后将输入更改为仅发送字符串）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:35:06.043

在您的排序功能中，首先去除 html 标签。使用结果字符串，然后执行排序。

```
 groups = groups.sort(function (a, b) {
        var x = a.toLowerCase().replace(/<[a-zA-Z\/][^>]*>/g,''), y = b.toLowerCase().replace(/<[a-zA-Z\/][^>]*>/g,'');
        return x < y ? -1 : x > y ? 1 : 0;
    }); 
```

我希望这有帮助。

# windows-8 - 通过 MS Paint 保存图片时更改默认文件格式

> ID：15458110
> 
> 赞同：7
> 
> 时间：2013-03-17T06:18:07.060
> 
> 标签：windows-8

每次我尝试通过 MS Paint 保存图片时，默认格式是 .png，但我想要 .jpeg，从 MS Paint 保存图片时如何将 .jpeg 设置为默认格式？我经常保存图片，我不想每次都更改格式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T06:38:02.650

看看这个 Windows 论坛[帖子](http://answers.microsoft.com/en-us/windows/forum/windows_7-pictures/how-to-change-default-save-as-type-in-ms-paint/f01ce17c-274a-416b-ad7d-7c54c54e642e)。它的作用是创建一个快速访问链接，默认保存文件对话框为 jpeg，然后单击此图标将文件另存为 jpeg。

来自链接：

> 打开 PAINT，然后单击屏幕左上角的蓝色下拉框（这是提供保存文件的下拉选项的框），现在单击另存为，然后选择另存为格式，包括 JPEG出现在右侧，将光标移到 JPEG 选项上并右键单击（不是左键单击），将显示三个选项，单击（选择）顶部的选项，上面写着“添加到快速访问文件夹”。这将在绘图屏幕顶部的 DO 和 UNDO 箭头（图标）旁边创建一个新图标。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-03-23T04:14:13.117

除了[mark-hall](https://stackoverflow.com/users/479512/mark-hall)的回答：

由于作者[zdd](https://stackoverflow.com/users/1487475/zdd)要求使用键盘快捷键将文件保存为 jpeg，您现在可以使用键盘快捷键 ALT + 4（如果图标位于第 4 位）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-12T14:36:42.790

也应该有更好的版本：

1.  创建一个空白 jpg 图像并将其保存到某处的永久文件夹中

2.  右键单击图像，选择属性并将其设置为只读

3.  在 Windows 主菜单中搜索 Paint（不是 mspaint ！！！）

4.  右键单击“Paint”快捷方式并选择“属性”

5.  在 Target 字段中，将其替换为以下行：

    ```
    %windir%\system32\mspaint.exe "C:\Users\username\Documents\default1.jpg" 
    ```

6.  每次您想将某些内容保存为 .jpg 时，在主菜单中搜索 Paint(not mspaint!!) 即可！

7.  此外，您还可以按照其他人的描述将 JPG 快捷方式添加到 Paint 快速访问工具栏中

# scala - scala：如何更新超类属性

> ID：15458111
> 
> 赞同：0
> 
> 时间：2013-03-17T06:18:07.060
> 
> 标签：scala

我是*scala*新手，更新属性有问题。

我有一个继承自抽象类的类，如下所示：

```
abstract class A(x:type1,y:type1){
     val z:Option[type1]= None
     def void:type2 
} 

class B extends A(x,y){ 
     def this(x:type1,y:type1,z_:type1)= {this(x,y) val z=Some(z_)}
     def void:type2 = ??? 
} 
```

如果我调用 `new B(test,test,test)`它，它不会更新`z`始终保留的值`None`。

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:33:24.573

使用 val 您可以创建不可变的字段/变量。在子类中声明另一个。如果要更新它，请在超类中使用 var，在子类中使用赋值。这应该有效：

```
abstract class A(x:type1,y:type1){
     var z:Option[type1]= None
     def void:type2 
} 

class B extends A(x,y){ 
     def this(x:type1,y:type1,z_:type1)= {this(x,y) z=Some(z_)}
     def void:type2 = ??? 
} 
```

# java - 使用 Java 启用 PDF 快速 Web 视图？

> ID：15458120
> 
> 赞同：7
> 
> 时间：2013-03-17T06:18:58.300
> 
> 标签：java, pdf, itext

如何使用 Java 代码或任何开源 Java 库启用 PDF 的快速 Web 视图属性？

*注意：这也称为“线性化 PDF”。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:14:48.193

这是一种构建 PDF 的方式。如果您尝试启用它，您将需要重建 PDF - 您不能只设置一个标志。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-20T13:39:48.390

有一个名为 QPDF 的开源工具，它可以保存内容并且速度非常快。在 Unix 中，您将使用以下命令进行线性化：

```
qpdf --linearize input.pdf output.pdf 
```

在我看来，用Java调用它应该不会太难......

关于这个免费开源工具的完整文档在[这里](http://qpdf.sourceforge.net/files/qpdf-manual.html#ref.advanced-transformation)

编辑：[PDFclown](http://www.stefanochizzolini.it/en/projects/clown/index.html)现在还提供带有线性化支持的序列化 - 请参阅[http://www.massapi.com/source/PDFClown/java/pdfclown.lib/src/org/pdfclown/files/SerializationModeEnum.java.html](http://www.massapi.com/source/PDFClown/java/pdfclown.lib/src/org/pdfclown/files/SerializationModeEnum.java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-26T07:21:43.000

查看以下任何一项：

*   [文字](http://itextpdf.com/)
*   [gnujpdf](http://gnujpdf.sourceforge.net/)
*   [PDF 框](http://pdfbox.apache.org/)
*   [FOP](http://xmlgraphics.apache.org/fop/)
*   [自由报告](http://www.jfree.org/jfreereport/)
*   [PJX - （网站似乎已关闭）](http://www.etymon.com/epub.html)
*   [JPedal](http://www.jpedal.org/)
*   [PDFJet](http://pdfjet.com/os/edition.html)
*   [JPod](http://sourceforge.net/projects/jpodlib/)
*   [PDF 渲染器](http://java-source.net/open-source/pdf-libraries/pdf-renderer)
*   [大无脸](http://big.faceless.org/products/pdf)

希望这对你有帮助。

# .net - WebBrowser 控件不显示图像

> ID：15458124
> 
> 赞同：1
> 
> 时间：2013-03-17T06:19:19.110
> 
> 标签：.net, vb.net, winforms, webbrowser-control

我在 VB.NET 应用程序中使用 Visual Studio 的 WebBrowser 控件时遇到了这个问题。我放了控件，但是当我浏览时，图像无法正确显示。

我拿了一个随机的 wiki 页面，这发生了：

![](../Images/6ad2b1c4dedb144c90a03663bd7b1071.png)

我使用 VS2008 和 X64。

# javascript - 水平（旋转）网格

> ID：15458125
> 
> 赞同：2
> 
> 时间：2013-03-17T06:19:21.500
> 
> 标签：javascript, jquery, gridview

这个问题以前被关闭为“太模糊”。既然我真的很想得到答案，让我再试一次。

我花了几天时间寻找并尝试为控件找到基于 JavaScript 的实现，我呼吁更好的术语 a `horizontal grid`. 为了帮助您理解我的意思，让我们从常规网格开始。假设我有一个包含历史数据的数据库表，用于运送我想要显示的一些汽车零件。在常规网格（表格）控件中，它看起来像这样：

```
Date | Part 1 | Part 2 | Part 3 |
---------------------------------
3/15 |   5    |   6    |   7    |  |
3/16 |   4    |   3    |   1    |  |
3/17 |   2    |   4    |   5    |  V
3/18 |   5    |   1    |   8    | 
```

现在，假设我需要表示水平增长的相同数据集。这个想法是常规网格的行和列是倒置的，并且网格不是从上到下而是从左到右填充的。想想已经翻转的常规网格：

```
 |3/15| 3/16| 3/17| 3/18|
------------------------------- 
Part 1 |  5 |   4 |  2  |  5  |
Part 2 |  6 |   3 |  4  |  1  |
Part 3 |  7 |   1 |  5  |  8  |

            ---> 
```

对于一个小的数据集，我可以使用 HTML 表来执行此操作，但问题是数据集可能非常大（并且是动态的），因此当网格向右滚动时，分页或自动上传附加记录会很好。

正如我所提到的，进行搜索并没有真正找到任何东西。我愿意从头开始编写代码，但在开始之前，最好能获得一些关于现有控件的建议，我可以以这种方式重新工作

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T17:40:48.813

我相信你想做的就是所谓的矩阵转置。在这个我们可以用数组和下划线.js[网站在javascript中做到这一点](http://underscorejs.org/#zip)

```
var autoParts =[
    ['Date', 'Part 1 ', 'Part 2', 'Part 3'],
    ['3/15', 5, 6, 7],
    ['3/16', 4, 3, 1],
    ['3/17', 2, 4, 5],
    ['3/18', 5, 1, 8]
]

var rotatedAutoParts = _.zip.apply(null, autoParts); 
```

`rotatedAutoParts`现在包含：

```
[
    ["Date", "3/15", "3/16", "3/17", "3/18"],
    ["Part 1 ",5, 4, 2, 5],
    ["Part 2",6, 3, 4, 1],
    ["Part 3", 7, 1, 5, 8]
] 
```

正确设置数据后，您应该能够快速重新填充 HTML 表格。

# c++ - 不确定如何创建 MakeFIle

> ID：15458126
> 
> 赞同：0
> 
> 时间：2013-03-17T06:19:38.773
> 
> 标签：c++, linux, makefile

我在为包含 3 个 c++ 文件的项目创建 makefile 时遇到问题。

在包含文件（tree.h、helperMethods.h 和 main.cpp）的目录中，我首先使用命令*emacs makefile.make*。然后，在 emacs 中，我将 makefile 编写为：

```
all: tree.h helperMethods.h main.cpp
[tab]g++ -std=c++0x -o project3 tree.h helperMethods.h main.cpp 
```

我已经手动验证了命令*g++ -std=c++0x -o project3 tree.h helperMethods.h main.cpp*确实编译了这三个文件并生成了一个可以运行的可执行文件。

在此之后，我保存 makefile，退出 emacs，并尝试运行它。

首先我使用*了 make*但这返回了：

```
make: *** No targets specified and no makefile found.  Stop. 
```

然后我尝试使用*make -f makefile.make*但这也不起作用并返回：

```
make: Nothing to be done for `all'. 
```

在这一点上，我不确定为什么生成文件没有正确构建。我对makefile没有太多经验；我很确定我在 makefile 正文中的命令是正确的，但是我在编写它时没有正确设置它。

如果它完全相关，这里有 3 个文件：

树.h：

```
#ifndef tree_h
#define tree_h
#include <vector>

using namespace std;

template<class T>
class tree
{
public:
    tree<T> * parent;
    T element;
    vector<tree<T> > nodes;
    tree(const T& theElement)
    {
        element = theElement;
        nodes = vector<tree<T> >();
    }
    tree()
    {
        nodes = vector<tree<T> >();
    }
};

#endif 
```

助手方法.h

```
#ifndef helperMethods_h
#define helperMethods_h

#include "tree.h"

#include <tuple>
#include <string>
#include <iostream>
#include <vector>

using namespace std;

string printName(tuple<string, string, string> myTuple){
    string ret = "";
    if(std::get<0>(myTuple).length() > 0)
        ret += get<0>(myTuple) + " ";
    if(std::get<1>(myTuple).length() > 0 || std::get<2>(myTuple).length() > 0)
        ret += "(";
    if(std::get<1>(myTuple).length() > 0)
        ret += get<1>(myTuple);
    if(std::get<1>(myTuple).length() > 0 && std::get<2>(myTuple).length() > 0)
        ret += ", ";
    if(std::get<2>(myTuple).length() > 0)
        ret += get<2>(myTuple);
    if(std::get<1>(myTuple).length() > 0 || std::get<2>(myTuple).length() > 0)
        ret += ")";
    return ret;
}

bool tupleContain(tuple<string, string, string> myTuple, string myString){
    return (std::get<0>(myTuple).compare(myString) == 0) || (std::get<1>(myTuple).compare(myString) == 0);
}

void findElement(tree<tuple<string, string, string> > myTree, string myString, bool* found, vector<int> *ret)
{
    if(tupleContain(myTree.element, myString))
        *found = true;
    if(! * found)
    {
        for(int counter = 0; counter < (int)myTree.nodes.size(); counter ++)
        {
            if(!* found)
            {
                (*ret).push_back(counter);
                findElement(myTree.nodes.at(counter), myString, found, ret);
                if(!* found)
                    (*ret).pop_back();
            }
        }
    }
}

void getLineage(tree<tuple<string, string, string> > myTree, string myString){
    bool dummyForFound = false;
    bool * found = & dummyForFound;
    vector<int> lineage = vector<int>();
    vector<int> * pointer = & lineage;
    findElement(myTree, myString, found, &lineage);
    if(lineage.size() == 0)
    {
        cout << "Species not present" << endl;
        return;
    }
    vector<string> printString = vector<string>(lineage.size() + 1);
    tree<tuple<string, string, string> > * currentNodePointer = & myTree;
    for(int counter = 0; counter <= (int) lineage.size(); counter ++)
    {
        string currentLine = "";
        for(int counter2 = 0; counter2 < 2*((int) lineage.size() - counter); counter2 ++)
            currentLine += ">";
        if(counter != lineage.size())
            currentLine += " ";
        tree<tuple<string, string, string> > currentNode = * currentNodePointer;
        currentLine += printName(currentNode.element);
        if(counter < (int) lineage.size())
        {
            int foo = lineage.at(counter);
            tree<tuple<string, string, string> > currentNodeDummy = currentNode.nodes.at(foo);
            *currentNodePointer = currentNodeDummy;
        }
        printString.at(counter) = currentLine;
    }
    for(int counter = 0; counter < (int) printString.size(); counter ++)
        cout << printString.at(printString.size() - counter - 1) << endl;
    cout << endl;
}

void getCommonLineage(tree<tuple<string, string, string> > myTree , string name1, string name2)
{
    bool dummyForFound = false;
    bool * found = & dummyForFound;
    vector<int> lineage1 = vector<int>();
    vector<int> * pointer1 = & lineage1;
    vector<int> lineage2 = vector<int>();
    vector<int> * pointer2 = & lineage2;
    findElement(myTree, name1, found, pointer1);
    * found = false;
    findElement(myTree, name2, found, pointer2);
    if(lineage2.size() == 0 || lineage1.size() == 0)
    {
        cout << "At least one species not present." << endl;
        return;
    }
    bool stillSame = lineage1.at(0) == lineage2.at(0);
    cout << "Level[0] Common Ancestor: ROOT (ROOT, ROOT)" << endl;
    tree<tuple<string, string, string>> * lastSharedNode = & myTree;
    int finalCounter = 0;
    for(int counter = 0; counter < (int) min(lineage1.size(), lineage2.size()) && stillSame; counter ++)
    {
        tree<tuple<string, string, string> > dummyNode = * lastSharedNode;
        tree<tuple<string, string, string> > currentNode = dummyNode.nodes.at(lineage1.at(counter));
        *lastSharedNode = currentNode;
        if(counter < (int) min(lineage1.size(), lineage2.size()) - 1 && lineage1.at(counter + 1) != lineage2.at(counter + 1))
            stillSame = false;
        tuple<string, string, string> currentElement = currentNode.element;
        cout << "Level[" << counter + 1 << "] Commont Ancestor: " << printName(currentElement) << endl;
        finalCounter ++;
    }
    cout << endl;
    cout << "Ancestry unique to " << name1 << endl;
    tree<tuple<string, string, string> > savedNode = *lastSharedNode;
    tree<tuple<string, string, string> > * currentUnsharedNode = lastSharedNode;
    for(int counter = finalCounter; counter < (int) lineage1.size(); counter ++)
    {
        tree<tuple<string, string, string> > dummyNode = * currentUnsharedNode;
        tree<tuple<string, string, string> > currentNode = dummyNode.nodes.at(lineage1.at(counter));
        tuple<string, string, string> currentElement = currentNode.element;
        *currentUnsharedNode = currentNode;
        cout << "Level[" << counter + 1 << "] ";
        if(counter == lineage1.size() - 1)
            cout << "Species of interest: ";
        cout << printName(currentElement) << endl;
    }
    cout << endl;
    currentUnsharedNode = &savedNode;
    cout << "Ancestry unique to " << name2 << endl;
    for(int counter = finalCounter; counter < (int) lineage2.size(); counter ++)
    {
        tree<tuple<string, string, string> > dummyNode = * currentUnsharedNode;
        tree<tuple<string, string, string> > currentNode = dummyNode.nodes.at(lineage2.at(counter));
        tuple<string, string, string> currentElement = currentNode.element;
        *currentUnsharedNode = currentNode;
        cout << "Level[" << counter + 1 << "] ";
        if(counter == lineage2.size() - 1)
            cout << "Species of interest: ";
        cout << printName(currentElement) << endl;
    }
    cout << endl;
}
#endif 
```

主文件

```
#include "rapidxml.h"
#include "tree.h"
#include "helperMethods.h"

#include <string>
#include <string.h>
#include <stdio.h>
#include <iostream>
#include <vector>
#include <queue>
#include <tuple>

using namespace rapidxml;

int main(int argc, const char * arv[]){
    tuple<string, string, string> human ("Human", "Homo sapiens", "Species");
    tuple<string, string, string> apes ("Apes", "", "");
    tuple<string, string, string> dogs ("Dogs", "", "");
    tuple<string, string, string> root ("Root", "", "");
    tuple<string, string, string> bears ("Bears", "", "");
    tuple<string, string, string> cat ("Cat", "", "");
    tuple<string, string, string> horse ("Horse", "", "");
    tree<tuple<string, string, string> > myTree = tree<tuple<string, string, string>>(root);
    tree<tuple<string, string, string> > b = tree<tuple<string, string, string>>(dogs);
    tree<tuple<string, string, string> > c = tree<tuple<string, string, string>>(apes);
    tree<tuple<string, string, string> > d = tree<tuple<string, string, string>>(bears);
    tree<tuple<string, string, string> > e = tree<tuple<string, string, string>>(horse);
    tree<tuple<string, string, string> > f = tree<tuple<string, string, string>>(human);
    tree<tuple<string, string, string> > h = tree<tuple<string, string, string>>(cat);
    d.nodes.push_back(f);
    e.nodes.push_back(h);
    b.nodes.push_back(d);
    b.nodes.push_back(e);
    myTree.nodes.push_back(b);
    myTree.nodes.push_back(c);
    cout << printName(myTree.nodes.at(0).element);

    cout << "Welcome to my Tree of Life program!" << endl << endl;

    int choice = 1;
    while(choice == 1 || choice == 2) {
        cout << "Please choose from the following options:" << endl;
        cout << "   1.Get the lineage of a species" << endl;
        cout << "   2.Get the commmon lineage of two species" << endl;
        cout << "   3.Exit program" << endl << endl;
        cin >> choice;
        cout << endl;
        if(choice == 1)
        {
            cout << "Please enter the name of the species of interest:" << endl;
            string name;
            cin >> name;
            cout << endl;
            getLineage(myTree, name);
        }
        if(choice == 2)
        {
            string name1, name2;
            cout << "Please enter the name of the first species: " << endl;
            cin >> name1;
            cout << "Please enter the name of the second species: " << endl;
            cin >> name2;
            getCommonLineage(myTree, name1, name2);
        }
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:42:52.077

Makefile 通常在没有任何扩展名的情况下被调用`Makefile`（尽管也可以）。`makefile`如果您使用扩展名（*不推荐*），则必须告知`make`makefile 的名称。这是乏味和不必要的。

其次，您不需要将头文件放在编译命令行中，也不应该这样做。您使用`#include`文件中的行来指定头文件。所以你的编译命令可能如下所示：

```
g++ -std=c++0x -o project3 main.cpp 
```

现在，在该命令中：

*   `main.cpp`是*源*

*   `project3`是*目标*（即将创建的文件。）

还：

*   `tree.h`并且`helperMethods.h`是编译工作所必需的；编译*取决于*此文件。（您知道，但它们不会出现在命令行中，因此并不明显。）此外，如果它们发生变化，您必须重新编译您的文件。

一个 makefile 解释了如何从它的*源中创建一个**目标*，并且还列出了目标*的**依赖关系*。（从技术上讲，make 不区分*源*和*依赖*项；它认为它们都是*先决条件*。但是很容易识别差异。）

 ***因此对于上述命令，整个 make 配方可能如下所示：

```
project3: main.cpp tree.h helperMethods.h 
        g++ -std=c++0x -o project3 main.cpp 
```

通常，我们不使用像`main.cpp`;这样的文件名。相反，我们会调用 project3 的主文件`project3.cpp`，就像目标（输出）文件是`project3`. 事实上，如果你这样做了，并且你没有任何其他依赖项（头文件），你可以输入：

```
make project3 
```

*根本没有makefile*，并且`make`会想出命令：

```
g++ -o project3 project3.cpp 
```

在这种情况下，该命令将是错误的，因为它没有指定正确的 C++ 标准。但它通常有效，因此使用相同的基本名称命名您的目标和源是一个很好的理由。

还有一件事：你的文件`tree.h`是一个只有头文件的库，这很好。但`helperMethods.h`只是伪装成一个头文件。这确实是一个完整的实现。你应该解决这个问题。

Also, it's *really* a bad idea to put `using namespace std` in a header file. Header files should explicitly use the `std::` namespace prefix on everything which needs it. It's generally not recommended to use `using namespace std` anywhere, but it's particularly bad in header files because it silently pollutes the default namespace of any file which includes the header. This can lead to very obscure bugs, or compilation errors.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:40:29.627

学校项目，嗯？ `project3`对于您自己正在做的事情来说，这似乎是一个可怕的任意名称。

您不需要在 makefile 处理中包含 .h 文件，因为严格来说，它们永远不需要独立编译。您的 makefile 将需要一个从 main.cpp 构建 main.o 的规则，然后是一个从 main.o 构建可执行文件的规则。头文件应该作为 main.o 的依赖项添加，这样如果它们中的任何一个发生变化，`make`就会知道从那里重新构建。

基本上，它需要看起来像这样：

```
# http://stackoverflow.com/questions/15458126/unsure-how-to-create-a-makefile
all: project3

clean:
    -rm main.o project3

project3: main.o
    g++ -std=c++0x -o project3 main.o

main.o: main.cpp tree.h helperMethods.h
    g++ -std=c++0x -c main.cpp 
```

其他人可能会为此目的生成一个截然不同但同样有效的 makefile。这个过程有一定程度的自由度。

您在这里拥有的是构建整个事物的规则（请记住，如果没有提供目标，则会自动选择 makefile 中的第一个目标），清理任何中间文件的规则，从构建可执行文件的规则目标文件，以及从源文件构建目标文件的规则。这种方法不能很好地扩展。手动管理更大、更复杂的 makefile 的所有依赖项是不愉快的，但在这个非常简单的情况下，这很好。***

# java - 访问对象值 Java

> ID：15458131
> 
> 赞同：0
> 
> 时间：2013-03-17T06:20:29.583
> 
> 标签：java, class, object, methods

好的，我正在创建一个`simple`航班预订系统。我花了相当多的时间进行调试，现在即使是最简单的事情也难倒我。

我有一个看起来接近的界面：

```
public class Flight implements IFlight {

String destination;
String departure;
int clubrows = 0;
int ecorows = 0;

public Flight(String dest, String dept, int clubrow, int ecorow) {
    destination = dest;
    departure = dept;
    clubrows = clubrow;
    ecorows = ecorow;

}

public String getDestination() {
    return destination;
} 
```

这个类有很多类似的get方法。现在我正在尝试编写一个 for 循环，其中输入的每个值都被打印出来。所以我需要访问所有 0 值，然后访问所有 1 值等。现在看起来有点像这样：

```
public void flightManifest() { 
    System.out.println("Available flights: ");
    for(int i=0; i<flightCount ;i++){
        System.out.println("Flight number: "+flightCount  +", Destination: "+  +", Departure time: "+  );
    } 
```

因此，基本上每当我尝试访问变量时，我都会不停地调整它，那么我打算如何每次都访问这些值呢？

所以我存储它们的方式是这样的： flightArr[flightCount] = new Flight (dest, dept, clubrow, ecorow); 飞行计数++；或者至少这就是它的制作方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:23:29.893

为您的类提供一个`toString()`方法`Flight`，然后在循环中简单地调用它。

在该`toString()`方法中，返回您的类字段的字符串连接。就这样。

# c# - 如何在 MVP 模式中定义一组与数据模型的常见交互？

> ID：15458133
> 
> 赞同：0
> 
> 时间：2013-03-17T06:20:46.440
> 
> 标签：c#, winforms, mvp

我继承了一个 WinForms 应用程序，该应用程序在业务逻辑和 UI 控件之间的关注点分离方面存在重大问题。两者如此紧密地交织在一起，以至于在不引入显着回归的情况下，UI 修改/扩展几乎是不可能的。

作为 MVP 重构提案的一部分，我面临的问题之一是如何最好地定义影响我们模型的操作。在应用程序的多个区域中使用了很多这些操作（例如，更新客户历史记录），因此我不想将模型交互直接编码到演示器中。

许多影响给定持久对象的操作已经封装在该对象中（尽管是静态方法）。我应该继续这种模式，重构以使方法基于实例，还是将方法拆分为一组单独的类似 API 的类？

**编辑：**

我在这里真正要问的是：是否可以将影响模型的方法封装在定义模型的类中，或者我应该保留这些 POCO，并在一组单独的类中实现这些方法，这些类定义了模型的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:33:53.027

当您使用 MVP 架构时，业务逻辑和 UI 不应交织在一起。因为有演示者坐在业务逻辑和 UI 之间。Presenter只知道View的接口，Presenter订阅了View的事件。这就是已知的一切。您可以自由更改视图上的控件 - 排列、替换、更改颜色 - 任何 UI 内容。并且这些修改不会影响 Presenter。当然，这些修改不会影响业务逻辑。

现在关于演示者。它只是将 UI 事件转换为对 Model 的调用，然后通过 IView 接口更新 UI。对模型的调用是什么意思？这取决于。它可以调用业务逻辑所在的 WCF 等服务。它可以调用应用程序或域服务对象，或存储库（根据域驱动设计）。但不应该有业务逻辑。Presenter 是 UI 事件到模型调用的简单翻译器。它可以创建一些 DTO 对象以将它们分配给 View，但没有真正的业务。

和模型。Model 是所有那些由 Presenter 调用的类。业务逻辑就在这里。并且业务逻辑没有重复。如果您需要更新客户历史记录，那么它可以是 CustomerRepository，或者像 SalesService 这样的服务对象。每个演示者都会调用该对象，这需要更新客户历史记录。

建议 - 不要使用静态方法进行业务操作。它紧密结合你的对象。它使使用标准测试框架无法进行测试。使用实例方法。实现接口。嘲笑他们。您的系统将变得松散耦合和可测试。这就是 MVP 模式的好处变得可见的地方。

# java - 在java中使用oauth的Linkedin api调用

> ID：15458137
> 
> 赞同：2
> 
> 时间：2013-03-17T06:21:12.540
> 
> 标签：java, oauth-2.0, linkedin

我正在尝试获取 Linkedin 公司更新到我的网站。按照流程[https://developer.linkedin.com/documents/authentication](https://developer.linkedin.com/documents/authentication)并通过注册生成 api 密钥和密钥。

根据[文档](http://developer.linkedin.com/documents/authentication)，我能够在步骤 a 中生成授权码。对于步骤 b 生成访问令牌，我[在 java 中使用 OAuth](http://oauth.net/2/)。

```
request = OAuthClientRequest.tokenLocation("https://www.linkedin.com/uas/oauth2/accessToken")
                        .setGrantType(GrantType.AUTHORIZATION_CODE)
                        .setCode("****")
                        .setRedirectURI("https://www.example.in")
                        .setClientId("*******")
                        .setClientSecret("******").buildBodyMessage();
                    OAuthClient oAuthClient = new OAuthClient(new URLConnectionClient());
                    GitHubTokenResponse oAuthResponse = oAuthClient.accessToken(request, GitHubTokenResponse.class);
                    String accessToken = oAuthResponse.getAccessToken();
                    String expiresIn = oAuthResponse.getExpiresIn(); 
```

但是出现错误

```
OAuthProblemException{description='Missing parameters: access_token', error='invalid_request', uri='null', state='null', scope='null'}
at org.apache.amber.oauth2.common.exception.OAuthProblemException.error(OAuthProblemException.java:57)
at org.apache.amber.oauth2.common.utils.OAuthUtils.handleOAuthProblemException(OAuthUtils.java:166)
at org.apache.amber.oauth2.common.utils.OAuthUtils.handleMissingParameters(OAuthUtils.java:184)
at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validateRequiredParameters(OAuthClientValidator.java:90)
at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validateParameters(OAuthClientValidator.java:53)
at org.apache.amber.oauth2.client.validator.OAuthClientValidator.validate(OAuthClientValidator.java:49)
at org.apache.amber.oauth2.client.response.OAuthClientResponse.validate(OAuthClientResponse.java:64)
at org.apache.amber.oauth2.client.response.OAuthClientResponse.init(OAuthClientResponse.java:59)
at org.apache.amber.oauth2.client.response.OAuthAccessTokenResponse.init(OAuthAccessTokenResponse.java:52)
at org.apache.amber.oauth2.client.response.OAuthClientResponseFactory.createCustomResponse(OAuthClientResponseFactory.java:60)
at org.apache.amber.oauth2.client.URLConnectionClient.execute(URLConnectionClient.java:105) 
```

请帮助解决这个问题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T17:19:38.907

我发现了这个问题。

Looks like there is a problem in the documentation. Apologies.

Right call is

```
request = OAuthClientRequest.tokenLocation("https://www.linkedin.com/uas/oauth2/accessToken")
                    .setGrantType(ResponseType.CODE.toString())
                    .setCode("****")
                    .setRedirectURI("https://www.example.in")
                    .setClientId("*******")
                    .setClientSecret("******").buildBodyMessage(); 
```

Mind `ResponseType.CODE.toString()` rather than `GrantType.AUTHORIZATION_CODE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:32:34.020

我建议您在[此处](http://developer.linkedin.com/documents/authentication)阅读一些linkedin 开发人员文档，并查看 java [OAuth 库](http://oauth.net/code/)，而不是手动执行签名过程。然后你可以问一个具体的问题。

# database - 数据库同步算法建议

> ID：15458140
> 
> 赞同：15
> 
> 时间：2013-03-17T06:22:43.047
> 
> 标签：database, algorithm, sync

我正在开发一个需要实现数据同步算法的应用程序。

我们将有一个主服务器和多个从属设备，它们需要同步在一起。

现在，我有三种算法，我想根据你们中的任何人就哪一种是最好的算法提出建议。我真的很感谢你的意见。

**1.**算法的描述可以在这里找到。它是韩国汉阳大学信息和通信系 Sang-Wook Kim 的科学研究论文

[http://goo.gl/yFCHG](http://goo.gl/yFCHG)

**2**该算法涉及维护数据库的时间戳和版本号记录

例如，如果一个人的移动设备和服务器上的版本为 v10 ，则移动设备上的版本为 v12 ，假设与服务器上的时间戳相比，移动设备上的当前时间戳较新，

如果我们用 - 表示删除，用 + 表示插入，用 ~ 表示更改

以下更改日志与几个版本相关联：

v11: +r(44),~r(45),-r(46) v12:-r(44),~r(45),+r(47)

那么数据库的整体变化是 ,~r(45) (from v12),+r(47),-r(46)

因此可以看出，记录 r(44) 是不需要的，即使它被添加，然后随后被删除。因此不需要传输冗余数据。

整个算法可以在这里找到（我把它放在一个 pdf 中）[http://goo.gl/yPC7A](http://goo.gl/yPC7A)

**3**这个算法实际上 - 保留一个记录每条记录的最后更改时间戳的表。并根据时间戳对行进行排序。它仅同步那些已更改的行，我在这里看到的唯一问题是每次根据排序表到时间戳。

这是一个链接[http://goo.gl/8enHO](http://goo.gl/8enHO)

非常感谢您的意见！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T18:23:27.343

我自己并没有直接参与其中，但是当人们在做这类事情时我就在身边。他们的设计不是由算法分析或性能搜索驱动的，而是通过与最终用户代表讨论收到冲突更新请求时该怎么做的几个小时。您可能希望与用户一起处理一些用例。用户甚至可能希望针对不同位置的不同类型数据采用不同类型的冲突解决方案。

这里的所有设计都通过传播更改来节省带宽。如果某件事导致一方不再是另一方的精确副本，那么这种不一致可能会无限期地持续下去。您至少可以通过交换校验和（如果您足够担心，则为 SHA-2 或 SHA-3）来检测此类问题。一个想法是向接收系统询问校验和，然后根据该校验和选择更新包。

# c# - ASP.Net / C# 4.5 -- 异步处理 -- 异步等待

> ID：15458146
> 
> 赞同：0
> 
> 时间：2013-03-17T06:23:23.833
> 
> 标签：c#, asp.net, asynchronous, async-await

我正在寻找我应该走的最佳路线的方向。我已经发布了几次，偏离了一些推荐的设计模式。根据我想要完成的工作，我还没有真正得到一个好的方向。我是使用异步处理的新手，希望能得到一些正确方向的指点。到目前为止，在我之前的一篇文章中，我被称为无知，因为我要求提供代码示例。请理解我一直在阅读所有内容，并尝试了我在互联网上可以找到的所有内容。不用说，我可以有很多不同的方向，我不确定哪个是最好的。

我将在高层次上解释我正在尝试做的事情，如果有人可以通过为我指出正确的方向来帮助我，我将不胜感激。另外，如果有人可以向我指出一些代码示例，我会喜欢的。我不介意阅读这些材料，但如果我能看到代码与它所说的内容相一致，那就更有意义了。我发现的大多数文档都有代码示例或部分代码示例，我一直在尽最大努力尝试使用我发现的内容来满足我的特定需求。到目前为止，运气并不好。我承认，当谈到 ASYNC 处理时，我想我是无知的。:)

无论如何，这就是我想要完成的。我忽略了我可能考虑使用的任何特定技术，以避免关于我发布的内容是否过时或落后的争论。我正在寻找一个正确方向的观点，并且在这一点上我对任何事情都持开放态度。我只需要让这个工作。

## 这是我需要做的基础知识

1.  我有一个正在使用的 ASP.Net 网站“项目”。
2.  我有一个用于使用 Active Reports 7 打印报告的屏幕。
3.  我的任务是允许用户单击“打印/预览”按钮并启动报告处理。
4.  在报表运行时，我需要让用户能够单击“取消”按钮并终止处理并返回报表屏幕。（因此，在报告处理期间，UI 需要做出响应，以便用户可以单击取消按钮。）
5.  在处理报告时，我需要显示一条弹出消息以指示报告正在运行。
6.  当报告完成处理后，我需要隐藏此弹出消息，以向用户指示报告已完成。然后我需要打开报告以供用户查看。目前，这是我们在报表处理代码期间准备的一个 JavaScript 函数，它打开一个新窗口并调用报表查看器。（因此，报告完成后，我需要能够调用 javascript 函数。）

如果有人能指出我正确的方向，我将不胜感激。我不介意做腿部工作和阅读大量文档。我只需要能够知道我在看什么将为我提供上述功能。就像我之前所说的，无论是否无知，如果我能得到一些示例工作代码（不要求任何人为我编写代码，只是一些我可以逐步完成并帮助了解正在发生的事情的代码），那将有很大帮助。

提前感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:39:40.070

由于您希望在服务器端发生一些操作以及 UI 响应和显示进度。显示事件的进展。我建议使用 Signalr.Net。

[http://signalr.net/](http://signalr.net/)

[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)

这是一个实时 Web api，您可以使用它创建一个集线器，该集线器具有“ProcessReport”和“cancelProcessing”等功能，您可以在单击按钮打开连接时从 javascript 调用它，并使用取消按钮显示进度弹出窗口。在 js 中向集线器注册一个客户端事件说“updatestatus”，一旦操作完成，可以从服务器调用它以关闭弹出窗口并最终关闭信号器连接。同样，在弹出的取消单击中，您可以再次调用中心函数 cancelProcessing 并执行取消并使用 updateStatus 回调。

希望这可以帮助。

# c# - 当另一个表单关闭时运行一些代码

> ID：15458152
> 
> 赞同：3
> 
> 时间：2013-03-17T06:24:09.780
> 
> 标签：c#, winforms, formclosing

我有一个 ID 为 Form1 的 winform，在此表单中，我创建了另一个 ID 为 Form2 的表单的新对象并显示它：

**Form1中的代码：**

```
Form2 f2 = new Form2();
f2.show(); 
```

当用户 f2 关闭时，我想在 Form1 中运行一些代码：

请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T06:28:12.767

```
private void button1_Click(object sender, EventArgs e)
{
    Form2 frm = new Form2();
    frm.FormClosed+= Form2Closed;
    frm.Show();

}

private void Form2Closed(object sender, EventArgs e)
{
    //frm has been closed
} 
```

# java - Tomcat 推送到 Java 客户端

> ID：15458153
> 
> 赞同：0
> 
> 时间：2013-03-17T06:24:11.120
> 
> 标签：java, tomcat, asynchronous, comet

我正在尝试构建一个 Java Web 应用程序，它可以让我浏览 NAT 路由器后面的远程文件系统。客户端只能与出站 HTTP 通信。

我的远程机器上的 Java 客户端与我的 Tomcat 服务器通信，然后将数据作为网页备份。像这样的东西：

```
File Server (java client) -> Web Server <- Browser 
```

我想不通的是如何让 Tomcat 服务器与远程 Java 客户端对话。

我想要发生的是：

*   用户在浏览器中单击文件夹。
*   浏览器 ajax 到服务器。
*   Tomcat 服务器联系远程 java 客户端。
*   远程 java 客户端以目录列表响应。
*   Tomcat 服务器将格式为 HTML 的新数据发回给用户。

我看过 Comet 和 Tomcat 7 的异步内容，但我很挣扎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T13:18:31.947

如果您需要通过 HTTP 进行全双工通信，我强烈建议您使用[Atmosphere](https://github.com/Atmosphere/atmosphere)和[Web Sockets](http://en.wikipedia.org/wiki/WebSocket)。它大大简化了服务器推送，并且它与容器无关（框架）。

在这种情况下，您可以为远程 java 客户端使用[异步 Http 客户端](https://github.com/AsyncHttpClient/async-http-client)库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:45:06.867

如果你想实现一个 PUSH 行为，那么[Commet](http://tomcat.apache.org/tomcat-6.0-doc/aio.html)是要走的路。

如果客户端很少，也许您可​​以通过允许客户端每隔几秒钟不断地从服务器拉取更改来解决您的要求。

# applescript - Applescript 替换消息应用程序中发送和接收的消息

> ID：15458162
> 
> 赞同：0
> 
> 时间：2013-03-17T06:26:19.470
> 
> 标签：applescript, messages

我发现这个脚本可以更改消息中字符的大写和小写，但我想修改此代码以替换文本中的某些字符串，例如：收到的消息是“我想吃”，此消息将更改为“我喜欢吃”或“:)”更改为“:-)”。

```
property lowercaseCharacters : "abcdefghijklmnopqrstuvwxyz"
property uppercaseCharacters : "ABCDEFGHIJKLMNOPQRSTUVWXYZ"
on intercaps(str)
set theCharacters to characters of str
set theCount to 1
repeat with aChar in theCharacters
if (aChar is in uppercaseCharacters or aChar is in lowercaseCharacters) then
if (theCount mod 2) is equal to 1 then
set contents of aChar to character (offset of aChar in lowercaseCharacters) of uppercaseCharacters
else
set contents of aChar to character (offset of aChar in uppercaseCharacters) of lowercaseCharacters
end if
end if
set theCount to theCount + 1
end repeat
return theCharacters as string
end intercaps
using terms from application "Messages"
on message sent theMessage for theChat
return intercaps(theMessage)
end message sent
on message received theMessage from theBuddy for theChat
return intercaps(theMessage)
end message received
on chat room message received theMessage from theBuddy for theChat
return intercaps(theMessage)
end chat room message received  
end using terms from 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:37:41.560

[这](http://www.macosxautomation.com/applescript/sbrt/sbrt-06.html)是一种方法：

```
set myText to replace_chars("i want to eat", "want", "would like")

on replace_chars(this_text, search_string, replacement_string)
    set AppleScript's text item delimiters to the search_string
    set the item_list to every text item of this_text
    set AppleScript's text item delimiters to the replacement_string
    set this_text to the item_list as string
    set AppleScript's text item delimiters to ""
    return this_text
end replace_chars 
```

# perl - HTML 表单操作最终下载 perl 文件而不是执行它

> ID：15458169
> 
> 赞同：0
> 
> 时间：2013-03-17T06:26:46.493
> 
> 标签：perl, apache, cgi

我一直在尝试在 Windows 7 上运行一个简单的 perl-cgi 脚本。这是一个带有 OK 按钮的简单 HTML 表单，单击 OK 按钮会显示一些文本。但是点击 HTML 页面上的 OK 按钮，浏览器开始下载脚本，而不是执行和显示 perl 文件的输出。我在 httpd.conf 中添加了处理程序

```
AddHandler cgi-script .pl 
```

但这无济于事。我在 httpd.conf 中添加了 ExecCGI 选项，但这也没有帮助。

```
<Directory "C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin">
    AllowOverride None
    Options ExecCGI -MultiViews +SymLinksIfOwnerMatch
    Order allow,deny
    Allow from all
</Directory> 
```

这是正在使用的 perl 脚本：

```
#!C:\Perl\bin\perl
use CGI;

print "Content-type: text/plain","\n\n";
print "<html>","\n";
print "<head>\n\t<title>Server Information Ready</title>\n</head>","\n";
print "<body>","\n";
print "<h1>Server Information</h1>","\n";
print "</body></html>","\n"; 
```

这是html文件：

```
<html>
<head><title>Server Information</title></head>
<body bgcolor="#EEAA55">
<h3>Please click OK to get the server information</h3>
<hr><pre>
<form action="http://localhost/cgi-bin/ctest/pranav1a.pl" method="post">
<input type="submit" value="OK">
</form>
</hr></pre>
</body>
</html> 
```

我在 chrome、IE 和 Mozilla 上试过这个。Mozilla 和 chrome 开始下载 perl 文件，但 IE 在单击 OK 按钮时只会显示一些奇怪的内容。**如何使浏览器显示文件执行的输出而不是开始脚本下载？**

PS：我尝试将 shebang 行用作 '#!c:/Perl/bin/perl' 似乎也不起作用。从 cmd 提示符执行时，我可以看到 perl 脚本的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:05:24.267

找到了解决方案：在我的情况下，我在表单操作中使用“localhost”而不是“localhost:8080”。

```
<form action="http://localhost:8080/cgi-bin/pranav1a.pl" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T20:13:35.700

选项怎么样`+ExecCGI`？试试`+`前面的。

另外，这些通常是理解 suexec2 的问题（不确定 suexec2 是否适用于 Windows 平台）：

在那里阅读[整页](http://httpd.apache.org/docs/2.2/suexec.html)。如果您不了解 suexec 实施的总体限制，则此类问题无法解决。常见错误有：

*   suexec2 可执行文件的权限错误。
*   CGI 脚本位于错误的位置。

您是否通过[apache.org/docs/2.2/howto/cgi.html#troubleshoot](http://httpd.apache.org/docs/2.2/howto/cgi.html#troubleshoot)工作过？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-27T20:42:27.607

谢谢斯卡沃科维奇。

在我的例子中，以下行在 httpd.conf 文件中被注释掉了。

```
#LoadModule cgi_module /opt/freeware/lib64/httpd/modules/mod_cgi.so 
```

取消注释并重新启动`apache`允许 CGI 脚本运行而不是作为文本文件打开。

# android - Android：如何从 mediaRecorder 创建的音频文件中获取音高？

> ID：15458171
> 
> 赞同：1
> 
> 时间：2013-03-17T06:27:01.733
> 
> 标签：android, audio

我使用 Class MediaRecorder 录制“.wav”文件。

我可以通过 getMaxAmplitude() 找到幅度。

但是我怎样才能找到音频文件的音高或频率呢？这个类提供的功能不多。请帮忙。

[http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

# ios - 加载uiviewcontroller后更新xib视图的位置？

> ID：15458174
> 
> 赞同：2
> 
> 时间：2013-03-17T06:28:03.467
> 
> 标签：ios, uiviewcontroller

我有一个简单的 UIViewController，它有一个相应的 .xib 文件。

```
ViewController *v = [[ViewController alloc] initWithNibName:@"ViewController" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:v animated:YES]; 
```

在这个 .xib 文件中，我有一个 UILabel，它位于屏幕中间。加载视图后，我想将此标签移动到新位置，但在它可见之前：

```
label.center = CGPointMake(0,0); 
```

当我尝试将上述代码放入以下方法时，会发生以下情况：

*   `initWithNibName:bundle`: 位置不更新
*   `awakeFromNib`: 位置不更新
*   `viewDidLoad`: 位置不更新
*   `viewWillAppear`: 位置不更新
*   `viewDidAppear`: 位置仅在视图完全加载后更新（即标签的原始位置可以在一瞬间看到）。

当我尝试更新类似 text 属性的内容时：

```
label.text = @"Foo"; 
```

...它适用于所有这些方法。出于某种原因，它只是被 .xib 文件覆盖的位置。

当我说“位置不更新”时，我的意思是当标签显示在屏幕上时，它位于 .xib 文件中定义的位置，而不是我试图覆盖它的位置。

当我尝试到`NSLog`该位置时，它显示它正确更新它，但是当我再次检查该位置时`viewDidAppear`，它显示不正确的值。例如，假设 .xib 将 x 定义为 99，我想将其更改为 0：

```
- (void)viewWillAppear:(BOOL)animated {
    label.center = CGPointMake(0,0);
    NSLog(@"%f", label.center.x); // reports 0
}

- (void)viewDidAppear:(BOOL)animated {
    NSLog(@"%f", label.center.x); // reports 99 (Error: should be 0)
    label.center = resultLabelHiddenCenter;
    NSLog(@"%f", label.center.x); // reports 0
} 
```

如何在没有任何视觉故障的情况下显示视图之前更新标签的中心？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T07:06:51.037

我认为，您正在使用`autoLayout`您的 xib。

![在此处输入图像描述](../Images/99e4756ffcfc9d7f7c85c20d1fa8417e.png)

在我的脑海中，我有两个解决方案。

**第一个是**，请不要使用，`setFrame`否则 会跳过它们。`setBounds``Autolayout`

更改约束是最好的解决方案。您还可以添加/删除额外的约束。

WWDC 2012 中提供了一个关于调整的优秀视频 [教程。](https://developer.apple.com/videos/wwdc/2012/?id=202)`Autolayout`

![在此处输入图像描述](../Images/24bc0b54b2edfbb1bfce3deb5c4e18c1.png)

**第二个是**,Implement `viewDidLayoutSubviews`，它会在视图控制器的视图 layoutSubviews 方法被调用后调用。

```
- (void)viewDidLayoutSubviews
{
    @try
    {
         // reset label frame here.
    }
    @catch (NSException *exception)
    {
        NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
    }
} 
```

# c++ - 编译器如何隐式进行这种转换？

> ID：15458187
> 
> 赞同：2
> 
> 时间：2013-03-17T06:30:48.587
> 
> 标签：c++, implicit-conversion

我正在观看来自 //build 的视频，其中 Herb Sutter 使用代码片段展示了显式转换关键字的好处：

```
template< /* ... */ > class unique_ptr {
public:
    // ...
    explicit operator bool() const { return get() != nullptr; } 
```

他说用那个关键字，我们可以防止它编译：

```
use(ptr * 42); // oops, meant *(ptr) * 42 
```

实在看不懂，showcase是怎么编译的？编译器如何进行转换？到什么类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:35:13.673

它隐式转换`unique_ptr`为 bool，然后从 bool 转换为 int 以进行乘法运算。

（bool to int 表示 true 为 1，false 为 0）

# android - 在安卓设备中使用 neo4j

> ID：15458188
> 
> 赞同：5
> 
> 时间：2013-03-17T06:31:11.173
> 
> 标签：android, neo4j

我正在尝试使用 NEO4J 在我的 android 设备中创建一个数据库。但是应用程序崩溃了。

```
 String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
 GraphDatabaseService graphDB=new GraphDatabaseFactory().newEmbeddedDatabase(extStorageDirectory); 
```

我添加了写入外部存储的权限。

可能是什么原因？是否可以在 Android 设备中创建 neo4j 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-15T20:27:28.620

Michael 提到的新闻刚刚发布：Neo4j Mobile for Android v0.1。它仍处于孵化阶段，我们希望得到您的反馈。

更多细节在这里：http: [//blog.neo4j.org/2013/05/new-incubator-project-neo4j-mobile-for.html](http://blog.neo4j.org/2013/05/new-incubator-project-neo4j-mobile-for.html)

# android - ListView - 自定义适配器 - 滚动时值不断变化

> ID：15458191
> 
> 赞同：1
> 
> 时间：2013-03-17T06:32:15.477
> 
> 标签：android, android-listview, custom-adapter

安卓 2.3.3

我正在使用自定义适配器来填充列表视图。列表视图中的每一行都有 3 个文本视图（自定义布局），它们是从从数据库中检索到的数据中填充的。

问题是，数据第一次正确显示。但是当我向下滚动然后再次向上滚动列表视图时，列表视图顶部的行被底部的行替换，当我向下滚动时，它们再次被当前正在显示的行替换。

我认为问题可能是重新创建行，我应该使用 viewHolder。即使我确实使用了 viewHolder，它也不能解决问题。

这是代码...

```
class MyCustomAdapter extends BaseAdapter{

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return c.getCount();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        HistoryViewHolder viewHolder;

            if(convertView == null)
            {
                LayoutInflater li = getLayoutInflater();
                convertView =  li.inflate(R.layout.history_row, null);

                viewHolder = new HistoryViewHolder();

                viewHolder.txtcnt = (TextView) convertView.findViewById(R.id.txtView_History_Count);
                viewHolder.txtexp = (TextView) convertView.findViewById(R.id.txtView_History_Expression);
                viewHolder.txtres = (TextView) convertView.findViewById(R.id.txtView_History_Result);

                convertView.setTag(viewHolder);
            }
            else
            {
                viewHolder = (HistoryViewHolder) convertView.getTag();
            }

            if(!c.isAfterLast())
            {

                viewHolder.txtcnt.setText(String.valueOf(position + 1));        
                System.out.println("Position"+viewHolder.txtcnt.getText().toString());

                expression = c.getString(c.getColumnIndex("expression"));
                result = c.getString(c.getColumnIndex("result"));

                c.moveToPosition(position + 1);

                viewHolder.txtexp.setText(expression);
                System.out.println("Expression"+viewHolder.txtexp.getText().toString());
                viewHolder.txtres.setText(result);      
                System.out.println("Result"+viewHolder.txtres.getText().toString());

            }   

        return convertView;
    }

    public class HistoryViewHolder {
        TextView txtcnt;
        TextView txtexp;
        TextView txtres;
    }

} 
```

我是否正确使用了 viewHolder？为什么我们需要使用viewHolder？具体有什么用？

编辑 ::: 正如 vmironov ::: 所建议的那样，我已删除`if(!c.isAfterLast())`并将 更改`c.moveToPosition(position + 1)`为`c.moveToPosition(position)`. 现在，替换不会发生，但第一个元素重复了两次，最后一个条目没有显示。当我再次向下和向上滚动时，前两行没有显示。

编辑 2 ::: 刚刚移动了`c.moveToPosition(position)`上面的表达式 =`c.getString(c.getColumnIndex("expression"));`

我正在发布整个代码，如果需要，请查看...

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    HistoryViewHolder viewHolder;

        if(convertView == null)
        {
            LayoutInflater li = getLayoutInflater();
            convertView =  li.inflate(R.layout.history_row, null);

            viewHolder = new HistoryViewHolder();

            viewHolder.txtcnt = (TextView) convertView.findViewById(R.id.txtView_History_Count);
            viewHolder.txtexp = (TextView) convertView.findViewById(R.id.txtView_History_Expression);
            viewHolder.txtres = (TextView) convertView.findViewById(R.id.txtView_History_Result);

            convertView.setTag(viewHolder);
        }
        else
        {
            viewHolder = (HistoryViewHolder) convertView.getTag();
        }

            viewHolder.txtcnt.setText(String.valueOf(position + 1));        
            System.out.println("Position"+viewHolder.txtcnt.getText().toString());

            c.moveToPosition(position);

            expression = c.getString(c.getColumnIndex("expression"));
            result = c.getString(c.getColumnIndex("result"));

            viewHolder.txtexp.setText(expression);
            System.out.println("Expression"+viewHolder.txtexp.getText().toString());
            viewHolder.txtres.setText(result);      
            System.out.println("Result"+viewHolder.txtres.getText().toString());            

    return convertView;
}

public class HistoryViewHolder {
    TextView txtcnt;
    TextView txtexp;
    TextView txtres;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:24:23.807

1.  删除`if (!c.isAfterLast())`条件。
2.  替换`c.moveToPosition(position + 1)`为`c.moveToPosition(position)`
3.  `c.moveToPosition(position)`必须先调用`expression = c.getString(c.getColumnIndex("expression"))`

# paypal - Luhn算法功能有问题？

> ID：15458192
> 
> 赞同：0
> 
> 时间：2013-03-17T06:32:17.787
> 
> 标签：paypal, luhn

在我的 PayPal Pro 信用卡支付系统中，我使用了[这个问题](https://stackoverflow.com/questions/2160336/how-to-check-if-the-credit-card-is-valid-or-not-for-paypal)的第一个答案中给出的 Luhn 算法函数。然而，我有几个美国客户显然试图用他们的信用卡付款，并且他们的详细信息被函数拒绝（返回 false），尽管我的脚本允许他们尝试任意次数。

同时，我知道其他客户的抄送信息确实被该功能接受并且付款成功。

我的结论是函数本身一定有问题。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T19:49:13.980

要回答您的问题，我必须看看您的功能。您没有将其包含在此处以供审核。

就是说，我很好奇你为什么要搞砸这个......？如果信用卡无效，PayPal API 将返回一个错误通知用户。让他们的系统为您处理。无需添加您自己的额外检查。

# jsf-2 - 在 jsf 2 中的 applicationscope bean 中初始化 jpa entitymanagerfactory

> ID：15458198
> 
> 赞同：0
> 
> 时间：2013-03-17T06:33:13.820
> 
> 标签：jsf-2, persistence, jpa-2.0, managed-bean, servletcontextlistener

这是我在 stackoverflow 上的第一篇文章

我想在 jsf 2 的 ApplicationScope bean 中创建 EntityManagerFactory。这是我的 bean

```
@ApplicationScoped
@ManagedBean(eager = true)

public class ApplicationContext implements Serializable{

/**
 * 
 */
private static final long serialVersionUID = 1L;
private EntityManagerFactory entityManagerFactory = null;
private EntityManager entityManager = null;

public ApplicationContext(){

}

public EntityManagerFactory getEntityManagerFactory() {
    return entityManagerFactory;
}

public void setEntityManagerFactory(EntityManagerFactory entityManagerFactory) {
    this.entityManagerFactory = entityManagerFactory;
}

public EntityManager getEntityManager() {
    return entityManager;
}

public void setEntityManager(EntityManager entityManager) {
    this.entityManager = entityManager;
}

@PostConstruct
public void applicationInitialized(){
    System.out.println("application is being initialized");
    this.entityManagerFactory = Persistence.createEntityManagerFactory("PersonalProject");
    this.entityManager = this.entityManagerFactory.createEntityManager();
}

@PreDestroy
public void applicationDestroyed(){
    System.out.println("application being destroyed");

}

} 
```

为此，我得到了一个巨大的异常堆栈跟踪。

```
 com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean applicationContext
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:256)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:255)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.sun.faces.spi.InjectionProviderException
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:119)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokePostConstruct(WebContainerInjectionProvider.java:99)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 15 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:117)
    ... 17 more
Caused by: Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: WebappClassLoader
  context: /PersonalProject
  delegate: false
  repositories:
    /WEB-INF/classes/
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@6d4c1103

Internal Exception: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:126)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:136)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:65)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)
    at com.justme.web.gui.ApplicationContext.applicationInitialized(ApplicationContext.java:49)
    ... 22 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1014)
    at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.callPredeploy(JPAInitializer.java:88)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:127)
    ... 26 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:210)
    ... 29 more
Caused by: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.ValidationException.invalidTypeForSerializedAttribute(ValidationException.java:1112)
    at org.eclipse.persistence.internal.jpa.metadata.converters.SerializedMetadata.process(SerializedMetadata.java:86)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processSerialized(MappingAccessor.java:1641)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processJPAConverters(MappingAccessor.java:1433)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processMappingConverter(MappingAccessor.java:1495)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processMappingValueConverter(MappingAccessor.java:1513)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.BasicAccessor.process(BasicAccessor.java:367)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataDescriptor.processAccessors(MetadataDescriptor.java:1365)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.ClassAccessor.processAccessors(ClassAccessor.java:963)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processAccessors(EntityAccessor.java:876)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:691)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1531)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:474)
    at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:441)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:968)
    ... 28 more
Mar 17, 2013 11:40:24 AM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.RuntimeException: com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean applicationContext
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:292)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4779)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5273)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1566)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1556)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
    at java.util.concurrent.FutureTask.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: com.sun.faces.mgbean.ManagedBeanCreationException: An error occurred performing resource injection on managed bean applicationContext
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:229)
    at com.sun.faces.mgbean.BeanBuilder.build(BeanBuilder.java:105)
    at com.sun.faces.mgbean.BeanManager.createAndPush(BeanManager.java:409)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:269)
    at com.sun.faces.mgbean.BeanManager.create(BeanManager.java:256)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:255)
    ... 10 more
Caused by: com.sun.faces.spi.InjectionProviderException
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:119)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokePostConstruct(WebContainerInjectionProvider.java:99)
    at com.sun.faces.mgbean.BeanBuilder.invokePostConstruct(BeanBuilder.java:223)
    ... 15 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.faces.vendor.WebContainerInjectionProvider.invokeAnnotatedMethod(WebContainerInjectionProvider.java:117)
    ... 17 more
Caused by: Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: WebappClassLoader
  context: /PersonalProject
  delegate: false
  repositories:
    /WEB-INF/classes/
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@6d4c1103

Internal Exception: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:126)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:136)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:65)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:60)
    at com.justme.web.gui.ApplicationContext.applicationInitialized(ApplicationContext.java:49)
    ... 22 more
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1014)
    at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.callPredeploy(JPAInitializer.java:88)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:127)
    ... 26 more
Caused by: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [PersonalProject] failed.
Internal Exception: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.EntityManagerSetupException.predeployFailed(EntityManagerSetupException.java:210)
    ... 29 more
Caused by: Exception [EclipseLink-7155] (Eclipse Persistence Services - 2.1.3.v20110304-r9073): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface.
    at org.eclipse.persistence.exceptions.ValidationException.invalidTypeForSerializedAttribute(ValidationException.java:1112)
    at org.eclipse.persistence.internal.jpa.metadata.converters.SerializedMetadata.process(SerializedMetadata.java:86)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processSerialized(MappingAccessor.java:1641)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processJPAConverters(MappingAccessor.java:1433)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processMappingConverter(MappingAccessor.java:1495)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.MappingAccessor.processMappingValueConverter(MappingAccessor.java:1513)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.mappings.BasicAccessor.process(BasicAccessor.java:367)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataDescriptor.processAccessors(MetadataDescriptor.java:1365)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.ClassAccessor.processAccessors(ClassAccessor.java:963)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.processAccessors(EntityAccessor.java:876)
    at org.eclipse.persistence.internal.jpa.metadata.accessors.classes.EntityAccessor.process(EntityAccessor.java:691)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataProject.processStage2(MetadataProject.java:1531)
    at org.eclipse.persistence.internal.jpa.metadata.MetadataProcessor.processORMMetadata(MetadataProcessor.java:474)
    at org.eclipse.persistence.internal.jpa.deployment.PersistenceUnitProcessor.processORMetadata(PersistenceUnitProcessor.java:441)
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:968)
    ... 28 more 
```

根本原因是因为 Post 类没有实现可序列化。但它已经实现如下。

```
public class Post implements Serializable {} 
```

我只在 ApplicationScoped ManagedBean 中遇到这个问题。如果我尝试使用 ServletContextListener 创建 EntityManagerFactory，那么它创建得很好。

可能是什么问题？我是否缺少有关 ApplicationScoped bean 的一些知识？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:05:51.283

看起来 Post 类有一个名为 content 的 Object 类型的字段：

```
Exception Description: The type [class java.lang.Object] for the attribute [content] on the entity class [class com.justme.model.entities.Post] is not a valid type for a serialized mapping. The attribute type must implement the Serializable interface. 
```

JPA 不知道如何将 Object 转换为数据库中的列类型。

还有一件事。您正在使用 EntityManager 作为 ApplicationContext 中的字段。EntityManager 类不是线程保存的，因此在应用程序范围的类中使用它会导致很多问题。

您最好删除 EntityManager 字段，删除 setEntityManager 方法并重写 getEntityManager

```
public EntityManager getEntityManager() {
    return entityManagerFactory.getEntityManager();
} 
```

EntityManagerFactory 是线程保存。

# c# - 如何从一个异常处理程序转到另一个？

> ID：15458200
> 
> 赞同：0
> 
> 时间：2013-03-17T06:33:31.980
> 
> 标签：c#, asp.net, exception, exception-handling

解释我的问题的最好方法是使用以下伪代码：

```
try
{
    //Do work
}
catch (SqlException ex)
{
    if (ex.Number == -2)
    {
        debugLogSQLTimeout(ex);
    }
    else
    {
        //How to go to 'Exception' handler?
    }
}
catch (Exception ex)
{
    debugLogGeneralException(ex);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:40:50.970

```
Exception ex = null;
try
{
    //Do work
}
catch (SqlException sqlEx)
{
    ex = sqlEx;
    if (ex.Number == -2)
    {
       //..
    }
    else
    {
        //..
    }
}
catch (Exception generalEx)
{
  ex = generalEx;
}
finally()
{
  if (ex != null) debugLogGeneralException(ex);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:01:38.033

匹配的第一个`catch`子句是唯一可能在同`try`一块上运行的子句。

我能想到的最好的方法是在更一般的类型中包含强制转换和条件：

```
try
{
    //Do work
}
catch (Exception ex)
{
    var sqlEx = ex as SqlException;
    if (sqlEx != null && sqlEx.Number == -2)
    {
        debugLogSQLTimeout(ex);
    }
    else
    {
        debugLogGeneralException(ex);
    }
} 
```

如果您发现自己在整个数据层一遍又一遍地编写此代码，至少要花时间将其封装在一个方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:14:48.997

我不相信有任何方法可以做到这一点，因为 catch 块在不同的范围内。如果不退出 try 块，就无法重新抛出，也无法“调用”最终的 catch 块，因为它仅在异常期间触发。

我会建议与上面的 roman m 相同，然后进行相同的调用。否则你必须做一些非常糟糕的事情。就像下面你永远不应该使用但我包括在内的疯狂代码，因为它做了你想要的事情。

一般来说，我认为您正在做的是通过不推荐的异常来控制正常流程。如果您尝试跟踪超时，您可能应该以另一种方式处理。

请注意，您可以使用 goto 语句的疯狂来执行以下代码之类的操作，但我将其包含在内，因此没有人会忘记这是一个多么糟糕的主意。=)

```
void Main()
{
    Madness(new NotImplementedException("1")); //our 'special' case we handle
    Madness(new NotImplementedException("2")); //our 'special' case we don't handle
    Madness(new Exception("2")); //some other error
}

void Madness(Exception e){
    Exception myGlobalError;

    try
    {
        throw e;
    }
    catch (NotImplementedException ex)
    {
        if (ex.Message.Equals("1"))
        {
            Console.WriteLine("handle special error");
        }
        else
        {
            myGlobalError = ex;
            Console.WriteLine("going to our crazy handler");
            goto badidea;
        }
    }
    catch (Exception ex)
    {
        myGlobalError = ex;
        Console.WriteLine("going to our crazy handler");
        goto badidea;
    }
    return;

    badidea:
    try{
        throw myGlobalError;
    }
    catch (Exception ex)
    {
        Console.WriteLine("this is crazy!");
    }
}
// Define other methods and classes here 
```

# php - PHP - 最高效的字典代码

> ID：15458201
> 
> 赞同：2
> 
> 时间：2013-03-17T06:34:03.730
> 
> 标签：php, arrays, dictionary

我正在使用以下代码从只有两列（单词、定义）的制表符分隔文件中提取单词的定义。这是我想要做的最有效的代码吗？

```
<?php
$haystack  = file("dictionary.txt");
$needle = 'apple';

$flipped_haystack = array_flip($haystack);

foreach($haystack as $value)
    {
    $haystack = explode("\t", $value);

    if ($haystack[0] == $needle)
        {
        echo "Definition of $needle: $haystack[1]";
        $defined = "1";
        break;
        }
    }

if($defined != "1")
    {
    echo "$needle not found!";
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T06:58:23.783

现在你正在做很多无意义的工作

```
1) load the file into a per-line array
2) flip the array
3) iterate over and explode every value of the array
4) test that exploded value 
```

您无法真正避免步骤 1，但为什么您必须为 2 和 3 做所有无用的“忙碌工作”？

例如，如果您的字典文本设置如下：

```
word:definition 
```

然后一个简单的：

```
$matches = preg_grep('/^$word:(.*)$/', $haystack); 
```

会用更少的代码为你解决问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T06:48:12.343

不。很可能 trie 更有效，并且您没有对字典进行排序，并且它不使用二叉树或三叉树。我想如果你需要在一个巨大的字典中搜索你的方法太慢了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T07:34:24.850

> 这是我想要做的最有效的代码吗？

肯定不是。
为了只找到**一根**针，您正在处理**所有**条目。

> 我将建立有 100,000 多个条目。

然后使用数据库。

# c++ - c++ 组织变量进行计算 - 速度和可读性

> ID：15458202
> 
> 赞同：2
> 
> 时间：2013-03-17T06:35:02.773
> 
> 标签：c++, pointers, vector, containers

我目前正在进行大型数值计算，并且在使用变量（双精度型）时速度是最重要的。想知道是否有更易读的方法来执行以下操作，或者是否有更好的方法使用结构或提升库。

**更新：尽管如此，由于许多变量，我最初的目标是最好将变量间接组织到某种容器中，同时将变量维护为对象而不是引用/指针。**

**1）我将对变量进行大量而冗长的计算，它们按照它们的使用顺序声明并在整个程序中更改**

**2）当我决定编辑代码时，可以随时将变量添加到程序中（非常频繁）**

**3) 组织变量（到一个指针容器或其他容器中）对于轻松使用这些对象很重要 - 例如，当我在一段时间后写入所有这些对象的文件时，它将更加精简和高效的代码**

**我正在考虑创建一个创建类型的类（所有变量对象都是 double 类型）并自动添加到指针向量中 - 作为一个附带问题，这是否有点矫枉过正**

我有很多变量像这样进行各种计算（这恰好需要时间）：

```
double varName1 = someValue;
double varName2 = someValue;
double varName3 = someValue;
...
double varNameN = someValue;
...
SOME_COMPUTATION HERE 
```

这是我认为每个变量的可读性最明显的方法。为了存储集合以备将来可能的输出，我将所有内容放入容器中，并为每个元素创建了一个引用变量，如下所示

```
std::vector<double> store;
...
ADD VALUES TO VECTOR
...
double& varName1 = store[0];
double& varName2 = store[1];
... 
```

但是，当我执行上述方法时，使用引用 (&) 变量的计算成本更高（超时）。然后我决定做相反的事情，存储一个指针向量而不是变量，如果我需要将所有文件写入文件，例如我将使用这个向量并正常对变量执行计算（不是引用）。为此，我想出了以下（丑陋的）方式

```
std::vector<double*> store;
double create_v(double init, double& d)
{
    store.push_back(&d);
    d = init;
}

double varName1 = create_v(0.05,varName1); 
```

我在徘徊，如果 1) 有一个更好的实现，使用模板/增强的可读性来做同样的事情，或者 2) 像我这样的 C++ 初学者应该知道另一种方法吗？3）优化我没有考虑最小化上面提到的一些开销（我用 -O2 和 -O3 测试，我使用 g++4.7.2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:47:36.857

g++ 4.7.2 版本提供了[对](http://gcc.gnu.org/gcc-4.7/cxx0x_status.html)C++11 的[*初始化列表*](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2672.htm)的支持。这意味着您可以编写以下代码将所有变量放在 a 中`vector<double>`：

```
vector<double> vec = {varName1, varName2, varName3, ..., varNameN}; 
```

这是相当干净的，并且应该为您提供一种将变量组织成向量以用于输出目的的简单方法。这是一个[关于 ideone 的小演示](http://ideone.com/zEcP5v)。

PS您的第三个示例不起作用，因为您正在推回引用，而不是指针。不过，这应该是编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T02:36:02.030

根据您的描述，使用 c 样式的结构可能是可以接受的。您可以利用满足某些限制（普通旧数据限制或 POD）的结构的某些行为，从而进一步简化它们的行为。

POD 结构不能有默认构造函数、析构函数或复制构造函数（编译器提供的默认值除外），也不能有任何虚方法或指针或引用类型的任何成员。你应该能够毫不费力地做到这一点。

完成此操作后，您将能够像这样声明这样的结构：

```
struct DataSet
{
    double foo;
    double bar[48]; // arrays are legal in POD types
    // snip however many more declarations
}; 
```

您将能够将这些结构保存到具有以下内容的文件中：

```
DataSet ds;
// populate and process dataset
ofstream outputfile("somefile.dat", ios_base::out);
outputfile.write((char *) &ds, sizeof(DataSet)); 
```

阅读它们将完全按照您的预期工作：与写作相反。只需创建对象并将文件的内容吞入其中即可。使用数组`DataSet`应该同样直观。

# java - 为什么task1线程没有中断

> ID：15458210
> 
> 赞同：-1
> 
> 时间：2013-03-17T06:35:50.417
> 
> 标签：java, concurrency

假设以下代码使用调试器执行，以便我们可以预测执行顺序。

*   t1 -- 这里 task1 开始处理一些长任务。
*   t2 --- task2 被阻塞 @ Syncronized 语句，因为 task1 持有锁。
*   t3 - task2 被中断但它错过了，因为 task2 正在使用内部锁，因此不能在@同步时被中断。（Renenterant.lockInterruptible() 会抛出 InterruptedExecption）。
*   t4 --- task1 被中断。然而，尽管在 try catch 块中执行了复杂的任务，但从未抛出 InterruptedExecption。这是为什么 ？

代码：

```
public class TestInteruptibility {
    public static Object lock = new Object();
    public static boolean spin = true;

    public static void main(String[] args) {
        Thread task1 = new Thread(new Task(), "Task1");
        Thread task2 = new Thread(new Task(), "Task2");
        Thread notifier1 = new Thread(new Notifier(), "Notifier1");
        task1.start();
        task2.start();
        task2.interrupt();
        task1.interrupt();
        notifier1.start();
    }
}

class Task implements Runnable {
    public void run() {
        synchronized (TestInteruptibility.lock) {
            System.out.println("Performing Long Task");
            try {
                while (TestInteruptibility.spin) {
                }
                System.out.println("Finsihed Performing Long Task");
                TestInteruptibility.lock.wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
                System.out.println("I got interrupted while i was waiting @ wait()");
            }
            System.out.println("Ending Task");
        }
    }
}

class Notifier implements Runnable {
    public void run() {
        synchronized (TestInteruptibility.lock) {
            System.out.println("Performing notification");
            TestInteruptibility.lock.notify();
            System.out.println("Ending notification");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:57:45.347

基本上，`interrupt()`所做的是在`Thread`对象中设置一个标志。你需要用`isInterrupted()`. 然后你就可以处理这个中断信号了。`InterruptedException`在这种情况下它不会抛出一个。

此外，它还可能导致某些方法，例如 , `Thread.sleep()`,`Object.wait()`立即返回并抛出一个`InterruptedException`. `InterruptedException`在这种情况下，您可以获得和。

来自**Java 并发实践，7.1.1。中断**：

`A good way to think about interruption is that it does not actually interrupt a running thread; it just requests that the thread interrupt itself at the next convenient opportunity. (These opportunities are called cancellation points.) Some methods, such as wait, sleep, and join, take such requests seriously, throwing an exception when they receive an interrupt request or encounter an already set interrupt status upon entry. Well behaved methods may totally ignore such requests so long as they leave the interruption request in place so that calling code can do something with it. Poorly behaved methods swallow the interrupt request, thus denying code further up the call stack the opportunity to act on it.`

在您上面的代码中，您没有在等待/睡觉。所以你必须在循环`isInterrupted()`中自己检查和处理中断信号。`while`

```
while (TestInteruptibility.spin) {
    if (Thread.currentThread().isInterrupted()) {
        break;
    }
} 
```

参考：

1.  [为什么中断（）不能按预期工作以及它是如何工作的](https://stackoverflow.com/a/8050257/2086065)
2.  [java.lang.Thread.interrupt() 有什么作用？](https://stackoverflow.com/a/3590008/2086065)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T06:43:03.103

您有一个繁忙的 while 循环，它持有锁（并且永远不会结束，除非您在某处更改自旋的值）。我想 task1 仍在循环中，因此它不会注意到中断。Task2 无法获取锁，因此阻塞。

Task 的实现方式，它只能在循环之后的等待命令期间被中断。

顺便说一句：如果您在不同的线程中使用 spin 数据成员，那么它可能应该被声明为 volatile。出于类似的线程安全原因，应该将 lock 声明为 final。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:00:05.827

当您调用方法时`interrupt()`，结果取决于此线程当前正在执行的操作。如果它在某些可中断的方法上被阻塞，例如`Object.wait()`，那么它将立即被中断，这意味着`InterruptedException`将被抛出到线程中。如果线程没有被阻塞，但正在做一些计算，或者它在某些不可中断的方法上被阻塞，例如`InputStream.read()`then`InterruptedException`不会被抛出，而是`interrupted`在线程上设置标志。这个标志将导致`InterruptedException`下一次线程将调用一些可中断的方法，但不是现在。

在您的情况下，线程在无限空循环`task1`中`task2`旋转，因此不会被任何可中断的方法阻塞，因此当您调用`interrupt()`时，不会`InterruptedException`在该线程内抛出 no ，但`interrupted`只是设置了标志。您可能应该将任务代码更改为如下所示：

```
while (TestInteruptibility.spin && !Thread.interrupted ()) {
} 
```

那么只要有人调用`interrupt`任务线程，你就会退出循环。

# knockout.js - 敲除映射插件的问题

> ID：15458212
> 
> 赞同：0
> 
> 时间：2013-03-17T06:36:11.170
> 
> 标签：knockout.js, mapping

我正在尝试使用淘汰映射插件，但它没有将数据绑定到我的 UI。以下是我的代码：

```
var model;

$(document).ready(function () {
$.ajax({
    type: "POST",
    url: SERVER_PATH + '/jqueryservice/DataAccessService.asmx/GetData',
    async: false,
    data: "{ }",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (result, status) {
        model = ko.mapping.fromJS(result.d);
    },
    error: GetDataError

});

 });

 function GetDataError() {
     alert("System is not responding at the moment. Please try again.");
 } 
```

谁能让我知道我在这里做错了什么？以下是从服务器返回的数据：

```
{"ID":903,"Name":"Camela Holding","Email":"Camelah@yahoo.com",
   "Vehicles":[{"ID":1,"Name":"Van"},
               {"ID":2,"Name":"Car"},
               {"ID":4,"Name":"Cadillac"},
               {"ID":5,"Name":"Train"},                         {"ID":3,"Name":"Jeep"}],
   "OwnerVehicle":0,"WeeklyData":null,"Week1":null} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T10:38:34.730

我能够在类似的情况下使这个修复工作，但我不知道它为什么以及如何工作的确切原因。

我试图使用敲除映射插件将可观察对象与作为数组的 AJAX 响应绑定。

这就是我最初正在做的事情：

```
 self.DataRows = ko.observableArray();
   $.ajax({
                url: '/Home/GetStudentList1',
                cache: false,
                type: 'post',
                data: self.GridParams,
                success: function (data) {                        
                    self.DataRows(ko.mapping.fromJS(data));
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error :" + XMLHttpRequest.responseText);
                    alert('There was an error in performing this operation.');
                }
            }); 
```

数据被映射到 observable 但 UI 没有更新然后我尝试了这个

```
 $.ajax({
                url: '/Home/GetStudentList1',
                cache: false,
                type: 'post',
                data: self.GridParams,
                success: function (data) {
                    var observableData = ko.mapping.fromJS(data);
                    self.DataRows(observableData());
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    console.log("error :" + XMLHttpRequest.responseText);
                    alert('There was an error in performing this operation.');
                }
            }); 
```

唯一的区别是我在将它与我的 observable 映射之前将它放入一个变量中。
同样，在您的情况下，我认为您应该尝试以下操作：

```
var self = this; //save reference to this as you will it in ajax success
self.model = ko.observable(); //create your observable
 $.ajax({
            type: "POST",
            url: SERVER_PATH + '/jqueryservice/DataAccessService.asmx/GetData',
            async: false,
            data: "{ }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        success: function (result, status) {
                 var data = ko.mapping.fromJS(result.d);// don't have any idea what is making knockout happy doing it this way?
                 self.model(data());
    },
        error: GetDataError

    }); 
```

在这两种情况下，当我执行 console.log(DataRows()) 时，observable 的结构都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T12:21:11.943

好吧，这是我们问题的答案-

尝试这个

```
var model  = ko.observable();
$(document).ready(function () {
$.ajax({
      type: "POST",
      url: SERVER_PATH + '/jqueryservice/DataAccessService.asmx/GetData',
      async: false,
      data: "{ }",
      contentType: "application/json; charset=utf-8",
      dataType: "json",
success: function (result, status) {
    model(ko.mapping.fromJS(result.d)()); //mapped using braces ()
},
error: GetDataError

   });

 }); 
```

请注意，这里唯一的区别是我使您的模型可观察，而不是 model = ko.mapping.fromJS(result.d)); 我使用了 model(ko.mapping.fromJS(result.d)());

现在我不是将我的 JSON 对象映射到数组中，而是将我的 observable 映射。因为你必须知道所有 observable 都变成了函数，并且它们的值是使用这些大括号“（）”之类的函数来访问的。

只是因为这个原因，当我将它放入一个单独的变量然后使用大括号访问它时它才起作用。

# java - Grails 2 上的 BeanNameAutoProxyCreator 不起作用

> ID：15458213
> 
> 赞同：1
> 
> 时间：2013-03-17T06:36:14.207
> 
> 标签：java, groovy, log4j, grails-2.0, spring-aop

我想在 Grails 2.2.1 中使用`spring`and`log4jdbc`来捕获 jdbc 信息，但它不起作用并且返回错误。

以下是中的`log4j`配置`config.groovy`：

```
info   'jdbc.sqlonly','jdbc.sqltiming'; 
```

这是 Grails spring dsl (resourcec.groovy)：

```
beans = {
xmlns aop:"http://www.springframework.org/schema/aop"
aop{
    config("proxy-target-class":true)
}
log4jdbcInterceptor(net.sf.log4jdbc.DataSourceSpyInterceptor)
dataSourceLog4jdbcAutoProxyCreator(org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator){
    interceptorNames ="log4jdbcInterceptor"
    beanNames = ["dataSource"]
} 
```

和`DataSourceSpyInterceptor.java`

```
public class DataSourceSpyInterceptor implements MethodInterceptor {
    private RdbmsSpecifics rdbmsSpecifics = null;
    private RdbmsSpecifics getRdbmsSpecifics(Connection conn) {
        if(rdbmsSpecifics == null) {
            rdbmsSpecifics = DriverSpy.getRdbmsSpecifics(conn);
        }
        return rdbmsSpecifics;
    }
    public Object invoke(MethodInvocation invocation) throws Throwable {
        Object result = invocation.proceed();
        if(SpyLogFactory.getSpyLogDelegator().isJdbcLoggingEnabled()) {
            if(result instanceof Connection) {
                Connection conn = (Connection)result;
                return new ConnectionSpy(conn,getRdbmsSpecifics(conn));
            }
        }
        return result;
    }
} 
```

# xcode4 - Xcode 中的 ParseKit 框架是红色的，不会构建

> ID：15458214
> 
> 赞同：1
> 
> 时间：2013-03-17T06:36:15.893
> 
> 标签：xcode4, parsekit

我正在尝试将 ParseKit 添加到 Xcode 中的新命令行项目中，但该框架在项目导航器中显示为红色。当我尝试构建时，出现此错误

`error: /Users/acdlite/Xcode/Chemistry Parser/../parsekit-trunk/build/Debug/ParseKit.framework: No such file or directory`

我遵循了开发人员在此答案中给出的指示：[如何将 ParseKit 作为私有框架嵌入 Mac App bundle](https://stackoverflow.com/questions/9649537/how-to-embed-parsekit-as-a-private-framework-in-a-mac-app-bundle/9658158#9658158)中。

据我所知，红色表示文件不在指定位置。文件检查器说它应该位于`/parsekit-trunk/build/Debug/ParseKit.framework`，如果我尝试在 Finder 中导航，它实际上并不存在。那么它在哪里*呢*？我不知道。

我现在已经从头开始执行所有步骤十多次了，包括通过 SVN 检查代码。这让我发疯，我觉得自己像个白痴。我希望我能更具体一些，但我真的不知道从这里去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T01:55:00.980

好吧，经过至少 20 次尝试，我终于让它工作了。大多数情况下，我遵循了开发人员在此答案中给出的步骤：[How to embed ParseKit as a private framework in a Mac App bundle](https://stackoverflow.com/questions/9649537/how-to-embed-parsekit-as-a-private-framework-in-a-mac-app-bundle/9658158#9658158)

但是，完全按照这些步骤并没有奏效。在我的一生中，当我尝试将 ParseKit 框架添加为我的 Target 的依赖项时，我无法让它显示为一个选项。Xcode 只会说“未找到过滤结果”。所以我跳过了这一步。我也没有*添加*“复制文件”构建阶段。这样做会导致依赖错误。

这比它应该做的要困难得多，我不知道这是因为我很愚蠢还是 Xcode 设计不佳。可能是两者的结合。

顺便说一句，我使用的是 Xcode 版本 4.6.1 (4H512)。

# android - Android Emulator 调试 Google Maps Eclipse 应用

> ID：15458218
> 
> 赞同：0
> 
> 时间：2013-03-17T06:36:32.310
> 
> 标签：android, android-emulator, google-api

我正在尝试使用 Google Api 的库运行 android 应用程序，并且在将地址输入到输入字段时进行调试时收到失败启动错误。

这是错误：[http ://s1278.beta.photobucket.com/user/cetmrw791346/media/wdyl_zps08bbe17f.png.html?sort=3&o=0](http://s1278.beta.photobucket.com/user/cetmrw791346/media/wdyl_zps08bbe17f.png.html?sort=3&o=0)

和

以下是相关文件：

AWhereDoYouLive.java

```
package com.example.wheredoyoulive;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AWhereDoYouLive extends Activity {

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        final AlertDialog.Builder adb = new AlertDialog.Builder(this);

        final EditText addressfield = (EditText) findViewById(R.id.address);

        final Button button = (Button) findViewById(R.id.launchmap);
        button.setOnClickListener(new Button.OnClickListener() {

            public void onClick(View v) {
                try {
                    // Perform action on click
                    String address = addressfield.getText().toString();
                    address = address.replace(' ', '+');
                    Intent geoIntent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse("geo:0,0?q=" + address));
                    startActivity(geoIntent);
                } catch (Exception e) {

                    AlertDialog ad = adb.create();
                    ad.setMessage("Failed to Launch");
                    ad.show();

                }
            }
        });

    }
} 
```

主.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Please enter your home address."
    />
<EditText
    android:id="@+id/address"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:autoText="true"
    />
<Button
    android:id="@+id/launchmap"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="Show Map"
    /> 
<TextView  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Unlocking Android, Chapter 1."
    />
</LinearLayout> 
```

AndroidMainfest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.wheredoyoulive"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon" >

        <activity android:label="@string/app_name" 
            android:name="com.example.wheredoyoulive.AWhereDoYouLive"> 
        <intent-filter> 
            <action android:name="android.intent.action.MAIN"/> 

            <category android:name="android.intent.category.LAUNCHER"/> 
        </intent-filter> 
    </activity> 

    </application>
<users-permission android:name="android.permission.INTERNET" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T06:40:43.780

仔细检查 Google 服务设置页面时：http: [//developer.android.com/google/play-services/setup.html](http://developer.android.com/google/play-services/setup.html)看起来好像任何可用的 Android 模拟器都不支持 Google Play 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:49:30.573

有一种解决方法可以让 Google Map API V2 在您的模拟器上运行，请阅读我写的以下博客文章的第二部分以获取更多信息：

[模拟器中的 Google Map API V2](https://blog-emildesign.rhcloud.com/?p=527)

# sqlite - SQLite：一个单词中的FTS匹配可以忽略哪个字符

> ID：15458220
> 
> 赞同：3
> 
> 时间：2013-03-17T06:37:10.143
> 
> 标签：sqlite, full-text-search, match

我需要找到任何特殊字符。如果我把它放在一个单词的中间，SQLite FTS 匹配可以忽略它，就好像它不存在一样，例如：

```
Text Body: book's 
```

如果我的匹配字符串是“书”，我需要得到“书”的结果。使用搬运工或简单的标记器没有问题。

我为此尝试了许多字符，例如：book!s、book?s、book|s、book,s、book:s……，但是当通过匹配搜索“books”时，没有返回这些结果。

我不明白，为什么？

我正在使用：无内容 FTS4 表和外部内容 FTS4 表，我的文本正文中每个单词都有很多字符，应该在搜索时更改为忽略它..

我无法更改匹配查询，因为我不知道单词中的特殊字符在哪里。另外，我需要让原始字长等于 FTS 索引字的长度才能使用匹配信息或片段（）；因此，我无法从文本正文中删除这些字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:05:48.173

默认分词器不会忽略标点符号，而是将它们视为单词分隔符。

因此文本正文或匹配字符串`book's`将最终成为两个单词，`book`并且`s`. 这些永远不会匹配像`books`.

要忽略这样的字符`'`，您必须[安装自己的自定义标记](http://www.sqlite.org/fts3.html#section_8_1)器。

# php - 标准地址标签的 PHP TCPDF 导出

> ID：15458221
> 
> 赞同：4
> 
> 时间：2013-03-17T06:37:18.247
> 
> 标签：php, tcpdf

标准标签打印在一张特殊的纸上，适合 3 列，每张 10 行。但是，必须将块设置为特定大小，以便标签在撕下地址后正确显示在工作表上。

我已经设置了我用 TCPDF writeHTML 函数打印的 HTML。但是，我试图尽可能准确地获得高度，但 TCPDF 似乎不支持高度测量。是否有我可以使用的标准模板来输出正确的 html 供 TCPDF 正确打印在地址标签纸上？

谢谢。

# oracle - 关于 Oracle 视图和授权的多个查询

> ID：15458226
> 
> 赞同：-2
> 
> 时间：2013-03-17T06:38:22.890
> 
> 标签：oracle

多个问题 - 所以如果帖子太长，请原谅

对 Oracle 模式具有只读访问权限，我可以在其中看到某些视图
说视图“ **X** ”和“ **Y** ”

现在需要在这两个视图之上创建一个视图
1 >不确定从性能角度来看这是一个好主意吗？
（新视图将仅用于触发选择）

现有的两个视图“ **X** ”和“ **Y** ”本身是由其他一些视图“ **A** ”和“ **B ”创建****的**！！

 ****奇怪的是我可以发出如下查询：

```
select * from <<schema_name>>.X 
```

2 >但是我不能直接访问视图**A**或**B** - 所以我需要授予**A**和**B** 吗？

当我查看 View X 和 View YI 的 DDL 语句时，看到以下代码：

```
create view <<schema_name>>.X as 
select emp_first_name,emp_last_name,  
from <<schema_name>>.A 
```

但是，当我发出这样的查询时：

```
select * from <<schema_name>>.X - 
```

我得到如下结果：

```
 first_name,last_name 
```

3 > 对为什么结果显示字段名称感到困惑，例如`first_name,last_name`当视图将其定义为`emp_first_name`and时`emp_last_name`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:31:51.597

1> Views on Views 可能会导致一些性能问题，主要取决于内部视图。[在此 AskTom 帖子](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:9087996409290)
中了解更多信息

2> 这并不奇怪——这就是视图的作用，而不是让您选择整个表格，而是让您只选择其中的一部分。所以你需要 A 和 B 的资助。

3> 奇怪，试试这个查询，看看它是如何创建的——

```
select dbms_metadata.get_ddl('VIEW', 'X', '<<schema_name>>') 
  from dual 
```****

# sql-server-2008 - 用户定义的函数，用于根据用户提供的值计算两列之间的差异

> ID：15458229
> 
> 赞同：-1
> 
> 时间：2013-03-17T06:39:14.047
> 
> 标签：sql-server-2008, user-defined-functions, calculated-columns

我的表中有四列：

*   **税收和其他支出百分比**
*   *****净额*******
***   * ***Taxandotherexpendituremoney* *****   **数量****

 **现在我想要的是**netamount**列中的用户定义函数，它根据用户提供的值计算**Amount和**

即假设用户提供 25% 作为**Taxandotherexpenditurespercent**那么**NetAmount**必须是**金额**- ***Taxandotherexpenditurespercent***

同样，如果供应价值为 100，则**NetAmount**必须为**Amount** - ***Taxandotherexpendituremoney***。

我试过用谷歌搜索它和所有东西，但我找不到任何对用户定义函数的满意解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:13:23.600

这是你可以做的。当然改变一点以满足您的要求。

```
CREATE FUNCTION UDF_FindDifference (@OtherExpenditures VARCHAR(50))
RETURNS INT
AS
BEGIN
DECLARE @NetAmount INT

IF(CHARINDEX('%', @OtherExpenditures) > 0)
    BEGIN

        DECLARE @Amount INT

        SELECT @Amount = Taxandotherexpenditurespercent FROM yourTABLE

        SET @NetAmount = @Amount - REPLACE(@OtherExpenditures, '%', '')

    END
ELSE
    BEGIN

        DECLARE @Amount2 INT

        SELECT @Amount2 = Taxandotherexpendituremoney FROM yourTABLE

        SET @NetAmount = @Amount2 - @OtherExpenditures

    END 
RETURN @NetAmount
END 
```

所以我在这里检查用户输入是否有`%`符号，并根据这个标准进行计算。**

# git - Git 漂亮的格式颜色

> ID：15458237
> 
> 赞同：91
> 
> 时间：2013-03-17T06:41:00.250
> 
> 标签：git

我正在尝试为 Git 设置漂亮的格式颜色。据我所知，1.6.0 版只能识别红色、绿色和蓝色。

```
$ git log --pretty=format:"%Credred%Creset %Cgreengreen%Creset %Cyellowyellow%Creset %Cblueblue%Creset %Cmagentamagenta%Creset %Ccyancyan%Creset %Cwhitewhite%Creset"
red green %Cyellowyellow%Creset blue %Cmagentamagenta %Ccyancyan %Cwhitewhite 
```

**此外，没有一种颜色适用于带括号的颜色格式。**

有没有办法列出 Git 可用的漂亮格式颜色？

不幸的是，这是在旧的 SCO OpenServer 5.0.7 机器上，SCO Skunkworks 发布的最后一个 Git 版本是 1.6.0.3。

* * *

## 回答 #1

> 赞同：155
> 
> 时间：2013-03-17T07:03:33.350

我没有旧版本来`git`验证和以外`red`的颜色是否受支持。`blue``green`

虽然，即使使用最新版本`git`（如我使用的 1.7.10），我注意到的一件事是 , 以外的颜色需要`red`在括号内。对于、和，括号是可选的。`green``blue``()``red``green``blue`

所以试试这个：

```
git log --pretty=format:"%Credred%Creset %Cgreengreen%Creset %C(Yellow)yellow%Creset %Cblueblue%Creset %C(magenta)magenta%Creset %C(cyan)cyan%Creset %C(white)white%Creset" 
```

我至少知道的[颜色列表是：](https://git-scm.com/docs/git-config#Documentation/git-config.txt-color)

```
normal
black
red
green
yellow
blue
magenta
cyan
white 
```

它可以与以下属性之一结合使用：

```
bold
dim
ul
blink
reverse
italic
strike
bright  # (Git 2.26, Q1 2020, example: brightred) 
```

如果您尝试使用更改颜色，`.gitconfig`您应该能够指定两种颜色 -**前景**和**背景**，您可以将其与属性结合使用。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2015-01-31T21:57:15.093

Git 2.3.0（2015 年 2 月）将允许（感谢[Jeff Kink ( `peff`)](https://github.com/peff)）：

* * *

*   24 位 RGB 颜色值（[提交 17a4be2](https://github.com/git/git/commit/17a4be26060b00a867cbe54ee906fe03813470ec)）

> ### `parse_color`: 支持 24 位 RGB 值

> 某些终端（如 XTerm）允许使用对常规 ANSI 颜色方案的扩展来实现完整的 24 位 RGB 颜色规范。
> 让我们允许用户指定十六进制 RGB 颜色，**从而启用粉红色 ref 装饰的最重要功能**：
> 
> ```
> git log --format="%h%C(#ff69b4)%d%C(reset) %s" 
> ```

* * *

*   更好地管理颜色属性：

> ### `parse_color`: 识别“ `no$foo`”清除`$foo`属性

> 您可以通过在颜色规范中添加“reverse”来打开 ANSI 文本属性，例如“reverse”。但是，您不能要求关闭倒车。
> 
> 对于常见情况，这无关紧要。您将在彩色部分的开头打开“反转”，然后使用“重置”清除所有属性。
> 
> 但是，您可能希望打开某些属性，然后有选择地禁用其他属性。例如：
> 
> ```
> git log --format="%C(bold ul yellow)%h%C(noul) %s" 
> ```
> 
> 仅在哈希下划线，但无需重新指定其余属性。
> 
> 这也可以帮助第三方程序，例如[`contrib/diff-highlight`](https://github.com/git/git/blob/master/contrib/diff-highlight/diff-highlight)想要在不破坏现有颜色的情况下打开/关闭某些属性的程序。
> 
> 请注意，某些属性规范可能是无意义的（例如，“ `bold nobold`”）。我们不费心标记此类结构，而是让终端对其进行分类。

* * *

使用 Git 2.26（2020 年第一季度），**基本的 7 种颜色学习了更亮的对应物（例如“ `brightred`”）**。

请参阅[Eyal Soha (``)的](https://github.com/)[提交 c444f03](https://github.com/git/git/commit/c444f032e43611b95612882cd06380866f8da0fd)、[提交 1751b09](https://github.com/git/git/commit/1751b09a92e176b164a3c5527f0458d5b1154d00)、[提交 4a28eb0](https://github.com/git/git/commit/4a28eb0ae4fc666291a6a6f84a0605ccb9279278)（2020 年 1 月 21 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([87f17d7 提交中](https://github.com/git/git/commit/87f17d790d8e350e8df1101476882f7751581ee0))^(，2020 年 2 月 25 日）)
^([`gitster`](https://github.com/gitster))

> ## [`color.c`](https://github.com/git/git/commit/1751b09a92e176b164a3c5527f0458d5b1154d00): 支持明亮的 aixterm 颜色
> 
> ^(签字人：Eyal Soha)

> 这些颜色是 3 位颜色的明亮变体。
> 
> 它们分别位于 90-97 和 100-107 范围，而不是前景的 30-37 范围和背景的 40-47 范围。

该[`git config`文档](https://github.com/git/git/blob/87f17d790d8e350e8df1101476882f7751581ee0/Documentation/config.txt#L264-L268)现在包括：

接受的基本颜色是`normal`、`black`、`red`、`green`、`yellow`、 `blue`、`magenta`和。 给出的第一个颜色是前景；第二个是背景。`cyan``white`

> **除了有一个明亮的变体之外的所有基本颜色`normal`，可以通过在颜色前面加上前缀来指定`bright`，例如`brightred`。**

* * *

在 Git 2.35（2022 年第一季度）中，“ `default`”和“ `reset`”颜色已添加到我们的调色板中。

请参阅[Robert Estelle ( ) 的 commit](https://github.com/rwe) [de65851](https://github.com/git/git/commit/de658515ae1166577441da09fe7624769e263a3e) （ 2021 年 10 月 26 日）和[commit 05f1f41](https://github.com/git/git/commit/05f1f41c9b02b916a5f03c5658bec3270ac3684d)、[commit aeefc18](https://github.com/git/git/commit/aeefc1866c7f98ac76aac66b92cc142b8135054e)（2021 年 10 月 25 日[）](https://github.com/rwe)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 15209c8](https://github.com/git/git/commit/15209c86126a00e8e26ced788019edabf100abaa))^(中，2021 年 12 月 15 日）)[`rwe`](https://github.com/rwe)
^([`gitster`](https://github.com/gitster))

> ## [`color`](https://github.com/git/git/commit/de658515ae1166577441da09fe7624769e263a3e): 允许颜色以“reset”为前缀
> 
> ^(签字人：罗伯特·埃斯特尔)

> "reset" 以前被视为一个独立的特殊颜色名称，代表`\e[m`.
> 现在，它可以应用于其他颜色属性，允许精确的规范而无需隐式属性继承。
> 
> 例如，“reset green”现在呈现`\e[;32m`，这被解释为“reset all; then set foreground to green”。
> 这意味着背景和其他属性也被重置为默认值。
> 
> 以前，这是不可能用单一颜色表示的：“reset”可以单独指定，也可以是带有属性的颜色，但是像清除背景颜色这样的事情是不可能的。
> 
> 有一个单独的更改引入了“默认”颜色名称来帮助实现这一点，但即便如此，上述内容也只能通过显式禁用每个属性来表示：green default no-bold no-dim no-italic no- ul no-blink no-reverse no-strike

`config`现在在其[手册页](https://github.com/git/git/blob/de658515ae1166577441da09fe7624769e263a3e/Documentation/config.txt#L291-L295)中包含：

> 伪`reset`属性在应用指定的颜色之前重置所有颜色和属性。例如，`reset green`将导致绿色前景和没有任何活动属性的默认背景。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-21T08:42:23.000

分享我的 git 日志格式：

```
$ git log --graph --pretty=format:'%C(magenta)%h%Creset -%C(red)%d%Creset %s %C(dim green)(%cr) %C(cyan)<%an>%Creset' --abbrev-commit 
```

您还可以在*~/.gitconfig*中添加别名：

```
[alias]
    logs  = log --graph --pretty=format:'%C(magenta)%h%Creset -%C(red)%d%Creset %s %C(dim green)(%cr) %C(cyan)<%an>%Creset' --abbrev-commit 
```

然后您可以使用您在中定义的别名`~/.gitconfig`。

```
$ git logs 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-11-17T03:05:17.213

我使用的是 Ubuntu 18.04，并且能够使用 Xiaofei HAN 的建议。

对于尝试完成此操作的初学者，我通过编辑 .gitconfig 获得了最好的运气。

```
nano ~/.gitconfig 
```

在现有文本下方粘贴 [alias] 块

CTRL + O（写出）+ CTRL + X（关闭纳米）

完成此操作后，查看可以使用的漂亮颜色

```
git logs 
```

使用

'git log' 将为您提供没有颜色的视图，

'git logs --oneline' 相同，除了一个会在侧面显示繁荣

谢谢，我希望这对某人有帮助

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-02-23T07:50:49.777

这是我在了解使用自定义十六进制颜色值的语法后编写的两个别名，如@VonC 的答案所示。

有四个版本，唯一的区别是 --graph 指令，“f”版本还会显示添加、删除或修改的文件：

```
[alias]
    lg = log --graph --pretty=format:"%C(#cd9a00)%h\\%C(#0080ff)\\ <%an>\\ %C(#17b062)(%cr)\\ %d\\%C(#c0d6de)%s"    
    l1 = log --pretty=format:"%C(#cd9a00)%h\\%C(#0080ff)\\ <%an>\\ %C(#17b062)(%cr)\\ %d\\%C(#c0d6de)%s"    
    lgf = log --name-status --graph --pretty=format:"%C(#cd9a00)%h\\%C(#0080ff)\\ <%an>\\ %C(#17b062)(%cr)\\ %d\\%C(#c0d6de)%s" 
    l1f = log --name-status --pretty=format:"%C(#cd9a00)%h\\%C(#0080ff)\\ <%an>\\ %C(#17b062)(%cr)\\ %d\\%C(#c0d6de)%s" 
```

我使用这个站点来选择我想要的确切颜色，然后从中复制十六进制值：

[https://www.colorhexa.com/](https://www.colorhexa.com/)

对于 Windows，打开位于“C:\Users\YourUserName”文件夹中的 .gitconfig 文件并添加一个别名部分，如上所示。

希望你喜欢他们。

# javascript - .after 方法在 jQuery 1.9.1 中断开连接的 DOM 元素上的预期行为

> ID：15458239
> 
> 赞同：2
> 
> 时间：2013-03-17T06:41:04.670
> 
> 标签：javascript, jquery, dom

我正在使用 jQuery 1.9.1 使用以下类型的构造构造断开连接的 DOM 元素：

```
$("<div/>").after("<p></p>"); 
```

根据文档（[http://api.jquery.com/after/](http://api.jquery.com/after/)），这应该返回一个 jQuery 集，其中包含一个 div 和按该顺序排列的段落。相反，我只是得到一个 div。我发现至少有两个涉及此类行为的错误报告 - [http://bugs.jquery.com/ticket/8759](http://bugs.jquery.com/ticket/8759)和[http://bugs.jquery.com/ticket/10517](http://bugs.jquery.com/ticket/10517) - 但据称两者都已修复1.9.1。是这种情况吗？还是我误解了这种方法应该如何处理断开的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:33:31.750

[jQuery 1.9 升级指南](http://jquery.com/upgrade-guide/1.9/#after-before-and-replacewith-with-disconnected-nodes)说断开连接的节点不再有任何特殊情况处理，`.after()`它只是还没有进入主文档。就特殊情况而言，您提到的错误只是冰山一角。

不确定用例是什么，但是如果您要随着时间的推移创建多个断开连接的元素并希望它们按特定顺序排列，那么在一个普通的旧 JavaScript 数组中创建它们并一次性附加它们。如果需要，您仍然可以使用 jQuery 来创建它们。

`var x = [ $("<div/>")[0], $("<p/>")[0] ]; $(x).appendTo("body");`

# java - Apache Camel：CamelContext 停止通知

> ID：15458240
> 
> 赞同：3
> 
> 时间：2013-03-17T06:41:06.023
> 
> 标签：java, apache-camel

当 CamelContext 停止时，如何获得通知，API 有 addStartupListener 但上下文停止时没有类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:05:53.680

[Camel 邮件列表http://camel.465427.n5.nabble.com/Notification-on-CamelContext-stop-tp5729300.html](http://camel.465427.n5.nabble.com/Notification-on-CamelContext-stop-tp5729300.html)上也提出了这个问题

有几种方法。正如 Evgeniy Dorofeev 所展示的生命周期战略。 [http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/spi/LifecycleStrategy.html](http://camel.apache.org/maven/current/camel-core/apidocs/org/apache/camel/spi/LifecycleStrategy.html)

另一个是事件通知器，它使用事件对象并且比生命周期策略拥有更多的事件。例如本例所示：[http ://camel.apache.org/eventnotifier-to-log-details-about-all-sent-exchanges.html](http://camel.apache.org/eventnotifier-to-log-details-about-all-sent-exchanges.html)

如果您使用 Spring 或 Blueprint XML，那么您可以通过定义一个 bean 来配置它们，Camel 将按照此处记录的方式获取它：http: [//camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html](http://camel.apache.org/advanced-configuration-of-camelcontext-using-spring.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T06:57:01.247

这是方法之一

```
 camelContext.addLifecycleStrategy(new LifecycleStrategySupport() {
        @Override
        public void onContextStop(CamelContext context) {
        }
    }); 
```

在克劳斯易卜生的回答中看到更多，他是骆驼行动的作者[http://www.manning.com/ibsen/](http://www.manning.com/ibsen/)

# c# - 将枚举转换为列表

> ID：15458247
> 
> 赞同：0
> 
> 时间：2013-03-17T06:42:13.333
> 
> 标签：c#, .net, enums

我有一个枚举定义为

```
public enum SecurityRole
{
    Admin = 0,
    ViewLog = 1,
    DeleteLog = 2
} 
```

并希望使用 [此处](https://stackoverflow.com/questions/1167361/how-do-i-convert-an-enum-to-a-list-in-c)描述的技术 来获得`List<SecurityRole>`.

因此这条线

```
var lst = Enum.GetValues(typeof(SecurityRole)).Cast<SecurityRole>().ToList(); 
```

应该可以工作，但 IntelliSense 不允许 .ToList 属性

我正在使用`System.Linq`. 我还需要其他参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T06:47:18.827

`using System.Linq`应该这样做。`ToList()`是一种`IEnumerable<T>`扩展方法。可能会检查您的代码中是否有任何其他编译错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T06:50:22.590

在此处查看解决方案：[如何将枚举转换为 C# 中的列表？](https://stackoverflow.com/questions/1167361/how-do-i-convert-an-enum-to-a-list-in-c)

```
Enum.GetValues(typeof(SomeEnum)).Cast<SomeEnum>(); 
```

# java - 这个 java for 循环条件有什么问题？

> ID：15458248
> 
> 赞同：4
> 
> 时间：2013-03-17T06:42:27.753
> 
> 标签：java, for-loop, compiler-errors

1.

```
for (int i = 0; (boolean)true; i++) { 

} 
```

2.

```
for (int i = 0; (boolean)false; i++) {

} 
```

3.

```
boolean t=false;
for (int i = 0; t; i++) {

} 
```

第一个 for 循环*编译*并*运行*，但第二个 for 循环`compilation fails with error`。它说`Unreachable Statement`。第三个 for 循环*编译*并*运行*。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:44:25.400

第一个循环是无限循环。由于条件**始终为真**，并且将始终被满足。

这就像写：

```
int i=0;
while(true)
   i++; 
```

正如您所看到的，条件总是`true`如此，并且没有任何改变。

第二个循环是`Unreachable code`因为永远不会到达此循环下方的代码段（`false`始终为假，您永远不会更改它）。所以是多余的。

**请参阅第 14.21 章。[无法访问的语句](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)**

因为`Java`知道程序员是人类 :) 它会通知您这一点以防止错误。

请注意，`while(false)`您所拥有的第二个循环与`if(false)...`since `while(false)`（或您拥有的循环）不同是没有意义的，因为它下面的代码**将不会被执行**。不像`if(false)`那可能有`else`，所以在这种情况下编译器不会抱怨它。

* * *

*关于OP更新：*

在第三种情况下，不会出现编译错误，因为`false`值已分配给变量，在这种情况下，可以重新分配变量以使其具有`true`值。所以编译器不会出现错误。请注意，如果变量声明为，`final`那么编译器将出现错误，因为该变量永远不能分配给新值，因此`for`循环下面的代码将*无法访问*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T06:45:24.097

在第二个`for`循环中，条件始终是`false`这样的`for`块（即使是空的）永远不会被执行（它是`unreacheable`）。

就像在这种情况下：

```
if (false) {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:45:36.537

```
 for (int i = 0; <This_has_to_be_true>; i++) 
```

for 循环的第二部分必须为真才能执行循环。由于您手动将其设置为始终为 fase，因此循环将永远不会运行，因此其中的代码无法访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T06:47:39.460

编译器告诉你第二个循环内的代码（即使是空的）*永远不会*到达和执行，因为条件总是`false`.

顺便说一句，你为什么要这样做呢？

# java - Quartz 中每 50 秒的 Cron 表达式

> ID：15458254
> 
> 赞同：9
> 
> 时间：2013-03-17T06:43:13.353
> 
> 标签：java, quartz-scheduler, quartz.net

我每 50 秒使用带有 cron 表达式的 Quartz 运行我的作业：

```
Cron_Expression = "0/50 * * * * ?" 
```

发生的事情是我的工作在几秒钟内运行：**50、60、50、60，......**而不是每 50 秒！并且不在第二个“0”处运行。

从 0 开始每 50 秒正确的 cron 表达式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-18T14:07:48.683

'/' 语法指定期间的增量，而不是重复间隔。诚然，这是一个微妙而令人困惑的差异。

在这种情况下，在 1 分钟期间只有一个可用增量（50 秒）。第一个数字指定开始的值，在本例中为 0。在 '/' 之前指定 '*' 等同于指定 0。因此作业只会在分钟（0 和 60 可以互换）和 50 秒时触发.

如果可以将周期除以多个增量，例如 0/10，那么它将在每个这些时间触发，例如在 10、20、30 等秒。

如果您希望作业定期触发，那么您可以使用指定的`SimpleTrigger`Quartz `repeatInterval`。

# javascript - 捕捉标签上的未知图片并设置默认图像

> ID：15458255
> 
> 赞同：4
> 
> 时间：2013-03-17T06:43:19.907
> 
> 标签：javascript, html, image, onerror

我有这个图像标签：

```
<img id="viewerofinstore" src="{{filteredArray[imageIndex]}}" 
onError="this.style.visibility = 'hidden'"   
onload="this.style.visibility = 'visible'"  width="297px" height="297px" /> 
```

图像的`src`数量每秒钟都会与其他图像发生变化，但有时会出现图像磨损并出现未知图像的情况。

我添加了，`"onError="this.style.visibility = 'hidden'"`但有时我可以在隐藏之前看到未知图像一秒钟。

我想在显示之前捕获未知图像并放置默认图像或隐藏图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:18:42.187

您可以默认隐藏img，并且只有在正确加载时才使其可见。

```
<img id="viewerofinstore" src="{{filteredArray[imageIndex]}}" style="visibility:hidden"   
onload="this.style.visibility = 'visible'"  width="297px" height="297px" /> 
```

# qt - 如何在 Qt 中制作两行选项卡

> ID：15458256
> 
> 赞同：1
> 
> 时间：2013-03-17T06:43:25.143
> 
> 标签：qt, tabs, qtabwidget

我想要类似下图的东西。我想要两行标签。一个包含在另一个中。是使用两个 QTabWidget 的方式吗？另外，我想提一下，程序的主窗口会显示这种结构。如果你有什么建议...

我希望标签看起来像下面这样（当然，不完全是；这个手工制作的图像很糟糕）。

[图片 http://imageshack.us/a/img831/3889/subtabs.png](http://imageshack.us/a/img831/3889/subtabs.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:49:57.230

使用 nested [`QTabWidgets`](http://qt-project.org/doc/qt-4.8/qtabwidget.html)：一个外部主选项卡，其中包含自己的辅助 QTabWidget（需要一个）。

* * *

既然您是在特定的外观之后，那么有三种可能的解决方案（按复杂性排序）：

1.  看看你可以使用嵌套的 QTabWidgets对*Qt 样式表做什么。*[请参阅此答案以获取一些示例代码](https://stackoverflow.com/a/2513792/1717300)，当然还有[文档中的参考](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)。

2.  忘记 QTabWidget，编写自己的，包含自定义选项卡栏，并使用[QStackedWidget](http://qt-project.org/doc/qt-4.8/qstackedwidget.html)或仅嵌套[QStackedLayout](http://qt-project.org/doc/qt-4.8/qstackedlayout.html)用于选项卡内容。您可以像使用 QTabWidget 一样嵌套这些自定义选项卡式小部件，或者在一个非嵌套自定义选项卡小部件中仅使用动态两行选项卡栏，现在它就是您的代码。

3.  开始将 QML 用于 UI，可能只是用于自定义标签栏，也可能用于整个中央小部件，具体取决于您在那里的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T03:18:13.133

您可以改用[QTabBar](http://qt-project.org/doc/qt-5/qtabbar.html)。QTabWidget 由 QStackedWidget 和 QTabBar 组成，但您可以直接使用 QTabBars - 并具有两层或三层或更多层选项卡。

# c# - 如何有空格的枚举值？

> ID：15458257
> 
> 赞同：28
> 
> 时间：2013-03-17T06:43:33.000
> 
> 标签：c#, .net, vb.net, enums

如何使用枚举实现以下目标`.NET`？我想对每个包含空格的值进行描述。

```
public enum PersonGender
    {
        Unknown = 0,
        Male = 1,
        Female = 2,
        Intersex = 3,
        Indeterminate = 3,
        Non Stated = 9,
        Inadequately Described = 9
    } 
```

我希望能够在每次使用这种类型的值时选择是使用描述还是整数。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-17T06:45:12.043

不，这是不可能的，但您可以将属性附加到`enum`成员。[`EnumMemberAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.enummemberattribute.aspx)专为您描述的目的而设计。

```
public enum PersonGender
{
    Unknown = 0,
    Male = 1,
    Female = 2,
    Intersex = 3,
    Indeterminate = 3,

    [EnumMember(Value = "Not Stated")]
    NonStated = 9,

    [EnumMember(Value = "Inadequately Described")]
    InadequatelyDescribed = 9
} 
```

有关如何使用`EnumMemberAttribute`将字符串转换为`enum`值的更多信息，请参阅[此线程](https://stackoverflow.com/questions/10418651/using-enummemberattribute-and-doing-automatic-string-conversions)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-17T06:46:58.000

这很简单。为您的字符串创建一个扩展方法，该方法根据您的编码约定返回一个格式化的字符串。您可以在很多地方使用它，而不仅仅是在这里。这适用于 camelCase 和 TitleCase。

```
 public static String ToLabelFormat(this String s)
    {
        var newStr = Regex.Replace(s, "(?<=[A-Z])(?=[A-Z][a-z])", " ");
        newStr = Regex.Replace(newStr, "(?<=[^A-Z])(?=[A-Z])", " ");
        newStr = Regex.Replace(newStr, "(?<=[A-Za-z])(?=[^A-Za-z])", " ");

        return newStr;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T07:19:04.210

```
var assembly = Assembly.LoadFrom("ResourcesLib.DLL");            
var resourceManager =
new ResourceManager("ResourcesLib.EnumDescriptions", assembly);                        

var lst = Enum.GetValues(typeof(PersonGender)).Cast<PersonGender>().ToList();
foreach (var gender in lst)
{
  Console.WriteLine(gender); // Name
  Console.WriteLine((int)gender); //Int Value
  Console.WriteLine(resourceManager.GetString(gender.ToString()));//localized Resorce
} 
```

所以空间可能驻留在本地化资源中......

# jquery - paypal 快速结帐 ajax

> ID：15458258
> 
> 赞同：1
> 
> 时间：2013-03-17T06:44:09.223
> 
> 标签：jquery, ajax, paypal

我有一个 JQuery 客户端，我希望能够使用 Express Checkout 在 PayPal 进行信用卡交易。客户端在 Jquery 中向用户呈现一个表单，该表单启动事务。客户端通过 AJAX 向服务器发起购买。我对 PayPal 沙箱执行 SetExpressCheckout。我得到响应令牌，创建一个带有令牌的 url 并发送回客户端。

我希望与 PayPal 的交互发生在客户端上，但是，为了实现这一点，客户端必须打开一个指向 url 的窗口，以便用户与 PayPal 进行交互。在交互结束时，PayPal 站点重定向回来到我们的服务器。

如何让 PayPal API 在 AJAX 流中工作？客户端如何从它必须创建的窗口中取回控制权以让用户与 PayPal 交互？关于如何在 AJAX 应用程序中处理 PayPal 流的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:47:21.730

[Express Checkout Digital Goods 文档](https://www.x.com/sites/default/files/pp_expresscheckout_integrationguide_dg.pdf)将涵盖让所有内容在灯箱中运行。

# date - 带有日期参数的存储过程

> ID：15458263
> 
> 赞同：3
> 
> 时间：2013-03-17T06:44:30.270
> 
> 标签：date, stored-procedures, parameters

我正在尝试创建一个在执行时具有日期参数的存储过程。我希望能够搜索在特定日期之间发货的订单。我有这个：

```
create procedure sp_orders_by_dates
        @startdate smalldatetime,
        @enddate smalldatetime
as
select  OrderID,
        o.CustomerID,

        c.CompanyName as CustomerCompany,
        s.ShipperID,
        s.CompanyName as ShipperCompany,
        ShippedDate

from    Orders o join Customers c
on      o.CustomerID = c.CustomerID join Shippers s
on      s.ShipperID = o.ShipperID
where @startdate = ShippedDate,
        @enddate = ShippedDate
order by ShippedDate 
```

并执行，我必须这样做：

```
EXEC sp_orders_by_dates '1991-07-01', '1991-08-31' 
```

我知道这部分出了什么问题，但我只是不知道如何在这里制作“介于”声明：

```
where @startdate = ShippedDate,
        @enddate = ShippedDate 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T06:48:33.973

```
where ShippedDate BETWEEN @startdate and @enddate 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T00:05:38.893

这是 C# 中的抓取：

```
DataTable t = new DataTable();
//set up your connectionString beforhand
using(SqlConnection cn = new SqlConnection(conn))
        {
            //and isolating the work from everything else
            try
            {
                //configure the query apparatus, using the stored procedure
                SqlCommand cmd = new SqlCommand();
                cmd.Connection = cn;
                cmd.CommandType = CommandType.StoredProcedure;
                cmd.CommandText = "<StoredProcName>";

                //set up the parameters
                SqlParameter prmFrom = cmd.CreateParameter();
                prmFrom.Direction = ParameterDirection.Input;
                prmFrom.ParameterName = "@FromDate";
                prmFrom.IsNullable = true;
                SqlParameter prmTo = cmd.CreateParameter();
                prmTo.Direction = ParameterDirection.Input;
                prmTo.ParameterName = "@ToDate";
                prmTo.IsNullable = true;

                prmFrom.DbType = DbType.DateTime;
                prmFrom.SqlValue = from;

                prmTo.DbType = DbType.DateTime;
                prmTo.SqlValue = to;

                //make sure the command and the params go together from the app
                cmd.Parameters.Add(prmFrom);
                cmd.Parameters.Add(prmTo);
                SqlDataAdapter da = new SqlDataAdapter(cmd);

                //finally, fill the table so you can pass it back to the app
                da.Fill(t);
            }
            catch(Exception ex)
            {
               //error handling goes here
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-31T17:04:34.060

“from”和“to”是调用此函数时需要创建为输入的值。该函数的标头未在上面的 c# 代码中显示，应如下所示： public HttpResponseMessage Get(string from, string to)

# facebook - 窗口电话 8 facebook 连接

> ID：15458265
> 
> 赞同：0
> 
> 时间：2013-03-17T06:44:46.750
> 
> 标签：facebook, windows-phone-7, windows-phone-8, facebook-c#-sdk

我正在尝试从以下资源进行 facebook 连接登录：http: [//mobile.tutsplus.com/tutorials/windows/windows-phone-connecting-with-facebook/](http://mobile.tutsplus.com/tutorials/windows/windows-phone-connecting-with-facebook/)

但是，与教程不同的是，我使用的是 Window Phone 8 OS 版本而不是 Window Phone OS 7.1

目前，我在点击发布按钮时卡住了，它应该将我重定向到 facebook 登录页面，但它给了我一个错误页面，“我们无法显示此页面，请刷新页面或稍后再试”

无论如何要调试这个以及如何解决它？我还是窗口电话开发的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T02:05:53.153

我刚刚通读了教程，没有看到任何不适用于 WP8 的内容，所以我认为这不是问题所在。您可能想查看我们正在开发的适用于 Windows 和 Windows Phone 的 Facebook SDK。它仍然是 alpha，但示例和代码包含您在 Windows Phone 8 上进行身份验证所需的一切。[https://github.com/facebook-csharp-sdk/facebook-winclient-sdk](https://github.com/facebook-csharp-sdk/facebook-winclient-sdk)

# windows - Windows + Qt 以及如何在没有 OpenCV 的情况下捕获网络摄像头源

> ID：15458274
> 
> 赞同：7
> 
> 时间：2013-03-17T06:46:49.960
> 
> 标签：windows, qt, webcam

我长期以来一直在与这个问题作斗争。我无法让 OpenCV 工作，并且我已经关注了很多关于它以及如何在 Qt 中使用的教程，所以我很累，我想避免为此使用 OpenCV。

现在，我的要求或问题......我需要在 Qt GUI 应用程序中显示一个网络摄像头提要（实时视频，没有音频），只有一个按钮：“拍摄快照”，显然，从当前提要和存储它。

就这样。

有没有办法在不使用 OpenCV 的情况下完成这项工作？

系统规格：

*   Qt 4.8

*   Windows XP 32 位

*   USB 2.0.1.3M UVC WebCam（我现在用的那个，应该也支持其他型号）

希望有人可以帮助我，因为我快疯了。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T22:00:04.817

好的，我终于做到了，所以我将在这里发布我的解决方案，以便我们对此有所了解。

我使用了一个名为“ESCAPI”的库：[http ://sol.gfxile.net/escapi/index.html](http://sol.gfxile.net/escapi/index.html)

这提供了一种从设备捕获帧的极其简单的方法。有了这些原始数据，我只需要创建一个 QImage，它稍后会显示在 QLabel 中。

我创建了一个简单的对象来处理这个问题。

```
#include <QDebug>
#include "camera.h"

Camera::Camera(int width, int height, QObject *parent) :
    QObject(parent),
    width_(width),
    height_(height)
{
    capture_.mWidth = width;
    capture_.mHeight = height;
    capture_.mTargetBuf = new int[width * height];

    int devices = setupESCAPI();
    if (devices == 0)
    {
        qDebug() << "[Camera] ESCAPI initialization failure or no devices found";
    }
}

Camera::~Camera()
{
    deinitCapture(0);
}

int Camera::initialize()
{
    if (initCapture(0, &capture_) == 0)
    {
        qDebug() << "[Camera] Capture failed - device may already be in use";
        return -2;
    }
    return 0;
}

void Camera::deinitialize()
{
    deinitCapture(0);
}

int Camera::capture()
{
    doCapture(0);
    while(isCaptureDone(0) == 0);

    image_ = QImage(width_, height_, QImage::Format_ARGB32);
    for(int y(0); y < height_; ++y)
    {
        for(int x(0); x < width_; ++x)
        {
            int index(y * width_ + x);
            image_.setPixel(x, y, capture_.mTargetBuf[index]);
         }
    }
    return 1;
} 
```

和头文件：

```
#ifndef CAMERA_H
#define CAMERA_H

#include <QObject>
#include <QImage>
#include "escapi.h"

class Camera : public QObject
{
    Q_OBJECT

public:
    explicit Camera(int width, int height, QObject *parent = 0);
    ~Camera();
    int initialize();
    void deinitialize();
    int capture();
    const QImage& getImage() const { return image_; }
    const int* getImageRaw() const { return capture_.mTargetBuf; }

private:
    int width_;
    int height_;
    struct SimpleCapParams capture_;
    QImage image_;
};

#endif // CAMERA_H 
```

它是如此简单，但仅用于示例目的。用途应该是这样的：

```
Camera cam(320, 240);
cam.initialize();
cam.capture();
QImage img(cam.getImage());
ui->label->setPixmap(QPixmap::fromImage(img)); 
```

当然，您可以使用 QTimer 并更新 QLabel 中的帧，您将在那里有视频......

希望对您有所帮助！并感谢尼古拉斯的帮助！

# java - 色相蜂蜡建表错误

> ID：15458283
> 
> 赞同：0
> 
> 时间：2013-03-17T06:47:20.973
> 
> 标签：java, hadoop, hive, hue

我正在运行基于 Impala 的 Cent OS 预配置来运行 Hadoop 架构。我正在使用 Hue 自动生成表格形式的 .csv 文件。我在`/usr/hive/warehouse`. 我确保在上传之前从文件中删除列标题。

但是它给了我以下异常 `Exception communicating with Beeswax (Hive UI) Server at localhost:21000: BeeswaxException(errorCode=0, log_context='', message="com.cloudera.impala.common.AnalysisException: Syntax error at:\n\nCREATE TABLE `2012_Q4`\n^\n(\n `col_0` string ,\n `col_1` string ,\n `col_2` string ,\n `col_3` string ,\n `col_4` string ,\n `col_5` string ,\n `col_6` string ,\n `col_7` string ,\n `col_8` string ,\n `col_9` string ,\n `col_10` string ,\n `col_11` string ,\n `col_12` string ,\n `col_13` string ,\n `col_14` string ,\n `col_15` string ,\n `col_16` string ,\n `col_17` string ,\n `col_18` string ,\n `col_19` string ,\n `col_20` string ,\n `col_21` string ,\n `col_22` string ,\n `col_23` string ,\n `col_24` string ,\n `col_25` string ,\n `col_26` string ,\n `col_27` string ,\n `col_28` string ,\n `col_29` string ,\n `col_30` string ,\n `col_31` string ,\n `col_32` string ,\n `col_33` string ,\n `col_34` string ,\n `col_35` string ) \nROW FORMAT DELIMITED\n FIELDS TERMINATED BY ','\nEncountered: IDENTIFIER\nExpected: DESCRIBE, SELECT, SHOW, USE, INSERT\n\n\tat com.cloudera.impala.analysis.AnalysisContext.analyze(AnalysisContext.java:135)\n\tat com.cloudera.impala.service.Frontend.createExecRequest(Frontend.java:221)\n\tat com.cloudera.impala.service.JniFrontend.createExecRequest(JniFrontend.java:89)\nCaused by: java.lang.Exception: Syntax error\n\tat com.cloudera.impala.analysis.SqlParser.unrecovered_syntax_error(SqlParser.java:1369)\n\tat java_cup.runtime.lr_parser.parse(lr_parser.java:616)\n\tat com.cloudera.impala.analysis.AnalysisContext.analyze(AnalysisContext.java:125)\n\t... 2 more\n", SQLState='42000', handle=QueryHandle(log_context='', id=''))`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:46:31.687

正如您在错误中看到的，Impala 仅支持`Expected: DESCRIBE, SELECT, SHOW, USE, INSERT`，因此还没有 CREATE 表。这应该在下个月的下一个 Impala 版本中得到解决。

同时，您可以在 Hue Beeswax 或 Hive CLI 中创建表（因为 Hive 支持 CREATE 表）。

# jsf - 在jsf中验证后将字段设置为空白

> ID：15458288
> 
> 赞同：1
> 
> 时间：2013-03-17T06:47:52.267
> 
> 标签：jsf, richfaces, ajax4jsf

我是 JSF 的新手，正在经历一个 JSF 应用程序。

我想验证空白字符串的一个密码字段。

我知道不是在 Javascript 中执行此操作，而是调用一个函数进行验证。

我的需要是，如果密码字段的值为空白，那么它会从验证器函数进行验证，直到现在它运行正常，但在验证之后，当它到达 UI bav=ck 时，密码字段应该为空。

如果密码字段为空（仅包含空格），那么我希望将其设置为空白，否则保持数据不变。

我到现在为止的尝试，JSF 视图页面 singin.xhtml

```
 <h:outputText styleClass="outputBox" style="margin: 3px;"
                        value="Password" />
                    <h:inputSecret id="password" required="true" 
                        requiredMessage="Please enter your password"
                        value="#{userActionManager.dto.password}" 
                        validator="#{userActionManager.validateSamePassword}">

                            <a4j:ajax event="change" execute="@this" bypassUpdates="true" />
                    </h:inputSecret> 
```

验证器方法。

```
 public void validateSamePassword(FacesContext fc, UIComponent component, Object obj) {
         System.out.println("UserActionManager.validateSamePassword()");

         String confirmPassword = (String)obj;
         System.out.println("Password is :" + confirmPassword);
            if(confirmPassword!=null && confirmPassword.trim().equals("")) {
              FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Password cannot be blank", " detail Passwords do not match!");

//            System.out.println(component.getFamily());
//            String field1Id = (String) component.getAttributes().get("password");

              // Find the actual JSF component for the client ID.
//            UIInput textInput = (UIInput) fc.getViewRoot().findComponent("password");
//            textInput.setValue("");

              dto.setPassword(null);

              throw new ValidatorException(message);
            }else{
                dto.setPassword(confirmPassword);
            }
    } 
```

我试过选项 dto.setPassword(null); 但是当它返回查看时，密码字段中的空格仍然存在，我必须手动删除。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T15:05:46.523

如果组件被标记为无效，则它不会重新显示模型值（在您的情况下，来自 的值`dto`）。相反，它将重新显示其[提交的值](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#getSubmittedValue%28%29)。您只需要将提交的值设置为空字符串。

代替

```
dto.setPassword(null); 
```

经过

```
((UIInput) component).setSubmittedValue(""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:27:25.450

在您的验证器中，调用作为参数传递 `resetValue()`的实例`UIComponent`

```
public void validateSamePassword(FacesContext fc, UIComponent component, Object obj) {
     System.out.println("UserActionManager.validateSamePassword()");

     String confirmPassword = (String)obj;
     System.out.println("Password is :" + confirmPassword);
        if(confirmPassword!=null && confirmPassword.trim().equals("")) {
          FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_ERROR,   "Password cannot be blank", " detail Passwords do not match!");

          component.resetValue();

          throw new ValidatorException(message);
        }else{
            dto.setPassword(confirmPassword);
        }
} 
```

`dto.setPassword(null)`不会影响密码框中的值，因为输入组件旨在保留导致它们验证失败的值。`resetValue()`是一种将导致组件将其值重置为未初始化状态的方法

编辑：上面的解决方案过早地重置输入值。`ValidationException`从技术上讲，在抛出a 之前验证不会失败。要有效地重置字段：

1.  定义一个监听事件，只有在验证失败后才会重置组件的值

    ```
    public void resetPwd(ComponentSystemEvent evt) throws IOException {
    HtmlInputSecret txt = (HtmlInputSecret) evt.getComponent();
    if(!txt.isValid()){ //make sure that the validation failed 
        txt.resetValue();
       }

    } 
    ```

2.  将侦听器事件附加到`postValidate`密码组件上的事件侦听器。这将确保仅在验证失败后才重置该值。

    ```
     <h:inputSecret id="password" required="true" 
                    requiredMessage="Please enter your password"
                    value="#{userActionManager.dto.password}" 
                    validator="#{userActionManager.validateSamePassword}">
                        <f:event name="postValidate" listener="#{userActionManager.resetPwd}"/>
                        <a4j:ajax event="change" execute="@this" bypassUpdates="true" />
                </h:inputSecret> 
    ```

这里的关键是在正确的时间重置值。其他时间选项包括`preRenderView`事件和`postAddToView`事件。一切都在时机

# iphone - 从 Flickr URL 下载照片

> ID：15458292
> 
> 赞同：0
> 
> 时间：2013-03-17T06:48:31.427
> 
> 标签：iphone, ios5, ios6, flickr

我需要从给定的 flickr URL 下载 flickr 图像，是否有任何帮助或任何好的链接。请帮帮我。为了进一步说明，我有一个 URL [http://www.flickr.com/photos/XYZ@ABC/](http://www.flickr.com/photos/XYZ@ABC/)并且它的图片很少。我需要下载这些图像。

在此先感
谢阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:17:40.617

[Flickr API](http://www.flickr.com/services/api/)的文档是开始的地方，它可能包含您需要的所有信息。该页面链接到用于 Objective-C 客户端的库，称为（毫不奇怪）[ObjectiveFlickr](https://github.com/lukhnos/objectiveflickr)。

# c# - 强类型视图中的复选框集合

> ID：15458295
> 
> 赞同：0
> 
> 时间：2013-03-17T06:48:46.937
> 
> 标签：c#, asp.net, asp.net-mvc, razor, asp.net-mvc-4

我使用 MVC 4，并定义了以下模型并在 View 中使用相同的模型。

我想在视图中显示项目并为每个城市渲染复选框。因此用户可以为特定项目选择多个城市。

```
public class City
{
int id{get;set;}
string name{get;set;}
}
public class Item
{
int id{get;set;}
List<City> cities{get;set;}
}

public class ItemController{

public ActionResult Save(Item item){
 List<city> selectedCitirs=item.cities; // here null

 return View();
}

public ActionResult Get(int id){

Item item=Service.GetItem(id);

return View(item);

}

}

@model item

@foreach(City c in item.cities){

@Html.CheckBoxFor(c=>c.name)

} 
```

> 在控制器中，我想获取选定的城市名称，并希望以类似 city1、city2、city3 格式的数据库存储。

**但控制器没有给出 item.cities。怎么做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:00:47.027

尝试

```
@model Item

@for (int i=0; i < Model.cities.Length; ++i) 
{
    @Html.CheckBoxFor(m => m.cities[i].name)
} 
```

也可以看看：

*   [模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)
*   [用于模型绑定到数组、列表、集合、字典的 ASP.NET 有线格式](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

# ember.js - 灰烬数据。为 many2many 和 one2many 添加子记录

> ID：15458301
> 
> 赞同：3
> 
> 时间：2013-03-17T06:49:50.137
> 
> 标签：ember.js, ember-data

JSFiddle - [http://jsfiddle.net/9gA4y/1/](http://jsfiddle.net/9gA4y/1/)

**我有以下模型：**

```
contact => (many2many) => tags
contact => (one2many) => address 
```

**Ember 数据模型：**

```
App.Contact = DS.Model.extend({
  name: attr('string'),  
  tags: hasMany('App.Tag'),
  addresses: hasMany('App.Address')
});

App.Address = DS.Model.extend({
  street: attr('string'),
  country: attr('string'),
  contacts: belongsTo('App.Contact')
})
App.Tag = DS.Model.extend({
  name: attr('string'),
  contacts: hasMany('App.Contact')
}); 
```

**我想出了添加新的联系人记录**

*   如何将现有的地址关联到新创建的联系人。（一二多）
*   如何将现有的标签关联到新创建的联系人。（多 2 多）
*   如何删除现有联系人中的关联。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T17:58:18.927

`hasMany`可以通过 或 来`addObject`操纵`addObjects`关系`removeObject`。

```
contact.get('addresses').pushObject(address);
contact.get('addresses').removeObject(address); 
```

您还可以在地址上设置联系人

```
address.set('contact', contact);
address.set('contact', null); 
```

此外，您注意到您应该对 belongsTo 关联使用单数形式（`contact`not `contacts`）：

```
App.Address = DS.Model.extend({
  street: attr('string'),
  country: attr('string'),
  contact: belongsTo('App.Contact')
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T19:00:51.193

尝试：

```
var contact = App.Contact.find(1),
    address = App.Address.find(1),
    tag = App.Tag.find(1);

contact.get('addresses').addObject(address);
contact.get('tags').addObject(tag);

this.get('store').commit(); //saves address and tag to contact

contact.get('tags').removeObject(tag);

this.get('store').commit(); //removes tag from contact 
```

# json - Spring Roo：ajax 或 jquery 的下拉菜单

> ID：15458303
> 
> 赞同：0
> 
> 时间：2013-03-17T06:50:08.840
> 
> 标签：json, spring, jquery, dojo, spring-roo

在一个页面中有 35 个文本字段。我想管理如果 Product Not Procured 那么页面上只显示 9 个字段，填充页面后

当我们将状态更改为 Product Procured Not Shipped 时，在填充页面后，它会显示另外 6 个字段

当我们更改状态订单已发货时，它显示 9 字段，然后在填写页面后

当我们更改状态订单已交付时，它显示 3 个字段，然后在填写页面后......请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T08:16:43.867

隐藏元素使用

```
 dojo.style(elementId, "visibility", "hidden"); 
```

检查枚举的值

```
 var orderStatus = document.getElementById('_elementName_id').value;
    if(orderStatus != "Product_Not_Procured") 
```

# php - 使用 MySQL 和 PHP 示例下拉

> ID：15458306
> 
> 赞同：0
> 
> 时间：2013-03-17T06:50:28.053
> 
> 标签：php, forms

我已经尝试过这个例子，但不确定我哪里出错了——我已经创建了数据库和相关字段。当我选择英国时，它给了我一个空白的结果。这是我的脚本

主文件

```
<?php
$connect=mysql_connect("localhost","root","") or die("Cannot connect");
$dbselect=mysql_select_db("test");
$sql_country = "SELECT * FROM COUNTRY";
$result_country = mysql_query($sql_country) or die("Query problem");

echo "<form method='POST'>";
echo "<select name='country' onChange='get_cities(this.value)'>"; //get_cities is defined below
echo "<option value=''></option>";
while($row_country = mysql_fetch_array($result_country))
{
echo "<option value='".$row_country['id']."'>".$row_country['country']."</option>";
}
echo "</select>";

echo "<select name='city' id='city'></select>"; //We have given id to this dropdown
echo "</form>";
?>
<script type="text/javascript">
function get_cities(country_id)
{
$.ajax({
type: "POST",
url: "cities.php", /* The country id will be sent to this file */
beforeSend: function () {
$("#city").html("<option>Loading ...</option>");
},
data: "country_id="+country_id,
success: function(msg){
$("#city").html(msg);
}
});
}
</script> 
```

城市.php

```
<?php
// Code for cities.php
$connect=mysql_connect("localhost","root","") or die("Cannot connect");
$dbselect=mysql_select_db("test");
$country_id = $_REQUEST['country_id'];

$sql_city = "SELECT * FROM CITY WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);
echo "<select name='city'>";

while($row_city = mysql_fetch_array($result_city))
{
echo "<option value='".$row_city['id']."'>".$row_city['city']."</option>";
}

echo "</select>";

?> 
```

示例代码：[http ://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-database-without-refreshing-the-page](http://www.x-developer.com/php-scripts/loading-drop-downs-with-ajax-php-and-fetching-values-from-database-without-refreshing-the-page)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T06:54:42.373

There doesn't seem to be any error checking in your example, and you should be aware that with databases, plenty of things can go wrong!

Try making these amendments. Change this:

```
$connect=mysql_connect("localhost","root",""); 
```

to:

```
$connect=mysql_connect("localhost","root","") or die("Cannot connect"); 
```

And this:

```
$result_country = mysql_query($sql_country); 
```

to:

```
$result_country = mysql_query($sql_country) or die("Query problem"); 
```

This will highlight two common problems - connecting or not finding the specified table.

* * *

Also, `cities.php` doesn't appear to connect to the database at all. Add in the `mysql_connect` and the `mysql_select_db` from the first file into the second, and that should connect it correctly.

* * *

Lastly, there is a serious security vulnerability with this tutorial, which would permit internet users to run arbitrary SQL on your database server. Change this:

```
$country_id = $_REQUEST['country_id']; 
```

to this:

```
$country_id = (int) $_REQUEST['country_id']; 
```

That will force the country ID to be an integer, rather than just accepting it uncritically as a string.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:16:51.130

您在 中没有任何数据库连接`cities.php`，因此`SELECT`语句不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T06:57:47.533

The response from the server contains a dropdown menu, but the current code appends the HTML result not into a div or span, but into into another dropdown menu, thus:

```
<select name='city' id='city'><select name='city'>....</select> </select> 
```

This is incorrect. To avoid this, change:

`echo "<select name='city' id='city'></select>";`

to

`echo "<div id='city'> </div>";`

Or, remove`echo "<select>"` line from cities.php

```
<?php
// DB CONNECTION
$country_id = $_REQUEST['country_id'];

$sql_city = "SELECT * FROM CITY WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);

while($row_city = mysql_fetch_array($result_city))
{
echo "<option value='".$row_city['id']."'>".$row_city['city']."</option>";
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T08:25:25.210

如果您愿意使用 jquery，这对于 ajax 驱动的 Web 应用程序有很大帮助，请在您的 jquery 代码中试试这个

```
//ensure the select name 'country' has the id 'country'
$("#country").change(function(){
//get country id of the selected country option
var countryid = $("#country option:selected").val();
//here we post the id of the country to the php page. note that within the curly braces, the first parameter is what corresponds to the variable in php e.g $countryid=$_POST[country_id]. The second parameter is the javascript variable
$.post("cities.php",{country_id:countryid},function(data){
//check that the json object returned is not empty
if(!$.isEmptyObject(data))
       { 

     var html = '';
    var len = data.length;
    for (var i = 0; i< len; i++) {
        var cityid = [data[i].id];
        var cityname = [data[i].city];      
        html += '<option value = '+cityid+'>'+city+'</option>';

    }
//append the results of the query. The prepend part is to make a blank option first and make it selected so as to force a user to actually select a city.
       $("#city").html(html).prepend("<option value='' selected='selected'></option>").show();

        }   

        else{
             alert('No cities found for this country');
            }

},'json')
}) 
```

您的城市 php 页面保持原样，但进行以下调整

```
<?php
// Code for cities.php
$connect=mysql_connect("localhost","root","") or die("Cannot connect");
$dbselect=mysql_select_db("test");
//change it from request to post.
$country_id = $_POST['country_id'];
//the below code is not safe!!! You are open to sql injection. To make it worse you are connected as root. A malicious user can drop your database. 
$sql_city = "SELECT * FROM CITY WHERE country_id = '".$country_id."'";
$result_city = mysql_query($sql_city);

while($row_city = mysql_fetch_array($result_city))
{
$data[] = $row_city;
}
//return the json onject to the client.
echo json_encode($data);

?> 
```

如果您选择 jquery 编写 javascript 的方式，上面的代码可能会对您有所帮助。您需要先下载 jquery。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T06:59:30.200

在您`cities.php`没有数据库连接。在那里也写数据库连接，然后它会给你下拉。

# c++ - 为什么 C++ 函数对象需要引用类型成员变量？

> ID：15458310
> 
> 赞同：4
> 
> 时间：2013-03-17T06:51:21.280
> 
> 标签：c++, function-object

这是一个新手 C++ 问题。我正在阅读维基百科中的“功能对象”文章。该文章有一个 C++ 示例，类似于以下内容：

```
struct printClass {
  int &count;

  printClass(int &n) : count(n) {}

  void operator()(int &i) const {
      count++;
      cout << i << "[" << count << "] ";
  }
};

int main(int argc, char** argv) {
    vector<int> a(5, 7);
    a[4] = -1;
    a.resize(10, 3);
    int state = 0;
    for_each(a.rbegin(), a.rend(), printClass(state));
} 
```

我有两个问题：

1.  为什么 count 是常规变量而不是引用类型时编译失败？[演示](http://ideone.com/aLCw3e)

2.  为什么它无法编译它我将其更改`ctor`为以下？[演示](http://ideone.com/bKcQ9q)

    `printClass(int &n) { count = n; }`

谢谢。

编辑：感谢您的解释。我看到以下版本也有效。有理由选择一个而不是另一个吗？

```
struct printClass {
  int count;

  printClass(int n) { count  = n; }

  void operator()(int &i) {
      count++;
      cout << i << "[" << count << "] ";
  }
}; 
```

编辑：根据 iammilind 的回复，这里是第 3 个版本，也可以使用`const_cast<int &>`.

```
struct printClass {
  int count ;

  printClass(int n) : count(n) {}

  void operator()(int &i) const {
      const_cast<int &>(count)++;
      cout << i << "[" << count << "] ";
  }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:54:59.493

> (1) Why does it fail to compile when count is a regular variable not a reference type?

This is a very interesting question. The question should be rather, why the code compiles when `count` is declared as a reference. :)

The regular variable fails because `int count` is not modifiable inside a `const` qualified function `operator()(int &i) const;`.

References are little different. In your code you are declaring the method as `const`, which means that `count` which is referring to `i`, now cannot refer to anything else.
But that's anyway not possible due to nature of references :). One cannot change reference binding after the initialization.
`operator()` just checks whether you are changing the binding of `count` to anything else or not? And the answer is always no. Because `count++` changes the value referred by `count` and not the binding.

In your code, it doesn't matter if a member method is `const` or not when it comes to `int& count`.

Relate `int& count;` to `int* const p_count;` and try to simulate the situation on your own.

> (2) Why does it fail to compile it I change the ctor to the following?
> `CountFrom(int &n) { count = n; }`

Because reference must be assigned to a variable while initialization. In simple example;

```
int i, &r;  // error, because 'r' not initialized
r = i;  // this is not initialization but a copy 
```

On a side note, you should be extra careful when you are dealing with reference variables inside a `class`. Because it's easy to mess up with their scope and validity.
For example, here the validity of `count` is dependent on the scope of `i`.

**Edit**: After your 2nd edit, it's very trivial to know why that version works.
Because `count` is now a simple variable. It can be skipped from initialization in the initializer list of the constructor unlike reference.
Moreover the `const` correctness of the `operator()` is gone, so any member variable of the `class` can now be modified inside it.

You should choose a `const` version of the member method, if you want to state that no `class` member "must" change inside it (unless any variable is `mutable` or you use `const_cast`). In all other cases use the normal version of the member method. They both can co-exist as well depending on your business logic. This is a bit of a broad question and it's worth to have another thread for this.

# c++ - How do I properly call the CopyFile function in Visual C++?

> ID：15458312
> 
> 赞同：2
> 
> 时间：2013-03-17T06:51:23.783
> 
> 标签：c++, string, winapi, visual-c++

I have a function which takes two `CHAR*` as input viz. `int _stdcall FileTrans(char* InFile, char* OutFile)` in a DLL project.

In the function I'm just calling `CopyFile(InFile, OutFile, false);` after some process (not related to the files). But it says that it needs both inputs as `LPCWSTR`. I Googled it but couldn't find anything very interesting.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T07:36:33.707

与所有接受字符串参数的 Windows API 函数一样，CopyFile 函数实际上有两种变体：

*   CopyFileA 是 ANSI 版本，它采用系统默认字符集中的*窄*（非 Unicode）字符串。基本上，它接受 type 的参数`const char*`，但 Windows 标头`LPCSTR`为此使用 typedef。

*   CopyFileW 是宽版本，它采用*Unicode*字符串。为了做到这一点，它接受 type 的参数`w_char*`，但 Windows 头文件`LPCWSTR`为此使用 typedef（注意 typedef 中的附加内容`W`）。

然后，根据是否`UNICODE`为您的项目定义了预处理器宏（在包含 Windows 标头之前的代码中，或在 Visual Studio 中的项目属性中），Windows 标头将未修饰的 CopyFile 定义为 CopyFileA 或 CopyFileW。自然，如果`UNICODE`定义了，CopyFile 将被定义为Unicode 版本的CopyFileW。否则，它将被定义为 CopyFileA。这个想法是对通用 CopyFile 函数的调用在编译时自动解析为正确的变体。

当然，既然您了解了所有这些，您几乎可以忘记它。在现代 Windows 编程中，完全没有理由调用旧 ANSI 版本的函数或处理窄字符串。忘记它`char*`甚至可以用作字符串类型——那些字符串对你来说已经死了。从现在开始，您将要使用的唯一字符串是由字符组成的 Unicode 字符串`wchar_t`。因此，`UNICODE`应该*始终*为您的代码定义符号，并且您应该只使用`W`Windows API 函数的版本。

再次查看 CopyFileW 函数的原型（与您在`UNICODE`定义时调用 CopyFile 时得到的相同），我们看到：

```
BOOL WINAPI CopyFile(LPCWSTR lpExistingFileName,
                     LPCWSTR lpNewFileName,
                     BOOL bFailIfExists); 
```

回想一下您在上面学到`LPCWSTR`的只是 typedef 的同义词`const wchar_t*`，它是由宽字符组成的 C 样式字符串。您已经知道为什么要标记参数`const`：因为该函数不会修改这些值。

而且因为您在上面还了解到这些是您应该再使用的唯一类型的字符串，下一步是修改您的 FileTrans 函数以接受宽字符串（`const`如果它不打算修改它们，则制作它们）：

```
int _stdcall FileTrans(const wchar_t* InFile, const wchar_t* OutFile); 
```

现在，从 FileTrans 内部，您可以毫无问题地调用 CopyFile，因为您拥有正确类型的字符串。

* * *

但是有一点免费的额外建议：永远不要在 C++ 中使用原始 C 风格的字符串。`std`始终使用标头在命名空间中定义的 C++ 字符串类`<string>`。

这个类有两个常见的变体，`std::string`和`std::wstring`. 和以前一样，the`w`指的是宽字符串，这是您想在 Windows 中使用的唯一类型。整个代码库`std::wstring`的新替代品也是如此。`CHAR*`

将 FileTrans 函数的声明更改为如下所示：

```
#include <string>

// ...some other stuff...

int __stdcall FileTrans(const std::wstring& InFile, const std::wstring& OutFile); 
```

请注意，我已将您的原始参数更改为对对象`CHAR*`的常量引用。`std::wstring`常量引用在这里工作得很好，因为您不会在函数内部更改这些值中的任何一个。

如果您不清楚常量的含义、如何使用引用或类类型通常如何在 C++ 中工作，请查阅您[最喜欢的 C++ 书籍](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)）——这是所有 C++ 程序员都需要的知识。请记住，C++ 与 C 语言不同，因此不适用相同的习语。在许多情况下，有更好的方法来做事，这当然是这种情况的一个例子。

# html - HTML / CSS - Hover Link Color

> ID：15458313
> 
> 赞同：1
> 
> 时间：2013-03-17T06:51:28.567
> 
> 标签：html, css, colors, hover, hex

I have this code written in my CSS; which makes all links on my site white, and when they're hovered on, they turn gray.

```
a:link {color: #FFFFFF}
a:active {color: #383838}
a:visited {color: #FFFFFF}
a:hover {color: #383838} 
```

Here's the portion of my site which has links that are white and turn gray when hovered on. I have four different links on the site separated by a "|" . I am trying to make each link STAY white, but change to a different HTML color whenever they're hovered on….to match our logo. (HTML section of the code that has my links are attached below).

[Page 1](http://www.my-website09090909.com/page1) **|** [Page 2](http://www.my-website09090909.com/page2) **|** [Page 3](http://www.my-website09090909.com/page3) **|** [Page 4](http://www.mywebsite09090909.com/page4)

I would love if someone could help me figure out a very easy, simple way to make each link, Page 1, Page 2, Page 3 and Page 4, each change different HTML colors when they're hovered on. Basically, a rule or something that says the link named Page 1 needs to be colored #C7C025 when hovered on…and the link named Page 2 needs to be colored #950285 when hovered on and so forth…</p>

Thank you very much in advance!!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T06:59:01.370

给你的链接一个 ID：

```
<a id="page1" href="http://www.my-website09090909.com/page1">Page 1</a>
<a id="page2" href="http://www.my-website09090909.com/page1">Page 2</a>
<!-- .... --> 
```

然后使用这个CSS：

```
#page1:hover { color: red; }
#page2:hover { color: blue; }
/* ... */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T06:59:16.843

只需有一个父元素，然后根据您的父元素尝试以下操作：

试试这个：

```
<div id="links">
<a href="http://www.my-website09090909.com/page1">Page 1</a> 
<b><span class="separator">|</span></b> 
<a href="http://www.my-website09090909.com/page2">Page 2</a> 
<b><span class="separator">|</span></b> 
<a href="http://www.my-website09090909.com/page3">Page 3</a> 
<b><span class="separator">|</span></b> 
<a href="http://www.mywebsite09090909.com/page4">Page 4</a>
</div> 
```

而 CSS 是：

```
<style type="text/css">
#links a:nth-of-type(1){color:#009900;}
#links a:nth-of-type(1):hover{color:#ccc;}
#links a:nth-of-type(2){color:#006699 ;}
#links a:nth-of-type(2):hover{color:#ccc;}
#links a:nth-of-type(3){color:#990000;}
#links a:nth-of-type(3):hover{color:#ccc;}
#links a:nth-of-type(4){color:#FF00CC;}
#links a:nth-of-type(4):hover{color:#ccc;}
</style> 
```

# javascript - .not() 不工作

> ID：15458320
> 
> 赞同：2
> 
> 时间：2013-03-17T06:52:53.967
> 
> 标签：javascript, jquery, jquery-selectors

我正在制作一个登录表单，当您单击链接时会显示该表单。然后，当我单击其他任何内容或登录链接时，我希望登录表单消失。但是，当我尝试使用 jQuery`.not()`函数以及`:not()`选择器时，它仍然会针对所有元素（它不会从选择中删除指定的元素）。
如果您想查看代码，请查看[jsFiddle](http://jsfiddle.net/ZgYcV/ "jsFiddle 演示")。正如您在小提琴中看到的那样，当您单击登录链接时，它会出现，但由于该声明，它会立即消失`.click()`，即使我使用的是`.not()`从选择中删除该元素以及登录表单中的元素的函数。单击登录表单和其中的项目也会使其消失，即使它们已被删除`.not()`。

HTML：

```
<a id="login" href="javascript:void(0);" title="Login">Log in</a>
<div id="loginform" style="display:none;">
    <form action="login.php" method="POST">
        <input type="text" name="uname" id="uname" placeholder="Username" />
        <input type="password" name="pword" id="pword" placeholder="Password" />
        <input type="submit" id="loginbtn" value="Login" />
    </form>
</div> 
```

Javascript：

```
$("#login").click(function() {
    $("#loginform").fadeToggle("slow");
    if ($("#login").text() == "Log in") {
        $("#login").text("Close");
        $("body, body *").not("#login, #loginform, #loginform *").bind("click", closeLoginForm);
    }
    else $("#login").text("Log in");
});
function closeLoginForm() {
    $("#loginform").fadeOut("slow");
    $("#login").text("Log in");
    $("*").unbind("click", closeLoginForm);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T06:59:15.643

您的问题是事件冒泡，单击事件使 dom 冒泡并命中您未通过 not() 调用排除的元素。而是使用事件处理程序来查看点击的来源并在那里取消它。

```
if ($(e.target).is("#login, #loginform, #loginform *")) return; 
```

[http://jsfiddle.net/ZgYcV/2/](http://jsfiddle.net/ZgYcV/2/)

# c++ - Is it a good design to write the core main program in c++/shell script when the .so are in pure c?

> ID：15458321
> 
> 赞同：0
> 
> 时间：2013-03-17T06:53:23.320
> 
> 标签：c++, c, linux, ioctl

I would like to write a core main server handles request by user (in shell like enviorment) and load dynamic libraries executes ioctls and some debugfs. The core server is in c++ and the loadable libs are written in c. Is it a good design?

* * *

What about a shell script load the libraries and handles the request, is it possible at all?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:04:57.467

C++ 在设计时考虑到了 C 兼容性，因此绝对可以在用 C++ 编写的程序中使用用 C 编写的库。该语言甚至提供了将 C 头文件与 C++ 一起使用的语法，因此您尝试做的事情绝对是可能的。

在某些情况下，从可读性的角度来看，它可能并不理想，因为 C 代码可能使用不透明的句柄来模拟对象：这对 C 来说是惯用的，但对 C++ 来说却不是。然而，这个问题可以通过在 C 库周围编写一个 C++ 包装器来轻松解决，而且开销很小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T07:07:58.983

程序或其部分是用 C++ 编写但与 C 中可加载模块的接口的设计并非闻所未闻。当开发人员希望利用 C++（STL、异常）的强大功能进行*实现*，但又希望在*接口*上保留 C 的简单性和唯一性而不处理 C++ 编译器如何实现异常或 RTTI 的细微差异时，就会遇到这种情况。在 Unix 中，另一个原因是 C++ 从未达到它在 Windows 中的水平，因此工具支持仍然是纯 C 的最佳选择。

这方面的一个例子是内部用 C++ 编写的第三方 Python 模块。尽管在 C++ 中实现，但它们仅使用 C 与 Python 进行通信，因为这是 Python/C API 所期望的。在某些情况下，这种通信可能很丰富——例如，C++ 异常可以报告为 Python 异常，反之亦然（Boost.Python 会自动执行此操作）。GTK-- 工具包允许用 C++ 编写 GTK 小部件并将它们的界面导出为常规 GTK 小部件。

# javascript - Cross domain requests and jQuery/AJAX

> ID：15458322
> 
> 赞同：0
> 
> 时间：2013-03-17T06:53:23.993
> 
> 标签：javascript, jquery, ajax, jsonp

I had read earlier that cross domain requests are not possible through AJAX (since XHR is bound to same origin policy)... Hence we use JSONP, which uses dynamic script injection (since script tag is not bound by same origin policy).

However, I was going through the jQuery AJAX documentation and saw one setting saying "crossDomain".

So, is Cross domain requests now supported through jQuery/AJAX? Is it the same as what we get through JSONP?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:10:13.373

我做了一个使用跨域请求的项目。你有几个例子。

它在[这里](https://github.com/IonicaBizau/jQuery-cross-domain-requests)，在 Github 上。

在您的客户端代码 (javascript) 中使用此函数：

```
function getHTML(url, callback){
    url = url.trim();

    $.ajax({
        url: url,
        type: 'GET',
        success: function(res) {
            var headline = res.responseText;

            if(headline === ""){
                callback("There was a problem with the page. Be sure that your url is correct.");
                return;
            }

            callback(null, headline);
        }
    });
} 
```

# android - Nsd Manager Android Crashing on 4.2.2

> ID：15458323
> 
> 赞同：7
> 
> 时间：2013-03-17T06:53:48.897
> 
> 标签：android, android-nsd

Discovering services results in a system crash. The type of discover I am trying is

> "_http._tcp."

**Here's the log.**

```
D/NsdService(13310): Discover services
E/AndroidRuntime(13310): *** FATAL EXCEPTION IN SYSTEM PROCESS: NsdService
E/AndroidRuntime(13310): java.lang.NullPointerException
E/AndroidRuntime(13310): at com.android.server.NsdService$ClientInfo.access$1200(NsdService.java:801)
E/AndroidRuntime(13310):    at com.android.server.NsdService$NsdStateMachine$EnabledState.requestLimitReached(NsdService.java:244)
E/AndroidRuntime(13310):    at com.android.server.NsdService$NsdStateMachine$EnabledState.processMessage(NsdService.java:292)
E/AndroidRuntime(13310):    at com.android.internal.util.StateMachine$SmHandler.processMsg(StateMachine.java:905)
E/AndroidRuntime(13310):    at com.android.internal.util.StateMachine$SmHandler.handleMessage(StateMachine.java:760)
E/AndroidRuntime(13310):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(13310):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(13310):    at android.os.HandlerThread.run(HandlerThread.java:60)

```

**The code that I use for starting discovery is**

```
NsdManager nsd = (NsdManager) getSystemService(Context.NSD_SERVICE);
nsd.discoverServices("_http._tcp.", NsdManager.PROTOCOL_DNS_SD, discoveryListener);

```

When I run, my phone restarts everytime. I guess this is a bug on Android 4.2.2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T15:48:49.597

我在我的 Nexus 7 上得到它。看起来它已经被报告为一个错误。

[http://code.google.com/p/android/issues/detail?id=35585](http://code.google.com/p/android/issues/detail?id=35585)

# sql - SQL Accessing SAS Variable in Query

> ID：15458325
> 
> 赞同：1
> 
> 时间：2013-03-17T06:54:14.550
> 
> 标签：sql, db2, sas

I'm attempting to use SASDOS in my statement below, but it's failing to be found. My understanding is that I have to use a form of derived table to access this new column. Is this correct? If so, could someone please help elaborate on how to do that?

```
proc sql;
   create table TEST as 
   select 
      DQBBDA AS 'Sbm Date'n,
      case when 'Sbm Date'n > 999999
         then input('1' || substr(put('Sbm Date'n,z8.),3), z7.)
      end as SASDOS format=z7.
   from 
      DB2SCHEMA.ORIGIN
   where 
      SASDOS = 1130314;
quit; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T13:45:24.283

正如 sasfrog 评论的那样，您需要添加 CALCULATED 关键字来引用 SAS SQL 中的新列，并且您应该在查询中引用本机 DB2 列。例如：

```
proc sql;
    create table TEST as 
    select DQBBDA AS 'Sbm Date'n
         , case when DQBBDA > 999999
                then input('1' || substr(put(DQBBDA,z8.),3), z7.)
            end as SASDOS format=z7.
    from DB2SCHEMA.ORIGIN
    WHERE CALCULATED SASDOS = 1130314;
quit; 
```

但是，您真的应该重新考虑您在做什么，并弄清楚如何编写一个**只**使用DB2 中的列的`WHERE`子句；否则必须将整个表拉回 SAS（可能是一个糟糕的解决方案）。使用**pass-thru**查询（您可以在 DB2 中直接执行本机 SQL）可能会更好地解决此类情况。

 ******更新：**这是另一个使用 SAS 数据集而不是来自 LIBNAME 引用的表的（经过测试的）示例。请注意，我还纠正了`input`函数的语法错误（最后一个参数应该是`7.`not `z7.`）。

```
data ORIGIN;
  DQBBDA = 11130314; output;
  DQBBDA = 22130314; output;
run;
options validvarname=any;
proc sql;
    create table TEST as 
    select DQBBDA AS 'Sbm Date'n
         , case when DQBBDA > 999999
                then input('1' || substr(put(DQBBDA,z8.),3), 7.)
            end as SASDOS format=z7.
    from ORIGIN
    WHERE CALCULATED SASDOS = 1130314;
quit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T17:00:27.543

我认为而不是*计算 sasdos*你应该使用*sasdos*****

# cakephp - Cakephp custom URL using Route

> ID：15458327
> 
> 赞同：-1
> 
> 时间：2013-03-17T06:54:39.717
> 
> 标签：cakephp, cakephp-2.1

I would like to format my **URL** like so:

```
/teacher/page:2 
```

to

```
/teacher 
```

I would like to achieve this result by using as **less** code as possible (perhaps only from **routes.php**?), without modifying how the **PaginatorHelper** behaves.

Thank you for your help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T02:03:46.013

您可以通过以下方式完成此操作：

*   阿贾克斯
*   形成帖子而不是获取（需要更改分页
    助手）

但**我建议不要这样做**。这是为良好的可用性而设计的。如果您更改它，它将使您的网站不如您希望的那样用户友好。我知道我会很沮丧，试图跳到一个特定的页面，却发现我必须点击我的方式到第 35 页。呸！

# go - Join or Push Slices

> ID：15458331
> 
> 赞同：2
> 
> 时间：2013-03-17T06:55:16.163
> 
> 标签：go, slice

How can I join multiple slices of the same entity into one slice?
Or how do I push a new entity value into a slice of the entity?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T11:31:52.363

go-wiki 有一组[SliceTricks](http://code.google.com/p/go-wiki/wiki/SliceTricks)，您会发现它们很有用。

例如，

追加切片

```
a = append(a, b...) 
```

插入值

```
s = append(s, 0)
copy(s[i+1:], s[i:])
s[i] = x 
```

推动价值

```
a = append(a, x) 
```

参考：

[Go 编程语言规范](http://golang.org/ref/)：

[切片类型](http://golang.org/ref/spec#Slice_types)

[索引](http://golang.org/ref/spec#Indexes)

[切片](http://golang.org/ref/spec#Slices)

[制作切片](http://golang.org/ref/spec#Making_slices_maps_and_channels)

[追加和复制切片](http://golang.org/ref/spec#Appending_and_copying_slices)

[切片：用法和内部](http://golang.org/doc/articles/slices_usage_and_internals.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T07:53:25.487

append 内置函数为您完成了这两项工作。像这样使用它：

```
a := []int{1, 2}
a = append(a, 3)
b := []int{4, 5}
a = append(a, b...)
// a now is []int{1, 2, 3, 4, 5} 
```

如果您需要有关如何使用切片的更多信息，我建议您阅读[切片：用法和内部](http://golang.org/doc/articles/slices_usage_and_internals.html)。

# c# - How to format all files in Visual Studio 2012?

> ID：15458332
> 
> 赞同：29
> 
> 时间：2013-03-17T06:55:37.780
> 
> 标签：c#, visual-studio-2012, formatting

With previous versions of Visual Studio, I used [Kevin Pilch-Bisson's script](http://blogs.msdn.com/b/kevinpilchbisson/archive/2004/05/17/133371.aspx) to format all C# files in my solution.

VS2012 dropped macro support, so that doesn't work any more.

How can I easily format all my documents in VS2012?

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-17T06:57:28.760

Open `Tools`->`Library Package Manager`->`Package Manager Console`, and run the command below. At the end, all documents will be open in the IDE. (Low-RAM machines will have problems with large solutions.) Changed files will be modified in the IDE, and not saved to disk. You can Save All, then Close All if you're ready.

VS2012 removed the VB-like macro language that existed in previous version of Visual Studio. However, the underlying DTE interface is still there, and you can reach it via PowerShell, in the Package Manager Console

The weird GUID passed to [`ProjectItem.Open`](http://msdn.microsoft.com/en-us/library/envdte.projectitem.open.aspx) is [`Constants.vsViewKindCode`](http://msdn.microsoft.com/en-us/library/envdte.constants.vsviewkindcode.aspx).

Normally I'd split this in to multiple lines, but the Package Manager Console doesn't support line continuation.

You can find the latest version at [https://gist.github.com/JayBazuzi/9e0de544cdfe0c7a4358](https://gist.github.com/JayBazuzi/9e0de544cdfe0c7a4358)

```
function f($projectItems) { $projectItems | ? { $_.Name.EndsWith( ".cs" ) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-01-13T18:57:52.900

这是对适用于非常大的解决方案的现有脚本的更新。

它打开每个文件，对其进行格式化，然后保存并关闭文件，而不是让它保持打开状态。它还会跳过“.designer”。文件，因为这些文件通常应该单独放置。

在最新版本的 Visual Studio（2017 年之后）中，将脚本复制到 ps1 文件中，然后在包管理器控制台中运行`. C:\path\to\the.ps1`以调用它。（它可以在 Visual Studio 2012 和 2013 中直接复制并粘贴到包管理器控制台中。）

**警告：**将此代码粘贴到您的控制台将*立即*打开并格式化整个解决方案中的每个 C# 文件，无需询问即可保存每个修改过的文件。首先分支可能是个好主意...

```
function FormatItems($projectItems) {
    $projectItems |
    % {
        # Write-Host "    Examining item: $($_.Name)";

        if ($_.Name -and $_.Name.ToLower().EndsWith(".cs") `
            -and (-not $_.Name.ToLower().Contains(".designer."))) {

            $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}');
            $win.Activate();

            $dte.ExecuteCommand('Edit.FormatDocument');

            if (!$_.Saved) {
                Write-Host "    Saving modified file: $($_.Name)";
                $dte.ExecuteCommand('File.SaveSelectedItems');
            }

            $dte.ExecuteCommand('Window.CloseDocumentWindow');
        }

        if ($_.ProjectItems -and ($_.ProjectItems.Count -gt 0)) {
            # Write-Host "    Opening sub-items of $($_.Name)";

            FormatItems($_.ProjectItems);
        }
    };
}

$dte.Solution.Projects | % {
    Write-Host "-- Project: $($_.Name)";

    FormatItems($_.ProjectItems)
}
; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T10:22:34.413

你可以使用[CodeMaid](http://visualstudiogallery.msdn.microsoft.com/76293c4d-8c16-4f4a-aee6-21f83a571496)，一个 VS2012 的免费插件。这让你可以清理、重组你的代码。在使用 StyleCop 检查我的代码之前，我总是使用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T09:58:41.793

您可以使用[ReSharper 的 Code Cleanup](https://www.jetbrains.com/resharper/webhelp/Code_Cleanup__Running_Code_Cleanup.html)。看起来这可以立即解决整个解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T18:26:13.100

这是前两个答案的另一个变体，用户可能会觉得有帮助......绝对可以进一步改进和简化。这不仅可以格式化`.cs`文件，还可以格式化`.json`、`.cshtml`、`.js`和`.css`.

```
function f($projectItems) { $projectItems | ? { $_.Name -ne $null -and $_.Name.EndsWith( ".cs" ) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) }

function f($projectItems) { $projectItems | ? { $_.Name -ne $null -and $_.Name.EndsWith( ".json" ) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) }

function f($projectItems) { $projectItems | ? { $_.Name -ne $null -and $_.Name.EndsWith( ".cshtml" ) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) }

function f($projectItems) { $projectItems | ? { $_.Name -ne $null -and $_.Name.EndsWith( ".js" ) -and (-not $_.Properties.Item("FullPath").Value.Contains("common")) -and (-not $_.Properties.Item("FullPath").Value.Contains("Content")) -and (-not $_.Properties.Item("FullPath").Value.Contains("Scripts")) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) }

function f($projectItems) { $projectItems | ? { $_.Name -ne $null -and $_.Name.EndsWith( ".css" ) -and (-not $_.Properties.Item("FullPath").Value.Contains("common")) -and (-not $_.Properties.Item("FullPath").Value.Contains("Content")) -and (-not $_.Properties.Item("FullPath").Value.Contains("Scripts")) } | % { $win = $_.Open('{7651A701-06E5-11D1-8EBD-00A0C90F26EA}') ; $win.Activate() ; $DTE.ExecuteCommand('Edit.FormatDocument') } ; if ($projectItems) { $projectItems | % { f($_.projectItems) } } }

$dte.Solution.Projects | % { f($_.ProjectItems) } 
```

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-03-10T15:57:01.663

转到-->工具-->>选项-->>文本编辑器-->> XAML-->>格式-->>间距-->>检查每个属性在单独行上的位置！而已

# c - strncpy append 1 extra(weird or random)char

> ID：15458333
> 
> 赞同：2
> 
> 时间：2013-03-17T06:55:38.037
> 
> 标签：c, substring, concatenation, strncpy

I wrote a simple c program that only take the first two characters of one word and take the last three characters of the second word. I use strncpy to only copy the first 2 letter of name1 to name, and concatenate with the last three characters from name2.

However, when I run it. output will somehow like

```
Ediacy //correct

acy  //wrong

Ed?
acy  //wrong

Edk
   acy //wrong

Edv
   acy //wrong

// code sample
#include <stdio.h>
#include <string.h>

int main(void)
{
    char name[100];

    char name1[] = "Edison";
    char *name2 = "Tracy";

    strncpy(name, name1, 2); // instead of get Ed, it tried to append one extra char behind it.
    strcat(name, name2+2);

    printf("%s\n", name);

    return 0; 
} 
```

I will really appreciate if anyone help me to figure it out why it acts like this and how I can correct it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T06:58:16.370

`strncpy` doesn't add a nul-terminator if the size is too small.

Try this:

```
strncpy(name, name1, 2);
name[2] = '\0'; 
```

# ruby - How to read POST data in rack request

> ID：15458334
> 
> 赞同：30
> 
> 时间：2013-03-17T06:55:59.790
> 
> 标签：ruby, rack

When I run the curl command

```
curl -v -H "Content-type: application/json" -X POST -d '{"name":"abc", "id":"12", "subject":"my subject"}' http://localhost:9292 
```

to send a POST request with data to my Rack application, my code prints out `{}`. That is coming from `puts req.POST()` in the code below.

Why does it print out `{}` instead of the POST data? And how do I correctly access the POST data in my Rack application?

```
require 'json'

class Greeter
  def call(env)
    req = Rack::Request.new(env)
    if req.post?
      puts req.POST()
    end
    [200, {"Content-Type" => "application/json"}, [{x:"Hello World!"}.to_json]]
  end
end

run Greeter.new 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-17T08:21:28.740

通过阅读 POST 的文档，看起来它正在为您提供基于其他内容类型的解析数据。如果你想处理“application/json”，你可能需要

```
JSON.parse( req.body.read ) 
```

反而。要检查这一点，请尝试

```
puts req.body.read 
```

你目前在哪里`puts req.POST`。

* * *

`req.body`是一个 I/O 对象，而不是一个字符串。查看[`body`](http://rdoc.info/gems/rack/1.2.1/Rack/Request#body-instance_method)文档并查看源代码。您可以看到这实际上与 mudasobwa 的答案相同。

请注意，Rack 应用程序中的其他代码可能期望读取相同的 I/O，例如 Sinatra 或 Rails 中的参数解析器。为确保他们看到相同的数据并且不会出现错误，您可能需要调用`req.body.rewind`，可能在读取代码中的请求正文之前和之后。但是，如果您处于这种情况，您可能会考虑您的框架是否可以通过控制器上的某个选项直接处理 JSON 或请求内容类型处理程序声明等 - 很可能会有一个选项来处理这种框架内的请求。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-17T08:19:57.743

尝试：

```
env['rack.input'].read 
```

我在“[如何使用 Rack 接收 JSON 对象](https://stackoverflow.com/questions/9707034/cant-receive-json-object-with-rack-ruby-server)”中找到了它，虽然这对我来说听起来仍然很奇怪，但它可能有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-14T07:56:45.353

你可以试试：

```
req.params 
```

希望这可以帮到你。

# c# - 如何在c#中隐藏数据库连接的connectionString

> ID：15458348
> 
> 赞同：2
> 
> 时间：2013-03-17T06:58:42.700
> 
> 标签：c#, .net, sqlite, constants, connection-string

我在我的应用程序中使用 sqlite。我声明我`sqliteConnection`的 as `constant`。但问题是这个类的用户可以改变`connectionString`这个`sqliteConnection`对象的属性。我怎样才能防止这种情况？我希望只设置一次连接的连接字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:00:49.927

您可以创建一个只读属性...

```
private string connectionString = "my_string";
public string ConnectionString
{
    get { return connectionString; }
} 
```

*或者*一个`readonly`领域。该值只能在构造函数中设置或作为常量设置：

```
public readonly ConnectionString = "my_string"; 
```

*或者*一个`const`领域。该值可以设置为常量（值是静态的，即所有实例只有一个值）：

```
public const ConnectionString = "my_string"; 
```

# android - Youtube API “初始化 YouTube 播放器时出错。”

> ID：15458351
> 
> 赞同：11
> 
> 时间：2013-03-17T06:59:15.487
> 
> 标签：android, youtube, youtube-api

我正在使用 Youtube API 在我的应用程序上安装简单的 playerView。我做了 API 所说的事情，但我不断收到“应用程序已停止”的消息。因为我使用的是韩国电话，所以我真的不知道确切的英语短语。希望这是正确的英语短语。

我将 Youtubeandroidplayerapi.jar 放在库中并构建路径并在库中包含不必要的组件。

这是Menu.java。

```
package com.hobak.sci;

import com.hobak.sci.DeveloperKey;
import com.hobak.sci.R;
import com.google.android.youtube.player.YouTubeBaseActivity;
import com.google.android.youtube.player.YouTubeInitializationResult;
import com.google.android.youtube.player.YouTubePlayer;
import com.google.android.youtube.player.YouTubePlayer.Provider;
import com.google.android.youtube.player.YouTubePlayerView;
import android.os.Bundle;

public class Menu extends YouTubeBaseActivity implements
    YouTubePlayer.OnInitializedListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.menu);

        YouTubePlayerView youTubeView = (YouTubePlayerView) findViewById(R.id.youtube_view);
    youTubeView.initialize(DeveloperKey.DEVELOPER_KEY, this);
    }

    @Override
    public void onInitializationSuccess(YouTubePlayer.Provider provider,
        YouTubePlayer player, boolean wasRestored) {
    if (!wasRestored) {
        player.cueVideo("2LHv1FPd1Ec");
    }
}

protected YouTubePlayer.Provider getYouTubePlayerProvider() {
    return (YouTubePlayerView) findViewById(R.id.youtube_view);
}

@Override
public void onInitializationFailure(Provider arg0,
        YouTubeInitializationResult arg1) {
    // TODO Auto-generated method stub

}

} 
```

这是我的 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFACD"
    android:orientation="vertical" >

  <com.google.android.youtube.player.YouTubePlayerView
    android:id="@+id/youtube_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />

</LinearLayout> 
```

这是我的日志猫

```
03-17 15:55:51.260: E/AndroidRuntime(5277): FATAL EXCEPTION: main
03-17 15:55:51.260: E/AndroidRuntime(5277): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.hobak.sci/com.hobak.sci.Menu}: java.lang.SecurityException: Not allowed to bind to service Intent { act=com.google.android.youtube.api.service.START }
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1961)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread.access$600(ActivityThread.java:128)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1152)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.os.Looper.loop(Looper.java:137)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread.main(ActivityThread.java:4453)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at java.lang.reflect.Method.invokeNative(Native Method)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at java.lang.reflect.Method.invoke(Method.java:511)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at dalvik.system.NativeStart.main(Native Method)
03-17 15:55:51.260: E/AndroidRuntime(5277): Caused by: java.lang.SecurityException: Not allowed to bind to service Intent { act=com.google.android.youtube.api.service.START }
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ContextImpl.bindService(ContextImpl.java:1164)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.google.android.youtube.player.internal.r.e(Unknown Source)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.google.android.youtube.player.YouTubePlayerView.a(Unknown Source)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.google.android.youtube.player.YouTubeBaseActivity$a.a(Unknown Source)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.google.android.youtube.player.YouTubePlayerView.initialize(Unknown Source)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at com.hobak.sci.Menu.onCreate(Menu.java:21)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.Activity.performCreate(Activity.java:4467)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
03-17 15:55:51.260: E/AndroidRuntime(5277):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1925)
03-17 15:55:51.260: E/AndroidRuntime(5277):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-15T09:35:31.993

我遇到了这个问题。然后我刚刚添加

`<uses-permission android:name="android.permission.INTERNET"/>`进入标签中`AndroidManifest.xml`。`<manifest>`之后该应用程序运行良好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-12T11:05:03.373

我通过执行以下步骤解决了这个问题：

*   清理项目然后重建项目
*   在具有高于 4.2.16 版本的 Youtube 应用程序的设备上运行该应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-12T02:30:38.773

也许，这似乎是开发人员的关键问题。位于 DeveloperKey.java 中的示例 DEVELOPER_KEY 键将不起作用。首先，注册一个新的开发者密钥。( [https://code.google.com/apis/console](https://code.google.com/apis/console) ) 然后，将其替换为有效密钥。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-31T18:35:47.223

只需将您的 youtube 应用程序更新到手机中的最新版本，它就会完美运行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-07T12:21:58.317

右键单击项目转到属性-> java内置路径->库->添加库并在那里添加你的jar文件，然后它就可以工作了

如果您想在您的应用程序中使用 youtube 视频，您的设备必须包含 youtube 应用程序，否则它将无法工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-18T21:20:47.920

除了添加`<uses-permission android:name="android.permission.INTERNET" />`到 AndroidManifest.xml 之外，您还必须在设备/模拟器上安装 youtube 应用程序。如果你想在模拟器上得到它，请侧载这个：

[https://play.google.com/store/apps/details?id=com.google.android.youtube&hl=en （您可以通过](https://play.google.com/store/apps/details?id=com.google.android.youtube&hl=en)[http://apps.evozi.com/apk-downloader/?id](http://apps.evozi.com/apk-downloader/?id=com.google.android.youtube)
获取 apk [=com.google.android.youtube](http://apps.evozi.com/apk-downloader/?id=com.google.android.youtube) )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-29T14:16:43.487

**如果 Google Glass 上的播放器失败**

当 youtube 播放器失败时，传递给失败方法的 YouTubeInitializationResult arg1 参数包含有关播放器失败原因的信息。正如您在上面的代码中看到的那样，我只是简单地烤了它。我在 toast 中打印了 SERVIVE_MISSING。[我在谷歌的开发者网站](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeInitializationResult#getErrorDialog%28android.app.Activity,%20int%29)上找到了可能的返回值列表, SERVICE_MISSING 错误的原因是设备上缺少 YouTube API 服务。该服务是谷歌随 android 分发的标准 youtube 应用程序的一部分，但显然尚未将其添加到 glass 中。要解决此问题，您可以侧载应用程序以获取服务。遗憾的是，无法启动 YouTube 应用并从中观看视频，因为它是为 Android 手机编写的，并且没有语音触发/时间线卡。

它可以从[这里](http://www.androidfilehost.com/?fid=23189362627840301)下载，或者我在这里加载它：[com.google.android.youtube-5.2.27.apk](http://www.eg.bucknell.edu/~jpk017/lib/exe/fetch.php?media=wiki:com.google.android.youtube-5.2.27.apk)

只需将其侧载：

`adb install com.google.android.youtube-5.2.27.apk`

这会在玻璃上安装 youtube 应用程序。现在视频应该可以工作了！

> 取自：[http ://www.eg.bucknell.edu/~jpk017/doku.php?id=wiki:yt](http://www.eg.bucknell.edu/~jpk017/doku.php?id=wiki:yt)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-23T05:12:23.790

我遇到了同样的问题，经过大量搜索和谷歌搜索，我得到了答案：-

```
 for youtube player you must have youtube app enabled and still if not work then update youtube to the latest version. 
```

那时它会起作用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-15T21:06:39.493

我在我的发布版本中遇到了这个问题，但在将它添加到 proguard 后工作了

```
-keepclassmembers class fqcn.of.javascript.interface.for.webview {
       public *;
   } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-13T13:20:21.640

该问题也可能是由 Android 11 限制对其他应用程序的访问引起的。[https://developer.android.com/training/basics/intents/package-visibility](https://developer.android.com/training/basics/intents/package-visibility)

将以下`<queries>`标签添加到`<manifest>`标签中`AndroidManifest.xml`以声明我的应用程序需要访问 Youtube 包并匹配适当的意图过滤器签名为我解决了这个问题：

```
<manifest package="com.example.game">
    <queries>
        <intent>
            <action
                android:name="com.google.android.youtube.api.service.START" />
        </intent>
    </queries>
    ...
</manifest> 
```

阅读更多：[https ://developer.android.com/training/package-visibility/declaring#intent-filter-signature](https://developer.android.com/training/package-visibility/declaring#intent-filter-signature)

# java - 什么会使我的 html 解析代码更有效率？

> ID：15458356
> 
> 赞同：0
> 
> 时间：2013-03-17T06:59:35.610
> 
> 标签：java, html, parsing

今天早上，我决定做一个小项目，将 maverik 加油站的所有汽油价格解析成一个数组。我的大部分工作相当容易，我觉得我的代码中唯一“脏”的部分是将 html 实际解析为变量。我正在使用 indexOf 和子字符串来获取我想要的数据，我觉得必须有一种更清洁的方法来做到这一点？无论如何，这是我的代码，它可以编译并且工作得很好，只是不像我想要的那样干净。

[maverik.java](http://pastebin.com/geJj0JvR)包含项目的主要方法和大部分代码。 [maverikObj.java](http://pastebin.com/fLJpUFW2)包含 getter 和 setter、构造函数和 toString 方法。

要更改从您获取控制台数据的加油站，只需更改 maverik.java 的第 90 行上的数组 println 中的数字。未来的修订版将具有根据用户请求控制显示哪些数据的方法。

这是一个带有价格的示例 HTML：

```
html4 = "<b>Maverik Store 4</b><br/>5200 Chinden Blvd<br>Boise, ID<br>208-376-0532<br><center><b></b></center><br /><font color=red>Fuel Prices -- Updated every 30 minutes</font><br /><div><div style=\"float: left; width: 70%; text-align:right;\">Adventure Club Card</div><div style=\"float: right; width: 30%; text-align:center;\">Retail</div><br /><div style=\"float: left;width: 30%;\">Unleaded:</div><div style=\"float: left; width: 30%; text-align:center;\"> 3.379</div><div style=\"float: right; width: 30%; text-align:center;\"> 3.399</div><br /><div style=\"float: left;width: 30%;\">Blend 89:</div><div style=\"float: left; width: 30%; text-align:center;\"> 3.469</div><div style=\"float: right; width: 30%; text-align:center;\"> 3.499</div><br /><div style=\"float: left;width: 30%;\">Blend 90:</div><div style=\"float: left; width: 30%; text-align:center;\"> 3.549</div><div style=\"float: right; width: 30%; text-align:center;\"> 3.579</div><br /><div style=\"float: left;width: 30%;\">Premium:</div><div style=\"float: left; width: 30%; text-align:center;\"> 3.599</div><div style=\"float: right; width: 30%; text-align:center;\"> 3.639</div><br /><div style=\"float: left;width: 30%;\">Diesel:</div><div style=\"float: left; width: 30%; text-align:center;\"> 4.039</div><div style=\"float: right; width: 30%; text-align:center;\"> 4.059</div>"; 
```

目前我正在解析地址、城市、州、电话号码以及每个站点可能的所有 8 种气体类型。（无铅、混合 87、88、89、99、优质、柴油）。但它变得有点棘手，因为一些 html 条目没有列出所有 8 个，大多数只有 8 种可能的燃料类型中的 4 或 5 种。因此，为了解析这些数据，我使用了两种方法。

地址、城市、州、电话号码使用以下方式解析：

`if(line.contains(" = \"<b>Maverik Store")&&!line.contains("Coming Soon!")){ address=splitLine[3].substring(0,splitLine[3].length()-3).replace(" ", " "); city=splitLine[4].substring(0,splitLine[4].length()-7); state=splitLine[4].substring(splitLine[4].length()-5,splitLine[4].length()-3); phone=splitLine[5].substring(0,splitLine[5].length()-3);`

使用 if else 语句解析燃料类型，使用 if 语句记录数据（如果存在），使用 else 语句记录 0.0 双精度值，因为我的构造函数要求所有燃料类型都有一些值。

```
if(line.indexOf("Unleaded:")>0){
    unleaded=Double.parseDouble(line.substring(line.indexOf("Unleaded:")+147, line.indexOf("Unleaded:")+152));
}
else{
    unleaded=0.0;
} 
```

如您所见，我使用了很多子字符串和 indexOf 字符串方法来获取我想要的数据。我担心这是获取我想要的数据的一种极其静态的方法，因此我觉得这是一种非常肮脏的做事方式。任何关于如何清理我的代码的提示都非常感谢！=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:18:04.747

好吧，起初，我使用了一种完全不同的编码风格，它更漂亮（根据我的看法）。但我会建议你寻找一些不同的编码风格并决定你最喜欢什么。

我在使用 XML 文件时也遇到过类似的问题，但结果却是一团糟。您可以做的最好的事情是编写自己的 XMLParser，并且由于 HTML 与 XML 结构没有区别，您也可以使用它来解析 HTML 文件。

由于这是一项非常艰巨的工作，我可以给你我的实现（如果你想要的话，告诉我，它当然是开源的）。它旨在让开发人员快速实现他想要的。使用示例：

```
XMLDocument document = new XMLDocument("yourXMLSourceCode");
XMLNode node = document.getNode("html.body.div");
String attribute = document.get("html.body.div?id");
String content = document.get("html.body.div.input");
XMLNode[] mynodes = document.getNode("html.body").getSubNodes("input"); 
```

[您可以通过像这样](https://stackoverflow.com/questions/7817495/parsing-html-with-sax-parser?rq=1)搜索“SAX 解析器”或“XML 解析器”来找到其他解决方案。

我认为你可以使用它，用该代码做一些小技巧，你就可以完美地将它用于 HTML。

否则，我在处理 HTML 时所做的，您可以使用 HTMLParser。[我对Jsoup](http://jsoup.org/)有很好的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:41:58.527

不说太细，但是用正则表达式解析html（甚至xml）才是当今世界万恶之源。（好吧，有点夸张，但只是一点点。）

有许多实用程序试图尽最大努力处理我们现代 html 固有的混乱混乱。Java 的一个是“ [jsoup](http://jsoup.org) ”。例如：

```
package foo;
import org.jsoup.*;
import org.jsoup.nodes.*;
import org.jsoup.select.*;

public class Bar {
  public static void main(String[] args) {
    //Document doc = Jsoup.connect(url).get();
    String html = "<html>...</html>";
    Document doc = Jsoup.parse(html);
    Elements divs = doc.select("div");
    for (Element e : divs) {
       System.out.println(e.text());
    }
  }
} 
```

然后，即使给出了您的示例 html 片段（留给读者做很多练习）：

```
$ java -cp jsoup-1.7.2.jar:.  foo.Bar

Adventure Club Card Retail Unleaded: 3.379 3.399 Blend 89: 3.469 3.499 Blend 90: 3.549 3.579 Premium: 3.599 3.639 Diesel: 4.039 4.059
Adventure Club Card
Retail
Unleaded:
3.379
3.399
Blend 89:
3.469
3.499
Blend 90:
3.549
3.579
Premium:
3.599
3.639
Diesel:
4.039
4.059 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T07:26:51.240

您可以像这样使用正则表达式：

```
BufferedReader reader = new BufferedReader (
    new InputStreamReader (
        new URL ("https://www.maverik.com/locations/").
            openStream ()));

Pattern linePattern = Pattern.compile ("<b>Maverik Store ([^<]*)</b><br/>([^<]*)<br>([^<]*)<br>([^<]*)<br><center><b></b></center><br /><font color=red>Fuel Prices -- Updated every 30 minutes</font>");
Pattern pricePattern = Pattern.compile ("<div style=\\\\\"float: left;width: 30%;\\\\\">([^<]*)</div><div style=\\\\\"float: left; width: 30%; text-align:center;\\\\\">([^<]*)</div><div style=\\\\\"float: right; width: 30%; text-align:center;\\\\\">([^<]*)</div><br />");

String line;
while ((line = reader.readLine ()) != null)
{
    Matcher lineMatcher = linePattern.matcher (line);
    if (lineMatcher.find ())
    {
        System.out.println ("Store #: " + lineMatcher.group (1));
        System.out.println ("Store Address 1: " + lineMatcher.group (2));
        System.out.println ("Store Address 2: " + lineMatcher.group (3));
        System.out.println ("Store Phone: " + lineMatcher.group (4));

        Matcher priceMatcher = pricePattern.matcher (line);
        while (priceMatcher.find ())
        {
            System.out.println (priceMatcher.group (1) + priceMatcher.group (2) + priceMatcher.group (3));
        }
        System.out.println ();
    }
} 
```

对我来说，它输出：

```
Store #: 4
Store Address 1: 5200 Chinden Blvd
Store Address 2: Boise, ID
Store Phone: 208-376-0532
Unleaded: 3.379 3.399
Blend 89: 3.469 3.499
Blend 90: 3.549 3.579
Premium: 3.599 3.639

Store #: 6
Store Address 1: 8561 West State
Store Address 2: Boise, ID
Store Phone: 208-853-1226
Unleaded: 3.379 3.399
Blend 88: 3.849 3.879
Blend 89: 3.469 3.499
Blend 90: 3.549 3.579

Store #: 7
Store Address 1: Highway   310  North
Store Address 2: Bridger, MT
Store Phone: 406-662-3356
Unleaded: 3.249 3.269
Blend 87: 3.499 3.529
Blend 89: 3.499 3.529
Premium: 3.489 3.529

Store #: 130
Store Address 1: 105  South  200  West
Store Address 2: Bountiful, UT
Store Phone: 801-292-6792
Unleaded: 3.269 3.289
Blend 87: 3.359 3.389
Blend 89: 3.439 3.469

Store #: 134
Store Address 1: 105  East Winnemucca
Store Address 2: Winnemucca, NV
Store Phone: 775-623-5948
Unleaded: 3.559 3.579
Blend 87: 3.649 3.679
Blend 89: 3.729 3.759

Store #: 135
Store Address 1: 1571  North  Main
Store Address 2: Sheridan, WY
Store Phone: 307-672-7010
Unleaded: 3.159 3.179

Store #: 136
Store Address 1: 222  South  Main
Store Address 2: Lyman, WY
Store Phone: 307-786-2705
Unleaded: 3.269 3.289
Blend 87: 3.359 3.389
Blend 89: 3.439 3.469
Premium: 3.489 3.529

Store #: 137
Store Address 1: 7th  & Main
Store Address 2: Snowflake, AZ
Store Phone: 928-536-7511
Unleaded: 3.539 3.559
Blend 89: 3.629 3.659
Blend 90: 3.709 3.739

... 
```

# ruby-on-rails-3 - 如何编写 rspec 测试以指定无效日期对 Rails 模型无效？

> ID：15458357
> 
> 赞同：0
> 
> 时间：2013-03-17T06:59:42.063
> 
> 标签：ruby-on-rails-3, rspec

看法

```
<%= form_for(@new_credit_entry) do |f| %>
    <%= f.date_select :created_on%> 
```

我看到我可以指定一个无效的日期。这会产生一个 params 哈希，如下所示

```
"credit"=>{"created_on(1i)"=>"2013",
 "created_on(2i)"=>"2",
 "created_on(3i)"=>"31" 
```

这当然是一个错误的日期。所以我知道我的模型需要对此进行验证——可能会使用 validates_timeliness gem。我需要知道的是如何在规范中模拟这个

这是一些rails控制台输出

```
irb(main):056:0> x = Credit.new(created_on: "2013-02-30")
=> #<Credit id: nil, description: nil, credit_category_id: nil, amount: nil, created_on: nil, created_at: nil, updated_at: nil>
irb(main):058:0> x.created_on_before_type_cast
=> "2013-02-30"
irb(main):060:0> x.created_on
=> nil

irb(main):057:0> y = Credit.new(created_on: "2013-03-03")
=> #<Credit id: nil, description: nil, credit_category_id: nil, amount: nil, created_on: "2013-03-03", created_at: nil, updated_at: nil>
irb(main):059:0> y.created_on_before_type_cast
=> "2013-03-03"
irb(main):061:0> y.created_on
=> Sun, 03 Mar 2013

irb(main):062:0> z = Credit.new("created_on(1i)"=>"2013",
irb(main):063:1*  "created_on(2i)"=>"2",
irb(main):064:1*  "created_on(3i)"=>"31")
=> #<Credit id: nil, description: nil, credit_category_id: nil, amount: nil, created_on: "2013-03-03", created_at: nil, updated_at: nil>
irb(main):065:0> z.created_on
=> Sun, 03 Mar 2013
irb(main):066:0> z.created_on_before_type_cast
=> Sun, 03 Mar 2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:58:51.620

如果您使用[validates_timeliness](https://github.com/adzap/validates_timeliness)，它将拒绝您在上面尝试的无效日期。该模型将无效并且`created_on`将是`nil`. 这包括您提到的日期包装问题。

安装 validates_timeliness 后，您的模型中只需要：

```
validates_date :created_on 
```

这是一个测试各种场景的规范：

```
describe Credit do
  it "rejects single digits" do
    credit = Credit.new created_on: "3"
    credit.should_not be_valid
    credit.created_on.should be_nil
  end

  it "rejects bad dates" do
    credit = Credit.new created_on: "2013-02-31"
    credit.should_not be_valid
    credit.created_on.should be_nil
  end

  it "rejects words" do
    credit = Credit.new created_on: "some nonsense"
    credit.should_not be_valid
    credit.created_on.should be_nil
  end

  it "accepts good dates" do
    date = "2013-02-28"
    credit = Credit.new created_on: date
    credit.should be_valid
    credit.created_on.should == Date.parse(date)
  end
end 
```

即使没有 gem，您也可以很容易地验证这一点，但这看起来像是一个方便的 gem。不要忘记运行生成器以完成安装。

如果您确实选择推出自己的验证，您可能会遇到一些问题。

一是当您尝试将错误值粘贴到`date`或`datetime`列中时，底层数据库的行为会有所不同；有些在他们存储的值和他们所做的自动转换方面更加灵活。最好提前在 Rails 端进行验证。

更大的问题是，在运行验证时，ActiveRecord 已经尝试将值转换为与数据库字段类型匹配的类型。如果您`date`在数据库中有一个字段`created_on`，ActiveRecord 会将分配给的每个值转换`created_on`为一个`Date`对象。这最终会`nil`导致许多格式错误的日期。在您的验证器中，您需要查看`created_on_before_type_cast`原始字符串。ActiveRecord 创建一个动态的`*_before_type_cast`方法。您可以检查其格式并拒绝错误值。

我提到这些警告是为了鼓励您坚持使用宝石。:)

# java - 如何将 Java 对象绑定到 Javascript 控件

> ID：15458360
> 
> 赞同：3
> 
> 时间：2013-03-17T07:00:16.300
> 
> 标签：java, javascript, extjs, binding

我正在使用[Sencha 框架](http://www.sencha.com/)并使用 Javascript 创建控件。我想使用 Java 从数据库中获取一些数据，但不确定如何将该 Java 对象绑定到 Sencha 创建的控件。我可以尝试什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:37:18.613

假设您想在 sencha 中创建一个组合框，然后执行以下操作：

```
var javaData = = [
       [1, 'item1']
      ,[2, 'item2']
  ];
var combo = new Ext.form.ComboBox({
store: new Ext.data.SimpleStore({
     id:0
    ,fields:
        [
            'myId',   //numeric value is the key
            'myText' //the text value is the value
        ]
    ,data: javaData
})
,valueField:'myId'
,displayField:'myText'
,mode:'local' 
```

});

用服务器中的数据替换 javaData var 值。确保数据为 json 格式以运行此示例。

更多信息：[http ://www.sencha.com/learn/combobox-faq/](http://www.sencha.com/learn/combobox-faq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:15:21.903

'Sencha 创建控件'？检查 Sencha API 的控件 - 复选框、网格面板等。

在大多数情况下，您可能需要使用商店配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T12:50:08.303

您的 ExtJS 商店所做的是对您的 java 应用程序上某个页面的 Ajax 调用。该页面将返回 JSON 格式的数据，以便您的 ExtJS 存储可以解析该数据。

基本上它并不关心您的后端技术是什么。您只需要确保您的页面以以下格式返回 json：

```
{
   data: [], //Array of json data
   success: true, //true when your call was handled succesfull
   total: 10 //The total items of a certain object
} 
```

因此，在您的情况下，您的 JSP 页面将以 JSON 格式显示结果，如上所述，您的 ExtJS 存储将配置为调用该特定 JSP 页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T07:22:00.610

只需使用[Sencha GXT](http://www.sencha.com/products/gxt/)：“Sencha GXT 是使用 Java 创建基于 Web 的丰富应用程序的最快、最强大的方式。”

# c# - 如何获取 Facebook 相册名称

> ID：15458361
> 
> 赞同：0
> 
> 时间：2013-03-17T07:00:24.970
> 
> 标签：c#, facebook

我在获取 facebook 专辑名称时遇到问题。我使用以下代码：

```
private void LoadAlbumName()
    {

        dynamic albums = new FacebookMediaObject();
        albums = _fb.Get("me/albums/");
        foreach (dynamic albumInfo in albums.data)
        {
            Dispatcher.BeginInvoke(new MethodInvoker(
                () =>
                {
                    dynamic albumsPhotos = _fb.Get(albumInfo.id + "/photos");
                }));
        }
    } 
```

当我跑步时，我得到空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:33:25.673

您是否要求 user_photos 许可？此外，我认为正确的 api 调用是“/me/albums”。

# oop - 这对lua来说是一个糟糕的OOP设计吗？

> ID：15458365
> 
> 赞同：3
> 
> 时间：2013-03-17T07:00:58.153
> 
> 标签：oop, lua

我发现（并编写了）一种在 lua 中以函数方式进行面向对象编程的方法，而不是标准的元表方法。它具有更多功能（不是双关语），但我担心它可能会降低性能。我的目标是试验用 lua 编写的服务器，我想使用这个 OOP 解决方案。无论如何，这是我的 class.lua，它包含创建新对象和子类的功能。

```
local classes = setmetatable({}, {__mode = "k"}) -- Allow the GC to empty this as needed.

function class(f, super)
    classes[f] = {super = super}
end

function new(f, obj, ...)
    local fenv = getfenv(f)
    if type(obj) ~= "table" then
        error("bad argument: expected table, got " .. type(obj) , 2)
    end

    if classes[f] and classes[f].super then
        new(classes[f].super, obj, ...)
        local super = obj
        obj = setmetatable({}, { __index = super })
        obj.super = super
    else
        setmetatable(obj,{__index = fenv})
    end

    obj.this = obj
    setfenv(f, obj)
    f()
    setfenv(f, fenv)

    if obj.init then
        obj.init( ... )
    end

    return obj
end 
```

用法相当简单。举个例子：

```
function Person()
    local privateVar = math.random()
    age, name, gender = nil, nil, nil

    function init(age, name, gender)
        this.age = age
        this.name = name
        this.gender = gender
    end

    function getAge()
        return age
    end

    function getName()
        return name
    end

    function getGender()
        return gender
    end

    function getPrivateVar()
        return privateVar
    end
end 
```

并创建对象

```
obj = new(Person, {}, "John", 30, "male") 
```

子类化也很简单

```
function Female()
    function init(name, age)
        super.init(name, age, "female")
    end
end

class(Female, Person) 
```

请注意，如果您想子类化，您只需调用一个函数即可将某物设为类。

当你调用 new 时，你传入类、对象和参数。对象的元表被设置为具有类的原始环境的索引。然后确定并创建超级。然后运行类函数以创建所有实例值。接下来，调用 init。

与元表相比，它的一个优点是其他代码无法更改该类并让它更改该类的所有已存在和将存在的实例。现在做这样的事情的唯一方法是在环境中调动和破解，以确保对类的所有引用都引用黑客的虚拟类。

最重要的是，它支持私有变量。只需在您的类函数中本地声明它们就可以了。

但是我想知道它为每个实例创建一次所有实例方法的事实是否会导致性能问题。这会吃掉记忆吗？这里有什么问题？

另外，还有一个问题。虽然这支持多重继承，但如果你调用一个超级方法，并且超级调用一个方法，它将调用超级类的方法，而不是实例化的类。任何想法如何让它从实例化类中调用？

# android - 我可以禁用按钮文本抗锯齿吗

> ID：15458366
> 
> 赞同：2
> 
> 时间：2013-03-17T07:01:05.100
> 
> 标签：android

我使用自定义 8 位字体，我正在寻找一种禁用抗锯齿的方法。

我尝试了后面的代码，但它不起作用：

```
<!-- main_activity.xml -->
<Button
    android:id="@+id/button"
    android:textColor="@color/white"
    android:textSize="24sp"
    android:includeFontPadding="false"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    style="@style/Button" />

<!-- styles.xml -->
<style name="Button">
    <item name="android:antialias">false</item>
    <item name="android:textColor">#ff0000</item>
    <item name="android:textSize">24sp</item>
    <item name="android:shadowColor">#0099cc</item>
    <item name="android:shadowDx">0</item>
    <item name="android:shadowDy">4</item>
    <item name="android:shadowRadius">0.01</item>
</style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T10:51:05.720

我不确定是否可以禁用`antialiasing`using `xml`，但您可以尝试以编程方式禁用它`button.getPaint().setAntiAlias(false);`

# machine-learning - 个体特征评估器

> ID：15458376
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:03:02.293
> 
> 标签：machine-learning, classification, weka

我对数据挖掘中的单个特征评估器有疑问。

可以`OneRAttributeEval, InfoGainAttributeEval, GainRatioAttributeEval, ChiSquaredAttributeEval` 在非二元类分类器上使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:10:46.490

是的，这些特征选择技术可以在多类分类问题的上下文中使用。通常，如果某些东西适用于两个类，它可以扩展为处理多个类（2 个或更多）。如果您简要了解这些技术的工作原理，您就会明白。

OneR 基本上是为一个特征构建单一规则并计算分类准确率，特征选择选择提供最佳性能的特征。在多类问题的上下文中仅使用单个规则来评估特征的有用性可能不是最好的方法，但可以做到。

关于其他三种技术，用于评估特征有用性的度量——信息增益、增益比、卡方度量——已经考虑了每个类别的加权分数。因此，这些技术可用于在多类分类的上下文中选择特征。

另外，快速搜索，我发现了以下链接：

[OneRAttributeEval](http://wiki.pentaho.com/display/DATAMINING/OneRAttributeEval)

[InfoGainAttributeEval](http://wiki.pentaho.com/display/DATAMINING/InfoGainAttributeEval)

[GainRatioAttributeEval](http://wiki.pentaho.com/display/DATAMINING/GainRatioAttributeEval)

[卡方属性评估](http://wiki.pentaho.com/display/DATAMINING/ChiSquaredAttributeEval)

在我看来，您正在查看这些确切的功能。如果您查看这些链接中的每一个，您应该能够找到“功能”。在此之下，您会发现这些函数中的每一个都可以处理“名义类”（在“类”行中）。标称是多类的。

# wordpress - 带有内置产品目录的 Wordpress 主题

> ID：15458380
> 
> 赞同：0
> 
> 时间：2013-03-17T07:04:00.227
> 
> 标签：wordpress, wordpress-theming

我想要一个没有电子商务浮华的产品目录。到目前为止，我已经找到了一个可以很好地集成的主题

[http://themeforest.net/item/nimble-multipurpose-retina-ready-wordpress-theme/3009347](http://themeforest.net/item/nimble-multipurpose-retina-ready-wordpress-theme/3009347)

我想知道是否有更多的主题有一个类似于这个主题的产品目录。

我尝试了 catablog，效果很好，但我不喜欢它如何将产品视为博客文章，并且大多数主题在文章下方显示“用户名 0 条评论”。

我正在寻找具有内置目录的主题，例如灵活。或者非常好的插件，可以很好地使用 wordpress。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:24:13.977

您提到您不热衷于将产品作为帖子，但我认为这非常适合 Wordpress。这样做将允许您将无限的元数据项附加到您的产品中，并且符合“Wordpress 方式”的做事方式。

如果您不想在您的帖子浏览页面上看到分页设备，请修改主题的“index.php”，最好在子主题中，以便父主题可以轻松升级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T14:16:18.370

如果您不喜欢 Catablog 只是因为它列出了 0 和 1 条评论，则可以删除该部分代码。如果您可以发布 single.php 文件，那么我可以帮助您删除那部分代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T13:26:06.260

还有一些其他 WordPress 目录插件值得考虑。例如，电子商务产品目录不会像帖子中那样显示元数据。它与 WordPress 配合得很好：[https ://wordpress.org/plugins/ecommerce-product-catalog/](https://wordpress.org/plugins/ecommerce-product-catalog/)

# ios - 在 PhoneGap 中使用协议缓冲区 - iOS

> ID：15458384
> 
> 赞同：3
> 
> 时间：2013-03-17T07:04:14.333
> 
> 标签：ios, cordova, protocol-buffers, hybrid-mobile-app

我使用原生应用程序方法在 iOS 中使用了 c++ google protobuf 类，即使用 Xcode、objective c、cocoa 等。

现在，我想迁移到混合应用程序，我已经探索了网络上的选项，根据我的要求，我选择了 PhoneGap 和 Titanium。这将需要我使用 JavaScirpt、HTML5（根据我的理解仅在 Titanium 中使用 JavaScript）jQuery 等。

我的问题是，我应该如何从 javascript 访问我的 c++ protobuf 类。（我没有 JavaScript 方面的专业知识）。

我也对使用哪种混合应用程序框架持开放态度。

网络开发之王....指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:23:49.417

使用PhoneGap，如果有PhoneGap API 当前未公开的电话功能，或者如果您希望访问一些专门的本机算法/功能，那么您需要编写一个插件。

PhoneGap 插件提供了一种标准化机制，用于打包原生代码并通过 JavaScript 访问其功能。请参阅[PhoneGap 插件开发指南](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_index.md.html)。

我个人认为 PhoneGap 是最好的混合框架，它已经存在了一段时间，有据可查，并且拥有一个健康的社区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T22:25:20.487

这是一个老问题，但您始终可以在您的 JavaScript 代码[中使用 ProtoBuf 的 100% JavaScript 实现。](https://github.com/dcodeIO/ProtoBuf.js)它运行良好，您甚至可以根据需要预编译 .proto 文件。

在 Cordova中，*最好*创建一个插件，但如果您没有时间或技能来做这件事，链接代码也能很好地工作。

# html - 以圆形方式排列按钮并使用css设置动画

> ID：15458386
> 
> 赞同：1
> 
> 时间：2013-03-17T07:05:06.487
> 
> 标签：html, css

有三个按钮。我想把它们排成一个圆圈。有没有办法将它们放在同一个 div 中，然后在 div 属性中给出一些，而不是给出每个按钮的坐标？
以及如何制作动画/例如单击任何按钮，按钮应该旋转并到达顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T05:07:14.487

这就是风格

```
.Hfaraz {
background-color: #03F;
height: 100px;
width: 100px;
float: left;
}
.Hfaraz:hover{
    transform: rotate(45deg);
    -ms-transform: rotate(45deg); /* IE 9 */
    -moz-transform: rotate(45deg); /* Firefox */
    -webkit-transform: rotate(45deg); /* Safari and Chrome */
    -o-transform: rotate(45deg); /* Opera */

-webkit-transition: transform 0.3s ease-in-out;
-moz-transition: -moz-transform 0.3s ease-in-out;
-ms-transition: transform 0.3s ease-in-out;
-o-transition: transform 0.3s ease-in-out;
transition: transform 0.3s ease-in-out;
 } 
```

这是 HTML

```
<div class="Hfaraz"></div>
<div class="Hfaraz"></div>
<div class="Hfaraz"></div> 
```

# azure - windows azure上传文件路径错误：'找不到文件...'

> ID：15458388
> 
> 赞同：1
> 
> 时间：2013-03-17T07:05:26.967
> 
> 标签：azure, azure-storage, azure-blob-storage

我一直在尝试将文件上传到**Azure 存储容器**。当我在本地运行我的网络应用程序时，如果文件**不在**网站**根目录**中，我会收到**错误消息**：

```
Could not find file 'C:\Program Files (x86)\IIS Express\test.txt'. 
```

如果我将文件**复制**到**web 应用程序根文件夹**，它工作正常。

在**云**上运行**Web 应用程序**时出现**错误**：

 ****```
Could not find file 'D:\Windows\system32\test.txt'. 
```

我无法从**HttpPostedFileBase**对象获取**完整的本地文件路径。**

 ****代码**：_

```
private string UploadFile(HttpPostedFileBase file, string folder)
    {
        try
        {
            var date = DateTime.UtcNow.ToString("yyyyMMdd-hhmmss-");
            var fileName = Path.GetFileName(file.FileName);

            CloudStorageAccount storageAccount = CloudStorageAccount.Parse("DefaultEndpointsProtocol=http;AccountName=test;AccountKey=asdfasfasdasdf");
            CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient(); 
            CloudBlobContainer container = blobClient.GetContainerReference(folder);
            bool b = container.CreateIfNotExists();

            CloudBlockBlob blockBlob = container.GetBlockBlobReference(date + fileName);
            blockBlob.Properties.ContentType = file.ContentType;

            using (var fileStream = System.IO.File.OpenRead(fileName))
            {
                blockBlob.UploadFromStream(fileStream);
            }
            return blockBlob.Uri.AbsoluteUri;

        }
        catch (Exception ex)
        {
            return ex.Message;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:16:31.037

[HttpPostedFileBase 手册](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.aspx)有这样的说法；

> ***FileName 获取客户端***上文件的完全限定名。

也就是说，文件名不是可以在服务器上打开的。

我认为您真正想要做的是使用[InputStream 属性](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.inputstream.aspx)；

```
blockBlob.Properties.ContentType = file.ContentType;

blockBlob.UploadFromStream(file.InputStream);  // Upload from InputStream
return blockBlob.Uri.AbsoluteUri; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-21T06:56:49.207

非常感谢：Joachim Isaksson（上图）昨天我花了一整天的时间与这一行代码作斗争。我已经对您的答案投了赞成票，但我想我现在应该在我自己的代码中添加您的解决方案的副本：

```
public async Task<ActionResult> UploadAsync()
{
    try
    {
        HttpFileCollectionBase files = Request.Files;
        int fileCount = files.Count;

        if (fileCount > 0)
        {
            for (int i = 0; i < fileCount; i++)
            {
                CloudBlockBlob blob = blobContainer.GetBlockBlobReference(GetRandomBlobName(files[i].FileName));

                blob.Properties.ContentType = files[i].ContentType;
                blob.UploadFromStream(files[i].InputStream);

                // the above 2 lines replace the following line from the downloaded example project:
                //await blob.UploadFromFileAsync(Path.GetFullPath(files[i].FileName), FileMode.Open);
            }
        }
        return RedirectToAction("Index");
    }
} 
```******

# c - 函数“时间”的隐式声明 [-Wimplicit-function-declaration]|

> ID：15458393
> 
> 赞同：22
> 
> 时间：2013-03-17T07:06:36.293
> 
> 标签：c, srand

每当我尝试使用`srand`功能时，我都会收到此**警告**

```
"implicit declaration of function 'time' [-Wimplicit-function-declaration]|" 
```

**运行编译文件**时出现windows**错误报告**， 我是c编程的新手，我在教科书上找到了这个，但它对我不起作用。

 **```
 srand (time());  
  int x= (rand()%10) +1;  
  int y= (rand()%10) +1;  
  printf("\nx=%d,y=%d", x,y); 
```

我需要什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-17T07:09:19.663

您需要确保`#include`正确的标题，在这种情况下：

```
#include <stdlib.h>  // rand(), srand()
#include <time.h>    // time() 
```

如有疑问，请查看手册页：

[$曼兰特](http://linux.die.net/man/3/rand)

[$人工时间](http://linux.die.net/man/2/time)

还有一个问题：`time()`需要一个参数，它可以是`NULL`，所以你的调用`srand()`应该是：

```
srand(time(NULL)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:51:06.550

请注意，`time()`函数在其返回值和地址参数中都使用当前时间（以 1970 年以来的秒数表示）。**

# mysql - 如何显示不同的数据库 MySQL 工作台？

> ID：15458398
> 
> 赞同：0
> 
> 时间：2013-03-17T07:07:24.893
> 
> 标签：mysql, xampp, mysql-workbench

我下载了[MySQL](http://dev.mysql.com/downloads/installer/)，并正确安装了它。

当我启动 MySQL 工作台时，它向我展示了这些数据库（我不记得所有这些）：
**sakila
test
world**

没关系，它们正在工作，我可以毫无问题地访问它们。但后来我安装了**xampp**，之后当启动 MySQL 工作台时，它向我显示了不同的数据库：
**cdcol
phpmyadmin
test
webauth**

我无法访问以前的数据库。

如何在它们之间切换？或
查看它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:51:30.767

不确定 xampp 是否卸载了您的第一台服务器，但更有可能是它的安装更改了默认的 MySQL TCP/IP 端口（3306）。也许两台服务器都试图在同一个端口上运行（这不起作用）并且一个未能启动（在这种情况下是第一次安装）。

所以你需要的是让每台服务器在自己的端口上运行。您可以使用 MySQL Workbench 进行必要的更改。但是首先您需要检查是否仍然安装了两台服务器。你有 2 个 MySQL 服务在运行吗？关闭其中一个并通过 MySQL 连接到正在运行的服务器。如果可行，请关闭它并运行其他服务。再次与 MySQL 连接，但这次转到管理部分，配置文件，并将端口更改为例如 3307。保存并重新启动服务器（所有可能都在 WB 内）。现在您应该能够同时运行两台服务器（前提是第一个服务器仍在默认端口上运行）。在 WB 中创建第二个连接和服务器实例，以便您可以在 3306 访问一个服务器，在 3307 访问另一个服务器

如果只有一个 MySQL 服务条目，则 xamp 已删除以前的安装，如果您确实需要两台服务器，则必须重新安装。

# wordpress - Wordpress 中的 iframe 自动调整大小

> ID：15458401
> 
> 赞同：0
> 
> 时间：2013-03-17T07:08:12.357
> 
> 标签：wordpress, iframe, resize, size

我在functions.php中使用以下代码来调整我的IFRAMES

```
function add_youtube_size($youtubehtml) {
   if (strpos($youtubehtml, "<iframe" ) !== false) {
        $youtubesearch = array( 'width="460"', 'height="310"');
        $youtubereplace = array( 'width="600"', 'height="338"');
        $youtubehtml = str_replace($youtubesearch, $youtubereplace, $youtubehtml);

        return $youtubehtml;
   } else {
        return $youtubehtml;
   }
}
add_filter('the_content', 'add_youtube_size', 10); 
```

但此代码仅编辑 460 x 310 的 iframe 的大小。

有什么办法可以改变那条线`$youtube search = array( 'width="460"', 'height="310"');`以获得任何可能的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:17:25.840

是的，你可以改变它

```
$youtubesearch = array( 'width="460"', 'height="310"');
$youtubereplace = array( 'width="600"', 'height="338"'); 
```

在这些行中，将**宽度**和**高度**都更改为您需要的值，但重要的是您的搜索视频也应该以您的书面宽度和高度可用

# c++ - 后缀算法的中缀

> ID：15458404
> 
> 赞同：0
> 
> 时间：2013-03-17T07:08:47.227
> 
> 标签：c++, postfix-notation

我一直在研究一种将“a+b*cd/e”转换为它的后缀形式的算法。我已经准备好了[http://en.wikipedia.org/wiki/Shunting-yard_algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm) wiki，但我的逻辑有问题。当我打印出我的队列时，我得到没有操作符的“abcd e”。似乎没有任何东西被推入我的堆栈？或者，如果是，它不会被推入我的队列。我的队列/堆栈由我创建的双链表类实现。

```
#include <iostream>
#include "LinkedList.h"
#include "Stack.h"
#include "Queue.h"
using namespace std;

int oper(char c)
{
    switch(c)    {
        case '!':
            return 4;
        case '*':  case '/': case '%':
            return 3;
        case '+': case '-':
            return 2;
        case '=':
            return 1;
    }
    return 0;
}

int main () {

    LinkedList* list = new LinkedList();

    string infix = "a+b*c-d/e";
    Stack *holder = new Stack();
    Queue *newstring = new Queue();
    int length = infix.length();
    char temp;
    char prev;
    for(int i=0; i<length; i++)
    {
        temp = infix[i];
        if((temp == '+') || (temp == '-') || (temp == '*') || (temp == '/'))
        {
            if (holder->isEmpty())
            {
                holder->push(temp);
                prev = temp;
                continue;
            }
            if(oper(temp)<oper(prev))
            {
            newstring->queue(holder->popStack());
            temp = '\0';
            continue;
            }   
            else
            holder->push(temp);
            prev = temp;
        }
        else 
        newstring->queue(temp);

}
while(!holder->isEmpty())
{
    newstring->queue(holder->popStack());
}
newstring->printQueue();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:35:29.227

你的代码部分::

```
 if(oper(temp)<oper(prev))
        {
        newstring->queue(holder->popStack());
        temp = '\0';
        continue;
        } 
```

这部分代码根本不会受到影响......输入中提供的字符串“a + b * cd / e”

看到这个::

```
 if(oper(temp)<oper(prev)) 
```

条件是检查前一个运算符相对于变量 temp 中当前扫描的运算符的优先级，但是在前一个 if 语句之外没有语句（堆栈为空的条件）从可用选项中提取或分配上一个变量在堆栈中，因此“+”的初始值用于评估小于“*”和“\”的 if 条件，并且与“-”处于同一级别，但结果不大于第二个 if条件永远不会得到满足，也不会受到打击。

这可能就是为什么当您弹出堆栈时没有任何内容出现时，这就是您获得当前结果的方式。您将需要再次访问代码并进行适当的更改。

希望这会有所帮助，祝您有美好的一天。

# java - k均值和c均值之间的差异

> ID：15458405
> 
> 赞同：2
> 
> 时间：2013-03-17T07:08:56.977
> 
> 标签：java, algorithm, k-means, fuzzy-c-means

我正在尝试实现 k 均值算法，所以我需要知道 k 均值和 c 均值的算法有什么区别？
它们是相同的名称不同还是有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:12:47.567

查看@Reed Copsey 在 Stackoverflow 问题之一中给出的[答案。](https://stackoverflow.com/questions/2345903/whats-is-the-difference-between-k-means-and-fuzzy-c-means-objective-function)你一定会找到你的回应：-

> 主要区别在于，在 Fuzzy-C 均值聚类中，每个点都具有与特定聚类相关的权重，因此一个点不会像与聚类的弱或强关联那样位于“聚类中”，这由到簇中心的反距离决定。
> 
> Fuzzy-C 方法的运行速度往往比 K 方法慢，因为它实际上做了更多的工作。每个点都用每个集群进行评估，每次评估涉及更多操作。K-Means 只需要进行距离计算，而模糊 c 均值需要进行完整的反距离加权。

# c - MPI C SendRecV 矩阵乘法

> ID：15458406
> 
> 赞同：2
> 
> 时间：2013-03-17T07:08:57.787
> 
> 标签：c, mpi

我需要将矩阵的各个部分从根进程发送到所有其他进程，以便它们可以对其进行计算。然后我需要接收计算并在根进程中聚合它们。我会使用 Scatter，但矩阵只能存在于根进程中（作业规定）。

我知道 MPI_Sendrecv_replace 或 MPI_Sendrecv 将是有用的功能。但是，我需要将矩阵的一部分发送给其他进程，让它们计算，然后返回。如果我需要在发送和接收之间进行计算，我该如何使用 Sendrecv 函数。我很难概念化这一点。

例如：

```
Process 0 sends to Process 1,2,3
Process 1,2,3 compute sections of matrix
Process 0 receives all of the computations 
```

如果 sendrecv 功能合二为一，怎么会发生这种情况？

此外，我认为使用单独的发送和接收操作肯定会导致死锁（除非我煞费苦心地管理调用），因为我将在 nxn 矩阵上执行此操作并且它可能很大。

如何使用 Sendrecv 功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T20:26:18.077

`MPI_Sendrecv`并不意味着你来回发送一些东西。`MPI_Sendrecv`而是`send command`在处理器 A 处执行 a 并`receive command`在处理器 B 处执行 a 。（如果你想从 A 向 B 发送一些东西）

您需要 1`Sendrecv`用于：

```
Process 0 sends to Process 1 
```

然后你做计算和另一个`Sendrecv`：

```
Process 0 receives from 1 
```

# javascript - Javascript：[对象对象]的问题

> ID：15458408
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:09:28.533
> 
> 标签：javascript, arrays, object, document.write

我想用它在最后的屏幕上显示
**Anonym
re**
但我想为此使用变量注释，但我不知道如何使用它。

```
var comments=[{"comment": "re", "author": "Anonym", "likes": 0, "key": "ahFzfmVhc3ljb21tZW50LWhyZHIQCxIHQ29tbWVudBj46qcJDA", "date": 1363460164.0, "approved": true}]

 for(i=0;i<1;i++){
         document.write(comments[i]+"") ;
     } 
```

如果这样写，浏览器上只写了[Object object]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:14:19.360

一方面，您的变量包含一个具有一个元素的数组，该元素是一个对象。

所以为了访问内容，你必须`comments[ INDEX ][ PROPERTYNAME ]`像这样使用：

```
var comments=[{"comment": "re", "author": "Anonym", "likes": 0, "key": "ahFzfmVhc3ljb21tZW50LWhyZHIQCxIHQ29tbWVudBj46qcJDA", "date": 1363460164.0, "approved": true}]

for(i=0;i<1;i++){
  document.write(comments[i]['author'] + "<br>" + comments[i]['comment'] ) ;
} 
```

一般来说，我会`document.write()`用其他东西代替，它利用`innerHTML`. 这可能看起来像这样：

```
<div id="commentBox"></div>
<script>
    var comments=[{"comment": "re", "author": "Anonym", "likes": 0, "key": "ahFzfmVhc3ljb21tZW50LWhyZHIQCxIHQ29tbWVudBj46qcJDA", "date": 1363460164.0, "approved": true}],
        commentBox = document.getElementById( 'commentBox' );

    for(i=0;i<1;i++){
      commentBox.innerHTML += comments[i]['author'] + "<br>" + comments[i]['comment'];
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:15:07.933

可以通过名称访问对象属性：

```
document.write(comments[0].comment); 
```

如果你想要整个对象，你可以使用`JSON.stringify`：

```
document.write(JSON.stringify(comments[0])); 
```

或者明确格式化您想要的属性：

```
document.write(comments[0].comment + ", " + comments[0].author); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:12:49.020

应该：

```
for(var i=0;i<1;i++){
  console.log(comments[i].author + "\n" + comments[i].comment); //for author & comment
} 
```

或者

```
for(var i=0;i<comments.length;i++){
     console.log(comments[i].author + "\n" + comments[i].comment); //for author & comment
} 
```

# c# - 在 C# 中验证列表的数据类型？如果可能，通过 LINQ

> ID：15458414
> 
> 赞同：0
> 
> 时间：2013-03-17T07:10:35.010
> 
> 标签：c#, .net, linq, list

我有一个包含 ID(int),Name(String),Salary(decimal) 的列表。列表中已经填充了 90 行。我想验证除整数值之外没有的所有 ID，例如薪水和姓名. LINQ可以吗？我正在使用带有 VS2012 的框架 4.5 任何快速解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:14:25.440

我想你想要这样的东西

```
class MyClass
{
    int ID;
    string Name;
    decimal Salary;
}

...

bool IsValid(MyClass myInstance)
{
   int nameInt;
   return ((myInstance.Salary % 1) == 0) && // check salary
          int.TryParse(myInstance.Name, out nameInt); // check name
}

...

 // verify that all items in list are valid
List<MyClass> myList = ...
bool listValid = myList.All(IsValid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:13:48.183

我假设你想在这里查看薪水

.Where( x = > x.Salary.Equals( (int) x.Salary)

有点脏，我们将其转换为 int （丢失小数位，然后查看它是否与之前的值相同。

或者

.Where(x => x.Salary.Equals(Math.Round(x.Salary,0))

或者只是使用 Int32.TryParse - 不知道为什么要使用 linq 执行此操作。

# jquery - 如何添加缩略图和视图

> ID：15458416
> 
> 赞同：0
> 
> 时间：2013-03-17T07:10:36.927
> 
> 标签：jquery, youtube-api, thumbnails

有没有办法可以在这个提要中添加缩略图和视图？饲料在[这里](http://youtube.zxq.net/test7.html)

这是需要转换的代码部分。

```
<script>
$(document).ready(function(){
    $("button").click(function(){
        $("body").append("<div id = 'data'><ul>jffnfjnkj</ul></div>");
        var dataContainer = $("#data ul");
        $.ajax({
            url:'http://gdata.youtube.com/feeds/api/users/sony/uploads?alt=jsonc&v=2&callback=?',
            dataType: "jsonp",
            timeout: 5000,
            success: function(data){

                     $.each(data.data.items, 
                               function(i, val) {

                                 if (typeof(val.player) !== 'undefined' && typeof(val.title) !== 'undefined') {
                                    dataContainer.append('<li><a href='+val.player["default"]+' target="_blank">'+val.title+'</a></li>');
                                 }
                         });
                    }
                });
            });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:04:49.270

轻松，像这样

```
dataContainer.append('<li><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><a href='+val.player["default"]+' target="_blank">'+val.title+'</a>Views '+val.viewCount+'</li>'); 
```

大拇指上方的标题和下方的视图

```
dataContainer.append('<li><a href='+val.player["default"]+' target="_blank">'+val.title+'</a><br /><img src="'+val.thumbnail.sqDefault+'" width="120" height="90" alt="'+val.title+'"/><br />Views '+val.viewCount+'</li>'); 
```

# scala - 合并列表、分组依据并创建一个包含来自一个参数的所有值的子列表

> ID：15458417
> 
> 赞同：1
> 
> 时间：2013-03-17T07:10:37.973
> 
> 标签：scala, group-by

我试图弄清楚我如何实现以下目标。

我有一个元组列表

```
scala> List(t1,t2,t3)
res16: List[(Int, java.lang.String)] = List((1001,Test), (1002,Schnitzel), (1001,Käse)) 
```

我想要从这个列表中得到的是 s.th。像这样

```
List[(Int, Seq[java.lang.String]) = List((1001, Seq(Test, Käse)), (1002, Seq(Schnitzel))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:28:18.457

已经有一个功能`groupBy`几乎可以实现您想要的。例如，

```
val xs = List(t1, t2, t3)
val m  = xs.groupBy(_._1) 
```

按它们的第一个组件对 antries 进行分组`xs`，从而生成地图

```
Map(1002 -> List((1002,Schnitzel)), 1001 -> List((1001,Test), (1001,Kaese))) 
```

这没有您想要的类型，并且键仍然是条目的一部分。这可以通过例如解决

```
val ys : List[(Int, Seq[String])] = m.mapValues(_.map(_._2)).toList 
```

# javascript - js中为下次操作重置计算器输入框

> ID：15458418
> 
> 赞同：2
> 
> 时间：2013-03-17T07:11:17.250
> 
> 标签：javascript, html, input, calculator

它是 html5 和 js 中的计算器。任何操作后，如果我按下任何按钮编号，它将被添加到答案的末尾，如果操作是 (2+2)，答案将是 (4) 如果我按下 (5) 按钮进行另一个操作，它将是add to the end of 4 (45) 如果一个操作已经完成并开始另一个操作，我如何重置输入框？

这是我的代码

```
<title>Untitled Document</title>

<style type="text/css">

.border-style{
    border: hidden;
}

.input-style{
    width:100%;
    height:38px;
}

    </style>
    </head>

    <body>

<form name="calc">

    <table border=3 align="center" width="40%" style="border:solid" >

    <tr>
        <td colspan="5" height="40px" width="71%" class="border-style">
            <input id="input" type="text" name="Num" value="0"       style="width:98%; height:20px" />
        </td>
        <td align="center" width="14.2%" class="border-style">
            <input type="button" value="C"    onclick="deleteDigit(this.form.Num)" class="input-style"   />
        </td>
        <td align="center" width="14.2%" class="border-style">
            <input type="button" value="CE" onclick="document.calc.Num.value = ' ' "  class="input-style" />
        </td>
    </tr>

    <tr>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="x^y" onclick="power(this.form)"      class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="Sin"   onclick="sin(this.form)"class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="7" onclick="document.calc.Num.value += '7'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="8" onclick="document.calc.Num.value += '8'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="9" onclick="document.calc.Num.value += '9'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="+/-"onclick="flipSign(this.form.Num)" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="mod"onclick="document.calc.Num.value +='%'" class="input-style"/>
        </td>
    </tr>

    <tr>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="root" onclick="sqrt(this.form)" class="input-style"/>
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="cos" onclick="cos(this.form)" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="4" onclick="document.calc.Num.value +='4'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="5"onclick="document.calc.Num.value +='5'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="6"onclick="document.calc.Num.value +='6'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="+"onclick="document.calc.Num.value +='+'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="-"onclick="document.calc.Num.value +='-'" class="input-style" />
        </td>
    </tr>

    <tr>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="n!"onclick="factorial(this.form)" class="input-style"/>
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="tan"onclick="tan(this.form)" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="1"onclick="document.calc.Num.value +='1'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="2"onclick="document.calc.Num.value +='2'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="3"onclick="document.calc.Num.value +='3'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="*"onclick="document.calc.Num.value +='*'" class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="/"onclick="document.calc.Num.value +='/'" class="input-style" />
        </td>
   </tr>
   <tr>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="fib"onclick="fib(this.form)"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="log"onclick="lg(this.form)"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="0"onclick="document.calc.Num.value +='0'"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="." onclick="document.calc.Num.value +='.'"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="10^x" onclick="powerten(this.form)"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="Ans" onclick="SaveANS()"  class="input-style" />
        </td>
        <td  height="40px" width="14.2%" class="border-style">
            <input type="button" value="=" onclick="equal(this.form)"  class="input-style" />
        </td>
   </tr>

   </table>

   <script type="text/javascript" >

// saving Ans
var Ans=0;

// Delete last digit entered
function deleteDigit(Num) {
    Num.value = Num.value.substring(0, Num.value.length - 1)
} 

// Power Function
function power(n){ 
    if (n.Num.value != "" && n.Num.value != 0 ){
        var p=prompt("Enter the power:")
        n.Num.value = Math.pow(n.Num.value,p)
        Ans=n.Num.value;
    }
    else 
        alert("Enter a number first")   
}

// sin Function
function sin(n) {
    n.Num.value = Math.sin(n.Num.value);
    Ans=n.Num.value;
}

// Flips the sign of the value 
function flipSign(Num) {
    if(Num.value.substring(0, 1) == "-")
        Num.value = Num.value.substring(1, Num.value.length)
    else
        Num.value = "-" + Num.value
}

// Square root Function
function sqrt(n) {
    if (n.Num.value != "" && n.Num.value != 0 ){
        var p=prompt("Enter the root:")
        p=1/p;
        n.Num.value = Math.pow(n.Num.value,p)
        Ans=n.Num.value;
    }
    else 
        alert(" please input the nuber first  !!!")   
}

// cos Function
function cos(n) {
    n.Num.value = Math.cos(n.Num.value);
    Ans=n.Num.value;
}

// Factorial Function
function factorial(n){
    var var1, var2;
    var1=1;
    var2=1;
    var x=n.Num.value;

    do {
        var1=var1*var2;
        var2=1+var2;
    }while(var2<=x);

    n.Num.value =var1;
    Ans=var1; 
 }

// tan Function 
function tan(n) {
    n.Num.value = Math.tan(n.Num.value);
    Ans=n.Num.value;
}

// Fibonacci Function
function fib(n){   
    var var1=0;
    var var2=1;
    var result;
    var x= n.Num.value;
    for ( var i=1 ; i<x ; i++){ 
        result=var1+var2;
        var1=var2;
        var2=result;
    }
    n.Num.value =result;
    Ans=result;
}

// Log Function
function lg(form) {
    n.Num.value = Math.log(n.Num.value);
    Ans=n.Num.value;
}

// 10^powr Function
function powerten(n) {  
    var x=n.Num.value;
    n.Num.value = Math.pow(10,x)
    Ans=n.Num.value;
}

function equal(n){
    var var1=eval(document.getElementById("input").value);
    result = eval(var1) ;
    document.getElementById("input").value = result ;
    Ans=result;

}

function SaveANS(){
    document.getElementById("input").value =Ans;
}

    </script>

    </form>
    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:22:00.997

他们必须按下等号按钮才能得到答案，对吗？

有一个标志（一个布尔变量，可能在全局范围内），当按下等号时设置为真（或者如果您正确使用提交事件，则表单被“提交”）。然后，在任何后续按钮单击时，如果该标志为真，请在执行正常例程之前清除输入框——当然，注意将标志设置回假。

您可能还想确保您的 HTML 有效（开始和结束 html 和正文标记、html5 doctype 等）

# java - 保存涉及多个活动的活动状态。使用 saveInstanceState 还是 Preferences？

> ID：15458421
> 
> 赞同：0
> 
> 时间：2013-03-17T07:11:35.163
> 
> 标签：java, android, android-activity, state-saving

所以我有一个横向模式的开始游戏布局。当我点击`button a`或`button b`时，一个新的活动将根据我点击的按钮开始。当我点击 时`button a`，我可以添加图片`imagebutton`和编辑玩家的名字。（我正在制作一个排球应用程序）然后当我回到我的开始游戏布局并单击 时`button a`，所有包含球员姓名的图像和文本视图都会恢复到创建新游戏时的状态。

我希望保存我输入的信息。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:42:33.097

决定取决于如果活动被破坏，是否应该保存数据。

通常 saveInstanceState 用于在活动从横向模式转到纵向模式（或返回）时保存数据。

如果您将使用首选项，即使您关闭手机，数据也会永久保存。

# node.js - 使用 node express.js 重定向循环

> ID：15458424
> 
> 赞同：13
> 
> 时间：2013-03-17T07:12:05.803
> 
> 标签：node.js, express

我有一个简单的网页，其中定义了、`/about`和路线。所有路线都可以正常工作，除了. 我立即得到一个重定向循环（）。`/contact``/home``/lessons``/lessons``Error 310 (net::ERR_TOO_MANY_REDIRECTS): There were too many redirects`

这是我的主要`server.js`代码：

```
var port = process.env.PORT || 8888;
var app = require('./app').init(port);
var markdown = require('./markdown');
var lessons = require('./lessons.json').lessons;

// app.use(function(req,res,next) {
//     console.log('adding lessons to locals');
//     res.locals.date = new Date().toLocaleDateString();
//     res.locals.lessons = lessons;
//     next();
// });
// app.use(app.router);

app.get('/', function (req, res) {
    console.log('controller is : home');
    res.locals.controller = 'home';
    res.render('home');
});

app.get('/:controller', function (req, res, next) {
  var controller = req.params.controller;
  console.log('controller is : '+ controller);
  if (controller == 'about' || controller == 'contact') {
    res.locals.controller = controller;
    res.render(controller);
  } else {
      console.log('next was taken!');
      next();
  }
});

app.get('/lessons', function(req, res) {
  res.locals.lessons = lessons;
  console.log('controller is : lessons');
  res.render('lessons');
});

app.get('/lessons/:lesson', function(req, res) {
    console.log('controller is : lesson');
    res.locals.controller = 'lessons';
    res.send('gimmie the lesson');
});

/* The 404 Route (ALWAYS Keep this as the last route) */
app.get('/*', function (req, res) {
    console.log('got 404 request to ' + req.url);
    res.render('404');
}); 
```

`app.js`这是用于服务器初始化的文件：

```
var express = require('express');
var slashes = require('connect-slashes');

exports.init = function (port) {
  var app = express();
  app.use(express.static(__dirname + '/public'));
  // add middleware to remove trailing slash in urls
  app.use(slashes(false));
  app.set('views', __dirname + '/views')
  app.set('view engine', 'ejs');
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.logger());
  app.enable("jsonp callback");
  if ('development' == app.get('env')) {
    app.use(express.errorHandler({
      dumpExceptions: true,
      showStack: true
    }));
    app.use(express.logger({
      format: ':method :url'
    }));
  }

  if ('production' == app.get('env')) {
    app.use(express.errorHandler());
  }

  app.use(function (err, req, res, next) {
    console.log('Oops, something went wrong');
    res.render('500.ejs', {
      locals: {
        error: err
      },
      status: 500
    });
  });

  app.listen(port);

  console.log("Listening on port %d in %s mode", port, app.settings.env);

  return app;
} 
```

我已经尝试过调试该应用程序，`node-inspector`但它没有用，因为该应用程序似乎没有进入任何`app.get`s 来尝试匹配。当我尝试访问时，它立即给我错误`localhost:8888/lessons`

**编辑：**

我想我找到了问题的根源：

*   我的`/public`目录有一个`lessons`文件夹
*   我的`/views`目录有一个`lessons.ejs`看法

当我更改`/public/lessons`为`/public/lessons11`例如时，问题就解决了。有人可以向我解释导致重定向循环的原始场景中的快速流是什么吗？另外，我能做些什么来解决它？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-17T07:35:18.590

有时候是这样的：

*   请求`/lessons`进来；
*   静态中间件看到该`public/lessons`文件夹​​并假定这是预期目标；因为它是一个文件夹，它会生成一个重定向到`/lessons/`（见下文）；
*   静态中间件再次提取该请求，但注意到`index.html`该文件夹​​中没有，并将其交给下一个中间件（`connect-slashes`）；
*   中间件删除尾部`connect-slashes`斜杠并发出重定向到`/lessons`;
*   整个循环再次开始；

您可以防止静态中间件添加斜杠，我认为这将修复您的重定向循环：

```
app.use(express.static(__dirname + '/public', { redirect : false })); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-30T09:32:27.090

您可以尝试使用`express-redirect-loop`中间件。[它使用会话，您可以在https://github.com/niftylettuce/express-redirect-loop](https://github.com/niftylettuce/express-redirect-loop)阅读有关它的更多信息并实现它。

# hadoop - 通过 Flume 将事件数据写入 HDFS 时出错

> ID：15458429
> 
> 赞同：1
> 
> 时间：2013-03-17T07:12:59.593
> 
> 标签：hadoop, cloudera, flume

我正在使用 cdh3 update 4 tarball 进行开发。我已经启动并运行了 hadoop。现在，我还从 cloudera viz 1.1.0 下载了等效的 flume tarball，并尝试使用 hdfs-sink 将日志文件的尾部写入 hdfs。当我运行水槽代理时，它开始正常，但在尝试将新事件数据写入 hdfs 时出错。我找不到比 stackoverflow 更好的小组来发布这个问题。这是我正在使用的水槽配置

```
agent.sources=exec-source
agent.sinks=hdfs-sink
agent.channels=ch1

agent.sources.exec-source.type=exec
agent.sources.exec-source.command=tail -F /locationoffile

agent.sinks.hdfs-sink.type=hdfs
agent.sinks.hdfs-sink.hdfs.path=hdfs://localhost:8020/flume
agent.sinks.hdfs-sink.hdfs.filePrefix=apacheaccess

agent.channels.ch1.type=memory
agent.channels.ch1.capacity=1000

agent.sources.exec-source.channels=ch1
agent.sinks.hdfs-sink.channel=ch1 
```

此外，这是一小段错误，当它接收到新的事件数据并尝试将其写入 hdfs 时，它会显示在控制台中。

```
13/03/16 17:59:21 INFO hdfs.BucketWriter: Creating hdfs://localhost:8020/user/hdfs-user/flume/apacheaccess.1363436060424.tmp
13/03/16 17:59:22 WARN hdfs.HDFSEventSink: HDFS IO error
java.io.IOException: Failed on local exception: java.io.IOException: Broken pipe; Host Details : local host is: "sumit-HP-Pavilion-dv3-Notebook-PC/127.0.0.1"; destination host is: "localhost":8020; 
    at org.apache.hadoop.net.NetUtils.wrapException(NetUtils.java:759)
    at org.apache.hadoop.ipc.Client.call(Client.java:1164)
    at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:202)
    at $Proxy9.create(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:164)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:83)
    at $Proxy9.create(Unknown Source)
    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.create(ClientNamenodeProtocolTranslatorPB.java:192)
    at org.apache.hadoop.hdfs.DFSOutputStream.<init>(DFSOutputStream.java:1298)
    at org.apache.hadoop.hdfs.DFSOutputStream.newStreamForCreate(DFSOutputStream.java:1317)
    at org.apache.hadoop.hdfs.DFSClient.create(DFSClient.java:1215)
    at org.apache.hadoop.hdfs.DFSClient.create(DFSClient.java:1173)
    at org.apache.hadoop.hdfs.DistributedFileSystem.create(DistributedFileSystem.java:272)
    at org.apache.hadoop.hdfs.DistributedFileSystem.create(DistributedFileSystem.java:261)
    at org.apache.hadoop.hdfs.DistributedFileSystem.create(DistributedFileSystem.java:78)
    at org.apache.hadoop.fs.FileSystem.create(FileSystem.java:805)
    at org.apache.hadoop.io.SequenceFile$Writer.<init>(SequenceFile.java:1060)
    at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:270)
    at org.apache.hadoop.io.SequenceFile.createWriter(SequenceFile.java:369)
    at org.apache.flume.sink.hdfs.HDFSSequenceFile.open(HDFSSequenceFile.java:65)
    at org.apache.flume.sink.hdfs.HDFSSequenceFile.open(HDFSSequenceFile.java:49)
    at org.apache.flume.sink.hdfs.BucketWriter.doOpen(BucketWriter.java:190)
    at org.apache.flume.sink.hdfs.BucketWriter.access$000(BucketWriter.java:50)
    at org.apache.flume.sink.hdfs.BucketWriter$1.run(BucketWriter.java:157)
    at org.apache.flume.sink.hdfs.BucketWriter$1.run(BucketWriter.java:154)
    at org.apache.flume.sink.hdfs.BucketWriter.runPrivileged(BucketWriter.java:127)
    at org.apache.flume.sink.hdfs.BucketWriter.open(BucketWriter.java:154)
    at org.apache.flume.sink.hdfs.BucketWriter.append(BucketWriter.java:316)
    at org.apache.flume.sink.hdfs.HDFSEventSink$1.call(HDFSEventSink.java:718)
    at org.apache.flume.sink.hdfs.HDFSEventSink$1.call(HDFSEventSink.java:715)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Broken pipe
    at sun.nio.ch.FileDispatcher.write0(Native Method)
    at sun.nio.ch.SocketDispatcher.write(SocketDispatcher.java:29)
    at sun.nio.ch.IOUtil.writeFromNativeBuffer(IOUtil.java:100)
    at sun.nio.ch.IOUtil.write(IOUtil.java:71)
    at sun.nio.ch.SocketChannelImpl.write(SocketChannelImpl.java:334)
    at org.apache.hadoop.net.SocketOutputStream$Writer.performIO(SocketOutputStream.java:62)
    at org.apache.hadoop.net.SocketIOWithTimeout.doIO(SocketIOWithTimeout.java:143)
    at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:153)
    at org.apache.hadoop.net.SocketOutputStream.write(SocketOutputStream.java:114)
    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)
    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)
    at java.io.DataOutputStream.flush(DataOutputStream.java:106)
    at org.apache.hadoop.ipc.Client$Connection.sendParam(Client.java:861)
    at org.apache.hadoop.ipc.Client.call(Client.java:1141)
    ... 37 more
13/03/16 17:59:27 INFO hdfs.BucketWriter: Creating hdfs://localhost:8020/user/hdfs-user/flume/apacheaccess.1363436060425.tmp
13/03/16 17:59:27 WARN hdfs.HDFSEventSink: HDFS IO error
java.io.IOException: Failed on local exception: java.io.IOException: Broken pipe; Host Details : local host is: "sumit-HP-Pavilion-dv3-Notebook-PC/127.0.0.1"; destination host is: "localhost":8020; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:59:42.177

正如 cloudera 邮件列表中的人所[建议](https://groups.google.com/a/cloudera.org/d/msg/flume-user/dePyEIO-dIY/85gYJ469J2wJ)的那样，此错误的可能原因是：

1.  HDFS 安全模式已打开。尝试运行`hadoop fs -safemode leave`并查看错误是否消失。
2.  Flume 和 Hadoop 版本不匹配。要检查这一点，请将 flume/lib 目录中的 hadoop-core.jar 替换为 hadoop 安装文件夹中的那个。

# php - PayPal结账解决方案混乱

> ID：15458434
> 
> 赞同：2
> 
> 时间：2013-03-17T07:13:53.987
> 
> 标签：php, api, paypal, paypal-subscriptions

我正试图弄清楚我的网站要使用什么支付解决方案。

我想做和 Spotify 一样的事情（[https://www.spotify.com/us/freetrial/](https://www.spotify.com/us/freetrial/) - 你需要登录才能看到它），允许用户选择他们是想用 PayPal 支付还是使用一张信用卡，然后将它们带到付款选择屏幕（在 PayPal 上），然后将它们返回到我的网站以单击确认并购买。

我已经支付了经常性付款（即使我还没有使用它）并且不确定这是否适用于这里。我还集成了快速结帐，但我不知道它是否允许定期付款。

**编辑：**我需要一个单独的令牌来进行定期付款吗？我必须使用旧的定期付款结帐屏幕吗？如何像 Spotify 一样尽可能高效地完成这项工作？以下是我在快速结账后创建定期付款资料的努力：http: [//pastie.org/private/sakzopltnwfv93wwmduqq](http://pastie.org/private/sakzopltnwfv93wwmduqq)

**图表：**

选择购买和贝宝（订阅）-> 选择付款（在贝宝上）-> 确认并付款（我的网站）

这就是 spotify 的结账方式（它不会说首次用户的更新）：
![贝宝 Spotify 结帐](../Images/16c96d2de7d83e966b610111f9361a30.png) 他们是否使用定期付款 + 快速结账？我真的很感激这方面的一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T19:45:36.510

是的，您可以通过 Express Checkout + Recurring Payments 完成此操作。也就是说，如果此人在设置定期付款时选择信用卡，他们将必须创建一个 PayPal 帐户。如果他们支付非经常性结帐，那么他们可以使用信用卡选项而无需创建 PayPal 帐户。

你提到你已经支付了经常性付款..?? 您指的是付款专业版吗？如果是这样，您无需为此付费即可使用 EC + RP。仅当您想直接在您的网站上处理信用卡而不重定向到 PayPal 时，才需要 Pro。这有时会使事情看起来更专业一些，并且还可以让您在使用信用卡时让人们设置定期付款而无需创建 PayPal 帐户。

使用 EC 时，您只需确保包含计费协议参数，以便获取可在 CreateRecurringPaymentsProfile 中工作的令牌。有关详细信息，请参阅[SetExpressCheckout API 参考](https://www.x.com/developers/paypal/documentation-tools/api/setexpresscheckout-api-operation-nvp)。

这现在有点老了，但仍然有用。看看这个[示例快速结帐 api 调用集](http://angelleye.com/temp/sample-set.php)。您会注意到它在所有调用中都使用相同的令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T01:58:36.873

就像 Spotify - 您需要在您的网站上构建该选项。如果用户选择使用信用卡订阅 - 使用直接信用卡的定期付款（见下文）。如果用户选择使用 PayPal 帐户订阅 - 使用带有 PayPal 帐户的定期付款（这是 Andrew 在上面的回复中建议的）。

以下是操作指南：

对于直接信用卡订阅：[https ://www.x.com/developers/paypal/documentation-tools/paypal-payments-pro/how-set-recurring-payments-profile-using-direct-payment](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-pro/how-set-recurring-payments-profile-using-direct-payment)

对于 PayPal 帐户订阅：[https ://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-recurringPaymentProfile-curl-etc](https://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-recurringPaymentProfile-curl-etc)

API 将允许您执行诸如试用期、设置费等操作。例如，这里是如何构建免费增值类型的模型：[https ://www.x.com/developers/paypal/documentation-tools/ express-checkout/how-to/ht_ec-freeTrialRecurringPayments-curl-等](https://www.x.com/developers/paypal/documentation-tools/express-checkout/how-to/ht_ec-freeTrialRecurringPayments-curl-etc)

# qt - 如何使用 QPushButton 打破无限循环？

> ID：15458437
> 
> 赞同：1
> 
> 时间：2013-03-17T07:14:25.223
> 
> 标签：qt

我有一个无限循环，在循环内我想在单击按钮时插入一个状态，它会中断当前循环。我尝试了几种方法，例如：

```
if(ui->btnStop->isDown())
  {
     break;
  }

if(ui->btnStop->isChecked())
      {
         break;
      } 
```

和

```
if(cv::waitKey(10)>=0)
{
    break;
} 
```

但是，它不起作用。我想知道为什么 cv::waitKey 在 Qt 中不起作用，但在非 Qt 项目中它会完美地工作。有没有其他方法可以用 QPushButton 打破无限循环？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:59:09.013

它不起作用，因为事件处理器在执行被锁定在循环中时无法运行。最简单的解决方案是简单地调用`QApplication::processEvents()`每个循环，这将强制事件处理器运行。

```
//  Add a boolean to your class, and a slot to set it.
MyClass
{
    ...
private slots:
    void killLoop() { killLoopFlag_ = true; }

private:
    bool killLoopFlag_;
}

// In the constructor, connect the button to the slot.
connect( ui->btnStop, SIGNAL( clicked() ),
         this, SLOT( killLoop ) );

//  Then when performing the loop, force events to be processed and then
//  check the flag state.
killLoopFlag_ = false;
while ( true ) {
    //  ...Do some stuff.
    QApplication::processEvents();
    if ( killLoopFlag_ ) {
        break;
    }
} 
```

但是您需要问自己：我是否应该在 GUI 线程中进行长时间运行的计算？答案通常是否定的。

# c - 在 C 中使用 icmp 实现 traceroute

> ID：15458438
> 
> 赞同：6
> 
> 时间：2013-03-17T07:14:25.097
> 
> 标签：c, sockets, icmp

我正在尝试通过构造适当的 ip 标头和 icmp 标头来使用 icmp 原始套接字实现 traceroute。我使用的端口号是 7，我已经计算了校验和。每次都会增加跃点限制，并发送一个数据包直到回复消息包含类型 0 的回显回复。

```
#include "libsock"
#include<netinet/ip.h>
#include<netinet/ip_icmp.h>

unsigned short
csum (unsigned short *buf, int nwords)
{
  unsigned long sum;
  for (sum = 0; nwords > 0; nwords--)
    sum += *buf++;
  sum = (sum >> 16) + (sum & 0xffff);
  sum += (sum >> 16);
  return ~sum;
}

int
main (int argc, char *argv[])
{
  if (argc != 2)
    {
      printf ("need destination for tracert\n");
      exit (0);
    }
  int sfd = socket (AF_INET, SOCK_RAW, IPPROTO_ICMP);
  char buf[4096] = { 0 };
  struct ip *ip_hdr = (struct ip *) buf;
  int hop = 0;

  int one = 1;
  const int *val = &one;
  if (setsockopt (sfd, IPPROTO_IP, IP_HDRINCL, val, sizeof (one)) < 0)
    printf ("Cannot set HDRINCL!\n");

  struct sockaddr_in addr;
  addr.sin_port = htons (7);
  addr.sin_family = AF_INET;
  inet_pton (AF_INET, argv[1], &(addr.sin_addr));

  while (1)
    {
      ip_hdr->ip_hl = 5;
      ip_hdr->ip_v = 4;
      ip_hdr->ip_tos = 0;
      ip_hdr->ip_len = 20 + 8;
      ip_hdr->ip_id = 10000;
      ip_hdr->ip_off = 0;
      ip_hdr->ip_ttl = hop;
      ip_hdr->ip_p = IPPROTO_ICMP;
      inet_pton (AF_INET, "172.30.104.59", &(ip_hdr->ip_src));
      inet_pton (AF_INET, argv[1], &(ip_hdr->ip_dst));
      ip_hdr->ip_sum = csum ((unsigned short *) buf, 9);

      struct icmphdr *icmphd = (struct icmphdr *) (buf + 20);
      icmphd->type = ICMP_ECHO;
      icmphd->code = 0;
      icmphd->checksum = 0;
      icmphd->un.echo.id = 0;
      icmphd->un.echo.sequence = hop + 1;
      icmphd->checksum = csum ((unsigned short *) (buf + 20), 4);
      sendto (sfd, buf, 28, 0, SA & addr, sizeof addr);
      char buff[4096] = { 0 };
      struct sockaddr_in addr2;
      socklen_t len = sizeof (struct sockaddr_in);
      recvfrom (sfd, buff, 28, 0, SA & addr2, &len);
      struct icmphdr *icmphd2 = (struct icmphdr *) (buff + 20);
      if (icmphd2->type != 0)
    printf ("hop limit:%d Address:%s\n", hop, inet_ntoa (addr2.sin_addr));
      else
    {
      printf ("Reached destination:%s with hop limit:%d\n",
          inet_ntoa (addr2.sin_addr), hop);
      exit (0);
    }

      hop++;
    }

  return 0;
} 
```

当输入 ie`argv[1]`是`"127.0.0.1"`o/p 是

```
hop limit:0 Address:127.0.0.1

Reached destination:127.0.0.1 with hop limit:1 
```

但是对于我的局域网中存在的其他地址，tracepath 为这些地址工作，我的程序块位于`recvfrom`.

你能指出原因吗？

谢谢你。

这是libsock： -

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<arpa/inet.h>
#include<sys/types.h>
#include<netinet/in.h>
#include<sys/socket.h>
#include<unistd.h>
#include<pthread.h>
#include<poll.h>
#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<sys/types.h>
#include<sys/ipc.h>
#include<fcntl.h>
#include<sys/stat.h>
#include<signal.h>
#include<sys/sem.h>
#include<poll.h>
#include<pthread.h>
#include<sys/select.h>
#include<sys/un.h>
#define SA (struct sockaddr*) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T15:31:08.837

如果您想手动构建 IP 标头，您必须将源地址设置为一个 IP，该 IP 可以路由到您作为目标提供的 IP 地址。例如对于本地主机，您可以将源设置为 127.0.0.1，因为本地主机“可以 ping”本地主机（即那里具有可路由性）。

您发送和接收的尺寸看起来真的太小了。我在我的家用计算机上进行了以下更改（它位于 NAT 设备后面，因此是 192.168.1.0/24 地址）。

```
inet_pton (AF_INET, "192.168.1.168", &(ip_hdr->ip_src));
....
sendto (sfd, buf, sizeof(struct ip) + sizeof(struct icmphdr), 0, SA & addr, sizeof addr);
....
recvfrom (sfd, buff, sizeof(buff), 0, SA & addr2, &len); 
```

示例输出：

```
thuovila@glx:~/src/so$ sudo ./a.out 128.214.248.132
hop limit:0 Address:192.168.1.1
hop limit:1 Address:192.168.1.1
hop limit:2 Address:91.156.128.1
hop limit:3 Address:139.97.9.58
hop limit:4 Address:139.97.6.209
hop limit:5 Address:139.97.6.250
hop limit:6 Address:193.110.224.14
hop limit:7 Address:193.166.255.93
Reached destination:128.214.248.132 with hop limit:8 
```

# c# - 如何按对象的属性对列表进行排序

> ID：15458441
> 
> 赞同：0
> 
> 时间：2013-03-17T07:14:35.210
> 
> 标签：c#, list, sorting

如何`List<ABC>`按`c1`元素升序排序？非常感谢！

```
public class ABC
{
    public string c0 { get; set; }
    public string c1 { get; set; }
    public string c2 { get; set; }
}
public partial class MainWindow : Window
{
    public List<ABC> items = new List<ABC>();
    public MainWindow()
    {
        InitializeComponent();
        items.Add(new ABC
        {
            c0 = "1",
            c1 = "DGH",
            c2 = "yes"
        });
        items.Add(new ABC
        {
            c0 = "2",
            c1 = "ABC",
            c2 = "no"
        });
        items.Add(new ABC
        {
            c0 = "3",
            c1 = "XYZ",
            c2 = "yes"
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T07:16:03.947

这个怎么样：

```
var sortedItems = items.OrderBy(i => i.c1); 
```

这将返回一个`IEnumerable<ABC>`，如果您需要一个列表，请添加一个`ToList`：

```
List<ABC> sortedItems = items.OrderBy(i => i.c1).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T07:16:16.003

```
List<ABC> _sort = (from a in items orderby a.c1 select a).ToList<ABC>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-17T07:19:55.347

尝试类似：

```
var sortedItems = items.OrderBy(itm => itm.c0).ToList();  // sorted on basis of c0 property
var sortedItems = items.OrderBy(itm => itm.c1).ToList();  // sorted on basis of c1 property
var sortedItems = items.OrderBy(itm => itm.c2).ToList();  // sorted on basis of c2 property 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-17T07:16:26.793

```
.OrderBy(x => x.c1); 
```

（或`.OrderByDescending`）

是的，LINQ 让它变得如此简单。

# android - 在 Windows 7 (32-) 中连接 Eclipse Helios 和 Android 插件

> ID：15458448
> 
> 赞同：0
> 
> 时间：2013-03-17T07:15:32.390
> 
> 标签：android, eclipse, sdk, helios, adk

我安装了**Eclipse Helios**软件。我还下载**了 Android SDK Manager**。我在 SDK 中安装了一些。当我点击**帮助---> 安装新软件**并点击“添加”按钮。我被问到名称和位置。我将名称指定为 ADT 插件，并将位置指定为“ [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/) ”。**但它表明在存储库**中找不到该链接。我应该创建一个 Android 项目。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:50:41.343

阅读 [http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)上的故障排除安装， 它清楚地说

*如果 Eclipse 找不到包含 ADT 插件的远程更新站点，请尝试将远程站点 URL 更改为使用 http，而不是 https。也就是说，将远程站点的位置设置为： http: [//dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

*如果您使用防火墙，请确保对代理进行某些设置...

这里也是关于你的问题的很好的讨论 [问题安装 ADT Plugin for Eclipse](https://stackoverflow.com/questions/7164642/problem-installing-the-adt-plugin-for-eclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:38:57.590

在杂项部分的设置菜单下检查 - 强制 https://... 使用 http://... 获取源并重试.. 我认为这可能会有所帮助..

# asp.net - 如何绑定列表 到 ASP.NET 中的 GridView？

> ID：15458452
> 
> 赞同：0
> 
> 时间：2013-03-17T07:16:12.463
> 
> 标签：asp.net

我正在使用 API 并将返回的解析数据存储到`List`. 目前我正在显示`ListView`. 我无法在`GridView`. 谁能指导我怎么做？

这是我的 aspx.cs 代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        ComodityList obj_comodity_in = (ComodityList)Session["comodity_list"];
        Label1.Text = obj_comodity_in.status_code;
        Label2.Text = obj_comodity_in.count.ToString();

        //ComodityList obj_comodity_in = (ComodityList)Session["comodity_list"];

        List<String> commodity_names = null;
        getComodityNames(out commodity_names, obj_comodity_in);
        ListView1.DataSource = commodity_names;
        ListView1.DataBind();   
    }
    private void getComodityNames(out List<String> commodity_names, ComodityList cl)
    {
        commodity_names = new List<string>();
        foreach (Commodity c in cl.data)
        {
            commodity_names.Add(c.commodity);
            commodity_names.Add(c.state);
            commodity_names.Add(c.market);
            commodity_names.Add(c.Maximum_Price.ToString());
            commodity_names.Add(c.Minimum_Price.ToString());
            commodity_names.Add(c.Modal_Price.ToString());
            commodity_names.Add(c.origin);
            commodity_names.Add(c.unit);
            commodity_names.Add(c.variety);

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:07:57.597

将[AutoGenerateColumns](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.autogeneratecolumns.aspx)属性设置为 true 将对您有所帮助。

默认.aspx：

```
 <asp:GridView ID="GridView1" runat="server" Width="95%" autogeneratecolumns = "false"> 
```

默认.aspx.cs：

```
public partial class _Default : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        List<string> s = new List<string>() { "a", "b", "c" };
        this.GridView1.DataSource = s;
        this.GridView1.DataBind();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:54:17.127

如果您不想更改 API（您仍想返回字符串列表）并且需要使用网格，您可以创建一个包含您已经拥有的属性的新类，`Commodity`并使用列表字符串数据简单地重新水化该类. 每个新的“商品”类都可以进入一个新的`List<Commodity>`，您可以将其绑定到网格。

另一方面 - 如果可以选择，最好重新考虑您实际尝试实现的目标，然后重新设计 API。

# javascript - 单击链接上的处理程序不起作用

> ID：15458454
> 
> 赞同：0
> 
> 时间：2013-03-17T07:16:26.397
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我有一个 chrome 扩展，其中有

我调用 jquery.js、popup.js 和 link.js 的 popup.html

```
 ...
    <script src="jquery.js"></script>
    <script src="popup.js"></script>
    <script src="link.js"></script>
  </head> 
```

popup.js

```
var streamGenerator = {

  /* Twitch URL to the top 20 streams */
  searchOnTwitch_: 'https://api.twitch.tv/kraken/streams?limit=20',

  /* XHR Request to grab those streams */
  requestStreams: function() {
    var req = new XMLHttpRequest();
    req.open("GET", this.searchOnTwitch_, true);
    req.onload = this.showStreams_;
    req.send(null);
  },

  /* onload event inserting the streams into the DOM */
  showStreams_: function(e) {
    var streams = JSON.parse(e.target.responseText).streams;

    for (var i=0; i < streams.length; i++) {
      var stream = {
        game: streams[i].game,
        name: streams[i].channel.name,
        viewers: streams[i].viewers,
        link: streams[i].channel.url,
      };

      $('tbody').append('<tr>'
        + '<td>' + stream.game + '</td>'
        + '<td>' + '<a href=' + stream.link + '>' + stream.name + '</a></td>'
        + '<td>' + stream.viewers + '</td></a>'
      );
    }
  }
};

document.addEventListener('DOMContentLoaded', function() {
  streamGenerator.requestStreams();
}); 
```

然后是 link.js

```
$(function() {
  $('a').click(function(){
    chrome.tabs.create({url: $(this).attr('href')});
  });
}) 
```

弹出窗口有效并显示它应该显示的内容，但链接不会打开新选项卡。

如果我去 chrome 的控制台，我不会收到任何错误，但如果我复制/粘贴 link.js jquery，链接会在之后工作；

我究竟做错了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:55:46.940

您的代码`popup.js` *在* `link.js`. 相关部分按以下顺序执行：

```
// popup.js
$(function() {
    $('a').click( ... );
})
// link.js
document.addEventListener('DOMContentLoaded', function() {
    streamGenerator.requestStreams(); //<-- Creates the links
}); 
```

`$(func)`大致等于`document.addEventListener('DOMContentLoaded', func)`，所以你正在做的实际上是这样的：

```
// Run after the DOMContentLoaded "domready" event:
$('a').click(...);
streamGenerator.requestStreams(); // Creates the links 
```

首先，您将`click`事件绑定到所有现有的锚点（无）。此后，您将添加新链接。这个顺序显然行不通。

它可以通过交换 and 的顺序来解决`popup.js`，`link.js`或者通过使用[事件委托](https://stackoverflow.com/tags/event-delegation/info)来解决：

```
$(document).on('click', 'a', function() {
    chrome.tabs.create({url: this.href});
}); 
```

# actionscript-3 - as2中是否有类似URLStream的方法？

> ID：15458458
> 
> 赞同：0
> 
> 时间：2013-03-17T07:16:53.960
> 
> 标签：actionscript-3, flash, actionscript, actionscript-2, urlstream

我需要从服务器连续接收数据到闪存客户端，并且可以在 as3 中使用以下代码：

```
 public class ASHXTest extends Sprite
    {
        public function ASHXTest()
        {
            this.init();
        }

        private var urlStream:URLStream;
        private var outField:TextField;

        private function init():void
        {

            var req:URLRequest = new URLRequest("http://5.9.121.41/Handler.ashx");
            urlStream = new URLStream  ;
            urlStream.addEventListener(ProgressEvent.PROGRESS,onStreamProgress);
            urlStream.addEventListener(SecurityErrorEvent.SECURITY_ERROR,onError);
            urlStream.addEventListener(IOErrorEvent.IO_ERROR,onError);
            urlStream.load(req);

            outField = new TextField  ;
            outField.autoSize = "left";
            this.addChild(outField);
        }
        protected function onError(event:Event):void
        {
            outField.text = event.toString();
        }
        protected function onStreamProgress(event:ProgressEvent):void
        {
            var data:String = urlStream.readUTFBytes(urlStream.bytesAvailable);
            outField.appendText(data + "\n");
        }
    } 
```

不幸的是，我用 as2 编写的项目，是否可以在 flash as2 中完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:19:33.620

自从我使用它以来已经有一段时间了，但我认为 XMLSocket 可能是你想要的？我不认为它实际上不需要使用xml，但可以只是一个套接字。

文档链接：[http ://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000442.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000442.html)

# vb.net - VB.NET DownloadFileAsync 触发完成事件但不下载

> ID：15458463
> 
> 赞同：1
> 
> 时间：2013-03-17T07:17:52.127
> 
> 标签：vb.net, file, asynchronous, download, progress

我正在尝试下载 .zip 文件来为我的游戏制作自动更新程序。它需要显示进步。我按照在线教程获得了实际下载器的这段代码：

```
 Dim SaveDirectory As String = "C:\Program Files (x86)\MyGame\"
    Dim client As WebClient = New WebClient
    AddHandler client.DownloadProgressChanged, AddressOf client_ProgressChanged
    AddHandler client.DownloadFileCompleted, AddressOf client_DownloadCompleted
    client.DownloadFileAsync(New Uri("https://example.com/game/download/latest.zip"), SaveDirectory) 
```

我现在的问题是，当我运行 Windows 窗体应用程序时，会触发 DownloadFileCompleted 事件，但由于某种原因文件**没有**下载。

它大约是一个 34 MB 的 .zip 文件。任何帮助表示赞赏，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:43:56.897

当`DownloadFileCompleted`被解雇时，请检查一些事情。

成功下载

*   `e.Cancelled`一定是假的。
*   `e.Error`应该为空

如果`e.Error`不是`null`，则它包含 Exception 对象，该对象描述了错误的详细信息`Async Operation`

# javascript - 使用 Javascript 在选择框中执行算术计算

> ID：15458469
> 
> 赞同：3
> 
> 时间：2013-03-17T07:18:59.327
> 
> 标签：javascript, html

我有一个这样的案例：

![在此处输入图像描述](../Images/6e0e09deaeb723bbc875fb0c3e231e0d.png)

如何在选择示例A = 3和B = 5时会这样做，将自动更新8列为C列中，依此类推，为不同的列和行？

非常感谢您的帮助。提前谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:23:35.190

试试这个：

1.  调用“a1”、“a2”、“b1”、“b2”等选择框

2.  将 C 中的单元格称为“c1”、“c2”

3.  使`onchange`选择框的事件如下：

    ```
    function update() {
        var id = this.id.substring(1);
        var value1 = parseInt(document.getElementById("a" + id).value);
        var value2 = parseInt(document.getElementById("b" + id).value);
        document.getElementById("c" + id).innerHTML = value1 + value2;
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T07:48:10.953

不错的任务。这是我如何尝试解决它的版本：

```
var table = document.getElementById('calc'),
    sel   = table.getElementsByTagName('select');

for (var i = sel.length; i--; ) {
    sel[i].onchange = function() {
        var row  = this.parentNode.parentNode.rowIndex,
            cell = this.parentNode.cellIndex,
            val1 = +this.options[this.selectedIndex].value,
            val2 = +table.rows[row].cells[1 - cell].children[0].value;

        table.rows[row].cells[2].innerHTML = val1 + val2;
    };
} 
```

[http://jsfiddle.net/M4jCJ/1/](http://jsfiddle.net/M4jCJ/1/)

这是一个基本的实现，您可能需要调整一些内容以匹配您的 HTML 结构等。

# c++ - 这是编译错误 typedef int (*j)() throw(A) 吗？

> ID：15458475
> 
> 赞同：6
> 
> 时间：2013-03-17T07:20:25.243
> 
> 标签：c++, visual-studio-2012, typedef

```
#include <iostream>

class A {};

typedef int (*j)() throw(A);  

int f() 
{
    std::cout << "function f" << std::endl;
    return 0;
}

int main()
{ 
    j y = f;
    y();
} 
```

在所有站点中，Stroustrup 也说会有编译错误，但它可以编译。标准有变化吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:41:59.930

我知道这不是这个问题的答案 -

MSVC 2010（我拥有的）没有抛出错误，编译良好并且工作顺利

G++(GNU) 说`error: 'j' declared with an exception specification`

叮当说`error: exception specifications are not allowed in typedefs`

底线：MSVC 中的编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:08:18.140

异常规范不是函数类型的一部分。例如，您不能超载它们；并且指向函数的指针不携带异常规范。正如@Aniket 所说，他们的编译器接受该声明是微软的一个错误。

# .net - 给定以下代码，我应该编写哪些测试？

> ID：15458476
> 
> 赞同：3
> 
> 时间：2013-03-17T07:20:27.453
> 
> 标签：.net, unit-testing

在编写单元测试时，我最挣扎的一件事是我要测试什么，不测试什么。

所以给定下面的代码，我应该写什么测试：

```
public static class Enforce
{
    public static T ArgumentNotNull<T>(T parameter, string parameterName) where T : class
    {
        if (parameterName.IsNullOrWhiteSpace())
            throw new ArgumentNullException("parameterName");

        if (parameter.IsNull())
            throw new ArgumentNullException(parameterName);

        return parameter;
    }

    public static string ArgumentNotNullOrEmpty(string parameter, string parameterName)
    {
        ArgumentNotNull(parameter, parameterName);

        if (parameter.IsNullOrEmpty())
            throw new ArgumentException(parameterName);

        return parameter;
    }

    public static string ArgumentNotNullOrWhiteSpace(string parameter, string parameterName)
    {
        ArgumentNotNull(parameter, parameterName);

        if (parameter.IsNullOrWhiteSpace())
            throw new ArgumentException(parameterName);

        return parameter;
    }

    public static T NotNull<T>(T instance) where T : class
    {
        instance.IfNullThrow<T, NullReferenceException>(String.Format(EnforceResources.TypeNotNull, typeof(T).FullName));

        return instance;
    }
} 
```

}

我应该为`ArgumentNotNull<T>`测试抛出的异常编写一个测试，然后再编写一个测试未抛出的异常吗？我想我的问题是，我是否应该编写测试预期的测试然后完全相反？

```
 [Fact]
    public void ShouldThrowArgumentNullException()
    {
        object arg = null;

        Assert.Throws<ArgumentNullException>(() => { Enforce.ArgumentNotNull(arg, "arg"); });
    }

    [Fact]
    public void ShouldNotThrowArgumentNullException()
    {
        var arg = "Test";

        Assert.DoesNotThrow(() => { Enforce.ArgumentNotNull(arg, "arg"); });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:37:05.770

您应该尽最大努力测试您的所有代码。这意味着所有公共方法和其中的场景都可以尽可能多地覆盖其所有内部逻辑。

所以你应该编写 3 个测试：一个用于第一个异常，一个用于第二个异常，一个不抛出任何异常。

关于这些测试的命名约定，这可能很有趣：[https ://stackoverflow.com/a/1594049/1373170](https://stackoverflow.com/a/1594049/1373170)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:42:27.103

单元测试的概念是确保您的代码完全按照您的预期工作，

因此，如果您希望它抛出异常，则应测试它是否存在正确的异常。

以下是有关编写单元测试的一些基本概念和技巧：

[http://www.slideshare.net/homespothq/unit-testing-concepts-and-best-practices](http://www.slideshare.net/homespothq/unit-testing-concepts-and-best-practices)

# asp.net-mvc - Response.WriteFile() - 不工作 asp net mvc 4.5

> ID：15458477
> 
> 赞同：0
> 
> 时间：2013-03-17T07:20:47.363
> 
> 标签：asp.net-mvc, savefiledialog, response.write

我查看了许多资源，以下应该可以工作，但是我的另存为对话框从未显示（不是特定于浏览器）：

```
Response.ContentType = "application/octet-stream";
string downloadName = "Request "+request.RequestID+ "_researchExport.doc";
Response.AddHeader("Content-Length", 
    new System.IO.FileInfo(FileName).Length.ToString());
Response.AddHeader("Content-Disposition", 
    string.Format("attachment; filename={0};", downloadName));
Response.WriteFile(FileName);
Response.Flush();
Response.End(); 
```

该文件肯定存在。我还尝试了以下方法：

1.  `Response.TransmitFile(FileName)`改为使用

2.  离开了`Response.End()`

3.  省略`Content-Length`标题

4.  使用`this.ControllerContext.HttpContext.Response`

任何帮助将**不胜**感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:39:16.367

不确定这是否是您唯一的问题，但`Content-Disposition`标题[中的文件名应该是 a`quoted-string`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html#sec19.5.1)，因此您需要在它周围添加引号，特别是因为它包含空格；

```
Response.AddHeader("Content-Disposition", 
    string.Format("attachment; filename=\"{0}\"", downloadName)); 
```

附带说明一下，`Response.End()`还会刷新缓冲区，因此您`Response.Flush()`是多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T18:48:28.067

解决了这个问题。我正在使用 Ajax 从我的一个视图中调用此函数。这不起作用（我不确定为什么），但我认为这可能是因为我有多个控制器。调用它可以`@HTML.ActionLink()`正确显示提示。

# java - 在网页中嵌入 Java Applet

> ID：15458480
> 
> 赞同：0
> 
> 时间：2013-03-17T07:21:17.410
> 
> 标签：java, html, applet, classnotfoundexception

我已经构建了一个 java 小程序，并试图将它嵌入到我服务器上的 HTML 文件中。当我访问该页面时，小程序尝试加载，但随后因`ClassNotFoundException`on崩溃`.applet.BookingApplet.class`（这是小程序的名称，小程序所在`applet`的包的名称在哪里。）

```
 <body>
    <script src ="http://java.com/js/deployJava.js"></script>
    <script>
        var attributes = {
        codebase: '/webapp/HelpSessions.jar', 

       code: '/webapp/HelpSessions.jar/applet/BookingApplet.class',
       archive: '/lib/javax.persistence.jar, /lib/javax.validation-1.0.0.GA.jar, /lib/joda-time-2.1.jar, /lib/mail.jar, /lib/mysql-connector-java-5.1.23-bin.jar',
       width: 800, 
       height: 600        
        };
        var version = "1.6"
        deployJava.runApplet(attributes, version);
        </script>
</body> 
```

这是我第一次尝试做这样的事情，所以我确信这只是我在 HTML 中引用类文件的方式的语法错误。如果需要，我可以发布任何其他代码，但我认为它不相关，因为小程序在 AppletViewer 中运行良好。

我今晚不会睡觉，直到我让这东西运转起来……

编辑：为了简化事情，我尝试将所有内容都移到一个文件夹中，这样我就不必处理代码库了。这是它现在的样子：

```
<html>
<head>
    <title>Schedule a Help Session</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body>
    <script src ="http://java.com/js/deployJava.js"></script>
    <script>
        var attributes = {

       code: '/applet/BookingApplet.class',
       archive: '/lib/javax.persistence.jar, /lib/javax.validation-1.0.0.GA.jar, /lib/joda-time-2.1.jar, /lib/mail.jar, /lib/mysql-connector-java-5.1.23-bin.jar',
       width: 800, 
       height: 600        
        };
        var version = "1.6"
        deployJava.runApplet(attributes, version);
        </script>
</body> 
```

我得到了相同的 ClassNotFoundException。此外，我可以在 java 控制台的详细信息中看到一个 InterruptedException，但它并没有告诉我代码中的哪个位置（如果有的话）是导致异常的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:58:40.093

将属性更改`code`为“applet/BookingApplet.class”。目前您正在使用“/applet/BookingApplet.class”。

当 Java 读取 URL 时，它会将任何 '/':s 转换为 '.':s。这将使 URL “/applet/BookingApplet.class” “.applet.BookingApplet.class”。“applet/BookingApplet.class”将变为“applet.BookingApplet.class”，这是正确的。

只要记住设置`codebase`为指向“applet”目录所在的目录即可。

# ios - 在 applicationdidfinishlaunch 期间将 DB 从 bundle 复制到 Documents 目录

> ID：15458482
> 
> 赞同：1
> 
> 时间：2013-03-17T07:21:28.447
> 
> 标签：ios, objective-c

当我的应用程序启动时，我会检查 Documents 目录中是否存在数据库。如果没有，那么我想将主包中的数据库复制到应用程序的 Documents 目录中。

看起来很简单，但是只有当我在模拟器中运行我的代码时，我才会收到一个可可错误代码 4。可可错误代码表示文件不存在。我已将其范围缩小到很可能是代码中此时不存在 Documents 目录。

这是我的代码：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *appDBPath = [documentsDirectory stringByAppendingPathComponent:@"app.db"];

if([[NSFileManager defaultManager] fileExistsAtPath:appDBPath]) {
    //PERFORM DATA MIGRATIONS IF ANY EXIST
}
else {
    NSString *appDBBundlePath = [[NSBundle mainBundle] pathForResource:@"app" ofType:@"db"];
    NSError *error;
    if(![[NSFileManager defaultManager] copyItemAtPath:appDBBundlePath toPath:appDBPath error:&error]) {
        UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                        message:[error localizedDescription]
                                                       delegate:nil
                                              cancelButtonTitle:@"ok"
                                              otherButtonTitles:nil];
        [alert show];
    }
} 
```

我一直认为一旦安装了应用程序，Documents 目录就会存在。我究竟做错了什么？注意：我可以使用物理设备上的应用程序将数据库从捆绑包复制到 Documents 目录。

# c++ - C++11 中的高阶函数

> ID：15458483
> 
> 赞同：10
> 
> 时间：2013-03-17T07:21:44.197
> 
> 标签：c++, c++11, lambda

我正在尝试使用 C++11 中可用的新匿名函数编写通用折叠函数，这就是我所拥有的：

```
template<typename T>
T foldl(std::function<T(T,T)> f, T initial, std::vector<T> items) {
    T accum = initial;
    for(typename std::vector<T>::iterator it = items.begin(); it != items.end(); ++it) {
        accum = f(accum, (*it));
    }
    return accum;
} 
```

以下尝试使用它：

```
std::vector<int> arr;
arr.assign(8, 2);
foldl([] (int x, int y) -> int { return x * y; }, 1, arr); 
```

导致错误：

```
main.cpp:44:61: error: no matching function for call to 'foldl(main(int, char**)::<lambda(int, int)>, int, std::vector<int>&)'
main.cpp:44:61: note: candidate is:
main.cpp:20:3: note: template<class T> T foldl(std::function<T(T, T)>, T, std::vector<T>)
main.cpp:20:3: note:   template argument deduction/substitution failed:
main.cpp:44:61: note:   'main(int, char**)::<lambda(int, int)>' is not derived from 'std::function<T(T, T)>' 
```

在我看来， using`std::function`不是定义`f`. 我该如何纠正？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-17T07:31:21.423

您的代码不是很通用。不需要`function`,`vector`或任何类似的东西。通常，在 C++ 中，函数将位于参数列表的末尾（对于 lambda 尤其重要，因为它们可能很大）。

所以最好这样写（即：更标准）：

```
template<typename Range, typename Accum>
typename Range::value_type foldl(const Range &items, const typename Range::value_type &initial, Accum f)
{
    typename Range::value_type accum = initial;
    for(const auto &val : items) {
        accum = f(accum, val);
    }

    return accum;
} 
```

或者你可以[使用`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)which 做*完全相同的事情*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T07:25:38.473

我不确定为什么这个模板会失败，但是切换到对函数使用模板参数而不是`std::function<>`似乎工作得很好。

```
template<typename T, typename F>
T foldl(F f, T initial, std::vector<T> items) { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T00:03:13.450

如果您只是将其转换为`std::function`第一个，然后使用它，它将起作用：

```
std::vector<int> arr;
arr.assign(8, 2);
std::function<int(int,int)> f = [] (int x, int y) -> int { return x * y; };
foldl(f, 1, arr); 
```

问题是 lambda 与`std::function`. 每个 lambda 都是一个单独的类型。尽管 lambda（和所有其他函数对象）可以转换为`std::function`具有适当类型参数的 a，但编译器不知道什么模板参数`T`可以使其可转换。（我们碰巧知道`T`=`int`会起作用，但没有通用的方法来解决它。）所以它无法编译它。

# php - 计算 css/js/img 源的加载时间

> ID：15458484
> 
> 赞同：0
> 
> 时间：2013-03-17T07:21:52.427
> 
> 标签：php

我正在尝试计算一个 css/javascript/img url 的加载时间（例如[http://g2.delfi.lt/scms/?g=delfi-fp.css&1362823940](http://g2.delfi.lt/scms/?g=delfi-fp.css&1362823940)）。

我尝试了 pingdom，它计算了 749 毫秒，我想知道他们是如何计算的。这是他们所做的所有计算（我认为）：

```
DNS - 443ms
Connect - 589ms
Send - 1ms
Wait - 152ms
Receive - 1ms
Total - 1.19s 
```

我不明白他们是如何从 1.19 秒得到 0.749 秒的。他们从什么中减去了什么？

我尝试使用 curl 来计算加载时间，但它没有给我我期望的结果：

```
$src_array = array();
    foreach ($array as $url1) {
        $curl1 = curl_init();   
        curl_setopt($curl1, CURLOPT_URL, $url1); 
        curl_setopt($curl1, CURLOPT_RETURNTRANSFER, TRUE); 
        curl_setopt($curl1, CURLOPT_CONNECTTIMEOUT_MS, 300); 
        curl_setopt($curl1, CURLOPT_TIMEOUT_MS, 300);
        curl_exec($curl1); //curl ivykdymas
        $contime1 = curl_getinfo($curl1, CURLINFO_TOTAL_TIME);
        $src_array[] = $contime1;
    }

$gg = (array_sum($src_array)); 
```

如何计算 1 个特定 js/css/img 源的加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:05:51.803

这是计算。

```
DNS: 443ms
Connect: 589ms + Send: 1ms + Wait: 152ms + Receive: 1ms = 743ms
Total = 1.19s
Grand total = 1.19s - 443ms = 747ms 
```

# objective-c - 如何在 Mac 应用程序中朗读文本？

> ID：15458488
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:22:28.750
> 
> 标签：objective-c, macos, cocoa

我正在制作一个 Xcode 应用程序，我需要能够按下按钮并阅读一些文本。如果有人可以向我提供我需要在 IBAction 按钮的括号内使用的代码行，那将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T07:24:16.203

试试这个：

你需要一个财产

```
@property(strong) NSSpeechSynthesizer *speechSynth; 
```

在您的 init 方法中：

```
_speechSynth = [[NSSpeechSynthesizer alloc] initWithVoice:nil]; 
```

开始演讲：

```
- (IBAction)sayIt:(id)sender{
    NSString *string = [self.textField stringValue];
    // Is the string zero-length?
    if ([string length] == 0) {
        NSLog(@"string from %@ is of zero-length", self.textField);
        return;
    }
    [self.speechSynth startSpeakingString:string];
    NSLog(@"Have started to say: %@", string);
} 
```

停止发言：

```
- (IBAction)stopIt:(id)sender {
    NSLog(@"stopping");
    [self.speechSynth stopSpeaking];
} 
```

# android - 单个活动上的Android多个Listviews不显示项目

> ID：15458490
> 
> 赞同：1
> 
> 时间：2013-03-17T07:22:49.543
> 
> 标签：android, android-layout, android-listview, android-adapter

我有一个包含 2 个 Listviews-PairedListView 和 NewDevicesListView 以及一个扫描按钮的活动。最初，onCreate() 活动应该显示所有蓝牙配对设备和扫描按钮。按下扫描按钮时，它应该显示带有新设备的第二个列表视图。为此，我使用了多个线性布局。但是，我的问题是两个列表都没有显示任何项目。

这是布局-

```
 <devicelist.layout>
                <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                tools:context=".DeviceList"
                tools:ignore="ExtraText" >

              <LinearLayout 
                  android:layout_width="fill_parent"
                  android:layout_height="fill_parent"
                  android:layout_weight="1" >

                 <TextView android:id="@+id/title_paired_devices"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/title_paired_devices"
                    android:visibility="gone"
                    android:background="#666"
                    android:textColor="#fff"
                    android:paddingLeft="5dp"

                />
                <ListView android:id="@+id/paired_devices"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:stackFromBottom="true"

                />
            </LinearLayout>

            <LinearLayout android:layout_weight="1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent">

                <TextView android:id="@+id/title_new_devices"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/title_other_devices"
                    android:visibility="gone"
                    android:background="#666"
                    android:textColor="#fff"
                    android:paddingLeft="5dp"
                />
                <ListView android:id="@+id/new_devices"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:stackFromBottom="true"

                />
                </LinearLayout>

                <Button android:id="@+id/button_scan"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:text="@string/button_scan"

                />

            </LinearLayout> 
```

这是java类

```
<devicelist.java>
                package org.example.spark;

            import java.util.Set;

            import android.app.Activity;
            import android.bluetooth.BluetoothAdapter;
            import android.bluetooth.BluetoothDevice;
            import android.content.BroadcastReceiver;
            import android.content.Context;
            import android.content.Intent;
            import android.content.IntentFilter;
            import android.os.Bundle;
            import android.view.Menu;
            import android.view.View;
            import android.view.View.OnClickListener;
            import android.view.Window;
            import android.widget.AdapterView;
            import android.widget.AdapterView.OnItemClickListener;
            import android.widget.ArrayAdapter;
            import android.widget.Button;
            import android.widget.ListView;
            import android.widget.TextView;

            public class DeviceList extends Activity {
                   // Return Intent extra
                public static String EXTRA_DEVICE_ADDRESS = "device_address";

                // Member fields
                private BluetoothAdapter mBtAdapter;
               private ArrayAdapter<String> mPairedDevicesArrayAdapter;
                private ArrayAdapter<String> mNewDevicesArrayAdapter;
                @Override
                protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);

                     // Setup the window
                    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
                    setContentView(R.layout.activity_devicelist);

                    // Set result CANCELED incase the user backs out
                    setResult(Activity.RESULT_CANCELED);

                    // Initialize the button to perform device discovery
                   Button scanButton = (Button) findViewById(R.id.button_scan);
                   scanButton.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            doDiscovery();
                      v.setVisibility(View.GONE);
                     }
                  });

                    // Initialize array adapters. One for already paired devices and
                    // one for newly discovered devices
               mPairedDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);
                mNewDevicesArrayAdapter = new ArrayAdapter<String>(this, R.layout.device_name);

                    // Find and set up the ListView for paired devices
                   ListView pairedListView = (ListView) findViewById(R.id.paired_devices);
                  pairedListView.setAdapter(mPairedDevicesArrayAdapter);
                pairedListView.setOnItemClickListener(mDeviceClickListener);

                    // Find and set up the ListView for newly discovered devices
               ListView newDevicesListView = (ListView) findViewById(R.id.new_devices);
                newDevicesListView.setAdapter(mNewDevicesArrayAdapter);
              newDevicesListView.setOnItemClickListener(mDeviceClickListener);

                    // Register for broadcasts when a device is discovered
                    IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
                    this.registerReceiver(mReceiver, filter);

                    // Register for broadcasts when discovery has finished
                    filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
                    this.registerReceiver(mReceiver, filter);

                    // Get the local Bluetooth adapter
                    mBtAdapter = BluetoothAdapter.getDefaultAdapter();

                    // Get a set of currently paired devices
                    Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

                    // If there are paired devices, add each one to the ArrayAdapter
                 if (pairedDevices.size() > 0) {
                     findViewById(R.id.title_paired_devices).setVisibility(View.VISIBLE);
                  for (BluetoothDevice device : pairedDevices) {
                mPairedDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
             } }
                 else {
               String noDevices = getResources().getText(R.string.none_paired).toString();
                   mPairedDevicesArrayAdapter.add(noDevices);
                 }
                }

                @Override
                protected void onDestroy() {
                    super.onDestroy();

                    // Make sure we're not doing discovery anymore
                    if (mBtAdapter != null) {
                        mBtAdapter.cancelDiscovery();
                    }

                    // Unregister broadcast listeners
                    this.unregisterReceiver(mReceiver);
                }

                /**
                 * Start device discover with the BluetoothAdapter
                 */
                private void doDiscovery() 
                {

                    // Indicate scanning in the title
                    setProgressBarIndeterminateVisibility(true);
                    setTitle(R.string.scanning);

                    // Turn on sub-title for new devices
                   findViewById(R.id.title_new_devices).setVisibility(View.VISIBLE);

                    // If we're already discovering, stop it
                    if (mBtAdapter.isDiscovering())
                    {
                        mBtAdapter.cancelDiscovery();
                    }

                    // Request discover from BluetoothAdapter
                    mBtAdapter.startDiscovery();
                }

                // The on-click listener for all devices in the ListViews
                private OnItemClickListener mDeviceClickListener = new OnItemClickListener() {
                    public void onItemClick(AdapterView<?> av, View v, int arg2, long arg3) {
                        // Cancel discovery because it's costly and we're about to connect
                        mBtAdapter.cancelDiscovery();

                        // Get the device MAC address, which is the last 17 chars in the View
                        String info = ((TextView) v).getText().toString();
                        String address = info.substring(info.length() - 17);

                        // Create the result Intent and include the MAC address
                        Intent intent = new Intent();
                        intent.putExtra(EXTRA_DEVICE_ADDRESS, address);

                        // Set result and finish this Activity
                        setResult(Activity.RESULT_OK, intent);
                        finish();
                    }
                };

                // The BroadcastReceiver that listens for discovered devices and
                // changes the title when discovery is finished
                private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
                    @Override
                    public void onReceive(Context context, Intent intent) {
                        String action = intent.getAction();

                        // When discovery finds a device
                        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                            // Get the BluetoothDevice object from the Intent
                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                          //   If it's already paired, skip it, because it's been listed already
                if(device.getBondState()!= BluetoothDevice.BOND_BONDED)
                    mNewDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());

                        // When discovery is finished, change the Activity title
                } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
                  setProgressBarIndeterminateVisibility(false);
                  setTitle(R.string.select_device);
                            if (mNewDevicesArrayAdapter.getCount() == 0) {
                  String noDevices = getResources().getText(R.string.none_found).toString();
               mNewDevicesArrayAdapter.add(noDevices);
                            }
                        }
                 }
                };

                @Override
                public boolean onCreateOptionsMenu(Menu menu) {
                    // Inflate the menu; this adds items to the action bar if it is present.
                    getMenuInflater().inflate(R.menu.activity_devicelist, menu);
                    return true;
                }

            } 
```

谁能告诉我哪里出错了？

编辑

嘿，我为两个适配器修改了如下代码..这是正确的方法吗？我尝试在修改后运行仍然没有显示任何项目..

```
 // Get a set of currently paired devices
                    Set<BluetoothDevice> pairedDevices = mBtAdapter.getBondedDevices();

                    // If there are paired devices, add each one to the ArrayAdapter
                 if (pairedDevices.size() > 0) {
                     findViewById(R.id.title_paired_devices).setVisibility(View.VISIBLE);
                  for (BluetoothDevice device : pairedDevices) {
                mPairedDevicesArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                mPairedDevicesArrayAdapter.notifyDataSetChanged(); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:48:54.787

您应该执行类似于以下代码的操作。

[http://developer.android.com/reference/android/widget/ArrayAdapter.html](http://developer.android.com/reference/android/widget/ArrayAdapter.html)。查看 .documentation 了解更多信息

```
 public class YourActivity extends Activity 
 {
private ListView lv;
public void onCreate(Bundle saveInstanceState) {
      setContentView(R.layout.your_layout);
     lv = (ListView) findViewById(R.id.your_list_view_id);
    // populate arraylist with string data
     ArrayList<String> your_array_list = new ArrayList<String>();
     your_array_list.add("foo");
     your_array_list.add("bar");

     // This is the array adapter, it takes the context of the activity as a first // parameter, the type of list view as a second parameter and your array as a third parameter
     ArrayAdapter<String> arrayAdapter =      
     new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, your_array_list);
     lv.setAdapter(arrayAdapter); 
}
} 
```

编辑

您可以在扫描设备时将数据添加到阵列列表中。

notifyDataSetChanged() 通知附加的观察者底层数据已更改，任何反映数据集的视图都应自行刷新。

获取新数据后，您可以通过在适配器上调用 notifyDataSetChanged() 来更新列表视图。

# localhost - 使用 zend 框架 2 在 localhost 上出现 403 错误

> ID：15458494
> 
> 赞同：1
> 
> 时间：2013-03-17T07:24:06.033
> 
> 标签：localhost, zend-framework2, http-status-code-403

好的，所以我在尝试加载它时遇到了 403 错误 - 我安装了 Zend 2，即使是通过幸运的人的 youtube 指导，它可以开箱即用。

我遵循[了这个](https://stackoverflow.com/questions/12111823/403-error-on-zendframework)建议，但这没有用，因为没有从我的文件中`LoadModule rewrite_module modules/mod_rewrite.so`注释掉。`httpd.conf`

我试过[这个](https://stackoverflow.com/questions/4262270/htaccess-throws-403-forbidden-zend-framework-quickstart-project-creation-mac)，但添加`Options +Indexes +FollowSymLinks +ExecCGI`到我的`vhosts.conf`文件没有帮助。

我尝试完全删除 .htaccess 文件。我尝试注释掉`httpd-xampp.conf`文件的“XAMPP 安全概念”部分。我试着很好地问它，我试着对它大喊大叫——这两种策略都没有结果。

我正在运行 Windows 8，但我似乎无法弄清楚为什么会出现权限错误。为了清楚起见，每次更改后我都会重新启动 Apache。当我从 vhosts.conf 文件中删除条目时，403 消失了，但这会导致该目录中出现 404。我已经包含了`vhosts.conf`文件中的相关代码。谢谢你的帮助！

```
 NameVirtualHost *:80

    <VirtualHost *:80>
        ServerName zf2.localhost
        DocumentRoot "C:/Users/Captain/Documents/zf2/public"
        SetEnv APPLICATION_ENV "development"
        <Directory C:/Users/Captain/Documents/zf2/public>
        Options +Indexes +FollowSymLinks +ExecCGI
            DirectoryIndex index.php
            AllowOverride All
            Order allow,deny
            Allow from all
        </Directory>
    </VirtualHost> 
```

再次感谢。

**更新 1**

错误日志是：

```
 [Sun Mar 17 03:35:32.627159 2013] [authz_core:error] [pid 5492:tid 1764] [client ::1:50566] AH01630: client denied by server configuration: C:/Users/Captain/Documents/zf2/public/ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T17:15:14.403

解决了它：

在`httpd.conf`文件中，更改

```
 <Directory />
        AllowOverride none
        Require all denied
    </Directory> 
```

到：

```
 <Directory />
        AllowOverride none
        Require all granted
    </Directory> 
```

这对我有用，我现在可以访问 localhost 和所有目录项目。

# android - Android以编程方式将多个TextView添加到TableRow

> ID：15458495
> 
> 赞同：0
> 
> 时间：2013-03-17T07:24:11.087
> 
> 标签：android, textview, android-linearlayout, tablerow

我在 FrameLayout 中有一个 LinearLayout 用于选项卡目的。我正在尝试将 TableRow 添加到代码中的 LinearLayout 中。

```
LinearLayout testLayout = (LinearLayout)findViewById(R.id.testLayout);
TableRow tableRow = new TableRow(this);
tableRow.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.WRAP_CONTENT)); 
```

这将获取我的 LinearLayout 并根据我想要的规范创建一个 TableRow。我知道这部分正在工作。

```
TextView textOne = new TextView(this);
textOne.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
textOne.setText("One");

TextView textTwo = new TextView(this);
textTwo.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
textTwo.setText("Two"); 
```

在这里，我毫无问题地制作了两个 TextView。

```
tableRow.addView(textOne);
tableRow.addView(textTwo);
testLayout.addView(tableRow, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT)); 
```

这是我假设一切都出错的地方。发生的事情是它只显示 textTwo。我不知道为什么它没有像 XML 中的普通 TableRow 那样按顺序显示它们。我再说一遍，这必须在代码中完成。请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:56:51.883

你有没有导入这个`import android.widget.TableRow.LayoutParams`

下面的代码对我有用

```
 TableLayout tl = (TableLayout) findViewById(R.id.spreadsheet);
  TableRow tr = new TableRow(this);
  LayoutParams lp = new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
  tr.setLayoutParams(lp);

  TextView tvLeft = new TextView(this);
  tvLeft.setLayoutParams(lp);
  tvLeft.setBackgroundColor(Color.WHITE);
  tvLeft.setText("OMG");
  TextView tvCenter = new TextView(this);
  tvCenter.setLayoutParams(lp);
  tvCenter.setBackgroundColor(Color.WHITE);
  tvCenter.setText("It");
  TextView tvRight = new TextView(this);
  tvRight.setLayoutParams(lp);
  tvRight.setBackgroundColor(Color.WHITE);
  tvRight.setText("WORKED!!!");

  tr.addView(tvLeft);
  tr.addView(tvCenter);
  tr.addView(tvRight);

  tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));

  tl.addView(tr, new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T15:34:06.827

我认为您想动态创建 TextView 并且应该收到错误“removeView () parent”。这是一个很好的解决方案：

```
TableView tlSkills = (TableView) findViewById(R.id.myTableView);
if(listSkills.size() > 0) {
     TableRow tableRow = new TableRow(getContext());

     int i = 0;
     for (Skills s : listSkills) {
     TextView textView = new TextView(getContext());
     textView.setText("" + s.getName());

     tableRow.addView(textView);

     if(i > 0) { 
          tlSkills.removeView(tableRow);//this is to avoid the error I mentioned above.
     }

     tlSkills.addView(tableRow);

     i++;
  }
} 
```

# java - 安装 SpringRoo Git 插件问题

> ID：15458501
> 
> 赞同：0
> 
> 时间：2013-03-17T07:25:06.547
> 
> 标签：java, spring, maven, spring-roo

我在 Linux Mint 上使用[Spring Roo 1.2.3 版。](http://www.springsource.org/spring-roo)

我想安装 Git 插件，根据 SpringRoo in Action，我正在这样做：

```
roo> addon install bundle --bundleSymbolicName org.springframework.roo.addon.git
Could not find specified bundle with symbolic name: org.springframework.roo.addon.git 
```

如您所见，它无法找到它。我找到了一个网站，它显示了如何通过以下方式[搜索插件](http://www.poornerd.com/2011/03/15/using-git-with-spring-roo-and-the-git-addon/)：

```
roo> addon search git

0 found, sorted by rank; T = trusted developer; R = Roo 1.2 compatible ID T R DESCRIPTION 
```

这也失败了，并没有列出任何内容。似乎其他一些人[遇到了这个问题](http://forum.springsource.org/showthread.php?127572-addon-list-only-return-17-results-only-from-3-different-machine)，但似乎没有人找到解决方案。

这里有人成功地使用了 SpringRoo 的 Git 插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:18:42.173

最后我用这个： roo> osgi start --url file:///c:/lib/mysql-connector-java-5.1.20-bin.jar 然后我可以做： roo> 数据库逆向工程师 --schema test

不确定这是否适用于 git 安装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:02:04.107

roo shell 中的以下代码用于激活 Spring Roo 1.2.4 上的 git add-on

```
osgi obr url add --url http://spring-roo-repository.springsource.org/repository.xml
osgi obr start --bundleSymbolicName org.springframework.roo.addon.git 
```

根据[此处](http://lalyos.github.io/blog/2012/09/24/spring-roobot-workaround/)的信息，但我使用`osgi obr start`的是`osgi obr deploy`

# android - 在 Google Play 中提供多语言应用程序的方法是什么？

> ID：15458502
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:25:13.853
> 
> 标签：android, google-play, multilingual

在 Android 中，制作多语言应用程序很容易。困扰我的是我不确定如何在 Google Play 中提供这样的应用程序。这意味着：

*   应用程序的名称和描述应该是英文加上德文翻译，仅用于描述。该应用程序本身关注多语言。但是不会说英语的人会找到这个应用程序吗？
*   我是否应该提供两个单独的应用程序，一个英语，一个德语。我觉得这很麻烦，因为以后要添加更多的语言是非常困难的，而且我使用的语言越多，发布和维护的时间就越多。好消息是有一个德语应用程序名称和描述以及一个英文应用程序名称和描述。但想象一下，我也有 PRO 和 LITE 版本。

我倾向于使用可能性一。人们通常如何解决这个问题？应用程序接触最多人的最佳“标准语言”是什么？在 Google Play Developer 中，我看到英语的使用率约为 13%。德国只有8%。所以使用英语作为标准语言应该是明智的。这是通常的方法还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:51:43.430

几乎所有情况下的最佳标准语言显然是英语。最大的用户群和最常见的第二语言。

无论如何，您可以在 Google Play 开发者控制台中进行多语言描述和大多数其他操作。您首先选择标准语言，然后根据需要添加任意数量的其他辅助语言。因此，您可以拥有一个具有英文和德文名称的应用程序！使用德语区域设置的用户将在德语名称下找到该应用程序，而英语用户将在英文名称下找到该应用程序。

# struts-1 - 错误 - 标记插入：没有为 bean 定义值

> ID：15458508
> 
> 赞同：1
> 
> 时间：2013-03-17T07:26:24.367
> 
> 标签：struts-1

我是新来的struts。我将在我的 Java EE 项目中使用 struts tile。我阅读了说明如何使用瓷砖的以下页面。
[struts 瓦片示例](http://struts.apache.org/development/1.x/struts-tiles/examples.html)

我阅读了该页面并尝试执行该页面中提到的所有事情。在下面，您可以详细了解我的文件。

struts-config.xml：

```
<plug-in className="org.apache.struts.tiles.TilesPlugin">
    <set-property property="definitions-config" value="/WEB-INF/tiles-defs.xml" />
    <set-property property="moduleAware" value="true" />
</plug-in> 
```

瓷砖-defs.xml：

```
<tiles-definitions>
<definition name="role.list" path="/WEB-INF/content/layout.jsp">
    <put name="body" value="/WEB-INF/content/admin/restricted/role_list_body.jsp"
        type="page" />
</definition> 
```

role_list_body.jsp：

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <title>Insert title here</title>
   </head>
   <body>
      List of Roles
   </body>
</html> 
```

而 role_list.jsp 是：

```
<body>
   <sTile:insert beanName="role.list"/>
</body> 
```

我认为所有的事情都是正确的。但是当我调用 role_list.jsp 我得到以下错误：

```
type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

org.apache.jasper.JasperException: javax.servlet.ServletException:  javax.servlet.jsp.JspException: Error - Tag Insert : No value defined for bean 'role.list' with property 'null' in scope 'null'.
          org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:534)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:442)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

javax.servlet.ServletException: javax.servlet.jsp.JspException: Error - Tag Insert : No value defined for bean 'role.list' with property 'null' in scope 'null'.
     org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
    org.apache.jsp.WEB_002dINF.content.admin.restericted.role.role_005flist_jsp._jspService(role_005flist_jsp.java:80)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause

javax.servlet.jsp.JspException: Error - Tag Insert : No value defined for bean 'role.list' with property 'null' in scope 'null'.
org.apache.struts.tiles.taglib.InsertTag.processBean(InsertTag.java:667)
org.apache.struts.tiles.taglib.InsertTag.createTagHandler(InsertTag.java:483)
org.apache.struts.tiles.taglib.InsertTag.doStartTag(InsertTag.java:441)
    org.apache.jsp.WEB_002dINF.content.admin.restericted.role.role_005flist_jsp._jspx_meth_sTile_005finsert_005f0(role_005flist_jsp.java:97)
    org.apache.jsp.WEB_002dINF.content.admin.restericted.role.role_005flist_jsp._jspService(role_005flist_jsp.java:70)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:391)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
note The full stack trace of the root cause is available in the Apache Tomcat/7.0.12 logs. 
```

你知道这个问题是怎么回事吗？
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T13:53:03.823

我发现问题。
在 role_list.jsp 我替换
`<sTile:insert beanName="role.list" />`为`<sTile:insert definition="role.list" />`

现在它确实有效。

# php - 从 6 个不同的字段更新或将值插入数据库

> ID：15458513
> 
> 赞同：0
> 
> 时间：2013-03-17T07:27:20.680
> 
> 标签：php, mysql

使用 PHP 和 Mysql 你将如何允许用户从六个字段更新或插入关于他们自己的信息。例如关于、名称、网站等等？. 您是否会首先使用循环查找用户想要更新的所有字段，然后使用插入或更新语句查询数据库，具体取决于该字段是否为空或是否必须覆盖现有值。

# 例子

```
$Name ; //exsisting value
$email; // existing value
$about;  //fields null
$website;  // user wants to update this field

protected function updateWebsiteinformation($website,$updateArray){

          $this->setTable('userinformation'); //sets Table
          $where = "website = $website";  //where statment
          return $this->update($updateArray, $where); returns statement 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:52:46.017

你的“where”声明有些有趣。您应该使用唯一的表字段而不是用户想要更新的字段。对于更新过程，我宁愿一次更新所有字段。

# java - 线程解释

> ID：15458516
> 
> 赞同：-2
> 
> 时间：2013-03-17T07:27:51.923
> 
> 标签：java, multithreading

我只想知道每一行是什么意思？因为我喜欢先学习代码，然后再使用它们来更容易地操作它们，而且我也可以学习

这是一个java代码

```
1\. ----> class ShowTask extends Thread { 
2\. ---->     @Override 
3\. ---->          public void run() { 
4\. ---->               try { 
                            .................
5\. ---->                   }catch (InterruptedException e) {
                          }
                         }
                        } 
```

1,2,3,4,5 有什么作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:30:50.457

逐行，这是做什么：

1.  声明一个名为`ShowTask`扩展类的类`Thread`（可能是内置的 Java 类`java.lang.Thread`）。
2.  将 的下一个成员注释`ShowTask`为重写基类方法。
3.  声明`run()`类的方法`ShowTask`。这是注释的目标。
4.  开始一个 try/catch 块
5.  捕捉任何`InterruptedException`可能被`try`方块主体抛出的东西。如果主体抛出一个`InterruptedException`，则该`try`块将立即停止执行，并且该`catch`块的主体（在您的代码中为空）将开始执行。该变量`e`将绑定到引发的异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:31:40.280

每件事都在这里描述：

[http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/procthread.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:44:19.180

你应该为初学者阅读一本关于 Java 的书来回答你的问题

# java - unicode字符串的gson序列化不起作用

> ID：15458518
> 
> 赞同：5
> 
> 时间：2013-03-17T07:29:08.510
> 
> 标签：java, android, unicode, utf-8, gson

我正在使用 gson 库将我的数据序列化为 json 格式字符串。当我在服务器上收到 json 消息时，我得到一个 unicode 字符的问号。例如，我从我的 android 客户端发送以下内容：

```
{"message_content":"This is a test message: مرحبا أصدقاء"} 
```

但是服务器将其接收为：

```
{"message_content":"This is a test message: ???? ??????"} 
```

**代码：**

```
import java.io.UnsupportedEncodingException;

import android.telephony.PhoneNumberUtils;

import com.google.gson.Gson;

import com.google.gson.GsonBuilder;
import com.google.gson.annotations.SerializedName;

public class TestMessage {

    @SerializedName("message_content")
    private String mMessageContent;

    public TestMessage(String messageContent) {

        try {
            byte[] utf8 = messageContent.getBytes("UTF-8");
            mMessageContent = new String(utf8, "UTF-8");
        } catch (UnsupportedEncodingException e) {
            mMessageContent = messageContent;
        }
    }

    public String toJSON() {
        Gson gson = new GsonBuilder().create();
        return gson.toJson(this);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T08:02:59.497

我调试了一下，发现HTTP post不支持UTF-8。关注这篇文章：[发送 http post/put 时的 Android 默认字符集 - 特殊字符问题](https://stackoverflow.com/questions/6227747/android-default-charset-when-sending-http-post-put-problems-with-special-chara)

```
httpPost.setEntity(new StringEntity(body, HTTP.UTF_8)); 
```

# css - IE9的水平滚动条高度问题

> ID：15458519
> 
> 赞同：2
> 
> 时间：2013-03-17T07:29:21.023
> 
> 标签：css, internet-explorer-9, scrollbar

我的网站顶部有一个如下所示的元素：

```
#top { position:fixed;top:0;left:0;margin:0;padding:0;height:60px;width:100%; } 
```

我在底部还有一个像这样的元素：

```
#footer { margin:0;padding:0;position:fixed;height:60px;bottom:0;left:0;width:100%; } 
```

在这两个元素之间，我终于在中间有一个#main 元素，如下所示：

```
#main { margin:0;padding:0;position:absolute;top:60px;left:0;bottom:60px;width:3000px; } 
```

Chrome / Firefox / Safari 一切正常，但 IE9 不行。看起来水平滚动条的高度（大约 15 像素）计入 #main 元素的高度。所以#main 元素底部的15px 高度区域隐藏在#footer 元素后面。

请你帮助我好吗 ？

编辑：**这是一个问题的例子......**

[http://statosphere.fr/stackoverflow/test.php](http://statosphere.fr/stackoverflow/test.php)

使用 Chrome 和 Firefox，您可以看到整个黄色方块 (30x30px)。但是在 IE9 中，您看不到隐藏在红色页脚后面的黄色方块的底部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:58:01.917

滚动条似乎确实存在特定于 IE9 的问题。

尝试将其包装在`<div>`包含`width`类似内容的内容中：

HTML：

```
<div id="maincontainer">
    <div id="top"></div>
    <div id="main">
        <div id="element"></div>
        <div id="footer"></div>
    </div>
</div> 
```

CSS：

```
#maincontainer{
  width:3000px;
} 
```

# php - php中表格中的复选框

> ID：15458521
> 
> 赞同：1
> 
> 时间：2013-03-17T07:29:29.407
> 
> 标签：php, html, mysql

我有将被填充的表（从 mysql 表中读取）。我应该为用户提供一个选项来选择一行并将其从数据库中删除。到目前为止，我已经填充了表格（通过从 mysql 中读取）。但我不知道如何为每一行添加一个复选框。这是我到现在为止的。

```
<html>
<body>
<?php
    $username="root";
    $password="root";
    $database="test";

    mysql_connect(localhost,$username,$password);
    @mysql_select_db($database) or die( "Unable to select database");

    $query="SELECT * FROM table1";
    $result=mysql_query($query);
    $num=mysql_numrows($result);
    mysql_close();
?>

<?php
    $i=0;
    echo "<table width='600' cellpadding='5' cellspacing='5' border='1'>";
    while ($i < $num) {
        $f1=mysql_result($result,$i,"sno");
        $f2=mysql_result($result,$i,"lastname");
        $f3=mysql_result($result,$i,"firstname");
?>

<font face="Arial, Helvetica, sans-serif"><?php echo "<tr><td> $f1 </td><td>$f2 </td>
<td> $f3 </td></tr>"; ?></font>

<?php
        $i++;
    }
    echo "</table>";
?>
</body>
</html> 
```

任何人都可以帮我如何为每一行添加一个复选框。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:42:37.930

只需添加 HTML 代码以在您的 php 代码中呈现复选框，例如

```
<?php echo "<tr><td> $f1 </td><td>$f2 </td>
    <td> $f3 </td><td></td><td><input type=\"checkbox\" name=\"checkbox\" value=\"\" id=\"checkbox\"></td></tr>"; ?> 
```

注意双引号前的反斜杠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:38:25.770

可悲的是，我仍然无法评论答案。但我想改进 Max 回答的代码。

我会改用这个：

```
<?php echo "<tr><td> $f1 </td><td>$f2 </td>
<td> $f3 </td><td></td><td><input type=\"checkbox\" name=\"checkbox[$f1]\" value=\"\" id=\"checkbox\"></td></tr>"; ?> 
```

please note that i add '$f1' variable after 'checkbox' on name variable, so you can post checked row all at once. You can change '$f1' variable into some unique value that suit your needs. I think you'll need it since you want to add checkbox on your data rows. ;)

# iphone - ABPersonCopyImageDataWithFormat 删除联系人图像

> ID：15458522
> 
> 赞同：2
> 
> 时间：2013-03-17T07:29:38.063
> 
> 标签：iphone, ios, objective-c, addressbook, abaddressbook

我有这段代码可以将所有联系人图像存储在字典中。但是，在某些情况下，当它被中断时，联系人的图像就会消失。

```
dispatch_async(dispatch_get_main_queue(), ^{            

        if (ABPersonHasImageData(_personObj)) {

            // UIImage *image = [UIImage imageWithData:(__bridge NSData*) ABPersonCopyImageDataWithFormat(_personObj, kABPersonImageFormatThumbnail)];
            NSData *data = (__bridge NSData *) ABPersonCopyImageDataWithFormat(_personObj, kABPersonImageFormatThumbnail);
            UIImage *image = [UIImage imageWithData:data scale:1];
            int recordId = ABRecordGetRecordID(_personObj);
            [contactImagesDi setValue:image forKey:[NSNumber numberWithInt:recordId]];

        }

}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T01:27:14.563

单线程`ABPerson`不是线程安全的。您不能`ABPerson`使用 将 传递给后台队列`dispatch_async()`。如果要进行后台处理，则必须`ABAddressBook`在每个线程上生成一个新的，并`ABPerson`在该线程上使用从该地址簿中获取的记录。

如果你需要`ABPerson`在线程之间逻辑传递一个，你需要用`ABRecordGetRecordID()`. 您可以传递它并`ABPerson`使用`ABAddressBookGetPersonWithRecordID()`.

`@try`/`@catch`在 ObjC 中非常罕见，你应该有一个很好的理由这样做。在 ARC 下，您通常会泄漏内存。异常意味着程序有问题并且应该很快崩溃。

你在泄漏`data`。你应该在`CFBridgingRelease()`这里使用，而不是`__bridge`. 您需要平衡`Copy`.

假设这是一本字典，您的修改`contactImagesDi`非常危险。`NSMutableDictionary`不是线程安全的。如果它是您正在使用 KVC 的对象，那么它可能是线程安全的，但前提是您已经付出了一些努力来确保这一点。通常，更好的解决方案是使用`dispatch_async`将这种更新放回主线程。

# jquery - 如何插入 jQuery 代码？未捕获的 ReferenceError：$ 未在视图剃刀代码中定义

> ID：15458523
> 
> 赞同：15
> 
> 时间：2013-03-17T07:30:05.057
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4

我在文件末尾有以下 Asp.Net MVC 4 剃须刀代码。

```
....
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

<script type="text/javascript">
    $('#Address_State').val('MA');
</script>
////// End of file 
```

但是，它生成了以下 html 代码。它会在该行引发错误`$('#Address_State').val('MA');`。错误消息是`Uncaught ReferenceError: $ is not defined`。如何在剃刀文件中插入 jQuery 代码？

```
.....
<script type="text/javascript">
    $('#Address_State').val('MA'); // Uncaught ReferenceError: $ is not defined
</script>
            </section>
        </div>
        <footer>
            <div class="content-wrapper">
                <div class="float-left">
                    <p>&copy; 2013 - Paperspeed</p>
                </div>
            </div>
        </footer>

        <script src="/Scripts/jquery-1.9.1.js"></script>

    <script src="/Scripts/jquery.unobtrusive-ajax.js"></script>
<script src="/Scripts/jquery.validate.js"></script>
<script src="/Scripts/jquery.validate.unobtrusive.js"></script>

    </body>
</html> 
```

**更新：**

以下是_Layout.cshtml 的最后四行。

```
 @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-17T07:38:38.637

在实际使用它之前，您需要包含 JQuery。

实现此目的的一种常见方法是在您的主布局中将您的需求脚本包含在头部。或者放置一个可选部分（head），您可以在其中有条件地包含脚本

首先为您想要在每个页面上的 jquery 脚本创建一个必需的包：

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/js/required").Include(
        "~/Scripts/jquery-2.0.2.js"));

    //other bundles
} 
```

然后创建一个站点模板：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Title</title>
    @Styles.Render("~/css/required")
    @RenderSection("head", false) //For css on a page by page basis
</head>
<body>
    @RenderBody()
    @Scripts.Render("~/js/required") //Here add your jquery include
    @RenderSection("scripts", false) //Here you add scripts at the bottom of the page
</body>
</html> 
```

然后使用这个 razor 文件作为所有其他派生的 razor 视图的基本布局，如下所示：

```
@{
    ViewBag.Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

@section head {
     //Any css you want to add
}

<p>Some html content</p>

@section scripts {
    //scripts you want to include at the bottom on a page by page basis
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-08-20T03:55:28.677

将以下代码行移动到 body 标记内的 _Layout.cshtml 视图顶部。然后 jQuery 脚本将首先加载。

```
<body>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-17T07:36:38.157

在加载 jquery 之前调用您的脚本，因此它不知道 $ 是什么意思。尝试将 jquery 脚本加载到布局文件的 head 部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-10-15T19:02:19.623

无需移动任何东西。就在视图中有脚本的地方，将脚本放在节脚本中，假设您在 _Layout 文件中声明了节脚本：

```
@section scripts{
    <script>
        $(document).ready(function () {
            alert('Hello');
        });
    </script>
} 
```

您可以对每个页面上带有附加 CSS 的部分执行相同的技术，声明部分 CSS 或 Head 或任何名称，然后在标记之前的视图顶部添加 @section name{ }

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T16:26:03.930

正如@Dmitri K 提到的，**没有**必要移动任何东西。

只需将页面加载**后**需要调用的脚本放入其中

`$(document).ready(function () {}`像这样：

```
@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            // Items that NEED to be set after the page is loaded.
            $('#Address_State').val('MA');
            $('.some-div-class').on('click', 'button', function (event) 
            {
               // Binding click event to all buttons in 'some-div-class'
               // Do something on those clicks
               event.preventDefault();
               someFunction();
            }
            // And so on.
        });

        //Items that DON'T NEED to be called on page load can be put outside document.ready. For eg:
        function someFunction() { // Some logic }
    </script>
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-17T09:11:02.623

jquery add 在渲染主体之后？你将跟随“

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false) 
```

" 行到标签

像这样 ”

```
@Scripts.Render("~/bundles/jquery")
@RenderSection("scripts", required: false)
</head> 
```

"

# gwt - 如何在 GWT 客户端显示文件，而不是下载：

> ID：15458525
> 
> 赞同：3
> 
> 时间：2013-03-17T07:30:21.927
> 
> 标签：gwt, browser

我需要一点帮助来实现这一点，在我的应用程序中，用户可以将文件上传到服务器并将其存储为 blob 对象，现在我需要根据请求向用户展示它们。

我要做的是显示在下面的代码中，

在服务器端，我将内容响应：（此代码基于此博客文章[WaterTalks 实现](http://de-water-talks.blogspot.in/2013/03/gwt-file-uploading-and-save-it-to-db.html)）

```
 resp.setContentType("text/plain");
     resp.setHeader("Content-Disposition", "attachment; filename=output.txt");

     PrintWriter out = resp.getWriter();
     out.println("This is the output content");
     out.println("Probably something dynamic should go in here:::::");

PersistenceManager pm = null;
         try {
                pm = PMF.get().getPersistenceManager();
                javax.jdo.Transaction transaction = pm.currentTransaction();
                Extent e = pm.getExtent(WaterTalkFiles.class, true);
                Iterator iter = e.iterator();
                String returns = "";
                WaterTalkFiles file  =  (WaterTalkFiles)iter.next();
                Blob blob = file.getData();
                byte[] buffer = blob.getBytes();
                String s = new String(buffer);
                out.println(s);
         } catch (Exception e) {
                e.printStackTrace();
         } finally {
                if (null != pm)
                      pm.close();
         } 
```

现在在客户端，当用户单击显示按钮时，我想在浏览器中显示文件内容，而不是下载它。

我的客户端代码是：

```
showfilecontentButton.addClickHandler(new ClickHandler() {

            @Override
            public void onClick(ClickEvent event) {
                   String link = "/FileUploadByWaterTalks";
                    container.add(new HTML("<a href=\"" + link + "\">ShowFile</a>"));
            }
        }); 
```

上面的代码（客户端代码）没有显示文件内容，它只是下载文件。但我不希望用户下载它，我想向他们展示它的内容。

而且，我是否必须在这里配置一些东西才能解决。

```
 resp.setContentType("text/plain");
 resp.setHeader("Content-Disposition", "attachment; filename=output.txt"); 
```

希望你明白我的问题是什么。请随时分享您的想法和解决方案以实现这一目标。

谢谢。

* * *

## **更新**

在这里第一个答案的基础上，我更改了我的代码的一部分：

更新的代码部分是：

```
 resp.setHeader("Pragma", "no-cache");

final String url = "http://127.0.0.1:8888/FileUploadByWaterTalks";
String name = "output.txt";

Anchor link1 = new Anchor(name);
RootPanel.get().add(link1);
link1.addClickHandler(new ClickHandler() {
    public void onClick(ClickEvent event) {
        Frame f = new Frame(url);
        f.setSize("600px", "400px");
        f.getElement().getStyle().setBorderWidth(0, Unit.PX);
        RootPanel.get().add(f);
      }
    }); 
```

但是浏览器仍然要求我保存文件而不是在浏览器本身中显示它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T22:29:07.483

首先删除 servlet 中的“Content-Disposition”。

其次，在您的代码中使用 GWT `Anchor`，并在用户单击时在新窗口或 iframe 中打开链接。

这里有一个使用新窗口的示例，以及另一个使用 iframe 的示例：

```
 final String url = "http://gwtquery.googlecode.com/git/README.txt";
    String name = "README.txt";

    Anchor link1 = new Anchor(name);
    RootPanel.get().add(link1);
    link1.addClickHandler(new ClickHandler() {
      public void onClick(ClickEvent event) {
        Window.open(url, "_blank", "");
      }
    });

    Anchor link2 = new Anchor(name);
    RootPanel.get().add(link2);
    link2.addClickHandler(new ClickHandler() {
      public void onClick(ClickEvent event) {
        Frame f = new Frame(url);
        f.setSize("600px", "400px");
        f.getElement().getStyle().setBorderWidth(0, Unit.PX);
        RootPanel.get().add(f);
      }
    }); 
```

此方法适用于浏览器能够显示的任何文件，但请确保发送适当的`Content-Type`标题（文本/纯文本、文本/html、图像/PNG 等）

# r - R将变量列索引传递给ggplot2

> ID：15458526
> 
> 赞同：73
> 
> 时间：2013-03-17T07:30:36.963
> 
> 标签：r, ggplot2, dataframe

我正在尝试将列索引作为我将重复使用的函数的一部分传递给 ggplot。喜欢：

```
myplot <- function(df){
    ggplot(df, aes(df[, 1], df[, 2])) + geom_point()
} 
```

我将始终将第一列用作我的 x 变量，将第二列用作我的 y 变量，但列名在数据集之间会发生变化。我已经到处搜索了..有什么想法吗？

# 编辑：

**这是我使用的答案：**

```
require(ggplot2)

myplot <- function(df){
   ggplot(df, aes_string(colnames(df)[1], colnames(df)[2])) + geom_point()
} 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-03-17T07:40:32.213

您可以使用`aes_string`in 而不是`aes`传递字符串而不是使用对象，即：

```
myplot = function(df, x_string, y_string) {
   ggplot(df, aes_string(x = x_string, y = y_string)) + geom_point()
 }
myplot(df, "A", "B")
myplot(df, "B", "A") 
```

# haskell - 用前缀符号重写单子计算

> ID：15458528
> 
> 赞同：3
> 
> 时间：2013-03-17T07:30:57.117
> 
> 标签：haskell, infix-notation

我试图弄清楚如何用前缀符号重写一元计算（不是为了真正的实际目标，只是为了研究），但是一个 lambda 看不到另一个参数的问题

所以给出一个工作示例

```
*Main> [1, 3, 4] >>= \x -> [x + 1, x - 1] >>= \y -> return (y*x)
[2,0,12,6,20,12] 
```

重写的一个显示没有看到其他 lambda 的参数的错误

```
*Main> (>>=) ( (>>=)  [1, 3, 4] (\x -> [x + 1, x - 1]) ) (\y -> return (y*x))
<interactive>:133:68: Not in scope: `x' 
```

但是如果我让最后一个不使用它（通过将 x 替换为 y），则计算开始工作

```
*Main> (>>=) ( (>>=)  [1, 3, 4] (\x -> [x + 1, x - 1]) ) (\y -> return (y*y))
[4,0,16,4,25,9] 
```

那么前缀符号的完全重写在技术上是可能的吗？或者访问其他 lambdas 参数的这个属性是中缀符号独有的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T07:38:03.450

问题是您的优先级略有错误，另请参阅[Haskell Precedence: Lambda and operator](https://stackoverflow.com/questions/11237076/haskell-precedence-lambda-and-operator)

lambda 表达式的主体尽可能向右延伸。然后您的示例用括号括起来，如下所示：

```
[1, 3, 4] >>= (\x -> [x + 1, x - 1] >>= (\y -> return (y*x))) 
```

将其带入前缀形式会导致

```
(>>=) [1, 3, 4] (\x -> (>>=) [x + 1, x - 1] (\y -> return (y*x))) 
```

现在`x`在 的体内是可见的`\y -> ...`。

# javascript - 设置 `document.domain = document.domain;` 是否存在任何安全问题？

> ID：15458534
> 
> 赞同：2
> 
> 时间：2013-03-17T07:32:00.530
> 
> 标签：javascript, security, browser, xss

我希望构建一个允许`subdomain.domain.com`打开弹出窗口`domain.com`并操作该窗口的应用程序。

为此，我需要`document.domain`在父窗口和弹出窗口上设置相同的值。

在弹出窗口中，这将如下所示：

```
document.domain = document.domain; 
```

这对我来说似乎无害——我只允许从子域运行跨站点 javascript。我所有的子域都——而且永远都会——在我的控制之下。

我是否从设置中忽略了任何安全问题`document.domain = document.domain;`？

感谢您的任何建议

# javascript - phantomjs：没有填充状态是什么意思？

> ID：15458539
> 
> 赞同：0
> 
> 时间：2013-03-17T07:33:07.880
> 
> 标签：javascript, web-scraping, phantomjs

```
var page = require('webpage').create(); 

page.onConsoleMessage = function (msg) {
    console.log('Inner log: ' + msg);
};

var url = "http://www.w3.org/TR/CSS21/propidx.html";
page.open(url, function() {
    console.log("status ",status);
    var props = page.evaluate(function() {
        var x = document.getElementsByClassName('xref');
        for (var i=0;i<x.length;++i) {
            console.log(x[i].innerText);
        }
        ... 
```

输出：

```
❯ phantomjs css21_parser.js                                      
2013-03-17 03:27:01.737 phantomjs[95167:707] *** WARNING: Method userSpaceScaleFactor in class NSView is deprecated on 10.7 and later. It should not be used in new applications. Use convertRectToBacking: instead.
status
Inner log: 'azimuth'
Inner log: 'background-attachment'
Inner log: 'background-color'
Inner log: 'background-image'
Inner log: 'background-position'
Inner log: 'background-repeat'
.... 
```

基本上，示例和 API 文档说明应根据“成功”检查成功，但在这种情况下，它似乎是空字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T13:56:22.013

我不完全确定这是否会解决您的问题，但是您是否尝试将字符串连接在一起，而不是逗号分隔？

`console.log("status " + status);`

编辑：

我刚刚注意到你的问题。您没有`status`在回调中传递变量。

您的回调函数应如下所示：

`page.open(url, function(status) {`

# hadoop - Hadoop 集群和 MapReduce 逻辑

> ID：15458541
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:33:50.923
> 
> 标签：hadoop, mapreduce

我是hadoop开发的新手。我阅读了hadoop集群结构，了解到有一个namenode、jobtracker、tasktracker和多个datanode。当我们编写 map-reduce 程序时，我们会实现 mapper 和 reducer。我也理解了这些类的逻辑。但我不明白它们是如何在 hadoop 集群中执行的。映射器是否仅在名称节点中执行？减速器是否在数据节点上单独执行？我需要进行大量并行计算并且不想使用 HDFS，我如何确保每个输出集合（来自映射器）在所有数据节点中单独执行？请解释一下hadoop集群和map/reduce逻辑之间的联系。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T10:26:57.333

Map Reduce Jobs 由 Job Tracker 和 Task Tracker 执行。

Job Tracker 启动作业，将输入文件/文件分成多个部分。Tasktrackers 被给予这些分裂，他们在分裂上运行地图任务（每个分裂一个地图任务）。在 Mappers 抛出他们的输出之后。这个输出将根据 map 输出键传递给 reducer。类似的密钥被发送到一个减速器。Reducer 可以超过 1 ，具体取决于您的配置。Reducer 进程也仅在 tasktracker 节点之一上运行。

您可以在 jobtracker UI 上查看 Job 的统计信息，该 UI 默认在 50030 端口上运行。

您也可以访问我的网站以获取有关大数据技术的示例主题。另外，您可以发布您的问题，我会尽力回答。

[http://souravgulati.webs.com/apps/forums/show/14108248-bigdata-learnings-hadoop-hbase-hive-and-other-bigdata-technologies-](http://souravgulati.webs.com/apps/forums/show/14108248-bigdata-learnings-hadoop-hbase-hive-and-other-bigdata-technologies-)

# c# - 当字符串变量包含字符“$”时，我的断点没有被命中

> ID：15458543
> 
> 赞同：1
> 
> 时间：2013-03-17T07:33:52.967
> 
> 标签：c#

在我的代码中，我`resxKey==@"$this.Text"` 在 line 处添加了一个条件断点`resxKey = d.Key.ToString();`（见下文）。

当我在没有任何条件的情况下添加此断点并手动检测该值时，变量`resxKey`等于`"$this.Text"`. 但是，如果我添加条件`resxKey==@"$this.Text"`，该行将永远不会被击中。

谁能告诉我为什么会这样？

```
 resxReader = new ResXResourceReader(resxPathName);
 string resxKey = "";
 string resxValue = "";
 foreach (DictionaryEntry d in resxReader)
                {
                    int i;

                    resxKey = d.Key.ToString();             // I add a breakpoint at this line 
                }                                        //with condtion resxKey==@"$this.Text" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:07:45.980

*您应该在之后* 的语句处设置断点`resxKey = d.Key.ToString();`。

如果您在该语句处设置断点，它确实永远不会被命中，因为`resxKey`尚未分配`d.Key.ToString()`.

也许最好的解决方法是将断点留在那里，但将其条件更改为`d.Key.ToString() == "$this.Text"`.

# javascript - 将发布数据发送到远程站点并显示结果

> ID：15458547
> 
> 赞同：1
> 
> 时间：2013-03-17T07:34:23.027
> 
> 标签：javascript, html, ajax, forms, cross-domain

我在这里阅读了很多帖子，询问大致相同的事情，但通常询问的人可以访问远程站点并且可以使用可用的方法来实现这一点。我的情况有点不同，我只是想看看是否有可能，然后再花时间和精力尝试让它发挥作用。

我试图访问的站点是远程的，无论如何我都无法访问它，并且只能从登录到 OpenVPN 的计算机上访问它。

我正在编写的工具正在尝试从远程站点获取表单提交的结果。我不想解析结果或无论如何修改它。我只想显示发送了 Post Data 的页面。远程站点使用 AJAX 进行表单提交。

它的代码是这样的：

```
<form name="MyForm" action="response_normal.php" method="post" onsubmit="xmlhttpPost('response_ajax_v2.php', 'MyForm', 'response', '<img src=\'pleasewait.gif\'>'); return false;"> 
```

在该页面上提交后，将发送三个值：

```
site : radio1
search : 000000000000
submit : Search Site 
```

我是否可以简单地将帖子数据发送到页面并显示它？我希望在 iframe 中执行此操作 - 因为由于 VPN 限制，我无法在服务器端执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:39:04.963

由于您访问异地服务器的计算机位于可以访问远程系统的 VPN 上（并假设此远程系统在您的控制之下），因此您可以让异地服务器返回一些 JavaScript 以通过 AJAX 提取数据——在这种情况下，一个完整的 HTML 页面——它需要从远程系统使用类似 JSONP 的策略。

我过去曾在一些小型项目中使用过这种技术。

从那里，您可以自由地对数据做任何您想做的事情——修改它、按原样返回它，或者以其他方式。

就个人而言，如果可能的话，我会避免使用框架。当然，当时间紧迫时，没有什么是禁区；）

但是，**如果远程系统不在您的控制之下**（并且他们没有 kickass CORS 交叉访问策略），那么正如您在问题正文中所说，您唯一的选择是框架。这是一个例子：

```
<!-- If the remote system is NOT under your control, it CANNOT respond with the X-Frame-Options header set to SAMEORIGIN or DENY! -->
<iframe id="inlineframe" src="http://www.randomwebsite.com" frameborder="0" scrolling="auto" width="800" height="300" marginwidth="5" marginheight="5" ></iframe>

//Depending on the JS you put here, you may get some "unsafe Javascript" warnings from certain browsers
~function()
{
    var frame = document.getElementById('inlineframe'),
        ref = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument;

    // ref is now a reference to the document of the content within the iframe
    // You can now do your getElementById/getElementByTagName etc. and otherwise
    // manipulate the response as you please.
    console.log(ref);
}(); 
```

可以在这里找到一个工作示例：http: [//jsfiddle.net/FTudJ/](http://jsfiddle.net/FTudJ/)

iframe 的内容应该是远程页面的提交结果，或者远程服务器响应的任何内容。如果您不想修改任何内容，那么您甚至不需要 Javascript 组件。

关键是您指定为 iframe 源的 URL。现在，如果远程系统不支持表单提交的 GET 请求（在您的示例代码中，我看到一个“POST”方法），再加上您无法控制它并且您的异地系统无法访问它无论如何，您唯一的其他选择是：

*   **无需直接提供表单的提交 URL，只需将表单的典型访问 URL 提供给 iframe。从那里，使用 JavaScript 用必要的值填充表单，然后在 iframe 中提交表单，就像您是用户一样。从那里，您可以将结果刮回到 JavaScript 中，或者简单地按原样显示它们。**

*   找到一种方法让您的异地服务器进入 VPN 网络，以便它可以代表您与远程系统进行通信。当然，如果这很容易，我想你会先做到这一点！

*   将您的用户重定向到远程站点——可能使用框架集 + 横幅框架，就像 Google 过去所做的那样，让他们在那里做他们需要做的事情，然后告诉他们完成后回来。

--

~~我看到你正在使用 PHP。只要执行 PHP 的服务器可以访问可以访问此远程系统的 VPN（通过传统的 HTTP），服务器端的简单 curl 调用就足够了，因为您可以使用 AJAX 传递结果给客户。~~

这些链接可能会有所帮助：

~~*   [http://php.net/manual/en/book.curl.php](http://php.net/manual/en/book.curl.php)*   [PHP 中的 cURL 是什么？](https://stackoverflow.com/questions/3062324/what-is-curl-in-php)*   [http://php.net/manual/en/curl.examples-basic.php](http://php.net/manual/en/curl.examples-basic.php)~~
*   ~~[使用 PHP Curl 发布数据并检索响应？](https://stackoverflow.com/questions/4947025/post-data-and-retrieve-the-response-using-php-curl)~~

# c# - C#异步，等待没有任务

> ID：15458549
> 
> 赞同：11
> 
> 时间：2013-03-17T07:34:24.847
> 
> 标签：c#, asynchronous, system.reactive, async-await

通过创建一个或多个 awaiters 和 awaitables，是否可以在 C# 中构建协程？

理想情况下，我希望能够编写如下内容：

```
void async Click() {
  var mouse_position = await left_mouse_click();
  await shoot_projectile();
} 
```

然后从 Click 方法中获取一些东西，我可以在另一个异步方法中等待，或者我可以使用某些 MoveNext/GetResult 方法显式迭代。

最终目标是我需要将 C# async/await 与 F# monadic coroutines 集成为游戏开发框架 ( [http://casanova.codeplex.com](http://casanova.codeplex.com) )。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T13:15:53.543

> 通过创建一个或多个 awaiters 和 awaitables，是否可以在 C# 中构建协程？

当然！我有[一篇](http://blog.stephencleary.com/2012/08/async-coroutines.html)用于`TaskScheduler`构建简单协程的博文，而 Jon Skeet 有一篇[博](http://msmvps.com/blogs/jon_skeet/archive/2011/06/22/eduasync-part-13-first-look-at-coroutines-with-async.aspx)文，它使用自定义等待对象来构建简单的协程。

但是看看你剩下的问题和评论，我不确定协程是否是你真正想要的。如果您想“迭代”等待对象，最好的选择是[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)（与`async`. “异步产量”没有 C# 语言功能。

# cuda - 在 CUDA 中转置矩阵的最有效方法是什么？

> ID：15458552
> 
> 赞同：3
> 
> 时间：2013-03-17T07:35:03.310
> 
> 标签：cuda, cublas

我有一个`M*N`主机内存矩阵，在复制到设备内存后，我需要将其转置为`N*M`矩阵。是否有任何 cuda (cuBLAS ...) API 这样做？我正在使用 CUDA 4。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-15T20:48:38.677

为了回答您关于效率的问题，我比较了两种执行矩阵转置的方法，一种使用 Thrust 库，另一种使用`cublas<t>geam`Robert Crovella 建议的方法。在 Kepler K20c 卡上的比较结果如下：

```
| Matrix size   | Thrust [ms]   | cuBLAS [ms]   |
|               |               |               |
| 32x32         | 0.015         | 0.016         |
| 64x64         | 0.015         | 0.017         |
| 128x128       | 0.019         | 0.017         |
| 256x256       | 0.028         | 0.017         |
| 512x512       | 0.088         | 0.042         |
| 1024x1024     | 0.34          | 0.13          |
| 2048x2048     | 1.24          | 0.48          |
| 4096x4096     | 11.02         | 1.98          | 
```

可以看出，该`cublas<t>geam`版本优于使用 Thrust 的版本。下面是执行比较的代码。

```
#include <thrust/host_vector.h>
#include <thrust/device_vector.h>
#include <thrust/functional.h>
#include <thrust/gather.h>
#include <thrust/scan.h>
#include <thrust/iterator/counting_iterator.h>
#include <thrust/iterator/transform_iterator.h>
#include <iostream>
#include <iomanip>
#include <cublas_v2.h>
#include <conio.h>
#include <assert.h>

/**********************/
/* cuBLAS ERROR CHECK */
/**********************/
#ifndef cublasSafeCall
#define cublasSafeCall(err)     __cublasSafeCall(err, __FILE__, __LINE__)
#endif

inline void __cublasSafeCall(cublasStatus_t err, const char *file, const int line)
{
    if( CUBLAS_STATUS_SUCCESS != err) {
        fprintf(stderr, "CUBLAS error in file '%s', line %d\n \nerror %d \nterminating!\n",__FILE__, __LINE__,err); 
        getch(); cudaDeviceReset(); assert(0); 
    }
}

// convert a linear index to a linear index in the transpose 
struct transpose_index : public thrust::unary_function<size_t,size_t>
{
    size_t m, n;

    __host__ __device__
    transpose_index(size_t _m, size_t _n) : m(_m), n(_n) {}

    __host__ __device__
    size_t operator()(size_t linear_index)
    {
        size_t i = linear_index / n;
        size_t j = linear_index % n;

        return m * j + i;
    }
};

// convert a linear index to a row index
struct row_index : public thrust::unary_function<size_t,size_t>
{
    size_t n;

    __host__ __device__
    row_index(size_t _n) : n(_n) {}

    __host__ __device__

    size_t operator()(size_t i)
    {
        return i / n;
    }
};

// transpose an M-by-N array
template <typename T>
void transpose(size_t m, size_t n, thrust::device_vector<T>& src, thrust::device_vector<T>& dst)
{
    thrust::counting_iterator<size_t> indices(0);

    thrust::gather
    (thrust::make_transform_iterator(indices, transpose_index(n, m)),
    thrust::make_transform_iterator(indices, transpose_index(n, m)) + dst.size(),
    src.begin(),dst.begin());
}

// print an M-by-N array
template <typename T>
void print(size_t m, size_t n, thrust::device_vector<T>& d_data)
{
    thrust::host_vector<T> h_data = d_data;

    for(size_t i = 0; i < m; i++)
    {
        for(size_t j = 0; j < n; j++)
            std::cout << std::setw(8) << h_data[i * n + j] << " ";
            std::cout << "\n";
    }
}

int main(void)
{
    size_t m = 5; // number of rows
    size_t n = 4; // number of columns

    // 2d array stored in row-major order [(0,0), (0,1), (0,2) ... ]
    thrust::device_vector<double> data(m * n, 1.);
    data[1] = 2.;
    data[3] = 3.;

    std::cout << "Initial array" << std::endl;
    print(m, n, data);

    std::cout << "Transpose array - Thrust" << std::endl;
    thrust::device_vector<double> transposed_thrust(m * n);
    transpose(m, n, data, transposed_thrust);
    print(n, m, transposed_thrust);

    std::cout << "Transpose array - cuBLAS" << std::endl;
    thrust::device_vector<double> transposed_cuBLAS(m * n);
    double* dv_ptr_in  = thrust::raw_pointer_cast(data.data());
    double* dv_ptr_out = thrust::raw_pointer_cast(transposed_cuBLAS.data());
    double alpha = 1.;
    double beta  = 0.;
    cublasHandle_t handle;
    cublasSafeCall(cublasCreate(&handle));
    cublasSafeCall(cublasDgeam(handle, CUBLAS_OP_T, CUBLAS_OP_T, m, n, &alpha, dv_ptr_in, n, &beta, dv_ptr_in, n, dv_ptr_out, m)); 
    print(n, m, transposed_cuBLAS);

    getch();

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-17T07:52:24.990

在[cublas API](http://docs.nvidia.com/cuda/cublas/index.html#topic_9_1)中：

```
cublas<t>geam()

This function performs the matrix-matrix addition/transposition
the user can transpose matrix A by setting *alpha=1 and *beta=0\. 
```

（并将 transa 运算符指定为 CUBLAS_OP_T 进行转置）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-02T06:57:48.747

CULA 有辅助例程来计算转置 ( `culaDevice?geTranspose`)。如果是方阵，您还可以使用就地转置 ( `culaDevise?geTransposeInplace`)。

注意：如果您满足某些条件，CULA 有免费许可证可用。

# java - Eclipse中的tomcat：部署多个项目

> ID：15458556
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:35:20.030
> 
> 标签：java, eclipse, web-services, tomcat

我正在 Eclipse 中部署一个动态 Web 项目。但是这个项目需要与另一个没有部署的项目交谈，如果我在 Eclipse 之外启动 tomcat，那么该项目总是被部署，但是我又不知道如何在 Eclipse 之外部署我的动态 Web 项目。

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:20:47.960

如果要在 eclipse 之外部署动态 Web 项目，可以执行此步骤：

1.  右键单击您的项目，选择`Export`.
2.  选择`WAR file`。
3.  设置目的地：`<apache directory>\webapps`。
4.  重启tomcat。

# javascript - 防止 JQuery 触发多个 AJAX GET 请求

> ID：15458558
> 
> 赞同：1
> 
> 时间：2013-03-17T07:35:24.783
> 
> 标签：javascript, jquery, ajax

我有这个功能

```
 function () {
     if ($(window).scrollTop() >= ($(document).height() - $(window).height()) * 0.7) {
         //$(window).unbind('scroll');

         jQuery.get('moreProfileComments', function (e, success) {
             $(window).scroll(scrollEvent);
             console.log(e);
             var result_div = $(e).find('#user_comments #u_cont div');
             var original_div = $('#user_comments #u_cont div');

             if (result_div.last().html() === original_div.last().html()) {
                 //alert("TEST");
                 //$(window).unbind('scroll');
             } else {
                 //$(rs).appendTo('#search_results').fadeIn('slow');
                 $('#user_comments #u_cont').append($(e).find('#user_comments #u_cont').html());
                 $(window).scroll(scrollEvent);
             }
         }, "html");

     }
 }; 
```

发出一个 ajax 请求，我如何确保它只会触发 1 个 ajax 请求？如果请求已经发送或发送。我不想要多个 ajax 请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:42:19.023

`scroll`事件`resize`触发一百次（*取决于浏览器*），您应该使用提供`throttle`类似[underscore.js](http://underscorejs.org/)的方法的插件，或者您可以使用`setTimeout`函数。

underscore.js`throttle`示例：

```
var throttled = _.throttle(scrollEvent, 500);
$(window).scroll(throttled); 
```

`setTimeout`使用函数的示例：

```
var timeout = '';
$(window).on('scroll', function(){
    clearTimeout(timeout);
    timeout = setTimeout(function(){
       // Do something here
    }, 300); 
}) 
```

John Resig 的相关文章：http: [//ejohn.org/blog/learning-from-twitter/](http://ejohn.org/blog/learning-from-twitter/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T10:49:13.707

`resize`对事件使用节流版本的事件处理程序是个好主意`scroll`。但是要解决您提出多个请求的具体问题，您可以使用以下代码。

```
 var requestIsRunning; //Flag to indicate that there is a pending request.

 function () {
     if ($(window).scrollTop() >= ($(document).height() - $(window).height()) * 0.7) {

         //do nothing if there is an active moreProfileComments request;
         if(ruquestIsRunning) {return;};

         requestIsRunning = 1;
         jQuery.get('moreProfileComments', function (e, success) {
             $(window).scroll(scrollEvent);
             console.log(e);
             var result_div = $(e).find('#user_comments #u_cont div');
             var original_div = $('#user_comments #u_cont div');

             if (result_div.last().html() === original_div.last().html()) {
                 //alert("TEST");
                 //$(window).unbind('scroll');
             } else {
                 //$(rs).appendTo('#search_results').fadeIn('slow');
                 $('#user_comments #u_cont').append($(e).find('#user_comments #u_cont').html());
                 $(window).scroll(scrollEvent);
             }
         }, "html")
         //when request is complete restore the flag
         .always(function(){ 
              requestIsRunning = 0;
          });

     }
 }; 
```

# java - 如何返回带两位小数的双精度数？

> ID：15458559
> 
> 赞同：0
> 
> 时间：2013-03-17T07:35:39.963
> 
> 标签：java, double

我想返回一个带 2 个小数位的双精度数（即 123.00）。以下是部分代码。输出始终为 123.0。如何获得两位小数？

```
public static double getPrice(){

    double price = Double.valueOf(showInputDialog("Stock's price : "));

    DecimalFormat rounded = new DecimalFormat("###.00");

    double newPrice = Double.valueOf(rounded.format(price));
    System.out.println(newPrice);

    return newPrice;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:44:51.013

只要你的函数的返回类型是`double`，简短的回答就是“你不能”。

许多不超过两位十进制数字的数字不能完全表示为`double`。一个常见的例子是`0.1`。`double`离它最近的是`0.100000000000000005551115...`

不管你做了多少四舍五入，你都无法得到精确`0.1`的 .

就您的选择而言，您可以：

1.  接受与 using 相关的舍入问题`double`；
2.  返回一个`int`（即舍入值乘以 100）；
3.  返回一个`String`；
4.  返回一个`BigDecimal`。

特别是，如果您代表货币金额，那么使用`double`几乎可以肯定是一个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:37:54.253

格式化时，您正在从双精度中创建一个字符串。不要再次将格式化字符串转换为双精度：

```
String formattedPrice = rounded.format(price);
System.out.println(formattedPrice); // prints 123.00 or 123,00, depending on your locale 
```

[double](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)保留 IEEE754 之后的数值，它不保留任何格式信息，并且仅在 IEEE754 双精度允许的范围内精确。如果您需要保留逗号后的位数等渲染信息，则需要其他内容，例如[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)。

# accordion - 如何使手风琴应该从上到下打开？

> ID：15458560
> 
> 赞同：0
> 
> 时间：2013-03-16T23:09:47.443
> 
> 标签：accordion

嗨，我使用了手风琴方法，但在此方法中，它从左上角到右下角打开 div 元素。我不想那样，我希望这个从上到下打开..请帮帮我？？？？？？？这是我的代码

```
<script type="text/javascript">
jQuery(document).ready(function(){
    $('#accordion .head').click(function() {
        $(this).next().toggle('slow');
        return false;
    }).next().hide();
});
</script>

<div id="accordion">
    <h3 class="head"><a href="#">First header</a></h3>
    <div style="background:#f00;">
        <p>First content</p>
        <p>second content</p>
        <p>third content</p>
        <p>fourth content</p>
        <p>fifth content</p>
        <p>six content</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-22T10:16:15.773

try this jquery code and edit what u want

```
(function($) {

var allPanels = $('.accordion .dd').hide();

$('.accordion .dt  a').click(function() {
allPanels.slideUp();
$(this).parent().next().slideDown();
return false;
});
})(jQuery) 
```

[http://jsfiddle.net/X9sz8/](http://jsfiddle.net/X9sz8/)

# cocoa - NSImage + NSBitmapImageRep = 将 RAW 图像文件从一种格式转换为另一种格式

> ID：15458566
> 
> 赞同：2
> 
> 时间：2013-03-17T07:36:38.703
> 
> 标签：cocoa, tiff, nsimage, nsbitmapimagerep

我正在尝试编写一个原型来证明从一种格式到另一种格式的 RAW 转换是可能的。我必须将尼康的 .NEF 格式的原始文件转换为佳能的 .CR2 格式。在各种帖子的帮助下，我创建了原始图像 TIFF 表示的 BitmapImageRep 并使用它来编写具有 .CR2 扩展名的输出文件。

它确实有效，但对我来说唯一的问题是，输入文件为 21.5 MB，但得到的输出为 144.4 MB。使用时`NSTIFFCompressionPackBits`给了我 142.1 MB。

我想了解发生了什么，我尝试了各种可用的压缩枚举，但没有成功。

请帮助我理解它。这是源代码：

```
@interface NSImage(RawConversion)
- (void) saveAsCR2WithName:(NSString*) fileName;
@end

@implementation NSImage(RawConversion)
- (void) saveAsCR2WithName:(NSString*) fileName
{
    // Cache the reduced image
    NSData *imageData = [self TIFFRepresentation];
    NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:imageData];
//    http://www.cocoabuilder.com/archive/cocoa/151789-nsbitmapimagerep-compressed-tiff-large-files.html
    NSDictionary *imageProps = [NSDictionary dictionaryWithObjectsAndKeys:  [NSNumber numberWithInt:NSTIFFCompressionJPEG],NSImageCompressionMethod,
                                                                            [NSNumber numberWithFloat: 1.0], NSImageCompressionFactor,
                                                                            nil];
    imageData = [imageRep representationUsingType:NSTIFFFileType properties:imageProps];
    [imageData writeToFile:fileName atomically:NO];
}
@end 
```

如何获得 CR2 格式的输出文件，但几乎与输入文件的大小差不多，而 CR2 文件所需的变化很小？

**编辑1：** 根据彼得对使用`CGImageDestinationAddImageFromSource`方法的建议进行了更改，但我仍然得到相同的结果。输入源 NEF 文件大小为 21.5 MB，但转换后的目标文件大小为 144.4 MB。

请查看代码：

```
-(void)saveAsCR2WithCGImageMethodUsingName:(NSString*)inDestinationfileName withSourceFile:(NSString*)inSourceFileName
{
    CGImageSourceRef sourceFile = MyCreateCGImageSourceRefFromFile(inSourceFileName);
    CGImageDestinationRef destinationFile = createCGImageDestinationRefFromFile(inDestinationfileName);
    CGImageDestinationAddImageFromSource(destinationFile, sourceFile, 0, NULL);
//https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/ImageIOGuide/ikpg_dest/ikpg_dest.html
    CGImageDestinationFinalize(destinationFile);
}

CGImageSourceRef MyCreateCGImageSourceRefFromFile (NSString* path)
{
    // Get the URL for the pathname passed to the function.
    NSURL *url = [NSURL fileURLWithPath:path];
    CGImageSourceRef  myImageSource;
    CFDictionaryRef   myOptions = NULL;
    CFStringRef       myKeys[2];
    CFTypeRef         myValues[2];

    // Set up options if you want them. The options here are for
    // caching the image in a decoded form and for using floating-point
    // values if the image format supports them.
    myKeys[0] = kCGImageSourceShouldCache;
    myValues[0] = (CFTypeRef)kCFBooleanTrue;
    myKeys[1] = kCGImageSourceShouldAllowFloat;
    myValues[1] = (CFTypeRef)kCFBooleanTrue;

    // Create the dictionary
    myOptions = CFDictionaryCreate(NULL, (const void **) myKeys,
                                   (const void **) myValues, 2,
                                   &kCFTypeDictionaryKeyCallBacks,
                                   & kCFTypeDictionaryValueCallBacks);

    // Create an image source from the URL.
    myImageSource = CGImageSourceCreateWithURL((CFURLRef)url, myOptions);
    CFRelease(myOptions);

    // Make sure the image source exists before continuing
    if (myImageSource == NULL){
        fprintf(stderr, "Image source is NULL.");
        return  NULL;
    }
    return myImageSource;
}

CGImageDestinationRef createCGImageDestinationRefFromFile (NSString *path)
{
    NSURL *url = [NSURL fileURLWithPath:path];
    CGImageDestinationRef myImageDestination;

//https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/ImageIOGuide/ikpg_dest/ikpg_dest.html
    float compression = 1.0; // Lossless compression if available.
    int orientation = 4; // Origin is at bottom, left.
    CFStringRef myKeys[3];
    CFTypeRef   myValues[3];
    CFDictionaryRef myOptions = NULL;
    myKeys[0] = kCGImagePropertyOrientation;
    myValues[0] = CFNumberCreate(NULL, kCFNumberIntType, &orientation);
    myKeys[1] = kCGImagePropertyHasAlpha;
    myValues[1] = kCFBooleanTrue;
    myKeys[2] = kCGImageDestinationLossyCompressionQuality;
    myValues[2] = CFNumberCreate(NULL, kCFNumberFloatType, &compression);
    myOptions = CFDictionaryCreate( NULL, (const void **)myKeys, (const void **)myValues, 3,
                                   &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks);

//https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/ImageIOGuide/imageio_basics/ikpg_basics.html#//apple_ref/doc/uid/TP40005462-CH216-SW3
    CFStringRef destFileType = CFSTR("public.tiff");
//    CFStringRef destFileType = kUTTypeJPEG;
    CFArrayRef types = CGImageDestinationCopyTypeIdentifiers(); CFShow(types);

    myImageDestination = CGImageDestinationCreateWithURL((CFURLRef)url, destFileType, 1, myOptions);
    return myImageDestination;
} 
```

**编辑2：**使用@Peter 告诉的第二种方法。这给出了有趣的结果。它的效果与将finder中的文件重命名为“example_image.NEF”为“example_image.CR2”相同。令人惊讶的是，在以编程方式和在 finder 中进行转换时，21.5 MB 的源文件将变成 59 KB。这在代码中没有任何压缩集。请查看代码并建议：

```
-(void)convertNEFWithTiffIntermediate:(NSString*)inNEFFile toCR2:(NSString*)inCR2File
{
    NSData *fileData = [[NSData alloc] initWithContentsOfFile:inNEFFile];
    if (fileData)
    {
        NSBitmapImageRep *imageRep = [NSBitmapImageRep imageRepWithData:fileData];
//        [imageRep setCompression:NSTIFFCompressionNone
//                          factor:1.0];
        NSDictionary *imageProps = nil;
        NSData *destinationImageData = [imageRep representationUsingType:NSTIFFFileType properties:imageProps];
        [destinationImageData writeToFile:inCR2File atomically:NO];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:10:15.740

我要尝试的第一件事根本不涉及 NSImage 或 NSBitmapImageRep。相反，我会为源文件创建一个 CGImageSource 并为目标文件创建一个 CGImageDestination，并用于`CGImageDestinationAddImageFromSource`将所有图像从 A 传输到 B。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:13:43.503

您在此代码中两次转换为 TIFF：

1.  你创建一个 NSImage，我假设来自源文件。
2.  你向 NSImage 索要它的`TIFFRepresentation`（TIFF 转换 #1）。
3.  您从第一个 TIFF 数据创建一个 NSBitmapImageRep。
4.  您要求 NSBitmapImageRep 生成第二个 TIFF 表示（TIFF 转换 #2）。

考虑直接从源数据创建一个 NSBitmapImageRep，而不是使用 NSImage。然后，您将直接跳到步骤 4 以生成输出数据。

（但我还是会`CGImageDestinationAddImageFromSource`先尝试。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T21:52:53.480

原始图像文件有自己的（专有的）表示。例如，它们可能使用每个组件 14 位和马赛克图案，您的代码不支持这些。我认为您应该使用较低级别的 API 并对您尝试保存的 RAW 格式进行真正的逆向工程。

我将从 DNG 开始，这相对容易，因为 Adob​​e 提供了一个 SDK 来编写它。

# c# - 如何引用枚举中的属性？

> ID：15458570
> 
> 赞同：0
> 
> 时间：2013-03-17T07:37:23.337
> 
> 标签：c#, .net, vb.net, enums, attributes

如何引用 中的属性`enums`？

如果我有以下`enum`类型，如何引用该枚举类型的特定值的属性？

```
public enum PersonGender
{
    Unknown = 0,
    Male = 1,
    Female = 2,
    Intersex = 3,
    Indeterminate = 3,

    [EnumMember("Not Stated")]
    NonStated = 9,

    [EnumMember("Inadequately Described")]
    InadequatelyDescribed = 9
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T07:46:37.457

以下代码使用 .Net 4.5 扩展方法[GetCustomAttribute](http://msdn.microsoft.com/en-us/library/hh194292.aspx)来获取字段的自定义属性

```
Type enumType = typeof(PersonGender);
var value = enumType.GetField(PersonGender.NonStated.ToString())
                    .GetCustomAttribute<EnumMemberAttribute>().Value; 
// returns "Not Stated" 
```

当然，您应该为字段和自定义属性添加空检查

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:46:33.917

您可以使用[反射](http://msdn.microsoft.com/en-us/library/ms173183%28v=vs.80%29.aspx)

例如：

```
 class EnumMemberAttribute : Attribute
    {
        private String name;

        public String Name
        {
            get { return this.name; }
            set { this.name = value; }
        }

        public EnumMemberAttribute(String name)
        {
            this.name = name;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Type type = typeof(PersonGender);
            MemberInfo[] members = type.GetMember(PersonGender.NonStated.ToString());
            Object[] attributes = members[0].GetCustomAttributes(typeof(EnumMemberAttribute),
                false);
            Console.WriteLine(((EnumMemberAttribute)attributes[0]).Name);            
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:40:50.787

首先，将 InadequatelyDescribed 设置为 NonStated 以外的另一个值。

其次， EnumMembers 的正确语法是

```
[EnumMember(Value = "Not Stated")] 
```

这是解决方案 - 在**.NET 4.0**和 4.5 中工作：

```
PersonGender pg = PersonGender.InadequatelyDescribed;
string pgName = Enum.GetName(typeof(PersonGender), pg);

var t = typeof(PersonGender);
var info = t.GetMember(pgName);
var att = info[0].GetCustomAttributes(typeof(EnumMemberAttribute), false);

if (att.Length > 0)
{
    Console.WriteLine(((EnumMemberAttribute)att[0]).Value);
}
else
{
    Console.WriteLine(pgName);
} 
```

# scriptella - onerror 上的 Scriptella 功能请求：connection-id

> ID：15458573
> 
> 赞同：1
> 
> 时间：2013-03-17T07:37:49.613
> 
> 标签：scriptella

这是一个功能请求，来自下面的链接似乎还没有其他解决方法，而是在上下文中的当前连接中执行操作：

[https://groups.google.com/forum/?fromgroups=#!topic/scriptella/BpfD6BJc804](https://groups.google.com/forum/?fromgroups=#!topic/scriptella/BpfD6BJc804)

是否可以在“onerror”标签中支持“connection-id”？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:33:12.783

**更新：**该功能已经实现，将包含在 1.2 版本中。当前开发快照可以从这里下载：http: [//javaforge.com/displayDocument/scriptella-1.2-SNAPSHOT.zip ?doc_id=222665](http://javaforge.com/displayDocument/scriptella-1.2-SNAPSHOT.zip?doc_id=222665)

* * *

我已经创建了一个[更改请求](http://javaforge.com/issue/54586)，并将考虑在未来的版本中添加此功能。

关于解决方法。为什么不能接受？

# javascript - javascript无法从文本框中获取字符串

> ID：15458576
> 
> 赞同：1
> 
> 时间：2013-03-17T07:38:18.567
> 
> 标签：javascript, asp.net, user-controls

我正在尝试从 Textbox ASP.NET 控件中获取日期字符串，但没有成功。我的代码是：

```
function countdown() {
    now = new Date();
    var biddate = $("#InitiateDate1").val();
    kickoff = Date.parse(biddate);
    diff = kickoff - now;... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:39:34.957

它是`$('<%=InitiateDate1.ClientID%>').val();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:24:27.630

你试一试

```
function countdown() {
    now = new Date();
    var biddate = document.getElementById('<%=InitiateDate1.ClientID%>').value
    kickoff = Date.parse(biddate); 
```

# python - 使用 Arduino 的 Python 脚本无法正确读取数据

> ID：15458577
> 
> 赞同：1
> 
> 时间：2013-03-17T07:38:29.193
> 
> 标签：python, arduino, pyserial, temperature

我的 Python 脚本有问题。它正在工作，但出了点问题。我是 Python 的新手，所以我找不到任何解决方案:(

我的脚本通过 pySerial 连接到 Arduino 板，并读取温度数据。它连接正常，但终端中显示的数据或保存在 TXT 文件中（使用 Cron）是错误的：

```
2013-03-16 13:40:01 166.8
2013-03-16 13:41:02 1617. 
```

它应该在哪里：

```
2013-03-16 13:40:01 16.68
2013-03-16 13:41:02 16.17 
```

我的 Python 脚本：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
# pytemp.py

import serial
import time

ser = serial.Serial('/dev/ttyACM0',9600, timeout=10)
read = ser.read(5)
comp = read.split()
ser.close();
print time.strftime("%Y-%m-%d %H:%M:%S"), comp[0] 
```

我正在使用 Python3.3 和 pySerial 2.6。在原始版本中有：

```
read = ser.readline(eol=/r) 
```

但据我所知，2.5+ eol 命令不再起作用。我不知道如何编辑我的脚本以始终正确打印数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:34:28.283

根据[文档](http://pyserial.sourceforge.net/shortintro.html#readline)，使用更高版本的 Python 2.6 时确实不再支持 eol 参数。

请忽略我之前的使用建议`FileLike`。这也没有在 python 2.6+ 中使用！

您必须如何处理数据取决于*数据的外观*。由于您没有向我们提供原始数据的示例，因此我将使用[此页面](http://lallafa.de/blog/2012/11/build-an-arduino-based-temperature-logger/)中的格式作为示例。

上述示例中的数据格式为：

```
t: 2012.11.18 19:39:03 50A93957 +024.50 0189
t: 2012.11.18 19:39:13 50A93961 +024.50 0189
t: 2012.11.18 19:39:23 50A9396B +024.50 0188 
```

每行都有以下列：

*   日期和时间
*   十六进制的原始日期和时间
*   摄氏温度值
*   十六进制的原始温度值

您会注意到每个度量都以“t:”开头，并且有六个项目以空格分隔。所以在这种情况下，我会运行一个像这样工作的循环：

```
import serial
import time

buffer = bytes()
ser = serial.Serial('/dev/ttyACM0',9600, timeout=10)
while buffer.count('t:') < 2:
    buffer += ser.read(30)
ser.close();
# Now we have at least one complete datum. Isolate it.
start = buffer.index('t:')
end = buffer.index('t:', start+1)
items = buffer[start:end].strip().split()
print items[1], items[2], items[4] 
```

一个例子。意识到您可能会从一行数据的中间开始阅读。你不能假设你从一行的开头开始阅读。

```
In [23]: buffer = '39:03 50A9\r\nt: 2012.11.18 19:39:13 50A93961 +024.50 0189\r\nt: 2012.11.18 19:39:23 50A9396B +024.50 0188' 
```

让我们检查一下我们能找到多少个 't:'。（你也可以搜索 '\r\n' 代替。重要的是你有一些东西可以用来分隔行）

```
In [24]: buffer.count('t:')
Out[24]: 2 
```

由于我们有两个分隔符，我们至少有一个数据点。让我们隔离完整的数据点。

```
In [25]: buffer.index('t:')
Out[25]: 12

In [26]: buffer.index('t:', 12+1)
Out[26]: 58 
```

这是我们希望看到的。一个完整的数据点：

```
In [27]: buffer[12:58+1].strip().split()
Out[27]: ['t:', '2012.11.18', '19:39:13', '50A93961', '+024.50', '0189', 't']

In [28]: items = buffer[12:59].strip().split()

In [29]: print items[1], items[2], items[4]
2012.11.18 19:39:13 +024.50 
```

# android - 我可以从手机中的网络浏览器发送意向广播，感兴趣的广播接收器（本机应用程序）可以接收吗？

> ID：15458578
> 
> 赞同：1
> 
> 时间：2013-03-17T07:38:35.807
> 
> 标签：android

我可以从手机中的网络浏览器发送意图广播，并且可以由 Android 中感兴趣的广播接收器（本机应用程序）接收吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:39:57.060

在 HTML 中使用它：

```
<a href="intent://my_host#Intent;scheme=my_scheme;action=my_action;end">Link to my stuff</a> 
```

然后将这些放在清单中：

```
 <intent-filter>
        <action android:name="android.intent.action.VIEW"/>
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
        <data android:scheme="my_scheme" android:host="my_host" />
    </intent-filter> 
```

# symfony - generateUrl 外部控制器

> ID：15458580
> 
> 赞同：13
> 
> 时间：2013-03-17T07:38:50.130
> 
> 标签：symfony

是否有可能在控制器之外使用 generateUrl() 方法？

我尝试在带有 的自定义存储库类中使用它`$this->get('router')`，但它不起作用。

**更新**

我在这里找到了一个临时解决方案：

[http://www.phamviet.net/2012/12/09/symfony-2-inject-service-as-dependency-in-to-repository/](http://www.phamviet.net/2012/12/09/symfony-2-inject-service-as-dependency-in-to-repository/)

我将整个服务容器注入到我的存储库中，尽管它“不推荐”。

但它现在有效。

**更新2**

注入路由器而不是整个容器可能是一个更好的主意:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-17T08:00:59.737

如果您查看[的源代码`Controller::generateUrl()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php#L47-50)，您会看到它是如何完成的：

```
$this->container->get('router')->generate($route, $parameters, $referenceType); 
```

基本上你只需输入路线的名称（`$route`这里）；如果存在，一些参数 ( `$parameters`) 和引用类型（ 的常量之一[`UrlGeneratorInterface`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Routing/Generator/UrlGeneratorInterface.php#L36-56)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-17T15:46:30.780

不要将容器注入到您的存储库中......真的，不要！

如果我是你，我会创建一个服务并将路由器注入其中。在此服务中，我将创建一个方法，该方法使用存储库并使用路由器添加所需的代码。

对于其他开发人员来说，这不那么脏且易于使用/理解。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T11:22:01.160

将路由器本身注入到您的 EntityRepsitory 中（如 Development Life 博客的帖子[Symfony 2：将服务作为依赖注入到学说存储库](http://www.phamviet.net/2012/12/09/symfony-2-inject-service-as-dependency-in-to-repository/)中所述），然后您可以使用`$this->router->generate('acme_route');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-31T08:52:49.243

在 symfony 4 和 Sylius 中，当 FormType 扩展一个（例如）AbstractResourceType

```
class PostType extends AbstractResourceType
{

    private $router;
    public function __construct(RouterInterface $router, $dataClass, $validationGroups = [])
    {
        $this->router = $router;
        parent::__construct($dataClass, $validationGroups);

    }
} 
```

服务.yaml：

```
app.post.form.type:
        class: App\Form\Admin\Post\PostType
        tags:
            - { name: form.type }
        arguments: ['@router.default', '%app.model.post.class%' ] 
```

# automated-tests - 如何在 QTP 中参数化链接对象/元素？

> ID：15458582
> 
> 赞同：0
> 
> 时间：2013-03-17T07:38:55.667
> 
> 标签：automated-tests, qtp

请给我一个提示如何在 QTP 中参数化链接元素...因为我们可以参数化“WebEdit”元素/对象，我们可以参数化“链接”元素/对象吗？我们怎么能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:36:22.697

通过参数化，您是指参数化链接元素的属性以使用描述性编程来识别它吗？或者是别的什么？？请详细说明！！
您可以为要使用的每种对象类型构建如下所示的函数。

```
public Function CreateLinkDescription(LinkInnerTextValue, LinkHrefValue)
    Set objLink = Description.Create()  
    objLink("innertext").Value = LinkInnerTextValue
    objLink("href").Value = LinkHrefValue      
    'Add any other properties that you want to specify in the same fashion as above                                                                                                    
    Set CreateLinkDescription = objLink
End Function 
```

# java - 在Android中调用asyntask时出现定时器错误

> ID：15458587
> 
> 赞同：0
> 
> 时间：2013-03-17T07:39:40.237
> 
> 标签：java, android, timer, android-asynctask

我在服务中有这个计时器，它运行良好并且计数......但是当我调用一些 asyntask 时，它给了我错误！

```
Timer time = new Timer(); // Instantiate Timer Object
    time.schedule(new TimerTask(){
        public void run() {
                // i call my Asyntasks here
       }
    },5000,5000); 
```

这给了我错误：

```
03-17 02:02:27.167: E/AndroidRuntime(925): FATAL EXCEPTION: Timer-0
03-17 02:02:27.167: E/AndroidRuntime(925): java.lang.ExceptionInInitializerError
03-17 02:02:27.167: E/AndroidRuntime(925):  at      Dic.proj.pkg.notifService$1.run(notifService.java:57)
  03-17 02:02:27.167: E/AndroidRuntime(925):    at    java.util.Timer$TimerImpl.run(Timer.java:289)
  03-17 02:02:27.167: E/AndroidRuntime(925): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
  03-17 02:02:27.167: E/AndroidRuntime(925):    at android.os.Handler.<init>(Handler.java:121)
  03-17 02:02:27.167: E/AndroidRuntime(925):    at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
  03-17 02:02:27.167: E/AndroidRuntime(925):    at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
   03-17 02:02:27.167: E/AndroidRuntime(925):   at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
   03-17 02:02:27.167: E/AndroidRuntime(925):   ... 2 more 
```

如果我输入其他指令，例如 Log.d("message"); 一切顺利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:52:33.020

**AsynchTask**需要从 UI 线程或至少一个带有 looper 的线程创建/调用，以在任务想要向调用者线程发布任何内容时处理回调，例如`onPostExcute()`......并且使用在其自己的线程中运行的**Timer**对象不t 满足这个条件。

我建议您使用**Handler**结合**Timer**来实现这一点，甚至可以使用 handler 对象创建自己的计时器。

第一个想法看起来像这样：

```
final Handler handler = new Handler();
Timer time = new Timer(); // Instantiate Timer Object
time.schedule(new TimerTask(){
    public void run() {
            handler.post(new Runnable(){
            // i call my Asyntasks here
             });
   }
},5000,5000); 
```

查看此处以了解有关处理程序和计时器的更多信息：

[定时器](http://developer.android.com/reference/java/util/Timer.html)

[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

这是一个关于线程的好教程： [教程](http://www.vogella.com/articles/AndroidBackgroundProcessing/article.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T07:45:47.647

看来，您应该在 UI 线程内启动 AsyncTasks。

您可以尝试使用[Handler.postDelayed(Runnale, long)](https://developer.android.com/reference/android/os/Handler.html#postDelayed%28java.lang.Runnable,%20long%29)而不是 Timer。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T07:54:37.080

AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。

任务实例必须在 UI 线程上创建。

您正在创建一个新线程。使用处理程序。在主线程上运行

```
private Handler handler = new Handler();
Runnable task = new Runnable() {
@Override
public void run() {
    //do something
    handler.postDelayed(this, 100000);
}
};
handler.removeCallbacks(task);
handler.post(task); 
```

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# django - 为特定测试用例加载夹具

> ID：15458592
> 
> 赞同：0
> 
> 时间：2013-03-17T07:40:30.147
> 
> 标签：django, selenium, django-testing

我有一种情况，我需要在功能测试类中为不同的情况加载不同的夹具

```
class Mytest(LiveServerTestCase):
    fixtures = ['somefixture.json']

    def test_some_test_method(self):
        #load more fixtures for this test case
        fixtures.extend(['some_other_fixture.json']) 
```

django 支持这个，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T15:00:36.180

您倾向于为不同的测试加载不同的数据是好的。然而，与许多情况一样，固定装置是完成这项任务的原始而暴力的工具。

相反，我建议您尝试工厂方法。通过为您正在使用的模型创建工厂，您可以在您的场景中取得一些胜利：

*   即使您的模型发生变化，您的测试套件也将保持连贯性（尽管，如果您添加新的必填字段，您可能需要更新您的工厂，尽管这与必须创建新的夹具仍然相去甚远）
*   您可以通过巧妙地更改工厂的实现以满足每个单独测试的要求来干掉为每个测试创建适当状态所涉及的大量逻辑
*   您将确保您的测试是针对实际存在于您的应用程序状态中的数据运行的，而不是针对您创建夹具时应用程序所处的状态。

[给工厂男孩看看。](https://factoryboy.readthedocs.org/en/latest/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:15:47.490

看来您正在尝试以一种不完全可取的方式使用固定装置。

Fixtures 仅用于包含在整个测试套件中通用的数据，而不是在类/测试用例级别。

当您尝试制作一个好的测试套件时，让您的测试相互隔离非常重要。让测试改变彼此的数据，或者让测试依赖于另一个测试改变数据，本质上是脆弱的。

您应该使用 setUp() 和 tearDown() 来处理类级别的数据操作，并在您的功能套件中加上正确的类隔离。

最重要的是，你还可以看一下tearDown()的这个用法，没有注解的用法是不同的：

```
@classmethod
    def tearDownClass(cls): 
```

# cakephp - 根据用户字段 cakePHP 过滤数据

> ID：15458594
> 
> 赞同：0
> 
> 时间：2013-03-17T07:40:40.087
> 
> 标签：cakephp

所以我有一个基于公司的系统，我将所有数据保存在一个数据库中，并使用所有表和用户表中存在的 site_id 字段来分隔数据。

现在我正在对每一个 find('all') 做一个条件。有没有更全球化的方式来做到这一点。也许在 AppController 中？即使为了保存数据，我也必须在每次保存时设置 site_id。

就像是

```
public function beforeFilter() {

    parent::beforeFilter();
    $this->set('site_id', $this->Auth->user('site_id'));

} 
```

任何方向只会有帮助。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:18:16.443

**TLDR：**

`beforeFind()`使用将条件附加`site_id`到所有查询的方法创建行为。

**示例/详细信息：**

按照以下内容创建行为。请注意，我是从 Configure 变量中获取 siteId 的，但您可以随意获取。

```
<?php
class SiteSpecificBehavior extends ModelBehavior {

    public function setup(Model $Model, $settings = array()) {
        $Model->siteId = Configure::read('Site.current.id');
    }

    public function beforeFind(Model $Model, $query = array()) {
        $siteId = $Model->siteId;
        $query['conditions'][$Model->alias . '.site_id'] = $siteId ;
        return $query;
    }
} 
```

然后在您要确保其特定于站点的任何/所有模型上，添加：

```
public $actsAs = array('SiteSpecific'); 
```

这当然可以调整和改进，但它应该给你一个好主意。

# iphone - tableView 没有正确重用单元格

> ID：15458595
> 
> 赞同：0
> 
> 时间：2013-03-17T07:40:42.907
> 
> 标签：iphone, ios, uitableview

这是我的 tableView 代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CounterCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"CounterCell" owner:self options:nil];
        cell = nibLoadedCell2;
    }

    Program *program = [memory getProgramAtIndex:[memory chosenProgram]];
    NSMutableArray *arrayOfIntervals = [[NSMutableArray alloc] init];
    arrayOfIntervals = program.arrayOfIntervals;
    NSMutableDictionary *interval = [arrayOfIntervals objectAtIndex:indexPath.row];

    UITextField *intervalName = (UITextField *)[cell viewWithTag:1];
    intervalName.text = [interval objectForKey:@"nameOfInterval"];
    [intervalName addTarget:self action:@selector(returnKey:) forControlEvents:UIControlEventEditingDidEndOnExit];
    [intervalName addTarget:self action:@selector(editingEnded:) forControlEvents:UIControlEventEditingDidEnd];
    [intervalName addTarget:self action:@selector(editTextField:) forControlEvents:UIControlEventEditingDidBegin];

    timeInSeconds = [[interval objectForKey:@"timeInSeconds"] intValue];

    if (indexPath.row == 0) {
        firstCellGeneralTime = timeInSeconds;
    }

    NSString *time = [self timeTextWithTimeInSeconds:timeInSeconds];

    UILabel *intervalTime = (UILabel *)[cell viewWithTag:2];
    intervalTime.text = time;

    if (indexPath.row == 0) {
        majorLabel.text = time;
    }

    UILabel *hourString = (UILabel *)[cell viewWithTag:11];
    hourString.text = [NSString stringWithFormat:@"%d",hoursInt];

    UILabel *minuteString = (UILabel *)[cell viewWithTag:12];
    minuteString.text = [NSString stringWithFormat:@"%d",minutesInt];

    UILabel *secondString = (UILabel *)[cell viewWithTag:13];
    secondString.text = [NSString stringWithFormat:@"%d",secondsInt];

    UIButton *editTime = (UIButton *)[cell viewWithTag:21];
    [editTime addTarget:self action:@selector(openPicker:) forControlEvents:UIControlEventTouchUpInside];

    return cell;
} 
```

我的表格视图显示的单元格少于 3 个，在某个点上，我删除了第一个单元格，然后显示了第 4 个单元格。

问题是第 4 个单元格与我的第 3 个单元格完全一样，尽管应该有所不同。

它确实按应有的方式重用它。

我不知道我做错了什么。

这是删除单元格的代码：

```
NSIndexPath *firstCellIndexPath = [NSIndexPath indexPathForRow:0 inSection:0];
NSArray *arrayOfIndexPath = [[NSArray alloc] initWithObjects:firstCellIndexPath, nil];
[atableView deleteRowsAtIndexPaths:arrayOfIndexPath withRowAnimation:UITableViewRowAnimationTop]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:56:54.940

在删除单元格时，您必须`interval`从`program.arrayOfIntervals`数组中删除第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:21:47.740

找到了，有问题的代码是：

```
Program *program = [memory getProgramAtIndex:[memory chosenProgram]];
NSMutableArray *arrayOfIntervals = [[NSMutableArray alloc] init];
arrayOfIntervals = program.arrayOfIntervals;
NSMutableDictionary *interval = [arrayOfIntervals objectAtIndex:indexPath.row]; 
```

我正在创建一个新程序并从中获取间隔的详细信息，而不是使用我从中删除第一个间隔的程序......</p>

我觉得好傻...

# json - 从过滤器模型（或 json）中查询主干集合（或 json）

> ID：15458601
> 
> 赞同：1
> 
> 时间：2013-03-17T07:42:20.553
> 
> 标签：json, backbone.js, filtering

我正在尝试根据 LocationCollection 中的数据呈现谷歌地图。用户将在模型中定义 filterParameters，这是来自过滤器的 JSON

```
var filter = {
    "id_ref_type_category":[2,4],
    "pricemin":5,
    "pricemax":15,
    "distmin":10, // meters
    "distmax":150 // meters
} 
```

我需要查询我的收藏，这是我所在位置的 json 样本

```
var location = [
{
    "id":"1",
    "name":"Sushi 1",
    "price_min":"10",
    "price_max":"20",
    "price_avg":"15",
    "id_ref_type_category":"1",
    "latitude":"48.863831",
    "longitude":"2.356215"
},
{
    "id":"2",
    "description":"Miam ",
    "price_min":"15",
    "price_max":"35",
    "price_avg":"25",
    "id_ref_type_category":"4",
    "latitude":"48.864269",
    "longitude":"2.355153"
},
{
    "id":"3",
    "name":"Restaurant 1",
    "price_min":"5",
    "price_max":"20",
    "price_avg":"12.5",
    "street_number":"60",
    "id_ref_type_category":"1",
    "latitude":"48.863407",
    "longitude":"2.350938"
},
{
    "id":"4",
    "name":"Chez gigi",
    "price_min":"0",
    "price_max":"17",
    "price_avg":"8.5",
    "id_ref_type_category":"2",
    "latitude":"48.861824",
    "longitude":"2.350901"
}
] 
```

关于我的过滤器参数，我正在寻找

*   id_ref_type_category 等于 2 或 4 的位置
*   平均价格在 5 和 15 左右的位置
*   10 到 150 距离内的位置（以米为单位）（如果用户允许地理定位）

[我可以通过地理编码http://www.geodatasource.com/developers/javascript](http://www.geodatasource.com/developers/javascript)使用这个 js 函数计算从我的位置到该位置的距离

我一直在寻找骨干集合过滤但没有找到很多，我寻找过 json 查询系统，但找不到任何东西。

我接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:08:46.330

如何为所有属性应用下划线过滤器，如下所示：

[http://jsfiddle.net/cnDeu/1/](http://jsfiddle.net/cnDeu/1/)

我已经放松了一点你的过滤器对象，以便一个位置可以通过。

本质上，过滤器如下所示：

```
var filtered = loc.filter(function (el) {
    var dist = distance(el.get('latitude'), el.get('longitude'),
                        position.latitude, position.longitude, 'K') / 1000;

    return ((el.get('id') == filter.id_ref_type_category[0]) ||
        (el.get('id') == filter.id_ref_type_category[1])) &&
        el.get('price_avg') >= filter.pricemin &&
        el.get('price_avg') <= filter.pricemax &&
        dist >= filter.distmin &&
        dist <= filter.distmax;
}); 
```

# android - 动态 ListView - 单击按钮时刷新

> ID：15458605
> 
> 赞同：0
> 
> 时间：2013-03-17T07:43:18.320
> 
> 标签：android, android-listview

安卓 2.3.3

我在 stackoverflow 上看到了一些关于刷新列表视图的问题。但他们都没有为我工作。

我有一个动态列表视图，里面有一个按钮。数据是从数据库中填充的，每个列表视图行都是一个自定义布局。在按下（清除）按钮时，数据库被清除（工作正常）并且列表视图应该被刷新（要弄清楚的部分）。

下面是代码...

```
import java.util.ArrayList;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;

import com.mobilevoiceapps.advancedvoicecalculatorfree.R;

public class History extends ListActivity {

    ListView lvHistory;
    ArrayAdapter<String> adHistory;
    ArrayList<String> alHistoryCopy = new ArrayList<String>();
    String[] emptyList = { "Your Calculations History is Empty. Please Perform Some Calculations and visit again." };

    Database db;
    Cursor c;

    String expression = "";
    String result = "";

    boolean isEmpty = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        // setContentView(R.layout.history);

        lvHistory = getListView();
        final MyCustomAdapter myad = new MyCustomAdapter();

        db = new Database(this);
        c = db.retrieve_history();

        if (!((c.moveToFirst()) || c.equals(null) || c.getCount() == 0)) {

        } else if (c.getCount() > 0) {
            c.moveToFirst();
        }

        LayoutInflater header = getLayoutInflater();

        View header_View = header.inflate(R.layout.history_header, null);
        lvHistory.addHeaderView(header_View);

        View second_Header_View = header.inflate(
                R.layout.history_second_header, null);
        lvHistory.addHeaderView(second_Header_View);

        Button btnClearHistory = (Button) second_Header_View
                .findViewById(R.id.btnClearHistory);
        btnClearHistory.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                db.clear_history();
                myad.notifyDataSetChanged();
                lvHistory.invalidateViews();
                lvHistory.refreshDrawableState();
            }

        });

        lvHistory.setAdapter(myad);

    }

    class MyCustomAdapter extends BaseAdapter {

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return c.getCount();
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            // TODO Auto-generated method stub

            HistoryViewHolder viewHolder;

            if (convertView == null) {
                LayoutInflater li = getLayoutInflater();
                convertView = li.inflate(R.layout.history_row, null);

                viewHolder = new HistoryViewHolder();

                viewHolder.txtcnt = (TextView) convertView
                        .findViewById(R.id.txtView_History_Count);
                viewHolder.txtexp = (TextView) convertView
                        .findViewById(R.id.txtView_History_Expression);
                viewHolder.txtres = (TextView) convertView
                        .findViewById(R.id.txtView_History_Result);

                convertView.setTag(viewHolder);
            } else {
                viewHolder = (HistoryViewHolder) convertView.getTag();
            }

            viewHolder.txtcnt.setText(String.valueOf(position + 1));
            System.out.println("Position"
                    + viewHolder.txtcnt.getText().toString());

            c.moveToPosition(position);

            expression = c.getString(c.getColumnIndex("expression"));
            result = c.getString(c.getColumnIndex("result"));

            viewHolder.txtexp.setText(expression);
            System.out.println("Expression"
                    + viewHolder.txtexp.getText().toString());
            viewHolder.txtres.setText(result);
            System.out.println("Result"
                    + viewHolder.txtres.getText().toString());

            return convertView;
        }

        public class HistoryViewHolder {
            TextView txtcnt;
            TextView txtexp;
            TextView txtres;
        }

    }

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();

        if (db != null) {
            db.close();
        }

        if (c != null) {
            c.close();
        }
    }

} 
```

编辑 ::: 使用屏幕截图 :::

![在此处输入图像描述](../Images/226f3c866205518d301eb1dd845e4b7d.png)

![在此处输入图像描述](../Images/20c7b5ccf4feba3c7992d62734234f6f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:48:31.157

试试这个，你需要`ListView`在删除一个项目后刷新你使用`myad.notifyDataSetChanged();`

```
 btnClearHistory.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

       YourActivity.this.runOnUiThread(new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            myad.notifyDataSetChanged();
        }
    });
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T07:49:44.910

尝试从 BaseAdapter 扩展您的 MyCustomAdapter 并使用 notifyDataSetChanged 刷新 ListView。

显示数据库内容的更好方法是 CursorAdapter（或 CursorLoader）——此类适配器侦听更新通知并自动重新加载内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:21:41.170

尝试添加`c = db.retrieve_history();`后`db.clear_history();`。

```
@Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            db.clear_history();
            c = db.retrieve_history();
            myad.notifyDataSetChanged();
            lvHistory.invalidateViews();
            lvHistory.refreshDrawableState();
        } 
```

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T07:48:31.813

只需重新开始您的活动..

```
ActivityName.this.finish();
Intent intent=new Intent(this, ActivityName.class);
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-19T23:19:11.457

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_loja, container, false);

    listatividade = (ListView) view.findViewById(R.id.listservico);

    String[] valueatividade = new String[] { "atividade 1",
                                             "atividade 2",
                                             "atividade 3" };

    adapteratividade = new ArrayAdapter<String>(getActivity(),
            android.R.layout.simple_list_item_1, android.R.id.text1, valueatividade);

    listatividade.setAdapter(adapteratividade);

    listaatividade.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,int position, long id) {

            int itemPosition     = position;
            String  itemValue    = (String) listaatividade.getItemAtPosition(position);
            Toast.makeText(getActivity(), "Position :"+itemPosition+"  ListItem : " +itemValue , Toast.LENGTH_LONG) .show();
            updateData();
        }

    });

    return view;
}

private void updateData() {

    getActivity().runOnUiThread(new Runnable() {
        @Override
        public void run() {
            String[] valueatividade = new String[] { "atividade 4", "atividade 5", "atividade 6" };
            adapteratividade = new ArrayAdapter<String>(getActivity(),android.R.layout.simple_list_item_1, android.R.id.text1, valueatividade);
            listatividade.setAdapter(adapteratividade);
        }
    });

} 
```

# android - phonegap 第一个应用程序在安装第二个应用程序时替换了 android

> ID：15458606
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:43:18.960
> 
> 标签：android, html, cordova, jquery-mobile

我已经开发了 2 个 android 本机应用程序`HTML5 with jquery mobile framework`，最后我使用`Phonegap build`功能来构建我的应用程序文件`apk`，它工作得很好..

我的问题是首先我安装了我的第一个应用程序我的三星 Galaxy S3 设备它工作正常，但是当我将我的第二个应用程序安装到同一设备时它说**“你正在安装的这个应用程序将替换另一个应用程序”**，为什么这样。？这两个应用程序的样式、大小等完全不同......但是当安装第二个应用程序第一个应用程序被替换时...... phonegap`config.xml`必须添加任何额外的行来忽略这个问题..??

这是我`config.xml`的第一个申请文件

```
<?xml version="1.0" encoding="UTF-8"?>

<!-- config.xml reference: https://build.phonegap.com/docs/config-xml -->
<widget xmlns     = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.q8scool"
        version   = "1.0.0">

    <name>Q8Scool</name>

    <description>
        Q8Scool is a free app for teachers and students, a new level online classroom...
    </description>

    <author href="http://phonegap.com" email="support@phonegap.com">
        Gates Business Solutions
    </author>
    <feature name="http://api.phonegap.com/1.0/device" />
    <preference name="permissions"                value="none"/>

    <!-- Customize your app and platform with the preference element. -->
    <preference name="phonegap-version"           value="2.3.0" />          <!-- all: current version of PhoneGap -->
    <preference name="orientation"                value="default" />        <!-- all: default means both landscape and portrait are enabled -->
    <preference name="target-device"              value="universal" />      <!-- all: possible values handset, tablet, or universal -->
    <preference name="fullscreen"                 value="true" />           <!-- all: hides the status bar at the top of the screen -->
    <preference name="webviewbounce"              value="true" />           <!-- ios: control whether the screen 'bounces' when scrolled beyond the top -->
    <preference name="prerendered-icon"           value="true" />           <!-- ios: if icon is prerendered, iOS will not apply it's gloss to the app's icon on the user's home screen -->
    <preference name="stay-in-webview"            value="false" />          <!-- ios: external links should open in the default browser, 'true' would use the webview the app lives in -->
    <preference name="ios-statusbarstyle"         value="black-opaque" />   <!-- ios: black-translucent will appear black because the PhoneGap webview doesn't go beneath the status bar -->
    <preference name="detect-data-types"          value="true" />           <!-- ios: controls whether data types (such as phone no. and dates) are automatically turned into links by the system -->
    <preference name="exit-on-suspend"            value="false" />          <!-- ios: if set to true, app will terminate when home button is pressed -->
    <preference name="show-splash-screen-spinner" value="true" />           <!-- ios: if set to false, the spinner won't appear on the splash screen during app loading -->
    <preference name="auto-hide-splash-screen"    value="true" />           <!-- ios: if set to false, the splash screen must be hidden using a JavaScript API -->
    <preference name="disable-cursor"             value="false" />          <!-- blackberry: prevents a mouse-icon/cursor from being displayed on the app -->
    <preference name="android-minSdkVersion"      value="14" />             <!-- android: MIN SDK version supported on the target device. MAX version is blank by default. -->
    <preference name="android-installLocation"    value="auto" />           <!-- android: app install location. 'auto' will choose. 'internalOnly' is device memory. 'preferExternal' is SDCard. -->
    <!-- Define app icon for each platform. -->
    <icon src="icon.png" />
    <icon src="res/icon/android/icon-36-ldpi.png"   gap:platform="android"    gap:density="ldpi" />
    <icon src="res/icon/android/icon-48-mdpi.png"   gap:platform="android"    gap:density="mdpi" />
    <icon src="res/icon/android/icon-72-hdpi.png"   gap:platform="android"    gap:density="hdpi" />
    <icon src="res/icon/android/icon-96-xhdpi.png"  gap:platform="android"    gap:density="xhdpi" />
    <icon src="res/icon/blackberry/icon-80.png"     gap:platform="blackberry" />
    <icon src="res/icon/blackberry/icon-80.png"     gap:platform="blackberry" gap:state="hover"/>
    <icon src="res/icon/ios/icon-57.png"            gap:platform="ios"        width="57" height="57" />
    <icon src="res/icon/ios/icon-72.png"            gap:platform="ios"        width="72" height="72" />
    <icon src="res/icon/ios/icon-57-2x.png"         gap:platform="ios"        width="114" height="114" />
    <icon src="res/icon/ios/icon-72-2x.png"         gap:platform="ios"        width="144" height="144" />
    <icon src="res/icon/webos/icon-64.png"          gap:platform="webos" />
    <icon src="res/icon/windows-phone/icon-48.png"  gap:platform="winphone" />
    <icon src="res/icon/windows-phone/icon-173.png" gap:platform="winphone"   gap:role="background" />

    <!-- Define app splash screen for each platform. -->
    <gap:splash src="res/screen/android/screen-ldpi-portrait.png"  gap:platform="android" gap:density="ldpi" />
    <gap:splash src="res/screen/android/screen-mdpi-portrait.png"  gap:platform="android" gap:density="mdpi" />
    <gap:splash src="res/screen/android/screen-hdpi-portrait.png"  gap:platform="android" gap:density="hdpi" />
    <gap:splash src="res/screen/android/screen-xhdpi-portrait.png" gap:platform="android" gap:density="xhdpi" />
    <gap:splash src="res/screen/blackberry/screen-225.png"         gap:platform="blackberry" />
    <gap:splash src="res/screen/ios/screen-iphone-portrait.png"    gap:platform="ios"     width="320" height="480" />
    <gap:splash src="res/screen/ios/screen-iphone-portrait-2x.png" gap:platform="ios"     width="640" height="960" />
    <gap:splash src="res/screen/ios/screen-ipad-portrait.png"      gap:platform="ios"     width="768" height="1024" />
    <gap:splash src="res/screen/ios/screen-ipad-landscape.png"     gap:platform="ios"     width="1024" height="768" />
    <gap:splash src="res/screen/windows-phone/screen-portrait.jpg" gap:platform="winphone" />
    <access origin="http://127.0.0.1*"/> <!-- allow local pages -->
</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:09:46.223

我从上述评论之一中得到了我的问题的答案。只是`id`为每个应用程序使用不同的，

上面的例子：`id = "com.phonegap.q8scool"`和`id = "com.phonegap.othername"`

# c# - 索引大文件的数据结构

> ID：15458608
> 
> 赞同：9
> 
> 时间：2013-03-17T07:43:50.197
> 
> 标签：c#, algorithm, list, data-structures, complexity-theory

我需要为一个非常大的（50GB+）ASCII 文本文件建立一个索引，这将使我能够提供对文件的快速随机读取访问（获取第 n 行，获取第 n 行中的第 n 个单词）。我决定使用`List<List<long>> map`，其中`map[i][j]`element 是文件中第 i 行的第 j 个单词的位置。

我将按顺序构建索引，即读取整个文件并用`map.Add(new List<long>())`（新行）和`map[i].Add(position)`（新词）填充索引。然后，我将使用 检索特定的单词位置`map[i][j]`。

我看到的唯一问题是我无法预测行/字的总数，所以我会在每次`List`重新分配时遇到 O(n)，不知道如何避免这种情况。

我为该任务选择的数据结构还有其他问题吗？哪种结构可能更好？

**UPD**：文件在运行时不会被更改。除了我列出的内容外，没有其他方法可以检索内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T07:55:12.143

1.  增加大列表的大小是非常昂贵的操作；因此，最好在开始时保留列表大小。
2.  我建议使用 2 个列表。第一个包含文件中单词的索引，第二个包含第一个列表中的索引（相应行中第一个单词的索引）。
3.  您很可能会超出所有可用 RAM。并且当系统开始分页/分页 GC 管理的 RAM 时，程序的性能将完全被杀死。我建议将您的数据存储在内存映射文件中，而不是托管内存中。[http://msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)

当您需要处理大量不适合 RAM 的数据时，UPD 内存映射文件非常有效。基本上，如果您的索引变得大于可用 RAM，这是您唯一的选择。

# angularjs - 如何在页面加载时执行 AngularJS 控制器功能？

> ID：15458609
> 
> 赞同：367
> 
> 时间：2013-03-17T07:43:56.493
> 
> 标签：angularjs, onload

目前我有一个允许搜索和显示结果的 Angular.js 页面。用户单击搜索结果，然后单击返回按钮。我希望再次显示搜索结果，但我不知道如何触发搜索执行。这是详细信息：

*   我的 Angular.js 页面是一个搜索页面，带有一个搜索字段和一个搜索按钮。用户可以手动输入查询并按下按钮，然后触发 ajax 查询并显示结果。我用搜索词更新 URL。这一切都很好。
*   用户点击搜索结果并被带到不同的页面 - 这也很好。
*   用户单击返回按钮，然后返回我的角度搜索页面，并显示正确的 URL，包括搜索词。一切正常。
*   我已将搜索字段值绑定到 URL 中的搜索词，因此它包含预期的搜索词。一切正常。

如何在无需用户按下“搜索按钮”的情况下再次执行搜索功能？如果是 jquery，那么我将在 documentready 函数中执行一个函数。我看不到 Angular.js 的等价物。

* * *

## 回答 #1

> 赞同：435
> 
> 时间：2013-03-17T16:22:59.207

一方面，正如@Mark-Rajcok 所说，您可以摆脱私有内部功能：

```
// at the bottom of your controller
var init = function () {
   // check if there is query in url
   // and fire search in case its value is not empty
};
// and fire it after definition
init(); 
```

你也可以看看[ng-init](http://docs.angularjs.org/api/ng.directive:ngInit)指令。实现将很像：

```
// register controller in html
<div data-ng-controller="myCtrl" data-ng-init="init()"></div>

// in controller
$scope.init = function () {
    // check if there is query in url
    // and fire search in case its value is not empty
}; 
```

但是请注意它，因为[角度文档暗示（自 v1.2 起）](http://docs.angularjs.org/api/ng.directive:ngInit)不要`ng-init`用于此目的。但是 imo 这取决于您的应用程序的架构。

`ng-init`当我想将一个值从后端传递到 Angular 应用程序时，我使用过：

```
<div data-ng-controller="myCtrl" data-ng-init="init('%some_backend_value%')"></div> 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2013-03-17T08:52:06.247

试试这个？

```
$scope.$on('$viewContentLoaded', function() {
    //call it here
}); 
```

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-08-15T20:39:41.127

我永远无法`$viewContentLoaded`为我工作，`ng-init`实际上应该只用于`ng-repeat`（根据文档），并且如果代码依赖于尚未定义的元素，直接在控制器中调用函数也会导致错误.

这就是我所做的，它对我有用：

```
$scope.$on('$routeChangeSuccess', function () {
  // do something
}); 
```

除非你使用`ui-router`. 然后是：

```
$scope.$on('$stateChangeSuccess', function () {
  // do something
}); 
```

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2015-06-26T00:54:29.883

```
angular.element(document).ready(function () {

    // your code here

}); 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2014-09-30T12:30:40.033

Dimitri/Mark 的解决方案对我不起作用，但使用[$timeout](https://docs.angularjs.org/api/ng/service/$timeout)函数似乎可以很好地确保您的代码仅在呈现标记后运行。

```
# Your controller, including $timeout

var $scope.init = function(){
 //your code
}

$timeout($scope.init) 
```

希望能帮助到你。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2014-02-13T00:27:54.313

如果你想观察 viewContentLoaded DOM 对象的变化然后做一些事情，你可以这样做。使用 $scope.$on 也有效，但不同的是，尤其是当您在路由上使用一页模式时。

```
 $scope.$watch('$viewContentLoaded', function(){
    // do something
 }); 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2015-11-19T17:59:24.950

您可以使用 Angular 的 $window 对象：

```
$window.onload = function(e) {
  //your magic here
} 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-06-17T08:25:56.987

另一种选择：

```
var myInit = function () {
    //...
};
angular.element(document).ready(myInit); 
```

（通过[https://stackoverflow.com/a/30258904/148412](https://stackoverflow.com/a/30258904/148412)）

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-01-23T17:32:23.763

使用 $routeProvider 时，您可以解析 .state 并引导您的服务。这就是说，你要加载控制器和视图，只有在解决你的服务之后：

用户界面路由

```
 .state('nn', {
        url: "/nn",
        templateUrl: "views/home/n.html",
        controller: 'nnCtrl',
        resolve: {
          initialised: function (ourBootstrapService, $q) {

            var deferred = $q.defer();

            ourBootstrapService.init().then(function(initialised) {
              deferred.resolve(initialised);
            });
            return deferred.promise;
          }
        }
      }) 
```

服务

```
function ourBootstrapService() {

 function init(){ 
    // this is what we need
 }
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2015-09-01T15:44:19.333

如果您有一个特定于该页面的控制器，还有另一种选择：

```
(function(){
    //code to run
}()); 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2016-04-15T05:35:00.643

发现 Dmitry Evseev 的回答非常有用。

**案例 1：单独使用 angularJs：**
要在页面加载时执行方法，您可以在视图中使用并在控制器中声明 init 方法，但[根据 ng-init 上的 angular Docs，](https://docs.angularjs.org/api/ng/directive/ngInit)`ng-init`不建议使用较重的函数：

> 可以滥用该指令在模板中添加不必要的逻辑量。ngInit 只有少数合适的用途，例如用于别名 ngRepeat 的特殊属性，如下面的演示所示；以及通过服务器端脚本注入数据。除了这几种情况，您应该使用控制器而不是 ngInit 来初始化作用域上的值。

**HTML：**

```
<div ng-controller="searchController()">
    <!-- renaming view code here, including the search box and the buttons -->
</div> 
```

**控制器：**

```
app.controller('SearchCtrl', function(){

    var doSearch = function(keyword){
        //Search code here
    }

    doSearch($routeParams.searchKeyword);
}) 
```

**警告：**不要将此控制器用于另一个意图不同的视图，因为它也会导致搜索方法在那里执行。

**案例2：使用Ionic：**
上面的代码可以工作，只要确保视图缓存在`route.js`as中被禁用：

**路由.js**

```
.state('app', {
    url           : '/search',
    cache         : false, //disable caching of the view here
    templateUrl   : 'templates/search.html'   ,
    controller    : 'SearchCtrl'
  }) 
```

希望这可以帮助

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-09-15T10:34:38.267

我遇到了同样的问题，只有这个解决方案对我有用（它在加载完整的 DOM 后运行一个函数）。我在页面加载后使用它来滚动锚定：

```
angular.element(window.document.body).ready(function () {

                        // Your function that runs after all DOM is loaded

                    }); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-03-24T04:38:20.157

您可以将搜索结果保存在一个通用服务中，该服务可以在任何地方使用，并且导航到另一个页面时不会清除，然后您可以使用保存的数据设置搜索结果，以便单击返回按钮

```
function search(searchTerm) {
    // retrieve the data here;
    RetrievedData = CallService();
    CommonFunctionalityService.saveSerachResults(RetrievedData);
} 
```

对于您的后退按钮

```
function Backbutton() {
    RetrievedData = CommonFunctionalityService.retrieveResults();
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-03-19T12:06:20.623

在自初始化函数中调用初始方法。

```
(function initController() {

    // do your initialize here

})(); 
```

# python - python - 为什么只读属性是可写的？

> ID：15458613
> 
> 赞同：16
> 
> 时间：2013-03-17T07:44:35.787
> 
> 标签：python, properties, python-2.7, readonly, private-members

我正在尝试在 Python 中定义一个具有只读属性的类；我遵循了 Python 文档并提出了以下代码：

```
#!/usr/bin/python

class Test:
        def __init__(self, init_str):
                self._prop = init_str

        @property
        def prop(self):
                return self._prop

t = Test("Init")
print t.prop
t.prop = "Re-Init"
print t.prop 
```

现在，当我尝试执行代码时，虽然我期待错误/异常，但我看到它正常执行：

```
$ ./python_prop_test 
Init
Re-Init 
```

我的 Python 版本是 2.7.2。我所看到的，是预期的吗？如何确保属性不可设置？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-17T07:52:36.847

要使其按您的预期工作，`Test`需要是一个新样式的类：

```
class Test(object):
          ^^^^^^^^ 
```

这在以下[文档中`property()`](http://docs.python.org/2/library/functions.html#property)有所暗示：

> *返回新样式类*（派生自的类）的属性属性`object`。

当我`Test`变成一个新式类，并尝试改变`prop`时，我得到一个例外：

```
In [28]: t.prop='Re-Init'

AttributeError: can't set attribute 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-17T07:52:53.550

要使用属性，您必须使用新式类。要在 Python 2 中使用新型类，您必须从`object`. 将您的班级 def 更改为`class Test(object)`.

# datatable - 对象不支持属性或方法“dataTable”

> ID：15458615
> 
> 赞同：0
> 
> 时间：2013-03-17T07:45:01.287
> 
> 标签：datatable, salesforce, visualforce

您好我正在尝试在 Visualforce 页面中实现数据表。我已按此顺序在页面中包含 jquery.js、DataTable.Min.Js、Datatable.js。我已经像下面这样初始化数据表

```
$(document).ready( function () {
          var oTable1 = $('#LeadTable').dataTable( {
                "sPaginationType": "full_numbers",
                "aoColumnDefs": [ { "bVisible": false, "aTargets": [ ] }],
                "bLengthChange": false,
                "bAutoWidth": false,
                "iDisplayLength" : 20,
                "aaSorting": [[ 4, "desc" ]],
                "oColumnFilterWidgets": { "aiExclude": [ 0, 3, 4 ] }
           });
}); 
```

我收到错误“对象不支持属性或方法'dataTable'”。我检查是什么问题？谢谢。

# 音频页面

```
<apex:page controller="HomeBasedClass"  id="thePage" >
    <apex:stylesheet value="{!$Resource.RoleHierarchyPopupStyle}"/>

    <style type="text/css">
        body{
            background-color: #f5f5f5;

        }

        #Initialloading{
            width: 100%;
            height: 500px;
            top: 200px;
            /*left: 200px;*/
            /*position: fixed;*/
            display: block;
            z-index: 99
        }

        #loading-image{
            position: absolute;
            top: 40%;
            left: 45%;
            z-index: 100
        }
    </style>
    <script type="text/javascript">
        var i = setInterval(function () {
            clearInterval(i);

            // The desired code is only this:
            document.getElementById("Initialloading").style.display = "none";
            document.getElementById("thePage:formId").style.display = "";

        }, 5000);
    </script>

    <script type="text/javascript">
        function showPopUp(divId)
         {
            document.getElementById(divId).style.display = '';
         }

         function ClosePopup(divId){
             document.getElementById(divId).style.display = 'none';
         }
    </script>
    <style>
        #LeadTable { border-collapse: collapse; }
        h3 {    color: #333333;
           font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
           font-size: 14px;
           line-height: 20px;
          }

       #panel table { border-collapse: collapse; }

    </style>

    <style>
        .button { background: url('{!$Resource.LoadingButton}') no-repeat left top; width:335px; height:65px;}
        .circle {

            width:22px;
            height:22px;
            float:left;   
            margin-bottom:18px; 
            margin-top:18px;
            margin-left: 55px;
        }

        .txt {
            font-family:Verdana, Arial, Helvetica, sans-serif;
            font-size:13px;
            color:#000000;
            line-height:20px;
            margin-left:15px;
            margin-bottom:18px;
            margin-top:18px; 
            width: 200px;
            font-weight: bold;
            float: left;
        }
       #TaskTable_paginate {
        height:35px;
       } 
    </style>
    <div id="Initialloading" align="center">
       <img src="{!$Resource.Loading}" />
       <br/><br/>
       <font color="Red">Please Wait...</font>
    </div>  
    <apex:form id="formId" style="display:none;">

        <!--<script src="/soap/ajax/15.0/connection.js" type="text/javascript"></script>
        <script src="/soap/ajax/15.0/apex.js" type="text/javascript"></script>-->

        <!--<apex:includeScript value="{!$Resource.jQueryLib19Compress}"/>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/jquery.dataTables.min.js')}"></script>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/jquery.dataTables.js')}"></script>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/ColVis.js')}"></script>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/ZeroClipboard.js')}"></script>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/TableTools.js')}"></script>
        <script src="{!URLFOR($Resource.DataTables, 'media/js/ColumnFilterWidgets.js')}"></script>-->
        <apex:includeScript value="{!$Resource.DtJQueryJs}"/>
        <apex:includeScript value="{!$Resource.DtDataTableMinJs}"/>
        <apex:includeScript value="{!$Resource.DtDataTableJs}"/>
        <apex:stylesheet value="{!URLFOR($Resource.DataTables, 'media/css/DataTablesAdvancedExample.css')}"/>
        <script type="text/javascript">

            $(document).ready( function () {
                var oTable1 = $('#LeadTable').dataTable( {
                      "sPaginationType": "full_numbers",
                      "aoColumnDefs": [ { "bVisible": false, "aTargets": [ ] }],
                      "bLengthChange": false,
                      "bAutoWidth": false,
                      "iDisplayLength" : 20,
                      "aaSorting": [[ 4, "desc" ]],
                      "oColumnFilterWidgets": { "aiExclude": [ 0, 3, 4 ] }
                 });

                var oTable2 = $('#JobprofileTable').dataTable( {
                           "sPaginationType": "full_numbers",
                           "iDisplayLength" : 5,
                           "bLengthChange": false,
                           "aoColumnDefs": [ { "bVisible": false, "aTargets": [ ] }],
                           "aaSorting": [[ 5, "desc" ]],
                           "oColumnFilterWidgets": { "aiExclude": [ 0, 3, 4 ]}
               });

          });

          function startSplash() {
             document.getElementById('splashDiv').style.display='';
          }

          function endSplash() {            
            document.getElementById('splashDiv').style.display='none';
          }
        </script>

        <div class="button" id="splashDiv" style="display: none; position: fixed; left: 500px; top: 250px; border: 0px; z-index: 9999;">
            <div class="circle"><apex:image value="{!$Resource.LoadingImage}"></apex:image></div>
            <div class="txt">Please Wait. Loading...</div>
        </div> 
        <apex:actionStatus id="splashStatus"  onstart="startSplash();" onstop="endSplash();" />

        <apex:actionFunction name="ajaxSetClientLoaded" action="{!setClientLoaded}" immediate="true" rerender="formId"/> 
        <apex:sectionHeader subtitle="Home Base - Sales Rep Dashboard"/>
        <a href="#thePage:formId:leadSection">Leads</a>&nbsp; &nbsp;|<apex:outputLabel >&nbsp; &nbsp;</apex:outputLabel><a href="#thePage:formId:jobProfileSection"><apex:outputLabel >Job Profiles</apex:outputLabel></a><apex:outputLabel >&nbsp; &nbsp;|</apex:outputLabel>&nbsp; &nbsp;<a href="#thePage:formId:OpportunitySection">Opportunities</a>&nbsp; &nbsp;|&nbsp; &nbsp;<a href="#thePage:formId:TaskSection">Activities</a>&nbsp; &nbsp;|&nbsp; &nbsp;<a href="#thePage:formId:OrderSection">Orders &amp; Deliveries</a><br/><br/><br/>
        <label style="cursor:pointer; text-decoration:underline" onclick="showPopUp('descreteAddDiv');">{!$UserRole.Name}</label><br/><br/>
        <div id="descreteAddDiv" style="display:none;">
            <apex:outputPanel styleClass="DescAddresspopupBackground" layout="block" />
            <apex:outputPanel id="fulfillingBranchPanel" style="-moz-border-radius: 15px;-webkit-border-radius: 15px;border-radius: 10px;" styleClass="custDescAddressPopup" layout="block" >
                <div style="width:25px; float:right;padding:5px 5px; cursor:pointer;" onclick="ClosePopup('descreteAddDiv');">[X]</div>
                    <apex:iframe src="/apex/testpage" width="100%" height="350px" scrolling="true"/>          
            </apex:outputPanel>
        </div>

        <!-- ----------------------------------------------------Lead section Start------------------------------------------ -->
        <apex:pageBlock id="leadSection" >
            <table width="100%" border="1" cellpadding="5" cellspacing="8">
                 <tr>
                    <td align="left" colspan="2"><h3>Leads</h3></td>
                </tr>
                <tr>
                    <td width="25%" valign="top" height="265px;">
                        <apex:outputPanel id="componentPnl">
                            <c:LeadGraphComponent userId="{!SelectedUserId}" id="LeadComponent"/>
                        </apex:outputPanel>
                    </td>
                    <td width="75%" valign="top">
                        <table cellpadding="0" cellspacing="0" border="0" class="display" id="LeadTable" >
                            <thead>
                                <tr>
                                     <th style="font-weight: bold; text-align: center; font-family: Arial; font-size: 8pt;">Company</th>
                                     <th>Name</th>
                                     <th>Phone</th>
                                     <th>Servicing Branch ID</th>
                                     <th>Created Date</th>
                                     <th>Last Activity Date</th>
                                     <th>Next Activity Date</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <apex:repeat value="{!LstLeadGrid}" var="c">
                                     <tr>
                                        <td><a href="https://c.cs3.visual.force.com/{!c.id}" target="_blank">{!c.Company}</a></td>
                                        <td>{!c.Name}</td>
                                        <td>{!c.Phone}</td>
                                        <td>{!c.Servicing_Branch_Id__c}</td>
                                        <td>
                                             <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                                <apex:param value="{!c.Created_Date_Time__c}"/> 
                                            </apex:outputText>
                                        </td>
                                        <td>
                                             <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                                <apex:param value="{!c.Last_Activity_Datetime__c }" /> 
                                            </apex:outputText>
                                        </td>
                                        <td>
                                             <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                                <apex:param value="{!c.Next_Activity_Date__c}" /> 
                                            </apex:outputText>
                                        </td>
                                    </tr>
                                 </apex:repeat>
                             </tbody>
                        </table>
                    </td>
                </tr>
            </table>
        </apex:pageBlock>
        <!-- ----------------------------------------------------Lead section End------------------------------------------ -->
        <!-- ----------------------------------------------------Job Profile section Start------------------------------------>
        <!-- ------rendered="{!IF(($UserRole.Name == 'Branch Manager - US') || ($UserRole.Name == 'Customer Sales Specialist - NSC - US') || ($UserRole.Name == 'Regional Manager - US') || ($UserRole.Name == 'Sales Rep - US') || ($UserRole.Name == 'Territory Sales Mgr - US'),true,false)}"---->
        <apex:pageBlock id="jobProfileSection" >
            <table width="100%" border="1" cellpadding="5" cellspacing="8">
                 <tr>
                    <td align="left" colspan="2"><h3>Job Profiles</h3></td>
                </tr>
                <tr>
                    <td width="25%" valign="top" height="265px;">
                        <apex:outputPanel id="componentPnl">
                            <c:JobProfileComponent userId="{!SelectedUserId}" id="JpComponent"/>
                        </apex:outputPanel>
                    </td>
                    <td rowspan="2" width="75%" valign="top">
                        <table cellpadding="0" cellspacing="0" border="0" class="display" id="JobprofileTable" >
                            <thead>
                                <tr>
                                     <th>Job profile Name</th>
                                     <th>Job Profile ID</th>
                                     <th>BranchID</th>
                                     <th>Valuation</th>
                                     <th>GC Name</th>
                                     <th>JS City</th>
                                     <th>JS State</th>
                                     <th>Job Name</th>
                                     <th>JS Zip</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <apex:repeat value="{!LstJobProfileGrid}" var="c">
                                     <tr>
                                        <td align="left" style="font-colour: black;"><a href="https://c.cs3.visual.force.com/{!c.id}" target="_blank">{!c.Name}</a></td>
                                        <td align="center">{!c.Job_Profile_ID__c}</td>
                                        <td align="center">{!c.Branch_ID__c}</td>
                                        <td align="center">{!c.Valuation__c}</td>
                                        <td align="center">{!c.GC_Awarded_Dodge__c}</td>
                                        <td align="center">{!c.Job_Site_City__c}</td>
                                        <td align="center">{!c.Job_Site_State__c}</td>
                                        <td align="center">{!c.Name}</td>
                                        <td align="center">{!c.Job_Site_Zip__c}</td>
                                    </tr>
                                 </apex:repeat>
                             </tbody>
                        </table>
                    </td>
                </tr>
            </table>
        </apex:pageBlock> 
        <!-- ----------------------------------------------------Job Profile End------------------------------------------ -->
        <!-- ----------------------------------------------------Opportunity section Start------------------------------------------ --> 
        <apex:pageBlock id="OpportunitySection">
            <c:OpportunityComponent userId="{!SelectedUserId}" id="OppComponent"/>
        </apex:pageBlock>
        <!-- ----------------------------------------------------Opportunity section End------------------------------------------ -->
        <!-- ----------------------------------------------------Activity section Starts------------------------------------------ -->
        <apex:pageBlock id="TaskSection">

            <script type="text/javascript" charset="UTF-8">

                $(document).ready( function () {
                        var oTable4 = $('#TaskTable').dataTable( {
                              "sPaginationType": "full_numbers",
                              "aoColumnDefs": [ { "bVisible": false, "aTargets": [ ] }],
                              "bLengthChange": false,
                              "iDisplayLength" : 20,
                              "oColumnFilterWidgets": { "aiExclude": [ 0, 3, 4 ] }
                      });
                 });

            </script>
            <table width="100%" border="0">
                <tr>
                    <td align="left">
                        <h3>My Activities</h3> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a target="_blank" href="https://cs3.salesforce.com/setup/ui/recordtypeselect.jsp?ent=Opportunity&retURL=%2F006%2Fo&save_new_url=%2F006%2Fe%3FretURL%3D%252F006%252Fo" style="Text-decoration:none;Cursor:pointer"><img src="https://cs3.salesforce.com/resource/1359464023000/ZoomImage" Title="Create New Opportunity"/> Create New Opportunity</a>
                    </td>
                    <td align="right">
                        <apex:selectList value="{!SelectedTaskName}" size="1" style="width:250px;">
                            <apex:selectOptions value="{!lstTaskOptions}"/>
                            <apex:actionSupport event="onchange" action="{!ChangeSelectedTaskName}" rerender="TaskSection" status="splashStatus"/>
                        </apex:selectList>
                    </td>
                </tr>
            </table>
            <div id="panel" >
                <table cellpadding="0" cellspacing="0" border="0" class="display" id="TaskTable" style="margin-top:20px;">
                    <thead>
                     <tr>
                         <th>Subject</th>
                         <th>Due Date</th>
                         <th>MMI Call Type</th>
                         <th>Account Name</th>
                         <th>Name</th>
                         <th>Related To</th>
                         <th>Phone</th>
                     </tr>
                    </thead>
                    <tbody>
                        <apex:repeat value="{!LstTaskGrid}" var="c">
                            <tr>
                              <td><a href="https://c.cs3.visual.force.com/{!c.id}" target="_blank">{!c.Subject}</a></td>
                              <td style= "{!IF(AND(NOT(ISBLANK(c.ActivityDate)),c.ActivityDate- Today() < 0), 'color:red;', 'color:black;')}">
                                  <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                      <apex:param value="{!c.ActivityDate}" /> 
                                  </apex:outputText>
                              </td>
                              <td>{!c.Call_Type__c}</td>
                              <td>{!c.Account.Name}</td>
                              <td>{!c.Who.Name}</td>
                              <td>{!c.What.Name}</td>
                              <td>{!c.Who.Phone}</td>  
                          </tr>
                         </apex:repeat>
                    </tbody>
                </table>
             </div>
        </apex:pageBlock>
        <!-- ----------------------------------------------------Activity section End------------------------------------------ -->
        <!-- ----------------------------------------------------Order and Delivery section Starts------------------------------------------ -->
        <div style="width:100%; overflow:auto;border: 1px solid #F00;" >
        <apex:pageBlock id="OrderSection">
            <script type="text/javascript" charset="UTF-8">

                $(document).ready( function () {
                    var oTable5 = $('#OrderTable').dataTable( {
                          "sPaginationType": "full_numbers",
                          "aoColumnDefs": [ { "bVisible": false, "aTargets": [ ] }],
                          "bLengthChange": false,
                          "bAutoWidth": false,
                          "iDisplayLength" : 15,
                          "oColumnFilterWidgets": { "aiExclude": [ 0, 3, 4 ] }
                     });
                 });

            </script>
            <table width="100%" border="0">
                <tr>
                    <td align="left">
                        <h3>Orders &amp; Deliveries</h3>
                    </td>
                    <td align="right">
                        <apex:selectList value="{!SelectedlstOrdDelivOptionsName}" size="1" style="width:250px;">
                            <apex:selectOptions value="{!lstOrdDelivOptions}"/>
                            <apex:actionSupport event="onchange" action="{!ChangeOrderDelivery}" rerender="OrderSection" status="splashStatus"/>
                        </apex:selectList><br/><br/>
                        <apex:selectList value="{!SelectedOrdDelivTimeName}" size="1" style="width:250px;">
                            <apex:selectOptions value="{!lstOrdDelivTimeOptions}"/>
                            <apex:actionSupport event="onchange" action="{!ChangeOrderDelivery}" rerender="OrderSection" status="splashStatus"/>
                        </apex:selectList>
                    </td>
                </tr>
            </table>
            <table width="100%" cellpadding="0" cellspacing="0" border="0" class="display" id="OrderTable" style="margin-top:20px;">
                <thead>
                    <tr>
                         <th>Account #</th>
                         <th>Account Name</th>
                         <th>Order Type</th>
                         <th>Transaction Code</th>
                         <th>Servicing Branch ID</th>
                         <th>Item Code</th>
                         <th>Total Amt</th>
                         <th>Delivery Date</th>
                         <th>Activation Date</th>
                         <th>Fuel Surcharge Delivery</th>
                         <th>Fuel Surcharage PickUp</th>
                         <th>PPE</th>
                         <th>LLW</th>
                         <th>Delivery Contact Name</th>
                         <th>Delivery Contact #</th>
                         <th>Order #</th>
                     </tr>
                    </thead>
                        <tbody>
                      <apex:repeat value="{!LstOrdersAndDelieveriesGrid}" var="c">
                           <tr>
                              <td>{!c.Account_Number__c}</td>
                              <td>{!c.Name}</td>
                              <td>{!c.Transaction_Code__c}</td>
                              <td>{!c.Transaction_Code__c }</td>
                              <td>{!c.Transaction_Code__c}</td>
                              <td>{!c.Item_Code__c}</td>
                              <td>{!SUBSTITUTE(TEXT(ROUND(c.Total__c, 0)), ".", "," )}</td>
                              <td>
                                   <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                      <apex:param value="{!c.Delivery_Date__c}"/> 
                                  </apex:outputText>
                              </td>
                              <td>
                                   <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                      <apex:param value="{!c.Activation_Date__c}"/> 
                                  </apex:outputText>
                              </td>
                              <td>
                                <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                      <apex:param value="{!c.Fuel_Surcharge_Delivery__c}"/> 
                                </apex:outputText>
                              </td>
                              <td>
                                <apex:outputText value="{0,date,MM'/'dd'/'yyyy}">
                                      <apex:param value="{!c.Fuel_Surcharage_PickUp__c}"/> 
                                </apex:outputText>

                              </td>
                              <td>{!c.PPE__c}</td>
                              <td>{!c.LLW__c}</td>
                              <td>{!c.Delivery_Contact_Name__c}</td>
                              <td>{!c.Delivery_Contact_Number__c}</td>
                              <td>{!c.Order_Number__c}</td>
                          </tr>
                      </apex:repeat>
                    </tbody>
                </table>
       </apex:pageBlock>
       </div>
        <!-- ----------------------------------------------------Order and Delivery section End------------------------------------------ -->
    </apex:form>
    <style>
        body{
            background-color: #f5f5f5;
        }

        /*#OrderTable_wrapper {width:100%; overflow:auto;}*/
    </style>

</apex:page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:55:01.803

似乎您应该使用以下修复：

```
 var j$ = jQuery.noConflict(); 
```

问题是 force.com 还包含许多 JavaScript 库，这些库也可能使用此 $ 符号作为快捷方式，这可能会导致各种问题。现在，在你通常使用 $ 的地方，使用 j$。

# qt - Qt自定义矩形边界以获得温和的3D效果

> ID：15458617
> 
> 赞同：0
> 
> 时间：2013-03-17T07:45:28.693
> 
> 标签：qt, qt4, qt5

您能否告诉我如何通过自定义 QGraphicsItem绘制具有[这样边界的矩形。](https://picasaweb.google.com/lh/photo/OEQi97Px95bBY1V4ftUc5dMTjNZETYmyPJy0liipFm0?feat=directlink)我做了布局并绘制了矩形，但我的[矩形](https://picasaweb.google.com/lh/photo/64ZKg-68ZBlrq-l22QJhqtMTjNZETYmyPJy0liipFm0?feat=directlink)的边界是普通的笔。请求您的帮助。谢谢。

```
void QGraphicsTileItem::paint(QPainter *painter,
                              const QStyleOptionGraphicsItem *option,
                              QWidget *widget)
{
    /// Draw the rect
    painter->setRenderHints( QPainter::Antialiasing |
                             QPainter::TextAntialiasing |
                             QPainter::SmoothPixmapTransform |
                             QPainter::HighQualityAntialiasing, true );
    painter->setPen( pen );
    painter->setBrush( colour );
    painter->drawRect( bound );
    painter->drawText( bound, Qt::AlignLeft | Qt::AlignTop |
                       Qt::TextSingleLine, name );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:10:22.073

这是来自 QWidget 的paintEvent 的示例。您应该能够使其适应您的绘画事件（您将使用绑定变量而不是“this”）：

```
void Button::paintEvent(QPaintEvent *e)
{
    QPainter paint;
    paint.begin(this);
    paint.setPen(Qt::white);
    paint.drawLine(0,0, this->width(), 0);
    paint.drawLine(0,0, 0, this->height());
    paint.setPen(Qt::black);
    paint.drawLine(0, this->height()-1, this->width()-1, this->height()-1);
    paint.drawLine(this->width()-1, 0, this->width()-1, this->height()-1);
    paint.end();
} 
```

# django - 如何将 Django 日志存储在数据库中？

> ID：15458618
> 
> 赞同：0
> 
> 时间：2013-03-17T07:45:29.880
> 
> 标签：django, web-applications, logging, django-database

我想将我的应用程序日志（信息而不是错误日志）存储在数据库中，以便进一步使用它在网络上显示。请给我一个好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:06:24.780

您将不得不使用 [Sentry](http://sentry.readthedocs.org/en/latest/index.html)和 [Raven](http://raven.readthedocs.org/en/latest/config/django.html)这是我打赌的最佳方法。

# javascript - 画布 toDataUrl 到 facebook

> ID：15458620
> 
> 赞同：0
> 
> 时间：2013-03-17T07:45:48.020
> 
> 标签：javascript, jquery, html

大家好，我在将图像画布发布到 Facebook 时遇到问题。

这是我正在使用的功能。我可以使用其他功能下载图像，但每当我尝试将图像分享到 facebook 时，它总是给我错误。

```
 share.off('click').click(function(){
var canvasData = canvas.toDataURL("image/png");
FB.init(
{
    appId : ******
});

  FB.api('/me/photos', 'post', {
        message:'photo description',
        url: canvasData      
    }, function(response){
        if (!response || response.error) {
            alert('Error occured');
        } else {
            alert('Post ID: ' + response.id);
        }
    }); 
    }).fadeIn();
    } 
```

如果我更改`url: canvasData`为实际的图像链接，它将成功。有什么解决方法可以做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T03:33:09.077

```
FB.api("/me/photos","POST",
{
    "source": "{image-data}"
},
function (response) {
  if (response && !response.error) {
    /* handle the result */
  }
}); 
```

# perl - Perl 和模式匹配

> ID：15458621
> 
> 赞同：0
> 
> 时间：2013-03-17T07:45:54.793
> 
> 标签：perl

我一直在做一些事情，它需要一个带有参考书目的 html 文件，并剥离除作者之外的所有内容。我很难摆脱一些无关的数据，例如 html 标签中的字符。我希望能够剥离整个标签，甚至更好的是标签之间的特定数据。

现在这是我的潜艇的样子：

```
 sub extractAuthorsIntoArray{
        @author_array = split /[<>"\/?!.=\(\)1234567890':]/, $doc;
        foreach(@author_array){
            print "$_" . "\n";
        }
    } 
```

此时它所做的是剥离所有标签字符，但它留下了一堆我不想要的无关数据，例如发布日期以及出版物名称和我不需要的其他数据。每当我试图摆脱说“<li>”时，它都会给我我的新数据，而这些字符完全丢失了。不管怎样，我会继续努力的。

后来。

编辑：

我想做的是这样的：

<li value="2">Artem Chebotko 和 Shiyong Lu，<b>“用于高效评估 SPARQL 嵌套可选图模式的嵌套可选连接”</b>。< i>Progressive Concepts for Semantic Web Evolution: Applications and Developments</i>，Miltiadis Lytras 和 Amit Sheth (Eds.)，信息科学出版社，ISBN 160566992X，2010。< br/>< br/></li> < li>Artem Chebotko、Shiyong Lu、Farshad Fotouhi 和 Anthony Aristar，<b>“基于本体的语义网多媒体语言数据注释”</b>。< i>基于 Web 的语义信息系统：最先进的应用程序</i>，Amit Sheth 和 Miltiadis Lytras（主编），IGI Global，ISBN 1599044269，2006。< br/>< br/>< /li>

最后得到这个：

Artem Chebotko 和 Shiyong Lu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:02:12.167

我的建议：不要使用正则表达式。取而代之的是，使用[HTML::Parser](http://search.cpan.org/perldoc?HTML%3a%3aParser)或 CPAN 提供的众多模块之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:53:20.480

如果对数据的结构没有一定的把握，这个问题通常很难解决，但根据你的例子，我会假设作者总是你数据的第一个非标签内容，并以逗号结尾（这是一种非常常见的格式）。

这意味着问题有两个部分：去掉任何初始 HTML 标记，然后删除逗号后的所有内容。

首先，HTML 标记相当容易识别，因为它以这些字符开头`<`和结尾，`>`并且不能包含其中任何一个字符。所以：

```
$line =~ s{ \A \s* (?: < [^>]+ > \s* )+ }{}xms; 
```

将删除行首的所有 HTML 标记（和空格）。（这使用了*Perl Best Practices*`/x`推荐的标志和其他编码样式。）逐步完成此操作，匹配字符串的开头，匹配任意数量的空格，核心是，通过查找匹配 HTML 标记标签的开头，然后取一个或多个字符，直到标签的结尾。这包含在允许任意数量的它们中。（我使用而不是仅仅因为如果您不关心保持匹配，最好关闭捕获。）*`\A``\s*``< [^>]+ >``(?: )+``(?:)``()`*

 *之后从逗号中删除所有内容要容易得多：

```
$line =~ s{ , .* }{}xms; 
```

现在，这假设每个 bibiography 条目都是程序中的单个标量。这掩盖了一个相当大的问题。相反，如果您有一个包含整个页面的变量，则可能需要对其进行解析。如果每个条目都是一个`<li>`标签，你要做的是提取每个`<li>`标签的内容，然后像上面一样处理它。

为此，请在列表上下文中使用执行以下操作的`/g`选项进行匹配：

```
my @entries = ($doc =~ m{ <li (?: \s [^>] )? > (.*?) </li> }xmsg); 
```

这里还有一些微妙之处。后面的`(?: )?`位`<li`可选地匹配空格后跟一些字符，而不是`>`允许该标记的任何属性。该`(.*?)`部分执行提取标签内容的实际工作。注意. `?`_ `*`这使得匹配是非贪婪的，这意味着它不是将所有内容匹配到文档中的*最后一个* `</li>`标签，而是将所有内容匹配到第*一个* `</li>`标签。最后，`/g`修饰符表示尽可能多地重复此匹配，并将捕获的内容`()`作为列表返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T09:06:20.163

这是一种相当……不寻常的……使用方式`split`。当您的数据包含由分隔符分隔的多个数据项时，通常使用它来拆分这些分隔符上的数据并检索各个项目。这不是您要在这里执行的操作，因此`split`可能不是您要查找的~~droid命令。~~

如前所述，正确的 HTML 解析器确实是做到这一点的正确方法，但您特别想将正则表达式用于教育目的，所以我会给您一个。请注意，使用正则表达式解析 HTML 充满危险，而且几乎可以肯定在某些极端情况下会失败。

所以，那说：

```
#!/usr/bin/env perl    

use strict;
use warnings;
use 5.010;

my $text = q[< li value="2">Artem Chebotko and Shiyong Lu, < b>"Nested Optional Join for Efficient Evaluation of SPARQL Nested Optional Graph Patterns"< /b>. < i>Progressive Concepts for Semantic Web Evolution: Applications and Developments< /i>, Miltiadis Lytras and Amit Sheth (Eds.), Information Science Publishing, ISBN 160566992X, 2010.< br/>< br/>< /li> < li>Artem Chebotko, Shiyong Lu, Farshad Fotouhi, and Anthony Aristar, < b>"Ontology-Based Annotation of Multimedia Language Data for the Semantic Web"< /b>. < i>Semantic Web-Based Information Systems: State-of-the-Art Applications< /i>, Amit Sheth and Miltiadis Lytras (Eds.), IGI Global, ISBN 1599044269, 2006.< br/>< br/>< /li>];

my @list_items = $text =~ m[<\s*li(?:\s+[^>]*)?>(.*?)<\s*/li\s*>]g;

my @authors;
for (@list_items) {
  /([^<]+), </;
  push @authors, $1;
}

say for @authors; 
```

输出：

```
Artem Chebotko and Shiyong Lu
Artem Chebotko, Shiyong Lu, Farshad Fotouhi, and Anthony Aristar 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T09:16:30.340

```
#!/usr/bin/perl -w

use strict;
read DATA, my $string, -s DATA;
my @matches = ( $string =~ /<\s+li\s*(?:.*?)>(.+?),\s+<\s+b>/g );
print "$_\n\n" foreach (@matches);

__DATA__
< li value="2">Artem Chebotko and Shiyong Lu, < b>"Nested Optional Join for Efficient Evaluation of SPARQL Nested Optional Graph Patterns"< /b>. < i>Progressive Concepts for Semantic Web Evolution: Applications and Developments< /i>, Miltiadis Lytras and Amit Sheth (Eds.), Information Science Publishing, ISBN 160566992X, 2010.< br/>< br/>< /li> < li>Artem Chebotko, Shiyong Lu, Farshad Fotouhi, and Anthony Aristar, < b>"Ontology-Based Annotation of Multimedia Language Data for the Semantic Web"< /b>. < i>Semantic Web-Based Information Systems: State-of-the-Art Applications< /i>, Amit Sheth and Miltiadis Lytras (Eds.), IGI Global, ISBN 1599044269, 2006.< br/>< br/>< /li> 
```

如果您愿意解决这个特定问题，那么您的正则表达式应该寻找的是：

```
a) < li value="2">AUTHORS, < b>
b) < li>AUTHORS, < b> 
```

对于 a) 一种可能的正则表达式是：

```
< \s+ li \s+ value="2"> (.+), \s+ <\s+b> 
```

对于 b) 一种可能的正则表达式是：

```
< \s+ li> (.+), \s+ <\s+b> 
```

结合这两个正则表达式产生：

```
<\s+li\s*(?:.*?)>(.+?),\s+<\s+b> 
```

不优雅等，但也许它会帮助你。*

# javascript - 根据选中的单选按钮计算总计

> ID：15458623
> 
> 赞同：0
> 
> 时间：2013-03-17T07:46:32.603
> 
> 标签：javascript, html

我正在使用 html 和 javascript。

下面是html代码

```
 1.&nbsp;&nbsp;&nbsp Gestational age in weeks&nbsp;&nbsp;&nbsp
         <input type="radio" name="Gestational_age" value="0-27"     onclick='Gestational(this);'/>0-27
         <input type="radio" name="Gestational_age" value="28-31" onclick='Gestational(this);'/>28-31
         <input type="radio" name="Gestational_age" value=">32" onclick='Gestational(this);' />32
         <br> 
```

Javascript代码是

```
 function Gestational(obj)
 {
   var radios = document.getElementsByName('Gestational_age');

   for (var i = 0, length = radios.length; i < length; i++) {
if (radios[i].checked) {
    if(radios[i].value==="0-27")
   {
   var temp = parseInt(9);
}
else if(radios[i].value==="28-31")
    {
      var temp= parseInt(8);
    }
else if(radios[i].value===">32")   
{
  var temp= parseInt(0); 
}
  document.getElementById("Total").value = parseInt(document.getElementById("Total").value) +    temp;
}
   }
 } 
```

我需要根据选择的单选按钮值更改“总计”字段，并且我正在使用“+”加号，因为我还有其他单选按钮问题需要添加并最终打印总计。截至目前，它在同一范围内添加值单选按钮设置，但我需要根据所选单选按钮更改“总计”值，然后添加新值并减去以前的值。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:08:36.387

使用`.innerHTML`而不是`.value`

```
 document.getElementById("Total").innerHTML = parseInt(document.getElementById("Total").innerHTML) +    temp; 
```

工作演示[在这里](http://jsfiddle.net/2MFx9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:14:41.163

这对我有用，我认为您的主要问题是使用“.value”引用而不是“.innerHTML”...

```
1.&nbsp;&nbsp;&nbsp Gestational age in weeks&nbsp;&nbsp;&nbsp
     <input type="radio" name="Gestational_age" value="0-27"     onclick='Gestational(this);'/>0-27
     <input type="radio" name="Gestational_age" value="28-31" onclick='Gestational(this);'/>28-31
     <input type="radio" name="Gestational_age" value=">32" onclick='Gestational(this);' />32
     <br> 
```

**注意：**当用户点击一个单选按钮时，它会被选中，而所有其他同名的单选按钮都会被取消选中。

```
 function Gestational(obj){
     var radios = document.getElementsByName('Gestational_age');
     console.log(radios)
     for (var i = 0, length = radios.length; i < length; i++) {
         if (radios[i].checked) {
         if(radios[i].value==="0-27"){
             var temp = parseInt(9);
         }
         else if(radios[i].value==="28-31"){
             var temp= parseInt(8);
         }
         else if(radios[i].value===">32"){
             var temp= parseInt(0); 
         }
         document.getElementById("Total").innerHTML =      parseInt(document.getElementById("Total").innerHTML) +    temp;
         }
     }
 } 
```

# android - 是否可以有多个启动器活动？

> ID：15458626
> 
> 赞同：9
> 
> 时间：2013-03-17T07:47:15.133
> 
> 标签：android, android-launcher

一个apk文件中是否可以有多个应用程序？或者有没有办法在一个应用程序中为不同的活动设置不同的启动器图标？我想将我的应用程序分成一些不同（但相关）的逻辑部分。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-17T07:51:39.420

是的，只需**将您的两个或多个`<activity>`s 标记为`LAUNCHER`**清单中。此外，您必须`android:taskAffinity`在两个 Launcher-Activity 上设置属性，指定确切的包和要启动的 Activity。

```
<activity android:label="MyApp" android:name=".MyApp" android:taskAffinity="com.example.MainActivity">
        <intent-filter>
            <action android:name=".MyApp"/>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
</activity>

<activity android:label="Settings" android:name=".Settings" android:taskAffinity="com.example.SettingsActivity" >
    <intent-filter>
        <action android:name=".Settings"/>
        <action android:name="android.intent.action.MAIN"/>
        <category android:name="android.intent.category.LAUNCHER"/>
    </intent-filter>
</activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T06:50:47.063

是的，您的应用程序中可以有多个启动器活动。这不会产生任何类型的编译时或运行时错误。您会发现您的设备中应用程序的两个启动器徽标可以启动我们在清单中定义的不同活动。

# github - 使用 appledoc 在 GitHub 项目上添加文档

> ID：15458630
> 
> 赞同：1
> 
> 时间：2013-03-17T07:47:33.920
> 
> 标签：github, appledoc

我注意到 GitHub 上的一些项目有使用 Appledoc 创建并托管在 username.github.com/project/Documentation 的文档页面。例如：

项目：[http://pandamonia.github.com/BlocksKit/](http://pandamonia.github.com/BlocksKit/)
文档： http: [//pandamonia.github.com/BlocksKit/Documentation/](http://pandamonia.github.com/BlocksKit/Documentation/)

这是如何运作的？有没有办法为我自己的项目做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T07:51:33.303

Github 有项目页面的概念——详情见此页面：

[http://pages.github.com/](http://pages.github.com/)

你可以在项目的 gh-pages 分支上看到网页的内容：

[https://github.com/pandamonia/BlocksKit/tree/gh-pages](https://github.com/pandamonia/BlocksKit/tree/gh-pages)

# apache - Amazon EC2 微实例响应时间测试

> ID：15458632
> 
> 赞同：1
> 
> 时间：2013-03-17T07:48:07.580
> 
> 标签：apache, yii, amazon-ec2, firebug, performance-testing

我正在 Firebug 内的 Firefox NET 选项卡中测试接收时间，并且接收时间非常长。服务器有 Apache、PHP（YII 框架）和 MYSQL，只运行测试数据。我想知道这是否是亚马逊微实例的常见观察结果，还是需要开发人员进行优化以改进这一点？

对于前 -

```
Size    Receiving Time( Dark Green at end)
200 KB     8.5s
6.7 KB     6.24s 
```

Snap 也附上了 -

![响应时间](../Images/5c5d709999a88add5666fc2787e542be.png)

# apple-push-notifications - 如何向部分用户发送推送通知而不是全部？

> ID：15458635
> 
> 赞同：2
> 
> 时间：2013-03-17T07:48:16.443
> 
> 标签：apple-push-notifications

你好朋友我正在使用 PushWoosh API [http://www.pushwoosh.com](http://www.pushwoosh.com)来实现推送通知，还阅读了[http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif。 html#//apple_ref/doc/uid/TP40008194-CH102-SW1](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/WhatAreRemoteNotif/WhatAreRemoteNotif.html#//apple_ref/doc/uid/TP40008194-CH102-SW1) 但找不到与我想要的相关的任何内容。

是否可以仅向某些用户发送推送通知？例如，我只想向那些没有购买我的应用程序的用户发送通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T13:36:52.730

您可以使用 Pushwoosh Remote API 中的设备令牌向特定设备发送通知，每个设备都在该 API 下注册。您只需要使用“设备”参数：

```
"devices":["dec301908b9ba8df85e57a58e40f96f523f4c2068674f5fe2ba25cdc250a2a41"], 
```

在设备上调用 /registerDevice 方法并发送到您的服务器后，可以接收此设备推送令牌。

但是，尽管 iOS 设备令牌保持不变，但 Android 往往会不时更改它们，因此无法保证您的消息会到达 Android 设备。

Pushwoosh 中最方便的方法是使用标签，您可以在其中设置标签并使用其唯一 ID 或别名在此标签下注册每个设备。标签的优势在于，如果您想将通知发送给在少数设备上安装了您的应用程序的用户，则可以使用标签。

使用标签，您需要在您的应用程序中实现它，然后在远程 API 请求中使用“过滤器”或“条件”参数：

```
"conditions": [TAG_CONDITION1, TAG_CONDITION2, ..., TAG_CONDITIONN]

where Tag_condition should look like ["alias", "EQ", "john_smith"] 
```

# ios - 当字典在iOS中没有标题时如何解析JSON？

> ID：15458637
> 
> 赞同：1
> 
> 时间：2013-03-17T07:48:44.210
> 
> 标签：ios, json, parsing, dictionary, title

我一直在尝试解析 JSON，但我一直无法解析，因为我从中提取的源没有给我一个字典标题，将数组作为提要中的最高值。如何修改我的代码以解析没有字典标题的整个字典？我在几个地方看到过这个问题，但是实现不符合我的需要/没有给我足够的信息来实现。任何帮助，将不胜感激。

它说 NSArray *array = [dictionary objectForKey:@""]; 下面，我无法给出对象，因为我的 JSON 代码没有标题。我该怎么办？

我解析字典的代码：

```
- (void)parseDictionary:(NSDictionary *)dictionary
{

  NSArray *array = [dictionary objectForKey:@""];

    if (array == nil) {
        NSLog(@"Expected an array");
        return;
    }

    for (NSDictionary *resultDict in array) {
        NSLog(@"start_time: %@, location: %@", [resultDict objectForKey:@"start_time"], [resultDict objectForKey:@"location"]);
    }
} 
```

我的 JSON 数据：

```
[
  {
    "athletic_opponent": null,
    "campus": null,
    "class_fk": 0,
    "contact_person": null,
    "description": "March Break",
    "destination_address": null,
    "end_date": "2013-03-25",
    "end_time": null,
    "event_pk": 19603,
    "event_type": "No School",
    "game_outcome": "N/A",
    "game_score_opponent": 0,
    "game_score_us": 0,
    "google_directions_from_school": null,
    "google_map": null,
    "grade_level": "9, 10, 11, 12",
    "group_id": "0-2005-0-0-0-0-0-0",
    "group_pk": 0,
    "location": null,
    "notes": null,
    "primary_group": null,
    "school_level": "US",
    "start_date": "2013-03-22",
    "start_time": null,
    "student_group": null,
    "update_date": "2013-02-21",
    "url": null
  },
  {
    "athletic_opponent": null,
    "campus": null,
    "class_fk": 0,
    "contact_person": null,
    "description": "March Break",
    "destination_address": null,
    "end_date": "2013-03-25",
    "end_time": null,
    "event_pk": 19603,
    "event_type": "No School",
    "game_outcome": "N/A",
    "game_score_opponent": 0,
    "game_score_us": 0,
    "google_directions_from_school": null,
    "google_map": null,
    "grade_level": "9, 10, 11, 12",
    "group_id": "0-2005-0-0-0-0-0-0",
    "group_pk": 0,
    "location": null,
    "notes": null,
    "primary_group": null,
    "school_level": "US",
    "start_date": "2013-03-23",
    "start_time": null,
    "student_group": null,
    "update_date": "2013-02-21",
    "url": null
  },
  {
    "athletic_opponent": null,
    "campus": null,
    "class_fk": 0,
    "contact_person": null,
    "description": "March Break",
    "destination_address": null,
    "end_date": "2013-03-25",
    "end_time": null,
    "event_pk": 19603,
    "event_type": "No School",
    "game_outcome": "N/A",
    "game_score_opponent": 0,
    "game_score_us": 0,
    "google_directions_from_school": null,
    "google_map": null,
    "grade_level": "9, 10, 11, 12",
    "group_id": "0-2005-0-0-0-0-0-0",
    "group_pk": 0,
    "location": null,
    "notes": null,
    "primary_group": null,
    "school_level": "US",
    "start_date": "2013-03-24",
    "start_time": null,
    "student_group": null,
    "update_date": "2013-02-21",
    "url": null
  },
  {
    "athletic_opponent": null,
    "campus": null,
    "class_fk": 0,
    "contact_person": null,
    "description": "March Break",
    "destination_address": null,
    "end_date": "2013-03-25",
    "end_time": null,
    "event_pk": 19603,
    "event_type": "No School",
    "game_outcome": "N/A",
    "game_score_opponent": 0,
    "game_score_us": 0,
    "google_directions_from_school": null,
    "google_map": null,
    "grade_level": "9, 10, 11, 12",
    "group_id": "0-2005-0-0-0-0-0-0",
    "group_pk": 0,
    "location": null,
    "notes": null,
    "primary_group": null,
    "school_level": "US",
    "start_date": "2013-03-25",
    "start_time": null,
    "student_group": null,
    "update_date": "2013-02-21",
    "url": null
  },
  {
    "athletic_opponent": null,
    "campus": null,
    "class_fk": 0,
    "contact_person": null,
    "description": "Boarders back by 9:00",
    "destination_address": null,
    "end_date": null,
    "end_time": null,
    "event_pk": 19604,
    "event_type": "Other",
    "game_outcome": "N/A",
    "game_score_opponent": 0,
    "game_score_us": 0,
    "google_directions_from_school": null,
    "google_map": null,
    "grade_level": "9, 10, 11, 12",
    "group_id": "0-2005-0-0-0-0-0-0",
    "group_pk": 0,
    "location": null,
    "notes": null,
    "primary_group": null,
    "school_level": "US",
    "start_date": "2013-03-25",
    "start_time": null,
    "student_group": null,
    "update_date": null,
    "url": null
  }
] 
```

我的 JSON 解析代码：

```
- (NSDictionary *)parseJSON:(NSString *)jsonString
{
    NSData *data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSError *error;

    id resultObject = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];
    if (resultObject == nil) {
        NSLog(@"JSON Error: %@", error);
        return nil;
    }

    /*if (![resultObject isKindOfClass:[NSDictionary class]]) {
        NSLog(@"JSON Error: Expected dictionary");
        return nil;
    }*/

    return resultObject;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T07:56:05.690

数组是 JSON 的有效根对象。由于这是您拥有的 JSON，因此请重写您的代码以期望一个字典数组。`resultObject`是 NSArray，而不是 NSDictionary（这就是 JSONObjectWithData: 返回的原因`id`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T11:13:22.813

你可以做这样的事情

```
 for (int i = 0; i < [responseObject count]; i++) {
        NSLog([[responseObject objectAtIndex:i] objectForKey:@"description"]);
    } 
```

# facebook - 如何在每个帖子上添加一个赞页面按钮？

> ID：15458639
> 
> 赞同：2
> 
> 时间：2013-03-17T07:48:50.527
> 
> 标签：facebook, post, facebook-like, facebook-page

这些天我看到很多页面在页面名称的右侧都有一个“Like Page”按钮。我知道赞助页面有这种功能，但我最近看到一些页面的帖子没有赞助，但帖子有一个这样的按钮。

这是一个抓取的图像来准确解释我在说什么：[这里](http://tinypic.com/r/xm8k1c/6)

任何想法这是如何实现的？我怎样才能为我的 Facebook 页面获得相同的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:00:41.027

是的。当您的朋友喜欢/分享/评论某个帖子时，就会出现此选项。部分`...barpande likes a photo`是因为他喜欢这张照片。然后它嵌入图像/喜欢的内容，以及喜欢页面的邀请。

# xml - 创建 XSD 文件

> ID：15458646
> 
> 赞同：0
> 
> 时间：2013-03-17T07:50:02.600
> 
> 标签：xml, xsd

我有一个 xml 文件，现在我需要创建 XSD。xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<resources>
  <ErrorMessageGroup>
    <group name="Common" description="Obecné chyby" />
    <group name="Authorize" description="Chyby autorizace" />
  </ErrorMessageGroup>
  <message errorMessageGroup="Common" code="" value="" />
  <message errorMessageGroup="Authorize" code="" value="" />
</resources> 
```

Visual Studio 为我生成 xsd 文件，我需要为 message 元素中的属性 errorMessageGroup 创建限制，只有有效值将是来自 group 元素的 name 属性的值...

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T07:58:18.457

这是您的 xml 的 xsd，并查看 errorMessage 组的限制

```
<?xml version="1.0" encoding="UTF-8"?>
    <xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
        <xs:element name="resources">
            <xs:complexType>
                <xs:sequence>
                    <xs:element ref="ErrorMessageGroup"/>
                    <xs:element ref="message" maxOccurs="unbounded"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="message">
            <xs:complexType>
                <xs:attribute name="value" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value=""/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
                <xs:attribute name="errorMessageGroup" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value="Authorize"/>
                            <xs:enumeration value="Common"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
                <xs:attribute name="code" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value=""/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
            </xs:complexType>
        </xs:element>
        <xs:element name="group">
            <xs:complexType>
                <xs:attribute name="name" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value="Authorize"/>
                            <xs:enumeration value="Common"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
                <xs:attribute name="description" use="required">
                    <xs:simpleType>
                        <xs:restriction base="xs:string">
                            <xs:enumeration value="Chyby autorizace"/>
                            <xs:enumeration value="Obecné chyby"/>
                        </xs:restriction>
                    </xs:simpleType>
                </xs:attribute>
            </xs:complexType>
        </xs:element>
        <xs:element name="ErrorMessageGroup">
            <xs:complexType>
                <xs:sequence>
                    <xs:element ref="group" maxOccurs="unbounded"/>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:schema> 
```

# javascript - 在 javascript、shell 排序、插入排序中对值进行排序时确定受影响的行

> ID：15458648
> 
> 赞同：0
> 
> 时间：2013-03-17T07:50:11.387
> 
> 标签：javascript, jquery, algorithm, sorting

我的应用程序中有这些排序算法，我想跟踪受影响的值，或者在排序过程中交换的值。我想强调它们。

我已经解决了冒泡排序和选择排序的这个问题，但不知何故我无法让它与插入排序和外壳排序一起使用。

这是我想要做的事情的小提琴：

[http://jsfiddle.net/4jnXf/1/](http://jsfiddle.net/4jnXf/1/)

如您所见，在迭代的最后一部分，这更像是插入排序，所以我不会问如何在插入排序中进行。最大的问题是迭代的第一部分、第二部分、第三部分，因为它没有任何意义。在迭代的最后一部分。我也强调了不交换的值。

我该如何纠正这一点。谢谢！这是错误的代码：

```
shell: function() {
    var list = anada.vars.$list;
    $.each(list, function(key, value){
        if (!isNaN(list[key])) {
            list[key] = parseInt(list[key]);
        } else {

        }
    });
    var n = list.length;
    var increment = Math.floor(n / 2);
    var i;
    while (increment > 0) {
        var unsorted = list;
        for (i = increment; i < n; i++) {
            var temp = list[i];
            var j = i;
            while (j >= increment && list[j - increment] > temp) {
                list[j] = list[j - increment];
                j -= increment;
            }
            list[j] = temp;
            var rows = '<tr>';
            for (ctr = 0; ctr < unsorted.length; ctr++) {
                if (list[ctr] !== unsorted[ctr]) {
                    rows += '<td class="affected">' + list[ctr];
                } else {
                    rows += '<td>' + list[ctr];
                }
            }

            anada.vars.$elements.push(rows);
        }
        increment = Math.floor(increment / 2);
        var row = '<tr>';
        anada.app.generateIterationList(list);

    }
    anada.app.generateTable('result-shell', 'Result of Shell Sort');
}, 
```

我尝试按照下面的答案进行操作，但我无法正确回答，我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:29:17.560

就个人而言，我会尽可能将排序本身与跟踪分开。通过创建一个广义的跟踪对象来做到这一点：

*   最初接受未排序的数组，记住它并打印它。
*   当排序迭代时，接受数组的每个部分排序的版本，将其与先前的版本进行比较，并以适当的突出显示打印它。

这种方法有两个优点：

*   在排序例程中，HTML 构建将减少到一行 - 一个简单的函数调用
*   该范例将适用于所有排序算法。

## 编辑

这是一些代码：

```
PrinterComparitor: function(container) {
    var _arr, _container;
    var init = function(container) {
        _container = container.empty();
    };
    var printMessage = function(message) {
        var $tr = $("<tr/>").addClass('message').appendTo(_container);
        var $td = $("<td/>").text(message).appendTo($tr);
        $td.attr('colspan', length);
        setMessageSpans();
    };
    var setMessageSpans = function() {
        var $messages = _container.find(".message");
        var length = _container.find("tr").not($messages).filter(":last").find("td").length || 1;
        $messages.find("td").attr('colspan', length);
    };
    var print = function(arr) {
        var $tr = $("<tr/>").appendTo(_container);
        var $td;
        $.each(arr, function(i, val) {
            $td = $("<td/>").text(val).appendTo($tr);
            if(_arr && _arr[i] !== val) $td.addClass('affected');
        });
        _arr = $.extend(arr);
        setMessageSpans();
    };
    init(container);
    this.init = init;
    this.print = print;
    this.printMessage = printMessage;
} 
```

[更新的小提琴](http://jsfiddle.net/4jnXf/3/)

# c - C 嵌套宏

> ID：15458649
> 
> 赞同：4
> 
> 时间：2013-03-17T07:50:32.473
> 
> 标签：c, c-preprocessor

为什么在一种情况下嵌套宏有效，而在另一种情况下无效？

情况1：

```
#define name(val) #val
#define name2(front, back) name(front ## back)
...

printf("%s\n", name2(foo, bar));   // foobar 
```

案例二：

```
#define paste(front, back) front ## back
#define name(val) #val
#define name2(front, back) name(paste(front, back))
...

printf("%s\n", name2(foo, bar));   // paste(foo, bar) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:07:32.830

因为如果宏的参数与 a `#`or一起出现`##`在宏主体中（如 in 的情况`val`） ，则不会扩展宏的参数`name`。请参阅[此问题](https://stackoverflow.com/questions/3419332/c-preprocessor-stringify-the-result-of-a-macro)的已接受答案。

所以在你的第二种情况下，你需要添加一个中间步骤来确保参数被扩展。例如：

```
#define paste(front, back) front ## back
#define name(val) #val
#define expand(val) name(val)  // expand val before stringifying it
#define name2(front, back) expand(paste(front, back)) 
```

# html - 使图像具有响应性 - 最简单的方法

> ID：15458650
> 
> 赞同：88
> 
> 时间：2013-03-17T07:51:25.923
> 
> 标签：html, css, image, mobile

我注意到我的代码是响应式的，事实上，如果我将其缩小到手机或平板电脑的大小 - 所有文本、链接和社交图标都会相应地缩放。

然而，唯一没有的是我在身体中的形象；包含在段落标签中...话虽如此，是否有一种简单的方法可以使图像也响应？

这是我曾经在正文中显示图像的代码：

```
<body>
    <center>
        <p><a href="MY WEBSITE LINK" target="_blank"><img src="IMAGE LINK" border="0" alt="Null"></a></p>
    </center>
</body> 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-03-17T08:04:15.577

你可以尝试做

```
<p>
  <a href="MY WEBSITE LINK" target="_blank">
    <img src="IMAGE LINK" style='width:100%;' border="0" alt="Null">
  </a>
</p> 
```

如果在流体布局中，这应该缩放您的图像。

对于响应式（意味着您的布局对窗口大小做出反应），您可以向图像添加一个类并使用`@media`CSS 中的查询来更改图像的宽度。

请注意，更改图像的高度会影响比例。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2014-08-29T07:59:09.563

宽度：当您在更宽的范围内查看时，100% 会破坏它。

以下是 Bootstrap 的`img-fluid`.

```
max-width: 100%; 
display: block; 
height: auto; 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-12-09T15:34:27.143

我还建议在与 HTML 文件不同的文件中使用所有 CSS 属性，这样可以更好地组织代码。

所以为了让你的 img 响应，我会这样做：

首先，使用HTML 文件中的or属性命名您的`<img>`标签：`class``id`

```
<img src="IMAGE LINK" border="0" class="responsive-image" alt="Null"> 
```

然后，在我的 CSS 文件中，我将进行更改以使其响应：

```
.responsive-image {
  height: auto;
  width: 100%;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-26T19:00:18.020

要使您网站上的所有图像都具有响应性，请不要从正确的标记更改您的内联 HTML，因为`width:100%`它不适用于所有浏览器并会导致 Firefox 出现问题。您希望按照通常的方式将图像放置在您的网站上：

```
<img src="image.jpg" width="1200px" height="600px" /> 
```

然后在 CSS 中添加任何图像最大宽度为 100%，高度设置为自动：

```
img {
    max-width: 100%;
    height: auto;
} 
```

这样您的代码就可以在所有浏览器中运行。它还可以与需要图像将实际图像大小编码到内联 HTML 中的自定义 CMS 客户端（即 Cushy CMS）一起使用，当您需要做的只是让图像响应时，它实际上更容易最大宽度为 100% 且高度设置为自动的 CSS 文件。不要忘记`height: auto`，否则您的图像将无法正确缩放。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-12T06:57:25.180

我正在使用这种技术以一种简单的方式保持徽标对移动设备的响应。徽标将自动调整大小。

**HTML**

```
<div id="logo_wrapper">
  <a href="http://example.com" target="_blank">
    <img src="http://example.com/image.jpg" border="0" alt="logo" />
  </a>
</div> 
```

**CSS**

```
#logo_wrapper img {
  max-width: 100%;
  height: auto;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-04-19T08:00:03.810

## 我经常用这个

您可以自定义`img`类和`max-width`属性：

```
img{
    width: 100%;
    max-width: 800px;
} 
```

`max-width`很重要。否则，您的图像将在桌面上缩放太多。不需要放入`height`属性，因为默认情况下它是自动模式。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-06-20T20:44:31.940

如果您被限制使用`<img>`标签：

我发现使用 a和设置 a或`<div>` *您选择的任何其他元素*要容易得多。`background-image``width: 100%``background-size: 100%`

这并不是响应式图像的*全部结束，但它是一个开始。*另外，尝试`background-size: cover`使用`background-position: center`.

**CSS：**

```
.image-container{
  height: 100%; /* It doesn't have to be '%'. It can also use 'px'. */
  width: 100%;
  margin: 0 auto;
  padding: 0;

  background-image: url(../img/exampleImage.jpg);
  background-position: top center;
  background-repeat: no-repeat;
  background-size: 100%;
} 
```

**HMTL：**

```
<div class="image-container"></div> 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-03-31T13:39:12.137

要使图像具有响应性，请使用以下命令：

**CSS**

```
.responsive-image {
        width: 950px;//Any width you want to set the image to.
        max-width: 100%;
        height: auto;
} 
```

**HTML**

```
<img class="responsive-image" src="IMAGE URL"> 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-03-17T08:06:44.703

将图像的高度或宽度设置为 %100。

Stack Overflow 问题中还有更多内容*[如何自动调整图像大小以适应“div”容器？](https://stackoverflow.com/questions/3029422/image-auto-resize-to-fit-div-container)*.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-10-10T11:10:39.437

图片应该这样设置

```
img { max-width: 100%; } 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-08-06T21:10:20.937

如图所示，使用 Bootstrap 让您的图像无忧无虑。使用类 img-responsive ，你就完成了：

```
<img src="cinqueterre.jpg" class="img-responsive" alt="Cinque Terre" width="304" height="236"> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-03-24T09:51:24.147

不是添加 CSS 来使图像响应，而是添加不同分辨率的图像 wrt 不同的屏幕分辨率将使应用程序更高效。

移动浏览器不需要具有桌面浏览器所需的相同高分辨率图像。

使用 SASS 可以很容易地使用媒体查询为不同的分辨率使用不同版本的图像。

# c - 在 C 语言中，我使用布尔逻辑通过 while 循环转到程序的开头，但是在我告诉它们之后我的变量没有重新初始化

> ID：15458655
> 
> 赞同：0
> 
> 时间：2013-03-17T07:51:51.820
> 
> 标签：c, while-loop, initialization, boolean-logic

我正在尝试制作一个程序，该程序允许用户发现斐波那契数列中偶数项的总和，直至任意用户定义的长度。我这样做是为了让用户有机会在他们选择时进行新的计算。我正在使用布尔逻辑和 while 循环来实现某种程序重启。

该程序第一次执行良好。但是，在每个后续用户输入中，先前的答案都会影响当前的答案。我试图在 while 循环开始时将我的变量重新初始化为它们的初始值（i = 1、j = 2、k = 0 和 sum = 0），但它仍然没有给我想要的结果。谢谢您的帮助。

```
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

int main()
{
    bool stayAlive = true; 
    long int sum = 0; //The sum of all even Fibonacci numbers
    long int i = 1; //initial 1st value of the Fibonacci sequence
    long int j = 2; //initial 2nd value of the Fibonacci sequence
    long int k = 0; //initial 3rd value of the Fibonacci sequence
    int x = 0;
    char name[50];
    printf("Hello, may I have your name?\n\n");
    scanf("%s", &name);
    putchar('\n');
    while(stayAlive)
    {
        printf("Hello %s! This program will sum up all of the evenly valued terms from\nthe Fibonacci sequence, up until an upper limit term specified by the user.\n",name);
        printf("Set this limit: "); 
        scanf("%d",&x); 
        putchar('\n');
        char c;
        while(k < x)//WHILE the "last term" is LESS than the "max term"
        {   
                        i ==1;
                        j ==2;
                        k ==0;
                        sum ==0;
            k = i + j;
            if(k%2==0)
                sum +=k;
            i = j;
            j = k;
        }

        printf("The sum of all of the evenly valued terms of the Fibonacci sequence up until\nthe value %d is %d.",x,sum); puts("\n");
        printf("Try another calculation? (Y/N) ");
        scanf("%s", &c);
        if(c == 'y'|| c == 'Y')
            continue;
        else
            printf("\nThanks for using this program, %s!",name);//This name character is not outputting here, even though it outputs earlier
            getchar();
            break;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:50:50.810

您如何从本网站吸收信息？*通过阅读...如果您必须为此*向我们寻求帮助，那么您当前的阅读方法显然行不通。你在看哪本书？

我认为您的程序应该看起来像这样，其他人可能会同意：

```
#include <assert.h>
#include <stdio.h>
#include <stdbool.h>
#include <string.h>

int main() {
    char name[50];
    int c;

    puts("Hello, may I have your name?");
    assert(scanf("%49s", &name) == 1);

    do {
        unsigned int upper_limit = 0, x = 1, y = 2, sum = 0;

        printf("Hello %s! This program will sum up all of the evenly valued terms "
               "the Fibonacci sequence, up until an upper limit term specified by "
               "the user.\n", name);
        puts("Set this limit:"); 
        assert(scanf("%u",&upper_limit) == 1);

        while (x < upper_limit) {
            if (x % 2 == 0) { sum += x; }
            x += y;

            if (y >= upper_limit) { break; }
            if (y % 2 == 0) { sum += y; }
            y += x;
        }

        printf("The sum of all of the evenly valued terms of the Fibonacci "
               "sequence up until the value %u is %u.\n", upper_limit, sum);
        puts("Try another calculation? (Y/N)");
        c = getchar();
    } while (c == 'Y' || c == 'y');

    printf("Thanks for using this program, %s!\n", name); //This name character IS outputting here, because '\n' goes at the end ;)
    getchar();
} 
```

您会注意到许多变量位于更本地以供其使用。这是因为它们*不需要*在该循环之外声明；这些变量仅在该循环中使用，因此应在此处声明它们。您如何将我的循环转换为`for`循环？暗示：`for (int c = 'Y'; c == 'Y' || c == 'y'; c = /* TODO */)`

您还会注意到`assert`宏的使用。做一些研究，找出这个宏的用途并用更合适的东西替换它，以确保 scanf 正确读取和转换输入可能是值得的。*不要只是忽略返回值*，**当然也不要像我在这个例子中所做的那样将副作用放入断言中**。

在一个地方我用过`getchar`你用过的地方`scanf`。这是因为：

1.  `scanf`返回值被忽略，在这种情况下的失败机制没有*被*忽略。也许从头开始编写自己的标准兼容是一个好主意[`fscanf`](http://pubs.opengroup.org/onlinepubs/009695399/functions/scanf.html)，这样您就可以理解返回值代表什么以及为什么它们*不*应该被忽略。
2.  提供的指针`scanf`不适合存储包含“Y”或“y”的字符串；那`char`只能存储一个字节，其中`sizeof "Y"`和`sizeof "y"`表示这两个字符串需要*两个*字节。[`strlen`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strlen.html)也许从头开始编写自己的标准兼容是个好主意，这样您就可以理解为什么需要*第二个字节*。

或者，考虑*仔细阅读手册*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:04:43.333

当您想要：

> **在 while 循环开始时将我的变量重新初始化**为其初始值（i = 1、j = 2、k = 0 和 sum = 0）

放 ：

```
sum = 0; 
i = 1; 
j = 2; 
k = 0; 
```

**在**while循环内。

同时删除这些行：

```
i ==1;
j ==2;
k ==0;
sum ==0; 
```

另外，您可以使用 %c 代替：

`scanf("%c", &c);`

由于您只阅读一个字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T08:07:06.247

您没有第二次初始化这些值。

在以下代码之后：

```
if(c == 'y'|| c == 'Y')
        continue; 
```

您仍处于 while(stayAlive) 循环中。

所以你应该初始化你的总和等。在 if(c == 'y'|| c == 'Y') 语句之后

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-17T08:46:07.493

当您需要重新启动程序时，您可以调用 main() 函数。

例子：

`if (condition) { main();)}`

# java - java中的同步多线程

> ID：15458658
> 
> 赞同：3
> 
> 时间：2013-03-17T07:52:23.097
> 
> 标签：java, multithreading

我正在自学 Java，我想了解多线程。我创建`MyThread`了一个带有作业的类来执行循环，直到条件为真，然后打印有关它的信息。它包含静态字段`left`，该字段在构造函数中递增，并在作业完成时递减。类`Flag`是“告诉”线程何时开始。不幸的是，当所有线程都完成时`left`不等于零。我做了一些方法`synchronized`，它变得更好了，但它仍然不完美。我究竟做错了什么？

```
import java.util.Random;

class Flag
{
    private boolean ok = false;
    synchronized boolean ok()
    {
        return ok;
    }
    synchronized void setOk(boolean ok)
    {
        this.ok = ok;
    }
}

class MyThread extends Thread
{
    static int left = 0;

    synchronized void add()
    {
        left++;
    }

    synchronized int remove()
    {
        return --left;
    }

    String name;
    Flag flag;
    Random rnd = new Random();
    public MyThread(String name, Flag flag)
    {
        this.name = name;
        this.flag = flag;
        add();
    }

    public void run()
    {
        while(!flag.ok());

        double rnd;
        long count = 0;
        do{
            count++;
            rnd = Math.random();
        } while(rnd > 0.00001);
        print(count);
    }

    synchronized void print(long count)
    {
        System.out.printf("%s %10d left: %3d%n", name, count, remove());
    }
}

public class Test
{
    public static void main(String... args) throws Exception
    {
        Flag flag = new Flag();
        for(int i=0; i<2000; i++){
            new MyThread(String.format("%04d",i),flag).start();
        }

        flag.setOk(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:19:43.000

由于静态变量上的对象同步导致意外结果。

我已经测试了你的代码，几乎没有改变。我将`Synchronized`块与 MyThread.class 一起使用，因为我需要同步内部的静态变量`MyThread`。

```
void add() {
    synchronized (MyThread.class) {
        left++;
    }
}

int remove() {
    synchronized (MyThread.class) {
        return --left;
    }
} 
```

每次它打印预期的结果。您也可以使用`AtomicInteger`变量。它用于诸如原子递增计数器之类的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T08:11:48.187

`++left`并且`--left`不是原子操作。当多个线程尝试执行时，可能会出现两个尝试同时递减`left`的情况。这种行为是由于您的代码在实例级别同步（`print`是实例方法），`left`而是`static`（类）变量。

另请注意，打印的值`print()`是无序的（因为`print`不是静态同步的，所以打印的“最后一个”值可能不是调用的最后一个线程的值`print`）。

第一个变化：在所有线程执行后检查`left`确实为零。

```
public static void main(String... args) throws Exception
    {
        java.util.List<Thread> threads = new java.util.LinkedList<Thread>();
        Flag flag = new Flag();

        for(int i=0; i<20; i++){
            Thread thread=new MyThread(String.format("%04d",i),flag);
            threads.add(thread);
            thread.start();
        }

        flag.setOk(true);            
        for (Thread thread:threads) thread.join();
        System.out.println(MyThread.left);
    } 
```

输出：

```
0003       9527 left:  19
0000      56748 left:  18
0006      11428 left:  17
0016     181845 left:   2
0010      95287 left:   3
0017     137911 left:   4
0018     432172 left:   5
0019     280280 left:   6
0013     421170 left:   7
0012     135830 left:   8
0015     104375 left:   9
0014     207409 left:  10
0001      16157 left:  11
0004     160136 left:  12
0008      31673 left:  13
0002      14589 left:  14
0005      23692 left:  15
0009      83419 left:  16
0011     231135 left:   0
0007     202603 left:   1
0 
```

第二个变化：在类上同步（`add`,`remove`并`print`转换为静态方法；我们还必须替换对 in 的调用`print`，`run`因为`name`从静态方法中不再可见`print`）。

```
 synchronized static void add()
    {
        left++;
    }

  synchronized static int remove()
    {
        return --left;
    }

  synchronized static void print(long count, String name)
    {
        System.out.printf("%s %10d left: %3d%n", name, count, remove());
    }

  public void run()
    {
        ...
        print(count,name);
    } 
```

输出：

```
0012      10207 left:  19
0006     121343 left:  18
0000      16236 left:  17
0008      81429 left:  16
0010      20250 left:  15
0002      14687 left:  14
0015      11051 left:  13
0017      23602 left:  12
0019      19651 left:  11
0005     180155 left:  10
0014     126578 left:   9
0003      41790 left:   8
0016      98362 left:   7
0001      96047 left:   6
0004     334071 left:   5
0009      46827 left:   4
0018     102826 left:   3
0013      71625 left:   2
0007     267208 left:   1
0011     188743 left:   0
0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T10:36:38.727

在线程之间交换信息时不要使用普通变量。将线程视为具有自己内存的进程。要决定如何交换信息，请提出以下问题：

1.  BlockingQueue 是否符合我的需求？BlockingQueue 是线程之间交换信息的最常用媒体。

2.  如果是这样，我真的需要发送数据块，还是只需要计算信号的数量？有几种类型的共享计数器：信号量、原子数、CountdownLatch 等。在您的情况下， AtomicInteger 看起来就足够了。

3.  如果没有，其他现成类型的同步集合可以工作吗？

4.  如果没有适合您需要的现成同步数据交换类，请创建您自己的。

# sql - SQL时间延长到第二天

> ID：15458663
> 
> 赞同：1
> 
> 时间：2013-03-17T07:52:45.703
> 
> 标签：sql, sql-server, join

我有两张桌子。

# 地图

```
 Product    Channel  Date   Advt Time 
Air    Pix  30-04-2011  22:23:16
Air    Pix  30-04-2011  23:55:08 
```

# 工商管理硕士

```
 Product    Channel Date    StartTime EndTime 
Air    Pix  30-04-2011  22:00:00   01:00:00
Air    Pix  30-04-2011  23:00:00   02:00:00 
```

我必须检查 MAP 中的 AdvtTime 是否介于 MBA 表中的 StartTime 和 EndTime 之间。

我使用了以下查询

```
select distinct * 
from MAP 
inner join MBA on (MAP.Channel     = MBA.Channel 
                   and MAP.Product = MBA.Product 
                   and MAP.ProgDate=MBA.ProgDate) 
where AdvtTime between ti and tii
order by Channel asc 
```

但随着结束时间延长到第二天，它没有给出任何结果。请帮助我如何进一步进行。

我想：

*   `22:23:16`匹配`22:00:00`,`01:00:00`和
*   `23:55:08`匹配`23:00:00`到`02:00:00`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T11:10:49.593

您也可以将此选项与简单的 JOIN 一起使用

```
SELECT DISTINCT *
FROM dbo.map m JOIN dbo.mba m2 ON m.Product = m2.Product
                                 AND m.Channel = m2.Channel
                                 AND m.[Date] = m2.[Date]
                                 AND (m.[Advt Time] > m2.[StartTime] AND m2.[StartTime] > m2.[EndTime] 
                                   OR  m.[Advt Time] BETWEEN m2.[StartTime] AND m2.[EndTime]) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/ed23d/2)上的演示[](http://sqlfiddle.com/#!3/ed23d/2)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:04:45.453

```
 select distinct * 
from MAP 
inner join MBA on (MAP.Channel     = MBA.Channel 
                   and MAP.Product = MBA.Product 
                   and MAP.ProgDate=MBA.ProgDate) 
where (AdvtTime between ti and tii) or (AdvTime between ti and DATEADD(hh, DATEDIFF(HH,AdvTime, tii),tii))
order by Channel asc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:02:23.467

以下查询应为您提供所需的答案：

```
SELECT DISTINCT *
FROM MAP
INNER JOIN MBA
ON MAP.Channel = MBA.Channel
AND MAP.Product = MBA.Product
WHERE (MAP.Date = MBA.Progdate
       AND AdvtTime >= StartTime
       AND (AdvtTime <= EndTime OR EndTime < StartTime))
      OR
      (MAP.Date = dateadd(DAY,1,MBA.ProgDate) -- extended from yesterday
       AND EndTime < StartTime                -- iff EndTime < StartTime
       AND AdvtTime <= EndTime)
ORDER BY MBA.Channel ASC 
```

请参阅[http://www.sqlfiddle.com/#!6/1e49f/1/0](http://www.sqlfiddle.com/#!6/1e49f/1/0)进行测试。

但是，最好将日期和时间组合到日期时间字段中，然后在需要时提取单独的部分以进行演示。**

# scala - 如何将解析器与不同类型的 Elem 结合起来

> ID：15458666
> 
> 赞同：4
> 
> 时间：2013-03-17T07:52:54.127
> 
> 标签：scala, types, parser-combinators

我正在尝试创建一个结合了 Regex 解析器和我拥有的自定义解析器的解析器。我看过[Scala: How to combine parser combinators from different objects](https://stackoverflow.com/questions/2650254/scala-how-to-combine-parser-combinators-from-different-objects)，但那个问题和答案处理的是具有相同类型的解析器`Elem`。

假设我有几个 RegexParsers，还有一个用于查找字符串的解析器：

```
trait NumbersParsers extends RegexParsers {
  def number = """\d+""".r
}

trait LookupParsers extends Parsers {
  type Elem = String
  def word = elem("word", (potential:String) => dictionary.exists(_.equals(x))
} 
```

如果我天真地结合这些解析器

```
object MyParser extends NumbersParsers with RegexParsers {
  def quantitive = number ~ word
} 
```

由于`Elem`. 如何组合这些解析器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:53:34.687

[自从我询问并回答了 Scala: How to combine parser combinators from different objects](https://stackoverflow.com/questions/2650254/scala-how-to-combine-parser-combinators-from-different-objects)以来，我觉得有责任回答这个问题。

快速的答案是，你不能组合不同类型的`Elem`. 解决此问题的一种不同而优雅的方法是使用`^?`额外的过滤来增强正则表达式解析器。

阅读Scala 编程中的[Combinator Parsing](http://www.artima.com/pins1ed/combinator-parsing.html)可能会有所帮助：

> ### 解析器输入
> 
> 有时，解析器会读取标记流而不是原始字符序列。然后使用单独的词法分析器将原始字符流转换为标记流。解析器输入的类型定义如下：
> 
> ```
> type Input = Reader[Elem] 
> ```
> 
> 类 Reader 来自包`scala.util.parsing.input`。它类似于 Stream，但也跟踪它读取的所有元素的位置。该类型`Elem`表示单个输入元素。它是`Parsers`trait 的抽象类型成员：
> 
> ```
> type Elem 
> ```
> 
> 这意味着解析器的子类和子特征需要将类实例化为`Elem`正在解析的输入元素的类型。例如，`RegexParsers`并`JavaTokenParsers`固定`Elem`为等于`Char`。

So`Elem`被词法分析器使用，它负责将输入流分割成解析器想要处理的最小可能的标记。由于您要处理正则表达式，因此您的`Elem`is `Char`。

但别担心。仅仅因为你的*词法分析器*给了你`Char`s 并不意味着你的*解析器*也被它们困住了。给你`RegexParsers`的是一个从正则表达式到`Parser[String]`. `^^`您可以使用运算符（完全映射输入）和`^?`运算符（部分映射输入）进一步转换它们。

让我们将它们合并到您的解析器中：

```
import scala.util.parsing.combinator._

scala> val dictionary = Map("Foo" -> "x")
dictionary: scala.collection.immutable.Map[String,String] = Map(Foo -> x)

scala> trait NumbersParsers extends RegexParsers {
     |   def number: Parser[Int] = """\d+""".r ^^ { _.toInt }
     | }
defined trait NumbersParsers

scala> trait LookupParsers extends RegexParsers {
     |   def token: Parser[String] = """\w+""".r
     |   def word =
     |     token ^? ({
     |       case x if dictionary.contains(x) => x
     |     }, {
     |       case s => s + " is not found in the dictionary!"
     |     })
     | }
defined trait LookupParsers

scala> object MyParser extends NumbersParsers with LookupParsers {
     |   def quantitive = number ~ word
     |   
     |   def main(args: Array[String]) {
     |     println(parseAll(quantitive, args(0) ))
     |   }
     | }
defined module MyParser

scala> MyParser.main(Array("1 Foo"))
[1.6] parsed: (1~Foo)

scala> MyParser.main(Array("Foo"))
[1.1] failure: string matching regex `\d+' expected but `F' found

Foo
^

scala> MyParser.main(Array("2 Bar"))
[1.6] failure: Bar is not found in the dictionary!

2 Bar
     ^ 
```

# android - 在 ScrollView / WebView / ListView 中扩展滚动区域

> ID：15458671
> 
> 赞同：2
> 
> 时间：2013-03-17T07:53:32.880
> 
> 标签：android, listview, webview, scroll, scrollview

我正在尝试创建一个自定义滚动组件（`ScrollView`, `ListView`, `WebView`），它的滚动区域（内容区域）可以通过编程方式扩展到内容之外。如果您愿意，请在底部添加“内容填充”。

我不认为添加空视图和布局是一个好方法，因为它看起来有点“hackey”并且强制限制插入顺序。

我知道在 Objective C 中，当为 iOS 编程时，可以直接访问 a 中的`contentSize`,`ScrollView`​​ 并且我正在寻找（或创建）类似的东西。这意味着我认为最好直接影响内容区域大小的计算，但我不确定从哪里开始。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T16:20:24.313

很明显源码是我第一个去的地方，但是所有这些组件都是几千行的实现。另外，我知道走这条路线有太多潜在的故障点，所以我决定走这条路线，在每个容器的末尾添加一个我控制的视图。

对于`ListView`我使用合成样式创建了一个自定义`ListAdapter`，覆盖了我需要添加我的自定义视图作为列表中设置的任何适配器中的最后一个视图的方法。

对于`ScrollView`我在 中创建了一个隐藏的布局层次结构`ScrollView`，覆盖视图插入方法以将所有视图插入到我的受控布局中，下面是我的填充视图。

对于`WebView`，因为我不希望在这个项目中进行任何水平滚动，所以我坚持用我的 custom 包装它`ScrollView`。

如果有人想了解更多细节，您可以发表评论。

# mongodb - $elemMatch 与嵌套对象（或其他解决方案）

> ID：15458672
> 
> 赞同：2
> 
> 时间：2013-03-17T07:53:37.547
> 
> 标签：mongodb

我有一个专辑的集合，专辑的例子：

```
var album = {
    name: 'album1',
    tracks: [{
        title: 'track0',
        language: 'en',
        processing: {
            tasks: [
                {name: 'someTask', started: '12/12/12' },
                {name: 'someTask', started: '12/10/12' },
                {name: 'anotherTask', started: '12/12/10', finished: '12/12/10' }
            ]
        }

    },{
        title: 'track1',
        language: 'en',
    },{
        title: 'track2',
        language: 'es',
    }]
} 
```

如何实现以下 1) 对于特定专辑和曲目我需要按名称选择任务，例如（Album1 和 track0 的所有 'someTask'）

2）第二个问题是在未完成的任务中选择最后一个任务。

因此，对于第一个查询，我需要得到：

```
{
    name: 'album1'
    tracks: [{
        title: 'track0',
        language: 'en',
        processing: {
            tasks: [
               {name: 'someTask', started: '12/12/12' },
               {name: 'someTask', started: '12/10/12' },
            ]
        }
   ]
} 
```

对于第二个查询，我需要得到：

```
{
    tracks: [{
        title: 'track0',
        language: 'en',
        processing: {
            tasks: [
                {name: 'someTask', started: '12/10/12' },
            ]
        }
   ]
} 
```

所以我只想选择一个满足条件的任务。我用 $elemMath 尝试了不同的变量，例如：

```
tracks: {$elemMatch: {'processing.tasks': {$elemMatch:{name: 'someTask'}}}} 
```

但在结果中，我得到了所有 processing.tasks，而不仅仅是名为“someTask”的任务。

第二个比较复杂，我不知道如何处理它。

# java - 扩展java中静态方法返回的对象

> ID：15458679
> 
> 赞同：3
> 
> 时间：2013-03-17T07:55:16.207
> 
> 标签：java, oop, static, subclass, superclass

我有以下问题。

我有一个库类的静态方法（我无法更改），如下所示：

```
Loader.loadModel() 
```

它返回一个模型类型的对象。

我还创建了一个名为 ExtendedModel 的 Model 子类，它向 Model 添加了一些方法和一些字段。

我不能做：

```
ExtendedModel m = Loader.loadModel() //compiler error
ExtendedModel m = (ExtendedModel) Loader.loadModel() //ClassCastException at runtime 
```

因为在 Java 中，您不能将超类的对象分配给子类。

但是，我想知道：这是向 Loader.loadModel() 返回的对象添加方法和字段的最佳方式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:09:02.963

尽管您添加了一个新类，但您没有该类的新实例。为了能够使用模型的其他方法和字段，您需要有一个 ; 的实例`ExtendedModel`。返回“常规”的`Loader.loadModel()`实例`Model`，导致问题。

要扩展对象的功能，您需要编写一个包装类。包装器通常采用“基”类的对象，将基本功能委托给它，并添加自己的一些方法/变量：

```
public class ExtendedModel : Model {
    private final Model wrapped;
    public ExtendedModel(Model model) { wrapped = model; }
    private int addedField = 123;
    // Methods of the Model that you did not change simply forward the calls:
    public void doSomething() { wrapped.doSomething(); }
    public int calculateSomething() { return wrapped.calculateSomething(); }
    // Extended methods do whatever you need them to do:
    public int getAddedField() {return addedField;}
    public void increment() {addedField++;}
} 
```

现在你可以创建一个`ExtendedModel`这样的实例：

```
ExtendedModel m = new ExtendedModel(Loader.loadModel()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T08:23:08.240

您**可以**做的是使用 Java Reflect API。这提供了最简单的实现，但可能不如其他解决方案快。

您基本上要做的就是将所有数据从 Model 传递到 ExtendedModel，并让 ExtendedModel 当然扩展 Model。

我的“模型”课：

```
public static void main(String[] args) throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException {
    Model model = new Model(1);
    ExtendedModel extended = model.get(ExtendedModel.class);
    extended.setA2("Hello World");
    System.out.println(extended.getA1());
    System.out.println(extended.getA2());
}

private int a1;

public Model() {}
public Model(int a1) {
    this.a1 = a1;
}

public void setA1(int a1) {
    this.a1 = a1;
}

public int getA1() {
    return this.a1;
}

/**
 * This method will transform the current object into an ExtendedModel.
 * @throws SecurityException 
 * @throws NoSuchMethodException 
 * @throws InvocationTargetException 
 * @throws IllegalArgumentException 
 * @throws IllegalAccessException 
 * @throws InstantiationException 
 */
public <T> T get(Class<? extends T> classType) throws InstantiationException, IllegalAccessException, IllegalArgumentException, InvocationTargetException, NoSuchMethodException, SecurityException {
    T object = classType.getConstructor().newInstance();

    // pass all the data via setters
    for (Field field : this.getClass().getDeclaredFields()) {
        String methodName = "set"+StringUtil.ucfirst(field.getName()); // uppercase first!
        classType.getMethod(methodName, field.getType()).invoke(object, field.get(this));
    }

    // return object
    return object;
} 
```

我的“扩展模型”课程：

```
public class ExtendedModel extends Model {

    private String a2;

    public ExtendedModel() {}

    public String getA2() {
        return this.a2;
    }

    public void setA2(String a2) {
        this.a2 = a2;
    }

} 
```

当然，您也可以使用 getter 而不是直接访问属性。这将帮助您轻松地将解决方案与其他类/对象一起使用。唯一重要的是：

1.  声明一个默认构造函数（没有或一组已知数量的参数）。
2.  将所有数据从“Model”复制到“ExtendedModel”或您想要扩展的任何类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T07:56:55.407

**你不能**。

这就是面向对象编程的工作原理。如果您想添加任何其他功能，**请编写一个包含静态方法的辅助类，**这些方法接受 a`Model`并返回一些所需的值，例如 an `int`, `double`, ...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T08:19:00.947

你不能，但你可以做的是使用[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)，它只是另一个类，将具有原始对象类型的字段，然后你可以对该对象执行操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-17T08:26:00.313

你可以试试这个。您的解决方案总是需要一种粗略的方法。

让“Loader.loadModel()”返回“ExtendedModel”的实例，但返回对象将设置为模型的引用。像这样的东西：

```
Model m = Loader.loadModel(); 
```

现在您的投射将起作用，如下所示。

```
ExtendedModel mx = (ExtendedModel) m; 
```

这类似于在泛型之前发生的事情。在我上面显示的特定情况下允许向下转换。

# apache - 使用 .htaccess 重定向域之后的所有内容

> ID：15458682
> 
> 赞同：-1
> 
> 时间：2013-03-17T07:55:57.850
> 
> 标签：apache, .htaccess, redirect, seo

我将如何重定向，例如`domain.com/index.php?677775=1`，`domain.net`在域之后使用相同的 uri？

不知道怎么解释，但我尽力了。

示例：当您转到 时`http://fb.com/***`，它会将您重定向到`http://www.facebook.com/***`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T10:33:45.487

类似的帖子：[.htaccess 将所有页面重定向到新域](https://stackoverflow.com/questions/1945568/htaccess-redirect-all-pages-to-new-domain)

这并不复杂，您只需将其写入域的 htaccess 文件中即可重定向：

```
RewriteEngine on
RewriteRule ^(.*)$ http://www.facebook.com/$1 [R=301] 
```

我希望我能帮助你。

# php - 随机显示多张图片

> ID：15458685
> 
> 赞同：-2
> 
> 时间：2013-03-17T07:56:20.660
> 
> 标签：php

我能用吗

```
$im = imagecreatefrompng('1.png'); 
```

并让它从一个文件夹中调出多个随机的PNG图像？

该网站是`livlaughlov.com`，现在它只是使用单个 PNG 并在其上写帖子文本，我希望它从文件夹中随机抓取一个 PNG 来写文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:05:34.110

您可以使用该[`glob()`](http://php.net/glob)功能和[`rand()`](http://php.net/rand)：

```
$folder = './dir/to/images/';
$files  = glob($folder.'*.png');
$rand   = rand(0, count($files)-1);

// random png image: $files[$rand]; 
```

# qt - 双字符数组映射到 QImage

> ID：15458686
> 
> 赞同：0
> 
> 时间：2013-03-17T07:56:38.747
> 
> 标签：qt, qimage

我在该 char 指针中有一个 dataBuffer[1000][1000] 的双指针 char 在某些地方我会将十六进制值设为 0xFF，其余为 0x00（用于 openGL 绘图）

现在我希望它显示为 QWidget，其十六进制值以像素为单位。

我发现 QImage 我们可以映射 1000x1000 像素，但我不知道如何将 char 的十六进制值映射到像素。

请帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:13:59.280

您可以尝试执行以下操作：

首先，`QImage`使用此构造函数从缓冲区构造：`QImage(const uchar* data, int width, int height, Format format)`，使用`QImage::Format_Indexed8`as`format`即

```
QImage img(dataBuffer, 1000, 1000, QImage::Format_Indexed8) 
```

二、初始化颜色翻译图：应该是`QVector<QRgb>`，所以你需要做这样的事情：

```
QVector<QRgb> colorMap(256);
colorMap[255] = QRgb(255, 255, 255); // Any color of your choice
// probably some other mappings 
```

然后`QImage::convertToFormat`像这样使用：

```
QImage converted = img.convertToFormat(QImage::Format_RGB32, colorMap) 
```

这会将其转换为 RGB。基本上就是这样，现在您可以在小部件上绘制此图像或将其保存到文件中。

# sql - 将 Unicode 字符串转换为十六进制

> ID：15458692
> 
> 赞同：-2
> 
> 时间：2013-03-17T07:57:05.830
> 
> 标签：sql, oracle, unicode, hex, globalization

我想将 Unicode 字符串转换为十六进制。

换句话说，我需要将字符串转换`أحمد`为：

```
0xC3CDE3CF0000000000000000000000000000000000000000000000000000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:21:03.917

尝试：

```
select rawtohex(convert('أحمد','AR8ISO8859P6','AL32UTF8')) 
from dual; 
```

[这是一个 sqlfiddle 演示](http://www.sqlfiddle.com/#!4/d41d8/8876)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:03:46.983

```
select rawtohex(col) from table 
```

# c# - 为什么可以使用反射更改只读字段的值，但不能更改 const 的值？

> ID：15458694
> 
> 赞同：8
> 
> 时间：2013-03-17T07:57:46.757
> 
> 标签：c#, reflection

为什么可以`readonly`使用反射修改字段的值，但不能修改 a 的值`const`？

```
class Program
{
    static void Main(string[] args)
    {
        Foobar foobar = new Foobar();
        Console.WriteLine(foobar.foo);                   // Outputs "Hello"
        Console.WriteLine(Foobar.bar);                   // Outputs "Hello"

        var field = foobar.GetType().GetField("foo");
        field.SetValue(foobar, "World");                // Ok
        field = foobar.GetType().GetField("bar");
        field.SetValue(foobar, "World");                // Throws FieldAccessException

        Console.ReadKey();
    }
}

public class Foobar
{
    public readonly string foo = "Hello";
    public const string bar = "Hello";
} 
```

我已经阅读[了这个答案](http://facebook.stackoverflow.com/a/6722620/1011036)，所以我知道它可以违反规则，`readonly`但为什么不`const`这样做呢？我敢肯定有一个很好的理由，但我无法弄清楚它可能是什么。

- 编辑 -

当我使用 ildasm 查看上面的代码时，该`readonly`字段的值是在编译时设置的。与类的构造函数不同，不是在字段本身上，`const`而是在类的构造函数中。所以我不确定为什么一个可以被“覆盖”，而另一个不能。

我的意思是，即使`const`二进制中的值是“硬编码”的，也是无法修改它的原因是框架本身的技术限制，因为“它已经设置”或只是一个设计决定。`const`我看不出有什么理由不能在某处修改`readonly`.

-- 编辑 2 --

加上已接受的答案，还有[另一个](https://stackoverflow.com/a/9109643/1011036)非常有趣的答案。当我问这个问题时，我首先没有得到的是，后面的值`const`实际上*在*代码中使用它的任何地方都被替换了。有了这个声明：

```
public const string Foo = "Hello"; 
```

稍后再写

```
Console.WriteLine(Foo); 
```

相当于写

```
Console.WriteLine("Hello"); 
```

确实我的代码

```
Console.WriteLine(foobar.foo);
Console.WriteLine(Foobar.bar); 
```

在 IL 中被替换为

```
IL_0008:  ldfld      string ConsoleApplication3.Foobar::foo
IL_000d:  call       void [mscorlib]System.Console::WriteLine(string)
IL_0012:  nop
IL_0013:  ldstr      "Hello"
IL_0018:  call       void [mscorlib]System.Console::WriteLine(string) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T08:00:32.410

因为`const`字段是在编译时“设置”的，即编译器在编译`const`期间用给定的值替换 。由于`const`值的工作方式，它们的值被复制到每个使用它们的程序集中。而`readonly`字段是在运行时评估的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T08:03:26.830

原因是常量在编译时被它的值替换。但只读字段不是。您可以在 declaraiotn 和/或该类的构造函数中为只读字段设置值。我希望这回答了你的问题。

# python - 如何将任意字符串作为命令运行

> ID：15458695
> 
> 赞同：1
> 
> 时间：2013-03-17T07:58:12.910
> 
> 标签：python, getattr

我看到 getattr() 用于一些简单的方法/函数调用的答案。

任意字符串怎么样，例如在这里进行网络解析：

```
from bs4 import BeautifulSoup
import urllib

f = urllib.urlopen(link) # link comes from database, e.g. 'http://www.example.com'
soup = BeautifulSoup(f)

text = soup.find(True, 'text').get_text() # Now this is hardcoded 
```

工作正常，但是运行来自数据库的解析器字符串怎么样？字符串可以是：

```
soup.find("div", "layout left").find(id=True).get_text() 
```

或完全匹配任何东西，取决于网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:01:21.480

您可以`eval`用来评估存储在字符串中的任意 Python 表达式。然而，这是危险的。黑客或不道德的用户可以将恶意代码插入数据库（例如，`1000000**1000000`导致 Python 发疯）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:13:55.553

为什么你不能从字符串行提前构造一个列表并做这样的事情？

```
tags = soup.findAll(['div','span']) 
```

或者

```
soup.findAll(lambda tag: tag.name in ['div', 'span'] or tag['id'] == "eggs") 
```

或者甚至更好：

```
tags = soup.findAll(['div', 'span'])
tags.extend(soup.findAll(id="eggs")) 
```

如果要按条件排除某些标签，可以将条件添加到 lambda 表达式。

**例子：**

来自数据库：

```
s = 'div;span;table' # or something like this with structure 
```

这样做：

```
tags_list = s.split(';')
tags = soup.findAll(tags_list) 
```

我想你明白了主要的想法。

# android - 如何在android中通过谷歌地图接收导航通知

> ID：15458697
> 
> 赞同：4
> 
> 时间：2013-03-17T07:58:33.253
> 
> 标签：android, google-maps, notifications

我在我的 android 项目中遇到了一些问题...我的应用程序采用用户的当前位置和最终目标位置。然后计算最短路径并在 Google 地图上突出显示它...我的问题是当用户关注它时我如何收到通知消息假设 10 米用户右转或左转后突出显示的路径...？ThankXx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T13:20:54.323

也不完全确定您的意思，但您想接收来自 Google 地图应用的通知吗？比如“这里左转”、“200米后，在环形交叉路口第一个出口”，看看Android中的无障碍服务：

[http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)

它可以读取通知栏中的通知。您可以在每次导航通知更新时触发它。

# android - 如何设置通知的时间和日期

> ID：15458705
> 
> 赞同：9
> 
> 时间：2013-03-17T07:59:09.087
> 
> 标签：android, notifications

在通知管理器中，我们使用此方法设置时间和日期以触发通知

```
.setWhen(System.currentTimeMillis()); 
```

但是`System.currentTimeMillis()`要取回设备上的当前时间，但我想添加指定的时间，例如（星期五 15:00）

我怎样才能做到这一点 ？？我如何以毫秒为单位设置这个时间并将其加载到`.setWhen`

提前致谢

我使用的这段代码

```
Notification.Builder builder =
new Notification.Builder(MyActivity.this);
builder.setSmallIcon(R.drawable.ic_launcher)
.setTicker(“Notification”)
.setWhen(System.currentTimeMillis())
.setDefaults(Notification.DEFAULT_SOUND |
Notification.DEFAULT_VIBRATE)
.setSound(
RingtoneManager.getDefaultUri(
RingtoneManager.TYPE_NOTIFICATION))
.setVibrate(new long[] { 1000, 1000, 1000, 1000, 1000 })
.setLights(Color.RED, 0, 1);
Notification notification = builder.getNotification(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-17T08:08:35.653

您应该使用 Java [Calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)类来指定日期。使用工厂方法实例化一个`Calendar`对象。`getInstance()`默认情况下，实例将使用您机器默认时区的当前日期和时间进行初始化。`Calendar`包含`set()`指定日期的不同方法，选择更适合您需要的方法并使用它来指定您需要的日期。然后调用该`getTimeInMillis()`方法，它将以毫秒为单位返回指定的日期。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-06T14:31:17.237

```
import java.util.*;
...
builder.setWhen(Calendar.getInstance().getTimeInMillis() ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-25T12:27:16.003

正如@Deimos 在评论中已经提到的那样，“setWhen”函数仅设置特定通知的时间戳以显示在通知中，它不是“FIRE”的时间戳或在特定时间点触发通知。它是 Notification(.Builder) 类的一部分，似乎只支持创建自定义通知。触发通知，例如在周日下午 1 点触发以提醒用户周末某事的通知可以在本地实现，例如在 AlarmManager 和 Broadcast 的帮助下，Alarm Manager 根据给定的日期和时间触发通知，或者使用任何服务器实例远程触发通知就像 Android 的 FCM。我希望这能消除任何可能即将发生的误解。

# vhdl - 串行 ATA (SATA) 的 CRC 计算

> ID：15458707
> 
> 赞同：2
> 
> 时间：2013-03-17T07:59:13.713
> 
> 标签：vhdl, crc32, sata

在阅读了很多之后，我才知道没有计算 CRC 的单一方法。我需要专门为串行 ATA (SATA) 计算 CRC 的方法/算法/VHDL 代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:35:52.597

SATA 使用 IEEE 802.3 CRC。以下是一些相关资源：

*   [串行 ATA 总线](http://www.interfacebus.com/Design_Connector_Serial_ATA.html)
*   [在 Spartan-6 FPGA 上设计和实现 SATA 主机控制器](https://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://liu.diva-portal.org/smash/get/diva2:549840/FULLTEXT02&ei=HYBFUf_HBc3y0gXunYGACg&usg=AFQjCNGjLe6OYdPyX3imxAlwv5IfkABMaw&sig2=C6G81NSCTXFXZaJdIRNGIw&bvm=bv.43828540,d.d2k)（第 2.7.2 节 CRC 错误检测）
*   [IEEE 802.3 循环冗余检查](http://www.xilinx.com/support/documentation/application_notes/xapp209.pdf)（Xilinx 应用笔记）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-17T14:58:47.253

这是[该 CRC 的完整描述](http://reveng.sourceforge.net/crc-catalogue/17plus.htm#crc.cat.crc-32)，包括位排序和前后处理。

# c++ - 通过 boost::asio::tcp::ip 发送的大正文

> ID：15458715
> 
> 赞同：0
> 
> 时间：2013-03-17T08:01:01.067
> 
> 标签：c++, networking, boost, tcp, boost-asio

我的协议很简单：我发送了一个`size_t`指示身体大小的信息，然后是身体本身。

代码基于[官方的Boost示例](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)，这里是：

```
class tcp_conn : 
        public std::enable_shared_from_this<tcp_conn>, 
        private boost::noncopyable 
    {
    public:
        tcp_conn(ba::io_service& io_service);
        void start();
        void stop();

        tcp::socket& socket();

    private:
        void handle_read_header(const error_code& e, std::size_t bytes_transferred);
        void handle_read(const error_code& e, std::size_t bytes_transferred);

        ba::streambuf::mutable_buffers_type buffer_wrapper_;
        ba::streambuf buffer_;
        std::size_t buffer_size_;
        tcp::socket socket_;

}; 
```

实现是：

```
void tcp_conn::start() {
    socket_.async_read_some(
        ba::buffer(&buffer_size_, sizeof(buffer_size_)),
        boost::bind(
          &tcp_conn::handle_read_header,
          this,
          ba::placeholders::error,
          ba::placeholders::bytes_transferred
          )
        );
}

void tcp_conn::handle_read_header(const boost::system::error_code& e, std::size_t bytes_transferred){
    if(!e) {
        buffer_wrapper_ =  buffer_.prepare(buffer_size_);

        socket_.async_read_some(
            ba::buffer(buffer_wrapper_),
            boost::bind(
              &tcp_conn::handle_read,
              this,
              ba::placeholders::error,
              ba::placeholders::bytes_transferred
              )
            ); 

    } else {
        //stop connection
    }
}

void tcp_conn::handle_read(const boost::system::error_code& e, std::size_t bytes_transferred)   {
    if (!e ) {
        buffer_.commit(bytes_transferred);

        if(buffer_.size() == buffer_size_) {
            std::cout << "WHOLE BODY TRANSFERED NOW" << std::endl;
            //has all data in buffer, handle it.
        }
        else {
            std::cout << "NOT WHOLE BODY TRANSFERED, still got "<< (buffer_size_ - bytes_transferred) << " to go" << std::endl;
            socket_.async_read_some(
                ba::buffer(buffer_wrapper_),
                boost::bind(
                  &tcp_conn::handle_read,
                  this,
                  ba::placeholders::error,
                  ba::placeholders::bytes_transferred
                  )
                ); 
        }

    }
    else {
        //handle error
    }   
} 
```

这不太行。我猜我的错误是在递归更新中的某个地方`buffer_wrapper_`——一些数据丢失了，被覆盖了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T09:59:13.213

`buffer_.commit()`使 的结果无效`prepare()`，如文档所述：[“返回的对象被任何修改输入序列或输出序列的 basic_streambuf 成员函数无效。”](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_streambuf/prepare.html)

实际上，`async_read_some()`您可以使用适当的无辅助函数`streambuf`和完成条件，而不是手动准备缓冲区和链：

```
asio::async_read(
   socket_,
   buffer_, 
   asio::transfer_exactly(buffer_size_),
   boost::bind(&tcp_conn::handle_read, this, _1, _2)
); 
```

`handle_read`当您获得整个消息正文或发生错误时，将调用这种方式。

# ruby-on-rails - 使用命名空间更新数据库做迁移

> ID：15458716
> 
> 赞同：0
> 
> 时间：2013-03-17T08:01:02.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试对我的数据库进行更改，并首先在我的 locahost 中对其进行测试。谁能看到我的错误是什么？

在 lib/tasks/update.rake 中：

```
namespace :update do

  desc "Update country"
  task :country_fix => :environment do
    Guideline.where(:hospital => 'Maine Medical Center, Maine').each do |t|
      t.update_attributes(hospital: 'Maine Medical Center')

    end

  end
end 
```

当我跑

```
rake update:country_fix 
```

它给出了一条看起来像（带有--trace）的错误消息......

```
** Invoke update:country_fix (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute update:country_fix
rake aborted!
Connection refused - connect(2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:05:12.477

```
Connection refused - connect(2) 
```

你检查过你的 database.yml 文件吗？也许您的数据库服务器或用户配置错误。

**编辑：**

还要检查您的环境。例如，如果您在生产服务器中运行您的 rake 任务，您应该像这样为您的 rake 命令添加前缀：

```
RAILS_ENV=production rake update:country_fix 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:08:50.893

Rake 任务本身看起来不错。

这`Connection refused`让我相信使用`config/database.yml`. 检查与您对应的数据库`RAILS_ENV`是否正在运行。一种快速的测试方法是：

```
rails db 
```

...这将根据您当前的数据库配置和您当前`mysql`的.`psql``RAILS_ENV`

检查您`RAILS_ENV`的：

```
echo $RAILS_ENV 
```

...并确保您确实在尝试连接到预期的数据库。

如果`rails db`不起作用，修复将取决于您的数据库是什么。如果它是 PostgreSQL 或 MySQL 或 Mongo 或大多数数据库，您必须使用适合您系统的任何东西来启动服务器。如果是SQLite3，则没有服务器；可能存在文件权限问题，但似乎这是一个不同的错误。

# jobs - 处理器管理器和作业中断

> ID：15458721
> 
> 赞同：1
> 
> 时间：2013-03-17T08:02:05.017
> 
> 标签：jobs, processor, interrupt-handling, interrupt

这是我在 CIS-21：操作系统课上的作业中的一个问题，我已经有了答案，因为导师给了我们，但他不想解释为什么这是答案。那么问题来了：

在系统中运行的作业，每个队列具有可变的时间量，需要 30 毫秒才能完成。如果第一个队列的时间量为 5 毫秒，之后每个队列的时间量是前一个队列的两倍，那么作业将被中断多少次，它将在哪个队列上完成执行？

第二部分很简单，作业将在第三级队列中完成（第一级队列为 5 毫秒，第二级队列为 10 毫秒，第三级队列为 20 毫秒）。由于作业需要 30 毫秒，因此它将在一级队列中执行 5 毫秒，然后在二级队列中执行 10 毫秒，在三级队列中执行 15 毫秒。

问题的第一部分是每个人，我的意思是每个人，在课堂上没有得到什么。教练说总共会有3次中断。但是当我们都说这将是 2 次中断时，他生气并继续前进.... 很奇怪，是吧？我花了这么多钱来接受适当的教育。

无论如何，我们的想法是，作业在第一个队列中运行 5 毫秒，然后发出中断，更新其 PCB（个人控制块），然后将其移入下一个较低的队列，即 10 毫秒队列. 一旦轮到它，作业将在二级队列中执行 10 毫秒，并发出中断。信息将在 PCB 中更新，作业将移动到下一个较低的队列，即 20 毫秒队列。到目前为止，已经中断了两次。一旦作业到达第三级队列中的队列顶部，它就会执行 15 秒，并在队列的时间段到期之前完成它的执行。

那么，他从哪里得到第三次中断呢？当程序完成执行时会发出第三个中断吗？我认为只有在存在内部中断时才会发生作业中断，例如 I/O 请求、时间段到期且作业周期未完成时，或者作业中存在非法操作/指令时。

那么，是否有 2 或 3 次工作中断，为什么？

**编辑：**在互联网上得到相互矛盾的答案后，我给导师发了电子邮件，他承认他犯了一个错误，而且只有 2 次中断，因为工作在 20 毫秒的队列中完成。以防万一有人想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:30:28.257

3 中断 - 当作业在第三级（即 20 毫秒）使用完整量子之前完成其执行时 - 密切调度程序以安排另一个进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T14:56:53.820

2 打断，教练犯了一个错误。该作业由 20 毫秒队列完成。

# java - 如何拆分字符串数组的每个元素并形成一个新数组？

> ID：15458723
> 
> 赞同：2
> 
> 时间：2013-03-17T08:02:13.460
> 
> 标签：java, arrays

假设我有一个字符串数组

```
NumText[]={“00111”， “01110”， “10110”}， 
```

现在我想要一个新数组

```
BinaryText[]={"0","0","1","1","1"......"1","1","0"}, 
```

这意味着我必须拆分数组 NumText[] 的每个元素，并将我得到的所有位组合到一个新数组中。我能弄清楚的是我为每个元素定义了一个字符串数组，比如

```
Binary0=NumText[0].split("");
Binary1=NumText[1].split("");
Binary2=NumText[2].split(""); 
```

之后，我必须删除每个 BinaryX 的前导零，并将它们连接在一起，这真是个坏主意。还有更好的方法吗？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:27:17.300

你也可以试试这个...

```
String[] numText = { "00111", "01110", "10110" };
char[] binaryText = (Arrays.toString(numText).replace("[", "").replace("]", "").replaceAll("[, ]", "")).toCharArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:14:53.537

使用两个循环，外部用于整个数组，内部用于每个索引处的字符串：

```
StringBuilder temp = new StringBuilder();
for(int i=0; i < numText.length; i++){
   for( int j = 0; j < numText[i].length(); j++){
        temp.append(numText[i].charAt(j));
   }

}

char[] newArray = temp.toCharArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T08:41:03.830

```
String numText[] = { "00111", "01110", "10110" };
StringBuilder sb = new StringBuilder();

for (int i = 0; i < numText.length; i++) {
    numText[i] = numText[i].replaceAll("^[0]*", ""); //Remove leading zeros
    for (int j = 0; j < numText[i].length(); j++) {
        sb.append(numText[i].charAt(j));
    }
}
String[] output = sb.toString().split(""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-17T08:23:08.393

我不知道您为什么要删除零，但这是我的答案

```
String [] s = {"01 110"," 10010","01010"};
        ArrayList<String> list= new ArrayList<String>();
        for(int i =0 ; i<s.length;i++){
            s[i]=s[i].replaceAll("[0\\s]", "");
                for(int j = 0 ; j<s[i].length();j++){
                    list.add(Character.toString(s[i].charAt(j)));
                }
        }
        System.out.println(list.toString()); 
```

# jquery - 通过 Ajax Post 或其他方式存储变量

> ID：15458734
> 
> 赞同：-1
> 
> 时间：2013-03-17T08:04:31.083
> 
> 标签：jquery, ajax, google-maps

我想存储来自谷歌地图点击事件的特定变量。我在想唯一的方法是使用某种类型的 post Ajax 调用。唯一的问题是我不知道如何将表单集成到我的活动中。

```
 google.maps.event.addListener(marker, 'click', (function(marker, i) 
{
    return function() 
    {
        infowindow.setContent("<a href="+SID[i].innerHTML+">" 
                              + lis[i].innerHTML+" </a?>"+"<br/>"
                              + "<a href='#' id='directions' >Get Directions </a>");

        infowindow.open(map, marker);                   
    }   
})
    (marker, i)); 
```

因此，当我单击特定标记时，我想存储标记位置，即 SID[i]。稍后在同一页面中，我将使用存储的变量。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:57:37.837

只要页面没有重新加载，您就可以使用以下任何方式存储变量：

*   作用域 JS 变量
*   HTML5 本地存储（持久，也适用于页面刷新）
*   jQuery 数据属性

**一个作用域的 JS 变量示例**

```
(function($)
{
    var storedMarker;

    $(function()
    {
        google.maps.event.addListener(marker, 'click', (function(marker, i)
        {
            storedMarker = marker;

            //continue with click logic
            ...
        })(marker, i));

        // Do something with stored marker
        $('.useStoredMarker').click(function(event)
        {
            if (storedMarker instanceof google.maps.Marker)
            {
                // storedMarker exists do something with it
            }
            else
            {
                // Marker doesnt exist show error or do nothing
            }
        });

    });

})(jQuery); 
```

**HTML 5 本地存储**

```
// Instead of storing variable in JS you can use this (HTML5 only)
localStorage.setItem("clickedMarker", marker);

// Retrieving it
var clickedMarker = localStorage.getItem("clickedMarker"); 
```

**jQuery 数据属性**

```
// Assign the marker to a DOM elements data attribute
$('#clickedMarkers').data('marker', marker);

// Retrieving it
var clickedMarker = $('#clickedMarkers').data('marker'); 
```

# c# - 如何使用DescriptionAttribute 实现带空格的枚举名称？

> ID：15458735
> 
> 赞同：-3
> 
> 时间：2013-03-17T08:04:36.500
> 
> 标签：c#, .net, vb.net, enums

如何使用`DescriptionAttibute`来实现以下目标`enums`？注意枚举值中的空格。

```
public enum PersonGender
    {
        Unknown = 0,
        Male = 1,
        Female = 2,
        Intersex = 3,
        Indeterminate = 3,
        Non Stated = 9,
        Inadequately Described = 9
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:10:12.617

例如，您可以这样使用：

这是我们的枚举：

```
public enum MyEnum
{
   [Description("Description for Foo")]
   Foo,
   [Description("Description for Bar")]
   Bar
} 
```

以及我们获取属性的方法。

```
public static string GetDescription(this Enum value)
{
    Type type = value.GetType();
    string name = Enum.GetName(type, value);
    if (name != null)
    {
        FieldInfo field = type.GetField(name);
        if (field != null)
        {
             DescriptionAttribute attr =
                    Attribute.GetCustomAttribute(field,
                    typeof(DescriptionAttribute)) as DescriptionAttribute;
              if (attr != null)
              {
                   return attr.Description;
              }
        }
    }
    return null;
} 
```

你可以得到描述：

```
 MyEnum x = MyEnum.Foo;
  string description = x.GetDescription(); 
```

[资源](https://stackoverflow.com/questions/1415140/c-sharp-enums-can-my-enums-have-friendly-names/1415187#1415187)

# clang - 使用 clang 为文件创建调用图

> ID：15458738
> 
> 赞同：12
> 
> 时间：2013-03-17T08:04:43.563
> 
> 标签：clang, graphviz, call-graph

有没有办法用clang创建一个可以合理地放在页面上的调用图？

即给出：

```
#include<iostream>
using namespace std;
int main()
{
    int a;
    cin>>a;
    cout<<a;
    cout<<a;
    return 0;
} 
```

我目前得到![在此处输入图像描述](../Images/e039da00add7903687a2aaf3a9861379.png)

通过使用：

```
$ clang++ main.cpp -S -emit-llvm -o - |
opt -analyze -std-link-opts -dot-callgraph
$ cat callgraph.dot | c++filt |
sed 's,>,\\>,g; s,-\\>,->,g; s,<,\\<,g' |
gawk '/external node/{id=$1}$1!=id' | dot -Tpng -ocallgraph.png 
```

（这似乎需要付出很多努力来做一些我没想到会如此困难的事情）。我想在水平轴上得到一些更合理的东西。`Unflatten`似乎没有任何影响（至少在这个文件上，在其他文件上似乎影响很小）。

有没有办法确保`png`生成的文件可以舒适地放在页面上（任何标准尺寸）？

**注意：**上述代码取自[为 C++ 代码生成调用图](https://stackoverflow.com/questions/5373714/generate-calling-graph-for-c-code)

**更新：**设置 page="8.5,11" 给出以下内容：

![在此处输入图像描述](../Images/53796a917b9a5c773c182c10ac92cc1b.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T22:42:59.070

我认为首先要做的是将图形的方向从默认的从下到上排名设置为从左到右，方法是插入：

```
rankdir=LR; 
```

... 在文件顶部附近`.dot`，在第一个`{`. 这应该使图形从左到右定向，从而使其对于具有长节点标签的这种情况更加紧凑。究竟如何做到这一点取决于`callgraph.dot`但是的格式，假设它看起来像这样：

```
digraph G {
    node [shape=rectangle];
    ... 
```

...然后是这样的：

```
sed 's/digraph G {/digraph G { \n rankdir=LR;/' 
```

......会做的工作。

我过去采用的另一种方法是将虚拟节点插入边缘以减少具有相同等级的节点数量（因此将绘制在同一行（使用`rankdir=TB`，这是默认值）或列（使用`rankdir=LR`). 这在`.dot`手动编写文件时很简单，但很难编写脚本。

如果您想编写脚本在某些边中插入额外的节点以将通常处于相同等级的节点分散到多个等级中，您可以通过运行`dot -Tplain`以输出纯文本文件* 来执行此操作，其中包括（除其他外）节点列表每个节点中心的 X 和 Y 坐标。然后，您可以使用`gawk`读取该列表，找到具有相同 X 坐标 (if `rankdir=TB`) 或 Y坐标 (if ) 的任何大型节点组，`rankdir=LR`然后处理原始`.dot`文件以在之前插入一个额外的空白节点（例如）该组中的一半节点，以便该组分布在两个等级而不是一个等级上。不过，我自己没有机会这样做。

*参见 Emden Gansner、Eleftherios Koutsofios 和 Stephen North (2006) 带点的[绘图](http://www.graphviz.org/Documentation/dotguide.pdf)，附录 B。

编辑：如何自动插入额外的节点。

给定一个`.dot`文件`test1.dot`如下：

```
digraph G {
    n1 -> n20 
    n1 -> n21 
    n1 -> n22 
    n20 -> n3 
    n21 -> n3 
    n22 -> n3
} 
```

...这会产生所示的图表。

![在此处输入图像描述](../Images/6c17bae132653852e2c648b86506809e.png)

...运行`dot -Tplain test1.dot >test1.plain`给出文件`test1.plain`：

```
graph 1 2.75 2.5
node n1 1.375 2.25 0.75 0.5 n1 solid ellipse black lightgrey
node n20 0.375 1.25 0.75 0.5 n20 solid ellipse black lightgrey
node n21 1.375 1.25 0.75 0.5 n21 solid ellipse black lightgrey
node n22 2.375 1.25 0.75 0.5 n22 solid ellipse black lightgrey
node n3 1.375 0.25 0.75 0.5 n3 solid ellipse black lightgrey
edge n1 n20 4 1.1726 2.0394 1.0313 1.9019 0.83995 1.7159 0.68013 1.5605 solid black
edge n1 n21 4 1.375 1.9958 1.375 1.8886 1.375 1.7599 1.375 1.6405 solid black
edge n1 n22 4 1.5774 2.0394 1.7187 1.9019 1.9101 1.7159 2.0699 1.5605 solid black
edge n20 n3 4 0.57736 1.0394 0.71875 0.90191 0.91005 0.71592 1.0699 0.56054 solid black
edge n21 n3 4 1.375 0.99579 1.375 0.88865 1.375 0.7599 1.375 0.64045 solid black
edge n22 n3 4 2.1726 1.0394 2.0313 0.90191 1.8399 0.71592 1.6801 0.56054 solid black
stop 
```

因此，我们现在可以一起处理这两个文件。我将为此使用 Python，因为在 Python 中比在 Awk 中更容易做到这一点。为了这个示例，我将等级中的节点数限制为 2，并且我使用了默认从下到上排序定义的等级，而不是我的从左到右排序上面已经建议了。我不确切知道`.dot`正在输出哪种文件`clang`，因此可能需要稍微修改此示例以考虑到这一点。

```
import sys,re;

plain = open(sys.argv[2])
nodesInRank = {}
for line in plain:
    x = line.split()
    rankloc = 3   # rank is in the y column for the vertical case. 
                  # Change this to rankloc = 2 for the horizontal case
    if len(x) > 0 and x[0] == "node":
        nodesInRank[x[rankloc]] = nodesInRank.get(x[rankloc],[]) + [x[1]]

maxNodesInRank = 2
dummies = set()
for n in nodesInRank.values():
    if len(n) > maxNodesInRank:
        dummies = dummies | set(n[:len(n)//2])

dot = open(sys.argv[1])
for line in dot:
    line = line.rstrip()
    line2 = ""
    for d in dummies:
        m = "-> +%s" % (d)
        if re.search(m,line):
            line = re.sub(m,"-> dummy_%s [dir = none]\n dummy_%s -> %s" % (d,d,d),line)
            line2 = '\tdummy_%s [shape=none, width=0, height=0, label=""];' % (d)
    print (line)
    if len(line2) > 0:
        print (line2) 
```

鉴于此 Python 脚本（我已调用`breakrank.py`），我现在可以将其运行为：

```
python breakrank.py test1.dot test1.plain >test_dummy.dot 
```

...其中包含以下内容`test_dummy.dot`：

```
digraph G {
    n1 -> dummy_n20 [dir = none]
 dummy_n20 -> n20
    dummy_n20 [shape=none, width=0, height=0, label=""];
    n1 -> n21
    n1 -> n22
    n20 -> n3
    n21 -> n3
    n22 -> n3
} 
```

如果我们运行它`dot`，我们现在得到：

![在此处输入图像描述](../Images/6b0ce3d2bf15cefd8edf9e1447982f77.png)

...我想，这给了我们想要的东西。

# ffmpeg - 为什么 frame->pts 增加 20，而不是增加 1？

> ID：15458741
> 
> 赞同：7
> 
> 时间：2013-03-17T08:05:04.800
> 
> 标签：ffmpeg, video-processing, video-encoding

按照ffmpeg的例子：decode_encoding.c和filtering_video.c，我处理了一个iPhone拍摄的视频文件。视频文件：.mov，视频尺寸；480x272，视频编解码器：H.264/AVC，每秒 30 帧，比特率：605 kbps。

我首先提取每一帧，也就是YUV。我将 YUV 转换为 RGB24，并处理 RGB24，然后将 RGB24 写入 .ppm 文件。它显示 .ppm 文件是正确的。

然后我计划将处理后的 RGB24 帧编码为视频文件。由于MPEG不支持RGB24图片格式，所以我使用了AV_CODEC_ID_HUFFYUV。但输出视频文件（显示 18.5 MB）无法播放。Ubuntu 上的电影播放器​​声称一个错误：无法确定流的类型。我也在VCL上试过。它根本不起作用，没有任何错误信息。

我的第二个问题是：对于从输入视频文件中提取的每个帧，我根据filtering_video.c得到它的pts如下：

> `frame->pts = av_frame_get_best_effort_timestamp(frame);`

我打印出每一帧的 pts，发现它增加了 20，如下所示：

```
pFrameRGB_count: 0,  frame->pts: 0
pFrameRGB_count: 1,  frame->pts: 20
pFrameRGB_count: 2,  frame->pts: 40
pFrameRGB_count: 3,  frame->pts: 60 
```

其中 frame 是从输入视频中提取的帧，pFrameRGB_count 是 RGB24 格式的已处理帧的计数。

为什么他们错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-17T08:27:34.763

H.264 视频使用 a`90 kHz clock`进行编码`timestamps`。由于您的视频是`30 fps`，因此 2 个连续帧之间的 PTS 增量应该`3000`是`20`.

值 20 表示以下一项或两项：

*   对于给定的 30 fps 帧速率，您的编码时钟（即采样率）配置不正确（至 600 Hz）

*   您的每秒帧数配置不正确（至 4500fps）。

计算 PTS delta 的一般公式为：

```
PTS delta = (1/fps) * Encoder sampling rate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:20:53.527

我调试以获取输入视频文件的编解码器上下文，dec_ctx->time_base.den = 1200; 我知道 fps，30，通过右键单击输入视频文件来检查它的属性（Ubuntu 12.04）所以看起来帧持续时间应该是 1200/30 = 40 个基本单位。但是使用 frame->pts = av_frame_get_best_effort_timestamp(frame); 是 20

输入视频的读取数据包的持续时间 = 20。

我发现 dec_ctx->ticks_per_frame = 2。我猜 ticks_per_frame 是 40 到 20。也许有一些内部公式，比如：基本单位中的帧持续时间 = 帧持续时间 x ticks_per_frame（但它似乎与 ffmpeg 中所说的不同文档，例如 time_base 等于 1/帧速率。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T19:30:21.890

我想我找到了答案。由于缺乏 ffmpeg 的详细文档，可能会误导用户。我发现，要获得正确的分数，应该始终使用：video_st->time_base NOT video_st->codec->time_base

(a) 一帧的绝对时间：

数据包->dts * (1/video_st->time_base.den)

(b) 帧与其下一帧之间的绝对时间：

frame->repeat_pict * (1/video_st->time_base.den)

# wpf - 仅当绑定等于某个值时才运行触发器

> ID：15458743
> 
> 赞同：0
> 
> 时间：2013-03-17T08:05:27.693
> 
> 标签：wpf, binding, visibility, datatrigger

我想运行 a ，仅当为某个值时才`trigger`使可见性变为**可见，在另一种情况下，可见性为****Hidden**。`binding`

 **这是我的网格：

```
 <Grid>
        <Grid.Style>
            <Style>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding MyProp}" Value="10">
                        <Setter Property="Visibility" Value="Visible"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Grid.Style>
     </Grid> 
```

在任何其他情况下，我该怎么做，可见性将被**隐藏**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:09:59.410

将默认值设置为隐藏，然后在您的样式中。By`default value`将永远是`hidden`并且只有在值为 10 时才会变为可见 -

```
 <Grid>
    <Grid.Style>
        <Style>
            <Setter Property="Visibility" Value="Hidden"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding MyProp}" Value="10">
                    <Setter Property="Visibility" Value="Visible"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Grid.Style>
 </Grid> 
```**

# python - 烧瓶 jinja2.exceptions.TemplateSyntaxError

> ID：15458747
> 
> 赞同：6
> 
> 时间：2013-03-17T08:05:40.443
> 
> 标签：python, flask, jinja2

我正在尝试在 Flask 中呈现模板，但出现以下错误：

```
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1685, in wsgi_app
    with self.request_context(environ):
  File "/Library/Python/2.7/site-packages/flask/ctx.py", line 274, in __enter__
    self.push()
  File "/Library/Python/2.7/site-packages/flask/ctx.py", line 221, in push
    top.pop()
  File "/Library/Python/2.7/site-packages/flask/ctx.py", line 257, in pop
    self.app.do_teardown_request(exc)
  File "/Library/Python/2.7/site-packages/flask/app.py", line 1587, in do_teardown_request
    rv = func(exc) 
```

不知道这意味着什么，但看起来这是一个框架问题。有谁知道我可以做些什么来解决/解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T11:31:11.283

我认为线索在于它抛出的异常......可能是模板中的语法错误。我会尝试取出所有标签`{{ }}`并将`{% %}`它们一一添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-13T22:35:37.260

我有这个错误，结果是由 % 和 } 之间的错位空格引起的

％ } 代替 ％}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-13T09:21:00.867

检查所有右花括号。

可能 a`%`缺少关闭`%}`分隔符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-13T05:57:39.123

我遇到过同样的问题。只需确保完全正确`{% is used with %}`，例如：

```
{% block something %}

or

 ... "{{ url_for(...,x=...) }}" 
```

留一些空间让清晰可见

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-26T19:35:51.110

我有同样的问题，它是由链接标签引起的：

链接 rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css')}}">

它应该在哪里：

href="{{ url_for('static', filename='style.css')}}"

{{ url_for(...) }}

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-04-26T12:30:38.040

从 { % endfor % } 到 {% endfor %} 更正了代码。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-01T06:45:47.733

只需更改您的文件名（例如）保存它现在也将其更改为渲染模板功能`home.html`。`xhome.html`

```
render template("home.html") #initial line
render template("xhome.html") #changed line 
```

# c# - 当用户是数据库时，asp.net 在数据库中存储分数的总和

> ID：15458749
> 
> 赞同：0
> 
> 时间：2013-03-17T08:06:02.380
> 
> 标签：c#, asp.net, mysql

我在我的 aspx 页面中得到了以下 sql 查询来更新我在 phpmyadmin 中的数据库。我的软件是visual web developer 2010。

```
 cmd = connection.CreateCommand();
            cmd.CommandText = "UPDATE (userscore) SET score = @score WHERE username = @username";
            cmd.Parameters.AddWithValue("@username", username);
            cmd.Parameters.AddWithValue("@score", userscore);
            var numRowsAffected = cmd.ExecuteNonQuery();
            if (numRowsAffected == 0)
            {
                cmd.CommandText = "INSERT INTO userscore (username, score)VALUES(@username,   @score)";
                cmd.ExecuteNonQuery();
            } 
```

当特定的用户名不在数据库中时，此查询会在数据库中添加一个用户名 plus is score。这就是我想要的。但是，例如，当用户名 admin 在数据库中的得分为 -1 时（在我的应用程序中，您可以投票 +1 或 -1）并且他又获得了 +1 的投票，我想存储这些值的总和（在这个case -1 plus +1 = 0)在数据库中作为新分数，并删除旧值，在本例中为-1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:10:09.917

我只需将您的“upsert”代码包装到存储过程中，并传递用户 ID 和分数增量/减量。

您当前的代码不会更新分数，而只是用您传入的任何内容覆盖它

```
create proc SetUserScore
@UserName nvarchar(100),
@ScoreChange int
AS
BEGIN
    IF EXISTS(SELECT 1 FROM userscore WHERE username = @UserName)
    BEGIN
      UPDATE userscore 
      SET score = score + @ScoreChange
      WHERE username = @UserName
    END
    ELSE
    BEGIN
      INSERT INTO userscore (username, score)VALUES(@username,   @score)
    END

END 
```

# c++ - 如何更改 Netbeans 7 配置特定的 makefile 宏

> ID：15458753
> 
> 赞同：1
> 
> 时间：2013-03-17T08:06:13.900
> 
> 标签：c++, ubuntu, macros, makefile, netbeans-7

如何在 Ubuntu 12.10 上的 Netbeans 7 中更改 C++ 项目配置特定的 makefile 宏？在 IDE 中打开的项目属性中没有选项。

```
CND_DISTDIR
CND_BUILDDIR
CND_CONF
CND_PLATFORM 
```

32/64 位配置是否有特定的项目配置命名约定？例如 `Debug`对于 32 位和`Debug64`64 位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T01:41:35.327

我今天也为此苦苦挣扎。我所能找到的只是文件 Makefile-Debug.mk、Makefile-Release.mk 和 Makefile-variables.mk 是由 Netbeans 每次保存时生成的。

您应该在项目 Makefile 中进行更改。我最终做的是扭转局面并使用生成的变量/宏。首先将“include ./nbproject/Makefile-variables.mk”放在您自己的 makefile 的顶部。然后[查看其他问题和答案](https://stackoverflow.com/a/7119460)，了解查看所有可用宏的方法。您可以将该 make 命令放在您要使用变量/宏的 makefile 中的某个位置。您可以使用 make 代替 gmake，也不必将输出放入文本文件中。

随波逐流，不要抗拒。

# asp.net - 如果应用程序正在使用 IE10 从 Visual Web Developer Express 2010 运行，则禁用消息

> ID：15458756
> 
> 赞同：1
> 
> 时间：2013-03-17T08:06:28.183
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2010, internet-explorer, asp.net-mvc-2

ASP .NET 3.5 MVC2 应用程序通过按 F5 从 Visual Web Developer Express 2010 运行

所有页面都从 localhost 提供。

默认浏览器是 Internet Explorer 10。单击应用程序消息中的某些链接后

> *将脚本调试器附加到机器“DELL2”上处理“[9376] iexplore.exe”失败。已附加调试器。*

出现在 Web Developer 中。单击确定并单击 Web 应用程序中的某些链接后，此消息一次又一次地出现。

如何禁用此消息？

如果使用 Windows 更新将浏览器升级到 Internet Explorer 10，则会开始出现此消息。

如果浏览器是 Internet Explorer 9，则永远不会出现此消息。

操作系统是 Windows 7 x64。

**更新**

我应用了来自答案的更改并关闭了 Web Developer 和 IE 10：我添加了 INTERACTIVE 用户并选中了允许，如下图所示。具有允许权限的系统用户已存在。问题依然存在。答案引用的链接仅适用于 Windows 2000，但我有 Windows 7。

如何解决这个问题？

![dcomconfig](../Images/ea03885221e40860ee96f3d86419d3d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:11:25.033

启动命令提示符（以管理员身份运行）并运行以下命令：

regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll

问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T09:08:31.680

你可以试试这个
打开`dcomcnfg`，去组件服务的属性页| 电脑 | 我的电脑，转到默认 COM 安全页面，在“访问权限”下单击“编辑默认值”并确保本地 SYSTEM 和 INTERACTIVE 用户具有“访问权限”并选中“允许”复选框。这是一个已知问题，如此[处所述](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q274696)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-23T17:27:48.247

为了补充丹尼斯的回答，希望它能帮助其他尝试过它的人（以及互联网上发布的类似解决方案）无济于事：

在某些情况下，您必须采取额外的步骤（我还没有在任何地方看到过，包括[这里](https://stackoverflow.com/questions/13421797/vs2010-and-ie10-attaching-the-script-debugger-to-process-iexplore-exe-failed)）。在运行“regsvr32.exe [...]”命令注册msdb2.dll之前，必须先**注销**DLL，否则注册无效。

换句话说，您必须从管理命令提示符运行以下两个命令（而不仅仅是第二个命令）才能消除错误消息：

```
regsvr32.exe /u "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll"

regsvr32.exe "%ProgramFiles(x86)%\Common Files\Microsoft Shared\VS7Debug\msdbg2.dll" 
```

这是唯一对我有用的解决方案（使用 VS2010 Ultimate + 64 位 Windows 7 Professional）。

# delphi - delphi中保存应用程序设置的方法

> ID：15458759
> 
> 赞同：2
> 
> 时间：2013-03-17T08:06:54.930
> 
> 标签：delphi

我需要保存我的网格设置，如列位置和大小、表单位置和大小，以及其他设置，这样当用户重新打开表单时，他们会看到相同的布局。

现在我将此设置保存在一个字符串中。像这样的东西

“STOCK_FORM:GRID1:COL1->20;STOCK_FORM:GRID1:COL2->50;”

但这不容易阅读和设置。有没有更好的办法？我应该使用xml吗？xml性能如何？

我很想听听其他人通常如何做到这一点。

提前致谢。很抱歉我的英语不好。

问候， 雷纳尔迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:00:36.183

您可以将设置写入 Ini 文件。

[这](http://delphi.about.com/od/objectpascalide/a/tinifile.htm)是一个例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-30T06:45:58.500

```
Try This :
   public
     Public declarations }

    constructor Create(AOwner: TComponent); override; // (1)
    procedure BeforeDestruction; override;  // (2) }

   procedure TForm1.BeforeDestruction;
begin
  inherited;
  with TFileStream.Create(PreservePath + ClassName + '.sav',    fmCreate) do
  try
    WriteComponent(Self);
  finally
    Free;
  end; 

   constructor TForm1.Create(AOwner: TComponent);
begin  
  PreservePath := ExtractFilePath(Application.ExeName) + 
    'Preserve';
  if not DirectoryExists(PreservePath) then
    CreateDir(PreservePath);
  PreservePath := PreservePath + '\';
  if FileExists(PreservePath + ClassName + '.sav') then
  begin
    CreateNew(AOwner, 0);
    with TFileStream.Create(PreservePath + ClassName + '.sav',
                            fmOpenRead or fmShareDenyWrite) do
    try
      ReadComponent(Self);
    finally
      Free;
    end;
  end
  else
  inherited Create(AOwner);
end; 
```

# asp.net - tinymce 进入 jqgrid

> ID：15458762
> 
> 赞同：0
> 
> 时间：2013-03-17T08:07:12.710
> 
> 标签：asp.net, asp.net-mvc-3, jqgrid, tinymce, jqgrid-asp.net

我使用 ASP.Net MVC 4。如何将 tinymce 插入 jqgrid？当我添加一条新记录时，我想显示 TinyMCE 编辑器；什么“所见即所得”编辑器与 jqgrid 更兼容？

问候里卡多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T20:07:33.130

您真正需要的只是 jqgrid 能够在您需要使用 TinyMCE 编辑的 textarea 或 div 上设置您自己的自定义类或 ID。并且 tinyMCE 的初始化代码也设置为与本示例中相同的类名： [http ://www.tinymce.com/tryit/basic.php](http://www.tinymce.com/tryit/basic.php)

在该配置中，tinyMCE 设置为加载所有文本区域，但您可以将其更改为任何 CSS 选择器，例如“.myClassName”或“#myTextarea”。

# assembly - Easy68k 汇编 ORG 指令

> ID：15458764
> 
> 赞同：1
> 
> 时间：2013-03-17T08:07:26.200
> 
> 标签：assembly, easy68k

我知道有人问过类似的问题，但还是听听吧。

这个学期我写了很多 Easy68k 程序，我很好奇为什么 org 指令总是设置为 1000 美元、2000 美元或 2500 美元。

虽然答案是“按照个人惯例”，但我对理解以下内容更感兴趣：

*   设置 org 指令有什么好处，CPU 可以执行从 0x0 到 0xffffffff 的任何内容，那么需要将程序开始一直偏移到 0x1000 吗？

例如：

```
 org $1000
start:
    moveq #9, d0
    trap  #15

    end start 
```

有效，但偏移了 4096 字节

```
start:
    moveq #9, d0
    trap  #15

    end start 
```

也有效，但根本没有抵消

那么为什么需要这个指令呢？我没有为任何特定目的保留 [0x0, 0x1000)，那么保持这个偏移量有什么意义呢？

到目前为止的结论

*   Easy68k 没有全局变量的默认位置，它们被放置在 pc 中（通常按照惯例放在程序的末尾）。
*   Easy68k 的默认堆栈指针在 0，向下增长到 0xffffffe，向下（它是字对齐的）：这意味着与 [0, 0x1000) 区域没有冲突。事实上，它会在破坏 [0, 0x1000) 区域之前破坏代码。

我真的很好奇。

提前谢谢！

〜德米特里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-07T11:54:47.560

地址 0 到大约地址 $800 是为 68000 中的异常向量保留的。$1000 用作默认起始地址以避开保留区域。堆栈默认位于内存的顶部，并向地址 0 增长。

# php - 简单的PHP注册脚本

> ID：15458768
> 
> 赞同：0
> 
> 时间：2013-03-17T08:07:34.687
> 
> 标签：php, registration

我想要一个非常基本的脚本，它执行以下操作：

在我主页上的“index.php”上，我有一个基本的注册表单，其中包含姓名/电子邮件/电话

```
// index.php

<form action='register/index.php' method='post'>
    <input name='name' type='text'>
</form> 
```

但在我的 register/index.php 页面上，我有一个更扩展的注册页面。如果有人从主页注册，我希望它将他们引导到注册页面，并将他们已经输入的详细信息自动填充到 rego 详细信息中。然后他们可以点击“提交”以从注册页面完成注册（将转到 process.php...）。

```
// register/index.php

<?
    $name=$_POST['name'];
    echo $name;
?> 
```

然而，这甚至没有做任何事情？如何使用 PHP 将变量从一个页面传递到另一个页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:55:44.507

好的。你确定你要去`yoursite.com/register/index.php`吗？因为该代码应该可以工作。确保在之前的所有脚本中都使用冒号`/register/index.php`

```
echo "hello" //WRONG
echo "hello"; //RIGHT 
```

现在，放

```
error_reporting(E_ALL); 
```

在脚本的最顶部（就在`<?php`发起者之后），看看你是否可以从中解决问题。

您想知道如何在三个或更多页面之间传递变量吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:15:40.020

你没有错过那个表格上的“提交”按钮吗？

尝试添加这个：

```
<input type="submit" value="Submit Form"/> 
```

在你的表格里面。

# applescript - 有一种简单的方法可以在 AppleScript 中随机播放列表吗？

> ID：15458773
> 
> 赞同：1
> 
> 时间：2013-03-17T08:08:10.910
> 
> 标签：applescript

有一种简单的方法可以在 AppleScript 中随机播放列表吗？

我做了几次搜索并画了一个空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T17:55:54.147

Fisher-Yates 算法的较短版本：

```
on shuffle(l)
    set i to count of l
    repeat while i ≥ 2
        set j to random number from 1 to i
        tell l to set {item i, item j} to {item j, item i}
        set i to i - 1
    end repeat
    l
end shuffle

set l to {}
repeat 1000 times
    set end of l to random number from 1 to 1000
end repeat
shuffle(l) 
```

There are i * ... * 2 = i! possible sequences of random numbers. All of them correspond to exactly one permutation out of the i! permutations of the list.

A faster version that uses a script object:

```
on shuffle(input)
    script s
        property l : input
    end script
    set i to count of l of s
    repeat while i ≥ 2
        set j to random number from 1 to i
        set {item i of l of s, item j of l of s} to {item j of l of s, item i of l of s}
        set i to i - 1
    end repeat
    l of s
end shuffle 
```

The scripts took about:

*   0.15 and 0.06 seconds for 1000 elements
*   12 and 0.5 seconds for 10000 elements
*   976 seconds and 4 seconds for 100000 elements

So the first script had exponential time complexity. The scripts posted by regulus were slightly slower.

When I saved the first script as scpt and added 10000 elements to the list, I ran into a [limit for the number of items that can be saved in a compiled script](https://discussions.apple.com/thread/1897143?start=0&tstart=0).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T09:18:54.037

我想我已经破解了。封装在一个功能中以便于使用。

```
set myList to {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}

set answer to listShuffle(myList)

on listShuffle(theList)

set listLength to count of theList

repeat while listLength > 1

    set r to random number from 1 to listLength

    set item1 to item listLength of theList
    set item2 to item r of theList

    set item listLength of theList to item2
    set item r of theList to item1

    set listLength to listLength - 1

end repeat

return theList

end listShuffle 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:14:20.023

这是一个替代方案。我们不是“洗牌”列表，而是随机从列表中抓取项目并将它们插入到新列表中......

```
set myList to {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
set randomizedList to randomizeList(myList)

on randomizeList(theList)
    set listCount to count of theList

    set newList to {}
    repeat listCount times
        set subListCount to count of theList
        set r to random number from 1 to subListCount
        set end of newList to item r of theList

        -- remove the random item from theList
        if subListCount is 1 then
            exit repeat
        else if r = 1 then --> first item
            set theList to items 2 thru end of theList
        else if r = subListCount then --> last item
            set theList to items 1 thru -2 of theList
        else
            set theList to items 1 thru (r - 1) of theList & items (r + 1) thru -1 of theList
        end if
    end repeat

    return newList
end randomizeList 
```

***编辑***：如果您想加快大型列表上的操作，您可以使用脚本对象。当列表很大时，您通常会看到很大的速度增益。因此，您可以使用脚本对象以这种方式编写代码...

```
set myList to {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}
set answer to listShuffle(myList)

on listShuffle(theList)
    script s
        property l : missing value
    end script
    set s's l to theList

    set listLength to count of s's l

    repeat while listLength > 1
        set r to random number from 1 to listLength

        set item1 to item listLength of s's l
        set item2 to item r of s's l

        set item listLength of s's l to item2
        set item r of s's l to item1

        set listLength to listLength - 1
    end repeat

    return s's l
end listShuffle 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T10:54:53.373

如果您的新列表中的项目不必是唯一的，那么您可以使用非常有效的

```
set selectedItemVar to some item of list someItemListVar 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-06T03:23:35.350

I'll just throw in my solution. I'm personally only working with very short lists (about 200 items), from which I need to extract unique, random sublists of various lengths. Applying this algorithm to a list in its entirety (i.e. passing in `count of mainList` for `maxCount`) will result in a shuffled version of the original list. This isn't built for speed, but may be more accessible to those who aren't strong in algorithms.

```
on randomizedSublist(mainList, maxCount)
   set sublist to {} as list
   repeat with x from 1 to maxCount
      set oneItem to some item of mainList
      repeat until sublist does not contain oneItem
          set oneItem to some item of mainList
      end repeat
      set end of sublist to oneItem
   end repeat
   return sublist
end randomizedSublist 
```

# javascript - 为什么 2..toString() 有效？

> ID：15458774
> 
> 赞同：8
> 
> 时间：2013-03-17T08:08:16.637
> 
> 标签：javascript

为什么`2..toString()`返回`2`但`2.toString()`抛出此错误？

例子：

```
console.log(2..toString()); // prints 2

// Firefox throws the error
// `SyntaxError: identifier starts immediately after numeric literal`
console.log(2.toString());

var x = 2;
console.log(x.toString()); // prints 2

// Firefox throws the error
//`TypeError: XML descendants internal method called on incompatible Number`
console.log(x..toString()); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T08:12:17.037

那是因为`2.`被解析为`2.0`，所以`2..toString()`等价于`2.0.toString()`，这是一个有效的表达式。

另一方面，`2.toString()`被解析为`2.0toString()`，这是一个语法错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T08:14:05.567

`2`只是一个数字，它没有任何方法可以调用。

`2.`可以被强制转换成一个字符串，它是一个对象（即`'2.0'`），因此可以拥有该方法。

Just`2.toString()`将被解析为`2.0tostring()`，这当然没有意义。

看看两者是如何解析的：

![在此处输入图像描述](../Images/6ef3860db567089380e427775ba3645f.png)

对比

![在此处输入图像描述](../Images/12d689578c93bcd4a412ecc60ccd3976.png)

顺便说一下，生成这些的工具在这里：http: [//jsparse.meteor.com/](http://jsparse.meteor.com/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-17T08:18:48.690

```
2.toString() 
```

口译员看到`2`并想，“哦，一个数字！” 然后，它看到点并想：“哦，一个十进制数！” 然后，它转到下一个字符并看到 a `t`，它会感到困惑。“`2.t`不是一个有效的十进制数，”它说，因为它会引发语法错误。

* * *

```
2..toString() 
```

口译员看到`2`并想，“哦，一个数字！” 然后，它看到点并想：“哦，一个十进制数！” 然后，它看到另一个点并想，“哦，我猜那是我们的数字的结尾。现在，我们正在查看这个对象的属性（数字 2.0）。” 然后，它调用对象的`toString`方法`2.0`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-17T08:15:46.907

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toString)

由于 Number 对象覆盖了 Object 对象的 toString 方法，因此您首先必须明确使用括号来表明它是一个数字，而不是一个对象。

我的猜测是`2.`隐式将其定义为浮点数，然后可以使用`.toString()`Number 对象的方法，而不是 Object 对象的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-17T08:15:07.917

`2..toString()`将被解释为`2.0.toString()`。

实际上，`2.`是一个数字：`console.log(typeof 2.);`将给出：数字

# javascript - 使用表单值初始化谷歌地图

> ID：15458778
> 
> 赞同：0
> 
> 时间：2013-03-17T08:08:56.460
> 
> 标签：javascript, forms, google-maps, button, google-maps-api-3

我必须从表单值重新初始化谷歌地图。但是我无法在单击按钮时获得表单的值（名为 dynamic_display）。任何人都可以给出一些想法如何做到这一点。地图代码为：

```
 <script>
        function initialize(a,b,zoom){
 if (!a || !b ||!zoom){ 
//alert('not done '+ "lat="+a+" lang= " +b+" zoom= "+zoom); 
       var centerLoc=new google.maps.LatLng( 53.61701054652337,53.37824736488983);
       zoom=16;
}
else
{
//alert('done' + "lat="+a+" lang= " +b+" zoom= "+zoom);  
var centerLoc=new google.maps.LatLng(a,b);
}
       var mapProp = {
           center:centerLoc,
           zoom:zoom,
           //mapTypeId:google.maps.MapTypeId.ROADMAP
           mapTypeId:google.maps.MapTypeId.SATELLITE
       };  
       var map=new google.maps.Map(document.getElementById("googleMap") ,mapProp);
           marker=new google.maps.Marker({
                  position:centerLoc,
                  title:'Click to zoom'
           });
  google.maps.event.addListener(marker,'click',function() {
                map.setZoom(map.getZoom()+1);
                map.setCenter(marker.getPosition());
       });
      marker.setMap(map);   
        }
         google.maps.event.addDomListener(window, 'load', initialize);
    </script> 
```

形式：

```
 <html>
    <body onload="initialize(30,70,5)">
        <form method="GET"  >

                Enter latitude:     <input type ="text" name="lat" id="lat" / ><br/>

                Enter longitude:    <input type ="text" name="lang"  id="lang"/ ><br/>

                Enter Zoom level:   <input type ="text" name="zoom"  id="zoom"/ ><br/>

                                    <input type="button" value ="dynamic_ display" onclick=" initialize(
                                    document.getElementById('lat').value,

                                    document.getElementById('lang').value,

                                    document.getElementById('zoom').value)"/>
                                    <input type="button" onclick=" initialize(32,72,6)" value="Manual_display"/>

                </form>

                                <center><div id="googleMap"  style="width:1000px;height:500px;"></div></center> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:59:55.707

1.  有错别字，`<srcipt>`
2.  对我来说，这些值可以在函数内部访问。由于您没有发布功能代码，我认为这是一个类型错误。至少`zoom`应为**Number**类型，但输入值始终为**String**类型。在使用之前使用[**Number**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)将其转换为 Number。

# jquery - 检查 DataTable 中的所有复选框，包括隐藏行

> ID：15458783
> 
> 赞同：7
> 
> 时间：2013-03-17T08:09:45.167
> 
> 标签：jquery, datatable, webforms

我正在尝试创建一个函数来检查 DataTable 中的所有复选框，包括隐藏的行。这是“复选框”列的 html 代码：

```
<div class="usersTable" id="userTable">
    <table cellpadding="0" cellspacing="0" id="customersList" >
        <thead>
            <tr>
                <th><input type="checkbox" name="selectall" id="selectall" class="selectall"/></th>
                <th width="200">val1</th>
                <th width="80px">val2</th>
                <th width="70px">val3</th>
                <th width="450">val4</th>
                <th width="60px">val5</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>
</div> 
```

提交按钮：

```
<input type='button' value='select all' id='selectallboxes' name='selectallboxes' /> 
```

以及不起作用的 JQuery 代码：

```
$(function () {         
    otable = $('#customersList').dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "aLengthMenu" : [ [10,20,50,100,1000], [10,20,50,100,1000] ],
        "iDisplayLength": 100,
        "bProcessing": true,
        "bServerSide": true,
        "aaSorting":[],         
        "iDisplayStart": 0,
        "sAjaxSource": "filename",
        ....

$("#selectallboxes").click ( function () {
        alert(dt.fnGetNodes().length + ' is total number')
        var selected = new Array();
        $('input', dt.fnGetNodes()).each( function() {
                $(this).attr('checked','checked');
                selected.push($(this).val());                       
        } );
         // convert to a string
        var mystring = selected.length;
        alert(mystring);
}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-17T09:29:03.717

尝试：

```
$("#selectallboxes").click(function () {
    var selected = new Array();
    $(otable.fnGetNodes()).find(':checkbox').each(function () {
        $this = $(this);
        $this.attr('checked', 'checked');
        selected.push($this.val());
    });
    // convert to a string
    var mystring = selected.join();
    alert(mystring);
}); 
```

`.length`给你数组的长度。我曾经`join()`将数组连接成一个字符串。DataTable`.fnGetNodes()`为您提供表中的所有行，包括隐藏行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:26:25.977

好的，这应该是您所追求的，这将找到所有当前 page`<tr>`并使用 dataTables _ AP​​I 循环浏览它们。您可以更改过滤器以满足您的需要，以根据需要选择不同的行，这都记录在数据表文档中。

```
$("#selectallboxes").click ( function () 
{
    var selected = new Array();

    // Use the _ function instead to filter the rows to the visible
    var data = oTable._('tr', {"filter":"applied"});

    $.each(data, function(key, index)
    {
        var input = $(this).find('input[type="checkbox"]');

        input.attr('checked', 'checked');

        selected.push(input.val());
    });

    // convert to a string
    var mystring = selected.length;

    alert(mystring);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:35:51.370

尝试类似的东西

```
$("#selectallboxes").click ( function () {
     var selected = [];
    $('input:checkbox', otable).each( function() {
        selected.push($(this).prop('checked', true).val());                       
    } );
    // convert to a string
    alert(selected.join());
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T06:48:36.530

fnGetNodes() 将只给出可见的行，由于分页 fnGetHiddenNodes() 有一个扩展来获取隐藏的行，但这将适用于 jquery 数据表版本 1.9，在 jquery 数据表 1.10 中有相同的更新但是这个不管用。您可以将从 ajax 请求收到的数据存储在一个数组中，然后根据复选框单击事件的条件重新绘制带有数据的表格和带有选定属性的输入（复选框）。

# android - 如何触发广播以读取按钮单击事件上的传入文本？

> ID：15458784
> 
> 赞同：0
> 
> 时间：2013-03-17T08:09:46.520
> 
> 标签：android, broadcastreceiver, text-to-speech, telephonymanager

在我的应用程序中，我注册了两个广播接收器，`android.provider.Telephony.SMS_RECEIVED`我希望其中一个始终在后台运行（解密），其中一个仅在单击按钮时才处于活动状态（驾驶模式）。

DrivingMode 广播接收器有一个`speakSMS()`导致它崩溃的问题。否则 BR 被触发就好了。

我在做一些根本错误的事情吗？

这是我的 LogCat：

![在此处输入图像描述](../Images/bfc691db061d79c2a34bbd43a330009d.png)

抱歉，我无法将其保存到 .TXT 文件中并在此处复制粘贴 :(

这是 DrivingMode.java ：

```
package com.example.callandmessagemanager;

import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;

public class DrivingMode extends Activity {
    private static TextToSpeech myTts;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.message_m);
        myTts = new TextToSpeech(this,ttsInitListener);

    }

private TextToSpeech.OnInitListener ttsInitListener=new TextToSpeech.OnInitListener() {

        @Override
        public void onInit(int version) {
            // myTts.speak(""+o, 0 ,null);

        }
    };
    public static void speakSMS(String sms)
    {
        myTts.speak(sms,0,null);

    }

} 
```

# wordpress - WordPress存档页面导航不起作用

> ID：15458786
> 
> 赞同：0
> 
> 时间：2013-03-17T08:09:59.203
> 
> 标签：wordpress, navigation, archive

不知道为什么，但我似乎无法在我的 wordpress 存档模板文件中获得页面导航。想知道是否有人可以在这里引导我朝着正确的方向前进...

这是代码：

```
<?php if (have_posts()) : ?>
    <div class="pageDescriptBracket">
        <img src="<?php bloginfo('template_url'); ?>/images/pdBracket.png">
    </div> <!-- pageDescriptBracket -->
    <h1>The Books</h1>
    <div class="pageDescriptSmall">
        An archive of the condominium's financial records
    </div> <!-- pageDescriptSmall -->

    <?php
      $the_query = new WP_Query( array( 
      'posts_per_page' => 1)); // how many posts to show

      while ( $the_query->have_posts() ) :
      $the_query->the_post(); ?>

      <div class="post" id="post-<?php the_ID(); ?>">
          <div class="entryBooks">
          <h2><?php the_title(); ?></h2>
              <?php the_content(); ?>
      </div>
      <div class="clear"></div>
      </div>
      <?php endwhile; ?>

      <div class="clear"></div>
<?php endif; ?>

      <div class="postnav">
          <div class="alignleft"><?php posts_nav_link('','','&laquo; Previous Entries') ?></div>
      <div class="alignright"><?php posts_nav_link('','Next Entries &raquo;','') ?></div>
      </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:35:16.127

与其对核心 WP 文件进行更改（当您更新到 WP 的下一版本时这些文件将丢失），为什么不直接使用[WP PageNavi](http://wordpress.org/extend/plugins/wp-pagenavi/)或[TW Pagination](http://wordpress.org/extend/plugins/tw-pagination/)之类的插件呢？

如果您使用的是 Wordpress SEO，请确保进入您的 wp-admin ... **SEO** >> **Titles and Metas** >> **Other**并确保未选中**禁用基于日期的存档。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:25:25.800

这不是 的推荐用法`posts_nav_link()`，它通常会同时显示上一个和下一个链接；第二个参数应该是上一个链接的文本，第三个参数应该是下一个链接的文本。

您正在做的事情看起来像文档在“Kubrick 主题格式”下特别警告的内容。

# javascript - 像 Jade 那样预编译 Handlebars 模板以使其正常工作的正确方法

> ID：15458788
> 
> 赞同：2
> 
> 时间：2013-03-17T08:10:00.030
> 
> 标签：javascript, node.js, handlebars.js

简而言之，我需要 - 以编程方式（不是 CLI）将车把模板预编译为浏览器端功能，并在浏览器`handlebars.runtime.js`中以这种方式使用它：

```
html = template_as_fn(data_object); 
```

为什么我需要它——我在 YA ComonJS 上工作到浏览器打包工具，我也想支持 Handlebars [。](https://github.com/Meettya/clinch)

因此，我正在寻找正确的方法来预编译 Handlebars 模板以使其发挥作用，而无需`eval()`其他巫术魔法。

[这个答案](https://stackoverflow.com/questions/14129149/manually-use-precompiled-handlebars-templates?rq=1)中的事情

```
var data = { name: "Greg" };
var source = "<p>Howdy, {{ name }}</p>";

eval("var templateFunction = " + Handlebars.precompile(source));
var template = Handlebars.template(templateFunction);

template(data);
=> "<p>Howdy, Greg</p>" 
```

让我伤心。

例如，使用 Jade，我可以通过这种方式使用[文件处理器](https://github.com/Meettya/clinch/blob/master/src/file_processor.coffee#L114)

```
'.jade'   : (data, filename, cb) ->
  content = Jade.compile data, _.assign jade_settings, {filename}
  cb null, "module.exports = #{content}" 
```

有没有可能用把手做类似 Jade 的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:53:39.100

哦，没关系！我找到了。

Handlebars 文件处理器

```
'.handlebars', (data, filename, cb) ->
  content = Handlebars.precompile data
  cb null, "module.exports = #{content}" 
```

在模块两步解决方法中：

```
renderData : (data) ->
  template_fn = require './template' # /template.handlebars
  template = Handlebars.template template_fn

  res = template data 
```

所以，从现在开始，[clinch](https://github.com/Meettya/clinch)将支持 Handlebars :)

# c# - Type.GetType 方法返回空值

> ID：15458789
> 
> 赞同：0
> 
> 时间：2013-03-17T08:10:05.620
> 
> 标签：c#, reflection

我在这个命名空间中有一个枚举：

```
Andish.CSS.CommonSilverLight.Enum.Billing.AccountTransacts.AccountTransactAccountType 
```

...并使用此方法将数据集转换为类：

```
public List<T> ConvertTo<T>(DataTable datatable) where T : new()
    {
        var temp = new List<T>();
        try
        {
            var columnsNames = (from DataColumn dataColumn in datatable.Columns select dataColumn.ColumnName).ToList();
            temp = datatable.AsEnumerable().ToList().ConvertAll<T>(row => GetObject<T>(row, columnsNames));
            return temp;
        }
        catch
        {
            return temp;
        }

    }

 private T GetObject<T>(DataRow row, List<string> columnsName) where T : new()
    {
        T obj = new T();
        try
        {
            string columnname = "";
            string value = "";
            PropertyInfo[] Properties = typeof(T).GetProperties();
            foreach (PropertyInfo objProperty in Properties)
            {
                columnname = columnsName.Find(name => name.ToLower() == objProperty.Name.ToLower());
                if (!string.IsNullOrEmpty(columnname))
                {
                    value = row[columnname].ToString();
                    if (!string.IsNullOrEmpty(value))
                    {
                        if (Nullable.GetUnderlyingType(objProperty.PropertyType) != null)
                        {
                            value = row[columnname].ToString().Replace("$", "").Replace(",", "");
                            objProperty.SetValue(obj, Convert.ChangeType(value,
                                Type.GetType(Nullable.GetUnderlyingType(objProperty.PropertyType).ToString())), null);
                        }
                        else
                        {
                            value = row[columnname].ToString().Replace("%", "");
                            objProperty.SetValue(obj, Convert.ChangeType(value,
                                Type.GetType(objProperty.PropertyType.ToString())), null);
                        }
                    }
                }
            }
            return obj;
        }
        catch
        {
            return obj;
        }
    } 
```

但是，当我调试代码并在数据集中有一个转换为枚举属性的 int 列时，这一行：

```
objProperty.SetValue(obj, Convert.ChangeType(value,
    Type.GetType(Nullable.GetUnderlyingType(objProperty.PropertyType).ToString())), null); 
```

...返回一个错误：

```
Value cannot be null.
Parameter name: conversionType 
```

....发现：

```
Nullable.GetUnderlyingType(objProperty.PropertyType).ToString()
==
"Andish.CSS.CommonSilverLight.Enum.Billing.AccountTransacts.AccountTransactAccountType"
Type.GetType(Nullable.GetUnderlyingType(objProperty.PropertyType).ToString())
==
null 
```

为什么`Type.GetType`没有得到我的枚举类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T08:25:24.517

直接用就`Nullable.GetUnderlyingType(objProperty.PropertyType)`行了。

先调用`ToString()`它，然后`Type.GetType(...)`在字符串输出上使用是没用的！

（当然，您在`else`块中犯了同样的错误；而不是`Type.GetType(objProperty.PropertyType.ToString())`，只需使用`objProperty.PropertyType`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T08:12:09.690

无视您的代码，状态[文档`Type.GetType`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)：

> # 参数
> 
> *类型名称*
> 
> **要获取的类型的程序集限定名称**。请参阅[AssemblyQualifiedName](http://msdn.microsoft.com/en-us/library/system.type.assemblyqualifiedname.aspx)。如果该类型在当前执行的程序集中或在 Mscorlib.dll 中，则提供由其命名空间限定的类型名称就足够了。
> 
> ...
> 
> # 返回值
> 
> ...
> 
> 具有指定名称的类型（**如果找到**）；否则为空。

强调我的。

推测该类型不在当前执行的程序集中，因此您需要使用该类型的程序集限定名称。`ToString()`尝试使用该`AssemblyQualifiedName`属性，而不是调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-17T11:45:51.067

我解决了这个问题，将我的代码更改为：

```
private T GetObject<T>(DataRow row, List<string> columnsName) where T : new()
    {
        T obj = new T();
        try
        {
            string columnname = "";

            PropertyInfo[] Properties = typeof(T).GetProperties();
            foreach (PropertyInfo objProperty in Properties)
            {
                columnname = columnsName.Find(name => name.ToLower() == objProperty.Name.ToLower());
                if (!string.IsNullOrEmpty(columnname))
                {
                    var value = row[columnname];

                    if (!string.IsNullOrEmpty(value.ToString()))
                    {

                        Type type;

                        type = Nullable.GetUnderlyingType(objProperty.PropertyType) ?? objProperty.PropertyType;

                        objProperty.SetValue(obj,
                                             type == value.GetType()
                                                 ? Convert.ChangeType(value, type)
                                                 : System.Enum.ToObject(type, value), null);
                    }
                }
            }
            return obj;
        }
        catch (Exception exception)
        {
            return obj;
        }
    } 
```

# java - 为新注册用户自动生成链接

> ID：15458793
> 
> 赞同：1
> 
> 时间：2013-03-17T08:10:23.357
> 
> 标签：java, web-services, email-verification

我想为新创建的自动生成链接

mywebapp 将发送到用户电子邮件的用户。什么时候

用户单击链接我应该将用户更新为

'活性'。

所以我有一些问题，我想了解是否

从我目前所读的内容来看，我的逻辑是正确的。

1.  用户填写表格并按回车

2.我的网络服务处理数据并创建一个帐户......

这就是我用一些独特的盐对输入的密码进行哈希处理并将其存储在数据库中的部分。

所以我会有一张像

```
user_ID   username         password                 active 

1           taniamm20     12346645556665566666       0 
```

例如，我可以在验证链接中使用这个散列密码吗

```
http://localhost:9092/localbusscat/services/localbusscat/UpdateDB?choID=12346645556665566666 
```

这是一个好习惯吗？

或者此时我不应该保存用户的密码，只保存 user_id 并使用 java.UUIID 为该用户生成长唯一密钥并将其保存在表中并使用此唯一密钥进行验证。

我认为我的 UpdateDBService 应该是这样的

```
public  String  UpdateDB(int choID ) throws ClassNotFoundException 
        {

            String strDelReturn = "UPDATE_FAIL";

            Class.forName("org.postgresql.Driver");
            try 
            {
                conn = DriverManager.getConnection("....");
            }

            catch (SQLException ex) 
            {

                ex.printStackTrace();
            }

            PreparedStatement pstmt = null;
            String selectQuery = "update user_table set active=active+1 WHERE password="+ choID ;

            try {

                pstmt = conn.prepareStatement(selectQuery);
                int rowss = pstmt.executeUpdate();
                if (rowss != 0) 
                    strDelReturn = "UPDATE_OK";

            } 
            catch (Exception ex) 
            {

            }
            return strDelReturn;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:21:48.800

我的建议是使用第二个表，称为`pending`.

它基本上是用户表的“扩展”，或主要数据的副本，具体取决于您的结构。

这张表最纯粹的形式如下所示：

```
UID (int), ActCode (Varchar[x]), ValidUntil (int) 
```

UID 和 ActCode 都是唯一的，这意味着每个 UID 一次只能发布一个 ActCode，并且每个 ActCode 只能关联一次。ValidUntil 包含`UNIX_TIMESTAMP() + x seconds`...的返回值，无论您希望有效期是什么。

这种结构表明，实际的用户表具有`id, userdata, activated`列。

如果该链接在 x 秒内未使用，则该链接将失效 ( `UNIX_TIMESTAMP() > ValidUntil`)，并且可能会生成一个新的激活链接，而旧的链接将被删除。

或者，您可以获取（与每个激活相关的请求）过期激活并删除与其关联的用户数据。

如果在该时间间隔内单击该链接，您将删除激活码并更新您的用户标志。

另一种选择是扩展用户表：

```
ActCode, ValidUntil, Userdata 
```

这样，您的 UserTable 就不会完全被选择，`UserData`只有当 ActCode 仍然有效时使用，您才会插入。这可以保护您的 AutoIncrement 免受未激活帐户的影响，并且您也不需要用户表中的`Activated`字段......因为一旦它在您的用户表中，它就会被激活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T14:02:33.180

激活与身份验证是分开的，它通常用于确保用户输入他们有权访问的有效电子邮件地址（或任何联系方式）。

您应该生成一个单独的唯一代码来激活用户并使用该代码而不是密码通过电子邮件发送链接。

现在我在这里可能错了，但您似乎认为散列密码可以通过电子邮件传输。这不是，在最好的情况下，你给攻击者一些蛮力的东西。

激活后，要求用户使用他们的凭据登录。

# javascript - Javascript 在远程调试模式下停止在没有断点的行

> ID：15458794
> 
> 赞同：0
> 
> 时间：2013-03-17T08:10:26.330
> 
> 标签：javascript, google-chrome, intellij-idea, remote-debugging

我在远程调试 Javascript 时使用 Intellij IDEA 12.0.4 + Chrome。我的调试会话到达了根本没有设置断点的地步。就我而言，这是我脚本的最后一行。Chrome 调试也是如此。由于这两个工具都有同样的问题，我认为脚本文件有问题。

有没有办法解决这个烦人的问题？

PS：版本控制系统是 Git。

附上图片：

[http://s12.postimage.org/n8sz1uyq5/Screen_Shot_2013_03_17_at_9_05_41_AM.png](http://s12.postimage.org/n8sz1uyq5/Screen_Shot_2013_03_17_at_9_05_41_AM.png) [http://s8.postimage.org/3lv46pnit/Screen_Shot_2013_03_17_at_9_06_51_AM.png](http://s8.postimage.org/3lv46pnit/Screen_Shot_2013_03_17_at_9_06_51_AM.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T12:44:29.083

原因是浏览器没有正确重新加载代码并且正在缓存所有内容。这是 Mac 用户的说明（对其他用户来说足够接近）。

首先在 Intellij IDEA 中，您应该通过转到 File --> Invalidate Caches 来使缓存无效

其次，在 Chrome 中，按 Cmd + alt + Backspace（您也可以转到设置 --> 历史记录 ---> 清理浏览数据）。检查清空缓存并单击清除浏览数据。

在 Firefox 中，通过进入伪装和隐私选项卡，单击清除您最近的历史记录。从“清除所有历史记录”中检查所有时间范围并检查缓存，然后单击立即清除按钮。

（您可以在这里了解所有浏览器的想法......）

停止调试服务器，然后重新启动它。现在应该可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:15:00.243

共享您的脚本以进行调试。最有可能的错误可能是，您可能错过了字符串连接。或“/”未正确关闭。请再次检查（代码中最后修改的函数/方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-04T22:32:31.537

不要在代码中使用制表符。我在 Chrome 72 上发现了这个问题。

# hudson - 如何将 Hudson 与 Sonar For C#（dotnet 项目）集成

> ID：15458801
> 
> 赞同：0
> 
> 时间：2013-03-17T08:12:22.383
> 
> 标签：hudson, integration, sonarqube

我在不使用 Maven 的情况下使用声纳在 Hudson 上工作。我成功配置了 Hudson 并且它可以工作，但我不知道如何在构建后将声纳与 hudson 集成，我需要运行代码分析。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T08:17:21.717

我强烈建议您安装[Sonar Hudson/Jenkins 插件](http://docs.codehaus.org/pages/viewpage.action?pageId=116359341)，该插件将允许您定义一个 Sonar Runner 构建步骤，您可以在该步骤上即时传递 Sonar 属性或传递“sonar-project.properties”的位置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T04:17:36.200

如果您通过 ant 构建代码，我将遵循本指南：[安装和配置 Sonar Ant 任务](http://docs.codehaus.org/display/SONAR/Installing+and+Configuring+Sonar+Ant+Task)，它将执行声纳并使用声纳插件部署到声纳服务器。声纳团队提供的[教程](http://www.sonarsource.org/a-new-hudson-plugin-for-a-closer-integration-with-sonar/)建议您创建一个小的 pom.xml 文件来执行声纳目标。

# ruby-on-rails - minitest 机架测试

> ID：15458802
> 
> 赞同：0
> 
> 时间：2013-03-17T08:12:28.377
> 
> 标签：ruby-on-rails, ruby, minitest, rails-api, rack-test

有没有人有任何一起使用 minitest 和 reacktest 来创建请求规范的例子？

我希望能够请求资源：

`get '/api/resource', format: :json`

然后测试响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:27:25.750

您可以按照您的建议简单地使用机架测试！编写您的规格/单元测试，并使用 rack-test 您可以：

```
def test_api_ressource_json
    get "/api/resource.json"

    assert last_response.ok?
    assert last_response.body.include?("something")

    # Test whatever you like with last_response.body
end 
```

应该就是这样。

# wordpress - 无法使用 wpdb 插入自定义表

> ID：15458803
> 
> 赞同：0
> 
> 时间：2013-03-17T08:12:45.143
> 
> 标签：wordpress

我为我的 WordPress 插件创建了一个自定义表，并将其命名为“recp_clients”。不确定这是否重要，但我没有使用“wp_”前缀。

在我处理一些表单数据的 php 文件中，而不是使用通过“mysql_connect”等连接的旧样式，我想使用 $wpdb 来插入帖子数据。

问题是它不起作用。

**编辑：** *不确定是否重要，但此代码位于一个 php 文件中，该文件位于我的主插件文件夹中的一个名为 include 的文件夹中。该文件是使用 ajax 从 .js 文件中调用的。不确定这是否与 $wpdb 不起作用的原因有关，但我想如果它很重要，我会添加此信息。*

这是我所拥有的：

```
$hisname=$_POST['hisname'];
$hername=$_POST['hername'];
$lastname=$_POST['lastname'];

global $wpdb

$wpdb->insert('recp_clients', array('client_hisname' => $hisname, 'client_hername' => $hername, 'client_lastname' => $lastname)); 
```

我也试过这个：

```
$hisname=$_POST['hisname'];
$hername=$_POST['hername'];
$lastname=$_POST['lastname'];

global $wpdb
$recp_clients_table = $wpdb->prefix . ‘recp_clients’;

$wpdb->insert($recp_clients_table, array('client_hisname' => $hisname, 'client_hername' => $hername, 'client_lastname' => $lastname)); 
```

很感谢任何形式的帮助。预先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:16:03.260

您缺少 WHERE 子句。除非您使用相同的数据更新所有行，否则您需要这个。如果不包括在内，WP 可能不会运行查询。

```
$wpdb->update(
  'recp_clients', 
  array(
    'client_hisname' => $hisname, 
    'client_hername' => $hername, 
    'client_lastname' => $lastname),
  array('id' => '54') // This is your WHERE clause
); 
```

# python - 我的脚本打开一个 windows cmd 提示符，需要帮助粘贴到它

> ID：15458804
> 
> 赞同：0
> 
> 时间：2013-03-17T08:12:45.817
> 
> 标签：python, windows, cmd, py2exe

我已经编写了一个 Python 程序并使用 py2exe 将其变成了一个 Windows 可执行程序。

当程序运行时，它会打开一个伪 cmd 窗口供用户交互。（仅使用打印和 raw_input）

通常，在 win cmd 提示符下，您可以右键单击任意位置并点击粘贴。

但是，在这个伪 cmd 窗口中你不能。您可以右键单击标题栏并转到编辑-> 粘贴，但这很痛苦，而且大多数用户都不知道。

我希望 ~ 能够添加此功能，和/或 ctrl-v 直接粘贴的能力。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:26:22.163

使用 msvcrt 模块（仅限 Windows），您可以按字符获取用户输入字符（不带“输入”，与 python 不同`raw_input`）

```
import msvcrt

def inputemulator():
    buf = []
    while True:
        ch = msvcrt.getch()
        if ch=="\r": #newline
            yield ''.join(buf)
            buf = [] 
        elif ch=="\x03": #ctrl-c
            raise KeyboardInterrupt
        elif ch=="\x16": #ctrl-v, do paste, ...
            pass
        else:
            buf.append(ch)

for line in inputemulator():
    print line 
```

# linux - 如何退出从 bash 脚本创建的 ssh 会话？

> ID：15458805
> 
> 赞同：6
> 
> 时间：2013-03-17T08:12:55.953
> 
> 标签：linux, bash, ssh

我有以下 bash 脚本`test.sh`

```
#!/bin/bash
ssh -o "StrictHostKeyChecking no" user@$1
#do some stuff
exit 
```

但是，如果我运行此脚本`./test.sh`，我需要输入**ctrl+d**才能退出 ssh 会话，并且该`exit`命令似乎没有按我的预期工作。

有什么方法可以退出从这个 bash 脚本创建的这个 ssh 会话？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-17T08:17:17.497

您可能想编写一个[此处的文档](http://www.tldp.org/LDP/abs/html/here-docs.html)

```
#!/bin/bash
ssh -o "StrictHostKeyChecking no" user@$1 << ENDHERE
   here do some remote stuff
   also here
   exit
ENDHERE 
```

如果您`<<-ENDHERE`对此处文档的每一行中的初始空格或制表符进行编码，则会被抑制。`$foo`除非您编码，否则参数（如）将被替换`<<\ENDHERE`，并且`ENDHERE`实际上可以是任何单词，通常大写。

阅读[Advanced Bash Scripting guide](http://www.tldp.org/LDP/abs/html/)（确实有一些缺陷）

# php - 两个 .htaccess 两个站点

> ID：15458807
> 
> 赞同：3
> 
> 时间：2013-03-17T08:13:07.717
> 
> 标签：php, wordpress, .htaccess, e-commerce

我有一个自定义电子商务网站，它有一个`.htaccess`文件。我现在正在使用 Wordpress 为其创建一个博客，并将其安装在一个名为`blog`.

一切都很好，直到我登录到 Wordpress 管理面板并将永久链接结构更改为`%postname%`. 在我更改它之后，登录页面和`.htaccess`是空的。

我需要某人的帮助来查看我的`.htacess`文件并进行更改以允许 Wordpress 永久链接结构并确保它不会与主站点冲突。如果我将 Wordpress`.htaccess`代码添加到底部的根目录`.htaccess`中，则博客工作正常，但主站点出现 404 错误。

根.htaccess：

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^Home index.php
RewriteRule ^CompanyProfile about.php
RewriteRule ^ContactUs contact.php
RewriteRule ^Shopping-Basket inq.php
RewriteRule ^My-Account myacc.php
RewriteRule ^SiteMap sitemap.php
RewriteRule ^Terms-Conditions terms.php
RewriteRule ^Privacy-Policy privacy.php
RewriteRule ^Delivery-Information delivery.php
RewriteRule ^Returns-Policy returns.php
RewriteRule ^Disclaimer disclaimer.php
RewriteRule ^Clients clients.php

RewriteRule ^Search-Results result.php
RewriteRule ^Do-Login dologin.php
RewriteRule ^Member-Login login.php
RewriteRule ^Logout logout.php
RewriteRule ^Delete/([a-zA-Z0-9_-]+)$ delp.php?id=$1
RewriteRule ^Shopping-Basket/([a-zA-Z0-9_-]+)$ inq.php?msg=$1
RewriteRule ^ForgetPassword/([a-zA-Z0-9_-]+)$ forget.php?msg=$1
RewriteRule ^ForgetPassword forget.php
RewriteRule ^Checkout checkout.php
RewriteRule ^OrderStatus status.php
RewriteRule ^ChangePassword changepassword.php
RewriteRule ^CreateAccount/([a-zA-Z0-9_-]+)$ create.php?msg=$1
RewriteRule ^CreateAccount create.php
RewriteRule ^ChangeAccount chgaccount.php
RewriteRule ^Shipping shipping.php
RewriteRule ^SaveLogin savelogin.php
RewriteRule ^SaveOrder saveorder.php

RewriteRule ^sections/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ cproducts.php?SID=$2&MID=$1
RewriteRule ^bproducts/([a-zA-Z0-9_-]+)$ products.php?MID=$1
RewriteRule ^productdetail/([a-zA-Z0-9_-]+)$ prod_detail.php?PID=$1
RewriteRule ^products/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ bproducts.php?SID=$2&MID=$1
RewriteRule ^Details/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ large.php?PID=$3&SID=$2&MID=$1

RewriteCond %{HTTP_HOST} !^www.mydomain.co.uk$ [NC]
RewriteRule ^(.*)$ http://www.mydomain.co.uk/$1 [L,R=301 
```

子目录/blog.htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /blog/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /blog/index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:17:15.050

```
<IfModule mod_rewrite.c> 
RewriteBase /blog/ 
RewriteRule ^index\.php$ - [L] 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule . /blog/index.php [L] 
</IfModule> 
```

# ios - 奇怪的！动画完成后函数一直在调用？

> ID：15458809
> 
> 赞同：2
> 
> 时间：2013-03-17T08:13:19.623
> 
> 标签：ios, animation

我目前在做动画时遇到了一个奇怪的问题：

```
 [UIView animateWithDuration:3
                          delay:0
                        options:UIViewAnimationOptionAllowUserInteraction
                     animations:^{lblBonus.alpha=0;}
                     completion:^(BOOL finished){
                        [lblBonus removeFromSuperview];
                        NSLog(@"finished");
                        [self updateNewRecord];
                        [self clearScreen];
                        [self btnStartPlaying];
                         [self.view.layer removeAllAnimations];
                     }]; 
```

在应用程序崩溃之前，所有函数都会一直调用，但如果所有函数都被删除，“NSLog”只会显示一次：

```
 [UIView animateWithDuration:3
                          delay:0
                        options:UIViewAnimationOptionAllowUserInteraction
                     animations:^{lblBonus.alpha=0;}
                     completion:^(BOOL finished){
                        NSLog(@"finished");
                     }]; 
```

有什么不对吗？？有人遇到过同样的问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:29:32.367

是的，最后我发现动画被计时器反复调用了..我整天坐在MACbook前一定是太累了，，，

# php - Aptana 3 Studio：我可以将 www Apache 文件夹作为工作空间吗？

> ID：15458810
> 
> 赞同：1
> 
> 时间：2013-03-17T08:13:26.053
> 
> 标签：php, eclipse, ide, aptana, aptana3

我是 PHP 世界的新手，现在我已经安装了 Apatana 3 Studio，我有一些关于这个开发环境中 PHP 配置的问题。

似乎我的配置运行良好，但我不知道它是否以智能方式配置......

我使用 Ubuntu 并安装了 Apache 2 Web 服务器

执行一个包含 phpinfo() 函数的简单 php 文件（位于我的 /var/www 文件夹中）：

```
<?php phpinfo(); ?> 
```

我获得了一些信息，似乎我已经在此路径下安装了 Apache 2 Web 服务器：/etc/php5/apache2 并且 php.ini 文件具有此路径：/etc/php5/apache2/php.ini

事实上，这是我获得的 phpinfo() 输出的一部分：

> 配置文件 (php.ini) 路径 /etc/php5/apache2 已加载
> 
> 配置文件 /etc/php5/apache2/php.ini

好的，所以我通过以下方式配置了我的 PHP 环境设置：

1) 我创建了一个新的 WorkSpace 以便它匹配文件夹 /var/www

2）我以这种方式设置了外部 Web 服务器：Windows ---> Preferences ---> Web Servers ---> New ---> External Web Server，并且我输入了以下值：

名称：阿帕奇

基本网址：[code]http://localhost[/code]

文档根目录：/etc/php5/apache2

这样做我可以在 /var/www 中创建一个新项目，如果我通过以下方式执行该项目的一些 PHP 文件： Runs as ---> Php Server 此文件在浏览器窗口中执行。

是正确的配置吗？我的问题取决于我还尝试在 /var/www 目录中创建一个新工作区，例如：/var/www/AptanaWS 但是如果我在这个工作区中创建一个新项目，如果我尝试执行一个项目文件我有一个错误，因为它尝试打开以下 URL：

[代码]http://localhost/Test/test.php[/code]

而不是正确的 URL：

[代码]http://localhost/AptanaWS/Test/test.php[/code]

那么，我可以把我的**/var/www**作为我的工作空间还是一件坏事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:10:39.947

你可以把它。实际上，我已经在 Windows 上安装了 Aptana。在 ubuntu 上，我没有使用 Aptana，但原理相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T10:54:00.550

只要您将新项目创建为 /var/www的**子文件夹，就可以了。**

创建子文件夹是为了允许在同一台服务器上预览多个项目。

如果您愿意，您可以将您的项目直接放在 Web 服务器的根目录中，但请注意，如果您删除该项目，并选择“删除磁盘上的文件”，它将**删除整个目录和所有内容**。

参考：[设置外部 Web 服务器以预览 PHP 和其他非 HTML 页面](https://wiki.appcelerator.org/display/guides2/Setting+up+an+external+web+server+to+preview+PHP+and+other+non-HTML+pages)

# google-chrome-extension - REST API 并在流星应用程序外登录

> ID：15458823
> 
> 赞同：1
> 
> 时间：2013-03-17T08:15:02.803
> 
> 标签：google-chrome-extension, meteor

我正在使用流星和使用流星帐户包创建应用程序，现在我想创建一个 chrome 扩展，它允许用户使用流星用户凭据（用户名、密码）登录并使用它的 REST API。

我有两个问题，使用流星创建 REST API 和组织用户在流星应用程序之外登录的常见经验是什么。

我注意到当用户登录到流星帐户时，浏览器将用户名和令牌保存在本地存储中，我认为，也许有一种方法可以使用 chrome 扩展和流星 REST API 进行类似的设计，如果有人有类似的经验，请告诉我.

提前致谢，

# cakephp - 无法更新 CakePHP 中的现有记录

> ID：15458826
> 
> 赞同：0
> 
> 时间：2013-03-17T08:15:09.333
> 
> 标签：cakephp, sql-update, cakephp-2.0, cakephp-model, editmodel

我编写了一个编辑函数来更新用户的信息，我的代码：

```
if($this->request->is('post')){
                $this->request->data['User']['password']=Security::hash($this->request->data['User']['password'],'sha1', Configure::read('Security.salt'));
                $this->request->data['User']['type'] = '2';
                $this->request->data['User']['username'] = $username;
                //debug($this->request->data);
                if($this->User->validates()){
                    $this->User->set($this->request->data['User']);
                    if ($this->User->save($this->request->data,false)) {
                        $this->Session->setFlash(__('The user has been saved'));
                        $this->redirect($this->root.'index');
                    } else {
                        $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
                    }
                }
            } 
```

但我检查了这个函数：$this->User->exists() 从不返回 true，在我的情况下，用户表键是用户名，当我编辑用户名时，这个函数可以将新信息保存为新记录，但是当我没有编辑用户名，无法保存新信息，为什么它会这样工作以及如何更正我的功能以编辑记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T10:56:11.583

## 调试你的代码

```
if($this->User->validates()){ 
```

在此之前，问题中的代码中没有完成以下任何操作：

*   打电话`create`
*   调用`set` *模型*

因此，这里发生的是代码尝试验证空模型对象。假设返回 false （正如问题所暗示的那样），保存“不起作用”的原因是代码根本*没有*调用`save`。

> 但我检查了这个函数： $this->User->exists() never return true

`create`预期的，因为没有调用`set`或设置`User->id`属性。

## 参考文档

显式调用很好，`validates`但也没有必要。`Save`已经调用验证 - 因此，如果您的代码有效，您将运行两次验证规则。

使用[书中](http://book.cakephp.org/2.0/en/models/saving-your-data.html)的这个例子作为参考：

```
public function edit($id) {
    if ($this->request->is('post')) {
        if ($this->Recipe->save($this->request->data)) {
            $this->Session->setFlash('Recipe Saved!');
            $this->redirect('/recipes');
        }
    }

    $this->set('recipe', $this->Recipe->findById($id));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:01:26.403

相信我，你**几乎总是**想`id`在你的桌子上放一个。添加它并使其成为主键。

现在它看起来像这样：

```
if($this->request->is('post')){

    // Think about using AuthComponent:
    // $this->request->data['User']['password'] = AuthComponent::password($this->request->data['User']['password']);
    $this->request->data['User']['password'] = Security::hash($this->request->data['User']['password'],'sha1', Configure::read('Security.salt'));
    $this->request->data['User']['type'] = '2';
    $this->request->data['User']['username'] = $username;
    $this->User->id = $id;

    // Checking if the user exists.
    if(!$this->User->exists()){
        // If not, tell it here.
    }

    if($this->User->validates()){
        if ($this->User->save($this->request->data, false)) {
            $this->Session->setFlash(__('The user has been saved'));
            $this->redirect($this->root.'index');
        } else {
            $this->Session->setFlash(__('The user could not be saved. Please, try again.'));
        }
    }else{
        // Something went wrong.
    }
} 
```

如果您的主键有用户名，那么每次不同时，CakePHP 都会创建一个新记录。

现在，我将`read`通过 AJAX 调用为您提供我的功能，也许它会对您有所帮助。

```
// Function for creating and updating users.
    public function update(){

        // If the request is AJAX (from Ext-JS).
        if($this->request->is('ajax')){

            // Prepare data for CakePHP. $this->request->data['ModelName'] => array of data.
            $this->request->data['User'] = $this->request->data;

            // If there is "id" in data, then it's "edit".
            // If there is no "id" in data, then it's "add".
            if($this->request->data['id'] != null){

                // Setting "id" for user so the CakePHP could use "save", "saveAll", "exits" or 
                // any other function for a particular user.
                $this->User->id = $this->request->data['id'];

                // Checking if the user exists.
                if (!$this->User->exists()) {

                    // If there is no user with a given "id", remove the data (security reasons).
                    // Put the "success" and "message" (message) properties.
                    $this->request->data = array();
                    $this->request->data['success'] = false;
                    $this->request->data['message'] = "No user with this id.";

                    // Return the message to Ext-JS.
                    return new CakeResponse(array('body' => json_encode($this->request->data)));
                }

                // List of fields to save.
                $fieldList = array('id', 'first_name', 'last_name', 'username', 'role_id', 'language_id', 'status', 'last_login', 'created', 'modified');

                // Only if there is an password provided by user, save it.
                if($this->request->data['User']['password'] != ''){
                    array_push($fieldList, 'password');
                }

                // If you are here, then there is a user with a given "id" and you are editing that user.
                if ($this->User->save($this->request->data, true, $fieldList)) {

                    // Remove any data except the "success" and "message" (message) properties (security reasons).
                    $this->request->data = array();
                    $this->request->data['success'] = true;
                    $this->request->data['message'] = "The user has been changed.";
                }else {

                    // If you are here, something went wrong with editing a user. Remove the data (security reasons).
                    // Put the "success" and "message" (message) properties.
                    $this->request->data = array();
                    $this->request->data['success'] = false;
                    $this->request->data['message'] = "Error with editing.";
                }
            }else{

                // If you are here, then you are adding a new user (because there is no "id" in data). Create a new row in table.
                $this->User->create();

                // Try to save the user with data from $this->request->data['User'].
                if ($this->User->save($this->request->data)) {

                    // If you are here, then everything is ok. Remove any data and tell that to Ext-JS with "success" and "message" (message) properties.
                    $this->request->data = array();
                    $this->request->data['success'] = true;
                    $this->request->data['message'] = "The user has been added.";
                }else{

                    // If you are here, something probably went wrong with $this->request->data['User'].
                    // Remove any data (security reasons) and tell that to Ext-JS with "success" and "message" (message) properties.
                    $this->request->data = array();
                    $this->request->data['success'] = false;
                    $this->request->data['message'] = "Something went wrong with adding a user.";
                }
            }

            // Return any data to Ext-JS, despite the success.
            // $this->request->data['success'] => (true | false).
            // $this->request->data['message'] => (message for Ext-JS).
            return new CakeResponse(array('body' => json_encode($this->request->data)));
        }
    } 
```

现在，`return new CakeResponse`您将`Session`消息发送给用户，而不是 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-18T07:54:20.897

尝试以下步骤

if ($this->User->save($this->request->data,false)) {

```
 $this->Session->setFlash(__('Recipe Saved!'));

        return $this->redirect(array('action' => 'view_users')); 
```

}

# security - 为什么 HTTP 协议被设计为 request-respose？它如何影响 Web 应用程序的安全性？

> ID：15458832
> 
> 赞同：0
> 
> 时间：2013-03-17T08:16:21.770
> 
> 标签：security, http, httpwebrequest, protocols, layer

我正在阅读有关 HTTP 协议 - 请求 - 响应及其工作原理的信息。有两件事我仍然不确定我是否理解并希望先得到一些解释，为什么 HTTP 协议被设计为请求-响应？它有什么好处？还是有其他选择？第二个是该协议如何影响 Web 应用程序的安全性？我知道 https 更安全，因为它使用加密......但这是否意味着 http 根本不安全？（即使我使用的是 POST 而不是 GET 等。）

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:41:52.163

据我所知，HTTP 主要用于获取和读取文档。它不是远距离交互的最佳协议，但最好告诉 HTTP 服务器您想要拥有哪个文档并接收它。这就是互联网的起源——任何人都应该可以访问的大量文档。开发始于 1989 年在 CERN，共享科学和大学文件是首要任务。

您从 HTTPS 中获得的唯一好处是您的请求和响应都是加密的。这意味着，除了客户端和服务器之外，没有人应该能够知道两者的通信内容。但由于我目前正在开发一个 HTTP 客户端，因此我看不到 POST 与 GET 相比的任何安全优势（当然，某些客户端脚本（javascript）可能无法访问请求内容）。

总而言之，我认为对于一般网站来说，HTTP 并不是最好的协议，但它支持广泛的功能是很好的——因为使用 HTTP，您可以实现静态文档以及最复杂和动态的网站。

/编辑

我不认为 HTTP 是不安全的。那么，在什么情况下它应该是不安全的？某些软件只能知道使用哪些参数请求了哪个资源，但这对您来说是否是个问题：任何其他协议（加密协议除外）都面临同样的问题。

此外，随着 HTTP 1.1 标准于 1999 年发布，他们最终正在开发一个名为 HTTP 2.0 的新版本，该版本（根据 2012 年 11 月的 RFC）几乎是 Google 的 SPDY（发音为 speedy）协议的副本，比HTTP 1.1。

不幸的是，我找不到谷歌推出的演示页面，但新协议更快，尤其是在加载许多小资源（如图标）时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T06:55:53.473

如果您想开发一个安全的 Web 应用程序，那么您应该关心许多问题。它与 HTTP 1.x 和 2.x 相关。请在下面找到您的应用程序中应携带的安全问题示例： [https ://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

# ios - 从服务器加载图像时 UITableView 滚动冻结

> ID：15458838
> 
> 赞同：1
> 
> 时间：2013-03-17T08:17:27.903
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用此代码使用自定义单元格在 UITableView 中加载我的图像

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    for (id currentObject in topLevelObjects) {
        if ([currentObject isKindOfClass:[CustomCell class]]) {
            cell = (CustomCell *) currentObject;
            break;
        }
    }

    NSString *tempString = [arrayThumbs objectAtIndex:indexPath.row];
    NSURL *imageURL = [NSURL URLWithString:tempString];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    UIImage *image = [UIImage imageWithData:imageData];
    cell.img.image = image;

}

return cell;
} 
```

使用上面的代码，上下滚动时没有问题，但是图像显示不正确，表格中重复了一些图像，例如如果数组包含从 1 到 10 的 10 个图像并且数组是正确的按顺序，我在表格中得到的图像类似于 1 、 2 、 3 、 4 、 3 、 3 、 1 、 10 、 8 、 9

但是当我使用这段代码时

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"CustomCell";

CustomCell *cell = (CustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {

    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil];
    for (id currentObject in topLevelObjects) {
        if ([currentObject isKindOfClass:[CustomCell class]]) {
            cell = (CustomCell *) currentObject;
            break;
        }
    }

}

NSString *tempString = [arrayThumbs objectAtIndex:indexPath.row];
    NSURL *imageURL = [NSURL URLWithString:tempString];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    UIImage *image = [UIImage imageWithData:imageData];
    cell.img.image = image;

return cell;
} 
```

图像排序良好，没有重复，但是当我滚动到表格底部然后滚动回顶部表格冻结 2 或 3 秒

知道如何解决这个问题吗？

该数组包含图像的链接，例如**[http://www.website.com/image.jpg](http://www.website.com/image.jpg)**

自定义单元格包含 IBOutlet UIImageView 60x60 并且从服务器加载的图像也是 60x60

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T08:25:18.760

尝试以下代码在线程中下载图像。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSString *tempString = [arrayThumbs objectAtIndex:indexPath.row];
    NSURL *imageURL = [NSURL URLWithString:tempString];
    NSData *imageData = [NSData dataWithContentsOfURL:imageURL];
    UIImage *image = [UIImage imageWithData:imageData];
    dispatch_async(dispatch_get_main_queue(), ^{
      cell.img.image = image;
    });
}); 
```

# ios - 来自 UIWebView 的 PDF 分页

> ID：15458839
> 
> 赞同：0
> 
> 时间：2013-03-17T08:17:47.940
> 
> 标签：ios, xcode, pdf, uiwebview, paging

我正在使用这个类从 UIWebView 生成 PDF 文件

```
-(void)createPDFfromUI:(UIView *)aView saveToDocumentsWithFileName:(NSString*)aFilename
{
    // Creates a mutable data object for updating with binary data, like a byte array
    NSMutableData *pdfData = [NSMutableData data];

    // Points the pdf converter to the mutable data object and to the UIView to be converted
    UIGraphicsBeginPDFContextToData(pdfData, aView.bounds, nil);
    UIGraphicsBeginPDFPage();

    CGContextRef pdfContext = UIGraphicsGetCurrentContext();

    // draws rect to the view and thus this is captured by UIGraphicsBeginPDFContextToData

    [aView.layer renderInContext:pdfContext];

    // remove PDF rendering context
    UIGraphicsEndPDFContext();

    // Retrieves the document directories from the iOS device
    NSArray* documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES);

    NSString* documentDirectory = [documentDirectories objectAtIndex:0];
    NSString* documentDirectoryFilename = [documentDirectory stringByAppendingPathComponent:aFilename];

    // instructs the mutable data object to write its context to a file on disk
    [pdfData writeToFile:documentDirectoryFilename atomically:YES];
} 
```

我唯一的问题是它只是在一页中生成PDF文件，我只是想知道是否可以将它分成多页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:42:50.083

是的，您可以在 PDF 中包含多页，但为此您必须每次手动使用

```
 UIGraphicsBeginPDFPage 
```

我们的想法是根据您要生成的页面数在 for LOOP 中执行此部分。

请[通过这篇文章](https://stackoverflow.com/questions/2743812/errors-on-creating-a-multipage-pdf)

# php - 下拉列表中的模型属性未传输

> ID：15458840
> 
> 赞同：0
> 
> 时间：2013-03-17T08:17:49.230
> 
> 标签：php, forms, drop-down-menu, model, yii

我有一个`resume`表（除其他外）有一`position_type_id`列是`position_type`表的外键。

在`resume`创建表单上，下拉列表的选项`position type`从表中正确拉出`position_type`，并将它们的 id 设置为选择的值。一切似乎进展顺利。

提交表单后，我可以验证这些值是否返回到 POST 变量中的控制器，但是它们没有通过属性填充传递到模型中：

`$model->attributes=$_POST['Resume'];`

这是`create`控制器上的方法：

```
public function actionCreate()
{
    $model=new Resume;

    if(isset($_POST['Resume']))
    {
        $model->attributes=$_POST['Resume'];

        if($model->save())
        {
            $this->redirect(array('view','id'=>$model->id));
        }   
    }

    $this->render('create',array(
        'model'=>$model,
    ));
} 
```

这是从相关模型加载键的表单：

```
echo $form->activeDropDownList(
    $model,
    'position_type_id',
    CHtml::listData(PositionType::model()->findAll(),'id','name')
); 
```

`position_type_id`是 resume 模型上的键，它携带 PositionType 模型的外键。它在表格和简历模型上的拼写相同。模型上的关系为：`'positionType' => array(self::BELONGS_TO, 'PositionType', 'position_type_id'),`

我想我可以从 POST 数组中获取每个值并手动设置它们，但看起来这应该“正常工作”。设置属性后的值`$model`用于手动输入的字段，而对于来自生成的下拉列表的所有字段，则为空白。

以下是实际生成的内容：

```
<select name="Resume[position_type_id]" id="Resume_position_type_id">
    <option value="1">English Teacher</option>
    <option value="2">School Administrator</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T16:21:18.070

我可能是错的，但对我来说，大规模的任务不起作用。在 yii 中，如果我们需要对其执行大量赋值，则需要将属性声明为安全的。

因此，在您的模型`Resume`中，您是否有以下规则：

```
public function rules() {
    return array(
        //the other rules ...
        array('position_type_id, others_attributes', 'safe'),
        //the rule above indicate the attributes that can be massively assigned
    );
} 
```

[关于“安全”验证规则的 wiki 链接](http://www.yiiframework.com/wiki/161/understanding-safe-validation-rules/)

# ruby-on-rails - 如何在日志中隐藏视图的呈现？

> ID：15458848
> 
> 赞同：1
> 
> 时间：2013-03-17T08:19:20.667
> 
> 标签：ruby-on-rails, ruby

我想在开发模式下隐藏正在渲染的名称。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T08:33:37.013

您将从以下位置取消订阅您的`Logger`实例`ActiveSupport::Notifications`：

```
ActiveSupport::Notifications.unsubscribe(log) 
```

希望能帮助到你。

# data-structures - 用于比较和插入的最有效数据结构

> ID：15458856
> 
> 赞同：0
> 
> 时间：2013-03-17T08:21:08.217
> 
> 标签：data-structures

所以这是我面临的情况：我有称为节点的可迭代对象。（大约数千个）每个节点包含许多键和值对。我的算法创建了一个新节点（称为myNode）并检查可迭代集中的每个节点，以及可迭代集中的每个节点：对于节点中的每个对（键，值）：如果myNode包含对的键：如果myNode 对应的值更大：替换为新值。否则：myNode.put（键，值）

目前，我为此使用 HashMap，它非常慢，在用 ArrayList 替换 HashMap 后，我实际上得到了更好的结果，这很奇怪。有人可以建议使用更好的数据结构来提高我的程序的性能吗？

谢谢 ！

EDI：代码

```
 ArrayList<Long> newDist = new ArrayList<Long>();

        HashMap<Long, Long> myNode = new HashMap<Long, Long>();

        for (Node i : nodes){//copy neighbors to set
            Set<Long> view = i.keySet();
            for (Long j : view) {
                if (!(myNode.containsKey(j))) {
                    myNode.put(j, i.get(j));
                } else if (myNode.get(j) > i.get(j)) {
                    myNode.put(j, i.get(j));
                }
            }
        }

        context.write(key, myNode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:06:20.583

我不确定你的代码意图是什么，因为它引用了一些你没有包含的对象，但如果`Node`是，`Map`那么我会做类似的事情......

```
Map<Long, Long> lowScores = new HashMap<Long, Long>();

for (Node node : nodes){
  for (Entry<Long,Long> entry : node.entrySet()) {
    Long lowScore = lowScores.get(entry.getKey());
    if (lowScore == null || lowScore > entry.getValue()){
      lowScores.put(entry.getKey(), entry.getValue()); 
    }
  }
} 
```

这里有一些优化限制了对大型数据结构执行的操作量，但我只运行会证明这是在优化编译器尚未为您优化的东西。关键优化是迭代 的`Entry`对象，`Map`而不是一直调用`get`and `containsKey`。

# php - 显示一些数据库结果，然后在点击时显示全部 - 建议

> ID：15458857
> 
> 赞同：0
> 
> 时间：2013-03-17T08:21:14.237
> 
> 标签：php, jquery, mysql

我在一个页面上有一个关于项目的评论部分，但是对于某些项目的很多评论，这可能会变得很长。

我想要做的是只显示前 x 个结果，然后单击链接，例如查看全部，我可以为项目显示所有结果（不是所有项目）。

目前我使用这样的东西：

```
$result350 = mysql_query("SELECT * FROM messages where id=$id order by dateadded asc",$db);

echo '<div id="wallWall$id">';

    while($db88 = mysql_fetch_array($result350)){

        echo '<div class="msgs_row">
            <div class="msgs_pic">
                <img src="'.$db88[live_prof_pic].'">
            </div>
            <div class="msgs_comment">'
                .stripslashes($db88[comment]).
            '</div></div>';

    } 

    echo '</div>'; 
```

所以，我可以将while循环更改为类似

```
for ($i = 1; $i <= 4; $i++) {
    echo ...
} 
```

所以我只显示前 4 个，但我将如何修改显示以显示全部？

我应该将前 4 个加载到一个 div 中，其余的加载到另一个隐藏的 div 中，然后只需`$('#hiddenResults').show();`单击查看所有链接，还是有更好更有效的方法来做到这一点？

页面上可能有多达 30 个项目，其下有评论。

不确定要为此使用哪些标签，因此将与几个一起运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:34:33.047

我建议在第一个仅获取 5 条评论的查询中使用 LIMIT。

```
$result350 = mysql_query("SELECT * FROM messages where id=$id order by dateadded asc LIMIT 5",$db); 
```

单击链接以加载所有评论时，您可以对获取所有评论的服务器进行 Ajax 调用（这次不要在查询中使用 LIMIT 或保持较高，比如 50）。然后您可以使用 javascript 或 jquery 显示在 ajax 响应中收到的所有评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:44:35.687

如果您有很多额外的注释要加载，Ajax 解决方案非常好。如果它不是真的那么多（比如 30 - 50），最好按照您提到的方式将它们与原始页面一起发送到哪里，但在隐藏的 div 中。

# javascript - 为什么缩小或混淆的 JavaScript 比未压缩的代码执行得更差？

> ID：15458859
> 
> 赞同：20
> 
> 时间：2013-03-17T08:21:26.313
> 
> 标签：javascript, performance, obfuscation, minify

我遇到了这份使用各种压缩器和混淆器压缩的 JavaScript 代码的[性能报告。](http://jsperf.com/testing-code-performance-by-compression-type)令人惊讶的是，除了 Closure 高级模式之外，在大多数情况下，所有其他压缩器输出的代码都比未压缩的代码执行得更差。我们如何解释呢？

向下滚动到[页面](http://jsperf.com/testing-code-performance-by-compression-type)末尾以查看报告。以下是截图：

![在此处输入图像描述](../Images/03f27cea348ec74f4b985bd89938ace8.png) ![在此处输入图像描述](../Images/ddd95d73f4f52825d11c327749c21f3b.png) ![在此处输入图像描述](../Images/ad9502853e5268df203957fea45114a6.png) ![在此处输入图像描述](../Images/5f71ced401f93c535cf2cb12303b4774.png)

**传奇：**

*   蓝色 - YUI 压缩机
*   红色 - 关闭（高级模式）
*   橙色 - 关闭（基本模式）
*   绿色 - JS Min
*   紫色 - JS Packer
*   浅蓝色 - UglifyJS
*   粉红色 - 未压缩代码

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-17T10:34:03.743

首先让我扮演魔鬼的拥护者：代码实际上并没有“执行”任何事情（我的意思是没什么严重的，除了 JS Packer）。它本质上是函数、对象和属性的定义。

JS Packer 不生成 JavaScript 代码，而是生成必须在运行时解压缩的压缩文本。这就是为什么它要慢得多。使用高级优化的 Google Closure 会尽可能替换标识符。所以在解析脚本时已经有了性能优势。

也就是说，有可能牺牲代码大小的性能。一个例子是将`true`and`false`替换为`!0`and `!1`。不过，这取决于 JavaScript 引擎。它可以在第一次调用之前、之后、之后、在一些调用之后由引擎优化，从不......谁知道;）

**新发现**

与此同时，我做了一些分析，并意识到我忘记了一件事：垃圾收集。这种影响足以解释脚本和浏览器之间的一些差异（不同的引擎！）。

将其与代码并没有做太多事情的事实相结合，并且您有一些东西。在一项测试中，未压缩的垃圾收集 CPU 时间约为 3%，JSMin 的垃圾收集时间约为 9%（！）。这意味着几乎相同的代码的结果完全不同。

**甚至更新的发现**

当您首先运行 JSMin 时，它比未压缩的要快。我尝试了几次，总是得到相同的结果。这证实了之前的发现。我现在非常有信心，我们找到了解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-12T21:07:15.863

看来您可能无意中将缩小与混淆混淆了。

为了理解这两种技术，我将分别解释它们。

缩小是减少源文件大小的过程，并将其制成旨在提高机器可读性的格式。这是通过 (a) 删除注释和不必要的空格，并可能 (b) 用简单的增量变量名替换变量名来完成的，这些变量名通常以一个字符开头。生成的代码的功能仍然与原始代码相同，但理论上浏览器解析和编译速度更快。

混淆是一种修改代码以使其不再被识别为原始源代码的技术，通常用于阻止专有代码的逆向工程。某些更改可能会对它们产生开销，例如代码可能会在运行时被加密然后再次解密。也就是说，代码混淆器通常也会通过缩小输出来完成工作。

人们可以认为缩小是一种粗略的混淆形式，但通常执行此类过程更多是出于性能和/或带宽目的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-17T10:22:23.843

是的，混淆可能会导致一些性能问题，但缩小代码的性能不如未压缩的代码是不正确的。事实上，压缩后的代码比未压缩的代码执行得更好。这是因为，minfied 代码具有更短的变量/函数名称，因此对分配的内存空间的引用调用更容易！

# ruby - 为什么 `ObjectSpace._id2ref` 在 Ruby 1.9 和 Ruby 2.0 上给出不同的输出？

> ID：15458861
> 
> 赞同：0
> 
> 时间：2013-03-17T08:21:33.140
> 
> 标签：ruby, ruby-1.9.3, ruby-2.0

为什么`ObjectSpace._id2ref`在 Ruby 1.9 和 Ruby 2.0 上给出不同的输出？

**红宝石 1.9.3p392 i386-mingw32**

```
class Foo ; end

Foo.object_id                     #=> 17569464
ObjectSpace._id2ref(17569464)     #=> Foo

Foo.new.singleton_class.object_id #=> 17075124
ObjectSpace._id2ref(17075124)     #=> "\x00" 
```

**红宝石 2.0.0p0 i386-mingw32**

```
class Foo ; end

Foo.object_id                     #=> 17197176
ObjectSpace._id2ref(17197176)     #=> Foo

Foo.new.singleton_class.object_id #=> 19181436
ObjectSpace._id2ref(19181436)     #=> RangeError: 0x124af7c is recycled object

Foo.new.singleton_class.object_id #=> 17454324
ObjectSpace._id2ref(17454324)     #=> RangeError: 0x10a54f4 is not id value

Foo.new.singleton_class.object_id #=> 17139816
ObjectSpace._id2ref(17139816)     #=> "c" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:24:40.703

只是因为在`2.0`垃圾收集器中比较灵巧。

```
# RangeError: 0x124af7c is recycled object 
```

对象的状态*已经被 GC'ed*。

**UPD：**我们可以通过以下方式处理请求的行为[`Mutex`](http://ruby-doc.org/core-2.0/Mutex.html)：

```
2.0.0 (main):0 > Mutex.new.synchronize {
2.0.0 (main):0 *   class Foo ; end
2.0.0 (main):0 *   id = Foo.new.singleton_class.object_id
2.0.0 (main):0 *   puts id
2.0.0 (main):0 *   puts ObjectSpace._id2ref(id)
2.0.0 (main):0 * }  
# 23172260
# <Class:#<Foo:0x00000002c32970>> 
```

# matlab - 在 Matlab 中访问函数值

> ID：15458867
> 
> 赞同：0
> 
> 时间：2013-03-17T08:22:00.053
> 
> 标签：matlab

我想编写一个返回四个不同变量的函数。我写了一个`smfunctionof.m`带标题的文件

```
function [a,b,c,d]=smfunctionof(x) 
```

其中 x 是一个大小为 20 的向量并且在身体下方我有类似的东西

```
a=x.^2;
b=x.^4;
c=x.^10;
d=x.^12; 
```

现在，在代码脚本中，我想访问这些变量。当我输入 时`smfunctionof(x)`，我会收到一个答案（如果我没记错的话，它会返回`a=x.^2`）。但是当我继续编写类似`a;`or even的代码时`sqrt(a)`，它不会返回它。如何使函数中的变量可用，或者确切地说，如何在主脚本的函数中使用变量？我已经在论点中包含了这些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:25:43.460

当你想`smfunctionof`在你的代码中使用它时，你把它称为`[a,b,c,d] = smfunctionof(x);`. 这样，一个值将通过 分配给`a`变量`d`。请注意，您不仅限于使用`a`through `d`，`[u,vv,www,xxxx] = smfunctionof(x);`也可以正常工作（尽管`x.^2`现在已分配给名为 的变量`u`）。实际上，使用更明确的变量名称会更好地提高代码的可读性。

# java - Java - 关于 JOptionPane 的问题

> ID：15458870
> 
> 赞同：0
> 
> 时间：2013-03-17T08:22:34.320
> 
> 标签：java, swing, joptionpane

```
this.addWindowListener(new WindowAdapter()
        {
            @Override
            public void windowClosing(WindowEvent e)
            {
                int par1 = JOptionPane.showConfirmDialog(null, "Are you sure you want to exit", "Exit?", JOptionPane.YES_NO_OPTION);
                if(par1==JOptionPane.YES_OPTION)
                {
                    System.exit(0);
                }
            }
        }); 
```

这是我的代码。如何在 JOptionPane requestFocus 中设置“否”按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:29:05.067

使用[JOptionPane.showOptionDialog](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html#showOptionDialog%28java.awt.Component,%20java.lang.Object,%20java.lang.String,%20int,%20int,%20javax.swing.Icon,%20java.lang.Object%5b%5d,%20java.lang.Object%29)并设置`options`和`initialValue`参数。

```
public static int showOptionDialog(Component parentComponent,
                                   Object message,
                                   String title,
                                   int optionType,
                                   int messageType,
                                   Icon icon,
                                   Object[] options,
                                   Object initialValue)
                            throws HeadlessException 
```

试试这个：

```
Object[] options = { "YES", "NO" };
int par1 = JOptionPane.showOptionDialog(null, "Are you sure you want to exit", "Exit?",
    JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE,
    null, options, options[1]);
if(par1==0)
{
     System.exit(0);
} 
```

更多[JOptionPane](http://docs.oracle.com/javase/6/docs/api/javax/swing/JOptionPane.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:24:38.030

使用此构造函数：

```
JOptionPane(Object message, int messageType, int optionType,
        Icon icon, Object[] options, Object initialValue) 
```

`options`代表所有可用`initialValue`的按钮，是默认选择的按钮。

# android - 谷歌地图代码被强制关闭

> ID：15458871
> 
> 赞同：0
> 
> 时间：2013-03-17T08:22:46.507
> 
> 标签：android, google-maps

以下源代码没有被执行......我正在学习如何处理谷歌地图..请帮助

这是我的源代码::

```
package com.example.maptest;

import android.os.Bundle;
import android.location.*;
import android.content.Context;
import android.view.Menu;
import com.google.android.maps.*;

public class MainActivity extends MapActivity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Context context = getApplicationContext();

    LocationManager locationManager =
            (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    Location location = null;

    double lat = location.getLatitude() * 100000;
    double longi = location.getLongitude() * 100000;

    LocationProvider provider =
            locationManager.getProvider(LocationManager.NETWORK_PROVIDER);

}

@Override
public boolean onCreateOptionsMenu(Menu menu)
{
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

这是 XML 文件

```
 <com.google.android.maps.MapView
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
             android:apiKey="0GH71P-8YZB_XmnfIDs_-NOCtdlku2nwKABE61Q"
             />

<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="32dp"
    android:ems="10"
    android:inputType="textPersonName" >

    <requestFocus />
</EditText>

</RelativeLayout> 
```

我的 AndroidManifest 是::

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.maptest"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.maptest.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <uses-library android:name="com.google.android.maps" />
</application> 
```

我真的很困惑为什么它没有开始......请帮助

```
03-17 08:34:05.215: W/dalvikvm(2380): threadid=1: thread exiting with uncaught exception (group=0x40a71930) 
03-17 08:34:05.235: E/AndroidRuntime(2380): FATAL EXCEPTION: main 
03-17 08:34:05.235: E/AndroidRuntime(2380): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.maptest/com.example.maptest.MainActivity}: java.lang.ClassNotFoundException: Didn't find class "com.example.maptest.MainActivity" on path: /data/app/com.example.maptest-2.apk 
03-17 08:34:05.235: E/AndroidRuntime(2380): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:210) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:43:12.130

```
Location location = null;

double lat = location.getLatitude() * 100000;
double longi = location.getLongitude() * 100000; 
```

您在空引用上调用方法，难怪您的应用程序崩溃。您应该以某种方式初始化`location`变量，例如调用`LocationManager.getLastKnownLocation()`. 希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:24:22.763

您没有初始化位置。所以我猜你得到了 NPE

```
Location location = getGPSLocation(this);
if(location != null) {
   double lat = location.getLatitude() * 100000;
   double longi = location.getLongitude() * 100000;
} 
```

编辑：

```
private Location getGPSLocation(Context context) {
    try {
        LocationManager lm = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        Criteria cr = new Criteria();
        cr.setCostAllowed(true);
        cr.setAccuracy(Criteria.NO_REQUIREMENT);
        cr.setPowerRequirement(Criteria.NO_REQUIREMENT);
        String provider = lm.getBestProvider(cr, true);
        if(provider == null)
            provider = lm.getBestProvider(cr, false);
        return lm.getLastKnownLocation(provider);
    }
    catch(Exception e) {
        Log.e("App", "Exception while fetch GPS at: " + e.getMessage());
    }
    return null;
} 
```

并添加此权限 AndroidManifest.xml

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

# jquery - 从后面的代码显示 jQuery 对话框

> ID：15458874
> 
> 赞同：1
> 
> 时间：2013-03-17T08:23:10.113
> 
> 标签：jquery, asp.net

我已经研究了好几天了！我只是想在后面的 VB 代码中获取一个事件来显示一个 jQuery 对话框（带有合适的消息）。

我的（非常简单的）HTML：

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="ButtonMustWork.aspx.vb" Inherits="NowDisplayPictures.ButtonMustWork" %>

<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>jQuery UI Dialog - Default functionality</title>
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>

    function GetDialogBox() {
        $("#dialog").dialog();
    }
</script>
</head>
<body>
    <form id="form1" runat="server">
    <div id="dialog" title="Basic dialog">
            <p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
    </div>
    <div>
        <asp:Button ID="Button1" runat="server" Text="Button" />   
    </div>
    </form>
</body>
</html> 
```

和我的VB按钮点击事件：

```
Private Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
ClientScript.RegisterStartupScript(Me.[GetType](), "Test", "<script>GetDialog();</script>")
End Sub 
```

我得到的只是一个空白页，上面有文字，还有一个按钮。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:30:33.673

您的函数名称是`GetDialogBox();`，但您在代码中调用`GetDialog();`。

# javascript - 检查字符串是否为html

> ID：15458876
> 
> 赞同：130
> 
> 时间：2013-03-17T08:23:53.150
> 
> 标签：javascript, regex

我有一个特定的字符串，我想检查它是否是 html。我正在使用正则表达式，但没有得到正确的结果。

我验证了我的正则表达式，它[在这里](http://tools.netshiftmedia.com/regexlibrary/#)工作正常。

```
var htmlRegex = new RegExp("<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)</\1>");
return htmlRegex.test(testString); 
```

这是小提琴，但正则表达式没有在那里运行。[http://jsfiddle.net/wFWtc/](http://jsfiddle.net/wFWtc/)

在我的机器上，代码运行良好，但结果是 false 而不是 true。这里缺少什么？

* * *

## 回答 #1

> 赞同：383
> 
> 时间：2013-03-17T08:43:31.380

用于检查字符串是否为 HTML 的更好的正则表达式是：

```
/^/ 
```

例如：

```
/^/.test('') // true
/^/.test('foo bar baz') //true
/^/.test('<p>fizz buzz</p>') //true 
```

事实上，它非常好，它会`true`为传递给它的*每个字符串返回，这是因为****每个字符串都是 HTML***。说真的，即使它的格式很差或无效，它仍然是 HTML。

如果您要查找的是 HTML 元素的存在，而不仅仅是任何文本内容，您可以使用以下内容：

```
/<\/?[a-z][\s\S]*>/i.test() 
```

它不会以任何方式帮助您解析 HTML，但它肯定会将字符串标记为包含 HTML 元素。

* * *

## 回答 #2

> 赞同：96
> 
> 时间：2013-03-17T08:40:41.890

**方法#1**。这是测试字符串是否包含 HTML 数据的简单函数：

```
function isHTML(str) {
  var a = document.createElement('div');
  a.innerHTML = str;

  for (var c = a.childNodes, i = c.length; i--; ) {
    if (c[i].nodeType == 1) return true; 
  }

  return false;
} 
```

这个想法是允许浏览器 DOM 解析器决定提供的字符串是否看起来像 HTML。如您所见，它只是检查`ELEMENT_NODE`( `nodeType`of 1)。

我做了几个测试，看起来它有效：

```
isHTML('<a>this is a string</a>') // true
isHTML('this is a string')        // false
isHTML('this is a <b>string</b>') // true 
```

此解决方案将正确检测 HTML 字符串，但它具有 img/vide/etc 的副作用。一旦在 innerHTML 中解析，标签将开始下载资源。

**方法#2**。另一种方法使用[DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)并且没有加载资源的副作用：

```
function isHTML(str) {
  var doc = new DOMParser().parseFromString(str, "text/html");
  return Array.from(doc.body.childNodes).some(node => node.nodeType === 1);
} 
```

[注：
1.`Array.from`为 ES2015 方法，可替换为`[].slice.call(doc.body.childNodes)`.
2\. 调用中的箭头函数`some`可以替换为常用的匿名函数。]

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-17T09:29:04.703

一点点验证：

```
/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i.test(htmlStringHere) 
```

这将搜索空标签（一些预定义的）并`/`终止 XHTML 空标签并验证为 HTML，因为空标签或将捕获标签名称并尝试在字符串中的某处找到它的结束标签以验证为 HTML。

解释演示：[http ://regex101.com/r/cX0eP2](http://regex101.com/r/cX0eP2)

**更新：**

完成验证：

```
/<(br|basefont|hr|input|source|frame|param|area|meta|!--|col|link|option|base|img|wbr|!DOCTYPE).*?>|<(a|abbr|acronym|address|applet|article|aside|audio|b|bdi|bdo|big|blockquote|body|button|canvas|caption|center|cite|code|colgroup|command|datalist|dd|del|details|dfn|dialog|dir|div|dl|dt|em|embed|fieldset|figcaption|figure|font|footer|form|frameset|head|header|hgroup|h1|h2|h3|h4|h5|h6|html|i|iframe|ins|kbd|keygen|label|legend|li|map|mark|menu|meter|nav|noframes|noscript|object|ol|optgroup|output|p|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|small|span|strike|strong|style|sub|summary|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|track|tt|u|ul|var|video).*?<\/\2>/i.test(htmlStringHere) 
```

这会***进行适当的***验证，因为它包含**所有**HTML 标记，首先是空标记，然后是需要结束标记的其余标记。

在这里解释演示：[http ://regex101.com/r/pE1mT5](http://regex101.com/r/pE1mT5)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-08-19T10:24:15.010

[zzzzBov](https://stackoverflow.com/questions/15458876/check-if-a-string-is-html-or-not#15458987)上面的答案很好，但它不考虑杂散的结束标签，例如：

```
/<[a-z][\s\S]*>/i.test('foo </b> bar'); // false 
```

也捕获结束标签的版本可能是这样的：

```
/<[a-z/][\s\S]*>/i.test('foo </b> bar'); // true 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-04-21T14:50:32.613

这是我不时使用的一个草率的单线：

```
var isHTML = RegExp.prototype.test.bind(/(<([^>]+)>)/i); 
```

它基本上会返回`true`包含 a`<`后跟 的**`ANYTHING`**字符串`>`。

，**`ANYTHING`**我的意思基本上是除了一个空字符串之外的任何东西。

这不是很好，但它是单行的。

**用法**

```
isHTML('Testing');               // false
isHTML('<p>Testing</p>');        // true
isHTML('<img src="hello.jpg">'); // true
isHTML('My < weird > string');   // true (caution!!!)
isHTML('<>');                    // false 
```

如您所见，它远非完美，但在某些情况下可能会为您完成这项工作。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-07-13T13:12:23.160

这里的所有答案都过于包容，他们只是寻找`<`后跟`>`. 没有完美的方法来检测字符串是否为 HTML，但您可以做得更好。

下面我们寻找**结束标签**，并且会更严格和更准确：

```
import re
re_is_html = re.compile(r"(?:</[^<]+>)|(?:<[^<]+/>)") 
```

它在行动中：

```
# Correctly identified as not HTML:
print re_is_html.search("Hello, World")
print re_is_html.search("This is less than <, this is greater than >.")
print re_is_html.search(" a < 3 && b > 3")
print re_is_html.search("<<Important Text>>")
print re_is_html.search("<a>")

# Correctly identified as HTML
print re_is_html.search("<a>Foo</a>")
print re_is_html.search("<input type='submit' value='Ok' />")
print re_is_html.search("<br/>")

# We don't handle, but could with more tweaking:
print re_is_html.search("<br>")
print re_is_html.search("Foo &amp; bar")
print re_is_html.search("<input type='submit' value='Ok'>") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-17T08:31:38.523

如果您从字符串文字创建正则表达式，则需要转义任何反斜杠：

```
var htmlRegex = new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");
// extra backslash added here ---------------------^ and here -----^ 
```

如果您使用正则表达式文字，则不需要这样做，但是您需要转义正斜杠：

```
var htmlRegex = /<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)<\/\1>/;
// forward slash escaped here ------------------------^ 
```

此外，您的 jsfiddle 不起作用，因为您`onload`在另一个`onload`处理程序中分配了一个处理程序 - 在左侧的 Frameworks & Extensions 面板中设置的默认设置是将 JS 包装在`onload`. 将其更改为 nowrap 选项并修复字符串文字转义并且它“有效”（在每个人都在评论中指出的约束范围内）：http: [//jsfiddle.net/wFWtc/4/](http://jsfiddle.net/wFWtc/4/)

~~据我所知，JavaScript 正则表达式没有反向引用。所以你表达的这一部分：~~

 ~~```
</\1> 
```~~ 

~~不会在 JS 中工作（但可以在其他一些语言中工作）。~~

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2013-11-19T14:07:40.093

使用 jQuery：

```
function isHTML(str) {
  return /^<.*?>$/.test(str) && !!$(str)[0];
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-05T04:09:02.093

`/<\/?[^>]*>/.test(str)`只检测是否包含html标签，可能是xml

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-06-11T05:25:10.497

在这种情况下使用 jQuery，最简单的形式是：

```
if ($(testString).length > 0) 
```

如果`$(testString).length = 1`，这意味着里面有一个 HTML 标签`textStging`。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-06-03T12:53:12.543

虽然这是一个旧线程，但我只是想分享我为我的需要编写的解决方案：

```
function isHtml(input) {
    return /<[a-z]+\d?(\s+[\w-]+=("[^"]*"|'[^']*'))*\s*\/?>|&#?\w+;/i.test(input);
} 
```

它应该涵盖我在这个线程中发现的大多数棘手的情况。在此页面上使用`document.body.innerText`和进行了测试`document.body.innerHTML`。

我希望它对某人有用。:)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-02-05T14:25:23.057

有一些奇特的解决方案涉及利用浏览器本身来尝试解析文本，识别是否构造了任何 DOM 节点，这将是……很慢。或者正则表达式会更快，但是……可能不准确。这个问题还引发了两个非常不同的问题：

## Q1：字符串是否包含 HTML 片段？

字符串是否是 HTML 文档的*一部分*，包含 HTML 元素标记或编码实体？这可以用作字符串可能需要漂白/消毒或实体解码的指示：

```
/</?[a-z][^>]*>|(\&(?:[\w\d]+|#\d+|#x[a-f\d]+);/ 
```

在撰写本文时，您可以在所有现有答案的所有示例中看到[这种模式](https://regex101.com/r/GIzRty/21)，以及一些……相当可怕的 WYSIWYG 或 Word 生成的示例文本和各种字符实体引用。

## Q2：字符串是 HTML 文档吗？

HTML 规范对于[HTML 文档的定义非常松散](https://tomhodgins.hashnode.dev/code-that-you-just-never-ever-need-to-write-cjpblnfff00km0ys149kbttbg)。浏览器竭尽全力将几乎所有垃圾文本解析为 HTML。两种方法：要么只考虑所有 HTML（因为如果使用 Content-Type 交付，用户代理`text/html`将花费大量精力*尝试*将其解释为 HTML）或查找前缀标记：

```
<!DOCTYPE html> 
```

就“格式良好”而言，几乎没有其他任何东西是“必需的”。以下是一个[100% 完整、完全有效的 HTML 文档](https://gist.github.com/amcgregor/71c62ea2984839a9063232ed2c0adf27?ts=4)，其中包含您认为被省略的每个 HTML 元素：

```
<!DOCTYPE html>
<title>Yes, really.</title>
<p>This is everything you need. 
```

是的。关于如何形成“缺失”元素，例如 、 和 ，有明确`<html>`的`<head>`规则`<body>`。虽然我觉得很有趣的是，SO 的语法突出显示在没有明确提示的情况下无法正确检测到这一点。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-08T12:16:53.487

我的解决方案是

```
const element = document.querySelector('.test_element');

const setHtml = elem =>{
    let getElemContent = elem.innerHTML;

    // Clean Up whitespace in the element
    // If you don't want to remove whitespace, then you can skip this line
    let newHtml = getElemContent.replace(/[\n\t ]+/g, " ");

    //RegEX to check HTML
    let checkHtml = /<([A-Za-z][A-Za-z0-9]*)\b[^>]*>(.*?)<\/\1>/.test(getElemContent);

    //Check it is html or not
    if (checkHtml){
        console.log('This is an HTML');
        console.log(newHtml.trim());
    }
    else{
        console.log('This is a TEXT');
        console.log(elem.innerText.trim());
    }
}

setHtml(element); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-11T16:10:06.240

由于最初的请求并不是说解决方案必须是正则表达式，只是尝试使用正则表达式。我会提供这个。如果可以解析单个子元素，它会说某些东西是 HTML。请注意，如果正文仅包含注释或 CDATA 或服务器指令，这将返回 false。

```
const isHTML = (text) => {
  try {
    const fragment = new DOMParser().parseFromString(text,"text/html");
    return fragment.body.children.length>0
  } catch(error) { ; }  
  return false;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-01-28T19:45:37.727

这是我在自己的项目中使用的一种无正则表达式的方法。

如果您尝试在其他非 HTML 字符串中检测 HTML 字符串，您可以转换为 HTML 解析器对象，然后返回以查看字符串长度是否不同。IE：

Python 实现示例如下：

```
def isHTML(string):
    string1 = string[:]
    soup = BeautifulSoup(string, 'html.parser')  # Can use other HTML parser like etree
    string2 = soup.text

    if string1 != string2:
        return True
    elif string1 == string2:
        return False 
```

它适用于我的 2800 个字符串样本。

伪代码将是

```
define function "IS_HTML"
  input = STRING
  set a copy of STRING as STRING_1
  parse STRING using an HTML parser and set as STRING_2
  IF STRING_1 is equal to STRING_2
  THEN RETURN TRUE
  ELSE IF STRING_1 is not equal to STRING_2
  THEN RETURN FALSE 
```

这在我的测试用例中对我有用，它可能对你有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-05-12T12:38:00.033

对于 xml 字符串，我需要类似的东西。我会把我想出的东西放在这里，以防它对任何人有用..

```
static isXMLstring(input: string): boolean {
    const reOpenFull = new RegExp(/^<[^<>\/]+>.*/);
    const reOpen = new RegExp(/^<[^<>\/]+>/);
    const reCloseFull = new RegExp(/(^<\/[^<>\/]+>.*)|(^<[^<>\/]+\/>.*)/);
    const reClose = new RegExp(/(^<\/[^<>\/]+>)|(^<[^<>\/]+\/>)/);
    const reContentFull = new RegExp(/^[^<>\/]+.*/);
    const reContent = new RegExp(/^[^<>&%]+/); // exclude reserved characters in content

    const tagStack: string[] = [];

    const getTag = (s: string, re: RegExp): string => {
      const res = (s.match(re) as string[])[0].replaceAll(/[\/<>]/g, "");
      return res.split(" ")[0];
    };

    const check = (s: string): boolean => {
      const leave = (s: string, re: RegExp): boolean => {
        const sTrimmed = s.replace(re, "");
        if (sTrimmed.length == 0) {
          return tagStack.length == 0;
        } else {
          return check(sTrimmed);
        }
      };

      if (reOpenFull.test(s)) {
        const openTag = getTag(s, reOpen);
        tagStack.push(openTag); // opening tag
        return leave(s, reOpen);
      } else if (reCloseFull.test(s)) {
        const openTag = tagStack.pop();
        const closeTag = getTag(s, reClose);
        if (openTag != closeTag) {
          return false;
        }
        // closing tag
        return leave(s, reClose);
      } else if (reContentFull.test(s)) {
        if (tagStack.length < 1) {
          return false;
        } else {
          return leave(s, reContent); // content
        }
      } else {
        return false;
      }
    };

    return check(input);
  } 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2020-05-13T03:16:52.457

有一个 NPM 包 is-html 可以尝试解决这个问题[https://github.com/sindresorhus/is-html](https://github.com/sindresorhus/is-html)

# riak - 如何在没有依赖问题的情况下使用 java riak 客户端

> ID：15458882
> 
> 赞同：2
> 
> 时间：2013-03-17T08:24:44.447
> 
> 标签：riak

我正在尝试将 Java Riak Client 用于我正在处理的现有项目。我在用`riak-client-1.0.6-jar-with-dependencies.jar`

我不断收到这样的错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/fasterxml/jackson/annotation/JsonAutoDetect 
```

和这个：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/http/impl/conn/PoolingClientConnectionManager 
```

当我尝试执行基本示例时。

如果有人能指出一种包含所有必要依赖项的简单方法，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T17:11:29.740

1.0.6 Riak java 客户端不使用 Jackson 2.x，这是您的第一个错误所说的缺失或 Apache 的 HTTP 客户端 4.2.x，这是您的第二个错误所说的缺失。（您可以通过 Jackson 中的包结构和 Apache 库中的相关类来确定）。

鉴于此，您自己的代码似乎确实如此，并且因为您没有那些依赖项，所以您会收到这些错误。

我强烈建议使用 maven，但您可以下载当前版本的 Riak 客户端 (1.1.0) 的 jar-with-dependencies，实际上这些软件包已分别升级到 2.1.2 和 4.2.2；可在以下网址获得：[http ://riak-java-client.s3.amazonaws.com/riak-client-1.1.0-jar-with-dependencies.jar](http://riak-java-client.s3.amazonaws.com/riak-client-1.1.0-jar-with-dependencies.jar)

# c++ - 在 C++11 中使用数组初始化列表作为临时列表？

> ID：15458883
> 
> 赞同：22
> 
> 时间：2013-03-17T08:24:50.173
> 
> 标签：c++, c++11

我可以使用数组创建一个命名变量，如下所示：

```
char s[] = {1, 2, 3, 0};
if (strcmp(s, t))
    ... 
```

但是以下不起作用：

```
if (strcmp(char[]{1,2,3,0}, t))
    ... 
```

有没有办法用初始化列表指定一个临时的未命名数组？（在这种情况下，字符串文字可以工作，但对于 char 数组以外的数组？）

**更新：**

```
#include <iostream>
#include <cstring>

using namespace std;

typedef char CA[];

int main()
{
        cout << CA{1,2,3, 0} << endl;
} 
```

给出`error: taking address of temporary array`( `g++-4.7.2 -std=gnu++11`)

**更新 2：**

我认为（也许）正在发生的事情是字符串文字被特别祝福为*lvalues*，但是临时数组是*prvalues*，因此您不能获取它们的地址。不过，这是一个疯狂的猜测，我不确定。

**更新 3：**

其实我认为这应该是错误的：

> “NT 数组”或“T 的未知边界数组”类型的左值或右值可以转换为“指向 T 的指针”类型的纯右值。结果是指向数组第一个元素的指针。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-08-10T14:46:22.080

1）我受这个问题困扰了一段时间。编译以下程序，g++ 4.7.1 (tdm64-1) 给出错误：“teste1.cpp:6:33: error:taking address of temporary array”

```
#include <iostream>
#include <cstring>
using namespace std;
int main()
{ char t[]={1,2,3,0};
  if (strcmp((char[]){1,2,3,0},t)==0)  //error
    cout << "equal\n";
  else 
    cout << "different\n";
} 
```

但是，如果添加关键字“const”，错误消失，程序运行顺利：

```
if (strcmp((const char[]){1,2,3,0},t)==0) //correct 
```

2) 在某些情况下，仅仅添加关键字“const”可能还不够。例如，g++ 4.7.1 在编译以下程序时给出“错误：获取临时数组的地址”：

```
#include <iostream>
#include <cstring>
using namespace std;

void f(char* p)
{ for (int i=0; p[i]!=0; i++) 
    cout << int(p[i]) << " ";
  cout << endl;
}

int main() {
  f((char[]){1,2,3,0}); // error
} 
```

如果添加关键字“const”，编译器会给出另一种错误：“从 'const char*' 到 'char*' [-fpermissive] 的无效转换”：

```
f((const char[]){1,2,3,0}); //error 
```

要成功编译程序，您可以使用选项“-fpermissive”编译它或进行显式类型转换：

```
f((char*)(const char[]){1,2,3,0}); // correct 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-17T08:26:42.973

是的，使用 typedef 然后说

```
ArrayType{1, 2, 3, 0} 
```

或者使用别名模板，然后

```
AliasTemplate<char[]>{1, 2, 3, 0} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-06T18:06:01.197

看来这个问题可以用C++11“move”来解决。在 g++ 4.8.1 中编译程序：

```
#include <iostream>
#include <cstring>
using namespace std;

typedef char CA[];
int main() {
  cout << CA{'a','b','c',0} << endl;
} 
```

导致“错误：获取临时数组的地址”。但是，使用“移动”：

```
cout << move(CA{'a','b','c',0}) << endl; 
```

程序编译并正确运行。必须调用编译器才能使用 C++11 方言：

```
g++ prog1.cpp -o prog.exe -std=c++11 
```

相似地，

```
#include <iostream>
#include <cstring>
using namespace std;
int main()
{ char t[]={1,2,3,0};
  if (strcmp( move((char[]){1,2,3,0}) ,t)==0)  //OK
    cout << "equal\n";
  else 
    cout << "different\n";
} 
```

也可以使用 -std=c++11 标志正确编译和运行。

# ios - 如何为 UIButton 的操作设置每小时限制？

> ID：15458903
> 
> 赞同：0
> 
> 时间：2013-03-17T08:28:03.850
> 
> 标签：ios, objective-c, uibutton, nstimer

在我的应用程序中，我想将特定 UIButton（连接到操作方法）的按下次数限制为每小时 500 次。每次单击此按钮时，都会获得一个虚拟积分，我想将用户可以获得的积分数量限制为 500/小时。

当达到 500 点限制时，我想用一条消息（UILabel）替换按钮，告诉用户他/她必须等待“0:XX”分钟。

我正在想象黑手党战争如何限制用户的一些东西。

我找到了这个[类似的线程](https://stackoverflow.com/questions/8356670/how-to-limit-daily-usage-even-if-user-sets-his-clock-back)，但它没有解释我特别想要什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:48:32.140

如何制作一个`Array`来存储您的`button click`历史记录

当您单击按钮时，获取点击次数`Time`，并将其添加到`history array`

您可以检查`Time`当前数组的哪个索引是 500 `Time`（如果不超过 500 ，则表示使用不应等待）。

并计算 the`Current Time`和 the之间的持续时间`500 Before Time`

如果是`duration >= 1hour`，什么都不做；否则`duration < 1hour`，使按钮启用，然后重新运行（1小时-持续时间），返回持续时间是用户必须等待

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:52:45.813

你想要做的是有一个`NSDate`变量，当按下按钮时，将它设置为`[NSDate date]`（如果你希望它是第一次按下后的一个小时，只有在 clicks==0 时才设置它）

然后，您将需要一个 NSTimer 每隔几秒循环一次，或者无论您希望它多么准确，并检查 if `[[NSDate date] timeIntervalSinceDate:firstDate]>3600`，然后它会重置点击次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:45:03.800

正如已经建议的那样，我会建立一个解决方案`NSDate *now = [NSDate date];`

在每次单击按钮时，在 action 方法中，您将创建一个这样的日期对象并将其添加到数组中（数组是类属性或类内部变量）。

```
NSMutableArray *clicksOf60Minutes;  // can be initialized with alloc/initWithCapacity:501; 
```

容量很可能是550左右。做一些测试并选择一个合适的值。这是一个性能和内存管理的问题。无论您为初始化选择什么值，您的代码都将起作用。

添加一个之后（无论如何添加一个以供将来评估），然后从数组中删除所有超过 60 分钟的 objectc。

```
do {
  [clicksOf60Minutes removeObjectAtIndex:0];
} while ([[clicksOf60Minutes removeObjectAtIndex:0]  timeIntervalSinceDate:firstDate]>3600]); 
```

`do/while`如果是错误的循环并且`while`更好，请不要对我大喊大叫。它应该是首先评估条件，然后仅当条件为真时才执行循环体。如果我没记错的话，这是正确的。请仔细检查。完成后，您的阵列仅包含过去 60 分钟内确实发生的那些点击时刻。现在检查它的号码。

```
if ([clicksOf60Minutes count] > 500) {
  // add points
} else {
  // show altert 
} 
```

# javascript - Javascript 限制为数字，仅适用于 Chrome

> ID：15458905
> 
> 赞同：3
> 
> 时间：2013-03-17T08:28:10.763
> 
> 标签：javascript

使用一些非常基本的代码，例如（来自另一个 Stackoverflow 问题）

```
<HTML>
  <HEAD>
    <SCRIPT language=Javascript>
       <!--
       function isNumberKey(evt)
       {
          var charCode = (evt.which) ? evt.which : event.keyCode;
          if (charCode != 46 && charCode > 31 
            && (charCode < 48 || charCode > 57))
             return false;

          return true;
       }
       //-->
    </SCRIPT>
  </HEAD>
  <BODY>
    <INPUT id="txtChar" onkeypress="return isNumberKey(event)" 
           type="text" name="txtChar">
  </BODY>
</HTML> 
```

我发现当您只是输入数字时，这段代码可以很好地工作。但是，它似乎在 Firefox、Safari、Opera 上阻止了复制/粘贴/选择所有功能（由于我运行的是 OSX 10.8.3，因此无法测试 IE），但在 Chrome 上却没有。我似乎无法弄清楚为什么。有任何想法吗？

我也尝试过 Jquery AlphaNum 库

[https://github.com/KevinSheedy/jquery.alphanum](https://github.com/KevinSheedy/jquery.alphanum)

但这也表现出相同的行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:32:23.987

如果您从上下文菜单中选择剪切、复制、粘贴和选择所有命令（即右键单击文本框并选择适当的命令），则所有命令都将起作用。

但是，Ctrl+X、Ctrl+C、Ctrl+V 和 Ctrl+A 不起作用的原因是它们也是被您的函数阻止的关键事件。当您按下一个键并且它不是一个数字时，您的函数返回`false`.

以下代码（来自您的帖子）阻止了输入：

```
if (charCode != 46 && charCode > 31 
        && (charCode < 48 || charCode > 57))
        return false; 
```

键盘快捷键 (Ctrl+X/C/V/A) 的字符代码不在这些范围内。您需要使用该`evt.ctrlKey`属性将这些命令列入白名单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:40:43.327

允许复制粘贴：

```
function isNumberKey(evt)
   {
      var charCode = (evt.which) ? evt.which : event.keyCode;
      if (charCode != 46 && charCode > 31 
        && (charCode < 48 || charCode > 57)) && !evt.ctrlKey  //ctrlKey returns boolean weather ctrl is pressed or not.
         return false;

      return true;
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T08:39:59.140

试试这个功能：

```
function isNumber(e) {
        e = e || event;
        return +(String.fromCharCode(e.charCode || e.keyCode)) 
                || !e.charCode && e.keyCode < 48;
} 
```

[**提琴手**](http://jsfiddle.net/XRFHX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-14T16:05:26.127

在 Firefox for MacOS 上，您还需要检查与键`e.metaKey`对应的属性`cmd`。

这现在在[jquery.alphanum V1.0.9](https://github.com/KevinSheedy/jquery.alphanum)中得到修复，您描述的问题记录为[Issue #9](https://github.com/KevinSheedy/jquery.alphanum/issues/9)。

# android - 通过 adb shell pm 删除域包

> ID：15458909
> 
> 赞同：3
> 
> 时间：2013-03-17T08:28:47.640
> 
> 标签：android, adb, packagemaker

有一个命令可以减轻管理 Android 手机包的痛苦，

```
adb shell pm uninstall org.kde.necessitas.example.one
adb shell pm uninstall org.kde.necessitas.example.two 
```

但是我有很多手机，只想删除它们上特定域中的所有包。

它不能由

```
adb shell pm uninstall org.kde.necessitas.example.* 
```

你的建议是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-17T08:37:55.797

您可以在批处理文件中使用以下内容：（我假设是 Windows）

```
 adb shell pm list packages org.kde.necessitas.example > packages.txt

  for /F "tokens=2 delims=:" %%a in (packages.txt) do adb shell pm uninstall %%a 
```

您可以更进一步，将搜索文本作为参数：

```
 adb shell pm list packages %1 > packages.txt

  for /F "tokens=2 delims=:" %%a in (packages.txt) do adb shell pm uninstall %%a 
```

这会将`pm list packages`命令的输出通过管道传输到文本文件中，然后循环遍历文本文件的每一行。它调用`adb shell pm uninstall`该行中的每个第二个标记，在这种情况下是包名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T08:50:29.563

如果您坐在电话本身的外壳中，则可以执行此操作（如果需要，可以在一条线上）：

```
for i in $(pm list packages com.your.domain ) ; do
    pm uninstall ${i#*:} ;
done 
```

如果你在主机上并且你使用的是 Unixy——Linux、Mac、Cygwin——那么类似的东西也可以在那里工作，但你需要将“adb shell”推入：

```
for i in $(adb shell pm list packages com.your.domain ) ; do
    adb uninstall ${i#*:} ;
done 
```

由于您正在谈论从所有连接的手机中删除包裹，因此您需要另一个循环：

```
for d in $(adb devices | sed '/List/d; /\*/d; s/device$//') ; do
    for i in $(adb -s $d shell pm list packages com.your.domain ) ; do
        adb -s $d uninstall ${i#*:} ;
    done
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-07T15:03:59.083

对于 mac 用户：

```
adb shell pm list packages com.your.domain \
| cut -d ':' -f 2 \
| tr -d '\r' \
| xargs -L1 -t adb uninstall 
```

# linux - 如何在 Ubuntu11.04 中使用 NASM 维护堆栈

> ID：15458914
> 
> 赞同：0
> 
> 时间：2013-03-17T08:29:41.697
> 
> 标签：linux, assembly, x86, stack, nasm

对于我的项目工作，我测试了一个代码片段。而且我发现这个代码片段由于使用堆栈而出现**分段错误**。但是，我必须**使用堆栈来解决它。**任何人都可以帮我找出问题所在吗？我的程序将显示字符串变量的第二个字符。我的代码片段如下：

```
section.data
  string db "test",10,0
  msg2   db "%c",10,0
main:

xor eax,eax
mov eax, string
mov ebx,1    ; suppose I want to get the second character of string. SO I store the index of that character in ebx

pusha
push eax
push ebx
add esp,8
popa

pop dword[ebx]   ;  **I assume that this following 3 lines arise segmentation fault**   
pop eax          ;
mov bl,[eax+ebx] ; I want to move the fisrt character to BL using the index value stored in ebx which i popped just.

pusha
push ebx
call putchar
add esp,4
popa

pusha
push msg2
call printf
add esp,4
popa 
```

在这里，为了您的善意考虑，我想明确说明此代码片段的目的是了解**如何操作堆栈。**

在这里，@nrz 最近让我了解了以下代码，我在这里编辑了上面的代码：

```
 section.data
    string db "test",10,0
    msg2   db "%c",10,0
  main:
    xor eax,eax
    mov eax, string
    mov ebx,1  ; suppose I want to get the second character of string. SO I store the index of that character in ebx
    mov   eax,string
    movzx eax,byte [eax]
    push  eax        ; these push and pop are for solving it using the stack,
    pop   ebx
    pusha
    push ebx
    call putchar
    add esp,4
    popa
    pusha
    push msg2
    call printf
    add esp,4
    popa 
```

我的查询具体是：

1.  我将给出索引值。它应该在`ebx`注册表中吗？

2.  最重要的是，我使用堆栈的主要想法是使用`string`我之前推入的索引值来访问变量的每个字符`ebx`。[这是强制性的。可能吗？]

3.  我也想将输出存储在一个 8 位寄存器中。

    所以我的所有想法是这样的：

    ```
    mov al, [string+ebx]   ;is it possible? 
    ```

    我必须`ebx`从堆栈中获取值。我将在 中输入一个值`ebx`，然后`push ebx`在 时`mov al,[string+ebx]`，我将`pop ebx`获得用于`mov`指令的值。指令更有可能看起来像：

    ```
     pop ebx  
     mov al,[string+dword[ebx]]  ;which is a wrong statement shown by NASM 
    ```

我热切地等待着你的回应。

谢谢你，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:39:02.347

代码中有一些错误和不必要的说明：

```
移动 eax，字符串；这条线使 eax 指向字符串，但是......
xor eax,eax ; 此行立即将 eax 归零。删除这一行。
移动 ebx,1 ; 这条线是不必要的，但不会引起问题。

普萨；不必要。
推动 eax ; 不必要。
推 ebx ; 不必要。
添加 esp,8 ; 不必要。
波帕；不必要。

pop dword[ebx] ; [1] = [esp], esp = esp+4, 可能导致分段错误。
流行音乐; eax = [esp]，esp = esp+4
mov bl,[eax+ebx]

```

**编辑：**要打印所有字符，只需遍历字符串：

```
部分数据
  字符串数据库“测试”，10
  string_length equ $-string ; 字符串中的字符数。
                             ; 字符串末尾不需要零。
  msg2 数据库 "%c",10,0
主要的：
    xor eax,eax ; eax 是字符串的索引。

字符循环：
    push dword [eax+string] ; 将 4 个第一个字符推入堆栈。
    和 dword [esp], 0x000000ff ; x86 是 little-endian，所以第一个字符
                                 ; 是最低字节。
    流行 ebx ; 将字符的 ASCII 码弹出到 ebx 中。

    普萨德
    推 ebx
    调用 putchar
    添加 esp,4
    波帕德

    公司
    cmp eax,string_length
    jb char_loop

```

**编辑：**用于匹配问题更改的新代码，`ebx`用作索引。

```
部分数据
  字符串数据库“测试”，10
  string_length equ $-string ; 字符串中的字符数。
                             ; 字符串末尾不需要零。
  msg2 数据库 "%c",10,0
主要的：
    xor eax,eax ; 零 eax，用于 putchar。
    异或 ebx,ebx ; ebx 是字符串的索引。

字符循环：
    ;push dword [ebx+string] ; 将 4 个第一个字符推入堆栈。
    ; 和 dword [esp], 0x000000ff ; x86 是 little-endian，所以第一个字符
    ; ; 是最低字节。
    ;pop eax ; 将字符的 ASCII 码弹出到 ebx 中。

    mov al,[ebx+string] ; 这是正常的做法。
                                  ; 以上3条指令“使用堆栈”，
                                  ; 按照问题的要求。
    普萨德
    推入
    调用 putchar
    添加 esp,4
    波帕德

    公司 ebx
    cmp ebx,string_length
    jb char_loop

```

# ruby-on-rails - OmniAuth NoAuthorizationCodeError

> ID：15458915
> 
> 赞同：2
> 
> 时间：2013-03-17T08:29:55.877
> 
> 标签：ruby-on-rails, facebook-graph-api, ruby-on-rails-3.1, ruby-on-rails-3.2, omniauth

我正在使用 rails 3.2.11 和 omniauth gem 来验证用户的 Facebook 帐户。

**宝石文件**

```
gem 'omniauth-facebook', '1.4.0'. 
```

**/config/initializers/omniauth.rb**

```
require 'facebook'
Rails.application.config.middleware.use OmniAuth::Builder do
   provider :facebook, "#{Facebook::APP_ID.to_s}", "#{Facebook::SECRET.to_s}" ,{:scope => "email, offline_access, manage_pages"}
end 
```

**路线.rb**

```
match "/auth/:provider/callback" => "public_new_pages#auth_callback", :as => :callback
match "/auth/failure" => "public_new_pages#failure", :as => :failure 
```

我想使用 Facebook 图形 API 访问大品牌 Facebook 页面的专辑图片。我不能一直得到。它适用于一些 Facebook 页面。无法找到正确的解决方案，为什么我收到如下错误并且我的页面崩溃了。

```
In browser I see Internal server error 500\. and in console I see the error 
below when I tried to create a big site called "BMW"
Started GET "/auth/facebook/callback" for 66.249.74.126 at 2013-03-17 01:10:45
**OmniAuth::Strategies::Facebook::NoAuthorizationCodeError 
(must pass either a `code` parameter or a signed request** 
(via `signed_request` parameter or a `fbsr_XXX` cookie)):
omniauth-facebook (1.4.0) lib/omniauth/strategies/facebook.rb:177:in 
`with_authorization_code!' 
```

有什么解决办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-17T09:18:45.367

我认为回调不需要根 url，您可以使用 route.rb 重定向到任何 url，我遇到了同样的错误，我发现这是由于我在身份验证范围内使用的权限名称已弃用，例如在我的提供商的错误时间看起来像

```
 provider :facebook, '2947293729hwehrk', '036e67ce6345cf9',
  :scope => 'email,user_birthday,read_stream' 
```

但是当我删除时`read_stream`，错误消失了:)

注意：我确定回调网址，因为我自己使用以下配置

在 facebook 控制台中，我的 URL 看起来像

```
http://localhost:3000/ 
```

我的回调路线如下

```
 get 'auth/:provider/callback', to:  'sessions#create' 
```

它工作正常:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T08:54:38.480

尝试将您的回调 URL 更改为您网站的根目录。

[omn​​iauth-facebook 中的这个问题](https://github.com/mkdynamic/omniauth-facebook/issues/65)讨论了完全相同的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-16T22:23:36.683

据我所知，FB 不再允许使用 localhost:3000 作为应用程序域或站点 URL。您必须创建一个“新的”本地主机，基本上，将您的本地主机屏蔽为可接受的 URL（即[http://my.computer.com:3000](http://my.computer.com:3000)）。可以在此处找到有关如何为 Mac 执行此操作的说明：[https](https://www.imore.com/how-edit-your-macs-hosts-file-and-why-you-would-want) ://www.imore.com/how-edit-your-macs-hosts-file-and-why-you-would-want 。这个新的本地主机 URL 需要在 FB 应用程序设置中的 3 个位置出现 - 在“应用程序域字段”的设置中，在设置页面底部的“站点 URL”字段中，以及在“有效 OAuth 重定向 URIs”字段中FB登录产品页面。另外，如果您使用的是 Rails 5.1+，请不要忘记将 jquery 添加到您的 rails 应用程序。

# java - 并行处理何时能胜过顺序处理？

> ID：15458916
> 
> 赞同：6
> 
> 时间：2013-03-17T08:29:57.313
> 
> 标签：java, parallel-processing

```
//    parallel processing

    int processors = Runtime.getRuntime().availableProcessors();
    ExecutorService executorService = Executors.newFixedThreadPool(threads);

    final List<String> albumIds2 = new ArrayList<String>();
    long start2 = System.nanoTime();
    for (final HColumn<String, String> column : result.get().getColumns()) {
        Runnable worker = new Runnable() {

            @Override
            public void run() {
                albumIds2.add(column.getName());
            }
        };
        executorService.execute(worker);
    }
    long timeTaken2 = System.nanoTime() - start2; 
```

我有类似上面示例的代码，它创建了一个`List<String>`专辑 ID。该列是 cassandra 数据库的一个切片。我记录了创建整个专辑列表所花费的时间。

我使用下面的增强型 for 循环也做了同样的事情。

```
 QueryResult<ColumnSlice<String, String>> result =  CassandraDAO.getRowColumns(AlbumIds_CF, customerId);
    long start = System.nanoTime();
    for (HColumn<String, String> column : result.get().getColumns()) {
        albumIds.add(column.getName());
    }
    long timeTaken = System.nanoTime() - start; 
```

我注意到无论专辑数量有多少，for each 循环总是需要更短的时间才能完成。我做错了吗？还是我需要一台具有多核的计算机。我对并行计算的整个概念真的很陌生，如果我的问题很愚蠢，请原谅我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-17T08:34:35.480

在您的并行示例中，您为每一列提交一个任务。将任务加入队列的开销可能大于并行执行的好处。“任务”确实是一个快速的任务（将单个元素插入数组并返回），从而加剧了这种情况。实际上，`Executor`将每个接收到的任务添加到队列中（并且**添加**成本很高）。然后您将 N 个任务添加到队列中，每个任务都将一个元素添加到数组中。并发操作只执行后半部分

如果任务更复杂，您可以以“块”的形式提交工作（例如，如果您有 N 个元素和 P 个处理器，则每个块将有 N/P 个元素或 N/P+1 个元素）。该策略有助于减少开销。

另请注意，这`ArrayList`不是同步的，那么多个任务的并发执行可能会损坏您的列表。您可以使用并发集合来避免此问题，但第一个观察结果仍然存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T08:37:43.470

这是一个不好的做法，创建线程所消耗的时间和 cpu 比你的线程正在做的要多得多：albumIds2.add(column.getName());

# selection - 遗传算法——产生新一代

> ID：15458929
> 
> 赞同：1
> 
> 时间：2013-03-17T08:32:41.143
> 
> 标签：selection, genetic-algorithm

我正在努力完全理解如何在 GA 中获得新一代。AFAIK，这些是步骤（让我们考虑`elitist`方法）：

*   选择（保留 20% 的最佳种群并将其放在下一代中）
*   交叉（交叉其余 70% - 每个父代只与另一个父代交叉一次；我们如何处理交叉概率？）
*   mutate（以概率 MP 对世代中的所有样本进行变异）

我不确定这是否可行，也如上所述 - 你如何处理交叉概率 CP？我的意思是，你需要在几代人之间有相同的种群规模，因此你需要从最差的 70% 的种群中交叉所有样本 - 使 CP 无用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:41:02.193

交叉的概率如下：

```
if rand() < crossProb:
  child1, child2 = crossover(parent1, parent2)
else:
  child1, child2 = parent1, parent2 
```

假设 rand() 给出 [0, 1) 之间的浮点数，并且您的交叉函数旨在返回两个值。突变的工作原理基本相同，但只有一个父子关系。

您选择过程中最初的 20% 可以保证没有突变/交叉。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:41:06.307

每个个体可以包含两个基因组拷贝，而配子包含一个拷贝。通过随机从这两个拷贝中的每一个中获取所需的基因，从这种双重基因组中产生配子。当配子加入时，会产生一个具有两个副本的新个体。至少，这就是它在自然界中总是发生交叉的工作方式（没有像 CP 这样的东西）。

然而，这需要解决两个基因组如何反映到参与选择的单一表型。根据您尝试使用遗传算法解决的任务，这可能从微不足道到非常成问题。

我还推荐使用[JGap](http://jgap.sourceforge.net/)包，它提供了许多自然和人类发明的算法。

# devise - 关联模型视图之外的表单如何工作？

> ID：15458932
> 
> 赞同：0
> 
> 时间：2013-03-17T08:33:36.607
> 
> 标签：devise, ruby-on-rails-3.2, form-submit

我有一个对我来说似乎很简单的问题，但我无法找出解决方案。因此，如果您能提供任何帮助，我将不胜感激:-)

首先，我使用 Devise gem 来创建我的用户。

这是**app/models/user.rb**：

```
class User < ActiveRecord::Base
  before_save :default_values
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :avatar, :address, :longitude, :latitude

  has_many :products, dependent: :destroy

  has_attached_file :avatar, styles: { medium: "300x300>", thumb: "50x50>" },
                         url: "users/:id/:style/:basename.:extension",
                         path: ":rails_root/public/assets/users/:id/:style/:basename.:extension",
                         default_url: "users/missing/:style/missing.png"

  #Geokit
  geocoded_by :address
  after_validation :geocode, if: :address_changed?

  def default_values
    self.address ||= "Paris"
    self.geocode
  end

end 
```

我为我的静态页面创建了一个 Home 控制器，我的 root_path 是**app/views/home/index.html.erb**，我们可以在其中找到：

```
<%= render 'new_name' %> 
```

我们来看看这个**app/views/home/_new_name.html.erb**：

```
<!-- Button to trigger modal -->
<a href="#yourName" role="button" class="btn" data-toggle="modal">OK</a>

 <!-- Modal -->
<div id="yourName" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h3 id="myModalLabel"><%= t('home.your_name') %></h3>
  </div>
  <div class="modal-body">
    <%= form_for(@current_user) do |f| %>
      <p>
        <%= f.label :name, t('name'), placeholder: t('home.your_name') %>
        <%= f.text_field :name %>
      </p>
      <p>
        <%= f.submit t('update'), class: "btn"%>
      </p>
     <% end %>
  </div>
</div> 
```

是的，我确实使用了 bootsrap 的魔法 ;-)

作为记录，我的**config/routes.rb**

```
Dindon::Application.routes.draw do
  root to: "home#index"

  resources :products

  devise_for :users
  match 'users/:id' => 'users#show', :as => :user
  match 'users' => 'users#index'
end 
```

所以，最后要做的就是配置我的 HomeController 给我的实例变量 @current_user 他的新名字。这是我的**app/controllers/home_controller.rb**：

```
class HomeController < ApplicationController
  def index
    @current_user = User.find_by_id(current_user.id)
  end

  def update
    @current_user.update_attributes(params[:user])
  end
end 
```

但它根本不起作用。当我单击确定按钮时，我有一个窗口，我填写字段，单击提交按钮，它会将我发送到用户显示视图，但不考虑更改名称。

你知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:54:58.213

看起来您没有在更新方法中定义 @current_user 。

您还使用 form_for(@user) 而您尝试在更新方法中获取 params[:user] ，这是不一致的。

在我看来，你应该在更新它之前定义@current_user（使用参数，就像你在索引中所做的那样），或者直接使用设计 *current_user* 方法（注意这里没有@，所以我们调用了设计方法，而不是实例变量）。

请注意，调用 *current_user* 将更新单击的登录用户，而使用 find 方法将允许您修改任何其他用户，只要在参数中提供了有效的 id。

# android - 在图像视图 ANDROID 中更改图像

> ID：15458935
> 
> 赞同：0
> 
> 时间：2013-03-17T08:34:03.440
> 
> 标签：android

我正在创建一个应用程序作为作业的一部分。当它被触摸时它会打开或关闭灯泡。我是新手，不知道该怎么做。我只是将一个灯泡关闭的图像添加到图像查看器，现在我不知道在.java中写什么文件使其工作.......

```
<ImageView
    android:id="@+id/imageView1"
    android:contentDescription="@string/off"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:src="@drawable/off" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:39:36.330

您应该学习使用文档，[ImageView](http://developer.android.com/reference/android/widget/ImageView.html)`setImageXxx()`类中有多种方法，可帮助您从任何来源设置图像。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T09:14:11.207

这个小片段可以满足您的要求：

```
public class MainActivity extends Activity implements OnClickListener {

    private boolean isBulbOn = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView iv = (ImageView) findViewById(R.id.BulbImageView);
        iv.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        ImageView iv = (ImageView) findViewById(R.id.BulbImageView);

        isBulbOn = !isBulbOn;

        iv.setImageResource(isBulbOn ? R.drawable.bulb_on : R.drawable.bulb_off);
    }
} 
```

# iphone - root.plist 文件中的隐藏字段

> ID：15458938
> 
> 赞同：3
> 
> 时间：2013-03-17T08:34:15.887
> 
> 标签：iphone, xamarin.ios, settings.bundle

根据这篇文章，我使用 root.plist 文件来设置我的 monotouch iPhone 应用程序：

[http://adtmag.com/articles/2010/04/13/working-with-application-settings-in-monotouch.aspx](http://adtmag.com/articles/2010/04/13/working-with-application-settings-in-monotouch.aspx)

我们如何才能拥有一个默认不可见的字段，并且应用程序可以根据条件更改可见性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:01:39.033

默认情况下，设置是隐藏的。

如果你这样做：

```
var defaults = NSUserDefaults.StandardDefaults;
defaults.SetInt(21, "TestInt");
defaults.Synchronize();

Assert.That(defaults.IntForKey("TestInt"), Is.EqualTo(21)); 
```

如果您不在 plist 文件中设置任何内容，它将完全隐藏。（注意：我在这里使用 NUnit）

因此，如果您想要隐藏某些内容，请不要将值添加到 Settings.bundle 或 Root.plist。

# graphics - 有什么算法可以做图像缩小吗？

> ID：15458939
> 
> 赞同：0
> 
> 时间：2013-03-17T08:34:17.153
> 
> 标签：graphics

我正在尝试实施超级采样来进行抗锯齿。我将原始帧缓冲区扩大了 16 倍，这意味着高度和宽度都扩大了 4 倍。现在我的问题是我不知道如何缩小 16 倍图像。我知道如果采样图像大 4 倍，我可以选择最接近的四个像素进行线性插值。但是对于 16 倍大的图像，我有 16 个最近的像素，对吗？

# c# - 在 WinRT Windows Store App 中通过 OAuth 进行身份验证的最佳方式

> ID：15458949
> 
> 赞同：5
> 
> 时间：2013-03-17T08:36:51.420
> 
> 标签：c#, oauth, windows-runtime, windows-store-apps, portable-class-library

任何人都知道我可以使用任何工具在我用 c# XAML 方法编写的 Windows 应用商店应用程序中通过 OAuth 进行身份验证吗？

我知道 DotNetOpenAuth 和 Hammock，但这些工具不是 PCL，我无法从我的应用程序中引用它！

唯一的方法是手动生成请求并通过`HttpClient`？或者，有更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-29T15:00:47.187

这是迟到的反应，但也许我会帮助一些人。

据我记得我最终使用了[restsharp](http://restsharp.org/)，它做得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:29:10.630

您将使用 WebAuthenticationBroker.AuthenticateAsync 通过 OAuth 针对提供 Twitter、Facebook 等网站的 OAuth 进行身份验证

请参阅 Microsoft [Web 身份验证代理示例](http://code.msdn.microsoft.com/windowsapps/Web-Authentication-d0485122)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-28T19:28:25.817

我刚刚为 PCL（便携式类库）找到了这个 OAuth 库。

[源代码](https://github.com/neuecc/AsyncOAuth)：

[Nuget 包](https://www.nuget.org/packages/AsyncOAuth/)

我还没有测试过。

# wpf - 通过绑定更改用户控件

> ID：15458953
> 
> 赞同：0
> 
> 时间：2013-03-17T08:37:33.857
> 
> 标签：wpf, binding, user-controls

我有`UserControl's`两个

根据我的 ViewModel 中的值，我希望每次都显示另一个 UserControl。

他们应该坐在`UserControl`包裹着他们的地方。

我怎样才能做到这一点？

**这里是包装：**

```
<UserControl>
    <local:UserControl1></local:UserControl1>// I want it to change by a binding
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:43:06.030

您可以在 ViewModel 中有一个 bool 属性`BoolProperty`，并基于该值您可以使用以下方式切换其他控件的可见性`BooleanToVisibilityConverter`-

```
<UserControl>
    <UserControl.Resources>
       <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </UserControl.Resources>
    <local:UserControl1 Visibility="{Binding BoolProperty, Converter=
                                {StaticResource BooleanToVisibilityConverter}}"/>
</UserControl> 
```

每当`BoolProperty`will 的值是`true`，您的控制将是`visible`，如果是，`false`将是`collapsed`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T08:59:32.717

使用 DataTrigger 执行此操作。这是来自记忆，但可能会帮助您：

```
<ContentControl>
    <ContentControl.Style>
        <Style TargetType="ContentControl">
            <Setter Property="Content">
                <Setter.Value>
                    <local:UserControl1 />
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <DataTrigger Binding="{Binding BoolProperty}" Value="True">
                    <Setter Property="Content">
                        <Setter.Value>
                            <local:UserControl2 />
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

# php - 如何将外部数据库与 wamp 服务器上的 joomla 网站连接

> ID：15458961
> 
> 赞同：0
> 
> 时间：2013-03-17T08:39:05.260
> 
> 标签：php, mysql, database, joomla, connectivity

我是 joomla cms 的初学者，无法将 joomla 站点与我的 wamp 服务器数据库连接，每次出现此错误时我都发现...这里是服务器错误是我的配置文件，我认为我的 $log_path 错误我的站点名称：livesite 数据库名称：现场直播

```
<?php
class JConfig {
    var $offline = '0';
    var $editor = 'tinymce';
    var $list_limit = '20';
    var $helpurl = 'http://help.joomla.org';
    var $debug = '0';
    var $debug_lang = '0';
    var $sef = '1';
    var $sef_rewrite = '1';
    var $sef_suffix = '0';
    var $feed_limit = '10';
    var $feed_email = 'author';
    var $secret = '6UmRx1LGrZq3Hr5X';
    var $gzip = '0';
    var $error_reporting = '-1';
    var $xmlrpc_server = '0';
    var $log_path = '/wamp/www/livesite/logs';
    var $tmp_path = '/wamp/www/livesite/tmp';
    var $live_site = '';
    var $force_ssl = '0';
    var $offset = '0';
    var $caching = '0';
    var $cachetime = '15';
    var $cache_handler = 'file';
    var $memcache_settings = array();
    var $ftp_enable = '0';
    var $ftp_host = '';
    var $ftp_port = '';
    var $ftp_user = '';
    var $ftp_pass = '';
    var $ftp_root = '';
    var $dbtype = 'mysql';
    var $host = 'localhost';
    var $user = 'root';
    var $db = 'livesite';
    var $dbprefix = 'table_prefix_';
    var $mailer = 'smtp';
    var $mailfrom = 'noreply@softwaretop100.org';
    var $fromname = 'SoftwareTop100';
    var $sendmail = '/usr/sbin/sendmail';
    var $smtpauth = '0';
    var $smtpsecure = 'none';
    var $smtpport = '25';
    var $smtpuser = '';
    var $smtppass = '';
    var $smtphost = 'localhost';
    var $MetaAuthor = '1';
    var $MetaTitle = '1';
    var $lifetime = '50';
    var $session_handler = 'database';
    var $password = '';
    var $sitename = 'livesite';
    var $MetaDesc = 'Lists, research and news about the software industry, including the top list of the world’s largest software companies.';
    var $MetaKeys = 'software, top software, applications, software companies, top, news, it companies, software industry, software news, it news, software jobs, jobs, software research, information, software information, list, forum, software forum';
    var $offline_message = 'This site is down for maintenance. Please check back again soon.';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:08:46.140

假设你的登录凭据是正确的，试试这个然后让我知道 -

```
var $log_path = 'C:\\wamp\\www\\livesite\\logs';
var $tmp_path = 'C:\\wamp\\www\\livesite\\tmp'; 
```

# java - Hibernate：从商店项目中获取顶级类别的列表

> ID：15458980
> 
> 赞同：0
> 
> 时间：2013-03-17T08:42:08.883
> 
> 标签：java, database, hibernate, hql

我的 Hibernate 应用程序中有以下实体：-

`Store, Item, Category`有以下关系

`Store`有一对多的关系`Item`

`Category`与其他类别有多对多的关系（即父类别有子类别）

`Item`与具有相同父类别的类别具有多对多关系。

我想要一个商店拥有其商品的顶级类别的列表。

我尝试了这个 HQL 查询，但它只返回一个顶级类别

`String queryString = "select c.parentCategory from Category c where :store in elements(c.items)";`

`List categories = getSession().createQuery(queryString).setEntity("store", store).list();`

请帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T14:38:55.927

我以前做过类似的事情，但稍微简化了一点。如果一个类别只能有一个父类别，您可以将其建模为：

```
@Entity
public class Category

@OneToMany(mappedBy = "parentCategory", cascade = CascadeType.ALL, orphanRemoval = true)
private List<Category> childCategories;

@ManyToOne
@JoinColumn(name = "parentCategoryId", nullable = true)
private Category parent; 
```

查找顶级类别是查找父级为空的类别的简单案例。

```
sessionFactory.getCurrentSession().createQuery("from Category where parent is NULL") 
```

这符合我的需要，但需要限制类别只能有一个父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T05:26:36.537

您可以在逻辑级别和 ORM 级别实现它，而不仅仅是在 ORM 级别。

首先，添加关系：store与Category是一对多的关系其次，在插入/更新/删除一个Item之前添加一个预处理器，用于在商店级别添加或删除Category。

```
public void preProcessForItemInserting(Item item){
    Store store = getStoreDao().get( item.getStoreId() );
    Set<Category> storeCategories = store.getCategories();
    Set<Category> itemCategories = item.getCategories();
    storeCategories.addAll( itemCategories );
    getStoreDao().save( store );
}

//it is a little bit more complex than inserting logic
public void preProcessForItemUpdating(Item item){...}

//it is a little bit more complex than inserting logic
public void preProcessForItemDeleting(Item item){...} 
```

总而言之，这是面向数据设计和面向应用设计的经典问题。我们可以根据需求在这两个方面调整我们的应用程序，而不仅仅是数据建模或应用程序优化。

# python - 如何使递归重命名操作（Linux，使用 python）可逆？

> ID：15458983
> 
> 赞同：1
> 
> 时间：2013-03-17T08:43:05.590
> 
> 标签：python, recursion, reverse

如何使递归重命名操作（Linux，使用 python）可逆？

我想在Linux下用python写一个程序，这个程序做这个工作：批量递归重命名文件夹中的所有文件，如果文件名有子字符串X，重命名为Y，示例：将markdown重命名为md，github.markdown将是重命名为 github.md。

困难的部分是如何使操作可逆？如果我想改回文件名。示例：将 github.md 改回 github.markdown。

如何设计程序并保持简单，使用什么算法和数据结构？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T08:49:01.950

> 将原始文件名和重命名的文件名保存到文件中，有更好的方法吗？

我认为这是最稳健的方法。即使重命名是有损的（即，如果您不能仅通过查看重命名的文件名来重建原始文件名或位置），它也会起作用。

也就是说，既然您使用的是 Linux，为什么不直接对文件进行[符号链接](http://en.wikipedia.org/wiki/Symbolic_link)以使它们可以在另一组名称下访问呢？在 Python 中，这可以使用[`os.symlink()`](http://docs.python.org/2/library/os.html#os.symlink).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:19:10.590

您应该考虑使用[修订控制系统](http://en.wikipedia.org/wiki/Revision_control)。这样，所有更改都可以注册和撤消。有[许多不同的程序](http://en.wikipedia.org/wiki/Comparison_of_revision_control_software)可供选择。

如果您的目录仅包含文本文件，则可以使用古老的[RCS](http://en.wikipedia.org/wiki/Revision_Control_System)。我个人非常喜欢[git](http://git-scm.com/)，因为与 RCS 一样，版本信息包含在受修订控制的目录中。git 的优点是它还可以处理二进制文件，并且可以处理移动和重命名。[CVS](http://en.wikipedia.org/wiki/Concurrent_Versions_System)和[Subversion](http://subversion.apache.org/)等替代方案通常需要您设置存储库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T09:50:37.557

我想如果出现错误或异常，您想反转整个操作。

我会根据情况使用两种可能的方法：

1) 使用后进先出队列（Queue.LifoQueue 类）。

每次操作完成后，对 LIFO 队列执行 put()。

如果有错误或异常，只需get()。

一些示例代码：

```
import os, Queue.LifoQueue

stack = Queue.LifoQueue()
from = 'original.txt'
to = 'new.txt'
if os.system('mv %s %s' % (from, to)) == 0: # execute operation
    stack.put('mv %s %s' % (to, from)) # save reverse operation

os.system(stack.get()) # execute reverse operation 
```

2）“先试后买”

如果有模拟操作的方法，那就全部模拟，如果有效，就全部执行，不需要任何反转。

# c# - C# - 使用标记来识别值的子字符串总和

> ID：15458985
> 
> 赞同：3
> 
> 时间：2013-03-17T08:43:08.760
> 
> 标签：c#, string, sum, substring

我想要实现的是以下。我有一个可以采用以下格式的字符串（只是一个示例，实际字符串可能是完全随机的）：

```
01005010050 
```

上面的字符串被分解为以下字段：

```
0 100 50 100 50 
```

我想要实现的是将最后 4 个字段的总和放入第一个 0 字段。我确实有机会用标记或可用于识别字段在字符串中的位置的东西来装饰字符串，即

```
[£+]0[£-][£+]100[£-][£+]50[£-][£+]100[£-][£+]50[£-] 
```

然后我会使用正则表达式从开始和结束标记中获取内部值。我需要一些方法来识别哪些字段是主字段，所以我打算使用另一个令牌：

```
[*][£+]100[£-][£+]50[£-][£+]100[£-][£+]50[£-] 
```

然后我可以浏览找到的内部字符串，转换它们并添加它们。然后在原始字符串上删除开始 [£+] 和结束 [£-] 标记并将 [*] 替换为计算的总数。我认为这可行，但问题在于每个字符串可能有多个总计。

```
[£+][*][£-][£+]100[£-][£+]50[£-][£+]100[£-][£+]50[£-]\r\n
[£+][*][£-][£+]100[£-][£+]50[£-][£+]100[£-][£+]50[£-] 
```

所以我想在该字段中添加某种 ID：

```
ID1[*][£+]ID1|100[£-][£+]ID1|50[£-][£+]ID1|100[£-][£+]ID1|50[£-]\r\n
ID2[*][£+]ID2|100[£-][£+]ID2|50[£-][£+]ID2|100[£-][£+]ID2|50[£-] 
```

因此，您将使用正则表达式来拆分字符串。在管道 (|) 上拆分找到的内部字符串，这样第一个值将是键，第二个值是值。将所有这些添加到字典或其他东西中。然后，您必须遍历字典中的每个键并添加所有总数，从原始字符串中删除标记并将“Key [*]”替换为找到的该键的总数。

由于另一个字段可以保存总数，因此该过程更加复杂。我只是想先澄清一下，这是一种合乎逻辑的方式，当有一个简单的解决方案时，我不会把事情复杂化。只是为了澄清字符串的格式可能是完全随机的，即

```
abc1000cde50 where fields are:
abc 100 0 c d e 50 (total placed in field 3 from 2 + 7) 
```

我有机会装饰字段的原因是这个字符串是从一个 XML 文件构建的，我可以在其中有一个属性说明这是一个总字段，这是主字段。我不能在构建字符串时简单地添加值的原因是首先执行了许多其他计算，包括计算实际值是什么（即该字段在 0 - 500 的范围内）。我只是要在返回完成的构建字符串之前计算最后的总数。代码的结构方式我失去了拆分字段的能力，因此放置标记以显示字段在字符串中的位置并能够以这种方式计算总数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T09:24:22.997

仅解决问题的第一部分！

假设您在 0 之后和某事之前分割字符串！= 0：

```
{
    string s = "01005010050";

    var ls = new List<int>();

    for (int n = 0; n < s.Length - 1; n++)
    {
        if ((int)s[n] == 48 && (int)s[n + 1] != 48) // 48 = Ascii(0)
        {
            s = s.Insert(n + 1, ";");
        }
    }

    ls = s.Split(';').Select(Int32.Parse).ToList();

    for (int n = 1; n < ls.Count(); n++)
    {
        ls[0] += ls[n];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T09:49:12.560

您似乎将解决方案视为将输入字符串中的字段替换为其他计算字段的过程。你说“我想要实现的是将最后 4 个字段的总和放入第一个 0 字段”和“......从原始字符串中删除标记并将“Key [*]”替换为.. ."。如果我试图对此进行编程，我会认为该过程分为三个步骤 (1) 读取数据并将其存储为便于进行计算的某种格式 (2) 进行所需的计算并以某种方式存储结果 (3)生成所需格式的输出字符串。

# php - php返回日期/时间问题

> ID：15458988
> 
> 赞同：-1
> 
> 时间：2013-03-17T08:43:53.220
> 
> 标签：php, date, time

我在下面有一个简单的函数，它可以获取秒数并像“2 分钟前”、“9 小时前”等返回它......

如果我在 'relativedate()' 函数上传递 1，它只会返回 1 秒，依此类推。众所周知，60*60*24*7*30 或 18144000sec = 1 个月。因此，如果我在参数上传递 18144000 的值，它应该返回 1 个月。但是，如果我在参数上传递一个值，让我们在 relativedate() 上说 231440000 应该超过一年，它会返回“13 个月”而不是 1 年。

```
function relativedate($secs) {
        $second = 1;
        $minute = 60;
        $hour = 60*60;
        $day = 60*60*24;
        $week = 60*60*24*7;
        $month = 60*60*24*7*30;
        $year = 60*60*24*7*30*365;

        if ($secs <= 0) { $output = "now";
        }elseif ($secs > $second && $secs < $minute) { $output = round($secs/$second)." second";
        }elseif ($secs >= $minute && $secs < $hour) { $output = round($secs/$minute)." minute";
        }elseif ($secs >= $hour && $secs < $day) { $output = round($secs/$hour)." hour";
        }elseif ($secs >= $day && $secs < $week) { $output = round($secs/$day)." day";
        }elseif ($secs >= $week && $secs < $month) { $output = round($secs/$week)." week";
        }elseif ($secs >= $month && $secs < $year) { $output = round($secs/$month)." month";
        }elseif ($secs >= $year && $secs < $year*10) { $output = round($secs/$year)." year";
        }else{ $output = " more than a decade ago"; }

        if ($output <> "now"){
            $output = (substr($output,0,2)<>"1 ") ? $output."s" : $output;
        }
        return $output;
    }

echo relativedate(60); // 1 minute 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T08:49:03.683

您的年份计算是 365 个月，而不是 12 个月

# android - 如何在android的其他类中传递“服务”类的arraylist

> ID：15458989
> 
> 赞同：0
> 
> 时间：2013-03-17T08:44:17.557
> 
> 标签：android, android-listview, android-service

在这里我发布了myservice.java的一部分，我想在android中的其他类中传递“服务”类的arraylist；所以怎么做，我对android非常天真。我想设置**guestorderlist** arraylist的值在列表视图中。

```
public void onStart(Intent intent, int startId) {
     // TODO Auto-generated method stub
    super.onStart(intent, startId);
    Toast.makeText(this, "service got started", Toast.LENGTH_LONG).show();
    Log.d("Testing", "Service got started");
    {
        {

            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_guests, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All custinfo: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // custinfo found
                    // Getting Array of custinfo
                    custinfo = json.getJSONArray(TAG_CUSTINFO);

                    // looping through All custinfo
                    for (int i = 0; i < custinfo.length(); i++) {
                        JSONObject c = custinfo.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String gname =  c.get(TAG_GNAME).toString();

                        // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();  

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_GNAME, gname);

                        // adding HashList to ArrayList
                        guestsorderList.add(map);

                    }
                } 
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
    }

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T12:05:44.227

我可以从您的问题中得到的是，您希望将 ArrayList 从一项活动传递到另一项活动。如果这就是问题所在，您可以将 ArrayList 从一个父活动传递给被调用的活动。这是一个示例：

```
ArrayList<TYPE> value = new ArrayList<TYPE>();
// populate the list
value.add(1.0);
Intent intent = new Intent(CurrentActivity.this,TargetActivity.class);
intent.putExtra("arraylist", value);
startActivity(intent); 
```

在目标类中，您可以按如下方式检索列表：

```
// Call in in OnCreate()
// TYPE can be String, Double etc.
ArrayList<TYPE> list=(ArrayList<TYPE>)getIntent().getSerializableExtra("arraylist"); 
```

# python - pygame 用 KEYUP 减慢对象的速度？

> ID：15458997
> 
> 赞同：0
> 
> 时间：2013-03-17T08:46:53.443
> 
> 标签：python, python-2.7, key, pygame

用pygame做一个简单的游戏。已经为我的角色导入了一张图片，并且可以自由移动他。我想知道如何让角色慢慢停下来；

`event.type == KEYUP:`

如，当我释放键时，角色会说，从释放键到角色缓慢停止的 50 像素。

我尝试了一些不同的东西，但似乎没有任何效果。下面是我的代码。任何帮助都会很棒=]

```
bg="bg.jpg"
staticCharacter="toon.png"

import pygame, sys, time
from pygame.locals import *

pygame.init()
screen = pygame.display.set_mode((640,360),0,32)

background=pygame.image.load(bg).convert()

staticToon = pygame.image.load(characterMid).convert_alpha()

x = 0
y = 0
movex = 0
movey = 0

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

        if event.type == KEYDOWN:
            if event.key == K_LEFT:
                movex = -0.20 
            elif event.key == K_RIGHT:
                movex = +0.20        
            elif event.key == K_UP:
                movey = -0.20       
            elif event.key == K_DOWN:
                movey = +0.20

        if event.type == KEYUP:
            if event.key == K_LEFT:
                movex = 0           
            elif event.key == K_RIGHT:
                movex = 0                    
            elif event.key == K_UP:
                movey = 0         
            elif event.key == K_DOWN:
                movey = 0

    x += movex
    y += movey

    if x > 560:
        x = 560
    if y > 280:
        y = 280
    if x < 0:
        x = 0
    if y < 0:
        y = 0

screen.blit(background,(0,0))
screen.blit(staticToon,(x,y))
pygame.display.update() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:44:38.630

`distance = speed*time`

您不想增加位置（通过`movex`或`movey`），而是想增加速度：

```
delta = {
    pygame.K_LEFT: (-20, 0),
    pygame.K_RIGHT: (+20, 0),
    pygame.K_UP: (0, -20),
    pygame.K_DOWN: (0, +20),  
    }
...

elif event.type == pygame.KEYDOWN:
    deltax, deltay = delta.get(event.key, (0, 0))
    ball.speed[0] += deltax
    ball.speed[1] += deltay 
```

现在，要减慢物体（下面我的示例中的球）的速度，请添加一些摩擦力：

```
 ball.speed[0] *= 0.95
    ball.speed[1] *= 0.95 
```

每次通过事件循环都会使速度降低一点。

将对象移动等于 的距离`speed * time`。为简单起见，让我们及时将变化变为 1。

```
self.rect = self.rect.move(self.speed) 
```

* * *

这是一个可运行的示例：（只需为 . 添加正确的路径`staticCharacter`。）

```
import sys
import pygame
import os

'''
Based on http://www.pygame.org/docs/tut/intro/intro.html
Draws a red ball bouncing around in the window.
Pressing the arrow keys moves the ball
'''

staticCharacter = "toon.png"

delta = {
    pygame.K_LEFT: (-20, 0),
    pygame.K_RIGHT: (+20, 0),
    pygame.K_UP: (0, -20),
    pygame.K_DOWN: (0, +20),  
    }

class Ball(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self) 
        self.image = pygame.image.load(staticCharacter)
        self.rect = self.image.get_rect()
        self.speed = [2, 2]
        self.area = pygame.display.get_surface().get_rect()
    def update(self):
        self.rect = self.rect.move(self.speed)
        if self.rect.left < 0 or self.rect.right > self.area.width:
            self.speed[0] = -self.speed[0]
        if self.rect.top < 0 or self.rect.bottom > self.area.height:
            self.speed[1] = -self.speed[1]

class Main(object):
    def __init__(self):
        self.setup()
    def setup(self):
        pygame.init()
        size = (self.width, self.height) = (640,360)
        self.black = (0, 0, 0)
        self.screen = pygame.display.set_mode(size, 0, 32)
        self.ball = Ball()
        self.setup_background()
    def setup_background(self):
        self.background = pygame.Surface(self.screen.get_size())
        self.background = self.background.convert()
        self.background.fill(self.black)
        self.screen.blit(self.background, (0, 0))
        pygame.display.flip()
    def draw(self):
        self.screen.blit(self.background, (0, 0))
        self.screen.blit(self.ball.image, self.ball.rect)
        pygame.display.flip()
    def event_loop(self):
        ball = self.ball
        while True:
            for event in pygame.event.get():
                if ((event.type == pygame.QUIT) or 
                    (event.type == pygame.KEYDOWN and 
                     event.key == pygame.K_ESCAPE)):
                    sys.exit()
                elif event.type == pygame.KEYDOWN:
                    deltax, deltay = delta.get(event.key, (0, 0))
                    ball.speed[0] += deltax
                    ball.speed[1] += deltay
            ball.speed = [0.99*s for s in ball.speed]
            ball.update()
            self.draw()
            pygame.time.delay(10)

if __name__ == '__main__':
    app = Main()
    app.event_loop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:38:48.507

我的建议：访问以下网站：[http](http://karpathy.ca/phyces/tutorial1.php) : //karpathy.ca/phyces/tutorial1.php 下载 pygamehelper 和 startercode（我保证它会让你的生活更轻松）。FPS 是内置的，因此您无需在运动逻辑中进行调整。如果您想进一步澄清，请查看其他一些教程，如果您想要一些额外的时髦，请使用矢量库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T10:25:06.043

通常，角色移动与机器速度无关。在您的示例中，您不知道 While 循环每秒执行多少次，它取决于计算机速度。所以首先，你应该使用 pygame 时钟来计算每次调用 move() 之间的时间差。

```
myclock = pygame.Clock()
delta = myclock.tick() 
```

当你有时间差时，你可以使用这样的距离方程：

```
position += speed * direction * delta 
```

`delta`以毫秒为单位，因此您需要`speed`相应地设置。这`direction`将是 -1 或 +1，具体取决于当前按下的键。keyup 会将方向设置为 0。

现在回到问题。您必须对上述内容进行一些不同的更改。keyup 会从方向中减去一个小值。

然后检查方向是否不是 1 或 -1，然后从您的方向中减去一个值。您将在每个循环中执行此操作。这样它会变得越来越小，并且看起来你的角色正在减速。最好将减去的值乘以 delta，这样每台计算机上的减速度都会保持不变。

# c# - Windows phone 中的 Int 数组到 WriteableBitmap

> ID：15458999
> 
> 赞同：1
> 
> 时间：2013-03-17T08:46:55.880
> 
> 标签：c#, windows-phone-7, windows-phone-8

如何在 Windows Phone 8 中将像素数组 int[] 转换为 WriteableBitmap？稍后我想将此图像保存到 MediaLibrary。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T09:17:38.943

我在 Windows Phone 上知道的唯一方法是使用 WriteableBitmapEx 库。除了 WriteableBitmap 之外，它还实现了一个“具有各种重载的 SetPixel 方法”：

[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)

该库可以简单地从 Visual Studio 2012 中安装：

项目 => 管理 NuGet 包 => 在线 => 搜索“WriteableBitmapEx”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:56:13.457

您可以使用 int[] 的 copyTo 成员函数将 int[] 复制到 WriteableBitmap。

```
int[] ARGBPx = new int[(int)captureDevice.PreviewResolution.Width * (int)captureDevice.PreviewResolution.Height];            
WriteableBitmap writeableBitmap_preview;        

ARGBPx.CopyTo(writeableBitmap_preview.Pixels, 0);         
writeableBitmap_preview.Invalidate(); 
```