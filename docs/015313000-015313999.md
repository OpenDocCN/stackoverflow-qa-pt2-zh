# StackOverflow 问答 15313000-15313999

# c# - MVC4 SimpleMembership User.IsInRole 抛出“无效的列名：UserId”错误

> ID：15313000
> 
> 赞同：1
> 
> 时间：2013-03-09T16:23:27.213
> 
> 标签：c#, asp.net-mvc, simplemembership

我正在使用 SimpleMembership 和 on `Application_Start()`，我正在执行以下代码：

```
WebSecurity.InitializeDatabaseConnection("MyContext", "User", 
    "Id", "Email", autoCreateTables: true); 
```

但是，在我的控制器中，当我执行以下代码行时：

```
bool isAdmin = Roles.IsUserInRole("Admin"); 
```

我收到以下错误：

> 列名“用户 ID”无效。

它会在哪里获得对 UserId 列的引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:31:20.053

你设置网络配置了吗？

```
<roleManager enabled="true" cacheRolesInCookie="true">
    <providers>
        <clear />
        <add connectionStringName="YourDbConnectionString" 
             applicationName="MySampleAppName"
             name="AspNetSqlRoleProvider" 
             type="System.Web.Security.SqlRoleProvider" />
    </providers>
</roleManager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:50:27.557

发现问题...

pages_Membership 有一个名为“Id”的列，而不是“UserId”。多哈。

# c - 从 C 中的向量中删除一个元素

> ID：15313001
> 
> 赞同：1
> 
> 时间：2013-03-09T16:23:29.657
> 
> 标签：c

如何在不更改 print_vector 函数的情况下从 C 中的向量中删除元素？

1）这是我为删除键盘给定位置上的元素而编写的代码：

```
void remove_a_cost(int a)
{
int nr, c;
printf("Give the number of cost for remove: ");
scanf("%d", &nr);
if(nr>a)
{
    printf("The remove is impossible!\n");
}
else
{
    for(c=nr;c<=a;c++)
    {
            chelt[c]=chelt[c+1];
    }
}
} 
```

2）这是打印功能

```
void print_costs(int a)
{
int i;
if(a>0 && a<=n)
{
    for(i=1;i<=a;i++)
    {
        printf("\nCost %d\n\n",i);
        printf("Day: %s\n", chelt[i].day);
        printf("Sum: %d\n", chelt[i].sum);
        printf("Type: %s\n", chelt[i].type);
    }
}

} 
```

3) 这是 add_new_cost() 函数

```
int add_new_cost()
{
    int a,i;
    printf("Nr of costs = ");
    scanf("%d", &a);
    if(a>0 && a<=n)
        {
            for(i=1;i<=a;i++)
                {
                    printf("\nType the attributes for cost %d",i);
                    printf("\nDay = ");
                    scanf("%s",chelt[i].day);
                    printf("Sum = ");
                    scanf("%d", &chelt[i].sum);
                    printf("Type = ");
                    scanf("%s",chelt[i].type);
                }
        }
        return a;
} 
```

4）这是主要功能

```
int main()
{
    setbuf(stdout,NULL);
    int b,choice;

    do
    {
     printf("\nMenu\n\n");
     printf("1 - Add a cost\n");
     printf("2 - Print a cost\n");
     printf("3 - Update a cost\n");
     printf("4 - Delete a cost\n");
     printf("5 - Exit\n\n");
     printf("Command = ");
     scanf("%d",&choice);

     switch (choice)
     {
     case 1: b=add_new_cost();
              break;
     case 2: print_costs(b);
              break;
     case 3: update_cost(b);
             break;
     case 4: remove_a_cost(b);
             break;
     case 0: printf("Goodbye\n");
             break;
     default: printf("Wrong Choice. Enter again\n");
              break;
     }

    } while (choice != 0);
    return 0;
} 
```

示例：如果向量上有 4 个元素：

```
1)Type the attributes for cost
Day = luni
Sum = 2
Type = dsasa

Type the attributes for cost 2
Day = marti
Sum = 23
Type = adsds

Type the attributes for cost 3
Day = miercuri
Sum = 23
Type = asd

Type the attributes for cost 4
Day = joi
Sum = 232
Type = asdas 
```

我尝试删除，比如说第三个元素，这是我打印时收到的：

```
Cost 1
Day: luni
Sum: 20
Type: maradf

Cost 2
Day: marti
Sum: 23
Type: afas

Cost 3
Day: joi
Sum: 45
Type: sdfadsf

Cost 4
Day: 
Sum: 0
Type: 
```

元素（COST 4）在它应该被删除时出现。是否有在不更改打印功能的情况下删除元素的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:21:05.933

更新问题后，一切都清楚了，请进行以下修改：

```
int remove_a_cost(int a)
{
    int nr, c;
    printf("Give the number of cost for remove: ");
    scanf("%d", &nr);
    if (nr > a)
    {
        printf("The remove is impossible!\n");
    }
    else
    {
        for (c = nr; c <= a; c++)
        {
            chelt[c] = chelt[c + 1];
        }
        a--; // decrease a
    }
    return a; // return new size
} 
```

和

```
switch (choice)
{
case 1: b = add_new_cost();
    break;
case 2: print_costs(b);
    break;
case 3: update_cost(b);
    break;
case 4: b = remove_a_cost(b); // <- store returned value in b
    break;
case 0: printf("Goodbye\n");
    break;
default: printf("Wrong Choice. Enter again\n");
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:36:22.243

你的代码有点乱。您应该尝试为变量赋予有意义的名称。

但是，据我了解， print_costs 函数接收它应该打印的最后一个“成本”的值。

删除“成本”后，您可能传递了错误的值。

# sql - 将行转置为列

> ID：15313007
> 
> 赞同：0
> 
> 时间：2013-03-09T16:23:40.957
> 
> 标签：sql, sql-server, split

我已将此数据从平面文件源导入 SQL Server。

```
B  01  1007282   Y  1001201 15102
B  02  LEVEL     Y  2705201 15102
B  03  1998014   Y  2808201 15102
B  05            Y  2808201 15102
B  06  49081100  Y  1708201 15102
B  07  64072151  Y  2903201 15102
B  08  75090350  Y  0111200 15102
B  09  58082950  Y  0608200 15102
B  10  75112551  Y  1007200 15102
B  11  72030950  Y  1007200 15102
B  20  74507632  Y  2808201 15102
B  23  98240166  Y  2808201 15102
B  25  U4507632  Y  2808201 15102
B  26  45002267  Y  2808201 15102 
```

从这些数据中，我需要获取每一行并将每一行拆分为不同的列：

```
Column 1 : B  01  1007282   Y  1001201 15102
Column 2 : B  02  LEVEL     Y  2705201 15102
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:53:32.853

根据进一步的要求，这个答案可能会变得过时，但鉴于迄今为止的评论，我的建议是不要更改 SQL Server 中的数据，只是为了水平而不是垂直地查看它。Excel 等应用程序更适合于此。您可以从 Management Studio 复制和粘贴查询结果（结果到网格），从源平面文件复制和粘贴，或者以其他方式将数据作为列导入 Excel。突出显示 200 行，点击`Copy`，然后右键单击某处并选择`Paste Special...`您将在此处看到一个对话框，只需选中`Transpose`复选框并单击`OK`。瞧，你的行是列！

![在此处输入图像描述](../Images/65ca3562b3575b49909a41acf2d408e0.png)

![在此处输入图像描述](../Images/54ce9810c97b07027966bf9e77d11749.png)

对不起尺寸。我的视网膜是所有屏幕截图的两倍[，除了使用不同的计算机之外，](https://apple.stackexchange.com/questions/84542/how-can-i-make-crisper-screen-shots-on-mbp-retina)[我还没有找到*方便*](https://apple.stackexchange.com/questions/84542/how-can-i-make-crisper-screen-shots-on-mbp-retina)的解决方法。:-(

* * *

现在，如果您真的想在 SQL Server 中执行此操作，我想您可以做一些像这样丑陋的事情。给定以下源表（并假设 SQL Server 2008 或更高版本）：

```
CREATE TABLE dbo.InColumns(col VARCHAR(255));
GO

INSERT dbo.InColumns(col) VALUES
('B  01  1007282   Y  1001201 15102'),
('B  02  LEVEL     Y  2705201 15102'),
('B  03  1998014   Y  2808201 15102'),
('B  05            Y  2808201 15102'),
('B  06  49081100  Y  1708201 15102'),
('B  07  64072151  Y  2903201 15102'),
('B  08  75090350  Y  0111200 15102'),
('B  09  58082950  Y  0608200 15102'),
('B  10  75112551  Y  1007200 15102'),
('B  11  72030950  Y  1007200 15102'),
('B  20  74507632  Y  2808201 15102'),
('B  23  98240166  Y  2808201 15102'),
('B  25  U4507632  Y  2808201 15102'),
('B  26  45002267  Y  2808201 15102'); 
```

现在一些非常有趣的动态 SQL：

```
DECLARE @sql NVARCHAR(MAX) = N'', @maxlen INT;

SELECT @maxlen = MAX(LEN(col)) FROM dbo.InColumns;

SELECT @sql += N',
    Col' + RTRIM(rn) + ' VARCHAR(' + RTRIM(@maxlen) + ')'
 FROM (SELECT rn = ROW_NUMBER() OVER 
  (ORDER BY col) FROM dbo.InColumns) AS x;

SET @sql = N'CREATE TABLE dbo.InRows
(' + STUFF(@sql, 1, 1, N'') + ');';

EXEC sp_executesql @sql;

SET @sql = N'';

SELECT @sql += N', 
  (SELECT col FROM x WHERE rn = ' + RTRIM(rn) + ')'
  FROM (SELECT rn = ROW_NUMBER() 
    OVER (ORDER BY col) FROM dbo.InColumns) AS x;

SET @sql = N';WITH x AS (SELECT col, rn = ROW_NUMBER() OVER 
   (ORDER BY col) FROM dbo.InColumns)
INSERT dbo.InRows SELECT TOP (1) '
  + STUFF(@sql, 1, 1, N'') + ' FROM x;';

EXEC sp_executesql @sql;
GO
SELECT * FROM dbo.InRows;
GO
DROP TABLE dbo.InRows; 
```

结果：

```
Col1                               Col2   ...
---------------------------------  -------------------------
B  01  1007282   Y  1001201 15102  B  02  LEVEL     Y  27... 
```

明白为什么这在 Excel 中要容易得多吗？

如果有 200 行，您将危险地接近超过表的最大行大小。你可以通过制作这 200`varchar(max)`列来“解决”这个问题，但想到这一点实际上让我不寒而栗。

# jquery - 在选择器中访问 $.data()

> ID：15313008
> 
> 赞同：1
> 
> 时间：2013-03-09T16:23:45.213
> 
> 标签：jquery

我有以下代码：

```
<img class="sth" data-number="1" src="sth.jpg" alt=""> 
```

有几个这样的元素，它们都只是数据数不同。我想对所有元素执行以下操作：

```
$('.sth').attr('src', 'sth' + data('number') + '.jpg'); 
```

这样每个图像都会用自己的编号更改 src。

但是，data('number') 不起作用，$('.sth').data('number') 全部用 sth1.jpg 改变。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:26:45.653

您可以使用[attr()](http://api.jquery.com/attr/#attr-attributeName-functionindex--attr)函数

```
$('.sth').attr('src', function(){
    return 'sth' + $(this).data('number') + '.jpg';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:25:32.693

是的，像这样使用 jquery[`each()`](http://api.jquery.com/jQuery.each/)函数：

```
$('.sth').each(function(){
    $(this).attr('src', 'sth' + $(this).data('number') + '.jpg');
}); 
```

它将在`.sth`选择器匹配的每个元素上执行。

# java - 将 System.out 返回到字符串

> ID：15313009
> 
> 赞同：0
> 
> 时间：2013-03-09T16:23:51.127
> 
> 标签：java, sparql, jena, owl, protege

我在使用 protege 3.x 创建的 OWL 'ressu.owl' 文件上查询了 Sparql。我必须指出将结果集转换为像 JTextArea 这样可用的东西`ResultSetFormatter()`

我这样用

```
ResultSetFormatter.out(System.out, results, query) ; 
```

它在 Netbeans 的控制台中给了我这个结果：

![在此处输入图像描述](../Images/52253bceeef4cfe19bf7e74a5ed822b1.png)

但是当我尝试将 System.out 返回到 String ::

```
com.hp.hpl.jena.query.ResultSet results = qe.execSelect();
ResultSetFormatter.out(System.out, results, query) ;
ByteArrayOutputStream go = new ByteArrayOutputStream ();
ResultSetFormatter.out((OutputStream)go ,results, query);
String result = go.toString();
jTextArea1.setText(result); 
```

它只在 JtextArea 中显示

```
---------------------------------------------------------------
| hasnamefonctioncontrainte        | hasnamefonctionprincipale 
=============================================================== 
```

帮助 非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:23:33.673

`result`是一个迭代器。

你打印出来的

```
ResultSetFormatter.out(System.out, results, query) ; 
```

所以现在你在迭代器的末尾和第二次调用：

```
ResultSetFormatter.out((OutputStream)go ,results, query); 
```

从该点（结束）迭代，因此没有行。

尝试`ResultSetFactory.copyResults`获得一个可以倒带的结果集（或者只是不打印出来）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:38:10.277

这不是你应该这样做的。
我建议您创建一个包装 ByteArrayOutputStream 的 PrintStream，方法如下：

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
PrintStream ps = new PrintStream(baos); 
```

然后将打印流传递给“out”的调用：

```
ResultSetFormatter.out(ps, results, query) ; 
```

然后尝试从字节数组输出流创建一个字符串：

```
String s = new String(baos.toByteArray(), "UTF-8"); 
```

并执行

```
System.out.println(s); 
```

# .net - WebBrowser 控件 - 更改 JavaScript

> ID：15313011
> 
> 赞同：0
> 
> 时间：2013-03-09T16:23:53.937
> 
> 标签：.net, vb.net, webbrowser-control

好的，我的程序遇到了一些我想阻止/重定向的 javascript：

```
<SCRIPT language="Javascript">

<!--

var sWidth = screen.availWidth-10;

var sHeight = screen.availHeight-50;

var demo=window.open('/url/path/to/open', '', 'scrollbars,status,width=' + sWidth +    ',height=' + sHeight);

window.opener = top;

//opener.close();

window.open("javascript:'<script>window.close()</script>'", "_self"); 

//-->

</SCRIPT> 
```

发生这种情况时，我想阻止这些操作，并将我的 webbrowser 控件重定向到“/url/path/to/open”，以便它在同一个窗口中打开。我认为它与 webbrowser.document 有关，我需要转储文档，检查 JS，然后一旦发现将其处理回控件，但我不完全确定。有人有想法么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T12:25:11.697

以下代码有助于在新窗口事件上处理此问题：

```
 If sender.documenttext.contains("window.open") Then
        e.Cancel = True
        WebBrowser1.Navigate("/url/path/to/open") 'plug in the new window url as string 
    End If 
```

# opencv - 包括 .h 文件 OpenCV

> ID：15313013
> 
> 赞同：0
> 
> 时间：2013-03-09T16:24:20.813
> 
> 标签：opencv, header, include

我已阅读相关问题，但我无法解决我的问题。

我正在尝试在树莓派上编译 OpenCV C++ 代码。

OpenCV 需要包含 cv.h。当我尝试编译时，我得到：

“致命错误：cv.h：没有这样的文件或目录。”

我试过这些：

```
g++ -c -Ihome/pi/OpenCV-2.3.1/include/opencv file.cpp
g++ -c -Ipi/OpenCV-2.3.1/include/opencv file.cpp
g++ -c -IOpenCV-2.3.1/include/opencv file.cpp 
```

你们有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:14:42.680

This is a general question and not related only to OpenCV. For the general problem of including any header file 1\. Try to see if the file is really at the included directory or no 2\. Try to look for it in the folder

# ios - 是否可以在不着色图标的情况下为 TabBar 着色？

> ID：15313017
> 
> 赞同：1
> 
> 时间：2013-03-09T16:25:10.647
> 
> 标签：ios

我的应用设计师想要一个银色标签栏，我通过设置色调来实现它，这很好用：

![在此处输入图像描述](../Images/f1803151d008ad682aa14174abef4a2f.png)

但这也以难以看到的方式对标签栏图标进行着色，所以我希望能够控制这些图标的颜色，但我不知道如何。我尝试过使用黑色图标和灰色图标，但它们在标签栏中的显示相同。以下是源图像：

![黑房子图标](../Images/9e518666576a41f28155bc6321ebeb52.png) ![灰色的房子图标](../Images/e9c580c23b4d3f05cedbb8c48e716d62.png)

但它们在标签栏中的显示完全相同，即与标签栏本身相同的银色，或者如果选择了标签，则为蓝色。（我在这里显示主页图标，但其他图标也是如此。）

那么如何为标签栏着色但控制图标颜色？您可以在标签栏中使用全彩图标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:46:48.247

您无法更改图标的色调`UITabBarItem`，但可以将图像设置为选中和未选中状态：

```
[self.tabBarItem setFinishedSelectedImage:[UIImage imageNamed@"home-selected"]
              withFinishedUnselectedImage:[UIImage imageNamed@"home-unselected"]; 
```

# vb.net - Web Request 是一种类型，不能用作表达式

> ID：15313018
> 
> 赞同：0
> 
> 时间：2013-03-09T16:25:15.870
> 
> 标签：vb.net, httpwebrequest, windows-phone-8, webbrowser-control, windows-phone

我正在为 Windows Phone 制作一个应用程序，因为我需要一些保存在 Web 浏览器控件中的登录 cookie，所以我使用这里的代码：[Grabing Cookies in Web Browser Control - WP7](https://stackoverflow.com/questions/4212713/grabbing-cookies-in-web-browser-control-wp7) to create a HTTPWebRequest and get some JSON data for parsing但我在这段代码的最后一行收到两个错误

```
 Dim browser = New WebBrowser()
    Dim brwhttp = GetType(WebRequestCreator).GetProperty("BrowserHttp")
    Dim requestFactory = TryCast(brwhttp.GetValue(Browser, Nothing), IWebRequestCreate)
    Dim uri = New Uri("some-url")
    Dim req = requestFactory.Create(uri)
    req.Method = "GET"
    req.BeginGetResponse(New AsyncCallback(request_CallBack), WebRequest) 
```

(1)。'WebRequest' 是一种类型，不能用作表达式。(2)。委托“System.AsyncCallback”需要一个“AddressOf”表达式或 lambda 表达式作为其构造函数的唯一参数。

怎么修？

更新 1：通过在“request_CallBack”之前添加“地址”来修复错误 (2)，但错误 (1) 仍然存在。更新 2：修复了所有错误，但没有得到任何响应（空）。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:47:20.640

问题是两个用线做`req.BeginGetResponse(New AsyncCallback(request_CallBack), WebRequest)`这有两个问题。

1.  VB.Net 没有真正的一流功能，因此您必须使用`AddressOf`运算符来创建委托。编译器还将推断委托类型，因此您不需要构造函数
2.  BeginGetResponse 将状态对象作为第二个参数，而不是类型表达式。这是您在回调中需要的任何内容

所以：

```
req.BeginGetResponse(AddressOf request_CallBack, Nothing) 
```

如果您需要将类型传递给请求回调，请使用

```
req.BeginGetResponse(AddressOf request_CallBack, GetType(WebRequest)) 
```

但是，这看起来像是复制更改，您想要的可能是

```
req.BeginGetResponse(AddressOf request_CallBack, req) 
```

# python - Python 使用字符串对文本块进行编码

> ID：15313025
> 
> 赞同：-4
> 
> 时间：2013-03-09T16:25:26.060
> 
> 标签：python, encryption, encoding

**我提出的问题是：**
“对于文本块的编码，使用字符串比使用数字更容易，以避免前导零出现问题。
因此，我们需要一个这样的函数`code_digit(n, key)`，它可以使用字符而不是数字。
为此，编写一个函数`code_char(char, key)`，除了它的参数是字符之外，它的工作方式类似`code_digit(n, key)`，这两个字符都假定在 '0' 到 '9' 的范围内，而不是整数，并且它返回一个字符。

所以例如

```
￼￼￼￼￼￼￼&gt;>> code_char('1', '2')    
'3' 
```

我的代码

```
def code_char(char, key):
    ichar = int(char)
    ikey = int(key)
    print(ichar+ikey) 
```

这是我得到的最远的地方，但引号不存在。

```
>>> code_char('1', '2')
3 
```

任何帮助，将不胜感激！
`code_digit`功能如下：

```
def code_digit(n, key):
    result = n + key
    mod = result%10
    print (mod) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:46:28.800

您在代码上做错了两件事：

*   您正在打印结果而不是返回它。此外，打印`chr`或`str`不要在其周围添加引号。
*   您永远不会将结果转换回 a `chr`or `str`。

所以，你的代码应该是这样的：

```
def code_char(char, key):
    ichar = int(char)
    ikey = int(key)
    return str(ichar+ikey) 
```

或者

```
def code_char(char, key):
    ichar = int(char)
    ikey = int(key)
    return chr(ord('0') + ichar+ikey) 
```

# mysql - MySQL查询订购两列，一个ASC另一个DESC

> ID：15313043
> 
> 赞同：19
> 
> 时间：2013-03-09T16:26:37.273
> 
> 标签：mysql, sql, phpmyadmin

我正在尝试准备一个主题明智的优点列表。我正在使用这个`mysql query`：

```
SELECT * 
FROM results 
ORDER BY qid ASC,
    marks DESC 
```

结果是：

![在此处输入图像描述](../Images/fa833c4c8ca6b7859ea5ccf9b30f6afe.png)

但我需要的是这样的（查看标记列，我需要获取相同`qid`的行，按 排序`marks`）：

![在此处输入图像描述](../Images/05a517fc7a8a8efbfda8e6ea4d955721.png)

请任何人帮助我。

**更新：** 这是`result.sql`在您的电脑中创建表格的文件。

```
-- phpMyAdmin SQL Dump
-- version 3.5.2.2
-- http://www.phpmyadmin.net
--
-- Host: 127.0.0.1
-- Generation Time: Mar 09, 2013 at 05:40 PM
-- Server version: 5.5.27
-- PHP Version: 5.4.7

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;

--
-- Database: `ges_omeca`
--

-- --------------------------------------------------------

--
-- Table structure for table `results`
--

CREATE TABLE IF NOT EXISTS `results` (
  `exam_id` int(11) NOT NULL AUTO_INCREMENT,
  `sid` varchar(50) NOT NULL,
  `qid` varchar(100) NOT NULL,
  `corrects` int(3) NOT NULL,
  `total_qs` int(3) NOT NULL,
  `marks` float NOT NULL,
  `date_time` datetime NOT NULL COMMENT 'DateTime when user submits the answer script.',
  PRIMARY KEY (`exam_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=14 ;

--
-- Dumping data for table `results`
--

INSERT INTO `results` (`exam_id`, `sid`, `qid`, `corrects`, `total_qs`, `marks`, `date_time`) VALUES
(1, 'guest', 'EN_(Set-B)_(07.02.13)', 37, 40, 36.25, '2023-02-13 01:10:00'),
(2, 'guest', 'EN_(Set-B)_(07.02.13)', 11, 40, 10.25, '2013-02-23 01:56:58'),
(3, 'guest', 'P1_(Set-D)_(10.02.13)', 2, 100, 36.25, '2013-02-23 03:42:57'),
(4, 'guest', 'P1_(Set-B)_(09.02.13)', 5, 40, 5, '2013-02-23 03:46:59'),
(5, 'guest', 'EN_(Set-A)_(07.02.13)', 1, 40, 0.25, '2013-02-23 04:46:59'),
(6, 'guest', 'EN_(Set-A)_(07.02.13)', 6, 40, 5.5, '2013-02-23 04:59:59'),
(7, 'guest', 'P1_(Set-D)_(10.02.13)', 10, 100, 9.25, '2013-02-24 08:57:17'),
(8, 'guest', 'P1_(Set-B)_(09.02.13)', 5, 40, 5, '2013-02-24 01:23:50'),
(9, 'guest', 'EN_(Set-D)_(07.02.13)', 0, 40, -0.5, '2013-02-25 12:45:33'),
(10, 'guest', 'EN_(Set-D)_(07.02.13)', 2, 40, 1.5, '2013-02-25 01:45:38'),
(11, 'guest', 'P1_(Set-B)_(09.02.13)', 2, 40, 2, '2013-02-25 04:06:28'),
(12, 'guest', 'EN_(Set-C)_(07.02.13)', 5, 40, 4.5, '2013-02-25 04:42:27'),
(13, 'guest', 'P1_(Set-C)_(10.02.13)', 6, 40, 6, '2013-02-25 05:00:57');

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-09T18:21:19.220

这正是您需要的：

```
SELECT * 
FROM results
ORDER BY SUBSTRING( qid
FROM 1 
FOR 1 ) ASC , marks DESC 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:33:13.257

我不太了解您的问题，但查看结果时，我注意到记录按`qid`包含`EN`在结果列表中的第一个进行排序。

试试这个，

```
SELECT  *
FROM    tableName
ORDER   BY  CASE WHEN qid LIKE 'EN%' THEN 0 
                WHEN qid LIKE 'P1%' THEN 1
                ELSE 2
            END ASC,
            marks DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-26T08:35:23.217

这可能会帮助您：

```
 SELECT *
    FROM results
ORDER BY SUBSTRING(qid FROM 1 FOR 9) ASC,
         marks DESC 
```

# html - 覆盖图像的背景不透明度

> ID：15313045
> 
> 赞同：0
> 
> 时间：2013-03-09T16:26:45.400
> 
> 标签：html, css, image, transparency, opacity

我想改变我的图像的不透明度。现在它只是继承了它母亲的不透明度设置，但我想让它不那么透明。简而言之：在[http://quaaoutlodge.com](http://quaaoutlodge.com)的右侧有“Jack Sam's Restaurant & Lounge”图片。我想让它比背景更不透明。如果我更改 .rteright 的不透明度设置，我似乎只能使其更透明，但不能更少……我怎样才能实现我想要的？请指教！代码：其中“pageBorder”为 sert tio opacity 0.7

```
<div id="pageBorder" class="noborder">
<p class="rteright" style=""><a href="http://quaaoutlodge.com/content/jack-sams-restaurant-and-lounge"><img alt="Jack Sam's Restaurant and Lounge" src="http://quaaoutlodge.com/sites/default/files/jack-sams-lounge--3-_0.jpg" style="text-align: right; width: 200px; height: 133px; float: right; border:1px #000 solid;" /><em>Jack Sam's Restaurant &amp; Lounge</em></a></p>
</div> 
```

谢谢你，罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:31:27.990

使用`rgba()`值仅使元素的背景透明。`opacity`使所有子元素透明，而不仅仅是父元素。

就像是：

```
background: rgba(128,102,51,0.5); 
```

值如下：

```
background: rgba(red, green, blue, opacity); 
```

# mysql - 按 MYSQL 中搜索最多的单词排序

> ID：15313049
> 
> 赞同：0
> 
> 时间：2013-03-09T16:26:56.103
> 
> 标签：mysql, sql, search-engine

我设计了一个简单的网站，使用户可以在 MYSQL 数据库上进行搜索。搜索方法也很简单：用户在文本字段中输入一个单词，然后在数据库中搜索。现在我想在这个网站上包含一个搜索最多的单词的表格，直到现在我才找到任何东西，除了这句话：

```
select distinct column
       , count(1) as total
    from dept
group by column
order by total desc
   limit 5 
```

但这并没有检索到我想要的东西。你知道我是如何得到这个结果的吗？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:35:54.113

一个小型网站的简单示例：

每次搜索后，向表中添加一行`searched`。添加时间戳的奖励积分。

```
insert into searched (keyword, timestamp) values ('foo', 1234567890); 
```

从那里：

```
select keyword, count(*) as total from searched
  group by keyword order by total desc limit 5; 
```

当然，对于这样简单的事情，我会使用 redis。

# html - vbulletin 论坛的 CSS 问题

> ID：15313056
> 
> 赞同：0
> 
> 时间：2013-03-09T00:14:54.067
> 
> 标签：html, css, vbulletin

我正在尝试将签名正上方的“喜欢”灰色条移动到右上角带有小图标的“喜欢”链接的左侧。

示例： [http ://www.talkjesus.com/bible-study-hall/44722-antimonianism.html#post220422](http://www.talkjesus.com/bible-study-hall/44722-antimonianism.html#post220422)

现在的css代码

```
.vbseo_buttons .vbseo_liked {
    background: rgba(46, 53, 57, .8);
        color: #fff;
        border: 0;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    border-radius: 3px; 
    clear: both;
    display: block;
    padding: 12px;
    margin: 5px 30px;
    <vb:if condition="$stylevar['textdirection'] == 'rtl'">
        background-position: right;
    </vb:if>
} 
```

如果我将 display: block 更改为 display: inline，它会将其移动到同一行，如下所示：http: [//i49.tinypic.com/348lonc.png](http://i49.tinypic.com/348lonc.png)

但是，它丢失了 margin 属性和 width 属性。我尝试通过添加宽度来固定宽度：50%; 但这并没有改变。如何在固定边距和宽度时保持内联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:30:11.223

你的意思是你想要最右上角的灰色条，它显示线程对心脏的喜欢的数量？要保持边距，您应该只浮动灰色框

向左浮动

```
.vbseo_buttons .vbseo_liked {
background: rgba(46,53,57,.8);
color: #fff;
border: 0;
-moz-border-radius: 3px;
-webkit-border-radius: 3px;
border-radius: 3px;
clear: both;
padding: 12px;
margin: 5px 30px;
float: left;
} 
```

要将它一直移动到右上角，您需要修改模板，它最终会看起来像这样，但是`after_content`如果只移动 vbseo_liked 容器，则需要移动整个 div 或根据需要重新设置样式。并删除 clear:both 样式。

![在此处输入图像描述](../Images/cea1a2532a7ac052a736509ffd2436d8.png)

# java - 消除 Java 排序比较中的越界错误

> ID：15313062
> 
> 赞同：1
> 
> 时间：2013-03-09T16:28:02.347
> 
> 标签：java, arrays, sorting, mergesort

我目前正在实现 InsertionSort 和 MergeSort 来比较它们的操作，我之前已经实现了 MergeSort，但我正在尝试我当前算法教科书中的版本。我在注释标记的行（第 58 行）上遇到数组越界错误，一旦它通过它，我假设也可能在第 60 行。这是 T 书中的算法，但我找不到我的错误来自哪里。代码包括简单的主要测试方法，包括完整的代码，因此它是可复制和可运行的。

```
package algsortcomp;

public class AlgSortComp {

public static void InsertionSort(int[] data){
    //Sorts given array by Insertion Sort
    //Input: an array data of ints
    //Output: array data sorted in nondecreasing 
    int v, j;
    for (int i = 1; i<data.length; i++){
        v = data[i];
        j = i - 1;
        while (j >= 0 && data[j] > v){
            data[j+1] = data[j--];
        }
        data[j+1]=v;
    }
}

public static void MergeSort(int[] data){
    //Sorts array data by recursive mergesort
    //Input: an array data of ints
    //Output: array data sorted in nondecreasing order
    int dlen = data.length;
    int mid = dlen/2;

    int[] b = new int[mid];
    int[] c = new int[dlen-mid];

    if (dlen > 1){
       System.arraycopy(data, 0, b, 0, mid-1);
       System.arraycopy(data, mid, c, 0, dlen-mid);
       MergeSort(b);
       MergeSort(c);
       Merge(b, c, data);
   }         
}

public static void Merge(int[] b, int[] c, int[] data){
    //Merges two sorted arrays into one sorted array
    //Input: Arrays b and c both sorted
    //Output: Sorted array data of elements b and c.
    int p = b.length, q = c.length, dlen = data.length;
    int i=0, j=0, k=0;
    while (i<p && j<q){
        if (b[i] <= c[j])
            data[k] = b[i++];
        else
            data[k]=c[j++];
        k++;
    }
    if (i == p)
        System.arraycopy(c, j, data, k, dlen-1); //<---currently getting Array out of bounds here, tried replacing with
    else                                         //dlen-k and error is gone but array returned is all [0,0,...,0]
        System.arraycopy(b, i, data, k, dlen-1);
}

public static void main(String[] args) {
    int [] test = {3, 5, 23, 56, 1, 12, 32};
    String arraystr = java.util.Arrays.toString(test);
    System.out.println(arraystr);

    //InsertionSort(test);
    MergeSort(test);
    System.out.println(java.util.Arrays.toString(test));
}

} 
```

班上还没有人醒着，所以我请你们谦虚的人多注意一下，以发现我的错误。提前致谢。

编辑：我也忘记了如何仅通过 Arrays.toString() 调用 java.util.Arrays.toString()。我尝试导入 java.util.Arrays，但没有奏效，而且自接触 java/arrays 以来已经有一段时间了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:37:18.590

`System.arraycopy`将要复制的元素数作为最后一个参数。在这里，您要从 c 中复制剩余项目的数量，应该是 qj。同样，下一个案例的 pi。

你`import java.util.Arrays` **在**排队`package`吗？

另外，将其更改`System.arraycopy(data, 0, b, 0, mid-1);`为

`System.arraycopy(data, 0, b, 0, mid);`

# javascript - 如何使用 JavaScript 在 Pastebin 中粘贴文本

> ID：15313063
> 
> 赞同：7
> 
> 时间：2013-03-09T16:28:15.980
> 
> 标签：javascript, greasemonkey, pastebin, tampermonkey

我正在使用 Tampermonkey（与 Greasemonkey 相同，但用于 Chrome）来制作脚本。这个想法是将我写的文本粘贴到Pastebin中。文字是在其他网站上写的。我看到我可以使用 GM_xmlhttpRequest 做到这一点，但它不起作用。这是我的代码：

```
 var charac = new Array(50);
    var i =0
function callkeydownhandler(evnt) {

   var ev = (evnt) ? evnt : event;
   var code=(ev.which) ? ev.which : event.keyCode;
   charac[i]= code;
        i++;
}
if (window.document.addEventListener) {
   window.document.addEventListener("keydown", callkeydownhandler, false);
} else {
   window.document.attachEvent("onkeydown", callkeydownhandler);
}

GM_xmlhttpRequest({
  method: "POST",
  url: "http://pastebin.com/post.php",
  data: "user=mysuser&password=mypassword", //as you can imagine I use my credentials
  headers: {
    "Content-Type": "application/x-www-form-urlencoded"
  },
  onload: function(response) {
    alert("posted");
    document.getElementById("paste_code").value+=charac[i];
    document.getElementById("submit").click();
  }
}); 
```

我确定最后两行无法正常工作，但我不知道为什么。第一个功能完美。

我在做什么坏事？我该如何解决？

谢谢！=)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T20:54:01.293

我开发了一个简单的 API，可以完全满足您的需求。

[包括：坚持 BETA](http://userscripts.org/scripts/show/154322)

Pastebin 有一个 API，但它目前不支持编辑帖子。
这就是为什么我需要创建两个特定于 pastebin 的不同“服务”... PASTEBIN 和 PASTEBIN2

如果您不需要编辑，请使用 PASTEBIN。否则，使用 PASTEBIN2。

您需要的第一件事是[唯一的开发人员 API 密钥](http://pastebin.com/api#1)。
然后您将需要一个[User API Key](http://pastebin.com/api/api_user_key.html)。

以下是我的脚本的一些使用示例：

**创建新帖子**

```
Persist.write({
    service : "PASTEBIN",
    value   : "...",
    data    : {
        api_dev_key     : "...",
        api_user_key    : "...",
    },
    onload  : function (result) {
        alert("http://pastebin.com/" + result.key);
    }
}); 
```

**编辑现有帖子**

```
Persist.write({
    service : "PASTEBIN2",
    mode    : -1,   // prepend
    key     : "..."
    value   : "...",
    data    : {
        api_dev_key     : "...",
        api_user_key    : "...",
    },
    onload  : function (result) {
        alert("Post #" + result.key + "\nNew value: " + result.value);
    }
}); 
```

**阅读现有帖子**

```
Persist.read({
    service : "PASTEBIN",
    key     : "..."
    data    : {
        api_dev_key     : "...",
        api_user_key    : "...",
    },
    onload  : function (result) {
        alert("\nValue: " + result.value);
    }
}); 
```

# html - 方形项目符号列表错误的字体大小与正文 css

> ID：15313067
> 
> 赞同：1
> 
> 时间：2013-03-09T16:28:42.063
> 
> 标签：html, css, html-lists

我的侧面菜单中有一个列表，设置似乎没有读取样式表中 .body 类的 css -

```
ul.develop 
{
list-style-type:square;
color: #FFF;
margin:0;
padding:0;
margin-top:0.6cm;
}

li.develop
{   
font-family: 'Arial', sans-serif;
font-size: 11px;
font-weight: normal;
color:#fff;
} 
```

我的身体课是——

```
body {
font-family: 'Arial', sans-serif;
font-size: 12px;
font-weight: normal;
} 
```

然后列表默认为正文类 12px，如果我将正文更改为 11px，则列表很好，但我想为现场副本的主要内容的实际正文保留 12px。

我尝试使用 !important 但不确定是否正确？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:34:02.373

我想你可能没有，试着把你的字体规则放在规则上，`.develop`因为它们将适用于下面的 's。`ul``li``ul.develop``li`

```
ul.develop 
{
    list-style-type:square;
    color: #FFF;
    margin:0;
    padding:0;
    margin-top:0.6cm;

    font-family: 'Arial', sans-serif;
    font-size: 11px;
    font-weight: normal;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:35:34.510

将与“body”相关的 CSS 放在其他样式的上方/之前。它自上而下阅读。希望有效！

# sparql - 将 SPARQL 查询限制为一个数据集

> ID：15313071
> 
> 赞同：2
> 
> 时间：2013-03-09T16:28:55.357
> 
> 标签：sparql

我正在使用以下 SPARQL 查询，这是[我机构 SPARQL 端点](http://sparql.data.southampton.ac.uk/?query=PREFIX+skos%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2004%2F02%2Fskos%2Fcore%23%3E%0D%0APREFIX+soton%3A+%3Chttp%3A%2F%2Fid.southampton.ac.uk%2Fns%2F%3E%0D%0APREFIX+rdfs%3A+%3Chttp%3A%2F%2Fwww.w3.org%2F2000%2F01%2Frdf-schema%23%3E%0D%0APREFIX+org%3A+%3Chttp%3A%2F%2Fwww.w3.org%2Fns%2Forg%23%3E%0D%0APREFIX+spacerel%3A+%3Chttp%3A%2F%2Fdata.ordnancesurvey.co.uk%2Fontology%2Fspatialrelations%2F%3E%0D%0A%0D%0ASELECT+DISTINCT+%3Fbuilding_number+%3Fname+%3Fsite_name+WHERE+%7B%0D%0A++%3Fsite+a+org%3ASite+%3B%0D%0A++++++++rdfs%3Alabel+%3Fsite_name.%0D%0A%0D%0A++%3Fbuilding+spacerel%3Awithin+%3Fsite+%3B%0D%0A++++++++++++skos%3Anotation+%3Fbuilding_number+%3B%0D%0A++++++++++++rdfs%3Alabel+%3Fname+.%0D%0A%0D%0A%7D+ORDER+BY+%3Fbuilding_number&output=htmltab&jsonp=&show_inline=1#)的基于 Web 端的示例；

```
SELECT ?building_number ?name ?occupants WHERE {
  ?site a org:Site ;
        rdfs:label "Highfield Campus" .

  ?building spacerel:within ?site ;
            skos:notation ?building_number ;
            rdfs:label ?name .

  OPTIONAL {
    ?building soton:buildingOccupants ?occ .
    ?occ rdfs:label ?occupants .
  } .
} ORDER BY ?name 
```

问题是，除了从我感兴趣的数据集“建筑物和地点”获取数据外，它还从“设施和设备”数据集中获取数据，这是不相关的. 如果您点击链接，您应该会看到这一点。

我怀疑这个例子可能早于设施和设备数据集的添加，但即使我已经对 SPARQL 进行了研究，我也看不出一个明确的方法来定义要包含哪些数据集。

谁能推荐一个起点来限制它只显示“建筑物”，或者更具体地说，是“建筑物和地点”数据集的结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:16:27.540

首先，你真的需要使用 SELECT DISTINCT，否则你会得到重复的结果。

要回答您的问题，您可以使用 GRAPH { ... } 过滤 SPARQL 查询的某些部分，以仅匹配来自特定数据集的数据。这仅在 SPARQL 端点被划分为 GRAPH（这个是）时才有效。您要求的解决方案不是最佳选择，因为它假定“地点”数据集中的站点内的事物将始终被限制在建筑物中......这是有风险的——因为它最终可能会在某个时候包含树木和路标在将来。

第一步是找出正在使用的图表：

```
SELECT DISTINCT ?g1 ?building_number ?name ?occupants WHERE {
  ?site a org:Site ;
        rdfs:label "Highfield Campus" .

  GRAPH ?g1 { ?building spacerel:within ?site ;
            skos:notation ?building_number ;
            rdfs:label ?name .
            }

  OPTIONAL {
    ?building soton:buildingOccupants ?occ .
    ?occ rdfs:label ?occupants .
  } .
} ORDER BY ?name 
```

在这里试试：http: [//is.gd/WdRAGX](http://is.gd/WdRAGX)

从这里你可以看到[http://id.southampton.ac.uk/dataset/places/latest](http://id.southampton.ac.uk/dataset/places/latest)和[http://id.southampton.ac.uk/dataset/places/facilities](http://id.southampton.ac.uk/dataset/places/facilities)是两个相关的。

要根据“地点”图仅在站点内查找事物，请使用： SELECT DISTINCT ?building_number ?name ?occupants WHERE { ?site a org:Site ; rdfs:label “海菲尔德校园”。

```
 GRAPH <http://id.southampton.ac.uk/dataset/places/latest> { 
        ?building spacerel:within ?site ;
            skos:notation ?building_number ;
            rdfs:label ?name .
            }

  OPTIONAL {
    ?building soton:buildingOccupants ?occ .
    ?occ rdfs:label ?occupants .
  } .
} ORDER BY ?name 
```

* * *

替代解决方案：

* * *

**使用 rdf:type**

上面我已经回答了你的问题，但这不是你问题的答案。这个解决方案更具语义，因为它实际上说“只给我校园内的建筑物”，这就是你的真正意思。

除了按图形过滤，这不是很“语义”，您还可以将“建筑”限制为研究设施不是的“建筑”类。它们有时仍被列为“在”站点内。通常当大学只公布他们在哪个校区而不是哪个大楼时。

```
?building a rooms:Building 
```

* * *

**使用过滤器**

在极端情况下，您可能没有不同 GRAPHS 中的数据，并且可能没有优雅的关系来过滤您的结果。在这种情况下，您可以使用 FILTER 并将构建 URI 转换为字符串并使用正则表达式来匹配可接受的：

```
FILTER regex(str(?building), "^http://id.southampton.ac.uk/building/") 
```

这是迄今为止最糟糕的选择，如果必须，请不要使用它。

* * *

**腰带和大括号**

您可以一起使用这些限制中的任何一个，并结合限制 GRAPH 以及确保所有 ?buildings 确实是建筑物将是我推荐的解决方案。

# web-applications - 混合标签的问题

> ID：15313074
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:29:02.957
> 
> 标签：web-applications

如何使 html 标签与其他框架标签兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:38:48.683

您需要查看 Struts2[主题](http://struts.apache.org/release/2.2.x/docs/struts-2-themes.html)，默认 ("xhtml") 将表单放入表格中。还有一种叫做“css_xhtml”的，它使用 CSS 进行格式化。另一种叫做“simple”，它只是添加元素，但字段消息没有显示在 simple 上。

为了更改主题，您需要在 struts.xml 文件中指定默认值，方法是：

```
<constant name="struts.ui.theme" value="css_xhtml" /> (for example) 
```

您还可以实现自定义主题，因为它们只是一组 Freemarker 模板。如果您想沿着这条路线走，[这应该会有所帮助。](http://www.mkyong.com/struts2/working-with-struts-2-theme-template/)

# javascript - 如何使添加到购物车按钮直接进入购物车

> ID：15313076
> 
> 赞同：1
> 
> 时间：2013-03-08T22:13:58.120
> 
> 标签：javascript, shopping-cart

我正在尝试为我正在自定义[http://radiantiger.bigcartel.com/product/hhhgtf](http://radiantiger.bigcartel.com/product/hhhgtf)的网站编辑“添加到购物车”按钮。我希望客户单击“添加到购物车”按钮并直接进入购物车。

1) 我知道我必须编辑添加到购物车按钮的 javascript，我该怎么做？& 我应该使用什么代码？

2）如何从侧边栏的左上角移动“购物车按钮”并使其与我的“添加到购物车按钮”内联，如下所示：[http ://dl.dropbox.com/u/90031565/Fullscreen%20capture %20382013%2050354%20PM.jpg](http://dl.dropbox.com/u/90031565/Fullscreen%20capture%20382013%2050354%20PM.jpg)

我尝试将“购物车按钮”与“添加到购物车按钮”放在同一个 div 中，但它失去了购物车功能中内容的实时显示。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:11:16.013

您需要将 cart_nav_list 从边栏移到 ID add_cart 中。

因此，例如，您的代码应如下所示：

```
<div id="add_cart">
 <button class="button" type="submit" name="submit" id="add_to_cart">Add to Cart</button>
  <ul class="clearfix" id="cart_nav_list">
   <li id="cart_button">
    <a id="open_cart" href="/cart">Cart
     <div class="clearfix" id="cart_info">
      <span id="cart_count">0</span>
      <span id="cart_divider">|</span>
      <span id="cart_total"><span class="currency_sign">$</span>0.00</span>
     </div>
    </a>
   </li>
  </ul>
 </div> 
```

附上屏幕截图以显示更多信息，您可以在其中找到这些元素。要查看我粘贴的信息，请安装 firebug。

[html5 向右移动购物车 http://www.bybe.net/downloads/html5-move-cart-rightside.png](http://www.bybe.net/downloads/html5-move-cart-rightside.png)

此外，为了让元素并排工作，您需要对样式表进行次要版本，如下所示：

```
#add_cart button, #cart_nav_list {
 float:left;
} 
```

# iframe - ipad上额外的谷歌地图按钮什么都不做

> ID：15313081
> 
> 赞同：1
> 
> 时间：2013-02-18T12:43:29.260
> 
> 标签：iframe, google-maps, ipad

我正在使用谷歌地图 iframe 在他的网页上显示我客户的位置。工作正常，但在 Ipad 上查看时，Google 服务器显然会发送不同版本的地图。它看起来像这样：

![在此处输入图像描述](../Images/8e24a7b2e7f426732f4a2130760b2929.png)

现在，这不是问题，但是底部的两个按钮（我将它们标记为红色），我假设它们应该允许路由或其他东西，当被点击时不做任何事情？！

有谁知道我的问题可能是什么？以及如何让这些按钮工作（首选解决方案）或让它们消失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:45:12.963

`overflow:hidden`您可以通过减小 iFrame 的大小（高度）并添加样式来摆脱它们。

他们也不适合我。我看到了这个错误。但这并不是谷歌第一次在移动设备上搞砸了（例如谷歌新闻不知何故认为我的电脑是平板电脑），所以我不会太担心。最终希望他们能弄清楚。

# javascript - 有没有办法在重新加载页面时覆盖浏览器重新发送表单提示？

> ID：15313084
> 
> 赞同：0
> 
> 时间：2013-03-09T16:29:38.680
> 
> 标签：javascript, forms, form-submit, reload, prompt

我有一个带有表格的页面，它以四个视图显示数据。用户可以通过打开弹出窗口来编辑记录。关闭弹出窗口时，我想重新加载页面以反映更新的记录。

所以我这样做：

```
<script type="text/javascript">
    window.onload = function(){
        alert("#blabla#");
        window.opener.location.reload(true);
        self.close();
    }
</script> 
```

它做了它应该做的，但是当父页面重新加载时，我会`prompt`问我是否要重新发送表单（是）。

**问题**：
有没有办法覆盖这个提示？我几乎被页面设计所困扰，所以我不能做任何 AJAX/事件行为等来触发表的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:35:47.797

我认为主页（您正在重新加载的页面）本身就是对表单提交的响应（这就是您收到消息的原因）。

如果像大多数搜索结果页面一样，它允许您重复搜索（通过在结果页面上提交表单），您可以提交该表单而不是重新加载。如果没有，您可以在页面上包含一个隐藏的表单（带有相关的搜索条件）以明确实现该目的。

然后您的 JavaScript 更改为：

```
window.onload = function(){
    alert("#blabla#");
    window.opener.reloadForm.submit();
    self.close();
} 
```

...重复搜索`reloadForm`的元素`id`在哪里。`form`

但是，在搜索结果中动态插入行*而不*重新加载页面可能会更好......

# video - 使用 windows 媒体播放器插件嵌入 MP4 视频

> ID：15313085
> 
> 赞同：1
> 
> 时间：2013-02-20T15:45:08.097
> 
> 标签：video, embed

我想将 MP4 视频嵌入到我的网页中。起初我将插件设置为 Quicktime 播放器，但电影播放不流畅，所以我决定使用 Windows Media Player 插件。所有这些都有效，除了 WinXP 的用户。有没有让它在WinXP上也能工作的技巧？这是我使用的 HTML：

```
<object classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" width="300" height="150" data="test.mp4" url="test.mp4" type="video/x-ms-asf">
<param name="url" value="test.mp4">
<param name="filename" value="test.mp4">
<param name="autostart" value="1">
<param name="autosize" value="1">
<embed src="test.mp4" type="application/x-mplayer2" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/" width="300" height="150" autostart="true" scale="tofit"></embed>
</object> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:26:17.250

jwplayer 可能是最好的恕我直言 HTML5 视频播放器

[http://www.longtailvideo.com/jw-player/](http://www.longtailvideo.com/jw-player/)

而不是只指定一种视频格式，您将与 mp4、ogg、webm 等一起使用，以便您的视频可以在大多数浏览器和移动设备中加载。

这是带有闪存回退的示例代码

```
<script type="text/javascript" src="/jwplayer/jwplayer.js"></script>

<video height="270" width="480" id="myVideo">
  <source src="/static/bunny.mp4" type="video/mp4">
  <source src="/static/bunny.webm" type="video/webm">
</video>

<script type="text/javascript">
  jwplayer("myVideo").setup({
    modes: [
        { type: 'html5' },
        { type: 'flash', src: '/jwplayer/player.swf' }
    ]
  });
</script> 
```

[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/22644/using-the-html5-video-tag/](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/22644/using-the-html5-video-tag/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T17:06:40.017

使用 HTML5：

```
<video width="300" height="150" controls>
<source src="movie.mp4" type="video/mp4">
 Your browser does not support the video tag.
</video> 
```

[事件示例](http://www.w3schools.com/html/tryit.asp?filename=tryhtml5_video_js_prop)

# c++ - 在 ios 上运行的 IDE

> ID：15313088
> 
> 赞同：3
> 
> 时间：2013-03-09T16:29:47.163
> 
> 标签：c++, ios, c, ide

有没有人找到在 iOS 上编程的 IDE？具体来说，我正在为 C++ 中的 nds 进行编码，但我想知道是否真的有任何 IDE 可以在 iOS 上进行编码。如果有人听说过，请告诉我名字，因为我一直找不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:32:56.953

我知道的最重要的东西是[textastic-code-editor](http://itunes.apple.com/us/app/textastic-code-editor/id383577124?mt=8)，但是现在存在大量应用程序，例如[Code-Editors-For-the-iPad](http://blog.smartbear.com/software-quality/bid/195054/15-Code-Editors-For-the-iPad-For-Free-or-Very-Cheap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:33:27.913

不是专门用于 C++ 的 IDE，但有其他选择：

*   [Codea](http://twolivesleft.com/Codea/)是一款适用于 iPad 的应用程序，可让您在设备上编写 Lua 代码；
*   您可以安装[LLVM-Clang 工具链](http://ininjas.com/repo/debs/clang-llvm_3.1-1_iphoneos-arm.deb)（仅在越狱设备上）以在设备本身上编译 C、C++ 和 Objective-C 代码；
*   实际上，您可以使用任何文本编辑器和/或文件管理器应用程序来编写代码。

# java - 从 SimpleDateFormat 更正我的日期输出

> ID：15313090
> 
> 赞同：1
> 
> 时间：2013-03-09T16:29:57.010
> 
> 标签：java, date

我遇到了一个问题：尝试将 SimpleDateFormat 与用户输入一起使用...

```
public static void main(String[] args) {
try {
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/YYYY",Locale.US);
sdf.setLenient(false);
Scanner myScanner = new Scanner(System.in);
      String myDate;
out.print("Please enter today's date [MM/DD/YYYY]: ");
myDate = myScanner.next();
Date date = sdf.parse(myDate);
out.println("Today is : " + date);
} catch (ParseException e) {    e.printStackTrace();    }
} 
```

结果是这样的：

```
Please enter today's date [MM/DD/YYYY]: 09/21/2008
Today is : Sun Dec 30 00:00:00 EST 2007 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:32:25.180

您应该使用小 y - MM/dd/yyyy。

在处理日期格式问题时，此[链接应该是您的朋友。](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:52:16.643

`new SimpleDateFormat("MM/dd/YYYY",Locale.US);`必须是`new SimpleDateFormat("MM/dd/yyyy",Locale.US);`

*   `YYYY`= 周年
*   `yyyy`= 年

# assembly - 80C188 x86 处理器片选

> ID：15313091
> 
> 赞同：1
> 
> 时间：2013-03-09T16:30:08.703
> 
> 标签：assembly, x86

美好的一天，我刚刚了解了 80C188 x86 芯片和平台，我正在尝试理解一段骨架代码。在我的芯片连接布局中，我的 IO 芯片连接到 PCS1。

但是，在给出的骨架代码中，它是这样的

```
; PACS initial, set the parallel port start from 00H
MOV DX, PACS
MOV AX, 0003H ; Peripheral starting address 00H no READY, No Waits
OUT DX, AX 
```

他们已根据手册将 PACS 寄存器起始地址设置为 0。我不确定他们为什么这样做，因为这意味着它连接到 PCS0..

# php - JSON 数组未填充所有列表视图项

> ID：15313093
> 
> 赞同：0
> 
> 时间：2013-03-09T16:30:16.150
> 
> 标签：php, android, json, listview

我有一个 php 文件，用于将 json 格式的信息发送到 android，这是 php 文件的代码：

```
<?php

$host="localhost";
$user="root";
$pass="";
$dbname="ltc";

$type=$_GET['type'];

$con= mysql_connect($host,$user,$pass);
$BD= mysql_select_db($dbname, $con);

$query=mysql_query("select * from posts where type='".$type."'");
$num=mysql_num_rows($query);

if($num>=1)
{
    while($list=mysql_fetch_assoc($query))
    {

        $output=$list;
        echo json_encode($output);
    }
        mysql_close();
    }
    else
    {
    echo "error";
    }
?> 
```

发送到android的信息如下：

```
{"IDpost":"1","username":"you","FirstN":"Mounzer","LastN":"Yaghi","Content":"test1","Type":"CARS","Dateofp":"2013-03-03"}{"IDpost":"2","username":"boss","FirstN":"Marwan","LastN":"Geha","Content":"test2\r\n","Type":"CARS","Dateofp":"2013-03-05"} 
```

现在在android中，我正在尝试使用json数组填充一些信息的listview，android中的代码是：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;
import android.util.Log;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class Posts extends Activity {
String type,firstname,lastname,email,number,username,content;   
HttpClient httpclient;
HttpPost httppost;
ArrayList<NameValuePair> nameValuePairs;
HttpResponse response;
HttpEntity entity;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        Bundle gotBasket=getIntent().getExtras();
        type=gotBasket.getString("type_post");
       this.setTitle(type);

        setContentView(R.layout.addpost);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

 httpclient = new DefaultHttpClient();
 httpclient = new DefaultHttpClient();
 httppost = new HttpPost("http://192.168.1.38/LTC/Uploadposts.php?type="+type+"");
 try{
 nameValuePairs = new ArrayList<NameValuePair>();
nameValuePairs.add(new BasicNameValuePair("type",type));
nameValuePairs.add(new BasicNameValuePair("FirstN",firstname));
nameValuePairs.add(new BasicNameValuePair("LastN",lastname));
nameValuePairs.add(new BasicNameValuePair("Content",content));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
response = httpclient.execute(httppost);

 if(response.getStatusLine().getStatusCode()==200)
 {

 entity=response.getEntity();
 if(entity !=null)
 {
    InputStream instream=entity.getContent();
 JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));
 //Toast.makeText(getBaseContext(),jsonResponse.toString(),Toast.LENGTH_LONG).show();
 String retUser=jsonResponse.getString("username");
 String retcont=jsonResponse.getString("Content");
 String getf=jsonResponse.getString("FirstN");
String getl=jsonResponse.getString("LastN");
String dop=jsonResponse.getString("Dateofp");

try {
    JSONArray jArray = new JSONArray("["+jsonResponse.toString()+"]");

    int jArrayLength = jArray.length();
    List<String> listContents = new ArrayList<String>(jArrayLength);

    for(int i =0; i<jArray.length(); i++){

        JSONObject json_data = jArray.getJSONObject(i);
        listContents.add(json_data.getString("FirstN")+" "+json_data.getString("LastN")+"                   "+json_data.getString("Dateofp")+"\n\n"+json_data.getString("Content"));

    }

    ListView myListView = (ListView) findViewById(R.id.listView2);
    myListView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listContents));

}catch(JSONException e){
    Log.e("log_tag","Error parsin data "+e.toString());
}

 }}

 }//End of first try

 catch(Exception e)
 {
     Toast.makeText(getBaseContext(), e.toString(),Toast.LENGTH_LONG).show();

 } // End of first catch

    } //End of oncreate bundle

      private static String convertStreamToString(InputStream is)
       {

       BufferedReader reader = new BufferedReader(new InputStreamReader(is));
       StringBuilder sb = new StringBuilder();
       String line = null;
       try
       {

       while ((line = reader.readLine()) != null) {
           sb.append(line + "\n");
       }
       }catch(IOException e)
       {
        e.printStackTrace();
       }
       finally
       {
        try{
            is.close();
        }catch(IOException e)
        {
            e.printStackTrace();
        }
        }return sb.toString();

       }

} //End of Class 
```

关键是，只有数据库表的第一行正在填充列表视图，我的意思是只有列表视图中的第一项正在填充，它应该是两个项目（数据库表中的 2 行）有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:36:15.247

只需移出`json_encode`街区`while`：

```
$output = array();
while ($list = mysql_fetch_assoc($query)) {
    $output[] = $list;
}

echo json_encode($output); 
```

因此，您将所有数据填充到数组中，然后在循环后一次全部发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:04:17.707

好吧，您从我上面看到的内容中返回了无效的 json。执行[dfsq](https://stackoverflow.com/users/949476/dfsq)在 php 代码中所说的操作。在此之后，在您的 java 代码中，您可以将 json 字符串转换为 JSONArray，并且通过使用 getJSONObject 方法，您可以访问数组中的每个对象。

```
JSONArray jsonArray = new JSONArray(convertStreamToString(instream));
int length = jsonArray.length();

for (int i=0; i < length; i++) {
    JSONObject row = jsonArray.getJSONObject(i);

    // Do whatever you want to do with the row object here
} 
```

# hashmap - Go中地图的内存开销

> ID：15313105
> 
> 赞同：9
> 
> 时间：2013-03-09T16:31:36.590
> 
> 标签：hashmap, go

map[byte]byte{0:10} 应该使用至少 2 个字节，一个用于值，一个用于每个键。但是作为每个 hashmap 的实现，每个项目也有一个隐藏的成本。gccgo 和 gc 中 Go 映射中每个条目的内存开销是多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T19:19:28.420

这是 Nick 程序的跨平台重新实现。它包括我认为存在缺陷的更改。它还增加了更多的测量数据点。

**注意**：为了允许更宽的“条目”范围，下面的测量图是`map[int16]byte`。

```
package main

import (
        "fmt"
        "runtime"
        "unsafe"
)

func Alloc() uint64 {
        var stats runtime.MemStats
        runtime.GC()
        runtime.ReadMemStats(&stats)
        return stats.Alloc - uint64(unsafe.Sizeof(hs[0]))*uint64(cap(hs))
}

var hs = []*map[int16]byte{}

func main() {
        hs := []*map[int16]byte{}
        n := 1000
        before := Alloc()
        for i := 0; i < n; i++ {
                h := map[int16]byte{}
                hs = append(hs, &h)
        }
        after := Alloc()
        emptyPerMap := float64(after-before) / float64(n)
        fmt.Printf("Bytes used for %d empty maps: %d, bytes/map %.1f\n", n, after-before, emptyPerMap)
        hs = nil

        k := 1
        for p := 1; p < 16; p++ {
                before = Alloc()
                for i := 0; i < n; i++ {
                        h := map[int16]byte{}
                        for j := 0; j < k; j++ {
                                h[int16(j)] = byte(j)
                        }
                        hs = append(hs, &h)
                }
                after = Alloc()
                fullPerMap := float64(after-before) / float64(n)
                fmt.Printf("Bytes used for %d maps with %d entries: %d, bytes/map %.1f\n", n, k, after-before, fullPerMap)
                fmt.Printf("Bytes per entry %.1f\n", (fullPerMap-emptyPerMap)/float64(k))
                k *= 2
        }

} 
```

* * *

输出

```
jnml@fsc-r630:~/src/tmp$ go build && ./tmp && go version && uname -a
Bytes used for 1000 empty maps: 146816, bytes/map 146.8
Bytes used for 1000 maps with 1 entries: 147040, bytes/map 147.0
Bytes per entry 0.2
Bytes used for 1000 maps with 2 entries: 147040, bytes/map 147.0
Bytes per entry 0.1
Bytes used for 1000 maps with 4 entries: 247136, bytes/map 247.1
Bytes per entry 25.1
Bytes used for 1000 maps with 8 entries: 439056, bytes/map 439.1
Bytes per entry 36.5
Bytes used for 1000 maps with 16 entries: 818688, bytes/map 818.7
Bytes per entry 42.0
Bytes used for 1000 maps with 32 entries: 1194688, bytes/map 1194.7
Bytes per entry 32.7
Bytes used for 1000 maps with 64 entries: 2102976, bytes/map 2103.0
Bytes per entry 30.6
Bytes used for 1000 maps with 128 entries: 4155072, bytes/map 4155.1
Bytes per entry 31.3
Bytes used for 1000 maps with 256 entries: 6698688, bytes/map 6698.7
Bytes per entry 25.6
Bytes used for 1000 maps with 512 entries: 14142976, bytes/map 14143.0
Bytes per entry 27.3
Bytes used for 1000 maps with 1024 entries: 51349184, bytes/map 51349.2
Bytes per entry 50.0
Bytes used for 1000 maps with 2048 entries: 102467264, bytes/map 102467.3
Bytes per entry 50.0
Bytes used for 1000 maps with 4096 entries: 157214816, bytes/map 157214.8
Bytes per entry 38.3
Bytes used for 1000 maps with 8192 entries: 407031200, bytes/map 407031.2
Bytes per entry 49.7
Bytes used for 1000 maps with 16384 entries: 782616864, bytes/map 782616.9
Bytes per entry 47.8
go version devel +83b0b94af636 Sat Mar 09 16:25:30 2013 +1100 linux/amd64
Linux fsc-r630 3.2.0-38-generic #61-Ubuntu SMP Tue Feb 19 12:18:21 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux
jnml@fsc-r630:~/src/tmp$ 
```

很高兴看到数字更好（大约 4 倍）。发布版本 (1.0.3) 的数字仅略高：

```
jnml@fsc-r630:~/src/tmp$ go build && ./tmp
Bytes used for 1000 empty maps: 144192, bytes/map 144.2
Bytes used for 1000 maps with 1 entries: 144192, bytes/map 144.2
Bytes per entry 0.0
Bytes used for 1000 maps with 2 entries: 144192, bytes/map 144.2
Bytes per entry 0.0
Bytes used for 1000 maps with 4 entries: 315648, bytes/map 315.6
Bytes per entry 42.9
Bytes used for 1000 maps with 8 entries: 436288, bytes/map 436.3
Bytes per entry 36.5
Bytes used for 1000 maps with 16 entries: 885824, bytes/map 885.8
Bytes per entry 46.4
Bytes used for 1000 maps with 32 entries: 1331264, bytes/map 1331.3
Bytes per entry 37.1
Bytes used for 1000 maps with 64 entries: 2292800, bytes/map 2292.8
Bytes per entry 33.6
Bytes used for 1000 maps with 128 entries: 4935920, bytes/map 4935.9
Bytes per entry 37.4
Bytes used for 1000 maps with 256 entries: 12164160, bytes/map 12164.2
Bytes per entry 47.0
Bytes used for 1000 maps with 512 entries: 29887808, bytes/map 29887.8
Bytes per entry 58.1
Bytes used for 1000 maps with 1024 entries: 56840768, bytes/map 56840.8
Bytes per entry 55.4
Bytes used for 1000 maps with 2048 entries: 108736064, bytes/map 108736.1
Bytes per entry 53.0
Bytes used for 1000 maps with 4096 entries: 184368752, bytes/map 184368.8
Bytes per entry 45.0
Bytes used for 1000 maps with 8192 entries: 431340576, bytes/map 431340.6
Bytes per entry 52.6
Bytes used for 1000 maps with 16384 entries: 815378816, bytes/map 815378.8
Bytes per entry 49.8
jnml@fsc-r630:~/src/tmp$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-22T04:37:41.097

每个映射条目的开销不是一个恒定值，因为它取决于每个映射条目的桶数。

关于地图内部有一篇很棒的文章：[https ://www.ardanlabs.com/blog/2013/12/macro-view-of-map-internals-in-go.html](https://www.ardanlabs.com/blog/2013/12/macro-view-of-map-internals-in-go.html)

> Go map 的哈希表被构造为一个桶数组。桶的数量总是等于 2 的幂。

...

> 地图如何发展
> 
> 随着我们继续从映射中添加或删除键/值对，映射查找的效率开始下降。决定何时增长哈希表的负载阈值基于以下四个因素：
> 
> % overflow : 有溢出桶的桶的百分比
> 
> bytes/entry ：每个键/值对使用的开销字节数
> 
> hitprobe : 查找键时需要检查的条目数
> 
> missprobe : 查找缺失键时需要检查的条目数

例如，一个非常简单的基准测试可以显示，当条目数量仅增加 1 时，每个条目的开销会急剧增加：

```
func Benchmark(b *testing.B) {
    m := make(map[int64]struct{})

    // also resets mem stats
    b.ResetTimer()

    for i := 0; i < b.N; i++ {
        m[int64(i)] = struct{}{}
    }
} 
```

有 106496 个条目的长凳：

`go test -bench . -benchtime 106496x -benchmem Benchmark-2 106495 65.7 ns/op 31 B/op 0 allocs/op`

例如每个条目 31 个字节

现在将条目数加一：

`go test -bench . -benchtime 106497x -benchmem Benchmark-2 106497 65.7 ns/op 57 B/op 0 allocs/op`

例如每个条目 57 个字节

将条目数增加 1 会导致底层存储桶的数量增加一倍，从而产生额外的开销。当添加更多条目时，开销将减少，直到桶数再次增加一倍。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T17:23:24.847

这是一个测量地图开销的实验。仅在 Linux 下工作。

```
package main

import (
    "fmt"
    "io/ioutil"
    "log"
    "os"
    "runtime"
    "strconv"
    "strings"
)

func ReadRss() int {
    data, err := ioutil.ReadFile("/proc/self/statm")
    if err != nil {
        log.Fatal(err)
    }
    rss, err := strconv.Atoi(strings.Fields(string(data))[1])
    if err != nil {
        log.Fatal(err)
    }
    return rss * os.Getpagesize()
}

func main() {
    hs := []*map[byte]byte{}
    before := ReadRss()
    n := 10000
    for i := 0; i < n; i++ {
        h := map[byte]byte{}
        hs = append(hs, &h)
    }
    after := ReadRss()
    empty_per_map := float64(after-before)/float64(n)
    fmt.Printf("Bytes used for %d empty maps: %d, bytes/map %.1f\n", n, after-before, empty_per_map)
    hs = nil
    runtime.GC()

    before = ReadRss()
    for i := 0; i < n; i++ {
        h := map[byte]byte{}
        for j := byte(0); j < 100; j++ {
            h[j] = j
        }
        hs = append(hs, &h)
    }
    after = ReadRss()
    full_per_map := float64(after-before)/float64(n)
    fmt.Printf("Bytes used for %d maps with 100 entries: %d, bytes/map %.1f\n", n, after-before, full_per_map)
    fmt.Printf("Bytes per entry %.1f\n", (full_per_map - empty_per_map)/100)

} 
```

它使用 go 1.0.3 在我的 64 位 Linux 机器上打印

```
Bytes used for 10000 empty maps: 1695744, bytes/map 169.6
Bytes used for 10000 maps with 100 entries: 43876352, bytes/map 4387.6
Bytes per entry 42.2 
```

或者使用 go 1.0

```
Bytes used for 10000 empty maps: 1388544, bytes/map 138.9
Bytes used for 10000 maps with 100 entries: 199323648, bytes/map 19932.4
Bytes per entry 197.9 
```

内存测量是使用 Linux 操作系统而不是 Go 的内部内存统计信息完成的。内存测量是粗略的，因为它们以 4k 页的形式返回，因此创建了大量的映射。

因此，使用 go 1.0.3 时，每个 map 大约需要 170 个字节，每个条目需要 42 个字节（1.0 更多）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T17:22:09.850

似乎涉及一个缓冲区，并且仅在需要时才会增长。不过，我无法判断 gccgo，我只是在操场上尝试过。基本上，它为空映射分配 128 个字节，然后在需要时增长。

你可以在这里看到它：[http ://play.golang.org/p/RjohbSOq0x](http://play.golang.org/p/RjohbSOq0x)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-18T20:00:45.933

```
/*  Hal3 Mon Jul 18 20:58:16 BST 2016 go version go1.5.1 linux/amd64
Bytes used for 1000 empty maps: 0, bytes/map 0.0
Bytes used for 1000 maps with 1 entries: 112192, bytes/map 112.2
Bytes per entry 112.2
Bytes used for 1000 maps with 2 entries: 113472, bytes/map 113.5
Bytes per entry 56.7
Bytes used for 1000 maps with 4 entries: 110912, bytes/map 110.9
Bytes per entry 27.7
Bytes used for 1000 maps with 8 entries: 112192, bytes/map 112.2
Bytes per entry 14.0
Bytes used for 1000 maps with 16 entries: 231600, bytes/map 231.6
Bytes per entry 14.5
Bytes used for 1000 maps with 32 entries: 413768, bytes/map 413.8
Bytes per entry 12.9
Bytes used for 1000 maps with 64 entries: 736920, bytes/map 736.9
Bytes per entry 11.5
Bytes used for 1000 maps with 128 entries: 1419624, bytes/map 1419.6
Bytes per entry 11.1
Bytes used for 1000 maps with 256 entries: 2735192, bytes/map 2735.2
Bytes per entry 10.7
Bytes used for 1000 maps with 512 entries: 5655168, bytes/map 5655.2
Bytes per entry 11.0
Bytes used for 1000 maps with 1024 entries: 10919888, bytes/map 10919.9
Bytes per entry 10.7
Bytes used for 1000 maps with 2048 entries: 21224528, bytes/map 21224.5
Bytes per entry 10.4
Bytes used for 1000 maps with 4096 entries: 42391024, bytes/map 42391.0
Bytes per entry 10.3
Bytes used for 1000 maps with 8192 entries: 84613344, bytes/map 84613.3
Bytes per entry 10.3
Bytes used for 1000 maps with 16384 entries: 169152560, bytes/map 169152.6
Bytes per entry 10.3
Mon Jul 18 20:58:25 BST 2016 */ 
```

# android - 在某些特定操作之后执行后台进程的最佳方法是什么？

> ID：15313107
> 
> 赞同：0
> 
> 时间：2013-03-09T16:31:58.487
> 
> 标签：android, background-process

我正在编写一个连接到特定 WIFI 网络的 android 应用程序。棘手的部分是，当用户手动连接到其他网络时，或者关闭 WIFI，或者连接丢失（因为用户走开）......我需要忘记这个网络（removeNetwork）。

我的问题如下：我该怎么做才能做到这一点？

*   我是否需要创建一个在后台运行的服务，每 5 分钟检查一次 WIFI 的状态？
*   当WIFI改变某些特定状态时，是否有任何“挂钩”方法来运行类、方法、函数？
*   解决此问题的最佳方法是什么？

真的感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:39:20.027

我建议您在您的应用程序中实现一个广播接收器，只要网络或 wifi 连接有任何变化就可以激活，并且在该广播接收器的 onRecieve() 方法中，您可以在连接丢失时进行任何类型的处理.

这在你的清单中

```
<receiver android:name=".WifiReceiver" >
    <intent-filter>
       <action android:name="android.net.wifi.WIFI_STATE_CHANGED" />
    </intent-filter>
</receiver> 
```

这是java代码。公共类 WifiReceiver 扩展 BroadcastReceiver { private final String TAG = "WifiReceiver";

```
@Override
public void onReceive(Context context, Intent intent) {
    int wifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_UNKNOWN);
    String wifiStateText = "No State";

    switch (wifiState) {
    case WifiManager.WIFI_STATE_DISABLING:
        wifiStateText = "WIFI_STATE_DISABLING";
        break;
    case WifiManager.WIFI_STATE_DISABLED:
        wifiStateText = "WIFI_STATE_DISABLED";
        break;
    case WifiManager.WIFI_STATE_ENABLING:
        wifiStateText = "WIFI_STATE_ENABLING";
        break;
    case WifiManager.WIFI_STATE_ENABLED:
        wifiStateText = "WIFI_STATE_ENABLED";
        break;
    case WifiManager.WIFI_STATE_UNKNOWN:
        wifiStateText = "WIFI_STATE_UNKNOWN";
        break;
    default:
        break;
    }
    MyLog.d(TAG, "onReceive Broadcast > WiFiState: " + wifiStateText);
    MyLog.d(TAG, "onReceive Broadcast > Time: " + new Date());
} 
```

并且不要忘记添加以下权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:36:56.960

请查看以下有关创建将在网络状态更改时调用的 BroadcastReriever 的帖子：

[互联网监听器 Android 示例](https://stackoverflow.com/questions/12157130/internet-listener-android-example)

[网络监听器 Android](https://stackoverflow.com/questions/1783117/network-listener-android)

# umbraco - Umbraco 6 升级后没有内容节点

> ID：15313111
> 
> 赞同：0
> 
> 时间：2013-03-09T16:32:29.780
> 
> 标签：umbraco

三天前我在 Umbraco 论坛上问过这个问题，但没有一个答案。我有一个网站，其内容我无法再编辑，而且我知道 SO 的人是最好的，所以这里是：

我刚刚将一个站点从 Umbraco 版本 4.6.1 升级到 6.0.0，现在后端内容选项卡中唯一显示的是“内容”节点。整个树已经消失了，但该站点实际上仍然可以工作，只是我无法访问后端中的任何内容——媒体、设置、开发人员等选项卡似乎都正常工作。

如果我右键单击唯一的可见节点“内容”，我会得到“创建”、“排序”、“重新发布整个站点”和“重新加载节点”。

**创建**给了我预期的创建对话框，但我不想尝试创建任何东西，直到我知道出了什么问题。

**排序**抛出以下错误：

```
Server Error in '/' Application.
Object reference not set to an instance of an object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[NullReferenceException: Object reference not set to an instance of an object.]
   umbraco.cms.businesslogic.CMSNode..ctor(IUmbracoEntity entity) +32
   umbraco.cms.businesslogic.Content..ctor(IContentBase contentBase) +18
   umbraco.cms.businesslogic.web.Document.<GetRootDocuments>b__1(IContent c) +38
   System.Linq.WhereSelectEnumerableIterator`2.MoveNext() +151
   System.Linq.Buffer`1..ctor(IEnumerable`1 source) +325
   System.Linq.Enumerable.ToArray(IEnumerable`1 source) +78
   umbraco.cms.businesslogic.web.Document.GetRootDocuments() +123
   umbraco.cms.presentation.sort.OnPreRender(EventArgs e) +813
   System.Web.UI.Control.PreRenderRecursiveInternal() +103
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

**重新发布**在 App_Data 文件夹中重新创建 umbraco.config 文件时不会出错。

**重新加载**节点似乎正在尝试重新加载节点，但最终什么也没有出现。

我正在使用 MySql 数据库，我很高兴使用一些 sql 命令来破解它以使事情再次正常运行，因为我怀疑可能是一些错误的节点 ID 应该受到指责，但我不知道要查看哪些表.

感谢所有帮助。

PS：Umbraco“关于”显示如下版本信息——“ **Umbraco v6.0.0 (Assembly version: 1.0.4779.24222)** ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:32:57.733

我建议您不要在此时解决问题，这更像是在追逐兔子，而是复制备份并再次尝试升级。您可能错过了升级过程中的一个步骤。请特别注意[升级说明](http://our.umbraco.org/documentation/Installation/Upgrading/general)和[特定版本的升级说明](http://our.umbraco.org/documentation/Installation/Upgrading/version-specific)（几乎每个版本的特定说明都适用于您）。

如果你在第二次尝试后发现还是有问题，我建议更细化的升级路径，比如升级到4.7的最高版本，然后到4.11的最高版本，最后到6.0的最高版本，再次注意升级说明并在每次升级后检查该站点是否仍然有效。

无论哪种情况，请确保您在最后运行安装程序，因为这将允许 umbraco 对您的数据库进行一些必要的更改。

# java - 方法 org.osgi.framework.Version.toString() 是线程安全的吗？

> ID：15313114
> 
> 赞同：3
> 
> 时间：2013-03-09T16:32:50.807
> 
> 标签：java, multithreading, thread-safety, osgi

已知方法`org.osgi.framework.Version.toString()`会导致性能问题（请[参阅错误 324331 - 从 Version.toString 创建的冗余字符串](https://bugs.eclipse.org/bugs/show_bug.cgi?id=324331)）。为了解决这个问题，方法被改变了，现在它利用数据竞争的延迟初始化（可能是为了提高性能）

```
// OSGi Service Platform Release 4 Version 4.3 Core Companion Code 
public String toString() {
    if (versionString != null) {
        return versionString;
    }
    int q = qualifier.length();
    StringBuffer result = new StringBuffer(20 + q);
    result.append(major);
    result.append(SEPARATOR);
    result.append(minor);
    result.append(SEPARATOR);
    result.append(micro);
    if (q > 0) {
        result.append(SEPARATOR);
        result.append(qualifier);
    }
    return versionString = result.toString();
} 
```

正如我所相信的那样，这不是线程安全的，因为`versionString`可以对字段的读取进行重新排序，并且该方法可以返回`null`值。我对吗？或者也许没关系，因为没有适当的同步就不会调用它？

**更新**

根据JLS 第 17 章并发性的作者之一 Jeremy Manson 的[这篇博客文章，它实际上是可以发生的。](http://jeremymanson.blogspot.co.uk/2008/12/benign-data-races-in-java.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:50:24.887

它更多的是关于缓存而不是懒惰。

但你是对的，它可以根据 Java 内存模型返回 null

```
StringversionString;

public String toString() {
    if (versionString != null) {
        return versionString;  // can return null here!!
    } 
```

理论上可以转化为

```
 String tmp1 = versionString;  // reads null
    String tmp2 = versionString;  // reads non-null
    if(tmp2!=null)
        return tmp1;              // return null! 
```

然而，可能没有真正的 JVM 会这样做，所以这个错误可能永远不会意识到。

然而，“正确”的做法是

```
public String toString() {
    String tmp = versionString;
    if (tmp != null) {
        return tmp;
    } 
```

* * *

最后一行很好

```
 return versionString = result.toString(); 
```

它不读`versionString`，相当于

```
 String tmp3 = result.toString();
    versionString = tmp3;
    return tmp3; 
```

有趣的是，即使我们这样做

```
 versionString = result.toString();   // [w]
    return versionString;                // [r] 
```

它仍然是安全的。最后一次读取不能返回 null，因为 [w] 发生在 [r] 之前。

# php - Codeiginter：SQL 连接导致重复结果

> ID：15313119
> 
> 赞同：3
> 
> 时间：2013-03-09T16:33:19.980
> 
> 标签：php, sql, codeigniter, join

我正在努力扩展我的知识，并建立一个迷你论坛。不过，我的代码有问题。

在论坛索引页面上，我想显示所有带有子类别的论坛类别，如下所示：

第一类

*   子类别 1
*   子类别 2
*   子类别 3

第 2 类

*   子类别 4
*   子类别 5
*   子类别 6

如您所见，这有点像正常的“论坛风格”。

但是，当我从数据库中获取结果时，它会返回重复的结果。在这种情况下，复制“论坛类别”。所以它看起来像这样：

第一类

*   子类别 1

第一类

*   子类别 2

第一类

*   子类别 3

... 等等

这是我的模型，它获取所有类别等：categories.php

```
function GetCategories()
{   
   $this->db->select('*, categories.title as cat_title')->from('categories')->        join('sub_categories', 'sub_categories.categorie_id = categories.id');
    $categories = $this->db->get();
    print_r($categories->result());
    return $categories;
} 
```

和我的论坛控制器：

```
 function index()
{
    $data['categories'] = $this->categories->GetCategories();
    $this->load->view('forum/index', $data);
} 
```

和视图

```
<div class="forum-body">
<?php 
foreach($categories->result() as $cate)
{
    echo '<div class="categorie-head">'.$cate->cat_title.'</div>';
    ?>
        <div class="categories-body">
            <?php echo $cate->title;?>
        </div>
        <?php
}
?> 
```

**表结构**

表“类别”

*   ID
*   标题

表“子类别”

*   ID
*   标题
*   类别 ID

那么，修复它的简单方法是什么？只有一个查询有可能吗？

如果您不明白，请告诉我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:52:40.943

试试这个：

```
<div class="forum-body">
<?php 
$cat_title = '';
foreach($categories->result() as $cate)
{
   if($cat_title != $cate->cat_title)
    echo '<div class="categorie-head">'.($cat_title = $cate->cat_title).'</div>';
    ?>
        <div class="categories-body">
            <?php echo $cate->title;?>
        </div>
        <?php
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:56:17.590

您的查询结果很可能显示如下：

```
Category 1  | sub-category 1
Category 1  | sub-category 2
Category 1  | sub-category 3
Category 2  | sub-category 4
Category 2  | sub-category 5
Category 2  | sub-category 6
... 
```

只知道如何在视图中正确显示它。它可以通过多种方式恢复。例如连接按类别分组的子类别或在 PHP 中使用一些“IF”逻辑：

```
<div class="forum-body">
<?php
$cat_main = ''; 
foreach($categories->result() as $cate)
{
    $cat_main = ($cat_main == $cate->cat_title) ? '' : $cate->cat_title; 
    if($cat_main != '') '<div class="categorie-head">'.$cate->cat_title.'</div>'; 
?>
        <div class="categories-body">
            <?php echo $cate->title;?>
        </div>
<?php  }  ?> 
```

# c++ - 无法引用库项目 (DLL)，因为 .lib 文件丢失

> ID：15313122
> 
> 赞同：7
> 
> 时间：2013-03-09T16:33:31.907
> 
> 标签：c++, visual-studio, visual-c++, dll, reference

我正在尝试启动一个 C++ 游戏引擎项目。

我对 dll 和 lib 的了解不多，但我认为引擎本身就是一个 dll，我会有单独的 dll 项目，如渲染器、输入等，这些项目将由引擎使用，而引擎 dll 将由游戏。

我似乎在 demo.exe 项目中很好地引用了引擎项目（通过添加引用并添加到其他包含目录的路径）但是当尝试在引擎 dll 项目中添加对渲染器 dll 项目的引用时，我得到了：

> 错误 LNK1104：无法打开文件 'MyPath\Renderer.lib' MyPath\LINK 引擎

为什么提到库？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T16:52:48.713

许多 DLL 都带有相应的 LIB 库，这些库仅在链接阶段需要。所以基本上有两种类型的 LIB 库：

1.  包含所有目标文件的真实静态库

2.  仅包含链接器定义的库，此类库带有 DLL

所以基本上你需要链接这个 LIB 文件才能使用 DLL

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T19:52:09.860

所以我整理了我的问题。由于它们是新项目，它们还没有实现任何方法，所以没有创建库，所以没有什么可参考的……我很傻。

最后一件事，我在为头文件定义 dllimport/dllexport 宏时遇到了麻烦。我试图让它在导出项目时定义 dllexport 但说我的项目是 2 个名称，例如“很棒的引擎”，那么我如何实现显然是自动创建的导出宏？我应该在空格处使用下划线吗？

```
#ifdef AWESOME_ENGINE_EXPORTS // Or AWESOMEENGINE_EXPORTS?
#define DLL __declspec(dllexport)
#else
#define DLL __declspec(dllimport)
#endif 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T16:48:49.887

一般来说，

该库可能会以两种模式为您提供它的 API：

*   动态：较小的可执行文件，但需要其 DLL。

*   静态：较大的可执行文件，但独立。

首先，决定你想如何使用那个库，静态的还是动态的？！然后配置编译器能够找到该库的头文件的项目。然后，如果有必要，将 LIB 文件添加到您的项目中。

在您的情况下：检查您是否将 LIB 文件正确添加到您的项目或 makefile 中？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T16:51:57.460

> *在 demo.exe 项目中很好地引用了引擎项目（通过添加引用并将路径添加到其他包含目录）*

一些库可以静态链接，这意味着您只需要头文件 ( `.h`/ `.hpp`) 和`.lib`文件。其他库可能需要动态链接，这将导致您的程序依赖于某些 DLL 文件，但通常您需要有头文件才能知道这些 DLL 中的内容。有时，这似乎是您的情况，您需要所有这些：头文件、静态库和 DLL。

**头文件**包含声明，它们定义类的结构，声明函数的原型等。**静态库**（`.lib`文件）是二进制文件，包含函数、变量等的定义，需要在编译时解析，所以当它们丢失时，链接器会抱怨。**动态链接库**(DLL) 也是二进制文件，但它们是在运行时解析的，这意味着您真正需要它们的时候就是运行程序的时候。

# css - IE中的中心网站

> ID：15313124
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:33:32.910
> 
> 标签：css, internet-explorer-8, centering

我已经阅读了关于这个主题的几篇文章，并且我已经尝试了很多，但我无法让我的网站以 IE 为中心 - 特别是 IE 8（我当前的浏览器）。它确实适用于 FF、Safari 和 Chrome。 [www.hscassociates.net](http://www.hscassociates.net)是网站。

在我的 CSS 中，我正在这样做：

```
div#section {
  width:960px;
  margin:0 auto 0 auto;
  border: 2px solid #b31b1b;
  border-top:none;
} 
```

另外，我的#section div 中有我需要的背景图像，但是当我将它放在 div#section 块中的 css 文件中时它不会显示。为了让它显示，我把它放在我的包含文件中，我在其中显示#section div标签：

```
<div id="section" style="background-image:url('graphics/section-bg.gif'); 
                         background-repeat:repeat-y;"> 
```

我读过的一篇文章说 html doctype 需要使用 strict。我以前从未读过。这有什么道理吗？我正在使用过渡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:37:27.743

您`DOCTYPE`应该是页面上的第一个标签。因为它不是 IE 以所谓的[怪癖模式](http://www.quirksmode.org/css/quirksmode.html)呈现您的页面。DOCTYPE 本身不需要是严格的，但是会发生的是使用正确的 DOCTYPE，页面将以严格模式呈现。

**什么是怪癖模式？**

因为某些旧浏览器不符合 W3C 标准，开发人员不得不编写不符合标准的代码，以确保他们的页面在这些浏览器中看起来正确。随着浏览器越来越接近标准，问题在于以旧样式开发的页面将不再正确呈现。所以他们实现了两种渲染模式，**quirks**和**strict**。

如果网站提供 DOCTYPE 作为第一个参数，这会告诉浏览器该页面是用符合标准的代码编写的，以及要根据什么规范进行渲染。所以浏览器可以使用严格模式来渲染页面。

但是，如果页面省略了 DOCTYPE，则浏览器不知道要根据什么规范呈现，因此假定页面不符合标准（它自动用于省略 DOCTYPE）并以可能产生意外结果的怪癖模式呈现。

**这是您需要做的：**

改变

```
<html>
  <head>
    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
```

至

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:52:42.980

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`触发怪癖模式。

如果你想使用 HTML 4 过渡然后使用`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

如果您未绑定到 HTML 4，请使用`<!DOCTYPE html>`

您的页面显示都很好。

# javascript - 使用 javascript 在非活动选项卡中播放音频

> ID：15313133
> 
> 赞同：4
> 
> 时间：2013-03-09T16:34:27.863
> 
> 标签：javascript, javascript-events

我使用 Websocket 编写了一个网络聊天。问题是用户切换浏览器的标签，我想播放声音让他们知道有人想在聊天标签中与他交谈。

我看到 FaceBook 和 GMail 可以在他们的聊天在非活动选项卡中有新消息时播放“ping”

他们如何使用 javascript 或有任何解决方案

此致

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:56:57.267

这个怎么样？

```
function beep(file,volume){
    var snd = new Audio(file);
    volume = volume ? volume : 0.5; // defaults to 50% volume level
    snd.volume = volume;

    // LISTENER: Rewind the playhead when play has ended
    snd.addEventListener('ended',function(){
        this.pause();
        this.currentTime=0;
    });

    // Play the sound
    snd.play();
}

beep("audioFiles/beep.mp3", 1.0); 
```

# javascript - 对象方法与原型方法

> ID：15313137
> 
> 赞同：2
> 
> 时间：2013-03-09T16:34:34.210
> 
> 标签：javascript

```
 var MyClass = function() {};    

   MyClass.method = function (name, age) { 
        return "My name is " + name + " and I'm " + age + " years old";          
    }

    MyClass.prototype.method = function (name, age) { 
        return "My name is " + name + " and I'm " + age + " years old";   
    }

    console.log(MyClass.method('David','30'));

    var instance = new MyClass();      

    console.log(instance.method('john', '23')); 
```

在上面的代码片段中，两种方法都在做同样的事情。在大多数情况下，两者都可以互换使用。你会选择哪一个，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:35:33.743

原型方法在所有实例之间共享，这使得对象更轻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:38:24.003

这就像 C# 或 Java 中的静态成员与实例成员。例如，非原型将无法访问对象内的参数。

例如，您将无法在其中执行此操作`MyClass.method`，因为您在 MyClass 上调用它，而不是 MyClass 的**实例**。[(jsFiddle)](http://jsfiddle.net/nfjyV/)

```
var MyClass = function(name, age) {
    this.name = name;
    this.age = age;
};

MyClass.prototype.method = function () { 
    return "My name is " + this.name + " and I'm " + this.age + " years old";   
}

var instance = new MyClass('David', 10);
console.log(instance.method()); 
```

# android - 图库仅显示 1 张图片，如何解决？

> ID：15313139
> 
> 赞同：1
> 
> 时间：2013-03-09T16:34:36.313
> 
> 标签：android

我试图在我的几个图像的代码中设置一个画廊，但我遇到的问题是画廊只显示我的数组中的一个图像，只有第一张图像谁能告诉我问题是什么？

谢谢

代码：

```
public class ImageAdapter extends BaseAdapter implements SpinnerAdapter {

private Context context;

public ImageAdapter(Context context) {
    // TODO Auto-generated constructor stub
    this.context = context;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return ThumbsIds.length;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return 0;
}

@SuppressWarnings("deprecation")
@Override
public View getView(int position, View convertview, ViewGroup arg2) {
    // TODO Auto-generated method stub
    ImageView imageView = null;
    if(convertview==null){
        imageView = new ImageView(context);
        imageView.setLayoutParams(new Gallery.LayoutParams(250,230));
        imageView.setPadding(8,8,8,8);
    }else{
        imageView =(ImageView)convertview;
    }

    imageView.setImageResource(ThumbsIds[position]);
    return imageView;
}

public Integer[] ThumbsIds ={
        R.drawable.seanpic,
        R.drawable.billypic,
        R.drawable.actor_1
}; 
```

}

# elasticsearch - 如何在elasticsearch中查询空白日期

> ID：15313141
> 
> 赞同：1
> 
> 时间：2013-03-09T16:34:59.057
> 
> 标签：elasticsearch, tire

elasticsearch 有没有办法查询`date`具有空白/空值的类型？在索引中将什么值分配给空白日期字段？

我必须使用`missing`过滤器，还是有办法使用查询 -`term`也许？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:48:52.727

除非您在日期字段上指定了 null_value，否则我相信缺少过滤器是推荐的方法。

[elasticsearch讨论组中的这个答案](https://groups.google.com/d/msg/elasticsearch/S1-1L_MvA7c/11hoqP5fuioJ)谈到查询中的值为null的值类似于elasticsearch看待它的方式不存在的值。

# xml - 使用 xmlf90 使用 Fortran 解析 XML

> ID：15313145
> 
> 赞同：0
> 
> 时间：2013-03-09T16:35:21.557
> 
> 标签：xml, fortran

我需要用 Fortran 程序解析 XML 文件。我正在评估[xmlf90 解析器工具](http://fisica.ehu.es/ag/xml/)，看看它是否对我的需求有用，但我无法让用户手册中的示例问题正常工作。该错误与类型不匹配有关：

```
 pcdata_chunk_handler=pcdata_chunk )
                                      1
Error: Type mismatch in argument 'pcdata_chunk_handler' at (1); 
passed REAL(4) to UNKNOWN 
```

我直接从用户手册中复制了示例。这是我的主程序，它调用 xml 解析器：

```
program inventory
use flib_sax
use m_handlers

type(xml_t) :: fxml     ! XML file object (opaque)
integer :: iostat

call open_xmlfile("inventory.xml",fxml,iostat)
if (iostat /= 0) stop "cannot open xml file"

call xml_parse(fxml, begin_element_handler=begin_element, &
                 end_element_handler=end_element,     &   
                 pcdata_chunk_handler=pcdata_chunk )

end program inventory 
```

这是“m_handlers”模块：

```
module m_handlers
use flib_sax
private
!
public :: begin_element, end_element, pcdata_chunk
!
logical, private :: in_item, in_description, in_price
character(len=40), private :: what, price, currency, id
!
contains !-----------------------------------------
!
    subroutine begin_element(name,attributes)
        character(len=*), intent(in) :: name
        type(dictionary_t), intent(in) :: attributes

        integer :: status

        select case(name)
        case("item")
            in_item = .true.
            call get_value(attributes,"id",id,status)
        case("description")
            in_description = .true.
        case("price")
            in_price = .true.
            call get_value(attributes,"currency",currency,status)
        end select
    end subroutine begin_element
    !----------------------------------------------------------------
    subroutine pcdata_chunk_handler(chunk)
        character(len=*), intent(in) :: chunk

        if (in_description) what = chunk
        if (in_price) price = chunk

    end subroutine pcdata_chunk_handler
    !----------------------------------------------------------------
    subroutine end_element(name)
        character(len=*), intent(in) :: name

        select case(name)
        case("item")
            in_item = .false.
            write(unit=*,fmt="(5(a,1x))") trim(id), trim(what), ":", &
                trim(price), trim(currency)

        case("description")
            in_description = .true.
        case("price")
            in_price = .false.

        end select

    end subroutine end_element
    !----------------------------------------------------------------
end module m_handlers 
```

我解析的“inventory.xml”文件是：

```
<inventory>
<item id="003">
    <description>Washing machine</description>
    <price currency="euro">1500.00</price>
</item>
<item id="007">
    <description>Microwave oven</description>
    <price currency="euro">300.00</price>
</item>
<item id="011">
    <description>Dishwasher</description>
    <price currency="swedish crown">10000.00</price>
</item>
</inventory> 
```

如果我从“call xml_parse”语句中去掉“pcdata_chunk_handler=pcdata_chunk”参数，这个程序就可以工作，但当然，输出中缺少描述和价格数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:35:21.557

在 xmlf90 的用户手册中，m_handlers 模块中存在错误。子程序“pcdata_chunk_handler”实际上应该被命名为“pcdata_chunk”，因为这是在主程序中找到的“call xml_parse”语句的参数中调用的，以及在模块文件顶部调用的“公共 :: begin_element、end_element、pcdata_chunk”。

# javascript - JavaScript 自调用函数

> ID：15313163
> 
> 赞同：2
> 
> 时间：2013-03-09T16:36:22.960
> 
> 标签：javascript, function, timeout

我试图理解这个示例代码，第 15 行的功能是什么，为什么`start(timeout)`？（对不起，我是编程新手）

```
var schedule = function (timeout, callbackfunction) {
    return {
        start: function () {
            setTimeout(callbackfunction, timeout)
        }
    };
};

(function () {
    var timeout = 1000; // 1 second
    var count = 0;
    schedule(timeout, function doStuff() {
        console.log(++count);
        schedule(timeout, doStuff);
    }).start(timeout);
})();

// "timeout" and "count" variables
 // do not exist in this scope. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:41:22.500

> ...为什么开始（超时）？

在该示例中，实际上没有理由传递`timeout`into `start`，因为`start`不接受或使用任何参数。电话也可以`.start()`。

发生的事情是`schedule` *返回*该`schedule`函数创建的对象，并且该对象的属性之一被调用`start`，它是一个函数。当被调用时，它通过使用传入的*原始*超时和传入的回调函数`start`来设置定时回调。`setTimeout`*`schedule``schedule`*

 *代码调用`schedule`转身并立即调用`start`它创建的对象上的函数。

在评论中，Pointy 指出（好吧，他会，不是吗？）回调函数正在调用`schedule`，但没有对返回的对象做任何事情，这是没有意义的——`schedule`除了创建和返回对象之外什么都不做，因此不使用返回的对象会使调用毫无意义。

这是解决这两个问题的代码：

```
var schedule = function (timeout, callbackfunction) {
    return {
        start: function () {
            setTimeout(callbackfunction, timeout)
        }
    };
};

(function () {
    var timeout = 1000; // 1 second
    var count = 0;
    schedule(timeout, function doStuff() {
        console.log(++count);
        schedule(timeout, doStuff).start(); // <== Change here
    }).start();                             // <== And here
})(); 
```

不过，坦率地说，即使有修复，这也不是很好的代码。每次都创建一个新对象没有什么特别好的理由，坦率地说，如果这本书是为了教学，这个例子可能会更清楚。内联命名函数表达式和对函数返回的对象的方法调用......绝对没问题，但不适用于*教学*。不过，我不知道上下文，所以这些评论带有一粒盐。

*这是通过重用*`schedule`它返回的对象来使用该函数的重新设计版本，并且清楚地知道什么时候发生了什么：

 *```
(function () {
    var timeout = 1000; // 1 second
    var count = 0;

    // Create the schedule object
    var scheduleObject = schedule(timeout, doStuff);

    // Set up the first timed callback
    scheduleObject.start();

    // This is called by each timed callback
    function doStuff() {
        // Show the count
        console.log(++count);

        // Set up the next timed callback
        scheduleObject.start();
    }
})(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T16:40:10.593

函数调度作为函数执行。该函数返回一个对象。就像你可以看到的一样`{ start... }`。使用返回的对象调用`start`函数。这称为链接。所以`start`函数是在设置函数后执行的。

奇怪的是，超时被传递给`start`没有参数的函数。**

# c - 为 C 寻找一个好的 GUI 库

> ID：15313173
> 
> 赞同：1
> 
> 时间：2013-03-09T16:37:20.973
> 
> 标签：c, user-interface

正如标题所说，我正在为 C 编程语言寻找一个好的库。

GUI 库应该很受欢迎。如果互联网上有流行的论坛，我也可以向专业人士寻求帮助，我也将不胜感激。我绝对需要一本关于图书馆的好书。如果可能的话，它应该是跨平台的，但没有它我也可以生活......我猜;）

到目前为止，我知道的唯一 C 库是 GTK。这对我来说听起来真的很好，但我也没有找到任何好书（我实际上只看过一本关于 GTK 的书，我不知道它是好还是坏，因为没有人发表评论）我也没有看到任何人使用它，除了2 个人在 YouTube 上的 2 个视频数量令人印象深刻！>.< .

对我来说真正重要的是它应该很受欢迎......我不想坐在这里，学习如何使用这个库，并且在一两年内没有人再使用它了。

我希望你们能帮我找到一个图书馆:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:41:55.553

GTK+ 非常流行并被广泛使用。如果您只想在 C 中进行跨平台 GUI 开发，这是最佳选择。周围有很多书，虽然它们有点过时（但大部分仍然适用）。您可以在 GNOME 项目网站上找到最新的教程和完整的 API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:42:15.813

GTK 是您能找到的最流行的 C 语言 GUI 库。你试过[亚马逊](http://www.amazon.com/s/ref=sr_nr_scat_283155_ln?rh=n%3A283155%2Ck%3Agtk&keywords=gtk&ie=UTF8&qid=1362847298&scn=283155&h=fbd69ebdb1a0eee489c0e7a1c90220970850a709)吗？有很多书。很难相信他们都是坏人。

# image - 设置 divs 背景图像以适合其大小？

> ID：15313181
> 
> 赞同：32
> 
> 时间：2013-03-09T16:38:14.433
> 
> 标签：image, css

我有`<div>`一个背景图片。

`<div>`大小可能会随着时间而改变。

是否可以将 Divs 背景图像设置为适合`<div>`大小？

假设我有一个 div`400x400`和一个 Image `1000x1000`，是否可以将图像缩小到`400x400`适合`<div>`尺寸？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-09T16:40:29.850

如果你想使用 CSS3，你可以很简单地使用**[background-size](http://www.w3schools.com/cssref/css3_pr_background-size.asp)**，像这样：

```
background-size: 100%; 
```

所有主流浏览器（包括 IE9+）都支持它。如果您想让它在 IE8 及之前的版本中运行，请查看[此问题](https://stackoverflow.com/questions/2991623/make-background-size-work-in-ie)的答案。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-03-09T16:41:08.400

用于`background-size`此目的：

```
background-size: 100% 100%; 
```

更多关于：

> [http://www.w3schools.com/cssref/css3_pr_background-size.asp](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-03-09T16:41:18.450

使用[`background-size`](http://www.css3.info/preview/background-size/)属性来实现这一点。您应该在`cover`,`contain`和`100%`- 之间进行选择，具体取决于您想要获得的内容。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-04-07T10:14:33.340

您可以使用 background-size 属性来实现这一点，现在大多数浏览器都支持该属性。

要缩放背景图像以适合 div 内部：

```
background-size: contain; 
```

缩放背景图像以覆盖整个 div：

```
background-size: cover; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-15T18:10:02.760

使用它，因为它也可以作为响应。：

```
background-size: cover; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-07T10:27:14.750

您可以为此使用 CSS3 background-size 属性。

```
.header .logo {
background-size: 100%;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-09T16:42:35.547

将您的CSS设置为此

```
img {
    max-width:100%,
    max-height100%
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-14T04:28:37.500

想加个IE8及以下的解决方案（我觉得是IE5.5低），不能用`background-size`

```
div{
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=
'/path/to/img.jpg', sizingMethod='scale');
} 
```

# clojurescript - 如何为不同的页面使用不同的 JS 输出？

> ID：15313184
> 
> 赞同：4
> 
> 时间：2013-03-09T16:38:35.283
> 
> 标签：clojurescript

假设我有两个页面共享许多代码、许多库等，但有一些差异。举一个具体的例子，我包含了 jQuery，并且在每个页面中都有不同的“文档就绪”（又名`$(function() { ... })`）功能。

有了 JS 就很容易了。我会在每个页面中包含 jQuery，并在每个页面上包含不同的部分`<script>`，或者包含`script-behind-page-A.js`在`pageA.html`和`script-behing-page-B.js`中`pageB.html`。

如何使用 ClojureScript 获得相同的结果？

我怀疑编译输出太大了，最好让编译器发出一大堆 JavaScript。在那种情况下，它显然不能有两个不同的“文档就绪”功能。

建议的流程是否主要由使您能够执行操作的函数、初始化的少量状态变量以及根据需要使用纯 JS 单独初始化每个页面的函数组成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T02:07:13.350

我认为推荐的方法是[Mimmo Cosenza 在这个 ClojureScript 教程](https://github.com/magomimmo/modern-cljs)中解释的方法：

*   生成一个单一的、大的 JS 输出文件（所以当它上线时你可以优化/gzip它）
*   为函数使用不同的命名空间，确保为每个页面导出至少一个“入口点函数”
*   在每个 HTML 文件上，调用所需的“入口点函数”，如下所示：

    ```
    <!-- on the bottom of welcome.html -->
    <script src="js/output.js"></script>
    <script>myapp.welcome.init();</script>

    <!-- on the bottom of login.html -->
    <script src="js/output.js"></script>
    <script>myapp.login.init();</script> 
    ```

[本教程的第 6 部分](https://github.com/magomimmo/modern-cljs/blob/master/doc/tutorial-06.md)对此进行了详细说明。

# tinymce - 通过自定义按钮保存防止 TinyMCE 提示 onbeforeunload

> ID：15313185
> 
> 赞同：1
> 
> 时间：2013-03-09T16:38:47.077
> 
> 标签：tinymce

我找不到任何关于这个问题的帖子，所以这是我最后的出路。我想以某种方式告诉 TinyMCE 我已经处理了保存过程（我猜是重置 isdirty），但要在不重新加载页面的情况下继续检查进一步的更改。当然，如果我做一个 location.reload 它可以工作，但这需要一点优雅。

我有一个使用以下方法的自定义保存按钮：

```
$("#saveAbout").click(function(){

tinymce.activeEditor.getBody().setAttribute('contenteditable', false);
$("#outerWrapper").animate({opacity:0.3});
$("#bigloader").fadeIn();

var currentData = tinyMCE.activeEditor.getContent();
var currentLanguage = $("#currentLang").val();

$.post("src/actions/pup_about.php", { text: currentData, lang: currentLanguage })
.done(function(data) {
$("#bigloader").fadeOut();
$("#outerWrapper").animate({opacity:1});

// What to do here? 

});

}); 
```

这基本上是获取内容并通过 PHP 文件保存。一个整洁的 ajax 加载器在此过程中出现并淡出。#outerWrapper div 是 TinyMCE 周围的 div，以便在保存过程中稍微淡出它。

有什么聪明的方法可以告诉 TinyMCE 保存已完成，但要继续寻找进一步的更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:14:17.763

你可以在你的函数中发出

```
tinymce.get('your_editor_id').save(); 
```

这应该负责设置其他所有内容。

# javascript - 如何在检票口中进行多选自动完成？

> ID：15313186
> 
> 赞同：0
> 
> 时间：2013-03-09T16:38:48.310
> 
> 标签：javascript, wicket

我有一个要求，我需要文本字段的自动完成功能并允许多项选择。我在网上搜索资源 [比如检票口的东西和[这个](http://osdir.com/ml/java-wicket-user/2008-06/msg00605.html)]，但找不到任何资源。

我的问题 -

1) wicket 是否提供任何此类组件？

2）我必须做些什么才能做到这一点？

3) 我们可以在检票口中使用 jquery 吗？

我有使用 wicket 1.4.18 的遗留代码，由于时间限制，很难升级到最新的 wicket。

感谢您的所有投入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:58:33.910

前段时间遇到了与您完全相同的问题....那时我们有一个自定义组件可以完全满足您的需求（多节自动完成）。该组件使用了大量的 Javascript，遗憾的是并没有在所有浏览器上执行相同的操作。经过一番研究，我发现[Select2-Wicket](https://github.com/ivaynberg/wicket-select2)女巫是[Select2 组件](http://ivaynberg.github.com/select2/)的 wicket 实现。这确实解决了所有问题……真是天才。关于这个组件的唯一问题是它没有 1.4 wicket 支持，您必须将其移植到 1.4 或至少切换到 1.5（这就是我所做的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:42:46.337

您可以在 a 和 a 中实现多项选择，[`ModalWindow`](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/extensions/ajax/markup/html/modal/ModalWindow.html)其中`TextField`的`ListView`值由 TextField 输入过滤并可由`Checkbox`es 选择。

ModalWindow 和所有其他组件都在 Wicket 1.4 中。您有可以完全控制的自定义组件。你可以让它工作，看起来像你想要的。您不依赖于外部组件（我的意思是 Select2）。

Select2 的优势是更好的用户体验。但是控制是有限的。很难改变它的外观，它可能不适合你的应用程序。并非原始组件中的所有 js 事件都被公开，您可能会演变成一些复杂的场景，您会遇到 (Wicket)Select2 的限制。基本任务没问题。

# javascript - Chrome 中的 localStorage 解析问题

> ID：15313196
> 
> 赞同：0
> 
> 时间：2013-03-09T16:39:43.987
> 
> 标签：javascript, html, local-storage

我有一个带有 4 个输入文本框的表单，在保存时，我将值保存到 4 个 localStorage 变量。

再次在页面加载时，我检索它们并使用这些值设置 4 个表单标签

```
$(".formFieldUserData").each(function(index)
            {
            var key = localStorage.key(index);
            $(this).val(localStorage.getItem($(this).attr('name')));
            $("#"+key+"Txt").html(localStorage.getItem($(this).attr('name')));
            }); 
```

现在 Chrome 中似乎存在一些顺序问题。虽然 Firefox 完美地设置了该值，但在 Chrome 中似乎以随机顺序访问 localStorage。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:11:00.513

Chrome 存储根据键排序的数据（在您的情况下，它将是 desc->email->name->phone）。其他浏览器有自己的顺序。所以你不能依赖于获取数据的顺序。你可以使用一个数组。但是根据我的经验，您不能在 localStorage 中存储关联数组（带有字符串键的数组）。所以如果你想存储一个关联数组，你必须首先`stringify`将数组存储在 localStorage 中，然后使用它，你可以`JSON.parse`像对象一样使用和使用它。

[小提琴](http://jsfiddle.net/C4EuE/)

# angularjs - 在 AngularJS 服务之间共享数据

> ID：15313205
> 
> 赞同：2
> 
> 时间：2013-03-09T16:40:33.160
> 
> 标签：angularjs, angularjs-service

**有没有办法在 AngularJS 中的服务之间共享数据？**

用例：来自不同服务的数据聚合
例如，我想要一个从 REST 服务加载一些数据的 service1。然后另一个 service2 从另一个 REST API 将附加数据添加到 service1 数据以创建数据聚合服务。

我基本上想根据它们使用的 API 来分离服务，但最终仍然有一个服务来保存所有数据。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-09T23:08:11.883

创建第三个服务，该服务使用`$q`延迟库来组合来自 2 个 API REST 调用的承诺，使用`$q.all()`.

然后将这第三个服务作为依赖项传递给您的控制器，并用于`$q.then()`组合结果：

```
var app = angular.module('angularjs-starter');

app.factory('API_1',function($http){    
      return $http.get('dataSource-1.json');   
})

app.factory('API_2',function($http){    
      return $http.get('dataSource-2.json');   
});

app.factory('API_3',function($q,API_1,API_2){ 
 return $q.all([API_1,API_2]);
})
/* add "$q" and "API_3" as dependencies in controller*/
app.controller('MainCtrl', function($scope,$q,API_3) {

  $q.when(API_3).then(function(results) {
    /* combine the 2 API results arrays*/
    $scope.combinedData=[results[0].data,results[1].data];    

  });    

}); 
```

演示：**[Plunker 演示](http://plnkr.co/edit/Qvm5Yo5C15yQT5qMXq3a)**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-09T17:49:39.217

由于一个服务可以依赖于另一个服务，这将起作用：

```
myApp.factory('myService1', function() {});
myApp.factory('myService2', function(myService1) {}); 
```

请注意，它们不能都相互依赖，否则会`Circular dependency`出错。

# cakephp - cakephp 用组和组计数分页

> ID：15313210
> 
> 赞同：0
> 
> 时间：2013-03-09T16:40:45.803
> 
> 标签：cakephp

我有一个带有匹配项的 db 表`group_id`。我想在这样的分页器中显示这些项目：

```
codeset_id - itemsInGroupCount
group1     -        3
group2     -        6 
```

我怎样才能做到这一点？我有不同的组，但我如何获得计数？

我的控制器：

```
public function admin_index() {
    $this->Codesetitem->recursive = 0;
    $this->paginate = array(
        'Codesetitem' => array(
            'group' => 'codeset_id',
            'order' => array('codeset_id' => 'asc')
        )            
    );
    $this->set('codesetitems', $this->paginate());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T00:44:05.233

以下似乎对我有用：

```
public $components = array('Paginator');

public function index() {
  $this->Paginator->settings = array(
    'fields' => array('Item.group_id', 'COUNT(*) AS "Item.group_count"'),
    'limit' => 3,
    'group' => 'group_id'
  );

  $this->set('items', $this->Paginator->paginate('Item'));
} 
```

我只是添加`COUNT(*) AS "Foo.bar"`到`fields`密钥。

# javascript - 在几秒而不是几分钟后触发事件

> ID：15313222
> 
> 赞同：1
> 
> 时间：2013-03-09T16:42:01.763
> 
> 标签：javascript, google-apps-script

我正在创建一个包含此代码的 Google 脚本：

```
ScriptApp.newTrigger("fetchTweets")
         .timeBased()
         .everyMinutes(1)
         .create(); 
```

如何将其更改为每十秒触发一次事件，而不是每分钟触发一次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:19:16.247

与此类似的解决方案应该适合您，它在我的测试区域中正常工作：

```
function callSixTimes() {
  fetchTweets();
  for(var i = 1; i <= 5; i++)
  {
    Utilities.sleep(10000);
    fetchTweets()
  }
}

function generateTriggers() {

  var everyMinute = ScriptApp.newTrigger("callSixTimes")
      .timeBased()
      .everyMinutes(1)
      .create();
} 
```

根据谷歌群组中的[这篇文章](http://productforums.google.com/forum/#!topic/apps-script/BySlaSPrBEY)，这似乎是实现这种粒度级别的推荐方法。请注意，即使删除了触发器，其中带有 settimeout 的函数也可能会继续触发，直到它完成循环。

# r - KnitR 在块和内联代码中如何以不同方式处理输出数字？

> ID：15313224
> 
> 赞同：3
> 
> 时间：2013-03-09T16:42:12.490
> 
> 标签：r, knitr

我对 KnitR 如何`digits`在块和内联代码中以不同方式处理输出感到困惑`\Sexpr{}`。一般来说，我希望它们得到相同的处理。一旦我了解如何为两种类型的输出设置选项，这应该不会造成任何问题，我在手册中没有找到。请参阅下面的 MWE。

```
\documentclass[12pt, english, oneside]{amsart}
\begin{document}
<<>>=
options(digits=2)
pi
@
\Sexpr{pi}
\end{document} 
```

如果你不想编译这个，块打印 3.1 而`\Sexpr`打印 3.14。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:33:38.513

根据`?options`：

```
 ‘digits’: controls the number of digits to print when printing
      numeric values.  It is a suggestion only.  Valid values are
      1...22 with default 7\.  See the note in ‘print.default’ about
      values greater than 15. 
```

特别注意**这只是一个建议**。但是在 中，默认情况下`knitr`，内联数字是`round()`根据`getOption('digits')`。

# python - 从python中的字典中删除字符

> ID：15313225
> 
> 赞同：2
> 
> 时间：2013-03-09T16:42:13.687
> 
> 标签：python, dictionary

我有一本像下面这样的字典

```
d = {'MNDTHNFEYH': ' 7.4775763897997019', 'MNDTNNTEYS': ' 7.6740344272610006', 
     "  ['MAPTNNTEYH": '[7.2142815502006803', 'MFPTNNTEYS': ' 7.5108109773494114',
     'MFDTHNAEYH': ' 7.6695035046773761'} 
```

在这本词典中，我试图删除`[`，但我没有得到它。所以它应该看起来像

```
d = {'MNDTHNFEYH': ' 7.4775763897997019', 'MNDTNNTEYS': ' 7.6740344272610006', 
     'MAPTNNTEYH': ' 7.2142815502006803', 'MFPTNNTEYS': ' 7.5108109773494114',
     'MFDTHNAEYH': ' 7.6695035046773761'} 
```

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:43:30.100

```
{k.translate(None,'''[ '"'''):v.translate(None,'[') for k,v in d.items()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:08:55.507

假设您的键中只有字母并浮动值，您可以使用正则表达式消除所有其他字符

```
import re
d = {'MNDTHNFEYH': ' 7.4775763897997019', 'MNDTNNTEYS': ' 7.6740344272610006', "   ['MAPTNNTEYH": '[7.2142815502006803', 'MFPTNNTEYS': ' 7.5108109773494114', 'MFDTHNAEYH': ' 7.6695035046773761'}
# In the key replace everything else that is not in A-Z with ''
# In value replace everything else that is not in 0-9 or . with ''
d = {re.sub(r'[^A-Z]+','',k):re.sub(r'[^0-9.]+','',v) for k,v in d.items()}
d
{'MAPTNNTEYH': '7.2142815502006803',
 'MFDTHNAEYH': '7.6695035046773761',
 'MFPTNNTEYS': '7.5108109773494114',
 'MNDTHNFEYH': '7.4775763897997019',
 'MNDTNNTEYS': '7.6740344272610006'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T16:53:12.237

您似乎只想从键和值前缀中删除字符“[”。str.lstrip 为您完成这项工作。您只需要遍历字典并从键和值中删除字符，同时通过字典理解重新生成字典。

```
>>> d={'MNDTHNFEYH': ' 7.4775763897997019', 'MNDTNNTEYS': ' 7.6740344272610006', "   ['MAPTNNTEYH": '[7.2142815502006803', 'MFPTNNTEYS': ' 7.5108109773494114', 'MFDTHNAEYH': ' 7.6695035046773761'}
>>> d = {k.strip(" [\"\'"): v.strip(" [\"\'") for k, v in d.items()}
>>> import pprint
>>> pp = pprint.PrettyPrinter(indent = 4)
>>> pp.pprint(d)
{   'MAPTNNTEYH': '7.2142815502006803',
    'MFDTHNAEYH': '7.6695035046773761',
    'MFPTNNTEYS': '7.5108109773494114',
    'MNDTHNFEYH': '7.4775763897997019',
    'MNDTNNTEYS': '7.6740344272610006'} 
```

如果您不使用 Py2.7+，您可以将生成器构造传递给内置`dict`

```
>>> d = dict(k.lstrip(" [\"\'"): v.lstrip(" [\"\'") for k, v in d.items()) 
```

# css - 如何在 CSS 中的图像上放置不透明的白色渐变？

> ID：15313228
> 
> 赞同：0
> 
> 时间：2013-03-09T16:42:31.517
> 
> 标签：css, gradient

如果有人问过这个问题，请提前道歉：我找不到它，但我不太确定我使用的关键字。

无论如何！我正在尝试在图像上放置一条不透明的白色渐变线。这是我试图把它放在上面的东西：

```
div.horizontal
{
    position: relative;
    width: 100%;
    height:45px;
}

div.horizontal ul
{
    list-style-type:none;
    margin:0;
    padding:0;
} 

div.horizontal li
{
    float:left;
}

div.horizontal a
{
    display:block;
    width:312px;
    height:35px;
    background-image: url("../img/truefactzheader.png");
}

div.horizontal a:link,div.horizontal a:visited
{
    font-weight:bold;
    color:#FFFFFF;
    text-align:center;
    vertical-align:middle;
    padding:4px;
    text-decoration:none;
    text-transform:uppercase;
}

div.horizontal a:hover,div.horizontal a:active
{
    height:45px;
    a:link {text-decoration:none;}
    a:visited {text-decoration:none;}
} 
```

渐变代码是这样的：

```
background: -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,0.15) 51%, rgba(255,255,255,0.15) 52%, rgba(255,255,255,0) 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(51%,rgba(255,255,255,0.15)), color-stop(52%,rgba(255,255,255,0.15)), color-stop(100%,rgba(255,255,255,0)));
background: -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ffffff',GradientType=0 ); 
```

我如何让一个胜过另一个？

编辑：

我试过这个：

```
background: url("../img/truefactzheader.png"), -moz-linear-gradient(top,  rgba(255,255,255,0) 0%, rgba(255,255,255,0.15) 51%, rgba(255,255,255,0.15) 52%, rgba(255,255,255,0) 100%);
background: url("../img/truefactzheader.png"), -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0)), color-stop(51%,rgba(255,255,255,0.15)), color-stop(52%,rgba(255,255,255,0.15)), color-stop(100%,rgba(255,255,255,0)));
background: url("../img/truefactzheader.png"), -webkit-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: url("../img/truefactzheader.png"), -o-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: url("../img/truefactzheader.png"), -ms-linear-gradient(top,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
background: url("../img/truefactzheader.png"), (linear-gradient(to bottom,  rgba(255,255,255,0) 0%,rgba(255,255,255,0.15) 51%,rgba(255,255,255,0.15) 52%,rgba(255,255,255,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00ffffff', endColorstr='#00ffffff',GradientType=0 ); 
```

但它仍然没有工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:45:47.050

渐变在 CSS 3 中被视为图像，因此只需在速记属性中包含渐变和由逗号分隔的 bg-image `background`，现在 CSS 3 允许多个背景图像。此外，由于 CSS 从右到左解析，您必须先指定渐变，*然后再*指定图像​​，以便它出现在图像“上方”。

# c# - 如何从 ASP.NET WebPages 站点中的文本文件填充 SQL Server Compact/SDF 表？

> ID：15313230
> 
> 赞同：1
> 
> 时间：2013-03-09T16:42:42.310
> 
> 标签：c#, sql-server-ce, asp.net-webpages, webmatrix-2

我在我的 asp.net 网站中创建了一个数据库（使用 WebMatrix）。

表格内容将是静态的 - 用户永远不会更改它们或添加记录。

表格内容现在存在于一个文本文件中，我想循环访问该文件以填充站点的表格。

填充这样一个表的正常方式是将插入代码添加到_AppStart，运行一次，然后将其注释掉或删除吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:50:35.700

我要么在 Visual Studio 中使用[SqlCeToolbox](http://sqlcetoolbox.codeplex.com/)，要么编写一些代码并从 WebMatrix 运行它。我看不出将代码放在 AppStart 中的意义。我只需创建一个单独的文件并右键单击它并选择在浏览器中启动。

# asp.net - asp.net 向导重新加载相同的步骤两次

> ID：15313237
> 
> 赞同：0
> 
> 时间：2013-03-09T16:43:46.633
> 
> 标签：asp.net

我有一个asp.net 向导控件。我在步骤 3 中使用具有一些文本框的数据网格获取用户输入。网格也有填充了一些相关信息的标记。在第四步中，我将处理输入并创建一些配置。

现在我需要在第 3 步之后和第 4 步之前显示一个信息摘要，其中包括输入信息（文本框和标签）。我可以为摘要创建一个新的向导步骤并显示所有这些信息，但我必须创建一种类似的datagrid/（或其他方式）通过填充步骤 3 中的所有信息。相反，我可以重用步骤 3 datagrid 添加了一些标签以及文本框，并仅在摘要步骤期间显示它。但为了做到这一点，我必须违反向导概念，例如在下一个按钮单击期间取消当前步骤（e.cancel = true），并有一些标志再次重新加载同一步骤，我觉得这不合适方式。

你们有更好的方法来实现这一点吗？抱歉，如果问题令人困惑，我可以根据查询添加更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:50:57.177

如果要将其合并到当前向导中，则需要`ActiveStepChanged`手动处理事件，并使用向导历史记录来确定应加载哪个步骤。

这将使您访问的最后一步：

```
/// <summary>
/// Gets the last wizard step visited.
/// </summary>
/// <returns></returns>
private WizardStep GetLastStepVisited()
{
    //initialize a wizard step and default it to null
    WizardStep previousStep = null;

    //get the wizard navigation history and set the previous step to the first item
    var wizardHistoryList = (ArrayList)wzServiceOrder.GetHistory();
    if (wizardHistoryList.Count > 0)
        previousStep = (WizardStep)wizardHistoryList[0];

    //return the previous step
    return previousStep;
} 
```

这是我前一段时间写的一些逻辑，与您尝试做的类似：

```
/// <summary>
/// Navigates the wizard to the appropriate step depending on certain conditions.
/// </summary>
/// <param name="currentStep">The active wizard step.</param>
private void NavigateToNextStep(WizardStepBase currentStep)
{
    //get the wizard navigation history and cast the collection as an array list 
    var wizardHistoryList = (ArrayList)wzServiceOrder.GetHistory();

    if (wizardHistoryList.Count > 0)
    {
        var previousStep = wizardHistoryList[0] as WizardStep;
        if (previousStep != null)
        {
            //determine which direction the wizard is moving so we can navigate to the correct step
            var stepForward = wzServiceOrder.WizardSteps.IndexOf(previousStep) < wzServiceOrder.WizardSteps.IndexOf(currentStep);

            if (currentStep == wsViewRecentWorkOrders)
            {
                //if there are no work orders for this site then skip the recent work orders step
                if (grdWorkOrders.Items.Count == 0)
                    wzServiceOrder.MoveTo(stepForward ? wsServiceDetail : wsSiteInformation);
            }
            else if (currentStep == wsExtensionDates)
            {
                //if no work order is selected then bypass the extension setup step
                if (grdWorkOrders.SelectedItems.Count == 0)
                    wzServiceOrder.MoveTo(stepForward ? wsServiceDetail : wsViewRecentWorkOrders);
            }
            else if (currentStep == wsSchedule)
            {
                //if a work order is selected then bypass the scheduling step
                if (grdWorkOrders.SelectedItems.Count > 0)
                    wzServiceOrder.MoveTo(stepForward ? wsServicePreview : wsServiceDetail);
            }
        }
    }
} 
```

# node.js - Node.js - 表达路线中的特殊字符 (/campañas)

> ID：15313238
> 
> 赞同：7
> 
> 时间：2013-03-09T16:43:52.090
> 
> 标签：node.js, express, routes, character

我在尝试使用 Express 框架在 Node JS 中设置路由时遇到问题。

我的路线是这样的：

```
app.get('/campaña/nueva', sms.nueva); 
```

但我无法让它工作，因为邪恶的“Ñ”（它与“N”一起工作）

我使用了一段时间的codeigniter，您可以设置要启用或禁用的字符你们知道在节点中启用它的任何workarround或方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T18:11:46.217

我认为您需要同时处理 URL 编码和可能的 UTF-8（也可能是 Latin-1）变体。检查以下内容：

1.  您的客户（浏览器）如何发送 URL？

    *   [URL 编码](http://www.javascripter.net/faq/accentedcharacters.htm)为`%C3%B1`?
        *   chrome 和 firefox 发送`%C3%B1`编码
        *   我认为这是主导和顺从的行为
    *   统一码？
        *   我用它进行了测试，`curl`它看起来发送一个字符，我认为它只是它从我的终端获得的任何编码，可能是 UTF-8。
2.  在此基础上，尝试调整您的路线。您可以使用正则表达式或显式列表

.

```
app.get('/campaña/nueva', sms.nueva)
app.get('/campa%c3%b1a/nueva', sms.nueva)
//Or for convenience if you like
app.get('/' + encodeURIComponent('campaña') + '/nueva', sms.nueva) 
```

我的猜测是大多数浏览器最终都会发送 URL 编码的版本，所以你可能只使用最后一个版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-23T09:05:51.277

`$`我在我的路线中遇到了同样的问题。URL 编码字符在我的情况下不起作用，但转义一个起作用。

所以我结束了

```
app.get('/\\$myRoute', function (req, res) {

} 
```

# printing - 将徽标打印到爱普生打印机

> ID：15313239
> 
> 赞同：0
> 
> 时间：2013-03-09T16:44:03.563
> 
> 标签：printing, epson

我在 C#.net 中将打印徽标命令发送到我的 Epson tm-t70 打印机时遇到问题

我在网上搜索过，我想出了很多神秘的东西。最有用的是我需要发送以下命令：

```
[Name] Print the specified NV graphics data.

[Format] ASCII GS ( L pL pH m fn kc1 kc2 x y

Hex 1D 28 4C 06 00 30 45 kc1 kc2 x y

Decimal 29 40 76 6 0 48 69 kc1 kc2 x y

[Range] (pL + pH × 256) = 6 (pL = 6, pH = 0)

m = 48

fn = 69

32 ≤ kc1 ≤ 126

32 ≤ kc2 ≤ 126 
```

我不知道如何在 C# 中启动此命令，并且文档没有太大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T14:45:58.670

那么下面的代码解决了它。感谢@stukelly 弄明白了

```
string GS = Convert.ToString((char)29);
string ESC = Convert.ToString((char)27);

//Assemble the paper cut command
string COMMAND = "";
COMMAND = ESC + "@";
COMMAND += GS + "V" + (char)1;

//Assemble the print logo command

String printCommand = ESC + "@";
printCommand += GS;

printCommand += Convert.ToString((char)40);
printCommand += Convert.ToString((char)76);
printCommand += Convert.ToString((char)6);
printCommand += Convert.ToString((char)0);
printCommand += Convert.ToString((char)48);
printCommand += Convert.ToString((char)69);
printCommand += Convert.ToString((char)48);
printCommand += Convert.ToString((char)48);
//printCommand += (48).ToString();
//printCommand += (48).ToString();
printCommand += ((char)(1)).ToString();
printCommand += ((char)(1)).ToString();

//END OF PRINT COMMAND 
```

# java - 用于多表模型的java相同的ArrayList

> ID：15313240
> 
> 赞同：2
> 
> 时间：2013-03-09T16:44:06.687
> 
> 标签：java, swing, jtable, abstracttablemodel

我正在努力避免多个 JTable 的数据重复。基本上我有一个 TableModel，它有一个数据数组列表和一个 string[] 标头。

到目前为止没有什么新鲜事。现在我有另一个 TableModel，它具有相同的数据数组列表，但具有不同的 string[] 标头。

我无法让我的代码工作。我将不胜感激有关如何跨多个表模型共享数据数组列表的一些想法。

因此，当我更改数据时，所有模型都会更新并且没有数据重复。我想避免复制 arraylist 任何想法还是我对这个设置有误？我确实尝试过监听器，但我认为这样下去我们仍然有跨表模型的数据重复。

```
public class GymTableModel extends AbstractTableModel {
    private final ResourceBundle name = ResourceBundle.getBundle("labels/TableLabel", Locale.getDefault());
    private final String[] entete = {
        name.getString("LNAME"),
        name.getString("FNAME"),
        name.getString("CONTACT"),
        name.getString("TELFIX"),
        name.getString("TELGSM"),
        name.getString("EMAIL"),
        name.getString("BDATE"),
        name.getString("EDATE"),
        name.getString("LICENSE"),
        name.getString("AGE"),
        name.getString("ANCIEN")
    };

    @Override
    public Class<?> getColumnClass(int columnIndex){
        switch(columnIndex){
            case 6:
                return Date.class;
            case 7:
                return Date.class;
            case 9:
                return Integer.class;
            default:
                return Object.class;
        }
    }

    @Override
    public int getRowCount() {
        return gymList.size();
    }

    @Override
    public int getColumnCount() {
        return entete.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        switch(columnIndex){
            case 0:
                return gymList.get(rowIndex).getLastName();
            case 1:
                return gymList.get(rowIndex).getFirstName();
            case 2:
                return gymList.get(rowIndex).getContact();
            case 3:
                return gymList.get(rowIndex).getTelFix();
            case 4:
                return gymList.get(rowIndex).getTelGsm();
            case 5:
                return gymList.get(rowIndex).getEmail();
            case 6:
                return gymList.get(rowIndex).getDateBirth();
            case 7:
                return gymList.get(rowIndex).getDateClub();
            case 8:
                return gymList.get(rowIndex).getLicence();
            case 9:
                return gymList.get(rowIndex).getAge();
            case 10:
                return gymList.get(rowIndex).getAnciennete();
            default:
                return null; // should never happen;
        }
    }

    public String getColumnName(int columnIndex){
        return entete[columnIndex];
    }

} 
```

现在我有另一个表，它具有相同的数据，但只有 3 列（LNAME、FNAME 和 AGE），所以 getColumnClass 不一样。问题是，我可以与另一个表模型共享我的 gymList 数据（这是一个 arrayList）吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T20:32:56.113

使用 Che 的答案作为包含四列的主表的基础，那么您的代码应该类似于：

```
AllTableModel model = new AllTableModel();
JTable mainTable = new JTable( model ); 
```

如果您想要另一个`View`模型，那么您将创建一个新视图而不是新模型。所以代码是：

```
JTable studentTable = new JTable( model );
studentTable.removeColumn( studentTable.getColumn("Subject") );
studentTable.removeColumn( studentTable.getColumn("Staff") ); 
```

现在 Student 表将只包含“Name”和“Grade”列。

这是 MVC 编程背后的基础。那就是你可以很容易地改变`View`. `Model`因此，您共享 1 个模型，而不是共享 3 个单独模型的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:25:17.000

您需要注册`TableModelListener`到`Tablemodel`两者的.. 以便每当表的单元格值之一发生更改时，相同的值`JTables`都可以通过`repaint()`. `JTable`例如考虑下面给出的代码：
![在此处输入图像描述](../Images/a79a1836301126f52f05fa7e579e5f0c.png)

```
import javax.swing.JFrame;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.JScrollPane;
import javax.swing.event.TableModelListener;
import javax.swing.event.TableModelEvent;
import javax.swing.table.AbstractTableModel;
import java.awt.Container;
import java.awt.GridLayout;
import java.util.ArrayList;
public class TablesHavingSameData extends JFrame implements TableModelListener
{
    MyTableModel model1;
    MyTableModel model2;
    JTable table1;
    JTable table2;
    ArrayList<ArrayList<String>> data;
    public void createAndShowGUI()
    {
        setTitle("JTables");
        Container c  = getContentPane();
        c.setLayout(new GridLayout(2,1));
        prepareData();
        model1 = new MyTableModel("table1");
        model2 = new MyTableModel("table2");
        table1 = new JTable(model1);
        table2 = new JTable(model2);
        model1.addTableModelListener(this);
        model2.addTableModelListener(this);
        JScrollPane jsTable1 = new JScrollPane(table1);
        JScrollPane jsTable2 = new JScrollPane(table2);
        c.add(jsTable1);
        c.add(jsTable2);
        setSize(500,300);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    @Override
    public void tableChanged(TableModelEvent evt)
    {
        AbstractTableModel model = (MyTableModel)evt.getSource();
        if (model == model1)
        {
            table2.repaint();
        }
        else
            table1.repaint();
    }
    private void prepareData()
    {
        data = new ArrayList<ArrayList<String>>();
        data.add(new ArrayList<String>(){{add("1");add("Michael");}});
        data.add(new ArrayList<String>(){{add("2");add("Derake");}});
        data.add(new ArrayList<String>(){{add("3");add("Archie");}});
    }
    private class MyTableModel extends AbstractTableModel
    {
        String columns[] ;
        String sTableName;
        public MyTableModel(String tableName)
        {
            sTableName = tableName;
            if ("table1".equals(sTableName))
            {
                columns = new String[] {"Roll No.","Name"};
            }
            else
            {
                columns = new String[] {"Emp ID.","Employee Name"};
            }
        }
        @Override
        public String getColumnName(int columnIndex)
        {
            return columns[columnIndex];
        }
        @Override
        public int getRowCount()
        {
            return data.size();
        }
        @Override 
        public int getColumnCount()
        {
            return columns.length;
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return data.get(row).get(col);
        }
        @Override
        public void setValueAt(Object aValue, int rowIndex, int colIndex)
        {
            data.get(rowIndex).set(colIndex,(String)aValue);
            fireTableCellUpdated(rowIndex,colIndex);
        }
        @Override
        public boolean isCellEditable(int row, int col)
        {
            return true;
        }
    }
    public static void main(String[] args) 
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                TablesHavingSameData ths = new TablesHavingSameData();
                ths.createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T18:08:23.687

我使用了一个存储所有行的表模型，另一个只存储学生详细信息的表模型和存储员工详细信息的第三个表模型。他们都从同一来源获取数据，但每个表的列显示不同。

![所有表模型](../Images/28d60929a80e34ae5d94c8db49c1a455.png)

```
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

public class AllTableExample {

    private JTabbedPane tabbedPane;
    private JTable allTable;
    private JTable studentTable;
    private JTable staffTable;

    public AllTableExample() {
        setData();

        allTable = new JTable();
        studentTable = new JTable();
        staffTable = new JTable();
    }

    public void createUI() {
        JFrame frame = new JFrame();

        tabbedPane = new JTabbedPane();

        tabbedPane.add("All", getAllTablePanel());
        tabbedPane.add("Student", getStudentTablePanel());
        tabbedPane.add("Staff", getStaffTablePanel());

        frame.add(tabbedPane);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Table Model Example.");
        frame.pack();
        frame.setVisible(true);
    }

    private void setData() {
        List<TableData> data = new ArrayList<TableData>();
        data.add(new TableData("John1", "A", "Maths", "Hellen1"));
        data.add(new TableData("John2", "A", "Maths", "Hellen2"));
        data.add(new TableData("John3", "A", "Maths", "Hellen3"));
        data.add(new TableData("John4", "A", "Maths", "Hellen4"));
        data.add(new TableData("John5", "A", "Maths", "Hellen5"));

        MainDataClass.getInstance().setData(data);
    }

    private JPanel getAllTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(new AllTableModel());
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    private JPanel getStudentTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(new StudentTableModel());
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    private JPanel getStaffTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(new StaffTableModel());
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new AllTableExample().createUI();
            }
        };

        EventQueue.invokeLater(r);
    }

}

class AllTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Name", "Grade", "Subject", "Staff"};

    public AllTableModel() {
        tableData = MainDataClass.getInstance().getData();
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getName();
        case 1:
            return data.getGrade();
        case 2:
            return data.getSubject();
        case 3:
            return data.getStaff();
        default:
            return null;
        }
    }

}

class StudentTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Name", "Grade"};

    public StudentTableModel() {
        tableData = MainDataClass.getInstance().getData();
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getName();
        case 1:
            return data.getGrade();
        default:
            return null;
        }
    }
}

class StaffTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Subject", "Staff"};

    public StaffTableModel() {
        tableData = MainDataClass.getInstance().getData();
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getSubject();
        case 1:
            return data.getStaff();
        default:
            return null;
        }
    }
}

class TableData {

    private String name;
    private String grade;
    private String subject;
    private String staff;

    public TableData(String name, String grade, String subject, String staff) {
        super();
        this.name = name;
        this.grade = grade;
        this.subject = subject;
        this.staff = staff;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getGrade() {
        return grade;
    }
    public void setGrade(String grade) {
        this.grade = grade;
    }
    public String getSubject() {
        return subject;
    }
    public void setSubject(String subject) {
        this.subject = subject;
    }
    public String getStaff() {
        return staff;
    }
    public void setStaff(String staff) {
        this.staff = staff;
    }
}

class MainDataClass {

    private static MainDataClass mainDataClass;
    private List<TableData> data;

    private MainDataClass() {

    }

    public static MainDataClass getInstance() {
        if(null == mainDataClass) {
            mainDataClass = new MainDataClass();
        }
        return mainDataClass;
    }

    public List<TableData> getData() {
        return data;
    }

    public void setData(List<TableData> data) {
        this.data = data;
    }
} 
```

**编辑-2：**

> 参考@camickr 对仅使用一种模型的解释，我尝试了这个模型，它奏效了。使用`removeColumn`它的方法就像一个魅力。

```
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

public class AllTableExample {

    private JTabbedPane tabbedPane;
    private JTable allTable;
    private JTable studentTable;
    private JTable staffTable;
    private AllTableModel allTableModel;

    public AllTableExample() {
        allTable = new JTable();
        studentTable = new JTable();
        staffTable = new JTable();

        allTableModel = new AllTableModel();
    }

    public void createUI() {
        JFrame frame = new JFrame();

        tabbedPane = new JTabbedPane();

        tabbedPane.add("All", getAllTablePanel());
        tabbedPane.add("Student", getStudentTablePanel());
        tabbedPane.add("Staff", getStaffTablePanel());

        frame.add(tabbedPane);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Table Model Example.");
        frame.pack();
        frame.setVisible(true);
    }

    private JPanel getAllTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(allTableModel);
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    private JPanel getStudentTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(allTableModel);
        table.removeColumn(table.getColumn("Subject"));
        table.removeColumn(table.getColumn("Staff"));
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    private JPanel getStaffTablePanel() {
        JPanel panel = new JPanel();
        JTable table = new JTable(allTableModel);
        table.removeColumn(table.getColumn("Name"));
        table.removeColumn(table.getColumn("Grade"));
        JScrollPane scroll = new JScrollPane(table);
        panel.add(scroll);

        return panel;
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {
                new AllTableExample().createUI();
            }
        };

        EventQueue.invokeLater(r);
    }

}

class AllTableModel extends AbstractTableModel {

    List<TableData> tableData = new ArrayList<TableData>();

    Object[] columnNames = {"Name", "Grade", "Subject", "Staff"};

    public AllTableModel() {
        List<TableData> data = new ArrayList<TableData>();
        data.add(new TableData("John1", "A", "Maths", "Hellen1"));
        data.add(new TableData("John2", "A", "Maths", "Hellen2"));
        data.add(new TableData("John3", "A", "Maths", "Hellen3"));
        data.add(new TableData("John4", "A", "Maths", "Hellen4"));
        data.add(new TableData("John5", "A", "Maths", "Hellen5"));
        tableData = data;
    }

    @Override
    public String getColumnName(int column) {
        return columnNames[column].toString();
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return tableData.size();
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        TableData data = tableData.get(rowIndex);
        switch (columnIndex) {
        case 0:
            return data.getName();
        case 1:
            return data.getGrade();
        case 2:
            return data.getSubject();
        case 3:
            return data.getStaff();
        default:
            return null;
        }
    }

}

class TableData {

    private String name;
    private String grade;
    private String subject;
    private String staff;

    public TableData(String name, String grade, String subject, String staff) {
        super();
        this.name = name;
        this.grade = grade;
        this.subject = subject;
        this.staff = staff;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getGrade() {
        return grade;
    }
    public void setGrade(String grade) {
        this.grade = grade;
    }
    public String getSubject() {
        return subject;
    }
    public void setSubject(String subject) {
        this.subject = subject;
    }
    public String getStaff() {
        return staff;
    }
    public void setStaff(String staff) {
        this.staff = staff;
    }
}

class MainDataClass {

    private static MainDataClass mainDataClass;
    private List<TableData> data;

    private MainDataClass() {

    }

    public static MainDataClass getInstance() {
        if(null == mainDataClass) {
            mainDataClass = new MainDataClass();
        }
        return mainDataClass;
    }

    public List<TableData> getData() {
        return data;
    }

    public void setData(List<TableData> data) {
        this.data = data;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T17:42:57.093

`data`具有不同列名的相同小示例：

```
import java.awt.BorderLayout;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.AbstractTableModel;

public class TestTable {

    public static class MyModel extends AbstractTableModel {

        private List<Object[]> data;
        private List<String> columnNames;

        public MyModel(List<String> columnNames, List<Object[]> data) {
            super();
            this.columnNames = columnNames;
            this.data = data;
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public int getColumnCount() {
            return columnNames.size();
        }

        @Override
        public String getColumnName(int column) {
            return columnNames.get(column);
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            return data.get(rowIndex)[columnIndex];
        }

    }

    protected void initUI() {
        JFrame frame = new JFrame(TestTable.class.getSimpleName());
        List<String> columns = Arrays.asList("Name", "Age");
        List<String> columns2 = Arrays.asList("Label", "Price");
        List<Object[]> data = new ArrayList<Object[]>();
        for (int i = 0; i < 50; i++) {
            Object[] value = new Object[2];
            value[0] = "Something-" + i;
            value[1] = 12 + i;
            data.add(value);
        }
        JTable table = new JTable(new MyModel(columns, data));
        JTable table2 = new JTable(new MyModel(columns2, data));
        frame.add(new JScrollPane(table), BorderLayout.WEST);
        frame.add(new JScrollPane(table2), BorderLayout.EAST);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTable().initUI();
            }
        });
    }
} 
```

# jquery - Jquery 不显示来自 WCF 的 Json 数据

> ID：15313241
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:44:13.583
> 
> 标签：jquery, ajax, wcf, cross-domain

我写了一个简单的 WCF 方法。它返回正确的值，但它显示 200

```
 $.ajax({
        url: "http://localhost:60770/Service.svc/GetContacts?calback=?",
        type: "POST",
        dataType: "JSON",
        contentType: "application/json",
        data: "{}",
        crossDomain: true,
        processdata: true,
        success: function (response) {
        //    var data = response;
            alert("data.FirstName");
        },

        error: function (e) {
            alert('error ' + e.status + ' ' + e.responseText);

        }
    }); 
```

它会出错，当我使用 FireBug 检查响应时。它在那里显示 Json。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:46:32.503

看起来您在这里混合了 JSON 和 JSONP。

您有`crossDomain:true`绝对 URL，但指向本地主机。然后您在示例中有错字`?calback=?`（缺少“l”和第二个“？”）。

在 JSONP 中，您的：

```
/GetContacts?calback=myFunction 
```

您期望的结果如下：`myFunction({"d":"Hello"})`

`myFunction`会自动调用。在你的情况下“？” 是函数的名称。而 WCF，.NET 4 它支持 JSONP，但你必须启用它： [How to natively enable JSONP for existing WCF service?](https://stackoverflow.com/questions/8219579/how-to-natively-enable-jsonp-for-existing-wcf-service)

所以我会关闭`crossDomain:true`并提供不带参数的相对 url `callback`，或者阅读一下 JSONP：JSONP [到底是什么？](https://stackoverflow.com/questions/2067472/what-is-jsonp-all-about)

# asp.net - asp.net - 日期 - 服务器中的日期格式更改

> ID：15313244
> 
> 赞同：0
> 
> 时间：2013-03-09T16:44:39.423
> 
> 标签：asp.net, sql, date

我在 asp.net 中有一个代码，用户通过 AJAX 日历弹出控件输入日期选择，如下所示：

```
<td class="style14">
<asp:TextBox ID="DateSelection" runat="server" Height="22px" Width="90px"
AutoPostBack="True"></asp:TextBox>
<asp:ImageButton ID="ImageButtonDateSelection" runat="server" Height="22px" 
ImageUrl="~/Images/Calendar.jpg" Width="19px" />
<asp:CalendarExtender ID="CalendarExtenderDateSelection" runat="server" 
Format="dd/MM/yyyy" PopupButtonID="ImageButtonDateSelection" 
PopupPosition="BottomRight" TargetControlID="DateSelection" 
FirstDayOfWeek="Monday">
</asp:CalendarExtender></td> 
```

我从 SQL 中获取日期并在 SQL 代码中使用它，如下所示：

```
declare @dt datetime 
set @dt = convert(datetime,'" & DateSelection.Text & "',104 
```

我的远程桌面一切正常，但是当我发布网站时，由于服务器上的日期格式不同，它无法正常工作。

我不知道服务器有什么格式，但我想知道是否有一种万无一失的方法来处理任何日期格式，这样我就可以在我的电脑上使用我的日期格式进行开发并将代码安全地发送到服务器并保证它会起作用。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:14:50.180

**首先，您可以通过**[DBCC USEROPTIONS](http://msdn.microsoft.com/en-us/library/ms180065%28v=sql.105%29.aspx)检查您在该服务器上的连接的日期格式设置是什么

```
DBCC USEROPTIONS 
```

输出：

```
Set Option  Value
----------------------
...
language    us_english
dateformat  mdy         <---
datefirst   7
... 
```

**其次，您可以使用**[SET DATEFORMAT](http://msdn.microsoft.com/en-us/library/ms189491%28v=sql.105%29.aspx)更改连接的日期格式

```
SET DATEFORMAT MDY; 
```

**第三**，您始终可以使用 SQL/ISO 日期格式，即`YYYY-MM-DD`

```
DECLARE @dt DATETIME 
SET @dt = CONVERT(DATETIME,'2013-03-09') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:00:18.567

将文化属性设置为： - <%@ Page Title="" Language="C#" MasterPageFile="~/User/MainMaster.master" AutoEventWireup="true" CodeFile="MemberRegistration.aspx.cs" Inherits="HO_MemberRegistration"文化="英文" %>

# python - Python BeautifulSoup 提取特定的 URL

> ID：15313250
> 
> 赞同：8
> 
> 时间：2013-03-09T16:45:19.367
> 
> 标签：python, python-2.7, web-scraping, beautifulsoup

是否可以仅获取特定的 URL？

像：

```
<a href="http://www.iwashere.com/washere.html">next</a>
<span class="class">...</span>
<a href="http://www.heelo.com/hello.html">next</a>
<span class="class">...</span>
<a href="http://www.iwashere.com/wasnot.html">next</a>
<span class="class">...</span> 
```

输出应该只是来自的 URL`http://www.iwashere.com/`

比如，输出 URL：

```
http://www.iwashere.com/washere.html
http://www.iwashere.com/wasnot.html 
```

我是通过字符串逻辑做到的。有没有使用 BeautifulSoup 的直接方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-09T16:54:37.097

您可以匹配多个方面，包括对属性值使用正则表达式：

```
import re
soup.find_all('a', href=re.compile('http://www\.iwashere\.com/')) 
```

匹配（对于您的示例）：

```
[<a href="http://www.iwashere.com/washere.html">next</a>, <a href="http://www.iwashere.com/wasnot.html">next</a>] 
```

因此，任何具有以字符串开头的值`<a>`的属性的标记。`href``http://www.iwashere.com/`

您可以遍历结果并仅选择`href`属性：

```
>>> for elem in soup.find_all('a', href=re.compile('http://www\.iwashere\.com/')):
...     print elem['href']
... 
http://www.iwashere.com/washere.html
http://www.iwashere.com/wasnot.html 
```

要改为匹配所有相对路径，请使用否定前瞻断言来测试该值是否*不*以模式（例如`http:`or `mailto:`）或双斜杠 ( `//hostname/path`) 开头；任何此类值都*必须*是相对路径：

```
soup.find_all('a', href=re.compile(r'^(?!(?:[a-zA-Z][a-zA-Z0-9+.-]*:|//))')) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T15:12:57.760

如果您使用[BeautifulSoup 4.0.0](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors)或更高版本：

```
soup.select('a[href^="http://www.iwashere.com/"]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-09T22:40:40.747

[您可以通过gazpacho](https://github.com/maxhumber/gazpacho)中的部分匹配来解决此问题：

输入：

```
html = """\
<a href="http://www.iwashere.com/washere.html">next</a>
<span class="class">...</span>
<a href="http://www.heelo.com/hello.html">next</a>
<span class="class">...</span>
<a href="http://www.iwashere.com/wasnot.html">next</a>
<span class="class">...</span>
""" 
```

代码：

```
from gazpacho import Soup

soup = Soup(html)
links = soup.find('a', {'href': "http://www.iwashere.com/"}, partial=True)
[link.attrs['href'] for link in links] 
```

这将输出：

```
# ['http://www.iwashere.com/washere.html', 'http://www.iwashere.com/wasnot.html'] 
```

# sqlite - 如何处理带有大量参数的参数化 SQLite 查询 Phonegap

> ID：15313252
> 
> 赞同：1
> 
> 时间：2013-03-09T16:45:25.153
> 
> 标签：sqlite, cordova

我想知道是否有人可以建议我一种更聪明的方法来处理带有大量参数（最多 20 多个字段）的 SQLite 查询。

如今，我正在编写类似下面示例的代码。如果我以错误的顺序放置参数，那会很头疼。我认为查询应该是一次性的，需要仔细构建。你这么说我没问题。但是如果有人（或我）修改了查询（添加/删除）参数，则需要一些时间来一次又一次地仔细检查参数顺序。

```
tx.executeSql('INSERT INTO some_table 
VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)', [a, b, c, ...., z], , function(tx, res) {
/* Some code here */
} 
```

有人可以建议或推荐我处理这些参数并使其更具可读性并易于维护代码的实用方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T19:46:58.847

SQLite 允许使用[不同的参数占位符](http://www.sqlite.org/lang_expr.html#varparam)；带有`:`、`@`或`$`前缀的参数可以有名称。

可以编写自己的包装器来`executeSql`检查 SQL 字符串，提取参数名称，并使用具有相同名称的变量的值构造一个参数数组：

```
myExecuteSQL('INSERT INTO MyTable VALUES(:a, :b, :c)') 
```

Tcl SQLite 包装器就是这样做的。但是，我不知道任何 JavaScript 实现。

# image - Wordpress - 当管理员通过帖子编辑器添加图像时如何实现此效果

> ID：15313253
> 
> 赞同：0
> 
> 时间：2013-03-09T16:45:26.443
> 
> 标签：image, wordpress

我试图弄清楚如何将这种效果应用于管理员添加到帖子中的所有图像。尝试过 CSS3、伪类、Jquery > 添加类，但似乎都没有给我合适的结果，可以适应图像大小。我知道我在其他网站上看到过这个，只是不知道该怎么做。

当管理员添加一张或多张图片发布时，我只想将此效果应用于每张图片（见截图）

![在此处输入图像描述](../Images/c512ca0b4f06d58197ccf6d009db9b1f.png)

**[编辑]**

当前的 CSS：

```
.overlay-top {
    background:url('images/top-right.png') no-repeat scroll top right transparent;
    height:85px;
    position:relative;
    top:55px;
    left:13%;
}

.overlay-bottom {
    background:url('images/bottom-left.png') no-repeat scroll top left transparent;
    height:85px;
    position:relative;
    bottom:70px;
    right:13%;
}

.img-overlay {
    width:auto !important;
} 
```

当前的jQuery：

```
$("#main a").has("img").addClass("img-overlay");
$("section.post_content a img").addClass("overlay-img");
$(".overlay-img").after("<div class='overlay-bottom'></div>");
$(".overlay-img").before("<div class='overlay-top'></div>"); 
```

在它是一个伪类之前：

```
.img-overlay {
    display: block;
    height: 100%;
    width:90%;
    margin: 25px auto;
    position: relative;
}

.img-overlay:before {
    content: url('images/top-right.png');
    position: absolute;
    right: -33px;
    top: -19px;
}

.img-overlay:after {
    content: url('images/bottom-left.png');
    position: absolute;
    left: -31px;
    bottom: -23px;
} 
```

目前它是我能得到的最好的，但它仍然不是完美的，我只尝试了两个不同尺寸的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:07:46.313

通过删除 .img-overlay 选择器中的大多数样式并使用 psuedo 类和 .img-overlay 上的内联块来修复它

谢谢

# java - 使用java生成html输出

> ID：15313254
> 
> 赞同：0
> 
> 时间：2013-03-09T16:45:29.080
> 
> 标签：java

我想根据列表生成如下所示的 html 输出。列表将从 xml 文件中可用的内容生成。使用 XMLEventReader 能够读取菜单文件并生成包含以下详细信息的列表菜单名称、深度、孩子的数量以及他们的父母是谁。现在我能够生成输出，但是当子菜单出现时，输出被折叠。此外，我不确定如何在检查子菜单时实现递归。如果有人帮助我，这将非常有帮助。

```
 Here follows the expected html output
         The htmloutput looks like below 
            <li><a >Item 1</a>
                        <ul>
                            <li><a >Item 1.0</a>
                                <ul>
                                    <li><a >Item 1.0.0</a></li>
                                </ul>
                            </li>

                            <li><a >Item 1.0.1</a></li>

                            <li><a >Item 1.0.2</a>
                                <ul>
                                    <li><a >Item 1.0.2.0</a>
                                        <ul>
                                            <li><a >Item 1.2.0.1</a></li>
                                        </ul>
                                    </li>

                                </ul>
                            </li>
                        </ul>
                    </li>

        Here follows code snippet of menu file

            <?xml version="1.0" encoding="UTF-8"?>
                <Menu name="Item 1">
                    <Menu name="Item 1.0">
                        <MenuItem>
                            <Name>Item 1.0.0</Name>             
                        </MenuItem>
                        <MenuItem>
                            <Name>Item 1.0.1</Name>

                        </MenuItem>
                        <Menu name="Item 1.0.2" >
                            <MenuItem>
                                <Name>Item 1.0.2.0</Name>                   
                            </MenuItem>
                        </Menu>
                    </Menu>
                </Menu> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T16:51:53.993

您可以使用 Java 运行 XSL 转换：

[http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPXSLT6.html](http://docs.oracle.com/javaee/1.4/tutorial/doc/JAXPXSLT6.html)

# php - 使用 PEAR 包 Horde_Text_Diff

> ID：15313255
> 
> 赞同：3
> 
> 时间：2013-03-09T16:45:30.507
> 
> 标签：php, dependencies, pear

我安装了[Horde_Text_Diff](http://www.horde.org/libraries/Horde_Text_Diff/library)，它取代[了 Text_Diff](http://pear.php.net/package/Text_Diff/)。问题是：当我尝试使用它时，它给了我：

```
Class 'Horde_Text_Diff_Engine_Native' not found 
```

我查看了文件，看起来有十五个左右的类相互依赖，并且没有一个文件相互包含。我必须手动执行此操作吗？同样，大约有十五个文件。

这是 PEAR 包的工作方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:13:42.603

您需要使用与 PSR-0 兼容的自动加载器，该自动加载器会在包含路径中可用时自动包含类。Horde 提供了一个，[Horde_Autoloader](http://www.horde.org/libraries/Horde_Autoloader/)。

# wpf - WPF：如何找出决定窗口大小的元素？

> ID：15313256
> 
> 赞同：0
> 
> 时间：2013-03-09T16:45:35.890
> 
> 标签：wpf

我有一个复杂的 WPF 窗口，它使用了多个布局在网格、堆栈面板等中的控件。在运行时，我发现窗口的大小太宽了。

通常，对于一个小型代码库，我会检查整个布局的宽度、最小宽度、最大宽度和列宽度，但我正在处理一个巨大的代码库（这些控件分布在几十个 XAML 文件中，对于一些我没有甚至拥有源代码）。

我正在寻找一种工具，使用它我可以将鼠标悬停（？）在控件上并找出它是如何得出其大小的。有这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T18:33:32.290

试试[窥探](http://snoopwpf.codeplex.com/)。这是一个出色的 wpf 视觉分解器。它就像 wpf 的萤火虫。

# c# - 从 URL 保存图像

> ID：15313260
> 
> 赞同：0
> 
> 时间：2013-03-09T16:45:52.583
> 
> 标签：c#, .net, image, windows-phone-7, windows-phone

我一直在尝试从 Windows Phone 7 中的 URL 保存图像。我尝试过[http://imagetools.codeplex.com/](http://imagetools.codeplex.com/)和 WritableBimap，但我总是遇到无法加载的问题（高度为零，因为图像尚未加载，或其他跨线程异常（假设我正在使用后台线程）。是否有一个简单的库可以让我从 URL**保存和调整图像大小？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:53:24.723

要下载和存储图像，您需要执行以下操作：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://i.imgur.com/IgomXCN.jpg");

request.BeginGetResponse(new AsyncCallback((result) =>
    {
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
        byte[] content = ReadFully(response.GetResponseStream());

        MediaLibrary lib = new MediaLibrary();
        lib.SavePictureToCameraRoll("Test Picture", content);
    }), null); 
```

**ReadFully**是 Jon Skeet[在此处](https://stackoverflow.com/a/221941/303696)记录的一个函数，用于将流转换为字节数组。如其他答案之一所述，[MediaLibrary](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)是**Microsoft.Xna.Framework程序集的一部分。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:54:15.793

您目前使用的是**WebClient**还是**WebRequest**？

**MediaLibrary.SavePicture**也可能有效

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary.savepicture.aspx)

这些也是**官方**的Microsoft 库，因此它们可能比外部库更好地工作。

对于调整大小，您可能有兴趣查看强烈推荐的[http://www.leadtools.com/sdk/silverlight/windows-phone.htm](http://www.leadtools.com/sdk/silverlight/windows-phone.htm)

您可能还对 Microsoft 博客中的这篇文章感兴趣：http: [//blogs.msdn.com/b/mikeormond/archive/2010/12/09/resizing-images-in-windows-phone-7.aspx](http://blogs.msdn.com/b/mikeormond/archive/2010/12/09/resizing-images-in-windows-phone-7.aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T16:53:44.873

查看[SimpleImage.Resizer](http://nuget.org/packages/Simple.ImageResizer)

源代码在[github](https://github.com/terjetyl/Simple.ImageResizer)上可用。

如果您想查看它的实际效果，作者还在[apphb 上设置了一个演示。](http://imageresizer.apphb.com/)

# android - 在用户触摸 Android 时添加 ImageButton

> ID：15313265
> 
> 赞同：0
> 
> 时间：2013-03-09T16:46:17.173
> 
> 标签：android, android-button, android-image

我有一个画布，用户可以在其中添加代表现实世界设备的图标。但是，是否可以动态创建 ImageButton 而不仅仅是图标？如果没有，是否有任何简单的方法来监听用户触摸图标以执行代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:28:35.463

对于触摸图标并接收回调，您可以使用 onTouchListener。

```
public boolean onTouch(View v, MotionEvent me) {

    return false;
} 
```

查看更多关于 onTouch [http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:50:41.373

用于[`MotionEvent`](http://developer.android.com/reference/android/view/MotionEvent.html)查看用户是否单击图像内的某个位置。

# java - String.valueOf(long a) 和连接 ("" + a) 之间的区别

> ID：15313266
> 
> 赞同：2
> 
> 时间：2013-03-09T16:46:17.327
> 
> 标签：java

哪种方法更好，为什么？

如果我写

```
cmissValue = String.valueOf(callDBDatasource.cMiss()); 
```

或者

```
cmissValue = "" + callDBDatasource.cMiss(); 
```

应该采取什么方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T16:49:09.170

```
"" + callDBDatasource.cMiss(); 
```

将编译为：

```
new StringBuilder().append("").append(callDBDatasource.cMiss()).toString(); 
```

这将创建一个新对象，因此速度**明显**变慢。看到这个问题：[字符串连接真的那么慢吗？](https://stackoverflow.com/questions/15177987/is-string-concation-really-that-slow)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T16:52:21.703

这在这里很有用（“将数字转换为字符串”部分）：[http ://www.odi.ch/prog/design/newbies.php](http://www.odi.ch/prog/design/newbies.php)

不久：

```
 String.valueOf(callDBDatasource.cMiss()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T17:23:48.180

对于那些感兴趣的人，我已经对这两种情况进行了建模并为它们生成了字节码。

这是第一种情况的程序：

```
import java.util.Random;

public class Test1 {
  public static void main(String[] args) {
    long l = new Random().nextLong();
    String s = String.valueOf(l);
    System.out.println(s);
  }
} 
```

...这是字节码：

```
0:  new             #2; //class java/util/Random
3:  dup
4:  invokespecial   #3; //Method java/util/Random."<init>":()V
7:  invokevirtual   #4; //Method java/util/Random.nextLong:()J
10: lstore_1
11: lload_1
12: invokestatic    #5; //Method java/lang/String.valueOf:(J)Ljava/lang/String;
15: astore_3
16: getstatic       #6; //Field java/lang/System.out:Ljava/io/PrintStream;
19: aload_3
20: invokevirtual   #7; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
23: return 
```

这是你所期望的。

现在，这是一个模拟第二种情况的程序：

```
import java.util.Random;

public class Test2 {
  public static void main(String[] args) {
    long l = new Random().nextLong();
    String s = "" + l;
    System.out.println(s);
  }
} 
```

...这是字节码：

```
0:  new             #2;  //class java/util/Random
3:  dup
4:  invokespecial   #3;  //Method java/util/Random."<init>":()V
7:  invokevirtual   #4;  //Method java/util/Random.nextLong:()J
10: lstore_1
11: new             #5;  //class java/lang/StringBuilder
14: dup
15: invokespecial   #6;  //Method java/lang/StringBuilder."<init>":()V
18: ldc             #7;  //String 
20: invokevirtual   #8;  //Method java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
23: lload_1
24: invokevirtual   #9;  //Method java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
27: invokevirtual   #10; //Method java/lang/StringBuilder.toString:()Ljava/lang/String;
30: astore_3
31: getstatic       #11; //Field java/lang/System.out:Ljava/io/PrintStream;
34: aload_3
35: invokevirtual   #12; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
38: return 
```

As you can see, many more bytecodes are produced than the first case. You can also see (at 11 through 27) that a `StringBuilder` is used to concatenate the values, as mentioned in the accepted answer.

# php - 数据表中不同记录的总和

> ID：15313268
> 
> 赞同：1
> 
> 时间：2013-03-09T16:46:32.363
> 
> 标签：php, datatables

我通过在 ajax jquery 和 php 中使用数据表插件创建了一个表。有一列状态显示发布，未发布....我想显示记录总数，已发布总数和未发布总数...我可以这样做吗？

这是我尝试过的

```
var oTable = $('#listings_row').dataTable( {
"iDisplayLength": 25,
             "iDisplayStart": 0,
                "bProcessing": true,
                "bServerSide": true,
                "sPaginationType": "full_numbers",
                "sAjaxSource": "ajax_files/server_processing_rentals.php",
                "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {  return nRow;
}
            } ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:49:44.723

您可以`SUM`在查询（我假设）SQL 数据库中使用该函数。

# microcontroller - AVRISPmkII 连接状态：未知状态 0x00

> ID：15313269
> 
> 赞同：8
> 
> 时间：2013-03-09T16:46:38.393
> 
> 标签：microcontroller, avr, avrdude

嗯..我一直在网上搜索很多角落..但我找不到解决我的问题的方法。上次我使用我的 AVRISP2 时效果很好。现在，当我尝试在 uC 上编写程序时收到以下消息：

```
avrdude: stk500v2_command(): command failed
avrdude: stk500v2_program_enable(): bad AVRISPmkII connection status: Unknown status 0x00
avrdude: initialization failed, rc=-1
         Double check connections and try again, or use -F to override
         this check. 
```

我在互联网上找到了很多帖子，但没有任何解决方案。有谁知道问题可能是什么？

我已经检查了引脚，我更新了 ISP 的固件（blinkdemo 有效）。

谢谢你的任何提示..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T00:48:01.973

我和我的一些朋友花了很多时间，但经过数小时的搜索、尝试和“调试”，我们能够解决问题。我希望这可以帮助遇到同样问题的其他人解决它。

问题是 ISP，在我的例子中是 USB-Prog 3.3，对我的 Atmega8**来说太快**了，它只以 1MHz 的速度运行。所以有两种可能的解决方案：

*   减慢ISP的速度
*   加快 Atmega8 的速度

我在某处发红，ISP 的速度不得超过底层微控制器速度的 1/4。

以下几行节省了我的一天：

*它将 Atmega8 设置为 8MHz，并给它 64ms 来启动该频率。*

```
avrdude -p atmega8 -P usb -c avrispv2 -U lfuse:w:0xe4:m -U hfuse:w:0xd9:m -B 22 
```

这是 avrdude 联机帮助页的摘录：

```
`-B BITCLOCK'
        Specify the bit clock period for the JTAG interface or the ISP
        clock (JTAG ICE only).  The value is a floating-point number in
        microseconds.  The default value of the JTAG ICE results in about
        1 microsecond bit clock period, suitable for target MCUs running
        at 4 MHz clock and above.  Unlike certain parameters in the
        STK500, the JTAG ICE resets all its parameters to default values
        when the programming software signs off from the ICE, so for MCUs
        running at lower clock speeds, this parameter must be specified on
        the command-line. 
```

此外，我想推荐适用于 Android 的**AVR Fuse Calculator** - 它似乎对微控制器程序员来说是一个非常有用的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-21T10:52:38.383

另一个（常见？）问题可能是尝试直接在面包板上闪烁时缺少晶体。我已经忘记了两次，并且还收到了此错误消息。因此，除了连接 ISP 引脚外，如果 ATmega 配置为使用外部振荡器（请参阅 ATmega 的数据表），请确保将晶体加电容器连接到 ATmega 的 XTAL1 和 XTAL2 引脚。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T12:13:15.263

首先，我建议您检查微控制器本身。我收到了同样的错误信息，我发现我的 Atmega 已损坏。换新的解决了这个问题。

# linux - ubuntu 上次关机的原因？

> ID：15313271
> 
> 赞同：1
> 
> 时间：2013-03-09T16:46:57.740
> 
> 标签：linux, shutdown

如何知道 Ubuntu 10.04 中最后一次关闭操作的原因是什么？意味着我要跟踪上次关机的原因？无论是由于温度还是由于电池背面等原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:56:19.417

查看系统日志，我提供的这个站点有您可以查看的所有日志，例如 /var/log/boot

[http://www.cyberciti.biz/faq/ubuntu-linux-gnome-system-log-viewer/](http://www.cyberciti.biz/faq/ubuntu-linux-gnome-system-log-viewer/)

# xcode - 当我从 XCode 结束项目时工具栏隐藏

> ID：15313272
> 
> 赞同：0
> 
> 时间：2013-03-09T16:47:03.387
> 
> 标签：xcode, macos, cocoa, nstoolbar

我正在 Xcode 中构建一个应用程序，其工具栏在启动时不可见，必须通过菜单栏访问。但是，一旦我取消选中“启动时可见”，工具栏就消失了，我不知道如何让它再次显示，所以我可以在不使用 command-z 的情况下对其进行自定义。我知道必须有一种方法，以便我可以随时自定义它。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T23:13:27.883

你没有做错任何事；这是 Xcode 的一个问题。

要编辑工具栏，必须将其设置为“启动时可见”。使用工具栏完成后，只需取消选中它即可。当您想使用工具栏时，请选中它。您不需要依赖撤消或任何操作，因为`NSToolbar`即使未显示，您也可以在 Interface Builder 中选择它。

![在此处输入图像描述](../Images/8a8636f93e6a5a740f9f062f2e57837b.png)

或者，如果您不想这样做，只需在每次启动开始时获取对`NSToolbar`using an`IBOutlet`和调用的引用。`-setVisible:NO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:50:39.583

> 一旦我取消选中“启动时可见”，工具栏就消失了，我不知道如何让它再次显示出来

在 Interface Builder**中选中“Visible at Launch”**，它会回来。

# r - R地图：如何填充区域？

> ID：15313273
> 
> 赞同：4
> 
> 时间：2013-03-09T16:47:05.440
> 
> 标签：r, maps, geospatial, ggplot2

我在这里绘制地图，无法正确填写，希望您能提供帮助。那我该怎么办

阅读地图并更改投影：

```
map<-readOGR(dsn="e:\\r\\OSM_adm_reg\\adm4_region (1)", layer="adm4_region")
map=spTransform(map,CRS("+proj=latlong +ellips=GRS80")) 
```

读取全国各地物流仓库位置数据，匹配world.cities数据库在地图上绘制：

```
 data(world.cities)
    russian.cities=world.cities[world.cities$country.etc=="Russia",]
    metro_outlets=read.csv(file="e:\\r\\retail\\metro.csv",head=TRUE,sep=";")
    match<-match(metro_outlets$CITY_ENGLISH, russian.cities$name)
    outlet_coordinates=russian.cities[match,]
    outlet_coordinates=cbind(outlet_coordinates, "metro_store_count"=metro_outlets$STORE_COUNT_METRO)
    outlet_coordinates=cbind(outlet_coordinates, "cch_depo"=metro_outlets$DEPO_FOOD)
    outlet_coordinates=cbind(outlet_coordinates, "NAME_LAT"=metro_outlets$STORE_OBLAST)
    outlet_coordinates=cbind(outlet_coordinates, "cch_franchise"=metro_outlets$Franchise)
outlet_coordinates=cbind(outlet_coordinates, "SL"=metro_outlets$SL) 
```

基本上，我需要根据 SL 列的值填充区域。现在，我试图获取包含 WH 的区域列表：

```
outlet_spatial=SpatialPoints(outlet_coordinates[,c(5,4)],proj4string=CRS(proj4string(map)))
index=over(outlet_spatial,map)
region_names=rownames(map@data[map@data$NAME_LAT %in% index$NAME_LAT,])
map_df<-fortify(map,map$NAME_LAT)
map_df$fill=ifelse(map_df$id %in% region_names,"true","false") 
```

并绘制地图：

```
ggplot()+
  geom_polygon(data=map_df,aes(x=long,y=lat,group=group,fill=fill),col="gray")+
  scale_fill_manual(values=c("gray","gray70"))+xlim(20, 180) + ylim(40,80)+
  geom_point(aes(x=long,y=lat), color="orange",alpha=I(8/10), data=outlet_coordinates) 
```

这是我[得到](http://picpaste.com/LW9UJkt0.jpeg)的地图！

现在，我不知道如何将 SL 列的值传递给`map_df`并相应地填充区域。SL 在这里定义： `outlet_coordinates=cbind(outlet_coordinates,"SL"=metro_outlets$SL)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:33:18.810

这比我想象的要复杂一些，主要是因为你得到的 TOPOLOGY 错误是由你的 shapefile 中糟糕的几何形状引起的。也许您可以改用高质量、公开可用的 shapefile。我建议[www.naturaleartchdata.com](http://www.naturalearthdata.com/)。我在脚本中包含了一个链接并下载了该数据。您可以复制并粘贴此内容。这应该有效：

```
require(ggplot2)
require(maptools)
require(sp)

# Your shape file has some topology errors meaning it can't be used by 'over()'
# Use open source shapefiles from www.naturalearth.com - v. good quality
oldwd <- getwd(); tmp <- tempdir(); setwd(tmp)
url <- "http://www.naturalearthdata.com/http//www.naturalearthdata.com/download/10m/cultural/ne_10m_admin_1_states_provinces_shp.zip"
dest <- paste(tmp,"\\tmp.zip",sep="")
download.file( url , dest )
unzip(dest)

#   Projection information for geographic data (but in decimal degrees)
projgeo <- CRS("+proj=latlong +datum=WGS84 +ellps=WGS84")

# Read in world shapefile
wld <- readShapePoly("ne_10m_admin_1_states_provinces_shp" , proj4string = projgeo)
# Subset to Russia
map <- wld[wld$admin == "Russia" , ]

# City and metro data
r.city <- world.cities[ world.cities$country.etc=="Russia" , ]
metro_outlets <- read.csv(file="e:\\r\\retail\\metro.csv",head=TRUE,sep=";")

# Assign metro outlets to city and make spatial point data frame
met <- subset( metro_outlets , select = c( "SL" , "CITY_ENGLISH" ) )
met$SL <- as.numeric( met$SL )
match <- match( met$CITY_ENGLISH , r.city$name )
coordinates( met ) <- r.city[ match , c( "long" , "lat" ) ]
proj4string( met ) <- proj4string( map )

# Assign metro outlet attribute "SL" to each region of map
# Find the average SL for each region using 'over()'
df <- over( map , met[ , "SL" ] , fn = mean , na.rm = TRUE )
map$SL <- as.numeric( df$SL )

# Convert th map into format for plotting with ggplot
map@data$id <- rownames( map@data )
map.df <- as.data.frame( map )
map.fort <- fortify( map , region = "id" )
map.gg <- join( map.fort , map.df , by = "id" )

# Plot  
p1 <-   ggplot( NULL ) + 
    geom_polygon( mapping = aes( long , lat , group = group , fill  = factor( SL ) ) , colour = "white" , data = map.gg , map = map.gg )+
    scale_x_continuous( limits = c( 20 , 180 ) )
print(p1) 
```

![在此处输入图像描述](../Images/52c4ed5641765773b41eb6f3dbcf2429.png)

希望有帮助！

# node.js - Node.js https API 服务器，但 http 用于静态文件

> ID：15313274
> 
> 赞同：1
> 
> 时间：2013-03-09T16:47:06.967
> 
> 标签：node.js, express

我正在为 iPhone 客户端使用 Node.js 制作 API 服务器。我也在使用这个节点服务器来发回一些请求的文件，比如静态图像等。

现在我正在使用以下代码创建一个 https 服务器：

```
https.createServer(options,app).listen(app.get('port'), function(){
    console.log("Express server listening on port " + app.get('port'));
}); 
```

效果很好。

但是，我希望通过 HTTP 而不是 HTTPS 提供静态文件。这可能吗？

我正在使用以下代码提供静态文件：

```
app.use(express.static(path.join(__dirname, 'uploads'))); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T18:49:53.733

如果您希望在同一个端口上执行此操作，这几乎是[在 node.js 中的 SAME 端口上绑定 HTTP 和 HTTPS 流量的重复？](https://stackoverflow.com/questions/15313308/binding-http-and-https-traffic-on-the-same-port-in-node-js).

但是，如果您有多个端口（一个用于 HTTP，一个用于 HTTPS），您可以尝试只启动两个服务器实例。创建两个应用程序（可以在同一个节点文件中完成），一个用于您的实际 API，然后一个称为 staticApp 的较小的应用程序用于提供您的静态内容。然后你启动你的 API 服务器的代码是一样的，你可以使用

```
http.createServer(app).listen(app.get('port'), function(){
    console.log("Static server listening on port " + app.get('port'));
}); 
```

为避免混淆，您还可以将 API 服务器中的“端口”变量的名称更改为类似于“ssl-port”的名称，这样您就不会感到困惑。

这将有效地创建两个服务器；一个通过 HTTP 为您的静态内容提供服务，而您的原始 API 服务器通过 HTTPS 提供服务。只需确保您使用的是 80/443（标准），以便协议隐含地解释端口（即[http://mydomain.com](http://mydomain.com)和[https://mydomain.com](https://mydomain.com)转到正确的位置），或者您的负载平衡器或任何代理您的流量的东西正在将正确的协议发送到正确的端口。

请注意，这会给尝试通过 HTTP 访问您的 API 的任何人提供 404（很可能）。解决方案可能是添加与您的 API 端点匹配的通用路由（类似于 api/*，如果您的结构设置为这样），使用 https 协议将用户重定向到相同的路径。

**回应您的评论**

两个在一个文件中创建两个应用程序，只需执行以下操作：

```
var api = express();

api.configure(function(){
    app.set('ssl_port', [your https port]);
    //your api code
});

var static = express();

static.configure(function () {
    app.set('port', [your http port]); // Set the port
    app.use(express.static(path.join(__dirname, 'static'))); //This will serve everything inside '/static' as static content
}) 
```

也创建两个服务器：

```
//HTTPS Api Server
https.createServer(https_options, app).listen(app.get('ssl_port'), function(){
  console.log("Api server listening on port " + app.get('ssl_port'));
});

//HTTP Static Server
http.createServer(static).listen(static.get('port'), function () {
    console.log('Static server listening on %s', static.get('port'));
}); 
```

# vb.net - 无法将 ProgressBar 或 Panel 添加到 Form

> ID：15313277
> 
> 赞同：0
> 
> 时间：2013-03-09T16:47:15.703
> 
> 标签：vb.net, visual-studio-2012, progress-bar, controls, panel

我正在 Visual Studio 2012 中处理某些内容，但由于某种原因无法从工具箱向表单添加进度条或面板。进度条前几天没有工作，但面板今天才刚刚停止工作，从现在到那时，我能想到的没有任何变化。我已经查看了其他一些控件（文本框、按钮、标签），它们目前仍然可以正常工作。我试过以编程方式创建一个面板，但也没有用。可能与参考有关？

这是我得到的错误：

未能创建组件“ProgressBar”。错误信息如下：

> 'System.Runtime.InteropServices.COMException (0x80004005)：错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。在 VSLangProj.References.Add(String bstrPath) 在 Microsoft.VisualStudio.Design.VSTypeResolutionService.System.ComponentModel.Design.ITypeResolutionService.ReferenceAssembly(AssemblyName name) 在 Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.ReferenceAssembly(AssemblyName name)在 System.Drawing.Design.ToolboxItem.GetType（IDesignerHost 主机，AssemblyName 程序集名称，字符串类型名称，布尔参考）在 System.Drawing.Design.ToolboxItem.CreateComponentsCore（IDesignerHost 主机）在 System.Drawing.Design.ToolboxItem.CreateComponentsCore（IDesignerHost 主机, IDictionary defaultValues) 在 System.Drawing.Design.ToolboxItem。

有人有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T15:14:49.537

你有没有尝试过：

*   清理解决方案并重建？
*   关闭VS并重新打开？
*   打开 Visual Studio 的第二个实例，选择 Debug -> Attach to Process 并选择 VS 的第一个实例？

关于最后一个。即使*您的*应用程序代码没有运行，VS 也会在 IDE 中运行代码。例如，它使用反射来检查控件的属性。有时使用 VS 来调试 VS（听起来很奇怪）会产生一些好的结果。

# django - Django pet_picture.board_id may not be NULL

> ID：15313279
> 
> 赞同：0
> 
> 时间：2013-03-09T16:47:29.073
> 
> 标签：django

***The problem is when a user submit a picture I get this error. I think I understand why I get this error because the board dropbox is not validating even though I select a Board.***

```
IntegrityError at /picture/
pet_picture.board_id may not be NULLRequest Method: POST 
Request URL:  
Django Version: 1.4.3 
Exception Type: IntegrityError 
Exception Value: pet_picture.board_id may not be NULL 

Traceback:

File "C:\o\mysite\pet\views.py" in PictureCreator
  106\.          picture = Picture.objects.create(user=request.user) 
```

***I think The problem is at my PictureCreator function at views.py***

```
 def PictureCreator(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect(reverse('pet.views.LoginRequest'))

    if request.method == "POST":
        form = PictureForm(request.POST , request.FILES)
        if form.is_valid():
            picture = Picture.objects.create(user=request.user)
            picture.image = form.cleaned_data['image']
            picture.description = form.cleaned_data['description']
            picture.board = form.cleaned_data['board']
            picture.save()
    return render(request,'picture.html',{'form':PictureForm()}) 
```

***I think the problem At this particular statement It does not valid my board dropbox . How can I make it valid?*** picture.board = form.cleaned_data['board']

My parts of my forms.py

```
class PictureForm(forms.ModelForm):
    board = forms.ModelChoiceField(queryset=Board.objects.all())

    class Meta:
        model = Picture
        fields = ('image','description','board',) 
```

My models.py

```
from django.db import models
from django.db.models.signals import post_save
from django.contrib.auth.models import User

class Person(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=100)
    image = models.FileField(upload_to="images/",blank=True,null=True)

    def __unicode__(self):
        return self.name

class Picture(models.Model):
    user = models.ForeignKey(User)
    board = models.ForeignKey(Board)
    image = models.FileField(upload_to="images/",blank=True,null=True)
    description = models.TextField()
    def __unicode__(self):
        return self.description 
```

How can I fix this? Thank you for helping me :D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T16:57:41.197

```
picture = Picture(user=request.user)
picture.image = form.cleaned_data['image']
picture.description = form.cleaned_data['description']
picture.board = form.cleaned_data['board']
picture.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:58:14.300

Looks like your problem is on this line:

`picture = Picture.objects.create(user=request.user)`

Based on your model, a `Board` is required when creating a `Picture`. One way to resolve this is to change the aforementioned line to:

`picture = Picture(user=request.user)`

Now you have to call `save` explicitly which you are doing below in your view already.

# couchdb - CouchDb：如何将查询和更新请求合二为一？

> ID：15313281
> 
> 赞同：1
> 
> 时间：2013-03-09T16:47:49.627
> 
> 标签：couchdb

我的couchDb文件的结构是这样的

**帖子**

```
 {
      _id : '123132adsf',
    'userId' :'7236jsdfkaf',
     'Title' : 'This is a sample post'
} 
```

**用户**

```
{
   '_id' : '7236jsdfkaf',
   'count' : 1
} 
```

我正在寻找的功能是每当使用*帖子视图查询**帖子*文档时，拥有帖子的*用户*中的计数字段就会更新。有没有办法通过单个 couchDb 请求来做到这一点，或者我必须做两个对数据库的请求一个用于查询，一个用于更新。

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:32:07.843

严格来说，从视图中读取时，您需要在其他地方添加功能。

在 CouchDB 中，您需要能够读取用户文档（和修订版），并在只读视图操作期间将其设置回来。

文档`get`请求在读取期间不能影响（甚至读取）其他文档（视图也是只读的）。对于给定的文档版本，读取旨在可缓存。甚至 CouchDB 的`show`( [docs](http://guide.couchdb.org/draft/show.html) ) 和`list`功能也阻止了这种情况的发生。

**其他注意事项：**

此外，考虑 CouchDB 的问题不一定是执行自动递增字段的最佳选择。[这](https://stackoverflow.com/questions/7388058/how-to-prevent-couchdb-to-create-document-revisions-when-updating-simple-counter)是一个很好的 StackOverflow 答案，详细说明了您可能面临的一些挑战。本质上，您可能会发现，由于在 CouchDB 中管理文档修订的方式，频繁的计数器递增（如您需要）而没有频繁的数据库压缩可能会导致磁盘利用率过高。其他系统可能更适合进行页面浏览计数。

如果您使用了使用`Update`函数 ( [docs](http://wiki.apache.org/couchdb/Document_Update_Handlers) ) 的建议，那么缓存页面/帖子的成本会更高，并且每次请求帖子时都要求 CouchDB 实例始终返回修改后的文档/帖子，这是非常不必要的（并且应该如果可能，缓存在 Web 层上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:35:52.937

如果您事先知道帖子的 ID，则可以这样做。您可以使用[更新函数](http://wiki.apache.org/couchdb/Document_Update_Handlers)将`viewed`字段的值更改`1`为帖子文档中的值并返回帖子的数据。不过，这是肮脏的黑客行为。相反，`count`您将在用户文档中使用，然后为用户减少总和`viewed`。问题是，您必须先知道帖子的 id，因为更新功能不能进行任意查询 - 它会修改给定的文档。**

# visual-studio-2012 - 使用 adb 和 Visual Studio 2012 中的 Xamarin.Android 工具对 google-tv 设备进行远程调试

> ID：15313282
> 
> 赞同：0
> 
> 时间：2013-03-09T16:47:53.137
> 
> 标签：visual-studio-2012, adb, google-tv, xamarin, xamarin.android

使用最新的 Xamarin 2.0 Xamarin.Android 工具。我拥有的唯一 android 设备（除了模拟器）是 Google-TV 设备。我已将 adb 连接到我的 Google-TV，但看不到使用 Visual Studio 中的 Xamarin 工具对远程设备进行调试的任何方法。这可能吗？我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T15:48:49.047

抱歉，Google TV 与 Xamarin.Android 不兼容。这是因为[Google TV 不支持 NDK](https://developers.google.com/tv/faq#ndk)（Xamarin.Android 的要求）。

# sqlite - 如果 sqlite3_open() 返回错误和有效的数据库连接怎么办？

> ID：15313284
> 
> 赞同：2
> 
> 时间：2013-03-09T16:47:54.447
> 
> 标签：sqlite

sqlite3_open() 的文档是这样说的：

“数据库连接句柄通常在 *ppDb 中返回，即使发生错误。”

这是否意味着如果 sqlite3_open() 在再次尝试 sqlite3_open() 之前返回 SQLITE_OK 和非空数据库句柄之外的其他内容，那么您欠 sqlite3_close() ？

如果是这样，这可以解释我遇到的一个问题，因为数据库被锁定而随机无法打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T16:58:30.280

`sqlite3`是的，如果连接对象返回为非 null ，则需要关闭它。

[sqlite3_open() 手册](http://www.sqlite.org/c3ref/open.html)很清楚；

> 无论打开时是否发生错误，与数据库连接句柄关联的资源都应在不再需要时通过将其传递给 sqlite3_close() 来释放。

至少，`sqlite3`如果您不这样做，您将有连接对象本身的内存泄漏，因为[`sqlite3_close()`](http://www.sqlite.org/c3ref/close.html)释放该对象和分配给它的任何资源。

# java - Spring MVC - 如何使用控制器方法更新模型对象的属性？

> ID：15313290
> 
> 赞同：8
> 
> 时间：2013-03-09T16:48:32.283
> 
> 标签：java, forms, spring, jsp, spring-mvc

使用 Spring MVC 3.0，我正在开发一个具有基本 CRUD 操作的成员管理系统，但我的控制器遇到了问题。

我无法使用 Controller 方法更新成员记录。我有显示和处理我的“添加成员”表单的方法和另一个显示我的“编辑成员”表单的方法，它们都工作正常。

这是我的控制器：

```
@Controller
public class MemberController {

private MemberService memberService;

@Inject
public MemberController(MemberService memberService) {
    this.memberService = memberService;
}

// Show member list
@RequestMapping(value = "/members/list", method = RequestMethod.GET)
public String showMemberList(Map<String, Object> model) {

    model.put("members", memberService.getAllMembers());

    return "members/list";
}

// Display add member form
@RequestMapping(value = "/members/add", method = RequestMethod.GET)
public String showAddMemberForm(Model model) {

    model.addAttribute(new Member());

    return "members/add";
}

// Process add member form
@RequestMapping(value = "/members/add", method = RequestMethod.POST)
public String addMember(Member member) {

    memberService.addMember(member);

    return "redirect:list";
}

// Display edit member form
@RequestMapping(value = "/members/edit/{id}", method = RequestMethod.GET)
public String showEditMemberForm(Model model, @PathVariable int id) {

    String idAsString = Integer.toString(id);
    model.addAttribute("member", memberService.getMemberById(idAsString));

    return "members/edit/{id}";
}

// Process edit member form
@RequestMapping(value = "/members/edit/{id}", method = RequestMethod.POST)
public String updateMember(@PathVariable int id, 
        HttpServletRequest request, Member member) {

    // Uncommenting the next line of code sets the member objects forename attribute
    // to "test forename"
    // member.setForename("test forename");

    // Uncommenting the next line of code gives the following error:
    // HTTP Status 405 - Request method 'POST' not supported
    //member.setSurname(request.getParameter("surname"));

    memberService.updateMember(member);

    return "redirect:/members/list";
} 
```

}

这是我的更新方法：

```
public void update(Member member) {
    jdbcTemplate.update(
            "UPDATE members SET forename=?, surname=?, address1=?, address1=?, "
                    + "city=?, postcode=? WHERE memberId=?",
            member.getForename(), member.getSurname(),
            member.getAddress1(), member.getAddress2(), member.getCity(),
            member.getPostcode(), member.getId());
} 
```

这是我的编辑成员 JSP 表单：

```
<sf:form method="POST" modelAttribute="member"
    enctype="multipart/form-data" action="/members/edit/${member.id}">
    <fieldset>
        <table cellspacing="0">
            <tr>
                <th><label for="member_id">Id:</label></th>
                <td><sf:input path="id" size="15" id="member_id" /></td>
            </tr>
            <tr>
                <th><label for="member_forename">Forename:</label></th>
                <td><sf:input path="forename" size="15" id="member_forename" /></td>
            </tr>
            <tr>
                <th><label for="member_surname">Surname:</label></th>
                <td><sf:input path="surname" size="15" id="member_surname" /></td>
            </tr>
            <tr>
                <th><label for="member_address1">Address 1:</label></th>
                <td><sf:input path="address1" size="15" id="member_address1" />
                </td>
            </tr>
            <tr>
                <th><label for="member_address2">Address 2:</label></th>
                <td><sf:input path="address2" size="15" id="member_address2" />
                </td>
            </tr>
            <tr>
                <th><label for="member_city">City:</label></th>
                <td><sf:input path="city" size="15" id="member_city" /></td>
            </tr>
            <tr>
                <th><label for="member_postcode">Postcode:</label></th>
                <td><sf:input path="postcode" size="15" id="member_postcode" />
                </td>
            </tr>

        </table>
        <input type="submit" value="Update" />
    </fieldset>
</sf:form> 
```

因为我的控制器中的 'member.setForename("test forename")' 代码设置了测试字符串，所以我想我可以使用从表单中发布的参数来设置属性，如下所示：

'member.setSurname(request.getParameter("surname"))'

但这会导致 HTTP 405 错误。使用 Firebug，我已经确认“编辑成员”表单正在发布“名字”、“姓氏”、“地址 1”等参数，所以我无法弄清楚为什么我不能将它们从请求中删除。

任何帮助将不胜感激，因为我已经在这 2 天了，并且正在转圈。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T18:03:13.667

```
@RequestMapping(value = "/members/edit/{id}", method = RequestMethod.POST)
public String updateMember(@PathVariable int id, 
    HttpServletRequest request,@ModelAttribute("member") Member member) { 
```

//希望您的 MemberService 看起来相似

```
public void edit(Member member) {
logger.debug("Editing existing member");

// Retrieve session from Hibernate, if you are using hibernate
Session session = sessionFactory.getCurrentSession();

// Retrieve existing member via id
Member existingMember = (Member) session.get(Member.class, member.getId());

// Assign updated values to this member
existingMember.setForeName(member.getForeName());
existingMember.setSurName(member.getSurName());
...
...
existingMember.setPostcode(member.getPostcode());

// Save updates
session.save(existingMember); 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:03:30.253

```
@RequestMapping(value = "/members/edit/{id}", method = RequestMethod.POST)
public String updateMember(@PathVariable int id, 
        HttpServletRequest request,@ModelAttribute("member") Member member) { 
```

`@ModelAttribute`之前添加`Member`。然后这个实例将拥有所有的编辑。所以你不需要设置新值`request.getParameter`。只需将此实例保存在数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-12T13:41:57.150

这可能与 form 属性有关：

```
enctype="multipart/form-data" 
```

在 Spring 中未解决多个部分时没有错误日志（这非常棘手）。
Spring 无法读取 POST 请求中的多个附件部分，并且 Spring 不会更新模型。

请确保您已在调度程序 servlet XML 文件中设置了多部分解析器。
调度程序-servlet.xml：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"> 
```

并将以下依赖项添加到您的 pom.xml 中。
pom.xml：

```
<dependency>
  <groupId>commons-fileupload</groupId>
  <artifactId>commons-fileupload</artifactId>
  <version>1.3.2</version>
</dependency> 
```

# wordpress - timthumb.php 和图像质量

> ID：15313291
> 
> 赞同：0
> 
> 时间：2013-03-09T16:48:36.393
> 
> 标签：wordpress, image-processing, timthumb, image-quality

我有一个基于网站的 Wordpress。

我使用 timyhump.php 来显示投资组合图像。

但是，如果您查看以下链接中的图像，您会发现它们的质量低于正常水平。

我应该怎么办 ？

[http://www.heptasarim.com/referanslarimiz](http://www.heptasarim.com/referanslarimiz)

PS：我刚刚注意到我在这里之前插入了类似的消息。抱歉，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:58:07.313

在 timthumb 第 55 行你会发现这个

```
define ('DEFAULT_Q', 90); 
```

此行下方还有其他设置，您可以修改以调整图像质量。

# c++ - 释放/获取语义 wrt std::mutex

> ID：15313296
> 
> 赞同：11
> 
> 时间：2013-03-09T16:48:54.587
> 
> 标签：c++, multithreading, c++11, mutex, memory-model

我正在阅读 n3485 中定义的 C++ 内存模型，它讨论了释放/获取语义，据我了解，以及[此博客中给出](http://preshing.com/20120913/acquire-and-release-semantics)的定义：

> **获取语​​义**是一个只能应用于从共享内存**读取**的操作的属性，无论它们是读-修改-写操作还是普通加载。然后将该操作视为读取-获取。Acquire 语义*可防止读取-acquire 的内存重新排序，以及按照程序顺序跟随它的任何读取或写入操作。*
> 
> **释放语义**是一个只能应用于**写入**共享内存的操作的属性，无论它们是读-修改-写操作还是普通存储。然后该操作被认为是写释放。释放语义*防止写释放的内存重新排序，任何读或写操作在程序顺序之前。*

将防止在当前读/写完成之前或之后对读/写进行重新排序。第一个（获取）将确保当前正在完成的读取不会被任何读/写重新排序，后者（发布）将确保当前写入不会被之前的读/写操作重新排序它。

现在可以说`std::mutex::lock`将具有*获取*语义并且`std::mutex::unlock`本质上具有*释放*语义吗？

在标准中，我可以在部分下找到它

**30.4.1.2 互斥体类型 [thread.mutex.requirements.mutex]**

> 11 同步：`unlock()`对同一对象的先前操作应*与*（1.10）此操作同步。

据我了解，标准中没有明确定义*同步*，但是它似乎是一种*发生在*关系之前查看两个不同线程之间正在评估的两个语句的类型，但是，根据我对获取/释放语义的理解，这有更多与内存重新排序有关。 *同步*也可以称为释放/获取语义？

那么释放/获取语义是否不仅适用于加载/存储操作的重新排序，也适用于操作的线程内交错？

在关于内存模型的标准部分中，它主要讨论的是两个线程交错的有序关系。这对于这是否也适用于内存排序有待解释。

有人可以澄清吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T17:50:59.590

> 现在可以说 std::mutex::lock 将具有获取语义，而 std::mutex::unlock 本质上具有释放语义吗？

**是**的，这是正确的。

> 据我了解，标准中没有明确定义*同步*

好吧，理论上第 1.10/8 段可能是为了给出*synchronizes with*的定义：

> 某些库调用与另一个线程执行的其他库调用*同步。*例如，原子存储释放与从存储（29.3）获取其值的加载获取*同步。*[笔记： ...]

另一方面，这听起来不像是一个非常正式的定义。然而，第 1.10/10 段间接给出了一个更好的，虽然是隐含的：

> 评估 A在评估 B*之前是依存排序的，如果*
> 
> — A 对原子对象 M 执行释放操作，并且在另一个线程中，B 对 M 执行消耗操作并读取以 A 为首的释放序列中的任何副作用写入的值，或
> 
> — 对于某些评估 X，A 在 X 之前是依赖排序的，并且 X 携带对 B 的依赖。
> 
> [注意：**关系“之前依赖排序”类似于“同步于”，但使用释放/消耗代替释放/获取。**——尾注]

由于“*类似于*”关系通常是对称的，所以我会说“ *is-dependency-ordered before* ”的上述定义也间接提供了“*同步于*”的定义——尽管您可能正确地反对笔记是非- 规范；不过，这似乎是预期的定义。

*我对与关系同步的*直觉是，它发生在由一个存储某个值的线程执行的写入（原子）操作和读取该值的*第一个（原子）操作之间。*该操作也可能在同一个线程中。

如果这两个操作在不同的线程上，那么*synchronizes-with*关系会在操作上建立跨线程排序。

> 在标准中，我可以在部分下找到它
> 
> **30.4.1.2 互斥体类型 [thread.mutex.requirements.mutex]**
> 
> 11 同步：`unlock()`对同一对象的先前操作应*与*（1.10）此操作同步。

对我来说，这似乎与上面给出的解释兼容。具有释放语义（解锁、存储）的操作将与获取语义（锁定、加载）的操作同步。

> 但是，根据我对获取/释放语义的理解，这更多地与内存重新排序有关。同步也可以称为释放/获取语义？

释放和获取语义描述了一些操作的性质；*synchronizes-with*关系（实际上）是在具有获取或释放语义的操作之间以明确定义的方式建立的*关系。*

所以从某种意义上说，*同步*是这些操作语义的结果，我们使用这些语义来实现指令的正确排序，并限制 CPU 或编译器可能执行的重新排序。

# php - while 循环显示的记录少于应有的记录

> ID：15313298
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:49:09.817
> 
> 标签：php, mysql, while-loop

我在数据库中有如下表：

类别：
id | 姓名

它包含 5 条记录，但是当我尝试使用 while 循环显示它时。它仅显示 4 条记录。它不显示最后的记录。这是我的PHP代码：

```
 $query = "SELECT * FROM category";
    $query = mysql_query($query);

    $rows = mysql_num_rows($query); // shows 5 

    while($row = mysql_fetch_array($query))
    {
        echo .$row['name']."<br>";
    } 
```

如果我使用 for 循环，它只显示 2 条记录。
我还注意到，当我使用 print_r(mysql_fetch_array($query)) 时，它只显示最后一条记录，与 var_dump 相同。它不应该显示所有记录吗？是我的代码还是 PHP 配置？感谢您的任何提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:50:30.223

你正在制作两个相同的变量

用这个

```
 $query = "SELECT * FROM category";
    $result = mysql_query($query);

   $rows = mysql_num_rows($result); // shows 5 

   while($row = mysql_fetch_array($result))
   {
    echo $row['name']."<br />";
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:00:24.950

我从未见过这种类型的问题，我认为您的最后一个“名称”字段为空，用于检查打印计数器或使用 print_r 示例

```
while($row = mysql_fetch_array($result))
{
  echo "<pre>";
  print_r($row);
  echo "</pre>;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:47:33.900

我不知道这怎么可能，但是在我使用 PDO 从表中选择记录后，问题就消失了。谢谢你的帮助，尤其是你马塞尔。

# android - 如何在 api 10 中添加用于通知的图像流

> ID：15313300
> 
> 赞同：1
> 
> 时间：2013-03-09T16:49:35.473
> 
> 标签：android, api, stream, notifications

我有一个问题，但我无法从通知中添加头像图像..

```
Bitmap bm = LoadAvatar(avatarurl);
        mBuilder.setContentTitle(text);//tytuł powiadomienia
        mBuilder.setContentText(text2);//opis powiadomienia
        mBuilder.setSmallIcon(R.drawable.ic_launcher);//ikona powiadomienia
        mBuilder.setLargeIcon(bm); 
```

此代码在 API 11+ 中运行，如何在 api 10 中实现？

# html - divs问题之间的另一个空间，其他答案不起作用

> ID：15313306
> 
> 赞同：0
> 
> 时间：2013-03-09T16:50:17.927
> 
> 标签：html, spaces

在网页中只有一个 div 之间有一个空格。将其重新创建为 jsfiddle [http://jsfiddle.net/durN4/](http://jsfiddle.net/durN4/)

问题在于“Switzerland Inn on the Blue Ridge Parkway”横幅及其下方的正文之间。div 标签的顶部和底部都有一个空格。这是在 jsfiddle 页面上找到的 css 代码...

```
#main_holder {
width: 75%;
min-width: 750px;
margin-right: auto;
margin-left: auto;
border: 5px solid #E2BE6A;
position: relative;
-moz-box-shadow: 0px 0px 21px 5px rgba(2, 1, 14, 0.6);
-webkit-box-shadow: 0px 0px 21px 5px rgba(2, 1, 14, 0.6);
box-shadow: 0px 0px 21px 5px rgba(2, 1, 14, 0.6);
height: auto;
}
#headline {
height: 155px;
border-bottom: 5px solid #E2BE6A;
width: 100%;
background: -ms-linear-gradient(top left, #FFFFFF 0%, #327EEF 100%);
background: -moz-linear-gradient(top left, #FFFFFF 0%, #327EEF 100%);
background: -o-linear-gradient(top left, #FFFFFF 0%, #327EEF 100%);
background: -webkit-gradient(linear, left top, right bottom, color-stop(0, #FFFFFF), color-stop(1, #327EEF));
background: -webkit-linear-gradient(top left, #FFFFFF 0%, #327EEF 100%);
background-image: linear-gradient(to bottom right, #FFFFFF 0%, #327EEF 100%);
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF",endColorstr="#327EEF",GradientType=1);
}
#rotator_holder {
height: 321px;
width: 100%;
border-bottom-width: 5px;
border-bottom-style: solid;
border-bottom-color: #E2BE6A;
position: relative;
}
#navbar {
height:35px;
width: 100%;
border-bottom-width: 5px;
border-bottom-style: solid;
border-bottom-color: #E2BE6A;
position: relative;
background-color: #FFF1CE;

}
#titlebar {
font-family: 'Habibi', serif;
font-size: 24px;
height: 30px;
width: 100%;
background: -ms-linear-gradient(top left, #327EEF 0%, #FFFFFF 100%);
background: -moz-linear-gradient(top left, #327EEF 0%, #FFFFFF 100%);
background: -o-linear-gradient(top left, #327EEF 0%, #FFFFFF 100%);
background: -webkit-gradient(linear, left top, right bottom, color-stop(0, #327EEF), color-stop(1, #FFFFFF));
background: -webkit-linear-gradient(top left, #327EEF 0%, #FFFFFF 100%);
background-image: linear-gradient(to bottom right, #327EEF 0%, #FFFFFF 100%);
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#327EEF",endColorstr="#FFFFFF",GradientType=0);
color: #000;
padding-top: 10px;
padding-bottom: 10px;
}
#main_content {
font-size: 18px;
background-color: #FFF1CE;
width: 100%;
-moz-box-shadow: inset 0px 0px 13px 6px #c4c6cf;
-webkit-box-shadow: inset 0px 0px 13px 6px #c4c6cf;
box-shadow: inset 0px 0px 13px 6px #c4c6cf;
}
#padding {
width: 94%;
margin-right: auto;
margin-left: auto;
font-family: "Open Sans", sans-serif;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:06:05.997

您所看到的称为[折叠边距](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)。主文本中元素的边距`h1`将其容器向下推。

当一个元素没有内边距或边框，而子元素有边距时，该边距不适用于子元素和父边界之间，而是在父元素之外。

因此，有几种方法可以修复它，具体取决于您想要的结果：

*   移除`h1`元素的上边距
*   在容器顶部添加填充
*   在容器顶部添加边框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:58:49.710

您的问题是由页边距`h1`和最后一个`p`inside引起的`main_content`。

[jsFiddle](http://jsfiddle.net/38VKa/)

```
#main_content p:last-child {
    margin-bottom: 0;
}

#main_content h1 {
    margin-top: 0;
} 
```

# node.js - 在 node.js 的 SAME 端口上绑定 HTTP 和 HTTPS 流量？

> ID：15313308
> 
> 赞同：2
> 
> 时间：2013-03-09T16:50:27.373
> 
> 标签：node.js

我有一个场景，我的 node.js 应用程序位于负载平衡 HAProxy 后面，该 HAProxy 将 HTTP 和 HTTPS 流量转发到我的节点服务器上的端口 8000。

不幸的是，这让我陷入了一个棘手的境地：我需要为我的 http 和 https 服务器使用相同的端口。如果在某种程度上更容易的话，我也会很满意仅仅将 http 重定向到 https。

但是，现在，我处于被迫选择 HTTP -- 或 -- HTTPS 的位置

为了包含代码...

```
https.createServer(api.credentials, api.server).listen(8000);
http.createServer(api.server).listen(8000); // ERR ADDR IN USE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-03T08:21:20.963

您不能将多个服务器绑定到同一个端口，但您可以打开一个 TCP 服务器并将流量代理到相关的 HTTP 实现。

httpx.js

```
'use strict';
let net = require('net');
let http = require('http');
let https = require('https');

exports.createServer = (opts, handler) => {

    let server = net.createServer(socket => {
        socket.once('data', buffer => {
            // Pause the socket
            socket.pause();

            // Determine if this is an HTTP(s) request
            let byte = buffer[0];

            let protocol;
            if (byte === 22) {
                protocol = 'https';
            } else if (32 < byte && byte < 127) {
                protocol = 'http';
            }

            let proxy = server[protocol];
            if (proxy) {
                // Push the buffer back onto the front of the data stream
                socket.unshift(buffer);

                // Emit the socket to the HTTP(s) server
                proxy.emit('connection', socket);
            }

            // As of NodeJS 10.x the socket must be 
            // resumed asynchronously or the socket
            // connection hangs, potentially crashing
            // the process. Prior to NodeJS 10.x
            // the socket may be resumed synchronously.
            process.nextTick(() => socket.resume()); 
        });
    });

    server.http = http.createServer(handler);
    server.https = https.createServer(opts, handler);
    return server;
};
```

例子.js

```
'use strict';
let express = require('express');
let fs = require('fs');
let io =  require('socket.io');

let httpx = require('./httpx');

let opts = {
    key: fs.readFileSync('./server.key'),
    cert: fs.readFileSync('./server.cert')
};

let app = express();
app.use(express.static('public'));

let server = httpx.createServer(opts, app);
let ws = io(server.http);
let wss = io(server.https);
server.listen(8080, () => console.log('Server started'));
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T01:21:28.280

您不能让两个任务在同一个端口上侦听。HTTP 在默认端口 80 上侦听，HTTPS 在默认端口 443 上侦听。您将需要管理 HAProxy 程序以进行相应的转发。

我发现[这个漂亮的页面](http://blog.exceliance.fr/2011/07/12/send-user-to-the-same-backend-for-both-http-and-https/)建议你像这样设置你的配置：

```
全球的
  stats socket ./haproxy.stats 级别管理员

前端 ft_http
    绑定：80
    模式http
    default_backend bk_http

前端 ft_https
    绑定：443
    模式 tcp
    default_backend bk_https

后端 bk_http
    模式http
    平衡循环
    坚持 src 表 bk_https
    默认服务器间 1s
    服务器 s1 192.168.1.1:80 检查 id 1
    服务器 s2 192.168.1.2:80 检查 id 2

后端 bk_https
    模式 tcp
    平衡循环
    stick-table 类型 ip 大小 200k 过期 30m
    坚持src
    默认服务器间 1s
    服务器 s1 192.168.1.1:443 检查 id 1
    服务器 s2 192.168.1.2:443 检查 id 2
```

请注意上面的配置如何将 Node.js 端口设置为 80 和 443。由于 Node.js 没有管理员权限，您可能需要编辑端口以使其像这样工作：

```
后端 bk_http
    模式http
    平衡循环
    坚持 src 表 bk_https
    默认服务器间 1s
    服务器 s1 192.168.1.1:8000 检查 id 1
    服务器 s2 192.168.1.2:8000 检查 id 2

后端 bk_https
    模式 tcp
    平衡循环
    stick-table 类型 ip 大小 200k 过期 30m
    坚持src
    默认服务器间 1s
    服务器 s1 192.168.1.1:8001 检查 id 1
    服务器 s2 192.168.1.2:8001 检查 id 2
```

您还需要将 Node.js 代码更改为：

```
https.createServer(api.credentials, api.server).listen(8001);
http.createServer(api.server).listen(8000);
```

我不熟悉 HAProxy，所以我可能会离开。

# actionscript-3 - 如何使用 GreenSock 创建摆动效果

> ID：15313312
> 
> 赞同：1
> 
> 时间：2013-03-09T16:50:31.660
> 
> 标签：actionscript-3, flash, tween, gsap

我在 TweenMax 中看不到任何可以让您左右“摆动”对象的内置方法。它需要从其起始位置开始非常快速的动画，例如：x -> x-5 -> x+5 -> x-5 -> x+5 -> x。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-21T15:40:08.057

好吧，我认为您可以使用它，我发现了类似的东西，但适用于 AS/Flash 版本，因此我必须将其设为 JavaScript，并且它对我有用，很简单：

```
var shakeTween = function(item, repeatCount){
var max = 5;
var min = -5;
TweenMax.to(item,0.1,{repeat:repeatCount-1, x:Math.floor(Math.random() * (max - min + 1) + min), delay:.1});
TweenMax.to(item,0.1,{y:0, x:0, delay:(repeatCount+1) * .1});
} 
```

[请参阅此处](http://jsfiddle.net/jadielh/Y479p/ "JSFiddle")的工作示例

**item 是 HTML 元素引用（您可以使用 jquery 或 wharever），repeatCount 是播放摆动动画的次数。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:56:59.860

如果 Bounce 不适合您，您将不得不使用计数器和 onComplete 方法自己创建效果！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:16:23.310

也许 RoughEase 可能会成功。

[http://www.snorkl.tv/2010/10/use-tweenlites-easevisualizer-to-create-a-roughease-for-a-cool-flicker-effect/](http://www.snorkl.tv/2010/10/use-tweenlites-easevisualizer-to-create-a-roughease-for-a-cool-flicker-effect/)

[http://www.greensock.com/roughease/](http://www.greensock.com/roughease/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-18T20:27:52.407

以防万一您使用 JQuery，您可以这样做： $('#YourElementID').effect("bounce", {times:3, distance : -5, direction : 'right'}, 300);

# java - 无法在 Java NetBeans 中将我的 DefaultListModel 分配给我的 JList

> ID：15313313
> 
> 赞同：0
> 
> 时间：2013-03-09T16:50:33.540
> 
> 标签：java, swing, compiler-errors, jlist, defaultlistmodel

我有一个由 NetBeans 生成的 jList。我已经声明了一个 DefaultListModel，但无法链接到 jList。我的代码在下面，我也尝试过使用 .setMethod。

```
 DefaultListModel modeljLstShoppingCartName;
        modeljLstShoppingCartName = new DefaultListModel();
        jLstShoppingCartName = new JList(modeljLstShoppingCartName);
        modeljLstShoppingCartName.addElement("Testing1"); 
```

我在这里收到的错误是在整个第三行，它说：

```
incompatible types
  required: java.awt.List
  found:    javax.swing.JList 
```

我已经导入：

```
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.DefaultListModel;
import javax.swing.JList; 
```

任何帮助都会很棒，因为我已经花了几个小时但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:52:10.283

关于：

```
incompatible types
  required: java.awt.List
  found:    javax.swing.JList 
```

这可能只是一个粗心的错误。我打赌您已将 jLstShoppingCartName 变量声明为 java.awt.List 变量而不是 javax.swing.JList 变量。

# file - 如何在 FORTRAN 77 中读取数据文件中的特定行

> ID：15313321
> 
> 赞同：1
> 
> 时间：2013-03-09T16:51:07.903
> 
> 标签：file, fortran

我有一个外部数据文件，其中包含几行参数值。该文件用作几个 FORTRAN 代码的输入数据文件。但是，每个代码并不需要所有数据。目前，所有代码都读取整个数据文件，并根据需要保留每个代码。但是，我想改进这一点。每个代码使用以下命令读取外部数据文件

```
OPEN(UNIT=10,FILE='input.par',STATUS='UNKNOWN')
READ(10,*)val1
READ(10,*)val2
READ(10,*)val3
..............
READ(10,*)valn
CLOSE(10) 
```

那么，我怎样才能`OPEN`读取数据文件并读取，例如，只有第 4 行或第 1 行和第 7 行？

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T16:59:06.303

例如，仅读取第一个和第七个数字：

```
read (10, *) val1

do i=1, 5
   read (10, *)
end do

read (10, *) val7 
```

# internet-explorer - IE 8 中 Fancybox 中的 Video.js 播放器问题

> ID：15313328
> 
> 赞同：0
> 
> 时间：2013-03-09T16:52:06.177
> 
> 标签：internet-explorer, fancybox, video.js

我有一个 HTML5 视频（使用 Video.js）在 Fancybox 弹出窗口中播放。视频在除 IE 之外的所有浏览器中都能正常播放。（部分是）。

它在 IE 8 中第一次播放，当我重试播放时，没有任何反应。有时它以透明的形式播放。

我在这方面找不到任何东西。这是我网站的链接。

[http://site.com/oxwall/my-videos](http://site.com/oxwall/my-videos)

我提供三种不同格式的视频：mp4、webm 和 ogv

我试图在其他问题中找到解决方案。但这种情况看起来与其他问题不同。

1) 对 mp4 类型文件尝试了以下代码。

```
type="video/mp4"; codecs="avc1.42E01E, mp4a.40.2" 
```

2) 按照其他 SO questins 中的建议，在标签中添加了预加载选项。

```
preload="none" 
```

3) DOCTYPE 已经添加。我无法控制它。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T14:15:21.873

问题是 IE 处于某种兼容性怪癖模式（地址栏上的相同图标）。当我改变一切都很好。

# css - 模拟绝对定位 div 的正常流

> ID：15313331
> 
> 赞同：4
> 
> 时间：2013-03-09T16:52:17.460
> 
> 标签：css, css-position

**请参考[this fiddle](http://jsfiddle.net/xNUKb/7/)。**

我需要 div 的顶部与标题`#blue`的底部保持固定距离（例如 2em） 。`#red`换句话说，当标题的垂直尺寸增加时（即由于视口变窄导致菜单项换行） ，`#blue`应该“下推”div 。`#red`

我更喜欢纯 CSS 的解决方案，但如果有人能证实我的感觉，这不能由 CSS 单独完成，那么我还需要并感谢关于我应该挂钩哪些 jQuery 函数以及哪些 DOM 事件的建议.

**笔记：**

*   否则布局按原样工作，除了当前div （有效地）垂直定位，距离灰色div`#blue`顶部的固定距离。`#page`这意味着随着`#red`标头变高，会`#red`在 div 的“后面”延伸，`#blue`而不是“向下推”它。

*   HTML 是受约束的，除了`#green`和`#blue`div 的顺序可以颠倒（在`#main`div 内）。

*   `#blue`相对于 定位`#page`，而不是按标题后面的逻辑流`#red`定位，因为我要求定位其`#green`兄弟：顶部`#green` *必须*保持从`#page`.

    我已经实现了这一点（正确或错误），方法是相对于实现其水平位置`#green`的白边div 进行定位，然后绝对定位在其中以实现固定的垂直位置。`#main``#main``#page`

    这当然会影响 的位置`#blue`。我只是不确定是否有办法将这个 div 与另一个“分开”，使其恢复到更“正常”的流程。

    对于`#green`' 的相对于`#page`_ _`#green``#blue``#red``#green`

非常感谢您的时间！

HTML：

```
<body>
<div id="page">page
    <header id="red">
        <div id="menu-container">
            <ul id="nav-menu">
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
                <li class="menu-item">menu</li>
            </ul>
        </div>
    </header>
    <div id="main">
        <div id="blue"></div>
        <div id="green"></div>
    </div>
</div> 
```

CSS：

```
body {
    /*arbitrary*/
    background-color: black;
    padding: 0 1em
}
#page {
    /*arbitrary*/
    background-color: gray;
    border-color:gray;
    border-width:1pt;
    border-style:dotted;
    /* necessary - or at least, the achieved result is */
    max-width: 1000px;
    min-width: 240px;
    margin: 0 auto;
    /* both blue and green positioned relatively to this div */
    position:relative;
}
header {
    /*arbitrary*/
    background-color: red;
    /* necessary - or at least, the achieved result is */
    width: 100%;
}
/* necessary - or at least, the achieved result is */
 #menu-container {
    width: 50%;
}
ul {
    list-style: none;
}
.menu-item {
    margin: 0 0.25em 0 0.25em;
    display: inline-block;
}
#main {
    /*arbitrary*/
    border-color:white;
    border-width:1pt;
    border-style:dotted;
    /* necessary - or at least, the achieved result is */
    position:absolute;
    top: .5em;
    width: 100%;
}
#green {
    /*arbitrary*/
    background-color: green;
    height: 15em;
    /* necessary - or at least, the achieved result is */
    z-index: 100;
    width: 40%;
    position: relative;
    left: 50%;
}
#blue {
    /*arbitrary*/
    background-color: blue;
    height:3em;
    /* necessary - or at least, the achieved result is */
    width:100%;
    /**** here's the problem - top of blue currently 5em below top of grey page.
    But I want it 2em below bottom of red header nomatter how tall red header is ****/
    position: absolute;
    top:5em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:19:33.463

为什么不忘记相对定位并`#green`从页面顶部绝对定位？

```
 #page {
    ...
    position:relative;
 }

 #green {
    ...
    position: absolute;
    left: 50%;
    top:0.5em;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:18:23.080

[http://jsfiddle.net/xNUKb/8/](http://jsfiddle.net/xNUKb/8/)

取出`position: absolute`：`#main`和`#blue`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:22:51.750

绝对定位可能会让你头疼。但是这个想法很简单。

[http://jsfiddle.net/vuwzN/](http://jsfiddle.net/vuwzN/)

```
<div id="red"></div>
<div id="blue"></div>

#red {
   height: 150px; /* variable height*/
   margin-bottom: 50px; /* fixed distance between red and blue */
   background-color: red;
}

#blue {
   height: 100px;
   background-color: blue;
} 
```

# sql - 如何使用 2 个表制作数据透视表并使用月份列名称

> ID：15313341
> 
> 赞同：1
> 
> 时间：2013-03-09T16:52:54.100
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot

谁有2张桌子：

```
CREATE TABLE [dbo].[Clients](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [FIO] [nvarchar](100) NULL,
        [HPhone] [nchar](10) NULL,
        [MPhone] [nchar](10) NULL,
     CONSTRAINT [PK_Clients] PRIMARY KEY CLUSTERED )

    CREATE TABLE [dbo].[Payment](
        [ID] [int] IDENTITY(1,1) NOT NULL,
        [Paid] [decimal](18, 0) NOT NULL,
        [date] [date] NULL,
        [IDClient] [int] NULL,
     CONSTRAINT [PK_Payment] PRIMARY KEY CLUSTERED 
    ) 
```

如何进行 sql 查询来构建此数据：

```
ID  FIO                January   February  March     April     May       etc
--- ------------------ --------- --------- --------- --------- --------- ---------
1    Jimm Salvan       200       200       200       200       NULL      etc
2    Bob Dillan        200       200       200       200       NULL      etc 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:02:41.713

使用[**`PIVOT`**](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)表运算符：

```
SELECT
  Id,
  FIO,
  [1] AS January,
  [2] AS Febrary,
  [3] AS March,
  [4] AS April,
  [5] AS May,
  ... etc
FROM
(
  SELECT 
    c.id,
    c.FIO,
    ISNULL(p.paid, 0) AS paid,
    MONTH(Date) AS month
  FROM clients AS c
  LEFT JOIN Payment AS p ON c.Id = p.Id
) AS t
PIVOT
(
  SUM(paid)
  FOR month IN([1], 
               [2], 
               [3], 
               [4], 
               [5]
               ... etc)
) AS p; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/37d26/4)

* * *

**编辑：**您可以使用`DATENAME(MONTH, Date)`@AndriyM 在下面的评论中建议直接获取月份名称。像这样的东西：

```
SELECT
  *
FROM
(
  SELECT 
    c.id,
    c.FIO,
    ISNULL(p.paid, 0) AS paid,
    DATENAME(month, Date) AS monthname
  FROM clients AS c
  LEFT JOIN Payment AS p ON c.Id = p.Id
) AS t
PIVOT
(
  SUM(paid)
  FOR monthname IN(January, 
                   February,
                   March, 
                   April, 
                   May,
                   ...)
) AS p; 
```

[**像这样。**](http://sqlfiddle.com/#!3/37d26/14)

# javascript - 阻止来自 iframe 的任意元素

> ID：15313344
> 
> 赞同：1
> 
> 时间：2013-03-09T16:53:23.383
> 
> 标签：javascript, html, google-chrome, iframe, same-origin-policy

有没有办法阻止特定的 HTML 元素被创建到 IFrame 中？

我没有使用 JQuery，但我不介意使用它。

我的基本代码如下：

```
<iframe id="id_frame_01" src="somepage"></iframe>
<script type="text/javascript>

frame = document.getElementById('id_frame_01').contentWindow.document;

frame.onload = function(){
    var toremove = frame.getElementsByTagName('iframe');
    toremove.outerHTML = '';
    toremove = frame.getElementsByTagName('object');
    toremove.outerHTML = '';
}

</script> 
```

我可以完全访问 iframe 的内容，但是如果我尝试在 onload 事件之后手动删除元素，onload 事件就太远了，并且（示例）YouTube 视频开始播放。

我知道要删除的元素的 ID，但我不想使用它们，因为网站“更新”可能会破坏系统。相反，我更喜欢按元素类型过滤。

这是一个特定于浏览器的页面，仅限 Chrome。

有没有办法将 onchange 事件附加到非创建元素？

有没有办法拦截元素的加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T00:12:38.417

您可以使用 ajax（或带有 jQ​​uery 的 $.ajax），而不是直接在 iframe 中加载页面。这将允许您过滤页面 html 并仅注入您希望用户看到的内容。

您说您可以完全访问 iframe 内容，所以我假设您的实施遵循[相同的来源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。

# php - 发布变量错误

> ID：15313348
> 
> 赞同：0
> 
> 时间：2013-03-09T16:53:48.503
> 
> 标签：php, mysql

目前我正在尝试向我的画廊添加一个新功能。基本上在画廊列表中是封面照片，我想让自己通过网站选择封面照片，而无需手动将图像地址添加到我的画廊表中。

目前我在下面有这段代码，我似乎遇到了一个错误，尽管我不太确定是什么原因造成的，是否是发布变量 - 我不太确定：S。

该代码应该使用 url 参数从图库表和图像表中获取所有必要的信息。我还创建了 $imgurl 变量，它显示要插入到图库表中的图像 url。$galleryid 变量用于通过添加图像 url 来确定应该更新主列的位置。然后，它通过将“主”列值设置为上面已经检索到的图像 url 来连接和更新画廊表，其中画廊 id 等于上面也获得的 $galleryid 变量。

我收到的错误：

无法运行查询：SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 7 行的 '' 附近使用正确的语法

```
<?php
require "../../resources/includes/common.php";
include "../../resources/includes/image-retrieval.php";
$imgurl = htmlentities($row['url'], ENT_QUOTES, 'UTF-8');
$galleryid = htmlentities($row['gallery'], ENT_QUOTES, 'UTF-8');
$con = mysql_connect("localhost","user","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

$id = $_GET['id'];
mysql_select_db("database", $con);

$sql="UPDATE gallery SET main='$imgurl' WHERE id='$galleryid'";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
header("Location: ../../image.php?id=" . $id); 
die("Redirecting to: image.php"); 

mysql_close($con);
?> 
```

任何帮助将不胜感激，因为我不知道从这里去哪里：S！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:06:00.587

您的查询看起来正确

如果它们给出正确的值，请尝试验证查询中的变量

```
 $imgurl  , $galleryid 
```

尝试在查询之前回显它们，看看它们给出了什么

# android - 模拟器已加载，但应用程序未安装且没有错误

> ID：15313349
> 
> 赞同：0
> 
> 时间：2013-03-09T16:54:09.483
> 
> 标签：android, eclipse, avd, helios

模拟器已加载，但未安装应用程序，我尝试重新启动 adb，重新启动 eclipse，创建新的 android 项目，创建新的 avd 一切正常，但我根本无法安装任何应用程序。下面是我的xml文件。感谢您的帮助

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.eldorado.myfirstapp"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="10" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.eldorado.myfirstapp.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是安卓控制台

```
[2013-03-11 21:55:20 - MySecondProject] ------------------------------
[2013-03-11 21:55:20 - MySecondProject] Android Launch!
[2013-03-11 21:55:20 - MySecondProject] adb is running normally.
[2013-03-11 21:55:20 - MySecondProject] Performing com.exapmple.mysecondproject.MainActivity activity launch        
[2013-03-11 21:55:20 - MySecondProject] Automatic Target Mode: Preferred AVD 'Gingerbread_WVGA'   is not available. Launching new emulator. 
```

[2013-03-11 21:55:20 - MySecondProject] 使用虚拟设备“Gingerbread_WVGA”启动新的模拟器 [2013-03-11 21:55:28 - 模拟器] 模拟器：模拟器窗口不在视野范围内，并被重新定位 [ 2013-03-11 21:55:28 - 模拟器]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T14:22:03.923

检查您使用任何 API 创建的 VD，或将 android:minSdkVersion="10" 更改为 android:minSdkVersion="7" 并重试。

# sql - SQL，按区域的地理位置选择

> ID：15313353
> 
> 赞同：0
> 
> 时间：2013-03-09T16:54:25.330
> 
> 标签：sql, geolocation, geopoints

我正在尝试进行查询以选择位于某个区域的用户。我有这张桌子：

`Users`( `user_id`, `username`, `user_latitude`, `user_longitude`)

我有一个由 2 个点定义的区域：

*   西北（纬度，液化天然气）
*   东南 (lat, lng)

如何获取该区域包含的地理位置的用户？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:18:32.067

假设您的区域类似于矩形，则一种天真的但简单的方法可能如下所示：

```
SELECT * FROM Users WHERE (user_latitude >= 1.2393 AND user_latitude <= 1.5532) 
AND (user_longitude >= -1.8184 AND user_longitude <= -1.654) 
```

对于更复杂的需求，您应该使用地理空间功能。

# c# - 用于 youtube 视频的 ASP/C# 正则表达式

> ID：15313354
> 
> 赞同：4
> 
> 时间：2013-03-09T16:54:28.953
> 
> 标签：c#, regex, asp.net-mvc

我在调整最初与 Javascript 一起使用的 Regex 以与 ASP.NET 正则表达式验证器控件一起使用时遇到问题。

我目前正在使用：

```
(?:https?://)?(?:www\\.)?(?:youtu\\.be/|youtube\\.com(?:/embed/|/v/|.*v=))([\\w-]{10,12})($|&).* 
```

但它不起作用。（总是返回验证错误）

我还想知道是否可以使用正则表达式从视频 URL 中提取 youtube ID，以及如何？

感谢您的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:35:29.690

RegEx for validating a youtube URL and extracting the Video_ID:

```
^(?:https?\:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v\=))([\w-]{10,12})(?:$|\&|\?\#).* 
```

Escaped RegEx:

```
^(?:https?\\:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v\\=))([\\w-]{10,12})(?:$|\\&|\\?\\#).* 
```

Test here: [http://fiddle.re/w1nn6](http://fiddle.re/w1nn6)

# java - @OneToMany Map 静默删除 Map 的键

> ID：15313355
> 
> 赞同：2
> 
> 时间：2013-03-09T16:54:30.577
> 
> 标签：java, sql, hibernate, jakarta-ee

我有以下代码应该将地图保存到数据库。问题是，虽然它保存了实体及其关系，但它默默地丢弃了映射键值——没有错误，什么都没有，数据库只是得到 NULL。

代码：

```
package com.tester;

import java.util.HashMap;
import java.util.Map;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.ManyToOne;
import javax.persistence.MapKey;
import javax.persistence.OneToMany;
import javax.persistence.Table;

import lombok.Data;
import lombok.ToString;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class App {
    @Entity
    @Table (name = "test_items")
    @Data
    @ToString (exclude = "parent")
    public static class Item {
        @Id @GeneratedValue
        private Long id;

        int slot;

        @ManyToOne
        private Item parent;

        @OneToMany (cascade = CascadeType.ALL, mappedBy = "parent")
        @MapKey (name = "slot")
        Map<Integer, Item>  children;
    }

    private static SessionFactory buildSessionFactory() {
        try {
            return new AnnotationConfiguration().configure().buildSessionFactory();
        } catch (final Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static void main(final String[] args) {
        final SessionFactory sf = buildSessionFactory();
        final Session session = sf.openSession();
        session.beginTransaction();

        final Item item100 = new Item();
        final Item item110 = new Item();
        session.save(item100);
        session.save(item110);
        session.flush();
        item110.setParent(item100);
        final HashMap<Integer, Item> children = new HashMap<Integer, Item>();
        children.put(3, item110);
        item100.setChildren(children);
        session.saveOrUpdate(item100);
        session.saveOrUpdate(item110);

        session.getTransaction().commit();
        session.close();
    }
} 
```

上述之后的预期数据库结果：

```
id  slot parent_id
1   0    NULL
2   3    1 [->] 
```

实际结果：

```
id  slot parent_id
1   0    NULL
2   0    1 [->] 
```

如您所见，即使 Hibernate 为键创建了一个列，它们也被 NULL 填充，并且来自的信息片段“3”`children.put(3, item110);`根本不会持久保存到数据库中。它完全丢失了。

想法？

注意：我也尝试过`@MapKeyClass (Integer.class)`，但没有成功。

编辑：有问题的 3 并不意味着引用其他任何内容，也不是对任何其他字段/列的引用。这是一个任意值，在这个特定的上下文中，它应该定义具有多个插槽的容器中的项目的索引。但就我而言，您可以将其替换为“abcdefg”（当然，假设您将 Map 更改为采用 String 而不是 Integer）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T19:17:17.050

JPA 的一个（有时是苛刻的）规则是，如果您希望检索具有相同关系的相同实体，则必须在持久性之前*正确建立实体之间的**所有关系。*

 *所以，问问自己：“3”是从哪里来的，它的意思是什么？它在哪里坚持？

## 选项：映射键不是持久字段

这似乎是最不可能的，但问题的更新表明情况确实如此。当你检索一个实体时，它需要在键中包含*一些东西。*它不会只是编造一些东西。

底线：在这种情况下你不能使用地图；改用 a `List<Item>`。您应该仍然可以通过某些索引进行访问。

## 选项：映射键是一个持久字段

如果映射键是持久字段，则必须指定：

```
@MapKey(name=<keyfieldname>) 
```

### 使用非`id`映射键的字段：

根据您的情况，引入一个新字段（当前示例您已经用完了选项！）：

```
@Column
Integer slot; 
```

并在地图上使用适当的@MapKey：

```
@OneToMany (cascade = CascadeType.ALL, mappedBy = "parent")
@MapKey(name="slot")
Map<Long, Item> children = new HashMap<Integer, Item>(); 
```

最后在您的代码中：

...

```
final Item parent = new Item();
final Item child = new Item();
child.setSlot(3);
child.setParent(parent);

final HashMap<Integer, Item> children = new HashMap<Integer, Item>();
children.put(child.getParentKey(), child);
parent.setChildren(children);

session.save(child);
session.save(parent); 
```

### 使用`id`作为映射键：

使用 id（一旦你获得了正确的类型）引入了一个新问题：如何`id`在创建父级之前获取子级（自动生成）。给定一个 JPA `EntityManager em`：

```
@OneToMany (cascade = CascadeType.ALL, mappedBy = "parent")
@MapKey(name="id")
Map<Long, Item> children = new HashMap<Integer, Item>();

...

final Item parent = new Item();

final Item child = new Item();
child.setParent(parent);
em.persist(child);
em.flush(); // Force child's 'id' to be generated & populated

final HashMap<Integer, Item> children = new HashMap<Integer, Item>();
children.put(child.getId(), child);
parent.setChildren(children);

em.persist(parent); 
```

这适用于 JPA/EclipseLink，我只能假设它适用于 Hibernate`Session`的方法`save`和`flush`.*

# php - 通过 C++ 桌面应用程序发送发布请求

> ID：15313358
> 
> 赞同：0
> 
> 时间：2013-03-09T16:54:38.733
> 
> 标签：php, c++, http, post, request

我正在使用[SFML::Network](http://sfml-dev.org/documentation/2.0/group__network.php)访问我的网络服务器并发送高分。高分由将它们存储在 JSON 文件中的 PHP 脚本接收：

```
...
$name = $_POST["n"];
$validator = $_POST["v"];
$score = $_POST["s"];
... 
```

我目前正在从 C++ 发送一个 POST 请求，如下所示：

```
...
Http http; http.setHost("http://mywebsite.com");
Request request("script.php", Http::Request::Post);
request.setBody("n=" + mName + "&v=" + mValidator + "&s=" + toStr(mScore));
http.sendRequest(request);
... 
```

这可行，但与 GET 请求具有相同的限制 - 尤其是字符限制。由于我需要验证在 LUA 中制作的自定义关卡的高分，我想将整个 LUA 文件（去除符号和空格）作为 mValidator 传递。但它不适用于 1000 个字符。小弦可以正常工作。

有人告诉我，字符限制仅存在于 GET 请求中，并且我以错误的方式调用 POST 请求。

如何在不压缩参数的情况下正确调用 POST 请求并避免字符限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:26:12.587

1000 个字符应该可以正常工作。检查以确保您的字符串已正确编码。内容类型`x-www-form-urlencoded`应该是 URL 编码的。

# php - 安全保存 php 变量

> ID：15313359
> 
> 赞同：1
> 
> 时间：2013-03-09T16:54:41.497
> 
> 标签：php, forms, variables

嗨，我需要将 php 值安全地保存到数据库中的某个文件。我有这个简单的形式：

索引.php

```
<form action="settings.php" method="post">
<input type="text" name="width" value="">
<input type="submit">
</form> 
```

和

设置.php

```
<?php 

$width = $_POST["width"];

$fp = FOpen("file.txt", "w+");
$fp3 = "$width"; 

FPutS($fp, $fp3); 
FClose($fp); 

header("location: index.php"); 
?> 
```

我需要保护我的 file.txt，因为如果有人知道这一点，他就可以从另一台服务器修改我的 file.txt。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:03:09.457

好的，首先，没有人可以修改您的文本文件...您要做的是创建一个.htaccess文件并将其放在file.txt目录中。

转到记事本并输入

```
//Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^google.com[nc]
RewriteRule ^(.*)$ http://www.google.com/$1 [r=301,nc] 
```

转到保存并输入任何名称，只输入 .htaccess 并将其放在文本文件的目录中。

# php - 椒盐密码是否算作 96 位加密？

> ID：15313362
> 
> 赞同：0
> 
> 时间：2013-03-09T16:54:57.470
> 
> 标签：php, security, encryption, passwords, md5

我已经为盐和胡椒密码加密创建了这个代码。我认为这是加密密码的好方法，但这是什么级别的加密？

我首先认为“位”部分是使用的字符长度，但我知道这是不正确的。这将是多少位加密？

**PHP**

```
function _h() {
  $result = "";
  $charPool = '0123456789abcdefghijklmnopqrstuvwxyz';
  for($p = 0; $p<32; $p++)
    $result .= $charPool[mt_rand(0,strlen($charPool)-1)];
  return md5(sha1(md5(sha1($result))));
}

$salt = _h();
$pepper = _h();
$pass = $salt.md5($salt.md5($_POST['password']).$pepper).$pepper; 
```

**更新**

我知道这不是加密，所以我不能说这是加密的，而是散列。带有盐和胡椒的散列密码是否足够安全以保存密码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T22:19:03.020

您的密码哈希方案存在很多问题。

PHP 5.5 将有自己的函数 password_hash() 和 password_verify() 准备好，以简化生成 BCrypt 密码哈希。我强烈推荐使用这个优秀的 api，或者它是早期 PHP 版本的[兼容包](https://github.com/ircmaxell/password_compat/blob/master/lib/password.php)。用法非常简单：

```
// Hash a new password for storing in the database.
// The function automatically generates a cryptographically safe salt.
$hashToStoreInDb = password_hash($password, PASSWORD_BCRYPT);

// Check if the hash of the entered login password, matches the stored hash.
// The salt and the cost factor will be extracted from $existingHashFromDb.
$isPasswordCorrect = password_verify($password, $existingHashFromDb); 
```

这些功能将解决以下问题：

1.  他们使用慢速自适应散列函数 (BCrypt)，MD5 对于散列密码来说太快了。
2.  它们从操作系统的随机来源生成安全盐。

胡椒不仅仅是第二种盐，与盐相比，胡椒是秘密的，不会与哈希一起储存。所有密码通常使用相同的辣椒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:01:02.213

过多的计算复杂`salt`化是没有用的。`$peppr`毕竟，任务不是检索最初用于生产这些香料的东西，而是取回 of 的值，然后将`$_POST('a']`and*作为*`$salt`前缀`$pepper`/后缀（否则你不能使用存储的值来*验证*输入密码）这个哈希）。话虽如此，请按照@zneak 的评论进行操作并使用专家库功能。

# ios - html src 正则表达式 iOS

> ID：15313367
> 
> 赞同：0
> 
> 时间：2013-03-09T16:55:52.527
> 
> 标签：ios, objective-c, regex

需要一些关于这个简单正则表达式的提示。

## 用于从 <img src="..." /> 中提取 src 的正则表达式和目标字符串代码

```
NSString *imgTag = @"<img alt=\"\" src=\"/sites/default/files/mypic.gif\" style=\"width: 300px; height: 195px;\" />";

NSRegularExpression *a = [NSRegularExpression regularExpressionWithPattern:@"src=\"(.*)\"" options:NSRegularExpressionCaseInsensitive error:nil]; 
```

不确定是否与`options`

```
NSTextCheckingResult *matches = [a firstMatchInString:imgTag options:NSMatchingReportProgress range:NSMakeRange(0, [imgTag length])];

NSRange matchRange = [matches range];
NSString *src = [imgTag substringWithRange:matchRange];
NSLog(@"%s, %@", __PRETTY_FUNCTION__, src); 
```

现在输出是出乎意料的，因为它不仅返回组，还返回它之后直到结束标记的所有内容。

## 输出

```
/sites/default/files/mypic.gif" style="width: 300px; height: 195px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:02:35.153

它基本上匹配从 first`"`到 last的所有内容`"`。

您可能应该使用非贪婪运算符`?`，它“[匹配 0 次或多次。匹配尽可能少。](https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009708-CH1-SW49) ”。
例如：

```
NSRegularExpression *a = [NSRegularExpression regularExpressionWithPattern:@"src=\"(.*?)\"" options:NSRegularExpressionCaseInsensitive error:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:00:54.773

您的正则表达式很贪婪。

尝试：

```
@"src=\"(.*?)\"" 
```

为你的表达。

# javascript - 3D 投影如何工作？

> ID：15313368
> 
> 赞同：-1
> 
> 时间：2013-03-09T16:56:02.600
> 
> 标签：javascript, math, 3d

如果有一个给定 fov 和纵横比值的相机`(0, 0, 0)`直视 Z 轴，并且有一个三角形`(x1, y1, z1), (x2, y2, z2), (x3, y3, z3)`，并且画布是 1024*768 像素，那么它将如何计算（在右手坐标系中)? 是否有任何易于理解的示例代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:03:58.733

当然也有简单的。维基百科上有您需要的所有信息：[http ://en.wikipedia.org/wiki/3D_projection](http://en.wikipedia.org/wiki/3D_projection)

如果您需要一些代码：[http ://codeincodeblock.blogspot.sk/2012/03/projecting-3d-world-co-ordinates-into.html](http://codeincodeblock.blogspot.sk/2012/03/projecting-3d-world-co-ordinates-into.html)

在堆栈上是类似的问题：[3d to 2d Projection Matrix](https://stackoverflow.com/questions/130829/3d-to-2d-projection-matrix?rq=1)

# java - Java swing - 大小错误

> ID：15313380
> 
> 赞同：3
> 
> 时间：2013-03-09T16:57:10.583
> 
> 标签：java, swing, layout, size

所以我有这个问题。我在 Java Eclipse SDK 4.2.1 中编写了这段代码。我这里还没有全部写完，actionPerformed 方法现在已经无关紧要了，它是从 Main 调用一次。问题是有时当我运行它时，其中一个组件会填满整个窗口并与所有其他组件重叠。我尝试通过随机数更改大小，例如从 400 到 350，有时它会起作用，然后又坏了。我可能错过了什么，我只是不知道是什么。我搜索了其他论坛，但一无所获。

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.Collections;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JTextField;

public class Window extends JFrame implements ActionListener
{
    JTextField field1;
    JTextField field2;

    public Window()
    {
        super("Main Window");
        setVisible(true);
        setSize(500, 500);
        setResizable(false);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Initialize();
    }
    private void Initialize()
    {
        field1 = new JTextField();
        field2 = new JTextField();
        field1.setBounds(0, 0, 400, 100);
        field2.setBounds(0,100,400,100);
        add(field1);
        add(field2);
        field1.setBackground(Color.PINK);
        field1.setForeground(Color.RED);
        field2.setBackground(Color.PINK);
        field2.setForeground(Color.RED);
        JButton button = new JButton("Create");
        button.setBounds(0, 200, 400, 100);
        add(button);
        button.setBackground(Color.BLACK);
        button.setForeground(Color.YELLOW);
        button.addActionListener(this);

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T16:58:54.073

您的问题是您的代码不尊重正在使用的布局管理器，因为您尝试添加组件，就好像正在使用的布局为空，而实际上并非如此。解决方案是阅读并了解布局管理器，并使用它们；这包括避免调用`setBounds(...)`. 请注意，JFrame 的 contentPane 默认使用 BorderLayout。这些信息应该可以帮助您入门。另请注意，***错误***的解决方案是使用空布局。因此，如果有人建议这样做，我敦促您忽略它们。

# php - Wordpress：移动媒体文件夹

> ID：15313388
> 
> 赞同：3
> 
> 时间：2013-03-09T16:57:47.597
> 
> 标签：php, mysql, wordpress, directory, move

我想将文件夹 (/uploads/2010) 移动到另一台服务器，但我希望主站点能够访问移动文件夹中的文件。

例如，如果现在我有一个图片 url：2010/pic.jpg

完整网址： http: [//www.dominin.com/wp-content/uploads/2010/pic.jpg](http://www.domanin.com/wp-content/uploads/2010/pic.jpg)

新网址将是： http: [//www.dominin-2.com/uploads/2010/pic.jpg](http://www.domanin-2.com/uploads/2010/pic.jpg)

我的问题有什么解决办法吗？

为我的英语道歉！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:01:13.293

您可以指向`www.domanin-2.com`另一台服务器。您可以通过编辑`domanin-2.com`. 在这种情况下，您将能够读取文件，但如果您想在那里写入文件，则必须更改 Wordpress 的源代码，以允许 2 个服务器之间的通信（例如通过[CURL](http://php.net/manual/en/book.curl.php)或[FTP](http://php.net/manual/en/book.ftp.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T21:42:31.043

老实说，我还没有深入研究这个解决方案，因为我应该很快就开始冒险了；CDN 的设置方式可以将 Web 服务器与静态文件分离到不同的服务器上。

这是我不熟悉的领域，但可能会找到文档，具体取决于服务器配置。你会把两者联系起来。此时，先决条件将是 Sysop 级别。我可能不得不为此编写文档，因为我的服务器配置有点不寻常。

# angularjs - AngularJS - 如果没有更改模型，我需要调用 $apply 吗？

> ID：15313389
> 
> 赞同：0
> 
> 时间：2013-03-09T16:57:54.337
> 
> 标签：angularjs

问候溢出者，

如果我在事件处理程序中更改 HTML 原生属性（例如部门的类），是否需要通过调用 $apply 来包装它？换句话说，这些原生属性是否可观看？

示例：
我正在执行一个自定义指令，其中我正在修改元素的类以在某些事件（如鼠标输入）上设置样式，但不修改范围（或模型）。我想知道是否需要通过调用 $apply 来围绕这个逻辑，以防万一这些元素的类属性上有 $watch ？这些 $watches 可以使用 angularjs 吗？我的自定义指令将被其他程序员使用。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:03:00.300

如果您想要更新绑定等，Angular 不知道的任何东西都应该在 $apply 中......

所以不，如果您手动更改 DOM 并且它不是用户事件或 Angular 服务事件的一部分（如 $http），则此本机属性是不可观察的

# eclipse - 如何在 Eclipse 中增加应用程序堆大小？

> ID：15313393
> 
> 赞同：60
> 
> 时间：2013-03-09T16:58:26.140
> 
> 标签：eclipse, jvm, heap-memory

有人说我需要在我的应用程序的运行配置中这样做。当我打开那个窗口时，你能告诉我如何设置正确的参数和内存量吗？说如何设置2GB或1.5GB？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-03-09T17:03:07.990

在要自定义的运行配置中（只需单击它）打开选项卡`Arguments`并添加`-Xmx2048m`到 VM 参数部分。您可能还想设置`-Xms`（小堆大小）。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2014-10-20T09:01:45.747

1.  转到 Eclipse 文件夹

2.  在 Eclipse 文件夹中查找 Eclipse 图标

3.  右键单击它，您将获得“显示包内容”选项

4.  内容文件夹将在屏幕上打开

5.  如果您使用的是 Mac，那么您会找到“MacOS”

6.  打开 MacOS 文件夹你会发现 eclipse.ini 文件

7.  在 word 或任何文件编辑器中打开它进行编辑

    ...

    ```
     -XX:MaxPermSize=256m

     -Xms40m

     -Xmx512m 
    ```

    ...

8.  将 -Xms512m 替换为 -Xmx1024m

9.  保存文件并重新启动 Eclipse

10.  玩得开心:)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-09-15T17:15:28.407

找到 Eclipse 顶部的 Run 按钮，然后选择 Run Configuration -> Arguments，在 VM arguments 部分中只需提及要扩展的堆大小，如下所示：

```
-Xmx1024m 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-27T06:45:01.027

打开`eclipse.ini`

搜索`-Xmx512m`或可能更大的大小。

只需将其更改为所需的大小，例如我将其更改为`-Xmx1024m`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-03-26T06:18:19.317

在 Eclipse 文件夹中有 eclipse.ini 文件。增加尺寸 `-Xms512m -Xmx1024m`

# sed - mac终端的sed有什么问题吗？

> ID：15313397
> 
> 赞同：0
> 
> 时间：2013-03-09T16:58:49.347
> 
> 标签：sed

我无法让 sed 在我的 mac 终端上工作。我拥有的原始版本是 /usr/bin/sed 我想看看它是什么版本，所以我输入：

```
sed --version 
```

我得到以下输出：

> /usr/bin/sed: 非法选项 -- -- 用法：sed script [-Ealn] [-i extension] [file ...] sed [-Ealn] [-i extension] [-e script] ... [ -f 脚本文件] ... [文件 ...]

我的手册页适用于 sed 4.2，应该有一个 --version 选项

[然后我通过从 gnu ftp http://ftp.gnu.org/gnu/sed/](http://ftp.gnu.org/gnu/sed/)下载安装到 /usr/local/bin

然后我运行`/usr/local/bin/sed`--version 并且仍然得到与原始版本相同的输出。我完全糊涂了，谁能弄清楚我做错了什么？

编辑：似乎即使*which sed*给了我*/usr/local/bin/sed*命令*sed*仍在运行*/usr/bin/sed*，因此*/usr/local/bin/sed*没有被调用。如果我使用完整路径调用它会按预期工作。

我想现在的问题是为什么*哪个 sed*给了我*/usr/local/bin/sed*而当我键入*sed*时运行的命令是*/usr/bin/sed*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:10:38.970

您是错误语句显示的`/usr/bin/sed`不支持的 BSD sed 。`--version`它的手册页是`/usr/share/man/man1/sed.1.gz`，当我读到根本没有提到版本时，但是手册页上的日期是 2005 年 5 月 10 日。

我认为您的手册页不正确。很可能`MANPATH`是首先寻找其他地方。

至于您为什么`/usr/local/bin/sed`说 GNU sed 不尊重`--version`我不确定的原因。你能提供更多细节吗？

# javascript - 存储在服务器端文件中的 Javascript 数组

> ID：15313401
> 
> 赞同：0
> 
> 时间：2013-03-09T16:58:57.583
> 
> 标签：javascript

我正在为基于 Web 的医疗游戏编写一些 javascript（对 javascript 来说基本上是非常新的，但我有使用 Java 的经验，而且我只是边走边学）。这个想法是每个病例（患者）都有几个数据字段，并且字段的名称总是相同的（“心率”、“胸部 X 射线”等），但与名称关联的数据取决于具体情况。在构建基本功能时，我一直在使用关联数组，因此当有人输入一个元素（比如“验血 A”）时，结果会出现在屏幕的另一个区域。

所以，当我开始创建案例时，我希望每个案例都是服务器端的一个单独文件，它只存储数组，这样我就可以在案例开头加载数组并使用一般引用（所有数组必须）来获取存储在特定数组中的特定值。我猜另一种选择是拥有一个包含多个版本数组的单个文件，并以某种方式将特定数组传递回页面的脚本并将其写入局部变量。

想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:08:44.583

听起来您只想将数组存储为 JSON，您可以使用客户端直接加载，例如：

患者A.json：

```
{
    "Heart Rate": 160,
    "Chest xray": ... whatever
} 
```

将该文件放在您的网络服务器上，然后您的客户端可以执行（例如使用[jQuery](http://jquery.com/)）

```
$.getJSON("server_addr/patientA.json", function (data) { // do something with data } ); 
```

# c++ - 如何使用winapi实现类似Steam的窗口？

> ID：15313403
> 
> 赞同：5
> 
> 时间：2013-03-09T16:58:58.830
> 
> 标签：c++, c, winapi, resize, steam

![蒸汽窗口](../Images/f5365279cb194bba621523769defb51c.png) 这是 Steam 客户端窗口正在调整大小的屏幕截图。

Steam 的客户端窗口有两个很酷的功能。

1.  非常灵敏的自定义窗口。
2.  酷炫的玻璃调整大小效果，不同于标准窗户（认为这可能是与 1 密切相关的副作用）

假设我想使用 winapi 创建类似的窗口。我该怎么做？

我不问小部件管理相关的东西，而是技术 winapi 技巧。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T17:35:48.493

基本上，你几乎可以用你的窗户做任何事情。但是大多数技巧都是手动实现的。

1.  我不知道什么是“非常敏感”。如果您的意思是窗口没有标准边框，那么很容易实现：在创建窗口时不要指定`WS_BORDER`和。之后，您必须自己绘制边框和标题。处理和消息，绘制背景，菜单，一切照常。`WS_CAPTION``WS_POPUP``WM_ERASEBKGND``WM_PAINT`
2.  在我看来，这种效果更像是一个错误。它是这样发生的：窗口被调整大小，它收到一条`WM_SIZE`消息，处理它，Windows 发送一条`WM_ERASEBKGND`窗口忽略的消息。因此，系统在尚未填充新窗口图像的新窗口框架周围绘制新阴影。在这里，我们得到了这种很酷的玻璃效果：带有窗户航空阴影的底层窗户的旧图像。您可以尝试禁用 windows 阴影并查看此效果。

为了创建自定义大小调整边框，您可能会发现这些函数很有用：`LoadCursor`、`SetCursor`、`MoveWindow`。

为了绘制您的自定义边框，您可以使用标准 GDI 函数。您还可以创建一些子窗口并将绘图委托给它们。这是winapi的基础。

# f# - 在应用程序脚本托管中。tryfsharp.org 是如何工作的？

> ID：15313404
> 
> 赞同：6
> 
> 时间：2013-03-09T16:59:00.180
> 
> 标签：f#

我对在我的应用程序中使用 F# 脚本的能力感兴趣。

拥有像[tryfsharp.org](http://tryfsharp.org/Create)这样的东西会很棒，特别是 Intellisense 功能。这些东西在 Github 上的某个地方可用吗？这是如何运作的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T12:10:36.803

**简短的回答**

用于第一个带有 F# 2 的 TryFSharp 的代码（包括 Intellisense 支持）可作为[code drop](http://blogs.msdn.com/b/fsharpteam/archive/2011/11/15/updates-to-the-august-2011-f-2-0-compiler-code-drop.aspx)获得。例如，Rob Pickering 用它为[Undertone](http://strangelights.com/blog/archive/2012/01/27/undertone-ndash-programmable-music-in-f.aspx)构建了一个在线编辑器。我怀疑当前使用 F# 3 的 TryFSharp 网站上使用的代码会及时出现。

TryFSharp 使用 Silverlight 在客户端浏览器中托管 F# 编译器（F# 是用 F# 编写的）。也可以从浏览器按需调用在服务器上运行的 F# 编译器的实例，这是[TryFs.Net](http://tryfs.net/)和[Pit](https://github.com/fsharp/pitfw)采用的一种方法。

**更长的答案**

脚本有两个方面：

1.  编辑
2.  执行

F# 已经支持通过[F# Interactive](http://msdn.microsoft.com/en-us/library/dd233175.aspx)编辑和执行 (.fsx)[脚本文件](http://blogs.msdn.com/b/chrsmith/archive/2008/09/12/scripting-in-f.aspx)。

**编辑 F# 代码**

F# 代码不乏外部编辑器：

*   [视觉工作室](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/12/announcing-the-release-of-f-tools-for-visual-studio-express-2012-for-web.aspx)
*   [夏普发展](http://www.icsharpcode.net/OpenSource/SD)
*   [Xamarin 工作室](http://xamarin.com/studio)
*   [Emacs](http://blogs.msdn.com/b/dsyme/archive/2013/01/19/f-emacs-integration.aspx)
*   [维姆](https://github.com/timrobinson/fsharp-vim)
*   [尝试FSharp](http://www.tryfsharp.org/)
*   [F# 笔记本](https://fsnotebook.net)

Xamarin Studio、Emacs 和 Vim 的编辑器支持基于提供代码完成的开源[F# Bindings项目。](https://github.com/fsharp/fsharpbinding)SharpDevelop 使用开源[AvalonEdit](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit)并包括 F# 的语法高亮。您可以在自己的项目中使用 AvalonEdit，例如开源[Refunctor](http://refunctor.codeplex.com/)项目使用它在 Reflector 中提供 F# 编辑。

还有几个新的 F# 编辑器即将推出：

*   [Cloud Sharper](https://www.facebook.com/photo.php?v=10200294287900993&set=vb.189105887856115&type=2&theater) - 基于 Web 的 F# IDE
*   [Tsumani IDE](http://www.youtube.com/channel/UCTYyqC9O4DBGfdsjaLVp7cg) - Excel、Hadoop 等的嵌入式编辑器。

AvalonEdit 是开始基于桌面的嵌入式编辑器的好地方。选择编辑器环境后，您需要在简单的语法突出显示或使用 F# 绑定的更高级集成之间进行选择。如果您怀疑人们会使用外部编辑器，那么语法高亮可能就足够了。

带上你自己的编辑器可能是最容易开始的地方，它只需要执行即可。

**执行 F# 代码**

执行 F# 代码的选项：

*   [F # PowerPack](http://fsharppowerpack.codeplex.com/)中的[F# CodeDOM](https://twitter.com/ptrelford/status/309680845403353088/photo/1)
*   通过 F# 编译器代码删除或调用[fsi.exe的 F# 编译器](http://msdn.microsoft.com/en-us/library/dd233175.aspx)

使用 F# CodeDOM 编译代码段：

```
open Microsoft.FSharp.Compiler.CodeDom
open System.CodeDom.Compiler

let compile snippet =
    use provider = new FSharpCodeProvider()
    let options = CompilerParameters(GenerateInMemory=true)
    provider.CompileAssemblyFromSource(options, [|snippet|])

let snippet = """
module Snippet
let x = 1
"""
let results = compile snippet 
```

# entity-framework - 实体框架：指定一对一 PK 关联时删除实体

> ID：15313409
> 
> 赞同：2
> 
> 时间：2013-03-09T16:59:15.647
> 
> 标签：entity-framework

我有具有以下结构的现有数据库： ![在此处输入图像描述](../Images/2a6e58e45f98ba93ddfa8aa7e1db1ddb.png)

我正在使用 EF fluent API 来配置表之间的关系：

```
public GroupEntityConfiguration()
{
    HasMany(x => x.Employees).WithRequired().HasForeignKey(x => x.GroupId).WillCascadeOnDelete(true);
}

public EmployeeEntityConfiguration()
{            
    HasOptional(x => x.InnerGroupMember).WithRequired();
} 
```

应用此配置后，我可以添加新员工、新 InnerGroupMember 或获取数据。当我尝试删除员工时出现问题。然后我得到一个例外：

> 无法更改关系，因为一个或多个外键属性不可为空。当对关系进行更改时，相关的外键属性将设置为空值。如果外键不支持空值，则必须定义新关系，必须为外键属性分配另一个非空值，或者必须删除不相关的对象。

据我了解，上述异常与 GroupId 外键有关。尝试修复它我正在向 EmployeeEntityConfiguration 添加以下行：

```
HasKey(x => new { x.Id, x.GroupId}); 
```

但是在添加它之后，我得到了另一个我认为与 InnerGroupMember 对象相关的异常：

> 列名“Guest_Id”无效。列名“Guest_GroupId”无效。

如果我注释掉 InnerGroupMember 导航属性并删除它的配置，则可以删除 Employee。

您能否给我一个提示我做错了什么以及如何配置实体以能够执行所有需要的操作？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T13:50:16.563

我有一个现有的组实体，我想从员工组集合中删除员工：

```
var group = groupRepository.Find(groupId);
group.RemoveEmployee(employeeId);
_unitOfWork.Save(); 
```

Group 实体中的 RemoveEmployee 函数如下所示：

```
public void RemoveEmployee(int employeeId)
{
    var employee = Employees.Single(n => n.Id == employeeId);
    Employees.Remove(employee);
} 
```

这就是为什么我得到一个例外：

> 无法更改关系，因为一个或多个外键属性不可为空......

阅读[这篇文章后](https://stackoverflow.com/questions/11033348/is-it-possible-to-remove-child-from-collection-and-resolve-issues-on-savechanges)，我想修复它，`HasKey(x => new { x.Id, x.GroupId});`在 EmployeeEntityConfiguration 中添加导致第二个异常的函数：

> 列名“Guest_Id”无效。列名“Guest_GroupId”无效。

实际上我做了这一步（我的意思是添加 HasKey 函数）而不改变数据库结构。为了让它工作，在Employees表中我必须创建复合键——Id和GroupId的组合，这也是一个外键。此修改会强制更改 InnerGroupMembers 表。DB 结构现在如下所示： ![在此处输入图像描述](../Images/14e547ae5f5d292a4c881b1b9dece703.png)

现在我能够以我在开始时展示的方式删除 Employee 。

无论如何，我不会寻求这个解决方案。它们是实现我想要的不同方式。以下是一些链接：

*   [从相关集合中删除实体](http://weblogs.asp.net/zeeshanhirani/archive/2010/07/23/removing-entity-from-a-related-collection.aspx)
*   [从 EF 集合中删除时删除依赖实体](http://www.phdesign.com.au/programming/delete-dependent-entities-when-removed-from-ef-collection/)
*   [无法更改关系，因为一个或多个外键属性不可为空](https://stackoverflow.com/questions/5538974/the-relationship-could-not-be-changed-because-one-or-more-of-the-foreign-key-pro)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:43:08.857

对于一对一关系，默认情况下不启用级联删除，即使对于必需的关系也不启用（因为这是必需的一对多关系的情况，即：`WillCascadeOnDelete(true)`在您的一对多映射中是多余的） . 您必须始终明确地为一对一关系定义级联删除：

```
HasOptional(x => x.InnerGroupMember).WithRequired().WillCascadeOnDelete(true); 
```

当您`Employee`现在删除时，数据库也会删除相关`InnerGroupMember`的并且异常应该消失。

# objective-c - C fopen 无法打开绝对路径 OS X

> ID：15313410
> 
> 赞同：1
> 
> 时间：2013-03-09T16:59:22.723
> 
> 标签：objective-c, c, fopen

我正在尝试使用绝对路径打开文件。我的应用程序使用objective-c发送它想要打开的文件，并使用C打开它。我尝试使用它打开它

```
NSString *str = [[NSString alloc]init];
NSOpenPanel *o = [[NSOpenPanel alloc]init];
[o setAllowsMultipleSelection:NO];
[o setCanChooseDirectories:NO];
[o setCanChooseFiles:YES];
[o setPrompt:@"Open"];
if ([o runModal] == NSOKButton )
{
    // Get an array containing the full filenames of all
    // files and directories selected.
    NSArray* files = [o URLs];

    // Loop through all the files and process them.
    int i;
    for( i = 0; i < [files count]; i++ )
    {
        NSString* fileName = [[files objectAtIndex:i] absoluteString];
        NSLog(@"%@", fileName);

        str = [NSString stringWithFormat:@"%s", openFile([fileName UTF8String])];
        self.tv.string = str;
    }

} 
```

openfile 方法是这样的

```
char *openFile(const char file[1024]){
FILE *f = fopen(file, "r");
static char c[1000];
char *d;
if (f!=NULL) {
    if (fgets(c, 1000, f) !=NULL){
        d = c;
    }
    else{
        d = "No text";
    }
}
else{
    d="error";
    perror(f);
}
fclose(f);

return d;
} 
```

它发送一个绝对路径`file://localhost/Users/macuser/test.txt`，但`perror(f);` 返回`No such file or directory`。为什么当我知道文件存在时会发生这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:04:14.417

`file://localhost/Users/macuser/test.txt`是 URI，而不是文件路径。处理字符串以删除所有内容，包括在内`/localhost`，应该没问题。

请注意，这种解决方案只有在 URI 中没有转义序列时才有效。如下所述，从 Objective C 端发送路径可能更简单。

# javascript - 指令何时用模板替换元素？

> ID：15313411
> 
> 赞同：0
> 
> 时间：2013-03-09T16:59:28.300
> 
> 标签：javascript, angularjs, angularjs-directive

我正在尝试编写一个`AngularJS`指令，用我指定的 HTML 标记替换元素，然后附加一个按键处理程序，该处理程序调用指令控制器上的函数。不幸的是，这对我不起作用。首先，这是我正在使用的代码：

```
 .directive('amsNewEntry', function() {
        return {
            restrict: 'E',
            replace: true,
            scope: {
                url: '@navigateTo'
            },
            compile: function (tElement, tAttrs) {
                var text = tAttrs.text;
                var html = '<div>'
                         + '    <a href="#" data-ng-click="showInput">' + text + '</a>'
                         + '    <input data-ng-show="isInputFieldVisible" type="text" data-ng-model="inputValue" />'
                         + '</div>';
                tElement.replaceWith(html);
                return {
                    post: function (scope, element, attrs) {
                        console.log(element);
                        console.log(scope);
                        var input = $(element).find('input');
                        if (input.length > 0) {
                            console.log('attaching handler');
                            input.keypress(function (e) {
                                alert('keypress');
                                var code = e.which || e.keyCode;
                                if (code === 13) {
                                    alert('clicked enter');
                                    scope.navigate();
                                }
                            });
                        }
                    }
                }
            },
            controller: function ($scope, $location) {
                $scope.isInputFieldVisible = false;
                $scope.url = null;
                $scope.showInput = function () {
                    $scope.isInputFieldVisible = true;
                }
                $scope.inputValue = '';
                $scope.navigate = function () {
                    var target = $scope.url + '/' + $scope.inputValue;
                    console.log(target);
                    $location.path(target);
                }
            } 
```

问题是，在从函数返回的链接后`compile`函数中，当我控制台输出`element`变量时，它仍然没有被编译为我指定的 HTML。`tElement.replaceWith(html)`这条线不应该这样做吗？

最后一件事，`input`尽管我使用`ng-show`指令并将其绑定到`isInputFieldVisible`初始化为 false 的属性，但该字段在屏幕上呈现可见。任何想法为什么这不起作用？

# regex - Vim：删除由开始和结束包围的所有文本

> ID：15313412
> 
> 赞同：0
> 
> 时间：2013-03-09T16:59:34.953
> 
> 标签：regex, vim, text, plaintext

说我有这个：

```
 \item[1]\footnote{«footnote blah blah»}
footnote blah blah.
    \item[2]\footnote{«blah blah footnote»}
random text
    \item[3]\footnote{«this is not»}
more random text 
```

我想快速删除 \footnote{*}（包括 \footnote{«footnote blah blah»} \footnote{«blah blah footnote»} 和 \footnote{«this is not»}，但不包括 \item[x] 或下面的行。这是如何实现的？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:06:01.030

我认为最准确的方法是使用：

```
:%s/\\footnote{.\{-}}//g 
```

这将删除脚注和大括号之间的所有内容。使用`{.*}`将删除直到最后一个大括号的所有内容，即使它在脚注大括号之外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:02:47.737

在逃生模式

```
:1,$s/\\footnote{.*}//g 
```

# css - 将 div 堆叠成 2 行，没有空格

> ID：15313417
> 
> 赞同：1
> 
> 时间：2013-03-09T17:00:12.253
> 
> 标签：css, html

我真的需要你的帮助：

现在我的 div 只是在彼此之上，动态地填充了不同的内容，因此高度正在变化。

我现在要做的是将它们放在 2 行中。使用固定宽度和“float:left”，这已经可以了。

我的英语不是最好的，所以请先看看我的示例图片：

**![这就是它现在的样子！](../Images/1b7ae9250a022e8504b1fc97f067da9e.png)**

正如你所看到的，有这个空格是因为第三个 div 不是从第一个 div 的正下方开始的，因为 div 编号 2 可以比第一个 div 更高。

我现在想知道是否有可能将这些 div 自动定位得更高，这样就没有空格（它们总是应该从图片的正下方开始，而图片的上方是左边或右边）。

像这样：

**![它应该看起来像这样！](../Images/ddcb58a2d44304f8a982ad7eed6b0fbe.png)**

我希望你有点明白我的意思：D 提前感谢您的回复！

编辑：代码示例：

```
<div id="content">
<div class="xyz">BLABLA</div>
<div class="xyz">BLABLA<br>morebla!<br>EVEN MORE BLA</div>
<div class="xyz">BLABLA</div>
</div>
<style>
#content {
width: 648px;
}
.xyz {
width: 303px;
float: left;
border:1px solid black;
}
</style> 
```

记住，高度总是不同的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:11:04.300

jQuery [masonry](http://masonry.desandro.com/)让您的生活更轻松。不要重新发明轮子，尤其是当您面临经典的 css 问题时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:06:26.607

这会做到的......

```
 <div id="content">
    <div class="column1" id="left">
     <div id="div1">...</div>
     <div id="div3">...</div>
    </div>
    <div class="column2" id="left">
     <div id="div2">...</div>
     <div id="div4">...</div>
    </div>
   </div> 
```

然后通过在你的 CSS 中定义 widht 值来设置 column2 样式。

谢谢，

@leo。

# javascript - JavaScript 中的“断言”是什么？

> ID：15313418
> 
> 赞同：295
> 
> 时间：2013-03-09T17:00:16.697
> 
> 标签：javascript, assert

`assert`在 JavaScript中是什么意思？

我见过类似的东西：

```
assert(function1() && function2() && function3(), "some text"); 
```

并想知道该方法的`assert()`作用。

* * *

## 回答 #1

> 赞同：416
> 
> 时间：2013-03-09T17:01:39.130

JavaScript 本身没有标准`assert`。也许您正在使用一些提供的库；例如，如果您使用的是 Node.js，那么您可能正在使用[断言模块](https://nodejs.org/api/assert.html)。（提供实现[控制台 API](https://console.spec.whatwg.org/)的控制台的浏览器和其他环境提供[`console.assert`](https://console.spec.whatwg.org/#assert).）

函数的通常含义`assert`是如果传递给函数的表达式为假则抛出错误；这是[断言检查](http://en.wikipedia.org/wiki/Assertion_%28computing%29)的一般概念的一部分。通常断言（因为它们被称为）仅用于“测试”或“调试”构建并从生产代码中剥离。

假设您有一个应该**始终**接受字符串的函数。您想知道是否有人用不是字符串的东西调用了该函数（没有像 TypeScript 或 Flow 这样的类型检查层）。所以你可能会这样做：

```
assert(typeof argumentName === "string"); 
```

...`assert`如果条件为假，哪里会抛出错误。

一个非常简单的版本如下所示：

```
function assert(condition, message) {
    if (!condition) {
        throw message || "Assertion failed";
    }
} 
```

更好的是，利用`Error`对象，它具有收集堆栈跟踪等优点：

```
function assert(condition, message) {
    if (!condition) {
        throw new Error(message || "Assertion failed");
    }
} 
```

* * *

## 回答 #2

> 赞同：167
> 
> 时间：2013-06-11T21:28:01.070

如果使用现代浏览器或 nodejs，您可以使用`console.assert(expression, object)`.

了解更多信息：

*   [Chrome API 参考](https://developers.google.com/web/tools/chrome-devtools/debug/console/console-reference#assert)
*   [Firefox 网页控制台](https://developer.mozilla.org/en-US/docs/Web/API/console.assert)
*   [Firebug 控制台 API](http://getfirebug.com/wiki/index.php/Console_API#console.assert.28expression.5B.2C_object.2C_....5D.29)
*   [IE 控制台 API](https://msdn.microsoft.com/en-us/library/ie/hh772171.aspx)
*   [歌剧蜻蜓](http://www.opera.com/dragonfly/documentation/console/)
*   [Nodejs 控制台 API](http://nodejs.org/api/console.html#console_console_assert_value_message)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2013-06-28T17:12:28.717

其他答案很好：ECMAScript5 中没有内置断言函数（例如，基本上在任何地方都可以使用的 JavaScript），但是一些浏览器将它提供给您，或者具有提供该功能的附加组件。虽然最好为此使用完善/流行/维护的库，但出于学术目的，“穷人的断言”函数可能看起来像这样：

```
const assert = function(condition, message) {
    if (!condition)
        throw Error('Assert failed: ' + (message || ''));
};

assert(1 === 1); // Executes without problem
assert(false, 'Expected true');
// Yields 'Error: Assert failed: Expected true' in console 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-03-09T17:01:50.017

`assert()`不是原生 javascript 函数。这是某人制作的自定义功能。您必须在您的页面或文件中查找它并将其发布给任何人以帮助确定它在做什么。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-09T17:07:12.650

检查这个： http: [//net.tutsplus.com/tutorials/javascript-ajax/quick-tip-quick-and-easy-javascript-testing-with-assert/](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-quick-and-easy-javascript-testing-with-assert/)

它用于测试 JavaScript。令人惊讶的是，这段代码只有五六行代码，在测试时提供了强大的功能和对代码的控制。

assert 函数接受两个参数：

结果：一个布尔值，它引用您的测试是通过还是失败

描述：您的测试的简短描述。

然后 assert 函数简单地创建一个列表项，根据您的测试返回 true 或 false 应用“通过”或“失败”类，然后将描述附加到列表项。最后，将该代码块添加到页面中。这非常简单，但效果很好。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-01-06T20:50:10.723

如果断言为假，则显示消息。具体来说，如果第一个参数为 false，则第二个参数（字符串消息）将记录在开发人员工具控制台中。如果第一个参数为真，则基本上什么都不会发生。一个简单的例子——我正在使用谷歌开发者工具：

```
var isTrue = true;
var isFalse = false;
console.assert(isTrue, 'Equals true so will NOT log to the console.');
console.assert(isFalse, 'Equals false so WILL log to the console.'); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-03-09T17:05:45.030

它可能带有您的某些代码正在使用的测试库。这是一个示例（可能与您的代码使用的库不同，但它显示了总体思路）：

[http://chaijs.com/guide/styles/#assert](http://chaijs.com/guide/styles/#assert)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-09-28T08:55:50.907

单词或函数“assert”主要用于测试应用程序的部分。

断言函数是指示程序检查条件（也称为“断言”）的一种简短方法，如果条件不为真，它将抛出错误。

所以让我们看看它在“普通代码”中的样子

`if (typeof "string" === "array") { throw Error('Error: "string" !== "array"'); }`

你`assert`可以简单地写：

`assert(typeof "string" === "array")`

在 Javascript 中，没有本机`assert`函数，因此您必须使用某个库中的一个。

简单介绍可以查看这篇文章：

[http://fredkschott.com/post/2014/05/nodejs-testing-essentials/](http://fredkschott.com/post/2014/05/nodejs-testing-essentials/)

我希望它有所帮助。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2020-03-02T17:46:15.643

如果第一个属性为假，则断言抛出错误消息，第二个属性是要抛出的消息。

```
console.assert(condition,message); 
```

有很多评论说 JavaScript 中不存在断言，而是 JavaScript`console.assert()`中的断言函数 断言的想法是找出错误发生的原因/位置。

```
console.assert(document.getElementById("title"), "You have no element with ID 'title'");
console.assert(document.getElementById("image"), "You have no element with ID 'image'"); 
```

在这里，根据消息，您可以找到错误所在。这些错误消息将以红色显示到控制台，就好像我们调用了`console.error();`

您可以使用断言来测试您的功能，例如：

```
console.assert(myAddFunction(5,8)===(5+8),"Failed on 5 and 8"); 
```

请注意，条件可以是诸如此类的任何`!=` `<` `>`东西

这通常用于通过提供一些测试用例来测试新创建的函数是否按预期工作，而不是用于生产。

在控制台执行中查看更多功能`console.log(console);`

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-02-24T08:41:22.147

Java有一个`assert`声明，JVM默认禁用断言验证。必须使用命令行参数`-enableassertions`（或其简写`-ea`）显式启用它们，

虽然 JavaScript 支持`console.assert()`，但它只是一种日志记录方法，如果断言失败不会中断当前过程。

为了把东西放在一起并满足各种需求，这里有一个很小的 ​​js 断言库。

```
globalThis.assert = (()=> {
  class AssertionError extends Error {
    constructor(message) {
      super(message);
      this.name = 'AssertionError';
    }
  }
  let config = {
    async: true,
    silent: false
  };
  function assert(condition, message = undefined) {
    if (!condition) {
      if (config.silent) {
        //NOOP
      } else if (config.async) {
        console.assert(condition, message || 'assert');
      } else {
        throw new AssertionError(message || 'assertion failed');
      }
    }
  }
  assert.config = config;
  return assert;
})();

/* global assert */
Object.assign(assert.config, {
  // silent: true, // to disable assertion validation
  async: false, // to validate assertion synchronously (will interrupt if assertion failed, like Java's)
});

let items = [
  {id: 1},
  {id: 2},
  {id: 3}
];
function deleteItem(item) {
  let index = items.findIndex((e)=> e.id === item.id);
  assert(index > -1, `index should be >=0, the item(id=${item.id}) to be deleted doesn't exist, or was already deleted`);
  items.splice(index, 1);
}

console.log('begin');
deleteItem({id: 1});
deleteItem({id: 1});
console.log('end');
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-02-16T20:58:35.110

*可以在性能和兼容性方面改进以前的答案。*

检查**一次**对象是否`Error`存在，如果不声明它：

```
if (typeof Error === "undefined") {
    Error = function(message) {
        this.message = message;
    };
    Error.prototype.message = "";
} 
```

然后，每个断言都会检查条件，并且**总是**抛出一个`Error`对象

```
function assert(condition, message) {
    if (!condition) throw new Error(message || "Assertion failed");
} 
```

请记住，控制台不会显示真正的错误行号，而是`assert`函数的行，这对调试没有用处。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-04-08T14:41:29.517

如果你使用 webpack，你可以只使用[node.js 断言库](https://nodejs.org/api/assert.html)。尽管他们声称它“不打算成为一个通用的断言库”，但对于临时断言来说似乎还不错，而且在 Node 空间中似乎不存在任何竞争对手（Chai 是为单元测试而设计的）。

```
const assert = require('assert');
...
assert(jqXHR.status == 201, "create response should be 201"); 
```

您需要使用 webpack 或 browserify 才能使用它，因此显然这仅在您的工作流程中已经存在时才有用。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-05-02T19:02:15.863

除了[console.assert](https://stackoverflow.com/a/17054137/25507)或[自己滚动](https://stackoverflow.com/a/15313435/25507)等其他选项之外，您还可以使用[invariant](https://github.com/zertosh/invariant)。它有几个独特的功能：

*   它支持格式化的错误消息（使用`%s`说明符）。
*   在生产环境中（由 Node.js 或 Webpack 环境确定），错误消息是可选的，允许（稍微）较小的 .js。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-02-14T12:21:21.077

正如 TJ 所说，`assert`JavaScript 中没有。但是，有一个名为[assert](https://nodejs.org/api/assert.html#assert_assert)的节点模块，[主要用于测试](https://hackernoon.com/learn-assert-by-building-a-javascript-testing-library-370b34634182)。因此，您可能会看到如下代码：

```
const assert = require('assert');
assert(5 > 7); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-04-05T18:17:21.133

Node.js 实际上有一个可以导入的[断言函数。](http://%20https://nodejs.org/dist/latest-v14.x/docs/api/assert.html#assert_assert_value_message)

`const assert = require('assert')`

它的工作方式完全符合人们的预期，即`assert(false)`抛出一个错误，并`assert(false, message)`抛出一个带有消息的错误。

其他答案已经指出 JS 本身没有本机断言函数，并且在撰写本文时（2021 年 4 月）仍然如此。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-09T09:01:01.377

**assert()**是 JavaScript 中的断言函数。断言的主要思想是找出错误发生的原因/位置。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2022-03-02T08:46:10.820

Chrome devtools 支持`console.assert` 您可以打开 devtools 并在 devtools-source-navigator-Snippets 中创建一个片段。并编写一些代码......并运行代码片段......

# javascript - 正在验证 MVC 隐藏字段

> ID：15313420
> 
> 赞同：3
> 
> 时间：2013-03-09T17:00:18.983
> 
> 标签：javascript, c#, jquery, asp.net, asp.net-mvc

我的页面上有一些字段会根据您在页面上所做的下拉选择出现​​和消失。

所以，例如，我有

```
<section>
            @Html.LabelFor(model => model.AuctionTypeId)
            <div> @Html.DropDownList("AuctionTypeId", Model.AuctionTypes, @AuctionControllerResource.SelectAuctionType, new { id="auctionType", required = "required" })
                @Html.ValidationMessageFor(model => model.AuctionTypeId)       </div>
        </section>
        <section>
            @Html.LabelFor(model => model.AutomaticExtensionType, new { hidden = "true", id = "automaticExtensionTypeLabel" })
            <div> @Html.DropDownList("AutomaticExtensionType", Model.AutomaticExtensions, @AuctionControllerResource.SelectAutomaticExtensionType, new { hidden="hidden", required = "required", id = "automaticExtensionTypeList" }) 
                @Html.ValidationMessageFor(model => model.AutomaticExtensionType)       </div>
        </section> 
```

我为此拥有的 JQuery 代码是

```
$('#auctionType').change(function () {
    var selectedAuctionType = $("#auctionType").val();
    var englishAuctionType = $("#englishAuctionTypeId").val();
    if (selectedAuctionType == englishAuctionType) {
        $("#automaticExtensionTypeList").show();
        $("#automaticExtensionTypeLabel").show();
    } else {
        $("#automaticExtensionTypeList").hide();
        $("#automaticExtensionTypeLabel").hide();
    }
}); 
```

现在，显示和隐藏工作正常。问题是当我提交表单并且该字段`automaticExtensionTypeList`被隐藏时，表单不会提交，因为`automaticExtensionTypeList`它是必填字段。问题是如何告诉 MVC 只验证可见字段？

我浏览了我们在这个项目中编写的一些 JQuery，我们有这一行

```
$.validator.setDefaults({ ignore: [] }); 
```

显然，这可以实现隐藏验证。我的问题是，哪行代码相反？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T17:47:02.223

尝试这个：

```
$.validator.setDefaults({
    ignore: ':hidden, [readonly=readonly]'
}); 
```

或用于定制

```
$.validator.setDefaults({
    ignore: "#automaticExtensionTypeList" 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T17:22:42.353

这样做的原因是隐藏字段不是为在字段不适用时使用而设计的——它们是为在字段**适用**但不需要用户输入时使用而设计的。在您的情况下，您可以：

*   使用视图逻辑来避免渲染字段，除非它适用。
*   使用**[自定义验证器](http://msdn.microsoft.com/en-us/vs2010trainingcourse_aspnetmvccustomvalidation.aspx)**，而不仅仅是一个 flat-out `Required`。
*   在隐藏字段中使用有效的“默认”值。

就个人而言，我会选择最后一个，因为它实现起来最快并且没有任何明显的缺陷 - 您可以在控制器中选择此默认值，然后根据需要对其进行操作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-09T17:03:09.937

这是一个常见的问题。

隐藏不会停止验证。

我总是通过创建具有重叠属性的多个表单来处理这个问题。

**例子：**

```
<div id="HasControlls">
@Using(Html.BeginForm)
{
            @Html.LabelFor(model => model.AuctionTypeId)
            @Html.DropDownList("AuctionTypeId", Model.AuctionTypes, @AuctionControllerResource.SelectAuctionType, new { id="auctionType", required = "required" })
                @Html.ValidationMessageFor(model => model.AuctionTypeId)       </div>
        </section>
        <section>
            @Html.LabelFor(model => model.AutomaticExtensionType, new { hidden = "true", id = "automaticExtensionTypeLabel" })
            <div> @Html.DropDownList("AutomaticExtensionType", Model.AutomaticExtensions, @AuctionControllerResource.SelectAutomaticExtensionType, new { hidden="hidden", required = "required", id = "automaticExtensionTypeList" }) 
                @Html.ValidationMessageFor(model => model.AutomaticExtensionType)       </div>
}

<div id="HasNotControlls">
@Using(Html.BeginForm)
{
            @Html.LabelFor(model => model.AuctionTypeId)
            @Html.DropDownList("AuctionTypeId", Model.AuctionTypes, @AuctionControllerResource.SelectAuctionType, new { id="auctionType", required = "required" })
                @Html.ValidationMessageFor(model => model.AuctionTypeId)       </div>
        </section>
        <section>
                @Html.ValidationMessageFor(model => model.AutomaticExtensionType)       </div>
        </section>
} 
```

# php - 将表单的值发送到电子邮件

> ID：15313423
> 
> 赞同：0
> 
> 时间：2013-03-09T17:00:39.613
> 
> 标签：php, html

您好，我正在解决我的表单发送到电子邮件的问题。我创建了一个表单来向我的电子邮件发送值，当按下发送按钮时，它告诉我消息已发送，但我在雅虎或 gmail 电子邮件中看不到，我什么也没收到......

这是我的 php 代码表单：

```
<?php 
$ToEmail = 'mr_sergios@yahoo.com'; 
$EmailSubject = 'Site contact form'; 
 $mailheader = "From: ".$_POST["email"]."\r\n"; 
 $mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
 $mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
$MESSAGE_BODY = "Name: ".$_POST["name"].""; 
$MESSAGE_BODY .= "Email: ".$_POST["email"].""; 
$MESSAGE_BODY .= "Comment: ".nl2br($_POST["comment"]).""; 
  mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?>

<?php 
if ($_POST["email"]<>'') { 
$ToEmail = 'mr_sergios@yahoo.com'; 
$EmailSubject = 'Site contact form'; 
$mailheader = "From: ".$_POST["email"]."\r\n"; 
$mailheader .= "Reply-To: ".$_POST["email"]."\r\n"; 
$mailheader .= "Content-type: text/html; charset=iso-8859-1\r\n"; 
$MESSAGE_BODY = "Name: ".$_POST["name"].""; 
$MESSAGE_BODY .= "Email: ".$_POST["email"].""; 
$MESSAGE_BODY .= "Comment: ".nl2br($_POST["comment"]).""; 
mail($ToEmail, $EmailSubject, $MESSAGE_BODY, $mailheader) or die ("Failure"); 
?> 
   Your message was sent
      <?php 
   } else { 
  ?> 
    <form action="test.php" method="post">
   <table width="400" border="0" cellspacing="2" cellpadding="0">
  <tr>
     <td width="29%" class="bodytext">Your name:</td>
  <td width="71%"><input name="name" type="text" id="name" size="32"></td>
    </tr>
    <tr>
     <td class="bodytext">Email address:</td>
    <td><input name="email" type="text" id="email" size="32"></td>
     </tr>
      <tr>
   <td class="bodytext">Comment:</td>
        <td><textarea name="comment" cols="45" rows="6" id="comment"  
  class="bodytext">      
   </textarea></td>
  </tr>
  <tr>
   <td class="bodytext"> </td>
    <td align="left" valign="top"><input type="submit" name="Submit" value="Send"></td>
    </tr>
       </table>
   </form> 
 <?php 
  }; 
  ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:05:28.387

你是从 Linux 发送的吗？如果是，请检查`/var/log/mail.err`SMTP 是否抛出任何错误。

对于 Windows，可能需要安装 SMTP 服务器，例如 Mercury SMTP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:04:11.100

您可能没有在`php.ini`. 我建议使用其他东西`mail()`，因为它更有可能是可靠的。试试这样的[东西](https://stackoverflow.com/a/1361786/962144)。

要么，要么它只是落在您的垃圾邮件文件夹中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:10:34.830

您是否考虑过使用[PHP Mailer 类？](https://code.google.com/a/apache-extras.org/p/phpmailer/)

下面的示例是在同一页面上提交给自身的表单，只需将以下内容粘贴到您的联系页面的最顶部。下载并包含您的课程。

```
require_once('class.phpmailer.php');
$address = "you@youremail.com";
$name = htmlspecialchars($_POST['name']);
$email = htmlspecialchars($_POST['email']);
$subject = htmlspecialchars($_POST['subject']);
$comment = htmlspecialchars($_POST['comment']);

$mail  = new PHPMailer(); // defaults to using php "mail()"
$body = $comment;
$mail->AddReplyTo($email,$name);
$mail->SetFrom($email,$name);
$mail->AddReplyTo($email,$name);
$mail->AddAddress($address, "Your Name");
$mail->Subject = $subject;
$mail->MsgHTML($body);
if(isset($_POST['submit']))
{
$mail->Send();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T17:10:42.677

考虑使用这个库：[http ://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

它非常易于设置和使用，还会在出现错误时为您提供详细信息。

# sql-server - 使用 XSD 的 TSQL XML 修改错误

> ID：15313426
> 
> 赞同：1
> 
> 时间：2013-03-09T17:01:00.077
> 
> 标签：sql-server, xml, tsql, xsd

再会，

以下测试有效：

```
 DECLARE @XmlTest TABLE
    ( ID int,
      MyContent Xml
    )

    declare @aaa XML

    set @aaa = '<Root><MyNode Qualifier="0" Code="AAA" Deleted="true">9.99</MyNode><MyNode Qualifier="0" Code="AAA"         Deleted="false">10.99</MyNode></Root>'
    insert into @XmlTest (ID, MyContent)
    values(1,@aaa)
    set @aaa = '<Root><MyNode Qualifier="0" Code="BBB" Deleted="false">9.99</MyNode></Root>'
    insert into @XmlTest (ID, MyContent)
    values(2,@aaa)

    select * from @XmlTest 
```

-- 节点选择 [@Code="AAA" and @Deleted="false"] 是唯一的，所以我希望能够在逻辑上“删除它”

```
 UPDATE @XmlTest
    SET MyContent.modify('replace value of (/Root/MyNode[@Code="AAA" and @Deleted="false"]/@Deleted)[1] with true()')
    WHERE ID = 1

    select * from @XmlTest 
```

但是对于 XSD，它不起作用。我有一条错误消息，例如

消息 2234、Niveau 16、État 1、Ligne 19 XQuery [@XmlTest.MyContent.modify()]：运算符“=”不能应用于“”和“xs:string”

这是我的表的架构和新声明

```
 DECLARE @XmlTest TABLE
    ( ID int,
      MyContent Xml(CONTENT TestSchema)
    )

    DROP XML SCHEMA COLLECTION TestSchema

    create xml schema collection TestSchema as
    '<?xml version="1.0" encoding="UTF-8" ?>
    <xs:schema
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:sql="urn:schemas-microsoft-com:mapping-schema">
    <xs:simpleType name="AmountType">
        <xs:restriction base="xs:decimal">
            <xs:minInclusive value="0"/>
            <xs:maxInclusive value="9999999999"/>
            <xs:fractionDigits value="2"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:element name="Root" sql:is-constant="1">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="MyNode" maxOccurs="unbounded" minOccurs="1" sql:is-constant="1">
                    <xs:complexType>
                        <xs:simpleContent>
                            <xs:extension base="AmountType">
                                <xs:attribute name="Qualifier" use="required">
                                    <xs:simpleType>
                                       <xs:restriction base="xs:integer">
                                           <xs:minInclusive value="0"/>
                                       </xs:restriction>
                                    </xs:simpleType>
                                </xs:attribute>
                                <xs:attribute name="Code" use="required">
                                    <xs:simpleType>
                                        <xs:restriction base="xs:string">
                                            <xs:maxLength value="15"/>
                                        </xs:restriction>
                                    </xs:simpleType>
                                </xs:attribute>
                                <xs:attribute name="Deleted" use="required">
                                    <xs:simpleType>
                                        <xs:restriction base="xs:boolean">
                                           <xs:pattern value="true"/>
                                           <xs:pattern value="false"/>
                                        </xs:restriction>
                                    </xs:simpleType>
                                </xs:attribute>
                            </xs:extension>
                        </xs:simpleContent>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
    </xs:schema>' 
```

我尝试了这种修改，但如果以同样的方式失败：

```
 <xs:attribute type="xs:boolean" name="Deleted" use="required" /> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T22:05:54.407

将已删除的定义更改为

```
<xs:attribute type="xs:boolean" name="Deleted" use="required" /> 
```

我不知道你为什么要以另一种方式来做。

查询仍然不起作用的原因是因为您将布尔值`@Deleted`与字符串进行比较`"false"`。改为使用`false()`。

```
replace value of (/Root/MyNode[@Code="AAA" and @Deleted=false()]/@Deleted)[1] 
with true() 
```

# java - 使用“this”初始化的成员

> ID：15313429
> 
> 赞同：0
> 
> 时间：2013-03-09T17:01:12.517
> 
> 标签：java

这是我的问题

```
class A{
  private B b = new B(this); // line 2

  A(){}
} 
```

这只是前任。代码和工作正常。但我怀疑`this`是否用于当前参考（A 的实例）。类初始化发生在获取类实例之前。那么我们怎样才能放入`this`第 2 行。我问实例化是否在初始化之前发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:28:19.810

你提出了一个有趣的观点。这是一个人为的教学示例，演示了使用您的示例时可能发生的运行时问题。

```
class A {
    private boolean isInitialized = false;
    private final B b             = new B(this);
    public A() {
        initialize();
    }
    private void initialize() {
        isInitialized = true;
    }
    public boolean isInitialize() {
        return isInitialized;
    }
    public B getB() {
        return b;
    }
}

class B {
    private boolean isInitialized = false;
    final private A a;
    public B(final A a) {
        this.a = a;
        initialize();
        System.out.println("inB:          a.isInitialize()=" + a.isInitialize());
    }
    private void initialize() {
        isInitialized = true;
    }
    public boolean isInitialize() {
        return isInitialized;
    }
}

public static void main(final String[] args) {
    final A a = new A();
    System.out.println("inMain:       a.isInitialize()=" + a.isInitialize());
    System.out.println("inMain:a.getB().isInitialize()=" + a.getB().isInitialize());
} 
```

输出：

```
inB:          a.isInitialize()=false
inMain:       a.isInitialize()=true
inMain:a.getB().isInitialize()=true 
```

在类 B 中使用传递的对类 A 的引用存在使用未完全初始化的对象的真正风险。

当心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:08:26.767

这不是类初始化（尝试`new ClassA()`一步步调试），实际上是实例初始化。

如果构造函数 (from `ClassB`) 调用一些函数 from ，可能会出现一些问题，这些函数访问其中的一些未初始化的`ClassA`字段。`ClassA`

**编辑**：这是在调用构造函数之前完成的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:04:38.550

`this`当您创建类 A 的对象时，将显示它的存在。实例变量在对象创建后分配，静态变量在类加载时以及在创建任何对象之前初始化。您不能在静态块中使用上述初始化

```
static {
    private B b = new B(this); // compiler error. you cannot use 'this' in static context.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T17:04:59.457

`this`正确使用。构造函数根本不需要调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T17:05:08.353

不需要改变，一切都很好。`this`是对 A 的有效引用。

# bash - Bash：将转义插入包含空格的变量

> ID：15313434
> 
> 赞同：2
> 
> 时间：2013-03-09T17:01:23.307
> 
> 标签：bash, escaping, spaces

尝试在 bash 中使用 scp 将远程文件复制到我的本地系统，
我已经获得了我想要的文件名并分配给变量，`$lastModifiedFile`但
问题是它在文件名中包含空格。
要将此变量与 scp 一起使用，需要使用反斜杠对空格进行转义。
有没有一种简单的方法来格式化这个变量并在必要的地方插入正确的转义字符，即在空格上？

```
#!/bin/bash

lastModifiedFile=$(sshpass -p 'passw0rd' ssh user@server 'ls -tr /path/output*| tail -n 1')
echo "$lastModifiedFile"

sshpass -p 'passw0rd' scp user@server:"$lastModifiedFile" /root/ 
```

这是脚本输出..

```
[user@host ~]# ./script.sh 
/path/outputSat Mar 09 151905 GMT 2013.html
scp: /path/outputSat: No such file or directory
scp: Mar: No such file or directory
scp: 09: No such file or directory
scp: 151905: No such file or directory
scp: GMT: No such file or directory
scp: 2013.html: No such file or directory 
```

我正在寻找类似下面的东西，甚至是更简单的解决方案？..

```
escapedFilename=""

for letter in $lastModifiedFile
    if $letter == " "
        $escapedFilename += "\ "
    else
        $escapedFilename += $letter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T02:33:14.647

在传递给远程系统的文件名周围使用单引号，这样它就不会被分词。

```
lastModifiedFile=$(sshpass -p 'passw0rd' ssh user@server 'ls -tr /path/output*| tail -n 1')
echo "$lastModifiedFile"

sshpass -p 'passw0rd' scp user@server:"'$lastModifiedFile'" /root/ 
```

或者

```
sshpass -p 'passw0rd' scp "user@server:'$lastModifiedFile'" /root/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:12:37.457

有点倾斜牙签综合症：

`param=user@server:${lastModifiedFile// /\\ /}`

`sshpass -p 'passw0rd' scp "$param" /root/`

**编辑：**它似乎`scp`不喜欢我。我需要在测试中增加一个额外的变量级别...... :)

**编辑2：**根据OP的反馈，*确切的*解决方案似乎包括使用`${lastModifiedFile// /\\ \\}` 我只是希望除了空格之外没有其他字符需要在其他文件名中转义:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T01:28:24.647

这里有几个方法可以处理文件名中的几乎所有内容（不仅仅是空格）。首先，bash 的`printf`内置有一种`%q`格式，可以在字符串中添加引号/转义/任何内容：

```
sshpass -p 'passw0rd' scp user@server:"$(printf %q "$lastModifiedFile")" /root/ 
```

但是请注意，这引用/转义/等它*适合 bash 解释*。如果远程计算机的默认外壳是别的东西，这可能不适用于所有情况。

选项二原则上更简单（但在实践中有点混乱），并且应该与更远程的 shell 兼容。在这里，我将文件名括在单引号中，这应该适用于文件名中的单引号以外的任何内容。对于那些，我替换`'\''`（结束单引号字符串，添加转义单引号，然后重新启动单引号字符串）：

```
repl="'\''" # Have to store this in a variable to work around a bash parsing oddity
sshpass -p 'passw0rd' scp user@server:"'${lastModifiedFile//\'/$repl}'" /root/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T17:05:25.150

这样做：

```
sshpass -p 'passw0rd' scp 'user@server:$lastModifiedFile' /root/ 
```

# android - 如何使用超级用户编译 AOSP

> ID：15313439
> 
> 赞同：1
> 
> 时间：2013-03-09T17:01:56.053
> 
> 标签：android, android-emulator, android-source

我想弄清楚如何用超级用户编译 AOSP。我被指出了这个问题： [Build Android with Superuser](https://stackoverflow.com/questions/5597139/build-android-with-superuser/12624051#12624051)。说明似乎有点不清楚，我也不明白到底发生了什么。它似乎也谈到了允许 su 对 android 应用程序的特权。我不是想在应用程序上得到这个。在主 android 源代码中运行一些代码时，我试图获得 root 访问权限（特别是试图在 DisplayDevice.cpp 中打开一个套接字）。

我在这里问了一个类似的问题（[在 android 代码中创建一个套接字（不是在 android 应用程序中）得到 Permission Denied](https://stackoverflow.com/questions/15302363/create-a-socket-in-android-codenot-in-android-application-getting-permission-d)）。我想既然我走上了正确的轨道，现在知道我需要以超级用户身份编译代码，我应该再问一个问题。

我已按照第一个 SO 问题的说明将子二进制代码添加到我的 AOSP 代码中。我也更改了我的 init.rc，但我的印象是我需要做一些事情来完成这些更改。这在问题中没有谈到。现在，当我运行 make su-binary 时，我得到“make: Nothing to be done for `su-binary'。”。我认为这里出了点问题。我正在使用 m-ric 指定的 makefile。我也不确定是否需要 Superuser.apk，因为我没有使用 Android 应用程序中的代码。

如果有人能为我指出正确的方向，我将不胜感激。如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:54:28.783

实际上，我可以解释如何使用超级用户构建 Android，但我认为您不是为了您的任务而这样做的。问题是运行代码的进程`DisplayDevice.cpp`不属于inet组（通常gid = 3003）。

我不熟悉 Android 的显示系统，但如果您只想进行实验，我建议您执行以下步骤。

1.  您需要找出运行代码的进程 ID。
2.  分配给inet组的这个进程gid。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T21:23:06.013

> 现在，当我运行 make su-binary 时，我得到“make: Nothing to be done for `su-binary'”。

可以在此处找到如何更改 su.c 的示例：[https ://code.google.com/p/aosp4nexus5/wiki/AOSPforNexus5#Debugging_a_C_file](https://code.google.com/p/aosp4nexus5/wiki/AOSPforNexus5#Debugging_a_C_file)

实际上只添加了日志，但它与更改 setgid() 和 setuid() 调用相同。:-)

# vb.net - 使用从 Visual Basic .net 转换的 imagemagick

> ID：15313443
> 
> 赞同：0
> 
> 时间：2013-03-09T17:02:19.050
> 
> 标签：vb.net, imagemagick

在 VB.NET 中应该如何正确运行 imagemagick 转换函数？

我试过明确命名每个参数

```
 Public Magick As ImageMagickObject.MagickImage

    Dim s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11 As String

    If IsDBNull(FromImage) Then s1 = "" Else s1 = CStr(FromImage)
    If IsDBNull(Rotate1) Then s2 = "" Else s2 = CStr(FromImage)
    If IsDBNull(Rotate2) Then s3 = "" Else s3 = CStr(FromImage)
    If IsDBNull(Resize1) Then s4 = "" Else s4 = CStr(FromImage)
    If IsDBNull(Resize2) Then s5 = "" Else s5 = CStr(FromImage)
    If IsDBNull(Extra_Imagemagick_settings) Then s6 = "" Else s6 = CStr(FromImage)
    If IsDBNull(Alpha1) Then s7 = "" Else s7 = CStr(FromImage)
    If IsDBNull(Alpha2) Then s8 = "" Else s8 = CStr(FromImage)
    If IsDBNull(Alpha3) Then s9 = "" Else s9 = CStr(FromImage)
    If IsDBNull(Alpha4) Then s10 = "" Else s10 = CStr(FromImage)
    If IsDBNull(ToImage) Then s11 = "" Else s11 = CStr(FromImage)
    Dim params As String() = {s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11}
    Magick.Convert(params) 
```

我尝试创建一个数组：

```
 Dim params As object() = {FromImage, Rotate1, Rotate2, Resize1, Resize2, Extra_Imagemagick_settings, Alpha1, Alpha2, Alpha3, Alpha4, ToImage}

    params = New Object()
    ReDim params(20)
    params(0) = CStr(FromImage)
    params(1) = Rotate1
    params(2) = Rotate2
    params(3) = Resize1
    params(4) = Resize2
    params(5) = Extra_Imagemagick_settings
    params(6) = Alpha1
    params(7) = Alpha2
    params(8) = Alpha3
    params(9) = Alpha4
    params(10) = ToImage
    Magick.Convert(params) 
```

我试图用参数提供“convert()”目录：

```
 Magick.Convert(FromImage, Rotate1, Rotate2, Resize1, Resize2, Extra_Imagemagick_settings, Alpha1, Alpha2, Alpha3, Alpha4, ToImage) 
```

每次我有不同的例外时，通常：

```
Object reference not set to an instance of an object. 
```

或者

```
Use the New keyword to create the instance. 
```

（这可能是因为我是 DOT NET 的新手）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T02:01:31.247

主要问题是 32/64 位。

我没有设法让它在 100% 64 位下工作（但我也没有太努力）。

1.  创建一个项目。
2.  如果您使用的是“vb express”版本，则必须手动编辑 *.vbproj 文件并在每个提到 CPU 的部分之后添加这一行 x86（inernet 中有大量关于它的帖子）。
3.  此示例取自[http://www.imagemagick.org/discourse-server/viewtopic.php?f=8&t=13295](http://www.imagemagick.org/discourse-server/viewtopic.php?f=8&t=13295) ，它是第一个为我工作的示例（我简化了它）。

    ```
    Dim img As ImageMagickObject.MagickImage
    img = New ImageMagickObject.MagickImage
    MSGS = img.Convert("C:\a.bmp", "-resize", "x128", "C:\a.jpg")
    img = Nothing 
    ```

# objective-c - 尝试从对象 [0] 插入 nil 对象时出现异常崩溃

> ID：15313444
> 
> 赞同：1
> 
> 时间：2013-03-09T17:02:26.760
> 
> 标签：objective-c, cocoa-touch, crash, nsdictionary

我正在使用 NSDictionary 更改 appDelegate 文件中 UIBarButtonItem 的外观：

```
UIBarButtonItem *barButtonItemProxy = [UIBarButtonItem appearanceWhenContainedIn:
                                       [UINavigationBar class], [UINavigationController class], nil];

NSDictionary *textAttributes = @{UITextAttributeFont :
                                     [UIFont fontWithName:@"ChocoBold" size:13.0f],
                                 UITextAttributeTextColor : [UIColor whiteColor],
                                 UITextAttributeTextShadowColor : [UIColor blackColor],
                                 UITextAttributeTextShadowOffset : [NSValue valueWithUIOffset:UIOffsetMake(0.0f, -1.0f)]
                                 };
[barButtonItemProxy setTitleTextAttributes:textAttributes forState:UIControlStateNormal]; 
```

该应用程序在模拟器中运行良好，但是当我在设备上运行它时，应用程序崩溃并出现以下异常：

```
 [__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0] 
```

崩溃发生在`NSDictionary *textAttributes`队列中。

我不明白该字典中哪个参数为零？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:43:29.803

```
NSLog(@"font family %@",[UIFont fontNamesForFamilyName:@"Choco"]); 
```

如果您的应用程序中存在 choco 字体系列，它将记录所有可用的字体名称。然后复制确切的字体名称。可能是您使用的字体名称错误，例如它的 Choco-Bold 而不是 chocobold 等。

```
NSMutableDictionary *textAttributes = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       [UIColor whiteColor],UITextAttributeTextColor,
                                       [UIColor blackColor],UITextAttributeTextShadowColor,
                                       [NSValue valueWithUIOffset:UIOffsetMake(0.0f, -1.0f)],UITextAttributeTextShadowOffset,
                                       [UIFont fontWithName:@"Helvetica" size:13.0f],UITextAttributeFont,nil]; 
```

如果可以尝试使用“Helvetica”字体，那么问题出在您的字体上。

# jquery - toObservable 的替代方案是什么？

> ID：15313458
> 
> 赞同：1
> 
> 时间：2013-03-09T17:03:49.313
> 
> 标签：jquery, rxjs

我正在尝试使用 RxJS，但我得到的例子有点老了。我需要运行的代码是这样的：

```
myInput.toObservable("keyup")
        .Throttle(200)
        .Subscribe(function () { 
```

但`toObservable`已被删除。我的研究没有帮助。我什至发现这篇文章要求`toObservable`退货，但没有解释替代方案。

[https://github.com/Reactive-Extensions/rxjs-jquery/issues/4](https://github.com/Reactive-Extensions/rxjs-jquery/issues/4)

有谁知道替代品是`toObservable`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:18:54.990

[这里](https://github.com/Reactive-Extensions/rxjs-jquery)有一个使用 rxjs 的 jQuery 扩展的非常完整的示例，它完成了与您想要的非常相似的事情：

```
var throttledInput = myInput
    .keyupAsObservable()
    .select( function (ev) {
        return $(ev.target).val();
    })
    .throttle(200)
    .distinctUntilChanged(); 
```

您应该能够`subscribe`得到结果并执行您想要的任何操作。

# autocomplete - Prolog：在键盘上左右移动文本

> ID：15313463
> 
> 赞同：2
> 
> 时间：2013-03-09T17:04:06.417
> 
> 标签：让我们在qwerty, autocomplete, keyboard, prolog, levenshtein-distance

我想编写一个 Prolog 谓词，它接受一个单词并在键盘上向左或向右*移动它......*

...，但是 - 到目前为止 - 我不*知道*从哪里开始。

* * *

**例子。**[让我们在qwerty](/questions/tagged/qwerty "显示标记为“qwerty”的问题")键盘上将“loogika”这个词移到左边！

请注意，如果我们的[键盘布局](https://en.wikipedia.org/wiki/Keyboard_layout)是[qwerty](https://en.wikipedia.org/wiki/QWERTY) ，我们会在 left-shifting 时碰到*边缘*`a`。我们*可以*用不同的方式来处理这个问题，但似乎*每个*“解决方案”都有自己的优点*和*缺点。

那么我们该怎么办？`a` *不是*让左移，而是留下。IMO，*不要*切换那个讨厌**的**东西值得失去代数属性，在以保留 2D 物理距离的方式处理其他边缘/角落情况时很难维持这些属性...... YMMV！`Caps [**Lock**](https://en.wikipedia.org/wiki/Lock_key)``a`*`Caps-Lock`*

 ***示例 Prolog 查询：

```
?-tipi([ l, o, o, g, i, k, a],
        [ k, i, i, f, u, j, a])。
真的。

```

当我们在 qwerty 键盘上写“loogika”/“kiifuja”时按下了哪些键？看看，看看！

[![左移前后，动画](../Images/14b354ab1f98390a2d57d925497f8d93.png)](https://i.stack.imgur.com/GL7Ic.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-01T22:07:32.317

对于原始问题：

```
:-use_module(library(clpfd)).

table([[1,2,3,4,5,6,7,8,9,0],[q,w,e,r,t,y,u,i,o,p], [a,s,d,f,g,h,j,k,l,;],[z,x,c,v,b,n,m,',','.','/']]).

shift_left(Char,New_Char):-
  table(Table),
  member(R,Table),
  nth1(I,R,Char),
  shift_l(I,NI),
  nth1(NI,R,New_Char).

shift_right(Char,New_Char):-
  table(Table),
  member(R,Table),
  nth1(I,R,Char),
  shift_r(I,NI),
  nth1(NI,R,New_Char).

shift_seq(left,Seq,NewSeq):-
  maplist(shift_left,Seq,NewSeq).
shift_seq(right,Seq,NewSeq):-
  maplist(shift_right,Seq,NewSeq).

shift_l(1,1).
shift_l(X,Y):-
  X>1,
  X#=Y+1.

shift_r(10,10).
shift_r(X,Y):-
  X<10,
  X#=Y-1. 
```

询问：

```
?- shift_seq(left,[l,o,o,g,i,k,a],N).
N = [k, i, i, f, u, j, a] . 
```

我认为问题中的 g 是错字；）

对于赏金，您可以使用此表中的曼哈顿距离。然后将该距离与 Levenshtein 距离的权重相结合。我想出了以下改编。我不确定它是否是“真实距离函数”。

```
:-use_module(library(clpfd)).
:-use_module(library(aggregate)).

table([['1','2','3','4','5','6','7','8','9','0'],[q,w,e,r,t,y,u,i,o,p], [a,s,d,f,g,h,j,k,l,;],[z,x,c,v,b,n,m,',','.','/']]).

vert_distance(A,B,Table,Distance):-
  length(Table,L),
  Distance in 0..L,
  member(Row1,Table),
  member(Row2,Table),
  member(A,Row1),
  member(B,Row2),
  nth0(N1,Table,Row1),
  nth0(N2,Table,Row2),
  Distance #= abs(N1-N2).

hoz_distance(A,B,Table,Distance):-
  member(Row1,Table),
  member(Row2,Table),
  length(Row1,L),
  Distance in 0..L,
  nth0(N1,Row1,A),
  nth0(N2,Row2,B),
  Distance #= abs(N1-N2).

manhatten(A,B,Table,D):-
  vert_distance(A,B,Table,V),
  hoz_distance(A,B,Table,H),
  D#=V+H.

manhatten_string([],[],_,0).
manhatten_string(String1,String2,Table,D):-
  length(String1,L),
  length(String2,L),
  manhatten_string_(String1,String2,Table,D1),
  D is D1/L.
manhatten_string(S1,S2,Table,D):-
  length(S1,L1),
  length(S2,L2),
  D#=abs(L1-L2).

manhatten_string_([],[],_,0).
manhatten_string_(String1,String2,Table,D1):-
  String1 =[H1|T1],
  String2 =[H2|T2],
  manhatten(H1,H2,Table,DL),
  manhatten_string(T1,T2,Table,D0),
  D1 is D0+(DL/14).

lev(String1,String2,D):-
  length(String1,L1),
  length(String2,L2),
  0 is min(L1,L2),
  D is max(L1,L2).
lev(String1,String2,D):-
  String1 =[H1|T1],
  String2 =[H2|T2],
  lev(T1,String2,D1),
  lev(String1,T2,D2),
  lev(T1,T2,D3),
  D1plus1 is D1+1,
  D2plus1 is D2+1,
  indicator([H1],[H2],DM),
  D3plus is D3+DM,
  aggregate_all(min(X),member(X,[D1plus1,D2plus1,D3plus]),D).

indicator(Ai,Bj,0):-
  Ai=Bj.
indicator(Ai,Bj,D):-
  Ai\=Bj,
  table(Table),
  manhatten_string(Ai,Bj,Table,D). 
```

查询：

```
?- lev([a,a],[b,a],D).
D = 0.35714285714285715 .

?- lev([a,a],[a,b],D).
D = 0.35714285714285715 .

?- lev([a,a],[a,b,c,d],D).
D = 2.142857142857143 .

?- lev([a],[],D).
D = 1 .

?- lev([a],[s],D).
D = 0.07142857142857142 .

?- lev([a],[o],D).
D = 0.6428571428571429 .

?- lev([a,b],[a,b],D).
D = 0 .

?- lev([a,b,c],[a,b],D).
D = 1 .

?- lev([a,b,c],[a,b,p],D).
D = 0.6428571428571429 . 
```

还有图书馆（isub）[http://www.swi-prolog.org/pldoc/doc_for?object=section(0,%270%27,swi(%27/doc/packages/nlp.html%27))](http://www.swi-prolog.org/pldoc/doc_for?object=section(0,%270%27,swi(%27/doc/packages/nlp.html%27))) . 这看起来适合其中的一部分。***

# facebook - 跟上Facebook页面[桶测试[

> ID：15313468
> 
> 赞同：1
> 
> 时间：2013-03-09T17:04:18.067
> 
> 标签：facebook, facebook-graph-api

**语境：**

Facebook 的一项新功能会提示您为您分享或喜欢的特定内容的创建者（所有者）页面点赞。

我在 2 个不同的场合遇到过这个功能：

A - 当从 [slate. com] 我被提示喜欢 [slate .com 的 Facebook 页面] - 截图在这里：

![http://i.stack.imgur.com/SydwT.png](../Images/742be360870c00ddfbed737dd68d978f.png)

B - 分享 youtube 音乐视频时，系统提示我喜欢该音乐视频中的乐队页面（即使拥有该内容的 youtube 频道是发行多个音乐乐队的唱片公司的频道）

**我的问题：** 为了让 Facebook 识别您的网站和您的 Facebook 页面之间的链接，您需要在页面/网站上进行什么设置？

我已将我的 admin_id 和页面的 app_id 添加到我的网站上：

```
<meta property="fb:admins" content="1040395049" />
<meta property="fb:app_id" content="151466116651" /> 
```

这有点难以测试，因为这个被桶测试的功能会间歇性地出现，如果你有任何想法我可能会测试我已经准备好利用这个非常有用的功能。

# java - Java 键盘键码列表

> ID：15313469
> 
> 赞同：8
> 
> 时间：2013-03-09T17:04:29.203
> 
> 标签：java, applet, keylistener, keyevent

任何人都可以为我提供键盘上用于java中KeyEvent类的各个键的键代码整数列表吗？

我想创建一个所有键盘键的下拉列表供用户选择。我需要特定于键盘的列表。VK 常量在这种情况下没有帮助，因为我需要键盘上使用的键的“列表”。 [这篇文章在这里](https://stackoverflow.com/questions/1627925/where-can-i-find-a-list-of-keyboard-keycodes)没有用，因为它是针对 Javascript 的，并且与[javadoc](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.event.KeyEvent.VK_M)相比，所有键的代码都不相同。[此外， javadoc](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.event.KeyEvent.VK_M)中使用的 KeyCode 值都是按字母顺序排列的，因此很难在那里找到键盘键。我尝试用谷歌搜索资源，但没有什么有趣的只是 Javascript 的。我应该自己一个一个地编译它们还是有更简单的方法？

编辑：我知道VK。我需要使用 KeyEvent.getKeyText 函数将每个键盘键存储在下拉菜单中。所以我需要这份清单。这就是为什么我问我是否需要自己编译它们。我应该早点提到这一点。对每个键都这样做是浪费时间。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2015-07-26T12:56:39.873

这是你的清单：

```
3 -- Cancel
8 -- Backspace
9 -- Tab
10 -- Enter
12 -- Clear
16 -- Shift
17 -- Ctrl
18 -- Alt
19 -- Pause
20 -- Caps Lock
21 -- Kana
24 -- Final
25 -- Kanji
27 -- Escape
28 -- Convert
29 -- No Convert
30 -- Accept
31 -- Mode Change
32 -- Space
33 -- Page Up
34 -- Page Down
35 -- End
36 -- Home
37 -- Left
38 -- Up
39 -- Right
40 -- Down
44 -- Comma
45 -- Minus
46 -- Period
47 -- Slash
48 -- 0
49 -- 1
50 -- 2
51 -- 3
52 -- 4
53 -- 5
54 -- 6
55 -- 7
56 -- 8
57 -- 9
59 -- Semicolon
61 -- Equals
65 -- A
66 -- B
67 -- C
68 -- D
69 -- E
70 -- F
71 -- G
72 -- H
73 -- I
74 -- J
75 -- K
76 -- L
77 -- M
78 -- N
79 -- O
80 -- P
81 -- Q
82 -- R
83 -- S
84 -- T
85 -- U
86 -- V
87 -- W
88 -- X
89 -- Y
90 -- Z
91 -- Open Bracket
92 -- Back Slash
93 -- Close Bracket
96 -- NumPad-0
97 -- NumPad-1
98 -- NumPad-2
99 -- NumPad-3
100 -- NumPad-4
101 -- NumPad-5
102 -- NumPad-6
103 -- NumPad-7
104 -- NumPad-8
105 -- NumPad-9
106 -- NumPad *
107 -- NumPad +
108 -- NumPad ,
109 -- NumPad -
110 -- NumPad .
111 -- NumPad /
112 -- F1
113 -- F2
114 -- F3
115 -- F4
116 -- F5
117 -- F6
118 -- F7
119 -- F8
120 -- F9
121 -- F10
122 -- F11
123 -- F12
127 -- Delete
128 -- Dead Grave
129 -- Dead Acute
130 -- Dead Circumflex
131 -- Dead Tilde
132 -- Dead Macron
133 -- Dead Breve
134 -- Dead Above Dot
135 -- Dead Diaeresis
136 -- Dead Above Ring
137 -- Dead Double Acute
138 -- Dead Caron
139 -- Dead Cedilla
140 -- Dead Ogonek
141 -- Dead Iota
142 -- Dead Voiced Sound
143 -- Dead Semivoiced Sound
144 -- Num Lock
145 -- Scroll Lock
150 -- Ampersand
151 -- Asterisk
152 -- Double Quote
153 -- Less
154 -- Print Screen
155 -- Insert
156 -- Help
157 -- Meta
160 -- Greater
161 -- Left Brace
162 -- Right Brace
192 -- Back Quote
222 -- Quote
224 -- Up
225 -- Down
226 -- Left
227 -- Right
240 -- Alphanumeric
241 -- Katakana
242 -- Hiragana
243 -- Full-Width
244 -- Half-Width
245 -- Roman Characters
256 -- All Candidates
257 -- Previous Candidate
258 -- Code Input
259 -- Japanese Katakana
260 -- Japanese Hiragana
261 -- Japanese Roman
262 -- Kana Lock
263 -- Input Method On/Off
512 -- At
513 -- Colon
514 -- Circumflex
515 -- Dollar
516 -- Euro
517 -- Exclamation Mark
518 -- Inverted Exclamation Mark
519 -- Left Parenthesis
520 -- Number Sign
521 -- Plus
522 -- Right Parenthesis
523 -- Underscore
524 -- Windows
525 -- Context Menu
61440 -- F13
61441 -- F14
61442 -- F15
61443 -- F16
61444 -- F17
61445 -- F18
61446 -- F19
61447 -- F20
61448 -- F21
61449 -- F22
61450 -- F23
61451 -- F24
65312 -- Compose
65368 -- Begin
65406 -- Alt Graph
65480 -- Stop
65481 -- Again
65482 -- Props
65483 -- Undo
65485 -- Copy
65487 -- Paste
65488 -- Find
65489 -- Cut 
```

我用这个简单的蛮力生成了它：

```
import java.awt.event.KeyEvent;                                                               
import java.lang.reflect.Field;                                                               
import java.lang.reflect.Modifier;                                                            
import java.util.*;                                                                           

public class Test {                                                                           
    public static void main(String[] a) {                                                     
        for(int i = 0; i < 1000000; ++i) {                                                    
            String text = java.awt.event.KeyEvent.getKeyText(i);                              
            if(!text.contains("Unknown keyCode: ")) {                                         
                System.out.println("" + i + " -- " + text);                                   
            }                                                                                 
        }                                                                                     

    }                                                                                         
} 
```

我已经排除了“未知”代码。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-09T17:06:28.797

[KeyEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/KeyEvent.html)类具有具有这些值的静态字段。

例如，`KeyEvent.VK_A`代表“A”键。

要获取字段名称，您可以使用反射：

```
Field[] fields = java.awt.event.KeyEvent.class.getDeclaredFields();
for (Field f : fields) {
    if (Modifier.isStatic(f.getModifiers())) {
        System.out.println(f.getName());
    } 
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-09T17:11:53.763

您不需要知道键码的确切值。`KeyEvent`类具有定义所有关键代码的常量字段：

```
KeyEvent.VK_A
KeyEvent.VK_ENTER
KeyEvent.VK_SPACE 
```

等等

请仔细阅读 Javadoc。所有常量值也可以在这里找到：

[http://docs.oracle.com/javase/7/docs/api/constant-values.html](http://docs.oracle.com/javase/7/docs/api/constant-values.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-09T16:54:56.220

你可以试试这个程序来获取`KeyEvent`类中字段的所有int值

```
import java.awt.Robot; 
import java.awt.event.KeyEvent;
import java.awt.event.KeyEvent;
import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
import java.util.*;
public class RobotClass 
{ 
   public static void main(String[] args)  
   {   
      ArrayList<Integer> values = new ArrayList<>();
      try{
         Robot robot = new Robot();
         Field[] fields = java.awt.event.KeyEvent.class.getDeclaredFields();
         for (Field f : fields) {
            if (Modifier.isStatic(f.getModifiers())) {
               values.add(f.getInt(f.getName()));
           } 
         }         
      }
      catch(Exception e){
         Collections.sort(values);
         for(int i:values) System.out.println(i);
      }
   } 
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-07-18T19:53:17.807

[Java™ 平台标准版。7](https://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.event.KeyEvent.VK_UNDEFINED)

在那里寻找“java.awt.event.KeyEvent”部分；

# php - 如何指定多个样式表

> ID：15313471
> 
> 赞同：0
> 
> 时间：2013-03-09T17:04:34.487
> 
> 标签：php, html, css

所以我一直在我买的一本 PHP 书中做一些练习，他们建议设计一个标题并将它保存为一个单独的文档，然后当你想在你的页面中使用它时，你只需使用

```
<?php
   require('header.html');
?> 
```

虽然这节省了大量用于修改每个单独页面的标题的代码，但我希望为不同的页面使用不同的样式表..但我不知道如何，因为当调用 header.html 时，它会自动加载自己的样式表..

是否有类似“IF”语句我可以用来确定我可以使用哪一个？样式表规范必须在`<head>`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:17:09.363

好吧，这是一个例子。

在`index.php`（*将要访问的文件*）

```
<?php
    $stylesheets = [
        '/stylesheets/common.css',
        '/stylesheets/themes.css',
    ];
?>
<html>
    <head>
        <?php include("head.php"); ?>
    </head>
</html> 
```

并在`head.php`：

```
<?php foreach ($stylesheets as $stylesheet): ?>
    <link rel="stylesheet" type="text/css" href="<?= $stylesheet ?>" />
<?php endforeach; ?> 
```

输出应该是这样的：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/stylesheets/common.css" />
        <link rel="stylesheet" type="text/css" href="/stylesheets/themes.css" />
    </head>
</html> 
```

**为什么？**

因为您分配给`$stylesheets`一个值数组（*样式表的 URI*）。当您包含文件`head.php`时，该变量`$stylesheets`对其可用，因为它是在包含之前声明/分配的。

`head.php`然后简单地迭代这些值并将它们喷出。通过更改 的值，`$stylesheets`您可以在结果页面中添加或删除样式表引用。

不过，这充满了问题；没有错误检查等，并且需要更多的工作才能在生产中可靠地使用这样的东西（*或者无论如何应该需要更多的工作*）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:17:50.413

不要包含标题的那部分。这样，您还可以正确地为每个页面添加标题和关键字，即

```
<html>
<head>
<title Yada yada</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<link href="style/customstyle.css" rel="stylesheet">
<?php require_once('header.html'); ?> 
```

您的网站在这里

然后在你的 header.html 中完成你的标签

```
<link href="style/style.css" rel="stylesheet">
....
</head>
<body>
<div class....>
 Your Header (topbar /menu etc.. 
```

# c++ - C中的C ++构造函数初始化列表替代方案？

> ID：15313475
> 
> 赞同：0
> 
> 时间：2013-03-09T17:04:42.670
> 
> 标签：c++, c, constructor, initialization

在 C++ 中，类构造函数可以使用初始化列表，有人告诉我这是一个通过避免额外分配来提高性能的特性。所以我想知道是否有一种类似的方法可以在 C 中实现与 C++ 类构造函数基本相同目的的函数相同的好处？

我有点不清楚该功能在 C++ 编译器中究竟是如何工作的，因此也将不胜感激有关该主题的任何其他信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:08:19.763

C 没有任何类似的功能，但是由于 C 也没有构造函数，因此不存在不必要的赋值的危险。

更大的原则是，将一个特性引入一门语言通常会产生对附加特性的需求，以加强原始语言。一个简单的例子是线程。如果线程作为一种特性内置于语言中，那么直接的问题就是如何同步它们。因此也需要同步。因此，您会看到没有内置线程或同步的语言（如 C）和两者兼有的语言，但没有一种没有另一种。在这里，构造函数是线程，同步是列出初始值设定项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:32:51.083

在 C++ 构造函数中，初始化列表允许 C++ 编译器在成员变量的位置就地构造成员，而不是使用赋值运算符、复制构造函数或移动构造函数来初始化成员变量。有关更多详细信息，请参阅[C++ FAQ 的第 10.6 节](http://www.parashift.com/c++-faq/init-lists.html)。

在 C 中，C 编译器没有提供这样的自动操作。这意味着程序员直接控制所有的初始化，不需要特殊的语言特性来避免这些额外的操作。

为了更清楚一点，请考虑在 C++ 构造函数中使用赋值初始化时会发生什么：

1.  成员变量首先使用默认构造函数构造
2.  构造了一个临时对象
3.  调用赋值或移动赋值运算符以使用临时变量重新初始化成员变量。
4.  临时调用析构函数。

虽然某些编译器可以在某些情况下优化这些步骤，但您的情况可能会有所不同，并且没有 C++ 编译器可以在所有情况下优化这些步骤。现在，考虑一下程序员如何在 C 中完全复制这些步骤：

```
void my_struct_init(struct my_struct* sp)
{
  member_init_default(&sp->the_member);  /* default constructor for member */

  struct member memb; /* temporary on stack */
  member_init_other(&memb, ...params...);  /* initialize memb */
  member_assign(&sp->the_member,&memb);    /* assign member */
  member_finalize(&memb);                  /* finalize the temporary */
} 
```

很少有 C 程序员会这样做（没有充分的理由）。相反，他们会自动编码优化：

```
 member_init_other(&sp->the_member, ...params...); 
```

该功能存在于 C++ 中，因为编译器为程序员做了很多自动化的事情。这通常使程序员的工作更轻松，但需要诸如初始化列表之类的功能来帮助编译器生成最佳代码。C 编译器提供了一个更简单的底层机器模型，自动执行的操作更少，因此需要更少的功能（尽管不一定需要更少的工作）来生成类似的最佳代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T17:09:31.593

C 中没有这样的特性。最接近的是[指定的初始化程序](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-09T17:20:22.387

您可以编写一个单独的函数并在从类创建对象时调用它，然后将其传递给它：

C：

```
typedef struct {
        int x;
}mine;

void mine_initializer(mine* me)
{
        me->x = 4; //initialization
}

int main(void)
{
        mine me;
        mine_initializer(&me);
        return 0;
} 
```

你也可以在 C++ 中做到这一点：

```
struct mine{
        int x;
        void initialize()
        {
                x = 4; //initialization
        }
};

void main(void)
{
        mine me;
        me.initialize();
        printf("%d",me.x);
} 
```

这将`4`作为结果输出。

# javascript - 使用 Javascript 更改输入值

> ID：15313476
> 
> 赞同：3
> 
> 时间：2013-03-09T17:04:45.680
> 
> 标签：javascript, forms, validation, email, input

标题看起来很简单，但我需要帮助。

我有一个带有字段输入“电子邮件”的表单，其值为空，直到用户填写为止。好的，点击提交按钮，我调用函数 validate() 是：

```
function validate(){
    var email=document.getElementById("email");
    if(!(/[\w-\.]{3,15}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/.test(email))) {
        email.setAttribute('value','Insert a correct email');
        email.style.border="2px solid red";
    } else {
        alert("Valid field"); // This is to test it works
        email.style.border="2px solid #63ce40";
        this.form.submit();
    }
    } 
```

我在这里要做的是，如果插入的电子邮件不符合要求（无效），请使用“插入正确的电子邮件”更改输入的值。

如果该字段为空并且我单击提交，它可以正常工作，但如果我插入文本并单击提交，唯一的变化将是该字段获得 2px 红色边框，但没有文本更改。

我想知道我必须做什么，以便当我点击提交时写的错误电子邮件被删除并替换为文本“插入正确的电子邮件”。

输入是：

```
<li>
    <input type="text" id="email" name="email" 
    value="" onfocus="this.value=''" size="40"/>
</li> 
```

我正在使用的提交按钮：

```
<input id="bsubmit" type="button" value="Submit"
name="submit" onclick=";this.disabled=true;validate();
this.disabled=false;"/> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:09:27.843

您尝试使用它很好，`setAttribute`因为它是一个重要的方法，但问题是您不想在这种情况下修改`value` *属性*，这是 DOM 的一部分，但您想修改`<input>`元素的`value` *属性*.

```
email.value = 'Insert a correct email'; 
```

[http://jsfiddle.net/XJZwm/](http://jsfiddle.net/XJZwm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:09:34.713

试试这个`email.value = 'Insert a correct email';`而不是`email.setAttribute('value','Insert a correct email');`

# string - 如何在 vb 6.0 中的字符串上查找字符串

> ID：15313500
> 
> 赞同：0
> 
> 时间：2013-03-09T17:06:36.803
> 
> 标签：string, search, vb6

嗨，到目前为止，我在文本框中找到一个字符串时遇到了这个问题，这是我只检测到逗号字符，现在我输入 23pm,24,25am 我将如何使用此代码执行此操作，或者任何人都可以给我简单的代码？

```
Dim tdates() As String
Dim numberOfDates, xcount As Integer
tdates = Split(TXTDAYS.Text, ",")
numberOfDates = UBound(tdates)
Dim counter As Integer

' loop through each input
For counter = 0 To numberOfDates
    Dim xdate As String
    xdate = LCase$(tdates(counter))

If Len(xdate) <= 2 Then
  xcount = xcount + 1
  Else
        ' if the original text has am or pm in it, add .5
        If InStr(1, xdate, "am") > 0 Or InStr(1, xdate, "pm") > 0 Then
            xcount = xcount + 0.5 'problem here it doesn't count
        End If
    End If
Next 
```

如果有更好的方法可以通过检测逗号和 am pm 字符串来更好地执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:13:27.220

使用 instr()..

```
s = "admin@foo.com"
d = Mid(s, InStr(1, s, "@") + 1) 
```

变量 d$ 将以字符串“foo.com”结尾。（不要忘记检查以确保存在 @ 符号，否则您最终会得到整个源字符串。）

取自这篇文章..

[子字符串的VB6索引](https://stackoverflow.com/questions/4935658/vb6-index-of-substring)

谢谢！

@leo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T20:01:45.617

[`Split`](http://www.vb6.us/tutorials/vb-string-array-functions-split-join-filter)逗号上的文字。然后你的数组将包含所有的单词

用于[`InStr`](http://www.aivosto.com/vbtips/instr.html)搜索上午或下午。

[`Replace`](http://www.vb6.us/tutorials/vb6-string-functions)AM 和 PM 带有“”并检查文本的其余部分是否有数字（用于验证）

```
' split the input on a comma.
dim dates() as String = Split(TXTDAYS.Text, ",")
dim numberOfDates as Integer = UBound(dates)
dim counter as Integer

' loop through each input
For counter = 0 to numberOfDates
    dim dateEntered as String = LCase$(dates(counter))

    ' make sure the text entered is a number (once am and pm are removed)
    dim dateNumber as String =  Replace(Replace(dateEntered, "pm", ""), "am", "")
    if IsNumeric(dateNumber) Then
        COUNT = COUNT + 1

        ' if the original text has am or pm in it, add .5
        if Instr(1, dateEntered , "am") > 0 Or Instr(1, dateEntered , "pm") > 0 Then
            COUNT = COUNT + .5
        end if
    else
        ' do something to indicate invalid input
    end if 
Next 
```

# java - Crystal Report 是否支持在 Chrome 中打印？

> ID：15313501
> 
> 赞同：1
> 
> 时间：2013-03-09T17:06:38.233
> 
> 标签：java, google-chrome, firefox, crystal-reports

我们有一个基于 Java EE 和 Crystal Report 的遗留系统。问题是，打印选项仅适用于 IE。在 Chrome 或 Firefox 中，单击“打印”按钮时，会打开“打印到 PDF”对话框。

我怀疑问题出在水晶报表查看器用于其功能的 ActiveX 技术上。

所以，我想知道水晶报表是否支持使用其他技术，如 Flash 或 Applets。如果是这样，我在哪里可以找到有关它的一些文档。

# javascript - jQuery ajax TypeError：非法调用

> ID：15313508
> 
> 赞同：1
> 
> 时间：2013-03-09T17:07:30.590
> 
> 标签：javascript, ajax, jquery

我正在做一个 Ajax 项目。我页面上的所有内容都有效，包括此部分：

```
var data =  {
    doc:     "sample", 
    action:  "updatemsg", 
    dbid:    97, 
    message: "text"
};

$.ajax({
    url:     ANNOTATION_ENDPOINT,
    data:    data,
    success: console.log,
    error:   console.log
}); 
```

但是，对于每个请求，它都会引发此错误：

```
Uncaught TypeError: Illegal invocation    jquery.js:974
    fire                                  jquery.js:974
    self.fireWith                         jquery.js:1084
    done                                  jquery.js:7803
    callback                              jquery.js:8518 
```

并且`console.log`永远不会拨打电话。`ANNOTATION_ENDPOINT`是一个有效的 URL；我的其他功能使用它没有问题。

我已将问题分解为这一小部分，但我在这里感到困惑。有什么见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:11:32.663

日志函数期望它的上下文是控制台对象而不是 jqXHR 所以试试

```
$.ajax({
    url:     ANNOTATION_ENDPOINT,
    data:    data,
    success: console.log.bind(console),
    error:   console.log.bind(console)
}); 
```

# c# - C# 多线程从主数组更新/读取

> ID：15313509
> 
> 赞同：1
> 
> 时间：2013-03-09T17:07:32.273
> 
> 标签：c#, multithreading

我正在开发一个将同时执行多个搜索的应用程序。每一个都将在它自己的线程上。每个线程都需要检查一个数组以查看结果是否已经出现。如果没有显示该结果，则将结果显示给用户并将其添加到主数组中。所以每个线程需要能够同时读取和写入主数组。

我来自 PHP 和 JS 背景，所以我对线程和 C# 非常陌生。在这里的任何帮助将不胜感激。

**编辑：**我正在使用 BackgroundWorker 进行多线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:18:20.147

我不知道`BackgroundWorker`当您要使用 .NET 4.5 时使用的基本原理

所以，如果我可以补充：

1.  帮自己一个忙并使用[`Task Parallel Library`](http://msdn.microsoft.com/en-us/library/dd460717.aspx)（`Task.Run`/ `Task.Factory.StartNew()`，`Parallel.For`/`Parallel.ForEach`取决于您的需要）。
2.  您将不得不锁定（例如[`lock`](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.71%29.aspx)或[`SlimReadWriterLock`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)）或使用 [`Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/dd287108.aspx)命名空间中的集合。

现在这是一个有点冗长的话题，所以如果您有任何进一步的疑问或问题，我会适当地编辑答案。我链接的 MSDN 页面上有一些示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:24:06.760

如果我没记错的话，PHP 中的“数组”在作为键/值查找数据结构方面类似于字典。

在这种情况下，鉴于您使用的是最新版本的 .Net， “ [System.Collections.Concurrent ”命名空间中的“](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx) [ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx) ”听起来是最容易使用的选项。

祝你好运，

# java - 如何移动数组的内容？

> ID：15313510
> 
> 赞同：-2
> 
> 时间：2013-03-09T17:07:45.097
> 
> 标签：java, arrays

例如，我有一个包含以下内容的数组：a、b、c、d、e、f

我希望结果是：b、c、d、e、f、a

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:13:08.843

使用[数组复制](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)：

```
var t = arr[0];
System.arraycopy(arr, 1, arr, 0, arr.length-1);
arr[arr.length-1] = t; 
```

javadoc 指定此操作是安全的：

> 如果 src 和 dest 参数引用相同的数组对象，则执行复制，就好像首先将位置 srcPos 到 srcPos+length-1 的分量复制到具有长度分量的临时数组，然后临时数组的内容是通过目标数组的 destPos+length-1 复制到位置 destPos。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:15:18.887

```
Collections.rotate(Arrays.asList(array), -1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:11:02.290

尝试使用 ArrayList，它有一些很好的方法可以自动转换。尝试

```
myArrayList.add(0,myArrayList.remove(myArrayList.size()-1)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T17:25:26.467

LinkedList 可以快速做到这一点，但在大多数情况下您不需要这样做。相反，在不修改数组内容的情况下定义起始索引要容易得多。

例如，

```
int start = 5;

for (int i=start, j=0; j<arr.length; i++, j++) {
    if (i == arr.length) {
        i = 0;
    }
    // do something with arr[i]
} 
```

复制数组是另一种解决方案，但是如果您经常旋转数组，我建议不要更改内容或创建新数组，通过定义起始索引，您可以随时更改起始点。

# java - Java，用空白字符串替换字符串数字并删除数字后面的所有内容

> ID：15313519
> 
> 赞同：5
> 
> 时间：2013-03-09T17:08:51.233
> 
> 标签：java, regex, replace

我有这样的字符串：

```
Alian 12WE 
```

和

```
ANI1451 
```

有没有办法用 JAVA 中的空字符串替换所有数字（以及数字之后的所有内容）？

我希望输出看起来像这样：

```
Alian

ANI 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T17:32:40.010

使用正则表达式，它非常简单：

```
public class Test {

    public static String replaceAll(String string) {
        return string.replaceAll("\\d+.*", "");
    }

    public static void main(String[] args) {
        System.out.println(replaceAll("Alian 12WE"));
        System.out.println(replaceAll("ANI1451"));
    }   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:11:09.983

您可以在找到数字后使用正则表达式删除所有内容 - 例如：

```
String s = "Alian 12WE";
s = s.replaceAll("\\d+.*", ""); 
```

*   `\\d+`找到一个或多个连续数字
*   `.*`匹配数字后的任何字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T17:11:47.217

使用正则表达式

```
"Alian 12WE".split("\\d")[0] // Splits the string at numbers, get the first part. 
```

或替换`"\\d.+$"`为`""`

# boot - Raspbian 的软浮点版本无法启动

> ID：15313521
> 
> 赞同：3
> 
> 时间：2013-03-09T17:09:09.707
> 
> 标签：boot, raspberry-pi, raspbian

我在这里下载了 Raspbian 的硬浮点图像：

[http://www.raspberrypi.org/downloads](http://www.raspberrypi.org/downloads)

我将推荐的硬浮动映像复制到 SD 卡上，并且 Raspberry Pi 可以正常启动。

然后我下载了 Raspbian 的软浮动版本，因为我需要它来运行一些在硬浮动版本上无法运行的软件。我再次格式化了 SD 卡，将软浮点映像复制到上面并尝试用它启动 Raspberry Pi。

问题：Raspbery Pi 无法使用 Raspbian 的软浮动版本启动！！我看到绿色的“ACT”LED 亮了不到一秒钟。之后，只有红色电源 LED 亮起，之后没有任何反应。

我重复了这个过程几次并重新下载了图像，检查了下载文件的 SHA 等。它只是不起作用。硬浮动映像始终启动（绿色“ACT”灯正常快速闪烁）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T05:49:34.877

更新：如果你有一个带有 Hynix 内存的更新的 Raspberry Pi，那么旧版本的 Raspbian 将无法启动。具体来说，您至少需要 2013-02-09 Debian 7 (Wheezy) 构建。看到[这个帖子](http://www.raspberrypi.org/archives/3534)。

现在，2013-02-09 Wheezy 构建是一个硬浮动版本，所以你不能使用它，但你可以更新你的软浮动版本的内核映像，它实际上独立于 Linux 操作系统（我是告诉说，基本上 GPU 会启动 Raspberry Pi，并将 ARM 作为一种协处理器运行）。所以，你可以运行[rpi-update](https://github.com/Hexxeh/rpi-update)来更新你的内核，应该没问题。

如果您不拥有任何可以启动旧映像的旧 Raspberry Pi，则有一点点 22 - 如果您拥有的唯一 Raspberry Pi 是无法启动的较新的 Raspberry Pi，您如何更新操作系统? 在你的情况下，听起来你可以访问一个较旧的，所以你没问题。对于那些不这样做的人，也许有人最终会发布更新的软浮动版本，但在那之前，也许您可​​以尝试以下方法。我没有；这只是一个理论，但在这一点上你没有什么可失去的:-)

1.  将最新的 Wheezy 映像 (2012-02-09) 刻录到额外的 SD 卡
2.  在 Windows 上安装此 SD 卡
3.  复制除 *gz 之外的所有文件，这些文件对应于 Linux 文件系统。基本上，所有的启动映像和配置文件
4.  挂载包含软浮动映像的 SD 卡并覆盖引导映像文件
5.  希望有啤酒庆祝？

* * *

上一篇：是的，我也遇到了同样的问题。我不知道到底出了什么问题，但 start_elf 映像无法启动，至少在最近的一组 Raspberry Pi 中是这样。我不敢相信 Raspbian 会发布损坏的东西，所以我怀疑它适用于某些 Raspberry Pi，但不适用于其他树莓派。你需要做的是：

1.  将 Wheezy 的硬浮动副本刻录到 SD 卡。您将抢夺启动映像（有效）并将其复制到软浮动映像。
2.  在 Windows 机器上安装 SD 卡。引导分区是[FAT](http://en.wikipedia.org/wiki/File_Allocation_Table)，因此您将能够看到它。查找文件 start.elf。将其复制到您的 Windows 机器上。
3.  将 Wheezy 的软浮动副本刻录到 SD 卡上，并将其安装在 Windows 机器上。
4.  用你的硬浮动副本替换它的 start.elf 。
5.  打开啤酒，尽情享受吧。

请参阅我的[相关帖子](https://stackoverflow.com/questions/14615308/using-ftdi-d2xx-drivers-with-python-from-raspberry-pi-on-raspbian-soft-float)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T22:19:07.773

> 只需使用硬浮点（Raspbian “wheezy”）映像一张卡，另一张使用软浮点（Soft-float Debian “wheezy”）。将两者都插入 Windows PC 并将所有文件（您可以看到）从硬浮动卡复制到软浮动卡上，替换现有文件。
> 
> 说明：[http ://www.raspberrypi.org/archives/3534](http://www.raspberrypi.org/archives/3534)
> 
> PS 当然，您可以先将这些文件复制到临时文件夹，交换卡，然后将软浮动卡上的所有文件替换为临时文件夹中的文件。
> 
> bootcode.bin
> start.elf
> fixup.dat

从[Raspberry Pi SD 卡与这个 Soft-float Debian “wheezy” 不想启动](http://alvasnet.blogspot.com/2013/06/raspberry-pi-sd-card-with-this-soft.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T06:23:49.343

当你`dd`的形象，确保`bs=1M`...

在尝试了其他答案中的所有内容之后，终于可以让它在最新的 Raspberry Pi 上开箱即用。实际上，我发现这对几个 Raspberry Pi 应用程序/代码很有帮助。

# asp.net - Breeze.js WebApi OData 和 Durandal

> ID：15313523
> 
> 赞同：1
> 
> 时间：2013-03-09T17:09:20.313
> 
> 标签：asp.net, knockout.js, asp.net-web-api, breeze, durandal

我正在尝试使用 Durandal、Breeze 和淘汰赛来实现 WebApi OData。但我总是低于错误：

*无法初始化 OData。需要支持远程 OData 服务*

我创建了一个视图模型：

```
var my = {}; //my namespace
$(function () {
    var serverAddress = "/odata/";
    breeze.config.initializeAdapterInstances({ dataService: "OData" });
    var manager = new breeze.EntityManager(serverAddress);

    my.vm = {
        customers: ko.observableArray([]),
        load: function () {
            var query = breeze.EntityQuery.from("Customers");
            manager.executeQuery(query, function (data) {
                var results = data.results;
                $.each(data.results, function (i, c) {
                    my.vm.customers.push(c);
                });
            });
        }
    }

    my.vm.load();
    ko.applyBindings(my.vm);
}); 
```

在 BreezWebApiConfig 中提到：

```
public static void RegisterBreezePreStart() {
  GlobalConfiguration.Configuration.Routes.MapHttpRoute(
    name: "BreezeApi",
    routeTemplate: "api/{controller}/{action}"
  );
} 
```

并注册了 WebApi ：

```
public static void Register(HttpConfiguration config)
{
  config.Routes.MapODataRoute("odata", "odata", GetEdmModel());
  config.Routes.MapHttpRoute(
      name: "DefaultApi",
      routeTemplate: "api/{controller}/{id}",
      defaults: new { id = RouteParameter.Optional }
  );
} 
```

如果有人有这个想法，请建议我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:35:19.693

I solve my problem, I was missing to take reference :

```
datajs-1.1.0.js 
```

Breeze OData functionality is dependent on datajs library.

# python - python-3.x 错误 hyde

> ID：15313529
> 
> 赞同：1
> 
> 时间：2013-03-09T17:09:36.350
> 
> 标签：python, python-3.x, hyde

我跟着（[https://github.com/hyde/hyde](https://github.com/hyde/hyde)）并使用命令“hyde-s folder_name create-l starter”安装了所有requirements.txt，错误发生：

```
Traceback (most recent call last):
   File "C: \ Python33 \ Scripts \ hyde-script.py", line 9, in <module>
     load_entry_point ('== 0.8.4 hyde', 'console_scripts', 'hyde') ()
   File "C: \ Python33 \ lib \ site-packages \ hyde \ main.py", line 10, in main
     Engine (.) Run ()
   File "C: \ Python33 \ lib \ site-packages \ hyde \ engine.py", line 39, in run
     super (Engine, self). run (args)
   File "C: \ Python33 \ lib \ site-packages \ command \ application.py", line 252, in run
     self.parse args = (sys.argv [1:])
   File "C: \ Python33 \ lib \ site-packages \ command \ application.py", line 242, in parse
     self.__parser__.parse_args return () # pylint: disable-msg = E1101
AttributeError: 'Engine' object has no attribute '__parser__' 
```

我看到安装的 argparse 有一个“parse_args () ( [http://argparse.googlecode.com/svn/trunk/doc/parse_args.html](http://argparse.googlecode.com/svn/trunk/doc/parse_args.html) )”尝试适应更多但未成功。

在我不得不做一些调整之前，例如“从 UserDict 导入 IterableUserDict”，如“python 3x”中有（[http://docs.python.org/3.3/library/collections.html?highlight=userdict#collections.UserDict](http://docs.python.org/3.3/library/collections.html?highlight=userdict#collections.UserDict)）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T01:59:22.123

我测试了两个静态站点生成器，我可以说[Nikola](https://github.com/ralsina/nikola)和[Pelican](https://github.com/getpelican/pelican)在 Python 3.3.2 中使用是最稳定的

# isabelle - 从具有多个参数的语言环境中导出代码

> ID：15313530
> 
> 赞同：0
> 
> 时间：2013-03-09T17:09:36.600
> 
> 标签：isabelle

根据[codegen](https://isabelle.in.tum.de/dist/Isabelle2013/doc/codegen.pdf)文档部分“7.3 语言环境和解释”，从语言环境导出代码有点棘手但可以实现。以下示例工作正常：

```
locale localTest =
  fixes A :: "string"
begin
  fun concatA :: "string ⇒ string" where "concatA x = x@A"
  definition concatAA :: "string ⇒ string" where "concatAA x = x@A@A"
end

definition localtest_concatA :: "string ⇒ string " where
[code del]: "localtest_concatA = localTest.concatA ''a''"
definition localtest_concatAA :: "string ⇒ string " where
[code del]: "localtest_concatAA = localTest.concatAA ''a''"

interpretation localTest "''a''"
  where "localTest.concatA ''a'' = localtest_concatA"
  and "localTest.concatAA ''a'' = localtest_concatAA"
  apply unfold_locales
  apply(simp_all add: localtest_concatA_def localtest_concatAA_def)
  done

export_code localtest_concatA localtest_concatAA in Scala file - 
```

如何为具有多个参数的语言环境导出代码？鉴于以下情况`locale`：

```
locale localTest =
  fixes A :: "string"
  fixes B :: "string"
begin
  fun concatA :: "string ⇒ string" where "concatA x = x@A"
  definition concatB :: "string ⇒ string" where "concatB x = x@B"
end 
```

我可以用

```
interpretation localTest "''a''" "''b''" . 
```

但我不能在定义中使用这种解释

```
definition localtest_concatA :: "string ⇒ string " where
[code del]: "localtest_concatA = localTest.concatA ''a'' ''b''" 
```

它失败了

```
Type unification failed: Clash of types "_ list" and "_ ⇒ _"

Type error in application: incompatible operand type

Operator:  op = localtest_concatA :: (char list ⇒ char list) ⇒ bool
Operand:   localTest.concatA ''a'' ''b'' :: char list 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T04:09:00.477

查看您引入的常量，例如，通过`term`命令。我们有

```
term localTest.concatA 
```

带输出

```
"localTest.concatA" :: "char list ⇒ char list ⇒ char list" 
```

您会看到，除了您在原始定义中（在语言环境内）提供的单个参数之外，还有一个额外的参数（但只有 1 而不是 2，因为定义不依赖于`B`）。

Now, after your interpretation (since you did not explicitly provide a name, the constants of `localTest` will be in scope without qualifier) we have

```
term concatA 
```

with output

```
"localTest.concatA ''a''" :: "char list ⇒ char list" 
```

That is, `localTest.concatA ''a''` is already of type `string => string`. You additionally add `''b''` and obtain type `string`, but your type annotation says `string => string`. So there is really a clash of types and the reason was that you gave too many arguments to `localTest.concatA`. Try using

```
definition localtest_concatA :: "string ⇒ string " where
  [code del]: "localtest_concatA = concatA 
```

instead.

# java - 在 JavaFX 中使用 onMouseEntered 事件重新填充 SVG 路径

> ID：15313531
> 
> 赞同：0
> 
> 时间：2013-03-09T17:09:39.250
> 
> 标签：java, mouseevent, javafx-2, fxml, scenebuilder

我正在开发一个包含 .fxml 文档（使用 NetBeans 从 .svg 文件创建）的个人项目。这是您所看到的[地图](http://4.bp.blogspot.com/--jaT7jIrR7M/UBDQ9UvF40I/AAAAAAAABKI/vEqAZAosgpg/s1600/Risk_game_map_fixed.png)。此外，所有区域都转换为 .fxml 文件中的 SVG 路径。问题是我可以使用带有控制器类的 JavaFX Scene Builder 来处理鼠标事件，但是，只要在该区域上输入鼠标，我就想重新填充（或者换句话说，重新绘制或突出显示）该区域。这是主要课程

```
public class JavaFXApplication1 extends Application {

    @Override
    public void start(Stage primaryStage) throws IOException {
        Parent root = FXMLLoader.load(getClass().getResource("Risk3.fxml"));

        Scene scene = new Scene(root);

        primaryStage.setScene(scene);
        primaryStage.show();
    }

    /**
     * The main() method is ignored in correctly deployed JavaFX application.
     * main() serves only as fallback in case the application can not be
     * launched through deployment artifacts, e.g., in IDEs with limited FX
     * support. NetBeans ignores main().
     *
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        launch(args);
    }
} 
```

其次，我的控制器类包括 MouseEventListener；

```
import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.Initializable;
import javafx.event.ActionEvent;
import javafx.fxml.FXML;
import javafx.scene.input.MouseEvent;

public class RiskControllerClass implements Initializable {

    @FXML
    private void onMouseEntered(MouseEvent event){

        System.out.println("Entered");
    }

    @Override // This method is called by the FXMLLoader when initialization is complete
    public void initialize(URL fxmlFileLocation, ResourceBundle resources) {

        // initialize your logic here: all @FXML variables will have been injected

    }

} 
```

最后是一小段 risk3.fxml 代码（我没有放整个代码，因为它包含近 400 行）；

```
<Group id="Document" xmlns:fx="http://javafx.com/fxml" fx:controller="javafxapplication1.RiskControllerClass">
  <children>
    <fx:define />
    <SVGPath id="path3619" content=" M 0.00 0.00 L 1227.00 0.00 L 1227.00 116.00 C 1193.33 116.02 1159.67 115.98 1126.01 115.98 C 1126.01 116.49 1126.01 117.51 1126.01 118.02 C 1159.67 118.02 1193.33 117.98 1227.00 118.00 L 1227.00 628.00 L 0.00 628.00 L 0.00 99.32 C 6.64 98.86 13.31 98.87 19.94 98.17 C 13.30 97.62 6.65 97.18 0.00 96.77 L 0.00 0.00 Z" fill="#fefefe" opacity="1" />
    <SVGPath id="Greenland" fx:id="NA_3" content=" M 490.36 12.46 C 498.61 10.77 507.24 11.00 515.18 14.01 C 521.63 16.48 528.57 16.75 535.40 16.59 C 528.77 19.68 518.49 18.59 515.31 26.31 C 513.31 35.41 505.40 42.75 496.05 43.54 C 494.29 43.74 492.54 43.89 490.79 44.07 C 492.13 45.12 493.49 46.14 494.88 47.13 C 497.56 48.99 500.21 50.91 502.59 53.15 C 496.88 54.51 492.53 49.95 487.23 48.96 C 487.58 50.14 487.97 51.32 488.35 52.50 C 487.09 53.33 485.84 54.19 484.61 55.05 C 487.66 55.42 490.74 55.44 493.82 55.39 C 494.59 56.15 495.36 56.91 496.14 57.67 C 488.33 59.20 480.53 60.86 472.60 61.64 C 466.66 61.37 461.70 64.93 456.76 67.65 C 450.04 72.64 440.50 70.51 434.09 76.10 C 427.61 80.45 425.88 89.18 418.99 93.04 C 416.46 95.26 413.44 92.97 410.93 92.14 C 407.42 90.63 403.72 88.42 402.32 84.66 C 401.17 81.34 401.99 77.81 401.87 74.40 C 401.93 71.95 401.45 69.18 403.02 67.07 C 406.32 62.99 412.51 61.72 414.69 56.70 C 415.51 53.13 412.52 50.23 410.80 47.42 C 407.58 42.35 406.54 34.86 400.01 33.00 C 392.79 31.70 385.33 32.99 378.16 31.22 C 378.29 29.53 378.41 27.84 378.51 26.15 C 384.59 25.44 390.80 25.25 396.67 23.34 C 404.51 21.11 411.56 16.40 419.84 15.70 C 432.46 14.02 445.07 18.87 457.65 15.30 C 458.82 15.12 461.15 14.76 462.32 14.58 C 469.97 13.18 477.81 11.76 485.61 12.75 C 486.79 12.68 489.17 12.53 490.36 12.46 Z" fill="#fefe00" onMouseEntered="#onMouseEntered" opacity="1" />
    <SVGPath id="path3623" content=" M 485.61 12.75 C 485.60 10.49 489.75 10.48 490.36 12.46 C 489.17 12.53 486.79 12.68 485.61 12.75 Z" fill="WHITE" opacity="1" />
    <SVGPath id="path3625" content=" M 457.65 15.30 C 457.43 12.99 461.58 12.55 462.32 14.58 C 461.15 14.76 458.82 15.12 457.65 15.30 Z" fill="WHITE" opacity="1" />
    <SVGPath id="path3627" content=" M 365.37 29.33 C 369.45 28.35 373.61 27.58 377.82 27.46 C 363.52 32.99 348.15 34.67 333.34 38.37 C 324.32 40.14 315.46 43.02 306.24 43.63 C 309.25 41.84 312.58 40.65 316.01 39.98 C 318.77 39.39 321.51 38.84 324.29 38.28 C 338.00 35.39 351.71 32.46 365.37 29.33 Z" opacity="1" />
    <SVGPath id="Siberia" content=" M 836.39 34.09 C 842.29 34.41 846.57 28.51 852.59 29.79 C 858.25 31.43 864.07 32.69 870.01 32.56 C 874.75 32.93 881.62 32.13 884.05 37.38 C 880.74 39.42 877.36 41.29 873.97 43.17 C 874.28 43.65 874.91 44.61 875.22 45.09 C 878.03 44.44 880.83 43.74 883.63 43.00 C 887.15 45.97 890.81 48.78 894.42 51.65 C 892.13 53.63 889.75 55.48 887.42 57.40 C 892.45 63.72 897.32 70.25 903.17 75.85 C 910.35 81.68 909.87 92.10 915.23 99.21 C 909.46 100.74 903.98 103.17 898.29 104.96 C 898.85 110.08 900.49 115.47 898.84 120.52 C 894.83 123.31 891.12 128.24 885.78 127.94 C 883.18 128.09 879.68 127.44 878.27 130.29 C 878.33 133.94 880.28 137.20 881.41 140.60 C 878.38 141.55 875.41 142.64 872.51 143.92 C 868.65 140.54 864.66 137.34 860.51 134.33 C 863.89 131.72 867.43 129.25 870.66 126.42 C 865.67 121.43 860.73 116.39 855.89 111.26 C 860.27 110.18 864.63 109.16 869.04 108.13 C 866.64 105.09 864.24 102.02 861.50 99.29 C 857.61 95.69 851.80 95.84 847.31 93.50 C 843.42 90.36 841.49 85.57 839.11 81.32 C 835.89 76.46 830.28 74.27 825.55 71.23 C 818.16 67.65 813.71 58.96 804.81 58.76 C 803.60 55.05 801.40 51.81 799.08 48.72 C 798.85 48.38 798.39 47.70 798.16 47.36 C 802.44 41.78 809.74 42.57 815.92 41.57 C 815.27 40.07 814.63 38.58 814.00 37.09 C 821.39 35.60 828.88 34.79 836.39 34.09 Z" opacity="1">
      <fill>
        <Color blue="0.000" green="0.498" red="0.000" fx:id="x8" />
      </fill>
    </SVGPath>
      </children>
</Group> 
```

因此，请考虑每当鼠标进入该区域时，我想绘制或突出显示该区域的（ID：格陵兰）区域。如果您能提供帮助，我将不胜感激，无论如何谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:38:03.437

好吧，让我建议一些答案。

看起来，你必须在你的场景中应用一些 CSS。让我描述一下，它应该是什么样子：

查看css参考，关于“”的部分。这种类型，是一种-fx-effect 属性，适用于节点。SVGPath 是一个形状，所以是一个节点。看，如何应用内阴影：

```
innershadow( <blur-type> , <color> , <number> , <number> , <number> , <number> ) 
```

当它们悬停时，您需要将此（不支持其他效果）应用于您的 SVGPath。“悬停”是此类伪类的名称。

现在，我们需要为您的 SVGPaths 编写一个选择器。不幸的是，SVGPath 没有预定义的样式类。因此，您显然需要在 fxml 中设置该样式类。假设，您设置样式类“svg-path”。

然后，您可以使用 map 将此类 css 应用于您的场景：

```
.svg-path:hover{-fx-effect:innershadow(...)} 
```

# wordpress - 删除/隐藏 total_sales WooCommerce 自定义字段

> ID：15313532
> 
> 赞同：3
> 
> 时间：2013-03-09T17:09:39.360
> 
> 标签：wordpress, woocommerce

有没有办法`total_sales`在显示产品时删除自定义字段`the_meta`？

我可以将编辑器中的条目更改为另一个名称和值，但它会神奇地再次出现并且不会被删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-24T11:17:13.243

我会为此使用“the_meta_key”过滤器。你有几个选择，当然你可以将它们组合起来。

使用 CSS 控制要隐藏的内容

```
add_filter( 'the_meta_key' , 'class_custom_fields', 10, 3);

function classes_custom_fields($string, $key, $value){
    return str_replace('<li>','<li class="' . str_replace(' ', '-', $key). '">',$string);
}

<style>
ul.post-meta li.total_sales{
    display:none;
}
</style> 
```

通过 PHP 和 CSS 控制要隐藏的内容

```
add_filter( 'the_meta_key' , 'hide_custom_fields', 10, 3);

function hide_custom_fields($string, $key, $value){
    $hide_keys = array(
        'total_sales'
    );
    if(in_array(strtolower($key), $hide_keys)){
        return str_replace('<li>','<li class="hide">',$string);
    }
    return $string;
}
<style>
    .hide{
        display:none;
    }
</style> 
```

使用 PHP 控制要显示的内容

```
add_filter( 'the_meta_key' , 'allowed_custom_fields', 10, 3);

function allowed_custom_fields($string, $key, $value){

    $allowed_keys = array(
        'attribute one',
    );

    if(in_array(strtolower($key), $allowed_keys)){
        return $string;
    }
} 
```

使用 PHP 控制不显示的内容

```
add_filter( 'the_meta_key' , 'disallowed_custom_fields', 10, 3);

function disallowed_custom_fields($string, $key, $value){

    $disallowed_keys = array(
        'total_sales'
    );
    if(!in_array(strtolower($key), $disallowed_keys)){
        return $string;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-15T23:55:24.850

由于`total_sales`最终作为其`ul`组的最后一个列表项（在本例中`ul.post-meta`），只需输入：`ul.post-meta li:last-child{ display: none; }`

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-23T14:44:24.307

更好的选择是将其添加到您的 functions.php 文件中：

```
// Hide total sales for Woocommerce products
delete_post_meta_by_key( 'total_sales' ); 
```

# javascript - 使用 JQuery 将数组内容设置为 span 标签的标题

> ID：15313533
> 
> 赞同：2
> 
> 时间：2013-03-09T17:09:40.980
> 
> 标签：javascript, jquery, arrays

我有一个这样的数组：

```
var name = ["cat","shark","tiger","snake"]; 
```

我想将数组内容设置为`<span>`标题。

HTML 代码：

```
<ul id="select">
    <li class="ui-state-default"><span>CAT</span></li>
    <li class="ui-state-default"><span>SHARK</span></li>
    <li class="ui-state-default"><span>TIGER</span></li>
    <li class="ui-state-default"><span>SNAKE</span></li>
</ul> 
```

jQuery代码：

```
for(var i=0; i<=name.length; i++){
        $('#select li > span').each(function() {
        this.title = name[i];
        });
    }; 
```

但这段代码不起作用。跨度的标题是未定义的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:11:48.483

如果`title`您指的是 的*文本*，`span`我建议：

```
$('#select li span').text(function(i){
    return name[i];
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NevVX/)。

或者，如果您尝试设置 title*属性*，我建议：

```
$('#select li span').attr('title',function(i){
    return name[i];
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NevVX/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:13:16.013

*遍历跨度和*数组是没有意义的。这也`i <= name.length`意味着您将始终循环*通过*数组（应该是`<`）。这意味着您实际上将每个跨度的标题设置为一个不存在的数组元素。

```
$('#select li > span').each(function(i) {
    $(this).attr('title', name[i]);
}); 
```

您可能还想检查它是否`name[i]`存在。

[http://jsfiddle.net/wtbE5/](http://jsfiddle.net/wtbE5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:13:28.823

尝试：

```
$('#select li span').each(function(i){
    $(this).html(name[i]);
}); 
```

[样本](http://jsfiddle.net/r6TNq/)

# ruby-on-rails - 在 Ruby on Rails 中为外部 API 支持的模型使用 ActiveRecord 接口

> ID：15313535
> 
> 赞同：7
> 
> 时间：2013-03-09T17:09:58.170
> 
> 标签：ruby-on-rails, ruby, api

我正在尝试在我的 Rails 应用程序中使用从外部 API 检索信息的模型。我想做的是以类似于 ActiveRecord 模型将提供的方式（特别是关联，以及相同样式的可链接查询方法）访问我的数据模型（可能包含来自多个 API 调用的信息）。

我最初的直觉是重新创建我想要的 ActiveRecord 部分并合并此 API。不想“重新发明轮子”并确切地看到添加更多功能需要做多少工作，这让我退后一步，重新评估如何解决这个问题。

我找到了在没有表格的情况下使用 ActiveRecord 的方法（请参阅：Railscast #193 Tableless Model 和[此处](http://xtargets.com/2011/08/02/tableless-views-with-active-record/)的博客文章）并查看了 ActiveRecord。因为 ActiveModel 似乎只包含验证，所以我不确定这在这种情况下是否很有帮助。在没有表格的情况下使用 ActiveRecord 的解决方法似乎是最好的选择，但我怀疑有一种更简洁的方法来做到这一点，而我只是没有看到。

[这](https://gist.github.com/chrahunt/a70a82ed9824b2d1e1c5)是一个要点，其中包含我在尝试重新创建 ActiveRecord 功能时编写的一些代码，大量借鉴了 ActiveRecord 源代码本身。

我的问题归结为：我可以通过实现上面指定的 ActiveRecord 的解决方法或自己重新创建功能来获得我想要的功能（链接查询方法、关系），但这些真的是理想的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T17:41:09.863

请记住，Rails 仍然只是底层的 Ruby。

您可以将外部 API 表示为应用程序中的实例化类。

```
class Event
  def self.find(id)
    #...External http call to get some JSON...#
    new(json_from_api)
  end

  def initialize(json)
    #...set up your object here...#
  end

  def attendees
    #...external http call to get some JSON and then assemble it 
    #...into an array of other objects
  end
end 
```

因此，您最终编写本地抽象来从 api 调用创建 ruby​​ 对象，您可能还可以将 ActiveModel 或 Virtus 混入其中，因此您可以使用属性的哈希分配和表单验证等。

看看我为管道的 TfL 提要所做的 API 抽象。[服务中断](https://github.com/adamcarlile/service_disruption)

# javascript - EmberJS：没有方法lastObject，nextObject

> ID：15313541
> 
> 赞同：1
> 
> 时间：2013-03-09T17:10:28.207
> 
> 标签：javascript, ember.js

我想知道如何在我的模型/存储上调用 lastObject、nextObject？我总是得到一个“没有方法”的错误。

两种方法都在这里定义：http: [//emberjs.com/api/classes/Ember.Array.html](http://emberjs.com/api/classes/Ember.Array.html)

```
App.Photo = DS.Model.extend
  url: DS.attr('string'),
  displayName: DS.attr('string')

App.Store = DS.Store.extend
  revision: 12,
  adapter: 'DS.FixtureAdapter'

App.PhotoController = Ember.ObjectController.extend
  init: ->
    console.info "last", App.Photo.lastObject
    console.info "next", App.Photo.nextObject(@get('content')) 
```

**更新/工作解决方案**

```
console.info "last", App.Photo.find().get('lastObject') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:46:56.547

App.Photo 不是数组。这是一堂课。

App.Photo.find() 将返回一个类似数组的对象，一个包含存储中所有照片的记录数组，它具有 lastObject 属性，但您不能像函数一样调用它。此外，#nextObject 在数组上被覆盖以等效于#objectAt，因此这也不起作用（实际上，无论哪种方式，它都不能“像那样”工作）。

# php - 用相同的键合并数组，array_merge 不能正常工作

> ID：15313542
> 
> 赞同：1
> 
> 时间：2013-03-09T17:10:32.710
> 
> 标签：php, arrays, merge

我有具有相同键的数组，如下所示：

```
Array1(
    [00] => green
    [10] => red
    [20] => yellow
)

Array2(
    [00] => avocado
    [10] => apple
    [20] => banana
) 
```

我要这个：

```
Array_result(
    [00] => Array(
            [0] => green
            [1] => avocado
        )

    [10] => Array(
            [0] => red
            [1] => apple
        )

    [20] => Array(
            [0] => yellow
            [1] => banana
        )) 
```

或者[0]、[1]、[2]，我不介意key，我尝试了array_merge，但它不能正常工作。

编辑：我不知道为什么，但是 array_merge_recursive 打印了这个：

```
Array
(
    [00] => Array
        (
            [0] => green
            [1] => avocado
        )

    [0] => red
    [1] => apple
    [2] => yellow
    [3] => banana
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:15:46.033

您正在寻找[`array_merge_recursive`](http://www.php.net/manual/en/function.array-merge-recursive.php)而不是`array_merge`.

```
<?php
$A = Array(00 => "green", 10 => "red", 20 => "yellow");
$B = Array(00 => "avocado", 10 => "apple", 20 => "banana");

$result = array_merge_recursive($A, $B);

print_r($result);?> 
```

[看到它在行动](http://ideone.com/Oewrb)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:17:20.750

试试看：

```
function merge($arr){
$n = array();
if(!empty($arr)){
foreach($arr as $a){
if(!empty($a)){
foreach($a as $k => $v){
$n[$k][] = $v;
}}}}
return $n;
}

// use
$a = array('00' => 'green', '10' => 'red', '20' => 'yellow');
$b = array('00' => 'avocado', '10' => 'apple', '20' => 'apple');
print_r(merge(array($a, $b))); 
```

# bower - 为 bower install repo 分配名称

> ID：15313560
> 
> 赞同：0
> 
> 时间：2013-03-09T17:11:57.367
> 
> 标签：bower

如果我给 bower 一个 url，就像`http://something/this/is/javascript`它很可能会命名 repo一样`javascript`。我的问题是，是否有任何方法可以为类似`bower install http://something/this/is/javascript awesome`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:29:44.880

如果在 Bower 注册表中注册，则可以选择名称：

```
bower register awesome http://website.com/this/is/javascript 
```

# javascript - Express - app.del() 删除所有项目

> ID：15313564
> 
> 赞同：0
> 
> 时间：2013-03-09T17:12:36.003
> 
> 标签：javascript, express, mongoose

我正在使用一个按钮转到删除路线，并向它传递一个键来确定要删除的团队。使用该路线时，它不会只删除一个团队，而是删除所有团队。有任何想法吗？

删除按钮：

```
 button#teamDelete.btn.btn-danger.btn-mini(type="submit", value="Delete Team") Delete
        script(type='text/javascript')
            $('#teamDelete').live('click',function(){ 
                var teamId = #{teamData.key};
                $.post('/team/' + teamId, { _method : 'delete' }, function(response) {
                    console.log(response);
                });
            }); 
```

团队路线：

```
 app.get('/team'/*, lim("Must be logged in to see teams")*/, getAllTeams, function(req, res){
    util.log('Serving request for url [GET] ' + req.route.path);
    // Pass it the list of all Teams
    res.render('team', {'teamsList' : req.teamsList} );
  });

  /**
    * POST /team
    * Save new Team
    */
  app.post('/team', function(req, res) {
    util.log('Serving request for url [POST] ' + req.route.path);

    // Output to console the contents of req.body
    // console.log('body: ', req.body);
    // console.log('body.teamForm: ', req.body.teamForm);
    // console.log('body.teamForm.name: ', req.body.teamForm.name);
    // console.log('body.teamForm.teamKey: ', req.body.teamForm.teamKey);

    // Get data from teamForm
    var teamForm = req.body.teamForm;

    // Save team in teamForm as new Team
    var name = teamForm.name;
    var team = new Team();
    team.name = name;

    // Save new Team to datbase
    team.save(function(err){
      var message = '';
      var retStatus = '';
      // No error - Successful Save
      if(!err){
        util.log('Successfully created new team: ' + name);
        message = 'Successfully created new team: ' + name;
        retStatus = 'success';
      } 
      // Error - Unsuccessful Save, show error
      else {
        util.log('Error while creating team: ' + name + ' error : ' + util.inspect(err));
        if(err.code === 11000){
          message = 'Team already exists';
        }
        retStatus = 'failure';
      }
      // Return whether the Save was successful
      res.json({
        'retStatus' : retStatus,
        'message' : message
      });
    });
  });

  /**
    * GET /team/:key
    * Get Team details by key
    */
  app.get('/team/:key', function(req, res) {
    util.log('Serving request for url [GET] ' + req.route.path);
    Team.findByKey(req.params.key, function(err, teamData){
      if(!err && teamData){
        teamData = teamData;
        res.render('teamDetails', { 'teamData' : teamData } );
      } else {
        util.log('Error in fetching Team by key : ' + req.params.key);
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team by key ' + req.params.key
        });
      }
    });
  });

  /**
    * DEL /team/:key
    * Delete Team by key
    */
  app.del('/team/:key', function(req, res) {
    util.log('Serving request for url [DEL] ' + req.route.path);

    util.log(req.params.key);

    Team.remove(req.params.key, function(err){
      var message = '';
      var retStatus = '';
      if (!err) {
        util.log('Successfully deleting Team with key: ' + req.params.key);
        message = 'Successfully deleting Team with key: ' + req.params.key;
        retStatus = 'Success';
      } else {
        util.log('Error deleting Team with key: ' + req.params.key + 'Error: ' + util.inspect(err));
        res.json({
          'retStatus' : 'failure',
          'msg' : 'Error in fetching Team with key ' + req.params.key
        });
      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:49:33.897

好吧，您没有指出，但我认为`Team`是猫鼬模型，在这种情况下，您没有正确指定`conditions`参数，该参数必须是键/值标准的对象。尝试：

```
Team.remove({key: req.params.key}, function (err) {}); 
```

[http://mongoosejs.com/docs/api.html#model_Model.remove](http://mongoosejs.com/docs/api.html#model_Model.remove)

# actionscript-3 - 动画（淡入淡出）s：纯 Actionscript Flex SDK 中的图像

> ID：15313568
> 
> 赞同：1
> 
> 时间：2013-03-09T17:13:09.733
> 
> 标签：actionscript-3, flex4, flex4.5, fade

我需要对嵌入图像进行简单的淡入淡出效果，但我似乎无法弄清楚。“淡入淡出”和“补间”根本不起作用。似乎 animate 是在最新的 Flex SDK 中使用的效果。

我现在拥有的：

```
[Embed(source="assets/Back.png")]
private static const fullScreen:Class;
private var fullScreenButton:Image;
fullScreenButton = new Image();

fullScreenButton.source = fullScreen;
fullScreenButton.verticalAlign = "top";
fullScreenButton.horizontalAlign = "left";
fullScreenButton.visible = false;
private var animate:Animate
animate = new Animate();

// function is activated when video is loaded.

animate.duration = 2000;
animate.startDelay = 1000;
fullScreenButton.visible = true;
animate.target = fullScreenButton;
animate.play(); 
```

使用此代码没有任何效果。我究竟做错了什么？（这很可能是错误的做法，所以不要假设 animate 是我要专门使用的方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:36:19.467

最后我想通了。Flex 中几乎没有褪色组件的示例，但使用的是纯动作脚本，因此希望这可能对某人有所帮助。

```
private var fade:Fade = new Fade();
fade.target = fullScreenButton;
fade.duration = 1000;
fade.alphaFrom = 1;
fade.alphaTo = 0;

// Call this when want to start the effect.

fade.stop(); // this is recommended to stop previous effects.
fade.play(); 
```

这将在 1 秒内淡出组件（在本例中为图像）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T16:42:04.750

使用 TweenLite，您可以这样做。

[1) 从 Greensock 的网站http://www.greensock.com/tweenlite/](http://www.greensock.com/tweenlite/)下载库文件

2) 将这些文件复制到您的项目文件夹或您的 AS 文件存储库中。

3) 导入语句

```
import com.greensock.TweenLite;
import com.greensock.plugins.AutoAlphaPlugin; 
```

4) 激活 AutoAlpha 插件。autoalpha 所做的不仅仅是补间 alpha 值，它还会在 alpha 为 0 或从 alpha 0 补间时激活/停用可见属性。你可以只补间 alpha，但在你的代码中你确实使用了 visible = false

```
TweenPlugin.activate([AutoAlphaPlugin]); 
```

5) 跳舞

```
TweenLite.to(fullScreenButton,2,{autoAlpha:1,delay:1}); 
```

# javascript - iOS 使用溢出滚动禁用页面滚动：触摸

> ID：15313570
> 
> 赞同：9
> 
> 时间：2013-03-09T17:13:26.487
> 
> 标签：javascript, ios, css, scroll, dom-events

假设我们希望通过“添加到主屏幕”让 Web 应用感觉像原生应用。第一步是禁用默认滚动。容易，对吧？

```
// window or document
window.addEventListener("touchmove", function(event) {
    // no more scrolling
    event.preventDefault();
}, false); 
```

在你加入之前，这一切都很好`overflow-scrolling`。准确地说，在 iOS 上应该是`-webkit-overflow-scrolling: touch`.

```
/* #scrollable happens to be a ul */
#scrollable {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
} 
```

通过添加事件预防，容器中的硬件加速滚动不起作用，显然不是预期的效果。

显而易见的解决方案如下所示：

```
// you could do this for multiple elements, of course
var scrollable = document.querySelector("#scrollable");
scrollable.addEventListener("touchmove", function(event) {
    // no more bubbling :)
    event.stopPropagation();
}, false); 
```

此解决方案引入了一个问题，但是，如果您尝试在 中向左或向右滚动`#scrollable`，它会恢复为默认滚动侦听器。那么，显然，您应该监视事件以查看`touchmove`事件是向左还是向右跟踪，对吗？不幸的是，不，因为在我不完全理解的情况下，它也会在容器中垂直滚动时恢复为默认滚动侦听器。

怎么办？更糟糕的是，理想情况下，我们应该能够处理`click`单个`li`s 上的或类似点击的事件（阅读：）`touchstart`：

```
var items = scrollable.querySelectorAll("#scrollable li");
for (var item = 0; item < items.length; item++) {
    items[item].addEventListener("touchstart", function() {
        // handle the touch start
    }, false);
} 
```

为了解决这个问题，我们可以转向简单地使用`click`事件，但由于点击和响应之间的延迟，这默认了使 web 应用程序“感觉”原生的目标。为了解决这个问题，我们将为 and 添加一个事件监听`touchstart`器`touchend`：

```
var items = scrollable.querySelectorAll("#scrollable li");
var activeItem = null, startTouch = null;
for (var item = 0; item < items.length; item++) {
    items[item].addEventListener("touchstart", function(event) {
        startTouch = event.touches[0];
        activeItem = this;
    }, false);
    items[item].addEventListener("touchend", function(event) {
        var touch = event.changedTouches[0];
        var deltaX = touch.pageX - startTouch.pageX
        var deltaY = touch.pageY - startTouch.pageY;
        // require the touchstart to be within 10 pixels of the touchend
        if (deltaX * deltaX + deltaY * deltaY <= 100)
            // handle "click" event
    }, false);
} 
```

这一切都很好，但是我们仍然没有解决默认页面滚动控制某些`touchmove`事件的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T21:08:41.617

`window`尝试在您的和`scrollable`元素侦听器中交换逻辑，如下所示：

```
// window or document
window.addEventListener("touchmove", function(event) {
  if (!event.target.classList.contains('scrollable')) {
    // no more scrolling
    event.preventDefault();
  }
}, false);

// No special listeners needed on .scrollable elements 
```

这样，您只能在尝试滚动不可滚动元素时阻止默认设置。

您仍然会遇到一个问题，即在可滚动内容的顶部/底部开始拖动可能会导致整个应用程序“弹跳”。要解决此问题，请参阅[Joe Lambert 的 ScrollFix](https://github.com/joelambert/ScrollFix)。

# java - 如何将 HQL 中的引用实体转换为其子类

> ID：15313574
> 
> 赞同：4
> 
> 时间：2013-03-09T17:13:31.183
> 
> 标签：java, hibernate, jpa, hql

假设有以下实体（不写JPA注解）：

```
class Questionnaire {
    ...
}

class Policy {
    private Questionnaire questionnaire;
    ...
}

class LifeQuestionnaire extends Questionnaire {
    private String someField;
}

class LifePolicy extends Policy {  
    ...
} 
```

好吧，政策似乎引用了问卷，但 a`LifePolicy`引用了 a `LifeQuestionnaire`（这个限制总是正确的）。

有什么办法可以编写这样的查询：

```
from LifePolicy lplc
where ((LifeQuestionnaire) lplc.questionnaire).someField = :fieldValue 
```

如您所见，我想在 HQL 查询中进行某种类型的转换，因为`someField`仅在`LifeQuestionnaire`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-19T11:00:39.873

我遇到了完全相同的问题，并找到了适合我的解决方案。它不是很好，但它有效。尝试使用“交叉”连接。例如

```
select (specify what you want to fetch) 
from LifePolicy as lp, LifeQuestionnaire as lqn 
inner join lqn.questionnaire as q 
where lqn.id = lp.id 
and q.someField = :fielfValue 
```

来源：

[https://www.jumpingbean.co.za/blogs/mark/hibernate](https://www.jumpingbean.co.za/blogs/mark/hibernate) [https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-from](https://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-from)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-26T18:04:09.467

如评论中所述：

即使该字段在子类中，您也可以在 HQL 查询中使用它，就像它在基类中一样。我测试了它并且它正在工作。

```
from LifePolicy lplc
where lplc.questionnaire.someFieldInSubclass = :fieldValue 
```

# mysql - 我应该如何在 MySQL 中排列多个表

> ID：15313576
> 
> 赞同：0
> 
> 时间：2013-03-09T17:13:42.867
> 
> 标签：mysql, sql

我正在开发一个网络应用程序，需要一些关于如何组织数据库信息的建议。以下是应用程序将拥有的所有信息的列表：

**1）将有用户存储在这样的表中：**

```
User
 - username (primary key)
 - email 
```

**2）用户可以创建地图（由这样的表格表示）**

```
Map
 - name
 - data 
```

* * *

用户可以创建许多地图

使用 mySQL 数据库，我应该如何实现我上面描述的存储系统：

*   我应该有一张存储所有用户地图的表吗？然后在 Map 表中创建一个新的“用户名”字段。
*   我是否应该为每个只存储该用户地图的新用户创建一个新的地图表。
*   我应该在用户中创建一个新的“地图”字段，然后将其链接到地图表吗？

最后，我希望每个用户只能访问和查看自己的地图集合。我是 mySQL 和数据库设计的新手，因此不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:16:37.727

由于您提到用户可以创建许多地图，我认为您只需要两个表（*每个用户的地图表并不多*）

**用户**

*   用户 ID（*主键*）
*   用户名（*唯一*）
*   电子邮件

**地图**

*   ID（*主键*）
*   姓名
*   日期
*   用户 ID（*外键*）

翻译成 DDL 时：

```
CREATE TABLE User
(
    UserID INT AUTO_INCREMENT,
    UserName VARCHAR(15),
    Email VARCHAR(35),
    CONSTRAINT usr_pk PRIMARY KEY(UserID),
    CONSTRAINT usr_uq UNIQUE(UserName)
);

CREATE TABLE Maps
(
    MapID INT AUTO_INCREMENT,
    Name VARCHAR(20),
    Date DATETIME,
    UserID INT,
    CONSTRAINT map_pk PRIMARY KEY(MapID),
    CONSTRAINT map_FK FOREIGN KEY(UserID) REFERENCES User(UserID)
); 
```

当您想获取所有用户的所有地图时，

```
SELECT  a.*, b.Name
FROM    User a
        INNER JOIN Maps b
            ON a.UserID = b.UserID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:17:08.303

*不要*为地图的每个用户创建一个新表。维持这将是一场噩梦，并且您将失去对标准化的控制。类似的评论适用于第 3 点（`maps`每个用户地图的新列）。

做你的第一点：在*maps*上添加一个用户名列。然后，您可以为地图创建一个表格，并根据需要为每个用户创建任意数量的地图。我会更进一步，添加一个`auto_increment`链接到地图的“用户 ID”列（用户名毕竟可能会改变——并且应该仍然是唯一的）。地图也应该有自己的`auto_increment`标识符列。这称为“代理键”。

```
SELECT data FROM Map JOIN User USING(userID) WHERE userID = ? 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:19:04.750

我得到的最好的数据库设计之一是为每个名词创建一个表（并且是单数）。例如，您正在谈论用户。这意味着您将拥有用户表。然后你有一个地图表来列出所有创建的地图。

然后您在谈论用户之间的关系地图，因此您可以将该表称为 UserMapRelationship 或简称为 UsersMap

这将保存两个表的 pk 以及可能与该关系相关的信息。

希望这有帮助。

谢谢！

@leo。

# git - 在 VCS 下使用相同的工作树/工作副本文件是否有任何可预测的问题：bzr 和 git？

> ID：15313577
> 
> 赞同：0
> 
> 时间：2013-03-09T17:13:48.477
> 
> 标签：git, github, bazaar

即，我想将 .bzr 和 .git 放在同一个 * 文件夹中，并将 git 和 bzr 相互独立地添加/提交/push/pull 到各自的存储库中。我主要担心的是一个人（也许是 bzr）会意识到另一个人的“活动”。

似乎没有问题，但是从已经尝试过的人那里听到，可能会让我更舒服。

*obs.：这与 bzr-git 插件无关，特别是因为“主要”仓库是 bzr，而我的辅助仓库将是 git，因为 github 需要。*

*->“同一文件夹”，实际上是 .git 在子文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:50:04.513

只要您添加`.bzr`, 并使 bazaar 忽略`.git`目录，两个系统都应该可以正常工作。

但是，您应该查看[git-bzr 脚本](https://github.com/termie/git-bzr-ng)（不同于 bzr-git 插件），它显然可以进行双向 git 和 bzr 操作。

# java - 为什么即使在 Spring 服务类的第二个方法中传播 = Propagation.REQUIRES_NEW 也会回滚事务？

> ID：15313579
> 
> 赞同：5
> 
> 时间：2013-03-09T17:13:55.873
> 
> 标签：java, spring, hibernate, dao, transactionmanager

现在基本设置都很好，我开始尝试交易。Struts+Spring+Hibernate注解事务管理器。这是 Action 中的示例代码，将调用一个服务类：

```
 userService.addUser(); 
```

这是`addUser()`服务类中的方法：

```
 @Transactional(value="deu"  )
    public void addUser() {     
        userDao.addUser();
        this.addUser2();

    } 
```

首先，我调用`addUser`了 userDao，它会插入一个用户。其次，我`addUser2`在这个服务类中调用了另一个方法。

```
 @Transactional(value="deu" , propagation=Propagation.REQUIRES_NEW  )
    public void addUser2()   {      
    //should be a new transaction and will not affect the previous one. 
            //this one will fail but should not affect the previous one.
        userDao.addUserFail();        
    } 
```

而这个会因为 PK 无效而失败。我想第二次调用 ( `addUser2`) 会失败，但不会影响前一次调用。但是，没有插入用户。

如果我只打电话：

```
 @Transactional(value="deu"  )
    public void addUser() {     
        userDao.addUser();
        //this.addUser2();      
    } 
```

它正在工作，这意味着数据库等基本设置没有错。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T17:23:45.377

Spring 的声明式事务处理使用 AOP 代理工作。当您获得一个事务性 bean 时，实际上您获得了一个代理，它包装您的 bean 实例，拦截方法调用，必要时启动事务，然后调用实际 bean 的方法，然后在必要时提交或回滚事务。

但是你从同一个 bean 中的另一个方法调用你的 bean 的一个方法，所以代理被绕过，并且不能应用任何事务行为。

将该方法放在另一个 bean 中，或者使用 AspectJ，它检测字节码并可以拦截 bean 内的方法调用。

有关更详细的说明，请参阅[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#aop-understanding-aop-proxies)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T05:23:40.383

我做了一些测试并找到了结论。

1.  如果需要第二个服务（内部）并抛出异常，即使第一个事务捕获它，它们都会回滚（因为它们在同一条船上！）

2.  如果第二个服务（内部）是 REQUIRES_NEW 并抛出异常，外部必须处理这个回滚（这不是我的回滚，但我必须做点什么），如果没有抓住它，这个异常在外部将触发外部回滚（甚至这不是他的例外，但这是一个例外！）。所以外部必须为这种情况做点什么（设置回滚或捕获它）。

这样对吗 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:24:14.763

这是因为 Spring AOP 架构。

Spring AOP 使用代理，所以方面只是在代理上调用方法时执行。

调用时`this.addUser2(...)`，您调用的是 self 对象上的方法，而不是代理。所以没有执行任何方面，也没有进行 TX 管理。

您可以执行以下操作：

*   将该方法移动`addUser2`到另一个 bean（例如`UserService2`），然后将新 bean 注入`UserService`并使用`userService2.addUser2()`.
*   注入（我不确定是否可以完成），并`UserService`使用not调用。`UserService``addUser2()``userService.addUser2()``this.addUser2()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-06T11:11:05.497

正如 Amir Pashazadeh 所说，他不知道如何在同一个 bean 中使用事务上下文调用代理，这里有一个示例：

```
@Component
public class UserService(){     

    @Autowired @Setter private ApplicationContext  applicationContext;
    @Autowired @Setter private UserDao             userDao;

    @Transactional(value="deu"  )
    public void addUser() {     

        userDao.addUser();
        try{
           getProxy().addUser2();
        catch(Exception ex){
           // Avoid rolling back main transaction
           log("OMG it failed!!")
        }
    }

    @Transactional(value="deu" , propagation=Propagation.REQUIRES_NEW  )
    public void addUser2()   {      
    //should be a new transaction and will not affect the previous one. 
            //this one will fail but should not affect the previous one.
        userDao.addUserFail();        
    }

    private UserService getProxy() {
        return applicationContext.getBean(UserService.class); 
    }
} 
```

请注意，如果您在 addUser2 中捕获异常但事务已标记为回滚，则Spring 似乎会抛出[UnexpectedRollbackException 。](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/UnexpectedRollbackException.html)

# c# - DB Access 搜索文本框

> ID：15313582
> 
> 赞同：0
> 
> 时间：2013-03-09T17:14:04.393
> 
> 标签：c#, winforms, ms-access-2007, ms-access-2003

```
StudentID > Number

StudentName > Text

StudentCNIC > Text

StudentDOB > Date/Time 
```

我正在尝试创建一个搜索文本框，结果显示在文本框中。我有一个名为 FindBtn 的按钮，用户可以在其中输入 StudentID、Student Name 或 Student CNCI（只是疼痛号码）。结果随后显示在文本框中...StudIDTb（显示学生 ID）、StudNameTb（显示学生姓名）、StudCNCITb（显示学生 CNCI）和 StudDOBTb（显示学生 DOB）。

我在互联网上看到的很多示例都使用 gridview，但我使用文本框来显示结果。我发现感兴趣的是...

[这里](http://www.c-sharpcorner.com/uploadfile/e628d9/creating-retrieving-records-from-m-s-access-2007-using-oledb-in-C-Sharp-net/) [这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/0265e336-c0b3-4b13-b89f-869a09518182/) 和[这里](http://www.codeproject.com/Articles/8269/How-to-link-to-an-Access-Database-in-a-C-Applicati)[_](http://www.dreamincode.net/forums/topic/115123-how-to-display-row-from-microsoft-access-in-c#/)

```
 public Form1()
    {
        InitializeComponent();
        //Connection String for Access 2003\. 
        myCon = new OleDbConnection(@" Provider=Microsoft.Jet.OLEDB.4.0;Data 
        Source=C....\StudDB.mdb ");
    }

    private void Form1_Load(object sender, EventArgs e)
    {

        this.studentsTableAdapter.Fill(this.studDBDataSet.Students);
    } 
```

在 FindBtn 函数中做了以下......

```
 private void FindBtn_Click(object sender, EventArgs e)
    {
        string title = textBox1.Text.ToString();
        if (title != "")
        {
            string queryString = "SELECT * FROM Students + title;
            //I need help here
            StudIDTb.Text = queryString;
            StudNameTb.Text = queryString;
            StudCNCITb.Text = queryString;
            StudDOBTb.Text = queryString;
        }
        else
            MessageBox.Show("Please try again\nError: ");
    } 
```

结果表明......

```
SELECT *
FROM Students 103 
```

在每个文本框和 exe 冻结，所以显然这是错误的。请有人可以在这里帮助我，在此先感谢。

**更新 1** 我在字符串变量之前包含了 OleDbCommand、CommandType 和打开连接，这可以防止屏幕冻结，但它不能解决问题

**更新 2找到了我喜欢的东西，但在**[这里](http://www.c-sharpcorner.com/uploadfile/e628d9/inserting-images-into-ms-access-file-using-oledb/) 不起作用

**更新 3**

作为C Sharp Corner，请提供一段代码....

```
 private void btnFind_Click(object sender, EventArgs e)
    {
        string title = textBox1.Text.ToString();
        string queryString = "SELECT * FROM Students" + title;
        OleDbCommand command = new OleDbCommand();
        command.CommandText = queryString;

        command.Connection = myCon;
        myCon.Open();

        OleDbDataReader dr = command.ExecuteReader();
        while (dr.Read())
        {
             StudIDTb.Text += String.Format("Student ID:                
             {0}\n",dr["StudID"].ToString());
            StudNameTb.Text += String.Format("StudentName ID: {0}\n", 
            dr["StudentName"].ToString());
            StudCNCITb.Text += String.Format("StudentCNIC: {0}\n", 
            dr["StudentCNIC"].ToString());
            StudDOBTb.Text += String.Format("StudentCNIC: {0}\n", 
            dr["StudentCNIC"].ToString());
        }
        myCon.Close(); 
```

修改格式后收到错误消息....

“Microsoft Jet 数据库引擎找不到输入表或查询‘Students101’。确保它存在并且其名称拼写正确”。

我现在正在查看它以了解它的含义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:52:29.707

这是一个应该工作的示例（如果您包含 oledbcommand、commandtype 等也更新您的代码，以便我们可以看到您所做的更改）：

```
OleDbCommand command = new OleDbCommand();
command.CommandText = queryString;
command.Connection = myCon;
myCon.Open();
OleDbDataReader dr = command.ExecuteReader();
while(dr.Read())
{
   StudIDTb.Text += dr["StudID"].ToString();
   StudNameTb.Text += dr["StudName"].ToString();
   StudCNCITb.Text += dr["StudCNCI"].ToString();
   StudDOBTb.Text += dr["StudDOB"].ToString();
}
myCon.Close(); 
```

# mysql - 在这种情况下实现关系和强制数据库完整性的最佳方法是什么？

> ID：15313587
> 
> 赞同：0
> 
> 时间：2013-03-09T17:14:44.003
> 
> 标签：mysql, database-design, relational-database

我正在使用 CakePHP 2 和 MySQL 创建一个相对简单的应用程序。

对于`Users`此应用程序，主要`Admin`是有权访问管理面板的用户。

然后有`Customers`。`Customers`可以填写注册表。只有在用户`Customer`批准后`Admin`，才会为用户创建用户记录，`Customer`以便客户可以登录。

显然我需要存储`UserID`对`CustomerID`，所以我可以将用户记录与`Customer`记录相关联。

这是否意味着我需要第三张表，其中仅包含`UserID`并且仅在获得批准`CustomerID`后才填充？`Customer`

编辑：只是补充一下，目前，每个“客户”只有 1 个“用户”，所以是 1:1 的关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:52:43.490

如果我正确理解您的问题，您的数据库中已经有两个表：

表`Users`与`UserID, Name, AccessRights`

表`Customers`与`CustomerID, Name, OtherSTuff`

现在您要在这些表之间创建关系。这里要问的问题是：单个客户可能存在多少用户，以及有多少客户可能与任何给定用户相关。

我个人猜测一个客户可能有多个员工访问您的数据库，但每个（非管理员）用户只会与一个客户相关联。这将是一个 1:N 的关系：1 个客户有 N 个用户。要相应地更改数据库模型，您只需要`CustomerID`在表中添加一列`Users`。

如果我的猜测是错误的，并且 1 个用户有 N 个客户：一个用户要访问多个客户，那么`UserID`您的表中需要一列`Customers`。

*您需要第三张*表的唯一时间点是当 N 个客户有 M 个用户时，这意味着：当单个用户可以访问多个客户*并且*单个客户可以被多个用户访问时。

编辑：我完全省略了*和强制数据库完整性*部分。

MySQL 支持一个`FOREIGN KEY`子句——至少在与某些存储引擎（例如 InnoDB）一起使用时，我认为 MyISAM 仍然不支持。外键子句允许该列中的值与外部表中的现有值匹配或匹配`NULL`。如果不需要此行为，则需要将该列声明为`NOT NULL`.

您可以设置您的用户，以便管理员拥有一个`CustomerID`，`NULL`而普通用户拥有该`CustomerID`集合。但是有一个问题：请确保您不要使用该`ON DELETE SET NULL`子句，否则删除客户将使相应的用户成为管理员。改为使用`ON DELETE CASCASE`。

# vb.net - 将文件从桌面应用程序自动上传到网站

> ID：15313592
> 
> 赞同：1
> 
> 时间：2013-03-09T17:15:10.397
> 
> 标签：vb.net, file, select, upload, web

我有一个用vb.net制作的程序，它可以自动填写表格，（我为此使用了setattribute和invokemember（“onchange”）和invokemember（“click”）），我还需要一种方法来上传自动归档，

这是一个asp网站

该网站包含一个按钮。单击它时，会`filebrowserdialog`打开一个，我必须手动选择要上传的文件

使用标准`browsercontrol`显然没有办法绕过`openfilebrowser`窗口上传文件，我需要找到一种方法来选择自动选择文件上传到网站？或者有没有人知道另一种方法？也许与另一个`browsercomponent`？还是通过数据包操作？

完整网站的链接是，[z8games](http://support.z8games.com/webform_new.aspx?gid=)，但您需要帐户才能查看页面，这里是带有 HTML 源代码[mediafire的下载链接](http://www.mediafire.com/?oghwjn3f0wbiw5r)

我不是专业的 vb 程序员，所以如果它是高级的，一些解释会很好

# php - LAMP 服务器上的函数自动加载类错误

> ID：15313595
> 
> 赞同：0
> 
> 时间：2013-03-09T17:15:40.977
> 
> 标签：php, linux, ubuntu

我在 EasyPHP 3.5.9 上开发了我的 php 软件，一切都很完美，现在我在 ubuntu 12.04 x64 上安装了 LAMP。如果我尝试在 ubuntu 上上传我的软件，我会显示一个白页。我查看了 apache 日志，发现了这个错误

**“PHP 致命错误：在 /var/www/xxxx/index.php:7\nstack trace:\n#0 /var/www/xxxx/index.php( 11): __autoload('session')\n#1 {main}"**

```
<?PHP
function __autoload($class_name) {
if(file_exists('class/class.' . $class_name . '.php')) {
    require_once('class/class.' . $class_name . '.php'); 

} else {
    throw new Exception("Unable to load $class_name.");
}
}
$ses = new Session(); 
```

Wuy 它不加载类？LAMP 的配置似乎是正确的。我能忘记什么？我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:30:19.130

这是你可以做的调试它：

1.  尝试打印类名以查看是否将正确的类名传递给函数

    函数 __autoload($class_name) { **echo $class_name;**
    if(file_exists('class/class.' . $class_name . '.php')) {

2.  正如 Ares 所评论的那样，请注意您并没有尝试打开 class.Session.php 而真实名称是 class.session.php 因为这在某些系统上是不同的。

3.  尝试使用修剪功能删除类名之前或之后的任何空格。

    函数 __autoload($class_name) { **echo $class_name;** 修剪（$class_name）；
    if(file_exists('class/class.' . $class_name . '.php')) {

# codeigniter - codeigniter datamapper orm的模型生成器

> ID：15313597
> 
> 赞同：1
> 
> 时间：2013-03-09T17:15:54.423
> 
> 标签：codeigniter, codeigniter-2, codeigniter-datamapper

我是 datamapper orm 的新手，所以首先我决定为它创建一个模型生成器，以便以后可以轻松地生活。

首先，我创建了一个干净的 ci-2 文件夹。在控制器/welcome.php 中我写了

```
public function index()
{
    $this->output->enable_profiler(TRUE);
    $this->load->helper('inflector');
    $this->load->helper('file');
    echo "<pre>";

    //list alll tables in database
$tables = $this->db->list_tables();

    //grap all relations for database 'clinic-master'

    $relations=$this->db->query("SELECT table_name, column_name,REFERENCED_TABLE_NAME,REFERENCED_COLUMN_NAME
    FROM INFORMATION_SCHEMA.key_column_usage
    WHERE referenced_table_schema = 'clinic-master'
    ORDER BY table_name, column_name");

    ///looping tables
    foreach ($tables as $table){
        $x=$this->load->view('db',['table'=>$table,'fields'=>$this->db->list_fields($table)
        ,'relations'=>$relations],TRUE);

        if(write_file("./application/models/dm/$table.php", $x))
                echo "<hr><h1>$table</h1><code>$x</code>";
        else
                echo "<hr><h1>$table</h1><code>Failed to write file</code>";
    }
} 
```

和views/db.php 包括

```
<?$t=singular($table);echo"<?php";?>

class <?=$t?> extends DataMapper {

    public $table = '<?=$table?>';
    /*
    <?print_r($relations->result());?>
    */

    public $has_one = array();
    public $has_many = array();

    var $validation = array(
    <?$x='';foreach($fields as $f){
        $x.="'$f' => array(
            'rules' => array('required'),
            'label' => '<?=$f?>'
        ),";
    }
    echo trim($x,',');
    ?>
    );

    public $default_order_by = array('id' => 'desc');

    // Optionally, don't include a constructor if you don't need one.
    function __construct($id = NULL)
    {
        parent::__construct($id);
    }

    // Optionally, you can add post model initialisation code
    function post_model_init($from_cache = FALSE)
    {
    }
}

/* End of file <?=$t?>.php */
/* Location: ./application/models/<?=$t?>.php */ 
```

现在我坚持如何回显 has_one 和 has_many ！

这是我从 $relations 查询中得到的示例。

![在此处输入图像描述](../Images/f9a398e6f7cc5d950adc3ccaab9933de.png)

示例第一行显示说库存有一个诊所参考表诊所，而表诊所也有很多库存..（模型诊所，库存）

所以我循环了 $relations 并以表 inventroy 为例（前 2 行）是

```
public $has_one = array(
    'clinic' => array(
        'class' => 'clinic',
        'other_field'=>'clinic',
        join_other_as=>'id'
        ),
    'code' => array(
        'class' => 'inventory_item',
        'other_field'=>'code',
        join_other_as=>'id'
        )
); 
```

架构::

```
inventroy:id,code(fk),clinic(fk),amount

clinics : id,name

inventory_item:id,name,min_amount,etc....

code->inventory_item.id
clinic->clinics.id 
```

**问题**

1.  除了 class 之外，我还应该在 $has_one 数组中包含什么以确保它有效？
2.  有什么已经存在的东西可以完成这项工作吗？
3.  [除了wanwizard guide](http://datamapper.wanwizard.eu/pages/advancedrelations.html#)之外，还有其他人使用 datamapper 解释高级关系的任何其他来源吗？因为我不能很好地理解它，特别是它只包含代码而没有可比较的表模式。

# android - 如何在后台堆栈中正确保存 Fragments 的实例状态？

> ID：15313598
> 
> 赞同：529
> 
> 时间：2013-03-09T17:15:59.167
> 
> 标签：android, android-fragments

我在 SO 上发现了许多类似问题的实例，但遗憾的是没有答案符合我的要求。

我有不同的纵向和横向布局，并且我正在使用后堆栈，这既阻止我`setRetainState()`使用配置更改例程，又会欺骗我使用配置更改例程。

我在 TextViews 中向用户显示某些信息，这些信息不会保存在默认处理程序中。仅使用活动编写我的应用程序时，以下内容运行良好：

```
TextView vstup;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.whatever);
    vstup = (TextView)findViewById(R.id.whatever);
    /* (...) */
}

@Override
public void onSaveInstanceState(Bundle state) {
    super.onSaveInstanceState(state);
    state.putCharSequence(App.VSTUP, vstup.getText());
}

@Override
public void onRestoreInstanceState(Bundle state) {
    super.onRestoreInstanceState(state);
    vstup.setText(state.getCharSequence(App.VSTUP));
} 
```

使用`Fragment`s，这仅适用于非常特定的情况。具体来说，最糟糕的是替换片段，将其放入后堆栈，然后在显示新片段时旋转屏幕。据我了解，旧片段在被替换时不会收到调用，但会以`onSaveInstanceState()`某种方式与`Activity``View``TextView``NullPointerException`

另外，我发现使用 s 保留对 my 的引用`TextViews`并不是一个好主意`Fragment`，即使使用`Activity`'s 也可以。在这种情况下，实际上保存了状态，但是如果我在隐藏片段时`onSaveInstanceState()`旋转屏幕*两次*`onCreateView()`，问题会再次出现，因为它不会在新实例中被调用。

我想将状态保存`onDestroyView()`到某个`Bundle`-type 类成员元素中（实际上是更多数据，而不仅仅是一个`TextView`）并将其保存在*其中*`onSaveInstanceState()`，但还有其他缺点。*首先，如果*当前显示片段，调用这两个函数的顺序是相反的，所以我需要考虑两种不同的情况。必须有一个更清洁和正确的解决方案！

* * *

## 回答 #1

> 赞同：575
> 
> 时间：2013-06-16T16:24:39.263

要正确保存`Fragment`您的实例状态，应执行以下操作：

**1.**在片段中，通过覆盖`onSaveInstanceState()`和恢复来保存实例状态`onActivityCreated()`：

```
class MyFragment extends Fragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        ...
        if (savedInstanceState != null) {
            //Restore the fragment's state here
        }
    }
    ...
    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        //Save the fragment's state here
    }

} 
```

**2.****重要**的是，在活动中，您必须将片段的实例保存在`onSaveInstanceState()`并恢复`onCreate()`。

```
class MyActivity extends Activity {

    private MyFragment 

    public void onCreate(Bundle savedInstanceState) {
        ...
        if (savedInstanceState != null) {
            //Restore the fragment's instance
            mMyFragment = getSupportFragmentManager().getFragment(savedInstanceState, "myFragmentName");
            ...
        }
        ...
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);

        //Save the fragment's instance
        getSupportFragmentManager().putFragment(outState, "myFragmentName", mMyFragment);
    }

} 
```

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2013-03-09T18:43:51.960

## 这是一个非常古老的答案。

#### 我不再为 Android 编写代码，因此无法保证最新版本的功能，也不会对其进行任何更新。

这就是我现在使用的方式......它非常复杂，但至少它处理了所有可能的情况。万一有人感兴趣。

```
public final class MyFragment extends Fragment {
    private TextView vstup;
    private Bundle savedState = null;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.whatever, null);
        vstup = (TextView)v.findViewById(R.id.whatever);

        /* (...) */

        /* If the Fragment was destroyed inbetween (screen rotation), we need to recover the savedState first */
        /* However, if it was not, it stays in the instance from the last onDestroyView() and we don't want to overwrite it */
        if(savedInstanceState != null && savedState == null) {
            savedState = savedInstanceState.getBundle(App.STAV);
        }
        if(savedState != null) {
            vstup.setText(savedState.getCharSequence(App.VSTUP));
        }
        savedState = null;

        return v;
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
        savedState = saveState(); /* vstup defined here for sure */
        vstup = null;
    }

    private Bundle saveState() { /* called either from onDestroyView() or onSaveInstanceState() */
        Bundle state = new Bundle();
        state.putCharSequence(App.VSTUP, vstup.getText());
        return state;
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        /* If onDestroyView() is called first, we can use the previously savedState but we can't call saveState() anymore */
        /* If onSaveInstanceState() is called first, we don't have savedState, so we need to call saveState() */
        /* => (?:) operator inevitable! */
        outState.putBundle(App.STAV, (savedState != null) ? savedState : saveState());
    }

    /* (...) */

} 
```

**或者**，始终可以将数据显示在`View`变量中的被动 s 中，并`View`仅使用 s 来显示它们，从而使两者保持同步。不过，我不认为最后一部分很干净。

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2014-10-06T21:32:15.427

在最新的支持库中，这里讨论的解决方案都不再需要了。您可以随意`Activity`使用`FragmentTransaction`. 只需确保可以使用 id 或标签来识别您的片段。

只要您不尝试在每次调用`onCreate()`. 相反，您应该检查 if `savedInstanceState`is not null 并在这种情况下找到对已创建片段的旧引用。

这是一个例子：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
        myFragment = MyFragment.newInstance();
        getSupportFragmentManager()
                .beginTransaction()
                .add(R.id.my_container, myFragment, MY_FRAGMENT_TAG)
                .commit();
    } else {
        myFragment = (MyFragment) getSupportFragmentManager()
                .findFragmentByTag(MY_FRAGMENT_TAG);
    }
...
} 
```

但是请注意，当前在恢复片段的隐藏状态时存在[错误。](https://code.google.com/p/android/issues/detail?id=67482)如果您在活动中隐藏片段，则在这种情况下您需要手动恢复此状态。

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-11-02T16:56:16.157

我只想提供我想出的解决方案，它可以处理我从 Vasek 和 devconsole 派生的这篇文章中提出的所有案例。此解决方案还可以处理手机多次旋转而片段不可见的特殊情况。

这是我存储包以供以后使用，因为 onCreate 和 onSaveInstanceState 是在片段不可见时进行的唯一调用

```
MyObject myObject;
private Bundle savedState = null;
private boolean createdStateInDestroyView;
private static final String SAVED_BUNDLE_TAG = "saved_bundle";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        savedState = savedInstanceState.getBundle(SAVED_BUNDLE_TAG);
    }
} 
```

由于在特殊的旋转情况下不调用destroyView，我们可以确定如果它创建了我们应该使用它的状态。

```
@Override
public void onDestroyView() {
    super.onDestroyView();
    savedState = saveState();
    createdStateInDestroyView = true;
    myObject = null;
} 
```

这部分是一样的。

```
private Bundle saveState() { 
    Bundle state = new Bundle();
    state.putSerializable(SAVED_BUNDLE_TAG, myObject);
    return state;
} 
```

现在**这**是棘手的部分。在我的 onActivityCreated 方法中，我实例化了“myObject”变量，但旋转发生在 onActivity 并且 onCreateView 不会被调用。因此，当方向旋转不止一次时，myObject 在这种情况下将为空。我通过重用保存在 onCreate 中的同一个包作为输出包来解决这个问题。

```
 @Override
public void onSaveInstanceState(Bundle outState) {

    if (myObject == null) {
        outState.putBundle(SAVED_BUNDLE_TAG, savedState);
    } else {
        outState.putBundle(SAVED_BUNDLE_TAG, createdStateInDestroyView ? savedState : saveState());
    }
    createdStateInDestroyView = false;
    super.onSaveInstanceState(outState);
} 
```

现在无论您想恢复状态，只需使用 savedState 包

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    ...
    if(savedState != null) {
        myObject = (MyObject) savedState.getSerializable(SAVED_BUNDLE_TAG);
    }
    ...
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-08-27T22:26:14.230

感谢[DroidT](https://stackoverflow.com/users/1196031/droidt)，我做到了：

我意识到如果 Fragment 不执行 onCreateView()，它的视图就不会被实例化。因此，如果返回堆栈上的片段没有创建它的视图，我会保存最后存储的状态，否则我会使用我想要保存/恢复的数据构建我自己的包。

1）扩展这个类：

```
import android.os.Bundle;
import android.support.v4.app.Fragment;

public abstract class StatefulFragment extends Fragment {

    private Bundle savedState;
    private boolean saved;
    private static final String _FRAGMENT_STATE = "FRAGMENT_STATE";

    @Override
    public void onSaveInstanceState(Bundle state) {
        if (getView() == null) {
            state.putBundle(_FRAGMENT_STATE, savedState);
        } else {
            Bundle bundle = saved ? savedState : getStateToSave();

            state.putBundle(_FRAGMENT_STATE, bundle);
        }

        saved = false;

        super.onSaveInstanceState(state);
    }

    @Override
    public void onCreate(Bundle state) {
        super.onCreate(state);

        if (state != null) {
            savedState = state.getBundle(_FRAGMENT_STATE);
        }
    }

    @Override
    public void onDestroyView() {
        savedState = getStateToSave();
        saved = true;

        super.onDestroyView();
    }

    protected Bundle getSavedState() {
        return savedState;
    }

    protected abstract boolean hasSavedState();

    protected abstract Bundle getStateToSave();

} 
```

2）在你的片段中，你必须有这个：

```
@Override
protected boolean hasSavedState() {
    Bundle state = getSavedState();

    if (state == null) {
        return false;
    }

    //restore your data here

    return true;
} 
```

3）比如可以在onActivityCreated中调用hasSavedState：

```
@Override
public void onActivityCreated(Bundle state) {
    super.onActivityCreated(state);

    if (hasSavedState()) {
        return;
    }

    //your code here
} 
```

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2016-12-21T06:45:31.127

```
final FragmentTransaction ft = getFragmentManager().beginTransaction();
ft.hide(currentFragment);
ft.add(R.id.content_frame, newFragment.newInstance(context), "Profile");
ft.addToBackStack(null);
ft.commit(); 
```

# c - string 和 char* 的错误比较

> ID：15313603
> 
> 赞同：2
> 
> 时间：2013-03-09T17:16:22.173
> 
> 标签：c, string, string-comparison

我的程序从端口获取输入，然后我发送这个字符串以检查几个字符串。我首先尝试比较 java 风格，只使用“myString”，但比较时我得到了 13（十三）。我以为是因为我应该使用 char 指针，但我仍然得到 13。然后我看到缓冲区是用新行传递的，所以我添加了 \n 但我得到了 3（三）。从这里我不知道如何将它减少到 0。它必须是我传递字符串的方式。

获取字符串：

```
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) 
    error("ERROR reading from socket");
printf("String at start: %s",buffer);
testingMethod(buffer); 
```

测试方法是：

```
void testingMethod(char *string) {
    char *button = "mystring";
    printf("myString: %s-", string);
    printf("strcmp: %i", strcmp(myString,button));
...
} 
```

输出：

```
String at start: mystring
string: mystring
-strcmp: 13 //NOTE the - on the nextline. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:17:36.617

您的字符串中还有一个换行符 ( `'\n'`)。你只需要删除它：

```
#include <string.h>

/* Gets a pointer to the last newline character in the string. */
char *pend=strrchr(string, '\n');

/* Avoids the undefined behavior by checking pend against NULL. */
if(pend!=NULL) *pend='\0'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:18:13.110

13 是 的 ASCII 值`'\r'`，因此您有一个尾随回车符。您可以添加一个`'\r'`- 并且很可能还有一个`'\n'`- 到一个，

```
char *button = "mystring\r\n"; 
```

或将其从另一个中删除以在比较时获得相等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:27:12.910

在 gdb 中运行您的程序，并在 strcmp 行上打断，然后您可以执行 print /x myString 和 print /x button 并直观地比较两者。会有区别。

# javascript - IE8 和本地存储支持

> ID：15313606
> 
> 赞同：4
> 
> 时间：2013-03-09T17:16:23.723
> 
> 标签：javascript, html, local-storage

我不确定 IE8 是否完全支持 localStorage。但是我用下面的方法来检测

```
function supports_html5_storage() 
{
    try { 
    return 'localStorage' in window && window['localStorage'] !== null; 
    } 
    catch (e) {
    return false; 
    } 
} 
```

现在 IE 在窗口中为“localStorage”返回 true

但为 window['localStorage'] 返回 undefined

那么我应该更新这个方法还是 IE8 确实有本地存储支持？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T19:17:30.327

您可以尝试设置和读取localStorage。

如果禁用 cookie 或您正在使用 file: 协议，某些浏览器会返回安全错误。

```
function hasStorage(){
    try{
        localStorage.setItem('test', '7');
        if(localStorage.getItem('test')=== '7'){
            localStorage.removeItem('test');
            return true;
        }
    }
    catch(er){}
    return false;
} 
```

**警报（有存储（））**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-16T13:02:50.803

这是一个著名的localStorage 插件 [https://github.com/marcuswestin/store.js/](https://github.com/marcuswestin/store.js/) 你可以很容易地添加、编辑和删除数据，最重要的是你可以在IE6+ 中使用localstorage。

store.js 在可用时使用 localStorage，并回退到 IE6 和 IE7 中的 userData 行为。没有闪光灯来减慢您的页面加载速度。没有 cookie 来增加您的网络请求。前任 ：

```
store.set('user', { name: 'marcus', likes: 'javascript' }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-17T13:34:00.487

您可以使用[Modernizr](http://modernizr.com/)：

```
if (Modernizr.localstorage) {
  // localStorage is available
} 
```

# android - 如何在 Webview(android) 中播放网络流媒体 .mp3 文件

> ID：15313614
> 
> 赞同：1
> 
> 时间：2013-03-09T17:17:10.440
> 
> 标签：android, webview, streaming, mp3

所以我需要播放在互联网上流式传输的音频。对于我的安卓应用。我正在使用 webview，但不知道该怎么做。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T16:24:11.117

// 在 API 级别 8 中添加 mWebView.getSettings().setPluginState(WebSettings.PluginState.ON);

此方法在 API 级别 18 中已弃用。将来将不支持插件，并且不应使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:30:14.330

您只需要启用 webview 的插件，如下所示：

```
WebView mWebView = (WebView) findViewById(R.id.WebView01);
mWebView.getSettings().setPluginsEnabled(true);

// Added in API level 8
mWebView.getSettings().setPluginState(WebSettings.PluginState.ON); 
```

[Android 文档 WebSettings.PluginState](http://developer.android.com/reference/android/webkit/WebSettings.PluginState.html)

但使用原生播放器可能会更好，如下所示：

*   [使用 MediaPlayer 从 Android 中的 URL 流式传输音频？](https://stackoverflow.com/questions/1965784/streaming-audio-from-a-url-in-android-using-mediaplayer)

**Android 支持的媒体格式：http:** [//developer.android.com/guide/appendix/media-formats.html](http://developer.android.com/guide/appendix/media-formats.html)

* * *

（离线媒体播放器相关链接）

*   [http://www.hrupin.com/2010/12/simple-android-mp3-media-player](http://www.hrupin.com/2010/12/simple-android-mp3-media-player)
*   [http://android-er.blogspot.gr/2010/07/play-mp3-in-sd-card-using-androids.html](http://android-er.blogspot.gr/2010/07/play-mp3-in-sd-card-using-androids.html)
*   [Android：点击 TextView 从原始资源播放 mp3 文件](https://stackoverflow.com/questions/5466882/android-play-mp3-file-from-raw-resource-on-click-of-a-textview)

# jquery - JQuery UI 选项卡背景颜色

> ID：15313615
> 
> 赞同：9
> 
> 时间：2013-03-09T17:17:14.027
> 
> 标签：jquery, jquery-ui, background-color, jquery-ui-tabs

我正在尝试更改选项卡区域的背景。例如，您有一个选项卡列表，我知道如何更改每个选项卡的颜色，但我想知道您是否可以更改背景的颜色所有的。通常它是深灰色，标签是浅灰色。我想将这些颜色更改为浅蓝色或浅绿色，并且我尝试更改我能找到的与 UI 选项卡相关的所有内容的 CSS，但它们都不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-09T21:20:36.193

你想改变`.ui-tabs .ui-tabs-nav`。

CSS：

```
.ui-tabs .ui-tabs-nav
{
background: lightblue;
}

.ui-tabs .ui-tabs-panel /* just in case you want to change the panel */
{
background: blue;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T21:02:29.447

您也可以通过设置 div 的背景来做到这一点。下面是示例 -->

```
<div id="tabs" style="background: none repeat scroll 0% 0% rgb(204, 204, 204);">
 <ul>
      <li><a href="#tabs-1">Product-Tweets</a></li>
      <li><a href="#tabs-2">Popular Product</a></li>
 </ul>
 <div id="tabs-1"> tab 1 content </div>
 <div id="tab-2"> tab 2 content </div>
</div> 
```

# c# - 如何正确使用Task.ContinueWith？

> ID：15313616
> 
> 赞同：15
> 
> 时间：2013-03-09T17:17:15.137
> 
> 标签：c#, .net, task-parallel-library

我在尝试测试 TPL 时遇到了一个简单的问题。例如，我想在控制台窗口中获取数字（从 1 到 1000）。

这是我拥有的代码：

```
class Program
{
    static void Main(string[] args)
    {
        Task.Factory.StartNew(Calculate).ContinueWith(task =>
                                                          {
                                                              Task.WaitAll();
                                                              Console.ReadKey();
                                                          });

    }

    private static void Calculate()
    {
        for (var number = 0; number < 1000; number++)
        {
            Console.WriteLine(number);
        }
    }
} 
```

问题是窗口刚刚关闭，它没有显示任何内容。我知道我在 ContinueWith 方法中搞砸了。我怀疑 ContinueWith 没有被执行（因为窗口在没有我输入的情况下关闭）但我不知道为什么。

任何建议都有帮助（尝试阅读 MSDN 但无济于事）。提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-09T17:25:10.950

继续异步运行。如果你做一个小测试：

```
public static void Main(string[] args)
{
    Task.Factory.StartNew(Calculate).ContinueWith(task =>
                                                      {
                                                          Console.WriteLine("Finished!");
                                                      });
    Console.WriteLine("Press ENTER to close...");
    Console.ReadLine();
} 
```

你会看到的

> 按 ENTER 关闭...
> 
> 1
> 
> 2
> 
> 3
> 
> ...
> 
> 999
> 
> 完成的！

因为延续不会阻塞。

如果要阻塞主执行线程等待任务，可以这样做：

```
var task = Task.Factory.StartNew(Calculate);
task.Wait(); 
```

它会阻止`Wait`。

# php - Unicode 在我的页面中未正确显示

> ID：15313623
> 
> 赞同：1
> 
> 时间：2013-03-09T17:17:50.647
> 
> 标签：php, html, unicode, character-encoding

在我的 html5 页面中，大约 80% 的字符串是 unicode。与我的本地服务器完美配合。上传到我的在线服务器时，页面未正确显示 unicode 内容。相反，它们都是问号！

当我开始对页面进行编码时，我已经设置了元标记：

```
<meta charset="UTF-8"> 
```

在检查 Chrome 浏览器上收到的响应标头时，“utf-8”编码不存在。所以我添加了 php`header()`来发送 HTTP 标头，如下所示：

```
header('Content-type: text/html; charset=utf-8'); 
```

现在，响应标头显示 utf-8 编码，但页面未呈现 unicode 字符串。还是它的问号！

我使用了我的 cPanel（在线服务器）中的文件管理器，当我选择在线编辑页面时，它会打开 utf-8 编码的页面并完美呈现！所以，这意味着文件的上传没有搞砸。正确的 ？

我也试过这个元标记（替换短的）：

```
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'> 
```

还是没用！Unicode 内容不是来自数据库。它在页面上是完全硬编码的。

使用 Google Chrome、Firefox 和 Internet Explorer 测试。都显示一样！关于我应该在哪里调整的任何想法？

我的服务器是 HostGator 提供的 VPS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:01:42.597

该解决方案由 Lisa Miskovsky 提供（在这篇文章的上方/下方查看她的答案）。谢谢丽莎。

我所做的是，通过转到`Encoding`菜单栏然后`UTF-8 Without BOM`在我的 Notepad++ 编辑器中选择 Encoding in 来更改编码。现在也不需要显式发送 HTTP 标头（刚刚测试过）。我认为，由于缺少 HTTP 标头，它会考虑 charset 的元标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:21:24.450

不确定它是否有效，但您也可以尝试将文件编码转换为 UTF-8（无 BOM）。

# prolog - 编写一个显示 M*N 星号网格的 prolog 程序？

> ID：15313626
> 
> 赞同：1
> 
> 时间：2013-03-09T17:18:17.410
> 
> 标签：prolog

我需要编写一个递归谓词`rectangle`，以便`rectangle(M, N)`写出一个星号大小的实心矩形`M x N`，即矩形中应该有`M`行和`N`列。例如：

```
?- rectangle(3,8).
********
********
********
true 
```

到目前为止，我有在一行上`line`打印`N`星号的语句：

```
line(0).
line(N) :- write('*'), A is N-1 , line(A). 
```

我已经尝试了一切，但我不断得到无限的星号网格。这是我到目前为止所得到的：

```
rectangle(0,0).
rectangle(M,N) :-
    line(M),
    write('*'), nl, A is N-1, line(A-1),
    rectangle(M,A). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:24:21.343

我知道您的作业需要一个递归过程，那么您不应该将此视为答案。但我想展示一个可能的简洁解决方案，使用元谓词：

```
loop_n(P, N) :- forall(between(1, N, _), P).
rectangle(R, C) :- loop_n((loop_n(write(*), C), nl), R). 
```

不是每个 Prolog 都支持调用变量。例如，在我的旧 Prolog 解释器中，我会写`loop_n(P, N) :- forall(between(1, N, _), call(P)).`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-25T14:22:25.030

获得无限的星号网格是因为您尚未定义矩形（M，0）。所以，代码应该如下：

```
rectangle(0,0).
rectangle(M,0).
rectangle(M,N) :-
    line(M),nl, A is N-1, rectangle(M,A).
line(0).
line(B) :- write('*'), Z is B-1 , line(Z). 
```

# php - Magento 值在更新后变为双倍

> ID：15313631
> 
> 赞同：2
> 
> 时间：2013-03-09T17:18:47.650
> 
> 标签：php, magento-1.7

我正在做一个扩展。在这个扩展中，我需要更新总计。

例如，如果`subtotal=$4`和`discount_amount=$1`，授权总数将为`$3`。我的问题是，当我执行计算时，折扣价变成了两倍。

```
class PunchTab_Points_Model_Total_Calcdiscount extends Mage_Sales_Model_Quote_Address_Total_Abstract {
    public function collect(Mage_Sales_Model_Quote_Address $address) {
        $session = 2;
        //$session=   Mage::getSingleton('core/session')->getMyValue();
        if (isset($session)) {
            $total_discount = $session;
            //Mage::helper('core')->currency($total_discount, true, false);
            $address - > setCalcdiscountAmount((float) $total_discount);
            $address - > setGrandTotal(($address - > getGrandTotal() - $address - > getCalcdiscountAmount()));
            $address - > setBaseGrandTotal(($address - > getBaseGrandTotal() - $address - > getCalcdiscountAmount()));
            return $this;
        }
    }
    public function fetch(Mage_Sales_Model_Quote_Address $address) {
        $amt = $address - > getCalcdiscountAmount();
        if ($address - > getCalcdiscountAmount() > 0) {
            $address - > addTotal(array('code' => $this - > getCode(), 'title' => Mage :: helper('sales') - > __('Reward Discount'), 'value' => -$amt,));
        }
        return $this;
    }
} 
```

此时，折扣/会话价值变为两倍。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-21T09:51:47.403

你不能做一个快速修复，例如；

```
$subtotal = 4
$discount_amount= 1

$temp_discount_amount = $discount_amount % 2

$discount_amount = $temp_discount_amount 
```

输出将是您双倍金额的一半，这将是您的预期折扣。我知道这是一个简单的修复，但应该可以。

# android - SimpleCursorAdapter.ViewBinder 文本未显示

> ID：15313643
> 
> 赞同：0
> 
> 时间：2013-03-09T17:19:50.607
> 
> 标签：android, simplecursoradapter, android-viewbinder

我一直在处理一个问题，我找不到解决方案。

我有一个数据库，我使用**SimpleCursorAdapter**加载一个列表视图。

**我想根据数据库中列的值（“incOrExp”）更改文本的颜色。**

这是我的清单项目：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:layout_margin="10dp"
android:background="#afeeee" >

<TextView 
android:id="@+id/incomeTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_alignParentLeft="true"
android:paddingTop="5dp"
android:paddingLeft="20dp"
android:paddingBottom="2dp"
android:textSize="20sp"
android:textColor="#b22222" />

<TextView
android:id="@+id/amountTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_toLeftOf="@+id/currencyTextView"
android:paddingTop="10dp"
android:paddingRight="5dp"
android:paddingBottom="5dp"
android:textColor="#0000cd"
android:textSize="20sp" />

<TextView
android:id="@+id/currencyTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:layout_alignParentTop="true"
android:paddingTop="10dp"
android:paddingRight="20dp"
android:paddingBottom="5dp"
android:textColor="#0000cd"
android:textSize="20sp"
android:text="€" />

<TextView
android:id="@+id/dateTextView"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/incomeTextView"
android:layout_alignParentLeft="true"
android:layout_alignParentBottom="true"
android:paddingTop="2dp"
android:paddingLeft="20dp"
android:paddingBottom="5dp"
android:textColor="#0000cd"
android:textSize="12sp" />

</RelativeLayout> 
```

我想使用 SimpleCursorAdapter.ViewBinder()更改 (TextView) **amountTextView的颜色**

这是我的代码：

```
 String[] from = new String[] {"inCategory","inAmount","inDateFormat"}; 
    int[] to = new int[] { R.id.incomeTextView, R.id.amountTextView, R.id.dateTextView}; 

    incomeAdapter = new SimpleCursorAdapter (this, R.layout.income_list_item, null, from, to);

    incomeAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
          if (view.getId() == R.id.amountTextView)
            { 
              int incOrExpIndex = cursor.getColumnIndex("incOrExp");
              int incOrExp = cursor.getInt(incOrExpIndex);
              if (incOrExp==1) {
              TextView tvColor = (TextView)view;
              tvColor.setTextColor(Color.YELLOW);
              }
              else {
                  TextView tvColor = (TextView)view.findViewById(R.id.amountTextView);
                  tvColor.setTextColor(Color.RED);
              }
             return true;

        }
          return false;}

    });

    incomeListView.setAdapter(incomeAdapter); 
```

我的错在哪里？

先感谢您..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:01:40.620

我已经找到答案了...

我必须设置颜色，然后我也必须设置文本....

```
incomeAdapter.setViewBinder(new SimpleCursorAdapter.ViewBinder() {
        public boolean setViewValue(View view, Cursor cursor, int columnIndex) {
          if (view.getId()==R.id.amountTextView)
            { 
              int incOrExpIndex = cursor.getColumnIndex("incOrExp");
              int incOrExp = cursor.getInt(incOrExpIndex);

            switch(incOrExp) {
                case 0: 
                    TextView tv0 = (TextView)view;
                    tv0.setTextColor(Color.BLUE);
                    tv0.setText(cursor.getString(cursor.getColumnIndex("inAmount")));
                    break;
                case 1: 
                    TextView tv1 = (TextView)view;
                    tv1.setTextColor(Color.RED);
                    tv1.setText(cursor.getString(cursor.getColumnIndex("inAmount")));
                    break;
              }
             return true;

        }
          return false;}
    }); 
```

我要感谢那些试图解决这个问题的人......

# c++ - 快速计算两个数组之间相等的字节数

> ID：15313646
> 
> 赞同：11
> 
> 时间：2013-03-09T17:20:12.407
> 
> 标签：c++, c, sse, simd, sse2

我编写函数`int compare_16bytes(__m128i lhs, __m128i rhs)`是为了使用 SSE 指令比较两个 16 字节数：该函数返回执行比较后有多少字节相等。

现在我想使用上面的函数来比较任意长度的两个字节数组：长度可能不是 16 字节的倍数，所以我需要处理这个问题。我怎样才能完成下面功能的实现？我怎样才能改进下面的功能？

```
int fast_compare(const char* s, const char* t, int length)
{
    int result = 0;

    const char* sPtr = s;
    const char* tPtr = t;

    while(...)
    {
        const __m128i* lhs = (const __m128i*)sPtr;
        const __m128i* rhs = (const __m128i*)tPtr;

        // compare the next 16 bytes of s and t
        result += compare_16bytes(*lhs,*rhs);

        sPtr += 16;
        tPtr += 16;
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T21:50:20.340

正如@Mysticial 在上面的评论中所说，进行比较和垂直求和，然后在主循环结束时水平求和：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <emmintrin.h>

// reference implementation
int fast_compare_ref(const char *s, const char *t, int length)
{
    int result = 0;
    int i;

    for (i = 0; i < length; ++i)
    {
        if (s[i] == t[i])
            result++;
    }
    return result;
}

// optimised implementation
int fast_compare(const char *s, const char *t, int length)
{
    int result = 0;
    int i;

    __m128i vsum = _mm_set1_epi32(0);
    for (i = 0; i < length - 15; i += 16)
    {
        __m128i vs, vt, v, vh, vl, vtemp;

        vs = _mm_loadu_si128((__m128i *)&s[i]); // load 16 chars from input
        vt = _mm_loadu_si128((__m128i *)&t[i]);
        v = _mm_cmpeq_epi8(vs, vt);             // compare
        vh = _mm_unpackhi_epi8(v, v);           // unpack compare result into 2 x 8 x 16 bit vectors
        vl = _mm_unpacklo_epi8(v, v);
        vtemp = _mm_madd_epi16(vh, vh);         // accumulate 16 bit vectors into 4 x 32 bit partial sums
        vsum = _mm_add_epi32(vsum, vtemp);
        vtemp = _mm_madd_epi16(vl, vl);
        vsum = _mm_add_epi32(vsum, vtemp);
    }

    // get sum of 4 x 32 bit partial sums
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
    result = _mm_cvtsi128_si32(vsum);

    // handle any residual bytes ( < 16)
    if (i < length)
    {
        result += fast_compare_ref(&s[i], &t[i], length - i);
    }

    return result;
}

// test harness
int main(void)
{
    const int n = 1000000;
    char *s = malloc(n);
    char *t = malloc(n);
    int i, result_ref, result;

    srand(time(NULL));

    for (i = 0; i < n; ++i)
    {
        s[i] = rand();
        t[i] = rand();
    }

    result_ref = fast_compare_ref(s, t, n);
    result = fast_compare(s, t, n);

    printf("result_ref = %d, result = %d\n", result_ref, result);;

    return 0;
} 
```

编译并运行上述测试工具：

```
$ gcc -Wall -O3 -msse3 fast_compare.c -o fast_compare
$ ./fast_compare
result_ref = 3955, result = 3955
$ ./fast_compare
result_ref = 3947, result = 3947
$ ./fast_compare
result_ref = 3945, result = 3945 
```

* * *

请注意，在上面的 SSE 代码中有一个可能不明显的技巧，我们使用它`_mm_madd_epi16`来解包并将 16 位`0`/`-1`值累加为 32 位部分和。我们利用了一个事实`-1*-1 = 1`（`0*0 = 0`当然）——我们在这里并没有真正做乘法，只是在一条指令中解包和求和。

* * *

更新：正如下面评论中所指出的，这个解决方案不是最优的——我只是采用了一个相当最优的 16 位解决方案，并将 8 位添加到 16 位解包以使其适用于 8 位数据。然而，对于 8 位数据，有更有效的方法，例如使用[`psadbw`/`_mm_sad_epu8`](https://software.intel.com/sites/landingpage/IntrinsicsGuide/#text=_mm_sad_epu8&expand=4512,4512)。我将把这个答案留给后代，以及任何可能想要用 16 位数据做这种事情的人，但实际上不需要解压输入数据的其他答案之一应该是公认的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-20T22:15:54.003

在 16 x uint8 元素中使用部分和可能会提供更好的性能。
我将循环分为内循环和外循环。
内部循环求和 uint8 元素（每个 uint8 元素最多可以求和 255 个“1”）。
小技巧：_mm_cmpeq_epi8 将相等的元素设置为 0xFF，并且 (char)0xFF = -1，因此您可以从总和中减去结果（减去 -1 以加 1）。

这是我对 fast_compare 的优化版本：

```
int fast_compare2(const char *s, const char *t, int length)
{
    int result = 0;
    int inner_length = length;
    int i;
    int j = 0;

    //Points beginning of 4080 elements block.
    const char *s0 = s;
    const char *t0 = t;

    __m128i vsum = _mm_setzero_si128();

    //Outer loop sum result of 4080 sums.
    for (i = 0; i < length; i += 4080)
    {
        __m128i vsum_uint8 = _mm_setzero_si128(); //16 uint8 sum elements (each uint8 element can sum up to 255).
        __m128i vh, vl, vhl, vhl_lo, vhl_hi;

        //Points beginning of 4080 elements block.
        s0 = s + i;
        t0 = t + i;

        if (i + 4080 <= length)
        {
            inner_length = 4080;
        }
        else
        {
            inner_length = length - i;
        }

        //Inner loop - sum up to 4080 (compared) results.
        //Each uint8 element can sum up to 255\. 16 uint8 elements can sum up to 255*16 = 4080 (compared) results.
        //////////////////////////////////////////////////////////////////////////
        for (j = 0; j < inner_length-15; j += 16)
        {
              __m128i vs, vt, v;

              vs = _mm_loadu_si128((__m128i *)&s0[j]); // load 16 chars from input
              vt = _mm_loadu_si128((__m128i *)&t0[j]);
              v = _mm_cmpeq_epi8(vs, vt);             // compare - set to 0xFF where equal, and 0 otherwise.

              //Consider this: (char)0xFF = (-1)
              vsum_uint8 = _mm_sub_epi8(vsum_uint8, v); //Subtract the comparison result - subtract (-1) where equal.
        }
        //////////////////////////////////////////////////////////////////////////

        vh = _mm_unpackhi_epi8(vsum_uint8, _mm_setzero_si128());        // unpack result into 2 x 8 x 16 bit vectors
        vl = _mm_unpacklo_epi8(vsum_uint8, _mm_setzero_si128());
        vhl = _mm_add_epi16(vh, vl);    //Sum high and low as uint16 elements.

        vhl_hi = _mm_unpackhi_epi16(vhl, _mm_setzero_si128());   //unpack sum of vh an vl into 2 x 4 x 32 bit vectors
        vhl_lo = _mm_unpacklo_epi16(vhl, _mm_setzero_si128());   //unpack sum of vh an vl into 2 x 4 x 32 bit vectors

        vsum = _mm_add_epi32(vsum, vhl_hi);
        vsum = _mm_add_epi32(vsum, vhl_lo);
    }

    // get sum of 4 x 32 bit partial sums
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 8));
    vsum = _mm_add_epi32(vsum, _mm_srli_si128(vsum, 4));
    result = _mm_cvtsi128_si32(vsum);

    // handle any residual bytes ( < 16)
    if (j < inner_length)
    {
        result += fast_compare_ref(&s0[j], &t0[j], inner_length - j);
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-21T05:44:19.560

大输入的最快方法是 Rotem 的答案，其中内部循环是`pcmpeqb`/ `psubb`，在向量累加器的任何字节元素溢出之前突破到水平求和。`psadbw`对全零向量进行无符号字节的hsum 。

另请参阅[如何使用 SIMD 计算字符出现次数](https://stackoverflow.com/questions/54541129/how-to-count-character-occurrences-using-simd)，您可以在其中使用 C++ 和 AVX2 的内在函数来使用从另一个数组加载的向量而不是该问题的`_mm_set1_epi8(char_to_count)`. 有效地将比较结果相加是相同的，使用 psadbw 进行水平总和。

* * *

没有展开/嵌套循环，最好的选择可能是

```
pcmpeqb   -> vector of  0  or  0xFF  elements
psadbw    -> two 64bit sums of  (0*no_matches + 0xFF*matches)
paddq     -> accumulate the psadbw result in a vector accumulator

#outside the loop:
horizontal sum
divide the result by 255 
```

如果您的循环中没有很多注册压力，请`psadbw`针对向量`0x7f`而不是全零。

*   `psadbw(0x00, set1(0x7f))`=>`sum += 0x7f`
*   `psadbw(0xff, set1(0x7f))`=>`sum += 0x80`

因此，您不必除以 255（编译器应该在没有实际的情况下有效地执行此操作`div`），而只需减去`n * 0x7f`，其中`n`是元素的数量。

另请注意，`paddq`在前 Nehalem 和 Atom 上速度很慢，因此如果您不希望 128 * 计数溢出 32 位整数，则可以使用`paddd`( )。`_mm_add_epi32`

这与 Paul R's `pcmpeqb`/ 2x `punpck`/ 2x `pmaddwd`/ 2x相比非常好`paddw`。

* * *

但是通过一个小的展开，您可以累积 4 或 8 个与`psubb`psadbw / paddq 之前的比较结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T17:59:29.607

SSE 中的整数比较产生全零或全一的字节。如果要计数，首先需要将比较结果右移（不是算术）7，然后添加到结果向量中。最后，您仍然需要通过对其元素求和来减少结果向量。这种减少必须在标量代码中完成，或者通过一系列添加/移位来完成。通常这部分不值得麻烦。

# ruby-on-rails - 如何使用 ruby 将文件保存到目录

> ID：15313648
> 
> 赞同：0
> 
> 时间：2013-03-09T17:20:24.717
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有这个 ruby​​ 代码，它从互联网上获取一个 xml 文件并保存它。它将它保存到当前目录，但想将它保存到 specfik 目录。我怎么做？

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

base_url = 'SOME-URL'
extension = '.xml'
# the specfik dir
xml_dir = '/Users/admin/Documents/Projects/files/xmlfolder'

Nokogiri::HTML(open(base_url)).xpath("//a/@href").each do |src|  
  File.open(File.basename(src.value, File.extname(src.value)) + extension,'wb'){ |f| 
    f.write(open(src.value).read)
  }
  puts "Done with: #{base_url}"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:31:34.613

确定`xml_dir`后，将您的写入包装在 Dir::chdir 块中，如下所示：

```
 Dir.chdir(xml_dir) do
   f.write # ...
 end 
```

`File.open`或者在您的调用中构造绝对路径而不是部分路径。

# php - 在mysql中插入数据

> ID：15313654
> 
> 赞同：-2
> 
> 时间：2013-03-09T17:21:05.723
> 
> 标签：php, mysql, sql, sql-insert

我想知道如何仅在 mysql 数据库的特定列中插入？

我的数据库中有 12 个字段或列。我想只在最后一列中插入数据。我怎样才能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:22:23.583

您只需要指定最后一列的名称，例如

```
INSERT INTO tableName(colName) VALUES (val1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:23:30.670

使用仅列出这一列的 INSERT 语句。这是否有效取决于表中列的定义。可能某些其他列是“必需的”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:24:24.743

```
INSERT INTO table_name ( field1 )
                   VALUES
                   ( value1 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T17:24:42.323

您可以使用 SQL 来完成。

```
INSERT INTO TABLE_NAME (COLUMN_NAME, COLUMN_NAME2) VALUES (VALUE_OF_PHP, VALUE_OF_PHP_2) 
```

# c++ - void* 从字面上看是浮动的，如何转换？

> ID：15313658
> 
> 赞同：8
> 
> 时间：2013-03-09T17:21:15.613
> 
> 标签：c++, c, casting, void, void-pointers

所以我在我的 C++ 应用程序中使用这个 C 库，其中一个函数返回一个 void*。现在我对纯 C 不是最敏锐的，但听说 void* 可以转换为几乎任何其他 * 类型。我也知道我希望这个函数的末尾有一个浮点数。

所以我将 void* 转换为 float* 并取消引用 float*，崩溃。该死！我调试代码并在 gdb 中让它评估`(float)voidPtr`和降低，看看这个值是我期望和需要的！

但是等等，在编译期间不可能相同。如果我写`float number = (float)voidPtr;`它不会编译，这是可以理解的。

所以现在的问题是，我如何让我的漂浮物脱离这个该死的虚空*？

编辑：多亏了 H2CO3，这个问题得到了解决，但我看到很多答案和评论出现并且不相信我可以在 gdb 中做 (float)voidPtr。这是屏幕截图。

![在此处输入图像描述](../Images/17cf6489bf0ee88f0ea0d4d96ad891d1.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-09T17:22:57.533

尝试使用指针：

```
void *theValueAsVoidPtr = // whatever

float flt = *(float *)&theValueAsVoidPtr; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-10T21:06:57.317

*如果我理解正确，您的*库将在声明类型为`void *`. 再次取出它的最安全方法是使用`union`：

```
#include <assert.h>
static_assert(sizeof(float) == sizeof(void *));

union extract_float {
    float vf;
    void * vp;
};

float foo(...)
{
    union extract_float ef;
    ef.vp = problematic_library_call(...);
    return ef.vf;
} 
```

与已接受答案中的方法不同，这不会触发未定义的行为。

# symfony - 使用 Symfony2 的指南针/sass 问题

> ID：15313664
> 
> 赞同：3
> 
> 时间：2013-03-09T17:21:43.467
> 
> 标签：symfony, sass, compass-sass

我是使用指南针的新手，我想在我的 symfony2 项目中将它与 sass 一起使用。

我用谷歌搜索了如何设置项目： - 安装 ruby​​ - 然后安装 Compass/sass。

安装了 Assetic bundle，然后我在 conf.yml 中添加：

```
parameters:
  assetic.filter.compass.images_dir: %kernel.root_dir%/../web/img
  assetic.filter.compass.http_path:  /img
assetic:
  debug:          "%kernel.debug%"
  use_controller: false
  bundles:        [ ]
  filters:
    cssrewrite: ~
    #sass and compass assetic conf
    sass:
        bin: /usr/local/bin/sass
    compass:
        bin: /usr/local/bin/compass 
```

最后我添加了我的 html.twig

```
{% stylesheets filter="compass" output="assets/css/styles.css"  "@lbTestBundle/Resources/assets/sass/*.scss" %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %} 
```

当我使用命令“assetic:dump”时，创建了 css 文件，但出现以下错误：

```
Error Output:
/usr/bin/ruby: No such file or directory -- /usr/local/bin/compass (LoadError) 
```

我的CSS是空的。

我错过了什么吗？如果有人可以帮助我，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T20:09:19.173

l3l0 快到了。您必须指定ruby的路径，但是配置错误。

修复了 config.yml：

```
assetic:
  debug:          "%kernel.debug%"
  use_controller: false
  bundles:        [ YourBundleShouldBeThere ]
  # Set path to your ruby
  ruby: /path/to/ruby
  filters:
    cssrewrite: ~
    #sass and compass assetic conf
    sass:
        bin: /usr/local/bin/sass
    compass:
        bin: /usr/local/bin/compass 
```

接下来为 sass 和 compass 设置正确的路径。它们通常位于`bin`默认 gem 安装目录的文件夹中。

在终端中执行以下命令并查找*INSTALLATION DIRECTORY*

```
gem environment 
```

对于生产，您还需要转储资产，仅此而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:36:38.140

要使用指南针，您需要 ruby​​。`whereis ruby`请在终端中使用命令检查您安装 ruby​​ 的位置。

然后在您的资产配置中添加 ruby​​ 的路径：

```
assetic:
  debug:          "%kernel.debug%"
  use_controller: false
  bundles:        [ YourBundleShouldBeThere ]
  ruby:
    bin: /path/to/ruby
  filters:
    cssrewrite: ~
    #sass and compass assetic conf
    sass:
        bin: /usr/local/bin/sass
    compass:
        bin: /usr/local/bin/compass 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-28T17:53:53.220

我遇到了同样的问题，我只是更改了 sass 和 compass 路径（没有“本地”），它对我有用：

```
filters:
    sass:
        bin: /usr/bin/sass
    compass:
        bin: /usr/bin/compass
    cssrewrite: ~ 
```

# python - 占位符类方法 Python 3

> ID：15313665
> 
> 赞同：1
> 
> 时间：2013-03-09T17:21:56.823
> 
> 标签：python, oop, class, python-3.x, pygame

我希望有一个带有在其他方法中调用的方法的类，但我希望这些方法可以被覆盖并默认通过。有没有办法（很好地）做到这一点？

编辑：我对我将如何覆盖这些方法特别感兴趣。我试过了`def setup(self): ...`，`game.setup = setup`。这有点工作，但它不能与“self”参数一起正常工作，抛出 `setup() missing 1 required positional argument: 'self'`

编辑2：我意识到我应该继承`Game`并覆盖子类中的方法。为什么我花了这么长时间我不知道。

如果我的话很愚蠢和令人困惑，这里有一些代码：

```
class Game(threading.Thread):
    def update(self):
        pygame.display.update()
        self.screen.fill(self.fillcolour)

    def setup(self):
        """Placeholder for setup"""
        pass

    def frame(self):
        """Placeholder for frame"""
        pass

    def handleInputs(self):
        """Placeholder for input handling"""

        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                self.quit()

    def run(self):
        self.setup()

        while True:
            if self.FRAMERATE:
                self.clock.tick(self.FRAMERATE)

            self.frame()
            self.update()
            self.handleInputs() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:32:12.110

This is called the [Template Method Pattern](http://en.wikipedia.org/wiki/Template_method_pattern) and your code is fine.

You probably want to call an overridable method for each event though and not override the entire `handleInputs` (or you'll have to reimplement the loop each time).

```
class Game(threading.Thread):
    def update(self):
        pygame.display.update()
        self.screen.fill(self.fillcolour)

    def setup(self):
        """Placeholder for setup"""
        pass

    def frame(self):
        """Placeholder for frame"""
        pass

    def handleEvent(self, event):
        """Placeholder for input handling"""
        pass

    def handleInputs(self):
        for event in pygame.event.get():
            if event.type == pygame.QUIT:
                self.quit()
            self.handleEvent(event)

    def run(self):
        self.setup()

        while True:
            if self.FRAMERATE:
                self.clock.tick(self.FRAMERATE)

            self.frame()
            self.update()
            self.handleInputs() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:30:18.707

我想你可以这样做：

```
class Whatever(object):
    def _placeholder(self,*args,**kwargs):
        """
        This function does nothing, but in a subclass, 
        it could be useful ...
        """
        return

    setup = _placeholder
    frame = _placeholder
    ... 
```

这至少减少了样板代码......

# c# - 不能继承没有默认构造函数的基本控制器类

> ID：15313666
> 
> 赞同：1
> 
> 时间：2013-03-09T17:22:03.573
> 
> 标签：c#, asp.net-mvc, constructor, controller, t4mvc

我有一个由另一个控制器继承的 BaseController，

基础控制器：

```
public partial class BaseController : Controller
{
        private readonly IUnitOfWork _uow;
        private readonly INewsService _newsService;

        protected BaseController(IUnitOfWork uow, INewsService newsService)
        {
            _uow = uow;
            _newsService = newsService;
        }

//...

} 
```

控制器之一：

```
public partial class HomeController : BaseController
{

    private readonly IUserService _userService;
    private readonly IMemberService _memberService;
    private readonly IUnitOfWork _uow;
    public HomeController(IUnitOfWork uow, IUserService userService, IMemberService memberService, INewsService newsService): base(uow, newsService)
    {
        _userService = userService;
        _memberService = memberService;
        _uow = uow;
    }

//...
} 
```

但是对于 t4mvc 生成的类中的每个控制器，我都会遇到此错误，例如此错误：

```
'MvcApp.Controllers.BaseController' does not contain a constructor that takes 0 arguments. 
```

在`HomeController.generated.cs`文件中。

**解决方案**

[https://stackoverflow.com/a/15320890/1719207](https://stackoverflow.com/a/15320890/1719207)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:47:45.967

听起来您的 IOC 容器（如果存在）没有覆盖默认控制器工厂。如果使用 Ninject，您应该安装 Ninject.MVC3 项目。每个容器都需要覆盖默认控制器工厂，以便它可以构建它们并注入依赖项。

对于 StructureMap，您需要[StructureMap.MVC3](http://nuget.org/packages/StructureMap.MVC3/)或[StructureMap.MVC4](http://nuget.org/packages/StructureMap.MVC4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:42:44.483

具有这种依赖关系的控制器闻起来很臭。这是我最近学到的技术术语^_^

一方面，我在动作过滤器中有 UoW 并使用属性来标记动作事务（在我的例子中，我将它与审计相结合）。其余的，如果它们真的那么复杂，可能应该有一个应用程序服务来包装它们。

只是一个想法。我是一个真正的初学者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T01:49:30.667

这类似于[T4MVC 基本控制器没有默认构造函数](https://stackoverflow.com/questions/11584949/t4mvc-base-controller-doesnt-have-default-constructor)。

您可以将基本控制器更改为抽象的吗？如果是这样，我相信这将使事情顺利进行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T09:46:27.647

除了 David Ebbo 解决方案，这是

**另一个解决方案：**

我刚刚向我的基本控制器添加了一个默认构造函数，例如：

```
protected BaseController(){} 
```

现在效果很好（在子类中没有 CodeRush 的“未实现基本类型构造函数”问题）。

# java - 声音和图像文件为空

> ID：15313668
> 
> 赞同：1
> 
> 时间：2013-03-09T17:22:21.080
> 
> 标签：java, image, audio

我正在为班级编写游戏，但无法添加声音和图像。我们从 Andrew Davison 的 Killer Game Programming 一书中获得了可以使用的框架，我觉得我正在完全复制它，但每当我尝试播放声音或显示图像时，我都会得到空值。

文件名读取正确，但没有找到声音。我在文件中有 mp3。我想也许目录是错误的，所以我一直在 /Sounds 和 /src/Sounds 之间更改它，但它没有帮助。我完全被困住了。

编辑：在我刚刚发布的所有废话之后，这是一个在实例化之前传入 imsLoader 的简单问题。叹。我会检查 soundLoader 是否是同一个问题。多谢你们。

编辑2：声音问题不一样。为我的声音文件创建新的输入文件流时，我得到一个空结果。

这是对 URL 进行更改后的 SDL 方法。

```
 try {
        java.net.URL inFile = this.getClass().getResource("/Sounds/SDLInfo.txt");
        System.out.println("url " + inFile);
        InputStreamReader in = new InputStreamReader(inFile.openStream());
      if(in == null){
          System.out.println("in is null wtf");
          System.out.println("sndsFNm " + sndsFNm);
          System.out.println("in contents " + this.getClass().getResourceAsStream(sndsFNm));
      }
      BufferedReader br = new BufferedReader(in);
      StringTokenizer tokens;
      String line, name, fnm;
      while((line = br.readLine()) != null) {
        if (line.length() == 0)  // blank line
          continue;
        if (line.startsWith("//"))   // comment
          continue;

        tokens = new StringTokenizer(line);
        if (tokens.countTokens() != 2)
          System.out.println("Wrong no. of arguments for " + line);
        else {
          name = tokens.nextToken();
          fnm = tokens.nextToken();
          load(name, fnm);
        }
      }
      br.close();
    } 
    catch (IOException e) 
    { System.out.println("Error reading file: " + sndsFNm);
      System.exit(1);
    } 
```

在我的主类中调用此方法之前，我先实例化 SDL 加载程序，如下所示：

```
 private static final String SDL_FILE = "SDLInfo.txt";
    private SDLLoader sdlLoader;
//initialize loaders and start music
sdlLoader = new SDLLoader(SDL_FILE); 
sdlLoader.play("bgmusic", true); 
```

堆栈跟踪

```
url file:/C:/Documents%20and%20Settings/MyName/Desktop/java%20programs/Zombie%20City/bin/Sounds/SDLInfo.txt
Problem with Sounds/peaceful_music.mp3
-- bgmusic/peaceful_music.mp3
Reading file: Sounds/clipsInfo.txt
url file:/C:/Documents%20and%20Settings/MyName/Desktop/java%20programs/Zombie%20City/bin/Sounds/SDLInfo.txt
Problem with Sounds/peaceful_music.mp3
-- bgmusic/peaceful_music.mp3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:28:29.293

如果您收到 NullPointerException，它可能来自这一行

`image = imsLoader.getImage(imageName);`

也许`imsLoader`是空的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:42:33.180

不要尝试输入流，而是使用

```
this.getClass().getResource("/Sounds/SDLInfo.txt"); // Note leading '/' - v. important. 
```

我推荐此更改的原因是我*知道*该`getResource(..)`方法会将前导解释为`/`“*从类路径的根目录搜索，而不是类的包”。*

我从来没有确切地确定如何`getResourceAsStream(..)`对待领先`/`，但它似乎..不同。

# c - 无法连接到redis服务器

> ID：15313672
> 
> 赞同：1
> 
> 时间：2013-03-09T17:22:33.030
> 
> 标签：c, redis

我无法连接到使用默认选项（127.0.0.1:6379）运行的 redis 服务器`credis_connect()`。这是我使用的测试代码：

```
#include <stdio.h>
#include "credis.h"

int main(int argc, char **argv)
{
    REDIS rh;
    char *val;
    int rc;

    printf("connecting to server at Port:6379\n");
    rh = credis_connect(NULL, 6379, 10000);

    if(rh == NULL)
    {
        printf("Error in connecting to server.\n");
        return -1;
    }
    printf("Connected to Redis Server. \n");

    /* ping server */
    rc = credis_ping(rh);
    printf("ping returned: %d\n", rc);

    /* set value of key "kalle" to "kula" */
    printf("Setting Key value to Redis Server.\n");
    credis_set(rh, "kalle", "kula");

    printf("Key value is set.\n");

      /* get value of key "kalle" */
    credis_get(rh, "kalle", &val);
    printf("get kalle returned: %s\n", val);

    /* close connection to redis server */
    credis_close(rh);

    return 0;
} 
```

仅供参考：我在 ubuntu 12.10 上运行 redis 2.6.10 和 credis 0.2.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:08:07.457

我不认为 credis 0-2-3 可以与现代 Redis 版本（2.6）一起使用。credis 0-2-3 于 2010 年发布，Redis 发展了很多。

连接失败，因为 credis 需要在套接字连接后解析 INFO 命令的输出。目的是检索 Redis 服务器版本。因为 INFO 的输出发生了变化（它现在包括用于隔离部分的注释），credis 不再能够提取版本，所以它返回一个错误。

如果你想解决这个特定问题（但可能还有很多其他问题......）你只需要编辑 credis.c 源代码并替换：

```
int items = sscanf(rhnd->reply.bulk,
                   "redis_version:%d.%d.%d\r\n",
                   &(rhnd->version.major),
                   &(rhnd->version.minor),
                   &(rhnd->version.patch)); 
```

经过：

```
int items = sscanf(rhnd->reply.bulk,
                   "# Server\nredis_version:%d.%d.%d\r\n",
                   &(rhnd->version.major),
                   &(rhnd->version.minor),
                   &(rhnd->version.patch)); 
```

我的建议是切换到[hiredis](https://github.com/redis/hiredis)，它是官方的C 客户端。

# c++ - lambda函数有什么用？

> ID：15313679
> 
> 赞同：2
> 
> 时间：2013-03-09T17:23:09.617
> 
> 标签：c++, lambda

谁能帮我理解下面的代码

```
#include <iostream>
using namespace std;

int main()
{
    auto hello = []() -> void {
        cout << "Hello World";
    };

    // Call the lambda function
    hello();
} 
```

这里有什么用`auto hello = []() -> void`？我不明白花括号后终止分号的含义（第 7 行）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T17:26:07.827

像一行一样阅读：

```
auto hello = []() -> void { cout << "Hello World"; }; 
```

`hello`是一个包含 lambda 的变量

*   不捕获外部变量 ( `[]`)，
*   不带参数 ( `()`)，
*   `void`return ( ，这称为“尾随返回`-> void`类型”，指定 lambda 的返回类型，就像您对普通函数一样。这实际上在这里是不必要的。)，和
*   由其主体中的单个`cout`语句组成。

它直到下一行被显式调用时才真正执行。

# javascript - Photoshop javascript如何在脚本后恢复原始文档状态

> ID：15313680
> 
> 赞同：3
> 
> 时间：2013-03-09T17:23:12.607
> 
> 标签：javascript, photoshop

我想运行一个调整大小并保存图像的 Photoshop javascript，但最后我想将文档恢复到原始状态。

在 Photoshop 中，我只会标记历史窗格，撤消最后的命令。
我应该如何在脚本中做到这一点？
或者，将文档恢复到原始状态的最佳方法是什么？

不要假设该文档是最初保存的，它可能是正在制作中的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-30T20:23:00.340

保存活动历史状态：

```
var savedState = app.activeDocument.activeHistoryState 
```

然后当你完成你正在做的事情时：

```
app.activeDocument.activeHistoryState = savedState 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-13T06:38:50.360

从 ScriptListener 插件恢复图像：

```
var idRvrt = charIDToTypeID( "Rvrt" );
executeAction( idRvrt, undefined, DialogModes.NO ); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-14T15:53:37.023

我避免使用历史状态方法——我发现它并不总是很好用。相反，如果我想做临时更改，我会复制文档并进行处理。从未失败。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-10T14:32:39.807

答案是：

1.  在开始之前保存最后一个历史命令：
    这很棘手并且可能并不总是有效，因为 historyStates 列表还包括您“撤消”的历史命令并且是灰色的。但是让我们假设所有最后一个命令都没有变灰。

    ```
    history = doc.historyStates.length - 1; 
    ```

2.  完成后恢复历史状态：

    ```
    doc.activeHistoryState = doc.historyStates[history]; 
    ```

3.  从历史记录中删除脚本生成的所有命令：

    ```
    app.purge (PurgeTarget.HISTORYCACHES); 
    ```

您可以跳过＃3，在这种情况下，您在脚本上执行的命令将保留在历史列表中，呈灰色（如果您重复该脚本，您最终不会恢复最后一个实际命令，而是恢复上一个脚本的最后一个命令跑）。
或者，为避免此问题，您还可以在步骤 #1 之前清除历史灰色命令。

# javascript - Facebook Javascript SDK 产生 SSL 错误

> ID：15313684
> 
> 赞同：0
> 
> 时间：2013-03-09T17:23:40.233
> 
> 标签：javascript, facebook, ssl

我有一个使用 JavaScript Facebook-SDK 的移动网络应用程序。webapp 通过 HTTP 运行。要加载初始化 SDK，我使用了[JavaScript Facebook-SDK How-To中的 HowTo](http://developers.facebook.com/docs/reference/javascript/)

现在的问题是，我有时会收到警告“加载资源失败：发生 SSL 错误，无法与服务器建立安全连接。” 此外，还有一个名为“ [https://s-static.ak.facebook.com/connect/xd_arbiter.php](https://s-static.ak.facebook.com/connect/xd_arbiter.php) ?...”的 URL

当我从主屏幕启动 web 应用程序时，此问题仅有时会发生，并导致我的 iPhone 上出现“[App-Name] 无法打开，因为它无法与服务器建立安全连接。”的提示框.

有人知道我为什么会收到此错误吗？

作为参考我的代码来加载和初始化 SDK。

```
window.fbAsyncInit = function() {
                            FB._https = false;
                            FB.init({
                              appId      : '[my app id]', // App ID
                              status     : true, // check login status
                              cookie     : true, // enable cookies to allow the server to access the session
                              xfbml      : true  // parse XFBML
                            });
                            FB.Event.subscribe('auth.statusChange', handleStatusChange);
                          };

                          // Load the SDK Asynchronously
                          (function(d){
                             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
                             if (d.getElementById(id)) {return;}
                             js = d.createElement('script'); js.id = id; js.async = true;
                             js.src = "//connect.facebook.net/en_US/all.js";
                             ref.parentNode.insertBefore(js, ref);
                           }(document)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:26:48.150

您是否在 FB 的应用程序设置中提到了正确的 url，它说一旦您必须将 http url 放在下一个为 https ？

# lucene - Lucene 对索引的内存表示是什么样的？

> ID：15313688
> 
> 赞同：0
> 
> 时间：2013-03-09T17:23:57.267
> 
> 标签：lucene

Lucene 索引的内存表示（相对于文件格式）是什么样的？整个反向索引是否加载到内存中，例如作为发布列表数组（其中每个发布列表包含文档 ID、文档中的术语频率和位置）？就像是

```
class Posting {
  private int docID;
  private int termFreq;
  private int[] termPositions;
}

class PostingList {
  private Posting[] postings;
}

public class SomeClassThatHoldsTheIndexInMemory {
  private PostingList[] index;  // Indexed by some internal term ID?
} 
```

我知道构成索引的所有内容（包括有关术语的辅助信息）可能不会保存在内存中，但肯定有什么？

哪些类定义了索引的内存表示？如果索引看起来像上面那样，Lucene 如何从一个术语（一个字符串）变成一个术语 ID（一个 int）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:04:00.093

Lucene 内存中的表示被定义为`RAMDirectory`类。这基本上`HashMap`是`String`（键）和（`RAMFile`s）中的一个。`RAMFile`依次是表示文件字节的字节缓冲区列表。您将存储在`FSDirectory`.

Lucene 存储倒排索引。索引组织为一组增量（可能未合并）段。每个段都属于一个“索引提交”，每个段或多或少是另一个倒排索引。您甚至可以找到仅包含一个文档的倒排索引的“段”。

`Document`一旦将“发布”或原始结构添加到索引中，它就会丢失。此外，您不能遍历整个文档集合（据我所知）。无论如何，没有什么能阻止您将您的帖子/文档存储在二级结构中，或者将其序列化版本存储在索引中，或者将其对象属性`StoredField`一一存储；也不在字段中定义您自己的“可迭代”文档 ID。

`DirectoryReader`和`SegmentReader`s 处理索引的内部结构。

在我使用 Lucene 的那段时间里，我从未见过像“术语 ID”这样的东西。然而，“文档 ID”是一个常见的概念。

# android - 移动背景对象 actionscript 3 中间

> ID：15313698
> 
> 赞同：0
> 
> 时间：2013-03-09T17:24:34.503
> 
> 标签：android, actionscript-3, flash, actionscript, actionscript-2

我目前正在为 Android 制作 2d 游戏。

我现在在角色的移动方面遇到了麻烦。

这是我想要做的：

1.  当我触摸左/右按钮时，英雄应该向左/右走。

2.  如果 HERO 不在 STAGE 的中间，他应该继续步行直到到达 STAGE 的中间。

3.  当他到达舞台中间时。我希望背景移动而不是英雄。

您能否告诉我应该如何验证代码，以便（HERO.x = 舞台中间）背景开始移动？

谢谢 :) 这是右侧按钮的代码片段，它不能按预期工作。

```
btnright.addEventListener(TouchEvent.TOUCH_BEGIN,onright);
addEventListener(Event.ENTER_FRAME,goright);

function onright(e:TouchEvent):void{
    istouching = true;
}

function goright(e:Event):void{

    if(istouching){ //if the button is touched
        hero.x+=10;
        hero.gotoAndStop("walking");
        hero.scaleX=1;

        if(hero.x == stage.stageWidth*.5){ //if HERO reaches the middle of the stage
            bg.x-=5;
            hero.gotoAndStop("walking");
            hero.scaleX=1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:36:02.650

你总是在触摸英雄！并且您的“如果等于中心”语句仅在 1 个像素上触发，您需要“大于”

```
if(istouching){ //if the button is touched

    hero.gotoAndStop("walking");
    hero.scaleX=1;

    if(hero.x > stage.stageWidth*.5){ //if HERO reaches the middle of the stage
        bg.x-=5;

    }else{
        hero.x+=10;
     }
} 
```

# android - 如何在 Android 上使用谷歌地图或 mapquest 动态突出显示道路的一侧（或在旁边画一条线）

> ID：15313706
> 
> 赞同：8
> 
> 时间：2013-03-09T17:25:29.353
> 
> 标签：android, api, maps, highlight

我试图突出显示用户所在的街道的奇数或偶数侧（至少是街区）（或所有街道，如果这更简单的话。）

我可以找到奇数或偶数的一面，我已经弄清楚了，但是画一条与道路平行的线被证明是有问题的。我设计了一种方法，使用谷歌地图和地理编码在奇数或偶数侧的块末端找到点并在它们之间画一条线，但所有这些地理编码都是缓慢且不可靠的。它在我的公寓里很管用，但在很多地方都落在了它的脸上。

有没有办法在地图顶部放置第二条道路覆盖物，向北或向南、向东或向西移动并更改道路颜色？

如果提供有用的功能，我愿意使用 google 或 mapquest api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-26T12:42:24.273

您必须使用 Google Maps API 来计算街道坐标，然后您可以将它们移开并使用`Polyline` [此处的信息绘制线](https://developers.google.com/maps/documentation/android-api/shapes)

# android - 如何使我的应用程序支持旧 SDK 下的新语言环境？

> ID：15313708
> 
> 赞同：0
> 
> 时间：2013-03-09T17:25:47.500
> 
> 标签：android, localization, internationalization, android-sdk-2.1

我开发了一个`android`应用程序
并针对一些旧设备（`Android SDK 2.1`）
我如何支持语言为（，，，，...）`Bulgarian`但是`Danish`以上`Arabic`所有 内容仅在版本之后才受支持`Hebrew`
`Locale(s)``Android SDK 2.3`

如果这是不可能的，那么在不为每种语言编写独立应用程序的情况下实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T06:23:20.273

Android 网站上的文档涵盖了您的问题：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

当您提到阿拉伯语和希伯来语时，请注意，只有 4.2 才支持从右到左 (RTL)：http: [//developer.android.com/about/versions/android-4.2.html#RTL](http://developer.android.com/about/versions/android-4.2.html#RTL)

编辑：

设备制造商不需要支持 Android 中可用的所有语言和区域设置。或者至少那是我对兼容性定义文档的阅读。也有可能在 Android 之外的特定版本中，ODM 添加了不受支持的语言/区域设置作为自定义。不幸的是，我对任何这样做的 ODM 都没有任何直接的第一手知识。

鉴于根据 Google Play 统计数据，2013 年 3 月 Android 2.2 及更低版本的市场份额约为 10%，您可能只想放弃对它们的支持并定位到 2.3 及更高版本，这将为您提供更多受支持的语言/区域设置。

看看这个关于哪个版本的 Android 支持哪些语言/区域设置的 SO 问题：Android [上支持的语言/区域设置列表是什么？](https://stackoverflow.com/questions/7973023/what-is-the-list-of-supported-languages-locales-on-android)

# image - SWT gc.setAdvanced(true) 导致阻塞状态

> ID：15313709
> 
> 赞同：1
> 
> 时间：2013-03-09T17:25:48.387
> 
> 标签：image, swt

我有一些繁重的系统资源图像处理（需要将图像缩放得很深）并将缩放图像的某些部分（我们称之为视口）绘制到画布上。

因为图像大小调整到如此大的尺寸会导致 UI 阻塞几秒钟，所以我制作了背景线程来调整图像大小并在图像准备好时使用它。在此之前，使用`paintevent gc`SWT `transformations`（它们速度很快，但比对已调整大小图像的视口操作慢 10 倍）。

但是在我编写了调整大小的线程之后，它仍然会阻塞 UI。因此，我制作了 SSCCE 来证明这一点。不幸的是，它完美无缺。经过几个小时的调试，我发现这`gc.setAdvanced(true);`会导致`GC`上下文阻塞。

```
import java.net.URL;

import org.eclipse.swt.SWT;
import org.eclipse.swt.events.KeyAdapter;
import org.eclipse.swt.events.KeyEvent;
import org.eclipse.swt.events.PaintEvent;
import org.eclipse.swt.events.PaintListener;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.widgets.Display;
import org.eclipse.swt.widgets.Shell;

public class ImageResizeTest {
    private Image bgImage;
    private Image imgToResize;
    private ImageResizeWorker worker;
    private Display display = new Display();
    private Shell shell = new Shell(display);

    public ImageResizeTest() {
        shell.setText("Image background resize test");

        Rectangle rect = new Rectangle(0, 0, 500, 500);
        bgImage = new Image(display, rect);
        paintImage(bgImage);

        shell.addPaintListener(new PaintListener() {
            @Override
            public void paintControl(PaintEvent e) {
                System.out.println("redraw start");
                e.gc.drawImage(bgImage, 0, 0);
                e.gc.setAdvanced(true);
                e.gc.fillRectangle(new Rectangle((int)(Math.random() * 100), (int)(Math.random() * 100), 20, 20));
                System.out.println("redraw stop");
            }
        });

        shell.addKeyListener(new KeyAdapter() {

            /* (non-Javadoc)
             * @see org.eclipse.swt.events.KeyAdapter#keyPressed(org.eclipse.swt.events.KeyEvent)
             */
            @Override
            public void keyPressed(KeyEvent e) { 
                worker = new ImageResizeWorker(new Image(display, imgToResize, SWT.IMAGE_COPY));
                worker.start();
                display.asyncExec(new Runnable() {
                    @Override
                    public void run() {
                        shell.redraw();
                        try {
                            Thread.sleep(250);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        if (worker.isAlive()) display.asyncExec(this);
                    }
                });
            }
        });

        try {
            URL url = new URL("http://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Image_created_with_a_mobile_phone.png/1280px-Image_created_with_a_mobile_phone.png");
            imgToResize = new Image(display, url.openStream());
            paintImage(imgToResize);
        } catch (Exception e) {
            e.printStackTrace();
        }

        shell.setActive();
        shell.setBounds(rect);
        shell.setVisible(true);

        while(!shell.isDisposed()) {
            if(!display.readAndDispatch()) display.sleep();
        }

        shell.dispose();
    }

    private void paintImage(Image img) {
        Rectangle rect = img.getBounds();
        GC gc = new GC(img);
        for (int i = 0; i < 20; i++) {
            gc.drawLine((int)(Math.random() * rect.width), (int)(Math.random() * rect.height), (int)(Math.random() * rect.width), (int)(Math.random() * rect.height));
        }
        gc.dispose();
    }

    private class ImageResizeWorker extends Thread {
        private Image srcImage;

        public ImageResizeWorker(Image srcImage) {
            this.srcImage = srcImage;
        }

        /* (non-Javadoc)
         * @see java.lang.Thread#run()
         */
        @Override
        public void run() {
            System.out.println("resizing started");
        Image targetImage = new Image(new Display(), 31000, 15000);
        long time = System.currentTimeMillis();
        GC gc = new GC(targetImage);
        gc.setAdvanced(true);
        gc.setInterpolation(SWT.HIGH);
        gc.drawImage(srcImage, 0, 0, srcImage.getBounds().width, srcImage.getBounds().height, 0, 0, 31000, 15000);
        System.out.println("Took " + (System.currentTimeMillis() - time) + " ms");
        gc.dispose();
        bgImage = targetImage;
        }
    }

    public static void main(String[] args) {
        new ImageResizeTest();
    }
} 
```

如果两者都`gc.setAdvanced(true);`被注释掉，它会正常工作。

**有人可以告诉我为什么会导致阻塞以及如何避免它吗？**是的，我需要在高级模式下同时拥有两个线程（`main`和`worker`），因为我需要在`main`画线中使用抗锯齿，并`gc.setInterpolation(SWT.HIGH);`在`worker`调整大小后获得合理的图像质量。

# java - 在应用服务器中的何处添加 JDBC 驱动程序？

> ID：15313710
> 
> 赞同：2
> 
> 时间：2013-03-09T17:25:51.863
> 
> 标签：java, jdbc, jboss

当您使用 Spring 创建应用程序并将其部署到应用服务器时，添加 JDBC 驱动程序的最佳位置在哪里？我是否为它添加 Maven 依赖项而不是将其放在应用服务器的 lib 文件夹中？如果您需要不同版本的驱动程序，您可能会在加载类时遇到问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:44:21.120

这取决于您要如何配置数据源。

如果将 JDBC 驱动程序添加到 WAR/EAR 文件中，则应使用 Spring 配置中定义的本地 DataSource（例如使用 Apache DBCP）。

如果您将 JDBC 驱动程序添加到我们的应用程序服务器 lib 文件夹，那么您也可以使用应用程序服务器控制台配置 DataSource。

我更喜欢使用应用程序服务器控制台来配置我的数据源，因为许多应用程序服务器（例如 WebLogic）在 DataSource 上有很多监控和配置选项，这在本地 DataSource（例如 Apache DBCP）上是不容易获得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:28:59.627

如果可能，请使用 Maven 依赖路径，这会将驱动程序的库导入到正确的位置。它还确保您使用正确版本的驱动程序，并允许您轻松更改该版本，而无需使用文件系统手动移动 .jar。您也不需要从相应的网站下载驱动程序，因为 Maven 会为您处理。Maven 使依赖管理变得更加容易，如果您利用这项技术，您应该利用它为您提供的简单性。

如果您使用某些数据库风格 (Oracle)，这可能是不可能的，因为它们的驱动程序未托管在 Maven Central 上。

# c# - 如何执行查询扩展

> ID：15313713
> 
> 赞同：0
> 
> 时间：2013-03-09T17:26:18.990
> 
> 标签：c#, thesaurus

我正在开发一个 C# 应用程序，其中用户提供一组单词（通常少于 10 个），我需要检索这些单词的所有同义词。这是我第一次使用字典和这些东西。我需要知道要遵循的步骤，以及是否存在提供同义词的现有词典，我可以将其与我的应用程序集成，或者是否有开源应用程序或我可以使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:02:09.373

回答你的第一个问题。您可以在此处找到词库下载：[http ://wordpresscloaker.com/blog/download-free-english-thesaurus-format-txt.html](http://wordpresscloaker.com/blog/download-free-english-thesaurus-format-txt.html)

我对该文件的质量、准确性、合法性、使用许可或完整性不作任何承诺。但是，这将使您上路。您需要提取 mthesaur.txt 并将其添加到您的项目文件夹中。

接下来，您需要通过执行以下操作来读取文本文件：

```
var reader = new StreamReader(File.OpenRead(@"C:\mthesaur.txt"));
var dict = new Dictionary<string, string>();
while (!reader.EndOfStream)
{
    // Read the file line by line.
    var line = reader.ReadLine();

    // If the line isn't null, we can use it.  This shouldn't happen but it is a good sanity check.
    if (line == null) continue;
    // Split the line by the delimiter (a comma) so we can get the main word, the first one on the line.
    var splitLine = line.Split(',');
    var mainWord = splitLine[0];
    // To save us from having to loop through and only get the indexes above 0 (eg, skip the main word) we will just simply remove it from the line so we have just synonyms.
    line = line.Replace(mainWord + ",", string.Empty);
    // Now we make use of the dictionary type in C# and add the mainword as the key and the synonyms as the value.
    try
    {
        dict.Add(mainWord, line);
    }
    catch (ArgumentException argEx)
    {
        Console.WriteLine("Attempted to add {0} to the dictionary but it already exists.", mainWord);
    }
} 
```

现在我们在 C# 中的键/值字典中拥有了所有内容，您可以使用 LINQ 查询输入单词的同义词。这可以通过使用包含字典中所有键值的下拉列表（不推荐，因为这将是一个非常大的下拉列表并且用户难以导航）、ListBox（更好、更易于导航）来完成，或纯文本搜索框。虽然这并不能完全回答您的问题，因为这里没有关于为用户处理 GUI 的内容，但这应该会让您顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:07:17.327

如果您使用[SQL 全文搜索](http://msdn.microsoft.com/en-us/library/ms142571.aspx)或底层技术 - Microsoft Search Server（有一个免费的[Express](http://technet.microsoft.com/en-gb/library/dd183108%28v=office.14%29.aspx) SKU），您将找到多种语言的词库和其他自然语言处理工具。我当然假设你正在做一个实际的项目，而不是做家庭作业......

如果您更喜欢开源，请查看[Lucene.net](http://lucenenet.apache.org/) - 它提供了一个搜索引擎，我很确定它有同义词库

# memory-leaks - 如何避免有角度的应用程序中的内存泄漏？

> ID：15313714
> 
> 赞同：4
> 
> 时间：2013-03-09T17:26:30.097
> 
> 标签：memory-leaks, angularjs

我试图找出[我的 angularjs 代码是否有 memory-leak](https://stackoverflow.com/questions/15310282/does-ng-include-have-memory-leak)，但还没有找到。

我读过一些关于 javascript memory-leak 的文章，但它对 angularjs 应用程序没有用，因为它使用双向绑定，将大部分 DOM 操作隐藏给用户。

所以我还有一个问题：如何用 Angular 编写内存泄漏的应用程序？我们应该避免任何常见的错误模式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T20:44:24.693

Angular 主要为您处理它，但有些地方您需要考虑内存。由于您的服务从创建到应用程序关闭时都存在，因此很容易在此类对象中占用内存。就像您实现缓存一样，您最终可能会持有对永远不会再次使用的对象的缓存引用，因此您需要一种策略来释放这些对象。

另一个地方是与 DOM 交互的指令。但是，只要您自己听`$scope.$on('$destroy', function () { /* Clean up code here */ });`并清理干净，就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-14T23:55:39.217

如果使用 $timeout 执行不返回 null 的函数，则会发生内存泄漏。这在coffeescript 中很容易意外发生，因为它隐式返回函数最后一行的值

例如。

```
doSomethingEveryTenSeconds = ->
  //do something here
  $timeout(doSomethingEveryTenSeconds, 10000)
  null #prevent memory leak 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-27T12:47:38.607

要回答这个问题，您确实需要了解 Angular 的垃圾收集。它确实做得很好。但是，如果它认为仍然存在对某个对象的引用，或者其他东西正在引用它，那么就会出现内存泄漏。您可以使用 jQuery 或任何其他库通过 DOM 对象创建循环引用。

这是一个例子。[http://plnkr.co/edit/nIt78S?p=preview](http://plnkr.co/edit/nIt78S?p=preview)

如果你打开 controllers.js，你会看到一个 jQuery`$()`到 Angular的`$scope`循环引用：

```
//*** CREATING MEMORY LEAK ***
$("#memory-leak").on('click', function() {
    console.log("[HomeController " + myInstance + "] click()");
    $scope.data.counter++;
}); 
```

因为 jQuery .on() 方法附加到控制器外部的 div 上，所以它永远不会被释放。您可以通过以下方式进行测试：
1) 打开控制台
2) 在主页和数据页面之间来回导航。每次执行此操作时，都会注意到创建了一个新的 Home Controller 实例。
3) 创建 3 或 4 个实例后，单击显示“内存泄漏测试”的 div。您会从上面的代码中看到 3 或 4 个控制台日志，这是内存泄漏！

# jquery - Rails jquery-ui-rails gem

> ID：15313715
> 
> 赞同：1
> 
> 时间：2013-03-09T17:26:47.310
> 
> 标签：jquery, ruby-on-rails, jquery-ui

我正在使用 jquery-ui-rails gem。我创建了一个联系表单，当用户单击链接时显示 jquery ui 对话框。反过来，我有一个开发和生产服务器。在开发服务器上，当我单击链接时，联系表单会出现在 jquery ui 对话框中。但是，在生产网站上，当我单击链接时，没有出现带有联系表的对话框。代码与开发服务器上的代码相同。

我尝试将应用程序文件夹复制到开发服务器、gem 文件等。

我运行以下

-bundle install -rake assets:clean -rake assets:precompile -restart server

这在开发服务器上完美运行。

我在生产服务器上遵循相同的步骤，但链接不起作用。

我在这里真的很茫然。这就是拥有开发服务器的全部意义所在。这基本上什么也没告诉我。

以下是一些代码片段：

宝石文件：

```
 gem 'jquery-rails', "~> 2.1.4"

 gem 'jquery-ui-rails', "~> 3.0.0" 
```

关联：

```
 <%= link_to "Contact Us", "javascript:void(0)", :id => "contact-link" %> 
```

应用程序js：

```
 $(document).ready(function(){
$('#contact-link').click(function(){
    $('#contact-form-wrap').show();
    $("#contact-form-wrap").dialog({
        title: "Contact Us",
        height: 420,
        width: 350,
        modal: true,
        buttons: {
            "Send": function() {
                if($('#contact_subject').val().length != 0 && $('#contact_message').val().length != 0)  {
                    $('#contact-form').submit();
                }
                else {
                    $('#contact-error').html("You must select a subject and enter a message.");
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
});
}); 
```

请指教。我在生产中能做的事情真的很有限。我不能一直搞砸网站。

编辑：

这是我的应用程序 js 文件现在的样子：

```
 //= require jquery
 //= require jquery_ujs
 //= require jquery.ui.core
 //= require twitter/bootstrap
 //= require active_admin
 //= require contractor_validate
 //= require painter_validate
 //= require jquery.social.media.tabs.1.6
 //= require jquery.validate.min
 //= require payment
 //= require the-tooltip
 //= require general
 //= require_self 
```

General.js 现在包含我从 application.js 中删除的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:33:57.473

I would suggest to move your js code from `application.js` to some other file , for example contact_form.js (in `app/assets/javascripts/` directory) . The `application.js` has a special purpose - it is a manifest file . I think it would be OK if you place in you manifest file routines like these:

```
//= require jquery
//= require jquery-ui
//= require_tree . 
```

More about asset-pipeline management you can read [here](http://guides.rubyonrails.org/asset_pipeline.html).

# jquery - jQuery scrollto/localscroll - 导致滚动条消失

> ID：15313717
> 
> 赞同：1
> 
> 时间：2013-03-09T17:27:05.767
> 
> 标签：jquery, jquery-animate, scrollbar, fade, scrollto

我遇到了 jQuery 的 scrollto/localscroll 插件的问题。这些插件默认工作，但如果我淡入/淡出某些容器，那么它会以某种方式导致网页上的所有滚动条消失。

这是我的代码的结构：

CSS：

```
.pagecontainer {
overflow-y:auto;
overflow-x:hidden;
width:80%;
height:450px;
margin: 0 auto;
}
.pagecontainer>div{
display: none;
position:relative;
} 
```

JS：

```
<!--fade and show windows-->
<script type="text/javascript">

    $(document).ready(function() {

         $('.link').on('click', function(e){
             displayNone();
             $(this.getAttribute("href")).fadeIn();
         }

         function displayNone() {
             $('.pagecontainer>div').fadeOut(0);
         }

    });

</script>

<!--Scroll window for anchor links-->
<script type="text/javascript">
    $(document).ready(function() {
        $('.enablescroll').localScroll({
           target:'.pagecontainer', /*scroll within this parent div*/
           duration:500
        });

    });
</script> 
```

HTML：

```
<div class="pagecontainer">

    <div id="page1">

        <div class="sidelinks enablescroll">
            <a href="#main">Back to main</a>
            <p>
            <a href="#page1a">Page 1 A</a>
            <p>
            <a href="#page1b">Page 1 B</a>
            <p>
        </div>

        <div class="content">

            <div id="page1a">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vehicula vestibulum arcu vitae sodales. Nunc quam velit, tempus a vestibulum in, scelerisque in ipsum. Nam pretium imperdiet elementum. Nam nec sem magna, ut tempus augue. Donec vitae ipsum elit. Phasellus imperdiet arcu nec libero elementum eget volutpat purus dictum. Quisque congue porta sapien, vitae laoreet eros volutpat nec. Mauris sed leo nec justo molestie cursus ut vitae ipsum. Vestibulum ante odio, egestas elementum ullamcorper sit amet, tristique in lorem. 
            </div>

            <div id="page1b">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vehicula vestibulum arcu vitae sodales. Nunc quam velit, tempus a vestibulum in, scelerisque in ipsum. Nam pretium imperdiet elementum. Nam nec sem magna, ut tempus augue. Donec vitae ipsum elit. Phasellus imperdiet arcu nec libero elementum eget volutpat purus dictum. Quisque congue porta sapien, vitae laoreet eros volutpat nec. Mauris sed leo nec justo molestie cursus ut vitae ipsum. Vestibulum ante odio, egestas elementum ullamcorper sit amet, tristique in lorem. 
            </div>

        </div>
        <br>
        <br>
        <br>
    </div>  

    <div id="page2">

        <div class="sidelinks enablescroll">
            <a href="#main">Back to main</a>
            <p>
            <a href="#page2a">Page 2 A</a>
            <p>
            <a href="#page2b">Page 2 B</a>
            <p>
        </div>

        <div class="content">

            <div id="page2a">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vehicula vestibulum arcu vitae sodales. Nunc quam velit, tempus a vestibulum in, scelerisque in ipsum. Nam pretium imperdiet elementum. Nam nec sem magna, ut tempus augue. Donec vitae ipsum elit. Phasellus imperdiet arcu nec libero elementum eget volutpat purus dictum. Quisque congue porta sapien, vitae laoreet eros volutpat nec. Mauris sed leo nec justo molestie cursus ut vitae ipsum. Vestibulum ante odio, egestas elementum ullamcorper sit amet, tristique in lorem. 
            </div>

            <div id="page2b">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis vehicula vestibulum arcu vitae sodales. Nunc quam velit, tempus a vestibulum in, scelerisque in ipsum. Nam pretium imperdiet elementum. Nam nec sem magna, ut tempus augue. Donec vitae ipsum elit. Phasellus imperdiet arcu nec libero elementum eget volutpat purus dictum. Quisque congue porta sapien, vitae laoreet eros volutpat nec. Mauris sed leo nec justo molestie cursus ut vitae ipsum. Vestibulum ante odio, egestas elementum ullamcorper sit amet, tristique in lorem. 
            </div>

        </div>
        <br>
        <br>
        <br>
    </div>

</div> 
```

当我第一次导航到其中一个页面时，滚动效果很好。例如：

*   我转到第 1 页，由于 .pagecontainer 已将溢出设置为自动滚动条出现（内容部分中的文本超过 450px 高度）
*   我单击“page1b”的链接
*   该插件将为滚动设置动画并向下滚动到 page1b 的开头
*   然后我点击page2的链接
*   突然滚动条不再出现，但如果我点击链接“page2b”，它仍然会滚动，但只是没有可见的滚动条
*   我转到我网站的其他页面（为简单起见，此处未显示），这些页面的滚动条也消失了。如果我刷新页面，它只会自行修复

这是 jQuery.localscroll 的网页（以及滚动到的链接，我认为它们很相似）：[http ://flesler.blogspot.ca/2007/10/jquerylocalscroll-10.html](http://flesler.blogspot.ca/2007/10/jquerylocalscroll-10.html)

有谁知道可能导致此问题的原因是什么？谢谢。

# c# - 从类和接口继承

> ID：15313718
> 
> 赞同：-2
> 
> 时间：2013-03-09T17:27:07.937
> 
> 标签：c#

我写了一个简单的类，例如：

```
public class Pusher : IPusher,Hub
{
} 
```

我得到编译错误（`Interface definition is expected`），因为我们[应该](https://stackoverflow.com/questions/7194952/inherit-from-an-abstract-class-and-realize-an-interface-at-the-same-time)首先从类继承，然后是其他接口。

`public class Pusher : Hub,IPusher`但是和之间有什么区别`public class Pusher : IPusher,Hub`

我们也可以在具有默认值的方法参数中看到这样的对流

```
public void ExampleMethod(int required, string optionalstr = "default string") 
```

我们应该在参数的最后定义默认值参数。

这与CLR有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:38:23.497

不，它与 CLR 无关，这些是特定于语言的限制。

我无法确切找到为什么必须将继承的类放在接口之前，但这可能是为了清楚起见。该类只能从另一个类继承，但可以实现多个接口。如果您知道被继承的类总是放在第一位，就更容易看到发生了什么。

可选参数的排序更具实用性。C# 不允许空参数作为可选参数的占位符，因此您必须将它们放在最后（否则只能使用命名参数调用方法）。您不能像这样调用该方法：

```
ExampleMethod(42, ); 
```

要使用可选值调用，只需在调用中省略它：

```
ExampleMethod(42); 
```

因此，如果可选参数不是最后一个，它就不是可选的，因为你不能这样调用：

```
ExampleMethod(, 42); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:35:04.177

好吧，在第一种情况下，这只是一个约定。为了更好的可读性和编译时检查的简单性，我希望该类应该放在首位。但论点是另一种情况。想象一下，您为第一个参数指定默认值，而不是最新的参数。编译器应该如何检测您想说的内容。

示例： **int func(int a, int b = 10, int c)** 并且您调用**func(10, 20);** 这应该做什么？不能这么说。

编辑（示例 2）： **int func(int a, int b = 1, int c, int d = 2, int e)** 并调用**func(1,2,3,4);** 在这种情况下，不清楚哪个变量被省略了。它可以是 B 和 D。

# java - Java中一组整数的正则表达式

> ID：15313719
> 
> 赞同：0
> 
> 时间：2013-03-09T17:27:08.943
> 
> 标签：java, regex

以前从未在 Java 中尝试过这种模式匹配，我试图让它匹配：Int<-Int*Int 其中 * 可以是 * 或 +。匹配器返回 true 以匹配模式，但是当我尝试使用 group() 时，它返回一个错误，表示不匹配。我已经用这段代码试过了：

```
Pattern p = Pattern.compile("^(\\d+)<-(\\d+)[\\*\\+](\\d+)$");
            Matcher m = p.matcher(instrLine);
            System.out.println(m.group()); 
```

我已经用 1<-2*3 对其进行了测试，并且匹配返回 true 我可以使用 group() 来获取它。我假设它的正则表达式有问题。谢谢您的帮助。

# javascript - 用于复杂应用程序结构的 NodeJS 本地模块

> ID：15313720
> 
> 赞同：4
> 
> 时间：2013-03-09T17:27:09.090
> 
> 标签：javascript, node.js, modular, application-structure

我目前是使用 JavaScript 构建 Windows 8 应用程序的团队的一员。我们正在使用 npm 和 browserify 来管理依赖项并将我们的模块转换为 AMD 浏览器友好的格式。

我们遇到的一个问题是疯狂的需求路径。这是因为我们的应用程序“组件”中有一个顶级文件夹。此文件夹包含一堆嵌套的 ui 组件/模块。这些模块有时需要 lib utils 和 helpers，它们位于 lib 目录中。

例如，位于“my/app/components/product/grid/item”中的模块可能需要位于“my/app/lib/helpers/view”的帮助模块。

require 路径有点疯狂而且非常丑陋： require("../../../../lib/helpers/view");

我们正在尽最大努力以模块化方式构建应用程序。现在我认为解决这个问题的正确方法是让我们的组件模块依赖于这些 util 辅助模块。我可以将 lib 助手放入他们自己的外部私有 git 存储库中，但这在让其他团队访问方面很痛苦（而且 git 私有存储库很慢）。另外，由于这些模块仅在应用程序中使用，因此进行更改、推送更改、然后返回应用程序和 npm 更新是浪费时间。这对某些人来说很好，但如果我们真的把它分解，它可能会很快变老。

我可以在组件 package.json 中执行 npm install "my/app/lib/helpers/view" 吗？但是 npm install 不会自动为我们执行此操作。

我知道解决这个问题的其他一些方法（NODE_PATH，可能使用 npm install hook 或 npm preinstall script），但想知道是否有其他人有类似的问题和好的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T21:23:24.430

您可以将`"my/app/components/product/grid/item"`文件放入`node_modules/grid/item.js`其中，然后当您`require('grid/item')`在应用程序代码中时，您将使用更简洁的 require 路径语法获得所需的文件。只需`node_modules/grid/item.js`将其他文件检查到 git 中即可。该`node_modules/`目录甚至不需要位于顶层，因为 node 和 browserify 使用的 require 算法`node_modules/`将从当前路径一直搜索目录，`/`直到找到匹配的模块。

只需确保添加`"grid"`到[`"bundledDependencies"`](https://npmjs.org/doc/json.html#bundledDependencies)package.json 中的数组，这样您就不会意外在其上安装一些东西。

您可以阅读有关将[节点模块检查到 git](http://www.futurealoof.com/posts/nodemodules-in-git.html)的更多信息。

阅读[browserify 手册中关于避免 ../../../../../../](https://github.com/substack/browserify-handbook#avoiding-)的部分以获取更多信息。

NODE_PATH 总是一个坏主意，browserify 不支持它。永远不要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:52:43.693

您可以做的一件事是在您的需求配置中为您的助手创建一个别名...

```
require.config({
    paths: {
        "helpers": "my/app/lib/helpers"    
    }
}); 
```

这会减少你的一些漫长的道路。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T23:30:42.243

require() 函数的问题是路径是相对于当前文件的。您可以将模块放在 node_modules 目录中，但这是您能做的最糟糕的事情。node_modules 是所有第三方模块所在的目录。如果您遵循这个简单的规则，那么始终保持最新是非常容易和方便的，您可以删除所有依赖项（删除 node_modules）并且只需执行`npm install`.

最好的解决方案是定义自己的 require 函数并使其全局化。例如：

你的项目结构是：

```
my-project
| tools
|- docs
|- logs
|- conf
`- src
   |- node_modules
   |- package.json
   |- mod.js
   |- a
   |  `- b
   |     `- c.js
   `- d
      `- app.js 
```

mod.js

```
global.mod = function (file){
  return require ("./" + file);
}; 
```

应用程序.js

```
//This should be the first line in your main script
require ("../mod");

//Now all the modules are relative from the `src` directory
//You want to use the a/b/c.js module
var c = mod ("a/b/c"); 
```

就是这样，很简单。如果要获取位于 node_modules 中的第三方模块，请使用 require()。如果您想获得自己的模块，请使用 mod()。

请记住，node_modules 仅适用于第三方模块，规则 nº1。

# java - 如何在java中交换int的位置？

> ID：15313722
> 
> 赞同：2
> 
> 时间：2013-03-09T17:27:30.173
> 
> 标签：java, algorithm

我需要交换一个 int 的位置。例如，如果我调用方法 swapDigitPairs(482596)，它将返回 845269。交换 9 和 6，交换 2 和 5，以及交换 4 和 8。

如果该数字包含奇数位，则将最左边的数字留在原来的位置。例如，swapDigitPairs(1234567) 的调用将返回 1325476。我不打算使用字符串来解决，我应该使用 while 循环来解决它。我不应该使用任何数组。

以下是我到目前为止所做的。但是我被困在交换位置，我知道我需要根据数字乘以位置（如第十个，千个等）。但我被困在这部分。我所做的就是一一检索数字。

```
public static int swapDigitPairs(int number) {

    while(number!=0) {
        int firstDigit = number%10;

        for(int i =10;i<=;i*=10) {
            int secondDigit= firstDigit*i;
        }

        int leftOverDigit = number/10;

        number=leftOverDigit;

    }
    return number;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:56:18.057

这是解决方案（已测试）：

```
public static int swapDigitPairs(int number) {
    int result = 0;
    int place = 1;
    while (number > 9) {
        result += place * 10 * (number % 10);
        number /= 10;
        result += place * (number % 10);
        number /= 10;
        place *= 100;
    }
    return result + place * number;
} 
```

这里的关键点是：

*   循环使用数字右侧的数字，因此可以优雅地处理奇数/偶数处理区别
*   终止条件是至少还有两位数
*   循环逻辑每次迭代处理两位数
*   使用`%`带 10 的余数运算符（即`number % 10`）产生最后一位数字
*   整数除以 10 截断最后一位数字
*   没有必要在变量中保留最后一位数字 - 它只会使代码混乱

* * *

以下是一些测试和一些边缘案例：

```
public static void main(String[] args) throws Exception {
    System.out.println(swapDigitPairs(482596));
    System.out.println(swapDigitPairs(1234567));
    System.out.println(swapDigitPairs(12));
    System.out.println(swapDigitPairs(1));
    System.out.println(swapDigitPairs(0));
} 
```

输出：

```
845269
1325476
21
1
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:44:42.970

一个简单的解决方案是

```
 int i1 = 482596;
    char[] a = String.valueOf(i1).toCharArray();
    for (int i = 0; i < a.length - 1; i += 2) {
        char tmp = a[i];
        a[i] = a[i + 1];
        a[i + 1] = tmp;
    }
    int i2 = Integer.parseInt(new String(a)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T17:40:16.423

如果你有`abcdef`

然后`((a+b)*10000 + (c+d)*100 + (e+f)) * 11 - abcdef = badcfe`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T18:34:32.793

这是带有一些测试用例的代码

```
public class ReverseNumberDigit {

    /**
     * @param args
     */
    public static void main(String[] args) {
        System.out.println(reverseNumber(123456789));
        System.out.println(reverseNumber(12345678));
        System.out.println(reverseNumber(1234567));
        System.out.println(reverseNumber(123456));
        System.out.println(reverseNumber(12345));
        System.out.println(reverseNumber(1234));
        System.out.println(reverseNumber(123));
        System.out.println(reverseNumber(12));
        System.out.println(reverseNumber(1));

    }

    private static int reverseNumber(int orinalNumber) {
        int reverseNumber = 0;
        int x = 1;

        while(orinalNumber > 9){
        int lastNumber = orinalNumber %  10; 
        orinalNumber = orinalNumber / 10;
        int secondNumber = orinalNumber %  10;
        orinalNumber = orinalNumber / 10;
        reverseNumber = reverseNumber + (lastNumber * x * 10) + (secondNumber * x);
        x = x * 100;
        }
        if(orinalNumber > 0){
            reverseNumber = reverseNumber + orinalNumber * x;
        }
        return reverseNumber;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-27T17:42:59.337

我是 Java 新手，但这可能是另一种解决方案；

```
import java.util.Scanner;

public class DigitsPlaceSwap {

    public static void main(String[] args) {
        DigitsPlaceSwap demo = new DigitsPlaceSwap();

        System.out.print("Enter a whole number : ");
        Scanner stdin = new Scanner(System.in);
        int number = stdin.nextInt();

        demo.switchDigits( number );
    }

    public void switchDigits( int number ) {
        int getDigits = 0;
        int numberOfDigits = String.valueOf(number).length();
        String result = "";

        for( int i = 1; i <= numberOfDigits; i++) {
            getDigits = ( ( number % (int) Math.pow( 10, i ) ) / (int) Math.pow( 10, i - 1 ) );
            result += Integer.toString( getDigits );
        }

        System.out.println( "Swapped Number is : " + result );
    }
} 
```

它不会验证输入是否为范围内的正整数。我将其转换为字符串以使其在交换后在左侧打印零。

```
Enter a whole number : 342325400
Swapped Number is : 004523243 
```

# mysql - MySql - 在查询中连接左外连接

> ID：15313724
> 
> 赞同：8
> 
> 时间：2013-03-09T17:27:49.263
> 
> 标签：mysql, select, left-join, concat

我不明白。我试过了：

```
SELECT
table1.name, CONCAT( country,  '.', id ) AS table1.code,
table2.name
FROM tabel1
LEFT OUTER JOIN
table2 ON ( table1.code = table2.code ) 
```

我需要结合`country`和`id`to`country.id`因为`table2.code`有这个模式。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T17:42:50.727

如果我理解你是正确的，你可能需要这样的东西

```
SELECT t1.name t1_name,
       t2.name t2_name
FROM table1 t1 LEFT JOIN
     table2 t2 ON CONCAT(t1.country,  '.', t1.id ) = t2.code 
```

**[SQLFiddle 示例](http://sqlfiddle.com/#!2/a75d7/5)**

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-26T20:22:22.493

对于因连接性能不佳而拉出头发的任何人`ON CONCAT()`：确保将非字符串值转换为`CHAR`它可以显着提高性能：

```
SELECT t1.name t1_name,
       t2.name t2_name
FROM table1 t1 LEFT JOIN
     table2 t2 ON CONCAT(t1.country,  '.', CAST(t1.id AS CHAR) ) = t2.code 
```

[CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)函数的解释隐藏在 MySQL 文档中：

> …如果所有参数都是非二进制字符串，则结果是非二进制字符串。如果参数包含任何二进制字符串，则结果为二进制字符串。一个数字参数被转换成其等效的二进制字符串形式；如果你想避免这种情况，你可以使用显式类型转换**......** </p>

*这要[归功于 Aurimas Mikalauskas](https://www.percona.com/blog/2007/10/16/be-careful-when-joining-on-concat/)。*

# php - 属性值作为类名给出错误

> ID：15313725
> 
> 赞同：0
> 
> 时间：2013-03-09T17:28:02.140
> 
> 标签：php, error-handling, version

我创建了 delete.php 页面，该页面将接受类名和 id，如下所示：

```
if(isset($_GET['id']) && is_numeric(trim($_GET['id'])) ) {
    $id = $_GET['id'];
}
else{
    redirect_to($back);
}   
if(isset($_GET['cls'])  && class_exists($_GET['cls']) ) {
    $class = $_GET['cls'];
}
else {

    redirect_to($back);
} 
```

然后我将创建一个对象并调用它的删除方法：

```
$object = $class::find_by_id($id);
$object->delete(); 
```

它在我的本地主机（wamp 服务器）上运行良好。但是，当我将它上传到我的主机 (php 5.2) 时，它在我调用静态函数 $class::find_by_id($id) 的地方给出了这个错误：解析错误：语法错误，意外的 T_PAAMAYIM_NEKUDOTAYIM。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:30:56.610

您可能正在处理两个不同版本的 PHP。WAMP 附带 5.3`$class::find_by_id($id)`允许的地方，另一方面 PHP 5.2 不喜欢它。

试试这个：

```
$object = call_user_func(array($class,'find_by_id'),$id); 
```

如果这不起作用（我不明白为什么不起作用），您可以随时使用 eval （即使 eval 不好）：

```
eval("\$o=$f::find_by_id(\$id);"); 
```

当然，最好的解决方案是在您的服务器上升级到 PHP >= 5.3，但您可能无法控制它。

# encryption - N位密钥大小是什么意思

> ID：15313728
> 
> 赞同：0
> 
> 时间：2013-03-09T17:28:26.837
> 
> 标签：encryption, cryptography

我在 Cryptography 中读到了 Key_size，但我不完全理解 Key size 的具体含义是什么？
例如在维基百科中说：

> “三重 DES 的密钥大小为 168 位，但最多提供 112 位的安全性，因为已知复杂度为 2^112 的攻击”

这是否意味着如果我们暴力破解 2^112 次，那么我们可以破解所有 3DES 哈希？
128位加密和1024位加密有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:33:11.227

Okay. Let's take this one at a time.

**Key size**

In cryptography, you have three major elements.

The plaintext, the ciphertext and the key.

The key is combined with the encryption algorithm to encrypt the plaintext, and get the ciphertext. It's like the state of a function, that is:

```
 K = "This is the key".
 P = "Plaintext".
 C = Encrypt(P,K).

 // This would result in some ciphertext. 
```

If K was not equal to "This is the key", and was equal to "This is another key", then the value of C would be different.

The keysize is the size of the key used. For example, AES256 uses a 256 bit key. That means that the key is literally 256 binary numbers long.

*What is the difference between 128 bit encryption and 1024 bit encryption?*

The difference is in the title. 128 bit encryption encrypts data with a 128 bit key. 1024 bit encryption encrypts with 1024 bits of data. The important thing to note here is that with 128 bits, you're usually looking at a [Symmetric Key Cipher](http://en.wikipedia.org/wiki/Symmetric-key_algorithm), and with 1024 bits, you're usually looking at an [Asymmetric Encryption Algorithm](http://en.wikipedia.org/wiki/Public-key_cryptography).

**Brute Force Attack**

Yes. Following the AES256 example, if you perform 2^256 possible combinations of a key, you will eventually crack any and all AES256 ciphers. However, 2^256 is a massive number, and it's considered computationally unfeasible to attempt that value.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:31:30.247

这意味着通过 2 ^(112)次试用加密，您可以保证找到用于使用 3DES 加密某些内容的密钥。然而，这使用了“中间相遇”（MITM）攻击，它也需要大量的内存。

另请注意，3DES 只需要 112 位的密钥材料。您执行加密/解密/加密（EDE，最常见）或解密/加密/解密 (DED) 循环，但第一个和最后一个可以使用相同的密钥。168 位意味着您为每个周期使用单独的密钥。这很好，但并非完全必要。

至于密钥本身是什么，它基本上只是已知的比特的集合，但是（根据强烈偏好）其他人很难或不可能预测或猜测。在典型情况下，您不会直接使用用户输入的内容作为密钥。至少您通过加密哈希运行它以获得恒定大小的结果。鉴于用户通常输入的内容的可预测性，您通常希望更进一步：生成一个更加随机的密钥，并仅使用用户的密码来允许访问该密钥。这意味着（例如）虽然在物理访问他们的计算机的情况下恢复用户的密钥可能相当容易，但“通过网络”发送的数据（通常更容易拦截）使用的密钥远不如他们的可预测性密码本身。

就 128 位与 1024 位而言，两者通常不完全可比。这里很大一部分取决于攻击的难度。最坏的情况通常是密钥耗尽攻击。这基本上意味着您只需尝试所有可能的键，直到找到一个“有效”的键。

如果这是已知的针对算法的最佳攻击，那么 128 位左右的密钥大小几乎可以肯定足以应对“传统”技术的几乎任何可能的改进——也就是说，即使我们假设 CPU 将继续变得更快很长一段时间，假设可以构建数十甚至数百太赫兹的处理器，执行^(2128)次操作以耗尽关键空间仍然完全不切实际（例如，拥有数百万个 100 太赫兹的处理器，你仍然不在宇宙热死之前完成）。

具有对称加密的较大密钥大小*主要*是为了防止实际的量子计算机。具有足够容量的（工作）量子计算机可以执行与传统计算机不同类型的攻击，并且可以比传统计算机更快地耗尽密钥空间。这就是 AES 256 的来源。

当您获得比这大得多的密钥时，您通常会处理像 RSA 这样的加密，已知实际攻击*不*涉及进行试用加密，直到您找到“有效”的密钥。在 RSA 的情况下，需要公开的部分信息可以（相当容易地）转换为两个素数乘积的大数。如果您可以分解该数字以获得这两个素数，则可以相当容易地破解加密。

因此，在这种情况下，我们需要的强度是基于该产品足够大，以至于将其分解为不切实际。适合用作众所周知的已分解的 RSA 密钥的最大数字是 768 位。

因此，如果您对安全性和装备精良的攻击者感兴趣，那么对于 RSA，您显然需要一个比这更大的密钥。

请注意，对 2DES 的“中间相遇”攻击、对 2 密钥 3DES 的攻击和分解大 RSA 密钥具有一些共同特征：这使得攻击它们与攻击普通 DES 完全不同。使用 DES，您可以轻松地在花费多少和获得结果的速度之间进行权衡。（几乎）什么都不花，需要*很长时间*才能得到结果，但你最终会的。您愿意花费的越多，获得结果的速度就越快。

但是，对于其他攻击，您需要大量内存来执行攻击。对于这些，您（大多数情况下）不能只是扩展事物，因此花费一半的费用可以让您以一半的速度获得结果。相反，您需要切换到（例如）使用 SSD 而不是 DRAM 进行存储 - 并立即失去*很多*速度。或者，您可以切换到渐近不太有利的另一种算法，但进入门槛不高。同样，对于实际攻击，您通常会以这种方式很快失去很多。

底线：对于某些攻击，您可以在时间和金钱之间进行相当“平稳”的权衡。与其他人一起，您可以获得更多的阶梯函数；在许多情况下，实际攻击只会超出大多数人的能力（在大多数情况下，现在和未来很长一段时间内）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-09T17:32:38.950

The wikipedia has an entry on the key size: [http://en.wikipedia.org/wiki/Key_size](http://en.wikipedia.org/wiki/Key_size)

# css - 防止CSS中的荧光笔光标？

> ID：15313732
> 
> 赞同：13
> 
> 时间：2013-03-09T17:28:51.200
> 
> 标签：css, mouse-cursor

我`<a>`用来制作可以点击并用于 jQuery 的文本。我已经有了 CSS 使它无法突出显示：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
text-decoration: none; 
```

但是当它悬停时，它仍然会变成像衬线“I”形状的光标，就像文本通常那样。有什么办法可以防止这种情况发生，最好将其更改为链接通常会导致的“手”光标？我唯一想到的是在顶部有一个不可见的 div，但这会使它们无法点击，并且会保持正常的指针。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-09T17:30:27.793

只需在悬停时使用光标属性。

```
a:hover {
    cursor: pointer;
} 
```

您可以在此处查看可用的光标值[。](http://www.w3schools.com/cssref/pr_class_cursor.asp)

**示例[http://jsfiddle.net/8nyEE/](http://jsfiddle.net/8nyEE/)**

```
<a class="hand">link with hand cursor</a>

<br/><br/>

<a class="nohand">link with default cursor</a> 
```

```
a {color: blue;}

.hand:hover {
   cursor: pointer;
}

.nohand:hover {
   cursor: default;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-11-03T04:20:24.050

将`<a>`标签设置为`<a href="">`

正如 JJJ 在上面的评论中所说， href="#" 可以在这里使用，但是将 # 添加到 url。相反，将 href 设置为 "" 可以替代将链接发送到任何位置并删除 I 光标反应

编辑：这会重新加载页面并可能导致错误。很抱歉没有进一步阅读这个问题。设置包含文本`cursor: hand;`的所有子`<a>`标签应该可以解决问题

# vb.net - ContextMenuStrip 不显示附近的光标

> ID：15313734
> 
> 赞同：3
> 
> 时间：2013-03-09T17:28:56.797
> 
> 标签：vb.net, winforms, contextmenu

当我右键单击 datgridview 中的一行时，我正在尝试创建一个显示上下文菜单的事件。

这是正在发生的问题的图像：

![在此处输入图像描述](../Images/9961fc67e54aa5a18d774e188f0dcbc6.png)

这是我目前使用的代码：

```
Private Sub dgvStudents_CellMouseDown(ByVal sender As Object, ByVal e As System.Windows.Forms.DataGridViewCellMouseEventArgs) Handles dgvStudents.CellMouseDown
    Dim rowClicked As DataGridView.HitTestInfo = dgvStudents.HitTest(e.X, e.Y)
    'Select Right Clicked Row if its not the header row
    If e.Button = Windows.Forms.MouseButtons.Right AndAlso e.RowIndex > -1 Then
        'Clear any currently sellected rows
        dgvStudents.ClearSelection()
        Me.dgvStudents.Rows(e.RowIndex).Selected = True
        ContextMenuStrip1.Show(dgvStudents, Control.MousePosition)

    End If
End Sub 
```

PS屏幕截图没有显示我的光标>。>但它绝对没有与上下文菜单同步！

**编辑**：好的，我已经解决了，

我只是将 Control.MousePosition 替换为 MousePosition 并且它起作用了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-07T23:28:11.923

这些都不适合我。使菜单在鼠标下弹出的解决方案是：

```
ContextMenuStrip1.Show(MousePosition.X, MousePosition.Y) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T17:56:39.193

Mouse.Position 在屏幕坐标中。您需要提供相对坐标，相对于 dgvStudents。通过事件参数，它们被放在一个银盘上交给你：

```
 ContextMenuStrip1.Show(dgvStudents, e.Location) 
```

上下文菜单通常会在鼠标上移时显示，因此请改用 CellMouseUp 事件。

# javascript - .Net MVC 3 Telerik DropDownList 未触发事件 OnChange

> ID：15313736
> 
> 赞同：1
> 
> 时间：2013-03-09T17:28:59.727
> 
> 标签：javascript, .net, asp.net-mvc-3, razor, telerik

我有`DropDownList`一个绑定到`ViewData`完美填充列表的一个。

我想在“OnChange”事件触发时提交用户选择。但我正在努力让它发挥作用，实际上什么也没发生。

```
<fieldset style="width: 300px;">
                        <legend>Change Vehicle</legend>

                            @{Html.Telerik().DropDownList()
                            .Name("UpdateVehicleTypeNumbers")
                            .BindTo((IEnumerable<DropDownItem>)ViewData["PlantItemsDropDown"])
                            .Enable(true)
                            .ClientEvents(events => events.OnChange("submitVehicle"))
                            .HtmlAttributes(
                                    new { @id = "vehicle"})
                            .Render(); 
                            }

                    </fieldset> 
```

我认为错误可能出在 JavaScript 代码中。

```
 function submitVehicle(){       
        window.location = '../Operator/GPS?jobId=' + @the_job_id + '&vehicleId=' + $("#vehicle").val();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:32:57.530

我找到了解决方案：显然 Telerik 元素可以使用名称约定访问：`tElementName` 在我的情况下，以下代码有效：

```
function submitVehicle(){       
        var veh = $("#UpdateVehicleTypeNumbers").data("tDropDownList").value();
        //etc 
```

# jquery - Jquery 错误：未捕获的错误：语法错误，无法识别的表达式：

> ID：15313737
> 
> 赞同：1
> 
> 时间：2013-03-09T17:29:11.003
> 
> 标签：jquery, html

我正在调用并加载 html 文件。它的文件包含 3 个`<div>`标签。第一个装载在一个容器中。第二个在另一个，所以第三个。这是我的ajax查询的代码

```
$.ajax(
                {  
                    url: 'files/' + href,                       
                    async: true,
                    success: function(XML){
                        console.log("It's a success");
                        var xml = XML;
                        var desc = $(xml).find("div").eq(0).html();
                        $("#listView .list_detail:eq(0)").html(desc);
                        var rule = $(xml).find("div").eq(1).html();
                        $("#listView .list_detail:eq(1)").html(rule);
                        var em = $(xml).find("div").eq(2).html();
                        $("#listView .list_detail:eq(2)").html(em);
                        $("#listView .list_detail:eq(0)").slideDown();
                    }
}); 
```

但是我在加载该 html 文件时遇到错误。

`Uncaught Error: Syntax error, unrecognized expression: <div>`

每个 html 文件都像

```
<div> the list
    <ul>3 rounds
    <li>first round
    <li>second round 
    </ul>
</div> 
<div> data data </div>
<div> data data </div>` 
```

怎么了？我没有得到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:01:08.050

像这样尝试并检查这是否有效......

```
$.ajax(
                {  
                    url: 'files/' + href,                       
                    async: true,
                    success: function(data){
                        console.log("It's a success");
                        var resultData= $(data);
                        var desc = $(resultData).find("div").eq(0).html();
                        $("#listView .list_detail:eq(0)").html(desc);
                        var rule = $(resultData).find("div").eq(1).html();
                        $("#listView .list_detail:eq(1)").html(rule);
                        var em = $(resultData).find("div").eq(2).html();
                        $("#listView .list_detail:eq(2)").html(em);
                        $("#listView .list_detail:eq(0)").slideDown();
                    }
}); 
```

如果它不工作，那么让我知道你得到以下代码的结果

```
$.ajax(
                {  
                    url: 'files/' + href,                       
                    async: true,
                    success: function(data){
                        alert(""success); // is it showing this alert box?
                        var resultData= $(data);
                        alert(resultData.length);//is it showing this length properly?
                        var desc = $(resultData).find("div").eq(0).html();
                        alert(desc.length);//is it showing this length properly?
                        $("#listView .list_detail:eq(0)").html(desc);
                        alert($("#listView .list_detail:eq(0)").length);//is it showing this length properly?
                        var rule = $(resultData).find("div").eq(1).html();
                        $("#listView .list_detail:eq(1)").html(rule);
                        var em = $(resultData).find("div").eq(2).html();
                        $("#listView .list_detail:eq(2)").html(em);
                        $("#listView .list_detail:eq(0)").slideDown();
                    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:03:21.327

它应该是

```
$.ajax(
                {  
                    url: 'files/' + href,                       
                    async: true,
                    success: function(data){
                        console.log("It's a success");
                        var resultData= $(data);
                        var desc = $(resultData).find("div").eq(0).html();
                        $("#listView .list_detail:eq(0)").html(desc);
                        var rule = $(resultData).find("div").eq(1).html();
                        $("#listView .list_detail:eq(1)").html(rule);
                        var em = $(resultData).find("div").eq(2).html();
                        $("#listView .list_detail:eq(2)").html(em);
                        $("#listView .list_detail:eq(0)").slideDown();
                    }
}); 
```

和 HTML ：你忘了关闭`</li>`

```
<div> the list
    <ul>3 rounds
    <li>first round</li>
    <li>second round </li>
    </ul>
</div> 
<div> data data </div>
<div> data data </div>` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:16:40.053

```
$.ajax(
                {  
                    url: '文件/' + href,                       
                    异步：真，
                    成功：函数（XML）{
                        console.log("成功了");
                        var xml = XML;
                        var desc = $($(xml)[0]).html();
                        $("#listView .list_detail:eq(0)").html(desc);
                        var rule = $($(xml)[1]).html();
                        $("#listView .list_detail:eq(1)").html(rule);
                        var em = $($(xml)[2]).html();
                        $("#listView .list_detail:eq(2)").html(em);
                        $("#listView .list_detail:eq(0)").slideDown();
                    }
});
```

# javascript - MediaElement.js 中的 Cortado Ogg 播放器 - 几乎可以正常工作

> ID：15313738
> 
> 赞同：3
> 
> 时间：2013-03-09T17:29:13.243
> 
> 标签：javascript, dom, mediaelement.js, ogg, cortado

我对 MEjs 演示播放器进行了一些更改，以便使用 Cortado Java 小程序在 IE/Safari 浏览器中播放 OGG。

我有播放/暂停工作，虽然 getPlayPosition() 没有按照[文档](http://git.xiph.org/?p=cortado.git;a=blob;f=README)中的描述以毫秒为单位获得当前位置，`applet.currentTime`并且`applet.duration`为此目的工作得很好。

我认为将这些连接到 mejs 播放器上的当前位置指示器会很简单，但我遇到了问题。`setCurrentTime`在 IE中导致对象上的`DOM Exception: InVALID_STATE_ERR (11)`错误，并且在 Safari 中发生类似的错误。显然我试图设置的对象不再存在？

下面的代码将播放和暂停，甚至在控制台中给出秒/总数（必须在 IE 中启用 F12 工具。）有没有很好的方法可以将它连接到播放栏？

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>HTML5 MediaElement</title>   

    <script src="../build/jquery.js"></script>  
    <script src="../build/mediaelement-and-player.js"></script>
    <link rel="stylesheet" href="../build/mediaelementplayer.min.css" />
</head>
<body>

<h1>MediaElementPlayer.js</h1>

<p>Audio player</p>

<h2>OGG Player</h2>
<audio id="player2" src="http://www.archive.org/download/memoirs_holmes_0709_librivox/holmesmemoirs02doyle.ogg" type="" controls="controls">        
</audio>

<script>
MediaElementPlayer.prototype.buildplaypauseOrig = 
MediaElementPlayer.prototype.buildplaypause;
MediaElementPlayer.prototype.buildplaypause = function(a,b,c,d) {
    if (d.src.indexOf('.ogg') !=-1 /* && IE or safari */) {
        if (jQuery(this.$node).find('applet').length==0) {
            jQuery(this.$node).append('<applet code="com.fluendo.player.Cortado.class" codebase="http://theora.org/" archive="cortado.jar" width="100" height="100">'+
            '<param name="url" value="'+d.src+'"/><param name="seekable" value="true"/><param name="autoPlay", value="false"/></applet>');
        }
        var el = this.$node; //mejs audio element
        var initonload = function() {
            if (el.find('applet')[0].isActive) {
                var applet = el.find('applet')[0];
                // This is where it fails: mejs.players[0].setCurrentTime or d.setCurrentTime cause dom exception
                console.log(applet.code);
                        console.log(applet.currentTime);
                /*mejs.players[0]*/ //d.setCurrentTime(applet.currentTime);
                console.log(applet.duration);
                /*mejs.players[0]*/ //d.media.duration = applet.duration;
            } else {
                window.setTimeout(initonload,100);
            }
        }
        d.addEventListener("play",function() {
            var audio = el.attr('src');
            window.setInterval(function() {
                //try {
                var applet = el.find('applet')[0];
                console.log(applet.currentTime);
                // This is where it fails: mejs.players[0].setCurrentTime or d.setCurrentTime cause dom exception
                //mejs.players[0].setCurrentTime(applet.currentTime);
                console.log(applet.duration);
                /*mejs.players[0]*/ //d.media.duration = applet.duration;

                //}catch(e) {console.log(e)}
                //console.log(applet.getPlayPosition()+"ms");
            },1000);
            //jQuery(this).find('applet')[0].setParam('url',audio);
            el.find('applet')[0].doPlay();
        });
        d.addEventListener("pause",function() {
            var applet = el.find('applet')[0];
            applet.doPause();
        });
        d.addEventListener("load",function(e) {
            alert('load');
        });
    }
    this.buildplaypauseOrig(a,b,c,d);
}

mejs.HtmlMediaElementShim.determinePlaybackOrig = 
mejs.HtmlMediaElementShim.determinePlayback
mejs.HtmlMediaElementShim.determinePlayback = function(htmlMediaElement, options, supportsMediaTag, isMediaTag, src) {
    var res = this.determinePlaybackOrig(htmlMediaElement, options, supportsMediaTag, isMediaTag, src);
    //if (mejs.MediaFeatures.isIE) {
        res.method = 'native';
    //}
    return res;
}

$('audio,video').mediaelementplayer();

</script>

</body>
</html> 
```

这是使用 MeJS 2.10.3。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-25T13:06:17.860

**[编辑]**
检查[MediaElement.js](http://mediaelementjs.com/)代码后，它似乎`mejs.players`不是一个数组，而是一个对象，为了访问第一个播放器，您必须查看，`mejs.players['mep_0']`因为.`mejs.players[0]``undefined`

* * *

我的猜测是 jQuery 无法创建交互式`<applet>`元素，因为根据我的经验，jQuery（严重依赖 jQuery `document.createDocumentFragment`）有时无法在动态创建/克隆的 DOM 节点上附加/触发事件，尤其是在 IE 中，这可能是原因对于您看到的这个 DOM 错误，因为您的`<applet>`对象可能无法初始化。

要尝试解决此问题，我建议使用本机`document.createElement`和`document.appendChild`方法而不是`jQuery.append`.

```
if (jQuery(this.$node).find('applet').length==0) {
    var createElem = function(name, attributes) {
        var el = document.createElement(name);
        attributes = attributes || {};
        for (var a in attributes) {
            el.setAttribute(a, attributes[a]);
        }
        return el;
    };
    var applet = createElem('applet',{
        code:'com.fluendo.player.Cortado.class',
        codebase: 'http://theora.org/',
        archive: 'cortado.jar',
        width: 100,
        height: 100
    });
    applet.appendChild(createElem('param', {name:'url', value:d.src}));
    applet.appendChild(createElem('param', {name:'seekable', value: 'true'}));
    applet.appendChild(createElem('param', {name:'autoPlay', value: 'false'}));
    this.$node.get(0).appendChild(applet);
} 
```

# ruby-on-rails - 将 text_field 中用户的输入解析为模型，然后显示视图

> ID：15313739
> 
> 赞同：1
> 
> 时间：2013-03-09T17:29:27.327
> 
> 标签：ruby-on-rails, ruby

以下是我试图从 API 调用中解析数据的具体步骤：

用户在 text_field 中输入邮政编码，点击 submit_tag 按钮 调用 wunderground API 进行每小时预测 存储来自 API 调用的数据以进行解析，可能在实例变量中......？根据解析的天气，它将显示两个页面之一（热或冷）

一个问题，我要么不知道我在这里做什么，要么就是太琐碎了，我把整个过程复杂化了。（我经常这样做）

你会采取哪些步骤来完成这项任务？在过去的一周里，我完全迷失了，并在互联网上寻找答案，请帮忙？感谢您的关注！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:56:05.710

你可以在模型中有这样的东西，所以你不需要将它保存在数据库中

```
class Foo << ActiveRecord::Base

  attr_accessor :zipcode
  attr_accessible :zipcode

 def process_zipcode
   ## make api call and get data
 end 
```

结尾

在这里您不需要将邮政编码保存在数据库中。

# c# - 异步 sqlConnection 异常

> ID：15313741
> 
> 赞同：0
> 
> 时间：2013-03-09T17:29:49.853
> 
> 标签：c#, sql, asynchronous, async-await

我正在尝试编写与我的 SQL 服务器的异步连接，但我遇到了异常。MSDN 对此没有太大帮助。我的第一种方法是：

```
async Task dbConnAsync(SqlConnection conn)
    {
        try
        {
            await conn.OpenAsync(); //Here i get InvalidOperationException
        }
        catch (Exception ex)
        {
            MessageBoxResult result = System.Windows.MessageBox.Show(ex.Message);
        }
    }

    private async void ReadDB()
    {
            try
            {
                Task theTask = dbConnAsync(conn);
                await theTask;                  
            }.....
    } 
```

第二个：

```
private async void dbConnection()
    {
            try
            {
                 await conn.OpenAsync();               
            }.....
    } 
```

经过多次尝试后，我决定咨询专家，那么当程序无法连接到服务器时如何捕获异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:33:47.017

异常告诉你连接已经在打开过程中。可能您`conn.OpenAsync`之前没有等待它完成就打过电话。可能您缺少一个`await`.

所以解决方法不是捕捉异常，而是消除根本原因。抓捕只是治标不治本。

# silverlight - 在silverlight中读取文本文件中的特殊字符

> ID：15313742
> 
> 赞同：0
> 
> 时间：2013-03-09T17:30:03.310
> 
> 标签：silverlight

我有一个包含特殊字符的文本文件。内容是这样的。

**带 à 和 é 的测试笔记**

在记事本中打开文本文件时，它看起来很好。但是当使用 StreamReader 读取文件的内容时。这些特殊字符更改为看起来像 ? 包裹在菱形中。

我确实使用了标准编码 UTF-8 但无济于事

# java - 我自己的 GAE/J 日志处理程序（使用 appengine.api.log？）

> ID：15313746
> 
> 赞同：0
> 
> 时间：2013-03-09T17:30:26.093
> 
> 标签：java, google-app-engine, logging

我需要在 GAE/J 上编写自己的日志处理程序。我有我正在尝试调整的 Android 代码，以便它可以在 GAE/J 和 Android 之间共享。我正在尝试编写的 GAE 代码将允许我现有代码中的日志语句在 GAE 上工作。

文档说我可以打印到 system.out 和 system.err，它可以工作，但效果很差。我的日志在日志查看器中显示了太多无关的文本：

> 2013-03-08 19:37:11.355 [s~satethbreft22/1.365820955097965155].: [my_log_msg]

所以，我开始研究[GAE 日志 API](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/log/package-summary)。这最初看起来很有希望：我可以构造一个 AppLogLine 并为 RequestLogs 对象设置日志记录。

但是，无法获取当前请求的 RequestLogs 实例 - 文档[在这里明确说明](https://developers.google.com/appengine/docs/java/runtime#The_Environment)：

> 注意：目前 App Engine 不支持使用请求 ID 直接查找相关日志。

我想我可以发明一个新的 requestID 并在其中添加日志行，但它开始看起来好像不是故意的？

是否有人使用此 API 创建自己的日志记录，或以其他方式设法将自己的日志记录到日志控制台。

另外，我在哪里可以找到 GAE 的 java.util.logging 的源代码？这是公开的吗？如果可以的话，我想看看它是如何工作的。

如果我想要做的事情是不可能的，那么我将需要考虑其他选项，例如将我的日志输出写入 FusionTable。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T17:40:45.727

我最终只是将我的日志代码分层放在 GAE 的 java.util.logging 之上。这感觉不是最佳的，因为它增加了我的日志记录的复杂性和开销，但我想这是任何 GAE 的第 3 个日志记录框架必须做的（除非在您打印到标准输出时添加的额外内容是可以的）。

这是我的代码的症结所在：

```
public int println(int priority, String msg) {
    Throwable t = new Throwable();
    StackTraceElement[] stackTrace = t.getStackTrace();

    // Optional: translate from Android log levels to GAE log levels.
    final Level[] levels = { Level.FINEST, Level.FINER, Level.FINE, Level.CONFIG,Level.INFO, Level.WARNING, Level.SEVERE, Level.SEVERE };
    Level level = levels[priority];

    LogRecord lr = new LogRecord(level, msg);
    if (stackTrace.length > 2) { // should always be true
        lr.setSourceClassName(stackTrace[2].getClassName());
        lr.setSourceMethodName(stackTrace[2].getMethodName());
    }
    log.log(lr);
    return 0;
} 
```

请注意，我使用的堆栈深度为 2，但 # 将取决于您的日志记录代码的“深度”。

我希望 Google 最终会支持获取当前的 com.google.appengine.api.log.RequestLogs 实例并将我们自己的 AppLogLine 实例插入其中。（API 确实可以做到这一点，但他们明确不支持它，如上所述。）

# php - 如何用str_replace替换文件中的文本？

> ID：15313752
> 
> 赞同：1
> 
> 时间：2013-03-09T17:30:52.357
> 
> 标签：php, arrays, foreach, str-replace

像这样的东西：

```
$vars = array("key" => "value", "key2" => "value2" //..etc);

function ($template, $vars) {
  $file = file_get_contents($template);
  foreach ($vars as $key => $value) {
    str_replace($template //this is where I get confused);

  }
} 
```

这个想法是获取模板文件的内容（仅包括 html），然后 foreach 将运行并将作为 vars 数组内“键”的文本替换为 vars 数组内的“值”字段的文本。因此，假设我的模板文件文本中有某个地方，例如“{content}”。该函数应该找到该字符串（包括我知道我没有在示例中指定它们的大括号）并将其替换为数组中的相应值。

我觉得我对 str_replace() 函数的理解不够。PHP.net 也没有多大帮助，据我了解，它是这样的：

```
str_replace($replacethese, $withthese, $inthisfile); 
```

很简单，但是当我的数组是二维的时，我该怎么做呢？我的“$replacethese”参数必须是 $vars 数组的“键”值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:36:22.383

您可以使用`array_keys()`and`array_values()`来获取`$vars`. 试试这个：

```
$replace = array_keys($vars);
$with = array_values($vars);
$file = str_replace($replace, $with, $file); 
```

**编辑：**

@EL 说那`strtr()`更好:)。所以你可以试试：

```
$file = strtr($file, $vars); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:37:12.790

您不需要 foreach 循环，只需像这样的单个 str_replace 调用就可以完成这项工作：

```
str_replace(array_keys($vars), array_values($vars), $fileData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:37:15.373

```
<?php
function ($template, $vars) {
  $data = file_get_contents($template);
  $data = str_replace(array_keys($vars), array_values($vars), $data);
  file_put_contents($template, $data);
} 
```

# ios - 如何使用 AFNetworking 将 JSON 对象发送到 iOS 中的服务器？

> ID：15313754
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:31:05.147
> 
> 标签：ios, objective-c, afnetworking

我已经按照以下规则将一些数据放入字典中，`NSJSONSerialization`并检索了我的`JSONString`. 如何将此 JSON 对象发送`AFNetworking`到服务器？

我需要从名字，姓氏，一些数字等表格中传递一些信息并将其发送到服务器。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:36:06.033

`AFNetworking`具有做文章的内在能力。这是一个包含详细信息的教程。

[http://samwize.com/2012/10/25/simple-get-post-afnetworking/](http://samwize.com/2012/10/25/simple-get-post-afnetworking/)

# android - 服务中的 ACTION_BATTERY_CHANGED 意图

> ID：15313758
> 
> 赞同：3
> 
> 时间：2013-03-09T17:31:38.477
> 
> 标签：android

我正在使用此代码来跟踪我的服务中的电池信息：

```
 Intent i = new ContextWrapper(applicationContext).registerReceiver(null, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
     // now you can get the level and scale from this intent variable
    int level = i.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
    int scale = i.getIntExtra(BatteryManager.EXTRA_SCALE, -1);

float battPct = level/(float)scale; 
```

1.我想知道它是否会自动更换然后更换电池？还是我需要自己定期触发该意图？2\. 另外我想知道是否有一种方法可以计算自使用了 1% 的剩余电池以来经过了多少时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T17:33:30.157

> Better way to get change value you should use `BroadcastReceiver`.

To get changed value when battery change. You need to use `BroadCastReceiver`.

```
IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
registerReceiver(batteryLevelReceiver, batteryLevelFilter);

BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver(){
    @Override
    public void onReceive(Context context, Intent intent){
        int level = intent.getIntExtra(BatteryManager.EXTRA_LEVEL, -1);
        int scale = intent.getIntExtra(BatteryManager.EXTRA_SCALE, -1);
        float battPct = level/(float)scale;       
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-19T16:11:32.263

**以下事情对我有用：**

在清单文件中，查找`**<activity android:name=".MainActivity">**` 并替换为`***<activity android:name=".MainActivity" android:exported="true">***`

# javascript - html 的

> ID：15313760
> 
> 赞同：0
> 
> 时间：2013-03-09T17:31:39.703
> 
> 标签：javascript, html

我有 javascript 的问题。我需要为页面中的所有 img 标签添加 onclick 侦听器，因此单击图像应调用 imageClicked 并将元素传递给函数。但是这段代码一直通过 img src="../images/3.jpg" 来运行。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" href="style.css" type="text/css" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Sample Page</title>
</head>

<body onload="start()">
<script type="text/javascript">
    function start(){
        var images = document.getElementsByTagName("img");
        for ( var i = 0; i < images.length; i++) {
            var image=images[i];
            image.addEventListener('click', function(){
                imageClicked(image);
            });
        }
    }
    function imageClicked(image){
        alert(image.src)
    }
</script>
<div id="main">
    <div id="center">
        <button>نمایش اسلایدی</button>
    </div>
    <div id="gallery">
        <div id="img1" class="image">
            <img src="../images/1.jpg"></img>
            <div id="title">
                <label>عکس</label>
            </div>
        </div>
        <div id="img2" class="image">
            <img src="../images/2.jpg"></img>
            <div id="title">
                <label>عکس</label>
            </div>
        </div>
        <div id="img" class="image">
            <img src="../images/3.jpg"></img>
            <div id="title">
                <label>عکس</label>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:33:22.693

That is because of the scope. Everytime you loop the image value is set again. And so it will always pass the last image in the loop.

You can do 2 thing. Use the `this` like below. Or create an anonymouse function.

```
function start(){
    var images = document.getElementsByTagName("img");
    for ( var i = 0; i < images.length; i++) {
        images[i].addEventListener('click', function(){
            imageClicked(this);
        });
    }
}

// Or even better

function start(){
    var images = document.getElementsByTagName("img");
    for ( var i = 0; i < images.length; i++) {
        images[i].addEventListener('click', imageClicked);
    }
}
function imageClicked(){
    alert(this.src); // this refers to the image
} 
```

Anonymouse function:

```
function start(){
    var images = document.getElementsByTagName("img");
    for ( var i = 0; i < images.length; i++) {
        (function(image){
            image.addEventListener('click', function(){
                imageClicked(image); // Use the element clicked object (this)
            });
        })(images[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:39:44.303

你想要的是这样的：

```
function start(){
    var images = document.getElementsByTagName("img");
    for ( var i = 0; i < images.length; i++) {
        images[i].addEventListener('click', function(){
            imageClicked(this);
        });
    }
}
function imageClicked(image){
    alert(image.src)
} 
```

在您编写的代码中，您复制了图像元素，然后将 eventListener 分配给对象的*副本*。因为这个副本被多次覆盖，所以 imageClicked 被唯一没有被覆盖的图像引用，最后一个图像。这`this` 是在回调函数中引用实际的图像元素。

# android - Android Fragment View 无法选择布局

> ID：15313761
> 
> 赞同：0
> 
> 时间：2013-03-09T17:31:46.163
> 
> 标签：android, android-fragmentactivity

我正在学习在 android 上创建应用程序，但片段功能存在问题。

我使用 eclipse 创建了一个新的黑色活动，并选择了“滑动视图+标题条”导航类型。

我运行了它，它完全可以显示第 1 节、第 2 节、第 3 节。我想做的是为每个部分选择不同的布局，所以我以这种方式调整了代码：

```
package fr.mpsn.networkclient;

import android.R.layout;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class HomeActivity extends FragmentActivity {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide
     * fragments for each of the sections. We use a
     * {@link android.support.v4.app.FragmentPagerAdapter} derivative, which
     * will keep every loaded fragment in memory. If this becomes too memory
     * intensive, it may be best to switch to a
     * {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);

        // Create the adapter that will return a fragment for each of the three
        // primary sections of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(
                getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to
     * one of the sections/tabs/pages.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            // getItem is called to instantiate the fragment for the given page.
            // Return a DummySectionFragment (defined as a static inner class
            // below) with the page number as its lone argument.
            Log.i("info", ""+position);
            Fragment fragment = new DummySectionFragment("view_publishmessage");
            switch (position) {
            case 0:
                fragment =null;
                fragment = new DummySectionFragment("view_publishmessage");
            case 1:
                fragment =null;
                fragment = new DummySectionFragment("view_timeline");
            case 2:
                fragment =null;
                fragment = new DummySectionFragment("view_profile");
            }

            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            // Show 3 total pages.
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
            case 0:
                return "Nouvelle publication".toUpperCase();
            case 1:
                return "Timeline".toUpperCase();
            case 2:
                return "Profil".toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply
     * displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        /**
         * The fragment argument representing the section number for this
         * fragment.
         */
        public static final String ARG_SECTION_NUMBER = "section_number";
        public final String fragmentLayoutName;

        public DummySectionFragment(String fragmentLayoutName) {
            this.fragmentLayoutName = fragmentLayoutName;
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Create a new TextView and set its text to the fragment's section
            // number argument value.

            return inflater.inflate(
                    this.getResources().getIdentifier(this.fragmentLayoutName,
                            "layout", "fr.mpsn.networkclient"), null);
        }
    }

} 
```

问题是所有不同的部分都使用视图配置文件布局，即使案例被正确解析......

您对如何改进此代码以使其更好地工作有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:44:16.590

你没有错过你的一些`break`陈述`switch`吗？没有它，代码继续下一个案例：

```
switch(cond) {
case A:
  print("hello!");
  //break;
case B:
  print("hello again!");
  //break;
}
=> 
hello! 
hello again! 
```

此外，最好对片段使用空构造函数，否则在重新创建片段时（例如在配置更改之后）会出现问题。
请参阅[片段真的需要一个空的构造函数吗？](https://stackoverflow.com/questions/10450348/do-fragments-really-need-an-empty-constructor)

您可以使用`Fragment.setArguments()`and`Fragment.getArguments()`传递您的`fragmentLayoutName`.

# ruby - 安装 gem 时出错

> ID：15313762
> 
> 赞同：0
> 
> 时间：2013-03-09T17:31:57.697
> 
> 标签：ruby, linux, ubuntu, gem

```
greg@greg-VirtualBox:~$ gem install twitter
/home/greg/.rvm/bin/gem: line 6: /home/greg/.rvm/bin/gem: Argument list too long
/home/greg/.rvm/bin/gem: line 6: /home/greg/.rvm/bin/gem: Success 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:15:22.600

尝试使用：`gem install t`。我希望这就是你要找的东西[Twitter Ruby Gem](http://sferik.github.com/twitter/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T19:34:01.810

好的，感谢您的澄清。我首先以为您可以访问 GUI 界面。在这种情况下，请尝试从您的用户文件夹中删除所有 .rvm，然后尝试重新安装。让我看看情况如何。

# c++ - Base2 to Base10 converter won't work with very large numbers?

> ID：15313765
> 
> 赞同：0
> 
> 时间：2013-03-09T17:32:17.800
> 
> 标签：c++, visual-studio-2012, binary, decimal

If the user inputs a very large number in binary the output shows a 0, how would I go about modifying this function to work with larger numbers?

```
{ 
    // Binary to Decimal converter function

    int bin_Dec(int myInteger)
    {
    int output = 0;
    for(int index=0; myInteger > 0; index++ )
    {
    if(myInteger %10 == 1)
        {
            output += pow(2, index); 
        }
    myInteger /= 10;
    }
    return output;
    }

    int _tmain(int argc, _TCHAR* argv[])
    { // start main

    int myNumber;

    // get number from user

    cout << "Enter a binary number, Base2: "; // ask for number 
    cin >> myNumber;

    //print conversion

    cout << "Base10: " << bin_Dec(myNumber) << endl; // print conversion
    system("pause");

    } // end of main
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:47:16.053

停止将您的“二进制数”作为`int`. int 的大小是有限的；最大值一般在20亿左右，也就是10位数。当您将数字滥用为位时，最多可为您提供 10 *bits*，相当于 1023。

取而代之`string`。您没有对输入进行任何有用的数学运算；无论如何，您只是将其用作一串数字。

```
// oh, and unless you have good reason...this would be better unsigned.
// Otherwise your computer might catch fire when you specify a number larger
// than INT_MAX.  With an unsigned int, it's guaranteed to just lop off the
// high bits.
// (I may be overstating the "catch fire" part.  But the behavior is undefined.)
unsigned int bin_to_dec(std::string const &n) {
    unsigned int result = 0;
    for (auto it = n.begin(); it != n.end(); ++it) {
        result <<= 1;
        if (*it == '1') result |= 1;
    }
    return result;
} 
```

但是，如果您有 C++11，那么当您指定基数 2 时，有`std::stoi`和家族（在 中定义`<string>`）将为您执行此操作。除非您出于学习目的而重新发明轮子，否则最好使用它们。

```
std::cout << "Base10: " << std::stoi(myNumberString, 0, 2) << '\n'; 
```

# api - Building modified AOSP throws error (Trying to change API)

> ID：15313766
> 
> 赞同：5
> 
> 时间：2013-03-09T17:32:19.140
> 
> 标签：api, build, hide, android-source

```
out/target/common/obj/PACKAGING/public_api.txt:4316: error 5: Added public field android.app.admin.DevicePolicyManager.PASSWORD_QUALITY_MOVEMENT

******************************
You have tried to change the API from what has been previously approved.

To make these errors go away, you have two choices:
   1) You can add "@hide" javadoc comments to the methods, etc. listed in the
      errors above.

   2) You can update current.txt by executing the following command:
         make update-api

      To submit the revised current.txt to the main Android repository,
      you will need approval.
****************************** 
```

So i tried to add an @hide annotation to my member variable, but it will only give me another error:

```
frameworks/base/core/java/android/app/admin/DevicePolicyManager.java:233: cannot find symbol
symbol  : class hide
location: class android.app.admin.DevicePolicyManager
    @hide 
```

How can I solve this problem?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:42:50.997

我犯了使用`@hide`such的错误`@Override`，但您必须在 JavaDoc 注释中使用它：

```
/**
  * @hide
  */ 
```

# batch-file - way to execute different folders' scripts using one bat file from one location

> ID：15313771
> 
> 赞同：1
> 
> 时间：2013-03-09T17:32:43.893
> 
> 标签：batch-file, sql-server-2008-r2, sqlcmd

I have to execute a bulk of scripts on sql server 2008r2.These scripts are present in many folders and subfolders.I created a batch file to execute these scripts but my problem is i have to put this bat file in a folder to execute the concerned folder's scripts.So, if there are more than 10 folders so i have to put it this bat file 10 times in a folder.Is there any way so that i can put my bat file just once wherever i want(like on desktop) and execute the folder's files?

.bat file:-

```
for %%G in (*.sql) do sqlcmd /S %1 /d %2 -E   -i"%%G" pause 
```

Passing server name and database name using command prompt.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T01:21:53.060

假设您希望使用相同的服务器名和数据库名从多个目录执行 yourbatasposted，

```
@ECHO OFF
SETLOCAL
FOR /f "delims=" %%i IN (folderlist.txt) DO (
PUSHD "%%i"
CALL yourbatasposted %*
POPD
) 
```

其中 folderlist.txt 是一个简单的文本文件，其中包含目标目录名称，一行一行。

如果您希望控制单独执行哪些服务器/数据库/目录，则创建 controllist,txt 格式为

servername 数据库目录

```
@ECHO OFF
SETLOCAL
FOR /f "tokens=1,2*delims=Q" %%i IN (controllist.txt) DO (
PUSHD "%%k"
CALL yourbatasposted %%i %%j
POPD
) 
```

其中“Q”是 controllist.txt 中各列之间的分隔符。如果您选择使用空格，请省略 delims= 子句。

当然，yourbatchasposted.bat 应该位于 %path% 变量中提到的任何目录中...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T18:01:12.993

将`/R`选项添加`FOR`到递归搜索：

```
FOR /R . %%G IN (*.sql) DO ... etc ... 
```

这将在当前目录 ( ) 下的任何位置搜索 *.sql 文件`.`。或者，`FOR /R C:\Folder %%G IN (*.sql) DO ...`如果您想要一个特定的文件夹作为根目录，请创建它。

# php - Open lightbox when click on link

> ID：15313777
> 
> 赞同：0
> 
> 时间：2013-03-09T17:33:37.470
> 
> 标签：php, jquery, lightbox

I am looking for solution to open lightbox ( images ) when click on the link.

Example:

```
<a href="">View Gallery</a> 
```

Here is my working image code with lightbox within foreach loop

```
echo '<a href="'.$media_url.$image_name.'" rel="lightbox['.$pid.']" title="Post: '.$pid.' |  '.$ptitle.' | Image: '.$image_name.' | by: '.$m_uname.' " ><img src="'.$thumb_path.$image_name.'" alt="'.$media->image_name.'" width="56" class="rm-thumbs-list" /></a>'; 
```

I have foreach loop and above code working fine with no issues. It is opening images in lightbox when the user clicks on the thumbnail. However now I have changed my mind. I am going to remove thumbnails and will add only one simple link when the user clicks on View Gallery I want to open lightbox with all the images

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:07:36.053

您只需要添加`href`page ，下面`gallery.html`是存储所有图像的页面。

```
<a href="gallery.html" rel="lightbox">View Gallery</a> 
```

# php - mongodb and php transition

> ID：15313783
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:34:02.780
> 
> 标签：php, mongodb, opencart, odm, nosql

I am using opencart (an opensource framework for e-commerce).

It uses only mysql database as its data source.

However due to the current site traffic, I am sure that we can increase our efficiency by using *noSQL* (Mongodb). Thats great but the issue is how would I go about and integrate Mongodb to use it with Mysql in unison?

I started looking around and found Mandango ([http://mandango.org/](http://mandango.org/)) for mapping and have better performance than that of doctrine.

However I am not able to get my head around as to how will I map the data. I looks like that ODM uses objects but when I use my model object in this case, would that not be based on the raw SQL queries.To give you an idea, currently Opencart has models that have raw SQL queries. Below is the example of customer model method.

```
public function editCustomer($data) {
    $this->db->query(
        "UPDATE " . DB_PREFIX 
        . "customer SET firstname = '" . $this->db->escape($data['firstname']) 
        . "', lastname = '" . $this->db->escape($data['lastname']) 
        . "', email = '" . $this->db->escape($data['email']) 
        . "', telephone = '" . $this->db->escape($data['telephone']) 
        . "', fax = '" . $this->db->escape($data['fax']) 
        . "' WHERE customer_id = '" . (int) $this->customer->getId() . "'"
    );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:51:47.290

我远非 PHP 专家，但我有运行同时使用 MongoDB 和 MySQL 的系统的经验。

我建议为您的数据访问对象创建接口，然后为 MySQL 或 Mongo 提供特定的实现。例如：

```
`interface iCustomerDAO 
{ 
   public function getCustomer($id);
}
class MySQLCustomerDAO implements iCustomerDAO
{
   public function getCustomer($id) 
   {
      ...
      return $customer;
   }
}` 
```

`然后你可以有一个读/写 MySQL的实现*和*一个读/写 MongoDB 的实现。`

 `可能不需要 ODM。相反，您将数据加载到对象中，然后对对象执行您需要做的任何事情。`

# c++ - 为 Unix 创建一个 makefile

> ID：15313785
> 
> 赞同：1
> 
> 时间：2013-03-09T17:34:18.967
> 
> 标签：c++, unix, makefile

我只有一个文件：main.cpp，我想创建一个`makefile`以便通过`Unix`.. 运行它。我正在尝试编写一个`makefile`，所以在我的文件中`makefile`我写道：

```
#file: makefile

a.out : main.o
        g++ main.o -ansi -pedantic‬

main.o : main.cpp
    g++ main.cpp -ansi -pedantic‬

clean : rm main.o a.out 
```

没关系？我该如何运行它？

```
makefile
a.out 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:39:27.727

阅读介绍性制作教程。您至少需要阅读基础知识。

[http://capone.mtsu.edu/csdept/FacilitiesAndResources/make.htm](http://capone.mtsu.edu/csdept/FacilitiesAndResources/make.htm)

GNU make 也有一个完整的（但更难阅读）手册：

[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)

关于您的具体示例：您运行 make 以生成 a.out。然后，您可以运行 a.out：

```
$ make
$ ./a.out 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T03:09:58.327

如果`main.cpp`是唯一的源文件，您可能甚至不需要 Makefile。

```
$ rm Makefile
$ make main 
```

Make 有非常合理的默认规则。利用它们。（以上内容适用于某些风格的 Make，但（可能）不是全部。）

# c++ - std 容器中结构的就地初始化

> ID：15313788
> 
> 赞同：0
> 
> 时间：2013-03-09T17:34:58.980
> 
> 标签：c++, visual-c++, c++11, std

```
struct vertex
{
     th::Vector3 point[2];
     std::list<vertex>::iterator pointConnection[2];
};

std::list<vertex> vertices;
vertices.push_back(
     {{vertex1->_getDerivedPosition(), vertex2->_getDerivedPosition()},
     {vertices.end(), vertices.end()}}
); 
```

我找不到为什么在以下编译正常时这不起作用的原因？你能解释一下吗？我究竟做错了什么？

```
vertex v = {{vertex1->_getDerivedPosition(), vertex2->_getDerivedPosition()},
     {vertices.end(), vertices.end()}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T20:34:03.933

显然，MSVC 还没有办法做到这一点。

# c++ - What should we do with a Bitmap file when it's rowsize isn't multiple of 4?

> ID：15313792
> 
> 赞同：0
> 
> 时间：2013-03-09T17:35:21.837
> 
> 标签：c++, bitmap, byte, rgb, 24-bit

I am writing a program to rotate an image. The Image format is Bitmap and according to the [http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format) the rowsize of a bitmap image should be multiple of 4\. My input image isn't so and when I write new image to a file, it isn't what it should be. Of course first I read the data part to an array of pixels and after that I rotate that array. If more information is needed, please tell me.

Of course my previous problem had been solved but I don't know why c++ count the size of this structure 56 byte ?

Here is the structure:

```
struct  Bitmap_Header
{
    char H_Signature[2];
    unsigned int H_Filesize;
    int H_Reserved;
    unsigned int H_DataOffset;
    unsigned int H_Size;
    int H_Width;
    int H_Height;
    short int H_Planes;
    short int H_BitCount;
    unsigned int H_Compression;
    unsigned int H_Imagesize;
    int H_XPixelsPerM;
    int H_YPixelsPerM;
    unsigned int H_ColorsUsed;
    unsigned int H_ColorsImportant;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:55:36.040

当您将图像写入 bmp 文件时，您应该填充每条扫描线，使其以字节为单位的大小是 4 的倍数。只需在每行的末尾添加额外的 0 字节。

# c# - How do i go about counting how many times a messagebox appears in c#?

> ID：15313794
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:35:30.030
> 
> 标签：c#, counting

I am trying to get my program to Count how many times a certain messagebox in my program appears while it is running.

I have looked up how to do this and it seems that I will need to use int count but I'm not sure how to code this for Messageboxes as I can only find count code for strings and arrays.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:38:29.477

为 MessageBox 类创建一些静态包装类并将其计算在某种静态变量中是更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:49:32.567

有两种解决方案

1-创建一个`Adapter`包装`MessageBox`类的类，向适配器添加一个计数器字段并在每次调用中递增它

```
 class MyMessageBox
 {
 static int counter;

 static void Show(string msg)
 {
   counter++;
   MessageBox.Show(msg);
 }
 } 
```

使用这种方法，您假设用户正在使用您的 MessageBox

2- 第二种解决方案是`AOP`
使用类似计算调用的`Aspect Oriented`框架`PostSharp``Show`

# drag-and-drop - Javafx 拖放 TabPane

> ID：15313796
> 
> 赞同：3
> 
> 时间：2013-03-09T17:35:43.993
> 
> 标签：drag-and-drop, javafx

我（在 JavaFx 应用程序中）有一个带有不同选项卡的选项卡。我想实现拖放功能以将选项卡拖到舞台外。这样它就可以生成一个新窗口（就像在谷歌浏览器中一样）。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-27T06:12:50.557

您应该检查 Tom Schindl 在他的[博客上显示的解决方案](http://tomsondev.bestsolution.at/2014/05/12/e4-on-javafx-drag-and-drop-between-stacks-javafx-tabpanes/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-10T13:55:49.500

这是一种方法，它只是将内容带入新窗口的一部分，但它是一个开始。

```
private Tab createTab(String text) {
        final Tab tab = new Tab();
        final Label label = new Label(text);
        tab.setGraphic(label);
        label.setOnDragDone(new EventHandler<DragEvent>() {

            @Override
            public void handle(DragEvent event) {
                if (event.getAcceptedTransferMode() == null) {
                    final StackPane content = (StackPane) tab.getContent();
                    tab.setContent(null);
                    Stage stage = new Stage();
                    stage.setScene(new Scene(content));
                    stage.show();
                    tab.getTabPane().getTabs().remove(tab);

                    event.consume();

                }

            }
        });
} 
```

基本上你必须用这个方法创建选项卡，如果事件的接收者不支持拖动，也就是说，如果它没有做任何特定的事情，那么你用选项卡的内容创建一个新的stackPane。

*顺便说一下，窗格的内容是 StackPane。

# php - mysql响应中的波兰字符

> ID：15313799
> 
> 赞同：0
> 
> 时间：2013-03-09T17:36:04.477
> 
> 标签：php, mysql

我对波兰语字符有疑问。当它应该是“克拉科夫”时，我无法正确书写单词，例如“？ukasz”而不是“Łukasz”甚至“null”。我在 mysql_connect 或 iconv(on json_encode($output)) 之后尝试了“mysql_set_charset('utf-8'/'iso-8859-1')”，它仍然是一样的（除了现在有“Krak\u00f3”而不是“无效的”）。我会很感激任何帮助。

这是我的 Android 应用程序的 php 文件：

```
$id_client = $_REQUEST['id_klienta'];
$con=mysql_connect('localhost', 'root', '') or die(mysql_error());
mysql_select_db('courier_helper') or die(mysql_error());

$sql=mysql_query("SELECT * FROM `clients` WHERE id_klienta='$id_client'");
while($r=mysql_fetch_assoc($sql))
    $output[]=$r;

print(json_encode($output));

mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T21:04:33.953

您必须确保在任何地方都使用 UTF-8：

*   脚本文件编码（UTF-8 而不是 ANSI） - 您可以在 Notepad++ 中设置编码
*   html 代码（元字符集）
*   数据库表字符集（创建表或数据库时）
*   数据库`mysql_set_charset('utf8', $connection_obj);`
*   数据库`SET NAMES utf8`- 连接后运行该 SQL 命令

还有一件事 - 熟悉 PDO。这是我使用的 PDO 连接功能：

```
function DbConnect()
{
    $db_host = "localhost";
    $db_name = "database_name";
    $db_user = "your_username";
    $db_pass = "your_passwd";

    $link = new PDO("mysql:host=$db_host;dbname=$db_name; charset=UTF-8", $db_user, $db_pass);
    $link->exec("set names utf8;");
    return $link;       
} 
```

您可以像这样使用该函数（这是 PDO 示例）：

```
 $link = DbConnect();

    $query = $link->prepare("SELECT id FROM wp_users");

    $query->execute();

    $result = $query->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T21:06:50.460

You should have your database storing data as UTF8, which means converting your existing tables.

```
ALTER TABLE tablename CONVERT TO CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

You also need to make sure your connection to the database is UTF8\. You can make sure of that by running a SET NAMES query right after your connect.

```
SET NAMES UTF8 
```

As others mentioned, you should start using PDO.

# php - 来自 PHP 的 MongoDB 集合 runCommand

> ID：15313805
> 
> 赞同：2
> 
> 时间：2013-03-09T17:36:35.077
> 
> 标签：php, mongodb

我有这个[例子](http://blog.mongodb.org/post/40513621310/mongodb-text-search-experimental-feature-in-mongodb)。

```
db.Wall.runCommand( "text", { search : "See" } ); 
```

如何从 PHP 调用它？`MongoCollection`我在课堂上找不到方法，

注意我正在运行 mongo 2.4 dev 版本。

我尝试使用没有运气的命令方法 Collection 称为 Wall

```
$ret = $db->command( array(
                        "runCommand" => "Wall",
                        "text" => array('search' => $text))
                    ); 
```

输出是

```
Array ( [ok] => 0 [errmsg] => no such cmd: runCommand [bad cmd] => Array ( [runCommand] => Wall [text] => Array ( [search] => See ) ) ) 
```

我找到了答案，但我需要等待 7 小时，因为我的声誉很低 :)

```
$ret = $db->command( array(
                        "text" => "Wall",
                        "search" => $text)
                    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T11:08:04.287

这是 PHP 中使用 Mongo 文本搜索的更广泛示例

```
<?php

$m = new MongoClient(); // connect
$db = $collection = $m->foo; // get the database named "foo"
$collection = $db->bar; // get the collection "bar" from database named "foo"

$collection->ensureIndex(
    array(
        'title' => 'text',
        'desc' => 'text',
    ),
    array(
        'name' => 'ExampleTextIndex',
        'weights' => array(
            'title' => 100,
            'desc' => 30,
        ),
        'timeout' => 60000000
    )
);

$result = $db->command(
    array(
        'text' => 'bar', //this is the name of the collection where we are searching
        'search' => 'hotel', //the string to search
        'limit' => 5, //the number of results, by default is 1000
        'project' => Array( //the fields to retrieve from db
            'title' => 1
        )
    )
); 

print_r($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T08:59:24.950

```
$ret = $db->command( array(
                        "text" => "Wall",
                        "search" => $text)
                    ); 
```

# ios - 在越狱设备（iphone 3G）上测试 iOS 应用

> ID：15313806
> 
> 赞同：0
> 
> 时间：2013-03-09T17:36:35.553
> 
> 标签：ios, xcode

我正在尝试使用 Jailcoder 等在我的设备（越狱）上测试我的应用程序，但我总是遇到同样的错误：

```
 dyld: Symbol not found: _kSecCFErrorArchitecture
  Referenced from: /usr/bin/codesign
  Expected in: /System/Library/Frameworks/Security.framework/Versions/A/Security
 in /usr/bin/codesign
/Users/Jasko/Library/Developer/Xcode/DerivedData/PROBA_joystick-chspwbfjpsxrxlewruowyfcsrdvs/ArchiveIntermediates/PROBA joystick/IntermediateBuildFilesPath/PROBA joystick.build/Release-iphoneos/PROBA joystick.build/Script-50524F424C454D533F.sh: line 6: 15003 Trace/BPT trap          codesign -f -s "iPhone Developer" --entitlements "${BUILT_PRODUCTS_DIR}/${WRAPPER_NAME}/${PROJECT_NAME}.xcent" "${BUILT_PRODUCTS_DIR}/${WRAPPER_NAME}/"
Command /bin/sh failed with exit code 133 
```

我已经成功完成了一次（使用另一个应用程序），我正在比较这两个项目的构建设置，我找不到区别，但它不会编译......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:42:39.143

如果方法是通过类别添加的，您可能需要在目标的构建设置中的其他链接器标志下添加其中一个或`-ObjC`两个`-all_load`

# android - Android：位图的最大允许宽度和高度

> ID：15313807
> 
> 赞同：29
> 
> 时间：2013-03-09T17:36:55.277
> 
> 标签：android, bitmap

我正在创建一个需要将大图像解码为位图以显示在 ImageView 中的应用程序。

如果我只是尝试将它们直接解码为位图，我会收到以下错误“位图太大而无法上传到纹理中（1944x2592，max=2048x2048）”

因此，为了能够显示分辨率太高的图像，我使用：

```
Bitmap bitmap = BitmapFactory.decodeFile(path);

if(bitmap.getHeight()>=2048||bitmap.getWidth()>=2048){
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    int width = metrics.widthPixels;
    int height = metrics.heightPixels;
    bitmap =Bitmap.createScaledBitmap(bitmap, width, height, true);             
} 
```

这可行，但我真的不想像现在在 if 语句中那样硬编码 2048 的最大值，但我不知道如何获得设备位图的最大允许大小

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-08T23:24:45.977

Another way of getting the maximum allowed size would be to loop through all EGL10 configurations and keep track of the largest size.

```
public static int getMaxTextureSize() {
    // Safe minimum default size
    final int IMAGE_MAX_BITMAP_DIMENSION = 2048;

    // Get EGL Display
    EGL10 egl = (EGL10) EGLContext.getEGL();
    EGLDisplay display = egl.eglGetDisplay(EGL10.EGL_DEFAULT_DISPLAY);

    // Initialise
    int[] version = new int[2];
    egl.eglInitialize(display, version);

    // Query total number of configurations
    int[] totalConfigurations = new int[1];
    egl.eglGetConfigs(display, null, 0, totalConfigurations);

    // Query actual list configurations
    EGLConfig[] configurationsList = new EGLConfig[totalConfigurations[0]];
    egl.eglGetConfigs(display, configurationsList, totalConfigurations[0], totalConfigurations);

    int[] textureSize = new int[1];
    int maximumTextureSize = 0;

    // Iterate through all the configurations to located the maximum texture size
    for (int i = 0; i < totalConfigurations[0]; i++) {
        // Only need to check for width since opengl textures are always squared
        egl.eglGetConfigAttrib(display, configurationsList[i], EGL10.EGL_MAX_PBUFFER_WIDTH, textureSize);

        // Keep track of the maximum texture size
        if (maximumTextureSize < textureSize[0])
            maximumTextureSize = textureSize[0];
    }

    // Release
    egl.eglTerminate(display);

    // Return largest texture size found, or default
    return Math.max(maximumTextureSize, IMAGE_MAX_BITMAP_DIMENSION);
} 
```

From my testing, this is pretty reliable and doesn't require you to create an instance. Performance-wise, this took 18 milliseconds to execute on my Note 2 and only 4 milliseconds on my G3.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-09T19:18:44.313

This limit should be coming from the underlying OpenGL implementation. If you're already using OpenGL in your app, you can use something like this to get the maximum size:

```
int[] maxSize = new int[1];
gl.glGetIntegerv(GL10.GL_MAX_TEXTURE_SIZE, maxSize, 0);
// maxSize[0] now contains max size(in both dimensions) 
```

This shows that my both my Galaxy Nexus and Galaxy S2 have a maximum of 2048x2048.

Unfortunately, if you're not already using it, the only way to get an OpenGL context to call this from is to create one(including the surfaceview, etc), which is a lot of overhead just to query a maximum size.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T17:56:41.987

这将在加载到内存之前解码和缩放图像，只需将横向和纵向更改为您实际想要的大小

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeFile(path, options);
int imageHeight = options.outHeight;
int imageWidth = options.outWidth;
String imageType = options.outMimeType;
if(imageWidth > imageHeight) {
    options.inSampleSize = calculateInSampleSize(options,512,256);//if landscape
} else{
    options.inSampleSize = calculateInSampleSize(options,256,512);//if portrait
}
options.inJustDecodeBounds = false;
bitmap = BitmapFactory.decodeFile(path,options); 
```

尺寸计算方法

```
public static int calculateInSampleSize(
        BitmapFactory.Options options, int reqWidth, int reqHeight) {
   // Raw height and width of image
   final int height = options.outHeight;
   final int width = options.outWidth;
   int inSampleSize = 1;

   if (height > reqHeight || width > reqWidth) {

      // Calculate ratios of height and width to requested height and width
      final int heightRatio = Math.round((float) height / (float) reqHeight);
      final int widthRatio = Math.round((float) width / (float) reqWidth);

      // Choose the smallest ratio as inSampleSize value, this will guarantee
      // a final image with both dimensions larger than or equal to the
      // requested height and width.
      inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
   }

   return inSampleSize;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-09T22:06:22.323

If you're on API level 14+ (ICS) you can use the `getMaximumBitmapWidth` and `getMaximumBitmapHeight` functions on the `Canvas` class. This would work on both hardware accelerated and software layers.

I believe the Android hardware must at least support 2048x2048, so that would be a safe lowest value. On software layers, the max size is 32766x32766.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-27T01:42:39.883

The 2048*2048 limit is for GN. GN is a xhdpi device and perhaps you put the image in the wrong density bucket. I moved a 720*1280 image from drawable to drawable-xhdpi and it worked.

Thanks for the answer by Romain Guy. Here's the [link](https://stackoverflow.com/questions/7428996/hw-accelerated-activity-how-to-get-opengl-texture-size-limit) of his answer.

# c++ - 如何检查浮点数是否为整数？

> ID：15313808
> 
> 赞同：5
> 
> 时间：2013-03-09T17:36:58.553
> 
> 标签：c++, numbers, integer, comma

printf 函数有某种函数，您可以在其中使用 %g，`3`如果浮点数为 3.00，它将显示整数并显示`3.01`它是否实际上是浮点数，有什么方法可以通过一些代码来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-09T17:40:59.500

### 真的没有一个简单的答案

整数值确实具有浮点和双精度格式的精确表示。所以，如果它*真的*已经是不可或缺的，你可以使用：

```
f == floor(f) 
```

但是，如果您的值是计算的结果，该计算在某一时刻涉及任何类型的非零小数部分，那么您将需要担心您可能有一些非常接近整数的东西，但实际上并不完全正确, 到最后一位相同。您可能希望将其视为不可分割的。

一种可以做到这一点的方法：

```
fabs(f - round(f)) < 0.000001 
```

当我们讨论这个主题时，对于纯粹主义者来说，我们应该注意`int i = f;`or`double i = f;`将根据 FPU 模式进行舍入，而[round(3)](http://linux.die.net/man/3/round)将舍入远离零的中途情况。

# html - 水平居中使用奇数跨度宽度的 Bootstrap 元素

> ID：15313809
> 
> 赞同：3
> 
> 时间：2013-03-09T17:37:03.093
> 
> 标签：html, css, twitter-bootstrap

这似乎是 Bootstrap 社区中的一个常见问题，例如，居中过程和跨度宽度为奇数的类`class="span3"`。我有一个里面`.row`有三个`.span3`类。我意识到只使用三个`span4`类会更容易，但我不喜欢它使我的元素有多大。

到目前为止，我已经尝试了一些事情：

1.  我创建了一个自定义的 15 列网格，因此我可以`.span3`在我实际想要使用的三个元素之前和之后给出一个类，但是当`responsive-bootstrap.css`启动时，事情表现得很奇怪，因为响应文件处理一个 12 列网格。

2.  我尝试将所有内容放在`.center`使用以下 CSS 的自定义类中：

    ```
    .center {
        float: none;
        margin: 0 auto;
        text-align: center;
    } 
    ```

对于它的价值，当我的浏览器宽度在 ~980px - ~1199px 之间时，一切正常。

必须有一个简单的方法来解决这个问题，对吧？我也不担心它在旧浏览器上看起来不错，这是一个个人网站。这是我目前所在的位置，使用 15 列网格：

**这是我的[JSFiddle](http://jsfiddle.net/yeQUZ/)**

的HTML：

```
<div class="row">
    <div class="center">
           <ul class="thumbnails" id="portfolio-links">
                <li class="span3"></li>
                <li class="span3" id="item1">
                    <a href="#" class="thumbnail" id="portfolio-element"></a>
                </li>
                <li class="span3" id="item2">
                    <a href="#" class="thumbnail" id="portfolio-element"></a>
                </li>
                <li class="span3" id="item3">
                    <a href="#" class="thumbnail" id="portfolio-element"></a>
                </li>
                <li class="span3"></li>
           </ul><!--/.thumbnails-->
    </div><!--/.center-->
</div><!--/.row--> 
```

CSS：

```
#portfolio-links {
    display: block;
    margin: 0 auto;
    float: none;
}
.center {
    float: none;
    margin: 0 auto;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:12:10.570

你只需要制作`<div class="center">`一个大小为 的`span9`并删除多余的`li`。

最终结果将是：http: [//jsfiddle.net/AKWqP/](http://jsfiddle.net/AKWqP/)

# mysql - 如何在 MySQL 中使用 count 函数的结果？

> ID：15313812
> 
> 赞同：1
> 
> 时间：2013-03-09T17:37:15.817
> 
> 标签：mysql, sql

我需要做一个查询，计算每个部门中有多少员工拥有超过 1 名员工并且员工人数为 6 或更多，我有：

```
 Select DepartmentName, count(EmployeeNumber) as "Number of Employees"
 From department d, employee e
 Where d.DepartmentName = e.Department and e.EmployeeNumber <=6 
 Group by d.DepartmentName; 
```

这满足了所有要求，除了关于拥有超过 1 名员工的部分，有没有办法只为从第一行返回 2 或更大的结果执行其余代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:54:37.307

使用`HAVING`从句。但请注意，它是在计算整个事物之后应用的。

```
Select DepartmentName, count(EmployeeNumber) as "Number of Employees"
From department d, employee e
Where d.DepartmentName = e.Department and e.EmployeeNumber <=6 
Group by d.DepartmentName HAVING count(EmployeeNumber) > 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T17:56:15.047

尝试这个

```
 Select DepartmentName, count(EmployeeNumber) as "Number of Employees"
    From department d, employee e
    Where d.DepartmentName = e.Department  
    Group by d.DepartmentName and e.EmployeeNumber <=6
    HAVING count(EmployeeNumber) > 1 ; 
```

# cocos2d-iphone - 如何以图形方式开发一些 ViewController，然后从 Cocos2d Iphone 2 场景中调用它们？

> ID：15313816
> 
> 赞同：1
> 
> 时间：2013-03-09T17:37:54.390
> 
> 标签：cocos2d-iphone, uikit

我是 cocos2d 世界的新手。

我正在开发一个简单的游戏，它也有一个表格，几个用户将填写他们的联系信息（是一个活动的游戏）。

该表单必须将数据保存在 sqlite 或 NSUserDefaults 数组中，然后当 ipad 连接到 Wifi 时，用户将使用 REST 服务将所有数据同步到 mySQL。

我的问题是：我可以用它的模板启动一个 Cocos2d 项目，并添加一个 soryboard 或其他东西来开发非游戏部分作为一个常用的 ViewController 吗？

我看到了一些关于使用故事板然后将游戏场景称为 Segue 的帖子，但我认为将我的主菜单和游戏场景作为 Cocos2d 场景并为用户输入调用 ViewController 然后返回到我的场景可能会更好（类似于从 Gamekit 调用 ViewController 的 Cocos2d iphone 2 项目模板）。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:48:42.433

```
MYViewController *vc = [[MYViewController alloc] initWithNibName:@"Myview" bundle:nil];
[[[CCDirector sharedDirector] openGLView] addSubview:vc]; 
```

试试这个代码来添加视图控制器

# jquery - 除非达到jQuery例程中定义的悬停时间，否则如何防止CSS悬停样式触发？

> ID：15313817
> 
> 赞同：0
> 
> 时间：2013-03-09T17:37:55.927
> 
> 标签：jquery, css, hover

我有一个使用 jQuery 鼠标悬停延迟的 CSS 下拉菜单，以防止菜单显示用户是否只是将鼠标移动到页面上的另一个链接。

我的问题是 css hover 正在触发，这会在鼠标悬停时改变活动 li 的样式。

有没有办法阻止 CSS 悬停样式触发，除非达到 jQuery 例程中定义的悬停时间？（用户故意使用菜单）

我尝试使用 CSS 动画：和动画延迟：但无法使其正常工作，这就是我使用 jQuery 例程的原因。

代码示例在这里：http: [//jsfiddle.net/2fc3W/7/](http://jsfiddle.net/2fc3W/7/)

我的 CSS：

```
.pipe {
    margin-top:4px;
}
.li_hover {
    color: #002398;
}
.bottom_li {
    margin-bottom:6px;
    margin-top:2px;
}
ul#nav li .bottom_li:hover > a {
    background:#E0E0E0;
}
ul#nav, ul#nav ul {
    width:300px;
    list-style:none;
    margin:0;
    padding:0;
    position:absolute;
    z-index:9;
    border:1px solid #297BCE;
}
ul#nav li li:hover > a {
    border:none;
}
ul#nav li {
    position:relative;
    float:left;
    zoom:1;
    /*Needed for IE*/
}
ul#nav li:hover > a {
    background:#E0E0E0;
    color:#297BCE;
    border-left:1px solid #297BCE;
    border-right:1px solid #297BCE;
    border-top:1px solid #E0E0E0;
    border-bottom:1px solid #E0E0E0;
    text-decoration:underline;
}

#nav li.is-active > ul {
     display: block;   
}
ul#nav li a {
    border:1px solid #FFFFFF;
    display:block;
    padding:4px 6px 4px 6px;
    color:#297BCE;
    font-weight:bold;
    font-family:Arial, Times New Roman, Tahoma;
    font-size:13px;
    text-decoration:none;
}
ul#nav ul {
    padding-left:8px;
    padding-top:2px;
    display:none;
    position:absolute;
    width:150px;
    border:1px solid #297BCE;
    background:#E0E0E0;
    left:0;
    border-top:none;
}
ul#nav ul li {
    background:#E0E0E0;
    color:#000;
    border:none;
    float:none;
}
ul#nav ul li a {
    border:none;
    width:100%;
    padding:0;
    display:block;
    color:#000000;
    line-height:145%;
    font-size:12px;
    font-weight:normal;
}
ul#nav ul li a:hover {
    border:none;
    width:150px;
    color:#297BCE;
}
ul#nav ul ul {
    position: absolute;
    top: 0;
    left: 100%;
    margin-left:-3px;
    display: none;
}
ul#nav ul ul {
    padding-left:8px;
    position:absolute;
    width:150px;
    border:1px solid #297BCE;
    background:#E0E0E0;
}
ul#nav ul li:hover ul {
    display: block;
}
ul#nav ul.snug{
    width: auto;
}
ul#nav ul.snug li a{
    display: inline;
    padding-right: 6px;
    width: auto;
} 
```

我的Javascript：

```
var hoverTimer = function ( menu ) {
    return setTimeout(function() {
        $(menu).addClass('is-active');
    }, 500);
},
    hover = null,
    $nav = $( '#nav > li' );

$nav.mouseenter(function() {
   hover = hoverTimer(this);
});

$nav.mouseleave(function() {
   clearTimeout(hover); 
   $nav.removeClass( 'is-active' );
}); 
```

我的 HTML：

```
<div id="menubar">
<ul id="nav">
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
<li class="pipe">|</li>
 <li><a href="/ueber_uns.htm">About Us</a>
  <ul>
    <li><a href="#">Who We Are</a></li>
    <li><a href="#">Our Goals</a></li>
    <li><a href="#">Our Team</a></li>
    <li><a href="#">Press</a>
     <ul>
      <li><a href="#">2006</a></li>
      <li><a href="#">2007</a></li>
      <li><a href="#">2008</a></li>
     </ul>
    </li>
   <li><a href="#">Impressum</a></li>
   <li class="bottom_li"><a href="#"><span class="li_hover">See all</span></a></li>
  </ul>
 </li>
</ul>
</div> 
```

感谢您提供指导我正确方向的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T17:47:54.103

尝试将您的活动课程添加到您的 CSS 中，例如：

```
ul#nav li.is-active:hover > a {
    background:#E0E0E0;
    color:#297BCE;
    border-left:1px solid #297BCE;
    border-right:1px solid #297BCE;
    border-top:1px solid #E0E0E0;
    border-bottom:1px solid #E0E0E0;
    text-decoration:underline;
}

#nav li.is-active > ul {
     display: block;   
}

ul#nav ul li.is-active a:hover {
    border:none;
    width:150px;
    color:#297BCE;
}

ul#nav ul li.is-active:hover ul {
    display: block;
} 
```

[在这里](http://jsfiddle.net/2fc3W/8/)提琴

# php - 从网络服务下载文件

> ID：15313819
> 
> 赞同：1
> 
> 时间：2013-03-09T17:38:21.760
> 
> 标签：php, android, web-services, download

我想从我的服务器下载文件。我注意到正确的方法是使用网络服务器。

我应该在我的网络服务中为每个文件提供下载链接吗？

我是否应该创建许多字段，例如：链接、图标、屏幕截图、描述……并通过 android 应用请求正确的数据？

如何更新 Web 服务数据（例如，用户在该特定文件的排名中添加星号）

如何跟踪该特定文件的下载次数？如何在我的文件之间添加搜索功能（来自 android 应用程序的请求）。这个应用程序是一种用于下载文件的应用程序商店或下载中心。

我知道这是很多问题。但我只是想要一个提示。

# php - Foreach 多维数组

> ID：15313824
> 
> 赞同：0
> 
> 时间：2013-03-09T17:38:39.053
> 
> 标签：php, arrays, multidimensional-array

我有一个多维数组：

```
Array (
  [0] => Array (
    [0] => Kolkata Knight Riders v Delhi Daredevils
    [1] => Kolkata
  ) 
  [1] => Array (
    [0] => Royal Challengers Bangalore v Mumbai Indians
    [1] => Bangalore
  )
  [2] => Array (
    [0] => Sunrisers Hyderabad v Pune Warriors 
    [1] => Hyderabad (Deccan)
  ) 
  [3] => Array (
    [0] => Delhi Daredevils v Rajasthan Royals 
    [1] => Delhi
  )
  ... 3 more elements
) 
```

我想要：

*   `explode`数组元素的每个第一个元素都基于“v”，这样我就可以从中`team A`分离`Team B.`（例如`array[0][0]`分离`Kolkata Knight Riders`和`Delhi Daredevils`）。
*   创建一个新数组，我想从两个展开的数组中删除团队名称之间的空格（例如`Sunrisers Hyderabad`become `SunrisersHyderabad`）。

我试过以下代码：

```
$i = 0;
foreach($match1 as $value){
    $teams[$i] = explode(' v ', $value[0]); // Exploding teams
    $teams[$i] = strip_tags($teams[$i], 'a'); // Eliminating html

    $teamA[] = explode(' ', $team[$i][0]); // Eliminating Space in Team Name

    $teamA[] = trim($match2[$i]); // Removing white spaces
    $teamB[] = str_replace(' ', '', $team[$i][1]); // Trying Str_Replace method
    $teamB[] = trim($match3[$i]); // Removing White Spaces
    $i++;
} 
```

上面的代码似乎不能满足我的所有要求。有什么有用的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:43:42.760

首先：请为您的变量使用逻辑名称，如果您使用诸如`match`, `real_match`, `match1`,之类的变量名称，您的脚本将变得不可读`match2`。

```
echo '<pre>';
$data = array(
    array(
        'Kolkata Knight Riders v Delhi Daredevils',
        'Kolkata',
    ),
    // ...
);

foreach ($data as $match) {
    $teams = explode(' v ', $match[0]);
    $teams = array_map(function ($team) {
        return trim(str_replace(' ', '', $team));
    }, $teams);

    // do something with the 2 normalized teams in $teams

    var_dump($teams);
} 
```

# java - 我们使用 BiMap 解决的问题

> ID：15313834
> 
> 赞同：2
> 
> 时间：2013-03-09T17:39:33.990
> 
> 标签：java, guava, bimap

我正在审查 Google 的 Guava API 的功能，并且遇到了我在“真实世界编程”体验中没有使用过的数据结构，即 BiMap。这种构造的唯一好处是能够快速检索给定值的键吗？是否存在使用 BiMap 最好地表达解决方案的任何问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-09T17:42:54.447

任何时候您都希望能够进行反向查找而无需填充两个地图。例如一个电话目录，您希望按名称查找电话号码，但也希望进行反向查找以从号码中获取名称。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T14:57:49.233

Louis 提到了在实现中可能节省的内存`BiMap`。`Map`这是包装两个实例无法获得的唯一东西。不过，如果您让我们`Map`为您包装实例，[我们可以处理一些边缘情况](http://code.google.com/p/guava-libraries/source/browse/guava/src/com/google/common/collect/AbstractBiMap.java#107)。（你可以自己处理所有这些，但为什么要麻烦呢？:)）

*   如果您调用`put(newKey, existingValue)`，我们将立即出错以使两个映射保持同步，而不是在意识到它与另一个映射中的现有映射冲突之前将条目添加到一个映射。（`forcePut`如果您确实想要覆盖现有值，我们会提供。）我们为插入`null`或其他无效值提供类似的保护措施。
*   `BiMap` *视图*使两个映射保持同步：如果从`entrySet`原始 的 中删除一个元素`BiMap`，则其对应的条目也会从反向中删除。我们在`Entry.setValue`.
*   我们处理序列化：A`BiMap`和它的逆保持“连接”，并且条目只被序列化一次。
*   我们提供了一个智能实现，`inverse()`以便`foo.inverse().inverse()`返回`foo`，而不是包装器的包装器。
*   我们重写`values()`以返回一个`Set`. 这个集合与你得到的集合相同，`inverse().keySet()`只是它保持与原始集合相同的迭代顺序`BiMap`。

# java - 如何旋转缓冲图像，然后将缓冲图像复制到像素数组中

> ID：15313836
> 
> 赞同：2
> 
> 时间：2013-03-09T17:39:52.937
> 
> 标签：java, image, awt, java-2d, affinetransform

我正在尝试旋转导弹炮塔的缓冲图像，使其看起来像是在跟踪目标。基本上，我可以使用 AffineTransform/ affinetransform 轻松完成

简而言之，我当前的代码是：

```
public BufferedImage tower = null;

try
        {
            tower = ImageIO.read(SpriteSheet.class.getResource("/spriteSheet/testTower.png"));
        }
        catch(IOException e)
        {

AffineTransform tx = AffineTransform.getRotateInstance(rotationRequired, locationX, locationY);
AffineTransformOp = op = new AffineTransformOp(tx, AffineTransformOp.TYPE_BILINEAR);

//then I draw it using  

g.drawImage(op.filter(tower, null), towerLocationX, towerLocationY, null); 
```

这行得通，但我想做的是变换（旋转）缓冲图像，然后将新旋转的像素数据复制到像素数组中，然后将其绘制到屏幕上，因为我相信这是大多数游戏绘制旋转图像而不是绘制的方式一个png直接显示在屏幕上。

但我知道什么。2D 游戏究竟是如何绘制旋转图像的？我做得对吗，还是有更好/更有效的内存效率方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T14:09:36.277

有很多方法可以解决 2D 游戏中的图像处理问题。不过，在优化之前，您应该先问问自己是否真的需要它。此外，内存优化通常以 CPU 性能为代价，反之亦然。

如果 CPU 时间是问题，一种常见的方法是保持一组图像已经旋转到特定角度（预先计算）。

如果内存是问题，请保留单个图像并在每次显示时计算旋转的形式。一种更节省内存但更消耗 CPU 的方法是绘制矢量形状而不是图像。与转换时用于图像的平滑算法的插值相比，这也导致更好看的结果。Java 支持 SVG，并且有几个很好的包可用（例如[http://xmlgraphics.apache.org/batik/](http://xmlgraphics.apache.org/batik/)）。

最后，Java 可以连接到图形库以执行渲染，从而提高性能。此类库（OpenGL 等）使用图形卡的内存来存储图像，以提高 CPU 使用率（[http://jogamp.org/jogl/www/](http://jogamp.org/jogl/www/)）。

# ios - 检测应用是否已从集成应用商店 IOS 下载

> ID：15313838
> 
> 赞同：4
> 
> 时间：2013-03-09T17:40:08.180
> 
> 标签：ios, objective-c, app-store

我在我的应用程序内的一个按钮上显示，一个应用程序商店上的应用程序。该应用程序会在 SKStoreProductViewController 中弹出，其中包含应用程序商店的内容。现在，是否有任何方法可以检测用户是否在显示的应用程序上按下了安装，或者更好的是，如果用户按下了安装并且应用程序已完成安装，则会收到警报？由于我的应用程序中的用户以这种方式能够购买填充版本，因此我想在下载结束后退出试用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:51:02.137

我认为您在使用`SKStoreProductViewController` [[docs]](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKITunesProductViewController_Ref/Introduction/Introduction.html)时无法检测到用户是否按下了安装或安装了应用程序。只有 API iOS 公开的是 `loadProductWithParameters:completionBlock:`.

但是，如果您想检查您的应用程序是否已安装，还有其他方法 -

1) 使用自定义 URL 方案。为您的应用定义一个自定义 URL 方案，然后使用 `UIApplication -canOpenURL:`That 进行检查只会告诉您能够打开该 url 方案的应用程序可用，而不一定是哪个应用程序。没有公开可用的机制来检查用户在其设备上安装了哪些其他应用程序。自定义 URL 方案检查可以做这样的事情 -

```
BOOL fullApp = [[UIApplication sharedApplication] openURL:[NSURL URLWithString:NSString* urlString = [NSString stringWithFormat:@"yourFULLAppURL://"]]];

if(!fullApp)
{
    NSLog(@"INVALID URL"); //Or alert or anything you want to do here
} 
```

2）如果您控制这两个应用程序，您还可以使用共享的钥匙串或粘贴板在它们之间进行更详细的通信。

# c# - GetWindowRect 与 Window.Left 不同

> ID：15313839
> 
> 赞同：1
> 
> 时间：2013-03-09T17:40:13.247
> 
> 标签：c#, .net, wpf, pinvoke

我创建了一个小型示例应用程序来说明我在使用`GetWindowRect`. 当我单击 Foo 按钮时，它显示`Left`返回的值`GetWindowRect`不同于`Window.Left`.

看起来返回的值`Window.Left`是相对的，但我不确定是什么。也很奇怪，我无法在每台机器上重现此问题，在有或没有额外显示器的家用笔记本电脑上，我可以重现此问题，在我的工作电脑上，问题不会发生。两个系统都运行 Windows 7

为什么这些值不同，我该如何解决？

**主窗口.xaml.cs**

```
using System;
using System.Runtime.InteropServices;
using System.Windows;
using System.Windows.Interop;

namespace PositionTest
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        private IntPtr thisHandle;
        public MainWindow()
        {
            InitializeComponent();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {
            thisHandle = new WindowInteropHelper(this).Handle;
        }

        [DllImport("user32.dll", SetLastError = true)]
        [return: MarshalAs(UnmanagedType.Bool)]
        public static extern bool GetWindowRect(IntPtr hWnd, ref RECT lpRect);

        [StructLayout(LayoutKind.Sequential)]
        public struct RECT
        {
            public int Left;
            public int Top;
            public int Right;
            public int Bottom;
        }

        private void ReportLocation(object sender, RoutedEventArgs e)
        {
            var rct = new RECT();
            GetWindowRect(thisHandle, ref rct);

            MessageBox.Show(Left.ToString() + " " + rct.Left);
        }
    }
} 
```

**主窗口.xaml**

```
<Window x:Class="PositionTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Loaded="Window_Loaded" WindowStartupLocation="Manual" Height="150" Width="150" WindowStyle="SingleBorderWindow" ResizeMode="NoResize" BorderThickness="0,1,0,0" >
    <Grid>
        <Button Content="Foo" HorizontalAlignment="Left" Margin="35,50,0,0" VerticalAlignment="Top" Width="75" Click="ReportLocation"/>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T19:43:42.237

你没有量化差异，有几种解释，但有一个明显的不匹配。Windows 和 WPF 使用不同的单位。GetWindowRect() 以像素为单位返回窗口位置，Window.Left 以 1/96 英寸为单位返回位置。当视频适配器未以每英寸 96 点运行时，它们将不匹配。96 dpi 是旧设置，在更高版本的 Windows 上很容易更改。WPF 使获取 dpi 设置有点困难，请查看[此博客文章](http://blogs.msdn.com/b/jaimer/archive/2007/03/07/getting-system-dpi-in-wpf-app.aspx)以获取代码。

# php - 是否可以在允许代码运行之前检查 mysqli 表中的用户名？

> ID：15313845
> 
> 赞同：0
> 
> 时间：2013-03-09T17:41:01.713
> 
> 标签：php, mysqli

我有一个基本的登录页面。该页面将用于记录登录失败的用户名和 unix 时间。

是否可以在允许用户输入密码之前查看用户名，如果尝试次数为 5 次或以上，则可以将其禁用 30 分钟。

我已经在网上搜索过，但找不到任何东西，另一个解决方案是在允许代码继续之前查看表格，但再次有一点大脑冻结，确定它很容易，但更愿意阻止用户早点？

我附上了检查页面，以便您可以看到我正在尝试的内容。

```
Include("include/conn.php");
if(! $conn )
{
    die('Could not connect: ' . mysql_error());
}
mysqli_select_db('DATABASE');
// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];
// To protect MySQL injection
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
// encrypt password
$encrypted_mypassword=md5($mypassword);
//see if account is locked
//STUCK HERE if looking at amount of attements before allowing code to run. 
//look up username and pasword match
$sqli="SELECT * FROM TABLE WHERE Username='$myusername' and     Password='$encrypted_mypassword'";
$result=mysql_query($sqli);
// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){
    // Register $myusername, $Unique_Id and redirect to file "home.php"
    session_register("myusername");
    session_register("Unique_Id");
    header("location:home.php");
}
//if log in if not sucsesfull
else {
    echo "Wrong Username or Password";
    //update attempt log with attempt +1 and unix time
    $sql_query_update = "UPDATE TABLE SET
        Attempts = Attempts+1,time =  UNIX_TIMESTAMP(now())
        WHERE TABLE.Username ='$myusername'";
    mysql_query( $sql_query_update );
    //close mysql
    mysql_Close();
}
?> 
```

我知道过时的代码，但这仅用于测试，因为我正在努力`mysqli`在我的虚拟服务器上进行配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:47:45.803

1.  你正在混合`mysql_`和`mysqli_`功能。这将不起作用，因为它们是不同的 API。

2.  我建议使用密钥和盐来加密您的密码（使用 sha256+），因为`md5`它非常弱。密钥将存储在您的数据库中，盐存储在服务器上。

    `hash('sha256', $keyFromDb . $saltFromServer . $userPassword);`

3.  使用准备好的语句和绑定参数来防止任何级别的 SQL 注入。

回答你的问题；是的，可以检查用户对用户名的尝试。你走在正确的道路上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:49:46.237

最简单的方法是简单地将错误尝试插入带有时间戳的表中。然后检查这是否高于三个：`SELECT COUNT(*) FROM error_table WHERE error_time < 1800 AND user_id = $user_id`。（或用户名，或其他）。这样您就不必跟踪失败尝试的次数，它们很容易从`COUNT`语句中获得。如果您想要更多详细的方法，那么有一个禁用的时间戳，一旦计数 >= 3 就会触发。

正如一些注释：

1.  你不需要stripslashes
2.  如果您完全关心用户的密码，请使用比 MD5 更复杂的密码，理想情况下您应该有某种形式的盐字符​​串。
3.  您正在选择您的数据库，`mysqli`并且您正在使用`mysql`. 你不是故意这样做的，即使它正在工作（例如，如果你选择了 conn.php 中的数据库），这个代码也是一个 bug 的邀请。
4.  `include`是小写的。严格来说并不重要，但是将一个应该是小写的函数大写是失礼的。

# bash - 解析和扩展区间

> ID：15313848
> 
> 赞同：2
> 
> 时间：2013-03-09T17:41:29.223
> 
> 标签：bash, intervals, expansion

在我的脚本中，我需要扩展一个间隔，例如：

```
input: 1,5-7 
```

得到类似以下的东西：

```
output: 1,5,6,7 
```

我在这里找到了其他解决方案，但它们涉及 python，我不能在我的脚本中使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:08:14.243

## Just Bash 4 Builtins 的解决方案

您可以使用[Bash 范围扩展](http://wiki.bash-hackers.org/syntax/expansion/brace#ranges)。例如，假设您已经解析了输入，您可以执行一系列连续的操作来将您的范围转换为逗号分隔的系列。例如：

```
value1=1
value2='5-7'
value2=${value2/-/..}
value2=`eval echo {$value2}`
echo "input: $value1,${value2// /,}" 
```

所有关于 eval 危险的常见警告都适用，你最好用 Perl、Ruby、Python 或 AWK 解决这个问题。如果您不能或不会，那么您至少应该考虑在您的转换中包含一些管道工具，如*tr*或*sed*，以避免需要 eval。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:12:57.077

尝试这样的事情：

```
#!/bin/bash

for f in ${1//,/ }; do
  if [[ $f =~ - ]]; then
    a+=( $(seq ${f%-*} 1 ${f#*-}) )
  else
    a+=( $f )
  fi  
done

a=${a[*]}
a=${a// /,}

echo $a 
```

**编辑：**正如评论中提到的@Maxim_united，追加可能比一遍又一遍地重新创建数组更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T18:24:45.970

这也应该适用于多个范围。

```
#! /bin/bash
input="1,5-7,13-18,22"
result_str=""
for num in $(tr ',' ' ' <<< "$input"); do
    if [[ "$num" == *-* ]]; then
        res=$(seq -s ',' $(sed -n 's#\([0-9]\+\)-\([0-9]\+\).*#\1 \2#p' <<< "$num"))
    else
        res="$num"
    fi
    result_str="$result_str,$res"
done
echo ${result_str:1} 
```

将产生以下输出：

```
1,5,6,7,13,14,15,16,17,18,22 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:21:05.000

### 使用*序列表达式*“{x..y}”的通用 bash 解决方案

```
#!/bin/bash
function doIt() {
  local inp="${@/,/ }"
  declare -a args=( $(echo ${inp/-/..}) )
  local item
  local sep
  for item in "${args[@]}"
  do
    case ${item} in
        *..*)  eval "for i in {${item}} ; do echo -n \${sep}\${i}; sep=, ; done";;
        *) echo -n ${sep}${item};;
    esac
    sep=,
  done
}
doIt "1,5-7" 
```

*   应该使用问题中示例之后的任何输入。也有多次出现`x-y`
*   仅使用 bash 内置函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-30T15:27:09.480

使用来自@Ansgar Wiechers 和@CodeGnome 的想法：

```
input="1,5-7,13-18,22"
for s in ${input//,/ }
do
    if [[ $f =~ - ]]
    then
        a+=( $(eval echo {${s//-/..}}) )
    else
        a+=( $s )
    fi  
done
oldIFS=$IFS; IFS=$','; echo "${a[*]}"; IFS=$oldIFS 
```

在 Bash 3 中工作

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-09T18:02:48.777

```
expand_commas()
{
    local arg
    local st en i

    set -- ${1//,/ }
    for arg
    do
        case $arg in
        [0-9]*-[0-9]*)
            st=${arg%-*}
            en=${arg#*-}
            for ((i = st; i <= en; i++))
            do
                echo $i
            done
        ;;
        *)
            echo $arg
        ;;
        esac
    done
} 
```

用法：

```
result=$(expand_commas arg) 
```

例如：

```
result=$(expand_commas 1,5-7,9-12,3)
echo $result 
```

当然，您必须将分隔的单词重新转换为逗号。

输入错误时它有点脆弱，但它完全是 bash。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-09T18:09:58.937

这是我的尝试：

```
input=1,5-7,10,17-20
IFS=, read -a chunks <<< "$input"

output=()
for chunk in "${chunks[@]}"
do
    IFS=- read -a args <<< "$chunk"
    if (( ${#args[@]} == 1 )) # single number                                   
    then
        output+=(${args[*]})
    else # range                                                                
        output+=($(seq "${args[@]}"))
    fi
done
joined=$(sed -e 's/ /,/g' <<< "${output[*]}")
echo $joined 
```

基本上用逗号分开，然后解释每一段。然后在末尾加上逗号。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-23T12:29:19.453

考虑到所有其他答案，我想出了这个解决方案，它不使用任何子外壳（但一次调用`eval`大括号扩展）或单独的进程：

```
# range list is assumed to be in $1 (e.g. 1-3,5,9-13)

# convert $1 to an array of ranges ("1-3" "5" "9-13")
IFS=,
local range=($1)
unset IFS

list=() # initialize result list
local r
for r in "${range[@]}"; do
    if [[ $r == *-* ]]; then
        # if the range is of the form "x-y",
        # * convert to a brace expression "{x..y}",
        # * using eval, this gets expanded to "x" "x+1" … "y" and
        # * append this to the list array
        eval list+=( {${r/-/..}} )
    else
        # otherwise, it is a simple number and can be appended to the array
        list+=($r)
    fi
done

# test output
echo ${list[@]} 
```

# c# - .Net 中的 OTAClient.dll 和 BadImageFormatException

> ID：15313857
> 
> 赞同：0
> 
> 时间：2013-03-09T17:42:33.197
> 
> 标签：c#, exception, hp-quality-center

我正在编写一个简单的 C# 应用程序来访问 HP ALM -- Quality Center 中的缺陷。

我正在使用 Visual Studio 2008、HP ALM Quality Center 11.0 和 OTAClient.dll 版本 9.2.0.5089。

当我执行这行代码时：

```
 TDConnection qctd = new TDConnection(); 
```

我收到以下错误：

“HPQCDataSet.exe 中发生了‘System.BadImageFormatException’类型的未处理异常

附加信息：检索具有 CLSID {C5CBD7B2-490C-45F5-8C40-B8C3D108E6D7} 的组件的 COM 类工厂失败，原因是以下错误：800703e6。

在其他地方建议的处理这种情况的方法包括添加一些像这样的代码作为构建后事件：

调用 "$(DevEnvDir)..\tools\vsvars32.bat" editbin.exe /NXCOMPAT:NO "$(TargetPath)"

我已经这样做了，并且我还将我的平台目标设置为 x86，但是 BadImageFormatException 错误仍然存​​在。

关于我可能尝试的其他步骤的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T23:49:06.103

我们最终能够通过删除任何现有的 OTAClient.dll 实例并在 HP ALM 中重新注册它来解决此问题。

# c++ - 如何只调用一次移动构造函数？

> ID：15313864
> 
> 赞同：2
> 
> 时间：2013-03-09T17:42:55.877
> 
> 标签：c++, c++11, move-semantics, unique-ptr

如何使下面的代码只调用**一次**移动构造函数？

**输出**

```
MC
MC 
```

**代码**

```
#include <vector>
#include <map>
#include <memory>
#include <iostream>

struct Bar
{
        Bar() { }
        Bar( Bar&& rhs )
        {
                std::cerr << "MC\n";

                for( auto& p : rhs.m_v )
                {
                        std::cerr << "inside loop\n";
                        m_v.push_back( move( p ));
                }
        }
        std::vector< std::unique_ptr< Bar >>  m_v;
};

int main()
{
        Bar b;

        std::map<int,Bar> m;
        m.insert( std::make_pair( 1, std::move( b )));
} 
```

**编辑**

看起来`emplace`是正确的答案 - 但不幸的是，它还没有在 gcc 4.7.2 中............有没有什么方法可以给它起别名`insert`，然后在正确实施时将其删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T17:45:16.667

使用[`std::map::emplace`](http://en.cppreference.com/w/cpp/container/map/emplace)：

```
m.emplace(1, std::move(b)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-09T17:45:15.973

本质上是通过使用`emplace`而不是`insert`：

```
m.emplace(1, std::move(b)); 
```

# actionscript-3 - 将 Flash 影片中的 XML 内容显示为文本

> ID：15313878
> 
> 赞同：0
> 
> 时间：2013-03-09T17:44:48.950
> 
> 标签：actionscript-3

在 Flash 电影 (Actionscript 3) 中，我需要显示 XML 文件的内容。

我将文件的 url 作为参数传递。所以我正在使用以下内容：

```
var file : XML;

var url = loaderInfo.parameters.url;

var loader = new URLLoader();
loader.addEventListener(Event.COMPLETE, onLoadComplete);
loader.load(new URLRequest(url));

function onLoadComplete(e:Event){
  file = new XML(e.target.data);  
} // OnLoadComplete 
```

如何在 Flash 影片中以文本形式显示 XML 文件的全部内容？

可能内容会很大，所以我想要滚动条。

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T18:24:06.687

试试这个。

```
//... previous code
loader.load(new URLRequest(url));

var myTextBox:TextField = new TextField(); 
myTextBox.width = 200; 
myTextBox.height = 150; 
myTextBox.multiline = true; 
myTextBox.wordWrap = true; 
myTextBox.background = true; 
myTextBox.border = true; 
addChild(myTextBox);

function onLoadComplete(e:Event){
  file = new XML(e.target.data);
  myTextBox.text = file.toString(); 
} 
```

# jquery - JQuery AJAX Post 请求在 IE 或 FF 中不起作用 - 在 Chrome 中工作正常

> ID：15313879
> 
> 赞同：0
> 
> 时间：2013-03-09T17:45:02.890
> 
> 标签：jquery, ajax, internet-explorer, firefox

不知道这里发生了什么。让一些朋友测试了我正在处理的聊天，发现它目前仅适用于 Chrome。

AJAX POST 请求似乎不起作用。在 Chrome 中，我得到了成功回调。在 IE 或 Firefox 中没有回调期。

您会看到我已将 POST 快捷方式注释掉。我正在使用它，但它不起作用，所以我切换到 ajax 进行调试。我还包括了它周围的代码，以确保它也不是原因。

```
$(document).ready(function() {
    $("#chatWindow").animate({ scrollTop: $("#chatWindow").height()}, 'normal');

    $("#submitForm").submit(function() {
        event.preventDefault();
        var clientMessage = $("#messageText").val();
        //$.post("chatProcess.php", {text: clientMessage});

        $.ajax({
            type: "POST",
            url: "chatProcess.php",
            data: {text: clientMessage},
            dataType: "text",
            error: function(){alert('Error!')},
            success: function(){alert('Success!')}
        });

        $("#messageText").attr("value", "").focus();
        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:53:49.570

移除`event.preventDefault();`或传递事件对象作为提交函数的参数。既然你已经有了`return false;`，我就删除`event.preventDefault();`.

# php - GPS/GPRS 追踪器。如何处理存储的 FIFO 数据以记录 I/O 开启或关闭的总时间

> ID：15313883
> 
> 赞同：0
> 
> 时间：2013-03-09T17:45:22.277
> 
> 标签：php, mysql, gps

我不确定我的问题是否准确地描述了我的问题。我会尽量把它布置好。

我在车辆上安装了许多 GPS 跟踪器，它们通过 GPRS 向我的服务器报告。我已经建立了一个功能齐全的 mysql 数据库驱动的 PHP 网站来显示车辆位置并跟踪其历史记录。

我的下一步是构建一个部分，该部分将显示自点火开关打开以来车辆的总距离以及点火开关打开的总时间。

通过使用一个简单的脚本将设备传入数据中的距离字段添加到该设备的最后存储记录中，这非常有效。同样，时间的计算方式相同。

但是，当设备离开 GSM 覆盖范围时，位置数据存储在 SD 卡中，当返回 GSM 范围时，将首先发送当前位置，然后开始发送存储的数据，每分钟穿插一次当前位置。

这弄乱了我的计算，我开始得到负时间值，因为存储的数据日期时间字段在数据库中的最后一个日期时间记录之前。

我真的很想在 GPS 服务器/解析器上而不是在网站上进行此计算，以使网站加载得更快。我设想在几年内建立一个非常大的数据库，并且希望将总数存储在一个表中，而不是在每次页面加载时使用脚本来计算它。

# java - Java不是通过引用传递非原始类型吗

> ID：15313884
> 
> 赞同：0
> 
> 时间：2013-03-09T17:45:23.180
> 
> 标签：java, pass-by-reference

在下面的代码中，我假设两个对象都引用了同一个对象，但下面的示例说我错了。对不起，如果它是重复的。

```
 class A {
        public String a;
        public void set(String a) {
            this.a = a;
        }
    }

    class B {
        public String b;
        public void set(String b) {
            this.b = b;
        }
    }

    A aC = new A();
    B bC = new B();

    String str = "aaa";

    aC.set(str);
    bC.set(aC.a);

    aC.a += "a";

    System.out.println(aC.a);
    System.out.println(bC.b); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T17:46:13.310

Java 是按值传递的。引用是按值传递的。

`aC.a += "a"`创建一个新的 String 对象，这就是它没有反映在 bC 中的原因。

从字面上看，你是说

`aC.a = aC.a + "a"`

因此，您可以将该`=`符号解释为`aC.a`映射到一个新的 String 对象，该对象是`aC.a`and的串联`"a"`。但是当你改变你的引用时，`aC.a`你并没有改变 的引用`bC.b`，所以它会指向同一个旧字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-09T17:48:53.737

让你困惑的是你认为

```
aC.a += "a"; 
```

修改 . 引用的 String 对象的状态`aC.a`。事实并非如此。字符串是不可变的，上面的代码行创建了一个新的 String 对象并将其分配给 aC.a，保留对原始对象的所有其他引用。

使用 a 进行相同的测试`StringBuilder`，然后调用

```
aC.a.append("a"); 
```

你会得到不同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-09T18:06:55.697

Java 规范说 Java 中的所有内容都是按值传递的。Java 中没有“按引用传递”之类的东西。

理解这一点的关键是

```
Dog myDog; 
```

不是狗；它实际上是一个指向 Dog 的指针。

这意味着，当你有

```
Dog myDog = new Dog("Rover");
foo(myDog); 
```

您实际上是将创建的 Dog 对象的地址传递给 foo 方法。

（我说本质上 b/c Java 指针不是直接地址，但这样想它们是最容易的）

假设 Dog 对象位于内存地址 42。这意味着我们将 42 传递给方法。

如果方法被定义为

```
public void foo(Dog someDog) {
    someDog.setName("Max");     // AAA
    someDog = new Dog("Fifi");  // BBB
    someDog.setName("Rowlf");   // CCC
} 
```

让我们看看发生了什么。

*   参数 someDog 设置为值 42
*   在“AAA”行
    *   someDog 跟随它指向的 Dog（地址 42 处的 Dog 对象）
    *   那条狗（地址为 42 的那只）被要求将他的名字改为 Max
*   在“BBB”行

    *   创建了一个新的 Dog。假设他在地址 74
    *   我们将参数 someDog 分配给 74
*   在“CCC”行
    *   someDog 跟随它指向的 Dog（地址 74 处的 Dog 对象）
    *   那条狗（地址为 74 的那只）被要求将他的名字改为 Rowlf
*   然后，我们返回

现在让我们考虑一下在方法之外会发生什么：

myDog 变了吗？

有钥匙。

请记住，myDog 是一个指针，而不是真正的 Dog，答案是否定的。myDog 的值仍然是 42；它仍然指向原来的 Dog。

跟随地址并更改其末尾的内容是完全有效的；但是，这不会改变变量。

Java 的工作方式与 C 完全一样。您可以分配指针、将指针传递给方法、跟随方法中的指针并更改指向的数据。但是，您不能更改该指针指向的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-09T18:43:25.953

JVM 中有三个字符串对象。“aaa”、“a”和“aaaa”（因为字符串是不可变的）。最初 aC.a 和 bC.b 指向同一个字符串对象“aaa”。在这一行 aC.a += "a"; 代码将 aC.a 的引用更改为指向“aaaa”。所以现在 aC.a -> "aaaa" 和 bC.b -> "aaa"。我希望我很清楚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T17:46:52.613

Java实际上是按值传递的。实际引用被复制，并且该副本被发送到函数。

# php - 需要想法在同一网页中显示登录失败结果

> ID：15313885
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:45:23.567
> 
> 标签：php, javascript, login

有点困惑。我有一个用户登录表单。像往常一样，用户必须输入 ID 和密码，然后单击登录按钮。如果登录失败，那么我需要在密码文本输入区域下方的同一页面上显示登录失败消息。我将 php 用于服务器端，将 javascript 用于客户端编码。

是否可以通过转到另一个网页来做到这一点。

我正在关注谷歌登录表单。

请分享一些想法我该如何实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:00:00.220

1）制作一个php脚本，登录用户并使用内容类型'application/json'回复客户端。此脚本必须获取用户名和密码，并在验证成功时返回（例如）以下内容：

```
{
    "result": "OK"
} 
```

**重要**。如果用户名和密码正确，则 php 脚本必须登录用户，否则必须登录。

2）您的 javascript 向 .php 脚本（用户名、密码）发出 AJAX 请求，如果结果为“OK”，则将用户重定向到下一页。如果用户确实没有经过身份验证，该页面必须将用户向后重定向（到登录页面）。

```
function success( data )
{
    if( data[ 'result' ] == "OK" )
    {
        document.location.href='/your-next-url';
    }
    else
    {
       // a message about auth. error
    }
} 
```

3）否则（如果结果不正确）您的 php 脚本必须返回如下内容：

```
{
    "result": "FAIL"
} 
```

如果您的 Javascript 客户端收到这样的响应，它不能重定向到下一页，但必须显示身份验证问题。

因此，如果用户尝试访问 /your-next-url/ 但未通过身份验证，他将被退回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:49:10.017

是的，你绝对可以做到，而且大多数 RAD 都是这样发生的。您将使用 AJAX 来做到这一点。您可以使用 jquery 向您的 php 函数发送 ajax 请求。jQuery 将使 ajax 变得轻而易举。如果您向我们提供更多详细信息或代码，我们可以为您提供更好的帮助，谢谢

# java - 与 Scalr (JAVA) 相比，使用 GD 放大图像的质量较差

> ID：15313888
> 
> 赞同：1
> 
> 时间：2013-03-09T17:45:39.213
> 
> 标签：java, php, image, resize, bicubic

我一直在处理非常小的图像，并试图找到增加它们的最佳方法。我比较了两个不同的来源：imagecopyresampled（PHP：[http](http://www.php.net/manual/en/function.imagecopyresampled.php) : //www.php.net/manual/en/function.imagecopyresampled.php）与 Scalr（JAVA：[如何调整目录中的图像大小？](https://stackoverflow.com/questions/9779563/how-to-resize-images-in-a-directory)）。为了完整起见，我在下面包含了我使用的代码，但它们强烈基于上面引用的其他线程或站点。如果有人认为我应该删除，我会这样做！在这两个来源中，用于处理该问题的算法似乎是相同的：双三次插值。**然而，在 JAVA 源代码的情况下，在我的实现中，调整大小图像的质量要好得多（甚至无法比较）。当我使用 PHP 源代码时，我做错了吗？**如果没有，有人可以解释一下它们之间的区别吗？

**Java代码：**

```
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import static org.imgscalr.Scalr.*;

public class App2 {

       public static void main(String[] args) throws IOException {
            for (File sourceImageFile : new File("imgs").listFiles()) {
                if (sourceImageFile.getName().endsWith(".jpg"))
                    res(sourceImageFile.getAbsolutePath());
            }
        }

    public static void res(String arg) throws IOException {

        File sourceImageFile = new File(arg);
        BufferedImage img = ImageIO.read(sourceImageFile);

        BufferedImage thumbnail = resize(img, 500);

        thumbnail.createGraphics().drawImage(thumbnail, 0, 0, null);
        ImageIO.write(thumbnail, "jpg", new File("resized/" + sourceImageFile.getName()));
    }
} 
```

**PHP代码：**

```
<?php
// The file
$filename = 'photos/thePhoto.jpg';

// Set a maximum height and width
$width = 250;
$height = 250;

// Content type
header('Content-Type: image/jpeg');

// Get new dimensions
list($width_orig, $height_orig) = getimagesize($filename);

$ratio_orig = $width_orig/$height_orig;

if ($width/$height > $ratio_orig) {
   $width = $height*$ratio_orig;
} else {
   $height = $width/$ratio_orig;
}

// Resample
$image_p = imagecreatetruecolor($width, $height);
$image = imagecreatefromjpeg($filename);
imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width_orig, $height_orig);

// Output
imagejpeg($image_p, null, 100);
?> 
```

为了清楚起见，在 JAVA 代码中，我必须将图像保存在一个文件夹中。在 PHP 代码中，我提供了文件的名称。当然，我比较了完全相同的图像。此外，这两个代码都在运行，没有任何问题。

![PHP 与 Java（按此顺序）]：[http ://www.facebook.com/media/set/?set=a.122440714606196.1073741825.100005208033163&type=1&l=55d93c4969](http://www.facebook.com/media/set/?set=a.122440714606196.1073741825.100005208033163&type=1&l=55d93c4969)

# php - 将 db 中的不同表查询与 PHP 组合并在一页上显示所有结果

> ID：15313889
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:45:40.150
> 
> 标签：php, mysql, sql, database

我一直在尝试创建一个有趣的数据库，以便更好地了解数据库并使用 PHP 来查询它们以查找我正在搞乱的网站。当用户在 PHP 搜索框中输入搜索词时，我几乎有一个包含 4 个表的数据库，我的代码在数据库中搜索包含搜索词的任何条目。现在我可以轻松地让我的代码搜索单个表，但我似乎无法让它搜索所有 4 个表并在同一页面上显示结果。

信息：为天际制作数据库

*   **表名：**职业、能力、技能、呼喊
*   **列名：**名称、信息

这是到目前为止我所拥有的代码片段：

```
$raw_results = mysql_query("
   SELECT *
   FROM   `xaviorin_skyrim`.`shouts` , `xaviorin_skyrim`.`classes`
   WHERE  (CONVERT(`UID` USING utf8) LIKE '%".$query."%' OR
          CONVERT(`Name` USING utf8) LIKE '%".$query."%' OR 
          CONVERT(`Information` USING utf8) LIKE '%".$query."%')
") or die(mysql_error());` 
```

从字面上看，我认为我需要做的就是在新`raw_results`的代码行中将表名从“shouts”更改为“classes”，但这不起作用。我尝试过联合和连接，要么继续搞砸它们，要么就是不明白如何正确格式化它们。

```
echo "<p><h3>".$results['Name']."</h3>".$results['Information']."</p>"; 
```

此文本上方的代码是在我的网站页面上显示结果的内容......它可以工作，但我不知道如何将所有 4 个表中的信息合并到一个页面中。如果我以错误的方式解决这个问题并且任何人都可以指出我正确的方向，我将非常感激......我一直在尝试研究这个问题，但近一个月没有找到正确的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:03:17.527

您的方法的问题在于，当两个不同的表有多个查询结果时，关系数据库会执行交叉连接。所以基本上一个表中的每场比赛都将与第二张表中的每场比赛相结合。当第一个表中有 3 个条目，第二个表中有 4 个条目时，您将`3 * 4 = 12`在查询结果中获得条目。如果您添加更多表格，您将获得更多结果。您想在几个完全不相关的表中进行全文搜索，因此通过交叉连接它们来创建某种不存在的关系将没有用。

您真正想要做的是几个查询的`UNION ALL`（`UNION`速度较慢，因为它会修剪重复项）：

```
SELECT name, information, 'shouts' AS tablename FROM shouts WHERE ...
UNION ALL
SELECT name, information, 'classes' AS tablename FROM classes WHERE ... 
```

这将对每个表进行搜索查询，然后将结果放在一个结果中。另请注意，我为每个查询添加了第三列，以确保合并结果后原始表不会丢失。

除非您事后需要进行一些排序，否则我建议您单独执行所有语句。以这种方式组合它们很可能会使后处理更加复杂。并且几个单个查询也将比一个带有`UNION`语句的大查询更快。

正如我在评论中提到的：不要使用`mysql_*`函数！

# c# - 拆分后，我想对拆分字符串的长度有条件

> ID：15313891
> 
> 赞同：0
> 
> 时间：2013-03-09T17:45:51.003
> 
> 标签：c#

```
var myNew = myRegex1.Split(strTargetString);
                    if ((myNew[1].Trim()).Length > 12)
                    {
                       myNew[1]= (myNew[1].Substring(0, 9))+"..";
                    }                        }
                    _model.Add(new ScoresModel()
                    {
                        NameTeam1 = (myNew[1].Trim()),
                        ScoreTeam1 = Convert.ToInt32(myNew[2].Trim()),
                        NameTeam2 = (myNew[3].Trim()),
                        ScoreTeam2 = Convert.ToInt32(myNew[4].Trim()),
                        Round = (myNew[5].Trim()).Substring(1, myNew[5].Length - 2),
                        URL = item.ItemLink
                    }); 
```

以上是我的规范。将字符串分成 5 部分后。我想对第一个拆分的字符串进行检查，它的长度是否大于 12。如果是，则将其修剪为 10 个字符并在字符串后面附加“..”（两个点）。* 但在修剪代码后，myNew[1]、myNew[2]、myNew[3]、myNew[4]、myNew[5] 上的以下方法出现错误。* 错误是`The name myNew does not exist in current context.`

```
_model.Add(new ScoresModel()
                    {
                        NameTeam1 = (myNew[1].Trim()),
                        ScoreTeam1 = Convert.ToInt32(myNew[2].Trim()),
                        NameTeam2 = (myNew[3].Trim()),
                        ScoreTeam2 = Convert.ToInt32(myNew[4].Trim()),
                        Round = (myNew[5].Trim()).Substring(1, myNew[5].Length - 2),
                        URL = item.ItemLink
                    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:59:50.137

尝试这个 ：

```
var myNew = myRegex1.Split(strTargetString);
_model.Add(new ScoresModel()
{
    NameTeam1 = myNew[0].Trim().Length > 12 ? myNew[0].Trim().Substring(0, 9)+".." : myNew[0].Trim(),
    ScoreTeam1 = Convert.ToInt32(myNew[1].Trim()),
    NameTeam2 = myNew[2].Trim(),
    ScoreTeam2 = Convert.ToInt32(myNew[3].Trim()),
    Round = myNew[4].Trim().Substring(1, myNew[4].Trim().Length - 2),
    URL = item.ItemLink
}); 
```

拆分结果是 0-indexed ;) 像这样，您不设置数组的第一个元素，只需使用它即可。

使用 Trim 测试字符串时要小心，如果以后不使用它（用于子字符串），如果字符串以空格开头，则可能会出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:51:53.890

我想你想要这个：

```
var myNew = myRegex1.Split(strTargetString);
                    if ((myNew[0].Trim()).Length > 12)
                    {
                       myNew[0]= myNew[0].Substring(0, 10)+"..";
                    }   
_model.Add(new ScoresModel()
                    {
                        NameTeam1 = (myNew[0].Trim()),
                        ScoreTeam1 = Convert.ToInt32(myNew[1].Trim()),
                        NameTeam2 = (myNew[2].Trim()),
                        ScoreTeam2 = Convert.ToInt32(myNew[3].Trim()),
                        Round = (myNew[4].Trim()).Substring(1, myNew[4].Length - 2),
                        URL = item.ItemLink
                    }); 
```

# ruby-on-rails - Rails range_field 从 0 到 -100

> ID：15313892
> 
> 赞同：1
> 
> 时间：2013-03-09T17:46:01.667
> 
> 标签：ruby-on-rails, slider, range, negative-number

我有一个范围字段，当向右滑动时，需要使输出“更负”达到-100。

这是我当前的代码：

```
<%= f.range_field :Question1, :in => 0..-100, :step => '.1' %> 
```

显然，使用 :in => -100..0 可以正常工作，但是当我将其切换到 0..-100 时，向右滑动会上升到 100，这显然是错误的。我需要用户能够向右滑动以获得更多负数。有谁知道如何做到这一点？

如果这是不可能的，有没有办法设置 :in => 0..100 但在将其放入数据库之前将数字设为负数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:58:15.153

我相信你可以在保存之前使用`before_save`过滤器来否定值，或者`before_validation`在它验证之前否定它，然后你可以验证你得到的数字是你想要的。

# fortran - 使用样条和夹板

> ID：15313896
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:46:31.470
> 
> 标签：fortran, fortran90

对于在fortran中使用spline和splint子程序，子程序中有数组的一阶导数和二阶导数。但是这里我只有 yi=f(xi)，对于导数，我应该在子程序中放入哪个数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-15T12:15:39.223

不知道您是否仍然对解决方案感兴趣，但可以帮助遇到相同问题的任何人：

书籍“fortran 77 的数字食谱”（和 90）非常清楚地解释了这些子例程的作用。您必须先调用 SPLINE，它将计算二阶导数。然后调用 SPLINT 输入值以及衍生物。

您可以使用一阶导数作为边界条件。

# android - Android 设置，如活动，没有 SharedPreference

> ID：15313898
> 
> 赞同：0
> 
> 时间：2013-03-09T17:46:39.293
> 
> 标签：android

我需要创建一个非常类似于设置活动的活动，其中包含可点击项目的列表。

我需要的是一组视图，例如 CheckBoxPreference、EditTextPreference 和 DialogPreference，以便让用户设置一些值。

无论如何，我不想将值保存在 SharedPreference 中。我需要将它们保存在另一个对象中。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T17:49:52.533

如果您不想将值保存在 `SharedPreference.

备选方案。

1[方镁石](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

2内部或外部存储器中的[文件](http://developer.android.com/training/basics/data-storage/files.html)。

我建议使用`SharedPreferences`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T17:50:09.560

最简单的方法是使用设置活动，让它保存到共享首选项，从共享首选项填充您的对象，然后清除共享首选项。

# php - 通过 php 在 neo4j 中进行回滚的类似物

> ID：15313913
> 
> 赞同：1
> 
> 时间：2013-03-09T17:47:51.523
> 
> 标签：php, neo4j

neo4jphp 是否有类似 postgresql 中的保存点和回滚？如果某些操作引发异常，我需要回滚 php 脚本中的所有事务更改。我使用 neo4jphp 库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:25:02.613

您必须使用批处理 API 来通过 REST 获取等效的事务。在此处阅读有关其工作原理的更多信息：http: [//docs.neo4j.org/chunked/stable/rest-api-batch-ops.html#rest-api-execute-multiple-operations-in-batch](http://docs.neo4j.org/chunked/stable/rest-api-batch-ops.html#rest-api-execute-multiple-operations-in-batch)

查看来自 neo4jphp 的一些批处理示例：[https ://github.com/jadell/neo4jphp/blob/master/examples/batch_benchmarks.php](https://github.com/jadell/neo4jphp/blob/master/examples/batch_benchmarks.php)

# c++ - 二维动态数组，使用两种数据类型？

> ID：15313917
> 
> 赞同：0
> 
> 时间：2013-03-09T17:48:16.850
> 
> 标签：c++

我在互联网上搜索过，但似乎找不到我的解决方案的答案（或者我是盲人/哑巴，只是不知道该怎么做）。我的一项任务的一部分如下：

构造函数——创建一个空的 2xn 动态数组。您的动态数组的大小应为 2x5，但可以增长到任意长度。空元素的默认值为“empty”和 0。该类还应该有一个 nextElement 变量，用于跟踪数组中的下一个空点，并且每次添加数据元素时都会递增。

有没有办法创建一个 2*5 数组，该数组将接受一个维度中的字符串和另一个维度中的整数？

# android - event.getAction() == 当 setOnTouchListener 返回 false 时，MotionEvent.ACTION_DOWN 不为 true

> ID：15313919
> 
> 赞同：3
> 
> 时间：2013-03-09T17:48:37.113
> 
> 标签：android

我需要实现 onItemLongPressListener 和 onTouchListener。它们不能一起工作，所以我必须从其他的 ontouch 侦听器返回 false，以便项目长按侦听器也被触发。

当我触摸 imageButton 时，我需要更改图像按钮，但由于我的触摸监听器返回 false，因此图像保持按下状态。

当我不再触摸按钮时，如何让它改变按钮图像？

```
imageView.setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    if (event.getAction() == MotionEvent.ACTION_DOWN) {
                        imageView.setImageResource(mThumbIdsPressed[position]);
                    } else {
                        imageView.setImageResource(mThumbIds[position]);
                    }
                    recordAudio.startPlaying(position);

                    return false;
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:06:32.187

您可以使用 GestureDetector（如[SimpleOnGestureListener](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html)）来区分：

*   [`onDown()`](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onDown%28android.view.MotionEvent%29)， 如同`ACTION_DOWN`
*   [`onSingleTapConfirmed()`](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onSingleTapConfirmed%28android.view.MotionEvent%29)或`onSingleTapUp()`, 类似于`ACTION_UP`
*   [`onLongPress()`](https://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onLongPress%28android.view.MotionEvent%29)为您的长按活动

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T22:45:07.210

我刚刚为我的项目完成了这项工作，部分基于你现有的代码（顺便感谢你）。我这样做的方式不是“else”，而是我做了一个“else if”，如下所示。

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub

    if(event.getAction() == MotionEvent.ACTION_UP){
        touching = false;
    }else if(event.getAction() == MotionEvent.ACTION_DOWN){
        touching = true;
    }

    touch_x = event.getX();
    touch_y = event.getY();

    return true;
} 
```

触摸布尔值在渲染线程中进一步使用。

# java - Java比较器抛出非法参数异常

> ID：15313920
> 
> 赞同：0
> 
> 时间：2013-03-09T17:48:43.167
> 
> 标签：java, illegalargumentexception

我收到此错误：

```
Exception in thread "Thread-3" java.lang.IllegalArgumentException: Comparison method violates its general contract! 
```

当我尝试在 Java 中为我的实体系统运行此比较器时：

```
private Comparator<Entity> spriteSorter = new Comparator<Entity>() {
    public int compare(Entity e0, Entity e1) {
        if (e1.position.getX() <= e0.position.getX())
            return +1;
        if (e1.position.getY() >= e0.position.getY())
            return -1;
        return 0;
    }
}; 
```

这是实现：

```
private void sortAndRender(Bitmap b, Vec2 offset, ArrayList<Entity> l) {
    Collections.sort(l, spriteSorter);
    for (int i = 0; i < l.size(); i++) {
        l.get(i).render(b, offset);
    }
} 
```

当我在屏幕上显示大量实体时，这个问题才真正开始出现。这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T17:56:00.490

您的比较器完全错误。更好的是

```
 if (e1.position.getX() != e0.position.getX())
        return Integer.compare(e1.position.getX(), e0.position.getX());
    if (e1.position.getY() != e0.position.getY())
        return Integer.compare(e1.position.getY(), e0.position.getY());
    return 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:00:58.513

虽然@Louis 在很大程度上击败了我，但要详细说明并可能澄清......

您的比较方法必须相当“稳定”且完整。对于很多 X 和 Y 不同的情况，您的将返回 0，“等于”。

我会将其重写为

```
int result = Integer.compare(e1.position.getX(), e0.position.getX());
if (result == 0)
  result = Integer.compare(e1.position.getY(), e0.position.getY());
... if you have more to compare, add more if (result == 0) blah blah here...

return result; 
```

至于“稳定”，假设你有两个点，a = 4,2 和 b = 2,4

当你将 a 与 b 比较时，你得到 0 但是当你将 b 与 a 比较时，你得到 1。

这在比较器中是“非法的”。a.compareTo(b) 应该等于 -b.compareTo(a)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T18:02:34.953

哈哈，问题是我出于某种原因将它们在基于 x 位置的列表中向上移动，并在基于 y 位置的列表中向下移动？？！？！？这是我的一个非常愚蠢的错误

# .net - 多文件程序集

> ID：15313923
> 
> 赞同：6
> 
> 时间：2013-03-09T17:48:56.190
> 
> 标签：.net, assemblies, .net-assembly

具有物理编码在多个 .cs 文件中的单个文件程序集与具有多个 .NetModules 的多文件程序集之间有什么区别和优势？

我的教授说，当这些程序集被加载或在 jitting 期间可以实现差异。并非多文件程序集的所有 .Netmodules 都会立即加载。但即使是他也不确定。有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-09T19:29:16.903

假设我们有两个名为 .cs 的文件
`RUT.cs`，其中包含很少使用的类型
`FUT.cs`，其中包含经常使用的类型
Now`csc /t:module RUT.cs`
此行导致 C# 编译器创建 RUT.netmodule 文件。此文件是标准 DLL PE 文件，但 CLR 本身无法加载它。

接下来让我们将常用的类型编译到自己的模块中。我们将让这个模块成为程序集清单的保管者，因为这些类型经常被使用。事实上，因为这个模块现在将代表整个程序集，所以我将输出文件的名称更改为 JeffTypes.dll 而不是调用它 FUT.dll：

```
csc /out:JeffTypes.dll /t:library /addmodule:RUT.netmodule FUT.cs 
```

此行告诉 C# 编译器编译 FUT.cs 文件以生成 JeffTypes.dll 文件。因为指定了 /t:library，所以将包含清单元数据表的 DLL PE 文件发送到 JeffTypes.dll 文件中。/addmodule:RUT.netmodule 开关告诉编译器 RUT.netmodule 是一个应该被视为程序集一部分的文件。具体来说，/addmodule 开关告诉编译器将文件添加到 FileDef 清单元数据表，并将 RUT.netmodule 的公开导出类型添加到 ExportedTypesDef 清单元数据表。 ![在此处输入图像描述](../Images/c49a502468e54484ec9c6f05d5421762.png)

RUT.netmodule 文件包含编译 RUT.cs 生成的 IL 代码。该文件还包含描述由 RUT.cs 定义的类型、方法、字段、属性、事件等的元数据表。元数据表还描述了 RUT.cs 引用的类型、方法等。JeffTypes.dll 是一个单独的文件。与 RUT.netmodule 一样，该文件包含编译 FUT.cs 生成的 IL 代码，还包含类似的定义和引用元数据表。但是，JeffTypes.dll 包含额外的清单元数据表，使 JeffTypes.dll 成为一个程序集。附加清单元数据表描述了构成程序集的所有文件（JeffTypes.dll 文件本身和 RUT.netmodule 文件）。清单元数据表还包括从 JeffTypes.dll 和 RUT 导出的所有公共类型。

现在，如果一些引用 JeffTypes.dll 的 clinet 代码正在执行，当第一次调用方法时，CLR 会检测方法引用的类型作为参数、返回值或局部变量。然后 CLR 尝试加载包含清单的引用程序集的文件。如果要访问的类型在此文件中，CLR 将执行其内部簿记，从而允许使用该类型。如果清单表明引用的类型在不同的文件中，CLR 会尝试加载必要的文件，执行其内部簿记，并允许访问该类型。仅当调用引用已卸载程序集中的类型的方法时，CLR 才加载程序集文件。

**这意味着要运行应用程序，引用程序集中的所有文件都不需要存在。**
因此，较少使用的源类可以在 NetModules 中编译并**在必要时加载，从而提高性能**并**减少 Dll 文件大小**，从而简化**更改管理和部署过程**。

*图片和杰弗里·里希特的一些* [名言](https://rads.stackoverflow.com/amzn/click/com/0735627045)

# javascript - 如何从 HTML5 Windows Store 应用程序中的代码关闭 MessageDialog？

> ID：15313929
> 
> 赞同：0
> 
> 时间：2013-03-09T17:49:18.073
> 
> 标签：javascript, html, windows-store-apps

如标题所示，

如何从 HTML5 Windows Store 应用程序中的代码关闭 MessageDialog？

到目前为止我的代码：

```
var msg = new Windows.UI.Popups.MessageDialog("Please wait");
msg.commands.append(new Windows.UI.Popups.UICommand("OK",
    function (command) {
        ...
    }));
msg.showAsync(); 
```

然后我想从代码中关闭这个弹出窗口，我在规范中没有找到任何方法，比如

```
msg.close(); 
```

有办法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T21:12:38.157

您的消息是“请稍候”这一事实向我表明，您可能想为这项工作使用不同的工具。

如果您尝试做的是通知用户您正在后台执行他们需要等待的操作，请考虑改用进度控件，如此处所述：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465487.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465487.aspx)

如果您使用进度控件，您既可以包含带有所需文本的文本标签，也可以在完成您要求用户等待的任何任务时关闭进度控件。

为了回答您最初的问题，我不相信有任何 API 可以以编程方式关闭 MessageDialog，因为这会破坏此控件的交互模式，即应用程序显示消息，然后允许用户关闭它当他们准备好时。

希望有帮助。

有关 Windows 应用商店应用开发的更多信息，请注册[App Builder](http://bit.ly/gd30tolaunch)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T14:47:31.197

我认为您想使用弹出窗口，类似于此[答案](https://stackoverflow.com/questions/11663993/closing-windows-ui-message-popup/11668840#11668840)。该链接解决了一个稍微不同的问题，因为它会在超时后关闭弹出窗口。

但是，您应该能够定义您和用户都可以关闭的浮出控件。在这两种情况下，您最终都会调用以下内容：

```
flyout.winControl.hide(); // Dismiss the flyout 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:59:00.433

看看这个...

```
(function(){
"use strict"; 
    var page = WinJS.UI.Pages.define("/html/cancelcommand.html", { 
        ready: function (element, options) { 
            document.getElementById("cancelCommand").addEventListener("click", cancelCommand_Click, false); 
        } 
    }); 

    // Click handler for the 'cancelCommand' button. 
    // Demonstrates setting the command to be invoked when the 'escape' key is pressed. 
    // Also demonstrates retrieval of the label of the chosen command and setting a callback to a function. 
    // A message will be displayed indicating which command was invoked. 
    // In this scenario, 'Try again' is selected as the default choice, and the 'escape' key will invoke the command named 'Close' 
    function cancelCommand_Click() { 
        // Create the message dialog and set its content 
        var msg = new Windows.UI.Popups.MessageDialog("No internet connection has been found."); 

        // Add commands and set their command handlers 
        msg.commands.append(new Windows.UI.Popups.UICommand("Try again", commandInvokedHandler)); 
        msg.commands.append(new Windows.UI.Popups.UICommand("Close", commandInvokedHandler)); 

        // Set the command that will be invoked by default 
        msg.defaultCommandIndex = 0; 

        // Set the command to be invoked when escape is pressed 
        msg.cancelCommandIndex = 1; 

        // Show the message dialog 
        msg.showAsync(); 
    } 

    function commandInvokedHandler(command) { 
        // Display message 
        WinJS.log && WinJS.log("The '" + command.label + "' command has been selected.", "sample", "status"); 
    } 
}()); 
```

[http://code.msdn.microsoft.com/windowsapps/Message-dialog-sample-00c928f5/sourcecode?fileId=50972&pathId=1064922824](http://code.msdn.microsoft.com/windowsapps/Message-dialog-sample-00c928f5/sourcecode?fileId=50972&pathId=1064922824)

# ckeditor - 如何在 CKEditor 4 中将插入符号放在末尾？

> ID：15313933
> 
> 赞同：2
> 
> 时间：2013-03-09T17:49:31.540
> 
> 标签：ckeditor

我想将插入符号放在文本末尾之后`focus()`。

CKEditor 3 有很多解决方案，我尝试了其中的三个，但它们似乎不适用于 CKEditor 4。

注意：我使用的是内联编辑`contenteditable="true"`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T13:56:38.130

这应该可以完成工作（主题和内联编辑器上的 WFM）：

```
CKEDITOR.inline( 'editable', {
    on: {
        focus: function( evt ) {
            setTimeout( function() {
                var editor = evt.editor,
                    range = editor.createRange();

                range.moveToElementEditEnd( editor.editable() );
                range.select();
                range.scrollIntoView();
            }, 100 );
        }
    }
} ); 
```

请注意，超时是必需的，因为焦点选择会自动放置在开始或单击的位置，因此您需要等待一段时间才能覆盖该行为。当然，您可以检查更短的超时。

# border - Retina 显示：1px 边框与 box-shadow 作为边框 - 在视网膜上不清晰，在常规显示器上不显示

> ID：15313949
> 
> 赞同：4
> 
> 时间：2013-03-09T17:51:31.590
> 
> 标签：border, retina-display, css

由于视网膜显示器具有如此高的像素密度，因此 1 像素的边框在这些显示器上看起来相当大。正如 Brad Birdsall 所建议的，CSS`box-shadow`属性可用于创建“0,5 px”边框​​，在视网膜显示器上看起来更加优雅（参见[http://bradbirdsall.com/mobile-web-in-high-resolution](http://bradbirdsall.com/mobile-web-in-high-resolution)）。

在他的一个例子中，他这样做：

```
box-shadow: inset 0 0 1px #000,
            inset 0 1px 0 #75c2f8,
            0 1px 1px -1px rgba(0, 0, 0, .5); 
```

`inset 0 0 1px #000`基本上等于“0,5px”边框​​ - 它在我的 iPhone 上看起来很棒。但是当放大时，你可以清楚地看到这条线*并不*清晰——它的一侧有某种模糊，这是因为它是一个盒子阴影并且我相信没有边框。我能做些什么吗？

此外，在我的非视网膜笔记本电脑显示器上，什么也没有显示。这是正常的，因为这条线只是太细了还是我做错了什么？我只是使用他的示例语法，如下所示：

```
box-shadow: inset 0 0 1px #000; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-27T09:39:17.633

我发现将 box-shadow spread 设置为等于`1 / window.devicePixelRatio`解决问题的值。它在常规屏幕（dpr = 1）和具有一系列 dpr 值的视网膜/高分辨率显示器上看起来不错，在我的屏幕上特别是 1.25（因此传播为 0.8）。

# html - 掩码在 Firefox 中不起作用

> ID：15313950
> 
> 赞同：0
> 
> 时间：2013-03-09T17:51:39.810
> 
> 标签：html, css, firefox

我有最新版本的 Firefox，没有办法让面具工作。我阅读了关于这个问题的所有讨论，但没有一个采用的解决方案有效。

我也为对象分配了一个 ID（掩码文件是 SVG）

这是代码

```
<img id="immy" src="http://www.hdwallpapersarena.com/wp-content/uploads/2012/05/22-amazing-landscape.jpg"> 
```

css

```
#immy
{
    -webkit-mask-image: url(cerchio.svg); /*chrome*/
    mask: url(cerchio.svg#cer); /*firefox*/
} 
```

在 chrome 中一切正常，而在 FF 中我只看到一个全白页面（例如，如果掩码覆盖了所有图像）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-09T17:53:50.147

[CSS Masks](http://www.w3.org/TR/css-masking/)是目前仅在 Webkit 中实现的实验性功能。它们*目前*在 Firefox、Internet Explorer 或任何其他非 webkit 浏览器中不受完全支持。

来源：[http ://caniuse.com/#search=mask](http://caniuse.com/#search=mask)

SVG 元素的所有主要浏览器（包括 IE9+）都支持掩码。走这条路会给你带来更一致的体验。见[http://jsfiddle.net/jonathansampson/S7ctE/](http://jsfiddle.net/jonathansampson/S7ctE/)

```
<svg width="100" height="100">
    <defs>
        <pattern id="a" patternUnits="userSpaceOnUse" width="100" height="100">
            <image xlink:href="http://i.imgur.com/7Nlcay7.jpg" x="0" y="0" width="100" height="100" />
        </pattern>
    </defs>
    <polygon fill="url(#a)" points="25 0, 50 0, 75 0, 100 25, 100 50, 100 75, 75 100, 50 100, 25 100, 0 75, 0 50, 0 25" />
</svg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:29:20.100

您的 Firefox 版本必须是 3.5 (1.9.1) 或更新版本。

在此链接中查看更多信息：[https ://developer.mozilla.org/en-US/docs/CSS/mask](https://developer.mozilla.org/en-US/docs/CSS/mask)

# actionscript-3 - Luasocket 服务器和动作脚本

> ID：15313951
> 
> 赞同：1
> 
> 时间：2013-03-09T17:51:46.393
> 
> 标签：actionscript-3, lua, server-side, luasocket

我使用了 Luasocket 网站上给出的示例来尝试一下，我的目标是制作一个可以与套接字通信的 Flash 游戏。

我首先使用 telnet 运行服务器并连接到它，它工作正常，我发送的每条消息都出现在控制台上，所以我将它带到下一步并通过 AS 3 连接到它，它确实连接但服务器不会收到任何消息，即使我不断地 write() 给它。

有什么我遗漏的东西不会让 actionscript 应用程序与 lua 套接字服务器通信吗？

## 代码

```
-- load namespace
local socket = require("socket")
-- create a TCP socket and bind it to the local host, at any port
local server = assert(socket.bind("*", 0))
-- find out which port the OS chose for us
local ip, port = server:getsockname()
-- print a message informing what's up
print("Please telnet to localhost on port " .. port)
print("After connecting, you have 10s to enter a line to be echoed")
-- loop forever waiting for clients
while 1 do
  -- wait for a connection from any client
  local client = server:accept()
  -- make sure we don't block waiting for this client's line
  client:settimeout(10)
  -- receive the line
  local line, err = client:receive()
  -- if there was no error, send it back to the client
  if not err then client:send(line .. "\n") end
  -- done with client, close the object
  client:close()
end 
```

## 动作脚本：

```
var sock:Socket = new Socket();
sock.connect("127.0.0.1",3335);
stage.addEventListener(Event.ENTER_FRAME,test);
public function test(e:Event):void{
    sock.writeUTF("Hello world");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T19:19:32.043

client:receive() 方法的标准操作模式是“*l”，它等待输入流中的换行符返回。[http://w3.impa.br/~diego/software/luasocket/tcp.html#receive](http://w3.impa.br/~diego/software/luasocket/tcp.html#receive)

要更正此问题，请发送“Hello world\n”（假设它是 actionscript 中的正确转义字符）或在 receive() 中使用另一个参数。

# scala - 如何在scala中共享案例类的行为

> ID：15313952
> 
> 赞同：4
> 
> 时间：2013-03-09T17:51:47.453
> 
> 标签：scala, inheritance, case-class

使用我得到的案例类在 scala 中实现我的域模型

```
abstract class Entity {
    val _id: Option[BSONObjectID]
    val version: Option[BSONLong]
} 
```

以及几个定义不同实体的案例类，例如

```
case class Person (
   _id: Option[BSONObjectID],
   name: String, 
   version: Option[BSONLong]
) extends Entity 
```

我需要的是一种稍后从对实体进行操作的通用方法设置 _id 和版本的方法，因为我必须在所有实体上共享此行为并希望避免将其写下数百次 ;-)。我很想能够

```
def createID(entity: Entity): Entity = {
  entity.copy(_id = ..., version = ...)
} 
```

...但是当然这不会编译，因为实体没有复制方法。它由编译器为每个单独的案例类生成......

在scala中实现这一目标的最佳方法是什么？

为了防止有人问：我必须使用案例类，因为这是第三方库从我收到的请求中为我提取的内容，而案例类实例是稍后序列化回 BSON / MongoDB 的内容......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T23:23:32.973

事实上，人们可以找到一种方法来实现这样的事情

[为支持 copy(id=newId) 方法的所有案例类创建共同特征](https://stackoverflow.com/questions/15078102/create-common-trait-for-all-case-classes-supporting-copyid-newid-method)

但由于我的用例非常复杂，我宁愿只创建两个新类

```
class MongoId(var id : BSONObjectID = null) {
    def generate = {
        id = BSONObjectID.generate
    }
}

class MongoVersion(var version: Long = 0) {
    def update = {
        version = System.currentTimeMillis
    }
} 
```

并在那里实现了关于这些字段的共享行为。当然，您必须相应地更改基类的定义：

```
abstract class Entity {
    def _id: MongoId
    def version: MongoVersion
} 
```

说清楚：这仅在您希望在多个案例类中共享的行为仅影响（在我的案例中更改）一个属性时才有效...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:12:15.843

实施一个特征会起作用吗？

```
trait MongoIdHandler {
  def createId(entity : Entity) : Option[BSONObjectID] = { ..}
  def setVersion(version :  String) : Unit = { ..}
}

case class Person (..) with MongoIdHandler .. 
```

如果任何实例需要特殊版本的 id 生成器，它们可以覆盖 trait 提供的“默认”impl。

# assembly - AVR 汇编逻辑运算

> ID：15313955
> 
> 赞同：0
> 
> 时间：2013-03-09T17:52:02.927
> 
> 标签：assembly, avr

我在 bigavr 板上有以下 atmega1280 的汇编代码。

```
;Set PA3:0 to input without pull-up and PA7:4 to output and use PORTA7:4 for LED0-3.

.nolist
.include "m1280def.inc"
.list

.equ PORT, PORTA
.equ DDR, DDRA
.equ PIN, PINA

.equ temp, 0x10
.equ pa1, 0x11
.equ pa2, 0x12
.equ pa3, 0x13

.section .text
.globl main
.org 0x0000

    rjmp    main

main:
main_init_stack_ptr:
    ldi     temp, lo8(RAMEND)
    out     SPL, temp
    ldi     temp, hi8(RAMEND)
    out     SPH, temp

main_init_ports:
    ldi     temp, 0x0
    out     PORT, temp
    ldi     temp, 0xf0          ; 7654 3210 (PORTA index)
    out     DDR, temp           ; oooo iiii (i/o state)

main_loop:
    in      temp, PIN
    andi    temp, 0x0f

    rcall   set_led0

    out     PORT, temp

    rjmp    main_loop

set_led0:                       ; PORT << 4: (1 & 2) | 3
    rcall   prepare_operands

    and     pa1, pa2
    or      pa3, pa1

    sbrs    pa3, 0
    ret
    sbr     temp, 0b00010000
    ret

prepare_operands:               ; move inputs 1..3 to pa1..3
    mov     pa1, temp           ; and shift/mask them the LSB
    mov     pa2, temp
    mov     pa3, temp
    lsr     pa1
    lsr     pa2
    lsr     pa2
    lsr     pa3
    lsr     pa3
    lsr     pa3
    andi    pa1, 0x01
    andi    pa2, 0x01
    andi    pa3, 0x01
    ret 
```

代码应该执行逻辑操作：`LED0: (PA1 ^ PA2) v PA3`

但我不明白它是如何工作的。我的假设：`in temp, PIN`我可以读出输入引脚上的值。如果 PORTA1 和 PORTA3 被激活，PIN 应该返回`00000101`。好的，`prepare_operands`这被移到变量pa1，pa2和pa3中。对于 pa1，它向右移动一次。所以 pa1 包含`00000010`. 在pa1上执行了一个`addi`操作，为什么？这是如何运作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:51:45.613

如果掩码在某个位置有位，则代码会尝试在操作数中放置一个 0x1。

首先，pa1、pa2 和 pa3 中的每一个都移动了不同的量，以使感兴趣的位进入最右端。然后“and with immediate 0x1”清除变量中除最右边之外的所有位，并保持最右边不变。

该变量将包含 0x0 或 0x1，具体取决于感兴趣位的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T19:07:16.697

`addi`我在您发布的代码中没有看到任何说明。如果您的意思是`andi`，那么目的是屏蔽除感兴趣的位之外可能已设置的任何其他位。

`temp`设置为`PIN & 0xf`，因此它可以具有 0x0..0xf 范围内的任何值。如果`temp`碰巧是 0xf 而你只是设置`pa1`为，`temp >> 1`那么你会得到 0x7。但由于 的意图`prepare_operands`似乎是将第 n:th 位放在`pa`n 中，它在移位后执行按位与 (例如 0xf >>1 == 0x7, 0x7 & 1 == 1)。

# perl - 如何防止这种重复计算？

> ID：15313956
> 
> 赞同：-1
> 
> 时间：2013-03-09T17:52:03.643
> 
> 标签：perl

我有两组这样的数字范围。

```
Set 1: 1..6, 2..7, 3..8, 4..9, 5..10
Set 2: 2..7, 2..6 
```

我想将 Set 2 中的范围与 Set 1 中的范围进行比较，所以

1.  计算完美匹配的数量（2..7）

2.  计算匹配的低数和不匹配的高数的实例数 ( `2..6`)

3.  计算不匹配的低数和不匹配的高数的实例数 ( `1..7`)

以下代码有效，但它计数`2.`两次`3.`。例如：`2..7`来自 Set 2 的范围同时符合`2.`和`3.`。如何只记录一个实例？

```
#!/usr/bin/perl
use strict;
use warnings;

#Set 1: 1..6, 2..7, 3..8, 4..9, 5..10
my @set1_low = (1..5);
my @set1_up = (6..10);
my @set1 = ([@set1_low],[@set1_up]);

#Set 2: 2..7, 2..6
my @set2_low = (2,2);
my @set2_up = (7,6);
my @set2 = ([@set2_low],[@set2_up]);

my $size1 = scalar(@set1_low);
my $size2 = scalar(@set2_low);

my $low_count=0;
my $up_count=0;
my $match=0;

for(my $a=0; $a < $size1; $a++){
    my ($lower,$upper) = ($set1[0][$a],$set1[1][$a]);
    for(my $b=0; $b < $size2; $b++){
        #If lower and upper are same to set1, $both++
        if ($lower==$set2[0][$b] && $upper==$set2[1][$b]){
            $match++;
            next;
        }

        #If lower match but upper unmatch, $low_count++
        elsif ($lower==$set2[0][$b] && $upper!=$set2[1][$b]){
            $low_count++;
            next;
        }

        #if upper match but lower unmatch, $up_count++
        elsif ($lower!=$set2[0][$b] && $upper==$set2[1][$b]){
            $up_count++;
            next;
        } 
     }
 }
 print "Perfect match: $match\n";
 print "lower match, upper unmatch: $low_count\n";
 print "upper match, lower unmatch: $up_count\n"; 
```

此外，如果 Set 2 包含一个范围，例如`22..32`，我将如何检测不与 Set 1 中的任何范围重叠的范围？有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:08:35.977

```
my @set1 = map [ split /\.\./ ], split /\s*,\s*/, '1..6, 2..7, 3..8, 4..9, 5..10';
my @set2 = map [ split /\.\./ ], split /\s*,\s*/, '2..7, 2..6';

my (%exact, %lo, %hi);
for (@set2) {
   my ($l,$h) = @$_;
   ++$exact{$l}{$h};
   ++$lo{$l};
   ++$hi{$h};
}

my $exact               = 0;
my $partial_match_lo_hi = 0;
my $partial_match_lo    = 0;
my $partial_match_hi    = 0;
my %mismatch;
for (@set1) {
   my ($l,$h) = @$_;
   if    ( $exact{$l}{$h}     ) { ++$exact;               }
   elsif ( $lo{$l} && $hi{$h} ) { ++$partial_match_lo_hi; }
   elsif ( $lo{$l}            ) { ++$partial_match_lo;    }
   elsif ( $hi{$h}            ) { ++$partial_match_hi;    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T20:34:40.727

获得您想要的行为的主要更改是按其他顺序循环，*即*首先在 Set 2 上，然后在 Set 1 上。这是一种更自然的编程方式，因为您对 Set 2 的属性感兴趣。下面，让我们详细查看变化。

启用`strict`和`warnings`pragmata 很好！绝对保留那些。

```
#! /usr/bin/env perl
use strict;
use warnings; 
```

因为您询问了完全不相交的范围，所以我们将在此处将其添加到 Set 2。

```
#Set 1: 1..6, 2..7, 3..8, 4..9, 5..10
my @set1_low = (1..5);
my @set1_up = (6..10);
my @set1 = ([@set1_low],[@set1_up]);

#Set 2: 2..7, 2..6, 22..32
my @set2_low = (2,2,22);
my @set2_up = (7,6,32);
my @set2 = ([@set2_low],[@set2_up]); 
```

为了计算大小，已经隐含了标量上下文，因为您正在分配给标量。例如，写这些的一种不太罗嗦的方式是`my $size1 = @set1_low;`。

```
my $size1 = scalar(@set1_low);
my $size2 = scalar(@set2_low); 
```

你想计算完全未命中，所以我们在这里添加`$no_match`.

```
my $low_count=0;
my $up_count=0;
my $match=0;
my $no_match=0; 
```

请注意，循环是倒置的，但我`$a`独自一人离开`$b`。对于 Set 2 中的每个范围，代码按顺序查看 Set 1 中的范围，搜索第一个满足的属性。命中时，无需考虑 Set 1 中的其余范围，因为您的问题表明您不想重复计算，因此我们使用 终止内部循环`last`。按重要性降序排列属性，以便程序中最早发生的测试优先。

如果没有属性匹配（即，如果`$found_match`仍然为假），那么我们记录气味。

在文体上，仅仅用英文重述代码的注释是没有价值的。评论是为了解释*原因*和不明显的信息，所以我在下面删除了它们。

```
for(my $b=0; $b < $size2; $b++){
    my $found_match=0;
    for(my $a=0; $a < $size1; $a++){
        my ($lower,$upper) = ($set1[0][$a],$set1[1][$a]);
        if ($lower==$set2[0][$b] && $upper==$set2[1][$b]){
            $match++;
            $found_match++;
            last;
        }
        elsif ($lower==$set2[0][$b] && $upper!=$set2[1][$b]){
            $low_count++;
            $found_match++;
            last;
        }
        elsif ($lower!=$set2[0][$b] && $upper==$set2[1][$b]){
            $up_count++;
            $found_match++;
            last;
        }
    }
    unless ($found_match) {
        $no_match++;
    }
} 
```

最后，打印结果。

```
print "Perfect match: $match\n";
print "lower match, upper unmatch: $low_count\n";
print "upper match, lower unmatch: $up_count\n";
print "No match: $no_match\n"; 
```

输出：

```
完美匹配：1
下匹配，上不匹配：0
上匹配，下不匹配：1
没有匹配：1
```

上面的数据结构和风格对 Perl 来说有点不自然。如果您告诉我们更多关于您要解决的问题的背景，我们可以为您提供更多有用的建议。

* * *

添加更多测试（例如部分重叠）的压力会迅速促使您选择更好的数据结构。而不是使用并行数组作为上限和下限——就像我们在 C 程序中可能必须做的那样——将每个范围视为一个单元。

```
my @set1 = ([1, 6], [2, 7], [3, 8], [4, 9], [5, 10],           [90, 150]);
my @set2 = ([2, 7], [2, 6], [7, 8],                  [22, 32], [80, 140]); 
```

将下限和上限附加到同一个标量（在这种情况下是对数组的引用），我们现在可以询问两个范围是否共享下限或是否共享上限。

```
sub lowers  { $_[0][0] == $_[1][0] }
sub uppers  { $_[0][1] == $_[1][1] } 
```

有了这些定义，精确匹配的测试就很简单了。

```
sub match   { lowers(@_) && uppers(@_) } 
```

在测试重叠时，书写`$range1[0]`很快`$range2[1]`就会变得很累，所以下面我们将范围分解为（*a [0]*，*a [1]*）和（*b [0]*，*b [1]*）。然后我们测试一个范围的任一端点是否在另一个范围内。

```
sub overlap {
  my($a0,$a1,$b0,$b1) = map @$_, @_;
  $a0 >= $b0 && $a0 <= $b1 || $a1 >= $b0 && $a1 <= $b1;
} 
```

测试每个条件的代码现在几乎相同，不同之处在于调用哪个函数和增加哪个计数，所以让我们分解并将测试与它们各自的计数相关联。因为测试彼此重叠，但最多有一个获得“信用”，所以准备好排列顺序`@tests`以获得您期望的结果。

```
my $low_count=0;
my $up_count=0;
my $match=0;
my $overlap=0;
my $no_match=0;

my @tests = (
    [\&match,   \$match],
    [\&lowers,  \$low_count],
    [\&uppers,  \$up_count],
    [\&overlap, \$overlap],
); 
```

该算法的核心现在非常简短。该代码类似于您向另一个人解释它的方式。也就是说，对于第 2 组中的每个范围，然后对于我们的每个测试，扫描第 1 组中的所有范围。在匹配时，记下成功并继续到第 2 组中的下一个范围。在尝试所有测试后均未成功，记下失败并继续。

```
SET2:
foreach my $two (@set2) {
    for (@tests) {
        my($test,$count) = @$_;
        if (grep $test->($_, $two), @set1) {
            ++$$count;
            next SET2;
        }
    }

    ++$no_match;
} 
```

是的，该算法很简洁，但它具有二次时间复杂度。例如，这意味着将集合大小增加三倍将产生大约 9 倍的减速。

输出代码如您所料。

```
print "Perfect match: $match\n";
print "lower match, upper unmatch: $low_count\n";
print "upper match, lower unmatch: $up_count\n";
print "Overlap: $overlap\n";
print "No match: $no_match\n"; 
```

输出：

```
完美匹配：1
下匹配，上不匹配：1
上匹配，下不匹配：1
重叠：1
没有匹配：1
```

# java - 如何使用 Java 属性文件定义对象并设置对象的属性？

> ID：15313957
> 
> 赞同：0
> 
> 时间：2013-03-09T17:52:19.320
> 
> 标签：java, properties, configuration

我正在开发一个 Java 程序，该程序从各种来源检索数据，操作数据，然后将数据发送到各种目的地。我需要允许用户在属性文件中定义数据源、数据目的地和程序中用于处理数据的模块。

我会设想属性文件看起来像下面这样......

```
dataFlow1 = dataProcessorTypeA
dataFlow1.source = mySource1
dataFlow1.destination = myDestination1
dataFlow2 = dataProcessorTypeA
dataFlow2.source = mySource2
dataFlow2.destination = myDestination2
dataFlow3 = dataProcessorTypeB
dataFlow3.source = mySource3
dataFlow3.successDestination = mySuccessDestination3
dataFlow3.failureDestination = myFailureDestination3
...
dataFlow99 = dataProcessorTypeZ 
```

与每个数据流相关的属性将取决于所选的模块。所以在上面的例子中，“dataProcessorTypeA”需要设置“source”和“destination”属性，而“dataProcessorTypeB”需要设置“source”、“successDestination”和“failureDestination”属性。在示例中，“dataProcessorTypeA”、“dataProcessorTypeB”和“dataProcessorTypeZ”将是程序中的类。

我过去曾使用属性文件进行简单的“property=value”类型配置，但我不明白如何实现这种类型的配置，或者我应该使用什么词在 Google 上搜索以查找类似的示例'正在努力实现。我还想避免将大量逻辑硬编码到读取属性文件的程序中，因为将来可能会添加新模块。我假设这将类似于使用 getter 和 setter 配置 JavaBeans 的方式。

我想要实现的类似于用户可以通过在 log4j 属性文件中设置以下内容来配置 Apache log4j 以使用多个附加程序的方式......

```
log4j.appender.ca=org.apache.log4j.ConsoleAppender
log4j.appender.ca.layout=org.apache.log4j.PatternLayout
log4j.appender.rfa=org.apache.log4j.RollingFileAppender
log4j.appender.rfa.File=example.log 
```

我查看了 log4j 中的 PropertyGetter.java 文件，我可以看到它利用了反射和内省，但是我对这些概念的理解不够深入，无法理解正在发生的事情。

我不明白的是如何将“log4j.appender.ca”创建为一个对象，配置为使用 org.apache.log4j.ConsoleAppender，然后 log4j 如何知道在处理日志时查找“log4j.appender.ca”消息。我的问题与 log4j 并没有真正的关系，但我用来说明我希望在我自己的程序中实现的类型配置类型。

Apache Shiro 还提供了一个类似的机制，允许用户自定义框架的运行方式。我查看了 Shiro 中的 ReflectionBuilder.java 文件，可以看到正在使用 Commons-BeanUtils 库，但我还是有点无法理解代码中发生了什么。

所以总而言之，我的问题是，谁能让我更好地理解 log4j 和 Shiro 等框架如何允许执行这种类型的配置，或者就我应该搜索的内容给我一些指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:07:44.507

看看[这里](http://docs.oracle.com/javase/tutorial/reflect/class/classNew.html)，并与[Properties](http://docs.oracle.com/javase/6/docs/api/java/util/Properties.html)类一起使用。

有了`Class.forName()`它，您可以找到一个给定其完整限定名的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:06:14.393

不需要框架：使用 StringTokenizer(propertyname, ".") 然后每个标记代表嵌套映射的一个级别，除了最后/叶是值。

这是由

```
Map<String,Map<String,..>> 
```

所以“dataflow1”是第一级地图中的一个键，在第2级有值“源”和“目标”，然后是“源1”和“目标1”的叶/数据值

# matlab - 如何在 3d 图中移动颜色条的位置

> ID：15313962
> 
> 赞同：2
> 
> 时间：2013-03-09T17:52:55.973
> 
> 标签：matlab, plot, position, scatter-plot, colorbar

我正在显示 3D 散点图，但 z 轴上的标签与颜色条重叠。如何将彩条向右或向左移动所需的像素数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T18:52:38.897

您可以使用`findobj`获取颜色条的句柄，通过查询其当前位置`get`，然后根据您的需要进行修改并使用以下方法进行更改`set`：

```
h = findobj('tag', 'Colorbar');
pos = get(h, 'position')

% modify pos according to your needs

set(h, 'position', pos) 
```

# css - CSS - 如何将不同的字体大小相互对齐？

> ID：15313963
> 
> 赞同：0
> 
> 时间：2013-03-09T17:52:58.980
> 
> 标签：css, alignment, font-size

我对一些 CSS 有一个小问题-> [jsFiddle 上的示例](http://jsfiddle.net/earle37/Eh8TB/)

简单按钮：

```
<button type="reset" id="reset-btn">Reset</button> 
```

CSS 规则：

```
button#reset-btn:after{
    content:" <<";
    font-size:2em;
} 
```

如您所见，“<<”是通过 CSS 生成的。有没有办法将这两种不同的字体大小相互对齐，以便较大的“<<”旁边的文本位于按钮的垂直中心？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T17:56:25.683

将文本包裹在`span`标签内，然后将样式`vertical-align: middle`应用于`button`和`span`

**HTML**

```
<button type="reset" id="reset-btn"><span id="reset-text">Reset</span></button> 
```

**CSS**

```
button#reset-btn:after{
    content:" <<";
    font-size:2em;
    vertical-align: middle;
}

#reset-text{
    vertical-align:middle;
} 
```

**工作示例：http:** [//jsfiddle.net/Eh8TB/3/](http://jsfiddle.net/Eh8TB/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T17:56:36.700

添加`vertical-align`属性：

```
button#reset-btn:after {
content:" <<";
font-size:2em;
vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T17:59:59.900

你可以试试...

```
button#reset-btn:after, button#reset-btn{
font-size:1em; 
```

}

在你的 JS fiddle CSS 下添加它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T18:04:03.510

我只想给内容一个位置：

```
button#reset-btn:after{
    content:" <<";
    font-size:2em;
    position: relative;
    top: 2px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-10T00:35:18.440

当不需要文本换行时，Kevin 的回答效果很好，但如果您的按钮有更多单词并开始一个新行，它看起来就不那么好了。

我最终将每种字体包装在一个潜水广告中，对它们都使用这个 css

```
display: table-cell;
vertical-align: middle 
```

这就是我的意思

**工作解决方案** [http://jsfiddle.net/Eh8TB/71/](http://jsfiddle.net/Eh8TB/71/)

# ios - Xcode Pre-Action Scripts 不工作？

> ID：15313964
> 
> 赞同：1
> 
> 时间：2013-03-09T17:53:11.990
> 
> 标签：ios, xcode, bash, shell, sed

# 问题

我尝试添加预操作 shell 脚本，这些脚本将根据我的构建目的打开/关闭我的 .pch 文件中的某些定义。

但是，在运行构建时，什么也没有发生。我不是一个流利的 shell 脚本编写者，所以解决方案可能是我的语法不正确，但 Xcode 不会告诉我任何事情。

# 细节

这是一些代码：

```
prefix=${PROJECT_DIR}/${GCC_PREFIX_HEADER}

sed -i 's/source/working/' $prefix
sed -i 's/\/\/#define\ HOCKEYAPP_BUILD/#define\ HOCKEYAPP_BUILD' $prefix
sed -i 's/\/\/#define\ FLURRY_ENABLED/#define\ FLURRY_ENABLED' $prefix
sed -i 's/\/\/#define\ PRODUCTION_BUILD/#define\ PRODUCTION_BUILD' $prefix 
```

我添加了第一行以测试它是否会删除我知道的 .pch 文件中的基本单词。它没有。这让我相信我的路径是无效的。

我尝试了 .pch 文件路径的几种不同变体，但都失败了，尽管它们都可能是错误的。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T07:31:36.637

你的`sed`台词似乎不正确。尝试：

```
prefix=${PROJECT_DIR}/${GCC_PREFIX_HEADER}

sed -i -e 's/source/working/' $prefix
sed -i -e 's/\/\/#define\ HOCKEYAPP_BUILD/#define\ HOCKEYAPP_BUILD/' $prefix
sed -i -e 's/\/\/#define\ FLURRY_ENABLED/#define\ FLURRY_ENABLED/' $prefix
sed -i -e 's/\/\/#define\ PRODUCTION_BUILD/#define\ PRODUCTION_BUILD/' $prefix 
```

# jsf-2 - 手风琴面板已打开，但第一个选项卡的内容为空

> ID：15313965
> 
> 赞同：1
> 
> 时间：2013-03-09T17:53:25.643
> 
> 标签：jsf-2, primefaces

我有一个 Dynamic=true 的手风琴面板。它是显示的学生列表。有两个问题。Accordion 在火狐浏览器中工作正常，但第一个选项卡的内容为空白，其余选项卡包含所有内容。

相同的手风琴面板在 IE8 中不起作用。选项卡在 IE8 中不可切换。

```
<p:accordionPanel  value="#{testBean.studests}" var="stud"  dynamic="true"  activeIndex="#{testBean.formBean.id}">  

              <p:tab title="#{stud.name}" id="studId"> 
```

# php - 仅在服务器上出现“无法加载请求的类”错误

> ID：15313970
> 
> 赞同：3
> 
> 时间：2013-03-09T17:53:48.357
> 
> 标签：php, codeigniter, remote-server

我有一个**CodeIgniter**应用程序，**它**在我的**本地笔记本电脑**（Windows 7）上运行良好。我已将文件上传到**远程服务器**，现在**出现错误** `Unable to load the requested class: itemblocklibrary`。

加载库的代码：

```
$ci =& get_instance();
$ci->load->helper('member_area_helper'); // works
$ci->load->library('itemBlockLibrary'); // dies here 
```

该文件位于远程服务器上：`/www/case/project/application/libraries/itemBlockLibrary.php`

我试过了：

```
echo 'Have you seen ' . APPPATH . 'libraries/itemBlockLibrary.php? <br/>';
echo (file_exists(APPPATH . 'libraries/itemBlockLibrary.php') ? 'Yes sir, it does exists!' : 'No sir, can\'t find it'); 
```

输出：

```
Have you seen application/libraries/itemBlockLibrary.php? 
Yes sir, it does exists! 
```

和：

*   使用小写`$ci->load->library('itemblocklibrary');`-> 相同的错误
*   加载另一个库 - >同样的错误
*   三重检查文件是否存在 (FTP) -> 是否存在
*   检查文件夹和文件权限。（文件夹：755，文件：644；与 helpers 文件夹相同）

有人可以帮我保持头发吗？;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T20:32:55.617

我怀疑您的服务器是某种 Linux 风格，并且您遇到区分大小写的问题。您的文件使用驼峰式名称`itemBlockLibrary.php`，并且正在转换为所有小写和大写首字母，以便`CI_Loader`类在目录中找到匹配的文件。

从 Loader 类中，`_ci_load_class`函数：

```
// We'll test for both lowercase and capitalized versions of the file name
foreach (array(ucfirst($class), strtolower($class)) as $class) 
```

更改文件名以使用 CI 约定

*   文件名必须大写。例如：Myclass.php
*   类声明必须大写。例如：类 Myclass
*   类名和文件名必须匹配。

查看[自定义库类](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)的文档。

在您的情况下，您需要将文件命名为`MY_itemblocklibrary.php`（或您在配置文件中设置的任何前缀），然后将其加载为：

```
$this->load->library('MY_itemblocklibrary'); 
```

# asp.net-mvc - 扩展 AuthorizeAttribute 以检测登录的非用户（如何处理用户授权）

> ID：15313973
> 
> 赞同：3
> 
> 时间：2013-03-09T17:53:53.037
> 
> 标签：asp.net-mvc, asp.net-membership

环境：ASP.NET MVC 4、Visual Studio 2012

该`[Authorize]`属性验证用户是否具有有效的登录 cookie，但不验证用户是否实际存在。如果用户被删除，而该用户的计算机仍持有持久的凭据 cookie，则会发生这种情况。在这种情况下，允许登录的非用户运行标有 [Authorize] 属性的控制器操作。

解决方案似乎很简单：扩展`AuthorizeAttribute`并在 AuthorizeCore 例程中验证用户是否存在。

`[Authorize]`在我编写此代码供我自己使用之前，我想知道是否有人知道针对属性中这个巨大漏洞的现成解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T18:55:51.393

## 您需要一个特殊的身份验证全局操作过滤器。

您的问题的解决方案如下。您必须引入将在调用控制器操作之前执行的全局操作过滤器。这个事件被命名为`OnActionExecuting`。在这个全局操作过滤器中，您还可以处理用户具有有效身份验证 cookie，但不再存在于持久性 (DB) 中的场景（并且您必须删除其 cookie）。

这是获取想法的代码示例：

```
 public class LoadCustomPrincipalAttribute : ActionFilterAttribute 
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
                CustomIdentity customIdentity;

                if (HttpContext.Current.User.Identity.IsAuthenticated)
                {        
                    UserData userData = UserRepository.GetUserByName(HttpContext.Current.User.Identity.Name);

                    if (userData == null)
                    {
                      //TODO: Add here user missing logic, 
                      //throw an exception, override with the custom identity with "false" - 
                      //this boolean means that it have IsAuthenticated on false, but you
                      //have to override this in CustomIdentity!
                      //Of course - at this point you also remove the user cookie from response!
                    }

                    customIdentity = new CustomIdentity(userData, true);
                }
                else
                {
                    customIdentity = new CustomIdentity(new UserData {Username = "Anonymous"}, false);
                }

                HttpContext.Current.User = new CustomPrincipal(customIdentity);

            base.OnActionExecuting(filterContext);
        }
    } 
```

希望对你有帮助！

不要忘记将此操作过滤器注册为全局过滤器。你可以这样做：

```
 private static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new LoadCustomPrincipalAttribute());
    } 
```

只是为了添加这个。别管了`AuthorizeAttribute`。它应该按预期工作。它只是检查`HttpContext.Current.User.Identity.IsAuthenticated == true`条件。在某些情况下，您需要覆盖它，但这不是一个。在开始之前，您确实需要适当的用户/身份验证处理`AuthorizeAttribute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-29T19:49:49.880

同意彼得。这是我为 AngularJs 应用程序所做的。创建一个检查锁定日期的属性。将 YourAppUserManager 更改为正确的。

```
public class LockoutPolicyAttribute : ActionFilterAttribute
{
    public override async Task OnActionExecutingAsync(HttpActionContext actionContext, CancellationToken cancellationToken)
    {
        if (HttpContext.Current.User.Identity.IsAuthenticated)
        {
            var now = DateTime.UtcNow;

            var currentUserId = Convert.ToInt32(HttpContext.Current.User?.Identity?.GetUserId());

            var user = await HttpContext.Current.GetOwinContext().GetUserManager<YourAppUserManager>().FindByIdAsync(currentUserId);

            if (user?.LockedOutUntil >= now)
            {
                actionContext.Response = actionContext.Request.CreateErrorResponse((HttpStatusCode)423, "Account Lockout");
                return;
            }
        }

        base.OnActionExecuting(actionContext);
    }
} 
```

然后让状态码 423 的 AngularJs 拦截服务重定向到登录页面。

```
switch (response.status) {
            case 423: //Account lockout sent by the server.
                AuthService.logOut();
                window.location.href = '/login'; 
```

# lua - 在电晕中创建一个带有和图像的类

> ID：15313975
> 
> 赞同：3
> 
> 时间：2013-03-09T17:54:18.420
> 
> 标签：lua, coronasdk

我正在尝试根据[此示例](http://www.coronalabs.com/blog/2011/09/29/tutorial-modular-classes-in-corona/)在电晕中创建自己的类 它看起来像：

```
local car={};
local car_mt = { __index=car };
function car.new()
    local ncar=
    {
        img=display:newImage("test_car.png");
    }
    return setmetatable(ncar,car_mt);
end
return car; 
```

它被这个级别调用：

```
local pcar=require("car")
...
function scene:enterScene( event )
    local group = self.view
    physics.start();
    local car1=pcar.new();

end 
```

该图像存在于同一文件夹中，但我得到：

> newImage 的错误参数 #-2（预期代理，为零）

我在网上看到一些类似的问题，在我看来，`newImage()`不知道在哪里放置图片。但是，如果它制作的课程用于任何阶段，我该怎么说呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-09T19:17:38.470

哦，错误是因为您将`newImage`函数调用为：

```
display:newImage( "test_car.png" ) 
```

这是错误的语法。上面的陈述实际上意味着：

```
display.newImage( display, "test_car.png" ) 
```

这显然是错误的。

正确的方法是：

```
display.newImage( "test_car.png" ) 
```

[在此处](http://docs.coronalabs.com/api/library/display/newImage.html)阅读有关[电晕](/questions/tagged/corona "显示标记为“电晕”的问题")API的更多信息。

# r - 用 R 中的列表替换参数

> ID：15313976
> 
> 赞同：9
> 
> 时间：2013-03-09T17:54:25.873
> 
> 标签：r, argument-passing

有时有一个函数具有任意数量的参数。比如`bootstrapPage`封装闪亮的功能。如果我有一个 data.frame 并且我想为一行创建一个小部件，那么我还没有找到一种根据 data.frame 的行号传递参数数量的漂亮方法。到目前为止，我生成了脚本并使用了`eval(parse(text="..."))`

实际上，在 R 中传递给函数的参数结构（键和值）类似于 a `list`，所以我想知道是否有一种方法可以将参数作为 R 中的列表传递。

更具体地说，如果我有一个函数`f`和一个列表，有没有办法根据 的名称和参数的名称以及参数的位置和位置的匹配来`argv`传递对象？`argv``f``argv``f``argv``f`

例如，让

```
f <- function(a, b) a + b
argv <- list(a=1, b=2) 
```

我应该如何将其传递`argv`给`f`相当于`f(a=argv$a, b=argv$b)`？

或者如果我们有：

```
f <- function(a, b, ...) { # some codes }
argv <- list(a = 1, b = 2, 3, 4, 5) 
```

我应该如何将其传递`argv`给`f`相当于`f(a=argv$a, b=argv$b, argv[[3]], argv[[4]], argv[[5]])`？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T17:57:09.117

您正在寻找`do.call`.

```
do.call(f, argv) 
```

这里有些例子

```
> args <- list(n = 10, mean = 3, sd = .5)
> do.call(rnorm, args)
 [1] 3.589416 3.393031 2.928506 2.503925 3.316584 2.581787 2.686507 3.178877
 [9] 3.083885 2.821506
> do.call(rnorm, list(10, 3, .5))
 [1] 3.964526 2.838760 2.436684 3.068581 1.842332 3.739046 4.050525 3.097042
 [9] 3.665041 3.535947
> f <- function(a, b) a + b
> argv <- list(a=1, b=2)
> do.call(f, argv)
[1] 3
> f <- function(a, b, ...){print(a);print(b);print(sum(...))}
> argv <- list(a=1,b=2, 3, 4, 5)
> do.call(f, argv)
[1] 1
[1] 2
[1] 12 
```

# amazon-web-services - AWS CloudFront 分布在与 Web 服务器相同的域下

> ID：15313981
> 
> 赞同：5
> 
> 时间：2013-03-09T17:55:34.203
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudfront, amazon-route53

目前，我的网络服务器位于 mydomain.com，两个 CDN 位于 static.mydomain.com 和 media.mydomain.com。

是否有可能全部在 mydomain.com 下？例如

mydomain.com - 网络服务器

mydomain.com/static - 静态 CDN

mydomain.com/media - 媒体 CDN

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T16:03:18.733

此配置应该可以结合使用 Route 53 的别名功能、S3 重定向和 CloudFront 行为。

1**配置具有多个来源和路径匹配行为的 CloudFront 分配**

看起来您有三个不同的内容来源，“网络服务器”内容、“静态”内容和“媒体”内容。CloudFront 应该能够为同一域名后面的每个来源提供内容。要进行此设置，您需要在 CloudFront 分配中配置三个不同的源。这是创建 CloudFront 分配的指南，我在下面提供了概述：http: [//docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CreatingDownloadDistributions.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CreatingDownloadDistributions.html)

*   创建分发时将“网络服务器”设置为源
*   创建分发后，导航到分发设置并单击源选项卡
*   添加另外两个来源，一个用于静态，一个用于媒体
*   单击行为选项卡
*   创建一个路径模式为 /static/* 的新行为，并选择您刚刚创建的“静态”内容来源。重复这些步骤，为 /media/* 路径创建第二个行为，并将此行为指向“媒体”内容源。与这两种补丁模式不匹配的任何内容都将退回到默认行为，并将提供来自您的“网络服务器”来源的内容。

2**配置 CloudFront 以使用您的域名**

创建 CloudFront 分配时，您会在“cloudfront.net”域下获得分配名称。为了让 CloudFront 与您自己的域名结合使用，您需要配置一个 CNAME，将“www.mydomain.com”域指向 CloudFront 分配 DNS 名称。然后，您需要将 CloudFront 分配配置为在看到对 www.mydomain.com 域的请求时做出响应。

文档：[http ://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/CNAMEs.html)

*   编辑您的 CloudFront 分配，然后导航到分配详细信息的“常规”选项卡。单击编辑按钮并将“www.mydomain.com”添加到备用名称列表中
*   在 Route 53 中的“mydomain.com”托管区域中，创建一个新的 RRSet 作为 CNAME 类型，将名称设置为 www.mydomain.com，并将值配置为分配给您的 CloudFront 分配的“域名”已经创建了。您可以在分发详细信息的常规选项卡中找到分发“域名”。

此时，当您浏览 www.mydomain.com 时，您将被路由到最近的 CloudFront 边缘站点，并且返回的内容将来自基于请求路径的三个不同内容来源之一。但您也希望 'mydomain.com' 的行为方式相同。您可以通过使用 Route 53 别名和 S3 重定向创建 www-lyzer 来实现此目的。

3**使用 Route 53 别名和 S3 重定向在“mydomain.com”的区域顶点创建 www-a-lizer**

这篇博文很好地介绍了 Route 53 别名和 S3 重定向，对于这个示例，我们需要在以下步骤中进行一些调整：

[http://aws.typepad.com/aws/2012/12/root-domain-website-hosting-for-amazon-s3.html](http://aws.typepad.com/aws/2012/12/root-domain-website-hosting-for-amazon-s3.html)

*   使用 S3 控制台创建一个名为“mydomain.com”的新 S3 存储桶
*   配置“mydomain.com”存储桶以将所有请求重定向到“www.mydomain.com”。请注意，因为我们需要重定向到 S3 存储桶以外的东西，所以我们必须使用重定向规则而不是“重定向所有请求”选项。因此，在您的存储桶属性中，单击“启用网站托管”单选按钮。展开“编辑重定向规则”并添加以下规则配置：

> ```
> <RoutingRules>
>     <RoutingRule>
>         <Redirect>
>             <HostName>www.mydomain.com</HostName>
>         </Redirect>
>     </RoutingRule>
> </RoutingRules> 
> ```

*   使用 Route 53 控制台，打开您的“mydomain.com”托管区域并创建一个新的 RRSet，如下所示：

> 名称：'mydomain.com'
> 
> 类型：'A'
> 
> 别名：“是”

*   在值字段中，您应该会看到刚刚创建的存储桶。选择“mydomain.com”存储桶。

回复评论：

第三步的目标是确保对“mydomain.com”的请求通过 CloudFront 分配进行定向。理想情况下，我们可以按照步骤 2 中的说明使用 CNAME，但是不能在区域顶点使用 CNAME。就目前而言，这意味着我们必须跳过一些障碍。

可以在 S3 中使用扩展的重定向规则，根据路径匹配重定向到不同的来源。这意味着您的所有用户请求都会在重定向到 CDN 或直接到您的源之前到达 S3。这会给每个请求增加一点延迟。要从 CDN 获得最佳性能，您将希望您的用户尽可能直接地连接（最好不要重定向）。上面提出的解决方案基于这样一个事实，即重定向只发生一次（当用户请求“mydomain.com”时），并且所有后续用户请求都直接转到“www.mydomain.com”。

至于通过 CloudFront 进行的 POST 和身份验证。CloudFront 会将 cookie 和查询字符串传回给源，如果它配置为这样做的话。如果您的身份验证系统可以利用这些方法中的任何一种进行令牌传递，您应该能够通过 CloudFront 传递您的身份验证请求。目前，CloudFront 不会将 POST 请求传递到源。如果您使用客户端脚本进行 POST，那么您可以使用不同的 DNS 名称围绕 CloudFront 进行 POST。例如“post.www.mydomain.com”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T18:01:50.773

简短的回答：没有。

长答案：虽然有可能，但效率极低。您可以设置代理服务器（例如在 Nginx 中）或为自定义路径规则设置 HAProxy，但这会使您的带宽成本加倍（CDN -> 代理 -> 客户端，而不是 CDN -> 客户端）。此外，这没有任何意义，因为首先使用 CDN 基本上没有任何好处。

`mydomain.com`这是基于确实提供动态内容的假设。如果没有，您也可以`mydomain.com`在 S3 上托管整个域 ( )。

# php - 如何从维基百科获取不同公司的摘要？

> ID：15313988
> 
> 赞同：1
> 
> 时间：2013-03-09T17:56:22.767
> 
> 标签：php, api, wikipedia

我正在尝试从维基百科获取用户输入公司的摘要段落。

例如，如果用户输入谷歌，我需要显示谷歌的摘要段落。

我目前使用的代码：

```
// action=parse: get parsed text
// page=$input
// format=json: in json format
// prop=text: send the text content of the article
// section=0: top content of the page

$url = 'http://en.wikipedia.org/w/api.php?action=parse&page=$input&format=json&prop=text&section=0';
$ch = curl_init($url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($ch, CURLOPT_USERAGENT, "TestScript"); // required by wikipedia.org server; use YOUR user agent with YOUR contact information. (otherwise your IP might get blocked)
$c = curl_exec($ch);

$json = json_decode($c);

$content = $json->{'parse'}->{'text'}->{'*'}; // get the main text content of the query (it's parsed HTML)

// pattern for first match of a paragraph
$pattern = '#<p>(.*)</p>#Us'; // http://www.phpbuilder.com/board/showthread.php?t=10352690
if(preg_match($pattern, $content, $matches))
{
    // print $matches[0]; // content of the first paragraph (including wrapping <p> tag)
    print strip_tags($matches[1]); // Content of the first paragraph without the HTML tags.
} 
```

如果返回“参考：[4]”，则有效，`$input = "Zynga"`但无效。`$input = "Google"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T23:13:58.150

您可以改用`action=query&prop=extracts`该`exintro=`选项。例如 [https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exlimit=1&exintro=&explaintext=&titles=Google](https://en.wikipedia.org/w/api.php?action=query&prop=extracts&format=json&exlimit=1&exintro=&explaintext=&titles=Google) for Google。

这应该会删除大部分不需要的格式，例如引用。

# eclipse - 版本控制系统中的 IDE 中立项目

> ID：15313992
> 
> 赞同：1
> 
> 时间：2013-03-09T17:56:40.673
> 
> 标签：eclipse, netbeans, mercurial, project

我有一个反复无常的netbeans项目。我想做的是剥离使这个项目netbeans项目的所有内容，只留下代码，以便我可以轻松地将它导入到eclipse中。

有没有一些自动化的方法可以做到这一点，还是我必须手动删除它？

你会推荐什么方法。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T19:03:27.670

您只需添加`nbproject`要忽略的文件夹（= 不签入）。所有 NetBean 设置都放置在此文件夹中。也不要签入`build`and`dist`文件夹，因为它们包含已编译的代码（但默认情况下它们会被忽略）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T16:40:11.423

做“IDE中立项目”的最好方法是使用Maven！

在 NetBeans 中，当项目基于 Maven（而不是基于 Ant）时，您会看到通常在`nbproject`文件夹中看到的所有 NetBeans 特定文件都不存在。该`nbproject`文件夹甚至不存在。原因是对于基于 Maven 的项目，NetBeans 基本上使用 .`pom.xml`作为项目的定义，这是一件好事，因为 POM 是可移植的，并且可以被其他 IDE 直接理解。

即使对于基于 Maven 的项目，NetBeans 仍会将一些特定于 IDE 的内容存储在一个名为的文件中，`nb-configuration.xml`但您可以将该文件的所有内容作为属性包含在`pom.xml`. 然后，其他 IDE 在加载 POM 时将忽略这些属性。这样，您几乎可以完全避免将任何特定于 IDE 的文件检入 VCS。另外值得一提的`nb-configuration.xml`是，其他人（使用 NetBeans 或其他 IDE）永远不需要其中的内容来*构建*您的项目。另一种说法是它包含非必要数据。POM - 凭借其优点 - 始终保证是对如何构建项目的完整描述。

相反，如果您的 NetBeans 项目是基于 Ant 的，那么至少根据我的经验，您无法避免将 NetBeans 特定文件检查到 VCS 中……因为否则即使使用 NetBeans 的人也无法正确打开您的项目。

然而，即使使用 Maven，也有一个领域您将被迫在 VCS 中拥有特定于 NetBeans 的文件，那就是如果您在 NetBeans 中使用 Matisse GUI 构建器。Matisse GUI 构建器生成一些带有`.form`扩展名的专有文件，您确实需要在您的 VCS 中拥有这些文件。但这是我能想到的唯一一个示例，假设您的项目是基于 Maven 的，那么特定于 NetBeans 的文件需要进入 VCS。

如果该项目确实*是*基于 Maven 的，并且您仍然觉得 VCS 中需要有特定于 NetBeans 的文件，那么请让我们确切地知道您正在考虑哪些文件。然后我们可以从那里拿走它。:-)

# bean-validation - 使用 javax.validation.Validator 获取字段的所有约束违规

> ID：15313994
> 
> 赞同：0
> 
> 时间：2013-03-09T17:56:48.367
> 
> 标签：bean-validation

我有以下领域：

```
@Size(min=1, max=64)
@NotNull(message="may not be blank")
private String name; 
```

我想哄骗验证给我所有的约束违规。例如，当将名称设置为“空”时，我想收到：“可能不是空白”和“大小必须在 1 到 64 之间”

目前我只收到：“可能不是空白”

关于如何配置验证引擎的任何提示？这是我当前通过 Spring 的配置：

```
<bean id="validator"
    class="org.springframework.validation.beanvalidation.LocalValidatorFactoryBean">
    <property name="validationPropertyMap">
        <util:map>
            <entry key="hibernate.validator.fail_fast" value="false" />
        </util:map>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T20:14:00.223

Bean Validation 规范建议将`null`其视为有效值；所有内置约束，例如`@Size`遵循该建议（`@NotNull`当然除外），因此在您的情况下，一个`null`值只会违反`@NotNull`约束。

[我看到的这个要求的唯一解决方案是通过XML 约束映射](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#d0e2308)禁用内置约束的默认验证器，并注册处理`null`为无效的自定义实现。

# flash - 将参数从 swf/exe 返回到命令行

> ID：15313997
> 
> 赞同：1
> 
> 时间：2013-03-09T17:57:04.030
> 
> 标签：flash, apache-flex, command-line, air, return-value

我需要创建从命令行运行的 flash/flex/AIR 应用程序。此应用程序将从命令行获取参数，处理此数据并将一些数据返回到命令行。将参数传递给 exe/swf 很好，但如何将数据返回到命令行？

有没有办法将跟踪输出打印/显示到命令行？

# c++ - 会员复印机

> ID：15313999
> 
> 赞同：0
> 
> 时间：2013-03-09T17:57:12.763
> 
> 标签：c++, operator-overloading, return

我对这段代码有疑问...为什么它一直访问会员复印机

这是代码，这是一个名为 的类的成员函数`string`。

```
string operator +(string &r) {
    char *k = NULL;
    k = new char[strlen(this->getstring()) + strlen(r.getstring()) + 1];

    strcpy(k, this->getstring());
    strcat(k, r.getstring());
    string Z = k;

    delete[] k;
    return Z; // visits MemberWise Copier then destructs.. 
} 
```

这是我的会员复印机..

```
string(string &p) : s(NULL)
{
    setstring(p.getstring());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T18:37:46.943

此代码调用您的`string`类的复制构造函数，因为字符串`Z`是按值返回的。在这种情况下，将始终发生成员副本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:37:54.650

您按值返回：根据定义，这显然调用了复制构造函数（*而不是*“成员复制器”，因为在 C++ 用语中不存在这样的东西）。

所以一切都是它应该的样子。

如果您担心复制字符串的开销，请不要担心：所有现代编译器都会在可能的情况下优化此副本，以便按值返回安全有效（不是您有选择：这里的语义*需要*按值返回）。