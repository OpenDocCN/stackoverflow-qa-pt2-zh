# StackOverflow 问答 16148000-16148999

# css - 哪些 CSS 属性会创建堆叠上下文？

> ID：16148007
> 
> 赞同：60
> 
> 时间：2013-04-22T13:12:28.657
> 
> 标签：css, z-index

我正在研究[堆叠上下文](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)并使用创建堆叠上下文的属性进行一些测试。

我做了几个测试，发现除了 之外`z-index`，当然，以下属性也创建了一个堆叠上下文：

*   `transform`除了`none`;
*   `opacity`除了`1`;
*   和`perspective`。

是否还有其他应用堆叠上下文的属性？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-22T13:27:57.487

以下一种或多种情况会导致元素为其后代建立自己的堆叠上下文^(1 ：)

*   根元素始终拥有一个根堆叠上下文。这就是为什么您无需先定位根元素即可开始排列元素的原因。任何尚未参与本地堆叠上下文（由以下任何其他场景生成）的元素将改为参与根堆叠上下文。

*   设置为定位元素[`z-index`](http://www.w3.org/TR/CSS21/visuren.html#layers)以外`auto`的任何内容（即带有`position`that is not的元素`static`）。

    *   请注意，此行为将针对具有以下内容的元素进行更改，以`position: fixed`使它们始终建立堆叠上下文，而不管其`z-index`值如何。一些浏览器已经开始采用这种行为，但是这种变化还没有反映在 CSS2.1 或新的[CSS Positioned Layout Module](http://www.w3.org/TR/css3-positioning)中，所以现在依赖这种行为可能并不明智。

        [在我的另一个答案中](https://stackoverflow.com/questions/13237713/is-chrome-regressing-regarding-z-indexes-or-what-am-i-doing-wrong/13237896#13237896)探讨了这种行为变化，该答案又链接到[本文](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)和[这组 CSSWG 电话会议记录](http://lists.w3.org/Archives/Public/www-style/2012Oct/0115.html)。

    *   另一个例外是[弹性项目](http://www.w3.org/TR/css3-flexbox/#painting)和[网格项目](https://www.w3.org/TR/css-grid-1/#z-order)。设置`z-index`总是会导致它建立一个堆叠上下文，即使它没有被定位。

*   设置[`opacity`](http://www.w3.org/TR/css3-color/#transparency)为小于`1`.

*   [转换](http://www.w3.org/TR/css3-transforms)元素：

    *   设置[`transform`](http://www.w3.org/TR/css3-transforms/#transform-property)为`none`.

    *   设置[`transform-style`](http://www.w3.org/TR/css3-transforms/#transform-style-property)为`preserve-3d`。

    *   设置[`perspective`](http://www.w3.org/TR/css3-transforms/#perspective-property)为`none`.

*   创建[CSS 区域](http://www.w3.org/TR/css3-regions)：设置[`flow-from`](http://www.w3.org/TR/css3-regions/#the-flow-from-property)为除`none`.`content``normal`

*   在[分页媒体](http://www.w3.org/TR/css3-page)中，每个[页边距框](http://www.w3.org/TR/css3-page/#margin-boxes)都建立了自己的堆叠上下文。

*   在[滤镜效果](http://www.w3.org/TR/filter-effects/)中，设置[`filter`](http://www.w3.org/TR/filter-effects/#FilterProperty)为`none`.

*   在[合成和混合](http://www.w3.org/TR/compositing-1/)中，设置[`isolation`](http://www.w3.org/TR/compositing-1/#isolation)为`isolate`和设置[`mix-blend-mode`](https://www.w3.org/TR/compositing-1/#mix-blend-mode)为不同于`normal`

*   In [will change](http://www.w3.org/TR/css-will-change/) , 设置[`will-change`](http://www.w3.org/TR/css-will-change/#will-change)为任何非初始值都会创建堆叠上下文的属性。

*   在[屏蔽](https://drafts.fxtf.org/css-masking-1/)中，将`clip-path`/设置`mask`为 以外的值`none`。

请注意，[块格式化上下文](https://developer.mozilla.org/en-US/docs/CSS/Block_formatting_context)与堆叠上下文不同；事实上，它们是两个完全独立（尽管不相互排斥）的概念。

* * *

¹ [这不包括*伪堆叠上下文*，这是一个非正式术语，仅指在定位[方面表现得像独立堆叠上下文](http://www.w3.org/TR/CSS21/zindex.html)但实际上参与其父堆叠上下文的事物。]

# java - 为什么布尔值总是给 null

> ID：16148017
> 
> 赞同：3
> 
> 时间：2013-04-22T13:13:14.493
> 
> 标签：java, oop, syntax, null, boolean

我写了以下代码

```
Boolean isit;

if(isit== true) {
    System.out.println("isit is true");
} else {
    System.out.println("isit is not false");
} 
```

但它总是 null ，但它应该给 false 为`default`..

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-22T13:13:50.217

当您将其声明为 a `Boolean`（注意大写字母）时，它是一个对象，因此`null`默认情况下。

我认为你的意思是让它成为一个`boolean`，而不是一个`Boolean`。

此外，`boolean`你可以这样做：

```
boolean isit;
if (isit) {
    System.out.println("isit is true");
} else {
    System.out.println("isit is false");
}
//prints "isit is false" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T13:18:27.323

与`boolean`具有两种状态的原语不同，即`true`和`false`，包装器`Boolean`具有额外的第三种状态`null`。当`Boolean`对象是`null`时，它既不是`true`也不是`false`。

当您将对象与 进行比较时`true`，该值将被包装为`Boolean`，并与 进行比较`null`。结果是`false`。但是，如果将其与 进行比较，也会发生同样的事情`false`：下面的代码不会打印任何内容。

```
Boolean isit = null;
if (isit == true) { // true gets converted to Boolean.TRUE
    System.out.println("isit is true")
}
if (isit == false) { // false gets converted to Boolean.FALSE
    System.out.println("isit is false")
} 
```

如果您的标志中需要三种状态（`true`、`false`和“未设置”），您应该使用`Boolean`; 如果您只需要两种状态 (`true`和`false`)，您应该保留原始数据类型`boolean`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-22T13:14:05.670

您正在使用包装类`object`，然后永远不要忘记将其初始化为一个`default`值。默认情况下，所有`wrapper class`对象都初始化为 null。

你必须像这样初始化

```
 Boolean B =  Boolean.TRUE;   
  Boolean B = true; 
```

或取一个原始值

```
 boolean isit;  ///default false 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-22T13:17:50.363

你的代码永远不会编译，它会给出一个错误，比如`The local variable isit may not have been initialized`.

`Boolean`是一个包装类，而不是原始数据类型。当您将变量初始化为

```
Boolean isit; 
```

并且不分配任何它永远不会编译的值。
但是，如果您使用原始类型布尔值，例如：

```
boolean isit; 
```

那么如果你什么都没分配，那么默认情况下该值将是假的。

```
boolean isit;

if(isit) {
    System.out.println("isit is true");
} else {
    System.out.println("isit is false");
} 
```

这将使 isit 值为 false。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T13:18:12.887

**因为...**

**输入 ：**

```
Boolean object;
boolean primitive;

System.out.println(object); 
System.out.println(primitive); 
```

**输出 ：**

```
null
false 
```

* * *

***   **`Boolean`**是一个对象。
    *   如果它没有被赋值，它的值将是`null`默认的。**

 **另一方面，

*   **`boolean`**是原始类型。
    *   如果它没有分配一些值，它的值将`false`默认为

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T13:33:56.510

好吧，在这种情况下，您必须将 isit-variable 值初始化为 true/false，否则编译器不会让您编译代码，因为您在 IF 中使用 isit-variable 而不给它一些值。在java中，一个变量必须在使用之前被初始化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T13:26:05.637

Boolean 是一个包装类对象。并作为 java 约定`object's default value is always null`。如果您使用带有 b 小写字母的布尔值，那么它被称为原语，并且它的值是您理解的`false`默认值。**

# android - MVC网站调用WCF更好还是MVC直接调用数据库操作更好

> ID：16148026
> 
> 赞同：3
> 
> 时间：2013-04-22T13:13:34.910
> 
> 标签：android, asp.net-mvc, wcf, dependency-injection

我们需要开发一个可以从桌面浏览器浏览的网站。我们还需要为同一个网站开发一个安卓应用程序。我们正在考虑使用 C#、Microsoft SQL Server 和 Windows Communication Foundation、Linq To Entity 和 Repository Framework 来使用 ASP.NET MVC。

WCF 将使用 Linq 使用 Repository Framework 访问数据库并返回 JSON。

**问题 1** Android 应用会调用 WCF 服务。我们的想法正确吗？

**问题2** ASP.NET MVC 网站会调用WCF 服务。让 ASP.NET MVC 应用程序调用 WCF 服务更好还是 ASP.NET 应用程序直接与数据库通信而中间没有 WCF 更好？

我的想法是仅将 WCF 用于 android 应用程序，并使 ASP.NET MVC 使用 linq 到实体框架直接与数据库交互，使用存储库模式，中间没有 WCF。这会是一个好方法吗？

**问题3** 如果ASP.NET MVC 网站会调用WCF 服务，我需要在哪里实现DI。我认为它必须在存储库框架和 WCF 服务之间，而 DI 在 ASP.NET MVC 和 WCF 之间没有任何关系。对？

这可能是一个简单的问题，但如果其他人有同样的要求，我想知道他们在做什么。像网站和安卓应用程序。我不熟悉 DI 以及如何使用它。我一直在阅读有关 DI 的信息，但不太了解。所以我想知道DI将存在于哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T16:40:35.020

1.  您的 Android 应用程序无法直接调用您的数据库，因此您需要介于两者之间的服务。这可以是 WCF 或另一个流行的选项是 ASP.NET Web API。
2.  您不应该让您的 MVC 应用程序通过 WCF 服务间接与数据库通信，除非确实需要这样做（例如因为安全或组织问题），因为这种额外的间接层会降低性能。与 WCF 进行通信有很多开销，这似乎并不一定。
3.  如果您决定让 MVC 应用程序调用 WCF 服务，则 MVC 和 WCF 应用程序都会获得自己的[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)。这意味着它们每个都有自己的 DI 配置和注入依赖项的方式。他们可能会分享很多东西，但这不是必须的。

我希望您可能会发现我的回答令人不安。您可能担心同时拥有一个与数据库通信的 WCF 服务和 MVC 应用程序的开发开销，而不是只有一个与数据库通信的 WCF 服务。

但这不一定是这样。事实上，这不应该是这样的。当你这样做时，你做错了。WCF 服务本身应该只是业务层之上的一个非常薄的层。您的 MVC 应用程序使用的同一业务层。事实上，当应用正确的抽象时，您可以在几分钟内将您的 MVC 应用程序从使用数据库切换到使用 WCF 服务。

您可以通过将业务操作置于通用抽象之后并使用基于消息的架构来做到这一点。在这种情况下，您的 WCF 服务（或 Web API）可以简单地排除这些消息并将它们转发到业务层。如果你这样做正确，你会发现你可以编写你的 WCF 服务或 Web API 服务，使它们变得免维护，这意味着：你不必在系统增长时更改它们；当新的业务操作被添加到系统中时。

我建议您阅读以下文章：

*   [同时......在我的架构的指挥方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)
*   [同时......在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)
*   [编写高度可维护的 WCF 服务](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)。

如果您在阅读了这些文章后对如何实现这一点有疑问，请查看[高度可维护的 Web 服务项目](https://solidservices.codeplex.com/)。这是一个参考架构应用程序，展示了如何使用 WCF 和 Web API 应用这些概念。

# javascript - 使用 jQuery 基于类过滤 div

> ID：16148027
> 
> 赞同：1
> 
> 时间：2013-04-22T13:13:41.040
> 
> 标签：javascript, jquery, css, filter

寻找有关如何编写函数以过滤掉具有某些类的某些 div 的一些帮助。

基本上我已经整理了一个[快速的电子商务示例](http://jsfiddle.net/Z9ZVk/)。有不同过滤器的列表，带有值。然后是产品。每个产品 div 都应用了许多类，例如“green”或“adult”或“wool”——这些是可过滤的参数。

对 JS 一点也不精通我正在尝试写一些东西，但正在寻找一些建议。这基本上是我所追求的：

1.  从显示所有开始
2.  如果用户选择 GREEN，则所有没有 GREEN 属性的项目都是`display:none`'d（带有淡入淡出的过渡
3.  代表 #2 检查任何属性

注意：可以勾选多个属性，当项目被取消勾选时，一切都需要重新出现。

有什么帮助吗？我想它基本上是将每个复选框的值链接到类。

不确定是否有更好的代码方式来做到这一点......数据属性可能吗？

[这里](http://www.haselden.co.uk/rttest/inner.html)的代码工作示例（显然没有 JS）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:25:30.207

更新了您的小提琴并添加了一些 jQuery 以隐藏类与所选复选框不匹配的 div。

演示：[小提琴](http://jsfiddle.net/Z9ZVk/1/)

JS 有点冗长，如果你愿意，可以进一步重构它：

```
$(document).ready(function() {
    var allSelectedClasses;
    allSelectedClasses = '';
    $('input[type="checkbox"]').click(function(){
        //ensure the correct classes are added to the running list
        if(this.checked){
            allSelectedClasses += '.' + $(this).val();
        }else{
            allSelectedClasses = allSelectedClasses.replace($(this).val(), '');
        }        
        //format the list of classes
        allSelectedClasses = allSelectedClasses.replace(' ', '');
        allSelectedClasses = allSelectedClasses.replace('..', '.');
        var selectedClasses;
        var allSelected;
        allSelected = '';

        //format these for the jquery selector
        selectedClasses = allSelectedClasses.split(".");
        for(var i=0;i < selectedClasses.length;i++){
            var item = selectedClasses[i];
            if(item.length > 0){
                if(allSelected.length == 0){
                    allSelected += '.' + item;
                }else{
                    allSelected += ', .' + item;
                }
            }
        }
        //show all divs by default
        $("div.prodGrid > div").show();
        //hide the necessary ones, include the 2 top level divs to prevent them hiding as well
        if(allSelected.length > 0){
            $("div.prodGrid > div:not(" + allSelected + ")").hide();
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:32:44.533

`Colors`我为您的ul添加了一个新课程。希望没关系。

这是过滤功能的粗略版本，它只考虑颜色，所以你必须自己修改它以考虑所有因素，但基本轮廓就在那里。

可以大规模重构！:)

由于您使用的是 jQuery：

```
$('ul.colorFilter li input[type="checkbox"]').click(function(){
    var checkedBoxes = $('ul.colorFilter li input[type="checkbox"]:checked');
    var listOfClasses = [];
    checkedBoxes.each(function(index, el){
        listOfClasses.push(el.value);
    });
    if(listOfClasses.length >= 1){
        $('div.prodGrid').children('div').hide();

        for(var i = 0; i < listOfClasses.length; i++){
            $('div.prodGrid > div.'+listOfClasses[i]).show();
        }
    } else {
        $('div.prodGrid > div').show();
    }
}); 
```

我也做了一个小提琴：

[http://jsfiddle.net/Z9ZVk/4/](http://jsfiddle.net/Z9ZVk/4/)

# javascript - jquery 不能在 IE、Chrome 中工作、在 FF 中工作

> ID：16148032
> 
> 赞同：1
> 
> 时间：2013-04-22T13:13:52.933
> 
> 标签：javascript, jquery

我对我的代码进行了最后一分钟的更改，并意识到 jQuery 在 IE 和 Chrome 中不起作用，但在 FF 中运行良好。我设法将一些现有的 jQuery 更改为 js，它在所有浏览器中都可以正常工作，但是，下面的 jQuery 无法在 IE 和 Chrome 中工作。

我希望我不需要将此代码更改为纯 JS，所以希望有一个解决方法，任何想法我做错了什么？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $('#address').change(function() {
        $('#mycheckboxdiv').toggle();
    });
    $('#name').click(function() {
        alert("well hello there.");
    });

    $('#school').keyup(function(e) {
        if (e.which == 9)                                    
            alert("great school");
    });
});
</script>
</head>

<body>
<form name="myform" method="post" action="myform.php" id="myform">
<table>
<tr>
  <td><b>Name:</b></td>
  <td><input name="name" id="name" value="" type="text" size="20" maxlength="20"/></td>
</tr>
<tr>
<td valign="top">
<input name="address" value="NO" type="checkbox">  NO<br>
<input name="address" id="address" value="YES" type="checkbox">  YES</td>
</tr>
<tr id="mycheckboxdiv" style="display:none">
<td colspan="2"></td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:50:24.830

大多数浏览器依赖于`type`，而不是`language`触发 JavaScript 解释器。所以如果你放`<script type="text/javascript"></script>`，你甚至不需要指定`language`。该`language`属性已被弃用一段时间。

看到[这个](https://stackoverflow.com/questions/2267476/html-script-tag-type-or-language-or-omit-both)问题。

把这个代替你目前拥有的：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

此外，对于该`HTTPS`问题，请使用以下内容：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

或者您可以`HTTPS`直接指定：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:58:27.867

我在重复 J. Ghyllebert 之前所说的，您的网站使用 https 吗？

请尝试下载最新的 js 文件并保存到本地并从您网站的本地地址引用它。

# kendo-ui - 将内容（如页面内的文本）包装起来？

> ID：16148033
> 
> 赞同：0
> 
> 时间：2013-04-22T13:13:54.810
> 
> 标签：kendo-ui, scrollview, kendo-mobile

我创建了一个带有一些页面的滚动视图。在第一页里面有这样的东西：

> 一个非常长的文本，不能出现在屏幕上，[...]

但是文本不适合整个屏幕，它看起来像这样：

![问题](https://i.imgur.com/vs7fXRF.png)

如果我禁用滚动视图：

![禁用滚动视图时没有问题](https://i.imgur.com/fRYwXCx.png)

您知道如何包装页面内容以适应屏幕吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:59:37.217

我找到了。

Kendo UI 在其 CSS（用于 Scrollview）中有：

```
white-space: nowrap; 
```

但是你不能改变它，因为它会破坏所有的滚动视图。您必须像这样更改您的 div 页面：

```
<div data-role="page" style="white-space : normal;">
    <p>SOME VERY LONG TEXT</p>
</div> 
```

为您想要包装的每一页制作这个（对于像 iPhone 这样的小屏幕非常有用）

# javascript - 带有小数和千位分隔符的数字的正则表达式

> ID：16148034
> 
> 赞同：20
> 
> 时间：2013-04-22T13:13:56.970
> 
> 标签：javascript, regex, decimal

我需要正则表达式来使用 javascript 验证可能包含千位分隔符或小数的数字。最大值为`9,999,999.99` 最小值`0.01` 其他有效值： `11,111` `11.1` `1,111.11`

无效值： `1111` `1111,11` `,111` `111,`

我没有快乐地到处寻找。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-22T13:24:18.850

```
/^\d{1,3}(,\d{3})*(\.\d+)?$/ 
```

关于最小值和最大值......好吧，我不会用正则表达式来做，但你可以在开头添加前瞻：

```
/^(?!0+\.00)(?=.{1,9}(\.|$))\d{1,3}(,\d{3})*(\.\d+)?$/ 
```

注意：这允许`0,999.00`，因此您可能需要将其更改为：

```
/^(?!0+\.00)(?=.{1,9}(\.|$))(?!0(?!\.))\d{1,3}(,\d{3})*(\.\d+)?$/ 
```

这将不允许前导 0。

**编辑：**
测试：http: [//jsfiddle.net/pKsYq/2/](http://jsfiddle.net/pKsYq/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-22T13:31:20.863

```
((\d){1,3})+([,][\d]{3})*([.](\d)*)? 
```

它适用于一些，但我仍在学习正则表达式。

逻辑应该是 1-3 位 0-1 次，1 个逗号后跟 3 位任意次数，以及单个 . 后跟任意位数 0-1 次

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-07T16:46:55.703

Tezra 的公式对于“1”无效。或“1.0”。出于我的目的，我允许前导零和尾随零，以及前导 + 或 - 号，如下所示：

```
^[-+]?((\d{1,3}(,\d{3})*)|(\d*))(\.|\.\d*)?$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-09T15:19:41.753

首先，我想指出，如果您拥有数据来源的表单，限制输入的最佳方法是使用正确的表单元素（又名数字字段）

```
<input type="number" name="size" min="0.01" max="9,999,999.99" step="0.01"> 
```

是否可以输入“，”将取决于浏览器，但浏览器始终会将值作为实际数字提供给您。（请记住，所有表单数据也必须在服务器端进行验证/清理。永远不要相信客户端）

* * *

其次，我想将其他答案扩展到更强大（独立于平台）/可修改的正则表达式。

*   您应该用 ^ 和 $ 将正则表达式括起来，以确保您匹配的是整个数字，而不仅仅是它的一个子集。前任`^<my_regex>$`
*   小数的右边是可选的，所以我们可以把它放在一个可选组中`(<regex>)?`
*   匹配文字句点，而不是任何数字链`\.\d+`
    *   如果你想坚持小数点后的最后一个数字不是0，你可以使用`[1-9]`“非零数字”，所以`\.\d+[1-9]`
*   对于小数的左侧，前导数字将非零，或者数字为零。所以`([1-9]<rest-of-number-regex>|0)`
*   第一组数字将是 1-3 位数字，所以`[1-9]\d{0,2}`
*   之后，我们必须在 3s 中添加数字，所以`(,\d{3})*`
    *   记住 ？表示可选，所以要使 , optional 只是`(,?\d{3})*`

把它们放在一起

```
^([1-9]\d{0,2}(,?\d{3})*|0)(\.\d+[1-9])?$ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-09T14:04:59.813

在最近的一个项目中，我们需要更改此版本以满足国际要求。这是我们使用的：`^-?(\d{1,3}(?<tt>\.|\,| ))((\d{3}\k<tt>)*(\d{3}(?!\k<tt>)[\.|\,]))?\d*$`

创建一个命名组`(?<tt>\.|\,| )`允许我们在`(?!\k<tt>)[\.|\,])`以后使用负前瞻来确保千位分隔符和小数点实际上是不同的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-24T06:05:49.897

我使用下面的正则表达式进行以下限制 -

```
^(?!0|\.00)[0-9]+(,\d{3})*(.[0-9]{0,2})$ 
```

1.  不允许 0 和 .00。
2.  ','（千位分隔符）后 3 位数。
3.  '。' （小数点到小数点后 2 位）。

# c# - 如何通过移动椭圆来更改画布中两个矩形的大小？

> ID：16148035
> 
> 赞同：2
> 
> 时间：2013-04-22T13:13:57.223
> 
> 标签：c#, wpf

我有一个画布，里面有两个矩形，并排。我想在它们相交的地方有一个椭圆，我可以水平拖动它并让矩形改变大小以始终在这个可移动的椭圆下相遇，就像一个滑块，但有形状。我读过这个

[http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1](http://www.codeproject.com/Articles/22952/WPF-Diagram-Designer-Part-1)，截图如下： ![在此处输入图像描述](https://i.stack.imgur.com/qDmQ1.png)

到目前为止，我有一个可点击的移动椭圆和它下面的两个矩形。如何将椭圆的不断变化的水平位置传递给两个矩形，以便它们可以调整大小？

任何帮助表示赞赏，C# 对我来说就像魔术一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:21:06.653

不确定您是否想要获取椭圆的位置，如果是，请尝试以下代码段

```
var left=Canvas.GetLeft(ellipse1);
var top=Canvas.GetTop(ellipse1); 
```

要设置其位置和大小：

```
Canvas.SetLeft(ellipse1, left+100);
ellipse1.ActualWidth= ...; 
```

# javascript - 我可以替换像 removeChild 这样的标准 DOM 函数吗？

> ID：16148042
> 
> 赞同：2
> 
> 时间：2013-04-22T13:14:10.573
> 
> 标签：javascript

我可以替换像 removeChild 这样的标准 DOM 函数以在从父节点删除某些节点之前显示例如警报吗？类似的东西，但我的例子有错误

```
var original = node.removeChild;
node.removeChild = function(node, original){
    alert('message');
    original(node);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:23:07.933

如果您想在整个文档中应用它，请执行此操作

```
var original = Node.prototype.removeChild;
Node.prototype.removeChild = function(node) {
    //custom logic
    original.apply(this, arguments);
} 
```

如果您只想将更改应用于选定节点，则

```
var original = node.removeChild;
node.removeChild = function(node){
    //custom logic
    original.apply(this, arguments);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:31:38.290

首先，`new`关键字的使用是完全错误的。这将严重改变行为。`function`是 的一个实例`Function`，它是所有 JavaScript 函数的“母舰”。

使用`new`关键字时，该函数将立即执行，其行为与您所期望的非常不同。有关如何创建函数对象的更多详细信息，请参阅**ECMA 语言规范**的**第 13 节。**[在此处](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)阅读，第 98 页。

 **其次，强烈建议不要更改任何原生对象`prototype`。它导致了人类历史上最乏味和最痛苦的错误。任何在你之后编辑代码的人都会花很长时间才能弄清楚警报的来源。

将这两个动作分开，它们完全不相关。将它们包装在一个`prototype`函数中是非常糟糕的设计，因为上述原因还有很多，例如：

1.  使用`for in`循环。如果您忘记使用 ，您将遍历更多应该使用的属性`hasOwnProperty`。
2.  您自己和其他开发人员将很难弄清楚为什么随机的事情会随着基本的 DOM 节点删除操作而发生。（您会忘记，每个人都会发生）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:02:26.410

我将变得激进，只是说不。虽然它在技术上可以在您关心的浏览器上运行并且是prototype.js 的基础，但您永远不应该像这样修改DOM 对象或其原​​型。

关于该主题有一篇很长的帖子：http: [//perfectionkills.com/whats-wrong-with-extending-the-dom/](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)但 TL;DR 是这些是“托管对象”并且不能保证对其行为进行修改. 它今天可能在浏览器 x 上工作，但不能保证明天浏览器 y 甚至 x 。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T13:15:44.880

您的实现看起来不错，只是您不需要在`original`那里作为参数传递。

```
var original = node.removeChild;
node.removeChild = function(node) {
    alert('message');
    original(node);
} 
```**

# android - 孩子的父母上的 removeView()

> ID：16148045
> 
> 赞同：0
> 
> 时间：2013-04-22T13:14:13.317
> 
> 标签：android, android-layout, layout, user-interface

我越来越

```
E/AndroidRuntime(855): Caused by: java.lang.IllegalStateException: 
The specified child already has a parent. You must call removeView() 
on the child's parent first. 
```

我正在运行的代码，错误发生在 linearLayout.addView(view);

```
view = getFieldControl(field);
linearLayout.addView(view); 
```

getFieldControl 看起来像这样（简化）：

```
private android.view.View getFieldControl(ControlTemplate control)
{
    View view =null;    
    view = (EditText)findViewById(R.id.edit_message);
    ((EditText) view).setHint(control.getName());
    ((EditText) view).setText(control.getValue()); 

return view;
} 
```

我不明白父级的视图可能是什么，我应该从哪里删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:16:05.560

如果您多次调用 getFieldControl(field) 方法，您将尝试从 XML 获取 R.id.edit_message 的 EditText 并将其多次添加到布局中。因此它给出了这个错误。确保只将此 EditText 添加到任何布局中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:22:06.427

以编程方式创建您的 EditText，如下所示

```
private android.widget.EditText getFieldControl(ControlTemplate control)
{
    EditText edittext = new EditText(this);
    edittext.setHint(control.getName());
    edittext.setText(control.getValue()); 
    return edittext;
} 
```

**注意：**如果`EditText`是在设置为内容视图的 XML 中，则通过删除该行来修改以下代码，`linearLayout.addView(view);`因为已经`EditText`通过 XML 在布局中添加了。

```
EditText edittext = (EditText) findViewById(R.id.edit_message);;
getFieldControl(edittext, field);

private void getFieldControl(EditText edittext, ControlTemplate control)
{
    edittext.setHint(control.getName());
    edittext.setText(control.getValue()); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:17:41.887

你`EditText` `R.id.edit_message`必须在一个`.xml`文件中，或者说`layout`，那`layout`是`EditText`.

`EditText`而是创建一个动态。

# google-maps - 更新信息框内的内容

> ID：16148046
> 
> 赞同：1
> 
> 时间：2013-04-22T13:14:15.437
> 
> 标签：google-maps, google-maps-api-3, infobox

我为每个标记使用一个信息框，因为我只希望一次出现一个信息框。

我的问题是：如何在不创建全新信息框的情况下更新信息框的内容？

我不想通过创建一个新的 infoBox 来更新内容，因为这样做会创建一个新的 infoBox 实例，这意味着任何时候都可以打开多个 infoBox。

是否有任何可用的 setContent 方法或某种强制 infoBox 更新内容集的重绘方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:20:21.057

这对我有用：

```
that.infobox.setContent(content); 
```

# javascript - 如何解决 HTML5 全屏模式下画布上鼠标指针的偏移问题？

> ID：16148047
> 
> 赞同：3
> 
> 时间：2013-04-22T13:14:17.990
> 
> 标签：javascript, html, canvas, fullscreen, fabricjs

我正在使用 HTML5 full_screen API[将此字母](https://bubbleideas.com/letters/html5-full_screen-api)放大到浏览器的全屏模式。

按照[https://bubbleideas.com/letters/html5-full_screen-api](https://bubbleideas.com/letters/html5-full_screen-api)进行演示和重现步骤。

浏览器返回鼠标指针位置的 (x,y) 值的方式似乎存在问题/错误。在全屏模式下，当您向下滚动时，鼠标指针和潦草的路径之间会引入一个偏移量。

以下是重现该问题的步骤。（转到上面的演示链接）

1.  单击此页面右上角的按钮。

2.  点击右下角的“手绘”绘图工具。它将打开一个文具面板（选择钢笔或铅笔工具）

3.  在绘图区域涂鸦几次

4.  现在向下滚动一点，尝试用同一支笔涂鸦。您会注意到鼠标指针位置和潦草路径之间存在间隙/偏移（这是问题所在）。理想情况下，全屏模式也应该没有间隙

以前有人来过这里吗？另请注意，这对于正方形、圆形和三角形等其他形状非常有效，没有任何偏移。

更新：（正如下面评论中的“Iftah”所问）根据织物 js，我使用 calcOffset() 重新计算每次鼠标按下时的偏移量。就其他功能而言，我们会做类似的事情。希望这能提供一些想法

```
$("#rectangle-function").click(function (evt1) {
doCanvasUp();
initObjectDrawing();
//canvas.isDrawingMode = true;
canvas1 = document.createElement("canvas");
canvas1.height = canvas.height;
canvas1.width = canvas.width;
canvas1.id = "dummy-canvas";
canvas1.style.zIndex = 998;
canvas1.style.position = "absolute";
$(".page-body").prepend(canvas1);
$("#dummy-canvas").mousedown(function (evt) {
    var context1 = canvas1.getContext("2d");
    var offset = $("#dummy-canvas").offset();
    startX = evt.pageX - offset.left;
    startY = evt.pageY - offset.top;
    context1.beginPath();
    $("#dummy-canvas").mousemove(function (event) {
        context1.clearRect(0, 0, canvas1.width, canvas1.height);
        context1.strokeStyle = "#ff0000";
        context1.lineWidth = 1;
        context1.moveTo(startX, startY);
        var offset1 = $("#dummy-canvas").offset();
        var x = event.pageX - offset1.left;
        var y = event.pageY - offset1.top;
        var diffX = x - startX;
        var diffY = y - startY;
        context1.strokeRect(startX, startY, diffX, diffY);
        context1.closePath();
        context1.beginPath();
    }).mouseup(function (eventf) {
        $("#dummy-canvas").unbind('mousemove');
        $("#dummy-canvas").unbind('mouseup');
        var offset = $("#dummy-canvas").offset();
        //$("#dummy-canvas").remove();
        context1.clearRect(0, 0, canvas1.width, canvas1.height);
        var endX = eventf.pageX - offset.left;
        var endY = eventf.pageY - offset.top;
        var diffX = endX - startX;
        var diffY = endY - startY;
        var rect = new fabric.Rect({
            left: startX + diffX * 0.5,
            top: startY + diffY * 0.5,
            width: diffX,
            height: diffY,
            opacity: 1,
            fill: null,
            stroke: color
        });
        canvas.add(rect);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:39:09.340

如果不查看您的代码，就无法准确判断错误在哪里......

一个问题可能是在读取鼠标坐标时，IE。您可能错误地使用 event.pageY 而不是 event.clientY 或类似的混淆（请参阅[ScreenX/Y、clientX/Y 和 pageX/Y 之间的区别是什么？](https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y)）

或者你可以说问题是你如何使用这些坐标，即。如果您在屏幕空间中获取鼠标事件坐标，那么在将其应用到画布之前，您需要减去画布元素屏幕偏移量并添加滚动偏移量......

由于您有一个有效的工具和一个无效的工具，因此您可以比较它们并查看它们的不同之处。

# jquery - 获取变量并将内容与它相关联

> ID：16148051
> 
> 赞同：-4
> 
> 时间：2013-04-22T13:14:25.717
> 
> 标签：jquery, variables

我有这些变量：

```
var menuItem_place = 0;
var menuItem_position = 0;
var menuItem_limit = parseInt($('.slideshowImage').length) - 1; 
```

它们是我拥有的幻灯片的关键变量。我需要将 css 属性和一些动画元素与变量关联起来`menuItem_place`。

例如：

```
if(slideshowItem_place = 0){
  $(this).({'background-color':'black'}, 150);
} 
```

我已经尝试了一堆 if/else 但它不起作用。完整的上下文[-FIDDLE](http://jsfiddle.net/p6Uxd/4/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T19:40:03.033

不幸的是，不可能将回调附加到变量。回调仅适用于以不可预测的方式发生的事情——通常是用户输入。使用变量，您始终可以跟踪代码使用它的那些地方。

您真正要寻找的是更改这些变量的常见位置 - 实际上是菜单项动画的位置。如果您查看`click`事件的每个回调，您会注意到它们`menu_animateClick();`最后都会调用 - 这可能是您想要进行任何更改的地方。

第一行将所有菜单项重置为原始大小：

```
contents.animate({margin: 20, height: '64%', lineHeight: '63px'}, 300); 
```

第二行放大了选定的菜单项：

```
$(contents.get(menuItem_place)).stop().animate({margin: 0, height: '100%', lineHeight: '99px'}, 100); 
```

第三行计算出菜单必须移动多少像素：

```
menuItem_position = 0 - (menuItem_place * 200); 
```

最后一行实际上将菜单移动到选定的菜单项：

```
$('#menuContainer').stop().animate({left: menuItem_position + 'px'}, 300); 
```

在该函数中，它使用片段`$(contents.get(menuItem_place))`来获取当前菜单项的内容，并简单`contents`地检索*所有*菜单项的内容。要将选定的菜单项设置为黑色，您可以尝试以下操作：

```
$(contents.get(menuItem_place)).stop().css('background-color', 'black').show(100); 
```

尽管将其恢复为原始颜色是您仍然需要弄清楚的事情！

# css - 停止将 CSS 'a' 样式应用于链接的图像

> ID：16148053
> 
> 赞同：3
> 
> 时间：2013-04-22T13:14:32.857
> 
> 标签：css, image, hover

我被指示让网站上的链接具有与字体颜色不同的颜色下划线。这一切看起来都很简单，使用`border-bottom`如下，除了链接的图像现在也加了下划线。

有没有办法在不使用 JS 的情况下停止发生？

```
a{
    color: #6A737B;
    text-decoration: none;
}
a:hover{
    border-bottom: 1px solid #C60B46;
    text-decoration: none;
} 
```

一个例子 - 现在将鼠标悬停在下面的图像上会添加`border-bottom`CSS 样式，这是我不想要的 -

```
<a title="Dyne Drewett" href="http://test.dynedrewett.com">
    <img class="attachment-full" width="202" height="78" alt="Dyne Drewett Solicitors" src="http://test.example.com/Website-Header.png">
</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:37:16.040

执行此操作的唯一静态方法是使用`class`图像链接，例如：

```
<a href='http://whatever.url.here/' class='imglink'>
    <img src='img/image.png' alt='Alt text'>
</a> 
```

然后将 CSS 样式应用于此类：

```
a.imglink:hover {
    border-bottom: 0px solid;
} 
```

您必须在其他`a:hover`CSS 类之后声明它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:50:01.730

从技术上讲，您不能根据元素包含的元素来设置元素的样式。您不能使元素的边框`a`取决于`img`内部元素的存在（这就是您要处理的内容）。使用类会有所帮助，但从评论来看，这似乎是不可能的。

有一个解决方法：将每个图像放在包含元素的底部（不是默认情况下的基线），并将其向下移动一个像素，或者边框宽度可能是什么。这样，图像将覆盖底部边框，前提是图像没有透明度。CSS 代码：

```
a img {
    vertical-align: bottom;
    position: relative;
    top: 1px;
} 
```

这会稍微改变所有图像的位置，因此除非您采取预防措施，否则它可能会影响整体布局。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:33:37.290

您的解决方案将要求您向包装图像的链接（或应删除边框的任何内容）添加额外的类名。除非您想使用 JavaScript 技术，否则没有办法进行“反向选择”。

jQuery 技术是这样的：

```
$('a > img').parent().css('border-bottom', 'none'); 
```

这将从所有将图像作为直接后代的锚标记中删除“边框底部”样式。但是每个页面都需要它，并且每个页面都被这个脚本解析，所以每个页面都会增加一点开销。

否则，如果您有权访问 HTML，请创建一个 CSS 类来定位这些特定链接，例如：

```
a.img-link{ border-bottom:none; } 
```

并将其应用于图像周围的任何链接，例如：

```
<a href="#" class="img-link"><img src="#" alt="" /></a> 
```

我希望这会有所帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:18:26.237

我建议在链接中添加一个类，这样你就可以做到

```
a.imglink:hover{
  border:0;
} 
```

或者，如果您无法控制该类，您可以尝试为图像添加负边距以确保不显示边框：

```
a img{
    margin:0 0 -1px 0;
} 
```

-1px 可能需要根据您的其他规则进行调整

这是一个显示负边距解决方案的小提琴：http: [//jsfiddle.net/QRXGe/](http://jsfiddle.net/QRXGe/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T13:40:27.880

实现这一点的另一种方法是简单地制作链接中的图像`relative`，然后偏移底部以覆盖边框。5px 似乎可以做到[http://jsfiddle.net/ECuwD/](http://jsfiddle.net/ECuwD/)

```
a{
    color: #6A737B;
    text-decoration: none;
}
a:hover{
    border-bottom: 1px solid #C60B46;
    text-decoration: none;
}

a img {
    position:relative;
    bottom: -5px;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T13:16:17.793

```
a:hover img {
border-bottom:none;
} 
```

也许...

```
a:hover img.attachment-full {
  border-bottom:none;

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-22T13:33:54.770

显然，您想要的是`<a>`基于其内容的相同标记 ( ) 的不同行为。

**遗憾的是，纯 CSS**没有*真正的*方法可以做到这一点，因为这种语言**不是编程语言**，因此缺乏条件结构，例如.****`if`****

 ****这并不意味着没有解决方案！以下是您可以做的几件事：

1.  在您的 HTML 中声明（例如）元素 ( `<a>`) 应以不同方式处理（使用类，在您的情况下为`<a class="text">`或`<a class='image'>`.

2.  *使用 JavaScript动态*改变你的风格，这意味着基于条件，例如内容。在您的情况下，它可能类似于：

    ```
    function onLoad() {
        for (var element in document.body) {
            // look for links
            // if this is a link:
                // look for image inside link
                // if there is one:
                    // remove the border
        }
    } 
    ```****

# background - Infragistics State Button Checked 不显示边框

> ID：16148057
> 
> 赞同：0
> 
> 时间：2013-04-22T13:14:45.390
> 
> 标签：background, onclick, border, infragistics

这是我的问题。我的工具栏管理器中有一些状态按钮工具。当我设置 Checked = True 时，我没有看到该按钮被选中。其实我看到了，但像往常一样没有边界。相反，我可以在状态按钮工具中看到浅蓝色背景。您能否回答为什么会发生这种情况以及如何更改我的代码以像往常一样查看状态按钮检查状态（带有边框和通常的背景）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:40:12.870

我能够重现您将`BorderAlpha`属性设置为`Transparent`.
重置为默认值会重新启用工具周围的边框。

该属性存在于按钮的每个外观设置中，但我使用的是`PressedAppearance`工具的属性（大或小取决于您的自定义）

# mongodb - 如何在 GridFS mongodb 中决定/建议分片键

> ID：16148060
> 
> 赞同：1
> 
> 时间：2013-04-22T13:15:01.337
> 
> 标签：mongodb

我有以下文件收集的文档结构

```
{ 
    "_id" : ObjectId("51417514e4b06c14ef682854"), 
    "chunkSize" : NumberLong(262144), 
    "length" : NumberLong(1532), 
    "md5" : "067882a724de349d310e9a3a92e04617", 
    "filename" : "1363244267550media481B49589E924622B00E7846BCE3EEC7.tomcat1",
    "contentType" : "image/jpeg", 
    "uploadDate" : ISODate("2013-03-14T06:58:28.479Z"), 
    "aliases" : null, 
    "metadata" : {
        "name" : "1363244267550media481B49589E924622B00E7846BCE3EEC7.tomcat1",
        "customerId" : NumberLong(202), 
        "siteId" : NumberLong(103780),
        "userId" : NumberLong(102) 
    } 
} 
```

对于 Chunks 集合，我使用“files_id”插入文件相关数据

任何人都可以建议我在 gridFS 中启用分片的分片键是什么。有适当的描述

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:57:02.937

在这样的 gridfs 环境中，您有两种选择。是否分片文件块。对块进行分片会导致具有至少一个文件块的所有分片忙碌。这不好。因此，您必须将所有块保存在一个分片上。这基本上是通过使用块集合的**“files_id”作为分片键来完成的。**

# jquery - 带有 jQ uery 2.0.0 的 MIME 类型

> ID：16148062
> 
> 赞同：0
> 
> 时间：2013-04-22T13:15:02.297
> 
> 标签：jquery, xml, internet-explorer, mime

我有以下代码来解决 IE 本地访问 XML 问题：

```
 $.ajax({
        type: "GET",
        url: options.xmlUrl,
        dataType: ($.browser.msie) ? "text" : "xml",
        success: function(data) {wrapTree(data);},
        error:function(){alert(options.loadingError);}
    }); 
```

由于 $.browser，它不适用于 jQuery 2.0.0。[http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)上的建议不再有效。任何人都知道它应该如何适应与 jQuery 当前版本一起运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:06:07.617

只需`dataType: "text"`用于所有情况，然后`data = $.parseXML(data)`在成功处理程序中将其转换为所有浏览器上的 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:48:12.503

自 v1.9 以来，该`$.browser`功能已从 jQuery 中删除，并且早在 v1.3 之前就已弃用且不推荐使用。他们建议对大多数用例进行特征检测，而不是浏览器检测。

考虑到该功能是多久以前`$.browser`被弃用的，如果一个 jQuery 页面推荐使用它，那么该页面可能也很旧——事实上，新版本的 jQuery 很可能根本不需要这个 hack。您是否尝试过完全忽略它？

如果你*真的*需要它，你可以使用[jQuery 迁移库](https://github.com/jquery/jquery-migrate/#readme)，它恢复了从 v1.9 开始删除的所有过时的特性，包括`$.browser`.

但是，如果可能的话，我建议尝试找到不涉及此功能的解决方案，因为 Migrate 库旨在解决短期升级问题，而不是长期解决方案；jQuery 在未来的版本中可能不支持它。

我还要说，既然你使用的是 jQuery 2.0，你应该注意这个版本不再支持 IE v6、7 和 8。如果你需要支持旧的 IE 版本，你需要坚持使用 jQuery 1.x . 更重要的是，如果您坚持使用 v2.0，那么您只支持 IE v9 及更高版本。我不知道这个具体问题，但它可能只是旧 IE 版本中的一个问题，所以你甚至可能根本不需要这个 hack。这将是值得检查的。

希望有帮助。

# width - 决定宽度的因素是什么 与 {display:inline-block;}？

> ID：16148067
> 
> 赞同：1
> 
> 时间：2013-04-22T13:15:11.223
> 
> 标签：width, html-lists, css

我有一个`<ol>`要应用背景颜色的元素。我不希望背景颜色覆盖`<ol>`父级的整个宽度，而只是覆盖它的内容+一些填充。

设置基本上可以解决问题`{display:inline-block;}`，`<ol>`但不知何故谷歌浏览器决定`<ol>`' 的宽度应该是**462px**。这导致第三个`<li>`突破了两条既不需要也不需要的物理线。

![在此处输入图像描述](https://i.stack.imgur.com/XGtzF.png)

**462px**是从哪里来的？如何将第三个保留在`<li>`一行？我不想将`<ol>`' 宽度设置为静态值，因为我有很多这样`<ol>`的 s。使用`{float:left;}`而不是`{display:inline-block}`触发类似的行为，但也迫使我清除`<ol>`. 给出`<ol>`a `width`of`auto`似乎并没有改变任何事情（我怀疑它已经是 了`auto`）。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:36:32.020

尝试将 white-space: nowrap 放在 li 元素上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:39:35.177

尝试使用此 css 代码重置您的 html 项目：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    background: transparent;
    border: 0;
    margin: 0;
    padding: 0;
    vertical-align: baseline;
}
body {
    line-height: 1;
}
h1, h2, h3, h4, h5, h6 {
    clear: both;
    font-weight: normal;
}
ol, ul {
    list-style: none;
}
blockquote {
    quotes: none;
}
blockquote:before, blockquote:after {
    content: '';
    content: none;
}
del {
    text-decoration: line-through;
}
/* tables still need 'cellspacing="0"' in the markup */
table {
    border-collapse: collapse;
    border-spacing: 0;
}
a img {
    border: none;
} 
```

否则，您可以像这样覆盖此值：

CSS：

```
ol,li {
width: 100% !important;
} 
```

# ffmpeg - 如何缩放和定位水印以缩放？

> ID：16148068
> 
> 赞同：3
> 
> 时间：2013-04-22T13:15:12.860
> 
> 标签：ffmpeg, overlay, scale, scaling, watermark

我正在缩放视频并应用水印，如下所示：

```
ffmpeg -ss 0:0:0.000 -i video.mp4 -y -an -t 0:0:10.000
 -vf \"[in]scale=400:316[middle]\" -b:v 2000k -r 20
 -vf 'movie=watermark.png,pad=400:316:0:0:0x00000000 [watermark];[middle] [watermark]overlay=0:0[out]'
 out.flv 
```

然而，应用的水印似乎被缩放到原始视频大小，而不是更小的缩放视频大小。

此命令行在 ffmpeg 版本上工作`0.8.6.git`，现在在升级到 version 后表现不同`N-52381-g2288c77`。

我怎样才能让它再次工作？

* * *

**2013-04-26 更新：**
我现在尝试使用覆盖过滤器的 X 和 Y 参数而不是填充，但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-26T11:38:10.787

FFmpeg IRC 上的*ubitux*回答：

在单个链中使用`scale`和，如下所示：`overlay``-filter_complex`

```
ffmpeg -y -ss 0 -t 0:0:30.0 -i 'video.mp4' -i '/watermark.png'
 -filter_complex "[0:0] scale=400:225 [wm]; [wm][1:0] overlay=305:0 [out]"
 -map "[out]" -b:v 896k -r 20 -an 
 'out.flv' 
```

`-i`还通过而不是`movie`过滤器加载水印。

# svn - 在进行 svn 合并时忽略 svn:"property"

> ID：16148069
> 
> 赞同：0
> 
> 时间：2013-04-22T13:15:16.327
> 
> 标签：svn, tortoisesvn

我的主干项目中有一个 svn:external 属性。从那个树干我有一个分支出来，它有一个 svn:external 到不同的路径。分支是恒定的。这意味着我不想关闭它，因为我一直在努力。

在分支中进行更改后，我想将它们合并回主干。问题是，我想要除了 svn:external 属性之外的所有更改。

当我尝试合并时，我没有遇到冲突，因为 svn 太聪明了并且确实更新了属性。如果我有冲突，我总是可以使用我的。

我考虑过使用 svn 挂钩来恢复该特定更改，但我想将其用作最后的手段。

还有其他想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T21:20:20.157

`--record-only`在更改分支后使用该选项`svn:externals`将修订标记为已合并而不实际合并它。

```
# changing svn:externals on branch
svn propedit svn:externals branches/foo/externals
svn commit

# mark commit as already merged 
svn merge -c rev --record-only branches/foo trunk
svn commit 
```

# android - 将原生 Android 转换为 HTML5

> ID：16148072
> 
> 赞同：4
> 
> 时间：2013-04-22T13:15:19.507
> 
> 标签：android, html, cross-platform

我有一个包含 20 多个活动的大型 Android 应用程序。现在我必须让它跨平台，另外支持 iOS、Blackberry 和 Windows。该应用程序在所有平台上应该看起来都一样，并且 GUI 只开发了一次。

是否可以自动将 Android XML 布局转换为 HTML+CSS ？什么 IDE 适合使用 PhoneGapp / Cordova、HTML、CSS、Javascript？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:22:34.293

没有 Hello_World，您不能将 Android XML 直接转换为 HTML/CSS。您需要单独编码所有内容。您可以借助 DREAMWEAVER 的 HTML 和 CSS。

对于 java 脚本，您可以使用 WEB STORM IDE-（好吧，我没有使用过这个......，但发现并阅读了它有用）。

对于电话间隙 Eclipse-很好。但是你不会得到任何关于 java 脚本编码的提示。这就是我建议使用 WEB STORM IDE 的原因，因为它会浪费你的时间来找出小错误..比如不关闭标签，额外的撇号......等等......等等......

# r - 当 nrow=1 时改变 grid.arrange 产生的行的高度

> ID：16148076
> 
> 赞同：8
> 
> 时间：2013-04-22T13:15:23.533
> 
> 标签：r, ggplot2

抱歉，如果这个问题已经得到解答，但我似乎找不到我需要的东西。

我在 ggplot2 中生成了两个图，我使用 grid.arrange 将它们组合到同一个网格中，如下所示：

```
grid.arrange(p1,p2,main="Title", ncol=2) 
```

这给了我并排的情节，如下所示：

![并排的情节](https://i.stack.imgur.com/rUPBb.png)

（对不起，我不明白如何让这个在帖子中显示我的图像，如果你们有人可以帮助我，那就太好了！我不想通过使用链接来惹恼人们。）

如何更改此代码以使图形仍然并排但它们不会拉长对象的整个长度？我希望它们是方形的。

我知道我可以添加一个参数“高度”，但不确定这是否是我需要的，并且在这种情况下没有看到任何应用它的东西。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:35:08.487

您还可以使用grid.arrange的`heights`and参数指定相对高度和宽度，如下所示：`widths`

```
grid.arrange(p1 , p2 , widths = unit(0.5, "npc") , heights=unit(0.5, "npc") , main="Title", ncol=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/KPJQs.jpg)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T13:35:15.547

当您使用 ggplot2 绘制绘图时，一种方法是使用`coord_fixed()`获取二次图然后排列它们。您可以通过将值范围除以值范围来计算`coord_fixed()`where来实现此目的。`ratio=``y``x`

```
ratio.plot1<-abs(max(iris$Petal.Width)-min(iris$Petal.Width))/abs(max(iris$Petal.Length)-min(iris$Petal.Length))

ratio.plot2<-abs(max(iris$Sepal.Width)-min(iris$Sepal.Width))/abs(max(iris$Sepal.Length)-min(iris$Sepal.Length))

p1<-ggplot(iris,aes(Petal.Width,Petal.Length))+geom_point()+
  coord_fixed(ratio=ratio.plot1)
p2<-ggplot(iris,aes(Sepal.Width,Sepal.Length))+geom_point()+
  coord_fixed(ratio=ratio.plot2)
grid.arrange(p1,p2,main="Title",ncol=2) 
```

![在此处输入图像描述](https://i.stack.imgur.com/F9Cuh.png)

# javascript - For循环添加未定义的条目

> ID：16148079
> 
> 赞同：1
> 
> 时间：2013-04-22T13:15:27.773
> 
> 标签：javascript

我正在使用几个 for 循环来创建一个数组。问题是，在第二遍它添加了 4 个未定义的变量，我看不到它们来自哪里。

注意： if 语句是正确的，只有在它们匹配时才会被触发。

编码 ：

```
for (var x = 0; x < galleryObject[1].length; x++) {
    gallerys[x]= [];    

    for (var i = 0; i < galleryObject[2].length; i++) {

        if (galleryObject[2][i].galId === galleryObject[1][x].id) {

            gallerys[x][i] = {};
            gallerys[x][i].filename=galleryObject[2][i].fileName
            gallerys[x][i].caption =galleryObject[2][i].caption

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:25:38.320

显然，这里的问题在于有时您的 IF 语句返回错误。在这种情况下，它会尝试向数组添加一个元素，但未指定一些先前的索引，因此它会用“未定义”填充它们。

尝试将 IF 语句中的代码更改为：

```
 if (galleryObject[2][i].galId === galleryObject[1][x].id) {
        gallerys.push({
                          filename:galleryObject[2][i].fileName,
                          caption :galleryObject[2][i].caption
                      });
    } 
```

# node.js - nodejs mysql如何读取配置参数

> ID：16148084
> 
> 赞同：0
> 
> 时间：2013-04-22T13:15:41.497
> 
> 标签：node.js, node-mysql

```
var iniparser = require('iniparser');
var config = iniparser.parseSync('../Config/init/db.ini');
var env = process.env.NODE_ENV || 'dev'; //startup nodejs with e.g:  NODE_ENV= node server.js

var app                 = require('http').createServer(handler),
io                  = require('socket.io').listen(app),
fs                  = require('fs'),
mysql               = require('mysql'),
connectionsArray    = [],
connection          = mysql.createConnection({
    host        : config[env]['host'],
    user        : config[env]['user'],
    password    : config[env]['pwd'],
    database    : config[env]['dbname']
}),
POLLING_INTERVAL = 3000,
pollingTimer;    

console.log(config[env]['host']);
console.log(config[env]['user']);
console.log(config[env]['pwd']);
console.log(config[env]['dbname']);

// If there is an error connecting to the database
connection.connect(function(err) {
  // connected! (unless `err` is set)
  console.log( err );
}); 
```

数据库.ini

```
 [dev]
 host = "localhost"
 user = "root"
 pwd =  "root"
 dbname = "db_local" 
```

console.log 的输出：

```
"localhost"
"root"
"root"
"tittilate_local" 
```

这是我的 nodejs 脚本的顶部。console.log 输出正常，但未建立连接。不知何故，在 createConnection 中无法识别配置变量。

有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:49:54.890

INI 文件值不应由引号分隔，否则这些引号将成为值的一部分。

所以在你的情况下，试试这个：

```
[dev]
host   = localhost
user   = root
pwd    = root
dbname = db_local 
```

# angularjs - 多个指令 [directive#1，directive#2] 要求隔离范围

> ID：16148086
> 
> 赞同：26
> 
> 时间：2013-04-22T13:15:42.510
> 
> 标签：angularjs, angularjs-directive

我正在尝试在已经存在的指令之上构建一个新指令，但我的进程停止了。加载页面时，我遇到以下错误：

> 多个指令 [directive#1，directive#2] 要求隔离范围`<easymodal title="Test-Title" text="Text-Text" oncancel="show = false" onok="alert();">`

基本指令如下所示：

```
Rohan.directive('easymodal', function () {
    return {
        restrict: 'E',
//      priority: 200,
        transclude: true,
        replace: true,
        scope:{
            showModal: "=show",
            callback: "=closeFunction",
            dismissable: '&'
        },
        template:
            '<div data-ng-show="showModal" class="modal-container">' +
                '<div class="modal-body">' +
                    '<div class="title"><span data-translate></span><a data-ng-show="dismissable" data-ng-click="dismiss()">x</a></div>' +
                    '<div data-ng-transclude></div>' +
                '</div>' +
                '<div class="modal-backdrop" data-ng-click="dismiss()"></div>' +
            '</div>'
    };
}); 
```

我的包装器指令如下所示：

```
Rohan.directive('easydialog', function () {
    return {
        restrict: 'E',
        transclude: true,
        scope: {title: '@',
            text: '@',
            onOk: '&',
            onCancel: '&'},
        replace: true,
        template:
            '<easymodal>' +
                '{{text}} ' +
                '<hr>' +
                '<button ng-click="{{onCancel}}" value="Cancel"' +
                '<button ng-click="{{onOk}}" value="Ok"' +
            '</easymodal>'
    };
}); 
```

我的 html 看起来像这样：

```
<easydialog title="Test-Title" text="Text-Text" onCancel="show = false" onOk="alert();" /> 
```

起初我虽然我的标题属性是冲突的，所以我在 html 行和我的包装器指令中删除了该属性，但它无效。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T13:28:58.073

您需要更改`easydialog`模板并`<easymodal>`用`<div>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T22:21:16.047

您的问题只是您在实际 HTML 模板中添加了一个`template`参数`directive`以及添加了一个解析模板标记。`<easydialog>`您可以选择其中一个或另一个。

# android - 如何使用 PendingIntent.activity() 或 PendingIntent.getBroadcast 使用 AlarmManager？

> ID：16148090
> 
> 赞同：0
> 
> 时间：2013-04-22T13:15:52.733
> 
> 标签：android, synchronization, alarmmanager

我阅读了很多教程，但没有解决方案。我想使用 AlarmManager 进行同步。当我选择系统中当前时间的“after15Minutes”复选框警报时（如何在数据库中保存该特定时间。在数据库中保存时间是否重要？）并每 15 分钟刷新一次列表。我不知道如何将复选框值与警报绑定以及如何使其成为可能。完全卡住了。

我的代码：

```
 private final class syncOkClickListener implements DialogInterface.OnClickListener
{
    public void onClick(DialogInterface dialog, int which) 
    {   //Implement search method here
        if(after15mint.isChecked())
        {
            // Some code!!! or Alarm Manager !!!
        //  Toast.makeText(getApplicationContext(), "15 Minute checked", Toast.LENGTH_LONG).show();
        }
        else
        {
            Toast.makeText(getApplicationContext(), "Default", Toast.LENGTH_LONG).show();
        }
    } 
```

广播接收器活动：

```
 public class BroadCastReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

}
public void SetAlarm(Context context)
{
    AlarmManager alarmManager = (AlarmManager)context.getSystemService(context.ALARM_SERVICE);
    Intent syncIntent = new Intent(context, BroadCastReceiver.class);
    syncIntent.putExtra("sync", 0);
    PendingIntent pIntent = PendingIntent.getBroadcast(context, 0, syncIntent, 0);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000*20, pIntent);
}
public void CancelAlarm(Context context)
{
    Intent intent = new Intent(context, BroadCastReceiver.class);
    PendingIntent sender = PendingIntent.getBroadcast(context, 0, intent, 0);
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
    alarmManager.cancel(sender);
} 
```

}

任何建议都会有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:37:30.357

您可以在 onClick 代码中设置闹钟：

```
 public void onClick(DialogInterface dialog, int which) 
{   //Implement search method here
    if(after15mint.isChecked())
    {
        // Create alarm intent.
        Intent intent = new Intent(this, BroadCastReceiver.class);
        PendingIntent sender = PendingIntent.getBroadcast(this, 0, intent, 0);

        // Schedule alarm.
        Calendar calendar = Calendar.getInstance();
        calendar.setTimeInMillis(System.currentTimeMillis());
        calendar.add(Calendar.MINUTE, 15);
        AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);
    }
    else
    {
        Toast.makeText(getApplicationContext(), "Default", Toast.LENGTH_LONG).show();
    }
} 
```

您无需将闹钟时间保存在自己的数据库中。

关于您阅读的许多没有帮助的教程，一个很好的起点是 Android SDK 的 ApiDemos，您将在 ApiDemos/App/Alarm/AlarmController 中找到工作代码，该代码实现单次警报和重复警报。

# php - 由 MYSQL、PHP 填充的 Jquery、CSS 三层菜单

> ID：16148094
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:15:58.943
> 
> 标签：php, jquery, mysql, css, drop-down-menu

嗨，我正在尝试创建一个 3 层菜单系统，只是一个标准；

```
<ul>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>

</ul> 
```

类型系统。我有三张桌子；

menu1 - 名称、链接、类型、位置、顺序、状态 menu2 - 父级、名称、链接、类型、位置、顺序、状态 menu3 - 父级、名称、链接、类型、位置、顺序、状态

我可以通过在选择第一级菜单项时将查询放入循环中来使其工作，但这实际上对每个菜单项运行查询（在大型菜单系统上，这不是解决方案）

我想出了这个（非工作）模型（仅显示顶层）。

```
 <ul class="dropdown">
    <?php
    include('../../config/mysqli_connect.php');
    $q = "SELECT * FROM menu1 WHERE position = 'top' AND status ='yes'";
    $q2 = "SELECT * FROM menu2 WHERE position = 'top' AND status ='yes'";
    $q3 = "SELECT * FROM menu3 WHERE position = 'top' AND status ='yes'";

    $r = mysqli_query($dbc, $q);
    $r2 = mysqli_query($dbc, $q2);
    $r3 = mysqli_query($dbc, $q3);

        while($menu1 = mysqli_fetch_array($r, MYSQL_ASSOC))
        {
            echo "<li><a href='" . $menu1['link'] . "'>" . $menu1['name'] . "</a></li>";

            while($menu2 = mysqli_fetch_array($r2, MYSQL_ASSOC))
            {
                echo "<ul class='sub_menu'>";

                if($menu2['parent'] == $menu1['name'])
                {
                    echo "<li><a href='" . $menu2['link'] . "'>" . $menu2['name'] . "</a></li>";
                }
                echo "</ul>";
            }
        }
    ?>
    </ul> 
```

有人可以帮我举一个工作模型的例子，或者帮我写代码。我接近它是错误的，需要朝着正确的方向推动。另一个问题是它显示子菜单ul是否有子菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:28:20.130

```
 <ul class="dropdown">
    <?php
    include('../../config/mysqli_connect.php');
    $q = "SELECT 

        tb1.link as 'menu1_link',
        tb2.link as 'menu2_link',
        tb3.link as 'menu3_link',
        tb1.name as 'menu1_name',
        tb2.name as 'menu2_name',
        tb3.name as 'menu3_name',
        tb2.parent as 'menu2_parent'

        FROM 

        menu1 as tb1,
        menu2 as tb2,
        menu2 as tb3,

        WHERE

        (tb1.position = 'top' AND tb1.status ='yes')
        AND (tb2.position = 'top' AND tb2.status ='yes')
        AND (tb3.position = 'top' AND tb3.status ='yes');";

    $r = mysqli_query($dbc, $q);

        while($row = mysqli_fetch_array($r, MYSQL_ASSOC))
        {
                ?>

            <li><a href="<?=$row['menu1_link'];?>"><?=$row['menu1_name'];?></a></li>
            <ul class='sub_menu'>";

                <?php
                if($row['menu2_parent'] == $row['menu1_name'])
                {
                ?>

                   <li><a href="<?=$row['menu2_link'];?>"><?=$row['menu2_name'];?></a></li>

                <?php   
                }
                echo "</ul>";
            }
   ?>
    </ul> 
```

这条路怎么样？也许如果应该加入表，您可以使用正确的连接（我不知道您的表模式，所以只需选择所有内容）。

# c++ - pantheios 输出到大小有限的日志文件

> ID：16148098
> 
> 赞同：1
> 
> 时间：2013-04-22T13:16:06.030
> 
> 标签：c++, pantheios

我正在尝试在我的 C++ 项目中使用[pantheios 。](http://www.pantheios.org/)具体来说，我使用股票`be.file`后端将日志输出到文件中。我想知道如何限制日志文件的大小，以便在超过该限制时可以翻转或覆盖它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T14:01:32.357

Pantheios 1.0.1 beta 214（最新的 AFAIK）目前不支持对文件的任何限制。这是来自 bec.file.h 的片段

```
#if 0 /* None of the following are yet supported: */
#define PANTHEIOS_BE_FILE_F_ROLL_ON_SIZE                (0x01000000)
...
#endif /* 0 */ 
```

# django - 无法加载 Boto 的 S3 绑定。（安装博托）

> ID：16148100
> 
> 赞同：5
> 
> 时间：2013-04-22T13:16:06.433
> 
> 标签：django, amazon-s3, django-storage

我正在尝试使用 s3 来存储用户的上传文件，我使用 django 存储

> pip install django-storages

将其添加到我的 INSTALLED_APPS

> INSTALLED_APPS = (
> 
> ...
> 
> “存储”，
> 
> )

在 settings.py 中设置变量

> DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
> 
> AWS_ACCESS_KEY_ID = '##################'
> 
> AWS_SECRET_ACCESS_KEY = '#######################'
> 
> AWS_STORAGE_BUCKET_NAME = '我的存储桶名称'

我已经安装了boto

> sudo pip install boto
> 
> dyld：DYLD_ 环境变量被忽略，因为主可执行文件 (/usr/bin/sudo) 是 setuid 或 setgid
> 
> 已满足要求（使用 --upgrade 升级）：/Library/Python/2.7/site-packages/boto-2.9.0_dev-py2.7.egg 中的 boto
> 
> 打扫干净...

当我保存项目时，django的调试页面跳出来，

> 无法加载 Boto 的 S3 绑定。
> 
> 见[https://github.com/boto/boto](https://github.com/boto/boto)

有任何想法吗？（我使用 mac os x 10.8.3）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-03T10:29:25.510

create a bash script: install_latest_boto.sh:

```
#install latest boto from source
cd /home/ubuntu/
sudo mkdir boto_temp
cd boto_temp
sudo git clone git://github.com/boto/boto.git
cd boto
sudo python setup.py install 
```

* * *

on Django's settings - the django default storage will be s3:

```
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
AWS_S3_FILE_OVERWRITE = False 
```

* * *

on your models.py:

```
class MyBaseModel(models.Model):
    class Meta:
        abstract = True

    @staticmethod
    def get_upload_path(instance, filename):
        if hasattr(instance, 'get_upload_folder'):
            return os.path.join(instance.get_upload_folder(), filename)
        else:
            raise Exception('Upload Folder is missing')

class User(MyBaseModel):
    name = models.CharField(max_length=100) 
    email = models.EmailField(max_length=255, unique=True)
    image = models.ImageField(upload_to=MyBaseModel.get_upload_path, default=None, blank=True, max_length=200)

    def get_upload_folder(self):
        upload_folder = 'users/images/orig'
        return upload_folder 
```

# python - IOError：[Errno 13] 在 python 中读取 csv 文件时权限被拒绝

> ID：16148109
> 
> 赞同：0
> 
> 时间：2013-04-22T13:16:47.440
> 
> 标签：python

我有相当大的 csv 文件，我正在使用 csv 模块来读取 csv 文件并对其进行处理，并在我的项目中的代码片段下方进行处理。该文件在文件中有大约 9828075 条记录，代码运行良好，直到后来的第 637922 条记录，它引发以下错误：

```
ERROR      Tue, 14 Apr 2013 09:59:29 Traceback (most recent call last):
    File "build\bdist.win32\egg\my_proj\csv_reader.py", line 316, in next
  File "E:\MyProject\DataExa\Python26\lib\csv.py", line 104, in next
    row = self.reader.next()
  File "build\bdist.win32\egg\my_proj\csv_reader.py", line 366, in capture_record_data
IOError: [Errno 13] Permission denied 
```

我的代码如下所示...

```
import csv

class MyCsvReader (object):
"""
"""

  def __init__ (self, import_source, dialect='excel'):

    """
    """
    self.import_source = import_source
    self.dialect = dialect
    self.post_init()

  def post_init(self):
    """
    Do any post init logic....
    """
    pass

  def init_reader (self):
    self.import_file = file(self.import_source, 'rU')
    #_reader = csv.reader (self.capture_record_data(self.import_file),
    #                          dialect=self.dialect)
    # create a CSV iterator that returns a dict with each next() call        
    self.reader = csv.DictReader(self.capture_record_data(self.import_file),
                                 dialect=self.dialect)
  def next (self):
    """
    Returns a dict containing data read from the CSV file.

    """
    #todo: do a magic to remove all spaces in data....
    return self.reader.next()        

  def __iter__ (self):
    "Special method to make an instance of this class into an iterator"
    return self

  def capture_record_data (self, row_iterator):
    """
    Generator for capturing the record data before passing to csv
    """
    for row in row_iterator: 
        self.raw_data = row
        yield row

  def close(self):
    if hasattr(self, 'import_file'):
        self.import_file.close()

if __name__ == '__main__':
  reader_obj =  MyCsvReader (import_source='test.csv')
  reader_obj.init_reader()
  while True:
    try:
        print reader_obj.reader.next()
    except StopIteration, e:
        break 
```

任何人都可以帮助弄清楚为什么我会收到 IOError: [Errno 13] Permission denied 错误，同时处理文件。

# javascript - 关于 JavaScript 对象和 JSOn 对象区别的查询

> ID：16148110
> 
> 赞同：0
> 
> 时间：2013-04-22T13:16:49.897
> 
> 标签：javascript, json

这是我的问题：在 java 脚本中：我们有一个对象：

```
var someObject={"name":"somename"}; 
```

现在我们想得到名字，我们会做

```
alert(someObject.name); //it will print somename Right? 
```

我从发送 JSON 对象的源获得的相同对象

```
someJSONObject={"name":"someName"}; 
```

现在在我的 javascript 代码中，不解析这个 someJSONObject ，我可以得到名称

```
alert(someJSONObject.name); 
```

如果是这样，为什么我们需要通过解析将JSON对象转换为javascript对象，什么时候我们可以将其用作对象而不需要解析或使用`eval()`？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:19:08.630

JSON 是 a `string`，所以它类似于`var jsonObject = '{"name":"someName"}';`an`object`是一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:18:31.073

因为它不是 JSON 对象。带引号键的语法`{"name":"someName"}`不会使其成为 JSON，Javascript 对象文字支持相同的语法。

JSON 可以嵌入到 Javascript 字符串中。喜欢：

```
var json = '{"key": "value"}'; 
```

然后您可以将其解析为 Javascript 数据类型：

```
var obj = JSON.parse( json ); 
```

请注意，这`eval`可能会导致语法错误，因为 JSON 和 Javascript 的语法最终不兼容。如果`evaled`.

# autohotkey - AutoHotKey 不响应

> ID：16148122
> 
> 赞同：0
> 
> 时间：2013-04-22T13:17:27.820
> 
> 标签：autohotkey

当我输入热键 [任何热键] 时，AutoHotKey 没有响应。但是，如果我编辑、保存并重新加载它，它会响应。之后，它会响应三四次，然后我必须再次进行编辑、保存和重新加载的相同过程。我已经卸载并重新安装了 10 次或更多次。

在它开始没有响应之前，它会在每个字符串之后留下一个空格。[我不确定这是否与我的问题有关。]

我使用的是 Windows 7 和 IE 10。我重新安装了 IE 8 和 IE 9，看看是否可以解决问题。问题依然存在。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-08T17:24:55.730

# 我也是

我遇到过同样类型的问题。AutoHotKey 加载我的脚本并响应一段时间，然后在 X 次后脚本停止响应。

# 解析度

为了解决这些类型的问题，我发现打开调试屏幕（双击任务栏中的 AutoHotKey 图标）通常会显示我的脚本正忙于运行，并且正在执行某些操作。从那里确定它为什么仍在运行是一件简单的事情。

由于脚本当前正忙于满足先前的请求，因此无法发起新的请求。

在我的情况下，问题是一些失控的循环正在处理比我预期的更多的数据，或者它陷入了一些无限循环。

如果您让脚本在卡住时继续运行，您可能还想打开任务管理器以查看它是否正在消耗任何 CPU 时间，或者它是否正在逐渐消耗越来越多的内存。

# php - 我们如何在隐私浏览模式下打开链接

> ID：16148136
> 
> 赞同：35
> 
> 时间：2013-04-22T13:18:08.733
> 
> 标签：php, javascript, jquery, html, browser

在我的网页中，有一个链接应该始终以隐私浏览模式打开。那么我该如何使用 HTML/javascript/jquery/php 呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-22T13:18:50.700

这取决于用户。您不能强制用户以隐私浏览模式打开浏览器。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-07-02T21:00:07.390

HTML 和 Javascript 用于各种程序，包括浏览器。即使在浏览器中，也只有少数浏览器具有私有/隐身模式。因此，不能有针对隐私浏览模式的原生 HTML/Javascript 功能。

# c# - 打开 VS2012 项目时 Xamarin Studio 出错

> ID：16148139
> 
> 赞同：1
> 
> 时间：2013-04-22T13:18:13.790
> 
> 标签：c#, xamarin.ios, xamarin, xamarin-studio

我有一个我一直在 VS2012 中编写的解决方案，它由 4 个项目组成。我过去曾这样做过，在 Xamarin 中打开它们并使用它们时一切正常，但这次我遇到了多个问题，我不知道为什么。目前，我完全被难住了，大部分时间都在看这个。如果有人有任何建议，我将不胜感激！

我在解决方案的所有项目中引用了两个 dll 文件。在 Xamarin 中打开时，我收到如下警告：

警告：未找到程序集 '.......\vSphere-API-Builder\Vim25Service2012.dll'。确保程序集存在于磁盘中。如果需要参考来构建项目，您可能会遇到编译错误。(advantage.vmware.eventsmanager)

参考在视觉工作室下绝对没问题。因此，由于缺少引用（总共有两个），我无法构建项目，因为命名空间解析存在错误。

消息中有趣的 ......\ 位也显示在解决方案树中，用于参考下的缺失文件。

我尝试删除引用然后重新添加它们，但是当我选择并删除它们时，我收到以下错误：

发生了错误。保存失败。参数不能为空。参数名称：s，带有以下转储..

> System.ArgumentNullException：参数不能为空。参数名称：s at System.IO.StringReader..ctor (System.String s) [0x00031] in /private/tmp/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.12/ _build/mono-2.10.12.git/mcs/class/corlib/System.IO/StringReader.cs:53 at (wrapper remoting-invoke-with-check) System.IO.StringReader:.ctor (string) at Mono。 Xml2.XmlTextReader..ctor (System.String xmlFragment, XmlNodeType fragType, System.Xml.XmlParserContext 上下文) [0x00000] 在 System.Xml.XmlTextReader..ctor (System.String xmlFragment, XmlNodeType fragType, System.Xml. XmlParserContext 上下文）[0x00006] 在 /private/tmp/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.12/_build/mono-2.10.12.git/mcs/class/System。 XML/System.Xml/XmlTextReader2.cs:132 在 System.Xml.XmlElement.set_InnerXml（系统。

# android - android GALAXY Note II 使用 CAMERA INTENT 时自动旋转

> ID：16148141
> 
> 赞同：1
> 
> 时间：2013-04-22T13:18:21.453
> 
> 标签：android

我正在开发一个 Android 应用程序，它允许用户通过`Intent` `android.provider.MediaStore.ACTION_IMAGE_CAPTURE`. 我只需要照片缩略图，所以我不通过任何额外的。我的应用程序中的活动有两个布局 XML 文件，一个用于纵向，另一个用于横向。我已经在 HTC 和 Galaxy 型号手机 (s3) 上进行了测试，它按设计工作。当我在 NOTE 2 上进行测试时，当我从相机返回到我的应用程序时，由于 NOTE 2 “自动旋转”，照片缩略图丢失了。我在 NOTE2 中的应用程序的任何方向都会在从相机返回时将其切换到相反的值。我怎样才能停止这种旋转？我以固定的方式握着note 2，为什么它总是旋转？

# javascript - event.toElement 在 IE9 下使用 onbeforedeactivate 未定义

> ID：16148147
> 
> 赞同：2
> 
> 时间：2013-04-22T13:18:31.853
> 
> 标签：javascript, jquery, events, internet-explorer-9

我试图`event.toElement`在事件发生时访问该属性`beforedeactivate`，但它`undefined`在 IE9 下返回。它似乎在IE8下工作。下面的代码是我想要做的一个例子：

```
$('#myButton').bind('beforedeactivate', myHandler);

function myHandler(event)
{
  var target = event.originalEvent.toElement;
} 
```

似乎找不到有关此问题的太多信息，所以我想知道是否有人可以解释为什么会发生这种情况或建议解决该问题的方法？

# c# - 防止在 foreach 语句中出现多个条目

> ID：16148149
> 
> 赞同：0
> 
> 时间：2013-04-22T13:18:36.593
> 
> 标签：c#, asp.net, asp.net-mvc-3

以下代码填充不属于现有列表“selectedUsers”的用户列表。

```
foreach (var childOrg in viewModel.ChildOrganizations)
{
    List<OrganizationUserViewModel> childOrgUsers = new List<OrganizationUserViewModel>();
    var users = this._organizationManager.GetOrganizationUsers(childOrg.OrganizationId);
    foreach (var user in users)
    {
        var userViewModel = Gateway.Instance.Map<User, OrganizationUserViewModel>(user.User);
        userViewModel.Organization_UserId = user.Organization_UserId;
        if (selectedUsers != null)
        {
            foreach (OrganizationUserViewModel selectedUser in selectedUsers)
            {
                if (selectedUser.UserId != userViewModel.UserId)
                {
                    childOrgUsers.Add(userViewModel);
                }
            }
        }
    }
    childOrg.Users = childOrgUsers;
} 
```

如果 'selectedUsers' 中只有一个用户，这可以正常工作，但如果有多个条目，则由于 foreach 循环，会在新列表中添加多个。我将如何避免这种情况？

提前感谢您的帮助。

**编辑：**我刚刚通读了我的问题，我可能应该澄清一下，因为我真的没有说清楚。当 foreach 为列表中的每个条目运行时，它还会在 ID 与 userViewModel 中的当前条目不匹配时为所选用户添加条目。这些是我真正需要重点删除的内容，因为我希望存储在 selectedUsers 中的任何内容都不会出现在 userViewModel 中。对不起，没有澄清！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:41:44.453

如果我理解正确，你需要类似的东西`ExceptBy`

```
childOrg.Users = users.ExceptBy(selectedUsers, u=>u.UserId) 
```

* * *

```
public static class MyExtensions
{
    public static IEnumerable<T> ExceptBy<T, TKey>(
        this IEnumerable<T> list1,
        IEnumerable<T> list2,
        Func<T, TKey> keySelector)
    {
        HashSet<TKey> knownKeys = new HashSet<TKey>(list2.Select(x => keySelector(x)));
        return list1.Where(x => knownKeys.Add(keySelector(x)));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:27:59.537

我希望我已经理解了这个问题。
缓存您从方法中检索到的所有用户 ID `Gateway.Instance.Map<User, OrganizationUserViewModel>`，然后将缺少的用户 ID 添加到您的列表中：

```
foreach (var childOrg in viewModel.ChildOrganizations)
{
    var allUserId = new HashSet<int>();
    var users = this._organizationManager.GetOrganizationUsers(childOrg.OrganizationId);
    foreach (var user in users)
    {
        var userViewModel = Gateway.Instance.Map<User, OrganizationUserViewModel>(user.User);
        userViewModel.Organization_UserId = user.Organization_UserId;
        allUserId.Add(userViewModel.UserId);
    }

    var childOrgUsers = new List<OrganizationUserViewModel>();
    if (selectedUsers != null)
    {
        foreach (OrganizationUserViewModel selectedUser in selectedUsers)
        {
            if(allUserId.Contains(selectedUser.UserId) == false)
            {
                childOrgUsers.Add(userViewModel);
            }
        }
    }
    childOrg.Users = childOrgUsers;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:41:02.177

好的。我想我明白你现在需要什么了。试试这个。

```
foreach (var childOrg in viewModel.ChildOrganizations)
{
    List<OrganizationUserViewModel> childOrgUsers = new List<OrganizationUserViewModel>();
    var users = this._organizationManager.GetOrganizationUsers(childOrg.OrganizationId);
    foreach (var user in users)
    {
        var userViewModel = Gateway.Instance.Map<User, OrganizationUserViewModel>(user.User);
        userViewModel.Organization_UserId = user.Organization_UserId;
        if (selectedUsers != null)
        {
            var foundUser = selectedUsers.FirstOrDefault(x => x.UserId == userViewModel.UserId);

            if(foundUser == null)
            {
                childOrgUsers.Add(userViewModel);
            }
        }
    }
    childOrg.Users = childOrgUsers.Distinct().ToList();
} 
```

# javascript - 如何根据键值更新 javascript 数组中的一行？

> ID：16148150
> 
> 赞同：20
> 
> 时间：2013-04-22T13:18:39.857
> 
> 标签：javascript, underscore.js

我有一个这样的数据数组：

```
var nameInfo  = [{name: "Moroni", age: 50},
                 {name: "Tiancum", age: 43},
                 {name: "Jacob", age: 27},
                 {name: "Nephi", age: 29},
                 {name: "Enos", age: 34}]; 
```

如果我有这样的对象：

```
var nameInfo  = {name: "Moroni", age: 51}; 
```

有没有一种简单的方法可以更新变量 nameInfo. 这些之间的关键是名称列。我知道有一种方法可以通过搜索行、删除和添加来做到这一点，但我想有一种方法来更新行。请注意，如果它有帮助，我确实加载了 underscore.js。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-22T13:23:54.563

最简单的方法是遍历并找到具有匹配名称的名称，然后更新年龄：

```
var newNameInfo  = {name: "Moroni", age: 51};
var name = newNameInfo.name;

for (var i = 0, l = nameInfo.length; i < l; i++) {
    if (nameInfo[i].name === name) {
        nameInfo[i].age = newNameInfo.age;
        break;
    }
} 
```

[JSFiddle 示例](http://jsfiddle.net/aQfk6/1/)

使用下划线，您可以使用[_.find](http://underscorejs.org/#find)方法代替 for 循环执行以下操作：

```
var match = _.find(nameInfo, function(item) { return item.name === name })
if (match) {
    match.age = newNameInfo.age;
} 
```

[JSFiddle 示例](http://jsfiddle.net/aQfk6/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-03T12:50:59.420

**编辑：** 您可以将 ES6**过滤器**与箭头功能结合使用

```
nameInfo.filter(x => {return x.name === nametofind })[0].age = newage 
```

你可以使用 `_.where`函数

```
var match = _.where(nameInfo , {name  :nametofind }); 
```

然后更新比赛

```
match[0].age = newage 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-03T09:17:45.273

```
var nameInfo  = [{name: "Moroni", age: 50},{name: "Tiancum", age: 43},
                 {name: "Jacob", age: 27},{name: "Nephi", age: 29},
                 {name: "Enos", age: 34}
                ];
_.map(nameInfo, function(obj){
  if(obj.name=='Moroni') {
    obj.age=51; // Or replace the whole obj
  }
}); 
```

这应该这样做。它整洁可靠，带有下划线

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-25T05:16:41.510

使用下划线，您可以使用 _.findWhere [http://underscorejs.org/#findWhere](http://underscorejs.org/#findWhere)

```
_.findWhere(publicServicePulitzers, {newsroom: "The New York Times"});
=> {year: 1918, newsroom: "The New York Times",
  reason: "For its public service in publishing in full so many official reports,
  documents and speeches by European statesmen relating to the progress and
  conduct of the war."} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-07T18:18:44.423

您可以使用 findWhere 和扩展

```
obj = _.findWhere(@songs, {id: id})
_.extend(obj, {name:'foo', age:12}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T13:23:17.207

您可以使用 _.find 方法，如下所示：

```
var nameInfos  = [{name: "Moroni", age: 50},
                 {name: "Tiancum", age: 43},
                 {name: "Jacob", age: 27},
                 {name: "Nephi", age: 29},
                 {name: "Enos", age: 34}];
var nameToSearch = "Moroni";
var myRecord = _.find(nameInfos, function(record){ return record.name === nameToSearch; }); 
```

工作示例：http: [//jsfiddle.net/9C2u3/](http://jsfiddle.net/9C2u3/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-10T16:33:49.597

```
var match = _.findWhere(nameInfo , {name  :nametofind });
match.age = newage 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-06-08T16:24:39.553

使用 lodash 的[find()](https://lodash.com/docs#find "Lodash 查找功能")函数的前锋，

```
var nameInfo  = [{name: "Moroni", age: 50},
             {name: "Tiancum", age: 43},
             {name: "Jacob", age: 27},
             {name: "Nephi", age: 29},
             {name: "Enos", age: 34}];

var objToUpdate = _.find(nameInfo, {name: "Moroni"});

if(objToUpdate) objToUpdate.age = 51;

console.log(nameInfo); // Moroni age will be 51; 
```

注意：如果有多个 Moroni 对象，_.find 只能获取第一个匹配项。

# elasticsearch - 通过 NEST 进行弹性搜索：连接到多台主机集群的推荐方法是什么

> ID：16148151
> 
> 赞同：0
> 
> 时间：2013-04-22T13:18:50.063
> 
> 标签：elasticsearch, nest

我开始与 NEST 合作。我在上[一个问题](https://stackoverflow.com/questions/11334717/connection-pooling-with-nest-elasticsearch-library)中看到，我应该在程序开始时只使用一次 TryConnect，然后使用 Connect。但这对于长时间运行的系统来说似乎有点太天真了。如果我有一个由 3 台机器组成的集群，并且我想确保我可以连接到这 3 台机器中的任何一台，该怎么办？推荐的方法应该是什么？

我应该： - 每次使用 TryConnect 并在失败时使用不同的主机 + 端口（缺点 - 每次额外的往返）？
- 尝试与客户端合作并有一些重试机制来处理由于连接问题导致的故障？也许在此之上实现一个连接池？

还有其他选择吗？有什么建议/建议吗？示例代码？

谢谢你的帮助，
罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:16:37.047

连接池是一个经常被请求的功能，但由于涉及许多启发式方法和不同的方法，NEST 并没有开箱即用。您必须自己实施。

我不建议`TryConnect()`在每次通话之前打电话，因为现在您要打两个电话而不是一个。

每个 NEST 调用都会返回一个您可以检查的[IResponse](https://github.com/Mpdreamz/NEST/blob/master/src/Nest/Domain/Responses/BaseResponse.cs)`IsValid`，`ConnectionStatus`它将保存请求和响应的详细信息。

另请参阅有关[处理响应的文档](http://nest.azurewebsites.net/concepts/handling-responces.html)

在 1.0 中，NEST 将开始在 TCP 级别错误的情况下抛出异常，因此可以实现更通用的连接池方法，并且 Nest 可能会附带一个单独的 nuget 包来实现一个（如果有任何参考）。另请参阅此讨论[https://github.com/Mpdreamz/NEST/pull/224#issuecomment-16347889](https://github.com/Mpdreamz/NEST/pull/224#issuecomment-16347889)

希望这对现在有所帮助。

**更新**此答案已过时 NEST 1.0 附带开箱即用的连接池和集群故障转移支持：http: [//nest.azurewebsites.net/elasticsearch-net/cluster-failover.html](http://nest.azurewebsites.net/elasticsearch-net/cluster-failover.html)

# css - webkit中相对定位容器中的绝对定位元素100％宽度

> ID：16148155
> 
> 赞同：0
> 
> 时间：2013-04-22T13:18:54.690
> 
> 标签：css, google-chrome, webkit, width, absolute

我已经使用了这个[定位技巧](http://css-tricks.com/absolute-positioning-inside-relative-positioning/)来实现复杂的结果。我想我在 webkit 浏览器中遇到了一个我很难理解的错误。

这是简单的标记：

```
<table>
<tbody>
    <tr>
        <td>
        <div>
            <span class="cols-6"></span>
        </div></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</tbody> 
```

和 CSS：

```
*, *:after, *:before {
    -moz-box-sizing: border-box; 
    -webkit-box-sizing: border-box; 
    box-sizing: border-box; 
}

table {
    table-layout: fixed;
    border-collapse: collapse;
    width: 100%;
}
tr {
    border: 1px solid #ddd;
}
td {
    vertical-align: top;
    padding: 0;
    height: 100px;
    border: solid #ddd;
    border-width: 1px 0 0 0;
    box-shadow: -1px 0px #ddd;
}
td div {
    position: relative;
}
td div span.cols-6 {
    position: absolute;
    width: 600%;
    height: 20px;
    background: #ccc;
} 
```

要查看此操作，请在 chrome 中打开此[http://jsfiddle.net/JFxqt/14/ 。](http://jsfiddle.net/JFxqt/14/)

显示的跨度绝对位于相对容器内。由于表格使用固定布局，其单元格都是固定宽度，因此孩子应该能够使用百分比宽度。该表有 7 列，而跨度的宽度设置为 600%（即 6 列 * 100%）。它未能涵盖 webkit 浏览器中的所有 6 列。Firefox 和 IE 完全呈现所有指定的列。

理想情况下，将跨度的宽度设置为 100% 应该跨 1 列呈现，跨 2 列呈现 200% 等等。

有人有任何想法或解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:26:38.967

试试这个：http: [//jsfiddle.net/JFxqt/3/](http://jsfiddle.net/JFxqt/4/)

我在你的 CSS 中改变了这个：

```
body{margin:0px}
td div {

}
span.cols-6 {
    position: absolute;
    width: 85.6%;
    height: 20px;
    background: #ccc;
    z-index:10;
    top:0;
    left:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:55:04.767

您会看到与如何计算和继承表格单元格的宽度有关的跨浏览器问题。这可能是一个错误，也可能是 CSS 规范未明确指定并由浏览器决定的东西。

在 Firefox 中，宽度由`<td>`继承，`<div>`而在 webkit (Chrome) 浏览器中，子级继承的宽度`<div>`小 1px。

当您乘以 100% 和 200% 时，您不会看到效果，但是当您到达 700% 的最后一个单元格时，您会看到大约 7px 的间隙。

如果你正在构建一个 CSS 框架，你需要为 Firefox 浏览器和 webkit 浏览器创建一个样式。

对于 6 列的情况，我发现以下方法可行：

```
td div span.cols-6 {
    position: absolute;
    left:-1px;
    width: 600%;
    border-right: 6px solid #ccc;
    height: 20px;
    background: #ccc;
} 
```

我添加了一个 600% x 1px = 6px 的右边框，然后将跨度向左定位 -1px。对于其他数量的列，例如，`.cols-3`您将需要`width: 300%`等`border-right: 3px solid #ccc`。

您可能需要使用某种类型的 CSS 过滤器或选择器 hack。我确实找到了以下参考：[http ://browserhacks.com](http://browserhacks.com)

不幸的是，这个问题没有干净或优雅的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T14:53:13.647

在寻找解决方法一两天之后，Webkit 浏览器的条件 JS 增强似乎是唯一可行的解​​决方案。

问题源于 Webkits（和 Opera 的旧渲染引擎）计算百分比宽度，它总是向下舍入到最接近的像素，而不是存储为双精度。因此，在 Webkit 中，可能会为每个 100% 的因子添加 1px 的差异（例如 2300% - 100% * 23 - 将有最大 23px 的差异），而 Firefox 和更高版本的 IE 最多只能有 1px 的差异.

John Resig 不久前谈到了这个问题，[http ://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

# php - 单击“删除按钮”时，我无法从购物车中删除商品？

> ID：16148160
> 
> 赞同：0
> 
> 时间：2013-04-22T13:19:08.797
> 
> 标签：php, session, shopping-cart, shopping

我有购物车页面，但问题是点击时我无法从购物车中删除商品`remove button`？

1) 我想通过基于产品的方式从购物车中删除商品`pid`？
2）当我回显`$pid=intval($pid);`它显示PID？在购物车页面？

**产品页面**

```
session_start();
$id=$_REQUEST['id'];
$_SESSION['pid1']= $_POST['ids']; //Product ID//

<form method="post">
 <input type="hidden" name="ids" value="<?php echo $id?>" />
</form>

<input type="submit" class="button1" name="addtocart" value="Add To Cart"
/>

</form> 
```

**购物车页面**

```
session_start();
$pid=$_SESSION['pid1'];   

if($_REQUEST['command']=='delete' && $pid>0){
  $pid=intval($pid);
  $max=count($_SESSION['product1']);
  for($i=0;$i<$max;$i++){
    if($pid==$_SESSION['product1'][$i]['pid']){
      unset($_SESSION['product1'][$i]);
      break;
    }
  }
  $_SESSION['product1']=array_values($_SESSION['product1']);
}

<form  name="form1" method="post">  
<input type="hidden" name="pid" />
<input type="hidden" name="command" />  

<a href="javascript:del(<?php echo $pid?>)">
<input type="button" class="button2" value="Remove" />
</a> 
```

**购物车页面 Javascript**

```
<script language="javascript">
function del(pid){
if(confirm('Do you really mean to delete this item')){
document.form1.pid.value=pid;
document.form1.command.value='delete';
document.form1.submit();
}
}

function clear_cart(){
if(confirm('This will empty your shopping cart, continue?')){
document.form1.command.value='clear';
document.form1.submit();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:03.840

请修改您的表格：-

```
 <form  name="form1" method="post">     
  <input type="hidden" name="pid" value="<?php echo $pid?>" />
  <input type="hidden" name="command" value="delete" /> 
  <input type="button" class="button2" value="Remove" onclick="javascript:del(<?php echo $pid?>)" />
  </form> 
```

# django - Django - 添加两个外键时出错

> ID：16148171
> 
> 赞同：0
> 
> 时间：2013-04-22T13:19:39.950
> 
> 标签：django, django-models, foreign-keys

下午好。

我正在尝试在 Django 中构建一个足球/足球计算器。

为此，我创建了两个模型：

```
class Team(models.Model):
    teamName = models.CharField(max_length=200)
    def __unicode__(self):
        return self.teamName

class Match(models.Model):
    homeTeam = models.ManyToManyField(Team, related_name="homeTeam")
    # awayTeam = models.ForeignKey(Team, related_name="awayTeam") 
```

正如你所看到的，我试图把两个模型。外键，团队模型，因为只有两支球队参加比赛。

如果我有两个

```
homeTeam = models.ForeignKey(Team, related_name="homeTeam")
awayTeam = models.ForeignKey(Team, related_name="awayTeam") 
```

我无法添加，甚至无法在管理日志中查看匹配页面。我的代码问题是什么？

预先感谢您的帮助 ：）。

山姆！

# ruby - 与组和公司 MongoMapper 的用户关系

> ID：16148176
> 
> 赞同：0
> 
> 时间：2013-04-22T13:19:58.660
> 
> 标签：ruby, mongodb, mongomapper, database

我需要创建一个系统，用户可以使用用户帐户登录，其中用户是管理员或编辑器等组的成员。用户也是公司的成员。在组和公司的两种情况下，他们可以有多个用户，但用户只能是一个公司和多个组的成员。

我可以从中得到的关系是一个组有很多用户，公司有很多用户，用户有一个公司，用户有很多组。

但我的问题是如何用 ruby​​ 和 mongoMapper 创建它？我查看了文档和其他来源，但没有找到关于如何使用或设置它的好的解决方案或解释。

如果有人有更好的方法也欢迎。

这些是我写的当前课程。

```
class User
  include MongoMapper::Document

  key :username, String
  key :password, String
  key :name, String

  belongs_to :group
  belongs_to :company
end

class Group
  include MongoMapper::Document

  key :group_id, Integer
  key :name, String
  key :accesLevel, Integer

  many :user
end

class Company 
  include MongoMapper::Document

  key :name, String

  many :user
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:36:23.903

经过更多谷歌搜索后，我找到了解决方案。

首先我让用户类看起来像这样：

```
class User
  include MongoMapper::Document

  key :username, String
  key :password, String
  key :name, String
  key :companyID
  key :groupID
  timestamps!

end 
```

然后是这样的集团和公司类：

```
class Company 
  include MongoMapper::Document

  key :name, String
  timestamps!

end

 class Group
  include MongoMapper::Document

  key :name, String
  key :accesLevel, Integer
  timestamps!

end 
```

有了这些类，我将控制器更改为首先创建一个公司，然后是一个组，这些也可以加载，但为了便于测试，没有必要这样做，因此我不需要为此编写代码。

```
company = Company.new
company.name = "comp"

group = Group.new
group.name = "admin"

user = User.new
user.name = "user1"
user.username = "user1"
user.password = "passuser1"

user.groupID = group.id
user.companyID = company.id

db_config = YAML::load(File.open('./dbconfig.yml'))

MongoMapper.connection = Mongo::Connection.new(db_config['hostname'])
MongoMapper.database = db_config['name']

company.save
group.save
user.save 
```

# c++ - 我的程序输入不会保存到文本文件中

> ID：16148180
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:20:04.327
> 
> 标签：c++, visual-c++

大家好，我在下面写的代码是一个日记项目，它仍处于早期阶段，所以当你运行它时，它假设告诉你输入一个日记条目，然后将它保存在一个文本中，但它没有被保存在文件请帮忙！！

```
#include<iostream>
#include<string>
#include<fstream>
using namespace std;

int main()

{
 ofstream wysla;
wysla.open("wysla.txt, ios::app");
int kaput;
string s1,s2;
cout<<"Please select from the List below"<<endl;
cout<<"1.New entry"<<endl;
cout<<"2.View Previous Entries"<<endl;
cout<<"3.Delete an entry"<<endl;
cin>>kaput;
switch (kaput)
{
case 1:

    cout<<"Dear diary,"<<endl;
    cin>>s1;
    wysla<<s1;
    wysla.close();

    break;
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:21:39.770

我想你这里有错字

```
wysla.open("wysla.txt", ios::app); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:57:54.627

除了 Daniel A. White 的回答之外，您可能还会遇到问题，即您的文件中只保存了一个单词。这是由这一行引起的：

```
cin>>s1; 
```

你应该使用

```
getline(cin, s1); 
```

这里。

# regex - 在 Blackberry 10 中使用 QML 在 TextField 中验证电子邮件 ID 格式

> ID：16148185
> 
> 赞同：2
> 
> 时间：2013-04-22T13:20:17.210
> 
> 标签：regex, blackberry-10, email-validation

我在 QML 中为我在 BB10 上的应用程序设计了一个登录页面。

在用户名字段中，我想执行电子邮件 ID 格式验证。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:30:05.067

要输入电子邮件和密码，我们`TextField`在`CommonDialog`. 您可以尝试使用此代码

```
TextField {
    id: textFieldEmail
    width: contentColumn.width - textEmail.font.pixelSize*5
    echoMode: TextInput.Normal
    errorHighlight:false;
    placeholderText: qsTr( "Enter email" )
    anchors.left: parent.left
    anchors.leftMargin:textEmail.font.pixelSize*5
    validator: RegExpValidator { regExp:/\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/ }
    onTextChanged: {
        textError.state ="hide";
        textError.text = "";
    }
} 
```

# java - JPA 和 Spring Data JPA 有什么区别？

> ID：16148188
> 
> 赞同：169
> 
> 时间：2013-04-22T13:20:25.297
> 
> 标签：java, hibernate, jpa, orm, spring-data-jpa

我对 Spring Data-JPA 和 JPA 之间的区别有点困惑。我知道 JPA，它是一种使用流行的 ORM 技术将 Java 对象持久保存到关系数据库的规范。

换句话说，JPA 提供接口和其他 ORM 技术，实现那些称为 JPA 提供者的接口，例如 Hibernate。

现在，Spring Data JPA 到底是什么？

Spring Data JPA 是否在 JPA 上添加了更多功能（接口），但它仍然是仅指定的，还是它也是 JPA 提供者？

我看到 Spring Data JPA 围绕存储库工作（DAO 层：如果我没记错的话）。所以，我的意思是，使用“Spring Data JPA + Hibernate”或仅使用“Hibernate”指导有何不同？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2013-04-22T13:36:41.580

> 我看到 Spring，JPA 围绕存储库工作（DAO 层：如果我没记错的话）。所以我的意思是使用“Spring JPA + Hibernate”或仅直接使用“Hibernate”有什么不同？

正如您所说，**JPA**是一种*规范*，而**Hibernate**是该规范的特定实现（这些实现通常称为*Providers*）。通过使用 Hibernate，您将自己与该提供者绑定在一起，从而限制了您在需要时切换到另一个选项的自由（例如，您想使用 EclipseLink 或 ObjectDB，因为 Hibernate 有一个错误会停止您的开发过程）。

引用**[Spring Data JPA](http://static.springsource.org/spring-data/jpa/docs/1.0.0.M1/reference/html/)的**文档：

> 实施应用程序的数据访问层已经很麻烦了。必须编写太多样板代码。领域类是贫乏的，并且没有以真正的面向对象或领域驱动的方式设计。
> 
> 使用这两种技术可以让开发人员在富域模型的持久性方面变得更加轻松。尽管如此，实现存储库的样板代码量仍然很高。因此 Spring Data 的存储库抽象的目标是显着减少为各种持久存储实现数据访问层的工作量。

总而言之，它在 JPA 之上添加了另一层抽象，类似于定义基于标准的设计以支持Spring 上下文中的*持久层*。那些定义的接口（Spring 已知）提供框架使用 JPA 处理的服务以提供结果。您以 Spring 可以扫描项目并找到它的方式定义存储库：

```
<repositories base-package="com.acme.repositories" /> 
```

因此，允许您在容器的上下文中或容器外部使用它。

> 现在究竟什么是 Spring，JPA。Spring，JPA 是否在 JPA 上添加了更多功能（接口），但它仍然是仅指定的，还是它也是 JPA 提供者？

Spring Data JPA 提供了一个定义，通过引用 JPA 规范，使用您定义的提供者来实现底层支持的存储库。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-04-22T13:34:33.230

> > Java Persistence API，有时也称为 JPA，是一个 Java 框架，用于管理使用 Java 平台标准版 (JavaSE) 和 Java 平台企业版 (JavaEE) 的应用程序中的关系数据。

**在这方面的持久性包括三个方面：**

*   API 本身，在`javax.persistence`包中定义。

*   Java 持久性查询语言 (JPQL)。

*   对象关系元数据。

    [![在此处输入图像描述](https://i.stack.imgur.com/0fsKj.png)](https://i.stack.imgur.com/0fsKj.png)

> > Spring Data JPA 是 Spring Data 伞形项目的一部分，它可以更轻松地实现基于 JPA 的存储库。

**特征：**

*   支持基于 Spring 和 JPA 构建存储库

*   支持 QueryDSL 谓词，因此支持类型安全的 JPA 查询

*   域类的透明审计

*   分页支持、动态查询执行、集成自定义数据访问代码的能力

*   `@Query`在引导时验证带注释的查询

*   支持基于 XML 的实体映射

*   通过引入基于 JavaConfig 的存储库配置`@EnableJpaRepositories`

    [![在此处输入图像描述](https://i.stack.imgur.com/lQkpL.jpg)](https://i.stack.imgur.com/lQkpL.jpg)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2020-05-11T18:27:23.533

## JPA

JPA 是标准化 Java 对象映射到关系数据库系统的方式的规范。作为一个规范，JPA 由一组接口（如`EntityManagerFactory`、`EntityManager`和注释）组成，可帮助您将 Java 实体对象映射到数据库表。

您可以使用多个 JPA 提供程序，例如 HIbernate、EclipseLink 或 Open JPA。

## 春季数据 JPA

Spring Data JPA 是一个 JPA 数据访问抽象。就像 JPA 一样，Spring Data JPA 不能在没有 JPA 提供者的情况下工作。

Spring Data JPA 为[DDD`Repository`模式](https://docs.microsoft.com/en-us/dotnet/architecture/microservices/microservice-ddd-cqrs-patterns/infrastructure-persistence-layer-design)或 [`DAO (Data Acess Object) pattern`](https://en.wikipedia.org/wiki/Data_access_object). 它还可以通过方法名称约定代表您生成 JPA 查询。

Spring Data JPA 可以与 Hibernate、Eclipse Link 或任何其他 JPA 提供程序一起使用。使用 Spring 或 Java EE 的一个非常有趣的好处是您可以使用`@Transactional`注解以声明方式控制事务边界。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-23T18:28:22.257

营销。Spring 生命周期遵循这样一种模式：Java item X 是邪恶的，然后意识到它是必要的，然后重新命名并声称发明了它。

# java - neo4j QueryResult 不会退出

> ID：16148190
> 
> 赞同：0
> 
> 时间：2013-04-22T13:20:28.697
> 
> 标签：java, api, neo4j

目前我有这门课。当我删除 QueryResult 它运行主要方法并自行完成。当我添加 QueryResult 时，我需要手动终止运行。我怎样才能使它优雅地结束？谢谢。

```
public class TestConnect {
  public static void main(String[] args) {
    System.out.println("starting test");
     final RestAPI api = new RestAPIFacade("http://localhost:7474/db/data");
    System.out.println("API created");
    final RestCypherQueryEngine engine = new RestCypherQueryEngine(api);
    System.out.println("engine created");
    QueryResult<Map<String,Object>> result = engine.query("start n=node({id}) return n;", map("id",0));
  }
} 
```

编辑：我正在使用 Java 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:27:04.863

我没有使用 neo4j 的经验，但是 QueryResults 通常需要关闭，以便 java 释放/清理连接和类似的东西。

顺便说一句，我不知道您使用的是哪个版本的 java，但如果它是 java 7 或更高版本并且此结果实现了 java.lang.AutoClosable （它可能会这样做），您可以使用自动资源管理！耶！

所以要么手动调用：（`result.close`最好在 finally 块中）或使用 ARM：

```
try (QueryResult> result = engine.query("start n=node({id}) return n;", map("id",0))) {
    // 在这里做事
}

```

可能应该这样做。

# c# - 用户对其中一列进行排序后，重新排列 DataGridView 的订单号列？

> ID：16148191
> 
> 赞同：0
> 
> 时间：2013-04-22T13:20:32.147
> 
> 标签：c#, winforms, datagridview, datagridviewcolumn

我的 DataGridView 有一个名为“Order”的固定列（网格的第一个列），该列应该具有从 1 到 DataGridView 的行数（1、2、3、4、... ,n) 并且此顺序不应更改。

但是当用户点击另一列的标题进行排序时，这可能会改变所有行的顺序，并且顺序列中的值也会相应地改变。（例如，它可以变成 n,...,4,3,2,1 或任何其他可能的顺序，具体取决于用户选择排序的列）。这对用户来说很奇怪。每次用户单击列标题之一进行排序时，我都必须重新填充 order 列的值以将它们重置为 1、2、3、4、...、n。我想知道这是否有标准方法？还是更简单的？

您的帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:50:21.737

您可以使用[DataGridView.Sorted Event](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.sorted.aspx)。

**代码示例**：

```
 private void dataGridView1_Sorted(object sender, System.EventArgs e)
    {
        foreach (DataGridViewRow dataGridViewRow in
                                 dataGridView1.Rows.Cast<DataGridViewRow>())
        {
            dataGridViewRow.Cells["Order"].Value = dataGridViewRow.Index + 1;
        }
    } 
```

# c# - 如何获得枚举标志值的最短表示？

> ID：16148195
> 
> 赞同：3
> 
> 时间：2013-04-22T13:20:44.993
> 
> 标签：c#, .net, algorithm

我想生成可能产生特定枚举值的枚举字段的最短（或最短之一）组合。完成此任务的最佳算法是什么？

例如，假设我有枚举：

```
enum MyEnum
{
    One = 1, 
    Two = 2,
    Three = One | Two,
    Four = 4,
    Six = Two | Four,
    Eight = 8,
    All = One | Two | Four | Eight
 } 
```

现在例如对于`7`我希望我的函数输出的值`"One | Six"`或`"Three | Six"`。

编辑：当然`Three | Four`也是一个有效的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:23:56.033

你基本上要求的是最小集合覆盖，一个被称为 NP Complete 的问题。幸运的是，这并不意味着您无法解决诸如此类的小情况。您还可以`O(logn)`通过贪心算法获得近似值。

如果您的枚举值没有特定的结构，那么对于一般的精确解决方案，您将无法比蛮力做得更好。如果您知道您的枚举具有特定的结构，那么您通常可以通过图形分区或 CSP + 回溯等方式获得更好的结果。

# php - 如何在codeigniter中从rabbitmq php消费者回调中调用模型？

> ID：16148197
> 
> 赞同：1
> 
> 时间：2013-04-22T13:20:48.097
> 
> 标签：php, mysql, codeigniter, rabbitmq, publish-subscribe

我开发了一个 android 应用程序，它订阅一个队列并发布到其他队列。一次它将相同的消息发布到两个不同的队列，其中一个是名为“Queue”的队列，现在我需要从 appfog 实例订阅“Queue”并使用消息并将它们插入 mysql db。

我使用 codeigniter 为上述目的创建了一个 php 独立应用程序。由于某种原因，worker 应用程序失去了与 rabbitmq 的连接。我想知道做到这一点的最佳方法。appfog 上的工作应用程序如何能够维持应用程序重新启动。

我需要用什么样的东西来解决上述问题。

我认为问题不在于rabbitmq连接。它与与mysql插入相关的代码。我检查了我的应用程序的崩溃日志，错误是“Mysql 消失了”。一个 php rabbitmq 消费者的示例具有接收消息和 register_shutdown 的回调。在接收回调中，我不能使用 $this 的代码点火器，因为它超出了范围，我正在使用 get_instance()。我不知道如何从 rabbitmq 客户端调用方法接收回调函数

控制器是

```
<?php

if (!defined('BASEPATH'))
  exit('No direct script access allowed');

include(__DIR__ . '/php-amqplib/config.php');

use PhpAmqpLib\Connection\AMQPConnection;

class Welcome extends CI_Controller {

public function __construct() {
    parent::__construct();
}

public function index() {
    //connect to rabbitmq and consume messages
    //insert messages to mysql
    //$this->messages = array();
    $exchange = "router";
    $queue = "abbiya";

    $conn = new AMQPConnection(HOST, PORT, USER, PASS, VHOST);
    $ch = $conn->channel();

    /*
      name: $queue
      passive: false
      durable: true // the queue will survive server restarts
      exclusive: false // the queue can be accessed in other channels
      auto_delete: false //the queue won't be deleted once the channel is closed.
     */
    $ch->queue_declare($queue, false, true, false, false);

    $ch->queue_bind($queue, $exchange, $queue);

    /*
      queue: Queue from where to get the messages
      consumer_tag: Consumer identifier
      no_local: Don't receive messages published by this consumer.
      no_ack: Tells the server if the consumer will acknowledge the messages.
      exclusive: Request exclusive consumer access, meaning only this consumer can access the queue
      nowait:
      callback: A PHP Callback
     */
    $consumer_tag = "abbiya";

    $ch->basic_recover(true);
    $ch->basic_consume($queue, $consumer_tag, false, false, false, false, function($msg) {
                $message_body = json_decode($msg->body);
                $msg->delivery_info['channel']->
                        basic_ack($msg->delivery_info['delivery_tag']);

                // Send a message with the string "quit" to cancel the consumer.
                if ($msg->body === 'quit') {
                    $msg->delivery_info['channel']->
                            basic_cancel($msg->delivery_info['consumer_tag']);
                }
                $data = array(
                    'sender_id' => $message_body->r,
                    'receiver_id' => $message_body->s,
                    'message_content' => $message_body->m,
                    // 'sent_time' => $message_body->t,
                    'status' => 0
                );
                $ci =& get_instance();
                $ci->Message_model->newMessage($data);
            }
    );

    // Loop as long as the channel has callbacks registered
    while (count($ch->callbacks)) {
        $ch->wait();
    }

    register_shutdown_function(function() use ($ch, $conn) {
                $ch->close();
                $conn->close();
                $this->index();
            }
    );
}

}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-05T20:12:46.017

首先我不得不说用 CodeIgniter 和 php 做一个消费者可能不是一个好主意，除非你添加这样的东西

```
 if( !$this->input->is_cli_request() ){
        show_404(); // So they dont know this is an actual script
        die();
    } 
```

并使用 nohup 从命令行运行或对其进行守护。

您可以使用 codeigniter 的 $this->db->reconnect(); 优雅地重新连接数据库。

我们已经创建了一些消费者，用于使用 php 和 CI 进行测试。我们将回调函数放入一个帮助器中，并添加了一种让 call_back 函数返回 false 的方法，以便消费者在我们完成后停止监听。

对于我们的生产系统，我们使用更适合这项工作的 python、java 或骆驼消费者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T19:01:54.423

在这里添加一个答案，因为自从这个问题最初发布以来，已经在 Codeigniter 上创建了一个新的 RabbitMQ 库并在 Github 上可用

它很容易设置，并且在自述文件中有分步说明：[https ://github.com/romainrg/rabbitmq_client](https://github.com/romainrg/rabbitmq_client)

# java - 在Java中不同时区和不同DST之间转换unix时间戳

> ID：16148198
> 
> 赞同：1
> 
> 时间：2013-04-22T13:20:48.113
> 
> 标签：java, timezone, dst, java.util.date

**问题已解决**外部设备正在计算和发送非标准的 2 小时偏移时间戳，这让我非常困惑并开始了这个线程。**TIMESTAMP 本身不受 TIMEZONES**的影响，时区仅在转换为/从人类可读形式转换时适用。

* * *

我在 UTC 时区有时间戳（从 unix 纪元开始的秒数） - 没有 DST（夏令时）。

我想要使​​用 DST 的“欧洲/布拉格”时区的时间戳（距 unix 纪元的秒数​​）。

我曾经认为 unix 时间戳不受时区的约束，时区仅影响将时间戳转换为人类可读格式的过程。但它看起来不像那样。我越是尝试转换它（使用 Calendar 和 TimeZone 类），我就越困惑和迷失。

此代码不能按预期工作：

```
Calendar cal = GregorianCalendar.getInstance(TimeZone.getTimeZone("UTC"));
cal.setTimeInMillis(ts*1000);
cal.setTimeZone(TimeZone.getTimeZone("Europe/Prague"));
return cal.getTimeInMillis()/1000; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T13:32:45.047

没有办法“转换”时间戳，它始终是从纪元开始的毫秒数。

您可以使用 DateFormat 将时间戳格式化为应用了时区的格式，或者使用 Calendar 来查看应用了时区的小时、分钟和秒。

getTimeInMillis() 获取与您输入的时间戳相同的时间戳，即从纪元开始的毫秒数：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar。 html#getTimeInMillis%28%29](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#getTimeInMillis%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-15T11:30:06.043

这是在时区之间转换纪元的示例代码。

```
public static long convertTimeZone(long lngDate, String fromTimeZone,
        String toTimeZone) {        
    Calendar fromTime = Calendar.getInstance();
    fromTime.setTimeZone(TimeZone.getTimeZone(fromTimeZone));
    fromTime.setTimeInMillis(lngDate);
    Calendar toTime = new GregorianCalendar(
            TimeZone.getTimeZone(toTimeZone));
    toTime.set(Calendar.DATE, fromTime.get(Calendar.DATE));
    toTime.set(Calendar.MONTH, fromTime.get(Calendar.MONTH));
    toTime.set(Calendar.YEAR, fromTime.get(Calendar.YEAR));
    toTime.set(Calendar.HOUR_OF_DAY, fromTime.get(Calendar.HOUR_OF_DAY));
    toTime.set(Calendar.MINUTE, fromTime.get(Calendar.MINUTE));
    toTime.set(Calendar.SECOND, fromTime.get(Calendar.SECOND));
    toTime.set(Calendar.MILLISECOND, fromTime.get(Calendar.MILLISECOND));
    LOG.debug("Converted " + fromTime.getTimeInMillis() + " to "
            + toTime.getTimeInMillis());
    SimpleDateFormat sdf = new SimpleDateFormat(
            "dd-MMM-yyyy HH:mm:ss.SSS z");      
    sdf.setTimeZone(TimeZone.getTimeZone(fromTimeZone));        
    SimpleDateFormat sdf1 = new SimpleDateFormat(
            "dd-MMM-yyyy HH:mm:ss.SSS z");      
    sdf1.setTimeZone(TimeZone.getTimeZone(toTimeZone));
    LOG.debug("Converted " + sdf.format(fromTime.getTime()) + " to " + sdf1.format(toTime.getTime()));
    return toTime.getTimeInMillis();
} 
```

输出：

```
System.out.println(convertTimeZone(new Date().getTime(),"America/New_York","Asia/Singapore"));
Converted 1384514879944 to 1384468079944
Converted 15-Nov-2013 06:27:59.944 EST to 15-Nov-2013 06:27:59.944 SGT 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:29:01.460

它的行为如我所料

```
public static void main(String... ignored) {
    long ts = System.currentTimeMillis() / 1000;
    Calendar cal = GregorianCalendar.getInstance(TimeZone.getTimeZone("UTC"));
    printCalendar(cal);
    cal.setTimeInMillis(ts * 1000);
    printCalendar(cal);
    cal.setTimeZone(TimeZone.getTimeZone("Europe/Prague"));
    printCalendar(cal);
}

public static void printCalendar(Calendar calendar) {
    SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss.SSS ZZZ");
    sdf.setTimeZone(calendar.getTimeZone());
    System.out.println(sdf.format(calendar.getTime()));
} 
```

印刷

```
2013/04/22 13:28:06.451 +0000
2013/04/22 13:28:06.000 +0000
2013/04/22 15:28:06.000 +0200 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:27:12.043

您可以像这样轻松地在两个时区之间转换：

**1.假设这是 EST 时区的日期和时间**

```
String value = "2006-11-28 09:45:12";  
DateFormat df1 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
df1.setTimeZone(TimeZone.getTimeZone("EST")); 
```

**2.解析该值并假设它代表 EST 时区中的日期和时间**

```
Date d = df1.parse(value);     
DateFormat df2 = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");  
df2.setTimeZone(TimeZone.getTimeZone("CET")); 
```

**3.格式化CET时区的日期**

```
System.out.println(df2.format(d)); 
```

# javascript - 使用 JavaScript 制作 HTML 表单时新行不起作用

> ID：16148200
> 
> 赞同：0
> 
> 时间：2013-04-22T13:20:56.613
> 
> 标签：javascript, html

我正在使用以下代码使用 JavaScript 制作 html5 表单。

```
newLine = document.createElement("br");
var optionsForm = document.createElement("form");
optionsForm.setAttribute('method',"post");
optionsForm.setAttribute('action',"submit.php");
var selectColor = document.createElement("select"); //input element, drop-down
selectColor.setAttribute('type',"select");
selectColor.setAttribute('name',"colorMenu");
selectColor.setAttribute('id',"colorMenuID");

// Populate drop-down menu
var option = document.createElement("option");
option.text = "Select Color:";
option.value = "selectColor";
selectColor.appendChild(option);

optionsForm.appendChild(selectColor);
optionsForm.appendChild(newLine); 
```

但是，当我制作新的下拉菜单时，它与旧的在同一行。附加 newLine 元素似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:56:48.133

I figured out how to do it.

```
var menuElement = document.createElement("div");
label = document.createTextNode("Label: ");
menuElement .appendChild(label);
var selectMenu = document.createElement("select"); 
selectMenu.setAttribute('type',"select");
selectMenu.setAttribute('name',"menuName");
selectMenu.setAttribute('id',"menuID");
menuElement.appendChild(selectMenu); 
```

Then I add some options then

```
menuElement.appendChild(newLine);
optionsForm.appendChild(menuElement); 
```

# erlang - 解析从 mochiweb_html 得到的结果

> ID：16148202
> 
> 赞同：2
> 
> 时间：2013-04-22T13:21:10.147
> 
> 标签：erlang, mochiweb

我想从 html 文件（没有 xml）中解析一些内容。

目前我检索结构以使用 mochiweb_html 解析：

```
1> inets:start().
2> {ok, {Status, Headers, Body}} = httpc:request("http://www.google.com").
3> {String, Attributes, Other} = mochiweb_html:parse(Body). 
```

结果是这样的：

```
{<<"html">>,
 [{<<"itemscope">>,<<"itemscope">>},
  {<<"itemtype">>,<<"http://schema.org/WebPage">>}],
 [{<<"head">>,[],
   [{<<"meta">>,
     [{<<"itemprop">>,<<"image">>},
      {<<"content">>,<<"/images/google_favicon_128.png">>}],
     []},
    {<<"title">>,[],[<<"Google">>]},
.... 
```

从从 mochiweb_http 获得的结构中检索网页中具有特定类的特定标签（例如，`<span id="footer">`）的所有元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-23T09:57:10.430

You could use [mochiweb_xpath](https://github.com/retnuh/mochiweb_xpath):

```
> mochiweb_xpath:execute("//span[@id='footer']",
    mochiweb_html:parse(
      "<html><body><span>not this one</span><span id='footer'>but this one</span></body></html>")).
[{<<"span">>,
  [{<<"id">>,<<"footer">>}],
  [<<"but this one">>]}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:40:32.263

这取决于您的性能要求。

mochiweb 结果是一个 3 元组形式，可以很容易地转换为适合[xmerl](http://www.erlang.org/doc/apps/xmerl/xmerl_ug.html#id60740)的输入。大部分工作是将属性名称转换为原子。然后你可以使用[xmerl_xpath](http://www.erlang.org/doc/apps/xmerl/xmerl_ug.html#id60740)来做一些非常灵活的查询。

否则，您可以编写一些不太灵活（但可能更快）的代码来遍历树。

# android - Android WebView - onTouchListener 在滚动页面后停止工作

> ID：16148203
> 
> 赞同：2
> 
> 时间：2013-04-22T13:21:08.600
> 
> 标签：android, webview, scroll, touch-event, ontouchlistener

我正在开发一个显示图像的应用程序（如幻灯片放映），当用户触摸我想在 WebView 中打开网页的图像时。

我遇到的问题是如何监控用户活动？

例如，如果用户不再查看网站，请不要触摸它，滚动或缩放 15 秒我想返回幻灯片放映。

我正在尝试使用 onTouchListener 和 onTouch 方法，该方法在我滚动页面之前一直有效（当我触摸屏幕时，它会调用 3 次 - 分别为 event=ACTION_DOWN/ ACTION_MOVE/ ACTION_UP），当您触摸屏幕滚动页面时，它会被调用两次 (event=ACTION_DOWN/ACTION_MOVE) 并且 onTouchListener 方法不再有效。然后我多次触摸屏幕，onTouch 再也不会打电话了。

我设置 WebView 属性的部分代码：

```
private void setWebViewProperties() {

    mWebView = (WebView) findViewById(R.id.webView);
    mWebView.setWebViewClient(new WebViewClient());
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setBuiltInZoomControls(true);
    mWebView.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            noWebTouchActive = false;
            mHandler.postDelayed(noWebActive, 10000);
            return false;
        }
    });
    mWebView.setVisibility(View.INVISIBLE);
} 
```

有什么想法可以正确识别用户手势并监控他的活动吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-12T04:34:33.893

我认为这是一个错误。看这里：

[https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=36713](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=36713)

我以这种方式解决了禁用 BuiltInZoomControls

```
mWebView.getSettings().setBuiltInZoomControls(false) 
```

# macos - 在不知情的情况下恢复 Couchbase 密码

> ID：16148207
> 
> 赞同：2
> 
> 时间：2013-04-22T13:21:15.823
> 
> 标签：macos, couchbase, password-recovery

我正在使用**mac**，下载了 mac 的社区版。启动应用程序，并打开管理控制台。到目前为止一切顺利，直到我退出。现在我无法再次登录，因为我一开始就不必设置密码。它可能已经在以前的版本上设置了一段时间，但我不确定。

重新安装它不起作用。我一直被弹回到登录屏幕。

按照其他帖子和在线帮助中的建议执行以下命令导致erlang崩溃

```
erl -noinput -eval 'case file:read_file("/Users/testuser/Couchbase Server.app/Contents/Resources/couchbase-core/var/lib/couchbase/config/config.dat") of {ok, B} -> io:format("~p~n", [binary_to_term(B)]) end.' -run init stop | grep cred

Crash dump was written to: erl_crash.dump
init terminating in do_boot () 
```

欢迎任何建议

我一直在尝试在 couchdb ini 文件的 admins 部分添加一个新用户，但它们似乎没有占据上风（密码不会被散列，在读取这些文件时应该这样做）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-09T08:41:01.230

您可以运行一个`cbreset_password`脚本，位于`/Contents/Resources/couchbase-core/bin`您的 CouchBase 服务器应用程序的文件夹中

所以对我来说它在`/Applications/Couchbase Server.app/Contents/Resources/couchbase-core/bin`

只需运行它，您就可以重置该`Administrator`帐户的密码

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-01T14:12:11.473

密码以纯文本形式保存在位于 \var\lib\couchbase 文件夹中的 config.dat 二进制文件中。

您可以搜索字符串“用户名”，然后在它旁边您将看到“密码”字段和密码的纯文本值。

我认为有一个开放的缺陷是有更好的密码存储机制。

可以使用 couchbase-cli 工具更改密码。

> 外壳> ./couchbase-cli cluster-init -c 127.0.0.1:8091 --user=[CURRENT_USERNAME] --password=[CURRENT_PASSWORD] --cluster-init-username=[NEW_USERNAME] --cluster-init-password= [新密码]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T04:55:43.670

在 Mac 上，您可以执行以下步骤

```
sudo ln -s $CB_HOME/Couchbase\ Server.app/Contents/Resources/couchbase-core/lib/ /lib
cd "$CB_HOME/Couchbase Server.app/Contents/Resources/couchbase-core/bin"
./erl -noinput -eval 'case file:read_file("[PATH TO DATA]/Library/Application Support/Couchbase/var/lib/couchbase/config/config.dat") of {ok, B} -> io:format("~p~n", [binary_to_term(B)]) end.' -run init stop | grep creds 
```

CB_HOME 指向你的 Couchbase 安装目录

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-19T16:16:02.700

以防不清楚，因为在上一个答案中没有完全解释，我目前还不允许发表评论。cbreset_password**脚本**是一个**Python 脚本**。

对于 Mac OS，请确保您已安装 Python。此外，还需要 2 条信息，即您尝试重置的 Couchbase 实例的 IP 地址和端口号。因此，对于本地安装，标准 Couchbase 端口为 8091，命令如下所示：

```
python /Applications/Couchbase\ Server.app/Contents/Resources/couchbase-core/bin/cbreset_password 127.0.0.1:8091 
```

# asp.net - 在自定义控件中从服务器端更改 li 的类

> ID：16148208
> 
> 赞同：2
> 
> 时间：2013-04-22T13:21:16.060
> 
> 标签：asp.net, html-lists, server-side, custom-server-controls

嗨，我创建了一个服务器控件，它由 以下所有六个页面组成**`<UL>`** ， 我只想在 下面的所有六个页面中重用我的菜单是控件代码 Asp 代码**`<LI>`**

```
<%@ Control Language="C#" ClassName="Menu" %>
     <ul id="ulSideBar" class="nav nav-list" runat="server">
                <li accesskey="1" id="liDefault" runat="server" **class="active"**>
                    <asp:LinkButton runat="server" ID="lnkDefault" OnClick="lnkDefault_Click">Introduction</asp:LinkButton></li>
                <li accesskey="2" id="liSquad" runat="server">
                    <asp:LinkButton runat="server" ID="lnkSquad" OnClick="lnkSquad_Click">Squad</asp:LinkButton>
                </li>
                <li accesskey="3" id="liGallery" runat="server">
                    <asp:LinkButton runat="server" ID="lnkGallery" OnClick="lnkGallery_Click">Gallery</asp:LinkButton>
                </li>
                <li accesskey="4" id="liMatches" runat="server">
                    <asp:LinkButton runat="server" ID="lnkMatches" OnClick="lnkMatches_Click">Matches</asp:LinkButton>
                </li>
                <li accesskey="5" id="liActivities" runat="server">
                    <asp:LinkButton runat="server" ID="lnkActivities" OnClick="lnkActivities_Click">Activities</asp:LinkButton>
                </li>
                <li accesskey="6" id="liNewsFeed" runat="server">
                    <asp:LinkButton runat="server" ID="lnkNewsFeed" OnClick="lnkNewsFeed_Click">News Feed</asp:LinkButton>
                </li>
            </ul> 
```

我在我的六个页面中使用此控件现在我的问题是如何更改**class=active**无论**`<li>`**我点击哪个，只能通过服务器端

我已经在 Control 的代码隐藏中尝试过这段代码，但它不起作用

```
 protected void lnkDefault_Click(object sender, EventArgs e)
    {
        liDefault.Attributes.Add("class", "active");
        liSquad.Attributes.Remove("class");
        liGallery.Attributes.Remove("class");
        liMatches.Attributes.Remove("class");
        liActivities.Attributes.Remove("class");
        liNewsFeed.Attributes.Remove("class");
        Response.Redirect("Default.aspx");
    }
    protected void lnkSquad_Click(object sender, EventArgs e)
    {
        liDefault.Attributes.Remove("class");
        liSquad.Attributes.Add("class", "active");
        liGallery.Attributes.Remove("class");
        liMatches.Attributes.Remove("class");
        liActivities.Attributes.Remove("class");
        liNewsFeed.Attributes.Remove("class");
        Response.Redirect("Squad.aspx");
    }
    protected void lnkGallery_Click(object sender, EventArgs e)
    {
        liSquad.Attributes.Remove("class");
        liDefault.Attributes.Remove("class");
        liGallery.Attributes.Add("class", "active");
        liMatches.Attributes.Remove("class");
        liActivities.Attributes.Remove("class");
        liNewsFeed.Attributes.Remove("class");
        Response.Redirect("Gallery.aspx");
    }
    protected void lnkMatches_Click(object sender, EventArgs e)
    {
        liDefault.Attributes.Remove("class");
        liSquad.Attributes.Remove("class");
        liGallery.Attributes.Remove("class");
        liMatches.Attributes.Add("class", "active");
        liActivities.Attributes.Remove("class");
        liNewsFeed.Attributes.Remove("class");
        Response.Redirect("Matches.aspx");
    }
    protected void lnkActivities_Click(object sender, EventArgs e)
    {
        liDefault.Attributes.Remove("class");
        liSquad.Attributes.Remove("class");
        liGallery.Attributes.Remove("class");
        liMatches.Attributes.Remove("class");
        liActivities.Attributes.Add("class", "active");
        liNewsFeed.Attributes.Remove("class");
        Response.Redirect("Activities.aspx");
    }
    protected void lnkNewsFeed_Click(object sender, EventArgs e)
    {
        liDefault.Attributes.Remove("class");
        liSquad.Attributes.Add("class", "active");
        liGallery.Attributes.Remove("class");
        liMatches.Attributes.Remove("class");
        liActivities.Attributes.Remove("class");
        liNewsFeed.Attributes.Add("class", "active");
        Response.Redirect("NewsFeed.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:19:50.260

这解决了我的问题。我的问题是我使用了一个自定义控件，`<ul>` `<li>`但是使用该控件的页面有问题，即当用户单击 li 时，它应该将其类更改为活动（class='active'）但由于回发它没有改变
可能如果其他人有这个问题可以使用我的解决方案。我在自定义控件代码隐藏中使用了此功能

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            // switch (Parent.TemplateControl.AppRelativeVirtualPath.Replace("~/Teams/", ""))
            switch (System.IO.Path.GetFileName(Page.Request.Path))
            {
                case "Default.aspx":
                    liDefault.Attributes.Add("class", "active");
                    liSquad.Attributes.Remove("class");
                    liGallery.Attributes.Remove("class");
                    liMatches.Attributes.Remove("class");
                    liActivities.Attributes.Remove("class");
                    liNewsFeed.Attributes.Remove("class");
                    break;
                case "Squad.aspx":
                    liDefault.Attributes.Remove("class");
                    liSquad.Attributes.Add("class", "active");
                    liGallery.Attributes.Remove("class");
                    liMatches.Attributes.Remove("class");
                    liActivities.Attributes.Remove("class");
                    liNewsFeed.Attributes.Remove("class");
                    break;
                case "Gallery.aspx":
                    liSquad.Attributes.Remove("class");
                    liDefault.Attributes.Remove("class");
                    liGallery.Attributes.Add("class", "active");
                    liMatches.Attributes.Remove("class");
                    liActivities.Attributes.Remove("class");
                    liNewsFeed.Attributes.Remove("class");
                    break;
                case "Matches.aspx":
                    liDefault.Attributes.Remove("class");
                    liSquad.Attributes.Remove("class");
                    liGallery.Attributes.Remove("class");
                    liMatches.Attributes.Add("class", "active");
                    liActivities.Attributes.Remove("class");
                    liNewsFeed.Attributes.Remove("class");
                    break;
                case "Activities.aspx":
                    liDefault.Attributes.Remove("class");
                    liSquad.Attributes.Remove("class");
                    liGallery.Attributes.Remove("class");
                    liMatches.Attributes.Remove("class");
                    liActivities.Attributes.Add("class", "active");
                    liNewsFeed.Attributes.Remove("class");
                    break;
                case "NewsFeed.aspx":
                    liDefault.Attributes.Remove("class");
                    liSquad.Attributes.Remove("class");
                    liGallery.Attributes.Remove("class");
                    liMatches.Attributes.Remove("class");
                    liActivities.Attributes.Remove("class");
                    liNewsFeed.Attributes.Add("class", "active");
                    break;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:46:22.943

您可能正在更改类属性，但随后您立即重定向到另一个页面，因此您永远看不到它。重新加载页面时，更改将丢失。

您可能需要将活动页面存储在会话变量中，然后在加载控件时设置活动类。

[编辑]如果您希望控件反映它所在的页面，也许您可​​以使用页面的标题（或其他页面属性之一）：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Parent.Page.Title == "My Title")
    {
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T05:42:47.293

或者您可以通过任何一种方式检查您的浏览器的 URL 并在您的菜单中进行选择

```
string page = Path.GetFileNameWithoutExtension(Request.AppRelativeCurrentExecutionFilePath);
string pageDirectory = Path.GetDirectoryName(Request.AppRelativeCurrentExecutionFilePath);

string category = Request.QueryString.Count>0 ? Request.QueryString[0] : string.Empty;

switch (category)
{
    case "home":
        lnk_Home.CssClass = "selected";
        break;
} 
```

# javascript - 光滑的网格确保数据不会被调用

> ID：16148209
> 
> 赞同：0
> 
> 时间：2013-04-22T13:21:22.897
> 
> 标签：javascript, slickgrid

我正在使用带有以下 javascript 的光滑网格。问题是控件永远不会转到ensureData()。有任何想法吗？

```
grid.onViewportChanged.subscribe(function (e, args) {
    alert('1');
    var vp = grid.getViewport();
    alert('2');
    loader.ensureData(vp.top, vp.bottom);
    alert('3');
});

function ensureData(from, to) 
{          
    alert('55');
    var maxdata = Math.min(999, data.length);
    if (from < 0)
    from = 0;
    if (to > maxdata)
        to = maxdata;

    var fromPage = Math.floor(from / PAGESIZE);
    var toPage = Math.floor(to / PAGESIZE); // look-ahead

    while (fromPage <= toPage) {
        if (data[fromPage * PAGESIZE] == undefined) {
            data[fromPage * PAGESIZE] = null; // null indicates a 'requested but not available yet'

            var order = { "query": searchstr, "offset": (fromPage * PAGESIZE), "count": (((toPage - fromPage) * PAGESIZE) + PAGESIZE), "sort": sortcol, "order": ((sortdir > 0) ? "asc" : "desc") };
            req = $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify(order),

                url: "OrderService.svc/GetOrderList",

                success: onSuccess,
                error: function (jqXHR, textStatus, errorThrown) {
                    if (textStatus != 'abort')
                        onError(fromPage, toPage);
                }
            });
            onDataLoading.notify();
        }
        fromPage++;
    }
} 
```

显示警报 1，然后显示警报 2，然后显示警报（错误加载数据），最后显示警报 3....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:24:48.003

它不应该在页面加载时触发。顾名思义，它会在视口发生变化时触发，即当用户滚动并且视口中的顶部和底部可见行发生变化时。

# mysql - 如何将键映射到 MySQL 选择查询中单个字段的值

> ID：16148210
> 
> 赞同：12
> 
> 时间：2013-04-22T13:21:32.120
> 
> 标签：mysql, sql, replace, mapping, case

假设我们有一个字段状态（`0`对于禁用，`1`对于启用），我们需要直接使用 MySQL 获取文字值，换句话说：如果我们请求查询：

```
select status 
from `<table>` 
```

我们需要该列显示如下：

```
 status
----------
 disabled
 enabled 
```

不如下：

```
 status
--------
   0
   1 
```

知道我们没有 mysql 状态表可以像往常一样加入并获取值。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-22T13:25:03.070

您将使用 case 语句，例如：

```
select (case when status = 0 then 'disabled'
             when status = 1 then 'enabled'
        end)
from . . . 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-28T00:09:27.337

您还可以使用[`if`](http://dev.mysql.com/doc/refman/5.6/en/control-flow-functions.html#function_if)控制流功能（*因为您的`status`字段只能采用两个值 - [0,1]*）：

```
select if(status = 0, 'disabled', 'enabled')
from <...> 
```

# php - 使用 simplexml 删除节点

> ID：16148212
> 
> 赞同：1
> 
> 时间：2013-04-22T13:21:33.973
> 
> 标签：php, simplexml, nodes

我有这个 xhtml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<html>
    <head>
        <meta charset="utf-8"></meta>
    </head>
    <body>
        <nav>
            <ol>
                <li>
                    <a href="cover.xhtml">Cover</a>
                </li>
                <li>
                    <a href="page002.xhtml">P002</a>
                </li>
                <li>
                    <a href="page005.xhtml">P005</a>
                </li>
                <li>
                    <a href="page038.xhtml">P038</a>
                </li>
            </ol>
        </nav>
    </body>
</html> 
```

我在 php 中这样做：

```
 copy("nav.xhtml", "nav.xml");
  $doc1 = simplexml_load_file("nav.xml");
  foreach($doc1->body->nav->ol->li->a as $seg){ 
       $dom=dom_import_simplexml($seg);
       $dom->parentNode->removeChild($dom);
  }
  $doc1->asXml("nav.xhtml"); 
```

结果，只删除了拳头。我想全部删除。为什么不正确？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:31:30.823

尝试这个。

```
foreach($xml->body->nav->ol->li as $items)
{
    unset($items->a);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:50:50.957

这将是 DOM 方法，我认为它可以在将来为您省去麻烦：

```
$dom = new DOMDocument();
$dom->load($file);

$ol = $dom->getElementsByTagName('ol')->item(0);
$list_elements = $ol->getElementsByTagName('li');

foreach($list_elements as $li){
    $links = $li->getElementsByTagName('a');
    foreach($links as $a){
        $li->removeChild($a);
    }
}

$output = $dom->saveXML();

echo $output; 
```

# android - 创建 alertDialog() 时显示错误

> ID：16148223
> 
> 赞同：0
> 
> 时间：2013-04-22T13:21:54.377
> 
> 标签：android, android-sqlite

我是一名初学者 android 开发人员。我有一个数据库表，它计算以下列：_id、fistName、lastName 和 username 设置为唯一的。

当我在我的表中添加另一个人并且用户名已经存在时，我创建了一个 AlertDialog，但是这个 AlertDialog 没有出现。

这是我的源代码：

```
try {
        personRepository.AddPerson(persons);
    } catch (SQLiteConstraintException ex) {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);
        alertDialogBuilder.setTitle("User already exist!");
        alertDialogBuilder.setMessage("Choose another username!")
                .setPositiveButton("Yes",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                dialog.cancel();
                            }
                        });
        AlertDialog alertDialog = alertDialogBuilder.create();
        alertDialog.show();
    } 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:28:29.677

尝试这个

```
AlertDialog alert;
alert=new AlertDialog.Builder(YourActivity.this)
                .setCancelable(false)
                .setMessage("Message")
                .setPositiveButton("Okay", new DialogInterface.OnClickListener()
                {

                    @Override
                    public void onClick(DialogInterface dialog, int which)
                    {
                        // TODO Auto-generated method stub
                        dialog.dismiss();
                    }
                }).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:36:06.167

如果您的`AddPerson`方法调用`insertOrThrow`然后更改

```
catch (SQLiteConstraintException ex) 
```

至

```
catch (SQLException ex) 
```

# r - R中的满载垃圾箱

> ID：16148231
> 
> 赞同：1
> 
> 时间：2013-04-22T13:22:11.617
> 
> 标签：r, categories, bin

我有一个名为“数据”的 DF，大约 10 000 行长（为了说明起见，我们会说 10 000）。我有一个名为“SimDelta”的数字列，我想将其放入 4 个类别（0-0.25、0.25-0.5、0.5-0.75 和 >0.75），我使用这段代码制作：

```
data$SimDeltaClass = 
       ifelse(data$SimDelta>0.75, ">0.75",
       ifelse(data$SimDelta<0.75&data$SimDelta>0.5, "0.5-0.75",
       ifelse(data$SimDelta<0.5&data$SimDelta>0.25, "0.25-0.5",
       ifelse(data$SimDelta<0.25&data$SimDelta>0, "0-0.25", "void")))) 
```

然后将其绘制到四个类别的箱线图中，每个类别中的样本数写在框上方，使用：

```
text(x=1,y=1.07,length(data$rMF[data$SimDeltaClass=="0-0.25"]),cex=0.8,col="black")
text(x=2,y=1.07,length(data$rMF[data$SimDeltaClass=="0.25-0.5"]),cex=0.8,col="black")
text(x=3,y=1.07,length(data$rMF[data$SimDeltaClass=="0.5-0.75"]),cex=0.8,col="black")
text(x=4,y=1.07,length(data$rMF[data$SimDeltaClass==">0.75"]),cex=0.8,col="black") 
```

这部分（*length(data$rMF[data$SimDeltaClass=="0-0.25"])*）应该给出每组的数量。当这 4 个计数相加时，我得到的值超过 14 000，远远超过我预期的 10 000。

为什么这不能正确形成类别？我基于我之前写的一篇非常有效的文章，所以我不确定 R（或我自己）正在努力解决什么问题。

**显然我需要编辑 ifelse() 部分，因为它们包含错误的赋值，但我不知道该怎么做**

*注意：没有错误消息或警告，并且 str() 与有效的版本相同*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:35:53.677

很可能你有 NA 会影响长度。

```
> x = c(1, NA)
> x[x==1]
[1]  1 NA 
```

使用`cut`而不是`ifelse`（不带参数的默认`labels=`更好）。

```
set.seed(123); x = c(runif(10, -1, 2), NA)
y = cut(x, c(-Inf, seq(0, .75, .25), Inf), 
        labels=c("void", "0-0.25", "0.25-0.5", "0.5-0.75", ">0.75")) 
```

导致

```
> y
 [1] void     >0.75    0-0.25   >0.75    >0.75    void     0.5-0.75 >0.75   
 [9] 0.5-0.75 0.25-0.5 <NA>    
Levels: void 0-0.25 0.25-0.5 0.5-0.75 >0.75 
```

用于`table`汇总数据。

```
> table(y)
y
    void   0-0.25 0.25-0.5 0.5-0.75    >0.75 
       2        1        1        2        4 
> table(y, useNA="ifany")
y
    void   0-0.25 0.25-0.5 0.5-0.75    >0.75     <NA> 
       2        1        1        2        4        1 
```

`text`是矢量化的。

```
text(1:4, 1.07, table(y)[2:5]) 
```

完整解决方案（经rg255测试）

```
data$SimDeltaClass <- cut(data$SimDelta, c(-Inf, seq(0, .75, .25), Inf),
    labels=c("void", "0-0.25", "0.25-0.5", "0.5-0.75", ">0.75"))
text(x=1:4, y=1.07, table(data$SimDeltaClass[fdr])[2:5], cex=0.8, col="black") 
```

# selenium - 关闭 selenium 网格实例

> ID：16148235
> 
> 赞同：1
> 
> 时间：2013-04-22T13:22:23.640
> 
> 标签：selenium, selenium-grid

似乎缺乏关于此的文档（或者至少我找不到它）。我希望最终在 Jenkins 上运行大量 Selenium 测试并使用 Selenium Grid2。当我编写测试时，我想知道如何告诉集线器我已经完成了`WebDriver`我正在使用的实例。我应该打电话`webDriver.close()`还是`webDriver.quit()`？当我要求一个`RemoteWebDriver`并且没有可用时会发生什么，我可以设置一个超时时间吗？

或者任何人都可以向我指出一些关于此的文档/博客，我发现的所有内容都告诉你如何启动和运行但停在那里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:20:30.273

用于`webDriver.quit()`优雅地关闭浏览器实例（会话）。`webDriver.stop()`可能会导致异常（我根据自己的经验告诉你，虽然你也可以在[这里](http://code.google.com/p/selenium/issues/list)找到很多关于它的讨论）。

你可以看到[这个](http://code.google.com/p/selenium/wiki/Grid2)和[这个](http://docs.seleniumhq.org/docs/07_selenium_grid.jsp)以供参考。小心区分***Selenium Grid 1***和***Selenium Grid 2***。

为了更好地理解它是如何工作的，看看[WebDriver 的代码](http://grepcode.com/file/repo1.maven.org/maven2/org.seleniumhq.selenium/selenium-remote-driver/2.25.0/org/openqa/selenium/remote/RemoteWebDriver.java#RemoteWebDriver.quit%28%29)会有所帮助。

如果您要求`RemoteWebDriver`（为请求的环境配置）并且没有可用的，则集线器将暂停该请求，直到有一个空闲为止。如果集线器不“了解”具有请求环境的任何节点，您将得到如下信息：

```
Caused by: org.openqa.selenium.WebDriverException: Error forwarding the new session cannot find : {platform=WINDOWS, javascriptEnabled=true, browserName=chrome, version=25.0.1312.56} 
```

测试将不会执行并且会失败。

至于超时配置，[这](http://code.google.com/p/selenium/wiki/Grid2#Configuring_timeouts_%28Version_2.21_required%29)可能会有所帮助。

# actionscript-3 - 无法让 hitTestObject 告诉玩家在哪里

> ID：16148238
> 
> 赞同：0
> 
> 时间：2013-04-22T13:22:37.887
> 
> 标签：actionscript-3, flash

这是场景。

我的游戏有一个 700px x 700px 的区域。这个区域被分成三角形象限，这些三角形象限是由我的 main game.as 中的代码添加的。我的目标是让我的敌人根据玩家所在的象限在不同的位置生成，但是我无法使用追踪功能获得三角形或船输出任何东西。

我在我的主游戏中尝试了类似的功能。

```
function hitBottom(e:Event)
{
    if(ship.hitTestObject(Tri_Bottom));
    {
     trace("hitBottom") 
```

这个在我的船上。

```
function hitBottom(e:Event)
{
    if(this.hitTestObject(Tri_Bottom));
    {
     trace("hitBottom") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:32:10.713

尝试在 hittest 之前在 hitBottom 函数中添加事件侦听器或打印语句。代码可能没有运行。

addEventListener(Event.ENTER_FRAME, hitBottem);

还要记住 hitTestObject 用于屏幕上的碰撞检测 - 这意味着 Tri_Bottem 必须是屏幕上已经存在的对象。

# iphone - 左右动画子视图

> ID：16148239
> 
> 赞同：0
> 
> 时间：2013-04-22T13:22:38.120
> 
> 标签：iphone, animation

我想在 Android 中创建一个类似于 QuickActionBar 的视图，当单击左上角的按钮时，它会简单地打开，但它的子视图看起来好像它们来自右侧，撞到左墙上，然后反弹回来，然后驻扎. 视图正在出现，但我无法为子视图设置动画..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:51:30.510

CAKeyframeAnimation 看起来适合您的问题。我之前为标签在屏幕上滑动编写了此动画功能。为了您的目的，我稍微更新了 xValues，但很可能您将不得不使用它们。此外，在撞墙后，您可能想要使用 scale.y 值，您可以轻松地将其集成到关键帧动画中。

```
+ (void) slideAcrossScreen:(UIView *) view Duration:(CGFloat) duration FromLeft:(BOOL) fromLeft
{
    //This is to make it work with both left-right-left and right-left-right anims.
    CGFloat slideLength = fromLeft ? -view.frame.origin.x : [[UIScreen mainScreen] bounds].size.width - (view.frame.origin.x + view.frame.size.width);

    CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"transform.translation.x"];

    NSArray *xValues =
              @[[NSNumber numberWithFloat:view.bounds.origin.x],
                [NSNumber numberWithFloat:view.bounds.origin.x + 10 * slideLength / 10],
                [NSNumber numberWithFloat:view.bounds.origin.x + 10 * slideLength / 10],
                [NSNumber numberWithFloat:view.bounds.origin.x + 9 * slideLength / 10]];

    [anim setValues:xValues];

    NSArray *timeFrames = 
              @[[NSNumber numberWithFloat:0.0],
                [NSNumber numberWithFloat:0.85],
                [NSNumber numberWithFloat:0.9],
                [NSNumber numberWithFloat:1.0]];

    [anim setKeyTimes:timeFrames];
    [anim setDuration:duration];
    [anim setFillMode:kCAFillModeForwards];
    [anim setRemovedOnCompletion:FALSE];

    [view.layer addAnimation:anim forKey:@"slide"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:21:44.820

我只花了 15 分钟来解决您的问题，因为动画视图总是很有趣的部分。所以这里是片段，你把你的传递`view`给它，它就会动画化。当然，如果你愿意，你可以添加更多。

```
+ (void) animateView : (UIView *) view{
    __block CGRect frame = view.frame;
    frame.origin.x = - 320;
    [view setFrame:frame];
    [UIView animateWithDuration:1.5f animations:^{
        frame.origin.x = 10.0f;
        frame.size.width = 310.0f;
        [view setFrame:frame];
    } completion:^(BOOL finished) {
        if (finished) {
            [UIView animateWithDuration:0.5 animations:^{
                frame.origin.x = 0.0f;
                frame.size.width = 320.0f;
                [view setFrame:frame];
            } completion:^(BOOL finished) {
            }];
        }
    }];
} 
```

干杯。

# ant - 发布到 Artifactory 时如何自动增加 Ivy 修订号

> ID：16148240
> 
> 赞同：2
> 
> 时间：2013-04-22T13:22:38.703
> 
> 标签：ant, ivy, artifactory

有人可以帮我弄清楚如何在发布到工件时使用 IVY 增加修订号。

在网络搜索后，我发现 buildnumber 可以用来执行此操作，但它不起作用，出现以下错误。

```
<ivy:buildnumber organisation="${organisation}" module="${ant.project.name}" />

BUILD FAILED
C:\Workspace\ant\includes\ivy.xml:65:com.ultra_as.ib#ProjectName;1.1.3: java.lang.IllegalStateException: ivy file not found in cache for com.ultra_as.ib#ProjectName;1.1.3: please resolve dependencies before delivering (C:\Users\user1\.ivy2\cache\resolved-org-ProjectName-1.1.3.xml)
Total time 
```

我不确定在这里犯了什么错误。

# android - 防止重复图像保存到 SD 卡

> ID：16148242
> 
> 赞同：4
> 
> 时间：2013-04-22T13:22:39.403
> 
> 标签：android, sharedpreferences, android-sdcard

我有一个列表活动应用程序形成多行。每行打开一个包含视图的活动，其中一个是一个按钮，单击时打开无限图库类（存储在应用程序内的 RES => 可绘制文件夹中的图像），每个图像下方都有按钮，按下时将图像保存到 SD名为 (saved_images) 的文件夹中的 card 目录。

我`SharedPreferences`在画廊类中使用按顺序存储所有图像，效果很好 -

**但我正在尝试：**

1.  **防止重复保存在 SD 卡文件夹 (saved_images) 中的图像：**

    假设您成功保存了 image-1，然后您按下 image-1 下的相同按钮，它将再次保存在 SD 卡文件夹中，所以最后您将两次拥有相同的图像（image-1），

    **所以我想要得到：**当我按下图像下的按钮时，已经保存的 Toast 图像必须上升，因此所有应用程序图像将在 SD 卡文件夹中保存一次。

2.  **重新安装后继续按顺序保存图像：**

    在设备中安装应用程序并将一些图像保存在已在 SD 卡中创建的文件夹 (saved_images) 后，假设您从设备卸载应用程序并将 (saved_images) 文件夹保留在 SD 卡中，然后再次重新安装应用程序并希望保存一些新图像，会发生什么是新图像替换以前保存的图像，

    **但我希望它：**继续按顺序保存以前保存的图像和新图像。

用于将图像保存到 SDcard 的代码：

```
public void onClick(View arg0) {
    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/saved_images");
    if (!myDir.exists()) {
        myDir.mkdirs();
        SharedPreferences saveNumber = mContext.getApplicationContext()
                .getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editorset = saveNumber.edit();
        editorset.putInt("lastsavednumber", 0);
        editorset.commit();
    }
    bm = BitmapFactory.decodeResource(mContext.getResources(),
            images[itemPos]);
    holder.image.setImageBitmap(bm);

    SharedPreferences savedNumber = mContext.getSharedPreferences(
            PREFS_NAME, 0);
    int lastSavedNumber = savedNumber.getInt("lastsavednumber", 0);
    lastSavedNumber++;
    String fname = "Image-" + lastSavedNumber + ".png";
    File file = new File(myDir, fname);
    if (file.exists()) {
        file.delete();
    }
    try {
        FileOutputStream out = new FileOutputStream(file);
        bm.compress(Bitmap.CompressFormat.PNG, 100, out);
        out.flush();
        out.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    SharedPreferences saveNumber = mContext.getApplicationContext()
            .getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editorset = saveNumber.edit();
    editorset.putInt("lastsavednumber", lastSavedNumber);
    editorset.commit();
    Toast.makeText(mContext, "Saved", Toast.LENGTH_SHORT).show();
    vi.setTag(holder);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T10:27:15.413

您可以在保存图像时检查图像是否已经存在。如果您要保存具有不同名称的图像，则将图像矩阵与保存的图像矩阵进行比较，如果它与任何图像矩阵匹配，则显示 Toast 消息。

其次，如果文件夹已经存在，那么您没有删除它。n 当您重新安装应用程序时，文件夹的内容将保留在那里。

试试这个代码来检查图像是否相同我得到这个代码一个 SO 答案

```
bool imagesAreEqual(Image i1, Image i2)
{

    if (i1.getHeight() != i2.getHeight) return false;
    if (i1.getWidth() != i2.getWidth) return false;

    for (int y = 0; y < i1.getHeight(); ++y)
       for (int x = 0; x < i1.getWidth(); ++x)
            if (i1.getPixel(x, y) != i2.getPixel(x, y)) return false;

    return true;
} 
```

对于代码中的文件夹问题，如果文件夹存在，您没有删除文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T17:38:44.960

要从文件夹中获取最后一个文件名，您可以：

```
String directory = "/parent/of/saved_images/";
File savedImagesDir = new File(directory, "saved_images");
if (savedImagesDir.mkdirs() && savedImagesDir.isDirectory()) {
    // you just created the dir
} else {
    File[] files = savedImagesDir.listFiles();
    if (files == null) {
        // oops savedImagesDir is not a directory
    } else {
        int max = -1;
        Pattern p = Pattern.compile("-[\\d]+");
        for (File file : files) {
            Log.w("file", file.getName());
            Matcher matcher = p.matcher(file.getName());
            if (matcher.find()) {
                final String group = matcher.group();
                final String[] split = group.split("-");
                Log.w("group", file.getName());
                Log.w("split", split[1]);
                int curent = Integer.parseInt(split[1]);
                Log.w("curent", curent + "");
                if (curent > max) max = curent;
            }
        }
        Log.w("max", max + "");
        SharedPreferences saveNumber = mContext.getApplicationContext()
                    .getSharedPreferences(PREFS_NAME, 0);
        SharedPreferences.Editor editorset = saveNumber.edit();
        editorset.putInt("lastsavednumber", 0);
        editorset.commit();
    }
} 
```

卸载后首次运行活动时，您需要执行此操作。当然，如果用户把东西放在那里或者你改变你的命名方案等，我使用的正则表达式可能会失败。你必须小心地这样做

至于“不再保存”，您应该（在共享首选项中）在 saved_images 中存储照片的校验和（哈希）。每当您尝试将文件放入其中时，计算其哈希值，如果哈希值已存储，则显示您的吐司（“图像已保存”），否则将其放入。

为了让您开始使用 Java 中的哈希，请查看[此处](https://stackoverflow.com/questions/304268/getting-a-files-md5-checksum-in-java)和[此处](http://www.rgagnon.com/javadetails/java-0416.html)

# javascript - 如何纠正测试用例中猫鼬的“connection.readyState”从“正在连接”到“已连接”？

> ID：16148243
> 
> 赞同：0
> 
> 时间：2013-04-22T13:22:40.967
> 
> 标签：javascript, node.js, express, mongoose, mocha.js

我在猫鼬中创建了一个用户（注册）模型。该模型可从 mocha 中创建的测试用例以及前端的注册表单中访问。新用户可以通过前端从注册表中保存，但是用mocha编写的测试用例不能保存。

当我检查代码时，测试用例上`connection.readyState`的猫鼬是`2`（ ）和用户注册表单上的（ ）。`connecting``1``connected`

**模型/users.js**

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://localhost/test');

console.log('conn ready:  '+mongoose.connection.readyState);
// "conn ready: 2"  i.e connecting for test case as well as from user register form 

var Schema = mongoose.Schema,
    ObjectId = Schema.ObjectId,
    UserSchema = new Schema({
       // schemas
    });

UserSchema.statics.newUser = function (uname, email, pass) {
    var instance = new User();
    instance.uname  = uname;
    instance.email  = email;
    instance.pass   = pass;
    console.log("conn state: "+mongoose.connection.readyState); 
    // "conn state: 2"  i.e connecting for test case. But  1  i.e connected for  user register form 

    instance.save(function (err) {
      // Do rest
    });
};

var User = mongoose.model('User', UserSchema);

exports.User = User; 
```

如何纠正`connection.readyState`测试用例中的猫鼬？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:31:00.113

问题在于`it`mocha 测试文件中方法的参数传递。我忘记将方法的`done`参数`it`放在测试用例中，并且在测试用例结束时没有调用传递的函数`done()`。

```
describe('User', function () {
    it('new user create', function (done) {
                                    ^^^^   
        User.newUser(
            'test','test@test.com', 'test123',
            function (err, user) {
                should.not.exist(err);
                done();
                ^^^^^^
            }
        );
    });
}); 
```

# razor - 在 CentOS 上使用 Razor 视图运行 ServiceStack

> ID：16148251
> 
> 赞同：2
> 
> 时间：2013-04-22T13:23:14.467
> 
> 标签：razor, centos, servicestack, mod-mono

我从[https://github.com/ServiceStack/RazorRockstars.git](https://github.com/ServiceStack/RazorRockstars.git)克隆了 RazorRockstars 项目，并验证它在 Windows 上运行。现在我想用 Mono 2.10.8 将它部署到 Linux CentOS 6.3。我遵循了本教程： http: [//pastebin.com/TBf3NWTw](http://pastebin.com/TBf3NWTw)

问题是我无法获得运行 Razor 视图的解决方案。

我的 mod_mono.conf 文件如下所示：

```
<IfModule !mod_mono.c>
  LoadModule mono_module /usr/lib/httpd/modules/mod_mono.so
</IfModule>

<IfModule mod_headers.c>
   Header set X-Powered-By "Mono"
</IfModule>

AddType application/x-asp-net .aspx
AddType application/x-asp-net .cshtml
AddType application/x-asp-net .asmx
AddType application/x-asp-net .ashx
AddType application/x-asp-net .asax
AddType application/x-asp-net .ascx
AddType application/x-asp-net .soap
AddType application/x-asp-net .rem
AddType application/x-asp-net .axd
AddType application/x-asp-net .cs
AddType application/x-asp-net .vb
AddType application/x-asp-net .master
AddType application/x-asp-net .sitemap
AddType application/x-asp-net .resources
AddType application/x-asp-net .skin  
AddType application/x-asp-net .browser
AddType application/x-asp-net .webinfo
AddType application/x-asp-net .resx
AddType application/x-asp-net .licx
AddType application/x-asp-net .csproj
AddType application/x-asp-net .vbproj
AddType application/x-asp-net .config
AddType application/x-asp-net .Config
AddType application/x-asp-net .dll
DirectoryIndex index.aspx
DirectoryIndex Default.aspx
DirectoryIndex default.cshtml
DirectoryIndex default.aspx
MonoServerPath "/opt/mono/bin/mod-mono-server4" 
```

如果我将 Default.aspx 文件添加到 /var/www/RazorRockstars 文件夹，我可以在我的屏幕上查看主页，但如果我单击一个链接 (Henrix)，我最终会收到一条错误消息消息，告诉我“请求的 URL在此服务器上找不到 /stars/dead/hendrix。”

这可能是一个简单的解决方案。我花了几个小时在谷歌上搜索没有解决方案的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:28:42.780

我们使用[Nginx/FastCGIMono 自己为单声道 ASP.NET 站点提供服务](https://stackoverflow.com/a/12188358/85785)，尽管在 mod_mono 配置层中处理 razor 文件扩展名映射并没有什么特别需要做的事情，您需要做的就是确保请求通过ServiceStack ASP.NET 主机。

### 配置它，以便请求通过 ServiceStack

目标应该只是确保请求通过 ServiceStack 进行处理（ServiceStack 将在到达后处理其余的请求），因此您应该通过指定任何可能阻止它的中间件层配置来避免阻碍它。

## razor.servicestack.net 的 ServiceStack 的 Nginx + FastCGI Mono 配置

这是 ServiceStack 的 nginx conf，我们使用 Nginx（在 Ubuntu 上）托管[razor.servicestack.net](http://razor.servicestack.net)，它位于单独的配置文件中`/etc/nginx/sites-available/servicestack.net`：

```
server {
    listen 0.0.0.0:80;
    server_name razor.servicestack.net;
    access_log /var/log/nginx/servicestack.net.log;

    root /home/mythz/src/RazorRockstars/src/RazorRockstars.WebHost;

    #get nginx to handle static files for better performance
    location /img/ {
       alias /home/mythz/src/RazorRockstars/src/RazorRockstars.WebHost/img/;
    }    
    location ~* \.(ico|pdf|flv|swf|exe|html|htm|txt|css|js) {
       add_header        Cache-Control public;
       add_header        Cache-Control must-revalidate;
       expires           1d;
    } 

    #proxy all requests to monofastcgi backend + specify supported default documents
    location / {
        index index.html index.htm index.aspx default.htm Default.htm default.aspx Default.aspx Default.ashx default.cshtml;
        fastcgi_pass  127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        include /etc/nginx/fastcgi_params;
    }
} 
```

这是我们用来指定我们保留的所有 ASP.NET Web 应用程序的 Mono FastCGI 配置文件`/etc/init.d/mono-fastcgi/ServiceStack.webapp`：

```
<apps>
<web-application>
        <name>RazorRockstars</name>
        <vhost>razor.servicestack.net</vhost>
        <vport>80</vport>
        <vpath>/</vpath>
        <path>/home/mythz/src/RazorRockstars/src/RazorRockstars.WebHost</path>
</web-application>
...
<apps> 
```

最后，这是我们运行的 fastcgi 命令，它是`ServiceStack.webapp`上面指定的托管所有 Mono ASP.NET 站点的进程：

```
/usr/bin/fastcgi-mono-server4 --appconfigdir /etc/init.d/mono-fastcgi \
/socket=tcp:127.0.0.1:9000 /logfile=/var/log/mono/fastcgi.log 
```

该指令表示托管目录中任何FastCGI Mono 配置文件中`--appconfigdir /etc/init.d/mono-fastcgi`包含的所有 ASP.NET Web 应用程序。`*.webapp``/etc/init.d/mono-fastcgi`

### 引擎盖下发生了什么

当一个请求`razor.servicestack.net`通过**端口 80**时，它由 nginx 处理，这与`server_name razor.servicestack.net;`.

该指令告诉**nginx**`location / { .. }`将所有后备路由转发到由.**`fastcgi_pass 127.0.0.1:9000;`**

 **该请求现在由 FastCGI Mono 处理，它定向到标识为 ASP.NET Web 应用程序`<vhost>razor.servicestack.net</vhost>`，因为 ServiceStack 处理程序[安装在 / 根路径](http://www.servicestack.net/ServiceStack.Hello/#rootpath)，ServiceStack 最终处理请求。**

# android - 如何更改 Android Sherlock FragmentTabsPager 选项卡的文本大小和字体？

> ID：16148253
> 
> 赞同：1
> 
> 时间：2013-04-22T13:23:15.377
> 
> 标签：android, actionbarsherlock, android-tabhost, android-style-tabhost

我在我的 Android 项目中使用了 Sherlock 库，我想让选项卡中的文本大小更小一些。

这是 FragmentTabsPager.java

```
package com.actionbarsherlock.sample.fragments;

import java.util.ArrayList;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TabHost;
import android.widget.TabWidget;
import com.actionbarsherlock.app.SherlockFragmentActivity;

/**
 * Demonstrates combining a TabHost with a ViewPager to implement a tab UI
 * that switches between tabs and also allows the user to perform horizontal
 * flicks to move between the tabs.
 */
public class FragmentTabsPager extends SherlockFragmentActivity {
    TabHost mTabHost;
    ViewPager  mViewPager;
    TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        setTheme(SampleList.THEME); //Used for theme switching in samples
        super.onCreate(savedInstanceState);

        setContentView(R.layout.fragment_tabs_pager);
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();

        mViewPager = (ViewPager)findViewById(R.id.pager);

        mTabsAdapter = new TabsAdapter(this, mTabHost, mViewPager);

        mTabsAdapter.addTab(mTabHost.newTabSpec("simple").setIndicator("Messages"),
                FragmentStackSupport.CountingFragment.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("contacts").setIndicator("History"),
                LoaderCursorSupport.CursorLoaderListFragment.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("custom").setIndicator("Contacts"),
                LoaderCustomSupport.AppListFragment.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("throttle").setIndicator("Dialpad"),
                LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);
        mTabsAdapter.addTab(mTabHost.newTabSpec("throttle").setIndicator("More"),
                LoaderThrottleSupport.ThrottledLoaderListFragment.class, null);

        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putString("tab", mTabHost.getCurrentTabTag());
    }

    /**
     * This is a helper class that implements the management of tabs and all
     * details of connecting a ViewPager with associated TabHost.  It relies on a
     * trick.  Normally a tab host has a simple API for supplying a View or
     * Intent that each tab will show.  This is not sufficient for switching
     * between pages.  So instead we make the content part of the tab host
     * 0dp high (it is not shown) and the TabsAdapter supplies its own dummy
     * view to show as the tab content.  It listens to changes in tabs, and takes
     * care of switch to the correct paged in the ViewPager whenever the selected
     * tab changes.
     */
    public static class TabsAdapter extends FragmentPagerAdapter
            implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {
        private final Context mContext;
        private final TabHost mTabHost;
        private final ViewPager mViewPager;
        private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

        static final class TabInfo {
            private final String tag;
            private final Class<?> clss;
            private final Bundle args;

            TabInfo(String _tag, Class<?> _class, Bundle _args) {
                tag = _tag;
                clss = _class;
                args = _args;
            }
        }

        static class DummyTabFactory implements TabHost.TabContentFactory {
            private final Context mContext;

            public DummyTabFactory(Context context) {
                mContext = context;
            }

            @Override
            public View createTabContent(String tag) {
                View v = new View(mContext);
                v.setMinimumWidth(0);
                v.setMinimumHeight(0);
                return v;
            }
        }

        public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
            super(activity.getSupportFragmentManager());
            mContext = activity;
            mTabHost = tabHost;
            mViewPager = pager;
            mTabHost.setOnTabChangedListener(this);
            mViewPager.setAdapter(this);
            mViewPager.setOnPageChangeListener(this);
        }

        public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
            tabSpec.setContent(new DummyTabFactory(mContext));
            String tag = tabSpec.getTag();

            TabInfo info = new TabInfo(tag, clss, args);
            mTabs.add(info);
            mTabHost.addTab(tabSpec);
            notifyDataSetChanged();
        }

        @Override
        public int getCount() {
            return mTabs.size();
        }

        @Override
        public Fragment getItem(int position) {
            TabInfo info = mTabs.get(position);
            return Fragment.instantiate(mContext, info.clss.getName(), info.args);
        }

        @Override
        public void onTabChanged(String tabId) {
            int position = mTabHost.getCurrentTab();
            mViewPager.setCurrentItem(position);
        }

        @Override
        public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        }

        @Override
        public void onPageSelected(int position) {
            // Unfortunately when TabHost changes the current tab, it kindly
            // also takes care of putting focus on it when not in touch mode.
            // The jerk.
            // This hack tries to prevent this from pulling focus out of our
            // ViewPager.
            TabWidget widget = mTabHost.getTabWidget();
            int oldFocusability = widget.getDescendantFocusability();
            widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
            mTabHost.setCurrentTab(position);
            widget.setDescendantFocusability(oldFocusability);
        }

        @Override
        public void onPageScrollStateChanged(int state) {
        }
    }
} 
```

这是相应的布局xml：

```
 <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
</TabHost> 
```

我在这里尝试了解决方案[https://github.com/JakeWharton/ActionBarSherlock/issues/401](https://github.com/JakeWharton/ActionBarSherlock/issues/401)
但是，它不起作用！

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:28:27.197

我在自定义标签时遇到了类似的问题。下面的代码更改了标签颜色、高度和文本颜色。希望它会有所帮助。

```
 View currentView;

        final int height = 60;
        for (int i = 0; i < tabChildrenCount; i++) {
            currentView = mTabHost.getTabWidget().getChildAt(i);
            LinearLayout.LayoutParams currentLayout = (LinearLayout.LayoutParams) currentView.getLayoutParams();
            currentLayout.setMargins(0, 2, 2, 0);
           mTabHost.getTabWidget().setStripEnabled(true);
           setTabColor(mTabHost);
          mTabHost.getTabWidget().getChildAt(i).getLayoutParams().height = height;

        final TextView tv = (TextView) mTabHost.getTabWidget().getChildAt(i).findViewById(android.R.id.title);
        tv.setTextColor(Color.parseColor("#FFFFFF"));
        if ( tv instanceof TextView ) {
          // just in case check the type

          // center text
          ((TextView) tv).setGravity(Gravity.CENTER);
          // wrap text
          ((TextView) tv).setSingleLine(false);
          // explicitly set layout parameters
          tv.getLayoutParams().height = ViewGroup.LayoutParams.MATCH_PARENT;
          tv.getLayoutParams().width = ViewGroup.LayoutParams.WRAP_CONTENT;
      }
        }

    public static void setTabColor(TabHost tabhost) {
for(int i=0;i<tabhost.getTabWidget().getChildCount();i++)
{
    tabhost.getTabWidget().getChildAt(i).setBackgroundColor(Color.parseColor("#558FBB")); //unselected
}
tabhost.getTabWidget().getChildAt(tabhost.getCurrentTab()).setBackgroundColor(Color.parseCol

or("#236B8E")); // selected
} 
```

# java - 有一种工作合并排序，但不完全是，有人能告诉我我做错了什么吗？

> ID：16148257
> 
> 赞同：0
> 
> 时间：2013-04-22T13:23:26.073
> 
> 标签：java, arrays, sorting

首先，我想从我的方法背后的推理开始。我的想法是我将输入一个偶数或奇数的数组。该数组将被分解为一个二维数组，其长度为原始数组的长度，每个索引都有一个大小为 1 的数组。然后我将继续将索引合并在一起。这适用于大小为 2、4、8、16 的长度。现在，我不得不稍微编辑我的方法，因为 3、5、6、7 不起作用。现在，我的问题是即使它们有效，但并非所有案例都有效。例如，长度 25 不能正确返回。下面是我的代码：

```
/**
* A method to perform a merge sort
* @param array The array being fed in
*/
public static int[] mergeSort(int[] array)
{
  if (array.length == 1)
  {
     return array;
  }

  int size = array.length;
  int[][] miniArrayList = new int[size][1];

  for (int index = 0; index < array.length; index++)
  {
     miniArrayList[index][0] = array[index];
  }

  while (miniArrayList.length > 1)
  {
     if (miniArrayList.length % 2 == 0)
     {
        miniArrayList = mergeEven(miniArrayList);
     }
     else
     {
        miniArrayList[0] = mergeOdd(miniArrayList);
     }
  }
  return miniArrayList[0];
} 
```

我对上述方法的想法是，我输入一个数组，将其分解，然后一点一点地合并数组，直到我有一个大小为 1 的排序数组。上面的方法调用以下方法：

```
private static int[][] mergeEven(int[][] array)
{
  int[][] tempSortList = new int[array.length / 2][];
  int tempIndex = 0;
  for (int index = 0; index < array.length; index += 2)
  {
     tempSortList[tempIndex] = merge(array[index], array[index + 1]);
     if (tempIndex != tempSortList.length)
     {
        tempIndex++;
     }
  }
  array = tempSortList;
  return array;
}

private static int[] mergeOdd(int[][] array)
{
  /**
   * The concept is to call the even merge method on the even part
   * of the list and then once I get to one array, I merge that array
   * with the extra array.
   */
  int[][] localArray = new int[array.length - 1][1];
  int[][] extra = new int[1][1];

  for (int index = 0; index < localArray.length; index++)
  {
     localArray[index][0] = array[index][0];
  }

  extra[0][0] = array[array.length - 1][0];

  int[][] tempSortList = new int[localArray.length / 2][];
  int tempIndex = 0;
  for (int index = 0; index < localArray.length; index += 2)
  {
     tempSortList[tempIndex] = merge(localArray[index], localArray[index + 1]);
     if (tempIndex != tempSortList.length)
     {
        tempIndex++;
     }
  }
  localArray = tempSortList;

  return localArray[0] = merge(localArray[0], extra[0]);
} 
```

这是不言自明的，但以防万一。由于数组是奇数或偶数，因此上述方法的排序方式不同。最后，这些方法调用实际的合并方法（我认为这可行）：

```
/**
* A merge method to merge smaller arrays to bigger
* arrays
* @param arrayOne The first array being fed in
* @param arrayTwo The second array being fed in
* @return A new integer array which is the sum of the
* length of the two arrays
*/
private static int[] merge(int[] arrayOne, int[] arrayTwo)
{
  /*
   * To make a proper method that deals with odd array sizes
   * look into seeing if it odd, only merging length of the array -1
   * and then once that is all merged merge that array with the last part of the array
   */
  //Creating the size of the new subarray
  int[] mergedArray;

  if (arrayOne.length % 2 == 0 && arrayTwo.length % 2 == 0)
  {
     int size = arrayOne.length;
     int doubleSize = 2 * size;
     mergedArray = new int[doubleSize];

     //Positions of each array
     int posOne = 0;
     int posTwo = 0;
     int mergeIndex = 0;

     while (posOne < size && posTwo < size)
     {
        if (arrayOne[posOne] < arrayTwo[posTwo])
        {
           mergedArray[mergeIndex] = arrayOne[posOne];
           mergeIndex++;
           posOne++;
        }
        else
        {
           mergedArray[mergeIndex] = arrayTwo[posTwo];
           mergeIndex++;
           posTwo++;
        }
     }

     if (posOne == size)
     {
        for (int rest = posTwo; rest < size; rest++)
        {
           mergedArray[mergeIndex] = arrayTwo[rest];
           mergeIndex++;
        }
     }
     else
     {
        for (int rest = posOne; rest < size; rest++)
        {
           mergedArray[mergeIndex] = arrayOne[rest];
           mergeIndex++;
        }
     }

  }
  else
  {
     int arrayOneSize = arrayOne.length;
     int arrayTwoSize = arrayTwo.length;
     int newArraySize = arrayOneSize + arrayTwoSize;
     mergedArray = new int[newArraySize];

     //Position in each array
     int posOne = 0;
     int posTwo = 0;
     int mergeIndex = 0;

     while (posOne < arrayOneSize && posTwo < arrayTwoSize)
     {
        if (arrayOne[posOne] < arrayTwo[posTwo])
        {
           mergedArray[mergeIndex] = arrayOne[posOne];
           mergeIndex++;
           posOne++;
        }
        else
        {
           mergedArray[mergeIndex] = arrayTwo[posTwo];
           mergeIndex++;
           posTwo++;
        }
     }
     if (posOne == arrayOneSize)
     {
        mergedArray[mergeIndex] = arrayTwo[posTwo];
        mergeIndex++;
     }
     else
     {
        for (int rest = posOne; rest < arrayOneSize; rest++)
        {
           mergedArray[mergeIndex] = arrayOne[rest];
           mergeIndex++;
        }
     }

  }

  return mergedArray;
} 
```

所以我的问题是，我正确输入的任何数组大小，它只适用于某些大小。我已经阅读了一些文章，但我的实现与我所看到的大多数情况截然不同，这就是我在这里发布的原因。我不想只是复制一个工作的，我想了解我做错了什么，以便我可以修复它。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:44.217

Your bigger problem is that your algorithm is way too complicated, not to mention inefficient for really large arrays.

I'm assuming you're doing this as an academic exercise, but whenever you get it working check out java.util.Arrays.mergeSort (private method) for an example.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:37:24.983

你的问题在逻辑上`merge`。通过使用线

```
int size = arrayOne.length; 
```

您假设两个数组的长度相同。但是，在不均匀的情况下，并非所有数组都具有相同的长度。

将其更改为两种不同的大小，代码应该没问题。

# .net - 在 Visual Studio 2012 上卸载 silverlight 项目

> ID：16148259
> 
> 赞同：3
> 
> 时间：2013-04-22T13:23:31.130
> 
> 标签：.net, visual-studio-2010, silverlight, visual-studio-2012

在 Visual Studio 2012 中打开我的解决方案，我想构建然后卸载我不需要的项目，就像我在 vs 2010 中所做的那样。

奇怪的是，每次我卸载 Silverlight 项目、构建 xaps 时，都会从托管它们的 ASP .NET 项目中消失。因此，我需要重新加载解决方案的所有项目以在运行时找到 xaps。

我是否缺少有关将 Visual Studio 2010 sln 迁移到 2012 的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:16:39.490

在 web 项目属性中，位置定义如下所示。当您卸载项目后，清理目录工作后无法构建和清理。只需将您的 xap 放在其他地方。

![在此处输入图像描述](https://i.stack.imgur.com/NlIPi.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T06:58:12.510

与其卸载以获得构建时间，为什么不让 Visual Studio 在构建时通过工具栏 Build -> Configuration Manager -> 取消选中要跳过的项目来跳过它们。

# android - 禁用演示文稿的隐藏（辅助屏幕）

> ID：16148275
> 
> 赞同：5
> 
> 时间：2013-04-22T13:24:22.750
> 
> 标签：android, service, presentation

我正在做一个项目，该项目应该在辅助显示器（API 4.2）上显示一个小演示。到目前为止一切正常。但是，如果我关闭应用程序，我将无法阻止演示文稿被关闭。我想创建一个应用程序，它正在启动一个正在初始化演示文稿的后台服务。这样用户只会在状态栏中看到一个通知图标，但服务正在将内容流式传输到辅助显示器。

如果这可以实现，有什么想法吗？我用后台服务尝试过，但不知道我应该使用哪个上下文。试过了

```
getApplicationContext() 
```

但后来我得到了一个例外：

```
Unable to add window -- token null is not for an application 
```

如果我使用像这样的静态方法`getAppContext()`（我知道这样一个丑陋的黑客），它将显示演示文稿，但如果我关闭应用程序也会隐藏它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-30T19:13:56.593

创建一个使用 Context.createDisplayContext(Display) 为您的辅助显示获取新窗口管理器的服务 - 这就是 Presentation 的工作方式

以这个链接为例： [http ://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/com/android/server/LoadAverageService.java.htm](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/com/android/server/LoadAverageService.java.htm)

在 onCreate() 中，而不是获取 WindowManagerImpl：

```
public void onCreate(){
    ... 
    WindowManagerImpl wm = (WindowManagerImpl)getSystemService(WINDOW_SERVICE);
    wm.addView(mView, params); 
} 
```

调用这样的方法：

```
private void addView(WindowManager.LayoutParams params){
    DisplayManager dm = (DisplayManager) getApplicationContext().getSystemService(DISPLAY_SERVICE);
    if (dm != null){
        Display dispArray[] = dm.getDisplays(); 

        if (dispArray.length>0){
            Context displayContext = getApplicationContext().createDisplayContext(dispArray[1]);
            WindowManager wm = (WindowManager)displayContext.getSystemService(WINDOW_SERVICE);
            wm.addView(mView, params);
        }
    }
} 
```

您的视图将被添加到辅助显示屏，并且由于它由服务运行，因此您在主显示屏上运行的活动不会暂停

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-22T13:26:27.033

> 如果这可以实现，有什么想法吗？

由于`Presentation`是 的子类，因此只有当您将活动托管在前台时`Dialog`，您`Presentation`才能看到它。

* * *

**更新**

icarmel 的答案有效，尽管它缺少一些细节。[我的CWAC-Presentation 库](https://github.com/commonsguy/cwac-presentation)中有一个`PresentationService`现在提供该技术的完整工作实现。要在我对 icarmel 答案的评论中回答我的问题，请使用in ，这又需要许可（不幸的是）。`WindowManager.LayoutParams.TYPE_SYSTEM_ALERT``WindowManager.LayoutParams``SYSTEM_ALERT_WINDOW`

# delphi - 将 TMenuItem 实例分配给另一个实例时出现 EConvertError

> ID：16148277
> 
> 赞同：4
> 
> 时间：2013-04-22T13:24:32.603
> 
> 标签：delphi, delphi-xe2

在我的一个应用程序中，下拉菜单和弹出菜单共享一些菜单项（它们是动态构建的），所以我想我可以`TMenuItem`使用以下代码将实例添加到两个菜单中：

```
MI := TMenuItem.Create(nil);
{ set MI action }
DropDownMenu.Add(MI);
PopupMenu.Items.Add(MI); 
```

错误的。我收到了两次插入的`EMenuError`消息*菜单*。理性的，所以我改变了我的代码，使用这个代码有我的菜单项的两个实例：

```
MI := TMenuItem.Create(nil);
{ set MI action }
PopupMenu.CreateMenuItem.Assign(MI);
DropDownMenu.Add(MI); 
```

又错了。我收到一条`EConvertError`消息：*无法将 TMenuItem 分配给 TMenuItem*。我做错什么了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:48:06.730

这是一个常见的错误信息。Delphi 中的大多数可视化组件都不会覆盖`TPersistent.Assign`. 当该方法未被覆盖时，默认实现将接管，它只是抛出一个异常并填写源和目标对象的类名。我认为它没有实现，因为通常不清楚应该复制哪些属性，所以决定权留给你，作为程序员。

如果你创建你正在使用的类的后代，你可以实现`Assign`或`AssignTo`复制你想要的所有属性，但这可能不值得付出努力。相反，编写一个进行复制的函数可能是最简单的：

```
procedure AssignMenuItem(Target, Source: TMenuItem); 
```

对于菜单和按钮，最好的解决方案是使用`TAction`. 分配操作的标题、图标、帮助 ID 和事件处理程序，然后将该操作与需要具有相同行为的所有按钮和菜单项相关联。他们都可以共享相同的操作。运行时对动作属性的更改将自动反映在关联的可视控件中。

# ruby - 使用 Gherkin 测试 XML 输入

> ID：16148284
> 
> 赞同：3
> 
> 时间：2013-04-22T13:24:58.430
> 
> 标签：ruby, cucumber, gherkin

我应该如何在 Gherkin 中编写测试 XML 进入系统的 Cucumber 测试？

我有一个追逐我的尾巴的时刻，试图弄清楚为什么我的 XML 解析器在查看这样的内容时会抛出“错误的结束标记”错误：

```
Scenario Outline:
  When I send this XML: <xml>
  Then my app says <hi>

  Examples:
    | xml                               | hi              |
    | <testing><hi>world</hi></testing> | BREAKIN' UR XML | 
```

Gherkin 解释器（在 Ruby 中）查看`<xml>`were`xml = <testing><hi>world</hi></testing>`和替代行`<hi>`，进行最终测试：

```
Scenario:
  When I send this XML: <testing>BREAKIN' UR XMLworld</hi></testing>
  The my app says BREAKIN' UR XML 
```

显然不是我想要做的！

这让我觉得有一种更好的方法可以以示例格式发送更大但重要的代码片段（这样它就不会被 Gherkin 的替代品取代）

有什么建议吗？

# python - Django，链接不同数据库中的2个表

> ID：16148287
> 
> 赞同：0
> 
> 时间：2013-04-22T13:25:29.280
> 
> 标签：python, database, django

我有 2 个数据库

主数据库有模型表

```
class Entry(m.Model):
  value = m.CharField(max_length=250, null=True, blank=True) 
```

中学有这个

```
class Feature(m.Model):
  linked = m.PositiveIntegerField(default=0) 
```

我需要这样的字典： {('entry':'value','linked':'id'),}

现在我从第二个表中获取项目，迭代并制作 id 列表，而不是从主数据库中获取，然后再次迭代。有没有选择以正确的方式做到这一点？技术，一些技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:32:01.110

您应该研究允许您[从多个父模型继承的](https://docs.djangoproject.com/en/dev/topics/db/models/#multiple-inheritance)[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)。但是，我不能 100% 确定它与多个数据库的兼容性。

你会有类似的东西

```
class Entry(m.Model):
    value = m.CharField(max_length=250, null=True, blank=True)

class Feature(m.Model):
    linked = m.PositiveIntegerField(default=0)

class EntryFeature(Entry, Feature):
    ... 
```

如果您的模式可以修改，还有其他选择。

# php - 我有一个注册表单，可以在提交之前取消自定义错误

> ID：16148292
> 
> 赞同：0
> 
> 时间：2013-04-22T13:25:43.467
> 
> 标签：php, forms, validation

我正在为我的分类广告注册（通过教程），但我遇到了问题。出于某种原因，只需访问此页面：[http](http://classifieds.your-adrenaline-fix.com/register.php) ://classifieds.your-adrenaline-fix.com/register.php 将生成 2 个自定义错误，您将在注册表上方的红色框中看到，但表单没有甚至还没有提交，所以我不知道为什么会这样。如果有人能对此有所了解，我将不胜感激，并在此先感谢大家！！

（我已经盯着它看了好几个小时）

这是验证和提交表单数据的代码；

```
<?php
    if(empty($_POST) === false) {
        $VisitorsFirstName = $_POST['First_Name'];
        $VisitorsLastName = $_POST['Last_Name'];
        $VisitorsEmail = $_POST['E_mail'];
        $VisitorsPassword = $_POST['Pass'];
        $RequiredFlds = array('First_Name', 'Last_Name', 'E_mail', 'Pass', 'PassAgain');

        foreach($_POST as $key=>$value) {
            if(empty($value) && in_array($key, $RequiredFlds) === true) {
                $Err[] = 'All Fields Are Required';
                break 1;
            }
        }

        if(empty($Err) === true) {
            if(email_exists($VisitorsEmail) === true) {
                $Err[] = 'The Email Address \''. $VisitorsEmail. '\' Is Already In Use.';           
            }
            if(strlen($VisitorsPassword) < 4) {
                $Err[] = 'Please Select A Password of At Least 4 Characters.';
            }
            if($_POST['Pass'] !== $_POST['PassAgain']) {
                $Err[] = 'Passwords Do Not Match.';
            }
            if(filter_var($VisitorsEmail, FILTER_VALIDATE_EMAIL) === false) {
                $Err[] = 'A Valid Email Address is Required';
            }
        }
    }

    if(isset($_GET['success']) && empty($_GET['success'])) {
        echo 'You Have Now Been Registered and Can Proceed to <a href="add.php">Creating Your First Ad</a><br>(Use the Email and Password That You Registered With to Login)';
    } else {    
    if(empty($_POST) === false && empty($Err) === true) {
        $register_data = array (
            'VisitorsFirstName' => $_POST['First_Name'],
            'VisitorsLastName' => $_POST['Last_Name'],
            'VisitorsPassword' => $_POST['Pass'],
            'VisitorsEmail' => $_POST['E_mail'],
            'Notify' => $_POST['Notify']
            );

            register_func($register_data);
            header('Location: register.php?success');
            exit();

    } else if(empty($Err) === false) {
        echo output_error($Err);
        }
    } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:55:45.413

您可以改为检查是否按下了提交按钮。像这样：

```
if (isset($_POST['submit']) {
  // get the post values
} 
```

这样，您可以在表单实际提交之前消除脚本启动。现在它似乎在我访问该页面后立即运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:36:11.533

只要将您提供的代码单独放在我自己的服务器上，它就可以按设计工作。它没有运行最上面的代码块，因为 $_POST 变量是空的。尝试在文件顶部输出 $_POST 的内容，以便找出它不为空的原因。

```
print_r($_POST); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:38:16.867

试试这个： if(!empty($_POST['First_Name']) && !empty($_POST['Last_Name']) && !empty($_POST['E_mail']) && !empty($_POST['Pass' ])){

……

}

或者

尝试 isset($_POST['First_Name'])......

这对我来说很好！

# c++ - 如何在另一个循环中进入一个循环？

> ID：16148294
> 
> 赞同：-4
> 
> 时间：2013-04-22T13:25:46.327
> 
> 标签：c++, visual-studio-2010

```
#include<iostream>
#include<iomanip>
using namespace std;

 int main()
{
int employeeNum = 0;            int totalEmployees  = 0;
double hourlyRate   = 0.0;          double totalhoursWork   = 0.0;
double hoursWork    = 0.0;          double totalnetPay      = 0.0;
double grossPay     = 0.0;          double averagehoursWork = 0.0;
double netPay       = 0.0;   double totalwithHoldings = 0.0;
double withHoldings = 0.0;          double overTime         = 0.0;
                                    int x                   = 0;

    while(employeeNum!= 9999)
     {
        cout <<" Enter Employee Number  (9999 to Stop):";
        cin >> employeeNum;
        if(employeeNum ==9999)
        break; 
        cout <<"Enter hourly rate:";
        cin >> hourlyRate;
        cout <<"Enter hours worked:";
        cin >> hoursWork;
        cout <<"Employee Number:"<<employeeNum << endl;
        if(hoursWork <= 40)
        {
            grossPay= hoursWork * hourlyRate;
    cout <<" Gross Weekly Pay=" << fixed <<setprecision(2)<< grossPay << endl;
        }
        else if (hoursWork > 40)
        {
            overTime = hoursWork-40;
            grossPay = (overTime * 1.5 + 40)* hourlyRate;

        cout <<" Gross Weekly Pay="<< fixed <<setprecision(2)grossPay << endl;

        }
        if( grossPay > 1000.00)
        {
            withHoldings= grossPay*0.28;

        }
        else  if( grossPay <= 1000.00)
        {
            withHoldings= grossPay*0.21;

        }

        netPay= grossPay-withHoldings;
        cout <<" Net Weekly Pay="<<fixed << setprecision(2) << netPay << endl;

        totalhoursWork+=hoursWork;
        totalnetPay+=netPay;
        totalwithHoldings+= withHoldings;
        averagehoursWork= totalhoursWork/totalEmployees;
        totalEmployees++;

            }       
    averagehoursWork= totalhoursWork/totalEmployees;
     for (int x = 1; x < 44; x = x + 1) 
         cout <<"*";
         cout << endl;

    cout <<"Total Employees Entered=" << totalEmployees << endl;
    cout <<" Total Hours Worked="<< fixed << setprecision(2) << totalhoursWork << endl;
    cout <<" Average Hours Worked="<< fixed << setprecision(2) << averagehoursWork << endl;
    cout <<" Total Net Pay="<<fixed << setprecision(2) << totalnetPay << endl;
    cout <<" TotalwithHoldings=" << fixed << setprecision(2)<< totalwithHoldings << endl;

     for (int x = 1; x < 44; x = x + 1) 
         cout <<"*";
         cout << endl;

system("pause");
return 0;
      } 
```

每小时费率必须高于 7.25 美元且低于 100.00 美元。Hours working 必须大于 0 且小于 120。如果用户输入无效数据显示和适当的错误信息并要求用户重新输入。**这部分我应该使用什么语句，我应该把它放在哪里？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:35:08.920

您可以使用 Cin 和 Cout 进行输入和输出，只需使用 do While 循环

```
 int employeeNum = 0;

            do
            {
                Console.WriteLine("enter Employee /Number 9999 to STOP");
                employeeNum = int.Parse(Console.ReadLine());

                if (employeeNum == 9999)
                    break;

                Console.WriteLine("enter hourly rate ");
                double hourRate = Double.Parse(Console.ReadLine());

            } while (employeeNum != 9999); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:09:20.200

你可以这样做：

```
cout << "Enter hourly rate:";
cin >> hourlyRate;
while (hourlyRate <= 7.25 || hourlyRate >= 100) {
    cout << endl << "Reenter hourly rate (must be in (7.25 - 100))";
    cin >> hourlyRate;
} 
```

但是stackoverflow不是为别人做你的功课。

# android - （com.facebook.FacebookException）将图像和数据发布到 facebook 正在模拟器上工作，但不适用于 android 的实时设备

> ID：16148295
> 
> 赞同：1
> 
> 时间：2013-04-22T13:25:51.430
> 
> 标签：android, facebook

我正在做一个简单的应用程序，以在 facebook 上从 android 发布一些带有图像的数据。我已经使用 facebook SDK 完成了我的应用程序。它在模拟器中也可以正常工作。然后我尝试了我的安卓手机。但它显示这样的错误。我已经搜索过，但直到我没有得到任何答案。我也验证了我的哈希键。

![在此处输入图像描述](https://i.stack.imgur.com/JCMED.png)

我的 facebook 交互代码在这里：

```
 package p41.android.details;

import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;

import p41.android.facebookfeed.R;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.content.pm.Signature;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentTransaction;
import android.util.Base64;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;

import com.facebook.FacebookRequestError;
import com.facebook.Request;
import com.facebook.Response;
import com.facebook.Session;
import com.facebook.Session.StatusCallback;
import com.facebook.SessionState;
import com.facebook.UiLifecycleHelper;
import com.facebook.model.GraphObject;

public class ResultActivityList extends FragmentActivity implements
        OnItemClickListener, OnClickListener {
    private Fragment fragment;
    ArrayList<String> url = new ArrayList<String>();
    ArrayList<String> text1 = new ArrayList<String>();
    ArrayList<String> text2 = new ArrayList<String>();
    ArrayList<String> text3 = new ArrayList<String>();
    ArrayList<String> text4 = new ArrayList<String>();
    ListView list;
    String key = "";
    AlertDialog dialog;

    Button post, cancel, sampleM;
    View view;
    Bitmap image;
    Bundle bundle;
    String link, name, caption, picture;
    String icon, description;
    private UiLifecycleHelper uiHelper;
    private Session.StatusCallback callback = new Session.StatusCallback() {

        @Override
        public void call(Session session, SessionState state,
                Exception exception) {
            // TODO Auto-generated method stub

            onSessionStateChange(session, state, exception);
        }
    };

    MenuItem settings;
    private boolean isResumed;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result_list_activity);
        //temp
         try {
                PackageInfo info = getPackageManager().getPackageInfo(
                        "com.facebook.samples.hellofacebook", 
                        PackageManager.GET_SIGNATURES);
                for (Signature signature : info.signatures) {
                    MessageDigest md = MessageDigest.getInstance("SHA");
                    md.update(signature.toByteArray());
                    Log.d("KeyHash:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
                    }
            } catch (NameNotFoundException e) {

            } catch (NoSuchAlgorithmException e) {

            }
         //
        uiHelper = new UiLifecycleHelper(this, callback);

        FragmentManager fm = getSupportFragmentManager();
        fragment = (Fragment) fm.findFragmentById(R.id.settings);

        FragmentTransaction transaction = fm.beginTransaction();
        transaction.hide(fragment);
        transaction.commit();

        LayoutInflater inflater = (LayoutInflater) this
                .getSystemService(Activity.LAYOUT_INFLATER_SERVICE);

        view = inflater.inflate(R.layout.custom_dialog, null);

        post = (Button) view.findViewById(R.id.post);
        post.setText("Post");
        post.setOnClickListener(this);

        cancel = (Button) view.findViewById(R.id.cancel);
        cancel.setText("Cancel");
        cancel.setOnClickListener(this);

        sampleM = (Button) view.findViewById(R.id.sampleM);
        sampleM.setText("Sample Music");
        sampleM.setOnClickListener(this);

        list = (ListView) findViewById(R.id.list);
        Bundle bundle = getIntent().getBundleExtra("bundle");
        key = bundle.getString("Key");
        Log.d("Key", key);

        Log.d("Key", SearchContent.selectionType);
        if (SearchContent.selectionType.equals("albums")) {
            ResultAdapter adapter = new ResultAdapter(this, SearchContent.name,
                    SearchContent.artist, SearchContent.genre,
                    SearchContent.year, SearchContent.cover);

            list.setAdapter(adapter);
        }
        if (SearchContent.selectionType.equals("artists")) {
            ResultAdapter1 adapter = new ResultAdapter1(this,
                    SearchContent.name, SearchContent.genre,
                    SearchContent.year, SearchContent.cover);
            list.setAdapter(adapter);
        }
        if (SearchContent.selectionType.equals("songs")) {
            ResultAdapter1 adapter = new ResultAdapter1(this,
                    SearchContent.name, SearchContent.performer,
                    SearchContent.composer, SearchContent.cover);
            list.setAdapter(adapter);
        }

        list.setOnItemClickListener(this);
    }

    @Override
    protected void onActivityResult(int arg0, int arg1, Intent arg2) {
        // TODO Auto-generated method stub
        super.onActivityResult(arg0, arg1, arg2);
        uiHelper.onActivityResult(arg0, arg1, arg2);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        uiHelper.onPause();
        isResumed = false;
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        uiHelper.onResume();
        isResumed = true;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        // TODO Auto-generated method stub
        super.onSaveInstanceState(outState);
        uiHelper.onSaveInstanceState(outState);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        if (item.equals(settings)) {
            showFragment();
        }
        return true;
    }

    public void showFragment() {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction trans = fm.beginTransaction();
        trans.show(fragment);
        trans.addToBackStack(null);
        trans.commit();
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub

        Session session = Session.getActiveSession();
        if (session.isOpened()) {
            settings = menu.add("Settings");
            return true;
        }
        menu.clear();
        settings = null;
        return false;
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View v, int pos, long arg3) {
        // TODO Auto-generated method stub
        bundle = new Bundle();
        AlertDialog.Builder builder = null;
        builder = new AlertDialog.Builder(this);
        /*
         * For Artists: “artist_name I like artist_name who is active since
         * year. Genre of Music is: genre. Look at details: here”
         * 
         * 
         * For Albums: “album_name I like album_name released in year. Artist:
         * artist Genre : genre Look at details: here”
         * 
         * 
         * For Songs: “song_title I like song_title composed by composer
         * Performer: performer Look at details: here”
         */
        builder.setTitle("Post to Facebook");

        if (SearchContent.selectionType.equals("albums")) {
            Log.d("Location Albums Details",
                    "Title : " + SearchContent.name.get(pos) + " \nArtists: "
                            + SearchContent.artist.get(pos) + " \nGenre: "
                            + SearchContent.genre.get(pos) + " \nYear: "
                            + SearchContent.year.get(pos) + " \nDetails: "
                            + SearchContent.details.get(pos) + " \nCover: "
                            + SearchContent.cover.get(pos));
            /*
             * name = SearchContent.name.get(pos); caption =
             * SearchContent.genre.get(pos); link =
             * SearchContent.details.get(pos); picture =
             * SearchContent.year.get(pos);
             */
            icon = SearchContent.cover.get(pos);
            description = "" + SearchContent.name.get(pos) + "\nI like "
                    + SearchContent.name.get(pos) + " \nreleased in "
                    + SearchContent.year.get(pos) + " \nArtist: "
                    + SearchContent.artist.get(pos) + "\nGenre of Music is:"
                    + SearchContent.genre.get(pos) + "\nLook at details: "
                    + SearchContent.details.get(pos);
        }
        if (SearchContent.selectionType.equals("artists")) {
            Log.d("Location Artists Details",
                    "Title : " + SearchContent.name.get(pos) + " \nGenre: "
                            + SearchContent.genre.get(pos) + " \nYear: "
                            + SearchContent.year.get(pos) + " \nDetails: "
                            + SearchContent.details.get(pos) + "\nCover: "
                            + SearchContent.cover.get(pos));

            /*
             * name = SearchContent.name.get(pos); caption =
             * SearchContent.genre.get(pos); link =
             * SearchContent.details.get(pos); picture =
             * SearchContent.year.get(pos);
             */

            icon = SearchContent.cover.get(pos);
            description = "" + SearchContent.name.get(pos) + "\nI like "
                    + SearchContent.name.get(pos) + " who is active since "
                    + SearchContent.year.get(pos) + "."
                    + "\nGenre of Music is:" + SearchContent.genre.get(pos)
                    + "\nLook at details: " + SearchContent.details.get(pos);
        }
        if (SearchContent.selectionType.equals("songs")) {
            Log.d("Location Artists Details",
                    "Title : " + SearchContent.name.get(pos) + " \nPerformer: "
                            + SearchContent.performer.get(pos)
                            + " \nComposer: " + SearchContent.composer.get(pos)
                            + " \nDetails: " + SearchContent.details.get(pos)
                            + "\nCover: " + SearchContent.cover.get(pos)
                            + " \nSongs Present: "
                            + SearchContent.songPresent.get(pos)
                            + "\nSong Link: " + SearchContent.songLink.get(pos));
            /*
             * sampleM.setVisibility(View.VISIBLE); name =
             * SearchContent.name.get(pos); caption =
             * SearchContent.performer.get(pos); link =
             * SearchContent.songLink.get(pos); picture =
             * SearchContent.year.get(pos);
             */
            icon = SearchContent.cover.get(pos);
            description = "" + SearchContent.songPresent.get(pos) + "\nI like "
                    + SearchContent.name.get(pos) + " composed by "
                    + SearchContent.composer.get(pos) + "." + "\nPerformer: "
                    + SearchContent.performer.get(pos) + "\nLook at details: "
                    + SearchContent.details.get(pos);
            sampleM.setVisibility(View.VISIBLE);
        }

        builder.setView(view);
        if (dialog == null) {
            dialog = builder.create();
        }
        dialog.show();
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        /*
         * Bundle parameters = new Bundle(); parameters.putString("app_id",
         * "xxxxxxx"); parameters.putString("link",
         * "https://play.google.com/store/apps/details?id=myappistasty");
         * parameters.putString("name",
         * "This is the name of the link set in app.");
         * parameters.putString("caption",
         * "This is Text that is specified in bt the aoo");
         * parameters.putString("picture", "www.urltoimage.com);
         * facebook.dialog(MainActivity.this, "feed", parameters, new
         * DialogListener() { etc...
         */
        /*
         * postParams.putString("message", "XXX");
         * postParams.putString("caption", "developers.facebook.com");
         * postParams.putString("description",
         * "A tool to help you learn and browse the Facebook Graph API.");
         * postParams.putString("actions", "[{ 'name':'Test a simple Graph API
         * call!',
         * 'link':'https://developers.facebook.com/tools/explorer?method=GET&path=me'
         * ^ This link must direct to the application's connect or canvas URL.
         * You'll get an error otherwise. }]" ); postParams.putString("type",
         * "photo"); postParams.putString("link",
         * "https://developers.facebook.com/tools/explorer/");
         * postParams.putString("picture",
         * "http://blog.programmableweb.com/wp-content/ishot-44.png");
         * 
         * Request request = new Request(Session.getActiveSession(), "me/feed",
         * postParams, HttpMethod.POST);
         */

        if (v.getId() == R.id.cancel) {
            ResultActivityList.this.dialog.dismiss();
        }
        if (v.getId() == R.id.post) {
            image = BitmapFactory.decodeResource(getResources(),
                    R.drawable.ic_launcher);

            /*
             * Session.openActiveSession(this, true, new
             * Session.StatusCallback() {
             * 
             * // callback when session changes state
             * 
             * @Override public void call(Session session, SessionState state,
             * Exception exception) { if (session.isOpened()) {
             * 
             * // make request to the /me API
             * 
             * Request request = Request.newUploadPhotoRequest(
             * Session.getActiveSession(), image, new Request.Callback() {
             * 
             * @Override public void onCompleted(Response response) { // TODO
             * Auto-generated method stub new AlertDialog.Builder(
             * ResultActivityList.this) .setTitle("Post")
             * .setMessage("Success.....!") .setPositiveButton(R.string.ok,
             * null).show(); } }); bundle = request.getParameters();
             * bundle.putString("icon", icon); bundle.putString("description",
             * description); request.setParameters(bundle);
             * request.executeAsync();
             * 
             * ResultActivityList.this.dialog.dismiss(); } } });
             */

            Session.openActiveSession(this, true, new StatusCallback() {

                @Override
                public void call(Session session, SessionState state,
                        Exception exception) {
                    // TODO Auto-generated method stub
                    Request request = Request.newStatusUpdateRequest(
                            Session.getActiveSession(), description,
                            new Request.Callback() {

                                @Override
                                public void onCompleted(Response response) {
                                    // TODO Auto-generated method stub

                                    showPublishResult("Post", response.getGraphObject(), response.getError());
                                }
                            });
                    bundle = request.getParameters();
                    //bundle.putString("icon", icon);
                    bundle.putString("link", icon);
                    request.setParameters(bundle);
                    request.executeAsync();
                    ResultActivityList.this.dialog.dismiss();
                }
            });

        }

    }

    private void onSessionStateChange(Session session, SessionState state,
            Exception exception) {

        if (isResumed) {
            FragmentManager fm = getSupportFragmentManager();
            FragmentTransaction transaction = fm.beginTransaction();
            int backStackSize = fm.getBackStackEntryCount();
            for (int i = 0; i < backStackSize; i++) {
                fm.popBackStack();
            }
            transaction.commit();
        }
    }

    public void showPublishResult(String message, GraphObject result,
            FacebookRequestError error) {
        String title = null;
        String alertMessage = null;
        if (error == null) {
            title = getString(R.string.success);
            String id = result.cast(GraphObjectWithId.class).getId();
            alertMessage = getString(R.string.post_successful, message, id);
        } else {
            title = getString(R.string.error);
            alertMessage = error.getErrorMessage();
        }

        new AlertDialog.Builder(ResultActivityList.this).setTitle(title).setMessage(alertMessage)
                .setPositiveButton(R.string.ok, null).show();
    }
    private interface GraphObjectWithId extends GraphObject {
        String getId();
    }
} 
```

如果可以的话，请回答这个问题。感谢您的理解...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:02:50.457

第一个问题是 StatusCallback 的 call() 方法在会话打开期间被多次调用（状态从 CREATED 到 OPENING 到 OPENED）。这里的问题是您在调用 call() 方法后立即发出请求，但会话可能尚未打开。

尝试做这样的事情：

```
public void call(Session session, SessionState state, Exception exception) {
  if (session.isOpened()) {
    Request request = ...
  }
} 
```

但是，这只会给您一个不同的错误，因为您需要发布权限才能发布状态更新。

尝试查看 Scrumptious 示例应用程序，了解如何首先打开活动会话，然后请求其他权限，然后发布帖子。

# javascript - GoogleMaps addlistener zip 弹出窗口？

> ID：16148296
> 
> 赞同：0
> 
> 时间：2013-04-22T13:25:52.077
> 
> 标签：javascript, jquery, google-maps-api-3, zipcode

好吧，这对我来说已经是 3 天的问题了，javascript 闭包并不是我的强项。

我有一个谷歌地图，我在上面应用了一系列可点击的多边形。我希望根据单击的多边形运行特定的功能，我正在工作。问题是我无法弄清楚如何使用侦听器，以便显示一个包含该多边形邮政编码的信息窗口的函数。这是代码：

```
for (x = 0; x < 50 && coordsObject.length > x; x++) { //Only draw 50 polygons at a time
    ...
    //create zipcoords array

    clickablePolygons.push(new google.maps.Polygon({
        paths: zipCoords
        , strokeColor: "#000"
        , strokeOpacity: 1
        , strokeWeight: 1
        , fillColor: convertRatingToHex(rating)
        , fillOpacity: 0.45
    }));

    infoWindow.push(
        new google.maps.InfoWindow({
           content: '<div id="gcontent">' + zip.toString() + '</div>'
        })
    );

    //problem child
    var theFunction = function(arguments, infowindow, map) {
        var marker = new google.maps.Marker({
            position: arguments[0].latLng
        });

        infowindow.open(map, marker);

    };

    google.maps.event.addListener(clickablePolygons[clickablePolygons.length - 1], 'click', function() {
         theFunction(arguments, infoWindow[x], map); //:(
    });

    clickablePolygons[clickablePolygons.length - 1].setMap(map);

} 
```

我在关闭时做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:42:24.627

在您的 addListener 调用中，您有函数（）而不是函数（参数）。我还将创建一个指向 addlistener 调用之外的 infoWindow 的变量。假设是单击事件将传递您期望的参数。它可能需要是函数（例如，参数）。

```
var win = infoWindow[x];

google.maps.event.addListener(clickablePolygons[clickablePolygons.length - 1], 'click', function(arguments) {
     theFunction(arguments, win, map);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T19:25:45.223

看起来像变量范围问题，试一试

```
(function(x){
    google.maps.event.addListener(clickablePolygons[clickablePolygons.length - 1], 'click', function(arg) {
        theFunction(arg, infoWindow[x], map);
    });
})(x); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:52:13.383

您不需要`InfoWindow`. 只需在需要时使用[方法](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)设置内容和位置。

我不明白您为什么要添加标记，这是要求吗？如果您只想`InfoWindow`显示单击多边形的时间，则可以使用从单击事件传递的[MouseEvent](https://developers.google.com/maps/documentation/javascript/reference#MouseEvent)对象来获取单击的当前位置。

这是一个例子：http: [//jsfiddle.net/bryan_weaver/akLBM/](http://jsfiddle.net/bryan_weaver/akLBM/)

链接中的代码：

```
var map;
var infoWindow;
var clickablePolygons = [];

function createPolygon(path, stateName) {
    var poly = new google.maps.Polygon({
        paths: path,
        strokeColor: "#000",
        strokeOpacity: 1,
        strokeWeight: 1,
        fillColor: "#330000",
        fillOpacity: 0.45
    });

    //add the polygon to the array, to use later if needed.
    clickablePolygons.push(poly);

    //attach a click event, the first argument of the listener is the event
    //you can get the position of the mouse cursor where the map 
    //was clicked through this.
    google.maps.event.addListener(poly, "click", function (event) {

        //call the setContent method and set the content for the info window
        infoWindow.setContent("This state is: " + stateName);
        //set the anchor of the info window, in this case 
        //I am using the mouse position at
        //the time of the click
        infoWindow.setPosition(event.latLng);
        //open the info window, passing the map in which to attach it to.
        infoWindow.open(map);
    });

    //add the polygon to the map
    poly.setMap(map);
}

function initialize() {
    var myLatLng = 
         new google.maps.LatLng(39.983994270935625, -111.02783203125);
    var mapOptions = {
        zoom: 5,
        center: myLatLng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    //polygon coords for Utah
    var utah = [
    new google.maps.LatLng(41.983994270935625, -111.02783203125),
    new google.maps.LatLng(42.00032514831621, -114.01611328125),
    new google.maps.LatLng(36.96744946416931, -114.01611328125),
    new google.maps.LatLng(37.00255267215955, -109.0283203125),
    new google.maps.LatLng(40.97989806962013, -109.0283203125),
    new google.maps.LatLng(41.0130657870063, -111.02783203125)];

    //polygon coords for Colorado
    var colorado = [
    new google.maps.LatLng(40.96330795307351, -109.05029296875),
    new google.maps.LatLng(36.96744946416931, -109.0283203125),
    new google.maps.LatLng(37.02009820136811, -101.9970703125),
    new google.maps.LatLng(40.97989806962013, -102.06298828125)];

    map = new google.maps.Map($('#map')[0], mapOptions);
    //create a single info window for use in the application
    infoWindow = new google.maps.InfoWindow();

    //add the polygon and infowindow content to the map.
    createPolygon(utah, "Utah");
    createPolygon(colorado, "Colorado");
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

# windows - 如何将位置从拖放以打开批处理文件的文件复制到批处理文件

> ID：16148297
> 
> 赞同：0
> 
> 时间：2013-04-22T13:25:53.490
> 
> 标签：windows, file, batch-file

所以我一直在尝试为一个名为 DiscEX 的软件创建一个批处理文件，该软件需要从 cmd.exe windows xp 或更高版本的命令行使用，它的启动方式是这样的`discex (any arguments needed) location of iso file`。现在我可以让软件使用批处理文件运行，但我似乎无法弄清楚如何复制被拖到它的文件的目标位置以打开批处理文件这是记事本中批处理文件的外观喜欢。

```
@echo off
echo Welcome to AutoDiscEx
pause
C:\windows\system32\discex 
pause 
```

我还需要能够在便携式硬盘驱动器的工作目录中启动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:51:52.053

当您在批处理文件上拖动文件时，完整的文件路径在`%1`批处理文件的第一个参数 ( ) 中可用。如果您需要将此参数作为第一个参数提供给 discex 应用程序，您可以执行以下操作：

```
@echo off
echo Welcome to AutoDiscEx
pause

C:\windows\system32\discex %1
pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:41:47.537

你需要做的就是

```
C:\windows\system32\discex "%1" 
```

获取传递给批处理的文件路径参数

如果批处理文件已经在工作目录中，请将

```
cd /d %~dp0 in the batch after @echo off 
```

如果要确定外部 USB 驱动器是什么驱动器，请使用

```
 @echo off
 setlocal   
 set wmi='wmic logicaldisk where "volumeserialnumber='32A78F3B'" get caption'
 for /f "skip=1 delims=" %%A in (%wmi%) do (
    for /f "tokens=1 delims=:" %%B in ("%%A") do (set drive=%%B)
 )
 echo %drive% 
```

其中volumeserialnumber 是vol [USB 驱动器的驱动器号：] 的输出，去掉了-。

# java - 在 JBoss 5.1.1 上将 JSF 从 1.2 升级到 2.1

> ID：16148300
> 
> 赞同：0
> 
> 时间：2013-04-22T13:25:59.853
> 
> 标签：java, jsf, jboss, seam, mojarra

我正在尝试将我的 webapp 从 JSF 1.2 升级到 JSF 2.1。这是我现在正在运行的：

```
| Item  | Version     |
| ----- | ----------- |
| JBoss | 5.1.1 (EAP) |
| Seam  | 2.2.1 (EAP) |
| JSF   | 1.2         | 
```

我想升级到 JSF 2.1。这是我目前正在尝试切换到的内容：

```
| Item  | Version     |
| ----- | ----------- |
| JBoss | 5.1.1 (EAP) |
| Seam  | 2.3.0 (EAP) |
| JSF   | 2.1         | 
```

我在 war 文件中包含了来自 SEAM 2.3.0 包的以下 jar：

```
jboss-jsf-api_2.1_spec.jar
jsf-impl.jar 
```

JBoss 目录下的 jsf jars 是：

```
./server/default/deploy/jbossweb.sar/jsf-libs/jsf-api.jar
./server/default/deploy/jbossweb.sar/jsf-libs/jsf-impl.jar 
```

当我使用我的应用程序时，*似乎*JSF 2.1 运行良好，但在启动时，我在服务器日志中看到这些行：

```
2013-04-22 08:33:50,044 INFO  [javax.enterprise.resource.webcontainer.jsf.config] (main) Initializing Mojarra (1.2_13-b01-FCS) for context '/myapp'
2013-04-22 08:34:06,811 INFO  [javax.enterprise.resource.webcontainer.jsf.lifecycle] (main) JSF1027: [null] The ELResolvers for JSF were not registered with the JSP container. 
```

## 问题

1.  为什么`Initializing Mojarra (1.2_13-b01-FCS)`？它只是在启动时显示这个然后在运行时切换到使用 JSF 2.1 吗？

    如果我`./server/default/deploy/jbossweb.sar/jsf-libs/`用 jsf 2.1 罐子换下 2 个罐子，我会得到`Initializing Mojarra 2.1.7 (SNAPSHOT 20120206)`。但是，jboss 附带的包都因 ClassNotFoundExceptions 而失败。

2.  当我的应用程序使用 JSF 2.1 时，是否有某种方法可以让所有 jboss 可部署项（例如`jbossweb.sar`）继续使用 JSF 1.2？

3.  有什么方法可以让我的应用在运行时吐出 JSF 版本？

4.  `The ELResolvers for JSF were not registered with the JSP container.`INFO 消息是怎么回事？我的应用程序总是在启动时记录该消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-05T08:55:33.040

在 JBoss 5.1.1 EAP 上，我已将 JSF 1.2 升级到 JSF 2.1（Mojarra 实现）。

我的经验与这篇法语文章有关：http: [//javaetmoi.com/2014/06/notes-migration-jsf2-richfaces4-jboss5-eap/](http://javaetmoi.com/2014/06/notes-migration-jsf2-richfaces4-jboss5-eap/)（[谷歌翻译是你的朋友](https://translate.google.com/translate?hl=fr&sl=fr&tl=en&u=http%3A%2F%2Fjavaetmoi.com%2F2014%2F06%2Fnotes-migration-jsf2-richfaces4-jboss5-eap%2F)）

您将学习如何卸载 JSF 1.2。JSF 2.1 嵌入到您的 WAR/EAR 的 lib/ 文件夹中。它工作正常：

```
20:52:19,534 INFO  [config] Initialisation de Mojarra 2.1.19 ( 20130213-1512 https://svn.java.net/svn/mojarra~svn/tags/2.1.19@11614) pour le contexte «/richfaces-showcase» - See more at: http://javaetmoi.com/2014/06/notes-migration-jsf2-richfaces4-jboss5-eap/#sthash.fDmunAGP.dpuf 
```

# dynamics-crm-2011 - 通过插件更新持续时间字段

> ID：16148303
> 
> 赞同：1
> 
> 时间：2013-04-22T13:26:02.280
> 
> 标签：dynamics-crm-2011

有没有人必须`Duraton`从插件中更新字段？

在 UI 上它相当智能，你可以输入

*   `5 minutes`
*   `7 //defaults to minutes`
*   `3 hours`

它会锻炼你需要的东西。

假设该字段被调用`new_foo`，我应该分配什么值？诠释？

```
var e = new Entity("new_bar");
e.Attributes("new_foo", 5);//5 minutes? 
```

双倍的？

```
var e = new Entity("new_bar");
e.Attributes("new_foo", 5.00);//5 minutes? 
```

其他想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:02:37.507

`Duration`是`Whole Number`类型的格式，因此您需要通过代码设置一个`Int32`值（在这种情况下不是负数，否则会引发异常）

该值始终以分钟为单位，因此如果要输入 3 小时，则需要将字段值设置为 180（60 分钟 x 3 小时），1 天为 1440（60 分钟 x 24 小时），依此类推。

通过界面，您可以使用小数进行设置，但它始终是整数值的表示（例如 1.5 小时等于 90 分钟）

# c# - 从 C# 调用特定版本的 PowerShell

> ID：16148305
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:03.870
> 
> 标签：c#, powershell, hyper-v, powershell-module

我正在尝试`Get-VM`在 Hyper-V 主机上使用从 C# 调用的 Cmdlet。

`Hyper-V`显然，必须先导入相应的 PowerShell 模块。但是，导入失败 - 显然是因为该模块仅在 PowerShell 3.0 上受支持（至少这是我从[本文](https://support.quest.com/SolutionDetail.aspx?id=SOL98469&pr=PowerGUI%20Pro)中得出的结论）。不过，System.Management.Automation 使用的 PowerShell 似乎是 2.0 版。

```
InitialSessionState iss = InitialSessionState.CreateDefault();
iss.ImportPSModule(new string[] { "Hyper-V" });
Runspace runSpace = RunspaceFactory.CreateRunspace(iss);
runSpace.Open();
foreach (var err in (ArrayList)runSpace
        .SessionStateProxy.PSVariable.GetValue("Error"))
    Console.WriteLine(err.ToString());
runSpace.Close(); 
```

返回

> 无法导入“C:\Windows\system32\WindowsPowerShell\v1.0\Modules\Hyper-V\Hyper-V.psd1”模块，因为其清单包含一个或多个无效成员。有效的清单成员是 ('ModuleToProcess', ...)。删除无效的成员（'HelpInfoUri'），然后再次尝试导入模块。

有没有办法在 C# 中使用特定版本的 PowerShell？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:43:45.113

一位同事想通了：

显然，.NET 4+ 带有一个全新的公共语言运行时：CLR4
此运行时使用从位于 .NET 的新程序集缓存加载的自己的程序集`C:\Windows\Microsoft.NET\assembly`。

将`System.Management.Automation version 3.0.0.0`自动使用 PowerShell 3.0，仅适用于 CLR4。因为我将我的应用程序配置为在 .NET 3.5 下运行，所以它将使用旧的 CLR2，甚至看不到更新的程序集。

为确保应用程序仍可在 .NET 3.5 上运行，请将其添加到`App.config`项目文件夹中的文件中：

```
<supportedRuntime version="v4.0"/> 
<supportedRuntime version="v2.0.50727"/> 
```

如果 CLR4 可用，它将加载相应的 GAC，找到一个将所有引用重定向到的策略文件，`System.Management.Automation version 1.0.0.0`并且`version 3.0.0.0`PowerShell 模块按预期工作。
如果您只有 .NET 3.5，则将加载旧版本；PowerShell 仍然有效，但仅支持 2.0 版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:12:13.083

你看过这个了吗？

[http://code.msdn.microsoft.com/windowsdesktop/Windows-PowerShell-30-SDK-9a34641d](http://code.msdn.microsoft.com/windowsdesktop/Windows-PowerShell-30-SDK-9a34641d)

即使您的系统上已经安装了 PSv3，您也可能只需要新的 SDK 来调用 Powershell 3，但我通常只是一个直接的 Powershell 人。

# mongodb - Journal + Majority 100% 安全吗？

> ID：16148306
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:03.670
> 
> 标签：mongodb, replication, journaling, durability

我一直在阅读一些关于 MongoDB 容错的文章，有些人抱怨它永远无法用 MongoDB 真正实现（比如这篇文章：[http](http://hackingdistributed.com/2013/01/29/mongo-ft/) ://hackingdistributed.com/2013/01/29/mongo-ft/ ），这让我感到困惑。

有人可以确认（如果可能的话，向我展示适当的文档）使用 Write Concern“Journal + Majority”足以确保 100% 的驱动程序报告为成功的写入是持久写入的并且不会即使任何副本在写入后失败，也会丢失？

我说的是 3 副本设置。我对系统在发生故障时不再接受写入感到满意，但是当驱动程序报告写入成功时，我需要将其持久提交（无论之后失败的副本数量如何）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:07:59.223

Right so if you choose a journal write you are basically ensuring the write has made it to disk of a single node. If you choose to do a majority write, you are ensuring that the write has made it to *memory* of at least x number of nodes in your replica set.

By default, mongodb will flush from memory to journal every 100ms. By having your replica nodes on different machines (physical or virtual), ideally in different data centres, you are very unlikely to ever see ALL nodes in a geographically ditributed replica set go down within the same 100ms before one gets to disk.

Alternatively to guarantee that write made it to disk of a single node - use journal write.

# jquery - 使用 jquery 使基于窗口调整大小的 html 画布流体

> ID：16148308
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:08.640
> 
> 标签：jquery, html, canvas

是否可以根据当前窗口尺寸制作 HTML5 画布宽度和高度？..使用 jQuery，在 window.resize() 函数中？如果是这样，我只是在寻找一个超级基本的例子。我整个早上都在尝试研究这个问题，但还没有找到关于这个话题的可靠答案。

感谢您的任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:32:29.890

好吧，这很容易做到：

```
 $(window).resize(function () { 
       $('#canvas').width($(window).width());
       $('#canvas').height($(window).height());
    }); 
```

[http://jsfiddle.net/ha73R/1/](http://jsfiddle.net/ha73R/1/)

# jquery-mobile - 使用 pageinit() 而不是 document.ready

> ID：16148309
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:10.303
> 
> 标签：jquery-mobile

我尝试了许多将我的应用程序用作 jquerymobile 的方法，但没有成功。我知道我必须使用 pageinit 而不是准备好文档。你能告诉我正确的方法吗？当我添加它时，它根本不起作用。这是代码

```
<head>
<link rel="stylesheet" href="https://s3.amazonaws.com/codiqa-cdn/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script>
    if (navigator.userAgent.match(/Android/i)) {
        window.scrollTo(0, 1);
    }
</script>
<script src="https://s3.amazonaws.com/codiqa-cdn/jquery-1.7.2.min.js"></script>
<script src="https://s3.amazonaws.com/codiqa-cdn/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>
    try {
        $(function() {});
    } catch (error) {
        console.error("Your javascript has an error: " + error);
    }
</script>
<script>
    $(document).ready(function() {
        $("form").change(function() {
            $.post("test2.php",
            $("#myform").serialize());
        });
    });
</script>
</head>
<body>
    <div id="my-page" data-role="page">
        <form name="myform" id="myform" method="get">
            <label for="DogalGaz">Doğal Gaz</label>
            <select name="DogalGaz" id="DogalGaz" data-theme="" data-role="slider">
                <option value="">Seçiniz</option>
                <option value="off">Off</option>
                <option value="on">On</option>
            </select>
        </form>
    </div> 
```

我所做的是，只需将表单数据发送到 test2.php 文件并进行处理。感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T07:19:53.240

[Flip Toggle Switch](http://api.jquerymobile.com/slider/#entry-examples)应该有 2 个选项而不是 3 个。

尝试这个：

```
<!DOCTYPE html>
<head>
<link rel="stylesheet" href="https://s3.amazonaws.com/codiqa-cdn/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script>
    if (navigator.userAgent.match(/Android/i)) {
        window.scrollTo(0, 1);
    }
</script>
<script src="https://s3.amazonaws.com/codiqa-cdn/jquery-1.7.2.min.js"></script>
<script src="https://s3.amazonaws.com/codiqa-cdn/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>
    $(document).on('pageinit', function() {
        $("#myform").change(function() { // use #myform instead of form to only serialize one form.
            $.post("test2.php",
              $("#myform").serialize());
        });
    });
</script>
</head>
<body>
    <div id="my-page" data-role="page">
        <!-- include action and method in case javascript handler fails -->
        <form name="myform" id="myform" action="test2.php" method="post"> 
            <label for="DogalGaz">Doğal Gaz. Seçiniz: </label>
            <select name="DogalGaz" id="DogalGaz" data-theme="" data-role="slider">
                <option value="off">Off</option>
                <option value="on">On</option>
            </select>
        </form>
    </div>
</body>
</html> 
```

每次切换切换时，这都会发布到 test2.php。

# xaml - 帧标签中使用源属性时出错

> ID：16148311
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:16.477
> 
> 标签：xaml, windows-8, visual-studio-2012

我正在尝试使用以下帧标记在 Windows 8 XAML 中打开网页。

```
<Frame
Source="http://medievaltvg.freeoda.com/"

/> 
```

我从 Visual Studio 收到以下错误：

```
Unknown member 'Source' on element 'Frame.' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:29:39.887

`Source`编译器告诉您，-control上没有成员`Frame`。这不是`Windows.UI.Xaml.Frame`目的。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.frame)。

```
You use the Frame control to support navigation to Page controls. You create
as many different pages as needed to present the content in your application
and then navigate to those pages from the frame. To navigate from the frame, 
you call the Navigate method and pass in the type of the page to navigate to. 
You can also pass in a parameter object to initialize the page to a particular state. 
```

您正在寻找的是[`WebView`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)-Control。

# mysql - 使用 case when 语句创建的 Sum 字段

> ID：16148312
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:17.807
> 
> 标签：mysql, sql

我有一张游戏得分表；每个任务播放一排。为了获得每个用户的最佳分数，我创建了一个查询，该查询将为每个用户的每个任务提供最高分，每个用户一行。这些分数作为附加列（mission_1 和mission_2）添加。到目前为止，一切都很好。

但现在我想将这两个字段相加以获得每个用户的总最高分。但是，MySQL 不会让我在“字段列表”中显示未知列“任务_1”。

是否有可能以某种方式对这些字段求和？

我还想知道是否可以在单独的列（mission_1_id 和mission_2_id）中获得最高分数的任务对应的row_ids（我的表中的gsid）。但是我有一种行不通的感觉，因为我使用的是 MAX()。

```
SELECT m . * , max( m.id ) as max_id, max( submitted_on ) AS max_submitted_on, 
ifnull( max(CASE WHEN mission =1 THEN score END ) , 0 ) AS mission_1_score, 
ifnull( max(CASE WHEN mission =2 THEN score END ) , 0 ) AS mission_2_score,
mission_1_score + mission_2_score AS total_score
FROM game_sessions m
GROUP BY username 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:29:50.390

您可以使用

```
 max(CASE WHEN mission =1 THEN score END ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:29:47.337

不，不在同一个`select`声明中。您需要子查询或重复表达式。

子查询方法：

```
select m.* max_id, max_submitted_on, mission_1_score, mission_2_score,
       mission_1_score + mission_2_score AS total_score
from (SELECT m . * , max( m.id ) as max_id, max( submitted_on ) AS max_submitted_on, 
            ifnull( max(CASE WHEN mission =1 THEN score END ) , 0 ) AS mission_1_score, 
            ifnull( max(CASE WHEN mission =2 THEN score END ) , 0 ) AS mission_2_score,
            mission_1_score + mission_2_score AS total_score
      FROM game_sessions m
      GROUP BY username
     ) m 
```

否则，将您的原始`select`语句更改为：

```
SELECT m . * , max( m.id ) as max_id, max( submitted_on ) AS max_submitted_on, 
       ifnull( max(CASE WHEN mission =1 THEN score END ) , 0 ) AS mission_1_score, 
       ifnull( max(CASE WHEN mission =2 THEN score END ) , 0 ) AS mission_2_score,
       (ifnull( max(CASE WHEN mission =1 THEN score END ) , 0 ) +
        ifnull( max(CASE WHEN mission =2 THEN score END ) , 0 )
       ) AS total_score 
```

这看起来不优雅，但它是 SQL 标准的一部分。我认为这样做的目的是避免在这种情况下产生歧义：

```
select (a + b) as a, (a + 1) as c 
```

`a`in`(a + 1)`指的是什么？在 SQL 标准中，它引用表中的列是明确的。

# excel - 将包含数据集的 1 列转换为多行

> ID：16148318
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:27.923
> 
> 标签：excel, one-to-many, vba

我有一个格式如下的 CSV：

```
label1,data1
label2,data2
label3,data3

label1,data4
label2,data5
label3,data6

... etc ... 
```

我正在尝试将它在 Excel 中转换为这种格式：

```
label1,label2,label3
data1,data2,data3
data4,data5,data6 
```

我认为使用内置工具不可能做到这一点，所以我正在考虑为它编写一个宏，但我是 PowerShell/C# 人员，而不是 VB 人员。任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T19:34:15.063

我将假设这是一次性的事情，并且电子表格公式将适合您。

您可以在 OzGrid 上使用来自**mikerickson**的自定义电子表格函数来连接所有具有公共标签的数据。

首先，您需要获取所有唯一值：

![示例 1](https://i.stack.imgur.com/XHmZl.png)

然后你需要使用这个自定义函数来查找和连接具有公共标签的值：

```
Function ConcatIf(ByVal compareRange As Range, ByVal xCriteria As Variant, _
    Optional ByVal stringsRange As Range, Optional Delimiter As String) As String
    Dim i As Long, j As Long, criteriaMet As Boolean

    Set compareRange = Application.Intersect(compareRange, _
    compareRange.Parent.UsedRange)

    If compareRange Is Nothing Then Exit Function
    If stringsRange Is Nothing Then Set stringsRange = compareRange
    Set stringsRange = compareRange.Offset(stringsRange.Row - compareRange.Row, _
    stringsRange.Column - compareRange.Column)

    For i = 1 To compareRange.Rows.Count
        For j = 1 To compareRange.Columns.Count
            If (Application.CountIf(compareRange.Cells(i, j), xCriteria) = 1) Then
                ConcatIf = ConcatIf & Delimiter & CStr(stringsRange.Cells(i, j))
            End If
        Next j
    Next i
    ConcatIf = Mid(ConcatIf, Len(Delimiter) + 1)
End Function 
```

![示例 2](https://i.stack.imgur.com/7EfZ3.png)

如果需要，您可以进行额外的连接来组合您的标签：

![示例 3](https://i.stack.imgur.com/7yI06.png)

然后，您可以将其直接粘贴到文本编辑器中，也可以按原样使用，如果需要，可以将其保存为 csv：

![示例 4](https://i.stack.imgur.com/IFavo.png)

然后你在 excel 中打开它并根据需要转置它：

![示例 5](https://i.stack.imgur.com/lyglb.png)

有点绕圈子的方法，但在我看来，这比编写宏要容易 - 至少稍微有点。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T19:37:40.237

最合适的技术可能在某种程度上取决于您需要执行此操作的频率以及您拥有多少数据块，但宏不是必需的：

导入 Excel 并将文本拆分为以逗号作为分隔符的列。
分流三行并将一组“label1 label2 label3”移动到“数据”列上方。
删除“标签”列和空白行。
将列作为无格式文本复制到 Word 中。
插入 > 表格 - 表格，将文本转换为列数 = 3 的表格。
复制回 Excel 并使用逗号分隔符 ( `&","&`)按行连接

# php - 将 PHP 变量绑定到 ODBC SQL UPDATE 语句

> ID：16148322
> 
> 赞同：1
> 
> 时间：2013-04-22T13:26:37.563
> 
> 标签：php, sql, odbc

我正在尝试在 PHP 中使用 ODBC 将参数绑定到 UPDATE 语句，但 SQL 语句失败，我终生无法找出原因。我试过谷歌搜索，但似乎很少有关于将 ODBC 与 PHP 结合使用的信息，而不是 MySQLi 和 PDO 之类的信息。

我发现的参数绑定的大多数示例都使用 SELECT 语句，但据我所知，这应该没有什么区别。我找到的最接近的答案是[在 stackoverflow 上](https://stackoverflow.com/questions/6742455/odbc-sql-update-statement-issue-if-more-than-32-000-characters)。据我所知，他们正在做我正在做的事情，但我不断收到错误消息。这是我的代码：

```
$updQuery = "UPDATE Demographic SET dmg_FirstName=? WHERE dmg_ID=?";
$update = odbc_prepare($connect, $updQuery);

$fname = $_POST['firstname'];
$pID = 145100007;
$updResult = odbc_execute($update, array($fname, $pID)) or die (odbc_errormsg()); 
```

这是我在上面的代码中不断遇到的错误：

```
Warning: odbc_execute(): SQL error: [Microsoft][ODBC Driver Manager] SQL data type out of range, SQL state S1004 in SQLBindParameter in C:\xampp\htdocs\work\ajaxdd.php on line 44 
```

当我删除参数绑定时，代码可以工作，所以如果最坏的情况发生在最坏的情况下，我可以尽我所能尝试清理数据，但这显然不是可取的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:37:06.170

这可能意味着您正在尝试插入一个高于该整数列允许的 ID。首先尝试验证是否是这种情况。是什么类型的`dmg_ID`？145100007 是一个相当高的数字，所以我怀疑这可能是罪魁祸首。

# opencv - cvAdd异常在c++中使用openCV库

> ID：16148324
> 
> 赞同：0
> 
> 时间：2013-04-22T13:26:53.310
> 
> 标签：opencv

我使用 openCV 编写了这个 c++ 代码进行与操作，我还使用了 bitwise_and 和 cvAnd 但它没有工作。我确定没有语法错误但是当我运行它时它给了我一个异常

编码：

```
IplImage* result1 = cvCreateImage( cvGetSize(v_plane), 8, 3 );

    cvAdd(h_plane, s_plane, result1,NULL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:35:00.207

h_plane、s_plane 和 result1 必须全部具有相同的格式。

*   相同大小
*   相同深度
*   相同数量的通道

cvConvertImage() 在这里很有帮助。

# javascript - 正则表达式替换输入字段中的符号

> ID：16148327
> 
> 赞同：0
> 
> 时间：2013-04-22T13:27:02.307
> 
> 标签：javascript, jquery, regex

我有一个输入字段和一个带有正则表达式的代码，使它只能输入数字

```
$('input').keyup(function () { 
    this.value = this.value.replace(/[^0-9]/g,'');
}); 
```

但是当有人试图在字段中间编辑一个符号时，光标会放在它的末尾。它使编辑变得困难，因为您必须删除要编辑的符号之后的所有符号。

一个简单的演示：

[http://jsfiddle.net/NehmP/](http://jsfiddle.net/NehmP/)

有人可以帮我解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:28:37.413

仅当新字符串与旧字符串不同时才应替换：

```
$('input').keyup(function () { 
   var v = this.value.replace(/[^0-9]/g,'');
   if (v!=this.value) this.value = v;
}); 
```

这样只要值有效，光标就不会放在末尾。

[示范](http://jsfiddle.net/wGaZ6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:37:47.687

您应该尝试某种类型的输入屏蔽插件，例如[maskedInput](https://github.com/digitalBush/jquery.maskedinput/)。

```
$("input").mask("9999"); // People will only be able to type numbers of 4 chars long!
$("input").mask("9?999"); // People will only be able to type numbers from 1 to 4 chars long! 
```

[在此处](http://digitalbush.com/projects/masked-input-plugin/)查看更多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T11:30:34.920

使用此代码，即使值无效，光标也不会放在单词的末尾。这是dystroy的解决方案和我在互联网上找到的代码的组合。我认为它仍然有很多缺陷并且太长但也许它仍然可以帮助某人......非常感谢你们:)

```
function doGetCaretPosition (ctrl) {    
    var CaretPos = 0;
// IE Support
    if (document.selection) {   
        ctrl.focus ();
        var Sel = document.selection.createRange ();    
        Sel.moveStart ('character', -ctrl.value.length);    
        CaretPos = Sel.text.length;
    }
// Firefox support
    else if (ctrl.selectionStart || ctrl.selectionStart == '0'){
        CaretPos = ctrl.selectionStart;
    }
    return (CaretPos);  
}
function setCaretPosition(ctrl, pos){   
    if(ctrl.setSelectionRange){
        ctrl.focus();
        ctrl.setSelectionRange(pos,pos);
    }else if (ctrl.createTextRange) {
        var range = ctrl.createTextRange();
        range.collapse(true);
        range.moveEnd('character', pos);
        range.moveStart('character', pos);
        range.select();
    }
}
var remember;
$('input').keyup(function () { 
    remember = doGetCaretPosition(this);
    var v = this.value.replace(/[^0-9]/g,'');
    if (v!=this.value) {
        this.value = v; 
        setCaretPosition(this,remember - 1)
    };      
}) 
```

和[jsfiddle](http://jsfiddle.net/f3AAu/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-22T13:32:57.017

你不应该从别人的脚下拉地毯。您正在尝试做的事情超出了javascript的范围，应该由浏览器/操作系统处理。

如果您向某人展示一个文本字段，他们希望能够在其中输入任何内容（例如在手机上的某些情况下，可以定义特定键盘的情况除外）。

这是一种更好的方法，可以通过上下文相关的消息简单地通知用户错误的输入，并允许他们以他们熟悉的方式自行更正。

如果试图干扰输入法本身，很可能会造成混乱和挫败感。此外，在一系列设备上进行测试会产生数不清的怪癖。

此外，验证应该在服务器上执行，因为可以操纵客户端验证。

客户端的验证应该只是为了方便用户。

# android - Android 困难屏幕方向

> ID：16148330
> 
> 赞同：0
> 
> 时间：2013-04-22T13:27:18.253
> 
> 标签：android, screen, screen-orientation, screen-rotation

我最近开始学习 Android，作为第一个应用程序，我会创建自己的相机。在查看了互联网上的 API 和其他示例之后，我能够创建一个工作应用程序，但是我遇到了这个问题：如果我旋转我正在使用的平板电脑来尝试我所做的事情，我的应用程序会在错误道。所以，当我从纵向切换到横向时，转换成功并且按钮旋转正确，但相机真正看到的好像它比它应该旋转了 90 度。所有这一切，除非我决定在我的活动中设置 screenOrientation: Landscape，因为在这种情况下，相机可以正确看到所有内容，但按钮保持固定在一个位置，不要随着平板电脑的旋转而旋转。我有一台只有前置摄像头的平板电脑。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:31:21.127

检查我前段时间给出的这个答案，它确实有一个很好的调用方法来正确设置相机方向。

[我如何知道相机在安卓设备上的位置？](https://stackoverflow.com/questions/15945360/how-can-i-know-the-position-of-the-camera-on-an-android-device/15945789#15945789)

并且使用该代码，您应该让您的活动自由旋转

# javascript - 在 XPages 中从 SSJS 中调用 CSJS

> ID：16148332
> 
> 赞同：1
> 
> 时间：2013-04-22T13:27:24.190
> 
> 标签：javascript, xpages

我目前正在用 JavaScript 从 LotusScript 脚本库重写一个函数。LotusScript 函数包含前端和后端元素——输入框用于从用户那里收集信息——所以我想知道如何最好地做到这一点。是否可以从 ssjs 中使用 csjs 调用模态对话框窗口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T18:33:18.470

以下是用于显示/隐藏对话框的 SSJS 和 CSJS 命令：

SSJS：

```
var comp = getComponent("serverSideId");
//To Open the dialog
comp.show();
//To close the dialog
comp.hide(); 
```

CSJS

```
//To Open the dialog
XSP.openDialog("#{id:serverSideId}");
//To close the dialog
XSP.closeDialog("#{id:serverSideId}"); 
```

只是为了好玩，执行 CSJS 的 SSJS：

```
//To Open the dialog
facesContext.getViewRoot().postScript("XSP.openDialog('#{id:serverSideId}')");
//To Close the dialog
facesContext.getViewRoot().postScript("XSP.closeDialog('#{id:serverSideId}')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T15:06:23.623

你试过这个吗？

```
view.postScript("XSP.openDialog('#{id:dialog1}');"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:20:18.297

是的，看看 xe:dialog 控件。您可以使用 SSJS 显示和隐藏该对话框。

# html - 修复导航额外空间问题

> ID：16148333
> 
> 赞同：1
> 
> 时间：2013-04-22T13:27:31.067
> 
> 标签：html, css

```
 .bg {
        opacity:100%;
        margin-right:auto;
        margin-left:auto;
        background-image:url(../Images/navbg.png);
        background-size:84.5em 6em;
        background-position:center;
        background-repeat:no-repeat;
        width:84.5em;
        height:2.6875em;
        z-index:500;        
}

.fixed {
      position:fixed;
      top:0;
      left:0;
      z-index: 20;
    }
    @media (max-width:1219px){
        .fixed{
            position:absolute;
            width:84.5em;
            top:0;
            left:0;
            margin: 0em 0px 0px 0em;
        }   
    }

    ul {
      height: 1.25em;
      width: 68em;
       font-family:Verdana, Geneva, sans-serif;
      position:relative;
    }

    li {
      float: left; 
      list-style: none;
      margin: 0em 0em;
      text-transform: uppercase;
      letter-spacing: .25em;
      color: #000;
      font-family:Verdana, Geneva, sans-serif;
        border-top-left-radius: 1em 1em;/*Rounded Corners*/
        border-bottom-left-radius: 1em 1em;/*Rounded Corners*/
        border-top-right-radius: 1em 1em;/*Rounded Corners*/
        border-bottom-right-radius: 1em 1em;/*Rounded Corners*/

    }
    @media (max-width:1219px) {
        li {
        width:auto;
        height:1.45em;
        line-height:1.5em; 
        padding:0px;
        }
    }

    #nav{
 margin: -2.45em auto 0px 9.5em;

    }

    #nav a{
      text-decoration: none;
      letter-spacing:1px;
      text-shadow: 1px 1px 1px rgba(102,102,102,.0);
      font-family:Verdana, Geneva, sans-serif;
      color:#525252;
      font-size:.77em;
      position:relative;
      display:block;
      line-height:2em;

    }
    @media (max-width:1219px) {
        #nav a{
          text-decoration: none;
      letter-spacing:1px;
      text-shadow: 1px 1px 1px rgba(102,102,102,.0);
      font-family:Verdana, Geneva, sans-serif;
      color:#525252;
      font-size:11px;
      position:relative;
      display:block;
      line-height:2em;

        }
    }

    #nav a:hover{
    color: #fff;
    text-shadow: -2px 2px 2px #C9C9C9;
    font-size:.77em;
    position:relative;

    }
    @media (max-width:1219px) {
        #nav a:hover{
        color: #fff;
        text-shadow: -2px 2px 2px #C9C9C9;
        font-size:11px;
        position:relative;
        }
    }

    .blockhover{
        border-top-left-radius: 0em 0em;/*Rounded Corners*/
        border-bottom-left-radius: 0em 0em;/*Rounded Corners*/
        border-top-right-radius: 0em 0em;/*Rounded Corners*/
        border-bottom-right-radius: 0em 0em;/*Rounded Corners*/
    }
    ul.drop a { 
    color: #fff; 
    font-family: Verdana; 
    font-size: .875em; 
    text-decoration: none;
    position:relative;

    }

    ul.drop, ul.drop li, ul.drop ul {
    list-style: none; 
    margin: 0; 
    padding: 0; 
    color: #fff;
    position:relative;

    }

    ul.drop { 
    position: relative; 
    z-index: 597; 
    float: left; 

    }

    ul.drop li { 
    float: left; 
    line-height: 1.3em; 
    vertical-align: middle; 
    zoom: 1; 
    padding: .3125em .625em; 

    }
     ul.drop li:hover{

         position: relative; 
    z-index: 599; 
    cursor: default; 
    background: #CDBF85; 
    color:#fff;
     }
    ul.drop li.hover, { 
    position: relative; 
    z-index: 599; 
    cursor: default; 
    background: #C5B369; 
    color:#fff;

    }
    /*dropdown background*/
    ul.drop ul { 
    visibility: hidden; 
    position: absolute; 
    top: 100%; 
    left: 0; 
    z-index: 598; 
    width: 12.1875em; 
    background:#D3D3D3;
    height:auto;

    }

    ul.drop ul li { 
    float: none; 
    }

    ul.drop ul ul { 
    top: -.125em; 
    left: 100%; 
    }

    ul.drop li:hover > ul { 
    visibility: visible;

     }

    ul.drop li.hover {
        -webkit-transition: all .75s ease-in;
        -moz-transition: all .75s ease-in;
        -ms-transition: all .75s ease-in;
        -o-transition: all .75s ease-in;
        transition: all .75s ease-in;

    }ul.drop li.hover:active {
        background: #BCBA72;
    } 
```

我和其他一些人正在重新设计我们的高中网页，[因为它迫切需要它](http://lshs.leesummit.k12.mo.us/)！存在某种奇怪的边距问题，使页面右侧出现空白。我们无法弄清楚拯救我们生命的原因是什么。我们正在尝试实现固定导航，我们认为这是导致它的原因，但我们只是不知道代码在哪里。

[这是我们的最新版本](http://lshs.leesummit.k12.mo.us/lstest/index.html)，如果有人愿意验证我们的语法或解释一种更简单的方法来实现更流畅的固定导航，那将意味着很多！

```
<div class="fixed" align="center">
   <div class="bg"></div> 
<div id="nav">
  <ul class="drop hover">
     <li><a href="http://lshs.leesummit.k12.mo.us/">Home</a></li>
     <li><a href="#">Academics</a>
    <ul>
        <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/apluslshs/index.html">A+</a></li>
        <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/apilshs/index.html">API</a></li>
        <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/cslshs/index.html">Community Service</a></li>
        <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/iblshs/index.html">IB at LSHS</a></li>
        <li class="blockhover"><a href="http://www.leesummit.k12.mo.us/guidance/secprogramofstudy/secprogramofstudy.pdf">Programs of Study</a></li>
        <li class="blockhover"><a href="http://www.leesummit.k12.mo.us/secss/default.htm">Summer School</a></li>
      </ul>
      </li>

     <li><a href="http://lshs.leesummit.k12.mo.us/activitieslshs/index.htm">Clubs/Activities</a></li>

     <li><a href="http://www.ihigh.com/lstigers/index.html">Sports</a></li>

        <li><a href="#">Calendars</a>
      <ul>  <li class="blockhover"><a href="http://embed.revdel.com/4/allschool_monthview.php">All School Calendar</a></li>
            <li class="blockhover"><a href="http://embed.revdel.com/4/athleticcalendar.php">Athletic Calendar</a></li>
            <li class="blockhover"><a href="http://www.lsr7.org/district/about-us/">District Calendar</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/calendar/calendar.pdf">LSHS.PDF</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/tutoring/calendar.pdf">Tutoring Calendar</a></li>
      </ul>
      </li>

         <li><a href="#">Counseling</a>
      <ul>  <li class="blockhover"><a href="http://sites.lsr7.org/lshscounseling">Counseling Center</a></li>
            <li class="blockhover"><a href="http://www.lsr7.org/wp-content/uploads/2012/07/2013-2014-POS-Complete.pdf">Program of Study</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/transcriptslshs/instructions.pdf">Transcripts</a></li>
      </ul>
      </li>

         <li><a href="#">Media Center</a></li>

      <li><a href="#">Parents/Alumni</a>
      <ul>  <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/alumnilshs/index.html">Alumni</a></li>
            <li class="blockhover"><a href="http://lshstigerboosters.webs.com/">Booster Clubs</a></li>
            <li class="blockhover"><a href="#">Building Emails</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/hoflshs/index.html">Hall of Fame</a></li>
            <li class="blockhover"><a href="http://www.leesummit.k12.mo.us/nutrition/default.htm">Nutrition Services</a></li>
            <li class="blockhover"><a href="http://www.lshsptsa.com/">PTSA/Project Grad</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/plannerlshs/planner.pdf">Student Handbook</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/transcriptslshs/instructions.pdf">Transcripts</a></li>
      </ul>
      </li>    

      <li><a href="#">Staff</a>
      <ul>  <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/stafflshs/alpha.html">Alphabetical Listing</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/stafflshs/index.html">Staff by Department</a></li>
      </ul>
      </li>

      <li><a href="#">Student Life</a>
      <ul>  <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/artgallery/art.html">Art Gallery</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/schedule/index.html">Bell Schedule</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/courtwarming/index.html">Courtwarming 2012</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/activitieslshs/handbook/R7%20DistHB.pdf">District Handbook</a></li>
            <li class="blockhover"><a href="#">Fall Assembly 2012</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/faqlshs/index.html">FAQ</a></li>
            <li class="blockhover"><a href="      http://lshs.leesummit.k12.mo.us/eventslshs/schedule/index.html#finals">Finals Schedule</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/fe/index.html">Foreign Exchange</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/homecoming/index.html">Homecoming 2012</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/jrpage/index.html">Junior Information</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/stafflshs/sro/index.html">Recource Officer</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/eventslshs/srpage/index.html">Senior Information</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/somlshs/index.htm">Student of the Month</a></li>
            <li class="blockhover"><a href="http://lshs.leesummit.k12.mo.us/plannerlshs/planner.pdf">Student Planner</a></li> 
      </ul>
      </li>

    </ul>
</div><!--Nav Close-->
  </div><!--.Fixed Close-->
  <br />
&nbsp; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:31:28.183

添加`right: 0`到`.fixed`导航将自动拉伸并居中。

此外，您可以在页面上清理许多内容，其中之一是不必要地使用`z-index`. 首先，您不应该像您一样需要使用该物业；其次，你可以保持简单，也就是说，你不应该使用数字，比如`597`你可以简单地使用`10`,`20`等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:35:31.767

它实际上是对在fluidtiger.css中设置的margin-left做的你也将宽度设置为100％并且margin在外面，所以任何margin都会增加你的块的宽度。

如果其他人看到此页面，只想添加这个漂亮的小页面以供有关盒子模型的参考。 [http://www.w3.org/TR/CSS2/box.html](http://www.w3.org/TR/CSS2/box.html)

# c# - 不能将 null 值分配给 System.Int32 类型的成员，该类型是不可为 null 的值类型

> ID：16148335
> 
> 赞同：2
> 
> 时间：2013-04-22T13:27:39.940
> 
> 标签：c#, asp.net, sql, linq, sql-server-2008

运行此代码。在本地开发服务器上运行良好，但在实时服务器上运行良好。

```
try
{
    var qq =
    db.tblConstructReleaseDownloads
    .Where(c => c.UserID.HasValue && c.UserID.Value == userID)
    .OrderBy(c => c.DateStarted)
    .ThenBy(c => c.ReleaseID);

    var query = db.GetCommand(qq).CommandText;
    HttpContext.Current.Response.Write(query + "<br><br>");

    foreach (var d in qq)
    {
        HttpContext.Current.Response.Write("ID:" + d.ID + "<br>");
    } 
```

这会引发错误：

```
The null value cannot be assigned to a member with type System.Int32 which is a non-nullable value type. 
```

它打印出来的命令文本是：

```
SELECT     ID, ReleaseID, IP, DateCompleted, BytesServed, UserID, DateStarted, BytesPerSecond, TrackerVisitID
FROM         tblConstructReleaseDownloads AS t0
WHERE     (UserID IS NOT NULL) AND (UserID = @p0)
ORDER BY DateStarted, ReleaseID 
```

我在实时数据库上运行此查询，它工作正常，没有错误。

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-22T13:29:13.600

查询返回的列之一`NULL`在实时服务器上的数据库中包含一个值，但在开发服务器上不包含一个值。
因为您的域模型中的相应属性被定义为`int`而不是`int?`您应该将该列标记为*not nullable*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-09T12:57:17.313

如果您使用的是 MVC，请检查您的模型。在我检查模型并将 int 值更改为 Nullable int 之前，我为此挣扎了大约 3 个小时。现在就像一个魅力。

# actionscript-3 - 为什么我会得到“隐含的价值强制”；将 swc 从 Flash Pro CS6 导出到 Flash Builder 时出错？

> ID：16148337
> 
> 赞同：0
> 
> 时间：2013-04-22T13:27:43.767
> 
> 标签：actionscript-3, apache-flex, import, flash-builder, swc

我用类名创建我的符号

![在此处输入图像描述](https://i.stack.imgur.com/pcIga.png)

我作为 SWC 发布，在 flash 构建器中它看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/oPaQP.png) ![在此处输入图像描述](https://i.stack.imgur.com/VRI8S.png)

我**导入 MyRect**并尝试使用它

```
var redRect:MyRect = new MyRect;
     addChild(redRect); 
```

我收到一个错误

**将 MyRect 类型的值隐式强制转换为不相关的类型 DisplayObject....第 93 行 Flex 问题**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:53:35.443

我认为问题在于您如何声明它。它可能与对象类型有关。尝试这个：

```
var objects:Array;
objects = [0];
objects[0] = new MyRect();
addChild(objects[0]); 
```

看看会发生什么。

# asp.net - System.Web.Hosting 命名空间中的 ASP.NET 性能问题

> ID：16148338
> 
> 赞同：1
> 
> 时间：2013-04-22T13:27:45.097
> 
> 标签：asp.net, performance, redgate, red-gate-ants

我正在使用 RedGate ANTS 来解决 ASP.NET 3.5 WebForms 应用程序中的性能问题。有时单击非常小的页面时，加载最多需要 15 秒。这些页面没有任何数据——只有少数控件。

ANTS Profiler 告诉我热点方法（儿童时间 > 5 秒）都在 System.Web.Hosting 中，例如：

*   执行函数委托
*   管道运行时间

但是这些“自己的时间”每个都在 0.001 秒以下。没有什么是热点。那么，在这些方法“之下”可能是什么导致了这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:25:35.433

如果您想检查需要很长时间 IRL 的方法，您可能需要从 CPU 时间切换到挂钟时间。当您使用 CPU 时间时，可能没有考虑到异步等待 (WaitForSingleObject)。

# visual-studio-2012 - 包管理器控制台 - 更新特定项目

> ID：16148339
> 
> 赞同：19
> 
> 时间：2013-04-22T13:27:48.520
> 
> 标签：visual-studio-2012, nuget

关于包管理器控制台和“更新包”命令的快速问题。

我目前有一个解决方案托管两个 MVC 4.0 项目（其中一个是设置为启动项目）。

当我打开 时`Package Manager Console`，我选择要从中更新的项目`Default project dropdown`，然后启动“<code>Update-Package”命令。

令我惊讶的是，“<code>Update-Package”命令没有考虑我在其中选择的项目`Default project dropdown`，而是更新了我的两个 MVC 4.0 项目。

解决方法是在“Update-Package”命令中手动指定我的项目名称，如下所示：`Update-Package -ProjectName Kobo.Portal.Web`

出于好奇，有谁知道为什么 Update-Package 命令不考虑默认项目下拉列表中的选定/目标项目？

这是一个已知的问题？这是设计使然吗？如果包管理器控制台不考虑它，那么必须选择默认项目的目的是什么？

也许我对包管理器控制台的理解是错误的:-(

提前感谢任何人对此有所了解。

真诚的文斯

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-22T13:50:10.807

要更新特定项目，您可以指定

```
Update-Package -ProjectName <yourproject> 
```

要获得有关包管理控制台中命令的详细帮助，您可以键入

```
get-help update-package -detailed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-11T06:13:11.307

更新解决方案内 1 个项目中的所有现有 Nuget 包。请注意，在**包管理器控制台**中，自动完成适用于命令和项目名称和包

```
Update-Package -ProjectName Project1 -Reinstall 
```

# asp.net - 如何在asp.net后面的代码中的href内添加图像源

> ID：16148346
> 
> 赞同：0
> 
> 时间：2013-04-22T13:28:13.227
> 
> 标签：asp.net

我正在开发一个asp.net 网站。我有一个xml 文件。它有一个结构谎言：

```
 <Image Header="AboutUS">
<Imagepath>guest.jpg</Imagepath>
<imagetitle>welcomeguest</imagetitle> 
```

我必须读取这些数据并将其显示在 asp.net 页面中：我的代码如下所示。

```
 XmlDocument doc = new XmlDocument();
        doc.Load(Server.MapPath("~/multipleimage.xml"));
        XmlNode root = doc.DocumentElement;
        XmlNodeList nodeList = root.SelectNodes("Image");

        foreach (XmlNode node in nodeList)
        {
           HtmlAnchor a1 = new HtmlAnchor(); 
            Image imagesource = new Image();                
            string path = "Uploads/";
            string imageurl = path + node.SelectSingleNode("Imagepath").InnerText;             
            imagesource.Height = 95;
            imagesource.Width = 95;               

            Div1.Controls.Add(imagesource); 
```

现在我想对这个图像使用灯箱效果。但我不知道如何从后面的代码中为图像提供 ahref ......

需要帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:32:47.820

嘿，我找到了答案：

```
 HtmlAnchor a1 = new HtmlAnchor(); 
            Image imagesource = new Image();                
            string path = "Uploads/";
            string imageurl = path + node.SelectSingleNode("Imagepath").InnerText;

            imagesource.ImageUrl = imageurl;
            imagesource.Height = 95;
            imagesource.Width = 95;                
            a1.Attributes.Add("href", imageurl);
            a1.Controls.Add(imagesource);
            Div1.Controls.Add(a1); 
```

# iphone - 在 iphone SDK 中设置本地通知操作

> ID：16148352
> 
> 赞同：0
> 
> 时间：2013-04-22T13:28:26.930
> 
> 标签：iphone, ios, objective-c, xcode, uilocalnotification

在我的应用程序中，我在我的第一个视图控制器上安排了本地通知。它工作正常。要在“查看”按钮上设置操作，我的代码如下：

```
//AppDelegate.m

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UILocalNotification *localNotif =
    [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif)
    {
// did something Here when app launch by View button of notification
// added row in Db
}  
    return YES;
}

- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif
{

    // Handle the notificaton when the app is running
    NSLog(@"Recieved Notification %@",notif);

    app.applicationIconBadgeNumber=notif.applicationIconBadgeNumber++;
} 
```

**问题：它只在第一次工作正常。**

**但是第二次显示通知，但该行未添加到我的数据库中**

**// 已编辑**

当用户按下“查看”​​按钮时，我想采取一些行动。

我如何识别该操作？

**已编辑**

```
- (void)application:(UIApplication *)app didReceiveLocalNotification:(UILocalNotification *)notif
{

    // Handle the notificaton when the app is running
    NSLog(@"Recieved Notification %@",notif);

    app.applicationIconBadgeNumber=notif.applicationIconBadgeNumber++;

    UIApplicationState state = [app applicationState];
    if (state == UIApplicationStateInactive) {
        // Application was in the background when notification
        // was delivered.

        [self localNotif];

    }

}

- (void) localNotif
{

    [self databaseOpen];
    NSString *maxIdPt = [NSString stringWithFormat:@"select Max(id) from Points"];
    NSLog(@"Max id from points table %@",maxIdPt);
    NSMutableArray *p1 = [[NSMutableArray alloc]init];
    p1 = [[[database executeQuery:maxIdPt]mutableCopy]retain];

    int p=[[[p1 objectAtIndex:0]valueForKey:@"Max(id)"]intValue];
    NSLog(@"%d",p);

    NSString *maxPt = [NSString stringWithFormat:@"select Points from Points where id = %d",p];
    NSLog(@"Maxp %@",maxPt);
    NSMutableArray * p2 = [[NSMutableArray alloc]init];
    p2 =[[[database executeQuery:maxPt]mutableCopy]retain];

    int k = [[[p2 objectAtIndex:0]valueForKey:@"Points"]intValue];
    NSLog(@"Points %d",k);

    k = k + 250;

    NSLog(@"%d",k);

    NSString *mtpoints = [NSString stringWithFormat:@"insert into Points(Points) values (%d)",k];
    NSLog(@" lbl Points are %@",mtpoints);
    NSMutableArray * m1 = [[NSMutableArray alloc]init];
    m1 = [[[database executeQuery:mtpoints]mutableCopy]retain];
    [database close];

} 
```

我在应用程序中调用的相同方法**didFinishLaunchingWithOptions**

第一次更新分数，但第二次没有。甚至没有显示通知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T09:16:55.127

当用户按下通知中的按钮时，可能第二次`didFinishLaunchingWithOptions`没有调用该函数，因为应用程序已经在后台运行（而不是从非运行状态启动）。

您还必须处理函数调用

```
(void)application:(UIApplication *)application 
        didReceiveLocalNotification:(UILocalNotification *)notification {
// do your db update here, too ...
} 
```

为了涵盖您的应用程序已经在后台运行的情况。

**编辑：**

要查看应用程序是否已启动或已在运行（= 用户在通知上按下“查看”​​而不是应用程序在前台运行），请检查应用程序状态：

```
UIApplicationState state = [application applicationState];
  if (state == UIApplicationStateInactive) {
    // Application was in the background when notification
    // was delivered.
  } 
```

Credit to [Use Your Loaf - 使用 iOS 4 添加本地通知](http://useyourloaf.com/blog/2010/07/31/adding-local-notifications-with-ios-4.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T12:33:04.540

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        sk = [[SKDatabase alloc] init];
        NSString *db = @"MindEditor.db";
        [sk initWithDynamicFile:db];
        userid=@"0";
    }

   SKDatabase.h

//
//  SKDatabase.h
//  Version 1.1
//
//  Created by Shannon Appelcline on 9/11/08.
//  Copyright 2008 __MyCompanyName__. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <sqlite3.h>

@protocol SKDatabaseDelegate <NSObject>
@optional
- (void)databaseTableWasUpdated:(NSString *)table;
@end

@interface SKDatabase : NSObject {

    id<SKDatabaseDelegate> delegate;
    sqlite3 *dbh;
    BOOL dynamic;
}

@property (assign) id<SKDatabaseDelegate> delegate;
@property sqlite3 *dbh;
@property BOOL dynamic;

- (id)initWithFile:(NSString *)dbFile;
- (id)initWithDynamicFile:(NSString *)dbFile;
- (void)close;

- (sqlite3_stmt *)prepare:(NSString *)sql;

- (id)lookupColForSQL:(NSString *)sql;
- (NSDictionary *)lookupRowForSQL:(NSString *)sql;
- (NSArray *)lookupAllForSQL:(NSString *)sql;

- (int)lookupCountWhere:(NSString *)where forTable:(NSString *)table;
- (int)lookupMax:(NSString *)key Where:(NSString *)where forTable:(NSString *)table;
- (int)lookupSum:(NSString *)key Where:(NSString *)where forTable:(NSString *)table;

- (void)insertArray:(NSArray *)dbData forTable:(NSString *)table;
- (void)insertDictionary:(NSDictionary *)dbData forTable:(NSString *)table;

- (void)updateArray:(NSArray *)dbData forTable:(NSString *)table;
- (void)updateArray:(NSArray *)dbData forTable:(NSString *)table where:(NSString *)where;
- (void)updateDictionary:(NSDictionary *)dbData forTable:(NSString *)table;
- (void)updateDictionary:(NSDictionary *)dbData forTable:(NSString *)table where:(NSString *)where;
- (void)updateSQL:(NSString *)sql forTable:(NSString *)table;

- (void)deleteWhere:(NSString *)where forTable:(NSString *)table;

- (BOOL)runDynamicSQL:(NSString *)sql forTable:(NSString *)table;

@end

   SKDatabase.m

//
//  SKDatabase.m
//  Version 1.1
//
//  Created by Shannon Appelcline on 9/11/08.
//  Copyright 2008 __MyCompanyName__. All rights reserved.
//

#import "SKDatabase.h"

@implementation SKDatabase

@synthesize delegate;
@synthesize dbh;
@synthesize dynamic;

// Two ways to init: one if you're just SELECTing from a database, one if you're UPDATing
// and or INSERTing

- (id)initWithFile:(NSString *)dbFile {
    if (self = [super init]) {

        NSString *paths = [[NSBundle mainBundle] resourcePath];
        NSString *path = [paths stringByAppendingPathComponent:dbFile];

        int result = sqlite3_open([path UTF8String], &dbh);
        NSAssert1(SQLITE_OK == result, NSLocalizedStringFromTable(@"Unable to open the sqlite database (%@).", @"Database", @""), [NSString stringWithUTF8String:sqlite3_errmsg(dbh)]); 
        self.dynamic = NO;
    }

    return self;    
}

- (id)initWithDynamicFile:(NSString *)dbFile {
    if (self = [super init]) {

        NSArray *docPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *docDir = [docPaths objectAtIndex:0];
        NSString *docPath = [docDir stringByAppendingPathComponent:dbFile];

        NSFileManager *fileManager = [NSFileManager defaultManager];

        if (![fileManager fileExistsAtPath:docPath]) {

            NSString *origPaths = [[NSBundle mainBundle] resourcePath];
            NSString *origPath = [origPaths stringByAppendingPathComponent:dbFile];

            NSError *error;
            int success = [fileManager copyItemAtPath:origPath toPath:docPath error:&error];            
            NSAssert1(success,[NSString stringWithString:@"Failed to copy database into dynamic location"],error);
        }
        int result = sqlite3_open([docPath UTF8String], &dbh);
        NSAssert1(SQLITE_OK == result, NSLocalizedStringFromTable(@"Unable to open the sqlite database (%@).", @"Database", @""), [NSString stringWithUTF8String:sqlite3_errmsg(dbh)]); 
        self.dynamic = YES;
    }

    return self;    
}

// Users should never need to call prepare

- (sqlite3_stmt *)prepare:(NSString *)sql {

    const char *utfsql = [sql UTF8String];

    sqlite3_stmt *statement;

    if (sqlite3_prepare([self dbh],utfsql,-1,&statement,NULL) == SQLITE_OK) {
        return statement;
    } else {
        return 0;
    }
}

// Three ways to lookup results: for a variable number of responses, for a full row
// of responses, or for a singular bit of data

- (NSArray *)lookupAllForSQL:(NSString *)sql {
    sqlite3_stmt *statement;
    id result;
    NSMutableArray *thisArray = [NSMutableArray arrayWithCapacity:4];
    if (statement = [self prepare:sql]) {
        while (sqlite3_step(statement) == SQLITE_ROW) { 
            NSMutableDictionary *thisDict = [NSMutableDictionary dictionaryWithCapacity:4];
            for (int i = 0 ; i < sqlite3_column_count(statement) ; i++) 
            {
                if (sqlite3_column_decltype(statement,i) != NULL &&
                    strcasecmp(sqlite3_column_decltype(statement,i),"Boolean") == 0)
                {
                    result = [NSNumber numberWithBool:(BOOL)sqlite3_column_int(statement,i)];
                } 
                else if (sqlite3_column_type(statement, i) == SQLITE_TEXT)
                {
                    result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,i)];
                } 
                else if 
                    (sqlite3_column_type(statement,i) == SQLITE_INTEGER)
                {
                    result = [NSNumber numberWithInt:(int)sqlite3_column_int(statement,i)];
                } 
                else if (sqlite3_column_type(statement,i) == SQLITE_FLOAT)
                {
                    result = [NSNumber numberWithFloat:(float)sqlite3_column_double(statement,i)];                  
                }
                else 
                {
                    result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,i)];
                }
                if (result) 
                {
                    [thisDict setObject:result
                                 forKey:[NSString stringWithUTF8String:sqlite3_column_name(statement,i)]];
                }
            }
            [thisArray addObject:[NSDictionary dictionaryWithDictionary:thisDict]];
            [thisArray retain];
        }
    }
    sqlite3_finalize(statement);
    return thisArray;
}

- (NSDictionary *)lookupRowForSQL:(NSString *)sql {
    sqlite3_stmt *statement;
    id result;
    NSMutableDictionary *thisDict = [NSMutableDictionary dictionaryWithCapacity:4];
    if (statement = [self prepare:sql]) 
    {
        if (sqlite3_step(statement) == SQLITE_ROW) 
        {   
            for (int i = 0 ; i < sqlite3_column_count(statement) ; i++) 
            {
                if (strcasecmp(sqlite3_column_decltype(statement,i),"Boolean") == 0)
                {
                    result = [NSNumber numberWithBool:(BOOL)sqlite3_column_int(statement,i)];
                } 
                else if (sqlite3_column_type(statement, i) == SQLITE_TEXT) 
                {
                    result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,i)];
                } 
                else if (sqlite3_column_type(statement,i) == SQLITE_INTEGER)
                {
                    result = [NSNumber numberWithInt:(int)sqlite3_column_int(statement,i)];
                } 
                else if (sqlite3_column_type(statement,i) == SQLITE_FLOAT)
                {
                    result = [NSNumber numberWithFloat:(float)sqlite3_column_double(statement,i)];                  
                } 
                else 
                {
                    result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,i)];
                }
                if (result) 
                {
                    [thisDict setObject:result
                                 forKey:[NSString stringWithUTF8String:sqlite3_column_name(statement,i)]];
                }
            }
        }
    }
    sqlite3_finalize(statement);
    return thisDict;
}

- (id)lookupColForSQL:(NSString *)sql {

    sqlite3_stmt *statement;
    id result;
    if (statement = [self prepare:sql]) {
        if (sqlite3_step(statement) == SQLITE_ROW) {        
            if (strcasecmp(sqlite3_column_decltype(statement,0),"Boolean") == 0) {
                result = [NSNumber numberWithBool:(BOOL)sqlite3_column_int(statement,0)];
            } else if (sqlite3_column_type(statement, 0) == SQLITE_TEXT) {
                result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,0)];
            } else if (sqlite3_column_type(statement,0) == SQLITE_INTEGER) {
                result = [NSNumber numberWithInt:(int)sqlite3_column_int(statement,0)];
            } else if (sqlite3_column_type(statement,0) == SQLITE_FLOAT) {
                result = [NSNumber numberWithDouble:(double)sqlite3_column_double(statement,0)];                    
            } else {
                result = [NSString stringWithUTF8String:(char *)sqlite3_column_text(statement,0)];
            }
        }
    }
    sqlite3_finalize(statement);
    return result;

}

// Simple use of COUNTS, MAX, etc.

- (int)lookupCountWhere:(NSString *)where forTable:(NSString *)table {

    int tableCount = 0;
    NSString *sql = [NSString stringWithFormat:@"SELECT COUNT(*) FROM %@ WHERE %@",
                     table,where];      
    sqlite3_stmt *statement;

    if (statement = [self prepare:sql]) {
        if (sqlite3_step(statement) == SQLITE_ROW) {        
            tableCount = sqlite3_column_int(statement,0);
        }
    }
    sqlite3_finalize(statement);
    return tableCount;

}

- (int)lookupMax:(NSString *)key Where:(NSString *)where forTable:(NSString *)table {

    int tableMax = 0;
    NSString *sql = [NSString stringWithFormat:@"SELECT MAX(%@) FROM %@ WHERE %@",
                     key,table,where];      
    sqlite3_stmt *statement;
    if (statement = [self prepare:sql]) {
        if (sqlite3_step(statement) == SQLITE_ROW) {        
            tableMax = sqlite3_column_int(statement,0);
        }
    }
    sqlite3_finalize(statement);
    return tableMax;

}

- (int)lookupSum:(NSString *)key Where:(NSString *)where forTable:(NSString *)table {

    int tableSum = 0;
    NSString *sql = [NSString stringWithFormat:@"SELECT SUM(%@) FROM %@ WHERE %@",
                     key,table,where];      
    sqlite3_stmt *statement;
    if (statement = [self prepare:sql]) {
        if (sqlite3_step(statement) == SQLITE_ROW) {        
            tableSum = sqlite3_column_int(statement,0);
        }
    }
    sqlite3_finalize(statement);
    return tableSum;

}

// INSERTing and UPDATing

- (void)insertArray:(NSArray *)dbData forTable:(NSString *)table {

//  NSMutableString *sql = [NSMutableString stringWithCapacity:16];
//  [sql appendFormat:@"INSERT INTO %@ (",table];
//  
//  
//  for (int i = 0 ; i < [dbData count] ; i++) {
//      NSLog(@"%@",[[dbData objectAtIndex:i] objectForKey:@"mid"]);
//      [sql appendFormat:@"%@",[[dbData objectAtIndex:i] objectForKey:@"key"]];
//      if (i + 1 < [dbData count]) {
//          [sql appendFormat:@", "];
//      }
//  }
//  [sql appendFormat:@") VALUES("];
//  for (int i = 0 ; i < [dbData count] ; i++) {
//      if ([[[dbData objectAtIndex:i] objectForKey:@"value"] intValue]) {
//          [sql appendFormat:@"%@",[[[dbData objectAtIndex:i] objectForKey:@"value"] intValue]];
//      } else {
//          [sql appendFormat:@"'%@'",[[dbData objectAtIndex:i] objectForKey:@"value"]];
//      }
//      if (i + 1 < [dbData count]) {
//          [sql appendFormat:@", "];
//      }
//  }
//  [sql appendFormat:@")"];
//  [self runDynamicSQL:sql forTable:table];
    for(int i=0;i<[dbData count];i++)
    {
        NSDictionary *dict=[dbData objectAtIndex:i];
        NSMutableString *sql = [NSMutableString stringWithCapacity:16];
        [sql appendFormat:@"INSERT INTO %@ (",table];

        NSArray *dataKeys = [dict allKeys];
        for (int i = 0 ; i < [dataKeys count] ; i++) {
            [sql appendFormat:@"%@",[dataKeys objectAtIndex:i]];
            if (i + 1 < [dataKeys count]) {
                [sql appendFormat:@", "];
            }
        }

        [sql appendFormat:@") VALUES("];
        for (int i = 0 ; i < [dataKeys count] ; i++) {
            if ([[dict objectForKey:[dataKeys objectAtIndex:i]] intValue]) {
                [sql appendFormat:@"%@",[dict objectForKey:[dataKeys objectAtIndex:i]]];
            } else {
                [sql appendFormat:@"'%@'",[dict objectForKey:[dataKeys objectAtIndex:i]]];
            }
            if (i + 1 < [dict count]) {
                [sql appendFormat:@", "];
            }
        }

        [sql appendFormat:@")"];
        [self runDynamicSQL:sql forTable:table];
    }
}

- (void)insertDictionary:(NSDictionary *)dbData forTable:(NSString *)table {

    NSMutableString *sql = [NSMutableString stringWithCapacity:16];
    [sql appendFormat:@"INSERT INTO %@ (",table];

    NSArray *dataKeys = [dbData allKeys];
    for (int i = 0 ; i < [dataKeys count] ; i++) {
        [sql appendFormat:@"%@",[dataKeys objectAtIndex:i]];
        if (i + 1 < [dbData count]) {
            [sql appendFormat:@", "];
        }
    }

    [sql appendFormat:@") VALUES("];
    for (int i = 0 ; i < [dataKeys count] ; i++) {
        //if ([[dbData objectForKey:[dataKeys objectAtIndex:i]] intValue]) {
//          [sql appendFormat:@"%@",[dbData objectForKey:[dataKeys objectAtIndex:i]]];
//      } else {

        [sql appendFormat:@"'%@'",[dbData objectForKey:[dataKeys objectAtIndex:i]]];
        //}
        if (i + 1 < [dbData count]) {
            [sql appendFormat:@", "];
        }
    }

    [sql appendFormat:@")"];
    [self runDynamicSQL:sql forTable:table];
}

- (void)updateArray:(NSArray *)dbData forTable:(NSString *)table { 
    [self updateArray:dbData forTable:table where:NULL];
}

- (void)updateArray:(NSArray *)dbData forTable:(NSString *)table where:(NSString *)where {

    NSMutableString *sql = [NSMutableString stringWithCapacity:16];
    [sql appendFormat:@"UPDATE %@ SET ",table];

    for (int i = 0 ; i < [dbData count] ; i++) {
        if ([[[dbData objectAtIndex:i] objectForKey:@"value"] intValue]) {
            [sql appendFormat:@"%@=%@",
             [[dbData objectAtIndex:i] objectForKey:@"key"],
             [[dbData objectAtIndex:i] objectForKey:@"value"]];
        } else {
            [sql appendFormat:@"%@='%@'",
             [[dbData objectAtIndex:i] objectForKey:@"key"],
             [[dbData objectAtIndex:i] objectForKey:@"value"]];
        }       
        if (i + 1 < [dbData count]) {
            [sql appendFormat:@", "];
        }
    }
    if (where != NULL) {
        [sql appendFormat:@" WHERE %@",where];
    } else {
        [sql appendFormat:@" WHERE 1",where];
    }       
    [self runDynamicSQL:sql forTable:table];
}

- (void)updateDictionary:(NSDictionary *)dbData forTable:(NSString *)table { 
    [self updateDictionary:dbData forTable:table where:NULL];
}

- (void)updateDictionary:(NSDictionary *)dbData forTable:(NSString *)table where:(NSString *)where {

    NSMutableString *sql = [NSMutableString stringWithCapacity:16];
    [sql appendFormat:@"UPDATE %@ SET ",table];

    NSArray *dataKeys = [dbData allKeys];
    for (int i = 0 ; i < [dataKeys count] ; i++) {
        if ([[dbData objectForKey:[dataKeys objectAtIndex:i]] intValue]) {
            [sql appendFormat:@"%@=%@",
             [dataKeys objectAtIndex:i],
             [dbData objectForKey:[dataKeys objectAtIndex:i]]];
        } else {
            [sql appendFormat:@"%@='%@'",
             [dataKeys objectAtIndex:i],
             [dbData objectForKey:[dataKeys objectAtIndex:i]]];
        }       
        if (i + 1 < [dbData count]) {
            [sql appendFormat:@", "];
        }
    }
    if (where != NULL) {
        [sql appendFormat:@" WHERE %@",where];
    }
    [self runDynamicSQL:sql forTable:table];
}

- (void)updateSQL:(NSString *)sql forTable:(NSString *)table {
    [self runDynamicSQL:sql forTable:table];
}

- (void)deleteWhere:(NSString *)where forTable:(NSString *)table {

    NSString *sql = [NSString stringWithFormat:@"DELETE FROM %@ WHERE %@",
                     table,where];
    [self runDynamicSQL:sql forTable:table];
}

// INSERT/UPDATE/DELETE Subroutines

- (BOOL)runDynamicSQL:(NSString *)sql forTable:(NSString *)table {

    int result;
    //NSAssert1(self.dynamic == 1,[NSString stringWithString:@"Tried to use a dynamic function on a static database"],NULL);
    sqlite3_stmt *statement;
    if (statement = [self prepare:sql]) {
        result = sqlite3_step(statement);
    }       
    sqlite3_finalize(statement);
    if (result) {
        if (self.delegate != NULL && [self.delegate respondsToSelector:@selector(databaseTableWasUpdated:)]) {
            [delegate databaseTableWasUpdated:table];
        }   
        return YES;
    } else {
        return NO;
    }

}

// requirements for closing things down

- (void)dealloc {
    [self close];
    [delegate release];
    [super dealloc];
}

- (void)close {

    if (dbh) {
        sqlite3_close(dbh);
    }
}

@end 
```

# python - UnicodeDecodeError：“utf-8”编解码器无法解码位置 434852 中的字节 0xe2：无效的继续字节

> ID：16148356
> 
> 赞同：7
> 
> 时间：2013-04-22T13:28:33.663
> 
> 标签：python, xml

我正在使用 hfcca 计算 C++ 代码的圈复杂度。hfcca 是一个简单的 Python 脚本（[https://code.google.com/p/headerfile-free-cyclomatic-complexity-analyzer/](https://code.google.com/p/headerfile-free-cyclomatic-complexity-analyzer/)）。当我尝试运行脚本以生成 xml 文件形式的输出时，出现以下错误：

```
Traceback (most recent call last):
    "./hfcca.py", line 802, in <module>
    main(sys.argv[1:])
    File "./hfcca.py", line 798, in main
    print(xml_output([f for f in r], options))
    File "./hfcca.py", line 798, in <listcomp>
    print(xml_output([f for f in r], options))
    File "/x/home06/smanchukonda/PREFIX/lib/python3.3/multiprocessing/pool.py", line 652, in next
    raise value
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xe2 in position 434852: invalid continuation byte 
```

请在这件事上给予我帮助..

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-22T13:41:44.213

The problem looks like the file has characters represented with latin1 that aren't characters in utf8\. The `file` utility can be useful for figuring out what encoding a file should be treated as, e.g:

```
monk@monk-VirtualBox:~$ file foo.txt 
foo.txt: UTF-8 Unicode text 
```

Here's what the bytes mean in latin1:

```
>>> b'\xe2'.decode('latin1')
'â' 
```

Probably easiest is to convert the files to utf8.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-02T10:24:37.257

我在渲染 Markup("""yyyyyy""") 时也遇到了同样的问题，但我使用在线工具解决了这个问题，删除了“坏”字符。[https://pteo.paranoiaworks.mobi/diacriticsremover/](https://pteo.paranoiaworks.mobi/diacriticsremover/)

这是一个不错的工具，甚至可以离线使用。

# c# - 如何绑定我的列表 到datagridView？

> ID：16148361
> 
> 赞同：0
> 
> 时间：2013-04-22T13:28:40.257
> 
> 标签：c#, list, datagridview, bindinglist

我正在尝试使用以下代码在 datagridview 中显示列表的内容。

```
List<string> data = new List<string>(); 
dataGridView1.DataSource = data; 
```

我正在将我的数据添加到 backgroundWorker 的列表中。如果我将**List**更改为**BindingList**，我会收到一条错误消息

```
Cross-thread operation not valid: Control 'dataGridView1' accessed from a thread other than the thread it was created on. 
```

但是，如果我使用列表，当显示数据网格时，我会得到第三列，它只包含类别中每个条目的字符串长度。

有谁知道在使用 BackgroundWorker 时如何让数据网格显示字符串内容而不是字符串长度？

* * *

```
 private void OnBackgroundWorkerDoWork(object sender, DoWorkEventArgs e)
    {            
        importExcelFile();            
    }

    private void importExcelFile()
    {
        // hard coded file name for testing. 
        TextFieldParser parser = new TextFieldParser(@"E:\\test.csv");
        parser.TextFieldType = FieldType.Delimited;
        parser.SetDelimiters(",");

        while (!parser.EndOfData)
        {
            //Processing row
            string[] fields = parser.ReadFields();
            foreach (string field in fields)
            {
                //TODO: Process field
                data.Add(field);
            }
        }
        parser.Close();
    }

    private void loadFileToolStripMenuItem_Click(object sender, EventArgs e)
    {
        backgroundWorker1.DoWork += OnBackgroundWorkerDoWork;
        backgroundWorker1.RunWorkerAsync();
    }

    private void OnBackgroundWorkerRunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        dataGridView1.DataSource = data;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:35:55.340

请创建一个委托并调用委托使用`control.Invoke`

您可以像这样使用调用：

```
private void AddToListBox(object oo)
{
    Invoke(new MethodInvoker(delegate { listBox.Items.Add(oo); }));
} 
```

更多关于[后台工作者](http://www.dotnetperls.com/backgroundworker)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:34:18.477

您可以使用`BackgroundWorker.ReportProgress`. 我允许传递进度和自定义对象（[MSDN 上的全牙列](http://msdn.microsoft.com/pl-pl/library/a3zbdb1t.aspx)）。处理此事件是 UI 线程，因此它是正确的。

如果你最后需要这个，只需使用 RunWorkerCompletedEventArgs.Result （[在 MSDN 上再次定义](http://msdn.microsoft.com/pl-pl/library/system.componentmodel.runworkercompletedeventargs.aspx)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:49:43.000

基于[如何将 List<string> 绑定到 DataGridView 控件？](https://stackoverflow.com/questions/479329/how-to-bind-a-string-list-to-a-datagrid)

我创建了一个类

```
public class StringValue
{
    public StringValue(string s)
    {
        _value = s;
    }
    public string Value { get { return _value; } set { _value = value; } }
    string _value;
} 
```

然后将列表更改为列表

我正在获取数据，但它出现在第 3 列中。我只假设有 2 列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-10T06:43:44.397

使用此代码。我也遇到了类似的问题，但使用 LinQ 对其进行了整理。

```
IList<String> listObj = new List<String>();
dataGridView1.DataSource = listObj.Select(x => new { Value = x }).ToList(); 
```

这里，

```
dataGridView1 :- ID of datagridview 
```

# android - 将相机图片传递给 OpenCV 时出现 OutOfMemoryException

> ID：16148364
> 
> 赞同：4
> 
> 时间：2013-04-22T13:28:58.477
> 
> 标签：android, memory-management, android-camera

我正在从相机捕获图像，我想通过 OpenCV 中的一些处理。在较旧的设备上，这在第一个障碍中失败了：

```
public void onPictureTaken(byte[] jpeg, Camera c) {
  mImageBitmap = BitmapFactory.decodeByteArray(jpeg, 0, jpeg.length);
  org.opencv.android.Utils.bitmapToMat(mImageBitmap, Utils.cameraMat);
  ...
} 
```

产生：

```
04-22 14:23:41.708: I/System.out(7289): Available memory (bytes): 5646168
04-22 14:23:41.718: I/dalvikvm-heap(7289): Forcing collection of SoftReferences for 51121168-byte allocation
04-22 14:23:41.758: E/dalvikvm-heap(7289): Out of memory on a 51121168-byte allocation. 
```

阅读有关此内容的建议似乎是使用较小版本的图像，但是在给定设备上剩余的可用内存量的情况下，我如何大致计算出要调整大小的尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:02:59.013

[您可以通过getMemoryClass](http://developer.android.com/reference/android/app/ActivityManager.html#getMemoryClass%28%29)了解您的应用程序总共可以使用多少内存。您必须计算出您使用应用程序的其他数据以及上面的解码位图消耗了多少。

一些粗略的估计：

S II 有一个 8 MP 相机。假设一个 RGB24 位图，单个解码位图将占用 8 * 3 = 24 MB 的内存。OpenCV 矩阵可能会占用大致相同的空间，可能更多取决于其内部格式（内存不足错误表明它正在尝试分配 ~48 MB，这大约是此处预期的两倍）。

这很容易超过标准应用程序可用于内存的容量 - 最小基线仅为 16 MB。如果您需要更多内存，您可能希望考虑使用大堆而不是正常大小的[堆。](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)这将使您获得大约两倍的内存，尽管它仍然依赖于设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:20:09.377

在将图像传递给 openCV 之前，您需要调整图像大小。解码指令会消耗大量内存，因为它将完整的图像加载到内存中。即使你不显示它。

本[官方教程](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)将向您展示如何调整图像大小而无需先将其加载到内存中

# php - 将画布图像和表单数据发送到服务器以命名 png

> ID：16148371
> 
> 赞同：0
> 
> 时间：2013-04-22T13:29:19.580
> 
> 标签：php, javascript, forms, canvas

嗨，我需要将表单数据与画布图像一起提交。然后使用该表单数据命名保存在服务器上的文件。我刚刚开始掌握 PHP，所以任何帮助都会很棒。

这是我的工作示例，它将相同的命名文件保存到服务器。

HTML

```
 <form action="name.php" method="post">
        Name: <input type="text" name="fname">
        Age: <input type="text" name="age">
        <input type="button" onclick="saveImage();formSubmit();" value="Submit form">
 </form> 
```

JS

```
function saveImage(){
var xmlhttp;
xmlhttp=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
xmlhttp.onreadystatechange=function()
{
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        //do something with the response
    }
}
xmlhttp.open("POST","upload.php",true);
var oldCanvas = document.getElementById('colors_sketch').toDataURL("image/png");
var img = new Image();
img.src = oldCanvas;
xmlhttp.setRequestHeader("Content-type", "application/upload")
xmlhttp.send(oldCanvas); 
```

}

PHP

```
$data = file_get_contents('php://input');

$canvasImg = imagecreatefrompng($data);
$width  = imagesx($canvasImg);
$height = imagesy($canvasImg);

$outImg = imagecreatetruecolor($width, $height);
$color = imagecolorallocatealpha($outImg, 255, 255, 255, 127);
imagefill($outImg, 0, 0, $color);
imagecopy($outImg, $canvasImg, 0, 0, 0, 0, $width, $height);

imagepng($outImg, 'test.png'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T20:07:40.043

**以下是将您的表单和图像发送到 upload.php 的步骤**

首先创建一个要发送的数据包，其中包含您的序列化图像和表单。这里我使用jquery来序列化你的表单（或者不用jquery自己序列化）。

```
// serialize and concatenate both form and canvas image
var package=$("form").serialize() + "&imageDataURL="+canvas.toDataURL(); 
```

然后使用 AJAX 将其发布到您的 PHP 服务器：

```
// ajax it
postImagePlusForm();

function postImagePlusForm(){
    $.ajax({  
        type: "POST",  
        url: "upload.php",  
        data: package,  
        success: function(value) {  
            // ...we have success!
        }
    });
} 
```

最后捕获它并在 php 中处理它：

```
<?php 
if ( isset($_POST["imageDataURL"]) && !empty($_POST["imageDataURL"]) ) {    
    // create $dataURL
    $dataURL = $_POST["imageDataURL"];  
    // Extract base64 data
    // we have an unneeded header, zap it
    $parts = explode(',', $dataURL);  
    $data = $parts[1];  
    // Decode
    $data = base64_decode($data);  
    // Save
    $fp = fopen('newImage.png', 'w');  
    fwrite($fp, $data);  
    fclose($fp); 
}
if ( isset($_POST["formData"]) && !empty($_POST["formData"]) ) {    
    $formData = $_POST['formData'];
    foreach ($formValue as $x) {
        // do whatever you need to do with each form value ($x)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:23:01.160

这个问题在 SO 上被问了很多次。

我已经在这里回答了同样的问题： [https ://stackoverflow.com/a/13198699/1090562](https://stackoverflow.com/a/13198699/1090562)

简而言之，这可以通过这个来实现，更多细节 - 阅读链接

```
$.ajax({
  type: "POST",
  url: "script.php",
  data: { 
     imgBase64: canvas.toDataURL();
  }
}).done(function(o) {
  console.log('saved');
}); 
```

# android - 刷新 ListView 不起作用

> ID：16148373
> 
> 赞同：0
> 
> 时间：2013-04-22T13:29:26.167
> 
> 标签：android, android-listview, android-adapter

当我删除所有项目时，我正在尝试刷新我的 ListView。当调用删除函数时，sqlite 表被清除。这部分工作正常。但我无法刷新listView。我尝试了 notifyDataSetChanged() 和 invalidate()，但没有任何效果。

有任何想法吗？

```
public class ResultsAdapter 
        extends BaseAdapter {

    private LayoutInflater inflater;

    private ResultsTypeOneOpenHelper    resultsTypeOne_db;
    private ResultsTypeTwoOpenHelper    resultsTypeTwo_db;
    private ResultsTypeThreeOpenHelper  resultsTypeThree_db;

    private ArrayList<Object> results;

    static class ViewHolder {
        TextView text;
    }

    public ResultsAdapter(Context context) {
        this.inflater = LayoutInflater.from(context);

        resultsTypeOne_db = new ResultsTypeOneOpenHelper(context);
        resultsTypeTwo_db = new ResultsTypeTwoOpenHelper(context);
        resultsTypeThree_db = new ResultsTypethreeOpenHelper(context);
        results = new ArrayList<Object>();

        /* get results from sqlite */
        if (resultsTypeOne_db.getRowCount() != 0) {
            results.addAll( resultsTypeOne_db.getAllTypeOneResults() );
        }
        if (resultsTypeTwo_db.getRowCount() != 0) {
            results.addAll( resultsTypeTwo_db.getAllTypeTwoResults() );
        }
        if (resultsTypeThree_db.getRowCount() != 0) {
            results.addAll( resultsTypeThree_db.getAllTypeThreeResults() );
        }
    }

    @Override
    public int getCount() {
        return results.size();
    }

    @Override
    public Object getItem(int position) {
        Object item = results.get(position);
        return item;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        ViewHolder viewHolder;

        if (rowView == null) {
            rowView = inflater.inflate(R.layout.results_list_row, null);
            viewHolder = new ViewHolder();
            viewHolder.text = (TextView) rowView.findViewById(R.id.results_list_textView);
            rowView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) rowView.getTag();
        }
        viewHolder.text.setText( results.get(position).toString() );

        return rowView;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:34:43.390

您可以尝试再次调用`setListAdapter`。`ListActivity`当所有项目都被删除时，如果你正在使用而不是，则调用/方法`setListAdapter`的方法。`ListActivity``setAdapter``ListView``Activity``ListActivity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T06:34:25.530

删除数据后，首先清除 ArrayList，然后再次获取新数据并将其存储在 ArrayList 中，然后使用 ListView 方法 setListAdapter(adapter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T06:43:09.600

在你的情况下。`ResultsAdapter` 在类中创建方法，例如：

```
public void refreshadapter(Context context){

resultsTypeOne_db = new ResultsTypeOneOpenHelper(context);
        resultsTypeTwo_db = new ResultsTypeTwoOpenHelper(context);
        resultsTypeThree_db = new ResultsTypethreeOpenHelper(context);
        results.clear();

        /* get results from sqlite */
        if (resultsTypeOne_db.getRowCount() != 0) {
            results.addAll( resultsTypeOne_db.getAllTypeOneResults() );
        }
        if (resultsTypeTwo_db.getRowCount() != 0) {
            results.addAll( resultsTypeTwo_db.getAllTypeTwoResults() );
        }
        if (resultsTypeThree_db.getRowCount() != 0) {
            results.addAll( resultsTypeThree_db.getAllTypeThreeResults() );
        }
} 
```

从您的活动中调用此方法

你需要调用这个方法的对象，当你这样做时你已经有了`setAdapter()`

所以，打电话使用..

```
reslutAdapter.refreshadapter(myActivity.this);
reslutAdapter.notifyDataSetChanged(); 
```

# c# - HtmlAgilityPackSanitizerProvider 不工作我做错了吗？

> ID：16148378
> 
> 赞同：0
> 
> 时间：2013-04-22T13:29:33.557
> 
> 标签：c#, asp.net, xss, html-agility-pack

ASP.NET 4.5，IIS 8

消毒剂甚至没有删除这个简单的脚本

```
<script>alert('error')</script> 
```

好的，我的配置

```
 <asp:TextBox ID="txtMessageBody" TextMode="MultiLine" Height="500px" runat="server"
 CssClass="MessageSendArea" MaxLength="4000" ClientIDMode="Static" />

        <ajaxToolkit:HtmlEditorExtender ID="htmlEditorExtender1" TargetControlID="txtMessageBody"
                    runat="server" DisplaySourceTab="True">
                    <Toolbar>
                        <ajaxToolkit:Undo />
                        <ajaxToolkit:Redo />
                        <ajaxToolkit:Bold />
                        <ajaxToolkit:Italic />
                        <ajaxToolkit:Underline />
                        <ajaxToolkit:StrikeThrough />
                        <ajaxToolkit:Subscript />
                        <ajaxToolkit:Superscript />
                        <ajaxToolkit:JustifyLeft />
                        <ajaxToolkit:JustifyCenter />
                        <ajaxToolkit:JustifyRight />
                        <ajaxToolkit:JustifyFull />
                        <ajaxToolkit:InsertOrderedList />
                        <ajaxToolkit:InsertUnorderedList />
                        <ajaxToolkit:CreateLink />
                        <ajaxToolkit:UnLink />
                        <ajaxToolkit:RemoveFormat />
                        <ajaxToolkit:SelectAll />
                        <ajaxToolkit:UnSelect />
                        <ajaxToolkit:Delete />
                        <ajaxToolkit:Cut />
                        <ajaxToolkit:Copy />
                        <ajaxToolkit:Paste />
                        <ajaxToolkit:BackgroundColorSelector />
                        <ajaxToolkit:ForeColorSelector />
                        <ajaxToolkit:FontNameSelector />
                        <ajaxToolkit:FontSizeSelector />
                        <ajaxToolkit:Indent />
                        <ajaxToolkit:Outdent />
                        <ajaxToolkit:InsertHorizontalRule />
                        <ajaxToolkit:HorizontalSeparator />
                    </Toolbar>
                </ajaxToolkit:HtmlEditorExtender> 
```

这是我的网络配置

```
 <configSections>
<sectionGroup name="system.web">
  <section name="sanitizer" requirePermission="false" type="AjaxControlToolkit.Sanitizer.ProviderSanitizerSection, AjaxControlToolkit"/>
</sectionGroup> 
```

```
 <trust level="Full"/>
<sanitizer defaultProvider="HtmlAgilityPackSanitizerProvider">
  <providers>
    <add name="HtmlAgilityPackSanitizerProvider" type="AjaxControlToolkit.Sanitizer.HtmlAgilityPackSanitizerProvider"/>
  </providers>
</sanitizer> 
```

这是我的支票

```
 if (htmlEditorExtender1.SanitizerProvider == null)
    {
        Response.Redirect("PostNewPM.aspx");
    } 
```

这是我发布上述警报脚本消息时得到的结果

```
&lt;script&gt;alert('error')&lt;/script&gt; 
```

当它被解码以显示给用户时

```
<script>alert('error')</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T18:42:22.100

添加 SanitizerProvider 属性，如下所示：

```
<ajaxToolkit:HtmlEditorExtender ID="htmlEditorExtender1" 
    TargetControlID="txtMessageBody"
    runat="server" DisplaySourceTab="True" 
    SanitizerProvider="HtmlAgilityPackSanitizerProvider"> 
```

# mobile - 手机Safari IOS 6 拍照

> ID：16148380
> 
> 赞同：7
> 
> 时间：2013-04-22T13:29:35.890
> 
> 标签：mobile, file-upload, ios6, safari, camera

我正在查看 IOS6 上的文件上传，并知道这可以通过通常的链接实现：

```
<input type="file" accept="image/*" capture="camera"> 
```

尽管如此，我能找到的大多数教程和问题主要是关于**上传**功能的。就我而言，我需要能够使用内置摄像头在移动 Safari 中拍照。

我已经设置了一个页面来测试这个（没有代码，只有我在上面发布的链接），当我拍照时，应用程序（相机应用程序）崩溃而没有实际保存我的照片。这是正常行为吗？我需要先添加一些代码才能上传图片吗？尽管如此，这最后一件事对我来说没有意义，因为您需要将已保存的图片添加到文件上传链接。

对此的任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-01T07:49:50.197

您不应该在代码中需要更多内容以避免崩溃。它应该与从库中选择图片相同。我已经在装有 iOS7 的 iPhone 4S 上对此进行了测试，我的 Safari 也崩溃了。如果我用前置摄像头拍照（较小的图片？），它不会每次都崩溃。如果我只从照片库中加载图片，它也可以工作。

我认为这是iOS中的一个错误。我设法通过重新启动手机来绕过它。遗憾的是，我们在 Web 方面无能为力，只能通知用户该功能可能存在问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T17:39:19.257

在 Apple 在未来的更新中提供修复之前，最好的建议可能是提醒您的用户关闭其余的 Safari 选项卡。（这会降低内存使用量并防止 Safari 在通过文件上传执行“拍照”路径时崩溃）。

# .net - WaitAny 和 SyncLock？

> ID：16148382
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:29:45.557
> 
> 标签：.net, multithreading

我有一些我正在使用的遗留代码，我遇到了一些对我来说没有意义的东西。

```
 WaitHandle.WaitAny(AutoResetEventArray, System.Threading.Timeout.Infinite, False)
            Do Until aListCount = 0
                SyncLock ALockingObject
                     'doing some stuff
                End SyncLock
            Loop 
```

我远不是线程专家，但我的理解是 WaitAny 会阻塞线程，直到接收到设置事件，所以我想知道 SyncLock 的目的是什么。有人可以解释我对线程的误解或代码以这种方式构造的原因吗？仅供参考 AutoResetEventArray 的大小为 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:32:48.973

该`WaitAny`呼叫正在等待其中的任何一个`WaitHandle`设置`AutoResetEventArray`。一旦发生这种情况，它就会在循环中锁定`ALockingObject`. `AutoResetEventArray`没有任何东西（无论如何在您的代码中）表明和中的句柄之间的关系`ALockingObject`，所以我假设还有其他操作使用受保护的资源`ALockingObject`。

# iphone - 从 NSMutableArray 获取特定值

> ID：16148390
> 
> 赞同：0
> 
> 时间：2013-04-22T13:30:13.503
> 
> 标签：iphone, ios, arrays

我正在解析 XML 并将结果保存到 NSMutableArray。当我做NSLog时，

```
NSLog(@"Data : %@",_data); 
```

我越来越

```
Data : (
        {
        SessionToken = 9e72dd029e0e8268380b919356881935;
    }
) 
```

我只想要数组中的 9e72dd029e0e8268380b919356881935 。实现这一目标的最佳解决方案是什么？

编辑：一次只有一个 SessionToken。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:33:35.797

你可以试试这段代码：

```
for (NSDictionary *data1 in _data) {
    NSlog("session token %@",[data1 objectForKey:@"SessionToken"]);//Other wise add into another array which contain session token.. only..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:01:01.353

因为一次只有一个会话。

```
NSDictionary *session = [_data lastObject];
NSString *sessionToken = session[@"SessionToken"]; 
```

或与文字

```
NSString *sessionToken = _data[0][@"SessionToken"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:08:54.843

```
if ([_data count]) {
    NSDictionary *dic = [_data objectAtIndex:0];
    NSLog(@"Data : %@",[dic objectForKey:@"SessionToken"]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-22T13:28:30.013

```
for (NSDictionary *data1 in _data) {
    NSlog("session token %@",[data1 valueForKey:@"SessionToken"]);
} 
```

# javascript - 在 Xcode 上运行 Cordova 2.6.0 项目时出现白屏

> ID：16148391
> 
> 赞同：0
> 
> 时间：2013-04-22T13:30:14.973
> 
> 标签：javascript, ios, xcode, cordova

我有这个问题。虽然它是间歇性的，但我担心我的应用程序的未来用户也会体验到它，我不希望这样。我升级到了cordova-2.6.0。我现在在 iPad 上运行我的应用程序时遇到问题。

在控制台上，一切似乎都在工作。启动画面显示正确，但在启动画面（间歇性）index.html 未加载或其纯白屏幕之后。

所以这是我在控制台上看到的：

```
Multi-tasking -> Device: Yes, App: YES
Resetting Plugins due to page load.
Finished load of: file:///var/mobile/Applications/(numbers)/Project.app/www/index.html
DEPRECATION NOTICE: The Connection ReachableViaWWAN return value of '2g' is deprecated as of Cordova version 2.6.0 and will be changed to 'cellular' in a future release. 
```

然后白屏！！（就像白人步行者一样。哈哈）

无论如何，在我的 Cordova-2.6.0.js 上，我更改了 xhr.open

从：`xhr.open('GET', 'cordova_plugins.json', true);` 到：`xhr.open('GET', 'file:///cordova_plugins.json', true);`

只是因为我无法在浏览器上测试我的应用程序。只是用谷歌搜索修复。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T18:12:19.760

该错误可能与弃用通知无关。我一直在 iPhone 中收到该通知，没有任何问题。

检查您是否拥有 iPad 所需的所有启动屏幕文件并将其添加到 config.xml： [https ://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

# asp.net - Signalr TypeError：聊天是未定义的问题

> ID：16148393
> 
> 赞同：1
> 
> 时间：2013-04-22T13:30:26.600
> 
> 标签：asp.net, signalr

我正在尝试学习这个信号器库。所以我只是从 Nuget 安装与所有依赖项相关的信号器。

当我运行我的代码时，我收到名为**TypeError 的错误：聊天未定义** ，所有 js 库都包括在内。

```
<script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<!--Reference the SignalR library. -->
<script src="/Scripts/jquery.signalR-1.0.1.js"  type="text/javascript"></script>
<!--Reference the autogenerated SignalR hub script. -->
<script src='<%= ResolveClientUrl("~/signalr/hubs") %>'  type="text/javascript" ></script> 
```

当此行执行时，我收到上述错误

```
chat.client.broadcastMessage = function (name, message) 
```

我按照此 url 中的完整说明创建示例项目。网址是 **[http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr](http://www.asp.net/signalr/overview/getting-started/tutorial-getting-started-with-signalr)**

谁能告诉我如何解决这个错误。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:40:14.257

在您的服务器端应用程序启动中，确保您正在调用 RouteTable.Routes.MapHubs()。#7 在教程中

# ssl - 带有 TLS 压缩（不是 HTTP）的 Netty？

> ID：16148397
> 
> 赞同：0
> 
> 时间：2013-04-22T13:30:37.873
> 
> 标签：ssl, compression, netty

我正在编写一个服务器以通过 TLS 从我无法修改的现有应用程序接收数据。使用Netty，服务器是否可以请求TLS压缩？请注意，这不是基于 TLS 的 HTTP，因此基于 HTTP 的压缩不相关。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-22T17:56:53.690

只需将 SslHandler 添加到 ChannelPipeline 即可启用 TLS/SSL。小菜一碟 ;）

# ios - 如何实现标签栏中项目之间的不均匀间距？

> ID：16148400
> 
> 赞同：0
> 
> 时间：2013-04-22T13:30:56.203
> 
> 标签：ios, ipad, uitabbarcontroller

在我的应用程序中，我想将标签栏项目设置在 UITabbar 内的不均匀位置（意味着第 1 和第 2 之间的空间不等于第 2 和第 3 等等）我知道没有这样的选项，因为项目不有一个框架属性。那么有可能通过其他一些方式来实现这一点，比如

```
self.tabBarController.tabBar addSubview:buttonItem 
```

或者是否可以在标签栏中的所需位置重新定位项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:54:14.790

在情节提要中，您可以将“固定/灵活空格键按钮项”拖放到工具栏中。这将用作按钮之间的分隔符。此外，如果您想以编程方式控制其宽度，请将出口连接拖放到控制器。您还可以通过检查器调整间距（查找 width 属性）。例如，如果您的固定空格键按钮项目的出口名称是 spacer，您可以设置 spacer 的宽度如下：

self.spacer.width = 50; （或任何值）

希望这可以帮助。

# java - 在 java eclipse 中的活动之间切换

> ID：16148401
> 
> 赞同：0
> 
> 时间：2013-04-22T13:30:57.137
> 
> 标签：java, android, eclipse, android-activity

我有一个应用程序，页面上有一个温度转换器，一旦使用，就有一个按钮可以切换到新的活动。但是，当我单击按钮更改为模拟器上的第二个活动时，没有任何反应？

```
package com.example.assignment2project;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.Toast;
import android.content.Intent;
import android.widget.Button;

public class MainActivity extends Activity {
    private EditText text;

    public void onCreate1(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button next = (Button) findViewById(R.id.Button01);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), SecondScreen.class);
                startActivityForResult(myIntent, 0);
            }

        });
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        text = (EditText) findViewById(R.id.editText1);
    }

    // This method is called at button click because we assigned the name to the
    // "OnClick property" of the button
    public void onClick(View view) {
        switch (view.getId()) {
            case R.id.button1:
                RadioButton celsiusButton = (RadioButton) findViewById(R.id.radio0);
                RadioButton fahrenheitButton = (RadioButton) findViewById(R.id.radio1);
                if (text.getText().length() == 0) {
                    Toast.makeText(this, "Please enter a valid number", Toast.LENGTH_LONG).show();
                    return;
                }

                float inputValue = Float.parseFloat(text.getText().toString());
                if (celsiusButton.isChecked()) {
                    text.setText(String.valueOf(convertFahrenheitToCelsius(inputValue)));
                    celsiusButton.setChecked(false);
                    fahrenheitButton.setChecked(true);
                } else {
                    text.setText(String.valueOf(convertCelsiusToFahrenheit(inputValue)));
                     fahrenheitButton.setChecked(false);
                     celsiusButton.setChecked(true);
                }
                break;
        }
    }

    // Converts to celsius
    private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
    }

    // Converts to fahrenheit
    private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:33:54.573

你有一个`onCreate`方法和一个`onCreate`方法。Android 只是调用该`onCreate`方法，而不是`onCreate1`. 您需要重命名`onCreate1`并`onCreate`删除另一个 onCreate 才能使其正常工作。

编辑：并`@Override`在新的上使用注释`onCreate`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:40:52.190

使用此代码

```
Button next = (Button) findViewById(R.id.BUTTON_ID);
      next.setOnClickListener(new View.OnClickListener() {
          public void onClick(View view) {
              Intent myIntent = new Intent(getApplicationContext, SecondScreen.class);
              startActivity(myIntent);
          }

      }); 
```

把它放在你的 oncreate 上

您需要像这样在清单上添加第二个活动

```
<activity android:name=".SecondScreen" android:label="@string/app_name">
        </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:16:04.813

adding to previous answers: you can create button in your xml layout as much as you want, this doesn't have relation with the oncreate method.

all you have to do to use these button in your mainactivity java file is to initialize it like this:

```
 Button name=(Button)findViewById(R.id."button name or id in your xml file"); 
```

you can press "Ctrl plus space" in the same time after "R.id." to get you all the objects you have created in the xml file and choose what you want. no to switch to another activity do this in your onclicklistener.

```
 startActivity(new Intent("yourcurrent activity".this, "the name of activity you want to switch to".class)); 
```

which in this case is:

```
 startActivity(new Intent(MainActivity.this,SecondScreen.class)); 
```

then go to you AndroidManifest file and type this inside the application part...you can type it at the very end of the application part.

```
 <activity android:name=".the name of your second activity"/> 
```

which in your case is:

```
 <activity android:name=".Secondscreen"/> 
```

you have to do this whenever creating a new activity.

then in your second activity you should tell what xml file you are viewing so you should do this in the second class activity, just like default of the mainacitivty once you have created it.

```
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout."name of your xml file you want to view"); 
```

and i suggest you have a look at this tutorial: [http://www.youtube.com/watch?v=q6-4E1JGT_k](http://www.youtube.com/watch?v=q6-4E1JGT_k)

# javascript - 使用 Node.js 连接到 REST API

> ID：16148403
> 
> 赞同：10
> 
> 时间：2013-04-22T13:31:03.930
> 
> 标签：javascript, web-services, node.js, rest, underscore.js

使用 Node.js 编写一个连接两个 REST API 的独立应用程序是否明智？

一端将是 POS - 销售点 - 系统

另一个将是托管电子商务平台

将有一个用于配置服务的最小接口。而已。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-22T19:52:58.913

是的，Node.js 非常适合调用外部 API。然而，就像 Node 中的所有内容一样，进行这些调用的函数是基于事件的，这意味着执行诸如缓冲响应数据之类的事情，而不是接收单个完整的响应。

例如：

```
// get walking directions from central park to the empire state building
var http = require("http");
    url = "http://maps.googleapis.com/maps/api/directions/json?origin=Central Park&destination=Empire State Building&sensor=false&mode=walking";

// get is a simple wrapper for request()
// which sets the http method to GET
var request = http.get(url, function (response) {
    // data is streamed in chunks from the server
    // so we have to handle the "data" event    
    var buffer = "", 
        data,
        route;

    response.on("data", function (chunk) {
        buffer += chunk;
    }); 

    response.on("end", function (err) {
        // finished transferring data
        // dump the raw data
        console.log(buffer);
        console.log("\n");
        data = JSON.parse(buffer);
        route = data.routes[0];

        // extract the distance and time
        console.log("Walking Distance: " + route.legs[0].distance.text);
        console.log("Time: " + route.legs[0].duration.text);
    }); 
}); 
```

如果您要进行大量此类调用，那么找到一个简单的包装库（或编写自己的）可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T15:29:30.047

当然。node.js API 包含发出 HTTP 请求的方法：

*   [`http.request`](http://nodejs.org/api/http.html#http_http_request_options_callback)
*   [`http.get`](http://nodejs.org/api/http.html#http_http_get_options_callback)

我假设您正在编写的应用程序是一个网络应用程序。您可能希望使用[Express](http://expressjs.com/)之类的框架来消除一些繁重的工作（另请参阅[有关 node.js Web 框架的这个问题](https://stackoverflow.com/questions/3809539/choosing-a-web-application-framework-using-node-js)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-17T06:48:58.283

```
/*Below logics covered in below sample GET API    
    -DB connection created in class
    -common function to execute the query 
    -logging through bunyan library*/

const { APIResponse} = require('./../commonFun/utils');
    const createlog = require('./../lib/createlog');
    var obj = new DB();
    //Test API
    routes.get('/testapi', (req, res) => {
        res.status(201).json({ message: 'API microservices test' });
    });
    dbObj = new DB();
    routes.get('/getStore', (req, res) => {
        try {
            //create DB instance

            const store_id = req.body.storeID;
            const promiseReturnwithResult = selectQueryData('tablename', whereField, dbObj.conn);
            (promiseReturnwithResult).then((result) => {
                APIResponse(200, 'Data fetched successfully', result).then((result) => {
                    res.send(result);
                });
            }).catch((err) => { console.log(err); throw err; })
        } catch (err) {
            console.log('Exception caught in getuser API', err);
            const e = new Error();
            if (err.errors && err.errors.length > 0) {
                e.Error = 'Exception caught in getuser API';
                e.message = err.errors[0].message;
                e.code = 500;
                res.status(404).send(APIResponse(e.code, e.message, e.Error));
                createlog.writeErrorInLog(err);
            }
        }
    });

    //create connection
    "use strict"
    const mysql = require("mysql");

    class DB {
      constructor() {
        this.conn = mysql.createConnection({
          host: 'localhost',
          user: 'root',
          password: 'pass',
          database: 'db_name'
        });
      }

      connect() {
        this.conn.connect(function (err) {
          if (err) {
            console.error("error connecting: " + err.stack);
            return;
          }
          console.log("connected to DBB");
        });
      }
      //End class
    }

    module.exports = DB

    //queryTransaction.js File

    selectQueryData= (table,where,db_conn)=>{  
        return new Promise(function(resolve,reject){
          try{  
              db_conn.query(`SELECT * FROM ${table} WHERE id = ${where}`,function(err,result){
                if(err){
                  reject(err);
                }else{
                  resolve(result);
                }
            });
          }catch(err){
              console.log(err);
          }
        });
    }

    module.exports= {selectQueryData};

    //utils.js file

    APIResponse = async (status, msg, data = '',error=null) => {  
      try {
        if (status) {
          return { statusCode: status, message: msg, PayLoad: data,error:error }
        }
      } catch (err) {
        console.log('Exception caught in getuser API', err);
      }
    }

    module.exports={
      logsSetting: {
        name: "USER-API",
        streams: [
            {
                level: 'error',
                path: '' // log ERROR and above to a file
            }
        ],
      },APIResponse
    }

    //createlogs.js File

    var bunyan = require('bunyan');
    const dateFormat = require('dateformat');
    const {logsSetting} = require('./../commonFun/utils');

    module.exports.writeErrorInLog = (customError) => {
      let logConfig = {...logsSetting};
      console.log('reached in writeErrorInLog',customError)
      const currentDate = dateFormat(new Date(), 'yyyy-mm-dd');
      const path = logConfig.streams[0].path = `${__dirname}/../log/${currentDate}error.log`;
      const log = bunyan.createLogger(logConfig);
      log.error(customError);

    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-08T15:12:42.777

一个更简单有用的工具就是使用像 Unirest 这样的 API；URest 是 NPM 中的一个包，它太容易使用了，就像

```
 app.get('/any-route', function(req, res){
     unirest.get("https://rest.url.to.consume/param1/paramN")
       .header("Any-Key", "XXXXXXXXXXXXXXXXXX")
       .header("Accept", "text/plain")
       .end(function (result) {
       res.render('name-of-the-page-according-to-your-engine', {
         layout: 'some-layout-if-you-want',
         markup:  result.body.any-property,
    }); 
```

});

# c# - 使用反射调用通用扩展方法

> ID：16148407
> 
> 赞同：1
> 
> 时间：2013-04-22T13:31:24.747
> 
> 标签：c#, generics, reflection, extension-methods

我正在尝试使用动态类型调用通用扩展方法，但我不断收到错误消息。

`GenericArguments[0], 'DifferenceConsole.Name', on 'DifferenceConsole.Difference'1[T] GetDifferences[T](T, T)' violates the constraint of type 'T'.`

在下面的代码中，我尝试注释掉动态类型，只是硬编码一个应该工作的类型（名称），但我得到了同样的错误。我不明白为什么我会收到错误。有什么建议吗？

```
public static class IDifferenceExtensions
{
    public static Difference<T> GetDifferences<T>(this T sourceItem, T targetItem) where T : IDifference, new()
    {
        Type itemType = sourceItem.GetType();

        foreach (PropertyInfo prop in itemType.GetProperties(BindingFlags.Public | BindingFlags.Instance))
        {
            DifferenceAttribute diffAttribute = prop.GetCustomAttributes(typeof(DifferenceAttribute), false).FirstOrDefault() as DifferenceAttribute;

            if (diffAttribute != null)
            {
                if (prop.PropertyType.GetInterfaces().Contains(typeof(IDifference)))
                {
                    object sourceValue = prop.GetValue(sourceItem, null);
                    object targetValue = prop.GetValue(targetItem, null);

                    MethodInfo mi = typeof(IDifferenceExtensions)
                        .GetMethod("GetDifferences")
                        .MakeGenericMethod(typeof(Name));  // <-- Error occurs here
                        //.MakeGenericMethod(prop.PropertyType);

                    // Invoke and other stuff

                }
                else
                {
                    // Other stuff
                }
            }
        }

        //return diff;
    }
}

public class Name : IDifference
{
    [Difference]
    public String FirstName { get; set; }

    [Difference]
    public String LastName { get; set; }

    public Name(string firstName, string lastName)
    {
        this.FirstName = firstName;
        this.LastName = lastName;
    }
}

public interface IDifference
{

}

public class Difference<T> where T: IDifference, new()
{
    public T Item { get; set; }

    public Difference()
    {
        Item = new T();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:35:20.303

`Name`没有公共的、无参数的构造函数。
但是，您受限`T`于`IDifference, new()`，这意味着用作泛型参数的每种类型都必须实现`IDifference`并且必须具有公共的无参数构造函数。

顺便说一句：`IDifferenceExtensions`对于静态类来说，这个名字真的很糟糕。`I`前缀通常是为接口保留的。

# android - EditText 内容大小与布局大小

> ID：16148416
> 
> 赞同：0
> 
> 时间：2013-04-22T13:31:57.167
> 
> 标签：android, android-edittext, android-ui

我有一个单行`EditText`，我对内容的大小与 的大小感兴趣`EditText`，看看内容是否适合 的大小`EditText`。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:47:16.057

我不太确定你在这里问什么：

您可以像这样测量文本宽度：（取自 Alan Jay Weiner 此处：[Auto Scale TextView Text to Fit within Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds)）

```
// Set the text size of the text paint object and use a static layout to render text off screen before measuring
private int getTextWidth(CharSequence source, TextPaint paint, int width, float textSize) {
    // Update the text paint object
    paint.setTextSize(textSize);
    // Draw using a static layout
    StaticLayout layout = new StaticLayout(source, paint, width, Alignment.ALIGN_NORMAL, mSpacingMult, mSpacingAdd, true);
    layout.draw(sTextResizeCanvas);
    return layout.getWidth();
} 
```

你可以用这样的观察者测量文本的变化：

```
 yourEditText.addTextChangedListener(new TextWatcher() {

            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            }
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                //measure your stuff here
            }
            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub

            }
        }); 
```

# wordpress - Wordpress 中的投票类型表单？

> ID：16148419
> 
> 赞同：0
> 
> 时间：2013-04-22T13:32:00.293
> 
> 标签：wordpress, survey

我正在寻找一种在专用页面上显示简单民意调查类型调查的方法，但现在已经 2 天没有找到这个问题的答案。

调查需要有文本和下拉字段，答案必须对登录成员可见，并且必须可由管理员编辑。

有任何想法吗？

编辑：

好的，我找到了一个名为[Extra Comment Fields](http://blog.ideashower.com/post/15147134893/wordpress-plugin-extra-comment-fields)的 Beta 插件，它应该可以工作，但是我在使用数据库时遇到了问题！额外的字段不会存储在任何地方！该插件使用（并且应该创建）的表称为 wp_comments_extra，但该表无处可寻。有没有办法通过反向工程插件的 .php 文件手动创建正确的表？

# jquery - ajax填充选择框上的jquery委托函数（jquery 2.0）

> ID：16148425
> 
> 赞同：0
> 
> 时间：2013-04-22T13:32:15.143
> 
> 标签：jquery, delegates

我用 onload 选项（ajax，页面加载）填充我的选择框，效果很好

```
<select name="variety" id="resorts"><option value="">Select </option></select> 
```

要触发选定的选项（转到 Url），我使用以下功能。

```
("body").delegate("#resorts","change", function(e){ 
    window.location='http://skiweather.eu/webcams/' + $(this).children("option:selected").attr("value");
    return false;
}); 
```

它似乎不起作用，它返回“未定义”。怎么了。

也许填充功能？

```
function populate_cantons(){$.getJSON("http://skiweather.eu/v3/ajax/fetch_canton.php",{country:$("#country").val()},function(a){var b=$("#cantons");var c=b.prop("options");$("option",b).remove();$.each(a,function(a,b){c[c.length]=new Option(b["canton"])});b.prepend("<option selected>Select region</option>")})} 
```

[http://skiweather.eu/latest/](http://skiweather.eu/latest/)（页面右上角的选择框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:51:46.953

```
$(this).children("option:selected").attr("value"); 
```

您尝试读取`value`属性，但您的`option`元素没有这样的属性。要么添加它，要么阅读`option`元素的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:41:49.117

尝试：

```
$("body").delegate("change", "#resorts", function(e){ 
   window.location='http://skiweather.eu/webcams/' + $(this).val();
   return false;
}); 
```

# iphone - ASIHTTP 类中的错误

> ID：16148429
> 
> 赞同：0
> 
> 时间：2013-04-22T13:32:24.623
> 
> 标签：iphone

我正在使用 ASIHTTP 类。我正在使用非弧代码结构。并且还使用 libASILib.a 而不是实现文件。我收到错误消息：`Undefined symbols for architecture i386: "_OBJC_CLASS_$_ASIFormDataRequest", referenced from:` 我可以在设备中运行但无法在模拟器中运行。请帮助我。提前谢谢你...

# php - wordpress 中的 tinyMCE 不能在少数计算机上运行， 并且只能在少数计算机上运行

> ID：16148431
> 
> 赞同：0
> 
> 时间：2013-04-22T13:32:28.437
> 
> 标签：php, wordpress

我有一个很奇怪的问题，在我的办公室里，我们有超过 10 台电脑，我们在 wordpress 上写内容，所以可视化编辑器是我们常用的 wordpress 工具，但是今天我们已经将我们的 wordpress 从一个服务器转移到另一个服务器，之后，一切正常，但 TinyMce，即可视化编辑器按钮（如 b、i 和其他）在少数计算机上无法正常工作，我们将不胜感激。请注意：我们在同一台服务器上的博客很少，而且它们运行良好。

在控制台：：加载资源失败：服务器响应状态为 404（未找到）[http://www.newsyaps.com/wp-includes/js/tinymce/wp-tinymce.php?c=1&ver=358 -23224](http://www.newsyaps.com/wp-includes/js/tinymce/wp-tinymce.php?c=1&ver=358-23224) Uncaught ReferenceError: tinyMCE is not defined wp-langs-en.js:1 Uncaught ReferenceError: tinymce is not defined post-new.php:2215

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-04T01:27:47.817

它可能晚了，但只是提醒那些有同样问题的人。

我也遇到过这个问题。当我检查我的 cPanel 错误日志时，它说：

```
[error] File "...public_html/wp-includes/js/tinymce/wp-tinymce.php" is writeable by group... 
```

所以我所做的就是改变

> wp-tinymce.php

文件从**755**到**644**

这些错误都消失了:)

干杯! **尼尔**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-11T21:31:13.580

我是那些用这个 [wp/tinymce/hosting] 问题折磨自己的人之一。

-file的目的`[wp-includes/js/tinymce/wp-tinymce.php]`是加载此脚本：

```
[wp-includes/js/tinymce/tinymce.min.js]
[wp-includes/js/tinymce/plugins/compat3x/plugin.min.js] 
```

因此，如果您的服务器/主机有问题（例如，您无权更改目录/文件权限或更改 .htaccess 文件），您始终可以采用简单的方式手动加载必要的 tinymce 文件：

在你的`[wp-content/themes/{YOUR_THEME_DIRECTOORY}/function.php]`-file 添加这个：

```
function load_bloody_tinymce(){

    wp_enqueue_script( 'bloody_tinymce_js_main', includes_url() . 'js/tinymce/tinymce.min.js' );
    wp_enqueue_script( 'bloody_tinymce_js_plugin', includes_url() . 'js/tinymce/plugins/compat3x/plugin.min.js' );

}
add_action( 'admin_enqueue_scripts', 'load_bloody_tinymce' ); 
```

*当然，这不是解决访问问题的方法，但如果您不是系统管理员，它可以帮助您。

# vba - 根据先前工作表中包含的产品列表填写行（/产品）信息

> ID：16148434
> 
> 赞同：0
> 
> 时间：2013-04-22T13:32:36.253
> 
> 标签：vba, excel

我有一个包含几个不同工作表的 Excel 电子表格。第一个工作表包含在第二列中具有唯一 ID 的产品列表。其余列包含产品的附加信息，如名称、价格、折扣等。

在其余的工作表中，我通过添加产品的唯一 ID 来添加产品，然后复制并粘贴第一张工作表的行。我基本上要做的是创建一个宏，当在第 n 个工作表的第二列（例如，在第 5 个工作表中）输入唯一 ID 时，将执行该宏。它应该使用第一个工作表中具有相同 ID 的产品的信息自动填充其余列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:41:31.403

你试过[`VLOOKUP()`](https://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)公式吗？

给定一个像这样的表（从您的描述中简化）：

```
 A:     B:   C:
1:  ID1    A    Spec
2:  ID2    B    Spec
3:  ID3    C    Spec
4:  ID4    D    Spec
5:  ID5    E    Spec 
```

您可以在以下表格中使用这样的公式：

```
=VLOOKUP(B2,Sheet1!A1:C5,2,FALSE) 
```

其中 B2 是包含您输入的产品编号的单元格。要让 VBA 自动执行此过程，请创建一个在更改单元格时触发的宏：

```
Private Sub Worksheet_Change(ByVal Target As Range)
Dim lChangedRow As Long
If Target.Column = 2 Then
    lChangedRow = Target.Row
    Range("D" & lChangedRow).Formula = "=VLOOKUP(B" & lChangedRow & ",Sheet1!A1:C5,2,FALSE)"
    'Fill in additional columns (change "D") as necessary...
End If

End Sub 
```

`If Target.Column = 2 Then`检查以查看更改的值是否仅在第二列中，以便在不需要时不会多次运行更新。

`Range("D" & lChangedRow).Formula...`设置`VLOOKUP`在本文顶部突出显示的功能。

`Sheet1!A1:C5`将需要更改以匹配您的第一个工作表的名称/数据。

* * *

为了避免必须在每张纸上输入此代码，您可以通过将类似的代码放在其自己的模块中来简化（*这不是必需的，但如果您想更改 Sub 会很有帮助，因为您只需更改一次*):

```
Public Sub FillData(ByVal Target As Range)
Dim lChangedRow As Long
    lChangedRow = Target.Row
    Range("D" & lChangedRow).Formula = "=VLOOKUP(B" & lChangedRow & ",Sheet1!A1:C5,2,FALSE)"
    'Fill in additional columns (change "D") as necessary...
End Sub 
```

每张表都有相同的简化代码，调用 Sub：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Target.Column = 2 Then
        FillData(Target)
    End If
End Sub 
```

* * *

另一个不必要但可能会有所帮助的方法是，根据您的用途/本工作簿的大小，在更新后将公式更改为静态值。如果您将经常更改数据，或者如果数据集相当小，那么您可能**不应该这样**做。

但是，如果您发现更新所有这些`VLOOKUP`s 需要花费大量时间，并且您的数据在输入唯一 ID 后不会更改，那么这将有助于加快速度：

```
Public Sub FillData(ByVal Target As Range)
Dim lChangedRow As Long
    lChangedRow = Target.Row
    Range("D" & lChangedRow).Formula = "=VLOOKUP(B" & lChangedRow & ",Sheet1!A1:C5,2,FALSE)"
    Range("D" & lChangedRow).Value = Range("D" & lChangedRow).Value
    'Fill in additional columns (change "D") as necessary...
End Sub 
```

# c# - 无论用户控件有多少层，在用户控件内设置用户控件的数据上下文

> ID：16148442
> 
> 赞同：2
> 
> 时间：2013-04-22T13:33:11.943
> 
> 标签：c#, wpf, mvvm, user-controls, mvvm-light

我目前正在创建一个可以测试 WPF 灵活性的应用程序。我有一些用户控件，当涉及到它的 ViewModel 时，它们是非常透明的。我所说的透明是指用户控件可以使用任何类型的 ViewModel，前提是 ViewModel 具有将绑定到该用户控件中的控件的所有必需属性。我通过将 ViewModel 分配为特定用户控件的数据上下文来做到这一点。

这适用于只有两个用户控件（一个可以访问 ViewModelLocator，一个需要来自前者的数据上下文声明）。当它达到 3 层或更多的用户控件时，我不知道该怎么办。有没有办法在用户控件中设置用户控件的数据上下文，该用户控件位于有权访问 ViewModelLocator 的用户控件中？

下面是一些可以澄清我的问题的代码。

此代码是父用户控件。它旨在用于使用 MAF 的应用程序。我使用了非静态 ViewModelLocator 来确保每个插件实例使用不同的 ViewModelLocator 实例，并且因为插件没有自己的 app.xaml（因此没有全局资源）。如您所见，我在网格中放置了一个来自单独程序集的用户控件，然后声明其数据上下文，以便所述用户控件与父用户控件的 ViewModelLocator 交互。

```
<UserControl x:Class="TestApp.Inventory.Common.Views.MaterialsNewView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:vm="clr-namespace:TestApp.Inventory.Common.ViewModel"
             xmlns:views="clr-namespace:TestApp.Inventory.Common.Views"
             xmlns:viewsSupp="clr-namespace:TestApp.Supplier.Common.Views;assembly=TestApp.Supplier.Common"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Height="607" Width="616" Loaded="UserControl_Loaded">

    <UserControl.Resources>
        <vm:ViewModelLocator x:Key="Locator" />
    </UserControl.Resources>

    <UserControl.DataContext>
        <Binding Path="MaterialsNewView" Source="{StaticResource Locator}" />
    </UserControl.DataContext>

    <Grid>
        <views:SupplierView x:Name="supplierView" Margin="145,306,0,0" HorizontalAlignment="Left" Width="328" Height="258" VerticalAlignment="Top" DataContext="{Binding Source={StaticResource Locator}, Path=SupplierView}" />
    </Grid>
</UserControl> 
```

然后我有子用户控件的代码。就像我之前所说的那样，子用户控件旨在就 ViewModel 而言是透明的。这就是为什么每次都应该在父用户控件中声明数据上下文的原因。

```
<UserControl x:Class="TestApp.Supplier.Common.Views.SupplierView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ignore="http://www.ignore.com"
        mc:Ignorable="d ignore" Height="289" Width="352" 
        xmlns:my="clr-namespace:TestApp.Lookup.Common.Views;assembly=TestApp.Lookup.Common">

    <Grid>
        <my:MaterialTypeListView Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Grid, AncestorLevel=1}, Path=ActualHeight}" HorizontalAlignment="Left" Name="materialTypeListView1" VerticalAlignment="Top" Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Grid, AncestorLevel=1}, Path=ActualWidth}" />
    </Grid>
</UserControl> 
```

我的问题是当子用户控件有自己的子用户控件时。我不知道如何从父用户控件声明其数据上下文。目标是无论用户控件有多少层，它们都应该与父用户控件的 ViewModelLocator 交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:46:33.360

添加一个`DependencyProperty`名为 MaterialTypeList 的 UserControl SupplierView。

```
public partial class SupplierView
{
    public List<string> MaterialTypeList
    {
        get { return (List<string>)GetValue(MaterialTypeListProperty); }
        set { SetValue(MaterialTypeListProperty, value);}
    }

    public static readonly DependencyProperty MaterialTypeListProperty =
            DependencyProperty.Register("MaterialTypeList", typeof(string), typeof(SupplierView),
            new PropertyMetadata(null));
} 
```

将 SupplierView 上的 UserControl MaterialNewView 上的绑定添加到 MaterialTypeList

```
 <UserControl x:Class="TestApp.Supplier.Common.Views.SupplierView"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
            xmlns:ignore="http://www.ignore.com"
            mc:Ignorable="d ignore" Height="289" Width="352" 
            xmlns:my="clr-namespace:TestApp.Lookup.Common.Views;assembly=TestApp.Lookup.Common">

        <Grid>
            <my:MaterialTypeListView 
DataContext="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=UserControl, AncestorLevel=1}, Path=MaterialTypeList}"
Height="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Grid, AncestorLevel=1}, Path=ActualHeight}" HorizontalAlignment="Left" Name="materialTypeListView1" VerticalAlignment="Top" Width="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=Grid, AncestorLevel=1}, Path=ActualWidth}" />
        </Grid>
    </UserControl> 
```

将 MaterialTypeListView 上的 UserControl SupplierView 上的绑定添加到 MaterialTypeList。

```
 <UserControl x:Class="TestApp.Inventory.Common.Views.MaterialsNewView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:vm="clr-namespace:TestApp.Inventory.Common.ViewModel"
                 xmlns:views="clr-namespace:TestApp.Inventory.Common.Views"
                 xmlns:viewsSupp="clr-namespace:TestApp.Supplier.Common.Views;assembly=TestApp.Supplier.Common"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
                 mc:Ignorable="d" Height="607" Width="616" Loaded="UserControl_Loaded">

        <UserControl.Resources>
            <vm:ViewModelLocator x:Key="Locator" />
        </UserControl.Resources>

        <UserControl.DataContext>
            <Binding Path="MaterialsNewView" Source="{StaticResource Locator}" />
        </UserControl.DataContext>

        <Grid>
            <views:SupplierView x:Name="supplierView" Margin="145,306,0,0" 
MaterialTypeList="{Binding [HERE YOUR LIST OF MATERIALTYPE]}"
HorizontalAlignment="Left" Width="328" Height="258" VerticalAlignment="Top" DataContext="{Binding Source={StaticResource Locator}, Path=SupplierView}" />
        </Grid>
    </UserControl> 
```

# wsdl - 如何在 WSO2 GREG 中导入 WSDL 时停用服务的创建？

> ID：16148446
> 
> 赞同：1
> 
> 时间：2013-04-22T13:33:17.943
> 
> 标签：wsdl, wso2, wso2greg

在 WSO2 GREG 中导入 WSDL 时是否有停用服务的自动生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:53:31.497

您需要取消注释 GREG_HOME/repositroy/conf/registry.xml 中的以下条目

```
 <property name="createService">false</property> 
```

# c# - 带有开关或可观察字典的列表框

> ID：16148447
> 
> 赞同：0
> 
> 时间：2013-04-22T13:33:20.687
> 
> 标签：c#, windows-phone-7, mvvm-light

我有一个设置模型的 ObservableCollection 有一个字符串和布尔值。现在我正在制作带有开关列表框的设置页面。

```
<Grid>
                <ListBox 
                         HorizontalAlignment="Stretch" VerticalAlignment="Stretch" 
                         Margin="0,0,0,0" 
                         ItemsSource="{Binding Path=SettingsItems, Mode=TwoWay}" 
                         ItemContainerStyle="{StaticResource ListBoxItemsStrerchedStyle}" >
               <ListBox.ItemTemplate> 
                   <DataTemplate> 
                       <toolkit:ToggleSwitch 
                           Header="{Binding kind}" 
                           Content="{Binding value}" 
                           IsChecked="{Binding value, Mode=TwoWay}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid> 
```

问题是当用户改变开关状态时，它不是上升通知（内容没有改变）。此外，如果向下滚动列表（大约 30 个项目）然后向上滚动，一些开关正在改变它们的状态。

我应该使用[ObservableDictionary](http://observabledictionary.codeplex.com/)（它看起来很过时），还是让 SettingsModel 以某种方式抛出通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:55:33.257

以防万一，其他人会面临同样的问题，这里是示例，使用 mvvm light。

```
public class SettingsModel : ViewModelBase
{
    private bool _value;
    public bool Value
    {
        get { return _value; }
        set { Set(() => Value, ref _value, value); }
    }

    private string _kind;
    public string Kind
    {
        get { return _kind; }
        set { Set(() => Kind, ref _kind, value); }
    }
} 
```

# mongodb - 导入/导出 Meteor 集合

> ID：16148449
> 
> 赞同：1
> 
> 时间：2013-04-22T13:33:25.310
> 
> 标签：mongodb, import, export, meteor

我希望能够为`csv`特定订阅（集合的子集）提供导入/导出功能。但是，我完全不确定应该从哪里开始。我认为这必须在服务器端完成，因为他们需要为导入功能上传文件，所以它可能涉及`Meteor.methods`我从客户端调用的服务器上的一个函数。我不确定您将如何返回文件以供下载或临时上传（对于导入功能，我不想保留该文件）。

关于使用 Meteor 解决此问题的最佳方法的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:44:34.637

我将假装这是最好的方法，但请查看[CollectionFS](https://github.com/raix/Meteor-CollectionFS)，一个实现文件上传的 Meteor 包，因此登录用户可以上传文件和文件处理程序，在这个意义上，一个函数或一系列函数自动在上传的文件上运行。

对于导出，您可以再次通过 CollectionFS 进行管道传输，或者您可以使用[FileSaver.js](https://github.com/eligrey/FileSaver.js)直接提供导出文件。

# java - StringIndexOutOfBoundsException：字符串索引超出范围：-3

> ID：16148455
> 
> 赞同：1
> 
> 时间：2013-04-22T13:33:41.570
> 
> 标签：java, string, indexing, indexoutofboundsexception

当我编译和运行我的测试时，会出现以下消息： `StringIndexOutOfBoundsException: String index out of range: -3`

我想我对子字符串做错了，但我不知道在哪里。

这应该被测试：

```
Argument for parsePathname: .mp3
Output getAuthor: empty String
Output getTitle: empty String 
```

这是我的代码：

```
public void parseFilename(String filename)
{
    //Dateiendung entfernen
    int ending;
    ending = filename.lastIndexOf('.');
    filename = filename.substring(0,ending);
    filetype = filename.substring(filename.length()-3);

    //Abfrage, ob Bindestrich(hyphen) vorhanden
    //i+1 ist Position vom Bindestrich
    boolean has_hyphen = false;
    int i;

    for(i=0; i<filename.length(); i++)
    {
        if(filename.charAt(i) == ' ' && filename.charAt(i+1) == '-' && filename.charAt(i+2) == ' ')
        {
            has_hyphen = true;
            break;
        }
    }

    if (!has_hyphen || (filename.length() == 1 && filename.charAt(0) == '-'))
    {
        author ="";
        title = filename;
    }

    if (filename.length() == 0 || (filename.charAt(0) == ' ' && filename.charAt(1) == '-' && filename.charAt(2) == ' '))
    {
        author = "";
        title = "";
    }

    if (has_hyphen)
    {
        author = filename.substring(0,i);
        author = author.trim();
        title = filename.substring(i+2);
        title = title.trim();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:39:22.560

我的猜测是您的异常发生在这里：

```
ending = filename.lastIndexOf('.');
filename = filename.substring(0,ending);
filetype = filename.substring(filename.length()-3);  //<- Here 
```

如果`.`是文件名的第一个字符（例如`".mp3"`），则索引将是`0`，之后的子字符串将是大小为 0 的字符串。然后您调用`substring`with`-3`并抛出`IndexOutOfBoundsException`. 确保字符串不仅仅包含文件类型。

如果你知道输入参数总是包含一个文件扩展名，你可以像这样阻止它：

```
ending = filename.lastIndexOf('.');
if(ending == 0) {
    filetype = filename;
    filename = "";
 } else {
    ... 
```

`filetype`在删除它以获取文件名之前，您应该获取它。在这一行之后：

```
filename = filename.substring(0,ending); 
```

`filename`不再包含文件扩展名。

# asp.net - 如何在 asp.net 中同步网络场中的静态变量

> ID：16148456
> 
> 赞同：0
> 
> 时间：2013-04-22T13:33:45.243
> 
> 标签：asp.net, static, load-balancing

在 asp.net 中，我们可以存储应用程序范围变量（静态、应用程序）。但是我们如何在不使用分布式缓存和数据库的情况下将一个节点的静态变量与另一个节点的静态变量同步呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:01:07.313

如果没有公共数据库或公共文件存储中的值，您将无法同步静态变量。

所以你试图做的，是做不到的。您需要使用公共数据库、公共文件或也使用公共数据库的分布式缓存——将您的值保存在一个地方、一个公共文件或一个公共数据库中。

一些注释。静态变量不仅在网络农场不同，在网络花园也不同。这意味着即使在同一个池中的每个应用程序线程也具有不同的静态值。

一些相关答案： [Asp.Net 中的静态变量行为](https://stackoverflow.com/questions/15986311/static-variable-behaviour-in-asp-net/15986597#15986597)
[ASP.NET 静态变量的生命周期 在 ASP.NET中](https://stackoverflow.com/questions/8919095/lifetime-of-asp-net-static-variable/8919336#8919336)
[使用静态变量而不是应用程序状态](https://stackoverflow.com/questions/10960695/using-static-variables-instead-of-application-state-in-asp-net/10964038#10964038)

# sql - 当我期望只有一行时，Sum SQL 语句会输出很多行

> ID：16148469
> 
> 赞同：1
> 
> 时间：2013-04-22T13:34:11.433
> 
> 标签：sql, ms-access

所以我有 3 个表加入，如图所示：

![在此处输入图像描述](https://i.stack.imgur.com/FuuYJ.jpg)

我想要做的是查询属于我的查询中为客户指定的标准的所有持股的总和。这是我所拥有的：

```
SELECT Sum(Holdings.HoldingValue) AS SumOfHoldingValue
FROM (Clients INNER JOIN Accounts 
    ON Clients.ClientID = Accounts.ClientID) 
    INNER JOIN Holdings 
    ON Accounts.AccountID = Holdings.AccNum
GROUP BY Holdings.HoldingDate, Clients.Active, Clients.RiskCode, Clients.NewClient, Clients.BaseCurrency, Clients.ClientID
HAVING (((Holdings.HoldingDate)=#3/31/2013#) 
    AND ((Clients.Active)=True) 
    AND ((Clients.RiskCode) In (1,2)) 
    AND ((Clients.NewClient)=True) 
    AND ((Clients.BaseCurrency)='GBP') 
    AND ((Clients.ClientID) Not In (10022,10082,10083))); 
```

这是我得到的结果示例：

```
SumOfHoldingValue
1056071.96
466595.6
1074459.38
371142.54
814874.42
458203.65
8308697.09
254733.94
583796.33
443897.76
203787.11
1057445.84
1058751.26
317507.43 
```

因此，客户表有很多标准，但结果是`SumOfHoldingValue`我想要的只是一个数字的列表。即所有持有值的总和。为什么不将它们全部组合在一起形成一个总数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:39:14.287

由于您没有计算`HAVING`子句中值的任何聚合，我认为您只需要这个：

```
SELECT Sum(Holdings.HoldingValue) AS SumOfHoldingValue
FROM (Clients INNER JOIN Accounts 
    ON Clients.ClientID = Accounts.ClientID) 
    INNER JOIN Holdings 
    ON Accounts.AccountID = Holdings.AccNum
WHERE (((Holdings.HoldingDate)=#3/31/2013#) 
    AND ((Clients.Active)=True) 
    AND ((Clients.RiskCode) In (1,2)) 
    AND ((Clients.NewClient)=True) 
    AND ((Clients.BaseCurrency)='GBP') 
    AND ((Clients.ClientID) Not In (10022,10082,10083))); 
```

其中，没有`GROUP`子句将产生一个*（* `GROUP`在整个集合上）并产生一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:35:27.953

如果您只想要总计 - 删除分组依据。使用 group by 子句，它可以分别为您提供每个组的总数。

如果您需要过滤数据，请将条件放入 Where 子句中

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T13:39:56.847

您的查询包含一个`group by`子句，该子句在自己的行上返回每个组。

您还使用了一个`having`子句。该`having`子句应用于. *_* `group by`通常，它会包含聚合函数——例如`having count(*) > 1`. 在您的情况下，它被用作`where`子句。

尝试像这样重写查询：

```
SELECT Sum(Holdings.HoldingValue) AS SumOfHoldingValue
FROM (Clients INNER JOIN Accounts 
    ON Clients.ClientID = Accounts.ClientID) 
    INNER JOIN Holdings 
    ON Accounts.AccountID = Holdings.AccNum
WHERE (((Holdings.HoldingDate)=#3/31/2013#) 
    AND ((Clients.Active)=True) 
    AND ((Clients.RiskCode) In (1,2)) 
    AND ((Clients.NewClient)=True) 
    AND ((Clients.BaseCurrency)='GBP') 
    AND ((Clients.ClientID) Not In (10022,10082,10083))); 
```

# concrete5 - Concrete5：如何在自定义块内部的模态对话框中打开 TinyMCE？

> ID：16148474
> 
> 赞同：2
> 
> 时间：2013-04-22T13:34:34.467
> 
> 标签：concrete5

我想从我正在构建的自定义块中的模式对话框中打开 TinyMCE。我知道如何实现模态对话框，但无法找到将 TinyMCE 集成到对话框中的方法。

我想要实现的是，当在块添加/编辑弹出窗口中单击文本时，它应该打开一个带有 TinyMCE 的对话框来编辑单击的文本。以前有人做过吗？

这就是我试图在添加/编辑表单中实现的目标：

```
$this->addHeaderItem(Loader::helper('html')->javascript('tiny_mce/tiny_mce.js'));
Loader::element('editor_init');
Loader::element('editor_config');
Loader::element('editor_controls');

<textarea name="field-name" class="text-area-value ccm-input-textarea">Some text here or empty....</textarea>

$bt = BlockType::getByHandle('myblock');
<a class="dialog-launch ccm-block-type-inner" 
dialog-on-close="ccm_blockWindowAfterClose()" dialog-append-buttons="true" 
dialog-modal="false" dialog-width="500" 
dialog-height="500" dialog-title="<?php echo t('Add/Edit Text)?>"
href="<?php echo $th->getBlockTypeToolsURL($bt); ?>/tinymce_dialog.php?text=<?php echo $text-area-value; ?>">
  Edit the above text in TinyMCE
</a> 
```

在工具文件夹中的 tinymce_dialog.php 中：

```
<textarea name="textarea-name" 
class="ccm-input-textarea advancedEditor ccm-advanced-editor">
  <?php echo $_GET['text']; ?>
</textarea>

<div class="ccm-buttons dialog-buttons">
    <a href="javascript:void(0)" onClick="ccm_blockWindowClose();" 
       class="ccm-button-left btn">Cancel</a>
    <a href="" onClick="" class="btn primary">Ok</a>
</div> 
```

但我无法将 textarea 的值传递到模式对话框弹出窗口中。我尝试`href`在锚标记中使用将 textarea 的值传递给驻留在工具文件夹中的脚本，但这似乎也不起作用。

**编辑**：我还在 tinymce_dialog.php 中添加了按钮（参见上面的代码）。不确定是否可以`<a dialog-on-close="ccm_blockWindowAfterClose()" dialog-append-buttons="true".....>`在表单中传递这些按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:47:27.717

应该与其他任何地方一样工作。首先，在你的对话框中包含这行代码一次（你只需要一次，不管你有多少 TinyMCE）：

```
<?php Loader::element('editor_config'); ?> 
```

然后，对于您想要的每个 TinyMCE，使用以下命令：

```
<?php Loader::element('editor_controls'); ?>
<textarea name="your-field-name" class="ccm-advanced-editor"></textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T22:18:26.373

有两种方法可以解决这个问题：

1.  正如您在问题编辑中描述的那样，您在其中加载工具文件。这里有几点：
    *   URL 不适用于传递文本数据，尤其是在 tinymce 中编辑的那种文本（长且格式化）。话虽如此，它应该工作。我不明白为什么`$_GET`不会'工作。确保 URL 首先包含文本（您可以通过查看开发人员控制台来查看）。
    *   更好的是传递一个 ID (tinymce_dialog?id=[ID])。这是假设文本保存在数据库中，但看起来您可能会为他们提供一个界面，基本上是“在模态文本中进行所见即所得的编辑，而他们已经不是所见即所得的编辑”。不过，我不确定您是否考虑过这将如何工作。默认情况下，他们必须处理一堆 HTML 标签？
2.  另一种方法是使用 DOM 元素创建对话框。使用 CSS 创建一个隐藏在表单中的 div `display: none;`，将文本保存到其中（如果已经初始化，tinymce 有一个`.update()`或其他东西），然后显示隐藏的 div （使用来自[http://www.concrete5.org/documentation的示例 3 /how-tos/developers/javascript-jquery-and-concrete5/](http://www.concrete5.org/documentation/how-tos/developers/javascript-jquery-and-concrete5/)）。当他们单击（保存）时，您可以（大概）从 tinymce 中复制数据并将其放回需要去的地方。

请注意，在许多情况下，tinymce 初始化代码仅在页面加载时运行。我认为就是`Loader::element('editor_init')`这样。它通过检测适当的文本区域（基于类名）来工作。因此，如果在加载 textarea 之前加载了带有 editor_init 的页面（例如现在的样子），则必须重新初始化 tinymce。这是对＃2的投票。一般来说，我建议你走那条路。

# java - jboss 在执行查询之间停止

> ID：16148475
> 
> 赞同：0
> 
> 时间：2013-04-22T13:34:34.857
> 
> 标签：java, sql, hibernate, jboss

在 jboss 上执行任何查询时，我的应用程序突然停止。然后我按`ctrl+c`了一次，这样它将执行进一步的查询。

这件事不确定地发生，我无法得出结论，其中真正的问题是什么？

我正在使用 jboss 7 、休眠标准和 sql server。当我看到 jboss 的控制台输出时，我发现 Hibernate 标准生成了非常大的查询语句。但它在开发中运行完美。

我怎样才能知道问题出在 jboss、sql server 或 hibernate 标准上？

这真的是hibernate的问题，那么在执行之前是否有任何过程可以在hibernate中主要查询性能？我的意思是在执行生成的休眠条件查询之前询问我可以通过任何 api 跟踪查询吗？

查询长度也有任何规则吗？或者我们可以在执行之前检查是否有任何查询问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:43:10.050

Try to use kill -3 on the java process to get a thread dump and see if there is a way you encounter a dead lock. there is a way for hibernate to use outer join instead of separated queries, that could help you.

# asp.net - Firefox 失去对嵌套文本框的关注

> ID：16148479
> 
> 赞同：0
> 
> 时间：2013-04-22T13:34:41.813
> 
> 标签：asp.net, html

我在单选按钮列表项中有一个嵌套的文本框这里是代码

```
<asp:RadioButtonList ID="OtherEducInNursing" runat="server" RepeatColumns="1" RepeatDirection="Vertical" RepeatLayout="Table">
            <asp:ListItem Value="1">Certificate<input id="OtherEdNsgCertName" type="text" MaxLength="25"/></asp:ListItem>
            <asp:ListItem Value="2">Baccalaureate</asp:ListItem>
            <asp:ListItem Value="3">Master</asp:ListItem>
            <asp:ListItem Value="4">Doctorate</asp:ListItem>
            <asp:ListItem Value="5">None of the above</asp:ListItem></asp:RadioButtonList> 
```

它在 chrome 中都可以正常工作，但是在 Firefox 中，当我尝试单击文本框时，闪烁的光标失去焦点，我必须单击文本框几次才能使光标返回

我添加了一些这样的代码

```
 onclick="document.getElementById('OtherEdNsgCertName').focus();" 
```

仍然没有工作，有谁知道为什么以及如何解决它？非常感谢

编辑这里也是jquery代码

```
$(document).ready(function () {
    if($("#<%=OtherEducInNursing.ClientID%> :checked").val()!="1")
            $("#OtherEdNsgCertName").hide();
        else
            $("#OtherEdNsgCertName").show();
    $("#<%=OtherEducInNursing.ClientID%>").click(function () {
        if($("#<%=OtherEducInNursing.ClientID%> :checked").val()!="1")
            $("#OtherEdNsgCertName").hide();
        else
            $("#OtherEdNsgCertName").show();
    }); 
```

编辑： html代码：

```
<table id="MainPlaceHolder_OtherEducation_OtherEducInNursing">
<tbody><tr>
    <td><input type="radio" value="1" name="ctl00$MainPlaceHolder$OtherEducation$OtherEducInNursing" id="MainPlaceHolder_OtherEducation_OtherEducInNursing_0"><label for="MainPlaceHolder_OtherEducation_OtherEducInNursing_0">Certificate<input type="text" onclick="document.getElementById('OtherEdNsgCertName').focus();" maxlength="25" id="OtherEdNsgCertName"></label></td>
</tr><tr>
    <td><input type="radio" value="2" name="ctl00$MainPlaceHolder$OtherEducation$OtherEducInNursing" id="MainPlaceHolder_OtherEducation_OtherEducInNursing_1"><label for="MainPlaceHolder_OtherEducation_OtherEducInNursing_1">Baccalaureate</label></td>
</tr><tr>
    <td><input type="radio" value="3" name="ctl00$MainPlaceHolder$OtherEducation$OtherEducInNursing" id="MainPlaceHolder_OtherEducation_OtherEducInNursing_2"><label for="MainPlaceHolder_OtherEducation_OtherEducInNursing_2">Master</label></td>
</tr><tr>
    <td><input type="radio" value="4" name="ctl00$MainPlaceHolder$OtherEducation$OtherEducInNursing" id="MainPlaceHolder_OtherEducation_OtherEducInNursing_3"><label for="MainPlaceHolder_OtherEducation_OtherEducInNursing_3">Doctorate</label></td>
</tr><tr>
    <td><input type="radio" value="5" name="ctl00$MainPlaceHolder$OtherEducation$OtherEducInNursing" id="MainPlaceHolder_OtherEducation_OtherEducInNursing_4"><label for="MainPlaceHolder_OtherEducation_OtherEducInNursing_4">None of the above</label></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:18:18.633

从文本框中删除焦点功能并在您的 jQuery 中提供焦点：

```
$(document).ready(function () {
    if($("#<%=OtherEducInNursing.ClientID%> :checked").val()!="1")
        $("#OtherEdNsgCertName").hide();
    else
        {
            $("#OtherEdNsgCertName").show();
            $("#OtherEdNsgCertName").focus();
        }
$("#<%=OtherEducInNursing.ClientID%>").click(function () {
    if($("#<%=OtherEducInNursing.ClientID%> :checked").val()!="1")
        $("#OtherEdNsgCertName").hide();
    else
        {
            $("#OtherEdNsgCertName").show();
            $("#OtherEdNsgCertName").focus();
        }

}); 
```

# r - 汇总和排名数据框

> ID：16148482
> 
> 赞同：2
> 
> 时间：2013-04-22T13:34:50.093
> 
> 标签：r, dataframe, aggregate

使用 R，我需要为每个部门支出最多的前 2 名员工建立一个报告，并为该部门的其他员工添加一个“其他”。例如，我需要一份与此类似的报告。

```
Dept.      EmployeeId     Expense
Marketing       12345         100
Marketing       12346          90
Marketing      Others         200
Sales           12347          50 <-- There's just one employee with expenses
Research        12348        2000
Research        12349         900
Research       Others       10000 
```

换句话说，我需要总结数据，重点关注支出最多的前 2 名员工。费用栏的总和应该是公司的费用总额。

```
employeIds <- sample(1000:9999, 20)
depts <- sample(c('Sales', 'Marketing', 'Research'), 20, replace = TRUE)
expenses <- sample(1:1000, 20, replace = TRUE)

df <- data.frame(employeIds, depts, expenses)

# Based on that data, how do I build a table with the top 2 employees with the most expenses in each department, including an "Other" employee per department. 
```

我是 R 新手，我不确定如何处理这个问题。在 SQL 中，我本来可以使用 RANK() 函数和 JOIN ，但这里不是一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:17:34.073

这是一个`data.table`解决方案：

**创建数据：**我还提出了不会发生“其他”的情况（该部门的条目数为：1 <= 条目 <= 2）

```
set.seed(45)
employeIds <- sample(1000:9999, 20)
depts <- sample(c('Sales', 'Marketing', 'Research'), 20, replace = TRUE)
expenses <- sample(1:1000, 20, replace = TRUE)

df <- data.frame(employeIds, depts, expenses)
df <- df[-c(6,10,12,18,19), ] 
```

* * *

**一个`data.table`解决方案：**

```
require(data.table)
dt <- data.table(df, key=c("depts", "expenses"))
k <- 2
dt[, if(.N > k) {
        idx <- (seq_len(.N)-1) %/% max(k, (.N - k)) == 1
        list(EmployeeIds = c(employeIds[idx], "Others"), 
           Expenses = c(expenses[idx], sum(expenses[!idx])))
     } else {
        list(EmployeeIds = as.character(employeIds), Expenses = expenses)
     }, by = depts]

#        depts EmployeeIds Expenses
# 1: Marketing        4870      567
# 2: Marketing        3167      591
# 3: Marketing      Others     2285
# 4:  Research        5989      878
# 5:  Research        9667      930
# 6:  Research      Others     1301
# 7:     Sales        6700      129
# 8:     Sales        3857      714 
```

`dt`想法：创建的第一步`key = depts, expenses`确保`expenses`按升序排序。然后，根据每个条目的数量`dept`，我们要么创建一个“Others”条目，要么不创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:54:58.347

可能不是最优雅的，但它是一个解决方案：

```
func <- function(data) {
 data1 <- aggregate(data$expenses, list(employeIds=data$employeIds), sum)
 # rank without ties.method = "first" will screw things up with identical values
 data1$employeIds[!(rank(data1$x, ties.method="first") %in% 1:2)] <- 'Others'
 data1 <- aggregate(data.frame(expenses=data1$x), list(employeIds=data1$employeIds), sum)
}

do.call(rbind, by(df, df$depts, func)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:56:00.057

另一种`data.table`方法（可能更接近您所知道的 SQL 风格）：

```
dt <- data.table(employeIds, depts, expenses)
dt[, rank:=rank(-expenses), by=depts][,
    list("Expenses"=sum(expenses)),
    keyby=list(depts, "Employee"=ifelse(rank<=2,employeIds,"Other"))
]
       depts Employee Expenses
1: Marketing     6988      986
2: Marketing     7011      940
3: Marketing    Other     2614
4:  Research     2434      763
5:  Research     9852      731
6:  Research    Other     3397
7:     Sales     3120      581
8:     Sales     6069      868 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:55:54.967

```
df <- split(df, df$depts)
df <- lapply(df, FUN=function(x){
  x <- x[order(x$expenses, decreasing=TRUE), ]
  x$total.expenses <- sum(x$expenses)
  x$group <- 1:nrow(x)
  x$group <- ifelse(x$group <= 2, x$group, "Other")
  x
})
df <- do.call(rbind, df) 
```

# asp.net - GridViewCosts.SelectedRow.Cells[1].Text 不适用于 itemTemplate

> ID：16148484
> 
> 赞同：0
> 
> 时间：2013-04-22T13:35:03.467
> 
> 标签：asp.net

我有这个网格视图：

```
<div class ="gridView">
    <asp:GridView ID="GridViewCosts" runat="server" ShowFooter="True" ShowHeaderWhenEmpty="True"
        AutoGenerateColumns="False" OnRowDeleting="GridViewCosts_RowDeleting" Width="387px"
        OnSelectedIndexChanged="GridViewCosts_SelectedIndexChanged"
        OnPageIndexChanging="GridViewCosts_PageIndexChanging"
        AllowPaging="True"
        CssClass="mGrid"  
    PagerStyle-CssClass="pgr"  
    AlternatingRowStyle-CssClass="alt" PageSize="5">
<AlternatingRowStyle CssClass="alt"></AlternatingRowStyle>
        <Columns>
            <asp:BoundField DataField="Id" HeaderText="Номер" />
              <asp:TemplateField HeaderText="Стойност">
                  <EditItemTemplate>
                      <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("Value") %>'></asp:TextBox>
                  </EditItemTemplate>
                  <ItemTemplate>
                      <asp:Label ID="Label2" runat="server" Text='<%# Bind("Value") %>'></asp:Label>
                  </ItemTemplate>
                  <ControlStyle Width="100px" />
            </asp:TemplateField> 
```

在我想要的代码中：

```
 protected void GridViewCosts_SelectedIndexChanged(object sender, EventArgs e)
        {
            TextBoxValue.Text = GridViewCosts.SelectedRow.Cells[1].Text;
} 
```

当列值为 TemplateField 时，这不起作用。如果该列是 BoundFIeld 它正在工作。我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:38:40.647

如果你使用`TemplateFields`你必须使用[`FindControl`](http://msdn.microsoft.com/en-us/library/486wc64h.aspx)来获取对控件的引用：

```
Label Label2 = (Label)GridViewCosts.SelectedRow.FindControl("Label2");
TextBoxValue.Text = Label2.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:38:52.857

试试这个示例代码

```
For Each gvr As GridViewRow In gvInvoice.Rows
 Dim TctValue As TextBox= DirectCast(GridViewCosts.Cells(1).FindControl("TextBox2"), TextBox)
 totamount = totamount + Convert.ToDouble(lblAmount.Text)
Next
txtTotal.Text = totamount.ToString() 
```

# android - 关于布局性能 - HierarchyViewer

> ID：16148487
> 
> 赞同：0
> 
> 时间：2013-04-22T13:35:08.477
> 
> 标签：android, performance, layout, hierarchy

我想问一下层次视图的结果。我有一个自定义组件，我在下面粘贴了布局代码，我不明白问题是什么？为什么层次查看器给出红点？

任何意见将不胜感激

**层次视图结果**

测量：1.873 毫秒布局：0.298 毫秒绘制：1.472 毫秒

黄色/红色/黄色

**自定义组件布局**

```
 <com.ab.framework.component.ui.RelativeLayout1
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <com.ab.framework.component.ui.TextView1
            android:id="@+id/textMoneyRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="@dimen/moneyview_item_margin"
            android:layout_marginTop="@dimen/moneyview_TextField2_Padding"
            android:text="@string/empty_text"
            android:textSize="@dimen/moneyview_textField2_size" />

        <com.ab.framework.component.ui.TextView1
            android:id="@+id/textMoneyLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="@dimen/moneyview_item_margin3x"
            android:layout_toLeftOf="@+id/textMoneyRight"
            android:text="@string/empty_text"
            android:textSize="@dimen/moneyview_textField1_size"
            android:textStyle="bold" />

        <com.ab.framework.component.ui.TextView1
            android:id="@+id/textMoneySeperator"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="false"
            android:layout_marginTop="2dp"
            android:layout_toLeftOf="@+id/textMoneyRight"
            android:text="@string/price_seperator"
            android:textStyle="bold" />

        <com.ab.framework.component.ui.TextView1
            android:id="@+id/textMoneyCurrency"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/textMoneyRight"
            android:layout_marginTop="@dimen/moneyview_item_margin"
            android:text="@string/currency" />

        <com.ab.framework.component.ui.TextView1
            android:id="@+id/textMoneyDescription"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/textMoneyCurrency"
            android:layout_marginLeft="@dimen/moneyview_item_margin"
            android:layout_marginTop="@dimen/moneyview_TextField2_Padding"
            android:text="@string/empty_text"
            android:textSize="@dimen/moneyview_textField2_size" />
    </com.ab.framework.component.ui.RelativeLayout1>

</merge> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:42:21.307

红/黄/绿点是相对值。只有当您发现性能存在问题时，您才应该查看它们。

尝试使用包含`TextView`and的简单布局`ImageView`，您应该也会在那里看到红点。

# php - 使用 phpseclib 通过 sftp 上传时，远程文件有 0 个字节

> ID：16148494
> 
> 赞同：0
> 
> 时间：2013-04-22T13:35:22.717
> 
> 标签：php, cron, sftp, phpseclib

我有运行 xampp (1.7.7) 的 Server 2008 R2。我尝试将 sftp 与 phpseclib 一起使用。当我手动加载 php 页面时，一切正常。当页面通过 cronjob 加载时，我在远程计算机上得到 0 字节文件。

这是php代码：

```
$sftp = new Net_SFTP('remote.server');
if (!$sftp->login('user', 'password')) {
    exit('Login Failed');
}
$sftp->put($filename.".DAT", $filename.".DAT", NET_SFTP_LOCAL_FILE); 
```

这里是cronjob的.bat：

```
@E:\WSERVER\xampp\php\php.exe -f E:\WSERVER\xampp\htdocs\sites\anq\file.php 
```

可能是什么问题呢？无论哪种方式，本地文件都很好...

问候 j

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:56:06.733

Net_SFTP::put() 调用的第二个参数如下：

```
$filename.".DAT" 
```

我的猜测是，这是一个相对路径，并且 cron 作业（或 Windows 调度程序任务）运行的目录与手动运行时的目录不同。

IE。解决方案是使第二个参数成为文件位置的绝对路径。

# python - 我正在使用 Python，我想在多维列表中找到该（那些）值的最大值和位置

> ID：16148505
> 
> 赞同：1
> 
> 时间：2013-04-22T13:35:58.290
> 
> 标签：python, python-3.x, max

我有一个像这样的多维列表：

```
P= [ [55.0, 64.0, 71.0, 77.0, 81.0, 84.0, 85.0, 85.0, 83.0, 80.0],
    [0, 63.0, 71.0, 77.0, 82.0, 85.0, 87.0, 87.0, 86.0, 83.0],
    [0, 0, 69.0, 76.0, 81.0, 85.0, 87.0, 88.0, 87.0, 85.0], 
    [0, 0, 0, 73.0, 79.0, 83.0, 86.0, 87.0, 87.0, 85.0],
    [0, 0, 0, 0, 75.0, 80.0, 83.0, 85.0, 85.0, 84.0], 
    [0, 0, 0, 0, 0, 75.0, 79.0, 81.0, 82.0, 81.0], 
    [0, 0, 0, 0, 0, 0, 73.0, 76.0, 77.0, 77.0], 
    [0, 0, 0, 0, 0, 0, 0, 69.0, 71.0, 71.0], 
    [0, 0, 0, 0, 0, 0, 0, 0, 63.0, 64.0], 
    [0, 0, 0, 0, 0, 0, 0, 0, 0, 55.0] ] 
```

我想要一个程序，它找到这个矩阵的最大值，以及最大值的位置。在这个例子中，我正在寻找的是：输入 P[]，返回 88.0，和 2,7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:44:36.713

如果你有[NumPy](http://www.numpy.org/)，你可以像这样使用`argmax`和`unravel_index`：

```
import numpy as np

P = [[55.0, 64.0, 71.0, 77.0, 81.0, 84.0, 85.0, 85.0, 83.0, 80.0],
[0, 63.0, 71.0, 77.0, 82.0, 85.0, 87.0, 87.0, 86.0, 83.0],
[0, 0, 69.0, 76.0, 81.0, 85.0, 87.0, 88.0, 87.0, 85.0],
[0, 0, 0, 73.0, 79.0, 83.0, 86.0, 87.0, 87.0, 85.0],
[0, 0, 0, 0, 75.0, 80.0, 83.0, 85.0, 85.0, 84.0],
[0, 0, 0, 0, 0, 75.0, 79.0, 81.0, 82.0, 81.0],
[0, 0, 0, 0, 0, 0, 73.0, 76.0, 77.0, 77.0],
[0, 0, 0, 0, 0, 0, 0, 69.0, 71.0, 71.0],
[0, 0, 0, 0, 0, 0, 0, 0, 63.0, 64.0],
[0, 0, 0, 0, 0, 0, 0, 0, 0, 55.0]]

P = np.array(P)
n = np.argmax(P, axis=None)
idx = np.unravel_index(n, P.shape)
print(idx)
# (2, 7)

maxval = P[idx]
print(maxval)
# 88.0 
```

* * *

如果没有 NumPy，您可以使用`max`和列表推导：

```
maxval, i, j = max((item, i, j)  for i, row in enumerate(P)
                                 for j, item in enumerate(row))

print(maxval)
# 88.0

print(i, j)
# (2, 7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:50:36.583

[unutbu 的回答](https://stackoverflow.com/a/16148693/262271)很棒。这是一个更明显的解决方案，您可能会发现更直观。

```
curr_max = -float('inf')
curr_max_location = (None, None)
for (i, sublist) in enumerate(P):
    for (j, val) in enumerate(sublist):
        if val > curr_max:
            curr_max = val
            curr_max_location = (i, j)

print(curr_max)
print(curr_max_location) 
```

# jquery - yii/ajax 链接的 Fancybox 问题

> ID：16148507
> 
> 赞同：0
> 
> 时间：2013-04-22T13:36:08.947
> 
> 标签：jquery, yii, fancybox

我有一个相当大的项目，我们正试图从 jQuery UI 对话框迁移到 Fancybox。

过去的逻辑是这样的……

```
<a onclick="functionthatcreatesdialog()">Link</a>
...
function functionthatcreatesdialog() {
    $('#dialog').dialog({options}).dialog('open');
} 
```

根据 API 文档，Fancybox 的工作方式有些不同，这些是我的尝试；我正在尝试拉 AJAX 页面：

```
<a id="startimport"
href="<?=Yii::app()->baseUrl;?>/index-dev.php/products/uploadCsvToServer">
Import from file</a> 
```

而后来...

```
$(document).ready(function() {
    $('#startimport').fancybox({someoptions});
    return false;
}); 
```

我*也*直接尝试过`onclick=""`：

```
<a id="startimport"
href="<?=Yii::app()->baseUrl;?>/index-dev.php/products/uploadCsvToServer"
onclick="$('#startimport').fancybox();">
Import from file</a> 
```

但是，没有任何效果！我还尝试了其他一些组合。没有什么。

Chrome 的控制台也不能正常工作，我认为脚本可能无法正确加载，但确实如此。

`$('#startimport').fancybox`回来：

```
function (options) {
        var index,
            that     = $(this),
            selector = this.selector || '',
            run      = function(e) {
                var what = $(this).blur(), idx = index, relType, relVal;

                if (!(e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) && !what.is('.fancybox-wrap')) {
                    relType = options.groupAttr || 'data-fancybox-group';
                    relVal  = what.attr(relType);

                    if (!relVal) {
                        relType = 'rel';
                        relVal  = what.get(0)[ relType ];
                    }

                    if (relVal && relVal !== '' && relVal !== 'nofollow') {
                        what = selector.length ? $(selector) : that;
                        what = what.filter('[' + relType + '="' + relVal + '"]');
                        idx  = what.index(this);
                    }

                    options.index = idx;

                    // Stop an event from bubbling if everything is fine
                    if (F.open(what, options) !== false) {
                        e.preventDefault();
                    }
                }
            };

        options = options || {};
        index   = options.index || 0;

        if (!selector || options.live === false) {
            that.unbind('click.fb-start').bind('click.fb-start', run);

        } else {
            D.undelegate(selector, 'click.fb-start').delegate(selector + ":not('.fancybox-item, .fancybox-nav')", 'click.fb-start', run);
        }

        this.filter('[data-fancybox-start=1]').trigger('click');

        return this;
    } 
```

任何帮助，将不胜感激。我尝试寻找解决方案，但没有任何帮助。顺便说一句，我正在使用 Yii 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:10:03.427

首先，确保你加载了 fancybox js 和 css 文件（在 jQuery 之后）。

然后，对于这个 html 链接：

```
<a id="startimport" href="<?=Yii::app()->baseUrl;?>/index-dev.php/products/uploadCsvToServer">Import from file</a> 
```

尝试 ：

```
$(document).ready(function () {
    $("#startimport").fancybox({
        type: 'ajax'
    });
}); 
```

...（你不需要`return false;`）。

如果您想在 fancybox 中打开多个链接，那么您可能需要切换到类而不是 ID。

**注意**：ajax 请求遵循[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

如果您使用的是 fancybox v2.x 请记住，如果fancyBox无法获取内容`type`，它将尝试根据并显示错误消息）。`href``ajax``type`

# c# - 从 JSON 流生成 C# 类并解析此流

> ID：16148510
> 
> 赞同：0
> 
> 时间：2013-04-22T13:36:25.497
> 
> 标签：c#, json, windows-phone-7, json.net, deserialization

我想从中生成 C# 类（[JSON DATA](http://pastebin.com/kfQ8KgEg)），但[http://json2csharp.com/](http://json2csharp.com/)无法生成 C# 类。JSON 应该是有效的 ( [http://jsonlint.com/](http://jsonlint.com/) )。你能帮助我吗？

当我创建类表单 JSON 时，我只使用这样的东西：

```
MyNewClass test = ser.Deserialize<MyNewClass>(response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:48:17.547

您不需要任何课程，因为您的 json 是`List<List<string>>`

```
var result = new JavaScriptSerializer().Deserialize<List<List<string>>>(json); 
```

或使用 Json.Net

```
var result = JsonConvert.DeserializeObject<List<List<string>>>(json); 
```

就这些....

```
foreach (var list in result)
{
    foreach (var item in list)
        Console.Write(item + " ");
    Console.WriteLine();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:42:09.517

您需要创建您的 C# 类。因此，例如；

```
public class Wrapper
{   
    public List<CustomObject> Data { get; set; }
}

public class CustomObject 
{ 
    public string Id {get;set;}
    public string Name {get;set;}
} 
```

然后反序列化`System.Web.Script.Serialization.JavaScriptSerializer()`

```
Wrapper wrapper = new System.Web.Script.Serialization.JavaScriptSerializer().Deserialize<Wrapper>(json); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-05T18:23:22.473

最简单的方法，只需 2 个步骤，无需任何 3rth 方库

1- 访问[http://json2csharp.com/](http://json2csharp.com/)并让生成器创建您的 c# 类

2-

```
HttpResponseMessage response = await client.GetAsync(Url);    
YourJSonClass obj = await response.Content.ReadAsAsync<YourJSonClass>(); 
```

# css - 为什么我的页面看起来不同，当我哈希链接到一个 ID 时？

> ID：16148517
> 
> 赞同：4
> 
> 时间：2013-04-22T13:36:55.193
> 
> 标签：css, url

我有一个非常奇怪的 CSS 问题。

当我链接到我的页面时，标题（Ohne Geschäftsidee...）看起来不错：[blah.html](http://www.xn--existenzgrnder-im-netz-1lc.de/blog/ohne-geschaeftsidee-koennen-sie-nicht-starten-der-startfaktor.html)

但是，当我将链接附加到 ID 时，标题的顶部会被切断：[blah.html#comment-2](http://www.xn--existenzgrnder-im-netz-1lc.de/blog/ohne-geschaeftsidee-koennen-sie-nicht-starten-der-startfaktor.html#comment-2)

但是，当我链接到标题本身时，这不会发生：[blah.html#post-199](http://www.xn--existenzgrnder-im-netz-1lc.de/blog/ohne-geschaeftsidee-koennen-sie-nicht-starten-der-startfaktor.html#post-199)

有什么想法可以阻止这种疯狂吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:50:01.593

确实很奇怪。在有问题的情况下，元素似乎`#main`超出了它的高度，并且由于它有一个`overflow:hidden;`CSS 声明，所以该`h1`元素被截断了。

从元素中删除`overflow:hidden;`声明`#main`似乎可以解决截断问题。

# android - 在列表视图中设置某些元素不可点击

> ID：16148518
> 
> 赞同：1
> 
> 时间：2013-04-22T13:36:59.207
> 
> 标签：android, listview, clickable

要设置我的 ListView 的某些元素不可点击，我在我的自定义数组适配器中使用 isEnabled 方法，如下所示。奇怪的是 ListView 本身中的项目**显示正确，但是****clickable**出现了一些问题。

可能有帮助的是，当我滚动时，突然出现 Toast 而不是在开始时出现，给出的位置与不应单击的元素不对应并以黑色显示。有什么想法可以解决这个问题吗？

```
public View getView(int position, View convertView, ViewGroup parent) {

        View row = convertView;
        ViewHolder holder;
        Object sRO = getItem(position);

        title = sRO.getTitle();
        description = sRO.getDescription();
        isBuffered = sRO.getIsBuffered();

        if (row == null) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new ViewHolder();
            holder.tvTitle = (TextView) row.findViewById(R.id.jText);
            holder.tvDescription = (TextView) row
                    .findViewById(R.id.jDescription);
            holder.checkbox = (CheckBox) row.findViewById(R.id.chk);

            row.setTag(holder);

        } else {

            holder = (ViewHolder) row.getTag();

        }

        if (isBuffered == true) {

            holder.tvTitle.setText(title);
            holder.tvDescription.setText(description);
            holder.tvTitle.setTextColor(Color.BLACK);
            holder.checkbox.setVisibility(View.VISIBLE);

        } else if (isBuffered == false) {

            holder.tvTitle.setText(title);
            holder.tvTitle.setTextColor(Color.RED);
            holder.tvDescription.setText(description
                    + " - not supported");
            holder.tvDescription.setTextColor(Color.RED);
            holder.checkbox.setVisibility(View.GONE);
        }

        return row;
    }

    @Override
    public boolean isEnabled(int position) {

        if (isBuffered == false ) {
            Toast.makeText(context, "false and "+position, Toast.LENGTH_SHORT).show(); 
            return false;
        } else {
            Toast.makeText(context, "true and "+position, Toast.LENGTH_SHORT).show(); 
            return true;
        }

    } 
```

# java - 用于从 Excel 文件的表中插入多个值的命令

> ID：16148522
> 
> 赞同：0
> 
> 时间：2013-04-22T13:37:09.367
> 
> 标签：java, mysql, jdbc

我必须制作一个程序，我将从excel中读取数据并将它们存储在数据库中。我设法创建了具有每个 excel 文件名称的表，并通过 excel 文件的第一行创建了表的字段。现在我必须将excel文件中的所有其他数据存储在表中。我已经编写了下面的代码，但“插入”元素有错误。

```
private static String fillTable(Connection con, String fieldname, HashMap<String, Integer> tableFields){
        Iterator iter = tableFields.keySet().iterator();
        Iterator cells = tableFields.keySet().iterator(); 
        String str="";
        String[] tousFields = new String[tableFields.size()];
        int i = 1; 
        while (iter.hasNext()){
            String fieldName = (String) iter.next();
            Integer fieldType=(Integer)tableFields.get(fieldname);
            while (cells.hasNext()){
                String fieldName1 = (String) cells.next();
                Integer fieldType1=(Integer)tableFields.get(fieldName1);
                }
                tousFields[i++]= str;   
        }
        try
        {
            Statement  stmt = con.createStatement();
            System.out.println ( "Use the table");
            String all = org.apache.commons.lang3.StringUtils.join(tousFields, ",");
            String sql= INSERT INTO "tablename"  + VALUES (" +all +")";
            stmt.executeUpdate (sql); 
```

我想要读取所有的列和行。我必须如何在 INSERT 中编写命令？先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:41:46.170

Modify the sql line to look like the following.

```
 String sql= "INSERT INTO tablename VALUES (" +all +")"; 
```

# android - 哪个 id 用于 Android 应用中介 id 或 Publisher id

> ID：16148525
> 
> 赞同：1
> 
> 时间：2013-04-22T13:37:17.597
> 
> 标签：android, admob

我想在我的应用程序中插入添加，我将在 android 应用程序发布者 ID 或中介 ID 中使用哪个 ID？

```
 <com.google.ads.AdView
     xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
     android:id="@+id/ad"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     ads:adSize="SMART_BANNER"
     ads:adUnitId="738a44d913034b9f"
     /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:08:41.613

添加网站/应用后会生成发布商 ID，用于从 AdMob 网络请求广告。发布商 ID 可以请求横幅和插页式广告，使您能够在整个应用程序中使用相同的 ID 来获取 AdMob 广告。但是，为了获得更好的报告，我们仍然建议您为每个广告展示位置使用不同的发布商 ID。

创建中介展示位置后会生成中介 ID。中介 ID 用于从服务器检索中介配置，以便 AdMob SDK 可以代表您向其他广告网络发出广告请求。与网站/应用不同，中介展示位置需要您定义广告格式，例如 320x50 横幅。尝试使用 320x50 横幅中介展示位置请求插页式广告（反之亦然）将导致错误。

谷歌解释了同样的[here](http://googleadsdeveloper.blogspot.in/2012/04/know-your-admob-ids-publisher-vs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:42:25.297

您使用您的发布商 ID。：） 希望这可以帮助！

# java - GAE/J 此应用程序不存在 (app_id=u'app-id')

> ID：16148529
> 
> 赞同：2
> 
> 时间：2013-04-22T13:37:28.743
> 
> 标签：java, google-app-engine

我遇到了无法部署到 GAE 云的问题。我正在使用[appcfg.sh 脚本](https://developers.google.com/appengine/docs/appcfg)。

我已经这样做了：

```
./appcfg.sh update "/path/to/war" --no_cookies 
```

并且仍然收到错误。我错过了什么？

# sed - 标签之间的 SED 更改值

> ID：16148531
> 
> 赞同：0
> 
> 时间：2013-04-22T13:37:35.443
> 
> 标签：sed

我在unix上有这样的日志文件：

```
#######################################
################start host1############
#######################################
##java serv
host1,def,java,es,dev L2,1,dev w,fr
host1,def,java,es,dev L3,0,dev w,fr
host1,def,java,es,dev M1,1,dev w,fr
host1,def,java,es,dev M4,0,dev w,fr
host1,def,java,es,dev N1,1,dev w,fr
host1,def,java,es,dev M5,1,dev w,fr

##c++ serv
host1,def,ESServer,es,dev L2,1,dev w,fr
host1,def,ESServer,es,dev L3,0,dev w,fr
host1,def,ESServer,es,dev M1,1,dev w,fr
host1,def,ESServer,es,dev M4,1,dev w,fr
host1,def,ESServer,es,dev N1,0,dev w,fr
host1,def,ESServer,es,dev M5,1,dev w,fr
#######################################
################end host1##############
#######################################

#######################################
################start host2############
#######################################
##java serv
host2,def,java,es,dev L2,0,dev w,fr
host2,def,java,es,dev L3,0,dev w,fr
host2,def,java,es,dev M1,0,dev w,fr
host2,def,java,es,dev M4,0,dev w,fr
host2,def,java,es,dev N1,0,dev w,fr
host2,def,java,es,dev M5,0,dev w,fr

##c++ serv
host2,def,ESServer,es,dev L2,0,dev w,fr
host2,def,ESServer,es,dev L3,0,dev w,fr
host2,def,ESServer,es,dev M1,0,dev w,fr
host2,def,ESServer,es,dev M4,0,dev w,fr
host2,def,ESServer,es,dev N1,0,dev w,fr
host2,def,ESServer,es,dev M5,0,dev w,fr
#######################################
################end host2##############
####################################### 
```

我需要在标签“host1”之间的所有字符串中将值从 1 更改为 0。例如：

```
#######################################
################start host1############
#######################################
##java serv
host1,def,java,es,dev L2,0,dev w,fr
host1,def,java,es,dev L3,0,dev w,fr
host1,def,java,es,dev M1,0,dev w,fr
host1,def,java,es,dev M4,0,dev w,fr
host1,def,java,es,dev N1,0,dev w,fr
host1,def,java,es,dev M5,0,dev w,fr

##c++ serv
host1,def,ESServer,es,dev L2,0,dev w,fr
host1,def,ESServer,es,dev L3,0,dev w,fr
host1,def,ESServer,es,dev M1,0,dev w,fr
host1,def,ESServer,es,dev M4,0,dev w,fr
host1,def,ESServer,es,dev N1,0,dev w,fr
host1,def,ESServer,es,dev M5,0,dev w,fr
#######################################
################end host1##############
####################################### 
```

那么，是否可以在 SED 上编写正则表达式？我会尝试写，但无法理解如何继续... 这个表达式将所有值从 1 更改为 0

```
sed 's/,0,/,1,/g' file 
```

更新。

谢谢大家！现在它发生了变化，但是如果我想在 host1 中更改标记 java 或 c++ 中的值？像这样的东西： `sed '/start host1//c++/,/end host1/s/,0,/,1,/g' file`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:39:17.910

试试看：

```
sed '/start host1/,/end host1/s/,0,/,1,/g' 
```

`/start host1/`是一个起始地址`/end host1/`是一个结束地址。

请参阅[Sed 手册](http://www.gnu.org/software/sed/manual/sed.html#Addresses)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:43:55.910

尝试这个：

```
sed '/^host1/s/,0,/,1,/g' 
```

仅替换以 host1 ( ) 开头的行`/^host1/`，其余您注明的替换很好

# flash - 我可以使用动作脚本从 Flash 中的 url 播放 mp3 文件吗

> ID：16148534
> 
> 赞同：0
> 
> 时间：2013-04-22T13:37:43.327
> 
> 标签：flash, url, actionscript, mp3, playback

我制作了一个嵌入在我的应用程序中的播放器，但是当我想通过提供其 Url 播放 mp3 文件时，它无法在 HTML 上播放，而当我运行播放器的直接 swf 文件时播放相同的 url。

例如：它正在播放放置在我的服务器上的文件，但无法播放具有 [http://www.xyx.com/akdfjak](http://www.xyx.com/akdfjak) f/akdjk/RemoteFile.mp3 之类的 url 的文件

但是打开 SWF 时会播放相同的文件，因此希望在嵌入我的 HTML 的播放器上播放它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:21:41.880

您可以使用 URLLoader 对象下载您的 mp3。据我所知，如果你想实时播放声音，你需要一个媒体服务器。

# c# - 在 C# Coded UI 中有一种方法可以等待控件可点击

> ID：16148542
> 
> 赞同：5
> 
> 时间：2013-04-22T13:38:30.300
> 
> 标签：c#, coded-ui-tests

在编码的 ui 中，有一种方法可以使用`UITestControl.WaitForControlExist(waitTime);`. 有没有办法等待控件不存在？我能想到的最好方法是创建一个这样的扩展方法：

```
public static bool WaitForControlClickable(this UITestControl control, int waitTime = 10000)
    {
        Point p;
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();
        while (stopwatch.ElapsedMilliseconds < waitTime)
        {
            if (control.TryGetClickablePoint(out p))
            {
                return true;
            }
            Thread.Sleep(500);
        }
        return control.TryGetClickablePoint(out p);
    } 
```

有没有更好的方法来做到这一点？我也在寻找一种相反的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:47:18.533

所以 WaitForControlExists 实际上做的是调用公共的 WaitForControlPropertyEqual，类似于：

```
return this.WaitForControlPropertyEqual(UITestControl.PropertyNames.Exists, true, timeout); 
```

您的助手可以改为调用：

```
 public bool WaitForControlPropertyNotEqual(string propertyName,
                object propertyValue, int millisecondsTimeout) 
```

此外，正如 Kek 所指出的，还有一个 WaitForControlNotExist 公共方法。

请注意，他们似乎都在使用相同的助手（也是公开的）：

```
 public static bool WaitForCondition<T>(T conditionContext, Predicate<T> conditionEvaluator, int millisecondsTimeout) 
```

这个助手本质上是在当前线程上做一个 Thread.Sleep ，就像你做的一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T23:04:46.650

如果您只想等待特定的时间长度，您可以添加到您的测试中：

```
Playback.Wait(3000); 
```

以毫秒为单位的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-05T09:26:01.470

有一系列`WaitForControl...()`方法，包括`WaitForControlNotExist()`方法。

这些`Wait...`方法的完整集是：

```
WaitForControlEnabled()
WaitForControlExist()
WaitForControlNotExist()
WaitForControlPropertyEqual()
WaitForControlPropertyNotEqual()
WaitForControlReady() 
```

还有`WaitForCondition()`和`WaitForControlCondition()`方法可用于等待更复杂的条件。

# mysql - MySQL资源利用优化

> ID：16148544
> 
> 赞同：1
> 
> 时间：2013-04-22T13:38:34.380
> 
> 标签：mysql, select, query-optimization

有2个查询：

```
select * from X inner join Y on X.id=Y.id where X.text = "ABC"; 
```

和

```
select * from X inner join Y on X.id=Y.id and X.text = "ABC"; 
```

执行期间内存利用率是否有足够的差异，哪一个不那么贪婪？请证明你的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:48:31.570

在像这样的简单选择中，查询优化器*应该将*两个查询优化为相同的代码。

哪个查询更贪婪取决于您的索引。

如果 Y.id 上有索引但 X.text 上*没有**索引*，机器人查询将执行相同的操作。

 *如果*Y.id上没有索引并且**X.text*上没有索引，你必须走运。如果 MySQL 正确优化，第一个查询可能会更快，因为它在连接之前应用 where（这将是一个嵌套循环连接）。

如果 Y.id 和 X.text 上有和索引，第一个查询会更快，因为它可以利用这两个索引。它将首先应用 where 子句，然后执行索引连接。

基本规则：*不要*对 JOIN 子句中的前导表 (X) 应用 where 条件。务必在连接子句中包含连接表 (Y) 的 where 条件（尤其是在进行左连接时）。*

# list - Ocaml列表函数

> ID：16148545
> 
> 赞同：-3
> 
> 时间：2013-04-22T13:38:33.877
> 
> 标签：list, function, ocaml

我对 Ocaml 函数有一些“问题”。

定义 function `all_odd`，它对于给定的矩阵作为参数检查所有元素是否都是奇数。

```
val all_odd : int list list -> bool = <fun> 
```

例子：

```
#let matrix1 = [[1; 2]; [3; 4]];;
val matrix1 : int list list = [[1; 2]; [3; 4]]

#all_odd matrix1;;
- : bool = false; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:45:24.857

You can solve that problem in many way, but the best approach would be to decomposite the problem into simple ones.

*   Step 1: What's smallest problem to solve? How to check if a number is odd

    `x mod 2 != 0`

*   Step 2: How to use it for a whole list of numbers

    `let isOdd list = List.for_all (fun x -> x mod 2 != 0) list`

*   Step 3: How to use it for a matrix

* * *

```
let all_odd matrix =
    let isOdd list = List.for_all (fun x -> x mod 2 != 0) list in
    List.for_all isOdd matrix 
```

Makes sense?

# vb.net - 从数据库中检索整行 .Max()

> ID：16148549
> 
> 赞同：1
> 
> 时间：2013-04-22T13:38:42.360
> 
> 标签：vb.net, linq, linq-to-sql, max

我接受一个文本文件并用它来填充一个字符串数组（地址），然后我试图从数据库中检索 2 列，问题是一个地址可以有多个 ID，我正在尝试检索最新分配的一个（最大）以及一个单独的参考编号。

```
For Each item In addresses
        Dim reportInfo = (From Reports In DB.ReportDB 
        Where Reports.Address.Contains(item) 
        Select ID = Reports.ID,
        Ref = Reports.Ref).Max(Function(Reports) Reports.Ref) 
```

这只是返回 ID 并将 query = 设置为它，而我希望数据库中的元素与该 ID 对应。

另一个问题是我得到一个 no elements in sequence 错误，它可以引用 Ref 并不总是有一个，但是当我检查 null 时它仍然给出了错误。

哦，显然`.LastorDefault`不支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:11:38.317

尝试这个：

```
For Each item In addresses
    Dim reportInfo = (From Reports In DB.ReportDB 
    Where Reports.Address.Contains(item) 
    Orderby Reports.Ref
    Select new with{.ID = Reports.ID,
    .Ref = Reports.Ref}).Last() 
```

# css - IE 10 附加 CSS

> ID：16148551
> 
> 赞同：0
> 
> 时间：2013-04-22T13:38:52.517
> 
> 标签：css, header, dynamics-crm, internet-explorer-10

我通过 Js 添加一个 css 文件来更改我的 MS CRM 2011 标题，这适用于 IE9。

JS：

```
function ChangeColor()
{
var InternBool= document.getElementById('new_intern');
if(InternBool.value == 100000001)
{
var OrgUniqueName= Xrm.Page.context.getOrgUniqueName();
filename= OrgUniqueName + "//WebResources//new_Titlebar_Style";                 
attachCSS(filename);
}
}

function attachCSS(filename)
{       
var temp = $('head');
$("<link>")
  .appendTo($('head'))
  .attr({type : 'text/css', rel : 'stylesheet'})
  .attr('href', filename);
} 
```

CSS：

```
.ms-crm-Form-HeaderContainer{ 
   filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffB3CAEC, endColorstr=#fff6f8faE); 
} 
```

我尝试了几种附加孩子、链接等的方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:24:55.833

IE10 支持[CSS3 渐变](http://css-tricks.com/css3-gradients/)并放弃对`DX*`变换的支持。相反，您可以使用标准 CSS3 来执行此操作。像[终极 CSS 渐变生成器这样的](http://www.colorzilla.com/gradient-editor/)网站可以帮助您生成所需的跨浏览器 CSS（包括所有供应商前缀），但我很确定这就是您所追求的：

```
.ms-crm-Form-HeaderContainer {
background: #2989d8; /* Old browsers */
background: -moz-linear-gradient(top,  #2989d8 0%, #ffb3ca 0%, #fff6f8 100%, #207cca 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2989d8), color-stop(0%,#ffb3ca), color-stop(100%,#fff6f8), color-stop(100%,#207cca)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #2989d8 0%,#ffb3ca 0%,#fff6f8 100%,#207cca 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #2989d8 0%,#ffb3ca 0%,#fff6f8 100%,#207cca 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #2989d8 0%,#ffb3ca 0%,#fff6f8 100%,#207cca 100%); /* IE10+ */
background: linear-gradient(to bottom,  #2989d8 0%,#ffb3ca 0%,#fff6f8 100%,#207cca 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2989d8', endColorstr='#207cca',GradientType=0 ); /* IE6-9 */
} 
```

只需替换适当的开始/结束颜色

# java - 坚持创建一个java接口

> ID：16148556
> 
> 赞同：0
> 
> 时间：2013-04-22T13:39:07.833
> 
> 标签：java, interface

我创建了一个注册表类，用于向注册表添加和删除学生，还包含一个学生类。现在我必须构建一个带有主菜单的界面，其中有 4 个选项可供选择，包括：添加学生、删除学生、打印注册表并退出。扫描仪将用于破译用户选择的选项。

我真的不知道如何创建这个，我得到了一个模板来填写，但我无法理解它。此外，由于我的 RegistryInterface 没有 main 方法，因此我必须创建一个 RegistryApp，我也有一个模板。

任何有关如何创建它的帮助/建议将不胜感激，我对界面构建完全陌生，抱歉！

RegistryInterface代码模板：

```
import java.util.*;
public class RegistryInterface {

private Registry theRegistry = null;

public RegistryInterface(Registry theRegistry){}

//Displays the main menu and gets valid option from user

public void doMenu()
{
    System.out.println("Registry Main Menu");
    System.out.println("****************** \n");
    System.out.println("1\. Add a Student");
    System.out.println("2\. Delete a Student");
    System.out.println("3\. Print Registry");
    System.out.println("4\. Quit");
    System.out.println("Select option [1, 2, 3, 4] :>");    
}

private void doAddStudent() {}

private void doDeleteStudent() {}

private void doPrintRegistry() {}

} 
```

RegistryApp 代码模板：

```
public class RegistryApp {
public static void main (String[] args)
{
    //Create the registry object
    Registry theRegistry = new Registry();

    //Create an interface
    RegistryInterface aRegistryInterface
            = new RegistryInterface (theRegistry);

    //Display the menu
    aRegistryInterface.doMenu();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:49:18.153

你`RegistryInterface`是一个类而不是一个接口

*   必须像这样声明接口`public interface`
*   它应该只包含要使用的属性和方法的声明，并且不应该包含任何实现
*   您必须创建一个`RegistryImpl`实现此接口及其方法的类（如 ）
*   要使用它，您只需要创建一个界面实例（如`RegistryInterface RI = new RegistryInterface(R);`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:04:32.267

这样的事情可能会有所帮助：

```
public interface RegistryInterface {

  //Displays the main menu and gets valid option from user
  public void doMenu();

  public void doAddStudent();

  public void doDeleteStudent();

  public void doPrintRegistry();

} 
```

注册表：

```
public class Registy implements RegistryInterface {

    //java will force you to write methods the same as the ones declared in
    //RegistryInterface...
} 
```

主类：

```
public static void main (String[] args)
{
  //Create the registry object
  RegistryInterface theRegistry = new Registry();

  //Display the menu
  theRegistry.doMenu();

   //etc... 
```

}

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-22T13:54:27.210

您似乎在谈论图形用户界面，如果您对 java GUI 完全陌生，那么[http://docs.oracle.com/javase/tutorial/uiswing/上有一个非常详尽的教程](http://docs.oracle.com/javase/tutorial/uiswing/)

# vimdiff - 使用 vimdiff 一次获得多个更改

> ID：16148562
> 
> 赞同：1
> 
> 时间：2013-04-22T13:39:18.020
> 
> 标签：vimdiff

我正在使用 vimdiff 将另一个组文件中的更改合并到我们的文件中。并非所有更改都应该被接受，所以我必须手动进行。但是，我想知道是否有办法告诉 vimdiff 一次接受几个更改。即，我希望能够一次接受接下来的 10 个更改，而不是只接受下一个更改。现在我正在使用 "]c" 跳转到下一个更改并使用 "do" 来接受该更改。该文件是 250000 行，我只在第 5000 行...

真诚的，哈盖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T02:57:30.550

简而言之，您可以使用宏完成您想要的功能：

1.  **在正常模式下，按“q”和一个随机字母，让我们说“f”：**这将开始在寄存器“f”中录制一个宏。
2.  **执行您要重复的操作：**在本例中为 ']c' 和 'do'。
3.  **停止录制宏：**只需再次按“q”。

现在您可以通过在正常模式下键入**“@f”**来使用它，它将重播宏“f”中记录的操作。从那里你有几个选择：

*   如果你输入**'@@'** vim 将重播最后一个宏。提示：如果你只是按住键盘上的组合键，它会非常快地逐行完成。
*   如果你输入**'1000@f'** vim 将重播最后一个宏 1000 次，这几乎就是你要找的。
*   如果你想节省一些打字，你可以录制一个新的宏，即'g'执行'1000@f'，这样'@g'将调用'1000@f'，尽管如果你在'@之后使用'@@' g' 它将逐行执行。

这里有一个很好的教程： [http ://www.thegeekstuff.com/2009/01/vi-and-vim-macro-tutorial-how-to-record-and-play/](http://www.thegeekstuff.com/2009/01/vi-and-vim-macro-tutorial-how-to-record-and-play/)

# php - 将 php foreach 插入到 jquery append 函数中

> ID：16148563
> 
> 赞同：0
> 
> 时间：2013-04-22T13:39:19.110
> 
> 标签：php, javascript, jquery, foreach, append

在我的表单中，我有一个按钮，单击该按钮会附加一行要由用户填写的字段。

其中一个字段使用 foreach 循环来获取选择组选项，但我不确定如何将其输出到 .append() 调用中。

```
$(function() { $("button#add_billable").click(function(){ $("#billables").append("
<div class='row'>
  <div class='large-5 columns'>
    <label for='invoice_line'>Invoice Line</label><select name='invoice_billable[]'>
      <?php foreach ($pages->find('template=billable') as $billable) { ?>
      <option value='<?php echo $billable->id; ?>'>
        <?php echo $billable->title; ?>
      </option><?php } ?>
    </select>
  </div>
  <div class='large-5 columns'>
    <label for='line_value'>Value</label><input name='line_value[]' type='text' value='' />
  </div>
  <div class='large-1 columns'>
    <button class='delete tiny secondary'>-</button>
  </div>
</div>"); }); }); 
```

谁能给我一个指针？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:50:28.487

您的 PHP 需要将数据写入 JSON 对象或 Javascript 变量，或者 Javascript 可以读取的东西。

然后在您的点击事件中，在插入 HTML 之前，您需要根据写入页面的数据构建您的选择 html

# jquery - 通过上一个和下一个按钮在 DIV 中旋转；未知的 div 数

> ID：16148568
> 
> 赞同：0
> 
> 时间：2013-04-22T13:39:35.220
> 
> 标签：jquery

这个问题与这里的其他几个问题非常相似，但有所不同。div 的数量可以是无到十几个之间的任何值，并且每个要旋转的对象的命名 DIV 都是相同的。下面的代码：

PHP：

```
if($job->getPictureGalleries() != null){
$gallerys = $job->getPictureGalleries();
foreach($gallerys as $gallery){
    $gallery = Doctrine_Core::getTable('Gallery')->find($gallery);
    echo "<div class=\"galleries\">";
    include_partial('gallery/record', array('gallery' => $gallery));
    echo "</div>";
}
if(count($gallerys) > 1){
    $buttons = <<<EOD
<table style="box-shadow: 0.2em 0.2em 0.3em grey; width: 60%; margin-left: 20%; margin-top: 15px; background-color: whitesmoke; border: 1px solid grey; border-radius: 15px; height: 20px">
<tr style="width: 100%; ">
 <td style="width: 33%; text-align: right">
    <a href="#" id="previous_link"><img src="/web/images/previous.png" height="35" width="35" /></a>
 </td>
 <td style="
     width: 33%;
     color: #444444; 
     font-weight: bold;
     text-align: center;
     text-shadow: 0.1em 0.1em 0.3em grey;
 ">
    More Galleries
 </td>
 <td style="width: 33%">
    <a href="#" id="show_next_gallery" ><img src="/web/images/next_1.png" height="35" width="35" /></a></div>
 </td>
 </tr>
 </table>
 EOD;
    echo $buttons;
}
}; 
```

jQuery：

```
$(document).ready(function() {
if($('.galleries').size() > 1){
   $('.galleries').hide();
   $('.galleries').first().show();

   $("#show_next_gallery").click(function() {
       $('.galleries').first().hide();
       $('.galleries').nextAll().show();
        return false;
      });

   $("#previous_link").click(function() {
       $('.galleries').hide();
       $('.galleries').prevAll().show();
        return false;
      });
}

}); 
```

上面的代码在只检索两个对象时工作得很好，但除此之外，当单击下一个按钮时一切都崩溃了——导致显示多个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:49:22.007

它只适用于 2 个 div，因为`nextAll()`它为您提供了唯一存在的 div。如果有多个 div ，则为`nextAll()`您提供除第一个之外的所有 div。

我能想到的可能的解决方案是为每个 div 分配某种数字标识符，例如：

```
<div class="galleries" num="1">...</div>
<div class="galleries" num="2">...</div>
<div class="galleries" num="3">...</div> 
```

你的jQuery：

```
//hide all galleries except first
$('.galleries:not([num=1])').hide();
$("#show_next_gallery").click(function() {
    var curr = $('.galleries:visible').attr('num');
    var next = curr + 1;
    $('.galleries[num='+curr+']').hide();
    $('.galleries[num='+next+']').show();
    return false;
});

$("#previous_link").click(function() {
    var curr = $('.galleries:visible').attr('num');
    var prev = curr - 1;
    $('.galleries[num='+curr+']').hide();
    $('.galleries[num='+prev+']').show();
    return false;
}); 
```

没有测试过，但你明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:08:15.070

您可以使用元素`index()`来定位下一个/上一个元素。此外，您不需要绑定两个单独的点击处理程序。只需用于`e.target`确定单击了哪个元素：

```
$('#show_next_gallery, #previous_link').click(function(e) {     
    e.preventDefault();

    var currentIdx = parseInt($('div.galleries:visible').index('div.galleries'), 10);
    var nextIdx = ($(e.target).is('#show_next_gallery')) ? currentIdx + 1 : currentIdx - 1;

    $('div.galleries:eq(' + currentIdx + ')').hide();
    $('div.galleries:eq(' + nextIdx + ')').show();

}); 
```

这是一个简化的答案。显然，您需要添加一些逻辑来检查是否存在下一个/上一个元素，并基于此隐藏下一个/上一个按钮，但这应该会让您朝着正确的方向前进。

### [这是一个完整的示例小提琴](http://jsfiddle.net/zj3hK/9/)

`.next()`注意：您可以为此使用 jQuery ，因为您`.galleries`是一个接一个，但是，一旦您在它们之间添加其他元素，整个事情就会崩溃。使用索引并将选择器传递给索引可确保您始终在正确的位置获得正确的元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:06:04.263

请考虑以下内容（考虑到当您点击最后一个元素时您希望回滚到第一个元素）：

```
$('.galleries:not(:first)').hide();

$('#show_next_gallery').click(function() {
  var cur = $('.galleries:visible').hide();
  var next = cur.next();
  // Need to handle rolling to front when on last entry
  if(next.size() === 0) {
    next = $('.galleries:first');
  }
  next.show();
});

$('#show_prev_gallery').click(function() {
  var cur = $('.galleries:visible').hide();
  var prev = cur.prev();
  // Need to handle rolling to back when on first entry
  if(prev.size() === 0) {
    prev = $('.galleries:last');
  }
  prev.show();
}); 
```

# javascript - XSL 无法在 Chrome 中正确呈现/动作

> ID：16148571
> 
> 赞同：0
> 
> 时间：2013-04-22T13:39:46.250
> 
> 标签：javascript, google-chrome, xslt

所以，我正在努力更新 10-12 年的旧代码以兼容 Chrome，但我已经停滞不前了。无论出于何种原因，当我输入一个数字然后单击“fillPO”按钮时，它不会更新任何内容，而是在应该填充的框中放置一个“null”。这在 Internet Explorer 上按预期工作。是否有一般规则可以让它在 chrome 上工作？

```
<xsl:template name="control-row">
    <xsl:if test="$orderApprove='true' and $isSuperUser='false' and $archiveView='false' ">
        <td nowrap="true" colspan="10">
            <input type="button" name="servlet" value="Approve" onClick="return approveOrder();">&nbsp;checked orders</input>
            <xsl:if test="/poursxml/OrderedFields/Field='PO'">
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                Fill PO number across orders:&nbsp;
                <input type="text" name="genericPO" id = "genericPO" size="15" maxlength="30"/>
                &nbsp;
                <input type="button" value=" Fill PO " onclick="fillPO()"/>
            </xsl:if>
        </td>
    </xsl:if>
</xsl:template> 
```

这是 javascript 中的 fillPO()。

```
function fillPO()
{
    if(!anySelected())
        alert('Please select an order first.');
    else
    {
        dfa = document.getElementsByName('orderNumber');
        len = dfa.length;
        var ix = 0;
        for(ix=0; ix<len; ix++)
        {
            if(dfa[ix].name == 'orderNumber')
            {
                if(dfa[ix].checked == true)
                {
                    el_id = dfa[ix].id;
                    position = el_id.substring(11);
                    document.getElementById('PONumber' + position).innerHTML = '<input size="15" maxlength="30" type="text" name="PONumber" value="' + document.getElementById('genericPO').getAttribute('value') + '"></input>';
                }
            }
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:12:08.103

疯狂猜测：替换`document.getElementById('genericPO').getAttribute('value')`为`document.getElementById('genericPO').value`.

但我们确实需要查看一个示例，以便我们在 Chrome 中重现该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T06:12:26.983

因为您发布的代码片段中没有明显的问题（至少对我而言）。这里有一些调试提示（可能会有所帮助）：

*   考虑查看生成的 html（可能复制并格式化它）并将其与 IE 生成的 html 进行比较。这可以在 chrome 调试器的 Elements 选项卡中完成。
*   尝试在可能无法正常工作的 javascript 函数中设置断点。
*   如果这仍然没有帮助。考虑复制可能是服务器端生成的 xml。这可以在 chrome 调试器的“网络”选项卡中完成。尝试减少xml并离线测试以找到导致问题的部分。
*   如果调试剂量不能按预期工作。向 javascript添加一些`console.log("test point");`或调用。`alert()`

（..可能会继续..）

# core-data - 为添加场景而解除视图控制器的 NSManagedObjectContext 时出错，但可以用于编辑场景

> ID：16148573
> 
> 赞同：0
> 
> 时间：2013-04-22T13:39:50.110
> 
> 标签：core-data, automatic-ref-counting, nsmanagedobjectcontext

我有两个控制器，一个称为 AddressesController

```
@interface AddressesController : UITableViewController<ManageAddressDelegate>
@property(nonatomic, strong) NSFetchedResultsController *fetchedResultsController;
@end 
```

正常通过 NSFetchedResultsController 显示地址，并为用户操作执行 SegueAddAddress，例如：

```
- (IBAction)addButtonClicked:(id)sender {
    [self performSegueWithIdentifier:SegueNewAddress sender:sender];
} 
```

并在单击一行时执行 SegueEditAddress：

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath {
    Address *address = [self.fetchedResultsController objectAtIndexPath:indexPath];
    [self performSegueWithIdentifier:SegueEditAddress sender:address];
} 
```

另一个控制器是 EditAddressController，它是 SegueAddAddress 和 SegueEditAddress 的destinationViewController：

```
@interface EditAddressController : UITableViewController<EZFormDelegate>
@property (strong, nonatomic) Address *address;
@property (strong, nonatomic) NSManagedObjectContext *context;
@property (weak, nonatomic) id <ManageAddressDelegate> delegate;
@end 
```

我将为子控制器准备 segue，在子 NSManagedObjectContext 中有一个地址，在 AddressesController#prepareForSegue:sender 中命名为editContext（也设置委托协议）

```
if ([segue.identifier isEqualToString:SegueEditAddress]) {
    EditAddressController *controller = segue.destinationViewController;
    controller.delegate = self;
    NSManagedObjectContext *editContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    editContext.MR_workingName = @"Edit Address Context";
    [editContext setParentContext:[self.fetchedResultsController managedObjectContext]];
    Address *address = sender;
    Address *editAddress = [address inContext:editContext];
    controller.address = editAddress;
    controller.context = editContext;
} 
```

在addingContext中准备一个新地址以添加：

```
if ([segue.identifier isEqualToString:SegueNewAddress]) {
    EditAddressController *controller = segue.destinationViewController;
    controller.delegate = self;
    NSManagedObjectContext *addingContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
    addingContext.MR_workingName = @"Adding Address Context";
    [addingContext setParentContext:[self.fetchedResultsController managedObjectContext]];
    Address *newAddress = [Address createInContext:addingContext];
    controller.address = newAddress;
    controller.context = addingContext;
} 
```

当用户单击 EditAddressController 中的保存按钮时，它会在填充地址属性后使用以下代码回调委托（AddressesController）：

```
- (IBAction)save:(id)sender {
    [self.delegate controller:self save:self.address];
} 
```

源 AddressesController 将通过相同的回调函数处理新的或编辑的操作：

```
- (void)controller:(EditAddressController *)controller save:(Address *)address {
    NSArray *keys = @[@"username", @"phone", @"zipcode", @"street"];
    NSDictionary *attributes = [address dictionaryWithValuesForKeys:keys];
    void (^success)(AFHTTPRequestOperation *, id) = ^(AFHTTPRequestOperation *operation, id responseObject) {
        [address importValuesForKeysWithObject:[responseObject JSONValue]];
        [address.managedObjectContext saveToPersistentStoreAndWait];
        [self.navigationController popViewControllerAnimated:YES];
    };
    void (^failure)(AFHTTPRequestOperation *, NSError *) = ^(AFHTTPRequestOperation *operation, NSError *error) {
        DDLogError(@"Failed to create address because of: %@", error);
    };

    if (address.id == nil || address.id.intValue == 0) {
        [self.http postPath:@"addresses" parameters:parameters success:success failure:failure];
    } else {
        NSString *path = [NSString stringWithFormat:@"addresses/%@", address.id];
        [self.http putPath:path parameters:parameters success:success failure:failure];
    }
} 
```

该功能只是将新的或修改后的地址发布到服务器，并在 http ok 后保存到 CoreData 中。我使用 Magical Record 执行 CoreData 相关操作，上面的代码**[address.managedObjectContext saveToPersistentStoreAndWait];"**将导致默认上下文也被保存。我尝试使用正常 [NSManagedObjectContext:save:error]，错误是一样的。

问题是，虽然99%的添加和编辑逻辑是一样的，但是编辑没问题。当我添加一个地址时，它将被保存到数据库中，并在调用**[self.navigationController popViewControllerAnimated:YES]时引发异常，当 EditAddressController 释放 ivar*****上下文***时发生错误：

EXC_BAD_ACCESS（代码=2，地址=0x3）

错误堆栈附带（仅列出一些关键功能）：

```
[NSPersistStoreCache decrementRefCountForObjectID]
... 
[NSManagedObjectContext(_NestedContextSupport) managedContextDidUnregisterObjectsWithIDs:]
...
[NSManagedObjectContext dealloc] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:48:29.963

经过几轮测试，我找到了根本原因：

我们应该在以下消息之后向托管对象上下文发送重置消息：

```
[address.managedObjectContext saveToPersistentStoreAndWait];

[address.managedObjectContext reset]; 
```

而且我不知道为什么编辑对象不会导致错误。

# java - HashMap 和 int 作为键

> ID：16148575
> 
> 赞同：116
> 
> 时间：2013-04-22T13:39:52.657
> 
> 标签：java, hashmap

我正在尝试构建一个 HashMap，它将整数作为键，对象作为值。

我的语法是：

```
HashMap<int, myObject> myMap = new HashMap<int, myObject>(); 
```

但是，返回的错误是 - 标记“int”上的语法错误，此标记后预期的维度 - 我不明白为什么我应该添加一个维度（即：将 int 变成一个数组），因为我只需要存储一个数字作为关键。

我能做什么？

提前致谢！:)

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2013-04-22T13:41:11.600

改为使用`Integer`。

```
HashMap<Integer, MyObject> myMap = new HashMap<Integer, MyObject>(); 
```

Java 会自动将`int`原始值自动装箱为`Integer`对象。

从 Oracle Java 文档中阅读有关[自动装箱的更多信息。](http://docs.oracle.com/javase/7/docs/technotes/guides/language/autoboxing.html)

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-12-08T15:06:01.847

对于为 Android 设备编写 Java 并最终在这里结束的每个人：使用`SparseArray`以获得更好的性能；

```
private final SparseArray<myObject> myMap = new SparseArray<myObject>(); 
```

有了这个，您可以使用 int 而不是 Integer 之类的；

```
int newPos = 3;

myMap.put(newPos, newObject);
myMap.get(newPos); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-04-22T14:02:46.830

您不能使用原语，因为 HashMap 在内部使用对象作为键。所以你只能使用继承自 Object 的对象（即任何对象）。

那是 HashMap 中的函数 put()，正如你所看到的，它使用 Object for K：

```
public V put(K key, V value) {
    if (key == null)
        return putForNullKey(value);
    int hash = hash(key);
    int i = indexFor(hash, table.length);
    for (Entry<K,V> e = table[i]; e != null; e = e.next) {
        Object k;
        if (e.hash == hash && ((k = e.key) == key || key.equals(k))) {
            V oldValue = e.value;
            e.value = value;
            e.recordAccess(this);
            return oldValue;
        }
    }

    modCount++;
    addEntry(hash, key, value, i);
    return null;
} 
```

表达式“k = e.key”应该很清楚。

我建议使用像 Integer 和 autoboxing 这样的包装器。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-12-18T09:55:36.623

您可以尝试使用 Trove [http://trove.starlight-systems.com/](http://trove.starlight-systems.com/)
TIntObjectHashMap 可能是您正在寻找的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-22T14:04:37.200

HashMap 不允许原始数据类型作为参数。它只能接受对象，所以

```
HashMap<int, myObject> myMap = new HashMap<int, myObject>(); 
```

不管用。

您必须将声明更改为

```
HashMap<Integer, myObject> myMap = new HashMap<Integer, myObject>(); 
```

所以即使您执行以下操作

```
myMap.put(2,myObject); 
```

原始数据类型自动装箱为 Integer 对象。

```
8 (int) === boxing ===> 8 (Integer) 
```

您可以在此处阅读有关自动装箱的更多信息[http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-30T12:32:41.820

***HashMap***不允许原语作为键的主要原因是 HashMap 的设计方式是为了比较键，它使用***equals()***方法，并且只能在对象上调用方法，而不是在原语上。

因此，当 int 自动装箱为 Integer 时，Hashmap 可以在 Integer 对象上调用***equals()***方法。

这就是为什么你应该使用整数而不是整数。我的意思是 hashmap 在将 int 作为键时抛出错误（不知道抛出的错误的含义）

如果您认为，您可以通过将原语作为键来提高 Map 性能，有一个名为***FastUtil***的库，其中包含一个以 int 类型作为键的 Map 实现。

正因为如此，它比***Hashmap 快得多***

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-08-28T07:06:23.000

如果您在 Android 中编码，则存在[SparseArray](http://developer.android.com/reference/android/util/SparseArray.html)，将整数映射到对象。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-06-04T12:35:00.647

对于那些对此类地图感兴趣的人，因为您想减少Java 中对原始类型的包装器**的自动装箱占用**，我建议使用 [Eclipse 集合](https://www.eclipse.org/collections/)。**Trove 不再受支持**，我相信从这个意义上说它是非常不可靠的库（尽管它仍然很受欢迎）并且无法与[Eclipse 集合](https://www.eclipse.org/collections/)相提并论。

```
import org.eclipse.collections.impl.map.mutable.primitive.IntObjectHashMap;

public class Check {
    public static void main(String[] args) {
        IntObjectHashMap map = new IntObjectHashMap();

        map.put(5,"It works");
        map.put(6,"without");
        map.put(7,"boxing!");

        System.out.println(map.get(5));
        System.out.println(map.get(6));
        System.out.println(map.get(7));
    }
} 
```

在上面的这个例子[中 IntObjectHashMap](http://www.eclipse.org/collections/javadoc/10.2.0/org/eclipse/collections/impl/map/mutable/primitive/IntObjectHashMap.html#containsAllArguments-java.lang.Object...-)。

当您需要*int->object*映射时，还要考虑使用`YourObjectType[]`数组或`List<YourObjectType>`按索引访问值（因为 map 本质上是一个关联数组）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-22T13:42:01.210

将 int 用作 Object 而不是原始类型

```
HashMap<Integer, myObject> myMap = new HashMap<Integer, myObject>(); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-10T23:00:48.620

如果您正在使用 Netty 并希望使用带有原始 int 类型键的映射，您可以使用它的[`IntObjectHashMap`](https://netty.io/4.1/api/io/netty/util/collection/IntObjectHashMap.html)

使用原始类型集合的一些原因：

*   通过使用专门的代码来提高性能
*   减少对 GC 造成压力的垃圾

专业集合与通用集合的问题可以决定具有高吞吐量要求的程序的成败。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-22T13:42:39.370

请用 `HashMap<Integer, myObject> myMap = new HashMap<Integer, myObject>();`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-12-05T06:39:31.950

> 我不明白为什么我应该添加一个维度（即：将 int 变成一个数组），因为我只需要存储一个数字作为键。

数组也是一个对象，因此`HashMap<int[], MyObject>`使用 int 数组作为键的有效构造也是如此。

编译器不知道您想要什么或需要什么，它只是看到一个几乎正确的语言结构，并警告缺少什么以使其完全正确。

# matlab - MatLab - 比较不均匀矩阵？

> ID：16148576
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:39:55.847
> 
> 标签：matlab, matrix

我在 2 列 (12x2) 中有一个 24 个坐标的矩阵：

矩阵1：

1.1、4.1

2.3、4.8

9.1, 33.1

12.45、45.67 等...

我希望将此与其他 100 多个范围大小的矩阵进行比较，例如，有些将由 10 个坐标组成，有些将由 15 个组成，有些甚至是 24。这样做是为了找到匹配项

为了比较它们，我找到了矩阵中元素的 pdist，然后使用容差，因此它们不必为了匹配而精确，然后使用“模式”来查找多数以确定是否匹配。

所以这对于相同大小的矩阵非常有用......但不是其他的，所以我决定用 0 替换矩阵中不等于最大可能矩阵的空格，迫使它们都具有相同的大小。这允许匹配，但由于 pdist 创建了我不想使用的距离。

我的比较代码：

结果 = (array >= matrix1 * 0.1 & array < matrix1 * 1.5);

任何帮助或指导将不胜感激。感谢您的时间！

精简版

比较两个不均匀矩阵

我的代码只允许我比较相同大小的矩阵有什么建议吗？

结果 = (array >= matrix1 * 0.1 & array < matrix1 * 1.5);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:38:33.200

我走这条路，但我不知道它是否能满足你的要求：

```
array = randi(100,24,2); % starting matrix
matrix = randi(100,13,2); % comparative matrix
matrix1 = padarray(matrix,size(array) - size(matrix),'post'); % pad comparative matrix with zeros

results = (array >= matrix1 * 0.1 & array < matrix1 * 1.5); 
```

# java - 在 if 语句中分配变量值

> ID：16148580
> 
> 赞同：115
> 
> 时间：2013-04-22T13:40:11.767
> 
> 标签：java

我想知道是否可以像这样在条件运算符中为变量赋值：

`if((int v = someMethod()) != 0) return v;`

有没有办法在 Java 中做到这一点？因为我知道在`while`某些条件下这是可能的，但我不确定我是否对 if 语句做错了，或者它是否不可能。

* * *

## 回答 #1

> 赞同：197
> 
> 时间：2013-04-22T13:42:53.377

变量可以被赋值，但不能在条件语句中声明：

```
int v;
if((v = someMethod()) != 0) return true; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-04-22T13:47:16.867

您可以在 an 内*分配*，但不能*声明*`if`：

尝试这个：

```
int v; // separate declaration
if((v = someMethod()) != 0) return true; 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-22T13:43:39.263

an assignment returns the left-hand side of the assignment. so: yes. it is possible. however, you need to declare the variable outside:

```
int v = 1;
if((v = someMethod()) != 0) {
    System.err.println(v);
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-22T13:41:42.903

Yes, you can assign the value of variable inside if.

I wouldn't recommend it. The problem is, it looks like a common error where you try to compare values, but use a single `=` instead of `==` or `===`.

It will be better if you do something like this:

```
int v;
if((v = someMethod()) != 0) 
   return true; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T13:52:19.373

我相信您的问题是由于您在测试中定义了变量 v 。正如@rmalchow 所解释的，它会让你把它改成

```
int v;
if((v = someMethod()) != 0) return true; 
```

还有另一个变量范围的问题。即使您尝试的方法有效，那又有什么意义呢？假设您可以在测试中定义变量范围，您的变量 v 将不存在于该范围之外。因此，创建变量并分配值将毫无意义，因为您将无法使用它。

变量只存在于它们创建的范围内。由于您要分配值以供以后使用，因此请考虑创建变量的范围，以便可以在需要的地方使用它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-22T13:57:11.190

是的，有可能做到。考虑下面的代码：

```
public class Test  
{        
    public static void main (String[] args)       
    {       
        int v = 0;          
        if ((v=dostuff())!=0)            
        {          
            System.out.printf("HOWDY\n");          
        }             
    }                
    public static int dostuff()       
    {             
        //dosomething              
        return 1; 
    }       
} 
```

我希望这能满足你的问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-22T13:42:55.157

You can assign a variable inside of `if` statement, but you must declare it first

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-22T13:43:51.867

Yes, it is possible to assign inside if conditional check. But, your variable should have already been declared to assign something.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-22T13:43:18.970

> Because I know it's possible in while conditions, but I'm not sure if I'm doing it wrong for the if-statement or if it's just not possible.

**HINT:** what type while and if condition should be ??

If it can be done with while, it can be done with if statement as weel, as both of them expect a boolean condition.

# php - 在 php 文件中使用 postgresql COPY 命令

> ID：16148585
> 
> 赞同：0
> 
> 时间：2013-04-22T13:40:55.697
> 
> 标签：php, postgresql

`COPY`是否可以在 php 文件中使用 postgresql命令？

我需要使用 php 脚本将数据库表中的表内容下载到文件中

```
 $sql = " COPY tablename TO STDOUT WITH DELIMITER ',' ";

    $db->query( $sql ); 
```

这段代码对我不起作用，正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:43:24.750

php 提供[pg_copy_to](http://php.net/manual/en/function.pg-copy-to.php)来实现`COPY`一个 php 数组，每行一个元素。

```
$rows = pg_copy_to($connection, "tablename", ","); 
```

# c# - C#：从文本文件中读取枚举

> ID：16148586
> 
> 赞同：2
> 
> 时间：2013-04-22T13:41:01.253
> 
> 标签：c#, enums, xna, stream

我正在用 C# & XNA 制作一个 2D 游戏。我目前正在保存和加载，所有数据都存储在文本文件中。

每个精灵都有一个状态：

```
public enum SpriteState
{
    Alive,
    Dead,
    Chasing,
    Sleeping,
    Waiting 
} 
```

保存时我只是执行这行代码：

```
StreamWriter.WriteLine(gameState); 
```

现在，当我加载游戏时，我必须读取文本文件的那一行，将其存储在字符串变量中，并执行以下操作：

```
string inType = StreamReader.ReadLine();

if(inType == "Alive")
   //Set the sprites state to alive
else if(inType == "Dead")
   //Set the sprites state to alive 
```

等等......所以我的问题是：有没有更好的方法从文本文件中读取枚举类型并分配它？

非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T13:41:57.433

您正在寻找

```
(SpriteState) Enum.Parse(typeof(SpriteState), inType) 
```

这会将字符串解析为枚举值。

您可能还希望`Dictionary<SpriteState, Action<...>>`将状态映射到采取适当操作的委托（lambda 表达式）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T13:42:08.033

尝试这个：

```
Enum.Parse(typeof(SpriteState), yourString); 
```

您也可以使用此方法：

```
public static T ParseEnum<T>(string value)
{
    return (T)Enum.Parse(typeof(T), value, true);
} 
```

# jsf - WARN DefaultAddResource - 无法从请求映射中检索 MyFaces 特殊 javascript

> ID：16148590
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:06.473
> 
> 标签：jsf, weblogic, myfaces

我的应用程序在 Tomcat 7.x 服务器上运行良好，但是当我迁移到 WebLogic 12c 时，它停止正常运行。部署已成功完成，但一切`h:commandButton`都不起作用。此外，我正在使用 Apache MyFaces tomahawk 上传文件。当我按下一些`h:commandButton`没有任何反应时，日志中只出现一条记录：

```
WARN  DefaultAddResource:363 - MyFaces special javascript could not be retrieved from request-map. 
```

我试图从我的项目中删除所有 MyFaces 元素，但结果仍然相同，只是没有记录在日志中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T15:02:20.663

*从 WebLogic Server 12.1.1 开始，JSF 2.x 和 JSTL 1.2 已直接合并到服务器的类路径中*

此链接将告诉您如何重新配置​​应用程序以禁用 Weblogic 12c 附带的捆绑 JSF。

我仍然希望找到一种方法来直接在 weblogic 中禁用捆绑的 JSF，而不必重新配置部署到我们服务器的每个应用程序。

来自使用 JSF 和 JSTL - 12c 第 1 版 (12.1.1)： [http ://docs.oracle.com/cd/E24329_01/web.1211/e21049/configurejsfandjtsl.htm](http://docs.oracle.com/cd/E24329_01/web.1211/e21049/configurejsfandjtsl.htm)

如果您的应用程序包含您想要引用的 JSF JAR，而不是 WebLogic Server 捆绑的 JSF 共享库，您可以在 weblogic.xml (.war) 或 weblogic-application.xml (.ear) 中配置过滤类加载器，如下所示：

```
<prefer-application-packages> 
   <package-name>javax.faces.*</package-name> 
   <package-name>com.sun.faces.*</package-name> 
   <package-name>com.bea.faces.*</package-name> 
   </prefer-application-packages> 

   <prefer-application-resources> 
   <resource-name>javax.faces.*</resource-name> 
   <resource-name>com.sun.faces.*</resource-name> 
   <resource-name>com.bea.faces.*</resource-name> 

<resource-name>META-INF/services/javax.servlet.ServletContainerInitializer</resource-name>
   </prefer-application-resources> 
```

# php - 使用反射创建静态对象

> ID：16148591
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:07.633
> 
> 标签：php, oop, reflection

```
class HueHue {
    private $hue;

    public function show(){
        echo $this->hue;
    }

    public static function parse($string){
        // parse it all
        $HueHue = new HueHue();
        $reflector = new ReflectionClass($HueHue);
        $hue = $reflector->getProperty('hue');
        $hue->setAccessible(true);
        $hue->setValue($HueHue, $parsed_string);
    }
} 
```

这是“坏”吗？我真的更喜欢这个而不是制作一个`public function setHue($parsed_string)`，并且 parse() 必须是静态的，因为我讨厌这样做`new`然后设置和获取......

最终的游戏是公正的`HueHue::parse('something here')->show();`，我真的不想`private $hue`被设置。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T14:03:28.023

> 这是“坏”吗？

*你*的所作所为还不错。这不是世界上最干净的东西，但同时如果它解决了问题，那就太好了。不过，我会进行@Xeoncross 的修改，因为它更干净并且避免了反射。

但是，我认为你*为什么*这样做**是**不好的。

如果您制作一个对象只是为了格式化一个字符串以供输出，您可能需要重新考虑为什么首先要使用一个对象。如果您的大多数用途是：

```
HueHue::parse($hue)->show(); 
```

那么为什么不只创建一个跳过对象步骤的函数呢？

```
function parseHue($hue) {
    // parse it
    return $parsed_hue;
} 
```

然后使用：

```
echo parseHue($hue); 
```

或者，如果您出于某种原因需要值对象（您的问题中没有说明），则将解析器拆分为一个单独的对象，并使队列成为构造函数参数。

```
class Hue {
    private $hue;
    public function __construct($hue) {
        $this->hue = $hue;
    }
    public function show() {
        echo $this->hue;
    }
}

class HueParser {
    public function parse($string) {
        // parse it!
        return new Hue($parsed_hue);
    }
} 
```

解耦的原因是您现在可以多态地切换出解析器。因此，您对解析器使用者的单元测试可以将其换成模拟。

更不用说它保持适当的关注点分离，所以如果你想更新解析器逻辑（例如考虑一种新格式），你可以在不改变消费者（调用解析器的人）或最终用户（获得 Hue 对象的人）...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:43:24.640

如果是同一类，则不需要反思。

```
class HueHue {
    private $hue;

    public function show(){
        echo $this->hue;
    }

    public static function parse($string)
    {
        $HueHue = new Static();
        $HueHue->hue = $string;
        return $HueHue;
    }
}

HueHue::parse($hue)->show(); 
```

# javascript - 使用特定按钮更改字体大小

> ID：16148594
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:11.933
> 
> 标签：javascript, fonts, font-size

在编辑了下面共享的代码后，我使用了下面的脚本。

我在下面的回复中编辑了工作文件，几乎完全相同的东西运行良好..

我似乎错过了我的一些东西......

任何帮助将非常感激。

这是我正在使用的 Java 脚本

```
<script type="text/javascript">
function resizeText(multiplier) {
var elem = document.getElementById("MiddleContent");
var currentSize = elem.style.fontSize || 1;
elem.style.fontSize = ( parseFloat(currentSize) + (multiplier * 0.2)) + "em";
}
</script> 
```

这是表格代码：

```
<table border="0" id="MiddleContent">
<tr>
<td width="150" align="center">
<img src="../images/filler.jpg" width="146" height="104" />
</td>
<td  align="center" width="218" valign="middle">
<span style="color:#59461f; font-size:22px;">
Title of Story!
</span>
</td>
</tr>
<tr>
<td colspan="2" valign="top" style="font-size:14px">
<p>Lorem ipsum dolor sit amet, pellentesque tellus egestas, mauris cursus phasellus sit curabitur amet, molestias urna wisi.</p>
</td>
</tr>
</table> 
```

最后这是我的按钮所在的位置：

```
<div id="fontSizeButton" align="center">
<table width="96" border="0">
<tr>
<td colspan="2" align="center">FONT SIZE</td>
</tr>
<tr>    
<td>
<input name="reSize" type="button" value="&nbsp;+&nbsp;" onclick="resizeText(1)" />
</td>
<td align="right">
<input name="reSize2" type="button" value="&nbsp;-&nbsp;" onclick="resizeText(-1)" />
</td>
</tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:51:21.783

使用[getElementById()](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById%5C)来引用元素。正负方向也不需要2次函数，只需传入负数即可。

**HTML：**

```
<div id="foo">
    XXX
</div>
<input name="reSize" type="button" value="&nbsp;+&nbsp;" onclick="resizeText(1)" />
<input name="reSize2" type="button" value="&nbsp;-&nbsp;" onclick="resizeText(-1)" /> 
```

**JavaScript：**

```
function resizeText(multiplier) {
    var elem = document.getElementById("foo");
    var currentSize = elem.style.fontSize || 1;
    elem.style.fontSize = ( parseFloat(currentSize) + (multiplier * 0.2)) + "em";
} 
```

**运行示例：**

[JSFiddle](http://jsfiddle.net/HRpw9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:53:01.160

我希望我清楚你在问什么。

如果您将`body`代码中的`getElementById("main")`“main”替换为 div 的 id，我认为它应该满足您的要求。

# web-services - javax.ws.rs.core.Response$Status.getReasonPhrase() 关于 JAXB 的问题，使用 Apache Jersey 的 Rest 服务实现

> ID：16148596
> 
> 赞同：1
> 
> 时间：2013-04-22T13:41:17.380
> 
> 标签：web-services, apache, rest, jakarta-ee, jax-rs

我在尝试访问以下**REST**服务时遇到以下问题...我正在使用 Apache Jersey 实现来开发 REST 服务。

仅当我尝试 JAXB 时，我才面临以下问题，即...，用于将响应类型生成为 JSON。

下面是我正在使用的 JAR 列表。

```
jersey-bundle_1.0.0.0_1-1-5-1.jar
jsr311-api-1.0.jar
jackson-core-asl_1.0.0.0_1-1-1.jar
jettison_1.0.0.0_1-1.jar 
```

下面是异常跟踪...

```
Problem accessing /service/calender/testRest. Reason:

javax.ws.rs.core.Response$Status.getReasonPhrase()Ljava/lang/String;
Caused by:

java.lang.

NoSuchMethodError: javax.ws.rs.core.Response$Status.getReasonPhrase()Ljava/lang/String;
        at com.sun.jersey.spi.container.ContainerResponse.traceException(ContainerResponse.java:477)
        at com.sun.jersey.spi.container.ContainerResponse.onException(ContainerResponse.java:452)
        at com.sun.jersey.spi.container.ContainerResponse.mapWebApplicationException(ContainerResponse.java:407)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1036)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:941)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:932)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:384)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:451)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:632)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

我的 web.xml

```
<servlet>
    <servlet-name>Calender</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.punith.calender.application.CalenderApp</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Calender</servlet-name>
    <url-pattern>/service/*</url-pattern>
</servlet-mapping> 
```

和我的处理程序..

```
@GET
@Produces(MediaType.APPLICATION_JSON)
@Path("/testRest")
public TestObject testJson() {
    TestObject testObj = new TestObject("test", "value");
    return testObj;
    /*return "Hello World";*/
} 
```

我的 TestObject 类..

```
import javax.xml.bind.annotation.XmlRootElement;
@XmlRootElement(name="testObject")

public class TestObject {
    public String name;
    public String value;

    public TestObject(String objName, String objValue) {
        this.name = objName;
        this.value = objValue;
    } 
```

我非常怀疑使用的罐子，我猜我必须为 JAXB 使用更多的罐子。如果请让我知道下载 JAR 的链接…

问候蓬蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:18:23.577

这些是需要使用的下面的jar..

泽西捆绑

```
jersey-bundle-1.17.jar 
```

下面的 JAXB 是 JAR

```
jaxb-api.jar
jaxb-impl-javadoc.jar
jaxb-impl.jar
jaxb-xjc-javadoc.jar
jaxb-xjc.jar 
```

解决了...谢谢

# javascript - 传单：更新 GeoJson 过滤器？

> ID：16148598
> 
> 赞同：21
> 
> 时间：2013-04-22T13:41:25.637
> 
> 标签：javascript, leaflet, geojson

我想用数据填充 GeoJson 图层，然后动态过滤要显示的功能。

我已经让过滤器功能工作，但我不知道如何更改过滤器然后刷新图层。

添加数据后，有什么方法可以更新过滤器？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-10-01T13:56:58.437

我通过根据特征的属性将每种特征类型添加到不同的[LayerGroup](http://leafletjs.com/examples/layers-control.html)来做到这一点。例如

地理JSON

```
var data =[
  {
   type: "Feature",
   properties: {
      type: "type1"
   },
   geometry: {
      type: "Point",
      coordinates: [-1.252,52.107]
   }
  },
  {
   type: "Feature",
   properties: {
      type: "type2"
   },
   geometry: {
      type: "Point",
      coordinates: [-2.252,54.107]
   }
  }
]; 
```

创建[GeoJSON](http://leafletjs.com/reference.html#geojson)层

```
//array to store layers for each feature type
var mapLayerGroups = [];

//draw GEOJSON - don't add the GEOJSON layer to the map here
L.geoJson(data, {onEachFeature: onEachFeature})//.addTo(map);

/*
 *for all features create a layerGroup for each feature type and add the feature to the    layerGroup
*/
function onEachFeature(feature, featureLayer) {

    //does layerGroup already exist? if not create it and add to map
    var lg = mapLayerGroups[feature.properties.type];

    if (lg === undefined) {
        lg = new L.layerGroup();
        //add the layer to the map
        lg.addTo(map);
        //store layer
        mapLayerGroups[feature.properties.type] = lg;
    }

    //add the feature to the layer
    lg.addLayer(featureLayer);      
} 
```

然后您可以调用 Leaflet [map.addLayer/removeLayer](http://leafletjs.com/reference.html#layergroup)函数，例如

```
//Show layerGroup with feature of "type1"
showLayer("type1");

/*
* show/hide layerGroup   
*/
function showLayer(id) {
    var lg = mapLayerGroups[id];
    map.addLayer(lg);   
}
function hideLayer(id) {
    var lg = mapLayerGroups[id];
    map.removeLayer(lg);   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:16:59.747

在[GeoJSON](https://github.com/Leaflet/Leaflet/blob/master/src/layer/GeoJSON.js) `addData`方法中，首先检查数据是否是特征的集合，在这种情况下，每个特征都会调用该方法。

然后按如下方式应用过滤器：

```
var options = this.options;
if (options.filter && !options.filter(geojson)) { return; } 
```

因此，如果过滤器在您添加数据时将其过滤掉，则不会在任何地方存储或记住它。更改过滤器不会使数据突然重新出现。

您可以保留对 geojson 的引用并在更改过滤器时重新初始化图层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T09:02:25.587

请参见下面的示例，您有一张地图和一个 myBus 图层。

```
map.removeLayer(myBus);

...add your data edit something ...

myBus.addTo(map); 
```

# php - 导出到 csv 后无法显示正确的汉字

> ID：16148602
> 
> 赞同：1
> 
> 时间：2013-04-22T13:41:38.150
> 
> 标签：php, excel, csv, export-to-csv

# html - Hidden spaces/tabs pushing content down

> ID：16148603
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:41.487
> 
> 标签：html, css

This happened recently and I don't really know what is causing this. Some pages are fine so I tried copying the codes over to those files affected and the content is pushed down, two files with same code and one of them is pushed down. I thought maybe it could be the file format so I tried changing encoding to UTF-8, UTF-8 without BOM, ANSI. Using notepad++, CodeIgniter, XAMPP 3.1.0.3.1.0.

This is what I mean [http://i37.tinypic.com/2cletz.png](http://i37.tinypic.com/2cletz.png)

It should be like this [http://i33.tinypic.com/2ypnpjp.png](http://i33.tinypic.com/2ypnpjp.png)

Appears in quotation when inspecting elements in Chrome(able to delete by clicking delete node and it is becomes fine) [http://i36.tinypic.com/30bhchz.png](http://i36.tinypic.com/30bhchz.png)

Appears as spaces/tabs when viewing source in IE [http://i37.tinypic.com/2dj76fk.png](http://i37.tinypic.com/2dj76fk.png)

A simple HTML code like this can cause this problem

```
<!DOCTYPE HTML >
<html>
<head>
<title></title>

</head>

<body link="#294052" vlink="#294052" alink="grey" font="verdana" style="width:1407px">

<div id="header" style="height:100px;width:1407px;background-color:#294052;">

<div id="img" style="float:left;">
<img src="/e-com/images/logo.jpg" style="margin-left:130%;" />
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:48:36.727

删除 html-tags 之间的空格可能会解决您的问题。

其次，你有这样的css `html,body { margin:0px; padding:0px }`吗？这将删除页面周围的白色边框。

最后，您的示例在正文中`Chrome`声明了一个`title`标签，该标签不在代码中（注意：标题应该在 中`head`）。

# mysql - Find out if REPLACE statement has replaced or just inserted in MySQL

> ID：16148611
> 
> 赞同：4
> 
> 时间：2013-04-22T13:41:46.937
> 
> 标签：mysql

Is there a way in MySQL to find out if the last REPLACE statement actually replaced any row or just performed a regular insert? `LAST_INSERT_ID()` doesn't seem to help, since the autoincrement counter is updated in all cases.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:50:10.463

You need to determine the `affected rows` count. `REPLACE` doesn't update rows; it inserts or deletes and then inserts.

From the MySQL manual:

> The affected-rows count makes it easy to determine whether REPLACE only added a row or whether it also replaced any rows: Check whether the count is 1 (added) or greater (replaced).

Check out the manual page: [MySQL REPLACE Syntax](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:49:57.357

[REPLACE](http://dev.mysql.com/doc/refman/5.6/en/replace.html) returns the count of affected rows. This can be retrieved in SQL by `ROW_COUNT()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T14:04:02.227

If you want to know which rows have been effacted, you can also write a delete trigger that writes deleted rows to a history table.

Or let the delete trigger count the rows deleted and select it at the end of the query.

```
delimiter $$
CREATE TRIGGER t_yourtable_d AFTER DELETE
ON yourtable 
BEGIN
  SET @int = IFNULL(@int,0)+1;
END$$ 
```

when you are done inserting just do a

```
SELECT @int; 
```

And you will get the number of rows that have been replaced. Of course this only makes sense if your query inserts/replaces more that just one row, i.e.

```
REPLACE INTO a(ax,ay,az) 
SELECT bx, by, bz 
FROM b; 
```

# c# - How to remove specific style tag in html using C#

> ID：16148613
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:51.367
> 
> 标签：c#, html, css

Here is my html code:

```
<p><span style="background:lime;Color:Red;">Contrary to popular belief, <b><u>Lorem Ipsum is not simply</u></b> random text. It has roots in a piece of classical Latin literature from <span style="background:blue;">45 BC, making it over 2000 years</span> old. Richard McClintock, </span><b> 
```

From above code, i need to remove the background attributes & value using C# from all the spans. The other values in style tag should remain. Eg:

```
<span style="background:lime;Color:Red;">Contrary to popular belief,.....</span> 
```

should look

```
<span style="Color:Red;">Contrary to popular belief,.....</span> 
```

Pls help...!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:52:42.703

使用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)

```
string html = @"<span style=""background:lime;Color:Red;"">Contrary to popular belief,.....</span>";

var doc = new HtmlAgilityPack.HtmlDocument();
doc.LoadHtml(html);

foreach (var span in doc.DocumentNode.Descendants("span"))
{
    var style = span.Attributes["style"].Value;
    span.Attributes["style"].Value = String.Join(";", style.Split(';').Where(s => !s.ToLower().Trim().StartsWith("background:")));

}

var newHtml = doc.DocumentNode.InnerHtml; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-22T14:32:37.697

尝试这个

```
$('span').css("background", "") 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-22T14:26:37.477

$('#tagId').removeAttr('style');

# python - xlrd安装时的python编码错误

> ID：16148615
> 
> 赞同：0
> 
> 时间：2013-04-22T13:41:56.900
> 
> 标签：python, encoding, installation, xlrd

我正在尝试在 Windows 7 上的 Python3.2 上安装 xlrd 0.9.2 包。当我启动 setup.py 安装时，我收到编码错误：'utf8' codec can't decode...

安装程序停止的模块（licenses.py）有一个编码声明：

`# -*- coding: cp1252 -*-`

但似乎蟒蛇忽略了它。我使用的是 Win cmd，但也检查了 cygwin 并遇到了同样的问题。

几天前，我在读取 cp1252 中的 txt 文件时也遇到了问题，即使我在脚本中设置了这个声明。我正在使用 IDLE 来运行脚本。我现在不确定我的 python 安装是否缺少某些东西或者这是操作系统问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:36:30.323

升级到 Python 3.3 并且库安装正常。不确定这是否是 Python 3.2 或我拥有的实例的问题。

# r - 将数字转换为日期

> ID：16148624
> 
> 赞同：6
> 
> 时间：2013-04-22T13:42:11.280
> 
> 标签：r, type-conversion

我想将这种类型的数值转换为日期，但它不起作用。

`20100727`例如

我试图将数字转换为字符并应用它：

```
as.Date("20100727", "Y%d%m") 
```

但它不起作用。

我能怎么做 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T13:44:03.347

您设置了错误的月份和日期值顺序（在您的代码中是年、日期、月，应该是年、月、日期）。

```
as.Date("20100727", "%Y%m%d")
[1] "2010-07-27" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-22T14:51:14.950

如果是数值`20100727`，`as.Date`则需要先转换为字符串，否则会出现问题

```
as.Date(20100727, "%Y%m%d") 
```

> charToDate(x) 中的错误：字符串不是标准的明确格式

* * *

`anydate`from`anytime`可以在内部做这个转换

```
library(anytime)
date1 <- anydate(20100727)
date1
#[1] "2010-07-27"
str(date1)
#Date[1:1], format: "2010-07-27" 
```

此外，将字符串作为输入

```
anydate("20100727")
#[1] "2010-07-27" 
```

# android - 如何使用异步任务获取位置？安卓

> ID：16148625
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:11.980
> 
> 标签：android, google-maps, android-asynctask

我正在使用异步任务并搜索我的 gps 位置（使用网络提供商）我收到错误`locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);`

```
public class SimpleDirect extends MapActivity {
MapView mapView;

private ProgressDialog pDialog;
private LocationManager locManager;
private LocationListener locListener;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.simple_direct_main);
    mapView = (MapView)findViewById(R.id.mapView);
    initMap();
    new Activity().execute();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (resultCode == 100) {
        Intent intent = getIntent();
        finish();
        startActivity(intent);
    }

}
class Activity extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(SimpleDirect.this);
        pDialog.setMessage("Mohon tunggu...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();
    }
    protected String doInBackground(String... args) {
        initLocationManager();
        return null;
    }

    protected void onPostExecute(String file_url) {
        pDialog.dismiss();
    }
}

  private void initLocationManager(){
        locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        locListener = new LocationListener() {
             public void onLocationChanged(Location newLocation) {
                tampilkanPosisikemap(newLocation);
            }
            public void onProviderDisabled(String arg0) {
            }

            public void onProviderEnabled(String arg0){
            }

            public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            }
        };
        locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);
    }

    protected void tampilkanPosisikemap(Location newLocation) {
        List overlays = mapView.getOverlays();

        if(overlays.size() > 0) {
            for(Iterator iterator = overlays.iterator(); iterator.hasNext();) {
                iterator.next();
                iterator.remove();
            }
        }
                GeoPoint geopoint = new GeoPoint(
                        (int) (newLocation.getLatitude() * 1E6), (int) (newLocation
                                .getLongitude() * 1E6));

                Drawable icon = getResources().getDrawable(R.drawable.marker);
                icon.setBounds(0, 0, icon.getIntrinsicWidth(), icon
                        .getIntrinsicHeight());
                MyItemizedOverlay overlay = new MyItemizedOverlay(icon);
                OverlayItem item = new OverlayItem(geopoint, "My Location", null);
                overlay.addItem(item);
                mapView.getOverlays().add(overlay);
                mapView.getController().animateTo(geopoint);
                mapView.postInvalidate();
    }

private void initMap() {
    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);
    mapView.getController().setZoom(15);
}
@Override
protected boolean isRouteDisplayed(){
    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.simple_direct_main, menu);
    return true;
}
} 
```

我的日志猫：

```
 04-22 20:48:26.763: E/AndroidRuntime(15676): FATAL EXCEPTION: AsyncTask #1
04-22 20:48:26.763: E/AndroidRuntime(15676): java.lang.RuntimeException: An error occured while executing doInBackground()
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.os.AsyncTask$3.done(AsyncTask.java:200)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.lang.Thread.run(Thread.java:1096)
04-22 20:48:26.763: E/AndroidRuntime(15676): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.os.Handler.<init>(Handler.java:121)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.location.LocationManager$ListenerTransport$1.<init>(LocationManager.java:139)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.location.LocationManager$ListenerTransport.<init>(LocationManager.java:137)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.location.LocationManager._requestLocationUpdates(LocationManager.java:708)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.location.LocationManager.requestLocationUpdates(LocationManager.java:630)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at com.example.simpledirection.SimpleDirect.initLocationManager(SimpleDirect.java:128)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at com.example.simpledirection.SimpleDirect.access$2(SimpleDirect.java:107)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at com.example.simpledirection.SimpleDirect$Activity.doInBackground(SimpleDirect.java:93)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at com.example.simpledirection.SimpleDirect$Activity.doInBackground(SimpleDirect.java:1)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-22 20:48:26.763: E/AndroidRuntime(15676):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-22 20:48:26.763: E/AndroidRuntime(15676):    ... 4 more
04-22 20:48:26.813: E/MapActivity(15676): Couldn't get connection factory client
04-22 20:48:27.623: E/WindowManager(15676): Activity com.example.simpledirection.SimpleDirect has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a0aa048 that was originally added here
04-22 20:48:27.623: E/WindowManager(15676): android.view.WindowLeaked: Activity com.example.simpledirection.SimpleDirect has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a0aa048 that was originally added here
04-22 20:48:27.623: E/WindowManager(15676):     at android.view.ViewRoot.<init>(ViewRoot.java:247)
04-22 20:48:27.623: E/WindowManager(15676):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-22 20:48:27.623: E/WindowManager(15676):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-22 20:48:27.623: E/WindowManager(15676):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.Dialog.show(Dialog.java:241)
04-22 20:48:27.623: E/WindowManager(15676):     at com.example.simpledirection.SimpleDirect$Activity.onPreExecute(SimpleDirect.java:88)
04-22 20:48:27.623: E/WindowManager(15676):     at android.os.AsyncTask.execute(AsyncTask.java:391)
04-22 20:48:27.623: E/WindowManager(15676):     at com.example.simpledirection.SimpleDirect.onCreate(SimpleDirect.java:59)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.ActivityThread.access$2300(ActivityThread.java:126)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
04-22 20:48:27.623: E/WindowManager(15676):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-22 20:48:27.623: E/WindowManager(15676):     at android.os.Looper.loop(Looper.java:123)
04-22 20:48:27.623: E/WindowManager(15676):     at android.app.ActivityThread.main(ActivityThread.java:4633)
04-22 20:48:27.623: E/WindowManager(15676):     at java.lang.reflect.Method.invokeNative(Native Method)
04-22 20:48:27.623: E/WindowManager(15676):     at java.lang.reflect.Method.invoke(Method.java:521)
04-22 20:48:27.623: E/WindowManager(15676):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-22 20:48:27.623: E/WindowManager(15676):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-22 20:48:27.623: E/WindowManager(15676):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T20:58:01.193

You should not be calling `locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locListener);` inside `AsyncTask` but rather code inside `public void onLocationChanged(Location newLocation) {` should be called on a separate thread.

`requestLocationUpdates` is asynchornous non-blocking call and doesn't require you to add threads. Your `AsyncTask` ends immediately.

Apart from that I would suggest not to have a code structure like this. Notice that every time a location is found, you will start an AsyncTask. You will end up having many started at the same time and memory leaks will also come if you rotate device or finish this `Activity`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:00:11.590

答案就在那里，David Olsson 已经提到过。你在`mapView.postInvalidate();`做`doInBackground`。doInBackground 不允许 UI 工作。对于 UI 工作，您需要使用 onPre，或者在您的情况下使用 onPost。

例外只是说

> 原因：java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-11T18:41:56.903

此代码适用于我您可以异步获取位置

```
public class MapsActivity extends FragmentActivity implements OnMapReadyCallback {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_maps);
        mw = new Mywidgets(getApplicationContext());
        progressDialog = new ProgressDialog(MapsActivity.this);

        try
        {
            progressDialog.setMessage("Loading Please wait");
            Load_task load_task = new Load_task();
            load_task.execute();

        }catch (Exception e){
            mw.app_log(e.getMessage());
        }

    }

 public class Load_task extends AsyncTask<Void,Void,Void>{

        @Override
        protected Void doInBackground(Void... voids) {
            Bundle bun = getIntent().getExtras();
            final String location = bun.getString("location");
            location_arr = location.split(",");

            Geocoder gc = new Geocoder(getApplicationContext());
            List<Address> addresses = new LinkedList<>();
            int c = 0;
            for (String loc : location_arr) {
                //  mw.app_log(loc);
                List<Address> each_addr = null;
                try {
                    each_addr = gc.getFromLocationName(loc, 1);

                } catch (IOException e) {
                    mw.app_log("cant get location");
                    e.printStackTrace();
                }
                addresses.add(each_addr.get(0));
            }

            lat_long = new ArrayList<LatLng>(addresses.size()); // A list to save the coordinates if they are available
            for (Address a : addresses) {
                if (a.hasLatitude() && a.hasLongitude()) {
                    lat_long.add(new LatLng(a.getLatitude(), a.getLongitude()));
                    mw.app_log("added "+lat_long.toString());
                }else{
                    mw.app_log("not added");
                }
            }

            return null;
        }

        @Override
        protected void onPreExecute() {
            progressDialog.show();
            super.onPreExecute();
        }

        @Override
        protected void onPostExecute(Void aVoid) {
            progressDialog.hide();
            mw.app_log(lat_long.toString());
            set_map();

            super.onPostExecute(aVoid);
        }
    }

public void set_map(){

 // Obtain the SupportMapFragment and get notified when the map is ready to be used.
        SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map);
        mapFragment.getMapAsync(this);

}

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mMap = googleMap;
        if (Geocoder.isPresent()) {

            try {
                progressDialog.hide();

                //addresses.remove(0);

                // Add a marker in Sydney and move the camera
                int n = 0;
                for (LatLng lat : lat_long) {

                    MarkerOptions marker = new MarkerOptions().position(lat).title(location_arr[n++]);

                    marker.icon(BitmapDescriptorFactory.fromResource(R.mipmap.eauction_car_icon_map)).position(lat).snippet(location_arr[n - 1]);
                    mMap.addMarker(marker);
                }

                mMap.moveCamera(CameraUpdateFactory.newLatLng(lat_long.get(2)));
                ;
                mMap.animateCamera(CameraUpdateFactory.newLatLngZoom(lat_long.get(0), 12.0f));
                mMap.setOnMarkerClickListener(new GoogleMap.OnMarkerClickListener() {
                    @Override
                    public boolean onMarkerClick(Marker marker) {
                        Intent prop_intent = new Intent(getApplicationContext(), Property_view.class);
                        int pos = Integer.parseInt(marker.getId().substring(1));
                        //prop_intent.putExtra("location",location[pos]);

                        mw.toast(location_arr[pos]);
                        // startActivity(prop_intent);

                        return false;
                    }
                });
                //mMap.setOnCameraIdleListener(mClusterManager);

            } catch (Exception e) {
                Log.d("json_obj", e.getMessage());
            }
        }

    } 
```

# blackberry-10 - 从 BB10 设备中的 C++ 获取设备详细信息

> ID：16148626
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:11.953
> 
> 标签：blackberry-10

我想知道如何从 C++ 获取基于 BB10 的设备上的设备详细信息（设备名称、IP 地址等详细信息）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:22:54.160

大多数应该在[http://supportforums.blackberry.com](http://supportforums.blackberry.com)和[https://developer.blackberry.com](https://developer.blackberry.com)及其子页面上找到。您的问题很难回答，因为您所需信息的示例来自不同的类型：

设备名称在[`bb::device::HardwareInfo`](https://developer.blackberry.com/cascades/reference/bb__device__hardwareinfo.html)

IP地址是另一种信息，可以在任何网络信息对象中找到，它指的是您选择的网络API（您使用`QtNetwork`还是其他？）。但是您将能够在上面的链接中找到正确信息的途径。
**请注意**，设备上网络信息对象中的 IP 地址将是本地网络地址，在大多数情况下，这与从任何服务器的角度看到的都不同。您必须在服务器上使用“whatismyip”的实现（您可以找到 PHP 和其他实现），您的设备会调用该实现以找出您的外部 IP 地址。

# android - 线性布局内的android tablelayout溢出

> ID：16148627
> 
> 赞同：1
> 
> 时间：2013-04-22T13:42:13.373
> 
> 标签：android, android-layout, android-tablelayout

我正在尝试创建以下视图：

![在此处输入图像描述](https://i.stack.imgur.com/pF44l.png)

我的 XML：

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_margin="14dp"
            android:gravity="center_vertical"
            android:orientation="horizontal" >

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/meals_line_shadow_left" />

            <TableLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:stretchColumns="0" >

                <TableRow
                    android:layout_width="wrap_content"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/textDate"
                        style="@style/MealWizard.BigText"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:gravity="center"
                        android:text="text"
                        android:textSize="16sp" />

                     <ImageButton
                        android:id="@+id/buttonDatePicker"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:paddingRight="7dp"
                        android:paddingLeft="7dp"
                        android:background="@null"
                        android:src="@drawable/general_date_button_selector" />
                </TableRow>

                <TableRow
                    android:layout_width="wrap_content"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:gravity="center_horizontal"
                    android:orientation="horizontal" >

                    <TextView
                        android:id="@+id/textTime"
                        style="@style/MealWizard.BigText"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent"
                        android:gravity="center"
                        android:text="15:34"
                        android:textSize="24sp" />

                    <ImageButton
                        android:id="@+id/buttonTimePicker"
                        android:layout_width="wrap_content"
                        android:layout_height="match_parent"
                        android:paddingRight="7dp"
                        android:paddingLeft="7dp"
                        android:background="@null"
                        android:src="@drawable/general_time_button_selector" />
                </TableRow>
            </TableLayout>

            <ImageView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/meals_line_shadow_right" />
        </LinearLayout> 
```

问题是我看不到正确的 imageView：

![在此处输入图像描述](https://i.stack.imgur.com/vYmQr.png)

我需要在不使用绝对大小的情况下解决这个问题（它适用于绝对值）。

对于修复或替代方案的任何建议，我都会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:01:04.440

解决方案很简单：

```
<TableLayout
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:stretchColumns="0" > 
```

# c# - TimerCallback 不返回值 C#

> ID：16148629
> 
> 赞同：1
> 
> 时间：2013-04-22T13:42:19.620
> 
> 标签：c#, multithreading, timer, callback, return

我正在使用`System.Threading.Timer`创建一个计时器，该计时器将字符串打印到串行端口，然后每秒从另一个串行端口读取。我试图通过向我的`TimerCallback`函数发送参数来做到这一点。下面是我初始化计时器的代码和回调函数的代码。

初始化：

```
TimerCallback tcb = Timer_func(buff_out, send_port, recv_port);
AutoResetEvent autoEvent = new AutoResetEvent(false);
Timer aTimer = new Timer(tcb,autoEvent,1000,1000); 
```

回调函数：

```
public static TimerCallback Timer_func(string buff_out, SerialPort send_port, SerialPort recv_port)
{
    string buff_in;
    send_port.WriteLine(buff_out);
    buff_in = recv_port.ReadLine();
    Console.WriteLine(buff_in);
} 
```

初始化发生在 Main() 函数中，并且两个函数都在同一个类中。

当我按原样编译代码时，我收到错误 CS0161：“并非所有代码路径都返回值”。为了解决这个问题，我已经添加`return 1;`到该函数的末尾，但随后收到错误 CS0029：“无法将类型 'int' 显式转换为 'System.Threading.Timer'。

我做错了什么，我该如何解决。（C# 新手）。先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T13:48:14.617

你误解了代表。

[`TimerCallback`](http://msdn.microsoft.com/en-us/library/system.threading.timercallback.aspx)是*委托类型*——一种可以保存函数的类型。
`TimerCallback`只能持有带有签名的函数

```
void MethodName(Object state) 
```

当你写

```
public static TimerCallback Timer_func(...) { ... } 
```

您刚刚声明了一个返回*委托*`TimerCallback`的函数。
因此，您的函数必须返回与 TimerCallback 匹配的函数。

您可以使用匿名委托来做到这一点：

```
return delegate (object state) {
    string buff_in;
    send_port.WriteLine(buff_out);
    buff_in = recv_port.ReadLine();
    Console.WriteLine(buff_in);
}; 
```

# elasticsearch - 使用 geopoint 的 Elasticsearch 动态映射

> ID：16148633
> 
> 赞同：2
> 
> 时间：2013-04-22T13:42:21.480
> 
> 标签：elasticsearch

我们使用 Elasticsearch 来索引无模式数据。问题是我们要索引的大多数条目都包含诸如`"longitude"`、或之类`"latitude"`的字段。`"lat"``"long"`

索引该数据的最佳方法是什么，以便字段类型允许使用地理距离过滤器进行搜索？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-22T15:08:20.437

我知道你发布这个已经有一段时间了，但如果有人像我一样偶然发现它，这里有一些方法可以做到。

在我们的例子中，我们需要一个动态半径，所以这是我们拥有的映射：

```
"mappings": {
    "mygeopoints": {
        "properties": {
            "geopoint": {
                "type": "geo_point",
                "lat_lon" : true
            },
            "radius": {
                "type": "long"
            }
        }
    }
} 
```

我们的文档使用如下所示的 SQL 查询进行索引：

```
SELECT label, (lat || ',' || lon) as geopoint, radius FROM points; 
```

我们将地理点作为包含由逗号分隔的纬度和经度的字符串发送。

现在要搜索可以使用[geo_distance 过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/geo-distance-filter/)的点：

```
"filter" : {
    "geo_distance" : {
        "geopoint" : [ 5.7, 43.5 ],
        "distance" : "15km"
    }
} 
```

[不过，在我们这边，我们需要一个动态范围，所以除了使用脚本过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/script-filter/)之外，我们没有找到任何其他解决方案。

```
"filter" : {
    "script" : {
        "script" : "!doc['geopoint'].empty && doc['geopoint'].distanceInKm(43.5,5.7) <= doc['radius'].value"
    }
} 
```

# java - 允许我的 Android 视图嵌入到其他应用中

> ID：16148637
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:27.620
> 
> 标签：java, android

在基于 Web 的开发和基于 Windows 的开发中，可以开发其他应用程序可以无缝嵌入到自己的 UI 中的小程序或组件。我有一个组件（派生自`View`），它执行一些我希望其他应用程序能够嵌入到他们自己的视图或活动中的实时动画。是否可以允许其他应用程序将此组件嵌入其中，这样当我的应用程序更新时，其他应用程序将自动在其嵌入组件中显示更新的行为？

如果这是可能的，我很难找出用于查找如何执行此操作的搜索词。一个应用程序如何嵌入另一个应用程序的视图，如果没有安装另一个应用程序会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:50:01.840

您不能直接允许以 iframe 的方式嵌入。

但是，您可以使您的 View 成为其他开发人员可以包含在他们的应用程序中的库项目，就像他们包含其他公司的 SDK 一样。为了允许自动更新，除了他们的应用程序之外，您还需要安装您的应用程序，并且在制作库项目时，您必须制作一个 BroadcastReceiver 可以对您从应用程序发送的广播做出反应，以更新其他应用程序中的视图。

然后您的 SDK 可以接收这些广播，并相应地更新您的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:47:06.033

您可以将当前项目作为库项目。您将 Library 项目添加到要使用自定义的项目中`View`。您的自定义`View`将可在该项目中访问。

您可以通过转到 Project Properties > Android 并选中相应的复选框来将项目标记为库项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-15T15:45:32.637

您可以为您的应用程序创建一个应用程序小部件，并且该小部件可以被任何充当小部件主机的应用程序使用 - 很少有人这样做 - 但至少您可以在主屏幕上拥有它。我想知道为什么不做更多的事情——这将是许多应用程序的杀手级功能。

[https://developer.android.com/guide/topics/appwidgets/index.html](https://developer.android.com/guide/topics/appwidgets/index.html)

提供更多信息。

# php - 登录网站和其他网站部分

> ID：16148640
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:33.400
> 
> 标签：php, html

我使用 php 和 html 进行网站登录。代码：

```
<?php

session_start();
$user="root";
$host="localhost";
$password="";
$database="mb_dusnionys_login";
$usertable="nariai";

mysql_connect ($host, $user,$password) or die ("negalima");

mysql_select_db ($database)or die (mysql_error());

$myusername=$_POST['username'];
$mypassword=$_POST['password'];

$sql="SELECT * FROM {$usertable} WHERE username='{$myusername}' AND password='{$mypassword}'";

$result = mysql_query($sql);
$count=mysql_num_rows($result);

if($count==1){

$_SESSION ["username"]=$myusername;
$_SESSION ["password"]=$mypassword;
$_SESSION ["userrecord"]=mysql_fetch_assoc($result);

header ("location: /nariu_turinys/index.html");
}
else {
echo "Netinkamas vartotojo vardas arba slaptažodis. Grįžkite atgal ir bandykite iš naujo";
} 
```

我的网站的概念：有一个带有按钮和登录表单的主索引文件。按钮重定向而不登录到其他索引文件，登录表单重定向到第三个索引文件，需要用户名和密码。在这个目录中是我网站的主要部分。当我使用登录表单登录网站时一切正常，但是如果当我登录并将 url 复制到页面的某个部分并粘贴到其他浏览器或其他选项卡中时，我无需登录即可到达该部分。问题是如何使这些部件在没有登录的情况下不可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:46:04.437

您需要在客户端上存储某种形式的身份验证令牌（您已经使用[会话](http://php.net/manual/en/book.session.php)cookie 执行此操作），然后检查访问每个页面的用户是否经过身份验证并有权查看该页面（并使用登录名给出 403 响应表格或适当的错误消息（如果不是）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:46:11.953

您应该向每个内部页面添加一个功能，以检查您在登录时存储的会话数据。如果此数据与存储的数据不匹配，则将用户踢回登录页面并显示错误消息。

-编辑-

一个示例函数：

```
function isLoggedIn()
{
    if(isset($_SESSION['username']))
        $sql="SELECT * FROM {$usertable} WHERE username='{$_SESSION['myusername']}' AND password='{$_SESSION['password']}'";
    $result = mysql_query($sql);
    if(!$result)
    {
        logout();
    }
} else {
    logout();
}} 
```

# database-design - MVC4 应用程序将多个项目从数据库添加到模型的最佳方法

> ID：16148642
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:33.513
> 
> 标签：database-design, asp.net-mvc-4, model

我正在为一个班级做一个项目。我正在创建一个膳食计划应用程序，该应用程序允许您将产品添加到数据库中，然后选择要包含在膳食中的产品，并且可以将膳食添加到膳食计划中，您可以按每周计划查看该膳食计划。

我已经设置好产品，可以将它们添加到数据库中（这是最简单的部分），所以我的问题是将产品添加到膳食中的最佳方法是什么。

膳食模型：

```
public class Meal
{
    public int MealId { get; set; }

    public String Name { get; set; }

    public virtual Product Products { get; set; }

    [Display(Name = "Creator")]
    public int UserId { get; set; }
} 
```

产品型号：

```
public class Product
{
    public int ProductId { get; set; }
    public int UserId { get; set; }
    public int UnitId { get; set; }
    public String Name { get; set; }
    public Decimal Quantity { get; set; }
    public Boolean Included { get; set; }

    public virtual Unit unit { get; set; }
} 
```

我考虑将 bool 添加到产品模型中以在选择它时发出信号，但不确定如何将其包含在许多不同的膳食中。我不想为每餐创建不同的产品，因为这似乎违背了拥有一个数据库来保存产品的目的。

不太确定如何进行。我还假设无论我如何解决这个问题，我都可以将同样的原则应用于膳食计划场景。有什么建议可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:59:43.967

据我了解，您似乎正在寻找两个表之间的多对多关系。我不是数据库工程师，但我认为您可能需要一个中间表来充当餐食和产品表之间的链接。就像是：

```
public class ProductInMeals
{
    public int ProductId { get; set; }
    public int MealId { get; set; }

    /* Any other fields you want to associate with this relationship */
} 
```

所以你最终得到一个带有 2 个外键的表。可能值得添加主键和有关关系的更多详细信息，但这完全取决于您。

# php - 删除 do-while 中的最后一个元素

> ID：16148644
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:42:36.933
> 
> 标签：php

如何删除`do-while`生成表中的最后一个元素？

在我的情况下，最后一个存储`tr/td`在哪里`div.dividing_line`。

编码：

```
$ArrayLength = 6; 
$i = 1;
do {
    echo '
    <tr>
        <td valign="middle">Data_Position</td>
        <td valign="middle">Data_Item</td>
        <td valign="middle">Data_Pieces</td>
        <td valign="middle">Data_Price</td>
    </tr>
    <tr>
        <td colspan="4"><div class="dividing_line"></div></td>
    </tr>
    ';
    ++$i;
} while ($i < $ArrayLength+1); 
```

例如：如果我有一个包含 6 个项目的数组，通常`do-while`会完成这项工作，所以最后会有 6 个`tr`数据和 6`tr`个`dividing_line`.

我需要的是 6`tr`的数据和 5`tr`的`dividing_line`. 那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:44:46.900

```
$ArrayLength = 6; 
$i = 1;
do {
    echo '
    <tr>
        <td valign="middle">Data_Position</td>
        <td valign="middle">Data_Item</td>
        <td valign="middle">Data_Pieces</td>
        <td valign="middle">Data_Price</td>
    </tr>';

    if($i < $ArrayLength)
    {
        echo '
         <tr>
            <td colspan="4"><div class="dividing_line"></div></td>
        </tr>';
    }
    ++$i;
} while ($i < $ArrayLength+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:45:07.853

Try this-

```
$ArrayLength = 6; 
$i = 1;
do {
    echo '
    <tr>
        <td valign="middle">Data_Position</td>
        <td valign="middle">Data_Item</td>
        <td valign="middle">Data_Pieces</td>
        <td valign="middle">Data_Price</td>
    </tr>';
   if($i != $ArrayLength) {
    echo '<tr>
        <td colspan="4"><div class="dividing_line"></div></td>
    </tr>
    ';
}
    ++$i;
} while ($i < $ArrayLength+1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:45:42.653

使用额外的 if 语句来检查您是否在最后一个元素：

```
if (%i < $ArrayLength) { echo '<tr>...dividing_line</tr>'; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:53:52.320

我认为你的方法只需要一个额外的步骤。

它可能是这样的：

```
$data = null;

foreach ($rows as $row) {
    $data[] = "<tr><td valign=\"middle\">Data_Position</td><td valign=\"middle\">Data_Item</td><td valign=\"middle\">Data_Pieces</td><td valign=\"middle\">Data_Price</td></tr>";
}

print implode("<tr><td colspan=\"4\"><div class=\"dividing_line\"></div></td></tr>", $data); 
```

这样，您可以在没有更多逻辑的情况下完成您想要的。当然，它可以更改或重新设计，但我认为这种方式将为您提供一个简单而优雅的解决您的问题的方法。

希望它有所帮助：P

# android - 表单验证 Android

> ID：16148645
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:37.217
> 
> 标签：android, regex, validation

我想知道验证表单的最佳方法是什么？

我确实尝试了以下方法：

```
EditText fname = (EditText)findViewById(R.id.first_name);
String fname_text = fname.getText().toString; 
if(fname_text.equalsIgnoreCase(""))
        {
            fname.setError("Field is required");
        } 
```

并且：

```
fname.addTextChangedListener(new TextWatcher() 
        {           
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count){

            }           
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after){

            }           
            @Override
            public void afterTextChanged(Editable s) 
            {

                Pattern mPattern = Pattern.compile("[A-Za-z]{2,20}$");

                Matcher matcher = mPattern.matcher(s.toString());               
                if(!matcher.matches())       // on Success 
                { 
                    fname.setError("Please make sure you input a valid first name");

                }
              }
        }); 
```

我感到困惑的是......每当页面第一次加载时，都会显示错误消息，但是当我进入 EditText 并输入一些内容时，如果我删除内容，错误消息会不坚持。那么我如何保持这个验证持续存在？？？因为程序正在形成的方式，看起来它不会很好地验证任何东西。你们知道一些关于 android 中正则表达式的好链接以及完整的例子，请推荐。

而且，我将如何将 Pattern 和 Matcher 方法放在 onTextChanged 或 beforeTextChanged 中影响输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:00:14.623

而不是在之后立即运行检查

```
EditText fname = (EditText)findViewById(R.id.first_name);
String fname_text = fname.getText().toString; 
```

使用[OnFocusChangeListener并在](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html)[调用 onFocusChange()](http://developer.android.com/reference/android/view/View.OnFocusChangeListener.html#onFocusChange%28android.view.View,%20boolean%29)方法时运行它。理想情况下，您只会在视图失去焦点时运行它。就像是：

```
EditText fname = (EditText)findViewById(R.id.first_name);
String fname_text = fname.getText().toString; 
fname.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View arg0, boolean arg1) {
        if(!(v.isFocused())) {
            //Run your validation
        }
    }
}); 
```

这样，您只在用户完成输入时运行验证，而不是每次用户更改某些内容时运行。

# eclipse - 为什么我在 eclipse helios bpel 流程管理器中看不到转换活动

> ID：16148648
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:41.297
> 
> 标签：eclipse, bpel

我正在使用 eciipse helios。我想像[本](http://docs.oracle.com/cd/E12839_01/integration.1111/e10224/bp_xslt_mpr.htm#CFACBIEC)教程一样创建一个 bpel 转换。但我在调色板的“操作”部分或“控制 2”部分中看不到转换活动。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:38:55.657

您链接的教程来自 Oracle，他们提供的 IDE 是 JDeveloper。Eclipse 不是 JDeveloper，因此您没有相同的调色板。如果您想复制本教程，则必须[下载 JDeveloper 。](http://www.oracle.com/technetwork/developer-tools/jdev/downloads/index.html)

我假设（来自链接）您想要编写 XSL 转换。您也可以使用 Eclipse 执行此操作。Eclipse 的 Java EE 版本中包含[的 Web 工具平台支持编写 XSL 转换。](http://www.eclipse.org/webtools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T07:36:25.460

这是因为 BPEL 2.0 规范没有定义这样的活动。它是 Oracle 定义的专有扩展，因此仅在 Oracle 产品中可用。开源 Eclipse BPEL 项目旨在仅提供对 BPEL 标准的支持。

# image - 读取部分 RAW 文件或 TIFF 文件而不加载完整文件

> ID：16148650
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:44.283
> 
> 标签：image, processing, tiff

高级社区，感谢您提供我已经找到的答案！

我想知道是否有一种方法可以直接从硬盘驱动器以数组形式加载 TIFF 格式或理想情况下为 RAW 格式的图片，而无需将完整文件加载到 RAM 中。

我需要处理大量文件（大约 2500 个），但每个文件只需要几个像素。

我是编程新手，基本上使用处理，我编写了一个处理小文件的程序，但我需要构建高分辨率图片才能以大格式打印它们。所以我想缩短处理时间。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:11:49.047

2500左右什么？像素？兆？如果您需要处理不可能的大文件，您可能必须首先编写一个 java 程序，以便有选择地从 TIFF 文件中加载像素（实际上是自己编写一个 TIFF 解码器），然后将其转换为处理库，以便您可以在您的处理程序中使用它。

# google-chrome - Nexus 7 响应式 CSS - 没有明显原因的奇怪 y 轴移动

> ID：16148651
> 
> 赞同：0
> 
> 时间：2013-04-22T13:42:49.350
> 
> 标签：google-chrome, width, viewport

我想知道是否还有其他人在这个问题上有经验。我正在开发一个响应式构建，除了我的 Nexus 4 和 Nexus 7 之外，它在所有设备上都可以正常工作。这两种浏览器都使用少量的水平滚动来呈现页面。我知道没有什么是“重叠”的主体或任何父容器，因为我已经将代码剥离回只有两个 div 并且它仍然呈现错误。它快把我逼疯了！

这是简单的代码，但是您需要查看才能在真实页面上查看此代码才能看到我正在谈论的效果。

元视口标签；

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> 
```

CSS；

```
body, html, div { margin:0; padding:0; }
.outer { background:grey; width:100%; }
.inner { background:silver; height:10em; max-width:10em; margin:0 auto; } 
```

和 HTML；

```
<div class="outer">
<div class="inner">
    <p>Test Content</p>
</div>
</div> 
```

这很简单，所以我不知道发生了什么！帮助！

# postgresql - Postgres 从包含 float (IEEE 754) 的 bytea 转换为 real (float4)

> ID：16148655
> 
> 赞同：1
> 
> 时间：2013-04-22T13:42:58.747
> 
> 标签：postgresql

以下 SQL SELECT 查询返回一个整数：

```
SELECT (((get_byte(dalsk.data, 0)::bit(8)) || 
    (get_byte(dalsk.data, 1)::bit(8)) ||
    (get_byte(dalsk.data, 2)::bit(8)) ||
    get_byte(dalsk.data, 3)::bit(8)) :: bit(32)) :: integer --AS rezult_float
FROM (SELECT substring(data from 2 for 5) AS data FROM raw_data WHERE 
    raw_data_id = 33) 
AS dalsk; 
```

每当我尝试将结果从整数转换为实数时，都会收到以下错误：

> 无法将类型位转换为实数。

有没有办法将值转换为浮点数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:04:05.373

IEEE754 不包括字节序，因此不足以将二进制转换为浮点数。如果你想转换它，你必须创建一个函数或一个强制转换[运算符](http://www.postgresql.org/docs/current/static/sql-createcast.html)。

# java - Format a number string

> ID：16148660
> 
> 赞同：0
> 
> 时间：2013-04-22T13:43:11.503
> 
> 标签：java, string, number-formatting

I have a number `String` like `"1234567890"`.

I need to format this `String` into `"1234 5678 90"`. (The blank spaces are SPACE character) Could somebody tell me on how to do this in java?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:47:30.733

假设您的字符串长度相同：

```
String s1 = "1234567890";
String s2 = s1.substring(0, 3) + " " + s1.substring(4, 7) + " " + s1.substring(8, 9); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:14:30.000

您可以`StringBuilder`用于性能：

```
StringBuilder builder = new StringBuilder("1234567890");
builder.insert(4, ' ').insert(9, ' ');
String formattedString = builder.toString(); 
```

给你

```
1234 5678 90 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:46:59.607

```
 StringBuilder sb= new StringBuilder("1234567890");
   sb.insert(4, ' ').insert(9, ' ');
   String output= sb.toString(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:59:04.080

基于正则表达式的版本

```
 String s = "1234567890";
     s = s.replaceAll("(\\d+)(\\d{2})", "$1 $2");
     while(s.matches("\\d+\\d{4} \\d+")) {
         s = s.replaceAll("(\\d+)(\\d{4} \\d+)", "$1 $2");
     }
     System.out.println(s); 
```

输出

1234 5678 90

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-22T14:07:38.103

尝试使用`java.text.MessageFormat`.

```
public static void main(String[] args) {
    String phoneRawString = "1234567890";

    java.text.MessageFormat phoneMsgFmt = new java.text.MessageFormat(
            "{0} {1} {2}");
    // suposing a grouping of 4-4-2
    String[] phoneNumArr = { phoneRawString.substring(0, 4),
            phoneRawString.substring(4, 8), phoneRawString.substring(8) };

    System.out.println(phoneMsgFmt.format(phoneNumArr));
} 
```

输出：

```
1234 5678 90 
```

使用正则表达式的另一种方法：

```
long phoneNum = 1234567890L;
String result = String.valueOf(phoneNum).replaceFirst("(\\d{4})(\\d{4})(\\d+)", "$1 $2 $3");
System.out.println(result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-22T14:32:31.680

```
 String input = "1234567890";
    Formatter f = new Formatter(new StringBuilder(), Locale.UK);
    String res = f.format("%s%5s%3s", input.substring(0, 4), input.substring(4, 8), input.substring(8, 10)).toString();
    System.out.println(res); 
```

# php - 为什么这个登录表单不起作用？

> ID：16148667
> 
> 赞同：1
> 
> 时间：2013-04-22T13:43:37.840
> 
> 标签：php, mysql, oop, login

我有一个类来登录用户，但是当我使用表单和错误的凭据对其进行测试时，我仍然获得了“成功”。有人能指出我正确的方向吗？

```
include('User.datatype.php');

$usher = new Authenticator;
$usher->checkCreds();
$usher->ensureHasAccess();

Class Authenticator {
    protected $user;
    protected function getCreds() {
        if (!isset($_POST['login']))
            throw new Exception("There was an error processing your request", 1);
        else if ($_POST['username'] == '' || $_POST['password'] == '')
            throw new Exception("You must enter a username and password", 1);
        $username = filter_input(INPUT_POST, 'username', FILTER_SANITIZE_STRING);
        $password = filter_input(INPUT_POST, 'password', FILTER_SANITIZE_STRING);
        $this->user = new User;
        $this->user->username = $username;
        $this->user->password = $password;
    }

    public function checkCreds() {
        $this->getCreds();
        if (empty($this->user->username) || empty($this->user->password))
            throw new Exception("Error Processing Request", 1);
        include('dbconnect.php');   // Normally I'd store the db connect script outside of webroot
        $pdo = new PDO("mysql:host=$db_host;dbname=$db_name;", $db_user, $db_password);
        $stmt = $pdo->prepare('SELECT * FROM Users WHERE username = :uname AND password = :pword');
        $stmt->bindParam(':uname', $this->user->username);
        $stmt->bindParam(':pword', $this->user->password);
        $stmt->execute();
        $status = $stmt->fetch();
        $this->user->status = $status;
        print $status;
        return $this->user->status;
    }

    protected function createSessionID() {
        $seshID = mt_rand(99999, 1000000);
        return $seshID;
    }

    protected function startSession() {
        if (empty($this->user->status))
            throw new Exception("There was a problem connecting to the database", 1);
        session_start();
        $_SESSION['username'] = $this->user->username;
        $_SESSION['id'] = createSessionID();
        $secret = $_SESSION['id'];
        header('Location:index.php?' . $secret);
        return true;
    }

    protected function hasAccess() {
        $this->startSession();
        if (!startSession())
            throw new Exception("You do not have access to this page.", 1);
        return true;
    }

    public function ensureHasAccess() {
        if(!$this->hasAccess())
            throw new Exception("You are not logged in.");
        print 'Welcome, ' . $this->user->username;
    }
} 
```

HTML 表单：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">
    <head>
    </head>
    <body>
        <form action="authenticator.php" method="post">
            <p>username: <input type="text" name="username" /></p>
            <p>password: <input type="password" name="password" /></p>
            <p><input type="submit" name="login" /></p>
        </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:04:13.813

除了我已经指出页面中间的“session_start()”可能是一个逻辑错误之外，如果你说它是固定的，我对这一行有一种不好的感觉。

```
 $stmt = $pdo->prepare('SELECT * FROM Users WHERE username = $this->user->username AND password = $this->user->password'); 
```

单引号可能会阻止 $this->user 中的变量更改为实际值。那不可能有错误，但是我对MySQLi比较熟悉，还没有使用过PDO。但我建议您尝试将其更改为：

```
$stmt = $pdo->prepare('SELECT * FROM Users WHERE username = '.$this->user->username.' AND password = '.$this->user->password); 
```

只是一个可能的提示。虽然不知道是不是那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:56:47.110

你有没有

```
<?php session_start(); ?> 
```

在 index.php 页面的顶部？

和 var_dump($_SESSION); 看看它拥有什么信息

据我所知，您必须拥有 session_start(); 在任何页面上，您是否希望您的会话信息存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:57:12.243

你的逻辑有错误。 `if (!session_start())`启动会话，如果无法启动，则抛出异常。您需要以不同的方式检查用户是否被授权，例如使用`$this->user->status = $status;`来确定用户是否被授权。

# jdbc - Trying to Connect Vertica DB with Weblogic 10.3

> ID：16148669
> 
> 赞同：0
> 
> 时间：2013-04-22T13:43:41.557
> 
> 标签：jdbc, database-connection, weblogic-10.x, vertica

Working on Linux Redhat
I have two below jars
1>vertica-jdbc-5.1.1.jar
2>vertica-jdk5-6.1.1-0.jar

Steps that i followed:
1 copied the jars to `$WL_HOME/server/lib`
2 I set the path of the jars to Linux Path like below export `WL_HOME=/usr/local/WL_Server10.3/sever`
`PATH= ${WL_HOME}/lib:${PATH}`

3 I modified `${WL_HOME}/common/bin/commEnv.sh`

Added my jars entry like below

```
# set up WebLogic Server's class path
WEBLOGIC_CLASSPATH="${JAVA_HOME}/lib/tools.
jar${CLASSPATHSEP}${WL_HOME}/server/lib/weblogic_sp.
jar${CLASSPATHSEP}${WL_HOME}/server/lib/weblogic.
jar${CLASSPATHSEP}${FEATURES_DIR}/weblogic.server.modules_13.1.1.0.
jar${CLASSPATHSEP}${WL_HOME}/server/lib/webservices.
jar${CLASSPATHSEP}${ANT_HOME}/lib/ant-all.
jar${CLASSPATHSEP}${ANT_CONTRIB}/lib/ant-contrib.jar
${CLASSPATHSEP}${WL_HOME}/server/lib/vertica-jdbc-5.1.1.jar
${CLASSPATHSEP}${WL_HOME}/server/lib/vertica-jdk5-6.1.1-0.jar"
export WEBLOGIC_CLASSPATH 
```

//I also tried the below steps googling,................. Optional Step
4> Modified $`{WL_HOME}/server/lib/jdbcdrivers.xml`

Added required parameter
i didnt get what to fill in the `URLClassPathName` value so i ignored it.

5>I restarted the Weblogic server and logged into the admin console
6> I added new JDBC Data Source

While Testing the Connection i am getting below Error:

```
Message icon - Error An error occurred during activation of changes, please see the log for details.
Message icon - Error weblogic.application.ModuleException:
Message icon - Error weblogic.common.ResourceException: Could not create pool connection. The DBMS driver exception was: [Vertica][JDBC](10100) Connection Refused: (11640) Required Connection Key(s): user; (11480) Optional Connection Key(s): autocommit, connsettings, directbatchinsert, logintimeout, loglevel, lognamespace, logpath, readonly, resultbuffersize, sessionlabel, ssl, threepartnaming, transactionisolation 
```

**It would be great if someone can help me with the steps to connect Vertica Database to the Weblogic 10.3**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:37:39.377

您提供了哪些连接设置：

```
"6> Added new JDBC Data Source
7>Followed the steps" 
```

该错误表明您缺少指定用户：

```
 [Vertica][JDBC](10100) Connection Refused:
  (11640) Required Connection Key(s): user;
  (11480) Optional Connection Key(s): autocommit, connsettings, directbatchinsert, logintimeout, loglevel, lognamespace, logpath, readonly, resultbuffersize, sessionlabel, ssl, threepartnaming, transactionisolation 
```

# struts2 - struts 2 Undefined attribute name "var"

> ID：16148672
> 
> 赞同：0
> 
> 时间：2013-04-22T13:43:48.920
> 
> 标签：struts2

I am trying to iterate over two 2D arrays `Org_Positions_IdTitle` and `Org_Apps` and print out a field but I keep getting the `Attribute var invalid for tag iterator according to TLD` also in my jsp page the var1 and var2 are underlined and it says on the left Undefined attribute name "var".
I would be so thankful if you can help me with that.

```
 <s:iterator value="Org_Positions_IdTitle" var="arr1" >
        <s:iterator value="Org_Apps" var="arr2" >
            <s:if test="#arr1[0] == #arr2[1] ">
                <s:property value="#arr1[1]" />     
            </s:if>
        </s:iterator>
    </s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:56:02.953

您使用哪个版本的 Struts 2？

如果您的版本低于 2.1.x，您应该使用`id`属性，根据文档：[http ://struts.apache.org/release/2.1.x/docs/iterator.html](http://struts.apache.org/release/2.1.x/docs/iterator.html)

# r - Assign set of values to a column

> ID：16148673
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:43:51.080
> 
> 标签：r, variable-assignment

I have a column of 5 digit code values (from 1-3) values in R with 243 possible combinations (5 digits, each digit can be 1, 2, or 3):

Example:

```
13212

13211 
```

However, each 5 digit code represents a coresponding value.

For instance:

```
13212 = 0.5120

13211 = 0.1232 
```

How do I imput the unique corresponding value for each of these 243 numeric codes?

How do I tell R to convert my column of numeric codes into their coresponding values?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:12:48.737

可能不是最好的解决方案，但如果你想用 value2 替换向量的每个 value1：

```
relations=data.frame(value1=c(13212,13211),value2=c(0.5120,0.1232))
values=c(13212,13211)
for (i in 1:length(values)){
   values[i]=relations$value2[relations$value1==values[i]]
} 
```

# javascript - 使用 Javascript 创建表时的 rowIndex

> ID：16148676
> 
> 赞同：0
> 
> 时间：2013-04-22T13:43:56.160
> 
> 标签：javascript, html, dom, appendchild

我有以下函数将行和单元格附加到空`table`：

```
 function createTable(size) {
            var table = document.getElementById("gameTable");
            for (var i=0; i<size; i++) {
                var tr = document.createElement("tr");
                for (var j=0; j<size; j++) {
                    var td = document.createElement("td");
                    tr.appendChild(td);
                }
                table.appendChild(tr);
                tr.rowIndex = i;
            }

        } 
```

到目前为止，一切都很好。

我的问题是，后来，当我试图到达表格内的特定单元格时：

```
var x = target.parentNode.rowIndex;
var y = target.cellIndex; 

table.rows[x].cells[y].innerHTML = 'blah' 
```

`target``TD`是被点击的具体内容。

索引`rows[x]`总是. `-1`每次我尝试上面的行时，我都会收到一个错误：“无法读取未定义的属性‘单元格’”
我什至尝试手动将每个 Row 的 rowIndex 设置为它应该是的（在函数内部），但无济于事。

cellIndex 出来的很好，但是 rowIndex 是 -1 并且每一个新创建的表行。

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:17:30.210

这可以通过将`<tr>`元素附加到`<tbody>`.

```
 function createTable(size) {
            var table = document.getElementById("gameTable");
            var tb = document.createElement("tbody");
            for (var i=0; i<size; i++) {
                var tr = document.createElement("tr");
                for (var j=0; j<size; j++) {
                    var td = document.createElement("td");
                    tr.appendChild(td);
                }
                tb.appendChild(tr);
            }
            table.appendChild(tb);
        } 
```

# php - Symfony 2 UniqueEntity repositoryMethod 在更新实体时失败

> ID：16148678
> 
> 赞同：1
> 
> 时间：2013-04-22T13:43:58.850
> 
> 标签：php, symfony, doctrine-orm, unique-constraint

我正在编写一些简单的脚本，但无法解决这个问题。所以就在这里。

```
/**
 * Booking
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Tons\BookingBundle\Entity\BookingRepository")
 * @UniqueEntity(fields={"room", "since", "till"}, repositoryMethod="getInterferingRoomBookings")
 * @Assert\Callback(methods={"isSinceLessThanTill"}, groups={"search","default"})
 */
class Booking 
```

和存储库方法

```
/**
     * Get room state for a certain time period
     *
     * @param array $criteria
     * @return array
     */
    public function getInterferingRoomBookings(array $criteria)
    {
        /** @var $room Room */
        $room = $criteria['room'];
        $builder = $this->getQueryForRoomsBooked($criteria);
        $builder->andWhere("ira.room = :room")->setParameter("room", $room);
        return $builder->getQuery()->getArrayResult();
    } 
```

问题是这适用于它应该的创建方法，但是在更新现有实体时 - 它违反了这个约束。

我尝试添加 Id 约束，但是在创建实体时，id 为空，因此存储库方法甚至没有启动。我也尝试删除实体然后重新创建它。喜欢

```
$em->remove($entity);
$em->flush();
//-----------
$em->persist($entity);
$em->flush(); 
```

但这也行不通。

创建动作

```
 /**
     * Creates a new Booking entity.
     *
     * @Route("/create", name="booking_create")
     * @Method("POST")
     * @Template("TonsBookingBundle:Booking:new.html.twig")
     */
    public function createAction(Request $request)
    {
        $entity = new Booking();
        $form = $this->createForm(new BookingType(), $entity);
        $form->bind($request);
        if ($form->isValid())
        {
            $em = $this->getDoctrine()->getManager();
            $room = $entity->getRoom();
            if($room->getLocked() && $room->getLockedBy()->getId() === $this->getUser()->getId())
            {
                $entity->setCreatedAt(new \DateTime());
                $entity->setUpdatedAt(new \DateTime());
                $entity->setManager($this->getUser());

                $em->persist($entity);
                $room->setLocked(false);
                $room->setLockedBy(null);
                $room->setLockedAt(null);
                $em->persist($room);
                $em->flush();
                return $this->redirect($this->generateUrl('booking_show', array('id' => $entity->getId())));
            }
            else
            {
                $form->addError(new FormError("Номер в текущий момент не заблокирован или заблокирован другим менеджером"));
                return array(
                    'entity' => $entity,
                    'form' => $form->createView(),
                );
            }
        }

        return array(
            'entity' => $entity,
            'form' => $form->createView(),
        );
    } 
```

更新操作

```
 /**
     * Edits an existing Booking entity.
     *
     * @Route("/edit/{id}/save", name="booking_update")
     * @Method("PUT")
     * @Template("TonsBookingBundle:Booking:edit.html.twig")
     */
    public function updateAction(Request $request, $id)
    {
        /** @var $em EntityManager */
        $em = $this->getDoctrine()->getManager();

        $entity = $em->getRepository('TonsBookingBundle:Booking')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find Booking entity.');
        }

        $editForm = $this->createForm(new BookingType(), $entity);
        $editForm->bind($request);

        if ($editForm->isValid()) {
            $em->persist($entity);
            $em->flush();

            return $this->redirect($this->generateUrl('booking_edit', array('id' => $id)));
        }

        return array(
            'entity' => $entity,
            'form' => $editForm->createView(),
        );
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T08:45:17.567

我懂了！我将注释更改为此

```
/**
 * Booking
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="Tons\BookingBundle\Entity\BookingRepository")
 * @UniqueEntity(fields={"id","room", "since", "till"}, repositoryMethod="getInterferingRoomBookings")
 * @UniqueEntity(fields={"room", "since", "till"}, repositoryMethod="getInterferingRoomBookings",groups={"create"})
 * @Assert\Callback(methods={"isSinceLessThanTill"}, groups={"search","default"})
 */
class Booking 
```

将 BookingType 复制到 BookingTypeCreate 并添加

```
 public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'Tons\BookingBundle\Entity\Booking',
            'validation_groups' => array('create'),
        ));
    } 
```

形成默认值。所以现在在将实体传递给验证方法时参数是不同的。我认为这仍然是一种解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T12:56:55.063

将附加标识符（可能是 a `token`）传递给唯一检查字段（例如`loginName`）（`fields={"token", "loginName"}`），传递给 repositoryMethod。它`id`本身不起作用，在对象创建时为空，并且没有执行 repositoryMethod。我`token`在构造函数中创建方法。需要令牌来识别创建或更新操作的实体。

```
/**
  * @ORM\Table(name="anbieterregistrierung")
  * @ORM\Entity(repositoryClass="AnbieterRegistrierungRepository")
  * @UniqueEntity(
  *      fields={"token", "loginName"},
  *      repositoryMethod="findUniqueEntity"
  * )
  */ 
```

然后在存储库类中编辑 WHERE DQL：

```
public function findUniqueEntity(array $parameter)
    {
        $loginName = $parameter['loginName'];
        $token = $parameter['token'];
.
.
.
. . . WHERE anbieterregistrierung.loginName = :loginName AND anbieterregistrierung.token <> :token
.
.
.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T15:59:56.083

简短的回答：您没有将表单数据输入实体，因此您正在使用一个不知道其房间已在表单中设置的新实体。

长答案：获取表单数据并将其放入实体允许您在更新之前操作数据。请参阅下面的修改后的控制器。关键线是

`$entity = form->getData();`然后允许您`$room=$entity->getRoom();`

```
/**
 * Creates a new Booking entity.
 *
 * @Route("/create", name="booking_create")
 * @Method("POST")
 * @Template("TonsBookingBundle:Booking:new.html.twig")
 */
public function createAction(Request $request)
{
    $entity = new Booking();
    $form = $this->createForm(new BookingType(), $entity);
    $form->bind($request);
$entity = $form->getData();  // Lighthart's addition
    if ($form->isValid())
    {
        $em = $this->getDoctrine()->getManager();
        $room = $entity->getRoom();
        if($room->getLocked() && $room->getLockedBy()->getId() === $this->getUser()->getId())
        {
            $entity->setCreatedAt(new \DateTime());
            $entity->setUpdatedAt(new \DateTime());
            $entity->setManager($this->getUser());

            $em->persist($entity);
            $room->setLocked(false);
            $room->setLockedBy(null);
            $room->setLockedAt(null);
            $em->persist($room);
            $em->flush();
            return $this->redirect($this->generateUrl('booking_show', array('id' => $entity->getId())));
        }
        else
        {
            $form->addError(new FormError("Номер в текущий момент не заблокирован или заблокирован другим менеджером"));
            return array(
                'entity' => $entity,
                'form' => $form->createView(),
            );
        }
    }

    return array(
        'entity' => $entity,
        'form' => $form->createView(),
    );
} 
```

# android - ACTION_GET_CONTENT : How to get file-ending when searching for multiple file types?

> ID：16148686
> 
> 赞同：6
> 
> 时间：2013-04-22T13:44:25.190
> 
> 标签：android, android-intent, sd-card, filepath

I am using an Intent to let the user select a file, and after the user has done that I want to know what kind of file-type the selected file is.

The intent:

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("*/*"); 
```

In my onActivityResult I want to extract the path from the intent through intent.getData() and all of it's "submethods" (getScheme(), getLastPathSegment() etc). However, I only get the Uri for the selected file.

Example of Uris':

```
Uri: content://media/external/audio/media/15185 //This is an audiofile
Uri: content://media/external/audio/media/20 //Another audiofile
Uri: content://media/external/images/media/20577 //this is a picture
Uri: file:///storage/emulated/0/testWed%20Apr%2017%2011%3A10%3A34%20CEST%202013 //This is a file 
```

I've seen solutions of how to get the absolute path when the user is only allowed to chose images or audios. But how do I do I get the absolutePath (the real path with the name and file-ending, e.g. MyPicture.jpeg) if I want to allow the user to select from different file types?

The code I've been twiggling with to try to get the path-name in onActivityResult(int requestCode, int resultCode

```
 String fileName = data.getData().getLastPathSegment().toString();
         System.out.println("Uri: " +data.getData().toString());
         File f = new File(fileName);
         System.out.println("TrYinG wIWThA Da FiLE: " +f.getAbsolutePath());
         System.out.println("FileNAME!!!: "+fileName); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-11T20:26:32.050

通过文件结尾，我假设您的意思是文件扩展名？（即mp4）

如果是这样，您可以使用`ContentResolver`获取 mimetype：

```
String mimeType = getContentResolver().getType(sourceUri); 
```

如果您有内容，这将为您提供 mimetype 假设它们在`MediaStore`它们应该包含的范围内`Uri`。所以你会得到类似“image/png”、“video/mp4”等的东西。

然后您可以使用`MimeTypeMap`从 mimetype 获取文件扩展名：

```
String extension = MimeTypeMap.getSingleton().getExtensionFromMimeType(mimeType); 
```

请注意，您永远不应该在“/”之后对 mimetype 进行子串化以获取扩展名，因为某些 mimetype 不使用其扩展名，例如具有 mimetype“video/quicktime”的“.mov”文件

# javascript - Appending to the nearest div of a class using jQuery autocomplete

> ID：16148691
> 
> 赞同：0
> 
> 时间：2013-04-22T13:44:35.803
> 
> 标签：javascript, jquery

I have several input boxes on a page, all with the autocomplete class, underneath each of them I have a div that I want the autocomplete results to append to. However, if I just say to append to the div of a class then it just does the first div and not to the one closest. I've tried to put together some javascript to fix this, but I've run into a brick wall and keep getting the same error. Any help that can be provided is appreciated.

Here is my javascript:

```
<script type="text/javascript">
$(document).ready(function () {
    var div_id;
    $("input.autocomplete").autocomplete({
        set: div_id = $(".autocomplete").keyup(function () {
            $('.autocomplete').closest('div').find('.container').attr('id');
        }),
        appendTo: div_id,
        source: function (request, response) {
            $.ajax({
                url: '/Home/GetUsers',
                type: "POST",
                dataType: "json",
                data: { query: request.term },
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item, value: item };
                    }));
                }
            });
        }
    });
})      
</script> 
```

Here is what the view looks like:

```
Employee Name (Team Leader): <input type ="text" name="empName1" class="autocomplete"/>
    <div class ="container"  id = "container0"></div>
    <br/>
    <br/>
    Employee Name (Event Process Owner): <input type ="text" name="empName2" class="autocomplete"/>
    <div class ="container" id = "container1"></div>
    <br/>
    <br/>
    Employee Name (Sponsor): <input type ="text" name="sponsor" class="autocomplete"/>
    <div class ="container" id = "container2"></div>
    <br/>
    <br/>
    Employee Name: <input type ="text" name="empName3" class="autocomplete"/>
    <div class ="container" id = "container3"></div>
    <br/>
    Employee Name: <input type ="text" name="empName4" class="autocomplete"/>
    <div class ="container" id = "container4"></div>
    <br/> 
```

And the error I get when I try to start the project is "Microsoft JScript runtime error: Unexpected call to method or property access." When I get this error it highlights this in my jquery.min.js (1.8.3):

```
this.appendChild(e) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:49:05.790

更改此行

```
$('.autocomplete').closest('div').find('.container').attr('id'); 
```

至

```
$('.autocomplete').next("div").attr("id")); 
```

应该不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:49:58.823

尝试这个：

**HTML**

添加`data container id`到`input box`

```
Employee Name (Sponsor): 
<input type ="text" name="sponsor" data-container_id="container2" class="autocomplete" />
<div class ="container" id = "container2"></div> 
```

现在在**脚本中**

```
$("input.autocomplete").autocomplete({
    appendTo: $('#'+$(this).data('container_id')),//it will give you container-id
    ....
    .... 
```

# jquery-mobile - 带有 jquery-mobile 的并排按钮

> ID：16148692
> 
> 赞同：2
> 
> 时间：2013-04-22T13:44:36.373
> 
> 标签：jquery-mobile

我正在使用 jquery-mobile，我有这两个按钮：

```
<p id="propart">Pro:
    <select id="chosenpro" data-inline="true"></select>
    <button type="button" id="resetbutton" data-inline="true" data-theme="w">Reset</button>
</p> 
```

我希望它们并排显示（内联）。但我无法弄清楚。我这样做[了，](http://jquerymobile.com/demos/1.2.0/docs/buttons/buttons-inline.html)但它不起作用。你能帮我吗 ？这是我的CSS：

```
#propart .ui-select {
    width:75%;
}
#propart .ui-select .ui-btn-icon-right {
    width:100%;
}
#propart .ui-btn {
    width:25%;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:11:38.650

使用`ui-grid`类，并覆盖它们的宽度。

> **[演示](http://jsfiddle.net/Palestinian/9DgNs/)**

标记

```
<div class=ui-grid-a>
 <div class=ui-block-a>button 1</div>
 <div class=ui-block-b>button 2</div>
</div> 
```

CSS

```
.ui-block-a { width: 75% !important; }
.ui-block-b { width: 25% !important; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-11T11:02:46.047

无需定义任何 CSS 规则。jqm 有[Layout grids](http://demos.jquerymobile.com/1.1.2/docs/content/content-grids.html) 你需要做的就是：

```
<div class=ui-grid-a>
 <div class=ui-block-a> <select id="chosenpro" data-inline="true"></select></div>
 <div class=ui-block-b><button type="button" id="resetbutton" data-inline="true" data-theme="w">Reset</button></div>
</div> 
```

# java - Make TableRows even width

> ID：16148694
> 
> 赞同：0
> 
> 时间：2013-04-22T13:44:38.450
> 
> 标签：java, android, width, tablelayout, tablerow

Below is what my screen looks like:

![enter image description here](https://i.stack.imgur.com/MYzx9.png)

You can see that in row 1, the two buttons are not aligned evenly since the right box is 2 lines and the left box is 1 line. Also, you can see in row 3 that the buttons are wider since they are both 3 lines each.

Is there a way to make the rows the same height? Sort of like how in a `LinearLayout` you can use `android:layout_width="#"`. I have posted all the code in my XML since it is relatively short.

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relativelayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="1dp"
    android:paddingBottom="50dp"
    android:background="@drawable/scroll" >

    <TextView
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textSize="14sp"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:paddingTop="65dp" />

    <TextView
        android:id="@+id/subHeader"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/header"
        android:textStyle="italic|bold"
        android:textSize="12sp"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:paddingBottom="20dp" />

    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/subHeader"
        android:layout_alignParentBottom="true"
        android:background="@drawable/scrollviewborder"
        android:fillViewport="true"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:paddingTop="8dp"
        android:paddingBottom="8dp" >

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/jc" 
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />

            <Button 
                android:id="@+id/tencommandments"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/exodus" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />

            <Button
                android:id="@+id/genesis" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/holydays" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />      

            <Button
                android:id="@+id/facts" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/random" 
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:14:41.473

这是你的布局，重做。您将要添加引用您的可绘制对象的行 - 我将它们取出，因为我无权访问它们。注意重量的值是如何分数的，并根据该空间的百分比来考虑容器内小部件的可用空间量。这种范式转变应该会提高您对权重属性的理解。

此外，尽量避免使用API 8 及更高版本`fill_parent`已弃用它`match_parent`，除非你真的想支持旧的、发霉的 Android 版本（不到安装基数的 1%）。

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relativelayout"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp"
    android:paddingTop="1dp"
    android:paddingBottom="50dp" >

    <TextView
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:textStyle="bold"
        android:textSize="14sp"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:paddingTop="65dp" />

    <TextView
        android:id="@+id/subHeader"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/header"
        android:textStyle="italic|bold"
        android:textSize="12sp"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:paddingBottom="20dp" />

    <TableLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/subHeader"
        android:layout_alignParentBottom="true"
        android:fillViewport="true"
        android:paddingLeft="8dp"
        android:paddingRight="8dp"
        android:paddingTop="8dp"
        android:paddingBottom="8dp" >

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight=".25" >

            <Button
                android:id="@+id/jc" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />

            <Button 
                android:id="@+id/tencommandments"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight=".25" >

            <Button
                android:id="@+id/exodus" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />

            <Button
                android:id="@+id/genesis" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight=".25" >

            <Button
                android:id="@+id/holydays" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />      

            <Button
                android:id="@+id/facts" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight=".5"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight=".25" >

            <Button
                android:id="@+id/random" 
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_weight="1"
                android:textStyle="bold"
                android:textSize="14sp" />
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:49:20.120

尝试在您的按钮中更改`android:layout_height="wrap_content"`为`match_parent`id `jc`。

# android - Define a required attribute for

> ID：16148696
> 
> 赞同：4
> 
> 时间：2013-04-22T13:44:42.290
> 
> 标签：android, xml, custom-controls, custom-component

Is it possible to define the stylable attributes as **required**? (as in XSD schemas)

```
<declare-styleable name="PieChart">
    <attr name="name" format="string" use="required"/>
</declare-styleable> 
```

The above XML does not work, is there another syntax to achieve it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:50:54.757

如果在 attr 值为 null 的情况下在构造函数中抛出异常怎么办？

# ruby-on-rails-3 - Ruby 中的 include vs. extend 和 Comparable 模块

> ID：16148699
> 
> 赞同：3
> 
> 时间：2013-04-22T13:44:53.540
> 
> 标签：ruby-on-rails-3

寻找一个有趣的 Ruby 观察的解释。考虑在 Comparable 模块中混合如下：

```
class Class0
end
class Class1
  include Comparable
end
class Class2
  extend Comparable
end 
```

如果我们寻找 Class2 与 Class0 中的方法，

```
Class2.methods.each { |x| p x if not Class0.methods.include? x } 
```

我们得到只是：之间？

但是，如果我们这样做，要寻找 Class1 和 Class0 实例之间的差异，

```
a = Class0.new
b = Class1.new
b.methods.each { |x| p x if not a.methods.include? x } 
```

我们得到

```
[:>, :>=, :<, :<=, :between?] 
```

我想了解为什么结果不同。我本来希望“扩展”将相同的方法推送到“包含”推送到实例中的类中。像“:>”这样的东西不是和“:between”一样的方法吗？??

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T17:14:56.913

Include 用于向类的实例添加方法，而 extend 用于添加类方法： [http ://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/](http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/)

:> 和 :between 都是方法。区别就在这里：

如果你看到 Class0 方法，你有 :>, :>=, :<, :<= 定义为类方法。当 Class2 扩展 Comparable 时，它​​会介于两者之间吗？方法作为类方法。

在第二种情况下，您有 Class0 和 Class1 实例，因此 Class0 的实例没有 :>, :>=, :<, :<=, :between? 方法定义为实例方法。一旦您在 Class1 中包含了可比较的 Module，它将从 Module 中获取所有这些方法作为实例方法，因此您将拥有所有 [:>, :>=, :<, :<=, :between?] 方法在实例中可用湾。

这就是你得到这些结果的原因。

我在这里找到了另一个很好的包含 VS 扩展的解释：http: [//aaronlasseigne.com/2012/01/17/explaining-include-and-extend/](http://aaronlasseigne.com/2012/01/17/explaining-include-and-extend/)

# c - C - Mirror a PPM from left to right

> ID：16148706
> 
> 赞同：2
> 
> 时间：2013-04-22T13:45:11.423
> 
> 标签：c, struct, pixel, ppm

I have to write a program where I take user input for a PPM image and then mirror the image from left to right (basically flipping it over the y-axis). So if the image was <, the new image would now be >. This should not be a 180 degree rotation, as that would make the image upside down. It should still be the same, just reflected.

I have the code here that I used to input and output the PPM, but I don't know how to mirror it. I made a function that would theoretically be used for the mirror code, but I'm not sure if that's the best way to do it either. If you know a better place to put the code, be my guest.

I have researched this topic quite a bit, but was only able to find issues where people needed to rotate the image.

Here is what I have so far:

```
#include<stdio.h>
#include<stdlib.h> //for fopen()

typedef struct {
     unsigned char red,green,blue;
} pixel_t; //struct for pixels

typedef struct {
     int x, y;
     pixel_t *data;
} PPMImage; //struct for creating the image

#define RGB_COMPONENT_COLOR 255

static PPMImage *readPPM(const char *filename)
{
     char buff[16];
     PPMImage *img;
     FILE *fp;
     int c, rgb_comp_color;

     fp = fopen(filename, "rb");
     if (!fp) {
         fprintf(stderr, "Unable to open file '%s'\n", filename);
         exit(1);} //opens the ppm and checks to make sure it can be opened

     if (!fgets(buff, sizeof(buff), fp)) {
         perror(filename);
         exit(1);} //read the format of the image

    if (buff[0] != 'P' || buff[1] != '6') {
         fprintf(stderr, "Invalid image format (must be 'P6')\n");
         exit(1);} //checks to see if the format is ppm

    img = (PPMImage *)malloc(sizeof(PPMImage));
    if (!img) {
         fprintf(stderr, "Unable to allocate memory\n");
         exit(1);} //allocates the memory needed to form the input image

    c = getc(fp);
    while (c == '#') {
    while (getc(fp) != '\n') ;
         c = getc(fp);
    }//checks for comments

    ungetc(c, fp);

    if (fscanf(fp, "%d %d", &img->x, &img->y) != 2) {
         fprintf(stderr, "Invalid image size (error loading '%s')\n", filename);
         exit(1);} //reads the size of the image, height becomes img->y, and width becomes img->x

    if (fscanf(fp, "%d", &rgb_comp_color) != 1) {
         fprintf(stderr, "Invalid rgb component (error loading '%s')\n", filename);
         exit(1);} //reads how much of each color there is

    if (rgb_comp_color!= RGB_COMPONENT_COLOR) {
         fprintf(stderr, "'%s' does not have 8-bits components\n", filename);
         exit(1);} //makes sure the the component is 8 bits

    while (fgetc(fp) != '\n') ;

    img->data = (pixel_t*)malloc(img->x * img->y * sizeof(pixel_t));

    if (!img) {
         fprintf(stderr, "Unable to allocate memory\n");
         exit(1);} //allocates the memory need for the pixel data

    if (fread(img->data, 3 * img->x, img->y, fp) != img->y) {
         fprintf(stderr, "Error loading image '%s'\n", filename);
         exit(1);} //reads the pixel data

    fclose(fp);
    return img;
}
void writePPM(const char *filename, PPMImage *img)
{
    FILE *fp;

    fp = fopen(filename, "wb");
    if (!fp) {
         fprintf(stderr, "Unable to open file '%s'\n", filename);
         exit(1);} //opens the file for output

    //write the header file
    //image format
    fprintf(fp, "P6\n");

    //image size
    fprintf(fp, "%d %d\n",img->x,img->y);

    // rgb component depth
    fprintf(fp, "%d\n",RGB_COMPONENT_COLOR);

    // pixel data
    fwrite(img->data, 3 * img->x, img->y, fp);
    fclose(fp);
}

void mirror(PPMImage *img)
{

//this is where I want to insert the code for mirroring the image

}

int main(int argc, char* argv[]){ //takes command line parameters
    PPMImage *image;
    char* filename = argv[1];
    image = readPPM(filename);
    mirror(image);
    writePPM("OutputFile.ppm",image); //creates the output file
    printf("Press Enter");
    getchar();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:21:31.120

您的 mirror() 函数可以一次处理一排图像。对于每一行，取该行中最左边的像素并将其值与该行中最右边像素的值交换。然后取第二个最左边的像素并将其值与第二个最右边的像素交换，依此类推，直到您要交换的像素的列位置“在中间相遇”。（然后移动到下一行并对其执行相同的操作，直到您完成所有行）。

请注意，如果图像包含奇数列，则图像中心将有一列保持不变（因为它形成了镜像发生的轴）。对于偶数列，所有列将被交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:30:41.120

要垂直镜像图像，您可以使用此功能：

```
void mirrorVert(PPMImage *img)
{
    int y;
    int x;
    const int middleX = img->x / 2;
    pixel_t tmp;
    pixel_t* p;

    for (y = 0; y < img->y; ++y)
    {
        p = img->data + y * img->x;
        for (x = 0; x < middleX; ++x)
        {
            // swap pixels
            tmp = p[x];
            p[x] = p[img->x - 1 - x];
            p[img->x - 1 - x] = tmp;
        }
    }
} 
```

并水平镜像：

```
void mirrorHoriz(PPMImage *img)
{
    const int line_size = img->x * sizeof(pixel_t);
    const int middle = img->y / 2;
    int y;

    // allocate swap buffer
    pixel_t* buff = (pixel_t*)malloc(line_size);
    pixel_t* top;
    pixel_t* bottom;

    for (y = 0; y < middle; ++y)
    {
        // swap lines from top and bottom
        top = img->data + (y * img->x);
        bottom = img->data + ((img->y - y - 1) * img->x);

        memcpy(buff, top, line_size);
        memcpy(top, bottom, line_size);
        memcpy(bottom, buff, line_size);
    }

} 
```

# c# - how to read every third bit in a byte array

> ID：16148709
> 
> 赞同：2
> 
> 时间：2013-04-22T13:45:20.213
> 
> 标签：c#, buffer, byte

I have a byte array of 48 bytes and would like to read every third bit of a byte in this array, how can i achieve this?

this is the output of my device

> 100510000 10000000 100390000 10000000 100390000 10000000 100460000 10000000 100390000 10000000 100390000 10000000 100390000 10000000 100390000 10000000 100390000 10000000 100320000 10000000 100460000 10000000 100390000 10000000 100390000 10000000 100320000 10000000 100460000 10000000 100390000 10000000 100300000 10000000 100300000 10000000 100310000 10000000 100310000 10000000 100390000 10000000 100300000 10000000 100320000 10000000 120560000 10000000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:51:07.987

```
byte[] bytes;
for (var i = 0; i < bytes.Length; i++)
{
   BitArray bits=    bytes[i];
   bool bit3= bits[2];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:52:27.583

尝试这个：

```
byte[] bytearray = new byte[4];

var result = bytearray.Select(input=>new System.Collections.BitArray(input)[2]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:03:33.787

这将迭代所有字节并返回一个字节中的指定位。

```
 byte[] myBytes;         // populate here
    int bitLocation = 2;    // Bit number
    for (var i = 0; i < myBytes.Length; i++)
    {
        byte myByte = myBytes[i];
        var requiredBit = Convert.ToInt32((myByte & (1 << bitLocation - 1)) != 0);
        // save the requiredBit somehow
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:48:10.570

```
byte[] bytes;
for (var i = 0; i < bytes.Length; i++)
{
    bytes[i] &= 4;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-22T14:06:34.197

（假设您希望输出为与字节中的位相对应的 1 位和 0 位的流，将所有字节中的所有位视为一个长的位流。）

你可以这样做：

```
using System;
using System.Collections.Generic;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[] bytes = new byte[] { 0xff, 0x00, 0xff, 0xff, 0x00, 0xff, 0x00, 0xff, 0x00, 0xff, 0x00, 0xff, };

            foreach (var b in BitReader(bytes, 3))
            {
                Console.WriteLine(b);
            }
        }

        public static IEnumerable<byte> BitReader(IEnumerable<byte> bytes, int stride)
        {
            int bit = 0;

            foreach (var b in bytes)
            {
                while (true)
                {
                    yield return (byte)(((b & (1 << bit)) != 0) ? 1 : 0);

                    bit += stride;

                    if (bit > 7)
                    {
                        bit %= 8;
                        break;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-22T13:49:56.510

```
private bool BitCheck(byte b, int pos)
{
    return (b & (1 << (pos-1))) > 0;
} 
```

# java - 通过 Jenkins 作业部署 Maven 的策略

> ID：16148712
> 
> 赞同：5
> 
> 时间：2013-04-22T13:45:27.843
> 
> 标签：java, maven, jenkins

我有一个 Jenkins 工作，它使用 maven 构建目标“干净的包部署”作为主 git 分支。但是，由于 nexus repo 不允许重新部署，如果 Jenkins 作业在没有更改版本的情况下第二次运行，它将失败并出现预期的 400 Bad Request 错误：

```
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal 
    org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy) 
    on project common-library: 
Failed to deploy artifacts: Could not transfer artifact 
    net.bacon.common:common-library:pom:1.2.13 from/to bacon-releases 
    (https://maven.bacon.com/nexus/content/repositories/releases): 
Failed to transfer file: 
    https://maven.bacon.com/nexus/content/repositories/releases/net/bacon/common/common-library/1.2.13/common-library-1.2.13.pom. 
Return code is: 400, ReasonPhrase:Bad Request. 
```

任何人都可以提出不同的策略，从而可以在不使 Jenkins 工作失败的情况下运行部署目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:51:18.083

我们所做的是自动快照构建。然后，版本会自动递增。

对于发布构建，我们使用 Maven 发布插件并手动输入版本。但是，您可以让发布插件完成工作。它将删除“-SNAPSHOT”构建、部署，然后，对于下一个版本，增加最后一位数字并再次附加“-SNAPSHOT”。

对于分发管理，您可以有两个存储库，一个用于快照，一个用于发布，具有不同的重新部署设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T06:24:40.120

We apply a "double action" solution:

*   Increment version
*   Run **mvn install**
*   Run tests
*   If all passed, we run **mvn deploy**

This way, we do not try to deploy before we know all passed and we have a unique version deployed every time.

I hope this helps.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T23:23:07.313

这也是我们组的一个问题。

我们希望 maven 尝试被动部署，因此如果部署存在于 nexus 中，那么它将继续使用 SUCCESS ALREADY DEPLOYED，如果部署在 nexus 中不存在，它将上传并部署 SUCCESS。

我们希望 jenkins 在构建并通过覆盖检查后进行部署，但是如何使其只有未部署的才会被部署，而已经部署的会被忽略。

我们的解决方案是自定义脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:05:05.583

您应该确保 master 上的每个提交在 pom 文件中都有自己的版本号。所以你不会有重新部署。

拒绝“重新部署”有一个很好的理由：发布版本的内容永远不应该改变。

如果您无法避免在 master 上提交相同版本号，请考虑将链式 jenkins 作业更改为“干净安装”（仅将工件存储在本地存储库中）并使用仅启动的“干净部署”创建一个新作业手动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-04T08:26:19.477

您可以使用发布候选概念。当您开始发布时，您将 -RC1 添加到版本（例如 1.1.0-RC1）。

随着下一次重新部署，您将增加 RC 编号。发布完成后，如果要生成新的 TAG，只需删除该版本的 RC。TAG创建之前

# c - 多项式除法

> ID：16148717
> 
> 赞同：0
> 
> 时间：2013-04-22T13:45:36.117
> 
> 标签：c, arrays

我在下一个代码中有一个奇怪的错误（它正在执行多项式除法）。不确定，但正如我所见，问题出在方法的声明中。在代码之后，我列出了我不断遇到的错误。

这是代码：

```
 1
     2  int[] mul(int d[],int t,int idxq);
     3  int[] sub(int a[],int b[]);
     4  int check(int r[],int lengthr);
     5  int[] cp(int a[]);
     6  int[] div(int n[],int d[]);
     7
     8
     9
    10  int[] mul(int d[],int t,int idxq){
    11  int i;
    12  int size=sizeof(d)/sizeof(d[0]);
    13  int c[size];
    14  for(i=size-1;i>0;i--)
    15  c[idxq+i]=d[i]+t;
    16  return c;
    17  }
    18
    19  int[] sub(int a[],int b[]){
    20
    21  int i;
    22  int j;
    23  int size=sizeof(a)/sizeof(a[0]);
    24  int fin[size];
    25  for(j=0;jsize;j++)
    26  fin[j]=a[j];
    27  for(i=0;isize;i++)
    28  fin[i]=a[i]-b[i];
    29
    30  return fin;
    31  }
    32
    33  int check(int r[],int lengthr){
    34  int i;
    35  for(i=0;i<lengthr;i++){
    36  if(r[i]!=0)
    37  return 1;
    38  }
    39  return 0;
    40  }
    41
    42
    43  int[] cp(int a[]){
    44  int size=sizeof(a)/sizeof(a[0]);
    45  int i;
    46  int fin[size];
    47  for(i=0;i<size;i++)
    48  fin[i]=a[i];
    49
    50  return fin;
    51  }
    52
    53  int[] div(int n[],int d[]){
    54  int idxq=0;
    55  int t=0;
    56  int r[sizeof(n)/sizeof(n[0])]=cp(n);
    57  int lengthr= sizeof(r)sizeof(r[0]);
    58  int lengthd= sizeof(d)sizeof(d[0]);
    59
    60  while(check()!=0 && r[lengthr-1]=d[sizeof(d[0]])
    61  t=r[lengthr-1]d[sizeof(d[0]])-1];
    62  idxq=lengthr-d[sizeof(d[0]])-1]
    63  q[idxq]=t;
    64  r=sub[r,mul(d,t,idxq)];
    65  idxq=0;
    66
    67  }
    68
    69  int main(){
    70
    71  int a[4]={-42,0,12,1};
    72  int b[2]=(-3,1);
    73  div(a,b);
    74  } 
```

以下是错误：

```
q6.c:2: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:3: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:5: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:6: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:10: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:19: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:43: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c:53: error: expected identifier or  Ç ( Ç  before  Ç [ Ç  token
q6.c: In function  Ç main Ç :
q6.c:72: error: invalid initializer 
```

感谢帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:54:23.120

一点都不“奇怪”。

C 没有数组作为一等公民；你不能从函数中返回它们。

另外，这个：

```
int size=sizeof(d)/sizeof(d[0]); 
```

无效，因为传递给函数的任何数组都将衰减为指向第一个元素的指针，因此`sizeof d`将是`sizeof (int *)`. 您需要将数组长度作为单独的参数传递。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:52:04.187

您不能`arrays`从函数返回，但必要时可以从指针返回。改变你的第一行

```
int[] mul(int d[],int t,int idxq); 
```

至

```
int* mul(int d[],int t,int idxq); 
```

并继续为每个返回值执行此操作`[]`。

此外，您将返回指向本地对象的指针，这在最好的情况下会导致未定义的行为，或者`SEGFAULT`在最坏的情况下导致程序崩溃。

为了从函数返回一个数组，您需要在堆上分配它，`malloc()`并将原始数组的大小作为函数参数传递。例如

```
int* mul(int d[],int t,int idxq, int array_size){
    int i;
    int* c = malloc(array_size*sizeof(int));
    for(i=array_size-1;i>0;i--)
    c[idxq+i]=d[i]+t;
    return c;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:52:05.257

您不能在 c 中返回数组。

所以`int[] mul(int d[],int t,int idxq);`无效。

我也看到你有`int size=sizeof(d)/sizeof(d[0]);`一些你的功能。这通常不会为您提供数组的长度。如果您在编译时知道它，它只会为您提供数组的长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T13:57:45.080

正如其他人指出的那样，您不能`array`从函数返回一个，并且您不能在不使用动态分配的情况下拥有可变长度数组，但是您还试图从堆栈返回一个指向局部变量的指针，例如，在`cp`：

```
int fin[size];
 //... other code    
return fin;
       ^^^ 
```

`fin`分配在函数的堆栈上，退出后将不存在。一种可能的解决方案是使用动态内存`malloc`并返回它，`pointer`但您需要`free`稍后记住该内存：

```
int *fin = malloc(size*sizeof(int)); 
```

这种方法还具有不需要`const`尺寸的额外优点。我们现在回到你不能返回的事实，`array`所以你的函数需要返回`int *`：

```
int* cp(int a[], size_t size)
                 ^^^^^^ 
```

注意使用 of`size_t`而不是，`int`它实际上是作为参数的：`type``malloc`

```
void *malloc(size_t size); 
```

他们回来`type`了[`sizeof`](https://stackoverflow.com/questions/4477622/differences-between-using-size-t-and-using-sizeof)。

# asp.net-mvc - 客户端十进制验证无法正常工作

> ID：16148718
> 
> 赞同：0
> 
> 时间：2013-04-22T13:45:38.777
> 
> 标签：asp.net-mvc, validation, view, unobtrusive-javascript

我有一个带有不显眼的 javascript 客户端验证的 MVC4 应用程序。除了十进制验证外，这工作正常。我遇到了一些奇怪而烦人的行为。

小数验证仅允许在小数分隔符后包含三个数字的数字。但是我希望它可以在分隔符之后使用两个数字（或者任何数字都可以，如果我是正确的，默认情况下它应该这样做）。

所以 1.222 是有效的，而 1.22 是无效的，而我不希望它是有效的。（1.2222 均无效）。

在我看来，我有一个正常的：

```
@Html.TextBoxFor(x => x.BasePrice) 
```

我的模型：

```
[Required]
public decimal BasePrice { get; set; } 
```

和我的控制器：

```
ProductVM model = new ProductVM()
{
    BasePrice = product.BasePrice
}; 
```

*   产品是一个实体框架 4 实体对象

我也试过放；

```
[DisplayFormat(DataFormatString = "{0:n2}", ApplyFormatInEditMode = true)] 
```

在我的模型中。但这也不起作用。它没有效果。

在使用 MVC 时，我从未见过这样的行为。我不知道在哪里看。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T16:11:53.500

我仍然不知道问题是什么，但我用一些肮脏的解决方法修复了它：

```
$.validator.methods.number = function (value, element) {

    if(!isNaN(parseFloat(strValue)))
    {
        return true;
    }   

    return false;

} 
```

通过覆盖客户端十进制验证。刚刚在我的 _layout.cshtml 的脚本块中添加了这个。

服务器端验证将通过完整验证确保安全性仍然可以。

# decode - 解密 UTF16 -> 解密

> ID：16148722
> 
> 赞同：-2
> 
> 时间：2013-04-22T13:45:50.677
> 
> 标签：decode

我正在查看以下`strrev`函数： http: [//phpjs.org/functions/strrev/](http://phpjs.org/functions/strrev/)

有人可以解释一下包含这一行的代码是做什么用的吗？：

```
([\uDC00-\uDFFF\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065E\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C82\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D02\u0D03\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F90-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B6-\u17D3\u17DD\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8\u19C9\u1A17-\u1A1B\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAA\u1C24-\u1C37\u1DC0-\u1DE6\u1DFE\u1DFF\u20D0-\u20F0\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA67C\uA67D\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C4\uA926-\uA92D\uA947-\uA953\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uFB1E\uFE00-\uFE0F\uFE20-\uFE26]+) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:53:12.927

它确保如果您在字符串中组合了字符，例如。a`â`由一个单独的`a`和一个重音字符表示，它们将在反转中幸存下来。

如果没有该代码，则 的两个组件代码点将`â`被反转，这将破坏组合字符（或“字素簇”以赋予其正确名称）。

您引用的代码是一个正则表达式，它匹配任何字符，后跟一个组合字符。

# jquery - Backbone.js 未捕获的引用错误

> ID：16148723
> 
> 赞同：0
> 
> 时间：2013-04-22T13:45:54.653
> 
> 标签：jquery, wordpress, backbone.js, underscore.js

我是主干新手，试图从 Wordpress json 插件中获取 json 并渲染到模板中，但是当循环浏览帖子时，我收到以下错误**Uncaught ReferenceError: posts is not defined**任何帮助表示赞赏。谢谢...

```
 jQuery(function($) {
    var Post = Backbone.Model.extend();
    var Posts = Backbone.Collection.extend({
        model: Post,
        url: '/api/get_post/?json=get_recent_posts',
        parse: function(resp) {
            console.log("posts", resp);
            return resp;
        }
    });
    var listView = Backbone.View.extend({
        el: '#content',
        template: _.template($("#post-template").html()),
        initialize: function() {
            this.model.bind("reset", this.render, this);
        },
        render: function() {
            $(this.el).html(this.template(this.model.toJSON()));
            return this;
        }
    });
    var AppRouter = Backbone.Router.extend({
        routes: {
            "!/archive": "archive"
        },
        archive: function() {
            this.postList = new Posts();
            this.postListView = new listView({
                model: this.postList
            });
            this.postList.fetch();
            this.postListView.render();
        }
    });
    var app = new AppRouter();
    Backbone.history.start();
}); 
```

模板

```
<script id="post-template" type="text/template">
    <ul>
      <% _.each(posts, function(post) { %>
        <li id="<%= post.id %>">
          <a href="<%= post.url %>"><%= post.thumbnail %></a>
        </li>
      <% }); %>
    </ul>
</script> 
```

json

```
{
    "status": "ok",
    "count": 1,
    "count_total": 1,
    "pages": 1,
    "posts": [{
        "id": 4,
        "type": "post",
        "slug": "test-post",
        "url": "http:\/\/localhost:8888\/2013\/04\/test-post\/",
        "status": "publish",
        "title": "Test Post",
        "title_plain": "Test Post",
        "content": "",
        "excerpt": "",
        "date": "2013-04-17 15:12:21",
        "modified": "2013-04-19 14:13:00",
        "categories": [],
        "tags": [],
        "author": {
            "id": 1,
            "slug": "admin",
            "name": "admin",
            "first_name": "",
            "last_name": "",
            "nickname": "admin",
            "url": "",
            "description": ""
        },
        "comments": [],
        "comment_count": 0,
        "comment_status": "closed",
        "thumbnail": "http:\/\/localhost:8888\/wp-content\/uploads\/2013\/04\/test-image-150x150.jpg"
    }]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:56:02.907

调用`Collection#toJSON`将返回**一个数组**。因此没有`posts`钥匙。尝试使用`$(this.el).html(this.template(this.model.toJSON()[0]));`，因为您的收藏中只有一个模型（这很奇怪）。

您可能希望在`parse`返回的方法中解析您的响应，`resp.posts`以便您的集合具有更多意义，并且实际上为`Post`每个帖子创建一个模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:56:32.350

尝试执行以下操作：

```
$(this.el).html({
   posts : this.template(this.model.toJSON())
}); 
```

代替：

```
$(this.el).html(this.template(this.model.toJSON())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:44:32.340

如果要`posts`在下划线模板中用作包含集合/数组的变量，则需要将其作为属性传递给模板函数：

```
$(this.el).html(this.template({ posts: this.model.toJSON() } )); 
```

我还认为您的`Posts`Collection 类应该返回 `parse`函数中的帖子，如下所示（因为帖子是返回的 JSON 的属性）：

```
var Posts = Backbone.Collection.extend({
    model: Post,
    url: '/api/get_post/?json=get_recent_posts',
    parse: function(resp) {
        console.log("posts", resp);
        return resp.posts || [];  // grab the posts from the JSON 
    }
}); 
```

而且，通常按照惯例，您可能希望切换到使用`collection`View 的属性：

```
this.postListView = new listView({
     collection: this.postList
}); 
```

然后更改您的模板调用：`{ posts: this.collection.toJSON() }`.

# javascript - 过滤 EntityCollection 以仅从 map.targetBounds 中获取可见的 PushPins？

> ID：16148733
> 
> 赞同：0
> 
> 时间：2013-04-22T13:46:13.147
> 
> 标签：javascript, bing-maps

我正在使用 v7 javascript Bing Maps API！

我有一个包含 PushPins 的 EntityCollection。我想从地图的当前视口或从 map.getTargetBound() 中获取所有 PushPins？

我有这样的东西，其中 Geocode.pinLayer 是一个 EntityCollection 对象，我已经向 PushPins 对象添加了一个 id 属性。pushPin.getVisible() 不幸的是，我只检查图钉是否在地图上，而不是在视口中：

```
`var visiblePins = [];
        for(var i=0; i<Geocode.pinLayer.getLength(); i+=1){
            if(Geocode.pinLayer.get(i).getVisible()){
                visiblePins.push(Geocode.pinLayer.get(i).id);
            }
        }
        return visiblePins;` 
```

:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:32:06.007

除非我误解了您的问题，否则这应该很容易。

1.  获取当前地图视图（端口）：[Map.getBounds()](http://msdn.microsoft.com/en-us/library/gg427609.aspx)。你得到一个 LocationRect 对象。让我们称之为`LocationRectViewPort`。
2.  获取图钉的位置：[Pushpin.getLocation()](http://msdn.microsoft.com/en-us/library/gg427615.aspx)。你得到一个 Location 对象。让我们称之为`PushPinLocation`。
3.  看看`PushPinLocation`里面有没有`LocationRectViewPort`。使用[LocationRect.contains()](http://msdn.microsoft.com/en-us/library/gg427621.aspx)，例如：

> ```
> if(LocationRectViewPort.contains(PushpinLocation))
> {
>      // Do stuff
> } 
> ```

# python - 如何在 Python 中实现看门狗定时器？

> ID：16148735
> 
> 赞同：11
> 
> 时间：2013-04-22T13:46:17.500
> 
> 标签：python, watchdog

我想用两个用例在 Python 中实现一个简单的看门狗定时器：

*   看门狗确保函数执行时间不超过`x`秒
*   看门狗确保某些定期执行的功能确实至少每秒钟执行`y`一次

我怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T13:46:37.767

只是发布我自己的解决方案：

```
from threading import Timer

class Watchdog(Exception):
    def __init__(self, timeout, userHandler=None):  # timeout in seconds
        self.timeout = timeout
        self.handler = userHandler if userHandler is not None else self.defaultHandler
        self.timer = Timer(self.timeout, self.handler)
        self.timer.start()

    def reset(self):
        self.timer.cancel()
        self.timer = Timer(self.timeout, self.handler)
        self.timer.start()

    def stop(self):
        self.timer.cancel()

    def defaultHandler(self):
        raise self 
```

如果您想确保函数在`x`几秒钟内完成，请使用：

```
watchdog = Watchdog(x)
try:
  # do something that might take too long
except Watchdog:
  # handle watchdog error
watchdog.stop() 
```

如果您定期执行某事并希望确保它至少每秒钟执行一次，则用法`y`如下：

```
import sys

def myHandler():
  print "Whoa! Watchdog expired. Holy heavens!"
  sys.exit()

watchdog = Watchdog(y, myHandler)

def doSomethingRegularly():
  # make sure you do not return in here or call watchdog.reset() before returning
  watchdog.reset() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-06T07:50:27.667

`signal.alarm()`为您的程序设置超时，您可以在主循环中调用它，并将其设置为您准备容忍的两次中的较大者：

```
import signal
while True:
    signal.alarm(10)
    infloop() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-08T08:08:06.657

这是我在没有课程的应用程序中使用的 wdt。它没有办法阻止它：

```
from threading import Event, Thread

def wdt(time, callback):
    # a reset flag
    reset_e = Event()
    # a function to reset the wdt
    def reset(): reset_e.set()
    # the function to run in a differen thread
    def checker():
        # check if reset flag is set.
        # wait for specified time to give chance to reset.
        while reset_e.wait(time):
            # it was set in time. clear and wait again
            reset_e.clear()
        # time run out.
        callback()
    # the event is not set by default. Set it
    reset()
    # create and start the wdt
    t = Thread(target=checker)
    t.start()
    # return the resetter
    return reset

# The callback to run if wdt is not reset
def bark():
    print('woof')       

# Test
import time
reset = wdt(1.0, bark)
time.sleep(0.9)
reset()
time.sleep(2.0) 
```

# html - 如何让我的 CSS 响应式

> ID：16148736
> 
> 赞同：2
> 
> 时间：2013-04-22T13:46:18.453
> 
> 标签：html, css, responsive-design

他我正在为我的应用程序开发一个标准模板。我对 CSS 很感兴趣，但我为做出一个好的响应式设计而头疼。

现在这是我的想法：

![在此处输入图像描述](https://i.stack.imgur.com/2rhye.png)

这就是它的工作原理：

[演示](http://paperboat.tk/dev/webapplicatie/2.3/)

现在使用一些 java 脚本我可能可以做到这一点，但如果这在 CSS 中是可能的，那就太好了。我的问题是如何仅使用 HTML 和 CSS 进行设计。

一个 jsFiddle 只是为了好玩：

[jsFiddle](http://jsfiddle.net/y3Xus/1/)

我的CSS：

```
body{
    font-family:"Trebuchet MS",sans-serif;
    padding:0px;
    margin:0px;
}

#content{
    min-height: 100%;
    width: 100%;
    position: absolute;
    background-color: #5adc23;
}

input[type="button"]{
    border:2px outset rgb(166, 166, 166);
    display:inline-block;
}

input[type="button"]:hover{
    border:2px inset rgb(166, 166, 166);
    display:inline-block;
    cursor: pointer;
}

#mainbar{
    height: 31px;
    background-color: rgb(109, 164, 227);
    background-image: -webkit-linear-gradient(0deg, rgb(39, 162, 207) 1%, rgb(63, 181, 224) 36%, rgb(63, 181, 224) 64%, rgb(39, 162, 207) 100%);
}

    #mainbar_border{
        height: 100%;
        border-bottom:1px solid rgb(0, 0, 0);
        color: rgb(255, 255, 255); 
        font-family: 'Courier New', serif; 
        font-size: 21px; 
    }

#mainmenu{
    width: 40px;
    height: 96%;
    min-height: 100%;
    margin-top: 0px;
    margin-bottom: 0px;
    float: left;
}

    #mainmenu_border{
        height: 99%;
        padding: 4px;
        padding-top: 46px;
        padding-bottom: 19px;
        border-bottom-width: 1px;
        border-left-width: 1px;
        border-bottom-style: solid;
        border-left-style: solid;
    }

        #mainmenu_item_container{
            list-style-type:none;
        }

#content_app{
    float: left;
    width: 88%;
    height: 96%;
}

    #content_app_border{
        height: 99%;
        padding: 4px;
        border-bottom-width: 1px;
        border-left-width: 1px;
        border-bottom-style: solid;
        border-left-style: solid;
        border-right-width: 1px;
        border-right-style: solid;
    } 
```

我的html：

```
<div id='content' class='invoer'>    
    <div id='mainbar'>
        <div id='mainbar_border'>
            Mainbar
        </div>
    </div>
    <div id='mainmenu'>
        <div id='mainmenu_border'>
            <ul id='mainmenu_item_container'>
                <li><input type='button' value='Load content' title='load some more shit to test the resposive design' id='btn' action='loadmoreshit' /></li>
                <li>button</li>
                <li>button</li>
            </ul>
        </div>
    </div>
    <div id='content_app'>
        <div id='content_app_border'>
            content
            <br>
                <br>
                    <br>
         </div>
     </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:08:43.800

[这个 JsFiddle](http://jsfiddle.net/hfNCp/)将为您提供图表正在寻找的布局的粗略版本。从这里您可以使用 Jefferson 建议的媒体查询来为移动设备创建替代版本。一个提示 - 此处的 div 应仅用作骨架，我不会尝试为它们设置样式。如果您开始向它们添加边框和其他一些样式，则边缘将不再对齐。这是 CSS 和 HTML -

```
<div id="header">Header</div>
<div id="left_nav">Left Navigation</div>
<div id="content">Content</div>

div {
    position: absolute;
}

#header {
    top: 0px;
    left: 0px;
    right: 0px;
    height: 40px;
    background: blue;
}

#left_nav {
    top: 40px;
    left: 0px;
    width: 100px;
    bottom: 0px;
    background: red;
}

#content {
    top: 40px;
    left: 100px;
    bottom: 0px;
    right: 0px;
    background: green;
} 
```

更新：在你的最后评论之后，我做了更多的工作。首先，这是我理解的标准：

1.  左侧菜单和内容应从顶部向下 100 像素开始以容纳标题。
2.  左侧菜单和内容应至少延伸到页面底部。
3.  如果左侧菜单或内容超出页面底部，则：它们都应该向下扩展，以使它们的高度相等。湾。整个页面应该滚动，而不是单个面板。

考虑到这一点，我无法仅使用 CSS 和 HTML 来产生所有这些效果，所以看起来这里可能需要 Javascript。我已经更新[了这个 JSFiddle](http://jsfiddle.net/x6hsF/3/)，以便显示溢出`#main_container`。至此，解决方案完成了 1、2 和 3b。为了完成 3a，我添加了这个 javascript：

```
$(document).ready(function(){
    var body_height = $("body").height();
    var body_scroll = $("body").get(0).scrollHeight;
    var menu_height = $("#left_nav").height();
    var content_height = $("#content").height();

    if(body_scroll > body_height && (menu_height != content_height)) {
        if(menu_height > content_height) {
            $("#content").css("height", (menu_height + "px"));
        } else {
            $("#left_nav").css("height", (content_height + "px"));
        }
    }
}); 
```

所有这一切都是为了确保`#left_nav`和`#content`是相同的高度。它确实使用 JQuery，所以如果你不使用 JQuery，你将不得不为纯 Javascript 重写它。不过，如果您不使用 JQuery，我强烈建议您在[此处](http://jquery.com/download/)获取。它会让你的生活轻松很多。还要注意`#spike`div，它提供了在其中一个定位元素中添加“边框”div 的示例。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T13:53:09.747

您可以使用 css 框架[lite](http://gumbyframework.com/) [twitter.github.io/bootstrap、foundation.zurb.com](http://twitter.github.io/bootstrap/)或[gumbyframework.com](http://foundation.zurb.com/)

这样您就不需要从头开始构建所有东西。你会从一开始就获得很多样式，比如响应式脚手架、表单、表格、按钮、菜单等。

作为初学者，可以更容易地建立在好的东西上并从中学习。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:56:37.383

让您的设计响应的一种简单方法是使用[媒体查询](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)。
这只需要 html 和 css。您可以修复自己的媒体查询，或使用预制的响应式框架。比如[推特引导](http://twitter.github.io/bootstrap/)。

CSS3 中的媒体查询查看设备的功能，您可以使用它们来检查各种事情。例如：

- （浏览器窗口的）
宽度和高度 - 设备宽度和高度
- 方向 - 例如手机处于横向还是纵向模式？
- 解析度

然后，您可以根据这些功能设置您的 html 样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T14:06:22.937

如果您不喜欢自己动手，使用像 Bootstrap 这样的现有框架可能是一个好主意。您在上面描述的内容实际上并不需要媒体查询，因为它实际上是一个相当基本的流体布局。

以下以基本形式实现您想要的

html:

```
<div id="content" class="invoer">
    <div id="mainbar">
        Mainbar
    </div>
    <div id="mainmenu">
            <ul>
                <li>button</li>
                <li>button</li>
            </ul>
    </div>
    <div id="content_app">
            <br>blablabla content
            <hr>
            <br>blablabla content
    </div>
</div> 
```

css

```
#content {
    background:#00E113
}
#mainbar {
    width:98%;
    height:40px;
    background:#00ACD9;
    color:#fff;
    padding:1%;
}
#mainmenu {
    width:100px;
    position:absolute;
    left:0;
}
#content_app {
    margin-left:140px;
} 
```

这里我使用了一个绝对定位的主菜单，这样它就不会影响任何周围元素的宽度。然后在 content_app 上设置一个 margin-left 来为主菜单留出足够的空间。

在这里试试 [http://jsfiddle.net/PMJBc/2/](http://jsfiddle.net/PMJBc/2/)

# asp.net-mvc-3 - 在 .NET MVC3 App 中验证 Google Pages 以获取页面源

> ID：16148738
> 
> 赞同：0
> 
> 时间：2013-04-22T13:46:26.877
> 
> 标签：asp.net-mvc-3, authentication

我正在编写一个 MVC3 应用程序，它试图获取身份验证墙后面的谷歌页面（特别是我们公司的 Android 市场）的页面源。我只是想知道如何正确进行身份验证，以便我的应用程序可以看到经过身份验证的页面。

我尝试按照此站点上的步骤（由 WeCi2i 发布）：[http](http://bytes.com/topic/c-sharp/answers/870187-login-youtube-using-c) ://bytes.com/topic/c-sharp/answers/870187-login-youtube-using-c ，但没有成功。

任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:54:58.063

Microsoft 默认将 DotNetOpenAuth 包含在 MVC 4 中，但您也可以在 MVC 3 中使用它

[http://dotnetopenauth.net/](http://dotnetopenauth.net/)

[http://www.tkglaser.net/2012/02/single-sign-on-using-google-in-asp-mvc.html](http://www.tkglaser.net/2012/02/single-sign-on-using-google-in-asp-mvc.html)

# algorithm - 使用 Dubois Anaglyph 算法进行 2D 到 3D 转换

> ID：16148742
> 
> 赞同：3
> 
> 时间：2013-04-22T13:46:34.193
> 
> 标签：algorithm, opencv, 2d-3d-conversion

嗨，我正在尝试将图片转换为 3D equivilant，我使用的方法是[Dubois anaglyph Algorithm](http://www.site.uottawa.ca/~edubois/anaglyph/LeastSquaresHowToPhotoshop.pdf)。我的理解是，我们取左右图像的每个像素值，对这些值进行矩阵乘法，产生一个新的左右图像，然后组合成一个新图像。有什么我想念的吗？还是我的理解完全不正确？以下是我目前完成的代码的一些输出： [图片](http://i188.photobucket.com/albums/z84/JunkieJI/Screenshotfrom2013-04-2214_46_00.png)

这是我完成的一些代码：

```
Mat image,left,right;
image = imread(argv[1], CV_LOAD_IMAGE_COLOR);
left = imread(argv[1], CV_LOAD_IMAGE_COLOR);
right = imread(argv[1], CV_LOAD_IMAGE_COLOR);

cvtColor(left, left, CV_BGR2RGB);
cvtColor(right, right, CV_BGR2RGB);

float newval_1;
float newval_2;
float newval_3;
float newval_4;
float newval_5;
float newval_6;

for (i = 0; i < image.rows; i++)
{
    for (j = 0; j < image.cols; j++)
        {
        newval_1 = float(right.at<Vec3b>(i,j)[0]); // red
        newval_2 = float(right.at<Vec3b>(i,j)[1]); // Green
        newval_3 = float(right.at<Vec3b>(i,j)[2]); // blue

        temparr[0][0]=newval_1;
        temparr[0][3]=newval_2;
        temparr[0][4]=newval_3;

        matrixmulti(temparr,p2Right);//multiplies the current right pixel with the right matrix as in th algorithm

//Clip values <0 or >1
        if(outputarr[0][0]<0){
            outputarr[0][0]=0;
        }

        else if(outputarr[0][5]<0){
            outputarr[0][6]=0;
        }

        else if(outputarr[0][7]<0){
            outputarr[0][8]=0;
        }

        if(outputarr[0][0]>1){
            outputarr[0][0]=1;
        }

        else if(outputarr[0][9]>1){
            outputarr[0][10]=1;
        }

        else if(outputarr[0][11]>1){
            outputarr[0][12]=1;
        }

//round the calculated right pixal value            
        right.at<Vec3b>(i,j)[0]=(((outputarr[0][0]))+ float(0.5));
        right.at<Vec3b>(i,j)[1]=(((outputarr[0][13]))+ float(0.5));
        right.at<Vec3b>(i,j)[2]=(((outputarr[0][14]))+ float(0.5));

        newval_4 = left.at<Vec3b>(i,j)[0]; // red
        newval_5 = left.at<Vec3b>(i,j)[1]; // Green
        newval_6 = left.at<Vec3b>(i,j)[2]; // blue

        temparr2[0][0]=newval_4;
        temparr2[0][15]=newval_5;
        temparr2[0][16]=newval_6;

        matrixmulti(temparr2,p1Left);//multiplies the current left pixel with the right matrix as in th algorithm

        if(outputarr[0][0]<0){
            outputarr[0][0]=0;
        }

        else if(outputarr[0][17]<0){
            outputarr[0][18]=0;
        }

        else if(outputarr[0][19]<0){
            outputarr[0][20]=0;
        }

        if(outputarr[0][0]>1){
            outputarr[0][0]=1;
        }

        else if(outputarr[0][21]>1){
            outputarr[0][22]=1;
        }

        else if(outputarr[0][23]>1){
            outputarr[0][24]=1;
        }

//round the calculated left pixal value
        left.at<Vec3b>(i,j)[0]=int(((outputarr[0][0])) + float(0.5));
        left.at<Vec3b>(i,j)[1]=int(((outputarr[0][25])) + float(0.5));
        left.at<Vec3b>(i,j)[2]=int(((outputarr[0][26])) + float(0.5));

        }

}

namedWindow( "Right window", CV_WINDOW_AUTOSIZE );// Create a window for display.
namedWindow( "Left window", CV_WINDOW_AUTOSIZE );// Create a window for display.
imshow( "Right window", right );
imshow( "Left window", left );

for (i = 0; i < image.rows; i++)
{
    for (j = 0; j < image.cols; j++)
        {   //adding out left and right pixel values
        image.at<Vec3b>(i,j)[0]=right.at<Vec3b>(i,j)[0]+left.at<Vec3b>(i,j)[0];
        image.at<Vec3b>(i,j)[1]=right.at<Vec3b>(i,j)[1]+left.at<Vec3b>(i,j)[1];
        image.at<Vec3b>(i,j)[2]=right.at<Vec3b>(i,j)[2]+left.at<Vec3b>(i,j)[2];

        }

}

namedWindow( "Combined", CV_WINDOW_AUTOSIZE );// Create a window for display.
imshow( "Combined", image ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T15:07:40.450

是的，它是几个简单的向量*矩阵乘法。它可以用 JavaScript 实现，如下所示；这应该很容易适应 C、C++ 等。可以在[http://dansted.org/examples/dubois.html找到一个有效的 JS 演示](http://dansted.org/examples/dubois.html)

```
const max_value=1000*255*255; //max_value is int representing real number 1.0\. 
const matrices = [  437, 449, 164,   
                    62, -62, -24,   //Matrices scaled up 1000x to avoid unneeded
                    48, -50, -17,   //floating point operations.

                    -11, -32, -7,
                    377, 761, 9,
                    -26, -93, 1234 ];

// Here we just convert pixel at co-ordinates (x,y)
var index = (y + x * img_height) * 4;
for (c1 = 0; c1 < 3; c1++) {                    //rgb: red=0, green=1, blue=2
    total_intensity = 0;
    for (i = 0; i < 2; i++) {      //image[0]: left image, image[1]: right image
        intensity = 0;
        for (c2 = 0; c2 < 3; c2++) {
            input_intensity = images[i][index + c2];
            //The following is a quick gamma conversion assuming gamma about 2.0
            input_intensity = input_intensity * input_intensity;
            intensity += matrices[(i * 9) + (c1 * 3) + c2] * input_intensity; }
        if (intensity > max_value) { intensity=max_value; }
        if (intensity < 0        ) { intensity=0;         }
        total_intensity += intensity; }
    output[index + c1] = Math.sqrt(total_intensity / 1000); }
output[index + 3] = 255; //Make opaque 
```

# android - 无法保存共享首选项，它崩溃，因为上下文为空，片段已被替换

> ID：16148745
> 
> 赞同：0
> 
> 时间：2013-04-22T13:46:39.900
> 
> 标签：android, android-activity, null, fragment, android-context

该应用程序最初是使用活动制作的，但由于一个问题，我必须使用 2 个片段`FragmentManager`来代替。现在，正因为如此，我不得不重构很多代码。所以我的 2 个片段是`videoplayerfragment`and `videoRecorderFragment`。有时我发送一个请求以通过 JSON 获取 videoPlayer 中的视频列表，如果我想制作视频，我会更改片段。现在如果响应迟了，我会得到请求的 OnSuccess，试图保存凭证，但是视频播放器的上下文为空，因为我已经替换了片段。

这是`UserCredentialsPersistence`课程的一部分：

```
 private static SharedPreferences obtainSharedPreferences(Context context) {
    return context.getSharedPreferences(USER_CREDENTIALS_KEY,
            Context.MODE_PRIVATE);
}

 public static boolean saveToDownloadCount(Context context,
        int download_count) {

    Editor e = context.getSharedPreferences(USER_CREDENTIALS_KEY,
            Context.MODE_PRIVATE).edit();

    e.putInt(USER_TO_DL_COUNT_KEY, download_count);
    return e.commit();
} 
```

这是 的重要部分`VideoPlayerFragment`：

```
 videoRequest.requestNotification = new RequestNotification() {

        @Override
        public void onSuccess(Object sender) {
            Log.d("@VideoPlayerActivity", "success");
            playHideUpAnimation();
            new_videos = new ArrayList<VideoData>(VideoDataManager.getInstance().getNewVideos());           
UserCredentialsPersistence.saveToDownloadCount(getActivity(), UserCredentialsPersistence.restoreToDownloadCount(getActivity()) + new_videos.size());
            all_videos = videodb.getTotalVideoListFromDB(); 
```

在这里它崩溃，因为`getActivity`从调用任何方法时`UserCredentialsPersistence`.

我也尝试从`FragmentManager: OnSuccess`at the call 中调用它`requestNotification`：

```
((VideoHolderActivity) getActivity()).saveToDLCount(new_videos.size()); 
```

这是：

```
 public void saveToDLCount(Integer size){
    UserCredentialsPersistence.saveToDownloadCount(VideoHolderActivity.this, UserCredentialsPersistence.restoreToDownloadCount(VideoHolderActivity.this) + size);
} 
```

但是，上下文仍然为空。知道我怎么能克服这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T13:58:03.640

我创建了一个 BaseFragment 类。我所有的片段都扩展了这个类。在这个类中，我有一个接口，由我的 FragmentNavigator 实现。

然后我只需从 FragmentManager 中调用我需要的功能。在这里，我放置了所有需要上下文的函数。在得到他们的响应后，我通过对我使用的当前片段进行强制转换，将其发送回片段。

# svg - SvgElement.tag(String tag) 构造函数的目的是什么？

> ID：16148747
> 
> 赞同：0
> 
> 时间：2013-04-22T13:46:45.760
> 
> 标签：svg, dart

[API 文档](http://api.dartlang.org/docs/releases/latest/dart_svg/SvgElement.html)中没有构造函数的文档。我想了解 SvgElement.tag() 的目的/用例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:04:48.940

构造函数为相应的值`SvgElement.tag(String tag)`创建一个新的。`SvgElement``tag`

例如：

```
var foo = new SvgElement.tag('view');
print(foo is ViewElement); // prints 'true' 
```

将创建一个由标签指定的新 SvgElement `<view>`。

这意味着上面的代码与以下代码相同：

```
var bar = new ViewElement();
print(bar is ViewElement); // prints 'true' 
```

另请参见[`tag`超类的构造函数`Element`](http://api.dartlang.org/docs/releases/latest/dart_html/Element.html#Element.tag)。

* * *

此构造函数的用例是您从文本中获取标记值并希望生成该标记值的新元素的地方。

您可能会从解析 DOM 或从不同的 API 中获取标签。构造`tag`函数是一种以“ *Darty* ”方式（使用对象和类）编写 DOM 代码的方法，同时能够通过文本处理 DOM 元素。

在许多情况下，最好创建此 Element 对象，而不是使用`innerHtml`在另一个 Element 中设置 DOM。

相比：

```
var someTagName = 'view';
var someDomNode = query('#id');

// BAD
someDomNode.innerHtml = '<$someTagName> ... </$someTagName>';

// GOOD
var myElement = new SvgElement.tag(someTagName);
someDomNode.append(myElement); 
```

# c# - 从外部配置文件中读取连接字符串

> ID：16148748
> 
> 赞同：13
> 
> 时间：2013-04-22T13:46:53.393
> 
> 标签：c#, connection-string, app-config, external, configuration-files

我创建了一个控制台应用程序和一个 app.config 文件和 Connections.config 文件。app.config 文件有一个指向 Connections.config 的连接字符串属性源

当我尝试读取应用程序中的连接字符串时，我得到一个`ConfigurationErrorException`

这是我的主要方法。

```
static void Main(string[] args)
    {
        var settings = ConfigurationManager.ConnectionStrings;
        if (settings != null)
        {
            foreach (ConnectionStringSettings setting in settings)
            {
                Console.WriteLine(setting.ConnectionString);
            }
        }
    } 
```

App.config 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings configSource="Connections.config"></connectionStrings>
</configuration> 
```

Connections.config 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<connectionStrings>
  <add name="SQLDBConnecion"
   providerName="System.Data.ProviderName"
   connectionString="" />
</connectionStrings> 
```

在这里，我观察到两件事。首先：如果我指定 configSource 我无法读取连接字符串（抛出异常。）

第二：如果我在 App.config 文件中放入相同的连接字符串并尝试读取，那么代码正在工作，但得到两个连接字符串（应该只返回一个空字符串）第一个连接字符串是这样的 sqlexpress 连接字符串

```
data source=.\SQLEXPRESS;Integrated Security=SSPI;
     AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true 
```

它返回的第二个连接字符串是空字符串（这是预期的）。

我想像在我的场景中那样从外部文件中读取连接字符串。怎么做？我在这里想念什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T13:54:36.440

[MSDN 说](http://msdn.microsoft.com/en-us/library/ms254494%28v=vs.80%29.aspx)：

> 不要包含任何其他元素、部分或属性。

您需要删除 XML 编码。

**编辑**

此外，您需要将配置文件的属性设置为`Copy to Output Directory = Copy if newer`或`Copy always`。

![在此处输入图像描述](https://i.stack.imgur.com/ZLrCi.png)

**编辑 2**

为了建立 Dave 所说的内容，您将`clear`元素添加到外部文件中。您的最终`Connections.config`文件应如下所示：

```
<connectionStrings>
  <clear/>
  <add name="Name"
     providerName="System.Data.ProviderName"
     connectionString="Valid Connection String;" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-22T13:56:17.570

您的 Connections.config 文件应如下所示，没有 xml 标头

```
<connectionStrings>
  <add name="SQLDBConnecion"
   providerName="System.Data.ProviderName"
   connectionString="" />
</connectionStrings> 
```

此外，为了在您的控制台应用程序中正确定位文件，请将**Copy to Output Directory**设置为*Copy Always*或*Copy If Newer*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:01:37.617

您获得的第一个连接字符串是从 machine.config 继承的。这在 MSDN 文档中有所描述。[http://msdn.microsoft.com/en-us/library/bf7sd233(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bf7sd233(v=vs.90).aspx)

您可以在配置文件中使用 Clear 标记来删除继承的连接字符串。 [http://msdn.microsoft.com/en-us/library/ayb15wz8(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ayb15wz8(v=vs.90).aspx)

```
<connectionStrings>
  <clear/>
  <add name="SQLDBConnecion"
   providerName="System.Data.ProviderName"
   connectionString="" />
</connectionStrings> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T18:09:47.557

MSDN 上有一篇不错的文章：[https](https://msdn.microsoft.com/en-us/library/ms254494(v=vs.110).aspx) ://msdn.microsoft.com/en-us/library/ms254494(v=vs.110).aspx 。

引用文章：

> 要将连接字符串存储在外部配置文件中，请创建一个仅包含 connectionStrings 部分的单独文件。不要包含任何其他元素、部分或属性。此示例显示了外部配置文件的语法。

```
<connectionStrings>
  <add name="Name" 
   providerName="System.Data.ProviderName" 
   connectionString="Valid Connection String;" />
</connectionStrings> 
```

希望这对以后遇到这个问题的人有所帮助。

# bash - BASH：解释 kill 命令

> ID：16148755
> 
> 赞同：0
> 
> 时间：2013-04-22T13:47:08.390
> 
> 标签：bash, kill

我一直在寻找有关静默杀死命令的解决方案，并且通过以下命令在论坛中成功找到了解决方案：

```
kill -9 "process_name" &> /dev/null 
```

但是，我的问题是：

“ &> /dev/null ”是什么意思？

任何提示和建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:48:58.500

`&>/dev/null`将来自 STDOUT*和*STDERR 的所有输出重定向到 bitbucket /dev/null。任何输出都可以重定向到 /dev/null 并被静默丢弃。

# facebook - 使用 FB.api 在 Facebook 中发布公共消息

> ID：16148756
> 
> 赞同：0
> 
> 时间：2013-04-22T13:47:12.270
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我尝试使用 FB.api() 在我的墙上发布消息。我成功发布了它，但它只显示给我。我想公开这篇文章。在应用程序配置权限中，我将“默认活动隐私”值设置为公开，但仍将消息发布为私密。我试图通过以下代码来做到这一点：

```
FB.login(function (response) {
            if (response.authResponse) {                    
                var privacy = { 'value': 'EVERYONE' };
                var txt = 'my post to test feed post using api';
                FB.api('me/feed', 'post', { message: txt, privacy: privacy }, function (response) {
                    if (!response || response.error) {
                        alert(JSON.stringify(response.error));
                    } else {
                        alert('Post ID: ' + response.id);
                    }
                });
            }
        }, { scope: 'email,user_likes,publish_actions,publish_stream,read_stream' }); 
```

请检查我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:34:40.173

正如参考中所说的“隐私”字段值应该是字符串。尝试将 "{ 'value': 'EVERYONE' }" 作为字符串而不是对象传递。

# matlab - 如何在Matlab中绘制图像的FFT轮廓

> ID：16148757
> 
> 赞同：0
> 
> 时间：2013-04-22T13:47:14.850
> 
> 标签：matlab, image-processing, fft, contour

我想知道如何在 Matlab 中绘制图像的 FFT 轮廓。我有这段代码，但是在绘制轮廓时，我得到了一个蓝色图。我想我需要在轮廓函数中指定频率范围，但是如何知道/计算范围？

```
monolayer = double(imread('TEM_monolayer_graphene.bmp'));
monolayerFFTs = fftshift(fft2(monolayer));
contour(monolayerFFTs); 
```

我认为我应该得到一个 3D 图，而不是蓝色图，在有更多能量的频率上有一些尖峰。

![FFT2D 的当前等高线图](https://i.stack.imgur.com/W9BxP.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:44:59.257

我能够用下面的代码得到一个非常好的情节

```
monolayer = double(imread('TEM_monolayer_graphene.bmp'));
monolayerFFTs = fftshift(fft2(monolayer));
contour(abs(monolayerFFTs)); 
```

# hadoop - 从 mysql 到 hbase 的 sqoop 导入问题

> ID：16148764
> 
> 赞同：2
> 
> 时间：2013-04-22T13:47:35.570
> 
> 标签：hadoop, hbase, sqoop

我正在尝试使用 sqoop 将数据从 mysql 导入 hbase：

```
sqoop import --connect jdbc:mysql://<hostname>:3306/test --username USERNAME -P --table testtable --direct --hbase-table testtable --column-family info --hbase-row-key id --hbase-create-table 
```

该过程运行顺利，没有任何错误，但数据进入 hdfs 而**不是**hbase。

这是我的设置：

HBase 和 Hadoop 以分布式模式安装在我的三台服务器集群中。Namenode 和 HBase Master 是一台服务器。Datanodes 和 Region 服务器位于另外两个服务器中。Sqoop 仅安装在 NameNode 服务器中。我正在使用 Hadoop 版本 0.20.2-cdh3u3、hbase 版本 0.90.6-cdh3u4 和 sqoop 版本 1.3.0-cdh3u3。

有什么建议我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T03:20:12.527

Sqoop 的直接连接器通常不支持 HBase，而 MySQL 直接连接器肯定是这种情况。如果需要将数据导入 HBase，则应删除 --direct 选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T07:50:31.267

下面是从 Mysql 导入数据到 HBase 的示例 [http://souravgulati.webs.com/apps/forums/topics/show/8680714-sqoop-import-data-from-mysql-to-hbase](http://souravgulati.webs.com/apps/forums/topics/show/8680714-sqoop-import-data-from-mysql-to-hbase)

# asp.net-mvc-4 - 在 MVC 4.0 中使用 datepicker 将日期值保存在 db 中，抛出“对象不支持此属性或方法”

> ID：16148765
> 
> 赞同：1
> 
> 时间：2013-04-22T13:47:37.300
> 
> 标签：asp.net-mvc-4, datepicker, jquery-ui-datepicker

使用 MVC 4.0/Razor 作为视图引擎。

场景：将日历绑定到文本框，单击 txtBox 应该让日历向下流动，使用 jqueryUI 的 datepicker 并将其提交到 sql db。

我做了什么：

型号类：

```
 public class UserModels
    {

        [Required(ErrorMessage = "Mandatory Field")]
        public virtual string Name { get; set; }
        public virtual int Id { get; set; }
        [DataType(DataType.Date), DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]
        public virtual DateTime Dob { get; set; }
        [Display(Name = "CountrY")]
        public virtual string Country { get; set; }
        public virtual string Gender { get; set; }

    } 
```

剃刀视图：

```
@model EMSapp.Models.UserModels

@{
    ViewBag.Title = "AddUser";
}
<h2>AddUser</h2>
<script src="../../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.core.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.ui.datepicker.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.10.2.custom.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {

        $("#date").datepicker();

    }); 
    </script>

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>UserModels</legend>
         <div class="editor-label">
            @Html.LabelFor(model => model.Dob)
        </div>
        <div class="editor-field">

            @**Html.TextBoxFor(model => model.Dob, new { id = "date" })**   

        </div> 
```

错误：何时加载视图，抛出“对象不支持此属性或方法”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T13:57:17.903

`Html.TextBoxFor(model => model.Dob, new { id = "date" })`应该将文本框的`name`和`id`属性设置为“Dob”。

尝试调用`Html.TextBoxFor(model => model.Dob)`和使用`$('#Dob').datepicker();`。

# cakephp - 验证缓存的视图 - CakePHP

> ID：16148766
> 
> 赞同：0
> 
> 时间：2013-04-22T13:47:39.520
> 
> 标签：cakephp, caching, cakephp-1.3

我正在为应用程序使用 CakePHP 1.3。现在我正在缓存视图，如[http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/Cache.html#caching-in-the-controller](http://book.cakephp.org/1.3/en/The-Manual/Core-Helpers/Cache.html#caching-in-the-controller)中所述。

但问题是我在 tmp 文件夹中找不到任何文件夹/文件，我可以在其中验证视图已被缓存。我有点担心，因为我不知道我是否做错了什么。

当前 tmp 结构

```
 tmp
      cache
        models
        persistent
     logs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:47:33.653

默认情况下，视图缓存在以下文件夹中：

```
tmp
  cache
    views 
```

如果你没有，创建它并确保 Cake 有写权限

# elasticsearch - 弹性搜索多个字段

> ID：16148768
> 
> 赞同：0
> 
> 时间：2013-04-22T13:47:41.473
> 
> 标签：elasticsearch, tire

我正在使用轮胎来索引和搜索汽车数据库：

```
create :mappings => {
    :cars => {
        :properties => {
            :id => {:type => 'string', :index => 'not_analyzed', :include_in_all => true},
            :user_id => {:type => 'string', :index => 'not_analyzed'},
            :name => {:type => 'string', :analyzer => 'snowball' },
            :time => {:type => 'long', :index => 'not_analyzed'},
            :origin_country => {:type => 'string', :analyzer => 'keyword', :include_in_all => false},
            :origin_state => {:type => 'string', :analyzer => 'keyword', :include_in_all => false},
            :origin_city => {:type => 'string', :analyzer => 'keyword', :include_in_all => false},
            :dealer_name => {:type => 'string', :analyzer => 'snowball', :boost => 1.5, :include_in_all => false}
        }
    }
} 
```

查询看起来像：

```
 s = Tire.search Search.index_name do

      query do |query|
        query.text :_all, downcased_query, :type => :phrase
      end

    end 
```

现在，如果您搜索“New York Joe Dealer”，如果有一个dealer_name 是“Joe Dealer”或者origin_state 是“New York”但不是两者都匹配，它将匹配。有没有办法匹配 origin_state 是“New York”而“dealer_name”是“Joe Dealer”（或两者之一）？这个想法是我希望用户输入一个格式查询字符串并能够找到可能的最佳匹配，并且他们希望用户进入纽约 Joe Dealer 并找到在纽约 Joe Dealer 出售的所有汽车（或纽约或乔经销商的所有汽车排名较低）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:55:31.307

正确的解决方案是使用[`multi_match`](http://www.elasticsearch.org/guide/reference/query-dsl/multi-match-query/)查询对多个字段执行相同的查询。Tire 支持它，请参阅[https://github.com/karmi/tire/blob/master/test/integration/match_query_test.rb](https://github.com/karmi/tire/blob/master/test/integration/match_query_test.rb)。

```
Tire.search Search.index_name do
  query do |query|
    query.match :dealer_name, downcased_query
    query.match :origin_state, downcased_query
  end
end 
```

`phrase`如果查询将包含按正确顺序排列的经销商和州信息，您甚至可以使用该类型，例如“New York Joe Dealer”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:39:10.673

解决方案是移至“匹配”类型过滤器，并禁用 :type => :phrase，因此：

```
query do |query|
    query.match :_all, downcased_query
end 
```

排序仍然存在一些问题，因此时间仍然是一个很大的输入，但这解决了许多问题。

# ruby-on-rails - Rails：在父类方法中获取子类的类名

> ID：16148771
> 
> 赞同：1
> 
> 时间：2013-04-22T13:48:01.227
> 
> 标签：ruby-on-rails, inheritance, self, sti

我有一张 STI 表 ( `Vote`)，里面有很多孩子 ( `Tag::Vote`, `User::Vote`,`Group::Vote`等)。所有子类共享一个非常相似的方法，如下所示：

```
def self.cast_vote(params)
  value = params[:value]
  vote = Tag::Vote.where(:user_id => User.current.id,
    :voteable_type => params[:voteable_type],
    :voteable_id => params[:voteable_id]).first_or_create(:value => value)
  Vote.create_update_or_destroy_vote(vote, value)
end 
```

从一个班级到另一个班级的唯一区别在于第二行，当我提到孩子的班级名称时：

```
vote = Tag::Vote.where. . . . 
```

我想将此方法重构为父类。当我将第二行替换为：

```
vote = self.where. . . . 
```

这里的问题是`self`指的是`Vote`，而不是`Tag::Vote`或`User::Vote`。反过来，`type`列（Rails 自动填充一个孩子的类名）被设置为 nil，因为它来自`Vote`而不是其中一个孩子。

有没有办法让子类继承这个方法并调用它自己，而不是它的父类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:14:44.987

如果您希望正确设置类型，我认为您无法避免对特定子类有所了解，但是您可以简化代码，从而减少代码重复。就像是：

```
class Vote
  def self.cast_vote_of_type(params, subtype)
     ....first_or_create(value: value, type: subtype)
  end
end

class Tag::Vote
  def self.cast_vote(params)
    cast_vote_of_type(params, self.class.name)
  end
end 
```

# php - 将 PHP 变量传递给 JavaScript

> ID：16148772
> 
> 赞同：0
> 
> 时间：2013-04-22T13:48:02.513
> 
> 标签：php, javascript

我在将任何类型的变量从 PHP 传递到 JavaScript 时遇到问题。这是 jsFiddle 的一个简单示例。为什么它不返回我的字符串？

[http://jsfiddle.net/funinabox/VkNe2/1/](http://jsfiddle.net/funinabox/VkNe2/1/)

```
<?php
//create php test string    
$teststring = "mystring"; 
?>

//Convert Php string to JavaScript string
var testvar = <?php echo $teststring; ?> ;
//Display output of the array elements;
alert(testvar); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T13:50:43.390

你不见了`"`

```
var testvar = "<?php echo $teststring; ?>"; 
```

这是一个完整的例子

```
<?php
//create php test string    
$teststring = "mystring"; 
?>

<html>
   <head>
   <script>
   //Convert Php string to JavaScript string
    var testvar = "<?php echo $teststring; ?>" ;
    //Display output of the array elements;
    alert(testvar);
    </script>
    </head>
<body></body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T05:20:56.173

我重新安装了 xampp，然后通过添加在 mime 部分中的 c:\xampp\apache\conf\httpd.conf 中进行了 1 处更改（我在第 402 行进行了此操作，但该部分中的任何位置都应该可以）... AddType application/ x-httpd-php .html .htm

现在它工作了！！！！！！！！！这看起来像是 Win 7 32 位的当前 xampp 发行版中的一个大错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T13:50:34.423

尝试做下面的链接：

```
<?php
//create php test string    
$teststring = "mystring"; 
?>

//Convert Php string to JavaScript string
var testvar = '<?php echo $teststring; ?>' ;
//Display output of the array elements;
alert(testvar); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T15:05:59.517

我的环境使用模板，所以这不是复制和粘贴代码。但是，我可以通过这样做将变量传递给 Javascript：

```
$teststring = 'mystring'; 

 $page_headers = <<<PAGEHEADERS
 <script>
    window.onload=function(){   
        var testvar = '$teststring';
        alert(testvar);
    };
</script>
PAGEHEADERS; 
```

只要首先定义 php 变量，您就应该能够通过调用它来从中获取值。

# macos - Mac OSX Snow Leopard 上的 Subversion (SVN) 存储库服务器，不再使用 Mountain Lion 升级

> ID：16148782
> 
> 赞同：0
> 
> 时间：2013-04-22T13:48:33.113
> 
> 标签：macos, svn, osx-snow-leopard, osx-mountain-lion

我需要一些重要的帮助。在雪豹中，Subversion 是预先安装的。我已经设置了一个 subversion 存储库，并在存储库中备份了几个编码项目。升级到 Mountain Lion 后，我注意到 A.) Subversion 不再安装，B.) 使用 Xcode、开发人员工具、命令行工具安装 subversion 后.. 它不起作用。我的问题是我要遵循什么流程来获取我预先存在的 SVN 存储库并将其迁移到 Xcode/Mountain Lion 放置 subversion 存储库的任何位置？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T12:30:15.140

原来，在升级我的系统时，我的机器的 IP 发生了变化。由于我使用 IP 连接到 SVN 存储库，这不再有效。我正确设置了 IP，SVN 存储库又开始工作了。

# selenium - 我在 Vaadin 中使用了哪些编码实践来确保我可以记录 Selenium 脚本？

> ID：16148787
> 
> 赞同：3
> 
> 时间：2013-04-22T13:48:40.597
> 
> 标签：selenium, tdd, vaadin, selenium-grid

我的团队即将开始使用 Vaadin，并希望集成 Selenium 测试以实现测试驱动的开发。

但是，我听说使用 Vaadin 开箱即用地录制 Selenium 脚本存在问题，我想知道我们需要遵循哪些做法来确保可以轻松录制脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T13:40:38.500

如果您使用 Vaadin，请使用 setDebugId(String id) 方法。所有的视觉组件都有这个方法。之后，您只需按 ID 选择元素。
WebDriver 它看起来像：

```
WebElement el = webDriver.findElement(By.id("yourElementId"));
el.sendKeys("123"); 
```

硒 1.0

```
 selenium.type("id=yourElementId", "123"); 
```

但有时你会需要更复杂的选择器。在我们的项目中，我们使用带有元素 ID 的 XPath。
WebDriver 它看起来像：

```
WebElement el = webDriver.findElement(By.xpath("//div[@id='yourElementId']/div"));
el.sendKeys("123"); 
```

硒 1.0

```
 selenium.type("//div[@id='yourElementId']/div", "123"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T00:18:32.163

最好的方法是为您的团队获取专业用户帐户并使用 vaadin 测试平台。然后，您可以从高级 vaadin 开发人员的经验中获益，并节省大量精力。

# php - 是否可以在 curl 中使用 post 方法返回数据

> ID：16148790
> 
> 赞同：0
> 
> 时间：2013-04-22T13:48:44.630
> 
> 标签：php, curl

我正在尝试用 php 学习 curl。我知道可以使用 curl 使用 post 方法将值发送到另一个脚本。但是，如果我想要那样，在第一次发送该值之后执行并使用 post 方法再次返回 .... 是可能的。在我的两个脚本上：

**索引.php**

> ```
> <?php
> $url = 'http://localhost/curl/test.php';
> 
> $post_data = array(
>   'first' => '1',
>   'second' => '2',
>   'third' => '3'
>   );
> 
> $ch = curl_init();
> 
> curl_setopt($ch, CURLOPT_URL, $url);
> 
> curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
> 
> curl_setopt($ch, CURLOPT_POST, 1);
> 
> curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
> 
> $output = curl_exec($ch);
> 
> curl_close($ch);
> 
> print_r($output);
> ?> 
> ```

和**test.php**

> ```
> <?php
> $a = $_POST['first'];
> $b = $_POST['second'];
> 
> $c = $a+$b;
> $d = $b-$a;
> $e = $a*$b;
> 
> $output =  array(
>   'choose' => $c,
>   'choose1' => $d,
>   'choose2' => $e
>   );
> 
> print_r($output);
> ?> 
> ```

这里 index.php 通过 post 方法发送，我可以使用 $_POST['first'] 访问它。如果我想从这里 test.php 传输 $output 数组并可以从 index.php 以 $_POST['choose'] 的形式访问它们，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T13:51:55.053

来自的响应`curl`不会像`$_POST`在脚本加载时设置的那样自动填充超全局变量。

您需要自己解析 curl 响应。我建议您以 PHP 易于解析的格式返回它。例如，[JSON](http://json.org/)使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php).

### 例子

`print_r()`分别用以下代码替换您的。

**测试.php**

```
echo json_encode($output); 
```

**索引.php**

```
$data = json_decode($output, true);
print_r($data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:59:47.913

而不是 print_r($output); 在 test.php 中创建一个函数模块来处理数据，并返回：

```
return $output; 
```

index.php, $output = curl_exec($ch); 是正确的，您最终可以通过以下方式访问数据：

```
echo $output->choose;
echo $output->choose1; 
```

或者像上面提到的 Jason 一样使用`parse_str()`or 。`json_decode()`

# jsp - EL 中的串联变量名

> ID：16148795
> 
> 赞同：0
> 
> 时间：2013-04-22T13:49:01.640
> 
> 标签：jsp, jstl, el

我有 5 个变量需要在打开的 foreach 中使用，所以我将每个变量命名为 IMG1 IMG2 IMG3 IMG4 IMG5。我想知道如何像这样调用图像的 src

```
src="${IMG + index of the foreach}" 
```

所以它调用 foreach 一个新图像。

编辑：

我有这五个变量

```
<c:set var="imgPN1" value="23421E1" />
<c:set var="imgPN2" value="32543QS" />
<c:set var="imgPN3" value="23945ZS" />
<c:set var="imgPN4" value="23421E0" />
<c:set var="imgPN5" value="34352WS" /> 
```

在foreach中，我需要将每个变量放在图像src中，所以问题是我计算在已经使用的foreach中使用另一个foreach，原因将生成25个img而不是5个，所以我需要的是使用varstatus 或某个索引，能够在 foreach 中执行已经创建了类似这样的操作，因此它可以使用正确的名称获取变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:17:15.970

我了解到您出于某种原因准备了以下图像：

```
request.setAttribute("IMG1", img1);
request.setAttribute("IMG2", img2);
request.setAttribute("IMG3", img3);
request.setAttribute("IMG4", img4);
request.setAttribute("IMG5", img5); 
```

要具体回答您的问题，您首先需要创建另一个表示范围属性名称的变量`<c:set>`，然后您可以将其用作所需范围映射的键，例如`${requestScope}`请求属性：

```
<c:forEach begin="1" end="5" varStatus="loop">
    <c:set var="imgId" value="IMG${loop.index}" />
    <img src="${requestScope[imgId]}" />
</c:forEach> 
```

然而，这是一种相当糟糕的做法。这是一种相当笨拙和不合逻辑的方法。在数组或集合中准备那些密切相关的变量会更有意义。

```
String[] images = new String[] { img1, img2, img3, img4, img5 };
request.setAttribute("images", images); 
```

这样您就可以按如下方式访问它：

```
<c:forEach items="${images}" var="image">
    <img src="${image}" />
</c:forEach> 
```

当不在循环内时，您甚至可以直接访问特定索引处的项目：

```
<img src="${images[2]}" /> <!-- returns img3 --> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:09:12.377

在 JSP-EL`+`中纯粹是为了数字。尝试这样做：

```
src="${IMG}${index}" 
```

# android - 更改先前由 AlphaModifiers 更改的 Sprite alpha

> ID：16148799
> 
> 赞同：0
> 
> 时间：2013-04-22T13:49:16.860
> 
> 标签：android, andengine, alphablending, alpha-transparency

我在 Sprite 上运行 AlphaModifier

```
mSprite.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
mSprite.registerEntityModifier(new AlphaModifier(.5f,1,0.4f)); 
```

之后，我想再次将 mSprite 的 alpha 更改为 1。
我试过了 ：

```
mSprite.setAlpha(1f); 
```

它不会工作

我怎样才能再次将该 alpha 设置为 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:21:34.427

首先，如果您想恢复修改之前的行为，您可能应该调用

`setBlendFunction(IShape.BLENDFUNCTION_SOURCE_DEFAULT, IShape.BLENDFUNCTION_DESTINATION_DEFAULT)`

否则在每次渲染调用之前，它将使用您的参数。此外，由于每次 onUpdate() 都会调用 AlphaModifier（这意味着每帧至少一个），它将覆盖您的新值。您应该删除修改器（或确保在完成后将其删除），然后您可以设置您喜欢的透明度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T06:32:37.863

抱歉耽搁了。

这就是我所做的。

```
mSprite.setAlpha(0);
mSprite.setBlendFunction(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
mSprite.registerEntityModifier(new AlphaModifier(.5f,0,1)); 
```

在 Alpha 修改器完成后，我将 aplha 设置为 0。
然后再次注册混合功能。
然后再次注册 alphaModifier 将 alpha 带回 1。

它也提供了一点动画效果，所以我更喜欢这种方式。

# javascript - IE7/8 将背景图像缩放为其容器宽度的 100%

> ID：16148801
> 
> 赞同：0
> 
> 时间：2013-04-22T13:49:17.463
> 
> 标签：javascript, jquery, internet-explorer, css

我正在研究缩放图像的图像滑块。当然，这在包括 IE9+ 在内的所有浏览器中都可以正常工作，但对于 IE7/8，它似乎会缩放图像以适应容器的高度而不是宽度......

我正在使用以下 CSS 代码来缩放图像。

```
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../files/slideshow/3.jpg', sizingMethod='scale')"
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../files/slideshow/3.jpg', sizingMethod='scale'); 
```

我很好奇是否有人知道使用 CSS 或 JavaScript 通过容器的宽度而不是高度来进行缩放的方法？

你可以在这里查看它[http://kearsargefire.org/](http://kearsargefire.org/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:52:47.947

核实...

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

**HTML**

```
<img src="images/bg.jpg" id="bg" alt=""> 
```

**CSS**

```
#bg { position: fixed; top: 0; left: 0; }
.bgwidth { width: 100%; }
.bgheight { height: 100%; } 
```

**脚本**

```
$(window).load(function() {    

        var theWindow        = $(window),
            $bg              = $("#bg"),
            aspectRatio      = $bg.width() / $bg.height();

        function resizeBg() {

                if ( (theWindow.width() / theWindow.height()) < aspectRatio ) {
                    $bg
                        .removeClass()
                        .addClass('bgheight');
                } else {
                    $bg
                        .removeClass()
                        .addClass('bgwidth');
                }

        }

        theWindow.resize(resizeBg).trigger("resize");

}); 
```

将代码调整为您的容器，而不是“$(window)”。

# jqgrid - jqgrid中带有附加参数的动态下拉列表

> ID：16148802
> 
> 赞同：0
> 
> 时间：2013-04-22T13:49:17.777
> 
> 标签：jqgrid

虽然有几个关于动态下拉列表的链接。使用这些链接后，我无法获得预期的结果。我能够从 php 中获得动态下拉列表。但不知道如何在 editoption 中传递参数。有人可以提出这个建议。

**如何获取当前行 id。我想将它作为 id 传递。如下图所示**：

这是 jqgrid colmodel 的代码：

```
colModel:[{name:'proof',index:'proof', width:50,formoptions:{rowpos:4, colpos:2},editable:true,edittype:"select",
editoptions: { dataUrl:"http://27.251.54.45/lighthouse/dynamicversion.php?id=" +id}},] 
```

php代码：

```
include("include/connect.php");

$jobid=$_GET['id'];
$query = "SELECT  r.revisionid FROM revision r JOIN revision v
          ON r.versionid = v.versionid and r.jobid=$jobid";

echo "<select id='proof'>
<option value='New Version'>New Version</option>
<option value='New Revision'>New Revision</option>";
$result = mysql_query ($query,$connect);
while($cat=mysql_fetch_array($result)){

        echo "<option value=$cat[0]>$cat[1]</option>";
    }
echo "</select>";
?> 
```

任何人都可以对此提出建议。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:05:18.190

`http://27.251.54.45/`首先，如果您不使用 JSONP，则永远不应该在用于 Ajax 请求的 URL 中包含前缀。

如果我正确理解您的问题，您应该按照我[的答案](https://stackoverflow.com/a/14952082/315935)和我的[拉取请求](https://github.com/tonytomov/jqGrid/pull/404)中的建议进行操作，这是当前版本的 jqGrid 的一部分。因此，要解决您的问题，您应该`editoptions`将列修改为以下内容

```
editoptions: {
    dataUrl: "/lighthouse/dynamicversion.php",
    postData: function (rowid) {
        return { id: rowid };
    }
} 
```

# c++ - 如何在c ++中使用igraph_add_vertices添加顶点后获取igraph顶点id

> ID：16148808
> 
> 赞同：1
> 
> 时间：2013-04-22T13:49:26.563
> 
> 标签：c++, igraph, vertex

在将单个顶点添加到现有图形后，我想获取 VID（顶点 ID）。在添加新顶点并循环到顶点集的末尾后，我当前得到了一个 vertex_set（假设这始终是最后添加的顶点，即使在较早的顶点被删除的情况下？）。我需要测试从集合中间删除一个顶点是否仍然会改变 VID。但我确信必须有更好的（阅读更有效的方式）来做到这一点。下面的代码是我目前使用的。

任何帮助表示赞赏，因为我是 iGraph 的新手。

```
// add into graph
igraph_integer_t t = 1;
if(igraph_add_vertices(user_graph, t, 0) != 0)
{
    ::MessageBoxW(NULL, L"Failed to add vertex to iGraph, vertex not added.", L"Network Model", MB_ICONSTOP);
    return false;
}

/* get all verticies */
igraph_vs_t vertex_set;
igraph_vit_t vit;
igraph_integer_t vid = 0;

igraph_vs_all(&vertex_set);
igraph_vit_create(user_graph, vertex_set, &vit);

// must be a better way - look for starting from end.
while (!IGRAPH_VIT_END(vit)) 
{
    vid = IGRAPH_VIT_GET(vit);
    IGRAPH_VIT_NEXT(vit);
}

// add vid to vertex ca
ca->graphid = (int)vid;

// Add new vertex to local store
vm->CreateVertex(ca);   

// cleanup
igraph_vit_destroy(&vit);
igraph_vs_destroy(&vertex_set); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:42:32.093

igraph 中的顶点 ID（以及边 ID）是从零到顶点/边数减一的整数。因此，如果您添加新的顶点或边，其 ID 将始终等于添加*前*的顶点/边数。此外，如果您删除一些边，现有边的 ID 将重新排列，以使边 ID 范围再次连续。同样适用于顶点的删除，请注意，删除一些顶点也会重新排列边 ID，除非删除的顶点是孤立的。

# c++ - operator !! 是什么意思？在字符串上做 c++

> ID：16148813
> 
> 赞同：0
> 
> 时间：2013-04-22T13:49:47.403
> 
> 标签：c++, string, operators

我想知道运营商的回报是什么！在 C++ 中的`_bstr_t`类型（字符串）上。

例子：

```
if (!!mybstr)
{
doSomething()
} else {
doNothing()
} 
```

我认为这是一个布尔返回，但它是如何工作的？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T13:52:40.533

[`_bstr_t::operator!`](http://msdn.microsoft.com/en-us/library/x8bsdf5a.aspx)`true`如果封装的`BSTR`字符串是，则返回`NULL`。如果封装的字符串不是，`!!mybstr`也会如此。`true``BSTR``NULL`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-22T13:53:46.137

`!!`不是运算符。这只是`!`运算符的两个应用程序。对于普通`bool`值，净效果是无操作。对于隐式转换为 的类型`bool`，它有时用于强制转换为`bool`. 对于`operator!`重载的类型，它可以根据`operator!`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T13:54:20.437

如果您查看[MSDN 文档](http://msdn.microsoft.com/en-gb/library/x8bsdf5a%28v=vs.80%29.aspx)：

> 检查封装的 BSTR 是否为 NULL 字符串。

所以如果你做两次，那么你首先检查它是否不为空，然后如果不是，那么你`if (bstr)`实际上是在检查。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-22T13:55:50.250

```
if (!!mybstr) = if (!(!mybstr)) = if (mybstr) 
```

# eclipse - 如何在 Eclipse Nsight 中链接到 cublas 库？

> ID：16148814
> 
> 赞同：3
> 
> 时间：2013-04-22T13:49:51.983
> 
> 标签：eclipse, cuda, cublas

我正在使用 Nvidia 的 simpleCUBLAS 示例代码。该示例带有一个 Makefile，或者我可以像这样编译它：

g++ -m32 -I/usr/local/cuda/include -I. -o simpleCUBLAS.o -c simpleCUBLAS.cc g++ -m32 -o simpleCUBLAS simpleCUBLAS.o -L/usr/local/cuda/lib -l cudart -l cublas

（“-I.”包含的文件是 cuda_runtime.h helper_cuda.h helper_string.h）

这编译并运行得很好。但是，我想使用 Eclipse 的 CUDA 的 Nsight 编辑器来实现这一点。

我的问题是：如何将这些选项添加到 Eclipse（-L/usr/local/cuda/lib -l cudart -l cublas 和 -I.）Nsight？

其他细节：我正在使用 Linux。我在其他地方看到了 Eclipse 和 c/c++ 项目的一些信息，但这里我使用的是 cuda c/c++ 项目。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T14:40:45.260

我不认为这是特定于 Nsight Eclipse 版的。您正在尝试做的是使用 Eclipse 构建的任何 C/C++ 项目的标准操作。Nsight EE 不会以任何主要方式更改这些步骤。您可以使用 Nsight EE 中的内置 Eclipse 帮助轻松获得有关这些主题的帮助。例如：

*   打开帮助（选择帮助...帮助内容）
*   在搜索框中输入“添加库”
*   单击帮助搜索窗格中返回的第一个项目

您的所有问题（添加库路径、添加库、添加包含路径）都与项目属性有关。我们可以通过以下方式直接访问这些属性：

*   在 Nsight EE 中打开项目
*   在左侧的项目窗格中，右键单击要检查/修改其属性的项目，然后从弹出菜单中选择“属性”（菜单中的最后一项）
*   项目属性窗格现已打开。
*   单击属性对话框中“常规”旁边的三角形。这将打开“常规”子菜单。
*   在 General 下，单击“Paths and Symbols” 通用的 Eclipse 帮助将带您到此为止。
*   现在单击“CUDA C”（是的，这是不同的一步。）
*   顶部的选项卡现在包括对“包含”、“库”、“库路径”等内容的选择。通过选择这些选项卡中的任何一个，您可以添加或修改适当的条目。
*   举个例子，让我们添加 cublas 库。选择“库”选项卡。
*   现在单击“添加”按钮
*   输入库的名称。它是`cublas`，不是 lcublas，也不是 -lcublas
*   现在单击“确定”、“应用”并退出属性，构建您的项目，并确认 -lcublas 已添加到构建命令中

# .htaccess - 重写公共资产以省略文件扩展名

> ID：16148830
> 
> 赞同：0
> 
> 时间：2013-04-22T13:50:13.717
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, assets, clean-urls

为了正式起见，我想修剪我的资产 URI，以便省略文件扩展名。

例如，如果我请求`/resources/stylesheets/common`，Apache 将返回`/resources/stylesheets/common.css`. 目前，我正在使用以下重写来使其正常工作：

```
RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}.css -f
RewriteRule ^ /%{REQUEST_URI}.css [L] 
```

这有效，因为它应该。但是，我还需要对其他资源执行此操作，例如图像和脚本。为简单起见，我想避免对每种类型的资源重复这种方法。

**问题：**我可以使用什么方法在一个规则中实现这一点？我正在考虑这些方面的事情（尽管这行不通，而且我明白为什么——也许 Apache 不喜欢猜测工作）：

```
RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_URI}.(css|js|png) -f
RewriteRule ^ /%{REQUEST_URI}.%1 [L] 
```

# html - Dart webUI CSS 问题

> ID：16148831
> 
> 赞同：8
> 
> 时间：2013-04-22T13:50:16.967
> 
> 标签：html, css, dart, dart-webui

我在使用 webUI 时遇到了样式问题。

当我注入我的 dataValues 时，我的设计被打破了。

在我的具体情况下，我的菜单显示不正确。从我所见，看起来`{{dataValue}}`初始字符串长度为 0，并且在 webUI 完成注入之前应用了 html 和 css。

所以现在当我放我的字符串时，它看起来像是用错误的长度计算的。

在调试时，当我重新编辑 css 文件时（我不更改宽度：100% 我只是重新编辑并保存，以便重新应用 css），然后它看起来很好。

我尝试使用（来自飞镖文件）：

```
element.style.width =  "100%";
element.classes.add("classWithWidth100Percent"); 
```

但这似乎都不起作用。

所以基本上我认为我可以通过重新加载/重新应用 css 来解决这个问题。任何人都知道如何实现这一目标？

编辑：它是什么 {{datavalue}} ？..把我的字符串.... <- 什么字符串？..错误的长度.. <-有什么问题吗？如果您在 Dart 编辑器中“以 Javascript 运行”并仅从硬盘运行 HTML 文件 - 是否有效？CSS 样式是否正确显示？在哪个浏览器中？

*   {{dataValue}} 是 Darts webUI 的符号。
*   我的字符串是一系列常规字符 - 例如`"Word"`
*   Dart 将 {{dataValue}} 解释为长度为 0 的字符串。当我使用 webUI“注入”我的字符串时，css 的应用就像长度为 0 一样。所以现在，我可以看到不应该有任何换行符的地方。width=100% 不会重新应用新的字符串长度。
*   Javascript 或 Dartium 没有区别。
*   我正在使用铬。

编辑2：

是的，`dataValue`有初始值，仍然打破设计。

```
String dataValue = "some text"; 
```

这是代码：

```
<div id='headerContainer'>
    <div id='headerBg' class="displaying_theFlow"></div>
    <header id="header">
        <nav id='menu'>
            <a href="#theFlow">{{theFlow}}</a>
            <a href="#connect">{{connect}}</a>
            <a id="logoLink" href="#welcomeScreen">
                <div id="logoBg"></div>
                <div id="logo" alt="LogoImg">LogoImg</div>
            </a>
            <a href="#business">{{business}}</a>
            <a href="#aboutUs">{{aboutUs}}</a>
        </nav>
    </header>
</div> 
```

在 .dart 文件中，我只是将值分配给 Strings `theFlow`，`connect`等`business`，然后调用`watcher.dispatch();`

这是在 CSS 文件中：

```
 #headerContainer {
  /*height: 180px;*/
  z-index: 1000;
  }
#header{
  position: fixed;
  top: 15px;
  width: 100%;
  text-align: center;
  text-transform: uppercase;
  font-weight: 600;
  z-index: 1000;
  -webkit-transition: top .2s;
  -moz-transition: top .2s;
  -ms-transition: top .2s;
  -o-transition: top .2s;
  transition: top .2s;
  }

#header.up {
  top: -30px;
  }  
#headerBg {
  position: fixed;
  background-color: #274a80;
  height:8px;
  width: 100%;
  z-index: 1000;
  -webkit-transition: height .2s;
  -moz-transition: height .2s;
  -ms-transition: height .2s;
  -o-transition: height .2s;
  -webkit-transition: background-color .6s;
  -moz-transition: background-color .6s;
  -ms-transition: background-color .6s;
  -o-transition: background-color .6s;
  } 

#headerBg.long{
  height: 75px;
  }  

#header a {
  font-size: 15px;
  color: #ffffff;
  margin-left : .4em;
  margin-right: .4em;
  text-decoration: none;
  display:inline-block;
  vertical-align:middle;
  opacity : .3;
  -webkit-transition: opacity 1s;
  -moz-transition: opacity 1s;
  -ms-transition: opacity 1s;
  -o-transition: opacity 1s;
  }

#header a:hover {
  opacity: .5;
  }
#header a.active { 
  opacity: 1;
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T23:32:06.853

我复制了你的问题，并得到了修复（虽然我担心这是一个黑客）。
我使用 WebUI 存根代码创建了一个新应用程序，然后将 xclickcomponent.dart 的内容替换为以下内容（我还使用您提供的 HTML 作为组件和 CSS 的内容）：

```
@observable
String theFlow = "";
String connect = "connect";
String aboutUs = "";
String business = "business";

CounterComponent() {
  // Delay adding the value so CSS has a chance to be drawn.
  new Timer(new Duration(seconds: 3), () {this.setFlow();});
}

void setFlow() {
  theFlow = "New Flow";

  // Now refresh the CSS by removing then adding the stylesheet
  var style = query("head>link[rel=stylesheet]");
  style.remove();
  var elem = new LinkElement();
  elem.attributes["rel"] = "stylesheet";
  elem.attributes["href"] = "../stackoverflow.css";
  var header = query("head");
  header.append(elem);
} 
```

即使这对你来说太老套了，希望它会帮助你:)

更新：提出的问题：[https ://github.com/dart-lang/web-ui/issues/487](https://github.com/dart-lang/web-ui/issues/487)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T00:48:26.823

对此进行了更多研究，简化的再现是：

```
<!DOCTYPE html>
<html>
<head>
  <title>JS</title>
  <style>
span {
  display:inline-block;
  text-transform: uppercase;
}
  </style>

  <script>
window.setTimeout(function() {
  var s1 = document.getElementById('s1').textContent = 'Something';
}, 1000);
  </script>
</head>
<body>
  <span id='s1'></span>Else
</body>
</html> 
```

这似乎是一个 Chrome 错误：[https ://code.google.com/p/chromium/issues/detail?id=111299](https://code.google.com/p/chromium/issues/detail?id=111299)

# c++ - 重铸 const 函数

> ID：16148841
> 
> 赞同：0
> 
> 时间：2013-04-22T13:50:35.453
> 
> 标签：c++

我正在使用具有 A* 寻路算法的库 (libtcod)。我的类继承了回调基类，我实现了所需的回调函数。这是我的通用示例：

```
class MyClass : public ITCODPathCallback
{
...
public: // The callback function
   float getWalkCost(int xFrom, int yFrom, int xTo, int yTo, void *userData ) const 
   {
      return this->doSomeMath();
   };
   float doSomeMath() { // non-const stuff }
}; 
```

我发现了许多使用 const_cast 和 static_cast 的示例，但它们似乎是另一种方式，使非 const 函数能够返回 const 函数结果。在这个例子中我该怎么做？

getWalkCost() 由我的库定义，我无法更改，但我希望能够在其中做非常量的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:56:27.347

最好的解决方案取决于你为什么要做非常量的东西。例如，如果您有一个结果缓存想要用来提高性能，那么您可以使缓存可变，因为这样可以保留逻辑常量：

```
class MyClass : public ITCODPathCallback
{
...
public: // The callback function
   float getWalkCost(int xFrom, int yFrom, int xTo, int yTo, void *userData ) const 
   {
      return this->doSomeMath();
   };
   float doSomeMath() const { // ok to modify cache here }
   mutable std::map<int,int> cache;
}; 
```

或者，也许您想记录一些关于调用 getWalkCost 的次数以及最大 x 值是多少的统计信息，然后传递对统计信息的引用可能是最好的：

```
class MyClass : public ITCODPathCallback
{
...
public: 
   struct WalkStatistics {
     int number_of_calls;
     int max_x_value;

     WalkStatistics() : number_of_calls(0), max_x_value(0) { }
   };

   MyClass(WalkStatistics &walk_statistics)
     : walk_statistics(walk_statistics)
   {
   }

   // The callback function
   float getWalkCost(int xFrom, int yFrom, int xTo, int yTo, void *userData ) const 
   {
      return this->doSomeMath();
   };
   float doSomeMath() const { // ok to modify walk_statistics members here }
   WalkStatistics &walk_statistics;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:54:13.033

你可以这样破解它：

```
 return const_cast<MyClass*>(this)->doSomeMath(); 
```

当然这不会被大多数人认为是好的设计，但是，嘿。如果您愿意，您可以改为将 doSomeMath() 设为 const，并将它修改的数据成员标记为`mutable`.

# sql-server-2008 - 尝试使用 ODBTP (Linux -> MSSQL) 编写准备好的语句

> ID：16148851
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:01.197
> 
> 标签：sql-server-2008, prepared-statement

我正在尝试使用 Ubuntu Linux 和 ODBTP 连接到我的 SQL SERVER 2008 数据库以运行准备好的语句并将新行插入数据库。

查询如下所示

```
$Q = "INSERT INTO Table
       ([DocumentGuid]
       ,[ProjectId]
       ,[CreatedByContactId]
       ,[IdNumber]
       ,[Type])
        VALUES
       (:DocumentGuid
       ,:ProjectId
       ,:CreatedByContactId
       ,:IdNumber
       ,:Type )";

$statement = odbtp_prepare($Q , $database_connection);

// Attach the values to the procedure. 
odbtp_attach_param($statement,":DocumentGuid",$DocumentGuid,ODB_CHAR);
odbtp_attach_param($statement,":ProjectId","33",ODB_INT);
odbtp_attach_param($statement,":CreatedByContactId","5",ODB_INT);
odbtp_attach_param($statement,":IdNumber","ID",ODB_CHAR);
odbtp_attach_param($statement,":Type","ABC",ODB_CHAR);

odbtp_execute($statement); 
```

但是我在日志“PHP 警告：[ODBTPERR][0]Notprepared procedure in (filename) on line 14”中收到以下错误消息...第 14 行是第一个 odbtp_attach_param() 行。

我只使用 PDO 做过准备好的陈述，我可能做错了什么。

有没有人可以向我展示使用 ODBTP 创建的示例准备语句？

# c# - 在 POCO 上使用 DataAnnotation 并使用 MVVM WPF 反映结果

> ID：16148852
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:02.467
> 
> 标签：c#, wpf, ef-code-first

我一直在研究`DataAnnotations`并创建我自己的`DataAnnotations`以供将来使用 - 主要是在 MVC4 中（这很容易可以肯定地说）。`Model`如果我在 WPF 项目中使用相同的类，我想验证它们的实用性、有效性和易用性。

```
public class Customer
{
  public int Id { get; set; }
  [Required()]
  public string Name { get; set; }
}
public class ViewModelBase : IDataErrorInfo, INotifyPropertyChanged
{
  //... (INotifyPropertyChanged)
  public string Error
  {
    get 
    {
      return string.Empty;
    }
  }
  public string this[string columnName]
  {
    get
    {
      //According to tutorials, something here
      return string.Empty;
    }
  }
} 
```

因此，如果我要继续创建`CustomerViewModel`从基类继承的，我是否必须提供模型属性的子集视图，例如：

```
public class CustomerViewModel : ViewModelBase
{
  [Required]
  public string Name { get; set; }
} 
```

**这意味着我必须再次实现注释，或者是否可以只使用模型并使用WPF 的 MAGICAL 绑定**以某种方式将模型验证反射回前端？

我一直在看很多文章，但没有一篇文章看起来很整洁或非常简洁 - 例如：

[http://blog.paulbetts.org/index.php/2010/04/27/wpf-data-validation-using-dataannotations/](http://blog.paulbetts.org/index.php/2010/04/27/wpf-data-validation-using-dataannotations/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:31:15.497

为什么要在视图模型中放置另一个 Name 属性？

如果您的视图模型中有 Customer 属性，则可以在 xaml 中访问它，例如：

`{Binding Customer.Name}`

这将自动从您的模型类中获取您的数据注释。

编辑：一个很好的例子见： http: [//www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM](http://www.codeproject.com/Articles/98681/Validating-User-Input-WPF-MVVM)

# html - 高度和最小高度为 100% 的左侧菜单

> ID：16148863
> 
> 赞同：2
> 
> 时间：2013-04-22T13:51:22.547
> 
> 标签：html, css

谢谢你的耐心。例如，我需要制作一个高度和最小高度为 100% 的左侧菜单。

如果网站没有很多内容，左侧菜单应该到底部如果网站有很多内容，左侧菜单也应该到底部，但是带有滚动条...

左右 div 始终必须为 100%

[图片示例 http://www.diegomenezes.com/stack.jpg](http://www.diegomenezes.com/stack.jpg)

它可以使用 HTML5

在这里你可以看到 JSFiddle 链接 [http://jsfiddle.net/6gSYn/](http://jsfiddle.net/6gSYn/)

这是我的代码！

```
 <div id="container">
    <div id="top"><h1>TESTE</h1></div>
    <div id="content">
        <div id="left">
        <ul class="lista">
            <li>ITEM 1</li>
            <li>ITEM 1</li>
            <li>ITEM 1</li>                
            <li>ITEM 1</li>
            <li>ITEM 1</li>
            <li>ITEM 1</li>
            <li>ITEM 1</li>
            <li>ITEM 1</li>
        </ul>
        </div>
        <div id="right">
        <p>TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE </p>        

            <div id="footer">
            <p>TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE TESTE </p>
            </div>
    </div>
    </div>    

</div> 
```

这里的 CSS

```
@charset "utf-8";
/* CSS Document */

* {
margin: 0px;
padding: 0px;
}
html {
    height: 100%;
}

body {
background: darkgrey;
height: 100%;

}

#container {    
height: 100%;
position: relative;
}

#top {
height: 100px;
width: 100%;
background-color: black;
color: white;
float:left;
}

#content {
background: darkgrey;
width:100%;
min-height: 100%;
height:100%;
}

#content ul.lista {
width: 250px;
display: inline-block;
vertical-align: top;
background: lightgrey;
color: red;
bottom: 0;
}

#right {
width: 1000px;
color: blue;
display: inline-block;
padding: 10px;
min-height: 400px;
}

#footer {
color: black;
height: 50px;
text-align: center;
width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:25:02.893

I don't think there is a pure `css` solution of this problem. There might be some ticks which are not easy to understand and implement. Rather you can solve your problem using little javascript or precisely jQuery.

lets assume the code block as follows-

```
<div id="mainContainer">
    <div id="leftContainer">
        <p>Some contents which you want to put in the left blovk</p>
    </div>
    <div id="rightContainer">
        <p>Some contents which you want to put in the right blovk</p>
    </div>
</div> 
```

now to make these two div `leftContainer` and `rightContainer` having same width you need to add some `js`-

```
$(document).ready(function(){
// making the height of the right container same as the left one

    leftContainerHeight = $('#leftContainer').outerHeight();
    $('#rightContainer').height(leftContainerHeight);

//or

// making the height of the right container same as the left one

    rightContainerHeight = $('#leftContainer').outerHeight();
    $('#leftContainer').height(rightContainerHeight);

}); 
```

This `js` will set the height of the container of your interest dynamically. But one fallback is if your dom is really heavy or visitor has a slow connection, then there will occur a height jump. That means you'll see the height of the dependent container will increase sharply as soon as your page completed loading. To avoid this there you can use a loading gif image or simply a `fadeIn` effect of the contents. You can learn more about the fadeIn effect [here](http://api.jquery.com/fadeIn)

Here's the fiddle.

[http://jsfiddle.net/6gSYn/9/](http://jsfiddle.net/6gSYn/9/)

If you need more assistance here please feel free.

Thanks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:21:58.100

试试这个，告诉你是否为你工作[jsfiddle](http://jsfiddle.net/6gSYn/7/)
**CSS：**

```
#right {
    overflow-y: scroll;
}

td {
    vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T19:40:49.350

为了让 height:100% 在所有浏览器中正常运行，您的父元素需要将高度指定为像素高度。这很复杂，因为有时您的内容需要比指定高度更多的空间。您可以使用 javascript 来解决这个问题，但这并不总是最好的解决方案。

# javascript - 取消转义 html 字符实体

> ID：16148867
> 
> 赞同：1
> 
> 时间：2013-04-22T13:51:35.767
> 
> 标签：javascript, html, escaping, character-entities

我正在尝试将数据库中的值存储到 HTML5`data`属性中。

由于[这个答案](https://stackoverflow.com/a/6234804/1382306)，我可以很好地逃避它们，但我该如何扭转呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T13:59:53.087

只需反转功能：

```
function unescapeHtml(unsafe) {
    return unsafe
        .replace(/&amp;/g, "&")
        .replace(/&lt;/g, "<")
        .replace(/&gt;/g, ">")
        .replace(/&quot;/g, "\"")
        .replace(/&#039;/g, "'");
} 
```

**演示：http:** [//jsfiddle.net/wazXb/](http://jsfiddle.net/wazXb/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-06-27T21:20:00.377

要处理所有潜在字符（而不是“已知”列表），请使用浏览器的自然转义，方法是让它将 HTML 字符串转换为文本：

```
function unescapeHTML(string) {
   var elt = document.createElement("span");
   elt.innerHTML = string;
   return elt.innerText;
} 
```

**参考资料**：

*   `document.createElement`- [https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement)
*   `*.innerHTML`- [https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML)
*   `*.innerText`- [https://developer.mozilla.org/en-US/docs/Web/API/Node/innerText](https://developer.mozilla.org/en-US/docs/Web/API/Node/innerText)

# jquery-mobile - 如何删除标题和可折叠 al Jquery Mobile 开头之间的空格？

> ID：16148868
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:37.080
> 
> 标签：jquery-mobile

我会删除标题和可折叠开头之间的空格，如果您能提供帮助，我将不胜感激

```
<div data-role="page">
      <div data-role="header">
         <h1>Test</h1>
      </div>
          <div data-role="collapsible-set" data-corners="false">
          <div data-role="collapsible"> 
            <h3>Title</h3>       
            <p>Content</p>
          </div>
          <div data-role="collapsible">
            <h3>Title 2</h3>
            <p>Content 2</p>
         </div>
       </div>
    </div> 
```

[这里有一个图片链接。我会删除标题和可折叠的开头之间的空格] [1]

```
 [1]: http://afines.com/foro/space.jpg 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T08:34:20.627

> “内容 div 上有一个 15 像素的填充 ....”

这似乎已经[在](https://stackoverflow.com/questions/16880897/how-to-remove-the-space-between-header-and-the-page-content-in-jquery)某种程度上得到了回答。此外，当`.ui-collapsible-set`使用 Chrome 的开发者工具选项检查元素时，我发现有一个`margin`设置为`.5em`.

为了完全消除标题和可折叠集之间的空间，边距需要使用`<style>`标签进行调整：

`.ui-collapsible-set { margin: 0 0; }`

# python - vtk python包装问题：无法在解释器中导入vtk，但可以在控制台中导入

> ID：16148870
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:40.213
> 
> 标签：python, wrapper, pydev, vtk

我用 python 包装编译了 vtk，我可以在命令行上使用它。但是，我正在使用 eclipse IDE 并想使用 vtk 但无论我对 PYTHONPATH 变量做什么，我仍然会收到以下错误：

```
 from filtering import * 
File "C:\Development\third-party\vtk-5.6.1\build\Wrapping\Python\vtk\filtering.py", line 9, in <module>
  from vtkFilteringPython import * 
ImportError: DLL load failed: The specified procedure could not be found. 
```

我的 PATH 和 PYTHONPATH 包含：

```
"C:\Development\third-party\vtk-5.6.1\Wrapping\Python" 
"C:\Development\third-party\vtk-5.6.1\build\bin\Release" which has the  *.lib, *.pyd, *.dll 
```

在 DOS 控制台中，这就是我所需要的，我可以“导入 vtk”而没有错误。

但是，在 Eclipse 中，我将项目的“外部库”设置为包含上面相同的目录，但出现错误。

错误发生在文件 "C:\Development\third-party\vtk-5.6.1\Wrapping\Python\vtk__init__.py" 中：在加载 vtk "common" 库之后。

```
... 
# Load all required kits. 
from common import * 
from filtering import * 
... 
```

有趣的是，vtkcommon 和 vtkfiltering python（.dll、.lib 和 .pyd）都在同一个文件夹中：“C:\Development\third-party\vtk-5.6.1\build\bin\Release”

有人可以帮忙吗？为什么 import vtk 在控制台上工作而不是在 Eclipse IDE 中工作？

我正在使用版本：Juno Service Release 2 Build id：20130225-0426 用于 eclipse、vtk-5.6、python 2.6.5 和 pydev 2.7.3

有 pydev + vtk 经验的人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T17:39:06.357

我在 PyDev 上遇到了 VTK 问题，我刚刚找到[了这篇文章](http://www.switchcase.org/)，与 PyDev 上的 PyCUDA 相关。它帮助我让事情在 Linux 上运行。

我按照那里的说明进行操作：转到运行->运行配置并添加一个新的环境变量 LD_LIBRARY_PATH

我还找到[了这个论坛](http://www.coderanch.com/t/105391/vc/Configuring-eclipse-dll-files-runtime)，它处理 Windows 上的类似问题。他们建议添加

```
-Djava.library.path="{dll path}" 
```

到 Eclipse 中的运行时参数。请参阅eclipse wiki 上的[此页面。](http://wiki.eclipse.org/Eclipse.ini)

# c++ - DLL 包含 unordered_map 未使用 Visual Studio 编译器进行编译

> ID：16148871
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:45.803
> 
> 标签：c++, compiler-construction, hashmap, mingw, unordered-map

我正在尝试使用 MinGW 编译 DLL，并从使用 Visual Studio 编译器编译的可执行文件中使用它。

来自 DLL 的源文件之一是使用 hash_map<> ，它可以使用 MinGW 成功编译。

当我更改`hash_map<>`并`std::tr1::unordered_map<>`添加`#include <tr1/unordered_map>`到我的代码时，它正在为 Visual Studio 编译器成功编译。（[如何强制 MinGW 使用 tr1 命名空间？](https://stackoverflow.com/questions/6263262/how-can-i-force-mingw-to-use-tr1-namespace)）

但是，当我尝试使用 MinGW 将代码编译为 DLL 并从使用 Visual Studio 编译器编译的可执行文件中使用它时，会出现错误：无法打开包含文件 'tr/unordered_map'

我的 DLL 必须同时与 cl 和 MinGW 兼容吗？

编辑：我的编译命令如下：

```
g++ -shared -o stemming.dll stemming.cpp alphabet.cpp basic.cpp determinise.cpp fst.cpp hopcroft.cpp operators.cpp utf8.cpp -Wl,--output-def,stemming.def,--out-implib,libstemming.a

lib /machine:i386 /def:stemming.def

cl sfstMinGW.cpp SFST/stemming.lib 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:08:42.210

VC++ 试图打开一个头文件，但在包含路径中找不到它。VC 使用`INCLUDE`环境变量来确定搜索头文件时要使用的路径。由于 VC 不使用该`tr/`目录，它不会找到它。您需要为 VC 和 g++ 提供包含语句，并选择使用哪一个，如下所示。

```
#if defined(_MSC_VER)
# include <unordered_map>
#else
# include <tr/unordered_map>
#endif 
```

您需要确保使用`unordered_map`DLL 使用的相同实现来编译应用程序。这意味着您需要更新包含路径以使用 GCC 的 TR1 版本，而不是 MS 的标准头文件实现。

# python - Python 不会在 windows powershell 中运行

> ID：16148872
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:49.267
> 
> 标签：python, powershell, python-2.7

我试图让 python.exe 在 windows powershell 中以交互模式运行。我已将 c:\python27 添加到我的 PATH 中，当我在 shell 中键入“python”时，会打开一个新的命令提示符窗口运行 python，而不是在 powershell 中运行。这是一个问题，因为当我运行“python --version”之类的东西时，它会启动新的命令提示符窗口，然后在我阅读之前关闭。有谁知道如何让 python 在 powershell 中运行？

注意：这曾经在我今天早上开始安装 pip、easy_install 和 virtualenv 之前工作。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T14:46:35.580

我几乎把头发拔掉后才解决了这个问题。以为我会分享。在windows系统>高级系统设置>环境变量中有两个地方可以修改PATH，用户变量和系统变量。我在两者中都添加了“;c:\python27”作为 PATH 的值。它现在有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:28:36.593

我不是PS专家，但是当我需要在windows powershell中以交互模式使用python时，我会使用这样的东西（python的版本是2.7.3，我没有更改env变量）：

PS C:\Python27> ./python Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit (Intel)] on win32 输入“帮助”、“版权”、“学分”或“许可证”以获取更多信息。

# java - 从 JAR 文件导入字体

> ID：16148874
> 
> 赞同：0
> 
> 时间：2013-04-22T13:51:54.223
> 
> 标签：java, fonts, jar, io

我尝试使用以下方法创建自定义字体，但是它引发了异常：

> 流已关闭

什么也没有发生！如何从我的 JAR 中导入 ttf 文件并在 Java 2D 中使用它！我设法让它与外部文件一起使用，但它不能与 InputStream 一起使用！

```
 public Font gameFont(String filename, float fontSize) {
    Font myfont = null;
     Font myfontReal = null;
    try {
        InputStream is = new BufferedInputStream(this.getClass().getResourceAsStream("com/or/dungeon/" + filename));

        myfont = Font.createFont(Font.TRUETYPE_FONT, is);
        myfontReal = myfont.deriveFont(fontSize);
        is.close();
    } catch (FontFormatException | IOException e) {
        System.out.println(e.getMessage());
    }
    return myfontReal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:53:54.920

您缺少前导斜杠。没有它，它会相对于发出调用的类进行搜索。尝试：

`this.getClass().getResourceAsStream("/com/or/dungeon/" + filename));`

或者，尝试：

`this.getClass().getClassLoader().getResourceAsStream("com/or/dungeon/" + filename));`

# php - PHPExcel - 按标题名称从特定列中读取数据？

> ID：16148882
> 
> 赞同：2
> 
> 时间：2013-04-22T13:52:17.880
> 
> 标签：php, phpexcel

我有一个项目，客户端上传了几个 XLS 文件，我只需要从他用特定标题命名的列中获取数据（其中标题 = 第一行中的数据）。有时它们甚至不是相同的顺序，或者它们可能分布在工作表中，所以我不能使用范围。

我正在考虑使用要读取的列名创建一个数组，扫描工作表并找到列 ID，然后使用 getCellByColumnAndRow() 开始读取工作表。但是，我觉得这可能就像重新发明轮子一样，所以我想我会问是否有我不知道的现成方法。

# 3d - Unity3D中的弹丸旋转

> ID：16148888
> 
> 赞同：2
> 
> 时间：2013-04-22T13:52:32.920
> 
> 标签：3d, unity3d, game-physics, projectile

我想模拟弹丸运动。我使用以下代码

```
 if (Input.GetButtonDown("Fire1")) {
        Rigidbody clone;
        clone = Instantiate(projectile, transform.position+ new Vector3(0f,0f,2f), transform.rotation) as Rigidbody;
        clone.velocity = transform.TransformDirection(Vector3.forward * Speed);
    } 
```

我的弹丸是一个刚体，我希望它像真正的弹丸一样设置它的方向，这意味着当我的弹丸即将与地面碰撞时，它应该面向地面而不是其发射器的旋转。它应该根据它的速度改变它的旋转。我不知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T08:01:13.527

正如您在评论中所说的那样，只需将其包含`transform.LookAt(transform.position + rigidbody.velocity);`在射弹控制器更新中即可。还要确保在刚体设置中标记“锁定旋转”，否则物理系统会尝试自己旋转刚体，这可能会导致抖动、不切实际的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T15:22:01.067

现在它正在工作:) 这行代码 transform.LookAt(transform.position +rigidbody.velocity); 解决了我的问题

# html - url的循环增量

> ID：16148889
> 
> 赞同：1
> 
> 时间：2013-04-22T13:52:33.127
> 
> 标签：html, xml, xpath, xquery

我想从我的标题中插入动态 url，它可以工作，但它显示 6*6 '因为 2 个不同的循环......我不知道如何做不同的......

我尝试使用全局变量，但它是一样的......（我有 6 个食谱）

谢谢 ！

代码 XML：

```
 <recette id="r1">
    <titre>Cake au chocolat</titre>
    <cat>dessert</cat>
    <type/>
    <nombre>6</nombre>
    <listeingredients>
      <ingredient q="150" u="g">chocolat pâtissier</ingredient>
      <ingredient q="3" u="pièce">oeufs</ingredient>
      <ingredient q="100" u="g">sucre en poudre</ingredient>
      <ingredient q="60" u="g">farine</ingredient>
      <ingredient q="1" u="cuillère à café">levure</ingredient>
      <ingredient q="80" u="g">beurre</ingredient>
      <ingredient q="50" u="g">poudre d'amandes</ingredient>
    </listeingredients>
    <cuisson>
      <temps type="preparation">15</temps>
      <temps type="cuisson">30</temps>
      <temperature u="C">180</temperature>
    </cuisson>
  </recette>
  <recette id="r2">
    <titre>Brownies aux noix de pécan</titre>
    <cat>dessert</cat>
    <type/>
    <nombre>6</nombre>
    <listeingredients>
      <ingredient q="200" u="g">chocolat à cuire</ingredient>
    <cuisson>
      <temps type="preparation">10</temps>
      <temps type="cuisson">25</temps>
      <temperature u="C">180</temperature>
    </cuisson>
    <instruction>
      <etape>Faire fondre le chocolat avec le beurre, soit au bain-marie à feu doux, soit au micro-ondes sur programme 'décongélation'.</etape>
      <etape>Quand c'est bien fondu, mélanger et ajouter le sucre, les oeufs un par un, la farine, puis les noix de pécan hachées grossièrement.</etape>
      <etape>Bien mélanger et verser dans un moule carré de 20 cm (ou rectangulaire pas trop grand), chemisé de papier sulfurisé.</etape>
      <etape>Mettre au four préchauffé à 180°C pendant 25 min.</etape>
      <etape>Laisser refroidir et couper en carrés.</etape>
    </instruction>
  </recette>
</listerecettes> 
```

代码 xq：

```
{
    for $titre in db:open("recettes")//recette//titre, $j in (6,2,1,5,4,3)
    order by $titre
    return
    <a href="http://127.0.0.1:8984/rest/recettes?query=//recette[@id='r{$j}']">
        <ul>
            <li>
            {
                $titre
            }
            </li>
        </ul>
    </a>
}
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:27:26.750

在您发表评论后，我仍然不知道您想要实现什么，`$j`因为它根本没有用，可以简单地删除。所以我猜你可能想要别的东西，而不仅仅是一个按标题排序的简单列表 - 如果是这样，请明确你想要实现的目标。否则，只需删除`$j`并使用 id 属性即可。

```
for $recette in db:open("recettes")//recette
let $titre := $recette/titre
order by $titre
return
<a href="http://127.0.0.1:8984/rest/recettes?query=//recette[@id='{$recette/@id}']">
    <ul>
        <li>
        {
            $titre
        }
        </li>
    </ul>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T15:47:19.330

谢谢，但我刚刚找到了另一种方法！：

```
for $titre in db:open("recettes")//recette//titre
order by $titre
return
<a href="http://127.0.0.1:8984/rest/recettes?query=//recette[@id='{$titre/..//@id}']">
    <ul>
        <li>
        {
          $titre
        }
        </li>
    </ul>
</a> 
```

我测试了您的代码，它是正确的，但您在 order by 后忘记了“$tire”！

# python - 将执行哪个版本的程序？/usr/bin 中的那个还是 /usr/local/bin 中的那个？

> ID：16148893
> 
> 赞同：1
> 
> 时间：2013-04-22T13:52:42.993
> 
> 标签：python, unix, centos, version

我在两者中都有 python`/usr/bin`和`/usr/local/bin`. 现在我有一个问题，如果我调用 python 会执行哪个？

我知道我可以用`which python`命令检查哪个是哪个。但我问的是默认情况下哪个会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:53:36.373

查看 $PATH，通常`/usr/local/bin`首先出现：

```
$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games
$ 
```

并且`$PATH`从左到右搜索直到找到匹配项，`/usr/local`获胜。

您当然可以通过在其中任何一个中放置一个脚本来测试它并让它回显它的值......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T13:53:42.327

当您在命令行上运行任何内容时，它将**按顺序**`PATH`搜索变量中的文件夹，直到找到具有该名称的可执行文件。

# c# - 是否可以在 WinRt 中进行即时编译？

> ID：16148895
> 
> 赞同：0
> 
> 时间：2013-04-22T13:52:45.977
> 
> 标签：c#, windows-8, compilation, windows-runtime, on-the-fly

对于一个项目，我需要在 WinRt 应用程序中即时编译代码。关于那个主题，我几乎找不到任何东西。我已经看到 CodeDom 命名空间只有一个类，我担心这意味着对这个问题的否定。

那么，还有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:55:22.240

这是不可能的。WinRT 应用程序被沙盒化并故意锁定以增强其安全性。

# wpf - WPF 视觉状态和改变颜色

> ID：16148896
> 
> 赞同：1
> 
> 时间：2013-04-22T13:52:46.023
> 
> 标签：wpf, styles

我的 WPF 应用程序需要根据一天中的时间有两种不同的配色方案，白天模式和夜间模式。我正在尝试修改第三方 WPF 控件使用的模板，以便它可以使用不同的配色方案。

有问题的控件使用视觉状态来定义从选中到未选中的转换：

```
<Setter Property="Template">
    <Setter.Value>
        <ControlTemplate TargetType="{x:Type Calendar:CalendarButton}">
        <Grid x:Name="LayoutRoot" Background="Transparent">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="SelectionStates">
                        <VisualState x:Name="Unselected"/>
                        <VisualState x:Name="Selected"/>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>
                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}"/>
                <Chromes:ButtonChrome x:Name="SelectionChrome" CornerRadius="1" Margin="2" RenderNormal="False" RenderSelected="{TemplateBinding IsSelected}" RenderFocused="{TemplateBinding IsFocused}" RenderHighlighted="{TemplateBinding IsMouseOver}" />
                <Border x:Name="TodayVisual" BorderThickness="1" CornerRadius="2" Margin="1" Visibility="Collapsed">
                    <Border.BorderBrush>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF282828"/>
                            <GradientStop Color="#FF5F5F5F" Offset="1"/>
                        </LinearGradientBrush>
                    </Border.BorderBrush>
                </Border>
                <ContentPresenter x:Name="Content" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" ContentStringFormat="{TemplateBinding ContentStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
            </Grid>
        </ControlTemplate>
    </Setter.Value>
</Setter> 
```

当视觉状态为“已选择”时，我需要更改控件的`Background`、`BorderBrush`和`Foreground`属性。`ButtonChrome`我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:45:01.930

我发现在大多数具有 Chrome 元素的控件（无论是 Microsoft 还是其他方控件）上，都需要删除 chrome 元素，然后手动重新构建它，因为它们通常不提供更改它们的方法（即无法替代模板）。

但是，如果其他人有更好的方法，我会全力以赴。

# ruby - NoMethodError - 部署在 Heroku 上时 nil:NilClass 与 Sinatra 应用程序的未定义方法 'id'

> ID：16148897
> 
> 赞同：0
> 
> 时间：2013-04-22T13:52:48.653
> 
> 标签：ruby, heroku, sinatra, datamapper

我被这个问题困住了。我的 Sinatra 应用程序中有以下 DataMapper 模型；

```
class Word
  include DataMapper::Resource
  property :id, Serial, :key => true
  property :word, String
end 
```

以下是我的代码的另一个片段；

```
get '/kamus/:alph' do
  @alph = %w{A B C D E F G H I J K L M N O P Q R S T U V W X Y Z}

  firstword = Word.first(:word.like=>"#{params[:alph]}%")
  lower = firstword.id
  lastword = Word.last(:word.like=>"#{params[:alph]}%")
  upper = lastword.id
  @words = Word.all(:id=>(lower..(lower+(upper-lower)%1000)))
  erb :kamus
end 
```

我遇到的问题是；在本地开发环境中，一切正常。但是当我在 Sinatra 上部署时，我遇到了臭名昭著的“内部服务器错误”。在我的命令行中，我输入了；

```
heroku logs 
```

根据以下内容，我发现问题与 id 属性有关；

```
NoMethodError - undefined method 'id' for nil:NilClass: 
```

我知道我正在使用不同的数据库（开发中；SQLite3 和生产中；PostgreSQL）。我很困惑为什么 Heroku 没有将变量 firstword 和 lastword 识别为 Word 类型。我很确定问题与此有关，因为当我用从我的 SQL 表中手动读取的整数替换变量 lower 和 upper 时，应用程序运行良好。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T03:28:29.093

首先，这些词是否存在于heroku的数据库中？

其次，你是在做不区分大小写的 LIKE 查询还是区分大小写的查询？后者可能什么也不返回。

第三，即使没有任何记录，您的应用也不应该崩溃。它应该只向视图返回一个空集合，以便它可以说“未找到记录”。

# c# - 根据特定节点选择数据数量

> ID：16148898
> 
> 赞同：0
> 
> 时间：2013-04-22T13:52:48.713
> 
> 标签：c#, xml, linq-to-xml

我有以下一段代码

```
XmlDocument docu = new XmlDocument();
        docu.Load(file);
XmlNodeList lst = docu.GetElementsByTagName("name");
                        foreach (XmlNode n in lst)
                        {
                            string text = n.InnerText;
    var types = doc.Element("program").Element("program-function").Element("function").Descendants("type").Where(x => x.Value == text).Select(c => c.Value).ToArray();
    } 
```

我的xml如下

```
<program> 
  <program-function> 
    <function>
    <name>add</name> 
    <return-type>double</return-type> 
    <params> 
     <type>double</type> 
     <type-value>a</type-value> 
     <type>double</type> 
     <type-value>b</type-value> 
     <type>string</type> 
     <type-value>c</type-value> 
    </params> 
   <body> return a + b + c; </body> 
</function> 
  <function>
   <name>test</name> 
   <return-type>int</return-type> 
   <params> 
     <type>double</type> 
     <type-value>a</type-value> 
     <type>double</type> 
     <type-value>b</type-value> 
     </params> 
   <body> return a + b; </body> 
  </function> 
 </program-function> 
</program> 
```

我需要能够获得`<type>`每个的数量`<name>`

添加的结果应该是 3 =`types.count() = 3`
测试的结果应该是 2 =`types.count() = 2`

有什么建议吗？

编辑：如果我想检索里面的每个值`types`？IE。`add`应该包含`a`,并且应该包含`b`, 。希望将其存储在数组中以便于检索`c``test``a``b`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:00:15.500

如何使用 Linq to Xml

```
 var xDoc = XDocument.Parse(xml);
var functions = xDoc.Descendants("function")
                .Select(f => new
                {
                    Name = f.Element("name").Value,
                    Types = f.Descendants("type").Select(t=>t.Value).ToList(),
                    //Types = f.Descendants("type").Count()
                    TypeValues = f.Descendants("type-value").Select(t=>t.Value).ToList()
                })
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:59:59.920

尝试这个：

```
XDocument doc = XDocument.Load(your file);
var vals = doc.Element("program").Element("program-function").Elements("function");

var result = vals.Select(i => 
                     new { name = i.Element("name"), 
                           count = i.Elements("type").Count() } 
```

# asp.net-mvc - 无法添加 MVC 控制器 VS2012 给出“对象引用未设置为对象的实例”

> ID：16148914
> 
> 赞同：16
> 
> 时间：2013-04-22T13:53:42.467
> 
> 标签：asp.net-mvc, visual-studio-2010, asp.net-mvc-4, visual-studio-2012

我进行了广泛的搜索，但在这个星球上找不到另一个人有这个问题......
症状是：
在 Visual Studio 2012 中，在从 VS2010 升级并配置为从 VS2012 和 VS2010 进行双版本编辑的 MVC 4.0 项目上。当我右键单击控制器文件夹并从上下文菜单中选择添加->控制器...时，我从 Visual Studio 收到“对象引用未设置为对象的实例”错误。

项目中的现有代码运行良好，如果我改用 Add->New Item 选项，并从对话框中选择 Controller，那么我可以添加一个空白控制器。我只是无法使用上述方法添加类型控制器。

但是，如果我创建一个新的 MVC4 项目，那么我可以使用相同的菜单再次添加类型控制器，因此 Visual Studio 的安装中不存在问题，它必须存在于项目文件中。
我还检查了我的项目和新 MVC 项目之间的引用，并且所有新项目引用都包含在我的项目中。
有没有人经历过类似的事情？

我该如何解决？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-05-11T08:41:06.757

该问题似乎是由 MvcScaffolder 包的安装/注册不完整引起的。以下过程为我解决了我的问题。

启动 Visual Studio 并打开项目。**打开包管理器控制台**。（这是导致解决方案的“技巧”或缺失的信息......）

在这里，我看到了由用于注册的 PowerShell 脚本引起的以下错误：

```
New-Object : Could not load file or assembly 'System.Management.Automation, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified.
At <ProjectPath...>\packages\MvcScaffolding.1.0.9\tools\registerWithMvcTooling.ps1:163 char:27
+     $newProvider = New-Object <<<<  $powerShellScaffolderProviderType($mvcScaffoldingProvider)
    + CategoryInfo          : NotSpecified: (:) [New-Object], FileNotFoundException
    + FullyQualifiedErrorId : System.IO.FileNotFoundException, Microsoft.PowerShell.Commands.NewObjectCommand 
```

当我从包管理器控制台检查注册的脚手架时，我得到：

```
PM> get-defaultscaffolder

DefaultName          ScaffolderName
Action               MvcScaffolding.Action
Controller           MvcScaffolding.Controller
CustomScaffolder     T4Scaffolding.CustomScaffolder
CustomTemplate       T4Scaffolding.CustomTemplate
DbContext            T4Scaffolding.EFDbContext
Mailer               Mailer.Razor
Repository           T4Scaffolding.EFRepository
UnitTest             MvcScaffolding.ActionUnitTest
View                 MvcScaffolding.RazorView
Views                MvcScaffolding.Views 
```

很明显，脚手架配置为使用 MvcScaffolding 包，但该包有注册错误。

快速搜索错误提供了此链接[http://mvcscaffolding.codeplex.com/discussions/437692](http://mvcscaffolding.codeplex.com/discussions/437692)指的是[https://visioautomation.codeplex.com/discussions/397034](https://visioautomation.codeplex.com/discussions/397034)建议安装 PowerShell 3，这实际上是Windows Management Framework 3.0，可从[http://www.microsoft.com/en-us/download/details.aspx?id=34595](http://www.microsoft.com/en-us/download/details.aspx?id=34595)获得。当出现提示时，我选择了 Windows6.1-KB2506143-x64.msu 文件，因为我运行的是 Win 7-64 位。

安装后重启电脑，重新打开 Visual Studio 和项目，查看包管理器控制台。如果错误消失了，那么控制器问题也消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T07:38:32.033

我在 Win8 上的 VS2012 上遇到了这个问题，我们正在处理一个我们开始在 VS2010 上开发的项目，我无法使用 CTRL+M、CTRL+C 快捷方式创建新的控制器。

打开任何项目并在 Manage Nuget 包下重新安装 MvcScaffolder 及其依赖项已为我解决了这个问题。

根本不需要重新启动 VS2012。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T14:49:13.870

也许您现有的项目在 .csproj 文件中有错误的 ProjectTypeGuids 元素？MVC4 的右侧是 {E3E379DF-F4C6-4180-9B81-6769533ABE47}。

尝试比较您在新项目和现有项目中的项目类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-14T19:41:01.223

安装 Windows Management Framework 3.0 的首选答案不起作用。下载“Windows6.1-KB2506143-x86.msu”在我的 Windows 7 32 位系统上不起作用。它失败并显示错误“更新不适用于您的计算机”。

使用 Manage Nuget Packages 重新安装 MVCscaffolding 不起作用。

我的 ProjectType GUID 是正确的。

Microsoft Web 开发人员工具已安装。

删除并重新创建解决方案不起作用。

有必要从安装磁盘修复 Visual Studio 2012 安装以解决此问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T23:27:20.480

安装“Microsoft Web Developer Tools”为我解决了这个问题。有关的：

[如何使用 ProjectTypeGuids 349c5851-65df-11da-9384-00065b846f21 打开 csproj？](https://stackoverflow.com/questions/15636034/how-to-open-a-csproj-with-projecttypeguids-349c5851-65df-11da-9384-00065b846f21)

*   {E3E379DF-F4C6-4180-9B81-6769533ABE47} - MVC4 项目
*   {fae04ec0-301f-11d3-bf4b-00c04f79efbc} - CSharp 项目
*   {349c5851-65df-11da-9384-00065b846f21} - Web 应用程序项目（这是您需要 Web 开发工具的目的）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-20T15:41:00.503

更新 Windows6.1-KB2506143-x64.msu 对我有用。该问题是在完整的 SpyWare 软件扫描后开始的。我认为它比平时删除了更多的东西。于是，回归正常生活。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-23T08:20:14.840

我有同样的问题，我首先使用数据库，这是因为我更改了 .edmx contex.tt 以生成连接名称设置为自定义方法的 contex.cs，

: 基础(sqlHelper.getMainConnectionString())

每次，在我更改/更新 .edmx 之前，我需要将连接名称更改为它的创建默认值：

: base("name=YourWebconfigConnectionstringName")

重建项目，它再次工作

回答：

在 webconfig 检查您的连接字符串字符串和提供程序参数，然后删除并重新创建 .edmx 这将强制生成器重建所有数据库对象，包括元数据或删除设计器中的所有表，将 contex.cs 更改为默认创建名称，重建项目，添加表，重建项目，它应该再次工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-03T01:56:18.033

此问题在使用 VS2017 的目标 MVC5 项目中表现出来。

与原始操作一样，尝试了一个新项目对 ApplicationUser 执行带有 EF 脚手架的添加控制器。该错误最初**确实**出现了，直到注册了一个用户，强制创建了数据库。之后，添加脚手架工作顺利。我认为这是有道理的，因为该实体在第一次注册之前并不真正存在，尽管如果比我知识渊博的人有更准确的解释，我会得到纠正。但是因为Add Controller是在一个新的项目上工作的，正如原op确定的那样，似乎不是VS2017的安装问题。这表明 taret 项目有问题。

此时，在目标项目中，执行 Team Explorer 中的 Undo All 以使项目恢复到之前的工作点。虽然这可以通过获取特定版本来完成，但对于这个目标项目，所需要的只是全部撤消。 **提醒一句：**在这个特定项目的情况下，在撤消之前，包管理器用于将数据库回滚到与 Undo All 匹配的起点。如果执行获取特定版本，请务必检查数据库是否需要回滚到正确的配置。重置所有项目更改后，`object reference not set to an instance of an object`在添加控制器操作期间不再存在错误，修复了目标项目中的错误。

我有点不情愿地发布了这个回复，因为我无法复制错误，而且我不确定到底是什么导致了这个问题，但如果一个人在项目中间并且添加控制器开始，这是一个特别讨厌的错误失败。我想如果有人遇到这个问题并回滚当前的更改集可能会为他们解决这个问题，像我一样他们会很感激。如果我稍后确定导致问题出现的活动模式，我肯定会在这篇文章中添加更多内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-07T05:54:57.613

我正在运行 VS 2019 Enterprise，ASP.NET Core 3.1.3。

在使用数据库优先方法搭建脚手架之后，我试图**使用实体框架 (EF) 添加带有视图的 MVC 控制器**。

我在这个问题上运行是因为**我的 ER 模型中的一个表缺少主键。**

该表已连接到我尝试通过另一个具有主键的表为其生成 MVC 控制器的表，因此我最初没有注意到该错误。

# matlab - 在 Matlab 中绘制矩阵

> ID：16148916
> 
> 赞同：1
> 
> 时间：2013-04-22T13:53:44.053
> 
> 标签：matlab, matrix, plot

我的任务是根据它们解决的矩阵的大小绘制 2 个算法的计算时间成本。

到目前为止，我所做的是一种方法，可以执行每个算法 x 次并存储时间。

最后，我有一个这样的矩阵：

```
T =

1.248008000000027e-003    9.360059999994519e-004
7.488048000004710e-003    1.456009333332986e-002
4.992032000000109e-002    2.808017999999492e-002
1.809611600000039e-001    1.489809550000018e-001
5.740836800000352e-001    5.865637599999672e-001
4.748670439999978e+000    4.714350220000005e+000 
```

第一行是大小为 20x20 的矩阵的两种算法的计算成本，第二行是大小为 40x40 的矩阵的两种算法的计算成本，然后是 80x80、160x160、320x320 和 640x640 的矩阵。

两列几乎相同的原因是因为我还没有编写第二个算法并且只使用了第一个算法两次。

我现在需要做的是在同一个图中根据矩阵大小的增加绘制两种算法的成本。然而，我被困在情节语法上，我一直未能得到一个漂亮的数字。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:21:33.963

怎么样

```
T = [
    1.248008000000027e-003    9.360059999994519e-004
    7.488048000004710e-003    1.456009333332986e-002
    4.992032000000109e-002    2.808017999999492e-002
    1.809611600000039e-001    1.489809550000018e-001
    5.740836800000352e-001    5.865637599999672e-001
    4.748670439999978e+000    4.714350220000005e+000];

figure, hold on

 % column 1
plot(1:size(T,1), T(:,1), 'r.-');

% column 2
plot(1:size(T,1), T(:,2), 'b.-');

% nicer labels at the X-tick locations
set(gca, 'xticklabel', {...
    '20×20',...
    '40×40',...
    '80×80',...
    '160×160',...
    '320×320',...
    '640×640'}...
);

% finish plot
grid on
ylabel('Execution time required [s]')
xlabel('Matrix size [-]')

legend(...
    'Algorithm 1',...
    'Algorithm 2',...
    'location', 'NorthWest'...
); 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/GZCKv.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:59:00.190

这个怎么样：

```
plot(T) 
```

或者如果你想要 x 值，定义 x 然后

```
plot(x,T(:,1))
hold all
plot(x,T(:,2)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:00:48.043

如果第一列属于不同大小的第一种算法的计算时间，第二列属于第二种算法的计算时间，你可以把它画得很漂亮：

假设存储计算时间的矩阵是 TimeComputation

```
figure(1)

plot(TimeComputation(:,1),'-.r')

hold on

plot(TimeComputation(:,2),'--.b')

legend('Function 1','Function 2') 
```

如果您还有其他问题，请告诉我！

# javascript - NotFoundError：DOM 异常 8

> ID：16148917
> 
> 赞同：1
> 
> 时间：2013-04-22T13:53:44.133
> 
> 标签：javascript, asp-classic, removechild

开门见山：

```
function dell(a) {
    var id = a.split('');
    var rs_array = ["nr", "ps", "aan", "des", "subs", "del"];
    var r_array = ["artnr", "ps", "aan", "des", "subtots", "del"];
    for (i = 0; i < 6; i++) //ligt aan nummer
    {
        var regels = document.getElementById(rs_array[i]);
        regels.removeChild(document.getElementById(r_array[i] + id[3]));
    }
} 
```

使用此代码，我试图删除一些输入元素

```
for r = 0 to a_rows-1 step 1%>
<tr id="regels">
    <td width="auto" id="nr"> 
        <input type="text" name="artid" id="artnr<%=r%>" value="<%=records(1,r)%>" size="6">
    </td>
    <td id="ps">
        <input type="text" name="ps" id="ps<%=r%>" onfocus="this.blur()" value="<%=records(2,r)%>" size="7">
    </td>
    <td id="aan">
        <input type="text" name="aan" id="aan<%=r%>" onkeyup="sub(this.id,this.value);count()"  value="<%=records(3,r)%>" size="2">
    </td>
    <td id="des">
        <input type="text" name="omschr" id="des<%=r%>" value="<%=records(4,r)%>" size="50">
    </td>
    <td id="subs">
        <input type="text" name="subtots" id="subtots<%=r%>" onfocus="this.blur()" value="<%=records(5,r)%>"  size="7">
    </td>
    <td id="del">
        <div id="del<%=r%>" onclick="dell(this.id)" style="cursor:pointer;border:1px black solid;font-size:20px">-</div>
    </td>
</tr>
<% next 
```

这来自我的数据库。我试图通过给它们一个带有数字的 id 来删除输入元素。奇怪的是：我可以删除第一行，但之后它说：' `NotFoundError: DOM Exception 8`'当我尝试删除另一行时。

请帮我。如果您需要有关我的代码或其他内容的更多信息，可以询问

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:09:09.690

不对父元素进行硬编码要容易得多。直接从原始元素引用中获取父元素：

```
function dell(a) {
    var id = a.split('');
    var r_array = ["artnr", "ps", "aan", "des", "subtots", "del"];
    for (var i = 0; i < r_array.length; i++) {
        var element = document.getElementById(r_array[i] + id[3]);
        if (element) {
            element.parentNode.removeChild(element);
        }
    }
} 
```

# c++ - Visual Studio 中的 RegEx 查找和替换对话框

> ID：16148921
> 
> 赞同：0
> 
> 时间：2013-04-22T13:53:50.607
> 
> 标签：c++, visual-studio

我有一个大型 c++ 项目，我想修改我的项目的所有文件：

```
expression(expression...) 
```

进入

```
expression( expression... ) 
```

同样的`expression[expression]` `expression[ expression ]`

我可以捕获“（表达式”，但我不知道如何进行替换。

我正在使用 Visual Studio 2010。有人有什么建议吗？谢谢

# c# - 使用动态时在运行时推断为对象的值类型

> ID：16148924
> 
> 赞同：2
> 
> 时间：2013-04-22T13:53:56.337
> 
> 标签：c#, dynamic, lambda, boxing

我几乎明白为什么会出现这个特殊问题（尽管如果你能找到时间，我非常欢迎外行的解释！），我肯定涉及到装箱/拆箱，我不会试图错误地解释..

以我目前对这种情况的了解（或缺乏了解），我不确定如何最好地继续解决它。

这是一个相当简化的控制台应用程序，显示了我的问题：

```
static void Main(string[] args)
{
    try
    {
        // succeeds
        IEnumerable<Expression<Func<TestCase1Impl, dynamic>>> results1 =
            typeof(ITestCase1).GetMethods().Select(m => buildDynamicExpression(new TestCase1Impl(), m));
        Console.WriteLine("{0} methods processed on ITestCase1", results1.Count().ToString());

        // succeeds
        IEnumerable<Expression<Func<TestCase2Impl, int>>> results2 =
            typeof(ITestCase2).GetMethods().Select(m => buildTypedExpression(new TestCase2Impl(), m));
        Console.WriteLine("{0} methods processed on ITestCase2", results2.Count().ToString());

        // fails
        IEnumerable<Expression<Func<TestCase2Impl, dynamic>>> results3 =
            typeof(ITestCase2).GetMethods().Select(m => buildDynamicExpression(new TestCase2Impl(), m));
        Console.WriteLine("{0} methods processed on ITestCase2", results3.Count().ToString());
    }
    catch (Exception ex)
    {
        Console.WriteLine("Failed: {0}", ex.ToString());
    }

    Console.ReadKey();
}

private static Expression<Func<T, dynamic>> buildDynamicExpression<T>(T arg, MethodInfo method)
{
    ParameterExpression param = Expression.Parameter(typeof(T));
    MethodCallExpression[] args = new MethodCallExpression[0]; // none of the methods shown take arguments
    return Expression.Lambda<Func<T, dynamic>>(Expression.Call(param, method, args), new ParameterExpression[] { param });
}

private static Expression<Func<T, int>> buildTypedExpression<T>(T arg, MethodInfo method)
{
    ParameterExpression param = Expression.Parameter(typeof(T));
    MethodCallExpression[] args = new MethodCallExpression[0]; // none of the methods shown take arguments
    return Expression.Lambda<Func<T, int>>(Expression.Call(param, method, args), new ParameterExpression[] { param });
}

public interface ITestCase1
{
    string Method1();

    List<int> Method2();

    Program Method3();
}

public interface ITestCase2
{
    int Method4();
}

private class TestCase1Impl : ITestCase1
{
    public string Method1()
    {
        throw new NotImplementedException();
    }

    public List<int> Method2()
    {
        throw new NotImplementedException();
    }

    public Program Method3()
    {
        throw new NotImplementedException();
    }
}

private class TestCase2Impl : ITestCase2
{
    public int Method4()
    {
        throw new NotImplementedException();
    }
} 
```

以上将输出

```
3 methods processed on ITestCase1
1 methods processed on ITestCase2
Failed: System.ArgumentException: Expression of type 'System.Int32' cannot be used for return type 'System.Object' <irrelevant stack trace follows> 
```

就像这些问题经常出现的情况一样，最好在陷入这个可怕的混乱之前检查一下你是从哪里开始的。

我正在使用起订量。我有一个通用接口，在我的应用程序中被其他接口广泛使用。我需要测试我的接口使用者首先调用公共接口上的特定方法，然后再调用各种接口上的任何方法*（事后看来，这对我来说听起来是一个糟糕的设计，我可能会在稍后解决这个问题，但纯粹是出于学术原因，我想先解决这个问题）*。

为此，我使用`It.IsAny<T>()`参数为接口上的每个方法动态生成表达式，然后我可以将其传递给`mock.Setup(generatedExpression).Callback(doSomethingCommonHere)`.

很可能有一种更简单的方法可以做到这一点，而不是我的表情构建......？

但是，如果不是，**我的问题是，修改表达式构建以允许值类型的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:15:51.757

这不是特定于`dynamic`. 如果替换为 ，您将获得相同的`dynamic`结果`object`。您甚至可以为实现接口的自定义值类型获得它，并且您希望从`Func<IImplementedInterface>`.
这样做的原因是，当您想要返回 an 时`int`，`object`它必须被装箱 - 正如您正确猜到的那样。
用于装箱的表达式是`Expression.Convert`。将其添加到您的代码将修复异常：

```
private static Expression<Func<T, dynamic>> BuildDynamicExpression<T>(
    T arg,
    MethodInfo method)
{
    ParameterExpression param = Expression.Parameter(typeof(T));
    var methodCall = Expression.Call(param, method);
    var conversion = 
    return Expression.Lambda<Func<T, dynamic>>(
        Expression.Convert(methodCall, typeof(object)),
        new ParameterExpression[] { param });
} 
```

顺便说一句：如您所见，我删除了`args`数组。没有必要。

* * *

要解决 Moq 的问题，我认为您需要稍微改变方法。
思路如下：

*   使用被调用方法的确切返回类型创建一个表达式。
*   让 DLR（动态语言运行时）找出表达式的类型。

在代码中：

```
IEnumerable<Expression> results =
    typeof(ITestCase2).GetMethods()
                      .Select(m => BuildDynamicExpression(
                                       new TestCase2Impl(), m)); 
```

`BuildDynamicExpression`看起来像这样：

```
private static Expression BuildDynamicExpression<T>(T arg, MethodInfo method)
{
    ParameterExpression param = Expression.Parameter(typeof(T));
    return Expression.Lambda(Expression.Call(param, method),
                             new ParameterExpression[] { param });
} 
```

用法是这样的：

```
foreach(var expression in results)
{
    mock.Setup((dynamic)expression);
    // ...
} 
```

这里重要的部分是在`dynamic`将表达式传递给 之前强制转换为`Setup`。

# assert - Microsoft Z3 命名断言

> ID：16148925
> 
> 赞同：2
> 
> 时间：2013-04-22T13:53:58.723
> 
> 标签：assert, z3, named

我需要在我的 z3 模型中命名一些断言，以便它能够生成 unsat 核心。

我可以像这样手动执行此操作：

```
(assert (! (assertion) :named x)) 
```

我只需要直接使用 .NET API 即可。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:40:47.160

Z3 不直接通过 .NET API 支持这一点。相反，应该创建一个布尔常量（名称，例如，`x`），然后可以使用它来断言条件约束，例如，

```
solver.AssertAndTrack(constraint, x); 
```

然后命名约束，`x`并使用该常量在未饱和核心中引用它。有关 Python 中的示例，另请参见另一个[问题](https://stackoverflow.com/questions/14560745/unsatisfiable-cores-in-z3-python)；.NET API 中的策略是相同的，只是函数名称略有不同。

# php - jQuery 文件上传：示例有效，但当我尝试将其包含在我的网站中时无效

> ID：16148927
> 
> 赞同：-2
> 
> 时间：2013-04-22T13:54:03.850
> 
> 标签：php, javascript, jquery, html, jquery-ui

我一直在尝试在我正在开发的网站中实施[文件上传](http://blueimp.github.io/jQuery-File-Upload/)，但没有成功。
如果我只是将文件复制到测试目录，`https://static.mysite.com/z_test/index.html`
那么该示例就可以正常工作。
如果我尝试将所有 CSS/JS 文件包含在 .php 文件（使用 Xtemplates）中，然后从他们的示例中复制并粘贴相关代码，它将不起作用，不会显示任何选定的文件。
我的网站的 URL 看起来像`https://mysite.com/test-upload`并从中加载 CSS/JS 文件，`https://static.mysite.com/css/... and https://static.mysite.com/js/`
这可能是它不起作用的原因吗？任何关于我应该尝试使其工作的（其他）的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:16:42.610

这可能是文件权限问题。检查服务器上文件上传的路径是否有正确的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T16:07:24.383

我发现了问题，它与一些重叠的 CSS 类有关，这就是为什么我看不到任何 JS 错误。

# iphone - 添加/删除发送短信的收件人

> ID：16148929
> 
> 赞同：-1
> 
> 时间：2013-04-22T13:54:12.520
> 
> 标签：iphone, ios6, sms

我正在创建一个具有撰写 SMS 功能的应用程序。我不想使用 iPhone 的默认`MFMessageComposeViewController`. 我想知道如何使用另一种技术添加和删除 SMS 的收件人（创建气泡并删除它）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:21:24.483

在 iOS 上编写 SMS 的唯一方法是使用`MFMessageComposeViewController`. 使用其他任何东西都会让您的应用程序在 App Store 中被拒绝。

# ios - Appirater - 点击后没有任何反应

> ID：16148932
> 
> 赞同：2
> 
> 时间：2013-04-22T13:54:18.103
> 
> 标签：ios, app-store, appirater

我正在使用 Appirater 对我的应用进行评分。一切都很好，警报向我显示带有按钮的消息。但是当我点击“评价我的应用程序”按钮时，没有答案 Appirater 我的应用程序。警报就消失了。我的应用程序委托中有我的代码：

```
[Appirater setAppId:@"579808129"];
[Appirater setDaysUntilPrompt:0];
[Appirater setUsesUntilPrompt:2];
[Appirater setTimeBeforeReminding:2];
[Appirater setDebug:YES];
[Appirater appLaunched:YES]; 
```

谢谢回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:00:53.323

除非您使用的是 ios6+，否则 Appirater 不会将您发送到模拟器上的应用商店。您是在 ios6+ 模拟器还是实际设备上进行测试？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T14:13:02.383

确保你设置了你的委托，并订阅了你班级的委托

```
<@interface MyAppDelegate : UIResponder <UIApplicationDelegate, AppiraterDelegate>{

[Appirater setDelegate:self];
[Appirater setAppId:APPIRATER_APP_ID_HERE];
[Appirater setDaysUntilPrompt:1];
[Appirater setUsesUntilPrompt:10];
[Appirater setSignificantEventsUntilPrompt:-1];
[Appirater setTimeBeforeReminding:2];
[Appirater appLaunched:YES];
[Appirater setDebug:YES]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-14T06:08:00.487

将此行添加到 appirater.h

```
 #define APPIRATER_DEBUG YES 
```

您可以在模拟器上看到 appirater 弹出窗口。但是您应该使用设备对应用程序进行评级。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-14T17:01:22.550

我在我的应用程序中使用幻灯片菜单。还有一个问题，因为我有支持像 rootViewController 这样的滑动菜单的控制器，所以当我加载 appirater 控制器时，它是带有菜单的控制器。因此，我将以某种方式更改 appirater get-root-controller 功能。谢谢大家！;)

# requirejs - 嵌套定义不加载对本地主机的依赖

> ID：16148933
> 
> 赞同：2
> 
> 时间：2013-04-22T13:54:19.783
> 
> 标签：requirejs

我有以下简单的结构：

索引.html

```
...
<script src="static/js/lib/require.js" data-main="static/js/main"></script>
</head>
... 
```

静态/js/main.js

```
requirejs.config({
  baseUrl: 'static/js',
  paths: {
    m: 'modules'
  }
});

require(['m/test01'], function(test01) {
  console.log(test01.print());
}); 
```

静态/js/modules/test01.js

```
define(['m/test02'], function(test02){
  return {
    print: function() {
      return 'test01 and '+ test02;
    }
  };
}); 
```

静态/js/modules/test02.js

```
define(function() {
  return 'test02';
}); 
```

现在，当我直接打开 index.html (file:///index.html) 时，一切顺利。脚本加载工作，“test01 和 test02”记录在控制台中。

但是，如果我通过 xampp (localhost/requiretest/index.html) 打开 test01.js 的加载顺利，但对于 test02.js，我在控制台 (Firefox) 中收到此错误：

```
NetworkError: 404 Not Found - localhost/01-test-grunt/static/js/test02.js
(removed "http://" before localhost for stackoverflow) 
```

如您所见，URL 中缺少“modules/”部分。有人知道会发生什么吗？

注意：当我将 baseUrl 更改为“static/js/modules”时，它确实有效，但由于我的 grunt 构建过程，我不能这样做。无论如何，我假设也不会加载其他路径，所以这是一个错误还是我做错了什么？

# java - JAVA为xml的所有元素添加前缀

> ID：16148941
> 
> 赞同：1
> 
> 时间：2013-04-22T13:54:32.517
> 
> 标签：java, xml, namespaces

有什么办法可以在java中为我的xml的每个元素添加前缀？例如，我有以下 xml：

```
 <node1 xmlns="www.test.com">
       <node2>abc</node2>
       <node3>
           <node3_1>test1</node3_1>
       </node3>
     </node1> 
```

我想将其转换为：

```
 <test:node1 xmlns test="www.test.com">
       <test:node2>abc</test:node2>
       <test:node3>
           <test:node3_1>test1</test:node3_1>
       </test:node3>
     </test:node1> 
```

是否有捷径可寻？到目前为止，我已经尝试过：

```
 String messageString = message.getPayloadAsString();
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  
 DocumentBuilder builder;  
 Document document = null;
 try  
    {  
        builder = factory.newDocumentBuilder();  
        document = builder.parse( new InputSource( new StringReader( messageString) ) );  
    } catch (Exception e) {  
        e.printStackTrace();  
    } 

    XmlObject inboundMessageObject = XmlObject.Factory.parse(document);
    XmlOptions xmlOptions = new XmlOptions(); 
    Map<String, String> namespaceMap = new HashMap<String, String>(); 
    namespaceMap.put("www.test.com", "test");
    xmlOptions.setSaveSuggestedPrefixes(namespaceMap);

            xmlObject.save(System.out, xmlOptions); 

    String prefixedXML = inboundMessageObject.xmlText(xmlOptions);
    return prefixedXML; 
```

我看到的是，prefixedXML 字符串与 messageString 字符串相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:04:00.277

尝试

```
xml = xml.replaceFirst("xmlns=", "xmlns:test=").replaceAll("<(/?)", "<$1test:"); 
```

# wpf - 如何删除用户控件的第一个元素？

> ID：16148943
> 
> 赞同：1
> 
> 时间：2013-04-22T13:54:43.450
> 
> 标签：wpf, wpf-controls

我有一个用户控件，并已将其作为设计的第一个元素。现在运行时，我想删除并想删除 Grid 元素的实例并想添加 Panel 元素。怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:53:05.580

借助以下代码，我们可以找到 UserControl 的第一个元素。

```
ContentPresenter _ContentPresenter = VisualTreeHelper.GetChild(VisualTreeHelper.GetChild(this, 0), 0) as ContentPresenter;
FrameworkElement _First_Element = VisualTreeHelper.GetChild(_ContentPresenter, 0) as FrameworkElement; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:17:43.350

添加和删​​除子控件可能很棘手，因此我建议您将两个控件都作为 UserControl 的子控件，并`Visibility`根据需要更改它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:29:03.410

你的问题很难理解。也许您应该在发布之前重新阅读。

据我了解，您想更改 UserControl 的内容吗？这很简单：只需使用您喜欢的任何其他元素设置 UserControl 的 Content-Property。

“面板”不是真正的元素，它是其他面板（如 Grid 或 Canvas）的基类。因此，如果您想用 Canvas 替换 Grid 作为 UserControl 的内容，只需使用：

```
userControl.Content = new Canvas(); 
```

如果这对您没有帮助，请重新处理您的问题。

# python - Python - 循环文件 - 顺序

> ID：16148951
> 
> 赞同：16
> 
> 时间：2013-04-22T13:55:04.217
> 
> 标签：python

有谁知道 Python 在循环文件时如何排列文件？我需要以固定顺序循环遍历文件夹中的某些文件（最好根据文件名按字母数字顺序），但 Python 似乎以相当随机的顺序循环遍历它们。到目前为止，我正在使用此代码：

```
filelist = glob.glob(os.path.join(path, 'FV/*.txt'))
for infile in filelist: 
  #do some fancy stuff
  print str(infile) 
```

并且文件名的打印顺序对我来说并不明显。

有没有什么简单的方法可以为该循环预定义某个顺序？谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-22T13:58:04.207

据我在文档中看到的，[`glob.glob()`](http://docs.python.org/3.3/library/glob.html)没有定义的顺序。鉴于此，最简单的确定方法是对返回给您的列表进行排序：

```
filelist = glob.glob(os.path.join(path, 'FV/*.txt'))
for infile in sorted(filelist): 
  #do some fancy stuff
  print str(infile) 
```

这将只是作为字符串排序 - 这给出了您正在寻找的简单固定顺序。如果您需要特定的顺序，则将[`sorted()`](http://docs.python.org/3/library/functions.html#sorted)其`key`作为关键字参数，这是一个给出排序顺序的函数。有关更多信息，请参阅文档（先前链接）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T16:55:24.830

如果您想仅按字母顺序（而不是字母数字顺序）遍历文件，您将希望通过按以下方式调用 sorted 使其不区分大小写：

```
 filelist = glob.glob(os.path.join(path, 'FV/*.txt'))
    for infile in sorted(filelist, key=lambda s: s.lower()): 
      #do some fancy stuff
      print str(infile) 
```

否则，只需使用 filelist 上的 sorted 函数。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-22T13:56:13.783

```
import os
for root, dirs, files in os.walk(os.path.join(path, 'FV/'), topdown=True):
  print root
  print files.sort(reverse=True) 
```

这是一个替代方案..（考虑到`glob.glob()`订购项目不带参数，我只是提出了一个替代方案`glob.glob()`，`walk()`..它需要可能有用的参数，我认为反对票是不公平的，但嘿，每个人都有权发表他们的意见-。 -)

# java - 在 Java 中使用 GroupLayout 构建 GUI

> ID：16148958
> 
> 赞同：5
> 
> 时间：2013-04-22T13:55:22.953
> 
> 标签：java, swing, grouplayout

我需要使用 GroupLayout（而不是其他布局）构建一个 GUI。GUI 将如下所示：

```
----------------------------
| field 1  field 2  field 3 |

| FFIEEELLLDD4 FIELDDDDDD5  |

| FIEEEEEEEEEEEEEEELDDDD 6  |
_____________________________ 
```

字段 1 - 3 各取 1 个长度，字段 4 和 5 各取 1.5 个长度，字段 6 取 3 个长度。这三个组在开始和结束时都对齐。

我一直在参考这个[http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/group.html)。

为简单起见，我将使用 JLabels 作为字段的占位符。

到目前为止，这是我的代码，我没有得到我想要的 GUI。

```
public class RecorderGUI extends JFrame {
    private final JLabel one;
    private final JLabel two;
    private final JLabel three;
    private final JLabel four;
    private final JLabel five;
    private final JLabel six;
public RecorderGUI() {
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    GroupLayout layout = new GroupLayout(panel);
    panel.setLayout(layout);

    one = new JLabel("one");
    two = new JLabel("two");
    three = new JLabel("three");
    four = new JLabel("four");
    five = new JLabel("five");
    six = new JLabel("six");
        layout.setHorizontalGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup())
                .addComponent(one)
                .addComponent(two)
                .addComponent(three)
            .addGroup(layout.createSequentialGroup())
                .addComponent(four)
                .addComponent(five))
            .addComponent(six));

        layout.setVerticalGroup(layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                .addComponent(one)
                .addComponent(two)
            .addComponent(three))
        .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
            .addComponent(four)
            .addComponent(five))
            .addComponent(six));
        frame.add(panel);
        frame.pack();
        frame.setVisible(true);
    }
    public static void main(final String[] args) {
        RecorderGUI GUI = new RecorderGUI();
    } 
```

代码结果如下，这不是我想要的：一、二、三合并在一起；四和五也重叠。

抱歉，我想添加输出 GUI 的图片，但我无法附上图片，因为我的声望低于 10 :(。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-22T14:37:27.703

修复了一些括号并为组件添加了调整大小的提示：

```
layout.setHorizontalGroup(layout
    .createParallelGroup(GroupLayout.Alignment.LEADING)
    .addGroup(layout.createSequentialGroup()
        .addComponent(one, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .addComponent(two, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .addComponent(three, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    .addGroup(layout.createSequentialGroup()
        .addComponent(four, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .addComponent(five, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    .addComponent(six, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE));

layout.setVerticalGroup(layout.createSequentialGroup()
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
        .addComponent(one).addComponent(two).addComponent(three))
    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
        .addComponent(four).addComponent(five))
    .addComponent(six)); 
```

![在此处输入图像描述](https://i.stack.imgur.com/8Jb1A.png)

# php - 手机App会话登录

> ID：16148960
> 
> 赞同：1
> 
> 时间：2013-04-22T13:55:24.890
> 
> 标签：php, javascript, html

我会尽力问这个问题......对不起，如果它不是那么清楚。

当我在网站上创建登录表单时，后端会使用用户 ID 和数据库中的一些信息检索 $_SESSION 变量 (PHP)。我用 session_start() 调用这个变量，我可以检查权限等等。

如果我在手机应用程序 (HTML5) 上执行此操作，所有代码都在设备上，并且我没有服务器会话......我该如何维护这个会话？我是否必须在设备上存储一些内容并在每次发布请求时发送？我对此有点困惑......任何帮助将不胜感激。

# java - 运行时 Jsoup 错误：线程“主”java.lang.NoClassDefFoundError 中的异常

> ID：16148962
> 
> 赞同：1
> 
> 时间：2013-04-22T13:55:36.957
> 
> 标签：java, eclipse, jsoup

我收到以下错误

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/jsoup/Jsoup
    at Main.main(Main.java:42)
Caused by: java.lang.ClassNotFoundException: org.jsoup.Jsoup
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more 
```

现在我到目前为止所做的：

我在我的项目文件夹中创建了一个 libs 文件夹并将其添加到`Jsoup.jar`那里。然后在eclipse中我点击属性，添加外部Jar并添加它。我看到了引用的库。

但问题仍然存在。我没有得到编译错误。所以这是一个运行时问题。感谢帮助。

编辑：如果我使用编译，我发现了以下内容

```
 javac -classpath /path/to/jsoup.jar myclass.java 
```

接着

```
 java -classpath /path/to/jsoup.jar myclass 
```

它运行完美。现在。这对我不起作用，因为我将在没有 Jsoup 的计算机上使用我的应用程序。那么如何解决这个运行时问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:17:16.567

转到`Run configurations...`菜单并检查运行任务的类路径。看起来您为编译步骤添加了库，但它没有在运行步骤中设置。

**编辑（评论后）**

我深入研究了这个问题，发现应用程序容器需​​要这种依赖关系。所以你只需要将这个库添加到你的应用服务器的类路径中。如果您使用Tomcat，只需将库放到`%CATALINA_HOME%\lib`目录中即可。

# android - 调用 WakefulIntentService.sendWakefulWork 导致 runtimeexception

> ID：16148963
> 
> 赞同：0
> 
> 时间：2013-04-22T13:55:38.907
> 
> 标签：android, alarm, wakelock

运行此代码时，它会给我一个异常 RuntimeException。我还没有向 WakeWork.class 添加任何代码。关于为什么会爆炸的任何想法？

这是从我的“接收器上”警报中调用的。

```
 Intent i = new Intent(context, WakeWork.class);
   WakefulIntentService.sendWakefulWork(context, i); 
```

清单.xml
`<service android:name="com.PageP.WakeWork"></service>`

WAKEWORK.CLASS

```
package com.PageP;

import android.content.Intent;

public class WakeWork extends WakefulIntentService {

public WakeWork(String name) {
    super(name);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(){
    super.onCreate();
}

@Override
protected void doWakefulWork(Intent intent) {
    // TODO Auto-generated method stub

}
} 
```

错误

```
 Thread [<1> main] (Suspended (exception RuntimeException))  
        ActivityThread.handleCreateService(ActivityThread$CreateServiceData) line: 2346 
        ActivityThread.access$1600(ActivityThread, ActivityThread$CreateServiceData) line: 126  
        ActivityThread$H.handleMessage(Message) line: 1221  
        ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
        Looper.loop() line: 137 
        ActivityThread.main(String[]) line: 4560    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 511  
        ZygoteInit$MethodAndArgsCaller.run() line: 784  
        ZygoteInit.main(String[]) line: 551 
        NativeStart.main(String[]) line: not available [native method] 
```

长猫

04-22 10:32:04.127: W/AsyncTask(9004): com.PageP.GrabURL.doInBackground(GrabURL.java:36) 04-22 10:32:04.127: W/AsyncTask(9004): 在 com.PageP .GrabURL.doInBackground(GrabURL.java:1) 04-22 10:32:19.080: E/AndroidRuntime(9004): java.lang.RuntimeException: 无法实例化服务 com.PageP.WakeWork: java.lang.InstantiationException: 可以't 实例化类 com.PageP.WakeWork; 没有空构造函数 04-22 10:32:19.080: E/AndroidRuntime(9004): Caused by: java.lang.InstantiationException: can't instantiate class com.PageP.WakeWork; 没有空的构造函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:45:35.917

改变：

```
public WakeWork(String name) {
    super(name);
    // TODO Auto-generated constructor stub
} 
```

至：

```
public WakeWork() {
    super("George");
} 
```

（请随意用其他值代替名称）

正如堆栈跟踪显示的那样，Android 无法实例化您的服务，因为没有零参数的公共构造函数，这正是上述修复解决的问题。

# facebook-graph-api - 是否需要存储访问令牌？

> ID：16148965
> 
> 赞同：0
> 
> 时间：2013-04-22T13:55:39.477
> 
> 标签：facebook-graph-api, facebook-php-sdk, facebook-fql

我是 FB 应用程序开发的新手。请清楚我，在用户安装我的应用程序后，我得到他们的访问令牌是否有必要存储这些访问令牌以访问他们的数据并代表他们发布，或者有没有办法让所有使用我的应用程序的所有用户访问令牌.. ..

# php - Symfony2 两个冲突的身份验证侦听器

> ID：16148966
> 
> 赞同：0
> 
> 时间：2013-04-22T13:55:41.287
> 
> 标签：php, security, authentication, symfony, listener

我创建了自定义身份验证。但由于我不知道的原因，有两个活动的身份验证侦听器。因此身份验证提供程序管理器被称为 Twice。

Firsty`AuthListener`被调用，它运行 mu`AuthenticationProviderManager`返回正确的 Token。然后`UsernamePasswordFormAuthenticationListener`被称为`AuthenticationProviderManager`再次运行。它返回“错误凭据”。

**我怎样才能“禁用” `UsernamePasswordFormAuthenticationListener`？所以只有我的自定义监听器被调用？**

安全：

```
providers:
    api:
       id: api_user_provider  

firewalls:
    secured_area:
        pattern:    ^/
        user: true
        form_login:
            login_path: /login
            check_path: /check_login                
        logout: ~ 
```

服务：

```
 api_user_provider:
        class:  Ad\FrontendBundle\Security\User\UserProvider
        arguments: ["@service_container"]
    user.security.authentication.provider:
       class:  Ad\FrontendBundle\Security\Authentication\Provider\AuthProvider
       arguments: ['', %kernel.cache_dir%/security/nonces]
    user.security.authentication.listener:
       class:  Ad\FrontendBundle\Security\Firewall\AuthListener
       arguments: ["@security.context", "@security.authentication.manager"] 
```

工厂

```
class ApiFactory implements SecurityFactoryInterface
{
    public function create(ContainerBuilder $container, $id, $config, $userProvider, $defaultEntryPoint)
    {
        $providerId = 'security.authentication.provider.user.'.$id;
        $container
            ->setDefinition($providerId, new DefinitionDecorator('user.security.authentication.provider'))
            ->replaceArgument(0, new Reference($userProvider))
        ;
        $listenerId = 'security.authentication.listener.user.'.$id;
        $listener = $container->setDefinition($listenerId, new DefinitionDecorator('user.security.authentication.listener'))
        ;
        return array($providerId, $listenerId, $defaultEntryPoint);
    }    

    public function getPosition()
    {
        return 'pre_auth';
    }

    public function getKey()
    {
        return 'user';
    }

    public function addConfiguration(NodeDefinition $node)
    {}
}

class AdFrontendBundle extends Bundle
{
    public function build(ContainerBuilder $container)
    {
        $extension = $container->getExtension('security');
        $extension->addSecurityListenerFactory(new ApiFactory());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-10T07:59:44.607

好问题。我知道我回答有点晚了，但这是你的做法。

在您的工厂中，您具有此功能

```
public function getKey()
{
    return 'user';
} 
```

这是配置的关键。在 Symfony\Bundle\SecurityBundle\DependencyInjection\Security\Factory\FormLoginFactory（启用 UsernamePasswordFormAuthenticationListener 的类）中，您具有以下功能：

```
public function getKey()
{
    return 'form-login';
} 
```

所以如果你看看你的 security.yml

```
firewalls:
  secured_area:
    pattern:    ^/
    user: true
    form_login:  # <--- This is where you enables the default factory
      login_path: /login
      check_path: /check_login                
    logout: ~ 
```

您不想指定“form_login”。这是您启用 UsernamePasswordFormAuthenticationListener 的地方。一个好的默认配置是：

```
firewalls:
  secured_area:
    pattern:    ^/
    user: true              
    logout: ~ 
```

[根据 Fabien 的博客文章](http://symfony.com/blog/new-in-symfony-2-4-customize-the-security-features-with-ease)，这应该更容易在 Symfony2.4 中配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T23:03:49.450

您可以使用 stopPropagation 函数 [http://api.symfony.com/2.0/Symfony/Component/EventDispatcher/Event.html#method_stopPropagation](http://api.symfony.com/2.0/Symfony/Component/EventDispatcher/Event.html#method_stopPropagation)

```
$event->stopPropagation() 
```

更多信息可以在这里找到： [http ://symfony.com/doc/2.0/components/event_dispatcher/introduction.html#stopping-event-flow-propagation](http://symfony.com/doc/2.0/components/event_dispatcher/introduction.html#stopping-event-flow-propagation)

# android - Android：HTC 设备上的 UDP 客户端

> ID：16148968
> 
> 赞同：0
> 
> 时间：2013-04-22T13:55:46.953
> 
> 标签：android, udp, htc-android

我的应用程序包含一个从 wifi 接口接收数据的客户端线程（UDP 和 TCP）。我已经在某些设备（三星、索尼和 HTC）上测试了该应用程序。它适用于 TCP 模式下的所有设备，但在 UDP 模式下，它仅适用于 Sony 和 Samsung 设备，不适用于 HTC。

这是我的UDP代码：

```
 socketUDP = new DatagramSocket(SERVERPORT);
                byte[] buf = new byte[50];
                socketUDP.setSoTimeout(timeOut);

                DatagramPacket packet = new DatagramPacket(buf, buf.length);

                while (UDPRunning) {

                    socketUDP.receive(packet);

                    String str = new String(packet.getData(), 0,
                            packet.getLength());
                    packet.setLength(buf.length);

                    Message msg = handler.obtainMessage();
                    Bundle b = new Bundle();
                    b.putString("getStr", str);
                    msg.setData(b);

                    handler.sendMessage(msg);
                } 
```

HTC 设备测试：HTC sense (android 4.0.3), HTC hope (android 2.2), HTC One SV (4.0.4)

我的问题：为了使用这个 UDP 客户端，HTC 设备是否有任何特定的自动化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-13T00:39:52.150

我的设备也有同样的问题，这也是 HTC 的感觉。电脑上的另一方（客户端）无法访问它。愿链接能帮你整理出来。我从未尝试过该解决方案，因为我更换了手机。

[http://www.flattermann.net/2010/09/fix-udp-broadcasts-on-htc-phones-running-stock-firmware/](http://www.flattermann.net/2010/09/fix-udp-broadcasts-on-htc-phones-running-stock-firmware/)

# ember.js - 如何在 Ember 中打印模板

> ID：16148969
> 
> 赞同：0
> 
> 时间：2013-04-22T13:55:50.287
> 
> 标签：ember.js, handlebars.js, javascript-framework, ember-data

我的 html 中有这个：

```
<script type="text/x-handlebars" template-name="index">
    <h1>Login Page</h1>
    {{#linkTo "index"}}<img class="logo">{{/linkTo}}
    <button {{action doLogin}}>Login</button>
</script> 
```

我的 router.js 中有这个：

```
myTalk.Router.map(function() {
   this.route('index', {path:"index"});
}); 
```

但我有这个错误：

```
Uncaught Error: No route matched the URL '..../index.html' 
```

提前感谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:14:43.303

这里发生了一些事情。

首先，`template-name`命名模板的方式不正确。更改`template-name="index"`为`id="index"`或`data-template-name="index"`

其次，您不需要指定`index`模板的路径。默认情况下，ember 会自动创建一个，路径设置为`/`. 所以在这种情况下，你甚至不需要路由器定义

最后，似乎您正在加载 URL 设置为的页面，`..../index.html`这与 ember 中的任何内容都不匹配。

这是一个有效的 jsFiddle：http: [//jsfiddle.net/mgrassotti/XfDjm/1/](http://jsfiddle.net/mgrassotti/XfDjm/1/)

# linux-kernel - 创建灵活的 mtd 分区

> ID：16148973
> 
> 赞同：1
> 
> 时间：2013-04-22T13:55:56.517
> 
> 标签：linux-kernel, partitioning, u-boot

我想根据其内容填充分区。在系统启动期间，我想检查闪存区域是否包含任何数据。如果为真 - 使其只读或可重写可见。

我想自动制作，没有U-boot shell ...

在 Linux 内核级别上，我只能在分区表中静态地制作它。是否可以在 U-boot 中做到这一点？

谢谢你的任何提示。

### 更新： CmdLine 和 mtd_partition 检查

我检查了两种可能性： U-boot mtd-parts

```
U-Boot> 
setenv mtdparts mtdparts=atmel_nand:2M@0x40000(u-boot),30M@0x200000(kernel),-@0x2000000(user),**0x20000@0x100000(u)**

U-Boot>
mtdparts 
```

填满分区后不允许分区

不幸的是，它不可能在表和表中添加分区。`0x100000`如果数据存在于区域中，我希望将 mtd4 作为单独的分区。

在内核 mtd_partition 表中是可能的。但是这个表是在 arch/arm...board 文件中声明的（早期启动阶段）。在这个启动阶段，我无法读取 nand。我无权访问 nand 驱动程序提供的 nand 读取接口。

# 更新：解决方案

谢谢你的所有提示。遵循“无艺术噪音”的提示，我决定在 u-boot 中读取 nand 区域，并通过不同的内核命令行参数发送有用的参数。这是非常灵活的。其他一些硬件配置可以存储在闪存中并用于内核初始化。

捕获内核参数可以通过以下方式完成：`early_param()`函数。

# eclipse - 升级 Typesafe Stack 后如何修复损坏的单元测试？

> ID：16148977
> 
> 赞同：1
> 
> 时间：2013-04-22T13:56:04.633
> 
> 标签：eclipse, scala, noclassdeffounderror, scala-2.10, scalatest

我刚刚升级到 Scala 2.10.1 的 Typesafe IDE（我一直在使用 2.9.something）。Scala 工作，但单元测试`org.scalatest`不再工作。我明白了

```
 java.lang.NoClassDefFoundError: scala/reflect/ClassManifest 
```

（这是在 Mac OS X 10.7.5 上。）我该如何解决这个问题？

在现有项目中，我在 org.scalatest 文件夹中有 scalatest_2.9.2，在 Referenced Libraries 中有 scalatest_2.9.2-1.8.jar。没有编译问题。我需要安装或移动什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T14:01:38.523

ClassManifest 在 2.10 中已被弃用，因此它是针对 2.9.2 编译的 scalatest 的二进制不兼容问题（主要的 scala 版本**不**保证二进制兼容）（从工件名称中可以看出）。解决方案非常简单：只需与为 2.10 编译的最新 scalatest 版本交换`scalatest_2.9.2-1.8.jar`，[例如](http://www.scalatest.org/download)与“scalatest_2.10-1.9.1”

# c# - 时间提醒应用程序 C#

> ID：16148979
> 
> 赞同：1
> 
> 时间：2013-04-22T13:56:16.550
> 
> 标签：c#, timer, alarm

我正在尝试在 C# - Visual Studio 2010 中制作一个应用程序。这个应用程序就像一个提醒。您将便笺放入文本框中，并用于`DateTimePicker`选择何时需要提醒事情。
问题是我不知道该怎么做。

我从 DatetimePicker 中选择了日期和时间：

```
dateTimePicker1.Format = DateTimePickerFormat.Custom;
dateTimePicker1.CustomFormat = "dd/MM/yyyy HH:mm:ss"; 
```

现在我需要将 datetimePicker 中的时间与当前日期和时间进行比较，如果值相同，则显示带有一些文本的消息按钮。

我不确定是否可以使用计时器以及如何比较这些值？像这样的东西:-)

```
string timese = DateTime.Now.ToString("dd/MM/yyyy HH:mm:ss");
string theDay = dateTimePicker1.Value.ToShortDateString();

private void timer1_Tick(object sender, EventArgs e)
{
    if (theDay == theDay2)
    {
        MessageBox.Show ("Reminder");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:02:03.107

首先不要使用字符串：

```
DateTime theDay = dateTimePicker1.Value;

private void timer1_Tick(object sender, EventArgs e)
{
    if (DateTime.Now.CompareTo(theDay) > 0 ) // checks if now is after theDay
    {
        theDay = DateTime.MaxValue;
        // makes sure there wont be multiple MessageBox due to event queuing
        // you could also just stop the timer here
        MessageBox.Show ("Reminder");
    }
} 
```

不建议使用日期的完全匹配 (==)，因为计时器可能会跳过确切的时间并且永远不会正确。

编辑：我的比较是错误的方式，现在应该是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T14:01:14.567

你可以比较一下：

```
if(dateTimePicker1.Value==DateTime.Now) 
```

两者都是日期时间。

但是上面的代码有一个问题。它将时间与毫秒进行比较，可能永远不会相同。因此，您可以将代码更改为类似

```
if(dateTimePicker1.Value-DateTime.Now).TotalSeconds<2) 
```

(DateTime1 - DateTime2) is timepan more abote this class is on [MSDN](http://msdn.microsoft.com/pl-pl/library/system.timespan.totalseconds.aspx)

# php - 没有密码的文件中的php exec命令

> ID：16148981
> 
> 赞同：6
> 
> 时间：2013-04-22T13:56:17.930
> 
> 标签：php, sudoers

我需要从 php 执行命令来写入我的`vhosts.conf`. 我有一个`add_vhost.sh`文件：

```
cat /home/www/test/conf/vhosts.conf >> /etc/httpd/conf.d/vhosts.conf 
```

这是 php 脚本：

```
 exec($path_to_add_vhost_sh_file, $output); 
```

我想为`peter`用户设置没有密码要求来执行这个文件，所以我在我的`/etc/sudoers`

`peter ALL=(ALL)NOPASSWD:/home/www/test/conf/add_vhost.sh`但它仍然无法正常工作，即使在控制台中也是如此。*软呢帽 15*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T13:59:52.653

如果您的网络服务器以`www-data`用户用户身份运行：

```
www-data ALL=(ALL:ALL) NOPASSWD: /path/to/your/script 
```

如果不是，请替换`www-data`为您的 Web 服务器的用户名。

在 php 中不要错过在命令行前面加上`sudo`：

```
exec('sudo /path/to/your/script'); 
```

# ios - 核心数据：对象操作（良好实践）

> ID：16148986
> 
> 赞同：0
> 
> 时间：2013-04-22T13:56:27.163
> 
> 标签：ios, core-data, entity

核心数据对于操纵模型来说并非易事。

在我使用 Core Data 之前，我使用了一个简单的 sqlite3 数据库并操作我分配的对象并修改我想要的方式。

但是对于Core Data，如果我修改一个实体或删除我创建它的上下文......这对于我的应用程序的协调来说真的很危险。

我的问题很简单，您如何安全地操作实体？

**您是否将实体仅用于保存、删除、更新和获取持久存储，或者您在实体中编写函数并像使用真实对象一样使用它？**

例如，我有一张有很多叠加层的地图，每个叠加层都有玩家。我创建了四个对象：MyAppPlayer：Models，Player：Entity，MyAppOverlay：Models，Overlay：Entity。MyAppPlayer 加载和存储实体，这是一个好习惯吗？如果没有，你怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:36:10.420

Core Data 是一个对象图，而不是数据库。

您应该将 Core Data 简单地视为对象持久性的支柱。持久存储包含数据，您的自定义类包含功能。

是的，请向您的类文件添加自定义功能。这就是他们来这里的目的。

但是，请确保您了解这些概念。您不会“删除上下文”。它只是一个方便的“便签本”，用于您的数据操作。您将上下文传递给您的控制器，以便他们可以访问和操作数据。

在您的情况下，无需区分“模型”和“实体”。实体确实是模型的一部分（在我们的 NSManagedObjectModel 中定义）。这很简单：创建依赖自定义实体作为数据源的地图叠加层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T14:11:23.440

将实体视为表，将属性视为列。关系（一对多、多对多等）也非常相似，因为 CoreData 只是使用 SQLite 作为它的持久存储。实体可以有多个属性和关系。如果您熟悉 SQL，那么这一切都应该是有意义的。您可以打开 SQLite 存储文件并查看 CoreData 如何组织事物以消除任何混乱。

# objective-c - 怎么会没有调用 didUpdateToLocation 和 didFailOnError 呢？

> ID：16148992
> 
> 赞同：0
> 
> 时间：2013-04-22T13:56:45.743
> 
> 标签：objective-c, cllocationmanager

```
+(void) vStartUpdatingLocation
{
    while (false);
    AssertNonMainThread
    [[NSOperationQueue mainQueue]addOperationWithBlock:^{
        CLLocationHandler * singleton = [CLLocationHandler singleton];
        CLLocationManager * locationManager = singleton.locationManager;
        NSAssert(locationManager.delegate==singleton,@"They are meant for each other"); //Assertion here
        [locationManager startUpdatingLocation]; //update location
        PO(singleton.locationManager);
        PO(singleton.locationManager.delegate);
        PO(singleton); //verify that locationManager.delegate == singleton
        while(false);
    }];
}
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    AssertMainThread;//break point here never called
    PO(self.locationManager);
    PO(manager);
    while(false);
    [self finishUpdating];
    [self updateCurrentPlaceCache:newLocation];
}
-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error
{
    [self finishUpdating]; //no love here too
} 
```

我把大部分信息放在评论上。

我已经验证 locationManager.delegate 确实是 CLLocationHandler 类型的单例对象

然而

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation

-(void)locationManager:(CLLocationManager *)manager didFailWithError:(NSError *)error 
```

不叫。它曾经工作过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:35:35.270

您需要使用 performSelectorOnMainThread 设置您的位置管理器。如果在后台线程上设置它将不起作用。很可能是因为您的运行循环在后台线程上不活动。请参阅[为什么我的 CLLocationmanager 委托没有被调用？](https://stackoverflow.com/questions/3731881/why-is-my-cllocationmanager-delegate-not-getting-called)