# StackOverflow 问答 15181000-15181999

# php - foreach 与 xml 和 switch

> ID：15181002
> 
> 赞同：1
> 
> 时间：2013-03-03T00:15:52.530
> 
> 标签：php, xml, foreach, switch-statement

我有一个如下所示的 XML 文件：

```
<services>
  <service>
    <code>MODULE_1</code>
    <name>Regular</name>
    <price>14.85</price>
  </service>

  <service>
    <code>MODULE_2</code>
    <name>Express</name>
    <price>22.50</price>
  </service>

</services> 
```

`$result`从另一台服务器检索文件。我的代码如下所示：

```
$methods = array() ;    
$xmlQuotes = new SimpleXMLElement($result)  ;

foreach($xmlQuotes as $quote) {
    $add = 0 ; $f = 0 ;
    switch ($quote->code) {
        case  "MODULE_1" ;
        if ((in_array("Regular", $this->allowed_methods))) {
            $add = MODULE_1_HANDLING ; $f = 1 ;
            $id = "m_1";
            $cost = $quote->price;
            $description = $quote->name;
        }
        break;

        case  "MODULE_2" ;
        if ((in_array("Express", $this->allowed_methods))) {
            $add =  MODULE_2_HANDLING ; $f = 1 ;
            $id = "m_2";
            $cost = $quote->price;
            $description = $quote->name;
        }
        break;
    }

    if (($cost > 0) && ($f == 1)) {
        $cost = $cost + $add ;
        $methods[] = array('id' => "$id",
                           'title' => "$description",
                           'cost' => "$cost");
    }
}

$this->quotes['methods'] = $methods; 
```

这一切都很好，直到最后一点 - 当我使用代码时，`$methods`数组不会返回正确的`$cost`并且`$description`它是匹配的`$code`，而是返回我的第一个模块的价格和描述。它看起来像这样：

```
MODULE_1: Regular: 14.85
MODULE_2: Regular: 14.85 
```

我在这里疯了，因为我显然不知道我在做什么，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:32:22.150

看起来问题出在你的第二种`((in_array("Express", $this->allowed_methods)))`情况。如果它返回 false 并且先前的条件`if ((in_array("Regular", $this->allowed_methods)))`返回 true，则 cost 和 description 将始终只包含它们的第一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:15:52.603

在没有这些语句的情况下尝试了您的代码`if`，然后`var_dump($methods)`，结果：

```
Notice: Use of undefined constant MODULE_1_HANDLING - assumed 'MODULE_1_HANDLING' in /in/dTOdQ on line 24  
Notice: Use of undefined constant MODULE_2_HANDLING - assumed 'MODULE_2_HANDLING' in /in/dTOdQ on line 33  

array(2) {
  [0]=>
  array(3) {
    ["id"]=>
    string(3) "m_1"
    ["title"]=>
    string(7) "Regular"
    ["cost"]=>
    string(2) "14"
  }
  [1]=>
  array(3) {
    ["id"]=>
    string(3) "m_2"
    ["title"]=>
    string(7) "Express"
    ["cost"]=>
    string(2) "22"
  } 
```

在这里试验一下：http: [//3v4l.org/dTOdQ](http://3v4l.org/dTOdQ)

# javascript - 在 JavaScript 中管理像 ArrayList 这样的数组：删除元素并缩小创建的差距

> ID：15181007
> 
> 赞同：0
> 
> 时间：2013-03-03T00:16:14.060
> 
> 标签：javascript, arrays, arraylist

我在 JavaScript 中设置了 Arc 和 Line 类，用于管理画布的许多弧线和线条。我计划有一个数组来管理它们，我想需要添加或删除像 ArrayList 这样的元素。

在谷歌搜索之后，似乎 JavaScript 并不直接支持这一点，最好的情况是当你想删除一个元素时将它设为 null。如果我错了，请告诉我。如果我没有错，最好的办法是什么？我应该按照这些思路创建一个函数吗？（该示例只是使用整数使事情变得简单）

```
var example = new Array(1, 2, 3, 4, 5, 6, 7, 8, 9);
example[2] = null;
example[7] = null;

example = removeNulls(example);
function removeNulls(inArr) {
    var newArr = new Array();
    for (var i = 0; i < inArr.length; i++) if (inArr[i] != null) newArr.push(inArr[i]);
    return newArr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:17:58.943

您可以[`.splice`](http://www.w3schools.com/jsref/jsref_splice.asp)在阵列上使用。

# objective-c - 我应该如何停止/恢复 iOS 游戏中的所有声音？

> ID：15181016
> 
> 赞同：0
> 
> 时间：2013-03-03T00:17:40.130
> 
> 标签：objective-c, avaudioplayer, avaudiosession

我目前有背景音乐，当应用程序打开并运行无限循环时会启动，直到用户进入设置并使用它关闭音乐

```
-(IBAction)stopMusicButton{

[(AppDelegate*)[UIApplication sharedApplication].delegate stopMusic];

} 
```

他们还可以在设置页面中恢复音乐。我感到困惑的是，如果用户不想要噪音，如何阻止我的应用程序中的其他声音播放。例如，当用户浏览我的应用程序的菜单时，按下某些东西时会播放各种声音。如何让用户能够打开和关闭这些声音？还有几个不同的视图，它们各自的 .h/.m 文件，所有这些都播放声音。如果您能指出我正确的方向，我将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:47:20.170

我使用单例类来存储设置信息——你也可以使用你的应用程序委托。您所需要的只是一个名为 isSoundMuted 或类似的布尔属性。在声音被静音或取消静音时设置它，然后在 if 块中播放任何声音之前检查变量的值。

```
if (MySingletonClass.isSoundMuted == NO)
{
    [self playSound]
} 
```

# bash - 给一个文件/目录与另一个相同的修改日期

> ID：15181024
> 
> 赞同：15
> 
> 时间：2013-03-03T00:18:13.117
> 
> 标签：bash, unix

如何在基于 Unix 的系统中将修改日期和时间从一个文件/目录“复制”到另一个文件/目录？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-03T00:19:59.117

你有一些选择：

*   `touch -t STAMP -m file`如果您想更改时间，请使用
*   如果`cp --preserve=timestamps`您正在复制文件并希望保留时间，请使用
*   **用于`touch -r`将时间设置为“参考”文件**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T09:24:40.767

以后为了方便起见，将以下行放入您的 .bashrc 文件中：

```
cptimestamp() {
  if [ -z $2 ] ; then
    echo "usage: cptimestamp <sourcefile> <destfile>"
    exit
  fi
  touch -d @$(stat -c "%Y" "$1") "$2"
} 
```

执行“source ~/.bashrc”，你就可以开始了。如果您更喜欢脚本，请删除第一行和最后一行——然后在前面加上“#!/bin/sh”

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-12-16T09:36:58.290

这将完全满足您的要求：

触摸 -r "source_file" "destination_file"

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T00:35:12.130

您可以使用`stat`unix 时间戳格式获取源文件的时间戳，然后使用将其传播到目标文件`touch -d`

```
src_file=/foo/bar
dst_file=/bar/baz

touch -d @$(stat -c "%Y" "$src_file") "$dst_file" 
```

注意：这仅适用于支持使用前缀的`GNU coreutils`unix 时间戳的情况`@``touch`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T00:19:47.140

使用[`touch`](http://www.manpagez.com/man/1/touch/)；它包含几个可选标志，允许您设置此类属性。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-03T00:29:36.477

如果您使用 cp，请使用 -p 选项来保留 mod 时间。cp -p

# .htaccess - 没有扩展名的页面，之前忽略了文本

> ID：15181031
> 
> 赞同：0
> 
> 时间：2013-03-03T00:19:10.987
> 
> 标签：.htaccess

我当前的 .htaccess 允许我按如下方式查看页面：

```
http://www.test.com/test.php as http://www.test.com/test

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [NC,L] 
```

如何在文件名之前添加任何文本，这些文本将被忽略，例如：

```
http://www.test.com/test34566/test or http://www.test.com/anything/test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:29:06.737

就正则表达式而言，您的 URL 将拆分为最后一个反斜杠*之前的所有内容，以及它之后的所有内容。*

```
^(.*)/([^/]*)/?$ 
```

这应该允许您忽略 ($1) 之前的所有内容并使用 ($2) 之后的所有内容。

请注意，如果您使用的是示例中的目录，则需要使用重写条件，该条件还检查以确保请求的 URL 不是实际目录，也不是文件。

# c# - 解析 JSON 时性能不佳 - JsonTextWriter 作为替代方案？

> ID：15181033
> 
> 赞同：0
> 
> 时间：2013-03-03T00:19:21.377
> 
> 标签：c#, json

我正在使用下面的代码来解析从服务器返回的 JSON 响应。这有点慢。我想知道我是否应该使用 JsonTextWriter 作为替代方案？

我将如何使用 JsonTextWriter 实现这一点？

```
string responseString = string.Empty;
Uri uri = new Uri ("http://localhost/complex-json.json");
HttpWebRequest request = new HttpWebRequest (uri);
request.Method = "GET";

HttpWebResponse response = request.GetResponse () as HttpWebResponse;
using (StreamReader sr = new StreamReader(response.GetResponseStream())) {
responseString = sr.ReadToEnd ();
}
response.Close ();

JObject obj = JObject.Parse (responseString);
JArray a = (JArray)obj["questions"];
IList<question> questions = a.ToObject<IList<question>>();
for (int i = 0; i < a.Count; i++) {
 Console.WriteLine(questions[0].answer_count);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:16:01.420

System.Web.Extensions.dll 有一个`JavaScriptSerializer`. 我使用以下 2 种扩展方法进行序列化和反序列化：

```
public static T JsonDeserialize<T>(this string json)
        {
            return new JavaScriptSerializer().Deserialize<T>(json);
        }

public static string ToJson<T>(this T item)
        {
            return new JavaScriptSerializer().Serialize(item);
        } 
```

希望这可以帮助。

# windows-phone-7 - 使用 Song.FromUri 播放远程 mp3

> ID：15181036
> 
> 赞同：0
> 
> 时间：2013-03-03T00:19:33.683
> 
> 标签：windows-phone-7, azure-storage

我正在尝试播放托管在 Azure blob 上的音频文件。我通过 HTTP（不是 HTTPS）为它们提供服务，并从使用 Web 客户端打开的流中使用 SoundEffect.Play。这适用于 WAV 文件。

```
WebClient wc = new WebClient();
wc.OpenReadAsync(uri);
wc.OpenReadCompleted += (s, e) =>
{
    try
    {
        var sfx = SoundEffect.FromStream(e.Result);
        FrameworkDispatcher.Update();
        sfx.Play();
    }
    catch (Exception ex)
    {
        Debug.WriteLine("Well, crap!");
    }
}; 
```

对于 MP3，我使用这种方法：

```
var song = Song.FromUri(item.Title, uri);
FrameworkDispatcher.Update();
MediaPlayer.Play(song); 
```

它有时可以在模拟器中运行，但不能在设备上运行！我什至尝试不使用 Zune 来部署和使用 WPConnect 将 XAP 直接部署到设备（有些人说这使它工作）

这让我发疯！这些 mp3 文件应该只是播放，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:03:51.390

您是否可以播放 MP3 很大程度上取决于该文件的具体情况。
有关受支持的 MP3 的详细信息，请参阅 [http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087(v=vs.105).aspx#BKMK_AudioSupport](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087(v=vs.105).aspx#BKMK_AudioSupport)。

另请注意，设备和模拟器支持的编解码器存在一些差异，因此在某些情况下您可以在模拟器中播放某些内容，但不能在设备上播放。

# javascript - Javascript：填写一个网格，每秒一个部分

> ID：15181038
> 
> 赞同：-2
> 
> 时间：2013-03-03T00:19:41.613
> 
> 标签：javascript, draw

我什至无法开始使用这个（欢迎指向教程等）

我希望有一个 10x10 的网格（比如 100px x 100px）每秒填充一个部分，直到填满（100 秒）：

```
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | | etc... 
```

一秒：

```
|X| | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | | etc... 
```

两秒：

```
|X|X| | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | | etc... 
```

十三秒：

```
|X|X|X|X|X|X|X|X|X|X|
|X|X|X| | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | |
| | | | | | | | | | | etc... 
```

填充应该是实心的 - 或者是一个简单的图标（比如大卫之星）

我很擅长基本的 Javascript——但这让我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:32:30.357

干得好。我使用 jQuery 作为选择器。您可以使用任何您希望的方法：

**CSS**：

```
.box {
    width         : 9%;
    height        : 20px;
    border-left   : 1px solid #000;
    float         : left;
    margin-bottom : 5px;
    text-align    : center;
} 
```

**JS**：

```
for (var i = 0; i < 100; i += 1)  {
    $('<div class="box" />').appendTo('body');
    setTimeout(function(i) {
        $('.box:empty:first').html('&#10017;'); // Draw Star of David
    }, (i + 1) * 1000);
} 
```

**演示**：http: [//jsfiddle.net/QnYNW/](http://jsfiddle.net/QnYNW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:55:06.560

这是另一个更通用的解决方案：

```
var gridFiller = function(rows, cols, delay, fn) {
    var currentRow = 0;
    var currentCol = 0;    

    var runner = function() {
      fn(currentRow, currentCol);
      if (!(currentRow === rows-1 && currentCol === cols-1)) {
        currentRow = ++currentRow % rows;
        if (!currentRow) {
          currentCol = ++currentCol % cols;
        }
        setTimeout(runner, delay);
      }
    };
    setTimeout(runner, delay);
};

gridFiller(10, 10, 1000, function(x, y) {
  /* Fill Grid Cell */
  console.log(x + ' / ' + y);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T00:34:34.190

在这里，这应该可以帮助你，用普通的 JS：

**演示：http:** [//jsbin.com/esucig/1/edit](http://jsbin.com/esucig/1/edit)

HTML：

```
<table id="grid" cellpadding="0" cellspacing="0">
  <tr>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  ...
</table> 
```

CSS：

```
#grid, #grid td {
  border: 1px solid black;
}

#grid td {
  width: 20px;
  height: 20px;
} 
```

JS：

```
var colors = 'pink,cyan,orange,blue,red,lightgreen'.split(','),
    cells = document.querySelectorAll('#grid td');

function colorize(cell) {
  var color = colors.shift();
  cell.style.backgroundColor = color;
  colors.push(color);
}

[].forEach.call(cells, function(cell, i) {
  setTimeout(function(){ colorize(cell) }, 500*i);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T00:28:21.190

您可以使用

```
timer = setInterval(functionThatFillsOnPosition, timeInMiliseconds); 
```

当你完成只是打电话

```
clearInterval(timer) 
```

见这里[http://www.w3schools.com/jsref/met_win_setinterval.asp](http://www.w3schools.com/jsref/met_win_setinterval.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-03T00:33:27.910

像这样的东西：

```
 myInterval = setInterval((function () {
    var count = 0;
    return function () {
        count++;
        var row = Math.floor(count / 10);
        var col = count - (row * 10);

        // fill in with row & column here

        if (count === 100) {
            clearInterval(myInterval);
        }
    }
}()),1000); 
```

# c++ - 将类型发送到 C++ 类

> ID：15181041
> 
> 赞同：-1
> 
> 时间：2013-03-03T00:19:48.670
> 
> 标签：c++

在向量中，我们有：

```
vector<type> name; 
```

我怎样才能`<type>`为我自己的类创建这个“”来传递类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:21:44.117

您正在寻找的是[template](http://en.wikipedia.org/wiki/Template_%28C++%29)。

```
#include <iostream>
template<typename T>
class myClass
{
public:    
    myClass(T value){std::cout << value;}
};

int main()
{
    myClass<int> c(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:21:30.303

创建一个类`template`。

例如

```
template< class item_t >
class my_vector_t
{
    // whatever
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:25:42.003

我假设您在问`type`使用向量时要代替什么。这只是您的班级的名称：

```
vector<MyClass> myVec; 
```

# php - Composer 包自动加载

> ID：15181043
> 
> 赞同：1
> 
> 时间：2013-03-03T00:19:55.960
> 
> 标签：php, composer-php, packagist

我无法让我的图书馆工作。目录结构是 lib-name/src，里面有一个主目录和一个测试目录，我如何告诉作曲家从 /lib-name/src/main 文件夹加载？

链接到我的图书馆 github [https://github.com/gerardorn/catalogo](https://github.com/gerardorn/catalogo)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T10:53:11.703

有 3 种方法可以[映射您的类以](http://getcomposer.org/doc/04-schema.md#autoload)使用 composer 进行自动加载。

### PSR-0

推荐的方式是兼容[PSR-0 。](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)该协议描述了库的目录结构。每个命名空间都需要是一个目录。带下划线的类也是分开的（PEAR 风格）。

在您的情况下，[Catalogable](https://github.com/gerardorn/catalogo/blob/master/src/main/Catalogable.php)类有一个 namespace `gerardorn\catalogo`。要与 PSR-0 兼容，目录结构是：

```
- src
   - main
      - gerardorn
         - catalogo
            - Catalogable.php 
```

在你的`composer.json`你应该把以下内容：

```
"autoload" : {
    "psr-0" : {"gerardorn" : "src/main"}
} 
```

### 类图

或者，您可以使用`classmap`. 无论命名空间如何，都会在目录中搜索类。

```
"autoload": {
    "classmap": ["src/main"]
} 
```

### 文件

第三种方法`files`不适用于您的情况。

* * *

# PHPUnit

请注意，需要 PHPUnit 来*测试*您的库，而不是*运行*您的库。因此，您**不应该**将其作为必需的库。

编写单元测试很好。您应该注册[Travis CI](https://travis-ci.org/)。每次您推送到 GitHub 时，它都会运行您的 PHPUnit 测试，并在出现问题时（通过电子邮件）警告您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T10:35:52.420

您的目录结构应该与[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)兼容。

即，您的文件[Catalogable.php](https://github.com/gerardorn/catalogo/blob/master/src/main/Catalogable.php)有一个 namespace `gerardorn\catalogo`，因此您的目录结构必须与以下内容匹配。

```
- src
    - main
        - gerardorn
            - catalogo 
```

# jquery - jQuery 代码到 YUI

> ID：15181045
> 
> 赞同：0
> 
> 时间：2013-03-03T00:20:00.037
> 
> 标签：jquery, yui

我如何将这个 jQuery 代码翻译成 YUI3？

```
$(document).ready(function() {
         $.getJSON('file.php?path=<?php echo $_GET['path']; ?>&callback=?', function (data) {
            $("#filemanager-ajax").html('');
            $.each(data, function (i, item) {

                $("#filemanager-ajax").append('<a class="link" href="' + item.id + '"><div class="product" data="' + item.path + '"><img src="' + item.thumb + '" title="' + item.thumb + '" class="thumbnail"/><div class="title">' + item.name + '</div><div class="description"></div>&nbsp;&nbsp;&nbsp;<strong>Filesize:</strong> ' + item.size + '<div style="clear:both;height:8px;"></div>&nbsp;&nbsp;&nbsp;about ' + item.date + ' ago<div style="clear:both;height:8px;"></div></div><div class="clear"></div></div></a>');

             });
         });
     }); 
```

我知道在 YUI 中它看起来像这样

```
YUI().use('json-parse', 'json-stringify', function (Y) {
    // JSON is available and ready for use. Add implementation
    // code here.
}); 
```

但是如何将 JSON 数据构建到 DIV 元素中并通过 +item.id+、+item.thumb+ 等输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:55:42.087

我认为您需要使用 JSONP 模块：

[http://yuilibrary.com/yui/docs/jsonp/](http://yuilibrary.com/yui/docs/jsonp/)

在回调中，您可以使用：

```
var node = Y.one("#filemanager-ajax");
node.empty();

Y.each(data, function(item, i) {
  node.append(...);
}); 
```

# c# - HttpWebRequest 在第三次尝试时超时，仅允许两个连接 HTTP 1.1

> ID：15181050
> 
> 赞同：1
> 
> 时间：2013-03-03T00:21:10.113
> 
> 标签：c#, .net, http, httpwebrequest, using

```
for (int i = 0; i < endurance / 10; i++) {
    log.Info("mining now : " + endurance / 10 + " - " + i);
    HttpWebRequest mineRequest = WebRequestUtil.CreateHttpWebRequest(Properties.Settings.Default.PAGE_URL + Properties.Settings.Default.MINING_URL);

    string source = SourceParser.GetSource(mineRequest); // GETTING TIMED OUT HERE
    string variable = GetHiddenVariableNumber(source);

    Mine(variable);
} 
```

我的 GetSource 方法：

```
public static string GetSource(WebRequest request) {
    using (WebResponse response = request.GetResponse()) {
        using (Stream stream = response.GetResponseStream()) {
            using (StreamReader reader = new StreamReader(stream)) {
                return reader.ReadToEnd();
            }
        }
    }
} 
```

日志：

```
2013-03-03 02:10:56,101 [13] INFO  Bot.Game.Mining mining now : 10 - 0
2013-03-03 02:10:57,053 [13] INFO  Bot.Game.Mining mining now : 10 - 1
2013-03-03 02:10:58,155 [13] INFO  Bot.Game.Mining mining now : 10 - 2 // ends here 
```

有什么建议么？我读了很多关于它的内容，通常的问题不是处置`Stream`或`WebResponse`反对，但我正在这样做。

# c# - 如何为 ASP.NET Web 应用程序添加全局锁？

> ID：15181058
> 
> 赞同：4
> 
> 时间：2013-03-03T00:22:32.750
> 
> 标签：c#, asp.net, locking

我正在使用 C# 编写一个 ASP.NET Web 应用程序，它可以从 IIS 服务器（使用`System.IO.FileStream`）读取和写入文本文件，我想知道如何在此操作上实现全局锁定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:44:35.353

对于全局锁，您需要[互斥锁](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)

```
 // The key can be part of the file name - 
    //   be careful not all characters are valid
    var mut = new Mutex(true, key);

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you manipulate your file
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T00:58:14.937

最简单的解决方案是在 Cache 或 Application 对象中创建一个新对象，最好是在 global.asax 文件中的 Application_Startup 中。如：

```
Cache["myLocker"] = new object(); 
```

然后您可以使用标准的“锁定”语法。

```
lock(Cache["myLocker"]) 
{
  // do file access here...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T01:56:17.140

根据@Aristos 的建议和[这篇文章](https://stackoverflow.com/questions/229565/what-is-a-good-pattern-for-using-a-global-mutex-in-c)，我想出了这门课：

```
using System.Threading;
using System.Security.AccessControl;
using System.Security.Principal;

using System.Runtime.InteropServices;   //GuidAttribute
using System.Reflection;                //Assembly

namespace ITXClimateSaverWebApp
{
    public class GlobalNamedLock
    {
        private Mutex mtx;

        public GlobalNamedLock(string strLockName)
        {
        //Name must be provided!
            if(string.IsNullOrWhiteSpace(strLockName))
            {
                //Use default name
                strLockName = ((GuidAttribute)Assembly.GetExecutingAssembly().GetCustomAttributes(typeof(GuidAttribute), false).GetValue(0)).Value.ToString();
            }

            //Create security permissions for everyone
            //It is needed in case the mutex is used by a process with
            //different set of privileges than the one that created it
            //Setting it will avoid access_denied errors.
            MutexSecurity mSec = new MutexSecurity();
            mSec.AddAccessRule(new MutexAccessRule(new SecurityIdentifier(WellKnownSidType.WorldSid, null),
                MutexRights.FullControl, AccessControlType.Allow));

            //Create the global mutex
            bool bCreatedNew;
            mtx = new Mutex(false, @"Global\" + strLockName, out bCreatedNew, mSec);
        }

        public bool enterCRITICAL_SECTION()
        {
            //Enter critical section
            //INFO: May throw an exception!
            //RETURN:
            //      = 'true' if successfully entered
            //      = 'false' if failed (DO NOT continue!)

            //Wait
            return mtx.WaitOne();
        }

        public void leaveCRITICAL_SECTION()
        {
            //Leave critical section
            //INFO: May throw an exception!

            //Release it
            mtx.ReleaseMutex();
        }
    }
} 
```

然后将其称为全局锁的方式：

```
try
{
    GlobalNamedLock gl = new GlobalNamedLock("MyLockName");

    try
    {
        if (gl.enterCRITICAL_SECTION())
        {
            //Use the global resource now
        }
    }
    finally
    {
        gl.leaveCRITICAL_SECTION();
    }
}
catch (Exception ex)
{
    //Failed -- log it
} 
```

所以这似乎可以完成这项工作。你怎么看？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T02:07:12.963

为什么不只使用全局同步根对象？

```
internal static class Lock
{
    public static object SyncRoot = new object{};
} 
```

用法：

```
lock (Lock.SyncRoot)
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-21T14:40:47.143

命名互斥体是系统对象。与 lock 关键字不同，它们甚至可以跨进程边界工作。锁定仅在同步同一进程中的线程的上下文中有用。

# sync - 跨不同机器同步程序

> ID：15181065
> 
> 赞同：0
> 
> 时间：2013-03-03T00:25:01.663
> 
> 标签：sync, rsync

我需要同步我的计算机（我正在开发程序的地方）和我们的计算集群（实际运行程序的地方）。以前，我尝试过 github。我定期将我的文件推送到 github 并从服务器中提取。但问题是我们的计算集群无法访问互联网。我正在使用 sshfs 将集群上的主目录挂载到本地目录并在那里运行 github。sshfs 偶尔会引入问题。没有一个建议的解决方案总是有效。

然后我尝试了 rsync & make。但是每次它复制所有内容并且不检查需要很长时间才能复制的更改，并且由于文件已更新，因此编译也需要很长时间（几分钟）。

还有其他方法吗？我的本地机器是 MacBook，我猜我们的计算集群运行 CentOS，我无权在服务器上安装任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:54:42.510

我实际上发现 rsync 完美地完成了这项工作。我只需要 -c 选项。该选项要求 rsync 只复制更改的文件。我工作得很好，但由于两台机器之间的时间差异，*制作*存在一些小问题。

# jquery - jquery .text() 未确定的字符串文字

> ID：15181066
> 
> 赞同：2
> 
> 时间：2013-03-03T00:25:12.330
> 
> 标签：jquery, text, add

我正在玩codeigniter和jquery，我试图从mysql中获取一些文本并将其插入到`<P>`标签中。当我只是说“hello world”时，该方法有效，但是当它从 SQL 中获取文本并将其插入时，我得到一个未确定的字符串文字错误。这是我的代码：

```
$('#register').click(function(){
  <?
    $query = $this->db->get_where('eula', array('id'=>'1'));
    $result = $query->result();
    $eula = (string)$result[0]->eula;
    echo '$(\'#eulaText\').append(\''.$eula.'\'\);';
  ?>
    console.log("$string=".$string);
}); 
```

我在 sql 中有一个 lorum ipsum 字符串，我想插入到页面中。

我可以使用一些建议，我为草率的代码道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T23:00:08.463

我的怀疑是你在返回的 php 变量中有一个字符，它终止你的 javascript 字符串。您正在传递一个单引号字符串（当页面加载并评估 javascript 时），如果该 php 变量（eula）包含一个单引号，它将终止传递给 append() 方法的字符串，从而导致“eula”的其余部分被评估为 JavaScript 代码。

我已经按照我在这个 stackoverflow 帖子中提供的示例解决了这个问题：

[jQuery 前置 php 代码块](https://stackoverflow.com/questions/15949888/jquery-prepend-php-block-of-code/15950147#15950147)

它可能不是最好的解决方案，但它确保传递给 append() 的 javascript 字符串文字不会包含任何可能终止它的非法字符。

# vim - VIM缩写中使用的iskeyword是什么

> ID：15181068
> 
> 赞同：2
> 
> 时间：2013-03-03T00:25:15.123
> 
> 标签：vim

在 vim 帮助文档中，它说`full-id`类型缩写完全由关键字字符（`iskeyword`选项中的字母和字符）组成。`iskeyword`条目说那个字符串：

```
Vim default for MS-DOS and Win32
"@,48-57,_,128-167,224-235" 
```

除此以外： `"@,48-57,_,192-255"`

这是什么意思？是什么`48-57, 128-167,224-235`？是`@`人物之一？但我尝试了类似的东西`@tt`，它不起作用！

而vim doc给出的例子 `-1`下的entry`full-id`表示`-`是关键字之一。但我试过我的vim。并发现

`-1`作品

`-11`不工作

似乎在我的 vim 中`-`被视为非关键字字符。怎么了？我没有设置任何自定义 iskeyword。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:13:14.740

`"@,48-57,_,128-167,224-235"`是编码表中的字符和范围。查看 ASCII 表，您会看到范围`48-57`是从`0`到的数字`9`。对于上面的字符，`128`您可能需要转到 Unicode 表，用`set encoding?`. `@`是特殊的并添加所有字母字符。

关于不适合你的例子：有 3 种缩写`full-id`，`end-id`和`non-id`。因此，任何缩写都必须适合这些组之一。`-1`有效，它是一个`end-id`. 它以字符结尾`isKeyword`。`-11`不是，因为它在第一个关键字之后还有另一个关键字，所以它也不是`full-id`因为`-`不是关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T06:27:55.393

让我们`-11`根据以下规则进行检查`:help abbreviation`：

1.  它不是一个完整的 ID，因为它包含`-`，它不包含在您的`iskeyword`选项值中。
2.  它不是end-id，因为根据文档，除了最后一个之外的所有字符都不能是关键字字符，而中间`1`是。
3.  它不是非 id，因为它以关键字字符结尾。

如果您希望破折号成为关键字字符，则必须将其包含在`iskeyword`您使用的编码的适当值中（UTF-8 中的 45 等）。

# html - 有两列全高背景？

> ID：15181071
> 
> 赞同：1
> 
> 时间：2013-03-03T00:26:04.063
> 
> 标签：html, css, height

我想制作一个具有两列固定宽度的页面，每列都有自己的背景颜色，在页面的整个高度上延伸，即使在向下滚动大内容时也是如此。一个简单的说明图：[https ://dl.dropbox.com/u/3060536/twocol.png](https://dl.dropbox.com/u/3060536/twocol.png)

我找到了几种*几乎*可以满足我需求的解决方案。

*   `height:100%`只要你不滚动，到处都是，看起来很棒：这似乎与屏幕的高度有关（当向下滚动更长的文本时背景会消失）。
*   穿上`height:100%`html 和 body 以及`min-height:100%`其中一个 div，我可以让一列填满整个高度。但这需要直接在主体下方完成，因此它似乎无法与我想要的居中两列布局相结合。
*   如果所有内容都适合屏幕，则将`padding-bottom:100000px`and`margin-bottom:-100000px`放入列和`overflow-y:hidden`父级中可以正常工作，但如果文本不适合屏幕，它会完全删除向下滚动的选项。

所以以上都不是我想要的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:23:18.173

你可能会在这里得到一些想法。如果 position:relative 不打扰你，试试这个。

```
<html>
<head>
<title>sample</title>
</head>

<body style="height:100%;">

<center>
    <div style="position:relative; width:900px; height:100%;">

        <div style="position:relative; float:left; background-color:blue; width:200px; height:auto; min-height:100%;">
            '//some texts or controls
        </div>

        <div style="position:relative; float:left; background-color:green; width:700px; height:auto; min-height:100%;">
            '//some texts or controls
        </div>

    </div>
</center>   

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T00:54:38.227

我没有对此进行测试，我很确定`left: 50%; margin-left: -450px`它不能很好地使元素居中。但自从我完成 html 以来已经有一段时间了。

```
#background: {
    position: fixed;
    top: 0;
    bottom: 0;
    width: 900px;
    left: 50%;
    margin-left: -450px;
    background-color: red;
}
#background div {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 200px;
    background-color: blue;
} 
```

和 HTML

```
<div id="content"></div>
<div id="background"><div></div></div> 
```

**更新**

正如我所说，它未经测试。原来我忘了包括`height`or `bottom`for `#background`，可能还有别的东西。

这是一个有效的想法的例子[http://jsfiddle.net/bEuTU/](http://jsfiddle.net/bEuTU/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T01:12:35.723

看看[博文](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)。我花了一段时间才理解它是如何工作的，但确实如此，而且很棒。

# python - pywin32：使用坐标获取颜色

> ID：15181077
> 
> 赞同：1
> 
> 时间：2013-03-03T00:26:26.917
> 
> 标签：python, colors, pywin32

我编写了这段代码来在 x,y 位置 100,200 上单击鼠标，然后按下退格键：

```
import win32api, win32con
import time

def click(x,y):
    win32api.SetCursorPos((x,y))
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,x,y,0,0)
    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,x,y,0,0)

def press_back():
    win32api.keybd_event(0x08,0,0,0) #click backspace
    time.sleep(0.1)
    win32api.keybd_event(0x08,0,2,0) #release backspace

click(100,200)
press_back() 
```

我现在要做的是检查 100,200 处的颜色是否为红色。我怎样才能做到这一点？

编辑：我有解决方案...

```
color = win32gui.GetPixel(win32gui.GetDC(win32gui.GetActiveWindow()), 100 , 200) 
```

无论如何谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T23:55:33.327

用你的回答

```
color = win32gui.GetPixel(win32gui.GetDC(win32gui.GetActiveWindow()), 100 , 200) 
```

你得到一个整数，对于某人（比如我）来说可能不是很友好。

如果你想要一个 RGB 元组，你可以检查这个答案：[RGB Int to RGB - Python](https://stackoverflow.com/questions/2262100/rgb-int-to-rgb-python)。

```
def rgbint2rgbtuple(RGBint):
    blue =  RGBint & 255
    green = (RGBint >> 8) & 255
    red =   (RGBint >> 16) & 255
    return (red, green, blue) 
```

最后，您必须检查颜色是否为红色，如果您也接受相似的颜色，这可能不是那么容易，不仅是*纯*红色（即 (255, 0, 0)）。

# iphone - 大型自定义 UIView - CABackingStoreUpdate 性能

> ID：15181078
> 
> 赞同：12
> 
> 时间：2013-03-03T00:26:38.090
> 
> 标签：iphone, ios, objective-c, uiview, ios4

**为什么在 iOS 4.3.5 上，“大”（960 x 1380）自定义 UIView 执行 CABackingStoreUpdate 的效率如此低下，我该如何提高绘图操作的性能？**

不完全确定我的意思？继续阅读...

## 笔记：

随着我对这个问题的理解不断发展，这个问题也在不断发展。因此，问题本身是相似的，但自首次提出问题以来，以下正文中的代码示例和基本细节/推理发生了显着变化。

### 语境

我有一个非常基本的应用程序（底部的代码），它在 drawRect: 自定义 UIView 的方法中绘制单个省略号。当绘制的椭圆的大小保持不变但自定义 UIView 的大小变大时，应用程序演示了性能差异：

![小 UIView](../Images/c021cfc7b462bfd1eb2ea94409f348f4.png)

![大 UIView](../Images/3a5cde04ebb5e843ab78988dc9b07ab4.png)

我在运行 iOS 4.3.5 的第 4 代 iPod 和运行 iOS 5.1.1 的第 1 代 iPad 上使用不同大小的自定义 UIView 多次运行该应用程序。
下表显示了从时间分析器仪器获取的结果：

![时间分析器结果](../Images/1db211c9af63fc21e0e047279f523e72.png)

以下仪器轨迹显示了每个设备的两个极端的详细信息：

**iOS 5.1.1 - (自定义 UIView 大小 320 x 460)**

![iOS 5.1.1 - 自定义 UIView 大小 320 x 460](../Images/c0ad39f72af3523b190eafd06e6fa6a4.png)

**iOS 5.1.1 - (自定义 UIView 尺寸 960 x 1380)**

![iOS 5.1.1 - 自定义 UIView 尺寸 960 x 1380](../Images/8db376a399c7c7ba4bcee6888eab836f.png)

**iOS 4.3.5 - (自定义 UIView 大小 320 x 460)**

![iOS 4.3.5 - 自定义 UIView 大小 320 x 460](../Images/2e016687567c10500c5e029aa734ecac.png)

**iOS 4.3.5 - (自定义 UIView 尺寸 960 x 1380)**

![iOS 4.3.5 - 自定义 UIView 尺寸 960 x 1380](../Images/76b41336a365dcc87961da60b5ac0406.png)

正如您（*希望*）所见，在 4 个案例中的 3 个案例中，我们得到了我们期望的结果：大部分时间都花在了执行自定义 UIViews drawRect: 方法上，每个案例都保持 10fps。
但是第四个案例显示了应用程序在仅绘制单个形状时难以保持 7fps 的性能下降。在 UIView 的 CALayer 的显示方法中，大部分时间都花在了复制内存上，具体来说：

[CALayer 显示] >
[CALayer _display] >
CABackingStoreUpdate >
CA::Render::ShmemBitmap::copy_pixels(CA::Render::ShmemBitmap const*, CGSRegionObject*) >
memcpy$VARIANT$CortexA8

现在不需要天才就可以从这些数字中看出这里有严重的错误。使用大小为 960 x 1380 的自定义 UIView，iOS 4.3.5 复制内存的时间是绘制整个视图内容的时间的 4 倍多。

### 问题

现在，鉴于上下文，我再次提出我的问题：

**为什么在 iOS 4.3.5 上，“大”（960 x 1380）自定义 UIView 执行 CABackingStoreUpdate 的效率如此低下，我该如何提高绘图操作的性能？**

很感谢任何形式的帮助。

我还在[Apple Developer forums](https://devforums.apple.com/message/791651#791651)上发布了这个问题。

### 真正的交易

现在，显然，为了这个问题，我已经将我的真正问题简化为最简单的可重现案例。我实际上是在尝试为位于 UIScrollView 内的 960 x 1380 自定义 UIView 的一部分设置动画。

虽然我很欣赏当他们没有通过 Quartz 2D 达到他们想要的性能水平时引导任何人使用 OpenGL ES 的诱惑，但我要求任何采取这条路线的人至少解释一下为什么 Quartz 2D 甚至在iOS 4.3.5 上最基本的绘图操作，iOS 5.1.1 没有问题。正如你可以想象的那样，我对为这个基石案例重写所有内容的想法并不感到兴奋。这也适用于建议使用 Core Animation 的人。虽然为了简单起见，我在演示中使用了改变颜色的椭圆（非常适合核心动画的任务），但我实际想要执行的绘图操作是大量随时间扩展的线条，这是一个绘图任务Quartz 2D 非常适合（当它是高性能的时候！）。另外，再次，

### 代码

> TViewController.m（标准视图控制器的实现）

```
#import "TViewController.h"
#import "TCustomView.h"

// VERSION 1 features the custom UIView the same size as the screen.
// VERSION 2 features the custom UIView nine times the size of the screen.
#define VERSION 2

@interface TViewController ()
@property (strong, nonatomic) TCustomView *customView;
@property (strong, nonatomic) NSTimer *animationTimer;
@end

@implementation TViewController

- (void)viewDidLoad
{
    // Custom subview.
    TCustomView *customView = [[TCustomView alloc] init];
    customView.backgroundColor = [UIColor whiteColor];
#if VERSION == 1
    customView.frame = CGRectMake(0.0f, 0.0f, 320.0f, 460.0f);
#else
    customView.frame = CGRectMake(0.0f, 0.0f, 960.0f, 1380.0f);
#endif

    [self.view addSubview:customView];

    UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
    [customView addGestureRecognizer:singleTap];

    self.customView = customView;
}

#pragma mark - Timer Loop

- (void)handleTap:(UITapGestureRecognizer *)tapGesture
{
    self.customView.value = 0.0f;

    if (!self.animationTimer  || !self.animationTimer.isValid) {
        self.animationTimer = [NSTimer scheduledTimerWithTimeInterval:0.1 target:self selector:@selector(animationLoop) userInfo:nil repeats:YES];
    }
}

#pragma mark - Timer Loop

- (void)animationLoop
{
    // Update model here. For simplicity, increment a single value.
    self.customView.value += 0.01f;

    if (self.customView.value >= 1.0f)
    {
        self.customView.value = 1.0f;
        [self.animationTimer invalidate];
    }

    [self.customView setNeedsDisplayInRect:CGRectMake(0.0f, 0.0f, 320.0f, 460.0f)];
}

@end 
```

-

> TCustomView.h（自定义视图标题）

```
#import <UIKit/UIKit.h>

@interface TCustomView : UIView
@property (assign) CGFloat value;
@end 
```

-

> TCustomView.m（自定义视图实现）

```
#import "TCustomView.h"

@implementation TCustomView

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    // Draw ellipses.
    CGContextSetRGBFillColor(context, self.value, self.value, self.value, 1.0f);
    CGContextFillEllipseInRect(context, rect);

    // Draw value itself.
    [[UIColor redColor] set];
    NSString *value = [NSString stringWithFormat:@"%f", self.value];
    [value drawAtPoint:rect.origin withFont:[UIFont fontWithName:@"Arial" size:15.0f]];
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T10:02:08.257

由于 iPod Touch 第 4 代和 iPad 第 1 代具有相似的硬件（相同数量的内存/相同的 GPU），这表明您看到的问题是由于 iOS4 中未优化的代码路径。

如果您查看导致 iOS4 上（负）性能峰值的视图大小，它们的一侧都比 1024 长。最初 1024x1024 是 UIView 可能的最大尺寸，虽然这个限制已经取消，但它完全是可能比这更大的视图只在 iOS5 及更高版本中变得有效。

我猜想您在 iOS4 中看到的过多内存复制是由于 UIKit 为大型 UIView 使用了完整大小的内存缓冲区，但是在合成之前必须复制适当大小的图块；并且在 iOS5 和更高版本中，他们要么删除了对可以合成的图块大小的任何限制，要么改变了 UIKit 为如此大的 UIView 呈现的方式。

在解决 iOS4 上的这个瓶颈方面，您可以尝试使用较小的 UIView 平铺您想要覆盖的区域。如果您将其结构为：

```
  父视图 - 包含绘图和事件相关代码
    平铺视图 1 - 包含 drawRect
    ...
    平铺视图 n - 包含 drawRect

```

在每个平铺视图中，您可以要求父视图在适当调整图形上下文的变换后渲染其内容。这意味着您不必更改绘图代码，它只会被多次调用（这会有一点开销，但请记住每次调用将只绘制整个视图的一部分）。

请注意，父视图没有 drawRect 方法很重要 - 否则 UIKit 会认为您想直接在其中绘制，它会创建一个后备存储，从而使您回到相同的情况。

您还可以查看 CATiledLayer - 这会为您进行平铺，但是是异步的；这意味着您的绘图代码等必须处理从一个或多个后台线程执行的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T18:26:48.247

正如您所观察到的，时间主要用于传输一些数据。我认为在 iOS 4.3.5 中，CoreGraphics 不使用 GPU 和图形内存来实现 CGContextFillEllipseInRect 等原始绘图功能......

然后每次你需要绘制一些东西时，它会被 CPU 绘制在主内存中，以计算所需的所有内容，然后复制到图形内存中。这当然需要很长时间，因为公共汽车很慢。

我猜从 iOS 5\. 或 5.1 开始，原始绘图函数调用一些 GPU 着色器（GPU 内的程序），然后所有繁重的工作都在那里完成。

然后只有少数数据（参数和程序代码）从主 RAM 存储器传输到图形存储器。

# java - Java JDK 1.7 中用于 AWT / Swing 的 Apple Retina 显示支持

> ID：15181079
> 
> 赞同：24
> 
> 时间：2013-03-03T00:26:38.573
> 
> 标签：java, swing, awt, java-7, retina-display

我刚刚意识到 Java JDK 1.7（截至 JDK 7u15）下的 AWT / Swing 不支持 Apple Macbook Pros 上的 Retina 显示器。例如，Netbeans 几乎无法忍受在 Retina 显示器上运行超过几分钟并使用 JDK 1.7。

这已在[此处](https://apple.stackexchange.com/questions/53741/java-and-mac-retina-support)的 StackExchange 问题中有所解决，并引用了一篇特定的帖子：

> Apple 的 Java 6 JRE 将支持 HiDPI，但 Oracle 的 Java 7 JRE 目前不支持它。它也不能在最新的 Java 8 开发版本下工作。Swing 和 JavaFX 应用程序在 Retinia MacBook 上是模糊的。这就是 IntelliJ 仍然在 Java 6 下运行的原因。

我的问题比上述线程的 OP 所问的更具体。

我不到一个月的雇主在其所有应用程序中都使用 Swing。出于几个原因，我们有兴趣从 Java 6 迁移到 Java 7。在过去的几天里，另一位开发人员（使用 Windows）将我们的平台迁移到 Java 7。当我运行视网膜 Macbook Pro 时，我注意到当我拉出我们代码的最新稳定分支时的问题。

我是 Java 新手，在社区工作不到一年，因此我的问题是：Java 社区是否会对这个问题做出相当大的响应，或者是否应该在 Swing 之前预计会出现大幅延迟（几个月到一年或更长时间） Java 7 中是否与 Apple Retina 显示器兼容？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-10T17:39:54.753

Java 7u40 Early Access 现在支持 HiDPI (Retina) 显示，[如此更新日志](http://download.java.net/jdk7u40/changes/jdk7u40-b28.html?q=download/jdk7u40/changes/jdk7u40-b28.html)所示。因此，视网膜支持现在可用于：

*   爪哇 6
*   Java 7u40ea 或更高版本
*   爪哇 8

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T12:01:27.430

上个月我也对同一个话题感兴趣，一段时间后我在网上发现没有人能准确回答这个问题。

在甲骨文有一个开放的错误： [http ://bugs.sun.com/view_bug.do?bug_id=8000629](http://bugs.sun.com/view_bug.do?bug_id=8000629)

据此，它应该为 Java 1.8 修复。但我担心的是我不确定它是否也将针对 Swing 或仅针对 JavaFX 进行修复。我在某处读到，JavaFX 已经修复（但不确定是否是官方的），但这并不能解决 Swing 的问题。

简而言之，不幸的是，在互联网上搜索了几天后，我找不到答案...

问候， 卢博斯

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-26T08:56:27.233

从 1.7.0_40ea 开始，Oracle 完全支持 Retina。但是，缺乏针对 Retina 的 API。例如，不支持像 Apple JDK 中的 HiDPIScaledImages。您可以在此处[http://bulenkov.com/2013/06/23/retina-support-in-oracle-jdk-1-7/找到一些关于 Oracle JDK 中 Retina 支持的酷提示](http://bulenkov.com/2013/06/23/retina-support-in-oracle-jdk-1-7/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-11T21:31:43.257

根据我几个月前阅读的一篇长篇文章（[http://lists.apple.com/archives/java-dev/2012/Oct/msg00127.html](http://lists.apple.com/archives/java-dev/2012/Oct/msg00127.html)），在 Swing 中获取 Retina 的唯一方法是安装 Apple JDK ，而后者只是使用“hack”来使应用程序与视网膜兼容。该线程提到 JavaFX 作为一种解决方法（当您已经有一个用 Swing 编写的复杂软件时，这当然不是真正的解决方法）。

在阅读了上面的帖子后，我自己尝试用 Java 7 编写一个简单的 JavaFX 应用程序，它在 Retina 上看起来更清晰；与 Ensamble（JavaFX 演示应用程序，可在 App Store 中获得）相同，它的渲染似乎也比普通的 Swing 应用程序（如 Java 控制面板）好得多，但也许这只是建议的力量。

由于我正在积极测试每个新的 Java 8 Snapshot 版本，我还可以确认几乎没有做任何工作来让 Swing 在视网膜显示器上看起来可以通过。

我们现在最好的选择（只是一个意见，没有任何秘密知识）是甲骨文的某个人（或 OpenJDK 贡献者）将购买一个视网膜 mac 并在 Java 8 中修复它。我认为苹果不会修复它通过提供 Java 6 修复程序，因为来自 Apple 的人说他们只是将与渲染相关的代码恢复为 Quartz。它确实给出了预期的结果，但与未开源的专有 OS X 内部结构密切相关。

# windows - 如何使用辅助 GPU 覆盖 Windows 上的 CUDA 内核执行时间限制？

> ID：15181080
> 
> 赞同：6
> 
> 时间：2013-03-03T00:26:45.397
> 
> 标签：windows, cuda, timeout, gpgpu, multi-gpu

从 Nvidia 的网站上，它解释了超时问题：

> 问：内核执行的最大时间是多少？在 Windows 上，单个 GPU 程序启动的最长运行时间约为 5 秒。超过此时间限制通常会导致通过 CUDA 驱动程序或 CUDA 运行时报告启动失败，但在某些情况下可能会挂起整个机器，需要硬重置。这是由 Windows“看门狗”计时器引起的，如果使用主图形适配器的程序运行时间超过最大允许时间，则会导致它们超时。
> 
> **出于这个原因，建议在 GPU 上运行 CUDA，该 GPU 未连接到显示器并且没有将 Windows 桌面扩展到其上。在这种情况下，系统必须至少包含一个用作主图形适配器的 NVIDIA GPU。**

来源：[https ://developer.nvidia.com/cuda-faq](https://developer.nvidia.com/cuda-faq)

所以看起来，nvidia 相信，或者至少强烈暗示，拥有多（nvidia）gpus，并且通过适当的配置，可以防止这种情况发生？

但是怎么做？到目前为止，我尝试了很多方法，但 GK110 GPU 上仍然存在令人讨厌的超时问题：（1）插入辅助 PCIE 16X 插槽；(2) 未连接到任何显示器 (3) 在驱动程序控制面板中设置为专用 physX 卡（如其他人推荐的那样），但阻塞仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-14T02:12:48.670

如果您的 GK110 是*Tesla* K20c GPU，那么您应该将设备从 wddm 模式切换到 TCC 模式。这可以通过随驱动程序一起安装的 nvidia-smi.exe 工具来完成。使用 Windows 搜索功能查找此文件 (nvidia-smi.exe)，然后使用命令行帮助 (`nvidia-smi --help) 查找将 GPU 从 WDDM 切换到 TCC 模式所需的命令。

完成此操作后，Windows 看门狗机制将不再关注您的 GK110 设备。

另一方面，如果它是 GeForce GPU，则无法将其切换到 TCC 模式。您唯一的选择是修改注册表设置，这有点困难。您的里程可能会有所不同，因为 reg 密钥的确切结构因操作系统而异。

如果 GPU 处于 WDDM 模式，则它受看门狗定时器的影响。

# ruby-on-rails - 登录后如何重定向用户？(Ruby on Rails)

> ID：15181081
> 
> 赞同：0
> 
> 时间：2013-03-03T00:27:16.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html

例如，当用户登录时，他们会自动被路由到 /user 页面。登录后如何将它们定向到主页 (home.htm.erb)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:31:13.840

我假设你有一个正在创建的 Sessions 对象？在`sessions#create`行动中

```
redirect_to root_url 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:00:00.917

取决于您的 gem 进行身份验证

在你的 app/controllers/application_controller.rb

```
类 ApplicationController 'new', :controller => 'sessions', :only_path => false, :protocol => 'http')
    如果 request.referer == sign_in_url
      极好的
    别的
      存储位置（资源）|| 请求.referer || 根路径
    结尾
  结尾
结尾

```

# c# - 如何选择声音设备来播放声音？

> ID：15181083
> 
> 赞同：0
> 
> 时间：2013-03-03T00:27:42.397
> 
> 标签：c#, .net, audio, naudio, directsound

我的表单中有一个网络浏览器，我想选择我想听声音的地方。我有 2 个播放设备，扬声器和耳机。

我想制作一个组合框来选择我的表单/应用程序声音的输出。

我正在阅读有关 NAudio 和 DirectSound 的信息，但找不到有用的东西。

我不想播放声音，我想选择我的控件的所有声音的输出。

任何人都对.Net（c＃）有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:27:11.967

检查[CoreAudioAPI](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)

您可以使用枚举音频设备的可用列表

```
MMDeviceEnumerator devEnum = new MMDeviceEnumerator(); 
```

# r - 在R中的箱线图上标记异常值

> ID：15181086
> 
> 赞同：5
> 
> 时间：2013-03-03T00:28:07.940
> 
> 标签：r, label, boxplot, outliers

我想将矩阵的每一列绘制为箱线图，然后将每个箱线图中的异常值标记为它们在矩阵中所属的行名。举个例子：

```
vv=matrix(c(1,2,3,4,8,15,30),nrow=7,ncol=4,byrow=F)
rownames(vv)=c("one","two","three","four","five","six","seven")
boxplot(vv) 
```

我想将每个图中的异常值（在本例中为 30）标记为它所属的行名，因此在本例中 30 属于第 7 行。有没有简单的方法可以做到这一点？我已经看到了与此问题类似的问题，但似乎没有一个按照我想要的方式工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-10-22T05:11:55.710

有一个简单的方法。请注意，以下行中 Boxplot 中的 b 是大写字母。

```
library(car)

Boxplot(y ~ x, id.method="y") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-28T17:40:29.430

或者，您可以使用 {car} 包中的“Boxplot”函数为您标记异常值。

请参阅以下链接：[https ://CRAN.R-project.org/package=car](https://CRAN.R-project.org/package=car)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T00:42:11.537

在给出的示例中，这有点无聊，因为它们都是同一行。但这里是代码：

```
bxpdat <- boxplot(vv)
text(bxpdat$group,                                              # the x locations 
     bxpdat$out,                                                # the y values
     rownames(vv)[which(vv == bxpdat$out, arr.ind=TRUE)[, 1]],  # the labels
     pos = 4) 
```

这会在`boxplot`. Boxplot 调用并返回来自 的值`boxplot.stats`。看一眼：

```
 str(bxpdat) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-03T01:26:02.687

@DWin 的解决方案适用于单个箱线图，但对于具有重复值的任何内容都会失败，例如我创建的数据集：

```
#Create data
set.seed(1)
basenums <- c(1,2,3,4,8,15,30)
vv=matrix(c(basenums, sample(basenums), 1-basenums, 
          c(0, 29, 30, 31, 32, 33, 60)),nrow=7,ncol=4,byrow=F)
dimnames(vv)=list(c("one","two","three","four","five","six","seven"), 1:4) 
```

在这个数据集上，@DWin 的解决方案给出了：

![在此处输入图像描述](../Images/96a65fb86da2c3d7f93064ddd45290a5.png)

这是错误的，因为在第四个示例中，最小值和最大值不可能在同一行中。

这个解决方案很可怕（我希望可以简化），但很有效。

```
#Reshape data
vv_dat <- as.data.frame(vv)
vv_dat$row <- row.names(vv_dat)
library(reshape2)
new_vv <- melt(vv_dat, id.vars="row")

#Get boxplot data
bxpdat <- as.data.frame(boxplot(value~variable, data=new_vv)[c("out", "group")])

#Get matches with boxplot data
text_guide <- do.call(rbind, apply(bxpdat, 1, 
    function(x) new_vv[new_vv$value==x[1]&new_vv$variable==x[2], ]))

#Add labels
with(text_guide, text(x=as.numeric(variable)+0.2, y=value, labels=row)) 
```

![在此处输入图像描述](../Images/65c967aef9e240665b93752f08dd3c9d.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-21T20:43:36.087

或者您可以简单地运行[此博客文章](http://www.r-statistics.com/2011/01/how-to-label-all-the-outliers-in-a-boxplot/)中的代码：

```
source("https://raw.githubusercontent.com/talgalili/R-code-snippets/master/boxplot.with.outlier.label.r") # Load the function
set.seed(6484)
y <- rnorm(20)
x1 <- sample(letters[1:2], 20,T)
lab_y <- sample(letters, 20)
# plot a boxplot with interactions:
boxplot.with.outlier.label(y~x1, lab_y) 
```

（处理多个彼此接近的异常值）

![在此处输入图像描述](../Images/689fd6e51e93f6c7498748afcefc6af7.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T11:16:37.530

@sebastian-c 这是对 DWin 解决方案的轻微修改，似乎更通用

```
bx1<-boxplot(pb,las=2,cex.axis=.8)
if(length(bx1$out)!=0){
  ## get the row of each outlier
  out.rows<-sapply(1:length(bx1$out),function(i) which(vv[,bx1$group[i]]==bx1$out[i]))
  text(bx1$group,bx1$out,
     rownames(vv)[out.rows],
     pos=4
  )
} 
```

# overflow - 字符串越界

> ID：15181097
> 
> 赞同：2
> 
> 时间：2013-03-03T00:29:38.843
> 
> 标签：overflow

这是原始代码

```
int main(void)
{
char hello[] = "hello ", world[] = "world!\n", *s;
s = strcat(hello,world);
printf(s);
return 0;
}

char hello[] = "hello ", world[] = "world!\n", *s;
strcat(hello,world);
printf(hello); 
```

我把它改成了下面的

我很肯定我修复了该代码，但我的导师将我标记为关闭。就像我告诉他的那样，它甚至不使用指针，所以这很好。他说他不认为这是正确的

我错了吗？就像我跑了 50 次，它仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:31:38.817

你的导师是对的。 `hello`只能容纳 6 个字符（加上一个空终止符）。因此，尝试将`strcat`某些内容写入它会超出结尾，从而导致未定义的行为。

# grails - Grails 无方向的 hasMany createCriteria

> ID：15181098
> 
> 赞同：1
> 
> 时间：2013-03-03T00:29:41.157
> 
> 标签：grails, grails-orm, grails-2.0

**使用分页**的能力是目标，但是我不确定如何使用它。这种关系是单向的 hasMany（见下文）。目前它在**没有**分页的情况下可以正常工作（请参阅[屏幕截图](http://d.pr/i/xCiQ)），但是要使用分页，我必须更改控制器以使用 createCriteria。这就是我遇到困难的地方，因为这种关系很奇怪。

*领域*

```
Class Tag {

      String Tag
      User user

      static hasMany = [events: Event]
} 
```

*控制器*

```
def searchTags() {
    println("TAG CONTROLLER  -  Params sent on click of tag are:  "+params.selected)
    def results = Tag.findByTagAndUser(params.selected, lookupPerson())

    //resultTotal is for show for the time being 
    [query: params.selected, results: results, resultTotal: 0]
} 
```

*普惠制*

```
<g:each in="${results.events}" status="i" var="t">
   .... ommited as unnessary
</g:each>

//Not working yet due to confusing createCriteria issue
<div class="pagination">
    <g:paginate total="${resultTotal}" />
</div> 
```

我可以做一些指导，这是我到目前为止的想法，但我有点困惑：

```
 def tagCriteria = Tag.createCriteria()
    def result = tagCriteria.list (max: 50, offset: 10) {
        eq("tag", params.selected)
        and {
            eq("user", lookupPerson())
        }
        //Not sure what to do at this point compared with the findByTagAndUser(params.selected, lookupPerson()).events  events being the hasMany relationship seen in domain
        events {

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T13:29:59.070

试试这个。

```
def searchTags() {        
    def tagCriteria = Tag.createCriteria()
    def results = tagCriteria.list (max: 50, offset: 10) {

        eq("tag", params.selected)
        eq("user", lookupPerson())            

        projections {
            property("events")
        }
    }

    [query: params.selected, results: results, resultTotal: results.totalCount]
} 
```

HQL 版本 - 问题是您必须执行两次相同的查询，但选择`count(e)`

```
Tag.executeQuery("""
Select e
from Tag t join t.events as e
where t.tag = :selected
and t.user = :user
""", [selected: params.selected, user: lookupPerson()], [max: 50, offset 10]) 
```

# mod-rewrite - 需要帮助在 Apache 中使用参数重定向 URL

> ID：15181101
> 
> 赞同：1
> 
> 时间：2013-03-03T00:29:57.500
> 
> 标签：mod-rewrite

我想将这样一个[http://www.site.com.uy/filtro/?marca=42](http://www.site.com.uy/filtro/?marca=42)的 URL 重定向到这个[http://www.site.com.uy/celulares?marca=42](http://www.site.com.uy/celulares?marca=42)

我阅读了很多论坛、文档等以寻求解决方案并尝试了很多重写规则，但我找不到一个好的解决方案。我认为下面的代码应该可以工作，但我没有运气。

```
RewriteEngine on    
RewriteCond %{REQUEST_URI}  ^/filtro/$
RewriteCond %{QUERY_STRING} ^marca=([0-9]*)$
RewriteRule ^(.*)$ http://www.site.com.uy/celulares$1 [R=301,L] 
```

请帮我完成这个重定向工作。谢谢！！！

.htaccess 文件：

```
############################################
## uncomment these lines for CGI mode
## make sure to specify the correct cgi php binary file name
## it might be /cgi-bin/php-cgi

#    Action php5-cgi /cgi-bin/php5-cgi
#    AddHandler php5-cgi .php

############################################
## GoDaddy specific options

#   Options -MultiViews

## you might also need to add this line to php.ini
##     cgi.fix_pathinfo = 1
## if it still doesn't work, rename php.ini to php5.ini

############################################
## this line is specific for 1and1 hosting

    #AddType x-mapp-php5 .php
    #AddHandler x-mapp-php5 .php

############################################
## default index file

    DirectoryIndex index.php

<IfModule mod_php5.c>

############################################
## adjust memory limit

#    php_value memory_limit 64M
    php_value memory_limit 256M
    php_value max_execution_time 18000

############################################
## disable magic quotes for php request vars

    php_flag magic_quotes_gpc off

############################################
## disable automatic session start
## before autoload was initialized

    php_flag session.auto_start off

############################################
## enable resulting html compression

    php_flag zlib.output_compression on

###########################################
# disable user agent verification to not break multiple image upload

    php_flag suhosin.session.cryptua off

###########################################
# turn off compatibility with PHP4 when dealing with objects

    php_flag zend.ze1_compatibility_mode Off

</IfModule>

<IfModule mod_security.c>
###########################################
# disable POST processing to not break multiple image upload

    SecFilterEngine Off
    SecFilterScanPOST Off
</IfModule>

<IfModule mod_deflate.c>

############################################
## enable apache served files compression
## http://developer.yahoo.com/performance/rules.html#gzip

    # Insert filter on all content
        SetOutputFilter DEFLATE
    # Insert filter on selected content types only
    #AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript

    # Netscape 4.x has some problems...
     BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
     BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
     BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # Don't compress images
    #SetEnvIfNoCase Request_URI \.(?:gif|jpe?g|png)$ no-gzip dont-vary

    # Make sure proxies don't deliver the wrong content
     Header append Vary User-Agent env=!dont-vary

</IfModule>

<IfModule mod_ssl.c>

############################################
## make HTTPS env vars available for CGI mode

    SSLOptions StdEnvVars

</IfModule>

<IfModule mod_rewrite.c>

############################################
## enable rewrites

    Options +FollowSymLinks
    RewriteEngine on

############################################
## you can put here your magento root folder
## path relative to web root

    #RewriteBase /magento/

############################################
## uncomment next line to enable light API calls processing

#    RewriteRule ^api/([a-z][0-9a-z_]+)/?$ api.php?type=$1 [QSA,L]

############################################
## rewrite API2 calls to api.php (by now it is REST only)

    RewriteRule ^api/rest api.php?type=rest [QSA,L]

############################################
## workaround for HTTP authorization
## in CGI environment

    RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]

############################################
## TRACE and TRACK HTTP methods disabled to prevent XSS attacks

    RewriteCond %{REQUEST_METHOD} ^TRAC[EK]
    RewriteRule .* - [L,R=405]

############################################
## redirect for mobile user agents

    #RewriteCond %{REQUEST_URI} !^/mobiledirectoryhere/.*$
    #RewriteCond %{HTTP_USER_AGENT} "android|blackberry|ipad|iphone|ipod|iemobile|opera mobile|palmos|webos|googlebot-mobile" [NC]
    #RewriteRule ^(.*)$ /mobiledirectoryhere/ [L,R=302]

############################################
## always send 404 on missing files in these folders

    RewriteCond %{REQUEST_URI} !^/(media|skin|js)/

############################################
## never rewrite for existing files, directories and links

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-l

############################################
## rewrite everything else to index.php

    RewriteRule .* index.php [L]

</IfModule>

############################################
## Prevent character encoding issues from server overrides
## If you still have problems, use the second line instead

    AddDefaultCharset Off
    #AddDefaultCharset UTF-8

<IfModule mod_expires.c>

############################################
## Add default Expires header
## http://developer.yahoo.com/performance/rules.html#expires

    ExpiresActive On
    ExpiresDefault "access plus 1 year"

</IfModule>

############################################
## By default allow all access

    Order allow,deny
    Allow from all

###########################################
## Deny access to release notes to prevent disclosure of the installed Magento version

    <Files RELEASE_NOTES.txt>
        order allow,deny
        deny from all
    </Files>

############################################
## If running in cluster environment, uncomment this
## http://developer.yahoo.com/performance/rules.html#etags

    #FileETag none 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:38:16.540

试试这个，让我知道它是否有效。

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks  
RewriteEngine On
RewriteBase /

# /filtro/?marca=999 -> /celulares?marca=999
RewriteCond %{QUERY_STRING} .*marca=(\d+).* [NC]
RewriteRule ^filtro/$ /celulares/?marca=%1 [R=301,L,NC]

</IfModule> 
```

# css - 使用 Rails 生成静态 CSS 文件的最佳方法

> ID：15181102
> 
> 赞同：2
> 
> 时间：2013-03-03T00:30:02.153
> 
> 标签：css, ruby-on-rails, ruby, sass, less

我是 Rails 新手，我正在为一些练习创建一个应用程序，用于保存 CSS 片段。现在，我有一个 Entries 的 mvc 设置，我可以在其中完成所有典型的 crud 工作。给条目一个标题、描述和一个 CSS 片段。我想使用我保存在数据库中每个条目中的 css 片段来创建一个包含所有片段的样式表，供用户下载。最后，我想提供这个样式表的 CSS、LESS 和 SASS 版本，这样您就可以选择自己的风格进行下载。更进一步，我希望用户能够自定义哪些片段将在他们下载的文件的 CSS/Less/Sass 版本的下载中，甚至是所有 3 个的 zip。

我被挂断的部分是何时以及如何生成文件的方法。为了简单起见，我可以从 CSS 文件开始，然后将这些知识应用于稍后创建 Less 和 Sass 版本，但如果你也有这方面的提示，那将是很棒的。

这个问题的答案让我对 Sass:Engine 有了一些了解，但我无法从中获得完整的答案。 [使用 SASS gem 将 SASS 转换为 CSS](https://stackoverflow.com/questions/12612430/convert-sass-to-css-using-sass-gem)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:51:55.847

使用 Rails，您不仅限于呈现 HTML。您可以提供自己的视图，将上下文呈现为 text/css，并且文件将由浏览器显示。

如果你想内联渲染它，你可以这样做：

```
def test_css_download
  css = "body { font-family: Arial; }"
  render :text => css, :content_type => "text/css"
end 
```

如果您想让他们将其作为文件下载，您可以`send_data`像这样使用：

```
def test_css_download
  css = "body { font-family: Arial; }"
  send_data css, :filename => "styles.css", :type => "text/css", :disposition => "attachment"
end 
```

当您访问此路线时，浏览器会将内容下载为文件。

# c++ - const char** x 和 const char* x[] 有何相似之处？

> ID：15181103
> 
> 赞同：0
> 
> 时间：2013-03-03T00:30:11.270
> 
> 标签：c++

我很难理解或找到关于它是什么`const char** x`以及如何使用它的简单解释？

我有点理解这`char* x[]`是一个字符指针数组。

我发现的一种解释`char** x`是“它们是指向变量指针数组的变量指针`const chars`”。

我很困惑。是`x`指针数组还是只是一个指向指针数组的指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:34:14.360

如果我写了`T *x`，你会明白的，我猜？ `x`只是一个指向类型对象的指针`T`。该对象**可能**是数组中的第一个元素`T`。而`T x[10]`实际上是 10 的数组`T`。

在你的情况下，`T`是`const char *`。`x`指向 a 的指针也是如此`const char *`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:44:25.577

`[]`它主要是声明事物数组的快捷方式，而不是真正的类型。它在声明数组元素或指定该数组有多少个“槽”时使用。

但是 C 不会像处理一个单一的东西一样处理整个数组，因此您从该操作获得的结果变量是`char *`指向该数组的第一个元素的指针，因此`char x[]`在`char *x`某种程度上暗示是同一类型。

`char x[] = "string";`例如，当声明是一个指向数组第一个元素的`x`类型变量时，其值为。`char *``x[0]``'s'`

您可以将该概念重新应用于矩阵或数组数组，这与指向指针集合的指针相同。

所以 while`char *x`可能是一个字符串，也可能是一个字符串`char **x`列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:01:51.593

对于您使用的每种类型，`*`它都是指向该类型的指针。它可能指向内存中一系列元素的一个元素或第一个元素（在您第一次分配它时）。例如，使用指针可以使用[指针算术](http://www.cs.umd.edu/class/sum2003/cmsc311/Notes/BitOp/pointer.html)`x++`导航到下一个元素，也可以`x[1]`在其上使用索引运算符。指针算术不能应用于 const 指针，因为你声明它是常量，所以很明显。

对于您使用的每种类型，`[]`它都是一个数组。对于数组，您不能使用指针算法，只有`[]`运算符允许您访问数组的元素。

在访问元素时，您可以说 const 指针类似于数组。

当您在编译时知道它应该具有什么大小时，请使用数组。这些将驻留在堆栈上。

当您必须在运行时分配内存或您必须使用指针算法时，请使用指针。运行时分配的内存驻留在堆上。

这里有一个[讲座](http://www.cs.bu.edu/teaching/cpp/string/array-vs-ptr/)，可以帮助你更好地理解。

我希望我没有说任何错误，自从我上次使用 C 以来已经有一段时间了：/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T01:24:31.300

这是一个例子：

```
char ch;
char *pch = &ch;
char **ppch = &pch; 
```

在这种情况下，不涉及数组。

有一个变量包含一个字符 ( `ch`)。

然后有一个变量包含一个指针 ( `pch`)。这只是内存中保存数据的位置的地址。但是编译器和程序员也对存储在该位置的值的类型感兴趣（例如，要知道它需要多少字节，或者对该值允许哪些操作）。所以指针的类型与它所指向的值的类型相关。在这种情况下，`pch`是指向一个字符值，所以类型是`char *`。

然后还有另一个变量包含一个指针 ( `ppch`)。同样，它只是内存中某个位置的地址，但这次存储在该位置的值是一个指针。因此，涉及到两个指针，`ppch`以及它指向的指针。两个指针都有一个类型。`ppch`是一个`char **`- 指向 char 的指针。它指向的值是一个`char *`- 指向一个字符的指针。

指针可以指向单个值，但在某些情况下，如果存在具有相同类型的值序列（数组），它也很有用。在这种情况下，指针可以指向序列中的任何值，并且使用指针算法可以将其更改为指向同一序列中的其他值。

所以就像`char *`一个可以指向一个字符的指针一样，它也可以指向一个字符序列中的任何值，而且在很多情况下，如果它指向序列中的第一个值是很有用的。

`char **`指向一个`char *`值，该值也可以是单个值或值序列中的多个值之一（更具体地说，是序列中的第一个值）。

这`char *array[]`与实际的指针序列不同。区别很重要：

```
char *pointers[5];
char **pp; 
```

这里，`char *pointers[5]`是一个由 5 个指针组成的数组。这是实际的顺序。`sizeof(pointers)`是单个指针大小的 5 倍。

But`pp`只是一个指针 - 它是一个包含单个指针的变量，并且`sizeof(pp)`是单个指针的大小。由于它是指向指针的指针，因此它也可以指向 的第一个元素`pointers`（或指向任何其他`char *`值，包括 的其他元素`pointers`）。

现在只有`const`. 这只会影响它出现的类型（这有点令人困惑，因为 C 允许不同的顺序，并且`const char`与 相同`char const`）。非常`const char **pp`量指针（意味着指针可以更改）到非常量指针（因此指针也可以更改）到 const char（意味着字符的值不能被 修改`pp`）也是如此。

所以`pp`它本身可以被程序改变——它可以指向不同的指针。它指向的指针也可以改变——它可以指向不同的字符。但是字符本身不能使用`pp`.

举个合理的例子，我们需要几个`const char`指针和几个字符来指向。最简单的方法是使用数组：

```
char seq1[5] = { 'a', 'b', 'c', 'd', 'e' };
char seq2[3] = { 'x', 'y', 'z' };
const char *p1;
const char *p2;
const char **pp;

p1 = &seq1[0]; /* valid, same as p1 = seq1 */
p1 = &seq1[3]; /* valid */
*p1 = 's';  /* invalid - the character that p1 points to cannot be changed by p1 */
p2 = seq2;  /* valid */
pp = &p1;  /* valid */
*pp = &seq1[2];  /* valid - pp is a non-const pointer, so the value it points to can change */
pp = &p2;  /* valid - pp itself is non-const */
**pp = 't';  /* invalid - same as *(*pp) which is *p2 which is const when accessed by pp */ 
```

请注意， 的含义`const`不是该值永远不能改变，而是它不能被 const 变量（或 const 指针）改变。以下示例应阐明：

```
char ch;
char *pch = &ch;
const char *cpch = &ch;

ch = 'a';  /* fine - ch is not const */
*pch = 'b';  /* fine - pch does not point to a const value */
*cpch = 'c';  /* invalid - cpch points to a const value */ 
```

# c++ - 如何将值 3 传递给“x”以实例化模板函数“f”？

> ID：15181104
> 
> 赞同：0
> 
> 时间：2013-03-03T00:30:23.133
> 
> 标签：c++, templates

编译器如何将值 3 传递给非类型参数`x`？

```
#include <iostream>

template <typename Type, size_t x>
void f(Type (&a)[x])
{
    for (int i = 0; i < x; i++)
    {
        a[i] = i;
        std::cout << a[i] << '\n';
    }
}

int main()
{
    int v[3];
    f(v);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:32:22.047

模板允许类型名和整数类型，例如`size_t`.

对于整数类型，模板函数使用值（必须在编译时知道）进行初始化，而不是类型。

编译器知道该函数`f()`需要一个类型的参数，`Type (&a)[x]`并检查是否有 和 的任何组合`Type`适用`x`于`v`您传递的参数。

这个过程称为*模板类型推导*。

# html - jQuery 移动选择图像以供稍后上传

> ID：15181109
> 
> 赞同：16
> 
> 时间：2013-03-03T00:31:18.950
> 
> 标签：html, jquery-mobile

我正在使用[JQuery Mobile](http://en.wikipedia.org/wiki/JQuery_Mobile)构建一个小型移动 Web 应用程序。现在我想在手机上选择一张图片并获取有关它的信息，以便稍后从应用程序上传它。这是可能吗？

我可能处于离线状态，但应该仍然可以选择要上传的图像。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-03T08:16:13.160

如果您的目标手机浏览器支持[文件上传输入类型](http://www.w3.org/TR/html-media-capture/)和[FileAPI](http://www.w3.org/TR/FileAPI/)（例如 iOS 6.0 Safari）

```
<input type="file"  name="image" accept="image/*" capture> 
```

然后您可以让您的用户选择一个现有文件，甚至使用相机拍摄，并读取图像文件的一些属性（文件名、大小、类型、修改日期）。

```
$("input[type=file]").change(function(){
    var file = $("input[type=file]")[0].files[0];
    alert(file.name + "\n" +
          file.type + "\n" + 
          file.size + "\n" + 
          file.lastModifiedDate);
}); 
```

您还可以使用 预览所选文件`FileReader`。

```
<div id="preview"></div> 
```

```
displayAsImage3(file, "preview");

function displayAsImage3(file, containerid) {
    if (typeof FileReader !== "undefined") {
        var container = document.getElementById(containerid),
            img = document.createElement("img"),
            reader;
        container.appendChild(img);
        reader = new FileReader();
        reader.onload = (function (theImg) {
            return function (evt) {
                theImg.src = evt.target.result;
            };
        }(img));
        reader.readAsDataURL(file);
    }
} 
```

**这是工作的[jsFiddle](http://jsfiddle.net/pmatseykanets/R99NY/)**

# javascript - JQuery Google地图插件不呈现基本地图

> ID：15181112
> 
> 赞同：2
> 
> 时间：2013-03-03T00:31:36.073
> 
> 标签：javascript, android, jquery, google-maps, cordova

我正在尝试重新创建 JQuery Google 地图演示页面，该页面正在呈现地图的框，但地图本身没有显示。

```
<script type="text/javascript">
var mobileDemo = { 'center': '57.7973333,12.0502107', 'zoom': 10 };

$('#basic_map').live('pageinit', function() {
    demo.add('basic_map', function() {
        $('#map_canvas').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
            var self = this;
            self.addMarker({'position': this.get('map').getCenter() }).click(function() {
                self.openInfoWindow({ 'content': 'Hello World!' }, this);
            });
        }}); 
    }).load('basic_map');
});

$('#basic_map').live('pageshow', function() {
    demo.add('basic_map', function() { $('#map_canvas').gmap('refresh'); }).load('basic_map');
}); 
```

这是`div`index.html 页面的下方

```
<div id="basic_map" data-role="page">
<div data-role="header">
    <h1><a data-ajax="false" href="/">maps page</a> examples</h1>
    <a data-rel="back">Back</a>
</div>
<div data-role="content">   
    <div class="ui-bar-c ui-corner-all ui-shadow" style="padding:1em;">
        <div id="map_canvas" style="height:350px;"></div>
    </div>
</div> 
```

如果有帮助，这是我的 index.html 的头

```
 <meta name="viewport" content="width=device-width, initial-scale=1">    
<title>FTF</title> 
<link href="css/jquery.mobile-1.0rc1.min.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.6.4.min.js"></script>
<script src="js/config.js"></script>
<script src="js/jquery.mobile-1.0rc1.min.js"></script>
<script type="text/javascript" charset="utf-8" src="js/phonegap.js"></script>
<script type="text/javascript" src="js/demo.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=(removed)&sensor=false"> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T11:49:51.643

```
<meta name="viewport" content="width=device-width, initial-scale=1">  
<title>FTF</title>
<link href="css/jquery.mobile-1.0rc1.min.css" rel="stylesheet" type="text/css" />
<script src="js/jquery-1.6.4.min.js"></script>
<script src="js/config.js"></script>
<script src="js/jquery.mobile-1.0rc1.min.js"></script>
<scripttype="text/javascript" charset="utf-8" src="js/phonegap.js"></script>
<script type="text/javascript" src="js/demo.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=(removed)&sensor=false"> 
```

您还没有包含以下三个文件：

```
<script type="text/javascript" src="../ui/jquery.ui.map.js"></script>
<script type="text/javascript" src="../ui/jquery.ui.map.services.js"></script>
<script type="text/javascript" src="../ui/jquery.ui.map.extensions.js"></script> 
```

# java - GUI编程，FlowLayout阻塞了JFrame（？）上的其他东西

> ID：15181120
> 
> 赞同：3
> 
> 时间：2013-03-03T00:32:45.083
> 
> 标签：java, swing, user-interface, flowlayout, preferredsize

该程序的想法是我在框架上的某个地方有一些按钮和一个图标。我想让按钮改变颜色。我只担心现在让所有元素都显示出来。如果我注释掉第 11-13 行，我会看到打印出的“hello”，上面有一个红色圆圈。否则，我只有“红色”按钮，没有“你好”或我的红色圆圈。所以这是我的代码：

```
import javax.swing.*; 
import java.awt.*;
import java.awt.geom.*;

public class ButtonTester 

{
    public static void main (String[] args) 
    {  
        JFrame frame = new ButtonFrame(); 
        frame.setLayout(new FlowLayout(FlowLayout.RIGHT));
        JButton redButton = new JButton("Red");
        frame.add(redButton);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setVisible(true); 
    }
}

class ButtonFrame extends JFrame 
{  
    public static final int DEFAULT_WIDTH = 300;  
    public static final int DEFAULT_HEIGHT = 200;  

    public ButtonFrame() 
    {   
        setTitle("Hello"); 
       setSize(DEFAULT_WIDTH, DEFAULT_HEIGHT); 
       ButtonPanel panel = new ButtonPanel(); 
       add(panel); 
    } 
} 

class ButtonPanel extends JPanel 
{ 
    public void paintComponent(Graphics g) 
    {   
        super.paintComponent(g); 
        Graphics2D g2 = (Graphics2D) g;  
        g2.drawString("Hello !", 100, 100);
        Icon ico = new ColorIcon(32);
        ico.paintIcon(null, g, 75, 75);
    } 
} 
```

我 90% 确定问题出在第 11-13 行，但我不确定要更改什么以使所有内容都可见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T00:38:50.237

你的问题是你的 ButtonPanel 的大小是 0。让它覆盖 getPreferredSize() 你会明白我的意思：

```
class ButtonPanel extends JPanel {
   private static final int PREF_W = 150;
   private static final int PREF_H = PREF_W;

   public void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.drawString("Hello !", 100, 100);
      // !! Icon ico = new ColorIcon(32);
      // Icon ico = new ImageIcon();
      // ico.paintIcon(null, g, 75, 75);
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }
} 
```

顺便说一句，你为什么要在 paintComponent 方法中创建一个 Icon ？这对我来说没有意义，只会不必要地减慢您的图形速度。

**编辑**
你状态：

> 好的，我在覆盖 getPreferredSize() 后看到了差异但是创建图标的“更好”或“正确”方法是什么？我只是想按照 Java 教科书中的练习指示进行操作：练习 4.14。编写一个程序，显示一个框架，其中包含三个标记为“红色”、“绿色”和“蓝色”的按钮，以及一个包含一个图标的标签，该图标显示一个最初为红色的圆圈。当用户点击按钮时，圆圈的填充颜色应该会改变。更改颜色时，需要在标签上调用 repaint 方法。调用 repaint 确保调用 paintIcon 方法，以便可以使用新颜色重新绘制图标。

你需要以不同的方式思考这个问题。我自己会创建三个 ImageIcon，一个用于蓝色圆圈，一个用于红色，一个用于绿色。然后我会在我的 JFrame 上的 JLabel 中显示 ImageIcon。我会通过它的`setIcon(...)`方法简单地交换标签的图标来改变颜色。我不会担心搞砸，`paintComponent(...)`而是会尝试以尽可能简单的方式解决这个问题。

# javascript - 根据所选选项更改表数据

> ID：15181121
> 
> 赞同：3
> 
> 时间：2013-03-03T00:33:09.810
> 
> 标签：javascript, jquery

我有一个显示数据库数据的表格。我有一个选择框，人们可以在其中选择他希望显示数据的货币。

当他这样做时，我需要刷新数据并将其显示为新货币。如果不刷新整个页面，我不知道该怎么做。

请问有什么想法吗？

```
<select id="currency">
<option value = "rub">В рублях</option>
<option value = "usd">USD</option>
<option value = "eur">EURO</option>
</select>
<table id="servers" cellpadding="0" cellspacing="0">
 <tr>
<td width="400"><b>Сервер</b></td>
<td width="100"><b>1 кк адены</b></td>
<td width="100"><b>1 ккк адены</b></td>
</tr>
<?php 
$sql = mysql_query("SELECT * FROM `prices`");
while($r = mysql_fetch_array($sql)) {
echo("\t\t<tr>\n");
echo("\t\t\t<td>".$r['name']."</td>\n");
echo("\t\t\t<td>$".round($r['kk']/$dollar, 2)."</td>\n");
echo("\t\t\t<td>$".round($r['kkk']/$dollar, 2)."</td>\n");
echo("\t\t</tr>\n");
} ?>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:36:38.553

您可以使用 Ajax，它允许在不刷新整个页面的情况下请求数据库并检索数据。

这是一个介绍：[http ://www.w3schools.com/jquery/jquery_ajax_intro.asp](http://www.w3schools.com/jquery/jquery_ajax_intro.asp)

然后，查看 jquery API 并查看示例：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:07:24.763

如果您可以保存数据转换的因素（用于转换 USD>AUS USD>EUR 或其他），您可以使用一个通用选择器在整个表格中委派更改。

首先，您将所有因素放在 js 变量中，如下所示（这必须在 php 文件中完成，其他内容可以在单独的 js 中完成）：

```
var USDtoEUR = <?php echo $php2eur; ?> 
```

接下来，您将事件绑定到单击选择框、按钮或其他任何内容，假设它是带有 id "currency" 的选择：

```
$('#currency'). click(function() {
 switch ($('this').val()) {
   case 'EUR' {
      //Code we will discuss is going here
   }
   break;
//... etc... 
```

因此，我们想要更改我们假设点击时以美元为单位的所有数据，因此我们拥有将所有因素从美元转换为存储在单独的变量 USDtoXXX 中的其他值。请注意，我们也需要一个 USDtoUSD。

现在......无论结构是什么，包含动态更改数据的元素都应该具有如下类和 inusd 属性：

```
<li class="price" inusd="123">123</li> 
```

usd 中的价格应该存储到一个属性中，以使其独立于将要更改的 dom 内容。

所以对于上面的例子，我们这样做：

```
$('.price').each(function() {
  $(this).text()=$(this).attr('inusd')*USDtoEUR;  //If user selected EUR
} 
```

小心在 switch 语句中使用中断和默认值... javascript switch 让 case 放弃它们的条件。

另外，在使用金钱时，请对计算功能进行深入测试，javascript有时也会弄乱那个upp :D

# matlab - 将元胞数组的元胞数组转换为matlab中的列表

> ID：15181124
> 
> 赞同：1
> 
> 时间：2013-03-03T00:33:50.277
> 
> 标签：matlab, matrix, cell-array

我在matlab中有一个字符串单元格数组的单元格数组。我想将其转换为唯一字符串的简单列表，以便我可以通过列表中的索引访问字符串。最快的方法是什么？例子 -

```
C = {1x3 cell}    {1x2 cell}
>> C{1}
ans = 'What's'    'up'    'man'
>> C{2}
ans = 'What's'    'there' 
```

我想要一个大小为 4 的列表，这样每个索引都指向一个唯一的词——“What's”、“up”、“man”、“there”。不确定此列表是否应该是元胞数组或矩阵，或者它最有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:21:51.323

这是执行您需要的代码。您可以将它用于任何大小的数组。

```
Cunq = unique(horzcat(C{:}),'stable'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:08:06.830

您可以在单元格数组上调用[union](http://www.mathworks.com/help/matlab/ref/union.html#btcme1d-13)。

```
union(C{1},C{2}) 
```

如果顺序很重要，请添加第三个参数：

```
union(C{1},C{2},'stable') 
```

# google-apps-script - 在谷歌脚本中测试背景颜色

> ID：15181128
> 
> 赞同：5
> 
> 时间：2013-03-03T00:34:18.740
> 
> 标签：google-apps-script

请注意：我不是很精通编码和谷歌脚本的新手。

我正在尝试测试脚本中的背景颜色。具体来说，我将一个名称数组存储到一个命名范围中，并想计算有多少单元格设置为绿色。
到目前为止，我有以下但收到错误：TypeError：无法将未定义的属性“0.0”设置为“#00ff00”

```
function testCount(range) {

  var ranges = SpreadsheetApp.getActiveSpreadsheet().getRangeByName("testrange");
  var names = SpreadsheetApp.getActiveSpreadsheet().getRangeByName("testrange").getValues();

  var NumColumns = ranges.getNumColumns();
  var NumRows = ranges.getNumRows();
  var c = 0;

  for (var i = 0; i<NumColumns; i++){
    for (var j = 0; j<NumRows; j++){
      if (ranges.getBackgrounds()[i][j] ="#00ff00"){ 
        c++;
      }else{
        c=c;
      }
    }
  }
  return c; 
```

当我尝试以下颜色的单元格时，我抓住了绿色的值

```
return ranges.getBackgrounds()[0][1]; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T01:07:40.930

看起来您的代码需要稍微清理一下。我将解释编辑。

```
function testCount() {

  var ranges = SpreadsheetApp.getActiveSpreadsheet().getRangeByName("testrange"); 
```

不需要这`var names`条线，因为您似乎不使用它。

```
 var NumColumns = ranges.getNumColumns();
  var NumRows = ranges.getNumRows(); 
```

一次抓取所有单元格的背景并将其存储在变量中。

```
 var backgrounds = ranges.getBackgrounds();
  var c = 0;

  for (var i = 0; i<NumColumns; i++){
    for (var j = 0; j<NumRows; j++){ 
```

引用`backgrounds`我们在上面创建的变量。另外，第一个数字是行号，第二个数字是列号。所以你会想要交换你原来的东西`i`。`j`此外，`a = 10` *将*值 10 分配给变量 a。要检查是否相等，请使用`==`. 这将检查两个值是否相同。

```
 if (backgrounds[j][i] == "#00ff00"){ 
        c++;
      } 
```

不需要有一个`else`不做任何事情的声明。你可以把这`else`部分放在外面。

```
 }
  }
  return c;
} 
```

# php - PHP - 通过 QueryString 循环

> ID：15181131
> 
> 赞同：1
> 
> 时间：2013-03-03T00:34:44.553
> 
> 标签：php, loops, foreach, query-string

试图遍历 php 中的查询字符串，但只获取最后一个值。我应该怎么做才能获得所有值？

例如：querystring = ?style=ranch&style=barn&style=colonial

php:

```
$sqlStyle = "SELECT DISTINCT COUNT(*) as count  FROM houses_single ";
$i = 1;
foreach ($_GET as $key => $value) {
    if ($i == 1){
        $sqlStyle .= "where ";
     }else{
        $sqlStyle .= " and ";
    }
    $sqlStyle .=  $key . " like '%" . $value ."%'";
    $i++;
 }
 echo $sqlStyle; 
```

结果：SELECT DISTINCT COUNT(*) as count FROM house_single Where Houses like '%colonial%'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:41:47.333

在这种情况下，查询参数“style”是一个数组，必须用方括号标识 - 如果不是，最后一个 key=value 对将覆盖其他对。

```
?style[]=ranch&style[]=barn&style[]=colonial 
```

`$_GET['style']`是一个数组，那么你可以通过使用循环`foreach`：

```
foreach ($_GET['style'] as $value) {
    // ...
} 
```

如果 'style' 不是您要添加的唯一参数，您可以在循环中使用`is_array()`检查：`foreach`

```
 foreach ($_GET as $key => $value) {
        if ($i == 1){
            $sqlStyle .= "where ";
         }else{
            $sqlStyle .= " and ";
         }

         if(is_array($value)) {
             $sec = array();
             foreach($value as $second_level) {
                 $sec[] =  $key . " LIKE '%" . $second_level."%'";
             }
             $sqlStyle .= implode(' AND ', $sec);
         }
         else {
            $sqlStyle .=  $key . " LIKE '%" . $value ."%'";
         }

         $i++;
     }
     echo $sqlStyle; 
```

没有 foreach 的替代方案：

```
<?php

$statement = "SELECT DISTINCT COUNT(*) as count FROM `houses_single`";

if(is_array($_GET)) {
   $statement .= ' WHERE';

   // create copy to keep the $_GET array
   $add_where = $_GET;

   array_walk(function($elem,$key){
      is_array($elem) {
         return implode(' AND ', array_map(function($sec) using ($key)  {
             return "$key LIKE '%$sec%'";
         }, $elem);
      }
      else {
            return "$key LIKE '%$elem%'";
      }
   },$add_where);

   $statement .= implode(' AND ', $add_where);
} 
```

*（代码未经测试）*

Sidenode 关于安全性：我希望您不会在没有任何参数转义的情况下使用您在生产环境中提供的这段代码片段。

# vb.net - 以编程方式设置选项卡控件选项卡页上控件的属性

> ID：15181136
> 
> 赞同：1
> 
> 时间：2013-03-03T00:35:26.913
> 
> 标签：vb.net

我正在使用一个选项卡控件，在该选项卡控件上与设计器一起创建第一页。我正在以编程方式在页面上创建带有控件的新标签页。每页都有几个面板，每个面板都有两个单选按钮（一个是，另一个不是）。在第一个面板内嵌套了一个面板，其可见属性设置为 false。如果用户选择是，我希望嵌套面板的可见属性设置为 true，这将显示更多的单选按钮，他们必须从中做出更多选择。

我的问题是在除第一页之外的任何页面上更改嵌套面板的属性。我可以检测到单选按钮，但我似乎无法找到使嵌套面板可见的方法。

```
Public Class ControlProgram

Dim pageindx as integer

 Private Sub btnAddPrgm1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAddPrgm1.Click

    Dim newTab As New TabPage()
    pageindx = (TabControl1.TabPages.Count + 1)
    newTab.Text = "Step  " & pageindx
    'define fill panel controls
    Dim newpnlFill As New Panel
    Dim newlblFill As New Label
    Dim newFillY As New RadioButton
    AddHandler newFillY.CheckedChanged, AddressOf CheckforCheckedChanged
    Dim newFillN As New RadioButton
    AddHandler newFillN.CheckedChanged, AddressOf CheckforCheckedChanged

    'add fill panel controls
    With newTab.Controls
        .Add(newpnlFill)
        With newpnlFill
            .Location = New System.Drawing.Point(6, 6)
            .Size = New System.Drawing.Size(171, 137)
            .BorderStyle = BorderStyle.FixedSingle
            .Controls.Add(newlblFill)
            With newlblFill
                .Name = "Fill"
                .Text = "Fill ?"
                .Font = New Font(newlblFill.Font, FontStyle.Bold)

                .Location = New Drawing.Point(5, 3)
            End With
            .Controls.Add(newFillY)
            With newFillY
                .Name = "FillY"
                .Text = "Yes"
                .Location = New Drawing.Point(23, 28)
                .Size = New System.Drawing.Size(43, 17)
            End With
            .Controls.Add(newFillN)
            With newFillN
                .Name = "FillN"
                .Text = "No"
                .Location = New Drawing.Point(88, 28)
                .Size = New System.Drawing.Size(39, 17)
            End With
            .Controls.Add(newpnlFill2)
            With newpnlFill2
                .Location = New System.Drawing.Point(2, 60)
                .Size = New System.Drawing.Size(164, 68)
                .BorderStyle = BorderStyle.FixedSingle
                .Visible = False
            End With
      End With
   End With
Private Sub CheckforCheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    If TypeOf sender Is RadioButton Then

        bEvent = CType(sender, RadioButton).Name
     End If
End Sub 
```

结束类

此后，我以您的建议为起点，找到了解决我的 delima 的方法。

我添加了一些变量： Dim rb as Control Dim bEvent as String Dim booFillY as Boolean Dim booFillN as Boolean

我还添加了 TabControl TabControl1.TabPages.Add(newTab)

我也做了这些改变：

```
 Private Sub CheckforCheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    If TypeOf sender Is RadioButton Then

        rb = sender
        bEvent = CType(sender, RadioButton).Name
        If bEvent = "FillY" Then
            Dim newpnlFill2 As Panel = rb.Parent.Controls(3)
            newpnlFill2.Visible = True
        End If
        If bEvent = "FillN" Then

            Dim newpnlFill2 As Panel = rb.Parent.Controls(3)
            newpnlFill2.Visible = False

        End If
    End If
End Sub 
```

现在，我可以通过在创建的任何标签页上单击“是”或“否”单选按钮来使嵌套面板（newpnlFill2）可见或不可见。谢谢你的帮助。我怀疑我自己会不会到达那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:15:09.693

可能不是您要找的东西，但应该有助于您到达需要去的地方。

当我创建应用程序时，我喜欢在加载事件中为给定页面构建所有控件的列表，以便我可以随时访问它们。这很有帮助，因为 WinForms 对在标签页或组框等中显示子控件非常挑剔。

```
'Declare this variable within the class for your form (whatever)
Public arrControlsRecursive As New List(Of Control)

'method to recursively check all controls and build to array
Private Sub BuildControlsArrayRecursive(ByVal InControl As Control)
    For Each con As Control In InControl.Controls
        If con.Controls.Count > 0 Then
            BuildControlsArrayRecursive(con)
        End If
        If TypeOf con Is Control Then
            arrControlsRecursive.Add(con)
        End If
    Next
End Sub

'Call from MyBase.Load Event
BuildControlsArrayRecursive(Form1) 
```

您也可以只组装所有选项卡的列表，例如，通过将 If 语句更改为`Is TypeOf con Is TabPage`

Now you can loop through this collection or query it with LINQ. Find a single control by calling the first or single method. Cast to the type you want and do anything to any control anywhere within your form.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:05:12.797

不太明白你要访问什么，你先说说

> **在第一页以外**的任何页面上更改嵌套面板的属性

 **所以我假设你想访问其他选项卡，然后，你谈论：

> 我似乎找不到使**面板**可见的方法

无论如何，这是两个解决方案：

**访问其他面板：**

```
Private Sub CheckforCheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    If TypeOf sender Is RadioButton Then
        bEvent = CType(sender, RadioButton).Name '**Where is "bEvent" declared??**

        Dim newpnlFill2 as Panel = bEvent.Parent.Controls(3), Panel)
        newpnlFill2.Visible = bEvent.Checked
     End If
End Sub 
```

您可以访问`Parent`它是 newpnlFill，然后访问`Controls(3)`它应该是`newpnlFill2`.

**访问其他选项卡：**

```
Private Sub CheckforCheckedChanged(ByVal sender As Object, ByVal e As System.EventArgs)
    If TypeOf sender Is RadioButton Then
        bEvent = CType(sender, RadioButton).Name '**Where is "bEvent" declared??**

        Dim TabControl as TabControl = bEvent.Parent.Parent.Parent, TabControl)
        'Then, you can access all of the other tabs with:
        'TabControl.TabPages(n)
     End If
End Sub 
```

这假设您将您添加`newTab`到 TabControl 的某个地方。我看到你从来没有添加`newTab`到任何 TabControl，所以你永远不会看到它。第一个`Parent`是`newpnlFill`，第二个是引用，`newTab`最后一个是保存 Tab 的 TabControl。

无论如何，这真的很恶心，因为它假定您的标签总是以这种方式创建的。例如，如果您**之前** `newpnlFill`要添加另一个面板，则它不再是面板中的第 4 个控件，因此您需要更改访问代码。

我的建议是创建您自己的继承自 TabPage 的 UserControl，这样您就可以创建始终引用您要更改的面板的私有变量。此外，btnAddPrgm1_Click 事件将更加清晰，在您的类构造函数中移动页面的构建。就像是：

```
Private Sub btnAddPrgm1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAddPrgm1.Click
    Dim newTab As New MyTabPage()
    pageindx = (TabControl1.TabPages.Count + 1)
    newTab.Text = "Step  " & pageindx
    TabControl1.TabPages.Add(newTab)
End Sub 
```**

# c# - 是否有一种算法可以对属性排列的集合进行索引？

> ID：15181139
> 
> 赞同：0
> 
> 时间：2013-03-03T00:35:34.760
> 
> 标签：c#, .net, algorithm, indexing

鉴于：

```
IMatchCriteria {
    string PropA{get;}
    string PropB{get;}
    int? PropC {get;}
    int? PropD {get;}
}

IReportRecord : IMatchCriteria {...}

IMatchCriteriaSet : IMatchCriteria {
    int MatchId {get;}
    double Limit{get;}
}

public class Worker{

private List<IMatchCriteriaSet> _matchers = GetIt();
//Expecting this list to be huge, ***upto 0.1m***. Some of the sample matchers:
// MatchId=1, Limit=1000, PropA=A, PropC=101, PropD=201
// MatchId=2, Limit=10,   PropA=A
// MatchId=3, Limit=20,            PropC=101
// MatchId=4, Limit=500,                      PropD=201

   //Based on sample entries:
   //Input: reportRecord{ PropA=A, PropC=101 }, Ouput: 1000, 20
   //Input: reportRecord{ PropA=A1, PropC=102, PropD=201 }, Ouput: 500
    public IEnumerable<double> GetMatchingLimits(IReportRecord reportRecord) {
         //Bad, very bad option:
         foreach(var matcher in _matchers){
             var matchFound=true;
             if(reportRecord.PropA!=null && reportRecord.PropA!=matcher.PropA){                
                 continue;
             }
             if(reportRecord.PropB!=null && reportRecord.PropA!=matcher.PropB){
                 continue;
             }
             if(reportRecord.PropC!=null && reportRecord.PropC.Value!=matcher.PropC.Value){
                 continue;
             }
             if(reportRecord.PropD!=null && reportRecord.PropD.Value!=matcher.PropD.Value){
                 continue;
             }
             yield return matcher.Limit;
         }
    }

    } 
```

注意：期望 IMatchCriteriaSet 为 0.1m 条记录。期望 GetMatchingLimits 被调用 1m 次。要求是为实时应用程序执行所有这些操作。

基本上我需要的是一种索引 IMatchCriteria 列表的方法。但不能使用字典，因为我的键没有定义。寻找一些算法来***有效***地解决这个问题。

.net（不仅仅是 c#）范围内的任何建议解决方案都会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:13:27.577

为每个可索引属性使用一个字典，映射到一组匹配器。然后，您可以对记录中设置的每个属性（对数复杂度）进行字典查找，并与结果集相交。从最小的结果集开始并减少它以获得最佳运行时间。

# php - 表单数组中的复选框数组

> ID：15181142
> 
> 赞同：-2
> 
> 时间：2013-03-03T00:36:22.740
> 
> 标签：php, html, forms, checkbox

我正在尝试获取表单数组中的复选框数组。我试图首先将数据作为表单数组获取，然后在数组中获取复选框数组。

```
<form name="preview" id="post" action="" method="post">
    <input type="hidden" name="category[$id]" />
    <input type="checkbox" name="subcat[]" value="something" />
    <input type="checkbox" name="subcat[]" value="somewhere" />
    <input type="checkbox" name="subcat[]" value="something" />
    <input type="checkbox" name="subcat[]" value="somewhere" />

    <input type="hidden" name="category[$id]" />
    <input type="checkbox" name="subcat[]" value="something" />
    <input type="checkbox" name="subcat[]" value="somewhere" />
    <input type="checkbox" name="subcat[]" value="something" />
    <input type="checkbox" name="subcat[]" value="somewhere" />
    <input class="button-primary" name="submit_preview" value="Submit Selected Tees" type="submit">
</form>
if (isset($_POST['submit_preview'])) {
    foreach ( $_POST[ 'category' ] as $id ) {
        foreach ( $_POST[ 'subcat' ][$id] as $subcat ) {
             echo $subcat;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:04:43.327

Mindreading：您获得所有类别的所有复选框值，但希望按类别进行。--> 您必须通过名称属性将子类别（复选框）链接到类别。

`$categories`：数组持有`id`和`name`你的类别：

```
<form name="preview" id="post" action="" method="post">
<?
foreach ($categories as $cat) { // for each of your categories 4 checkboxes

    echo "<p>category: {$cat['name']}</p>";
    echo "<input type=\"checkbox\" name=\"cat_{$cat['id']}_sub[]\" value=\"something\" /> option 1<br />";
    echo "<input type=\"checkbox\" name=\"cat_{$cat['id']}_sub[]\" value=\"something\" /> option 2<br />";
    echo "<input type=\"checkbox\" name=\"cat_{$cat['id']}_sub[]\" value=\"something\" /> option 3<br />";
    echo "<input type=\"checkbox\" name=\"cat_{$cat['id']}_sub[]\" value=\"something\" /> option 4<br />";
    // name of checkbox if id=1: "cat_1_sub[]"

} // foreach

<input class="button-primary" name="submit_preview" value="Submit Selected Tees" type="submit">
</form> 
```

提交后：

```
if (isset($_POST['submit_preview'])) {

    foreach ( $_POST as $name => $value) {

        if (substr($name,0,4)=='cat_') echo "$name: $value <br />";

    } // foreach
} // if isset 
```

# r - 按年份将数据汇总为每月计数

> ID：15181147
> 
> 赞同：5
> 
> 时间：2013-03-03T00:37:12.513
> 
> 标签：r, ggplot2, time-series, summarization

我不习惯在 R 中处理时间序列数据，对此我有点坚持。我有一个事件引用的数据框和事件记录的数据。数据运行时间为 7 年，并希望将其汇总为 7 年期间每月的事件数，并使用 ggplot2 绘制。

我似乎无法让日期转换一起工作，所以我最终得到了一个计数和一个可以提供给 ggplot2`scale_x_date()`函数的日期

以下是数据示例：

```
df <- structure(list(Ref = structure(c(127L, 33L, 232L, 392L, 490L, 
242L, 437L, 346L, 443L, 560L, 598L, 568L, 103L, 262L, 463L, 17L, 
114L, 276L, 361L, 422L), .Label = c("01090013", "0109005", "0109006", 
"0109007", "0109009", "0109010", "0109011", "0109012", "0109014", 
"0109016", "0109022", "0110001", "0110004", "0110007", "0110009", 
"0110011", "0111001", "0111002", "0111012", "0111016", "0111017", 
"0112001", "0112003", "0112008", "0112010", "015004", "015006", 
"015008", "015010", "015013", "016002", "016003", "016004", "016005", 
"016006", "016008", "016009", "016010", "016011", "016013", "016014", 
"016016", "017001", "018001", "018004", "018005", "018007", "018008", 
"018009", "020626", "0209024", "0209025", "0209026", "0209027", 
"0209029", "0209031", "0209035", "0209037", "02100020", "0210017", 
"0210018", "0210023", "0210026", "0210030", "0211018", "0211019", 
"0211020", "0211022", "0211024", "0211025", "0211026", "0212018", 
"0212021", "0212025", "0212027", "025018", "025021", "025022", 
"025023", "025024", "025025", "025026", "025030", "026019", "026020", 
"026021", "026023", "026025", "026027", "026030", "026032", "0270010", 
"027010", "027012", "027013", "027014", "027016", "027017", "0309038", 
"0309039", "0309041", "0309046", "0309050", "0309052", "0309053", 
"0310035", "0310037", "0310041", "0310043", "0310044", "0311028", 
"0311032", "0311035", "0311038", "0312031", "0312036", "0312037", 
"0312043", "0312045", "0312047", "0312056", "0312058", "0312059", 
"0312062", "035033", "035034", "035036", "035037", "035038", 
"035040", "035041", "035042", "035043", "035045", "035049", "036036", 
"036038", "036039", "036041", "036042", "036044", "036045", "036046", 
"036047", "036048", "036050", "036051", "037021", "037026", "037029", 
"038026", "038032", "038034", "038035", "038036", "0409056", 
"0409057", "0409062", "0410046", "0410049", "0410050", "0410051", 
"0410054", "0410055", "0410056", "0410057", "0410058", "0410060", 
"0410062", "0410064", "0411047", "0411051", "0411052", "0411055", 
"0412070", "0412074", "0412075", "0412076", "045054", "045056", 
"045058", "045063", "045064", "045065", "045072", "046054", "046055", 
"046058", "046060", "047035", "047036", "047037", "047038", "047041", 
"047042", "047044", "047045", "047046", "048040", "048043", "048044", 
"048045", "048048", "048050", "048051", "0509073", "0509080", 
"0510066", "0510067", "0510082", "0511062", "0511065", "0511068", 
"0511069", "0511072", "0512084", "0512088", "0512089", "0512091", 
"055073", "055075", "055080", "055086", "055089", "055091", "055093", 
"055094", "055095", "056064", "056066", "056067", "056068", "056070", 
"056071", "056073", "056074", "057049", "057052", "057053", "057054", 
"057058", "057059", "057060", "057061", "057063", "057065", "057066", 
"057067", "057068", "057069", "058053", "058055", "058056", "058059", 
"058062", "058064", "0609082", "0609086", "0609088", "0609089", 
"0609090", "0609093", "0609095", "0609096", "0609097", "0609098", 
"0609103", "0610086", "0610089", "0610095", "0610096", "0610098", 
"0611073", "0611074", "0611080", "0611081", "0612109", "0612115", 
"065096", "065099", "065103", "065105", "065106", "065109", "065114", 
"066075", "066076", "066077", "066078", "066081", "066083", "067080", 
"067081", "067084", "068065", "068070", "068074", "0709106", 
"0709108", "0709113", "0709115", "0709116", "0709117", "0709120", 
"0710104", "0710105", "0710107", "0710108", "0710110", "0710115", 
"0710116", "0710117", "0710123", "0711083", "0711084", "0711085", 
"0711086", "0711087", "0711088", "0711092", "0712122", "0712126", 
"0712127", "0712128", "0712129", "075118", "075119", "075123", 
"075124", "075125", "075126", "075127", "075130", "075132", "075133", 
"076084", "076087", "076088", "076090", "076092", "076093", "076094", 
"077103", "077105", "078079", "078080", "078081", "078082", "078085", 
"078086", "0809126", "0809134", "0809137", "0809141", "0809143", 
"0810125", "0810137", "0811099", "0811101", "0811106", "0811108", 
"0811112", "0811113", "0811114", "0812142", "0812145", "0812150", 
"0812152", "0814143", "085139", "085143", "085145", "085148", 
"085149", "085150", "085154", "085156", "085160", "085163", "086098", 
"086099", "086100", "086101", "086102", "086104", "086107", "086108", 
"086109", "086110", "086111", "086112", "086114", "086115", "087106", 
"087107", "087109", "087112", "088094", "088096", "088097", "088098", 
"0909145", "0909155", "0909158", "0910145", "0910146", "0910147", 
"0910149", "0910150", "0910153", "0910154", "0911116", "0911117", 
"0911120", "0911121", "0911122", "0911123", "0911124", "0911130", 
"0911131", "0912161", "0912163", "0912168", "0912171", "0912172", 
"095166", "095167", "095170", "095171", "095172", "095178", "095180", 
"096116", "096117", "096121", "097120", "097124", "097125", "097126", 
"097132", "097133", "097136", "098110", "098115", "098116", "098119", 
"100006825", "100006830", "1009160", "1009161", "1009162", "1009164", 
"1009165", "1009166", "1009169", "1009170", "1009172", "1009173", 
"1009174", "1010160", "1010162", "1010163", "1010164", "1010166", 
"1010168", "1011133-A", "1011134", "1011140", "1011142", "1012179", 
"1012184", "1012185", "1012194", "105185", "105186", "105187", 
"105188", "105189", "105191", "105192", "105196", "105197", "105198", 
"105199", "105201", "105202", "105207", "105208", "105211", "106127", 
"106130", "106131", "107138", "107140", "107143", "107147", "107148", 
"107149", "107153", "107155", "107156", "108122", "108123", "108127", 
"108129", "108130", "108131", "108132", "108134", "108135", "108136", 
"1109175", "1109176", "1109180", "1109182", "1110173", "1110176", 
"1110177", "1110178", "1110185", "1110186", "1111145", "1111150", 
"1111151", "1112196", "1112197", "1112201", "1112202", "1112206", 
"1112208", "1112209", "1112212", "1112218", "1112220", "1112223", 
"1112225", "1112226", "1112227", "115215", "115216", "115217", 
"115218", "115219", "115223", "115225", "115226", "116139", "116143", 
"116144", "116145", "117161", "117162", "117164", "117165", "117168", 
"117175", "117180", "118139", "118140", "118143", "118147", "118148", 
"118150", "118152", "118154", "118157", "118160", "118161", "1209188", 
"1209189", "1209191", "1209193", "1209199", "1210191", "1210193", 
"1211157", "1211158", "1211168", "1211169", "1211170", "1211171", 
"1211173", "1212233", "1212235", "1212240", "125231", "125238", 
"125241", "126147", "126149", "127182", "127183", "127186", "127187", 
"127192", "127194", "128165", "128168", "128169", "128171", "128172", 
"128175", "128176", "128177", "128182", "128183", "128184", "128186", 
"128189", "128193"), class = "factor"), Date = structure(c(12846, 
13154, 13284, 13391, 13434, 13655, 13766, 14067, 14119, 14183, 
14209, 14211, 14322, 14412, 14897, 14960, 15049, 15155, 15201, 
15597), class = "Date")), .Names = c("Ref", "Date"), row.names = c(NA, 
-20L), class = "data.frame") 
```

这真让我抓狂！

谢谢H

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T00:47:43.763

我相信你正在寻找这个：

```
df <- transform(df, month = format(Date,"%m"), year = format(Date, "%Y"))

counts <- ddply(df,.(month,year),nrow) 
```

然后绘制日期：

```
# make a new monthly date
counts <- transform(counts, new_date = as.Date(paste(year,month,'01',sep="-")))

# now plot
ggplot(counts,aes(x=new_date,y=V1)) + geom_point() + scale_x_date() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T01:20:15.060

`xts`包对于时间序列操作非常方便。

首先我创建 xts 对象：

```
 library(xts)
 dat.xts <- xts(df$Ref,order.by=as.POSIXct(df$Date)) 
```

然后我用来`apply.monthly`按天计算，并将其绘制为`xts`对象

```
count.month <- apply.monthly(dat.xts,FUN=length)
plot(count.month, type='b') 
```

![在此处输入图像描述](../Images/5dcf287c259eb7006df17c019b1d8894.png)

如果要使用`ggplot2`，可以将结果转换为 data.frame。

```
as.data.frame(count.month) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T00:58:10.430

Another option:

```
data$Month <-  format(as.POSIXct(data$Date), "%Y-%m")
by.month.count <- data.frame(with(data, table(Month))) 
```

# php - 为什么在我的就地快速排序算法中出现未定义的索引错误？

> ID：15181149
> 
> 赞同：0
> 
> 时间：2013-03-03T00:37:33.903
> 
> 标签：php, algorithm

```
<?php

$arr = array('1', '-1', '3', '-2');

function inPlaceQuicksort($arr){
    inPlaceQuickSortProcessing($arr, 0, count($arr));
    return $arr;
}

function inPlaceQuickSortProcessing(&$arr, $pivotIndex, $arraySize){

    if($pivotIndex + 1>= $arraySize)
        return;
    else{
        for($i = $pivotIndex + 1; $i++; $i<$arraySize){

            if($arr[$i] < $arr[$pivotIndex]){
                $temp = $arr[$i];
                unset($arr[$i]);
                array_values($arr);
                array_splice($arr, $pivotIndex, 0, $temp);
                $pivotIndex++;
            }
        }                
    }
    //inPlaceQuickSortProcessing($arr, 0, $pivotIndex+1);
    //inPlaceQuickSortProcessing($arr, $pivotIndex+1, $arraySize);            
}

inPlaceQuicksort($arr);

?> 
```

for 循环中的最后一个表达式是否确定`$i<$arraySize`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T00:40:10.000

```
for($i = $pivotIndex + 1; $i++; $i<$arraySize){ 
```

应该

```
for($i = $pivotIndex + 1; $i<$arraySize; $i++){ 
```

# jquery - jQuery Roundabout CSS 在 Wordpress 中的位置问题

> ID：15181158
> 
> 赞同：1
> 
> 时间：2013-03-03T00:38:39.730
> 
> 标签：jquery, css, position

我已将 [Roundabout][1] 加载到 Wordpress 安装中。目标是拥有它，这样我就可以像旋转木马一样翻阅帖子。从功能上讲，一切都很顺利。然而，我在定位方面遇到了一些真正的麻烦。

Roundabout 似乎将 position:absolute 应用于子元素，以使其在轮播中定位它们的工作更容易。这一切都很好，除了我遇到了绝对定位的经典问题，将元素从页面流中拉出来，最后我的主体高度很短，元素漂浮在它上面和外面。

我已经尝试在父链上设置几个层来定位：相对无济于事。老实说，我没有想法。

我在本地工作，否则我会提供一个实时示例的链接。如果归结为需要它，我会将项目移动到一个实时示例中。

感谢大家

我的回旋处代码：

```
$(document).ready(function() {
                $('#main').roundabout({
                    childSelector:".post",
                    enableDrag: true,
                    autoplay: false,
                    duration: 1000,
                    clickToFocus: true,
                    shape: "square",
                    debug: false
                });
             }); 
```

我的基本 HTML 结构：

```
 <div id="content">
    <div id="inner-content">
        <div id="main">
            <article class="post">
                Wordpress Content
            </article>
            <article class="post">
                Wordpress Content
            </article>
            <article class="post">
                Wordpress Content
            </article>
        </div>
    </div>
</div> 
```

适当的 CSS：

```
#content {
  margin-top: 1.5em;
}
#content #inner-content {
  background-color: #FFFFFF;
  padding: 0 20px;
  position: relative;
}
#content #inner-content #main {
  margin: 25px auto;
  width: 85%;
}
#content #inner-content #main .roundabout-holder {
  list-style: none;
  padding: 0;
  margin: 0;
  height: 5em;
  width: 100%;
}
#content #inner-content #main .roundabout-moveable-item {
  height: 4em;
  width: 85%;
  cursor: pointer;
  background-color: #ccc;
  border: 1px solid #999;
  margin: 20px 0;
}
#content #inner-content #main .roundabout-in-focus {
  cursor: auto;
} 
```

为什么不提供一个很好的屏幕截图呢？ ![](../Images/d5c6b2f55a1a552ccda1092e645aa6a0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:00:04.960

您将高度`#content #inner-content #main`设置为 5em；使用 min-height 设置它，并使该值成为轮播在 body 框架中显示所需的最小值。内容应该使它从那里成长。

一些轮播还需要一些偏移填充以适应前进、后退和帧控制。仔细检查文档是否有类似的东西

```
#content #inner-content #main {
  min-height: 500px; /* or whatever value is required */
} 
```

编辑 3/3/13：

我正在为您添加一个指向Roundabout[标准实现的链接。](http://fredhq.com/projects/roundabout/demos/standard)看看 HTML 与你在做什么。他的插件是列表驱动`<li>`的，这也是你应该使用的。之后你可能需要稍微调整一下 CSS，但没什么大不了的。请记住，如果您使用某人的插件，则需要像他们为您提供的示例一样对其进行设置。如果您从那时起遇到问题，那么解决起来会容易得多。

```
<ul>
    <li>
        <article class="post">
        Wordpress Content
        </article>
    </li>
    <li>
        <article class="post">
        Wordpress Content
        </article>
    </li>
    <li>
        <article class="post">
        Wordpress Content
        </article>
    </li>
</ul> 
```

# wpf - Visual 如何将其绘图对象列表传递给渲染系统？

> ID：15181159
> 
> 赞同：-1
> 
> 时间：2013-03-03T00:38:48.900
> 
> 标签：wpf

我试图弄清楚 WPF 渲染系统是如何工作的，现在我被困了好几天的问题：

Visual 如何将它的绘图对象列表传递给渲染系统？

我没有看到 Visual 的成员为此目的服务。

简而言之，我必须在以下方面实施：

```
public class MyVisual : Visual
{
   // ???
} 
```

以便

```
DrawingGroup dg = VisualTreeHelper.GetDrawing( new MyVisual() ); 
```

变为非空（有效的 DrawingGroup 对象）？

**编辑（2013 年 3 月 14 日）：**

**我希望对于任何了解 WPF 的人来说，这个问题都应该很容易回答，但看起来并非如此。**

**一个多星期前我问了这个问题，尽管周围有这么多 WPF 专家，但这个关于 WPF 架构的非常具体、具体和基本的问题仍未得到解答。那些回答了这么多“上层”问题的 WPF 专家中没有一个人实际上不知道 WPF 在它的基础级别上是如何工作的吗？**

**实际上，我的问题实际上是：有没有真正的 WPF 专家，或者它是否如此神秘以至于超出了人类的理解？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:30:59.907

为了`DrawingGroup dg = VisualTreeHelper.GetDrawing( new MyVisual() );`工作，您需要覆盖`Visual.GetDrawing`. 但是，这是一种`internal virtual`方法，因此您不能覆盖它。

我不认为直接派生`Visual`是受支持的方案。您应该从`UIElement`其他派生类之一派生或使用（通过组合或继承）`Visual`，例如`DrawingVisual`（公开一个公共`RenderOpen`方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T21:47:31.667

正如布拉德利所提到的，你应该从而`DrawingVisual`不是`Visual`为了完成这项工作。

* * *

你倒着做。在`Visual`您将某些内容渲染到其中之前，它是空的。那东西可以是空的`DrawingGroup`...

得到一个`DrawingGroup`对应a的内容`Visual`

```
DrawingGroup dg = new DrawingGroup();
using (DrawingContext myContext = myVisual.RenderOpen())
    myContext.DrawDrawing(dg); 
```

之间发生的所有事情`RenderOpen`和处置`DrawingContext`都进入一个`DrawingGroup`内部`Visual`存储的内部。

之后，

```
VisualTreeHelper.GetDrawing( myVisual ) 
```

将是一个非空值`DrawingGroup`（我没有检查它是上面创建的那个，还是 WPF 创建`DrawingGroup`的，里面有一个项目，上面创建的那个）。

如果你想工作，你只需要在的构造函数`VisualTreeHelper.GetDrawing( new MyVisual() )`中执行上述内容：`MyVisual`

```
MyVisual()
{
    using (DrawingContext myContext = RenderOpen())
        myContext.DrawDrawing(new DrawingGroup());
} 
```

到此为止，使用的内部数据结构`GetDrawing`已正确设置。无需覆盖它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T16:05:13.423

[对 Phil 的回答：这很好，只是 Visual 没有方法 OnRender。您实际上是在谈论 UIElement。]

如果有人能确认 MSDN 中的这条线是不正确的，我会很满意：

“Visual 对象提供以下支持：[除其他外] - 输出显示：呈现视觉对象的持久化、序列化绘图内容......”。

由于 UIElement、ContainerVisual 或 Viewport3DVisual 都有不同的绘图内容传递机制，那么这意味着 Visual 本身没有一个中心（多态的）绘图传递机制，但这些角色属于这三个预定义的类（换句话说，您不能创建不是从这三个类之一派生的新类型的 Visual，因为渲染系统将无法渲染它，因为它只知道如何处理这三个类，但不知道 Visual 本身）。

我对吗 ？

编辑：

**不。此结论不正确，因为它们仅基于 MICROSOFT 文档中提供的内容。视觉对象比文档中的内容更多。挖掘更多使用反射。**

# jquery - jQuery - 定位元素，显示它，然后动画它

> ID：15181163
> 
> 赞同：2
> 
> 时间：2013-03-03T00:39:05.153
> 
> 标签：jquery, jquery-animate

我试图定位一个隐藏的 div，然后显示它，然后用一些动画旋转它。

这是我到目前为止得到的，它似乎根本没有旋转它......

```
$(this).css({ 'left' : randomNum(offsetStartX, offsetEndX),
    'top' : randomNum(offsetStartY, offsetEndY) });
$(this).show("fast");
var cssObj = {
    msTransform: 'rotate(\'+ rotDegrees + \'deg)',
    '-moz-transform' : 'rotate(\'+ rotDegrees + \'deg)',
    '-webkit-transform' : 'rotate(\'+ rotDegrees + \'deg)',
    '-o-transform' : 'rotate(\'+ rotDegrees + \'deg)',
    'transform' : 'rotate(\'+ rotDegrees + \'deg)' };
$(this).animate(cssObj, "slow"); 
```

如果我将 CSS for`left`和`top`into 放置`var cssObj`，它会很好地旋转它。但是，我需要将其定位，然后设置为可见，然后使用动画进行旋转。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:11:57.480

检查[这个问题](https://stackoverflow.com/q/5462275/520779)，它是[接受的答案](https://stackoverflow.com/a/5463375/520779)。jQuery`animate`不能为非数字属性设置动画，这`rotate(...)`就是不支持使用 as 值的原因。但是您可以使用`step`（为任意值设置动画，并在每一步设置不同的旋转）。

```
$(this).show("fast",function() { 
    var element = $(this);
    var startDegree = 90;
    var endDegree = 0;
    $({ i:startDegree }).animate({ i: endDegree }, {
        step: function(now,fx) {
            var cssObj = {
                msTransform: 'rotate('+ now + 'deg)',
                '-moz-transform' : 'rotate('+ now + 'deg)',
                '-webkit-transform' : 'rotate('+ now + 'deg)',
                '-o-transform' : 'rotate('+ now + 'deg)',
                'transform' : 'rotate('+ now + 'deg)' };
            element.css(cssObj); 
        },
        duration:500
    },'linear');
}); 
```

请注意，我在回调中启动了旋转动画`show`- 所以它仅在元素完成显示后才开始旋转。

[这个小提琴](http://jsfiddle.net/mgibsonbr/ERRmd/1173/)是通过合并您的代码和其他问题的答案中提供的示例代码而创建的（并且还扩展为支持其他浏览器）。您需要对其进行调整，以便从源度数到目标度数进行旋转（使用变量`startDegree`和`endDegree`）。

# jquery - 不接受 Jquery .html() 中的变量

> ID：15181164
> 
> 赞同：3
> 
> 时间：2013-03-03T00:39:05.500
> 
> 标签：jquery

我有下面的代码，但我需要扩展它，所以我试图让它更精简。

```
success: function setData(data) {
            $("#price" + lastchar).html(data.price);
            $("#matricule" + lastchar).html(data.matricule);
            $("#tag" + lastchar).html(data.tag);
            $("#ins_yr1" + lastchar).html(data.ins_yr1);
            $("#Totalacq" + lastchar).html(data.Totalacq);
        } 
```

像这样：

```
success: function (data){
  var desc=[];
  desc = ["price","matricule","tag","ins_yr1","Totalacq"];
  for (var i=0;i<desc.length;i++){
    $( "#" + desc[i] + lastchar).html(data.desc[i]);
  }
} 
```

但这不起作用，因为它不接受 中的变量`desc[i]`，`.html()`至少不接受我试图这样做的格式。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:41:13.593

您的问题不在于`html`，而在于您尝试访问`data`属性的方式。但是您可以使用 获取/设置它们`[]`，就像数组索引一样：

```
data[desc[i]] 
```

换句话说，`data.price`等价于`data["price"]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T11:14:59.377

只是留下它作为将来使用的参考，我意识到我可以通过直接引用数组对象的键来使它更短。

```
success: function (data){

    var keys = Object.keys(data);
    for (var i=0;i<keys.length;i++){
        $( "#" + keys[i] + lastchar).html(data[keys[i]]);
    }
} 
```

# php - DOMPDF，给我带来一个错误

> ID：15181166
> 
> 赞同：2
> 
> 时间：2013-03-03T00:39:11.420
> 
> 标签：php, html, mysql, dompdf

这是我在 PdfHtml 类中的代码：

 **```
public function createTable($result){

    $html = "<html>
                    <body>
                        <table>
                            <th>
                                <td>Descripción</td>
                                <td>Artículo</td>
                                <td>Precio</td>
                            </th>
                        ";
    while($row = mysql_fetch_array($result)){
        $html .= "<tr>";
        $html .= "<td>".$row["producto"]."</td>";
        $html .= "<td>".$row["idProducto"]."</td>";
        $html .= "<td>".$row["precio"]."</td>";
        $html .= "</tr>";
    }

    $html .= "</table>
                </body>
                    </html>";

    return $html;
}
</i> 
```* 

我执行以下操作：

```
$pdfHtml = new PdfHTML();
$result = $pdfHtml->getProductosPorMarca($idMarca);
$html = $pdfHtml->createTable($result);

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->output(); 
```

 *并抛出这个：

```
Catchable fatal error: Argument 1 passed to DOMNode::appendChild() must be an instance of DOMNode, null given, called in /opt/lampp/htdocs/ONLINE/dompdf0.6/include/table_frame_decorator.cls.php on line 304 and defined in /opt/lampp/htdocs/ONLINE/dompdf0.6/include/frame.cls.php on line 726 
```

请帮助我，我没有发现我的错误在哪里！！！谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T03:37:52.493

您的 HTML 是问题的根源。您在 TH 元素中嵌套了一堆 TD 元素，但这无效。容器应该仍然是一个 TR 元素；单个单元格将是 TH 元素。如果你想要一个跨页重复的表头，你可以将表头行嵌套在 THEAD 元素中，将表体嵌套在 TBODY 元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T10:47:03.343

基本的<table>元素：

```
$html = "<html>
                    <body>
                        <table>
                            <tr>
                                <th>Descripción</th>
                                <th>Artículo</th>
                                <th>Precio</th>
                            </tr>
                        "; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-29T17:20:11.753

使用单引号 ( `' '`)，如下所示：

```
public function createTable($result){
  $html = '<html>
                <body>
                    <table>
                        <th>
                            <td>Descripción</td>
                            <td>Artículo</td>
                            <td>Precio</td>
                        </th>';

  while($row = mysql_fetch_array($result)){
    $html .= "<tr>";
    $html .= "<td>".$row["producto"]."</td>";
    $html .= "<td>".$row["idProducto"]."</td>";
    $html .= "<td>".$row["precio"]."</td>";
    $html .= "</tr>';
  }

  $html .= '</table>
            </body>
            </html>';

  return $html;
} 
```**

# ruby - 子类机架::油门

> ID：15181167
> 
> 赞同：0
> 
> 时间：2013-03-03T00:39:29.510
> 
> 标签：ruby, heroku, rubygems, rack, throttling

我正在阅读有关 Rack::Throttle 的信息，我想将默认客户端标识符从 IP 更改为其他内容。文档说可以做到

> 由 Rack::Throttle 存储和维护的限速计数器被锁定到唯一的 HTTP 客户端。
> 
> 默认情况下，HTTP 客户端由 Rack::Request#ip 返回的 IP 地址唯一标识。如果您希望改用更精细的、特定于应用程序的标识符（例如会话密钥或用户帐户名），则只需子类化一个限制策略实现并覆盖 #client_identifier 方法。

我不知道在哪里添加它，这是我当前的另一个方法的子类。有人知道怎么做这个吗？[https://github.com/datagraph/rack-throttle](https://github.com/datagraph/rack-throttle)

```
 module Rack
  module Throttle
    class DailyRequests < Daily
      def allowed?(request)
        ## Insert rules
        super request
      end
    end

    class HourlyRequests < Hourly
      def allowed?(request)
        ## Insert rules
        super request
      end
    end

    class RequestInterval < Interval
      def allowed?(request)
        ## Insert rules
        super request
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:19:29.617

You should subclass one of the existing [rack-throttle](https://github.com/datagraph/rack-throttle) classes (probably either `Rack::Throttle::Interval` or `Rack::Throttle::TimeWindow`, whichever one more closely aligns with your needs) and override the `#client_identifier` method.

`#client_identifier` is passed one argument, `request`, which is a [Rack::Request](http://rack.rubyforge.org/doc/classes/Rack/Request.html) instance containing information passed in the incoming HTTP request and can be used to get information such as HTTP headers, cookies, path, and possibly other info depending on your app. The default implementation looks [like this](http://rack.rubyforge.org/doc/classes/Rack/Request.html):

```
# @param  [Rack::Request] request
# @return [String]
def client_identifier(request)
  request.ip.to_s
end 
```

Here's an example of subclassing `Rack::Throttle::Interval` to match requests on a query parameter such as `?user_id=<id>`:

```
class UserThrottle < Rack::Throttle::Interval
  def client_identifier(request)
    request['user_id']
  end
end 
```

which you could `use` in a Rack application with:

```
use UserThrottle, :min => 100 
```

Notice you can still pass options like `:min` to the Rack `use` statement, since it is just subclassing the existing throttle classes. And adopting this in a Rails app would just involve calling `use` in your `application.rb` file (see [Rails on Rack](http://guides.rubyonrails.org/rails_on_rack.html#configuring-middleware-stack)).

# java - 多个 ImageButton OnClicklistener

> ID：15181169
> 
> 赞同：2
> 
> 时间：2013-03-03T00:39:48.083
> 
> 标签：java, android, onclicklistener, android-button

我对此很陌生，我真的在寻找答案。我知道这个问题会很简单，但我真的需要帮助。

我有多个`ImageButton`s，但不知道我如何为他们做出不同`OnClicklistener`的事情。

这是我的代码，我认为这里缺少一些东西。

```
 ImageButton facebookButton = (ImageButton) findViewById(R.id.imageButtonFacebook);
        ImageButton twitterButton = (ImageButton) findViewById(R.id.imageButtonTwitter);

        facebookButton.setOnClickListener(new View.OnClickListener() {
        twitterButton.setOnClickListener(new View.OnClickListener() {

            }
        })

}

            @Override
            public void onClick(View v) {
                switch(v.getId()){
                case R.id.imageButtonFacebook:
                    Intent fb = new Intent (MainActivity.this, FacebookActivity.class);
                    startActivity(fb);
                    break;

                case R.id.imageButtonTwitter:
                    Intent tw  = new Intent (MainActivity.this, TwitterActivity.class);
                    startActivity(tw);
                    break; 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T00:42:45.187

实施`View.OnClickListener`：

```
public class MyClass extends Activity implements OnClickListener {...} 
```

然后设置`OnClickListeners`如下：

```
facebookButton.setOnClickListener(this);
twitterButton.setOnClickListener(this); 
```

# sql - 将字段内容拆分为 2 个字段

> ID：15181173
> 
> 赞同：2
> 
> 时间：2013-03-03T00:40:27.877
> 
> 标签：sql, ms-access

我必须在 Access sql 中运行查询或使用查询向导将字段数据拆分为 2。

该字段具有诸如 的数据，`1234 ave willie`并具有诸如 的电子邮件地址`haha@yahoo.com`。

我需要`1234 ave willie`输入一个名为*St address*和*Email*`haha@yahoo.com`的新字段。

 *有人可以帮忙吗？有没有像`LIKE`etc这样的通配符运算符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:21:16.363

您应该考虑使用`LIKE`以确定哪个字段是电子邮件，哪个字段是地址。像这样的东西会起作用：

```
SELECT Field, 'Email' FieldType
FROM YourTable
WHERE Field Like '*@*'
UNION ALL
SELECT Field, 'Address' FieldType
FROM YourTable
WHERE Field Not Like '*@*' 
```

您提到您需要将这些拆分为 2 个单独的字段 - 取决于表结构。但是假设您在原始表中添加 2 个新字段，那么这样的事情应该可以工作：

```
UPDATE YourTable SET Email = Field WHERE Field Like '*@*'
UPDATE YourTable SET Address = Field WHERE Field Not Like '*@*' 
```

您可以找到更好的算法来通过电子邮件地址进行搜索——这只是一个示例。但是假设任何带有 @ 符号的字段都是电子邮件，那么上面的内容就可以正常工作。这是一个带有 SQL 电子邮件验证的 SO 帖子，可以帮助您入门：

[用于查找无效电子邮件地址的 Sql 脚本](https://stackoverflow.com/questions/801166/sql-script-to-find-invalid-email-addresses)*

# ckeditor - 如何在ckeditor中显示调色板

> ID：15181176
> 
> 赞同：1
> 
> 时间：2013-03-03T00:41:15.613
> 
> 标签：ckeditor, color-scheme, color-picker

请原谅这是非常基本的事情，但由于我是新手，找不到任何关于它的东西，所以我问。

我已经在我的 textarea 中集成了 ckeditor，但 ckeditor 没有显示调色板来更改字体颜色。如何在 ckeditor 选项中显示它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T21:20:44.243

您是否下载了[完整的 CKEditor 版本](http://ckeditor.com/demo#full)？

您正在寻找的是`colorbutton`插件。CKE 的基本/标准版本没有这个插件。

# html - 使用浏览器扩展标题

> ID：15181178
> 
> 赞同：0
> 
> 时间：2013-03-03T00:41:21.747
> 
> 标签：html, css, text, header

我在网站中有一个标题，无论浏览器大小如何，我都想填充网站的顶部。

```
h1 {
    font-family: 'Holtwood One SC';
    color: #1C003A;
    font-size: 4em;
}
#header {   
    float:left;
    text-align:center;
    width: 95%;
    margin: 0px 20px 0px 20px;
}

<div id="header"><a href="index.html"><h1>Spilling the Beans</h1></a></div> 
```

这是 CSS 和 HTML。标题的 div 就在正文中。我不知道要输入什么来使浏览器扩展和收缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:02:53.170

好吧，如果您只是删除`float:left`and `width:95%`，那么它将自动占据浏览器的整个宽度，因为这是默认设置。

但是，如果您实际上是在谈论使文本大小本身根据浏览器大小变得越来越大，您可以尝试使用 Viewport Units：

```
h1 {
    font-size:4em;
    font-size:5vw;
} 
```

将第一个单元放在 、 或其他常用单元中非常重要`pt`，`px`这样`em`不支持视口单元的浏览器就可以依靠。至于视口单元，根据需要进行调整。您还可以使用`vh`而不是`vw`根据视口的高度而不是宽度来调整文本大小。

如果这也不是您的意思，请更具体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:03:36.553

您应该在页眉中设置页边距并`body`删除页眉`float``margin`

```
body{
    margin:0; padding:20px;
}
#header {   
    text-align:center;
    width: 100%;
    background:#ccc;
    margin:auto;
} 
```

见[http://jsfiddle.net/8dtqs/](http://jsfiddle.net/8dtqs/)

# java - Java 对象返回默认值

> ID：15181187
> 
> 赞同：-1
> 
> 时间：2013-03-03T00:42:21.933
> 
> 标签：java, sockets, serialization

我有以下代码结构。

Transaction 类型的事务处理程序，它是客户端处理程序类中的一个字段，它与服务器通信。（客户端处理程序和服务器并置），客户端通过序列化对象消息与客户端处理程序对话。

当一个新的事务请求来自客户端时，（使用对象输入流的 readObject() 方法进入线程），然后我执行一系列 trx_handler.setFoo(trx.getFoo))）。这很好用，我可以处理第一个请求。但是当后续请求进来时（由于循环结构，它仅在第一个请求完成后才开始执行，我发现 trx 处理程序已重新初始化为其默认值，对象仍然存在，但里面的所有值都是默认的。什么会导致这个问题？

我的第一个猜测是垃圾收集，但是在我的客户端处理程序类中，总是有一个指向这个 trx_handler 的指针。

下面的代码说明了会发生什么。语句首先是 start 类型，因此 trx_handler 将被正确初始化。然后将调用handle_statement。然后应该接收后续语句，但此时 trx_handler 已重新初始化为其默认设置，因此 access_set 字段为空，会话 ID 也是如此，并且对 hande_statement 中的对象所做的任何修改都不可见

谢谢

```
 public class Handler { 

  private Statement trx_handler; 

 /* Constructor initialises trx_handler to new Statement(); */

 public ClientHandler(final Socket socket, long uid, Server server, ObjectInputStream ois) throws           IOException, Exception {
 LOGGER.info("Constructing Handler");
 this.uid = uid;
 this.server = server;
 this.socket = socket;
 this.database = server.getDB();
 this.trx_sys = database.getTransactionManager();
 create_listening(socket, ois);
 out = socket.getOutputStream();
 oos = new ObjectOutputStream(out);
 this.trx_handler = new Statement(false); 
```

}

```
 private void create_incoming(final Socket socket, final ObjectInputStream stream) {
  Thread incoming = new Thread() {
  @Override
  public void run() {
    ObjectInputStream ois = stream;
    InputStream in = null;
    while (true) {
      Object statement = null;

      try {

        statement = ois.readObject();
        execute_stat(statement, socket, null);
        LOGGER.info("Ready to execute next "); 
      } catch (SocketException e) {
        LOGGER.severe("Connection Closed");
        return;
      } catch (IOException e) {
        LOGGER.severe("Connection Closed");
        return;
      } catch (ClassNotFoundException e) {
        e.printStackTrace();
      } catch (Exception e) {
        e.printStackTrace();
        String error_message = e.getMessage();
        send_error(socket, error_message);
      }

    }
  }
};
incoming.setDaemon(true);
incoming.start();

}

 private synchronized void execute_stat(Statement trx) {
  if (trx.getTransactionState() == Consts.trx_end) {
    trx_sys.commitTransaction(trx_handler);
    return;
  } else if (trx.getTransactionState() == Consts.trx_start) {
   try {
    trx_handler.setAccessSet(trx.getAccessSet());
    trx_handler.setSession_id(trx.getSession_id());
    trx_sys.startTransaction(trx_handler);
    handle_statement(socket, trx_handler);

    /* TEST HERE THAT FIELDS IN TRX_HANDLER ARE CORRECTLY SET (INCLUDING SOME MODIFIED IN       
    handle_statement and they are correctly set */

  return;
  } catch (Exception ex) {
    Logger.getLogger(ClientHandler.class.getName()).log(Level.SEVERE, null, ex);
  }
}
try {
  LOGGER.info("Execute Trx: stat");

  /* Can't see modifications made in the start case */ 
  Statement stats = trx.getStatement();
  trx_handler.setStatement(stats);
  handle_statement(stats, socket, trx_handler);

} catch (Exception e) {
  e.printStackTrace();

}

return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:13:04.577

您需要为每个交易发送一个全新的对象，使用`ObjectOutputStream.writeUnshared()`，或者`ObjectOutputStream.reset()`在发送之间调用。

# opengl - 在OpenGL中旋转的多个对象

> ID：15181196
> 
> 赞同：1
> 
> 时间：2013-03-03T00:43:24.243
> 
> 标签：opengl, rotation

我想在 OpenGL 2.0 中创建一个雪人。我想旋转整个形状，但每次运行程序时它都不起作用。

```
 glPushMatrix();

    //bottom sphere
    glTranslated(tranX,tranY-2,tranZ);
    glRotated(rotX,1,0,0);
    glRotated(rotY,0,1,0);
    glRotated(rotZ,0,0,1);
    glScaled(scaX,scaY,scaZ);

    glColor3f(1.1,.7,.99);
    glutSolidSphere(1.5,30,30);

    //middle sphere
    glTranslated(tranX,tranY+2.3,tranZ+8);
   glRotated(rotX,1,0,0);
    glRotated(rotY,0,1,0);
    glRotated(rotZ,0,0,1);
    glScaled(scaX,scaY,scaZ);

    glColor3f(1.1,.7,.99);
    glutSolidSphere(1.3,30,30);

    //top sphere
    glTranslated(tranX,tranY+2,tranZ+10);
    glRotated(rotX,1,0,0);
    glRotated(rotY,0,1,0);
    glRotated(rotZ,0,0,1);
    glScaled(scaX,scaY,scaZ);

    glColor3f(1.1,.7,.99);
    glutSolidSphere(1,30,30);
glPopMatrix(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:47:25.597

关于 OpenGL 变换需要了解的是它们会修改当前坐标系，而不是单个对象。例如，当您调用 时`glRotated`，它会围绕所提供的轴旋转坐标系提供的角度，并在调用它后影响您渲染的每一位几何图形，直到您更改或替换矩阵（通过调用`glPopMatrix`、`glLoadMatrix`等）。

在您的示例中，您旋转了雪人的每个球体，但没有影响场景中所有对象的总体旋转。尝试在调用后立即将要影响整个场景的旋转放在`glPushMatrix`例程的顶部。

# ruby-on-rails - Rails ActiveRecord 不尊重布尔默认值

> ID：15181202
> 
> 赞同：0
> 
> 时间：2013-03-03T00:44:42.583
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个带有`draft_record`布尔列的用户模型，其默认值为`true`. 创建记录时，它们是用`draft_record`:`false`而不是`true`. 这在该字段被称为草稿时起作用，但是草稿关联和草稿属性分配方法发生冲突，导致草稿属性无法设置。难道我做错了什么？我以前遇到过这个问题，只是通过恢复有效的方法来解决它。

红宝石：1.9.3-p327

Ruby on Rails：3.2.12

数据库管理系统：Postgres

相关迁移：

```
class AddDraftColumnToUsers < ActiveRecord::Migration
  def self.up
    add_column :users, :draft_record, :boolean, default: true
    add_column :users, :draft_id, :integer
    add_column :users, :current_id, :integer
  end

  def self.down
      ...
  end
end 
```

结果模式

```
ActiveRecord::Schema.define(:version => 20130303002123) do

  create_table "users", :force => true do |t|
    t.datetime "created_at",                     :null => false
    t.datetime "updated_at",                     :null => false
    t.string   "name"
    t.boolean  "draft_record", :default => true
    t.integer  "draft_id"
    t.integer  "current_id"
  end

end 
```

创建用户对象：

```
Loading development environment (Rails 3.2.12)
1.9.3-p327 :001 > u = User.create(name: "Jon")
   (0.0ms)  begin transaction
  SQL (28.8ms)  INSERT INTO "users" ("created_at", "current_id", "draft_id", "draft_record", "name", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["created_at", Sun, 03 Mar 2013 00:42:04 UTC +00:00], ["current_id", nil], ["draft_id", nil], ["draft_record", false], ["name", "Jon"], ["updated_at", Sun, 03 Mar 2013 00:42:04 UTC +00:00]]
   (0.7ms)  commit transaction
 => #<User id: 1, created_at: "2013-03-03 00:42:04", updated_at: "2013-03-03 00:42:04", name: "Jon", draft_record: false, draft_id: nil, current_id: nil> 
1.9.3-p327 :002 > 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:12:42.327

此问题是由`default_scope`条件散列设置为`draft_record: false`. 这会强制通过活动记录添加的任何记录设置`draft_record`为 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:54:21.530

默认值设置在数据库级别。所以插入查询不会生成默认值。检查插入的记录是否设置了正确的默认值。

# z3 - QF_FPA？Z3 是否支持 IEEE-754 算法？

> ID：15181211
> 
> 赞同：8
> 
> 时间：2013-03-03T00:46:20.333
> 
> 标签：z3

浏览 Z3 源代码时，我遇到了一堆引用 QF_FPA 的文件，它似乎代表无量词，浮点算术。但是，我似乎无法找到任何有关其状态的文档，或者如何通过各种前端（特别是 SMT-Lib2）使用它。这是 IEEE-754 FP 的编码吗？如果是这样，支持哪些精度/操作？任何文档都是最有帮助的..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-04T11:11:45.050

[是的，Z3 支持 Ruemmer 和 Wahl 在最近的 SMT-workshop论文](http://www.philipp.ruemmer.org/publications/smt-fpa.pdf)中提出的浮点运算。现阶段，没有官方的 FPA 理论，Z3 的支持很基础（只有一点点）。我们还没有积极宣传这一点，但它可以完全按照 Ruemmer/Wahl 的论文中的建议使用（设置逻辑 QF_FPA 和 QF_FPABV）。目前，我们正在为 FPA 制定新的决策程序，但需要一段时间才能实现。

以下是 FPA SMT2 公式的简要示例：

```
(set-logic QF_FPA)    

(declare-const x (_ FP 11 53))
(declare-const y (_ FP 11 53))
(declare-const r (_ FP 11 53))

(assert (and 
    (= x ((_ asFloat 11 53) roundTowardZero 0.5 0))
    (= y ((_ asFloat 11 53) roundTowardZero 0.5 0))
    (= r (+ roundTowardZero x y))
))

(check-sat) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-30T15:46:57.343

浮点逻辑在 v4.4.2 中被命名为 QF_FP 和 QF_FPBV。RELEASE_NOTES 中理论描述的链接已断开。正确的页面是[http://smtlib.cs.uiowa.edu/theories-FloatingPoint.shtml](http://smtlib.cs.uiowa.edu/theories-FloatingPoint.shtml)。上面建议的例子应该是

```
(set-logic QF_FP)

(declare-const x (_ FloatingPoint 11 53))
(declare-const y (_ FloatingPoint 11 53))
(declare-const r (_ FloatingPoint 11 53))

(assert (and 
    (= x (fp #b0 #b00000000010 #b0000000000000000000000000000000000000000000000000010))
    (= y (fp #b0 #b00000000010 #b0000000000000000000000000000000000000000000000000010))
    (= r (fp.add roundTowardZero x y))
))

(check-sat) 
```

# javascript - 如何仅为移动浏览器加载 jquery mobile，而为桌面加载常规站点？

> ID：15181214
> 
> 赞同：1
> 
> 时间：2013-03-03T00:47:13.707
> 
> 标签：javascript, jquery, jquery-mobile, mobile

所以我有一个现有的桌面 html 网站，但我创建了一个 jquery 移动版本。问题是我试图弄清楚如何只加载手机的 jquery 移动版本，但显示桌面的桌面版本。我在 jquery 移动文档上找不到任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T00:55:56.427

您基本上可以使用窗口宽度或通过在 CSS 媒体查询断点上触发它来处理 jquery。下面几个参考：

[使用 css 媒体查询触发 jquery](https://stackoverflow.com/questions/6461300/triggering-jquery-with-css-media-queries)

[http://www.venveo.com/articles/view/quick-tip-jquery-media-queries](http://www.venveo.com/articles/view/quick-tip-jquery-media-queries)

然而，我现在确信让它响应的后果......一旦 jquery mobile 启动，所有的赌注都被取消了。

您最好在浏览器检测而不是屏幕断点上调用 jquery mobile。

# java - HashMap 迭代/删除

> ID：15181218
> 
> 赞同：0
> 
> 时间：2013-03-03T00:48:05.430
> 
> 标签：java, list, iterator, hashmap

我正在尝试处理大量数据，但我有点坚持处理最终计算的最佳方式。

我有一个哈希图。每个 Book 对象都有一个名为 COUNT 的数据值，它保存该书在我的特定上下文中出现的次数。我想遍历整个 HashMap 并在一个数组中记录前十名最常出现的书籍。同时，我也想把那十本书从HashMap中去掉。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:56:55.103

我会使用比较计数的比较器将地图复制到一个 SortedMap 中，例如 TreeMap。

其余的应该是显而易见的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T00:57:05.937

有一种锦标赛算法在 O(n) 时间内运行，可用于大数据，

[从长度为 N 的数组返回前 k 个值的最佳算法](https://stackoverflow.com/questions/4956593/optimal-algorithm-for-returning-top-k-values-from-an-array-of-length-n)

如果数据不是很大，那么我建议使用 Collections.sort 并从您的地图创建一个子列表。

另一种选择是将它们保留在 TreeMap 中并在您的 Book Object 中实现 Comparable ，这样您的 Map 始终是排序的。如果您不想在每次更改对象时对它们进行排序，那么这在您对 Map 进行添加时特别有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T00:57:26.120

是的，您不能使用`for`循环删除，因为像这样

```
for(Book curBook: yourMap.values()) 
```

你会得到一个`ConcurrentModificationException`. 要在迭代时删除元素，您必须使用迭代器，例如：

```
HashMap<Book> yourMap;

Collection<Book> entries = yourMap.values();
Iterator<Book> iterator = entries.iterator();
while(iterator.hasNext()) {
    Book curBook = iterator.next();
    if (yourConditionToRemove) {
        iterator.remove();
    }
} 
```

如果这是一个频繁的操作，请考虑使用 Bohemian 建议的 TreeMap 或至少保留一个单独的 Map 与大多数阅读书籍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T01:01:53.187

我对Java不是很精通，但我可以考虑以下算法。假设 HashMap 根据它们的唯一标识符存储书籍（即它没有给你关于 的排序提示`COUNT`）。你可以：

1.  定义一个容量为 10 本书的序列，它们将按 顺序存储在其中`COUNT`。为了清楚起见，我将这个序列称为`O10S`（有序 10 元素序列）
2.  遍历您的哈希图。`e`对于中的每个元素`HashMap`：
    *   如果未满，`O10S`则插入`e``O10S`
    *   否则，如果`e`有一个`COUNT`高于最小值`o`的元素（应该很容易识别，因为它是有序的）：remove from , insert in`O10S``COUNT``O10S``o``O10S``e``O10S`
3.  对于每个`o`in `O10S`，`o`从`HashMap`

该算法相对于其中的元素是线性的`HashMap`（您只需要遍历`HashMap`一次）

# jquery - 创建自定义 Flexslider 导航箭头的问题

> ID：15181220
> 
> 赞同：4
> 
> 时间：2013-03-03T00:49:20.033
> 
> 标签：jquery, navigation, controls, flexslider

我正在使用 Flexslider v2.0 并尝试创建自己的自定义导航箭头，该箭头将直接位于幻灯片下方。

根据我一直在阅读的内容，我必须创建自己的滑块导航并使用 Flexslider“controlsContainer”和“manualControls”控件。

到目前为止，我只实现了使新的自定义箭头仅向前导航 1 步或向后导航 1 步。我无法让它像内置的导航箭头那样导航。

这是代码：

**CSS**

```
.flex-direction-nav2 {  }
.flex-direction-nav2 a {width:30px; height:30px; margin:-20px 0 0; display:block; background:url(../images/flexslider/bg_direction_nav.png) no-repeat 0 0; z-index:10; cursor:pointer; text-indent:-9999px; -webkit-transition:all .3s ease }
.flex-direction-nav2 .flex-next {  display:inline-block;background:url(../images/shortcodes/testimonials/arrow-right-01.png) no-repeat 50%; background-color:#000; right:-1px; z-index:6}
.flex-direction-nav2 .flex-prev {  display:inline-block;background:url(../images/shortcodes/testimonials/arrow-left-01.png) no-repeat 50%; background-color:#fff; right:25px; -webkit-box-shadow:3px 0 0 0 #fff; box-shadow:3px 0 0 0px #fff; z-index:5} 
```

**HTML**

```
<div class="testimonial-container clearfix">
  <div class="title">
    <h3><span>What Client’s Say</span></h3>
  </div>
  <div class="testimonials clearfix">
    <ul class="slides">
      <li>
        <div class="testimonials-content">CONTENT</div>
      </li>
      <li>
        <div class="testimonials-content">CONTENT</div>
      </li>
      <li>
        <div class="testimonials-content">CONTENT</div>
      </li>
    </ul>
  </div>
  <ul class="flex-direction-nav2">
    <li><a href="#" class="flex-prev">Prev</a></li>
    <li><a href="#" class="flex-next">Next</a></li>
  </ul>
</div> 
```

**jQuery**

```
/* Testimonial Slider */
$('.testimonials').flexslider({
    animation: "slide",
    directionNav: true,
    controlNav: true,
    animationLoop: true,
    pauseOnAction: true,
    pauseOnHover: true,
    nextText: "Next",
    prevText: "Previous",
    controlsContainer: ".testimonial-container",
    manualControls: ".flex-direction-nav2 li a"
}); 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:10:50.587

如果要自定义控件，则无需在源中手动添加控件。如果您将“controlsContainer”更改为“.testimonials”，它将在该容器内紧跟幻灯片列表创建“ul”。然后，您可以根据需要设置样式。我们在 ND.edu 和位于滑块下方的其他网站（例如 provost.nd.edu 和 dailydomer.nd.edu）上有自定义样式的箭头。为了完成你所追求的，你可能需要在“.testimonials”周围包裹一个额外的 div 并将你的 controlsContainer 设置为那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-04T08:50:11.413

或者您可以尝试触发[此处解释的导航行为](https://stackoverflow.com/a/23513844)

（或者你可以切换到[光滑](http://kenwheeler.github.io/slick/)的:)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T15:13:35.740

flexslider 在他们的 JS 插件中生成导航控件并使用他们样式表中的 css。在恕我直言，您需要覆盖样式表并更改插件以使用您定义的导航控件。我已经使用 flexslider 2 在 sharepoint 旋转横幅中完成了此操作。你可以看看[https://logicalforhad.wordpress.com/2014/11/18/sharepoint-rotating-banner-with-custom-pagination-control-using-font-awesome/](https://logicalforhad.wordpress.com/2014/11/18/sharepoint-rotating-banner-with-custom-pagination-control-using-font-awesome/) 这里解释清楚。

# android - 像 WunderList 应用程序一样在面板中右滑

> ID：15181221
> 
> 赞同：1
> 
> 时间：2013-03-03T00:49:27.580
> 
> 标签：android

我想看看是否有人知道 WunderList 是如何做到的？见图片：

![在此处输入图像描述](../Images/b3e00f7c75c71301a0865a8b7565a17f.png)

基本上，如果您单击添加的任何列表项，此抽屉会弹出以显示项目详细信息。在这种情况下，我随机添加了一个项目，显然名为“Rgh”。点击它，它从右侧滑出。你可以滑动它，它会回到它的来源。

我以为它是一个`SliderMenu`图书馆，也许像 jfeinstein10 的那样，但 Wunderlist 左侧已经有了一个滑块。右边（图片中）的行为完全不同。它更大，而不是推送内容，它只是越过之前的 Activity（或 Fragment？）。而且它无法通过滑动打开（仅关闭）。我知道 jfeinstien 的，你不能做任何事情 - Right 和 LEft 是非常相似的（除非你 sublcass 它）。

我知道有一种叫做 SlidingDrawer 的东西，但我几乎看不到它被使用了，可能是它吗？实现这一点的最首选方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T04:01:58.677

线性布局加动画。我在我的应用程序中做了类似的事情。
甚至不使用片段。使用动画类，代码在这里：

```
/*
This class is responsible for showing the sliding animation
*/
public class SlideAnim extends Animation {
    int targetWidth;
    View slideView;
    ImageView imageView;
    boolean close;

    public SlideAnim(View _v, boolean _close, int _maxWidth, ImageView imageView) {
        this.slideView = _v;
        this.imageView = imageView;
        targetWidth = _maxWidth;
        close = _close;
    }

    protected void applyTransformation(float interpolatedTime, Transformation t) {
        int newWidth;
        if (!close) {
            newWidth = (int) (targetWidth * interpolatedTime);
        } else {
            newWidth = (int) (targetWidth * (1 - interpolatedTime));
        }
        slideView.getLayoutParams().width = newWidth;
        slideView.requestLayout();
        imageView.setImageResource(slideView.getWidth() > 0 ? R.drawable.purple_arrow_right : R.drawable.purple_arrow_left);
    }

    public void initalize(int width, int height, int parentWidth, int parentHeight) {
        super.initialize(width, height, parentWidth, parentHeight);
    }

    public boolean willChangeBounds() {
        return true;
    }
} 
```

这是我从另一个 Activity 调用动画的方式：

```
SlideAnim slideAnim = new SlideAnim(trendingListLayout, false, maxListWidth, imageView);
slideAnim.setDuration(500);
slideAnim.reset();
trendingListLayout.clearAnimation();
trendingListLayout.startAnimation(slideAnim); 
```

我正在为 LinearLayout 设置动画：

```
<?xml version="1.0" encoding="utf-8"?>
<merge xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/top_container"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.eazyigz.views.EazyigzImageView
        android:id="@+id/whole_screen"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center"
        android:scaleType="centerCrop" />
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <View
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="1" />

        <LinearLayout
            android:id="@+id/explore_expander"
            android:layout_width="30dp"
            android:layout_height="fill_parent"
            android:background="@color/eazyigz_bg_primary"
            android:orientation="horizontal"
            android:visibility="invisible" >

            <ImageView
                android:id="@+id/explore_expander_icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:src="@drawable/purple_arrow_left" />
        </LinearLayout>

        <!-- List Layout -->
        <LinearLayout
            android:id="@+id/explore_list_layout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="1"
            android:paddingTop="50dp"
            android:background="@color/eazyigz_bg_secondary"
            android:orientation="vertical"
            android:visibility="invisible" >

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="10dp"
                android:layout_marginLeft="15dp"
                android:layout_marginRight="0dp"
                android:layout_marginTop="10dp"
                android:gravity="center_horizontal|center_vertical"
                android:singleLine="true"
                android:ellipsize="marquee"
                android:focusable="true"
                android:fadingEdge="horizontal"
                android:marqueeRepeatLimit ="marquee_forever"
                android:scrollHorizontally="true"
                android:text="@string/top_trending"
                android:textColor="@color/eazyigz_green"
                android:textSize="30sp" />

            <ProgressBar
                android:id="@+id/explore_spinner"
                android:layout_width="50dp"
                android:layout_height="45dp"
                android:layout_marginRight="10dp"
                android:layout_marginTop="10dp"
                android:indeterminateDrawable="@drawable/progress_spinner"
                android:visibility="visible"
                android:layout_gravity="center_horizontal|center_vertical"/>
            <ListView
                android:id="@+id/explore_list"
                style="@style/EazyigzListView"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:cacheColorHint="#00000000"
                android:divider="#0000"
                android:layout_marginLeft="10dp" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:paddingBottom="50dp"
        android:paddingLeft="20dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" />

        <Button
            android:id="@+id/eazyigz_play"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:background="@drawable/eazyigz_button"
            android:drawablePadding="0dp"
            android:gravity="left|center_vertical"
            android:padding="5dp"
            android:text="@string/playing"
            android:textColor="@color/eazyigz_white"
            android:textSize="36sp"
            android:visibility="gone"/>

        <Button
            android:id="@+id/eazyigz_create"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:background="@drawable/eazyigz_button"
            android:drawablePadding="0dp"
            android:gravity="left|center_vertical"
            android:padding="5dp"
            android:text="@string/create"
            android:textColor="@color/eazyigz_white"
            android:textSize="36sp" />

        <Button
            android:id="@+id/eazyigz_explore"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="20dp"
            android:background="@drawable/eazyigz_button"
            android:drawablePadding="0dp"
            android:gravity="left|center_vertical"
            android:padding="5dp"
            android:text="@string/explore"
            android:textColor="@color/eazyigz_white"
            android:textSize="36sp" />

        <Button
            android:id="@+id/eazyigz_listen"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/eazyigz_button"
            android:drawablePadding="0dp"
            android:gravity="left|center_vertical"
            android:paddingBottom="5dp"
            android:paddingLeft="5dp"
            android:paddingRight="50dp"
            android:paddingTop="5dp"
            android:text="@string/stations"
            android:textColor="@color/eazyigz_white"
            android:textSize="36sp" />

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:orientation="vertical" />
    </LinearLayout>

</merge> 
```

explore_list_layout**是**动画。

查看屏幕外观的视频：[滑动动画](https://www.youtube.com/watch?v=6HmXra5Q3zM)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-04T10:00:37.623

你好踢莴苣

嗨伊戈尔

我们需要一个来自右侧的面板，位于应用程序的其余部分之上，我们希望它是“可滑动的”，包括基本的“最近点”打开或关闭以及加速度跟踪，以决定在滑动时该怎么做完成了一半。

我们最初尝试使用 Android 的 SlidingDrawer，但首先它被弃用，然后只能从侧面的一个旋钮滑动 + 它不太完美的性能让我们考虑做其他事情。

我们将其称为 SlidingLayer，我们很快计划将其开源。我们只是想确保添加一对调整，让您有一些灵活性，而不必深入研究代码的不必要部分（即：轻松添加阴影）。同时，如果它对您有所帮助，我们将很大一部分基于 SlidingMenu 操作（我们喜欢它的工作方式）。它基本上是一个容器（从可能变成 ViewGroup 的 RelativeLayout 扩展 - 我很想辩论 - RelativeLayout -> pro：多功能，避免额外的视图。con：您可能需要不同的布局）。在您的手指移动之后滚动（使用 scrollTo）-> 通过覆盖和分析 onInterceptTouchEvent 和 onTouchEvent 中的触摸。这相对容易。我会鼓励你去做。

不过，如果您不想承担责任，我会在我们准备好时通知您。如果你决定去做，我会在这里做一个简短的跟进。

祝一切顺利。

# c# - Visual Studios 2012 中没有广告控件（在工具箱内）？

> ID：15181223
> 
> 赞同：1
> 
> 时间：2013-03-03T00:49:33.310
> 
> 标签：c#, windows-phone-7, sdk, ads, visual-studio-sdk

我是一位经验丰富的 Visual Studios 2010 Windows Phone 开发人员，我在许多应用程序中都使用过广告。我最近升级到 Visual Studios 2012，但在工具箱中找不到广告控件？正确的库引用存在并已加载，但工具箱中没有实际控件可添加到画布。

我尝试安装此处提供的 pub center 广告控件[http://www.microsoft.com/en-us/download/details.aspx?id=8729](http://www.microsoft.com/en-us/download/details.aspx?id=8729)但它说这台机器上已经安装了更高版本并且它不会工作。

那么我错过了什么？

谷歌只能找到一篇相关的文章，并且是开放式的。

[http://social.msdn.microsoft.com/Forums/en-US/wpinappads/thread/c2b8c26d-c227-4d00-9045-7a613dfc6fe9](http://social.msdn.microsoft.com/Forums/en-US/wpinappads/thread/c2b8c26d-c227-4d00-9045-7a613dfc6fe9)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:51:50.180

几乎在我问这个问题的同时，我意识到了答案。我在这里发布它，以便将来有一些文档。请不要删除。

*   右键单击工具箱
*   单击选择项目
*   检查广告控件
*   点击确定

希望这对将来有所帮助。

# c++ - 将该值传递给函数时值会发生变化吗？

> ID：15181224
> 
> 赞同：0
> 
> 时间：2013-03-03T00:49:38.757
> 
> 标签：c++, math

当我调试这个程序时，我看到 max 是一个垃圾数字，而不是我传递给它的值。

```
#include <iostream>
#include <cmath>

float findPrimes(int max) {

    float* primes = new float[max];

    bool* boolarray = new bool[max];
    for(int i=0; i<=max; i++) {
        boolarray[i] = true;
    }

    int x = 1;

    for(int i=2; i<=sqrt(max); i++) {
        if(boolarray[i]) {
            for(int j=pow(i, 2)+x*i; j<=max; x++)
            {
                boolarray[j] = false;
            }
        }
    }

    int n = 0;

    while(n<=max) {
        if(boolarray[n]) 
            primes[n] = boolarray[n];
        n++;
    }

    return primes[max];

}

int main() {

    float answer = findPrimes(6);

    printf("%f\n", answer);

    _sleep(10000);

    return 0;
} 
```

当我调试它时它告诉我 max 是一个垃圾数字，所以这就是程序不执行的原因（它运行，但没有任何反应）。我很确定我做的所有数学都是正确的（使用 Eratosthenes 的筛子），那么给出了什么？

* * *

编辑：

```
#include <iostream>
#include <cmath>

float findPrimes(int max) {

    std::cout << max << "\n";

    float* primes = new float[max-1];

    bool* boolarray = new bool[max-1];
    for(int i=0; i<=max-1; i++) {
        boolarray[i] = true;
    }

    int x = 1;

    for(int i=2; i<=sqrt(max); i++) {
        if(boolarray[i]) {
            for(int j=pow(i, 2)+x*i; j<=max-1; x++)
            {
                boolarray[j] = false;
            }
        }
    }

    int n = 0;

    while(n<=max-1) {
        if(boolarray[n]) 
            primes[n] = boolarray[n];
        n++;
    }

    return primes[max-2];

}

int main() {

    printf("%f\n", findPrimes(6));

    _sleep(10000);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:15:53.827

您访问超出范围。

```
bool* boolarray = new bool[max-1];
for(int i=0; i<=max-1; i++) {
    boolarray[i] = true;
} 
```

假设 max 为 5。第一行分配了 4 个布尔值，编号为 0 到 3。循环从 0 循环到 4。但是没有条目 4。只有 4 个条目，0、1、2 和 3。

你可能应该这样做：

```
bool* boolarray = new bool[max];
for(int i=0; i<max; i++) {
    boolarray[i] = true;
} 
```

现在，如果 max 为 5，则分配 5 个布尔值，编号为 0 到 4。您的循环现在从 0 变为 4，这就是您想要的。

# javascript - 选择选项时验证文本框

> ID：15181231
> 
> 赞同：0
> 
> 时间：2013-03-03T00:50:27.073
> 
> 标签：javascript, coldfusion, cfml, cfform

我正在使用 ColdFusion 创建一个注册表单。其中一项要求是用户从下拉列表中选择一个值。When one of the option is selected, the next textbox field need to be fill in so this field becomes required field. 如果用户没有从下拉列表中选择任何选项，则此 texfield 可以留空。我不擅长 Javascript，有没有办法获得一些免费样品？这是我的表单字段：

```
<cfselect name="OtherContact" class="inputSelect">
  <option value="">--- Select other contact ---</option> 
  <option value="HomePhone">Home Phone</option>                 
  <option value="HomeFax">Home Fax</option>             
  <option value="HomeEmail">Home Email</option>             
</cfselect>

<cfinput type="text" name="OtherContactId" value="#Form.OtherContactId#" class="inputText"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:06:15.630

您需要做的是在提交表单之前查看dropdownlist selected index是否不为0，如果是，那么您的文本框的文本必须不同于Empty String。这是一个例子：

```
// this is the javascript function that will make sure your criteria is found, if it does, it will return true, false otherwise
function validateSubmit(){
 var OtherContact= document.getElementById('<%=OtherContact.ClientID%>')
 if (OtherContact.selectedIndex !== 0){
    if (document.getElementById('<%=OtherContactId.ClientID%>').value === ""){
       return false;
    }
  }
return true;
} 
```

所以，在你提交之前（或者在验证之后做任何你想做的事情），你可以这样做：

```
// function that submits 
function submit(){
if (validateSubmit()){
// your code in case validation is passed.
   }
else{
// your code in case validation is not passed.
   }
} 
```

祝你好运。

# wpf - WPF 显示窗口

> ID：15181232
> 
> 赞同：1
> 
> 时间：2013-03-03T00:50:57.210
> 
> 标签：wpf, windows, navigation

我一直在寻找关于 WPF、MVVM 和 Windows 导航的好教程。一旦用户单击“确定”按钮，我将尝试显示一个新窗口。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:02:42.527

要使用 OK 按钮显示新窗口，您需要创建窗口的新实例并调用它的 Show() 方法。您可以在按钮单击事件（后面的代码）中执行此操作，也可以将其绑定到自定义命令对象 (MVVM)。这是打开窗口的代码。

```
 var window = new MainWindow();
   window.Show(); 
```

在 MVVM 中，一些开发人员选择只有 1 个窗口，通常是 MainWindow，并将其 UI 的部分分离到 UserControls 中。他们使用 DataTemplates 来定义哪个 UserControl 出现在 MainWindow 中。

如果您只是花时间谷歌这个主题，那么有很多关于 MVVM 的教程。这里有一些对我有很大帮助的链接。 [http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/](http://rachel53461.wordpress.com/2011/12/18/navigation-with-mvvm-2/) [http://msdn.microsoft.com/en-us/magazine/dd419663.aspx](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# c# - C# 中的 Kinect 跟踪 - 向被跟踪的骨架添加更多关节

> ID：15181234
> 
> 赞同：0
> 
> 时间：2013-03-03T00:51:41.490
> 
> 标签：c#, kinect, tracking, point

好的，这是我的情况：我正在开发一个使用 Kinect 的应用程序。我个人仍然纯粹地使用 Windows Vista，因为那是我习惯的，我讨厌改变，但这不是重点。无论如何，我通过获得一个非常早期的测试版并破解安装以不拒绝我的操作系统，设法将 Kinect SDK 安装到 Vista 上。

我正在尝试测量头部旋转。我不能使用面部跟踪，因为我使用的 SDK 版本不包含它，并且升级到 Windows 7 以安装更高版本是我想要创建一个应用程序的最后一件事，正如我上面解释的那样。我也希望它可以在 Vista 上运行，因为一些可能想要使用它的人可能仍然像我一样在 Vista 上。

所以我想知道是否可以向骨架添加更多跟踪点？我可以在前额和下巴上加一个点，或者在每个颧骨上加一个点吗？这样我就可以测量完全旋转到我需要的点。

我这是可能的，它是怎么做到的？如果您有任何其他可行的想法，如果您分享它们，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:15:10.363

> 所以我想知道是否可以向骨架添加更多跟踪点？

不可以。您不能在 SDK 的跟踪算法中添加新点。它有预设数量的点，它知道如何处理，并且不可能只添加一个新点。

> 我可以在前额和下巴上加一个点，或者在每个颧骨上加一个点吗？这样我就可以测量完全旋转到我需要的点。

您可以通过面部跟踪算法来做到这一点。您显然需要非常仔细地检查代码并编写自己的代码。

# java - 忽略正则表达式中括号之间的文本

> ID：15181238
> 
> 赞同：3
> 
> 时间：2013-03-03T00:52:41.870
> 
> 标签：java, regex

我的目标是阅读字符串并忽略括号中的文本。

```
public static void main(String[] args) {
    Pattern checkRegex= Pattern.compile("([a-zA-Z]{3,30}\\s*){2}");

    Matcher regexMatcher=checkRegex.matcher("James Hunt(Skateboarder)");

    while(regexMatcher.find()){
    System.out.println(regexMatcher.group().trim());
} 
```

当前输出为：

> 詹姆斯·亨特
> 
> 滑板手

基本上我想要的是输出只有“詹姆斯亨特”。在这种情况下使用什么合适的正则表达式模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T00:54:54.720

这将适用于给定字符串中的所有非嵌套括号：

```
String input = "James Hunt(Skateboarder)";
String output = input.replaceAll("\\([^)]*?\\)", ""); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T00:57:41.247

> 基本上我想要的是输出只有“詹姆斯亨特”。在这种情况下使用什么合适的正则表达式模式？

尝试正则表达式：`^[^(]*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:03:32.843

如果您不必使用正则表达式，则可以通过一次简单的迭代来获取数据

```
String data="some (sentence (with) nested) paranhesis";
StringBuilder buffer=new StringBuilder();
int parenthesisCounter=0;
for (char c:data.toCharArray()){
    if (c=='(') parenthesisCounter++;
    if (c==')') parenthesisCounter--;
    if (c!=')' && c!='(' && parenthesisCounter==0)
        buffer.append(c);
}
System.out.println(buffer); 
```

输出：

```
some  paranhesis 
```

# sass - 使用 960gs 框架的 Sass 语法

> ID：15181239
> 
> 赞同：0
> 
> 时间：2013-03-03T00:52:43.617
> 
> 标签：sass, compass-sass, 960.gs

我正在尝试使用 sass 语法重新学习 960gs。我对“+”和“=” sass 语法之间的区别感到困惑。例如：

```
.wrapper
    +grid-container 
```

和

```
.wrapper
    @include grid_container 
```

将在我编译的 css 文件中产生相同的结果

```
.wrapper {
  margin-left: auto;
  margin-right: auto;
  width: 960px;
} 
```

那么使用“+”和“@include”有什么区别呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:00:06.610

完全没有区别。引用[Sass 文档](http://sass-lang.com/docs/yardoc/file.INDENTED_SYNTAX.html#mixin_directives)：

> Sass 支持 @mixin 和 @include 指令的简写。您可以使用字符 =; 而不是写 @mixin 您可以使用字符 + 而不是编写 @include。

# jquery - 不在文本区域中呈现代码

> ID：15181241
> 
> 赞同：1
> 
> 时间：2013-03-03T00:53:13.670
> 
> 标签：jquery, html, textarea, rendering

我正在使用 textarea 来显示代码（是的，它必须是 textarea，没有奇怪的替代方案），在 textarea 中，我拥有从元描述到 favicon 链接的所有内容。它正在将整个网站的图标链接更改为它在文本区域中所说的内容！有没有办法让文本显示出来并阻止它呈现 HTML？

可以在 www.pholiooo.com 找到一个活生生的例子，这是我所做的一个简短的例子。

```
<textarea class="code" name="code" rows="10"><html>
<head>
    <title>%name%</title>
    <meta name="description" content="%bio%">
    <link rel="icon" href="%favicon%">
</head>
<body>
    <h1>%name%</h1>
    <h2>%slogan%</h2>
    <a href="http://dribbble.com/%dribbble_username%">See my work</a>
    <p>%bio%</p>
</body>
</html></textarea> 
```

一个 jQuery 片段将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T10:19:44.873

需要对 HTML 进行编码以确保它显示在文本区域内。鉴于您的 jQuery 要求，我怀疑以下内容适合您：

```
<script>
  var someHtmlString = "<html>...</html>";
  $("textarea.code").text(someHtmlString);
</script>

<textarea class="code" name="code" rows="10"></textarea> 
```

# c++ - 重载和覆盖如何协同工作？

> ID：15181242
> 
> 赞同：1
> 
> 时间：2013-03-03T00:53:20.597
> 
> 标签：c++, polymorphism, overloading, overriding, dynamic-binding

我了解重载和覆盖的基础知识——但有些事情让我感到困惑。我将尝试用一个简单的例子来解释：

*   B 类具有函数 X(B& b)
*   D类继承自B类。
*   D 类用 X(B& b) 覆盖 X 并用 X(D& d) 重载它。

然后我有以下代码：

```
void test(D& d1, B& b1, D& d2, B& b2){
    d1.X(d2);
    d1.X(b2);
    b1.X(d2);
    b1.X(b2);
}

int main(){
    D d1, d2, d3, d4;
    test(d1, d2, d3, d4);
} 
```

我非常不确定第三行和第四`test()`行将如何确定要调用 X() 的哪些实现以及正在发生的一般机制是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:39:26.520

`X`您在 中声明一个虚函数，并在派生类中`B(B::X)`覆盖。如果和的参数列表不同，并且被认为不同，则不会覆盖，并且不是虚拟的（除非您已使用 virtual 关键字声明它）。相反，隐藏.`X``D(D::X)``B::X``D::X``B::X``D::X``D::X``B::X``D::X``D::X``B::X`

```
#include <iostream>
using namespace std;

struct B {
   virtual void X() { cout << "Class B" << endl; }
};

struct D: B {
   void X(int) { cout << "Class D" << endl; }
};

int main() {
   D d;
   B* pb = &d;
//   d.X();
   pb->X();
} 
```

你甚至不能打电话`d.X()`，它被隐藏了`D::X(int)`。不过`pb->X()`还好。

所以在你的情况下：

```
struct B {
   virtual void X(B& b) { cout << "Class B" << endl; }
};

struct D: B {
   void X(B& b) { cout << "Class D" << endl; }
   void X(D& d) { cout << "Class D" << endl; }
}; 
```

将`D::X`隐藏`B::X`. 所以`d1.X(d2)`和`d1.X(b2)`in`test()`无关`B::X`。和`b1.X(d2)`,`b1.X(b2)`中将`test()`调用`D::X`。虽然`B::X`d 在 D 中是不可见的，但`D::X(B&)`它是虚拟的，不管你是否`D::X(B&)`用 virtual 关键字声明。编译器知道它是一个虚函数，所以`D::X(B&)`被调用。

编辑：关于 b1.X(b2) 的更多解释，B::X 是一个虚函数，并且 D::X 覆盖它，所以它肯定会通过动态绑定调用 D::X。并且重载是在编译时确定的，所以它不会调用 D::X(D&)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T03:21:34.390

涉及两个步骤：重载选择（`X(B&)`vs. `X(D&)`），一旦完成，找到所选函数的正确实现。前者发生在编译时，取决于对象的*静态类型**及其*参数，后者发生在运行时，取决于对象的*动态类型*（注意它不*依赖*于参数的动态类型）。

四个对象声明如下：`d1`and `d2`are `D&`，所以它们的*静态类型*是`D&`， and `b1`and`b2`被声明为`B&`，所以它们的静态类型是`B&`。静态类型是您在代码中声明的类型。

但是所有四个的*动态类型*都是`D`，因为所有四个引用*实际上*都引用了您作为`D`-objects 在中创建的对象`main()`。

因此，第一步，重载选择： 在 and 的情况下`b1.X(b2)`，`b1.X(d2)`只有一个可能的重载，`X(B&)`，因为静态类型是`B&`，而 for 的类定义`B`只有这一个函数。但是在 and 的情况下`d1.X(b2)`，`d1.X(d2)`重载选择是基于 的类定义的`D`，因为静态类型是`D&`。因此考虑了两个重载：`X(B&)`和`X(D&)`. 当参数为`b2`时，选择前一个重载，当参数为 时`d2`，选择后一个重载——所有这些都基于对象和参数的静态（=声明）类型。

第二步，选择重载的正确实现。这发生在运行时，取决于对象的动态类型（而不是参数）。所以在的情况下`b1.X(b2)`，因为是动态类型`b1`，`D`所以最终会调用`D::X(B&)`。同样适用`b1.X(d2)`：在上一步中选择的重载是`X(B&)`，但选择的实现是`D::X(B&)`。（`D::X(D&)`此时不是候选者，因为那将是不同的重载，并且已经根据静态类型选择了重载）。在 and 的情况下`d1.X(b2)`，`d1.X(d2)`选择的函数和第一步一样，`D::X(B&)`and `D::X(D&)`，因为对象的动态类型和静态类型是一样的。

# python - Python 中的虚拟神经网络

> ID：15181244
> 
> 赞同：1
> 
> 时间：2013-03-03T00:53:49.840
> 
> 标签：python

我刚刚在 python 中编写了一个简单的神经网络，因为我最近一直在研究它们。我正在使用反向传播。激活函数是一个 sigmoid。输入和权重随机生成，理想输出为 0。我是 python 新手，所以代码编写效率非常低，但它是可读的。当我运行代码时，输​​出总是为零，我似乎找不到原因。另外，我没有使用模块。

```
from random import uniform
input_one_input_value = 1
input_two_input_value = 0
bias_value = 1

#use global to globalize function-based variables
#use lists to store data in future
def hidden_One():
    global weighted_sum_hidden_one
    weighted_sum_hidden_one = (input_one_input_value * weights[0]) + (input_two_input_value * weights[1]) + (bias_value * weights[2])
    hidden_one_output = activation(weighted_sum_hidden_one)
    return hidden_one_output

def hidden_Two():
    global weighted_sum_hidden_two
    weighted_sum_hidden_two = (input_one_input_value * weights[3]) + (input_two_input_value * weights[4]) + (bias_value * weights[5])
    hidden_two_output = activation(weighted_sum_hidden_two)
    return hidden_two_output

def output_One():
    weighted_sum = (hidden_One() * weights[6]) + (hidden_Two() * weights[7]) + (bias_value * weights[8])
    return activation(weighted_sum)

def activation(x):
    sigmoid_value = 1 / (1+(2.71828 ** x))
    return sigmoid_value

def calculate_gradient():
    E = ideal_output - actual_output
    output_delta = -E * activation(weights[6] + weights[7] + weights[8])
    h1_delta = activation(weighted_sum_hidden_one) * weights[6] * output_delta
    h2_delta = activation(weighted_sum_hidden_two) * weights[7] * output_delta  
    b2_delta = activation(bias_value) * weights[8] * output_delta
    i1_delta = activation(input_one_input_value) * ((weights[0] * h1_delta) + (weights[3] * h2_delta))
    i2_delta = activation(input_one_input_value) * ((weights[1] * h1_delta) + (weights[4] * h2_delta))
    b1_delta = activation(bias_value) * ((weights[2] * h1_delta) + (weights[5] * h2_delta))
    global w1_gradient
    global w2_gradient
    global w3_gradient
    global w4_gradient
    global w5_gradient
    global w6_gradient
    global w7_gradient
    global w8_gradient
    global w9_gradient
    w1_gradient = input_one_input_value * h1_delta
    w2_gradient = input_two_input_value * h1_delta
    w3_gradient = bias_value * h1_delta
    w4_gradient = input_one_input_value * h2_delta
    w5_gradient = input_two_input_value * h2_delta
    w6_gradient = bias_value * h2_delta
    w7_gradient = hidden_One() * output_delta
    w8_gradient = hidden_Two() * output_delta
    w9_gradient = bias_value * output_delta

def backpropogation():
    E = .7 #learning rate
    a = .3 #momentum to prevent settling for local minima
    global weightchanges_previous
    global weight_change
    weightchanges_previous = []
    weight_change = []
    if len(weightchanges_previous) == 0:
        weight_change.append((E * w1_gradient))
        weight_change.append((E * w2_gradient))
        weight_change.append((E * w3_gradient))
        weight_change.append((E * w4_gradient))
        weight_change.append((E * w5_gradient))
        weight_change.append((E * w6_gradient))
        weight_change.append((E * w7_gradient))
        weight_change.append((E * w8_gradient))
        weight_change.append((E * w9_gradient))
        weightchanges_previous.append(weight_change[0])
        weightchanges_previous.append(weight_change[1])
        weightchanges_previous.append(weight_change[2])
        weightchanges_previous.append(weight_change[3])
        weightchanges_previous.append(weight_change[4])
        weightchanges_previous.append(weight_change[5])
        weightchanges_previous.append(weight_change[6])
        weightchanges_previous.append(weight_change[7])
        weightchanges_previous.append(weight_change[8])

    elif len(weightchanges_previous) != 0:
        weight_change[0] = (E * w1_gradient) + (a * weightchanges_previous[0])
        weight_change[1] = (E * w2_gradient) + (a * weightchanges_previous[1])
        weight_change[2] = (E * w3_gradient) + (a * weightchanges_previous[2])
        weight_change[3] = (E * w4_gradient) + (a * weightchanges_previous[3])
        weight_change[4] = (E * w5_gradient) + (a * weightchanges_previous[4])
        weight_change[5] = (E * w6_gradient) + (a * weightchanges_previous[5])
        weight_change[6] = (E * w7_gradient) + (a * weightchanges_previous[6])
        weight_change[7] = (E * w8_gradient) + (a * weightchanges_previous[7])
        weight_change[8] = (E * w9_gradient) + (a * weightchanges_previous[8])
        while len(weightchanges_previous) > 0 : weightchanges_previous.pop()
        weightchanges_previous.append((E * w1_gradient) + (a * weightchanges_previous[0]))
        weightchanges_previous.append((E * w2_gradient) + (a * weightchanges_previous[1]))
        weightchanges_previous.append((E * w3_gradient) + (a * weightchanges_previous[2]))
        weightchanges_previous.append((E * w4_gradient) + (a * weightchanges_previous[3]))
        weightchanges_previous.append((E * w5_gradient) + (a * weightchanges_previous[4]))
        weightchanges_previous.append((E * w6_gradient) + (a * weightchanges_previous[5]))
        weightchanges_previous.append((E * w7_gradient) + (a * weightchanges_previous[6]))
        weightchanges_previous.append((E * w8_gradient) + (a * weightchanges_previous[7]))
        weightchanges_previous.append((E * w9_gradient) + (a * weightchanges_previous[8]))

def edit_weights():
    weights[0] += weight_change[0]
    weights[1] += weight_change[1]
    weights[2] += weight_change[2]
    weights[3] += weight_change[3]
    weights[4] += weight_change[4]
    weights[5] += weight_change[5]
    weights[6] += weight_change[6]
    weights[7] += weight_change[7]
    weights[8] += weight_change[8]
    while len(weight_change) > 0 : weight_change.pop()

weights = []
x = 0
while x <=8:
    weights.append(uniform(-10, 10))
    x += 1

ideal_output = 0
actual_output = output_One()
print "Output %d" % output_One()

x = 0
while x <= 10:
    output_One()
    calculate_gradient()
    backpropogation()
    edit_weights()
    print "Output %d" % output_One()
    print "----------------------"
    actual_output = output_One()
    x += 1

print "FINAL WEIGHTS:"
print weights[0]
print weights[1]
print weights[2]
print weights[3]
print weights[4]
print weights[5]
print weights[6]
print weights[7]
print weights[8] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:01:32.743

您的问题是输出行：

```
print "Output %d" % output_One() 
```

您正在使用`%d`which 打印整数值，因此它将浮点值向下舍入到最接近的整数（整数转换）。改为使用`%f`，您应该正确获得浮点数。

# sql - 对依赖于引用表中的一组值的表建模，这些值可以同时存在或不存在

> ID：15181260
> 
> 赞同：-1
> 
> 时间：2013-03-03T00:55:58.133
> 
> 标签：sql, database, database-design

我有一个表'medical_observations'，在一个字段中引用了另一个表'sypstoms_at_arriving'，它描述了可能的症状列表。

```
 CREATE TABLE `patients`(
      id_patient   INTEGER  NOT NULL PRIMARY KEY,
      name         VARCHAR(25)  ,
      address      VARCHAR(50) ,
      CONSTRAINT `uc_Info_Patient` UNIQUE (`id_patient`)           
);
INSERT INTO `patients` values (1,'joe','joe´s address');
INSERT INTO `patients` values (2,'moe','moe´s address');
INSERT INTO `patients` values (3,'karl','karle´s address');
INSERT INTO `patients` values (4,'lenny','lenny´s address');

CREATE TABLE `symptoms_at_arrival` (
       symptom_at_arrival varchar(30) primary key
     );

INSERT INTO `symptoms_at_arrival` values ('vomit');
INSERT INTO `symptoms_at_arrival` values ('urine');
INSERT INTO `symptoms_at_arrival` values ('dizziness');
INSERT INTO `symptoms_at_arrival` values ('convulsion');

CREATE TABLE `medical_observations`(
      id_medical_observation   INTEGER  NOT NULL PRIMARY KEY,
      id_patient               INTEGER  NOT NULL,
      symptom_at_arrival       VARCHAR(30),  
      FOREIGN KEY (id_patient)            references `patients`             (id_patient),
      FOREIGN KEY (symptom_at_arrival)    references `symptoms_at_arrival` (symptom_at_arrival ),
      CONSTRAINT `uc_Info_medical_Observation` UNIQUE (`id_medical_observation`,`id_patient`)           
    ); 
```

我的疑问是当患者有多种症状时如何建模或存储病例……而不仅仅是一种。如果是这样的话，症状的名称就足够了......

但如果患者同时表现出多种症状呢？

# 更新

我做了一个[sqlfiddle](http://sqlfiddle.com/#!2/7c228)，我想添加一种表，用 1 和 0 表示患者是否表现出某种症状……那对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:04:46.467

您必须在外键中建立连接

```
|patient|        |medical_observations|              |symptoms_at_arriving|
---------        ----------------------              ----------------------
**id** 1 ----|   **id_medical_observation** |-----1  **id**
name         |-M **id_patient**             |        symptom_at_arrival
                 **symptom_at_arrival** M---| 
```

试试这个，这里没有mysql来测试，让表多主键同时支持多种症状

```
 CREATE TABLE `symptoms_at_arriving` (
       id    integer not null primary key autoincrement,
       symptom_at_arrival varchar(30)
     );
     INSERT INTO `symptom_at_arrival' values ('vomit');
     INSERT INTO `symptom_at_arrival` values ('urine');
    INSERT INTO `symptom_at_arrival` values ('dizziness');
    INSERT INTO `symptom_at_arrival` values ('convulsion');

CREATE TABLE `medical_observations`(
      id_medical_observation   INTEGER  NOT NULL,
      id_patient               INTEGER  NOT NULL,
      symptom_at_arrival       integer not null,  
      FOREIGN KEY (id_patient)            references `patients`             (id_patient),
      FOREIGN KEY (symptom_at_arrival)    references `symptoms_at_arriving` (symptom_at_arrival,
      PRIMARY KEY (id_medical_observation, id_patient, symptom_at_arrival) 
```

);

# python - Powershell 语法错误（python 2.7）

> ID：15181264
> 
> 赞同：0
> 
> 时间：2013-03-03T00:56:59.580
> 
> 标签：python, powershell, syntax-error

蟒蛇 2.7

当我尝试执行 python 脚本时，我得到一个无效的语法错误。

```
powershell.exe 'c:\pythonscripts\ex1.py'
File "<stdin>", line 1
powershell.exe 'c:\pythonscripts\ex1.py'
                                       ^ 
```

我知道它有效，因为我刚刚使用此命令执行了一个文件。.py 的代码是

```
print "Hello World!"
print "Hello Again"
print "I like typing this."
print "This is fun."
print 'Yay! Printing.'
print "I'd much rather you 'not'."
print 'I "said" do not touch this. 
```

蟒蛇 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:04:09.830

如评论中所示，您的错误是您在最后一个打印语句中忘记了撇号。

```
print 'I "said" do not touch this.' 
```

玩得开心学习python。LPTHW 是学习它的好方法:)。

# c - libwebsockets 教程问题：“libwebsocket_internal_extensions”未声明和错误：函数“libwebsocket_create_context”的参数太多

> ID：15181265
> 
> 赞同：3
> 
> 时间：2013-03-03T00:57:01.973
> 
> 标签：c, network-programming, websocket, libraries

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T21:03:03.343

检查websocket库的路径是否正确（可以找到库）

我猜这个函数`libwebsocket_create_context()`改变了它的参数。看一下 libwebsockets 示例**test-server.c**：

现在应该是这样的：

```
/* old Version:
context = libwebsocket_create_context(port, interface, protocols,
                                      libwebsocket_internal_extensions,
                                      cert_path, key_path, -1, -1, opts);
*/

//-- new Version:
struct lws_context_creation_info info;

memset(&info, 0, sizeof info);
info.port = port;
info.iface = interface;
info.protocols = protocols;
info.extensions = libwebsocket_get_internal_extensions();
//if (!use_ssl) {
    info.ssl_cert_filepath = NULL;
    info.ssl_private_key_filepath = NULL;
//} else {
//  info.ssl_cert_filepath = LOCAL_RESOURCE_PATH"/libwebsockets-test-server.pem";
//  info.ssl_private_key_filepath = LOCAL_RESOURCE_PATH"/libwebsockets-test-server.key.pem";
//}
info.gid = -1;
info.uid = -1;
info.options = opts;

context = libwebsocket_create_context(&info);
//------ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-27T19:57:46.777

我认为最近，直到 v2.0，libwebsockets 经历了一些大的重构，例如将接口名称从 libwebsockets_... 更改为 lws_...。我需要一个 C++ 包装器，如果找不到更新的包装器，我可以自己编写。希望它更稳定，也许 v2.0 会给我们。

# iphone - 在整个应用程序中运行 Internet 连接检查

> ID：15181271
> 
> 赞同：2
> 
> 时间：2013-03-03T00:57:52.927
> 
> 标签：iphone, ios, objective-c, xcode

下面的方法非常适用于检查用户是否有互联网连接。我想检查整个应用程序中的互联网连接，并且想知道是否可以将它放在我的 App Delegate 中的某个地方，它将被每个视图控制器调用。

有没有办法做到这一点？如果我把它放在我的 applicationDidFinishLaunching 中，它似乎无法正常工作。任何建议都会很棒！谢谢！

```
NSURL *scriptUrl = [NSURL URLWithString:@"http://www.google.com/m"];
NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
if (data) {
    NSLog(@"Device is connected to the internet");
}
else {
    NSLog(@"Device is not connected to the internet");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"No Internet Connectivity" 
    message:@"You must have an internet connection" delegate:self cancelButtonTitle:@"OK" 
    otherButtonTitles:nil, nil];
    [alert show];
    return;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T01:23:32.060

如果您希望将此特定方法放置在可以从整个应用程序访问和调用的位置，那么这只是一个设计决策。有多种方法可以实现这一目标。

在实现全局方法时，我喜欢使用单例范式。约翰华兹华斯在一篇简洁的博客文章中介绍了这一点：

[http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)

这是一段快速的代码：

> InternetConnectionChecker.h

```
#import <Foundation/Foundation.h>

@interface InternetConnectionChecker : NSObject

// Accessor for singelton instance of internet connection checker.
+ (InternetConnectionChecker *)sharedInternetConnectionChecker;

// Check to see whether we have a connection to the internet. Returns YES or NO.
- (BOOL)connected;

@end 
```

> InternetConnectionChecker.m

```
#import "InternetConnectionChecker.h"

@implementation InternetConnectionChecker

// Accessor for singelton instance of internet connection checker.
+ (InternetConnectionChecker *)sharedInternetConnectionChecker
{
    static InternetConnectionChecker *sharedInternetConnectionChecker;
    @synchronized(self)
    {
        if (!sharedInternetConnectionChecker) {
            sharedInternetConnectionChecker = [[InternetConnectionChecker alloc] init];
        }
    }
    return sharedInternetConnectionChecker;
}

// Check to see whether we have a connection to the internet. Returns YES or NO.
- (BOOL)connected
{
    NSURL *scriptUrl = [NSURL URLWithString:@"http://www.google.com/m"];
    NSData *data = [NSData dataWithContentsOfURL:scriptUrl];
    if (data) {
        NSLog(@"Device is connected to the internet");
        return TRUE;
    }
    else {
        NSLog(@"Device is not connected to the internet");
        return FALSE;
    }
}

@end 
```

在我的示例中，我修改了您的方法以返回 true/false，以便您可以在 UI 中适当地处理调用该方法的结果，但如果您愿意，您可以继续显示 UIAlertView。

然后，您将按以下方式使用单例：

```
InternetConnectionChecker *checker = [InternetConnectionChecker sharedInternetConnectionChecker];
BOOL connected = [checker connected]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:32:21.950

当然有更复杂的方法，但最简单的方法（也是我使用的方法）是简单地创建一个“CheckNetwork”类，将您的方法作为返回布尔值的类方法，即：

```
+ (BOOL) checkConnection{
   yourMethodDetails;
} 
```

然后只需将#import "CheckNetwork.h" 导入项目中的任何文件并调用

```
if([CheckNetwork checkConnection]){
    whatever you want to do here;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T09:40:01.143

虽然 Singleton 类和静态方法是一种方法，但您也可以在 .h 文件中实现静态内联方法，因为没有 .m 文件

此外，作为旁白，使用 NSURL 和 google.com 来检查互联网连接并不是一个好习惯。

因为，

*   这不是一个简单的 ping 操作
*   它下载整个页面，这可能会消耗时间
*   操作系统提供的方式更加激进和恰当。

如果您正在使用特定的网站，那么使用该网站进行连接是最佳实践，我认为。请参阅[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)的**[这个答案](https://stackoverflow.com/questions/801075/c-sharp-testing-active-internet-connection-pinging-google-com)**

我建议使用 Apple 的**[可达性](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)**框架。

或者如果您需要更紧凑的单功能版本，您也可以使用我自己摘自 Reachabilty 的这个功能

```
+ (BOOL) reachabilityForInternetConnection;
{
    struct sockaddr_in zeroAddress;
    bzero(&zeroAddress, sizeof(zeroAddress));
    zeroAddress.sin_len = sizeof(zeroAddress);
    zeroAddress.sin_family = AF_INET;

    SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct sockaddr*)&zeroAddress);

    SCNetworkReachabilityFlags flags;
    if (SCNetworkReachabilityGetFlags(reachability, &flags))
    {
        return (flags & kSCNetworkReachabilityFlagsConnectionRequired);
    }
    return NO;
} 
```

# android - Android Log errors

> ID：15181272
> 
> 赞同：0
> 
> 时间：2013-03-03T00:58:10.283
> 
> 标签：android

I have tried this a few times, even with a brand new application package and I keep getting this error. I don't believe its something major but then again I don't know much about the error and why its occurring, so can someone please shed some light on this topic.

Occurs right after I lock the phone and then unlock it.

```
03-02 19:53:06.270: W/IInputConnectionWrapper(29313): getSelectedText on inactive InputConnection
03-02 19:53:06.270: W/IInputConnectionWrapper(29313): setComposingText on inactive InputConnection
03-02 19:53:06.270: W/IInputConnectionWrapper(29313): getExtractedText on inactive InputConnection 
```

# winforms - 在 XNA 游戏中使用 WinForms 获取输入的方式

> ID：15181276
> 
> 赞同：1
> 
> 时间：2013-03-03T00:58:28.957
> 
> 标签：winforms, input, xna

最初的问题是*“WinForms 如何捕获和处理用户输入”*，但由于我想在我的 XNA 游戏中使用它，所以你可以看到标题。

我不想在我的游戏中错过任何击键，但是 XNA 更新用户输入的默认方式取决于帧率，并且 Nuclex.Input 不在乎我按下哪个`Shift`键`Ctrl`，也不会检测到某些键（包括`F10`，左键）`Alt`,`PrintScreen`和`Pause`)，所以他们不会为我工作。

是否可以在 XNA 游戏中实现与在 WinForms 应用程序中使用相同的方式来捕获用户输入，以及如何实现？

# django - Django：没有多个参数的反向url匹配

> ID：15181278
> 
> 赞同：1
> 
> 时间：2013-03-03T00:58:46.337
> 
> 标签：django, django-urls

我的 URL 需要捕获以下内容：

```
domain/forum-name/
domain/forum-name/topic-name 
```

我有以下 URL 定义：

```
url(r'^$', views.index_forums, name='index_forums'),
url(r'^(?P<forum_name>[-\w]+)/(?P<topic_name>[-\w]+)/$', views.show_topic, name='show_topic'),
url(r'^(?P<forum_name>[-\w]+)/$', views.index_topics, name='index_topics'), 
```

当我点击域名/论坛名称之类的 URL 时，我会在 HTML 中生成 URL，如下所示：

```
{% url 'board:show_topic' forum_name|lower topic.title|lower %} 
```

这给了我一个“反向...未找到”错误，我不知道为什么。我是否错误地使用了“url”？我的正则表达式有问题吗？谢谢！

编辑：添加完整的错误和模板：

```
NoReverseMatch at /random/
Reverse for 'show_topic' with arguments '(u'random', u'funny youtube videos')' and keyword    arguments '{}' not found.
Request Method: GET
Request URL:    http://localhost:8000/random/
Django Version: 1.5c2
Exception Type: NoReverseMatch
Exception Value:    
Reverse for 'show_topic' with arguments '(u'random', u'funny youtube videos')' and keyword arguments '{}' not found.
Exception Location: /Users/travis/code/penv/lib/python2.7/site- packages/django/template/defaulttags.py in render, line 424
Python Executable:  /Users/travis/code/penv/bin/python
Python Version: 2.7.2

Reverse for 'show_topic' with arguments '(u'random', u'funny youtube videos')' and keyword arguments '{}' not found.
1   {% extends "board/base.html" %}
2   
3   {% block content %}
4   {% if topic_list %}
5   <ul>
6   {% for topic in topic_list %}
7       <li><a href="{% url 'board:show_topic' forum_name|lower topic.title|lower %}">{{topic.title}}</a></li>
8   {% endfor %}
9   </ul>
10  {% else %}
11  <p>No topics! <a href="/topic/new/">Make a new one</a>.</p>
12  {% endif %}
13  {% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:58:08.007

尝试：

```
{% url 'show_topic' forum_name|lower topic_name|lower %} 
```

* * *

编辑：

您的 url 正则表达式不接受空格：

尝试：

```
url(r'^(?P<forum_name>[-\w]+)/(?P<topic_name>[-\w\ ]+)/$', views.show_topic, name='show_topic'), 
```

# awk - 在散文上使用 awk

> ID：15181282
> 
> 赞同：0
> 
> 时间：2013-03-03T00:59:21.363
> 
> 标签：awk

我有一个排序的短语列表，list.txt。我想使用 awk 从冗长的散文文件中删除该列表中的任何条目，并将其替换为返回。不难找到使用 awk 比较两个文件的示例，但它们都假设两者结构整齐，而散文则不然。

这是脚本的相关部分：

```
#! /bin/sh
...

sed '
s/[0-9]/\n/g        # strip out all numbers, replace with returns
s/[@€•\!¡%“”"_–=\*\&\/\?¿\,\.]/\n/g
' $1 > $1.z.tmp

cp stowplist.txt strip1.tmp

awk 'BEGIN { FS = "\t" } ; { print $1 }' SpanishGlossary.utf8 >> strip1.tmp
#sh ./awkwords SpanishGlossary.utf8 >> strip1.tmp

sort -u strip1.tmp > strip2.tmp

awk '{ print length(), $0 | "sort -rn" }' strip2.tmp > strip3.tmp
#echo "List ordered by length."

#echo "Now creating new script." # THIS AFFECTS THE SCRIPT, NOT THE OUTPUT FILE.
sed '
s/[0-9]//g      # strip out all numbers
s/[\t^\ *\ $]// # strip tabs, leading and trailing spaces
/^.\{0,5\}$/d       # delete lines with less than five characters
/^$/d           # delete blank lines
s/^/\\y/g           # begin word boundary
s/$/\\y/g           #end word boundary
s/\ /\\ /g      # make spaces into literals
' strip3.tmp > strip.tmp

echo "Eliminating existing entries. This may take a while."
awk 'NR==FNR{p = p s $0; s="|" ;next} {gsub(p,"\n");print}' strip.tmp $1.z.tmp > $1.1.tmp

... 
```

这是 strip.tmp 的代表性示例：

```
\yinfraestructura\ de\ la\ fabricación\y
\yFecha\ de\ Vencimiento\ del\ Contrato\y
\yfactores\ importantes\ a\ considerar\y
\yexcepto\ lo\ estrictamente\ personal\y
\yexamen\ de\ los\ ojos\ con\ dilatación\y
\yes\ un\ estado\ capitalista\ corrupto\y
\yes\ un\ derecho\ legal\ reconocido\ en\y
\yestimular\ la\ capacidad\ productiva\y
\yestimación\ de\ la\ edad\ gestacional\y
\yEste\ Programa\ de\ Transición\ Verde\y
\yEstán\ permanentemente\ enfrentados\y 
```

最后，输入文本的代表性样本，标点符号替换为换行符。

```
Es la historia de más de un siglo del cooperativismo en Argentina
 con empresas en todos los rincones de nuestra geografía y en todos los sectores de la economía

En plena crisis del sistema económico mundial
 con creciente alarma frente al deterioro a escala planetaria de las condiciones medio ambientales
 la comunidad internacional ha declarado
 desde la Organización de las Naciones Unidas
 a éste como el Año Internacional de las Cooperativas

No es casualidad
 el mundo está buscando nuevos caminos
 nuevos paradigmas para organizarse 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T14:55:05.690

@Kent 发布：

```
awk 'NR==FNR{p[$0];next}{a[FNR]=$0}END{for(i=1;i<=FNR;i++){for(v in p)gsub(v,"",a[i]);print a[i]}}' file1 file2 
```

`l`为了`v`便于阅读，我将变量更改为 - 永远不要`l`用作变量名，因为它看起来太像数字了`1`。

上面将整个 file2 读入一个数组，然后遍历该数组进行替换，而不是在读取每一行时仅进行替换，例如：

```
awk 'NR==FNR{p[$0];next} {for(v in p)gsub(v,"");print}' file1 file2 
```

但是一个更快的替代方法是，而不是构建一个要删除的短语数组，只需构建一个 RE 字符串，这样您就可以在 file2 的每一行上执行一个 gsub() 而不是每个短语一个 gsub()文件1：

```
awk 'NR==FNR{p = p s $0; s="|" ;next} {gsub(p,"");print}' file1 file2 
```

请注意所有您正在进行 RE 比较的人，以便 file1 中的 RE 元字符会对 file2 中的匹配项产生影响。由于您正在与 sed 解决方案进行比较，因此我认为这很好。

如果您只关心速度，那么这个 GNU awk 解决方案可能会更快：

```
$ gawk -v RS='\0' -v FS='\n' -v OFS='|' 'NR==FNR{NF--; p=$0; next} {gsub(p,"");print}' file1 file2
line1 blah () blah ()
line2 blah () blah ()()
line3 blah blah () ()() 
```

但它非常神秘，比其他的使用更多的内存，并且不是很可扩展，所以我不会打扰它。

我会使用上面的解决方案，将“p”构建为单个 RE，并在每一行上执行一个 gsub()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:13:59.867

这个单线可能适合您：

```
 awk 'NR==FNR{p[$0];next}{a[FNR]=$0}END{for(i=1;i<=FNR;i++){for(l in p)gsub(l,"",a[i]);print a[i]}}' file1 file2 
```

笔记：

```
file1 is your list.txt
file2 is your prose 
```

小例子：

```
kent$  head file*                                                                                                     
==> file1 <==
good for you
hi there
awk is nice

==> file2 <==
line1 blah (hi there) blah (good for you)
line2 blah (awk is nice) blah (hi there)(good for you)
line3 blah blah (good for you) (awk is nice)(hi there)

kent$  awk 'NR==FNR{p[$0];next}{a[FNR]=$0}END{for(i=1;i<=FNR;i++){for(l in p)gsub(l,"",a[i]);print a[i]}}' file1 file2
line1 blah () blah ()
line2 blah () blah ()()
line3 blah blah () ()() 
```

# php - 长轮询脚本是什么样的，以及如何实现它，

> ID：15181283
> 
> 赞同：2
> 
> 时间：2013-03-03T00:59:35.093
> 
> 标签：php, long-polling

全部。我有一个带有小聊天室的网站，我的用户越来越多地占用我的带宽，在搜索了一些奇迹之后，我终于找到了一些性感的东西：）据我所知，**长轮询，**

> 这是一种简单的方法，可以使服务器/客户端之间的连接保持较长时间的 UN-interapted，并通过这样做将继续请求的需求减少 90%。

现在，我可能是错的。但是，这个“简单”的东西是如何创造出来的。下面，您可以看到我的聊天脚本，它是根据使用 Jquery 的教程创建的。它工作正常，但它没有长轮询功能。

这是[PHP](http://pastebin.com/mKDGUNxE)和[Javascript](http://pastebin.com/BsHzuK7F)代码（我不能在这里粘贴它们，因为它们太长了）。

现在，问题是如何将长轮询脚本注入到我已经构建的代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:16:24.723

我还没有阅读您的代码，但这里有一个小例子：

```
function waitForNotification() {
    $.ajax(url, {
        timeout: 60000,
        success: function(e) {
            //do want you want with e
            //and call function again:
            waitForNotification();
        }
    });
} 
```

在服务器端，您需要收集所有 ajax (on `url`) 请求，并仅在发布新消息时才释放响应。显然，服务器端方法更难实现，并且完全取决于您的服务器架构（您可以使用 COMET 实现）。

`m`如果您自己实现它，请小心，实际上可能会在客户端处理事件时发布一条新消息`success`（并错过`m`通知）。

根据需要配置您的 ajax 请求（处理其他事件）。

有趣的：

*   [COMET and PHP](https://stackoverflow.com/questions/603201/using-comet-with-php)
*   [CometD](http://cometd.org/) (COMET interface for PHP)

# javascript - 如何在 Javascript/jQuery 中的 DIV 中实现无限/无限滚动

> ID：15181286
> 
> 赞同：18
> 
> 时间：2013-03-03T01:00:39.390
> 
> 标签：javascript, jquery, html

我意识到这里有几个问题可以解决无限滚动的问题。然而，他们中的大多数都在使用插件。

我想知道如何实现与我现有的分页功能一起使用的无限滚动。目前我有一个“加载更多”按钮，当点击时，将获取接下来的 10 个项目，并附加到列表中。而不是在单击“加载更多”按钮时执行此操作，我希望它在滚动位置到达底部时发生。此外，此列表不在主页上，它位于 DIV 中。将页码存储在 ID 为“pageNum”的隐藏字段中。

```
$.ajax({
        type: "GET",
        url: "/GetItems",
        data: { 'pageNum': $('#pageNum').val() },
        dataType: "json",
        success: function (response) {
                $('#MyDiv ul').append(response.Html);
                $('#pageNum').val(response.PageNum);
            }
        }
});

#MyDiv
{
    border:solid 1px #ccc; 
    width:250px;
    height:500px;
    overflow-y: scroll;
}

<div id="MyDiv">
  <ul>
    <li>...</li>
    ...
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-03T04:37:06.973

最**简单的方法**是检查您是否已到达底部并触发“加载更多”按钮上的点击事件。

```
$(window).on('scroll', function(){
    if( $(window).scrollTop() > $(document).height() - $(window).height() ) {
        $("#load-more").click();
    }
}).scroll(); 
```

上面的脚本只是一个例子，不要在你的生产环境中使用它。

**更新**

...更好的方法是调用函数而不是触发调用函数的事件。

**更新2**

...以及最好的方法：让用户决定如果他这样做了要做什么（在这种情况下，他向下滚动以到达页面的末尾，而不是到达下一页）；）

# php - Jquery不会将数字传递给php

> ID：15181287
> 
> 赞同：1
> 
> 时间：2013-03-03T01:01:24.030
> 
> 标签：php, jquery, ajax-request

每次我尝试提交表单时，它只返回“E”并且只返回“E”，我不知道为什么会这样，有人可以帮我解决这个问题吗？

我尝试了很多方法，但我不能；似乎没有得到它应该返回的结果

**代码**

查询：

```
 $('#edit_ok_btn').click(function(e)
{
    e.preventDefault();
    $('#NoticeBox').hide("slide", { direction: "up" }, 500, function() {
    $('#NoticeBox').show("slide", { direction: "up" }, 500);
    $('#NoticeBox').removeClass()
    $('#NoticeBox').addClass('Box_Working')
    $('#noticeText').html("Processing page...");

    var formData = $('#EditorForm').serialize();
    submitWebPage(formData);

    });
});

    function submitWebPage(formData) {

$.ajax({    
    type: 'POST',
    url: 'PageProcessor.php',       
    data : {'formdata' : formData},
    dataType: 'json',
    cache: false,
    timeout: 7000,
    success: function(data) {   

    $('#NoticeBox').hide("slide", { direction: "up" }, 500, function() {

        if(data.error == false)
        {
            $('#NoticeBox').show("slide", { direction: "up" }, 500);
            $('#NoticeBox').removeClass()
            $('#NoticeBox').addClass('Box_Success')
            $('#noticeText').html(data.msg);
            $('#PageEditor').fadeOut(1000);

            $('#NoticeBox').delay(1000).hide("slide", { direction: "up" }, 500, function() {
            location.reload();
            });

        }
        else
        {
            $('#NoticeBox').show("slide", { direction: "up" }, 500);
            $('#NoticeBox').removeClass()
            $('#NoticeBox').addClass('Box_Error')
            $('#noticeText').html(data.error);
        }

    }); 

    },
    error: function(XMLHttpRequest, textStatus, errorThrown) {

    $('#responder').removeClass().addClass('Box_Error').html('<p>There was an ERROR!<strong></p>');

    }
}); 
```

PHP

```
$PageID         = $_POST['formdata']['EditID'];
$PageTitle      = $_POST['formdata']['PageTitle'];
$PageCategory   = $_POST['formdata']['CategoryList'];
$PageContent    = $_POST['formdata']['elm1'];
$PagePublished  = $_POST['formdata']['PublishPageOption'];

if($PageID == "NEW")
{

mysqli_query("INSERT INTO Web_Pages (Title, HTML, Category, Last_Author, Edit_Date, Published) VALUES ('".$PageTitle."','". $PageContent."','".$PageCategory."','LUX','".date("Y-m-d")."','".$PagePublished."') ");

        $return['error'] = false;
        $return['msg'] = '<i>'.$PageTitle.'</i> has been created successfully.'; 
        echo json_encode($return);
}
else
{
    mysqli_query("UPDATE Web_Pages SET Title = '".$PageTitle."', HTML = '".$PageContent."', Category = '".$PageCategory."', Last_Author='LUX', Edit_Date = '".date("Y-m-d")."', Published = '".$PagePublished."') WHERE ID = '".$PageID."' ");

        $return['error'] = false;
        $return['msg'] = '<i>'.$PageTitle.'</i> has been updated successfully.'; 
        echo json_encode($return);
} 
```

[**paste-bin 链接到源代码**](http://pastebin.com/S9PuieDs)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:04:11.123

您有一个不应该存在`)`的查询接近尾声，很可能是您忘记编辑的复制/粘贴/编辑的结果。`UPDATE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:21:37.240

我厌倦了这个错误！

```
 data: 'formData', 
```

这现在将被视为字符串而不是变量

我想你应该做这样的事情

```
data : {'formdata' : formData} 
```

从php你可以得到数据

```
$_POST['formdata']; 
```

# c# - 将工作单元与服务或 repo 分离

> ID：15181290
> 
> 赞同：7
> 
> 时间：2013-03-03T01:01:33.760
> 
> 标签：c#, model-view-controller, interface, repository-pattern, unit-of-work

我正在尝试将我的工作单元与我的服务或存储库分离，以便在我希望添加新服务时不必接触 UoW 代码。我该怎么做呢？

```
_categoryService = _unitOfWork.Get<ICategoryService>(); 
```

所以而不是

```
_unitOfWork.CategoryService.Add(category) 
```

我只能说；

```
_categoryService.Add(category); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-20T15:12:31.007

> 我正在尝试将我的工作单元与我的服务或存储库分离，以便在我希望添加新服务时不必接触 UoW 代码

嗯，这是一个好的开始！;-)

我提出的解决方案不是唯一可能的解决方案，有几种实现 UoW 的好方法（谷歌会帮助你）。但这应该给你一个大局。

首先，创建 2 个接口：IUnitOfWork 和 IRepository

```
public interface IUnitOfWork : System.IDisposable
{
  IRepository<TEntity> GetRepository<TEntity>() where TEntity : class;
  void Save();
}

public interface IRepository<T> : IDisposable where T : class
{
  void Add(T entity);
  void Delete(T entity);
  void Update(T entity);
  T GetById(long Id);
  IEnumerable<T> All();
  IEnumerable<T> AllReadOnly();
  IEnumerable<T> Find(Expression<Func<T, bool>> predicate);
} 
```

实现非常简单（出于可读性目的，我删除了所有评论，但不要忘记添加你的;-)）

```
public class UnitOfWork<TContext> : IUnitOfWork where TContext : IDbContext, new()
{
  private readonly IDbContext _ctx;
  private Dictionary<Type, object> _repositories;
  private bool _disposed;

  public UnitOfWork()
  {
    _ctx            = new TContext();
    _repositories   = new Dictionary<Type, object>();
    _disposed       = false;
  }

  public IRepository<TEntity> GetRepository<TEntity>() where TEntity : class
  {
    if (_repositories.Keys.Contains(typeof(TEntity)))
      return _repositories[typeof(TEntity)] as IRepository<TEntity>;

    var repository = new Repository<TEntity>(_ctx);
    _repositories.Add(typeof(TEntity), repository);
    return repository;
  }

  public void Save()
  {
     try
     {
       _ctx.SaveChanges();
     }
     catch (DbUpdateConcurrencyException ex)
     {
       ex.Entries.First().Reload();
     }
  }

  …
}

public class Repository<T> : IRepository<T> where T : class
{
  private readonly IDbContext _context;
  private readonly IDbSet<T> _dbset;

  public Repository(IDbContext context)
  {
    _context = context;
    _dbset   = context.Set<T>();
  }

  public virtual void Add(T entity)
  {
    _dbset.Add(entity);
  }

  public virtual void Delete(T entity)
  {
    var entry = _context.Entry(entity);
    entry.State = EntityState.Deleted;
  }

  public virtual void Update(T entity)
  {
    var entry = _context.Entry(entity);
    _dbset.Attach(entity);
    entry.State = EntityState.Modified;
  }

  public virtual T GetById(long id)
  {
    return _dbset.Find(id);
  }

  public virtual IEnumerable<T> All()
  {
    return _dbset.ToList();
  }

  public virtual IEnumerable<T> AllReadOnly()
  {
    return _dbset.AsNoTracking().ToList();
  }

  public IEnumerable<T> Find(Expression<Func<T, bool>> predicate)
  {
    return _dbset.Where(predicate);
  }

} 
```

如您所见，两种实现都使用了 IDbContext 接口。这个接口只是为了方便测试目的：

```
public interface IDbContext
{
  DbSet<T> Set<T>() where T : class;
  DbEntityEntry<T> Entry<T>(T entity) where T : class;
  int SaveChanges();
  void Dispose();
} 
```

（如您所见，我使用的是EntityFramework Code First）

现在整个管道都设置好了，让我们看看如何在服务中使用它。我有一个看起来像这样的基本服务：

```
internal class Service<T> where T : class
{
  internal Service(Infrastructure.IUnitOfWork uow)
  {
    _repository = uow.GetRepository<T>();
  }

  protected Infrastructure.IRepository<T> Repository
  {
    get { return _repository; }
  }

  private readonly Infrastructure.IRepository<T> _repository;
} 
```

我所有的服务都继承自这个基础服务。

```
internal class CustomerService : Service<Model.Customer>
{
  internal CustomerService(Infrastructure.IUnitOfWork uow) : base(uow)
  {   
  }

  internal void Add(Model.Customer customer)
  {
    Repository.Add(customer);
  }

  internal Model.Customer GetByID(int id)
  {
    return Repository.Find(c => c.CustomerId == id);
  }

} 
```

就是这样！

现在，如果您想以外观方法或其他方式将相同的 UoW 共享给多个服务，它可能看起来像这样：

```
using (var uow = new UnitOfWork<CompanyContext>())
{
  var catService = new Services.CategoryService(uow);
  var custService = new Services.CustomerService(uow);

  var cat = new Model.Category { Name = catName };
  catService.Add(dep);

  custService.Add(new Model.Customer { Name = custName, Category = cat });

  uow.Save();
} 
```

希望这可以帮助！

# matlab - 如何在 Matlab 中的单元格数组的每个单元格中插入一个数字？

> ID：15181294
> 
> 赞同：1
> 
> 时间：2013-03-03T01:01:53.323
> 
> 标签：matlab, cell-array

我有一个像这样的单元格数组：

```
 a = {[1 2 3]; [4 5]; [6 7 8 9]}; 
```

并希望在每个单元格的开头插入例如 10 以获得以下内容：

```
 >> a{:}

    ans =

        10     1     2     3

    ans =

        10     4     5

    ans =

        10     6     7     8     9 
```

是否可以在没有任何 for 循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T01:05:52.603

您可以将[CELLFUN](http://www.mathworks.com/help/matlab/ref/cellfun.html)与匿名函数一起使用：

```
b = cellfun(@(x)[10 x],a,'UniformOutput',0) 
```

* * *

为了回答@tmpearce 评论，我使用了一个简单的脚本来测量运行时间：

```
a = {[1 2 3]; [4 5]; [6 7 8 9]};
tic
a = cellfun(@(x)[10 x],a,'UniformOutput',0)
toc
a = {[1 2 3]; [4 5]; [6 7 8 9]}; 
tic
for ii=1:numel(a)
    a{ii} = [10 a{ii}];
end
toc 
```

结果：

```
Elapsed time is 0.002622 seconds.
Elapsed time is 0.000034 seconds. 
```

# java - System.currentTimeMillis() 的巨大差异

> ID：15181297
> 
> 赞同：1
> 
> 时间：2013-03-03T01:02:21.130
> 
> 标签：java, performance, delay, performance-testing, milliseconds

我正在使用这段小代码来测试哪种方法更快：

```
public void test() {
  long start = System.currentTimeMillis();
  MyDate date = new MyDate();
  int max = 5000;

  for (int i = 0; i < max; i++) {
    Calendar.getInstance().getTimeInMillis(); // <--
  }

  System.out.println("Calendar instance delay: " + (System.currentTimeMillis() - start));
  start = System.currentTimeMillis();

  for (int i = 0; i < max; i++) {
    date.getMillis(); // <--
  }

  System.out.println("My date delay: " + (System.currentTimeMillis() - start));
} 
```

所以，基本上，我**试图**比较 和 之间的性能`Calendar.getInstance().getTimeInMillis()`（`MyDate.getMillis()`MyDate 是我创建的一个类）。

好吧，当我运行上面的代码时，输​​出是：

```
Calendar instance delay: 413
My date delay: 2 
```

**但是**，当我颠倒订单时（首先称为 MyDate，在 Calendar 之后），我得到：

```
My date delay: 247
Calendar instance delay: 119 
```

我尝试使用`System.nanoTime()`，但发生了同样的事情：要测试的第一个代码是花费更长时间的代码。

任何人都知道为什么会发生这种差异？或者，有没有一种方法可以在不使用外部分析器应用程序（只是纯 Java 代码）的情况下准确地分析代码？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T01:05:46.283

要测试“小”代码的性能，您必须多次调用它。否则，JIT、缓存和分支预测的影响会扰乱您的测试。如果我打电话给你，看看你需要多长时间才能接听，如果我只是几秒钟前给你打电话，我会得到一个非常不同的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:08:26.063

commons lang 中有 StopWatch 类，它使用 System.nanoTime，

[http://commons.apache.org/lang/](http://commons.apache.org/lang/)

org.apache.commons.lang.time.StopWatch

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T11:33:06.763

在测量性能时，请记住 JVM 可能会在优化过程中消除没有副作用的代码。

为避免这种情况，您可以执行以下操作：

```
for (int i = 0; i < max; i++) {
    long a = date.getMillis();
    if (a % 1000 == i) {
        System.out.print(a);
    }
} 
```

另一件需要注意的是热点优化。您应该在测量之前“预热”您的代码。

# clojure - 如何使用 Clojure 查找元素最后一次出现的位置？

> ID：15181302
> 
> 赞同：3
> 
> 时间：2013-03-03T01:03:10.663
> 
> 标签：clojure

我想找到一个元素在序列中最后出现的位置。测试我想出的一些解决方案，

```
user> (def numbers (repeatedly 100 #(rand-int 100)))
#'user/numbers

user> (time ((zipmap numbers (range)) 22))
"Elapsed time: 0.865193 msecs"
90

user> (time (last (keep-indexed #(if (= 22 %2) %1) numbers)))
"Elapsed time: 1.600483 msecs"
90 
```

有没有更简洁的内置功能可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:05:43.477

您可以`lastIndexOf`在将对象转换为正确类型后使用：

```
(.lastIndexOf numbers (int 22)) 
```

该方法记录在这里：[http://docs.oracle.com/javase/6/docs/api/java/util/List.html#lastIndexOf(java.lang.Object)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#lastIndexOf(java.lang.Object))

# sql - 如何强制id自动增加

> ID：15181306
> 
> 赞同：1
> 
> 时间：2013-03-03T01:03:42.820
> 
> 标签：sql, sqlite

```
CREATE TABLE mytable(
     id INTEGER,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
); 
```

这里 id 不一定会自动递增。那么我怎么能强迫它这样做呢？

使用 SQL 精简版

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:08:20.400

```
CREATE TABLE mytable(
     id INTEGER PRIMARY KEY AUTOINCREMENT,
     name CHAR(30) NOT NULL,
); 
```

在 sqlite 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:06:26.650

如果您使用的是 MySQL，您将需要使用 AUTO_INCREMENT，例如：

```
CREATE TABLE mytable(
     id INT auto_increment,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) 
```

如果您使用的是 Microsoft SQL，请使用 IDENTITY，例如：

```
CREATE TABLE mytable(
     id INT IDENTITY,
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
) 
```

编辑：由于您使用的是 SQL Lite，请看一下：[http ://www.sqlite.org/autoinc.html](http://www.sqlite.org/autoinc.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:06:36.190

如果您使用的是 SQL-Server，请使用[`IDENTITY`](http://msdn.microsoft.com/en-us/library/ms186775%28v=sql.90%29.aspx)

```
CREATE TABLE mytable(
     id INTEGER IDENTITY(1,1),
     name CHAR(30) NOT NULL,
     PRIMARY KEY (id)
); 
```

[**演示**](http://sqlfiddle.com/#!6/b876d/1/0)

# python - SimpleCV 网络摄像头 getImage() 错误（没有属性“线程”）

> ID：15181308
> 
> 赞同：5
> 
> 时间：2013-03-03T01:03:47.097
> 
> 标签：python, webcam, simplecv

我正在尝试运行一个基本脚本，以在 64 位 Linux Mint 12 上使用 SimplecCV 1.3.0 和 Logitech HD C270 网络摄像头（也尝试过 Logitech tessar 2.0/3.7）从我的网络摄像头获取信息。

当我运行以下脚本时

```
from SimpleCV import *

cam = Camera()
while(True):
    img = cam.getImage()
    img.show() 
```

弹出一个窗口，我可以看到一个摄像头供稿。但是，在看似随机的时刻，Feed 将冻结并在每个`img = cam.getImage()`

```
VIDIOC_DQBUF: No such device
libv4l2: error dequeuing buf: No such device 
```

从那时起，当我尝试运行相同的脚本时，窗口会打开片刻，然后消失，并且在`img = cam.getImage()`我的脚本行中出现以下错误：

```
File "/usr/lib/pymodules/python2.7/SimpleCV/Camera.py", line 579, in getImage
  if (not self.threaded):
AttributeError: Camera instance has no attribute 'threaded' 
```

此错误一直存在，直到我重新启动计算机并且无论我的网络摄像头是否插入都会发生。尽管如此，其他网络摄像头软件（例如奶酪）仍然可以与摄像头交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T23:17:49.530

您是否尝试过类似的操作：

```
cam = Camera(0)? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-17T10:17:24.583

这通常意味着相机对 SimpleCV 不可用。原因不一

*   相机被另一个进程使用并被锁定
*   在 BIOS 下被禁用
*   没有为相机安装驱动程序。
*   任何其他特定于您的发行版的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-06T13:18:21.873

我看到这个问题是很久以前发布的。因此，对于将来会遇到此问题的人。

您确定网络摄像头可以正常工作吗？最好先使用访问网络摄像头的软件检查网络摄像头。像网络摄像头：

`sudo apt-get install webcam`

在我的 PC (Lubuntu 15.04) 上，确保网络摄像头正常工作后，我可以运行代码。

顺便说一句，两种情况

`cam = Camera(0)`和`cam = Camera()`

工作正常。

# graphics - 深度缓冲区和 Z 轴

> ID：15181309
> 
> 赞同：2
> 
> 时间：2013-03-03T01:03:58.347
> 
> 标签：graphics, opengl-es, 3d, depth-buffer

我正在阅读一本 OpenGl 的书，其中指出了两个看似矛盾的陈述：

1.  相机位于原点并向下注视负 z 轴。
2.  深度缓冲区清除为默认值 1.0，具有较低 Z 值的像素通过可见性测试以显示在屏幕上。

虽然我了解深度缓冲区的概念，但我不明白为了通过深度缓冲区测试，如何确定小于另一个 Z 的 Z 值“位于”*较高*Z 值的“前面”。

我希望更高的 Z 值在“前面”，从而赢得深度缓冲区比较。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:19:44.383

在*模型视图转换*之后，所有点都位于“视图坐标”中，其中相机位于原点，向下看 -z 轴。然后这些点通过*投影变换*，然后位于“剪辑坐标”中，此处 z 值映射到范围 [-1,+1]。*近平面*上的点的 z 值为 -1， *远平面*上的点的 z 值为 +1。

这适用于所有预测。管道期望所有坐标值在裁剪和透视分割后都在 [-1,+1] 范围内——这里的点是*标准化的设备坐标。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:12:44.423

Z 缓冲区中的值在范围内`[0.0,1.0]`，`1.0`是实际包含在平截头体中的更远距离（超出的任何内容均不可见）。

这意味着在绘制形状的像素时，如果其 Z 值低于当前值，则它比之前的位置更靠近眼睛（没有或只是另一个像素），因此更新 Z 并绘制像素。否则像素被丢弃。

# python - 函数和numpy数组预分配

> ID：15181310
> 
> 赞同：2
> 
> 时间：2013-03-03T01:04:04.633
> 
> 标签：python, performance, function, numpy

如何优化涉及 numpy 数组的函数？

用例：

```
def create_array_and_fill(a, b, N):
    res = np.zeros(N, N)

    res[0] = a
    res[-1] = b

    return res

c = create_array_and_fill(5, 9, 100) 
```

但是，有时，我事先知道我需要使用的所有数组的最大大小（例如用于测试目的），那么最好的方法是什么？我应该预先分配吗？最好的方法是什么？例如，我可以将一个预先分配的数组传递给一个函数，以便该函数只更新它而不是返回一个新数组吗？

我的第一个想法如下，但当然，这是有代价的，我现在必须更改所有函数签名。

```
def create_array_and_fill(a, b, N, res):

    res[0] = a
    res[-1] = b

    # No more return here?

c = np.zeros(N, N)
create_array_and_fill(a, b, N, c) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:52:49.683

如果我明白你在问什么，你可以这样做：

```
def fill_array(a, b, N, out=None):
    if out is None:
        out = np.zeros(N, N)
    out[0] = a
    out[-1] = b
    return out 
```

如果提供了一个对象，这会修改`out`对象，如果没有提供，则返回一个新对象`out`。在这种情况下，即使修改现有值，它仍然返回值，但是如果提供了 expl;icit，您可以轻松地将其修改为返回 None `out`。

但是，是的，如果您希望它们以任何一种方式工作（使用给定的“输出”数组或创建新数组），您将不得不更改您的函数。如果您在创建新数组的函数中编写代码，则没有神奇的方法可以让它不执行该代码，因为您预先创建了另一个数组。您必须编辑您的功能。

# python - 将 DictVectorizer 与 sklearn DecisionTreeClassifier 一起使用

> ID：15181311
> 
> 赞同：12
> 
> 时间：2013-03-03T01:04:09.750
> 
> 标签：python, machine-learning, scikit-learn

我尝试使用 python 和 sklearn 启动决策树。工作方法是这样的：

```
import pandas as pd
from sklearn import tree

for col in set(train.columns):
    if train[col].dtype == np.dtype('object'):
        s = np.unique(train[col].values)
        mapping = pd.Series([x[0] for x in enumerate(s)], index = s)
        train_fea = train_fea.join(train[col].map(mapping))
    else:
        train_fea = train_fea.join(train[col])

dt = tree.DecisionTreeClassifier(min_samples_split=3,
                             compute_importances=True,max_depth=5)
dt.fit(train_fea, labels) 
```

现在我尝试用 DictVectorizer 做同样的事情，但我的代码不起作用：

```
from sklearn.feature_extraction import DictVectorizer

vec = DictVectorizer(sparse=False)
train_fea = vec.fit_transform([dict(enumerate(sample)) for sample in train])

dt = tree.DecisionTreeClassifier(min_samples_split=3,
                             compute_importances=True,max_depth=5)
dt.fit(train_fea, labels) 
```

我在最后一行出现错误：“ValueError：标签数=332448 与样本数=55 不匹配”。正如我从文档中了解到的那样，DictVectorize 旨在将名义特征转换为数字特征。我做错了什么？

更正（感谢 ogrisel 推动我举一个完整的例子）：

```
import pandas as pd
import numpy as np
from sklearn import tree

##################################
#  working example
train = pd.DataFrame({'a' : ['a', 'b', 'a'], 'd' : ['e', 'e', 'f'],
                  'b' : [0, 1, 1], 'c' : ['b', 'c', 'b']})
columns = set(train.columns)
columns.remove('b')
train_fea = train[['b']]

for col in columns:
    if train[col].dtype == np.dtype('object'):
        s = np.unique(train[col].values)
        mapping = pd.Series([x[0] for x in enumerate(s)], index = s)
        train_fea = train_fea.join(train[col].map(mapping))
    else:
        train_fea = train_fea.join(train[col])

dt = tree.DecisionTreeClassifier(min_samples_split=3,
                         compute_importances=True,max_depth=5)
dt.fit(train_fea, train['c'])

##########################################
# example with DictVectorizer and error

from sklearn.feature_extraction import DictVectorizer

vec = DictVectorizer(sparse=False)
train_fea = vec.fit_transform([dict(enumerate(sample)) for sample in train])

dt = tree.DecisionTreeClassifier(min_samples_split=3,
                         compute_importances=True,max_depth=5)
dt.fit(train_fea, train['c']) 
```

最后的代码是在 ogrisel 的帮助下修复的：

```
import pandas as pd
from sklearn import tree
from sklearn.feature_extraction import DictVectorizer
from sklearn import preprocessing

train = pd.DataFrame({'a' : ['a', 'b', 'a'], 'd' : ['e', 'x', 'f'],
                  'b' : [0, 1, 1], 'c' : ['b', 'c', 'b']})

# encode labels
labels = train[['c']]
le = preprocessing.LabelEncoder()
labels_fea = le.fit_transform(labels) 
# vectorize training data
del train['c']
train_as_dicts = [dict(r.iteritems()) for _, r in train.iterrows()]
train_fea = DictVectorizer(sparse=False).fit_transform(train_as_dicts)
# use decision tree
dt = tree.DecisionTreeClassifier()
dt.fit(train_fea, labels_fea)
# transform result
predictions = le.inverse_transform(dt.predict(train_fea).astype('I'))
predictions_as_dataframe = train.join(pd.DataFrame({"Prediction": predictions}))
print predictions_as_dataframe 
```

一切正常

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-03T09:21:29.183

您枚举样本的方式没有意义。只需打印它们以使其明显：

```
>>> import pandas as pd
>>> train = pd.DataFrame({'a' : ['a', 'b', 'a'], 'd' : ['e', 'e', 'f'],
...                       'b' : [0, 1, 1], 'c' : ['b', 'c', 'b']})
>>> samples = [dict(enumerate(sample)) for sample in train]
>>> samples
[{0: 'a'}, {0: 'b'}, {0: 'c'}, {0: 'd'}] 
```

现在，这在语法上是一个 dicts 列表，但与您期望的完全不同。尝试这样做：

```
>>> train_as_dicts = [dict(r.iteritems()) for _, r in train.iterrows()]
>>> train_as_dicts
[{'a': 'a', 'c': 'b', 'b': 0, 'd': 'e'},
 {'a': 'b', 'c': 'c', 'b': 1, 'd': 'e'},
 {'a': 'a', 'c': 'b', 'b': 1, 'd': 'f'}] 
```

这看起来好多了，现在让我们尝试对这些字典进行矢量化：

```
>>> from sklearn.feature_extraction import DictVectorizer

>>> vectorizer = DictVectorizer()
>>> vectorized_sparse = vectorizer.fit_transform(train_as_dicts)
>>> vectorized_sparse
<3x7 sparse matrix of type '<type 'numpy.float64'>'
    with 12 stored elements in Compressed Sparse Row format>

>>> vectorized_array = vectorized_sparse.toarray()
>>> vectorized_array
array([[ 1.,  0.,  0.,  1.,  0.,  1.,  0.],
       [ 0.,  1.,  1.,  0.,  1.,  1.,  0.],
       [ 1.,  0.,  1.,  1.,  0.,  0.,  1.]]) 
```

要获取每列的含义，请询问矢量化器：

```
>>> vectorizer.get_feature_names()
['a=a', 'a=b', 'b', 'c=b', 'c=c', 'd=e', 'd=f'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:25:18.453

`vec.fit_transform`返回一个稀疏数组。而 IIRC`DecisionTreeClassifier`在这方面表现不佳。

在将其传递`train_fea = train_fea.toarray()`给`DecisionTreeClassifier`.

# wordpress - 我有 2 个导航菜单 (PHP)，但我不知道如何删除一个而不破坏这段代码中的另一个：

> ID：15181327
> 
> 赞同：0
> 
> 时间：2013-03-03T01:06:36.890
> 
> 标签：wordpress

我在 WordPress PHP 网站上有一个导航菜单——称为**Primary Menu**。我正在尝试使用在我创建的小部件区域中创建的大型菜单覆盖默认导航菜单。

**这是问题所在：**

我想在我创建的小部件区域中拥有菜单“ **my_mega_menu** ”。但是 inkthemes_nav() 函数添加了本机主题菜单。当我注释掉它时，它只显示我希望它显示的菜单，但它破坏了菜单的功能；下拉菜单不会下拉到子菜单中。

有谁知道是否可以消除 inkthemes_nav 本机菜单，但保留我创建的超级菜单的功能？

![双人菜单](../Images/6058d5d8acd711a1038ecf370d6d685d.png)

**这是我的 header.php 中的代码：**

```
<div class="menu-bar">
<div id="MainNav">                  
<a href="#" class="mobile_nav closed"><?php _e('Pages Navigation Menu', 'colorway'); 
?><span></span></a>    

<?php inkthemes_nav(); ?>            
<?php /* Widgetized sidebar */
if ( !function_exists('dynamic_sidebar') || !dynamic_sidebar('my_mega_menu') ) : ?>
<?php endif; ?>            
</div>
<div class="clearfix"></div>
</div>
<!--End MenuBar-->
</div> 
```

如果这个问题更适合 wordpress.stackexchange 论坛，请迁移它......但我觉得它更像是一个基于 php 的问题。感谢任何人提供的任何指导，为我指明正确的方向（我应该寻找什么，做什么等）！

# android - 在android中隐藏和显示表格

> ID：15181335
> 
> 赞同：0
> 
> 时间：2013-03-03T01:08:00.510
> 
> 标签：android, button, visibility, tablelayout, onclicklistener

我创建了两张表格，一张在左侧，一张在屏幕中央。当您启动应用程序时，左侧的表格设置为可见，中间的表格设置为不可见。

现在我想单击左表（Buton_left）中的一个按钮，中心的整个表将变得可见。

到目前为止我有这种方法，但它似乎不起作用。任何帮助或建议将不胜感激。如果您需要更多信息，请告诉我。

```
 package com.example.musicapp;
  import android.os.Bundle;

   public class Tbl_Show_Hide extends Activity implements OnClickListener {

   @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TableLayout table_left = (TableLayout)findViewById(R.id.table_left);
    TableLayout table_center = (TableLayout)findViewById(R.id.table_center);
    Button Buton_left = (Button)findViewById(R.id.Buton_left);

    table_left.setOnClickListener(this);
    table_center.setOnClickListener(this);
    Buton_left.setOnClickListener(this);

    }

      @Override
      public void onClick(View v) {

    boolean visible = true;
    int targetId = v.getId();
    if(targetId == R.id.Buton_left)
    {
        if(visible)
                    {
        if(table_center.getVisibility() == View.INVISIBLE)
        {
            table_center.setVisibility(View.VISIBLE);
        }
        }

        } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:29:57.090

[View#getVisibility](http://developer.android.com/reference/android/view/View.html#getVisibility%28%29)可能返回[VISIBLE](http://developer.android.com/reference/android/view/View.html#VISIBLE)、[INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)或[GONE](http://developer.android.com/reference/android/view/View.html#GONE)之一。而你在 onCreate 方法中创建 table_center，这是一个局部变量，对 onClick 不可见。

所以改成：

```
public class Tbl_Show_Hide extends Activity implements OnClickListener {
    final TableLayout table_left = (TableLayout)findViewById(R.id.table_left);
    final TableLayout table_center = (TableLayout)findViewById(R.id.table_center);
    final Button Buton_left = (Button)findViewById(R.id.Buton_left);

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    table_left.setOnClickListener(this);
    table_center.setOnClickListener(this);
    Buton_left.setOnClickListener(this);

    }

      @Override
      public void onClick(View v) {

    int targetId = v.getId();
    if(targetId == R.id.Buton_left)
    {

        if(table_center.getVisibility() != View.VISIBLE)
        {
            table_center.setVisibility(View.VISIBLE);
        }
    }
} 
```

如果问题仍然存在，请发布您的清单。

# php - 函数适用于 jquery 1.4.2 但不适用于 jquery 1.9.1

> ID：15181346
> 
> 赞同：2
> 
> 时间：2013-03-03T01:08:50.620
> 
> 标签：php, javascript, jquery, ajax

我有这个脚本用于向我的数据库提交一些数据。它在 1.4.2 上运行良好，但我使用的模板需要 1.9.1，所以我更新了我的网站。我遇到的问题是，当我尝试调用相同的函数时出现错误。

这是我的js代码：

```
function drilldown(row_id){  
var dealID = document.getElementById('dealID'+ row_id).value;
var specialnotes = document.getElementById('specialnotes'+ row_id).value;
var ready = document.getElementById('ready'+ row_id).value;
var initials = document.getElementById('initials'+ row_id).value;
var forcust = document.getElementById('forcust'+ row_id).value;
var notes = document.getElementById('notes'+ row_id).value;

$.ajax({
    url: "savedrilldown.php",  
    type: "GET",
      //pass data like this 
    data: {dealID:dealID,specialnotes:specialnotes,ready:ready,initials:initials,forcust:forcust,notes:notes},    
    cache: false,
    success: function(data) {  
    if (data=="1")
    alert("Record updated!" );  
    } 

});  
} 
```

这是萤火虫向我展示的错误：

```
TypeError: $ is undefined [Break On This Error]     
$.ajax({ 
```

这是我正在加载的内容：

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery-migrate-1.1.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.min.js"></script> 
```

任何建议将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T01:12:19.247

$ 基本上是 jQuery 调用，如果它没有被定义，它不会因为某种原因加载你的 jquery。

确保 jquery 已正确加载，并且在执行 jquery ajax 之前已加载。

另外我想建议使用 json 和数据类型 json 来传输数据，因为它具有通过 json 传输的完美形式。

# android - 带有列表视图的上下文操作栏，setselected 不起作用

> ID：15181347
> 
> 赞同：3
> 
> 时间：2013-03-03T01:08:52.477
> 
> 标签：android, android-listview, event-listener, contextual-action-bar

我正在尝试制作一个上下文相关的`ActionBar`. 我使用了 android devpage 中的示例，但我仍然没有让它工作。我在 onitemlongclick 上设置了一个事件监听器，但`setSelected(true)`它似乎没有做任何事情。我知道该事件被触发，因为它`actionmode`已打开，但它没有选择任何项目。

`longclicklistener`是在 a 中`fragment`，由 a在一个活动中持有，该`viewpager`活动持有 的几个实例`fragment`。我希望能够从页面中选择项目，然后对选择进行一些操作。

我当前的代码：

片段：

```
AdapterView.OnItemLongClickListener onLongClick = new AdapterView.OnItemLongClickListener() {
    // Called when the user long-clicks on someView
    @Override
    public boolean onItemLongClick(AdapterView<?> adapterView, View view,
            int i, long l) {
        MainActivity parent = (MainActivity)getActivity();
        if (parent.actionMode != null) {
            return false;
        }

        parent.actionMode = getActivity().startActionMode(parent.actionModeCallback);
        view.setSelected(true);
        return true;
    }
}; 
```

活动中的动作模式回调

```
public ActionMode.Callback actionModeCallback = new ActionMode.Callback() {

    // Called when the action mode is created; startActionMode() was called
    @Override
    public boolean onCreateActionMode(ActionMode mode, Menu menu) {
        // Inflate a menu resource providing context menu items
        MenuInflater inflater = mode.getMenuInflater();
        inflater.inflate(R.menu.contextual_actionbar, menu);
        return true;
    }

    // Called each time the action mode is shown. Always called after onCreateActionMode, but
    // may be called multiple times if the mode is invalidated.
    @Override
    public boolean onPrepareActionMode(ActionMode mode, Menu menu) {
        return false; // Return false if nothing is done
    }

    // Called when the user selects a contextual menu item
    @Override
    public boolean onActionItemClicked(ActionMode mode, MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_remove_list:
                mode.finish(); // Action picked, so close the CAB
                return true;
            default:
                return false;
        }
    }

    // Called when the user exits the action mode
    @Override
    public void onDestroyActionMode(ActionMode mode) {
        actionMode = null;
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-05-01T12:24:51.967

这是一个旧帖子，但对于所有新人......

对于设置选择时更改颜色的视图，您需要使用 [颜色状态列表](https://developer.android.com/guide/topics/resources/color-list-resource.html)。颜色状态列表是一个 xml 资源文件，它根据视图所处的状态指定应应用哪种样式（选定是这些状态之一）。像这样的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:color="@color/textColor" android:drawable="@color/Background" android:state_selected="true"/>
<item android:color="@color/textColor" android:drawable="@color/Background"/>

</selector> 
```

在此处保存 XML 文件：`res/color/filename.xml`.

您必须在此 XML 资源的视图上设置您的`android:background`（您需要根据状态更改的任何属性，即）。`android:textColor`

然后，当您`setSelected(true)`应用适当的样式时。请注意，`@drawable`用于背景颜色，而`@color`用于其他组件，例如文本颜色。

# java - 使用正则表达式将字符串与 JSON 字符串匹配

> ID：15181350
> 
> 赞同：0
> 
> 时间：2013-03-03T01:09:43.067
> 
> 标签：java, regex, json, pattern-matching

在我下面的代码中，`colData`stores `JSON String`。colData 的示例示例-

> {"lv":[{"v":{"tenureSiteReg":null,"bghtItms":48,"pnlValue":105.478409,"byrSgmnt":2,"cstmrId":"814296998","slrRevRnk":-99.0 ,"soldItms":0,"slrSgmnt":6,"byrRevRnk":0.013,"mainAcct":78,"gmv":0.0,"cstmrRevRnk":0.021,"pnlRev":313.438843,"cstmrSgmnt":51," gmb":4674.76,"totalVal":142.536293,"userId":493},"cn":42}],"lmd":20130}

现在我正在尝试将`id`value 与`userId`上面的 value 匹配`JSON String`。这意味着如果`id`值`493`在上面的 JSON 字符串中，那么`userId`值也应该是`493`. 在 JSON 字符串中，可能有很多，`userId values`所以所有`userId`值都应该与`id`. 如果其中任何一个不匹配，则记录异常。

所以我正在尝试这样的事情-

```
private static final Pattern USER_ID_PATTERN = Pattern.compile("userId:\\d+");

for (String str : colData) {
    Matcher matcher = USER_ID_PATTERN.matcher(str);

        while (matcher.find()) {
            if (!matcher.group().equals("userId:"+id))
                 System.out.println("LOG exception");

            }
} 
```

但是对于上面的 JSON 字符串，它也不会进入内部`while loop`。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T06:53:57.377

就像评论中提到的 Hot Lips 一样，您应该为此使用 JSON 处理器。

[这是一个使用Jackson JSON Processor](http://jackson.codehaus.org/)的基本示例。我认为这`id`是一个单独的字符串，因为我在 JSON 中没有看到它。

```
import java.io.IOException;
import java.util.List;

import org.codehaus.jackson.JsonNode;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.map.ObjectMapper;

class Test {
    public static void main(String[] args) {
        String json = "{\"lv\":[{\"v\":{\"tenureSiteReg\":null,\"bghtItms\":48," +
                "\"pnlValue\":105.478409,\"byrSgmnt\":2,\"cstmrId\":\"814296998\",\"slrRevRnk\":-99.0," +
                "\"soldItms\":0,\"slrSgmnt\":6,\"byrRevRnk\":0.013,\"mainAcct\":78,\"gmv\":0.0," +
                "\"cstmrRevRnk\":0.021,\"pnlRev\":313.438843,\"cstmrSgmnt\":51,\"gmb\":4674.76," +
                "\"totalVal\":142.536293,\"userId\":493},\"cn\":42}],\"lmd\":20130}";
        String id = "493";

        ObjectMapper mapper = new ObjectMapper();

        try {
            JsonNode rootNode = mapper.readTree(json);
            List<JsonNode> userIds = rootNode.findValues("userId");         
            for (JsonNode node : userIds)
            {
                if (!id.equals(node.toString())) {
                    System.out.println("Log exception: id "+id+" != userId "+node);
                    break;
                } else {
                    System.out.println("Congratulations! id "+id+" = userId "+node);
                }               
            }
        } catch (JsonProcessingException e) {
            System.out.println("JsonProcessingException: ");
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("IOException: ");
            e.printStackTrace();
        }
    }
} 
```

运行此类会产生：

```
Congratulations! id 493 = userId 493 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:40:16.897

也许您只是缺少双引号？

```
"userId:"493 
```

试试这个模式：

```
"userId\":(\\d+)" 
```

同样，您需要 matcher.group().equals(..) 中的 \"

# rotation - 在 Three.js 中基于父/其他对象坐标系保持对象旋转？

> ID：15181351
> 
> 赞同：3
> 
> 时间：2013-03-03T01:10:10.340
> 
> 标签：rotation, coordinates, three.js, transform, webgl

我试图保持子对象的旋转与添加到父对象（即相机）之前的旋转相同。

我正在使用 Three.js'`worldToLocal`来保持位置，但由于父级的位置和旋转，旋转会发生变化。

**“捡”**前后****：**
![拾取前的立方体截图。](../Images/e5874e2b36e46daa67d51cd9fe4d154c.png) ![拾取后立方体的屏幕截图，位置不变，但旋转发生了变化。](../Images/847abbd33333ba09d500c3f925013033.png)**

 **注意立方体如何保持位置（感谢`worldToLocal`）但旋转发生变化。

**编辑：**我希望能够将立方体的初始旋转设置为与添加到父对象之前相同。之后，我希望孩子能够正常行动并像父母一样旋转/翻译。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T05:26:25.273

要从场景中移除孩子并将其添加到新的父级，同时保持孩子的世界位置和方向，请执行以下操作：

```
parent.attach( child ); 
```

注意：如果`parent`是`camera`，你必须记住将相机添加到场景中：

```
scene.add( camera ); 
```

目前不要求相机是场景的一部分。

三.js r.109**

# c++ - 从指向 std::array 的指针中获取类型 使用 [] 运算符？

> ID：15181352
> 
> 赞同：0
> 
> 时间：2013-03-03T01:10:12.373
> 
> 标签：c++, templates, c++11, return

我的代码中有一个类可以`std::array<T1, N>`与一个函数相媲美：

```
template <class T2>
inline void f(T2* const myarray)
{
    std::pair<double, /*SOMETHING*/> x;
} 
```

假设这`T2*`是一个指向我的类的指针`std::array<T1, N>`，我想知道我必须写什么而不是从操作符`/*SOMETHING*/`那里得到什么？`T1``[]``myarray`

注意：我不需要更聪明的方法来从指向的指针中获取类型`std::array`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T03:31:58.300

这对我有用：

```
#include <type_traits>
#include <array>
#include <utility>

template <class T2>
inline void f(T2* const myarray)
{
    std::pair<double, typename T2::value_type> x;
    static_assert(std::is_same<decltype(x.second), int>::value, "");
}

int
main()
{
    std::array<int, 2> a;
    f(&a);
} 
```

如果您的“类数组”类模板没有`value_type`，则以下内容也应该有效：

```
std::pair<double, typename std::remove_reference<decltype((*myarray)[0])>::type> x; 
```

但是仅供参考，通常不使用 const 限定参数，并且在 C++11 中，如果您碰巧返回参数（如下所示），甚至会感到悲观：

```
return myarray; 
```

虽然在这种情况下`myarray`是一个指针，但在这种情况下它是 const 并不重要。

如果您的意思是：

```
inline void f(T2 const* myarray) 
```

（指向 a的指针`const T2`，而不是指向 a 的`const`指针`T2`）

那么上面的配方需要稍微调整一下：

```
std::pair<double, typename std::remove_const<
                                   typename std::remove_reference<
                                      decltype((*myarray)[0])
                                   >::type
                                >::type> x; 
```

如果您的“类数组”类模板确实有`value_type`，那么第一个建议：

```
std::pair<double, typename T2::value_type> x; 
```

无论在哪里`const`都可以使用。

# java - 如何检查 ArrayList 中的所有项目？

> ID：15181353
> 
> 赞同：2
> 
> 时间：2013-03-03T01:10:38.183
> 
> 标签：java, android, checkbox, arraylist, android-listview

我从 SQLite 数据库中读取文本消息，然后将其放入一个数组列表中，该列表以`simple_list_item_multiple_choice`

这就是我目前检查列表中各个项目的方式。（此代码在我的 onclick 中）

```
 final  TextMessagesList backupSms = new TextMessagesList(txtList);
                    String selected = "";
                    int cntChoice =  smsListView.getCount();
                    SparseBooleanArray sparseBooleanArray = smsListView.getCheckedItemPositions();
                    for(int i = 0; i < cntChoice; i++){
                        if(sparseBooleanArray.get(i)) {
                            selected += smsListView.getItemAtPosition(i).toString() + "\n";

                        }
                    }
Toast.makeText(Backup.this,selected,Toast.LENGTH_LONG).show(); 
```

我可以选择单个复选框，然后为已选择的内容敬酒。我的问题是当我检查列表中的第一项时如何检查/所有项目

谁能帮我弄清楚下一步我需要做什么？

提前感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:11:20.030

尽管伊曼纽尔的回答应该使复选框被选中，但不能确定 ListView 也会知道哪些项目被选中，哪些未被选中。为了安全起见，我会使用[`getCount()`](http://developer.android.com/reference/android/widget/AdapterView.html#getCount%28%29)and[`setItemChecked()`](http://developer.android.com/reference/android/widget/AbsListView.html#setItemChecked%28int,%20boolean%29)代替：

```
for (int x = 0; x < smsListView.getCount(); x++) {
    smsListView.setItemChecked (x, true);
} 
```

要取消选中所有内容，请遵循相同的模板，但将 替换`true`为`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:52:43.293

您的问题与您的代码一起留下了一些解释空间。根据我的解释，这可能是该问题的答案：

```
int count = smsListView.getChildCount();
for (int i = 0; i < count; i++) {
    CheckedTextView v = (CheckedTextView) smsListView.getChildAt(i);
    v.setChecked(true);
} 
```

如果这不是您需要的，请详细说明问题。

# iphone - Cocos2dx iOS Approved App 崩溃

> ID：15181356
> 
> 赞同：5
> 
> 时间：2013-03-03T01:11:21.400
> 
> 标签：iphone, ios, cocos2d-iphone, cocos2d-x

所以我在这个极其奇怪和烦人的问题上被困了几天。所以我有一个应用程序，我发布到 ios 应用程序商店，我最近回去为应用程序添加了一些额外的功能。我没有触及应用程序的核心，只是添加了 twitter、facebook、应用内购买和 google admob（基于完整版的免费版）。所以这就是事情变得奇怪的地方。我测试了我的更新我制作了一个临时版本并在我的 iphone 3gs、4s、ipad 2 上进行了测试——完全没有问题。我提交给苹果，他们批准了更新并发布了。我更新了应用程序并尝试运行它，但在启动画面后立即崩溃（这里再次没有任何更改）。我的项目使用 cocos2dx 框架（版本 cocos2d-2.0-x-2.0.4 @ Nov 02 2012），我使用 cocosbuilder（2.1）。我查看了日志，这似乎是 CCBReader::readFloat() 函数内部的未对齐问题。我发现这里有一个解决方法：[https://github.com/DarraghCoy/cocos2d-x/commit/34b31fd754778f815fcac108089e3fe015e2e2b9](https://github.com/DarraghCoy/cocos2d-x/commit/34b31fd754778f815fcac108089e3fe015e2e2b9)。

所以我继续修改了我的默认情况：float CCBReader::readFloat() { unsigned char type = this->readByte();

```
 switch (type) {
            case kCCBFloat0:
                return 0;    
            case kCCBFloat1:
                return 1;
            case kCCBFloatMinus1:
                return -1;
            case kCCBFloat05:
                return 0.5f;
            case kCCBFloatInteger:
                return (float)this->readInt(true);
            default:
                {
                    /* using a memcpy since the compiler isn't
                     * doing the float ptr math correctly on device.
                     * TODO still applies in C++ ? */
                    float * pF = (float*)(this->mBytes + this->mCurrentByte);
                    float f = 0;

                    memcpy( &f, pF, sizeof(float));
                    this->mCurrentByte += 4;

                    return f;
                }
        }
    } 
```

对此：

```
 float CCBReader::readFloat() {
        unsigned char type = this->readByte();

        switch (type) {
            case kCCBFloat0:
                return 0;    
            case kCCBFloat1:
                return 1;
            case kCCBFloatMinus1:
                return -1;
            case kCCBFloat05:
                return 0.5f;
            case kCCBFloatInteger:
                return (float)this->readInt(true);
            default:
                {
                    /* using a memcpy since the compiler isn't
                     * doing the float ptr math correctly on device.
                     * TODO still applies in C++ ? */
                    float * pF = (float*)(this->mBytes + this->mCurrentByte);
                    float f = 0;

                    memcpy((void*) &f, (const void*) pF, sizeof(float));

                    this->mCurrentByte += sizeof(float);

                    return f;
                }
        }
    } 
```

再次在设备上测试发布版本没有问题。我将此修复程序提交给苹果并要求加急审查，以便应用程序运行而不是崩溃，并在 1 天内获得苹果的批准并发货。我更新到新版本发布并再次崩溃。

这是崩溃日志的副本：

```
Incident Identifier: DCFEA2A4-9707-4FF7-A4B7-26CF61B4A73F
CrashReporter Key:   b91e2f134184158618753244f837ff2ac5114f0d
Hardware Model:      iPhone4,1
Process:         GAMEAPP [848]
Path:            /var/mobile/Applications/F860F02C-3D16-4995-A19F-CE036200209F/GAMEAPP.app/GAMEAPP
Identifier:      GAMEAPP
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-03-01 19:42:44.987 -0500
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: EXC_ARM_DA_ALIGN at 0x1f0807c9
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   GAMEAPP                     0x000f971c cocos2d::extension::CCBReader::readFloat() (CCBReader.cpp:422)
1   GAMEAPP                     0x000f9e52 cocos2d::extension::CCBReader::readKeyframe(int) (CCBReader.cpp:648)
2   GAMEAPP                     0x000f99ae cocos2d::extension::CCBReader::readNodeGraph(cocos2d::CCNode*) (CCBReader.cpp:509)
3   GAMEAPP                     0x000f9c20 cocos2d::extension::CCBReader::readNodeGraph(cocos2d::CCNode*) (CCBReader.cpp:586)
4   GAMEAPP                     0x000f9342 cocos2d::extension::CCBReader::readFileWithCleanUp(bool) (CCBReader.cpp:689)
5   GAMEAPP                     0x000f92ec cocos2d::extension::CCBReader::readNodeGraphFromData(cocos2d::extension::CCData*, cocos2d::CCObject*, cocos2d::CCSize const&, cocos2d::extension::CCBAnimationManager**) (CCBReader.cpp:230)
6   GAMEAPP                     0x000f91aa cocos2d::extension::CCBReader::readNodeGraphFromFile(char const*, cocos2d::CCObject*, cocos2d::CCSize const&, cocos2d::extension::CCBAnimationManager**) (CCBReader.cpp:213)
7   GAMEAPP                     0x000f90a4 cocos2d::extension::CCBReader::readNodeGraphFromFile(char const*, cocos2d::CCObject*) (CCBReader.cpp:192)
8   GAMEAPP                     0x00119b50 IntroScene::init() (IntroScene.cpp:55)
9   GAMEAPP                     0x00119ca8 IntroScene::create() (IntroScene.h:19)
10  GAMEAPP                     0x00119a7c IntroScene::scene() (IntroScene.cpp:22)
11  GAMEAPP                     0x00110290 AppDelegate::applicationDidFinishLaunching() (AppDelegate.cpp:144)
12  GAMEAPP                     0x000dab94 cocos2d::CCApplication::run() (CCApplication.mm:50)
13  GAMEAPP                     0x000b6610 -[AppController application:didFinishLaunchingWithOptions:] (AppController.mm:76)
14  UIKit                           0x36522ad4 -[UIApplication _handleDelegateCallbacksWithOptions:isSuspended:restoreState:] + 248
15  UIKit                           0x3652265e -[UIApplication _callInitializationDelegatesForURL:payload:suspended:] + 1186
16  UIKit                           0x3651a846 -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 694
17  UIKit                           0x364c2c34 -[UIApplication handleEvent:withNewEvent:] + 1000
18  UIKit                           0x364c26c8 -[UIApplication sendEvent:] + 68
19  UIKit                           0x364c2116 _UIApplicationHandleEvent + 6150
20  GraphicsServices                0x381d85a0 _PurpleEventCallback + 588
21  GraphicsServices                0x381d81ce PurpleEventCallback + 30
22  CoreFoundation                  0x3468f170 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32
23  CoreFoundation                  0x3468f112 __CFRunLoopDoSource1 + 134
24  CoreFoundation                  0x3468df94 __CFRunLoopRun + 1380
25  CoreFoundation                  0x34600eb8 CFRunLoopRunSpecific + 352
26  CoreFoundation                  0x34600d44 CFRunLoopRunInMode + 100
27  UIKit                           0x36519480 -[UIApplication _run] + 664
28  UIKit                           0x365162fc UIApplicationMain + 1116
29  GAMEAPP                     0x000b6c22 main (main.m:14)
30  GAMEAPP                     0x000b6344 start + 36

Thread 1:
0   libsystem_kernel.dylib          0x3c8d5d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c823cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c823a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c8238a0 start_wqthread + 4

Thread 2 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 2:
0   libsystem_kernel.dylib          0x3c8c5648 kevent64 + 24
1   libdispatch.dylib               0x3c7f5974 _dispatch_mgr_invoke + 792
2   libdispatch.dylib               0x3c7f5654 _dispatch_mgr_thread$VARIANT$mp + 32

Thread 3:
0   libsystem_kernel.dylib          0x3c8d5d98 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3c823cf6 _pthread_workq_return + 14
2   libsystem_c.dylib               0x3c823a12 _pthread_wqthread + 362
3   libsystem_c.dylib               0x3c8238a0 start_wqthread + 4

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x3c8c4eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8c5048 mach_msg + 36
2   CoreFoundation                  0x3468f040 __CFRunLoopServiceMachPort + 124
3   CoreFoundation                  0x3468dd9e __CFRunLoopRun + 878
4   CoreFoundation                  0x34600eb8 CFRunLoopRunSpecific + 352
5   CoreFoundation                  0x34600d44 CFRunLoopRunInMode + 100
6   WebCore                         0x3a60a500 RunWebThread(void*) + 440
7   libsystem_c.dylib               0x3c82e30e _pthread_start + 306
8   libsystem_c.dylib               0x3c82e1d4 thread_start + 4

Thread 5 name:  AURemoteIO::IOThread
Thread 5:
0   libsystem_kernel.dylib          0x3c8c4eb4 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x3c8c5048 mach_msg + 36
2   AudioToolbox                    0x3418391c AURemoteIO::IOThread::Run() + 104
3   AudioToolbox                    0x34185c84 AURemoteIO::IOThread::Entry(void*) + 4
4   AudioToolbox                    0x340c3882 CAPThread::Entry(CAPThread*) + 294
5   libsystem_c.dylib               0x3c82e30e _pthread_start + 306
6   libsystem_c.dylib               0x3c82e1d4 thread_start + 4

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x1ed49740    r1: 0x1f0807c9      r2: 0x000001cd      r3: 0x000001c8
    r4: 0x00000004    r5: 0x1ed49740      r6: 0x42480000      r7: 0x2fd4af48
    r8: 0xffffffff    r9: 0x000001c9     r10: 0x1ed49740     r11: 0x1ed4a8a0
    ip: 0x000001c7    sp: 0x2fd4af48      lr: 0x000f9e57      pc: 0x000f971c
  cpsr: 0x00000030

Binary Images: 
```

我确实修改了其他链接器标志以包括 -lsqlite3.0 和 -ObjC（最初它只是 -lxml2 和 -lz）。我的发布构建优化是-Os（最快，最小）。

其他人有这个问题吗？我不知道如何调试它，因为我无法重现。最后，苹果如何批准该应用程序，但它在启动画面后立即崩溃？如果我能猜到应用程序何时运行，它可能会在应用程序批准后抛出“应用程序商店处理”阶段时被破坏（不确定）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T22:18:04.853

我知道一种解决方法。编辑计划以建立`Debug`和不建立`Release`，它似乎没有爆炸。

我也被拒了两次。诀窍是我有一个版本（免费）的应用程序通过而另一个（高级）崩溃。我追查了那个差异，并确认了那个差异。

建行阅读器 2.0

正如@LearnCocos2D 提到的，调试/发布的副作用可能是优化。

* * *

优化解决方法：

*   选择目标。
*   选择构建阶段选项卡。
*   展开编译源项。它应该列出所有编译的文件。如果您注意到顶部有第二列“编译器标志”。
*   选择 CCBReader.m
*   双击编译器标志列
*   输入“-O0”

为我解决了这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T21:31:11.200

This post regarding EXC_BAD_ACCESS errors in CCBReader helped me with the exact same issue: [http://www.cocos2d-x.org/boards/6/topics/18183](http://www.cocos2d-x.org/boards/6/topics/18183)

Turns out, it was linked to memory misalignment in CCBReader which will run fine on the sim, but will crash on a device due to its ARM processor.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-04T03:56:18.340

根据您最后的陈述，我的第一反应是Apple声称已解决的“应用程序更新错误”尚未完全解决。在更新期间添加的 DRM 补丁，不知何故在启动时立即使更新的应用程序崩溃。 [http://www.tuaw.com/2013/03/01/bug-in-latest-evernote-for-ios-update-causes-the-app-to-crash/](http://www.tuaw.com/2013/03/01/bug-in-latest-evernote-for-ios-update-causes-the-app-to-crash/) [https://discussions.apple.com/线程/3389977?start=0&tstart=0](https://discussions.apple.com/thread/3389977?start=0&tstart=0) [http://www.pcworld.com/article/258827/updated_apps_crashing_heres_what_you_need_to_know.html](http://www.pcworld.com/article/258827/updated_apps_crashing_heres_what_you_need_to_know.html)

已经有许多与应用程序更新崩溃错误相关的类似问题。有一些最佳实践或解决方法，Apple 没有记录，特别是为了避免更新错误。一定要检查一下。如果不是特定于您的应用程序，其中之一可能会为您锻炼。

[更新后的 iPad 上的](https://stackoverflow.com/questions/13661966/updated-app-crashing-on-ipad) [应用程序崩溃 iPhone 应用程序在更新后立即崩溃](https://stackoverflow.com/questions/11320903/iphone-app-crash-immediately-after-update)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T09:28:13.253

我就像“WTF 是 CCB 在那里做的吗？” ....无论如何，尝试使用 -O3 或根本不进行优化。-Os 会引起一些微妙的问题，尤其是对于 cocos2d。-Os 不是 cocos2d 的默认级别是有原因的（我也相信 Xcode 模板）。

[如果这解决了问题，您可以使用此问题](https://stackoverflow.com/questions/2219829/how-to-prevent-gcc-optimizing-some-statements-in-c)的答案之一仅为此文件或函数设置优化级别或禁用优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-08T10:21:31.203

您正在使用 ccbi 文件创建 UI，您的游戏随机崩溃，因为您没有在类的 init 方法中将引用变量设置为 nullptr。

例如，我声明了 Label *homeLabel; 在 intorScene.h 文件中，在 .cpp 文件 init 方法中，您应该将此变量设置为

homeLabel = nullptr;

# android - android浮动左/右按钮

> ID：15181357
> 
> 赞同：-6
> 
> 时间：2013-03-03T01:11:41.573
> 
> 标签：android, android-layout, android-view

有人知道我如何在android中完成这个吗？

[http://img339.imageshack.us/img339/2982/examplehm.png](http://img339.imageshack.us/img339/2982/examplehm.png)

<、>、+、- 是按钮，0 i 0 是 TextView-s。

我只是不明白这一点，也不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:56:53.577

使用`LinearLayout`水平方向的 a。您不需要手动设置方向，因为`LineaLayouts`默认设置为水平方向。

```
<LinearLayout
[...]
>
 <Button
 android:id="@+id/left"
 [...]
 > 

 <Button
 android:id="@+id/plus"
 [...]
 > 

 <TextView
 android:id="@+id/txt1"
 [...]
 > 

 <Button
 android:id="@+id/minus"
 [...]

 > 
 <TextView
 android:id="@+id/txt2"
 [...]
 > 

 <Button
 android:id="@+id/right"
 [...]
 > 

</LinearLayout> 
```

# c# - 如何在 C# 中对性能优化进行单元测试？

> ID：15181358
> 
> 赞同：27
> 
> 时间：2013-03-03T01:11:47.113
> 
> 标签：c#, unit-testing, optimization, micro-optimization

我在我正在构建的一些搜索代码中使用了 Levenshtein 算法的优化版本。我有功能单元测试来验证算法是否返回正确的结果，但在这种情况下，算法的*性能*也非常重要。

我希望为项目添加一些测试覆盖率，以便如果将来的任何修改影响优化，它们将显示为失败的测试 - 因为算法是确定性的并且针对已知的测试数据运行，这可能与计数一样详细为给定的一组测试输入执行的指令数。换句话说，我不打算使用计时器来衡量算法的性能——我感兴趣的是实际测试算法的内部行为，而不仅仅是输出。

任何想法我将如何在 C#/.NET 4 中解决这个问题？

编辑：我不想只使用挂钟时间的原因是它会随着 CPU 负载和测试控制之外的其他因素而变化。例如，这可能导致构建服务器负载不足时测试失败。作为部署系统的一部分，*将*进行挂钟监控。

编辑 2：这样想......当性能是关键要求时，你将如何应用 red->green->refactor？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-03T03:15:38.223

我将回答你问题的第三部分，因为我已经多次成功地做到了这一点。

> 当性能是关键要求时，您将如何应用 red->green->refactor？

1.  编写固定测试以捕获回归，了解您计划更改的内容以及可能因更改而减慢的其他方法。
2.  编写一个失败的性能测试。
3.  提高性能，经常运行所有测试。
4.  更新您的固定测试以更紧密地固定性能。

**编写固定测试**

创建一个像这样的辅助方法来计时您想要固定的内容。

```
private TimeSpan Time(Action toTime)
{
    var timer = Stopwatch.StartNew();
    toTime();
    timer.Stop();
    return timer.Elapsed;
} 
```

然后编写一个断言你的方法不需要时间的测试：

```
[Test]
public void FooPerformance_Pin()
{
    Assert.That(Time(()=>fooer.Foo()), Is.LessThanOrEqualTo(TimeSpan.FromSeconds(0));
} 
```

当它失败时（失败消息中的实际时间已过），用比实际时间稍多的时间更新时间。重新运行，它会通过。对您的更改可能影响其性能的其他函数重复此操作，最终得到类似的结果。

```
[Test]
public void FooPerformance_Pin()
{
    Assert.That(Time(()=>fooer.Foo()), Is.LessThanOrEqualTo(TimeSpan.FromSeconds(0.8));
}
[Test]
public void BarPerformance_Pin()
{
    Assert.That(Time(()=>fooer.Bar()), Is.LessThanOrEqualTo(TimeSpan.FromSeconds(6));
} 
```

**编写失败的性能测试**

我喜欢把这种测试称为“诱饵测试”。这只是固定测试的第一步。

```
[Test]
public void FooPerformance_Bait()
{
    Assert.That(Time(()=>fooer.Foo()), Is.LessThanOrEqualTo(TimeSpan.FromSeconds(0));
} 
```

现在，致力于性能改进。在每次尝试性改进后运行所有测试（固定和诱饵）。如果您成功了，您会在 baiting 测试的失败输出中看到时间减少，并且您的所有 pinning 测试都不会失败。

当您对改进感到满意时，为您更改的代码更新 pinning 测试，并删除 baiting 测试。

**您现在如何处理这些测试？**

最不担心的事情是用[Explicit](http://www.nunit.org/index.php?p=explicit&r=2.2.10)属性标记这些测试，并在下次要检查性能时保留它们。

在工作范围的另一边，在 CI 中创建一个控制良好的子系统来运行这些测试是监控性能回归的一个非常好的方法。以我的经验，与实际故障相比，人们更担心它们“由于其他原因导致 CPU 负载随机故障”。这种努力的成功更多地取决于团队文化，而不是你对环境的控制能力。

# matlab - 如何将矩阵串联成一个循环？

> ID：15181360
> 
> 赞同：1
> 
> 时间：2013-03-03T01:11:58.190
> 
> 标签：matlab, string-concatenation

我想在循环后将 n 个文件中的一些数据连接到一个矩阵中。现在下面的代码可以工作了，但是我怎样才能把所有的都加`date_1, date_2,.....,date_n`进去`date`呢？

```
date_1     =   cell2mat (data{1,1}{1,1});
date_2     =   cell2mat (data{1,2}{1,1});
date       =   [date_1;date_2]; 
```

谢谢。——杰基

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:16:52.930

```
 date = [];
 for ii = 1:n
    date = [date; cell2mat(data{1,ii}{1,1})];
 end 
```

如果我了解您的数据，应该可以工作。如果没有，请在评论中说出来。

顺便说一句，这不是很有效，尤其是当 n 很大时；但是如果不了解更多关于您的数据，就很难写出更有效的东西......

# c# - 发送电子邮件验证链接以激活个人资料 c#

> ID：15181361
> 
> 赞同：3
> 
> 时间：2013-03-03T01:12:00.687
> 
> 标签：c#, asp.net, visual-studio-2010, smtp, email-verification

我目前正在建立一个人们可以注册的网站，他们可以拥有自己的内容页面。我没有使用 Microsoft Visual Studio 2010 上提供的创建用户向导创建了一个自定义登录页面。我在后端有一个 SQL 数据库

> tbl用户

将保存用户注册的位置。我已经配置了我的电子邮件 smtp 设置，并且能够使用注册人的电子邮件发送电子邮件。我已经对此进行了测试，并且可以正常工作。

**问题**

(1) 我很困惑如何生成要附加到电子邮件中的激活链接。

(2) 如何编写代码来更新与用户相关的 SQL 表中的字段

> 例如：用户验证 = true

当用户单击通过电子邮件发送的链接时。

(3) 如何阻止用户在不经过验证过程的情况下登录网站？（我知道这可以通过在“创建用户”向导中更改一些内容来轻松完成，但是我习惯性地创建了我的注册，因此它在注册按钮单击事件上运行）因此我似乎无法弄清楚如何做它。

如果可能，请尝试帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T01:14:08.613

我建议有一个名为“ActivationToken”之类的字段并生成一个 GUID。您可以通过调用`newid()`函数直接在 SQL 中执行此操作，或者在 C# 中通过调用`Guid.NewGuid()`. 这是一个非常独特/随机的值，几乎不可能暴力破解。

因此，当用户注册时，您将执行以下操作：

```
insert into tblUsers (Username, Password, Active, ActivationToken) values ('johndoe', 'mypassword', 0, newid()) 
```

链接如下： http: [//yoururl.com/Activate.aspx](http://yoururl.com/Activate.aspx?token=) ?token= {yourActivationGuid}

```
Update tblUsers set Active=1 where ActivationToken={yourActivationGuid} 
```

如果您的 UserID 已经是 GUID，那么您可能只使用它就可以逃脱（例如，如果您正在使用 aspnet_user 表）。至于不允许登录，只需检查 Active 标志是否设置为 true。如果不是，则禁止登录。

因此，要验证登录，您可以执行以下操作：

```
select * from tblUsers where Username="johndoe" and Password="mypassword" and Active=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:41:35.060

创建用户登录页面。单击提交后，如上所述生成一个新的 guid()，并使用激活 guid（唯一）将电子邮件发送给用户，一旦用户单击，激活数据库中的用户 (SQL)。

# python - 在 Python/PyQt4 中发出接收信号

> ID：15181362
> 
> 赞同：0
> 
> 时间：2013-03-03T01:12:00.647
> 
> 标签：python, signals, pyqt4

我正在工作的程序应该从外部 bash 脚本接收信号（使用：kill -USR1 *pid*），并更新 QLabel。

在我的程序中，标签仅在我将鼠标悬停在“标签按钮”上后才会更新。我在下面创建了一个简化的示例，因为我的程序太多而无法浏览。在示例中，信号处理函数仅在关闭窗口时执行（如果我将 USR1 信号发送到其 pid）。

这是示例：

```
#!/usr/bin/env python
import os
import sys
import signal

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class Base(QWidget):
    def __init__(self):
        super(Base, self).__init__()
        self.initUI()

    def initUI(self):

        pid = os.getpid()
        self.main_label = QLabel("     " + str(pid) + "    ")

        vbox = QVBoxLayout()
        vbox.addWidget(self.main_label)

        self.setLayout(vbox)
        self.show()

        def signalCatcher(signum, stack):
            print "signaled!"
            self.main_label.setText("signaled!")

        signal.signal(signal.SIGUSR1, signalCatcher)

def main():
    app = QApplication(sys.argv)
    base = Base()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:25:05.740

我看到一些问题...

1）你的函数的缩进`signalCatcher`看起来很奇怪，以及它之后的信号连接。您是否尝试删除额外的缩进（即使它们与其他函数定义保持一致）？

2）您缺少定义`self`中的第一个参数`signalCatcher`。

3）我认为你的信号连接语法是错误的。我更幸运地将信号连接放在 main() 定义中，而不是放在类本身中。因此`signal.signal(signal.SIGUSR1, signalCatcher)`，请尝试`signal.signal(signal.SIGUSR1, base.signalCatcher)`在该行之后放置`base = Base()`

所以你的最终代码应该是这样的：

```
#!/usr/bin/env python
import os
import sys
import signal

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class Base(QWidget):
    def __init__(self):
        super(Base, self).__init__()
        self.initUI()

    def initUI(self):

        pid = os.getpid()
        self.main_label = QLabel("     " + str(pid) + "    ")

        vbox = QVBoxLayout()
        vbox.addWidget(self.main_label)

        self.setLayout(vbox)
        self.show()

    def signalCatcher(self,signum,stack):
        print "signaled!"
        self.main_label.setText("signaled!")

def main():
    app = QApplication(sys.argv)
    base = Base()
    signal.signal(signal.SIGUSR1, base.signalCatcher)
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

# http - 空集合和 HTTP 标头 Content-Range

> ID：15181364
> 
> 赞同：11
> 
> 时间：2013-03-03T01:12:29.500
> 
> 标签：http, rest, pagination, http-headers, paging

[我们如何使用Content-Range 的项目](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)标头处理 RESTful 接口上的空集合？

例如，有 42 条记录，一个请求`Range: items=0-41`将返回所有内容，响应头将是：`Content-Range: items 0-41/42`。

`Content-Range`但是，当没有任何记录时，我们如何处理标题？谢谢你的帮助。

**编辑：**

我的意思是，返回一个空集合，服务器可能想要返回`Content-Range: items x-y/0`, where`x`和`y`are 一个不同于 0 的值。但是哪一个呢？我认为这是一个棘手的问题，规范没有提及。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-30T22:38:50.430

实际上，服务器应该以 HTTP 416 Request Not Satisfiable 响应，并带有`Content-Range: */0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:57:30.840

如果您得到 XY/0 的非零数字，则来自服务器的响应无效（损坏）。提交错误。

# php - 如何使用 foreach 循环检索由两个以上数组组成的嵌套数组中的信息？

> ID：15181372
> 
> 赞同：2
> 
> 时间：2013-03-03T01:13:29.570
> 
> 标签：php, arrays, multidimensional-array, foreach

我正在尝试做的是采用具有相同类型结果的 2 个（当前，但最终将是 4 个）数组，将它们放在一起，按它们的值之一（post_time）对它们进行排序，并将它们回显到按该排序顺序显示屏幕。

我可以通过 while 循环通过它们各自的结果/数组来回显这些结果，但它们不会按总的发布时间正确排序，只能在它们各自的数组中。

我对嵌套的 foreach 循环感到困惑。我已经在我拥有的两个数组上尝试了 array_merge，然后将该数组放入另一个数组中，只是为了有一个数字键可以循环，但我被卡住了，感到困惑和疲倦。我已经完成了研究，但我无法将我看到的答案与我自己的特定代码进行比较。

我需要帮助。这就是我所拥有的。这是从数据库中检索单独的信息集/数组的代码。

```
include 'db_connect.php';
include 'core.php';

$get_char = mysql_query("SELECT character_id FROM characters WHERE account_id = '".$_SESSION['user_id']."'");
$char = mysql_result($get_char,0,'character_id');

$get_location = mysql_query("SELECT current_location, x_cord, y_cord, inside_building FROM characters WHERE character_id = $char");
$location = mysql_result($get_location, 0, 'current_location');
$x = mysql_result($get_location,0, 'x_cord');
$y = mysql_result($get_location,0,'y_cord');
$inside = mysql_result($get_location,0,'inside_building');

//get all messages where current characters arrival time is less than post_time
//AND arrival location is the same as posting location
$get_arrival = mysql_query("SELECT * FROM arrive_exit WHERE character_id = $char ORDER BY arrival DESC");
while($arrivals = mysql_fetch_array($get_arrival)){
  $arrival = $arrivals['arrival'];
  $arrival_location = $arrivals['location'];
  $unix_arrival = strtotime($arrival);
  $exit = $arrivals['exit'];
  $unix_exit = strtotime($exit);
  if(!isset($exit)){
    $get_logs = mysql_query("SELECT character_id, log, post_time, event FROM character_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
    AND location = $arrival_location ORDER BY post_time DESC");
  }else{
    $get_logs = mysql_query("SELECT character_id, log, post_time, event FROM character_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
    AND location = $arrival_location AND UNIX_TIMESTAMP(post_time) <= $unix_exit ORDER BY post_time DESC");
  }
  $o_logs = mysql_fetch_array($get_logs);

  //CHECK FOR LOGS IN BUILDING LOGS
  if(!isset($exit)){
    $check_logs = mysql_query("SELECT * FROM building_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
    AND current_location = $arrival_location");
  }else{
    $check_logs = mysql_query("SELECT * FROM building_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
    AND current_location = $arrival_location");
  }
  $building_check = mysql_num_rows($check_logs);
  if($building_check >= 1){
    $get_room = mysql_query("SELECT room_id, building_current_id, building_id FROM building_logs WHERE character_id = $char");
    $room_id = mysql_result($get_room,0,'room_id');
    $building_current = mysql_result($get_room,0,'building_current_id');
    $building_id = mysql_result($get_room,0,'building_id');
    if(!isset($exit)){
      $get_logs = mysql_query("SELECT character_id, log, post_time, event FROM building_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
      AND current_location = $arrival_location AND x = $x AND y = $y AND room_id = $room_id ORDER BY post_time DESC");
    }else{
    $get_logs = mysql_query("SELECT character_id, log, post_time, event FROM building_logs WHERE UNIX_TIMESTAMP(post_time) >= $unix_arrival
    AND current_location = $arrival_location AND x = $x AND y = $y AND room_id = $room_id
    AND UNIX_TIMESTAMP(post_time) <= $unix_exit ORDER BY post_time DESC");
    }
    $b_logs = mysql_fetch_array($get_logs);
  }
} 
```

这是我试图用来操纵检索结果的非工作代码。

```
$list = array_merge((array)$o_logs,(array)$b_logs);
$messages = array($list);
//echo out info here.
foreach($messages as $array){
  foreach($array as $log_key => $value){
    //log_key in this case could be character_id, event, post_time, so on which is not preferable
    echo $log_key.' : '.$value.'<br>';
    }
} 
```

哪个输出：

```
0 : 62
character_id : 64
1 : This is a testing log from a different person at an earlier time in a DIFFERENT location.
log : This is a log from inside a building now.
2 : 2013-02-22 04:04:00
post_time : 2013-02-26 19:00:00
3 : 0
event : 0
4 : 64
5 : This is a log from inside a building now.
6 : 2013-02-26 19:00:00
7 : 0 
```

所以，显然我得到的键也是来自内部 foreach 循环的字符串。它们来自第二个“building_logs”查询。我没想到我从上面快速记下的循环嵌套中得到的输出正是我想要的，但我会说我不知道​​为什么会这样。

我需要帮助了解如何嵌套 foreach 循环以正确获取我需要的信息，拜托。我将非常感激，因为即使我已经编写了一年多的代码，除了 while 循环之外，我几乎不需要处理任何循环，而且我使用的数组从来都不是多维的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:26:47.803

`$row = mysql_fetch_array($result)`包含 DB 中的每个值**两次**，
(1) 作为数值数组和
(2) 作为关联数组：

(1)`$row[0]="Hello"`和
(2)`$row['text']="Hello"`

尝试`... mysql_fetch_array($result,MYSQL_NUM)`仅获取数字索引，或仅
`.. MYSQL_ASSOC)`获取关联索引。

`array_merge`...
“如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后一个值不会覆盖原始值，而是附加。”
引自[http://www.php.net/manual/en/function.array-merge.php](http://www.php.net/manual/en/function.array-merge.php)

我想这解释了你得到的奇怪结果。

因此，首先设置`mysql_get_array($result,MYSQL_NUM)`，然后将数组合并到`$list`，然后对它们进行排序（参见 php.net），然后回显它们。

`$messages = array($list);`不过，对我来说没有多大意义。

`var_dump($list);`了解这个数组是如何构建的。然后相应地调整循环。

顺便说一句，我忘了提到 mysql_* 已弃用，请移至 mysqli 或 PDO。

# java - JAVA 的 MAIN() 中的可选参数

> ID：15181376
> 
> 赞同：1
> 
> 时间：2013-03-03T01:14:22.343
> 
> 标签：java, main, optional-parameters

是否可以为 Java 程序实现可选参数？

我尝试搜索这个，但所有出现的是Java中的重载方法，而不是主要（）。

我想要做的是运行一个带有可选标志的Java程序，即：

```
~ java Program textfile.txt [optional flag] 
```

其中 Program 必须使用提供的文本文件运行，但不一定是可选标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:45:50.803

所有参数都在 main 的 args 参数中。您必须实现处理它的逻辑。

如果您感到懒惰并想尝试一些库，请查看[Apache Commons CLI](http://commons.apache.org/proper/commons-cli//)库。

# java - 使用 Swing 实现 Java SE MVC

> ID：15181377
> 
> 赞同：2
> 
> 时间：2013-03-03T01:14:25.203
> 
> 标签：java, swing, model-view-controller

我已经使用`PropertyChageSupport`和使用 Swing 为 Java SE 实现了 MVC 模式`PropertyChageListener`。实现 MVC 的示意图如下。

![修改后的 MVC 模式](../Images/ffa4f5edbc948a534e72a8ab0b6e5c72.png)

在 的实施中`View`，我`Model`在`Controller`.

`View`包含类似 Ok 按钮的代码。

```
btnOk.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        modelController.setNumber(Integer.parseInt(numberField
            .getText()));
        modelController.setName(nameField.getText());
    }
}); 
```

完整的代码可以在[SwingMVC](https://github.com/TheKojuEffect/SwingMVC)中找到。

现在，我的问题是，我是为**in****编写上面的代码还是应该在一个方法中编写它，`btnOk``View``Controller`**以便 in `View`，我会做

```
btnOk.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        modelController.btnOkActionPerformed();
    }
}); 
```

**在以上两种实现中，哪种是实现 MVC 的首选方式？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:46:22.073

您的图表建议了一个[*模型-视图-演示者*](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter)(MVP) 模式，它与[Swing 应用程序设计](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)兼容。在这种情况下，[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)封装应用程序功能以从您的模型中导出是一种方便的方法。作为具体例子：

*   `DefaultEditorKit`并`StyledEditorKit`导出对文本组件通用`Action`的模型进行操作的有用类型。`Document`如本[例](https://stackoverflow.com/a/8534162/230513)所示，此类操作会更新`Document`，从而间接更新相应的视图组件。

*   [此处](https://stackoverflow.com/a/11944233/230513)`ControlPanel`引用的示例中的公开了许多直接在和的隐式模型上操作的实例。`Action``List<Node>``List<Edge>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T01:20:31.057

首先需要注意的是：我不是专业人士或学生，而是最喜欢的人，但话虽如此，我自己的偏好是你的第二个例子，

```
btnOk.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        modelController.btnOkActionPerformed();
    }
}); 
```

控件必须调用视图上的方法来提取信息，并且它调用的任何方法都将是视图实现的接口的一部分。我的目标是尽可能地保持视图愚蠢，并尽可能多地放松耦合。

# c++ - std::sort 函子一行

> ID：15181378
> 
> 赞同：1
> 
> 时间：2013-03-03T01:14:45.873
> 
> 标签：c++, sorting, line, std, functor

我已经声明了一个仿函数并以该仿函数作为参数进行了 std::sort 调用。代码：

```
struct
{
    bool operator() (const CString& item1, const CString& item2){
        return MyClass::Compare( Order(_T("DESC")), item1, item2);
    }

}Comparer;

std::sort(AllObjects.GetData(), AllObjects.GetData() + AllObjects.GetSize(), Comparer); 
```

简单的问题：我可以在一行中做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:19:50.870

如果您的编译器支持[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")，则可以使用 lambda

```
std::sort(AllObjects.GetData(), AllObjects.GetData() + AllObjects.GetSize(),
          [](const CString& item1, const CString& item2) {
              return MyClass::Compare( Order(_T("DESC")), item1, item2);
          }); 
```

没有[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")，你可以通过使用函数而不是仿函数来简化它

```
static inline bool Comparer(const CString& item1, const CString& item2) {
    return MyClass::Compare(Order(_T("DESC")), item1, item2);
} 
```

并将其用作最后一个参数。

不幸的是（？），只有一元或二元函数对象的函数包装器。如果也有三元函数对象的包装器，您**可以**执行类似的操作

```
std::sort(AllObjects.GetData(), AllObjects.GetData() + AllObjects.GetSize(),
          std::bind1st(std::ptr_fun(MyClass::Compare), Order(_T("DESC")))); 
```

如果你考虑使用[boost-bind](http://www.boost.org/doc/libs/1_53_0/libs/bind/bind.html#with_functions)，你可以试试这个

```
std::sort(AllObjects.GetData(), AllObjects.GetData() + AllObjects.GetSize(),
          boost::bind(MyClass::Compare, Order(_T("DESC")), _1, _2)); 
```

这相当于[c++](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题") 11 [`std::bind`](http://en.cppreference.com/w/cpp/utility/functional/bind)。

# django - Django 管理员无法使用自定义用户模型正确登录

> ID：15181379
> 
> 赞同：12
> 
> 时间：2013-03-03T01:15:06.627
> 
> 标签：django, django-admin, django-1.5

我将 Django 1.4.5 上的应用程序升级到 Django 1.5，并刚刚完成迁移到自定义用户模型。当我使用我自己的身份验证表单和我的超级用户凭据（在执行时创建`manage.py syncdb`）登录到我的应用程序时，一切正常。

我能够通过身份验证，如果我去`/admin`，我已经按预期登录。我能够完美地导航和使用管理面板。但是，如果我尝试`/admin`使用 django 管理员登录表单从 登录到管理面板，我会收到错误消息：

> 请输入正确的员工帐户电子邮件和密码。两个地方都要注意大小写。

`ModelAdmin`我做了一些调查，认为这[可能](https://docs.djangoproject.com/en/1.5/topics/auth/customizing/#a-full-example)与`ModelAdmin`. 但是，问题仍然存在。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T23:34:05.147

`create_superuser`您是否在下面的函数中添加了以下几行`BaseUserManager`？它可能看起来像这样：

```
class CustomUserManager(BaseUserManager):
    def create_user(self, username, email, password=None):
        if not username:
            raise ValueError('Dude you need a username.')
        if not email:
            raise ValueError(
                'type an e-mail..')

        new_user = self.model(
            username=username,
            email=CustomUserManager.normalize_email(email))
        new_user.set_password(password)
        new_user.save(using=self._db)
        return new_user

  def create_superuser(self, username, email, password):
        new = self.create_user(
            username,
            email,
            password=password
        )
        new.is_active = True
        new.is_staff = True
        new.is_superuser = True
        new.save(using=self._db)
        return new 
```

专注于：

```
 new.is_active = True
    new.is_staff = True
    new.is_superuser = True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-12T23:33:49.133

我有同样的问题，但我发现@alix 的回答很有帮助。我忘记添加了`is_active=True on create_superuser()`

```
def create_staffuser(self, email, first_name=None, last_name=None, user_role=None, password=None):
    user = self.create_user(
        email,
        first_name=first_name,
        last_name=last_name,
        user_role=user_role,
        password=password,
        is_staff=True,
        is_active=True
    )
    return user 
```

所以基本上你需要专注于 is_active 并检查你的

```
# changes the in-build User model to ours (Custom)
AUTH_USER_MODEL = 'accounts.User'

AUTHENTICATION_BACKENDS = (
    # Needed to login by custom User model, regardless of `allauth`
    "django.contrib.auth.backends.ModelBackend",

    # `allauth` specific authentication methods, such as login by e-mail
    "allauth.account.auth_backends.AuthenticationBackend",
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-14T04:38:27.930

答案是 ：

```
def create_superuser(self, username, email, password=None, **extra_fields):
    user = self.create_user(username, email, password=password, is_staff=True, **extra_fields)
    user.is_active = True
    user.save(using=self._db)
    return 
```

如果它适合你，请投票。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-24T11:48:43.753

是的，这部分成功了。感谢您对这些@gregoltsov 的指点

```
obj.is_active = True
obj.is_staff = True
obj.is_admin = True 
```

我缺少的是**obj.is_active**部分。

# ios - 将请求从另一个视图加载到 Web 视图中

> ID：15181385
> 
> 赞同：1
> 
> 时间：2013-03-03T01:16:06.963
> 
> 标签：ios, objective-c

在我的 iPhone (iOS 5/6) 应用程序的一部分中，我有一系列按钮可以在我的应用程序中打开一个 URL（当前通过一个 URL 方案到移动 Safari）。我不想制作单独的视图控制器，它们在每次按下按钮时都充当模态。

我不想拥有 5 个不必要的视图控制器，而是想制作一个 .xib 文件作为应用程序范围的 Web 视图。IE：当用户按下按钮时，对应于该按钮的 URL 在这个新视图中打开（假设它称为 WebViewController）。

用伪代码或只是一个解释，你能解释一下我应该怎么做吗？这个特定问题的在线/书籍很少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:28:51.607

您基本上可以有一个`viewController`和多个按钮，然后将这些按钮与它们的操作连接起来以打开相应的按钮`URL`，您可以使用其他`viewController`连接`UIWebView`为 iboutlet 和 a`UIButton`来关闭此 viewController 您必须在第二个 viewController 中为 webview实现[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)

**第一视图控制器.m**

```
-(IBAction)button1Clicked:(id)sender{
    self.myWebController=[[MyWebViewController alloc]initWithNibName:@"MyWebViewController" bundle:nil];
    [self.myWebController setWebViewUL:@"http://www.google.com"];

    [self presentViewController:self.myWebController animated:YES completion:nil];
}
-(IBAction)button2Clicked:(id)sender{
    self.myWebController=[[MyWebViewController alloc]initWithNibName:@"MyWebViewController" bundle:nil];
    [self.myWebController setWebViewUL:@"http://www.apple.com"];

    [self presentViewController:self.myWebController animated:YES completion:nil];
}
-(IBAction)button3Clicked:(id)sender{
    self.myWebController=[[MyWebViewController alloc]initWithNibName:@"MyWebViewController" bundle:nil];
    [self.myWebController setWebViewUL:@"http://www.yahoo.com"];

    [self presentViewController:self.myWebController animated:YES completion:nil];
} 
```

**MyWebViewController.m**

```
@synthesize myWebView;
@synthesize strURL;

-(void)setWebViewUL:(NSString*)urlstr{

    self.strURL=urlstr;
}

- (void)viewDidLoad
{
    [self loadURLinWebView:self.strURL];

    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

-(void)loadURLinWebView:(NSString*)urlStr {

    NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:urlStr] cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:30.0f];
    [myWebView loadRequest:request];

}

-(IBAction)buttonDismisClicked:(id)sender{

    [self dismissViewControllerAnimated:YES completion:nil];
}

// delegate methods     

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error{

}
-(void)webViewDidFinishLoad:(UIWebView *)webView{

}

-(void)webViewDidStartLoad:(UIWebView *)webView{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:33:39.007

您必须创建一个单独的视图控制器，该控制器将附加一个 UIWebView 插座。创建一个使用 URL 参数初始化该视图控制器并将其加载到 UIWebView 的方法。是这样吗？

一些伪代码，因为你要求它：

```
// SomeControllerWithinTheApp.m
- (IBAction)myWebsiteLinkTapped {
  MyWebController *viewController = [[MyWebController alloc] initWithURL:kWebsiteURL];
  // show it modally or push, up to you
}

// SomeOtherControllerWithinTheApp.m
- (IBAction)someLinkButtonTapped {
  MyWebController *viewController = [[MyWebController alloc] initWithURL:kSomeOtherURL];
  // show it
} 
```

关于使用传递的 url 创建的加载`-viewDidLoad`方法并将其加载到您的 web 视图中。`MyWebController``URLRequest`

# asp.net-mvc - 将元素添加到列表中而不是在多对多关系中更新实体

> ID：15181388
> 
> 赞同：1
> 
> 时间：2013-03-03T01:16:25.567
> 
> 标签：asp.net-mvc, entity-framework

[我根据本教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)编写了一个多对多的实现，不幸的是我无法实际保存发布到我的模型的任何值。

```
[HttpPost]
public ActionResult Edit(User user, string[] selectedSites)
{
    if (ModelState.IsValid)
    {
        UpdateUserSites(selectedSites, user);
        context.Entry(user).State = EntityState.Modified;
        context.SaveChanges();
        return RedirectToAction("Index");
    }
    ViewBag.PossiblePartners = context.Partners;
    ViewBag.Sites = PopulateSelectedSiteData(user);
    return View(user);
} 
```

和

```
private void UpdateUserSites(string[] selectedSites, User userToUpdate)
{
    // if no sites are selected, give the user a fresh empty list of sites
    if (selectedSites == null)
    {
        userToUpdate.Sites = new List<Site>();
        return;
    }

    var newSelectedSites = new HashSet<string>(selectedSites);
    var existingUserSites = new HashSet<int>(userToUpdate.Sites.Select(site => site.Id));

    foreach (var site in context.Sites)
    {
        if (newSelectedSites.Contains(site.Id.ToString()))
        {
            if (!existingUserSites.Contains(site.Id))
            {
                // add a new site to the user
                userToUpdate.Sites.Add(site);
            }
        }
        else
        {
            if (existingUserSites.Contains(site.Id))
            {
                // remove an existing site from the user
                userToUpdate.Sites.Remove(site);
            }
        }
    }
} 
```

该`UpdateuserSites`函数肯定是在向列表中添加元素，但是在我尝试使用`context.SaveChanges()`数据库保存更改后没有得到更新。

**编辑**

我注意到了几件事。一，在我的函数中迭代站点时`UpdateUserSites`，该站点有一些引发异常的属性。它[与在迭代现有查询集时执行查询有关](https://stackoverflow.com/questions/6062192/there-is-already-an-open-datareader-associated-with-this-command-which-must-be-c)。我通过更改`context.Sites`为`context.Sites.ToList()`

二，我的`Create`功能工作得很好。它添加了一个新用户并向该用户添加了一个站点，而不会出现故障。*除了*`Sites`属性之外，我添加的新条目以及现有条目都是可编辑的。

```
[HttpPost]
public ActionResult Create(User user, string[] selectedSites)
{
    if (ModelState.IsValid)
    {
        context.Users.Add(user);
        UpdateUserSites(selectedSites, user);
        context.SaveChanges();
        return RedirectToAction("Index");  
    }
    ViewBag.PossiblePartners = context.Partners;
    ViewBag.Sites = PopulateSelectedSiteData();
    return View(user);
} 
```

**编辑 2**

这当然与我的实体和当前有关`DbContext`——我在函数中添加了`context.Users.Attach(user);`正确的内容，现在我至少可以向用户添加网站。现在我无法删除它们。但至少我在做某事。`if(ModelState.IsValid)``Edit`

**编辑 3**

我已经恢复`Edit`到原来的状态，而是`UpdateUserSites`用以下两行修改了我的函数

```
context.Users.Attach(userToUpdate);
context.Entry(userToUpdate).Collection(u => u.Sites).Load(); 
```

这会将当前用户附加到上下文，将与其关联的所有站点加载到上下文中（因为被发布的用户实际上并不包含该信息），然后一切正常！

将所有数据发布到单个对象可能是最佳实践，但我不确定如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:23:37.477

我认为您需要检查您`ConnectionString` 的 每次构建应用程序时可能会覆盖您的 mdf 文件，这就是为什么您认为您的更改没有持久化的原因。

# javascript - Backbone.js 非常简单的验证模型不起作用 - 遵循 webtuts 教程

> ID：15181390
> 
> 赞同：1
> 
> 时间：2013-03-03T01:16:51.723
> 
> 标签：javascript, backbone.js

我正在关注[tutsplus.com 上的本教程](https://tutsplus.com/lesson/validating-models/)，它看起来非常简单，但是当我运行`person.set('age', -27);`它时它不会返回 false，而是将属性设置为负值。我查看了[关于 validate 的主干文档](http://backbonejs.org/#Model-validate)以及一些在线帖子，它似乎应该可以工作？我知道我还不会取回返回字符串。

这是我的 js，除非我一直遗漏某些东西，否则它与视频完全相同：

```
var Person = Backbone.Model.extend({
  defaults: {
    name: 'John Doe',
    age: 30,
    occupation: 'worker'
  },
  validate: function(attrs) {
    if ( attrs.age < 0 ) {
        return 'Age must be positive, stupid.';
    }
  },
  work: function() {
    return this.get('name') + ' is working.';
  }
}); 
```

阅读了一些说不通过的地方，`silent: true`我认为我不是......至少在我的代码中没有明确......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:57:58.380

正如@xat 和@mu 所指出的那样，这个问题是一个过时的视频——尽管一些早期的视频已更新到最新版本。9.10 的变更日志指出：

`Model validation is now only enforced by default in Model#save and no longer enforced by default upon construction or in Model#set, unless the {validate:true} option is passed.`

所以我决定通过`validate:true`并进行测试，`Model#save`并且每个都有效。

多谢你们！

# android - Android的等待功能

> ID：15181392
> 
> 赞同：0
> 
> 时间：2013-03-03T01:16:53.313
> 
> 标签：android

我有一段Android代码，我的理解是在后台创建了一个新线程，它启动了记录功能。它等待 10 秒但我的问题是如何停止录制。当布尔值 isRecording 为假时，它从记录函数停止。

我的问题是 isRecording 在 10 秒后变为假？

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Thread thread = new Thread(new Runnable() {
        public void run() {
            isRecording=true;
        record();              //starts to record
        } 
        });
        thread.start();   //thread start

     //=============================================//

        synchronized (this) 
        {

     try {
     wait(10000);

                  //wait for 10second
    } catch (InterruptedException e) {}
        }
    isRecording = false;   

    try {
      thread.join();  //blocks the current thread until the receiver finish execution and dies.
   } catch (InterruptedException e) {}     //interruptedException

   }
  }

   public void record() {

        short[] buffer = new short[bufferSize]; 
        audioRecord.startRecording();

        while (isRecording) {
            int bufferReadResult = audioRecord.read(buffer, 0, bufferSize);
            for (int i = 0; i < bufferReadResult; i++)
            dos.writeShort(buffer[i]);
            }

        audioRecord.stop();
        dos.close();

        } catch (Throwable t) {
        Log.e("AudioRecord","Recording Failed");
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:22:26.323

使用[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)：

```
new CountDownTimer(10000, // 10 second countdown
9999) // onTick time, not used 
{

     public void onTick(long millisUntilFinished) {
         // Not used
     }

     public void onFinish() {
         isRecording = false;
     }
}.start(); 
```

# xcode - Cocoa：我可以在 osX 的 WebView 上渲染 ms office 文件吗

> ID：15181393
> 
> 赞同：1
> 
> 时间：2013-03-03T01:16:58.557
> 
> 标签：xcode, macos, cocoa, webview, ms-office

在 iPhone 编程中，我可以使用以下代码在 iOS 上的 UIWebView 上打开 ms office 文件（.doc、.docs、.ppt、.xls、...）

```
NSURL* url = [NSURL fileURLWithPath:filePath];    
NSURLRequest* request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request]; // webView -> UIWebView outlet 
```

但是，我在 OSX 上使用 WebView 进行了尝试

```
NSURL* url = [NSURL fileURLWithPath:filePath];    
NSURLRequest* request = [NSURLRequest requestWithURL:url];
[[webView mainframe] loadRequest:request]; // webView -> WebView outlet 
```

但是在 OSX 应用程序的 WebView 上，程序不会

打开任何 ms office 文件。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:20:21.430

回答我的问题。

我以与我的问题不同的方式解决了这个问题。

我使用了 QuickLook 框架。

所以现在我可以将 ms 文档显示到 QuickLook 面板。

# wpf - 如何使用 Resharper 使 XAML 编辑更具响应性

> ID：15181394
> 
> 赞同：3
> 
> 时间：2013-03-03T01:17:43.027
> 
> 标签：wpf, visual-studio-2010, xaml, resharper

我一直在 Visual Studio 2010 Ultimate Edition 上使用 ReSharper (v 7.1.2) 的试用版。我使用的是 HP Elitebook 8570w，配备 i7-3610QM CPU 和 4GB RAM，因此性能应该不是问题。它工作得很好，但由于某种原因，当我编辑 XAML 时它真的很糟糕。每当我输入内容时，每次击键都会滞后。

有没有人可以解决这个问题？如果没有，有没有办法仅为 XAML 文件禁用 Resharper？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T01:40:42.973

Julien Lebosquain 在他的博客上提供了一个解决方案。它涉及将 XAML 文件的“打开方式”设置更改为普通文本编辑器，以便它们不会在 Visual Studio 中自动打开。他还有几个注册表黑客和一个 Resharper 插件。

博客文章在这里：
[http ://blog.lebosquain.net/2012/08/responsive-xaml-editing-with-resharper/](http://blog.lebosquain.net/2012/08/responsive-xaml-editing-with-resharper/)

# java - 使用迭代器从Java列表中删除重复项

> ID：15181395
> 
> 赞同：3
> 
> 时间：2013-03-03T01:18:01.440
> 
> 标签：java, arraylist, duplicate-removal

我正在尝试为我的 Java 入门课程处理作业问题，我们应该在不使用集合或 .contains() 方法的情况下从列表中删除重复项。基本上只使用迭代器和 .equals() 方法。我的代码如下：

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;

public class sample {
public static void main(String[] args) throws BadListException {
    List<String> myList = new ArrayList<String>();
    myList.add("A");
    myList.add("B");
    myList.add("B");
    myList.add("C");
    myList.add("B");
    myList.add("D");

    unique(myList);
    System.out.println(myList);

}
public static List<String> unique( List<String> items ) throws BadListException { 

    List<String> newList = new ArrayList<String>();
    Iterator<String> itr = items.listIterator();

    // If items is null, throw a BadListException. 

    if (items == null){
        throw new BadListException();
    }
    // If items is empty, return a new empty list. 

    if (items.isEmpty()){
        return newList;
    }

    // Otherwise create and return a new list that contains the items 
    // in L with all duplicates removed.  
    // Example: items: "A","B","C"              result: "A","B","C" 
    // Example: items: "A","A","A"              result: "A" 
    // Example: items: "A","B","B","C","A","D"  result: "A","B","C","D" 

    while (itr.hasNext()){
        for (int i = 0; i < items.size()-1; i++){
            if (itr.next().equals(items.get(i))){
                itr.remove();
            }
        }

    }
    items = newList;
    return newList; 
```

如果有人可以解释我做错了什么以及我应该如何去做，那将非常有帮助。请注意，由于这是为我准备测试，我希望得到解释，而不仅仅是正确的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:24:21.277

我建议您使用调试器来查看程序当前正在做什么，而不是确切地解释出了什么问题。特别是，查看每次调用时迭代器返回的内容`iter.next()`。

正确解决方案的提示：

1.  您将需要使用多个迭代器...
2.  您没有将任何内容放入要返回的列表中。
3.  您需要确定是创建和返回一个新列表，还是从现有列表中删除元素。两者都做没有意义。

* * *

将来，当您提出问题时，您应该更好地说明程序实际上应该做什么。例如：

*   您没有说该`unique`方法是否应该从参数列表中删除元素或返回一个包含（仅）唯一元素的新列表。
*   您没有说列表中元素的顺序是否重要。
*   您没有说是否可以更改输入列表...。

在决定如何解决这样的问题时，所有这些事情都很重要。尤其是在现实世界中。即使你的作业没有说明这些事情，你仍然需要自己决定你的代码是如何工作的……并用 javadoc 注释记录下来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T01:28:47.317

*   当`i==0`你的`iterator.next()`和`get(i)`将是相同的元素时，所以你只是删除了它。
*   对于同一个列表，最好不要`iterator.remove()`在`for`循环中执行。
*   你对 没有`add`任何东西`newList`，只是简单地退回了它
*   对此作业的建议：

您可以先对列表**进行排序**，然后遍历它，如果一个元素等于它的前一个元素，则删除该元素。如果需要，您当然可以创建一个新列表来保存这些独特元素。

我的 2 美分

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-12T04:27:37.827

以下是解决方案：

```
 List<String> list = Lists.newArrayList("1","4","8","1","4","5","1");
    Collections.sort(list);

    Iterator<String> itr = list.iterator();
    String old = itr.next();
    while(itr.hasNext())
    {
        String next = itr.next();

        if(old.equals(next))
        {
            itr.remove();
        }
        old = next;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T01:23:57.213

遍历列表并删除元素会更改列表...如果您查看元素“4”并决定删除它，您查看的下一个元素是什么？提示：不是原来的元素“5”而是新的元素“5”……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-08T15:07:55.687

您可以创建自己的迭代器，其目的是只返回一个重复值一次。

```
public class NoDuplicatesIterator<T> implements Iterator<T> {

    private final List<T> array;
    private final List<T> encountered;
    private int index = 0;

    public NoDuplicatesIterator(List<T> array) {
        this.array = array;
        encountered = new ArrayList<>();
    }

    @Override
    public boolean hasNext() {
        if (index > array.size() - 1) {
            return false;
        }

        while (encountered.contains(array.get(index)) && index < array.size() - 1) {
            index++;
        }

        return index <= array.size() - 1;
    }

    @Override
    public T next() {
        encountered.add(array.get(index));
        return array.get(index++);
    }

} 
```

用法：

```
public class Main {

    public static void main(String[] args) {
        List<Integer> array = Arrays.asList(new Integer[]{100, 2, 2, 1, 1, 2, 3, 3, 15, 4, 4, 5, 6, 7, 7, 8, 99, 99, 100, 99, 2, 77, 23, 14, 2, 15});
        NoDuplicatesIterator<Integer> it = new NoDuplicatesIterator(array);

        while (it.hasNext()) {
            System.out.println(it.next());
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T07:30:29.920

另一种简单的方法如下。

```
import java.util.HashSet;
import java.util.List;
import java.util.Set;public class Main {

    /**
     * @param args
     */
    public static void main(String args[]) throws SQLException {
        System.out.println("Entered Main");
        Test();
        System.out.println(str);
        set.addAll(str);
        System.out.println(set);
        str.clear();
        str.addAll(set);
        System.out.println(str);
    }
    final static List<String> str = new ArrayList<String>();
    final static Set<String> set = new HashSet<String>();
    public static void Test(){

        str.add("A");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("A");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("B");
        str.add("C");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("C");
        str.add("D");
        System.out.println(str);
    } 
```

填充列表的测试方法是从 Vidyarani Shinde 的答案中复制的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-19T06:56:43.053

```
code extract without using iterator 

import java.util.ArrayList;
import java.util.List;

  public class Test {
    final static List<String> str = new ArrayList<String>();
    public Test(){

        str.add("A");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("A");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("B");
        str.add("C");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("D");
        str.add("B");
        str.add("C");
        str.add("C");
        str.add("C");
        str.add("D");
        System.out.println(str);

    }

    public  List<String> rmovedDuplicate(List<String> str){

        List<String> finalList = new ArrayList<String>();

        for(int i =0; i<str.size();i++){
            for (int j=i+1; j<str.size();j++){
                if(str.get(i).equals(str.get(j))){
                    str.remove(j);
                    i=0;

                }
            }
        }

        System.out.println("final list :"+str);
        return str;
    }

    public static void main(String args[]){
        Test t = new Test();
        t.rmovedDuplicate(str);
    }

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-20T11:09:14.480

# 很简单

`way is ..first to check the list has that value if so ,skip adding it if not add the element and u get your unique list...instead of running intensive Iterator operation :)`

`Example`

```
List<Integer> listOfUserIds = new ArrayList<Integer>();
     Integer UserIdCheck = 0;
     for (User userTest : userCollection) {
     UserIdCheck = userService.getUserByRegionCode(userTest.                      .getRegionId());
    if (!listOfUserIds.contains(UserIdCheck)) //check befor adding listOfUserIds.add(UserIdCheck);
        }
  } 
  return listOfUserIds.toString().replace("[", "").replace("]", ""); // if u like can remove [ and ] from the list and simply return a string like "4,5,6" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-04-03T19:05:13.597

我已经为每个都使用了高级，并且还尝试通过转换`ArrayList`为`HashSet`和再次转换为`ArrayList`. 两种解决方案都可以正常工作。你可以选择任何一个

```
public static void main(String[] args) {
    ArrayList<String> wordDulicate = new ArrayList<String>();

    wordDulicate.add("Tom");
    wordDulicate.add("Jones");
    wordDulicate.add("Sam");
    wordDulicate.add("Jamie");
    wordDulicate.add("Robie");
    wordDulicate.add("Helen");
    wordDulicate.add("Helen");
    wordDulicate.add("Helen");
    wordDulicate.add("Helen");
    wordDulicate.add("Tom");
    wordDulicate.add("Troy");
    wordDulicate.add("Mika");
    wordDulicate.add("Tom");

    System.out.println("Array List size"+wordDulicate.size());

    ArrayList<String> nonDuplicat=new ArrayList<String>(new HashSet<String>(wordDulicate));

    System.out.println("Array List size"+nonDuplicat.size());
    ArrayList<String> nonDuplicatThroughIterator=new ArrayList<String>();

    for(String each:wordDulicate){
        if(!nonDuplicatThroughIterator.contains(each))
            nonDuplicatThroughIterator.add(each);
    }
    System.out.println("Array List size"+nonDuplicatThroughIterator.size());

} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-06-18T22:53:32.280

假设`ArrayList`implements `ListADT`，`ArrayList`和`ArrayListIterator`类按预期实现，这`BadListException`是一个带有零参数构造函数的未经检查的异常。还假设不能将空元素添加到列表中。

我必须使用迭代器完成下面指定的 Java 方法。我的解决方案应满足以下要求：

1.  必须显式使用迭代器来遍历列表（即，您不能使用 for 循环或 Java 的扩展 for 循环）
2.  不得使用该`contains`方法
3.  [可以使用在线阅读](http://pages.cs.wisc.edu/~cs367-1/)中描述的任何`ListADT`方法（除了），包括，但不得使用在线阅读中未提及的任何其他方法`contains``ListADT.iterator()``List`
4.  不得修改参数的内容。

函数的骨架：

```
public static ListADT<String> union(ListADT<String> list1, ListADT<String> list2) {
    // If list1 or list2 (or both list1 and list2) is null, throw a BadListException. 
    // If list1 and list2 are both empty, return a new empty list.
    // If list1 is empty (but not list2), return a new list containing the strings in
    //     list2 with all duplicates removed.
    // If list2 is empty (but not list1), return a new list containing the strings in
    //     list1 with all duplicates removed.
    // Otherwise, create and return a new list that contains the strings in list1 and
    //     the strings in list2 with all duplicates removed.
    //
    // Examples:
    //  list1: "a","b","c"          list2: "d","e","f"      result: "a","b","c","d","e","f"
    //  list1: "a","c","b","d"      list2: "e","d","a","f"  result: "a","c","b","d","e","f"
    //  list1: "a","b","c","b","a"  list2: "c","a","b"      result: "a","b","c"
    //
    // Note: the list returned does not need to be in any particular order 
```

我必须确保我的解决方案只使用`ListADT`在线阅读中描述的接口中的方法（包括迭代器方法，如上所述）。

我怎样才能做到这一点？

# javascript - ember js表单提交查看

> ID：15181398
> 
> 赞同：1
> 
> 时间：2013-03-03T01:18:52.593
> 
> 标签：javascript, ember.js, ember-data, single-page-application

使用 emberjs (1.0.0rc1) 和 ember-data (最近的构建 #36d3f1b)，我正在尝试设置一个基本的 crud 示例。我不知道如何从视图中检索提交的模型，然后更新/保存它。这是我的代码的样子：

```
App = Ember.Application.create();

App.Router.map(function() {
  this.resource('posts', function() {
    this.route('create');
    this.route('edit', {
      path: '/:post_id'
    });
  });
});

App.PostsIndexRoute = Ember.Route.extend({
  model: function() {
    return App.Post.find();
  }
});

App.PostsCreateView = Ember.View.extend({
  submit: function () {
    console.log(this.get('model')); // undefined
  }
});

App.Post = DS.Model.extend({
  title: DS.attr('string'),
  body: DS.attr('string')
});

App.Post.FIXTURES = [{
  id: 2,
  title: 'a',
  body: 'aa'
}, {
  id: 5,
  title: 'b',
  body: 'bb'
}];

App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.FixtureAdapter.create({
    simulateRemoteResponse: false
  })
}); 
```

和创建模板：

```
<script type="text/x-handlebars" data-template-name="posts/create">
  {{#view App.PostsCreateView tagName="form" classNames="form-horizontal"}}
  <h3>Create</h3>

  <div class="control-group">
    <label class="control-label" for="title">Title</label>
    <div class="controls">
      <input type="text" id="title" placeholder="Title" />
      {{view Ember.TextField valueBinding="title"}}
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="body">Body</label>
    <div class="controls">
      <input type="password" id="body" placeholder="Body" />
    </div>
  </div>
  <div class="control-group">
    <div class="controls">
      <button class="btn">Create</button>
    </div>
  </div>

  <div>{{#linkTo 'posts'}}Back{{/linkTo}}</div>
  {{/view}}
</script> 
```

如何从提交挂钩访问表单的值（序列化到模型）？其次，我如何通过 FixtureAdapter 坚持这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:30:57.627

您的问题的第一部分很难回答，因为它实际上非常简单，但为了使其简单，您需要改变您对模型 CRUD 的看法。不需要您的“提交”功能。当你实例化一个视图时）它应该有一个绑定到它的模型实例。（如果您正在创建一个新实例，它将是一个新的空实例。）当您在视图中对该模型进行更改时，它们会立即进行；无需提交。（毕竟，你会提交什么？）

我不确定这是否真的回答了你的问题，但也许它会让你走上回答它的轨道。

我可以更确定你的第二个问题，通过 FixturesAdapter 保持一个值：你不能。FixturesAdapter 就是这样一个适配器，用于将夹具（本质上是只读数据）加载到存储中。从 FixturesAdapter 对模型所做的更改只会持续到重新加载应用程序。要持久化数据，您需要从 FixturesAdapter 转换到不同的适配器（可能是 RestAdapter）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:29:27.227

[本文](http://translate.google.com/translate?hl=en&sl=auto&tl=en&u=http%3A%2F%2Ffabriciotav.org%2Fblog%2F2013%2F02%2F20%2Fconceitos-basicos-do-emberjs.html)涉及构建一个包含创建表单的小型示例应用程序（它最初是葡萄牙语，但幸运的是，谷歌翻译在这种情况下不会过多地混淆文本）。代码可以在[这里](https://gist.github.com/fabriciotav/4980834)找到（重要的部分在页面下方）和一个活生生的例子[在这里](http://bl.ocks.org/fabriciotav/raw/4980834/)。

# parsing - 为简单语法创建 Bison 文件

> ID：15181408
> 
> 赞同：0
> 
> 时间：2013-03-03T01:20:17.843
> 
> 标签：parsing, compiler-construction, grammar, bison, yacc

我有以下简单的语法：

```
E -> T | ^ v . E 
T -> F T1 
T1 -> F T1 | epsilon
F -> ( E ) | v 
```

我对 Bison 很陌生，所以我希望有人能帮助我展示如何以这种格式写出来。到目前为止，我只有以下内容，但我不确定它是否正确：

```
 %left '.'
 %left 'v'
 %% /* The grammar follows.  */

 exp:
 term               {printf("1");}
 | '^' 'v' '.' exp  {printf("2");}
 ;

 term:
 factor term1       {printf("3");}
 ;

 term1:
 factor term1       {printf("4");}
 |                  {printf("5");}      
 ;

 factor:
 '(' exp ')'        {printf("6");}
 | 'v'              {printf("7");}
 ;
 %% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:08:19.677

您缺少几个作品中的结束分号。源语法中没有任何内容表明您需要有关行的产生式。

# javascript - 如何仅将文本框中的某些文本设为只读，同时允许编辑其余文本

> ID：15181417
> 
> 赞同：9
> 
> 时间：2013-03-03T01:21:41.770
> 
> 标签：javascript, jquery

我正在尝试使用 Javascript 创建一个文本框，该文本框在文本框的开头包含一些只读文本，然后允许在只读文本之后进行编辑。我怎样才能在 Javascript/jquery 中做到这一点？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-03T01:57:51.470

这是一个尝试：

```
var readOnlyLength = $('#field').val().length;

$('#output').text(readOnlyLength);

$('#field').on('keypress, keydown', function(event) {
  var $field = $(this);
  $('#output').text(event.which + '-' + this.selectionStart);
  if ((event.which != 37 && (event.which != 39)) &&
    ((this.selectionStart < readOnlyLength) ||
      ((this.selectionStart == readOnlyLength) && (event.which == 8)))) {
    return false;
  }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
<input id="field" type="text" value="CAN'T TOUCH THIS!" size="50" />
<div id="output">
</div>
```

这会禁用只读部分的左右箭头以外的键。它还会在只读部分结束时禁用退格键。

根据我的阅读，这不适用于 IE <= 8。

* * *

这里是纯 JavaScript（没有 JQuery）：

```
function makeInitialTextReadOnly(input) {
  var readOnlyLength = input.value.length;
  field.addEventListener('keydown', function(event) {
    var which = event.which;
    if (((which == 8) && (input.selectionStart <= readOnlyLength)) ||
      ((which == 46) && (input.selectionStart < readOnlyLength))) {
      event.preventDefault();
    }
  });
  field.addEventListener('keypress', function(event) {
    var which = event.which;
    if ((event.which != 0) && (input.selectionStart < readOnlyLength)) {
      event.preventDefault();
    }
  });
}

makeInitialTextReadOnly(document.getElementById('field'));
```

```
<input id="field" type="text" value="CAN'T TOUCH THIS!" size="50" />
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T01:51:19.087

这是一些想法

## 大致用jquery解决

html

```
<input type="text" id='myinput' value ="my text"> 
```

jQuery

```
var orginal_text = $('#myinput').val();
var regular_expression = '/^' + orginal_text +'/' ;
$('#myinput').keyup(function(){
    var current_text = $('#myinput').val();
    if(current_text.match('^' + orginal_text +'') == null){
        $('#myinput').val(orginal_text + ' ' +current_text )
    }

}) 
```

[http://jsfiddle.net/e5EDY/](http://jsfiddle.net/e5EDY/)

## 用CSS

html

```
 <input type="text" id='my_sticky_text' value ="my text" readonly='readonly'>
<input type="text" id='myinput' value ="my text"> 
```

css

```
#my_sticky_text{
    position:absolute;
    left : 0px;
}

#myinput{
    position:absolute;
    left : 50px;
    border-left:none;
} 
```

[http://jsfiddle.net/kaf4j/](http://jsfiddle.net/kaf4j/)

## 组合检索值

html

```
 <input type="text" id='my_sticky_text' value ="my text" readonly='readonly'>
<input type="text" id='myinput' value ="my text">
    <br>
    <hr>
    <button id='getval'>get value</button> 
```

css

```
#my_sticky_text{
    position:absolute;
    left : 0px;
}

#myinput{
    position:absolute;
    left : 50px;
    border-left:none;
} 
```

jQuery

```
$('#getval').click(function(){
   var sticky_text = $('#my_sticky_text').val();
    var user_text = $('#myinput').val();
alert (sticky_text + ' ' + user_text)

}) 
```

[http://jsfiddle.net/YsNMQ/](http://jsfiddle.net/YsNMQ/)

我们从这一切中得到了什么？！.. 只是你不能以一种好的方式完成你想要的.. 我无法想象我想要这样做的情况。

## 备择方案

1 - 在文本字段标签中放置常量 text 。

2-当用户提交表单时，捕获文本字段的值并将您的文本添加到其中。

3-向用户添加帮助说明，该输入应如下所示（例如：mytext-yourtext）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-31T23:36:18.040

以下是 John S 的答案的修改版本，以防止剪切/粘贴操作（例如通过右键单击）：

```
function makeInitialTextReadOnly(input) {
    var readOnlyLength = input.value.length;
    input.addEventListener('keydown', function(event) {
        var which = event.which;
        if (((which == 8) && (input.selectionStart <= readOnlyLength))
                || ((which == 46) && (input.selectionStart < readOnlyLength))) {
            event.preventDefault();
        }
    });
    input.addEventListener('keypress', function(event) {
        var which = event.which;
        if ((event.which != 0) && (input.selectionStart < readOnlyLength)) {
            event.preventDefault();
        }
    });
    input.addEventListener('cut', function(event) {
        if (input.selectionStart < readOnlyLength) {
            event.preventDefault();
        }
    });
    input.addEventListener('paste', function(event) {
        if (input.selectionStart < readOnlyLength) {
            event.preventDefault();
        }
    });
}

makeInitialTextReadOnly(document.getElementById('field')); 
```

小提琴：http: [//jsfiddle.net/p0jyktvu/3/](http://jsfiddle.net/p0jyktvu/3/)

# vim - 在 omap 映射中使用 alt 键

> ID：15181420
> 
> 赞同：1
> 
> 时间：2013-03-03T01:21:55.177
> 
> 标签：vim

我无法`Alt`在 Linux 的 omap 映射中使用该键。例如。

```
nmap <A-w> w 
```

工作正常并且行为与`w`. 但是，以下没有。

```
omap <A-w> w 
```

在 Ubuntu 中不能按预期工作，但在 Windows 中可以。我在这里想念什么？

编辑：我正在使用 gvim，但我的菜单栏已被禁用，因此无法打开 gvim 菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:28:50.910

编辑：意识到发生这种情况是因为密钥映射到 Ubuntu Unity 中的密钥。这以某种方式干扰了我的 Vim 设置。一旦我改变了那个键，一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:54:18.117

你`omap`的没问题。既然你提到你使用 gvim。我猜当你按下 时`<A-w>`，它会触发 gvim 的菜单。如果这是您的问题，您可以：

```
:set wak=no 
```

解决它。

`:h 'wak'`详情

# c++ - C++ 在 std::vector 中搜索和计算特定元素的最快方法是什么？

> ID：15181421
> 
> 赞同：0
> 
> 时间：2013-03-03T01:22:09.587
> 
> 标签：c++

我们如何在 std::vector 中搜索特定元素并对其进行计数？它必须很快。请帮忙，谢谢。

这是我到目前为止所拥有的：

```
// Lets assume the Database is sorted (which it will be)
std::vector< std::string > Database( 3 );
Database.push_back( "Password123" );
Database.push_back( "HelloWorld!!!" );
Database.push_back( "HelloWorld!!!" );
//...

std::string Password = "HelloWorld!!!";

// Search and count Password?
// Should return true and 2 
```

哦，我听说索引比迭代器慢。这是真的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:24:14.623

使用[`std::count`](http://en.cppreference.com/w/cpp/algorithm/count)？

```
int num = std::count(Data.begin(), Data.end(), target); 
```

但是如果这个“必须很快”，那么你应该考虑在查询之前对你的向量进行排序，因为这样你就可以使用更快的方法来计数（例如`std::lower_bound`和`std::upper_bound`）。

# firefox-addon - XUL：如何持久化文本框的值？

> ID：15181422
> 
> 赞同：0
> 
> 时间：2013-03-03T01:22:12.313
> 
> 标签：firefox-addon, xul

我有一个包含文本框的 Firefox 扩展：

```
<textbox id="exclude-text" flex="1" rows="10" multiline="true" style="min-width: 25em;" wrap="off" value="0" persist="value"/> 
```

用户在文本框中输入一些文本。我需要此文本在会话中持续存在。
我在“持久属性”上找到[了这个](https://developer.mozilla.org/en-US/docs/XUL/Tutorial/Persistent_Data)信息，但在我的情况下它不起作用。
有没有办法让它工作或任何简单的解决方法？
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:06:50.700

`persist`属性只能存储属性——但文本字段的属性`value`在输入文本时不会改变，只有`value`属性。据我所知，唯一的解决方法是手动保持`value`属性与属性同步，如下所示：`value`

```
<textbox id="exclude-text" value="0" persist="value"
oninput="this.setAttribute('value', this.value);document.persist(this, 'value')"/> 
```

不幸的是，调用`document.persist()`是必要的，手动更改属性通常不会触发持久性。

供参考：这是[错误 111486](https://bugzilla.mozilla.org/show_bug.cgi?id=111486)，这是 2001 年首次注意到的 XUL 限制。

# c++ - 为什么删除移动构造函数会导致向量停止工作

> ID：15181424
> 
> 赞同：12
> 
> 时间：2013-03-03T01:22:22.127
> 
> 标签：c++, c++11

如果我在一个类中禁止移动构造函数，我不能再在向量中使用它：

```
class Foo
{
  public:
      Foo(int i) : i_(i) {}
      Foo(Foo&&) = delete;

      int i_;
};

int main()
{
    std::vector<Foo> foo;
    foo.push_back(Foo(1));
} 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-03T01:58:49.217

**概括**

不要删除移动成员。

* * *

假设您的编译器完全符合 C++11，那么显式删除移动构造函数也将*隐式*声明以下内容：

```
Foo(const Foo&) = delete;
Foo& operator=(const Foo&) = delete; 
```

也就是说，如果您声明了一个移动构造函数（或移动赋值运算符），并且不声明复制成员，它们将被隐式声明为已删除。所以你的完整类 Foo 就像：

```
class Foo
{
  public:
      Foo(int i) : i_(i) {}
      Foo(Foo&&) = delete;
      Foo(const Foo&) = delete;             // implicitly declared
      Foo& operator=(const Foo&) = delete;  // implicitly declared

      int i_;
}; 
```

现在`vector<Foo>::push_back(Foo(1))`要求`Foo`是`MoveConstructible`。 `MoveConstructible`可以通过可访问的移动构造函数，甚至可以通过可访问的复制构造函数来满足。但`Foo`两者都没有。要修复你可以：

```
class Foo
{
  public:
      Foo(int i) : i_(i) {}
      Foo(const Foo&) = default;
      Foo& operator=(const Foo&) = default;

      int i_;
}; 
```

即默认复制成员并删除已删除的移动成员。

一般来说，显式删除移动成员不是一个好主意。如果您希望一个类是可复制的但不是“可移动的”，只需像在 C++03 中一样声明：声明/定义您的复制成员。您可以让复制成员使用 编译器生成`= default`，这仍然算作用户声明。并且不要声明移动成员。不存在的移动成员与已删除的移动成员不同。

删除的移动成员意味着您不能`Foo`从右值构造副本，即使复制构造函数可以正常工作。这很少是期望的意图。

即使您希望您的类不可复制或移动，最好只删除复制成员并保留未声明的移动成员（这意味着它们将不存在）。如果你曾经审查过代码（包括你自己的），并且看到删除的 move 成员，它们几乎肯定是不正确的，或者最好是多余的和令人困惑的。

有一天，有人会为已删除的移动成员提出一个很好的用例。但这将是一个罕见的用例。如果您在代码中看到这样的模式，您应该期望代码作者有一个很好的解释。否则，删除的移动成员可能只是不正确的（充其量是多余的）。但从好的方面来说，这个错误会在编译时显示出来，而不是在运行时（如你的例子中）。

这是当您显式声明任何特殊成员时编译器将隐式执行的摘要图表。那些红色的方块代表不推荐使用的行为。

![在此处输入图像描述](../Images/b8a3db6887f48d01d28cb917310e8d5b.png)

`= default`并`= delete`算作*user-declared*。

如果您想查看完整的幻灯片，请[单击此处。](http://accu.org/content/conf2014/Howard_Hinnant_Accu_2014.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T00:47:06.060

你说：

> 我不能再在向量中使用它：

但是，从 C++11 开始，在向量中使用的要求很少；相反，每个向量操作都有自己的要求。因此，实际上您可以`Foo`在向量中使用，但仅限于不可能要求移动或复制对象的操作。

例如你可以写：

```
std::vector<Foo> w(5);
w.pop_back(); 
```

你也可以打电话`w[0].some_member_function();`等等。

但是，由于您定义的方式，您不能编写以下任何内容`Foo`：

```
std::vector<Foo> w = { 1, 2, 3 };   // Requires moving elements out of initializer_list
w.resize(5);        // Resize may mean reallocation which may require elements to be moved to new location
w.push_back(5);     // ditto
w.erase(w.begin()); // Erasing an element may require other elements to move to fill its place
w[0] = 1;           // operator= is implicitly deleted as described in Howard's answer (but you could explicitly default it to make this work) 
```

如果您想要`Foo`可复制但不可移动——并且任何移动场景都回退到使用副本——那么做到这一点的唯一方法就是根本不声明任何移动构造函数；*并*通过声明析构函数、复制构造函数和/或复制赋值运算符来强制禁止编译器生成的移动构造函数，如 Howard 的表中所示。

有关此示例，请参阅霍华德答案中的最后一个代码示例。

需要明确的是，移动构造函数实际上有几种不同的可能状态，霍华德的表格中并未全部显示：

1.  定义为已删除，用户自定义
2.  定义为已删除，而不是用户定义（当成员不可移动时会发生这种情况）
3.  默认和用户定义
4.  默认且非用户定义
5.  用户提供（即用户定义，既不默认也不删除）
6.  未申报

在上述情况 1、3、4、5 中，移动构造函数是通过重载决议找到的。在情况 2 和 6 中，重载决议找不到；和复制/移动场景，例如`push_back(Foo(1));`将回退到复制构造函数（如果有的话）。

# javascript - doGet 宏错误

> ID：15181426
> 
> 赞同：0
> 
> 时间：2013-03-03T01:22:41.343
> 
> 标签：javascript, google-apps-script, google-drive-api

我安装了这个（[http://www.youtube.com/redirect?q=https%3A%2F%2Fgithub.com%2Fentaq%2FGoogleAppsScript%2Ftree%2Fmaster%2FScriptDbVisualizer&session_token=bydEWEJYqmFTjUAF1GnS7tK7yBl8MTM2MjI4Njk1M0AxMzYyMjcyNTUz](http://www.youtube.com/redirect?q=https%3A%2F%2Fgithub.com%2Fentaq%2FGoogleAppsScript%2Ftree%2Fmaster%2FScriptDbVisualizer&session_token=bydEWEJYqmFTjUAF1GnS7tK7yBl8MTM2MjI4Njk1M0AxMzYyMjcyNTUz)） scriptDBConsole 是否是我的数据正确存储在 ScriptDB 中。

当我运行 Web 应用程序时，出现一个错误，提示：**未知宏 doGet**

我认为可能是我的一些原始编码搞砸了，所以我尝试将 Web 应用程序作为一个仅使用原始编码的新项目运行，但仍然出现错误。

不知道错误是什么......所有授权都是正确的。

如果有人可以对此提供见解，将不胜感激！

~诺艾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T14:18:00.067

来自菲尔·博扎克：

在脚本编辑器中，尝试从下拉菜单中选择 doGet 并在那里运行它。似乎 doGet 的定义不正确。我从 github 复制了所有代码，它对我有用。

# mongodb - 用于 mongodb 的 Spring Roo Finder

> ID：15181428
> 
> 赞同：3
> 
> 时间：2013-03-03T01:23:12.363
> 
> 标签：mongodb, spring-roo

我可以使用 roo 和 mongodb 创建查找器吗？它似乎不支持，但我找不到任何地方这么说。

我收到错误/信息：找到命令“查找列表”，但当前不可用（输入“帮助”，然后按 ENTER 了解此命令）

所以问题是如何创建自己的查找器？我在网上找到的所有示例都是针对关系数据库的，找不到用于 mongodb 的示例。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T20:18:26.177

[您可以在 Spring Data MongoDB - 参考文档的查询方法部分](http://docs.spring.io/spring-data/data-mongo/docs/1.3.2.RELEASE/reference/html/mongo.repositories.html#mongodb.repositories.queries)了解如何创建自己的查找器。

在带有 mongodb 设置的 Spring Roo 中，您的 Repository 接口已经扩展了 PagingAndSortingRepository。

如果您有一个具有“lastName”属性的模型 Person，您可以在 Repository 接口中声明一个方法 findByLastname(String lastname)。例如

```
@RooMongoRepository(domainType = Person.class)
public interface PersonRepository {
    List<Person> findAll();
    List<Person> findByLastname(String lastname);
} 
```

有关如何创建其他查找器，请查看上面给出的链接中的“**表 6.1\. 查询方法支持的关键字”。**

# embedded - 虚拟 COM 通信问题

> ID：15181430
> 
> 赞同：4
> 
> 时间：2013-03-03T01:23:37.223
> 
> 标签：embedded, usb, .net-2.0, serial-communication, cdc

我正在为嵌入式设备开发通信设备类 (CDC) 驱动程序，即 USB 2.0 的**全速**实现。COM 端口设置为 115200、8 位、无奇偶校验、1 个停止位、无流量控制。我们的 PC 应用程序（32 位、Windows 7、.NET 2.0）通过虚拟 COM 端口与目标设备进行通信，目标设备上的该端口可以连接到 FTDI（USB-to-SCI 桥接器）芯片或集成的 USB微控制器中的外围设备，具体取决于应用程序选择的端口。

使用 Realterm 时，两个虚拟 COM 端口都可以正常工作。然而，虽然我们的桌面应用程序使用通过 FTDI 芯片连接的虚拟 COM 端口工作，但在尝试使用通过微控制器的集成 USB 外围设备连接的虚拟 COM 时，它会挂起。

当使用集成 USB 通过虚拟 COM 端口连接时，应用程序在第二次调用`SerialPort.Write(...)`. 使用[HHD Software 的串行监视器，](http://www.hhdsoftware.com/serial-monitor)我可以看到数据在第一次调用时传输到`SerialPort.Write(...)`. 但是，目标设备永远不会接收到该数据。

这很奇怪，因为我在以前的项目中唯一一次看到类似问题是总线两侧的流量控制设置不匹配。

**附加信息...**

* * *

这是在运行通过集成 USB 外设连接到目标设备的 PC 应用程序时从各种端口监控工具捕获的数据。任何见解将不胜感激。

*   [Sysinternals Portmon](http://pastebin.com/zKSfEVuS)
*   [高级 USB 端口监视器](http://pastebin.com/Sc2ppWje)
*   [设备监控工作室 - 请求查看](http://pastebin.com/ChipjJBa)
*   [设备监控工作室 - 数据包视图](http://pastebin.com/vb8CWCzw)

对于那些感兴趣的人，我正在使用 CodeWarrior 10.2 和飞思卡尔的 MCF51JM128。

* * *

任何想法或建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T19:16:15.637

从日志中可以清楚地看出，您犯了不注意硬件握手信号的经典错误。这只是偶然的，像 Realterm 这样的终端仿真器永远不会犯这个错误。

您必须将 DtrEnable 属性设置为 true。这将打开数据终端就绪信号。这很重要，因为 RS-232 是未端接的总线，因此当电缆断开或电源关闭时会受到电气噪声的影响。DTR 使设备相信它实际上已连接到受电设备。这当然是在您的情况下模拟的，但驱动程序或固件通常仍会实现 RS-232 行为。

RtsEnable 属性很重要，用于与设备握手，防止应用程序未及时清空缓冲区时接收缓冲区溢出。您确实应该将 Handshake 属性设置为 Handshake.RequestToSend，这是设备实现它的最常见方式。然后它还负责打开 RTS。如果出于某种原因必须使用 Handshake.None，则*必须*通过将 RtsEnable 设置为 true 来自行打开它。

这应该解决问题。如果您仍然遇到问题，请使用 PortMon 监视 Realterm 初始化驱动程序的方式。将您看到的命令与 SerialPort 类发送的命令进行比较。确保它们相同。在价值上，而不是在顺序上。

# javascript - 平滑的视图区域过渡

> ID：15181432
> 
> 赞同：2
> 
> 时间：2013-03-03T01:23:48.617
> 
> 标签：javascript, jquery, html, canvas, jquery-animate

正如您在此 JSFiddle 中看到的那样：http: [//jsfiddle.net/EychPixels/pABPv/1/](http://jsfiddle.net/EychPixels/pABPv/1/)，当您使用箭头键移动角色直到视图区域随之移动时，角色似乎向后移动 1 格然后向前1个瓷砖。有没有办法解决这个问题，比如用角色为视图区域设置动画？对于我用 jQuery 使用的角色动画`.animate`，是否可以对视图区域做同样的事情？如果是这样，我可以使用我的代码查看此示例吗？

如果您需要更多详细信息来回答问题，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:02:46.947

对于您当前的代码，阻力最小的路径（即需要更改更少代码的方式）将是`now`在动画期间传递给绘图函数，如果视口也应该动画。然后您可以按照@jimjimmy1995 的建议（撤消`player.x`更改并进行相反的`world.x`更改）。

[这个小提琴](http://jsfiddle.net/mgibsonbr/pABPv/3/)提供了一个粗略的例子（仅适用于“向下”键）。细节：

1.  确定视口是否在动画期间移动：

    ```
     var move = Math.round(playerY+1) - Math.floor(0.5 * vHeight) > vY; 
    ```

2.  `now`将函数传递给`draw`（仅当视口移动时）：

    ```
     step: function(now) {
               playerY = now;
                draw(move ? now-start : 0);
            } 
    ```

3.  在`draw`调整视口和玩家位置：

    ```
    function draw(now) {
        if ( !now )
            now = 0;
        ...
                theY = (y-now) * 32;
        ...
        context.fillRect((playerX-vX)*32, (playerY-vY-now)*32, 32, 32); 
    ```

4.  绘制一个“额外”的瓦片，以补偿空白空间（示例中未实现）；

5.  当动画结束时，再次绘制它，使用`now == 0`（示例中未实现）。

仍然存在一些小故障，但应该作为未来改进的基础。

# javascript - 当我返回页面时 JQuery 停止工作

> ID：15181434
> 
> 赞同：0
> 
> 时间：2013-03-03T01:23:59.773
> 
> 标签：javascript, jquery, html

我实现了一个脚本，它加载另一个页面而不刷新页面，一切都按预期工作。但是我有一个错误/问题：如果我尝试从“index.html”转到“about.html”页面（例如）并返回“index.html”，则索引页面上的 jquery 函数会隐藏标签之间的元素`<p></p>`停止工作:(任何人都知道为什么会发生这种情况以及最重要的如何解决它？

这是我的索引页：

```
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>PAGE1!</title>
<script type="text/javascript" src="jquery.js"></script>
<style type="text/css">
@import url(css.css);
</style>
<script type="text/javascript" src="js.js"></script>

<script>
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
});
</script>
</head>
<body>​​​​​
    <div id="wrapper">
    <h1>Test</h1>
    <ul id="nav">
        <li><a href="index.html">welcome</a></li>
        <li><a href="about.html">about</a></li>
        <li><a href="portfolio.html">portfolio</a></li>
        <li><a href="contact.html">contact</a></li>
        <li><a href="terms.html">terms</a></li>
    </ul>
    <div id="content">
    <p>If you click on me, I will disappear.</p>
    <p>Click me away!</p>
    <p>Click me too!</p>
</div>

​​​​​&lt;/body></html> 
```

这是关于页面：

```
<html>
<head>
<script src="jquery.js">
</script>
<script>
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
});
</script>
</head>
<body>  

<div id="content">
    <p>ABOUT HERE.</p>

</div>

</body>
</html> 
```

这是我的 JS 代码，它在不刷新的情况下加载页面：

```
$(document).ready(function() {

var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #content';
    $('#content').hide('fast',loadContent);
    $('#load').remove();
    $('#wrapper').append('<span id="load">LOADING...</span>');
    $('#load').fadeIn('normal');
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#content').show('normal',hideLoader());
    }
    function hideLoader() {
        $('#load').fadeOut('normal');
    }
    return false;

}); 
```

});

提前谢谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:31:58.923

发生这种情况的原因是因为 jQuery 函数不能立即使用新的 DOM 元素，因此您需要使用该`on`函数，假设您使用的是 jQuery > 1.7 的版本，如果不是，则需要使用该`live`函数。

代替

```
$(document).ready(function(){
  $("p").click(function(){
    $(this).hide();
  });
}); 
```

和

```
$(document).ready(function(){
  $("body").on("click", "p", function(){
    $(this).hide();
  });
}); 
```

或者，对于旧版本的 jQuery：

```
$(document).ready(function(){
    $("p").live("click", function(){
        $(this).hide();
    });
}); 
```

或者，您也可以将 p 隐藏函数放在现有`loadContent`函数中：

```
function loadContent() {
    $('#content').load(toLoad,'',showNewContent());

    $("p").click(function(){
        $(this).hide();
    });
} 
```

# css - 为什么 SVG 不通过 css background-image 显示

> ID：15181440
> 
> 赞同：1
> 
> 时间：2013-03-03T01:24:41.537
> 
> 标签：css, svg, background-image

当我使用时，我可以让 svg 显示得很好

```
<img src="../images/jte.svg" alt="Logo"> 
```

但是，当我尝试使用以下内容通过 css 显示时：

html

```
<div class="logo2">
</div> 
```

css

```
.logo2 {
background-image: url(jte.svg);
} 
```

什么都没有显示。知道为什么会这样吗？我尝试了多种不同的路径选项“（'../images/jte.svg'）（'jte.svg）但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-28T07:09:59.933

为相关元素使用定义的宽度和高度，或者简单地将其附加到正文。例如：

```
body { background-image: url('https://cdn.sstatic.net/Sites/stackoverflow/img/sprites.svg')
```

# silverlight - Windows Phone Toolkit 上下文菜单项在删除然后添加项时绑定了错误的对象

> ID：15181441
> 
> 赞同：4
> 
> 时间：2013-03-03T01:24:52.360
> 
> 标签：silverlight, windows-phone, silverlight-toolkit

我刚刚遇到了一个严重的上下文菜单问题，几个小时都无法解决。

为了重现该问题，我在 Visual Studio 2012 中使用 Windows Phone 8 的应用模板创建了一个全新的全景应用。我通过 nugget 安装了 Windows Phone 工具包，并在绑定到 Items 的第一个长列表选择器的数据模板中添加了上下文菜单

```
<StackPanel Margin="0,-6,0,12">
    <TextBlock Text="{Binding LineOne}" TextWrapping="Wrap" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="{StaticResource PhoneFontSizeExtraLarge}"/>
    <toolkit:ContextMenuService.ContextMenu>
        <toolkit:ContextMenu>
            <toolkit:MenuItem Header="{Binding LineOne}" Click="MenuItem_Click_1" Tag="{Binding}">
            </toolkit:MenuItem>
        </toolkit:ContextMenu>
    </toolkit:ContextMenuService.ContextMenu>
</StackPanel> 
```

我将标头设置为 LineOne 属性以便于调试。我附上了以下事件：

```
private void MenuItem_Click_1(object sender, RoutedEventArgs e)
{
    var itemViewModel = (ItemViewModel)((MenuItem)sender).Tag;
    App.ViewModel.Items.Remove(itemViewModel);
    App.ViewModel.Items.Add(new ItemViewModel { LineOne = "Test", LineTwo = "Test", LineThree = "Test" });
} 
```

我运行应用程序并使用上下文菜单删除第一项。第一项消失了，一个名为 Test 的新项按预期出现在列表底部。如果我持有这个新项目，则菜单项将绑定到“运行时之一”（已删除的项目）。

这是我可以重现错误的最简单的代码，但在我的真实应用程序中，我遇到了几乎相同的问题，在不同的方法甚至不同的页面中添加和删除更有意义的代码。我有一个命令绑定，但由于数据绑定错误，因此命令在错误的视图模型中运行，参数错误。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T16:36:00.587

对于像我这样不想重新编译工具包的人来说，这是一个基于 pantaloons 答案的简单解决方法。简单添加 Opened 事件处理程序：

```
<toolkit:ContextMenu Opened="ContextMenu_Opened">
...
</toolkit:ContextMenu> 
```

事件处理程序代码：

```
private void ContextMenu_Opened(object sender, RoutedEventArgs e)
{
    var menu = (ContextMenu)sender;
    var owner = (FrameworkElement)menu.Owner;
    if (owner.DataContext != menu.DataContext)
        menu.DataContext = owner.DataContext;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T02:25:33.460

LongListSelector 是一个虚拟化控件，这意味着它会实例化您指定固定次数（我认为是 20 次）的 DataTemplate，然后在您向下滚动列表时重用这些 Item 容器，只需移动它们并重新绑定它们的 DataContext。这样，您就可以拥有非常大的列表，而无需将所有列表都放在可视树中。

[http://phone.codeplex.com/SourceControl/changeset/view/80797#1335947](http://phone.codeplex.com/SourceControl/changeset/view/80797#1335947)的 ContextMenu 代码在函数中有以下几行`OpenPopup()`；

```
if (ReadLocalValue(DataContextProperty) == DependencyProperty.UnsetValue)
{
    DependencyObject dataContextSource = Owner ?? _rootVisual;
    SetBinding(DataContextProperty, new Binding("DataContext") { Source = dataContextSource });
} 
```

您会看到这里有一个错误，因为当虚拟化容器重新绑定 DataContext 时，它不会在 _rootVisual 上得到更新，因为它假定现有的 DataContext 是正确的。解决方法是将检查更改为：

```
if (ReadLocalValue(DataContextProperty) == DependencyProperty.UnsetValue ||
    (DataContext != dataContextSource.DataContext))
{
    DependencyObject dataContextSource = Owner ?? _rootVisual;
    SetBinding(DataContextProperty, new Binding("DataContext") { Source = dataContextSource });
} 
```

# java - 在 java GAE 的 url 中禁用 jsessionid

> ID：15181444
> 
> 赞同：1
> 
> 时间：2013-03-03T01:25:28.373
> 
> 标签：java, google-app-engine, jsessionid

我对 url 中的 jsessionid 有一个问题。我只想将 jsessionid 与 cookie 一起使用，但我尝试了一切，包括将其添加到 web.xml。

```
<session-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T10:08:13.150

使用 servlet 3.0 版本并将其添加到`web.xml`：

```
<session-config>
    <cookie-config>
        <http-only>true</http-only>
    </cookie-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

# css - 用普通子类编写 CSS 类的更好方法

> ID：15181449
> 
> 赞同：2
> 
> 时间：2013-03-03T01:26:00.460
> 
> 标签：css, css-selectors

假设这是我的 HTML：

```
<div class="example">
  <span></span>
</div>

<div class="test">
  <span></span>
</div>

<div class="foo">
  <span></span>
</div>

<div class="blah">
  <span></span>
</div> 
```

我想设计`span`除`span`in之外的所有样式`.foo`。我不能使用`:not`，因为在我的实际代码中我想忽略的 s （父元素）太多了`div`，比我试图定位的父元素还要多。所以这就是我目前正在做的事情：

```
.example span, .test span, .blah span { 
```

如果它只是一个规则，这有点体面，但事实并非如此；我的代码最终看起来像这样：

```
.example span, .test span, .blah span {
}

.example span:hover, .test span:hover, .blah span:hover {
}

.example span:before, .test span:before, .blah span:before,
.example span:after, .test span:after, .blah span:after {
} 
```

这很快就会变得乏味。有什么更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:31:43.333

CSS 很乏味。使用 SASS 或 LESS 来编译你的 CSS 并省去一些麻烦。

在 SCSS (SASS) 中：

```
.example,
.test,
.blah {
  span {
    &:hover {

    }
    &:before,
    &:after {

    }
  }
} 
```

了解更多信息： [http://sass-lang.com](http://sass-lang.com)和[http://compass-style.org](http://compass-style.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:36:19.497

您可以在您的 div 中添加额外的类并将它们链接到您的声明中；所以假设你想在 div.blah 的跨度上添加 .bold 类，你会这样做： `.blah.bold span{}` 如果不检查，这也很容易变得臃肿，但在你的情况下听起来很合适。

# java - 这些摇摆颜色名称是什么意思

> ID：15181451
> 
> 赞同：1
> 
> 时间：2013-03-03T01:26:13.403
> 
> 标签：java, swing, jradiobutton, uimanager

有些名称很清楚，例如背景、前景、焦点等。但有些名称只是令人困惑，例如 light、hightlight、shadow、darkshardow 等。我注意到这些名称在 swing UI 中一直使用，所以我推断这些是 java 的一部分行话。有没有人知道那里是否有解释这些名称的文件？

```
RadioButton.background  
RadioButton.darkShadow  
RadioButton.disabledText    
RadioButton.focus           
RadioButton.foreground  
RadioButton.highlight   
RadioButton.light           
RadioButton.select          
RadioButton.shadow 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T03:17:26.180

这些是`UIResource`与`JRadionButton`. 每个都`Look & Feel`提供不同的单选按钮外观，并且可以为这些元素设置不同的默认值。是否使用这些密钥也取决于 L&F 的实施。

例如，这是一个`javax.swing.plaf.basic.BasicBorders`使用`RadioButton.light`and的方法`RadioButton.highlight`：

```
public static Border getRadioButtonBorder() {
UIDefaults table = UIManager.getLookAndFeelDefaults();
Border radioButtonBorder = new BorderUIResource.CompoundBorderUIResource(
           new BasicBorders.RadioButtonBorder(
                   table.getColor("RadioButton.shadow"),
                                       table.getColor("RadioButton.darkShadow"),
                                       table.getColor("RadioButton.light"),
                                       table.getColor("RadioButton.highlight")),
                     new MarginBorder());
return radioButtonBorder;
} 
```

但是，具体的 L&F 实现可能不会使用它。

PS： @camickr 的[UIManager 默认值](http://tips4java.wordpress.com/2008/10/09/uimanager-defaults/)可以方便地可视化不同的键。

# javascript - 如何将带有css样式的内联SVG从浏览器保存/导出到图像文件

> ID：15181452
> 
> 赞同：26
> 
> 时间：2013-03-03T01:26:14.157
> 
> 标签：javascript, image, browser, svg, export

我有一个 Web 应用程序，它根据用户交互在客户端动态生成内联 SVG 图形。图形部分由元素属性定义，部分由 CSS 类和 id 定义。

我希望能够为客户端提供一个选项，将内联 SVG 的副本保存为位图或 .svg 图像文件。从外部 css 样式文件应用所有样式很重要。如何提供此功能以保存为 .svg 或位图 (.gif) 最好在浏览器中使用 javascript 或在服务器上使用 node.js ？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-05-23T09:34:29.507

为什么不复制 SVG 节点/树，然后采用每个标签定义的样式（您将需要原始树，因为如果元素是较长树的一部分，则副本可能没有样式）。这可确保您仅复制 CSS 文件中设置的相关样式。在将包发送到 blob 之前可以轻松设置导出类型

```
var ContainerElements = ["svg","g"];
var RelevantStyles = {"rect":["fill","stroke","stroke-width"],"path":["fill","stroke","stroke-width"],"circle":["fill","stroke","stroke-width"],"line":["stroke","stroke-width"],"text":["fill","font-size","text-anchor"],"polygon":["stroke","fill"]};

function read_Element(ParentNode, OrigData){
    var Children = ParentNode.childNodes;
    var OrigChildDat = OrigData.childNodes;     

    for (var cd = 0; cd < Children.length; cd++){
        var Child = Children[cd];

        var TagName = Child.tagName;
        if (ContainerElements.indexOf(TagName) != -1){
            read_Element(Child, OrigChildDat[cd])
        } else if (TagName in RelevantStyles){
            var StyleDef = window.getComputedStyle(OrigChildDat[cd]);

            var StyleString = "";
            for (var st = 0; st < RelevantStyles[TagName].length; st++){
                StyleString += RelevantStyles[TagName][st] + ":" + StyleDef.getPropertyValue(RelevantStyles[TagName][st]) + "; ";
            }

            Child.setAttribute("style",StyleString);
        }
    }

}

function export_StyledSVG(SVGElem){

    var oDOM = SVGElem.cloneNode(true)
    read_Element(oDOM, SVGElem)

    var data = new XMLSerializer().serializeToString(oDOM);
    var svg = new Blob([data], { type: "image/svg+xml;charset=utf-8" });
    var url = URL.createObjectURL(svg);

    var link = document.createElement("a");
    link.setAttribute("target","_blank");
    var Text = document.createTextNode("Export");
    link.appendChild(Text);
    link.href=url;

    document.body.appendChild(link);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-02T00:42:45.870

在保存之前，您需要将计算的 css 样式显式设置为每个 SVG 元素的 SVG dom 样式属性。这是一个例子：

```
<html>
    <body>
    <!-- in this example the inline svg has black backgroud-->
    <svg id="svg" xmlns="http://www.w3.org/2000/svg" version="1.1" height="190">
        <polygon id="polygon" points="100,10 40,180 190,60 10,60 160,180" style="stroke:purple;stroke-width:5;">
    </svg>
    <style>
        /* the external svg style makes svg shape background red */
        polygon 
        {
            fill:red;
        }
    </style>
<svg id="emptysvg" xmlns="http://www.w3.org/2000/svg" version="1.1" height="2"/>
<br/>
image original:
<canvas id="canvasOriginal" height="190" width="190" ></canvas>
<br/>
image computed:
<canvas id="canvasComputed" height="190" width="190" ></canvas>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/rgbcolor.js"></script> 
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/StackBlur.js"></script>
<script type="text/javascript" src="http://canvg.googlecode.com/svn/trunk/canvg.js"></script> 
<script src="http://www.nihilogic.dk/labs/canvas2image/canvas2image.js"></script>
<script type="text/javascript">
var svg = $('#svg')[0];
var canvasOriginal = $('#canvasOriginal')[0];
var ctxOriginal = canvasOriginal.getContext('2d');
var canvasComputed=$('#canvasComputed')[0];
var ctxConverted=canvasComputed.getContext("2d");
// this saves the inline svg to canvas without external css
canvg('canvasOriginal', new XMLSerializer().serializeToString(svg));
// we need to calculate the difference between the empty svg and ours
var emptySvgDeclarationComputed = getComputedStyle($('#emptysvg')[0]);
function explicitlySetStyle (element) {
    var cSSStyleDeclarationComputed = getComputedStyle(element);
    var i, len, key, value;
    var computedStyleStr = "";
    for (i=0, len=cSSStyleDeclarationComputed.length; i<len; i++) {
        key=cSSStyleDeclarationComputed[i];
        value=cSSStyleDeclarationComputed.getPropertyValue(key);
        if (value!==emptySvgDeclarationComputed.getPropertyValue(key)) {
            computedStyleStr+=key+":"+value+";";
        }
    }
    element.setAttribute('style', computedStyleStr);
}
function traverse(obj){
    var tree = [];
    tree.push(obj);
    if (obj.hasChildNodes()) {
        var child = obj.firstChild;
        while (child) {
            if (child.nodeType === 1 && child.nodeName != 'SCRIPT'){
                tree.push(child);
            }
            child = child.nextSibling;
        }
    }
    return tree;
}
// hardcode computed css styles inside svg
var allElements = traverse(svg);
var i = allElements.length;
while (i--){
    explicitlySetStyle(allElements[i]);
}
// this saves the inline svg to canvas with computed styles
canvg('canvasComputed', new XMLSerializer().serializeToString(svg));
$("canvas").click(function (event) {
    Canvas2Image.saveAsPNG(event.target);
});
</script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-02T09:04:48.393

如果您的 css 规则不是太复杂，您可以执行以下步骤：

1.  阅读 .css 文件，其中包含所有 css 规则。如果需要，您可以使用不同的 css 文件并将其放在服务器上，您只能将其用于此目的。

    ```
    function readTextFile(file) {
        var rawFile = new XMLHttpRequest();
        var allText = '';
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function () {
            if(rawFile.readyState === 4) {
                if(rawFile.status === 200 || rawFile.status == 0) {
                    allText = rawFile.responseText;
                }
            }
        };
        rawFile.send(null);
        return allText;
    }

    var svg_style = readTextFile(base_url + '/css/svg_sm_dashboard.css'); 
    ```

2.  现在将样式应用于所有 svg 元素

    ```
    var all_style = svg_style.replace(/\r?\n|\r/g,'').split('}');
    all_style.forEach(function(el) {
        if (el.trim() != '') {
            var full_rule_string = el.split('{');
            var selector = full_rule_string[0].trim();
            var all_rule = full_rule_string[1].split(';');
            all_rule.forEach(function (elem) {
                if (elem.trim() != '') {
                    var attr_value = elem.split(':');
                    //d3.selectAll(selector).style(attr_value[0].trim() + '', attr_value[1].trim() + '');
                    var prop = attr_value[0].trim();
                    var value = attr_value[1].trim();

                    d3.selectAll(selector).each(function(d, i){
                        if(!this.getAttribute(prop) && !this.style[prop]){
                            d3.select(this).style(prop + '', value + '');
                        }
                    });
                }
           });
       }
    }); 
    ```

3.  使用canvg进行转换

    ```
    $('body').after('<canvas id="sm_canvas" style="display=none;"></canvas>');
    var canvas = document.getElementById('sm_canvas');
    canvg(canvas, $("<div>").append($('svg').clone()).html()); 
    ```

4.  从画布中获取图像

    ```
    var imgData = canvas.toDataURL('image/jpeg'); 
    ```

# git - 是否可以找到在 GitHub 上签出我的项目的用户？

> ID：15181453
> 
> 赞同：58
> 
> 时间：2013-03-03T01:26:19.287
> 
> 标签：git, github, git-clone

我想知道是否有任何方法可以知道谁签出了我托管在 GitHub 上的项目？这将包括直接在 GitHub 上 fork 项目的人，以及可能使用标准`git clone`命令克隆存储库的人。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-03T01:30:17.037

如果“签出”是指克隆了您的项目的人，那么不，这是不可能的。您甚至不需要成为 GitHub 用户来克隆存储库，因此跟踪它是不可行的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-03-03T02:16:46.287

## 使用 GitHub 网络图跟踪分叉

您无法使用标准 git 命令（例如 ）查看谁签出了您的存储库`git clone`，但您*可以使用*[Network Graph Visualizer](https://github.com/blog/39-say-hello-to-the-network-graph-visualizer)查看谁在 GitHub 上创建了您的存储库。在回答此问题时，您至少可以通过两种方式访问​​此功能：

1.  从存储库顶部导航栏上“代码”选项卡右侧的“网络”选项卡。
2.  通过单击右侧“Fork”小部件右侧的标注中的数字（如果非零）。

例如，这里是[rbenv 网络图](https://github.com/sstephenson/rbenv/network)的部分截图：

![rbenv 网络图](../Images/f8f7e8562e79cebddd70ffc94a8dd8c5.png)

网络图顶部的“成员”选项卡也将显示不同的视图，列出当前在 GitHub 上拥有分叉的人的姓名。它显然不会显示在 GitHub 之外克隆的人，或随后删除其分叉的人。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-03-07T16:36:40.637

我相信这是一个老问题，Traffic 是在 2014 年由 Github 引入的。[这里是](https://github.com/blog/1672-introducing-github-traffic-analytics)Traffic 描述的链接，它告诉你对你的存储库的看法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-01-31T17:20:09.280

转到图表内的流量部分。在这里，您可以找到您拥有的唯一身份访问者数量。除此之外，没有其他方法可以知道谁查看了您的帐户。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2020-06-07T13:38:07.350

假设我们有一个项目**social_login**。要检查您的仓库的流量，您可以转到[https://github.com/](https://github.com/) /social_login/graphs/traffic

* * *

*   例子：-

    [https://github.com/balireddypraveen/social_login/graphs/traffic](https://github.com/balireddypraveen/social_login/graphs/traffic)

# php - Wordpress 仅显示儿童和儿童

> ID：15181456
> 
> 赞同：0
> 
> 时间：2013-03-03T01:26:53.377
> 
> 标签：php, wordpress, list, categories

我想显示一个类别子项和该子项下的每个子项。

我的结构看起来像这样

*   第 1 页
    *   第 11 页
    *   第 12 页
        *   第 123 页
*   第2页
    *   第 22 页
    *   第 23 页
        *   第 234 页
*   第 3 页

即使它有一个 Parent 我不想显示它，我只想显示第 12 页和下一级，以及第 23 页和下一级。如果第 234 页有孩子，则不应显示！

我的代码，它在循环内。它显示第 1、2 和 3 页下的每个类别。这就是`wp_list_categories`做什么，但我如何用可能`wp_list_categories`或解决这个问题`get_category`？

```
<?php
if (is_category( )) {
  $cat = get_query_var('cat');
  $parent = get_category ($cat);
  if ($parent->parent) {
    wp_list_categories ('title_li=&child_of=' . $parent->parent);
  } else {
    wp_list_categories ('title_li=&child_of=' . $cat);
  }
}

?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T08:48:23.353

您可以使用`depth`参数来决定要包含在列表中的级别数。

我的结构：

*   1 类 (ID: 238)
    *   猫 1.1 (ID: 239)
    *   猫 1.2 (ID: 240)
        *   猫 1.2.1 (ID: 241)

示例代码来自`category.php`：

```
$cat = get_query_var('cat');

$catObj = get_category($cat);
echo $catObj->name;

$args = array('hide_empty' => 0, 'child_of' => $cat, 'depth' => 1, 'title_li' => "");
wp_list_categories ($args); 
```

输出`/?cat=238`：

*   猫 1
    *   猫 1.1
    *   猫 1.2

输出`/?cat=240`：

*   猫 1.2
    *   猫 1.2.1

你可以忽略`hide_empty`和`title_li`我使用的参数。查看附加参数的`wp_list_categories()` [参考](http://codex.wordpress.org/Template_Tags/wp_list_categories)。

# php - 图像 DIV 覆盖子 DIV

> ID：15181458
> 
> 赞同：0
> 
> 时间：2013-03-03T01:27:22.030
> 
> 标签：php, css, html

我有一个简单的程序，可以将图像从数据库中回显到页面。我想要一个子元素，只是在图像顶部显示一个简单的略透明的框。

我知道子元素的 z-index 总是比它的父元素高，但图像总是覆盖我想要在顶部的框。当页面加载时，我可以在我想要的位置看到框，但是当图像加载并且框消失时。

这是一个 jsFiddle：http: [//jsfiddle.net/EBvCZ/](http://jsfiddle.net/EBvCZ/)

# PHP

```
echo '<div id="wrapper">';
   while ($data = mysql_fetch_array($query_run)) {                                      
      echo '<div id="picback"><div id="centerpic"><a href="image.php?photo_id='.$data['photo_id'].'" title="View Photo"><'.'img src="resizeimage.php?photo_id='.$data['photo_id'].'"></a>';
      echo '<br style="clear:both;" />';
      echo '<div id="titlepic">This is an image</div>';
        echo '</div></div>';
   }
echo '</div> 
```

# CSS

```
#wrapper {
   overflow:auto;
   width:1000px;
   height:1000px;
   margin: 20px auto;
}

#titlepic {
   background-color:rgba(0, 0, 0, 0.5);
   top:100px;
   width:200px;
   height:35px;
   position:relative;
}

#centerpic {
    position:relative;
   margin:auto;
   width: 200px;
   height: 150px;
   top:18.75px;
   overflow:hidden;
}

#picback { 
   position:relative;
   margin:10px 23px;
   top:75px;
   float:left; 
   width:250px;
   height:187.5px;  
   overflow:hidden;
}

#picback:hover {
   background-color:rgb(190,190,190); 
   -webkit-border-radius:0.4em;  
   -webkit-transition: background-color 0.5s;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:44:17.860

这是一个有效的 js 小提琴：http: [//jsfiddle.net/XKHZv/3/](http://jsfiddle.net/XKHZv/3/)

我做了一些 .css 更改，还在 titlepic 之前移动了一个 div。

这是您的新 .css：

```
#wrapper {
    overflow:auto;
    width:1000px;
    height:1000px;
    margin: 20px auto;
}
#titlepic {
    margin-left:auto;
    margin-right:auto;
    background-color:rgba(0, 0, 0, 0.5);
    width:200px;
    height:35px;
    position:relative;
    clear: both;
}
#centerpic {
    position:relative;
    margin:auto;
    width: 200px;
    height: 150px;
    top:18.75px;
    overflow:hidden;
}
#picback {
    position:relative;
    margin:10px 23px;
    top:75px;
    float:left;
    width:250px;
    height: 203.75px;
    overflow:hidden;
}
#picback:hover {
    background-color:rgb(190, 190, 190);
    -webkit-border-radius:0.4em;
    -webkit-transition: background-color 0.5s;
} 
```

然后你还必须将一个 div 移到标题图片之前。

# r - Lyx中Knitr的R错误

> ID：15181460
> 
> 赞同：-1
> 
> 时间：2013-03-03T01:27:57.083
> 
> 标签：r, knitr, lyx

这是我正在使用的代码，在 Rstudio 中运行良好

```
a1 <- matrix(c(1601, 162527, 510, 412368), nrow=2, byrow=T)  
chisq.test(a1, correct=F) 
```

这是我得到的错误

```
! Undefined control sequence.  
<argument> ^^M##^^M##  Pearson'  
s Chi-squared test^^M##^^M## data:  a1^^M## X...  
l.356 \end{verbatim}  

The control sequence at the end of the top line  
of your error message was never \def'ed. If you have  
misspelled it (e.g., `\hobx'), type `I' and the correct  
spelling (e.g., `I\hbox'). Otherwise just continue,  
and I'll forget about whatever was undefined. 
```

如果我这样做会起作用

```
c1 <- chisq.test(a1, correct=F) 
```

然后使用

```
c1$p.value 
```

是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:10:13.230

这是一个已在[开发版本](https://github.com/yihui/knitr/)中修复的已知错误（请参阅[新闻](https://github.com/yihui/knitr/blob/master/NEWS.md)）。现在，您可以从以下位置安装它：

```
install.packages('knitr', repos = 'http://www.rforge.net/') 
```

# php - 考虑到字符串和转义的引号或分号，在分号上拆分字符串

> ID：15181461
> 
> 赞同：0
> 
> 时间：2013-03-03T01:28:00.733
> 
> 标签：php, regex, preg-match-all, preg-split

我仍在尝试找出一种方法来考虑转义引号，例如`"test\";nosplit"`或`'test\';nosplit'`

到目前为止，我有这样的事情：

```
preg_split('#(^;)|(;$)|(?<!["\'\\]);#', $str_to_split); 
```

但它甚至无法处理以下简单的事情：`test; 1; 2; '34;34'; wtvr`

我希望它在这些上分开：

```
 v  v  v        v
test; 1; 2; '34;34'; wtvr

    v  v v            v
test; 1;2; '34\'34;34'; wtvr 

    v  v v            v
test; 1;2; "34\"34;34"; wtvr

    v  v v            v
test; 1;2; '34\"34;34'; wtvr 

    v  v v            v
test; 1;2; "34\'34;34"; wtvr

    v  v v                    v
test; 1;2; "3 4 \' 3  4 ; 3 4"; wtvr 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:41:43.150

为什么不使用[`str_getcsv`](http://php.net/manual/en/function.str-getcsv.php)？

var_dump(str_getcsv("test;1;2;'34;34';wtvr",";","'"));

[http://ideone.com/JoFkr7#](http://ideone.com/JoFkr7#)

# java - Java遍历多个文件夹

> ID：15181467
> 
> 赞同：1
> 
> 时间：2013-03-03T01:28:53.993
> 
> 标签：java, file, file-io, traversal

我希望遍历多个文件，直到找到 .zip 文件或 .xml 文件

我有包含多个文件夹的文件，并且在每个文件夹的末尾都有 .zip 文件和 .xml 文件，而一些文件夹甚至可能没有

以下是我的代码：

```
package Traversefile;

import java.io.File;

public class traversefile {

    /**
     * @param args
     */
    static String[] str1;
    static File dir = new File("/home/evangelist/newdata");
    private static void traverse(File dir) throws NullPointerException{

        if (dir.isDirectory()) 
        {
            String[] children = dir.list();
            for (int i=0; i<children.length; i++) 
            {
                traverse(new File(dir, children[i]));
            }
        }
        if (dir.isFile())
        {
            str1 = dir.list();
        }

        for (int i=0; i<str1.length; i++)
        { 
            System.out.println("filename:"+ str1[i]);
        }
    }

    public static void main(String[] args) {
        traverse(dir);
        // TODO Auto-generated method stub
    }

} 
```

我为检查遍历所做的更改：包 Traversefile；

导入java.io.File；

公共类遍历文件{

```
/**
 * @param args
 */
static String[] str1;
//static String homePath = System.getProperty("user.home");
static File dir = new File("/home/evangelist/newdata/nnc2/pairtree_root/ar/k+/=1/39/60/=t");
static int counter = 0;
static int kounter = 0;
static int krounter = 0; 
private static void traverse(File dir) throws NullPointerException{

    if(dir.isDirectory())   
   {
       counter ++;

        String[] children = dir.list();
        //System.out.println(children);
        for (int i=0; children != null && i<children.length; i++) 
        {
            //System.out.println(children[i]);
            //System.out.println(" yo + "+ counter );
            traverse(new File(dir,children[i]));

        }
    }
    if (dir.isFile()) 
    {
        krounter++;

        if (dir.getName().endsWith(".xml")) //dir.getName().endsWith(".zip") ||  
        {
            System.out.println(dir.getAbsolutePath());
            //System.out.println(krounter);
        }
    }

}
public static void main(String[] args) {
    traverse(dir);
    // TODO Auto-generated method stub

} 
```

}

它在第 27 行和第 19 行给了我一个空点异常。

如何遍历 n 个文件夹，最后当我找到 .zip znd .xml 文件时复制它们的位置

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:21:09.150

也许这段代码可以帮助你。

```
private static void traverse(File dir){
    if (dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; children != null && i < children.length; i++) {
            traverse(new File(dir, children[i]));
        }
    }
    if (dir.isFile()) {
        if (dir.getName().endsWith(".zip")
                || dir.getName().endsWith(".xml")) {
            System.out.println(dir.getAbsolutePath());//change it if needed
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:38:21.580

看起来您正在尝试引用计算机文件系统中的文件。既然如此，就不能随便说`"/home/evangelist/newdata"`。首先，您需要通过调用获得对主目录的引用，`String homePath = System.getProperty("user.home");`然后您可以说`static File dir = new File(homePath + "evangelist/newdata");`，假设 evangelist 是您主目录中的一个文件夹。

默认情况下，Java 假定引用的任何文件都在程序的工作目录中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T01:39:57.927

以下片段是错误的。一个简单的 File 没有孩子，因此，`list()`将返回 null。

```
if (dir.isFile())
        {
            str1 = dir.list();
        } 
```

`str1`如果 dir 是一个文件，这里将为空。

编辑：链接到 java `File.list()`API。它清楚地提到 list() 将返回 null 如果对象不是目录[http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list())。

# asp.net - 我无法让我的帐户使用 linqtotwitter 进行自我授权

> ID：15181468
> 
> 赞同：0
> 
> 时间：2013-03-03T01:28:57.823
> 
> 标签：asp.net, asp.net-mvc-3, twitter, oauth

我知道这已经被问过很多次了，但是我已经使用了来自 linqtotwitter 文档和示例的信息以及这里的其他帖子来做到这一点。我可以让我的新应用程序发送推文，但只有让它带我到推特授权页面，我必须单击授权按钮才能继续。

该应用程序本身已获得授权，因此我不需要每次都输入密码，只是使用它需要许可的应用程序。

我知道这样做的原因是因为我的代码中没有我的访问令牌或访问令牌秘密。我已经添加了它们，但每次我得到一个未经授权的 401（无效或过期的令牌）。

我的代码如下，或许你能看出我哪里出错了？

```
 private IOAuthCredentials credentials = new SessionStateCredentials();

    private MvcAuthorizer auth;
    private TwitterContext twitterCtx;

    public ActionResult Index()
    {

        credentials.ConsumerKey = ConfigurationManager.AppSettings["twitterConsumerKey"];
        credentials.ConsumerSecret = ConfigurationManager.AppSettings["twitterConsumerSecret"];
        credentials.AccessToken = "MYaccessTOKENhere"; // Remove this line and line below and all works fine with manual authorisation every time its called //
        credentials.OAuthToken = "MYaccessTOKENsecretHERE";

        auth = new MvcAuthorizer
        {
            Credentials = credentials
        };

        auth.CompleteAuthorization(Request.Url);

        if (!auth.IsAuthorized)
        {
            Uri specialUri = new Uri(Request.Url.ToString());
            return auth.BeginAuthorization(specialUri);
        }

        twitterCtx = new TwitterContext(auth);
        twitterCtx.UpdateStatus("Test Tweet Here"); // This is the line it fails on //

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T02:28:31.590

这是有助于解决 401 错误的常见问题解答： http: [//linqtotwitter.codeplex.com/wikipage ?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation](http://linqtotwitter.codeplex.com/wikipage?title=LINQ%20to%20Twitter%20FAQ&referringTitle=Documentation)

一些可能也有帮助的项目：

1.  您不能两次推文相同的文本 - 所以要么删除具有相同文本的上一条推文，要么更改文本。我所有的测试都附加 DateTime.Now.ToString() 以避免这个错误。
2.  SessionStateCredentials 在 SessionState 中保存凭据。Session 状态的默认持久化模式是 InProc，这意味着如果进程回收，您的会话变量将为空，这将不可预测地发生。您可能需要确保您使用的是 StateServer 或 SQL Server 模式。

# javascript - window.getSelection() 与 HTML 标签的偏移量？

> ID：15181471
> 
> 赞同：5
> 
> 时间：2013-03-03T01:29:50.890
> 
> 标签：javascript, jquery, selection

如果我有以下 HTML：

```
<div class="content">
Vivamus <span>luctus</span> urna sed urna ultricies ac tempor dui sagittis.
</div> 
```

然后我运行一个事件`mouseup`来查看所选文本的范围：

```
$(".content").on("mouseup", function () {
    var start = window.getSelection().baseOffset;
    var end = window.getSelection().focusOffset;
    if (start < end) {
        var start = window.getSelection().baseOffset;
        var end = window.getSelection().focusOffset;
    } else {
        var start = window.getSelection().focusOffset;
        var end = window.getSelection().baseOffset;
    }
    console.log(window.getSelection());
    console.log(start + ", " + end);
}); 
```

我`Vivamus`从内容中选择单词，它会记录`1, 8`，因为那是选择的范围。

**但是，**如果**`urna`我选择单词，它将记录`15, 20`，但不会考虑`<span>`HTML 的元素。**

 **无论如何，是否存在`focusOffset`并且`baseOffset`也可以计算 HTML 标签，而不仅仅是文本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T04:35:09.173

**更新**

现场示例：http: [//jsfiddle.net/FLwxj/61/](http://jsfiddle.net/FLwxj/61/)

[使用`clearSelection()`函数](https://stackoverflow.com/a/6562764/1085891)和[替换方法](https://stackoverflow.com/a/7168142/1085891)，我能够达到预期的结果。

```
var txt = $('#Text').html();
$('#Text').html(
    txt.replace(/<\/span>(?:\s)*<span class="highlight">/g, '')
);
clearSelection(); 
```

资料来源：

*   `clearSelection()`：[https ://stackoverflow.com/a/6562764/1085891](https://stackoverflow.com/a/6562764/1085891)
*   替换方法：[https ://stackoverflow.com/a/7168142/1085891](https://stackoverflow.com/a/7168142/1085891)

* * *

您将在下面找到一些解决问题的有效方法。我按照代码效率的顺序排列它们。

**工作解决方案**

*   [https://stackoverflow.com/a/8697302/1085891](https://stackoverflow.com/a/8697302/1085891)（[现场示例](http://jsfiddle.net/FLwxj/1/)）

    ```
    window.highlight = function() {
        var selection = window.getSelection().getRangeAt(0);
        var selectedText = selection.extractContents();
        var span = document.createElement("span");
        span.style.backgroundColor = "yellow";
        span.appendChild(selectedText);
        span.onclick = function (ev) {
        this.parentNode.insertBefore(
            document.createTextNode(this.innerHTML), 
            this
        );
        this.parentNode.removeChild(this);
        }
        selection.insertNode(span);
    } 
    ```

*   [https://stackoverflow.com/a/1623974/1085891](https://stackoverflow.com/a/1623974/1085891)（[现场示例](http://jsbin.com/itotef/2/)）

    ```
    $(".content").on("mouseup", function () {
       makeEditableAndHighlight('yellow'); 
    });

    function makeEditableAndHighlight(colour) {
        sel = window.getSelection();
        if (sel.rangeCount && sel.getRangeAt) {
        range = sel.getRangeAt(0);
        }
        document.designMode = "on";
        if (range) {
        sel.removeAllRanges();
        sel.addRange(range);
        }
        // Use HiliteColor since some browsers apply BackColor to the whole block
        if (!document.execCommand("HiliteColor", false, colour)) {
        document.execCommand("BackColor", false, colour);
        }
        document.designMode = "off";
    }

    function highlight(colour) {
        var range, sel;
        if (window.getSelection) {
        // IE9 and non-IE
        try {
            if (!document.execCommand("BackColor", false, colour)) {
            makeEditableAndHighlight(colour);
            }
        } catch (ex) {
            makeEditableAndHighlight(colour)
        }
        } else if (document.selection && document.selection.createRange) {
        // IE <= 8 case
        range = document.selection.createRange();
        range.execCommand("BackColor", false, colour);
        }
    } 
    ```

*   [https://stackoverflow.com/a/12823606/1085891](https://stackoverflow.com/a/12823606/1085891)（[现场示例](http://jsbin.com/itotef/1/)）

其他有用的解决方案：

*   [http://tech.pro/tutorial/1075/javascript-highlighting-selected-text](http://tech.pro/tutorial/1075/javascript-highlighting-selected-text)**

# php - PHP Composer，很好的设计模式，用于包含带有命名空间的建议模块

> ID：15181479
> 
> 赞同：1
> 
> 时间：2013-03-03T01:30:27.333
> 
> 标签：php, namespaces, composer-php

我正在编写一些代码（数据库抽象层，用于我的其他代码模块），我想将其作为独立模块发布，可以包含在 composer 的项目中。我想在作曲家定义中包含一些可以提高我的模块性能的建议模块，但这不是必需的。

我遇到的问题是如何以一种完全可怕的方式做到这一点。

因此，在这个特定的示例中，模块被声明，`namespace Intahwebz\DB;`然后`Intahwebz\Log\Log`尝试包含可选模块，然后尝试使用可选模块`Monolog`。

到目前为止我所拥有的是模块代码 ConnectionWrapper.php

```
namespace Intahwebz\DB;

use Intahwebz\Log\Log;

if(trait_exists("Intahwebz\Log\Log") == false){
    require_once("Log.php");
}

class ConnectionWrapper{

    use Log;

    function __construct(){
        $this->initLog();

        // Rest of constructor code.

        $this->log->trace("ConnectionWrapper has been constructed.");
    }   

    // Lots of other functions here.
}

?> 
```

然后在 Log.php 中检查 Monolog 是否可用，如果可用，则包含它，否则定义一个真正轻量级的记录器。

```
<?php

namespace Intahwebz\Log;

if (class_exists('Monolog\Logger') &&
    class_exists('Monolog\Handler\StreamHandler')) {

require_once "MonologWrapper.php";

}
else{

    class Logger{
        public function debug($message, array $context = array()){
            echo $message."\n";
        }
        public function log($level, $message, array $context = array()){
            echo $message."\n";
        }
        public function info($message, array $context = array()){
            echo $message."\n";
        }
        public function notice($message, array $context = array()){
            echo $message."\n";
        }
        public function warning($message, array $context = array()){
            echo $message."\n";
        }
        public function error($message, array $context = array()){
            echo $message."\n";
        }
        public function critical($message, array $context = array()){
            echo $message."\n";
        }
        public function alert($message, array $context = array()){
            echo $message."\n";
        }
        public function emergency($message, array $context = array()){
            echo $message."\n";
        }
    }

    trait Log{

        var $log;
        function initLog(){
            $this->log = new Logger(__CLASS__);
        }
    }
} 
```

如果 Monolog 可用，我们通过包含 MonologWrapper.php 来使用它

```
<?php

namespace Intahwebz\Log;

use Monolog\Logger;
use Monolog\Handler\StreamHandler;

trait Log{

    var $log;

    function    initLog(){
        $this->log = new Logger(__CLASS__);
        //Todo - get log handler from config file automagically.
        $this->log->pushHandler(new StreamHandler(PATH_TO_ROOT.'var/log/Admin.log', Logger::WARNING));
    }
}

?> 
```

这样做的问题是：

1）它非常丑陋，并且每个建议的模块都需要额外的文件。

2）它不允许人们在不重写代码的情况下切换到独白以外的不同记录器。

3) 它具有重复的类/特征定义，仅由 if 语句分隔，这完全混淆了我的 IDE。

我知道 Symfony 等人解决这个问题的方法是拥有一个服务层。但是，如果不强制依赖包含比引入可选模块应该复杂得多，我看不出如何使用该设计模式。

谁能描述一个体面的设计模式来包含可选模块，或者用其他兼容模块替换它们？或者这是只能在实际框架中很好地定义的事物类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:25:47.827

依赖注入:)

例如，而不是

```
function    initLog(){
    $this->log = new Logger(__CLASS__);
    // ..
} 
```

采用

```
function setLogger(Logger $logger) {
    $this->log = $logger;
    // ...
} 
```

等等。这种硬编码的依赖关系太多了，我就不一一列举了。

```
class MonologLoggingConnectionWrapperWrapper extends ConnectionWrapper {
    public function __construct (ConnectionWrapper $wrapper, Logger $logger) {
        // ..
    }
} 
```

现在只有当有人试图实例化这个类时才需要独白，然后很明显，有些东西丢失了。如果您愿意，可以在类定义之前向文件添加测试，这应该（在这种情况下）抛出异常或触发错误。

（类名源于这样一个事实，它`ConnectionWrapper`不是真正的包装器，而是它自己的一个类：包装器必须扩展被包装的类，或者实现相应的接口，因此它是完全可交换的）

值得一提：避免条件类或函数定义：）一个类名，一个类（不是更多），当我尝试实例化一个类时，它要么存在，要么不存在，但不是“有时”。

# c# - 不包含带 4 个参数的构造函数？

> ID：15181480
> 
> 赞同：0
> 
> 时间：2013-03-03T01:30:30.043
> 
> 标签：c#, .net, constructor, compiler-errors

我对编程很陌生，我已经被这个问题困扰了一段时间，我已经在整个互联网上搜索了这个问题的答案，但仍然对它为什么不起作用感到困惑。编译器说下面的代码不包含带有 4 个参数的构造函数？我不明白为什么？

代码是：

```
public class Users
{
    private int _ID;
    private string _FName;
    private string _LName;
    private string _Address;
    private string _Phone;

    public int ID
    {
        get { return _ID; }
    }

    public string FName
    {
        get { return _FName; }
    }

    public string LName
    {
        get { return _LName; }
    }

    public string Address
    {
        get { return _Address; }
    }

    public string Phone
    {
        get { return _Phone; }
    }
} 
```

有问题的代码是：

```
public static void Insert(string FName, string LName, string Address, string Phone)
{
    Users newUser = new Users(FName, LName, Address, Phone);
    newUser.Save();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:33:56.240

声明一个接受 4 个参数的构造函数：

```
class User
{
    public User(string firstName, string lastName, string address, string phone)
    {
       _fName = firstName;
       ....
    }
} 
```

用法：

```
User user = new User("Joe", ...); 
```

* * *

或将公共设置器添加到类属性，然后使用对象初始化器：

```
public string FirstName { get; set; } // notice public 
```

用法：

```
User user = new User { FirstName = "Joe", ... }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T01:33:50.953

当您编写时，`new Users(...)`您正在调用该类的构造函数`Users`。由于您尚未定义一个，因此默认的一个采用零参数，而不是您使用的四个。

您可以使用默认构造函数并使用对象初始化程序设置属性。为此，请替换：

```
Users newUser = new Users(FName, LName, Address, Phone); 
```

有了这个：

```
Users newUser = new Users() { FName = FName, LName = LName, Address = Address, Phone = Phone }; 
```

或者，您可以添加一个带有四个参数的构造函数，如下所示：

```
public Users(string fName, string lName, string address, string phone)
{
    FName = fName;
    LName = lName;
    Address = address;
    Phone = phone;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T01:48:45.430

你需要一个构造函数。它没有给出。它必须写出来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-03T01:47:21.473

我对 C# 不是很有经验，但是您的类似乎没有声明构造函数。您正在声明变量 FName、LName、Address 和 Phone，但它们从未获得任何值。

您可以尝试将其添加到用户类中，在您的声明下方：

```
public Users(String fname, String lname, String address, String phone)
{
    FName = fname;
    LName = lname;
    Address = address;
    Phone = phone;
} 
```

您还可以考虑将“用户”的名称更改为“用户”，因为该类的每个实例都代表一个用户，而不是它们的集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-14T10:06:26.417

我见过一些人试图为构造函数提供与其拥有的字段数量相同的参数数量。但是，如果构造函数很可能已经存在，那么您需要做的就是：

```
Users user1 = new Users(); 
```

# django - 将媒体保留在基本 URL 中

> ID：15181485
> 
> 赞同：0
> 
> 时间：2013-03-03T01:31:39.180
> 
> 标签：django, media

因此，我正在寻找一种通过基本网站 URL 获取图像的解决方案。

图片网址示例：www.website.com/image.jpg

主页位于网址的位置：www.website.com/

我正在使用 django python web 框架，我知道这是一个奇怪的想法，如果不仅仅是坏主意，但我的客户已经将数百张图片链接到上述格式的基本 URL，并拒绝更改现有链接。

我知道这是一个模糊的问题，但我似乎找不到任何相关的东西。我只是将媒体网址设置为与网站相同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:34:57.407

你为什么不直接配置你的网络服务器来重写路径呢？

您还可以使用备用主机 assets.example.com 对其进行配置，并从那里提供所有内容。然后，您可以将来自 www.website.com 的所有请求重写为 assets.example.com。

# java - 在与给定矩形相交的网格中查找单元格

> ID：15181500
> 
> 赞同：0
> 
> 时间：2013-03-03T01:34:15.137
> 
> 标签：java, math, language-agnostic

（我会为 Java 和与语言无关的标记，因为我认为这个想法并不真正需要 Java，但这是我的特定应用程序，所以 IDK 这两个标记中的哪一个是合适的）。

假设我有一个具有任意行数和列数以及任意单元格大小的网格。

这个网格代表一个二维空间。现在假设我在那个二维空间的某个地方有一个矩形 - 在过去，我记得能够取回与矩形相交的所有单元格（无需循环），但现在数学正在逃避我。

为了巩固这个例子，假设有 12 行和 10 列。单元格为 256 个正方形（因此行高 256，列宽 256）。如果在 x:400, y:300 处有一个 200x200 的矩形，我知道它将与第二行的第二列和第三列相交。

因此，如果单元结构是这样定义的：

```
// reference[rows][columns]    
SomeCellClass[][] cells = SomeCellClass[12][10] 
```

那么交叉口将是`SomeCellClass[1][1]`和`SomeCellClass[1][2]`

理想情况下，回报将类似于

```
private SomeCellClass[] blah(){
  // do work
  SomeCellClass[] product = new SomeCellClass[total];
  SomeCellClass[0] = // first one that intersects...
  SomeCellClass[1] = // second one that intersects...
  // etc...
} 
```

我记得它与将矩形位置和尺寸除以单元格大小和地板/天花板以取回索引有关，但我无法理解具体细节。同样，我知道如何使用循环执行此操作，但希望能够仅使用数学和数组索引。

任何帮助，将不胜感激。

蒂亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:49:59.967

看起来基本上是这样的：

```
int startingColumn = Math.floor( rect.left / columnWidth );
int endingColumn = Math.ceil( rect.right / columnWidth );
int startingRow = Math.floor( rect.top / rowHeight );
int endingRow = Math.ceil( rect.bottom / rowHeight ); 
```

然后显然从startingColunn/Row 到endingColumn/Row 循环。

# php - 我的 PHP 联系表单出现 500 内部服务器错误

> ID：15181503
> 
> 赞同：0
> 
> 时间：2013-03-03T01:35:36.000
> 
> 标签：php, smtp, internal-server-error, server-error

我在这里有一个 PHP 联系表： [leongaban.com](http://leongaban.com)

**下面是一个屏幕截图，显示了我在单击提交后得到的 500（内部服务器错误）**

![在此处输入图像描述](../Images/25c074a37cf4e54be0e721b32a54ae5b.png)

**HTML 表单**

```
<div class="the-form">
            <form id="contact">
                <div id="status"></div>
                <div>
                    <label for="name">Your Name</label>
                    <input type="text" name="name" id="name" value="" tabindex="1">
                </div>

                <div>
                    <label for="email">Your Email</label>
                    <input type="text" name="email" id="email" value="" tabindex="2">
                </div>

                <div>
                    <label for="textarea">Message:</label>
                    <textarea cols="40" rows="8" name="comments" id="comments" tabindex="3"></textarea>
                </div>

                <div>
                    <input class="submit-button" id="submit" type="submit" value="Submit" tabindex="5">
                </div>
            </form><!-- #contact -->
        </div><!-- .the-form --> 
```

**我的 Javascript**

```
$(function(){

$('#submit').click(function(){

    var form_data = {
        name: $('#name').val(),
        email: $('#email').val(),
        comments: $('#comments').val()
    };

    $.ajax({
        url: "includes/send.php",
        type: 'POST',
        data: form_data,
        success: function(status) {
            if (status == 'success') {
                $('#status').html('<h3 class="success">Thank You!</h3>')
                            .hide().fadeIn(2000);
            } else {
                $('#status').html('<p class="error">Both name and email are required fields.</p>')
                            .hide().fadeIn(2000);
            }
        } // end send contact form
    });  //end ajax

    return false;
    });  //end send contact form click
}); 
```

**我的 PHP**

```
<?php

$name = $_POST['name'];
$email = trim($_POST['email']);
$comments = $_POST['comments'];
$error = array();

$site_owners_email = 'myEmail@gmail.com'; // Replace this with your own email address
$site_owners_name = 'Leon Gaban'; // replace with your name

if (strlen($name) < 2) {
    $error['name'] = "Please enter your name.";    
}

if (!preg_match('/^[a-z0-9&\'\.\-_\+]+@[a-z0-9\-]+\.([a-z0-9\-]+\.)*+[a-z]{2}/is', $email))     {
    $error['email'] = "Please enter a valid email address.";    
}

if (!$error) {
$response = 'success';
$subject  = $name . ' needs help from CodePopper!';
$body     = 'Codepopper,' . "\n\nName: " . $name . 
            "\nEmail: " . $email . 
            "\nComments: " . $comments;

require_once 'lib/swift_required.php';

$transport = Swift_SmtpTransport::newInstance('hostname', 25)
            ->setUsername('username')
            ->setPassword('password')
;

$mailer = Swift_Mailer::newInstance($transport);    

$message = Swift_Message::newInstance();
$message->setSubject($subject);
$message->setFrom(array('myEmail@gmail.com' => 'leongaban.com'));
$message->setTo(array('myEmail@gmail.com' => 'Leon Gaban'));
$message->setBody($body);

$result = $mailer->send($message);

echo $response;

} # end if no error
else {
$response = 'error';

    echo $response;
} # end if there was an error sending 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:41:57.563

我忘记在我的 send.php 文件中输入我的电子邮件主机设置

```
$transport = Swift_SmtpTransport::newInstance('leongaban.com', 25)
            ->setUsername('my email')
            ->setPassword('my password'); 
```

旁注，我现在对我的服务器具有 root 访问权限:)

# android - Android：如何为扩展 MapActivity 的类调用 ListActivity 方法？

> ID：15181508
> 
> 赞同：0
> 
> 时间：2013-03-03T01:36:07.663
> 
> 标签：android

我正在尝试创建一个同时使用 ListView 和 MapView 的类。我最初编写类来扩展 ListActivity。但是，后来我发现如果我想将两者结合起来，我需要扩展 MapView，然后引用 ListView。

所以，这就是现在声明的方式：

```
public class MapListActivity extends MapActivity { 
```

接下来我想我需要一种方法来访问 ListView，所以我写了这个：

```
//instance vars
ListView listView;

//get ref to listview
listView = (ListView) findViewById(android.R.id.list); 
```

根据我添加的旧代码：

```
 listView.setListAdapter(adapter);

    // selecting single ListView item
    listView.getListView(); 
```

但是，我得到的错误是方法 setListAdapter(ListAdapter) 未针对 MapListActivity 或 ListView 类型定义。这对 MapView 来说是有意义的，因为该类扩展了 MapActivity，但我不知道既然该类不再扩展 ListActivity，如何让它工作？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:39:40.543

阅读[ListView 文档](http://developer.android.com/reference/android/widget/ListView.html)

```
listView.setListAdapter(adapter); 
```

应该

```
listView.setAdapter(adapter); 
```

还，

```
listView.getListView(); 
```

不存在 a `ListView`。目前尚不清楚您想要实现什么。如果要在某个位置获取项目，可以使用[`ListView#getItemAtPosition (int pos)`](http://developer.android.com/reference/android/widget/AdapterView.html#getItemAtPosition%28int%29)

# google-drive-api - 如何从 Google Drive SDK 发起的连接禁用离线 OAuth2 访问？

> ID：15181516
> 
> 赞同：5
> 
> 时间：2013-03-03T01:37:54.433
> 
> 标签：google-drive-api, google-oauth

我正在将我们的网络应用程序与 Google Drive 集成，并且在配置由 Google Drive UI 发起的连接时遇到了困难。

我们允许用户从 Drive 打开和创建文件，但是每次从 Drive 页面启动 OAuth2 会话时，它都会要求访问文件（看起来像 drive.file 范围，已经给出），并且还要求“执行这些操作当我不使用该应用程序时”。我假设由于离线访问而请求重新身份验证，我们从不请求并且不需要。如果没有必要，我宁愿不要求用户这样做。

我找不到从 Google API 控制台禁用此功能的方法。有没有办法为从 Google Drive UI 发起的会话配置 OAuth2 url 并设置 access_type？

或者，如果这不是问题，是什么导致“在我不使用应用程序时执行这些操作”以及在打开文件时不断重新授权？

如果它有助于故障排除，APP id 是 399581875395

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-07T18:20:51.120

在从谷歌驱动器打开文件中回答[总是请求离线访问](https://stackoverflow.com/questions/21557329/opening-file-from-google-drive-always-requests-offline-access)

看起来我找到了解决方案。如果您不使用相同的 client_id 和 client_secret 执行 OAuth2 流程的第 2 步，此消息将继续出现。

```
@app.route('/open')
def drive_open_file():
    code = request.args.get('code')
    if code:
        credentials = credentials_from_code("client", "secret",
                               "https://www.googleapis.com/auth/drive.file",
                               code,
                               redirect_uri="<WEBSITE>/open") 
```

# ruby-on-rails - 使用 ActiveRecord 查询接口返回列表

> ID：15181518
> 
> 赞同：2
> 
> 时间：2013-03-03T01:38:10.450
> 
> 标签：ruby-on-rails

我的`Program`班级 has_many`Patients` 和`Patient`班级有一个像`salary`

我传递给 JBuilder 的 json`respond_to :json , respond_with(@org)`是这样的：

```
@org = Org.includes(programs: [{hospitals: :nurses}, :patients]).find(params[:id]) 
```

现在，如果我的数据库有 200 个满足`org_id = params[:id]`条件的程序，它将全部返回。但这不是我想要的。我想告诉它返回“5”个程序和那些“5”个程序，他们的“患者”表的“薪水”字段是最高的。

如何在活动记录查询中实现此限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T01:47:48.283

就像是

```
Program.includes([{hospitals: :nurses}, :patients]).where("organization_id = ?", params[:id]).order("patients.salary desc").limit(5) 
```

* * *

或者你可以这样做：

```
@program_ids = Program.select("id").includes([{hospitals: :nurses}, :patients]).where("organization_id = ?", params[:id]).order("patients.salary desc").limit(5)
@org = Org.includes(programs: [{hospitals: :nurses}, :patients]).where("programs.id = ?", program_ids.collect(&:id)).find(params[:id]) 
```

您还可以通过检查以下问题，一步重构子查询（仍然是 2 个查询）：

[活动记录中的子查询](https://stackoverflow.com/questions/5483407/subqueries-in-activerecord)

我不确定您是否可以在一个查询中获得该信息

# java - 第一次正则表达式用户

> ID：15181519
> 
> 赞同：0
> 
> 时间：2013-03-03T01:38:12.157
> 
> 标签：java, regex

我无法使用正则表达式来显示何时需要在正确的显示器中显示。现在我有了这个代码，这是一个简单易用的正则表达式，但我仍然不明白它是如何工作的。有没有办法过滤字符串以仅显示大写字母？

假设我输入了一个很长的名字句子：

> 泰勒肖恩卡西乔恩彼得。

如果我不知道字符串中可能包含哪些名称，我如何才能让字符串只显示一个名称？（说是随机名字，每次都会填）

```
import java.io.Console;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Regex {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);

        System.out.println("Enter your Regex: ");
        Pattern pattern = 
        Pattern.compile(input.nextLine());

        System.out.println("Enter String to Search");
        Matcher matcher =
        pattern.matcher(input.nextLine());

        boolean found = false;
        while (matcher.find()) {
            System.out.println("I found the text" + " " + matcher.group() +" starting at " + "index " + matcher.start() + " and ending at index " + matcher.end());
            found = true;
        }

        if (!found) {
            System.out.println("No match found.");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-09T19:50:50.450

您可以[在字符集中使用范围](http://www.regular-expressions.info/charclass.html)：

```
[A-Z][a-z]* 
```

这意味着*一个大写字母*，后跟*零个或多个小写字母*。

[看到它在行动](https://regex101.com/r/xA2iX8/1)

* * *

如果您对仅 ASCII 字母不满意，可以使用：

```
\\p{Upper}\\p{Lower}* 
```

# c++ - 重载赋值运算符总线错误

> ID：15181521
> 
> 赞同：0
> 
> 时间：2013-03-03T01:38:57.067
> 
> 标签：c++

由于某种原因，我的赋值运算符在我尝试使用它时会产生总线错误：

```
hand1 = hand2;

//overload assignment operator
Hand Hand::operator=(Hand other_hand)
{

    if(&other_hand != this){
        name = other_hand.name;
        cards = other_hand.cards;

    }

    return *this;   
} 
```

错误发生在 return 语句之后

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T01:41:05.477

首先，分配应该有一个看起来像这样的签名：

```
Hand & Hand::operator=(const Hand &other_hand) 
```

您可能不想像所指出的那样传递和返回副本，但也希望允许操作链接，即：

```
hand1 = hand2 = hand3 .... 
```

这是一个[基本的参考](http://courses.cms.caltech.edu/cs11/material/cpp/donnie/cpp-ops.html)。还提到了复制和交换，这个[先前的线程](https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom)很好地解释了它。

# python - 在python中清理一个字符串（可能是编码的字符串）

> ID：15181524
> 
> 赞同：0
> 
> 时间：2013-03-03T01:39:20.923
> 
> 标签：python

我正在尝试读取一些假设为制表符分隔的数据，但我在其中看到很多#FO#？

我想知道如何清除该文本？

示例片段

```
 title=#F0#Sometimes#F0#the#F0#Grave#F0#Is#F0#a#F0#Fine#F0#and#F0#Public#F0#Place.#F0#|url=http://query.nytimes.com/gst/fullpage.html?
res=940DEFD71230F93BA15750C0A9629C8B63#F0#|quote=New#F0#Jersey#F0#is,#F0#indeed,#F0#a#F0#hom
e#F0#of#F0#poets.#F0#Walt#F0#Whitman's#F0#tomb#F0#is#F0#nestled#F0#in#F0#a#F0#wooded#F0#grov
e#F0#in#F0#the#F0#Harleigh#F0#Cemetery#F0#in#F0#Camden.#F0#Joyce#F0#Kilmer#F0#is#F0#buried#F
0#in#F0#Elmwood#F0#Cemetery#F0#in#F0#New#F0#Brunswick,#F0#not#F0#far#F0#from#F0#the#F0#New#F
0#Jersey#F0#Turnpike#F0#rest#F0#stop#F0#named#F0#in#F0#his#F0#honor.#F0#Allen#F0#Ginsberg#F0
#may#F0#not#F0#yet#F0#have#F0#a#F0#rest#F0#stop,#F0#but#F0#the#F0#Beat#F0#Generation#F0#auth
or#F0#of#F0#"Howl"#F0#is#F0#resting#F0#at#F0#B'Nai#F0#Israel#F0#Cemetery#F0#in#F0#Newark.#F0
#|work=The#F0#New#F0#York#F0#Times#F0#|date=March#F0#28,#F0#2004#F0#|accessdate=August#F0#21 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T01:44:25.947

制作`title`和`res`字符串，然后使用`[s.replace(old, new)][1]`：

```
title="#F0#Sometimes#F0#the#F0#Grave#F0#Is#F0#a#F0#Fine#F0#and#F0#Public#F0#Place.#F0#|url=http://query.nytimes.com/gst/fullpage.html?"
res="""940DEFD71230F93BA15750C0A9629C8B63#F0#|quote=New#F0#Jersey#F0#is,#F0#indeed,#F0#a#F0#hom
e#F0#of#F0#poets.#F0#Walt#F0#Whitman's#F0#tomb#F0#is#F0#nestled#F0#in#F0#a#F0#wooded#F0#grov
e#F0#in#F0#the#F0#Harleigh#F0#Cemetery#F0#in#F0#Camden.#F0#Joyce#F0#Kilmer#F0#is#F0#buried#F
0#in#F0#Elmwood#F0#Cemetery#F0#in#F0#New#F0#Brunswick,#F0#not#F0#far#F0#from#F0#the#F0#New#F
0#Jersey#F0#Turnpike#F0#rest#F0#stop#F0#named#F0#in#F0#his#F0#honor.#F0#Allen#F0#Ginsberg#F0
#may#F0#not#F0#yet#F0#have#F0#a#F0#rest#F0#stop,#F0#but#F0#the#F0#Beat#F0#Generation#F0#auth
or#F0#of#F0#"Howl"#F0#is#F0#resting#F0#at#F0#B'Nai#F0#Israel#F0#Cemetery#F0#in#F0#Newark.#F0
#|work=The#F0#New#F0#York#F0#Times#F0#|date=March#F0#28,#F0#2004#F0#|accessdate=August#F0#21"""

title = title.replace('#FO#', '')
res = res.replace('#FO#', '') 
```

# arrays - MIPS 程序集创建字符检查器

> ID：15181525
> 
> 赞同：0
> 
> 时间：2013-03-03T01:39:23.607
> 
> 标签：arrays, string, assembly, mips

我正在寻找有关如何从用户那里获取字符串然后输出每个字母在字符串中使用的次数的帮助。

伪码字符串“请输入字符串：”取字符串并保存到数组中，检查字符值的ascii重复，然后在输出对应的字母时输出。

示例：你好世界

```
A: 
B:
C:
D: 1
E: 1
...
H: 1
...
W: 1 
```

代码

```
.data
intro: .asciiz "Letter Checker Program" 
question: .asciiz "\nPlease enter a string for evaluation: "

string: .space 1024
alphabet: .space 26

.text 

main:
jal setup
#jal analyze
#jal results

li $v0, 10
syscall 

setup:
li $v0, 4   # outputing name and program information
la $a0, intro
syscall

li $v0, 4   # asksing for string input
la $a0, question
syscall 

li $v0, 8
la $a0, string
li $a1, 1024
syscall

jr $ra      # return

analyze:

loop: 
```

# 环形：

# 结果：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:32:46.193

你想做的是：

1.  创建一些空间（26 * 4 字节）来存储结果并用 0 填充
2.  循环遍历字符串中的每个字母并加载`lb`
3.  确定字母的数值，从而确定内存位置（步骤 1）。不要忘记小写和大写字母。
4.  加载该内存位置（4 个字节，使用`lw`），将值增加 1，然后再次存储`sw`
5.  遇到 0（不是字母 '0'）时停止
6.  在分析中，循环遍历字母表中的每个字母，从步骤 1 加载相应的内存位置，并打印结果

# node.js - 为什么要使用 Socket.io？

> ID：15181534
> 
> 赞同：10
> 
> 时间：2013-03-03T01:40:23.623
> 
> 标签：node.js, websocket, socket.io

我正在学习 Node.js，目前正在学习 WebSockets。据我了解，Socket.io 旨在解决各种浏览器对 WebSockets 的不一致支持...如果您查看[caniuse WebSockets](http://caniuse.com/websockets)，看来 WebSockets 目前实际上已完全支持。谁能解释为什么在这种情况下我应该使用 Socket.io 和 WebSockets？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T03:01:12.873

1.  它为您处理许多技术替代方案的优雅降级，以实现双向近时通信（网络套接字、ajax 长轮询、flash 等）
2.  截至 2013 年 3 月[，该站点](http://caniuse.com/websockets)列出了 61% 支持的 Web 套接字。这不是“几乎完全”。
3.  截至 2021 年 9 月[，该网站](http://caniuse.com/websockets)列出了 98% 支持的 Web 套接字。所有现代浏览器都支持 Websocket。
4.  它为您处理浏览器不一致和不同的支持级别
5.  （这前两件事基本上与 jQuery 创建的值相同，从透视角度来看）
6.  它包括基本 Web 套接字之外的其他功能，例如对基本发布/订阅基础设施的房间支持以及自动重新连接等功能
7.  AFAIK 至少在目前，它比普通 Web 套接字更受欢迎且更容易获得帮助。

然而，就像那些讨厌 jQuery 的[VanillaJS](http://vanilla-js.com/)一样，如果你更喜欢直接使用官方标准的 Web 套接字 API，那么一定要把自己淘汰掉。

# c++ - 致命错误 C1083：无法打开包含文件：'iostream'：没有这样的文件或目录

> ID：15181537
> 
> 赞同：4
> 
> 时间：2013-03-03T01:41:03.613
> 
> 标签：c++, windows, visual-studio-2010, include, iostream

我已多次重新安装 Visual Studio 2010 Professional 以尝试使其正常工作。我不得不卸载 Visual Studio 2012 Professional，因为它没有编译我们在课堂上所做的事情。

我完全卸载了包括 SQL Server 在内的所有内容。

我去了 VC/include 并且没有 iostream 头文件。

```
#include <iostream>

int main () {

cout << "hello";

system ("PAUSE");
return 0;
} 
```

这就是我正在尝试做的所有事情，因为没有其他工作。

这真的让我发疯了，因为我需要让它工作，这样我才能完成我的项目！！！

每次我这样做；新项目 => 空项目 => 将项目添加到源 =>.cpp

我正在运行 Windows 8。

它只是说错误无法打开源文件此外，错误 cout 标识符未定义....

我想知道我是否应该进行系统还原？或者如果我应该从我的恢复媒体完全重新安装 Windows 8？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T05:59:37.253

一个问题是您没有包含命名空间`std`。

这就是你的代码应该是这样的：

```
#include <iostream>
using namespace std;

int main (void) {
    cout << "hello" << endl;
    system("pause");
    return 0;
} 
```

或者你可以做这样的事情：`std::cout << "Hello" << std::endl;`

这可能是个问题，因为您没有将环境设置为 C++。这就是你的做法：

1.  转到*工具*>*导入和导出设置*。如果您找不到它，只需在“快速搜索”中搜索即可
2.  然后去重置所有设置。
3.  然后只需选择“Visual C++”
4.  重新开始。

这应该够了吧。如果没有，您可能会考虑重新安装 Visual C++ 本身。对于[VS 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30679)。如果这不起作用，则重新安装程序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-12-11T20:31:02.547

如果 Visual Studio 2012 有问题，请安装[此](http://www.microsoft.com/en-us/download/details.aspx?id=39305)更新。

# c++ - 如何递归访问所有树节点

> ID：15181538
> 
> 赞同：1
> 
> 时间：2013-03-03T01:41:15.770
> 
> 标签：c++, binary-tree

所以，我得到了一棵这样的树

```
 a
                       /  \
                      b     c
                     / \   /
                    d   e  f 
```

该功能必须打印：

```
a
ab
abd
abe
ac
acf 
```

我的老师说我唯一可以拥有的参数是指向第一个节点的指针。我不能使用任何其他变量，包括静态变量和全局变量。

```
void print(Node* a)
{
  if(a==NULL){return;}
  cout<<a->data;
  if(a->left!=NULL){print(a->left);}
  if(a->right!=NULL){print(a-right);}
} 
```

到目前为止，我的程序只能打印“abdecf”。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:41:10.250

您可以将父级添加到表示节点的结构中。像这样——

```
class Node {
public:
  char data;
  Node *left;
  Node *right;
  Node *parent;
}; 
```

所以现在有了这个修改过的数据结构，你将在每一层打印从当前节点到根的路径，就像这样 -

```
void print(Node* a)
{
  Node *cur = a;
  do {
    cout << cur->data << ", ";
    cur = cur->parent;
  } while(cur != NULL);
  if(a->left != NULL){
    print(a->left);
  }
  if(a->right != NULL){
    print(a->right);
  }
} 
```

# c# - 单个项目中的多个命名空间

> ID：15181542
> 
> 赞同：10
> 
> 时间：2013-03-03T01:41:35.807
> 
> 标签：c#, visual-studio-2010, namespaces, solution

我发现有时我需要在我正在处理的项目中拥有多个命名空间 - 在**同一个项目中拥有多个命名空间可能会出现任何问题吗？**
另一种选择显然是在解决方案中有多个项目（每个命名空间）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-03T01:45:26.110

是的，没关系。我的命名空间通常与项目的文件夹结构对齐。因此，整个项目的顶级命名空间可能相同，但会有多个子命名空间。

命名空间的目的是（1）组织和（2）避免命名冲突，不一定按这个顺序。然而，将事物分成多个项目更多是因为您想要多个二进制文件，或者您希望在多个解决方案之间共享代码。这些有点正交的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T01:47:39.267

是的，一个命名空间有很多类。项目中的许多命名空间都很好。它是化妆品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T02:08:01.370

这个问题的答案是，在没有进入最佳实践的情况下，在一个项目中使用多个命名空间不会有任何技术问题。

但是，Visual Studio 仅支持一个基本命名空间，它位于项目属性中（在项目本身的解决方案资源管理器中右键单击属性），并且在您创建新文件时，它将使用此默认命名空间创建（如果在根)，或默认命名空间加上您拥有的任何文件夹结构。

本身不是问题，但您需要手动检查添加到项目中的每个新 C# 文件，并在该特定文件不使用项目的默认命名空间时相应地更改命名空间。

# xcode - 无法更改 TableView 大小

> ID：15181545
> 
> 赞同：1
> 
> 时间：2013-03-03T01:41:48.673
> 
> 标签：xcode, uitableview, frame

在 my.m 文件中：

```
@synthesize ListLearnTab;
...........
- (void)viewDidLoad
    {
        [super viewDidLoad];
        ListLearnTab.frame=CGRectMake(0, 0, 320, 416);

    } 
```

我在 .h 中声明的 ListLearnTab 为：

```
@property (weak, nonatomic) IBOutlet UITableView *ListLearnTab; 
```

我花了很多时间，不知道为什么 TableView 不想调整大小。我把这个 ListLearnTab.frame=CGRectMake(0, 0, 320, 416); 在很多地方，但 TableView 保持不变，因为我在 Xcode 中声明（手动）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:57:13.357

我有同样的问题，我想。我和你一样在代码中设置了表格的大小。我可以在故事板上看到它。原型单元看起来是正确的，但当应用程序运行时，它似乎只穿过了桌子的一半。我将整个视图控制器在情节提要上拖得更大，单击视图本身并将其拖出，然后单击表格并执行相同操作。如果我记得，我更改了检查器中所有内容的宽度，以使它们大于 viewDidLoad 中的框架规范。我让一切正常。很抱歉不记得解决问题的确切步骤。如果这和你的麻烦一样，这有什么帮助！-抢

# python - TypeError: __init__() 正好需要 2 个参数（给定 1 个）

> ID：15181546
> 
> 赞同：0
> 
> 时间：2013-03-03T01:42:05.047
> 
> 标签：python

我不明白为什么我会收到以下错误，并希望得到一些建议。谢谢。

错误：

```
Traceback (most recent call last):
  File "test.py", line 5, in <module>
    ciphertext = md.encrypt(plaintext)
  File "/Volumes/Mac/Computer/Programming/Cryptography/crypto.py", line 87, in encrypt
    ciphertext = Text()
TypeError: __init__() takes exactly 2 arguments (1 given) 
```

代码：

```
import crypto

plaintext = crypto.Text('plaintext.txt')
md = crypto.MonomeDinome('fred', 'wilma')
ciphertext = md.encrypt(plaintext)
print ciphertext 
```

Crypto.py 有以下代码：

```
class Text:
    def __init__(self, filename):
        self.load(filename)

    def load(self, filename):
        fp = open(filename, "r")
        self.rawtext = fp.read()
        fp.close
        self.text = self.convert(self.rawtext)

    def convert(self, txt):
        rval = ""
        for c in txt.upper():
            if c.isalpha():
                rval += c
        return rval

    def set(self, lst):
        self.text = "".join(lst)

    def get(self):
        return self.text

    def __str__(self):
        rval = ""
        pos = 0
        for c in self.text:
            rval += c
            pos += 1
            if pos % 60 == 0:
                rval += '\n'
            elif pos % 5 == 0:
                rval += " "
        return rval

class MonomeDinome:
    def __init__(self, dkw, lkw):
        self.digitsKey = self.digitsScramble(dkw)
        self.lettersKey = self.lettersScramble(lkw)

    def digitsScramble(self, dkw):
        dkl = list((dkw.upper() + "ZZZZZZZZZZ")[0:10])

        for i in "0123456789":
            pos = self.findLowestLetter(dkl)
            if pos != -1:
                dkl[pos] = i

        return "".join(dkl)

    def findLowestLetter(self, lst):
        pos = -1
        lowest = ''

        for i in range(len(lst)):
            if lst[i].isalpha():
                if (lowest == '') or (lst[i] < lowest):
                    lowest = lst[i]
                    pos = i
        return pos

    def lettersScramble(self, lkw):
        rlist = []
        for a in lkw.upper():
            if a == "W":
                a = "V"
            if a == "J":
                a = "I"
            if not a in rlist:
                rlist.append(a)

        for a in "ABCDEFGHIKLMNOPQRSTUVXYZ":
            if not a in rlist:
                rlist.append(a)

        return "".join(rlist)

    def __str__(self):
        return "digitsKey = " + self.digitsKey + "\n" + \
                "lettersKey = " + self.lettersKey

    def encrypt(self, plaintext):
        rlist = []
        for char in plaintext.get():
            rlist.append(char)
        ciphertext = Text()
        ciphertext.set(rlist)
        return ciphertext 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T01:44:21.130

构造函数的`filename`参数不是可选的，所以 in `encrypt`this failed: `ciphertext = Text()`。它必须是`... = Text(some_filename)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T01:48:43.653

我认为您想`Text`采用 0 或 1 个选项参数。

```
class Text:
    def __init__(self, filename=None):
        if filename is not None:
            self.load(filename) 
```

* * *

我相信

```
 ciphertext = Text() 
```

有道理，因为

```
 ciphertext.set(rlist) 
```

是另一种设置方式`ciphertext.text`，而不是调用`load`方法。

* * *

顺便说一句，还有一个错误`load`：

```
def load(self, filename):
    ...
    fp.close()   # <--- You need parentheses or else the closed method is not called 
```

`with`您可以通过使用以下语法来避免该错误：

```
def load(self, filename):
    with open(filename, "r") as fp:
        self.rawtext = fp.read()
    self.text = self.convert(self.rawtext) 
```

使用该`with`语法，当 Python 离开-suite时，文件句柄 ,`fp`会自动关闭。`with`

# c++ - 比较不同单词在输入 C++ 中出现的次数

> ID：15181547
> 
> 赞同：0
> 
> 时间：2013-03-03T01:42:08.553
> 
> 标签：c++, segmentation-fault

我一直在尝试不同的技术来解决这个问题，而且我对 C++ 或一般编程很陌生。这个问题来自我正在阅读的一本名为“Accelerated C++”的书，到目前为止我只在第 3 章，所以我试图只用第 3 章中所教的内容来解决这个问题。当我运行程序时，它运行良好，但是只要我输入一个单词，就会出现分段错误。谁能向我解释为什么会这样？此外，如果我的方法对我目前所知道的知识来说效率极低，那么在章节边界内暗示一种更好的做事方式会很棒！

这是代码：

```
#include <iostream>
#include <algorithm>
#include <ios>
#include <string>
#include <vector>
#include <iomanip>

using namespace std;

int main()
{
    //ask for the first sentence to be typed in.
    cout << "Please enter some words: ";
    vector<string> word_storage;
    vector<int> word_count;
    string x;
    int y = 0;

    //words inputed pushed into vector(word_storage) or incremented if they exist
    while(cin >> x) {

        for(int i = 0; i <= y; i++) {
            if(x != word_storage[i]) {
                word_storage.push_back(x);
                word_count.push_back(1);
            } else {
                word_count[i] += 1;
            }
        }
        y++;
    }

    cout << endl;

    //get size of word_storage
    typedef vector<double>::size_type vec_sz;
    vec_sz size = word_storage.size();

    //system prints how many of each word exist
    for(int j = 0; j <= size; j++) {
        cout << "There are: " << word_count[j]
                << " of the word " << word_storage[j];
    }

    cout << endl;
    return 0;
} 
```

PS我为眼睛疼痛的编码提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:00:46.937

向量包含自己的大小。我相信你可能有两个错误。首先，你的 for 循环中的 '<=' 将离开向量的末尾，它应该是 '<'。其次，当您不向 word_storage 添加单词时，您正在迭代 y。

我认为你发现部分应该看起来更像：

```
while(cin >> x) {
    for(int i = 0; i < word_storage.size(); i++) {
        if(x != word_storage[i]) {
            word_storage.push_back(x);
            word_count.push_back(1);
        } else {
            word_count[i] += 1;
        }
    }
} 
```

还可以进行一些其他改进，其中最重要的是使用结构将存储和计数绑定到同一个向量，并使用迭代器。当你读到这些章节时，考虑一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:49:26.240

```
for(int i = 0; i <= y; i++) {
        if(x != word_storage[i]) { 
```

`word_storage`是一个未初始化/空向量。并且您尝试访问空向量会导致分段错误。例如，在循环开始时，向量中没有任何内容可以对其进行下标操作。

对 进行`[]`操作`word_storage`，如果它的大小大于`i`。

# php - js 函数适用于 jquery 1.4.3 但不适用于 jquery 1.9.1

> ID：15181549
> 
> 赞同：0
> 
> 时间：2013-03-03T01:42:22.657
> 
> 标签：php, jquery, forms

我有一个用于将一组输入值附加到表单的脚本。这是脚本

```
<script type="text/javascript">

    var acount = 0;
    $(function(){

    $('a#add_asold').click(function(e){
    e.preventDefault();
    acount += 1;

    $('#accsold').append(   
        '<div class="row-fluid">'
        +'<div class="span12" style="border-bottom:1px lightgray solid; padding:5px 0px;">'    

                +'<div class="span3">'
                +'<label>Accessory Sold</label>'
                +'<input id="asold' + acount + '" name="asold' + acount + '" type="text" class="input-medium" />'
                +'</div> '

                +'<div class="span2">'
                +'<label>Price</label>'
                +'<input id="aprice' + acount + '" name="aprice' + acount + '" type="text" class="input-mini" />'
                +'</div>'
                +'<a href="#" id="aremove_field" class="btn btn-inverse btn-mini" style="margin-top:19px;">Delete</a>'                  
                +'<input type="hidden" name="acounter[]" value="1">'
                +'</div>'
        +'</div>'   
        +'</div>'   
         ); 
    $('a#aremove_field').click(function(e) {                                           
    e.preventDefault(); 
        $(this).parent().remove();          
        $('#accsold').append(
        '<input type="hidden" name="acounter[]" value="1">'
        );
    });
    });

}); 
```

这在 1.4.3 上运行良好，但升级到 jquery 1.9.1 后，我知道收到此错误

```
TypeError: $ is not a function
[Break On This Error]   

$(function(){ 
```

任何建议将不胜感激，Jquery 在附加脚本之前加载。

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery-migrate-1.1.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.9.2.min.js"></script> 
```

# android - 查找和访问应用程序的变量

> ID：15181550
> 
> 赞同：0
> 
> 时间：2013-03-03T01:42:26.907
> 
> 标签：android, variables

我在我的 Android 手机上使用 Beautiful Widgets 应用程序，我想将当前温度用作 Tasker 变量。

原因是我创建了一个自定义 UCCW 小部件并将其设置为打开 BW 的预测应用程序 - 通过调用 Tasker 任务，该任务调用此意图：

```
com.levelup.beautifulwidgets.full.activities.ForecastActivityFull 
```

现在小部件打开 BW，我希望它显示与 BW 相同的温度 - 但是，UCCW 不提供与 BW 相同的天气数据提供程序，因此温度值不同，这是蹩脚的（例如 UCCW 小部件显示 5° C 和 BW 表示 7°C）。

那么，是否有可能以某种方式通过 BW 应用程序，找到它在内部使用的变量，获取值并将其保存到 Tasker 变量？（因为，你知道，UCCW 允许我向小部件添加一个 Tasker 变量，在这种情况下，它是从 BW 获得的温度，以便它们匹配。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:52:54.220

根据[Android 安全提示](http://developer.android.com/training/articles/security-tips.html)，Android 应用程序是相互沙盒化的，这意味着您无法查看另一个应用程序正在使用的数据/变量，除非它们专门构建了一个接口（例如[ContentProvider](http://developer.android.com/guide/topics/providers/content-providers.html)），将其内部数据公开给其他应用程序。

不幸的是，我认为 Beautiful Widget 没有构建任何界面来查看他们的天气数据，也没有发布他们用来获取天气信息的服务（所以你可以从同一个来源获取），尽管有些人似乎认为这是天气渠道。

# c++ - push_front 分段错误 11 C++

> ID：15181552
> 
> 赞同：2
> 
> 时间：2013-03-03T01:43:29.437
> 
> 标签：c++, segmentation-fault

我试过环顾四周并尝试了所有解决方案，但我似乎无法解决我的问题。我知道我在 push_front 线上遇到了分段错误，但我只是迷路了。这是代码-

```
#include <iostream>
#include <fstream>
#include <sstream>
#include <list>

using namespace std;

typedef std::list<int> hSlots; //the list
typedef hSlots* hTable; //an array of lists

class HashTable
{
private:
int p; //p=number of slots in the hash table
hTable tmpPtr;
hTable *table;

 public:
HashTable(int p1);
int h1(int k);
~HashTable();

void chainedHashInsert(int x);

};

 HashTable::HashTable(int p1)
 {
p=p1;
hTable tTable[p];

//initializing to empty lists
for (int i=0; i<p; i++)
{
    tmpPtr = new hSlots;
    tTable[i] = tmpPtr;
}

table = tTable;
}

//destrcutor
HashTable::~HashTable()
{
delete table;
delete tmpPtr;
}

void HashTable::chainedHashInsert(int x)
{
tmpPtr = table[h1(x)];
cout<<"hashed"<<endl;
tmpPtr->push_front(x); //segmentation fault
}

int HashTable::h1(int k)
{
    int z = k%p;
    return z;
} 
```

我没有使用很多列表，所以我不太确定

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:01:21.260

也许这毕竟是一个正确的答案。

您的问题来自手动执行内存管理（错误），而实际上没有必要，在 C++ 中。

这是我在 C++ 中使用直接自动内存管理的看法：

```
#include <vector>
#include <list>

using namespace std;

template <typename T, typename hSlots = std::list<T> >
class HashTable
{
private:
    int p; //p=number of slots in the hash table
    std::vector<hSlots> table;
    int getbucket(int k) { return k%p; }

public:
    HashTable(int p1) : p(p1), table(p1) {}

    void chainedHashInsert(int x)
    {
        auto& tmpPtr = table[getbucket(x)];
        tmpPtr.push_front(x);
    }
};

int main()
{
    HashTable<int> table(37);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:48:58.317

```
table = tTable; 
```

这条线是问题（或至少其中之一）。

您将指向自动对象的指针存储到成员变量中，然后在对象被销毁后取消引用（并删除！）它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T01:47:53.340

因为`tTable`是 的局部变量，所以当方法返回并作为悬空指针离开`HashTable`时它会消失。因此，要摆脱这种情况，请执行以下操作；使用 . 为表格创建空间。`HashTable``table``new`

```
HashTable::HashTable(int p1)
 {
p=p1;
table  = new ttTable[p];

//initializing to empty lists
for (int i=0; i<p; i++)
{
    tmpPtr = new hSlots;
    table[i] = tmpPtr;
}
} 
```

# python - Python'for'循环问题，这两个变量在我的'for'循环中没有正确加在一起吗？

> ID：15181557
> 
> 赞同：0
> 
> 时间：2013-03-03T01:44:24.170
> 
> 标签：python, for-loop

我正在为一个更大的项目编写一个随机代数方程生成器的代码片段。到目前为止，一切都运行良好。主要问题很简单。我按顺序组合了字典的内容。所以为了争论，说字典是：`exdict = {a:1 , b:2 , c:3 , d:4}`，我将它们附加到一个列表中：`exlist = [a, b, c, d, 1, 2, 3, 4]`。我的列表的长度是 8，其中一半显然是 4。算法非常简单，无论生成 1-4 之间的随机数（或者 python 知道的 0-3 索引），如果你添加一半的长度到该索引值的列表中，您将获得正确的值。

我已经在网上和 stackoverflow 上进行了研究，但找不到任何可以应用于我的情况的答案......

以下是我的代码的错误检查版本。它会在发生时打印出每个变量。我遇到的问题是在`### ITERATIONS & SETUP`评论下。其余代码都在那里，因此可以正常运行。主要问题是 a + x 应该是 m，但 a + x 永远不会等于 m，m 总是悲惨地低。

错误检查代码：

```
from random import randint as ri
from random import shuffle as sh

#def randomassortment():
letterss = ['a','b','x','d','x','f','u','h','i','x','k','l','m','z','y','x']
rndmletters = letterss[ri(1,15)]
global newdict
newdict = {}
numberss = []
for x in range(1,20):

    #range defines max number in equation
    numberss.append(ri(1,20))

for x in range(1,20):
    rndmnumber = numberss[ri(1,18)]
    rndmletters = letterss[ri(1,15)]
    newdict[rndmletters] = rndmnumber
#x = randomassortment()
#print x[]

z = []
# set variable letter : values in list
for a in newdict.keys():
    z.append(a)
for b in newdict.values():
    z.append(b)

x = len(z)/2
test = len(z)

print 'x is value %d' % (x)

### ITERATIONS & SETUP

iteration = ri(2,6)

for x in range(1,iteration):
    a = ri(1,x)
    m = a + x
    print 'a is value: %d' % (a) 
    print 'm is value %d' %(m)
    print
    variableletter = z[a]
    variablevalue = z[m]
    # variableletter , variablevalue 
```

编辑 - 我的问题最终是，为什么`a + x`返回一个不是 + x 的值。如果您运行此代码，它将打印 x 、 a 和 m。m 应该是 a + x 的值，但出于某种原因，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T01:51:23.753

这不能按预期工作的原因是您的变量`x`最初表示列表的长度，但它在您的循环中被替换 -`for x in range`然后您希望它等于列表的长度。您可以将行更改为

```
for i in range(iteration) 
```

反而。

另请注意，您可以将 for 循环中的所有代码替换为

```
variableletter, variablevalue = random.choice(newdict.items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:51:03.253

你的问题是范围

你在这里找哪个 x

```
x = len(z)/2 # This is the first x
print 'x is value %d' % (x)

### ITERATIONS & SETUP

iteration = ri(2,6)

# x in the for loop is referencing the x in range...
for x in range(1,iteration):
    a = ri(1,x)
    m = a + x 
```

# python - Python RLock IO 绑定？

> ID：15181560
> 
> 赞同：0
> 
> 时间：2013-03-03T01:44:51.587
> 
> 标签：python, synchronization, multiprocessing, cpu-usage

我有一组受 CPU 限制的进程，只要它们唯一的同步是将作业从队列中取出，它们就可以将任意数量的内核利用率提高到 100%。

当我添加一个 RLock 以避免在更新文件系统中的目录时出现最坏的情况时，CPU/核心利用率下降到 60%，就好像进程已经成为 IO 绑定一样。

有什么解释？

这与整体速度无关。它与 CPU/核心利用率有关，因此 Python 2/3、Cython 或 PyPy 应该无关紧要。

**更新：**我对自己的问题给出了部分答案。我的特殊情况的最终解决方案包括修改文件系统的访问方式，因此不需要同步（“某种”映射/减少）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T15:32:53.583

这一切都取决于如何`multiprocessing`实施`RLock`。我知道多处理*可以*跨主机工作，这意味着同步原语可以跨套接字工作。如果这是真的，它会引入很多（可变）延迟。

所以我做了一个实验。

`RLock`这是一个被多个进程使用的例子（以防止所有锁都在同一个进程中的任何快速路径）：

```
#!/usr/bin/env python
import multiprocessing
from time import sleep

lock = multiprocessing.RLock()

def noop(myname):
    # nonlocal lock
    sleep(0.5)
    print myname, "acquiring lock"
    with lock:
        print myname, "has lock"
        sleep(0.5)
    print myname, "released lock"

sProc1 = multiprocessing.Process(target=noop, args=('alice',))
sProc2 = multiprocessing.Process(target=noop, args=('bob',))

sProc1.start()
sProc2.start()

sProc1.join()
sProc2.join() 
```

当它运行时，它的输出看起来像这样：

```
alice acquiring lock
alice has lock
bob acquiring lock
alice released lock
bob has lock
bob released lock 
```

太好了，现在通过[strace](http://en.wikipedia.org/wiki/Strace)使用系统调用跟踪运行它。

在下面的命令中，该`-ff`选项告诉工具“跟踪`fork()`”调用，即跟踪由主进程启动的任何进程。为简洁起见，我也在使用`-e trace=futex,write`，它根据我在发布之前做出的结论过滤输出。通常你会在没有`-e`选项的情况下运行并使用文本编辑器 /`grep`来探索事后发生的事情。

```
# strace -ff -e trace=futex,write ./traceme.py
futex(0x7fffeafe29bc, FUTEX_WAIT_BITSET_PRIVATE|FUTEX_CLOCK_REALTIME, 1, NULL, 7fb92ac6c700) = -1 EAGAIN (Resource temporarily unavailable)
futex(0x7fb92a8540b0, FUTEX_WAKE_PRIVATE, 2147483647) = 0
futex(0x7fb92aa7131c, FUTEX_WAKE_PRIVATE, 2147483647) = 0
write(3, "\1\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0", 32) = 32
Process 25873 attached
Process 25874 attached
Process 25872 suspended
[pid 25873] write(1, "alice acquiring lock\n", 21alice acquiring lock
) = 21
[pid 25873] write(1, "alice has lock\n", 15alice has lock
) = 15
[pid 25874] write(1, "bob acquiring lock\n", 19bob acquiring lock
) = 19
[pid 25874] futex(0x7fb92ac91000, FUTEX_WAIT, 0, NULL <unfinished ...>
[pid 25873] futex(0x7fb92ac91000, FUTEX_WAKE, 1 <unfinished ...>
[pid 25874] <... futex resumed> )       = 0
[pid 25873] <... futex resumed> )       = 1
[pid 25874] write(1, "bob has lock\n", 13 <unfinished ...>
bob has lock
[pid 25873] write(1, "alice released lock\n", 20 <unfinished ...>
alice released lock
[pid 25874] <... write resumed> )       = 13
[pid 25873] <... write resumed> )       = 20
Process 25872 resumed
Process 25873 detached
[pid 25872] --- SIGCHLD (Child exited) @ 0 (0) ---
Process 25872 suspended
[pid 25874] write(1, "bob released lock\n", 18bob released lock
) = 18
Process 25872 resumed
Process 25874 detached
--- SIGCHLD (Child exited) @ 0 (0) --- 
```

从 print ( `write()`) 消息和调用哪个阻塞和稍后恢复的模式来看，使用或“Fast Userspace Mutex”实现[`futex`](http://en.wikipedia.org/wiki/Futex)似乎很清楚。顾名思义，这是同步的不错选择。`RLock``futex`

当一个进程在系统调用`futex`中被阻塞时，例如该进程出于所有意图和目的而阻塞 I/O。

所有这一切都意味着它`multiprocessing.RLock`是高效的，并且按照它的设计目的去做。因此，如果您的应用程序在使用同步时的性能低于您的预期，那么您的算法很可能是罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T13:47:54.197

测量表明它`RLock`不受 I/O 限制。尽管与`RLock`(or `Semaphore`) 同步的代码似乎比不同步的代码慢 6 倍，但执行最简单 I/O 的代码要慢几个数量级。

下面是我用来测量`RLock`Python 和 PyPy 开销的单进程代码。我仍然不明白为什么`RLock`单个进程的开销如此之高，或者为什么开销不能维持 CPU/核心利用率，但结果表明使用标准同步原语比尝试自己滚动更有效.

```
# lock.py
import sys
import os
import timeit
from random import random
from multiprocessing import RLock, Semaphore

N=8*1024*1024

lock = RLock()
semaphore = Semaphore()

def touch(fname, times=None):
    if not os.path.isfile(fname):
        open(fname, 'wa').close()
    else:
        with file(fname, 'a'):
            os.utime(fname, times)

def wolock():
    return random()

def wlock():
    with lock:
        return random()

def wsem():
    with semaphore:
        return random()

def wfile():
   os.path.isfile('lock')
   touch('lock') 
   try:
        return random()
   finally:
        os.unlink('lock')

def run(get):
    result = []
    for i in xrange(N):
        result.append(get())
    return result

def main():
    t0 = timeit.timeit('lock.wolock()', setup='import lock', number=N)
    print '%8.3f %8.2f%% %s' % (t0, 100, 'unsynchronized')
    t1 = timeit.timeit('lock.wlock()', setup='import lock', number=N)
    print '%8.3f %8.2f%% %s' % (t1, 100*t1/t0, 'rlock')
    t2 = timeit.timeit('lock.wsem()', setup='import lock', number=N)
    print '%8.3f %8.2f%% %s' % (t2, 100*t2/t0, 'semaphore')
    t = timeit.timeit('lock.wfile()', setup='import lock', number=N)
    print '%8.3f %s' % (t, 'file system')

if __name__ == '__main__':
    main() 
```

# opengl-es - 纹理边缘透明度问题

> ID：15181562
> 
> 赞同：3
> 
> 时间：2013-03-03T01:45:18.263
> 
> 标签：opengl-es, opengl-es-2.0

我正在制作一个绘图软件，我几乎已经将画笔改进到了相当不错的性能和外观水平，但是我还有最后一个问题。为了获得我正在寻找的性能（多个撤消/历史级别），我必须将每个形状绘制到纹理并在简单的 4 顶点多边形上使用该纹理。一切顺利，性能很棒而且看起来很棒（尤其是在我启用了多重采样之后）仍然，在单独的帧缓冲区中绘制纹理的过程中，轮廓围绕着每个对象，如下图所示。我观察到轮廓的颜色与`glClearColor`. 我怀疑是混合？我用

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

但不确定。我怎样才能摆脱轮廓？

![在此处输入图像描述](../Images/f484aa66f243f3ce6db4d8963767eef2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:22:59.177

尝试使用预乘 alpha 进行混合：

```
glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA); 
```

为了使它适用于任何颜色，您还应该清除将在其中绘制纹理的颜色缓冲区，如下所示：

```
glClearColor(0, 0, 0, 0);
glClear(GL_COLOR_BUFFER_BIT); 
```

但是，如果您有半透明部件，这可能会导致问题。

# iphone - iAd 出现和消失

> ID：15181565
> 
> 赞同：0
> 
> 时间：2013-03-03T01:45:33.620
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone, iad

这可能只是因为我在我的设备上以开发模式运行它，但我在我的应用程序中添加了广告，它们似乎都像我预期的那样工作，但似乎在 2-5 分钟后它调用了 didFailToReceiveAdWithError 委托方法并隐藏广告。它通常会在一分钟内返回，但它经常这样做

我只是想知道这是否应该是我应该担心的事情，或者它是否与开发调试有关

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:35:25.850

在非 App Store 应用程序或 iOS 的 beta 版本中，iAd 始终使用测试广告。

我认为偶尔无法收到广告是苹果服务器不可用的情况。我想知道他们是否故意间歇性地投放广告，以便在广告确实不可用时帮助调试。

# c# - 调用报告后在远程打印机上打印

> ID：15181569
> 
> 赞同：0
> 
> 时间：2013-03-03T01:46:16.530
> 
> 标签：c#, .net, winforms, crystal-reports

作为持续需求的一部分，我们正在使用 Visual Studio 2008 将使用 Visual Basic 6 构建的旧版 Windows 窗体应用程序迁移到 .net 框架 3/3.5。有一个要求：获取打印机列表。打印机位于网络上的远程位置。如果用户选择打印机，系统应该能够将水晶报告打印到该特定打印机。我正在使用水晶报表查看器来预览报表，但是一旦我在水晶报表查看器中调用报表，该报表也应该被发送到在网络上的打印机下拉列表中选择的那个打印机。如何打印到网络上的远程打印机？我正在使用 c# 和 vs 2008 来实现这一点，作为 req 的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:26:44.653

我所做的是：

*   通过数据库查找、XML 文件或其他方式手动管理网络打印机名称列表（\server\printer1、\server\printer2 等）。
*   在客户端页面上，为打印机呈现一个下拉菜单并添加一个“打印”按钮。
*   直接在这些控件下，渲染没有标准打印/导出选项的 Crystal Viewer。
*   当客户端提交表单/页面时，根据下拉打印机 ID 进行服务器端打印。

您有 2 个选项用于使用在 IIS 下运行的免费 Crystal 运行时进行服务器端打印。

1.  旧的，已弃用的方式：`reportDocument.PrintToPrinter({printer settings}, {page settings}, {reformat})`. 您在 {printer settings} 中传递打印机名称。

2.  首选方式：`printOutputController.PrintReport({print options})`

注意：打印机名称在方法 2 中区分大小写，并且必须安装它才能显示`System.Drawing.PrinterSettings.InstalledPrinters()`给运行 .NET 进程的用户。

# java - BST 不是抽象的，不会覆盖 TreeGT 中的抽象方法 height()

> ID：15181575
> 
> 赞同：2
> 
> 时间：2013-03-03T01:47:36.077
> 
> 标签：java, binary-search-tree

我收到错误消息：**BST 不是抽象的，并且不会覆盖 TreeGT 中的抽象方法 height()**。我需要一些帮助来理解它的含义，以及如何解决它。

在文件 TreeGT.java 我有以下代码：

```
public interface TreeGT<E> {
    public boolean insert(E item);
    public boolean delete(E item);
    public boolean find(E item);
    public int height();
} 
```

在文件 BST.java 我有以下代码：

```
import java.util.*;

public class BST<E extends Comparable<E>> implements TreeGT<E> {

private Node root; //Only root by itself
public BST() {
    root = null;
    }

private static class Node {
    Comparable data; 
    int height; //Height of node 
    int size; //Number of nodes in tree
    private Node left; //Left subtree   
    private Node right; //Right subtree 

    Node (Comparable data) { //Constructor for tree 
        this.data = data;
        this.height = 0; //Height zero
        this.size = 1; //Root counts
        this.left = null; //No left leafs
        this.right = null; //No right leafs
        }
    }

    public void makeEmpty() {
        root = null;
        }

    public boolean isEmpty() {
        return root == null;
        }       

    public int size() {
        if (isEmpty())
            throw new Exception("Tree is empty");
        return root == null ? 0 : root.size;
        }

public boolean insert(E item) { 
return false;
}

public boolean delete(E item) { 
return false;
}

public boolean find(E item) { 
return false;
}

} 
```

PS我只用java编程了几天，所以你必须尽可能简单/直截了当地说话，拜托。另外，我正在尝试创建一个 BST。我认为我走在正确的道路上，不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T01:51:07.727

接口是未定义（即抽象）方法的集合。当您实现一个接口（您在 中执行`implements treeGT`）时，您必须为所有这些方法提供一个定义。因此，由于您的类实现了 treeGT，并且 height() 是 treeGT 中定义的抽象方法之一，因此您必须在您的类中定义该方法。

即你需要添加

```
public int height(){
    //do something
} 
```

# c++ - 将变量与多个值进行比较的最有效方法？

> ID：15181579
> 
> 赞同：26
> 
> 时间：2013-03-03T01:48:05.610
> 
> 标签：c++, variables, if-statement, comparison

在我的程序中有几次，我不得不检查一个变量是否是许多选项之一。例如

```
if (num = (<1 or 2 or 3>)) { DO STUFF } 
```

我已经搞砸了“或”，但似乎没有什么是正确的。我试过了

```
if (num == (1 || 2 || 3)) 
```

但它什么也没做。

我想方便地区分几个组。例如

```
if (num = (1,2,3))

else if (num = (4,5,6))

else if (num = (7,8,9)) 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-03T02:56:08.057

这是 C++11 中的一种方法，使用`std::initializer_list`：

```
#include <algorithm>
#include <initializer_list>

template <typename T>
bool is_in(const T& v, std::initializer_list<T> lst)
{
    return std::find(std::begin(lst), std::end(lst), v) != std::end(lst);
} 
```

有了它，你可以这样做：

```
if (is_in(num, {1, 2, 3})) { DO STUFF } 
```

尽管不与内置类型一起使用时，它不是很有效。`int`可以正常工作，但是如果您比较`std::string`变量，例如，生成的代码很糟糕。

但是，在 C++17 中，您可以改用更有效的解决方案，该解决方案适用于任何类型：

```
template<typename First, typename ... T>
bool is_in(First &&first, T && ... t)
{
    return ((first == t) || ...);
}

// ...

// s1, s2, s3, s4 are strings.
if (is_in(s1, s2, s3, s4)) // ... 
```

C++11 版本在这里效率非常低，而这个版本应该产生与手写比较相同的代码。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-03T02:41:07.330

如果您要检查的值足够小，您可以为您寻找的值创建一个位掩码，然后检查该位是否被设置。

假设，您关心几个组。

```
static const unsigned values_group_1 = (1 << 1) | (1 << 2) | (1 << 3);
static const unsigned values_group_2 = (1 << 4) | (1 << 5) | (1 << 6);
static const unsigned values_group_3 = (1 << 7) | (1 << 8) | (1 << 9);    
if ((1 << value_to_check) & values_group_1) {
  // You found a match for group 1
}
if ((1 << value_to_check) & values_group_2) {
  // You found a match for group 2
}
if ((1 << value_to_check) & values_group_3) {
  // You found a match for group 3
} 
```

这种方法最适用于不超过 CPU 喜欢使用的自然大小的值。在现代，这通常是 64，但可能会根据您的环境的具体情况而有所不同。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-03T01:52:39.680

您必须与每个值进行比较。例如

```
if (num == 1 || num == 2 || num == 3) { stuff } 
```

您可能还想考虑切换并故意放弃案例（尽管我认为这不是您所说的最佳解决方案）。

```
switch (num) {
    case 1:
    case 2:
    case 3:
        {DO STUFF}
        break;

    default:
        //do nothing.
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-01-24T09:51:19.500

我刚刚遇到了类似的问题，我来到了这些 C++11 解决方案：

```
template <class T> 
struct Is 
{ 
  T d_; 
  bool in(T a) { 
    return a == d_; 
  } 
  template <class Arg, class... Args> 
  bool in(Arg a, Args... args) { 
    return in(a) || in(args...); 
  } 
}; 

template <class T> 
Is<T> is(T d) { 
  return Is<T>{d}; 
} 
```

或者作为没有递归终止方法的替代方案。请注意，这里的比较顺序是未定义的，并且如果找到第一个匹配项，则不会提前终止。但是代码更紧凑。

```
template <class T>
struct Is {
  const T d_;
  template <class... Args>
  bool in(Args... args) {
    bool r{ false }; 
    [&r](...){}(( (r = r || d_ == args), 1)...);
    return r;
  }
};

template <class T>
Is<T> is(T d) { 
  return Is<T>{d}; 
} 
```

因此，对于这两种解决方案，代码如下所示：

```
if (is(num).in(1,2,3)) {
  // do whatever needs to be done
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-03-03T01:58:28.133

您可以定义一组整数，将所需的值添加到其中，然后使用 find 方法查看有问题的值是否在集合中

```
std::set<int> values;
// add the desired values to your set...
if (values.find(target) != values.end())
    ... 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-02-10T23:56:29.863

我需要为枚举做类似的事情。我有一个变量，并希望根据一系列值对其进行测试。

在这里，我使用了可变参数模板函数。请注意 type 的专业化`const char*`，因此对于 when stores`is_in( my_str, "a", "b", "c")`有预期的结果。`my_str``"a"`

```
#include <cstring> 

template<typename T>
constexpr  bool is_in(T t, T v) {
  return t == v;
}

template<>
constexpr  bool is_in(const char* t, const char* v) {
  return std::strcmp(t,v);
}

template<typename T, typename... Args>
constexpr bool is_in(T t, T v, Args... args) {
  return  t==v || is_in(t,args...);
} 
```

示例用法：

```
enum class day
{
  mon, tues, wed, thur, fri, sat, sun
};

bool is_weekend(day d)
{
  return is_in(d, day::sat, day::sun);
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2020-04-05T09:15:20.710

```
float n;
if (n<1) exit(0);  
if (n / 3 <= 1)  
   // within 1, 2, 3
else if (n / 3 <= 2)  
   // within 4, 5, 6  
else if (n / 3 <= 3)  
   // within 7, 8, 9 
```

# python - 解析文本文件时出现神秘大括号

> ID：15181580
> 
> 赞同：0
> 
> 时间：2013-03-03T01:48:07.553
> 
> 标签：python, parsing, text

我有一个文本文件，我试图用 python 从中提取数据。该文件如下所示：

```
Donald Duck, 45, 2 
Jim Jones, 55, 4
Jetson Elroy, 82, 2 
```

我尝试使用此代码。

```
with open('Exam1.txt.rtf', 'r') as file:
for line in file:
    mylist = line.strip().split(',') 
```

当我执行代码然后检查 mylist 的值时，我得到

```
['Jetson Elroy', ' 85', ' 2}'] 
```

我不知道 2 之后的那个支架是从哪里来的。我怎样才能删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:01:34.173

正如我们在评论中所说，.rtf 文件不是纯文本文件，因此当您`open()`在 python 中打开一个文件时，您将读取 .rtf 文件用于格式化的所有其他内容——包括`}`s。

# validation - 验证在 Webmatrix 2 中不起作用

> ID：15181582
> 
> 赞同：1
> 
> 时间：2013-03-03T01:48:44.110
> 
> 标签：validation, webmatrix-2

我的验证不起作用。我不知道我错过了什么，我从[这里](http://www.asp.net/web-pages/tutorials/working-with-pages/validating-user-input-in-aspnet-web-pages-sites#Validating_User_Input_in_ASP.NET_Web_Pages1)读到，

```
@{
Validation.Add("number", Validator.Integer("Must be integer"));
     if(IsPost)
    {  
     if(Validation.IsValid())
     {
      <div>Number Submitted!</div>
     }
    }  
}
.......

  <form action="" method="post">
            <div>
            @Html.Label("Insert a number:", "number")
            @Html.TextBox("number",Request["number"])
            @Html.ValidationMessage("number")
            </div>
  <div>
  <input type="submit" value="submit">
  </div>
  </form> 
```

我可以输入任何值，但验证消息什么也没有显示，我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T05:46:10.237

您还应该添加一个`Required`验证器：

```
Validation.Add("number", 
    Validator.Required("Gimme something, please?"),
    Validator.Integer("Must be integer")
); 
```

# c++ - C++ 兰德函数错误

> ID：15181588
> 
> 赞同：-1
> 
> 时间：2013-03-03T01:49:29.650
> 
> 标签：c++, random

我正在尝试制作基于文本的角色扮演游戏，并且我目前正在实现 diceroll 功能：

```
int diceRoll(){
int n;
srand(time(0));
n = rand() % 4;
return n;
}
int main()
{
    int RandNum = diceRoll();
    cout<< "   Randomly generated number: " + RandNum;
    return 0;
} 
```

然而它输出了这个：

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-03T01:50:46.910

尝试：`cout << "Randomly generated number: " << RandNum;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T01:51:55.140

您实际上是在将数字添加到字符串中......这并没有按照您的想法进行。实际上，它计算字符串的地址偏移量，我猜这就是您在开头添加一些空格的原因。您可能想要流插入运算符`<<`：

```
cout<< "   Randomly generated number: " << RandNum; 
```

`srand()`此外，在随机数生成器内部调用是个坏主意。为什么？因为如果你快速调用它很多次`time()`可能每次都返回相同的值，导致每次都`rand()`以相同的值作为种子，因此给出相同的结果（也就是不是很随机）。在大多数情况下，您应该在程序开始时调用`srand()`一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-28T06:11:45.650

您通常不应该使用 rand() 和模数。这是一个坏习惯。相反，请使用`<random>`： [http://www.cplusplus.com/reference/random/。](http://www.cplusplus.com/reference/random/) 或者只是谷歌“c++随机头使用”或类似的东西。

# symfony - 如何确保 Doctrine 不缓存空值？

> ID：15181589
> 
> 赞同：1
> 
> 时间：2013-03-03T01:49:32.757
> 
> 标签：symfony, doctrine-orm

我`symfony2`用`doctrine`. 有没有办法在查询中不缓存空结果？

```
$query->useResultCache(true, 3600, 'example'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:13:19.790

您可以使用自己的类扩展结果缓存驱动程序并包装其“保存”方法。

有多个缓存提供者，它们都扩展[了这个](https://github.com/doctrine/cache/blob/master/lib/Doctrine/Common/Cache/CacheProvider.php)抽象类

创建包装器后，您可以直接在 config.yml 中定义缓存提供程序类（或者如果您移动了学说的参数）。[这](http://symfony.com/doc/current/reference/configuration/doctrine.html)是 Doctrine 的配置参考。在上面链接的页面中，您应该查看下的`class`参数`result_cache_driver`。

# c# - 有条件地替换字符串的一部分

> ID：15181590
> 
> 赞同：1
> 
> 时间：2013-03-03T01:49:45.030
> 
> 标签：c#, regex

我有一个与 C# 中的字符串操作有关的问题。

假设我有一个字符串：

```
"Today I ate a <a href="link here "> chocolate </a> at the <a href=\"another link here"> supermarket</a>. It was a brand of <a href=\"3rd link">Contoso</a> 
```

我想做：

```
"Today I ate a  chocolate at the supermarket. It was a brand of Contoso. 
```

我可以删除`</a>`它的一部分，但我不确定如何删除所有和之间的任何`<a href`东西`>`

我该怎么做呢？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:04:32.200

在这里找到了一个很好的答案：[Need regular expression to remove <a href="xx">Name</a> tags from a string](https://stackoverflow.com/questions/5792522/need-regular-expression-to-remove-a-href-xxname-a-tags-from-a-string)

也有效！

随意发布任何更好，更有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:01:40.130

`Regex`可能是最好的选择，但是如果您不想使用`Regex`它，以您想要的方式解析字符串将会非常繁琐。

一个想法可能是拆分字符串，`</a>`然后抓取`<a`和`>`

```
 var result = new string (input.Split(new string[] { "</a>" }, StringSplitOptions.RemoveEmptyEntries)
    .SelectMany(s => s.Where((c, i) => i < s.IndexOf("<a") || i > s.IndexOf(">"))).ToArray()); 
```

所以我会坚持`Regex`如果它对你有用，因为它比使用字符串选项容易得多

# assembly - 汇编，栈上局部变量的算术运算

> ID：15181592
> 
> 赞同：3
> 
> 时间：2013-03-03T01:50:25.267
> 
> 标签：assembly, stack, add

我最近一直在使用 Visual C++ 中的内联汇编，我想知道是否可以直接将值添加到堆栈上的局部变量，例如：

```
push 5
add [esp], 7 
```

这样做可以吗？我在问因为我随机遇到了一些奇怪的问题（尽管大多数时候它工作正常），但是如果我通过一个寄存器我从来没有任何问题，就像这样：

```
push 5
mov eax, [esp]
add eax, 7
mov [esp], eax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T11:48:49.440

正如 Vlad Krasnov 在对该问题的评论中所说，问题来自编译器（和/或汇编器）不知道代码中参数的大小，例如`add [esp], 7`. 例如，如果您正在编写，则不会出现此问题`add [esp], eax`。

如果你是编译器，你会如何解释这条指令？您被要求将 7 添加到 ESP 指向的内存位置。但既没有 7，也没有`[esp]`指定加法的参数有多大。一个字节？两个字节？四个字节？如果这不是内联汇编，甚至 8 个字节也是可能的（在 64 位代码中是不允许的。）

请注意，虽然 ESP 是 4 个字节，但它指向的内存位置可以是任意大小。立即数 7 也是如此，它可以容纳任意数量的字节。

Vlad Krasnov 在评论中再次提到的解决方案是明确指定操作数的大小。您可以查看您最喜欢的汇编器文档，但在这种情况下，如果您想要 32 位加法，您可以编写`add DWORD PTR [esp], 7`. 这显然表示`[esp]`指向内存中的 DWORD（MASM 为 32 位。）

另请注意，并非 x86 上的所有指令都支持其中包含立即值*和*内存地址的形式。对于每条指令，您可以查看“ *Intel Architectures Software Developer Manual* ”，第 2 卷（这是指令集参考），以确保您尝试使用的指令确实存在！

而且，您应该始终检查编译器的汇编输出（因为您正在使用内联汇编）以确保编译器生成的代码实际上是您想要的。指示编译器生成汇编代码很容易，而且可读性很强！

# php - 瑞典当地银行的付款方式

> ID：15181596
> 
> 赞同：0
> 
> 时间：2013-03-03T01:50:57.970
> 
> 标签：php, mysql, payment

我有一个非常简单的 PHP & MySQL 网站。我想在我的网站中包含一个支付系统，但瑞典只有当地银行支付。

有内置模块吗？知道这要花多少钱吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:05:30.413

您需要与支付服务提供商集成。因为你在瑞典，所以有点尴尬，但一些流行的选择是：

*   [亚马逊支付](https://payments.amazon.com/sdui/sdui/business?sn=devfps/o)
*   [谷歌结帐](https://developers.google.com/checkout/developer/)
*   [贝宝](https://www.x.com/developers/paypal)（严重失宠，大量冻结账户问题）
*   [条纹](https://stripe.com/)（仅限美国）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:06:38.597

PHP没有内置任何东西。

我的谷歌搜索的第一个结果是：[api.payson.se](http://api.payson.se)

# javascript - 禁用捏合放大IE10

> ID：15181601
> 
> 赞同：15
> 
> 时间：2013-03-03T01:51:18.943
> 
> 标签：javascript, css, html, internet-explorer-10, gestures

在 IE10 触摸模式下，我希望仅使页面的某个部分可缩放。其余的不应该。

我发现了这个：http: [//msdn.microsoft.com/en-US/library/ie/hh772044.aspx](http://msdn.microsoft.com/en-US/library/ie/hh772044.aspx)并尝试设置`-ms-touch-action: none`为我的`body`和`html`标签。

但是我仍然可以缩放。我错过了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-03T02:02:24.593

找到了解决方案：`-ms-content-zooming: none | zoom`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-05T11:50:53.503

对我来说，这个 CSS 代码工作

```
html {

      -ms-content-zooming: none;
      -ms-touch-action: pan-x pan-y;

} 
```

我正在使用此代码在 Windows 平板电脑 IE 10 上禁用捏合和双击缩放

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T18:40:57.593

尝试将其添加到您的 Head 区域：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"> 
```

# crystal-reports - Crystal Reports EvaluateAfter Issue

> ID：15181604
> 
> 赞同：2
> 
> 时间：2013-03-03T01:51:58.657
> 
> 标签：crystal-reports

我在子报表中有一个值，我想将其包含在主报表中的公式计算中。为了获得这个值，我在子报表和主报表之间使用了一个共享变量。子报表位于组页脚中，我将公式（我们称之为 FormulaShared）放在报表页脚（组页脚之后的部分）中。

我可以在报告页脚中看到共享变量的值，所以我知道该部分正在工作。使用此值的公式虽然无法获得正确的值。这个公式的评估时间设置为 EvaluateAfter(FormulaShared)，所以我认为计算将在值打印到报告后完成。然而，这并没有发生。那么，鉴于我的报表的当前结构，这在 Crystal Reports 中是不可能完成的吗？如果不是，是否有任何可行的解决方法来解决这个问题？

我正在使用水晶报表 10。

# haskell - 为什么在模式匹配前添加波浪号会减慢我的功能？

> ID：15181610
> 
> 赞同：21
> 
> 时间：2013-03-03T01:52:43.833
> 
> 标签：haskell

我在一段 haskell 代码中定义了两个函数：

```
lengthwtilde [] = 0
lengthwtilde ~(_:xs) = 1 + lengthwtilde xs

lengthwotilde [] = 0
lengthwotilde (_:xs) = 1 + lengthwotilde xs 
```

当我在 ghci 中测试它们（使用`:set +s`）时，我发现`lengthwtilde`（模式匹配前面带有波浪号的那个）的执行速度明显慢于`lengthwotilde`大约 3 秒。

```
*Main> lengthwtilde [1..10000000]
10000000
(19.40 secs, 1731107132 bytes)
*Main> lengthwotilde [1..10000000]
10000000
(16.45 secs, 1531241716 bytes) 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-03T02:42:09.350

在模式匹配前添加 a`~`使该匹配*无可辩驳*。您可以将其视为为模式添加了额外的惰性，因此它永远不会匹配失败，除非该匹配是绝对需要的评估。这是一个简单的例子：

```
Prelude> (\ (_:_) -> "non-empty") []
"*** Exception: <interactive>:2:2-23: Non-exhaustive patterns in lambda

Prelude> (\ ~(_:_) -> "oops") []
"oops" 
```

使用无可辩驳的模式匹配，即使模式匹配在空列表上失败，由于没有评估绑定变量，因此没有错误。本质上，无可辩驳的模式匹配将函数转换为：

```
\ xs -> let (_:_) = xs in "oops" 
```

正是这种额外的懒惰包装减慢了你的长度函数。如果你应用相同的 let-binding 变换，`lengthwtilde`你会得到

```
lengthwtilde [] = 0
lengthwtilde xs' = let (_:xs) = xs' in 1 + lengthwtilde xs 
```

想想这是如何评估的。在顶层，你得到`1+lengthwtilde xs`. 但是 xs 甚至没有被评估，因为它是一个 let-bound 变量。因此，在下一步中，对 first`xs`进行评估以确定它与 的第二种情况匹配`lengthwtilde`，然后重复该过程。

将此与`lengthwotilde`. 在此函数中，对函数的第二种情况进行匹配的行为也会强制对参数进行评估。最终结果是相同的，但是能够更快地打开它而不是让另一个 thunk 被强制执行更有效。

从技术上讲`lengthwtilde`稍微复杂一些：参数已经在第二个分支中进行了*评估*，因为这是我们确定我们所在的分支的方式，但是当传递给递归调用时它会被重新包装。

能够看到生产的核心很有用。这是`lengthwotilde`（产生于`ghc -O0`：

```
Foo.lengthwotilde =
  \ (@ t_afD)
    (@ a_afE)
    ($dNum_afF :: GHC.Num.Num a_afE)
    (eta_B1 :: [t_afD]) ->
    letrec {
      lengthwotilde1_af2 [Occ=LoopBreaker] :: [t_afD] -> a_afE
      [LclId, Arity=1]
      lengthwotilde1_af2 =
        \ (ds_dgd :: [t_afD]) ->
          case ds_dgd of _ {
            [] -> GHC.Num.fromInteger @ a_afE $dNum_afF (__integer 0);
            : ds1_dge xs_af1 ->
              GHC.Num.+
                @ a_afE
                $dNum_afF
                (GHC.Num.fromInteger @ a_afE $dNum_afF (__integer 1))
                (lengthwotilde1_af2 xs_af1)
          }; } in
    lengthwotilde1_af2 eta_B1 
```

请注意，该函数`lengthwotilde1_af2`立即`case`对参数执行 a `ds_dgd`（这是输入列表），然后在 case 内部递归，形成一个 thunk（带有一些扩展）：

```
1 + len [2..]
1 + (1 + len [3..])
1 + (1 + (1 + len [4..]) 
```

这最终需要评估 1 + (1 + (1 + (1 + ..)))

这里是`lengthwtilde`

```
Foo.lengthwtilde =
  \ (@ t_afW)
    (@ a_afX)
    ($dNum_afY :: GHC.Num.Num a_afX)
    (eta_B1 :: [t_afW]) ->
    letrec {
      lengthwtilde1_afM [Occ=LoopBreaker] :: [t_afW] -> a_afX
      [LclId, Arity=1]
      lengthwtilde1_afM =
        \ (ds_dgh :: [t_afW]) ->
          case ds_dgh of wild_X9 {
            [] -> GHC.Num.fromInteger @ a_afX $dNum_afY (__integer 0);
            : ipv_sgv ipv1_sgw ->
              GHC.Num.+
                @ a_afX
                $dNum_afY
                (GHC.Num.fromInteger @ a_afX $dNum_afY (__integer 1))
                (lengthwtilde1_afM
                   (case wild_X9 of _ {
                      [] ->
                        (Control.Exception.Base.irrefutPatError
                           @ () "foo.hs:(3,1)-(4,42)|(_ : xs)")
                        `cast` (UnsafeCo () [t_afW] :: () ~# [t_afW]);
                      : ds1_dgk xs_aeH -> xs_aeH
                    }))
          }; } in
    lengthwtilde1_afM eta_B1 
```

对此的评估形成了不同的声音：

```
len [1..]
1 + (len (if null [1..] then error else [2..]))
1 + (len [2..])
1 + (1 + len (if null [2..] then error else [3..])) 
```

这最终会导致您第一次得到相同的添加链，但有一些额外的逻辑来处理无可辩驳的模式失败。

现在，如果您正在运行带有任何优化的编译代码，ghc 几乎肯定会发现参数不可能为空，因为`(:)`此时它们已经被评估并知道使用构造函数。当我编译`ghc -O2`并运行代码时，两个函数的执行时间相同。它们都很糟糕，因为任何一种方式都会导致一连串的重击。的标准定义`length`要好得多，因为这将是一个很好的`foldl'`定义。

# android - 三星 Android 设备不会进入调试模式

> ID：15181611
> 
> 赞同：3
> 
> 时间：2013-03-03T01:52:43.890
> 
> 标签：android, eclipse, debugging, adb

我有一个简单的问题，但到目前为止，在本网站和其他网站上找到的所有建议都没有帮助。

我正在尝试通过 Eclipse 调试三星设备（SCH-R720。）

我以前做过这个没有问题。我最近得到了一个替换设备（相同的品牌和型号，相同的 SD 卡），但我还没有成功让手机进入调试模式。

插入后，我可以看到 USB 已连接到我手机的状态托盘中，并可以选择将文件复制到我的计算机（顺便说一句，它工作正常） - 但是，“调试模式”消息永远不会出现了，我的手机没有被 eclipse 或“adb devices”看到

这是我尝试过的，或多或少的明显顺序：

在设备“设置”中，我允许来自未知来源的应用程序，并启用 USB 调试。

我尝试了不同的 USB 电缆，没有任何变化。

我已经在这台笔记本电脑上为我的手机安装、卸载并重新安装了相应的 USB 驱动程序。请注意，这些已经安装，因为我之前在这台笔记本电脑上做了很多调试。

我尝试清除手机上安装的每个应用程序的缓存，然后简单地恢复出厂设置（不是什么大麻烦，因为我最近才拿到这款手机。）

在命令提示符下，我尝试了“adb devices”，但没有列出。我尝试了“adb kill-server”，但这根本没有帮助。

在 Android SDK 管理器中，我确认已安装 Google USB 驱动程序。他们是。然后我重新安装了Android SDK并重新执行了上述所有步骤，但无济于事。

另外我应该注意，在上面列出的这些步骤中，我会定期重新启动手机和计算机。

这令人沮丧。以前有人遇到过这个问题，这不仅仅是由于没有安装驱动程序或其他原因造成的吗？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:29:02.713

您还可以在 android adb 设置文件中指定设备供应商。

首先，您需要找到设备供应商。在 Windows 中，转到“开始”->“控制面板”->“设备管理器”->“Android 设备”->打开 adb 设备驱动程序，您将有 3 个选项卡，“常规”、“驱动程序”、“详细信息”。

转到'Details'，从组合'Hardware Ids'中选择并查看值，它应该是这样的：USB\VID_XXXX&PID_YYYY

硬件供应商是：XXXX

现在您需要在 adb 设置文件中添加供应商：

它位于：C:\Users\.android\adb_usb.ini

只需插入：0xXXXX

在文件的末尾。保存并再次启动 adb（使用 kill-server）

# java - Java & MySQL - 唯一键不起作用？

> ID：15181612
> 
> 赞同：0
> 
> 时间：2013-03-03T01:52:47.000
> 
> 标签：java, mysql

我正在使用 MySQL Workbench，并将我的一列分配为唯一键。当我检查 MySQL 表时，它仍然输入重复的“users_name”我还是 MySQL/Java 的新手，所以我确定我只是犯了一个愚蠢的错误。

```
System.out.print("Name: ");
String name = sc.nextLine();
System.out.print("Password: ");
String pass = sc.nextLine();

String SQL = String.format("INSERT INTO users (users_name, users_password) values('" + name + "','" + pass + "')");
PreparedStatement stmt = (PreparedStatement) connection.prepareStatement(SQL);
stmt.executeUpdate(SQL); 
```

MySQL 表定义：

```
CREATE  TABLE IF NOT EXISTS `mydb`.`users` (
`users_id` INT NOT NULL AUTO_INCREMENT ,
`users_name` VARCHAR(45) NULL ,
`users_password` VARCHAR(45) NULL ,
PRIMARY KEY (`users_id`) ,
UNIQUE INDEX `users_id_UNIQUE` (`users_id` ASC) ,
UNIQUE INDEX `users_name_UNIQUE` (`users_name` ASC) )
ENGINE = InnoDB 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:01:41.447

不是真正的答案，而是非常有用的建议：

这是你应该如何使用你的`PreparedStatement`：

```
String sql = "INSERT INTO users (users_name, users_password) values (?, ?);";
PreparedStatement stmt = connection.prepareStatement(sql);
stmt.setString(1, name);
stmt.setString(2, pass);
stmt.executeUpdate(); 
```

要回答您的实际问题，我们需要查看表定义。

# powershell - 有没有办法根据当前工作目录更改 Powershell 的环境路径？

> ID：15181619
> 
> 赞同：2
> 
> 时间：2013-03-03T01:54:16.517
> 
> 标签：powershell

所以我在 Scripts 文件夹下有一个包含一些实用程序脚本的代码存储库。每当我想运行实用程序脚本时，我必须输入：

```
./scripts/someScript.ps1 someParam 
```

有没有办法让我设置 env:path 所以我只需要输入：

```
someScript someParam 
```

但只有当工作目录是我的本地存储库的一部分时？因此，例如，当我在时它会起作用：

```
c:\code\project1
c:\code\project1\source 
```

但不在

```
c:\code
c:\code\project2 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T20:02:27.013

正如@graimer 提到的，您可以[创建一个代理函数](http://dmitrysotnikov.wordpress.com/2012/03/30/video-shay-levy-and-kirk-munro-leveraging-proxy-functions-in-powershell/)来覆盖默认的 Set-Location（和 cd）行为。然而，更简单的方法可能是只创建一些别名。我这样做是为了确保获得特定版本的 msbuild，例如

```
New-Alias msbuild4 c:\windows\microsoft.net\framework\v4.0....\msbuild.exe 
```

# django - Django：使用基于类的视图基于对象的属性进行身份验证

> ID：15181622
> 
> 赞同：2
> 
> 时间：2013-03-03T01:54:43.993
> 
> 标签：django, django-authentication, django-class-based-views

假设我的应用程序就像一个论坛，但每个帖子都有一组可能会看到它的人。

```
SecretPost(Model):
    can_see = myapp.main.models.GroupOfUsers() 
```

我想写一个限制用户访问这些帖子的视图，而且我更喜欢使用装饰器，因为这就是我在其他地方处理访问控制的方式。

```
SecretPostView(DetailView):
    """Can only be seen by members of its group"""

    @method_decorator(part_of_its_group)
    def dispatch(self, request, *args, **kwargs):
        return super(SecretPostView, self).dispatch(request, *args, **kwargs) 
```

但是当`dispatch()`被调用时，我对这个对象一无所知。在已经检索到对象后，是否有一种好的/惯用的方法来限制用户访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:58:03.393

您可以访问`self`方法装饰器内部，因此您*可以*访问当前调用的对象`self.get_object()`。

无论如何，如果您只在通用视图上使用此行为，那么您最好创建一个实现该`dispatch`方法（或可能是该`get_object`方法）并在那里进行检查的 mixin，例如（使用一点想象力，因为 idk how您的组已定义，也许您正在使用 django.contrib.auth 组）：

```
class GroupRestrictionMixin(object):
    group_field = 'group'

    def dispatch(request, *args, **kwargs):
        self.request = request
        self.args = args
        self.kwargs = kwargs

        obj_group = getattr(self.get_object(), self.group_field)
        user_groups = request.user.groups

        if obj_group not in user_groups:
            raise PermissionDenied

        return super(GroupRestrictionMixin, self).dispatch(request, *args, **kwargs) 
```

然后，您可以使用 mixin 创建任何需要该行为的视图：

```
class SecretPostView(GroupRestrictionMixin, DetailView):
    pass 
```

如果这就是你所说的“惯用”的话，我不知道，但这是保持简单和可重用的更简单的方法。

**编辑：**必须在此处设置请求、args 和 kwargs，以便该`get_object`方法可以访问它们。它变得有点难看（你必须重复一些基本`dispatch`方法上的代码），但仍然有效：F

# c# - 在 C# 中使用带有 SSL 的 WebClient，因此无法嗅探流量

> ID：15181623
> 
> 赞同：2
> 
> 时间：2013-03-03T01:54:51.103
> 
> 标签：c#, ssl, webclient, fiddler

我正在编写一个客户端以通过 https 从服务器（不受我控制）检索数据，并且效果很好。

我想要做的是使我对服务器的请求不能被客户端计算机上的某人使用 Fiddler 等嗅探。那么有什么方法可以在 Fiddler 拦截它们之前对 headers/url 进行加密？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:02:27.700

我对 Fiddler 的理解是，它通过冒充代理站在客户端和服务器之间。你是对的，看起来 Fiddler 有能力拦截 HTTPS 传输。

**但是**，根据[Fiddler 的文档](http://www.fiddler2.com/fiddler/help/httpsdecryption.asp)，您的 C# 应用程序不会信任 Fiddler 提供的证书。C# 应用程序将抛出一个异常，指出它无法验证与远程服务器的信任。并且不会传输任何数据。

如果您真的很偏执，您可以执行所谓的“证书固定”，您的 C# 应用程序将从 HTTPS 服务器查找特定证书，以确保它是您正在寻找的确切服务器。但是，如果证书要更改，您需要更新您的应用程序。

编辑：重新阅读文档，Fiddler 确实为它使用的证书提供了一种受 Windows 信任的方法（以及使用 Chrome 和 .NET 等受信任商店的任何后续应用程序）。如果这样做了，您的 C# 应用程序很可能会正常运行，而您的流量对 Fiddler 完全可见。如果您出于某种原因对此感到担心，我会研究一下证书固定。

# php - 如何删除 MySQL 数据库中的重复条目？

> ID：15181624
> 
> 赞同：0
> 
> 时间：2013-03-03T01:55:25.937
> 
> 标签：php, mysql

我有一个看起来像这样的数据库：

![在此处输入图像描述](../Images/786e3831836e7ee8d5e73f2407b4c47c.png)

我需要删除第 2 到第 7 个条目，我只想要其中一个。如果`movie_id`,`question_id`和 value 相同，则它们都是相同的。

我目前正在执行以下操作，它一直有效，直到超时，但仅在大约一千个条目后超时，正如您通过 ID 列可以看出的那样，有超过 50,000 个条目。

```
$top_index = count($all_movies)-1;$top = $all_movies[$top_index];
$max = $top->id;
for($i = 25200; $i<$max-1;$i++){
    for($j = 0; $j<$max-1;$j++){
        if($i != $j){
            if($all_movies[$i]->movie_id == $all_movies[$j]->movie_id){
                if($all_movies[$i]->question_id == $all_movies[$j]->question_id){
                    if($all_movies[$i]->value == $all_movies[$j]->value){
                        echo 'Need to remove '. $all_movies[$j]->id.':<br> Movie Id:'.$all_movies[$i]->movie_id.' Question ID: '.$all_movies[$i]->question_id.' Value: '.$all_movies[$i]->value.'<br>';
                        echo 'Matched with: <br>'. $all_movies[$i]->id.': Movie Id:'.$all_movies[$j]->movie_id.' Question ID: '.$all_movies[$j]->question_id.' Value: '.$all_movies[$j]->value.'<br>';
                        $delete = $post2->movie_value_delete($all_movies[$j]->id);
                        echo 'Deleted: '.$all_movies[$j]->id.'<br><br>';
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:03:01.200

与您正在做的事情相比，这样的事情应该非常快。**请**在运行之前进行备份：）

```
DELETE FROM movies_values
WHERE id NOT IN (
    SELECT MIN(id)
    FROM movies_values
    GROUP BY movie_id, question_id, value
) 
```

* * *

Lamefix 无法写入您正在读取的表（凌晨 2 点，让我休息一下！） - 复制`movies_values_test`到，`movies_values_test2`以便我们可以从中选择唯一 ID`_test2`并从中删除任何不匹配的行`_test`。

```
DELETE FROM movies_values_test
WHERE id NOT IN (
    SELECT MIN(id)
    FROM movies_values_test2
    GROUP BY movie_id, question_id, value
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T02:25:57.980

和

```
DELETE mv2
    FROM movies_values mv1
        JOIN movies_values mv2 USING (movie_id, value, question_id)
    WHERE mv1.id < mv2.id 
```

您组合这两个表并获得等效记录的每个组合。然后，您删除每条具有较小“合作伙伴”的记录`id`。

不要忘记`UNIQUE KEY`事后设置一个，以防止这种情况再次发生......

# django-cms - 如何限制对 django-cms、filer、FilerImageField 中特定文件夹的访问？

> ID：15181625
> 
> 赞同：1
> 
> 时间：2013-03-03T01:55:29.987
> 
> 标签：django-cms

```
from filer.fields.image import FilerImageField

class Brand(models.Model):
    """ Brand """
    logo = FilerImageField(verbose_name=_('Logo'), blank=True, null=True) 
```

这个小代码和平存储徽标图像（django-cms，filer）。在管理员中，我可以访问所有文件夹树，但在这种情况下，我只想限制对“logos”文件夹的访问。任何想法如何做到这一点？

# iphone - 捏手势 - PinchOut Xcode iPhone

> ID：15181626
> 
> 赞同：0
> 
> 时间：2013-03-03T01:55:57.083
> 
> 标签：iphone, xcode, ipad, uiview, gesture

我想仅在 UIPinchGesture “检测到捏合”时将我的视图限制为缩放。这是我的代码，它不起作用，因为它不会将 UIPinchGesture 限制为仅捏合而不是捏合，它会通过捏合和捏合检测到。提前致谢！丹尼尔

```
-(void)PinchOutGesture {

UIPinchGestureRecognizer *longPress_gr1 = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(doAction1:)];

//pinch out//
if(longPress_gr1.scale > 1) {

     [View addGestureRecognizer:longPress_gr1];
    //something happens
}

//Pinch in
if(longPress_gr1.scale < 1) {

    View = nil;
    //nothing happens

  }

}

- (void)doAction1:(UIPinchGestureRecognizer *)recognizer {

    View.userInteractionEnabled = NO;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.25];
    [UIView setAnimationDelay:0.0];

    View.frame = CGRectMake(30, 64, 260, 334);
    View.alpha = 0.5;

    [UIView commitAnimations];

} 
```

# python - 如何在 RQ python 中通过 id 获取 Job？

> ID：15181630
> 
> 赞同：18
> 
> 时间：2013-03-03T01:56:34.727
> 
> 标签：python, redis

所以，基本上我想构建一个在heroku上使用RQ的长轮询应用程序。我看过这个问题[Flask: passing around background worker job (rq, redis)](https://stackoverflow.com/questions/12162021/flask-passing-around-background-worker-job-rq-redis)但它没有帮助。

这基本上就是我正在做的。

```
@app.route('/do_something', methods=['POST'])
def get_keywords():
    data_json = json.loads(request.data)
    text = urllib.unquote(data_json["sentence"])

    job = q.enqueue(keyword_extraction.extract, text)
    return job.key

@app.route('/do_something/<job_id>', methods=['GET'])
def get_keywords_results(job_id):
    job = Job().fetch(job_id)

    if(not job.is_finished):
        return "Not yet", 202
    else:
        return str(job.result) 
```

没有什么花哨的，所以当 POST 请求到来时，它会将作业排队并立即将 job_id 返回给用户，然后用户将使用密钥继续轮询结果。`Job().fetch(job_id)`但是，当这条线返回时，我似乎无法让它工作

`NoRedisConnectionException: Could not resolve a Redis connection.`

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-03T13:12:30.180

我已经发现了这一点，以防有人感兴趣。它必须是这个。

```
Job.fetch(job_id, connection=conn) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-02-11T04:39:35.670

`0.13.0`在我运行时发现的RQ 版本中：

```
j = q.enqueue(job_func) 
```

`j.key`将是前面的键`rq:job:`。

因此，在获取我需要使用的作业时，框架中的其他地方：

```
j = q.fetch_job(key[7:]) 
```

`j.result`将在哪里`None`或返回值`job_func`。

不知道是否有更好的方法来处理这个......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-20T15:56:52.010

这是由于现在已修复的回归，有关详细信息，请参阅[https://github.com/nvie/rq/issues/479](https://github.com/nvie/rq/issues/479)。

您需要从 github master 分支安装才能解决此问题，直到将其发布到 PyPI。

# android - 操作栏图标叠加

> ID：15181631
> 
> 赞同：1
> 
> 时间：2013-03-03T01:56:41.773
> 
> 标签：android, android-actionbar, actionbarsherlock, android-viewpager

有没有人见过这个问题？这仅在使用 Gingerbread 设备的模拟器时发生，但是我的应用程序有一个`ViewPager`，当我从初始视图滑动到另一个视图并返回到初始视图时，看起来另一组图标正在覆盖`Actionbar`(使用`ActionbarSherlock`）：

最初的：

![在此处输入图像描述](../Images/12d414172f7baf9082edf608d10d41f7.png)

刷卡后（通知图标变粗）：

![在此处输入图像描述](../Images/3435958a9bf338d4beefd5ab2b566664.png)

这不会发生在仅 Gingerbread 的 ICS+ 设备中。

**浏览器：**

```
public class Main extends SherlockFragmentActivity
{
    private static List<Integer> mIds;
    private static SparseArray<Fragment> mPageReferenceMap = new SparseArray<Fragment>();

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager);
        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mMyFragmentPagerAdapter);

        mViewPager.setOnPageChangeListener(new OnPageChangeListener() {

            @Override
            public void onPageSelected(int position) {
                GetListingFragment().StopAnimation(); //needed to add this because the ActionView was showing on the other views when swiping
            }

            @Override
            public void onPageScrolled(int position, float offset, int offsetPixel) {
            }

            @Override
            public void onPageScrollStateChanged(int state) {

            }
        });

        mIds = new ArrayList<Integer>();

        mIds.add(0);
        mIds.add(1);
        mIds.add(2);
    }

    @Override
    public void onResume()
    { 
        super.onResume();
        ActivityCompat.invalidateOptionsMenu(this);
    }

    private ListingFragment GetKeywordsFragment()
    {       
        ListingFragment lf = (ListingFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentListing);

        if (lf == null)
        {
            final MyFragmentPagerAdapter fpa = (MyFragmentPagerAdapter)mViewPager.getAdapter();
            lf = (ListingFragment)fpa.getFragment(0);
        }

        return lf;
    }

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {
            if (index == 0)
            {
                final ListingFragment lf = ListingFragment.newInstance();
                mPageReferenceMap.put(index, lf);
                return lf;
            }
            else
            {
                final DetailFragment df = DetailFragment.newInstance(mIds.get(index));
                mPageReferenceMap.put(index, df);
                return df;
            }
        }  

        public Fragment getFragment(int key) {
            return mPageReferenceMap.get(key);
        }

        @Override
        public int getCount() {  
             return 3;
        }
   }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:28:04.113

请在ActionBarSherlock Github 上查看此[问题。](https://github.com/JakeWharton/ActionBarSherlock/issues/331)这个问题是已知的，截至目前，它还没有得到修复。

# java - 为什么要指定@Column( nullable = false )？

> ID：15181632
> 
> 赞同：47
> 
> 时间：2013-03-03T01:56:44.190
> 
> 标签：java, jpa, jpa-2.0, nullable

我有一个用`@Entity`.
如果我负责创建`CREATE TABLE`脚本，为什么我应该指定`@Column( nullable = false )`何时可以在数据库中使用`NOT NULL`关键字创建列？是否有任何示例显示在字段中使用此属性的好处？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-03-03T02:56:44.687

更好的错误消息和错误处理，特别是如果您还添加了[JSR303 @NotNull 注释](http://docs.oracle.com/javaee/6/api/javax/validation/constraints/NotNull.html)。

如果您将列创建为`NOT NULL`但不告诉 JPA 它不为空，JPA 将假定空值是可以的。当您尝试使用空值保存对象时，它将继续将其发送到数据库，您将收到数据库级别错误。这增加了数据库中的日志垃圾邮件，并且很难从错误中确定哪些表的哪些列是问题，更不用说将它们映射回它们的 JPA 名称了。

如果您将它们注释为非空，JPA 将在保存之前抛出异常，避免 DB 日志垃圾邮件，通常会给您一个更好的错误。特别是，如果您的 JPA 提供程序支持 JSR303 并且在内部转换`nullable=false`为`@NotNull`或您也已添加`@NotNull`，它将为您提供一个数据结构，您可以检查以确切了解哪些对象的哪些字段因什么原因被拒绝，以及可定制的模板化错误信息。

这就是为什么你应该告诉 JPA`NOT NULL`字段。这样，处理您的代码的其他人更容易理解，而无需阅读 DB 模式。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2015-07-02T08:40:26.853

此外，如果您的列有`nullable = false`注释`@ManyToOne`，Hibernate 会对相关表进行**INNER JOIN查询。**`nullable = true`给出结果**LEFT JOIN**。

那是另一个区别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T02:03:59.223

在您的情况下，可能没有实际好处，但是：

*   如果您使用 jpa 提供程序来生成架构（通过 maven 或通过像 hbm2ddl.auto 这样的自动生成），那么这很重要
*   如果您将 jpa 提供程序配置为针对实体模型验证架构，那么您需要它们同步。

# xcode - 使用 Apple 推荐的 NSURL 委托方法

> ID：15181633
> 
> 赞同：0
> 
> 时间：2013-03-03T01:56:46.707
> 
> 标签：xcode, nsurlconnection

[我最初的问题的答案](https://stackoverflow.com/questions/15168971/)使用以下代码。

```
NSURLRequest *theRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:self.urlNameInput.text] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
[NSURLConnection sendAsynchronousRequest:theRequest queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *connection, NSData *data, NSError *error){...}]; 
```

我的原始代码不起作用，但如下所示。我的代码使用了 Apple Docs 中建议的一组委托方法（connection:didReceiveResponse:、connection:didReceiveData:、connection:didFailWithError: 和 connectionDidFinishLoading:)。

```
NSURLRequest *theRequest=[NSURLRequest requestWithURL:[NSURL URLWithString:self.urlNameInput.text] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:theRequest delegate:self];
         if (theConnection) {
         receivedData = [NSMutableData data] ;
         } else {
         // Inform the user that the connection failed.
         NSLog(@"Their is an error with that URL.");
         }; 
```

委托方法是否与建议的代码兼容，如果是，我如何将它们集成到建议的代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T03:58:23.243

您要么使用其中一个。

您问题中的第一段代码不使用任何委托方法。相反，您在完成处理程序中执行所有操作。你要么得到数据，要么得到一个错误。您不需要处理附加数据或处理重定向。

如果您需要更多控制，那么您必须使用旧表单以及正确的委托方法集。

完成处理程序版本要简单得多，除非您需要委托版本的灵活性，否则应该使用它。

# asp.net - 验证调用我的 Asp.net WebApi 的客户端

> ID：15181642
> 
> 赞同：2
> 
> 时间：2013-03-03T01:58:18.463
> 
> 标签：asp.net, asp.net-web-api

我有一个使用 jquery 从 Web 表单应用程序调用的 asp.net Web api 服务。我正在使用基于表单的身份验证和 AuthorizeAttribute 仅允许某些角色访问数据。

我的 web api 上有一个方法 .. Get 需要一个 id，我不喜欢经过身份验证的用户可以计算出 URL 并浏览数据库中的数据的想法。是否可以验证调用 web api 的客户端？因此，如果我从我的 jquery 代码调用 web api，它可以工作，但是如果有人在浏览器中输入 URL，它会拒绝访问？

感谢您的帮助.. web api 太棒了！我只需要驯服它的观众。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T13:33:53.273

您始终可以使用 jQuery 用于调用 Web API 方法的 api 密钥，并使用 MessageHandler 来验证该密钥（如这里讨论的那样，[http://www.strathweb.com/2012/05/implementing-message- handlers-to-track-your-asp-net-web-api-usage/](http://www.strathweb.com/2012/05/implementing-message-handlers-to-track-your-asp-net-web-api-usage/)）。但是，我认为 Web API 方法还应该在返回数据之前验证经过身份验证的用户是否可以访问给定的 ID。

问候，巴勃罗。

# c++ - 为什么这部分代码被忽略了？

> ID：15181644
> 
> 赞同：0
> 
> 时间：2013-03-03T01:58:31.460
> 
> 标签：c++, templates

在下面的代码中，`set_black_hole()`从不调用。为什么？

`set_black_hole()`我在和中添加了小字语句`set_data()`。`Set_data()`按预期被重复调用，但从`set_black_hole()`未被调用。当我在调用 for 之前运行调试器并设置断点时`set_black_hole()`，它只是跳到 if() 语句之后。

想法？

这是偶然的模板特定问题吗？

```
/******************************************************************
*   build_list
*     add new items to the list until input is exhausted
*/

template <typename T>
void List<T>::build_list(ifstream &fin)
{
   T *pT;
   bool readSuccess;    // successful read of object data
   bool storeSuccess;   // successful node addition

   pT = new T;

   readSuccess = pT->set_black_hole(fin); // fill the T object
   if (readSuccess) {
       storeSuccess = add_node(pT);
   }

   while (true)
   {
      storeSuccess = false;
      readSuccess = pT->set_data(fin); // fill the T object
      if (fin.eof())
      {
         delete pT;
         break;
      }

      // insert object data into the list
      if (readSuccess)
         storeSuccess = add_node(pT);
      else   // something bad happened during node setup
      {
         delete pT;
         fatal_err(BAD_SET_DATA);
      }
      if (!storeSuccess)   // something bad happened during store
         fatal_err(BAD_ADD_NODE);
   }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:09:32.680

您是否尝试过重新编译/重建项目？我之前在 Visual Studio 中遇到过这个问题，当时我在调试时项目引用了旧版本，因为在 Visual Studio 中意外关闭了“运行前构建”选项。一个很好的迹象是，如果您在调用的行上设置了一个断点`set_black_hole()`，并且当您尝试调试时断点变得透明。

# wpf - WPF DataGrid 给出不一致的垂直对齐方式

> ID：15181647
> 
> 赞同：0
> 
> 时间：2013-03-03T01:58:55.827
> 
> 标签：wpf, wpfdatagrid

我有以下 UserControl，里面有两个 DataGrid：

```
<UserControl x:Class="emb.OrdersControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="200*" />
            <RowDefinition Height="100*" />
        </Grid.RowDefinitions>
        <DataGrid AutoGenerateColumns="True" Name="dgSell" IsReadOnly="True" CanUserResizeRows="False"></DataGrid>
        <DataGrid AutoGenerateColumns="True" Grid.Row="1" Name="dgBuy" IsReadOnly="True" CanUserResizeRows="False" />
    </Grid>
</UserControl> 
```

我将它们连接到两个数据表：

```
class Order {
    public string station;
    public float price;
}
    ...
foreach (Order order in parse_orders(xml, "sell_orders"))
    sell_orders.Rows.Add(new object[] {order.station, order.price}); 
```

这是结果：![截屏](../Images/88093e2db270dd66c68277e56ef97ad3.png)

设置一个固定的高度只会切断 Station 文本的底部。设置对齐没有任何作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:15:47.113

哈。发布后不久就意识到了这一点。

我放入的文本前后有很多空格和换行符（来自解析 XML）。

# python - Pocket API 访问令牌请求

> ID：15181648
> 
> 赞同：5
> 
> 时间：2013-03-03T01:59:08.167
> 
> 标签：python, api, oauth, token

[我正在尝试从Pockets API](http://getpocket.com/developer/docs/authentication)获取访问令牌

我能够成功获取请求令牌，但是当我尝试使用它来获取访问令牌时，它会失败并出现 400 错误请求错误。

这是代码：

```
def getAccessToken(request_code):
    headers = {'Content-Type' : 'application/json; charset=UTF-8','X-Accept': 'application/json'}
    request_data = json.dumps({"consumer_key":["12092-2970cc0e27ce9a25cb39f1dd"],"code":["af0f6c9b-815b-cd1d-9864-b6d375"]})
    url = "https://getpocket.com/v3/oauth/authorize"

    response_data = makeRequest(headers,request_data,url)
    access_code, username = response_data['access_token'],response_data['username']

    return access_code,username

def makeRequest(request_headers,request_data,request_url):
    request = urllib2.Request(request_url,request_data,request_headers)
    response = urllib2.urlopen(request)
    data = json.load(response)

    return data 
```

我似乎无法弄清楚。我很确定请求令牌是有效的（有什么方法可以确认吗？），我通过重定向到 Pockets 授权页面，单击授权，然后我被重定向到 redirect_uri。在获取redirect_uri 时，我调用getAccessToken()

如果我需要提供任何额外信息，请告诉我。谢谢你的帮助。

更新：

进一步研究这个问题，Pocket 有一个 HTTPError 描述列表。我扔的是 138 - Missing consumer key。

现在这更没有意义了，因为我使用完全相同的消费者密钥来获取请求令牌。

响应标头：

> ```
> Cache-Control: private
> Content-Type: text/html; charset=UTF-8
> Date: Sun, 03 Mar 2013 03:54:01 GMT
> P3P: policyref="/w3c/p3p.xml", CP="ALL CURa ADMa DEVa OUR IND UNI COM NAV INT STA PRE"
> Server: Apache/2.2.23 (Amazon)
> Status: 400 Bad Request
> X-Error: Missing consumer key.
> X-Error-Code: 138 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T04:11:28.310

从中删除`[`和。您正在传递一个列表，您可能应该在其中传递一个字符串。那*应该*解决它。`]``{"consumer_key":["12092-2970cc0e27ce9a25cb39f1dd"],`

# canvas - 调整窗口大小后如何（有效地）重新定位 KineticJS 形状？

> ID：15181651
> 
> 赞同：0
> 
> 时间：2013-03-03T02:00:00.093
> 
> 标签：canvas, kineticjs

我目前正在将 KineticJS 用于窗口填充画布应用程序。画布包含几个主要相对于屏幕中心定位的形状，尽管还会出现几个其他形状，它们将位于屏幕边缘。

在第一次显示页面时计算所有这些坐标不是问题，但我还没有找到在调整窗口大小之后/时处理形状坐标的方法。

通过 jQuery，在调整窗口大小时会调整舞台及其图层的大小，但由于这不会改变形状的坐标，因此以前居中的项目不再居中。

我真的需要遍历每一个形状并重新计算它们的坐标吗？并非微不足道，因为它们是用不同的公式计算的。

旁注，我通过直接访问 Canvas（= w/o KineticJS）实现了相同的应用程序，并且仅通过重新渲染整个画布来处理调整大小；）由于渲染方法包括坐标计算，所以一切总是在正确的位置.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:52:26.843

我通过为所有图层定义偏移量并在窗口调整大小发生后重新计算这些偏移量来解决我的问题。尽管并不完美，但计算 8 个值 (4 * x+y) 远比计算数百个值好得多。

如果有人知道更好的解决方案，我仍然会感兴趣。;)

# android - 覆盖 Android 中的辅助功能

> ID：15181652
> 
> 赞同：1
> 
> 时间：2013-03-03T02:00:02.053
> 
> 标签：android, accessibility

我为视障人士开发了一个应用程序。我为我的应用创建了简单的手势，例如触摸、双击以及使用 tts 来阅读文本。我有一个奇怪的问题：

当我启用对讲等辅助功能时。我的应用程序手势被禁用，我无法使用任何应用程序内手势。

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:10:09.187

您的目标是哪个版本的 Android？

对于 Android 4.1+，您可能需要查看[http://support.google.com/nexus/bin/answer.py?hl=en&answer=2692469 。](http://support.google.com/nexus/bin/answer.py?hl=en&answer=2692469)

基本上，Talkback 将取代许多手势，但在某些版本的 Android 上，您可以通过转到

```
Settings > Accessibility > TalkBack > Settings > Manage shortcut gestures. 
```

因此，只接受已经支持的值而不试图绕过它是有意义的。

此外，您也没有提及用户是否在使用 Explore Touch ( [http://support.google.com/nexus/bin/answer.py?hl=en&answer=2692788](http://support.google.com/nexus/bin/answer.py?hl=en&answer=2692788) )

如果你想抓住这些，看来你可以`onHoverEvent`根据这个问题使用：

[启用触控探索后，如何保持单指针手势？](https://stackoverflow.com/questions/14328313/how-can-i-maintain-a-one-pointer-gesture-when-explore-by-touch-is-enabled)

**更新：**

您可以查看有关如何判断 Talkback 是否处于活动状态的问题：

[如何检查 JellyBean 中的 Talkback 是否处于活动状态](https://stackoverflow.com/questions/11831666/how-to-check-if-talkback-is-active-in-jellybean)

如果它打开，告诉用户他们可能需要关闭它才能让您的程序正常工作。

# css - 是否有可能让 em 单位在具有不同字体大小的元素之间表现一致

> ID：15181656
> 
> 赞同：1
> 
> 时间：2013-03-03T02:00:28.370
> 
> 标签：css, responsive-design

我经常发现自己试图对齐两条不同大小的文本行。基本上，即使文本大小不同，也试图使行高保持不变。`em`当使用s 作为单位时，这可能会很棘手，`line-height`因为它引用了`em`该特定元素的大小。调整大小很容易，但`line-height`在`px`尝试响应式设计时会引入其他问题。

在以下示例中，假设`BIG TEXT`左侧的 是 an`<h1>`或设置为具有较大相对值的值，`font-size`例如 200%，而 the`small text`是较小的值，例如 with `font-size:150%`。

**坏的：**

```
______________________       _______________________

                             small text with 2em lin
BIG TEXT WITH 2em LINE       _______________________
______________________ 
```

（这不起作用，因为 2 x 200% ems 与 2 x 150% ems 不同）

**好**（但没有反应）

```
______________________       _______________________

BIG TEXT WITH 40px LINE      small text with 40px line 
______________________       _______________________ 
```

这是有效的，因为 px 单位不关心文本的大小，但是如果您想通过媒体查询在较小的屏幕上缩小字体大小，这也会带来问题。然后，您还必须管理行高，因为无论文本是否改变大小，前导都将被固定。`px`此外，在`em`单位之间投入的大型项目也会让人感到困惑。

有没有更好的方法来解决这个不需要固定`px`单位的问题？

PS：我将问题表述为`em`但同样的问题`%`也发生了，因为它引用了当前元素的大小而不是父元素的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:40:02.207

CSS3 带来了一个看起来正是你想要的新特性。一个名为`rem`“root em”的新单元，它代表`em`文档的根级别，因此它在所有元素中都是相同的。

[JSFiddle](http://jsfiddle.net/8kyvE/)

HTML

```
<div class="eg large">Some large text</div>
<div class="eg small">Some large text</div> 
```

CSS

```
.eg {
    float:left;
}

.large {
    font-size:3em;
    line-height:4rem;
}

.small {
    font-size:1.5em;
    line-height:4rem;
} 
```

[CSS-Tricks](http://css-tricks.com/snippets/css/less-mixin-for-rem-font-sizing/)提出了一种向后兼容的策略（IE8 及以下），基本上只是`px`在规则之外提供了一个近似值`rem`规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T02:37:10.450

似乎您可以定义行高。

```
.ems-text {
  font-size: 2em;
  line-height: 40px;
}

.px-text {
  font-size: 20px;
  line-height: 40px;
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-03T09:19:06.840

不能在 CSS 中引用父级的字体大小（设置时除外`font-size`）。但是，在您控制所有涉及的样式表的范围内，您可以间接处理这种情况。

例如，在“大”和“小”元素的父元素上设置`line-height`单位`em`（例如，`line-height: 2.4em`），并且根本不要在这些元素上设置它，以便它们将继承计算值。例子：

```
<style>
tr { line-height: 2.4em }
h1 { font-size: 200%; margin: 0}
.small { font-size: 150% }
h1, .small { border: solid 1px }
</style>
<table >
<tr><td><h1>BIG TEXT WITH 2em LINE</h1>
<td><div class=small>small text with 2em lin</div>
</table> 
```

的值`2.4em`意味着对于`h1`元素，行高将等于其自身字体大小的 1.2 倍。

请注意，文本的基线不会对齐。这是字体大小不同但行高相等的一个相当直接的结果（这是问题所要求的）。

# python - 如何在不实例化类的情况下从另一个文件中读取实例变量？

> ID：15181658
> 
> 赞同：1
> 
> 时间：2013-03-03T02:00:51.903
> 
> 标签：python

我对 Python 比较陌生，在导入变量以在另一个类中使用它时遇到了一些麻烦。我确实查看了有关该主题的其他几个问题并试图使其发挥作用，但似乎我早期设置该程序的方式可能是问题所在。我会简化正在发生的事情，所以要阅读的内容更少......

服务器.py：

```
import Game
class Server():
    def __init__(self):
        # Server connection details here
        self.test = 5
        self.game = Game()

    def serve(self):
        # Client processing, etc.
        self.game.game_loop()

if __name__ == "__main__":
    server = Server()
    server.serve() 
```

游戏.py：

```
class Game():
    def __init__(self):
        # Other variables...

    def game_loop(self):
        # To reference server's instance variables
        from Server import server

        print test 
```

在此示例中，我尝试从 Server 的服务器实例中引用变量“test”。值得注意的是，如果我将两个类放在同一个文件中，然后删除它末尾的 if 语句，这确实有效……但我宁愿没有一个文件那么长:)

由于它们位于单独的文件中，因此如果不删除 Server.py 中的 if 语句，我将无法从“服务器”获取实例变量。当我删除它时，由于我正在做的其他事情，我得到了套接字错误......我需要让它只有一个服务器对象（并且它的类只被“调用”一次），但它'能够在每次运行时引用这些实例变量而不将它们传递给我的 Game 类真的很方便......

部分原因肯定是我的错，因为我设置了错误的程序......但我太过分了，无法重新开始。有什么方法可以进行这种设置并读取这些变量吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:07:00.653

首先，`test`作为*实例*变量存在，因此您需要将一个*实例*传递`Server`给您的游戏循环：

```
class Server:
  def serve(self):
    # Client processing, etc.
    self.game.game_loop(self) 
```

接下来，您可以通过查看传入`test`的`game_loop`实例来找到：

```
class Game:
  def game_loop(self, server):
    print server.test 
```

# ios - 如何从操作表返回上一个视图

> ID：15181665
> 
> 赞同：0
> 
> 时间：2013-03-03T02:02:19.917
> 
> 标签：ios, objective-c, ios5

我在视图控制器上设置了两个后退按钮，通过从操作按钮拖动退出视图来退出视图控制器。

我现在正在尝试以编程方式进行。我有

```
- (IBAction)goBack:(UIButton *)sender {
    NSLog(@"go back");
    //[self.navigationController popViewControllerAnimated:YES];

    [self dismissViewControllerAnimated:TRUE completion:^{
        NSLog(@"Test");

    }];
    NSLog(@"are we back");
} 
```

这个：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

似乎什么也没做。但目前的解雇方法似乎有效。

问题出在我的主要观点中

```
-(IBAction) returnToMainView1:(UIStoryboardSegue *) segue
{
    NSLog(@"return to main view");
    self._mytopconsoleview=nil;
    self._mybottomconsoleview=nil;
    self.viewB=nil;
    [self animateRotation:[[UIApplication sharedApplication] statusBarOrientation]];
} 
```

这不再被称为。我如何关闭当前视图控制器并在主视图上调用一个方法，就像我拥有的​​那样。

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:05:30.550

只是重申我在评论中所说的话——这显然把你推上了正确的道路:)

基本上，您希望将`returnToMainView1`方法中的逻辑移动到 viewDidAppear。每当视图出现时（如其名称所示），例如在关闭模式视图控制器之后，都会调用此方法。

关于导航视图方案，只需根据您的呈现方式关闭即可。如果您使用模态视图控制器，请使用，`dismissViewControllerAnimated:completion`或者如果您使用导航控制器，请使用`popViewControllerAnimated:`.

# audio - getElementsByClassName 不起作用，但 getElementById 是

> ID：15181670
> 
> 赞同：0
> 
> 时间：2013-03-03T02:02:59.447
> 
> 标签：audio, getelementbyid, getelementsbyclassname

以下代码有效（弹出警报）：

```
var sound = document.getElementById("music");
    sound.addEventListener("play", function () {
    alert("playing");
});
....
....
<audio controls id="music">
    <source src="http://upload.wikimedia.org/wikipedia/commons/c/c8/Example.ogg"/>
</audio> 
```

但是为什么这不起作用？

```
var sound = document.getElementsByClassName("music");
    sound.addEventListener("play", function () {
    alert("playing");
});
....
....
<audio controls class="music">
    <source src="http://upload.wikimedia.org/wikipedia/commons/c/c8/Example.ogg"/>
</audio> 
```

如果 getElementsByClassName 返回与 getElementById 不同的内容，这也不起作用：

```
('.sound').addEventListener("play", function () {
    alert("playing");
});
....
....
<audio controls class="music">
    <source src="http://upload.wikimedia.org/wikipedia/commons/c/c8/Example.ogg"/>
</audio> 
```

我改变的只是一个 ID，而不是一个 ID，我给它一个类（因为我有这个音频播放器的多个实例），并使用 getElementsByClassName 而不是 getElementById。我认为 getElementsByClassName 现在与所有浏览器兼容？我正在使用最新的 Firefox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:11:50.607

我很确定`document.getElementsByClassName()`会返回一组元素，即使页面上只有一个具有该类名的元素。因此，您实际上并没有将事件侦听器应用于音频元素，而是元素数组。

如果类声音总是只有一个元素，请尝试`var sound = document.getElementsByClassName("music")[0];`.

# node.js - 如何在域错误处理程序中发送响应

> ID：15181672
> 
> 赞同：4
> 
> 时间：2013-03-03T02:03:11.383
> 
> 标签：node.js, http

我有类似的东西：

```
var domain = require ("domain");
var http = require ("http");

var d = domain.create ();
d.on ("error", function (error){
    console.error (error);
    //res.writeHead (500)
    //res.end ()
});
d.run (function (){
    http.createServer (function (req, res){
        null.error
    }).listen (1337, "localhost");
}); 
```

我所有的服务器都在域内运行。如果在请求期间发生错误，我想向用户发送 500 错误，但在错误处理程序内部我无法访问响应对象。

* * *

正如文档所说，我的第一次尝试是为每个请求使用一个显式域：

```
var d = domain.create ();
d.on ("error", function (error){
    //res.writeHead (500);
    //res.end ()
    console.error (error);
});
d.run (function (){
    http.createServer (function (req, res){
        var dreq = domain.create ();
        dreq.add (req)
        dreq.add (res)
        dreq.on ("error", function (error){
            res.writeHead (500);
            res.end ()
            console.error (error);
        });
        null.error
    }).listen (1337, "localhost");
}); 
```

`dreq`错误处理程序永远不会被调用，因为并且`req`永远`res`不会发出，错误发生在执行时，它是一个 TypeError。

* * *

我的第二次尝试是`res`使用闭包保存对对象的引用，例如事件发射器：

```
var domain = require ("domain");
var http = require ("http");
var events = require ("events");

var emitter = new events.EventEmitter ();

var d = domain.create ();
d.on ("error", function (error){
    emitter.emit ("error", error);
});
d.run (function (){
    http.createServer (function (req, res){
        emitter.once ("error", function (error){
            res.writeHead (500);
            res.end ();
            console.error (error);
        });
        null.error
    }).listen (1337, "localhost");
}); 
```

这行得通，错误在错误处理程序中被捕获然后发出，因此我可以使用响应对象向用户发送消息。如果您对 node.js 基础知识知之甚少，您会发现这个解决方法完全是错误的。如果事件循环中有 5 个用户请求并且其中 1 个执行了引发错误的任务，则发射器将执行所有错误处理程序，当只有 1 个用户应该收到 500 时，5 个用户将收到 500 错误通知错误。

* * *

我最后一次尝试是为每个请求创建子上下文。文档对这种模式只字未提。这让我有点困惑：

> 为了防止过多的内存使用，域对象本身不会被隐式添加为活动域的子级。如果是这样，那么阻止请求和响应对象被正确地垃圾收集就太容易了。
> 
> 如果要将域对象嵌套为父域的子级，则必须显式添加它们，然后再将它们处理掉。

```
var domain = require ("domain");
var http = require ("http");

var d = domain.create ();
d.on ("error", function (error){
    console.error (error);
});
d.run (function (){
    http.createServer (function (req, res){
        var dreq = domain.create ();
        dreq.on ("error", function (error){
            res.writeHead (500);
            res.end ()
            console.error (error);
            dreq.dispose ();
        });
        dreq.run (function (){
            null.error
            //...
            //dreq.dispose ();
        });
    }).listen (1337, "localhost");
}); 
```

我是在引入内存泄漏吗？

* * *

简单的解决方案是为每个请求分配一个唯一的 ID，并将它们保存在一个对象或数组中，当发射器发出时，找到必须在给定唯一 ID 的情况下执行的处理程序。完全不能接受。

* * *

如果我无法保存对`res`对象的引用，如何在域错误处理程序中向用户发送错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:21:41.313

这个解决方案是赢家：

```
var domain = require ("domain");
var http = require ("http");

var d = domain.create ();
d.on ("error", function (error){
    console.error (error);
});
d.run (function (){
    http.createServer (function (req, res){
        var dreq = domain.create ();
        dreq.add (req);
        dreq.add (res);
        dreq.on ("error", function (error){
            res.on ("close", function (){
                dreq.exit ();
            });
            res.writeHead (500);
            res.end ()
            console.error (error);
            dreq.exit();
        });
        dreq.run (function (){
            null.error
        });
    }).listen (1337, "localhost");
}); 
```

[https://github.com/joyent/node/issues/4905](https://github.com/joyent/node/issues/4905)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T07:41:14.323

你最后发布的解决方案实际上是你应该做的。这与文档建议反对的嵌套类型不同。您所做的只是将潜在的（或者，在这种情况下，肯定是）错误代码包装在域中，以便在发生错误时由域处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T07:48:34.983

这个解决方案对我来说很好：

```
var http = require('http');
var domain = require('domain');

var server = http.createServer (function (req, res) {
    var reqDomain = domain.create();
    reqDomain.on('error', function (error) {
        res.writeHead(500);
        res.end('error 500');
        console.error(error);
    });
    res.on('close', function () {
        reqDomain.dispose();
    });
    reqDomain.run(function () {
        // Request handler code here
        null.error
    });
}).listen(3000);

server.on('error', function (error) {
    console.error('Server error: ' + error);
}); 
```

# windows-phone-8 - Windws Phone 8 动态创建东西

> ID：15181673
> 
> 赞同：1
> 
> 时间：2013-03-03T02:03:24.207
> 
> 标签：windows-phone-8

我想为 Windows Phone 8 创建一个时间表应用程序。我有一个问题。

有一个表单，用户可以在其中添加主题或任务：

[截图 http://img96.imageshack.us/img96/6932/unbenannt1ku.png](http://img96.imageshack.us/img96/6932/unbenannt1ku.png)

如果用户单击“hinzufügen”= 添加，我想创建如下内容：

[截图 http://img23.imageshack.us/img23/7262/unbenanntsjcd.png](http://img23.imageshack.us/img23/7262/unbenanntsjcd.png)

编辑：

我想在应用程序运行时创建这个绿色框和它前面的时间，如果我点击按钮“hinzufügen”=添加。

用户输入课程的工作日主题、房间、开始时间和结束时间。

有了这个数据，我想创建这个绿盒子，里面有 WeekDay、Subject、Room + 前面课程的开始时间和结束时间。

我希望你能理解我对我糟糕的英语感到抱歉

我真的不知道该怎么做，我用 Wrappanel 和文本框尝试过，但它没有用。

Ps：这是我的第一个 Windows Phone 8 应用程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T07:26:02.463

据我了解，您需要的是在单击按钮时从一个枢轴项目切换到另一个枢轴项目，这可以通过以下方式完成：

假设您的枢轴名称是：myPivot，而您的目标枢轴项目是：第二

您可以使用此方法附加此处理程序：

```
 private void toNextPivot_Click(object sender, RoutedEventArgs e)
    {
        myPivot.SelectedItem = second;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T00:54:39.213

我想我让它工作了，但现在我面临另一个问题：

首先我创建一个画布：

```
private void AddItem()
    {
        Canvas myCanvas = new Canvas();
        Canvas myCanvas2 = new Canvas();
        myCanvas2.Height = 128;
        myCanvas2.Width = 104;
        myCanvas.Background = new SolidColorBrush(Colors.Blue);
        myCanvas.Height = 200;
        myCanvas.Width = 350;
        myCanvas2.Margin = new System.Windows.Thickness(5,10,0,0);
        myCanvas.Margin = new System.Windows.Thickness(66, 10, 0, 0); 
```

然后我创建三个文本块：

首先：将 TextBlock 添加到第一个 Canvas：

```
TextBlock TextBlock1= new TextBlock();
    TextBlock1.FontSize = 48;
    TextBlock1.Text = Fach.Text;
    Canvas.SetTop(TextBlock1, 10);
    Canvas.SetLeft(TextBlock1, 29);
    myCanvas.Children.Add(TextBlock1); 
```

第二：将第二个 TextBlock 添加到第一个 Canvas：

```
TextBlock TextBlock2= new TextBlock();
    TextBlock2.FontSize = 24;
    TextBlock2.Text = Raum.Text;
    Canvas.SetTop(TextBlock2, 79);
    Canvas.SetLeft(TextBlock2, 31);
    myCanvas.Children.Add(TextBlock2); 
```

第三：将第二个 TextBlock 添加到第二个 Canvas：

```
TextBlock TextBlock3 = new TextBlock();
    TextBlock3.FontSize = 20;
    TextBlock3.Text = Zeit;
    Canvas.SetTop(TextBlock3, 36);
    Canvas.SetLeft(TextBlock3, 10);
    myCanvas2.Children.Add(TextBlock3); 
```

将 myCanvas 和 myCanvas2 添加到 wrappanel：

```
wrapPanel.Children.Add(myCanvas);
    wrapPanel.Children.Add(myCanvas2);
    }
    }; 
```

第一个 Canvas(myCanvas) 出现（框），但第二个 Canvas(myCanvas2) 没有出现（时间）。有人知道为什么吗？因为瓦帕内尔？

# ruby - nokogiri/open-uri 如何解析多个网址

> ID：15181674
> 
> 赞同：-2
> 
> 时间：2013-03-03T02:03:36.110
> 
> 标签：ruby, uri, nokogiri

我正在尝试从一个看起来像这样的网站获取数据... [http://www.site.com/thing/?word=(A](http://www.site.com/thing/?word=(A) word) 正如任何回答这个问题的人都知道的那样，要打开这个，你需要输入类似这样的内容... doc=Nokogiri::HTML (open('link to web adress') 我有来自同一个站点的多个“区域”，唯一改变的是 = 符号后面的单词。有没有我可以编译一个单词列表并制作它，这样我就不必写出一堆 doc=Nokogiri::HTML(open(link) 东西，我已经尝试了一些东西，但我是只是没有赶上。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:20:03.480

如果我理解正确，您似乎想做这样的事情：

```
words = ['apple', 'bannana', 'cucumber']

words.each do |word|
 address = "http://www.site.com/thing/?word=" + word
 doc=Nokogiri::HTML (open(address))
 // do more stuff with doc
end 
```

# c# - 如何让一定数量的线程一直运行

> ID：15181675
> 
> 赞同：7
> 
> 时间：2013-03-03T02:03:39.517
> 
> 标签：c#, wpf, multithreading, threadpool, multitasking

好的，这是我的问题。我想启动线程直到某个数量。假设是 100。所以它将开始启动线程并连续检查正在运行的线程数。当达到最大数量时，它将停止启动新线程。但是如果有适当的检查间隔或完成的线程将发出信号，它将启动新线程。

通过这种方式，我将始终拥有一定数量的运行线程。

我通过使用睡眠和永久时间来解决这个问题。所以我不断检查给定时间间隔内的总运行线程数，如果线程完成，则处理它并启动一个新线程。

但是我的解决方案并不是正确的方法。我想如果完成的线程会发出信号，然后如果我们低于最大线程数阈值，检查器会启动一个新线程会更好。

我看到了许多线程池示例，但其中大多数不包含任何具有最大运行线程数的队列池。我的意思是，他们只是继续启动线程，直到完成。但是可以说我有 500k 的网址可以收获。我不能只在带有线程池的 for 循环中启动所有这些。

平台是 c# 4.5 WPF 应用程序

下面是我的解决方案。其实我正在寻找一个更好的。不改进这一点。

```
private void Button_Click_4(object sender, RoutedEventArgs e)
{
    Task.Factory.StartNew(() =>
    {
        startCrawler();
    });
}

void startCrawler()
{
    int irMaximumThreadcount = 100;
    List<Task> lstStartedThreads = new List<Task>();
    while (true)
    {
        for (int i = 0; i < lstStartedThreads.Count; i++)
        {
            if (lstStartedThreads[i].IsCompleted == true)
            {
                lstStartedThreads[i].Dispose();
                lstStartedThreads.RemoveAt(i);
            }
        }

        if (lstStartedThreads.Count < irMaximumThreadcount)
        {
            var vrTask = Task.Factory.StartNew(() =>
            {
                func_myTask();
            });
            lstStartedThreads.Add(vrTask);
        }

        System.Threading.Thread.Sleep(50);
    }
}

void func_myTask()
{

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T02:19:57.797

我个人会为此使用[PLINQ](http://msdn.microsoft.com/en-us/library/dd460688.aspx)，特别是[WithDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/dd383719.aspx)方法，它将并发执行的数量限制为传入的值。

```
private IEnumerable<Action> InfiniteFunctions()
{
    while(true)
    {
        yield return func_myTask;
    }
}

private void Button_Click_4(object sender, RoutedEventArgs e)
{
    int irMaximumThreadcount = 100;
    InfiniteFunctions()
        .AsParallel()
        .WithDegreeOfParallelism(irMaximumThreadcount)
        .ForAll(f => f());
} 
```

编辑：实际上阅读文档，似乎 irMaximumThreadCount 最多只能为 64，因此请注意这一点。

编辑 2：好的，看起来更好，它似乎`Parallel.ForEach`需要一个`ParallelOptions`参数，其中包含一个`MaxDegreeOfParallelism`不受限制的属性 -[检查出来](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)。所以你的代码可能是这样的：

```
private void CrawlWebsite(string url)
{
    //Implementation here
}

private void Button_Click_4(object sender, RoutedEventArgs e)
{
    var options = new ParallelOptions() 
    { 
        MaxDegreeOfParallelism = 2000 
    };

    Parallel.ForEach(massiveListOfUrls, options, CrawlWebsite);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T03:14:51.647

您正在将任务与线程混合在一起。任务不是线程。[不能保证每个任务都有自己的线程](https://stackoverflow.com/questions/13127947/does-creating-multiple-tasks-create-the-same-number-of-threads)。

实际上 TPL（[任务并行库](http://msdn.microsoft.com/library/dd537609.aspx)）是某种队列。这意味着您可以为您拥有的每个`Func`或`Action`对象创建和启动任务。[没有简单的方法来控制](http://msdn.microsoft.com/library/dd997402.aspx)实际创建的线程数。

但是，您可以以很少的开销创建许多任务，因为 TPL 会将它们排入队列并应用进一步的逻辑来平衡[线程池](http://msdn.microsoft.com/library/system.threading.threadpool.aspx)线程上的工作。

如果某些任务需要一个接一个地执行，您可以使用[`Task.ContinueWith`](http://msdn.microsoft.com/library/dd235663.aspx)它们来排队。也可以使用[`Task.Factory.ContinueWhenAny`](http://msdn.microsoft.com/library/system.threading.tasks.taskfactory.continuewhenany.aspx)或开始新任务[`Task.Factory.ContinueWhenAll`](http://msdn.microsoft.com/library/system.threading.tasks.taskfactory.continuewhenall.aspx)。

这也是如何控制要创建的并行任务数量的线索：只需创建所需数量的任务并使用`ContinueWhenAny`. 每次任务结束时，下一个任务就会开始。

同样：TPL 将平衡线程池中线程之间的工作。无论如何，您需要考虑的是其他资源的使用，例如磁盘 I/O 或 Internet 连接。有很多任务同时尝试使用相同的资源会大大减慢你的程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T03:09:28.097

.NET 4.0 引入了几个具有内置并发管理的集合，它们应该非常适合这种情况。阻塞收集将比在 while 循环中休眠更有效。然后，您只需生成从阻塞队列中读取的 x 个线程。

```
BlockingCollection<string> queue = new BlockingCollection<string>(listOfUrls);

for (int x=0; x < MaxThreads; x++)
{
    Task.Factory.StartNew(() => 
    {
        while (true)
        {
            string url = queue.Take(); // blocks until url is available
            // process url;
        }
    }, TaskCreationOptions.LongRunning);
} 
```

您将任务标记为长时间运行，因此它将创建自己的线程而不是使用线程池。如果您需要先进先出，您可以将 a 传递`ConcurrentQueue<T>`给阻塞集合构造函数。[http://msdn.microsoft.com/en-us/library/dd287085.aspx](http://msdn.microsoft.com/en-us/library/dd287085.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T02:20:29.823

不是一个确切的答案，但我认为这可能会引导您朝着正确的方向前进。

首先，看一下[Thread.Join](http://msdn.microsoft.com/en-us/library/95hbf2ta.aspx)，尤其是本页底部给出的简单示例。这种方法优于 Thread.Sleep() 并且更适合您的目的。我正在考虑 * *Join* *ing the "manager" thread 而不是 * *Sleep* *ing。

第二个可能适合也可能不适合您的目的的选项是新`Tasks`库。由于您使用的是最新版本的框架，因此此选项可用，但我猜您无法控制 Tasks 库创建的实际线程数。它会根据底层调度程序自动选择该值。但是，有一个名为[ParallelOptions.MaxDegreeOfParallelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)的选项听起来很有趣。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-15T09:40:04.273

您可以自己管理任务/线程池并等待任何线程完成并立即启动一个新线程。

```
MAX_THREAD_ALLOWED = 100;
List<Task> tasks = new List<Task>();
for (int i = 0; i < 1000; i++)
{
    tasks.Add(Task.Run(() => { Foo(i); }));
    if (i == MAX_THREAD_ALLOWED)
    {
        Task.WaitAny(tasks.ToArray());
        MAX_THREAD_ALLOWED++;
    }
} 
```

# amazon-web-services - 我可以在 Userdata 脚本中访问 c fn 输入参数变量吗？

> ID：15181676
> 
> 赞同：0
> 
> 时间：2013-03-03T02:03:45.570
> 
> 标签：amazon-web-services, amazon-ec2, amazon-cloudfront

这就是我想要做的。我的 cfn 模板将用于启动不同类型的 EC2 实例：微型、大型等。

但是根据该实例类型的核心数量，我想在 userdata 脚本部分做一些不同的事情。

我愿意：

1.  以编程方式找出模板内的核心数量或
2.  将核心数作为输入参数传递给模板。

话虽如此，这是我的两个问题：

1.  是否可以从模板中查询系统以获取核心数？如果是的话，有人可以告诉我怎么做吗？

2.  但更重要的是，是否可以在模板的 userdata 部分使用该值？

PS：我也在 AWS 论坛上问过同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:53:25.077

我不知道以编程方式发现这一点的任何方法[但见下文]，但您当然可以将参数的值插入用户数据部分。这是一个例子：

```
UserData: {
  "Fn::Base64": {
    "Fn::Join: [
      "",
      [
        "all of the script up to the missing value",
        {"Ref": "NumberOfCoresParameterName"},
        "all of the script after the missing value"
      ]
    ]
  }
} 
```

在示例中，`"NumberOfCoresParameterName`是您为插入值的参数提供的名称。

该`"Fn::Base64"`函数将其值转换为 UserData 所需的 base 64 编码字符串。

`"Fn::Join"`接受两个参数：一个要在要加入的字符串之间插入的字符串（这里是一个空字符串），以及要加入的字符串数组。其他字符串中间的`"Ref"`对象被参数的值替换。

编辑添加：我不知道如何获取核心数，但是您可以使用命令获取 AWS 实例类型

```
curl http://169.254.169.254/latest/meta-data/instance-type 
```

这将返回一个字符串，如`t1.micro`,`m1.large`等。您可以使用 AWS 文档来确定该实例类型具有多少核心。但是，我不知道您可以在模板中使用此结果的任何方式。您可以编写一个 shell 脚本，在 UserData 部分执行您需要的任何操作。

# php - 刮掉两个元素

> ID：15181678
> 
> 赞同：0
> 
> 时间：2013-03-03T02:04:11.287
> 
> 标签：php

我试图从一个页面上抓取两个不同的东西，如果我只抓取链接，那么我可以做一个 foreach 并获取链接，但我也想要代表该链接的标题。

这是页面标记的示例

```
<div id="parent">
<span id="title">Title</span>

<div id="Two">
<a href="somelink">Somelink</a>
</div>
</div> 
```

这是仅获取标题和链接的示例

```
foreach($html->find('div[id=Two] a') as $a){
echo $a->href;
}

foreach($html->find('span[id=title]') as $az){
echo $az->plaintext;
} 
```

但是我需要它们在一个循环中，这样我就可以拥有标题及其各自的链接

就像是

```
foreach($html->find('span['id=title'] as $a, div[id=Two] a') as $aa){ 
```

虽然那行不通

我使用简单的 html dom

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:14:57.010

我认为这应该可行，前提是总是有标题和链接：

```
$links = $html->find('div[id=Two] a');
$titles = $html->find('span[id=title]');

foreach ($links as $i => $a)
{
    echo $titles[$i]->plaintext;
    echo $a->href;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:15:07.170

根本没有经过测试，但这样的东西应该可以工作。您可能需要添加验证检查以确保每个标题都有一个链接。

```
foreach($html->find('div[id=parent]') as $parent) {
    $title = $parent->find('span[id=title]')->plaintext;
    $href = $parent->find('div[id=Two] a')->href;

    echo $title . ': ' . $href . '<br />';
} 
```

# google-maps - 细节级别调整（Google Maps API）

> ID：15181679
> 
> 赞同：1
> 
> 时间：2013-03-03T02:04:24.643
> 
> 标签：google-maps, google-maps-api-3

是否有可能更改地图上不同缩放级别上显示的名称（标签）/边界的方式？

例如，我有 17 个缩放级别。我想仅在缩放级别 10 上开始显示详细信息（国家名称）。

换句话说：地图上的详细程度如何与缩放级别相关联以及如何对其进行调整？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T08:00:58.397

```
function show_map(lat, lng) {
    var labelsOff = [{
        featureType: "administrative",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }, {
        featureType: "poi",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }, {
        featureType: "water",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }, {
        featureType: "road",
        elementType: "labels",
        stylers: [{
            visibility: "off"
        }]
    }];

    var labelsOn = [{
        featureType: "administrative",
        elementType: "labels",
        stylers: [{
            visibility: "on"
        }]
    }, {
        featureType: "poi",
        elementType: "labels",
        stylers: [{
            visibility: "on"
        }]
    }, {
        featureType: "water",
        elementType: "labels",
        stylers: [{
            visibility: "on"
        }]
    }, {
        featureType: "road",
        elementType: "labels",
        stylers: [{
            visibility: "on"
        }]
    }];

    latlng = new google.maps.LatLng(51.477391, -0.000853);
    myOptions = {
        zoom: 3,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map"), myOptions);
    map.setOptions({
        styles: labelsOff
    });

    google.maps.event.addListener(map, 'zoom_changed', function () {
        google.maps.event.addListenerOnce(map, 'tilesloaded', function () {
            if (map.getZoom() >= 10) {
                map.setOptions({
                    styles: labelsOn
                });
            } else {
                map.setOptions({
                    styles: labelsOff
                });
            }
        });
    });

}

show_map(); 
```

希望这就是你要找的。显然你可以编辑这些特征类型来隐藏不同的东西。

对不起，不得不编辑。忘[了小提琴](http://jsfiddle.net/BEMun/)！

# java - Android Maps V2 App 不断崩溃

> ID：15181683
> 
> 赞同：2
> 
> 时间：2013-03-03T02:04:50.627
> 
> 标签：java, android, google-maps

我的应用程序使用 android api v2 存在问题，因为它无法启动它只会一直说“不幸的是，app_name 已停止工作。”，我已经按照谷歌发布的指南中的每一步，我也在 StackOverflow 中查找了类似的问题并尝试了解决方案，但不幸的是似乎没有一个有效。

我似乎遇到的最大问题之一是

```
 Caused by: java.lang.ClassNotFoundException: Didn't find class "com.google.android.gms.maps.MapFragment" 
```

即使我添加了 Google Play 服务库并将其添加到应用程序项目中。那么问题出在哪里呢？

```
import android.support.v4.app.FragmentActivity;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.GoogleMap;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends FragmentActivity {

SupportMapFragment mMap;
GoogleMap googleMap;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mMap = (SupportMapFragment) getSupportFragmentManager()
            .findFragmentById(R.id.map);

            googleMap = mMap.getMap();

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T17:11:51.667

编辑 --- 我建议您尝试使用[Genymotion](http://genymotion.com)而不是 eclipse android 模拟器。

## 但是您可以尝试以下步骤。

如果您已经拥有 API KEY，则可以执行此步骤

**步骤1：**

配置AndroindManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.br.activitys"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="16" />

    <permission
        android:name="com.br.activitys.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.br.activitys.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />    

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Holo.Light.DarkActionBar"
         android:debuggable="true">

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="YOUR API KEY" />

        <activity> ... </activity>

    </application>

</manifest> 
```

**第 2 步：** 创建模拟器 4.2.2 API 17

![在此处输入图像描述](../Images/401bae073b296072c0aae0ac3c4c459f.png)

之后，启动并等待这个完全加载。第 3 步：下载文件[https://www.dropbox.com/s/m8p5jsvg9i4l5j3/com.android.vending-20130716.apk](https://www.dropbox.com/s/m8p5jsvg9i4l5j3/com.android.vending-20130716.apk) e [https://www.dropbox.com/s/a90mjl9nhk4qv45/com.google.android。 gms-20130716.apk](https://www.dropbox.com/s/a90mjl9nhk4qv45/com.google.android.gms-20130716.apk) 使用 ADB 安装它 在 windows 上执行类型 CMD

![在此处输入图像描述](../Images/56126b0852cfc4a315908d0534736f86.png)

提示将打开，您需要访问您的 android 安装文件夹，在我的情况下为 C:\Program Files (x86)\Android\android-sdk\platform-tools

![在此处输入图像描述](../Images/8f5fa6b7c58c8347d08e9964e8387e4b.png)

因此，您将输入 ADB INSTALL 和您下载的文件的路径。 ![在此处输入图像描述](../Images/7b77335ae1a3aa62cb09e1e805155d59.png)

和

![在此处输入图像描述](../Images/d080aaba0dcba33b7d75932e956a24d4.png)

这个过程需要一些时间（2或3分钟），不用担心。

之后，您需要重新启动模拟器。

**第 4 步：** 下载[https://www.dropbox.com/s/42bz5imaq4uty4j/google_play_services_9.7z](https://www.dropbox.com/s/42bz5imaq4uty4j/google_play_services_9.7z)提取文件夹 extra/google 的文件夹 google_play_services insde 非您的 SDK 目录（在我的情况下为 C:\Program Files (x86)\Android\ android-sdk\extras\google)，如果该文件夹已经存在，删除并替换为这个新文件夹。现在，将 google_play_services\libproject 中的同一文件夹 google-play-services_lib 复制到您的工作区，并像 eclipse 项目一样导入。文件 -> 导入

![在此处输入图像描述](../Images/f357af2cbfb3d6f4e812a5d82b459da8.png)

选择 Android -> Existing Android Code Into Workspace

![在此处输入图像描述](../Images/9af7d567a9b44f50642cb3a9894f85d4.png)

选择您复制的文件夹

![在此处输入图像描述](../Images/2208ee6bd5418e1aaea5d9a4bd470e31.png)

并完成。

**第 5 步：** 现在将库添加到您的项目中。右键单击您的项目并转到属性。在 android 中，向下滚动直到 library 并单击 add。

![在此处输入图像描述](../Images/bbad2c69da3f35fece6bfe733c8d1cb2.png)

选择你导入的项目，点击ok

![在此处输入图像描述](../Images/71b5d767909ccd30c078f11a0e5dcb87.png)

![在此处输入图像描述](../Images/efa8029951d0b72e9e169f3d655563c8.png)

可以肯定的是，转到 Project -> Clean 并选择 Clean All Projects

![在此处输入图像描述](../Images/d1801aee166adddeb2e5154b12f0b70f.png)

完成了，现在只需运行您的应用程序。

![在此处输入图像描述](../Images/98c0de712842953fe352c4f6edb694aa.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:45:51.757

您是在模拟器还是设备上测试您的应用程序。因为 google MapV2 需要安装了 Google play apk 的 Android 设备。

# c++ - 将错误与自己的类函数联系起来

> ID：15181684
> 
> 赞同：1
> 
> 时间：2013-03-03T02:05:09.417
> 
> 标签：c++, function, hyperlink, linker, linker-errors

我在任何地方都找不到任何解决方案，这可能是一个对我隐藏的小错误。

我创建了几个类，并希望在我的主类中使用它们。一切都编译得很好，但是当我去构建我的项目时，在处理我的类正在进行的函数调用时出现链接错误

```
Error 11 error LNK2019: unresolved external symbol 
  "public: char __thiscall utility::UtilityClass::convertKeycode(int)" 
   (?convertKeycode@UtilityClass@utility@@QAEDH@Z) referenced in function
   _main C:\Users\Sonny\Documents\Visual Studio 2012\Projects\GaugePanel\GaugePanel\PointTest.obj GaugePanel 
```

基本上我创建了我创建的类的一个对象并调用一个函数。我的程序给了我链接错误。

我已确保包含所有包含头文件以及我能想到的所有其他内容，但我仍然收到这些错误。请帮忙

桑尼。

```
UtilityClass setUpClass = UtilityClass();
displayM = setUpClass.setUpAllegroDisplay();
plugInId1 = setUpClass.setUpUAVConnection(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:38:45.960

我已经想通了。

这是因为在我的类中，当我定义函数签名时，我没有将类名包含在范围运算符中（我认为这就是它的名称）

所以而不是：

长 setUpUAVConnection(){}

它必须是这样的：

长 UtilityClass::setUpUAVConnection(){}

感谢大家的帮助。

# mfc - Uri 返回的是 AbsolutePath 而不是 AbsoluteUri

> ID：15181685
> 
> 赞同：0
> 
> 时间：2013-03-03T02:05:11.763
> 
> 标签：mfc, c++-cli, download

现在我正在尝试下载某个 HTML 网站的页面源代码。我试图保留默认的库，所以我使用的是 DownloadFileAsync。我通过 DownloadFileAsync 的 Uri 存储在 AbsoluteUri 设置下，我猜你可以调用它，但是当调用 DownloadFileAsync 时，它使用我不知道如何设置的 Uri 的 AbsolutePath，并自动设置为网站索引页面，这不是我想要的是。所以我想知道如何更改 AbsolutePath 或使用 AbsoluteUri 作为 URL DownloadFileAsync 使用。就像我说的，我想继续使用默认库，但如果有人可以诚实地推荐一个好的简单的外部库，我会试一试。

代码

```
void Downloader::GetHTML(CString HTML)
{
string Temp, Data="";
WebClient^ myClient = gcnew WebClient;   
    WebProxy wProxy;
    myClient->Proxy = wProxy.GetDefaultProxy();
myClient->Credentials = CredentialCache::DefaultCredentials;

String^ HTML = gcnew String (GetSourceHTML(HTML));
Uri^ Base = gcnew Uri("http://walmart.com");
Uri^ Link = gcnew Uri(Base,HTML);

myClient->DownloadFileAsync(Link,"C:\\Users\\me\\Desktop\\Test2.txt");

} 
```

# php - 如何在 yaml 资源文件中使用控制器作为服务

> ID：15181686
> 
> 赞同：0
> 
> 时间：2013-03-03T02:05:18.620
> 
> 标签：php, yaml, silex, symfony-components

我正在使用**Silex**框架。我写了一个简单的路由资源加载器，就是这样使用的：

```
 $app->register( new RouteCollectionLoaderProvider);
    $app["mp.route_loader"]->append(array(
            array(
                    "type"=>"yaml",
                    "path"=>__DIR__."/Resources/routes/routes.yml",
                    "prefix"=>"/",
                )
    )); 
```

源代码在这里：[https ://github.com/Mparaiso/silex-extensions/blob/master/src/Mparaiso/Provider/RouteCollectionLoaderProvider.php](https://github.com/Mparaiso/silex-extensions/blob/master/src/Mparaiso/Provider/RouteCollectionLoaderProvider.php)

我能够加载以常规方式命名的路由，例如，在 yaml 文件中

```
index:
  pattern: /
  defaults: {_controller: Controller\DefaultController::index } 
```

但我无法加载定义为服务的控制器：

```
$app["my.controller"] = function(){ return new MyController;};

info:
  pattern: /info
  defaults: {_controller: my.controller:info } 
```

能够在资源文件中将控制器用作服务语法需要什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T16:21:41.427

Silex 附带一个[ServiceControllerServiceProvider](http://silex.sensiolabs.org/doc/providers/service_controller.html)，您可以使用它来获取控制器作为服务。

```
$app->register(new Silex\Provider\ServiceControllerServiceProvider());

$app['my.controller'] = $app->share(function ($app) {
    return new MyController($app['my.service']);
});

$app->get('/info', 'my.controller:info'); 
```

这也应该适用于您的自定义加载程序。

# android - 微调器正在离开屏幕并且无法滚动（theme.holo）

> ID：15181697
> 
> 赞同：2
> 
> 时间：2013-03-03T02:07:11.187
> 
> 标签：android, android-layout

我正在重做我的应用程序以使用 Holo.Theme.NoActionBar 来查看果冻豆主题

现在，当我单击手机上的微调器时，下拉栏按原样下降，但会越过屏幕，我什至不会让我滚动。

xml 中是否有我需要添加的新设置才能使其正常工作？

# c# - EmguCV 中的 BOWImgDescriptorExtractor 错误

> ID：15181699
> 
> 赞同：0
> 
> 时间：2013-03-03T02:07:19.803
> 
> 标签：c#, opencv, emgucv

当我尝试使用and调用`BOWImgDescriptorExtractor`计算方法时出现以下错误。`BriefDescriptorExtractor``BruteForceMatcher`

> Emgu.CV.dll 中出现“Emgu.CV.Util.CvException”类型的未处理异常附加信息：OpenCV：type == src2.type() && src1.cols == src2.cols && (type == CV_32F | | 类型 == CV_8U)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T02:01:16.480

我能够解决这个问题。问题在于 type == src2.type()。我用来创建词汇表的特征提取器（SIFT）与我在 BOWImgDescriptorExtractor 中用作定义参数的特征提取器（BRIEF）不同。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-03T02:59:47.270

这是最可能的原因：**（type == CV_32F || type == CV_8U）**

图像必须是 32 位浮点深度或 8 位无符号字符深度。

看看这个： [http ://www.emgu.com/wiki/index.php/Working_with_Images](http://www.emgu.com/wiki/index.php/Working_with_Images)

# android - Google 许可库 (LVL) 为空 googleplaylicensing.jar

> ID：15181700
> 
> 赞同：1
> 
> 时间：2013-03-03T02:07:29.357
> 
> 标签：android, eclipse, android-library, android-lvl

我整个星期都在开发我的一个应用程序的最新版本，今天，我随机开始收到一堆关于许可证检查库的错误。我正在使用 Eclipse，并下载了最新的 Android SDK 和 Google Play Licensing Library，以便使用最新版本的 API。

我在我的工作区中创建了一个 LVL 项目，并更改了我的应用程序的项目属性以将 LVL 项目引用为 Android 库。

![在此处输入图像描述](../Images/2c869073a4febcf6ffd5634e37f861f2.png)

但是，当我尝试引用 LVL 项目中的类时，找不到它们。我检查了我的项目的构建路径以确保它包含 GooglePlayLicensing 项目，并且确实如此：

![在此处输入图像描述](../Images/aab8fc81f4119ab290da842399d3066e.png)

因此，我可以看到它正在引用 LVL 项目中的 googleplaylicensing.jar，但是当我构建该项目时，它创建的 googleplaylicensing.jar 文件是空的。它只有一个 jar Manifest，但没有类文件：

```
palanthas:~/AndroidWorkspace/GooglePlayLicensing/bin$ jar tvf googleplaylicensing.jar 
     2 Sat Mar 02 17:45:50 PST 2013 META-INF/MANIFEST.MF
palanthas:~/AndroidWorkspace/GooglePlayLicensing/bin$ 
```

我仔细检查了 GooglePlayLicensing 项目在构建路径中是否有 java 源，认为它们可能以某种方式被排除在外，这就是为什么没有构建任何东西的原因。但是，src/ 和 gen/ 目录都包含在 Java 构建路径中。

![在此处输入图像描述](../Images/af3f44f922a8637cedfd3bf8ff0c2353.png)

为什么没有正确构建 LVL jar？如何修复它以便我可以在我的 android 应用程序项目中引用这些文件？

注意：我知道我可以将源代码复制到我的 android 项目中，但这不是这个问题的可接受解决方案。我需要它易于重复使用，因为我们有很多应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:33:47.377

我发现了问题。当我将 LVL 项目导入到我的 Android 工作区时，一定是出现了严重错误，因为所有 .java 文件都是空的。因此，由于 .java 文件为空，因此没有编译任何类，因此 googleplaylicensing.jar 为空。

我再次从 SDK 目录中复制了源文件，在 Eclipse 中刷新了我的项目，然后再次构建它，并且正确形成了 jar。

# java - 如何使用您的代码管理电话设置，例如文本到语音设置

> ID：15181701
> 
> 赞同：1
> 
> 时间：2013-03-03T02:07:29.950
> 
> 标签：java, android

我正在开发一个文本转语音应用程序，在我的应用程序中，我有允许用户选择语言、管理音量和语速的设置。我可以使用`AudioManager`. 现在我唯一的问题是语言和语速，我不知道如何使用我的应用程序管理它们..

有人可以给我一个示例代码吗？

# java - GWT uiBinder 与继承一起工作？

> ID：15181704
> 
> 赞同：3
> 
> 时间：2013-03-03T02:08:03.657
> 
> 标签：java, gwt, inheritance, uibinder

我的模型有一个 CRUD 表单的基类。在这个类的模板中，我有一个保存按钮。

在扩展类中，我有许多与特定模型相关的字段，但没有保存按钮。

每次我在子模型中调用 createAndBindUi 时，都会抛出一个错误，提示我没有保存按钮。

任何人都知道如何正确地做到这一点？可以发帖解决。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T02:25:49.780

如果你需要在超类和子类中都使用 UiBinder，那么你有一个设计问题。使用组合而不是继承，这也将解决您的 UiBinder 问题。

虽然有一些技巧/解决方法，但我们的想法始终是不要使用与 2 个 UiBinder 模板的主题相同的对象。

在 GWT 论坛上有很多关于 UiBinder 和继承的讨论（虽然在 SO 上没有那么多）：[https ://groups.google.com/d/searchin/google-web-toolkit/uibinder%20inheritance](https://groups.google.com/d/searchin/google-web-toolkit/uibinder%20inheritance)

# python - 如何让 for 循环在 python 2.7 中与 tkinter 一起工作？

> ID：15181706
> 
> 赞同：2
> 
> 时间：2013-03-03T02:08:05.793
> 
> 标签：python, user-interface, loops, for-loop, tkinter

我正在尝试创建一个将搜索 .sql 文件的 gui 小部件。我正在使用 tkinter，但我有一个不工作的 for 循环。当有很多 5 时，它只会显示一个结果。

```
def OnPressEnter(self,event):
    with con:
        cur = con.cursor()
        t = self.entryVariable.get()

        cur.execute("select * from Dict where Def LIKE ? OR word LIKE ? LIMIT 12", ('%'+t+'%', '%'+t+'%'))
        rows = cur.fetchall()

        for row in rows:
            #printing second & third column(See tuples)

            self.labelVariable.set(row[1])

            self.labelVariable.set(row[2]) 
```

如果我输入“Apple”，我只会得到一个结果，即“$499”。那么如何让循环工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:28:30.367

这不是 for 循环，而是您将相同的变量设置了两次。这里：

```
for row in rows:
        #printing second & third column(See tuples)
        #sets the variable
        self.labelVariable.set(row[1])
        #sets the variable again to a different value
        self.labelVariable.set(row[2]) 
```

您可以执行以下操作：

```
 label = ""
 for row in rows:
    label += row[1] + ":" + row[2] + "\n"
 self.labelVariable.set(label)
 #print to check the label string
 print label 
```

它首先生成字符串，然后设置值。标签值应包含两个值，它们之间用冒号分隔行。

# single-page-application - durandal 是预先加载所有视图模型/视图还是按需加载？

> ID：15181714
> 
> 赞同：3
> 
> 时间：2013-03-03T02:09:34.223
> 
> 标签：single-page-application, durandal

Durandal 是否在初始加载/前期加载 ViewModels/View 或按需加载它们。

假设我有一个非常大的网站，有 100 个或更多页面/视图，每个视图都有一个相当大的 viewModel。Durandal 会预先加载所有这些吗？

每个视图中的数据调用怎么样，如果预先加载它们会被触发吗？

试图了解杜兰达尔的行为

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T02:57:44.147

Durandal 根据需要（按需）加载视图和视图模型。所以在你的例子中，有 100 个视图和视图模型，你只会加载你使用的那些。查看浏览器工具的“网络”选项卡，您可以根据需要看到它们。

此外，一旦它们是本地的，它们就会被缓存在浏览器中，这是一件好事。

如果您的视图模型在“激活”上进行数据调用，那么是的，每次激活它们时都会调用它们。有关生命周期事件的更多信息，请参阅 Durandal 文档。

但是，如果您运行 optimizer.exe，它将打包所有这些并预先将它们一次性（缩小）带到客户端。这不是我在开发过程中做的事情。但是，如果您想在上线后预先加载所有内容，这是一种将整个应用程序本地化的方法。

对于您的应用程序具有 100 多个视图，我可能会在进行时加载，因为任何人都不太可能在一次使用中达到所有 100 个视图（我猜）。这取决于您打算如何使用该应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T16:13:23.410

我是 durandal 的新手，但我相当确定您有两种选择。

您可以按需加载它们，这是默认设置，也可以将其构建为应用程序，将所有应用程序文件压缩到一个包中。不确定该构建步骤的细节，但大概如果您采用这种方法，那么您的整个应用程序就会一次性下载。

至于每个视图中的数据调用，您通常会在视图模型的激活函数中启动它们。因此，它们只会在您的视图模型被激活而不是完全预先激活时才会发生。

因此，对于您的场景，Durandal 会很好地工作。

# google-app-engine - GetAll：保证键和实体的顺序相同？

> ID：15181717
> 
> 赞同：4
> 
> 时间：2013-03-03T02:10:08.313
> 
> 标签：google-app-engine, google-cloud-datastore, go

我一直在使用它来加载实体并且仍然有可用的密钥：

```
type Post struct {
    Title    string
    Created  time.Time
    // ...
    key      *datastore.Key
}

func All(c appengine.Context) (*[]Post, error) {
    var p []Post
    q := datastore.NewQuery("Post").Order("-Created")
    k, err := q.GetAll(c, &p)
    if err != nil {
        return nil, err
    }
    for i := 0; i < len(p); i++ {
        p[i].key = k[i]
    }
    return &p, nil
} 
```

然后我想知道我是否可以始终相信它`k`的顺序与`p`（即，`k[0]`始终是 的关键`p[0]`）相同？如果我理解正确[，appengine-go 源代码](http://code.google.com/p/appengine-go/source/browse/appengine/datastore/query.go#386)会建议，因为这两个切片都是使用 append 构建的。*它似乎*确实有效。

我做的安全吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T21:13:11.553

是的，[GetAll](https://developers.google.com/appengine/docs/go/datastore/reference#Query.GetAll)返回的键将与附加到 dst 的值的顺序相同。

# android - 错误的是/否文本使用 Android 资源字符串

> ID：15181720
> 
> 赞同：5
> 
> 时间：2013-03-03T02:11:05.237
> 
> 标签：android, xamarin.android

我在 Mono for Android 中构建一个对话框，如下所示：

```
AlertDialog.Builder builder = new AlertDialog.Builder(Context);
builder.SetTitle(Context.GetString(Resource.String.MyTitle));
builder.SetMessage(Context.GetString(Resource.String.MyQuestion);
//YES, not OK
builder.SetPositiveButton(Android.Resource.String.Yes, new EventHandler<DialogClickEventArgs>((dlgSender, dlgEvt) => { doSomething();});
builder.SetNegativeButton(Context.GetString(Android.Resource.String.No), new EventHandler<DialogClickEventArgs>((dlgSender, dlgEvt) => {    doSomethingElse();}));
builder.SetNeutralButton(Context.GetString(Android.Resource.String.Cancel), 
                                         new EventHandler<DialogClickEventArgs>((dlgSender, dlgEvt) => {}));

Dialog dialog = builder.Create();
dialog.Show(); 
```

这用三个按钮提出了我的问题：**"Cancel, Cancel, Ok"**而我希望得到**"No, Cancel, Yes"**。我上面的代码有什么问题，或者这里的 Mono for Android 有什么问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T03:07:30.457

`android.R.string.yes`和`android.R.string.no`（`Android.Resource.String.*`在 Monodroid 中使用）只是资源名称，相当于“OK”和“Cancel”。您必须制作自己的字符串资源。

从 Android 的`strings.xml`（Android 4.2）：

> ```
> <!-- Preference framework strings. -->
> <string name="ok">OK</string>
> <!-- Preference framework strings. -->
> <string name="cancel">Cancel</string>
> <!-- Preference framework strings. -->
> <string name="yes">OK</string>
> <!-- Preference framework strings. -->
> <string name="no">Cancel</string> 
> ```

# winapi - 获取 .lib 地址

> ID：15181721
> 
> 赞同：2
> 
> 时间：2013-03-03T02:11:14.187
> 
> 标签：winapi, assembly, linker, import

我目前正在学习链接/编译的工作原理，刚刚谈到了关于 .exe 文件的导入的主题。我看到（Microsoft）链接器可能需要 Win32 SDK 中的 .lib 文件来解析外部函数。例如，如果您想使用`MessageBoxA`from`user32.dll`您实际上需要`_MessageBoxA@16`来自 user32.lib 的地址来解决它。那么用户/程序员如何找出我需要解决的“前缀”呢？！（与其他 User32/Kernel32 函数一样...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:40:02.980

_MessageBoxA@16 是编译器根据 WinUser.h #include 文件中的声明生成的符号。它是一个*修饰*名称，下划线和@ 后缀用于声明为 __stdcall 的函数。名称修饰有助于在链接时捕获声明错误。但实际上并未用于 winapi 函数，它们具有未修饰的名称。主要是为了帮助简化 GetProcAddress() 的使用。

User32.lib*不是*一个普通的库，它是一个**导入库**。它不包含 MessageBoxA 的代码，它仅包含由 user32.dll 导出的所有函数的列表。它包含从编译器生成的名称 _MessageBoxA@16 到它实际从 user32.dll 导出的名称 MessageBoxA 的映射。Microsoft 在构建 user32.dll 时使用“模块定义文件”，[即 .def 文件](http://msdn.microsoft.com/en-us/library/28d6s79h%28v=VS.80%29.aspx)来创建此映射

链接器使用 user32.lib 来解析符号。它从导入库中知道如何使用导出函数的正确名称在 EXE 中创建导入表条目。

# c# - 使用带有一些表单变量的可编辑模板

> ID：15181726
> 
> 赞同：0
> 
> 时间：2013-03-03T02:11:43.290
> 
> 标签：c#, visual-studio-2010, templates, text

我是 C# 的新手，想就如何从具有三个由表单提交分配的变量的模板创建文本文件提出建议。下面是它的外观： template.txt (var1 = name, var2 = location, var3 = year 是文件中的占位符) 示例：我的名字是 var1，我来自 var2，我在那里住了 var3 年。

形式： 姓名： 地点： 年份：

然后该输出文本文件将是模板和表单变量的总和。

现在我可以编辑模板以读取任何内容并将变量移动到我想根据模板和表单输入创建任何所需的输出文本的位置。

我希望我已经解释得足够好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:05:31.640

看一下 String.Format 方法。您可以动态生成文本并在占位符周围移动以表示变量。我会说使文本框成为一个数组，以便在生成文本文件时可以循环遍历它们。

```
string name = "Luke";
string location = "ATL";
str = String.Format("Hello {0} from {1}.", name, location);

OUTPUT:
"Hello Luke from ATL." 
```

MSDN 文档在这里：http: [//msdn.microsoft.com/en-us/library/fht0f5be.aspx](http://msdn.microsoft.com/en-us/library/fht0f5be.aspx)

# javascript - JS中的类和函数？

> ID：15181727
> 
> 赞同：2
> 
> 时间：2013-03-03T02:11:46.250
> 
> 标签：javascript, class

这是一些[示例代码](http://jsfiddle.net/trGTz/1/)。

当我在 f2() 中调用 f1() 时，它会死掉。我不明白为什么。我也尝试替换`this`为`Test.prototype`，但以同样的方式失败。在与阅读交谈后，我问我是否这样做`var foo = new bar()`并在 foo 上调用函数`this`始终是 foo 变量。他的回答让我很困惑。

类/这个如何在 JS 中工作？我只想要基本的。我不需要虚函数、继承等，尽管静态变量和函数可能很容易解释。我不需要知道公共/私有是如何工作的，但只要我能弄清楚如何访问公共变量和函数，我现在就可以了。

```
var msg='';
try{

function Test(){
    var a='';
    var b=3;
    var c=4;
    this.f1=function(){
        msg+="f1\n";
    }
    this.f2=function(){
        msg+="f2a\n";
        f1();
        msg+="f2b\n";
    }
    this.f3=function(){
        msg+=b+"\n";
        b=5;
    }
    function f4(){
        c++;
    }
}

var t1 = new Test();
t1.f2();
t1.f3();
t1.f4();
console.log(t1.b);
}
catch(err)
{
    console.log(err);
}
console.log(msg); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T02:36:41.030

其他答案是正确的：

```
this.f2=function(){
    msg+="f2a\n";
    f1();
    msg+="f2b\n";
} 
```

到：

```
this.f2=function(){
    msg+="f2a\n";
    this.f1();
    msg+="f2b\n";
} 
```

为什么：

我可以从您的术语中看出您来自不同的语言背景，例如 Java 之类的。

让我们先解决一些简单的问题。

javascript 中没有类（好吧，在即将发布的版本中，但我们现在不需要谈论它）。在 javascript 中，我们使用对象和原型链。

**“this”由包含该对象的对象定义。**

几乎所有事物都是对象。几乎所有东西都继承自原始的 Object()。

```
console.log( ({}).constructor.prototype ) // Object {} 
```

函数具有原型，对象具有具有原型的构造函数。我知道，起初这似乎令人困惑。

```
console.log( ({}).prototype ) // undefined
console.log( function(){}.prototype ) // Object {}
console.log( (new Function()).prototype ) // Object {} 
```

因此，对于一个非常基本的示例，比较这两者。

```
//eg1
var fn = function(){
   console.log( this ); // window
}

//eg2
var x = {
    fn: function(){
        console.log( this ); // Object {fn: function}
    }
};
x.fn(); 
```

在这里我们可以看到，在 eg1 中，fn() 是在全局范围的上下文中定义的。（见下面的旁注）。在 eg2 中，我们可以看到“this”指的是包含对象“x”；

** 旁注：在浏览器中，这始终是“窗口”。在像 node.js 这样的环境中，它被称为别的东西，并且有一组不同的对象和函数。现在不用担心，我们会坚持使用浏览器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:15:46.500

你需要打电话`this.f1()`不`f1()`

`f1`未定义为全局函数，它定义为对象的属性，因此您需要通过对象引用它。

### 更多关于课程

至于类的整体工作方式，JS 使用原型继承。如果将任何函数放在 new 运算符之后，则可以将其用作构造函数。使用 new 运算符会导致`this`绑定到新创建的对象。因此，构造函数中对 this 的任何引用都将绑定到新创建的对象。

因此，您的`t1`对象将所有附加到自身的函数作为新对象的方法。

`t1.b`不会返回任何东西，因为 b 没有附加到对象上。它仅在构造函数中定义为局部变量，从未绑定到对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T02:16:13.463

将第 13 行更改为`this.f1();`它可以完美运行！

# ios - 两个 C4Image 之间的淡入淡出或溶解

> ID：15181730
> 
> 赞同：1
> 
> 时间：2013-03-03T02:11:56.417
> 
> 标签：ios, c4

我将如何在两个 C4Image 之间进行某种动画或过渡？

我有这样的设置：

```
C4Image * img1 = [[C4Image alloc] initWithRawData:rawData width:width height:height];
C4Image * img2 = [[C4Image alloc] initWithRawData:rawData width:width height:height];

[self.canvas addImage:img1];
// insert magic here to trigger transition
[self.canvas addImage:img2]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:57:30.843

进行过渡的最简单方法是：

```
image1.animationDuration = 1.0f;
image1.image = image2; 
```

您可以在此处找到一个片段，该片段在启动应用程序 1 秒后将图像交叉淡化为新图像：

[https://gist.github.com/C4Code/5074430](https://gist.github.com/C4Code/5074430)

# python-2.7 - Python - 格式化的聊天客户端

> ID：15181731
> 
> 赞同：0
> 
> 时间：2013-03-03T02:12:01.373
> 
> 标签：python-2.7, tkinter

我制作了一个聊天服务器和客户端，它使用基本的套接字连接将消息发送到服务器，然后将它们发送给所有连接的用户。这一切都是`print`在命令行中完成的，因此下一步是使用 Tk（Python 2.7）制作一个 GUI。

我现在遇到的问题是在客户端中显示收到的消息并进行包装。

起初，我尝试使用 Listbox，除了显然无法在 Listbox 上包装文本这一事实外，它工作得非常好。

其次，我尝试使用文本框，这完全是一场灾难，因为我找不到任何方法可以在不输入文本的情况下在其中打印文本。

第三，我尝试了一个画布，它确实支持自动换行并且能够创建文本，但是我在换行后在正确的位置打印文本以及滚动条不起作用时遇到了一些问题

![](../Images/6559535b7e0b5ef4f6a5d9acb612b91e.png).

那么这些问题中的任何一个都可以解决吗，还是我完全错误地吠叫了树，并且有一种非常简单的方法可以做到这一点？

这是我目前为 Canvas 提供的代码：

```
self.chatspace.create_text(5, i, text = recv_data, anchor=NW, width=175)
i = i + (((len(recv_data) / 175) + 1) * 15) 
```

我意识到`len()`返回字符串中的字符数而不是像素长度。

抱歉问了 3 个问题，我完全被难住了，我已经为此工作了 4 个小时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T02:51:15.967

您应该使用文本小部件。要将文本插入小部件，请使用以下`insert`方法：

```
The_widget.insert("end", "hello, world") 
```

这在所有 Tkinter 文档中都有记录。例如，请参阅[http://effbot.org/tkinterbook/text.htm#Tkinter.Text.insert-method](http://effbot.org/tkinterbook/text.htm#Tkinter.Text.insert-method)

# android - 使用 libusb 在 UCG102 上设置采样率

> ID：15181734
> 
> 赞同：1
> 
> 时间：2013-03-03T02:12:59.770
> 
> 标签：android, audio, usb, audio-streaming, libusb

我正在使用 libusb 与 UCG102（Guitar Link）USB 设备通信，并且在使用同步控制请求设置采样率时得到 -9（LIBUSB_ERROR_PIPE，这意味着不支持参数）。这是 LIBUSB 记录的基本请求详细信息，您看不到实际的采样率，因为根据规范它位于 3 字节缓冲区中：

```
03-02 14:33:13.173: I/LIBUSB(9480): bmRequestType=22, bRequest=01, wValue=0100, wIndex=0084, wLength=0003 
```

设置 sampleRate 值的代码

```
byte[] param2 = new byte[3];

param2[2] = (byte)(sampleRate >> 16); //0x44;
param2[1] = (byte)(sampleRate >> 8); // 0xAC;
param2[0] = (byte) (sampleRate & 0xff); //0x00; 
```

相同的代码适用于许多其他 USB 音频设备。然后我继续做同步音频（在 UCG102 上工作的那种——但不是我想要的速率）。

我应该指出，采样率是从设备描述符中选择的，所以我知道这个设备支持它。

所以问题是**如何设置采样率**？在此之前我需要做些什么吗（是的，我已经分离了所有其他接口，然后声明了我想要的接口）。[某些设备是否期望以不同于USB 音频](http://www.usb.org/developers/devclass_docs/audio10.pdf)规范建议的方式表示的采样率？

如果您不能直接回答，也许有人可以将我指向一个 Windows 或 Fedora 库/应用程序，它将与我的 USB 设备（用于音频目的）通信并注销所有 LIBUSB 调用，以便我可以看到它正在工作（或开源所以我可以把我自己的调试放进去）。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T13:07:51.327

事实证明，您无法通过输入或输出端点上的设置请求来执行此操作。您可以通过在界面上选择适当的备用设置来有效地设置输入采样率，因为每个备用设置只有一个采样率。在输出上，每个备用设置都有三个采样率，它只是适应出现的速率。这不是真正典型的 USB 音频 1.0 行为，但它确实有效。

# python - Python 3.3 无法导入 Crypt

> ID：15181739
> 
> 赞同：4
> 
> 时间：2013-03-03T02:14:12.037
> 
> 标签：python, python-3.3

当我在命令行上输入 import Crypt 时，它说：

```
>>>import crypt
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python33\lib\crypt.py", line 3, in <module>
    import _crypt
ImportError: No module named '_crypt' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-03T02:44:42.473

该[`crypt`模块](http://docs.python.org/3/library/crypt)是用于加密 Unix 密码的 Unix[`crypt`库](http://linux.die.net/man/3/crypt)的接口。它被记录为在 Windows 上不可用。它不是一个通用的密码库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T11:36:52.947

如果您正在寻找的只是 的实现`crypt(3)`，我在[这里敲了一个纯 Python 实现，从](https://gist.github.com/Cairnarvon/5075687)[这个公共域 C 实现](http://michael.dipperstein.com/crypt/index.html)移植。它非常慢（比`crypt`我机器上内置的 Python 慢大约 2800 倍，这已经是 OpenSSL 速度的一半左右`DES_crypt`），但如果你只是计算偶尔的哈希，那应该不是问题。

您是否正在编写图像板？

# javascript - CodaSlider 的 JavaScript 错误

> ID：15181740
> 
> 赞同：0
> 
> 时间：2013-03-03T02:14:14.243
> 
> 标签：javascript

我收到一个 JavaScript 错误，你可以在这里看到： [http ://www.northernvirginiapaintingcontractor.com/Interior](http://www.northernvirginiapaintingcontractor.com/Interior)

对象不支持此行的此属性或方法：

```
$(".stripNav ul li a").eq(curclicked).trigger('click'); 
```

如果有人有任何线索，请告诉我，我将非常感激。

此行包含在此处-此 CodaSlider 的整个 JavaScript：（Coda 插件除外）

```
 var theInt = null;
    var $crosslink, $navthumb;
    var curclicked = 0;

    theInterval = function (cur) {
        clearInterval(theInt);

        if (typeof cur != 'undefined')
            curclicked = cur;

        $crosslink.removeClass("active-thumb");
        $navthumb.eq(curclicked).parent().addClass("active-thumb");
        $(".stripNav ul li a").eq(curclicked).trigger('click');

        theInt = setInterval(function () {
            $crosslink.removeClass("active-thumb");
            $navthumb.eq(curclicked).parent().addClass("active-thumb");
            $(".stripNav ul li a").eq(curclicked).trigger('click');
            curclicked++;
            if (7 == curclicked)
                curclicked = 0;

        }, 3000);
    }; 
```

这是文档准备功能：

```
 $(document).ready(function () {
                // slider below //
                $("#main-photo-slider").codaSlider();

                $navthumb = $(".nav-thumb");
                $crosslink = $(".cross-link");

                $navthumb
                .click(function () {
                    var $this = $(this);
                    theInterval($this.parent().attr('href').slice(1) - 1);
                    return false;
                });
             ..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:27:12.930

从您网站上的控制台内部：

`typeof $ === 'undefined'`// 真的

`typeof jQuery === 'undefined'`// 错误的

将这段代码（第 153-178 行）移到`jQuery(function ($) {...}`第 181 行的调用中应该可以解决问题。

# c++ - 默认模板类型可以是通用引用吗？

> ID：15181741
> 
> 赞同：3
> 
> 时间：2013-03-03T02:14:17.700
> 
> 标签：c++, templates, c++11, reference, universal-reference

以下是`&&`通用参考吗？

```
template <class Function = std::greater<int> > void f(Function&& f = Function()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-03T02:39:49.347

该术语`universal reference`是 Scott Meyers 编造的一个术语，用于区分正常的右值引用，即`int&&`模板代码中的右值引用，即`T&&`. 这很重要，因为参考折叠规则与模板代码一起发挥作用，因此该术语用于帮助教学。它被称为 a 的原因`unversal reference`是因为它可以绑定到任何东西。

请记住，`universal reference`C++ 语言中没有 a 这样的东西，就语言而言，`Function&&`它是**右值引用**。但是，是的，在 Scott Meyer 的虚构术语中，在您的示例中`Function&&`是一个。`universal reference`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T02:39:31.607

> && 是通用参考吗？

有点。就像复活节兔子和圣诞老人​​一样，实际上没有*通用参考*（对不起，如果我为你破坏了）。*通用参考*一词未出现在标准中。当“特殊扣除规则”处于活动状态时，Scott Meyers 创造了一个术语来描述模板化的右值引用。

您显示**的是**有效代码。在这种情况下，特殊扣除规则确实适用。也就是说，当您将左值参数传递`A`给 时`f`，`Function`将推断为`A&`。所以根据斯科特的定义，是的，`Function`是“通用参考”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T02:43:26.927

[看起来像](http://ideone.com/Bbfszt)，`std::forward<Function>`在您的函数中调用时正确转发参数类型。

# java - 如何正确提交 AJAX 到 DB

> ID：15181742
> 
> 赞同：0
> 
> 时间：2013-03-03T02:14:22.030
> 
> 标签：java, javascript, jquery, jsp, jeditable

目的：允许用户在客户端更新表，然后在他们按下回车键后更新数据库，并在客户端显示新的更改。

状态：目前我能够显示表格，使用 jeditable 编辑表格，`POST`并将值通过`id`和`value`变量发送到我的服务器端 out.jsp 页面，然后用于`request.getParamater`接收 var 并显示回客户端。我还使用带有 SQLITE 的 JDBC 来动态生成这些表，并希望使用相同的过程来插入或替换新值。

问题：如何传递有关行/列信息的更多信息，以便使用这些新值正确更新数据库？

问题2：有没有办法通过整行？如果是这样，我可以对表中的所有值进行简单的插入或替换。

当前代码：

JSP 客户端：client.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<script
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"
    type="text/javascript" charset="utf-8"></script>
<script src="js/jedit.js" type="text/javascript" charset="utf-8"></script>
<title>Jeditable Test</title>

<script type="text/javascript">
$(document).ready(function() {
    $('.edit').editable('out.jsp', {
        indicator : 'Saving...',
        tooltip   : 'Click to edit...'
    });
});

</script>
</head>
<body>
    <div class="content">
        <table id="demotable1"
            style="border: 1px solid #ccc; margin: 50px auto;">
            <thead style="border: 1px solid #ccc;">
                <tr>
                    <th filter-type='ddl' style="border: 1px solid #ccc;">ONE</th>
                    <th filter-type='ddl' style="border: 1px solid #ccc;">TWO</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class='edit' in="ONE" style='border: 1px solid #ccc;'>Value 1</td>
                    <td class='edit' id="TWO" style='border: 1px solid #ccc;'>Value 2</td>

                </tr>
                <tr>
                    <td class='edit' id="ONE" style='border: 1px solid #ccc;'>Value 3</td>
                    <td class='edit' id="TWO" style='border: 1px solid #ccc;'>Value 4</td>
                </tr>

            </tbody>
        </table>

    </div>
</body>
</html> 
```

表格图片：

![可编辑表](../Images/bc83743f72fb04ea271921f37040e02d.png)

JSP - out.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

                <% 
                String id = request.getParameter("id");
                String value = request.getParameter("value");

                %>
</head>
<body>
<%=id%>
<%=value%>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:13:14.570

我不知道究竟`jedittable`向服务器提交了什么，但如果使用的 id 是`id`然后`value`对于具有多行的表，您可能有多个相同参数名称的值，所以我将使用[getParameterValues](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameterValues%28java.lang.String%29)将它们全部检索为`String[]`. 和 的两个数组都`id`应该`value`具有相同的长度。

为了能够识别每一行，您必须为保存在数据库中的每个记录/行拥有某种唯一的 id。

例如，可以使用[UUID生成这样的 id](http://docs.oracle.com/javase/6/docs/api/java/util/UUID.html)

```
String uid = UUID.randomUUID().toString(); 
```

女巫产生类似的东西

```
76c824f7-3016-4a15-a10f-a60435dc966f 
```

在根据 GET 请求生成 HTML 时，您必须使用表单中的 uid 为每个单元格生成一个名称`<uuid>_<column_name>`，例如带有 uid`76c824f7-3016-4a15-a10f-a60435dc966f`和 columnns的记录`ONE`和`TWO`

```
<td name="76c824f7-3016-4a15-a10f-a60435dc966f_ONE" ...>value 1</td>
<td name="76c824f7-3016-4a15-a10f-a60435dc966f_TWO" ...>value 2</td> 
```

并使用 uid 记录`1a8c2aad-a438-4263-972b-30a839421e6d`

```
<td name="1a8c2aad-a438-4263-972b-30a839421e6d_ONE" ...>value 3</td>
<td name="1a8c2aad-a438-4263-972b-30a839421e6d_TWO" ...>value 4</td> 
```

等等。

发布后，您必须加载所有记录、生成名称并使用[getParameter](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)检索每个列的值并更新它。

您必须考虑必须插入数据库的新记录。

如果要将整行作为单个参数发送到服务器，则必须使用浏览器上的 javascript 处理它。例如，您可以生成类似

```
'76c824f7-3016-4a15-a10f-a60435dc966f=value 1,value 2'
'1a8c2aad-a438-4263-972b-30a839421e6d=value 3,value 4' 
```

参数名称将是 uid。拆分逗号分隔值后，您可以更新相应记录的每一列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:58:53.547

我找到了解决方案，并认为如果有人感兴趣，我应该发布。

查询：

```
<script>
$(document).ready(function() {
    /* Init DataTables */
    var oTable = $('#resource-table').dataTable();

    /* Apply the jEditable handlers to the table */
    $('td', oTable.fnGetNodes()).editable( 'out.jsp', {
        "callback": function( sValue, y ) {
            var aPos = oTable.fnGetPosition( this );
            oTable.fnUpdate( sValue, aPos[0], aPos[1] );
        },
        "submitdata": function ( value, settings ) {
            return {
                "row_id": this.parentNode.getAttribute('id'),
                "id": this.getAttribute('id'),
                "colName": this.getAttribute('col'),
                "column": oTable.fnGetPosition( this )[2]
            };
        },
        "height": "14px"
    } );
} );   

</script> 
```

以上将参数传递给JSP Page，其中GET 是参数。

```
String colName = request.getParameter("colName");
String value = request.getParameter("value");
String row = request.getParameter("row_id");
String column = request.getParameter("column"); 
```

该行偏离 1，因为它使用 TR 条作为一行。所以用下面的方法来解决这个问题。

```
int rowId = Integer.parseInt(row);
        rowId += 1; 
```

然后通过 JSP scriptlet 使用 JDBC 连接（不是 MVC .. 我知道）

```
Class.forName("org.sqlite.JDBC");
        conn = DriverManager.getConnection("jdbc:sqlite:/db.sqlite");
        Statement stat = conn.createStatement();
        add_time = conn.prepareStatement("UPDATE table SET "+colName+" ='"+value+"' WHERE rowid = "+rowId+";");
        add_time.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:10:42.090

您可以使用以下概念：

更标准的方式：使用 JSON 对象交换数据

1.  构造 JSON 对象以将数据发送到 AJAX
2.  用于调用应用程序服务器的 jQuery AJAX
3.  使用 JSON 库将 JSON 字符串转换为 Java 对象，然后进行事务处理。

1) 定义 JSON Object 的数据结构：

Java类：

```
 class OneDBRow {
      String col1Value;
      String col2Value;
  } 
```

对应的 JSON 对象数组

```
 {
      {type:"OneDBRow", col1Value: "hello", col2Value: "Value 2"},
      {type:"OneDBRow", col1Value: "Value 3", col2Value: "Value 4"}
  } 
```

2）使用javascript端构造JSON对象（使用JQuery）

3) 使用 jQuery 选择器填充对象

4) 将对象作为数据的一部分发送 - 您必须使用 JSON 库构建对象

我不知道创建对象数组的确切语法，您可能需要自己研究。

# ruby-on-rails-3 - 如何更新两个不同页面上的两个不同属性？

> ID：15181747
> 
> 赞同：2
> 
> 时间：2013-03-03T02:15:01.723
> 
> 标签：ruby-on-rails-3

我有一个带有名称和密码属性的用户模型。当用户单击“编辑”时，我只希望名称字段可编辑和验证，而不是密码字段。当用户单击“重置密码”时，反之亦然。我认为我的主要问题是如何在名称字段编辑期间关闭密码验证以及如何在密码编辑期间关闭名称验证？

**编辑.html.erb**

```
<%= form_for @user, html: { class: "form_settings" } do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <p><span><%= f.label :name %></span>
    <%= f.text_field :name %>
  </p>

  <p style="padding-top: 15px"><span>&nbsp;</span>
    <%= f.submit "Submit", class: "submit" %>
  </p>
<% end %> 
```

**reset_password.html.erb**

```
<%= form_for @user, html: { class: "form_settings" } do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <p><span><%= label_tag :old_password, "Current Password" %></span>
    <%= password_field_tag :old_password %>
  </p>

  <p><span><%= f.label :password %></span>
    <%= f.password_field :password %>
  </p>

  <p><span><%= f.label :password_confirmation %></span>
    <%= f.password_field :password_confirmation %>
  </p>

  <p style="padding-top: 15px"><span>&nbsp;</span>
    <%= f.submit "Submit", class: "submit" %>
  </p>
<% end %> 
```

**users_controller.rb**

```
def update
  @user = User.find(params[:id])
  if params[:old_password]
    if @user.authenticate(params[:old_password])
      @user.update_attributes(password: params[:user][:password])
      flash[:success] = "Password has been updated"
      redirect_to @user
    else
      flash.now[:error] = "Current password is incorrect"
      render :reset_password
    end
  elsif @user.update_attributes(params[:user])
    flash[:success] = "User name updated"
    redirect_to @user
  else
    render :edit
  end
end 
```

我的另一个问题是密码和密码确认验证不起作用。这就是我在模型中的内容：

```
validates :password, presence: true, confirmation: true 
```

**更新** 获得了要重置的密码并使用此代码进行验证：

```
def update
  @user = User.find(params[:id])
  if params[:old_password]
    if @user.authenticate(params[:old_password])
      if params[:user][:password] == params[:user][:password_confirmation]
        @user.update_attributes(password: params[:user][:password])
        flash[:success] = "Password has been updated"
        redirect_to @user
      else
        flash.now[:error] = "Passwords don't match"
        render :reset_password
      end
    else
      flash.now[:error] = "Current password is incorrect"
      render :reset_password
    end
  elsif @user.update_attributes(params[:user])
    flash[:success] = "User name updated"
    redirect_to @user
  else
    render :edit
  end
end 
```

但这对我来说似乎太复杂了。有人看到更简单的解决方案吗？

但是我仍然有编辑名称字段的问题。就是说密码不能为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T13:32:10.547

将验证逻辑移至模型并保持控制器清洁。

```
validates :password, presence: true, confirmation: true, if: password?, on: :update
validates :name, presence: true, if: name?, on: :update 
```

当您创建记录时，这是必需的。只需添加`on: :create`

```
validates :password, presence: true, confirmation: true, on: :create
validates :name, presence: true, on: :create 
```

像这样修改你的控制器，

```
def update
  @user = User.find(params[:id])
  @user.authenticate(params[:old_password]) if params[:old_password]
  return redirect_to @user, notice: "Sucessfully updated" if @user.update_attributes(params[:user])
  render Rails.application.routes.recognize_path(request.referer)[:action]
end 
```

从此链接使用的渲染想法： [渲染启动更新的操作](https://stackoverflow.com/questions/5207846/render-the-action-that-initiated-update)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:42:47.870

您不应在同一操作中混合使用名称编辑和密码重置。

创建一个将更新用户属性的操作，该`password`字段不应被列入白名单`attr_accessible`

创建另一项将处理密码重置的操作。

```
def update
  @user = User.find(params[:id])
  if @user.update_attributes(params[:user])
    flash[:success] = "User name updated"
    redirect_to @user
  else
    render :edit
  end
end

def reset_password
  if params[:old_password] && @user.authenticate(params[:old_password])
    if params[:user][:password] == params[:user][:password_confirmation]
      @user.password = params[:user][:password]
      flash[:success] = "Password has been updated"
      redirect_to @user
    else
      flash.now[:error] = "Passwords don't match"
      render :reset_password
    end
  else
    flash.now[:error] = "Current password is incorrect"
    render :reset_password
  end
end 
```

这样，每个动作都有其语义角色。

顺便说一句，我希望您使用 bcrypt 之类的东西来存储密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:35:56.767

想通了......但它看起来有点难看：

```
def update
  @user = User.find(params[:id])
  if params[:old_password]
    if @user.authenticate(params[:old_password])
      if params[:user][:password] == params[:user][:password_confirmation]
        @user.update_attributes(password: params[:user][:password])
        flash[:success] = "Password has been updated"
        redirect_to @user
      else
        flash.now[:error] = "Passwords don't match"
        render :reset_password
      end
    else
      flash.now[:error] = "Current password is incorrect"
      render :reset_password
    end
  elsif params[:user][:name].blank?
    flash[:error] = "Name can't be blank"
    render :edit
  else
    @user.update_attribute(:name, params[:user][:name])
    flash[:success] = "User name updated"
    redirect_to @user
  end
end 
```

# javascript - 如何在 iOS 上的 Phonegap 中获取 Parse.com PUSH 注册设备令牌

> ID：15181749
> 
> 赞同：1
> 
> 时间：2013-03-03T02:15:16.137
> 
> 标签：javascript, cordova, push-notification, parse-platform, devicetoken

我正在使用 Parse PUSH api 将 PUSH 通知集成到我基于 Phonegap 构建的 iOS 应用程序中。我试图弄清楚如何访问通过解析返回的设备令牌。是否有捷径可寻？已经有这个插件了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:22:35.663

你可以使用这个插件：[https](https://github.com/mgcrea/cordova-push-notification) ://github.com/mgcrea/cordova-push-notification ，它对我有用，我正在使用Phonegap + Parse +这个插件。

# excel - MS Excel 中的外连接

> ID：15181759
> 
> 赞同：4
> 
> 时间：2013-03-03T02:16:43.837
> 
> 标签：excel, outer-join

你知道如何用外连接连接两个表吗？知道在 SQL 中执行此操作，但我现在需要 Excel。

我在一个列中有一个所有员工的列表我有一个每个员工的任务表。我想创建一个函数，该函数将用缺少的员工填充此表。

表 1 - 所有员工名单

```
费尔南多
赫克托
薇薇安
伊万

```

表 2 - 实际任务列表

```
费尔南多，任务 A，5 小时
Vivian，任务 B，8 小时

```

我想达到的结果

```
费尔南多，任务 A，5 小时
Vivian，任务 B，8 小时
赫克托, , 0 小时
伊万, , 0 小时

```

非常感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-04T01:05:39.487

如果您使用 ADO，Excel 中确实存在左连接之类的东西。

转到 VBA 编辑器 (Alt-F11) 并添加对“Microsoft ActiveX 数据对象 2.8 库”的引用（工具 > 引用）。创建一个新的普通模块（插入>模块）并添加以下代码：

```
Option Explicit

Sub get_employees()

Dim cn As ADODB.Connection
Set cn = New ADODB.Connection

' This is the Excel 97-2003 connection string. It should also work with
' Excel 2007 onwards worksheets as long as they have less than 65536
' rows
'With cn
'    .Provider = "Microsoft.Jet.OLEDB.4.0"
'    .ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & _
'        "Extended Properties=Excel 8.0;"
'    .Open
'End With

With cn
    .Provider = "Microsoft.ACE.OLEDB.12.0"
    .ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & _
        "Extended Properties=""Excel 12.0 Macro;IMEX=1;HDR=YES"";"
    .Open
End With

Dim rs As ADODB.Recordset
Set rs = New ADODB.Recordset

rs.Open "SELECT * FROM [Sheet1$] LEFT JOIN [Sheet2$] ON [Sheet1$].[EMPLOYEE] = " & _
    "[Sheet2$].[EMPLOYEE]", cn

Dim fld As ADODB.Field
Dim i As Integer

With ThisWorkbook.Worksheets("Sheet3")
    .UsedRange.ClearContents
    i = 0
    For Each fld In rs.Fields
        i = i + 1
        .Cells(1, i).Value = fld.Name
    Next fld
    .Cells(2, 1).CopyFromRecordset rs
    .UsedRange.Columns.AutoFit 
End With

rs.Close
cn.Close

End Sub 
```

保存工作簿，然后运行代码，您应该会在 Sheet3 上获得一个左连接列表。您会看到 Employee 列是重复的，但是您可以通过适当地修改 SELECT 子句来对其进行排序。您还将有空白单元格，而不是没有匹配的 0 小时

**编辑：**我在代码注释中留下了 Excel 97-2003 连接字符串的详细信息，但已将代码更改为使用 Excel 2007 及更高版本的连接字符串。我还添加了代码来输出字​​段名称并在输出记录集后自动调整列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:50:02.243

简单的方法（也许是唯一的方法？）将是中间单元：

在“结果”工作表中：

```
 A,         B,            C              D
fernando, vlookup(...), vlookup(...), =if(ISNA(B2),"<default-1>"), =if(ISNA(B2),"deafult2) 
```

然后隐藏列 C 和 B

**编辑：**

实际上有一些接近的东西：**Pivot Table**。您可以以非引用**单元格**保持空白的方式组织数据。

但这是与公式不同的解决方案 - 它可能不适合，取决于您的使用情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-10T16:52:10.037

This method does copy and pasting, filtering, and sorting to accomplish an outer join in Excel and good for just one offs. The idea is to use a VLOOKUP to find all matching records from the left to the right tables and right to the left tables. [Adding another record to table 2 to show outer join]

Table 1

```
Fernando
Hector
Vivian
Ivan 
```

Table 2

```
Fernando, task A, 5 hours
Vivian, task B, 8 hours
Thomas, task A, 5 hours 
```

Copy both tables into one table where table 1 will take up the first left columns and first rows and table 2 will take up the last right columns and last rows (The headers should be row 1 for both tables). Create a VLOOKUP function for the next two columns to find matching keys from the left to right tables and right to left tables.

Table 3

```
Name     Name     Task    Hours   Match 1                  Match 2
Fernando                          =VLOOKUP(A2,B:B,1,FALSE) =VLOOKUP(B2,A:A,1,FALSE)
Hector                            =VLOOKUP(A3,B:B,1,FALSE) =VLOOKUP(B3,A:A,1,FALSE)
Vivian                            =VLOOKUP(A4,B:B,1,FALSE) =VLOOKUP(B4,A:A,1,FALSE)
Ivan                              =VLOOKUP(A5,B:B,1,FALSE) =VLOOKUP(B5,A:A,1,FALSE)
         Fernando task A  5 hours =VLOOKUP(A6,B:B,1,FALSE) =VLOOKUP(B6,A:A,1,FALSE)
         Vivian   task B  8 hours =VLOOKUP(A7,B:B,1,FALSE) =VLOOKUP(B7,A:A,1,FALSE)
         Thomas   task B  8 hours =VLOOKUP(A8,B:B,1,FALSE) =VLOOKUP(B8,A:A,1,FALSE) 
```

Table 3 Result

```
Name     Name     Task    Hours   Match 1  Match 2
Fernando                          Fernando N/A
Hector                            N/A      N/A
Vivian                            Vivian   N/A
Ivan                              N/A      N/A
         Fernando task A  5 hours N/A      Fernando
         Vivian   task B  8 hours N/A      Vivian
         Thomas   task B  8 hours N/A      N/A 
```

**NOTE**: For large data sets, the next step will take a very long time because of the VLOOKUP calculation that happens. Copy and paste over columns for match 1 and match 2 columns as values so that VLOOKUP doesn't recalculate during filtering.

Filter on Match 1 and Match 2 to only see all N/A results. Copy the main data to another sheet with headers.

```
Name     Name     Task    Hours   Match 1  Match 2
Hector                            N/A      N/A
Ivan                              N/A      N/A
         Thomas   task B  8 hours N/A      N/A 
```

Filter on Match 1 and Match 2 to not see N/A results. Sort on keys for both, so that when copy and pasting everything matches. Copy and paste Table 1 data into the new sheet below previously pasted data first. Then copy and paste Table 2 data to the right of the Table 1 data that was just pasted.

```
Name     Name     Task    Hours   Match 1  Match 2
Fernando                          Fernando N/A
Vivian                            Vivian   N/A
         Fernando task A  5 hours N/A      Fernando
         Vivian   task B  8 hours N/A      Vivian 
```

The result is below and you can delete, sort, whatever to the outer joined data.

```
Name     Name     Task    Hours
Hector
Ivan
         Thomas   task B  8 hours
Fernando Fernando task A  5 hours
Vivian   Vivian   task B  8 hours 
```

# c++ - Visual Studio 2012 中的 OpenGL 未解析的外部符号 _gluLookAt@72 和 _gluPerspective@32

> ID：15181762
> 
> 赞同：3
> 
> 时间：2013-03-03T02:17:06.507
> 
> 标签：c++, visual-c++, opengl, visual-studio-2012

我在 Visual Studio 2012 中创建了一个空的 Win32 应用程序。之后，我通过`Configuration Properties -> Linker -> Input -> Additional Dependencies`. 我已经导入了库，但链接器似乎告诉我它找不到某些 GLU 方法，正如标题所示，_gluLookAt 和 _gluPerspctive。我会错过什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T02:24:05.837

将 glu32.lib 添加到“附加依赖项”列表中。

# c++ - 将结构传递给函数

> ID：15181765
> 
> 赞同：39
> 
> 时间：2013-03-03T02:17:17.090
> 
> 标签：c++, struct

我无法理解如何将结构（通过引用）传递给函数，以便可以填充结构的成员函数。到目前为止，我已经写过：

```
bool data(struct *sampleData)
{

}

int main(int argc, char *argv[]) {

      struct sampleData {

        int N;
        int M;
        string sample_name;
        string speaker;
     };
         data(sampleData);

} 
```

我得到的错误是：

> C++ 需要所有声明的类型说明符 bool data(const &testStruct)

我已经尝试过这里解释的一些示例：[Simple way to pass temporary struct by value in C++?](https://stackoverflow.com/questions/2212354/simple-way-to-pass-temporary-struct-by-value-in-c)

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-03-03T02:27:23.050

首先，您的 data() 函数的签名：

```
bool data(struct *sampleData) 
```

不可能工作，因为参数缺少名称。当您声明要实际访问的函数参数时，它需要一个名称。因此，将其更改为：

```
bool data(struct sampleData *samples) 
```

但在 C++ 中，您实际上根本不需要使用`struct`。所以这可以简单地变成：

```
bool data(sampleData *samples) 
```

* * *

其次，此时`sampleData`data() 不知道该结构。所以你应该在此之前声明它：

```
struct sampleData {
    int N;
    int M;
    string sample_name;
    string speaker;
};

bool data(sampleData *samples)
{
    samples->N = 10;
    samples->M = 20;
    // etc.
} 
```

最后，您需要创建一个类型为 的变量`sampleData`。例如，在您的 main() 函数中：

```
int main(int argc, char *argv[]) {
    sampleData samples;
    data(&samples);
} 
```

请注意，您需要将变量的地址传递给 data() 函数，因为它接受一个指针。

但是，请注意，在 C++ 中，您可以通过引用直接传递参数，而无需使用指针“模拟”它。你可以这样做：

```
// Note that the argument is taken by reference (the "&" in front
// of the argument name.)
bool data(sampleData &samples)
{
    samples.N = 10;
    samples.M = 20;
    // etc.
}

int main(int argc, char *argv[]) {
    sampleData samples;

    // No need to pass a pointer here, since data() takes the
    // passed argument by reference.
    data(samples);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-07T00:27:59.000

通过引用将结构传递给函数：简单:)

```
#define maxn 1000

struct solotion
{
    int sol[maxn];
    int arry_h[maxn];
    int cat[maxn];
    int scor[maxn];

};

void inser(solotion &come){
    come.sol[0]=2;
}

void initial(solotion &come){
    for(int i=0;i<maxn;i++)
        come.sol[i]=0;
}

int main()
{
    solotion sol1;
    inser(sol1);
    solotion sol2;
    initial(sol2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-03T02:21:47.510

```
bool data(sampleData *data)
{
} 
```

您需要告诉方法您正在使用哪种类型的结构。在这种情况下，sampleData。

*注意：在这种情况下，您需要在方法之前定义结构以使其被识别。*

例子：

```
struct sampleData
{
   int N;
   int M;
   // ...
};

bool data(struct *sampleData)
{

}

int main(int argc, char *argv[]) {

      sampleData sd;
      data(&sd);

} 
```

*注2：我是一个C家伙。可能有一种更 c++ish 的方式来做到这一点。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-23T01:04:34.110

可以在函数参数中构造一个结构：

```
function({ .variable = PUT_DATA_HERE }); 
```

# delphi - 如何定义适用于本地过程的过程类型？

> ID：15181766
> 
> 赞同：4
> 
> 时间：2013-03-03T02:17:20.107
> 
> 标签：delphi, delphi-xe2, subroutine

我正在自定义线程中创建请求队列，`TMyThread`并且在定义可用于子例程的过程类型时遇到了困难。我有一个代表请求的记录，一个相应的记录指针，以及一个在记录中使用*并*使用记录指针的过程类型......

```
type
  PRequest = ^TRequest;

  TResponseProc = procedure(Sender: TMyThread; Request: PRequest);

  TRequest = record
    Request: String;
    Proc: TResponseProc;
    Response: String;
  end; 
```

问题是，当我实现一个名为`ResponseProc`并尝试分配`ResponseProc`给 a的子例程时`TResponseProc`，它不起作用，并且 IDE 返回此错误消息：

```
[DCC Error] MyProject.dpr(42): E2094 Local procedure/function 'ResponseProc' assigned to procedure variable 
```

如何定义此过程类型`TResponse`并将其与子例程一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T08:07:16.650

记录和程序声明很好。错误消息表明您正在使用*本地过程*，它是在另一个函数的范围内定义的。您不能使用指向此类函数的指针，因为它们需要额外的工作才能调用，而这无法用普通函数指针表示。（编译器不允许创建指向调用者不知道如何使用的函数的指针。）

解决方案是将您的函数移到您定义它的任何其他函数*之外*。如果这很难做到，因为内部函数使用来自外部函数的变量，那么您将不得不找出其他方法将它们的值传递给另一个函数，例如通过将它们作为参数传递，也许使它们成为该请求记录的附加成员。

另一种选择是使用*过程引用*，然后将本地过程定义为*匿名过程*。它可以访问局部变量，虽然只有 Delphi 和 C++ Builder 知道如何调用它，所以如果您需要外部 API 兼容性，它不是一个选项。

# java - 如何将随机数添加到数组中

> ID：15181768
> 
> 赞同：2
> 
> 时间：2013-03-03T02:17:47.193
> 
> 标签：java, arrays, indexoutofboundsexception

这是课堂作业。我一直在阅读和搜索，一切都在告诉我使用 java.util.Random ，我了解它是如何工作的，并希望我可以使用它。但我的作业特别告诉我使用 (int) (Math.random * number) 我很难看到在哪里应用到我的数组中。我所看到的一切都是从java中提取的随机数。它是生成 100 个随机整数 0-9 以及它们出现的次数。如果有人可以提供帮助？我的错误是 - “main” java.lang.array index out of bounds exclude:10 中的异常，显然我的代码也有问题。

```
public class NumberOfTimes{

  public static void main(String[] args){

    int rand = (int)(Math.random() * 10);
    int[] counts = new int [10];

    for(int i = 0; i < 100; i++){

      counts[i]++;
    }//end for

    System.out.println("number\t" + "occurence ");

    for (int num = 0; num < counts.length; num++){

      System.out.println(num + "\t" + counts[num]);
    }//end for

  }//end main

}//end NumberOfTimes 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:33:39.327

做这个改变

```
int[] counts = new int[100];
for (int i = 0; i < counts.length; i++) {
    counts[i] = (int) (Math.random() * 10);
}// end for 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:31:54.580

您的数组只能容纳 10 个项目，并且在您的循环中您访问的项目超过 10 个。可以通过两种方式解决。

*   要么增加你的数组长度

    ```
    int[] counts = new int [100]; 
    ```

*   或者减少你在 for 循环中的计数。

    ```
    for(int i = 0; i < 10; i++){ 
    ```

# macos - 如何关闭隐藏的 iCal 日历中的所有闹钟？

> ID：15181772
> 
> 赞同：1
> 
> 时间：2013-03-03T02:20:06.950
> 
> 标签：macos, applescript, icalendar

我想我会在这里问，看看是否有人可以提供任何东西，你们是任何事情的更快回答者。默认情况下，当您在 iCal (Snow Leopard) 中隐藏日历时（单击复选框），默认情况下，每个事件仍处于武装状态。就像隐藏事件的警报在那个时候仍然会激活。只要日历被隐藏，我希望它们关闭。是否有一种applescript方式来实现这一点？

现在我正在尝试一种新的反懒惰工作流程，我提前为自己安排任务并通过提醒每个事件来强迫自己切换到它们（而不是说“我会稍后再做”）激活一个程序，将我锁定在我的计算机之外 3 分钟（超时）。到目前为止，它运行良好，但能够快速打开和关闭警报真的很有帮助。

谢谢！

编辑：我知道您可以右键单击并转到关闭该日历的所有警报的对话框，但是很容易忘记这样做。

编辑编辑：当我们这样做的时候，有没有办法一次移动多个事件？你会认为这是给定的，但它只是在你拖动的地方创建了一个新事件。

# sql-server-2008 - 从存储过程（SQL Server 和 C# ADO.NET）获取动态 sql 的返回值？

> ID：15181776
> 
> 赞同：1
> 
> 时间：2013-03-03T02:21:11.327
> 
> 标签：sql-server-2008, stored-procedures, ado.net, sp-executesql

我创建了一个存储过程来从动态 sql 中获取返回值。我得到以下异常：

> String[1]：Size 属性的大小为 0 无效。

我的过程：

```
CREATE proc [dbo].[Review_Get_PrePopValue](@sqlQuery nvarchar(500), @display nvarchar(200) OUTPUT)
as

EXEC sp_executesql @sqlQuery,   
    @display OUTPUT 
```

我的代码：

```
public string GetAnswerValue(string contentSQL, string parameter, string parameterValue)
{
    string sqlstatement = contentSQL.Replace(parameter, parameterValue);

    using (var conn = new SqlConnection(_connectionString))
    {
        string prePopValue;
        SqlCommand comm = new SqlCommand();
        comm.Connection = conn;
        comm.CommandType = CommandType.StoredProcedure;
        comm.CommandText = "Review_Get_PrePopValue";

        comm.Parameters.Add(new SqlParameter("@sqlQuery", SqlDbType.NVarChar)).Value = sqlstatement; 
        comm.Parameters.Add(new SqlParameter
        {
            Direction = ParameterDirection.Output,
            ParameterName = "@display",
            SqlDbType = SqlDbType.NVarChar
        });

        conn.Open();
        comm.ExecuteNonQuery();

        prePopValue = comm.Parameters["@display"].Value.ToString();
        return prePopValue;
    }
} 
```

我的 sql 字符串：

```
Select @display = Grant_Number From GMIS_Grants where grant_id=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:41:15.143

方向 = ParameterDirection.Output，ParameterName = "@display"，大小 = 200，SqlDbType = SqlDbType.NVarChar

需要设置 nvarchar 的大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:32:32.487

来自 MSDN

对于双向和输出参数以及返回值，您必须设置 Size 的值。

此外，将其添加到您的 SP 的末尾。

```
SELECT @display; 
```

# java - VBO - 立方体偏移

> ID：15181777
> 
> 赞同：0
> 
> 时间：2013-03-03T02:21:14.353
> 
> 标签：java, opengl, lwjgl, vbo, cube

我有一些代码应该创建一个新的 VBO 并用我使用偏移量而不是`glTranslate`. 我有一个 cubeVBO 类，它创建一个带有偏移量的新立方体，但由于某种原因，该代码只被调用一次。剔除似乎也无法正常工作，因为当我就在它们面前时，立方体的面会消失。这是课程：

```
public class CubeVBO {

public int vboVHandle;
int offset = Block.size;
int count = 0;
public FloatBuffer vertices;

public CubeVBO(float x, float z, float y){
    vertices = BufferUtils.createFloatBuffer(3 * 4 * 6);
    vertices.put(new float[] {
            x + offset, y + offset, z, 
            x - offset, y + offset, z,
            x - offset, y + offset, z - Block.size, 
            x + offset, y + offset, z - Block.size, 
            x + offset, y - offset, z - Block.size, 
            x - offset, y - offset, z - Block.size, 
            x - offset, y - offset, z, 
            x + offset, y - offset, z, 
            x + offset, y + offset, z - Block.size, 
            x - offset, y + offset, z - Block.size, 
            x - offset, y - offset, z - Block.size, 
            x + offset, y - offset, z - Block.size, 
            x + offset, y - offset, z, 
            x - offset, y - offset, z, 
            x - offset, y + offset, z, 
            x + offset, y + offset, z, 
            x - offset, y + offset, z - Block.size, 
            x - offset, y + offset, z, 
            x - offset, y - offset, z, 
            x - offset, y - offset, z - Block.size, 
            x + offset, y + offset, z, 
            x + offset, y + offset, z - Block.size, 
            x + offset, y - offset,
            z - Block.size, x + offset, y - offset, z });
    vertices.flip();

    vboVHandle = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboVHandle);
    glBufferData(GL_ARRAY_BUFFER, vertices, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
} 
```

我在这个类中使用它：

```
public class BaseChunk {

// x - left/right y - up/down y - forward/backward

VBO vbo;
CubeVBO vertexVBO;

public static final int CHUNK_X = 16;
public static final int CHUNK_Y = 16;
public static final int CHUNK_Z = 16;

public boolean rebuild = false;

FloatBuffer blockPositionData;
FloatBuffer vertexColorData;

private Block[][][] blocks;
private int vboBlockData;

public BaseChunk() {

    blocks = new Block[CHUNK_X][CHUNK_Z][CHUNK_Y];
    blockPositionData = BufferUtils.createFloatBuffer((CHUNK_X * CHUNK_Z * CHUNK_Y) * 6 * 12);

    for (int xx = 0; xx < CHUNK_X; xx++) {
        for (int zz = 0; zz < CHUNK_Z; zz++) {
            for (int yy = 0; yy < CHUNK_Y; yy++) {
                blocks[xx][zz][yy] = Block.Grass;
            }
        }
    }
}

public void rebuildChunk(int id) {
    if (rebuild) {

    }
}

public void makeChunk(){
    for(int x = 0; x <= 16; x++){
        for(int z = 0; z <= 16; z++){
            for(int y = 0; y <= 16; y++){
                vertexVBO = new CubeVBO((float) 16 + x, (float) 16 + z, (float) 16 + y);
            }
        }
    }

    vboBlockData = glGenBuffers();
    glBindBuffer(GL_ARRAY_BUFFER, vboBlockData);
    glBufferData(GL_ARRAY_BUFFER, blockPositionData, GL_STATIC_DRAW);
    glBindBuffer(GL_ARRAY_BUFFER, 0);
}

public void render() {
    vbo = new VBO();
    glBindBuffer(GL_ARRAY_BUFFER, vertexVBO.vboVHandle);
    glVertexPointer(3, GL_FLOAT, 0, 0L);

    glBindBuffer(GL_ARRAY_BUFFER, vbo.vboCHandle);
    glColorPointer(3, GL_FLOAT, 0, 0);

    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_COLOR_ARRAY);
                glPushMatrix();
                //glTranslatef(0, 0, 0);
                glDrawArrays(GL_QUADS, 0, 24);
                glPopMatrix();
    glDisableClientState(GL_VERTEX_ARRAY);
    glDisableClientState(GL_COLOR_ARRAY);
} 
```

我的偏移量不正确吗？还是我的 VBO 代码不正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T06:42:39.040

我认为您的问题之一是在 makeChunk() 中创建了许多 CubeVBO，但是您将它们全部分配给同一个变量，因此当方法结束时，vertexVBO 仅引用您创建的最后一个。在 render() 中，您正在绑定和绘制最终的 CubeVBO。

您需要创建一个包含所有立方体顶点的大型 VBO，然后绑定并绘制它。不要忘记更新 glDrawArrays 的计数参数。

# ruby-on-rails - 在不同的控制器中创建表单

> ID：15181782
> 
> 赞同：1
> 
> 时间：2013-03-03T02:22:15.170
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有一个电影控制器和一个搜索控制器。在我的搜索控制器中，我可以从 IMDB 搜索电影。我正在尝试制作一个表单，我可以在其中单击将电影添加到库并尝试在我的电影表中创建一个新条目。

在我的搜索控制器中，我有

```
 def new
        @search = Search.new
        @movie = Movie.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @search }
    end
  end 
```

在我的搜索索引视图中，我有

```
<%= simple_form_for(@movie) do |f| %>
<%= f.input :title, :as => :hidden, :input_html => { :value => "Skyfall" } %>
<%= f.input :year, :as => :hidden, :input_html => { :value => "2012" } %>
<%= f.input :description, :as => :hidden, :input_html => { :value => "James Bond" } %>
<%= f.association :genres, include_blank: false, :as => :hidden, :input_html => { :value => "some value" } %>
<%= f.button :submit, class: "btn btn-primary" %> 
```

我在 Searches#index 中得到一个 NoMethodError，然后是 NilClass:Class 的未定义方法“model_name”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:26:23.400

你的代码没问题，我的意思是，你在控制器上的 @movie 中放置了一个新对象，这完全没问题。

只需确保在 Search#index 中添加对象的新实例，如下所示：

```
def index
  @movie = Movie.new
end 
```

您收到错误是因为在此行上评估视图表单时：

```
<%= simple_form_for(@movie) do |f| %> 
```

@movie 是 nil，所以 model_name 不是对象 nil 的方法，你会得到异常。

# facebook - 获取 CURL/Browser Graph API 的访问令牌

> ID：15181786
> 
> 赞同：3
> 
> 时间：2013-03-03T02:23:32.367
> 
> 标签：facebook, facebook-graph-api

我正在尝试从 Facebook 获取消息和附件，我正在使用：

```
https://api.facebook.com/method/message.getThreadsInFolder?access_token=AT&folder_id=0 
```

获取线程列表并：

```
https://graph.facebook.com/fql?access_token=AT&q=QUERY 
```

对于我的查询。

但是，每次，我都会复制 Graph API Explorer 生成的访问令牌，因为我似乎无法以编程方式获取它：

```
https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=ID&client_secret=SECRET 
```

给我一个访问令牌，但它不起作用。如果我尝试将它与上面的 URL 一起使用，我会得到：

```
"error_msg":"A session key is required for calling this method" 
```

对于第二个：

```
 "message": "Invalid OAuth access token.",
  "type": "OAuthException",
  "code": 190 
```

Facebook文档真的不清楚。

我不想使用登录流程，有没有办法像移动应用程序那样使用存储的凭据以编程方式登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T18:19:10.120

您需要一个未使用的登录流程（[https://developers.facebook.com/docs/facebook-login/](https://developers.facebook.com/docs/facebook-login/)）。无法以编程方式获取用户访问令牌。这违背了手动用户交互的意义。用户必须明确授予对您的应用程序的访问权限。

# linux - svn-update 版本与提交版本不匹配

> ID：15181788
> 
> 赞同：0
> 
> 时间：2013-03-03T02:23:49.830
> 
> 标签：linux, svn

我在用我的合作伙伴的代码更新我的代码时遇到了这个问题。我的伙伴上次提交是在修订版 36 上，但是当我更新我的工作目录时，svn 说版本跳到了 38。我不知道为什么会这样。当我更新时，我让一个有冲突的文件接受我的版本。在我更新我的之前，我的搭档也将一些东西复制到了她自己的 svn 中。其中哪一部分导致版本号不匹配？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:35:13.367

Subversion 中的 Revison 是存储库的全局属性，每个子树都可以并且可能拥有小于 repo 的 HEAD-revision 的修订

检查`svn info`工作副本的状态。作为我的一个仓库的主干的例子

```
...
Revision: 37
...
Last Changed Rev: 36 
```

ie - **repo**中的最新版本是 37，但在树干子树中 - 只有 36

# asp.net-mvc-4 - MVC 4.0 中的 Paypal IPN 和 PDT

> ID：15181789
> 
> 赞同：2
> 
> 时间：2013-03-03T02:24:04.057
> 
> 标签：asp.net-mvc-4, paypal

我是 MVC 的初学者，我正在尝试使用以下链接进行贝宝付款流程

[http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html](http://www.arunrana.net/2012/01/paypal-integration-in-mvc3-and-razor.html)

请指导我如何实施 Paypal IPN 和 PDT

以及如何从我想保存在数据库中的 Paypal 获取成功和交易 ID

提前致谢

* * *

"

```
public class CheckoutController : Controller
{
    CartContext _CartCotext = new CartContext();
    CartItemContext _CartItemContext = new CartItemContext();

    Tbl_OrderContext _OrderContext = new Tbl_OrderContext();
    OrderDetailContext _OrderDetailContext = new OrderDetailContext();
    ProductContext _ProductContext = new ProductContext();

    const string PromoCode = "FREE";

    [HttpPost]
    public ActionResult AddressAndPayment(CheckoutViewModel values)
    {

        var cart = ShoppingCart.GetCart(this.HttpContext);
        var _CartItems = Session["CartItems"];
        var list = (List<Cart>)Session["CartItems"];

        values.CartItems = list;

        var order = new CheckoutViewModel();
        order.CartItems = list;
        TryUpdateModel(order);

        {
            try
            {
                if (order.Tbl_Order == null)
                {
                    return View(order);
                }
                else
                {
                    order.Tbl_Order.Username = User.Identity.Name;
                    order.Tbl_Order.OrderDate = DateTime.Now;
                    order.Tbl_Order.CartTotal = order.CartTotal;
                    Session["carttotal"] = order.CartTotal;
                    order.Tbl_Order.Status = "Pending";

                    //Save Order

                    _OrderContext.OrderEntries.Add(order.Tbl_Order);
                    _OrderContext.SaveChanges();

                    //Process the order
                    string username = User.Identity.Name;
                    ShoppingCart obj = new ShoppingCart();
                    int i = obj.CreateOrder(order.Tbl_Order, order.CartItems, username);

                    //return RedirectToAction("Complete",
                    //   new { id = order.Tbl_Order.OrderId });
                    return RedirectToAction("PosttoPaypalShow");
                }

            }
            catch
            {
                //Invalid - redisplay with errors
                return View(order);
            }
        }

    }

    [HttpGet]
    public ActionResult PosttoPaypalShow()
    {

        SportsStore.Models.Paypal payPal = new Paypal();
        payPal.cmd = "_xclick";
        payPal.business = ConfigurationManager.AppSettings["BusinessAccount"];
        bool useSendBox = Convert.ToBoolean(ConfigurationManager.AppSettings["useSendbox"]);
        if (useSendBox)
        {
            ViewBag.actionURL = "https://www.sandbox.paypal.com/cgi-bin/webscr";
        }
        else
        {
            ViewBag.actionURL = "https://www.paypal.com/cgi-bin/webscr";
        }
        payPal.cancel_return = System.Configuration.ConfigurationManager.AppSettings["CancelUrl"];
        payPal.@return = ConfigurationManager.AppSettings["ReturnURL"];
        payPal.notify_url = ConfigurationManager.AppSettings["NotifyURL"];
        payPal.currency_code = ConfigurationManager.AppSettings["currencycode"];
        //payPal.item_Name = ProductName;
        payPal.item_Name = "test1";
        payPal.Descriptions = "tes2";
        payPal.amount = String.Format("{0:0.##}", Session["carttotal"]); //Convert.ToString(Session["carttotal"].ToString("0.00"));
        return View(payPal);
    }
    public ActionResult PaypalAddressAndPayment()
    {

        Tbl_Order order = new Tbl_Order();
        var cart = ShoppingCart.GetCart(this.HttpContext);

        // Set up the ViewModel
        var viewModel = new CheckoutViewModel
        {
            CartItems = cart.GetCartItems(),
            CartTotal = cart.GetTotal(),
            Tbl_Order = order
        };
        Session["CartItems"] = viewModel.CartItems;
        return View(viewModel);
        //return View(order);
    }
    string GetPayPalResponse(Dictionary<string, string> formVals, bool useSandbox)
    {

        string paypalUrl = useSandbox ? "https://www.sandbox.paypal.com/cgi-bin/webscr"
            : "https://www.paypal.com/cgi-bin/webscr";

        HttpWebRequest req = (HttpWebRequest)WebRequest.Create(paypalUrl);

        // Set values for the request back
        req.Method = "POST";
        req.ContentType = "application/x-www-form-urlencoded";

        byte[] param = Request.BinaryRead(Request.ContentLength);
        string strRequest = Encoding.ASCII.GetString(param);

        StringBuilder sb = new StringBuilder();
        sb.Append(strRequest);

        foreach (string key in formVals.Keys)
        {
            sb.AppendFormat("&{0}={1}", key, formVals[key]);
        }
        strRequest += sb.ToString();
        req.ContentLength = strRequest.Length;

        //for proxy
        //WebProxy proxy = new WebProxy(new Uri("http://urlort#");
        //req.Proxy = proxy;
        //Send the request to PayPal and get the response
        string response = "";
        using (StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII))
        {

            streamOut.Write(strRequest);
            streamOut.Close();
            using (StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream()))
            {
                response = streamIn.ReadToEnd();
            }
        }

        return response;
    }

    public ActionResult IPN()
    {

        var formVals = new Dictionary<string, string>();
        formVals.Add("cmd", "_notify-validate");

        string response = GetPayPalResponse(formVals, true);

        if (response == "VERIFIED")
        {

            string transactionID = Request["txn_id"];
            string sAmountPaid = Request["mc_gross"];
            string orderID = Request["custom"];
            string pay_Status = Request["payment_status"];

            //_logger.Info("IPN Verified for order " + orderID);

            //validate the order
            Decimal amountPaid = 0;
            Decimal.TryParse(sAmountPaid, out amountPaid);

            //Order order = _orderService.GetOrder(new Guid(orderID));
            Tbl_Order order = null;
            //check the amount paid

            if (AmountPaidIsValid(order, amountPaid))
            {

                Tbl_Order add = new Tbl_Order();
                add.Username = User.Identity.Name;
                //add.FirstName = Request["first_name"];
                //add.LastName = Request["last_name"];
                //add.Email = Request["payer_email"];
                //add.Address = Request["address_street"];
                //add.City = Request["address_city"];
                //add.State = Request["address_state"];
                //add.Country = Request["address_country"];
                //add.PostalCode = Request["address_zip"];
                add.TransactionId = transactionID;
                add.Status = pay_Status;
                add.CartTotal = Convert.ToDecimal(sAmountPaid);

                //process it
                try
                {
                    _OrderContext.OrderEntries.Add(add);
                    _OrderContext.SaveChanges();
                    //_pipeline.AcceptPalPayment(order, transactionID, amountPaid);
                    //_logger.Info("IPN Order successfully transacted: " + orderID);
                    //return RedirectToAction("Receipt", "Order", new { id = order.ID });
                }
                catch
                {
                    //HandleProcessingError(order, x);
                    return View();
                }
            }
            else
            {
                //let fail - this is the IPN so there is no viewer
            }
        }

        return View();
    }
    bool AmountPaidIsValid(Tbl_Order order, decimal amountPaid)
    {

        //pull the order
        bool result = true;

        if (order != null)
        {
            if (order.CartTotal > amountPaid)
            {
                //_logger.Warn("Invalid order amount to PDT/IPN: " + order.ID + "; Actual: " + amountPaid.ToString("C") + "; Should be: " + order.Total.ToString("C") + "user IP is " + Request.UserHostAddress);
                result = false;
            }
        }
        else
        {
            //_logger.Warn("Invalid order ID passed to PDT/IPN; user IP is " + Request.UserHostAddress);
        }
        return result;

    }

}

public class Address
{
    public string FirstName { set; get; }
    public string LastName { set; get; }
    public string Email { set; get; }
    public string Street1 { set; get; }
    public string City { set; get; }
    public string StateOrProvince { set; get; }
    public string Country { set; get; }
    public string Zip { set; get; }

}" 
```

并按照 web.config 文件配置

```
 <add key="BusinessAccount" value="anilcs_1361585097_biz@gmail.com" />
    <add key="useSendbox" value="true" />
    <add key="currencycode" value="USD" />
    <add key="ReturnURL" value="http://localhost:49424/Checkout/IPN" />
    <add key="CancelUrl" value="http://localhost:49424/SportsStore/CancelFromPaypal" />
    <add key="NotifyURL" value="http://localhost:49424/SportsStore/NotifyFromPaypal" />
    <!--test MarchnatAccountId-->
    <add key =" MerchantAccountID" value="RCERFF5KTC784"/> 
```

这是我的推车

```
@model SportsStore.Models.Paypal
@{
    Layout = null;    
}
<html>
<head>
<title>Index</title>
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
</head>

</html>
<form id="frm" action="@ViewBag.Actionurl">

@Html.HiddenFor(Model => Model.cmd)
@Html.HiddenFor(Model => Model.business)
@Html.HiddenFor(Model => Model.no_shipping)
@Html.HiddenFor(Model => Model.@return)
@Html.HiddenFor(Model => Model.cancel_return)
@Html.HiddenFor(Model => Model.notify_url)
@Html.HiddenFor(Model => Model.currency_code)
@Html.HiddenFor(Model => Model.item_Name)
@Html.HiddenFor(Model => Model.amount)

</form>
<p style="text-align: center">
    <h4>
        Redirecting to Paypal</h4>
</p>
<script type="text/javascript" language="javascript">
    $(this.document).ready(function () {
        var frm = $("form");
        frm.submit();
    });   
</script> 
```

之后我将填写运输详细信息并将我的页面重定向到贝宝

{

```
@model SportsStore.Models.CheckoutViewModel
@{
    ViewBag.Title = "Address And Payment";
}
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
@using (Html.BeginForm("AddressAndPayment", "Checkout"))
{
    <table>
        <thead>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.OrderId, "OrderId")
                </th>
                <td>
                    @Html.TextBoxFor(m => m.Tbl_Order.OrderId, new { disabled = "disabled", @readonly = "readonly" })
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.OrderDate, "OrderDate")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.OrderDate, "OrderDate")
                    @Html.EditorFor(m => m.CartItems, "CartItems")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.FirstName, "First Name")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.FirstName, "First Name")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.LastName, "Last Name")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.LastName, "Last Name")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.Address, "Address")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.Address, "Address")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.City, "City")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.City, "City")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.State, "State")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.State, "State")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.PostalCode, "PostalCode")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.PostalCode, "PostalCode")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.Country, "Country")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.Country, "Country")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.Phone, "Phone")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.Phone, "Phone")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.Tbl_Order.Email, "Email")
                </th>
                <td>
                    @Html.EditorFor(m => m.Tbl_Order.Email, "Email")
                </td>
            </tr>
            <tr>
                <th>
                    @Html.LabelFor(m => m.CartTotal, "Total")
                </th>
                <td>
                    @*   @Html.EditorFor(m => m.CartTotal, "Total" ) *@ @*  @Html.TextBoxFor(m => m.CartTotal, new { disabled = "disabled", @readonly = "readonly" })*@
                    @* @Html.DisplayTextFor(m => m.CartTotal)*@
                    @Html.TextBoxFor(m => m.CartTotal, new { @readonly = "readonly" })
                </td>
            </tr>
            <tr>
                <td>
                </td>
                Continoue with paypal
                <td>
                </td>
            </tr>
            <tr>
                <td>
                    @* @Html.ActionLink("Sure to payment", "PosttoPaypalShow", "Checkout")*@
                    <input type="submit" value="Submit" />
                </td>
            </tr>
        </thead>
    </table>

} 
```

1个问题-这是我做的正确方法吗？

2 问题 - 如何从 Paypal 返回自定义值

3 付款后还要查看 web.config 文件，我应该叫 PIN 吗？

请指导我......以及如何进行付款流程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T21:50:21.070

我最近也在寻找这方面的信息。paypal 网站上有示例代码，但我发现它非常简洁，很难将其放入应用程序的上下文中。我能找到的最好的是 Rob Conery 的视频和样本。

首先，看视频。它被称为“ASP.NET MVC Storefront 第 1 部分：架构讨论和概述”。目前可以在**[这里](http://www.asp.net/mvc/videos/mvc-1/aspnet-mvc-storefront/aspnet-mvc-storefront-part-22-restructuring-rerouting-and-paypal)**找到。跳到 15:21 进入 paypal 部分。

然后下载源代码。您正在寻找 'ASP.NET MVC Storefront 示例代码，目前可在**[此处](http://mvcsamples.codeplex.com/releases/view/18861)**找到。

提取代码后，搜索`IPN()`IPN 方法和`PDT()`PDT 方法。

# c - 释放指向指针的指针

> ID：15181793
> 
> 赞同：1
> 
> 时间：2013-03-03T02:25:13.623
> 
> 标签：c, pointers, dynamic, memory-leaks, free

我有一个包含 char* 的数组 user_input。现在，该数组的大小将在运行时由以下代码确定。

```
char** user_input;
user_input = (char**)malloc(get_size()); 
```

现在，user_input 中的每个索引都将包含一个指向从函数 parse_index(int) 接收到的动态分配的字符数组的指针。

```
for(int i=0;i<SIZE;i++){
   user_input[i]=parse_index[i];       //parse_index makes a call to malloc
} 
```

现在，当我完成后，我通过以下代码释放堆上的所有内存。

```
//to deallocate the character arrays
for(int i=0;i<SIZE;i++){
   free(user_input[i])      
}
//to deallocate the char*
free(user_input) 
```

但是第二次调用导致程序崩溃..有人可以解释我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:30:39.807

这个问题现在解决了。我调用了一个错误的函数，它没有将大小乘以 sizeof(char*)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:50:30.720

这看起来很好，只要`get_size()`返回一个合理的值，循环上升到`SIZE`用户输入的大小（或更小）（并且两者都相同！），并且`parse_index[i]`包含足够的`malloc(3)`ed 内存而不是`free(3)`在别处编辑。

我们需要*更多*的程序来诊断问题。它甚至可能是在你的数据结构上乱涂乱画的东西......简化程序以在这里显示它很好，*只要简化版本以同样的方式崩溃*。

使用最大警告进行编译，找出每个警告并修复它（了解编译器认为错误的地方，不要只是关闭它）或确保编译器感到困惑或处理不完整的数据。在调试器下运行你的程序，让它崩溃。找出哪里/为什么/如何。[在valgrind](http://valgrind.org)或类似程序下运行程序以诊断可能的内存处理不一致。

顺便说一句， cast 是一个坏主意`malloc(3)`，它不是必需的，并且可能会掩盖错误。

# c# - 如何浏览主机上的所有 WCF 服务？

> ID：15181804
> 
> 赞同：3
> 
> 时间：2013-03-03T02:27:03.920
> 
> 标签：c#, wcf

我想使用 WCF 创建一个客户端和一个服务器程序。它们之间的通信将是 TCP。客户端将是一个 Windows 窗体，可以在其中插入主机名，然后它将列出该机器上运行的所有服务器。

有没有办法做到这一点？即浏览机器主机中的所有WCF服务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T05:37:56.030

WCF 发现 - [http://msdn.microsoft.com/en-us/library/dd456782.aspx](http://msdn.microsoft.com/en-us/library/dd456782.aspx)

Windows Communication Foundation (WCF) 支持使用 WS-Discovery 协议以可互操作的方式在运行时发现服务。WCF 服务可以使用多播消息或发现代理服务器向网络宣布它们的可用性。**客户端应用程序可以搜索网络**或发现代理服务器以查找满足一组标准的服务。

如何：以编程方式向 WCF 服务和客户端添加可发现性 - [http://msdn.microsoft.com/en-us/library/dd456783.aspx](http://msdn.microsoft.com/en-us/library/dd456783.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:58:31.020

没有自动的方法可以做到这一点。多年来出现了各种目录服务协议，但它们从未真正流行起来。总体上取得最大成功的一个被称为[Multicast DNS 或 zeroconf](http://en.wikipedia.org/wiki/Zero_configuration_networking)。但是 Windows API 不能很好地支持它。Apple 以 Bonjour 的名义支持它，Linux 以 Avahi 的名义支持它。

最接近的 Windows 等价物是 UPnP SSDP，但在发现了一些广为人知的安全漏洞后，微软基本上放弃了对它的支持。有一个 IPv6 粗略的等价物，称为 PNRP（对等名称解析协议），但它也基本上不再使用。

因此，实际上您的选择是找到适用于 Windows 的 mDns 库或编写自己的库。

# ios6 - 如何使用 BluetoothManager 正确连接配件？

> ID：15181808
> 
> 赞同：2
> 
> 时间：2013-03-03T02:27:57.747
> 
> 标签：ios6, bluetooth, iphone-privateapi, accessory, ios-bluetooth

我试图在我的应用程序中连接一个配件，而不在“设置->蓝牙”中进行设置。

我已按照此链接中的步骤操作：[http](http://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.UTKqLKVvdha) ://www.pocketmagic.net/2012/07/bluetooth-and-ios-use-bluetooth-in-your-iphone-apps/#.UTKqLKVvdha它运行良好，直到我得到当我尝试连接到附件时，消息“失败并出现错误 305”。

这是我的步骤列表：

1.  获取`BluetoothManager`服务的处理程序和实例：

    ```
    btManager = [BluetoothManager sharedInstance]; 
    ```

2.  注册通知、蓝牙无线电更改（开/关）和发现新设备：

    ```
    // setup bluetooth notifications
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(deviceDiscovered:)
     name:@"BluetoothDeviceDiscoveredNotification"
     object:nil];

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(bluetoothAvailabilityChanged:)
     name:@"BluetoothAvailabilityChangedNotification"
     object:nil]; 
    ```

    在这里，应用程序可以发现附件

    ```
    - (void)deviceDiscovered:(NSNotification *) notification 
    ```

3.  `BluetoothDevice`使用类似的方法连接到配件`[btdev connect]`。在这里我收到消息

    > “连接到设备“附件”F0:B4:79:0B:68:45 上的服务 0x00001000 失败，出现错误 305”。

我已经尝试过其他方法，例如`[acceptSSP]`，`[connectWithServices]`但它没有帮助。我必须先配对吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:05:20.247

大约一周以来，我一直收到“失败并出现错误 305”。我终于通过在扫描服务之前将 BluetoothManager 设置为可连接来解决它。我没有在任何其他论坛中看到对此设置的引用。希望能帮助到你。

```
[btManager setConnectable:YES];
[btManager scanForServices:0xFFFFFFFF]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-02T15:58:21.907

我希望这会对您有所帮助，您可以尝试使用服务标签 0x00002000

```
BluetoothManager *btManager =  [[self bluetoothScanner] bluetoothManager];
[btManager setDevicePairingEnabled:YES];
[btManager connectDevice:bluetoothDevice withServices:0x00002000]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T13:29:14.113

接受配对请求：

```
 [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(bluetoothPairingUserNumericComparision:)
 name:@"BluetoothPairingUserNumericComparisionNotification"
 object:nil];

[[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(bluetoothPairingPINResultSuccess:)
 name:@"BluetoothPairingPINResultSuccessNotification"
 object:nil]; 
```

然后

```
 - (void)bluetoothPairingUserNumericComparision:(NSNotification *)notification {

    NSLog(@"NOTIFICATION:bluetoothPairingUserNumericComparision: called. BT State: %d", [btManager enabled]);
    NSLog(@"NOTIFICATION: %@", notification);

    NSDictionary *dict = notification.object;

    BluetoothDevice *device = dict[@"device"];
    NSNumber *value = dict[@"value"];

    NSLog(@"device: %@ value: %@", device, value);

    [btManager acceptSSP:0 forDevice:device];
}

- (void)bluetoothPairingPINResultSuccess:(NSNotification *)notification {

    NSLog(@"NOTIFICATION: bluetoothPairingPINResultSuccess called.");
    NSLog(@"NOTIFICATION: %@", notification);
    NSLog(@"paired devices: %@", [btManager pairedDevices]);

} 
```

现在设备已配对。但我被困在这里，因为我无法连接或交换数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-13T19:58:29.617

请注意，为了编译它，您必须将以下行添加到 BluetoothManager 类定义中：

`-(void)acceptSSP:(NSInteger)errorCodeShouldBeZero forDevice:(id)device;`

# javascript - Javascript "".charCodeAt(0) 停留在 55357？

> ID：15181809
> 
> 赞同：17
> 
> 时间：2013-03-03T02:27:57.397
> 
> 标签：javascript, unicode

以下似乎不正确

```
"".charCodeAt(0);  // returns 55357 in both Firefox and Chrome 
```

那是一个名为 ROCKET (U+1F680) 的 Unicode 字符，十进制应该是 128640。

这是针对正在编写的 unicode 应用程序。似乎大多数但不是来自 unicode 6 的所有字符都停留在 55357。

我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-03T02:40:29.780

JavaScript 使用 UTF-16 编码；详情请看[这篇文章](http://mathiasbynens.be/notes/javascript-encoding)：

> BMP 之外的字符，例如 U+1D306 用于中心 () 的四元组，只能使用两个 16 位代码单元以 UTF-16 编码：0xD834 0xDF06。这称为代理对。请注意，代理对仅表示单个字符。
> 
> 代理对的第一个代码单元始终在 0xD800 到 0xDBFF 的范围内，称为高代理或前导代理。
> 
> 代理对的第二个代码单元始终在 0xDC00 到 0xDFFF 的范围内，称为低代理或跟踪代理。

您可以像这样解码代理对：

```
codePoint = (text.charCodeAt(0) - 0xD800) * 0x400 + text.charCodeAt(1) - 0xDC00 + 0x10000 
```

完整的代码可以在[Mozilla 的 charCodeAt 文档中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)找到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T02:36:33.697

试过这个：

```
> "".charCodeAt(0);
55357

> "".charCodeAt(1);
56960 
```

关于 SO 的相关问题：

*   [在 JavaScript 中表达 UTF-16 Unicode 字符](https://stackoverflow.com/questions/7126384/expressing-utf-16-unicode-characters-in-javascript)
*   [javascript中charcode中charcode的Unicode字符> 0xFFFF](https://stackoverflow.com/questions/5446492/unicode-characters-from-charcode-in-javascript-for-charcodes-0xffff)

您可能也想看看这个：

*   [让它以更高的价值工作](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/fromCharCode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T02:34:27.270

我认为这是因为他们向您返回了该字符的第一个代码单元 UTF-16 编码。我不确定你能做多少，因为它们返回一个 16 位值——我可能会尝试从前两个代码单元手动解码字符，然后用 UTF-32 编码，这似乎是你想要什么。

# android - 首选项不会显示在数据/数据中，我也无法使用代码访问它们

> ID：15181810
> 
> 赞同：1
> 
> 时间：2013-03-03T02:28:22.673
> 
> 标签：android, sharedpreferences

我正在尝试创建一个游戏。现在对于我需要保留的一些数据（音乐、效果、背景），我想使用`preferences`.

我创建`xml`名为的新文件`preferences.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >
    <EditTextPreference android:key="music" android:title="Some title" android:defaultValue="true"/>

</PreferenceScreen> 
```

然后我转到该位置（具有 root 权限）并且只有 lib 文件夹 `data/data/my.app.folder/`。没有`shared_prefs`文件夹。

当我尝试访问首选项时，它为空。我尝试了`getSharedPreferences()`和 `PreferenceManager.getDefaultSharedPreferences()`。可能是什么原因？我也没有活动`preferences`，我想手动管理它们。

我怎样才能克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:38:13.880

要使用共享首选项，您必须先创建它。像这样：

```
SharedPreferences prefs = getApplicationContext().getSharedPreferences(
      "music", Context.MODE_PRIVATE); 
```

第一次在其中创建首选项：

```
 final String BACKGROUND_DEFAULT_VALUE = "on";
    final String DEFAULT_TITILE = "";
    final String TITILE_KEY = "title";
    final String BACKGROUND_KEY = "background_key";
    Editor editor= prefs.edit();
    editor.putString(TITILE_KEY, DEFAULT_TITILE);
    editor.putString(BACKGROUND_KEY, BACKGROUND_DEFAULT_VALUE);
    editor.commit(); 
```

比在其中编辑/保存首选项：

```
 Editor editor= prefs.edit();
    editor.putString(TITILE_KEY, "new title");
    editor.putString(BACKGROUND_KEY, "new background value i.e on/off");
    editor.commit(); 
```

比阅读偏好：

```
String background_value = prefs.getString(BACKGROUND_KEY); 
String title_value = prefs.getString(TITILE_KEY ); 
```

您可以在位置看到您的共享首选项文件，它会在创建后出现。

```
/data/data/<packagename>/shared_prefs/music.xml 
```

有关更多详细信息和帮助，android sdk 的示例目录包含一个检索和检索共享首选项的示例。它位于：

```
<android-sdk-home>/samples/android-<platformversion>/ApiDemos directory 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T02:45:12.853

有两种不同类型的与首选​​项相关的 xml 文件。您正在显示的是表示首选项层次结构（屏幕表示）的 xml 资源文件。第二个是包含实际键值对的文件。创建第一个不会创建第二个。您实际上需要使用 PreferenceActivity （或 Fragment 等效项或您自己的显示方法 - 据我了解 - 您打算这样做）来显示文件，或者您必须在代码中创建首选项。

# codeigniter - 未从 js 文件加载的图像

> ID：15181813
> 
> 赞同：1
> 
> 时间：2013-03-03T02:28:36.183
> 
> 标签：codeigniter

我有一个 javascript 插件，可以从 js 文件本身加载一些图像。我像这样包含了js文件`echo '<script src="'.base_url()."js/$js_file.js".'"></script>`，js文件正确加载但图像未加载。当我从萤火虫中检查图像路径时，我发现相对于控制器的路径`http://localhost/mysite/controller/images/nicEditorIcons.gif`是`images`保存我的图像的文件夹（它在根文件夹中）。这里有什么问题？以及如何让codeigniter正确加载资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:39:19.070

您应该在任何调用资源的路径之前添加一个斜杠“/”，以相对于根站点，首先本地化您的 javascript 插件，我认为您可以在其中添加路径到我认为看起来像 `images/nicEditorIcons.gif`将其更改为的图像的路径看起来与`/images/nicEditorIcons.gif`我的意思是相对于您的根路径`http://localhost/mysite`，所以它看起来像`http://localhost/mysite/images/nickEditorIcons.gif`而不是您显示的 URL，希望它有所帮助。

# android - logcat 安卓解读

> ID：15181815
> 
> 赞同：0
> 
> 时间：2013-03-03T02:29:18.147
> 
> 标签：android, logcat

我有这个 logcat 错误，我需要一些帮助来进一步理解这一点

```
03-03 09:46:32.729: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 70K, 52% free 2630K/5379K, external 1625K/2137K, paused 86ms
03-03 09:47:22.309: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 13K, 51% free 2661K/5379K, external 8109K/8532K, paused 114ms
03-03 09:47:35.579: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 11K, 51% free 2689K/5379K, external 11777K/12032K, paused 144ms
03-03 09:47:36.409: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 2K, 50% free 2694K/5379K, external 15403K/15700K, paused 94ms
03-03 09:47:43.379: D/dalvikvm(333): GC_EXTERNAL_ALLOC freed 8K, 50% free 2714K/5379K, external 16570K/18035K, paused 133ms
03-03 09:47:44.499: I/Database(333): sqlite returned: error code = 1, msg = AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY
03-03 09:47:44.499: E/Database(333): Failure 1 (AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY) on 0x2e8610 when preparing 'create table BEEFTAPA (_idINTEGER PRIMARY KEY AUTOINCREMENT, Content text not null);'.
03-03 09:47:44.519: D/AndroidRuntime(333): Shutting down VM
03-03 09:47:44.519: W/dalvikvm(333): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-03 09:47:44.569: E/AndroidRuntime(333): FATAL EXCEPTION: main
03-03 09:47:44.569: E/AndroidRuntime(333): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.filipinocuisine/com.example.filipinocuisine.menucategory1a1}: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: create table BEEFTAPA (_idINTEGER PRIMARY KEY AUTOINCREMENT, Content text not null);
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.os.Looper.loop(Looper.java:123)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-03 09:47:44.569: E/AndroidRuntime(333):  at java.lang.reflect.Method.invokeNative(Native Method)
03-03 09:47:44.569: E/AndroidRuntime(333):  at java.lang.reflect.Method.invoke(Method.java:507)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-03 09:47:44.569: E/AndroidRuntime(333):  at dalvik.system.NativeStart.main(Native Method)
03-03 09:47:44.569: E/AndroidRuntime(333): Caused by: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: create table BEEFTAPA (_idINTEGER PRIMARY KEY AUTOINCREMENT, Content text not null);
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1763)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.example.filipinocuisine.SQLiteAdapter$SQLiteHelper.onCreate(SQLiteAdapter.java:83)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:126)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.example.filipinocuisine.SQLiteAdapter.openToWrite(SQLiteAdapter.java:40)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.example.filipinocuisine.menucategory1a1.onCreate(menucategory1a1.java:22)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-03 09:47:44.569: E/AndroidRuntime(333):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-03 09:47:44.569: E/AndroidRuntime(333):  ... 11 more
03-03 09:47:47.229: I/Process(333): Sending signal. PID: 333 SIG: 9
03-03 09:47:48.939: D/dalvikvm(356): GC_EXTERNAL_ALLOC freed 71K, 52% free 2630K/5379K, external 1625K/2137K, paused 105ms
03-03 09:51:01.088: D/dalvikvm(356): GC_EXTERNAL_ALLOC freed 20K, 51% free 2662K/5379K, external 8109K/8532K, paused 108ms
03-03 09:51:04.738: D/dalvikvm(356): GC_EXTERNAL_ALLOC freed 11K, 50% free 2690K/5379K, external 11777K/12032K, paused 149ms
03-03 09:51:05.548: D/dalvikvm(356): GC_EXTERNAL_ALLOC freed 2K, 50% free 2694K/5379K, external 15403K/15700K, paused 89ms
03-03 09:58:54.388: D/dalvikvm(356): GC_EXPLICIT freed 6K, 50% free 2702K/5379K, external 16570K/18035K, paused 259ms 
```

从这些错误中我只能理解ff：

```
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.example.filipinocuisine.SQLiteAdapter.openToWrite(SQLiteAdapter.java:40)
03-03 09:47:44.569: E/AndroidRuntime(333):  at com.example.filipinocuisine.menucategory1a1.onCreate(menucategory1a1.java:22) 
```

它包含以下代码：

在我的 menucategory1a1 中，它包含 ff：

```
 mySQLiteAdapter.openToWrite(); 
```

在我的适配器中：

```
 public SQLiteAdapter openToWrite() throws android.database.SQLException {
       sqLiteHelper = new SQLiteHelper(context, MYDATABASE_NAME, null, MYDATABASE_VERSION);
       sqLiteDatabase = sqLiteHelper.getWritableDatabase();
       return this; 
```

我的代码可能`t find what`有问题，提前感谢您的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:33:39.317

错误就在这里

```
_idINTEGER PRIMARY KEY AUTOINCREMENT 
```

它应该是

```
_id INTEGER PRIMARY KEY AUTOINCREMENT 
```

你忘记了和之间`_id`的空间`INTEGER`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T02:33:47.733

打钱的地方在这里：

```
03-03 09:47:44.569: E/AndroidRuntime(333): Caused by: android.database.sqlite.SQLiteException: AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY: create table BEEFTAPA (_idINTEGER PRIMARY KEY AUTOINCREMENT, Content text not null); 
```

具体来说：

```
(_idINTEGER PRIMARY KEY AUTOINCREMENT 
```

我猜想在您的帮助代码中，您在and`" "`之间缺少一个空格 ( ) 。`_id``INTEGER`

# macos - kCGDesktopWindowLevel 的 NSWindow 事件

> ID：15181816
> 
> 赞同：0
> 
> 时间：2013-03-03T02:29:21.877
> 
> 标签：macos, cocoa, mouseevent, nswindow

我正在尝试制作一个替换墙纸图像的交互式桌面应用程序。听起来不可能有一个`NSWindow`在那个级别的事件。根据我能找到的所有文档，一个窗口需要在-598级别才能允许视图接受此类事件，但桌面级别是-1000。有没有办法通过轻量级 API 克服这个限制（如果有限制的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:57:59.237

解决了。我好尴尬！

我打印了 kCGDesktopWindowLevel 的值，结果是 -2147483623。当我将窗口的级别设置为 -1000 时，它开始完美运行。

# javascript - 在 jquery 中的分页列表上进行实时搜索

> ID：15181818
> 
> 赞同：-3
> 
> 时间：2013-03-03T02:30:04.253
> 
> 标签：javascript, jquery, html

如何在 jquery 中使用分页列表实现实时搜索？我在一个 DIV 中有一个朋友列表，但是一次加载 15 个朋友（无限滚动）。我想在顶部提供一个文本框，以便他们可以过滤搜索。但是，如果他们搜索尚未加载的内容怎么办？我必须采取的基本方法是什么？例如，假设 John 和 Jack 是目前唯一加载的，并且用户输入“sa”，我如何调出以“sa”开头的名字？

谢谢。

```
<div id="friends">
   <input id="search" type="text" /> 
   <ul>
      <li>John</li>
      <li>Jack</li>
       .
       .
       .
   </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:06:12.110

DataTables 内置了所有这些东西。但是，它确实要求您的数据位于格式正确的表中。

[http://www.datatables.net/release-datatables/examples/basic_init/zero_config.html](http://www.datatables.net/release-datatables/examples/basic_init/zero_config.html)

# javascript - 检查移动 Safari 是否可以处理特定协议

> ID：15181819
> 
> 赞同：0
> 
> 时间：2013-03-03T02:30:05.773
> 
> 标签：javascript, ios, mobile-safari

我为此搜索了很多，但找不到答案。我需要在 Mobile Safari 上检查是否可以处理某个协议（这样可以确定设备上是否安装了某个应用程序）。

这可以以某种方式完成。如果您打开移动 twitter（并且您已安装该应用程序），它将显示一个进入该应用程序的按钮。Instagram 也是如此：如果您在浏览器上打开照片，并且您拥有该应用程序，它会显示一个按钮“在应用程序中打开”，否则它会显示一个链接“免费下载 Instagram！” （这与智能横幅不同）。

有谁知道这是怎么做到的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T02:43:14.230

尝试这样的事情：

```
(function () {
    setTimeout(function () {
        console.log('protocol is not available')
        window.location = 'http://somewhere-else';
    }, 1000);

    window.open('your_protocol://', '_self');
}()) 
```

这里还讨论了许多其他方法：[是否可以为 iPhone 应用程序（如 YouTube 和地图）注册基于 http+域的 URL 方案？](https://stackoverflow.com/questions/1108693/is-it-possible-to-register-a-httpdomain-based-url-scheme-for-iphone-apps-like)

# java - 如何将 mysql 并入 Jboss 快速入门教程

> ID：15181824
> 
> 赞同：1
> 
> 时间：2013-03-03T02:31:31.303
> 
> 标签：java, mysql, jakarta-ee, jboss7.x

我正在尝试在 JBoss 项目中设置一个 mysql 数据库。我收到有关 JBAS014775 的错误：新的缺失/不满足的依赖项。我已经阅读了无数关于 SO 的帖子，但我仍然不确定为什么会出现这些问题。我已将控制台中的错误日志粘贴到下方

模块文件如下所示：

```
<?xml version = "1.0" encoding = "UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.mysql">
<resources>
<resource-root path="mysql-connector-java-5.1.23-bin.jar"/>
</resources>
<dependencies>
<module name="javax.api"/>
<module name="javax.transaction.api"/>
<module name="javax.servlet.api" optional="true"/>
</dependencies>
</module> 
```

persistence.xml 如下所示：

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="primary">
        <!-- If you are running in a production environment, add a managed 
            data source, this example data source is just for development and testing! -->
        <!-- The datasource is deployed as WEB-INF/greeter-quickstart-ds.xml, 
            you can find it in the source at src/main/webapp/WEB-INF/greeter-quickstart-ds.xml -->
        <jta-data-source>java:jboss/datasources/GreeterQuickstartDS</jta-data-source>
        <properties>
            <!-- Properties for Hibernate -->
                    <property name="hibernate.show_sql" value="true"/>
         <property name="hibernate.hbm2ddl.auto" value="update"/>
         <property name="hibernate.use_sql_comments" value="true"/>
         <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        </properties>
    </persistence-unit>
</persistence> 
```

greeter-quickstart-ds.xml 如下所示

```
<datasources xmlns="http://www.jboss.org/ironjacamar/schema"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.jboss.org/ironjacamar/schema http://docs.jboss.org/ironjacamar/schema/datasources_1_0.xsd">
    <!-- The datasource is bound into JNDI at this location. We reference 
        this in META-INF/persistence.xml -->
    <datasource jndi-name="java:jboss/datasources/GreeterQuickstartDS"
        pool-name="greeter-quickstart" enabled="true" use-java-context="true">
        <connection-url>jdbc:mysql://localhost:3306/jboss</connection-url>
        <driver>mysql</driver>
        <security>
            <user-name>root</user-name>
            <password>root</password>
        </security>
    </datasource>
</datasources> 
```

Standalone.xml 如下所示：

```
 <datasources>
                <datasource jndi-name="java:jboss/datasources/ExampleDS" pool-name="ExampleDS" enabled="true" use-java-context="true">
                    <connection-url>jdbc:h2:mem:test;DB_CLOSE_DELAY=-1</connection-url>
                    <driver>h2</driver>
                    <security>
                        <user-name>sa</user-name>
                        <password>sa</password>
                    </security>
                </datasource>
                 <datasource jndi-name="java:jboss/datasources/MySqlDS" pool-name="MySqlDS" enabled="true" use-java-context="true" use-ccm="true">
                    <connection-url>jdbc:mysql://localhost:3306/jboss</connection-url>
                    <driver>mysql</driver>
                    <security>
                        <user-name>root</user-name>
                        <password>root</password>
                    </security>
                    <statement>
                        <prepared-statement-cache-size>100</prepared-statement-cache-size>
                        <share-prepared-statements>true</share-prepared-statements>
                    </statement>
                </datasource>
                <drivers>
                <driver name="h2" module="com.h2database.h2">
                    <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                </driver>
                <driver name="mysql" module="com.mysql">
                    <xa-datasource-class>com.mysql.jdbc.jdbc2.optional.MySqlXADataDource</xa-datasource-class>
                </driver>
            </drivers>
            </datasources>

02:04:44,660 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)
02:04:44,706 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)
02:04:45,369 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-3) JBAS010400: Bound data source [java:jboss/datasources/MySqlDS]
02:04:45,371 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-8) JBAS015012: Started FileSystemDeploymentService for directory /opt/jboss-as-7.1.0.Final/standalone/deployments
02:04:45,373 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-5) JBAS010400: Bound data source [java:jboss/datasources/ExampleDS]
02:04:45,377 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) JBAS015014: Re-attempting failed deployment greeter.war

02:04:45,476 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874: JBoss AS 7.1.0.Final "Thunder" started in 2540ms - Started 138 of 210 services (70 services are passive or on-demand)
02:04:45,491 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-2) JBAS015876: Starting deployment of "greeter.war"
02:04:45,816 INFO  [org.jboss.as.jpa] (MSC service thread 1-7) JBAS011401: Read persistence.xml for primary
02:04:45,900 INFO  [org.jboss.weld.deployer] (MSC service thread 1-4) JBAS016002: Processing weld deployment greeter.war

02:04:46,332 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 2) JBAS015870: Deploy of deployment "greeter.war" was rolled back with failure message {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.data-source.jboss/datasources/GreeterQuickstartDSjboss.jdbc-driver.mysql-connector-java-5_1_23-bin_jarMissing[jboss.data-source.jboss/datasources/GreeterQuickstartDSjboss.jdbc-driver.mysql-connector-java-5_1_23-bin_jar]"]}
02:04:46,348 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-5) JBAS010409: Unbound data source [jboss/datasources/GreeterQuickstartDS]
02:04:46,354 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) JBAS015877: Stopped deployment greeter.war in 22ms
02:04:46,355 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 2) JBAS014774: Service status report
JBAS014775:    New missing/unsatisfied dependencies:
      service jboss.jdbc-driver.mysql-connector-java-5_1_23-bin_jar (missing) dependents: [service jboss.data-source.jboss/datasources/GreeterQuickstartDS] 

├── google
│   └── guava
│       └── main
│           ├── guava-10.0.1.jar
│           ├── guava-10.0.1.jar.index
│           └── module.xml
├── h2database
│   └── h2
│       └── main
│           ├── h2-1.3.161.jar
│           ├── h2-1.3.161.jar.index
│           └── module.xml
├── mysql
│   └── main
│       ├── module.xml
│       ├── mysql-connector-java-5.1.23-bin.jar
│       └── mysql-connector-java-5.1.23-bin.jar.index
└── sun
    ├── jsf-impl
    │   ├── 1.2
    │   │   ├── jsf-impl-1.2_15-jbossorg-2.jar
    │   │   └── module.xml
    │   └── main
    │       ├── jsf-impl-2.1.5-jbossorg-1.jar
    │       ├── jsf-impl-2.1.5-jbossorg-1.jar.index
    │       └── module.xml
    └── xml
        ├── bind
        │   └── main
        │       ├── jaxb-impl-2.2.4.jar
        │       ├── jaxb-impl-2.2.4.jar.index
        │       ├── jaxb-xjc-2.2.4.jar
        │       ├── jaxb-xjc-2.2.4.jar.index
        │       └── module.xml
        └── messaging
            └── saaj
                └── main
                    ├── module.xml
                    ├── saaj-impl-1.3.16-jbossorg-1.jar
                    └── saaj-impl-1.3.16-jbossorg-1.jar.index

02:04:46,356 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014771: Services with missing/unavailable dependencies" => ["jboss.data-source.jboss/datasources/GreeterQuickstartDSjboss.jdbc-driver.mysql-connector-java-5_1_23-bin_jarMissing[jboss.data-source.jboss/datasources/GreeterQuickstartDSjboss.jdbc-driver.mysql-connector-java-5_1_23-bin_jar]"]}}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:41:10.350

您只需提供驱动程序的唯一名称，`<driver>com.mysql</driver>`而不是整个 jar 名称。在您的情况下，您有`<driver>mysql</driver>`一个定义，另一个定义是整个 jar 名称。

有关更多信息，请参阅[此处](https://community.jboss.org/wiki/DataSourceConfigurationInAS7)以了解如何设置数据源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T19:31:01.103

我现在已经能够连接到 mysql 数据库了。最初，我通过手动调整standalone.xml 文件添加了一个数据源。我建议你不要这样做。相反，您应该使用 JBoss 提供的管理 Web 控制台来添加数据源

# jquery - 在通过 Ajax 请求提交之前使用 jQuery 进行表单验证

> ID：15181829
> 
> 赞同：4
> 
> 时间：2013-03-03T02:32:18.513
> 
> 标签：jquery, ajax, validation

我试图让我的表单在使用 Ajax 请求将表单提交到我的 php 脚本之前进行验证。我查看了 stackoverflow 并没有找到有效的方法。

我有 3 个输入和一个提交按钮：

```
<input type="text" name="full-name" id="full-name" value="" placeholder="Full Name" />
<input type="text" name="email" id="email" value="" placeholder="Email" />
<textarea name="message" id="message" value="" rows="8" placeholder="Message"></textarea>
<input type="submit" id="contact-submit" class="contact-submit" value="Submit">
<div id="messageResponse" class="center" style="display:none;"></div>

$(document).ready(function() {

    function validator(){
        return $('form').validate();
    }

    $('form').on('submit', function(e) {
        e.preventDefault();

        $.ajax({
            dataType: 'html',
            type: 'post',
            url: 'mail.php',
            data: $('#contact-form').serialize(),
            beforeSubmit: validator,
            success: function(responseData) {
                $('#contact-submit').remove();
                $('#messageResponse').fadeIn(1000);
                $('#messageResponse').html(responseData);
            },
            error: function(responseData){
                console.log('Ajax request not recieved!');
            }
        });

        // resets fields
        $('input#full-name').val("");
        $('input#email').val("");
        $('textarea#message').val("");
    })
}); 
```

我应该为此使用插件吗？我想要的只是名称、电子邮件和消息，以使用红色边框颜色进行验证。这让我很头疼，明天我将与客户会面以完成该网站。如果我找不到可行的解决方案，我不会提问。

我也尝试过使用它：[jQuery Form Validator Plugin](https://github.com/victorjonsson/jQuery-Form-Validator)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T05:46:04.780

您`$('form').validate()`指的是[jQuery Validate 插件](http://docs.jquery.com/Plugins/Validation)吗？

`submit`如果是这样，当 jQuery Validate 插件已经内置了提交事件处理程序回调函数时，使用处理程序绝对没有意义**，而这正是您*应该*放置 ajax 的地方。**

[根据 Validate plugin 的文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`submitHandler`回调函数是：

> “表单有效时处理实际提交的回调。获取表单作为唯一参数。替换默认提交。在验证后**通过 Ajax 提交表单的正确位置**。”

试试这个代码，假设你的`ajax`函数是正确的：

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        // your rules and options,
        submitHandler: function (form) {
            $.ajax({
                dataType: 'html',
                type: 'post',
                url: 'mail.php',
                data: $(form).serialize(),
                success: function (responseData) {
                    $('#contact-submit').remove();
                    $('#messageResponse').fadeIn(1000);
                    $('#messageResponse').html(responseData);
                },
                error: function (responseData) {
                    console.log('Ajax request not recieved!');
                }
            });
            // resets fields
            $('input#full-name').val("");
            $('input#email').val("");
            $('textarea#message').val("");

            return false; // blocks redirect after submission via ajax
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/kUX2N/](http://jsfiddle.net/kUX2N/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-03T02:38:21.870

beforeSubmit 是 malsup ajaxForm 插件的一个选项，而不是 jQuery ajax。仅当 validator() 返回 true 时才执行 ajax。

```
$('form').on('submit', function(e) {
    e.preventDefault();
    if (validator()){
        $.ajax({...});
    }
}); 
```

**在旁边：**

而不是使用多行要求 jQuery 多次选择同一事物，您可以使用链。

```
$('#messageResponse').fadeIn(1000).html(responseData); 
```

同样，对几个元素做同样的事情

```
$('#full-name, #email, #message').val(""); 
```

# arduino - Arduino - 如何在没有 IDE 的情况下获取串行数据

> ID：15181839
> 
> 赞同：0
> 
> 时间：2013-03-03T02:34:03.243
> 
> 标签：arduino, monitor

我正在为脑分流构建一个原型滴灌监测器。它将监控滴水并报告我需要的任何数据。问题是我只是在构建设备。一个对 Arduinos 或代码一无所知的人正在使用它。有没有一种方法或程序可以显示和/或将数据保存到文件中，这样人们就可以将 Arduino 插入而不打扰 IDE 或任何代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-18T23:57:18.480

## 用于获取串行数据的 Bash One Liner

（linux、mac os x 或 cygwin）

**以下行将数据、时间戳和位置转换为 csv 格式**

```
cat /dev/cu.usbmodem1421 | awk '{ for (i=0; i<NF; i++) printf $i + system("date +,%s")}' 
```

## 样本输出

```
data,timestamp
9695,1390087651
9696,1390087652 
```

# 更多示例

* * *

**将数据流式传输到文件中**

```
cat /dev/cu.usbmodem1421 | awk '{ for (i=0; i<NF; i++) printf $i + system("date +,%s")}' >> sensor_readings.dat 
```

* * *

**您可以在流式传输到文件时进行监控（也可以发送电子邮件、推文等，任何命令行工具）**

```
cat /dev/cu.usbmodem1421 | awk '{ for (i=0; i<NF; i++) if($i == 9001) {system("say ITS OVER 9000\!")} printf $i + system("date +,%s")}' >> sensor_readings.dat 
```

* * *

**使用说明：**确保**将 cu.usbmodem1421 替换**为您的调制解调器（“cu”显然很重要，由于某种原因，它不适用于“tty.usbmodem”）

* * *

有关如何将其与 arduino 代码一起使用的示例，请查看此 github 存储库：

[https://github.com/gskielian/Arduino-DataLogging/tree/master/Bash-One-Liner](https://github.com/gskielian/Arduino-DataLogging/tree/master/Bash-One-Liner)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T13:40:45.930

如评论中所述，根据预算和其他标准，有很多方法可以做到这一点。例如，您不能确定这是否只需要（简单）实时监控或（稍微复杂一点）是否需要将数据记录到文件中以供以后查看。独立日志记录是另一个（相当复杂的）选项（例如，Arduino 未连接到主机）。

这是一个[很好的教程和](http://www.tigoe.com/pcomp/code/arduinowiring/1043/)不同方法的概述。

在用户友好的 GUI 方面，人们可以在几个小时内使用[Processing](http://www.processing.org/)构建一个简单的应用程序，该应用程序将显示实时数据，如果需要，可以写入文本文件。

网络上有许多 Arduino 数据记录项目。这是[一个](http://www.mauroalfieri.it/en/elettronica/data-logging-con-arduino.html)和许多其他人的[搜索结果](https://www.google.com/search?q=arduino%20logging)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-06T03:44:01.650

您可以使用处理，因为 Arduino iDE 是基于它的，所以这对您来说非常有用，因此您可以轻松迁移。您可以制作一个处理应用程序，通过串行接收来自 Arduino 的数据。还有一件很棒的事情是，您可以制作一个在 Java 中运行的独立应用程序，因此它不依赖于操作系统并且不需要安装。www.processing.org

# asp.net - 检查 IsClientScriptIncludeRegistered 的好处有多大？

> ID：15181845
> 
> 赞同：1
> 
> 时间：2013-03-03T02:35:10.927
> 
> 标签：asp.net, .net

`IsClientScriptIncludeRegistered`之前检查的好处有多大`RegisterClientScriptInclude`？

从[文档中的示例](http://msdn.microsoft.com/en-us/library/kx145dw2.aspx)：

```
' Check to see if the include script is already registered.
If (Not cs.IsClientScriptIncludeRegistered(cstype, csname)) Then    
    cs.RegisterClientScriptInclude(cstype, csname, ResolveClientUrl(csurl))
End If 
```

其中指出：

> 请注意，如果删除了检查现有客户端脚本包含的逻辑，则在呈现的页面中仍然不会有重复的客户端脚本，因为 RegisterClientScriptInclude 方法会检查重复项。**检查的好处是减少不必要的计算。**

我想知道突出显示的句子。什么不必要的计算？

在我看来，情况正好相反。使用`IsClientScriptIncludeRegistered`之前`RegisterClientScriptInclude`应该/将检查注册的脚本两次（因此增加了不必要的计算而不是减少）。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:05:38.927

如果脚本全部准备好注册，则在字典中进行简单检查，这`IsClientScriptIncludeRegistered`是一种非常快速的检查，无需太多代码。

```
public bool IsClientScriptIncludeRegistered(Type type, string key)
{
    if (type == null)
    {
        throw new ArgumentNullException("type");
    }
    return ((this._registeredClientScriptBlocks != null) && 
     this._registeredClientScriptBlocks.Contains(
        CreateScriptIncludeKey(type, key, false)));
} 
```

`RegisterClientScriptInclude`另一方面，包含更多代码，直到达到现有的检查。

```
internal void RegisterClientScriptInclude(Control control, Type type, string key, string url)
{
    IScriptManager scriptManager = this._owner.ScriptManager;
    if ((scriptManager != null) && scriptManager.SupportsPartialRendering)
    {
        scriptManager.RegisterClientScriptInclude(control, type, key, url);
    }
    else
    {
        this.RegisterClientScriptInclude(type, key, url);
    }
}

internal void RegisterClientScriptInclude(Type type, string key, string url, bool isResource)
{
    if (type == null)
    {
        throw new ArgumentNullException("type");
    }
    if (string.IsNullOrEmpty(url))
    {
        throw ExceptionUtil.ParameterNullOrEmpty("url");
    }
    string script = "\r\n<script src=\"" + HttpUtility.HtmlAttributeEncode(url) + "\" type=\"text/javascript\"></script>";
    this.RegisterScriptBlock(CreateScriptIncludeKey(type, key, isResource), script, ClientAPIRegisterType.ClientScriptBlocks);
}

internal void RegisterScriptBlock(ScriptKey key, string script, ClientAPIRegisterType type)
{
    switch (type)
    {
        case ClientAPIRegisterType.ClientScriptBlocks:
            this.RegisterScriptBlock(key, script, ref this._registeredClientScriptBlocks, ref this._clientScriptBlocks, false);
            break;

        case ClientAPIRegisterType.ClientScriptBlocksWithoutTags:
            this.RegisterScriptBlock(key, script, ref this._registeredClientScriptBlocks, ref this._clientScriptBlocks, true);
            break;

        case ClientAPIRegisterType.ClientStartupScripts:
            this.RegisterScriptBlock(key, script, ref this._registeredClientStartupScripts, ref this._clientStartupScripts, false);
            break;

        case ClientAPIRegisterType.ClientStartupScriptsWithoutTags:
            this.RegisterScriptBlock(key, script, ref this._registeredClientStartupScripts, ref this._clientStartupScripts, true);
            break;
    }
    if (this._owner.PartialCachingControlStack != null)
    {
        foreach (BasePartialCachingControl control in this._owner.PartialCachingControlStack)
        {
            control.RegisterScriptBlock(type, key, script);
        }
    }
}

private void RegisterScriptBlock(ScriptKey key, string script, ref ListDictionary scriptBlocks, ref ArrayList scriptList, bool needsScriptTags)
{
    if (scriptBlocks == null)
    {
        scriptBlocks = new ListDictionary();
        scriptList = new ArrayList();
    }
    if (!scriptBlocks.Contains(key))
    {
        Tuple<ScriptKey, string, bool> tuple = new Tuple<ScriptKey, string, bool>(key, script, needsScriptTags);
        scriptBlocks.Add(key, null);
        scriptList.Add(tuple);
    }
} 
```

# ios - HPple 无法解析 HTML

> ID：15181850
> 
> 赞同：2
> 
> 时间：2013-03-03T02:36:05.587
> 
> 标签：ios, objective-c, xcode, libxml2, hpple

我正在使用 Hpple 解析 HTML，它似乎无法识别它实际上是 XML，它应该（XCode 调试器显示此变量`isXML = (BOOL) NO`并且它不收集任何数据）。我该如何解决？

这是我的代码（它们也可能是其他错误）。首先调用解析方法/函数`[ListParser parse:@"http://www.fanfiction.net/book/Harry-Potter/" at:@"//div[@=\"class\"]"];`：

```
@interface ListParser () //private
+ (NSArray*) getNodeListAt: (NSURL*) page inside: (NSString*) page;
+ (NSDictionary*) getNodeData: (TFHppleElement*) node;
+ (void) addMiniListData: (NSString*) list to: (NSMutableDictionary*) dict;
@end

@implementation ListParser

+ (NSArray*) getNodeListAt: (NSURL*) page inside: (NSString*) path { // "//div[@class"z-list"]"
    NSData *data = [NSData dataWithContentsOfURL: page];
    TFHpple *listparser = [TFHpple hppleWithHTMLData:data]; //WHERE CODE SEEMS TO STOP TO WORK
    NSArray *done = [listparser searchWithXPathQuery: path];
    return done;
}

+ (void) addMiniListData: (NSString*) list to: (NSMutableDictionary*) dict{
    NSArray *parts = [list componentsSeparatedByString:@" - "];

    for(NSString* p in parts){
        NSArray* two = [p componentsSeparatedByString:@": "];
        [dict setObject:[two objectAtIndex:1] forKey:[two objectAtIndex:0]];
    }
}

+ (NSDictionary*) getNodeData: (TFHppleElement*) node{
    NSMutableDictionary* data = [NSMutableDictionary dictionary];
    [data setObject:[[[node firstChild] firstChild] objectForKey:@"href"] forKey:@"Image"];
    [data setObject:[[node firstChild] text] forKey:@"Title"];
    [data setObject:[[[[node firstChild] children] objectAtIndex:2] text] forKey:@"By"];
    [data setObject:[[[[node firstChild] childrenWithClassName:@"z-indent"] objectAtIndex:0] text] forKey:@"Summery"];
    [self addMiniListData:[[[[[[node firstChild] childrenWithClassName:@"z-indent"] objectAtIndex:0] childrenWithClassName:@"z-padtop2"] objectAtIndex:0] text] to: data];

    return data;
}

+(NSArray*) parse: (NSString*) address at: (NSString*) path{
    NSURL *url = [[NSURL alloc] initWithString:address];
    NSArray* list = [self getNodeListAt:url inside:path];
    NSMutableArray *data = [[NSMutableArray alloc] init];
    for (TFHppleElement* e in list) {
        [data addObject:[self getNodeData:e]];
    }
    return [[NSArray alloc] initWithArray: data];
}

@end 
```

这是我关注的教程的链接：[http ://www.raywenderlich.com/14172/how-to-parse-html-on-ios](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T05:09:20.943

如果您需要使用 解析 XML `TFHpple`，您应该告诉它您正在这样做。你在打电话`+hppleWithHTMLData:`。如果您阅读此方法的实现，您会看到它设置`isXML`为`NO`. 相反，请使用该`hppleWithXMLData:`方法。

# c# - 为什么会发生 TaskCanceledException？

> ID：15181855
> 
> 赞同：73
> 
> 时间：2013-03-03T02:36:52.713
> 
> 标签：c#, task-parallel-library, c#-5.0

我有以下测试代码：

```
void Button_Click(object sender, RoutedEventArgs e)
{
    var source = new CancellationTokenSource();

    var tsk1 = new Task(() => Thread1(source.Token), source.Token);
    var tsk2 = new Task(() => Thread2(source.Token), source.Token);

    tsk1.Start();
    tsk2.Start();

    source.Cancel();

    try
    {
        Task.WaitAll(new[] {tsk1, tsk2});
    }
    catch (Exception ex)
    {
        // here exception is caught
    }
}

void Thread1(CancellationToken token)
{
    Thread.Sleep(2000);

    // If the following line is enabled, the result is the same.
    // token.ThrowIfCancellationRequested();
}

void Thread2(CancellationToken token)
{
    Thread.Sleep(3000);
} 
```

在线程方法中，我没有抛出任何异常，但我进入`TaskCanceledException`了`try-catch`启动任务的外部代码块。为什么会发生这种情况以及`token.ThrowIfCancellationRequested();`在这种情况下的目的是什么。`token.ThrowIfCancellationRequested();`我相信只有在调用线程方法时才应该抛出异常。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-03T05:21:08.137

我相信这是预期的行为，因为您遇到了竞争条件的变化。

从[如何：取消任务及其子项](http://msdn.microsoft.com/en-us/library/dd537607.aspx)：

> 调用线程不强制结束任务；它仅表示请求取消。如果任务已经在运行，则由用户委托来通知请求并做出适当的响应。如果在任务运行之前请求取消，则永远不会执行用户委托并且任务对象转换到`Canceled`状态。

并从[任务取消](http://msdn.microsoft.com/en-us/library/dd997396.aspx)：

> 您可以通过 [...] 简单地从委托返回来终止操作。在许多情况下，这已经足够了；但是，以这种方式“取消”的任务实例会转换到`RanToCompletion`状态，而不是`Canceled`状态。

我有根据的猜测是，当您调用`.Start()`两项任务时，很可能其中一项（或两项）实际上并未在您`.Cancel()`调用`CancellationTokenSource`. 我敢打赌，如果您在任务开始和取消之间至少等待三秒钟，它就不会抛出异常。此外，您可以检查这`.Status`两个任务的属性。如果我是对的，那么当抛出异常时，该属性应该至少`.Status`读取其中一个。[`TaskStatus.Canceled`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskstatus.aspx)

请记住，开始一个`Task`新线程并不能保证创建一个新线程。由 TPL 决定什么获得一个新线程以及什么简单地排队等待执行。

# android - Android：我在哪里可以得到 SQLite 命令的结果？

> ID：15181857
> 
> 赞同：2
> 
> 时间：2013-03-03T02:37:16.360
> 
> 标签：android, android-sqlite

我是开发 Android 的新手。请问在哪里可以得到sqlite命令的结果？

我想加入以下 2 个表：但是如何在我的应用程序中获得结果？

对此感到非常困惑，并且已经在谷歌中搜索了几个主题。现在，我只能使用 adb shell 在控制台中获取结果。但这毫无意义。

```
SELECT Customers.FirstName, Customers.LastName, SUM(Sales.SaleAmount) AS SalesPerCustomer
FROM Customers JOIN Sales
ON Customers.CustomerID = Sales.CustomerID
GROUP BY Customers.FirstName, Customers.LastName 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:53:33.843

如果你有数据库对象，你可以调用

db.query() 将返回一个包含查询结果的 Cursor 对象。

这是一个很好的教程，可以帮助你：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T05:31:44.397

Sqlite 支持[CREATE TABLE AS SELECT](http://www.sqlite.org/lang_createtable.html)语法。所以试试下面的sql

```
private static final String TABLE_CREATE = "CREATE TABLE " + TABLE_NAME + " AS SELECT Customers.FirstName, Customers.LastName, SUM(Sales.SaleAmount) AS SalesPerCustomer
FROM Customers JOIN Sales
ON Customers.CustomerID = Sales.CustomerID
GROUP BY Customers.FirstName, Customers.LastName"; 
```

通过以下方式执行它：

```
SQLiteDatabase db;
//initialize db
db.execSQL(TABLE_CREATE); 
```

# c - realloc 中的最佳内存利用率（拆分？）

> ID：15181858
> 
> 赞同：0
> 
> 时间：2013-03-03T02:37:23.443
> 
> 标签：c, memory, dynamic, realloc, allocator

我在编写 realloc 函数时遇到了困难。

我让它通过标准的 memcpy 程序工作，但我无法对其进行优化。我知道我需要适应另外两种情况：向前扩展当前块，并检查当前大小的块是否足够大（如果太大，将其拆分为释放内存）。

但是，我似乎无法正确处理。我总是出错。为了澄清，这些不是编译错误......这些是通过跟踪驱动程序失败的堆完整性检查。如果我在不拆分的情况下执行此操作，则内​​存不足，如果我尝试拆分，则会显示“未能保留原始块/数据”。

下面是我正常的 memcpy 代码。中间的注释部分是我尝试扩展，但我认为我需要拆分，因为它会导致大量碎片。这导致我在（一个）重新分配测试期间内存不足并出错。如果我在没有注释块的情况下这样做，它工作正常，但优化为零。

我分裂的尝试总是失败；底部的注释代码是我的尝试。我在这里做错了什么？

我将非常感谢任何帮助，谢谢。:)

```
#define PACK(size, alloc) ((size) | (alloc))
#define GET_SIZE(p) (GET(p) & ~0x7)
#define GET_ALLOC(p) (GET(p) & 0x1)
#define HDRP(bp) ((char *)(bp) - WSIZE)
#define FTRP(bp) ((char *)(bp) + GET_SIZE(HDRP(bp)) - DSIZE)
#define NEXT_BLKP(bp) ((char *)(bp) + GET_SIZE(((char *)(bp) - WSIZE)))

void *mm_realloc(void *oldptr, size_t size)
{
    void *newptr;
    size_t copySize;
    copySize = GET_SIZE(HDRP(oldptr));
    size_t next_alloc = GET_ALLOC(HDRP(NEXT_BLKP(oldptr)));
//  if (copySize > size) return oldptr;

    /*if (!next_alloc) { 
        if ((GET_SIZE(HDRP(oldptr)) + GET_SIZE(HDRP(NEXT_BLKP(oldptr))))>size) {
        copySize += GET_SIZE(HDRP(NEXT_BLKP(oldptr)));
        PUT(HDRP(oldptr), PACK(copySize,1));
        PUT(FTRP(oldptr), PACK(copySize,1));
        return oldptr;
        }
    }*/

    newptr = mm_malloc(size);
    if (newptr == NULL)
      return NULL;
    if (size < copySize)
        copySize = size;
    memcpy(newptr, oldptr, copySize);
    PUT(newptr,GET(oldptr));
    mm_free(oldptr);
    return newptr;
}

//      int total_avail = (GET_SIZE(HDRP(oldptr)) + GET_SIZE(HDRP(NEXT_BLKP(oldptr))));
//      copySize -= (total_avail - size); 
```

# macos - 任务控制中桌面级别的 NSWindow

> ID：15181859
> 
> 赞同：3
> 
> 时间：2013-03-03T02:37:53.913
> 
> 标签：macos, cocoa, nswindow, mission-control

我正在制作一个应用程序，用交互式应用程序替换 OS X 上的墙纸。当我使用热角调出任务控制时，应用程序窗口保持静止并保持相同大小（占据整个屏幕）。我必须将收集行为设置如下，以使其完全显示在任务控制中。

```
 [self setCollectionBehavior:(NSWindowCollectionBehaviorCanJoinAllSpaces | NSWindowCollectionBehaviorStationary | NSWindowCollectionBehaviorIgnoresCycle)]; 
```

如何使它像普通桌面图像一样缩小并在屏幕中居中？

# javascript - 如何让用户在推特上发布图片？

> ID：15181861
> 
> 赞同：1
> 
> 时间：2013-03-03T02:38:28.380
> 
> 标签：javascript, python, twitter

我们设置了一个 twitter 按钮，用户单击它并打开一个弹出窗口，让用户从他们自己的帐户发送推文。我们如何在该推文中包含图像？（通过 facebook，我们已经能够做到）。

```
<div>

   <a href="http://twitter.com/share" class="twitter-share-button"
      data-url="http://www.mysite.com"
      data-text="sharing this with you...."
      data-count="none">Tweet</a>
</div>

<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
  <script type="text/javascript">
 twttr.events.bind('tweet', function(event) {
       window.location = "http://www.mysite.com"

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:43:49.870

为此，您需要直接使用 API（而不仅仅是他们的小部件）。有关如何发布媒体项目的详细信息，请参阅[status/update_with_media](https://dev.twitter.com/docs/api/1.1/post/statuses/update_with_media)文档。

如果您正在寻找一种呈现链接的“预览”的方式（Facebook 通过 Open Graph 允许这样做），请查看[Cards](https://dev.twitter.com/docs/cards)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T19:04:11.573

您还可以使用以下内容：

[https://dev.twitter.com/rest/media/uploading-media](https://dev.twitter.com/rest/media/uploading-media)

# python - 理解 set() 函数

> ID：15181867
> 
> 赞同：59
> 
> 时间：2013-03-03T02:39:27.347
> 
> 标签：python, set

在 python 中，`set()`是一个无重复元素的无序集合。但是，我无法理解它是如何生成输出的。

例如，考虑以下情况：

```
>>> x = [1, 1, 2, 2, 2, 2, 2, 3, 3]
>>> set(x)
set([1, 2, 3])

>>> y = [1, 1, 6, 6, 6, 6, 6, 8, 8]
>>> set(y)
set([8, 1, 6])

>>> z = [1, 1, 6, 6, 6, 6, 6, 7, 7]
>>> set(z)
set([1, 6, 7]) 
```

的输出不应该`set(y)`是：`set([1, 6, 8])`？我在 Python 2.6 中尝试了以上两个。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-03-03T02:45:12.003

正如你所说，集合是无序的。尽管实现集合的一种方法是使用树，但它们也可以使用哈希表来实现（这意味着按排序顺序获取键可能不是那么简单）。

如果你想对它们进行排序，你可以简单地执行：

```
sorted(set(y)) 
```

这将产生一个包含集合元素的排序列表。（不是集合。同样，集合是无序的。）

否则，唯一能保证的`set`就是它使元素独一无二（不会出现不止一次）。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-03T02:46:28.610

作为无序集合类型，`set([8, 1, 6])`等价于`set([1, 6, 8])`.

虽然按排序顺序显示集合内容可能会更好，但这会使`repr()`调用更加昂贵。

在内部，该`set`类型是使用散列表实现的：散列函数用于将项目分成多个桶，以减少检查项目是否是集合的一部分所需的相等操作的数量。

为了产生`repr()`输出，它只是依次输出每个桶中的项目，这不太可能是排序顺序。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-03T02:43:38.560

正如 +Volatility 和您自己指出的那样，集合是无序的。如果您需要按顺序排列元素，只需调用`sorted`集合：

```
>>> y = [1, 1, 6, 6, 6, 6, 6, 8, 8]
>>> sorted(set(y))
[1, 6, 8] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-03T02:50:03.130

*Python 的集合（和字典）会以某种*顺序迭代并打印出来，但确切的顺序是任意的，并且不能保证在添加和删除后保持不变。

这是一个在添加并删除大量值后设置更改顺序的示例：

```
>>> s = set([1,6,8])
>>> print(s)
{8, 1, 6}
>>> s.update(range(10,100000))
>>> for v in range(10, 100000):
    s.remove(v)
>>> print(s)
{1, 6, 8} 
```

不过，这取决于实现，因此您不应依赖它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-25T20:23:14.393

在阅读了其他答案之后，我仍然无法理解***为什么***该集合是无序的。

向我的伙伴提到了这个，他想出了这个比喻：拿弹珠。你把它们放在比大理石宽度稍宽的管子里：你有一个清单。然而，一套是一个袋子。即使你把弹珠一个一个地喂进袋子里；当您将它们从袋子中倒回管中时，它们的顺序将不同（因为它们都混在了袋子中）。

# c# - 按下键时创建自定义弹出键盘没有任何反应

> ID：15181868
> 
> 赞同：0
> 
> 时间：2013-03-03T02:39:28.833
> 
> 标签：c#, winforms, keyboard

我想要发生的是，当单击一个文本框时，会显示一个弹出式键盘，并且我在键盘上输入的任何内容都将被放入文本框中，但是没有任何反应，但是当我使用记事本时，它可以工作。我怎样才能解决这个问题？

这是我的主要表单代码：

```
 private void textBox1_MouseClick(object sender, MouseEventArgs e)
    {
        Form1 frm1 = new Form1();
        frm1.ShowDialog();
    } 
```

这是我的弹出键盘代码

```
public partial class Form1 : Form
{
    const int WS_EX_NOACTIVATE = 0x08000000;
//this line of code fixed the issue
[DllImport("user32.dll", EntryPoint = "GetDesktopWindow")]
        public static extern IntPtr GetDesktopWindow();

    public Form1()
    {
        InitializeComponent();
    }

    protected override CreateParams CreateParams
    {
        get
        {
            CreateParams param = base.CreateParams;
            param.ExStyle |= WS_EX_NOACTIVATE;

//This line of code fix the issues
param.Style = 0x40000000 | 0x4000000;
                param.Parent = GetDesktopWindow();

            return param;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        SendKeys.Send("1");
    }

    private void button3_Click(object sender, EventArgs e)
    {
        SendKeys.Send("2");
    }

    private void button4_Click(object sender, EventArgs e)
    {
        SendKeys.Send("3");
    }

    private void button2_Click(object sender, EventArgs e)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T03:59:53.800

如果您手动添加了测试框，请确保您像这样连接到 MouseEventHandler：

this.textBox1.MouseClick += new System.Windows.Forms.MouseEventHandler(this.textBox1_MouseClick);

当您的表单加载时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T06:07:02.980

我通过添加这行代码解决了这个问题

```
[DllImport("user32.dll", EntryPoint = "GetDesktopWindow")]
    public static extern IntPtr GetDesktopWindow(); 
```

和

```
 param.Style = 0x40000000 | 0x4000000;
            param.Parent = GetDesktopWindow(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:45:39.363

使用`form1.Show()`...不`ShowDialog()`

# c++ - 如何设置和清除串口的 RTS 线。C++ POSIX

> ID：15181870
> 
> 赞同：1
> 
> 时间：2013-03-03T02:39:33.063
> 
> 标签：c++, ubuntu, serial-port, posix

我想控制串口上的 RTS 线来唤醒设备。这是一些打开串口的粗略测试代码。我需要将 RTS 线设置为低 500 毫秒。我在搜索/理解如何控制线路时遇到问题。任何提示？

编辑：或控制 CTS/DTR，除 Tx/Rx 线之外的任何其他线以连接到机器人的引脚。

```
#include <iostream>
#include <string.h>
#include <cstdio>
#include <fstream>

#include <sys/types.h>
#include <pthread.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <stdlib.h>
#include <unistd.h>
#include <signal.h>
#include <stdint.h>   /* Standard types */
#include <fcntl.h>    /* File control definitions */
#include <errno.h>    /* Error number definitions */
#include <termios.h>  /* POSIX terminal control definitions */
#include <sys/ioctl.h>
#include <getopt.h>

using namespace std;

int fd_global;
FILE* fp_global;
int serialport_init(const char* serialport, int baud);
int serialport_read_until(int fd);
int fpeek(FILE* stream);
bool fexists(const char *filename);

void* screen_thread(void* arg) {
    while(1) {
    }
}

int main(void) {

    pthread_t screen_thread_id;
    int flags;
    int baudrate = B9600;  // default
    fd_global = serialport_init((char*)"/dev/ttyUSB0", baudrate);
    if(fd_global==-1) {
        cout << "Open port: error\n";
        return -1;
    }

    fp_global = fdopen(fd_global, "r");

    if (-1 == (flags = fcntl(fd_global, F_GETFL, 0))) flags = 0;
    fcntl(fd_global, F_SETFL, flags | O_NONBLOCK);

    //pthread_create(&screen_thread_id, NULL, screen_thread, (void*)NULL);    

    serialport_read_until(fd_global);
    return 0;
}

int serialport_read_until(int fd)
{
    char b[1];
    while(1) { 
        int n = read(fd, b, 1);  //Read byte at a time
        if(n==-1) { 
            printf("N");fflush(stdout);
            perror("READ: ");
         }
        else if( n==0 ) {
            printf("Z");fflush(stdout);
        } else if(n>0) {

            printf(":%d:",n);fflush(stdout);

        }
        usleep(100*1000);

            if (fexists("/dev/ttyUSB0")) 
                printf("CONNECTED\n");
            else
                printf("NOT CONNECTED\n");

    }
    return 0;
}

bool fexists(const char *filename)
{
  ifstream ifile(filename);
  return ifile;
}

int serialport_init(const char* serialport, int baud)
{
    struct termios toptions;
    int fd;

    // Open port
    fd = open(serialport, O_RDWR | O_NOCTTY | O_NDELAY);
    if (fd == -1)  {
        perror("init_serialport: Unable to open port ");
        return -1;
    }

    // Read current termios settings
    if (tcgetattr(fd, &toptions) < 0) {
        perror("init_serialport: Couldn't get term attributes");
        return -1;
    }

    // Set baud rate variable
    speed_t brate = baud;
    switch(baud) {
    case 2400:   brate=B2400;   break;
    case 4800:   brate=B4800;   break;
    case 9600:   brate=B9600;   break;
#ifdef B14400
    case 14400:  brate=B14400;  break;
#endif
    case 19200:  brate=B19200;  break;
#ifdef B28800
    case 28800:  brate=B28800;  break;
#endif
    case 38400:  brate=B38400;  break;
    case 57600:  brate=B57600;  break;
    case 115200: brate=B115200; break;
    }
    cfsetispeed(&toptions, brate);
    cfsetospeed(&toptions, brate);

    // Setup termios for 8N1
    toptions.c_cflag &= ~PARENB;
    toptions.c_cflag &= ~CSTOPB;
    toptions.c_cflag &= ~CSIZE;
    toptions.c_cflag |= CS8;

    // Reccomended settings
    toptions.c_cflag &= ~CRTSCTS;   // no flow control
    toptions.c_cflag |= CREAD | CLOCAL;  // turn on read & ignore ctrl lines
    toptions.c_iflag &= ~(IXON | IXOFF | IXANY); // turn off s/w flow ctrl
    toptions.c_lflag &= ~(ICANON | ECHO | ECHOE | ISIG); // make raw
    toptions.c_oflag &= ~OPOST; // make raw

    // Setting when read() releases
    // see: http://unixwiz.net/techtips/termios-vmin-vtime.html (Still a little confusing)
    toptions.c_cc[VMIN]  = 0;
    toptions.c_cc[VTIME] = 20;

    // Apply settings
    if( tcsetattr(fd, TCSANOW, &toptions) < 0) {
        perror("init_serialport: Couldn't set term attributes");
        return -1;
    }

    return fd;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:59:09.920

这行得通吗？我明天测试一下。

```
int status;

status |= TIOCM_RTS;
ioctl(fd, TIOCMSET, &status);

usleep(500*1000);

status &= ~TIOCM_RTS;
ioctl(fd, TIOCMSET, &status); 
```

# assembly - Windows 中的 NASM 汇编程序错误：“未定义对 `print_string' 的引用”

> ID：15181871
> 
> 赞同：3
> 
> 时间：2013-03-03T02:39:36.310
> 
> 标签：assembly, path, nasm

当我尝试在 Windows 上编译一个简单的汇编程序时，我遇到了奇怪的错误。这些错误看起来好像汇编器不知道我使用的函数是什么，并且出于某种原因也将 Haskell 带入其中。

这是我尝试编译时遇到的错误：

```
 C:\Users\Nick\Documents\COMP2210\>nasm -fwin32 first.asm

    C:\Users\Nick\Documents\COMP2210\>gcc first.obj -o first
    first.obj:first.asm:(.text+0xb): undefined reference to `print_string'
    first.obj:first.asm:(.text+0x10): undefined reference to `read_int'
    first.obj:first.asm:(.text+0x1f): undefined reference to `print_string'
    first.obj:first.asm:(.text+0x24): undefined reference to `read_int'
    first.obj:first.asm:(.text+0x3d): undefined reference to `sub_dump_regs'
    first.obj:first.asm:(.text+0x4b): undefined reference to `sub_dump_mem'
    first.obj:first.asm:(.text+0x55): undefined reference to `print_string'
    first.obj:first.asm:(.text+0x5f): undefined reference to `print_int'
    first.obj:first.asm:(.text+0x69): undefined reference to `print_string'
    first.obj:first.asm:(.text+0x73): undefined reference to `print_int'
    first.obj:first.asm:(.text+0x7d): undefined reference to `print_string'
    first.obj:first.asm:(.text+0x84): undefined reference to `print_int'
    first.obj:first.asm:(.text+0x89): undefined reference to `print_nl'
    C:/Program Files (x86)/Haskell Platform/2012.4.0.0/mingw/bin/../lib/libmingw32.a(main.o):main.c:(.text+0xd2): undefined reference to `WinMain@16'
    collect2: ld returned 1 exit status

    C:\Users\Nick\Documents\COMP2210\> 
```

这是 NASM 代码：

```
;
; file: first.asm
; First assembly program. This program asks for two integers as
; input and prints out their sum.
;
; To create executable:
; Using djgpp:
; nasm -f coff -d COFF_TYPE first.asm
; gcc -o first first.o driver.c asm_io.o
;
; Using Borland C/C++
; nasm -f obj -d OBJ_TYPE first.asm
; bcc32 first.obj driver.c asm_io.obj

%include "asm_io.inc"
;
; initialized data is put in the .data segment
;
segment .data
;
; These labels refer to strings used for output
;
prompt1 db    "Enter a number: ", 0       ; don't forget nul terminator
prompt2 db    "Enter another number: ", 0
outmsg1 db    "You entered ", 0
outmsg2 db    " and ", 0
outmsg3 db    ", the sum of these is ", 0

;
; uninitialized data is put in the .bss segment
;
segment .bss
;
; These labels refer to double words used to store the inputs
;
input1  resd 1
input2  resd 1

;
; code is put in the .text segment
;
segment .text
        global  _asm_main
_asm_main:
        enter   0,0               ; setup routine
        pusha

        mov     eax, prompt1      ; print out prompt
        call    print_string

        call    read_int          ; read integer
        mov     [input1], eax     ; store into input1

        mov     eax, prompt2      ; print out prompt
        call    print_string

        call    read_int          ; read integer
        mov     [input2], eax     ; store into input2

        mov     eax, [input1]     ; eax = dword at input1
        add     eax, [input2]     ; eax += dword at input2
        mov     ebx, eax          ; ebx = eax
        dump_regs 1
        dump_mem 2, outmsg1, 1
;
; next print out result message as series of steps
;
        mov     eax, outmsg1
        call    print_string      ; print out first message
        mov     eax, [input1]     
        call    print_int         ; print out input1
        mov     eax, outmsg2
        call    print_string      ; print out second message
        mov     eax, [input2]
        call    print_int         ; print out input2
        mov     eax, outmsg3
        call    print_string      ; print out third message
        mov     eax, ebx
        call    print_int         ; print out sum (ebx)
        call    print_nl          ; print new-line

        popa
        mov     eax, 0            ; return back to C
        leave                     
        ret 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T04:58:35.120

试试：`gcc driver.c first.obj asm_io.obj -o first.exe`。如果尚未完成，则必须创建`asm_io.obj`from 。`asm_io.asm`

`driver.c`调用`asm_main`（`global`在您的代码中声明）。`asm_io.inc`声明这些函数`extern`（并提供宏来调用它们）。`asm_io.obj`包含功能。

Carter 博士的工作第一次开始工作有点棘手。它变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-12T08:26:01.730

您可能已经组装了 asm_io.inc 文件，然后在链接阶段包含了从中获得的目标代码。以下是这些错误的原因。asm_io.inc 文件不需要汇编，只需要包含它。需要组装的是 asm_io.asm 文件（位于[https://raw.githubusercontent.com/humanshell/assembly/master/examples/ms/asm_io.asm](https://raw.githubusercontent.com/humanshell/assembly/master/examples/ms/asm_io.asm)）。您可以在文件本身上找到如何组装它。然后，一旦完成，您就可以进行所有目标文件的链接步骤。

# security - 他们是如何做到的呢？

> ID：15181883
> 
> 赞同：-1
> 
> 时间：2013-03-03T02:41:01.917
> 
> 标签：security, web

我是一名高级开发人员，我正在努力将我的安全知识提升到更深层次。也就是说，我知道这些黑客可以做什么/有什么风险，但我想知道他们一般是怎么做的。关于这一点，如果有人能就以下项目启发我，我将不胜感激：

1.  数据包嗅探：我知道数据包可以被嗅探和分析，但它们是如何做到的呢？我的理解是，为了做到这一点，需要在服务器本身上运行实际的软件，因为它需要访问网卡才能这样做......这准确吗？如果没有，他们如何在不直接访问服务器的情况下远程捕获传入的数据包到服务器？

2.  会话劫持：再一次，我在这里感到困惑。我知道他们可以做到，但是怎么做呢？session ID是服务器自己发出来的，然后根据什么返回给浏览器呢？来电者的IP地址？MAC地址？这些黑客使用什么来从 Web 会话中捕获会话 ID？它是被感染的电脑上的软件吗？

3.  站点劫持：再次，我知道他们可以做到这一点，但据我目前所知，这意味着他们必须劫持/感染 DNS 发布服务器，并将对该站点的查询重定向到他们选择的 IP 地址......再次: 准确吗？

4.  劫持服务器：这怎么可能？例如，一个开放的端口如何允许任何黑客获得对盒子的完全访问权限，以便他们可以感染它或安装一些可以启用上述 1、2 和 3 的软件？我目前的理解是端口用于通信，但除非某些软件/服务正在监视该端口并等待命令，否则该端口不会打开......这准确吗？如果是这样，为什么关闭港口等如此重要？

5.  劫持一些超级安全的网站：我每天都在考虑安全性，并不断使用诸如：SSL、RSA、SHA512、SSL TOKENS、IP 限制等之类的东西……我的问题是：他们仍然能够做到启用所有这些功能？

我知道这是很多东西，但我真的很好奇，想把我的安全知识提升到一个新的水平。如果你是一个和我有同样想法的开发者，你会遇到问题，只是使用一些预构建的库或控件，而不知道它在后台详细做了什么，你就会明白为什么我不高兴只知道哪个要实现的协议、库或加密方法。

知道敌人，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T04:42:55.523

首先，我喜欢 hacking（只是为了好的），我认为越多的人受过关于它的教育，我们就越安全，所以我为你的好奇心鼓掌。

这些都是很好的问题，但一个好的答案实际上需要一两本书。我在学习中读过所有这些书，我个人推荐它们。我建议以下内容帮助您入门：

这将使您开始使用基本的工具和技术。这本书没有深入，所以如果您正在寻找肉，请跳过它并阅读其他三本，除非您对安全性非常 [陌生：黑客和渗透测试的基础知识：道德黑客和渗透测试变得容易，帕特里克Engebretson](https://rads.stackoverflow.com/amzn/click/com/1597496553)（完全披露，作者是我在 DSU 的教授。不过这本书很震撼）

如需对安全性进行相对深入的介绍，包括操作系统和网络方面的优秀背景：[Counter Hack Reloaded: A Step-by-Step Guide to Computer Attacks and Effective Defenses（第 2 版），Edward Skoudis](https://rads.stackoverflow.com/amzn/click/com/0131481045)（可能是我一直以来最喜欢的书）

深入了解攻击的工作原理（汇编语言级别）：[Hacking, The Art of Exploitation, Jon Erickson](http://nostarch.com/hacking2.htm)

深入研究 Web 应用程序方面：[Web 应用程序黑客手册：发现和利用安全漏洞，Dafydd Stuttard，Marcus Pinto](https://rads.stackoverflow.com/amzn/click/com/1118026470)（全面披露，技术编辑是我在 DSU 的教授）

# php - Zend 中的循环资源依赖错误

> ID：15181886
> 
> 赞同：2
> 
> 时间：2013-03-03T02:41:22.937
> 
> 标签：php, zend-framework

我有一个引导类，我想用它来设置 CSS 变量：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initView()
    {
        $this->bootstrap('view');
        ...
        ...
    }
} 
```

但是尝试获取视图资源在这个`bootstrap('view')`阶段失败了。我得到错误：

```
... Circular resource dependency detected' in C:\ZendFramework\library\Zend\Application\Bootstrap\BootstrapAbstract.php on line 662
... 
```

这很奇怪，因为这是教程（和 zend 文档）使用的过程。有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T04:09:41.867

将方法更改为类似的方法`_initViewStuff()`，一切都会好起来的。

原因是引导顺序`Zend_Application_Bootstrap_BootstrapAbstract`如下：

1.  `$app->bootstrap()`您对in的初始调用会`public/index.php`遍历所有`_initXxx()`方法 ( `@see Zend_Application_Bootstrap_BootstrapAbstract::getClassResourceNames()`) 并调用它找到`$this->bootstrap('xxx')`的每个方法。`Xxx`然后它将对所有由`resources.*`键定义的插件资源做类似的事情`application.ini`（尽管你的从来没有那么远，如下所述）。

2.  对内部的调用`bootstrap('view')`存储了一个标志，表明他已经启动了引导名为 的资源的进程`view`。

3.  他做了与（1）类似的事情，寻找匹配的`_initXxx()`方法。他找到它并试图执行`$this->_initView()`

4.  他注意到他设置的标志，表明他将陷入无限循环，因此他以循环依赖异常退出。

通常，对于每个资源`xxx`，您可以使用以下方法中的一种（但不能同时使用两种方法，如您所发现的）来引导它：

1.  定义一个`_initXxx()`方法。

2.  创建一个名为的插件资源类（您使用in`My_Application_Resource_Xxx`通知该系统`My_Application_Resource_`是插件资源的命名空间前缀）`pluginPaths.My_Application_Resource = /path/to/dir/containing/plugin``application/configs/application.ini`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T04:09:21.593

你不能在你的引导类'_initView'中使用这个方法名，因为有相应的`Zend_Application_Resource_View`，只需重命名你的引导方法名

# linux - Linux 上的 NuGet：获取响应流时出错

> ID：15181888
> 
> 赞同：53
> 
> 时间：2013-03-03T02:41:58.120
> 
> 标签：linux, mono, nuget

我正在尝试在 Linux（Ubuntu 12）上运行 NuGet。我有 Mono 3.0.6（从源代码编译）。

```
$ mono --runtime=v4.0.30319 .nuget/NuGet.exe update -self
Checking for updates from https://nuget.org/api/v2/.
Error getting response stream (Write: The authentication or decryption has failed.): SendFailure 
```

我收集到，该错误是由于某些证书（最有可能是 nuget.org 证书）不受信任所致。这篇[博文有更多细节](http://monomvc.wordpress.com/2012/03/06/nuget-on-mono/)。

所以我跑了：

```
$ mozroots --import --sync
$ certmgr -ssl https://go.microsoft.com
$ certmgr -ssl https://nugetgallery.blob.core.windows.net
$ certmgr -ssl https://nuget.org 
```

……无济于事。

NuGet 版本是 2.3.0.0（尽管我从一些旧版本开始也无法使用）。

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-05-16T13:47:08.150

我可以通过将证书导入机器存储而不是用户存储来实现这一点，这是默认设置：

```
$ sudo mozroots --import --machine --sync
$ sudo certmgr -ssl -m https://go.microsoft.com
$ sudo certmgr -ssl -m https://nugetgallery.blob.core.windows.net
$ sudo certmgr -ssl -m https://nuget.org 
```

我验证了在我这样做之前——即使在完成了基于用户存储的原始命令之后[——tlstest.exe 工具](http://www.mono-project.com/FAQ:_Security)也失败了，并且在导入到机器存储之后它成功了。

而且，当然对我来说最重要的是，nuget 也从那时开始工作。:)

# python - 布尔检索，索引阶段

> ID：15181892
> 
> 赞同：0
> 
> 时间：2013-03-03T02:43:17.850
> 
> 标签：python, indexing

我正在做一个布尔检索项目，第一阶段是索引。我现在正在尝试建立一个倒排索引。假设我有一个排序列表，如下所示：如何合并项目

```
list = [('a',1),('a',2),('a',3),('b',1),('b',2),('b',3)...] 
```

这样我就可以得到一个像下面这样的字典，它仍然是排序的：

```
dict = {'a':[1,2,3], 'b':[1,2,3]...}, thx a lot 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:58:37.677

你可以这样做：

```
>>> import collections
>>> mylist = [('a',1),('a',2),('a',3),('b',1),('b',2),('b',3)]
>>> result = collections.defaultdict(list)
>>> for item in mylist:
        result[item[0]].append(item[1])
>>> dict(result)
{'a': [1, 2, 3], 'b': [1, 2, 3]} 
```

`defaultdict(list)`创建一个字典，其中键在第一次访问使用作为参数传递的可调用对象创建的对象时被初始化（在本例中`list`）。它避免了检查密钥是否已经存在。

最后一行将 转换`defaultdict`为正常的`dict`- 它并不是严格必要的，因为它的`defaultdict`行为也像正常的字典。

值以与原始列表相同的顺序附加到每个键。但是，键本身不会被排序（这是字典的属性）。

* * *

**更新**：如果您还需要字典键保持排序，您可以这样做：

```
>>> import collections
>>> mylist = [('a',1),('a',2),('c',1),('c',2),('b',1),('b',2)]
>>> result = collections.OrderedDict()
>>> for item in mylist:
        if item[0] not in result:
             result[item[0]] = list()
        result[item[0]].append(item[1])
>>> result
OrderedDict([('a', [1, 2]), ('c', [1, 2]), ('b', [1, 2])])
>>> result.keys()
['a', 'c', 'b'] 
```

显然，您不能`dict(result)`在这种情况下使用，因为`dict`它不维护任何特定的键顺序。

# jquery - 使用循环获取链接然后使用 .get 显示一张图像

> ID：15181893
> 
> 赞同：0
> 
> 时间：2013-03-03T02:43:17.860
> 
> 标签：jquery, get

```
$(function() {
 $('.friends-foes-list a:first-child')
    .append('<img src="" class="ez_friend" />');
var href = $('div.friends-foes-list a:nth-child(1)').attr('href');

    for(var j=0;j<href.length;j++) {
      $.get(href[j] , function(data) { 
           var elem = $(data);
      $('.friends-foes-list .ez_friend')
         .attr('src',elem.find('#profile-advanced-right .main-content img') 
            .attr('src'));
       }, 'html');

     }
   }); 
```

我正在尝试获取`.friends-foes-list a:nth-child(1)`循环完美执行的每个 url。虽然现在的问题是`.get`抓取网址获取了我正在搜索的数据“快速显示它们”，然后显示每个 div 中的最后一个图像，而不是显示每个 div 需要显示的尊重图像......

现在我正在写这个问题，`.attr`内部是否也`.get`需要循环以将每个单独的图像显示给其尊重的 div？

如果它不需要处于循环中，我将如何处理？

`.attr('href')`var中的编辑代码忘记了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:15:30.330

看起来您的问题出在此选择器上：

```
$('.friends-foes-list .ez_friend')
         .attr('src',elem.find('#profile-advanced-right .main-content img') 
            .attr('src')); 
```

选择器`.friends-foes-list .ez_friend`将找到您在开始时添加的每个 img 标签。如果您只想将图像添加`get`到包含相应锚标记的容器中`href`，我认为这样的事情应该可以工作：

```
$(href[j]).find('.ez_friend')
         .attr('src',elem.find('#profile-advanced-right .main-content img') 
            .attr('src')); 
```

这样，它只能`.ez_friend`在同一个容器中找到，而不是该图像类的所有其他迭代。

当然，正如一些评论暗示的那样，您还需要从锚标记中获取正确的 url，例如：

```
$.get(href[j].attr('href') , function(data) { ... 
```

# gcc - CMake：使用 gcc 正确链接系统库

> ID：15181899
> 
> 赞同：6
> 
> 时间：2013-03-03T02:44:37.907
> 
> 标签：gcc, cmake, clang

我有一个依赖于数学库的静态库 mylib。

如果我首先将 mylib 与数学链接，然后链接到我的可执行文件，则它可以工作：

```
add_executable(myapp main.c)
target_link_libraries(mylib m)
target_link_libraries(myapp mylib) 
```

但是，如果我直接与可执行文件进行链接，则在使用 gcc 时会失败（使用 clang 它可以工作！）

```
add_executable(myapp main.c)
target_link_libraries(myapp m mylib) 
```

为什么这有什么不同？
我认为无论如何不可能将库链接在一起？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-03T10:48:06.183

使用 cmake`target_link_libraries`并不意味着你会链接任何东西。`target`它会在 a和 a`library`的 type/action之间创建依赖关系`link`。

我猜第一个示例的实际构建行将导致类似的结果：

```
gcc -o myapp myapp.o -lmylib -lm 
```

第二个

```
gcc -o myapp myapp.o -lm -lmylib 
```

. 如果`mylib`引用`m`了第二个示例（可能）没有链接。

尝试运行`make VERBOSE=1`并研究链接进程的命令行以真正了解正在发生的事情。clang 的链接器可能是智能的，并且在链接过程中实际删除库之前等待所有调用被链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T20:03:44.937

使用`target_link_libraries`时，指定链接库的顺序很重要。

这在使用 gcc 时不起作用（至少在 v4.6.3 中）：

```
target_link_libraries(myapp m mylib) 
```

虽然这有效：

```
target_link_libraries(myapp mylib m) 
```

所以 mylib 所依赖的所有库都必须**在**mylib 之后。

如果您跟踪实际的链接器调用，`make VERBOSE=1`您会发现这个损坏的示例：

```
gcc main.c.o  -o luatest -rdynamic -lm mylib.a 
```

这是工作的：

```
gcc main.c.o  -o luatest -rdynamic mylib.a -lm 
```

使用完全相同的参数调用 clang 在这两种情况下都有效！

所以@PatrickB 似乎是对的：

> clang 的链接器可能是智能的，并且在链接过程中实际删除库之前等待所有调用被链接。

# java - Java 对象在调试器中具有属性但没有 getter 方法

> ID：15181901
> 
> 赞同：0
> 
> 时间：2013-03-03T02:44:54.097
> 
> 标签：java, groovy

当我通过 Java 代码进行调试时，我经常在我的应用程序中看到很多对我有用的对象属性来获取它们并使用它们做一些事情，但是我查看 API 或 javadocs，该类没有任何此类属性或 getter获取这些属性值的方法。例如：

```
myPhoneCallObj.foo  has value "bar" in debugger
myPhoneCallObj.baz has value otherObj which in turn has other values like otherObj.baz 
```

我不能用 Java 做：

```
String myValue = myPhoneCallObj.foo 
```

因为它不会在 Java 中编译，但在 Groovy 中我可以编写上面的代码，并且在运行时，它会得到我需要的值。如何在 Java 代码中完成相同的操作？

myPhoneCallObj 是 Java 接口 PhoneCall 的一个实例，调试器将其显示为 PhoneCallImpl 类型（接口的第三方实现）。我无权访问该第三方的源代码以了解了解，但该接口具有完整的文档和 API 的 Javadoc。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T05:56:28.973

给定一个像这样的类：

```
class X
{
    private int value;

    @Override
    public String toString()
    {
        return (Integer.toString(value));
    }
} 
```

你可以这样做：

```
import java.lang.reflect.Field;

public class Test 
{
    public static void main(final String[] argv) 
        throws NoSuchFieldException, 
               IllegalArgumentException,
               IllegalAccessException
    {
        final X x;

        x = new X();
        System.out.println(x);
        changeValue(x);
        System.out.println(x);
    }

    private static void changeValue(final X x) 
        throws NoSuchFieldException, 
               IllegalArgumentException,
               IllegalAccessException
    {
        final Class<X> clazz;
        final Field    field;

        clazz = X.class;
        field = clazz.getDeclaredField("value");
        field.setAccessible(true);
        field.set(x, Integer.MAX_VALUE);
    }
} 
```

这里的关键是调用`field.setAccessible(true);`它说即使`value`是私有的也允许它被访问。

但是，字段是私有的通常是有原因的，如果您的代码因您正在操作的第 3 方代码的更高版本而中断，您不应该感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:56:19.413

这些属性是私有的还是在范围内受保护的？您可以直接访问的唯一属性是公共属性，但所有变量都将显示在调试对象检查器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T05:47:40.037

如果您绝对需要获取值，则可以使用反射。（这可能是 Groovy 正在做的事情）

# html - 两个部分的 twitter bootstrap 背景图像

> ID：15181905
> 
> 赞同：0
> 
> 时间：2013-03-03T02:45:55.343
> 
> 标签：html, css

我正在使用 Twitter 引导程序，并且我有一个带有顶部和底部的单页网站。我想在每个部分放置不同的背景图片；但是，我似乎无法让它工作 - 有什么建议吗？

这是我的 HTML：

```
<section class="container-fluid">
<div class="row-fluid">
    <div class="span4 offset4">
    <br />
        <img src="images/logo.png" width="400" height="400" image alt="image" />
    </div>
</div>
<div class="row12">
    <h3><p class="text-center"></p></h3>
    <h4><p class="text-center"></p></h4>
    <h4><p class="text-center"></p></h4>
    <br />
    <br />
</div>
<div class="row-fluid">
<ul class="thumbnails">
    <li class="span1 offset4">
        <a href="#" class="thumbnail">
            <img src="images/MAIL_icon.png" width="50" height="50" image alt="image" />
        </a>
    </li>
    <li class="span1">
        <a href="#" class="thumbnail">
            <img src="images/DRIBBBLE_icon.png" width="50" height="50" image alt="image" />
        </a>
     </li>
     <li class="span1">
        <a href="#" class="thumbnail">
            <img src="images/TWITTER_icon.png" width="50" height="50" image alt="image" />
        </a>
     </li>
     <li class="span1">
        <a href="#" class="thumbnail">
            <img src="images/INSTAGRAM_icon.png" width="50" height="50" image alt="image" />
            </a>
         </li>
    </ul>
</div>
</section> 
```

和我的 CSS：

```
#top_section {background-image: url(images/urban_lights.png); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:49:02.177

为您的不同部分分配不同的背景。

```
#topSection {
   background-image: url("url/to/image.jpg");
}
#bottomSection {
   background-image: url("url/to/image.jpg");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T04:02:15.930

如果您的 CSS 和图像位于根目录中的不同文件夹中，请尝试：

```
#top_section {background-image: url(../images/urban_lights.png); 
```

# console - PyCharm Python 控制台中的自动换行？

> ID：15181910
> 
> 赞同：66
> 
> 时间：2013-03-03T02:47:26.190
> 
> 标签：console, pycharm

这里有谁知道，我是否以及如何在 Python 控制台中为长行启用自动换行？我看不到它们的整体，我总是将窗口滚动到右边，以获取所有信息。我只提供了 5 个按钮：重新运行、停止、关闭、执行当前语句、帮助。

（与此相反，在事件日志中，我看到名为“使用软包装”的按钮。）

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-08-14T02:03:36.017

对于 3.4.1 版：

查看 -> 活动编辑器 -> 使用软包装

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-03-03T03:05:35.737

[我在这里](http://youtrack.jetbrains.com/issue/PY-3483?projectKey=PY&query=can)找到了答案：

```
File -> Settings -> Editor -> "Virtual Space" group -> Use soft wraps in console 
```

在 Pycharm 版本 2018.3.3 中，可以在下面找到

```
File -> Settings -> Editor -> General -> Console: Use soft wraps in console 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-07-01T16:03:08.330

从 Pycharm Community Edition 2016.1 开始，其他答案中提到的设置都没有了。

但是，打开调试控制台（即运行您的python 脚本），单击`Use Soft Wraps`那里的按钮，这也会影响python 控制台，无需重新启动。

[![软包裹按钮](../Images/4573593809ebbee77f9955a03ee6a8de.png)](https://i.stack.imgur.com/6QxfT.png)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-06-30T16:10:08.063

对于 PyCharm 4.5 版，可以在此处启用软包装作为全局默认设置：

文件 > 设置 > 编辑器 > 常规 > 软包装 > “在编辑器中使用软包装”

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-04-13T21:57:13.163

社区版它`Preferences>Editor>General>Use Soft Wraps in Editor` 然后变得超级酷你可以去`Preferences>Editor>General>Console>Use Soft Wraps in Editor`

[![软包装](../Images/3d1dc00f0b9da3818901552f77f2911e.png)](https://i.stack.imgur.com/KCIiF.png)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-02-16T15:34:20.933

对于 Windows 上的 Pycharm Professional 2016.3.2：

单击 Python 控制台的上半部分（即输出部分，而不是底部的输入行）。

在主菜单上选择帮助和查找操作...（快捷键：CTRL + SHIFT + A）。

在“输入操作或选项名称”搜索框中键入“soft”。

将“活动编辑器：使用软包装”切换为开。

运行一个带有长输出的**新**命令，您应该会在 Python 控制台中看到它软包装。请注意，**以前的**输出不会被包装。

（上述方法均不适用于 Python 控制台——尽管它们确实适用于调试控制台和事件日志）

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-08-13T11:35:54.333

截至 2018 年 - 我在这里找到了设置：

设置 -> 编辑器 -> 常规 -> 控制台 -> 在控制台中使用软包装：

[![设置 -> 编辑器 -> 常规 -> 控制台 -> 在控制台中使用软包装](../Images/75ed70315207948d875a14be805b0adf.png)](https://i.stack.imgur.com/ocotg.png)

# jquery - 如何为 iframe 中的元素设置 :hover 为 false

> ID：15181911
> 
> 赞同：1
> 
> 时间：2013-03-03T02:47:28.803
> 
> 标签：jquery, html, iframe, hover, tumblr

我想要做的是将我制作的主题上的 tumblr 关注和仪表板按钮上的悬停效果设置为 false。

如果您不知道，他们会在您的页面上自动拥有某种带有自己属性`iframe`的 id 。`#tumblr_controls`

`iframe`在保留点击功能和所有功能的同时，我如何能够关闭这些链接的单独悬停效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:57:02.247

不幸的是，您不能在`iframe`不同域中更改 CSS（或 JS）。你所看到的就是你得到的。出于安全原因，可能会这样做，例如 Twitter 不希望您的网站将狡猾的代码注入他们的推文`iframe`，因为这会错误地反映在他们身上。

有关更多详细信息，请参阅[“我可以将 CSS 应用于 iframe 中的元素吗？”](https://stackoverflow.com/a/3286196/1156119)

# c - 设置仅限于数组中的值的东西？

> ID：15181915
> 
> 赞同：0
> 
> 时间：2013-03-03T02:49:02.460
> 
> 标签：c, arrays, if-statement

我目前正在做一个项目，但我不完全确定如何做到这一点，但我想要一个 if 语句，其中包含与此类似的内容

```
if(a != b[]){
    printf("Use another value!");
} 
```

其中 b[] 是数组中的任何值。因此，例如，如果我有 100 个值并且用户输入的不是其中任何一个，那么它将打印“使用另一个值！”

我想我应该指定我正在这样做是 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T02:55:07.683

在 C# 中你可以去

ArrayVariable.Contains(对象)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:04:35.910

你可以遍历循环并检查它的值

```
for(int i=0;i<sizeof(b);i++)
{
   if(a!=b[i]
   {
    printf("Use another value");
    break;
  }
} 
```

我想它是以这种方式完成的。我已经很长时间没有真正使用过 C 了。

# javascript - 从文本框中读取值

> ID：15181916
> 
> 赞同：0
> 
> 时间：2013-03-03T02:49:06.983
> 
> 标签：javascript

我有一个简单的文本框：

```
<input type="text" id="username" /><br />
<input type="button" id="Submit" value="Submit" onclick="Submit()" /> 
```

函数定义为：

```
function Submit() {
   var username = document.getElementById("username").value;
   alert("Welcome " + username);
} 
```

为什么我会收到以下错误？

> 无法读取 null 的属性“值”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:50:16.500

重命名您的函数。`Submit`可能是您浏览器中的保留字（尽管您的代码在[![](../Images/14bbb1fcaadc8eda2aae0a0f564683df.png)google-chrome](/questions/tagged/google-chrome "显示标记为“谷歌浏览器”的问题")中运行良好）

```
<input type="text" id="username" /><br />
<input type="button" id="Submit" value="Submit" onclick="mySubmit()" /> 
```

```
function mySubmit() {
   var username = document.getElementById("username").value;
   alert("Welcome " + username);
} 
```

如果做不到这一点，请仔细检查您发布的代码实际上是错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T03:02:28.053

**Internet Explorer**做了一些非常令人沮丧的事情，称为“自动全局变量”。

页面上具有**NAME**属性或**ID**属性的每个元素都会自动分配为页面上的全局对象。

因此，您无意中发生了*命名空间冲突*，因为您的函数和按钮都称为“提交”。

尝试重命名您的按钮（和/或添加一个文档类型，告诉新版本的 IE 停止这样做！）

# matrix - 在 XNA 中使用 Matrix.CreatePerspectiveOffCenter 变换矩阵：消失点到中心

> ID：15181920
> 
> 赞同：0
> 
> 时间：2013-03-03T02:50:06.253
> 
> 标签：matrix, 3d, xna, translation, transform

我试图获得以下观点：![在此处输入图像描述](../Images/0a533e9f743c2e4a27858ef2600f1022.png)

`Matrix.CreateOrthographicOffCenter`本质上，我正在做一个带有一些 3D 图形的 2D 游戏，所以我从`Matrix.CreatePerspectiveOffCenter`

我已经绘制了一个图元，通过减小它的 z-index，它会走得更远，但它总是在 (0, 0) （左上角）的方向上消失，而消失点应该是中心。

我的变换设置现在看起来像这样（(640, 360) 是屏幕的中心）：

```
basicEffect.Projection = Matrix.CreatePerspectiveOffCenter(0, graphicsDevice.Viewport.Width, graphicsDevice.Viewport.Height, 0, 1, 10);
basicEffect.View = Matrix.Identity * Matrix.CreateLookAt(new Vector3(640, 360, 1), new Vector3(640, 360, 0), new Vector3(0, 1, 0));
basicEffect.World = Matrix.CreateTranslation(0, 0, 0); 
```

我无法将消失点移到屏幕中心。我设法（在某种程度上）使用 CreatePerspective 视图来做到这一点，但我想继续使用 CreatePerspectiveOffCenter，因为我可以轻松地将正常像素位置转换为 3D 空间。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T13:09:23.373

最后我使用了以下。如果您正在寻找一种解决方案来创建具有“2D 感觉”的 3d 视图，这可能会派上用场。通过这些平移，z-index 为 0 与屏幕的宽度和高度完全匹配，并且消失点位于屏幕的中心。

```
basicEffect.Projection = Matrix.CreatePerspectiveFieldOfView((float)Math.PI / 2f, 1, 1f / 1000, 1000f);
basicEffect.View = Matrix.CreateLookAt(new Vector3(0, 0, 1f), new Vector3(0, 0, 0), new Vector3(0, 1, 0));
basicEffect.World = Matrix.CreateTranslation(0, 0, 0); 
```

# function - PowerShell 函数返回类型与预期不符

> ID：15181924
> 
> 赞同：0
> 
> 时间：2013-03-03T02:50:28.190
> 
> 标签：function, powershell, casting

我有一个接受字符串参数的脚本：

```
script-that-takes-string-param.ps1 

param(
    [Parameter(Mandatory=$true, HelpMessage="path")]
    [string]$path,
) 
```

我有另一个脚本调用第一个脚本：

```
parent-script.ps1 

function CreateDir($dir) {
    if (!(Test-Path $dir)) {
        mkdir $dir
    }
}

function CreatePath($BaseDir, $Environment, $Site, $Domain){     
    $path = [string]::format("{0}{1}\{2}\{3}", $BaseDir, $Environment, $Site, $Domain)
    CreateDir $path
    $path
}

$path = CreatePath 'c:\web\' 'qa' 'site1' 'com'

.\script-that-takes-string-param.ps1 -path $path 
```

运行此脚本会引发异常：

```
"Cannot process argument transformation on parameter 'path'. Cannot convert value to type System.String" 
```

转换参数不起作用：

```
.\script-that-takes-string-param.ps1 -path [string] $path 
```

并且转换函数结果也不起作用：

```
$path = [string] CreatePath 'global' 'site1' 
```

但真正奇怪的是，如果我`parent-script.ps1`从 PS 命令行运行两次，第一次它会抛出异常，但第二次它执行时没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:29:41.613

尝试删除“返回”。未保存到变量的输出将自动返回。它不应该有任何区别，但尝试不会有什么坏处。

你能提供一个完整的例外吗？没有看到完整的异常，我感觉错误是由脚本内部的某些东西引起的（例如函数）。

**编辑**您`mkdir`的问题。当你运行它时，它会返回一个代表创建目录的`DirectoryInfo`对象（如果我没记错的话是一个对象）。要解决此问题，请尝试：

```
function CreateDir($dir) {
    if (!(Test-Path $dir)) {
        mkdir $dir | out-null
    }
} 
```

或者像这样组合它们：

```
function CreatePath($BaseDir, $Environment, $Site, $Domain){     
    $path = [string]::format("{0}{1}\{2}\{3}", $BaseDir, $Environment, $Site, $Domain)

    if(!(Test-Path $path -PathType Container)) {
        New-Item $path -ItemType Directory | Out-Null
    }

    $path
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:04:09.420

我最好的猜测是你的

```
#do some other stuff with $path 
```

将某些内容写入标准输出，导致函数返回一个数组，其中包含所述输出和您期望的路径。你能发送关于你在那段时间里所做的事情的详细信息吗？

# python - 以元组为参数的新样式格式

> ID：15181927
> 
> 赞同：31
> 
> 时间：2013-03-03T02:50:54.640
> 
> 标签：python, string, formatting

为什么我不能使用元组作为新样式（“string”.format（））的格式化程序的参数？它在旧样式（“字符串”％）中工作正常吗？

此代码有效：

```
>>> tuple = (500000, 500, 5)
... print "First item: %d, second item: %d and third item: %d." % tuple

    First item: 500000, second item: 500 and third item: 5. 
```

这不会：

```
>>> tuple = (500000, 500, 5)
... print("First item: {:d}, second item: {:d} and third item: {:d}."
...       .format(tuple))

    Traceback (most recent call last):
     File "<stdin>", line 2, in <module>
    ValueError: Unknown format code 'd' for object of type 'str' 
```

即使使用 {!r}

```
>>> tuple = (500000, 500, 5)
... print("First item: {!r}, second item: {!r} and third item: {!r}."
...       .format(tuple))

    Traceback (most recent call last):
     File "<stdin>", line 2, in <module>
    IndexError: tuple index out of range 
```

虽然它以这种方式工作：

```
>>> print("First item: {!r}, second item: {!r} and third item: {!r}."
...       .format(500000, 500, 50))

    First item: 500000, second item: 500 and third item: 5. 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-03T02:55:03.937

旧的格式化方式使用二元运算符，`%`. 就其性质而言，它只能接受两个参数。新的格式化方式使用一种方法。方法可以采用任意数量的参数。

因为你有时需要传递多个东西来格式化，并且总是用一个项目创建元组有点笨拙，所以旧式的方法想出了一个技巧：如果你将它作为一个元组传递，它将使用tuple 作为要格式化的东西。如果您传递元组以外的其他内容，它将使用它作为唯一格式化的东西。

新方法不需要这样的技巧：因为它是一种方法，它可以接受任意数量的参数。因此，需要将多个要格式化的东西作为单独的参数传递。幸运的是，您可以使用以下方法将元组解包到参数中`*`：

```
print("First item: {:d}, second item: {:d} and third item: {:d}.".format(*tuple)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-03T02:55:31.883

正如[icktoofay](https://stackoverflow.com/a/15181942/1907098)解释的那样，在旧的格式化风格中，如果你传入一个元组，Python 会自动解包它。

但是，您不能在该`str.format`方法中使用元组，因为 Python 认为您只传递了一个参数。您必须使用`*`运算符解压缩元组，才能将每个元素作为单独的参数传递。

```
>>> t = (500000, 500, 5)
>>> "First item: {:d}, second item: {:d} and third item: {:d}.".format(*t)
First item: 500000, second item: 500 and third item: 5. 
```

此外，您会注意到我将您的`tuple`变量重命名为`t`- 不要为变量使用内置名称，因为您将覆盖它们，这可能会导致问题出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-12T06:53:29.507

`format()`如果您手动索引花括号内的元组，实际上可以使用元组作为参数：

```
>>> t = (500000, 500, 5)
>>> print("First item: {0[0]:d}, second item: {0[1]:d} and third item: {0[2]:d}.".format(t))
First item: 500000, second item: 500 and third item: 5. 
```

不过，我发现这比`*`方法不太清楚。

# .net - 如何使用 Lambda 将 LINQ 理解查询语法转换为方法语法

> ID：15181933
> 
> 赞同：18
> 
> 时间：2013-03-03T02:52:17.450
> 
> 标签：.net, linq, lambda, linq-query-syntax

是否有工具、过程或解决方案可以将以下 LINQ 查询语法转换为带有 Lambda 的方法语法（点表示法）？我希望解决方案将以下查询语法转换为这样的方法语法。

```
var filteredEmployees = 
    from employee in allEmployees
    where employee.DepartmentID < 4 && employee.EmployeeID < 10
    orderby employee.DepartmentID descending,
            employee.LastName descending
    select employee; 
```

到以下

```
var filteredEmployees2 = allEmployees.Where(employee => ((employee.DepartmentID < 4) && (employee.EmployeeID < 10)))
        .OrderByDescending(employee => employee.DepartmentID)
        .ThenByDescending(employee => employee.LastName); 
```

我想用它来更好地学习方法语法。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-03T21:47:41.833

[LINQPad](http://www.linqpad.net/)是满足您需要的好工具。我从他们的网站“偷”了以下屏幕截图，以更好地说明它是如何工作的。如果您使用 linq 语法编写查询，则可以单击以红色突出显示的按钮以查看等效的 lambda 语法：![在此处输入图像描述](../Images/dd379e4272811c82128b93e1930233b5.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-03T02:52:17.450

如果我们强制查询语法返回一个 IQueryable 类型，那么我们可以进入方法语法。

在这里，我将查询更改为返回 IQueryable 类型：

```
IQueryable<Employee> filteredEmployees = 
    (from employee in allEmployees.AsQueryable()
    where employee.DepartmentID < 4 && employee.EmployeeID < 10
    orderby employee.DepartmentID descending,
            employee.LastName descending
    select employee);

Console.WriteLine(filteredEmployees.ToString()); 
```

在前面的代码中，我们将“AsQueryable()”添加到“allEmployees”列表类型。返回类型现在将是 IQueryable，因此“filteredEmployees”现在将是“IQueryable”类型。然后在“filteredEmployees”上我们需要做的就是是调用“ToString()”方法。

以下内容被写入控制台。

```
System.Collections.Generic.List`1[UserQuery+Employee]
     .Where(employee => ((employee.DepartmentID < 4) AndAlso (employee.EmployeeID < 10)))
     .OrderByDescending(employee => employee.DepartmentID)
     .ThenByDescending(employee => employee.LastName) 
```

它并不完美，但我们可以轻松地将其编辑为以下内容

```
IEnumerable<Employee> filteredEmployees2 = allEmployees
        .Where(employee => ((employee.DepartmentID < 4) && (employee.EmployeeID < 10)))
        .OrderByDescending(employee => employee.DepartmentID)
        .ThenByDescending(employee => employee.LastName);

Console.WriteLine(filteredEmployees); 
```

在前面的代码中，我删除了“System.Collections.Generic.List`1[UserQuery+Employee]”并将其替换为“allEmployees”。我还将“AndAlso”替换为“&&”。

这将返回与查询语法中的查询相同的结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T03:47:27.277

您可以通过声明生成一些对象的 lambda 表达式来获得更直接的表达式。实际的表达式将是您希望使用查询语法看到的查询。然后通过检查编译器生成的表达式树，您可以查看进行了哪些方法调用，而无需更改原始查询。

```
Expression<Func<object>> fn = () =>
    from employee in allEmployees
    where employee.DepartmentID < 4 && employee.EmployeeID < 10
    orderby employee.DepartmentID descending,
            employee.LastName descending
    select employee;
// inspect fn.Body 
```

像您那样使用`IQueryable<>`不会生成相同的查询，但会稍作修改。`AsQueryable()`你必须忽略的电话。查询提供程序也有可能重写表达式，因此您使用的返回值`ToString()`可能没有 1:1 的对应关系。编译器生成的表达式正是您所期望的。

# android - Eclipse如何将按钮背景颜色更改回默认值

> ID：15181937
> 
> 赞同：2
> 
> 时间：2013-03-03T02:53:32.800
> 
> 标签：android, button

按钮的默认背景颜色是什么。请以html颜色代码的形式告诉我背景颜色。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:40:13.790

Android基本上有不同的主题。主题决定了应用到小部件的样式。主题在路径下的themes.xml文件中定义

> android-sdk\platforms\android-15\data\res\values\themes.xml

现在我们需要找到在themes.xml 中定义的Button 的样式。当您使用它时，您会发现类似：

```
<!-- Button styles -->

<item name="buttonStyle">@android:style/Widget.Button</item> 
```

这意味着主题将样式 Widget.Button 应用于按钮。现在寻找风格

> 小部件.按钮

这种风格将在

```
android-sdk\platforms\android-15\data\res\values\styles.xml 
```

您会在 Widget.Button 的 theme.xml 中找到类似下面的内容

```
<style name="Widget.Button">
    <item name="android:background">@android:drawable/btn_default</item>
    <item name="android:focusable">true</item>
    <item name="android:clickable">true</item>
    <item name="android:textAppearance">?android:attr/textAppearanceSmallInverse</item>
    <item name="android:textColor">@android:color/primary_text_light</item>
    <item name="android:gravity">center_vertical|center_horizontal</item>
</style> 
```

现在在上面的代码中重要的是行

```
<item name="android:background">@android:drawable/btn_default</item> 
```

这意味着有一个名为 btn_default 的可绘制对象设置为按钮背景。

现在我们需要在 android-sdk\platforms\android-15\data\res 下的一个可绘制文件夹中找到一个名为 btn_default.* 的文件。

经过一番搜索，您会找到文件 android-sdk\platforms\android-15\data\res\drawable\btn_default.xml

它将包含如下内容：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_window_focused="false" android:state_enabled="true" android:drawable="@drawable/btn_default_normal" />
<item android:state_window_focused="false" android:state_enabled="false" android:drawable="@drawable/btn_default_normal_disable" />
<item android:state_pressed="true" android:drawable="@drawable/btn_default_pressed" />
<item android:state_focused="true" android:state_enabled="true" android:drawable="@drawable/btn_default_selected" />
<item android:state_enabled="true" android:drawable="@drawable/btn_default_normal" />
<item android:state_focused="true" android:drawable="@drawable/btn_default_normal_disable_focused" />
<item android:drawable="@drawable/btn_default_normal_disable" /> 
```

所以这是一个可绘制的选择器。此选择器根据按钮状态选择不同的背景。例如，按下的按钮将具有与未按下的按钮不同的背景。

所以我们需要看一下Button的默认（非按下）状态。

```
<item android:state_enabled="true" android:drawable="@drawable/btn_default_normal" /> 
```

因此，此处应用了以下可绘制对象：

```
btn_default_normal 
```

我们现在需要在 android-sdk\platforms\android-15\data\res 下的一个可绘制文件夹中找到一个名为 btn_default_normal.* 的文件。

这又可以是图像或 xml 文件，例如 btn_default_normal.xml。

现在，您将在不同的可绘制文件夹中找到多个名为“btn_default_normal.9.png”的文件，用于不同的分辨率。

所以现在您知道其中没有包含特定十六进制代码的颜色。它是一个 9 补丁图像 (btn_default_normal.9.png)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T05:20:44.440

您可以将背景颜色设置为@null。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-11T04:12:46.713

简单 - 转到布局\查看代码并删除 android:#color 代码；-)

# ios - xcode 构建设置中缺少模拟器 SDK

> ID：15181940
> 
> 赞同：2
> 
> 时间：2013-03-03T02:54:51.423
> 
> 标签：ios, xcode, ios-simulator

我发现许多教程（例如[这个](http://immersedcode.org/2011/4/25/sdl-on-ios/)）提到能够为项目的构建设置设置基本 SDK，以使用 iPhone 模拟器。我正在运行最新版本的 Xcode，但似乎唯一可用的 SDK 是 MacOS 和 iOS。即使从 Preferences>Downloads 下载了一些较旧的模拟器，我也看不到任何其他可用的 SDK。

我不知道我是否破坏了某些东西，或者我什至不应该能够选择任何模拟器 SDK 作为基础 SDK。我对 Xcode 还太陌生，无法真正了解。从诸如此类的问题中[，](https://stackoverflow.com/questions/10356880/xcodebuild-missing-ios-simulator-sdk)我假设我应该至少看到一个“iOS 模拟器”作为选项。

我之前尝试过通过 makefile 进行编译，因此正在安装各种命令行工具，所以我不确定是否有什么东西弄乱了我的环境。我尝试完全卸载 xcode 和开发人员工具并从应用商店的最新版本重新安装，但它似乎并没有改变任何东西。我什至似乎无法为模拟器构建现有项目，而不久前它曾经能够做到，所以我打开哪个项目似乎并不重要。

我是否破坏了某些东西，或者我只是错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:00:33.617

你错过了一些明显的东西。:)

Base SDK 与在设备或模拟器上运行无关。将 Base SDK 保留为“最新”。

要在模拟器中运行您的应用程序，请注意工具栏中 Play 和 Stop 图标右侧的下拉菜单。在下拉列表中，选择要构建的目标，然后选择要运行的设备或模拟器。选择后，转到产品菜单并选择运行 (Cmd-R)。

# java - 更改我单击的图像

> ID：15181941
> 
> 赞同：-2
> 
> 时间：2013-03-03T02:54:59.930
> 
> 标签：java, swing, awt, mouselistener

我有这个可运行的代码，运行时它不能正常工作。

当您在编辑器框架内单击时，它应该将您单击的图像更改为不同的图像。

图像的变化发生在`setImage()`.

仅`int array images`存储,`0`或.`1``2`

`getImage()`, 用于绘制 中的图像，根据图像在某一点的值`paintComponent`读取并绘制每个图像。`int array images`

```
package mapMaker;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.awt.event.MouseWheelEvent;
import java.awt.event.MouseWheelListener;
import java.awt.image.BufferedImage;
import java.io.File;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class MapMakerWindow implements ActionListener, KeyListener {

//Create all the different objects (I like to organize them by what they are and what they do)
JFrame mainFrame = new JFrame("Dungeon Crawler Map Maker");

PaintPanel editorFrame = new PaintPanel("Editor", true, true, true, true);
JInternalFrame sliderFrame = new JInternalFrame("Scaler");
JInternalFrame blankFrame = new JInternalFrame("DO NOT USE");//this is used so that the other JIFs show correctly, for some reason the last one added to the mainFrame doesn't work properly

JPanel mainEP = new JPanel();
JPanel sliderPanel = new JPanel();

JMenuBar jBar = new JMenuBar();
JMenu toolsMenu = new JMenu("Tools");
JMenu fileMenu = new JMenu("File");
JMenuItem toggleBrushesFrame = new JMenuItem("Show Brushes Menu");
JMenuItem toggleToolsFrame = new JMenuItem("Show Tools Menu");
JMenuItem toggleEditorFrame = new JMenuItem("Show Editor Menu");

boolean showToolsFrame;
boolean showBrushesFrame;

static JSlider slider = new JSlider(0, 60, 10);

ChangeListener sizeAction = new ChangeListener() {
    public void stateChanged (ChangeEvent event) {
        PaintPanel.scale = slider.getValue();
        editorFrame.repaint();
        System.out.println("Changing: " + slider.getValue() + " Scale: " + PaintPanel.scale);
    }
};

public static void main(String args[]) {
    new MapMakerWindow();
}

public MapMakerWindow() {

    slider.setVisible(true);
    sliderPanel.add(slider);
    sliderFrame.add(sliderPanel);
    sliderFrame.addKeyListener(this);
    mainFrame.add(editorFrame);
    mainFrame.add(sliderFrame);
    mainFrame.add(blankFrame);
    mainFrame.addKeyListener(this);

    jBar.add(fileMenu);
    jBar.add(toolsMenu);
    toolsMenu.add(toggleToolsFrame);
    toolsMenu.add(toggleBrushesFrame);
    toolsMenu.add(toggleEditorFrame);
    toggleToolsFrame.addActionListener(this);
    toggleBrushesFrame.addActionListener(this);
    toggleEditorFrame.addActionListener(this);

    editorFrame.setSize(700, 450);
    sliderFrame.setSize(200, 80);
    //sliderFrame.setSize(1000, 100);
    mainFrame.setSize(750, 600);

    editorFrame.setLocation(15, 15);
    editorFrame.setVisible(true);

    slider.addChangeListener(sizeAction);

    sliderFrame.setLocation(editorFrame.getWidth() - sliderFrame.getWidth() + editorFrame.getX(), editorFrame.getY() + editorFrame.getHeight() + 5);
    sliderFrame.setVisible(true);

    mainFrame.setJMenuBar(jBar);
    mainFrame.setLocationRelativeTo(null); //puts the window in the middle of your screen
    mainFrame.setVisible(true);
    mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
}

@Override
public void actionPerformed(ActionEvent e) { //all the clicking for the JMenuBar and it's items

}

@Override
public void keyPressed(KeyEvent e) {
    int keyCode = e.getKeyCode();
    if (keyCode == KeyEvent.VK_ESCAPE) {
        System.exit(0);
    } else if (keyCode == KeyEvent.VK_A && e.isControlDown()) {//opens all the JIF's for ease of use for now
        editorFrame.setLocation(15, 15);
        editorFrame.setVisible(true);
        System.out.println("PRESSED");
    } else if (keyCode == KeyEvent.VK_F) {
        System.out.println(slider.getValue());
    }
}

@Override
public void keyTyped(KeyEvent e) {
}

@Override
public void keyReleased(KeyEvent e) {
}

}

class PaintPanel extends JInternalFrame implements MouseListener, MouseMotionListener, MouseWheelListener {

static int sliderValue = MapMakerWindow.slider.getValue();
int[] gridSize = {100, 100};
int[] images = new int[gridSize[0] * gridSize[1]];
static int scale = sliderValue;
int xOffset = 0;
int yOffset = 0;
int xPressed = 0;
int yPressed = 0;
int dragXOff = 0;
int dragYOff = 0;
int color = 2;
/*Just pick any 3 images on your comp, it doesn't matter what the sizes are*/
File blank = new File("/Users/Calvin/Dropbox/src/mapMaker/blank.png");
File ground = new File("/Users/Calvin/Dropbox/src/mapMaker/ground.png");
File grass = new File("/Users/Calvin/Dropbox/src/mapMaker/grass.png");

BufferedImage blankImg;
Image blankResizedImg;
BufferedImage groundImg;
Image groundResizedImg;
BufferedImage grassImg;
Image grassResizedImg;

JPanel mainPanel = new JPanel() {
    @Override
    public void paintComponent(Graphics g) {
        try{
            blankImg = ImageIO.read(blank);
            blankResizedImg = ImageIO.read(blank);
            groundImg = ImageIO.read(ground);
            groundResizedImg = ImageIO.read(ground);
            grassImg = ImageIO.read(grass);
            grassResizedImg = ImageIO.read(grass);
        }catch(Exception e){
            System.out.println(e);
        }
        blankResizedImg = blankImg.getScaledInstance(scale, scale, Image.SCALE_FAST);
        groundResizedImg = groundImg.getScaledInstance(scale, scale, Image.SCALE_FAST);
        grassResizedImg = grassImg.getScaledInstance(scale, scale, Image.SCALE_FAST);

        super.paintComponent(g);
        for (int x = 0; x < gridSize[0] * scale; x += blankResizedImg.getWidth(this)){
            for (int y = 0; y < gridSize[1] * scale; y += blankResizedImg.getHeight(this)) {
                g.drawImage(getImage((x * 100 + y)/scale), x + xOffset + dragXOff, y + yOffset + dragYOff, groundResizedImg.getWidth(this), groundResizedImg.getHeight(this), this);
                //g.drawString((x * 100 + y)/scale + "", x + xOffset + dragXOff, y + yOffset + dragYOff);
            }
        }
        fixGrid();
    }
};

public Image getImage(int i){
    Image newImage = null;
        if(images[i] == 0){
            newImage = blankResizedImg;
        }else if(images[i] == 1){
            newImage = groundResizedImg;
        }else if(images[i] == 2){
            newImage = grassResizedImg;
        }
    return newImage;
}

public void writeImages() {
    for(int x = 0; x < images.length; x++) {
        if(color == 0){
            images[x] = 0;
        }else if(color == 1){
            images[x] = 1;
        }else if(color == 2){
            images[x] = 2;
        }
    }
}

public void setImage(int x, int y){
    images[(y * 100 + x)/scale] = 1;
    repaint();
}

public void fixGrid() {
    if (scale * gridSize[0] < getWidth()) {
        scale = (int) Math.ceil((double) getWidth() / (double) gridSize[0]);
    } else if (scale * gridSize[1] < getHeight()) {
        scale = (int) Math.ceil((double) getHeight() / (double) gridSize[1]);
    }
    if (xOffset < 0 && gridSize[0] * scale < getWidth()) {
        xOffset = 0;
    }
    if (gridSize[0] * scale + xOffset < getWidth()) {
        xOffset = getWidth() - gridSize[0] * scale;
    } 
    if (gridSize[1] * scale + yOffset < getHeight()) {
        yOffset = getHeight() - gridSize[1] * scale;
    }
    if(xOffset > 0){
        xOffset = 0;
    }
    if(yOffset > 0){
        yOffset = 0;
    }
    MapMakerWindow.slider.setValue(scale);
    repaint();
}

public PaintPanel(String title, boolean resizable, boolean closable, boolean maximizable, boolean iconifiable) {
    this.setTitle(title);
    if (resizable == true) {
        setResizable(true);
    }
    if (closable == true) {
        setClosable(true);
    }
    if (maximizable == true) {
        setMaximizable(true);
    }
    if (iconifiable == true) {
        setIconifiable(true);
    }
    addMouseListener(this);
    addMouseMotionListener(this);
    addMouseWheelListener(this);
    writeImages();
    add(mainPanel);
}

@Override
public void mouseWheelMoved(MouseWheelEvent e) {
        int xChange = 1;
        int yChange = 1;
        int notches = e.getWheelRotation();
        scale -= notches;
        xChange *= (int) (e.getX() / scale);
        yChange *= (int) (e.getY() / scale);
        xOffset -= xChange;
        yOffset -= yChange;
        fixGrid();
}

@Override
public void mouseDragged(MouseEvent e) {
    if (SwingUtilities.isMiddleMouseButton(e)) {
        dragXOff = e.getX() - xPressed;
        dragYOff = e.getY() - yPressed;
        fixGrid();
    }
}

@Override
public void mouseMoved(MouseEvent e) {
}

@Override
public void mouseClicked(MouseEvent e) {
    setImage(e.getX(), e.getY());
}

@Override
public void mouseEntered(MouseEvent e) {
}

@Override
public void mouseExited(MouseEvent e) {
}

@Override
public void mousePressed(MouseEvent e) {
    if (SwingUtilities.isMiddleMouseButton(e)) {
        xPressed = e.getX();
        yPressed = e.getY();
    }
}

@Override
public void mouseReleased(MouseEvent e) {
    if (SwingUtilities.isMiddleMouseButton(e)) {
        xOffset += dragXOff;
        yOffset += dragYOff;
        xPressed = 0;
        yPressed = 0;
        dragXOff = 0;
        dragYOff = 0;
        fixGrid();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:34:54.877

我自己，如果我想要一个网格来更改鼠标按下时的图像，我会使用一个 JLabel 网格并简单地交换 ImageIcons。例如：

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;

import javax.swing.*;

@SuppressWarnings("serial")
public class GridExample extends JPanel {
   private Ground[][] groundMap = {
         { Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.WATER,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.WATER,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.DIRT,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT,
               Ground.DIRT, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.DIRT,
               Ground.WATER, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT,
               Ground.DIRT, Ground.WATER, Ground.WATER, Ground.WATER,
               Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.GRASS,
               Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.DIRT,
               Ground.DIRT, Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.GRASS,
               Ground.GRASS, Ground.DIRT, Ground.DIRT, Ground.DIRT,
               Ground.WATER, Ground.WATER, Ground.WATER },
         { Ground.GRASS, Ground.GRASS, Ground.GRASS, Ground.GRASS,
               Ground.GRASS, Ground.GRASS, Ground.DIRT, Ground.DIRT,
               Ground.DIRT, Ground.WATER, Ground.WATER }, };

   private JLabel[][] labelGrid = new JLabel[groundMap.length][groundMap[0].length];

   public GridExample() {
      setLayout(new GridLayout(groundMap.length, groundMap[0].length));
      for (int r = 0; r < labelGrid.length; r++) {
         for (int c = 0; c < labelGrid[r].length; c++) {
            labelGrid[r][c] = new JLabel();
            labelGrid[r][c].setIcon(groundMap[r][c].getIcon());
            add(labelGrid[r][c]);
         }
      }

      addMouseListener(new MyMouseListener());
   }

   private class MyMouseListener extends MouseAdapter {
      @Override
      public void mousePressed(MouseEvent mEvt) {
         Component comp = getComponentAt(mEvt.getPoint());
         for (int row = 0; row < labelGrid.length; row++) {
            for (int col = 0; col < labelGrid[row].length; col++) {
               if (labelGrid[row][col] == comp) {
                  Ground ground = groundMap[row][col];
                  int mapCode = ground.getValue();
                  mapCode++;
                  mapCode %= Ground.values().length;
                  groundMap[row][col] = Ground.values()[mapCode];
                  labelGrid[row][col].setIcon(groundMap[row][col].getIcon());
               }
            }
         }
      }
   }

   private static void createAndShowGui() {
      GridExample mainPanel = new GridExample();

      JFrame frame = new JFrame("GridExample");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

enum Ground {
   DIRT(0, new Color(205, 133, 63)), GRASS(1, new Color(0, 107, 60)), WATER(2,
         new Color(29, 172, 214));
   private int value;
   private Color color;
   private Icon icon;

   private Ground(int value, Color color) {
      this.value = value;
      this.color = color;

      icon = createIcon();
   }

   private Icon createIcon() {
      int width = 24;
      BufferedImage img = new BufferedImage(width, width,
            BufferedImage.TYPE_INT_ARGB);
      Graphics g = img.getGraphics();
      g.setColor(color);
      g.fillRect(0, 0, width, width);
      g.dispose();
      return new ImageIcon(img);
   }

   public int getValue() {
      return value;
   }

   public Color getColor() {
      return color;
   }

   public Icon getIcon() {
      return icon;
   }

   public static Ground getGround(int value) {
      for (Ground ground : Ground.values()) {
         if (ground.getValue() == value) {
            return ground;
         }
      }
      return null;
   }

} 
```

# python - Django 将参数从视图传递到 URL 以再次查看

> ID：15181945
> 
> 赞同：0
> 
> 时间：2013-03-03T02:55:23.560
> 
> 标签：python, django

所以我有一个提交视图，在成功提交某些东西后，我想对视图做`HttpResponseRedirect`一个`vote`。

这是我的提交视图：

```
def submit(request):
    if request.method == 'POST':
        form = SubmissionForm(request.POST)
        if form.is_valid():
            cd = form.cleaned_data
            #Need to insert a link object into the database here
            url = reverse('vote', kwargs={'submit':True})
            return HttpResponseRedirect(url)
    else:
        form = SubmissionForm
    return render_to_response('submit.html', {'form':form}, context_instance = RequestContext(request)) 
```

这是我的投票观点：

```
def vote(request, submit=False):
    return render_to_response('voting.html', {'submit':submit}, context_instance = RequestContext(request)) 
```

我的困惑是，我应该怎么做`urls.py`才能将提交的价值传递给投票？

目前，我有：

```
url(r'^$', 'vote', {'submit': True}, name='vote') 
```

但我不能让变量 submit 的值取决于我从提交视图传递的内容。

这有意义吗？我知道这可能是一个非常基本的问题。我是 Django 的新手，我非常感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T03:17:18.887

```
 url(r'^(?P<submit>.*)/$', 'vote', name='vote'), 
```

# html - 获取水平列表以对齐 html 表格 css 的顶部

> ID：15181948
> 
> 赞同：0
> 
> 时间：2013-03-03T02:56:05.357
> 
> 标签：html, css, alignment, html-table, horizontallist

n00b 试图在页面顶部创建一个简单的导航栏。我无法在表格单元格的顶部对齐水平列表。

具体来说，我不想让“项目 1”和“项目 2”在表格顶部对齐。最终，我想要“Logo Here”部分一直到左边，“items”一直到右边。

当然，我现在只满足于让“项目”在顶部对齐。

html:

```
 <table cellpadding="0" border="1">
        <tr> 
           <td valign="top">Logo Here</td>
           <td valign="top">Total Accounts:   Logged On:   Last Updated:</td>
           <td>
              <ul id="navlist">
                   <li><a href="#">Item 1</a></li>
                   <li><a href="#">Item 2</a></li>
              </ul>
           </td>
       </tr>
     </table> 
```

CSS：

```
 #navlist li
    {
        display: inline;
        list-style-type: none;
        padding-right: 20px;
        vertical-align: text-top;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:02:26.207

我们不应该使用表格进行布局，但这是所提问题的解决方案。

uls 默认有填充和边距。尝试删除它

```
#navlist {
    padding:0;
    margin:0;  
    float:right; /* and to get the items to the right */
} 
```

示例：http: [//jsfiddle.net/vQvvZ/](http://jsfiddle.net/vQvvZ/)

我已将表格宽度设为 100%，因为您一直向右指定“和”项目。”

# c# - 不会向父函数抛出异常

> ID：15181952
> 
> 赞同：0
> 
> 时间：2013-03-03T02:56:58.383
> 
> 标签：c#, visual-studio, debugging, exception, try-catch

我在我的项目中使用 VS2012，当服务器无法向目标机器发送消息时，我正在处理 Socket 异常，但是当它无法发送 msg（我已经把它放在 trycatch 中）时，调试器只是中断了 catch 块并说出错误而不发送转发到父捕获块。请告诉我，如果我做错了什么。

```
 private void sendMessageToTarget(string Message, IPAddress targetAddress, int port)
    {
        TcpClient client = new TcpClient();
        IPEndPoint server = new IPEndPoint(targetAddress, OUT_MESSAGE_PORT);
        Thread senderThread = new Thread(new ThreadStart(delegate()
        {
            try
            {
                client.Connect(server);
                MemoryStream memstream = new MemoryStream();
                NetworkStream netstream = client.GetStream();
                byte[] sentString = Encoding.ASCII.GetBytes(Message);
                netstream.Write(sentString, 0, sentString.Length);
                memstream.Close();
                netstream.Close();
                client.Close();
            }
            catch (SocketException ex)
            {
                throw;
            }
        }));
        senderThread.Start();
    } // Sending Message Method 
```

以上是我向目标发送消息的代码

```
try
{
      sendMessageToTarget("CONN_CHECKER", target, OUT_MESSAGE_PORT);
}
catch (Exception se)
{
      ConnectedUsers.Remove(target.ToString());
      UpdateConnectedUserToTeacher();
      if (NeedFollowStudents.Contains(target.ToString()))
      {
          NeedFollowStudents.Remove(target.ToString());
      }
      UserLostConnection(this, new EventArgs());
} 
```

这是我希望执行操作的另一个函数中的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:19:34.327

从一个线程到另一个线程没有神奇的编组异常。甚至*几乎*可以保证，之后的代码`senderThread.Start();`将在线程委托中的代码之前执行。

您传递给`Thread`构造函数的函数成为新线程上的顶级函数。如果这样的函数抛出异常（就像你做的那样），这个异常将进入[`AppDomain.UnhandledException`](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception%28v=vs.100%29.aspx)事件并且通常终止应用程序。

您的选择

*   恢复为同步代码（一个线程上的所有代码）
*   使用现有的异步方法来通知您的代码操作结束。根据方法通知可以通过事件（类似于[WebClient.DownloadStringAsync](http://msdn.microsoft.com/en-us/library/ms144202.aspx)）或通过回调和调用 EndXXXXX （如 Socket.BeginSend）
*   利用[`async`](http://msdn.microsoft.com/en-US/library/vstudio/hh156513.aspx)
*   手动实现对原始线程的同步和编组异常。

请注意，只有同步版本的代码才能按照您想要的方式工作，所有其他使用多个线程的代码将无法将异常返回给同一个“父函数”（使用`async`至少可以让您的代码看起来像您想要的那样，即使它不会以相同的方式工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:04:46.150

这只是一个猜测，但我相信您应该只将 Try/Catch 放在父函数中而不是子函数中。当异常发生时，它将显示在父方法中。您编写它的方式将在子方法中捕获异常，并且不会将其传递回您的父方法。

# xpath - 在 Selenium 中通过 XPath 查找元素

> ID：15181954
> 
> 赞同：0
> 
> 时间：2013-03-03T02:57:54.590
> 
> 标签：xpath, selenium

我正在尝试使用 Selenium 浏览网页。我试图通过它的 xpath 访问一个按钮。对于网站上的其他按钮，它工作正常。但是对于这个特定的，我不断收到无法定位元素的错误。Firebug 只是以这种格式给我 xpath：//*[@id="continueButton"]。

我注意到按钮周围有包装。它们的结构类似于

```
<div class = "cButtonWrapper">
  <div class = "cButtonHolder">
    <input type="image" id="continueButton" name="Continue" alt="Continue" src="/store/images/btn_continue.gif" value="Continue">
  </div>
</div> 
```

按钮周围的包装可能与无法找到它有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T20:55:57.000

`<input>`XPath 可能无法正确定位该元素，因为您使用了无效的 HTML。尝试在您的页面源代码中使用`<input id="continueButton"/>`或。`<input id="continueButton"></input>`

# c++ - 在布尔函数之前预期不合格的ID？

> ID：15181958
> 
> 赞同：1
> 
> 时间：2013-03-03T02:58:13.403
> 
> 标签：c++, compiler-errors

我正在编写一个简单（非常简单）的链表来提高我的编程技能，但显然，我失败了，因为我遇到了这个编译器错误，我不知道出了什么问题。问题在于删除功能：

```
bool delete(node* head, node* delMe){
    node* current;

    if(delMe == head){
            if(head->next != NULL){
                    head = delMe->next;
                    free(delMe);
            }else{
                    head = NULL;
                    cout<<"There are no more elements in the LL"<<endl;
            }
            return true;
    }else{
            current = head;
            while(current){
                    if(current->next == delMe){
                            current->next = delMe->next;
                            free(delMe);
                            return true;
                    }
                    current = current->next;
            }

    }
    return false;
    } 
```

在“删除”之前，我得到了预期的不合格 ID。

我认为它可能与上面的插入函数有关，但是当我完全注释掉删除函数时，程序编译没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:01:39.887

`delete`是 C++ 中的关键字。您不能将其用作标识符。

# ios - 在 iPhone 上解析 Google 自动完成 XML

> ID：15181960
> 
> 赞同：4
> 
> 时间：2013-03-03T02:58:34.580
> 
> 标签：ios, xml, autocomplete, nsxmlparser

我正在尝试让 Google 搜索自动完成功能在我的应用程序中运行，但我遇到了一些麻烦。我正在使用`UISearchBar`它的`textDidChange`委托方法来这样做。当文本发生变化时，我`NSXmlParser`会读取这样的 XML 文件：

```
<toplevel>
<CompleteSuggestion>
<suggestion data="searchterms"/>
<num_queries int="13400000"/>
</CompleteSuggestion>
<CompleteSuggestion>
<suggestion data="searchterms twitter"/>
<num_queries int="52500000"/>
</CompleteSuggestion>
</toplevel> 
```

[http://suggestqueries.google.com/complete/search?client=toolbar&q=SEARCHTERM](http://suggestqueries.google.com/complete/search?client=toolbar&q=SEARCHTERM)

其中 SEARCHTERM 将是 UISearchBar 文本。这将返回一个 XML 文件，然后我将使用它解析该文件以找到建议的术语

`- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict`

但我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T03:18:09.787

一般的想法是有一个`searchSuggestions`可变的数组属性。在该`parserDidStartDocument:`方法中，确保将其初始化为一个新的空数组 - 类似于`self.searchSuggestions = [NSMutableArray array];`.

然后，在您的 didStartElement 委托方法中，执行此操作以获取每个建议的项目。

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict {
    if ([elementName isEqualToString:@"suggestion"]) {
        NSString *suggestion = attributeDict[@"data"];
        [self.searchSuggestions addObject:suggestion];
    }
} 
```

一旦你得到你的`parserDidEndDocument:`委托回调，确保做任何你需要做的事情来显示它——这取决于你的解析器委托是什么对象。如果你的解析器的委托是一个表格视图控制器，你可以重新加载表格。如果它是某个请求对象，您可以回调请求的委托、执行完成块或发布通知。

# jquery - js生成表单

> ID：15181964
> 
> 赞同：1
> 
> 时间：2013-03-03T02:58:57.823
> 
> 标签：jquery

我有一个 js 生成的表单（即我从 js 代码中回显一个表单）。

因此，我编写了一个提交处理程序，该处理程序在使用提交该表单时被激活：

```
$(document).ready(function(){
$('#form-coures').submit(function(event){ 
```

至少这是我想要达到的。

这里的问题是，当我提交该表单时，不会调用处理程序？！

有任何想法吗？

注意：如果我不通过 js 定义相同的表单，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:04:50.717

如果没有实际看到所有代码，很难说，但是您在准备好文档时注册提交事件处理程序，此时 DOM 元素`form-courses`尚不存在（如果您在使用 javascript 加载页面后生成它）。将表单添加到页面*后*注册事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:05:44.957

附加事件处理程序时表单不存在。

使用事件委托`$(document).on('submit', 'form', function () {...})`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T03:03:14.763

嗯...我从来没有用 JQuery 做过这个（例如：以编程方式制作整个表单），但就想法而言，您是否考虑过将 onclick 事件添加到您的提交按钮？

# regex - Regex、wordpress 和 Search Regex 插件 - 删除附属链接

> ID：15181968
> 
> 赞同：0
> 
> 时间：2013-03-03T02:59:31.290
> 
> 标签：regex, wordpress, replace

我有一个 wordpress 博客，我在其中尝试使用名为“**搜索正则表达式**”的插件来删除部分帖子文本，我将其作为广告放在底部（不要问）

现在，我花了几个月的时间试图找到一个正确的答案，我知道 mysql 不完全支持正则表达式，甚至尝试这样做可能会很痛苦，所以我决定使用这个插入。

我的 wordpress 博客有几千篇文章，底部的代码几乎相同，代码看起来像这样：

```
 <!--more-->
    <br />
    <center>
    <table width="100%">
    <tbody>
    <tr>
    <td bgcolor="#000000" style="text-align: center; font-size: 16px; font-weight: bold;">
    <a href="http://myaffiliate.com/?q2=affiliateid" target="_blank" rel="nofollow" ><img title="blabla" src="http://someimage.com/somewhere></a><br />
    <a href="http://myaffiliate.com/?q2=affiliateid" rel="nofollow" target="_blank"><b>Some random Blah</b></a>
    </td>
    </tr>
    </tbody>
    </table>
    </center> 
```

外面的一切都是固定的，不会改变，标签内的一切都随着每个帖子而变化。

现在，这是多行文本，我在寻找匹配的字符串甚至工具时遇到问题，这可以帮助我解决这个难题。我在几个博客上传播了这个，我认为与其用相同的重复代码向我的博客发送垃圾邮件，这些代码占我帖子中所有内容的 1/3，我可以简单地通过 single.php 包含它

因此，我希望将其从我的数据库中永久删除。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:58:54.543

您可以尝试这样的事情（在测试之前始终进行备份）

```
global $wpdb;
$posts=$wpdb->get_results("SELECT ID,post_content FROM {$wpdb->posts} LIMIT 0,1");
foreach($posts as $p){
   $pos = strpos($p->post_content, '<!--more-->');
   $more_content = substr($p->post_content,$pos);
   if($pos !== false && strstr($more_content,"myaffiliate.com" && $p->ID>0)){
      $content = substr($p->post_content,0,$pos-1);
      $wpdb->query($wpdb->prepare("UPDATE {$wpdb->posts} SET post_content='%s' WHERE ID=%d",$content,$p->ID));
   }
} 
```

这是未经测试的，但你明白了。

`<!--more-->`如果它包含字符串，这将删除帖子内容部分`"myaffiliate.com"`（这有点延迟匹配，但我们可以使用`preg_match`或`preg_replace`如果您需要它来改进它）。

您可以`LIMIT 0,1`在测试时使用，然后根据需要增加它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:50:29.647

我不是博客或正则表达式方面的专家，但您不能使用 python 脚本替换所有文本来替换它吗？

像这样的东西

```
 re.sub(r'     <!--more-->
<br />
<center>
<table width="100%">
<tbody>
<tr> 

 [\.]+

</td>
</tr>
</tbody>
</table>
</center> 
', "") 
```

如果我没记错的话，那应该找到找到广告的所有情况并将其替换为空白字符串:)

# c# - 多个应用程序的通用 app.config

> ID：15181969
> 
> 赞同：6
> 
> 时间：2013-03-03T02:59:36.070
> 
> 标签：c#

我有几个 C# 控制台应用程序，它们需要具有相同的设置集。我想避免重复并避免`app.config`每个应用程序分开。

有什么方法可以读取应用程序（， ）的通用`app.config`文件（比如）。`common.config``app1.exe``app2.exe`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-03T03:10:31.917

创建一个名为 app.config 的文件。将它放在项目目录之外的某个位置，例如在解决方案目录中。将其作为具有文件相对路径的链接项添加到您的项目中。在每个项目中为此项（应用程序配置）设置正确的构建操作。

现在，当每个项目构建时，文件将被复制到项目的输出目录，并具有正确的名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-03T03:25:28.650

您可以使用以下代码加载外部 app.config：

```
config = ConfigurationManager.OpenExeConfiguration(Path.Combine("C:\test\root", "Master.exe"));
string logpath = config.AppSettings.Settings["Log.Path"].Value; 
```

并将设置保存为：

```
config = ConfigurationManager.OpenExeConfiguration(Path.Combine("C:\test\root", "Master.exe"));
config.AppSettings.Settings["Log.Path"].Value = "C:\newpath";
config.Save(); 
```

您可能必须在其中一个应用程序中拥有一个主配置，并将其余部分指向此。通常，这种方法被认为是不好的做法。锁定文件的不同应用程序可能存在问题。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T03:25:51.693

@Ran 的答案是一个选项，但每个应用程序在构建后仍然会有自己的配置文件。在编译时它们是相同的，但在部署时它们是副本。

您还可以使用以下方法从另一个应用程序打开一个应用程序的配置文件： [`ConfigurationManager.OpenExeConfiguration(string)`](http://msdn.microsoft.com/en-us/library/ms224437.aspx)

您可以使用所有应用程序引用的外部配置文件： [`ConfigurationManager.OpenMappedExeConfiguration`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.openmappedexeconfiguration.aspx)

并且可以选择使用机器配置文件： [`ConfigurationManager.OpenMachineConfiguration()`](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.openmachineconfiguration.aspx)

# scala - 如何让 Intellij IDEA 12.0 与 Play Framework 2.1.0 应用程序和 Scala 2.10.0 一起使用？

> ID：15181971
> 
> 赞同：12
> 
> 时间：2013-03-03T03:00:03.470
> 
> 标签：scala, intellij-idea, sbt, playframework-2.1, sbt-idea

所以我一直在尝试让 IDEA 12.0 与 Play 2.1.0 和 Scala 2.10.0 一起使用。我几乎放弃了，因为它没有按照我想要的方式为我工作。这是我`build.properties`的`Build.scala`, 和`plugins.sbt`. 我按照 playframework 网站上的方法在`idea with-sources=yes`play 控制台中执行。我还尝试添加`sbt-idea`插件版本 1.3.0-SNAPSHOT，如 plugins.sbt 中所示，但如果我想引用我刚刚创建的新视图模板或新路线，似乎没有任何效果。我可以在 IDEA 中工作的唯一方法是，如果我有一个控制台打开并运行`sbt compile`，回到 IDEA，它会自行刷新并识别新的视图模板或路由。

`plugins.sbt`

```
logLevel := Level.Warn

scalaVersion := "2.10.0"

// The Typesafe repository 
resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"
// Sonatype snapshots to get sbt-idea 1.3.0-SNAPSHOT
//resolvers += "Sonatype snapshots" at "http://oss.sonatype.org/content/repositories/snapshots/"

// Use the Play sbt plugin for Play projects
addSbtPlugin("play" % "sbt-plugin" % "2.1.0")
//addSbtPlugin("com.github.mpeltonen" % "sbt-idea" % "1.3.0-SNAPSHOT") 
```

`build.properties`

```
sbt.version=0.12.2 
```

`Build.scala`

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "admin-application"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    jdbc,
    anorm
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here      
  )
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T07:47:49.977

如果您使用 IDEA**社区**版，有一个 SBT 控制台插件（请参阅[http://plugins.jetbrains.com/plugin?pluginId=5007](http://plugins.jetbrains.com/plugin?pluginId=5007)）允许您直接在编辑器中编译/运行您的 Play 项目。这就是我每天工作的方式，很好（我使用`~run`命令，然后不再关心）。

您还可以在 IDEA 中添加一个远程调试器来监听您的本地服务器（它在调试模式下运行）并像往常一样使用它。

如果您使用 IDEA **Ultimate**版，JetBrains 发布了一个 Play Framework 插件，它似乎可以正常工作（但我还没有测试过）。看看这些教程：

*   [http://confluence.jetbrains.com/display/IntelliJIDEA/Play+Framework+2.0](http://confluence.jetbrains.com/display/IntelliJIDEA/Play+Framework+2.0)或
*   [http://www.jamesward.com/2013/01/23/video-create-and-run-play-framework-apps-in-intellij](http://www.jamesward.com/2013/01/23/video-create-and-run-play-framework-apps-in-intellij)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T14:55:23.633

我认为这就是它目前的工作方式。正如@pedrofurla 所建议的，您可以继续`~run`在 sbt/play 控制台上运行。可悲的是，IMO 没有其他方式 IntelliJ 可以自动编译您的 scala 视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T15:08:45.500

只需添加`project/plugins.sbt`以下内容并重新运行播放创意

```
 // FIX SBT IDEA  PLAY 2.1  
   resolvers += "Typesafe repository" at "http://repo.typesafe.com/typesafe/releases/"  

  // Use the Play sbt plugin for Play projects  
   addSbtPlugin("play" % "sbt-plugin" % "2.1.0") 
```

# javascript - 如何从具有特定 alt= 值的字符串中删除图像元素？

> ID：15181977
> 
> 赞同：0
> 
> 时间：2013-03-03T03:01:15.077
> 
> 标签：javascript

我有一个字符串，其中包含存储在 var 中的 HTML 图像元素。我想删除那些具有 alt="today" 的图像元素并保持其余图像不变。

```
<img src="./images/ok.gif" alt="today" /> 
```

我努力了：

```
var replaced2 = content.replace(/\<img src="./images/ok.gif" alt="today" />\/g,''); 
```

但没有运气。任何人都可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T03:09:44.383

您不需要正则表达式：

```
var replaced2 = content.replace('<img src="./images/ok.gif" alt="today" />',''); 
```

## [jsFiddle](http://jsfiddle.net/wm4SQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T03:08:38.923

试试这个作为你的正则表达式：

```
/<img src=".\/images\/ok.gif" alt="today" \/>/g 
```

必须确保转义任何正斜杠，因为它们表示正则表达式

```
/<regexp syntax>/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-03T03:11:39.820

你需要研究的是：JavaScript RegExp

# java - 在隐性回文方法上终止代码时遇到问题

> ID：15181984
> 
> 赞同：0
> 
> 时间：2013-03-03T03:02:34.230
> 
> 标签：java, palindrome, stack-overflow

我正在尝试编写代码来告诉用户他们输入的单词是否是回文。

我正在使用递归方法来反转单词，但它没有正确终止。当`StackOverFlowError`我测试它时出现。我的终止代码对我来说看起来是正确的，所以我不确定它为什么不起作用。

此外，当我尝试将`String`对象全部设为小写字符时，调试器是否显示该单词全部小写，还是保持不变？

**这是代码：**

```
public class Palindrome
{
private String word;

/**
 * Constructor for objects of class PalindromeTester
 */
public Palindrome(String supposedPalindrome)
{
    word = supposedPalindrome;
}

/**
 * Tests if the word is a palindrome or not.
 */
public void testPalindrome()
{
    String reversed = reverse();
    if(reversed.equals(word.toLowerCase()))
    {
        System.out.println(word + " is a palindrome!");
    }
    else
    {
        System.out.println(word + " is not a palindrome.");
    }    
}

/**
 * Reverses the word.
 * 
 * @return the reversed string.
 */
private String reverse()
{
    return reverseHelper(word);
}

/**
 * A recursive method that reverses the String for the
 * reverse the string method.
 * 
 * @return the reversed string.
 */
private String reverseHelper(String s)
{
    s.toLowerCase();
    if(s.length() <= 1)
    {
        return s;
    }
    else
    {
        return reverseHelper(s.substring(1, s.length()) + s.charAt(0));
    }
}
} 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:14:55.477

当有内置方法时，为什么要使用递归系统？

```
public class Palindrome() {
  public Palindrome(String supposedPalindrome) {
    if( supposedPalindrome.equals(new StringBuffer(supposedPalindrome).reverse().toString())) {
      System.out.println(supposedPalindrome+" is a palindrome!");
    }
    else {
      System.out.println(supposedPalindrome+" is not a palindrome!");
    }
  }
} 
```

或者类似的东西，使用[`StringBuffer`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/StringBuffer.html)'s 的内置`reverse()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T03:28:33.800

字符串是不可变的。String.toLowerCase(String) 返回一个新字符串。

代替

```
s.toLowerCase(); 
```

和

```
s = s.toLowerCase(); 
```

甚至更好

```
return reverseHelper(word.toLowerCase()); 
```

并删除

```
s.toLowerCase(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:41:21.483

您的代码中有两个错误：

1.  String 是**不可变**
    的 ，因此`s.toLowerCase()`不会对 进行任何更改`s`，您需要分配回`String`
    `s = s.toLowerCase();`

2.  您的递归方法有
    `return reverseHelper(s.substring(1, s.length()) + s.charAt(0));`
    问题，它总是传递`String`长度`s.length()` *（我的意思是如果`String s`长度为**5**，那么您的递归调用总是传递长度为 5 的字符串，只有字符的位置被更改）*

**建议：**

1.  让您递归调用以缩短您的字符串，以便`if`在字符串反转后最终匹配条件
2.  或者使用[StringBuilder#reverse()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/StringBuilder.html#reverse%28%29)方法来反转你的字符串

# java - 将 32 位二进制数转换为十进制数

> ID：15181986
> 
> 赞同：0
> 
> 时间：2013-03-03T03:03:23.557
> 
> 标签：java, ieee-754

可以帮助我的人我有以下缺点，在这种情况下输入负十进制二进制输入 -20 (11000001101000000000000000000000) 会引发以下错误：

线程“主”java.lang.NumberFormatException 中的异常：对于输入字符串：“110000011010000000000000000000000”

```
# Include  <stdio.h> 
# include  <stdlib.h>

public static void main(String[] args) {       
    int bits = Integer.parseInt("1000001101000000000000… 2);        
    float f1 = Float.intBitsToFloat(bits);
    int Sign = ((bits >> 31) == 0) ? 1 : -1;
    int Exponent = ((bits >> 23) & 0xff);
    int Mantissa = (Exponent== 0)
    ? (bits & 0x7fffff) << 1
    : (bits & 0x7fffff) | 0x800000;
    System.out.println("Sign: " + Sign + " Exponent: " + Exponent + "Mantissa:" + Mantissa);
    System.out.println(f1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:19:01.197

从[Integer.#parseInt(java.lang.String, int)](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String,%20int%29)：

> ...字符串中的字符必须都是指定基数的数字（由 Character.digit(char, int) 是否**返回非负值**来确定）...

不幸的是，您想解析负值。您可以尝试`Long.parseLong`改用并强制`long`转换为`int`

```
int bits = (int) Long.parseLong("11000001101000000000000000000000", 2); 
```

这样，您将获得具有相同字节表示的 int

```
System.out.println(">"+Integer.toBinaryString(bits)); 
```

输出：

```
>11000001101000000000000000000000 
```

# java - 从另一种方法调用字符串 - Java

> ID：15181987
> 
> 赞同：-3
> 
> 时间：2013-03-03T03:03:39.187
> 
> 标签：java, eclipse, methods, using

我正在尝试从另一种方法中使用这个名为“用户名”的字符串，但我似乎不知道该怎么做。

我在这里有这段代码，它将文本字段的条目分配给变量，但我似乎无法在其他方法中使用此变量

```
 //Configuring content pane
    JFormattedTextField formattedTextField = new JFormattedTextField();
    formattedTextField.setBounds(129, 36, 120, 20);
    UsernameFrame.getContentPane().add(formattedTextField);
    UsernameFrame.setVisible(true);

    //Assigning text field entry to variable
    String username = formattedTextField.getText(); 
```

现在，我试图在下面粘贴的方法中使用这个变量，但我不知道我错过了什么。

```
 public void actionPerformed(ActionEvent e){
            if(username.length() < 5){

            }
            //Execute when the button is pressed
            System.out.println("The button has been pressed");
        } 
```

这可能是我想念的非常简单的事情，感谢您的帮助。

（完整代码）

[http://pastebin.com/RMszazd4](http://pastebin.com/RMszazd4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:06:15.323

`username`在你的类声明之后立即声明，如下所示：

```
public class App {
    private String username;
    public static void main(String[] args) {
        ...
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T04:44:01.047

您似乎没有办法阅读 JFormattedTextField。如果我理解您要正确执行的操作，则可以将 formattedTextField 声明为实例变量，然后在侦听器中声明用户名：

```
public class Frame {
JFrame UsernameFrame = new JFrame("Welcome");
private JFormattedTextField formattedTextField; 
```

……

```
btnSubmit.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            String username = formattedTextField.getText();
            if (username.length() < 5) {

            }
            // Execute when the button is pressed
            System.out.println("The button has been pressed");
        }
    }); 
```

现在您有了对 JFormattedTextField 文本的引用，可以在每次按下按钮时执行您想要执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-03T03:08:03.277

如果这是两个单独的方法，您将需要再次重新分配用户名变量，或者您可以在您的方法之外创建一个全局变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T03:08:06.020

您可能希望将字符串变量“用户名”作为参数传递给另一个方法，因为它不会在另一个方法中识别您的字符串的范围，除非它声明为全局的。

# android - Android 自定义相机预览为位图

> ID：15181990
> 
> 赞同：0
> 
> 时间：2013-03-03T03:04:16.320
> 
> 标签：android, bitmap, camera

我正在制作一个将当前相机预览显示为背景的游戏。我的 2D 游戏引擎 (e3roid) 可以使用位图中的纹理。如果我无法从相机中获取疼痛位图，我可以使用库将其转换为位图，因此我从相机预览中返回的数据类型无关紧要。我的问题是是否可以在不使用默认意图或 SurfaceView 的情况下从相机获取预览作为图像数据？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T05:19:57.403

尝试这个

`camera=Camera.open(); camera.setPreviewCallback(new PreviewCallback() { public void onPreviewFrame(byte[] bytes, Camera camera) { //bytes=preview data; } }); camera.setPreviewDisplay(null); camera.startPreview();`

或尝试 opencv(opencv.org)

# actionscript-3 - AIR for Android SocketServer over WiFi

> ID：15181993
> 
> 赞同：1
> 
> 时间：2013-03-03T03:04:47.587
> 
> 标签：actionscript-3, air, android-wifi

为 Android 开发多人游戏并使用 AIR SocketServer 类在服务器和客户端 AIR 应用程序之间进行通信。

在 Windows 8 上，我使用 Virtual Router Plus 将我的 PC 笔记本电脑（运行服务器应用程序的地方）设置为 wifi 热点。

我的 wifi 运行后在 cmd 中运行 ipconfig 以获取“无线 LAN 适配器本地连接”下的 ipv4 IP 地址

这是我在服务器应用程序中绑定并在客户端应用程序中连接的 IP。

如果我在同一台机器上同时启动服务器和客户端，一切正常。当我在我的 Android 设备上安装客户端应用程序时，我无法建立套接字连接。WiFi 在我的 Android 设备上正常运行。

通过本地 wifi 网络创建 socketserver 连接时，服务器机器上是否需要策略文件？如果是这样，客户端应用程序在尝试连接时不应该引发安全错误吗？

我不知道我的故障排除步骤应该是什么。任何提示或反馈表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:30:41.727

发生这种情况是因为 AIR Socket 通信仅适用于桌面应用程序。试试这个原生扩展，它对我来说很完美：http: [//blog.aboutme.be/2011/12/14/udp-native-extension-for-air-mobile-now-with-android-support/](http://blog.aboutme.be/2011/12/14/udp-native-extension-for-air-mobile-now-with-android-support/)

# mapreduce - Modification of Real World Haskell program to count number of words and lines using MapReduce

> ID：15181995
> 
> 赞同：0
> 
> 时间：2013-03-03T03:04:55.823
> 
> 标签：mapreduce, haskell

I'm trying to make some simple modifications to a program from Real World Haskell Chapter 24\. Here's some code that counts the number of lines in a file:

```
import qualified Data.ByteString.Lazy.Char8 as LB
lineCount :: [LB.ByteString] -> Int64
lineCount = mapReduce rdeepseq (LB.count '\n')
                      rdeepseq sum 
```

I'm trying to write some code that counts the words in the file. Here's what I came up with:

```
import qualified Data.ByteString.Lazy.Char8 as LB
lineCount :: [LB.ByteString] -> Int64
lineCount = mapReduce rdeepseq (length LB.words)
                      rdeepseq sum 
```

However, I get:

```
Couldn't match expected type `LB.ByteString -> b0'
            with actual type `Int'
In the return type of a call of `length'
Probable cause: `length' is applied to too many arguments
In the second argument of `mapReduce', namely `(length LB.words)'
In the expression:
  mapReduce rdeepseq (length LB.words) rdeepseq sum 
```

What could be the problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T04:54:10.357

You want to apply `length` to the result of calling `LB.words`, not to `LB.words` the function. Try `(length . LB.words)`.