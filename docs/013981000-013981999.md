# StackOverflow 问答 13981000-13981999

# php - PHP Imageline() 画笔提示和平滑线

> ID：13981001
> 
> 赞同：3
> 
> 时间：2012-12-20T21:44:54.383
> 
> 标签：php, image, image-processing, gd

所以，我对 PHP`imageline()`函数的结果有疑问。我应该先说一些行来自 HTML5 画布。第一个问题是生成的线条比应有的更不稳定。现在，`imageantialias()`修复了断断续续的线条问题，但是线条失去了应有的粗细。

第二个问题是笔尖同样相当不均匀，这与画布上的圆形笔尖相反。

以下是供参考的图像（在制作它们的非移动设备上可能不那么明显）：

[![应该是什么样的图像](../Images/f7a64b2f6bb38b018bfcab813266fb81.png)](https://i.stack.imgur.com/eeCcV.png)
[（来源：[socialcu.be](http://socialcu.be/Images/correct.png)）]

[![实际结果是什么图像](../Images/0ee4f40388727aa0a62237bd69a585fb.png)](https://i.stack.imgur.com/d24ZT.png)

有谁知道如何解决这些问题？:-)

# spring - 错误：jar 执行中的 noclassdeffounderror

> ID：13981008
> 
> 赞同：0
> 
> 时间：2012-12-20T21:45:27.393
> 
> 标签：spring, jar, manifest, executable-jar

我正在使用 swing 和 spring 来创建一个桌面应用程序。一切进展顺利，但是当我使用 eclipse JUNO 创建 jar 时，尝试在 cmd上将其作为*java -jar myjar.jar运行时出现此错误。*不知道问题出在哪里，求大神帮忙？

```
Exception in thread "AWT-EventQueue-0" java.lang.NoClassDefFoundError: org/springframework/context/ApplicationContext
        at efact.alfa1lab.nazca.jframe.NazcaLogin.<init>(NazcaLogin.java:145)
        at efact.alfa1lab.nazca.jframe.NazcaLogin$1.run(NazcaLogin.java:97)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$000(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.springframework.context.ApplicationContext
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 16 more 
```

这是我的文件夹结构

```
 - myclasses
 - images
 - lib
 - META-INF
 + MANIFEST.MF
   - applicationContext.xml
 - build.xml 
```

这是我的所有弹簧罐的**MANIFEST.MF**，包括：*spring-context-support-3.2.0.M1.jar*和*spring-context-3.2.0.M1.jar*

```
Manifest-Version: 1.0
Class-Path: lib/swingx-1.6.1.jar lib/spring-aop-3.2.0.M1.jar lib/spring-context-support-3.2.0.M1.jar lib/spring-context-3.2.0.M1.jar
  lib/javadbf-0.4.0.jar lib/log4j-1.2.16.jar lib/spring-asm-3.2.0.M1.jar lib/spring-beans-3.2.0.M1.jar  
  lib/spring-core-3.2.0.M1.jar lib/spring-expression-3.2.0.M1.jar lib/spring-orm-3.2.0.M1.jar
  lib/spring-oxm-3.2.0.M1.jar lib/spring-test-3.2.0.M1.jar lib/spring-tx-3.2.0.M1.jar lib/spring-web-3.2.0.M1.jar
  lib/spring-webmvc-3.0.5.RELEASE.jar lib/spring-webmvc-3.2.0.M1.jar lib/spring-ws-1.5.9-all.jar lib/troughoasis.jar 
  lib/commons-lang-2.3.jar lib/commons-logging-1.1.1.jar lib/concar.jar lib/ini4j-0.5.2-SNAPSHOT.jar
Main-Class: com.mycompany.MainClass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T06:35:27.020

中的`Class-Path`指令`MANIFEST.MF`没有按预期工作。我建议您将[One-JAR](http://one-jar.sourceforge.net/version-0.95/)与 Ant 或 Maven 结合使用，将您的应用程序及其所有依赖项打包到一个 JAR 中。我一直在使用这种方法，因为天知道有多久 - 完美无瑕。

# android - cacerts.bks 不存在

> ID：13981011
> 
> 赞同：8
> 
> 时间：2012-12-20T21:45:39.207
> 
> 标签：android, https, ssl-certificate, keytool, sniffing

我已经植根了我的 Android (4.0.4) 手机并安装了一个应用程序，它通过我的计算机代理所有 HTTP 流量。这工作正常，我可以查看和修改所有 HTTP 请求。但是 HTTPS 流量不会通过。我已经导出了代理的证书，但我发现-文件夹中没有`cacert.bks`-file `/system/etc/security`。

那么如何将我的自定义证书添加到受信任的证书列表中`keytool`呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-08-22T20:25:33.880

我遇到了一个自签名网络服务器证书的问题，我无法通过打开它来安装它。我在 logcat 中有一个“CertInstaller(28614)：没有找到匹配的私钥”。我的解决方案：

如果您想在不再使用 bks 文件时将新证书安装到 android 系统 cacert 存储中：

你当然必须有根。

1.  您必须以 pem 格式获取证书（从浏览器导出）。PEM 是一种编码格式，例如：

> ```
> -----BEGIN CERTIFICATE-----
> MIIDtjCCAp6gAwIBAgIQRJmNPMADJ72cdpW56tustTANBgkqhkiG9w0BAQUFADB1
> ...
> -----END CERTIFICATE----- 
> ```

2.  您必须获取主题名称的哈希值。

    > openssl x509 -inform PEM -subject_hash -in yourcert.crt

你会得到类似 0d188d89 的东西。

3.  您必须获得证书的文本版本。

    > openssl x509 -inform PEM -text -in yourcert.crt > yourcert.txt

4.  您必须在编辑器中切换文本和 pem 部分。它应该如下所示：

> ```
> -----BEGIN CERTIFICATE-----
> MIIDtjCCAp6gAwIBAgIQRJmNPMADJ72cdpW56tustTANBgkqhkiG9w0BAQUFADB1
> ...
> -----END CERTIFICATE----- 
> Certificate:
>     Data:
>         Version: 1 (0x0)
>         Serial Number:
> ... 
> ```

5.  您将文件重命名为“0d188d89.0”

6.  将带有 adb 或其他内容的文件复制到 /system/etc/security/cacerts/。

您只需进入设置/安全/受信任的凭据/系统即可检查证书按证书中的“组织”字段排序。

使用的信息来自： http: [//nelenkov.blogspot.de/2011/12/ics-trust-store-implementation.html](http://nelenkov.blogspot.de/2011/12/ics-trust-store-implementation.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T01:13:59.853

Afaik，在 ICS 之后，您无需 root 设备即可安装受信任的证书。有这样的设置。

[http://support.google.com/android/bin/answer.py?hl=en&answer=1649774](http://support.google.com/android/bin/answer.py?hl=en&answer=1649774)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-28T16:54:41.063

由于在 android 上使用了 oder openssl (0.9.*)，我不得不在用户 user2708846 的帖子[https://stackoverflow.com/a/18390177/3043726](https://stackoverflow.com/a/18390177/3043726)中使用“-subject_hash_old”而不是 -subject_hash”。

[我已经在 cyanogenmod 论坛http://forum.cyanogenmod.com/topic](http://forum.cyanogenmod.com/topic/82875-installing-cacert-certificates-on-android-as-system-credentials-without-lockscreen/)上总结了我采取的步骤（包括更改文件权限、将文件复制到 android 设备以及如何验证证书是否安装正确的帮助）[/82875-installing-cacert-certificates-on-android-as-system-credentials-without-lockscreen/](http://forum.cyanogenmod.com/topic/82875-installing-cacert-certificates-on-android-as-system-credentials-without-lockscreen/) 和我自己的博客[http://wiki.pcprobleemloos.nl/android/](http://wiki.pcprobleemloos.nl/android/)

# nginx - PHP-FPM 和 Nginx 重写导致下载

> ID：13981013
> 
> 赞同：8
> 
> 时间：2012-12-20T21:45:51.323
> 
> 标签：nginx, php

我有一个设置了 PHP-FPM 的 Nginx HTTP 服务器，几乎一切正常。我希望能够去`path/to/file`它给我`index.php?url=path/to/file`，它确实做到了。但是，它会下载实际的 PHP，它不会在浏览器中执行它。我不确定是什么原因造成的。

Nginx 配置：

```
server {
    listen 80;
    server_name sandbox.domain.tld;
    access_log /path/to/domain/log/sandbox.access.log;
    error_log /path/to/domain/log/sandbox.error.log;

    location / {
        root /path/to/sandbox;
        index index.php;

        if (!-e $request_filename) {
            rewrite ^/beta/(.+)$ /beta/index.php?url=$1 break;
        }
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include /usr/local/nginx/conf/fastcgi_params;
        fastcgi_param SCRIPT_FILENAME /path/to/sandbox$fastcgi_script_name;
    } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T22:06:56.593

尝试改变

`rewrite ^/beta/(.+)$ /beta/index.php?url=$1 break;`至

`rewrite ^/beta/(.+)$ /beta/index.php?url=$1 last; break;`

这应该让 nginx 重新读取 URI 并相应地处理它。

# java - 井字游戏错误

> ID：13981014
> 
> 赞同：0
> 
> 时间：2012-12-20T21:45:55.157
> 
> 标签：java

我编写了一个井字游戏，它编译和运行良好，但是如果你点击左上角的框，它会自动显示 X Wins [Like this](http://imgur.com/MfcqT)。这是董事会上唯一能做到这一点的运动。不知道我在确定获胜者时做错了什么。如果您想查看更多代码，完整的代码在[这里](http://pastebin.com/WNs6YxrM)。

```
 //Determine who won
        if(button1.getText() == button2.getText()
                && button2.getText() == button3.getText()
                && button1.getText() != "")
        {
            win = true;
        }
        else if(button4.getText() == button5.getText()
                    && button5.getText() == button6.getText()
                    && button4.getText() != "")
        {
            win = true;
        }
        else if(button7.getText() == button8.getText()
                    && button8.getText() == button9.getText()
                    && button7.getText() != "")
        {
            win = true;
        }

        else if(button1.getText() == button4.getText()
                    && button4.getText() == button7.getText()
                    && button1.getText() != "")
        {
            win = true;
        }
        else if(button2.getText() == button5.getText()
                    && button5.getText() == button8.getText()
                    && button2.getText() != "")
        {
            win = true;
        }
        else if(button3.getText() == button6.getText()
                        && button6.getText() == button9.getText()
                        && button3.getText() != "")
        {
                win = true;
        }
        else if(button1.getText() == button5.getText()
                    && button5.getText() == button9.getText()
                    && button1.getText() != "")
        {
            win = true;
        }
        else if(button3.getText() == button5.getText()
                    && button5.getText() == button7.getText()
                    && button1.getText() != "")
        {
            win = true;
        }
        else
        {
            win = false;
        }

        if (win == true)
        {
            JOptionPane.showMessageDialog(null,
                                          letter + " Wins!");
        }
        else if (count == 9 && win == false)
        {
            JOptionPane.showMessageDialog(null,
                                          "Tie Game!");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T21:47:48.847

不要使用`==`and比较字符串`!=`。使用`equals()`and`!equals()`代替。

请参阅[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

# java - 开源服务器性能监控 API

> ID：13981017
> 
> 赞同：3
> 
> 时间：2012-12-20T21:46:03.943
> 
> 标签：java, performance, spring, monitoring, metrics

有人知道/建议一个可以在 JBoss 上的 Java 应用程序中使用的**“开源”性能监控 API 吗？**

在 StackOverflow 和其他资源上进行搜索后，我发现 Java Simon、Perf4J 最近是一些不错的 API。

是否有任何其他具有良好记录的***开源***API ***（不是工具） ？***实际实施这些的人可以评论所涉及的成本吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:43:13.343

仅仅阅读 JMX-metrics 怎么样？MBean 提供了一些相关`jboss.system:type=ServerInfo`信息。您可以使用 twiddle 轻松读取 MBean 信息并使用返回的数字。

# vba - 如果日期已经过去，但如果单元格为空白 VBA，则删除行

> ID：13981021
> 
> 赞同：0
> 
> 时间：2012-12-20T21:46:11.383
> 
> 标签：vba, excel, delete-row

我只在有一个日期过去的情况下才尝试删除一行，但如果它在未来或空白则不会。现在，如果没有空白，我很难让代码不删除该行，因为我想保留没有日期的行。

```
Sub deleteSpudedWells()
Dim lastRow As Integer
Dim firstRow As Integer
Dim ctr As Integer

Dim currentCell As Range
Dim valueOfDColumn
Dim NoNSpudedWells As Boolean

 lastRow = 300
 firstRow = 10

 Application.ScreenUpdating = False
 With Sheets("NDIC Renewals")
     For ctr = lastRow To firstRow Step -1
         Set currentCell = .Cells(ctr, 4)
         valueOfDColumn = currentCell.Value
         NoNSpudedWells = valueOfDColumn >= Date

         If Not NoNSpudedWells Then
             Debug.Print "deleting row of cell " + currentCell.Address
             currentCell.EntireRow.Delete
         End If
     Next
 End With
 Application.ScreenUpdating = True
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:00:12.020

为您的 if 添加另一个条件：

```
If Not NoNSpudedWells AND valueOfDColumn <> 0 Then 
```

如果`currentCell`为空，它的值将 = 0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:01:51.390

试试这个：

```
 For ctr = lastRow To firstRow Step -1
         Set currentCell = .Cells(ctr, 4)
         valueOfDColumn = currentCell.Value               

         If NOT (valueOfDColumn >= Date or currentCell.Value = "") Then
             Debug.Print "deleting row of cell " + currentCell.Address
             currentCell.EntireRow.Delete
         End If
     Next 
```

**顺便说一句** ，最好声明您的`valueOfDColumn`as`Date`而不是将其保留为默认值`variant`:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:16:04.963

感谢 BonCodigo 它给了我一个想法，我能够调整代码工作。需要阅读此内容以使代码正常运行**valueOfDColumn** = ""

```
 Sub deleteSpudedWells()
     Dim lastRow As Integer
     Dim firstRow As Integer
     Dim ctr As Integer

     Dim currentCell As Range
     Dim valueOfDColumn
     Dim NoNSpudedWells As Boolean

     lastRow = 300
     firstRow = 10

     Application.ScreenUpdating = False
     With Sheets("NDIC Renewals")
         For ctr = lastRow To firstRow Step -1
             Set currentCell = .Cells(ctr, 4)
             valueOfDColumn = currentCell.Value
             NoNSpudedWells = valueOfDColumn >= Date Or valueOfDColumn = ""

             If Not NoNSpudedWells Then
                 Debug.Print "deleting row of cell " + currentCell.Address
                 currentCell.EntireRow.Delete
             End If
         Next
     End With
     Application.ScreenUpdating = True
 End Sub 
```

# sql - 如何使用证书保护 SQL Server 连接？

> ID：13981022
> 
> 赞同：1
> 
> 时间：2012-12-20T21:46:12.407
> 
> 标签：sql, sql-server

`SqlConnection`我的 Windows 应用程序正在使用没有任何适当安全措施的对象打开与远程 SQL Server 的数据库连接。

我想使用证书保护数据库连接。我阅读了有关在 SQL Server 和我的 Windows 应用程序上添加证书的内容。但我很困惑如何做到这一点，也不知道它会有多有效。

任何想法或有用的文章链接？

谢谢

# java - 为什么我们可以实例化 Pair 但我们不能与 Pair

> ID：13981028
> 
> 赞同：1
> 
> 时间：2012-12-20T21:46:22.570
> 
> 标签：java, generics, wildcard, type-parameter, bounded-wildcard

那么为什么我们可以实例化 Pair 但我们不能实例化 Pair

```
Pair<T> p=new Pair<T>(); 
```

VS

```
Pair<?> p=new Pair<?>(); 
```

我知道这`<?>`意味着未知类型-->`<? extends Object>`

但`<T>`意思不一样--->`<T extends Object>`

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:49:23.643

`<T>`本身并不意味着什么。`T`类型必须在某个地方定义，无论是在您的类还是方法级别，例如：

```
public class PairFactory<T> {
  public Pair<T> makePair() {
    return new Pair<T>();
  }
} 
```

在这种情况下，您`<T>`在实例化期间决定：

```
new PairFactory<String>(); 
```

这涉及更多：

```
public <T> Pair<T> makePair() {
  return new Pair<T>();
} 
```

编译器将尝试根据上下文找出类型，例如：

```
Pair<Date> p = makePair(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T21:54:16.510

不， ？和 T 不是一回事。? 表示**通配符**泛型类型参数——它可以是运行时的任何东西。`T`表示在运行时将是*特定类型*的泛型类型参数——我们只是在编译时不知道它。

也就是说，a`List<?>`可以包含字符串、整数、浮点数等。A`List<T>`只能包含`T`参数化为的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T02:26:39.470

不允许使用通配符作为参数进行实例化，因为它通常是无用的。相反，您可以只使用类型参数范围内的*任何*引用类型（在这种情况下，没有边界，所以任何引用类型都可以）：

```
class SuperCrazyBogusType { }
Pair<?> p = new Pair<SuperCrazyBogusType>(); 
```

（或者您可以使用更普通的类型，例如`Object`）。

你知道这有多奇怪吗？是的，您可以使用任何任意类型进行实例化，即使是与您的程序的其余部分或您正在做的事情无关的类型。是的，它是 100% 安全和正确的，因为你想要的只是一个`Pair<?>`（一对未知类型）。

这指出了为什么它是荒谬的，以及为什么这样做的语法是不必要的。几乎没有什么可以用`Pair<?>`你得到的（例如你不能把任何数据放进去），因为你不知道类型参数。

# osgi - Jersey 的动态 REST 服务声明

> ID：13981030
> 
> 赞同：2
> 
> 时间：2012-12-20T21:46:24.887
> 
> 标签：osgi, guice, peaberry

我正在尝试建立一个基于 guice 的架构，嵌入在 Je​​tty，Jersey 中的 OSGI，我希望能够动态注册/删除 Jersey REST 服务。如何获取对球衣上下文的引用并从动态安装的捆绑包中添加新的 REST 服务。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:55:16.397

如果它只是关于 REST 服务和动态使用，请查看[Amdatu 项目](http://amdatu.org/components/web.html)。

# jquery - Flickr API JSON 拉集

> ID：13981033
> 
> 赞同：0
> 
> 时间：2012-12-20T21:46:33.660
> 
> 标签：jquery, json, api, flickr

我正在构建一个相当简单的无限照片页面，它从 Flickr 集合中获取照片。我有以下代码：

```
$(window).load(function() {

var apiKey = 'XXX';
var userId = 'XXX';
var photoset_id = 'XXX';

$.getJSON('http://api.flickr.com/services/rest/?format=json&method=flickr.photosets.getPhotos&photoset_id=' + photoset_id + '&per_page=1000' + '&page=1' + '&api_key=' + apiKey + '&user_id=' + userId + '&jsoncallback=?', function(data) {
    $.each(data.photoset.photo, function(i, FlickrPhoto){
        var basePhotoURL = 'http://farm' + data.photos.FlickrPhoto[i].farm + '.static.flickr.com/'
        + data.photos.FlickrPhoto[i].server + '/' + data.photos.FlickrPhoto[i].id + '_' + data.photos.FlickrPhoto[i].secret + ".jpg";            

        var a_href = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + FlickrPhoto.id + "/";
        $("<img/>").attr("src", basePhotoURL).appendTo("#photographs").wrap(("<div class='item'></div>"))
    });
});
}); 
```

我收到以下错误，我似乎无法弄清楚原因。可能主要失败但没有看到它..

```
TypeError: data.photos is undefined
[Break On This Error]   

...asePhotoURL = 'http://farm' + data.photos.FlickrPhoto[i].farm + '.static.flickr.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:17:51.660

修改您的 JQuery `$.each`。您不需要使用`i`索引每张照片。该函数针对`photo`数组中的每个元素执行。`flickrPhoto`因此代表来自 的每个项目`data.photoset.photo`，因此您不需要在它前面加上`data.photos`.

```
$.each(data.photoset.photo, function(i, flickrPhoto){
        var basePhotoURL = 'http://farm' + flickrPhoto.farm + '.static.flickr.com/'
        + flickrPhoto.server + '/' + flickrPhoto.id + '_' + flickrPhoto.secret + ".jpg";            

        var a_href = "http://www.flickr.com/photos/" + data.photoset.owner + "/" + flickrPhoto.id + "/";
        $("<img/>").attr("src", basePhotoURL).appendTo("#photographs").wrap(("<div class='item'></div>"))
}); 
```

# javascript - 在Javascript中创建多维数组索引？

> ID：13981034
> 
> 赞同：2
> 
> 时间：2012-12-20T21:46:34.180
> 
> 标签：javascript, jquery

我有一个 ajax 请求，它返回给我一个大致如下所示的对象：

```
[
 {category: "Test Category", id: "1", name: "Test",  language: "English"},
 {category: "Test Category", id: "2", name: "Test2", language: "English"},
 {category: "A test",        id: "3", name: "Test3", language: "Spanish"},
 {category: "Test Category", id: "4", name: "Test4", language: "Spanish"}
] 
```

基本上我需要一种方法来执行以下操作：

*   列出仅以英语或西班牙语存在的所有类别
*   列出以指定语言存在的所有 ID
*   列出指定类别中存在的所有 ID

现在我相当确定最好的方法是创建我自己的临时数组来存储这些数据，但我对 Javascript 没有足够的信心编写正确的循环来获取这些数据。我知道在 PHP 中我会做类似`$category['Test Category'][] = 3`while 循环的事情。

我的想法是我需要能够根据用户选择按英语过滤然后按其中的类别过滤事物。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:56:33.713

为您的任务使用下划线的一些方法：http: [//underscorejs.org](http://underscorejs.org)

```
var data = [
 {category: "Test Category", id: "1", name: "Test",  language: "English"},
 {category: "Test Category", id: "2", name: "Test2", language: "English"},
 {category: "A test",        id: "3", name: "Test3", language: "Spanish"},
 {category: "Test Category", id: "4", name: "Test4", language: "Spanish"}
]

// Filter by spanish
var output = _.where(data, {"language":"Spanish"});

// Filter by category
var output = _.where(data, {"category":"A test"});

// List specific category ids
var output = _.pluck(_.where(data, {"category":"A test"}), "id");

// List category names
var output = _.pluck(_.where(data, {"language":"English"}), "category");

// Group by languages
var output = _.groupBy(data, function(value) { 
  return value.language
});
output["English"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T21:51:54.850

既然你在标签中包含了 jQuery，我想我会使用它：

```
//All categories with English or spanish language (categories is the array)
$.grep(categories, function(c) { return c.language=='English' || c.language == 'Spanish'; }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:09:37.527

使用 vanilla JS，`json`您的原始数组在哪里，您可以使用：

```
function filterJson(attr, obj) {
    var attrList = [],
        match,
        tempAttr,
        i;

    for (i = 0; i < json.length; i += 1) {
        match = true;

        for (tempAttr in obj) {
            if (!obj[tempAttr].test(json[i][tempAttr])) {
                match = false;
                break;
            }
        }

        if (match) attrList.push(json[i][attr]);
    }

    return attrList;
} 
```

并像这样使用它：

*“列出所有仅以英语或西班牙语存在的类别”*

```
filterJson('category', {
    language: /(English|Spanish)/
});
// => ["Test Category", "Test Category", "A test", "Test Category"] 
```

*“列出以指定语言存在的所有 ID”*

```
filterJson('id', {
    language: /English/
});
// => ["1", "2"] 
```

*“列出指定类别中存在的所有 ID”*

```
filterJson('id', {
    category: /Test Category/
});  
// => ["1", "2", "4"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:01:59.257

如果您可以依靠一些关于数据始终为真的假设——例如，您将永远只有类别：、id：、名称：和语言：，并且在任何地方都不会有冒号或逗号名称或类别——那么我实际上建议将所有信息粘贴到单个字符串中并使用 RegExp 来查找它。

例如：

```
[
 "category:Test Category, id:1, name:Test,  language:English",
 "category:Test Category, id:2, name:Test2, language:English",
 "category:A test,        id:3, name:Test3, language:Spanish",
 "category:Test Category, id:4, name:Test4, language:Spanish"
] 
```

现在，要查找条目的值，请使用 RegExp.match()。

```
var m = /^category:([^,]+)\s+id:(\d+),\s+name:([^,]+),\s+language:(.+)$/i;
// m[1] = Test Category
// m[2] = 1;
// m[3] = Test2
// m[4] = Spanish 
```

您可以使用测试进行搜索。

```
function my_filter(criteria) {
    var results = [];
    var re = new RegExp(criteria);
    for (var i=0; i<array.length; i++) {
        if (array[i].test(re))
            results.push(array[i]);
    }
    return results;
}
var english_array = my_filter('language:english');
var atest_array = my_filter('category:a test'); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T21:53:22.157

神奇的 Google 术语是“map”和“reduce”。

```
var data = [...the JSON data parsed with JSON.parse() if necessary...]

var categoriesInEnglish = data.reduce(function(accumulator, category) {
    if(category.language = 'English') {
        accumulator.push(category.id);
    }
}); 
```

见[http://www.mrspeaker.net/2011/05/02/conventional-interfaces/](http://www.mrspeaker.net/2011/05/02/conventional-interfaces/)和[http://www.mrspeaker.net/2011/04/27/reducing-map/](http://www.mrspeaker.net/2011/04/27/reducing-map/)

# neural-network - Neuroph：神经网络学习中的错误

> ID：13981035
> 
> 赞同：0
> 
> 时间：2012-12-20T21:46:37.720
> 
> 标签：neural-network

我正在尝试使用给定的多层感知器网络示例，使用 Neuroph Studio 运行人工神经网络。每次尝试时，我都会在日志控制台中收到相同的错误：

```
SEVERE [global]
java.lang.NullPointerException
    at org.neuroph.core.learning.SupervisedLearning.beforeEpoch(SupervisedLearning.java:127)
    at org.neuroph.core.learning.IterativeLearning.learn(IterativeLearning.java:163)
[catch] at org.neuroph.core.NeuralNetwork$1.run(NeuralNetwork.java:289) 
```

我的系统是：

```
Product Version: NeurophStudio 201210100934
Java: 1.7.0_07; Java HotSpot(TM) 64-Bit Server VM 23.3-b01
System: Windows 7 version 6.1 running on amd64; Cp1252; es_ES (neurophstudio)
User directory: C:\Users\i3casa\AppData\Roaming\.neurophstudio\dev
Cache directory: C:\Users\i3casa\AppData\Roaming\.neurophstudio\dev\var\cache 
```

你知道这个错误的任何修正吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T20:05:15.097

这个问题的答案是，在训练网络之前，我必须在 Neuroph Studio 中打开训练集。否则，找不到训练集，并启动了 Null 指针异常。

# asp.net - 如何在生成大型 csv 文件时提供等待指示器

> ID：13981042
> 
> 赞同：0
> 
> 时间：2012-12-20T21:46:55.433
> 
> 标签：asp.net, csv, webforms, devexpress, asynccallback

请交叉参考[devexpress 论坛](http://www.devexpress.com/Support/Center/Question/Details/Q453353)

在 ASP.NET WEBFORMS 项目中，您如何在用户单击 devexpress 按钮和回调控件后，在生成 csv 流之后，通过 Response 对象将流推送到浏览器，但不要胜过 devexpress 提供的回调机制？？？。 ..这是一些代码

```
Imports D5FPX
Imports System.Data.Linq
Imports System.Configuration.ConfigurationManager
Imports System.Data

Partial Class MyFolder_MyUserControl
    Inherits UserControlBase

 Const NINE_NUMERO As Integer = 1
 Const VBA As String = "xyz"
 Const CVS_FORMATTER As String = "{0:F2}"

 Dim realcode As String = "99999"
 Dim mycsv As String
 Dim pc As PersistenceClass

 Protected Sub Page_Init(sender As Object, e As System.EventArgs) Handles Me.Init

      If Not Page.IsCallback Then
           h2.InnerText = UserControlName
      End If

 End Sub

 Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

 End Sub

 Protected Sub btnDownload_Click(sender As Object, e As System.EventArgs) Handles btnDownload.Click

     'blank

 End Sub

 Prviate Sub DoQuery()

      pc = New xxx.PersistenceClass(ConfigurationManager.ConnectionStrings("xxx").ConnectionString.ToString())

      Dim resultQuery = From vi In pc.dbo.xxx_VWs _
                          Join smv In pc.dbo.v_xxx _
                           On vi.givenKey Equals smv.givenKey _
                           Where (vi.Zone <> 0 And vi.user_fld_6 <> "H") _
                           Select New With {.Field1 = smv.Field1, _
                           .Field2 = smv.givenKey.Trim(), _
                           .AB = IIf(vi.Field3.Trim().Contains("old"), "O", "N"), _
                           .Zone = vi.Zone, _
                           .Zenith = vi.Zenith}

      Dim datatable As New DataTable()

      datatable.Columns.Add("Ninja")
      datatable.Columns.Add("Cowboy")
      datatable.Columns.Add("Soldier")
      datatable.Columns.Add("Worker")
      datatable.Columns.Add("Priest")
      datatable.Columns.Add("Zenith")

      For Each row In resultQuery               
           Dim specialZone As Nullable(Of Decimal) = pc.dbo.xxx_RealZone(NINE_NUMERO, realcode, row.Field2, VBA, Date.Now)

           'check for null return value from scalar db function call
           If specialZone Is Nothing Then
                specialZone = row.Zone
           End If

           Dim formattedZone = String.Format(CVS_FORMATTER, row.Zone)
           Dim formattedSpecZone = String.Format(CVS_FORMATTER, specialZone)
           Dim formattedZenithZone = String.Format(CVS_FORMATTER, row.Zenith)

           'datatable.Rows.Add(row.Field1, row.Field2, row.AB, row.Zone, specialZone, row.Core)
           datatable.Rows.Add(row.Field1, row.Field2, row.AB, formattedZone, formattedSpecZone, formattedZenithZone)
      Next

      mycsv = datatable.ConvertToCSV()

      OutputCsv(mycsv)
 End Sub

 Prviate Sub OutputCsv(csv As String)
      Dim finalByteArray As Byte() = Encoding.ASCII.GetBytes(csv)

      Response.ContentType = "text/csv"
      Response.AddHeader("content-disposition", "attachment;filename=abcdef.csv")
      Response.AddHeader("Content-lenght", finalByteArray.Length.ToString())
      Response.Clear()
      Response.Write(csv)          
      Response.Flush()

 End Sub   

 Protected Sub Callback1_Callback(source As Object, e As    DevExpress.Web.ASPxCallback.CallbackEventArgs) Handles Callback1.Callback

       DoQuery()

 End Sub
End Class 
```

这是 devexpress 按钮和回调控件的 JavaScript 函数...

```
function btnDownload_Click(s, e) {
 lp1.Show();
 cb1.PerformCallback();
}

function cb1_CallbackComplete(s, e) {
 var mydiv1 = document.getElementById('dv1');
 mydiv1.innerHTML = e.result;
 lp1.Hide();
} 
```

# ruby-on-rails - ActiveRecord 属性读写

> ID：13981044
> 
> 赞同：2
> 
> 时间：2012-12-20T21:47:04.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, attributes, ruby-on-rails-3.2

假设我们有 User 模型并且它有名字。我们可以简单地读写它：

```
user = User.new
user.name = "Peter Griffin"
user.name #=> "Peter Griffin" 
```

我们也可以通过属性哈希（键是字符串）来做到这一点：

```
user.attributes["name"] = "Peter Griffin"
user.attributes["name"] #=> "Peter Griffin" 
```

还有一些其他奇怪的哈希（这次键是符号）：

```
user[:name] = "Peter Griffin"
user[:name] #=> "Peter Griffin" 
```

这些方法有什么区别？当我们需要使用哈希而不是方法时，是否存在特殊情况？另外我会感谢文档链接，因为我没有找到关于属性的好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:43:45.050

找到关于此的好文章：[http ://www.davidverhasselt.com/2011/06/28/5-ways-to-set-attributes-in-activerecord/](http://www.davidverhasselt.com/2011/06/28/5-ways-to-set-attributes-in-activerecord/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-20T22:01:15.300

如果您使用的是 activerecord，则在更新模型属性时，使用**第一种方式**应该可以在 99% 的情况下为您服务

现在，如果您在不使用任何 activerecord 的情况下从头开始创建自定义模型，您很可能会通过它的哈希键来引用模型属性。那时，您在上面的**第三种方式将派**上用场。当然，您可以修改自定义模型以像第一种方式一样工作。

当您想要引用所有模型散列时，返回模型属性散列的方法的**第二种方法**很有用。`attributes`例如，这将包含所有模型属性及其值。

```
@user.attributes.each do |attr, val|
  puts "#{attr} : #{val}"
end 
```

# plugins - 如何删除本机插件

> ID：13981046
> 
> 赞同：3
> 
> 时间：2012-12-20T21:47:07.817
> 
> 标签：plugins, trigger.io

有谁知道是否有办法从 Trigger.IO 工具包中删除[本机插件？](http://docs.trigger.io/en/v1.4/modules/native/index.html#native-plugins)我的应用程序都不依赖于这些测试插件，我只想删除它们以清理“管理插件”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:31:02.703

您目前无法移除插件，但您可以在 Toolkit 的未来版本中移除。如果您真的想删除某些内容，您可以发送电子邮件至 support@trigger.io，有人可以为您完成。

# javascript - 如何为在线和离线应用程序提供相同的 HTML 页面？

> ID：13981047
> 
> 赞同：3
> 
> 时间：2012-12-20T21:47:08.720
> 
> 标签：javascript, jquery, html, offline

我有一个应用程序，我还需要离线使用它。我在客户端上使用 Javascript/Jquery 构建动态内容与在服务器上构建动态内容没有问题，但我坚持使用基本页面布局。

现在我的`server-only`页面结构是这样的（我正在使用`Coldfusion`）：

```
<cfsavecontent variable="renderedResults">
    <!--- Doctype --->
    <cfinclude template="../templates/tmp_pagetop.cfm">
    <cfoutput><head></cfoutput>
    <cfif NOT isAjaxRequest()>
        <!--- page header with all meta/js/css/icons... --->
        <cfinclude template="../templates/tmp_pageheader.cfm">
    </cfif>
    <cfoutput>
            <title>#variables.title# | #tx_select_title#</title>
        </head>
        <body>
        // page
        </body>
    </html>
    </cfoutput>
</cfsavecontent>

<!--- COMPRESS --->
<cfscript>
    compressedHTML = reReplace(renderedResults, "\>\s+\<", "> <", "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(13), "ALL");
    compressedHTML = reReplace(compressedHTML, "\s{2,}", chr(09), "ALL");
    variables.alredayBinary = "false";
</cfscript>
<!--- GZIP --->
<!--- SET HEADER --->
<!--- SEND BACK ---> 
```

我正在使用，当通过 Ajax 请求后续页面时`Jquery Mobile`，它会加载完整的第一页，`head`然后不再使用标题。因此，我正在检查该页面是否是通过 Ajax 请求的，如果是，我会跳过在后续页面请求中向客户端发送 8k 标头，因为 JQM 不使用它们。

此外，我的标题模板包含很多这样的条件内容：

```
<cfif structKeyExists(cgi, "HTTP_USER_AGENT" ) AND findNoCase("facebook", cgi.http_user_agent) NEQ 0>
    <cfoutput>
        <meta property="og:title" content="#variables.title#"/>
        <meta property="og:type" content="website"/>
        <meta property="og:url" content="#variables.base#" />
        <meta property="og:site_name" content="#variables.user_firma#"/>
        <meta property="og:description" content="#variables.user_fbds#"/>
        <meta property="fb:admins" content="#variables.user_fbadmin#" >
    </cfoutput>
</cfif> 
```

因此，当 Facebook 请求页面时，我只包含 Facebook Open Graph 元数据。这样，如果 Google 请求该页面，该页面就会通过 W3C 验证。

现在挑战......如何使这个静态和离线可用。

我已经考虑了一段时间，并没有真正想出一个好的解决方案。如果我

1.  提供整个页面 = 我未通过 W3C 验证，在线用户在每个页面请求上都会受到 8k 的罚款（是的，它是 gzip 压缩的，但仍然如此）
2.  提供没有标题的页面 = 不是一个真正的选项
3.  提供两个版本的页面（一个用于在线，一个用于离线使用）= 离线页面将被缓存，用户将被缓存中的那个版本“卡住”，即使他在线。
4.  仅制作带有完整页眉的第一页 = 从第一页以外的页面开始的用户将位于损坏的页面（无页眉）。主页也未能通过验证。

我敢肯定，我不能拥有一切，但我想知道可以采取哪种方法以最好的方式做到这一点。

感谢您的投入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:52:00.363

您可以设置一个会话变量来表示已加载标头。然后，在每个页面上检查该变量，如果存在，则仅显示内容；如果它不存在，则显示头部+内容。

# java - 在 Java 中使用 Selenium 选择随机值

> ID：13981049
> 
> 赞同：0
> 
> 时间：2012-12-20T21:47:13.213
> 
> 标签：java, selenium, random, selenium-webdriver

我有一个包含 10 个下拉选项的页面，每个下拉列表都有一个值列表。我想让 Selenium 运行脚本，选择一个随机下拉列表，然后在该下拉列表中选择一个随机值。有没有人对如何选择随机值有任何见解？

目前我有代码设置来选择第一个可用的下拉菜单，然后选择该列表中的第一个值。代码如下所示：

```
// Selects the first drop down
selenium.click("css=div.dropdown"); 
// Selected the first value in the first drop down
selenium.click("css=td.dijitMenuItemLabel"); 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T06:29:25.853

这是选择随机下拉值的代码

```
String []options = selenium.getSelectOptions("locator");
int index = (int)( Math.random() * options.length);
selenium.select("locator" , "index="+index); 
```

关于下拉列表，您可以将它们的定位器存储在一个数组中并选择随机值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-04T14:37:43.010

> 尝试这个

long number = (long) Math.floor(Math.random() * 900L) + 100L;

System.out.println(""+数字);

# linux - 使用 cron 运行 perl 脚本时找不到我的变量

> ID：13981053
> 
> 赞同：2
> 
> 时间：2012-12-20T21:47:28.720
> 
> 标签：linux, perl, debian

我面临一个非常奇怪的问题。我正在 Squeeze Server 上运行一个脚本，其中运行来自 backports 的 perl 5.10.1。当我从控制台运行脚本时，它运行良好。但是当我尝试使用 cron 运行它时，它会给出错误，例如“我的 var、我的 var2、我的 var3 等”是错误的。它还说由于缺少“（”而导致语法错误。但是如果我从控制台运行它，它就可以工作。

这是脚本的开头以及它抱怨的内容。

```
##!/usr/lib/perl
#BACKUPPEITOR 2012
#IT DOES BACKUPS OF EVERTHING AND USE RSYNC 
#TO UPLOAD THEM TO HIDRIVE-STRATO
#AND KEEP YOU POSTED OF IF SOMETHING WENT WRONT
#Uses
#use strict;
#use warnings;
use Net::SMTP;
use POSIX 'strftime';
use MIME::Lite;

#Variables
my $seconds = strftime '%H:%M:%S-%d%m%y', localtime;
my $time = strftime '%H:%M:%S_-_%d_%m_%Y', localtime;
my $tLog = strftime '%d%m%Y', localtime;
my $foMy = "/home/backup/data/mysql/";
my $foPsql = "/home/backup/data/postgres/";
my $uMy = 'USER';
my $pMy = 'SECRET';
my @mysql_re = "";
my @psql_status ="";
my @esanum_re ="";
my $foEsanum = "/home/folder/";
my $fMy ="";
my $logF = "/home/backup/log/backuplog_$tLog.log";

#Set mail config
MIME::Lite->send('smtp','mail.mailserver.org', Timeout=>60,AuthUser=>'SECRET', AuthPass=>'SECRET'); 
```

以及当我在日志文件中将其作为 cronjob 运行时收到的内容：

```
/home/backup/scripts/backupeitor.pl: 9: use: not found
/home/backup/scripts/backupeitor.pl: 10: use: not found
/home/backup/scripts/backupeitor.pl: 11: use: not found
/home/backup/scripts/backupeitor.pl: 14: my: not found
/home/backup/scripts/backupeitor.pl: 15: my: not found
/home/backup/scripts/backupeitor.pl: 16: my: not found
/home/backup/scripts/backupeitor.pl: 17: my: not found
/home/backup/scripts/backupeitor.pl: 18: my: not found
/home/backup/scripts/backupeitor.pl: 19: my: not found
/home/backup/scripts/backupeitor.pl: 20: my: not found
/home/backup/scripts/backupeitor.pl: 21: my: not found
/home/backup/scripts/backupeitor.pl: 22: my: not found
/home/backup/scripts/backupeitor.pl: 23: my: not found
/home/backup/scripts/backupeitor.pl: 24: my: not found
/home/backup/scripts/backupeitor.pl: 25: my: not found
/home/backup/scripts/backupeitor.pl: 26: my: not found
/home/backup/scripts/backupeitor.pl: 30: Syntax error: "(" unexpected 
```

你看？它找不到我的变量，为什么？现在，perl -V 和 uname -a 提供所有信息。

```
srv156:/usr/bin$ perl -V
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LANGUAGE = (unset),
    LC_ALL = (unset),
    LANG = "es_ES.UTF-8"
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C").
Summary of my perl5 (revision 5 version 10 subversion 1) configuration:

  Platform:
    osname=linux, osvers=3.2.0-4-686-pae, archname=i486-linux-gnu-thread-multi
    uname='linux callisto 3.2.0-4-686-pae #1 smp debian 3.2.32-1 i686 gnulinux '
    config_args='-Dusethreads -Duselargefiles -Dccflags=-DDEBIAN -Dcccdlflags=-fPIC -Darchname=i486-linux-gnu -Dprefix=/usr -Dprivlib=/usr/share/perl/5.10 -Darchlib=/usr/lib/perl/5.10 -Dvendorprefix=/usr -Dvendorlib=/usr/share/perl5 -Dvendorarch=/usr/lib/perl5 -Dsiteprefix=/usr/local -Dsitelib=/usr/local/share/perl/5.10.1 -Dsitearch=/usr/local/lib/perl/5.10.1 -Dman1dir=/usr/share/man/man1 -Dman3dir=/usr/share/man/man3 -Dsiteman1dir=/usr/local/man/man1 -Dsiteman3dir=/usr/local/man/man3 -Dman1ext=1 -Dman3ext=3perl -Dpager=/usr/bin/sensible-pager -Uafs -Ud_csh -Ud_ualarm -Uusesfio -Uusenm -DDEBUGGING=-g -Doptimize=-O2 -Duseshrplib -Dlibperl=libperl.so.5.10.1 -Dd_dosuid -des'
    hint=recommended, useposix=true, d_sigaction=define
    useithreads=define, usemultiplicity=define
    useperlio=define, d_sfio=undef, uselargefiles=define, usesocks=undef
    use64bitint=undef, use64bitall=undef, uselongdouble=undef
    usemymalloc=n, bincompat5005=undef
  Compiler:
    cc='cc', ccflags ='-D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64',
    optimize='-O2 -g',
    cppflags='-D_REENTRANT -D_GNU_SOURCE -DDEBIAN -fno-strict-aliasing -pipe -fstack-protector -I/usr/local/include'
    ccversion='', gccversion='4.4.5', gccosandvers=''
    intsize=4, longsize=4, ptrsize=4, doublesize=8, byteorder=1234
    d_longlong=define, longlongsize=8, d_longdbl=define, longdblsize=12
    ivtype='long', ivsize=4, nvtype='double', nvsize=8, Off_t='off_t', lseeksize=8
    alignbytes=4, prototype=define
  Linker and Libraries:
    ld='cc', ldflags =' -fstack-protector -L/usr/local/lib'
    libpth=/usr/local/lib /lib /usr/lib /usr/lib64
    libs=-lgdbm -lgdbm_compat -ldb -ldl -lm -lpthread -lc -lcrypt
    perllibs=-ldl -lm -lpthread -lc -lcrypt
    libc=/lib/libc-2.11.3.so, so=so, useshrplib=true, libperl=libperl.so.5.10.1
    gnulibc_version='2.11.3'
  Dynamic Linking:
    dlsrc=dl_dlopen.xs, dlext=so, d_dlsymun=undef, ccdlflags='-Wl,-E'
    cccdlflags='-fPIC', lddlflags='-shared -O2 -g -L/usr/local/lib -fstack-protector'

Characteristics of this binary (from libperl): 
  Compile-time options: MULTIPLICITY PERL_DONT_CREATE_GVSV
                        PERL_IMPLICIT_CONTEXT PERL_MALLOC_WRAP USE_ITHREADS
                        USE_LARGE_FILES USE_PERLIO USE_REENTRANT_API
  Locally applied patches:
    DEBPKG:debian/arm_thread_stress_timeout - http://bugs.debian.org/501970 Raise the timeout of ext/threads/shared/t/stress.t to accommodate slower build hosts
    DEBPKG:debian/cpan_config_path - Set location of CPAN::Config to /etc/perl as /usr may not be writable.
    DEBPKG:debian/cpan_definstalldirs - Provide a sensible INSTALLDIRS default for modules installed from CPAN.
    DEBPKG:debian/db_file_ver - http://bugs.debian.org/340047 Remove overly restrictive DB_File version check.
    DEBPKG:debian/doc_info - Replace generic man(1) instructions with Debian-specific information.
    DEBPKG:debian/enc2xs_inc - http://bugs.debian.org/290336 Tweak enc2xs to follow symlinks and ignore missing @INC directories.
    DEBPKG:debian/errno_ver - http://bugs.debian.org/343351 Remove Errno version check due to upgrade problems with long-running processes.
    DEBPKG:debian/extutils_hacks - Various debian-specific ExtUtils changes
    DEBPKG:debian/fakeroot - Postpone LD_LIBRARY_PATH evaluation to the binary targets.
    DEBPKG:debian/instmodsh_doc - Debian policy doesn't install .packlist files for core or vendor.
    DEBPKG:debian/ld_run_path - Remove standard libs from LD_RUN_PATH as per Debian policy.
    DEBPKG:debian/libnet_config_path - Set location of libnet.cfg to /etc/perl/Net as /usr may not be writable.
    DEBPKG:debian/m68k_thread_stress - http://bugs.debian.org/495826 Disable some threads tests on m68k for now due to missing TLS.
    DEBPKG:debian/mod_paths - Tweak @INC ordering for Debian
    DEBPKG:debian/module_build_man_extensions - http://bugs.debian.org/479460 Adjust Module::Build manual page extensions for the Debian Perl policy
    DEBPKG:debian/perl_synopsis - http://bugs.debian.org/278323 Rearrange perl.pod
    DEBPKG:debian/prune_libs - http://bugs.debian.org/128355 Prune the list of libraries wanted to what we actually need.
    DEBPKG:debian/use_gdbm - Explicitly link against -lgdbm_compat in ODBM_File/NDBM_File. 
    DEBPKG:fixes/assorted_docs - http://bugs.debian.org/443733 [384f06a] Math::BigInt::CalcEmu documentation grammar fix
    DEBPKG:fixes/net_smtp_docs - http://bugs.debian.org/100195 [rt.cpan.org #36038] Document the Net::SMTP 'Port' option
    DEBPKG:fixes/processPL - http://bugs.debian.org/357264 [rt.cpan.org #17224] Always use PERLRUNINST when building perl modules.
    DEBPKG:debian/perlivp - http://bugs.debian.org/510895 Make perlivp skip include directories in /usr/local
    DEBPKG:fixes/pod2man-index-backslash - http://bugs.debian.org/521256 Escape backslashes in .IX entries
    DEBPKG:debian/disable-zlib-bundling - Disable zlib bundling in Compress::Raw::Zlib
    DEBPKG:fixes/kfreebsd_cppsymbols - http://bugs.debian.org/533098 [3b910a0] Add gcc predefined macros to $Config{cppsymbols} on GNU/kFreeBSD.
    DEBPKG:debian/cpanplus_definstalldirs - http://bugs.debian.org/533707 Configure CPANPLUS to use the site directories by default.
    DEBPKG:debian/cpanplus_config_path - Save local versions of CPANPLUS::Config::System into /etc/perl.
    DEBPKG:fixes/kfreebsd-filecopy-pipes - http://bugs.debian.org/537555 [16f708c] Fix File::Copy::copy with pipes on GNU/kFreeBSD
    DEBPKG:fixes/anon-tmpfile-dir - http://bugs.debian.org/528544 [perl #66452] Honor TMPDIR when open()ing an anonymous temporary file
    DEBPKG:fixes/abstract-sockets - http://bugs.debian.org/329291 [89904c0] Add support for Abstract namespace sockets.
    DEBPKG:fixes/hurd_cppsymbols - http://bugs.debian.org/544307 [eeb92b7] Add gcc predefined macros to $Config{cppsymbols} on GNU/Hurd.
    DEBPKG:fixes/autodie-flock - http://bugs.debian.org/543731 Allow for flock returning EAGAIN instead of EWOULDBLOCK on linux/parisc
    DEBPKG:fixes/archive-tar-instance-error - http://bugs.debian.org/539355 [rt.cpan.org #48879] Separate Archive::Tar instance error strings from each other
    DEBPKG:fixes/positive-gpos - http://bugs.debian.org/545234 [perl #69056] [c584a96] Fix \G crash on first match
    DEBPKG:debian/devel-ppport-ia64-optim - http://bugs.debian.org/548943 Work around an ICE on ia64
    DEBPKG:fixes/trie-logic-match - http://bugs.debian.org/552291 [perl #69973] [0abd0d7] Fix a DoS in Unicode processing [CVE-2009-3626]
    DEBPKG:fixes/hppa-thread-eagain - http://bugs.debian.org/554218 make the threads-shared test suite more robust, fixing failures on hppa
    DEBPKG:fixes/crash-on-undefined-destroy - http://bugs.debian.org/564074 [perl #71952] [1f15e67] Fix a NULL pointer dereference when looking for a DESTROY method
    DEBPKG:fixes/tainted-errno - http://bugs.debian.org/574129 [perl #61976] [be1cf43] fix an errno stringification bug in taint mode
    DEBPKG:fixes/safe-upgrade - http://bugs.debian.org/582978 Upgrade Safe.pm to 2.25, fixing CVE-2010-1974
    DEBPKG:fixes/tell-crash - http://bugs.debian.org/578577 [f4817f3] Fix a tell() crash on bad arguments.
    DEBPKG:fixes/format-write-crash - http://bugs.debian.org/579537 [perl #22977] [421f30e] Fix a crash in format/write
    DEBPKG:fixes/arm-alignment - http://bugs.debian.org/289884 [f1c7503] Prevent gcc from optimizing the alignment test away on armel
    DEBPKG:fixes/fcgi-test - Fix a failure in CGI/t/fast.t when FCGI is installed
    DEBPKG:fixes/hurd-ccflags - http://bugs.debian.org/587901 Make hints/gnu.sh append to $ccflags rather than overriding them
    DEBPKG:debian/squelch-locale-warnings - http://bugs.debian.org/508764 Squelch locale warnings in Debian package maintainer scripts
    DEBPKG:fixes/lc-numeric-docs - http://bugs.debian.org/379329 [perl #78452] [903eb63] LC_NUMERIC documentation fixes
    DEBPKG:fixes/lc-numeric-sprintf - http://bugs.debian.org/601549 [perl #78632] [b3fd614] Fix sprintf not to ignore LC_NUMERIC with constants
    DEBPKG:fixes/concat-stack-corruption - http://bugs.debian.org/596105 [perl #78674] [e3393f5] Fix stack pointer corruption in pp_concat() with 'use encoding'
    DEBPKG:fixes/cgi-multiline-header - http://bugs.debian.org/606995 [CVE-2010-2761 CVE-2010-4410 CVE-2010-4411] CGI.pm MIME boundary and multiline header vulnerabilities
    DEBPKG:fixes/casing-taint-cve-2011-1487 - http://bugs.debian.org/622817 [perl #87336] fix unwanted taint laundering in lc(), uc() et al.
    DEBPKG:fixes/safe-reval-rdo-cve-2010-1447 - [PATCH] Wrap by default coderefs returned by rdo and reval
    DEBPKG:fixes/encode-heap-overflow - [PATCH] Fix decode_xs n-byte heap-overflow security bug in
    DEBPKG:fixes/digest_eval_hole - Close the eval "require $module" security hole in
    DEBPKG:fixes/unregister_signal_handler - [PATCH] main: Unregister signal handler before destroying my_perl
    DEBPKG:fixes/CVE-2012-5195 - avoid calling memset with a negative count
    DEBPKG:fixes/CVE-2012-5526 - [PATCH 1/4] CR escaping for P3P header
    DEBPKG:fixes/storable-security-warning - [PATCH] add a note about security concerns in Storable
    DEBPKG:patchlevel - http://bugs.debian.org/567489 List packaged patches for 5.10.1-17squeeze4 in patchlevel.h
  Built under linux
  Compiled at Dec 11 2012 14:20:21
  @INC:
    /etc/perl
    /usr/local/lib/perl/5.10.1
    /usr/local/share/perl/5.10.1
    /usr/lib/perl5
    /usr/share/perl5
    /usr/lib/perl/5.10
    /usr/share/perl/5.10
    /usr/local/lib/site_perl
    . 
```

和 uname -a

```
Linux srv156 2.6.32-5-amd64 #1 SMP Sun Sep 23 11:00:33 UTC 2012 x86_64 GNU/Linux
enter code here 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T21:52:11.077

第一行告诉内核该文件使用哪个程序——但前提是它看起来完全像这样：

```
#!/path/to/interpreter 
```

如果没有，就像您的情况一样，那么外壳程序将继续执行所述文件并将其解释为外壳程序脚本。因此，它认为`my`并且`use`是要执行的程序，无法执行它们并打印您看到的错误。

如果您使用`perl /path/to/your/script`而不是简单地运行脚本，`/path/to/your/script`则不涉及内核，并且第一行实际上可能看起来不同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T21:51:40.733

它试图将您的 Perl 脚本作为 shell 脚本运行，这意味着它不会将文件的第一行识别为 shebang。

要解决此问题，您需要更改脚本的第一行：

```
##!/usr/lib/perl 
```

对此：

```
#!/usr/lib/perl 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:21:56.893

我相信你脚本的第一行

```
    ##!/usr/lib/perl
```

应该是**（将 /lib/ 替换为 /bin/）**

```
    #!/usr/bin/perl
```

`/usr/lib/perl`通常是一个目录。导致 perl 脚本作为脚本运行`sh`。由于`sh`不了解 perl 语法，因此向您抛出所有错误。

# android - Maven 和 Android Facebook SDK apklib

> ID：13981055
> 
> 赞同：10
> 
> 时间：2012-12-20T21:47:37.113
> 
> 标签：android, maven, facebook-android-sdk, pom.xml, android-maven-plugin

所以我正在对 facebook-android-sdk 进行 Maven-ing 以包含在我们的 CI 流程中。

脸书/pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
    http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.facebook.android</groupId>
<artifactId>facebook-android-sdk</artifactId>
<version>3.0.0-SNAPSHOT</version>
<name>facebook-android-sdk</name>
<packaging>apklib</packaging>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties>

<dependencies>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>android</artifactId>
        <version>4.1.1.4</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.google.android</groupId>
        <artifactId>support-v4</artifactId>
        <version>r7</version>
        <type>jar</type>
    </dependency>
</dependencies>

<build>
    <finalName>${project.artifactId}</finalName>
    <sourceDirectory>src</sourceDirectory>

    <plugins>
        <plugin>
            <groupId>com.jayway.maven.plugins.android.generation2</groupId>
            <artifactId>android-maven-plugin</artifactId>
            <version>3.4.1</version>
            <configuration>
                <androidManifestFile>${project.basedir}/AndroidManifest.xml</androidManifestFile>
                <assetsDirectory>ignored</assetsDirectory>
                <resourceDirectory>${project.basedir}/res</resourceDirectory>
                <nativeLibrariesDirectory>ignored</nativeLibrariesDirectory>
                <sdk>
                    <platform>16</platform>
                </sdk>
            </configuration>
            <extensions>true</extensions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-javadoc-plugin</artifactId>
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin>
        <plugin>
            <groupId>com.google.code.maven-replacer-plugin</groupId>
            <artifactId>maven-replacer-plugin</artifactId>
            <version>1.4.1</version>
            <executions>
                <execution>
                    <phase>process-sources</phase>
                    <goals>
                        <goal>replace</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <ignoreMissingFile>false</ignoreMissingFile>
                <file>target/generated-sources/r/com/facebook/android/R.java</file>
                <outputFile>target/generated-sources/r/com/facebook/android/R.java</outputFile>
                <regex>false</regex>
                <token>static final int</token>
                <value>static int</value>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>build-helper-maven-plugin</artifactId>
            <version>1.7</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>attach-artifact</goal>
                    </goals>
                    <configuration>
                        <artifacts>
                            <artifact>
                                <type>jar</type>
                                <file>${project.build.directory}/${project.build.finalName}.jar</file>
                            </artifact>
                        </artifacts>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.5.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>
</project> 
```

因此，按预期运行`mvn clean package install`构建并安装到本地存储库。

* * *

这样我就可以在我的 Android App pom.xml 中使用它，如下所示：

```
<!--Facebook sdk-->
<dependency>
    <groupId>com.facebook.android</groupId>
    <artifactId>facebook-android-sdk</artifactId>
    <version>3.0.0-SNAPSHOT</version>
    <type>apklib</type>
</dependency> 
```

在 Intellij 中构建和运行效果很好，它可以提取依赖项并添加到正确的位置。

* * *

**问题**

当我通过 Maven Travis CI 命令运行时：

```
mvn install -DskipTests=true 
```

然后：

```
mvn test 
```

测试将因缺少类（即 facebook 类）而失败。似乎在尝试通过 maven 安装和测试时，它没有正确地拉入 facebook-android-sdk。

**那么**，在构建依赖项时是否存在问题，或者我是否需要在它尝试运行之前运行另一个神奇的 maven 命令`mvn test`？

The facebook fork is avaliable here: [https://github.com/Bizzby/facebook-android-sdk](https://github.com/Bizzby/facebook-android-sdk)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-05T12:30:19.640

You can use available Maven repository created to host the Maven port of the latest facebook android api :

[https://github.com/avianey/facebook-api-android-maven](https://github.com/avianey/facebook-api-android-maven)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T11:50:29.650

Right seems that my apklib *pom.xml* is fine! What isn't fine is my APK *pom.xml*. Seems that there is a backwards compatibility issue from the old compiler version to the new ones. Simply I changed:

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.3</version>
    <configuration>
        <sdk>
            <platform>${android.platform}</platform>
        </sdk>
    </configuration>
</plugin> 
```

to:

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.4.1</version>
    <configuration>
        <sdk>
            <platform>${android.platform}</platform>
        </sdk>
    </configuration>
</plugin> 
```

And it magically started working! Lesson learned, dep/plugin management is very handy!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:29:50.003

Just run

```
mvn clean install 
```

that way it will run the tests and everything just fine.

Btw a fully mavenized facebook sdk is available on my github account at

[https://github.com/mosabua/facebook-android-sdk/tree/maven](https://github.com/mosabua/facebook-android-sdk/tree/maven)

# ruby - 如何使用非常大的 Ruby 哈希减少内存使用量？

> ID：13981058
> 
> 赞同：2
> 
> 时间：2012-12-20T21:47:42.203
> 
> 标签：ruby, memory, hash

我有一个包含一百万个条目的文本文件。每个条目基本上是几个平均二十个单词的句子。

为了完成一些任务，我将所有单词加载到哈希中。每个单词都是一个键，值将是它在文本中出现的次数。

我的问题是将它们加载到哈希中时内存不足。我在一台只有 1 GB RAM 的机器上。有没有办法减少内存使用？或者我应该使用 Ruby 哈希以外的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T21:52:24.963

### 避免大型内存数据结构

根据定义，内存中的数据结构使用内存。如果您的内存受限，请考虑使用数据库或可查找的磁盘文件来满足您的存储需求。

### 几个选项

您可能想研究 SQLite3、Redis 或某种键/值存储。但是，无论您使用什么，其想法都是用磁盘 I/O 换取内存消耗。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:09:56.300

### 使用内存树数据结构 (TRIE)

我建议避免使用大型内存数据结构，但如果您仍然需要/想要使用文本管理大数据结构，您可能会发现[Trie](http://en.wikipedia.org/wiki/Trie)很有趣（节点的后代具有与该节点关联的字符串的公共前缀的树)

看看这些 github 项目：

1.  [https://github.com/dustin/ruby-trie](https://github.com/dustin/ruby-trie)
2.  [https://github.com/tyler/trie](https://github.com/tyler/trie)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-23T13:59:10.620

为什么不使用 GDBM？ [http://ruby-doc.org/stdlib-1.8.6/libdoc/gdbm/rdoc/GDBM.html](http://ruby-doc.org/stdlib-1.8.6/libdoc/gdbm/rdoc/GDBM.html)

自 1.8.6 以来是标准库的一部分。我认为您没有旧版本的 Ruby？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T21:51:49.160

如果这个文本文件是不变的（也许即使它不是），我建议把它变成一个[SQLite](http://www.sqlite.org)数据库而不是内存中的哈希。

# wordpress - Wordpress 菜单 - 带有内容的下拉菜单，如何完成？

> ID：13981059
> 
> 赞同：2
> 
> 时间：2012-12-20T21:47:45.790
> 
> 标签：wordpress, dynamic, drop-down-menu, menu

我正在尝试在我的主题中完成一些事情。

首先查看本网站的主菜单：[http ://www.tabletmag.com/](http://www.tabletmag.com/)

如您所见，当您将鼠标悬停在例如 News&Politics 项目上时，会出现一些最近的帖子、作者等。它们动态集成到 wordpress 中。

我想完成同样的事情，但我就是想不出实现它的方法。你对开始的方式有什么看法？这个菜单系统下的技术是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T23:39:53.280

该网站似乎正在使用 megamenu 插件。试试 [http://wordpress.org/extend/plugins/jquery-mega-menu/](http://wordpress.org/extend/plugins/jquery-mega-menu/)

# java - 在 OutOfMemoryException 之前不久转储 Java 堆？

> ID：13981062
> 
> 赞同：0
> 
> 时间：2012-12-20T21:47:54.710
> 
> 标签：java, out-of-memory, profiling, heap-memory

> **可能重复：**
> [Java VisualVM 在 OOME 上启用堆转储](https://stackoverflow.com/questions/8311371/java-visualvm-enable-heap-dump-on-oome)

我有一个由于 OOME 而崩溃的应用程序。我想在应用程序崩溃前不久创建一个堆的转储文件。我之前使用`jdump`过几个小时运行后分析堆，但没有发现任何可疑之处。我可以在一些 Eclipse 分析器中运行该应用程序。是否有某种方法可以在 OOME 被抛出到具有正常（或 jdk）安装的服务器上之前不久创建堆转储？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T21:50:13.777

您可以使用 -XX:+HeapDumpOnOutOfMemoryError

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:22:55.537

如果您真的想在内存不足之前转储堆，您可以添加一个工作线程来定期轮询内存使用情况（请参阅[freeMemory](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html#freeMemory%28%29)）。当您开始耗尽内存时，您转储堆。

有关如何从应用程序中转储堆，请参阅[https://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java 。](https://blogs.oracle.com/sundararajan/entry/programmatically_dumping_heap_from_java)

# c# - 单元测试异步方法

> ID：13981067
> 
> 赞同：3
> 
> 时间：2012-12-20T21:48:43.123
> 
> 标签：c#, mstest, async-await

我在单元测试异步方法时遇到了一些问题。

这是我的单元测试代码：

```
 [TestMethod]
    public async Task TestRefreshList_RefreshesList()
    {
        int countBeforeAdd = listViewModel.NotesTitles.Count;

        // Add a note.
        await listViewModel.NoteRepository.AddNoteAsync(new Note { Title = String.Empty, Content = String.Empty });

        // Refresh.
        await listViewModel.RefreshList();

        int countAfterAdd = listViewModel.NotesTitles.Count;

        // Assert that the count increased by 1 and that it matches the count of the repository.
        Assert.IsTrue(countAfterAdd == countBeforeAdd + 1 && countAfterAdd == mockNoteRepository.FakeNotes.Count);
    } 
```

当我运行这个测试时，它似乎永远不会超过第一个 await 语句。如果有帮助，以下是正在测试的方法：

```
 public ObservableCollection<Note> FakeNotes { get; set; }

    public Task AddNoteAsync(Models.Note note)
    {
        return new Task(() => 
        {
            FakeNotes.Add(note);
        });
    }

    public Task<ObservableCollection<string>> GetAllNoteTitlesAsync()
    {
        // Return the titles of the notes in the FakeNotes collection.
        return new Task<ObservableCollection<string>>(() =>
        {
            return new ObservableCollection<string>(FakeNotes.Select(n => n.Title));
        });
    } 
```

……

```
 public async Task RefreshList()
    {
        try
        {
            NotesTitles = await NoteRepository.GetAllNoteTitlesAsync();
        }
        catch (Exception)
        {
            Notifier.Notify("We encountered an error when trying to load your notes. Please try again. ", "Ooops!");
        }
    } 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T22:01:01.963

你`Task`的 s 永远不会开始。尝试使用`Task.Run`而不是`Task`构造函数。

# ruby - 如何使用 Fog 重命名文件？

> ID：13981069
> 
> 赞同：11
> 
> 时间：2012-12-20T21:48:48.677
> 
> 标签：ruby, ruby-on-rails-3.2, fog

我有一个 Rails 3.2 应用程序。使用雾在 S3 中存储文件。

我想编写一个脚本来重命名所有已上传的文件。我似乎在这方面找不到任何雾文档。

有雾这可能吗？我需要另一个宝石吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-29T16:35:26.370

[这篇文章](https://github.com/fog/fog/issues/1336)中提到的复制怎么样？参看。[雾的请求来源](https://github.com/fog/fog/blob/master/lib/fog/aws/requests/storage/copy_object.rb)和[雾的模型来源](https://github.com/fog/fog/blob/master/lib/fog/aws/models/storage/file.rb)。

你应该能够做到：

```
storage.copy_object('old_bucket', 'old_filename', 'new_bucket', 'new_filename') 
```

或者

```
file.copy('new_bucket', 'new_filename') 
```

但是，在成功复制后销毁原始文件仍然是必要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T07:56:33.343

坏消息是你需要做一个 get/create/destroy

```
foo = bucket.files.get 'foo'
bar = bucket.files.create :key => 'bar', :body => foo.body
foo.destroy 
```

好消息是，如果您在同一区域从 ec2 执行此操作，它可能会像在本地计算机上重命名文件一样快

# linked-list - 为什么我的链表没有按正确的顺序打印出来？

> ID：13981072
> 
> 赞同：1
> 
> 时间：2012-12-20T21:48:55.073
> 
> 标签：linked-list

输出不正确。第二列火车的名字出现而不是第一列火车的名字，第一列火车的名字完全丢失了。逻辑错误在哪里？另外，root的目的是什么？

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>
#include <string.h>
struct trainset {
    char name[50];
    int price;
    struct trainset *next;
};

void show_list(struct trainset *list);

int main (void){

    struct trainset *root;
    root = (struct trainset *)malloc(sizeof(struct trainset));      
    strncpy(root ->name, " ", 50);
    root ->price = 0;
    root ->next = 0;

    struct trainset *first_train;
    first_train = (struct trainset *) malloc(sizeof(struct trainset)); 
    root ->next = first_train;
    strncpy(first_train->name, "Fantasy Train Set", 50);
    first_train->price = 129;
    first_train->next = NULL;

    struct trainset *second_train;
    second_train = (struct trainset *)malloc(sizeof(struct trainset));
    first_train->next = second_train;
    strncpy(first_train->name, "Uncle Bobs train set", 50);
    second_train ->price = 69;
    second_train ->next = NULL;

    struct trainset *third_train;
    third_train = (struct trainset *)malloc(sizeof(struct trainset));
    second_train->next = third_train;
    strncpy(third_train ->name, "Budha Bread Train", 50);
    third_train ->price = 169;
    third_train ->next = NULL;

    show_list(first_train);
    return 0;
}

void show_list(struct trainset *list)
{
    while(list->next!=NULL)
    {
        printf("train set name: %s, Train price: %d\n", list->name, list->price);
        list = list->next;
    }
    printf("train set name: %s, train price: %d", list->name, list->price);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:53:32.020

好吧，这就是名字的去向：

```
strncpy(first_train->name, "Fantasy Train Set", 50);
...
strncpy(first_train->name, "Uncle Bobs train set", 50); 
```

至于 root 的用途......这是你的代码，谁知道呢。你不需要根节点，你只需要记录第一个节点是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:07:26.970

您似乎正在重写 first_train->name。

```
 23     strncpy(first_train->name, "Fantasy Train Set", 50);  // see here
 24     first_train->price = 129;
 25     first_train->next = NULL;
 26     struct trainset *second_train;
 27     second_train = (struct trainset *)malloc(sizeof(struct trainset));
 28     first_train->next = second_train;
 29     strncpy(first_train->name, "Uncle Bobs train set", 50);   // and here 
```

你应该有函数和过程来做插入和创建操作，我不知道为什么你有一个空的根节点，你不需要这样做，你的根指针可以指向 first_train 节点。

您应该执行以下操作：

```
list* create(int value) {
    node = (list*)malloc(sizeof(list));
    node->value = value;
    node->next = NULL;
}

list* insert(int value, list* root) {
    if (!root) {
        return create(value);
    }
    list* aux = root;
    while(aux->next) {
        aux = aux->next;
    }
    aux->next = create(value);
    return root;
} 
```

此外，在您的循环条件下，您有：

```
while(list->next != NULL) 
```

您可以像这样重写它，这样您就可以避免将最后一个元素打印出循环：

```
while(list){ ... } 
```

希望这可以帮助

# java - IE 不接受来自 Tomcat servlet 过滤器的 cookie

> ID：13981083
> 
> 赞同：1
> 
> 时间：2012-12-20T21:49:48.030
> 
> 标签：java, tomcat, servlets, cookies, servlet-filters

我设置了一个 servlet 过滤器来处理各种进入我的网站的方式。过滤器的一个目标是在输入时设置一个 cookie。下面的代码在 Chrome、Safari 和 Firefox 中完美运行，但 IE 似乎不喜欢它。由于某些限制，我无法使用 JavaScript 设置 cookie。

```
Cookie cookie = new Cookie(COOKIE_NAME, COOKIE_VALUE);
cookie.setPath("/"); //Note: I've tried removing this.
cookie.setDomain(SITE_DOMAIN); //Note: I've tried removing this.
response.addCookie(cookie); 
```

我尝试了最大年龄和到期日期的不同组合，但似乎没有任何效果。我已经调试了一个调试器，我确定代码正在执行。

此外，作为记录，我使用的是 Tomcat 6。Cookie 名称和值都是大约 10 个字符长度的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T05:09:34.877

当 cookie 值包含[版本 0 cookie](http://curl.haxx.se/rfc/cookie_spec.html)的非法字符（例如空格）时，就会发生这种情况。有了这样的 cookie 值，一般容器会自动切换到IE9 或更早版本不支持的[版本 1 cookie 。](http://www.ietf.org/rfc/rfc2109.txt)

您需要确保 cookie 值不包含版本 0 cookie 的非法字符。这在[`Cookie#setValue()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Cookie.html#setValue%28java.lang.String%29)javadoc 中指定如下：

> 对于版本 0 cookie，值不应包含空格、方括号、圆括号、等号、逗号、双引号、斜杠、问号、at 符号、冒号和分号。空值在所有浏览器上的行为方式可能不同。

如果您无法控制实际的 cookie 值，那么最好的选择是`URLEncode`在设置之前和`URLDecode`检索期间进行。

### 也可以看看：

*   [为什么带有空格的 cookie 值带有引号到达客户端？](https://stackoverflow.com/questions/572482/why-do-cookie-values-with-whitespace-arrive-at-the-client-side-with-quotes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:41:46.197

这实际上是由重定向问题引起的。我正在通过单击按钮重定向页面

```
window.location = url; 
```

由于某种原因，这导致 IE 向服务器发出两个请求，根据 Fiddler 的说法，第一个请求被中止。服务器仍然尝试处理第一个请求并设置 cookie，但由于请求被中止，浏览器从未设置 cookie。后续请求假定 cookie 已经设置并且不尝试设置它。

快速解决方法是提交包含数据的表单，而不是将其添加到 URL 的查询字符串并使用 javascript 重定向。

我仍然不确定为什么 IE 会发出重复请求，我猜这是 javascript 可能被调用两次或什么的问题。

# python - django/python：python如何编码非英文字符

> ID：13981092
> 
> 赞同：1
> 
> 时间：2012-12-20T21:50:29.050
> 
> 标签：python, encoding

我正在处理一些字符串操作并尝试将它们放入数据库。然后我遇到了这个（我相信是德语）：

```
Sichere Administration von VoIP-EndgerÃ¤ten 
```

我把它放入数据库后，我意识到非英文字符变成了：

```
Sichere Administration von VoIP-Endger\u00e4ten 
```

当我从数据库中获取它并将这个字符串传递给 subprocess.Popen() 时，它给出了错误：

```
TypeError: execv() arg 2 must contain only strings 
```

我的问题是：这是怎么发生的？还有人对如何学习编码/解码有任何有用的参考吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:51:24.990

是的，阅读[Python Unicode HOWTO](http://docs.python.org/2/howto/unicode.html)；您正在处理编码和 unicode 文本。

`Popen()`第一个字符串是被解释为 Latin-1 的 UTF-8 数据，第二个字符串是 unicode 字符串，如果不先编码就无法传递：

```
>>> print u'\u00e4'  # A unicode escape code for the latin-1 character ä
ä
>>> u'\u00e4'.encode('utf8')  # The same character encoded to UTF-8
'\xc3\xa4'
>>> print u'\u00e4'.encode('utf8').decode('latin1')  # Misinterpreted as Latin-1
Ã¤ 
```

在将`.encode()`数据传递给`.Popen()`.

# macos - 访问帧缓冲区 OSX 10.7

> ID：13981093
> 
> 赞同：6
> 
> 时间：2012-12-20T21:50:39.907
> 
> 标签：macos, cocoa, desktop, quartz-graphics, screen-capture

我目前正在开发一个远程桌面类型的项目，特别是我正在尝试为以前使用的旧的过时方法提供替换代码。在大多数情况下，我已经相当成功地做到了这一点，但我似乎遇到了一个绊脚石。

从 OSX 10.7 开始，方法调用 CGDisplayBaseAddress 已被弃用 ( [1](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/DeprecationAppendix/AppendixADeprecatedAPI.html) )。以前，这给了我内存中帧缓冲区的基地址，在其他地方使用它来查看屏幕的哪些部分发生了变化并确定需要发送到远程显示器的内容。现在它返回 NULL。

我目前的解决方案是使用 CGDisplayCreateImage ( [2](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html#//apple_ref/c/func/CGDisplayCreateImage) )，它给了我一个 CGImageRef ，然后我可以使用它来获取指向图像的原始数据的指针（通过 CFDataRef 对象 - 代码见下文）。

这是最好的方法吗？当然，他们必须是更好的方法！

总结一下：我不想在屏幕上做任何绘图或任何事情，我只是想获取指向内存中第一个字节的指针，该字节包含桌面帧缓冲区或（正如我目前正在做的那样）图像数据。

谢谢你提供的所有帮助！:)

当前解决方案代码：

```
CFDataRef copy_image_pixels(CGImageRef inImage) {
    return CGDataProviderCopyData(CGImageGetDataProvider(inImage)); 
}

/**
 ret_byte_buffer is the byte buffer containing the pixel data for the image **/
void *getPixelDataForImage (CGImageRef image) 
{
    //Check image ref is not null
    if (!image){
        NSLog(@"Error - image was null");
        return -1;
    }

    //Gets a CFData reference for the specified image reference
    CFDataRef pixelData = copy_image_pixels(image);
    //Gets a readonly pointer to the image data
    const UInt8 *pointerToData = CFDataGetBytePtr(pixelData); //This returns a read only version
    //Casting to a void pointer to return, expected to be cast to a byte_t *
    CFIndex length_of_buffer = CFDataGetLength(pixelData);
    printf("Size of buffer is %zu\n",length_of_buffer);
    return (void *)pointerToData;

} 
```

获取 CGImageRef 的代码片段 -

```
osx_disp= main_screen_details->main_screenid; //Returns CGDirectDisplayID
CGImageRef screenShot = CGDisplayCreateImage(osx_disp);
byte_t *image_byte_data = getPixelDataForImage(screenShot); 
```

byte_t 被 typedef 为无符号字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T21:24:19.730

根据我的研究，您似乎不再需要访问帧缓冲区。

我在上面所做的他们的方式可能不是最好的方式，但它确实适用于我需要它做的事情:)

以前，您必须先锁定显示器，然后再松开，这有时会在您松开屏幕时导致屏幕闪烁。

通过创建图像的新方法意味着您不必处理任何仅创建图像和黄金的事情:)

我要添加到现有代码中的一件事是，您必须记住释放 CGImageRef 或它的主要内存泄漏。

为了做到这一点，只需调用：

```
CFRelease(screenShot); 
```

我们还需要以同样的方式释放 pixelData 对象。

```
CFRelease(pixelData); 
```

# c - 尝试读取包含空格时跳过 Scanf()

> ID：13981099
> 
> 赞同：-1
> 
> 时间：2012-12-20T21:51:18.460
> 
> 标签：c, scanf

> **可能重复：**
> [scanf:“%[^\n]”跳过第二个输入，但“%[^\n]”没有。为什么？](https://stackoverflow.com/questions/6083045/scanf-n-skips-the-2nd-input-but-n-does-not-why)

基本上我有一个客户结构，我要在其中输入客户详细信息，其中之一是地址。当然地址是一个句子，因为这是一个没有图形的基本文本程序。

我正在尝试使用`scanf("%[^\n]",&VARIABLE)`方法，因为它在以前的程序中有效。但是在这里，输入被跳过。我尝试在接受此输入之前刷新缓冲区，但没有任何区别。我还尝试创建另一个字符串并将我的输入传递给它，然后将数据复制到我的结构中，但这也不起作用。

这是我的代码 - 问题发生在第 4 次`scanf("%[^\n]",&myCust.address)`：（注意：这是一项正在进行的工作，所以你现在可能会看到一些额外的打印和东西）

```
void addNewCustomer()
{
    struct customer myCust;
    printf("\n\nNEW CUSTOMER ADDITION\n");
    printf("\nEnter customer id : ");
    scanf("%s",&myCust.idNumber);
    printf("\nEnter customer name : ");
    scanf("%s",&myCust.name);
    printf("\nEnter customer surname : ");
    scanf("%s",&myCust.surname);
    fflush(stdin);
    printf("\nEnter customer address : ");
    scanf("%[^\n]",&myCust.address);
    printf("\nEnter customer telephone : ");
    scanf("%s",&myCust.telephone);
    printf("\nEnter customer mobile : ");
    scanf("%s",&myCust.mobile);
    printf("\nEnter customer e-mail : ");
    scanf("%s",&myCust.email);

    FILE *fp;

    fp = fopen("/Users/alexeidebono/Dropbox/Customer_Application/customers.dat","a");
    if (fp == NULL) {
        printf("The File Could Not Be Opened.\n");
        exit(0);
    }
    else{
        printf("File Successfully Open\n");
   fprintf(fp,"%s*%s*%s*%s*%s*%s*%s#\n",myCust.idNumber,myCust.name,myCust.surname,myCust.address,myCust.telephone,myCust.mobile,myCust.email);
    fclose(fp);
    printf("Writing successfully completed and the file is closed!!\n");
   }
} 
```

如果你想要我的结构代码在这里（虽然我不认为结构本身是这个问题的原因）

```
struct customer
{
    char idNumber[11]; 
    char name[11];
    char surname[15];
    char address[30];
    char telephone[14];
    char mobile[14];
    char email[21];

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:53:24.690

```
scanf("%s",&myCust.surname); 
```

这`scanf`会在输入缓冲区中留下一个换行符

```
fflush(stdin); 
```

是标准未定义的行为，根据我的经验，即使库承诺它也不能可靠地工作。

```
printf("\nEnter customer address : ");
scanf("%[^\n]",&myCust.address); 
```

这会立即找到换行符。所以它不会读入任何内容，因为它首先遇到换行符。通过在格式中包含空格使其首先跳过空格，

```
scanf(" %[^\n]",&myCust.address); 
```

或使用`fgets`或`getline`（如果您在 POSIX 系统上）读取整行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:53:21.620

标题：

> 尝试读取包含空格时跳过 Scanf()

是的。那不是错误。这就是`scanf()`工作原理（请阅读您下次尝试使用的函数的文档）。如果您想获得一整行，无论其内容如何，​​请使用`fgets()`：

```
char buf[1024];
fgets(buf, sizeof(buf), stdin); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:54:49.627

如果跳过了 scanf() 命令，那通常是因为您输入了以前扫描的垃圾。

尝试在跳过的之前添加另一个 scanf(&junk) 。垃圾应该是char。

# css - 如何使用 CSS 选择器选择除第一个和最后一个之外的所有子项

> ID：13981111
> 
> 赞同：66
> 
> 时间：2012-12-20T21:52:04.747
> 
> 标签：css, css-selectors

除了第一个和最后一个之外，我将如何选择表中的所有孩子？我试过这个，但它最终选择了所有不是第一个的孩子和所有不是最后一个的孩子，最终都是孩子：

```
table.programs tr td:not(:first-child), table.programs tr td:not(:last-child) {
} 
```

我想要所有既不是第一个也不是最后一个的孩子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-12-20T23:30:00.783

结合使用两个`:not()`选择器，从而引用与它们都匹配的元素，即不匹配用作操作数的选择器的元素`:not()`：

```
table.programs td:not(:first-child):not(:last-child) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T22:04:22.713

jQuery 解决方案很好，但如果您想在纯 CSS 中执行此操作，我建议您将规则应用于整个表格，然后为第一个和最后一个孩子*重置它们。*IE：

```
table.programs tr td { 
  /* your rules here */
}

table.programs tr:first-child td:first-child, 
table.programs tr:last-child td:last-child {
  /* reset your rules here */
} 
```

[jsFiddle 演示](http://jsfiddle.net/xyzzy/q9Epw/1/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-09T20:44:41.377

像这样。

```
li:nth-child(n+2):nth-last-child(n+2) { background: red; } 
```

满足您的要求

```
table.programs tr td:nth-child(n+2):nth-last-child(n+2) { /* Your Style */ } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T21:57:19.977

我认为这应该适合你：

```
table.programs tr td:not(:first-child,:last-child) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-10T09:37:50.713

它以这种方式工作

```
 table.programs tr td:nth-child(1n+2):not(:last-child) 
```

# javascript - javascript递增数值数组

> ID：13981112
> 
> 赞同：4
> 
> 时间：2012-12-20T21:52:08.333
> 
> 标签：javascript

我们有一个数值数组，每个元素都有任意最大值。我们如何增加元素以使数组从`[0, 0, 0]`到`[x, y, z]`？

为了说明最大数组是否是`[2, 1, 2]`，我们在`[0, 0, 0]`递增时启动主数组应该通过以下步骤来处理主数组：

```
[0, 0, 0]
[1, 0, 0]
[2, 0, 0]
[0, 1, 0]
[1, 1, 0]
[2, 1, 0]
[0, 0, 1]
[1, 0, 1]
[2, 0, 1]
[0, 1, 1]
[1, 1, 1]
[2, 1, 1]
[0, 0, 2]
[1, 0, 2]
[2, 0, 2]
[0, 1, 2]
[1, 1, 2]
[2, 1, 2] 
```

我编写了一个函数，一旦达到最大值 1 就会停止递增。这是我的代码：

```
var maxes = [2, 1, 2];
var myArray = [0, 0, 0];

function step() {
  for(var i = 0; i < myArray.length; i++) {
    if(myArray[i] == maxes[i]) {
       continue;
    } else {
       myArray[i] = myArray[i] + 1;
       return;
    }
  }
  return false;
}

for(j = 0; j < 100; j++) {
  result = step();
  if(!result) break;
  console.log(result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:52:52.623

公平披露：这是我自己的问题。我无法访问我的 SO 或电子邮件登录名，并使用刚刚为朋友创建的新帐户发布了这个问题。我不赞成这个问题或他的答案。我也不会让我的朋友将我的答案标记为已接受。无论如何，我解决了这个问题，最终得到了这个工作代码：

```
var maxes = [4,1,2,3];
var pattern = [0,0,0,0];

function step() {
  var t = false;
  for(var k = 0; k < pattern.length; k++) {
    t = t || (pattern[k] < maxes[k]);
  }
  if(!t) return false;
  for(k = 0; k < pattern.length; k++) {
    if(pattern[k] < maxes[k]) {
      pattern[k]++;
      return true;
    } else {
      pattern[k] = 0;
      continue;
    }
    return false;
  }
}

console.log(pattern);
var r = true;
while(r) {
  r = step();
  console.log(pattern);
} 
```

JSBin[在这里](http://jsbin.com/ucagoj/1/edit)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:55:47.730

您需要两个循环 - 每个`maxes`元素一个，目前有 4 个，但我不确定您是否打算将其更改为动态；另一个循环将增加每个元素的值，直到它从`maxes`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:01:05.637

你只是有一些错误需要解决：

```
var maxes   = [3, 1, 2, 1];
var myArray = [0, 0, 0, 0];

function step() {
  var changed = false;
  for(var i = 0; i < myArray.length; i++) {
    if(myArray[i] == maxes[i]) {
       continue;
    } else {
       myArray[i] = myArray[i] + 1;
       changed = true;
    }
  }
  return changed;
}

for(j = 0; j < 100; j++) {
  result = step();
  if(!result) break;
  console.log(myArray.join(", "));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T10:00:51.583

几天前我重新审视了这个问题，并对代码进行了一些重构。

首先要正确理解这个问题，它相当于在一个混合基数系统中计数。在这个系统中，每个位置/数字都有一个任意基数。例如，如果所有最大值都是 2，那么问题将以 2 为基数计算，但每个位置的最大值可能是不同的数字，因此是*混合*基系统。

中心函数其实很简单：

```
// increment in hyper system
function incr(maxes,num,digit) {
  num[digit] = num[digit] + 1;
  num[digit] = num[digit] % (maxes[digit]+1);
  if(num[digit] === 0) incr(maxes,num,digit+1);
} 
```

这是一个有效的[jsbin](http://jsbin.com/ujipaq/1/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-20T22:10:22.393

这是一个更简单、更有效的解决方案：只需使用一个变量*pos*来存储数组中的当前位置。一旦我们在当前位置达到最大值，我们将当前位置增加 1，否则在当前位置增加值。而这个过程你只是不断重复，直到*pos*达到最后一个值**并且**最后一个值处于最大值。

```
var maxes = [3, 1, 2, 1];
var myArray = [0, 0, 0, 0];
var pos = 0;

while (pos < myArray.length - 1 || myArray[pos] < maxes[pos]) {
    if (myArray[pos] >= maxes[pos]) {
        myArray[pos] = 0; // to set it back to zero
        pos++;
        continue;
    } 
    myArray[pos]++;

    // Step code here
} 
```

适用于任何大小的数组。这是一个[jsfiddle](http://jsfiddle.net/brXnB/)

# java - 如何从 android 客户端上传媒体文件（图像或 mp3 歌曲）到 java 服务器

> ID：13981116
> 
> 赞同：0
> 
> 时间：2012-12-20T21:52:16.503
> 
> 标签：java, android, upload, media

大家好，我是 android 新手，目前正在尝试学习一些关于它的东西。我正在构建一个应用程序，我可以在其中将一些媒体文件（画廊中的图像或手机中的音乐）上传到我的 PC 上运行的服务器，该服务器是用 java 编写的。

我已经建立了客户端服务器连接，但我不知道如何传输媒体文件！一些好的链接和一些指导会非常有帮助，谢谢

这是编辑

我的服务器代码

```
import java.net.ServerSocket;
import java.net.Socket;
import java.io.*;

public class wow {

    ServerSocket serSock;
    Socket sock;

    /**
     * @param args
     */
    public static void main(String[] args) {

        // Writer output = null;
        // File file = new File("write.txt");
        // output = new BufferedWriter(new FileWriter(file));

        //String clientSentence;

        try {
            wow cs = new wow();
            cs.startServer();
        } catch (Exception e) {

        }
        // TODO Auto-generated method stub

    }

    public void startServer() throws Exception {
        String clientSentence;
        Writer output = null;
        File file = new File("write.txt");
        output = new BufferedWriter(new FileWriter(file));

        try {
            serSock = new ServerSocket(6789);
            System.out.println("Waiting for client...");
            sock = serSock.accept();

            System.out.println("Connections done");

            BufferedReader inFromClient =
                    new BufferedReader(new
                            InputStreamReader(sock.getInputStream()));
            clientSentence = inFromClient.readLine();
            // tarea.setText(clientSentence);
            output.write(clientSentence);
            System.out.println(clientSentence);
            output.close();

        } catch (Exception e) {
            System.out.println(e);
            e.printStackTrace();
        }

    }
} 
```

此代码只是从客户端接收消息并显示它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:11:39.223

您可以只在服务器上使用 servlet 并以 Restful 方式发布文件的字节数组吗？

我将使用[httpclient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)库进行 http 发布，并使用[gson](http://code.google.com/p/google-gson/)库将数据序列化为 json。

然后在服务器端，我只会让[servlet](http://docs.oracle.com/javaee/1.3/api/javax/servlet/package-summary.html)接受您发送的 http 帖子。使用带有适当插件的netbeans或eclipse（不记得哪些插件，我认为eclipse中的web开发工具（wdt））使得构建servlet变得更加容易，因为它设置了doPost和doGet方法。

# c - 十六进制参数“或” | C中的运算符

> ID：13981119
> 
> 赞同：0
> 
> 时间：2012-12-20T21:53:00.343
> 
> 标签：c, constants

我对 C 很陌生，我来自 Web 开发背景，所以我有点不确定我见过 C 程序员使用的一些位和字节编码。我正在查看一些将参数传递给函数的 C 代码。

```
insert_chem(int jobId, ...); 
```

而当这个函数被调用时，传入的jobId其实是一个常量，原来是这样定义的：

```
CYCLE_JOB_MEM = 0x00020000 
```

它会像这样使用：

```
insert_chem(CYCLE_JOB_MEM, ...); 
```

我已经看到这可以与相同的第一个参数一起传递：

```
#define DETAILS 0x80000000 
```

像这样：

```
insert_chem(CYCLE_JOB_MEM|DETAILS, ...); 
```

这里到底发生了什么？这段代码很老了，C 还使用这样的做法吗？如果有人能给我一些关键词和一个简单的解释，那么我可以继续研究这个。

对不起，如果这东西很简单！

更新：

这些似乎是十六进制值，如何传入多个值？输入函数时它们是否分开？为什么不首先传递多个参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:16:03.773

这是将一个参数用于多个事物的经典方式，通常称为“位掩码”或“位标志”。这里的关键是理解数字在计算机中是如何表示的，以及运算符“或”( `|`)。

如果您了解数字是如何存储在计算机中的，以及 or 运算符是如何工作的，那么剩下的就很简单了。

为什么不使用多个参数？好吧，如果只有两个，那么也许这不是一个大问题，但想象一下，如果你有 16 个不同的选项？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:18:01.600

这是一个不错的简单... 在“CYCLE_JOB_MEM|DETAILS”中对这两个值执行二进制或运算。将 0x10 与 0x02 进行或运算的结果将是 0x12。

在您的情况下，它是 OR-ing 0x00020000 与 0x80000000 导致 0x80020000 的值作为参数传入。

编辑：这种事情通常是通过通信数据包完成的。其中每个位用于指示不同的条件或故障（例如）。这样，您可以用一个字节指示 8 个布尔（真/假）条件。

```
#define PACKET_ACK 0x80
#define PACKET_NAK 0x40
#define PACKET_ERR 0x20
#define PACKET_WTF 0x10
#define PACKET_LOL 0x01 
```

ETC...

如果您传入 (PACKET_ACK|PACKET_WTF)，传入参数的值为 0x81。

然后通常由（根据评论）处理

```
if ( arg & PACKET_ACK ){/*do some stuff*/}
if ( arg & PACKET_WTF ){/*do some other stuff*/} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:19:41.977

单一`|`的是*按位或运算符*。对两个操作数中的每一位执行布尔或运算。例如，2 和 4 的按位或运算是

```
 0010
| 0100
------
  0110 
```

给出值 6。结果`CYCLE_JOB_MEM|DETAILS`是 0x80020000；这是作为第一个参数传递给`insert_chem`.

有关更多信息，请搜索“C 位运算符”。

# java - BuildNumber 不是用 buildnumber-maven-plugin 生成的

> ID：13981120
> 
> 赞同：4
> 
> 时间：2012-12-20T21:53:04.533
> 
> 标签：java, maven

在我的父母 pom 我有

```
<build>
 <plugins>
    <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>buildnumber-maven-plugin</artifactId>
        <version>1.1</version>
        <executions>
            <execution>
                <phase>validate</phase>
                <goals>
                <goal>create</goal>
                </goals>
            </execution>
        </executions>
            <configuration>
                <doCheck>true</doCheck>
                <doUpdate>true</doUpdate>
            </configuration>
        </plugin> 
```

在子模块中运行具有上述默认属性的 java Main 类：**buildName**和**scmBranch**：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>exec-maven-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
    <execution>
        <id>my-execution</id>
        <phase>package</phase>
        <goals>
            <goal>exec</goal>
            </goals>
        </execution>
        </executions>
            <configuration>
            <executable>java</executable>
                <arguments>
                    <argument>-classpath</argument>
                        <classpath />
                        <argument>${MyMainClass}</argument>
                        <argument>test-${scmBranch}-${buildNumber}</argument>
                </arguments>
            </configuration> 
```

但是这些变量在我的主类中永远不会被替换/扩展。有任何想法吗？

从文档中：

```
required: false
type: java.lang.String
expression: ${maven.buildNumber.buildNumberPropertyName}
default: buildNumber

You can rename the buildNumber property name to another 
 property name if desired. 
```

据我了解，**buildNumber**是包含 buildnumber-maven-plugin 时提供的属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-03T20:36:39.467

在您的父 pom 中，您尚未定义[pluginManagement](http://maven.apache.org/pom.html#Plugin_Management)标记。没有它，您的子模块不会继承您定义的插件，它们仅由父 pom 使用。这是您需要添加到**父 pom**的内容：

```
<build>
    <!-- plugins used by this POM and all inheriting POMs -->
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>buildnumber-maven-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <phase>validate</phase>
                        <goals>
                            <goal>create</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <doCheck>true</doCheck>
                    <doUpdate>true</doUpdate>
                </configuration>
            </plugin>
            <!-- other plugins -->
        </plugins>
    </pluginManagement>
</build> 
```

现在您的子模块可以访问 buildnumber-maven-plugin。

# python - 通过将行和列乘以 -1 使矩阵中的整数和最大

> ID：13981122
> 
> 赞同：9
> 
> 时间：2012-12-20T21:53:11.020
> 
> 标签：python, algorithm, numpy, python-3.x

有一个`M`大小`m, n`超过整数的矩阵，什么是一个好的算法来转换它，使得所有元素的总和是最大的？

唯一允许的操作是逐`-1`列或逐行相乘。可以根据需要执行尽可能多的此类操作。

*粗略的，总体思路*：我的想法是将每个负号从一个这样的负数移动到其值最小的正数，这样减号对总和的影响最小。

让我们举个例子：

```
import numpy as np

M = np.matrix([
        [2,2,2,2],
        [2,2,-2,2],
        [2,2,2,2],
        [2,2,2,1],
    ])

def invert_at(M, n, m):
    M[n,:] *= -1
    M[:,m] *= -1 
```

我已经尝试过构建从负元素到最小数字的最短路径之一以及`invert_at`沿途的每个单元格。

首先包括开始和结束单元格：

```
invert_at(M, 1, 2)  # start
invert_at(M, 2, 2)
invert_at(M, 3, 2)
invert_at(M, 3, 3)  # end 
```

我最终得到：

```
[[ 2  2 -2 -2]
 [-2 -2 -2  2]
 [-2 -2  2  2]
 [ 2  2 -2 -1]] 
```

哪种看起来很有趣。它将减号推到右下角的 -1，但也推到其他一些区域。现在，如果我要在开始和结束位置（即`-1 * -1 = 1`）再次反转，所以首先省略开始和结束单元格，我最终得到：

```
[[ 2  2  2  2]
 [ 2  2 -2  2]
 [-2 -2 -2 -2]
 [-2 -2 -2 -1]] 
```

看起来更好，考虑到我想要

```
[[ 2  2  2  2]
 [ 2  2  2  2]
 [ 2  2  2  2]
 [ 2  2  2 -1]] 
```

通过将减号“推”向矩阵的右“一半”。

谈到“一半”，我也玩过（很多）使用矩阵分区的想法，但我无法观察到任何可用的模式。

我尝试过的大多数事情都让我回到了原始矩阵，我们可以观察到的这种“雪崩效应”让我发疯。

解决这个问题的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:53:13.697

n 行或 m 列中的任何一个都可以翻转 (-1) 或未翻转 (1)。

这意味着可能性的总数是 2^(n+m)。这意味着有一个可以在指数时间内找到的解决方案。对于小型矩阵，您可以使用蛮力，搜索翻转和未翻转的列和行的所有可能组合。

但是，您确实需要等到所有内容都已应用，否则您将陷入局部最小值。

在这种特定情况下，M 已经是最大和 (27)

```
import numpy as np

def bit_iter(n):
    for i in xrange(2**(n)):
        bits = []
        for j in xrange(n):
            if i & (2**j) != 0:
                bits.append(1)
            else:
                bits.append(0)
        yield bits

def maximal_sum(M):
    Morig = M.copy()
    n, m = M.shape
    best = None
    for bits in bit_iter(n + m):
        nvec = bits[:n]
        mvec = bits[n:]
        assert(len(nvec) + len(mvec) == len(bits))
        M = Morig.copy()
        for i, v in enumerate(nvec):
            if v == 0:
                M[i, :] *= -1
        for i, v in enumerate(mvec):
            if v == 0:
                M[:, i] *= -1
        if best == None or np.sum(M) > np.sum(best):
            best = M
    return best

M = np.matrix([
    [2,2,2,2],
    [2,2,-2,2],
    [2,2,2,2],
    [2,2,2,1],
])
print maximal_sum(M)
M = np.matrix([
        [1,2],[3,-4]
    ])
print maximal_sum(M)
M = np.matrix([
        [2,-2,2,2],
        [2,2,2,2],
        [2,2,-2,2],
        [2,2,2,2],
        [2,2,2,1],
    ])
print maximal_sum(M) 
```

给出：

```
[[ 2  2  2  2]
 [ 2  2 -2  2]
 [ 2  2  2  2]
 [ 2  2  2  1]]
[[-1  2]
 [ 3  4]]
[[ 2 -2  2  2]
 [ 2  2  2  2]
 [ 2  2 -2  2]
 [ 2  2  2  2]
 [ 2  2  2  1]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T05:45:35.440

[作为伪布尔函数](http://en.wikipedia.org/wiki/Pseudo-Boolean_function)(PB) 优化的一个实例，该问题很可能是 NP-hard 。

您可以用布尔变量 x_i 表示“第 i 行被否定”的事实，而用布尔变量 y_j 表示“第 j 列被否定”的事实。

那么，每个矩阵元素的“翻转符号”可以描述为

```
 c(i, j) = 1 - 2*x_i - 2*y_j + 4*x_i*y_j . 
```

So, given your matrix M, your problem asks to maximize the PB function

```
 f = sum A[i,j]*c(i, j) . 
```

Optimization of PB functions is known to be NP-hard, so unless this particular class of functions admits a clever solution, smart brute-forcing (Andrew's solutions) seems the way to go.

There is a nice write-up for a very similar problem in [this blog post](http://realtimecollisiondetection.net/blog/?p=43).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:10:20.270

我不确定您的问题是否具有多项式时间解。我不认为是这样，但我也不知道如何证明它是 NP 完全的。

一种可能有前途的方法是将其编写为（非凸）二次程序：我们希望找到向量 v 和 w 使得 -1 <= v <= 1、-1 <= w <= 1 和 v^TM w 尽可能大。这是一种放松；我不要求 v 和 w 仅具有 +/-1 个条目，但它具有与您的问题相同的最佳解决方案。你应该能够为这个问题找到一个“合理的”凸二次松弛，然后在它上面构建一个分支定界方案。

# html - 在 Link_to 中添加 HTML - Rails

> ID：13981132
> 
> 赞同：0
> 
> 时间：2012-12-20T21:53:38.257
> 
> 标签：html, ruby-on-rails, ruby, erb

我可以在 link_to 中添加 HTML 吗？

例如，而不是`<%= link_to post.title, post %>`我更喜欢：

```
<%= link_to '<span>post.title</span>', post %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:56:35.473

使用块：

```
<%= link_to(post) do %>
  <span>Test</span>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:29:55.027

我也会使用块，但一般方法是：

```
= link_to '', :href => some_path, :class=> 'some classes', :etc => 'some value' do
  %span your HTML here 
```

当然，erb 也是如此。

# css - 是什么导致我使用的所有字体在 waterfox 上看起来比 chrome、safari 和 opera 略小，而 IE9 上的字体显示为粗体？

> ID：13981135
> 
> 赞同：1
> 
> 时间：2012-12-20T21:53:54.610
> 
> 标签：css, fonts, font-face

就我在 Firefox、Chrome、Safari 和 Opera 上看到的而言，我的网站字体看起来是一样的。几个月来，我一直在使用 64 位版本的 firefox，称为 waterfox。当我在 waterfox 中查看该站点时，我使用的两种字体都显得更小，但其余内容的大小与上述三个浏览器中的完全相同。Waterfox 本质上是使用 intel c++ 64 位编译器编译的 firefox。我确保所有浏览器都处于 100% 缩放状态，并且字体使用 @fontface 加载。有没有一种方法可以让 waterfox 中的字体呈现与其他字体相同的大小？

该网站是[http://www.pistol.org.ohio-state.edu](http://www.pistol.org.ohio-state.edu)

# javascript - Javascript 的一个奇怪的浮点数

> ID：13981137
> 
> 赞同：1
> 
> 时间：2012-12-20T21:53:59.413
> 
> 标签：javascript, google-maps

我正在尝试在我的应用程序中实现谷歌地图，奇怪的事情发生在我的应用程序调用时，

```
new google.maps.LatLng(39.776637,30.520544‎); 
```

代码返回“意外令牌非法”

但是如果我删除最后 4 个并从我的键盘手动重写它，

```
new google.maps.LatLng(39.776637,30.520544); 
```

该代码可以正常工作。

# ruby-on-rails - Rails Devise：如何将登录表单和恢复密码放在同一页面上？

> ID：13981140
> 
> 赞同：6
> 
> 时间：2012-12-20T21:54:13.260
> 
> 标签：ruby-on-rails, devise

我的模板如下所示：

```
.dropdown.light
      .login
        =form_for("user", :url => user_session_path) do |f|
          = f.hidden_field :redirect_to, :value => request.fullpath
          = f.email_field :email, :placeholder => "email", :size => ''
          = f.password_field :password, :placeholder => "password", :size => ''
          div.remember
            = f.check_box :remember_me, :checked => "checked"
            = f.label :remember_me
          .clearfix
            a.forgot.pull-left href="#forgot" Forgot your password?
            input.pull-right type="submit" value="Sign in"
      .forgotten
        =form_for(:user,:as => :user_forgot, :url => password_path(:user), :html => { :method => :post }) do |f|
          p
            strong Reset your password
          p.small Give us your e-mail and you’ll be back in a jiffy
          div= f.email_field :email
          .clearfix
            a.forgot.nevermind.pull-left href="#forgot" Nevermind
            input.pull-right type="submit" value="Reset password"
      .sent
        p
          strong Email sent!
        p In a couple of minutes you should receive an email with a link to reset your password 
```

它确实有效，但它会生成两个具有重复 ID 的表单，例如...

```
<input id="user_email" name="user[email]" size="30" type="email"> 
```

如何更改此设置以使 ID 不重复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:03:33.620

您可以将命名空间添加到表单中。

```
=form_for(:user, :as => :user_forgot, :url => password_path(:user), :namespace => 'forgot', :html => { :method => :post }) do |f| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T14:38:07.727

如果您不喜欢涉及名称空间，可以尝试 AJAX 请求。这将保证您可以在形成 POST 请求时重命名字段。

或者您可以覆盖 Devise 的默认 PasswordsController 并编写自己的方法来恢复密码。对于您的覆盖，您可以简单地从 {RubyFolder}/lib/ruby/gems/1.9.1/gems/devise-2.1.2/app/controllers/devise/passwords_controller.rb 借用一些方法的代码，并为您的应用程序（例如，重命名预期的输入参数）。

# c# - 为什么我的 Outlook 插件只能运行一次？

> ID：13981141
> 
> 赞同：0
> 
> 时间：2012-12-20T21:54:15.230
> 
> 标签：c#, outlook-addin, outlook-2010

好的，所以我生成了一个非常简单的功能区，以添加到用户打开的每个新撰写窗口中。丝带第一次工作正常。它上面有 2 个复选框，假设用户选择第一个复选框并发送他们的消息。

如果我在用户发送第一条消息时调试代码。如果`ItemSend`我访问`Globals.Ribbons.MyRibbon.MyCheckbox1.Checked`它，它将显示该复选框已选中。该窗口关闭，用户打开一封新电子邮件。

假设在第二封电子邮件中，用户单击了第二个复选框`Globals.Ribbons.MyRibbon.MyCheckbox2.Checked`。如果我调试相同的`ItemSend`事件并查看该字段，它将显示为 false，并且当前选中了第一个复选框。

就好像`Globals.Ribbons.MyRibbon`控制实例没有得到正确更新，或者我误解了它没有得到正确处理。

**编辑 1**

作为更新，我使用了功能区（可视化设计器）来创建我的功能区。我应该使用功能区 (XML) 吗？

**编辑 2**

不知道如何将它添加到我的问题中，当它已经在上面的原始问题中时会有什么不同，但这是我在应用程序中使用的“代码”。

```
private void ThisAddIn_Startup(object sender, System.EventArgs e) {
    this.Application.ItemSend += new Outlook.ApplicationEvents_11_ItemSendEventHandler(Application_ItemSend);
}

void Application_ItemSend(object Item, ref bool Cancel) {
    if (Globals.Ribbons.MyRibbon.MyCheckbox1.Checked) {

    } else { 

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:56:48.527

所以我的问题是我没有访问当前的功能区集合。正如上面的代码所述，我使用的是`Globals.Ribbons.MyRibbon.Checkbox1.Checked`. `ItemSend`对于您需要指定的每个事件`ThisRibbonCollection ribbonCollection = Globals.Ribbons[Globals.ThisAddIn.Application.ActiveInspector()];`，以获取当前的 Windows 功能区。这反过来又给了我发送事件的正确值。

对于那些在代码窗口中需要它的人。

```
private void ThisAddIn_Startup(object sender, System.EventArgs e) {
    this.Application.ItemSend += new Outlook.ApplicationEvents_11_ItemSendEventHandler(Application_ItemSend);
}

void Application_ItemSend(object Item, ref bool Cancel) {
    ThisRibbonCollection ribbonCollection = Globals.Ribbons[Globals.ThisAddIn.Application.ActiveInspector()];
    if (ribbonCollection.MyRibbon.MyCheckbox1.Checked) {

    } else { 

    }
} 
```

# php - php和mysql的年度报警机制

> ID：13981144
> 
> 赞同：0
> 
> 时间：2012-12-20T21:54:25.137
> 
> 标签：php, mysql

我正在尝试使用 php + mysql 设置某种警报机制。例如，假设我必须在一年中的不同时间缴纳一些税款。这些税收在不同年份开始和到期。

首先，我认为用当年的付款日期创建记录似乎很方便。

```
+---+----+------------+
|aid| id |    date    |
+---+----+------------+
| 1 |  1 | 2010-01-31 |
| 2 |  1 | 2011-01-31 |
| 3 |  1 | 2012-01-31 |
| 4 |  1 | 2013-01-31 |
| 5 |  1 | 2014-01-31 |
| 6 |  2 | 2012-04-30 |
| 7 |  2 | 2013-04-30 |
| 8 |  2 | 2014-04-30 |
| 9 |  2 | 2015-04-30 |
| 10|  2 | 2016-04-30 |
| 11|  2 | 2017-04-30 |
| 12|  2 | 2018-04-30 |
+---+----+------------+ 
```

因此，我可以在一个月或一周前通过类似以下的查询看到我的闹钟：

```
SELECT * FROM alarms WHERE date <= x_time_after_current_date 
```

但是，从长远来看，将有数百万条记录。所以我决定像这样改变我的表结构。

```
+----+------------+------------+-------- -+
| id | first_date | begin_year | end_year |
+----+------------+------------+----------+
|  1 | 2010-01-31 | 2010       | 2023     |
|  2 | 2008-01-31 | 2008       | 2015     |
|  3 | 2012-01-31 | 2012       | 2015     |
|  4 | 2012-06-30 | 2012       | 2014     |
|  5 | 2005-04-30 | 2005       | 2015     |
|  6 | 2013-01-31 | 2012       | 2018     |
+----+------------+------------+----------+ 
```

但我不确定哪个是最佳实践，我应该如何为最后一个示例设计查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T21:57:16.850

老实说，查询具有数百万条记录的表实际上并没有什么问题，只要您对表进行了正确的索引，您有足够的内存分配给 MySQL 以将经常引用的索引保存在内存中，并且您正确地利用这些索引来查询它.

只要您有一个索引，我认为您的第一个表结构没有任何问题`date`。

在您的第二个示例中，您可能无法有效地使用索引甚至查询表，因为您只关心`first_date`字段的月份和日期部分以进行查询，这意味着您需要查询相应的数据函数，这样您将无法使用该字段上的索引。这种方法还会在跨年份查询日期时引入一些奇怪的边缘案例逻辑，这将导致不必要的复杂查询。

# c++ - 从 long long int 中减去一个 int

> ID：13981151
> 
> 赞同：1
> 
> 时间：2012-12-20T21:55:12.797
> 
> 标签：c++, casting, integer, long-integer

1.  我可以`int`从`long long int`变量中减去变量吗？

2.  如果我不能：我需要存储比可以存储在 a 中的数字更大的数字`int`，并且我不想使用 a`double`或者`float`因为我需要整数，我该怎么办？我不想使用所有`long long int`. 有没有办法将`int`a 转换为 a`long long int`以便我可以进行减法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T21:56:48.393

是的你可以。将`int`通过*通常的算术转换转换*为 a`long long int`以进行减法，因此两个操作数具有相同的整数转换等级，结果也将是 a `long long int`。

§5/9 涵盖了这一点：

> 许多期望算术或枚举类型的操作数的二元运算符会以类似的方式导致转换和产生结果类型。目的是产生一个通用类型，这也是结果的类型。这种模式称为*通常的算术转换*，其定义如下：
> 
> [...]
> 如果两个操作数都具有有符号整数类型或都具有无符号整数类型，则具有较小整数转换等级的类型的操作数应转换为具有较大等级的操作数的类型。
> [...]

的等级`long long int`大于 的等级`int`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:56:20.193

是的，您可以`int`从 a 中减去 a `long long int`。你不需要任何明确的演员表，因为它`int`会自动加宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:56:21.893

1.  是的; 结果是 a `long long`（直到您将其转换为其他类型；事实上，它是 a`long long`但您可能会将结果转换为不同的类型）。

2.  不适用。

# c++ - 奇怪的 GetTickCount 问题

> ID：13981152
> 
> 赞同：0
> 
> 时间：2012-12-20T21:55:20.947
> 
> 标签：c++, windows, time, unix-timestamp

我正在构建一个简单的控制台 c++ 应用程序。当我在一台**Windows XP 机器上运行它时，我得到了输出。看起来不错。**

> 滴答时间：134993550
> 
> 滴答时间：134993560

**当我在另一台Windows Server 2008 R2**机器上运行它时，我得到以下输出，但我不明白它是怎么回事？

> 滴答时间：654336178
> 
> 滴答时间：654336194

```
#include <iostream>
#include <windows.h>
using namespace std;

int main()
{
    int i=0;
    while(i<100000){
        cout << " TickTime :" << GetTickCount();
        i++;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:57:49.390

检索自系统启动以来经过的毫秒数，最多 49.7 天。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:02:04.360

> 我可以使用什么函数来获取 unix 时间戳/纪元时间

为此，您可以使用`time()`et al：

[http://msdn.microsoft.com/en-us/library/1f4c8f33.aspx](http://msdn.microsoft.com/en-us/library/1f4c8f33.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T21:57:56.293

我没有看到这个问题。GetTickCount() 返回系统启动后的时间，不是绝对的。在任何一种情况下，差异都是几个滴答声（10 个，分别是 16 个），所以看起来不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:01:28.260

我认为这个问题的提问者对 XP 机器似乎比服务器机器执行代码更快感到困惑。这个谜题的答案很复杂，有很多变数，但仅举两个最大的变量：硬件资源差异和工作负载差异（这两者上还运行着什么）。此外，如果你让它运行一段时间并加载其他程序等......我想你会发现那些“抽动”不会保持静止......

简而言之，服务器可能有更好的硬件，但如果它运行的是一堆可以影响它的软件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T22:06:02.043

所以，你可能想要 [GetSystemTime](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms724390%28v=vs.85%29.aspx)

# css - RhoMobile：锁定纵向视图

> ID：13981157
> 
> 赞同：-1
> 
> 时间：2012-12-20T21:55:41.857
> 
> 标签：css, jquery-mobile, rhomobile, rhodes

我正在 RhoMobile 中开发一个应用程序，它只需要在纵向视图中显示内容。

我试过了：

```
disable_screen_rotation = 1  //in rhoconfig.txt 
```

它不起作用。我了解 avobe 行仅适用于 iPhone 和 Android，但它不适用于我。

我还尝试将 Rhodes.java 修改为：

```
this.setRequestedOrientation(disableScreenRotation ?
ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE :
ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

问题是我使用的是 Rhodes 3.4.1，但找不到 Rhodes.java 的位置。我可以用 JQM 和 CSS 完成这个吗？（我认为这不是一个好主意，但我可能错了。）非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:17:20.320

1.  对于 Android 和 iphone 的 RhoMobile，更改您的 build.yml 并添加：

    ```
    android:
        orientation: portrait

    iphone:
        orientation: portrait 
    ```

2.  jQM with phonegap，只需更改 android manifest 并添加（这在 RhoMobile 中不起作用）：

    ```
    android:configChanges="keyboardHidden|orientation"
    android:screenOrientation="landscape" 
    ```

对于 iOs 更改 Info.plist 文件，添加 UIInterfaceOrientation 键并将其值设置为横向模式。

你到底做什么都知道，实现这一点的唯一成功方法是更改​​平台配置文件。RhoMobile 将要求您更改 build.yml，您将能够更改平台配置文件，但它们将在构建状态下被重写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T18:25:54.033

我找到了解决方案...我刚刚修改了 rhodes/platform/android/Rhodes/AndroidManifest.xml

```
<activity android:name="MainActivity" android:configChanges="portrait"> 
```

# javascript - 向页面添加按钮

> ID：13981172
> 
> 赞同：1
> 
> 时间：2012-12-20T21:56:48.563
> 
> 标签：javascript, greasemonkey

我正在尝试在一些文本旁边添加一个按钮，单击该按钮会在谷歌地图上显示地址。问题是它只是添加了我的按钮的文本，而不是按钮本身。

```
function googleMaps(address) {
    GM_openInTab('https://maps.google.com/maps?q=' + address.replace(/ /g, '+'));
}

function addButtons() {
    var mydiv         = document.querySelector('div[data-bind="CurrentJob.addr"]');
    var address       = mydiv.textContent + ", UT";
    mydiv.textContent = address + ' <input type="button" id="mapButton" value="Google Maps">';

    document.body.appendChild (mydiv.textContent);
    document.getElementById ("mapButton").addEventListener ("click", googleMaps(address), false);
} 
```

我确定这与最后一行的第二行有关，但我对这些东西还是很陌生。

* * *

***更新代码：***

添加了按钮，但在页面加载时触发了事件。之后单击它不会执行任何操作。

```
// ==UserScript==
// @name    Job Aids
// @description Aid in closing tickets
// @include https://techaccess.ad.qintra.com/WorkJobs/WorkJobs.aspx*
// @namespace   camzilla.net
// @version     1.1.20121128
// ==/UserScript==

var url  = window.location.href.split(".aspx");
var page = url[1].toLowerCase();

if (page == "#finaltest") {
    window.addEventListener ("load", finalResults, false);
} else if (page == "#threetoneslope") {
    window.addEventListener ("load", toneSlopeResults, false);
} else if (page == "#codes") {
    window.addEventListener ("load", closingComments, false);
} else if (page == "#cras") {
    window.addEventListener ("load", crasResults, false);
} else if (page == "#jobinfo") {
    window.addEventListener ("load", addButtons, false);
}

function googleMaps(address) {
    GM_openInTab('https://maps.google.com/maps?q=' + address.replace(/ /g, '+'));
}

function pollDSLAM(address) {
    GM_openInTab('http://acmspjv1.interprise.com/cgi-bin/QC/DSL/dslam6100Int.pl?telephoneNum=' + address);
}

function addButtons() {
    var mydiv   = document.querySelector('div[data-bind="CurrentJob.addr"]');
    var address = mydiv.textContent + ", UT";
    var btn     = document.createElement("input");
    with (btn) {
        id    ='mapButton';
        type  ='button';
        value ='Get Map';
        addEventListener("click", googleMaps(address), true);
    }
    mydiv.appendChild(btn);

    mydiv   = document.querySelector('div[data-bind="CurrentJob.cktid"]');
    btn     = document.createElement("input");
    with (btn) {
        id    ='dslButton';
        type  ='button';
        value ='Poll Dslam';
        addEventListener("click", pollDSLAM(mydiv.textContent), true);
    }
    mydiv.appendChild(btn);
}

function setCookie(c_name, value, exdays) {
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
    document.cookie=c_name + "=" + c_value;
}

function getCookie(c_name) {
    var i,x,y,ARRcookies=document.cookie.split(";");

    for (i=0;i<ARRcookies.length;i++) {

        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");

        if (x==c_name) {
            return unescape(y);
        }
    }

    return null;
}

function finalResults() {
    var dc, current, loss, noise, pi, lb;

    dc      = getRandom(51, 49, 2);   
    current = getRandom(37, 29, 2);
    loss    = getRandom(7, 2, 2);
    noise   = getRandom(7, 1, 2);
    pi      = getRandom(67, 60, 2);
    lb      = getRandom(79, 70, 2);

    document.getElementById('finalTestInsightNo').click();

    document.getElementById("finalTestBeforeAcTg").value        = "0.00";
    document.getElementById("finalTestBeforeAcRg").value        = "0.00";
    document.getElementById("finalTestBeforeAcTr").value        = "0.00";
    document.getElementById("finalTestBeforeDcTr").value        = dc;
    document.getElementById("finalTestBeforeDcTg").value        = "0.00";
    document.getElementById("finalTestBeforeDcRg").value        = dc;
    document.getElementById("finalTestBeforeLoopCurrent").value = current;
    document.getElementById("finalTestAfterLoss").value         = loss;
    document.getElementById("finalTestAfterNoise").value        = noise;
    document.getElementById("finalTestAfterPi").value           = pi;
    document.getElementById("finalTestAfterLb").value           = lb;

    document.getElementById("finalTestAfterLb").focus();
    window.scrollTo(0, document.body.scrollHeight-250);

    // Store cookies to be used on cras page if needed
    setCookie("loss", loss, 1);
    setCookie("pi", pi, 1);
    setCookie("current", current, 1);
    setCookie("noise", noise, 1);
    setCookie("lb", lb, 1);
}

function crasResults() {
    document.getElementById("crasCircuitLoss").value    = getCookie("loss");
    document.getElementById("crasPowerInfluence").value = getCookie("pi");
    document.getElementById("crasLineCurrent").value    = getCookie("current");
    document.getElementById("crasCircuitNoise").value   = getCookie("noise");
    document.getElementById("crasBalance").value        = getCookie("lb");

    document.getElementById('crasFoundInF2').click();
}

function toneSlopeResults() {
    var dc = getRandom(51, 49, 2);   

    document.getElementById("ToneSlopeInsightNo").click();
    document.getElementById("ToneSlopeDmarcTaggedYes").click();
    document.getElementById("ToneSlopeClecDtPresentYes").click();

    document.getElementById("ToneSlopeBeforeDcTr").value    = dc;
    document.getElementById("ToneSlopeBeforeDcTg").value    = "0.00";
    document.getElementById("ToneSlopeBeforeDcRg").value    = dc;   
    document.getElementById("ToneSlopeRingbackTr").value    = getRandom(90,85,2);
    document.getElementById("ToneSlopeAfterResistTg").value = getRandom(998,20,0);
    document.getElementById("ToneSlopeAfterResistRg").value = getRandom(998,20,0);
    document.getElementById("ToneSlopeAfterResistTr").value = getRandom(998,20,0);

    document.getElementById("ToneSlopeAfter404").value      = "0.00";
    document.getElementById("ToneSlopeAfter1004").value     = getRandom(7, 3, 2);
    document.getElementById("ToneSlopeAfter2804").value     = "0.00";
    document.getElementById("ToneSlopeAfterNoise").value    = getRandom(7, 1, 2);
    document.getElementById("ToneSlopeAfterLb").value       = getRandom(79, 70, 2);
    document.getElementById("ToneSlopeCotName").value       = "NA";

    document.getElementById("ToneSlopeTn").focus();
}

function closingComments() {
    document.getElementById("flatRateJacks").value = "0";
    document.getElementById("rewiredJacks").value  = "0";

    document.getElementById("tripNo").click();
    document.getElementById("marketMass").click();
    document.getElementById("custTypeRes").click();
    document.getElementById("pairChangeNo").click();
    document.getElementById("tempDropNo").click();
    document.getElementById("goodCbrYes").click();

    document.getElementById("jobCloseComments").focus();
    window.scrollTo(0, 5000);
}

function getRandom(max, min, tenths) {
    var result = min + (Math.random() * (max - min + 1));
    return result.toFixed(tenths);
} 
```

另一方面，我必须刷新页面才能加载。如果必须，我会再发一篇文章，但我想知道如何检测此页面加载。这一切都在我们的安全网络上，您只需单击一个按钮即可到达这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:43:03.137

```
var btn=document.createElement("button");
btn.id='mapButton';
btn.value='Google Maps';
btn.addEventListener("click", googleMaps(address), false);
myDiv.appendChild(btn); 
```

但是请注意...我注意到您的标签有错误，这可能是您的问题。没有`<input>`与`type='button'`它应该是`<button id="mapButton" value="Google Maps">`

希望有帮助。

# java-me - 在J2ME中，如何获取表单所有控件的引用来记录表单控件状态的变化？

> ID：13981173
> 
> 赞同：1
> 
> 时间：2012-12-20T21:56:50.747
> 
> 标签：java-me, midp, lcdui

在我的 J2ME 应用程序中，我只想在用户更改任何控件的状态时显示一个警告对话框**，即当用户使用表单的任何控件**然后尝试取消表单而不保存键入的数据时。

例如，如果用户在 1-2 个文本字段中键入并尝试取消表单而不将键入的数据保存到数据库中，则在所有 5-6 个表单控件中。然后应显示一个警告框，并显示消息“保存更改？” 用`Yes, No`命令。

这个怎么做？

* * *

这是我的代码，它没有给出预期的结果：

```
import javax.microedition.lcdui.*;

import javax.microedition.midlet.*;
public class InformAboutStatechange extends MIDlet implements CommandListener
{
  Display d;
  Form frm;
  Command Save, Cancel, CancelAlrtYes, CancelAlrtNo, CancelAlrtBack;
  TextField Name, Age;
  Alert CancelAlrt;
  boolean StateChange = false;

  public InformAboutStatechange()
  {
    d = Display.getDisplay(this);
    frm = new Form("");
    Save = new Command("Save", Command.SCREEN, 1);
    Cancel = new Command("Cancel", Command.CANCEL, 2);
    Name = new TextField("Name", "", 10, 0);
    Age = new TextField("Age", "", 10, 0);
    frm.addCommand(Save);
    frm.addCommand(Cancel);
    frm.append(Name);
    frm.append(Age);
    frm.setCommandListener(this);
    d.setCurrent(frm);
  }
  public void startApp() 
  {
  }

  public void pauseApp() 
  {
  }

  public void destroyApp(boolean unconditional) 
  {
  }

  public void commandAction(Command c, Displayable dispable) 
  {
    if (c == Cancel) {
      CancelAlrt = new Alert("Application Alert","Save Changes???",null,null);
      CancelAlrtYes = new Command("Yes",Command.SCREEN, 1);
      CancelAlrtNo = new Command("No", Command.SCREEN | Command.CANCEL, 2);
      CancelAlrtBack = new Command("Back", Command.BACK, 3);
      CancelAlrt.addCommand(CancelAlrtYes);
      CancelAlrt.addCommand(CancelAlrtNo);
      CancelAlrt.addCommand(CancelAlrtBack);
      frm.setItemStateListener(new ItemStateListener() 
      {
        public void itemStateChanged(Item item) 
        {
          item.notifyStateChanged();
          if (item == Name) {
            if (item == Age) {
              StateChange = true;
            } else {
              StateChange = false;
            }
          }
        }
      });

      if (StateChange == true) {
        d.setCurrent(CancelAlrt);
        CancelAlrt.setCommandListener(new CommandListener() 
        {
            public void commandAction(Command cmd, Displayable dispable) 
            {
              if (cmd == CancelAlrtYes) {
                d.setCurrent(frm);
              } else if (cmd == CancelAlrtNo) {
                d.setCurrent(frm);
              } else if (cmd == CancelAlrtBack) {
                d.setCurrent(frm);
              }
            }
        });
      } else {
        destroyApp(true);
        notifyDestroyed();
      }
    }   
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T07:03:57.463

你的错误是调用`setItemStateListener`太晚了。

在您的代码片段中，侦听器在`commandAction`方法中设置，而该方法仅在用户按下命令按钮时才被调用。此时，开始“倾听”已经太晚了，您想要跟踪的所有更改都已经丢失。

出于您的目的，应在显示表单之前（即在调用之前`d.setCurrent`）设置项目状态侦听器，如下例所示：

```
 // ...
    frm.setCommandListener(this);
    // ---> set item state listener here
    frm.setItemStateListener(new ItemStateListener() 
    {
      public void itemStateChanged(Item item) 
      {
        item.notifyStateChanged();
        if (item == Name) {
          if (item == Age) {
            StateChange = true;
          } else {
            StateChange = false;
          }
        }
      }
    });
    d.setCurrent(frm);
    // ... 
```

* * *

我还将代码从`InformAboutStatechange`构造函数移动到`startApp`方法中，例如教程[MIDlet Life Cycle -> Execution States](http://www.oracle.com/technetwork/systems/lifecycle-138829.html#execution)中所述：

> 构造函数通常很少或不进行初始化...通常，您将使用 startApp() 来分配记录存储、网络连接、UI 组件等...

# jpa-2.0 - 如何在 JPA2 中检查集合大小

> ID：13981174
> 
> 赞同：7
> 
> 时间：2012-12-20T21:57:03.360
> 
> 标签：jpa-2.0, criteriaquery

考虑以下：

```
@Entity
public class Book 
{ 
    private List<String> authors;
    @ElementCollection
    public List<String> getAuthors() {
        return authors;
    }

    public void setAuthors(List<String> authors) {
        this.authors = authors;
    }
} 
```

如何输入一个 JPA2 CriteriaQuery 表达式，比如说，它可以让我找到所有超过 2 个作者的书籍？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-20T22:19:22.963

在 JPQL 中：

```
select b from Book where size(b.authors) >= 2 
```

使用条件 API（但为什么要用下面的混乱替换这样一个简单的静态查询？）：

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<Book> criteriaQuery = cb.createQuery(Book.class);
Root<Book> book = criteriaQuery.from(Book.class);
Predicate predicate = cb.ge(cb.size(book.get(Book_.authors)), 2);
criteriaQuery.where(predicate);
criteriaQuery.select(book); 
```

# php - 如何将带有管道的逗号分隔字符串转换为两个不同的数组？

> ID：13981176
> 
> 赞同：-2
> 
> 时间：2012-12-20T21:57:13.197
> 
> 标签：php, arrays

如何将带有管道的逗号分隔字符串转换为两个不同的数组？

```
$combo_string = 'blue|car, red|truck, green|boat, yellow|bike'; 
```

我需要的地方：

```
$colors_array = 

Array (
[0] => blue
[1] => red
[2] => green
[3] => yellow
) 
```

和

```
$vehicles_array = 

Array (
[0] => car
[1] => truck
[2] => boat
[3] => bike
) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T21:59:59.150

```
$combo_array = explode(', ', $combo_string);

$colors_array = $vehicles_array = array();
foreach ($combo_array as $piece) {
   list($color, $vehicle) = explode('|', $piece);
   $colors_array[] = $color;
   $vehicles_array[] = $vehicle;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:03:37.207

我没有测试以下内容，但它应该大致正确：

```
$combo_string = 'blue|car, red|truck, green|boat, yellow|bike';

$initial_array = explode(", " $combo_string);

$vehicles_array = array();
$colors_array = array();

foreach ($combo_string as $item)
{
  $seperate_colour = explode("|", $item);

  $colors_array[] = $seperate_colour[0];
  $vehicles_array[] = $seperate_colour[1];

} 
```

# android - 石头、纸、剪刀、蜥蜴、史波克安卓应用

> ID：13981183
> 
> 赞同：3
> 
> 时间：2012-12-20T21:57:30.313
> 
> 标签：android

我今天一直在开发这个应用程序，但我似乎无法弄清楚代码有什么问题。

当我检查时，没有语法错误。但是当我尝试运行它并调试它时，它说

`"Source not found" on "ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2106`

它让我可以选择另一条路径，但唯一可用的是默认设置。我编码错了吗？我能做些什么来解决这个问题？

这是日志：

```
12-20 22:12:29.722: I/System.out(1518): debugger has settled (1479) 
12-20 22:12:30.172: W/Trace(1518): Unexpected value from nativeGetEnabledTags: 0 
12-20 22:12:30.222: W/Trace(1518): Unexpected value from nativeGetEnabledTags: 0 
```

这是我的源文件：

```
package com.example.rockpaperscissorlizardspock;
import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.*;
import android.view.View.OnClickListener;

public class rockpaperscissorlizardspock extends Activity {
    /** Called when the activity is first created. */

    private TextView resultText;
    private Button play, reset;
    private ImageButton scissors, paper, rock, lizard, spock;
    private int paperimg, paper_pressedimg, scissorsimg, scissors_pressedimg,     rockimg, rock_pressedimg, lizardimg, lizard_pressedimg, spockimg, spock_pressedimg;
        private ImageView compSciss, compPaper, compRock, compLiz, compSpock;
    Random rand = new Random();
    int compChoice = 0;
    String pChoice ="";
    String cChoice = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Initialize();
    }

    /** initialize all of the components*/
     private void Initialize()
    {
        play = (Button) findViewById(R.id.button1);
        reset = (Button) findViewById(R.id.button2);
        resultText = (TextView) findViewById(R.id.resultText);
        lizard = (ImageButton) findViewById(R.id.imageButton4);
        spock = (ImageButton) findViewById(R.id.imageButton5);
        scissors = (ImageButton) findViewById(R.id.imageButton3);
        paper = (ImageButton) findViewById(R.id.imageButton2);
        rock = (ImageButton) findViewById(R.id.imageButton1);
        compSciss = (ImageView) findViewById(R.id.computerScissors);
        compPaper = (ImageView) findViewById(R.id.computerPaper);
        compRock = (ImageView) findViewById(R.id.computerRock);
        spockimg = R.raw.spock;
        spock_pressedimg = R.raw.spock_pressed;
        lizardimg = R.raw.lizard;
        lizard_pressedimg = R.raw.lizard_pressed;
        paperimg = R.raw.paper;
        paper_pressedimg = R.raw.paper_pressed;
        scissorsimg = R.raw.scissors;
        scissors_pressedimg = R.raw.scissors_pressed;
        rockimg = R.raw.rock1;
        rock_pressedimg = R.raw.rock1_pressed;

        /**set the button Listeners*/
        play.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                play();
            }
        });

        reset.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                paper.setImageResource(paperimg);

                 rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                lizard.setImageResource(lizardimg);
                spock.setImageResource(spockimg);
                compPaper.setImageResource(paperimg);
                compRock.setImageResource(rockimg);
                compSciss.setImageResource(scissorsimg);
                compLiz.setImageResource(lizardimg);
                compSpock.setImageResource    (spockimg);               
                pChoice = "";
                cChoice = "";
                play.setEnabled(false);
                reset.setEnabled(true);
                scissors.setEnabled(true);
                paper.setEnabled(true);
                rock.setEnabled(true);
                lizard.setEnabled(true);
                spock.setEnabled(true);
                resultText.setText("");
            }
        });

        /*
         * Declaring what happens when specific choices are made.
         */

        scissors.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){    
                     scissors.setImageResource(scissors_pressedimg);
                    paper.setImageResource(paperimg);
                    rock.setImageResource(rockimg);
                    spock.setImageResource(spockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "S";
                    play.setEnabled(true);
             }
         });

         paper.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                    paper.setImageResource(paper_pressedimg);
                    scissors.setImageResource(scissorsimg);
                    spock.setImageResource(spockimg);
                    rock.setImageResource(rockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "P";
                    play.setEnabled(true);
            }
         });

        rock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                rock.setImageResource(rock_pressedimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                spock.setImageResource(spockimg);
                lizard.setImageResource(lizardimg);
                pChoice = "R";
                play.setEnabled(true);
            }
        });

        lizard.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                 lizard.setImageResource(lizard_pressedimg);
                 spock.setImageResource(spockimg);
                 rock.setImageResource(rockimg);
                 scissors.setImageResource(scissorsimg);
                 paper.setImageResource(paperimg);
                 pChoice = "L";
                 play.setEnabled(true);
            }
         });

        spock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                spock.setImageResource(spock_pressedimg);
                lizard.setImageResource(lizardimg);
                rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                pChoice = "SP";
                play.setEnabled(true);
            }
        });

    }

    /**The method that chooses the computer's move and compares
     *  to the player's move.
     */
    public void play()
    {
        compChoice = rand.nextInt(5);

        if(compChoice == 0)
        {
            cChoice = "R";
            compRock.setImageResource(rock_pressedimg);
            }
        else if(compChoice == 1){
            cChoice = "P";
            compPaper.setImageResource(paper_pressedimg);
        }       
         else if(compChoice == 2)
        {
            cChoice = "S";
            compSciss.setImageResource(scissors_pressedimg);
            }
        else if(compChoice == 3)
           {
            cChoice = "L";
             compLiz.setImageResource(lizard_pressedimg);
            }
        else if(compChoice == 4)
       { 
       cChoice = "SP";
       compSpock.setImageResource(spock_pressedimg);
       }

    check();
}

/**
 * Compares the Computer's and the Player's moves.
 */
public void check()
{
    if(pChoice == "R") //Rock
    {
        if(cChoice == "R")
            resultText.setText("Draw");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");
    }

    else if(pChoice == "P") //Paper
    {
        if(cChoice == "R")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("Draw");

        else if(cChoice == "S")
            resultText.setText("You Lose");

        else if(cChoice == "SP")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Lose");

    }

    else if(pChoice == "S") //Scissors
    {
        if(cChoice == "R")
            resultText.setText("You Lose");

        else if(cChoice == "P")
            resultText.setText("You Win");

        else if(cChoice == "S")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");

    }

    else if(pChoice == "L") //Lizard
    {
      if(cChoice == "R")
        resultText.setText("You Lose");

      else if(cChoice == "L")
        resultText.setText("Draw");

      else if(cChoice == "SP")
        resultText.setText("You Win");

      else if(cChoice == "S")
        resultText.setText("You Lose");

      else if(cChoice == "P")
        resultText.setText("You Win");
    }

    else if(pChoice == "SP") //Spock
    {
        if(cChoice == "SP")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "R")
            resultText.setText("You Win");

    }

    gameOver();
}

/**
 * Runs at the end of each round. Disables all of the buttons
 * except for the reset button.
 */
public void gameOver()
{
    play.setEnabled(false);
    scissors.setEnabled(false);
    rock.setEnabled(false);
    paper.setEnabled(false);
    spock.setEnabled(false);
    lizard.setEnabled(false);
    reset.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:07:41.210

你试图单步进入`ActivityThread`课堂。该类的源代码在 SDK 中不可用。所以简而言之，没有错。

# java - 如何将派生类传递给接受父类型的函数

> ID：13981190
> 
> 赞同：5
> 
> 时间：2012-12-20T21:58:14.460
> 
> 标签：java, android

我有一个 Sport 基类，它有几个变量。我还有一些从 Sport 派生的不同类，例如 Volleyball、Soccer 等，它们具有额外的方法和变量。它们看起来有点像这样。

```
public class Sport {
    public String commonVar;
    public Sport(String c) {
        this.commonVar = c;
    }
} 
```

然后是排球：

```
public class Volleyball extends Sport {
    public String onlyVolleyball;
    public Volleyball(String c, String thisVar) {
        super(c);
        this.onlyVolleyball = thisVar;
    }
} 
```

现在我想将 Sport 的派生类传递到其他地方的函数中，但是制作参数

```
public otherFunction(int one, int two, Sport sport) { } 
```

仅将运动视为运动对象（它将接受派生类，但我无法访问运动不常见的任何变量和方法）。我的问题是如何创建一个能够发送所有类型的运动衍生品而不会丢失任何数据的函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:03:25.790

你不能，但你可以检查对象是否真的是扩展类的成员，然后强制转换并使用它，如下所示：

```
public otherFunction(int one, int two, Sport sport)
{
    if(sport instanceof Volleyball)
    {
        Volleyball volley = (Volleyball) sport;
        //Do Volleyball things
    }
    else
    {
        //Only do sport things.
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T22:01:30.283

你不应该。如果该函数要与抽象 Sport 一起使用，那么它所需的所有信息都应该在 Sport 中可用。否则，您应该真正为每个功能（或策略/处理程序或类似）。

您正在打破面向对象原则中的开放封闭原则（SOLID 中的 O）。

`instanceof`不过，您可以通过检查然后强制转换来做到这一点：

```
if (sport instanceof Volleyball) {
  Volleyball v = (Volleyball)sport;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:57:57.430

基本上，您的问题的解决方案取决于您真正想要实现的目标。

同时，考虑到您的帖子，我认为您正在尝试混合不同的职责，它们是：

1.  处理 Sport 实例。
2.  处理 Sport 实例的衍生物。

这可能意味着您的方法根本不需要 Sport 实例。它真正需要的是参与特定的运动。如我错了请纠正我。

因此，最简单的解决方案是声明 otherFunction，如下所示：

```
public otherFunction(int one, int two, VolleyBall sport)
public otherFunction(int one, int two, Soccer sport)
public otherFunction(int one, int two, BasketBall sport)
public otherFunction(int one, int two, AnyOtherAwsomeSport sport) 
```

通过这种方式，您可以清楚地告诉您的功能正在处理什么样的运动，而且您的界面非常清晰，易于理解和维护。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:00:54.810

答案是，你不能。您需要向基类添加成员，可能是抽象方法，例如 getTypeOfSport()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T22:18:47.250

您正在处理“表达问题”；很难解决。您可以做的一件事是：

```
public interface SportFunction {
    void doChessFunction(Chess sport);
    void doVolleyballFunction(Volleyball sport);
}

public abstract class Sport {
    public String commonVar;
    public Sport(String c) {
        this.commonVar = c;
    }
    public abstract void doSportFunction(SportFunction function);
}

public class Volleyball extends Sport {
    public String onlyVolleyball;
    public Volleyball(String c, String thisVar) {
        super(c);
        this.onlyVolleyball = thisVar;
    }

    public void doSportFunction(SportFunction function) {
        function.doVolleyballFunction(this);
    }
}

public class Chess extends Sport {
    public int onlyChess;
    public Chess(String c, int thisVar) {
        super(c);
        this.onlyChess = thisVar;
    }

    public void doSportFunction(SportFunction function) {
        function.doChessFunction(this);
    }
} 
```

然后使用这样的类：

```
public void otherFunction(int one, int two, Sport sport) {
   sport.doSportFunction(new OtherSportFunction(one, two));
}

public class OtherSportFunction implements SportFunction {
   public OtherSportFunction(int one, int two) { /* do stuff */ }
   public void doChessFunction(Chess sport) { /* do chess stuff */ }
   public void doVolleyballFunction(Volleyball sport) { /* do volleyball stuff */ }
} 
```

# javascript - 使用 Kinetic JS 在 PDF 文件上添加图层

> ID：13981191
> 
> 赞同：2
> 
> 时间：2012-12-20T21:58:31.810
> 
> 标签：javascript, pdf, html5-canvas, layer, kineticjs

我想使用 Kinetic JS 在 pdf 文件（PDF JS）上添加一个图层。主要目的是在 PDF 文件上添加注释注释。

我的问题是 pdf 文件的画布对于每个文档都有不同的尺寸。

因此，我怎样才能让 Kinetic JS 的容器与 PDF Canvas 的尺寸相匹配？

如果我更一般地说，我如何让 KineticJS 容器适应可变尺寸的 HTML5 Canvas？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:03:07.840

容器可以随时动态调整大小：

```
 stage.setWidth(... get PDF width ...);
  stage.setHeight(... get PDF height ...); 
```

# c# - 使用 C# 以编程方式创建 Excel 数据透视表并将字段添加到行标签时没有数据显示

> ID：13981193
> 
> 赞同：0
> 
> 时间：2012-12-20T21:58:36.313
> 
> 标签：c#, pivot-table, excel-interop

我正在尝试以编程方式构建基于数据库表的 excel 数据透视表。我能够构建一个电子表格，并且所有数据库表列都可以作为字段使用。但是将字段添加到“行标签”框中不会显示任何数据。

如果我查看列过滤器，那里有正确的值，并且如果我在“值”框中添加一个字段，电子表格会使用正确的数据更新。所以我知道它连接到数据库并可以获取数据。

我可以手动构建一个数据透视表并将字段添加到行标签框中工作正常，我正在尝试在代码中做同样的事情。关于为什么我看不到任何数据的任何想法？

这是我正在使用的代码：

```
 var excelApp = new Application();
        excelApp.CellDragAndDrop = false;
        excelApp.DisplayAlerts = true;
        Workbook workBook = excelApp.Workbooks.Add(Type.Missing);

        Worksheet worksheet = workBook.Worksheets.Add();
        worksheet.Name = "Test";

        PivotCache pivotCache = workBook.PivotCaches().Add(XlPivotTableSourceType.xlExternal, Type.Missing);

        pivotCache.Connection = myConnectionString;
        pivotCache.MaintainConnection = true;
        pivotCache.CommandText = "SomeTable";
        pivotCache.CommandType = XlCmdType.xlCmdTable;

        PivotTables pivotTables = worksheet.PivotTables();
        PivotTable pivotTable = pivotTables.Add(pivotCache, excelApp.ActiveCell, "TestingPivot", true, Type.Missing);

        excelApp.Visible = true; 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:24:29.827

我想我得到了它的工作。代替

```
PivotCache pivotCache = workBook.PivotCaches().Add(XlPivotTableSourceType.xlExternal, Type.Missing); 
```

用这个：

```
PivotCache pivotCache = workBook.PivotCaches().Create(XlPivotTableSourceType.xlExternal, Type.Missing, Type.Missing); 
```

这为我解决了我的问题。

# c++ - 如何在 c++ 中将 std::sort() 用于 long long 向量？

> ID：13981194
> 
> 赞同：0
> 
> 时间：2012-12-20T21:58:40.240
> 
> 标签：c++, sorting, vector

我有一个 long long 类型的向量并希望按升序对其进行排序，但我认为我误解了 std::sort() 的用法。

```
#include <vector>
#include <algorithm>
#include <functional>

...

std::vector<long long> numbers (4);
numbers[0] = 6;
numbers[1] = 4;
numbers[2] = 3;
numbers[3] = 7; 
```

我曾尝试使用：

```
std::sort(numbers.begin(), numbers.end(), std::greater<long long>()); 
```

但我收到一个错误，上面写着

```
std::vector<long long int>’ is not derived from ‘const std::basic_string<_CharT, _Traits, _Alloc>’ 
```

另外，理想情况下，我只想在两个元素之间对向量进行排序，例如在 numbers[1] 和 numbers[2] 之间；但是对前两个参数使用这些值似乎不起作用。

谢谢。

编辑：另外，我正在使用 g++ 编译器

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T22:00:02.147

排序已经按升序排序，所以您只需要

```
std::sort(numbers.begin(), numbers.end()); 
```

您发布的代码将按**降序**排序，并且可以按原样工作，但您必须`#include <functional>`：

```
#include <functional> // for std::greater, std::less
#include <algorithm>
#include <vector>

....
std::sort(numbers.begin(), numbers.end(), std::greater<long long>()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:05:12.010

你现在所拥有的已经是正确的。（假设它正确表达了您的意图。您需要*升序*还是*降序*排序？）。

您收到的错误消息可能是由于您忘记包含某些头文件引起的。只是碰巧算法的某些重要部分（`std::greater`？）的实现仅被部分包括在内，对于`std::string`，但不包括一般情况。

确保包含`<vector>`,`<algorithm>`和`<functional>`，后者是缺少标题的最有可能的候选者。你包括了`<functional>`吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:09:45.257

默认情况下，`std::sort`会将它们按升序排列。

如果您希望它们下降，请在容器上向后迭代：

```
std::sort(numbers.rbegin(), numbers.rend()); 
```

# smartgwt - DetailViewerField 工具提示

> ID：13981200
> 
> 赞同：0
> 
> 时间：2012-12-20T21:59:14.027
> 
> 标签：smartgwt

我想使用 DetailViewerField 上的工具提示。我尝试在我的数据源上使用 DataSourceField.setPrompt() 方法，它适用于 ForItem，但我无法在详细查看器字段上设置工具提示。是否可以在详细查看器字段上设置工具提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:44:02.947

我为此寻找解决方案，但找不到简单的方法。我能找到的唯一解决方法如下所述：

[http://forums.smartclient.com/showthread.php?t=8130&page=2](http://forums.smartclient.com/showthread.php?t=8130&page=2)

# android - CHOICE_MODE_MULTIPLE 和 CHOICE_MODE_MULTIPLE_MODAL 的区别？

> ID：13981205
> 
> 赞同：43
> 
> 时间：2012-12-20T21:59:22.677
> 
> 标签：android, listview

可能是一个非常基本的问题，但是在和之间设置`ListViews`选择模式有什么区别？Android文档并没有真正解释太多..`CHOICE_MODE_MULTIPLE``CHOICE_MODE_MULTIPLE_MODAL`

来自 Android 开发网站：

*   `CHOICE_MODE_MULTIPLE`：列表允许多项选择

*   `CHOICE_MODE_MULTIPLE_MODAL`：列表允许在模态选择模式下进行多项选择

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-20T22:04:45.923

那么文档实际上说明了主要区别。

```
CHOICE_MODE_MULTIPLE: The list allows multiple choices

CHOICE_MODE_MULTIPLE_MODAL: The list allows multiple choices in a modal selection mode 
```

**模态**意味着用户在继续之前必须与窗口交互。非模态的，他们没有。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-20T22:02:21.383

如果我没记错的话，`CHOICE_MODE_MULTIPLE_MODAL`它是在后来的 API（11？）中添加的，主要用于使用`Contextual ActionBar (CAB)`.

# ruby-on-rails - Rails 中是否有任何方法可以将分钟作为整数转换为天、月等

> ID：13981206
> 
> 赞同：3
> 
> 时间：2012-12-20T21:59:32.793
> 
> 标签：ruby-on-rails, ruby

我有一个以分钟为单位的值列表，我想轻松地将其转换为最接近的匹配项，如下所示

```
10 => 10 minutes
1440 => 1 day
86400 => 2 months
525600 => 1 year 
```

在 Rails 中是否有任何简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:05:34.700

试试[`distance_of_time_in_words`](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)。它直接对两个`Time`对象进行操作，计算差异，但你总是可以这样做：

```
include ActionView::Helpers::DateHelper

def minutes_in_words(minutes)
  distance_of_time_in_words(Time.at(0), Time.at(minutes * 60))
end

minutes_in_words(10)
=> "10 minutes"
minutes_in_words(1440)
=> "1 day"
minutes_in_words(86400)
=> "2 months"
minutes_in_words(525600)
=> "about 1 year" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:05:48.950

我可能会使用`time_ago_in_words`一些数学来获得正确的操作日期......

[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words)

```
time_ago_in_words(3.minutes.from_now)       # => 3 minutes
time_ago_in_words(Time.now - 15.hours)      # => about 15 hours
time_ago_in_words(Time.now)                 # => less than a minute 
```

它不是（故意）精确的，但它已经存在了。否则，使用一些除法/模数数学很容易自己动手......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:06:01.210

不要认为 RoR 有这个，但这很容易

```
def to_days(minutes)
  minutes / (60*24)
end

def to_months(minutes)
  minutes / (60*24*30)
end

def to_years(minutes)
  minutes / (60*24*365)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:14:26.680

看看下面的链接，我想它有你需要的。查看函数 distance_of_time_in_words。

[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)

# iframe - 有没有办法隐藏标准的 Facebook 聊天栏（无需离线）？

> ID：13981207
> 
> 赞同：0
> 
> 时间：2012-12-20T21:59:32.503
> 
> 标签：iframe, hide, minimize, facebook-chat

我们正在构建一个 Facebook 应用程序，它基本上是一个画布上的 Web 集成聊天客户端。

但是，每次在应用程序中输入或接收消息时，都会在标准 Facebook 聊天栏上弹出相应的聊天窗口或通知。

有没有办法隐藏聊天栏或至少最小化聊天窗口？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:20:15.047

不，据我了解，在 Facebook.com 中没有实用的关闭或最小化聊天的 API

# javascript - javascript / jquery - 从服务器获取数据并显示它

> ID：13981208
> 
> 赞同：-1
> 
> 时间：2012-12-20T21:59:44.620
> 
> 标签：javascript, jquery, ajax

假设我们在计算机上的某个目录中有我们的 javascript 文件，
在同一个目录中，我们有名为“server”的文件夹，
在同一个“server”文件夹中，我们有 3 个文本文件。

很简单。现在我们想
用 jQuery 在我们的站点中显示所有这 3 个文本文件（在“服务器”文件夹中）。

可能吗 ？我可以使用 jQuery 从服务器文件夹中获取这些文件并像这样在我的站点中显示它们吗？

```
textfile1.txt
textfile2.txt
textfile3.txt 
```

我认为它可以用 AJAX 完成，对吗？
如果可能的话，我该怎么做？

编辑：我不想显示文件的内容，我什至可能不知道这些文件的名称。
我想在“服务器”文件夹中循环并获取我网站中显示的所有文件名。
够简单吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:03:05.883

你不想使用 jQuery 的[`load()`](http://api.jquery.com/load/)

例子。对于这个 HTML：

```
<div id="content">
</div> 
```

你会有这个脚本：

```
$('#content').load('remotepath/textfile1.txt'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:30:48.167

> 编辑：我不想显示文件的内容，我什至可能不知道这些文件的名称。我想在“服务器”文件夹中循环并获取我网站中显示的所有文件名。够简单吗？

不，仅使用 AJAX 是不可能的。您需要一个返回文件列表的服务器脚本。例如，您可以使用 PHP 的 opendir()+readdir() 或 glob() 函数将所有文件读入一个数组，然后执行 exit(json_encode($files)); 在最后。

然后，您可以在 AJAX 请求之后使用 jQuerys $.parseJSON() 轻松读取该结果并循环显示文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:06:53.690

如果您使用的是 jquery，则可以使用[load()](http://api.jquery.com/load/)函数。

如果您使用的是直接 javascript，那么您使用 AJAX 并创建一个[XMLHttpRequest](http://www.w3schools.com/ajax/ajax_xmlhttprequest_create.asp)

这两种方法都非常易于使用。只需阅读文档，您就会没事的。

# twitter - Twitter Card Preview 使用 twitter:image 失败

> ID：13981210
> 
> 赞同：1
> 
> 时间：2012-12-20T21:59:46.477
> 
> 标签：twitter, meta-tags, twitter-card

我正在尝试将[Twitter 卡片](https://dev.twitter.com/docs/cards/preview)添加到我的网站，以便引用我的博客文章的推文可以扩展并显示额外信息。

当我包含一个`twitter:image`标签时，Twitter Card 会失败，但是当我删除它时，它工作得很好。我究竟做错了什么？

```
<meta property="twitter:url" content="http://liberalgeek.com/content/why-do-atheists-celebrate-christmas" />
<meta property="twitter:card" content="summary" />
<meta property="twitter:description" content="I can&#039;t speak for all atheists, I can only speak for myself, so please leave a comment below and explain why you celebrate Christmas! When I hear someone ask, &quot;Why do atheists celebrate Christmas?&quot; my first thought often is: Better Question: Why do Christians celebrate Christmas?" />
<meta property="twitter:creator" content="@kennywyland" />
<meta property="twitter:title" content="Why do Atheists celebrate Christmas?" />

<!-- the following line causes the problem -->
<meta property="twitter:image" content="http://liberalgeek.com/sites/default/files/styles/large/public/Christmas%20Tree.jpg" /> 
```

该图像是公开可见的，它足够大而不会太大......有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T11:28:11.003

更改 robots.txt 以允许机器人访问您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T06:17:29.983

尝试这个

```
<meta name="twitter:image:src" content="http://liberalgeek.com/sites/default/files/styles/large/public/Christmas%20Tree.jpg" /> 
```

[https://dev.twitter.com/docs/cards/validation/validator](https://dev.twitter.com/docs/cards/validation/validator)

# opengl - VBO - 没有索引的索引

> ID：13981217
> 
> 赞同：1
> 
> 时间：2012-12-20T22:00:12.050
> 
> 标签：opengl, indexing, vbo

我正在尝试将 VBO 与元素数组缓冲区一起用于我的三角形，如下所示：

```
 glBindBuffer(GL_ARRAY_BUFFER, g_Buffer[0]);    
 glVertexPointer(3, GL_FLOAT, 0, BUFFER_OFFSET(0));
 glNormalPointer(GL_FLOAT, 0, BUFFER_OFFSET(Model->GetNbVertex()*3*sizeof(float)));

 glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, g_Buffer[1]);
 glDrawElements(GL_TRIANGLES, Model->GetNbTriangle()*3, GL_UNSIGNED_INT, BUFFER_OFFSET(0)); 
```

但我想使用一些纹理坐标，但我的 TextCoord**不愿意**“索引”

一个三角形有 3 个文本坐标。我有 N 个顶点和 M 个三角形，所以我有 3M 文本坐标，而**不是**3N 文本坐标。所以我不能使用 glTexCoordPointer 因为他期望一个顶点只有一个文本坐标，这不是我的情况。

我想保持我的顶点索引不会爆炸我的 GPU 内存。

有一种方法可以将三角形索引用于顶点等元素，而不是其他元素，比如我的文本坐标？（我正在使用 GLSL）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:08:35.407

> 所以我不能使用 glTexCoordPointer 因为他期望一个顶点只有一个文本坐标......

...*每个纹理单元*。再激活两个 TU 并`glTexCoordPointer()`分别调用：

```
glVertexPointer( ... );
glNormalPointer( ... );

glActiveTexture( GL_TEXTURE0 + 0 );
glClientActiveTexture( GL_TEXTURE0 + 0 );
glBindTexture( ..., texture1 );
glTexCoordPointer( ..., FIRST_OFFSET );

glActiveTexture( GL_TEXTURE0 + 1 );
glClientActiveTexture( GL_TEXTURE0 + 1 );
glBindTexture( ..., texture2 );
glTexCoordPointer( ..., SECOND_OFFSET );

glActiveTexture( GL_TEXTURE0 + 2 );
glClientActiveTexture( GL_TEXTURE0 + 2 );
glBindTexture( ..., texture3 );
glTexCoordPointer( ..., THIRD_OFFSET );

glDrawElements( ... ); 
```

**编辑**：虽然为了最大的灵活性和前向兼容性，只需对顶点位置和三个纹理坐标都使用通用顶点属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:13:03.510

让我为您澄清以下内容

> 一个三角形有 3 个文本坐标。我有 N 个顶点和 M 个三角形，所以我有 3M 文本坐标，而不是 3N 文本坐标。

一个三角形有 3*个顶点*。顶点是由几个属性组成的向量；*顶点只是位置是一个常见的误解！*顶点实际上是它所包含的所有属性的整体组合。如果两个顶点只有一个属性不同，那么它们就是不同的顶点。

在您的情况下，属性是

*   位置
*   纹理坐标

所以当你说你有 M 个三角形时，这意味着你有 3N 个顶点——除了一些三角形共享顶点的极端情况，这意味着它们共享所有属性。

或者换句话说：你的纹理坐标总是和你的顶点一样多，因为纹理坐标是顶点的一部分。

### 更新

一些网格格式将顶点属性分成独立索引的属性列表，如位置、法线、纹理坐标。通常这些列表会从人脸索引。如果要绘制这种网格数据结构的内容，首先必须将其扩展为单个索引的顶点列表。这样做的常用方法是遍历网格的所有面，并使用索引元组作为新替换索引列表的键。然后对于遇到的每个键，从各种属性列表中将属性收集到由替换索引索引的单个顶点中。

# git - 收到一条令人困惑的 git 错误消息

> ID：13981222
> 
> 赞同：1
> 
> 时间：2012-12-20T22:00:26.203
> 
> 标签：git, github

收到以下消息，这在网上似乎并不常见：

```
fatal: unknown style 'diff' given for 'merge.conflictstyle' 
```

我查找了 merge.conflictstyle 和 diff 的样式，diff3 似乎是合适的。我不确定我可以/应该在哪里更改它，但它不允许我推送任何更改，因为分支在后面，因为由于上面的消息我无法拉取:(。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:04:58.063

尝试运行

```
$ git config merge.conflictstyle diff3 
```

看看这是否有效。

问题是您的配置选项不正确。该命令会将其更改为正确的值，`diff3`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-13T07:27:06.363

运行这两个命令：

```
git config --global push.default upstream

git config --global merge.conflictstyle diff3 
```

然后尝试再次合并，它现在可以工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:11:49.973

根据[`git config`手册页](http://git-scm.com/docs/git-config)，`diff`这不是可接受的样式。 `merge`并且`diff3`是它唯一能识别的。 `merge`是默认值......所以也许，正如 mipadi 提到`diff3`的，是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-01T13:18:47.987

这个 git 命令应该可以解决这个问题：

```
git config merge.conflictstyle merge 
```

# objective-c - NSSlider 弹出框

> ID：13981226
> 
> 赞同：1
> 
> 时间：2012-12-20T22:00:46.747
> 
> 标签：objective-c, macos, cocoa, nswindow, nsslider

我有一个习惯`NSSlider`。

由于空间不足，我只想在用户将鼠标悬停在滑块上时才显示它的值。就像这个： [http ://dribbble.com/shots/754412-Range-Selection](http://dribbble.com/shots/754412-Range-Selection)

我知道悬停部分是如何工作的，使用`NSTrackingArea`. 我的问题是，我如何正确地制作这样的弹出框？

我有这个问题已经有一段时间了。我想您会使用相同的技术在窗口外的屏幕上为单个小元素设置动画。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:33:01.360

使用`NSWindow`. 使其无边界且不透明，以便您可以通过背景图像定义其形状。[转换坐标](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-SW56)，以便您可以相对于滑块定位“弹出”窗口。使其成为包含滑块的窗口的[子](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-SW37)窗口，这样窗口菜单、Exposé/任务控制等就不会发生奇怪的事情。

# .net - 使用多线程两个线程返回相同的值和不同的输入？

> ID：13981227
> 
> 赞同：0
> 
> 时间：2012-12-20T22:00:46.010
> 
> 标签：.net, multithreading

您好，我不熟悉多线程并试图将其合并到我的程序中，以便让特定的计算更快地收敛。但是当我像下面这样创建两个线程时

```
 Thread firstThread = new Thread(() => { p0 = f(changePoint, result); });
        Thread secondThread = new Thread(() => { p1 = f(changePoint + 1, result); });
        firstThread.Start();
        secondThread.Start();
        firstThread.Join();
        secondThread.Join(); 
```

p0 和 p1 中的值相同（p0 与 p1 具有相同的值）。现在，如果我取消多线程并像这样调用它们：

```
 p0 = f(changePoint, result);
        p1 = f(changePoint + 1, result); 
```

返回不同的值，一切正常。

我错过了什么？

f(x,y) 的代码

```
public double f(double x,double result)
    {

        double temp = PCAcont.Future2Yrs(x).Last().FirstOrDefault().StatNetWorthToAssets.GetValueOrDefault();
        return temp - result;

    } 
```

主要方法

```
public double SecantMethod(double prec, int stepsCutoff, double changePoint, double result)
    {
        double p2, p1 = 0, p0 = 0;
        int i;

        Thread firstThread = new Thread(() => { p0 = f(changePoint, result); });
        Thread secondThread = new Thread(() => { p1 = f(changePoint + 1, result); });
        firstThread.Start();
        secondThread.Start();
        firstThread.Join();
        secondThread.Join();

        //p0 = f(changePoint, result);
        //p1 = f(changePoint + 1, result);
        p2 = p1 - f(p1, result) * (p1 - p0) / (f(p1, result) - f(p0, result));

        for (i = 0; System.Math.Abs(p2 - p1) > prec && i < stepsCutoff; i++)
        {
            p0 = p1;
            p1 = p2;
            p2 = p1 - f(p1, result) * (p1 - p0) / (f(p1, result) - f(p0,result));
        }
        if (i < stepsCutoff)
            return p2;
        else
        {
            System.Diagnostics.Debug.WriteLine("{0}.The method did not converge", p2);
            return double.NaN;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T17:32:24.717

根据你的评论，只取第二个。

看这个

PCAcont.Future2Yrs(x).Last().FirstOrDefault().StatNetWorthToAssets.GetValueOrDefault();

PCAcont 未锁定，您将获得第二个 X 的结果。
您需要锁定。
并锁定过去的回报，因为 linq 可能被推迟。

# jquery - 如何将此 jquery 代码附加到文档的末尾？

> ID：13981228
> 
> 赞同：0
> 
> 时间：2012-12-20T22:00:47.177
> 
> 标签：jquery, append

我需要将以下 jquery 附加到文档的底部。就在结束`</body>`和`</html>`标签之前。我该怎么做？

```
$(function(){
    $("#AttachmentFile").change(function(){
        $("#ufo-field-id-948").val($(this).val())
        var string = $("#ufo-field-id-948").val();
        var new_string = string.replace('C:\\fakepath\\', '');
        $("#ufo-field-id-948").val(new_string); 
    });
}); 
```

这是它需要添加到的代码，然后附加到第一个附加下方

```
 _createInput: function(){

        var self = this;

        var input = document.createElement("input");

        input.setAttribute('type', 'file');

        input.setAttribute('name', this._settings.name);

        input.setAttribute('id', 'AttachmentFile');
        if(this._settings.multiple) input.setAttribute('multiple', 'multiple');

        addStyles(input, {

            'position' : 'absolute',

            'right' : 0,

            'margin' : 0,

            'padding' : 0,

            'fontSize' : '480px',

            'fontFamily' : 'sans-serif',

            'cursor' : 'pointer'

        });

        var div = document.createElement("div");

        addStyles(div, {

            'display' : 'block',

            'position' : 'absolute',

            'overflow' : 'hidden',

            'margin' : 0,

            'padding' : 0,

            'opacity' : 0,

            'direction' : 'ltr',

            'zIndex': 2147483583

        });

        if ( div.style.opacity !== "0") {

            if (typeof(div.filters) == 'undefined'){

                throw new Error('Opacity not supported by the browser');

            }

            div.style.filter = "alpha(opacity=0)";

        }

        addEvent(input, 'change', function(){

            if ( ! input || input.value === ''){

                return;

            }

            var file = fileFromPath(input.value);

            if (false === self._settings.onChange.call(self, file, getExt(file))){

                self._clearInput();

                return;

            }

            if (self._settings.autoSubmit) {

                self.submit();

            }

        });

        addEvent(input, 'mouseover', function(){

            addClass(self._button, self._settings.hoverClass);

        });

        addEvent(input, 'mouseout', function(){

            removeClass(self._button, self._settings.hoverClass);

            removeClass(self._button, self._settings.focusClass);

            if (input.parentNode) {

                input.parentNode.style.visibility = 'hidden';

            }

        });

        addEvent(input, 'focus', function(){

            addClass(self._button, self._settings.focusClass);

        });

        addEvent(input, 'blur', function(){

            removeClass(self._button, self._settings.focusClass);

        });

    div.appendChild(input);

        document.body.appendChild(div);

        this._input = input;

    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:04:02.840

你必须用脚本标签包围它。然后把它放在你需要的地方。

```
<script type="text/javascript">
    $(function(){
        $("#AttachmentFile").change(function(){
            $("#ufo-field-id-948").val($(this).val())
            var string = $("#ufo-field-id-948").val();
            var new_string = string.replace('C:\\fakepath\\', '');
            $("#ufo-field-id-948").val(new_string); 
        });
    });
</script> 
```

# php - 验证表单并提交而不刷新

> ID：13981232
> 
> 赞同：3
> 
> 时间：2012-12-20T22:01:00.213
> 
> 标签：php, jquery, forms, jquery-validate

我有一个需要验证的表单，我还需要在不刷新页面的情况下提交它。我能够获得一个表单来验证和提交，但页面刷新了。然后我能够获得一个无需提交的表单，但我无法进行验证。

我在这里查看了大量的教程和帖子，我觉得这是正确的整体格式......我只是确定我错过了一些东西。

任何帮助将不胜感激！

这是我的脚本：

```
$(document).ready(function(){
            $("#addstudent").validate({
                debug: false,
                rules: {
                    studentid: "required",
                    teacher: "required",
                    assignment: "required",
                    date: "required",
                },
                messages: {
                    studentid: "Please enter the student's ID number.",
                    teacher: "Please enter your name.",
                    assignment: "Please select a tutoring assignment.",
                    date: "Please select a day.",
                },                 
                submitHandler: function(form) {

          $.ajax({
              url: 'add.php',
              type: 'POST',
              data: $("form.addstudent").serialize(),         
              success: function() {
            $("#studentid").val(""), $('#studentid').focus(), $('#results').load('addresults.php', function(){
                });

              }
          });

          return false;
       }
    });
    }); 
```

这是我的表单的代码：

```
<form name="addstudent" id="addstudent" action="" method="post">

    <fieldset><legend>Add student to tutoring list</legend>
    <div><label for="studentid">ID number</label><input type="text" name="studentid" id="studentid"></div>

    <div><label for="day">Date</label><select name="date" id="date">
    <option value="">Please select a day</option>
    <option value="mon">Monday <? echo $monday; ?></option>
    <option value="tue">Tuesday <? echo $tuesday; ?></option>
    <option value="wed">Wednesday <? echo $wednesday; ?></option>
    <option value="thu">Thursday <? echo $thursday; ?></option>
    <option value="fri">Friday <? echo $friday; ?></option>
    </select></div>

    <div><label for="assignment">Tutoring assignment</label><select name="assignment" id="assignment">
    <option value="">Please select an assignment</option>
    <option value="att">Activity Time</option>
    <option value="acc">ACC</option>
    <option value="tech">ACC Tech </option>
    <option value="ast">After School</option>
    </select></div>

    <div><label for="teacher">Assigning teacher</label><input type="text" name="teacher" id="teacher"></div>

    <input type="submit" name="submit" value="submit">
    </fieldset>
    </form> 
```

**编辑**：第一次编辑（现已删除）极大地改变了问题。对造成的任何挫折表示歉意。下面选择的答案本身就解决了这种形式的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:16:41.407

你和 混在一起`class`了`id`。你的表格是：

```
<form name="addstudent" id="addstudent" action="" method="post"> 
```

但是您通过以下方式定位它`class`：

```
data: $("form.addstudent").serialize(), 
```

什么时候应该针对`id`：

```
data: $("form#addstudent").serialize(), 
```

或更简洁地说：

```
data: $("#addstudent").serialize(), 
```

[工作演示：](http://jsfiddle.net/5UqRm/2/)

[http://jsfiddle.net/5UqRm/2/](http://jsfiddle.net/5UqRm/2/)

请注意，没有什么是令人耳目一新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:10:26.677

像以前一样设置表单规则和验证，但不包括 submitHandler。我并不是说它有什么问题，但这是我知道如何做你想做的事情的方法：

```
$("form.addstudent").submit(HandleSubmit);
    function HandleSubmit(e) {
    e.preventDefault();
    $.ajax({
        url: 'add.php',
        type: 'POST',
        data: $("form.addstudent").serialize(),
        success: function () {
            $("#studentid").val(""), $('#studentid').focus(), $('#results').load('addresults.php', function () {
            });

        }
    });
} 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/56DQv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:22:28.203

我试过你的代码，它工作正常，只有一个修改：

`data: $("#addstudent").serialize()`

不管你有没有，都`return false`没有关系。

我不知道你想在你的 submitHandler 的 ajax 成功处理程序中实现什么：

```
`$('#results').load('addresults.php', function(){});` 
```

为什么不回显 add.php 的一些输出并通过添加`.done(function(data){}`到您的`$.ajax({})`?

...您的示例不包含该`#results`元素，所以这可能导致您的刷新？例如，如果你有`<body id="results">`:-) !!

# javascript - 草坪椅查询插件 - 未捕获的参考错误

> ID：13981236
> 
> 赞同：1
> 
> 时间：2012-12-20T22:01:16.767
> 
> 标签：javascript, lawnchair

我刚刚开始使用 Lawnchair 的查询插件，我似乎无法让查询语法与 where() 子句中的参数化参数一起使用。

```
var store = new Lawnchair('store', function() {
});

store.nuke();

// save some data
store.batch([{a:"abc"},{a:2},{a:2},{a:"def"},{a:4}], function() {

});

// query (works)
store.where("record.a === 2", function(results) {
    alert('got ' + results.length + ' results');
});

// query (works)
store.where("record.a === 'abc'", function(results) {
    alert('got ' + results.length + ' results');
});

// Uncaught ReferenceError: abc is not defined
store.where("record.a === ?", 'abc', function(results) {
    alert('got ' + results.length + ' results');
});

// Works but does not return any results
store.where("record.a === ?", "'abc'", function(results) {
    alert('got ' + results.length + ' results');
}); 
```

[jsFiddle](http://jsfiddle.net/Hx79D/1/)

我相信我是按照[Lawnchair 单元测试来做](http://brian.io/lawnchair/tests/test/plugin/query.html)的。

# c# - 如何在 C# 中结束中断线程

> ID：13981239
> 
> 赞同：3
> 
> 时间：2012-12-20T22:01:18.803
> 
> 标签：c#, multithreading, netduino

我正在使用 Netduino 板，但在结束 NativeEventHandler(button) 时遇到问题。问题是主线程卡在 join() 函数上。我不明白为什么子线程在运行后没有被释放。

```
public class Program
{
    private static Thread mainThread;
    private static Thread childThread;     

    private static InterruptPort button = new InterruptPort(Pins.GPIO_PIN_D1, true, Port.ResistorMode.PullUp, Port.InterruptMode.InterruptEdgeLevelHigh);

    private static OutputPort led = new OutputPort(Pins.ONBOARD_LED, false);

    public static void Main()
    {            
        mainThread = Thread.CurrentThread;
        Thread.Sleep(1000);
        while (true)
        {
            Thread.Sleep(100);
            button.OnInterrupt += new NativeEventHandler(ButtonEvent);
            mainThread.Suspend();
            childThread.Join();//It stuck here.
            Thread.Sleep(100);
            button.EnableInterrupt();
            button.ClearInterrupt();  
        }
    }

    private static void ButtonEvent(uint port, uint state, DateTime time)
    {
        childThread = Thread.CurrentThread;
        button.DisableInterrupt();          
        mainThread.Resume();
       // Thread.CurrentThread.Abort(); this .Abort() seems doesn't terminate the thread either.
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T23:43:32.827

首先，当您订阅一个事件时，您会一直保持订阅状态，直到您取消订阅。所以你只需要订阅一次。

我相信你可以像这样做netduino......

```
public class Program
{
    private static InterruptPort button = new InterruptPort(Pins.GPIO_PIN_D1, true, Port.ResistorMode.PullUp, Port.InterruptMode.InterruptEdgeLevelHigh);

    private static OutputPort led = new OutputPort(Pins.ONBOARD_LED, false);

    public static void Main()
    {            
        button.OnInterrupt += new NativeEventHandler(ButtonEvent);
        Thread.Sleep(Timeout.Infinite);
    }

    private static void ButtonEvent(uint port, uint state, DateTime time)
    {
        ... do whatever here ...
    }
} 
```

所以基本上，无论你想在按下按钮时发生什么，都可以在 ButtonEvent 中执行

我认为你不需要做任何其他事情。

这：

```
Thread.Sleep(Timeout.Infinite); 
```

只是用来保持程序运行。

所以在......在这里做任何事情......你可以闪烁你的LED或任何你想做的事情。

# xcode - 双击格式化文本，如何影响选择行为？

> ID：13981246
> 
> 赞同：1
> 
> 时间：2012-12-20T22:01:46.050
> 
> 标签：xcode, macos, syntax

使用 XCode，我想修改双击某些格式化文本时选择的内容。

假设我有一个纯文本文件，其中包含一系列行，例如

```
seed:seedTest1
name:name1;method:1;
name:name2;method:1;type:4

seed:seedTest2
... 
```

`name1`例如，当我双击时，整个`name:name1`被选中。我只想`name1`选择。是否可以定义双击的行为方式，应考虑哪些边界？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:27:59.200

这也让我发疯了，试试这个，

系统偏好设置->语言和文本->文本->将“分词”更改为“英语（美国，计算机）”

# jquery - Jquery 使用 each 迭代器

> ID：13981251
> 
> 赞同：3
> 
> 时间：2012-12-20T22:02:02.410
> 
> 标签：jquery, html

我正在使用 append 将数据附加到表中。我希望能够删除我一一追加的每一行。但是它现在的工作方式是删除所有孩子。我究竟做错了什么？

[http://jsfiddle.net/HjFPR/44/](http://jsfiddle.net/HjFPR/44/)

```
<table class="" width="300" border="0" cellpadding="0" cellspacing="0">

<tr><th>Date</th><th>Pokemanz</th><th align="right" style="text-align:right;">Value</th></tr>

<tr><td style="width:62px;"><input type="text" 
class="transactions_date" size="15" value="4/5/12"/>
</td><td><input type="text" class="transaction_title" size="30" 
value="Pickachu"/></td><td align="right">
<input type="text" class="transactions_amount" size="10" value="$25"/></td></tr>

</table>
<div class="new_transaction"></div>
<input type="button"  value ="Add Transaction"  id="add_trans"/> 
<input type="button"  value ="Delete Transaction" id="delete_trans" /> 
```

​</p>

```
(function() {

    $('#add_trans').on('click',function () {

        $('.new_transaction').append('<tr><td style="width:62px;"><input type="text" class="transactions_date" size="15" value=""/></td><td> <input type="text" class="transaction_title" size="30" value=""/></td><td align="right"><input type="text" class="transactions_amount" size="10" value=""/></td></tr>');

    });

    $('#delete_trans').on('click',function () {

    $('.new_transaction').children().each(function () {
    $(this).remove(); // "this" is the current element in the loop
});

    });

})(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:04:21.477

您可以在 jQuery中使用[last() ：](http://api.jquery.com/last/)

```
$('#delete_trans').on('click',function () {
    $('.new_transaction tr').last().remove();
}); 
```

[http://jsfiddle.net/HjFPR/49/](http://jsfiddle.net/HjFPR/49/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:06:08.207

要删除最后一行，您需要使用 jQuery [last](http://api.jquery.com/last/)选择器。而且，鉴于此，您不需要 each 语句，因此执行起来更加简单：

```
(function() {
    $('#add_trans').on('click',function () {
        $('.new_transaction').append('<tr><td style="width:62px;"><input type="text" class="transactions_date" size="15" value=""/></td><td> <input type="text" class="transaction_title" size="30" value=""/></td><td align="right"><input type="text" class="transactions_amount" size="10" value=""/></td></tr>');
    });

    $('#delete_trans').on('click',function () {
        $('.new_transaction tr').last().remove();
    });
})(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:06:10.383

## 描述

有几种方法可以删除最后一个孩子。

您可以使用`:last-child`选择器或`last()`方法

## 样品

### :last-child 样本

```
$('#delete_trans').on('click',function () {
    $('.new_transaction').children(":last-child").remove();
}); 
```

### [jsFiddle](http://jsfiddle.net/HjFPR/46/)

### 最后一个（）样本

```
$('#delete_trans').on('click',function () {
    $('.new_transaction').children().last().remove();
}); 
```

### [jsFiddle](http://jsfiddle.net/HjFPR/47/)

# javascript - 为什么在向服务器提交对象数据时需要调用 JSON.stringify？

> ID：13981255
> 
> 赞同：1
> 
> 时间：2012-12-20T22:02:12.900
> 
> 标签：javascript, jquery, asp.net-web-api

我正在使用 Knockout.js 和 ASP.NET Web ApiController 完成一个新项目。我看到的许多示例在将数据发布到服务器之前执行了一些手动 JSON 序列化。此外，请求内容类型同样经常设置为“application/json”。

我想知道为什么这是必要的。我假设有一些我还没有遇到过的东西，这使得这要么是必需的，要么至少是可取的。

目前，使用这些 jQuery ajax 选项向服务器发送我想要的任何数据都没有问题：

```
 cache: false,
        traditional: true,
        type: 'POST', 
```

这是 POST 并绑定到 ApiController 操作方法的示例 JS 对象和相应的服务器端 C# 模型对象。

```
//JS object
var requestDataObject = {
    accountId: vm.accountId,
    range: [1, "a'b\"c", 3],
    start: new Date(2012, 12, 12)
};

//C# model object
public class RequestData
{
    public int AccountId { get; set; }
    public string[] Range { get; set; }
    public DateTime Start { get; set; }
}

//Action method signature
[HttpPost]
public HttpResponseMessage GetAccountUsage(RequestData requestData){
    ... 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T23:24:17.727

从历史上看，GET（以及随后的 POST）只能发送键值对，并且键应该是唯一的。

当 PHP 出现时，它定义了“如果一个键包含方括号，让我们构建一个数组”。这使程序员能够调用他们的复选框`name="chkbox[]"`，让表单正常提交，并`$_POST['chkbox']`作为数组读取。其他一些服务器语言定义，“如果在查询字符串中重复一个键，让我们构建一个数组”。

如果`names[]=1`要支持密钥，为什么不`names[a][b][c]=1`呢？服务器知道他们应该做什么：分配`names = {a:{b:{c:"1"}}}`。

这使程序员能够对对象进行编码以查询字符串，但需要注意以下几点：

*   每个值都是一个字符串
*   数组和带有数字键的对象之间没有区别。PHP 不在乎，但有些服务器可能会。
*   没有办法对空对象或数组进行编码。对于传统形式，这会导致空数组丢失。PHP 确实在乎。JQuery 通过发送一个空字符串来解决这个问题。
*   这是非常低效的，因为必须为每个值重复路径：`checkboxes[]=ch1&checkboxes[]=ch2&...`vs.`checkboxes=["ch1","ch2",...]`
*   您必须知道目标平台，因为 PHP 不喜欢（或求助于从喜欢的服务器上`traditional`读取）`postVars.get("names[]")`
*   一些服务器根本不理解这种编码。

使用 JSON，

*   您可以对数字、字符串`null`、...进行编码
*   ...数组，对象...
*   空数组和对象很容易表示。您不必仅仅因为它可能是空的就测试每个数组和对象是否存在。
*   没有钥匙是重复的，所以你不需要让你的钥匙很短
*   如何用自动键表示数组是没有混淆的；无论发送到何处，JSON 都会对相同的结构进行编码。
*   可以用任何语言解析 JSON。许多语言都内置了 JSON 支持，[其余的可以获取库](http://json.org/)。
*   您只需要在服务器和客户端上多写一行。

简而言之，如果您只需要对键值对进行编码，那么这就是普通的 GET 或 POST 擅长的。如果您需要对数组进行编码，JSON 绝对值得考虑。如果您需要更复杂的东西，JSON 是使用某些服务器的唯一方法。

# android - SupportMapFragment 在方向更改时重新创建

> ID：13981259
> 
> 赞同：6
> 
> 时间：2012-12-20T22:02:23.410
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在创建一个简单的应用程序，该应用程序在选项卡中使用谷歌地图，而在其他应用程序中使用其他内容。问题是当我改变方向时地图被重新创建所以我去 latlng 0,0

这是我的代码

### MainAcitivy.java

```
private static final String MAP_FRAGMENT_TAG = "map";
private static final String DUMMY_FRAGMENT_TAG = "DUMMY";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up the action bar to show tabs.
    final ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
    //
    // // For each of the sections in the app, add a tab to the action bar.
    actionBar.addTab(actionBar
        .newTab()
            .setText(R.string.title_section1)
                .setTabListener(
                    new TabListener<SupportMapFragment>(this,
                        MAP_FRAGMENT_TAG, SupportMapFragment.class)));
    actionBar
        .addTab(actionBar
            .newTab()
                .setText(R.string.title_section2)
                    .setTabListener(
                        new TabListener<DummySectionFragment>(this,
                            DUMMY_FRAGMENT_TAG,
                                DummySectionFragment.class)));

} 
```

### TabListener.java

```
public class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final SherlockFragmentActivity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    public TabListener(SherlockFragmentActivity activity, String tag,
    Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        if (mFragment == null) {
            mFragment = mActivity.getSupportFragmentManager()
                .findFragmentByTag(mTag);
        }
        if (mFragment == null) {
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

![面向刚果附近的人像](../Images/75dd0965ce39de964b72d97b07ea066d.png)

![在 latlng(0,0) 处面向景观](../Images/221229c78ef061c4239c868177cfb381.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T12:00:44.133

采用

```
setRetainInstance(true); 
```

在 MapFragment 的 onCreate 方法中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-09T09:53:27.643

我面临同样的问题，这个问题甚至它的答案都帮助了我。

但正是我遇到了问题：

*   谷歌地图（问题：清除/刷新）
*   ProgressDialog 与 AsyncTask 一起运行（问题：崩溃）
*   对话框（问题：取消）

因此，为了解决所有这些问题，我在每个活动中添加了以下代码。

```
<activity
            android:name="ACTIVITY"
            android:configChanges="keyboardHidden|orientation|screenSize"
            android:launchMode="standard"
            android:theme="@android:style/Theme.NoTitleBar"
            android:windowSoftInputMode="stateHidden|adjustPan" /> 
```

它对我有用，所以虽然它也会帮助其他人，因为这是一个常见问题。

# html - 使 div 拉伸到内容的高度，而不是页面的高度

> ID：13981263
> 
> 赞同：0
> 
> 时间：2012-12-20T22:02:47.737
> 
> 标签：html, css

我有一个高度为 100% 的 div：

```
height: 100%; 
```

另外我添加了一个绝对位置：

```
position: absolute; 
```

当我添加绝对位置属性时，div 会拉伸到页面的高度，而不是像以前一样在其中的内容的高度。我怎样才能使 div 延伸到内容的高度，而不是页面的高度？

如果有帮助的话，这里是完整的代码：

```
.blah {
    height: 100%;
    width: 200px;
    position: absolute; 
    border-radius: 15px 15px 15px 15px; 
    -moz-border-radius: 15px 15px 15px 15px; 
    -webkit-border-radius: 15px 15px 15px 15px; 
    border: 0px solid .800000;
    padding: 0.5em;
    background-color: #ffffff;
    -webkit-box-shadow:  1px 1px 1px 1px rgba(0, 0, 0, 0.3);
    box-shadow:  1px 1px 1px 1px rgba(0, 0, 0, 0.3);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:07:46.437

只是不要使用`height:100%`，高度会自动调整到内容。

您描述的行为源于这样一个事实，即父元素（根据该元素确定 100%）在`body`您分配后成为元素`position:absolute;`（假设您没有定位该 DIV 的其他父元素）。

# c# - 如何覆盖非虚方法？

> ID：13981266
> 
> 赞同：1
> 
> 时间：2012-12-20T22:02:56.803
> 
> 标签：c#, inheritance, overriding, virtual

我有带有虚拟方法的基类。我有子类，它覆盖了这个方法。然后我有孩子的孩子，但我怎么能覆盖同样的方法呢？如果我尝试将“虚拟”添加到第二类，我会收到消息：“无法将覆盖方法标记为虚拟”。如果我尝试将“覆盖”添加到第三类，我会收到消息：“这不是覆盖的合适方法”。

如何解决这个问题？

我可以从第一类继承第三类，但实际上我想从第二类继承一些方法。

```
public virtual T Save (T entity)
        {
            //removed code

            return entity;
        }

public override T Save(T entity)
        {
            //removed code

            return entity;
        }

 public T Save(T entity)
        {
            return entity;
        } 
```

![在此处输入图像描述](../Images/ed2c415a8b342de96f21e8e4c52a2b60.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:04:00.283

只需覆盖它（在“孩子的孩子”中）。覆盖方法是隐式虚拟的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:06:04.253

所有[`overridden methods`](http://msdn.microsoft.com/en-us/library/aa645768%28v=vs.71%29.aspx)都是隐含的虚拟。覆盖他们！！！！

# javascript - 在主干视图中删除间隔

> ID：13981268
> 
> 赞同：0
> 
> 时间：2012-12-20T22:03:03.973
> 
> 标签：javascript, backbone.js

我正在做一个非常小的时钟来练习 Backbone，但我无法停止它。我试图通过返回当前间隔的 id 来停止它，但它不起作用。我做错了什么？

```
 var app = {
    lap: Backbone.Model.extend({
     defaults: {
       time: 0
     }
    }),
    views: {
      home: Backbone.View.extend({
        el: $('#the-clock'),
        tagName: 'div',
        events: {
          "click #save-lap" : "stopWatch"
      },
      render: function(){
         var time = this.theWatch(),
             tpl = '<button id="save-lap"></button><span id="clock">Son las <%= time %></span>';

         $(this.el).html( _.template(tpl,time));
      },
        theWatch: function(){
          var currentTime = new Date(),
              currentHour = currentTime.getHours(),
              currentMinutes = currentTime.getMinutes(),
              currentSeconds = currentTime.getSeconds(),
              timeOfDay = (currentHour < 12) ? "AM":"PM";

          return data = {
              time: currentHour + ':' + currentMinutes + ':' + currentSeconds + ' ' + timeOfDay
          }
      },
      updateWatch: function(){
          return setInterval(
              function(){
                  this.render();
              }.bind(this),
              1000
          )
      },
      stopWatch: function(){
          console.log('stop')
          var clock = this.updateWatch();
          clearInterval(clock);
      },
      initialize: function(){
          this.render();
          this.updateWatch();
      }
  })
},
ini: function(){
  var Home = new this.views.home();
}
};

 (function(){
    app.ini();
  })(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:05:38.180

通过调用 this.updateWatch()，您每次想要停止时都会创建一个新的时间间隔！试试这个：

```
updateWatch: function(){
    return setInterval(
        function(){
            this.render();
        }.bind(this),
        1000
    )
},
stopWatch: function(){
    clearInterval(this.clockInterval);
},
initialize: function(){
    this.render();
    this.clockInterval = this.updateWatch();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:07:39.997

每次调用 updateWatch 时，您都在重新创建“间隔”对象。

相反，您需要将 setInterval 的结果存储在属性中；并在您想停止它时重新使用它。

# cocos2d-iphone - 以 CCParticleSystemQuad 作为子节点旋转 CCSprite

> ID：13981274
> 
> 赞同：0
> 
> 时间：2012-12-20T22:03:42.997
> 
> 标签：cocos2d-iphone, rotation, ccsprite, ccparticlesystem

我有一个`CCSprite`可以在 iPhone 屏幕上弹跳的。这个精灵有一个`CCParticleSystemQuad`作为子节点。粒子只是小而简单的圆圈，在移动的精灵后面跟随。一切正常，直到精灵由于与屏幕边缘碰撞而旋转。当这种情况发生时，现有的粒子会突然被绘制在一个奇怪的位置。

**知道为什么会这样吗？**

到目前为止，我已经尝试了几件事。首先，我尝试`positionType`了粒子系统的所有三个值。这些都没有解决旋转问题。实际的旋转是用 a 完成的`CCRotateTo`。删除此操作可修复粒子位置问题。所以也许在 a 上旋转一个`CCSprite`子节点`CCLayer`可以代替我当前的`CCSprite`. 我尝试通过[http://www.cocos2d-iphone.org/forum/topic/63951](http://www.cocos2d-iphone.org/forum/topic/63951)阅读，但这有点超出我的想象。非常感谢任何反馈和建议！

**编辑#1**我找到了一个快速解决方法：在`CCRotateTo`我告诉尾随粒子到`resetSystem`. 但是我仍然想了解奇怪的绘图行为的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:15:02.857

I think this is happening because of the CCParticleSystem being a child of the CCSprite, then any position or rotation that you do on the sprite will affect the behavior of all the particles that are being and have already been emitted. So if you have some trailing particles that are still lingering on screen, they are still children of the CCSprite, and rotating it will cause all of the lingering particles to rotate around the sprite's current position.

If you want to eliminate this effect, you could add the CCParticleSystem to the layer, so that it will be unaffected by the CCSprite's rotation. The downside to this approach is that you will have to add code to have the CCParticleSystem track the position of the CCSprite since it is no longer a child of the CCSprite. That should be pretty easy to do however.

# c# - 将 NULL 值分配给 SqlParameter 的最佳方法

> ID：13981281
> 
> 赞同：19
> 
> 时间：2012-12-20T22:04:32.600
> 
> 标签：c#, null, sqlparameter

我在 C# 类方法中使用了许多可选输入参数。由于在不使用参数时可选语法会创建一个值“0”，因此我在该方法中调用的 SQL 插入命令最终会以这种方式插入。但是，当不使用参数时，我需要插入 NULL 值而不是 0 的命令。在不使用大量“if”语句的情况下完成此任务的最佳方法是什么？

下面是我所指的代码。是否有某种语法/命令允许我在 SqlParameter 声明中指定 NULL 值？

```
public int batchInsert
(
    int id, 
    int outcome, 
    int input = 0, 
    int add = 0, 
    int update = 0,
    int delete = 0,
    int errors = 0, 
    int warnings = 0
)
{
    string sts;
    if (outcome == 0)
    {
        sts = "S";
    }
    else if (outcome == 1)
    {
        sts = "W";
    }
    else
    {
        sts = "E";
    }

    SqlConnection sqlConn = new SqlConnection(this.connString);
    SqlParameter runId = new SqlParameter("@runId", id);
    SqlParameter endTime = new SqlParameter("@endTime", DateTime.Now);
    SqlParameter status = new SqlParameter("@status", sts);
    SqlParameter sqlInput = new SqlParameter("@itemsRead", input);
    SqlParameter sqlAdd = new SqlParameter("@add", add);
    SqlParameter sqlUpdate = new SqlParameter("@update", update);
    SqlParameter sqlDelete = new SqlParameter("@delete", delete);
    SqlParameter sqlError = new SqlParameter("@errors", errors);
    SqlParameter sqlWarning = new SqlParameter("@warnings", warnings);
    SqlParameter result = new SqlParameter("@outcome", results[outcome]);
    SqlCommand sqlComm = new SqlCommand(insertCommand(), sqlConn); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-20T22:05:35.813

是的，对于参数的值，只需使用`DBNull.Value`. 例如：

```
SqlParameter sqlError = 
    new SqlParameter("@errors", errors == 0 ? (object)DBNull.Value : errors); 
```

或者写一个小帮手：

```
private object ValueOrDBNullIfZero(int val) {
   if ( val == 0 ) return DBNull.Value;
   return val;
} 
```

然后：

```
SqlParameter sqlError = 
    new SqlParameter("@errors", ValueOrDBNullIfZero(errors)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:12:27.210

您需要检查每个参数值并使用`DBNull.Value`send null。我们有一个扩展方法关闭`object`，使这更容易一些。

```
public static class ObjectExtensions
{
    public static object OptionalParam<T>(this T value, T optionalValue = default(T))
    {
        return Equals(value,optionalValue) ? (object)DBNull.Value : value;
    }
} 
```

用法：

```
var sqlInput = new SqlParameter("@itemsRead", input.OptionalParam()); 
```

或者，如果您想考虑一个非默认的任意值作为默认值：

```
var sqlInput = new SqlParameter("@itemsRead", input.OptionalParam(-1)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-27T06:25:52.507

这是将 Null 值分配给 sql 参数的最简单方法

```
 command.Parameters.AddWithValue("@Comment", string.IsNullOrEmpty(comment) ? (object)DBNull.Value : comment); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T22:12:31.850

考虑使用可用的[Nullable(T)](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)结构。它只会让你设置值，如果你有它们，你的 SQL Command 对象将识别可以为空的值并相应地进行处理，而不会有任何麻烦。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-19T11:55:36.517

使用小型辅助类，我们可以创建扩展方法以将 DBNull.Value 添加到 sqlparameter

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Data;
using System.Data.Common;

namespace System.Data.SqlClient
{
    public static class ExtensionMethods 

    {

        public static SqlParameter AddParameter(this SqlParameterCollection parms, SqlParameter param)
        {
            if (param.Value == null)
            {
                param.Value = DBNull.Value;
                return parms.Add(param);
            }
            else
            {
                return parms.Add(param);        
            }

        }
} 
```

用法

```
SqlParameter _FraudPackageID = new SqlParameter("@FraudPackageID", System.Data.SqlDbType.BigInt);
 _FraudPackageID.Value = FraudPackageID;
 _FraudPackageID.Direction = System.Data.ParameterDirection.Input;

_cmd.Parameters.AddParameter(_FraudPackageID); 
```

如果您将 null 作为值分配或传递给 sqlparameter，此扩展方法将自动将其转换为 DBNull 并重新分配给 sqlparameter。

所以不必担心我们动态传递的值是什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-31T09:13:54.767

简短的语法！

```
 cmd.Parameters.Add(new SqlParameter{SqlValue=username ?? (object)DBNull.Value,ParameterName="usuario" }  ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-06T15:35:59.597

必要时设置空日期时间参数的另一种清晰方法

```
if(obj.myDate == DateTime.MinValue)
{
    aCommand.Parameters.Add("dateParameter", SqlDbType.Date).Value = DBNull.Value;
}
else
{
    aCommand.Parameters.Add("dateParameter", SqlDbType.Date).Value = obj.myDate ;
} 
```

# cakephp-2.0 - 在单个查询中从多个表中检索 Cakephp 数据

> ID：13981282
> 
> 赞同：0
> 
> 时间：2012-12-20T22:04:37.503
> 
> 标签：cakephp-2.0, data-retrieval

我有以下mysql表：

```
CREATE TABLE Articles (
   ArticleID SMALLINT NOT NULL PRIMARY KEY,
   ArticleTitle VARCHAR(60) NOT NULL,
   Copyright YEAR NOT NULL
)
ENGINE=INNODB;

INSERT INTO Articles VALUES (12786, 'How write a paper', 1934),
                            (13331, 'Publish a paper', 1919),
                            (14356, 'Sell a paper', 1966),
                            (15729, 'Buy a paper', 1932),
                            (16284, 'Conferences', 1996),
                            (17695, 'Journal', 1980),
                            (19264, 'Information', 1992),
                            (19354, 'AI', 1993);

CREATE TABLE Authors (
   AuthID SMALLINT NOT NULL PRIMARY KEY,
   AuthorFirstName VARCHAR(20),
   AuthorMiddleName VARCHAR(20),
   AuthorLastName VARCHAR(20)
)
ENGINE=INNODB;

INSERT INTO Authors VALUES (1006, 'Henry', 'S.', 'Thompson'),
                           (1007, 'Jason', 'Carol', 'Oak'),
                           (1008, 'James', NULL, 'Elk'),
                           (1009, 'Tom', 'M', 'Ride'),
                           (1010, 'Jack', 'K', 'Ken'),
                           (1011, 'Mary', 'G.', 'Lee'),
                           (1012, 'Annie', NULL, 'Peng'),
                           (1013, 'Alan', NULL, 'Wang'),
                           (1014, 'Nelson', NULL, 'Yin');

CREATE TABLE AuthorArticle (
   AuthID SMALLINT NOT NULL,
   ArticleID SMALLINT NOT NULL,
   PRIMARY KEY (AuthID, ArticleID),
   FOREIGN KEY (AuthID) REFERENCES Authors (AuthID),
   FOREIGN KEY (ArticleID) REFERENCES Articles (ArticleID)
)
ENGINE=INNODB;

INSERT INTO AuthorArticle VALUES (1006, 14356), 
                              (1008, 15729), 
                              (1009, 12786), 
                              (1010, 17695),
                              (1011, 15729), 
                              (1012, 19264), 
                              (1012, 19354), 
                              (1014, 16284); 
```

现在我想运行一个查询来从所有三个表中获取数据。我的查询如下：

```
SELECT ArticleTitle, Copyright, CONCAT_WS(' ', AuthorFirstName, AuthorMiddleName, AuthorLastName) AS Author
FROM Articles AS b STRAIGHT_JOIN AuthorArticle AS ab STRAIGHT_JOIN Authors AS a
WHERE b.ArticleID=ab.ArticleID AND ab.AuthID=a.AuthID AND Copyright<1980
ORDER BY ArticleTitle; 
```

所以我的问题是这将如何在 CakePHP 2+ 中完成。任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T05:13:01.073

我能够回答我自己的问题，但在某种程度上，即加入多个表但无法加入“STRAIGHT_JOIN”。所以我的解决方案如下：

```
$art = $this->Article->find('all', array('joins' => array(
    array(
        'table' => 'authorarticle',
        'alias' => 'AuthArt',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('AuthArt.ArticleID = Article.ArticleID')
    ),
    array(
        'table' => 'authors',
        'alias' => 'Author',
        'type' => 'inner',
        'foreignKey' => false,
        'conditions'=> array('AuthArt.AuthID = Author.AuthID')
        )
    ), 'fields'=>array('Article.ArticleTitle','CONCAT_WS(" ", Author.AuthorFirstName, Author.AuthorMiddleName, Author.AuthorLastName) As AuthorName','Article.Copyright'), 'conditions' => array('Article.Copyright' => 1980)));
$this->set('articles', $art); // debug($articles) in the view to get results 
```

希望它会帮助其他人寻找相同的。如果我自己对自己的问题的解决方案很好，或者可以进一步优化它以获得 CAKEPHP 方式的最佳结果，我想听听社区的意见。谢谢

# ruby-on-rails - 使用heroku的本地文件系统进行rails服务器到服务器的图像传输

> ID：13981285
> 
> 赞同：0
> 
> 时间：2012-12-20T22:04:58.357
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我正在创建一个网络服务来从用户指定的外部站点获取一堆图像并将它们存储在 S3 上。

该应用程序托管在 heroku 上。

heroku 应用程序的流程：
1\. 调用 www.example.com/image.jpg 并在本地保存文件
2\. 将图像处理成不同大小
3\. 将图像上传到 S3

我担心 heroku 的[临时文件系统](https://devcenter.heroku.com/articles/dynos)。我只是将它用作 /tmp 存储，但我担心它会遇到限制。如果用户从他们的本地机器上传，那么我可以直接上传到 S3，但由于它来自另一台服务器，我看不到方法。

**有没有人在尝试处理大量文件时遇到 heroku 的临时本地文件系统问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:13:51.863

使用 PaperClip，您可以选择为您的图像提供 remote_url。您仍然可以直接上传到 S3 并避免使用 Heroku 文件系统的风险。

# java - 从 Mule 中的 vm 队列发布到 REST 端点

> ID：13981286
> 
> 赞同：0
> 
> 时间：2012-12-20T22:04:59.667
> 
> 标签：java, rest, jakarta-ee, esb, mule

我有一个 mule 流，它接受一个 xml 并将其发布到一个 vm 队列名称作为 mule 中的“mailQueue”。xml 输入和 mule 流程如下：

```
<Mail>
  <Name>JonHender</Name>
  <Age>16</Age>
</Mail> 
```

* * *

骡子配置.xml：

```
 <!-- This is the persistent VM connector -->
           <vm:connector name="mailQueueConnector" queueTimeout="1000">
                 <vm:queue-profile>
                <file-queue-store />
                 </vm:queue-profile>
           </vm:connector>

            <flow name="MailService">
                <https:inbound-endpoint address="https://localhost:71234/message/email"
                    method="POST"
                    exchange-pattern="request-response"
                    contentType="application/xml"/>

                <vm:outbound-endpoint path="mailQueue" connector-ref="mailQueueConnector">
                    <message-property-filter pattern="http.status=200" />
                    <logger message="INTO mailQueue" level="INFO"/>
                </vm:outbound-endpoint>

            </flow> 
```

现在，我必须阅读这个“mailQueue”并将其发布到 REST 端点（https://localhost:71234/messages/sendemail）。我尝试在同一流程中添加它，但没有奏效

```
<inbound>
    <vm:inbound-endpoint address="vm://emailBufferQueue" exchange-pattern="one-way" connector-ref="emailQueueConnector" />
</inbound>
<outbound>
    <https:outbound-endpoint address="https://localhost:71234/messages/sendemail"
</outbound> 
```

如何从 vm 队列中读取并将其发布到 REST 端点？我可以在我写入队列的同一流程中执行此操作，还是应该创建一个新流程？有人可以向我展示从 the 读取并将其发送到 Rest 端点的流程吗？

提前谢谢大家，圣诞快乐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:49:27.823

在另一个`mailQueue`流程中使用：

```
<flow name="MailSender">
    <vm:inbound-endpoint path="mailQueue"
                         exchange-pattern="one-way"
                         connector-ref="mailQueueConnector" />
    <https:outbound-endpoint
           address="https://#[message.inboundProperties.username]:#[message.inboundProperties.password]@localhost:71234/messages/sendemail" />
</flow> 
```

# java - 将旧的 Eclipse/RAD 项目转换为使用 Maven 构建 - .classpath 的问题

> ID：13981289
> 
> 赞同：0
> 
> 时间：2012-12-20T22:05:21.113
> 
> 标签：java, maven, build

我在 RAD 7.5 中有一个旧项目，它被构建为 JAR，用作其他项目中的库。我正在尝试将其转换为使用 Maven 构建（将大多数项目迁移到 Maven 的更大努力的一部分）并且我被困在类路径上。pom.xml 看起来很像他的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <name>My Framework Jar</name>
    <groupId>com.mycompany</groupId>
    <artifactId>MyFramework</artifactId>
    <version>1.0.1</version>
    <packaging>jar</packaging>
    <build>
            <!-- can't change the directory structure to how Maven likes it so specify the source directory -->
        <sourceDirectory>src/com/mycompany</sourceDirectory>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-jar-plugin</artifactId>
                <groupId>org.apache.maven.plugins</groupId>
                <version>2.1</version>
                <configuration>

                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <!-- This will add project version into manifest file-->
                            <addDefaultImplementationEntries>true</addDefaultImplementationEntries>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
        </plugins>
        <finalName>MyFramework</finalName>
    </build>
</project> 
```

问题是，当我尝试生成 jar 时，我会收到大量“找不到符号”错误，这些错误引用了该项目所依赖的 jar 文件中的类名。已经有一个 .classpath 文件似乎是 RAD 用于构建项目的文件 - 有没有办法让 Maven 读取这个文件，以便它知道需要哪些 jars？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:29:11.823

由于 Maven 管理您机器上存储库中的依赖项并使用它们来编译和运行您的项目，这些库不再直接在您的项目中。因此，您可能必须更改 .classpath 以指向您的存储库 (~/.m2)。当我使用 Maven 时，Eclipse 有一个不错的插件，允许您将项目转换为 Maven 项目。这个插件允许在 pom.xml 中管理类路径。

# c# - 更改语音识别引擎库的语言

> ID：13981294
> 
> 赞同：5
> 
> 时间：2012-12-20T22:05:37.203
> 
> 标签：c#, speech-recognition, speech

我正在开发一个程序（在 C# 中）来识别来自用户的语音命令并在 PC 中执行，即用户说“开始菜单”并且 PC 打开开始菜单。

我找到了一个很酷的库：用于语音识别的[SpeechRecognitionEngine](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.aspx)，问题是我也需要识别西班牙语，有没有办法改变语言？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T22:16:56.310

您可以使用[SpeechRecognitionEngine(CultureInfo)](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.aspx)重载。

```
var speechRec = new SpeechRecognitionEngine(new CultureInfo("es-ES"))); 
```

这假设用户安装了西班牙文化，否则`ArgumentException`将抛出 an 。该类`SpeechRecognitionEngine`实现`IDisposable`了 ，因此最好在完成后调用它，或者在语句`speechRec.Dispose()`中使用它。`using`

# sql - 选择前 n 行

> ID：13981308
> 
> 赞同：5
> 
> 时间：2012-12-20T22:06:26.047
> 
> 标签：sql, sql-server

我有一个看起来与此类似的 SQL 结果集，并按 STYLE 排序：

```
STYLE     |     CUSTOMER     |     SIZE     |      COLOUR      |
-----------------------------------------------------------------
A               DWTG               S               BLUE
B               DWTG               S               RED
C               DWTG               S               GREEN
C               DWTG               M               GREEN
D               DWTG               S               ORANGE
D               DWTG               M               ORANGE
D               DWTG               L               ORANGE 
```

现在，我需要拆分此结果集并获取前 1000 行。没问题，我可以用`TOP 1000`。

我的问题是，对于上面的示例，如果我想说前 3 行，因为在下一行重复了，我`STYLE`也`C`需要包含它（所以我实际上会有 4 行）。

上面的示例，我希望结果集如下所示：

```
STYLE     |     CUSTOMER     |     SIZE     |      COLOUR      |
-----------------------------------------------------------------
A               DWTG               S               BLUE
B               DWTG               S               RED
C               DWTG               S               GREEN
C               DWTG               M               GREEN 
```

这是因为我们将数据导入到其中的 ERP 具有文件大小限制，因此我需要将结果集拆分为较小的文件，但我需要将相同的记录（STYLE 中的相同值）保存在一起。

我正在考虑某种窗口函数，它会`TOP n`根据下一行是否具有相同的样式动态地添加一个数字。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-20T22:12:41.070

听起来你想要这个：

```
select top 3 with ties *
from yourtable
order by style 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3bfd3/1)

编辑#1：查看更新的[sql fiddle 与您的附加数据](http://sqlfiddle.com/#!3/7101d/1)

结果：

```
| STYLE | CUSTOMER | SIZE | COLOUR |
------------------------------------
|     A |     DWTG |    S |   BLUE |
|     B |     DWTG |    S |    RED |
|     C |     DWTG |    S |  GREEN |
|     C |     DWTG |    M |  GREEN | 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T22:17:06.680

使用 DENSE_RANK() 尝试这样的事情：

```
WITH    cte
          AS ( SELECT   STYLE,
                        CUSTOMER,
                        DENSE_RANK() OVER ( ORDER BY STYLE ) AS d_rank
               FROM     dbo.x
             )
    SELECT  STYLE,
            CUSTOMER
    FROM    cte
    WHERE   d_rank <= 3; 
```

[http://msdn.microsoft.com/en-us/library/ms189798.aspx](http://msdn.microsoft.com/en-us/library/ms189798.aspx)

# youtube-api - 嵌入无广告的 YouTube 视频

> ID：13981310
> 
> 赞同：45
> 
> 时间：2012-12-20T22:06:29.697
> 
> 标签：youtube-api, youtube-javascript-api

我将 YouTube 视频嵌入到一个小部件 (http://www.betterdonatebutton.com) 以帮助非营利组织筹集资金。不幸的是，他们中的一些人在技术上还不够倾向于关闭在他们的视频上显示的广告。

如何嵌入 YouTube 视频并指定不显示广告？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-28T16:13:08.843

[是否在视频上展示广告取决于该视频的内容所有者。这不是嵌入器可以控制的。](https://support.google.com/youtube/answer/132596?hl=en)

如果您获得视频内容所有者的许可，可以在自己的帐户中上传副本，然后确保您的帐户设置为关闭获利功能，那么这将阻止广告在播放期间展示。当然，您可以与原始视频的所有者一起制定安排/许可。

（还值得指出的是，如果您的目标是帮助非营利组织筹集资金，那么允许他们通过视频播放获利符合该目标......）

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-05-15T13:59:08.060

If you play the video as a playlist and then single out that video you can get it without ads. Here is what I have done: `https://www.youtube.com/v/VIDEO_ID?playlist=VIDEO_ID&autoplay=1&rel=0`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-05T17:22:53.520

我想补充一下，如果我错了，请纠正我，当我嵌入 HTML5 版本的视频时，它不会在顶部播放广告。

不确定这是否会改变。他们可能只是想找出在 HTML5 播放器上展示广告的最佳方式。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-28T08:16:33.330

从 YouTube 帮助：

> 如果您已关联 YouTube 和 AdSense 帐户并启用了嵌入视频，您将自动选择在嵌入视频中展示广告。
> 
> If you don't want to show overlay ads on your embedded videos, you can opt your videos out of showing overlay ads, though this will also disable overlay ads on your videos on YouTube.com. You may also disable your videos for embedding.

[https://support.google.com/youtube/answer/132596?hl=en](https://support.google.com/youtube/answer/132596?hl=en)

Another technical solution could be to use a custom video player, and streamline the youtube video with that one. Have not tried but guess that the ads cannot be displayed in a custom player. However, [could be forbidden](https://stackoverflow.com/questions/10214632/is-it-legal-to-use-a-youtube-video-in-a-custom-player).

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-06T08:31:14.257

For whom can help, nowadays in 2018, youtube have options for this:

(Example in Catalan, sorry :)

[![enter image description here](../Images/90d5a7b07698abff1dcb637d1e30e22a.png)](https://i.stack.imgur.com/BvNob.png)

Translation of the 3 arrows : "Share" - "Embed" - "Show suggested videos when the video is finished"

# mysql - mysql如何将1行的/join/complete信息合并到同一张表的另一行

> ID：13981311
> 
> 赞同：1
> 
> 时间：2012-12-20T22:06:31.040
> 
> 标签：mysql, join, merge

我有一张这样的桌子

```
ID   | starttime | endtime  |manualid
1    | 12:24:00  | 13:25:00 |null
2    | null      | null     |1
3    | null      | null     |5
4    | 16:34:00  | 19:25:00 |null
5    | 21:40:00  | 23:25:00 |null 
```

我想要的是当我做出`SELECT`这样的事情时

```
ID   | starttime | endtime  |searchid
1    | 12:24:00  | 13:25:00 |null
2    | 12:24:00  | 13:25:00 |1
3    | 21:40:00  | 23:25:00 |5
4    | 16:34:00  | 19:25:00 |null
5    | 21:40:00  | 23:25:00 |null 
```

这个想法是用他们的id来完成一些行的信息，来自同一个表的其他行的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:28:16.863

在这里，我正在尝试将 your_table 与自身连接，在`manualid = id`. 如果连接不成功（因为`manualid is null`，或者它的 id 不存在）`t2.id`将为空。

如果连接不成功，我将从原始行中选择`starttime`和，否则我从另一行中选择它：`endtime`

```
SELECT
  t1.ID,
  case when t2.id is null then t1.starttime else t2.starttime end as starttime,
  case when t2.id is null then t1.endtime else t2.endtime end as endtime,
  t1.manualid
FROM
  your_table t1 left join your_table t2 on t1.manualid=t2.id 
```

# html - 相对 div 与父表格单元格重叠

> ID：13981313
> 
> 赞同：1
> 
> 时间：2012-12-20T22:06:35.143
> 
> 标签：html, css, html-table

我对放置在表格单元格内的 div 有疑问。单元格具有固定高度，并且 div 相对于 height:100% 定位。

[jsfiddle 示例](http://jsfiddle.net/PHBfd/8/)

```
td {
    height:80px;
    width: 80px;
}
.cell_text {
    display: table-cell;
    vertical-align: middle;
    width: 100%;
    height: 100%;
    position:relative;
} 
```

![在此处输入图像描述](../Images/b01eec8d435066ac40d45f65036e29d5.png)

当我更改 div 的内容并且 div 高度变得大于单元格高度时，就会出现问题。IE 和 FF 的行为如下：

![在此处输入图像描述](../Images/864dd1094ca153d59f738ea61222d28e.png)

下图说明了 Chrome 的行为：

![在此处输入图像描述](../Images/6f31a6f10f2a4e6c4ff70f33b90e608d.png)

Chrome 的行为正是我所需要的，我怎样才能让它在 IE 和 Firefox 中以同样的方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:25:23.717

我删除了不必要的标记和 CSS，现在它似乎工作正常。

`position: relative`并没有多大意义，而且`border-fix`div 似乎是不必要的 - 也导致了问题。表格（以及具有类似元素`display: table-cell`的元素）在涉及到时非常灵活`height`- 简单的块元素可能不像在这种情况下那样。

还有很多多余的 CSS，请参阅[Fiddle](http://jsfiddle.net/PHBfd/11/)。在 Chrome、FF、IE9 中测试。

所以这将是标记：

```
<td class="border">
    <div class="cell_wrapper">
        <div class="cell_text">
            line-1
        </div>
    </div>
</td> 
```

以及相关的 CSS：

```
#mytable td {
    height:80px;
    width: 80px;
    text-align: center;
}

.cell_wrapper {
    display: table;
    height: 100%;
    width: 100%;
}

.cell_text {
    display: table-cell;
    vertical-align: middle;
    width: 100%;
    height: 100%;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-20T22:13:38.753

Firefox 提供了一些控制单元行为的可能性，但如果您必须支持 IE7，那么您就不走运了。 `display: table-cell;`在 IE7 或更早版本中不起作用。

# jquery - 使用 shim 在 Backbone + Requirejs 中包含一个自定义 Jquery 插件

> ID：13981315
> 
> 赞同：3
> 
> 时间：2012-12-20T22:06:53.643
> 
> 标签：jquery, jquery-ui, backbone.js, requirejs, backbone-views

我有一个主干项目，我正在使用 require.js 来模块化代码。

我的 main.js 看起来像这样：

```
require.config({
    paths:{
        jquery:'../../../../core/js/external/jquery/jquery-1.8.2',
        underscore:'../../../../core/js/external/underscore/underscore',
        backbone:'../../../../core/js/external/backbone/backbone',
        text:'../../../../core/js/external/require/text',
        backbone_paginate:'../../../../core/js/external/backbone/backbone.pagination',
        'jquery.sprites':'../../../../core/js/sprites',
        'jquery.sprite_util':'../../../../core/js/util/spriteUtil'

    },
    shim:{
        'backbone':{
            deps:['underscore', 'jquery'],
            exports:'Backbone'
        },
        'underscore':{
            exports:'_'
        },
        'jquery.blades':{
            deps:['jquery']
        },

        'jquery.sprites':{
            deps:['jquery']
        },
        'jquery.sprite_util':{
            deps:['jquery.sprites']
        }
    }
    }
});
require(['../app'], function (AppView) {
    "use strict";
    new AppView();
}); 
```

所以，这里的 jquery.sprites 和 jquery.utils 是我需要使用的插件，而不会将它们包含在我的视图中。目前，我必须将它们包括在任何使用它们的地方。例如：

```
define([
  'jquery',
  'underscore',
  'backbone',
  'views/SimpleNamedObjectView',
  'jquery.sprites',
  'jquery.sprite_util',

], function($, _, Backbone, SimpleNamedObjectView){
  "use strict"; 
```

有没有一种方法可以访问 jquery.sprites 和 jquery.sprite_util 而无需在每个视图中都包含它们？它是否可以对 main.js 中的所有视图变得全局，以便我可以使用这些插件的功能而不将它们包含在所有视图中？例如 this.$el.getSprites(); （其中 getSprites 是 jquery.sprites 的一个方法）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T02:15:46.087

Once they're loaded, as they're "shimmed", they're going to be available globally.

So you could call them as dependencies in your bootstrapping `require` call inside `main.js`. This would work.

**But**! That's completely against the philosophy of Require.js and AMD. Each module should declare all their dependencies so they can all be loaded individually and work as is. This would also allow for easier unit testing.

So, yes you can, but you **really shouldn't do this**.

# sql - 使用临时表连接查询

> ID：13981317
> 
> 赞同：1
> 
> 时间：2012-12-20T22:07:01.480
> 
> 标签：sql, sql-server, join, inner-join, common-table-expression

我有以下查询：

```
select vkbr.vkID, vkbr.bid, vkbr.Date, vkbr.agID 
FROM camp c (NOLOCK)
JOIN    ag (NOLOCK) ON ag.campID = c.id
JOIN    vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
where c.id = 648322
order by vkbr.vkID; 
```

结果如下：

```
vkID        bid     Date                    agID
1072845175  NULL    2012-12-04 20:20:12.390 16074852
1072845177  0.74    2012-12-01 23:36:11.280 16074852
1072845177  0.18    2012-12-02 23:01:26.123 16074852
1072845177  0.72    2012-12-09 23:38:52.503 16074852
1072845177  0.62    2012-12-14 15:26:49.643 16074852
1072845178  2.91    2012-12-08 19:37:00.877 16074852
1072845178  0.73    2012-12-13 17:54:11.240 16074852
1072845178  2.70    2012-12-14 15:26:49.643 16074852 
```

为了返回以下行，我使用 cte 然后 SELECT ：

```
1072845175  NULL    2012-12-04 20:20:12.390 16074852
1072845177  0.62    2012-12-14 15:26:49.643 16074852
1072845178  2.70    2012-12-14 15:26:49.643 16074852

with cte as
(    
select vkbr.vkID, vkbr.bid, vkbr.Date, vkbr.agID, ROW_NUMBER() OVER (PARTITION BY     vkbr.vkID ORDER BY vkbr.Date DESC) AS RowNumber
FROM camp c (NOLOCK)
JOIN ag (NOLOCK) ON ag.campID = c.id
JOIN vkbr WITH (NOLOCK) ON vkbr.agID = ag.id
where c.id = 648322
)

select vkID, bid, Date, agID
from cte
where RowNumber = 1 
```

我需要从 cte 获得出价并将其插入到名为 #t 的现有临时表中：

```
insert into #t (bid)    
select bid
from cte
where RowNumber = 1
and #t.Date = cte.Date
and #t.agId = cte.agId
and #t.vkId = cte.vkID; 
```

我需要用#t 加入这些连接，以确保我为正确的行插入正确的出价；但我收到此错误：

“无法绑定多部分标识符“#t.date”。”

我正在考虑创建另一个临时表，将 cte 中的行插入到该临时表中，然后与 #t 连接。在不创建临时表的情况下，是否有其他解决方案可以做到这一点？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:09:33.210

即使您要插入`#t`，它也超出了您的`select`语句范围...尝试加入您要插入的同一个表以执行此过滤：

```
insert into #t (bid)    
select cte.bid
from cte 
join #t 
  on #t.Date = cte.Date
  and #t.agId = cte.agId
  and #t.vkId = cte.vkID;
where cte.RowNumber = 1 
```

但是，您确定要执行 an`insert`而不是 an`update`吗？

```
update t
set t.bid = cte.bid
from cte 
join #t t 
  on t.Date = cte.Date
  and t.agId = cte.agId
  and t.vkId = cte.vkID;
where cte.RowNumber = 1 
```

# jquery - 在 JSON 对象调用中使用 URL 参数

> ID：13981319
> 
> 赞同：0
> 
> 时间：2012-12-20T22:07:05.080
> 
> 标签：jquery, html, json

因此，我想获取一个 URL 参数并将其用作我的 Javascript 对象的一部分。我无法在对象中附加该变量，我假设我缺少某种连接。在此先感谢您的帮助。

```
<script>
    var json = {
    'c100': {
    'url': 'https://awesome.com',
    'heading': 'I am awesome',
    'category': 'Awesome Junk'
  },
  'c101': {
    'url': 'https://coolstuff.com',
    'heading': 'How much cool stuff is there?',
    'category': 'Cool Junk n Stuff'
  },
  'c102': {
    'url': 'https://googleorsomething.com',
    'heading': 'Google is neat.',
    'category': 'Neat Junk'
  }
}

function GetURLParameter(sParam){
  var sPageURL = window.location.search.substring(1);
  var sURLVariables = sPageURL.split('&');
  for (var i = 0; i < sURLVariables.length; i++){
    var sParameterName = sURLVariables[i].split('=');
    if (sParameterName[0] == sParam){
      return sParameterName[1];
    };
  };
};

// Set Up The Variables for Concatinating the String
var calcId = GetURLParameter('calc_id');
console.log(calcId);
var jsonObject = 'json.'+calcId+'.url';

$(function() {

  $('#dynamicContent').html(json.calcId.url);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:14:31.433

您可以使用 访问对象属性`[]`。

```
var calcId = GetURLParameter('calc_id');
var jsonObject = json[calcId]; 
```

```
$('#dynamicContent').html(jsonObject.url); 
```

此操作不需要连接。

# perl - 主机文件和 Perl 机械化

> ID：13981320
> 
> 赞同：3
> 
> 时间：2012-12-20T22:07:07.623
> 
> 标签：perl, www-mechanize

我正在尝试制作一个 perl 脚本来向我创建的应用程序发送获取请求。我的应用程序在不同的服务器上运行，所以为了使它看起来像一个域，我将 ip 添加到我的 /etc/hosts 文件中。我的主机文件如下所示：

```
10.1.10.50     test1.domain.com
10.1.10.51     test2.domain.com 
```

当我运行我的脚本时，它基本上只是做了一个：

```
my $res = $mech->get("http://test1.domain.com/1"); 
```

我收到以下错误：

```
Error GETING http://test1.domain.com/1: test1.domain.com: unable to resolve 
```

我假设我的 perl 脚本没有使用我的 /etc/hosts 文件，是否有让它检查主机文件的 DNS 或在程序本身中设置域？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:09:55.663

Perl 不“使用 /etc/hosts 文件”。它使用与机器其余部分相同的网络堆栈。它是使用 /etc/hosts 的网络层。

这些主机名是否从 shell 解析？他们展示了什么？

# ascii - 这些 '{' 和 '}' 字符叫什么？

> ID：13981322
> 
> 赞同：3
> 
> 时间：2012-12-20T22:07:19.840
> 
> 标签：ascii

我只是想向我的一个刚开始编程的朋友解释用 JavaScript 编程，我把`'{'`and`'}'`字符称为*花括号*（或方括号）。他笑我说他们肯定有比这更好的名字，我意识到我不知道他们是否有。

他们有正式的名字吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:08:53.943

从技术上讲，它们简称为大括号：

[http://en.wikipedia.org/wiki/Bracket#Braces_or_Curly_brackets_.7B_.7D](http://en.wikipedia.org/wiki/Bracket#Braces_or_Curly_brackets_.7B_.7D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:10:19.330

正式名称是花括号，但它们有很多昵称，例如花括号，花括号等...

是的，大括号是正式名称...

# android - Phonegap Android：通过编程用户活动防止睡眠

> ID：13981325
> 
> 赞同：1
> 
> 时间：2012-12-20T22:07:28.497
> 
> 标签：android, cordova, sleep

我有一个扫描 RFID 芯片的 Phonegap Android 应用程序。显然，扫描 RFID 不算作用户操作，因为设备会在 Android 设置中设置的时间间隔（最长 10 分钟）后进入睡眠状态。

因此，尽管不断扫描，我的设备仍会进入睡眠状态。所以我需要一种方法来告诉操作系统我是活跃的，在每次 RFID 扫描后以编程方式。

目前，我正在做一些我不想要的事情，即使用

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

在应用程序运行时防止睡眠，但如果设备实际上处于非活动状态，我仍然希望能够使用睡眠间隔。

我对使用寄予厚望，`powerManager.userActivity(l, false)`但显然这仅适用于系统应用程序，因此我无法为其设置权限。

任何想法如何在不进行任何触摸屏交互的情况下保持设备活跃？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-26T11:28:55.780

你可以使用这个科尔多瓦插件

> [https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin](https://github.com/EddyVerbruggen/Insomnia-PhoneGap-Plugin)

为了防止睡觉，你打电话：

```
window.plugins.insomnia.keepAwake(); 
```

并允许再次睡觉：

```
window.plugins.insomnia.allowSleepAgain(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:49:28.520

您将需要稍微玩一下 JAVA。

将此代码添加到您的活动类：

```
 PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
 PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
 wl.acquire(); 
```

[在这里](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)您会找到更多信息。

也不要忘记在最后释放 WakeLock：

```
 wl.release(); 
```

您还需要确保在 Manifest 中设置了 WAKE_LOCK 权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T20:07:48.437

WakeLock 是答案，但关键是使用`ON_AFTER_RELEASE`. 使用此标志，用户活动计时器将在 WakeLock 释放时重置。

所以对于 NFC 插件，在我添加的 onPause 方法下：

```
MyMainActivity ma = (MyMainActivity) cordova.getActivity();
wl = ((PowerManager) ma.getSystemService(Context.POWER_SERVICE))
    .newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ON_AFTER_RELEASE, "wakeywakey");
wl.acquire(); 
```

在 onResume 方法下，我添加了：

```
wl.release(); 
```

通过这种安排，当 RFID 芯片被扫描时，NFC 插件将创建 WakeLock，然后释放它，这将重置活动计时器。此外，`SCREEN_BRIGHT_WAKE_LOCK`即使它已被弃用，我也使用它，因为如果屏幕变暗，它会使屏幕变亮。

# java - 如何正确引用声明匿名类的对象？

> ID：13981331
> 
> 赞同：2
> 
> 时间：2012-12-20T22:07:49.823
> 
> 标签：java, android, anonymous-class

我将 OnClick 侦听器分配给 Java 中的视图，如下所示：

```
public class MenuButton extends Fragment {
    MenuButton self = this;

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
        view.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                MenuButton button = self;
            });
        }
    }
} 
```

我想获得对菜单按钮的引用，并将其用于我的 onTouch 方法中的某些内容（我认为什么与问题无关）。我知道我可以调用类的方法（例如 getApplication()），但我特别想要对声明匿名 OnTouchListener 的对象的引用。

如您所见，我找到了解决方案！菜单按钮 self = this; 线。

有没有这样做的正确方法，或者我相当奇怪的解决方案是唯一的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:09:25.130

```
@Override
public boolean onTouch(View v, MotionEvent event) {
    MenuButton button = MenuButton.this;
}); 
```

在匿名内部类中时，`this`指的是该匿名类实例，因此您必须通过`MenuButton.this`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:09:09.217

您可以使用`MenuButton.this`引用外部类实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:18:43.003

您始终可以通过使用

```
MyClass.this 
```

句法。

如果有不清楚的地方，您可以随时参考[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)的官方文档。

# php - file_get_contents 和端口 8000

> ID：13981333
> 
> 赞同：2
> 
> 时间：2012-12-20T22:07:55.250
> 
> 标签：php, port, file-get-contents

在我的“ipage”页面上，当我在端口为 8000 的 url 上使用 file_get_contents 时，我什么也得不到。

像 ：

```
$geturl = file_get_contents('http://mfpradio.no-ip.org:8000/status.xsl');
print_r($geturl); 
```

这是在本地工作。

'ipage' 甚至不读取'print_r' 之后的脚本。它适用于，例如：

```
$geturl = file_get_contents('http://stackoverflow.com'); 
```

我试过 curl，同样的问题。

我可以在我的“ipage”页面上播放我的流。

所以看起来“ipage”正在阻塞端口“8000” `file_get_contents()`。webshost这样做正常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:15:19.677

PHP 有一个选项可以阻止文件处理函数在 URL 上工作。出于安全原因，托管公司通常会打开此选项。

找出这个标志的设置是什么——使用类似的东西`ini_get('allow_url_fopen')`来找出它是否被允许。我的猜测是它将被设置为不允许它。

如果主机不允许，那么您将不得不使用另一种方法（可能更复杂）来读取数据。通常的答案是使用 CURL（尽管它可能是相当冗长的代码。另外，CURL 扩展也可能不可用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:13:15.147

为什么不使用`CURL`？

您确定服务器可以访问该页面吗？它应该与 domain.com:port 一起使用

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-09T08:05:42.123

请确保服务器[http://mfpradio.no-ip.org:8000/](http://mfpradio.no-ip.org:8000/)端口（即 8000）**在您的服务器防火墙上作为传出端口打开**以读取页面信息...

file_get_contents() 尝试从该端口读取页面内容:)

# mysql - 如何找到今天的日期和从今天起 X 天之间的差异？

> ID：13981334
> 
> 赞同：0
> 
> 时间：2012-12-20T22:07:56.843
> 
> 标签：mysql, vb.net

**大家好，**

在我提出问题之前检查了所有可能的线程，我没有找到适合 VB.net 和 MySQL 的答案。大多数处理Android和PHP。

因此，我试图对我的 MySQL 数据库中的表中的日期字段运行查询，以查找日期值为从今天起 X 天的所有记录。我该怎么做？

我使用 VS2010 和 MySQL——以防我没有提到。谢谢。

//Kismet

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:11:34.393

MySQL：

```
SELECT *
FROM table
WHERE DATE(datecol) BETWEEN DATE(NOW()) AND DATE(DATE_ADD(NOW(), INTERVAL x DAY)); 
```

见[小提琴](http://www.sqlfiddle.com/#!2/ce78a/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:11:55.530

这是 MySQL 的查询和

> 查找日期值距今天 X 天的所有记录

```
SELECT *
FROM table
WHERE date_column = CURRENT_DATE + INTERVAL X DAY 
```

这将找到日期值在今天和从今天起 X 天之间的所有记录

```
SELECT *
FROM table
WHERE date_column BETWEEN CURRENT_DATE AND CURRENT_DATE + INTERVAL X DAY 
```

# zend-framework - ZF Boilerplate's zend version

> ID：13981337
> 
> 赞同：-1
> 
> 时间：2012-12-20T22:08:21.437
> 
> 标签：zend-framework, version, zf-boilerplate

I had a quick question here.

I was wondering if anyone knew on which version of the Zend Framework, the ZF Boilerplate is running on.

I am planning on using it but so far I was working on the ZF 1.x and I wonder if there would be a difference...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:31:05.970

It runs both:

ZF1: [https://github.com/michael-romer/zf-boilerplate](https://github.com/michael-romer/zf-boilerplate) (stable)

ZF2: [https://github.com/michael-romer/zf-boilerplate/tree/v2](https://github.com/michael-romer/zf-boilerplate/tree/v2) (not-stable)

# jquery - 从外部页面链接到具有超大尺寸的特定幻灯片

> ID：13981342
> 
> 赞同：0
> 
> 时间：2012-12-20T22:08:40.757
> 
> 标签：jquery, supersized

无论如何，是否可以从我网站的另一个页面链接到超大画廊中的特定图像。我有一个主页，其中包含与超大画廊中的图像相对应的多个缩略图。有没有办法链接每个缩略图，以便当它进入超大页面时它位于正确的幻灯片上？

这就是我在超大页面中拥有脚本的方式

```
 <script type="text/javascript">

        jQuery(function($){

            $.supersized({

                // Functionality
                slideshow               :   1,          // Slideshow on/off
                autoplay                :   1,          // Slideshow starts playing automatically
                start_slide             :   1,          // Start slide (0 is random)
                stop_loop               :   0,          // Pauses slideshow on last slide
                random                  :   0,          // Randomize slide order (Ignores start slide)
                slide_interval          :   3000,       // Length between transitions
                transition              :   6,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   1000,       // Speed of transition
                new_window              :   1,          // Image links open in new window/tab
                pause_hover             :   0,          // Pause slideshow on hover
                keyboard_nav            :   1,          // Keyboard navigation on/off
                performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                image_protect           :   1,          // Disables image dragging and right click with Javascript

                // Size & Position                         
                min_width               :   0,          // Min width allowed (in pixels)
                min_height              :   0,          // Min height allowed (in pixels)
                vertical_center         :   1,          // Vertically center background
                horizontal_center       :   1,          // Horizontally center background
                fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
                fit_portrait            :   1,          // Portrait images will not exceed browser height
                fit_landscape           :   0,          // Landscape images will not exceed browser width

                // Components                           
                slide_links             :   'name', // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                thumb_links             :   1,          // Individual thumb links for each slide
                thumbnail_navigation    :   0,          // Thumbnail navigation
                slides                  :   [           // Slideshow Images
                {image : 'images/4change.jpg', title : 'slide-link-01', thumb : '', url : '' },
                {image : 'images/a1.jpg', title : 'slide-link-02', thumb : '', url : '' },
                {image : 'images/amplifon1.jpg', title : 'slide-link-03', thumb : '', url : '' },
                {image : 'images/amplifon2.jpg', title : 'slide-link-04', thumb : '', url : '' },
                {image : 'images/brain1.jpg', title : 'slide-link-05', thumb : '', url : '' },
                {image : 'images/brain2.jpg', title : 'slide-link-06', thumb : '', url : '' },
                {image : 'images/britishhandball.jpg', title : 'slide-link-07', thumb : '', url : '' },
                {image : 'images/britishhandball2.jpg', title : 'slide-link-08', thumb : '', url : '' },
                {image : 'images/cord.jpg', title : 'slide-link-09', thumb : '', url : '' },
                {image : 'images/crossborder1.jpg', title : 'slide-link-10', thumb : '', url : '' },
                {image : 'images/crossborder2.jpg', title : 'slide-link-11', thumb : '', url : '' },
                {image : 'images/guiness1.jpg', title : 'slide-link-12', thumb : '', url : '' },
                {image : 'images/guiness2.jpg', title : 'slide-link-13', thumb : '', url : '' },
                {image : 'images/harambee.jpg', title : 'slide-link-14', thumb : '', url : '' },
                {image : 'images/lifetracks.jpg', title : 'slide-link-15', thumb : '', url : '' },
                {image : 'images/missimo.jpg', title : 'slide-link-16', thumb : '', url : '' },
                {image : 'images/staffordshire.jpg', title : 'slide-link-17', thumb : '', url : '' },
                                             ],

                // Theme Options               
                progress_bar            :   1,
                // Timer for each slide                         
                mouse_scrub             :   0

            });
        });

 </script> 
```

如何从另一个页面链接图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:42:53.823

要动态添加图像，请使用`api.options.slides`数组和`api._build()`；

例如：

```
api.options
      .slides.push({image: "http://placehold.it/350x150",title: "TEST"});
api._build(); 
```

请注意，这个插件对我来说看起来不太好，因为它在全球范围内会产生噪音。

要转到特定图像，您可以使用`api.goTo();`方法。要从另一个页面链接，您可以使用 hashlink：

在其他页面上：

```
<a href="/galery.html#im=15"> 
```

初始化超大后：

```
api.goTo(document.location
                   .hash
                    .replace(/^#/,'')
                     .replace(/im=([0-9]+).*$/,'$1')) 
```

或者如果您需要在开始时使用 `start_slide`选项：

```
$.supersized({
            // ..... options 
            start_slide : document.location
                                    .hash
                                     .replace(/^#/,'')
                                      .replace(/im=([0-9]+).*$/,'$1')),  
            // ..... options 
}); 
```

# android - Android相机字节[]数组到二维数组

> ID：13981343
> 
> 赞同：2
> 
> 时间：2012-12-20T22:08:47.107
> 
> 标签：android, bytearray, android-camera

我对 Android 相机的 byte[] 数组输出有点困惑。一张图片本质上是一个二维数组，那为什么输出只有一维呢？

我正在尝试获取字节数组输出并对其执行傅里叶变换，为此我需要将数据放在二维双数组中。那么如何从相机输出字节数组中获取二维双精度数组呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:11:50.267

一维阵列是扁平的二维阵列。要将其转换为二维数组，您需要以下内容：

```
double[][] array2D = new double[width][height];

for(int i = 0 ; i < array2D.length ; i++)
{
    for(int j = 0 ; j < array2D[i].length ; i++)
    {
        array2D[i][j] = array1D[i * array2D.length + j];
    }
} 
```

宽度和高度可能相反。

# php - 我的mysql代码有什么问题？

> ID：13981347
> 
> 赞同：-3
> 
> 时间：2012-12-20T22:09:02.183
> 
> 标签：php, mysql

可能是将近 2 个小时，我找不到我的代码的错误。

> 错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

```
$sql="INSERT INTO information ( Username, Email, Password, Name, Phone, Street, 
City, Country, Website, Gender, Day, Month, Year, Hometown, Accept )
VALUES
('$_POST[user]','$_POST[email]','$_POST[pass]','$_POST[first]','$_POST[phone]',
'$_POST[street]','$_POST[city]','$_POST[country]','$_POST[url]', '$_POST[sex]',
'$_POST[day]','$_POST[month]','$_POST[year]','$_POST[home]','$_POST[accept]'"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T22:11:06.400

看起来你忘记了结尾括号')'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:11:16.090

看起来您忘记关闭括号了。另外请清理您的输入，这是您正在使用的一个糟糕的概念

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:11:17.003

缺少 VALUES 子句的右括号......并使用准备好的语句。

# python - 如何解析二进制编码的 rss 提要

> ID：13981356
> 
> 赞同：0
> 
> 时间：2012-12-20T22:09:41.293
> 
> 标签：python, rss, urllib2, binary-data

嗨，我在从特定站点下载和读取 rss 提要时遇到问题，问题似乎是生成的下载 rss 提要看起来是二进制格式，谁能告诉我如何将其恢复为可读格式然后我可以发送到美丽的汤进行解析？

到目前为止，这是我的代码：-

```
import urllib2
from BeautifulSoup import BeautifulSoup

rss_feed = urllib2.urlopen("http://kat.ph/usearch/ubuntu/?rss=1", timeout=5.0).read()
print rss_feed #will display binary not expected xml
rss_feed_soup = BeautifulSoup(rss_feed) 
```

所以只是为了澄清我在尝试使用 urllib2 读取时似乎无法获得生成的 xml，如果我在任何现代网络浏览器中查看 rss 提要，则 rss 会正确显示，我在这里缺少什么？, rss feed 二进制编码了吗？如果是，我该如何正确解码？

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:13:12.993

提要由服务器gzip压缩，以便高效下载；它有一个`Content-Encoding: gzip`标题集。

用于[`feedparser`](http://pypi.python.org/pypi/feedparser/)下载和解析它，而不是使用`urllib2`和 BeautifulSoup。

如果必须使用`urllib2`，也可以先使用`gzip`模块解压内容：

```
import gzip
from cStringIO import StringIO

rss_feed = gzip.GzipFile(fileobj=StringIO(rss_feed)).read() 
```

# ios6 - iOS 6 自动布局定位问题

> ID：13981357
> 
> 赞同：0
> 
> 时间：2012-12-20T22:09:47.143
> 
> 标签：ios6, autolayout

我一直在寻找，找不到适合我一生的答案。我有一个视图，我希望 UILabel 在视图底部附近显示。我在 IB 中固定了“底部空间到超级视图”，它在视网膜 4 模拟器上运行良好，但在 3.5 英寸上位于屏幕外。如果我对 3.5 英寸尝试相同的步骤，它在 4 英寸显示器的底部显得太高了。这真的不应该这么困难，显然我缺少一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:29:10.367

您`UILabel`必须`Vertical Spacing`与另一个控件相对应。`console`确保您在旋转设备/模拟器时没有收到任何警告。

# asp.net - 为什么我的 RouteTable.Routes 属性是 System.Web.Routing.RouteCollection 的实例而不是 System.Web.Http.HttpRouteCollection 的实例？

> ID：13981360
> 
> 赞同：3
> 
> 时间：2012-12-20T22:09:55.970
> 
> 标签：asp.net, asp.net-mvc, vb.net, asp.net-mvc-routing

我正在尝试让 ASP.NET MVC Web API 在我的 Web 窗体解决方案中工作。不，不幸的是，我不能将所有内容都切换到 MVC。现在我被困在映射我的 HttpRoute 上。我目前正在尝试将我的路线添加到`Application_Start`方法中，`Global.asax`但遇到了麻烦。

我发现的所有说明都表明我需要调用`RouteTable.Routes`'`MapHttpRoute`方法。但是-这是一种只存在于类上的方法`System.Web.Http.HttpRouteCollection`。不过，出于某种原因 - 我的`RouteTable.Routes`实例属于`System.Web.Routing.RouteCollection`.

任何人都知道我怎样才能使这项工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T23:14:25.950

我真的不知道问题出在哪里，但我最终只是直接从 RouteCollectionExtensions 对象调用 MapHttpRoute 扩展方法，并且效果很好。哦。

# directx - 您是否对多个纹理使用多个 SamplerState

> ID：13981361
> 
> 赞同：2
> 
> 时间：2012-12-20T22:10:12.760
> 
> 标签：directx, hlsl

如果我将两个纹理传递给 HLSL 着色器，是否还需要两个 SamplerState？我对 SamplerStates 的实际工作方式有点困惑。我从不实例化它们或任何东西，我只是打电话

```
Tex.Sample(sampler, pos); 
```

我正在为配置文件 9.3 编译我的着色器（如果有任何区别，则为 WP8）

示例着色器：

```
Texture2D InputTexture;
SamplerState Sampler;

float4 PSMain(float2 pos: TEXCOORD, float4 SVP : SV_POSITION) : SV_TARGET {  
    float4 image = InputTexture.Sample(Sampler, pos);   
    return image;   
}

technique  {
    pass {
        Profile = 9.3;
        PixelShader = PSMain;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T09:10:04.057

你想做的就是所谓的多重纹理。

[SamplerState](http://msdn.microsoft.com/en-us/library/ff604998.aspx)对象包含采样和过滤选项，并且采样器允许您使用该选项从纹理中读取数据。

您可以设置许多采样器状态：

```
Filter
AddressU
AddressV
AddressW
MipLODBias
MaxAnisotropy
ComparisonFunc
BorderColor
MinLOD
MaxLOD 
```

在 Direct3D 10 中，语法如下：

```
//example
SamplerState mySampler{
    Filter = MIN_MAG_MIP_LINEAR; //sets min/mag/mip filter to linear
    AddressU = Wrap;
    AddressV = Wrap;
}; 
```

[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/bb172415%28v=vs.85%29.aspx)您可以找到默认值以及状态[的](http://msdn.microsoft.com/en-us/library/windows/desktop/bb323488%28v=vs.85%29.aspx)一些含义。

毕竟我可以说，`SamplerState`你需要的s数量取决于你想要达到什么样的效果。但实际上你的代码可能是这样的：

```
Texture2D InputTextures[2];
SamplerState Sampler;

float4 PSMain(float2 pos: TEXCOORD, float4 SVP : SV_POSITION) : SV_TARGET {
    float4 color = InputTexture[0].Sample(Sampler, pos) * InputTexture[1].Sample(Sampler, pos);
    return color;  
} 
```

事实上，如您所见，您只需将纹理的两种颜色相乘即可获得多纹理对象。

# memory-leaks - ImageView 从 url 内容显示图像需要更多内存并且应用程序崩溃

> ID：13981369
> 
> 赞同：2
> 
> 时间：2012-12-20T22:10:30.850
> 
> 标签：memory-leaks, uiimageview, uiimage, javax.imageio, crash

我有一个 UIscrollView，我在其上添加 Imageview（其图像从 URL 的内容显示），图像的数量是无限的。在滚动 UIScrollview 时，我添加了 UIImageView，但由于内存不足，应用程序正在崩溃。

谁能帮我弄清楚如何解决这个内存问题。

我还尝试分析我可以看到的代码是 ImageIO 库在滚动时占用更多内存。

在此先感谢，任何知道解决方案的人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-09T13:00:06.610

迟到的答案，但使用`didReceiveMemoryWarning`应该非常有帮助。当您的内存不足时，您不应再允许滚动更多。只有其他可能性可能是删除当前不可见的图像。

# c# - MVC ActionResult 调用另一个 ActionResult

> ID：13981371
> 
> 赞同：6
> 
> 时间：2012-12-20T22:10:33.250
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个 ActionResult 调用另一个 ActionResult。

我在我的案例语句中调用了一个 ActionResult，但它不起作用。这是我所拥有的：

```
 public ActionResult GetReport(string pNum)
   {
   ....

        switch (methodId)
        {
          case 1:
          case 5:                
           {
             var actionResult =  GetP1Report("33996",false)  as ActionResult;
              break;
           }
         }

         return actionResult; 
       } 
```

我收到以下错误：*当前上下文中不存在“actionResult”*

如果我执行以下操作，它可以工作，但不是我需要的：

```
 public ActionResult GetReport(string pNum)
   {
      ....

       var actionResult =  GetP1Report("33996",false)  as ActionResult;

        switch (methodId)
        {
          case 1:
          case 5:                
           {
             // var actionResult =  GetP1Report("33996",false)  as ActionResult;
              break;
           }
         }

         return actionResult; 
       } 
```

如何让 actionResult 在我的案例语句中工作，以便在我这样做时可见

```
 return actionResult 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:12:18.590

只需在 switch 语句之外先声明它（我猜是默认值）：

```
 ActionResult actionResult = null;
 switch (methodId)
    {
      case 1:
      case 5: // PVT, PVT-WMT
      {
          actionResult =  GetP1Report("33996",false)  as ActionResult;
          break;
       }
     }

 return actionResult ?? new View(); 
```

注意：我添加了`?? new View()`作为默认值，以防任何情况下都没有分配任何东西`actionResult`——根据需要修改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:17:15.047

问题是变量范围。dbaseman 几乎做对了......这样做：

```
public ActionResult GetReport(string pNum)
{
....

    ActionResult actionResult = new View(); // This would typically be assigned a
                                        // default ActionResult
    switch (methodId)
    {
        case 1:
        case 5:                
        {
            actionResult = GetP1Report("33996",false) as ActionResult;
            break;
         }
     }

     return actionResult; 
 } 
```

# json - 避免循环引用提供过多数据

> ID：13981372
> 
> 赞同：0
> 
> 时间：2012-12-20T22:10:41.957
> 
> 标签：json, asp.net-web-api, entity-framework-ctp5

我遵循所有程序以避免在我的 Wines/Vineyard 项目中进行循环引用。但我得到了我不想要的数据：

![在此处输入图像描述](../Images/0c30ca0c1a7a50eb9fbed7c5c0642632.png)

**我不希望每一个拥有附属葡萄园的葡萄酒列表都在每次葡萄园列出每种葡萄酒时都有该葡萄园列表。我怎样才能阻止这个？我不想做匿名类型。**

**更新：**

我的数据库上下文：

```
 public DataContext()
    {
        Configuration.LazyLoadingEnabled = false;
        Configuration.ProxyCreationEnabled = false;
    } 
```

我的路线配置：

```
 config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore;
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        ); 
```

我的控制器：

var response = context.Wines.Include("Vineyard").ToList();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:18:27.700

你如何序列化你的数据？

只是不要序列化您的`wines`集合属性。根据您的序列化机制，您可以使用属性（即。`ScriptIgnore`）标记它或定义具体类型（因为您不喜欢匿名类型）并使用 AutoMapper 复制数据。

将您的 EF 实体直接绑定到 API 的响应并不是最佳设计选择。每次修改数据库架构时，您的 API 都会发生变化。您可以定义 API 控制器将返回的单独类并使用 AutoMapper 复制数据。这样你就可以将你的数据库模式与你的 API 分离。

```
namespace API {
    class Wine {
        // properties that you want to return goes here
    }
}

Mapper.CreateMap<Wine, API.Wine>(); // Only once during app start
Mapper.Map<Wine, API.Wine>(wine); // AutoMapper will copy data using conventions 
```

# php-extension - 如何安装依赖于静态库的自定义 PHP 扩展

> ID：13981375
> 
> 赞同：1
> 
> 时间：2012-12-20T22:11:03.387
> 
> 标签：php-extension

我环顾四周（最相关[的是这个](https://stackoverflow.com/questions/10187017/php-extension-with-custom-c-library)。）

我编写了一个自定义 php 扩展来包装一个静态库（使用 PGI 构建。）

这不是直截了当的，但总的来说：

*   下载的 PHP 源代码
*   使用教程编写了扩展
*   导出 LDFLAGS="-L/home/matt/fstd_php/php-src/ext/fstd/lib -L/opt/pgi/linux86-64/2012/libso"
*   导出 LIBS="-lrmn -lpgf90 -lpghpf2 -lpgf90rtl -lpgftnrtl -lpghpf_rpm -lpgc -lrt -lm"
*   使用扩展构建 PHP，它可以工作

有什么办法可以在 Ubuntu 上预装的 PHP 版本中使用它？

该模块名为 fstd

我尝试模仿其他模块的安装方式（随意选择mongo），所以我在/etc/php5/mods-available中添加了一个ini文件，然后将我在ext/fstd/modules/fstd.so中找到的.so添加到/usr /lib/php5/20100525/

似乎没有与 php 的系统安装一起工作。

所以我在 php.ini 中启用了_dl，并尝试包含 .so。它似乎不包括依赖库。我得到：

```
matt@khea ...php-src/ext/fstd % php -f fstd.php
PHP Warning:  dl(): Unable to load dynamic library '/usr/lib/php5/20100525/fstd.so' - /usr/lib/php5/20100525/fstd.so: undefined symbol: c_fstfrm in /home/matt/fstd_php/php-src/ext/fstd/fstd.php on line 5 
```

符号 c_fstfrm 是我试图包装的静态库中的一个符号。

那么，是否有适当的方法将其安装为系统模块/扩展？否则，要使用自定义扩展，我必须只使用我自己构建的 php 版本和扩展吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T15:10:20.273

我永远无法弄清楚这一点，因此我将 PHP 构建为 CGI 并仅在需要时使用它（而不是对系统 php 安装做任何事情）

# html - 引导行流体和图像网格

> ID：13981384
> 
> 赞同：1
> 
> 时间：2012-12-20T22:12:02.373
> 
> 标签：html, twitter-bootstrap, responsive-design

我要建立一个图片库拇指。页面中可能有 5-15 个拇指。

我的标记是这样的：

```
<div class="container>
    <div class="row-fluid">
        <h4 class="underline"><span>Recent images</span></h4>

        <div id="portfolio" class="row-fluid">
           <div class="span3">
                <img src="img/portfolio/1.jpg">
           </div>
           <div class="span3">
                <img src="img/portfolio/2.jpg">
           </div>     
           <div class="span3">
                <img src="img/portfolio/3.jpg">
           </div>     
           <div class="span3">
                <img src="img/portfolio/4.jpg">
           </div>     
           <div class="span3">
                <img src="img/portfolio/5.jpg">
           </div>     
           <div class="span3">
                <img src="img/portfolio/6.jpg">
           </div>     
           <div class="span3">
                <img src="img/portfolio/7.jpg">
           </div>     
           ...
       </div>
    </div>
</div> 
```

![错过对齐的拇指](../Images/88995bf66ea8afcfa5c20e422c39a803.png)

这不起作用，因为引导程序`margin-left`仅从`first-child`.

我知道！我只需要将 span3 的 4 个元素放入 a`row`但问题是如何处理拇指来自 PHP 脚本且拇指超过 4 个的情况？

我是否应该为每 4 个元素重新迭代，并制作另一个行流体容器？

我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T19:04:43.490

是的，您的 PHP 代码需要生成关闭一行并开始新行的 HTML，每 12 个“跨度”：

```
<div class="container>
    <div class="row-fluid">
        <h4 class="underline"><span>Recent images</span></h4>

        <div id="portfolio">
          <div class="row-fluid">
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>     
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>     
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>    
          </div>
          <div class="row-fluid"> 
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>     
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>     
             <div class="span3">
                  <img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
             </div>
          </div>
       </div>
    </div>
</div> 
```

有关您的代码和我的代码的并排比较，请参见[http://jsfiddle.net/jhfrench/sSAx2/ 。](http://jsfiddle.net/jhfrench/sSAx2/)你会注意到我也把你的`<div id="portfolio" class="row-fluid">`分成了`<div id="portfolio">`，`<div class="row-fluid">`所以这`#portfolio`将是一个或多行图像的容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T19:45:25.360

对我来说，在同一个 div 中使用 span3 类的图像是有效的。
最近的图像

```
<div id="portfolio">
<div class="row-fluid">
<div class="span3">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
</div>  
</div>
<div class="row-fluid"> 
<div class="span3">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
<img src="https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQSlkfizo8Zj0MGNAt2p9g4JFnjOT4017-sR0Cjodujh5Yqb8JJ">
</div>     

</div>
</div>
</div>
</div> 
```

# regex - 如何在没有冲突的情况下将 HTTP 字符串转换为 URL，同时允许 Textile 样式的格式？

> ID：13981385
> 
> 赞同：0
> 
> 时间：2012-12-20T22:12:07.957
> 
> 标签：regex, textile, text-to-html

我正在创建一个与 Textile 非常相似的文本到标记过程的最小版本。我成功地转换了粗体、斜体、删除线（分别带有 *、_ 和 -），但我还使用以下表达式自动将 HTTP 字符串转换为链接：

```
/([^\(])(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.\-]*(\?\S+)?)?)?)/ 
```

问题是，如果 HTTP 字符串包括，例如，破折号，删除线 ( `/\-([^\*]+?)\-/`) 的表达式也会被处理，导致 URL 链接会改变：

`site.com/path-with-dashes`至`site.com/path<del>with</del>dashes`

同时实现这两个过程的最佳解决方案是什么？我假设将删除线表达式更改为要求破折号之前的字符是空格字符或行首会起作用，但我无法在一个表达式中实现这一点。

# python - 使用 subprocess.call() 运行 bin/buildout 失败

> ID：13981387
> 
> 赞同：3
> 
> 时间：2012-12-20T22:12:19.173
> 
> 标签：python, buildout

tl，dr：我的构建可以在 shell 中使用“bin/buildout”正常工作，但是当我从 Python 运行 subprocess.call(["bin/buildout"]) 或类似内容时失败。为什么？任何解决方法？

我添加了“python”标签而不仅仅是“buildout”，因为这可能是从 shell 调用 python 脚本与使用 subprocess.call() 或 os.system() 从 python 调用的细微差别。我不知道为什么他们会有所不同。不过，这可能是 Buildout 的事情，因为 Buildout 会自行重写，然后重新启动。

为了构建我想要展示的示例，我从一个新的 Ubuntu 12.04 LTS 虚拟机开始。然后我在上面安装 git (sudo apt-get install git) 并克隆我们的一个存储库，其中几乎没有任何内容：

```
git clone git://github.com/lizardsystem/lizard-datasourceviewer.git 
```

然后我 cd 进入它并运行 bootstrap.py：

```
cd lizard-datasourceviewer
python bootstrap.py 
```

到现在为止还挺好。现在可以运行“bin/buildout”，它会毫无问题地运行（嗯，在某些时候它会出错，因为系统没有 matplotlib——这是预期的结果）。但是不要那样做，因为一旦你这样做了，下面的错误就不会发生了。如果您这样做了，请删除该目录并再次克隆它。

如果代替我从 Python 运行它，例如：

```
$ python
>>> import subprocess
>>> subprocess.call(["bin/buildout"]) 
```

然后这会更早地失败（有关错误，请参见下文）。这是一个问题，因为我们想从脚本中调用 buildout。子进程调用的变体，如 os.system("bin/buildout") 或 subprocess.call(["/bin/sh", "-c", "bin/buildout"]) 没有帮助。一旦 bin/buildout 从命令行运行一次，问题就消失了，即使再次调用 bootstrap.py 也是如此。

我知道什么时候会出错。最初，bin/buildout 看起来像这样：

```
#!/usr/bin/python

import sys
sys.path[0:0] = [
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/usr/lib/python2.7/dist-packages',
  '/home/vagrant/lizard-datasourceviewer/eggs/zc.buildout-1.4.4-py2.7.egg',
  ]

import zc.buildout.buildout

if __name__ == '__main__':
    zc.buildout.buildout.main() 
```

从命令行运行 bin/buildout 后，它会“分发”，重写 bin/buildout，然后重新启动。结果 bin/buildout 看起来像这样：

```
#!/usr/bin/python

import sys
sys.path[0:0] = [
  '/home/vagrant/lizard-datasourceviewer/eggs/zc.buildout-1.4.4-py2.7.egg',
  '/home/vagrant/lizard-datasourceviewer/eggs/distribute-0.6.27-py2.7.egg',
  ]

import zc.buildout.buildout

if __name__ == '__main__':
    zc.buildout.buildout.main() 
```

当 bin/buildout 从 Python 而不是从 shell 运行时，正是这个重写和重新启动步骤似乎失败了。错误信息是：

```
vagrant@precise64:~/lizard-datasourceviewer$ python
Python 2.7.3 (default, Apr 20 2012, 22:39:59) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call(["bin/buildout"])
Getting distribution for 'mr.developer==1.21'.
Got mr.developer 1.21.
Getting distribution for 'buildout-versions==1.5'.
Got buildout-versions 1.5.
mr.developer: Creating missing sources dir /home/vagrant/lizard-datasourceviewer/src.
Getting distribution for 'distribute==0.6.27'.
Before install bootstrap.
Scanning installed packages
Setuptools installation detected at /usr/lib/python2.7/dist-packages
Non-egg installation
Removing elements out of the way...
Already patched.
/usr/lib/python2.7/dist-packages/setuptools.egg-info already patched.
After install bootstrap.
Don't have permissions to write /usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info, skipping
Creating /usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info
**error: /usr/local/lib/python2.7/dist-packages/setuptools-0.6c11-py2.7.egg-info: Permission denied**
An error occured when trying to install distribute 0.6.27\. Look above this message for any errors that were output by easy_install.
While:
  Installing.
  Checking for upgrades.
  Getting distribution for 'distribute==0.6.27'.
Error: Couldn't install: distribute 0.6.27
1 
```

如您所见，它正在尝试安装到该用户无权访问的系统 dist-packages 中。但为什么？从 shell 运行相同的脚本有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:51:52.393

不知道为什么，但使用`subprocess.call(['/bin/bash', '-c', 'bin/buildout'])`似乎为我解决了它，`subprocess.call(['/bin/sh', '-c', 'bin/buildout'])`失败了。Ubuntu 12.04。

希望能帮助到你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:40:07.657

尝试`subprocess.call()`使用可选参数调用`shell=True`。

从[子流程文档](http://docs.python.org/2/library/subprocess.html#frequently-used-arguments)：

> 如果 shell 为 True，指定的命令将通过 shell 执行。如果您将 Python 主要用于它在大多数系统 shell 上提供的增强控制流，并且仍然希望方便地访问其他 shell 功能，例如 shell 管道、文件名通配符、环境变量扩展和 ~ 到用户家的扩展，这将很有用目录。

# javascript - 热键用户脚本有效，除了在特定站点上？

> ID：13981393
> 
> 赞同：1
> 
> 时间：2012-12-20T22:12:38.520
> 
> 标签：javascript, greasemonkey

目标/测试页面：[http ://wwwdyn.zdf.de/common/weather/00012.html](http://wwwdyn.zdf.de/common/weather/00012.html)

这个网站有什么特别之处吗？还是我的代码失败？

热键适用于除天气页面以外的所有网站。所有工作都在非天气`if()`声明中完成（隐藏一些东西）。

Cookie 保存天气位置（不是天气页面；主页上的小天气信息）。在体育页面上打开文章预览。

热键应该可以在所有包含的页面上使用。

```
// ==UserScript==
// @name        heute.de (zdf)
// @version     1.4.2
// @author      unrealmirakulix
// @description optimiert heute.de
// @icon        http://www.heute.de/ZDF/zdfportal/blob/5983926/8/data.png
// @include     http*://www.heute.de/
// @include     http*://www.zdfsport.de/*
// @include     http://wwwdyn.zdf.de/common/weather/00012.html
// @copyright   none
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// ==/UserScript==

// Handler for .ready() called
if (document.readyState == "complete") {

    // not on weather module
    if ( location.href.indexOf("weather") == -1 ) {
        // hide header + footer
        document.getElementById('header').style.visibility = 'hidden'; // hide #header

        var cf = document.getElementById('footer'); // #footer selection
        cf.style.visibility = 'hidden'; // hide it
        // also hide its children
        if ( cf.hasChildNodes() )   {
            while ( cf.childNodes.length >= 1 )
            {
                cf.removeChild( cf.firstChild );       
            } 
        }

        // different actions @ different subpages
        // ZDF Sport (check if url in address bar contains "zdfsport.de")
        if ( location.href.indexOf("zdfsport.de") > -1 ) {
            $("#a2").click();
            $("#a3").click();
            $("#a4").click();
            $("#a5").click();
        }
        // Heute.de (check if url in address bar contains "heute.de")
        else if ( location.href.indexOf("heute.de") > -1 ) {
            //minimize latest news
            window.document.querySelector("#ncWrapper > #nc > #action_ncMinMax").click();

            // check if variable is stored in cookie
            var loc = $.cookies.get('loc_cookie');
            if ( loc != null) {
                var loc_exists = 1;
            }
            else { var loc_exists = 0; };

            // only ask for location if no location is saved yet [functions inside if work]
            if ( !loc_exists ) {
                var loc = prompt("Wählen Sie den Ort für den Wetterbericht?");
                alert('Sie haben ' + loc + ' als Ort für den Wetterbericht gewählt.');
            };

            $("a:contains('" + loc + "')").click();

            // save to cookie
            $.cookies.set('loc_cookie', loc);
        }
        // Error
        else {
            alert('Die Webseite wurde nicht detektiert - heute_de.user.js');
        };
    }

    // Hotkeys (listen to keyboard input)
    $('html').keypress(
        function(event){

            // exclude SHIFT
            if (event.shiftKey) {
                return;
            }
            // exclude CTRL
            else if (event.ctrlKey) {
                return;
            }
            // exlcude ALT
            else if (event.altKey) {
                return;
            }

            // if inside textarea or input
            else if ('textarea' == event.target.tagName.toLowerCase()) {
                return;
            }
            else if ('input' == event.target.tagName.toLowerCase()) {
                return;
            }

            // if key 'w' is pressed
            else if (event.which == 119){
                // open weather modul
                window.location = 'http://wwwdyn.zdf.de/common/weather/00012.html';
            }
            // if key 's' is pressed
            else if (event.which == 115){
                // open sports section
                window.location = 'http://www.zdfsport.de/ZDFsport-Startseite-4002.html';   
            }
            // if key 'h' is pressed
            else if (event.which == 104){
                // open news section
                window.location = 'http://www.heute.de/';   
            } 
        }
    );
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:33:07.697

页面上有 JavaScript 错误。我不知道它们是否相关，但通常，错误会阻止其他行为正确执行。

“未捕获的 ReferenceError：_etc 未定义。” “未能加载资源[http://code.etracker.com/t.js?et=GrKHKx](http://code.etracker.com/t.js?et=GrKHKx) ”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:57:10.907

您说该脚本适用于所有网站，但天气页面？！这很幸运，因为它根本不应该起作用。

所有代码都包含在：

```
if (document.readyState == "complete") {
    ... ...
} 
```

但除非指定，否则`document.readyState`将始终为，*或者*对于某些超快速加载页面。`interactive``@run-at document-start`

 *`$(document).ready()`无论如何，几乎从不需要在 Greasemonkey 脚本中进行测试，因为那是 Greasemonkey 脚本默认运行的时候。

此外，对于该页面，jQuery 与页面的 javascript 冲突。使用`@grant`指令将脚本恢复到沙箱（这是所有 Greasemonkey 脚本的好习惯）。

需要注意的是，您可以使用比 1.3.2 更高版本的 jQuery。. 1.7.2 版似乎运行良好。

综上所述，该脚本变为：

```
// ==UserScript==
// @name        heute.de (zdf)
// @version     1.4.2
// @author      unrealmirakulix
// @description optimiert heute.de
// @icon        http://www.heute.de/ZDF/zdfportal/blob/5983926/8/data.png
// @include     http://wwwdyn.zdf.de/common/weather/00012.html
// @include     http*://www.heute.de/
// @include     http*://www.zdfsport.de/*
// @copyright   none
// @require     http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

// not on weather module
if (location.href.indexOf("weather") == -1) {
    // hide header + footer
    document.getElementById('header').style.visibility = 'hidden'; // hide #header

    var cf = document.getElementById('footer'); // #footer selection
    cf.style.visibility = 'hidden'; // hide it
    // also hide its children
    if (cf.hasChildNodes()) {
        while (cf.childNodes.length >= 1) {
            cf.removeChild(cf.firstChild);
        }
    }

    // different actions @ different subpages
    // ZDF Sport (check if url in address bar contains "zdfsport.de")
    if (location.href.indexOf("zdfsport.de") > -1) {
        $("#a2").click();
        $("#a3").click();
        $("#a4").click();
        $("#a5").click();
    }
    // Heute.de (check if url in address bar contains "heute.de")
    else if (location.href.indexOf("heute.de") > -1) {
        //minimize latest news
        window.document.querySelector("#ncWrapper > #nc > #action_ncMinMax").click();

        // check if variable is stored in cookie
        var loc = $.cookies.get('loc_cookie');
        if (loc != null) {
            var loc_exists = 1;
        } else {
            var loc_exists = 0;
        };

        // only ask for location if no location is saved yet [functions inside if work]
        if (!loc_exists) {
            var loc = prompt("Wählen Sie den Ort für den Wetterbericht?");
            alert('Sie haben ' + loc + ' als Ort für den Wetterbericht gewählt.');
        };

        $("a:contains('" + loc + "')").click();

        // save to cookie
        $.cookies.set('loc_cookie', loc);
    }
    // Error
    else {
        alert('Die Webseite wurde nicht detektiert - heute_de.user.js');
    };
}

// Hotkeys (listen to keyboard input)
$('html').keypress ( function (event) {

    // exclude SHIFT
    if (event.shiftKey) {
        return;
    }
    // exclude CTRL
    else if (event.ctrlKey) {
        return;
    }
    // exlcude ALT
    else if (event.altKey) {
        return;
    }

    // if inside textarea or input
    else if ('textarea' == event.target.tagName.toLowerCase()) {
        return;
    } else if ('input' == event.target.tagName.toLowerCase()) {
        return;
    }

    // if key 'w' is pressed
    else if (event.which == 119) {
        // open weather modul
        window.location = 'http://wwwdyn.zdf.de/common/weather/00012.html';
    }
    // if key 's' is pressed
    else if (event.which == 115) {
        // open sports section
        window.location = 'http://www.zdfsport.de/ZDFsport-Startseite-4002.html';
    }
    // if key 'h' is pressed
    else if (event.which == 104) {
        // open news section
        window.location = 'http://www.heute.de/';
    }
} ); 
```*

# php - 从 PHP 运行控制台命令

> ID：13981400
> 
> 赞同：1
> 
> 时间：2012-12-20T22:13:30.607
> 
> 标签：php, shell, unix

*PHP 版本 5.4.6--pl0-gentoo*

当我运行这段代码时：

```
$command = "/var/www/site/bin/wkhtmltopdf-amd64 /var/www/site/pdf_s.html
/var/www/site/test.pdf 2>&1";

passthru($command, $retval);
echo '<br />'.$command.'<br />';
var_dump($retval); 
```

大多数情况下我收到错误＃**127**，输出是：

> 加载页面 (1/6) [> ] 0% [======> ] 10% [========================= ===> ] 49% [=========================================== ==================] 100% QPainter::begin(): Returned false 错误: 无法写入目的地 /var/www/site/bin/wkhtmltopdf-amd64 / var/www/site/pdf_s.html /var/www/site/test.pdf 2>&1 int(1)

当我将`$command = '/bin/ls 2>&1';`它设置为 50/50 时，有时输出应该是这样，有时又是错误 # **127**。

什么是魔法？为什么有时命令执行良好，有时（主要）我收到错误 #127？为什么这两个命令在控制台中完美运行，但在 PHP 中却不行？

# c# - C# 中的简单优先级队列 - 有什么比使用自定义排序器的列表更好：IComparer？

> ID：13981406
> 
> 赞同：7
> 
> 时间：2012-12-20T22:13:48.847
> 
> 标签：c#, priority-queue

我想实现一个优先级队列，它将我的对象注入`Nodes`到一个字段的队列中`f`。我已经用自定义比较器编写了列表，但这需要我：

*   enqueue - 每次插入后对列表进行排序
*   dequeue - 像这样删除最后一个（而不是第一个以获得性能）

    ```
    myList.RemoveAt(myList.Count - 1); 
    ```

我的列表应始终根据某个字段进行排序（这里我需要它按 排序`f`）。我还需要能够`dequeue`从列表中添加和具有最低值的对象。

有人能告诉我最好的方法是什么吗？

**编辑**

[dasblinkenlight](https://stackoverflow.com/users/335858/dasblinkenlight)有一个很好的答案，但我刚刚意识到我应该能够在这个容器中存储重复项。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T22:17:24.873

如果您使用的是 .NET 4 或更高版本，则可以使用[`SortedSet<T>`](http://msdn.microsoft.com/en-us/library/dd412070.aspx)带有自定义`IComparer<T>`.

该类允许您使用`Add`所有可变集合共有的方法添加新对象。您可以使用该属性检索最大元素`Max`，然后调用`Remove`以从集合中删除最大值。

**编辑：（**响应问题的编辑）如果您需要存储重复项，您可以使用 a [`SortedDictionary<Key,int>`](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)，并从中进行计数。同样，您可以选择使用自定义`IComparer<T>`. 当你将一个元素加入队列时，检查它是否已经存在，并增加它的计数。出队时，再次检查计数，将其递减，只有当计数达到零时才移除密钥。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T23:38:13.413

如前所述，a`SortedDictionary`让你分道扬镳，你只需要一种处理重复优先级的方法。`Dictionary`在任何基于 Map 的结构（ ,等）中处理重复项的方法`SortedDictionary`是使值成为您真正想要的值的集合。在您的情况下，将值设为 a 是最有意义的`Queue<T>`。

这里是一个起点。如果需要，您可以添加其他方法，例如`Count`、 的实现`IEnumerable`等。

```
/// <summary>
/// 
/// </summary>
/// <typeparam name="TElement">The type of the actual elements that are stored</typeparam>
/// <typeparam name="TKey">The type of the priority.  It probably makes sense to be an int or long, \
/// but any type that can be the key of a SortedDictionary will do.</typeparam>
public class PriorityQueue<TElement, TKey>
{
    private SortedDictionary<TKey, Queue<TElement>> dictionary = new SortedDictionary<TKey, Queue<TElement>>();
    private Func<TElement, TKey> selector;

    public PriorityQueue(Func<TElement, TKey> selector)
    {
        this.selector = selector;
    }

    public void Enqueue(TElement item)
    {
        TKey key = selector(item);
        Queue<TElement> queue;
        if (!dictionary.TryGetValue(key, out queue))
        {
            queue = new Queue<TElement>();
            dictionary.Add(key, queue);
        }

        queue.Enqueue(item);
    }

    public TElement Dequeue()
    {
        if (dictionary.Count == 0)
            throw new Exception("No items to Dequeue:");
        var key = dictionary.Keys.First();

        var queue = dictionary[key];
        var output = queue.Dequeue();
        if (queue.Count == 0)
            dictionary.Remove(key);

        return output;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T10:00:44.930

.NET 6 现在有[PriorityQueue<TElement,TPriority>](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.priorityqueue-2?view=net-6.0)：

```
var queue = new PriorityQueue<Foo, int>();
queue.Enqueue(new Foo("A"), 10);
queue.Enqueue(new Foo("B"), 15);
queue.Enqueue(new Foo("C"), -5);
queue.Enqueue(new Foo("D"), 1);

while (queue.TryDequeue(out var foo, out _))
{
    Console.WriteLine(foo.Name);
} 
```

输出：

```
C
D
A
B 
```

请注意，此实现**不**保证具有相同优先级的项目的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-07T19:41:01.030

您也可以使用`SortedSet`with 重复项。不是将值存储在集合中，而是存储列表的索引，然后在比较重复项时使用索引作为区分因素。

```
List<int> nums = new List<int>{1,2,1,3,3,2};
SortedSet<int> pq = new SortedSet<int>(Comparer<int>.Create(
    (x,y) => nums[x] != nums[y] ? nums[x]-nums[y] : x-y
));

for (int i=0; i<nums.Count; i++) pq.Add(i);
while (pq.Any())
{
    Console.Write(nums[pq.Min] + " ");
    pq.Remove(pq.Min);
} 
```

[https://dotnetfiddle.net/Egg3oN](https://dotnetfiddle.net/Egg3oN)

**编辑**：

我重用了上面相同的代码来添加 OP 要求的两种方法

```
public static void Main()
{
    List<int> nums = new List<int>{1,2,1,3,3,2};
    SortedSet<int> pq = new SortedSet<int>(Comparer<int>.Create(
        (x,y) => nums[x] != nums[y] ? nums[x]-nums[y] : x-y
    ));

    for (int i=0; i<nums.Count; i++) Enqueue(pq, i);
    while (pq.Any())
    {
        int topIndex = Dequeue(pq);
        Console.Write(nums[topIndex] + " ");
    }
}

private static void Enqueue(SortedSet<int> pq, int numIndex)
{
    pq.Add(numIndex);
}

private static int Dequeue(SortedSet<int> pq)
{
    int topIndex = pq.Min;
    pq.Remove(pq.Min);
    return topIndex;
} 
```

# facebook-graph-api - Multipke FB JS FQL查询获取女性家庭用户

> ID：13981411
> 
> 赞同：0
> 
> 时间：2012-12-20T22:14:09.580
> 
> 标签：facebook-graph-api, facebook-fql

我对 FQL 完全陌生，但每天都使用 FB JS API。

是否有一种简单的方法可以进行两个 FQL 查询，一个用于获取家庭成员，另一个用于获取该结果的女性用户？

我可以看到 FQL Multiquery 已被弃用，但您仍然可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:09:57.223

是的，您可以使用[user](https://developers.facebook.com/docs/reference/fql/user)和[family](https://developers.facebook.com/docs/reference/fql/family)表来运行查询，例如 -

```
SELECT uid, username FROM user where sex = 'female' and uid in ( select uid FROM family WHERE profile_id = me()) 
```

# domain-driven-design - 在域模型中有第 3 方或自定义“库”引用？

> ID：13981414
> 
> 赞同：5
> 
> 时间：2012-12-20T22:14:30.577
> 
> 标签：domain-driven-design

如果我的域模型中的逻辑依赖于第 3 方组件或某些内部自定义库/管理器 .dll，是否可以创建此依赖项？我显然对域层的任何外观或持久层没有依赖/依赖，但我很好奇其他类型的依赖是否违反了 DDD 的任何规则？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T03:02:46.007

总的来说，我同意[这个答案](https://stackoverflow.com/a/13981955/625332)，如果是第 3 方库，则尤其如此

*   经常变化
*   进行任何类型的进程外通信
*   有很多自己的依赖项

但是我认为可以直接从您的域代码中引用某些第 3 方库（否则您将无法使用内置的 java/c# 类型，因为它们也可以被视为第 3 方）。这些是不具备上述任何特征的库，例如[noda-time 。](http://code.google.com/p/noda-time/)我还可以看到如何根据您的域直接引用一些数学或集合库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T23:06:40.507

在 DDD 中，这种类型的场景是通过[反腐败层](http://www.markhneedham.com/blog/2009/07/07/domain-driven-design-anti-corruption-layer/)来处理的。这基本上需要您将第 3 方 API 封装在存储库或域服务后面。您创建一个 3rd 方 API 的本地模型，然后可以与您的域层的其余部分集成。

# php - 获取 PHP 文件指针以加载图像

> ID：13981418
> 
> 赞同：0
> 
> 时间：2012-12-20T22:14:51.157
> 
> 标签：php, sql, image

我已将图像指针存储在 mysql 数据库中，所以现在我只想使用`<img>`标签打印图像。

我得到了数据库的变量图像给我指向图像的指针....对于这个特定的页面（和示例）它给了我这个指针

```
$Image = '/xampp/htdocs/cw/mysql/images/Iphone3GSh.JPG' 
```

而我`<img>`的做法并没有显示出图像是

```
<img src="<?php echo $Image; ?>" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:31:49.710

您错过了将文件的本地路径（您所说的指针通常命名为*file-path*）转换为 URI 的重要步骤。这可以作为纯数据 uri 完成（不适合较大的图像）：

```
$ImageSrc = 'data:image/jpg;base64,'.base64_encode(file_get_contents($Image));

<img src="<?php echo $ImageSrc; ?>" /> 
```

通常，您根据使用您的网络服务器配置的 webroot 将文件路径转换为等效的 URI。由于您没有与您的问题共享它，因此只能在此处粗略显示：

```
$root = $_SERVER['DOCUMENT_ROOT'];
$rootLen = strlen($root);
if (substr($Image, 0, $rootLen) !== $root) {
    throw new Exception('Incompatible File');
}
$ImageSrc = substr($Image, $rootLen);

<img src="<?php echo $ImageSrc; ?>" /> 
```

请查阅您选择的 HTML 参考，以了解 HTML 图像标记的基本知识、src 的用途、它的用途、URI 是什么以及所有这些是如何工作的。在答案中向您解释所有这些内容有点过多，因此我只发布了 PHP 代码，它可能会或可能不会像您已经拥有的那样为您带来更多问题。祝你好运！

# python - 在大列表中搜索子字符串

> ID：13981419
> 
> 赞同：1
> 
> 时间：2012-12-20T22:14:53.493
> 
> 标签：python, full-text-search, substring

我试图找到 2 个字符串之间的所有形式的插入。所以我有一个包含 1400 万个字符串的列表，然后我必须检查每个字符串有哪些可能的插入可以将一个字符串转换为另一个字符串（基本上计算插入频率）。假设 x 是一个字符串，y 是另一个字符串，其中 x 是 y 的子字符串，所以我们必须找出哪些插入将 x 转换为 y。

我正在使用以下代码段。它有效，但需要很多时间。我什至尝试将负载分布在 64 个处理器上，但仍需要 20 天才能完成。

```
for i in Words:
#trying to distribute load across different processes, so can ignore this part
   h = hashlib.sha256(i)
   n = int(h.hexdigest(),base=16)
   if (n%64!=ix): #ix is a process based id
    continue

   for j in Words:#
    if len(i)>len(j):
        continue
    if( i!=j and i in j):  # i is a substring of j
        ind=j.find(i)
        s1=j[0:ind]
        s2=j[ind+len(i):len(j)]

                    if(len(s1)>0):
            if (not transform.has_key(s1)):
                transform[s1]=1
            else:
                transform[s1]+=1

        if(len(s2)>0):
            if (not transform.has_key(s2)):
                transform[s2]=1
            else:
                transform[s2]+=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:07:17.893

不是将每个单词相互比较（二次运行时间），而是取每个单词的每个正确子字符串（线性运行时间，假设单词长度是有界的）并检查它是否在单词集中（查找 a 的元素`set`是常数时间） .

这在我的笔记本电脑上运行了不到 2 秒（46265 个字（长度 < 10），具有 47015 个独特的转换（总共 799089 个））：

```
from collections import Counter

# for testing
from random import choice, randrange
from string import ascii_uppercase
big_word = "".join(choice(ascii_uppercase) for i in range(10000))
words = [big_word[randrange(len(big_word)):][:randrange(1, 10)] for i in range(100000)] # words of up to 9 letters; all are substrings of big_word  

# now the real code
def insertions(words):
    for word in words:
        for i in range(1, len(word) - 1):
            ins = word[:i]
            rest = word[i:]
            for j in range(1, len(rest)):
                if rest[:j] in words:
                    yield ins
        for i in range(1, len(word) - 1):
            rest = word[:i]
            ins = word[i:]
            for j in range(len(rest) - 1):
                if rest[j:] in words:
                    yield ins

transforms = Counter(insertions(set(words))) 
```

# struts2 - 使用单个标签上传多个文件

> ID：13981421
> 
> 赞同：1
> 
> 时间：2012-12-20T22:14:59.813
> 
> 标签：struts2

我有一个带有附加文件选项的表单。我想使用单个标签获取多个文件`<s:file>`。

每次附加文件时，该选项都会出现附加另一个文件和下面的附件列表。

# ios6 - 如果嵌入在导航控制器中，表格视图不会恢复滚动位置（iOS 6 状态保存/恢复）

> ID：13981422
> 
> 赞同：2
> 
> 时间：2012-12-20T22:15:13.670
> 
> 标签：ios6

我一直在玩 iOS 6 状态保存/恢复，但遇到了一个奇怪的情况。如果我在 Storyboarded 应用程序的导航控制器中嵌入了一个表格视图控制器，表格视图（即使在我向下滚动之后）在我测试状态恢复后将其滚动位置重置为顶部（使用“按下主页按钮，然后停止和在 Xcode 中运行”例程）。这是为 iOS 6.0 构建的 Xcode 4.5.1。

我已经执行了支持恢复所需的步骤：我已经检查了在我的表视图控制器子类中调用了 encodeRestorableStateWithCoder 和 e encodeRestorableStateWithCoder（是的，我在运行该检查时确实调用了 super）。

**如果我从情节提要中删除导航控制器，而是将我的表格视图控制器嵌入到选项卡栏控制器中，则滚动位置将*被*保留。**

知道我可能做错了什么吗？（我倾向于认为这是一个错误。）

以下是重现此问题的确切步骤（适用于 Xcode 4.5.1、iOS 6.0）

1.  使用启用了 ARC 的空模板创建一个新的 iPhone 项目。

2.  创建一个名为 Storyboard 的故事板文件，并在 Project Editor > Targets > Summary 窗格中将其设置为应用程序的“Main Storyboard”

3.  将导航控制器拖到情节提要场景中

(4)在Appdelegate.m中，将@implementation部分的代码替换为阅读

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return YES;
}

- (BOOL)application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder
{
    return YES;
}

- (BOOL)application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder
{
    return YES;
} 
```

（5）创建一个不带XIB的UITableViewController子类，命名为TableViewController，将.m文件中的代码替换为：

```
#import "TableViewController.h"

@implementation TableViewController

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1000;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];
    cell.textLabel.text = [NSString stringWithFormat:@"%d", indexPath.row];
    return cell;
} 
```

(6) 在 Storyboard 中，在实用程序窗格的 Identity Inspector 中，将表视图控制器的类从 UITableViewController 更改为 TableViewController。

(7) 在 Storyboard 中，通过 Attributes Inspector 将单元重用标识符“Cell”分配给表格视图单元。

(8) 在 Storyboard 中，将 Restoration ID 分配给导航控制器、表格视图控制器和 Identity Inspector 中的表格视图。我将 Storyboard ID 分别设置为“Nav Controller”、“Table View Controller”和“Table View”，并选中“Use Storyboard ID”复选框作为每个的恢复 ID。

构建应用程序，向下滚动表格视图，单击主页按钮，在 Xcode 中停止应用程序，然后通过 Xcode 再次运行。

表格视图应该滚动到按下主页按钮之前的位置，但事实并非如此。

# postgresql - 我应该使用分片吗？

> ID：13981425
> 
> 赞同：3
> 
> 时间：2012-12-20T22:15:29.157
> 
> 标签：postgresql, optimization, partitioning, sharding

我正在寻求建议。我从未使用过分片，但最近阅读了一些关于它的内容，我怀疑它应该有助于我在数据库（PostgreSQL 9.1）中长时间执行查询。

## 描述

*   我有`posts`2 亿行的表。
*   每个帖子都有表的外键`projects`。
*   每个项目在帖子表中有 100 到 300,000 行（平均：30,000）
*   通常我在外键上与项目表连接的帖子表上执行查询`projects_id`。
*   我很少与其他表中的页面执行连接。

对于页面中超过 100,000 行的项目，我的查询（检索在给定时间段内添加的帖子和聚合）非常慢。

## 我应该使用分片吗？

如果是：

*   我应该如何分片？我应该`projects_id`在页表中使用作为键吗？
*   分片表页面（创建posts_1，posts_2 ...表）是否足够？
*   我应该在一台机器上使用多个磁盘（分区）（各种磁盘上的分片表）吗？

如果不：

我应该使用什么来代替分片？我购买了具有更快磁盘（SAS）的服务器；它有帮助，但还不够。我尝试使用主从（使用 pgPool2），但是当我想在从数据库上执行更长的查询时，我收到以下错误：

> 错误：由于与恢复冲突而取消语句详细信息：用户查询可能需要查看必须删除的行版本。

## 关于分片的详细问题：

*   我应该在每个分片表中有多少行（posts_1，posts_2 ...）
*   PostgreSQL 中分片的最佳解决方案/工具是什么？PL/代理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T02:56:20.423

如果没有彻底的瓶颈分析和所需的系统用例，就很难说清楚。你从来没有确切地说它的运行速度有多慢。

我会给你几个选项来考虑而不是分片：

1.  使用**Solr**等搜索引擎进行常见查询（例如最近的）
2.  使用计数器表或使用**Redis 之**类的东西进行统计聚合（帖子数）
3.  使用消息队列（Redis (pub/sub) 或**RabbitMQ**）来限制数据库写入
4.  缓存，缓存，缓存
5.  最后也许考虑一个 NoSQL 选项（非常怀疑你需要这样做）

如果您至少没有完成我提到的 3/5 选项，您可能不应该进行分片并查看替代方案。特别是 2 号，因为 Postgresql 的速度非常慢，例如：`select count(*) from ...`.

# javascript - 每秒更新 Javascript 中的文本框值

> ID：13981426
> 
> 赞同：1
> 
> 时间：2012-12-20T22:15:30.410
> 
> 标签：javascript

我正在尝试将我在 excel 中制作的薪酬和储蓄计算器转换为我可以在我的网站上托管并在任何地方访问的网页。

我想要的是让值自动更新，而无需按下大量按钮。

我做了一些研究并将这段代码放在一起，但它不起作用......

```
window.setInterval(function () {
  var week1 = document.getElementsByName("week1").value;
  var week2 = document.getElementsByName("week2").value;
  var week3 = document.getElementsByName("week3").value;
  var week4 = document.getElementsByName("week4").value;
  var week5 = document.getElementsByName("week5").value;

  var weekTotal = week1 + week2 + week3 + week4 + week5;

  document.getElementById("totalHours").innerHTML = weekTotal;
}, 1000); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:21:23.687

1.  使用元素 ID，而不是名称 - 然后你可以使用`document.getElementById()`

2.  缓存这些元素变量，这样您就不必`document.getElementById()`每次都调用

3.  用 -转换`.value`成一个数字`parseInt(s, 10)`虽然你没有说它是如何失败的，但这*会给*你带来问题，因为`.value`通常是一个字符串，并且`+`在字符串上使用会进行连接，而不是加法。

4.  不要在计时器循环中执行此操作 - 它会阻止实时更新。相反，使用`onchange`（和/或`oninput`）事件处理程序，只要更新任何值，就会立即调用该事件处理程序。`onchange`每次用户从一个输入移动到另一个输入时都会计算总和，每次`oninput`按键（或复制/粘贴等）时都会重新计算。

见[http://jsfiddle.net/alnitak/7Gzs6/](http://jsfiddle.net/alnitak/7Gzs6/)

```
var form = document.getElementById('myform');
var inputs = form.getElementsByTagName('input');
var totalView = document.getElementById('total');

function add(ev) {
    var total = 0;
    for (var i = 0, n = inputs.length; i < n; ++i) {
        var v = parseInt(inputs[i].value, 10);
        if (!isNaN(v)) {
            total += v;
        }
    }
    totalView.innerHTML = total;
}

form.addEventListener('change', add, false);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:47:59.460

作为您选择的答案的替代方案，请考虑使用可用的集合并使用属性访问而不是函数调用。例如

```
<script>

// Test that v is an integer
function isInt(v) {
  return /^\d+$/.test(v + '');
}

// Update the total if entered value is an integer
function updateTotal(e) {
  var e = e || window.event;
  var el = e.target || e.srcElement;
  var value = el.value;

  // If value is an integer, use it
  if (isInt(value)) {
    el.form.total.value = +el.form.total.value + +value;

  // Otherwise, do nothing (or show an error message asking
  // the user to input a valid value)
  } else {
    e.preventDefault();
  }
  return false;
}

// Add listeners to elements that need them
window.onload = function() {
  var form = document.forms['f0'];
  var els = form.elements;
  var re = /^week/;
  var total = 0;

  for (var i=0, iLen=els.length; i<iLen; i++) {
    if (re.test(els[i].name)) {
      els[i].onchange = updateTotal;
    }
  }
}
</script>

<form id="f0" action="">
  week1<input name="week1" value="0"><br>
  week2<input name="week2" value="0"><br>
  week3<input name="week3" value="0"><br>
  week4<input name="week4" value="0"><br>
  week5<input name="week5" value="0"><br>
  total<input name="total" value="0" readonly>
  <input type="reset"><input type="submit">
</form> 
```

该`isInt`函数有点简单，它应该修剪前导和尾随空格等，但足以表明您必须在操作中使用输入之前对其进行测试。这也是一个很好的例子，说明内联侦听器可能是更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:17:33.920

`document.getElementsByName`返回一个数组

因此，您可能想要检索`[0]`名称为“week1”的第一个元素，依此类推。

```
var week1 = document.getElementsByName("week1")[0].value; 
```

# c# - 如何读取匿名类型的属性？

> ID：13981429
> 
> 赞同：12
> 
> 时间：2012-12-20T22:15:49.063
> 
> 标签：c#, anonymous-types, jsonresult

我有一个返回的方法

```
return new  System.Web.Mvc.JsonResult()
{                     
    Data = new
    {
        Status = "OK", 
    }
} 
```

我需要在需要验证的地方编写一个单元测试`jsonResult.Data.status= "OK"`。

如何读取状态属性？

更新：我尝试了 [assembly: InternalsVisibleTo("TestingAssemblyName")]，但这没有帮助。我一直收到错误{“'System.Web.Mvc.JsonResult'不包含'Status'的定义”}

此外，我认为我宁愿不修改我正在测试的代码。

所以我接受了乔恩的建议并使用了反思。

```
 var type = jsonResult.Data.GetType();

        var pinfo = type.GetProperty("Status");

        string  statusValue = pinfo.GetValue(jsonResult.Data,null).ToString();

        Assert.AreEqual("OK", statusValue); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-20T22:18:29.630

最简单的方法可能是使用动态类型：

```
dynamic foo = ret.Data;
Assert.AreEqual("OK", foo.status); 
```

请注意，您需要使用`[InternalsVisibleTo]`才能让您的单元测试程序集访问生产程序集中的匿名类型，因为它将通过`internal`访问权限生成。

或者，只需使用反射。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-20T22:19:10.387

`dynamic`：

```
dynamic testObject = YourMethodThatReturnsDynamicObject().Data;
Assert.AreEqual("OK", testObject.Status); 
```

# bitmap - 我怎样才能更快地做到这一点（来自 IntPtr、EDSDK 的位图）

> ID：13981430
> 
> 赞同：2
> 
> 时间：2012-12-20T22:15:57.020
> 
> 标签：bitmap, decode, edsdk

现在我为自己开发佳能**EDSDK**。我的实时取景图像非常慢（每秒 5 张图像）。我怎样才能更快地做到这一点？

这是我获取图像指针的代码：

```
    uint _err = EDSDK.EDS_ERR_OK；
    IntPtr imageRef = IntPtr.Zero;
    IntPtr streamRef = IntPtr.Zero;
    IntPtr streamPtr = IntPtr.Zero;
    单位长度 = 0;

    _err = EDSDK.EdsCreateMemoryStream(0, out streamRef);
    如果（EDSDK.EDS_ERR_OK == _err）
      _err = EDSDK.EdsCreateEvfImageRef(streamRef, out imageRef);

    如果（EDSDK.EDS_ERR_OK == _err）
      _err = EDSDK.EdsDownloadEvfImage(_camera, imageRef);          

    如果（EDSDK.EDS_ERR_OK == _err）
    {
      // 显示图像
      _err = EDSDK.EdsGetPointer(streamRef, out streamPtr);
      如果（EDSDK.EDS_ERR_OK == _err）
        _err = EDSDK.EdsGetLength(streamRef, out Length);
    }   

```

然后我将图像加载到位图，它非常非常慢。我的代码：

```
    字节[] b = 新字节[长度];
    Marshal.Copy(streamPtr, b, 0, (int)Length);
    使用 (MemoryStream ac = new MemoryStream(b))
    {
      img = (Bitmap)Image.FromStream(ac);
      ac.Close();
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T20:13:15.720

libjpeg-turbo，可在此处获取[http://libjpeg-turbo.virtualgl.org/](http://libjpeg-turbo.virtualgl.org/)将实时解码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:08:08.897

您是否尝试过使用 EdsGetImage 方法从内存流中提取图像数据？

为了使用此方法，您需要在使用 EdsDownloadEvf 方法（使用 EdsCreateImageRef 方法）后从内存流中创建一个额外的图像引用。然后，您可以在 EdsGetImage 方法中使用此图像参考来提取未压缩的图像数据。

# javascript - jqueryUI自动完成菜单显示效果

> ID：13981438
> 
> 赞同：4
> 
> 时间：2012-12-20T22:16:23.677
> 
> 标签：javascript, jquery-ui, jquery-ui-autocomplete

我花了半天时间尝试为自动完成下拉菜单应用淡入淡出效果......最终结果对我来说非常不舒服 - 看起来像“幸运拍摄”，而不是真正的解决方案。

例如，我使用了 jqueryui 默认演示，并添加了几行：

```
var acMenu = $("#tags").data().autocomplete.menu.activeMenu;
acMenu._basehide = acMenu.hide;
acMenu.hide = function(){
      this._basehide("fade","slow");
      };
acMenu._baseshow = acMenu.show;
acMenu.show = function(){
      this._baseshow("fade","slow");
      }; 
```

整个文件看起来像（© www.jqueryui.com）：

```
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>jQuery UI Autocomplete - Default functionality</title>
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
  <link rel="stylesheet" href="/resources/demos/style.css" />
  <script>
  $(function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#tags" ).autocomplete({
      source: availableTags
    });

    var acMenu = $("#tags").data().autocomplete.menu.activeMenu;
    acMenu._basehide = acMenu.hide;
    acMenu.hide = function(){
          this._basehide("fade","slow");
          };
    acMenu._baseshow = acMenu.show;
    acMenu.show = function(){
          this._baseshow("fade","slow");
          }; 

  });
  </script>
</head>
<body>

<div class="ui-widget">
  <label for="tags">Tags: </label>
  <input id="tags" />
</div>

</body>
</html> 
```

你能建议我更好的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:53:59.673

由于您在那里使用 HTML5，因此您可以使用 CSS 转换来完成这项工作。

在自动完成实例的打开/关闭事件上添加/删除一个类：

```
$( "#tags" ).autocomplete({
  source: availableTags,
  open: function () { $('ul.ui-autocomplete').addClass('opened') },
  close: function () { 
    $('ul.ui-autocomplete')
      .removeClass('opened')
      .css('display','block'); 
  },
}); 
```

然后添加以下CSS：

```
.ui-autocomplete {
    opacity: 0;
    display: none;
    transition: opacity 1s;
    -moz-transition: opacity 1s;
    -webkit-transition: opacity 1s;
    -o-transition: opacity 1s;
}

.ui-autocomplete.opened {
    opacity: 1;
} 
```

虽然我想你可以用 jQuery UI Fade to class 方法做同样的方法。**注意：**当页面上有超过 1 个自动完成时会产生奇怪的结果。

[JSFiddle 上的示例](http://jsfiddle.net/GEZvA/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-26T18:06:01.063

那这个呢？（不需要CSS）

```
$( "#tags" ).autocomplete({
    source: availableTags,
    open: function () { $('ul.ui-autocomplete').hide().fadeIn() },
    close: function () { $('ul.ui-autocomplete').show().fadeOut() }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-25T14:42:16.900

如果有帮助，我已经创建了一个适用于项目中每个自动完成功能的功能，也许可以改进，但它可以工作

```
$(document).on('autocompleteopen', function(event, ui) {
  $(event.target).autocomplete('widget').hide().fadeIn('fast');
}).on('autocompleteclose', function(event, ui) {
  $(event.target).autocomplete('widget').show().fadeOut('fast');
}); 
```

# digital-signature - 无法验证 SAML 断言签名

> ID：13981441
> 
> 赞同：2
> 
> 时间：2012-12-20T22:16:27.010
> 
> 标签：digital-signature, keystore, saml, saml-2.0, josso

我是服务提供者，从 IDP 接收 SAML 断言签名。我在 Tomcat 之上使用 JOSSO 来使用断言。这里的问题是我无法验证断言签名。

IDP 证书使用别名“IDP”上传到我的密钥库。

验证签名时，出现以下错误：

```
2012-12-19 14:09:38,697 | ERROR | P/SAML2/ACS/POST | AbstractCamelProducer            | tion.camel.AbstractCamelProducer  146 | 170 - org.atricore.idbus.kernel.main - 1.3.0 | urn:oasis:names:tc:SAML:2.0:status:Requester:urn:oasis:names:tc:SAML:2.0:status:RequestDenied:urn:org:atricore:idbus:samlr2:status:**InvalidResponseSignature:null**:
org.atricore.idbus.capabilities.sso.support.core.SSOResponseException: urn:oasis:names:tc:SAML:2.0:status:Requester:urn:oasis:names:tc:SAML:2.0:status:RequestDenied:urn:org:atricore:idbus:samlr2:status:InvalidResponseSignature:null:

at org.atricore.idbus.capabilities.sso.main.sp.producers.AssertionConsumerProducer.validateResponse(AssertionConsumerProducer.java:943)

at org.atricore.idbus.capabilities.sso.main.sp.producers.AssertionConsumerProducer.doProcess(AssertionConsumerProducer.java:139)

at org.atricore.idbus.capabilities.sso.main.sp.producers.AssertionConsumerProducer.doProcess(AssertionConsumerProducer.java:85)

at org.atricore.idbus.kernel.main.mediation.camel.AbstractCamelProducer.process(AbstractCamelProducer.java:133)[170:org.atricore.idbus.kernel.main:1.3.0]

at org.apache.camel.impl.converter.AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(AsyncProcessorTypeConverter.java:43)[148:org.apache.camel.camel-core:1.6.1] 
```

为什么 JOSSO 无法检测到密钥库中的证书并验证签名？我需要以不同的方式定义别名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:12:02.580

这是 JOSSO 中的一个已知错误。等待支持的解决方法

# jquery - 用jquery替换链接文本

> ID：13981442
> 
> 赞同：0
> 
> 时间：2012-12-20T22:16:35.543
> 
> 标签：jquery, string, replace, indexof

我正在尝试遍历具有特定字符串的 div 以将其替换为 html 中的另一个字符串我有 div 类为“meta”，其中一些包含 facebook twitter 之类的词，它们是链接，我只想用 facebook 替换这个词删除它并保持 twitter 链接原样的空间，所以我正在使用此代码

```
$(document).ready(function(e) {
  $(".meta").each(function() {
    var newstring = $(this).text();
    if(newstring.indexOf('facebook') >= 0){
      news = newstring.replace('facebook','');
    }
    $(this).html(news);
  });
}); 
```

但是 twitter 仅显示为文本而不是链接，并且在使用时

```
var newstring = $(this).html(); 
```

什么都没有发生它不会替换字符串任何帮助请

提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:23:44.287

使用[`:contains`](http://api.jquery.com/contains-selector/)和的组合[`.remove()`](http://api.jquery.com/remove/)。

```
​$("a:contains('facebook')").remove();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:20:49.240

使用`.text()`代替`.html()`：

```
$(this).text(news); 
```

# .htaccess - .htaccess 仅适用于某些虚拟主机

> ID：13981446
> 
> 赞同：0
> 
> 时间：2012-12-20T22:16:48.710
> 
> 标签：.htaccess

我的 .htaccess 有问题，因为它只适用于某些主机。

我尝试使用重写规则。

`http://example.com/p/page_name`适用于所有主机，但是当我尝试添加某些内容后`page_name`却没有。

## .htaccess

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule p/(.*)$ index.php?page=$1
RewriteRule p/portfolio/([0-9]+)$ p/portfolio&id=$1 
```

最后一行并不总是有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:27:12.770

`p/portfolio&id=$1`和号不应该是一个问号吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:19:59.863

您需要重新安排 2 条规则。现在，正则表达式的第一条规则`p/(.*)$`是吞噬所有请求，包括看起来像`/p/portfolio/1234567`. 此外，您可以添加`^`字符以匹配 URI 的开头以使其更准确，并使用`L`and`QSA`标志：

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule ^p/portfolio/([0-9]+)$ /p/portfolio?id=$1 [L,QSA]
RewriteRule ^p/(.*)$ index.php?page=$1 [L,QSA] 
```

或者，您可以将两个规则概括为一个规则：

```
RewriteRule ^p/([^/]+)(/([0-9]+))?$ /index.php?page=$1&id=$3 [L,QSA] 
```

# performance - 提高 Wordpress 速度（大约 1000k 个帖子的大型网站）

> ID：13981472
> 
> 赞同：2
> 
> 时间：2012-12-20T22:19:21.637
> 
> 标签：performance, wordpress

我有一个 wordpress 网站，它有超过 1000k 的帖子。它非常慢。我使用 wp 总缓存、WP-dboptimizer 插件等。但它仍然很慢。任何人都可以提供一些技巧来提高我的网站速度。我的网站是惊人的[videoz.com](http://amazingvideoz.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:56:42.577

有很多选择。其中之一是使用 CDN..

我给你一些你应该真正遵循的文章。关注他们后，我的网站变得难以置信地快:-)（我的博客 - www.wrapcode.com，自己检查速度）

1.  使用 Wordpress 的 Jetpack。激活它，它确实在速度和性能上产生了很大的变化。CDN的一种
2.  关注这篇文章： http: [//www.wpbeginner.com/plugins/how-to-install-and-setup-w3-total-cache-for-beginners/](http://www.wpbeginner.com/plugins/how-to-install-and-setup-w3-total-cache-for-beginners/)
3.  使用 W3 Total Cache：我将它与 Jetpack 一起使用，它可以帮助您减少带宽并加快您的博客速度：[http ://www.ostraining.com/blog/wordpress/w3-total-cache/](http://www.ostraining.com/blog/wordpress/w3-total-cache/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T20:48:08.457

如果您有很多资产（图像、js、css），使用 CDN 肯定会有所帮助。如果您几乎都是 html，那么 CDN 就没有好处，因为它不会缓存 html。启用 gzip 始终是一件好事，尽管在大多数情况下，您的托管服务提供商会涵盖这一点。使用 web 性能测量工具，如 websitetest.com 或webpagetest.org 来了解瓶颈是前端还是后端（服务器）。如果您看到第一个文件（主 html）需要很长时间（超过 1-2 秒），那么您确实需要在服务器上做更多的事情。如果您在其余文件上看到 80-90% 的时间，那么您知道您需要专注于前端，并且对服务器的任何更改都只会给您带来最小的好处。

那么后端该怎么做呢？取决于您的托管方式。如果您有超便宜的计划，请寻找更好的托管选项。

如果您像大多数网站一样，专注于前端是您看到显着加速的最佳选择。[查看http://yslow.org/](http://yslow.org/)上的最佳实践。遵循其中的大多数，您应该会看到非常显着的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T10:19:44.757

尝试使用 .htaccess 文件启用 gzip。

看到这个：

[http://salscode.com/web-resources/gzip-htaccess](http://salscode.com/web-resources/gzip-htaccess)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-20T08:03:04.003

请查看影响 WordPress 博客速度的不同因素的各种解释和解决方案。它可能有助于处理有助于提高速度的具体工作。

您还可以通过 wpclearfix 插件清理 wordpress 数据库，该插件将从数据库中删除不需要的修订和不需要的数据，这也将有助于减少数据库大小。

有关更多详细信息说明，您可以查看加速 WordPress 博客上的博客文章 - [http://www.blogtechie.com/speed-up-wordpress-blog-website/](http://www.blogtechie.com/speed-up-wordpress-blog-website/)

您也可以尝试延迟加载功能按需加载资源

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-21T00:26:27.570

为了在 Wordpress 中获得最佳性能，您需要以下内容：

1.  使用 Nginx，永远不要使用 Apache——它不能很好地扩展并且消耗大量内存，而 Nginx 的重量非常轻。如果您的主机仅提供 Apache，请更改主机。
2.  使用 CDN - cloudflare 有一个免费的 CDN 或 MaxCDN 是一项高级服务
3.  使用 W3 Total Cache 并设置页面缓存和 CDN。忽略其他设置，因为它们可能会导致与其他插件的兼容性问题。
4.  考虑使用 HHVM - 由 Facebook 创建的 Hip Hop 虚拟机，基本上使 PHP 成为一种编译语言。它与 Nginx 一起工作。它还不能与 Buddypress 一起使用，所以如果你有它，你需要等待。
5.  仔细选择您的主机 - Digital Ocean 提供基于 SSD 的 VPS 或 WP Engine 提供托管主机和许多性能提升（如 HHVM、Varnish 等）
6.  考虑设置 Varnish 以提高速度
7.  考虑设置 Memcached 以获得更多速度提升 - 在同一台服务器或不同的专用缓存服务器上
8.  分析插件的性能 - Query Monitor 和 P3 Plugin Profiler 对此非常有用，但最终最好的选择是 New Relic，它会在后台随时间分析性能。当有很多帖子时，一些插件的性能非常糟糕。

上面的提示将在几乎所有可能大小的 Wordpress 网站上为您提供亚秒级的速度，您可以想象。

这是设置 HHVM 的指南：

[http://www.affiliatewebdesigners.com/2015/01/14/setting-hhvm-wordpress/](http://www.affiliatewebdesigners.com/2015/01/14/setting-hhvm-wordpress/)

这是使用 Nginx 配置 Digital Ocean 的指南：

[http://www.affiliatewebdesigners.com/2014/11/20/setting-digital-ocean-wordpress/](http://www.affiliatewebdesigners.com/2014/11/20/setting-digital-ocean-wordpress/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-20T11:33:31.917

我们有很多选项可以在 Wordpress 上应用以提高速度，您需要在您的网站上应用以下几点。

1.  使用 CDN：内容交付网络 (CDN)
2.  缩小 CSS/JS 文件
3.  移除阻止渲染的 JavaScript
4.  应用缓存
5.  CSS 精灵
6.  在服务器上安装页面速度模块
7.  提高服务器响应时间
8.  在服务器上启用 GZIP 压缩
9.  应用 AJAX 加速
10.  添加 Expires 标头以利用浏览器缓存

[你可以在这里](https://deorwine.com/blog/improve-your-websites-google-page-speed/)查看完整的细节

# java - 在 Java 中处理构造函数

> ID：13981473
> 
> 赞同：0
> 
> 时间：2012-12-20T22:19:24.380
> 
> 标签：java

我仍在学习 Java，最近开始接触一些编程术语。

昨天我的领导告诉我，

对于所有这样的作业，

```
data.setTemp_c(obs.getCurrentWeather().getTempC());
data.setTemp_f(obs.getCurrentWeather().getTempF()); 
```

你能把它移到相应类的构造函数中，这样它就不会弄乱主循环吗？

我在程序中所做的是解析 JSON 响应并使用 Hibernate 存储在数据库中。

虽然我知道它必须做那个类的构造函数，但没有得到他想让我做的事情。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:22:22.510

老师希望你有一个构造函数`data`作为`obs`参数：

```
public Data(Obs obs) {
  final Weather currentWeather = obs.getCurrentWeather();
  setTemp_c(currentWeather.getTempC());
  setTemp_f(currentWeather.getTempF());
} 
```

然后，在您的主循环中，您只需说`new Data(obs);`

# sql - 在“分组依据”语句中选择满足特定条件的行

> ID：13981479
> 
> 赞同：1
> 
> 时间：2012-12-20T22:19:50.357
> 
> 标签：sql, ms-access

对于按“名称”分组的记录，如何选择（在 MSAccess 中）与“G”列中具有最小值的行对应的所有列 (AG)？这是一个示例表

```
ID Name A   B   C   D   E   F   G
1 CHRIS 30  -99 -99 0   0   0   239
2 CHRIS 30  -99 -99 0   0   0   233
3 CHRIS 30  -99 -99 0   0   0   120
4 CHRIS 30  -99 -99 0   0   0   41
5 CHRIS 40  1012    130 20  20  0   55
6 KEITH 55  1012    230 175 150 50  178
7 KEITH 55  1012    250 125 175 100 22
8 KEITH 35  1012    270 25  25  0   76
9 KEITH 40  1012    320 100 100 0   90 
```

结果将是：

```
CHRIS   30  -99 -99 0   0   0   41 
```

和

```
KEITH   55  1012    250 125 175 100 22 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:31:02.233

看看这是否会引导你朝着正确的方向前进。如果您有一个 UserId 而不是名称来 JOIN 会更好，因为您不希望最终在连接中出现重复项。

```
SELECT
    Table1.Name 
    , Table1.A
    , Table1.B
    , Table1.G
FROM
    Table1 
INNER JOIN Table1 as Table2 ON Table2.Name = Table1.Name
GROUP BY Table1.Name , Table1.A, Table1.B, Table1.G
HAVING Table1.G = MIN(Table2.G) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T03:50:57.890

`G`如果每个的最小值只有一行，或者当最小值重复时`Name`您愿意为 a 接受多于一行，则 SQL 并不太难。使用返回最小值的子查询并将其连接到您的示例表。`Name``G``G``Name`

```
SELECT
    smp.Name,
    smp.A,
    smp.B,
    smp.C,
    smp.D,
    smp.E,
    smp.F,
    smp.G
FROM
    SampleTable AS smp
    INNER JOIN (
        SELECT
            [Name],
            Min(G) AS MinOfG
        FROM SampleTable
        GROUP BY [Name]
    ) AS sub
    ON
            (smp.Name = sub.Name)
        AND (smp.G = sub.MinOfG); 
```

但是，如果您只需要一行，`Name`即使`G`重复最小值，它也会更具挑战性`Name`。在这种情况下，您可以包含另一个子查询级别，该级别返回每个plus minimum`ID`组合的最小值。并使用子查询和最小值加入您的示例表。`Name``G``Name``ID`

```
SELECT
    smp.Name,
    smp.A,
    smp.B,
    smp.C,
    smp.D,
    smp.E,
    smp.F,
    smp.G
FROM
    SampleTable AS smp
    INNER JOIN (
        SELECT
            sub1.Name,
            CLng(
                DMin(
                    "ID",
                    "SampleTable",
                    "[Name]='" & [sub1].[Name]
                        & "' AND G=" & [sub1].[MinOfG]
                    )
                ) AS MinOfID
        FROM
            (
                SELECT
                    [Name],
                    Min(G) AS MinOfG
                FROM SampleTable
                GROUP BY [Name]
            ) AS sub1
    ) AS sub2
    ON
            (smp.Name = sub2.Name)
        AND (smp.ID = sub2.MinOfID); 
```

我在 Access 2007 中测试了这两个查询，您的示例数据保存在名为`SampleTable`. 两者都返回了您要求的结果集。

注意我`CLng()`在第二个查询中使用了`DMin()`as的返回值`Long`。如果没有`CLng()`，`MinOfG`则返回的值`String`在连接中不起作用。

# java - 使用纯 Java 代码打开/弹出 DVD

> ID：13981485
> 
> 赞同：1
> 
> 时间：2012-12-20T22:20:30.657
> 
> 标签：java

是否有任何可能如何使用纯 JAVA 代码打开 CD/DVD ROM？还是必须执行例如 `.vbs`脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:22:24.267

[我在这里](http://www.rgagnon.com/javadetails/java-0574.html)找到了一些样本。但是，没有测试它，所以不知道它是否真的有效。

Windows 版本也可能很重要（我假设您在提到 Visual Basic 脚本时指的是 Windows）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T23:24:51.393

不。Java 不提供用于弹出光媒体驱动器的抽象。您必须找到一个非纯 Java 解决方案，例如[Tom 所描述](https://stackoverflow.com/a/13982104/24396)的。

# c# - 如何在 ravendb 中设置唯一标识

> ID：13981487
> 
> 赞同：2
> 
> 时间：2012-12-20T22:20:32.987
> 
> 标签：c#, ravendb

我正在学习 RavenDB 并熟悉事物的工作方式。我不明白的一件事是如何将 raven 创建的 id 保存到属性中。

```
public class User
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string ID { get; set; } //This will be null when I save object to DB I want it to be same as generated
}

[TestMethod]
public void TestSaving()
{
    using (var session = documentStore.OpenSession())
    {
        var user = new User { FirstName = "John", LastName = "Doe" };
        session.Store(user);
        session.SaveChanges(); //I want that property to save that id that raven created: Users/65
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T02:50:22.140

我认为 Raven 中查找身份属性的默认约定是“Id”并且区分大小写。尝试将您的属性重命名为 ID，而不是 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:07:25.843

再看一遍。拨打电话后，`session.Store(user)`您会立即发现该`ID`物业已经为您设置好了。甚至在`SaveChanges()`被调用之前。

**更新**

对不起，我没有注意到你的财产的外壳。Raven 的默认约定是查找名为“Id”的属性——区分大小写。如果你想要一个不同的约定，你可以改变 raven 的默认值：

```
documentStore.Conventions.FindIdentityProperty = x => x.Name == "ID"; 
```

[您可以在此处](http://ravendb.net/docs/client-api/connecting-to-a-ravendb-datastore#conventions)阅读有关默认约定的更多信息

# jquery - Twitter Bootstrap 在 g:form 中切换按钮值

> ID：13981488
> 
> 赞同：0
> 
> 时间：2012-12-20T22:20:34.903
> 
> 标签：jquery, jquery-ui, grails, twitter-bootstrap, gsp

我有以下问题。我有一个名为 Car 的域，另一个名为 CarType。现在 Car 有很多 CarTypes，所以在创建新 Car 时，您可以添加多个 CarTypes。

在我的创建视图中，我想删除 Grails 为我生成的多选。

我想我会让它更时尚一点，所以我使用 Twitter Bootstrap css 创建了一个按钮组，它看起来不错。

现在我把它全部放在一个表单中并替换了默认的多选，我有点困惑，提交被切换/选择的按钮的值的最佳方式是什么。

我像疯子一样用谷歌搜索，但并没有真正找到适合我的解决方案。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T03:40:42.790

您可以做的是保留生成的多选并使用 CSS 属性隐藏它。然后使用在每个按钮单击时调用的 Javascript 函数，在多选中选择单击的项目（使用 CarType id）。

```
// select an item
$("#multiple_select_name option:contains('1')").attr("selected","selected");
// remove a selected item
$("#multiple_select_name option:contains('1')").removeAttr("selected"); 
```

这样您就不必更改控制器。

# vbscript - 协助 VBScript 监视文件夹中的文件，然后重命名和移动它们

> ID：13981490
> 
> 赞同：1
> 
> 时间：2012-12-20T22:20:43.690
> 
> 标签：vbscript, monitoring, rename, move

所以首先，我很抱歉，因为我在 VBScript 方面完全是个菜鸟。我一直在谷歌搜索并尝试过去几天找到的代码示例，但我似乎无法将这些部分组合在一起。

我需要编写的代码的目的是监视文件夹中的文件。将文件写入特定文件夹时，我需要能够获取文件名并将其缩短到少于 80 个字符，然后将其移动到另一个文件夹，将原始文件夹留空。如果文件恰好在文件名中已经包含少于 80 个字符，那么我宁愿保留名称并将其移动到不同的文件夹。放置在受监视文件夹中的文件名具有相当随机的名称。

我发现了很多如何使用 VBScript 重命名文件的示例，但这些都表明您已经有了文件名。

我还找到了几个如何使用 WMI 事件监视文件夹的示例，但我还没有弄清楚如何将它们联系在一起。

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:57:17.680

这将为您提供目录中所有文件的名称。

```
 Dim fso, folder, files, sFolder
    Set fso = CreateObject("Scripting.FileSystemObject")
    sFolder = "C:\DOCUME~1\Philip\LOCALS~1\Temp"
    Set folder = fso.GetFolder(sFolder)
    Set files = folder.Files
    For each k In files
        WScript.Echo k
    Next 
```

# r - 在 R 的 for 循环中使用对象创建变量名称

> ID：13981494
> 
> 赞同：1
> 
> 时间：2012-12-20T22:20:57.720
> 
> 标签：r

我认为这可能是一个非常简单的问题，但我一生都无法在网上或我用来学习 R 的书中找到答案。

我正在尝试使用基于现有矩阵向量中的值命名的变量创建一个表。这是向量或兴趣如何出现在表中的示例（名为“阈值”），我正在使用变量名称出现的位置 -

```
varname       threshold_1_name threshold_1_value
1   BMXBMI    high             25
2  BMXCALF    low              40
3    BMXHT    high             180 
4   BMXLEG    low              40   
5   BMXSUB    high             32  
6 BMXTHICR    high             65 
```

该表中有 81 条记录，我想做这样的事情：

```
for (i in 1:81) {
  varname1 <- paste(thresholds$varname[i], thresholds$threshold_1_name[i], sep = "_")
  newtable$[varname1] <- ifelse((bigTable$[thresholds$varname[i]] < thresholds$threshold_1_value[i]),1,0)
} 
```

这将创建包含 81 个列的“newtable”，其中前六列将命名为 BMXBMI_high、BMXCALF_low、BMXHT_high、BMXLEG_low、BMXSUB_high、BMXTHICR_high。我的 ifelse 语句似乎很好——我在循环之外对其进行了测试，并且它有效。我想我使用不正确的语法来创建变量名。

任何关于我应该做什么或我应该如何寻找答案的建议将不胜感激。我认为我无法找到答案的部分原因是我使用了不正确的词汇/搜索词。谢谢！

@Ben- 正如您似乎预测的那样，我的 ifelse 行没有问题。这是一个 bigTable 示例（我在上面的“阈值”示例中添加了一个列），以帮助您提供一些关于如何在那里对问题进行排序的建议。我正在尝试将新变量中的值编码为 0/1，具体取决于 bigTable 中的值是高于还是低于“阈值”中的值

bigTable 示例：

```
 BMXHT BMXBMI BMXLEG BMXCALF BMXWAIST BMXTHICR BMXTRI BMXSUB
1 174.0  24.90     NA    37.5     98.0       NA   12.8   20.4
2 178.3  29.10   45.2    42.6     99.9     56.2   17.4   38.6
3 162.0  22.56   39.7    34.0     81.6     47.0   20.3   16.8
4 162.9  29.39   43.0    37.2     90.7     55.7   26.4   34.2
5 190.1  30.94   46.6    43.7    108.0     64.0   15.5   26.6
6 180.0  30.62   46.0    40.5    112.8     57.1   26.2   NA 
```

当我尝试在一行中编写所有内容时，我不断收到一条错误消息，提示该代码仅读取第一个条目，因此我现在正在尝试以下代码段，该代码段效率极低且仍然无法正常工作（前两行是你之前发送的）-

```
varname1 <- paste(thresholds$varname, thresholds$threshold_1_name, sep = "_")
bigTable[varname1[1:5]] <- NA

for (i in 1:5) {
  value <- thresholds$threshold_1_value[i]
  var <- thresholds$varname[i]
  newvar <- varname1[i]
  for(j in 1:10) {
    if(bigTable[var[j]] > value) {bigTable[newvar] = 1}
    else if (bigTable[var[j]] <= value) {bigTable[newvar] = 0}
  }
} 
```

再次，非常感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:51:43.357

这是对“如何使用数据框中的变量将许多列添加到数据框中”的问题的答案，这似乎是原始问题的一部分（在我们看到`bigTable`看起来像之前，不能对其余部分做太多事情）：

```
# prepare data
thresholds <- read.table(text = "varname       threshold_1_name 
   BMXBMI    high 
  BMXCALF    low
    BMXHT    high
   BMXLEG    low
   BMXSUB    high
 BMXTHICR    high", header = TRUE) 
```

为了追求问题中的循环，我们可以使用它根据现有数据创建新的列名

```
varname1 <- NULL
for (i in 1:nrow(thresholds) {
  varname1[i] <- paste(thresholds$varname[i], thresholds$threshold_1_name[i], sep = "_")
} 
```

但请注意，这里不需要循环，基本向量运算将得到与循环相同的结果：

```
varname1 <- paste(thresholds$varname, thresholds$threshold_1_name, sep = "_") 
```

无论如何，无论您采用哪种方式，您都可以将名称添加为列名，如下所示：

```
# add new columns to a new dataframe
newtable <- data.frame(setNames(replicate(length(varname1), numeric(0), simplify = F), varname1)) 
```

这是输出，新列的名称是现有变量的函数：

```
 str(newtable)
'data.frame':   0 obs. of  6 variables:
 $ BMXBMI_high  : num 
 $ BMXCALF_low  : num 
 $ BMXHT_high   : num 
 $ BMXLEG_low   : num 
 $ BMXSUB_high  : num 
 $ BMXTHICR_high: num 
```

# dns - 使用 cloudflare 将 CNAME 分配给我在亚马逊 S3 中的静态网站存储桶

> ID：13981496
> 
> 赞同：3
> 
> 时间：2012-12-20T22:21:10.333
> 
> 标签：dns, amazon-web-services, amazon-s3, cloudflare

我正在为我的兄弟（我的第一个网站）创建一个网站，并决定通过 amazon s3 托管整个网站。到目前为止，我已经完成了通常的设置：

1.  使用所需域 (www.website.com) 的名称创建存储桶。

2.  将存储桶设为网站并分配索引文档和错误页面。

3.  上传所有内容并公开。

该网站通过存储桶端点链接[http://www.website.com.s3-website-us-east-1.amazonaws.com/运行良好](http://www.website.com.s3-website-us-east-1.amazonaws.com/)

按照有关 stackoverflow 的其他教程，然后我尝试通过我的 DNS 提供商创建一个 CNAME。不幸的是，我的域名注册商 (1and1.com) 不允许我输入亚马逊端点链接，说 url 太长。

在我所关注的教程的评论部分的更下方是来自使用 cloudflare.com 解决此问题的人的评论。

因此，我注册了 cloudflare.com，并通过 1and1.com 将域名服务器更改为 cloudflare cloudflare。在一切传播之后，我尝试在 cloudflare 上创建一个 CNAME 到亚马逊存储桶端点，但我无法让它工作。

如何在我的域名上获取我的 amazon s3 存储桶？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-16T16:37:37.147

您是否从我们的知识库中查看/查看过这些详细信息？[https://support.cloudflare.com/hc/en-us/articles/200168926-How-do-I-use-CloudFlare-with-Amazon-s-S3-Service-](https://support.cloudflare.com/hc/en-us/articles/200168926-How-do-I-use-CloudFlare-with-Amazon-s-S3-Service-)

它包括正确指向 Amazon S3 存储桶的步骤。不过，出于隐私原因，我建议您直接通过[https://support.cloudflare.com](https://support.cloudflare.com)向 CloudFlare 开一张支持票， 以便我们的支持团队可以查看您帐户的具体详细信息以提供建议。

ps 免责声明：我在 CloudFlare 工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-04T08:39:10.477

自从提出这个问题以来已经有一段时间了，但截至 2019 年 7 月，如果有人在亚马逊 AWS s3 存储桶中为静态网站寻找 CloudFlare CNAME 设置，请参考下面的屏幕截图。

[![在此处输入图像描述](../Images/19081ee738262a7ccb01023be9aefbdf.png)](https://i.stack.imgur.com/vokvU.png)

# c++ - 从命令行编译Visual C++

> ID：13981497
> 
> 赞同：1
> 
> 时间：2012-12-20T22:21:12.003
> 
> 标签：c++, windows, visual-studio-2010

我正在尝试使用以下命令从命令行编译 C++ 文件：

```
C:\"Program Files (x86)"\"Microsoft Visual Studio 10.0"\VC\bin\x86_amd64\CL /FAcs C:\Users\X\Documents\"Visual Studio 2010"\Projects\"Project File"\My_Project\HELLO.CPP 
```

但我得到了错误：

> 程序无法启动，因为您的计算机缺少 mspdb100.dll。尝试重新安装程序以解决此问题。

我必须进行错误的命令行调用。有人可以帮忙吗？

编辑我将从 C# 应用程序调用它，创建一个 Process 对象，然后执行。有没有一种方法可以确保从 C# 应用程序/从 C# 代码执行另一个 .bat 脚本中设置所有变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:24:35.117

在编译器安装中，找到名为`vsvars32.bat`. 运行。问题解决了。（抱歉，没有关于它的确切位置的详细信息；我现在不在我的 Windows 机器上）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:22:42.190

这不是命令行，而是当您启动 MSVS 时，它还会设置一些环境变量和所需二进制文件的路径。

从 MSVS 启动组启动命令提示符 - 应该已经设置了正确的路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:30:24.327

您可以使用 Pete Becker 的运行解决方案`vsvars32.bat`（在您用于编译的命令提示符中），也可以使用预先设置了所有变量的 MSVS 命令提示符。

# python - 如何获取在 python 中调用函数的脚本的名称？

> ID：13981500
> 
> 赞同：1
> 
> 时间：2012-12-20T22:21:30.203
> 
> 标签：python

我知道它`__file__`包含包含代码的文件名，但是有没有办法获取调用函数的脚本/文件的名称？

如果我有一个名为`filenametest_b.py`：

```
def printFilename():
    print(__file__) 
```

我将函数导入`filenametest_a.py`：

```
from filenametest_b import *

printFilename() 
```

我得到：

```
C:\Users\a150495>python filenametest_a.py
C:\Users\a150495\filenametest_b.py 
```

我可以在文件中做些什么`b`来打印`a`文件名吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:23:18.663

您可以打印`sys.argv[0]`以获取脚本文件名。

要获取调用者的文件名，您需要使用该[`sys._getframe()`函数](http://docs.python.org/2/library/sys.html#sys._getframe)来获取调用帧，然后您可以从中检索文件名：

```
import inspect, sys

print inspect.getsourcefile(sys, sys._getframe(1)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:25:39.850

问得太早了，我想我刚刚解决了。

我只是在`inspect`模块中环顾四周：

我将此添加到`filenametest_b.py`文件中：

```
def printCaller():
    frame,filename,line_number,function_name,lines,index=\
        inspect.getouterframes(inspect.currentframe())[1]
    print(frame,filename,line_number,function_name,lines,index) 
```

这给出了这个：

```
C:\Users\a150495\filenametest_b.py
(<frame object at 0x000000000231D608>, 'filenametest_a.py', 5, '<module>', ['printCaller()\n'], 0) 
```

所以这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:30:19.957

```
def printFilename():
    import traceback 
    print traceback.extract_stack()[-2][0] 
```

# windows - 在 Adob e AIR 中，如何摆脱 WindowedApplication 的 titleIcon？

> ID：13981506
> 
> 赞同：1
> 
> 时间：2012-12-20T22:22:04.100
> 
> 标签：windows, apache-flex, air, flex-spark

我发现您应该如何更改 Spark WindowedApplication 左上角的图像，但我似乎无法完全摆脱这个东西。将其设置为 null，尝试对其调用 removeElement 等。是否有某种方法可以通过 Flex 使 Windows 7 和类似操作系统在 AIR 的左上角不显示任何类型的图标或下拉菜单应用程序的窗口？谢谢！

编辑：这就是我所说的。如果可能的话，我应该删除左侧的那个图标。

![在此处输入图像描述](../Images/45a3a43e8a649bc661c8ff0992b188d9.png)

# nosql - 具有大量订阅者的 NoSQL 复制

> ID：13981515
> 
> 赞同：0
> 
> 时间：2012-12-20T22:22:39.783
> 
> 标签：nosql, replication

是否有可以处理大量只读订阅者（最多 200 个）的 NoSQL 实现（首选 C/C++/Erlang 实现）？

谢谢迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T11:48:37.223

200 太小了。任何实现都应该处理这个问题。

# javascript - JavaScript mouseover/mouseleave 导致在某些浏览器上闪烁 (IE & FF)

> ID：13981517
> 
> 赞同：-2
> 
> 时间：2012-12-20T22:22:42.753
> 
> 标签：javascript, css, internet-explorer, web

我在设计一个网站时遇到了问题。不幸的是，我陷入了没有首先为 Internet Explorer 设计它的陷阱，而是坚持使用更友好的浏览器，例如 Chrome。现在我在 IE 中查看它，我发现了一个让我有点傻眼的问题。

菜单链接在这里-

[http://mydomain.com/apassociates/page/home](http://mydomain.com/apassociates/page/home)

...闪烁和崩溃。如果您想查看它的外观，请在 Chrome 中查看。

我不是专业的 Web 开发人员，我怀疑这些问题对于更有经验的开发人员来说可能是基本的，但我实际上不确定从哪里开始。

有没有人对这个问题有任何想法或指示？

* * *

因此，为了根据评论中的建议尝试帮助关注这一点，这里是 HTML-

```
<div id='home-pictures'>

    <a href='http://mydomain.com/apassociates/page/conservatory'>
        <div id='home-1'>
            <span class='home-link'>Traditional</span>
        </div>
    </a>
    <a href='http://mydomain.com/apassociates/page/blackbrookhouse'>
        <div id='home-2'>
            <span class='home-link'>Commercial</span>
        </div>
    </a>
    <a href='http://mydomain.com/apassociates/page/floodproof'>
        <div id='home-3'>
            <span class='home-link'>Innovative</span>
        </div>
    </a>
</div> 
```

这里的javascript可以在鼠标悬停时替换背景图像-

```
// home links
$('div#home-1').mouseover(function () {
  $('div#home-1').css('background-image', 'url(/apassociates/images/content/devonhouse-caption-wash.png)');
});

$('div#home-1').mouseleave(function () {
  $('div#home-1').css('background-image', 'url(/apassociates/images/content/devonhouse-caption.png)');
}); 
```

我只包含了第一个链接的代码，其他代码只是这些带有不同身份标签的重复。

我想知道我是否会更好地将每个链接放入其自己的固定尺寸的 div 中。可以防止崩溃/闪烁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:24:53.593

我设法隔离了您的问题并在[这个小提琴](http://jsfiddle.net/dreamyguy/zWwdH/1/)中解决了它。

HTML：

```
<div id="home-pictures">
    <a href="http://mikloswe.nextmp.net/apassociates/page/conservatory">
        <div id="home-1" style="background-image: url(http://mikloswe.nextmp.net/apassociates/images/content/devonhouse-caption.png);">
            <span class="home-link">Traditional</span>
        </div>
    </a>
    <a href="http://mikloswe.nextmp.net/apassociates/page/blackbrookhouse">
        <div id="home-2" style="background-image: url(http://mikloswe.nextmp.net/apassociates/images/content/carehome-caption.png);">
            <span class="home-link">Commercial</span>
        </div>
    </a>
    <a href="http://mikloswe.nextmp.net/apassociates/page/floodproof">
        <div id="home-3" style="background-image: url(http://mikloswe.nextmp.net/apassociates/images/content/submersible-caption.png);">
            <span class="home-link">Innovative</span>
        </div>
    </a>
</div> 
```

CSS：

```
#home-pictures {
    height: 250px;
}
#home-pictures {
    text-align: center;
}
#home-pictures a:link,
#home-pictures a:visited {
    color: #B43104;
    display: block;
    text-decoration: none;
}
#home-1, #home-2, #home-3 {
    margin-left: 20px;
    float: left;
    height: 256px;
    width: 285px;
    zoom: 1;
}
.home-link {
    color: #B43104;
    display: block;
    float: left;
    font-family: 'book antiqua', palatino, serif;
    font-size: 24px;
    margin-left: 15px;
    position: relative;
    top: 220px;
} 
```

JavaScript：

```
// home links
$('div#home-1, div#home-2, div#home-3').mouseenter(function () {
    $(this).css({
        'filter' : 'alpha(opacity=50)',
        'opacity' : '0.5'
    });
}).mouseleave(function () {
  $(this).css({
        'filter' : 'alpha(opacity=100)',
        'opacity' : '1.0'
    });
}); 
```

我更改了 javascript，使其不依赖于悬停的图像，而是依赖于不透明度。这将影响图像下方的字体，因为它也在 div 中，但也许您可以在其中的每一个中都有一个专用的 div（如“div.image”）并将背景和不透明度设置为仅图像而不是整个物品...

更新：

不透明度在 IE 上可能很棘手。更新了 css 和 javascript，使其也可以在 IE 上运行……小提琴也得到了更新。跨浏览器不透明度取自[这篇文章](http://css-tricks.com/css-transparency-settings-for-all-broswers/)，我一直在回来......

# jquery - Jörn Zaefferer 的 jQuery Validate：如何配置规则以接受名称[#]

> ID：13981518
> 
> 赞同：0
> 
> 时间：2012-12-20T22:22:43.773
> 
> 标签：jquery, jquery-validate

这`form`是一个视图车。购物者可以更改任何商品的数量。每个`qty`输入都`name="quantity[row_id]"`带有`row_id`= `0`, `1`, `2`... 等。

我希望该值是必需的和数字的（读取：整数）。我试过这个：

```
$("#my-view-cart").validate({
  rules: {
    quantity: {
      required: true,
      digits: true
    }
  }
}); 
```

我已经尝试过规则，`quantity[*]`但这`quantity*`是徒劳的。

如果插件的文档中有一个示例，我没有看到它。

或者也许有另一种方法可以用这个插件做到这一点？我在产品添加到购物车页面上使用了上述规则，但这只是一个输入。有多个输入我被卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:33:09.650

> “或者也许有另一种方法可以用这个插件做到这一点？”

使用内置`rules()`方法添加规则并通过`class`. [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

注意：调用*后***必须**调用该方法。*`.validate()`*

 ***HTML：**

```
<form id="form">
    <input type="text" class="myclass" name="whatever" />
    <input type="text" class="myclass" name="something" />
    <input type="text" class="myclass" name="another" />
</form> 
```

**jQuery：**

```
$("#form").validate({
    // my options
});

// the following method must come AFTER .validate()
$('#form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        digits: true,
        messages: {
            required: "Required input",
            digits: "Please only enter digits"
        }
    });
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/kSFKE/)

* * *

**编辑：**

OP的评论：

> “如果显示错误，我不想允许点击结帐。有什么想法吗？”

您只需使用[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)返回一个布尔值来测试表单是否通过验证。就像是...

```
if ($('#form').valid()) {
    // form passes validation, allow your click
} else {
    // form fails validation, do something else
} 
```

如果这不是您所需要的，则有必要发布有关此无关问题的新问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:52:31.370

您需要将`name`输入的引号括起来：

```
$("#my-view-cart").validate({
  rules: {
    "quantity[1]": {
      required: true,
      digits: true
    }
  }
}); 
```

或者按照 Kevin B 在评论中所说的那样做并添加`class="required digits"`到输入元素中。*

# java - Android：具有动态颜色的 ListView

> ID：13981520
> 
> 赞同：0
> 
> 时间：2012-12-20T22:22:53.897
> 
> 标签：java, android, android-layout

我正在尝试制作一个 ListView ，它代表火车线路列表，每条线路都有不同的颜色。所以目前我有这个：

```
public class TrainOverview extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,
            R.layout.list_item, R.id.label, TrainLines.lines);
        this.setListAdapter(arrayAdapter);
    }
} 
```

XML 仅由线性布局中的`list_item`两个文本标签组成，我希望其中一个能够动态更改颜色。`TrainLines.lines`目前只是一个`String[]`，但我想让它成为一个非常简单的类`name`和`colour`属性。然后，我希望能够创建一个显示火车线路名称和适当颜色的 ListView。

实现这一目标的最佳方法是什么？我希望我的问题是有道理的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:48:38.040

我建议扩展 BaseAdapter，它相对容易做并且在涉及各种视图/行布局时非常有用（包括更改 TextView 的颜色）

方法`getViewTypeCount()`和`getItemViewType(position)`可以很容易地覆盖，为您提供尽可能多的不同行布局。

这可能根本不是您的目标，但很容易知道。

但是，我相信您将需要一个 custom `BaseAdapter`，在其中覆盖该`getView(int position, View convertView, ViewGroup parent)`方法。

`TextView`如上所述，这将允许您访问每一行。解决这个问题的一个好方法是实现 ViewHolder 模式。

您可以创建一个简单的 ViewHolder 对象，即。

```
private static class ViewHolder
{
     TextView textView;
} 
```

然后在覆盖的 getView() 中使用它

```
 // Get that view
    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {               
        if (convertView == null)
        {
            if (getItemViewType(position) == 0)
            {
                convertView = inflater.inflate(R.layout.rowlayouta, null);
                viewHolder = new ViewHolder();
                viewHolder.textView = (TextView) convertView.findViewById(R.id.tvCommonText1);
                convertView.setTag(viewHolder);
            }
            else
            {
                convertView = inflater.inflate(R.layout.rowlayoutb, null);
                viewHolder = new ViewHolder();
                viewHolder.textView = (TextView) convertView.findViewById(R.id.tvCommonText2);
                convertView.setTag(viewHolder);
            }
        }

        else 
            viewHolder = (ViewHolder) convertView.getTag(); // Or if View is existing

        viewHolder.textView.setText(strings.get(position));

        return convertView;         
    } 
```

这只是我如何膨胀两种不同的行布局的一个例子，你可以取出第一个。

您可以看到，如果现在有分配给该行的 ViewHolder 对象，则会创建一个新的 ViewHolder 对象，其 TextView 设置为当前 convertView 的引用 - 实际上是当前行 View。然后，现在包含对该特定行 TextView 的引用的 ViewHolder 对象基本上使用该`setTag(object)`方法附加到该 convertView / 行。

如果它已经有标签，则使用 getTag() 方法获取该标签，而不是使用新引用创建新对象。最重要的是，没有夸大新视图，只是重用旧视图。

然后，这允许您通过引用当前 ViewHolder 对象来设置您想要的 TextView 属性，该对象持有对该特定 TextView 的引用。

正如您所看到的，我将文本更改为每个 TextView，同时反映正在显示的行/转换视图。（本身非常有用）。您需要做的就是以相同的方式引用当前的 ViewHolder 并使用 setTextColor() 方法。

也许这有点拖了。但希望这样您将能够实现您所询问的内容，并且您知道为什么它是一个很好的实现。

PS 有关 ListViews 和适配器如何组合在一起的更多信息（考虑`getView()`这里的方法），本教程非常有帮助..

[http://android.amberfog.com/?p=296](http://android.amberfog.com/?p=296)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:25:13.730

我认为你可以使用类中`setTextColor()`声明的方法`TextView`。[在此处](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28int%29)查看文档。

我假设动态颜色是指以编程方式修改`TextView`s 的颜色。

如果您正在寻找自定义阵列适配器，请参阅[本](http://www.vogella.com/articles/AndroidListView/article.html)教程。

# asp.net-mvc - 使用实体框架 4.1 执行更新/插入存储过程？

> ID：13981523
> 
> 赞同：3
> 
> 时间：2012-12-20T22:23:04.617
> 
> 标签：asp.net-mvc, stored-procedures, entity-framework-4.1

我试图从实体框架 4.1（mvc 3 web 应用程序）调用存储过程。它没有抛出异常，但插入/更新没有发生？当我手动执行存储过程时，它可以工作。

```
CREATE PROCEDURE [dbo].[SP_AddUpdateResponse]
    @QuestionID int,
    @UserID int,
    @AnswerValue nvarchar(2000),
    @ReviewID int
AS

MERGE [dbo].[Responses] AS [Target]
USING (SELECT @QuestionID, @UserID, @AnswerValue, @ReviewID)
   AS [Source] ([QuestionID], [UserID], [AnswerValue], [ReviewID] )
ON [Target].[QuestionID] = [Source].[QuestionID]
AND [Target].[ReviewID] = [Source].[ReviewID]

WHEN MATCHED THEN
    UPDATE SET [AnswerValue] = [Source].[AnswerValue]
WHEN NOT MATCHED THEN
    INSERT ( [QuestionID], [UserID], [AnswerValue], [ReviewID] )
    VALUES ( [Source].[QuestionID], [Source].[UserID], 
             [Source].[AnswerValue], [Source].[ReviewID] ); 
```

调用该过程的代码：

```
using System.Data.SqlClient;
using System.Data.Metadata.Edm;

using (var db = new NexGenContext())
            {
                foreach (var key in formCollection.AllKeys)
                {
                    var answer = formCollection[key];
                    int questionId = Convert.ToInt32(key);
                    db.Database.SqlQuery<EntityType>(
                        "EXEC SP_AddUpdateResponse @QuestionID, @UserID, @AnswerValue, @ReviewID",
                        new SqlParameter("@QuestionID", questionId),
                        new SqlParameter("@UserID", 9999),
                        new SqlParameter("@AnswerValue", answer),
                        new SqlParameter("@ReviewID", id)
                    );                         
                }
            } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T23:03:09.950

尝试使用`ExecuteSqlCommand` 而不是`SqlQuery`

```
db.Database.ExecuteSqlCommand(
                            "EXEC SP_AddUpdateResponse @QuestionID, @UserID, @AnswerValue, @ReviewID",
                            new SqlParameter("@QuestionID", questionId),
                            new SqlParameter("@UserID", 9999),
                            new SqlParameter("@AnswerValue", answer),
                            new SqlParameter("@ReviewID", id)
                        ); 
```

在`SqlQuery`方法的描述中说：“使用方法返回由上下文跟踪的实体”，因此您只能将其用于`SELECT`查询。

# android - Android：主题 ContextMenu 项目选择

> ID：13981530
> 
> 赞同：2
> 
> 时间：2012-12-20T22:23:23.843
> 
> 标签：android, themes, contextmenu, selector

如何在 ContextMenu 中为列表选择器设置主题？对于 ListViews，我使用了此处描述的方式：

[http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/](http://brainflush.wordpress.com/2009/03/15/understanding-android-themes-and-styles/)

所以我将创建的样式分配给我的主题，如下所示：

```
<style name="Theme...." parent="@android:style/Theme.Light">
    <item name="android:listViewStyle">@style/ListView</item>
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:56:05.713

尝试[在 Android 中覆盖上下文菜单颜色](https://stackoverflow.com/questions/4604562/override-context-menu-colors-in-android)，看看是否有帮助。它说您不能覆盖标准的上下文菜单选择器，但继续提供长按上下文的代码。

为了主题任何列表项，我在列表 xml 上分配了一个背景，例如 android:background="@layout/customshape，自定义形状类似于：

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:shape="rectangle"> 
<gradient android:startColor="@color/white" 
      android:endColor="@color/light_grey_background" 
      android:angle="270"/> 
<corners 
android:bottomRightRadius="7dp" 
android:bottomLeftRadius="7dp" 
android:topLeftRadius="7dp" 
android:topRightRadius="7dp"/> 
</shape> 
```

我从列表项 .xml 中调用它，例如：

```
 <LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:paddingTop="2dip"
 android:paddingBottom="2dip"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:orientation="vertical"
 >

 <LinearLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:background="@layout/customrecipeshape"
     android:orientation="horizontal" >

 <ImageView 
     android:id="@+id/listicon" 
     android:layout_width="34px" 
     android:layout_height="wrap_content" 
     android:src="@drawable/icon_red" 
 />
 <TextView android:id="@+id/thing1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textColor="@color/black"
     android:textAppearance="?android:attr/textAppearanceSmall"/>    

 <TextView android:id="@+id/thing2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="20px" 
        android:textColor="@color/grey21"
        android:textAppearance="?android:attr/textAppearanceSmall"/>
 <TextView 
     android:id="@+id/thing3"

     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:textColor="@color/grey21"
     android:textAppearance="?android:attr/textAppearanceSmall"
     />

  </LinearLayout> 
```

如此处所述：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/GY9DFX2H-Bc](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/GY9DFX2H-Bc)

您不能覆盖自定义上下文菜单，但您可以使用列表视图和警报对话框创建自己的菜单。

# android - 开发石头、纸、剪刀、蜥蜴、Spock 问题

> ID：13981533
> 
> 赞同：1
> 
> 时间：2012-12-20T22:23:26.073
> 
> 标签：android

我今天一直在开发这个应用程序，但我似乎无法弄清楚代码有什么问题。

当我检查时，没有语法错误。但是当我尝试运行它并调试它时，它说

```
"Source not found" on "ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 2106` 
```

它让我可以选择另一条路径，但唯一可用的是默认设置。我编码错了吗？我能做些什么来解决这个问题？

这是日志：

```
12-20 22:12:29.722: I/System.out(1518): debugger has settled (1479) 
12-20 22:12:30.172: W/Trace(1518): Unexpected value from nativeGetEnabledTags: 0 
12-20 22:12:30.222: W/Trace(1518): Unexpected value from nativeGetEnabledTags: 0 
```

这是控制台错误：

```
[2012-12-20 17:19:45 - rockPaperScissorLizardSpock] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.rockpaperscissorlizardspock/.MainActivity }
[2012-12-20 17:19:45 - rockPaperScissorLizardSpock] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

这是我的源文件：

```
package com.example.rockpaperscissorlizardspock;
import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.*;
import android.view.View.OnClickListener;

public class rockpaperscissorlizardspock extends Activity {
    /** Called when the activity is first created. */

    private TextView resultText;
    private Button play, reset;
    private ImageButton scissors, paper, rock, lizard, spock;
    private int paperimg, paper_pressedimg, scissorsimg, scissors_pressedimg,     rockimg, rock_pressedimg, lizardimg, lizard_pressedimg, spockimg, spock_pressedimg;
        private ImageView compSciss, compPaper, compRock, compLiz, compSpock;
    Random rand = new Random();
    int compChoice = 0;
    String pChoice ="";
    String cChoice = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Initialize();
    }

    /** initialize all of the components*/
     private void Initialize()
    {
        play = (Button) findViewById(R.id.button1);
        reset = (Button) findViewById(R.id.button2);
        resultText = (TextView) findViewById(R.id.resultText);
        lizard = (ImageButton) findViewById(R.id.imageButton4);
        spock = (ImageButton) findViewById(R.id.imageButton5);
        scissors = (ImageButton) findViewById(R.id.imageButton3);
        paper = (ImageButton) findViewById(R.id.imageButton2);
        rock = (ImageButton) findViewById(R.id.imageButton1);
        compSciss = (ImageView) findViewById(R.id.computerScissors);
        compPaper = (ImageView) findViewById(R.id.computerPaper);
        compRock = (ImageView) findViewById(R.id.computerRock);
        spockimg = R.raw.spock;
        spock_pressedimg = R.raw.spock_pressed;
        lizardimg = R.raw.lizard;
        lizard_pressedimg = R.raw.lizard_pressed;
        paperimg = R.raw.paper;
        paper_pressedimg = R.raw.paper_pressed;
        scissorsimg = R.raw.scissors;
        scissors_pressedimg = R.raw.scissors_pressed;
        rockimg = R.raw.rock1;
        rock_pressedimg = R.raw.rock1_pressed;

        /**set the button Listeners*/
        play.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                play();
            }
        });

        reset.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                paper.setImageResource(paperimg);

                 rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                lizard.setImageResource(lizardimg);
                spock.setImageResource(spockimg);
                compPaper.setImageResource(paperimg);
                compRock.setImageResource(rockimg);
                compSciss.setImageResource(scissorsimg);
                compLiz.setImageResource(lizardimg);
                compSpock.setImageResource    (spockimg);               
                pChoice = "";
                cChoice = "";
                play.setEnabled(false);
                reset.setEnabled(true);
                scissors.setEnabled(true);
                paper.setEnabled(true);
                rock.setEnabled(true);
                lizard.setEnabled(true);
                spock.setEnabled(true);
                resultText.setText("");
            }
        });

        /*
         * Declaring what happens when specific choices are made.
         */

        scissors.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){    
                     scissors.setImageResource(scissors_pressedimg);
                    paper.setImageResource(paperimg);
                    rock.setImageResource(rockimg);
                    spock.setImageResource(spockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "S";
                    play.setEnabled(true);
             }
         });

         paper.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                    paper.setImageResource(paper_pressedimg);
                    scissors.setImageResource(scissorsimg);
                    spock.setImageResource(spockimg);
                    rock.setImageResource(rockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "P";
                    play.setEnabled(true);
            }
         });

        rock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                rock.setImageResource(rock_pressedimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                spock.setImageResource(spockimg);
                lizard.setImageResource(lizardimg);
                pChoice = "R";
                play.setEnabled(true);
            }
        });

        lizard.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                 lizard.setImageResource(lizard_pressedimg);
                 spock.setImageResource(spockimg);
                 rock.setImageResource(rockimg);
                 scissors.setImageResource(scissorsimg);
                 paper.setImageResource(paperimg);
                 pChoice = "L";
                 play.setEnabled(true);
            }
         });

        spock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                spock.setImageResource(spock_pressedimg);
                lizard.setImageResource(lizardimg);
                rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                pChoice = "SP";
                play.setEnabled(true);
            }
        });

    }

    /**The method that chooses the computer's move and compares
     *  to the player's move.
     */
    public void play()
    {
        compChoice = rand.nextInt(5);

        if(compChoice == 0)
        {
            cChoice = "R";
            compRock.setImageResource(rock_pressedimg);
            }
        else if(compChoice == 1){
            cChoice = "P";
            compPaper.setImageResource(paper_pressedimg);
        }       
         else if(compChoice == 2)
        {
            cChoice = "S";
            compSciss.setImageResource(scissors_pressedimg);
            }
        else if(compChoice == 3)
           {
            cChoice = "L";
             compLiz.setImageResource(lizard_pressedimg);
            }
        else if(compChoice == 4)
       { 
       cChoice = "SP";
       compSpock.setImageResource(spock_pressedimg);
       }

    check();
}

/**
 * Compares the Computer's and the Player's moves.
 */
public void check()
{
    if(pChoice == "R") //Rock
    {
        if(cChoice == "R")
            resultText.setText("Draw");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");
    }

    else if(pChoice == "P") //Paper
    {
        if(cChoice == "R")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("Draw");

        else if(cChoice == "S")
            resultText.setText("You Lose");

        else if(cChoice == "SP")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Lose");

    }

    else if(pChoice == "S") //Scissors
    {
        if(cChoice == "R")
            resultText.setText("You Lose");

        else if(cChoice == "P")
            resultText.setText("You Win");

        else if(cChoice == "S")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");

    }

    else if(pChoice == "L") //Lizard
    {
      if(cChoice == "R")
        resultText.setText("You Lose");

      else if(cChoice == "L")
        resultText.setText("Draw");

      else if(cChoice == "SP")
        resultText.setText("You Win");

      else if(cChoice == "S")
        resultText.setText("You Lose");

      else if(cChoice == "P")
        resultText.setText("You Win");
    }

    else if(pChoice == "SP") //Spock
    {
        if(cChoice == "SP")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "R")
            resultText.setText("You Win");

    }

    gameOver();
}

/**
 * Runs at the end of each round. Disables all of the buttons
 * except for the reset button.
 */
public void gameOver()
{
    play.setEnabled(false);
    scissors.setEnabled(false);
    rock.setEnabled(false);
    paper.setEnabled(false);
    spock.setEnabled(false);
    lizard.setEnabled(false);
    reset.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:27:13.360

听起来您需要将活动添加到您的 AndroidManifest.xml 中。它看起来像这样，位于清单的“应用程序”部分。您可以阅读此页面了解更多信息：http: [//developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

这是一个例子：

```
 <activity
        android:name=".rockpaperscissorlizardspock"
        android:label="@string/app_name"
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

# sql - 检测 SQL 表中行之间的循环引用

> ID：13981534
> 
> 赞同：0
> 
> 时间：2012-12-20T22:23:43.757
> 
> 标签：sql, sql-server

> **可能重复：**
> [检测 SQL 中的循环引用](https://stackoverflow.com/questions/7540760/detecting-circular-references-in-sql)

我需要一种方法来轻松检测 SQL Server 中具有员工/经理关系的表的循环引用。有人已经写过这个查询了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:26:26.917

像这样的东西？

```
select ID
from yourtable a
where exists (select *
              from yourtable b
              where a.SourceID = b.TargetID and
                    a.TargetID = b.SourceID) 
```

当然，这不会检测到大圆圈（即`a --> b --> c --> a`）。为此，您需要更强大的东西，例如[this](https://stackoverflow.com/a/7541395/102937)。

# delphi - 是否存在 BBCode 解析器的 Delphi 实现？

> ID：13981539
> 
> 赞同：3
> 
> 时间：2012-12-20T22:24:26.183
> 
> 标签：delphi, bbcode

我正在为 Delphi 寻找一个可以将 BBCode 转换为 HTML 的 BBCode 库。如果有一个真正的解析器能够理解输入的状态并能够检测错误，而不是像下面这样便宜的东西，那就太好了：

```
text := StringReplace(text, '[i]', '<i>', [rfReplaceAll]);
text := StringReplace(text, '[/i]', '</i>', [rfReplaceAll]);
text := StringReplace(text, '[b]', '<b>', [rfReplaceAll]);
text := StringReplace(text, '[/b]', '</b>', [rfReplaceAll]);
... 
```

有没有这样的图书馆存在？我已经运行了一些谷歌搜索，但我还没有找到一个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T05:53:25.800

我在这里找到了一些代码：

[https://rtcsdk.svn.sourceforge.net/svnroot/rtcsdk/Demos/RTC_WebForum/uTrans.pas](https://rtcsdk.svn.sourceforge.net/svnroot/rtcsdk/Demos/RTC_WebForum/uTrans.pas)

它包含一个名为 BBCode2HTML() 的函数。

可能值得一看。

仅供参考，我是通过 code.ohloh.net 找到的。搜索词“bbcode”；过滤“德尔福”

# python - recv_into 一个 numpy 数组

> ID：13981541
> 
> 赞同：4
> 
> 时间：2012-12-20T22:24:31.390
> 
> 标签：python, sockets, numpy

我正在通过运行 wince 的相机的套接字传输图像 :( 相机中的图像只是使用 realloc 针对给定的 x * y 大小创建的浮点数组

另一方面，我在 python 中接收这些图像。我有这段代码正在工作

```
img_dtype = np.float32
img_rcv = np.empty((img_y, img_x), 
                   dtype = img_dtype)

p = sck.recv_into(img_rcv, 
                  int(size_bytes), 
                  socket.MSG_WAITALL)

if size_bytes != p:
    print "Mismatch between expected and received data amount"

 return img_rcv 
```

我对 numpy 创建其数组的方式有点困惑，我想知道这个 img_rcv 是否与 recv_into 的工作方式兼容。

我的问题是：

*   这有多安全？
*   numpy 数组的内存分配是否会以 recv_into 为已知？
*   numpy 数组创建例程是否等同于 malloc？
*   它只是因为我很幸运而工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:24:53.470

答案是：

*   安全的

*   是的，通过[缓冲区接口](http://docs.python.org/2/c-api/buffer.html)

*   是的，从某种意义上说，您可以获得一块可以使用的内存

*   不

# css - 完成后暂停css动画

> ID：13981544
> 
> 赞同：1
> 
> 时间：2012-12-20T22:24:43.240
> 
> 标签：css, css-animations

所以我试图在动画完成后对一些文本进行动画处理。

问题是它在完成后就消失了，即使我将不透明度设置为 1@100%。

```
/* text animation */

@-webkit-keyframes textAnimation { 
    0% {
        opacity: 0;
        -webkit-transform: translateY(-200%);
    }
    10% {
        opacity: 1;
        -webkit-transform: translateY(0%);
    }
    20% {
        opacity: 1;
        -webkit-transform: translateY(0%);
    }
    100% {
        opacity: 1;
        -webkit-transform: translateY(0%);
    }

}

.text-animation {
    z-index: 1000;

    width: 100%;
    text-align: center;
    opacity: 0;
    -webkit-animation: textAnimation 2s linear  2s;
    -moz-animation: textAnimation 2s linear  2s;
    -o-animation: textAnimation 2s linear  2s;
    -ms-animation: textAnimation 2s linear  2s;
    animation: textAnimation 2s linear  2s;
     -webkit-animation-iteration-count: 1;
      -webkit-animation-delay: 1s;
    -moz-animation-delay: 1s;
    -o-animation-delay: 1s;
    -ms-animation-delay: 1s;
    animation-delay: 1s;
}

/* text animation */ 
```

我只是不明白这里的问题是什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:45:46.057

这对我有用。

如果您在类中设置结束状态并且不添加延迟。

```
@-webkit-keyframes textAnimation {
    0% { opacity: 0; -webkit-transform: translateY(-200%); }
    33% { opacity: 1; -webkit-transform: translateY(-200%); }
    100% { opacity: 1; -webkit-transform: translateY(0%); }
}

.text-animation {
color:#fff;
font-size:32px;
width: 100%;
text-align: center;
opacity: 1;
-webkit-animation: textAnimation 3s linear;
-moz-animation: textAnimation 3s linear;
-o-animation: textAnimation 3s linear;
-ms-animation: textAnimation 3s linear;
animation: textAnimation 3s linear;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:34:57.467

在您的 .text-animation 声明中添加：

```
-webkit-animation-fill-mode: forwards; 
```

多亏了它，您的动画将保持在最后一个关键帧状态。（这里，不透明度 0）。

你可以在这里看到结果：http: [//codepen.io/joe/pen/CkbcL](http://codepen.io/joe/pen/CkbcL)

来源：[https ://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode](https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode)

# .net - 在从 app.xaml 引用的资源字典中找不到 app.xaml 中的 StaticResource

> ID：13981546
> 
> 赞同：6
> 
> 时间：2012-12-20T22:25:17.827
> 
> 标签：.net, wpf, staticresource

我有一种情况，我试图解析资源字典中引用的数据模板中的可视组件，引用`app.xaml`标记的静态资源，请参见下面的示例。

`App.xaml`

```
<Application 
    x:Class="App" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"      
    xmlns:composition="clr-namespace:Composition"
    ShutdownMode="OnMainWindowClose">
    <Application.Resources>
        <ResourceDictionary>
            <composition:ApplicationContainer x:Key="ApplicationContainer"/>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary
Source="pack://application:,,,/MyApp;component/Composition/DataTemplates.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>
</Application> 
```

`Composition/DataTemplates.xaml`

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:projectvm="clr-namespace:ViewModels.ProjectManagement"
                    xmlns:unity="clr-namespace:Extensions">
    <DataTemplate DataType="{x:Type projectvm:ProjectDocument}">
        <ContentControl>
            <!-- Custom Extension that resolves a component from
            the composition container -->
            <unity:Resolve Container="{StaticResource ApplicationContainer}"
  TargetType="{x:Type projectvm:ProjectDocument}" ContractName="ProjectDocument"/>
        </ContentControl>
    </DataTemplate>
</ResourceDictionary> 
```

错误就在上面。unity: Resolve 行找不到`ApplicationContainer`静态资源。我不明白为什么。

# python - Python - networkx.read_pajek 不工作

> ID：13981549
> 
> 赞同：-1
> 
> 时间：2012-12-20T22:25:28.747
> 
> 标签：python, macos, graph, matplotlib, networkx

我正在使用 python networkx 和 matplotlib.pyplot。

我正在使用的代码如下：

```
 import networkx as net
 import matplotlib.pyplot as plot

   orgchart = net.read_pajek("ACME_orgchart.net")
   net.draw(orgchart) 
```

代码不会抛出错误并且运行良好，但应该出现的图形没有，我知道代码运行良好，因为一个图标出现在 Dock 中，我确信它表示 python 中的图形可视化软件，但实际的可视化确实没出现 。这段代码来自“初创公司的社交网络分析”一书，如果有人能帮我解决这个问题，我将不胜感激。

我在 mac osX 上使用 python 2.7.3，安装了 networkx、matplotlib、numpy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:59:28.813

问题是我的 matplotlib 没有在交互模式下使用。因此，在使用交互式显示器时，我还需要`plot.show()`在末尾添加一行：以使显示器出现。

更多信息请访问： http: [//networkx.lanl.gov/tutorial/tutorial.html](http://networkx.lanl.gov/tutorial/tutorial.html)

# php - 动态获取上次修改文件时间

> ID：13981550
> 
> 赞同：4
> 
> 时间：2012-12-20T22:25:34.893
> 
> 标签：php, filemtime

我做了几次不成功的尝试。我想通过当前文件获取最后修改的文件时间 - 即当前正在查看的文件。以下代码适用于 employees.es.php 文件，但除非我不断更改文件名，否则我会在其他文件中重用它。

```
 <?php
    // make var from file name
    $last_modified = filemtime("employer.es.php");
    // print date
    echo "Information last modified on " . date("m/d/Y", $last_modified);
    ?> 
```

因此，不必在每个文件中键入文件名，而是希望它使用当前文件。希望我说得通：/谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-20T22:27:04.653

魔法`__FILE__` [常数](http://php.net/manual/en/language.constants.predefined.php)应该可以帮助你。

`$last_modified = filemtime(__FILE__);`

# javascript - 如何对具有相同类的不同 div 使用相同的 JQuery 效果

> ID：13981557
> 
> 赞同：1
> 
> 时间：2012-12-20T22:26:10.067
> 
> 标签：javascript, jquery, css, class

我不太喜欢使用 javascript 和 jQuery，所以请添加详细的答案。

我需要为`div`同一个类的不同s添加一个jQuery效果，这样当我点击一个`1`带有类的div时`item`，另一个div`info`会出现在特定的容器中。
此外，如果我单击`2`具有相同 class 的`item`div ，另一个 div`pics`将出现在同一个容器中，`info`而 while`info`将消失。

我打算用这个：

```
$(document).ready(function(){
    $("#box1").click(function(){
        $("#box1").fadeOut(250);
    });
    $("#box1").click(function(){
        $("#box2").fadeIn(500);
    });
}); 
```

但这对于使用大约 10 `div`s 和另外 10 个显示和隐藏`div`s 是无效的。
我会使用很多行代码，但我不确定它是否会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:28:13.140

您可以使用选择器`$(".item")`来获取`div`您感兴趣的所有 s。

类选择器听起来像你需要的： http: [//api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)

一旦您在点击调用中并采取不同的操作，您就可以区分这些 ID。但是类选择器将允许您在您感兴趣的所有 div 上使用 click 事件处理程序。

下面的示例代码

```
$(document).ready(function(){
    $(".item").click(function(e){
        // output the id of the clicked item
        console.log($(e.target).attr("id"));

        if($(e.target).attr("id")=="box1"){
            //do something for if the clicked item is box1.
            $("#box1").fadeOut(250);
            $("#box2").fadeIn(500);            
        }

    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:41:46.533

使用 jQuery 进行选择时，您需要使用 #id_name 作为 ID，使用 .class_name 作为类。选择 div, tr, td, ... 时，名称前不需要特殊符号。所以：

```
$('#id_name').click(); // click on every item of the ID 'id_name'
$('.class_name').hide(); // make all items invisible that have class 'class_name'
$('tr').addClass('class_name'); // adds the class 'class_name' to all tr items 
```

ID 是唯一的。类可以出现不止一次。

只需阅读[jQuery API上的示例](http://api.jquery.com/)

为了上手 JS jQuery 非常好。做起来非常快，但不要忘记 jQuery 是一个必须加载的库，才能使这些短命令成为可能。纯javascript会更快。别忘了，你可以把 JS 和 jQuery 结合起来，因为 jQuery 就是 JS。切换到纯 JS 也会让你看到你的脚本到底做了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:31:22.187

没有你的 html，很难说清楚。但是，这是一个起点。

您现有的 jQuery 就是这样，它通过 ID 获取每个 div。

```
$(document).ready(function(){
    $("#box1").click(function(){
        $("#box1").fadeOut(250);
    });
    $("#box1").click(function(){
        $("#box2").fadeIn(500);
    });
}); 
```

一种改进是使用*类*而不是 ID，您可以这样做。

**注意：**`itempic`下面假设您为要触发图片显示的 div分配不同的类或附加类：

```
$(document).ready(function(){
    $(".item").click(function(){
        $(".info").fadeOut(250);
    });
    $(".itempic").click(function(){
        $(".pics").fadeIn(500);
    });
}); 
```

如果您有多个具有相同功能的 div（例如，您有一堆产品，每个产品都有一个信息框和一个图片框），那么您需要使用“包含”给定项目的选择器。使用一些示例 HTML，我可以提供一个考虑到这一点的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:36:16.017

与此类似的 html 结构

```
<div id="container">
   <div id="info">info contents</div>
   <div id="pic">pic contents</div>
</div>

<div class="item" data-related="#info">your contents</div>
<div class="item" data-related="#pic">your contents</div>
..etc. 
```

并使用

```
$(function(){
    $('#container').children().hide(); // initial hiding 

    $('.item').click(function(){
        var relatedId = $(this).data('related');
        $(relatedId).show().siblings().hide();
    });
}); 
```

**演示在** [http://jsfiddle.net/gaby/mTSZv/](http://jsfiddle.net/gaby/mTSZv/)

# firefox - 火狐。内存/离线缓存设备

> ID：13981564
> 
> 赞同：0
> 
> 时间：2012-12-20T22:27:09.897
> 
> 标签：firefox, offline, offline-caching, offlineapps, offline-mode

我开发了一个 smartgwt 应用程序。它应该在离线模式下工作。但我有一个问题。有一个 app.nocache.js 文件，它不想从 Firefox 的离线缓存设备中获取（参见 Firefox 中的“about:cache”）。它被放置在浏览器中的内存缓存设备和离线缓存设备中。它只能从内存缓存设备中获取。如果我切换到“脱机工作”，则无法读取此文件，我只会看到灰色屏幕。除了 app.nocache.js 之外，我的“offline.manifest”的所有文件都可以从离线缓存设备中获取。为什么有些文件被放入内存缓存设备？我怎样才能防止这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:41:44.883

这与 smartgwt 无关，但与 gwt 相关。您可以在网络上找到一些关于该主题的帖子，其中[有](https://groups.google.com/forum/?fromgroups=#!topic/google-web-toolkit/oS7ZKbxDtJI)一个。希望它可以帮助你

# objective-c - 在 xib 文件上设置可访问性标识符

> ID：13981568
> 
> 赞同：4
> 
> 时间：2012-12-20T22:27:20.753
> 
> 标签：objective-c, xcode4.5, ios-ui-automation

我有一个带有视图的 xib 文件。在一个视图下，我的标签很少……我正在研究 UIAutomation，因此希望将可访问性标识符添加到视图和每个标签中。我怎么能在xib里面做呢？我用谷歌搜索，发现应该使用一个名为“标识符”的字段......但我看不到任何用于查看和标签的烂字段。

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:30:29.847

这里：

![在此处输入图像描述](../Images/9d4ca83c2494f8a9616827de2862e1bb.png)

您必须手动设置它，因此添加一个按 + 按钮的键，将类型更改为字符串并将名称更改为“标识符”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:54:54.637

在“身份检查器”（第 3 个选项卡）中

您将看到一个标题“用户定义的运行时属性”，您需要添加字符串类型的键“accessibilityIdentifier”，值是您的 id :)

# git - 找到 2 个远程分支之间的差异

> ID：13981570
> 
> 赞同：19
> 
> 时间：2012-12-20T22:27:33.693
> 
> 标签：git

如何找出 2 个远程分支之间的区别？

我试过了：

```
git diff --name-status remotes/branch-V4.4..remotes/branch-V4.2 
```

但它给了我一个更改的文件列表。有没有办法获得提交列表，显示两个分支之间的区别？

谢谢你。

更新：

谢谢你的回答。我试过'git log --graph remotes/branch-V4.4...remotes/branch-V4.2'

我懂了

```
* commit ............
|
|
| 
* commit .............
|
|
| 
* commit .............|
|
| 
* commit ............. 
```

为什么只有“|” ，一条直线？为什么它没有显示 2 个分支在哪里开始分歧？

谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-20T22:41:06.790

您正在寻找的可能是这样的：

```
gitk --left-right remotes/branch-V4.4...remotes/branch-V4.2 
```

或者如果 gitk 不可用：

```
git log --oneline --graph --decorate --left-right --boundary --date-order remotes/branch-V4.4...remotes/branch-V4.2 
```

您可能还想在没有 的情况下尝试它`--date-order`，但特别是在复杂的情况下，我发现`git log`使用该选项可以生成更有用的图表。

该图中的每个提交都将标有`<`或`>`-`o`这意味着它们是左分支、右分支或“边界提交”的一部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T22:41:10.353

使用[`git log`](https://www.kernel.org/pub/software/scm/git/docs/git-log.html)代替`git diff`：

```
git log remotes/branch-V4.4..remotes/branch-V4.2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-08T21:32:36.613

你可以简单地做。

```
git diff origin/<remote branch> 
```

# javascript - 分离和插入之前的焦点（）问题

> ID：13981584
> 
> 赞同：0
> 
> 时间：2012-12-20T22:28:21.817
> 
> 标签：javascript, jquery

当我分离当前焦点元素并再次插入时，使用 Tab 键在字段中移动时遇到问题。[请在jsfiddle](http://jsfiddle.net/UjE9W/)中找到我的代码。. 另见下文：

JS代码：

```
$(document).ready(function() {
    $('.formElem').focusin(function() {
        // Remove default text on focus in
        if ($(this).val() == $(this).attr('title')) {
            $(this).val('').removeClass('defaultText');
            if (($(this).attr('id') == 'reg_pwd') || ($(this).attr('id') == 'reg_conf_pwd')) {
                id = '#' + $(this).attr('id');
                marker = $('<span>123</span>').insertBefore($(this));
                $(this).detach().attr('type', 'password').insertAfter(marker);
                marker.remove();

            }
            if ($(this).get(0) != $(':focus').get(0)) {
                $(this).focus();
            }
        }
    }).focusout(function() {
        // Remove default text on focus out
        if ($(this).val() === '') {
            $(this).val($(this).attr('title')).addClass('defaultText');
            if (($(this).attr('id') == 'reg_pwd') || ($(this).attr('id') == 'reg_conf_pwd')) {
                marker = $('<span>123</span>').insertBefore($(this));
                $(this).detach().attr('type', 'text').insertAfter(marker);
                marker.remove();
            }
        }
    });
});​ 
```

该代码将字段的类型从文本更改为密码并来回更改。当您单击或使用 Tab 到达密码字段时，它会在再次添加后失去焦点。谢谢，如果有人能找出原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:15:01.160

看来您使用的是 html5，所以也许您可以利用该`placeholder`属性。而不是`<input value="blah" />`使用`<input placeholder="blah" />`. 现在您甚至不需要拥有 defaultText 类，因此您可以删除它，以及您拥有的用于删除和添加类的关联 jquery 代码。

现在，您还可以将密码字段更改`<input type="text" />`为`<input type="password" />`。我不确定你想做什么`<span>123</span>`。所以也许，我不完全理解你的问题。但下面似乎完成了你试图做的效果。

一个 jsfiddle 以及[http://jsfiddle.net/8BBRC/2](http://jsfiddle.net/8BBRC/2)

编辑：有错误的 jsfiddle 链接。

```
<input type="text" class="formElem" id="reg_fullname" name="fullname" placeholder="Full Name" title="Full Name" /><br />
<input type="email" class="formElem" id="reg_email" name="email" placeholder="Email Address" title="Email Address" /><br />
<input type="password" class="formElem" id="reg_pwd" name="pwd" placeholder="Confirm" title="Password" /><br />
<input type="password" class="formElem" id="reg_conf_pwd" name="conf_pwd" placeholder="Confirm Password" title="Confirm Password" /><br />
<input type="submit" id="reg_submit" value="Submit" /><br /> 
```

# c++ - 从 long long 中减去一个 int

> ID：13981585
> 
> 赞同：2
> 
> 时间：2012-12-20T22:28:37.807
> 
> 标签：c++, int, long-integer

```
if(number > 999999999)
{
    int n_billions;
    n_billions = number/1000000000;
    cout << number;

    number -= n_billions*1000000000;
    cout << number;
} 
```

如果我让数字 = 9000000000（九十亿），我不明白为什么在我运行程序后变量`number`而不是 0 是 8589934592。

会不会是 number 是一种`long long`类型而 n_billions 是一种`int`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:33:02.033

您需要确保将数十亿的数量乘以 long long，如下所示：

```
number -= n_billions*1000000000LL; 
```

否则，您会得到`n_billions`大于 2 的整数溢出。

```
long long number = 9000000123LL;
if(number > 999999999) {
    int n_billions;
    n_billions = number/1000000000;
    cout << number << endl;

    number -= n_billions*1000000000LL;
    cout << number << endl;
} 
```

以上[打印](http://ideone.com/irBm21) `123`如预期。

当然这等价于得到一个*余数*，像这样：

```
number %= 1000000000; 
```

# python - 在 wxpython 中添加笔记本页面

> ID：13981587
> 
> 赞同：2
> 
> 时间：2012-12-20T22:28:40.180
> 
> 标签：python, wxpython, wxnotebook

我正在运行一个 wxpython 应用程序。在应用程序中，我有一个面板，其中包含一个带有一些笔记本页面/标签的笔记本。在按下按钮（wx.button）时，我希望能够清除其中一个笔记本页面并将其替换为我的 GUI 中提供的新信息。

我还没有看到 wx.Notebook 的任何 Clear() 函数，所以我想到了删除页面并创建一个新页面。但是，我似乎无法让它发挥作用。这是我的代码...帮助？？

```
def UpdatePanel(self):    

    self.Notebook3.DeletePage(0)

    self.newpage = scrolled.ScrolledPanel(self.Notebook3, -1)
    self.newpage.SetupScrolling()
    self.Notebook3.AddPage(self.newpage,"Page Inserted Here")

    # self.Notebook3.InsertPage(0,"Page Inserted Here") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:34:35.683

查看此代码，看看如何使其适应您的：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import wx

class Page(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        t = wx.StaticText(self, -1, "THIS IS A PAGE OBJECT", (20,20))

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Notebook Remove Pages Example")

        pannel  = wx.Panel(self)
        vbox    = wx.BoxSizer(wx.VERTICAL)
        hbox    = wx.BoxSizer(wx.HORIZONTAL)

        self.buttonRemove = wx.Button(pannel, id=wx.ID_ANY, label="DELETE", size=(80, 25))
        self.buttonRemove.Bind(wx.EVT_BUTTON, self.onButtonRemove)
        hbox.Add(self.buttonRemove)

        self.buttonInsert = wx.Button(pannel, id=wx.ID_ANY, label="CREATE", size=(80, 25))
        self.buttonInsert.Bind(wx.EVT_BUTTON, self.onButtonInsert)
        hbox.Add(self.buttonInsert)

        vbox.Add(hbox)

        self.Notebook3 = wx.Notebook(pannel)
        vbox.Add(self.Notebook3, 2, flag=wx.EXPAND)

        pannel.SetSizer(vbox)

        self.pageCounter = 0
        self.addPage()

    def addPage(self):
        self.pageCounter += 1
        page      = Page(self.Notebook3)
        pageTitle = "Page: {0}".format(str(self.pageCounter))
        self.Notebook3.AddPage(page, pageTitle)

    def onButtonRemove(self, event):   
        self.Notebook3.DeletePage(0)

    def onButtonInsert(self, event):   
        self.addPage()

if __name__ == "__main__":
    app = wx.App()
    MainFrame().Show()
    app.MainLoop() 
```

# php - 处理庞大的 mysql 查询：Group BY 敏感

> ID：13981589
> 
> 赞同：4
> 
> 时间：2012-12-20T22:29:07.867
> 
> 标签：php, mysql

我必须在我的网站上运行这个 Mysql 查询来获取大量数据：（3 个表，每个表有 100,000 + 条记录）

```
SELECT on_resume.*, on_users.subscribed, on_users.user_avatar, on_resume_page.*
FROM on_resume 
LEFT JOIN on_users ON (on_resume.resume_userid = on_users.user_id ) 
LEFT JOIN on_resume_page  ON ( on_resume.resume_userid = on_resume_page.resume_userid)
WHERE on_resume.active= '1' 
GROUP BY on_resume.rid 
ORDER BY on_resume.rid DESC 
LIMIT 0,18 
```

当我在 Phpmyadmin sql 部分运行它时，整个 mysqld 服务将关闭，需要重新启动。

现在我正在测试这个查询，我发现如果我不使用`Group by`并且`Order by`条件查询会很好。

```
SELECT on_resume.*, on_users.subscribed, on_users.user_avatar, on_resume_page.*
FROM on_resume 
LEFT JOIN on_users ON (on_resume.resume_userid = on_users.user_id ) 
LEFT JOIN on_resume_page  ON ( on_resume.resume_userid = on_resume_page.resume_userid)
WHERE on_resume.active= '1' 
LIMIT 0,18 
```

> 显示第 0 - 17 行（共 18 行，查询耗时 0.4248 秒）

为什么会这样，我该如何解决？...

**注意：**在任何一种情况下，我都使用 group by 或 Order by 单独测试了 SQL 查询，即使其中一种仍然查询失败并挂起服务器。

**编辑**：这个问题是通过使列`on_resume_page.resume_userid`索引来解决的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:44:08.343

这是我被告知的，花了一段时间才弄清楚：看看芝加哥评论中的@jer

请记住，当有 GROUP BY 子句时，有一些规则适用于分组列。其中一个规则是“单值规则”——在 SELECT 列表中命名的每一列也必须是一个分组列，除非它是一个集合函数的参数。MySQL 通过允许您在 SELECT 列表中使用未出现在 GROUP BY 子句中的列或计算来扩展标准 SQL。但是，我们被警告不要使用此功能，除非您从 GROUP BY 子句中省略的列在组中不是唯一的，因为您将获得不可预测的结果。

# python - python genfromtext 指定一些 dtype，但让其他人自动确定

> ID：13981594
> 
> 赞同：1
> 
> 时间：2012-12-20T22:29:31.700
> 
> 标签：python, numpy

我不明白为什么 numpy.genfromtext 允许您仅指定全部或不指定任何 dtypes。我试图让它为大多数领域做明显的（默认）事情，但要指定一些我认为它会遇到困难的事情。一般来说，我不知道我的数据文件中的完整字段列表。
有没有比两次加载文件更好的方法，如下所示？

```
dtypeoverrides={'textfield':'a20','anotherTrickyfield':'a10','nonexisting field':'a1'}
tsv='inputfile.tsv'

indata=np.genfromtxt(tsvF, delimiter='\t',names=True,dtype=None)

if dtypeoverrides:
   dd=indata.dtype
   print dd
   dd=[(name,dtypeoverrides.get(name,dd[name])) for name in dd.names]
   print dd
   indata=np.genfromtxt(tsvF, delimiter='\t',names=True,dtype=dd) 
```

# java - java并发实践5.19

> ID：13981595
> 
> 赞同：8
> 
> 时间：2012-12-20T22:29:33.923
> 
> 标签：java, concurrency

在 JCIP 书中，Listing 5.19 存储器的最终实现。我的问题是：

1.  由于原子 putIfAbsent() 导致无限的 while 循环在这里？
2.  while 循环应该在 putIfAbsent() 的 impl 中而不是客户端代码中吗？
3.  while 循环是否应该在较小的范围内仅包装 putIfAbsent()？
4.  while 循环在可读性上看起来很糟糕

代码：

```
public class Memorizer<A, V> implements Computable<A, V> {
    private final ConcurrentMap<A, Future<V>> cache
            = new ConcurrentHashMap<A, Future<V>>();
    private final Computable<A, V> c;
    public Memorizer(Computable<A, V> c) { this.c = c; }
    public V compute(final A arg) throws InterruptedException {
    while (true) { //<==== WHY?
        Future<V> f = cache.get(arg);
        if (f == null) {
           Callable<V> eval = new Callable<V>() {
               public V call() throws InterruptedException {
                    return c.compute(arg);
               }
           };
           FutureTask<V> ft = new FutureTask<V>(eval);
           f = cache.putIfAbsent(arg, ft);
           if (f == null) { f = ft; ft.run(); }
        }
        try {
           return f.get();
        } catch (CancellationException e) {
           cache.remove(arg, f);
        } catch (ExecutionException e) {
           throw launderThrowable(e.getCause());
        }
     }
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T23:42:34.667

> 1) 因为原子 putIfAbsent() 而出现了无休止的 while 循环？

此处的 while 循环用于在取消计算时重复计算（第一种情况`try`）。

> 2) while 循环应该在 putIfAbsent() 的 impl 中而不是客户端代码中吗？

不，请阅读什么`putIfAbsent`。它只是尝试只放置一次对象。

> 3) while 循环是否应该在更小的范围内仅包装 putIfAbsent()？

不，不应该。见#1。

> 4) While 循环在可读性上看起来很糟糕。

你可以自由地提供更好的东西。事实上，这种构造套件非常适合您必须尝试做某事直到成功进行的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:45:50.717

不，您不能缩小 while 循环的范围。您想要对`f.get()`缓存中的值执行操作。如果地图中没有 for`arg`的值，您希望对`get()`结果执行，否则您希望获取`arg`地图中的现有值和`get()`那个值。

问题是在这个实现中没有锁，所以在你检查是否有一个值和尝试插入一个值之间，另一个线程可能已经插入了它自己的值。同样，在插入失败和检索之间的情况下，该值可能已从缓存中删除（由于`CancellationException`）。由于这些失败案例，您需要旋转`while(true)`直到您可以从映射中获取规范值，或者将新值插入映射中（使您的值成为规范值）。

看起来你可以尝试更多的`f.get()`循环，但由于存在 的风险`CancellationException`，你想继续尝试。

# c# - 在抽象基类上声明接口

> ID：13981596
> 
> 赞同：0
> 
> 时间：2012-12-20T22:29:43.983
> 
> 标签：c#, interface, polymorphism, abstract

我目前正在实现 Quartz 计时器以允许调度一些数据文件。我有一个抽象`DataOutput`类，然后实现涵盖不同类型的输出（http、文件等）。我已经在这两种专业化上实现了接口，但是当我尝试在抽象基础上声明它以创建 DataOutput 类型的对象以便我可以在运行时处理这些对象时，我遇到了编译错误。

这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:35:32.473

您至少需要抽象地实现接口：

```
public interface IExample
{
    string Word { get; set; }
    void DoIt();
}

public abstract class ExampleClass : IExample
{
   public string Word { get; set; }
   public abstract void DoIt();
} 
```

*我不确定您是否已这样做，因为您没有发布任何代码或错误。*

# c - char *token[32] 和 char token[32] 的区别

> ID：13981597
> 
> 赞同：1
> 
> 时间：2012-12-20T22:29:46.010
> 
> 标签：c, pointers, char

这听起来可能很愚蠢和愚蠢。我很想了解两者之间的区别

```
char *token[32]; 
```

和

```
char token[32]; 
```

char token[32] 将 token 声明为可以包含 32 个字符的字符数组。

在 char *token[32] 的情况下，token 包含 32 个字符指针。这些指针指向什么？或者更具体地说，用户有责任为指针指向的内容分配内存。？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T22:31:21.750

> 现在`char *token[32]`将 token 声明为指向可以包含 32 个字符的字符数组的指针。

不，它声明`token`为一个由 32 个字符指针组成的数组。换句话说，在第一种情况下`token`保存 32 个字符，在第二种情况下，它保存 32 个指针。

如果你想声明一个指向包含 32 个字符的字符数组的指针，你会写

```
char arr[32];
char (*token)[32] = &arr; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T22:31:22.483

```
char *token[32]; 
```

是一个由 32 个字符指针组成的数组。即该数组可以用作：

```
token[0]=p1;
token[1]=p2;
..... 
```

其中 p1 和 p2 可以是`char[]`或`char*`类型。

这篇文章可能会帮助您了解除所问内容之外的一些更相关的内容：

[指向数组/指针数组的C指针消歧](https://stackoverflow.com/questions/859634/c-pointer-to-array-array-of-pointers-disambiguation)

# api - trello api 更新检查项状态

> ID：13981598
> 
> 赞同：3
> 
> 时间：2012-12-20T22:29:59.200
> 
> 标签：api, state, trello

我想使用 Trello API 来更新 checkItem 的状态。

这是我的 PUT：

网址：cards/50d3791447d8a71f52000243/checklist/50d3841d65296725520002a0/checkItem/50d384e9c027149d3300074b/state

字段：idCheckList=50d3841d65296725520002a0&idCheckItem=50d384e9c027149d3300074b&value=true

以下是 API 参考：

[https://trello.com/docs/api/card/index.html#put-1-cards-card-id-or-shortlink-checklist-idchecklist-checkitem-idcheckitem-state](https://trello.com/docs/api/card/index.html#put-1-cards-card-id-or-shortlink-checklist-idchecklist-checkitem-idcheckitem-state)

其他所有请求都是正确的，但是这有问题，我不知道是什么:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-03-28T17:15:11.167

```
PUT /1/cards/[card id or shortlink]/checklist/[idChecklist]/checkItem/[idCheckItem]/state is the URI.  

https://api.trello.com/1/cards/[card id]/checklist/[checklist id]/checkItem/[checkitem id]/state?key=[your api key]&token=[your trello token]&value=false 
```

这将返回 200 OK 并将检查项更新为不完整/未选中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T14:13:53.570

我必须在 Postman 中输入这个 url 来更新（检查）我的清单项目：

```
https://api.trello.com/1/cards/123myCard/checkItem/123myItem?state=complete&key=123myKey&token=123myToken 
```

[trello 开发者文档参考](https://developers.trello.com/reference/#cardsidcheckitemidcheckitem-1)

# windows - iocpreactor 以扭曲的形式发布状态

> ID：13981600
> 
> 赞同：3
> 
> 时间：2012-12-20T22:30:15.330
> 
> 标签：windows, twisted, io-completion-ports, twisted.internet

我们在 Windows 2008 上的默认选择反应器存在问题。有一个替代反应器，iocpreactor，它看起来是 Windows 的理想解决方案。它在文档中被列为实验性的，并且“几乎准备就绪”。

这实际上意味着什么？到目前为止，我们已经毫无问题地对其进行了测试。是通用的吗？其他人可以推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T00:25:03.697

该文档可能已过时。IOCP 反应器的主要限制是缺乏 SSL 支持，这是[4 年前](http://twistedmatrix.com/trac/ticket/593)解决的。许多人已经成功使用了很长时间；它不应该被描述为“实验性的”。

# php - 未定义索引：数组，定义索引时

> ID：13981607
> 
> 赞同：1
> 
> 时间：2012-12-20T22:30:48.043
> 
> 标签：php, arrays

这让我发疯，因为我需要 E_ALL 出于其他原因打开。我无法摆脱这个错误。

这是我的功能：

```
public static function getFileCatsString($categories)
{
    if (empty($categories)) {
        return '';
    }
    $cats = self::getFileCats();

    $file_cats_string = '';
    $categories_array = explode(',',$categories);
    foreach($categories_array as $k=>$category_id) {
        $file_cats_string.=$cats[$category_id].', ';
    }
    $file_cats_string = rtrim($file_cats_string, ', ');
    return($file_cats_string);
} 
```

类别存储在键控数组中：[id]=>[string]

传递的 $categories 是一个 category_ids 字符串（为什么会这样）

getFileCats() 方法获取所有可用类别的列表。

所以我们分解逗号列表来创建一个数组，然后我们循环遍历这个数组。当我得到一串类别 ID 时，我只想创建一串类别标签。PHP 返回此警告：

> 注意：未定义的索引：第 40 行 Documents.php 中的数组

第 40 行是：

> ```
>  $file_cats_string.=$cats[$category_id].', '; 
> ```

所以显然未定义的索引是 $cats[$category_id]。但这就是奇怪的地方。

如果我使用 die() 语句并回显 $cats[$category_id] 我确实得到了一个字符串，而不是一个数组。

顺便说一句，这里是三个关键数据中每一个的输出，其中 die() 语句放在 foreach 循环的顶部。

$categories_array:

> 数组（ [0] => 2 ）

$猫：

> 数组 ( [9] => 类别 19 [8] => 类别 8 [7] => 类别 7 [6] => 我为隐私更改的另一个字符串 [5] => AED 销售 [4] => Preceptor 文件夹 [3 ] => 教育手册 [2] => 表格 [1] => 指导方针和政策）

$cats[$category_id]

> 形式

$category_id

> 2

不过它变得更奇怪了。它说索引是一个数组（这确实是一个问题），所以我试着把：

```
 if (is_array($category_id)) {
            die(print_r($categories_array, true) . '<br />' . print_r($cats, true) . '<br />' . $cats[$category_id] . '<br />' . $category_id);
        } 
```

看看我是否能识别出一段防御数据，但它永远不会消失。那么到底发生了什么？！（我有一个偷偷摸摸的怀疑，答案会很简单。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:33:37.280

*知道将 PHP 中的任何*数组转换为字符串都会导致字符串的事实，该错误更容易理解：

```
"Array" 
```

（这也在PHP 手册中的[Type Juggling中进行了概述）](http://php.net/language.types.type-juggling)

正是这发生在第 40 行：

```
$file_cats_string .= $cats[$category_id] . ', ';
                           ^^^^^^^^^^^^ 
```

此时的变量`$category_id`是一个数组。修复它。有效的数组索引/键是整数或字符串，但不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:33:28.513

在`foreach`循环中，语法`foreach($categories_array as $k=>$category_id) {`意味着，`$k`是`key`并且`$category_id`是`value`每个索引/键。因此，该数组没有将其值之一作为索引的值，这就是错误显示*undefined index*的原因。

由于`$category_id`不是一个数组，它的值为 2，它没有通过检查`if (is_array($category_id))`

# php - 表中传递的所有零值

> ID：13981610
> 
> 赞同：0
> 
> 时间：2012-12-20T22:30:58.927
> 
> 标签：php, mysql

当我执行这段代码时，我只会在我的数据库中插入零。为什么？我能做些什么来解决这个问题？

```
<select class="date" name="year"> <option value="">Year</option>
<?php $i=1; while($i<=31) { ?>
<option value="<?php $i ?>"> <? echo $i; ?> </option>
<?php $i++; } ?> </select> 
```

这是我的mysql代码：

```
$sql="INSERT INTO information ( Year ) 
VALUES ('$_POST[year]')"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:34:12.380

```
<select class="date" name="day"> <option value="">Day</option>
<?php $i=1; while($i<=31) { ?>
<option value="<?php echo $i; ?>"> <?php echo $i; ?> </option>
<?php $i++; } ?> </select> 
```

始终使用`<?php`，`?>`以便您的浏览器识别 PHP

还有，你的第一个`<?php $i ?>`

我将其更改为并在我更改为`echo $i;` 的同一行`<? echo $i; ?> </option>``<?php echo $i; ?> </option>`

它对我有用。

使用您的插入：

```
$sql="INSERT INTO information (COL_FOR_DAY) 
VALUES ('{$_POST['day']}')"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:37:03.813

这里将如何成为您的代码

```
 <select class="date" name="year">
       <option value="">Year</option>
         <?php  for($i=1;$i<=31 ;$i++ ) { ?>
       <option value="<?php $i ?>"> <? echo $i; ?> </option>
         <?php } ?>
     </select> 
```

编辑 ：

```
 <input type ="submit" value =" submit me"/>
    <?php  if (isset($_POST['year']))  // check if isset the year
       {
       $year = $_POST['year']  ;
       } else {}

    $sql="INSERT INTO information ( Year ) VALUES ('".$year."')";
       ?> 
```

编辑 2：您的代码是正确的，但您应该转义值以防止 sql 注入这样做

```
insert into ....
    VALUES
       ('mysql_real_escape_string($_POST[user])','mysql_real_escape_string($_POST[email])'......... 
```

# windows-8 - Windows 8 上 Internet Explorer 10 全局代理设置的注册表项

> ID：13981621
> 
> 赞同：10
> 
> 时间：2012-12-20T22:32:16.820
> 
> 标签：windows-8, proxy, registry, internet-explorer-10

我有一个设置代理设置的程序，它可以在 Windows 8 和 IE 10 之前的 Windows 早期版本中运行。它设置了下面的键。在 Windows 8 中，其他浏览器（如 firefox）识别更改并使用代理设置。对于 IE 10，全局策略生效（设置灰显）但代理设置本身无效。如果我将 ProxySettingsPerUser 设置为 1 并将相同的密钥复制到 HKCU，那么 IE 会将它们用于当前用户......但我需要它来覆盖所有用户。

```
HKLM "SOFTWARE\Policies\Microsoft\Internet Explorer\Control Panel" "Proxy" = 1  
HKLM "SOFTWARE\Policies\Microsoft\Internet Explorer\Control Panel" "AutoConfig" = 1  
HKLM "SOFTWARE\Policies\Microsoft\Windows\CurrentVersion\Internet Settings" "ProxySettingsPerUser" = 0  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "DialupUseLanSettings" = 1  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "WarnOnIntranet" = 0  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "ProxyEnable" = 1  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "MigrateProxy" = 1  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "ProxyServer" = <server name>  
HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Internet Settings" "ProxyOverride" = <list of exceptions> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-06T15:22:45.247

[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\CurrentVersion\Internet 设置] "ProxySettingsPerUser"=dword:00000000

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T09:13:49.227

为您的用户创建一个包含您的代理设置的 .reg 文件。创建一个批处理文件，将其设置为运行扩展名为 /s 的 .reg 文件

在使用登录脚本的服务器上，告诉登录运行批处理文件。杰森

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T15:20:57.327

尝试

HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\CurrentVersion\Internet 设置

EnableAutoProxyResultCache = 双字：0

# servicestack - .net 4 中的 ServiceStack Razor 模板和 IHtmlString

> ID：13981622
> 
> 赞同：1
> 
> 时间：2012-12-20T22:32:36.400
> 
> 标签：servicestack

我试图让 ServiceStack.Razor 和[htmltags](https://github.com/darthfubumvc/htmltags)一起玩得很好。看起来我需要[TemplateBase](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Razor/Templating/TemplateBase.cs#L220)在写出页面时检查 IHtmlString。下面的代码有效（并从[MvcHtmlString/DynamicMvcHtmlString](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Html/TagBuilder.cs#L60)中获取线索），但这似乎不是一个很好的解决方案，因为每次写入都会发生反射。

有任何想法吗？

```
 /// <summary>
    /// Writes the specified object to the template result.
    /// </summary>
    /// <param name="object">The object to write.</param>
    public void Write(object @object)
    {
        if (@object == null)
            return;

        if (@object is MvcHtmlString)
        {
            Builder.Append(@object);
        }
        else if (typeof (HttpContext).Assembly.GetType("System.Web.IHtmlString") != null && (typeof (HttpContext).Assembly.GetType("System.Web.IHtmlString")).IsInstanceOfType(@object))
        {
            Builder.Append(@object);
        }
        else
        {
            var strValue = Convert.ToString(@object);
            Builder.Append(HttpUtility.HtmlEncode(strValue));
        }
    } 
```

我当前的解决方法是将 html 包装在新的 MvcHtmlString

```
 public static MvcHtmlString ToMvcHtmlString(this HtmlTag htmlTag)
    {
        return MvcHtmlString.Create(htmlTag.ToHtmlString());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:22:44.790

如果您使用的是 ASP.Net 4，那么您应该可以`IHtmlString`直接引用：

```
var hs = @object as IHtmlString;
if (hs != null)
{
    Builder.Append(hs);
} 
```

问题是，如果您使用的是较旧的 ASP.Net但想使用 MVC 2 - 微软想出了一个[有点尴尬](https://stackoverflow.com/questions/3382860/htmlstring-vs-mvchtmlstring)的`MvcHtmlString`.`System.Web.IHtmlString`以前的版本`System.Web`（没有`IHtmlString`）。

现在 MVC 3 及更高版本*需要*ASP.Net 4，所以这不再是问题，只需始终使用`IHtmlString`.

如果您坚持使用 MVC 2 和 .Net 3.5，那么您当前的解决方法是唯一的解决方法。

但是，当您使用 .Net 4 时，您不需要坚持使用 MVC 2 项目 -[您应该能够以最少的更改升级到 MVC 3](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)。

# python - Python TypeError 传递类变量？

> ID：13981624
> 
> 赞同：0
> 
> 时间：2012-12-20T22:32:52.620
> 
> 标签：python, class, pygame

所以我试图将变量从一个类传递到另一个类。我希望 Map 类从 Game 类接收变量。当我运行它时，我得到一个错误：

> ```
> self.width      = w*self.multi 
> TypeError: Error when calling the metaclass bases
> can't multiply sequence by non-int of type 'dict' 
> ```

我该如何解决这个问题，或者我应该以不同的方式解决这个问题？

```
import pygame, os
from pygame.locals import *
from pygame import Color
from time import time
from datetime import datetime

class Game():
    """ Lets try to get this going by simple steps
    One by one. First step, lets figure how to make a class
    that can do the display stuff. NOTE TO SELF: Remember, these
    are only called ONCE at the start. Lord have mercy on my soul"""
    def __init__(self, w=256, h=224, multi=3):
        """Initialization"""
        pygame.init()
        self.multi      = multi
        self.runGame    = True
        self.width      = w*self.multi
        self.height     = h*self.multi
        self.sprSz      = 16*self.multi
        self.clock      = pygame.time.Clock()
        self.screen     = pygame.display.set_mode((self.width, self.height))
        self.kl         = []
        self.walk       = [0, 0]
        self.speed      = self.multi*1.5
        self.x,self.y   = (self.width/2-(self.sprSz/2)), (self.height/2-(self.sprSz/2))
        self.music      = self.sndLoad('relent.ogg')
        self.playerSpr  = self.imgLoad('link1.png', self.multi, 0, 0)
        self.playerRec  = Rect(self.x,self.y,self.sprSz,self.sprSz)
        self.aSprite    = self.imgLoad('greenwall_01.png', self.multi, 0, 0)
        self.aSpriteRec = Rect(self.aSprite.get_rect())

    def imgLoad(self, image, size, flipx, flipy):
        try:
            self.img=pygame.image.load('images/'+image).convert_alpha()
        except pygame.error, message:
            print "Unable to load image: " + image
            raise SystemExit, message               
        if size>1:
            self.img=pygame.transform.scale(self.img, (self.img.get_width()*size, self.img.get_height()*size))
        if flipx==1:
            self.img=pygame.transform.flip(self.img, True, False)
        if flipy==1:
            self.img=pygame.transform.flip(self.img, False, True)
        if flipy>1 or flipy<0:
            self.img=pygame.transform.rotate(self.img, flipy)        
        return self.img

    def sndLoad(self, sound):
        try:
            self.sound = pygame.mixer.Sound('sounds/'+sound)
        except pygame.error, message:
            print "Cannot load sound: " + sound
            raise SystemExit, message
        return self.sound    

    def mainLoop(self):
        """Loop through the main game routines
        1\. Drawing  2\. Input handling  3\. Updating
        Then loop through it until user quits"""
        self.music.play()
        self.music.set_volume(0.01)
        while self.runGame:
            self.clock.tick(160)
            self.events()
            self.draw()

    def events(self):
        """Time to handle some events"""
        for e in pygame.event.get():
            if (e.type == pygame.QUIT) or (e.type == KEYDOWN and e.key == K_ESCAPE):
                self.runGame = False
                break
            if e.type == KEYDOWN and e.key == K_PRINT:
                self.screenShot()
            if e.type==KEYDOWN:    
                if e.key==pygame.K_a: self.kl.append(1)
                if e.key==pygame.K_d: self.kl.append(2)
                if e.key==pygame.K_w: self.kl.append(3)
                if e.key==pygame.K_s: self.kl.append(4)             
            if e.type==pygame.KEYUP:
                if e.key==pygame.K_a: self.kl.remove(1)            
                if e.key==pygame.K_d: self.kl.remove(2)
                if e.key==pygame.K_w: self.kl.remove(3)             
                if e.key==pygame.K_s: self.kl.remove(4)

            if   self.kl[-1:]==[1]: self.walk=[-self.speed, 0]
            elif self.kl[-1:]==[2]: self.walk=[ self.speed, 0]
            elif self.kl[-1:]==[3]: self.walk=[0,-self.speed]
            elif self.kl[-1:]==[4]: self.walk=[0, self.speed]
            else:                   self.walk=[0, 0]

        self.playerRec.move_ip(*self.walk)              # instead of self.x+=self.walk[0] / self.y+=self.walk[1]
        self.playerRec.clamp_ip(self.screen.get_rect()) # probably do this right after 'move_ip'

    def screenShot(self):
        """Lets make a folder if it doesnt exist for screenshots
        Then lets name teh screenshot something useful and unique"""
        if not os.path.exists('screenshots'):
            os.makedirs('screenshots')
        t = datetime.now()
        pygame.image.save(self.screen, ('screenshots/'+str(t.strftime("%a-%d-%b-%Y-%H.%M.%S_%f"))+'.png'))

    def idk(self):
        pygame.sprite.collide_rect(left, right)

    def draw(self):
        """Draw and update the main screen. Sacrifice virgins to the
        unholy prankster god of programming and cross fingers"""
        pygame.display.set_caption('Grid2\. FPS: '+str(round(self.clock.get_fps(), 1)))
        back = self.screen.fill(Color('darkblue'))
        map.drawMapArray(map.readMap('kk.txt'))             
        link = self.screen.blit(self.playerSpr, self.playerRec) # 'blit' accepts a 'Rect' as second parameter
        bush = self.screen.blit(self.aSprite, self.aSpriteRec)
        d = link.colliderect(bush)
        print d  
        pygame.display.update()

class Map(Game()):
    """What we need to do here is go out and open a map file. 
    Read the file, and for each charactor load it onto the surface 
    in the right x/y coords. Should be easy. lulz"""
    def __init__(self, md='maps/'):
        self.md     = md
        self.tiles  = []
        #self.sprSz  = game.sprSz
        #self.multi  = game.multi
        #self.screen = game.screen

    def readMap(self, mapfile):
        """Lets open that map file up in a semi elegant way. Let
        us code cleanly and improve on simple things. """
        try:
            self.mpath  = os.path.join(self.md, mapfile)
            self.map    = open(self.mpath, 'r')
        except IOError, message:
            print "Unable to Map: " + self.md+mapfile
            raise SystemExit, message

        self.lines  = self.map.readlines()        
        self.Ty     = len(self.lines)
        self.Tx     = len(self.lines[0])-1
        self.map.close()

        for c in range(self.Ty):
            self.tiles.append([])
            for r in range(self.Tx):
                self.tiles[c].append(self.lines[c][r])                        
        return self.tiles

    def drawMapArray(self, map):
        for x in range(0, self.Tx):
            for y in range(0, self.Ty):
                #Determines tile type.
                curTile=tile_d[map[y][x]][3]
                #print x,y
                #print map
                #print curTile
                #if  tile_d[self.readMap[y][x]][2]>-1:
                    #game.screen.blit(curTile, (x*game.sprSz, y*game.sprSz+game.multi*56), (tile_d[self.readMap[y][x]][2]*resmulti*16, 0, 16*resmulti, 16*resmulti))
                #else:
                e = self.screen.blit(curTile, (x*self.sprSz, y*self.sprSz+self.multi*56))
                #print e

if __name__ == "__main__":
    game = Game()
    map = Map()   
    tile_d={
'#' : ('Link', True, 0, game.imgLoad("link1.png", game.multi, 0, 0)),
' ' : ('Link', True, 0, game.imgLoad("empty.png", game.multi, 0, 0)),
'Q' : ('Link', True, 0, game.imgLoad("link1.png", game.multi, 0, 0)),
'R' : ('Link', True, 0, game.imgLoad("empty.png", game.multi, 0, 0)),
'W' : ('Link', True, 0, game.imgLoad("link1.png", game.multi, 0, 0)),
'E' : ('Link', True, 0, game.imgLoad("empty.png", game.multi, 0, 0)),
'R' : ('Link', True, 0, game.imgLoad("link1.png", game.multi, 0, 0)),
'B' : ('Link', True, 0, game.imgLoad("empty.png", game.multi, 0, 0)),
'T' : ('Link', True, 0, game.imgLoad("link1.png", game.multi, 0, 0)),
'Y' : ('Link', True, 0, game.imgLoad("empty.png", game.multi, 0, 0)),
}
    game.mainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T03:13:09.157

您正在使用 Python 的语法进行类继承。继承用于*“is a”*关系、假设类，例如`Sidescroller`or `FPS`，因为它们是游戏的类型。

`Map`不是游戏类型，是游戏中的东西，所以`Game`和`Map`有*'有'的*关系。你的游戏有一张地图，就像它有精灵和声音一样。*'has a'*关系没有特殊的语法。父类只是创建子类的一个实例。

由于您想访问`Game`的变量，因此可以`Map`在声明地图时将其原始实例传递给。如果在`Map`内声明`Game`，则可以使用 传递游戏实例`self`。这是一个例子：

```
# print the game's title via the Map class

class Game:

    def __init__(self):
        self.title = "Robot Ninja Spaceman: Lazer Quest"
        self.map = Map(self)

class Map:

    def __init__(self, game):
        print game.title

if __name__ == "__main__":
    game = Game() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:49:54.913

要`Map`用作`Game`基类，您应该使用`class Map(Game)`而不是定义它`class Map(Game())`。

下面是一个简短示例，说明当您尝试使用 的实例`Game`作为基类时会发生什么：

```
>>> class Game():
...     def __init__(*args):
...         print args
... 
>>> class Map(Game()):
...     pass
... 
(<__main__.Game instance at 0x7fa41d06f320>,)
(<__main__.Game instance at 0x7fa41d0549e0>, 'Map', (<__main__.Game instance at 0x7fa41d06f320>,), {'__module__': '__main__'}) 
```

所以我们看到，当类定义`Map`运行时，我们得到了两个对`Game.__init__()`. 第一个是使用`Game`创建的实例`Game()`，接下来发生的事情有点奇怪。刚刚创建的实例用作 的基类`Map`，因此*它的* `__init__()`方法使用与 的三参数版本[`type()`](http://docs.python.org/2/library/functions.html#type)（名称、基类和字典）相同的参数调用。

这就是为什么你最终会看到你看到的那个奇怪的错误，你最终会调用`Game.__init__()`where `w`is the string `'Map'`and `multi`is a dictionary，并尝试将字符串乘以字典会导致 TypeError：

```
>>> self.multi = 'Map' * {}
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't multiply sequence by non-int of type 'dict' 
```

# asp.net - asp.net 中的多实体框架上下文

> ID：13981627
> 
> 赞同：0
> 
> 时间：2012-12-20T22:33:04.757
> 
> 标签：asp.net, .net, entity-framework, entity-framework-4

我有一个类似于 4 个步骤的向导的网站。该站点由asp.net web 表单实现。该向导尝试构建和对象并将其添加到数据库。对象图如下：

```
class A { B bObject ; C cObject ; D dObject}
class B {} ; class C{}; class D{}; 
```

对象 b、c、d 在向导步骤期间从数据库中获取并填充到 A 中。如您所知，b、c、d 是通过不同的上下文从数据库中获取的。当我进入将 A 保存到 DB 的最后一步时，上下文将 b,c,d 识别为新对象，而不仅仅是未修改，因此仅链接它们，因为它们来自不同的上下文。

有什么建议可以用一种干净的方式解决这个问题吗？

由于帖子包而导致的不同上下文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:53:18.380

这是最佳答案是“不要那样*做*！”的情况之一。

处理此问题的一种方法是让向导步骤从用户那里收集创建数据库表所需的所有数据，并将数据保存在会话状态中。只有在执行最后一个向导步骤时，您才会从会话状态中获取数据并使用它来创建 EF 实体，然后保存更改，所有这些都在一个上下文中。

另一种方法是将对象图保存为 EF 对象（仍处于会话状态），然后在最后的向导步骤中，打开一个上下文并使用该`Attach`方法将对象附加到当前上下文。同样，这使用单个上下文。

# ruby-on-rails - 在 Rails 中立即并行执行的后台任务

> ID：13981633
> 
> 赞同：1
> 
> 时间：2012-12-20T22:33:50.410
> 
> 标签：ruby-on-rails, rake, fork, passenger, delayed-job

我们的 Rails Web 应用程序必须根据请求从 ftp 下载/解压缩包含 html 页面的档案，以便用户通过浏览器查看。

存档可能非常大，因此用户必须等到它在服务器上下载/解压缩。

我以在用户请求中调用 fork/Process.detach 的方式实现了进度条，以便他的请求完成，但下载/解包过程继续在后台运行。并且在他的浏览器中呈现的 javascript 会 ping 我们的服务器以获取状态，直到一切准备就绪，然后它将他重定向到解压缩的 html 页面。

只要用户请求一个存档，一切都会顺利进行，但如果他尝试同时运行 2 个或更多请求（以便启动更多分叉），似乎只有一个完成，其余的过期/次出局/被乘客杀死（？）。我想这是乘客/分叉的问题。

我不确定是否可以以某种方式修复它，所以我想我需要切换到另一个解决方案。该解决方案需要允许立即并行处理下载。因此，如果用户请求多个档案，他必须同时查看所有档案的下载/解压缩进度。

我正在考虑立即运行后台 rake 作业，但启动起来似乎很慢（我们的服务器上每分钟都会发生很多 cron rake 任务）。我喜欢 fork 的原因是它的启动速度非常快。我知道有延迟的工作，我们也大量使用它来完成其他任务。但是它可以在没有队列的情况下立即同时启动多个进程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T04:30:53.657

通过保留叉子并使用单个 dj 工作人员来解决。这样，我可以根据需要同时启动尽可能多的进程，而不会遇到乘客/修改我们产品的 gemset 的问题（我们正试图避免这种情况，因为它在过去导致了错误）

不确定在 dj worker 内部分叉是否会导致任何麻烦，所以 [在延迟工作中运行分叉时询问](https://stackoverflow.com/questions/13997807/running-fork-in-delayed-job)

如果 id 可以自由修改 gemset，id 可能会按照 wrdevos 的建议使用 resque、sidekiq 或 girl_friday（但可能性较小，因为它取决于运行的服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T14:18:37.650

使用 Resque：[https ://github.com/defunkt/resque](https://github.com/defunkt/resque)

更多关于 bg 工作和 Resque 的信息。

[https://github.com/blog/542-introducing-resque](https://github.com/blog/542-introducing-resque)

# c++ - 平等的定义

> ID：13981635
> 
> 赞同：5
> 
> 时间：2012-12-20T22:34:05.247
> 
> 标签：c++, operator-overloading, equality, c++-concepts, equivalence-classes

在 C++ 中重载“==”运算符时，是否有关于明确表示相等性的标准定义，或者有一组关于“==”应该如何表现的准则？

我目前有一个类不会将其整个自身存储在内存中。它基本上使用优先级队列来确定其内部对象被使用的频率，以及何时从队列末尾弹出对象，它们会从内存中删除并写入磁盘。

所以现在问题出现在相等上，这两个对象相等意味着什么。因为我们可以从在各个方面都相同的对象 A 和 B 开始，所以它们将相同的数据加载到内存中，并且它们在磁盘上具有相同的数据。但是在 A 和 B 上调用了一系列函数之后，它们现在可能会有所不同。A 和 B 在磁盘上仍然有相同的数据，但它们将不同的数据加载到内存中。所以问题是应该`A == B`解析为真还是假？

是否有一套规则或指南来定义这应该如何工作？或者这只是我决定什么对程序最有意义并记录“==”做什么的情况？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-20T22:37:13.717

任何`operator==`重载都应该尊重[等价关系](http://en.wikipedia.org/wiki/Equivalence_relation)的公理，即

*   `x == x`, 对于所有对象`x`
*   如果`x == y`, 那么`y == x`
*   如果`x == y`和`y == z`, 那么`x == z`.

许多使用的算法`==`依赖于它实现等价关系，在 §17.6.3.1 中正式化为`EqualityComparable`概念。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-20T22:36:10.003

标准中没有关于重载`operator ==`应该如何表现的定义。

但是一个足够好的指导方针是 - 如果你必须考虑它，只要你有，你可能甚至不应该超载`operator ==`。如果它不直观，则弊大于利。

> 所以问题是 A == B 应该解析为真还是假？

IMO，它应该导致编译器错误。:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:49:20.300

ALL 运算符重载应该做“你所期望的”。如果对象实质上不相同，那么让运算符 == 返回 true 是没有意义的。您如何定义“相同”当然是我们可以争论的问题。可以实现一个“nocasestring”，它的行为就像一个字符串，但是如果你有一个字符串“HELLO”和一个“hello”，它们被认为是相等的，因为大小写无关紧要。或者，如果您实现了自己的“Float”类，其中 == 会进行一些数学运算以避免常规浮点的脆弱比较。所以是的，在某些情况下 == 并不完全“因为所有元素都是 a. == b.”，但它确实应该是例外。

同样，如果一个运算符不完全有意义，不要让它做一些“令人惊讶”的事情（例如`-`对于字符串 - 它有什么作用？或者将一个字符串乘以另一个字符串 - 乘以整数可能有意义）。

编程中的惊喜是个坏主意。如果事情没有按照您的预期进行，那么您会从阅读/修改代码中获得糟糕的体验。

# google-app-engine - GAE 通过 app.yaml、python 装饰器或 users.get_current_user 强制登录？

> ID：13981641
> 
> 赞同：3
> 
> 时间：2012-12-20T22:34:30.743
> 
> 标签：google-app-engine, python-2.7, oauth-2.0, google-api-python-client, app.yaml

我在我的 app.yaml 配置文件中为 GAE 应用程序使用了“登录”选项。看起来像这样：

```
- url: /admin/.*
  script: myapp.app
  login: admin

- url: /.*
  script: myapp.app
  login: required 
```

**更新（根据[bossylobster](https://stackoverflow.com/users/1068170/bossylobster)的建议）**：我希望用户始终登录（未签名的用户不能做任何事情），我需要知道用户是谁。实际上，我需要 OAuth2 凭据才能与 Google API 进行通信（例如，我需要使用 Google Profiles API 获取一些用户信息，并使用 Google Calendar API 写入用户的日历）。最后，我需要一个管理员用户来执行一些操作（比如创建新域的用户，使用 Google Provisioning API）

我正在使用 google-api-client 库，并使用 oauth2 装饰器。然后，在我的 RequestHandlers 中，我有这个：

```
class MainHandler(webapp.RequestHandler):

  @decorator.oauth_aware
  def get(self):
    if decorator.has_credentials():
      # do something

    else:
      url = decorator.authorize_url()
      self.response.out.write(template.render('templates/index.html',
           {'authorize_url': url})) 
```

最后，我读到了另一种方法：

```
user = users.get_current_user()
if user:
  # do something
else:
  greeting = ("<a href=\"%s\">Sign in or register</a>." %
    users.create_login_url("/"))

  self.response.out.write("<html><body>%s</body></html>" % greeting) 
```

处理用户身份验证以满足我的需求的最佳方法是什么（请参阅更新）？

提前谢谢了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:40:06.030

我认为您可能会混淆 OAuth 2.0 装饰器与其他两种方法的作用。

OAuth 2.0 装饰器并非特定于您的应用程序，如果您想为您的用户获取 OAuth 2.0 凭据，然后使用这些凭据与 Google API 通信，则可以使用它。

另外两种是从 App Engine 设置的会话 cookie 中获取用户信息的简单方法。

如果你真的想要一个装饰器，你会使用`login_required`，记录在这里：
[https ://developers.google.com/appengine/docs/python/tools/webapp/utilmodule](https://developers.google.com/appengine/docs/python/tools/webapp/utilmodule)

`app.yaml`在指定 in 、检查 if `users.get_current_user`is`None`或 using `@login_required`on 指定的处理程序之间没有一种最佳方法。

您想要使用的三个不同时间的粗略近似值如下：

1）如果您希望用户登录，但不需要知道具体用户，请使用`login: required`in `app.yaml`。

2）如果想知道用户，但如果用户没有登录，也有一个后备，使用`users.get_current_user`和调整你的行为给用户或者`None`如果那是返回值。

3) 如果您想了解用户并始终有一个登录，请使用`@login_required`.

## 更新：

（基于对需求的进一步解释。）由于您始终希望用户登录并始终希望他们获得 OAuth 2.0 凭据，因此您应该始终使用`decorator.oauth_required`.

至于使用 API，只有[Google Calendar API](https://developers.google.com/google-apps/calendar/)可以与`google-api-python-client`库一起使用。[Google Apps Provisioning API](https://developers.google.com/google-apps/provisioning/)是一个[Google Data API](https://developers.google.com/gdata/docs/2.0/reference) ，而Calendar API 是一个[基于发现的 API](https://developers.google.com/discovery/v1/getting_started#background)。

因此，您需要使用该`gdata-python-client` [库](https://github.com/google/gdata-python-client/)来使用 Provisioning API。您需要手动从一个[`oauth2client.client.OAuth2Credentials`对象](https://github.com/google/oauth2client/blob/311a53fbcae550526a74057f27cb9df73a0af009/oauth2client/client.py#L473)转换为一个对象，[`gdata.gauth.OAuth2Token`](https://github.com/google/gdata-python-client/blob/f85797c96c7ed845610155382ad8e8638bcb3172/src/gdata/gauth.py#L1143)以便为任一对象使用相同的标记。

使用时`OAuth2Decorator`，您将能够访问`oauth2client.client.OAuth2Credentials`via的实例`decorator.credentials()`。

## 第二次更新：

我最近将对此的支持[添加](https://github.com/google/gdata-python-client/commit/437892ce10d0325daaaf9e91bf95c3e1c9fdabbd)`gdata-python-client`到.

```
from gdata.gauth import OAuth2TokenFromCredentials
auth_token = OAuth2TokenFromCredentials(decorator.credentials())
auth_token.authorize(client) 
```

该实现允许两个令牌/凭证对象`decorator.credentials()`并`auth_token`保持同步，无论您更改哪个对象的值。

# c# - 用“any”替换xml文件中的标题

> ID：13981643
> 
> 赞同：1
> 
> 时间：2012-12-20T22:34:44.200
> 
> 标签：c#, xml

我有一个结构如下的 xml 文件：

```
<MyXmlFile>
<FirstTitle>
<SomeItem parameter1="text">
<SecondTitle>
<ThirdTitle>
... 
```

假设 SecondTitle 是动态命名的，所以我不知道它的名称。在我的代码中，我正在检查是否存在 ThirdTitle。我需要做的是，将其加载到 XmlNodeList 中。因此，在 XmlNodeList 声明中，我需要“跳过”xml 中数据路径的一部分。所以，如果是

`XmlNodeList myList = myXmlDocument.SelectNodes("/MyXmlFile/FirstTitle/SecondTitle/ThirdTitle");`

在这里，我需要用任何东西替换“SecondTitle”，只要拿走那里的任何东西。

# android - 在 Android 中创建应用程序/小部件以清除某个应用程序的默认值

> ID：13981651
> 
> 赞同：0
> 
> 时间：2012-12-20T22:35:06.763
> 
> 标签：android, widget

我需要编写一个代码来创建一个应用程序/小部件，它将为应用程序“清除默认值”。用户无需转到“设置->应用程序->[应用程序]->清除默认值”，而是单击应用程序图标（或小部件）以清除这些默认值。

我是安卓新手。我只是想要一些帮助来创建和构建我的第一个 Android 应用程序/小部件。

非常感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:41:08.470

您不能以这种方式影响其他应用程序。只有设置应用程序，或者可能作为设备固件的一部分编写的应用程序，才能更改特定`Intent`结构的默认应用程序。

# visual-studio-2010 - 在线加载 NuGet 包并预安装它们

> ID：13981652
> 
> 赞同：0
> 
> 时间：2012-12-20T22:35:24.993
> 
> 标签：visual-studio-2010, nuget, project-template

我知道我可以在我的项目模板中[预安装NuGet 包。](http://docs.nuget.org/docs/reference/packages-in-visual-studio-templates "预安装")
但是我无法确定是否可以在线加载这些包，而不必将它们存储在项目模板中的某个位置。

如果可能的话，请给我一个提示，我可以在哪里找到一个例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:52:09.997

较旧的文章，但回答了问题：

[http://blogs.msdn.com/b/marcinon/archive/2011/07/08/project-templates-and-preinstalled-nuget-packages.aspx](http://blogs.msdn.com/b/marcinon/archive/2011/07/08/project-templates-and-preinstalled-nuget-packages.aspx)

> 一个常见的问题是为什么不支持直接从[http://nuget.org](http://nuget.org)下载 nupkg 文件。我们决定不支持这样的选项，因为用户希望项目模板能够快速实例化，而从 Internet 下载文件会减慢速度。此外，它不适用于飞机或其他无法连接的情况。

# .net - .NET 4.5 有什么版本的实体框架？

> ID：13981655
> 
> 赞同：4
> 
> 时间：2012-12-20T22:35:41.410
> 
> 标签：.net, entity-framework

我正在为某些项目升级到 .NET 4.5，并且我使用的是 EF 5。我是否仍需要从所有项目中引用 EF 5？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:38:37.433

Entity Framework 5 是一个单独的 API，不包含在 .NET 4.5 框架中（但 VS2012 确实包含它）。最好使用 NuGet 在所有需要它的项目中包含和引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:47:19.577

是的，您仍然必须引用 EF——它没有被嵌入到`System`核心 .NET 程序集中或其中之一。

但是，如果您的项目是 .NET 4.5 之前的版本，则您引用的是 EF 4.4，而不是真正的 EF 5。程序集的版本与 4.5 .NET Framework 的 EF 版本不同。因此，您需要确保将您的 EF 版本升级到 .NET 4.5 Framework 支持的真正 EF5。

这篇[文章](http://www.codevendor.com/news/when-entity-framework-5-ef5-is-not-entity-framework-5-ef5/)很好地解释了它。

# javascript - 如何使用jQuery单击前一个屏幕上的按钮？

> ID：13981662
> 
> 赞同：0
> 
> 时间：2012-12-20T22:36:10.163
> 
> 标签：javascript, jquery

我需要通过单击当前屏幕上的按钮来单击上一个屏幕上的按钮 单击当前按钮屏幕的编写方法很简单（见下文），但我很难在上一个屏幕上找到按钮。

```
$('body.printing').prepend('<input type="button" value="Retry" id="RetryLetter"/>');

    $("#RetryLetter").click(function()
    {
//          parent.history.back().$("#printLetter").click();
        var prButton =  document.referrer.getElementById("printLetter");
        prButton.click();
//          window.opener.$("#printLetter").click();
    }); 
```

我尝试了几种变体 - 到目前为止没有任何效果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:39:11.733

document.referrer 只是一个带有引用 URL 的字符串。它不是您可以访问的 DOM 元素。

[http://wap.w3schools.com/jsref/tryit.asp?filename=tryjsref_doc_referrer](http://wap.w3schools.com/jsref/tryit.asp?filename=tryjsref_doc_referrer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:35:22.153

因此，似乎单击上一页上的按钮的唯一方法是从该按钮重新创建 Get 请求。
我记住了会话对象中的请求字符串（URL和参数），然后从下一页重复这个请求

# java - getSuperclass() 中的类有意义吗？

> ID：13981663
> 
> 赞同：4
> 
> 时间：2012-12-20T22:36:13.323
> 
> 标签：java, generics, wildcard, type-parameter, bounded-wildcard

```
Class<? super T>  getSuperclass() 
```

Class 类中的 getSuperclass() 返回一个类型为<? super T>，也就是说Super的Class的类型参数可以是T或者它的任何一个Superclass，那么SuperClass的Class类型参数怎么会和子类的类型相同呢？

例如

```
Class<Manage>.class.getSuperclass() 
```

不返回

```
Class<Manager> 
```

在所有..就像从来没有

这有意义吗？或者我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T22:44:24.013

界限过于宽泛，因为它与您使用 Java 的泛型所能表达的一样接近。

你真正想要的是`<the immediate superclass of T>`; 但是没有办法用 Java 的泛型来写。也没有办法写`<? super T excluding T>`。`<? super T>`几乎与 Java 泛型的工作方式一样具体。

对于它的价值，你可以保证你得到的类将是有问题的超类——不管它的类型绑定是什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T22:44:32.700

Java 泛型无法指定“某些超类但*不是*类本身”。因此，提供的界限是您可以指定的最佳界限。

# java - 如何从 web 服务部分获取大数据？

> ID：13981668
> 
> 赞同：0
> 
> 时间：2012-12-20T22:36:29.727
> 
> 标签：java, wcf, web-services, jsf, jsf-2

我在 JSF 2.0 中应用了（在 Glassfish 3 上）。现在我必须编写一个 .NET WCF Web 服务，该服务将连接到数据库，并被此 JSF 应用程序用于填充 DataTables。

DataTable 将有分页，但如何仅获取（形成 Web 服务）该行，这些行将显示在单页中。并且将允许诸如排序、删除、编辑行等操作...

是否有任何内置机制/库来支持它？我的意思是在 WCF 或 JSF2 中？

感谢帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T04:27:44.220

您应该有一个 WSDL 文件（向 Web 服务所有者/维护者/管理员询问）。WSDL 文件通过 XML 指定如何定义 Web 服务。像 Eclipse 这样有点理智的 IDE 可以通过*File > New > Other... > Web Services > Web Service Client*为它自动生成一个完整的 Java 客户端应用程序。然后，您应该最终得到一个自动生成的 Web 服务客户端项目，您只需将其添加为JSF 项目的*部署程序集*，以便访问/使用自动生成的客户端类。

[你可以在这里找到一个具体的教程](http://px.pats.no/px/Eclipse_tutorial.html)，它展示了如何生成它并将其与普通的 Java 应用程序项目（而不是 JSF 项目）结合使用。

至于部分检索数据，这取决于 Web 服务是否根据 WSDL 支持。您始终可以向 Web 服务的维护者发出增强请求，以便他们将其添加到 Web 服务（然后您应该获得 WSDL 的更新版本，然后基于它重新生成 Java 客户端应用程序）。

# javascript - html5 canvas clearRect 不会清除 android froyo 浏览器中的图像

> ID：13981669
> 
> 赞同：1
> 
> 时间：2012-12-20T22:36:30.923
> 
> 标签：javascript, html, canvas

我正在尝试使用以下代码根据设备的方向在移动浏览器上旋转画布

```
e=window.event;
        var w=window.innerWidth||window.screen.availWidth;
        var h=window.innerHeight||window.screen.availHeight;
        var ww = colouringImage.width;
        var hh = colouringImage.height;
        var c = document.createElement('canvas');

        var cntx = c.getContext('2d');
        if(this.canvas.height > h) { 
            c.setAttribute('width', hh);
            c.setAttribute('height',ww);
            cntx.rotate(-90 * Math.PI / 180);
            cntx.drawImage(colouringImage, -ww, 0);
            this.artboard.canvas.width = hh;
            this.artboard.canvas.height = ww;
            this.artboard.clearRect(0,0,hh,ww);
            this.artboard.drawImage(c,0,0);
            c = document.createElement('canvas');
            c.setAttribute('width', hh);
            c.setAttribute('height',ww);
            cntx = c.getContext('2d');
            cntx.rotate(-90 * Math.PI / 180);
            cntx.drawImage(this.canvas,-ww,0);
            this.canvas.width = hh;
            this.canvas.height = ww;
            this.context.clearRect(0,0,hh,ww);
            this.context.drawImage(c,0,0);
         }else if (this.canvas.width > w)
         {
            c.setAttribute('width', ww);
            c.setAttribute('height', hh);
            cntx.drawImage(colouringImage, 0, 0);
            this.artboard.canvas.width= ww;
            this.artboard.canvas.height = hh;
            this.artboard.clearRect(0,0,ww,hh);
            this.artboard.drawImage(c,0,0);
            c = document.createElement('canvas');
            c.setAttribute('width',ww);
            c.setAttribute('height',hh);
            cntx = c.getContext('2d');
            cntx.rotate(90 * Math.PI / 180);
            cntx.drawImage(this.canvas,0,-ww);
            cntx.translate(hh/2,ww/2)
            cntx.rotate(0 * Math.PI / 180);
            this.canvas.width = ww;
            this.canvas.height=hh;
            this.context.clearRect(0,0,ww,hh);
            this.context.drawImage(c,0,0);
         } 
```

我在这里所做的是复制已经绘制的内容并将其旋转到临时画布上，然后在清除后将其绘制回画布上。但是，正在发生的事情是它似乎没有清除图像。图像是 png 并且需要是透明的。

还有其他方法可以清除画在画布上的图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T15:18:58.357

通过创建基于内存的画布并应用必要的旋转，然后使用基于内存的画布作为源将图像重新绘制到主画布上，能够准确地旋转画布而不扭曲绘图坐标。

注意：我目前正在使用为我的项目设计的 2 个画布。因此，我必须根据需要创建基于 ememory 的画布以应用所需的任何翻译

# php - Laravel 对名为数组的复选框进行验证

> ID：13981670
> 
> 赞同：0
> 
> 时间：2012-12-20T22:36:34.407
> 
> 标签：php, arrays, validation, laravel

我的表格中有一些区域，例如：

```
<ul>
<li>
<input type="checkbox" name="post_categories[]" value="16">English First Main Category<br>
<ul>
<li><input type="checkbox" name="post_categories[]" value="17">English First Subcategory<br></li>
</ul>
</li>
</ul> 
```

当我尝试将它们验证为必填字段或其他内容时，Laravel 没有验证规则。我的规则如下（在 /application/models/posts.php 中）：

```
public static $rules = array(

    'post_title' => 'required',
    'post_body' => 'required',
    'content_language'=>'required|alpha',
    'post_categories'=>'array_numeric',
    'post_sequence_number'=>'numeric'

    );

public static function validate($data){ 

    return Validator::make($data, static::$rules);

} 
```

在 /application/library/validate.php 我有一个验证数组是否为数字的函数：

```
Class Validator extends Laravel\Validator {

        public function validate_array_numeric($attribute, $value, $parameters){
            $numeric_values = array_filter($value, create_function('$item', 'return (is_numeric($item));'));
            return count($numeric_values) == count($value);
        }

    } 
```

规则完美运行，除了 post_categories[]。我得到错误：

```
Method [array_numeric] does not exist. 
```

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T15:44:47.877

我不得不解决同样的问题。这是我所做的：

我创建了一个扩展默认类的自定义`Laravel\Validator`类。我希望能够在处理多个值时告诉验证器（例如您的情况）。在我的实现中，这可以通过将“_array”附加到某个字段名称的每个验证规则来完成。我的班级所做的是检查规则名称是否有这个后缀，如果有的话，值参数（在这种情况下是一个数组）被分解为其包含的项目并传递给 Laravel 中的默认验证函数。

```
<?php

class Validator extends Laravel\Validator {

  public function __call($method, $parameters)
  {
      if (substr($method, -6) === '_array')
      {
          $method = substr($method, 0, -6);
          $values = $parameters[1];
          $success = true;
          foreach ($values as $value) {
              $parameters[1] = $value;
              $success &= call_user_func_array(array($this, $method), $parameters);
          }
          return $success;
      }
      else 
      {
          return parent::__call($method, $parameters);
      }
  }

  protected function getMessage($attribute, $rule)
  {
      if (substr($rule, -6) === '_array')
      {
          $rule = substr($rule, 0, -6);
      }

      return parent::getMessage($attribute, $rule);
  }
} 
```

如上面的帖子所述，您必须进行以下更改，以便`Validator`自动加载器可以找到您的自定义类：

> 然后您需要从 application/config/application.php 文件中删除以下行：
> 
> '验证器' => 'Laravel\验证器'

完成此操作后，您将能够使用 Laravel 的所有带有 '_array' 后缀的验证规则。这是一个例子：

```
public static $rules = array(
  'post_categories'=>'required_array|alpha_array'
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T23:38:21.610

我不知道这个问题在 Laravel 4 中是否已经解决了。也许你可以试试。但我现在正在做的是扩展验证类。

您可以创建一个扩展验证类的新库。验证数组中的所有项目是否都有数值。这是在`application/libraries`：

```
class Validator extends Laravel\Validator {

    public function validate_arraynumeric($attribute, $value, $parameters){
        $numeric_values = array_filter($value, create_function('$item', 'return (is_numeric($item));'));
        return count($numeric_values) == count($value);
    }

} 
```

验证失败时更改默认错误消息。去`application/language/en/validation.php`。只需使用函数的名称作为新数组项的键：

```
"arraynumeric"   => "The :attribute contains non-numeric values", 
```

**更新**

然后您需要从`application/config/application.php`文件中删除以下行：

`'Validator' => 'Laravel\\Validator'`

要使用新的验证：

```
public static $rules = array(
'post_categories'=>'array_numeric'
); 
```

现在为所需的复选框。我假设您只需要选中一个复选框。如果复选框的数量至少为 1，则您只需检查新验证的功能即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:19:18.683

你在这里做一些奇怪的事情。

使用`post_categories[]`作为表单名称会生成一个数组。这意味着您无法使用`'post_categories[]'=>'required|numeric'`. 相反，您必须遍历数组并自行验证每个字段。

# wpf - 对于在非 ItemsControl 中实现虚拟化，是改进 ItemContainerGenerator 还是实现简单的自定义生成更好？

> ID：13981673
> 
> 赞同：1
> 
> 时间：2012-12-20T22:36:54.830
> 
> 标签：wpf, panel, itemscontrol, itemcontainergenerator

我们正在推出我们自己的特殊的基于 Items 的控件/面板组合，它不基于 ItemsControl 的子类（我们不能这样做的原因有很多，我不会在这里讨论）但我们的控件确实可以处理成千上万的数据项，所以我们想实现`Visual`虚拟化。

我们想知道的是，尝试将现有的 ItemContainerGenerator 类加入我们的设计或推出我们自己的虚拟化方法是否更有意义。

一方面，ItemContainerGenerator 已经处理了虚拟化并且非常高效，而且经过验证的代码几乎总是比从头开始更可取，但另一方面，ICG 是专门为使用而设计的，并且依赖于ItemsControl，同样，这个控件不是。另外，这是一个*容器*生成器，但在我们的例子中，我们只需要生成并布置一个特定的、已知的表示数据项的视觉效果。

现在，也许我过度简化了事情，但我所看到的只是需要确定哪些项目将在 ViewPort 中可见，确保创建、测量和排列这些项目的可视化表示，然后丢弃任何剩余的已经 -创造了视觉效果。为了跟踪这一切，似乎只需要一个简单的项目到可视化映射方案，可能需要在 DataItem 的 ViewModel 对象上使用 ItemVisual 附加属性。这样，当一个项目被移除/销毁时，我们只需检查是否存在现有的视觉效果，如果有，就对其进行核对。

也就是说，谁能想到我们不应该简单地推出自己的视觉虚拟化的原因？再一次，ICG 会这样做，但我想知道这是否将 Semi 带到商店获取鸡蛋。

# mockito - 使用 mockito 编写单元测试

> ID：13981678
> 
> 赞同：0
> 
> 时间：2012-12-20T22:37:20.340
> 
> 标签：mockito

我正在使用 mockito 在 java 中编写单元测试。

这是我要测试的陈述。

```
final Map<EntityKey, Element<Movie>> resultMap = Watcher.watch(movies); 
```

movies 是一**组**电影名称，它是识别电影的关键。

我嘲笑了观察者类

```
final Watcher<Movie> watcher = mock(Watcher.class); 
```

Mockito.when(watcher.watch(Matchers.any(Set.class))).thenReturn()

在“thenReturn”中包含什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:42:04.160

在`thenReturn`函数中，您需要传递与您要模拟的方法返回类型相同类型的对象。

然后在该对象上调用此方法时，它将返回您传递给的对象，`thenReturn`而不是实际进入函数。

这是 mocking 背后的核心概念。

话说回来。如果您正在尝试测试 Watcher.watch 方法，那么您可能无论如何都不想模拟它。你应该只模拟那些你没有测试的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:43:05.400

您需要制作一个`Map<EntityKey,Element<Movie>>`适合在其余测试中使用的。我不太确定您的测试实际上试图断言什么，但无论它是什么，请`Map`相应地选择。您的`Map`对象就是您想要从中返回的对象`thenReturn`。

# ios - iOS 等待位置管理器初始化

> ID：13981679
> 
> 赞同：7
> 
> 时间：2012-12-20T22:37:21.050
> 
> 标签：ios, map, location, cllocationmanager

我正在开发基于地图和位置跟踪的 iOS 应用程序。当用户第一次启动应用程序时，它会要求允许跟踪位置等。唯一的问题是，在执行此操作时，我在用户单击“确定”*之前*设置了初始地图视图和其他基于位置的变量的代码。

我发现我可以将这些启动步骤放在等待用户更改位置管理器权限的while循环之后，如下所示，但这不可能是最佳实践，更不用说它会导致在之间的转换中出现一些奇怪的行为启动画面和地图：

```
BOOL firstrun = TRUE;
while ([[locationManager class] authorizationStatus] == kCLAuthorizationStatusDenied || [[locationManager class] authorizationStatus] == kCLAuthorizationStatusNotDetermined) {
    NSLog(@"Waiting for location permission");
}
...initiation code... 
```

我不知道的位置管理器委托中是否有警报框的“位置访问权限”侦听器或类似功能？我在文档中看不到这种方法。有人知道这里的最佳做法是什么吗？太感谢了。

**编辑** 我开始我的位置跟踪如下：

```
if (nil == locationManager)
    locationManager = [[CLLocationManager alloc] init];

[locationManager startMonitoringSignificantLocationChanges];

self.musicmap.delegate = self;
[self.mymap setShowsUserLocation:true]; 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T21:33:31.930

我建议将您的类设为 CLLocationManagerDelegate，然后实现此方法：

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
    //Your code goes here
} 
```

更多关于 CLLocationManagerDelegate 的信息可以在[这里](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/occ/intf/CLLocationManagerDelegate)找到。

希望有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T21:24:06.417

在用户有时间接受或拒绝位置许可对话之前，我的应用程序和应用程序执行操作遇到了类似的问题。这就是我最终要做的。

```
-(BOOL)locationAuthorizationStatus {
    if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied) {
        // user has not authorized us to use location
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Location Denied", @"Location Denied")
                                                        message:NSLocalizedString(@"This app does not have permission to access your location. Please enable location access in device settings.", @"Message stating this app does not have permission to access your location and to enable location permission in settings")
                                                       delegate:self
                                              cancelButtonTitle:NSLocalizedString(@"Ok", @"Ok")
                                              otherButtonTitles: nil];
        [alert show];
        return NO;
    }

    // Check if region monitoring is available for this device
    if (![CLLocationManager regionMonitoringAvailable]) {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Geofencing Unavailable", @"Geofencing Unavailable")
                                                        message:NSLocalizedString(@"This device is not able to monitor regions", @"Message stating this device is not able to monitor regions")
                                                       delegate:nil
                                              cancelButtonTitle:nil
                                              otherButtonTitles:NSLocalizedString(@"Ok", @"Ok"), nil];
        [alert show];
        return NO;
    } else {
        if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusNotDetermined) {
            // trigger a location check to prompt user for authorization
            LocationManagerController *locationController = [LocationManagerController sharedManager];
            [locationController.locationManager startUpdatingLocation];
            // the dialogue box is triggered here
            [locationController.locationManager stopUpdatingLocation];
            _waitingOnAuthorization = YES;
            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(checkForAuthorizationStatusChange) name:@"WaitingOnAuthorizationStatus" object:nil];
            return NO;
        }
    }

    return YES;
}

-(void)checkForAuthorizationStatusChange {
    if (_waitingOnAuthorization) {
        // this should only catch location change on first time
        if ([CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized) {
            // user approved location services

        } else {
            // user declined authorization

        }
        // set flag back to NO
        _waitingOnAuthorization = NO;
    }

    // remove our notification observer
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

您必须添加适用于您的用例的变量。但这里是它的要点。

1.  通过 BOOL 方法检查授权状态 (locationAuthorizationStatus)
2.  如果可以使用位置，返回 YES 做任何你想做的事
3.  如果不是，则返回 NO 并提醒用户
4.  如果第一次，将启动位置管理器以触发位置对话，然后停止它以节省电池，设置标志并设置通知，以便您知道用户何时点击是或否。
5.  该通知触发方法 checkAuthorizationChangeStatus 并重新检查权限以查看用户做了什么。从那里，您可以根据用户的选择调用您需要的任何方法。

Apple 没有任何委托方法来捕捉这个选择，所以唯一的方法是有点 hacky。这种方法对我来说效果很好。有点hacky，但有效。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:00:48.110

```
//Start up motion manager, not sure if you need this for location manager
    motionManager = [[CMMotionManager alloc] init];
    if (motionManager.accelerometerAvailable) {
        motionManager.accelerometerUpdateInterval = 1.0/2.0;
        [motionManager startAccelerometerUpdates];
    }

    locationManager = [[CLLocationManager alloc] init];

    //We will be the location manager delegate
    locationManager.delegate = self;

    //Track position at the 100m accuracy
    locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;

    //We want to see all location updates, regardless of distance change
    locationManager.distanceFilter = 0.0;

    [locationManager startUpdatingLocation]; 
```

将上述内容放在“viewDidLoad”或appDelegate“didFinishLaunchingWithOption”中的某个位置

以下处理更新和内容。bestLocation 是一个 CLLocation。您需要实现 CLLocationManagerDelegate。两分钟 = 120

```
- (BOOL)isBetterLocation:(CLLocation *)location {
    if (bestLocation == nil){
        //best location not set yet, so it's a better location by default
        return YES;
    }

    // Figure out how long it's been since we got a better location
    NSTimeInterval timeDelta = [location.timestamp timeIntervalSinceDate:bestLocation.timestamp];

    BOOL isSignificantlyNewer = timeDelta > TWO_MINUTES;

    BOOL isSignificantlyOlder = timeDelta < -TWO_MINUTES;

    BOOL isNewer = timeDelta > 0;

    if (isSignificantlyNewer) {
        return YES;
    }else if (isSignificantlyOlder) {
        return NO;
    }

    CLLocationAccuracy accuracyDelta = location.horizontalAccuracy - bestLocation.horizontalAccuracy;
    //You want accuracy to be low
    BOOL isLessAccurate = accuracyDelta > 0;
    BOOL isMoreAccurate = accuracyDelta < 0;
    BOOL isDifferent = location.coordinate.latitude != bestLocation.coordinate.latitude || 
    location.coordinate.longitude != bestLocation.coordinate.longitude;

    if (isMoreAccurate) {
        return YES;
    } else if (isNewer && !isLessAccurate && isDifferent) {
        return YES;
    }

    return NO;
}

#pragma mark - Location manager delegate
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    if ([self isBetterLocation:newLocation]){
        self.bestLocation = newLocation;

    } else {
        [locationManager stopUpdatingLocation];
        isLocating = NO;
        NSLog(@"AppDelegate: Turning off location manager >>>>>>>>>>>>>>>>>>>>>");
    }
} 
```

注意：您不需要“isBetterLocation”方法。这只会检查位置并在大约 2 分钟后关闭位置管理器，这样您就不会耗尽用户的电池。有时您不希望经理离开，因此您可以根据需要将其排除在外。

我不知道你已经做了多少。我就是这样做的。

# java - 在java中对变量应用AND运算

> ID：13981685
> 
> 赞同：1
> 
> 时间：2012-12-20T22:37:39.587
> 
> 标签：java, variables, hex, decimal, bit-manipulation

我想在 a 和 b （均为十进制）之间进行“与”运算。b 的值在代码内部确定。结果，如果我这样写：

```
String g= Integer.toHexString(b);
int k=a & g; 
```

我得到错误，因为它应该是这样的：

```
int k=a & 0xFF; 
```

不知何故，0x 应该在十六进制值之前，同时它不能是字符串类型。对于第二个操作数可以是变量的情况，我在 Internet 上没有找到任何示例。我应该手动编写一个 for 循环来逐位应用 AND 操作，还是有一个直接的解决方案？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:42:27.167

如果 b 已经是一个整数，您的代码应该是：

`int k = a & b;`

一个数字就是一个数字。`0xFF`vs的人类表示`255`对 & 运算符没有任何影响。计算机没有“十六进制整数”与“十进制整数”之类的东西，它只是一个值。不同的书写方式是人性化的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:42:57.360

只需这样做：

```
int k = a & b; 
```

在应用运算符之前无需将 an 转换`int`为十六进制`&`。事实上，这是一个错误，因为返回的值`toHexString()`是 a `String`，并且该`&`运算符仅适用于整数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:45:05.837

当您在 java 代码中编写十六进制文字 0xFF 时，它与编写整数文字 255 相同。

因此，将整数转换为字符串是没有意义的，执行 a & b 就足够了。十六进制表示法就是您指定文字的方式

# redis - 有人可以准确解释 Booksleeve 和 Redis 如何协同工作以及它在 SignalR 应用程序中的应用吗？

> ID：13981689
> 
> 赞同：3
> 
> 时间：2012-12-20T22:38:05.433
> 
> 标签：redis, signalr, azureservicebus, booksleeve

我们正在为我们的 SignalR 应用程序实现横向扩展，并试图避免集群中的单点故障。因此，需要不止一个 Redis 消息总线服务器。

实现 Redis Sentinel 的问题在于，在故障转移时，客户端需要连接到新的端点 [地址]，这将需要重新启动 SignalR 应用程序（在 Application_Start() 中定义的 Redis 端点）。

不是一个选择。

我试图了解 Booksleeve 是否/如何提供帮助，并希望有人对此进行解释。

问题是我们只能为消息总线定义一个端点。硬件解决方案目前不是一种选择。

SignalR 应用程序是否会连接到维护主/从列表的 Booksleeve 包装器？

使用 Azure 服务总线的另一种选择。但是，Wiring Up the Windows Azure Service Bus Provider 的说明*表明*[这](http://www.asp.net/signalr/overview/signalr-20/performance-and-scaling/scaleout-with-windows-azure-service-bus)仍然存在问题：

 *> 请注意，此网站是在 Azure Web 角色中运行的 ASP.NET 站点。从 1.0alpha2 开始，AzureWebSites 中存在一些错误，导致 ServiceBus 横向扩展方案无法正常工作。我们正在努力为未来解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T08:35:30.037

我不知道 SignalR 如何进行连接的细节，但是：BookSleeve 已经为故障转移节点提供了一些让步。特别是，该`ConnectionUtils.Connect`方法采用一个字符串（适用于 web.config 配置值等），它可以包括**多个**redis 节点，然后 BookSleeve 将尝试找到最合适的节点来连接。如果字符串中提到的节点是常规的 redis 节点，它将尝试连接到主节点，否则会回退到从节点（可选地在进程中提升从节点）。如果提到的节点是哨兵节点，它将要求哨兵指定一个服务器来连接。

BookSleeve*目前不*提供的是会自动重新连接的冗余连接包装器。这在路线图上，但在调用代码中并不难做到。我计划在实现 redis-cluster 支持的同时为此添加更多支持。

但是：所有这些都是从 BookSleeve 的角度来看的——我不能具体评论 SignalR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T12:39:17.473

BookSleeve 1.3.41.0 支持 Redis sentinel。我们使用的部署配置：1个master redis，1个slave redis。每个盒子都有哨兵（一个给主人，一个给奴隶）。客户端首先连接到哨兵，然后哨兵将它们重定向到活动主服务器。

这是它在客户端代码中的实现方式：

```
public class OwinStartup
{
    public void Configuration(IAppBuilder app)
    {
        var config = new WebClientRedisScaleoutConfiguration();
        GlobalHost.DependencyResolver.UseRedis(config);
        app.MapSignalR();
    }
}

public class WebClientRedisScaleoutConfiguration : RedisScaleoutConfiguration
{
    public WebClientRedisScaleoutConfiguration()
        : base(() => getRedisConnection(), WebUIConfiguration.Default.Redis.EventKey)
    { }

    private static BookSleeve.RedisConnection _recentConnection;
    private static BookSleeve.RedisConnection getRedisConnection()
    {
        var log = new TraceTextWriter();
        var connection = BookSleeve.ConnectionUtils.Connect("sentinel1:23679,sentinel2:23679,serviceName=WebClient", log);
        if (connection != null)
        {
            _recentConnection = connection;
            return connection;
        }

        if (_recentConnection != null)
        {
            return _recentConnection;
        }

        // Cannot return null nor throw exception -- this will break reconnection cycle.
        return new BookSleeve.RedisConnection(string.Empty);
    }
} 
```

热配置redis。 **常用步骤** 下载Redis for windows [http://redis.io/download](http://redis.io/download) 解压到c:\redis

**大师（只有第一个 redis 盒子，只有一个这样的配置）**

1.  创建Redis服务：在redis目录下执行命令`redis-server --service-install redis.conf --service-name redis`
2.  启动 Redis 服务
3.  确保 Redis 列出端口 6379

**奴隶（其他箱子）**

1.  更新 redis.conf：添加`slaveof masterAddr 6379`where`masterAddr` 是主模式下 redis 运行的地址，6379 是默认的 redis 端口。
2.  创建Redis服务：在redis目录下执行命令`redis-server --service-install redis.conf --service-name redis`
3.  启动 Redis 服务
4.  确保 Redis 列出端口 6379

**Sentinel（主从通用）**

1.  使用以下内容创建文件 redis-sentinel.conf： `port 26379 logfile "redis-sentinel1.log" sentinel monitor WebClient masterAddr 6379 1`

    其中 masterAddr 是在主模式下运行 redis 的地址，6379 是默认 redis 端口，1 是仲裁（做出决定的主机数是服务器关闭与否）。`WebClient`是组名。您在客户端代码中指定它`ConnectionUtils.Connect("...,serviceName=WebClient...")`

2.  在redis目录下创建redis sentinel service:execute command`redis-server --service-install redis-sentinel.conf --service-name redis-sentinel --sentinel`
3.  启动 redis-sentinel 服务*

# php - CSS 媒体查询 - Android 没有响应

> ID：13981691
> 
> 赞同：1
> 
> 时间：2012-12-20T22:38:24.593
> 
> 标签：php, html, css, responsive-design

我正在尝试将响应式设计的一些元素应用于网站。我的目标是根据屏幕宽度隐藏右侧。我已经能够在我的桌面（最小化窗口时）以及我的 iphone 上改变行为。但是，我的安卓仍然像完整的桌面站点一样显示右侧。

我将最大宽度设置为 750 像素，但将其增加到 1000 以尝试让安卓做某事，但仍然不走运。

我的 CSS 最初看起来像这样：

```
#container {
width: 980px;
text-align: left; margin: 10px auto; font-family: Arial; font-size: 1em;
}
#rightnav {
float: right; align: center; width: 300px !important; margin: 0; padding: 12px 5px 5px 5px;
} 
```

在 CSS 中，我添加了以下媒体查询内容：

```
@media all and (max-width: 1000px) {
  #container {
    width: 95%;
    margin: 5px auto;
    padding: 5px;
  }
  #rightnav {
  display:none;} 
```

我没有完美，但是在最小化的桌面屏幕或我的 iphone4 上，右侧不显示，表明响应式设计正在运行。但是，在 Android 上，CSS 根本没有响应。

与往常一样，提前谢谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-20T23:21:36.403

添加视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> 
```

# wpf - WPF/XAML 在具有数据绑定和高级模板的 TreeView 中使用 TreeViewItems

> ID：13981695
> 
> 赞同：4
> 
> 时间：2012-12-20T22:38:39.353
> 
> 标签：wpf, xaml, templates, binding, treeview

我对 XAML 和数据绑定还很陌生，所以希望这对那里的人来说是一个简单的问题......

我正在尝试使用具有类似于以下结构的数据绑定来构建 TreeView：

*   类别
    *   项目名称
    *   项目名称
*   类别
    *   项目名称

到目前为止，一切都很好——我可以做到。接下来，我希望能够展开 Item 节点并显示有关该项目的详细信息。当我在代码隐藏中手动构建树时，这很好用，但我想改用数据绑定。我几乎有这个工作，但现在，要么我无法选择节点，要么我无法让节点表现得像 TreeViewItem，它在折叠时只显示项目名称并且可以展开以显示更多--在我的例子中，一个自定义的网格，上面有数据。

这是我的 XAML 代码的简化示例：

```
<DataTemplate x:Key="ItemDataTemplate">
    <TreeViewItem Header="{Binding Path=ItemName}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Price" />
            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Path=Price}"/>

            <TextBlock Grid.Row="1" Grid.Column="0" Text="Description" />
            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding Path=Description}"/>

            <TextBlock Grid.Row="2" Grid.Column="0" Text="Qty on Hand" />
            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding Path=Qty}"/>
        </Grid>
    </TreeViewItem>
</DataTemplate>

<HierarchicalDataTemplate x:Key="CategoryDataTemplate" ItemsSource="{Binding Path=Categories}" ItemTemplate="{StaticResource ItemDataTemplate}">
    <TextBlock Text="{Binding Path=CategoryName}"/>
</HierarchicalDataTemplate> 
```

基于这个简化的示例，在代码隐藏中定义的对象将是这样的：

```
public class Category
{
    public ObservableCollection<Item> Items {get; private set;}
    public string CategoryName { get; set; }

    //constructor and methods here
}
public class Item
{
    public string ItemName {get; private set;}
    public decimal Price { get; private set; }
    public string Description {get; private set; }
    public int Qty {get; set;}

    //constructor and methods here
} 
```

在 stackoverflow 上阅读[了这个问题和答案](https://stackoverflow.com/questions/3557787/wpf-xaml-treeview-doesnt-hightlight-nodes-after-binding)后，我可以看到如果你想选择节点，你不能让你的模板成为 TreeViewItem。我尝试摆脱 TreeViewItem 标记并直接进入允许我选择节点的 Grid，但现在我无法将节点折叠到仅 ItemName（标题文本）。

我觉得它非常接近......我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:12:06.360

所以，你想要的是让一个 Item*看起来像它有更多的子节点*，即使它唯一的“子”是它自己，呈现更多的信息？

好吧，最正确的做法可能是在 ItemDataTemplate 中使用扩展器，如下所示：

```
<DataTemplate x:Key="ItemDataTemplate">
    <Expander Header="{Binding Path=ItemName}" >
        <Grid>
            <Grid.ColumnDefinitions>
                ...
            <Grid.RowDefinitions>
                ...

            <TextBlock Grid.Row="0" Grid.Column="0" Text="Price" />
            <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Path=Price}"/>

            <TextBlock ...
        </Grid>
    </TreeViewItem>
</DataTemplate> 
```

扩展器看起来并不完全像标准的 TreeViewItem，但可以通过为扩展器制作自己的模板来解决这个问题。

现在，一个稍微更老套的方法是在 Item 类中有一个 Items 列表，其中每个 Item 将自己作为唯一的列表元素公开。然后，ItemDataTemplate 需要是一个 HierarchicalDataTemplate，它引用了另一个更详细的“ItemDetailsTemplate”：

```
public class Item
{
    ...

    public List<Item> InfoWrapper
    {
        get { return new List<Item>() { this }; }
    }
} 
```

xml:

```
<DataTemplate x:Key="ItemDetailsTemplate">
    <Grid>
        <Grid.ColumnDefinitions>
            ...
        <Grid.RowDefinitions>
            ...

        <TextBlock Grid.Row="0" Grid.Column="0" Text="Price" />
        <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding Path=Price}"/>

        <TextBlock ...
    </Grid>
</DataTemplate>

<HierarchicalDataTemplate x:Key="ItemDataTemplate" ItemsSource="{Binding Path=InfoWrapper}" ItemTemplate="{StaticResource ItemDetailsTemplate}" >
    <TextBlock Text="{Binding Path=ItemName}"/>
</HierarchicalDataTemplate> 
```

# c++ - Opencv - filter2D() 方法实际上是如何工作的？

> ID：13981699
> 
> 赞同：15
> 
> 时间：2012-12-20T22:38:56.953
> 
> 标签：c++, opencv, computer-vision

我确实查找了 Filter2D 的源代码，但找不到。Visual c++ 也不能。这里有filter2D算法的专家吗？我知道[它应该如何工作](http://docs.opencv.org/modules/imgproc/doc/filtering.html#filter2d)，但不知道它实际上是如何工作的。我做了自己的filter2d()函数来测试东西，结果与opencvs filter2D()有很大的不同。这是我的代码：

```
Mat myfilter2d(Mat input, Mat filter){

Mat dst = input.clone();
cout << " filter data successfully found.  Rows:" << filter.rows << " cols:" << filter.cols << " channels:" << filter.channels() << "\n";
cout << " input data successfully found.  Rows:" << input.rows << " cols:" << input.cols << " channels:" << input.channels() << "\n";

for (int i = 0-(filter.rows/2);i<input.rows-(filter.rows/2);i++){
    for (int j = 0-(filter.cols/2);j<input.cols-(filter.cols/2);j++){  //adding k and l to i and j will make up the difference and allow us to process the whole image
        float filtertotal = 0;
        for (int k = 0; k < filter.rows;k++){
            for (int l = 0; l < filter.rows;l++){
                if(i+k >= 0 && i+k < input.rows && j+l >= 0 && j+l < input.cols){  //don't try to process pixels off the endge of the map
                    float a = input.at<uchar>(i+k,j+l);
                    float b = filter.at<float>(k,l);
                    float product = a * b;
                    filtertotal += product;
                }
            }
        }
        //filter all proccessed for this pixel, write it to dst
        st.at<uchar>(i+(filter.rows/2),j+(filter.cols/2)) = filtertotal;

    }
}
return dst;
} 
```

有人看到我的实施有什么问题吗？（除了慢）

这是我的执行：

```
 cvtColor(src,src_grey,CV_BGR2GRAY);
  Mat dst = myfilter2d(src_grey,filter);
  imshow("myfilter2d",dst);
  filter2D(src_grey,dst2,-1,filter);
  imshow("filter2d",dst2); 
```

这是我的内核：

```
float megapixelarray[basesize][basesize] = {
            {1,1,-1,1,1},
            {1,1,-1,1,1},
            {1,1,1,1,1},
            {1,1,-1,1,1},
            {1,1,-1,1,1}
            }; 
```

[以下是（完全不同的）结果](http://screencast.com/t/0PGEtbDHxse)：

想法，有人吗？

编辑：感谢 Brians 的回答，我添加了以下代码：

```
//normalize the kernel so its sum = 1
Scalar mysum = sum(dst);
dst = dst / mysum[0];   //make sure its not 0
dst = dst * -1;  //show negetive 
```

并且 filter2d 效果更好。某些过滤器会提供完全匹配，而其他过滤器（如 Sobel）则[失败得很惨。](http://screencast.com/t/qwQviq7sfQZM)

我正在接近实际的算法，但还没有。还有其他人有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-20T23:06:51.017

我认为问题可能是规模问题之一：如果您的输入图像是 8 位图像，则大多数时候卷积会产生一个超出最大值 255 的值。

在您的实现中，您似乎获得了环绕值，但大多数 OpenCV 函数通过限制为最大值（或最小值）来处理溢出。这就解释了为什么 OpenCV 函数的大部分输出都是白色的，以及为什么你的输出中也会出现同心形状。

`megapixelarray`考虑到这一点，通过将每个值除以过滤器的总和来规范化过滤器（即确保过滤器值的总和为 1）：

例如，代替这个过滤器（sum = 10）：

```
1 1 1
1 2 1
1 1 1 
```

试试这个过滤器（总和 = 1）：

```
0.1 0.1 0.1
0.1 0.2 0.1
0.1 0.1 0.1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T14:59:06.320

这是我手动创建 filter2D 的解决方案：

```
#include <iostream>
#include <opencv2/opencv.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;
using namespace std;

int main(int argc, const char * argv[]) {    
    Mat img;
    Mat img_conv;
    Mat my_kernel;
    Mat my_conv;

    // Controlling if the image is loaded correctly
    img = imread("my_image.jpg",CV_LOAD_IMAGE_COLOR);
    if(! img.data )
    {
        cout <<  "Could not open or find the image" << std::endl ;
        return -1;
    }
    imshow("original image", img);
    img.convertTo(img, CV_64FC3);

    int kernel_size;   // permitted sizes: 3, 5, 7, 9 etc
    cout << "Select the size of kernel (it should be an odd number from 3 onwards): \n" << endl;
    cin >> kernel_size;

    // Defining the kernel here
    int selection;
    cout << "Select the type of kernel:\n" << "1\. Identity Operator \n2\. Mean Filter \n3\. Spatial shift \n4\. Sharpening\n-> ";
    cin >> selection;
    switch (selection){
        case 1:
            my_kernel = (Mat_<double>(kernel_size,kernel_size) << 0, 0, 0, 0, 1, 0, 0, 0, 0);
            break;
        case 2:
            my_kernel = (Mat_<double>(kernel_size,kernel_size) << 1, 1, 1, 1, 1, 1, 1, 1, 1) / ( kernel_size * kernel_size);
            break;
        case 3:
            my_kernel = (Mat_<double>(kernel_size,kernel_size) << 0, 0, 0, 0, 0, 1, 0, 0, 0);
            break;
        case 4:
            my_kernel = (Mat_<double>(kernel_size,kernel_size) << -1, -1, -1, -1, 17, -1, -1, -1, -1) / ( kernel_size * kernel_size);
            break;
        default:
            cerr << "Invalid selection";
            return 1;
            break;
    }
    cout << "my kernel:\n "<<my_kernel << endl;

    // Adding the countour of nulls around the original image, to avoid border problems during convolution
    img_conv = Mat::Mat(img.rows + my_kernel.rows - 1, img.cols + my_kernel.cols - 1, CV_64FC3, CV_RGB(0,0,0));

    for (int x=0; x<img.rows; x++) {
        for (int y=0; y<img.cols; y++) {
                img_conv.at<Vec3d>(x+1,y+1)[0] = img.at<Vec3d>(x,y)[0];
                img_conv.at<Vec3d>(x+1,y+1)[1] = img.at<Vec3d>(x,y)[1];
                img_conv.at<Vec3d>(x+1,y+1)[2] = img.at<Vec3d>(x,y)[2];
        }
    }

    //Performing the convolution
    my_conv = Mat::Mat(img.rows, img.cols, CV_64FC3, CV_RGB(0,0,0));
    for (int x=(my_kernel.rows-1)/2; x<img_conv.rows-((my_kernel.rows-1)/2); x++) {
        for (int y=(my_kernel.cols-1)/2; y<img_conv.cols-((my_kernel.cols-1)/2); y++) {
            double comp_1=0;
            double comp_2=0;
            double comp_3=0;
                for (int u=-(my_kernel.rows-1)/2; u<=(my_kernel.rows-1)/2; u++) {
                    for (int v=-(my_kernel.cols-1)/2; v<=(my_kernel.cols-1)/2; v++) {
                        comp_1 = comp_1 + ( img_conv.at<Vec3d>(x+u,y+v)[0] * my_kernel.at<double>(u + ((my_kernel.rows-1)/2) ,v + ((my_kernel.cols-1)/2)));
                        comp_2 = comp_2 + ( img_conv.at<Vec3d>(x+u,y+v)[1] * my_kernel.at<double>(u + ((my_kernel.rows-1)/2),v + ((my_kernel.cols-1)/2)));
                        comp_3 = comp_3 + ( img_conv.at<Vec3d>(x+u,y+v)[2] * my_kernel.at<double>(u +  ((my_kernel.rows-1)/2),v + ((my_kernel.cols-1)/2)));
                    }
                }
            my_conv.at<Vec3d>(x-((my_kernel.rows-1)/2),y-(my_kernel.cols-1)/2)[0] = comp_1;
            my_conv.at<Vec3d>(x-((my_kernel.rows-1)/2),y-(my_kernel.cols-1)/2)[1] = comp_2;
            my_conv.at<Vec3d>(x-((my_kernel.rows-1)/2),y-(my_kernel.cols-1)/2)[2] = comp_3;
        }
    }
    my_conv.convertTo(my_conv, CV_8UC3);
    imshow("convolution - manual", my_conv);

    // Performing the filtering using the opencv funtions
    Mat dst;
    filter2D(img, dst, -1 , my_kernel, Point( -1, -1 ), 0, BORDER_DEFAULT );
    dst.convertTo(dst, CV_8UC3);
    imshow("convlution - opencv", dst);

    waitKey();
    return 0;
} 
```

# c - 搜索方法失败

> ID：13981706
> 
> 赞同：0
> 
> 时间：2012-12-20T22:39:43.067
> 
> 标签：c, file, search, identifier

我正在尝试执行一种搜索方法，其中检查 2 个仅存储整数的 ID。

首先，我有一个客户数据库。我按此顺序依次输入姓名、姓氏、身份证和地址，然后将这些立即保存到文件中

当用户输入身份证时，这会调用此搜索方法并检查所有文件以查看 ID 是否唯一。如果不是，则返回 0，否则返回 1

现在的问题是这样的。当我输入 ID 时，无论它是否唯一，它都会继续运行，但是当它输出我写的内容时，对于 NAME 和 SURNAME，它只显示我存储在那里的第一条记录（就像卡在某种缓冲区），ID和地址正常输出。

该文件也未更新的意思是，保存文件没有发生。现在，当我删除此方法时，附加工作正常，但我无法访问 ID 的比较。

有什么建议为什么会发生这种情况？如果可能的话，我知道如何解决它？就像每当我使用这种搜索方法时，整个文件都会从头开始并卡在那里。我尝试使用带有布尔值的方法，但仍然无济于事。当我尝试将它与布尔值而不是“if (customerID(scanf ("%d",&cCheck)) == 1)”行一起使用时，我将其设置为 == TRUE，它给了我一个错误，即输出将始终为== FALSE，因为数据不为 NULL。

哦 TRUE 和 FALSE 在我的情况下是有效的，因为我在 common.h 中有一个 typedef enum boolean

代码如下[发布整个文件]： 相关方法是[ void addCustomer()] 和[int customerID (int cCheck) 但我发布了所有这些方法，因为它们中的一些是互连的。

编辑！！！- 即使 ID 不是唯一的，它仍然被接受......

```
/*
 * CustomerMainMenu.c
 * Author: DodoSerebro
 *
 * This class will output the Customer's Main Menu and re-directs to the
 * corresponding section
 *
 */
#include<io.h>
#include<fcntl.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>
#include "..\Headers\common.h"
#include "..\Headers\customerManagement.h"

static FILE *cfp;
static customer c;
#define STRUCTSIZE sizeof (customer)

/** This is the Customers's Main Menu in which the various sections can be
 *  accessed from here
 */
boolean  customerMainMenu()
{

    int optionC;
    clrscr();

    copyright();

    printf ("\n\n\n\n\t\t    ************* Customer's Main Menu *************\n \n \n");

    printf ("Press [1] to add a new Customer\n");
    printf ("Press [2] to edit a Customer\n");
    printf ("Press [3] to list all Customers\n");
    printf ("Press [4] to Show a Customer's last Order\n");
    printf ("Press [5] to go back to Main Menu\n\n\n");

    if (scanf ("%d",&optionC) == 1)
    {
        switch (optionC)
        {

        case 1:
        {
            clrscr();
            getchar();
            addCustomer();
            break;
        }
        case 2:
        {
            printf ("Edit a Customer\n");
            break;
        }

        case 3:
        {
            clrscr();
            listCustomers();
            system ("PAUSE");
            break;
        }
        case 4:
        {
            printf ("Customer's Last Order\n");
            break;
        }
        case 5:
        {
            system ("PAUSE");
            break;
        }
        default:
        {
            if (optionC != 1 || optionC != 2 || optionC != 3 || optionC != 4 || optionC !=5)
            {
                clrscr();
                printf ("Invalid option!\n");
                system ("PAUSE");
                customerMainMenu();
            }
            break;
        }
        }
    }
    return TRUE;

}

/**
 *  This following method will append a customer to the
 *  database at the end of the file
 *
 *  */

void addCustomer ()
{
    char ch;
    copyright();

    printf ("\n\n\n\n\t\t    ************* Add Client **********\n \n \n");

    if ((cfp = fopen ("customers.dat","a+b")) == NULL)
    {
        fputs("Can't open customers.dat file\n",stderr);
    }

    printf ("\tThis will add another customer to the the database\n");
    printf ("\tPress 'Y' to confirm or 'N' to return to the Client Main Menu\n\tWITHOUT adding a customer\n");
    ch = getchar();

    if (ch == 'n' || ch == 'N')
    {
        customerMainMenu();
    }
    else if (ch == 'y' || ch == 'Y')
    {
        fflush(stdin);
        clrscr();
        printf ("\n\n\n\n\t\t    ************* Add Client **********\n \n \n");
        printf ("Please enter Name:\n");
        while (scanf ("%s", c.name) == 0 || cCheck(c.name,100) == FALSE);
        {

        }

        printf ("Please Enter Surname: \n");
        while (scanf ("%s",c.surname) == 0 && cCheck (c.surname,100) == FALSE);
        {

        }
        printf ("Please Enter ID Card, [NOTE! Only numbers are allowed!]\n");
        int cCheck;
        if (customerID(scanf ("%d",&cCheck)) == 1)
        {
            printf ("ID already Taken, Client exists!\n");
            printf ("Do you want to enter another ID? 'Y' for Yes and 'N' to return to Main Menu\n");
            ch = getchar();
            if (ch == 'Y' || ch == 'y')
            {
                scanf ("%d",&cCheck);
                customerID(cCheck);
                c.ID = cCheck;
            }
            else
            {
                customerMainMenu();
            }
        }
        else
        {
            c.ID = cCheck;
        }

        getchar();

        printf ("Please Enter Address:\n");
        gets(c.address);

        fwrite (&c,STRUCTSIZE, 1, cfp);

        printf ("For Testing purposes:\n");
        printf (" %s\n %s\n %s\n %d\n", c.name, c.surname, c.address, c.ID);
        askAnother();

    }
    else
    {
        printf ("\nInvalid choice! Either Y or N is accepted\n");
        system ("PAUSE");
        getchar();
        clrscr();
        addCustomer();
    }
}

void listCustomers()
{

    if ((cfp = fopen ("customers.dat","rb")) == NULL)
    {
        fputs("Can't open customers.dat file\n",stderr);
        printf ("Returning to Customer Main Menu");
        system ("PAUSE");
        customerMainMenu();
    }

    rewind (cfp);
    while (fread (&c,STRUCTSIZE,1,cfp)==1)
    {
        printf ("Customer: %s %s ID: %d\n", c.surname, c.name, c.ID);
    }
    fclose (cfp);

}

void askAnother()
{
    printf ("Do you want to add another Customer?\n");
    printf ("Enter 'Y' for yes and 'N' to return to the Main Menu\n");

    char input;
    input = getchar();

    if (input == 'Y' || input == 'y')
    {
        getchar();
        addCustomer();
    }
    else if (input == 'N'|| input == 'n')
    {

        fclose (cfp);
        customerMainMenu();

    }
    else
    {

        printf ("Invalid Option! Only Y or N are allowed\n");
        system ("PAUSE");
        clrscr();
        askAnother();

    }

}

boolean cCheck(char *test, int max)
{
    int x;
    for (x =0; x<max; x++)
    {
        if (isdigit(test[x]))
        {
            return FALSE;
        }
        if (x==max)
        {
            return TRUE;
        }
        x++;

    }
    return TRUE;
}

/**
 *  This method will compare the ID passed from the ID of the customer to check
 *  whether it is exists or not. If it exists it will output 1 otherwise it
 *  will output -1\. This will make sure that the Person's ID is unique
 *
 */

int customerID (int cCheck)
{

    rewind (cfp);
    while (fread (&c,STRUCTSIZE,1,cfp)==1)
    {
        if (c.ID == cCheck)
        {
            return 1;
        }
        else
        {
            return 0;
        }
    }

    return 1;
} 
```

编辑！！

如果我不清楚，上传图片以显示我的意思

（注意名字和姓氏与那些输入的不同）！http://s017.radikal.ru/i443/1212/c8/1ea9bc56d980.jpg

以下显示了我在文件中的内容（只有一个文件）！http://s017.radikal.ru/i431/1212/49/2a0df6acf9ec.jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:00:53.730

```
if (customerID(scanf ("%d",&cCheck)) == 1) 
```

在这里，您是 scanf() 函数的返回值，`customerID()`而您实际上想要传递扫描的值`cCheck`。

您可以将函数调用和输入读数分开，如下所示：

```
 if(scanf ("%d",&cCheck) != 1) {
   // Input error handling
   }
   else if (customerID(cCheck) == 1) {
    ... 
```

另一个问题是，您有一个名为的函数`cCheck`，并且还有一个名为`cCheck`. 适当地重命名其中之一。

# php - 检查数组中有多少值大于 x

> ID：13981714
> 
> 赞同：0
> 
> 时间：2012-12-20T22:40:16.517
> 
> 标签：php, mysql, arrays

使用 MySQL 查询创建了一个值数组后，我需要检查它们是否都至少等于给定值。这是为了检查酒店的客房供应情况。

首先，我执行 MySQL 查询：

```
foreach( $datearray as $value ) {
$query_avail = "SELECT cupo, ex_cupo.room_id FROM ex_cupo JOIN ex_rooms ON ex_cupo.room_id=ex_rooms.room_id  AND ex_rooms.room_id = '$room_id' AND dt = '$value'";
$avail = mysql_query($query_avail, $MySQL_extranet) or die(mysql_error());
$row_avail = mysql_fetch_assoc($avail);
   $availresult[] = $row_avail['cupo'];
} 
```

“Cupo”是给定日期的可用房间数，因此 $availresult 将是一系列日期内可用房间数的数组。

现在，如果有人想为这些日期预订（比如说）2 个房间，我需要确保数组中的每个值至少为 2。例如，如果范围内有 5 个日期，它们是 2、2、1， 2、2，我需要返回false，但是如果是2、2、2、2、2或2、2、3、2、2，我需要返回true。

我怎么做？（我希望我解释得足够好。）

显然选择 2 只是一个例子。它通常是一个名为 $numrooms 的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-20T22:43:40.393

将 a 添加`WHERE cupo > 2`到您的 SQL 代码中。让数据库只给你你想要的结果，而不是自己检查结果来检查cupo>2。

如果您需要能够更改它，请使用参数化查询。有关详细信息，请参阅[http://php.net/manual/en/security.database.sql-injection.php](http://php.net/manual/en/security.database.sql-injection.php)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T22:50:24.110

```
$testArray = array(2,2,2,2,1,2);

$valid = array_reduce(
    $testArray,
    function ($match, $value) {
        return $match && ($value >= 2);
    },
    TRUE
);
var_dump($valid); 
```

**编辑**

如何通过 $numrooms：

```
$testArray = array(2,2,2,2,1,2);
$numrooms = 2;

$valid = array_reduce(
    $testArray,
    function ($match, $value) use ($numrooms) {
        return $match && ($value >= $numrooms);
    },
    TRUE
);
var_dump($valid); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T22:48:45.727

您应该将房间数作为条件传递给您的 sql 语句，例如：

```
$query_avail = "SELECT cupo, ex_cupo.room_id FROM ex_cupo
  JOIN ex_rooms ON   ex_cupo.room_id=ex_rooms.room_id  AND
    ex_rooms.room_id = '$room_id' AND dt = '$value' WHERE cupo > 1"; 
```

因为第一个可能是您的 PHP 传递值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-20T22:47:50.873

如果您可以在 SQL 级别执行此操作（如 Andy 建议的那样），那将是**最佳选择**。但是，如果您需要在 PHP 中执行此操作，您可以轻松地遍历您的数组，并在任何值低于允许的最小数量时将标志设置为 false：

```
$minimum_val = 2;
$enough_rooms = true;
foreach($availresult as $item) {
  if ($item < $minimum_val) {
    $enough_rooms = false;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-22T11:10:22.750

感谢所有回答的人。我想我现在有我的解决方案，我正在努力。圣诞快乐，大家。

# javascript - 使用 JSON.stringify 和 JSON.parse 将多边形坐标存储到 oracle

> ID：13981717
> 
> 赞同：0
> 
> 时间：2012-12-20T22:40:37.693
> 
> 标签：javascript, json, google-maps-api-3

我想将谷歌地图多边形覆盖的坐标存储到 oracle 中并在下一个会话中显示。有代码：

```
function savePolygons(){
    $.post('oracle_deletePolygons.php');
    for (var i = 0; i < createdShapes.length; i++){
        var nom_zone  = escape(document.getElementById('nom_zone_' + createdShapes[i].id).value);
        var couleur = escape(createdShapes[i].fillColor);
        var code_cs = escape('711');
        var shapeid_export = escape(createdShapes[i].id);
        var geometry = createdShapes[i].getPath().getArray();
        geometry = JSON.stringify(geometry);
        var url1 = "oracle_savePolygons.php?nom_zone=" + nom_zone + "&couleur=" + couleur + "&code_cs=" + code_cs + "&shapeid_export=" + shapeid_export + "&geometry=" + geometry;
        $.get(url1);
    }   
} 
```

我使用 JSON.stringify 将返回此的多边形的路径数组转换为文本：

```
[{"Ya":53.4357192066942,"Za":-75.82763671875},{"Ya":52.40241887397331,"Za":-77.3876953125},{"Ya":51.781435604431195,"Za":-74.0478515625}] 
```

在使用 php 将 oracle 表的数据解析为 javascript var 之后，我使用 JSON.parse 将字符串转换回这样的坐标数组，以重建多边形：

```
function addPolygons(shapeId_import, nom_zone, couleur, geometry){
    geometry = JSON.parse(geometry);
    var newPolygon = new google.maps.Polygon({
        paths: geometry,
        fillColor: couleur,
        fillOpacity: 0.45,
        strokeWeight: 1,
        editable: false,
        shapeid: shapeId_import,
        map:map
    }); 
```

不幸的是，它不起作用。我不能用这个新数组重建多边形。你能告诉我如何以这种方式重建多边形吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:29:33.947

JSON.stringify() 不会保留原始的 MVCArray，构造函数丢失。

您最好`google.maps.geometry.encoding.encodePath()`在重新使用之前创建一个可存储的值并对其进行解码。

# c# - 如何获取在目录中创建的特定模式的最新文件

> ID：13981720
> 
> 赞同：0
> 
> 时间：2012-12-20T22:41:00.217
> 
> 标签：c#, file

我可以通过使用下面的这个来获得最新创建的；但我想要最新创建的特定模式，而不仅仅是最新创建的

```
 var directory = new DirectoryInfo("D:\\my_dir\\dir_1\\dir_2\\");
        var smf_log_name = directory.GetFiles().OrderByDescending(f => f.LastWriteTime).First(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T22:48:20.147

好吧，[DirectoryInfo.GetFiles](http://msdn.microsoft.com/en-us/library/vstudio/8he88b63(v=vs.100).aspx)有一个重载，它接受一个模式参数

```
var directory = new DirectoryInfo("D:\\my_dir\\dir_1\\dir_2");
var smf_log_name = directory.GetFiles("*.txt").OrderByDescending(f => f.LastWriteTime).First(); 
```

注意传递的模式，如果没有指定模式的文件，序列将抛出一个`InvalidOperationException`

```
FileInfo result = null;
var directory = new DirectoryInfo("D:\\my_dir\\dir_1\\dir_2");
var list = directory.GetFiles("*.txt");
if(list.Count() > 0)
{
    result = list.OrderByDescending(f => f.LastWriteTime).First();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:51:34.240

您可以在方法中使用搜索模式`GetFiles`。

```
directory.GetFiles("myPattern").OrderByDescending(f => f.LastWriteTime).First(); 
```

`SearchOption.AllDirectories`如果您希望所有子目录都包含在搜索中，也可以使用。

```
directory.GetFiles("myPattern", SearchOption.AllDirectories).OrderByDescending(f => f.LastWriteTime).First(); 
```

# css - 完成动画后，如何让我的 css3 动画保持在其动画位置？

> ID：13981730
> 
> 赞同：2
> 
> 时间：2012-12-20T22:42:19.147
> 
> 标签：css, css-animations

> **可能重复：**
> [Webkit CSS 动画问题 - 保持动画的结束状态？](https://stackoverflow.com/questions/3273478/webkit-css-animation-issue-persisting-the-end-state-of-the-animation)

我想在动画 div 完成运行后保持其位置。现在我在鼠标悬停时为 div 设置动画，但即使我仍然悬停在它上面，div 也会返回到它的位置。

有没有办法让它只有当我鼠标退出时才回来？

[http://jsfiddle.net/neoswf/X5a64/](http://jsfiddle.net/neoswf/X5a64/)

```
div{
    width:100px;height:100px;margin:1em;background:red
}
div:hover {
  -webkit-animation-name: rotateThis;
  -webkit-animation-duration:1s;
  -webkit-animation-iteration-count: 1;
  -webkit-animation-timing-function:ease-in-out;
  -webkit-transform: translateZ(0);
}
@-webkit-keyframes rotateThis {
  from { -webkit-transform:scale(1) rotate(0deg); }
  to { -webkit-transform:scale(1.1) rotate(100deg); }
}​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:45:16.957

您正在寻找

```
-webkit-animation-fill-mode: forwards; 
```

[**演示**](http://jsfiddle.net/X5a64/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:45:38.847

用于`animation-fill-mode: forwards`保持结束状态：

```
-webkit-animation-fill-mode: forwards; 
```

[http://jsfiddle.net/stjHZ/](http://jsfiddle.net/stjHZ/)

# trigger.io - forge.topbar.setTitleImage(URL,成功,错误); 动态图像..文件缓存？

> ID：13981732
> 
> 赞同：1
> 
> 时间：2012-12-20T22:42:50.480
> 
> 标签：trigger.io

有人告诉我这是可以做到的，但不能让它发挥作用。

基本上我正在尝试使用 forge.file.cacheURL() 缓存和图像

现在我可以通过创建一个新的 Image 对象来很好地获取文件并将其显示在页面中，但我想要做的是使用这个缓存的图像来更改顶部栏中的图像。

每当我尝试这样做时，我都会收到一条错误消息，提示“找不到文件”，并且在阅读了更多文档后，似乎触发器可能已将“src/”编码到类中，因为如果我只输入“image/logo.png” " logo.png 将显示在标题中，因为它是应用程序包的一部分。

我想问题是..我的假设正确吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:46:42.963

原生 UI 元素（顶部栏/标签栏）直接从您的应用程序包中加载图像，而不是通过 URL 以与 web 视图中显示图像的相同方式。

这意味着目前您只能在顶部栏/标签栏模块中使用应用程序中包含的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:18:39.053

如果有人对此感兴趣，该功能是不久前添加到 API 中的，因此您现在可以使用 forge 的缓存图像或 filesaveURL 功能来动态更改标题图像。

# android - 使用返回按钮返回时，Android 活动变暗

> ID：13981738
> 
> 赞同：0
> 
> 时间：2012-12-20T22:44:11.500
> 
> 标签：android, back-button

我有一个非常简单的场景：

在活动中，按下菜单键，将我们带到一个菜单。选择一个菜单选项将我们带到一个显示列表视图的活动。按下 listview 活动上的后退按钮会使我们返回到原始活动，但它会立即变暗并且如果不按下后退按钮或菜单按钮将其唤醒就不会接受输入。

有什么方法可以返回到原始活动，以便它仍然直接响应输入？（显然有一种方法，因为我已经看到很多应用程序可以实现这一点）。

我用来响应所选菜单项的代码是：

```
public boolean onOptionsItemSelected(MenuItem item) 
{
    switch (item.getItemId())
    {
    case R.id.menu_settings:             
         startActivity(new Intent(this, MenuList.class));
            return true;
    default:
        return super.onOptionsItemSelected(item);        

    }
} 
```

当我使用后退按钮从 MenuList 返回此活动时，此活动会变暗，需要使用后退按钮“唤醒”。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:27:08.320

我猜你新开始的活动还没有完成，这就是你需要回击的原因。

您可以在 shell 中运行以下命令，以了解发生了什么。

```
adb logcat -b events | grep am 
```

# ios - 添加到核心数据时出错

> ID：13981751
> 
> 赞同：0
> 
> 时间：2012-12-20T22:45:02.093
> 
> 标签：ios, core-data

我正在尝试通过核心数据添加一个条目，但在这里遇到了错误：

PastTickets 是我的托管对象

但是，当我在这里执行第二行时，它会崩溃：

```
PastTickets *newTicket;
    newTicket = (PastTickets *)[NSEntityDescription insertNewObjectForEntityForName:@"PastTickets" inManagedObjectContext:_managedObjectContext]; 
```

这是我的崩溃错误

```
+entityForName: nil is not a legal NSManagedObjectContext parameter searching for entity name 'PastTickets'' 
```

在模型中看起来不错：

先感谢您 ![在此处输入图像描述](../Images/edd873a630c44de397e9af34f022eee8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T01:00:13.880

该错误不会抱怨实体名称 - 它告诉您它`_managedObjectContext`是 nil，并且您不允许为该参数传递 nil。您无需先创建托管对象上下文即可在代码中到达这一行。在开始插入新的托管对象之前，您需要重新排列事物以便上下文存在。

# imap - 使用 MULE 接收富文本或 HTML 邮件时没有负载

> ID：13981753
> 
> 赞同：0
> 
> 时间：2012-12-20T22:45:06.210
> 
> 标签：imap, mule

我正在尝试使用入站 IMAP 连接器开发 Mule 应用程序。当传入的邮件是纯文本时它工作正常，但当它是 HTML 或富文本时，有效负载中没有文本。如何使应用程序独立于传入的邮件类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:18:18.677

HTML 或富文本很可能是 MIME 多部分电子邮件。`text/`在这种情况下，只有当多部分电子邮件包含内容类型以(like )开头的第一部分时，Mule 才会尝试提取具有有效负载的文本`text/plain`。我认为在您的情况下，多部分电子邮件与此规则不匹配，因此 Mule 不知道如何处理它。

我建议您使用选择路由器来处理收到电子邮件后有效负载中没有文本的情况。在这种情况下，请使用与您相关的任何逻辑从已传输不同部分的入站附件之一中提取内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:57:03.337

我已经能够编写一些 Java 代码来显示多部分消息的文本部分，但我无法找到一种方法来让它与 Mule 一起使用。MUle 想用一个字符串加载这个类，即使它是一个多部分的消息。

我写的代码如下：

```
import javax.activation.DataHandler;
import javax.mail.*;
public class ReadMultipartMail3 {

public String stringback(Part payload) throws Exception {
  String answer ="";

 if(payload.isMimeType("text/plain") || payload.isMimeType("text/html"))
  { 
  answer=(payload.getContent().toString());
}
     else{
 Multipart multipart = (Multipart) payload.getContent();

for (int x = 0; x < multipart.getCount(); x++) {
  Part p = multipart.getBodyPart(x);
  System.out.println("Content Type:     "+p.getContentType());
  BodyPart bodyPart = multipart.getBodyPart(x);

String disposition = bodyPart.getDisposition();

if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT))) {
 System.out.println("Mail have some attachment : ");

 DataHandler handler = bodyPart.getDataHandler();
 System.out.println("file name : " + handler.getName());
 } else {

  if(p.isMimeType("text/plain") || p.isMimeType("text/html"))
  { 
  answer = (p.getContent().toString());
  }
  else if (p.isMimeType("multipart/alternative")) 
  { 
  Multipart mp = (Multipart)p.getContent(); 
  int partsCount = mp.getCount();
  for (int z = 0; z < partsCount; z++) {
      System.out.println("Content Type:     "+z+"  "+mp.getBodyPart(z).getContentType());
      if(mp.getBodyPart(z).getContentType().contains("text/plain"))
              {answer = (String) mp.getBodyPart(z).getContent();}

  }  
}

}

 }
  }
  return answer;}} 
```

# objective-c - 反向地理位置：邮政编码问题

> ID：13981757
> 
> 赞同：1
> 
> 时间：2012-12-20T22:45:46.040
> 
> 标签：objective-c, ios, geolocation, reverse-geocoding

我使用此代码使用反向地理位置获取用户的整个地址。有人可以建议我从中获取邮政编码或邮政编码的方法吗？

```
//Geocoding Block
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler:
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];

     //Print the location to console
     NSLog(@"I am currently at %@",locatedAt);

     //Set the label text to current location
     [locationLabel setText:locatedAt];

 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T22:51:04.293

使用谷歌地图将地理位置转换为邮编地址。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

# android - 用三个点隐藏操作栏 Sherlock 溢出菜单

> ID：13981758
> 
> 赞同：2
> 
> 时间：2012-12-20T22:45:49.270
> 
> 标签：android

为了获得自定义的溢出菜单，我使用了子菜单作为

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    //Create the search view
    SearchView searchView = new SearchView(getSupportActionBar().getThemedContext());

    mListView = getListView();
    mListView.setTextFilterEnabled(true);

    setupSearchView(searchView);

    menu.add(0, 1, 1, "Export")
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS| MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    menu.add(0, 2, 2, "Import")
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    menu.add(0, 3, 3, null)
    .setIcon(R.drawable.ic_action_overflow)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    SubMenu subMenu = menu.addSubMenu(0, 0, 2, null);

    subMenu.add(0, 4, 4, "Search Message")
    .setIcon(R.drawable.ic_search)
    .setActionView(searchView)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    subMenu.add(0, 5, 5, "Settings")
    .setIcon(R.drawable.ic_settings);

    subMenu.add(0, 6, 6, "About")
    .setIcon(R.drawable.ic_about);

    MenuItem subMenuItem = subMenu.getItem();
    subMenuItem.setIcon(R.drawable.ic_action_overflow);
    subMenuItem.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

    return super.onCreateOptionsMenu(menu);
} 
```

这让我的行动项目为

![在此处输入图像描述](../Images/ade256e0a327e54944d0ff6f39d32ba9.png)

我唯一的问题是，在更宽的屏幕上，我还获得了默认溢出菜单以及我自己的自定义溢出菜单。如何隐藏默认溢出菜单？

# console - Firefox Firebug URI 无效。媒体资源加载失败

> ID：13981761
> 
> 赞同：10
> 
> 时间：2012-12-20T22:46:13.507
> 
> 标签：console, firebug

在 Firebug 控制台中获取以下内容：

```
! Invalid URI. Load of media resource  failed. 
```

如何确定导致此错误的原因？无法弄清楚它在谈论什么“资源”。

我没有 - 看到 - 相关页面上缺少任何内容。

TIA,

---JC

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-29T17:13:40.140

使用以下过程：

*   转到网络选项卡
*   启用网络选项卡
*   重新加载页面
*   `404`查找带有响应代码的请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-05T13:02:27.090

我找到了一个解决方案 - 如果 src 为 null 的预期响应是得到一个错误，所以该部分的解决方案是定义一个 src 值。但是，即使使用有效的 src，我有时也会遇到相同的错误 - 并非总是如此，这取决于我尚未确定的其他内容，但是：

```
<video controls>
  <source src="http://localhost/video.mp4" type="video/mp4" />
  <source src="http://localhost/video.mp4" type="video/mp4" />
</video> 
```

对我来说始终如一，如果我只有 source 属性一旦失败。

# c# - 在 C# 中构建可重用的类库

> ID：13981767
> 
> 赞同：1
> 
> 时间：2012-12-20T22:46:58.203
> 
> 标签：c#, class, dll

我有一个为同事构建的类库，在给她.dll 文件后，我无法开始工作。.dll 文件的名称是“BatchDashboard”。命名空间的名称是“BatchDashboard”，类的名称（只有一个）是“BatchDashboard”。这三个名字都一样有问题吗？Visual Studio 能够很好地添加引用。然而，这个声明：

```
using BatchDashboard; 
```

吐出以下错误：

```
The type or namespace name 'BatchDashboard' could not be found (are you missing a using directive or an assembly reference? 
```

同样，我无法实例化新的“BatchDashboard”对象。

有人可以告诉我我做错了什么吗？

谢谢！

编辑

我尝试在我的计算机上添加对另一个测试项目的引用并收到相同的结果。

第二次编辑

将“BatchDashboard”类的访问修饰符更改为 public 解决了 using 语句的问题。但是，当我尝试像这样实例化一个对象时：

```
BatchDashboard batch = new BatchDashboard(); 
```

我收到以下错误：

```
'BatchDashboard' is a namespace but is used like a 'type' 
```

我必须有不同的类和命名空间名称才能工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T22:53:02.903

我想，我知道你有什么问题。创建类文件时，您可能没有将对类的访问权限更改为“公共”。在 .Net 中，除非程序集中有公共成员，否则不会在“using”指令中找到命名空间。基本上，检查您的课程是否是“公共课程”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:50:02.417

以下是我的最佳猜测：

1.  您针对错误的 CPU 目标编译它
2.  您对运行时库有依赖关系，该运行时库也应作为对项目的引用添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:50:27.473

确保：

*   该库被添加为对项目的引用
*   与项目的 .NET 版本相比，该库的 .NET 版本相同或更早。

# ms-access - MS Access 中的 VBA 链接到 Word - 错误代码 5981

> ID：13981776
> 
> 赞同：3
> 
> 时间：2012-12-20T22:47:55.523
> 
> 标签：ms-access, ms-word

我有一个 Access 数据库，它根据数据库中的数据创建自定义 Word 文档。在过去的 10 年里，我通过多次计算机和软件升级成功地运行了它。我刚刚在新计算机 (Windows 7) 上安装了该程序，我收到***错误 5981 - Could not open macro storage***。

代码在下面的 ** 行跳闸：

```
Public Function CreateIndividualizedReport(FileDescription As String, FormTemplate As String, ClientFile As String, CallTheFile As String, Optional ClientType As Integer) As Boolean
    CreateIndividualizedReport = False

    Set glbWordObj = New Word.Application

    FilePath = DLookup("FilePath", "tblFileLocation", "FileDescription = '" & FileDescription & "'")
    **Set WordObjDoc = glbWordObj.Documents.Add(FilePath)** 
```

我已经在网上搜索过这个，但所有解决方案要么不起作用（重命名`Normal.dot`文件），要么似乎适用于更旧版本的 Windows（这个错误的大多数帖子似乎可以追溯到 2000 年初）

最近有人看到这个问题或使用不同的代码与 Word 交互吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-24T09:50:05.920

我刚刚通过以下方式体验（并解决了）这个问题：

1.  在 Windows 资源管理器中右键单击 Word 文件
2.  选择属性
3.  取消阻止文件（底部的复选框）。

**注意：**此复选框并不总是显示。仅当文件从另一台计算机发送给您时才会出现。Windows 10 然后将该文件标记为“不安全”，直到您手动选中此框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T16:20:34.177

这里有一个关于类似错误的很长（而且很有趣）的讨论：

[http://social.msdn.microsoft.com/Forums/en/accessdev/thread/5dfefcc5-0483-4190-890e-d90947c2a507](http://social.msdn.microsoft.com/Forums/en/accessdev/thread/5dfefcc5-0483-4190-890e-d90947c2a507)

底线：在运行该行以添加文档之前使 Word 应用程序可见。

# php - PHP会话管理，可以这样做吗？

> ID：13981777
> 
> 赞同：0
> 
> 时间：2012-12-20T22:48:01.647
> 
> 标签：php, session, isset

我有以下结构：

```
Index.php
Account.php
Login.php
CheckLogin.php 
```

当有人通过 login.php 登录时，它会检查用户名和密码并设置以下会话变量

```
$_SESSION['username'] = $username;
$_SESSION['HTTP_USER_AGENT'] = md5($_SERVER['HTTP_USER_AGENT']); 
```

当他们访问包含文件 CheckLogin.php 的 Account.php 时，该文件会检查 HTTP_USER_AGENT 以及是否设置了用户名变量。

现在这就是我遇到问题的地方。如果用户返回 index.php（主页）并登录，我想显示帐户链接。但是，如果用户没有登录，即刚刚访问了该网站，我想显示注册链接。我在想我可以做到以下几点：

```
<?php session_start()

if (!isset($_SESSION['username'])) {
// If username is not set destroy the session
session_destroy();
echo ("<a href=\"signup.php\">Sign up</a>");
}
else {
// If username is set
echo ("<a href=\"account.php\">Sign up</a>");
}
?> 
```

我知道这并不完全安全，但是如果有人设法劫持会话并访问 account.php，它会进行检查，该检查应该破坏会话并在它们不合法时将其注销。这是最佳实践还是有更好的方法来实现这一预期结果。我不禁认为每个人都只是访问该站点并创建和破坏会话是一个坏主意。这是正确的做法还是我需要考虑其他任何事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:02:58.360

如果您的检查仅基于会话，请确保您的网站不会受到保护。我有几个建议： 1- 使用 CSRF 来提高您拥有的每个帖子的安全性。2- 会话应始终加密，您应该对它们使用盐密钥。这样你就可以得到更多的保障。仅用于信息会议并不总是保护您的网站的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T22:53:45.430

这足以检查。无需在每次尝试时都销毁会话。

```
<?php session_start()

if (isset($_SESSION['username'])) {
    echo ("<a href=\"account.php\">Sign up</a>");
}
else {
    // If username is not set
    echo ("<a href=\"signup.php\">Sign up</a>");
}
?> 
```

如果有人能够劫持会话，他也将能够访问您的`account.php`. 如上所述，请阅读有关身份验证系统的优秀教程或使用插件。在没有适当知识的情况下构建身份验证有点危险。

# java - '.class' 错误无法识别？

> ID：13981779
> 
> 赞同：0
> 
> 时间：2012-12-20T22:48:24.813
> 
> 标签：java

我正在制作一个刽子手游戏，这是我的代码中所有问题所在的部分：

```
 //play method
    private void play() throws IOException
    {
        guess(alphabet);

        usedLetters(letterUsed);

        do{
            centreln("You have already guessed this " + alphabet + " and the others listed above.");
            guess();
        } while (letterUsed == true);//will keep asking until letter was not used

        if (letterUsed == false)
        {
            life--;
            underWord();
        } //only if the letter was not used, it will be checked for in the current word trying to be solved

        if (life == 0)
        {
            checkWord(currentWord[] , checkLetter[]);
        }
    }//End of play method 
```

//------------------------------------------------ -------------------------------------------------- ----------------------------

```
//maskWord method to return the word with all characters not in letters replaced by _'s
private void underWord(char currentWord[] , char checkLetter[]) throws IOException //add parameters what it recieves
{

    for (int i = 0; i<currentWord.length; i++) {
       for (int index = 0; index<checkLetter.length; index++){
            if (used.contains(currentWord.charAt(i)))
            {
                checkLetter[index] =  currentWord.charAt(i);
            }

            else
            {
                checkLetter[index] = '_';
            }
       }
    }
    for (int i = 0; i < checkLetter.length; i++)
    {
        System.out.println(checkLetter[i]);
    }
}//End of maskWord method 
```

//------------------------------------------------ -------------------------------------------------- ----------------------------

```
//guess method to ask for user's guess
private void guess(char used[]) throws IOException//add parameters what it recieves
{
    centreln("Guess a letter in this 5-letter word: ");
    alphabet = kb.readline().charAt[0];
    used[dataSize] = alphabet;
    //adds guess to used letters array

}//End of guess method 
```

//------------------------------------------------ -------------------------------------------------- ----------------------------

```
//usedLetters method to check if user's guess has already been guessed
private boolean usedLetters(char used[]) throws IOException//add parameters what it recieves
{
    boolean letterUsed = false;
    for(int x=0; x<used.length; x++)
    {
        if(alphabet == used[x])
        {
            letterUsed = true;
        }
        else
        {
            letterUsed = false;
        }
     }
     return letterUsed;
    for (int index = 0; index < used.length; index++)
    System.out.println(used[index]);
    //Or could i just do centreln(usedAlphabet)
}//End of usedLetters method 
```

//------------------------------------------------ -------------------------------------------------- ----------------------------

```
//checkWord method to see if the user has got the correct word
private void checkWord() throws IOException
{
    for(int x=0; x<currentWord.length; x++)
    {
        if(checkLetter.equals(currentWord))
        {
            centreln("HUZZAH! You have guessed the word!");
            centreln("You have completed this game of hangman.");
            menu();
        }

        {
            centreln("You have run out of guesses!");
            centreln("The word was:");
                for (int index = 0; index < currentWord.length; index++)
                {
                    System.out.print(currentWord[index]);
                }
            menu();
        }
    }
}//End of checkWord method 
```

}

//------------------------------------------------ -------------------------------------------------- ----------------------------

所以我想出了这个错误：

```
C:\Users\HOME\Documents\twoHangman\src\twoHangman.java:272: error: '.class' expected
            checkWord(currentWord[] , checkLetter[]);
                                    ^
C:\Users\HOME\Documents\twoHangman\src\twoHangman.java:272: error: '.class' expected
            checkWord(currentWord[] , checkLetter[]);
                                                   ^ 
```

我不确定出了什么问题...请帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:55:26.873

我认为问题出在你的`play()`方法中。代替

```
if (life == 0)
{
    checkWord(currentWord[] , checkLetter[]);
} 
```

你应该写

```
if (life == 0)
{
    checkWord(currentWord, checkLetter);
} 
```

将数组作为参数传递。

正如肯特所指出的，另一个错误在于您的`checkWord`方法。代替

```
private void checkWord() throws IOException 
```

你应该写

```
private void checkWord(char currentWord[], char checkLetter[]) throws IOException 
```

声明此方法采用字符数组类型的两个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:55:19.927

在你的第一个代码块 play 方法中，你有这个方法调用：

```
checkWord(currentWord[] , checkLetter[]); 
```

但看一下 checkWord() 的方法签名：

```
private void checkWord() throws IOException 
```

参数在哪里？

你的代码编译了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:56:02.140

您`checkWord`定义了一个不带任何参数的方法，但是当您调用该方法时，您传递了 2 个参数`checkWord(currentWord[] , checkLetter[]);`，您需要定义一个带两个参数的方法。另外，当您打电话时`checkWord(currentWord[], checkLetter[])`，它应该是`checkWord(currentWord, checkLetter)`

编辑回答问题：解决您的问题的一种方法是更新您对`checkWord`这种方式的定义：

```
private void checkWord(String[] currentWord, String[] checkLetter) throws IOException 
```

# oracle - 动态解析到引用光标

> ID：13981780
> 
> 赞同：0
> 
> 时间：2012-12-20T22:48:25.610
> 
> 标签：oracle, plsql

我正在尝试从光标动态解析值，如下所示。

```
create or replace
PROCEDURE test(
PI_JANUS_ID IN VARCHAR2,
PO_dummy out Types.CursorType
)AS
PO_ACTUALCUROSR Types.CursorType;
cur_row tab%ROWTYPE;
val1 varchar2(100);
val2 varchar2(200);
BEGIN
 open PO_ACTUALCUROSR for select * from tab;

  LOOP
    FETCH PO_ACTUALCUROSR into cur_row;
    EXIT WHEN PO_ACTUALCUROSR%NOTFOUND;
    val1 := 'TNAME';
    SELECT 'cur_row.'||val1 INTO val2 FROM DUAL;
    dbms_output.put_line('Column Value ' || val2); 
  END LOOP ;
  CLOSE PO_ACTUALCUROSR;
END; 
```

在这里，如果您看到我必须调用 cur_row。获取值，但在这里我有一个变量（val1）中的列名。那么我将如何从光标中获取值。

如果我执行上面的块，我会看到“cur_row.TNAME”，但我实际上需要光标中的值。

有没有办法做到这一点。

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T11:04:31.293

做就是了

```
BEGIN
 open PO_ACTUALCUROSR for select * from tab;

  LOOP
    FETCH PO_ACTUALCUROSR into cur_row;
    EXIT WHEN PO_ACTUALCUROSR%NOTFOUND;
    val2 := cur_row.tname;
    dbms_output.put_line(val2);
  END LOOP ;
  CLOSE PO_ACTUALCUROSR;
end; 
```

或者

```
dbms_output.put_line(cur_row.tname); 
```

直接也可以。

ps你的变量

```
val2 varchar2(200); 
```

更好的是

```
val2 tab.tname%type; 
```

如果你说你需要在不知道列名的情况下动态拉取列，你必须使用动态 sql，并且当你使用 pl/sql 数组时，我们需要将它放在包规范中，所以我们可以引用它（因为您不能仅将 pl/sql 类型传递给动态 SQL）。

```
SQL> create table tab(id number, col1 varchar2(10));

Table created.

SQL> insert into tab values (1, 'a');

1 row created.

SQL> commit;

Commit complete.

SQL> create package global_var
  2  as
  3    cur_row tab%rowtype;
  4  end;
  5  /

Package created.

SQL> declare
  2  po_actualcurosr sys_refcursor;
  3  val1 varchar2(10) := 'COL1';
  4  val2 tab.col1%type;
  5  begin
  6   open po_actualcurosr for select * from tab;
  7
  8     loop
  9             fetch po_actualcurosr into global_var.cur_row;
 10             exit when po_actualcurosr%notfound;
 11             execute immediate 'begin :a := global_var.cur_row.'||dbms_assert.simple_sql_name(val1)||'; end;' using out val2;
 12             dbms_output.put_line(val2);
 13     end loop ;
 14     close po_actualcurosr;
 15  end;
 16  /
a

PL/SQL procedure successfully completed. 
```

# .net - 列表仅返回最后一个值

> ID：13981781
> 
> 赞同：1
> 
> 时间：2012-12-20T22:48:29.530
> 
> 标签：.net, vb.net

嗨，我有以下功能：

```
 Public Shared Function GetAbrechnung() As List(Of WochenBPlan)

        Dim wbp = New WochenBPlan
        Dim allBookings As List(Of WochenBPlan) = New List(Of WochenBPlan)

        Dim strSQL As String = "SELECT DISTINCT d.ABTEILUNG, d.BEMERKUNG, d.BESTUHLUNG, d.RAUMID, d.ID, d.PERSONENZAHL, d.ADRESSE + ', ' + d.RAUMBEZEICHNUNG AS RAUMBEZEICHNUNG, d.THEMA, p.VN + ' ' + p.NN AS NAME, CONVERT (char(5), d.VON, 108) + ' - ' + CONVERT (char(5), d.BIS, 108) AS ZEIT, p.TEL FROM VIEW_RAUMBUCHUNG_DISPO AS d INNER JOIN PERSONAL AS p ON d.PERSONAL_ID = p.ID WHERE THEMA = 'EVENT'"
        Dim objRS As SqlDataReader

        objRS = SQLrunReaderWB(strSQL)
        If objRS.HasRows Then

            While objRS.Read()

                wbp.Raum = objRS("RAUMBEZEICHNUNG")
                wbp.Zeit = objRS("ZEIT")

                If Not IsDBNull(objRS("ABTEILUNG")) Then
                    wbp.Bereich = objRS("ABTEILUNG")
                End If

                If Not IsDBNull(objRS("THEMA")) Then
                    wbp.Thema = objRS("THEMA")
                End If

                If Not IsDBNull(objRS("NAME")) Then
                    wbp.Mieter = objRS("NAME")
                End If

                If Not IsDBNull(objRS("TEL")) Then
                    wbp.Mieter_Tel = objRS("TEL")
                End If

                wbp.Personen = objRS("PERSONENZAHL")
                wbp.Bestuhlung = objRS("BESTUHLUNG")

                If Not IsDBNull(objRS("BEMERKUNG")) Then
                    wbp.Bemerkung = objRS("BEMERKUNG")
                End If

                allBookings.Add(wbp)

            End While

        Else

        End If

        ConnWB.Close()
        Return allBookings

End Function 
```

我的问题是我生成的列表只是返回最后一个值。我在做什么错？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T22:50:17.727

您需要在循环内声明您的范围对象。如果不这样做，您将仅获得同一对象的引用，并对其进行更改，因此将是包含列表的最后修改。

尝试这样的事情：

```
Public Shared Function GetAbrechnung() As List(Of WochenBPlan)

        Dim allBookings As List(Of WochenBPlan) = New List(Of WochenBPlan)

        Dim strSQL As String = "SELECT DISTINCT d.ABTEILUNG, d.BEMERKUNG, d.BESTUHLUNG, d.RAUMID, d.ID, d.PERSONENZAHL, d.ADRESSE + ', ' + d.RAUMBEZEICHNUNG AS RAUMBEZEICHNUNG, d.THEMA, p.VN + ' ' + p.NN AS NAME, CONVERT (char(5), d.VON, 108) + ' - ' + CONVERT (char(5), d.BIS, 108) AS ZEIT, p.TEL FROM VIEW_RAUMBUCHUNG_DISPO AS d INNER JOIN PERSONAL AS p ON d.PERSONAL_ID = p.ID WHERE THEMA = 'EVENT'"
        Dim objRS As SqlDataReader

        objRS = SQLrunReaderWB(strSQL)
        If objRS.HasRows Then

            While objRS.Read()

                'declare here a new instance to add on the list
                Dim wbp = New WochenBPlan

                wbp.Raum = objRS("RAUMBEZEICHNUNG")
                wbp.Zeit = objRS("ZEIT")

                If Not IsDBNull(objRS("ABTEILUNG")) Then
                    wbp.Bereich = objRS("ABTEILUNG")
                End If

                If Not IsDBNull(objRS("THEMA")) Then
                    wbp.Thema = objRS("THEMA")
                End If

                If Not IsDBNull(objRS("NAME")) Then
                    wbp.Mieter = objRS("NAME")
                End If

                If Not IsDBNull(objRS("TEL")) Then
                    wbp.Mieter_Tel = objRS("TEL")
                End If

                wbp.Personen = objRS("PERSONENZAHL")
                wbp.Bestuhlung = objRS("BESTUHLUNG")

                If Not IsDBNull(objRS("BEMERKUNG")) Then
                    wbp.Bemerkung = objRS("BEMERKUNG")
                End If

                ' add the reference to the new object on the list
                allBookings.Add(wbp)    

            End While    

        'Else ---> you do not need this ELSE scope, just remove it

        End If

        ConnWB.Close()

        Return allBookings

End Function 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T22:51:04.947

您需要在每次循环迭代时创建一个新的 WochenBPlan 实例。否则，您只是更改替换先前设置的值。将此添加到您的循环中。

```
wbp = New WochenBPlan() 
```

# android - 如何判断输入法选择器是打开还是关闭？

> ID：13981782
> 
> 赞同：13
> 
> 时间：2012-12-20T22:48:38.697
> 
> 标签：android, android-input-method, android-contextmenu

我的应用使用 . 打开输入法选择器（您选择键盘的菜单）`InputMethodManager.showInputMethodPicker()`。我的应用程序实际上并没有创建选择器（它是由 InputMethodManager 创建的），但我知道它是 a`ContextMenu`并且它的 id 是`R.id.switchInputMethod`.

![在此处输入图像描述](../Images/c4e962281462a7d00e27a4a63e5d1f8c.png)

选择器是多步骤向导的一部分，因此我需要知道选择器何时关闭，以便我的应用程序可以继续下一步。现在，如果默认键盘发生更改，我正在检查后台线程，**但如果用户选择相同的键盘或按下回，这将无济于事。**

所以我需要一种方法来判断选择器何时关闭（或其他一些聪明的方法来知道何时继续）。

提前致谢...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-28T11:48:53.720

这是一个小技巧。请进行测试，让我们知道它是否有效。

您所要做的就是让您的活动扩展这个 InputMethodActivity。当您需要用户选择输入法时，调用**pickInput()**，当用户完成时会调用 onInputMethodPicked( **) 。**

```
package mobi.sherif.inputchangecheck;

import android.os.Bundle;
import android.os.Handler;
import android.content.Context;
import android.support.v4.app.FragmentActivity;
import android.view.inputmethod.InputMethodManager;

public abstract class InputMethodActivity extends FragmentActivity {
    protected abstract void onInputMethodPicked();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        mState = NONE;
        super.onCreate(savedInstanceState);
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        if(mState == PICKING) {
            mState = CHOSEN;
        }
        else if(mState == CHOSEN) {
            onInputMethodPicked();

        }
    }

    private static final int NONE = 0;
    private static final int PICKING = 1;
    private static final int CHOSEN = 2;
    private int mState;
    protected final void pickInput() {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showInputMethodPicker();
        mState = PICKING;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T05:56:34.523

没有这样的机制来检查`InputMethodPicker`是否打开。

但是您可以通过另一种方式检查它，例如使用`hasWindowFocus()`检查方法关注您的根布局。

下面是示例代码：

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainlayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <Button
        android:id="@+id/btnPicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Picker" />

    <Button
        android:id="@+id/btnCheck"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Stop" />

</LinearLayout> 
```

**DemoappActivity.class**

```
public class DemoappActivity extends Activity {
    /** Called when the activity is first created. */

    Button btn1 , btn2;
    InputMethodManager imeManager;

    LinearLayout mLayoutRoot;
    TimerTask timertask;
    Timer timer;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mLayoutRoot = (LinearLayout)findViewById(R.id.mainlayout);
        imeManager = (InputMethodManager) getApplicationContext().getSystemService(INPUT_METHOD_SERVICE);
        btn1 = (Button)findViewById(R.id.btnPicker);
        btn1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                showInputMethodPicker();
            }
        });
        btn2 = (Button)findViewById(R.id.btnCheck);
        btn2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                timer.cancel();
            }
        });
        checkMyWindowHasFocus();
    }
    @Override
    protected void onDestroy() {

        timer.cancel();
        super.onDestroy();
    }

    public void checkMyWindowHasFocus()
    {
        timertask = new TimerTask() {

            @Override
            public void run() {
                System.out.println("has window focus..."+mLayoutRoot.hasWindowFocus());
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        Toast.makeText(getApplicationContext(), "Has focus "+mLayoutRoot.hasWindowFocus(), Toast.LENGTH_SHORT).show();
                    }
                });
            }
        };
        timer = new Timer();
        timer.schedule(timertask, 500, 5000);

    }

    private void showInputMethodPicker() {

        if (imeManager != null) {
            imeManager.showInputMethodPicker();

        } else {
            Toast.makeText(this, "Error",Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T11:34:22.800

很简单，你可以通过使用 build 函数知道：

```
 @Override
        public void onWindowFocusChanged(boolean hasFocus) {
            super.onWindowFocusChanged(hasFocus);
            isMyInputMethodEnabled();// write what ever you want to do after default keyboard selected
        }

  public void isMyInputMethodEnabled() {
        String imId = Settings.Secure.getString(getContentResolver(), Settings.Secure.DEFAULT_INPUT_METHOD);
        if (imId.contains(getPackageName())) {
            startActivity(new Intent(this, Main_uk.class));
            finish();
        }
    } 
```

# .net - 是否可以在文本框中使单词可点击，点击后可以执行某些操作？

> ID：13981793
> 
> 赞同：0
> 
> 时间：2012-12-20T22:50:04.587
> 
> 标签：.net, vb.net, visual-studio-2010, textbox

我的项目中有一个文本框，用户可以为我的应用程序输入一种简单类型的脚本语法。我试图弄清楚是否可以使文本框中的某个单词可单击，因此当我的用户单击它时，它将弹出一个 openfiledialog，然后用文件选择的路径替换该单词。

我的第一个方法是搜索文本框并获取单词的 xy 坐标，然后在光标位于该单词上方并且单击文本框时更改光标。虽然我不认为这会起作用，因为 x/y 值会改变，它不会帮助我替换正确的单词。

这个词可以在文本框中多次出现......如果可以使用标准文本框，那么任何关于我如何实现这一点的指导都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T00:46:15.197

[参考这个链接](https://stackoverflow.com/questions/9855292/links-inside-rich-textbox)

如果您希望与代码隐藏交互，您可以轻松创建一个 javascript 链接，单击该链接将触发一个函数或带有命令参数的回发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:38:00.437

如果不为您编写整个课程，我可能会从[GetCharIndexFromPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getcharindexfromposition.aspx)开始。有了这个，您可以指定文本框的左上角和右下角，以查找文本框中第一个和最后一个可见字符的索引。

从那里你只需要解析出这些边界之间感兴趣的关键字（应该很快，因为你只需要搜索可见的字符）。然后我将指定一组`Rect`s，这次使用绑定关键字的[GetPositionFromCharIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getpositionfromcharindex.aspx)。您甚至可以使用 GDI 来绘制它们以进行调试。您可能可以在`OnPaint`或其他一些适当的处理程序中执行所有这些操作（只要文本框的输出发生更改）。

然后，在`MouseMove`处理程序中，您只需根据边界`Rect`s 检查鼠标位置以识别是否处于活动区域（设置光标图标等），并了解该状态`OnClick`以执行您想要的任何操作。

# php - 未定义的变量错误php

> ID：13981800
> 
> 赞同：1
> 
> 时间：2012-12-20T22:50:33.230
> 
> 标签：php, variables, undefined

为什么我会收到未定义的变量错误？我在 IF 语句中定义它并且条件始终是，因为存在 ni 性能问题，关于如何解决这个问题的任何建议？

```
 if(in_array($row['billing'],$list)){
    $bills = array_search($row['billing'], $list);
    }

    echo $bills; // <-- undefined variable $bills on this line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:52:44.557

看起来值 ( `$row['billing']`) 确实不在数组 ( `$list`) 中，因此`in_array()`返回 false。所以`$bills`永远不会被定义，因为里面的代码`if` *永远不会*运行。

可以肯定的是，使用您选择的默认值（ 、 等）预先定义`null`它`''`：

```
$bills = 'no billing information';
if(in_array($row['billing'],$list)){
    $bills = array_search($row['billing'], $list);
} 
```

另一方面，您实际上并不需要该检查。如果该值不在数组中，则无论如何[`array_search()`](http://hu2.php.net/manual/en/function.array-search.php)都会返回：`false`

> 如果在数组中找到 needle 的键，则返回它，否则返回 FALSE。

所以你可以简化事情：

```
$bills = array_search($row['billing'], $list);
echo $bills === false ? 'no billing information' : $bills; 
```

您必须使用`=== false`，因为该函数也可能返回`0`（如果元素位于第一个索引处）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T22:53:45.447

```
if(isset($bills))
 echo $bills 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T22:52:57.490

该`$bills`变量仅存在于 的范围内`if statement`，即在左大括号和右大括号之间。

如果要在 if 语句之外使用值，请在`$bills`前面定义。例如：

```
 $bills = '';
   if(in_array($row['billing'],$list))
   {
        $bills = array_search($row['billing'], $list);
   }

    echo $bills; 
```

或者，您可以只`echo`取出 if 语句范围内的值。

**编辑**：我错了，[PHP 没有块作用域](http://php.net/manual/en/language.variables.scope.php)。使用以下内容：

```
 if(in_array($row['billing'],$list))
    {
        $bills = array_search($row['billing'], $list);
        echo $bills;
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T22:55:21.303

该`if`说法`if(in_array($row['billing'],$list))`不*成立*。因此，`$bills`变量没有被设置/定义。您要么需要在`if`语句之前定义它，要么确保`if`语句通过，在`echo`.

或者，您还可以检查它是否在之前设置过`echo`，

```
if(isset($bills))
  echo $bills; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T22:55:39.490

```
if(isset($bills)){echo $bills;} 
```

# android - 在我的第一个应用程序中修复重置按钮

> ID：13981801
> 
> 赞同：0
> 
> 时间：2012-12-20T22:50:34.603
> 
> 标签：android

我今天一直在开发这个应用程序，但我似乎无法弄清楚代码有什么问题。

我可以在模拟器和我的摩托罗拉 Bravo (2.2) 上运行该应用程序，但是当我完成一轮并按下“重置”按钮时，它突然给我一个错误，该程序不再工作了。有没有什么办法解决这一问题？

这是我的源文件：

```
package com.example.rockpaperscissorlizardspock;
import java.util.Random;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.*;
import android.view.View.OnClickListener;

public class rockpaperscissorlizardspock extends Activity {
    /** Called when the activity is first created. */

    private TextView resultText;
    private Button play, reset;
    private ImageButton scissors, paper, rock, lizard, spock;
    private int paperimg, paper_pressedimg, scissorsimg, scissors_pressedimg,     rockimg, rock_pressedimg, lizardimg, lizard_pressedimg, spockimg, spock_pressedimg;
        private ImageView compSciss, compPaper, compRock, compLiz, compSpock;
    Random rand = new Random();
    int compChoice = 0;
    String pChoice ="";
    String cChoice = "";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Initialize();
    }

    /** initialize all of the components*/
     private void Initialize()
    {
        play = (Button) findViewById(R.id.button1);
        reset = (Button) findViewById(R.id.button2);
        resultText = (TextView) findViewById(R.id.resultText);
        lizard = (ImageButton) findViewById(R.id.imageButton4);
        spock = (ImageButton) findViewById(R.id.imageButton5);
        scissors = (ImageButton) findViewById(R.id.imageButton3);
        paper = (ImageButton) findViewById(R.id.imageButton2);
        rock = (ImageButton) findViewById(R.id.imageButton1);
        compSciss = (ImageView) findViewById(R.id.computerScissors);
        compPaper = (ImageView) findViewById(R.id.computerPaper);
        compRock = (ImageView) findViewById(R.id.computerRock);
        spockimg = R.raw.spock;
        spock_pressedimg = R.raw.spock_pressed;
        lizardimg = R.raw.lizard;
        lizard_pressedimg = R.raw.lizard_pressed;
        paperimg = R.raw.paper;
        paper_pressedimg = R.raw.paper_pressed;
        scissorsimg = R.raw.scissors;
        scissors_pressedimg = R.raw.scissors_pressed;
        rockimg = R.raw.rock1;
        rock_pressedimg = R.raw.rock1_pressed;

        /**set the button Listeners*/
        play.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                play();
            }
        });

        reset.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                paper.setImageResource(paperimg);

                 rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                lizard.setImageResource(lizardimg);
                spock.setImageResource(spockimg);
                compPaper.setImageResource(paperimg);
                compRock.setImageResource(rockimg);
                compSciss.setImageResource(scissorsimg);
                compLiz.setImageResource(lizardimg);
                compSpock.setImageResource    (spockimg);               
                pChoice = "";
                cChoice = "";
                play.setEnabled(false);
                reset.setEnabled(true);
                scissors.setEnabled(true);
                paper.setEnabled(true);
                rock.setEnabled(true);
                lizard.setEnabled(true);
                spock.setEnabled(true);
                resultText.setText("");
            }
        });

        /*
         * Declaring what happens when specific choices are made.
         */

        scissors.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){    
                     scissors.setImageResource(scissors_pressedimg);
                    paper.setImageResource(paperimg);
                    rock.setImageResource(rockimg);
                    spock.setImageResource(spockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "S";
                    play.setEnabled(true);
             }
         });

         paper.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                    paper.setImageResource(paper_pressedimg);
                    scissors.setImageResource(scissorsimg);
                    spock.setImageResource(spockimg);
                    rock.setImageResource(rockimg);
                    lizard.setImageResource(lizardimg);
                    pChoice = "P";
                    play.setEnabled(true);
            }
         });

        rock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                rock.setImageResource(rock_pressedimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                spock.setImageResource(spockimg);
                lizard.setImageResource(lizardimg);
                pChoice = "R";
                play.setEnabled(true);
            }
        });

        lizard.setOnClickListener(new OnClickListener(){
             public void onClick(View arg0){
                 lizard.setImageResource(lizard_pressedimg);
                 spock.setImageResource(spockimg);
                 rock.setImageResource(rockimg);
                 scissors.setImageResource(scissorsimg);
                 paper.setImageResource(paperimg);
                 pChoice = "L";
                 play.setEnabled(true);
            }
         });

        spock.setOnClickListener(new OnClickListener(){
            public void onClick(View arg0){
                spock.setImageResource(spock_pressedimg);
                lizard.setImageResource(lizardimg);
                rock.setImageResource(rockimg);
                scissors.setImageResource(scissorsimg);
                paper.setImageResource(paperimg);
                pChoice = "SP";
                play.setEnabled(true);
            }
        });

    }

    /**The method that chooses the computer's move and compares
     *  to the player's move.
     */
    public void play()
    {
        compChoice = rand.nextInt(5);

        if(compChoice == 0)
        {
            cChoice = "R";
            compRock.setImageResource(rock_pressedimg);
            }
        else if(compChoice == 1){
            cChoice = "P";
            compPaper.setImageResource(paper_pressedimg);
        }       
         else if(compChoice == 2)
        {
            cChoice = "S";
            compSciss.setImageResource(scissors_pressedimg);
            }
        else if(compChoice == 3)
           {
            cChoice = "L";
             compLiz.setImageResource(lizard_pressedimg);
            }
        else if(compChoice == 4)
       { 
       cChoice = "SP";
       compSpock.setImageResource(spock_pressedimg);
       }

    check();
}

/**
 * Compares the Computer's and the Player's moves.
 */
public void check()
{
    if(pChoice == "R") //Rock
    {
        if(cChoice == "R")
            resultText.setText("Draw");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");
    }

    else if(pChoice == "P") //Paper
    {
        if(cChoice == "R")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("Draw");

        else if(cChoice == "S")
            resultText.setText("You Lose");

        else if(cChoice == "SP")
            resultText.setText("You Win");

        else if(cChoice == "L")
            resultText.setText("You Lose");

    }

    else if(pChoice == "S") //Scissors
    {
        if(cChoice == "R")
            resultText.setText("You Lose");

        else if(cChoice == "P")
            resultText.setText("You Win");

        else if(cChoice == "S")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Win");

        else if(cChoice == "SP")
            resultText.setText("You Lose");

    }

    else if(pChoice == "L") //Lizard
    {
      if(cChoice == "R")
        resultText.setText("You Lose");

      else if(cChoice == "L")
        resultText.setText("Draw");

      else if(cChoice == "SP")
        resultText.setText("You Win");

      else if(cChoice == "S")
        resultText.setText("You Lose");

      else if(cChoice == "P")
        resultText.setText("You Win");
    }

    else if(pChoice == "SP") //Spock
    {
        if(cChoice == "SP")
            resultText.setText("Draw");

        else if(cChoice == "L")
            resultText.setText("You Lose");

        else if(cChoice == "S")
            resultText.setText("You Win");

        else if(cChoice == "P")
            resultText.setText("You Lose");

        else if(cChoice == "R")
            resultText.setText("You Win");

    }

    gameOver();
}

/**
 * Runs at the end of each round. Disables all of the buttons
 * except for the reset button.
 */
public void gameOver()
{
    play.setEnabled(false);
    scissors.setEnabled(false);
    rock.setEnabled(false);
    paper.setEnabled(false);
    spock.setEnabled(false);
    lizard.setEnabled(false);
    reset.setEnabled(true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:51:32.160

`compLiz`初始化方法中缺少ImageView 。因此它是空的。ANR 是由`NullPointerException`重置按钮的 onClick 处理程序引起的。只需将其添加到初始化方法中，一切都很好。

对于未来：请为此类问题添加完整的 logcat 摘录。

# facebook - 使用 Facebook Graph API 访问存档的私人消息

> ID：13981802
> 
> 赞同：1
> 
> 时间：2012-12-20T22:50:40.150
> 
> 标签：facebook, facebook-graph-api

如何使用 Facebook 的 Graph API 访问存档的私人消息？

`https://graph.facebook.com/me/inbox`似乎只返回未归档的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:59:11.307

因此，交易（显然）是存档消息根本无法通过 api 获得。这是否是一个错误还有待确定。

[您可以通过在API Explorer](https://developers.facebook.com/tools/explorer)中通过其 ID 查询特定消息来查看此行为，然后通过 Facebook 归档该消息。返回资源管理器并查询相同的消息会导致超级通用且备受鄙视`"Unsupported get request"`。

```
{
  "error": {
    "message": "Unsupported get request.", 
    "type": "GraphMethodException", 
    "code": 100
  }
} 
```

# ios - 将 iOS uiviewcontroller 放到 cocos2d 层

> ID：13981803
> 
> 赞同：0
> 
> 时间：2012-12-20T22:50:46.470
> 
> 标签：ios, cocos2d-iphone

有谁知道如何将 uiviewcontroller（或只是视图）添加到 cocos2d 层上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:22:17.703

这是如何完成的：

```
[[CCDirector sharedDirector].view addSubView:yourView]; 
```

UIKit 视图将被绘制在 cocos2d 场景的前面。如果你需要它，你需要改变一些东西（32位帧缓冲区，cocos2d view opaque = NO，glClearColor with full alpha）。

你不能有一个位于特定 cocos2d 层上的 UIKit 视图（即 UIKit 视图后面和前面的节点）。这根本不可能，也没有解决方法。

# ios - 使用 GLKTextureLoader 和 imageNamed 的问题：多次加载同一图像时

> ID：13981808
> 
> 赞同：1
> 
> 时间：2012-12-20T22:51:20.510
> 
> 标签：ios, opengl-es, glkit, imagenamed, glktextureloader

当我使用以下代码多次加载图像时，我得到了奇怪的行为：

```
NSDictionary *options = @{GLKTextureLoaderOriginBottomLeft: @YES};
textureInfo = [GLKTextureLoader textureWithCGImage:[UIImage imageNamed:@"name"].CGImage 
                                           options:options
                                             error:nil]; 
```

当我第一次运行加载图像时，它按预期工作，但是当我尝试再次加载相同的图像时，它被颠倒了。

我认为这与由于使用 imageNamed: 而实际上传递给纹理加载器的 CGImage 相同的事实有关。因此，翻转变换在同一图像上再次应用。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:28:01.437

我想您可以翻转图像，并在程序启动时第一次加载它。

或者不使用 imageNamed。或者将纹理保存在内存中，这样您只需加载一次。

# asp.net - 是否有太多内部链接（菜单链接、页脚链接等）被 视为“重复内容”？

> ID：13981815
> 
> 赞同：-1
> 
> 时间：2012-12-20T22:51:47.647
> 
> 标签：asp.net, seo, duplicate-removal, googlebot

我有一个**水平顶部导航栏**，其中包含指向我网站页面的菜单和子菜单的链接。这些都包含在我的母版页和资源文件中。

我还有一个**垂直菜单**，其中包含指向相同页面的相同链接。

**我的页脚中**还有一些链接（法律、联系方式等）。

我将网站设置为这样的原因是因为我的许多客户都是年长的工程师，他们对互联网不太了解，这使得网站对于这些类型的观众来说“更容易导航”。

也许这张照片会让事情变得更清楚：

![USS 网站截图](../Images/e708158527eee82ee22d060e66ce6168.png)

我的问题是，我是否会因为拥有“**重复内容**”或“**重复链接**”而受到 SE 机器人的 SEO 惩罚？如果是这样，是否建议我只将左栏中的垂直菜单向下并将其他东西放在那里？任何指导将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:06:28.877

不，这不是重复的内容。

重复内容是关于大量文本（非标记）。几乎每个站点都有一些重复项，通常在每个页面上，用于页眉和页脚之类的内容。这不是谷歌或熊猫更新所关心的。

# python - 关系字段的openerp求和函数

> ID：13981820
> 
> 赞同：4
> 
> 时间：2012-12-20T22:52:17.957
> 
> 标签：python, function, openerp

在 Openerp 中，我们有 object_A 和一个 one2many 字段属于 object_B。Object_B 有一个浮点字段。在 object_A 中，我们为对应的 object_B 提供了一个 one2many_list 小部件，因此很自然地，每个新记录都会有多行。
我知道这很简单，但我很难在 object_A 中编写一个函数来总结 Object_B 浮点列的总值。我到目前为止是这样的：

```
def get_result(self, cr, uid, ids):
   total = {}
   for obj in self.browse(cr, uid, ids):
      result=0.0
      total[result]+= obj.o2m_field.float_field
   return total 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T07:47:59.523

@DReispt 提供的代码应该可以工作，如果您批准答案，请批准他的，而不是我的。

要理解的重要一点是，OpenERP 中的函数字段返回一个字典，其中键的对象 id 和给定对象的字段值作为关联值。

在您的原始代码中：

```
result = 0.0
total[result] += anything 
```

会导致 a`KeyError`因为字典最初是空的（`total = {}`在代码的开头）。

DReispt 代码的较短版本是

```
def get_result(self, cr, uid, ids, context=None):
   total = {}
   for obj in self.browse(cr, uid, ids, context=context):
      total[obj.id] = sum(o2m.float_field for o2m in obj.o2m_field)
   return total 
```

这个版本利用了 Python 的生成器表达式，可以传递给`sum()`内置函数。它也稍微快一些，因为您避免`total`为每个对象多次访问字典。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T23:50:36.840

您需要循环 o2m：

```
def get_result(self, cr, uid, ids, context=None):
   total = {}
   for obj in self.browse(cr, uid, ids, context=context):
      total[obj.id] = 0
      for o2m in obj.o2m_field:
          total[obj.id] += o2m.float_field
   return total 
   #example: {56: 12.34, 57: 56.78} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T08:43:43.677

Just for kicks, doing it the functional way:

```
def get_result(self, cr, uid, ids, context=None):
   return {obj.id: sum(o2m.float_field for o2m in obj.o2m_field)
           for obj in self.browse(cr, uid, ids, context=context)} 
```

# python - 如何在 QTextEdit 中找到子字符串并突出显示它？

> ID：13981824
> 
> 赞同：7
> 
> 时间：2012-12-20T22:52:44.523
> 
> 标签：python, regex, qt, pyqt, pyside

我有一个显示文件内容的 QTextEdit 窗口。我希望能够使用正则表达式在文本中找到所有匹配项，并通过使匹配背景不同或通过更改匹配文本颜色或使其变为粗体来突出显示它们。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T10:46:36.957

我认为解决问题的最简单方法是使用与编辑器关联的光标来进行格式化。通过这种方式，您可以设置前景、背景、字体样式...以下示例将匹配项标记为不同的背景。

```
from PyQt4 import QtGui
from PyQt4 import QtCore

class MyHighlighter(QtGui.QTextEdit):
    def __init__(self, parent=None):
        super(MyHighlighter, self).__init__(parent)
        # Setup the text editor
        text = """In this text I want to highlight this word and only this word.\n""" +\
        """Any other word shouldn't be highlighted"""
        self.setText(text)
        cursor = self.textCursor()
        # Setup the desired format for matches
        format = QtGui.QTextCharFormat()
        format.setBackground(QtGui.QBrush(QtGui.QColor("red")))
        # Setup the regex engine
        pattern = "word"
        regex = QtCore.QRegExp(pattern)
        # Process the displayed document
        pos = 0
        index = regex.indexIn(self.toPlainText(), pos)
        while (index != -1):
            # Select the matched text and apply the desired format
            cursor.setPosition(index)
            cursor.movePosition(QtGui.QTextCursor.EndOfWord, 1)
            cursor.mergeCharFormat(format)
            # Move to the next match
            pos = index + regex.matchedLength()
            index = regex.indexIn(self.toPlainText(), pos)

if __name__ == "__main__":
    import sys
    a = QtGui.QApplication(sys.argv)
    t = MyHighlighter()
    t.show()
    sys.exit(a.exec_()) 
```

该代码是不言自明的，但如果您有任何问题，请询问他们。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-21T03:53:25.257

以下是如何突出显示 a 中的文本的示例`QTextEdit`：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class highlightSyntax(QSyntaxHighlighter):
    def __init__(self, listKeywords, parent=None):
        super(highlightSyntax, self).__init__(parent)
        brush   = QBrush(Qt.darkBlue, Qt.SolidPattern)
        keyword = QTextCharFormat()
        keyword.setForeground(brush)
        keyword.setFontWeight(QFont.Bold)

        self.highlightingRules = [  highlightRule(QRegExp("\\b" + key + "\\b"), keyword)
                                    for key in listKeywords
                                    ]

    def highlightBlock(self, text):
        for rule in self.highlightingRules:
            expression = QRegExp(rule.pattern)
            index      = expression.indexIn(text)

            while index >= 0:
              length = expression.matchedLength()
              self.setFormat(index, length, rule.format)
              index = text.indexOf(expression, index + length)

        self.setCurrentBlockState(0)  

class highlightRule(object):
    def __init__(self, pattern, format):
        self.pattern = pattern
        self.format  = format

class highlightTextEdit(QTextEdit):
    def __init__(self, fileInput, listKeywords, parent=None):
        super(highlightTextEdit, self).__init__(parent)
        highlightSyntax(QStringList(listKeywords), self)

        with open(fileInput, "r") as fInput:
            self.setPlainText(fInput.read())        

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = highlightTextEdit("/path/to/file", ["foo", "bar", "baz"])
    main.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-27T15:33:06.687

**QT5 更新了正则表达式，见 QRegularExpression** [https://dangellog.wordpress.com/2012/04/07/qregularexpression/](https://dangelog.wordpress.com/2012/04/07/qregularexpression/)

我已经使用游标更新了第一个示例。

请注意以下更改：

1.  这不会包装编辑，而是使用内部的编辑框，可以轻松更改它以允许您传入编辑小部件。

2.  这会找到正确的正则表达式，而不仅仅是一个单词。

```
 def do_find_highlight(self, pattern):
        cursor = self.editor.textCursor()
        # Setup the desired format for matches
        format = QTextCharFormat()
        format.setBackground(QBrush(QColor("red")))

        # Setup the regex engine
        re = QRegularExpression(pattern)
        i = re.globalMatch(self.editor.toPlainText()) # QRegularExpressionMatchIterator

        # iterate through all the matches and highlight
        while i.hasNext():
            match = i.next() #QRegularExpressionMatch

            # Select the matched text and apply the desired format
            cursor.setPosition(match.capturedStart(), QTextCursor.MoveAnchor)
            cursor.setPosition(match.capturedEnd(), QTextCursor.KeepAnchor)
            cursor.mergeCharFormat(format) 
```

# amazon-web-services - 为什么我的 CloudFront 文件似乎丢失了？

> ID：13981827
> 
> 赞同：0
> 
> 时间：2012-12-20T22:53:03.667
> 
> 标签：amazon-web-services, amazon-cloudfront

我试图了解为什么我的 CloudFront 文件似乎“丢失”。

我正在使用 REST 服务器返回地图图块，并且 url 是这样的：

```
domain.com/1234/a/234 
```

这将返回一个 png，它是一个地图图块。

我想知道是否是因为 url 在请求中没有文件扩展名。由于它在技术上是一个带有图像响应的 Web 服务请求，我不确定如何让 CloudFront 满意并保持我的 ws API 到位。

想法或建议？

# c - 删除排序数组中的双精度，然后将 X 放在最后

> ID：13981830
> 
> 赞同：1
> 
> 时间：2012-12-20T22:53:15.587
> 
> 标签：c, arrays, sorting

这是我几天来一直试图解决的问题。

我需要编写一个获取排序数组的程序。程序会将 999 放在两个相邻块具有相同值的位置，然后将所有 999 放在数组的末尾。我需要在不使用另一个数组的情况下执行此操作，并且程序必须是 O(n)。

示例输入：

`50,60,60,72,81,81,81,81,93,93`

所需的输出：

`50,60,72,81,93,999,999,999,999,999`

另一个例子：

`1,1,2,3,4,4,5,6,6`

所需的输出：

`1,2,3,4,5,6,999,999,999`

我的代码。它不工作。对于第一个示例，输出没问题。对于第二个示例，我得到 1,2,3,4,5,4,5,6,-14568127（超出数组范围）

我的算法是我用两个索引 i 和 j 遍历数组，如果 a[i]!=a[i+1] 然后我推进 i。如果它们相等，则 j 查找下一个唯一值，并将其放入 a[i+1]。

我很想听听更好的想法或代码来做到这一点。在 C.

```
while((j!=size-1)&&(a[size-1]!=a[i]))
{
     if(a[i]!=a[i+1])
     {
         i++;
         j=i;
     }
     if(a[i]==a[i+1])
     {
         j=i;
         while(a[i]==a[j])
               j++;
         a[i+1]=a[j];
         i++;
         if(j!=size-1)
              j=i;
     }
}
i++
for(;i<size;i++)
      a[i]=999; 
```

我已经编辑了代码，现在我按照陈的建议进行了。首先，我遍历数组，将 999 放在双打所在的位置，但当我想切换时出现问题。这是我为重新排序数组而编写的代码：每次我将 999 放在某个地方时，count++。

它适用于我完美给出的两个示例。谢谢大家。

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <time.h>
void main()
{
    int *a;
    int i=0,j=0,size,count=0;
    printf("Enter the size of the array\n");
    scanf("%d", &size);
    a=(int *)calloc(size,sizeof(int));
    printf("Enter %d numbers\n",size);
    for(i=0;i<size;i++)
        scanf("%d",&a[i]);
    printf("The array recieved is :\n");
    for(i=0;i<size;i++)
        printf(" %d ", a[i]);
    i=0;
    printf("\n");
    for(i=0;i<size;i++)
    {
        if(a[i]==a[i+1])
        {
            j=i+1;
            while(a[i]==a[j])
            {
                a[j]=999;
                j++;
            }
            count++;
        }
    }
    while(count!=0)
    {
        for(i=0;i<size-1;i++)
        {
            j=i;
            if(a[j]==999)
            {
                a[j]=a[j+1];
                a[j+1]=999;
            }
        }
        count--;
    }
    printf("The new array is: \n");
    for(i=0;i<size;i++)
        printf(" %d ",a[i]);
    free(a);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:02:20.233

假设这是针对学校练习，并且您不是为 Google 工作并且需要删除世界地图中位置的重复项，那么您的算法听起来是正确的。

对于非常多的潜在重复项，并且假设列表已排序，您可以使用基于搜索最近的较大元素的方法，然后通过测量两个元素之间的距离，您可能会发现更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:09:10.653

**这是在O(n)**中运行的一般方法：

**假设：**输入数组不包含`999`（如果包含也没关系，您只需要使用不同的标记值）：

*   遍历数组一次：
    *   对于每个元素，向前看下一个
    *   如果它与当前元素重复，请将其更改为`999`
    *   继续向前看并标记重复项，`999`直到您遇到不同的元素。
*   你想要所有的`999`'s 在最后，所以现在，保留 2 个单独的指针：
    *   `X`用于跟踪第一个`999`在数组中的位置的索引
    *   `num`跟踪我们在交换过程中所处位置的另一个索引
*   再次遍历数组，`999`使用这两个指针交换所有有效数字。

这可能听起来令人困惑，所以这是一个使用您的示例之一的伪动画：（使用`W`作为哨兵代替“999”以提高可读性）

```
1,1,2,3,4,4,5,6,6,
1,W,2,3,4,4,5,6,6,
1,W,2,3,4,W,5,6,6,
1,W,2,3,4,W,5,6,W,
1,2,W,3,4,W,5,6,W,
1,2,3,W,4,W,5,6,W,
1,2,3,4,W,W,5,6,W,
1,2,3,4,5,W,W,6,W,
1,2,3,4,5,6,W,W,W, 
```

再一次，但这次`W`用数字后缀标记，这样你就可以看到发生了哪些交换：

```
1,1,2,3,4,4,5,6,6,
1,W1,2,3,4,4,5,6,6,
1,W1,2,3,4,W2,5,6,6,
1,W1,2,3,4,W2,5,6,W3,
1,2,W1,3,4,W2,5,6,W3,
1,2,3,W1,4,W2,5,6,W3,
1,2,3,4,W1,W2,5,6,W3,
1,2,3,4,5,W2,W1,6,W3,
1,2,3,4,5,6,W1,W2,W3, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T03:03:06.300

最简单的方法是先删除重复项，然后用`999`.

删除重复项是 O(n)，填充数组是 O(n)。

# javascript - 如何在 javascript 中的文件（二进制文件，如图像）上使用 Sha256？

> ID：13981832
> 
> 赞同：5
> 
> 时间：2012-12-20T22:53:19.143
> 
> 标签：javascript, binary, filereader, sha256, cryptojs

我正在尝试对 Javascript 中的文件执行 Sha256。我使用[FileReader(HTML5)](http://www.html5rocks.com/en/tutorials/file/dndfiles/)读取文件。我使用 FileReader 中的 readAsBinaryString 函数传入图像文件。然后在 FileReader.onload 函数上，我将 evt.target.result 传递给[CryptoJs API](http://code.google.com/p/crypto-js/#PBKDF2)中的 SHA256 方法。我能够成功获得哈希值，但它不正确。当我传入一个文本文件时，它工作正常，但不是图像文件。

代码（应该能够将下面的代码复制到 HTML 文件并在 firefox 上运行 - 按“整个文件”按钮）：

```
<style>
  #byte_content {
    margin: 5px 0;
    max-height: 100px;
    overflow-y: auto;
    overflow-x: hidden;
  }
  #byte_range { margin-top: 5px; }
</style>

<input type="file" id="files" name="file" /> Read bytes: 
<span class="readBytesButtons">
  <button data-startbyte="0" data-endbyte="4">1-5</button>
  <button data-startbyte="5" data-endbyte="14">6-15</button>
  <button data-startbyte="6" data-endbyte="7">7-8</button>
  <button>entire file</button>
</span>
<div id="byte_range"></div><BR>
<div id="byte_content"></div><BR>
<div id="crypto_sha256"></div>

<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/sha256.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js"></script>
<script>

  var sha256;

  function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementById('byte_content').textContent = evt.target.result;
        document.getElementById('byte_range').textContent = 
            ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');

        //**UPDATED SOLUTION: Since its binary data, the message needs to be converted from string to bytes using Latin1**
            sha256.update(CryptoJS.enc.Latin1.parse(evt.target.result));

        var hash = sha256.finalize();

        document.getElementById('crypto_sha256').textContent = ['SHA-256: ', hash].join('');
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }

  document.querySelector('.readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');

      sha256 = CryptoJS.algo.SHA256.create();

      readBlob(startByte, endByte);
    }
  }, false);
</script> 
```

示例输出：

1.  测试“文本”文件：

    *   Javascript生成的SHA256：
        **78cb5e86455dc8e3bc20fe17e0213a938281216d57b31f8307f5bca67c37bb09**
    *   由cygwin在同一文件上生成的SHA256：
        $ sha256sum Phillips.txt **78cb5e86455dc8e3bc20fe17e0213a938281216d57b31f8307f5bca67c37bb09** *SomeTestFile.txt
2.  测试“二进制”文件（pdf）：

    *   Javascript生成的SHA256：
        **57f93c1d20a8ad8ade984a1d9756c1a40600bd8a7527601945c4e0b5e042c605**
    *   由 cygwin 在同一文件上生成的 SHA256：
        $ sha256sum Smoke\ Detector\ Brochure.pdf **57f93c1d20a8ad8ade984a1d9756c1a40600bd8a7527601945c4e0b5e042c605** *Smoke Detector Brochure.pdf

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T16:20:34.863

我知道这个问题已经很老了，但我想我还是会分享我所知道的。

通过执行我在此答案中讨论的内容，您可以更轻松地做到这一点[https://stackoverflow.com/a/17848266/2226207](https://stackoverflow.com/a/17848266/2226207)

基本上你可以包含 components/lib-typedarrays-min.js 然后在代码中执行以下操作。

```
var reader = new FileReader();

// If we use onloadend, we need to check the readyState.
reader.onloadend = function(evt) {
  if (evt.target.readyState == FileReader.DONE) { // DONE == 2

    var wordArray = CryptoJS.lib.WordArray.create(e.target.result);
    var hash = CryptoJS.SHA256(wordArray);
  }
};

var blob = file.slice(start, stop + 1);
reader.readAsArrayBuffer(blob); 
```

我尚未测试上述解决方案，但它应该可以正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-22T13:18:40.367

这是一个简单的解决方案：[https ://code.google.com/p/crypto-js/issues/detail?id=62](https://code.google.com/p/crypto-js/issues/detail?id=62)

> 当您将字符串传递给哈希器时，它会使用 UTF-8 转换为字节。这是为了确保不剪裁外来字符。由于您使用的是二进制数据，因此您需要使用 Latin1 将字符串转换为字节。

```
sha256.update(CryptoJS.enc.Latin1.parse(evt.target.result)); 
```

# java - 在Java中匹配字符串中的单词

> ID：13981846
> 
> 赞同：4
> 
> 时间：2012-12-20T22:54:36.727
> 
> 标签：java, regex

我正在尝试在 Java 中匹配包含单词`"#SP"`（无引号，不区分大小写）的字符串。但是，我发现使用正则表达式非常困难！

我需要匹配的字符串： `"This is a sample #sp string"`, `"#SP string text..."`, `"String text #Sp"`

我不想匹配的字符串： `"Anything with #Spider"`, `"#Spin #Spoon #SPORK"`

到目前为止，这是我所拥有的：http: [//ideone.com/B7hHkR](http://ideone.com/B7hHkR)。有人可以指导我构建我的正则表达式吗？

我也试过：`"\\w*\\s*#sp\\w*\\s*"`无济于事。

编辑：这是来自 IDEone 的代码：

```
java.util.regex.Pattern p = 
    java.util.regex.Pattern.compile("\\b#SP\\b", 
        java.util.regex.Pattern.CASE_INSENSITIVE);

java.util.regex.Matcher m = p.matcher("s #SP s");

if (m.find()) {
    System.out.println("Match!");
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T22:59:51.540

（编辑：不需要正面向后看，只完成匹配，而不是替换）

您是 Java 错误命名的正则表达式匹配方法的另一个受害者。

`.matches()`非常不幸的是，它试图匹配*整个输入*，这明显违反了“正则表达式匹配”的定义（正则表达式可以匹配输入中的任何位置）。您需要使用的方法是`.find()`.

这是一个脑残的 API，不幸的是，Java 并不是唯一具有这种被误导的方法名称的语言。Python也认罪。

此外，您遇到的问题`\\b`将在单词边界上检测到并且`#`不是单词的一部分。您需要使用交替检测输入的开头或空格。

您的代码需要看起来像这样（非完全限定的类）：

```
Pattern p = Pattern.compile("(^|\\s)#SP\\b", Pattern.CASE_INSENSITIVE);

Matcher m = p.matcher("s #SP s");

if (m.find()) {
    System.out.println("Match!");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-20T23:17:42.500

你做得很好，但 # 前面的 \b 具有误导性。\b 是单词边界，但# 已经不是单词字符（即它不在集合[0-9A-Za-z_] 中）。因此，# 之前的空格不被视为单词边界。改成：

```
java.util.regex.Pattern p = 
    java.util.regex.Pattern.compile("(^|\\s)#SP\\b", 
        java.util.regex.Pattern.CASE_INSENSITIVE); 
```

(^|\s) 表示：匹配 ^ 或 \s，其中 ^ 表示字符串的开头（例如“#SP String”），\s 表示空白字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:59:49.430

正则表达式`"\\w*\\s*#sp\\w*\s*"`将匹配 0 个或多个单词，然后是 0 个或多个空格，然后是 #sp，然后是 0 个或多个单词，然后是 0 个或多个空格。我的建议是不要使用 \s* 来分解你的表达中的单词，而是使用 \b。

```
"(^|\b)#sp(\b|$)" 
```

# c# - 如何以编程方式将用户设置为 SharePoint 中的网站集管理员

> ID：13981849
> 
> 赞同：3
> 
> 时间：2012-12-20T22:55:15.307
> 
> 标签：c#, sharepoint, administrator, sharepoint-2013, sitecollection

我正在开发一个 SharePoint 2013 网站。我正在尝试使用以下代码将用户设置为网站集管理员：

```
public void SetUserSiteCollectionAdmin(string siteUrl, string strUserName, string strEmail, string fullName)
{
SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                using (SPSite site = new SPSite(siteUrl))
                    {
                       using (SPWeb web = site.RootWeb)
                         {
                           web.AllowUnsafeUpdates = true;
                           web.AllUsers.Add(strUserName, strEmail, fullName, null);
                           SPUser spUser = web.SiteUsers[strUserName];

                           spUser.IsSiteAdmin = true;

                           spUser.Update();

                           web.AllowUnsafeUpdates = false;
                         }
                    }
            });
} 
```

当我转到 SharePoint 2013 网站中的“网站设置”并打开“网站集管理员”列表时，我**确实**看到该用户列为网站集管理员。

一切似乎都很好。现在，当我使用相同的用户名（刚刚添加此网站集管理员列表的用户）打开此站点时，我收到消息：

*抱歉，该网站尚未与您共享。*

除了让用户成为“网站集管理员”之外，我们还需要做些什么我在这里缺少的任何其他设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:20:08.553

我怀疑这可能与用户身份在 SharePoint 内容数据库中的存储方式有关。您是否尝试过检查现有用户以准确查看用户名属性中存储的内容？

[我博客上的这个页面](http://abrahamdybvig.blogspot.com/2010/06/fba-users-in-sharepoint-2010.html)可能相关也可能不相关，但它描述了基于表单的用户如何在 SharePoint 对象模型中非常奇怪地存储......

# android - 发生一般异常时防止应用程序终止

> ID：13981854
> 
> 赞同：0
> 
> 时间：2012-12-20T22:55:28.600
> 
> 标签：android, exception-handling, non-termination

有没有办法在一个地方捕获所有“未捕获”的异常并让应用程序继续运行？

我看到我可以使用 setUncaughtExceptionHandler 进行一些日志记录等，但应用程序仍将终止。我想要一些可以记录异常的东西，告诉用户他的操作失败了，然后让他继续（尝试别的）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:00:28.903

不，我不确定你为什么想要它。从已知会抛出异常的方法中捕获异常，并测试您的代码以避免异常，例如 NullPointerException。这就是编写好代码的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-24T10:26:48.343

很抱歉重新访问这样一个旧线程，但由于没有正确的答案，我觉得有义务提供一个解决方案。

将此添加到每次使用应用程序时打开的活动（例如 MainActivity） -

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
            public void uncaughtException(Thread paramThread, Throwable paramThrowable) {
                Log.e("Exception"+Thread.currentThread().getStackTrace()[2],paramThrowable.getLocalizedMessage());
            } 
        }); 
```

它的作用是为未捕获的异常设置默认处理程序，并且在弹出异常时不会退出应用程序。然而，权力越大，责任越大。我不建议您使用此方法来逃避在代码中捕获异常的责任（例如使用 try-catch）。在启动之前测试您的代码以使其尽可能无错误。

# sql - 为连接创建的表分配别名

> ID：13981863
> 
> 赞同：2
> 
> 时间：2012-12-20T22:56:18.927
> 
> 标签：sql, sql-server, sql-server-2008

我正在加入 3 个表格，如下所示 -

```
select *
from Employee as e inner join [Grant] as g
on e.EmpID = g.EmpID -- "virtual table"  
inner join Location as l
on l.LocationID = e.LocationID 
```

从 select 到 GrantID 的代码似乎是一个“虚拟表”。因此，它可以与另一个表（位置）连接以执行 3 表连接。我想给这个虚拟表一个别名。那可能吗 ？如果是，那我该怎么做？

**注意 -** 我使用 sql server 2008 express

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:00:07.577

你不能这样做吗？

```
SELECT <columns>
FROM (SELECT <columns 2> FROM Employee as e INNER JOIN [Grant] as g on e.EmpID = g.EmpID) as t1
  INNER JOIN Location as l on t1.LocationID = l.LocationID 
```

我不知道您要选择哪些列，因此是占位符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T23:34:55.297

CTE（通用表表达式）怎么样？像这样：

```
WITH    my_cte
          AS ( SELECT   e.EmpID as e_EmpID, g.* -- expand column list to only include required columns
               FROM     Employee AS e
                        INNER JOIN [Grant] AS g ON e.EmpID = g.EmpID -- "virtual table"  

             )
    SELECT  *
    FROM    my_cte
            INNER JOIN Location AS l ON l.LocationID = my_cte.LocationID; 
```

Just know that if you refer to a CTE multiple times in the subsequent query the entire query is re-executed. If you need to refer to the CTE multiple times consider storing the results in a temp table first, then executing your query to join against the temp table.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T22:59:00.517

也许这会做。

```
select *
from (select * from Employee as e 
inner join [Grant] as g on e.EmpID = g.EmpID) as vt
inner join Location as l on l.LocationID = vt.LocationID 
```

只需确保列名不会在`Employee`和中重复`Grant`。

# spring - GWT 不适用于 Spring REST 服务

> ID：13981870
> 
> 赞同：-1
> 
> 时间：2012-12-20T22:57:09.633
> 
> 标签：spring, rest, gwt, data-conversion

我写了一个 Spring REST 应用程序。我用 curl 命令对其进行了测试，它确实有效。

在另一个 GWT Ajax 应用程序中，我有一个 RequestBuilder 对象，它不适用于我的 Spring Rest：调用 sendRequest 方法后，该事件`onResponseReceived`被触发，但该`getText`方法返回一个空字符串。

这是我的 spring servlet.xml 配置文件的一部分

```
<bean id="jsonmembertemplate" 
      class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" >
    <property name="contentType" value="text/javascript;charset=UTF-8"/>
    <property name="disableCaching" value="false"/>
</bean>
<bean class="org.springframework.web.servlet.view.BeanNameViewResolver" /> 
```

和我的控制器类的一部分

```
@RequestMapping(method = RequestMethod.GET, value="/member/get/{memberid}")
public String getMember(Model model, @PathVariable("memberid") int id, HttpServletResponse response) {
    model.addAttribute("member", memberDao.get(id));
    return "jsonmembertemplate";
} 
```

和gwt代码

```
private RequestBuilder rb = new RequestBuilder(RequestBuilder.GET, "http://localhost:8080/depna-nat-server/member/get/1?");

try {
                rb.setHeader("Content-Type", "text/javascript;charset=UTF-8");
                rb.sendRequest(null, new RequestCallback() {

                    @Override
                    public void onResponseReceived(Request request, Response response) {
                        Window.alert(Integer.toString(response.getStatusCode()));
                        Window.alert(response.getStatusText());
                        Window.alert(Integer.toString(response.getText().length()));
                        area.setText(response.getText());
                    }

                    @Override
                    public void onError(Request request, Throwable exception) {
                        Window.alert("fail");
                    }
                });
            } catch (RequestException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:58:39.087

我有几个 gwt 应用程序使用 spring 提供的 json 和 xml rest 服务，我们使用 spring 而不是 gwt（rpc 或 rf），因为这些服务也提供给 3party 应用程序。

我用 RequestBuilder 开始了我的第一个项目，我们没有任何问题，所以也许你的代码有问题，你能检查流量并发布你遇到的错误吗？

如果您正在运行跨域问题（statusCode=0 通常意味着它），请在您的 servlet 容器中添加一个过滤器，查看[此文档](http://code.google.com/p/gwtquery/wiki/Ajax#CORS_%28Cross_Origin_Resource_Sharing%29)。

我最终选择使用[gwtquery-ajax](https://code.google.com/p/gwtquery/wiki/Ajax)和[gquery-data-binding](https://code.google.com/p/gwtquery/wiki/DataBinding)，因为使用这些服务并将它们映射到 java 对象变得非常容易。

# html - 在框架中居中图像而不是调整大小？

> ID：13981873
> 
> 赞同：0
> 
> 时间：2012-12-20T22:57:38.133
> 
> 标签：html

通常，如果or属性小于图像本身，则 HTML`<img>`标记会挤压图像。如果指定的尺寸更小，有没有办法让它裁剪它？`width``height`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:34:45.317

您可以将图像添加为包装器的背景`div`并设置`div`'s`width`和`height`. 或者，您可以在 wrapper 元素周围添加一个包装器元素，`img`并为包装器元素设置高度和宽度。

见 [http://jsfiddle.net/nivas/zFMfj/](http://jsfiddle.net/nivas/zFMfj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:06:27.910

我认为您不能单独使用 img 标签来执行此操作，但是您可以通过多种方式使用图像文件和另一个标签（canvas->DrawImage、Div->Background Image 或 Div->Oveflow : 隐藏）例如。

# iphone - 来自 AVCaptureVideoPreviewLayer 的 UIImage

> ID：13981874
> 
> 赞同：5
> 
> 时间：2012-12-20T22:57:46.647
> 
> 标签：iphone, ios, uiimage, calayer, avcapturesession

我正在尝试从视频源中获取静止图像（基本上是暂停或“快照”功能）。我的项目是使用[Benjamin Loulier 的模板](http://www.benjaminloulier.com/posts/ios4-and-direct-access-to-the-camera)设置的。我的问题是，即使我通过`prevLayer`（AVCaptureVideoPreviewLayer）在屏幕上显示彩色视频，我已将视频设置设置为灰度，因此我无法从`customLayer`（常规 CALayer）获取 UIImage。

我尝试使用这里给出的这个函数[，](https://stackoverflow.com/questions/3454356/uiimage-from-calayer-iphone-sdk)但是由于一些愚蠢的原因，这对 AVCaptureVideoPreviewLayer 不起作用（显示清晰/透明）。有谁知道将 AVCaptureVideoPreviewLayer 的内容保存为 UIImage 的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T03:33:38.097

好的，这是我的回答，由[https://developer.apple.com/library/ios/#qa/qa1702/_index.html提供](https://developer.apple.com/library/ios/#qa/qa1702/_index.html)

一注。`minFrameDuration`自 iOS 5.0 起已弃用。不知道原因或是否有替代品。

```
#import <AVFoundation/AVFoundation.h>

// Create and configure a capture session and start it running
- (void)setupCaptureSession 
{
    NSError *error = nil;

    // Create the session
    AVCaptureSession *session = [[AVCaptureSession alloc] init];

    // Configure the session to produce lower resolution video frames, if your 
    // processing algorithm can cope. We'll specify medium quality for the
    // chosen device.
    session.sessionPreset = AVCaptureSessionPresetMedium;

    // Find a suitable AVCaptureDevice
    AVCaptureDevice *device = [AVCaptureDevice
                             defaultDeviceWithMediaType:AVMediaTypeVideo];

    // Create a device input with the device and add it to the session.
    AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device 
                                                                    error:&error];
    if (!input) {
        // Handling the error appropriately.
    }
    [session addInput:input];

    // Create a VideoDataOutput and add it to the session
    AVCaptureVideoDataOutput *output = [[[AVCaptureVideoDataOutput alloc] init] autorelease];
    [session addOutput:output];

    // Configure your output.
    dispatch_queue_t queue = dispatch_queue_create("myQueue", NULL);
    [output setSampleBufferDelegate:self queue:queue];
    dispatch_release(queue);

    // Specify the pixel format
    output.videoSettings = 
                [NSDictionary dictionaryWithObject:
                    [NSNumber numberWithInt:kCVPixelFormatType_32BGRA] 
                    forKey:(id)kCVPixelBufferPixelFormatTypeKey];

    // If you wish to cap the frame rate to a known value, such as 15 fps, set 
    // minFrameDuration.
    output.minFrameDuration = CMTimeMake(1, 15);

    // Start the session running to start the flow of data
    [session startRunning];

    // Assign session to an ivar.
    [self setSession:session];
}

// Delegate routine that is called when a sample buffer was written
- (void)captureOutput:(AVCaptureOutput *)captureOutput 
         didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer 
         fromConnection:(AVCaptureConnection *)connection
{ 
    // Create a UIImage from the sample buffer data
    UIImage *image = [self imageFromSampleBuffer:sampleBuffer];

     < Add your code here that uses the image >

}

// Create a UIImage from sample buffer data
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer 
{
    // Get a CMSampleBuffer's Core Video image buffer for the media data
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer, 0); 

    // Get the number of bytes per row for the pixel buffer
    void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer); 

    // Get the number of bytes per row for the pixel buffer
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
    // Get the pixel buffer width and height
    size_t width = CVPixelBufferGetWidth(imageBuffer); 
    size_t height = CVPixelBufferGetHeight(imageBuffer); 

    // Create a device-dependent RGB color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB(); 

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8, 
      bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst); 
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context); 
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    // Free up the context and color space
    CGContextRelease(context); 
    CGColorSpaceRelease(colorSpace);

    // Create an image object from the Quartz image
    UIImage *image = [UIImage imageWithCGImage:quartzImage];

    // Release the Quartz image
    CGImageRelease(quartzImage);

    return (image);
} 
```

# mysql - 左连接不起作用 - 获取不在其他表中的记录

> ID：13981877
> 
> 赞同：0
> 
> 时间：2012-12-20T22:58:09.597
> 
> 标签：mysql, join

我觉得很奇怪，因为其他所有答案都说它有效，但我无法得到正确的结果:(

```
table A: id_num, name<br>
table B: id_num

table A has index on name, but not unique. id_num is unique in this table.<br>
table B has index on id_num, but not unique. 
```

我想获取不在表 B 中的表 A 名称。

这不起作用：

```
**SELECT a.name FROM a 
LEFT JOIN b ON (a.id_num = b.id_num) 
WHERE b.id_numb IS NULL** 
```

它返回的名称在表 b 中（有些不是）。

这也不起作用：

```
**SELECT distinct(a.name) 
FROM a where a.id_num 
not in (select distinct(b.id_num) from b  )** 
```

当 SQL 说 NOT IN 时，我无法理解 a.names 是如何返回谁在表 B 中的。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:10:26.553

按理说，`left join`应该工作。以及`in`。

这是一个示例。因此，您可能希望发布并显示您的表架构和数据，以便更公正地解决您的问题。最好只在 SQLFIDDLE 上创建表并显示参考。;)

这里只是**样本**：-

*   [SQLFIDDLE 参考](http://sqlfiddle.com/#!3/26d55/1)

示例表：tab1：

```
 COL1     COL2
    1       john
    2       tim
    3       jack
    4       rose 
```

选项卡2：

```
 COL3     COL4
    1       2
    2       3
    3       5
    4       5
    5       2 
```

询问：

```
select * from tab1
where col1 not in 
(select distinct col4 from tab2)
; 
```

结果：

```
COL1    COL2
1       john
4       rose 
```

* * *

## 根据 OP 更新的评论和表格结构

*   OP 提到表 tab1 将有多个相同名称的记录。根据他原来的表格设计，表格tab2中**没有名称**字段。如果 OP 最初提供了预期的结果，也非常推荐。

## * [SQLFIDDLE 参考](http://sqlfiddle.com/#!3/7a324/3)

OP的表格数据：

```
COL1    COL2
1       john
2       tim
3       jack
4       rose
5       john
6       john

COL3    COL4
1       2
2       3
3       5
4       5
5       2
6       6 
```

查询：**当您不想要任何重复的名称时**

```
select t.col1, t.col2
from tab1 t
join 
 (select t1.col2, count(*) as counts 
  from tab1 t1
  group by t1.col2
  having count(*) = 1) x
on t.col2 = x.col2
where t.col1 not in 
 (select distinct col4 from tab2)
; 
```

结果：**这是 Rose，唯一没有重复且不存在于 tab2 中的记录**

```
COL1    COL2
4       rose 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:19:33.127

尝试这个

```
 select t1.name from table1 t1
     where t1.name not in 
               (select t2.name from table2 t2 ) 
```

看看 [**DEMO SQLFIDDLE**](http://sqlfiddle.com/#!3/c8d5e/1)

**编辑：**

如果您只有`id_num`第二张桌子，那么请看

[**这个演示 SQLFIDDLE**](http://sqlfiddle.com/#!3/f1539/11)

# neural-network - 权重更新 - 强化学习 + 神经网络

> ID：13981880
> 
> 赞同：1
> 
> 时间：2012-12-20T22:58:26.840
> 
> 标签：neural-network, reinforcement-learning

我目前正在尝试了解 TD-Gammon 的工作原理并有两个问题：

1）我找到了[一篇](http://www.stanford.edu/group/pdplab/pdphandbook/handbookch10.html)解释权重更新的文章。它由三部分组成。最后一部分是 V(s) 相对于 w 的微分。在文本中，它被称为“运行总和”。我如何计算该值？（我只对从输出到隐藏层的权重变化感兴趣，而不对进一步的权重变化感兴趣）

2）在阅读了这个更新权重的过程之后，出现了一个问题：为什么我们不使用强化学习为状态创建一个目标值并将该值赋予我们的神经网络，以便它学会返回那个当前状态的价值？为什么有一个额外的更新规则直接操纵权重？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:16:13.557

实际上，您只需要实现一个使用基本的、通常的平方和误差的人工神经网络。然后，将目标网络输出替换为 TD 误差值：E = r + gamma*V(t+1) - V(t)

从那里，您可以使用典型的 ANN 反向传播权重更新规则。

所以，简而言之，我认为你的描述实际上是 RL via ANN 算法应该做的。它正在训练人工神经网络来学习状态/动作价值函数。

# git - 执行“repo init”后如何切换分支

> ID：13981883
> 
> 赞同：1
> 
> 时间：2012-12-20T22:58:33.597
> 
> 标签：git, repository

我已经像这样创建了我的存储库：

```
 repo init -u https://android.googlesource.com/platform/manifest -b android-4.0.1_r1 
```

但我怎么能

*   找出我的仓库还有哪些其他分支
*   切换到我的仓库的另一个分支

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T06:45:30.210

```
# find out what other branches are there for my repo
git branch -a

# switch to another branch for my repo    
git checkout foo 
```

PS 停止使用 repo，只使用 git。

# javascript - 如何从 nodejs 模块中删除全局上下文？

> ID：13981885
> 
> 赞同：2
> 
> 时间：2012-12-20T22:58:40.260
> 
> 标签：javascript, node.js, module, global-variables, node-modules

关于如何从 nodejs 模块中删除全局上下文的任何想法？

我不是在寻找以下问题的解决方案，但是如果您需要更多上下文，请前往。

我正在开发一个项目，我的用户可以上传他们自己的 nodejs 模块，如果它符合预定义的框架，它将在一天中定期运行。显然，这是一个主要的安全问题。一个好的 90% 解决方案只是删除全局上下文。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-22T00:25:32.503

如评论中所述，您确实需要在单独的进程中运行用户提供的模块，因为无限循环将冻结任何节点进程。

您应该从[VM](http://nodejs.org/api/vm.html#vm_vm_runinnewcontext_code_sandbox_filename)模块开始：

*   读取文件内容（使用[fs.readFile](http://nodejs.org/api/fs.html#fs_fs_readfile_filename_encoding_callback)，而不是`require`）。
*   定义一个新的全局对象。您可以选择公开您想要的任何内容（并隐藏其余内容）。
*   运行用户代码。

这是一个例子：

```
var fs = 要求（'fs'），
    vm = 需要('vm');

函数运行代码（文件名）{
  var 代码 = fs.readFileSync(fileName),
      沙箱 = {
        控制台：控制台，
        设置超时：设置超时，
        清除超时：清除超时，
        要求：要求，
        模块：模块，
        出口：出口，
        过程：过程，
        缓冲区：缓冲区
      };

  vm.runInNewContext（代码，沙箱，文件名）；
}

```

用户提供的代码将能够访问我在沙箱中传递的所有内容，就好像它在全局范围内一样。在我的例子中，我选择从真正的 node.js 全局范围中公开几乎所有内容。您可以选择不公开的内容。

此外，如果您希望您的解决方案安全，您应该检查[child_process.spawn 。](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)

# c++ - 同时迭代和修改 unordered_set？

> ID：13981886
> 
> 赞同：31
> 
> 时间：2012-12-20T22:58:45.390
> 
> 标签：c++, c++11

考虑以下代码：

```
unordered_set<T> S = ...;

for (const auto& x : S)
   if (...)
       S.insert(...); 
```

这是坏的对吗？如果我们在 S 中插入一些东西，那么迭代器可能会失效（由于重新散列），这将破坏范围，因为在引擎盖下它使用的是 S.begin ... S.end。

有什么模式可以解决这个问题吗？

一种方法是：

```
unordered_set<T> S = ...;

vector<T> S2;

for (const auto& x : S)
   if (...)
       S2.emplace_back(...);

for (auto& x : S2)
    S.insert(move(x)); 
```

这似乎很笨拙。我有没有更好的方法？

（特别是如果我使用的是手动哈希表，并且我可以阻止它重新哈希直到循环结束，那么使用第一个版本是安全的。）

**更新：**

来自[http://en.cppreference.com/w/cpp/container/unordered_map/insert](http://en.cppreference.com/w/cpp/container/unordered_map/insert)

> 如果由于插入而发生重新散列，则所有迭代器都将失效。否则迭代器不受影响。引用不会失效。仅当新元素数高于 时才会发生重新散列`max_load_factor() * bucket_count()`。

你能以`max_load_factor`某种方式搞砸以防止重新散列吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-21T00:21:43.620

> 你能以某种方式弄乱 max_load_factor 以防止重新散列吗？

是的，您可以将其设置`max_load_factor()`为无穷大以确保不会发生重新散列：

```
#include <iostream>
#include <limits>
#include <unordered_set>

int main()
{
    // initialize
    std::unordered_set<int> S;

    for (int i = 0; i < 8; ++i)
        S.insert(i);

    std::cout << "buckets: " << S.bucket_count() << std::endl;

    // infinite max load factor => never need to rehash
    const auto oldLoadFactor = S.max_load_factor();
    S.max_load_factor(std::numeric_limits<float>::infinity());

    for (const auto& x : S)
    {
        if (x > 2)
            S.insert(x * 2);
    }

    // restore load factor, verify same bucket count
    S.max_load_factor(oldLoadFactor);
    std::cout << "buckets: " << S.bucket_count() << std::endl;

    // now force rehash
    S.rehash(0);
    std::cout << "buckets: " << S.bucket_count() << std::endl;
} 
```

请注意，简单地设置一个新的负载因子不会重新散列，所以这些都是廉价的操作。

该`rehash(0)`位有效，因为它是一个请求：1）我至少得到*n 个*存储桶，并且 2）我有足够的存储桶来满足我的`max_load_factor()`. 我们只是使用零来表示我们不关心最小数量，我们只是想重新散列以满足我们的“新”因素，就好像它从未更改为无穷大一样。

当然，这不是异常安全的。如果在对 的调用之间有任何问题`max_load_factor()`，我们的旧因素将永远丢失。使用您最喜欢的范围保护实用程序或实用程序类轻松修复。

**请注意，如果您将迭代新元素，则无法保证。**您将迭代现有元素，但您可能会或可能不会迭代新元素。如果没问题（根据我们的聊天应该是这样），那么这将起作用。

例如，假设您遍历一组无序整数，并为每个偶数整数`x`插入`x * 2`。如果那些总是在您当前位置之后插入（通过实现细节和容器状态的机会），您将永远不会终止循环，除非通过异常。

如果您确实需要一些保证，则需要使用备用存储解决方案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T23:39:16.193

在迭代任何容器时修改它往往会变得很麻烦——即使它是一个比散列更简单的结构，或者即使你可以阻止它重新散列、重新平衡或其他任何事情。

顺便说一句，即使它*确实*有效，也有一个歧义：是否应该迭代新插入的成员？*是否可以仅在某些时候*将它们包含在此迭代中（即，仅当它们恰好在当前迭代器之后结束时）？

如果您经常需要这样做，您可以将容器包装在一个通用适配器中，该适配器将所有插入延迟到最后，但您确实在找到一种方法来隐藏您已经拥有的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-20T23:47:32.110

我意识到它在概念上与您提出的相同，但我认为它看起来实际上相当漂亮：

```
std::vector<T> tmp;
std::copy_if(S.begin(), S.end(), std::back_inserter(tmp),
             [](T const& value) { return ...; });
S.insert(std::make_move_iterator(tmp.begin()),
         std::make_move_iterator(tmp.end())); 
```

# actionscript-3 - AS3 - NativeMenu 影响 Button 组件

> ID：13981891
> 
> 赞同：1
> 
> 时间：2012-12-20T22:59:03.333
> 
> 标签：actionscript-3, button, air, native

在我的 AIR 应用程序中，我的`Button`大多数简单按钮都使用 Flash 组件。但由于某种原因，当我给窗口 a`NativeMenu`时，按钮看起来有点不同。具体来说，文本似乎更小。

这就是我的意思。没有`NativeMenu`：

![在此处输入图像描述](../Images/9473815f81f1888995113301d44de6cf.png)

按钮显示正常。但是当我添加一个菜单栏时：

![在此处输入图像描述](../Images/afac619dbdc1a8da40c14fdf552876a1.png)

如您所见，按钮看起来不同。事实上，现在我再看一遍，它`TextArea`似乎也小了一点。

如果有人知道为什么会发生这种情况以及如何防止它，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T22:03:28.933

问题是`NativeMenu`缩小了舞台，导致更小、更模糊的组件。这可以通过改变舞台的`scaleMode`属性来避免：

```
stage.scaleMode = StageScaleMode.NO_SCALE; 
```

# emacs - 我怎样才能杀死我的emacs中的所有“缓冲区”

> ID：13981899
> 
> 赞同：7
> 
> 时间：2012-12-20T22:59:57.813
> 
> 标签：emacs

是否有命令可以杀死我的 emacs 中的所有缓冲区？而不是让我一个一个地做'Ctrl -k'直到没有更多的缓冲区？

谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-20T23:13:07.663

`M-x` `ibuffer` `RET`
`t``D``y`

我强烈建议使用绑定`C-x``C-b`来`ibuffer`替代默认绑定：

```
(global-set-key (kbd "C-x C-b") 'ibuffer) 
```

（我也将我的`<menu>`密钥绑定到`ibuffer`，因为我经常使用它。）

nb 您可以在常规中使用`C-k`and来标记和终止缓冲区，但我认为每个人都应该使用，真的。`x``list-buffers``ibuffer`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-21T02:27:33.700

我正在使用这个函数来杀死 emacs 中的所有缓冲区

```
(defun nuke-all-buffers ()
  (interactive)
  (mapcar 'kill-buffer (buffer-list))
  (delete-other-windows))

(global-set-key (kbd "C-x K") 'nuke-all-buffers) 
```

对我来说很好:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:20:28.883

高度hack-ish，但做你想要的：

```
(defun my-kill-everything ()
  (interactive)
  (dolist (cur (buffer-list))
    (kill-buffer cur))) 
```

请注意，Emacs 始终需要至少一个缓冲区，因此您最终会再次得到一个空的暂存缓冲区。（是的，这个命令也会杀死像 minibuffer 这样的东西，但它会被恢复。正如我所写的：高度 hack-ish。）

# c - 在 C 中刷新输入

> ID：13981902
> 
> 赞同：2
> 
> 时间：2012-12-20T23:00:07.673
> 
> 标签：c, input, flush, getchar

我是一名软件工程专业的学生，​​我正在圣诞节放假，以便在下学期变得更好，我一直在编写各种控制台应用程序来练习。但是我遇到了一个问题，我需要从用户那里获取整数输入。我一直在使用`fgets`从中获取字符串`stdin`，然后使用`sscanf`来获取整数（效果很好）但是如果用户输入的内容超过我的缓冲区大小，则流中会留下尾随字符（包括换行符跳过我的下一次调用`fgets`）。我环顾四周，发现大多数人似乎认为`while(getchar() != '\n');`这会给我带来问题，因为如果没有要消耗的换行符，则会发生不必要的输入扫描。

**例子：**

```
int ch;
char* buffer = (char*)malloc(BUFSIZ*sizeof(char));
while((ch = getchar()) != '\n' && ch != EOF);
fgets(buffer,BUFSIZ*sizeof(char),stdin); 
```

如果缓冲区不是太小并且流中没有尾随字符，则存在不必要的`getchar()`输入。

**输出：**

```
A

A

You typed A

Intended Output:

A

You typed A 
```

我希望我说得足够清楚，我很感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T23:06:22.247

检查您读取的字符串是否包含换行符。

*   如果有换行符，则不需要清除输入。
*   如果没有换行符，请阅读直到遇到一个。

在 Unix 上，这个循环是合理的：

```
int c;
while ((c = getchar()) != EOF && c != '\n')
    ; 
```

请注意与您引用的内容相比的 EOF 测试（在问题的文本中；这是您在代码片段中引用的内容，但它在这里分布在两行上，这通常更便于阅读）。我会在 之后`fgets()`而不是在下一个之前做这个“狼吞虎咽”。

在带有 Microsoft 编译器和库的 Windows 上，如果你有心，你可以玩[`fflush(stdin)`](https://stackoverflow.com/questions/2979209/using-fflushstdin)。这已经记录了行为（请参阅 MSDN 网站）。在 Unix 上，尝试`fflush(stdin)`会产生未定义的行为——不要这样做。

# php - 并行进程，ignore_user_abort 和 set_time_limit(0)

> ID：13981904
> 
> 赞同：1
> 
> 时间：2012-12-20T23:00:09.293
> 
> 标签：php, jquery, ajax, parallel-processing

我们正在开发一个在其中一个脚本中使用**ignore_user_abort()**和**set_time_limit(0)的系统。**

**我们必须使用Jquery**向该脚本发送一个 HTTP 1.1 数据包，然后我们必须恢复并继续使用应用程序中的其他脚本。

但是一旦发送了数据包，会话**就会以某种方式被锁定，**并且如果您尝试使用相同的浏览器刷新或加载域内的任何其他脚本，它将**在前一个完成之前不会加载**（这可能需要超过2小时）。

但是，可以使用相同的用户名和密码从另一个浏览器继续使用该应用程序，这让我认为它与会话有关。

我们需要防止或以某种方式解决此问题，以使该脚本作为后台进程运行，而不会干扰应用程序其余部分的功能。

知道如何或为什么会发生这种情况以及我们如何解决它吗？

***AJAX 请求如下所示：***

```
<script>
$('#launch').click(function () {

//acomodamos la UI
$('#launch').hide();
$('#c_wait').slideUp();
$('#c_started').fadeIn("slow");

//send the request
$.get("modules/_map.php", { funcion: "launch", scan_id: "<?php echo $scan->id; ?>" } );                     
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:20:46.920

我认为您可能是对的 - 问题很可能与会话相关（您的 JavaScript 未指示正在执行同步请求）。

如果您正在运行一个使用会话信息的长请求，您可能会发现使用以下代码作为管理会话数据的模板很有用：

```
// start the session
session_start();

// manipulate session data
// e.g.,
// $some_var = $_SESSION['some_var'];
// $_SESSION['some_var'] = 'something';

// flush any changes to the session and close
session_write_close();

// Start the long process here... 
```

通过使用这种方法，您可以在长请求开始之前操纵会话，然后使用同一会话为后续请求解锁它。

# php - 验证表单文本输入

> ID：13981905
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:00:12.010
> 
> 标签：php, zend-framework, zend-form

我正在使用 Zend Framework 开发一个注册页面。

电话、手机、身份证号码是我要验证的字段。到目前为止，我只对 Not Empty 进行了验证。

我找不到正确的解决方案，所以也许你可以帮助我。

我希望电话和移动字段只是 ex 的整数。12345667 并具有特定的长度，例如。最少 7 位数字。

ID NUMBER 字段也是如此。

这是它现在的样子：

```
$phone = new Zend_Form_Element_Text('phone');
$phone->setLabel('Phone')
      ->setAttribs(array('class' => 'inputtext'))       
      ->setOptions(array('size' => '50'))       
      ->setRequired(false)
      ->addFilter('StripTags')
      ->addFilter('StringTrim')
      ->addValidator('NotEmpty'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:10:10.377

让我们尝试为您的问题提供一些答案。

如果您还没有意识到 Zend_Form 中的验证器与 Zend_Validate 中的[标准验证器](http://framework.zend.com/manual/1.12/en/zend.validate.set.html)相同，您通常只需使用类名作为*字符串*而不是调用*new*。过滤器和 Zend_Filter 也是如此

可用于电话号码的最接近的标准验证器是[“Digits”](http://framework.zend.com/manual/1.12/en/zend.validate.set.html#zend.validate.set.digits)验证器。

```
$phone = new Zend_Form_Element_Text('phone');
$phone->setLabel('Phone')
      ->setAttribs(array('class' => 'inputtext'))       
      ->setOptions(array('size' => '50'))       
      ->setRequired(false)
      ->addFilter('StripTags')
      ->addFilter('StringTrim')
      ->addValidator('NotEmpty');
//add digits validator , closest available to phone number in standard validators;
$phone->addValidator('Digits'); 
```

[但是，您可能会发现通过扩展Zend_Validate_Abstract](http://framework.zend.com/manual/1.12/en/zend.validate.writing_validators.html)来构建自己的验证器更合适。电话号码验证器可能如下所示：

```
//validates US phone numbers using Zend_Validator_Regex
class MyNamespace_Validator_Form_Usphone extends Zend_Validate_Abstract
{
    const PHONE = 'phone';

    protected $_messageTemplates = array(
        self::PHONE => "'%value%' is not a valid U.S. phone number.
            Phone number must be entered in (xxx)xxx-xxxx or xxx-xxx-xxxx format."
    );

    public function isValid($value)
    {
        $this->_setValue($value);

        $isValid = true;
        $pattern = ('/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/');
        if (!preg_match($pattern, $value)) {
            $this->_error(self::PHONE);
            $isValid = false;
        }
        return $isValid;
    }
} 
```

并将在您的表单元素中使用：

```
$phone->addValidator(new MyNamespace_Validator_Form_Usphone()); 
```

***要记住的一件事：***如果您将表单元素设置为`'Required'`使用`'NotEmpty'`验证器，在大多数情况下作为`setRequired()`调用`'NotEmpty'`。

还要记住，通常在 Zend_Form 中，过滤器是在验证之前应用的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:15:08.730

您必须添加一个验证器，例如

```
 ->addValidators(
                'StringLength',
                true,
                array('min' => 7,   'max' => 20,'messages' => "ID NUMBER contain at least 7 character.")
            ); 
```

# php - 从php解析xml数据

> ID：13981907
> 
> 赞同：2
> 
> 时间：2012-12-20T23:00:17.317
> 
> 标签：php, xml, parsing

所以我没有任何使用 php 读取 xml 的经验，我一直在做一些研究，阅读一些教程，但我想确定一件事。现在我在下面有这个 xml 代码（file.xml）：

```
 <location code="TB0023">
    <temp unit="F">15.8</temp>
    <US>Intermittent clouds</US>
  </location>

  <location code="YG0023">
    <temp unit="F">23</temp>
    <US>Mostly Clear</US>
  </location> 
```

所以我访问例如 temp on location code="TB0023" 的方式是这样的：

```
$open = simplexml_load_file('file.xml');
echo $open ->location[0]->temp; 
```

现在我试图通过做这样的事情（比如关联数组）使它更具可读性，但没有成功：

```
$open = simplexml_load_file('file.xml');
echo $open ->location[code="TB0023"]->temp; 
```

那么有什么方法可以使用该标识符 TB0023 从该特定位置检索数据，而不使用索引 0 1 2 3 ...

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T23:11:32.793

您想使用 xpath 来查询 XML 中的值。

`$result = $open->xpath("//location[@code='TB0023']")`

您可以在 PHP 文档[XPath中找到更多信息](http://php.net/manual/en/simplexmlelement.xpath.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:09:25.203

[SimpleXML](http://php.net/manual/en/book.simplexml.php)框架包含一个[SimpleXMLElement](http://php.net/manual/en/class.simplexmlelement.php)类。

请使用[SimpleXMLElement 的](http://php.net/manual/en/class.simplexmlelement.php) `path()`方法和[此处](http://php.net/manual/en/simplexmlelement.xpath.php)描述的[Xpath 表达式](http://www.w3schools.com/xpath/default.asp)。

此代码来自 php.net 站点

```
$string = <<<XML
<a>
 <b>
  <c>text</c>
  <c>stuff</c>
 </b>
 <d>
  <c>code</c>
 </d>
</a>
XML;

$xml = new SimpleXMLElement($string);

/* Search for <a><b><c> */
$result = $xml->xpath('/a/b/c');

while(list( , $node) = each($result)) {
    echo '/a/b/c: ',$node,"\n";
}

/* Relative paths also work... */
$result = $xml->xpath('b/c');

while(list( , $node) = each($result)) {
    echo 'b/c: ',$node,"\n";
} 
```

将打印：

```
/a/b/c: text
/a/b/c: stuff
b/c: text
b/c: stuff 
```

[XPath](http://www.w3schools.com/xpath/default.asp)是在 XML 中定位元素的标准技术。

在您的情况下，您将使用这样的**xpath 查询**：

```
/location[@code="TB0023"]/temp 
```

# c# - 如何在 Visual C# 中显示下标？

> ID：13981919
> 
> 赞同：0
> 
> 时间：2012-12-20T23:02:33.683
> 
> 标签：c#, subscript

我正在为我的 A 级计算项目制作弹丸运动模拟程序，我需要使用带下标的物理符号。我不知道如何在标签或富文本框中使用它。谁能给我帮助/代码来实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:04:13.450

您需要使用[RichTextBox中的](http://msdn.microsoft.com/en-us/library/hcwk58k6.aspx)[SelectionCharOffset](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectioncharoffset.aspx)属性来完成此操作。

对于下标，将数字设为负数，如下所示：

```
richTextBox1.SelectionCharOffset = -10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:42:51.330

SelectioncharOffset 不是您的最佳选择。最好是操作 rtf 并添加下标标签。

```
//This allows you to reselect the text in the rtb after formatting
            int SelectionStart = richTextBox1.SelectionStart;
            int SelectionLength = richTextBox1.SelectionLength;

            string selectedRtf = richTextBox1.SelectedRtf;
            int Start;
            int End;
            string pre;
            string Mid;
            string post;

            //remove superscript from selected text
            Start = selectedRtf.IndexOf("\\super");
            while (Start != -1)
            {
                pre = selectedRtf.Substring(0, Start);
                post = selectedRtf.Substring(Start + 6, selectedRtf.Length - (Start + 6));
                selectedRtf = pre.Trim() + post.Trim();
                Start = selectedRtf.IndexOf("\\super");
            }

            //if selected text does not contain subscript
            if (selectedRtf.IndexOf("\\sub") == -1 && selectedRtf.IndexOf("\\nosupersub") == -1)
            {
                Start = selectedRtf.IndexOf("}}") + 2;
                End = selectedRtf.IndexOf("}", Start);
                pre = selectedRtf.Substring(0, Start);
                Mid = selectedRtf.Substring(Start, End - Start);
                post = selectedRtf.Substring(End, selectedRtf.Length - End);
                selectedRtf = pre + "\\sub" + Mid + "\\nosupersub" + post;
                goto Clean;
            }
            //if selected text contains subscript
            if (selectedRtf.IndexOf("\\sub") > 0)
            {
                Start = selectedRtf.IndexOf("\\sub");
                while (Start != -1)
                {
                    pre = selectedRtf.Substring(0, Start);
                    post = selectedRtf.Substring(Start + 4, selectedRtf.Length - (Start + 4));
                    selectedRtf = pre.Trim() + post.Trim();
                    Start = selectedRtf.IndexOf("\\sub");

                }
                goto Clean;
            }

        Clean:
            richTextBox1.SelectedRtf = selectedRtf;
            richTextBox1.Focus();
            richTextBox1.SelectionStart = SelectionStart;
            richTextBox1.SelectionLength = SelectionLength; 
```

# android - 可以在 Android 中强制使用某些字符串的英文版本

> ID：13981921
> 
> 赞同：0
> 
> 时间：2012-12-20T23:03:03.003
> 
> 标签：android, locale

在我的应用程序中，我使用了一些包含在某些情况下无法准确翻译的技术信息的字符串。是否可以进行检查以允许用户以原始（英文）版本显示相关字符串？我指的是显示设备语言（西班牙语、法语等）的所有应用程序字符串和英语的一些字符串（即使字符串有翻译）。

# python - 使用 python 的单元测试的聚合测试在没有测试运行器的情况下运行

> ID：13981925
> 
> 赞同：1
> 
> 时间：2012-12-20T23:03:22.403
> 
> 标签：python, unit-testing, selenium, webdriver

我在使用 python 中的单元测试运行硒测试的聚合测试套件时遇到问题。

下面的代码在没有调用 testRunner 的情况下从另一个模块执行测试。

当我尝试在调试模式下执行时，在执行类定义行并最终在另一个模块（gmailbutton）中执行测试后不久，控件就被传递给了 pydev_runfiles。

```
import unittest
from selenium import webdriver
from gmailbutton import gmailButton

class runner():
    def runner1(self):
        suite = unittest.TestSuite()
        suite.addTest(gmailButton)
        return suite 
```

根据文档（http://docs.python.org/2/library/unittest.html），上面的代码只需将测试用例添加到套件中，并且测试应该已经执行

```
unittest.TextTestRunner(verbosity=2).run(suite) 
```

这不是在这里发生的。

gmailButton 的测试代码在这里

```
import unittest
from selenium import webdriver

class gmailButton(unittest.TestCase):

    global browser

    def test_gmailButton(self):

        browser = webdriver.Firefox()

        try:
            browser.get("http://www.gmail.com")           
            browser.find_element_by_id("Email").send_keys("abcd")
            browser.find_element_by_id("Passwd").send_keys("123445")
            browser.find_element_by_id("signIn").click()

        except Exception as e:
            raise
            print e

        finally:
            browser.close() 
```

更新：

这是我从 Eclipse 执行的确切代码。

```
import unittest
from selenium import webdriver
from gmailbutton import gmailButton
from pyUnitExercise import exercise1

class runner():
    def runner1(self):
        suite = unittest.TestSuite()
        suite.addTest(gmailButton)
        return suite

if __name__ == "__main__":
    unittest.TextTestRunner(verbosity=2).run(runner.suite) 
```

我对这段代码的期望是执行 gmailButton 测试用例，而不是执行刚刚导入且未添加到测试套件中的 exercise1。我不知道它为什么要执行刚刚导入但未添加到测试套件中的测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T22:24:12.410

如果您使用的是 PyDev，那么您可能实际上并没有使用 python 的 stdlib unittest。它使用鼻子和/或py.test：

[http://pydev.org/manual_adv_pyunit.html](http://pydev.org/manual_adv_pyunit.html)

这两个库都通过自省搜索测试；您不需要向测试套件添加显式条目。但是，如果没有运行测试时的输出，很难判断这是否真的发生了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T00:48:26.283

我优先使用[鼻子](https://nose.readthedocs.org/en/latest/)而不是单元测试，但这是一种似乎对我有用的方法：

```
>>> import unittest
>>> class gmailButton(unittest.TestCase):
    def test_gmailButton(self):
        pass

>>> suite = unittest.TestSuite()
>>> loader = unittest.TestLoader()
>>> tests = loader.loadTestsFromTestCase(gmailButton)
>>> suite.addTest(tests)
>>> unittest.TextTestRunner(verbosity=2).run(suite)
test_gmailButton (__main__.gmailButton) ... ok

----------------------------------------------------------------------
Ran 1 test in 0.047s

OK
<unittest.runner.TextTestResult run=1 errors=0 failures=0> 
```

# c# - .NET 正则表达式问题，.NET 正则表达式也使用不同的规则引擎？

> ID：13981926
> 
> 赞同：3
> 
> 时间：2012-12-20T23:03:37.113
> 
> 标签：c#, regex

我正在尝试匹配等号周围的字符串中的文本。
我的正则表达式是这样的：（ `"((?:\\S+\\s)?\\S*=)(\\S*(?:\\s\\S+)?)"`因为`\\`C# 不喜欢使用未转义的 '\' 字符串）。

给定字符串`"the thing=12 and otherthing = 'thirty'"`，它将返回以下组：“the thing="、"12 and"、"otherthing=" 和 "'thirty'"。

我不擅长正则表达式，我不确定下一步该做什么。
我需要它来返回以下组：“thing”、“12”、“otherthing”和“thirty”（注意“thirty”中去掉了单引号）。

谁能帮我这个？似乎 C# Regex 解析器与 gskinner.com 上的解析器不同，因为我认为我有一些这样的工作，但它在 C# 中没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:11:57.300

也许是这样的？

```
string input = "bob = 20 joe=thirty";
var regex = new Regex(@"(?<left>[^=]+?)\s+=\s+(?<right>[^\s]+)");
foreach(Match match in regex.Matches(input))
{
    Console.WriteLine("{0} = {1}", 
        match.Groups["left"].Value,
        match.Groups["right"].Value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T02:58:39.587

此模式采用 the 之前的第一个单词（连续的非空格）`=`和后面的引用值或第一个单词。

`@"(?<name>[^ =]+?)\s*=\s*('(?<value>[^']+)'|(?<value>[^\s]+))"`

（在 C# 中，通常最好对正则表达式使用文字字符串`@"\s"`，因为您只需要转义双引号。 `@"\s""" == "\\s\""`）

```
var pattern = @"(?<name>[^ =]+?)\s*=\s*('(?<value>[^']+)'|(?<value>[^\s]+))";
var s = "the thing=12 and otherthing = 'thirty'";
foreach(Match match in Regex.Matches(s, pattern))
   Console.WriteLine("{0} = {1}", 
      match.Groups["name"].Value,
      match.Groups["value"].Value); 
```

对于`the thing=12 and otherthing = 'thirty'`，它产生：

```
thing = 12
otherthing = thirty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:08:22.773

这听起来像是[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx%20%22String.Split%22.)的工作。如果您确定需要正则表达式，则可以使用[Regex.Split](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)。

# objective-c - 获取 NSURLConnection 生成的实际 HTTP 请求消息？

> ID：13981930
> 
> 赞同：1
> 
> 时间：2012-12-20T23:04:00.247
> 
> 标签：objective-c, macos, cocoa

有没有办法获取 NSURLConnection 生成的实际 HTTP 请求消息？我已经使用“tcpdump”（Unix util）来解决这个问题，但想知道是否有办法以编程方式获取它？

例如，`http://www.example.com/somepath/resource?v=99`如果我在 NSURLConnection 中使用 URL 字符串，它显然会产生这个：

```
GET /somepath/resource?v?99 HTTP/1.1
Host: www.example.com
User-Agent: {myprog}/1 CFNetwork/596.2.3 Darwin/12.2.0 (x86_64) (iMac11%2C1)
Accept: */*
Date: Wed, 19 Dec 2012 03:12:12 GMT+01:00
Accept-Language: sv-se
Accept-Encoding: gzip, deflate
Cookie: {long-string}
Connection: keep-alive 
```

其中一些 HTTP 标头可以使用`setValue:forHTTPHeaderField:`NSURLRequest 设置为其他值（例如“Host”和“User-Agent”），但有些不能（例如“Connection”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T07:47:41.690

[request allHTTPHeaderFields] 发送一个字典，其中仅包含您设置的键和值....

如果要查看整个请求，可以使用以下工具...

[http://blog.jerodsanto.net/2009/06/sniff-your-iphones-network-traffic/](http://blog.jerodsanto.net/2009/06/sniff-your-iphones-network-traffic/)

我显示请求和响应...

# python - v4l2 fcntl.ioctl VIDIOC_S_PARM 用于设置相机捕捉的fps和分辨率

> ID：13981933
> 
> 赞同：4
> 
> 时间：2012-12-20T23:04:06.490
> 
> 标签：python, webcam, v4l2

我正在尝试设置网络摄像头的 fps 和分辨率，并通过 v4l2 Python 从中捕获。

v4l2 Python 文档仅限于；

```
>>> import v4l2
>>> import fcntl
>>> vd = open('/dev/video0', 'rw')
>>> cp = v4l2.v4l2_capability()
>>> fcntl.ioctl(vd, v4l2.VIDIOC_QUERYCAP, cp)
0
>>> cp.driver
'ov534'
>>> cp.card
'USB Camera-B4.09.24.1' 
```

看着 videodev2.h ；

```
#define VIDIOC_S_PARM       _IOWR('V', 22, struct v4l2_streamparm) 
```

VIDIOC_S_PARM 与 v4l2_streamparm 相关，即；

```
struct v4l2_streamparm {
    enum v4l2_buf_type type;
union {
    struct v4l2_captureparm capture;
    struct v4l2_outputparm  output;
    __u8    raw_data[200];  /* user-defined */
} parm;
}; 
```

如果我想设置参数；

```
import v4l2
import fcntl
vd = open('/dev/video1', 'rw')
cp = v4l2.v4l2_streamparm()
fcntl.ioctl(vd, v4l2.v4l2_streamparm, cp) 
```

这是我所能得到的。

如何使用 Python v4l2 调整相机的 fps 速率和分辨率并从中捕获图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T14:21:38.947

从 V4L2 方面，您需要：

*   使用[`VIDIOC_G_PARM`](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-g-parm.html)ioctl 并检查`v4l2_streamparm.parm.capture.capability`成员以了解驱动程序是否允许`V4L2_CAP_TIMEPERFRAME`。
*   如果是这样，请使用[`VIDIOC_ENUM_FRAMEINTERVALS`](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-enum-frameintervals.html)ioctl 以[`v4l2_fract`](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-enumstd.html#v4l2-fract)结构的形式获取可能的帧间隔列表（帧速率的倒数）
*   将这些值与[`VIDIOC_S_PARM`](http://linuxtv.org/downloads/v4l-dvb-apis/vidioc-g-parm.html)ioctl 一起使用并填写`v4l2_streamparm.parm.capture.timeperframe`成员。

这应该允许设置捕获端帧速率。你的任务是确保你的阅读速度足够快，不会掉帧。

# c++ - NSURLConnection 和 NSURLRequest 的纯 C++ 等价物

> ID：13981937
> 
> 赞同：0
> 
> 时间：2012-12-20T23:04:34.040
> 
> 标签：c++, objective-c, nsurlconnection, nsurl, nsurlrequest

我正在为 Android 移植一个使用原生 C++ 的游戏。`NSURLConnection`我需要知道我应该使用哪种方法来实现与`NSURLRequest`仅在 C++ 中相同的功能。还如何获得为 C++ 实现的所有以下委托函数。

```
-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error

-(void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T00:18:08.027

没有办法直接实现`Objective-C`委托方法`C++`。您真正希望做的最好的事情是使用实例变量`Objective-C++`创建一个`C++`对象，该实例变量是一个 Objective-C 对象，其唯一目的是成为`NSURLConnection`委托并将这些方法调用转发给拥有`C++`对象。`C++`对象应拥有/保留`Objective-C`对象，并负责将其作为对象的委托插入`NSURLConnection`。

上述模式的一个*极其幼稚的实现可能如下所示：*

URLConnection.h

```
#ifndef __Cplusplus__URLConnection__
#define __Cplusplus__URLConnection__

#include <string>

class URLConnection
{
public:
    URLConnection(std::string url);
    ~URLConnection();

    void DidReceiveResponse(const void* response);
    void DidReceiveData(const void* data);
    void DidFailWithError(std::string error);
    void DidFinishLoading();

    void* mNSURLConnection;
    void* mDelegate;
};

#endif /* defined(__Cplusplus__URLConnection__) */ 
```

URLConnection.mm

```
#include "URLConnection.h"

@interface PrivateNSURLConnectionDelegate : NSObject <NSURLConnectionDelegate>
{
    URLConnection* mParent;
}
- (id)initWithParent: (URLConnection*) parent;
@end

@implementation PrivateNSURLConnectionDelegate

- (id)initWithParent: (URLConnection*) parent
{
    if (self = [super init])
    {
        mParent = parent;
    }
    return self;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    mParent->DidReceiveResponse(response);
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    mParent->DidReceiveResponse(data.bytes);
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    mParent->DidFailWithError(std::string([[error description]UTF8String]));
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    mParent->DidFinishLoading();
}

@end

URLConnection::URLConnection(std::string url)
{
    this->mDelegate = [[PrivateNSURLConnectionDelegate alloc] initWithParent: this];
    NSURLRequest* req = [NSURLRequest requestWithURL: [NSURL URLWithString: [NSString stringWithUTF8String: url.c_str()]]];
    this->mNSURLConnection = [[NSURLConnection alloc] initWithRequest: req delegate: (id)this->mDelegate];
}

URLConnection::~URLConnection()
{
    [(NSObject*)this->mNSURLConnection release];
    [(NSObject*)this->mDelegate release];
}

void URLConnection::DidReceiveResponse(const void* response)
{
    // Do something...
}
void URLConnection::DidReceiveData(const void* data)
{
    // Do something...

}
void URLConnection::DidFailWithError(std::string error)
{
    // Do something...
}

void URLConnection::DidFinishLoading()
{
    // Do something...
} 
```

归根结底，`NSURLConnection`是一个`Objective-C`对象。如果不使用`Objective-C`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T14:00:10.753

LibCURL 可能是用于处理网络/互联网连接的跨平台 C/C++ 实现的最著名的库。如果将它与线程之类的异步技术结合起来，就可以开始模拟 NSURLConnection。

See here [[https://curl.haxx.se/libcurl/c/multithread.html]](https://curl.haxx.se/libcurl/c/multithread.html]) for an example. You'll have to create a class that manages the CURL reference and an appropriate std::function delegate, that you will call when the connection finishes/errors/aborts etc. When using it, you can pass C++14 lambda functions to act as stand-ins for Objective C delegates.

# javascript - 打印所有已安装的 node.js 模块的列表

> ID：13981938
> 
> 赞同：145
> 
> 时间：2012-12-20T23:04:35.320
> 
> 标签：javascript, node.js, npm, package, dependencies

在我正在处理的 node.js 脚本中，我想将所有 node.js 模块（使用 npm 安装）打印到命令行。我怎样才能做到这一点？

```
console.log(__filename);

//now I want to print all installed modules to the command line. How can I do this? 
```

* * *

## 回答 #1

> 赞同：280
> 
> 时间：2014-10-11T08:06:43.973

如果您只对没有完整树的全局安装的软件包感兴趣，那么：

`npm -g ls --depth=0`

或本地（省略 -g）：

`npm ls --depth=0`

* * *

## 回答 #2

> 赞同：106
> 
> 时间：2012-12-21T00:05:58.910

使用[npm ls](https://docs.npmjs.com/cli/ls)（甚至还有 json 输出）

从脚本：

测试.js：

```
function npmls(cb) {
  require('child_process').exec('npm ls --json', function(err, stdout, stderr) {
    if (err) return cb(err)
    cb(null, JSON.parse(stdout));
  });
}
npmls(console.log); 
```

跑：

```
> node test.js
null { name: 'x11', version: '0.0.11' } 
```

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2014-09-12T14:34:16.463

所有全局安装的第三方模块的列表，在控制台中写入：

```
 npm -g ls 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2016-04-17T13:59:15.163

在任何操作系统中

```
npm -g list 
```

就是这样

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-04-03T07:52:12.660

通常，有两种方法可以列出已安装的包 - 通过命令行界面 ( [CLI](https://docs.npmjs.com/cli/ls) ) 或在您的应用程序中使用[API](https://docs.npmjs.com/api/ls)。

这两个命令将以树形结构打印到`stdout`已安装的所有版本的软件包及其依赖项。

* * *

### 命令行界面

```
npm list 
```

使用`-g`(global) 标志列出所有全局安装的软件包。使用该`--depth=0`标志仅列出顶级包而不列出它们的依赖项。

* * *

### API

在您的情况下，您想在脚本中运行它，因此您需要使用 API。从文档：

```
npm.commands.ls(args, [silent,] callback) 
```

除了打印到`stdout`，数据也将被传递到回调中。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-05-14T23:38:23.660

为什么不从里面抓住它们`dependencies`呢`package.json`？

当然，这只会给您实际保存的那些，但无论如何您都应该这样做。

```
console.log(Object.keys(require('./package.json').dependencies)); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-10-21T22:59:18.897

```
for package in `sudo npm -g ls --depth=0 --parseable`; do
    printf "${package##*/}\n";
done 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-06T09:36:09.660

到 2021 年底，几乎没有明显的方法可以做到这一点，并且作为唯一一个给出上面答案的部分，这是一个完整的列表。

Node.js 文档实际上对此事进行了很好的解释，这是主要命令的集合列表。

所有命令都将在***本地***运行已安装模块的列表。为了运行全局级别，只需**在语句末尾****添加一个标志。`-g`**

1.  查看所有已安装 npm 包的版本，**包括它们的依赖**项。

    ```
    ❯ npm list

     >>> /Users/joe/dev/node/cowsay
     └─┬ cowsay@1.3.1
       ├── get-stdin@5.0.1
       ├─┬ optimist@0.6.1
       │ ├── minimist@0.0.10
       │ └── wordwrap@0.0.3
       ├─┬ string-width@2.1.1
       │ ├── is-fullwidth-code-point@2.0.0
       │ └─┬ strip-ansi@4.0.0
       │   └── ansi-regex@3.0.0
       └── strip-eof@1.0.0 
    ```

2.  只获取您的顶级包

    ```
    npm list --depth=0 
    ```

3.  通过指定名称获取特定包的版本。

    ```
    npm list <package-name> 
    ```

4.  在 npm 存储库上查看该软件包的最新可用版本是什么

    ```
    npm view <package-name> version 
    ```

5.  使用 @ 语法安装旧版本的 npm 包

    npm install@npm install cowsay@1.2.0

    # 全球套餐

    npm install -g webpack@4.16.4

6.  列出软件包的所有先前版本

    ```
    npm view cowsay versions
    [ '1.0.0',
      '1.0.1',
      '1.0.2',
      '1.0.3',
      '1.1.0',
      '1.1.1',
      '1.1.2',
      '1.1.3',
      ....
    ] 
    ```

* * *

## 更新所有 Node.js 依赖项

7.  安装新的次要版本或补丁版本

    ```
     npm update 
    ```

8.  安装新的次要版本或补丁版本，但不更新 package.json

    ```
     npm update --no-save 
    ```

9.  为了发现软件包的新版本，这为您提供了一个存储库中的一些过时软件包的列表，这些软件包已经有一段时间没有更新了

    ```
     npm outdated 
    ```

> 其中一些更新是主要版本。运行 npm update 不会更新这些版本。主要版本永远不会以这种方式更新，因为它们（根据定义）引入了重大更改，而 npm 想为您省去麻烦。

要将所有包更新到新的主要版本，请全局安装 npm-check-updates 包：

```
npm install -g npm-check-updates
ncu -u 
```

> 这会将 package.json 文件中的所有版本提示升级为依赖项和 devDependencies，因此 npm 可以安装新的主要版本

* * *

## 开发依赖

安装在开发依赖项中。

```
npm install <package-name> -D
npm install <package-name> --save-dev # same as above 
```

避免在生产环境中安装这些开发依赖项

```
npm install --production 
```

* * *

## 卸载 npm 包

```
npm uninstall <package-name>
npm uninstall -g <package-name> # globally uninstall 
```

10.  卸载一个包并**删除package.json中的引用**

    ```
     npm uninstall <package-name> -S
      npm uninstall <package-name> --save # same as above 
    ```

* * *

一些带有全局标志示例的命令。

```
npm list -g 
npm list --depth=0 -g
npm list <package-name> -g 
npm view <package-name> version -g 
```

## 附加命令

*   [@prosti 的回答](https://stackoverflow.com/a/40784174/13903942)

## 文档

*   [查找已安装的 npm 包版本](https://nodejs.dev/learn/find-the-installed-version-of-an-npm-package)
*   [安装旧版本的 npm 包](https://nodejs.dev/learn/install-an-older-version-of-an-npm-package)
*   [将所有 Node.js 依赖项更新到最新版本](https://nodejs.dev/learn/update-all-the-nodejs-dependencies-to-their-latest-version)
*   [使用 npm 进行语义版本控制](https://nodejs.dev/learn/semantic-versioning-using-npm)
*   [卸载 npm 包](https://nodejs.dev/learn/uninstalling-npm-packages)
*   [npm 全局或本地包](https://nodejs.dev/learn/npm-global-or-local-packages)
*   [npm 依赖项和 devDependencies](https://nodejs.dev/learn/npm-dependencies-and-devdependencies)
*   [npx Node.js 包 RunnerTABLE OF CONTENTS](https://nodejs.dev/learn/the-npx-nodejs-package-runner)

# javascript - jQuery ajax 的问题

> ID：13981939
> 
> 赞同：3
> 
> 时间：2012-12-20T23:04:35.087
> 
> 标签：javascript, ajax, jquery

我在 FF、Chrome 和 IE 中遇到了不同的错误，但归根结底，$.ajax 中的数据存在错误。以下是代码。如果我犯了一个愚蠢的错误，请放轻松。我花了几个小时研究这个，但无法弄清楚。任何帮助表示赞赏。

**编辑以包含错误消息**

FF 错误信息：`NS_ERROR_XPC_BAD_CONVERT_JS: Could not convert JavaScript argument`

铬错误消息：`Uncaught TypeError: Illegal invocation`

IE9 错误信息：`SCRIPT65535: Argument not optional`

这是代码

```
 mc.mc_data.click_tracking = [];
var sequence = 0;
var send_it;
// the container click event will record even extraneous clicks.  need to change it to extending the jquery on click handler
$('#container').on('click', function(event) {
    logClicks(event);
    if(!send_it){
        sendIt()
    }
    sequence++;
});

function sendIt(){
    var tracking = mc.mc_data.click_tracking;
    var url = '/ajax/click_trackin';
    console.log("clicks["+sequence+"] "+$.isArray(tracking));
    $.each(tracking, function(i,v){
        console.log(i + v.innerText + " - " + v.sequence);
    });
    send_it = window.setInterval(function(){
        $.ajax({
            type: 'POST',
            url: url,
            data: {
                clicks:tracking
            },
            success: function(response)
            {
                if(response.result.length<1){
                    console.log(response+ ': no response');
                }else{
                    console.log(response);
                    tracking = mc.mc_data.click_tracks = [];                            
                }
                mc.mc_data.click_tracks = [];
                clearInterval(send_it);
                sendIt();
            },
            error: function(a, b, c){
                console.log(a+" - " + b+" - "+ c);
                clearInterval(send_it);
            }
        });

    }, 5000);
}

//

function logClicks(e){
    var temp_click = {
      'business_id':window.mc.businessid, 
      'userid':window.mc.userid, 
      'timestamp':e.timeStamp,
      'leg':window.mc.currentLeg,
      'workflow': 'dummy data',
      'sequence': sequence,
      'type':e.type, 
      'target':e.target, 
      'parent': e.target.parentElement,
      'id':e.target.id, 
      'class':e.className,
      'innerText': $(e.target).text()
    }
    mc.mc_data.click_tracking.push(temp_click);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:08:03.480

对于`data`，您应该传递一个对象，该对象稍后将转换为查询字符串。您正在传递变量`tracking`，其中包含类似 的内容`e.target.parentElement`，它是一个 DOM 节点，包含许多其他属性（如其他 DOM 节点！）。该错误可能源于将 DOM 节点转换为查询字符串时遇到问题，或者创建了太长的查询字符串。无论如何，将 DOM 节点发送到服务器没有多大意义。

只发送必要且可以合理转换为查询字符串的内容。

# web - 在没有 Sharepoint 的情况下将交互式 Office 2010 数据透视图发布到 Web？

> ID：13981941
> 
> 赞同：0
> 
> 时间：2012-12-20T23:05:02.777
> 
> 标签：web, excel-2010, ms-access-2010, pivot-table, powerpivot

有谁知道将我在 Excel、Access 或 PowerPivot 2010 中制作的数据透视表和数据透视图发布到网页并保持交互性的方法？

我知道这在 Excel 2003 中是可能的，但无法在 Excel 2010 中找到无需使用 Sharepoint 和 Excel Services 的方法。

有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T22:39:10.173

最便宜和最简单的选择是将数据集放在 Azure 或 Azure Marketplace 中，并让他们直接通过 PowerPivot 插件查询数据。除此之外，您无法在线维护数据透视图的交互性。这不是您的问题的一部分，但我建议您查看[http://www.highcharts.com/](http://www.highcharts.com/)或[http://d3js.org/](http://d3js.org/)实现。您可以在此处与示例进行交互： [http](http://www.highcharts.com/demo/pie-basic) ://www.highcharts.com/demo/pie-basic（单击 jsfidle）

如果您可以证明在线拥有强大报告的成本是合理的，您可以查看我们上一家公司的[http://spotfire.tibco.com/demos](http://spotfire.tibco.com/demos)，我们有很多关于数据透视表及其图表的请求可以在线访问我们最终不得不购买 Spotfire 许可证：/ 祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:44:14.413

就基于 PowerPivot 的文件而言，这是不可能的。雅各布

# python - 登录和抓取所有链接时的抓取问题

> ID：13981942
> 
> 赞同：0
> 
> 时间：2012-12-20T23:05:12.717
> 
> 标签：python, scrapy

我试图让 Scrapy 登录到一个网站，然后能够转到它的特定页面，然后抓取信息。我有以下代码：

```
class DemoSpider(InitSpider):
    name = "demo"
    allowed_domains = ['example.com']
    login_page = "https://www.example.com/"
    start_urls = ["https://www.example.com/secure/example"]

    rules = (Rule(SgmlLinkExtractor(allow=r'\w+'),callback='parse_item', follow=True),)

    # Initialization
    def init_request(self):
        """This function is called before crawling starts."""
        return Request(url=self.login_page, callback=self.login)

    # Perform login with the username and password
    def login(self, response):
        """Generate a login request."""
        return FormRequest.from_response(response,
                    formdata={'name': 'user', 'password': 'password'},
                    callback=self.check_login_response)

    # Check the response after logging in, make sure it went well
    def check_login_response(self, response):
        """Check the response returned by a login request to see if we are
        successfully logged in.
        """
        if "authentication failed" in response.body:
            self.log("Login failed", level=log.ERROR)
            return

        else:
            self.log('will initialize')
            self.initialized(response)

    def parse_item(self, response):
        self.log('got to the parse item page') 
```

每次我运行蜘蛛时，它都会登录并进行初始化。但是，它从不匹配规则。是否有一个原因？我检查了以下网站：

[在 Scrapy 中使用经过身份验证的会话进行爬网](https://stackoverflow.com/questions/5851213/crawling-with-an-authenticated-session-in-scrapy)

还有许多其他站点，包括文档。为什么初始化后，它从来没有通过`start_urls`然后刮掉每一页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T06:22:52.603

您不能在`InitSpider`. 它仅适用于`crawlspider`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T10:07:25.073

从查看其他问题来看，您似乎需要返回不带参数的 self.initialized ，即`return self.initialized()`

# php - PHP - 将 2 个数组的值连接成 1 个新数组

> ID：13981944
> 
> 赞同：2
> 
> 时间：2012-12-20T23:05:27.753
> 
> 标签：php

我有 2 个具有相同结构的独立多维数组。例子：

```
Array
(
    [0] => Array
        (
            [uploadData] => 1234 Main St
        )

    [1] => Array
        (
            [uploadData] => 5678 Elm St
        )

    [2] => Array
        (
            [uploadData] => 9879 New St
        )

    [3] => Array
        (
            [uploadData] => 9876 Shady Lane
        )

)

Array
(
    [0] => Array
        (
            [uploadData] => Orlando
        )

    [1] => Array
        (
            [uploadData] => Tampa
        )

    [2] => Array
        (
            [uploadData] => Miami
        )

    [3] => Array
        (
            [uploadData] => West Palm Beach
        )

) 
```

我只需要将它们放入 1 个如下所示的新数组中：

```
Array
(
    [0] => Array
        (
            [uploadData] => 1234 Main St Orlando
        )

    [1] => Array
        (
            [uploadData] => 5678 Elm St Tampa
        )

    [2] => Array
        (
            [uploadData] => 9879 New St Miami
        )

    [3] => Array
        (
            [uploadData] => 9876 Shady Lane West Palm Beach
        )

) 
```

我一直在尝试使用`array_merge`，但我无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:36:24.050

简单、递归、与键无关的解决方案：

```
function array_concat_recursive($array1, $array2){
    $result = array();
    foreach($array1 as $key => $value){
        if(isset($array2[$key])){
            if(is_array($value)){
                $result[$key] = array_concat_recursive($value, $array2[$key]);
            }else{
                $result[$key] = $value . ' ' . $array2[$key];
            }
        }
    }
    return $result;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T23:09:39.127

假如说：

1.  您的第一个数组被分配给一个名为`$address`
2.  您的第二个数组被分配给一个名为`$city`
3.  两个数组之间总是有完全匹配的

**编辑：**
@dev-null-dweller 的精彩捕捉 - 编辑以捕捉完整深度的数组。

**注意**
有问题的示例代码在 uploadData 键周围没有引号，因此在此处复制：

以下将做你想要的：

```
foreach($address as $key=>$value) {
    $newarray = array(
         'uploadData'=>$value['uploadData'] . ' ' . $city[$key]['uploadData'];
    );
} 
```

将`$newarray`包含根据您的请求构建的数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-20T23:14:51.850

从两个数组中获取，直到一切都消失：

```
$final = [];
$key   = 'uploadData';
while ($array1 && $array2)
{
    $final[][$key] = array_shift($array1)[$key] . ' ' . array_shift($array2)[$key];
} 
```

查看[`array_shift`](http://php.net/array_shift)并[*转换为布尔值*](http://php.net/language.types.boolean.php#language.types.boolean.casting)。

# ruby-on-rails - 在 Rails 应用程序中使用 Thread.new 与 Resque 等后台 Worker

> ID：13981946
> 
> 赞同：1
> 
> 时间：2012-12-20T23:05:46.257
> 
> 标签：ruby-on-rails, ruby, delayed-job, resque

对于像邮寄和发布到外部网站这样的长时间运行的进程，是否可以使用 Ruby Thread.new 而不是像 Delayed Jobs 或 Resque 这样的后台工作程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T06:09:55.010

这取决于你所说的OK。Ruby 有一个全局解释器锁（大多数实现都这样做 - JRuby 是一个例外），这意味着您不会使用 Thread.new 方法获得真正的并发性。这并不意味着您根本没有获得任何并发性。这在多个地方进行了更深入的讨论：

*   [http://ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock/](http://ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock/)
*   [http://merbist.com/2011/10/03/about-concurrency-and-the-gil/](http://merbist.com/2011/10/03/about-concurrency-and-the-gil/)
*   [http://www.igvita.com/2008/11/13/concurrency-is-a-myth-in-ruby/](http://www.igvita.com/2008/11/13/concurrency-is-a-myth-in-ruby/)

Delayed Jobs 和 Resque 方法都涉及让一个或多个单独的进程执行长时间运行的操作。对于多个进程，您将在 Rails 应用程序和后台工作进程之间实现真正的并发，因为 GIL 根本不会妨碍您。

# python - 如何检查列表中实例对象的属性是否等于一个值

> ID：13981947
> 
> 赞同：0
> 
> 时间：2012-12-20T23:05:49.050
> 
> 标签：python

我从这个类创建了任意数量的对象：

```
class Person:
    def __init__(self, name, email):
        self.name = name
        self.email = email 
```

我有这些对象的列表：

```
myList = []
JohnDoe = Person("John Doe", "jdoe@email.com")
BobbyMcfry = Person("Bobby Mcfry", "bmcfry@email.com")
WardWilkens = Person("Ward Wilkens", "wwilkens@email.com")
myList.append(JohnDoe)
myList.append(BobbyMcfry)
myList.append(WardWilkens) 
```

我想检查某人是否存在，如果存在，则返回他们的属性 - 如果不存在，请说：

```
x = input("Who to check for? ")
for i in myList:
    if i.name == x:
        print("Name: {0}\nEmail: {1}".format(i.name, i.email))
    else:
        print("{0} is not on the manifest.".format(x)) 
```

这种方法有效，但为 myList 中的每个人返回一个或另一个 - 我只想要一个返回...

我意识到我需要做一些事情

```
if val in myList:.... 
```

但是我很难在不遍历每个对象的情况下如何说出“val”应该是什么

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T23:09:24.517

使用循环很好，您只需要处理名称都不匹配的情况，您可以使用`break`and轻松完成此操作`else`：

```
x = input("Who to check for? ")
for i in myList:
    if i.name == x:
        print("Name: {0}\nEmail: {1}".format(i.name, i.email))
        break
else:
    # this is only run if 'break' was not executed inside of the loop
    print("{0} is not on the manifest.".format(x)) 
```

根据您使用列表的目的，您最好使用字典将名称链接到`Person`对象：

```
myDict = {}
JohnDoe = Person("John Doe", "jdoe@email.com")
BobbyMcfry = Person("Bobby Mcfry", "bmcfry@email.com")
WardWilkens = Person("Ward Wilkens", "wwilkens@email.com")
for person in [JohnDoe, BobbyMcfry, WardWilkens]:
    myDict[person.name] = person

x = input("Who to check for? ")
person = myDict.get(x)
if person:
    print("Name: {0}\nEmail: {1}".format(person.name, person.email))
else:
    print("{0} is not on the manifest.".format(x)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:12:22.840

可以使用`itertools`.

```
try:
    found_person = itertools.dropwhile(lambda person: person.name != search_name, people).next()
except StopIteration:
    found_person = None 
```

# c# - 如何在 wpf 中创建标签数组？

> ID：13981958
> 
> 赞同：1
> 
> 时间：2012-12-20T23:06:52.370
> 
> 标签：c#, wpf, arrays, labels

我正在尝试在我的 WPF 应用程序中模拟 LED 指示灯（大约 16 个）。我从串口获得 2 个字节，根据这些位，我需要打开/关闭应用程序窗口上的 LED 指示灯。示例：0xFF、0xFE => 除了最后一个 LED 之外的所有 LED 都亮起。我使用深色背景颜色的标签来表示关闭 LED，使用明亮背景颜色表示开启 LED。如果我有一组标签，那么我可能会做这样的事情：

```
for(i = 0; i < 16; i++)
{
  if(bitArray[i] == true)
    lblLED[i].Background = Brushes.Pink;
  else
    lblLED[i].Background = Brushes.Maroon;
} 
```

关于什么是做到这一点的最佳方法的任何建议？可以显示这将如何工作的示例代码将很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T00:07:29.643

我相信您可以弄清楚如何做您所要求的，但是让我们考虑一下手头的工具？你有一个布尔数组，看起来。正如建议的那样，ItemsControl 可以很好地处理它们。首先，让我们做一些代码隐藏来将我们的布尔值转换为画笔来设置我们项目的背景。

```
using System;
using System.Windows.Media;
using System.Windows.Data;
using System.Globalization;

namespace MyNamespace
{
    public class BoolToBrushConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            // return a Pink SolidColorBrush if true, a Maroon if false
            return (bool)value ? Brushes.Pink : Brushes.Maroon;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
             return (SolidColorBrush)value == Brushes.Pink;
        }
    }
} 
```

这将允许您`bool[] bitArray`在绑定到`ItemsControl`. 现在对于一些 Xaml ：

首先，确保在 xmlns 属性以及系统核心库（参见 xmlns 属性）中声明了本地命名空间（其中包含我们刚刚定义的转换器）。

```
<Window x:Class="MyNamespace.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    <!-- our local namespace -->
    xmlns:my="clr-namespace:MyNamespace"
    <!-- system core library -->
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    Title="MainWindow" Height="600" Width="900">
    <Grid>
        <ItemsControl Name="LEDPanel"> <!-- Need to Name this Control in order to set the ItemsSource Property at startup -->
            <ItemsControl.Resources>
                <my:BoolToBrushConverter x:Key="LEDConverter" /> <!-- Here we define our converter for use, note the preceding my: namespace declaration -->
            </ItemsControl.Resources>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal" /> <!-- this will make the items defined in the ItemTemplate appear in a row -->
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate DataType="{x:Type sys:Boolean}"> <-- We will be binding our ItemsControl to a bool[] so each Item will be bound to a bool -->
                    <Border Margin="3" CornerRadius="10" Height="20" Width="20" BorderThickness="2" BorderBrush="Silver" Background="{Binding Converter={StaticResource LEDConverter}}" />
                    <!-- This is where we describe our item. I'm drawing a round silver border and then binding the Background to the item's DataContext (implicit) and converting the value using our defined BoolToBrushConverter -->
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Window> 
```

编辑：我忘记了数据绑定。在窗口的构造函数中：

```
public MainWindow()
{
    InitializeComponent();
    LEDPanel.ItemsSource = bitArray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T00:44:58.410

涵盖的概念是 INotifyPropertyChanges（在 .net 4.5 中（其他版本的最小更改但相同的概念））、ItemsControl 和最后的样式触发器。

## INotifyPropertyChanges

我的第一步是将 INotifyPropertyChanges 放在我们的主窗口上，以自动通知 WPF 控件任何更改。您将您的位数组转换为列表，并在需要时简单地将其放入（也许在计时器上？）。请注意，有多少并不重要......控件将扩展。

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private List<bool> _LedStates;

    public List<bool> LedStates
    {
        get { return _LedStates; }
        set
        {
            _LedStates = value;
            NotifyPropertyChanged();

        }
    }

    public MainWindow()
    {
        InitializeComponent();
        DataContext = this;
        LedStates = new List<bool>() {true, false, true};
    }

    #region INotifyPropertyChanged
    /// <summary>
    /// Event raised when a property changes.
    /// </summary>
    public event PropertyChangedEventHandler PropertyChanged;

    /// <summary>
    /// Raises the PropertyChanged event.
    /// </summary>
    /// <param name="propertyName">The name of the property that has changed.</param>
    protected virtual void NotifyPropertyChanged( [CallerMemberName] String propertyName = "" )
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler( this, new PropertyChangedEventArgs( propertyName ) );
        }
    } 
    #endregion

} 
```

## 项目控制和样式触发器

然后在 WPF xaml 中，我们将绑定到布尔列表并使用项目模板（想想找到的每个数据项的通用迷你视图）。在该模板中，我们将根据布尔值的状态显示红色或绿色。

不需要转换器，因为我们设置了一个与目标值相协调的样式触发器。如果 Textblocks 文本为“True”，我们将显示绿色，当“False”时，我们将触发/显示红色。

```
<Window x:Class="WPFBindToArray.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>

<ItemsControl x:Name="icBitViewer"
                ItemsSource="{Binding LedStates}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel HorizontalAlignment="Stretch"
                        IsItemsHost="True" />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}" Grid.Column="0">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Style.Triggers>
                            <Trigger Property="Text" Value="True">
                                <Setter Property="Background" Value="Green" />
                            </Trigger>
                            <Trigger Property="Text"  Value="False">
                                <Setter Property="Background" Value="Red" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl>

    </Grid>
</Window> 
```

当这个程序在这里运行时，结果是：

![在此处输入图像描述](../Images/04998e11d82911e77aeb1f156a872633.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T23:33:25.137

试试这个。这显然只是一个示例，我建议您使用 WPF 的功能，并且可能使用与`Label`.

```
Func<ushort, bool[]> getBits = s =>
{
    var bools = new bool[sizeof (ushort)*8];
    for (var i = 0; i < bools.Length; i++)
        bools[i] = (s & 1 << i) > 0;
    return bools;
};
var bits = getBits(2);
var labels = new Label[sizeof (ushort)*8];
for (var i = 0; i < labels.Length; i++)
{
    var label = new Label {Background = bits[i] ? Brushes.Green : Brushes.Red};
    labels[i] = label;
}
//Do something with the Label array 
```

# c# - ASP.NET Gridview 与动态网格上的链接按钮列

> ID：13981959
> 
> 赞同：1
> 
> 时间：2012-12-20T23:06:55.380
> 
> 标签：c#, asp.net, vb.net, gridview

ASP.NET Gridview 与动态网格上的链接按钮列

ASP.NET Gridview 应该有一个链接的列 - 第一列，当单击时应该使用单击的单元格值转到另一个页面。网格是动态的，即列不是固定的，列/列本身不是动态的。我只为第一列添加了一个 asp 控件，其余列是动态的，在后面的代码中，我总是添加第一列“链接按钮”。

```
<Columns>
    <asp:TemplateField HeaderText="linkbutton">
    <ItemTemplate>
        <asp:LinkButton ID="linkbutton" runat="server" Text='<%#EVal("linkbutton") %>'
            CommandName="ShowDetails" CommandArgument='<%#Eval("linkbutton") %>'>
        </asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
</Columns> 
```

linkbutton 是数据表的一部分，因此当我将数据表绑定到 gridview 时，它会出现两次，一次用于模板字段，一次来自数据表绑定。gridview.column().visible=false 不起作用，因为它认为链接按钮是唯一的列而不是数据表列。

我试图从该代码后面的代码中添加 Linkbutton 控件也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T02:11:24.040

我会将 autogeneratecolumns 设置为 false，然后使用 asp:BoundFields 来显示数据表中的列，而不是使用 asp:TemplateField 处理的链接按钮。

然后，您可以使用 GridView.Columns().Visible 隐藏/显示不同的列。

您无法将 GridView.Columns().Visible 与自动生成的列一起使用，因为[它们未添加到 Columns()](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx)：

> 显式声明的列字段可以与自动生成的列字段结合使用。当两者都使用时，首先呈现显式声明的列字段，然后是自动生成的列字段。自动生成的列字段不会添加到 Columns 集合中。

# javascript - 向我的谷歌地图提供纬度和经度列表，以用标记将它们可视化

> ID：13981960
> 
> 赞同：5
> 
> 时间：2012-12-20T23:06:57.363
> 
> 标签：javascript, google-maps-api-3

在我的项目中，我有一个包含纬度和经度列表的数据库，对应于几个地址，我想从这个数据库中获取它们并将它们传递给一个 JavaScript 代码，该代码将使用标记在地图中显示所有这些地址。到目前为止，我从数据库中获得了所有列表。通过使用它的纬度和经度，我能够在地图中可视化一个也是唯一一个地址。所以我现在正在努力解决多个地址的问题。这是我到目前为止提出的代码：

```
 function initialize() {
          var myLatlng = new google.maps.LatLng(locations[0], locations[1]);
          var myOptions = {
              zoom: 4,
              center: myLatlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP
          }
          map = new google.maps.Map(document.getElementById("map"), myOptions);
          var marker = new google.maps.Marker({
              position: myLatlng,
              map: map,
              title: "Fast marker"
          });
      }

      google.maps.event.addDomListener(window, 'load', initialize); 
```

位置是我的纬度和经度列表，它是这样的：

```
locations[0]: latitude 1  
locations[1]: longitude 1  
locations[2]: latitude 2  
locations[3]: longitude 2    etc.. 
```

现在我知道应该有某种循环，但我无法做到。

提前致谢！

PS：这是我的第一个问题，所以不要判断我的接受率！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T23:25:41.397

您只需要编写一个[`for`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)循环，如下所示：

```
function initialize() {
  var myOptions = {
    zoom: 4,
    center: new google.maps.LatLng(locations[0], locations[1]),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions);
  for (var i = 0, ln = locations.length; i < ln; i += 2) {
    var marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i], locations[i + 1]);
      map: map,
      title: "Fast marker"
    });
  }
}

google.maps.event.addDomListener(window, 'load', initialize);​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:22:53.387

您可以编写一个简单的`for`循环来[遍历`locations`](http://jsfiddle.net/XD5tS/1/). 一次增加两个：

```
var map = new google.maps.Map(document.getElementById("map"), myOptions);

for (var i=0 ; i < locations.length-1 ; i+=2) {

    var lat = locations[i];
    var lng = locations[i+1];

    var myLatlng = new google.maps.LatLng(lat, lng);
    var myOptions = {
          zoom: 4,
          center: myLatlng,
          mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          title: "Fast marker"
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T21:29:16.077

我得到了解决方案。如果将来有人需要它，这里是代码：

```
 function initialize() {
    console.log('hi');
  var myOptions = {
      zoom: 4,
      center: new google.maps.LatLng(locations[0], locations[1]),
      mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  map = new google.maps.Map(document.getElementById("map"), myOptions);
    for (var i = 0, ln = locations.length; i < ln; i += 2) {
      var marker = new google.maps.Marker({
          position: new google.maps.LatLng(locations[i], locations[i + 1]),
          map: map,
          title: "Fast marker"
      });
    }
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-20T23:53:57.637

如果您有一系列位置，如下所示

```
var locations = [
    [33.890542, 150.274856],
    [36.923036, 152.259052],
    [38.028249, 154.157507]
]; 
```

那么您可以使用以下代码

```
function initialize() {
    var myLatlng = new google.maps.LatLng(locations[0][0], locations[0][1]);
    var myOptions = {
        zoom: 4,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map(document.getElementById("map"), myOptions);

    for(var i=0;i<locations.length;i++)
    {
        var latlng=new google.maps.LatLng(locations[i][0], locations[i][1]);
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            title: "marker : "+(i+1)
        });
    }     
}
google.maps.event.addDomListener(window, 'load', initialize); 
```

[**工作示例**](http://jsfiddle.net/nGrSR/1/)。您可能需要/喜欢其他与谷歌地图相关[**的答案**](https://stackoverflow.com/search?q=user%3A741747%5Bjavascript%5D+google+maps)。

# plone - 我可以使用 ZCatalogs 查询计划来优化目录查询吗？

> ID：13981963
> 
> 赞同：3
> 
> 时间：2012-12-20T23:07:31.967
> 
> 标签：plone, zope

我想知道是否可以利用门户目录上的查询报告和查询计划选项卡提供的信息。我可以根据查询报告优化 ZCatalog 查询吗？ZCatalogs 查询计划与 SQL 数据库的查询计划有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T13:15:12.523

查询计划信息用于提高目录性能，但您无法根据计划信息优化自己的查询。

目录仅根据您的索引大小在需要时构建该信息；与 SQL 数据库不同，目录不会根据此类信息计划每个查询，而是从“查询计划”选项卡中反映的结构中查找预先计算的计划。

查询报告选项卡确实为您提供了有关哪些索引对您的代码表现不佳的信息；您可能需要重新考虑使用这些索引组合的代码和/或查看这些索引为何表现不佳；也许您的查询没有足够快地限制结果，或者慢速索引非常大，这表明您的 ZODB 缓存可能太小而无法容纳该大索引，或者其他结果一直将其推出。

总的来说，对于大型应用程序，保留查询计划是个好主意。在一个项目中，我们在停止实例之前转储缓存信息并在重新启动后重新加载，其中包括目录查询计划：

```
plan = site.portal_catalog.getCatalogPlan()
with open(PLAN_PATH, 'w') as out:
    out.write(plan) 
```

和负载：

```
if os.path.exists(PLAN_PATH):
    from Products.ZCatalog.plan import PriorityMap
    try:
        PriorityMap.load_from_path(PLAN_PATH)
    except Exception:
        pass 
```

# python - 为什么 SIP 和 PyQt4 不能相处

> ID：13981964
> 
> 赞同：6
> 
> 时间：2012-12-20T23:07:40.250
> 
> 标签：python, pyqt4, python-sip

我的大部分工作都是在 Windows 中完成的，并且有一个很好的 python27 设置，就像我喜欢的那样。我最近安装了 virtualBox 并在其上运行了一台 Ubuntu 机器，并试图在其上安装 PyQt4。但是，当我尝试从 PyQt4 导入时，我从 apt-get 安装并更新了所有内容

```
from PyQt4 import QtCore 
```

我得到一个运行时错误：

```
RuntimeError: the sip module implements API v9.0 to v9.1 but the PyQt4.QtCore module requires API v8.1 
```

我确信这是一个我有知识库可以在 Windows 中解决的问题，但是我的 Linux 经验不足在这里变得更好，而且我安装了一些错误的东西。该错误使我相信我的 SIP 版本对于我的 PyQt 版本来说太花哨了……有人有这方面的经验吗？

**编辑**：如果我在收到错误后再次尝试导入，它似乎可以工作。这样做我获得了版本信息。

```
cfg.pyqt_version_str
Out[9]: '4.9.3'
cfg.sip_version_str
Out[10]: '4.14.3-snapshot-55188026fe6d' 
```

不确定所有快照业务是关于什么的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T01:48:44.453

我刚刚测试了 sip/pyqt 的安装`apt-get`，它安装了：

*   啜饮 4.12.4
*   PyQt4 4.8.5

您报告的 sip 版本是开发快照。我建议删除所有这些，`sudo apt-get update`然后`sudo apt-get install python-sip python-qt4`再做一次。

否则，您可以从源代码中获取最新的稳定版本：

*   [啜饮 4.14.2](http://sourceforge.net/projects/pyqt/files/sip/sip-4.14.2/sip-4.14.2.tar.gz)
*   [PyQt4 4.9.6](http://sourceforge.net/projects/pyqt/files/PyQt4/PyQt-4.9.6/PyQt-x11-gpl-4.9.6.tar.gz)

如果您有混合安装，请尝试删除所有这些。使用 pip 你可以做到`pip remove sip`。或者你可以进入一个 python shell 并找出它在哪里，然后手动删除它：

```
$ python
>>> import sip
>>> print sip 
# path to sip 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-20T20:03:41.057

如果您需要使用 Qt 4.7，这些版本可以一起使用（构建在 x86_64 Centos6 上工作）

```
 PyQt 4.10.4
    SIP 4.15.5
    QT 4.7.4 
```

如果您需要 Qt 4.8，这些版本一起用于构建 PyQt4：

```
 PyQt 4.11
    SIP 4.16
    QT 4.8.x 
```

使用这些步骤来构建 PyQt4：

```
 python configure-ng.py -g
    make
    make install 
```

# java - (de)压缩base64字符串

> ID：13981965
> 
> 赞同：4
> 
> 时间：2012-12-20T23:07:53.897
> 
> 标签：java, php, base64

PHP代码：

```
$txt="John has cat and dog."; //plain text
$txt=base64_encode($txt); //base64 encode
$txt=gzdeflate($txt,9); //best compress
$txt=base64_encode($txt); //base64 encode
print_r($txt); //print it 
```

以下代码返回：

> C861zE/KdMqPjPBNjzRyM/B0dyuNcnbKTjJKLgUA

我正在尝试用 Java 压缩字符串。

```
 // Encode a String into bytes
     String inputString = "John has cat and dog.";
     inputString=Base64.encode(inputString);

     byte[] input = inputString.getBytes("UTF-8");

     // Compress the bytes
     byte[] output = new byte[100];
     Deflater compresser = new Deflater();
    //compresser.setLevel(Deflater.BEST_COMPRESSION);
     compresser.setInput(input);
     compresser.finish();
     int compressedDataLength = compresser.deflate(output);     
     String outputString = new String(output, 0, compressedDataLength,"UTF-8");     
     outputString=Base64.encode(outputString);  
     System.out.println(outputString); 
```

但是打印错误的字符串：eD8L

> Pz9PP3Q/Pz9NPzRyMz90dys/cnY/TjJKLgUAPygJTA==

一定是：

> C861zE/KdMqPjPBNjzRyM/B0dyuNcnbKTjJKLgUA

怎么修？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T02:17:07.657

像这样使用`Deflater`：

```
ByteArrayOutputStream stream = new ByteArrayOutputStream();
Deflater compresser = new Deflater(Deflater.BEST_COMPRESSION, true);
DeflaterOutputStream deflaterOutputStream = new DeflaterOutputStream(stream, compresser);
deflaterOutputStream.write(input);
deflaterOutputStream.close();
byte[] output = stream.toByteArray(); 
```

要解压缩压缩的内容：

```
 ByteArrayOutputStream stream2 = new ByteArrayOutputStream();
    Inflater decompresser = new Inflater(true);
    InflaterOutputStream inflaterOutputStream = new InflaterOutputStream(stream2, decompresser);
    inflaterOutputStream.write(output);
    inflaterOutputStream.close();
    byte[] output2 = stream2.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T01:34:00.587

```
 String outputString = new String(output, 0, compressedDataLength,"UTF-8"); 
```

您正在获取一些压缩数据并尝试将其解释为 UTF-8 字符串。这是不安全的，并导致编码字符串包含一堆“？”而不是预期的数据。

# php - Zend from 和 Ajax 搜索

> ID：13981966
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:07:55.393
> 
> 标签：php, ajax, zend-framework, zend-form

我正在 Zend 中开发一个模块。

用户向数据库添加订单，但必须选择特定用户。

使用通常的选择列表表单会很不舒服，因为管理员必须在数百个用户之间进行选择。

因此，拥有一个在数据库中搜索的 Ajax 表单，然后让管理员为订单选择特定用户，然后使用 user_id 将此订单保存到数据库中，这就是我想要做的。

那么，有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T01:41:42.923

@ficuscr 提出了一些很棒的建议！肯定需要一些时间来研究这些。

Zend 是一个很棒的可靠的库，它使开发变得快速和容易……但是它非常通用。您尝试做的不是 Zend 特定的，而是它的应用程序特定的。

要实现您想要的，您需要以下内容（请记住，这样做的方法很少）：

*   使用 ID #userSelect 将文本框输入添加到您的订单*   添加一些返回 json 数据的 Controller Action ( [Zend JSON Helper](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelpers.json) )

    ```
    class FooController extends Zend_Controller_Action
    {
        public function barAction() {
           // do some processing...
           // Send the JSON response:
           $this->_helper->json($data); 
        }
    } 
    ```

    *   将 jQuery 和 jQuery UI 依赖项添加到您的文档中。您可以通过视图助手添加这些，或者简单地将它们添加到您的布局中。

    ```
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
     <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
     <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script> 
    ```

    *   在文档头部添加 jQuery UI Autocomple 魔法（[请参阅 API 文档](http://api.jqueryui.com/autocomplete/)）

    ```
    $(document).ready(function() {    
       // you can use absolute url, but relative should work just fine (assuming you dont change your basehref)
       $('#userSelect' ).autocomplete({ source: '/foo/bar' });
    }); 
    ```

这就对了...

# c# - 没有编码的 XML 文件中的问号在尝试加载时会产生错误

> ID：13981967
> 
> 赞同：0
> 
> 时间：2012-12-20T23:07:56.940
> 
> 标签：c#, xml

我正在尝试获取选定“Xpath 位置”中的所有元素并将它们添加到组合框/下拉列表中。

我尝试使用 Xpath 查询选择所有这些元素： /@* 和 XpathNodeIterator 中的 Select 方法。

问题是它返回一个不向前移动的迭代器，实际上，它说它没有子节点，并且不允许我将迭代器转换为 xmlElement 或节点，以便我至少可以在它们内部进行搜索。

这是代码：

```
 while (anIterator.MoveNext())
            {
                //im trying to select  all nodes  of selected path which and return them to an iterator
                secondIterator = anIterator.Current.Select("/@*");                    

                while (secondIterator.MoveNext())
                {
                    aNode = new Nodes();
                    aNode.Name = anIterator.Current.MoveToFirstChild().ToString();
                    nodeList.Add(aNode);
                }
                nodeList.Add(aNode);
            } 
```

获取当前节点中所有元素的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:32:20.177

如果没有您正在使用的 XML 文件，也没有您告诉我们您希望看到什么，以及您目前正在看到什么，这肯定更难回答。

以下是一些观察：

XPath 中的“@”字符表明您正在尝试获取当前节点的所有属性。'/' 告诉 Path 从 DOM 的根目录开始。

如果您试图获取当前节点下的所有元素，您可能需要更改为“./*”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:32:32.997

问题是`@`，这表明您要选择子*属性*，而不是子元素。（参见[http://www.w3.org/TR/xpath/#path-abbrev](http://www.w3.org/TR/xpath/#path-abbrev)）。

尝试`anIterator.Current.Select("*")`获取子元素。如果您想要所有后代元素（不仅仅是直接子元素），请尝试`anIterator.Current.Select(".//*")`

# vb.net - 如何在 Visual Basic 2010 中移动或替换文件或文件夹？

> ID：13981975
> 
> 赞同：0
> 
> 时间：2012-12-20T23:08:37.373
> 
> 标签：vb.net, vb.net-2010

调试时出现以下错误。

> 发生了未处理的异常
> 
> 无法完成操作，因为此路径“C:\32bit\abc.dll”中已存在文件

我该如何解决这个问题？

```
Imports System
Imports System.IO

Public Class Form1

    Private Sub ReactorButton1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ReactorButton1.Click
        If ReactorComboBox1.SelectedItem = "Some Program" Then
            My.Computer.Network.DownloadFile _
                ("http://somesite/test/abc.dll", _
                "C:\32bit\abc.dll", True, 500)
                System.IO.File.Move("C:\32bit\abc.dll" "C:\Program Files\Some Program\abc.dll")

            My.Computer.Network.DownloadFile _
                ("http://www.somerandomsite/test1/abcd _
                "C:\64bit\abcd.dll", True, 500)
                System.IO.File.Move("C:\64bit\abcd.dll… "C:\Program File (x86)\Some Other Program\abcd.dll")
        End If
    End Sub 
```

我也试过

```
Try
    Catch ex As Exception
        System.IO.File.Delete("C:\32bit\abc.dll")
    End Try
    Try

    Catch ex As Exception
        My.Computer.Network.DownloadFile _
            ("http://somesite.com/folder/32bit/abc.dll", _
            "C:\32bit\abc.dll", True, 500)
    End Try
    System.IO.File.Copy("C:\32bit\abc.dll", "C:\Program Files (x86)\A Program\Sub Folder\abc.dll") 
```

但我仍然得到相同的未处理异常错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:17:44.667

这是因为文件存在。下载前需要删除（你的版本删除放错地方了，应该在Try，不是Catch）

检查*[My.Computer.Network.DownloadFile 方法](http://msdn.microsoft.com/en-us/library/ack30t8y%28v=vs.90%29.aspx)*。你可以有一个覆盖标志`DownloadFile`：

> *overwrite*设置为 False 并且目标文件已经存在 (IOException)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:25:20.087

查看*[My.Computer.Network.DownloadFile 方法](http://msdn.microsoft.com/en-us/library/ack30t8y%28v=vs.90%29.aspx)*(MSDN)。

`catch`仅供参考，在块中运行代码是不好的编码习惯。`catch`块通常意味着真正捕捉到执行。

您可能遇到的问题是您试图在文件完全下载之前移动文件，因此您遇到了异常。

# iphone - HTML 代码未正确呈现

> ID：13981978
> 
> 赞同：0
> 
> 时间：2012-12-20T23:08:57.140
> 
> 标签：iphone, html

我的 HTML 和 jQuery 代码有问题。我想知道是否有人可以告诉我它有什么问题。这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Main Page</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Scripts -->
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.js"></script>
    <!-- Stylesheets -->
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0-rc.1/jquery.mobile-1.1.0-rc.1.min.css" />
    <!-- Color Scheme -->
    <!-- Beige: #eee8cd; Green: #008b8b; Blue: #203471; -->
</head>
<body>
    <div id="MainPage" style="background:#008b8b;color:#203471" data-role="page">
        <div style="background:#008b8b;color:#203471" data-role="content">
            <p style="background:#008b8b;color:#203471"><img alt="" src="Images/Header.png" style="width:100%" /></p>
            <p style="background:#008b8b;color:#eee8cd">The content for the main page is here</p>
            <a style="background:#eee8cd;color:#203471" href="AboutUs.htm" data-role="button">About Us</a>
            <a style="background:#eee8cd;color:#203471" href="ContactUs.htm" data-role="button">Contact Us</a>
        </div>
        <div style="background:#203471;color:#eee8cd" data-role="footer">
            <h4>Main Page Footer</h4>
        </div>
    </div>
</body>
</html> 
```

我在解决两个问题时遇到了问题：

1）当我将此代码放在我的网络服务器上并通过我的 iPhone 导航到它时，当手机保持在垂直位置时很好。但是，当手机移动到水平位置时，按钮似乎显示在文本上方并且无法使用。关于如何解决这个问题的任何想法？

2）我尝试创建一个自定义 stylesheet.css 并通过各种标签的 class 属性链接到它。这行不通，所以我不得不输入内联代码（例如：）

```
<div style="background:#203471;color:#eee8cd" 
```

有人可以告诉我如何使用这些属性创建一个 stylesheet.css 并在 HTML 中“标记”它们以使其正常工作吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T23:22:46.203

好吧，你有一个指向 jQuery 的链接，你的 CSS 链接应该放在哪里。查看 www.codecademy.com ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T23:27:05.353

我已经将内联 css 分离出来，并且似乎渲染得很好。

在这里玩这个小提琴[http://jsfiddle.net/kVqWJ/](http://jsfiddle.net/kVqWJ/)

您可以通过多种方式在 html 文件中包含 css 文件：

```
1)

<style type="text/css">
//your style here
</style>

2) 

    <link rel="stylesheet" type="text/css" href="css url here"> 
```

快速谷歌搜索会有所帮助。[Mozilla 开发者网络](https://developer.mozilla.org/en-US/)是一个很好的起点。

# drupal - user-register.tpl.php 错误消息未显示

> ID：13981982
> 
> 赞同：-1
> 
> 时间：2012-12-20T23:09:13.320
> 
> 标签：drupal, drupal-6

在 drupal 6 中，我制作了一个自定义 user-register.tpl.php 表单，当用户名或电子邮件已经存在时，该框变红，但错误消息“您的电子邮件已注册”没有出现。他们成功注册时的消息也没有“您的登录信息已邮寄给您”

我怎样才能解决这个问题？我的代码是

```
 <div id="registration_form">
    <div class="field">
    <?php  print drupal_render($form['name']); // prints the username field
    ?>
    </div>
    <div class="field">
    <?php
    print drupal_render($form['mail']); // print the email field
    ?>
    </div>
   <div class="field">
   <?php
    print drupal_render($form['submit']); // print the submit button
   ?>
   </div>
   <?php
    print drupal_render($form['timezone']);
    print drupal_render($form['form_build_id']);
    print drupal_render($form['form_id']);
    ?>
    <?php
    drupal_set_message('< pre >'. var_export($variables,TRUE) .'< /pre >');
    ?> 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T10:20:22.920

您可以使用变量**$messages**直接在**page.tpl.php**中打印由**drupal_set_message()**方法生成的消息。因此，在您的**page.tpl.php**中，确保该行存在：

 ******```
<?php print $messages; ?> 
```

现在，如果您需要单独打印每个错误，则必须使用**[form_get_error($element)](http://api.drupal.org/api/drupal/includes!form.inc/function/form_get_error/6)**其中**$element**是输入的名称******

# java - 如何将嵌套的 Scala 集合转换为嵌套的 Java 集合

> ID：13981983
> 
> 赞同：17
> 
> 时间：2012-12-20T23:09:14.460
> 
> 标签：java, scala, generics, scala-collections

我在 Scala 和 Java 之间遇到编译问题。

我的 Java 代码需要一个

```
java.util.Map<Double, java.lang.Iterable<Foo>> 
```

我的 scala 代码有一个

```
Map[Double, Vector[Foo]] 
```

我得到编译错误：

```
error: type mismatch;
found   : scala.collection.immutable.Map[scala.Double,Vector[Foo]
required: java.util.Map[java.lang.Double,java.lang.Iterable[Foo]] 
```

似乎 scala.collection.JavaConversions 不适用于嵌套集合，即使可以将 Vector 隐式转换为 Iterable。没有遍历 scala 集合并手动进行转换，我可以做些什么来使类型工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-20T23:30:19.803

`scala.collection.JavaConversions`恕我直言，应该弃用。您最好通过使用明确说明转换发生的地点和时间`scala.collection.JavaConverters`。在你的情况下：

```
import scala.collection.JavaConverters._

type Foo = Int // Just to make it compile
val scalaMap = Map(1.0 -> Vector(1, 2)) // As an example

val javaMap = scalaMap.map { 
  case (d, v) => d -> v.toIterable.asJava
}.asJava 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-18T13:21:04.973

这更适合我的需求：

```
 def toJava(m: Any): Any = {
    import java.util
    import scala.collection.JavaConverters._
    m match {
      case sm: Map[_, _] => sm.map(kv => (kv._1, toJava(kv._2))).asJava
      case sl: Iterable[_] => new util.ArrayList(sl.map( toJava ).asJava.asInstanceOf[util.Collection[_]])
      case _ => m
    }
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-03T16:01:40.127

我编写了这个通用函数，它非常适合我的需要。

```
def toJava(x: Any): Any = {
  import scala.collection.JavaConverters._
  x match {
    case y: scala.collection.MapLike[_, _, _] => 
      y.map { case (d, v) => toJava(d) -> toJava(v) } asJava
    case y: scala.collection.SetLike[_,_] => 
      y map { item: Any => toJava(item) } asJava
    case y: Iterable[_] => 
      y.map { item: Any => toJava(item) } asJava
    case y: Iterator[_] => 
      toJava(y.toIterable)
    case _ => 
      x
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-28T12:06:03.343

如果有人在 spark-scala 中寻找解决方案，试试这个，

导入 org.apache.spark.sql.catalyst.expressions.GenericRowWithSchema

这里， y 是嵌套的 WrapperArray

```
y match {
          case x : WrappedArray[x] =>
             (x.map(f => f match {case z: GenericRowWithSchema => z.mkString(",").toString()
                                                case z:Any => z  })).asJavaCollection
          case _ => row.get(i).asInstanceOf[Object]
        } 
```

上面的代码做了两件事，1) 如果 wrapper Array 具有原始数据类型，则条件 case_ 通过 2) 如果 wrapper Array 具有 Complex 数据类型（例如 struts），则执行 GenericRowWithSchema。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T19:06:01.620

所有其他解决方案都是`Any`to `Any`，这对于像 Scala 这样的强类型语言来说是非常糟糕的。
这是一个尽可能多地保留类型的解决方案：

```
trait AsJava[T, R] {
  def apply(o: T): R
}

object AsJava extends LowPriorityAsJava {
  implicit class RecursiveConverter[T](o: T) {
    def asJavaRecursive[R](implicit asJava: AsJava[T, R]): R = asJava(o)
  }

  implicit lazy val longAsJava: AsJava[Long, lang.Long] = new AsJava[Long, lang.Long] {
    def apply(o: Long): lang.Long = Long.box(o)
  }

  implicit lazy val intAsJava: AsJava[Int, lang.Integer] = new AsJava[Int, lang.Integer] {
    def apply(o: Int): lang.Integer = Int.box(o)
  }

  implicit lazy val doubleAsJava: AsJava[Double, lang.Double] = new AsJava[Double, lang.Double] {
    def apply(o: Double): lang.Double = Double.box(o)
  }

  implicit def mapAsJava[K, V, KR, VR](
      implicit
      keyAsJava: AsJava[K, KR],
      valueAsJava: AsJava[V, VR]
  ): AsJava[Map[K, V], util.Map[KR, VR]] =
    new AsJava[Map[K, V], util.Map[KR, VR]] {
      def apply(map: Map[K, V]): util.Map[KR, VR] =
        map.map { case (k, v) => (keyAsJava(k), valueAsJava(v)) }.asJava
    }

  implicit def seqAsJava[V, VR](implicit valueAsJava: AsJava[V, VR]): AsJava[Seq[V], util.List[VR]] =
    new AsJava[Seq[V], util.List[VR]] {
      def apply(seq: Seq[V]): util.List[VR] = seq.map(valueAsJava(_)).asJava
    }

  implicit def setAsJava[V, VR](implicit valueAsJava: AsJava[V, VR]): AsJava[Set[V], util.Set[VR]] =
    new AsJava[Set[V], util.Set[VR]] {
      def apply(set: Set[V]): util.Set[VR] = set.map(valueAsJava(_)).asJava
    }

  implicit lazy val anyAsJava: AsJava[Any, AnyRef] = new AsJava[Any, AnyRef] {
    def apply(o: Any): AnyRef = o match {
      case x: Map[Any, Any] => mapAsJava(anyAsJava, anyAsJava)(x)
      case x: Seq[Any]      => seqAsJava(anyAsJava)(x)
      case x: Set[Any]      => setAsJava(anyAsJava)(x)
      case x: Long          => longAsJava(x)
      case x: Int           => intAsJava(x)
      case x: Double        => doubleAsJava(x)
      case x                => x.asInstanceOf[AnyRef]
    }
  }
}

trait LowPriorityAsJava {
  implicit def otherAsJava[T]: AsJava[T, T] = new AsJava[T, T] {
    def apply(o: T): T = o
  }
} 
```

用法：

```
Seq(Seq.empty[Int]).asJavaRecursive 
```

# vb.net - 在 vb.net 中拆分“RockPaperScissors.Paper”字符串以检索“Rock”

> ID：13981985
> 
> 赞同：1
> 
> 时间：2012-12-20T23:09:21.103
> 
> 标签：vb.net, string, split

以下代码

`player2.getWeapon.ToString()`

返回

```
'RockPaperScissors.Rock' 
```

或者

```
 'RockPaperScissors.Paper' 
```

或者

```
'RockPaperScissors.Scissors' 
```

我只对班级名称感兴趣，即 Rock、Paper 或 Scissors。我怎样才能做到这一点？

分裂是我想到的，但不确定它是否是最好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:11:24.717

是的，[`string.Split`](http://msdn.microsoft.com/de-de/library/b873y76a%28v=vs.80%29.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-1)似乎是合适的方式：

```
Dim tokens As String() = player2.getWeapon.ToString().Split("."c)
Dim className As String = tokens.Last() ' or simply tokens(1) without Linq 
```

但是，如果您可以`Weapon`使用直接返回它的属性来扩展您的类，我会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T23:13:17.903

如果你真的不想使用 Split() 你可以使用 IndexOf （性能更高）

```
Dim className as String    
Dim weapon = player2.getWeapon.ToString()
Dim pos as Integer = weapon.IndexOf("."c)
if pos >= 0 Then 
    className =  weapon.Substring(pos + 1)
End if 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:19:55.913

`ToString`只是基`Object`类定义的常规可重写方法。因此，您可以轻松地覆盖它以使其返回您想要的任何内容。例如：

```
Public Class Rock
    Public Overrides Function ToString() As String
        Return "Rock"
    End Function
End Class 
```

或者，如果你想强制你的类实现它，你可以在你的基`Weapon`类中这样做，如下所示：

```
Public Class Weapon
    Public Sub New(weaponName As String)
        _weaponName = weaponName
    End Sub

    Private _weaponName As String

    Public Overrides Function ToString() As String
        Return _weaponName
    End Function
End Class

Public Class Rock
    Inherits Weapon

    Public Sub New()
        MyBase.New("Rock")
    End Sub
End Class 
```

或者，如果您不想在构造函数中要求它，您可以`MustOverride Function GetWeaponName() As String`在基类中添加一个受保护的，然后从`ToString`. 无论哪种方式，派生类都将被迫提供名称，以便它可以在`ToString`.

我建议这样做的原因是因为我怀疑您使用此字符串作为显示给用户的描述。如果是这样的话，那并不是你想要的真正的类名，而是武器的描述。到目前为止，它们只是碰巧是相同的，但从逻辑上讲，情况并非总是如此。例如，如果您有一个名为 的类`SuperDuperRock`，您不会希望像那样向用户显示它。相反，您希望它的格式正确，单词之间有空格。

# facebook-graph-api - Facebook 访问令牌过期导致我的应用无法运行

> ID：13981992
> 
> 赞同：0
> 
> 时间：2012-12-20T23:09:45.977
> 
> 标签：facebook-graph-api, facebook-php-sdk

我开发了一个应用程序，以便用户可以将图像上传到页面的相册。我不希望用户必须授权，因此我使用应用程序中的访问令牌为他们上传图像。如果管理员已登录并且访问令牌尚未过期，则此方法工作正常 - 它似乎只持续几个小时。我查看了 stackoverflow 和 facebook 并尝试了许多不同的东西，但似乎没有任何效果。这是我正在使用的一些代码：

```
try {
        $facebook->setAccessToken("APP_ACCESS_TOKEN_FROM_GRAPH_API_TOOL");
        $token_url="https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=".$facebook->getAccessToken();
        $page_id = 'PAGE_ID';
        $response = file_get_contents($token_url);
        $params = null;
        parse_str($response, $params);
        $page_info['access_token'] = $params['access_token'];
        $page_info = $facebook->api("/".$page_id."?fields=access_token");
        if( !empty($page_info['access_token']) ) {
            $photo_details['access_token'] = $page_info['access_token'];
            $upload_photo = $facebook->api('/'.$page_id.'/photos', 'post', $photo_details); 
```

我在做梦吗？这可能吗，我只是搞砸了代码？即使只是为我指出正确的方向，任何帮助都将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:03:22.893

目前，您的代码使用您自己的访问令牌，而不是应用程序访问令牌。

要获取应用程序访问令牌，您需要向[https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials)发出获取请求，如[https://developers.facebook.com/docs中所述/technical-guides/opengraph/publishing-with-app-token/](https://developers.facebook.com/docs/technical-guides/opengraph/publishing-with-app-token/)

在您的实现中，并假设 APP_SECRET 和 APP_ID 被定义为常量，您将通过以下方式获取应用访问令牌：

```
$appAccessToken = str_replace("access_token=","",$facebook->api("https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=client_credentials"));
$facebook->setAccessToken($appAccessToken); 
```

# c++ - 推迟返回的引用

> ID：13981993
> 
> 赞同：4
> 
> 时间：2012-12-20T23:09:48.453
> 
> 标签：c++, reference

鉴于：

```
int& foo(); // don't care what the reference is to
int intVal; 
```

在以下两种情况下，右手边是同一个函数调用

```
int& intRef = foo();
intVal = foo();  // a reference is returned... a value is assigned. 
```

在第二种情况下，返回的引用如何“转换”为一个值？

它是由 int 的赋值运算符完成的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-20T23:15:38.310

在语言级别，没有“取消引用”这样的概念。引用实现了*左值*的概念。变量和引用基本上是一回事。变量和引用之间的唯一区别是变量由编译器自动绑定到其在存储中的位置，而引用通常在运行时通过用户操作绑定。

`intRef`在您的示例中， and之间没有概念上的区别`intVal`。两者都是 type 的左值`int`。在概念层面，两者都是通过相同的机制访问的。您甚至可以将程序中的所有变量视为引用，编译器已为您隐式预绑定。这基本上就是 Bjarne Stroustrup 在 TC++PL 中的意思，他说（不是逐字）人们可以将引用视为现有变量的替代名称。

唯一可以察觉两者之间差异的时刻是创建这些实体并初始化它们时。引用的初始化是将其绑定到存储中某个位置的行为。变量的初始化是将初始值复制到现有存储中的行为。

但是一旦一个引用被初始化，它就像一个普通的变量：读/写一个引用的行为就是读/写它所绑定的存储位置的行为。获取引用的地址会评估它绑定到的存储位置的地址。等等。

众所周知，在许多情况下，引用在内部实现为变相的指针，即作为一个不可见的指针，每次访问它时都会为您隐式取消引用。在这种情况下（当它真正通过指针实现时），每次访问它时都会再次完成取消引用。因此，正如您在问题中所问的那样，不是赋值运算符执行此操作。正是您在代码中提到了该引用的名称导致不可见指针被取消引用。

然而，实现“现有变量的替代名称”的实体不一定需要对其自身进行存储，即在编译语言中，它不需要由任何材料（如隐藏指针）表示。这就是语言标准在 8.3.2 中声明“未指定引用是否需要存储”的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T23:25:40.767

`foo`正在返回对“int”类型对象的一些引用。我们不会关心那个“int”是从哪里来的，我们只是假设它存在。

第一行，`int& intRef = foo()`创建`intRef`它也引用了与返回值所引用的“int”类型完全相同的对象`foo`。

第二行，将 的值`intVal`替换为返回的引用所引用的对象的值。

* * *

回应您的评论：

您似乎对指针和引用感到非常困惑。引用就像一个对象的别名。对引用做任何事情实际上都会影响它所引用的对象。

没有取消引用引用这样的事情。您只能取消引用指针。取消引用是使用一元运算`*`符获取点指向的对象的行为。例如，如果你有一个`int* p`，你可以做得到`*p`它指向的对象。这是*取消引用* `p`。

您唯一可以`*`对引用执行的操作是它所引用的对象是指针（或者它是否重载`operator*`）。在您的情况下，由于`foo`返回一个`int&`，我们不能取消引用它。该表达式`*foo()`将无法编译。那是因为返回值的`foo`类型是“int”，它不是指针，也不会重载`operator*`。

出于所有意图和目的，您可以将返回的引用`foo`简单地视为它所引用的对象。将此值分配给`intVal`实际上与在以下代码中分配`x`给没有什么不同：`intVal`

```
int intVal;
int x = 5;
intVal = x; 
```

正如我确定你理解的那样，`intVal`被赋予 的值`x`。这是由标准简单定义的：

> 在简单赋值 ( `=`) 中，表达式的值替换左操作数引用的对象的值。

根本不需要进行转换，因为运算符的两边都是相同的类型。

这和你的情况真的没有什么不同。你只有：

```
intVal = some_ref_to_int; 
```

`some_ref_to_int`表达式在哪里`foo()`。它是参考的事实并不重要。`intVal`接收引用表示的对象的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T00:30:38.240

赋值给`intVal`是标准中 5.17 [exp.ass] 中定义的*赋值表达式。**赋值表达式*的语法规则相当复杂，取决于其他几个语法规则，但基本上你需要在运算符左侧有一个可修改的左值，在右侧`=`有一个纯右值表达式。

如果是

```
intVal = foo(); 
```

RHS 上的表达式是 type 的左值`int`，因此会发生内置的左值到右值的转换......这几乎不是一种转换，因为值不会改变，类型也不会改变（除了基本类型 cv-qualifiers 被删除，所以如果左值是 type `const int`prvalue 将是 type `int`）。[conv.lval] 说

> 非函数、非数组类型的 glvalue (3.10)`T`可以转换为纯右值。[...] 如果`T`是非类类型，则纯右值的类型是`T`. 否则，纯右值的类型是`T`。[...]glvalue 指示的对象中包含的值是纯右值结果。

所以prvalue的类型`int`和值`foo()`与返回的引用绑定到的变量的值相同。

赋值表达式的规则说：

> 在简单赋值 ( `=`) 中，表达式的值替换左操作数引用的对象的值。

所以 的值`intVal`将被prvalue的值代替。规则继续：

> 如果左操作数不是类类型，则表达式被隐式转换（第 4 条）为左操作数的 cv 非限定类型。

因此，因为`int`不是类类型（因此没有重载`operator=`，它只使用内置的赋值运算符），赋值会将 RHS 转换为`int`，这是它在您的情况下已经具有的类型。

所以 的值`intVal`被设置为prvalue的值，我们说的就是glvalue表达式`foo()`的值，即引用绑定到的变量的值。

请注意，左值到右值的转换与 RHS 作为参考无关。同样的事情发生在这里：

```
int val = 0;
intVal = val; 
```

`val`是类型的左值，`int`因此它被转换为类型的纯右`int`值，并且 的值`intVal`被设置为该纯右值的值。

规则是根据表达式的“值类别”（即左值或右值）来表达的，而不是它是否是引用。为了实现所需的行为，编译器会隐式且不可见地对所需的引用进行任何“取消引用”。

# actionscript-3 - 在本地加载大型视频，特别是在 chrome 中

> ID：13981998
> 
> 赞同：0
> 
> 时间：2012-12-20T23:10:20.113
> 
> 标签：actionscript-3, google-chrome, osmf

我有一个 960x540、1000kbps 和 30 分钟长的 h264 mp4 视频。这将在光盘上播放。我**只**在 chrome 中注意到，当我打开它嵌入的网页时，我的电脑速度变慢了，视频每次都会断断续续 5 秒钟……几乎就像它正在加载整个资源一样。

我测试了在 IE9 和 Firefox 中播放该文件，当我第一次打开它时，它们似乎可以正常播放。我真的希望 chrome 放弃他们的 flash 版本，而只使用所有其他浏览器使用的插件版本。我喜欢 chrome，但这是不可接受的。

我正在寻找解决此资源加载问题的方法。需要注意的是，我正在使用 OSMF 框架并使用简单`MediaPlayerSprite`的方式来显示视频。无论如何都不是重量级元素。谢谢。