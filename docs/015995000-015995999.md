# StackOverflow 问答 15995000-15995999

# c - 为什么下面的C程序编译没有错误？

> ID：15995003
> 
> 赞同：0
> 
> 时间：2013-04-14T02:09:26.150
> 
> 标签：c

我的程序如下

```
#include <stdio.h>

int getTriangle(num) {
    if (num == 1) {
        return num;
    } else {
        return num + getTriangle(num - 1);
    }

}

int main() 
{
    int tri = getTriangle(7);
    printf("%i\n", tri);
    return 0;
} 
```

我无意中犯了一个错误，因为我没有在函数 getTriangle 中声明 num 的类型。换句话说，该行应为：

```
int getTriangle(int num) { 
```

但是当我编译

```
make euler012
cc     euler012.c   -o euler012 
```

并运行

```
./euler012
28 
```

一切看起来都很好。这不应该在某处产生错误或警告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T02:10:47.170

在 C89 和准标准 C 中，如果您没有指定类型，`int`则假定为。

另请参阅[为什么删除`int`关键字不会产生任何错误？](https://stackoverflow.com/questions/15980287/why-doesnt-the-removal-of-int-keyword-in-generate-any-error-in-following-code/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:10:49.603

当我在打开警告的情况下编译时，`gcc`我看到了这个警告：

```
warning: type of 'num' defaults to 'int' [enabled by default]
   int getTriangle(num) { 
```

我使用的标志是`-Wall -W -pedantic`. 从长远来看，默认打开警告将为您节省很多问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T02:16:43.987

尝试使用“gcc -std=c99 triangle.c”它会产生一个警告。

# c++ - 重载中的析构函数问题= STATUS_ACCESS_VIOLATION

> ID：15995004
> 
> 赞同：0
> 
> 时间：2013-04-14T02:09:35.490
> 
> 标签：c++, pointers, memory-management, destructor

我需要重载`=`才能对我的类的实例进行深度复制。在我尝试将大量随机数据设置为输入之前，它工作得很好。然后我收到这条消息：

> 例外： STATUS_ACCESS_VIOLATION at eip=004042F3 然后它打印出堆栈..

我假设，我需要在复制之前删除数组中的值，但是我不知道它应该是什么样子。我试过这个：

```
 for (int i = 0; i != position-1; i++) {
    for (int j=0;j!=db[i]->position-1;j++)
        delete &db[i]->change[j];
    delete db[i];
}
delete[] db;
db = new DbPerson*[other.size]; 
```

，但它变得更糟，程序更早以失败告终..

以下是使用过的组件的声明：

```
int size;
int position;
DbPerson** db;

...

class DbChange {
public:
DbChange();
const char* date;
const char* street;
const char* city;
};

DbChange::DbChange() {
date = "";
street = "";
city = "";
}

class DbPerson {
public:
DbPerson(void);
const char* id;
const char* name;
const char* surname;
DbChange * change;
int position;
int size;
};

DbPerson::DbPerson() {
position = 0;
size = 1;
change = new DbChange[1];
} 
```

当没有足够的空间时，所有数组都可以调整大小，并且保存在其中的项目的实际数量保存在`position`变量中。请不要建议我使用`Vector`or `string`，因为我不允许使用它们。我敢肯定，`=`成功重载的函数会结束，并且在尝试完成分配时会打印出此错误消息。

如果有人可以告诉我，析构函数应该是什么样子，我会很高兴，因为我已经尝试解决这个问题几个小时但没有任何成功:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:07:59.390

您不需要在DbPerson 的每个对象中**预先删除**DbChange。您可以在 DbPerson 中调用 DbChange 的析构函数。

看一看：

```
class DbChange
{
public:
     const char* id;
     const char* Name;

     DbChange(): id(""), Name("")
     {}

     ~DbChange()
     {
         delete [] id;
         delete [] Name;
     }
 };

class DbPerson
{
 public:
    const char* id;
    const char* name;
    const char* surname;
    DbChange * change;
    int position;
    int size;

    DbPerson(): id(""), name(""), surname(""), position(0), size(1)
    {
        change = new DbChange[1];
    }

    void SHOW(void) const
    {
        cout << "Name:      " << name << endl
             << "Surname:   " << surname << endl
             << "position:  " << position << endl;
    }

    ~DbPerson()
    {
        delete [] change; // Calling Destructor for DbChange
        delete [] id;
        delete [] name;
        delete [] surname;
    }
};

int main()
{
    const int global_size_of_DbPerson = 10;
    DbPerson** db;
    db = new DbPerson* [global_size_of_DbPerson];

    for(int i = 0; i < global_size_of_DbPerson; i++)
    {
        db[i] = new DbPerson [global_size_of_DbPerson];
    }

    for(int i = 0; i < global_size_of_DbPerson; i++)
    {
        delete [] db[i];
    }

    cout << "It Worked\n";
    delete [] db;

    return 0;
} 
```

# html5-canvas - 如何根据用户输入调整画布容器？

> ID：15995008
> 
> 赞同：0
> 
> 时间：2013-04-14T02:09:51.533
> 
> 标签：html5-canvas

我有一个带有一些工具的画布，它在一个 div 中。如何根据用户输入的画布宽度和高度自动调整 div？

```
<div id="container">
    <canvas id="theCanvas" width="<?php echo $_POST['inputwidth'] ?>" height="<?php echo $_POST['inputheight'] ?>"></canvas>
<div class="tools">
<span class="icon"> 
    <button id="brushTool"></button>
</span>
</div>
</div> 
```

我试过设置 min-height 和 min-width 但没有用。容器的边框跟随浏览器的大小。如果我将最大高度/宽度设置为 php + 一定的边距，是否有可能？多谢你们！=)

```
#container{
    border-right: dotted black 5px;
    border-left: dotted black 5px;
    border-top: dotted black 5px;
    border-bottom: dotted black 5px;
    margin: auto;
}

#theCanvas {
    border: solid black 5px;
    border-radius: 10px;
    background: #ffffff;
    margin-left: 20%;
    margin-top: 20px;
    margin-bottom: 20px;
    cursor: crosshair;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T16:29:52.227

很抱歉这么久才回复，希望您已经找到答案。

一旦您知道画布的宽度和高度（以像素为单位），您就可以使用

```
CVW=document.getElementById("theCanvas").width;
CVH=document.getElementById("theCanvas").height;

CNW=CVW/0.6 //(for a 20% left and right margin given to the canvas)
CNH=CVH+40  //(for a 20px top and bottom margin given to the canvas)
document.getElementById("container").style.width=CNW+"px";
document.getElementById("container").style.height=CNH+"px"; 
```

您需要将它放在一个函数中，并且只有在您知道画布的宽度和高度时才调用它。

请注意，容器的宽度和高度是使用 css 样式设置的，但不是为画布设置的。

下面是一个完整的简化版本

```
<html>
    <head>
        <style>
            #container{
                border-right: dotted black 5px;
                border-left: dotted black 5px;
                border-top: dotted black 5px;
                border-bottom: dotted black 5px;
                margin: auto;
            }

            #theCanvas {
                border: solid black 5px;
                border-radius: 10px;
                background: #ffffff;
                margin-left: 20%;
                margin-top: 20px;
                margin-bottom: 20px;
                cursor: crosshair;
            }
        </style>
        <script>

            function set() {
                CVW=document.getElementById("theCanvas").width;
                CVH=document.getElementById("theCanvas").height;

                CNW=CVW/0.6; //(for a 20% left and right margin given to the canvas)
                CNH=CVH+40;  //(for a 20px top and bottom margin given to the canvas)
                document.getElementById("container").style.width=CNW+"px";
                document.getElementById("container").style.height=CNH+"px";
            }
        </script>
    </head>
    <body onload="set()">
        <div id="container">
            <canvas id="theCanvas" width=200 height="300"></canvas>
        </div>
    </body>
</html> 
```

# php - Travis CI 中的 PHP YAML 问题

> ID：15995009
> 
> 赞同：3
> 
> 时间：2013-04-14T02:09:56.010
> 
> 标签：php, yaml, pecl, travis-ci

编辑：我认为问题在于 YAML 在 5.4/5.5 上不起作用。

我有一个在 Travis CI 中设置并使用 PHP YAML PECL 扩展的库。但是，我无法让 YAML 扩展在 Travis 和 PHP 5.4 中工作，我很好奇其他人有吗？再多的谷歌搜索也没有解决我的问题。

这是特拉维斯的输出：

```
$ git clone --depth=50 --branch="master" git://github.com/titon/IO.git titon/IO

Cloning into 'titon/IO'...

remote: Counting objects: 531, done.

remote: Compressing objects: 100% (256/256), done.

remote: Total 531 (delta 267), reused 460 (delta 196)

Receiving objects: 100% (531/531), 79.41 KiB, done.

Resolving deltas: 100% (267/267), done.

$ cd titon/IO
git.2

$ git checkout -qf 3940a6673413da224eeaaebbc6a98167e4feda38

$ phpenv global 5.4

$ php --version

PHP 5.4.13 (cli) (built: Mar 31 2013 06:18:12)

Copyright (c) 1997-2013 The PHP Group

Zend Engine v2.4.0, Copyright (c) 1998-2013 Zend Technologies

with Xdebug v2.2.1, Copyright (c) 2002-2012, by Derick Rethans
before_script.1

$ sudo apt-get install libyaml-dev

Reading package lists... Done

Building dependency tree

Reading state information... Done

libyaml-dev is already the newest version.

0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.

$ pecl install yaml

downloading yaml-1.1.0.tgz ...

Starting to download yaml-1.1.0.tgz (35,916 bytes)

..........done: 35,916 bytes

9 source files, building

WARNING: php_bin /home/travis/.phpenv/versions/5.4.13/bin/php appears to have a prefix ., but config variable php_prefix does not match

WARNING: php_bin /home/travis/.phpenv/versions/5.4.13/bin/php appears to have a suffix env/versions/5.4.13/bin/php, but config variable php_suffix does not match

running: phpize

Configuring for:

PHP Api Version: 20100412

Zend Module Api No: 20100525

Zend Extension Api No: 220100525

Please provide the prefix of libyaml installation [autodetect] : (Waits until it times out) 
```

有问题的 travis.yml：[https ://github.com/titon/IO/blob/master/.travis.yml](https://github.com/titon/IO/blob/master/.travis.yml)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-23T05:32:37.093

自动化 PECL 安装是一个不仅在 Travis CI 上遇到的问题。`expect`在这种情况下，可以通过将回车发送到 PECL 安装程序的标准输入来创建伪脚本，然后将其传递给提示输入的配置脚本：

```
printf "\n" | pecl install yaml 
```

您的 .travis.yml 的工作版本将如下所示：

```
language: php

php:
  - 5.4
  - 5.5

before_script:
  - printf "\n" | pecl install yaml-beta
  - echo "extension=yaml.so" >> ~/.phpenv/versions/$(phpenv version-name)/etc/php.ini
  - composer install --dev

notifications:
  email: false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-18T20:01:39.610

**.travis.ci**

```
language: php

php:
  - 5.4
  - 5.5
  - 5.6

sudo:
  false

before_install:
  - pecl channel-update pecl.php.net
  - (CFLAGS="-O1 -g3 -fno-strict-aliasing"; pecl install yaml < /dev/null &)

addons:
  apt:
    packages:
      - libyaml-dev 
```

# ios - UITableview中UIScrollView的高度比表格高度短

> ID：15995011
> 
> 赞同：0
> 
> 时间：2013-04-14T02:10:23.403
> 
> 标签：ios, objective-c, uitableview, uiscrollview

我有一个非常标准`UITableView`的只有 1 个部分。我的问题是`UIScrollView`（`UITableView`继承的）的长度似乎比表本身短。我的表格按应有的方式加载并显示数据，如下所示：

![](https://i.stack.imgur.com/fK9Kq.png)

然而，当我滚动到底部时，右侧的滚动条显示的滚动视图高度不正确。滚动条`UITableView`在 开始收缩的地方停止滚动大约一半。它到达了数据的底部，但是我想去掉表格底部的不必要的空格，如下所示：

![](https://i.stack.imgur.com/CYNSh.png)

该表非常标准，因为我使用的是字幕样式表视图单元格。因此，我没有实施`heightForRowAtIndexPath`. 我使用的是自定义字体，但即使我把它拿出来，我也会得到相同的结果。所以我不确定为什么会这样？

这个类非常简单。我正在实施的唯一方法是：

```
-(void)viewDidLoad
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath { 
```

**编辑**我现在意识到，在我做出选择然后在导航栏上重新选择后，表格会正常显示。在导航栏上回击时会调用一些东西来修复它，我不知道它是什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T07:04:15.760

您的表格视图在底部有那个空格，因为它`contentInset.bottom`大于零。

内容插入非零，因为`UITableViewController`当键盘显示时，会自动将内容插入设置为键盘的高度。这允许用户访问所有表格视图的单元格，而不是将底部单元格隐藏在键盘下。阅读[*适用于 iOS 的文本、Web 和编辑编程指南中*](http://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)[的“移动位于键盘下的内容”以](http://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)*了解详细信息。*

 *由于当您对 table view 控制器执行 segue 时键盘（我假设）消失了，我认为这种行为是 UIKit 中的一个错误。正如您所发现的，解决方法是确保在执行对​​ table view 控制器的 segue 之前告诉第一响应者辞职。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:06:48.613

您是否尝试过为您的 tableview 关闭 autoresizesSubviews？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T20:00:06.803

正如@robmayoff 所指出的，`contentInset.bottom`有一个非零值，使滚动视图`UITableView`关闭。我不确定这是在哪里改变的。我检查了`viewDidLoad`和中的值`viewDidAppear`。`viewDidLoad`显示值为零，而`viewDidAppear`显示值非零。

我为解决这个问题所做的只是实施`viewDidAppear`。该方法完全空白，并且`contentInset.bottom`正在正确设置。很奇怪......但它的工作原理。*

# c - 为什么 C 数组会“环绕”

> ID：15995014
> 
> 赞同：0
> 
> 时间：2013-04-14T02:11:35.133
> 
> 标签：c

我最近开始用 C 编程，我注意到，有时，当我不小心将数组指向“-1”时，数组会转到最后一个元素。为什么会这样？

编辑：作为一个例子，我正在建立一个森林火灾模型，有时，当森林边缘有一棵燃烧的树时，森林的另一边会弹出新的燃烧树，而不会抛出任何错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T02:12:46.803

这是**未定义的行为**。
编译器允许[恶魔飞出你的鼻子](http://www.catb.org/jargon/html/N/nasal-demons.html)。

在实践中，这通常会在数组之前访问内存，这可能会崩溃。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:17:09.643

他们没有。只是 C 不会检查您是否正在走出数组；当你这样做时，结果是不可预测的。看看[这个网站](http://www.lysator.liu.se/c)，看看链接的教程（旧的，但很好）。还有一个关于 C 中指针和数组的教程的链接。

C 是一种为实现最佳性能而设计的语言，因此假定程序员确切地知道自己在做什么。没有训练轮，没有安全网。当你习惯了这一点时，你就会得到解脱；可怕到那时。坚持下去，*了解*正在发生的事情，然后玩得开心。

# ruby - 在 Ruby 中打开并保存 base64 编码的图像数据 URI

> ID：15995015
> 
> 赞同：13
> 
> 时间：2013-04-14T02:11:52.800
> 
> 标签：ruby, file, base64

从我看过的几篇文章中，我正在尝试这个

```
x = Base64.decode64("data:image/png;base64,iVBOR....")
File.open('test.png','wb') {|file| file.write x} 
```

但是我无法用查看器打开图像，我需要做更多的事情吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-14T02:59:43.080

您的问题是您正在尝试将`'data:image/png;base64,'`前缀解码为 Base64 数据；该前缀是完全有效的 Base64 数据，但它不是 PNG 文件的 Base64 表示。结果是您的`test.png`文件包含一堆废话，后面跟着一些实际上是 PNG 文件的位。在解码 PNG 之前去掉数据 URL 前缀：

```
data_url = "data:image/png;base64,iVBOR...."
png      = Base64.decode64(data_url['data:image/png;base64,'.length .. -1])
File.open('test.png', 'wb') { |f| f.write(png) } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-20T00:54:01.887

mu_is_too_short 答案非常接近，但它假设 base64 流将包含 PNG 数据。情况并非总是如此，因此我建议使用 mime 类型库来建立正确的文件扩展名：

```
REGEXP = /\Adata:([-\w]+\/[-\w\+\.]+)?;base64,(.*)/m

data_uri_parts = data_url.match(REGEXP) || []
extension = MIME::Types[data_uri_parts[1]].first.preferred_extension
file_name = "myfilename.#{extension}"

File.open(file_name, 'wb') do |file|
    file.write(Base64.decode64(data_uri_parts[2]))
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-12T21:33:22.867

除了使用 a `Regexp`，您还可以使用简单的[String#index](https://ruby-doc.org/core-2.3.0/String.html#method-i-index)方法。

> 返回给定子字符串或模式 (regexp) 在 str中**第一次**出现的索引。如果没有找到则返回 nil。

如果您有一个相当健全的数据源（例如`.toDataURL()`a 上的JavaScript `canvas`），您可以相信常见的 mimetype 不会包含逗号这一事实。

```
dataURL = "data:image/png;base64,iVBOR...."
start = dataURL.index(',') + 1                   # .index used here
x = Base64.decode64 dataURL[start..-1]
File.open('test.png','wb') {|file| file.write x} 
```

如果您正在处理自由格式的用户文件上传，请注意一些不常见的 mime 类型确实包含逗号（例如：）`text/x-java-source,java`。您可以使用更保守的：

```
start = dataURL.index(';base64,') + 8 
```

如果你不知道你是否有无前缀 base64 或数据 URL base64，你可以使用`#index`作为测试：

```
start = dataURL.index ';base64,'
dataURL = dataURL[(start+8)..-1] if start
x = Base64.decode64 dataURL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-01T18:59:39.243

这是一个关于如何打开base64图像的小脚本，当我有base64文本时，vacio.txt是文件。

```
require 'base64'
entry="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQE....."
File.open("vacio.txt","r") do |fichero|
 while linea=fichero.gets
  regex=/(data:image\/\D*\d*,)/
  m=regex.match(linea)
  png=Base64.decode64(linea[m.to_s.length .. -1])
  File.open('test.jpeg','wb'){|f|f.write(png)}
 end
end 
```

# java - 如何制作变色窗？

> ID：15995016
> 
> 赞同：-1
> 
> 时间：2013-04-14T02:12:14.647
> 
> 标签：java, swing

好的，所以我的家庭作业有问题。我正在尝试创建一个显示所选颜色的窗口，然后在其下方有一个组合框，其中包含各种颜色。但我不知道从哪里开始。我不能在这里发布它的图像，因为我的代表点太低了。所以我会在这里画一个小图。

```
-----------------
 --------------
||             ||
||             ||
||             ||
 --------------
-----------------
      [GREEN]^ 
```

谁能帮我？

好的，尝试从我读过的内容中解决这个问题并提出这个问题，但它并没有变成我想要的。我得到了组合框，但颜色并没有像我想要的那样显示。有人能帮忙吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JFrame;

    class Colors extends JFrame implements ItemListener

    {
    Choice chooseColor = new Choice();
    Label lblQts = new Label("Choose color you like : ");

    public Colors(String title)
    {
    super(title);
    setLayout(new FlowLayout());
    chooseColor.addItem("red");
    chooseColor.addItem("green");
    chooseColor.addItem("blue");

    add(lblQts);
    add(chooseColor);

    chooseColor.addItemListener(this);
    }   

    public void itemStateChanged(ItemEvent e)
    {   
    String c;
    Color color;
    c = chooseColor.getSelectedItem();
    color=Color.getColor(c);

    setBackground(color);
    }

    }

public static void main(String[] args)
    {

        Colors objColor = new Colors("Color Chooser");
        objColor.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        objColor.setSize(400,400);
        objColor.setVisible(true);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:23:27.047

首先阅读 Swing 教程中关于[如何使用组合框](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)的部分。您可以将 Color 对象添加到组合框，然后创建自定义渲染器来显示颜色。

然后，您可以将 ActionListener 添加到组合框中。本教程还有一个关于`"How to Write an Action Listener"`. 当侦听器触发时，您可以使用所选颜色更改组件的背景。

# jquery - jQuery 验证无法正常工作

> ID：15995017
> 
> 赞同：3
> 
> 时间：2013-04-14T02:12:24.060
> 
> 标签：jquery, jquery-validate

我需要在单击 div 按钮时触发此验证。如果验证成功，我希望它提醒“很好”。

不幸的是，尽管验证会触发并检查所有规则，但如果必填字段为空，它不会出错。其他任何检查都会出错。

最后，如果我正确填写字段并单击按钮，则没有任何反应。

JS：

```
$(document).ready(function() {

// Submit prompted password reset
$("#passwordResetButton").click(function() {

    $("#passwordResetForm").validate({  
        rules: {
            password: { required: true, minlength: 8, maxlength: 40, remote: { url: "/ajax/isPasswordOK", data: { product: function() { return $("#password").val();  } } } },
            confirmPassword: { required: true, equalTo: "#password" },
        }, 
        messages: { 
            password: { required: "Please enter a password", minlength: "Password must be at least 8 characters long", remote: "Password should contain: <li>At least one upper case character <li>At least one lower case character <li>At least one number <li>And may not contain any of the following: \\;-\")(&*='|$" },
            confirmPassword: { required: "Please confirm your password", equalTo: "The passwords do not match" },
          }, 
        onkeyup: false, //turn off auto validate whilst typing
        onblur: true,
        afterValidation: function() {
            alert('is good');
        }
    });
});
}); 
```

HTML：

```
<form id="passwordResetForm" style="width: 480px; margin: auto;">
        <div class="row"><p class="lead">Let's reset that password</p></div>
        <div class="row">
            <div class="small-8 large-4 columns"><label>New Password:</label></div>
            <div class="small-12 large-6 columns"><input name="password" id="password" type="password" size="20"/></div>
        </div>
        <div class="row">
            <div class="small-8 large-4 columns"><label>Confirm Password:</label></div>
            <div class="small-12 large-6 columns"><input name="confirmPassword" id="confirmPassword" type="password" size="20"/></div>
        </div>
        <div class="row">
            <div class="large-offset-10 small-3 large-1 columns">
                <div id="passwordResetButton"  class="small button">Submit</div>
            </div>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-14T14:53:31.423

您的代码存在一些问题。

**1**） `.validate()`是插件的***初始化***方法，不是测试表单的方法。换句话说，不要将它放在`click`处理程序中，否则当你需要它时它不会准备好。放置`.validate()`在 DOM 就绪事件处理程序中，以便在创建页面时触发一次，然后表单立即准备好进行验证。

**2** ) 这个插件没有这样`onblur`的选项。它被调用`onfocusout`并且默认情况下该选项已被激活。 [将此类型的选项设置`true`为无效](http://jqueryvalidation.org/validate#onfocusout)并且可能会破坏某些内容，因此只需将其完全排除在初始化之外。

**3**）没有这样的选项/功能称为`afterValidation:`。你不能只是“发明”回调函数...... jQuery 插件必须已经将这些东西[专门内置到其中](http://docs.jquery.com/Plugins/Validation/validate#toptions)。如果您想在有效表单上触发某些内容，请使用提供的`submitHandler:`回调函数。

```
submitHandler: function (form) {
    alert('is good');
    return false;
} 
```

**4** ) 使用 a`<input type="submit" />`或 a`<button type="submit">Submit</button>`提交表单。这样，插件可以自动捕获点击事件并按设计处理提交。

**5** ) 小提示：对于您的自定义消息，只需使用`{0}`，规则的参数将自动插入。这种代码更容易维护。

```
minlength: "Password must be at least {0} characters long", 
```

**工作演示：http: [//jsfiddle.net/J9N3g/](http://jsfiddle.net/J9N3g/)**

我建议您在这里查看完整的文档：http: [//docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

**jQuery** :

```
$(document).ready(function () {

    $("#passwordResetForm").validate({
        rules: {
            password: {
                required: true,
                minlength: 8,
                maxlength: 40,
                remote: {
                    url: "/ajax/isPasswordOK",
                    data: {
                        product: function () {
                            return $("#password").val();
                        }
                    }
                }
            },
            confirmPassword: {
                required: true,
                equalTo: "#password"
            },
        },
        messages: {
            password: {
                required: "Please enter a password",
                minlength: "Password must be at least {0} characters long",
                remote: "Password should contain: <li>At least one upper case character <li>At least one lower case character <li>At least one number <li>And may not contain any of the following: \\;-\")(&*='|$"
            },
            confirmPassword: {
                required: "Please confirm your password",
                equalTo: "The passwords do not match"
            },
        },
        onkeyup: false, //turn off auto validate whilst typing
        submitHandler: function (form) {
            alert('is good');
            return false;
        }
    });

}); 
```

**HTML**：

```
<form id="passwordResetForm" style="width: 480px; margin: auto;">
    <div class="row">
        <p class="lead">Let's reset that password</p>
    </div>
    <div class="row">
        <div class="small-8 large-4 columns">
            <label>New Password:</label>
        </div>
        <div class="small-12 large-6 columns">
            <input name="password" id="password" type="password" size="20" />
        </div>
    </div>
    <div class="row">
        <div class="small-8 large-4 columns">
            <label>Confirm Password:</label>
        </div>
        <div class="small-12 large-6 columns">
            <input name="confirmPassword" id="confirmPassword" type="password" size="20" />
        </div>
    </div>
    <div class="row">
        <div class="large-offset-10 small-3 large-1 columns">
            <input type="submit" id="passwordResetButton" class="small button" />
        </div>
    </div>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:33:05.010

改成

```
afterValidation: function() {
            alert('is good');
        } 
```

至

```
submitHandler: function() { alert("is good!") }: 
```

请参阅 jquery 验证选项：[http ://docs.jquery.com/Plugins/Validation/validate](http://docs.jquery.com/Plugins/Validation/validate)

将 div 更改为按钮，这是一个最佳实践

```
<div id="passwordResetButton"  class="small button">Submit</div> 
```

至

```
<button id="passwordResetButton"  class="small button">Submit</button> 
```

# objective-c - 如何使用 NSNumberFormatter 修改数字？

> ID：15995018
> 
> 赞同：0
> 
> 时间：2013-04-14T02:12:45.953
> 
> 标签：objective-c, numbers, numberformatter

我有如下价值观：

```
5.1M (5100000)
80M (80000000)
300.5M (300500000)

5K (5000)
2000K (2000000)
200.5K (200500) 
```

（我需要将它们转换成的值在数字后面的括号中）。

基本上，一个数字可以有小数点或没有小数点，可以以 K（千）或 M（百万）结尾，但仅当它是整数时（即 0.5M 需要为 500000；没有逗号）。

我还需要能够将数字转换回其原始形式。

我该怎么做，最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:23:30.363

不久前，我编写并开源了一个名为 SQSMetricFormatter ( [https://github.com/shultzc/SQSMetricFormatter](https://github.com/shultzc/SQSMetricFormatter) ) 的自定义 NSNumberFormatter，它使用公制前缀格式化数字。

它可能会满足您的需求，或者至少为实现您自己的解决方案提供一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:30:49.577

所以你是说你有一个以数字开头并以 K 或 M 结尾的 NSString？你想看看它是由什么组成的，然后把它转换成一个实际的数值？这是 NSScanner 的工作。

不过，老实说，NSScanner 早在正则表达式在 Objective-C 中可用之前就已经存在了。现在我可能只使用 NSRegularExpression。

或者，如果您知道它*确实**是*一个后跟 K 或 M 的数字，那么您甚至不必这样做。只需将最后一个字符从末尾拉出即可。那是K或M，你现在知道它是什么了。剩下的是一个数字字符串，您可以将其转换为数字。

伪代码（未测试）：

```
NSString* s = @"5.1M";
NSUInteger len = s.length;
NSString* numPart = [s substringToIndex: len-2];
NSString* unitPart = [s substringFromIndex: len-1];
int multiplier = 1000;
if ([unitPart isEqualToString: @"M"])
    multiplier = 1000000;
float result = numPart.floatValue * multiplier; 
```

# c++ - C++“访问冲突读取位置”错误

> ID：15995021
> 
> 赞同：7
> 
> 时间：2013-04-14T02:12:47.753
> 
> 标签：c++

我在一个类中有以下`Vertex`结构：`Graph`

```
struct Vertex
{
    string country;
    string city;
    double lon;
    double lat;
    vector<edge> *adj;

    Vertex(string country, string city, double lon, double lat)
    {
        this->country = country;
        this->city = city;
        this->lon = lon;
        this->lat = lat;
        this->adj = new vector<edge>();
    }
}; 
```

调用我编写的方法时`getCost()`，我不断收到相同的未处理异常

> 访问冲突读取位置 0x00000048

我不知道为什么。

`getCost()`方法：

```
void Graph::getCost(string from, string to)
{

    Vertex *f = (findvertex(from));
    vector<edge> *v = f->adj;     // Here is where it gives the error
    vector<edge>::iterator itr = v->begin();

    for (; itr != v->end(); itr++)
    {
        if (((*itr).dest)->city == to)
            cout << "\nCost:-" << (*itr).cost;
    }
} 
```

该方法`findvertex()`返回一个类型的值`Vertex*`。为什么我不断收到此错误？

findVertex 方法：

```
Vertex* Graph::findvertex(string s)
{
    vmap::iterator itr = map1.begin();
    while (itr != map1.end())
    {
        if (itr->first == s){

            return itr->second;
        }
        itr++;
    }
    return NULL;
} 
```

在哪里`map1`定义：

```
typedef map< string, Vertex *, less<string> > vmap;
vmap map1; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T02:20:58.480

您还没有发布该`findvertex`方法，但是带有偏移量的访问读取冲突`0x00000048`意味着`Vertex* f;`您的 getCost 函数中的 正在接收 null，并且当尝试访问Vertex 指针`adj`中的成员`null`（即 in `f`）时，它会偏移到`adj`(在这种情况下，72 字节（十进制的 0x48 字节）），它在`0`或`null`内存地址附近读取。

像这样进行读取违反了受操作系统保护的内存，更重要的是，这意味着您指向的任何内容都不是有效的指针。确保`findvertex`没有返回 null，或者`f`在使用它之前对 null 进行比较以保持自己的理智（或使用断言）：

`assert( f != null ); // A good sanity check`

**编辑：**

如果你有一个`map`for 做类似查找的事情，你可以使用地图的[`find`](http://en.cppreference.com/w/cpp/container/map/find)方法来确保顶点存在：

```
Vertex* Graph::findvertex(string s)
{
    vmap::iterator itr = map1.find( s );
    if ( itr == map1.end() )
    {
        return NULL;
    }
    return itr->second;
} 
```

只要确保你仍然小心处理它返回的错误情况`NULL`。否则，您将不断收到此访问冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:20:03.117

```
Vertex *f=(findvertex(from));
if(!f) {
    cerr << "vertex not found" << endl;
    exit(1) // or return;
} 
```

因为如果找不到顶点`findVertex`可以返回。`NULL`

否则这`f->adj;`是试图做的

```
NULL->adj; 
```

这会导致访问冲突。

# system - MIPS 跳转问题

> ID：15995023
> 
> 赞同：0
> 
> 时间：2013-04-14T02:13:18.220
> 
> 标签：system, call, mips

我还是 MIPS 的新手，我对出了什么问题感到困惑。我在 QTSimp 中进行测试。它告诉我“未知系统调用：-1000”。我对出了什么问题感到有些困惑。我在控制台中使用 -1000 跳转到 op 来设置我的操作数（构建一个简单的整数计算器）。

```
li $s7, 5   #Read a Character AS A INT and store in $s7
syscall

#Load values for each:
li $t0, 43 #Addition
li $t1, 45 #Subtraction
li $t2, 42 #Multiplication
li $t3, 47 #Division

#if $s7 is equal to any of these, then jump back to the main loop and wait for a second operand
beq $s7, $t0, loop #ADD
beq $s7, $t1, loop #SUB
beq $s7, $t2, loop #MULTI
beq $s7, $t3, loop #DIV

la $a0, error #Load error message
j ra 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:32:19.943

您是否有 Qtspim 应该解释的标头 就像通常的 C 代码具有该功能一样`main`？

这是 MIPS 标头。

```
.globl main # Make main global so you can refer to
# it by name in QtSPIM.

.text # This line tells the computer this is the
# text section of the program
# (No data contained here).

main: # Program actually starts here.
// your code

ori $v0, $0, 10 # Sets $v0 to "10" so when syscall is executed, program will exit.
syscall # Exit. 
```

所以，你的代码应该是：

```
.globl main # Make main global so you can refer to
# it by name in QtSPIM.

.text # This line tells the computer this is the
# text section of the program
# (No data contained here).

main: # Program actually starts here.
li $s7, 5   #Read a Character AS A INT and store in $s7

#Load values for each:
li $t0, 43 #Addition
li $t1, 45 #Subtraction
li $t2, 42 #Multiplication
li $t3, 47 #Division

#if $s7 is equal to any of these, then jump back to the main loop and wait for a second operand
beq $s7, $t0, loop #ADD
beq $s7, $t1, loop #SUB
beq $s7, $t2, loop #MULTI
beq $s7, $t3, loop #DIV

la $a0, error #Load error message
j ra

ori $v0, $0, 10 # Sets $v0 to "10" so when syscall is executed, program will exit.
syscall # Exit. 
```

# ios - 协议的文件名应该与定义中的协议名相同吗？

> ID：15995025
> 
> 赞同：0
> 
> 时间：2013-04-14T02:13:54.007
> 
> 标签：ios, objective-c

我正在学习IOS开发，找到了一个协议文件，它是“ElementsDataSourceProtocol.h”，而这个文件中定义的协议名称是“ElementsDataSource”。作为这个事实，我认为协议的文件名可以与协议名不同。但是任何人都可以对此给出相同的详细解释吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:27:08.830

是的，协议可以与文件名不同。对运行时重要的实际名称是协议声明上的名称。当编译器试图找到声明时，文件名对编译器很重要。保持名称的一致性是一个很好的做法，因为在协议名称的标头或相关文件中（UITableView 在其标头中有 UITableViewDelegate 和 UITableViewDatasource）查找协议定义会更直观。

# c++ - 如何将 ProductReturnType 转换为矩阵？

> ID：15995028
> 
> 赞同：1
> 
> 时间：2013-04-14T02:14:27.083
> 
> 标签：c++, eigen

我正在使用 C++ 线性代数库 eigen。我试图将2个矩阵相乘：

```
static void do_stuff_with_matrix(Eigen::MatrixXf& mat) {
  return;
}

Eigen::MatrixXf a(3, 4);
Eigen::MatrixXf b(4, 5);

Eigen::MatrixXf c = a * b;
do_stuff_with_matrix(c); 
```

不幸的是，我收到一个编译器错误，指出`ProductReturnType`（即`c`）无法转换为`Eigen::MatrixXf&`. 如何执行此转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:07:38.807

Eigen 使用惰性求值来防止不必要的临时性和其他事情。结果`c`本质上是一个[`ProductReturnType`](http://eigen.tuxfamily.org/dox-devel/structEigen_1_1ProductReturnType.html)，一个矩阵乘积的优化结构：

> ```
> template<typename Lhs, typename Rhs, int ProductType>
> class Eigen::ProductReturnType< Lhs, Rhs, ProductType > 
> ```
> 
> 帮助类来获取正确和优化的返回类型`operator*`。[另见[2](http://eigen.tuxfamily.org/dox-devel/classEigen_1_1MatrixBase.html#adf2ccabec2f82b36f445e9c7f58c9080) ]

为了从表单的表达式创建一个实矩阵，`A * B`您需要直接对其求值：

```
Eigen::MatrixXf c = (a * b).eval();
do_stuff_with_matrix(c); 
```

有关 Eigen 的惰性求值和别名的更多信息，请参阅[此页面](http://eigen.tuxfamily.org/dox-devel/TopicLazyEvaluation.html)。

# css - div 中的 div 与父级的高度不同。为什么？

> ID：15995029
> 
> 赞同：0
> 
> 时间：2013-04-14T02:15:03.250
> 
> 标签：css

我有一个`class=main-content`高度为 100% 的 div。我创建了一个弹出表单，单击链接时会弹出该表单。理想情况下，此表单位于构成整个页面的 div 中。这样我可以使这个 div 的背景颜色为灰色，因此它为用户提供了外观，他无法在表单外单击。

然而，即使我将高度设置为 100%，弹出窗口的高度也与父级不同。为什么是这样？我认为高度应该是包含块的百分比。因此，它不应该与父母的高度相同吗？

请参阅下面的代码和屏幕截图。我正在使用引导程序，所以这可能是一个因素，尽管根据我的屏幕截图，似乎没有任何东西覆盖我的高度参数。

**编辑：**我应该提到我正在使用允许嵌套 CSS 的 SCSS。

这表明主要内容的高度设置为 100%，并且确实是全屏。 ![主要内容](https://i.stack.imgur.com/6CUML.png)

这表明覆盖弹出窗口的高度设置为 100%，但不是全屏。为什么？ ![叠加模态](https://i.stack.imgur.com/C5Cej.png)

这是我的 HTML 和我的 CSS：

```
<div class="main-content">
    <!--...the page without the modal goes here -->

   <!--modal starts --> 
    <div id='overlay'>
        <div id = 'modalpopout'>

        </div>
    </div>
   <!--modal ends-->
</div> 
```

CSS

```
.main-content{
height:100%;
padding:50px 0 40px 0;
}

#overlay {
 visibility: hidden;
 position: absolute;
 left: 0px;
 top: 0px;
 width:100%;
 height:100%; 
 text-align:center;
 z-index: 1000;
 background-color:rgba(105,105,105,0.8);
 #modalpopout {
     width:500px;
     margin: 100px auto;
     background-color: #fff;
     border:1px solid #000;
     padding:15px;
     text-align:center;

     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:32:02.487

尝试添加`position: relative;`到`.main-content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:19:15.403

您的 CSS 格式不正确。将#modalpopout CSS 移到#overlay的CSS**之外**。

```
.main-content{
height:100%;
padding:50px 0 40px 0;
}

#overlay {
 visibility: hidden;
 position: absolute;
 left: 0px;
 top: 0px;
 width:100%;
 height:100%; 
 text-align:center;
 z-index: 1000;
 background-color:rgba(105,105,105,0.8);

}

 #modalpopout {
     width:500px;
     margin: 100px auto;
     background-color: #fff;
     border:1px solid #000;
     padding:15px;
     text-align:center;

     } 
```

我不能说这是否会解决您的特定问题，但这是配置 CSS 的正确方法。

# javascript - Google Apps 脚本 - Gmail，永久删除带有特定标签的垃圾箱中的电子邮件

> ID：15995031
> 
> 赞同：17
> 
> 时间：2013-04-14T02:15:24.903
> 
> 标签：javascript, gmail, google-apps-script

我正在尝试制作一个脚本，该脚本可以立即永久地自动删除来自某个发件人的电子邮件，因为 Gmail 仅允许将电子邮件发送到垃圾箱 30 天的过滤器。请不要暗示默认过滤器就足够了，至于我的情况，至关重要的是我不知道我收到了来自该发件人的电子邮件。

我当前的脚本如下所示：

```
function deleteForever(labelName) {
    var threads = GmailApp.search("in:trash label:" + labelName);
    for (var i = 0; i < threads.length; i++) {
      threads[i].moveToTrash(); // Where I would need a delete forever trigger
    }
}; 
```

但是，我一直无法找到使用 GmailThread 并将其永久删除的方法，因为不存在用于此目的的功能。我想看看是否有一种方法可以使用 JavaScript 完成任务，但一直找不到方法。

有谁知道我如何将这些电子邮件设置为在收到时永久删除自己？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-06-13T22:05:48.183

@karan 的回答已经指出了对我有用的解决方案，但是由于缺乏经验/不是专业开发人员，我花了一些功夫将其转化为原始问题的可行解决方案。以下是我用来执行此任务的步骤的简明描述：

1.  在我的脚本中创建以下函数：

    ```
    function deleteForever(userId, labelName) {
      var threads = GmailApp.search("in:trash label:" + labelName);
      for (var i = 0; i < threads.length; i++) {
        Gmail.Users.Messages.remove(userId, threads[i].getId());
      }
    } 
    ```

2.  要为此脚本启用高级服务，`Resources`请在菜单上找到，然后选择`Advanced Google services...`

3.  启用`Gmail API`列表。

4.  选择之前`OK`，请单击`Google Developers Console`链接。搜索`gmail`，并在那里启用服务。

5.  完成，选择`OK`；该功能现在应该可以工作了。（评论：正如[@karan 提供的链接](https://developers.google.com/gmail/api/v1/reference/users/messages/delete)中提到的那样，可以使用`"me"`用户ID，或者提供自己的Gmail 地址：`"<address>@gmail.com"`。）

（为我的脚本启用高级服务的步骤基于[此处](https://developers.google.com/apps-script/guides/services/advanced#enabling_advanced_services)的 Google 指南。）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-14T04:46:02.927

根据设计，使用 GmailApp 永久删除电子邮件是不可能的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-13T11:21:04.330

此脚本适用于 Google Apps 脚本。您只需将服务连接在一起并进行身份验证。

```
function myFunction() {

  var labelName = "deleteForever"

  var threads = GmailApp.search("in:trash label:" + labelName);
  for (var i = 0; i < threads.length; i++) { 
    Gmail.Users.Messages.remove('me', threads[i].getId());
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-24T13:25:16.030

如果它对某人有帮助，则可以使用高级服务来完成。

[https://developers.google.com/gmail/api/v1/reference/users/messages/delete](https://developers.google.com/gmail/api/v1/reference/users/messages/delete)

高级服务中的方法是

`Gmail.Users.Messages.remove(userId, id)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-04T17:27:57.627

尝试这个

```
function delete_all_mail(){
var myspreadsheet = SpreadsheetApp.openById('1AG1fZ9BuS8***********');
var mysheet = myspreadsheet.getSheets()[0];
//0~500
var threads = GmailApp.getInboxThreads(0 , 500);
  for(var i = 0; i < threads.length; i++)
  {
   threads[i].moveToTrash();
  }
} 
```

# node.js - Heroku 上带有 Node.js 的 Socket.IO

> ID：15995033
> 
> 赞同：0
> 
> 时间：2013-04-14T02:16:07.347
> 
> 标签：node.js, heroku, socket.io

我用 node.js 设置了 Socket.IO，它通过侦听/连接到端口 8000（或另一个不是我的服务器正在运行的端口的端口）在我的本地开发机器上工作。

当我尝试在 heroku 上做同样的事情时，我的客户端脚本导入失败。

我试过相对路径

```
<script src="/socket.io/socket.io.js"></script> 
```

我还尝试绑定到 heroku 上的端口 8000 并使用完整路径名

```
<script type="text/javascript">
         var href = document.location.protocol + document.location.hostname + ':8000/socket.io/socket.io.js';
         console.log("href = " + href);
         document.write("<script src=" + href + "><\/script>");
     </script> 
```

我确实读到 websockets 不能在 heroku 上工作，所以我在后端的 after_start.js 文件中有以下代码。除了将 socket.io 配置为使用传输/轮询之外，我还需要做其他事情吗？

```
var port = process.env.PORT || 8000; //I've tried hardcoding to 8000 and using process.env.PORT and then I used the relative path for the script import
io = require('socket.io').listen(port);
//Configue io to work with heroku
io.configure(function () { 
    io.set("transports", ["xhr-polling"]); 
    io.set("polling duration", 10); 
}); 
```

加载 heroku 应用程序时出现此错误：

```
GET http://<myAppName>.herokuapp.com/socket.io/socket.io.js 404 (Not Found) 
```

编辑：我实际上正在使用 geddy mvc 框架，并希望在 heroku 上设置它（基本上就像 socket.io），我发现这个答案让我看起来可以类似地使用它： [GeddyJS & socket.io：从服务器端捕获和发出事件](https://stackoverflow.com/questions/13644551/geddyjs-socket-io-catching-and-emitting-events-from-server-side#answer-13653919)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:34:43.807

啊啊！我忘记在配置中打开 geddy 的实时设置。

这是我所做的：

添加

```
, socketIo: true
, realtime: true 
```

到配置文件

添加

```
geddy.io.configure(function () { 
    geddy.io.set("transports", ["xhr-polling"]); 
    geddy.io.set("polling duration", 10); 
}); 
```

到 after_start.js 文件

用于`geddy.io.sockets.emit(`从后端发送事件。

`<script src="/socket.io/socket.io.js"></script>`在前端导入 io

和

```
var href = document.location.protocol + document.location.hostname;
console.log('href = ' + href);
var socket = io.connect(href); 
```

从前端打开一个套接字。

# c - 如何在数组中使用 C 字符串？

> ID：15995034
> 
> 赞同：0
> 
> 时间：2013-04-14T02:16:12.847
> 
> 标签：c, arrays, string

所以假设我有一个 C 字符串数组。我正在尝试创建一个函数，我将告诉要删除哪两个字符串（可能通过索引路径），然后将一个新字符串（其他两个字符串的合并）添加到数组中。

我不需要实际的合并代码，只需要通过索引路径删除 2 个字符串，然后向数组添加一个附加字符串的代码。

（我可能需要另一个函数来进行实际的合并，这超出了这个问题的范围。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:20:50.193

您不能从数组中删除字符串。您需要将索引标记为已删除，然后将整个数组复制到另一个数组，省略标记的元素。

# angularjs - 如何从输入复选框执行 angular.js 中的函数？

> ID：15995037
> 
> 赞同：4
> 
> 时间：2013-04-14T02:16:43.263
> 
> 标签：angularjs

我有一个关于开关的清单。如何让每个开关以该对象和开关作为参数调用函数？

我试图为我的复选框设置“ng-change”指令，但该函数似乎没有被调用。如何调用我创建的 toggleSync 函数？

我是一个完全的新手，所以如果我需要认真的帮助，我很抱歉。

```
<div id="track-list" ng-controller="Controller" ng-init="update()">
  <div class="data-table">
  <table class="table table-hover tablesorter">
    <tr ng-repeat="item in items">
      <td><a href='{[{item.path}]}/{[{item.id}]}'>{[{item.title}]}</a></td>
      <td>{[{item.time_created}]}</td>
      <td>
        <div class=checkbox>
          <input ng-model="value" id="check{[{$index}]}" type="checkbox" ng-checked="!item.deleted" ng-change="toggleSync(item.id, this)" ng-true-value="YES" ng-false-value="NO"/>
          <label for="check{[{$index}]}">{{value}}</label>
        </div>
      </td>
    </tr>
  </table>

function Controller($scope) {
  console.log("init");
  $scope.items = [];

  $scope.toggleSync = function(objectId, input) {
    console.log("toggle sync");
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T05:44:56.650

这是一个带有您的代码和一些更正的插件（即：您使用了标签分隔符 {[{item.title}]} 而不是 {{item.title}}）

链接：[http](http://plnkr.co/edit/f9ngMMe8XJT4QDlA0Nx0?p=preview) ://plnkr.co/edit/f9ngMMe8XJT4QDlA0Nx0?p=preview 。

在此演示中，有一个表格，其中包含将 item.path/item.id 显示为链接的行，然后是 item.title 和一个根据其状态将值设置为 YES/NO 的复选框。当复选框状态发生变化时，toggleSync 函数将被调用，并将项目作为参数。输入复选框具有模型 item.value，它是 toggleSync 函数内部可用的属性。

# emacs - Aquamacs 2.4 -- subdirs.el -- 如何从加载中排除路径

> ID：15995040
> 
> 赞同：0
> 
> 时间：2013-04-14T02:17:06.957
> 
> 标签：emacs, emacs24

我正在设置 Aquamacs 2.4 以在至少三台不同的计算机上使用，我不确定如何最好地排除位于以下位置的路径（例如， `/Applications/Aquamacs.app/Contents/Resources/lisp/aquamacs/tabbar`）：`subdirs.el``/Applications/Aquamacs.app/Contents/Resources`

```
(if (fboundp 'normal-top-level-add-subdirs-to-load-path)
    (normal-top-level-add-subdirs-to-load-path)) 
```

并且，另一个 subdirs.el 位于`/Applications/Aquamacs.app/Contents/Resources/lisp`：

```
;; In load-path, after this directory should comecertain of its subdirectories.  Here we specify them.
    (normal-top-level-add-to-load-path '("url" "textmodes" "progmodes" "play" "org" "nxml" "net" "mh-e" "mail" "language" "international" "gnus" "eshell" "erc" "emulation" "emacs-lisp" "contrib" "cedet" "calendar" "calc" "aquamacs"  "obsolete")) 
```

* * *

我花了几个小时排除故障并最终`aquamacs-tabbar.el`在`/Applications/Aquamacs.app/Contents/Resources/lisp/aquamacs/tabbar`. 在最终弄清楚发生了什么之后，我有两个明显的选择——（1）硬编码`aquamacs-tabbar.el`，删除相关的**部分** `customizations.el`；或者，(2) 将我的所有自定义项直接硬编码到`aquamacs-tabbar.el`. 所以现在我有一个硬编码的自定义`aquamacs-tabbar.el`（隐藏在应用程序包中）——我想将它复制到一个更用户友好的脚本加载目录`/Users/HOME/Library/Preferences/Aquamacs Emacs`，以便我可以在那里使用它，并同步该目录和所有我的其他三台计算机的子目录。

我想尽可能多地保留应用程序的完整性，但我真的不想将应用程序本身同步到多台计算机上。

也许解决方案是从 Aquamacs 2.4 中去除胆量，并将骨架同步到我所有的计算机，然后将去除的胆量放入 `/Users/HOME/Library/Preferences/Aquamacs Emacs`. 然后我可以将后者与我的其他计算机同步到我心中的内容。

我确信自定义`aquamacs-tabbar.el`只是需要调整的许多脚本（隐藏在应用程序包中）中的第一个。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T03:00:26.367

有关如何在构建过程中自定义所有 emacs 相关文件的路径的想法（以使所有内容都在同一屋檐下），请参阅：

[OSX——配置 Emacs 以使用 NSSpellChecker](https://stackoverflow.com/questions/16265742/osx-configuring-emacs-to-use-nsspellchecker/16444817#16444817)

# windows - 从包含可变顺序参数的字符串中查找子字符串（文件路径）

> ID：15995042
> 
> 赞同：0
> 
> 时间：2013-04-14T02:17:20.333
> 
> 标签：windows, batch-file, cmd

`%params%`包含一组可变的参数：

`/tidy /log /truncate /convert D:\libdir` 或者可能

```
/log /tidy D:\cyclea\libfolder /test /convert /truncate 
```

对于除（当前单个）文件路径元素之外的所有内容，我都使用它：

```
 if "%params%"=="%params:log=%" goto :DontLogit

   if NOT "%params%"=="%params:/tidy=%" (call tidysub: & do something else ) 
```

现在我想提取文件路径元素并将其用作命令的参数，例如`chdir`

我玩过，但我对 CMD 字符串操作和`for`循环很弱。

我想保持参数的顺序可变。信息来自这里：

```
 FOR %%s IN (%*) DO (set params=!params! %%s) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:06:18.470

```
@ECHO OFF
SETLOCAL
SET swparams=log tidy test convert truncate
FOR %%i IN (%swparams% other) DO SET "%%i="
FOR %%i IN (%*) DO (
  SET "used="
  FOR %%p IN (%swparams%) DO (IF /i "/%%p"=="%%~i" SET %%p=Y&SET used=Y)
  IF NOT DEFINED used CALL SET other=%%other%% "%%~i"
  )

ECHO =============paramsreport===========
FOR %%i IN (%swparams%) DO IF DEFINED %%i (ECHO %%i:set) ELSE (ECHO %%i:clear)
ECHO other=%other%
FOR %%i IN (%other%) DO ECHO %%i or %%~i
GOTO :EOF 
```

Here's a way that should be extensible for you.

Simply set you switch-parameters into the list in swparams.

the parameter-names and OTHER are set to [nothing] to ensure they're not already set in the environment. Ech supplied parameter is applied to %%i in turn, and matched against each defined swparam in turn. the variable `USED` is cleared before the match and if the match (of `/switchparametername` is found, the switch parameter is set and the USED flag is set. if the used flag is not set gainst any of the switch parameters, then a parsing trick is used to accumulate any unrecognised strings into `OTHER`

The `"%%~i"` mechanism first dequotes the item in %%i, then quotes it. In this way, it ends up quoted, regardless of whether it originally has quotes or not.

The `/i` on the `if` performs a case-insensitive match.

hence running this batch

```
thisbatch /tidy "C:\some filename with spaces.txt" 
```

will yield `TIDY` set to `Y`, `LOG`,`test`, `convert`, `truncate` not set and `other` set to `"C:\some filename with spaces.txt"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:59:01.937

```
@echo off
setlocal EnableDelayedExpansion

rem Get the single filepath element (with colon in second character):
set params=/tidy /log /truncate /convert D:\libdir
set filepath=
for %%a in (%params%) do (
   set par=%%a
   if "!par:~1,1!" == ":" (
      set filepath=%%a
   )
)
if defined filepath (
   echo Filepath = %filepath%
) else (
   echo Filepath not given
)
echo/

rem Get multiple filepath elements in an *array*:
set params=/log /tidy D:\cyclea\libfolder /test /convert D:\libdir /truncate
set i=0
for %%a in (%params%) do (
   set par=%%a
   if "!par:~1,1!" == ":" (
      set /A i+=1
      set filepath[!i!]=%%a
   )
)
echo There are %i% filepath elements:
for /L %%i in (1,1,%i%) do (
   echo %%i- !filepath[%%i]!
) 
```

您可以在这篇文章中查看有关数组管理的进一步描述：[cmd.exe (batch) 脚本中的数组、链表和其他数据结构](https://stackoverflow.com/questions/10166386/arrays-linked-lists-and-other-data-structures-in-cmd-exe-batch-script/10167990#10167990)

# php - PHP：如何在页面中锚定变量

> ID：15995043
> 
> 赞同：0
> 
> 时间：2013-04-14T02:17:57.440
> 
> 标签：php, config, require

我正在尝试使用 PHP 制作一个简单的计算表格。一个页面将包含文本文件，用户将在其中输入数值并通过点击按钮，将执行数学运算并在另一个文本字段中输出。

这是我的代码：

```
 <html>

<form name="form01" method="post">
<p>Quantite de vecteur: <input type="text" name="B" /></p>
<p>Taille du vecteur: <input type="text" name="A" /></p>
<p>Taille de l'insert: <input type="text" name="C" /></p>
   <input type="submit" name="ratio_calc" id="ratio_calc" value="calculer">
</form>

<?php

if(isset($_POST['ratio_calc'])) { 

    $A = 'A';
    $B = 'B';
    $C = 'C';
    $ratio = (($B * $C) / $A);

}
?>

p>Le ratio: <input type="text" name="ratio" value=<?php echo $ratio ?> /></p>

</html> 
```

所以，我想 $ratio 在名为“ratio”的文本字段中输出。很简单，而且不知何故它确实有效，但在实际点击“计算器”按钮**之前，我不断得到***未定义的变量：比率。*

 **我是 PHP 脚本的重度菜鸟，但我假设变量 A、B、C 和比率是在 PHP 脚本的第一部分中定义的，并且当脚本结束时，它们会被删除。我想我可以通过以某种方式修复或锚定这些变量来解决问题，以便它们通过文件“保存在内存中”。可能吗？

我找到了可以使用的地方`$config = array(`将其保存为 PHP 文件，然后在每次新的 PHP 脚本开始时调用它`require("path-toPHP file");`

是否真的有可能，究竟如何做到这一点，还有另一种更简单的方法吗？

谢谢你们帮助我学习这门语言

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:47:45.963

`$A = 'A'; $B = 'B'; $C = 'C'; $ratio = (($B * $C) / $A);`

如果您将值“A”分配给 $A，将“B”分配给 $B 等等，那么计算的意义何在？

要将值从`<input type="text" name="A" />`$A 中获取，您必须将其称为诸如此类 `$A = $_POST['A']`。

至于您关于未设置 $ratio 的实际问题，请在检查之外声明该变量，`if(isset($_POST['ratio_calc']))`因为如果此检查不正确，则不会设置该变量，您将获得“未定义变量：比率”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:21:57.813

即使尚未填写表格并且尚未计算比率，您也正在打印比率。

你需要做：

```
<p>Le ratio: <input type="text" name="ratio" <?php if (isset($ratio)) {echo 'value="'.$ratio.'"';} ?> /></p> 
```

此外，您没有正确获取输入的值。它应该是：

```
$A = $_POST['A'];
$B = $_POST['B'];
$C = $_POST['C']; 
```**

# java - 在java中为方法drawImage（）更改图像的alpha

> ID：15995047
> 
> 赞同：2
> 
> 时间：2013-04-14T02:18:19.300
> 
> 标签：java, graphics, bufferedimage, alpha, drawimage

我正在尝试随着时间的推移更改图像的透明度，我正在`drawImage()`使用`java.awt.Graphics`. 我知道网上有很多关于如何做到这一点的不同答案，但我找不到一个简单到足以让我理解和实施的答案。

假设我有一张`BufferedImage`图片，我想用 50% 的不透明度绘制这张图片。我将如何初始化`image`以及在绘制图像时如何调整图像的 alpha 级别。如果我可以使用该方法`drawImage()`并用它来改变图像的透明度，那就太好了，但它可能没那么简单。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T02:30:28.750

从未尝试过，但我认为基本代码是：

```
AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, alpha);
g2d.setComposite(ac);
g2d.drawImage(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T20:16:33.853

使用图像过滤器。

```
float[] scales = { 1f, 1f, 1f, 0.1f };
float[] offsets = new float[4];
RescaleOp rop = new RescaleOp(scales, offsets, null);
g2d.drawImage(buffimg, rop, 0, 0); 
```

scales 数组中的第 4 个元素是透明度，该值介于 0 - 1 之间

camickr 的回答将使整个组件应用 alpha，包括所有内部组件。但这会快得多。

警告：小心使用图像过滤器

参考：[http ://www.informit.com/articles/article.aspx?p=1013851&seqNum=2](http://www.informit.com/articles/article.aspx?p=1013851&seqNum=2)

# javascript - 如何将具有固有纹理的对象从 Blender 导入到 ThreeJS？

> ID：15995050
> 
> 赞同：0
> 
> 时间：2013-04-14T02:18:33.360
> 
> 标签：javascript, three.js, webgl

我已经使用 STL Loader for threejs 将我的对象从 Blender 导入到threejs，但由于某种原因，纹理没有出现。我认为它与对象的 MeshBasicMaterial 有关。我尝试将其更改为 Phong，但对象变为黑色。

然后我意识到，当我将对象从 STL 加载器加载到 threejs 时，为什么不能保留 Blender 的固有特征/纹理，而不是将材质从基本更改为 phong？有没有办法保持纹理？有我可以遵循的教程吗？

谢谢！

**编辑：**

这是我的代码片段，其中我将带有​​纹理的 Blender 对象导出到了 threejs .js 文件。该对象加载到我的查看器中，但它是黑色的，没有纹理。我不知道如何解决这个问题。我遵循另一个使用旅馆作为纹理的示例（因此得名。尚未更改名称）。

```
var Viewport = function ( signals ) {

var container = new UI.Panel( 'absolute' );
container.setBackgroundColor( '#aaa' );

var clock = new THREE.Clock();

// settings
var enableHelpersFog = true;

// helpers

var objects = [];
var INTERSECTED;

var sceneHelpers = new THREE.Scene();

//the grid that appears at the beginning. 
var size = 500, step = 25;
var geometry = new THREE.Geometry();
var material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );
var color1 = new THREE.Color( 0x444444 ), color2 = new THREE.Color( 0x888888 );

for ( var i = - size; i <= size; i += step ) {

    geometry.vertices.push( new THREE.Vector3( -size, 0, i ) );
    geometry.vertices.push( new THREE.Vector3(  size, 0, i ) );

    geometry.vertices.push( new THREE.Vector3( i, 0, -size ) );
    geometry.vertices.push( new THREE.Vector3( i, 0,  size ) );

    var color = i === 0 ? color1 : color2;

    geometry.colors.push( color, color, color, color );
}
var grid = new THREE.Line( geometry, material, THREE.LinePieces );
sceneHelpers.add( grid );

///Objects stuff
var objectshapes = [];

//stl files
group = new THREE.Object3D();

            var loader_slotted_disk = new THREE.STLLoader();
            loader_slotted_disk.addEventListener( 'load', function ( event ) {
                var geometry = event.content;
                console.log(geometry);
                var material = new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 });
                var mesh1 = new THREE.Mesh( geometry, material );

                mesh1.name='slotted disk';
                mesh1.castShadow = true;
                mesh1.receiveShadow = true;

                sceneHelpers.add( mesh1 );
                objectshapes.push( mesh1 );

            } );    
            loader_slotted_disk.load( 'js/ui/assests/slotted_disk.stl' );

            var loader_left_bronchus = new THREE.STLLoader();
            loader_left_bronchus.addEventListener( 'load', function ( event ) {

                var geometry = event.content;
                console.log(geometry);
                var material = new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 });
                var mesh1 = new THREE.Mesh( geometry, material );

                mesh1.name='left bronchus';
                mesh1.castShadow = true;
                mesh1.receiveShadow = true;

                mesh1.position.x = Math.random() * 200 - 50;
                mesh1.position.y = Math.random() * 200 - 50;
                mesh1.position.z = Math.random() * 200 - 50;

                sceneHelpers.add( mesh1 );
                objectshapes.push( mesh1 );

            } );
            loader_left_bronchus.load( 'js/ui/assests/left_bronchus.stl' );

            var loader_parenchyma = new THREE.STLLoader();
            loader_parenchyma.addEventListener( 'load', function ( event ) {

                var geometry = event.content;
                console.log(geometry);
                var material = new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 });
                var mesh2 = new THREE.Mesh( geometry, material );

                mesh2.name='parenchyma';
                mesh2.castShadow = true;
                mesh2.receiveShadow = true;

                sceneHelpers.add( mesh2 );
                objectshapes.push( mesh2 );

            } );
            //loader_parenchyma.load( 'js/ui/assests/parenchyma.stl' );

            //group.rotation.x = Math.PI* 3/2

            ////////////
// CUSTOM //
////////////

                        var inn_loader = new THREE.JSONLoader(); inn_loader.load("js/reducedandcoloredmodel[Conflict].js", function(geo, material) { var materials = new THREE.MeshFaceMaterial(material); inn = new THREE.Mesh(geo, materials); scene.add(inn); }); // 
///stl files added

            var geometry = new THREE.CubeGeometry( 50, 50, 50 );
            var geometry2 = new THREE.SphereGeometry( 50, 10, 10);

            var object = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 } ) );
            object.name = "cube";

            object.position.x = Math.random() * 200 - 50;
            object.position.y = Math.random() * 200 - 50;
            object.position.z = Math.random() * 200 - 50;

            object.rotation.x = Math.random() * 2 * Math.PI;
            object.rotation.y = Math.random() * 2 * Math.PI;
            object.rotation.z = Math.random() * 2 * Math.PI;

            sceneHelpers.add( object );
            objectshapes.push( object );

            var object2 = new THREE.Mesh( geometry2, new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff, opacity: 0.5 } ) );
            object2.name = "sphere";

            object2.position.x = Math.random() * 200 - 50;
            object2.position.y = Math.random() * 200 - 50;
            object2.position.z = Math.random() * 200 - 50;

            object2.rotation.x = Math.random() * 2 * Math.PI;
            object2.rotation.y = Math.random() * 2 * Math.PI;
            object2.rotation.z = Math.random() * 2 * Math.PI;

            sceneHelpers.add( object2 );
            objectshapes.push( object2 );
            console.log(objectshapes);

///box around object
var selectionBox = new THREE.Mesh( new THREE.CubeGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: 0xffff00, wireframe: true, fog: false } ) );
selectionBox.matrixAutoUpdate = false;
selectionBox.visible = false;
sceneHelpers.add( selectionBox );

///axis
var selectionAxis = new THREE.AxisHelper( 100 );
selectionAxis.material.depthTest = false;
selectionAxis.material.transparent = true;
selectionAxis.matrixAutoUpdate = false;
selectionAxis.visible = false;
sceneHelpers.add( selectionAxis );

// default dummy scene and camera

var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera( 50, 1, 1, 5000 );;

// fog

var oldFogType = "None";
var oldFogColor = 0xaaaaaa;
var oldFogNear = 1;
var oldFogFar = 5000;
var oldFogDensity = 0.00025;

// object picking

var intersectionPlane = new THREE.Mesh( new THREE.PlaneGeometry( 10000, 10000, 8, 8 ) );
intersectionPlane.visible = false;
sceneHelpers.add( intersectionPlane );

var ray = new THREE.Raycaster();
var projector = new THREE.Projector();
var offset = new THREE.Vector3();

var cameraChanged = false;
var helpersVisible = true;

//by default the selected scene object is the camera.
var picked = null;
var selected = camera; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:06:45.940

doob 先生已经指出 stl 没有指定颜色或纹理，它是纯几何。我建议使用 three.js 导出器从搅拌器中导出一些琐碎的东西（如带有纹理的立方体），以了解正在发生的事情。我在[threejs-and-blender](http://blenderscripting.blogspot.nl/2012/04/threejs-and-blender.html)有示例代码。查看这些 threejs 演示的源代码并查看正在拉入哪些文件，您也应该找到对图像的引用。

一旦你有了这个工作，找出更复杂的模型就变得更容易了。另外，如果您不想共享原始模型，则共享一个简单的多维数据集进行调试应该没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:51:15.260

虽然我没有使用 JSON 加载器，但我尝试使用 Collada 加载器（因为我的模型在 Webgl 加载器 collada 示例中导入时会离线保留纹理）并且在当前的 3-D 查看器中，我的模型仍然是黑色的。但是，添加灯光后，纹理会显示出来。

本质上，我假设与 JSON 加载器一样好，我需要在我的 3-D 查看器中添加一个灯光以显示模型的外部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-05T17:31:22.893

我在使用 Blender v 2.68a 时遇到了同样的问题。Blender 2.71 解决了这个问题。

我使用 Blender 2.71 导入了之前在 WebGl 上显示为黑色的 .stl 文件，然后在不更改默认 .stl 导出器菜单中的任何设置参数的情况下将其导出。我用 WebGl 重新加载了文件，它就在那里，全彩！

# sql - 如何使用 SQL Server 2012 窗口函数计算指数移动平均线

> ID：15995055
> 
> 赞同：5
> 
> 时间：2013-04-14T02:19:24.240
> 
> 标签：sql, sql-server, sql-server-2012

`OVER()`我知道使用 SQL Server 2012 窗口函数和子句很容易计算简单的移动平均值。但是如何使用这种方法计算指数移动平均线？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T03:59:46.703

的公式`EMA(x)`是：

```
EMA(x 1 ) = x 1 
EMA(x n ) = α * x n + (1 - α) * EMA(x n-1 )

```

和

```
β := 1 - α
```

相当于

```
EMA(x n ) = β n-1 * x 1 + α * β n-2 * x 2 + α * β n-3 * x 3 + ... + α * x n

```

在这种形式下，很容易用`LAG`. 对于 4 行 EMA，它看起来像这样：

```
SELECT LAG(x,3)OVER(ORDER BY ?) * POWER(@beta,3) + 
       LAG(x,2)OVER(ORDER BY ?) * POWER(@beta,2) * @alpha + 
       LAG(x,1)OVER(ORDER BY ?) * POWER(@beta,1) * @alpha + 
       x * @alpha
FROM ... 
```

* * *

好的，正如您似乎在 EWMA_Chart 之后我创建了一个[SQL Fiddle](http://sqlfiddle.com/#!6/14ab6/1)来展示如何到达那里。但是，请注意，它使用的是递归 CTE，每返回一行需要一个递归。因此，在大型数据集上，您很可能会获得灾难性的性能。递归是必要的，因为每一行都取决于之前发生的所有行。虽然您可以获得所有前面的行，`LAG()`但您也不能引用前面的计算，因为`LAG()`不能引用自身。

此外，您在下面附加的电子表格中的公式没有意义。它似乎正在尝试计算 EWMA_Chart 值，但它失败了。在上面的 SQLFiddle 中，我包含了一个 [Wrong] 列，它计算的值与电子表格正在计算的值相同。

无论哪种方式，如果您需要在大型数据集上使用它，您可能最好编写一个游标。

这是在上面的 SQLFiddle 中进行计算的代码。它引用`vSMA`了计算 10 行移动平均值的视图。

```
WITH

smooth AS(
  SELECT CAST(0.1818 AS NUMERIC(20,5)) AS alpha
),

numbered AS(
  SELECT Date, Price, SMA, ROW_NUMBER()OVER(ORDER BY Date) Rn
  FROM vSMA
  WHERE SMA IS NOT NULL
),

EWMA AS(
  SELECT Date, Price, SMA, CAST(SMA AS NUMERIC(20,5)) AS EWMA, Rn
  , CAST(SMA AS NUMERIC(20,5)) AS Wrong
  FROM numbered
  WHERE Rn = 1
  UNION ALL
  SELECT numbered.Date, numbered.Price, numbered.SMA, 
    CAST(EWMA.EWMA * smooth.alpha + CAST(numbered.SMA AS NUMERIC(20,5)) * (1 - smooth.alpha) AS NUMERIC(20,5)), 
    numbered.Rn
    , CAST((numbered.Price - EWMA.EWMA) * smooth.alpha + EWMA.EWMA AS NUMERIC(20,5))
  FROM EWMA
  JOIN numbered
  ON EWMA.rn + 1 = numbered.rn
  CROSS JOIN smooth
)
SELECT Date, Price, SMA, EWMA
, Wrong
FROM EWMA

ORDER BY Date; 
```

# php - 如何使用超链接“发布”样式调用 php 函数

> ID：15995057
> 
> 赞同：1
> 
> 时间：2013-04-14T02:19:49.383
> 
> 标签：php, html, post, get

我目前正在尝试创建一个超链接，它调用我所在的同一页面，但使用不同的 PHP 函数。这似乎是一个足够简单的解决方案，但是我不希望 URL 中显示任何信息。“帖子”似乎是最好的解决方案，但我找不到任何关于如何完成这项工作的结果。

```
<?php 
function myFirst(){ 
    echo 'The First ran successfully.'; 
}
function mySecond(){ 
    echo 'The Second ran successfully.'; 
}
?> 

<html><body> 

<?php 

if (isset($_GET['run'])){
    $linkchoice=$_GET['run'];
}else{
    $linkchoice='';
}

switch($linkchoice){ 
    case 'first' : 
        myFirst(); 
        break; 

    case 'second' : 
        mySecond(); 
        break; 

    default : 
        echo 'no run'; 
} 

?> 

<hr> 
<a href="?run=first">Link to First</a> 
<br/> 
<a href="?run=second">Link to Second</a> 
<br/> 
<a href="?run=0">Refresh No run</a> 

</body></html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T02:29:04.697

如果你想通过在页面中按下某个东西来使用 POST，你可以使用 JS 将其转换为 POST 请求，或者只是提交一个表单。

假设你使用 jQuery

```
<a href="baba/was/here/this/is/the/url" onclick="manda_mi()">go somewhere</a>
<form id="koko" style="display:none" target="baba/was/here/this/is/the/url" method="post">
<input type="hidden" name="run" value="boo" />
</form>
...
...
function manda_mi(){
  $('#koko').submit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:37:21.937

如果您想避免使用 Javascript，您可以将链接包装在一个表单中，并将按钮设置为看起来像普通链接。

基本上：

```
<button type="submit" value="first" name="action">Link to First</button> 
<br/> 
<button type="submit" value="second" name="action">Link to Second</button> 
<br/> 
<button type="submit" value="0" name="run">Refresh no Run</button> 
```

然后只需检查按下了什么按钮。

虽然最简单的选择可能是 Javascript。

# vb.net - 如何使用 vb net 2012 在 Windows 开始菜单中启动“帮助和支持”应用程序

> ID：15995060
> 
> 赞同：0
> 
> 时间：2013-04-14T02:20:04.730
> 
> 标签：vb.net, startmenu

当我单击 Windows 7 开始菜单中的“帮助和支持”时，helpPane.exe 程序运行。但是当我运行 helpPane.exe 时，什么也没有发生。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:48:15.013

你可以试试这个，它可能会工作！

```
 Dim appData As String = GetFolderPath(SpecialFolder.ApplicationData)
    Dim helpSupportPath As String = appData & "\Microsoft\Windows\Start Menu\Programs\Maintenance\Help.lnk"
    Process.Start(helpSupportPath) 
```

# ember.js - 使用 Ember 路由器 v2 时，是否可以隐藏子状态以使其不显示在 URL 中？

> ID：15995062
> 
> 赞同：0
> 
> 时间：2013-04-14T02:20:26.613
> 
> 标签：ember.js

我希望路由子状态不会出现在 URL 中，但仍然能够利用路由类，我可以在该路由类上定义 renderTemplate、模型、setupController 等钩子。v2路由器可以做到这一点吗？我正在使用 Ember 候选版本 2。

这是一个例子。

假设我有路线：

```
/exercise/:exercise_id
/exercise/:exercise_id/correct
/exercise/:exercise_id/incorrect 
```

我希望所有这些都显示在 URL 中：

```
/exercise/:exercise_id 
```

因为我不希望学生直接在`/correct`ULR 末尾输入并得到正确答案。虽然我有办法阻止它工作，但完整的路线仍然显示在 URL 中。从学生的角度来看，我只希望他们将状态视为`/exercise/:exercise_id`.

当然，我可以将正确与不正确的状态存储在某个控制器变量中，但随后我失去了使用路由类的便利性，ExerciseCorrectRoute 和 ExerciseIncorrectRoute，我想表现得不同，所以像 renderTemplate 和 setupController 这样的钩子是很高兴在不同的地方干净地定义。

想法？

凯文

更新：

我接受了 Dan Gebhardt 的建议，因为我喜欢尽可能地将事物保留在框架考虑的设计案例中，因为鉴于 Ember 仍在不断发展，这似乎可以减少令人头疼的问题。我也没有机会尝试 inDream 的 hack。

虽然我仍然认为如果路由器添加一个功能来屏蔽 URL 中的子状态会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:10:28.490

每个路由都必须与 Ember 当前路由器的 URL 相关联。

我建议您在模板中使用条件语句来根据练习的状态`exercise`调用适当的路由，而不是使用多条路由。`{{render}}`通过这种方式，您仍然可以为每个状态维护单独的模板和控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:19:56.300

您可以参考我在[Ember.js 中的回答 - 切换路由时防止重新渲染](https://stackoverflow.com/questions/15990860/)。

如果您想手动处理状态，请重新打开您正在使用的[位置 API并设置为 true。](http://emberjs.com/guides/routing/specifying-the-location-api/)`window.suppressUpdateURL`

**Ember.HistoryLocation：**

```
Ember.HistoryLocation.reopen({
  onUpdateURL: function(callback) {
    var guid = Ember.guidFor(this),
        self = this;

    Ember.$(window).bind('popstate.ember-location-'+guid, function(e) {
      if(window.suppressUpdateURL)return;
      // Ignore initial page load popstate event in Chrome
      if(!popstateFired) {
        popstateFired = true;
        if (self.getURL() === self._initialUrl) { return; }
      }
      callback(self.getURL());
    });
  }
}); 
```

**Ember.HashLocation：**

```
Ember.HashLocation.reopen({
  onUpdateURL: function(callback) {
    var self = this;
    var guid = Ember.guidFor(this);

    Ember.$(window).bind('hashchange.ember-location-'+guid, function() {
      if(window.suppressUpdateURL)return;
      Ember.run(function() {
        var path = location.hash.substr(1);
        if (get(self, 'lastSetURL') === path) { return; }

        set(self, 'lastSetURL', null);

        callback(path);
      });
    });
  }
}); 
```

# mysql - 连接两个表，为第一个表中的每个唯一行返回一行

> ID：15995070
> 
> 赞同：0
> 
> 时间：2013-04-14T02:22:04.870
> 
> 标签：mysql, join

所以，我试图从两个表中提取数据。我需要第一个表中的每个唯一行`Tickets`成为结果集中的唯一行。每个工单在表中可能有多个与之关联的工单标签`TicketsTags`。

当我运行以下查询时，我会为每个唯一的“tagid”获得一行：

```
select 
 `Tickets`.`id`,
 `TicketsTags`.`tagid` 
from 
 `Tickets` left join `TicketsTags`
on 
 `TicketsTags`.`ticketid` = `Tickets`.`id`
where 
 `Tickets`.`id` = 1 
```

回报：

```
id | tagid
----------
1  | 1
1  | 2 
```

如何将每个 tagid 作为它自己的列“附加”，或创建一个数组？所以我以这个结束：

```
id | tag1 | tag2
----------------
1  | 1    | 2 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:34:02.790

```
select 
`Tickets`.`id`,
GROUP_CONCAT(`TicketsTags`.`tagid`) as 'TagsID' 
from 
`Tickets` left join `TicketsTags`
on 
`TicketsTags`.`ticketid` = `Tickets`.`id`
where 
`Tickets`.`id` = 1
GROUP BY `Tickets`.`id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:31:53.113

知道了，

```
select `Tickets`.`id`, group_concat(`TicketsTags`.`tagid`) from `Tickets` left join `TicketsTags` on `TicketsTags`.`ticketid` = `Tickets`.`id` where `Tickets`.`id` = 12 group by `Tickets`.`id` 
```

利用`group_concat`并`group by`返回与票证 ID 相关的每个 tagid 的逗号分隔字符串。

谢谢！

# angularjs - ng-grid 在填充数据并使其可见时更改样式

> ID：15995072
> 
> 赞同：1
> 
> 时间：2013-04-14T02:22:22.933
> 
> 标签：angularjs, angular-ui, ng-grid

我正在学习 Angularjs 的 ng-grid 组件，但遇到了一个相当令人失望的问题。基本上，流程是这样的：页面加载，只有一个按钮可见。单击按钮，AJAX 请求获取 json 数据并将其绑定到网格。

这是我第一次单击按钮时看到的内容： ![在此处输入图像描述](https://i.stack.imgur.com/l7IqE.png)

如果我完全调整浏览器的大小，它会恢复为正确的大小： ![在此处输入图像描述](https://i.stack.imgur.com/HGKGy.png)

我的控制器如下所示：

```
myAppModule.controller('PodcastController', function ($scope, $http) {

    $scope.getData = function () {
        $http.get('/Home/PodcastDataAsJson').success(function (data) {
            $scope.podcasts = data;
        });

        $scope.gridVisibilty = 'gridStyle';
    };

    $scope.gridOptions = {
        data: 'podcasts',
        columnDefs: [
            { field: 'Id', displayName: 'Id' },
            { field: 'Name', displayName: 'Name' },
            { field: 'Artist', displayName: 'Artist' }
        ]
    };

    $scope.gridVisibilty = 'notDisplayed';

}); 
```

视图如下所示：

```
<div ng-app="gridExampleApp">
    <div ng-controller="PodcastController">

        <button ng-click="getData()">Click to get Data</button>

        <div id="datagrid" ng-grid="gridOptions" class="ng-class: gridVisibilty;"></div>

    </div>
</div> 
```

我的CSS看起来像这样：

```
.notDisplayed 
{
    display: none;
}

.displayed 
{
    display: block;
    border: 1px solid rgb(212,212,212);
    width: 800px;
    height: 300px;
}

.gridStyle 
{
    display: block;
    border: 1px solid rgb(212,212,212);
    width: 400px; 
    height: 300px
} 
```

我想知道这是否是我，或者它是否是我应该提交给 Angular ng-grid 窥视的错误。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:25:26.247

您没有展示如何加载 ng-grid 样式表，但是当我尝试通过直接链接获取它时遇到了类似的问题。

这是一个带有 ng-grid 样式表的本地文件的演示：[http](http://plnkr.co/edit/2pq9YotA4RJIMll5BJvh?p=preview) ://plnkr.co/edit/2pq9YotA4RJIMll5BJvh?p=preview 。我还使用绑定到 podcasts 变量的 ng-show 指令作为显示/隐藏网格的条件。

在 index.html 的头部，如果你尝试使用样式表的直接链接，会有一个奇怪的显示效果。但是，如果您将相同的代码放在本地文件中，它就可以工作。

# ios - Xcode 向后兼容性

> ID：15995076
> 
> 赞同：0
> 
> 时间：2013-04-14T02:23:44.570
> 
> 标签：ios, xcode, backwards-compatibility

我已经构建了一个应用程序，其目标 iOS 版本是 iOS 5.1，而我的设备版本是 6.1.3。但是，我无法让我的应用程序在我的设备上运行，因为我收到以下错误：

> “没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。”

我期待该应用程序可以在任何 iOS 版本高于我的目标版本的设备上运行，就像 Android 开发中的情况一样。

似乎唯一的解决方案是更新我的 Xcode（当前为 4.3.3），但一些糟糕的评论指出新 Xcode（4.6）上的崩溃问题真的让我失望。

* * *

来自主办方的更多信息：

```
The version of iOS on “Pierr's iPhone” does not match any 
of the versions of iOS supported for development with this 
installation of the iOS SDK. Please restore the device 
to a version of the OS listed below, or update to the latest
version of the iOS SDK; which is available here.

    OS Installed on Pierr's iPhone
    6.1.3 (10B329)

    Xcode Supported iOS Versions
    Latest
    5.1 (9B176)
    5.0
    4.3
    4.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:39:17.740

您需要更新 Xcode 以使其与新的 iOS 版本兼容。当前的 Xcode 版本是`4.6.1`.

# c++ - #包括重复

> ID：15995077
> 
> 赞同：0
> 
> 时间：2013-04-14T02:24:05.580
> 
> 标签：c++, include-guards

**上下文**：我有一个类有两个`include`子句：

```
#ifndef VAR_RECORD_SONG_H
#define VAR_RECORD_SONG_H

#include "VarRecord.h"
#include "Compressor.h"

class VarRecordSong : public VarRecord
{
    public:
        VarRecordSong();
        ~VarRecordSong();
};

#endif /* VAR_RECORD_SONG_H */ 
```

**问题**：两者都`VarRecord.h`包含`Compressor.h`同一个文件`GlobalConstants.h`，所以很明显编译器会抱怨。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:37:09.633

文件 GlobalConstants.h 应该是这样的：

```
#ifndef GLOBAL_CONSTANTS_H
#define GLOBAL_CONSTANTS_H

file contents...

#endif 
```

所以这个文件只会在预处理代码中出现一次。

# javascript - 如何根据 JavaScript 中另一个数组的值将字符串转换为数组

> ID：15995078
> 
> 赞同：0
> 
> 时间：2013-04-14T02:24:10.873
> 
> 标签：javascript, arrays, string

我有一些数据要清理。对于有问题的字段，我知道可能的值是什么，但该值存储在一个连接的字符串中，我需要它们在一个数组中。这是我想做的事情：

```
var valid_values = ['Foo', 'Bar', 'Baz'];
var raw_data = ['BarFoo','BazBar','FooBaz'];
desired_result = [['Bar','Foo'],['Baz','Bar'],['Foo','Baz']]; 
```

我不确定这叫什么，所以我希望这不是重复的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:47:36.167

您可以遍历每个数据值，使用[indexOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)或[contains](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/contains)搜索允许的字符串，并将成功的匹配项作为数组返回。

[这是我在 jsFiddle](http://jsfiddle.net/JbUXA/)的代码版本和工作示例：

```
var out = raw_data.map(function (raw) {
    return valid_values.filter(function (value) {
        return raw.contains(value);
    });
});

//out === [['Bar','Foo'],['Baz','Bar'],['Foo','Baz']]; 
```

我认为输出匹配顺序并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:38:54.383

这是假设有关您的数据的一些事情：

*   您需要将字符串拆分为 2 项对
*   输入和术语区分大小写
*   你不会处理空/不合格的输入（需要更多的边缘情况）

在这种情况下，你会想做这样的事情：

```
// for each item in the desired result, see if it's a match
// at the beginning of the string,
// then split on the string version of the valid value
function transform(input){
    for(i = 0; i < len; i++) {
      if (input.indexOf(valid_values[i]) === 0) {
          return [ valid_values[i], input.split(valid_values[i])[1] ];
      }
    }

    return [];
}

// to run on your input
var j = 0, raw_len = raw_data.length, desired_result = [];
for(; j < raw_len; j++) {
  desired_result.push(transform(raw_data[j]));
} 
```

此代码非常特定于您提出的答案；它不涵盖许多边缘情况。

# xslt - 基于连接两个节点值的 XSLT 匹配

> ID：15995083
> 
> 赞同：0
> 
> 时间：2013-04-14T02:25:11.483
> 
> 标签：xslt

如果我有看起来像这样的 xml

```
<Msg>
    <Payload role="s">
       <row>
         <venue>XDM</venue>
         <account>60190</account>
       </row>
    </Payload>
    <Payload role="c" id="atom1">
      <ResultSet>
         <Row>
            <U_LegAcc>XDM60190</U_LegAcc>
            <U_AccCod>SYS00000000508</U_AccCod>
         </Row>
      </ResultSet>
    </Payload>
</Msg> 
```

我需要根据 U_LegAcc 获取 U_AccCod 节点值，该值与场地 (XDM) 和帐户 (61090) 的连接值匹配，即 XDM61090

我怎样才能得到看起来像这样的xml。

```
<Msg>
  <Payload>
   <row>
     <venue>XDM</venue>
     <account>60190</account>
     <U_AccCod>SYS00000000508</U_AccCod>
   </row>
 </Payload>
</Msg> 
```

我已经尝试简化它并删除连接只是为了开始，但我什至无法让它工作，即`<account>`并且`<U_AccCod>`是相同的。我尝试使用密钥，但没有得到任何输出

```
<xsl:key name="sapaccount" match="ResultSet" use="U_LegAcc" />

<xsl:template match="Row" mode="name">
   <xsl:value-of select="U_AccCod" />
</xsl:template>

<xsl:template match="row/account">
   <xsl:apply-templates select="key('sapaccount', .)" mode="name" />
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:31:23.023

实际上没有理由不能在这里继续使用密钥。它们通常更有效地用于查找元素。您当前密钥的问题在于这不太正确。您当前正在`ResultSet`通过`U_LegAcc`值查找元素，但`U_LegAcc`不是 的直接子级`ResultSet`，而是 的`Row`，因此您可能希望像这样定义您的键：

```
<xsl:key name="sapaccount" match="ResultSet/Row" use="U_LegAcc" /> 
```

或者也许只是这样，如果`Row`元素只能出现在一个地方

```
<xsl:key name="sapaccount" match="Row" use="U_LegAcc" /> 
```

然后，要查找值，如果定位在`account`元素上，您可以这样做：

```
<xsl:apply-templates select="key('sapaccount', concat(preceding-sibling::venue, .))" /> 
```

或者更好的是，有一个模板来匹配`row`元素，然后你可以这样做

```
<xsl:apply-templates select="key('sapaccount', concat(venue, account))" /> 
```

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="sapaccount" match="Row" use="U_LegAcc"/>

   <xsl:template match="Payload[@role='s']">
      <Payload>
         <xsl:apply-templates/>
      </Payload>
   </xsl:template>

   <xsl:template match="Payload[@role='c']"/>

   <xsl:template match="row">
      <row>
         <xsl:apply-templates/>
         <xsl:apply-templates select="key('sapaccount', concat(venue, account))/U_AccCod"/>
      </row>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<Msg>
   <Payload>
      <row>
         <venue>XDM</venue>
         <account>60190</account>
         <U_AccCod>SYS00000000508</U_AccCod>
      </row>
   </Payload>
</Msg> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T06:54:56.417

在 XSL 的一部分中，它`row`从输入中的同一元素发出元素：

```
<xsl:template match="row">
    <row>
        <xsl:copy-of select="venue"/>
        <xsl:copy-of select="account"/>
        <U_AccCod>
            <xsl:variable name="this" select="."/>
            <xsl:value-of select="/Msg/Payload/ResultSet/Row/U_AccCod[../U_LegAcc=concat($this/venue,$this/account)]"/>
        </U_AccCod>
    </row>
</xsl:template> 
```

未经测试，可能需要调整。

# java - 在两个 JList 之间拖动类

> ID：15995085
> 
> 赞同：0
> 
> 时间：2013-04-14T02:25:27.043
> 
> 标签：java, swing, drag-and-drop, awt

我有一个包含 java 类列表的 JList。我想将一个类从这个 JList 拖到另一个，但我对如何使用 DataFlavors 识别可导入的 drop 有点困惑。

```
 TransferHandler transferHandler = new TransferHandler("hello") {
        public boolean canImport(TransferHandler.TransferSupport info) {
            try {
                DataFlavor flavor = new DataFlavor(DataFlavor.javaJVMLocalObjectMimeType +
           ";class=org.foo.MyClass");
                if (info.isDataFlavorSupported(flavor)) {
                    return true;
                }
            } catch (ClassNotFoundException e) {
                e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }

            System.out.println("not supported");
            return false;
        }

    }; 
```

也许这是不可能的，因为源列表的模型正在从类数组中返回一个对象。这是在搞砸吗？

```
public Object getElementAt(int index) {
    return _snippetClasses[index];
} 
```

我没有看到任何堆栈跟踪，所以我认为它似乎找到了类（我尝试添加一个错字只是为了验证）。我还尝试查看 TransferSupport 对象的数据风格，但似乎有很多，所以我不知道这意味着什么。

我可以使用适当的数据风格来实现 canImport 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T09:17:08.333

如果您的 JList 使用字符串作为类型声明，那么您可以简单地使用 stringFlavor 作为默认 DataFlavor，如下所示：

```
public boolean canImport(TransferSupport support) {
    return support.isDataFlavorSupported(DataFlavor.stringFlavor);
} 
```

但是，如果您使用[Class 对象](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html "类对象")，那么我建议您实现自己的[Transferable](http://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/Transferable.html "可转让")来创建上面显示的 DataFlavor，因为人类可读的字符串部分对于非库存风格是完全任意的。

# wolfram-mathematica - 将曲线展开为圆形等高线图

> ID：15995087
> 
> 赞同：0
> 
> 时间：2013-04-14T02:25:39.393
> 
> 标签：wolfram-mathematica

上下文：两组数据，一组是半径，r，另一组是速度，v。v可以是正数和负数。以下代码

`p1=ListLogLogPlot[Table[{r[[i]],v[[i]]},{i,1,number_of_data}]]; p2=ListLogLogPlot[Table[{r[[i]],-v[[i]]},{i,1,number_of_data}],PlotStyle->{Red}]; Show[p1,p2]`

用于给出一条曲线，正负 v 均以对数坐标绘制。

问题：如何绘制圆形的等高线图，Log[r] 表示到圆心的距离，速度 (Log[v]) 根据 v 的符号显示为不同但连续变化的颜色和幅度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:42:46.460

你可以使用一个`DensityPlot`函数：

```
v[r_] := Sin[r]*r^2
DensityPlot[v[Norm[{x, y}]], {x, -5, 5}, {y, -5, 5}] 
```

您可以通过两种方式处理表格数据。您可以插值并使用上述插值函数，也可以使用`ListDensityPlot`函数：

```
ListDensityPlot[Table[With[{r = RandomReal[{0, 4}], t = RandomReal[{0, 2 Pi}]}, 
    {r Cos[t], r Sin[t], v[r]}], {10^4}]] 
```

我希望这有帮助。

# ember.js - Ember.js：避免当前路由在 url 动态段更新时重新输入（和重新渲染）

> ID：15995089
> 
> 赞同：1
> 
> 时间：2013-04-14T02:25:45.560
> 
> 标签：ember.js

**是否可以在不重新创建路由视图的情况下更新当前路由**的 URL 中的动态参数？

具体来说，假设我有一条处理`post/:post_id`. 这条路线的视图显示了给定的帖子，`id`但（以无限滚动样式）还允许用户平滑地向下滚动到后续帖子。我想更新网址以反映他们当前正在查看的帖子。如果我调用钩子触发，我`reaplceWith('post', newlyFocusedPost)`的`renderTemplate`原始视图将被破坏，呈现一个新视图，并且失去平滑度。

我喜欢 Backbone.js 的等价物：

```
router.navigate('posts/123', {navigate:false, replace:true}); 
```

另一个解决方案是，如果将相同的模板渲染到相同的插座中，则重用现有视图并更新其绑定。

*（我当前的解决方案是使用子路由 ，`postAtId`它处理没有视图的动态 id 以及对 的调用`controllerFor('post').set('content', newPost)`）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T17:19:39.017

当只有上下文发生变化时重新渲染可以说是一个错误。有一个[pull request](https://github.com/emberjs/ember.js/pull/2563)可以解决这个问题。

但也可以通过覆盖在您自己的路线中解决此问题，`renderTemplate`以便它仅在第一次进入路线后立即呈现。例如：

```
App.MyRoute = Ember.Route.extend({
  activate: function() {
    this.needsToRender = true;
  },
  renderTemplate: function() {
    if (this.needsToRender){
      this.needsToRender = false;
      render();
    }
  }
}); 
```

# c# - 如何检索最后按下的键数？

> ID：15995090
> 
> 赞同：0
> 
> 时间：2013-04-14T02:25:51.733
> 
> 标签：c#, keyboard

我正在尝试使用 e.KeyData，但它返回“NumPad2”或“D2”我希望只返回“2”，可以使用 e.keycode 或其他任何东西。因为它有效，我已经尝试转换为 int，但没有任何效果.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:38:10.177

这应该让你开始。

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
    string pressedKey = e.KeyData.ToString();

    if (pressedKey.StartsWith("D")) 
    { 
        pressedKey = pressedKey.Replace("D", "");
        MessageBox.Show(pressedKey);
    }

    if (pressedKey.StartsWith("NumPad"))
    { 
        pressedKey = pressedKey.Replace("NumPad", "");
        MessageBox.Show(pressedKey);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:42:11.603

经过一些研究，您似乎要么必须执行类似于 Rikki B 建议的操作，要么您可以创建一个自定义文本框并覆盖 OnKeyDown 和 OnKeyPress，如下所示：

首先创建自定义事件参数：

```
public class CustomKeyEventArgs : KeyEventArgs
{
    public char LastCharPressed { get; set; }

    public CustomKeyEventArgs(Keys keyData, char lastCharPressed) : base(keyData)
    {
        LastCharPressed = lastCharPressed;
    }
} 
```

然后在自定义文本框中进行设置：

```
 public delegate void CustomKeyUpHandler(object sender, CustomKeyEventArgs e);
    public event CustomKeyUpHandler OnCustomKeyUp;

    private char lastChar;
    protected override void OnKeyPress(KeyPressEventArgs e)
    {
        lastChar = e.KeyChar;
        base.OnKeyPress(e);
    }

    protected override void OnKeyUp(KeyEventArgs e)
    {
        if(OnCustomKeyUp != null)
            OnCustomKeyUp(this, new CustomKeyEventArgs(e.KeyData, lastChar));
        base.OnKeyUp(e);
    } 
```

# c - 如何在 OpenCV 中获得单独的轮廓（并填充它们）？

> ID：15995092
> 
> 赞同：8
> 
> 时间：2013-04-14T02:26:14.817
> 
> 标签：c, opencv

我试图分离图像的轮廓（为了找到统一的区域），所以我应用了 cvCanny，然后应用了 cvFindContours，然后我使用以下代码在每次按下一个键时绘制 1 个轮廓：

```
for( ; contours2 != 0; contours2 = contours2->h_next ){
        cvSet(img6, cvScalar(0,0,0));
        CvScalar color = CV_RGB( rand()&255, rand()&255, rand()&255 );
        cvDrawContours(img6, contours2, color, cvScalarAll(255), 100);
        //cvFillConvexPoly(img6,(CvPoint *)contours2,sizeof (contours2),color);
        area=cvContourArea(contours2);
        cvShowImage("3",img6);
        printf(" %d", area);
        cvWaitKey();
    } 
```

但是在第一次迭代中，它绘制了所有轮廓，第二次绘制了除了一个之外的所有轮廓，第三次绘制了除了两个之外的所有轮廓，依此类推。

如果我使用 cvFillConvexPoly 函数，它会填充大部分屏幕（尽管在我写这篇文章时我意识到凸多边形对我不起作用，我只需要填充轮廓的内部）

那么，如何在 for 的每次迭代中只取 1 个轮廓，而不是所有剩余的轮廓？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-14T03:50:22.247

您需要将传递给函数的最后一个参数（当前为`100`）更改为任`0`一或负值，具体取决于您是否要绘制子级。

根据文档（[http://opencv.willowgarage.com/documentation/drawing_functions.html#drawcontours](http://opencv.willowgarage.com/documentation/drawing_functions.html#drawcontours)），该函数具有以下签名：

```
void cvDrawContours(CvArr *img, CvSeq* contour, CvScalar external_color,
CvScalar hole_color, int max_level, int thickness=1, int lineType=8) 
```

来自相同的文档，`max_level`具有以下目的（最适用的部分以粗体显示）：

> max_level - 绘制轮廓的最大级别。**如果为 0，则仅绘制轮廓**。如果为 1，则绘制等高线及其在同一级别上的所有等高线。如果为 2，则绘制所有跟随的等高线和低于等高线一级的所有等高线，依此类推。**如果该值为负数，则该函数不绘制轮廓之后的轮廓，而是绘制轮廓的子轮廓，**直到 $|\texttt{max_level}|-1$ 级别。

# 编辑：

要填充轮廓，请为参数使用负值`thickness`：

> 厚度 - 绘制轮廓线的粗细。如果它是负数（例如，=CV_FILLED），则绘制轮廓内部。

# canvas - 画布 Arc 制作的圆圈在 IE10 中行为不端，在 Chrome 中正常——确认？

> ID：15995096
> 
> 赞同：4
> 
> 时间：2013-04-14T02:27:18.787
> 
> 标签：canvas, html5-canvas

**[编辑：发送错误报告：收到 closePath 需要弧线的回复->圆图]**

所以 IE 需要 closePath 在形成圆圈的弧上，但 Chrome/FF 让你不用：

```
context.beginPath();
context.arc(100,100,3,0,Math.PI*2,false);
context.closePath(); 
```

**结束编辑**

///////////////////////////////////////// /////

此代码应该只是在 html 画布中显示圆圈的行和列。

其他人可以确认这在 Chrome 中显示正常而在 IE中显示**奇怪吗？**

如果是这样，任何想法为什么？

我正在运行 IE 版本：10.0.9200.16540。

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/P72NM/](http://jsfiddle.net/m1erickson/P72NM/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    var spacing=15;
    var linespacing=8;
    var radius=3;

    ctx.lineWidth=linespacing;
    ctx.fillStyle="maroon";

    ctx.strokeStyle="red";
    ctx.beginPath();
    for(var row=5;row<canvas.height;row+=spacing*3){
        for(var col=5;col<canvas.width;col+=spacing*3){
            ctx.arc(col,row, 4, 0, 2 * Math.PI, false);
        }
    }    
    ctx.fill();

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T19:41:53.867

重要的是要注意**Chrome 在这里是不正确的。**IE10 和 Firefox 正确地遵循规范。

在这样一个简单的例子中更明显：

```
ctx.fillStyle = 'rgba(255,0,0,.4)';

ctx.beginPath();
ctx.arc(50,50,20,Math.PI*2, 0);
ctx.arc(50,150,20,Math.PI*2, 0);
ctx.arc(150,100,20,Math.PI*2, 0);

ctx.stroke();
ctx.fill(); 
```

[http://jsfiddle.net/ZMKEG/](http://jsfiddle.net/ZMKEG/)

这样的结果：

![在此处输入图像描述](https://i.stack.imgur.com/fbhL5.png)

根据规范，该`arc`命令将两个点添加到子路径以及它们之间的弧。它不会关闭子路径，并且**只会**`moveTo`在当前路径的开头添加一个隐式。IE 和 Firefox 在这里做的是正确的事情。

`moveTo`Chrome 是（半）假设弧调用之间的一种，但仅用于填充。

换句话说，在几个`arc`命令之间应该有直线，因为 Chrome 在`stroke()`应用时正确显示。Chrome 不尊重这些行进行填充，这是一个错误。

# c++ - 默认构造函数 c++ 随机数有效吗？

> ID：15995097
> 
> 赞同：0
> 
> 时间：2013-04-14T02:27:27.423
> 
> 标签：c++, statistics, default

我是 C++ 新手，对默认构造函数不太熟悉。我被要求编写一个名为 Stats 的类，并在默认构造函数中编写一个构造函数，该构造函数使用随机数生成器在 minValue 和 maxValue 之间生成 sampleSize int，然后将其存储在一个名为 data[] 的数组中。到目前为止，每当我使用默认构造函数时，我都会将它们初始化为零或 null。我不确定如何使用这些设置指令编写默认构造函数，以便我的代码可以正确运行而不会出错。这是我所拥有的

```
#include <iostream>

using namespace std;

class Stats
{
private:
    int sampleSize, minValue, maxValue;
    int data[];

public:
    Stats()
    {
        sampleSize = 0;
        minValue = 0;
        maxValue = 0;
        data[] = sampleSize;
    }
    Stats(int samleSize, int min, int max)
    {
        samplesize = samleSize;
        minValue = min;
        maxValue = max;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:28:10.623

```
data[] = sampleSize; 
```

在 C++ 中不是有效的语法。你不能用它来初始化一个数组。

同时，`data[]`没有类型。你应该做

```
int data[]; 
```

您还需要先为`data`数组分配内存，然后尝试使用随机数生成器将数字放入其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:36:08.940

因此，据我所知，您希望`int`保存一个动态大小的 s数组`data`，您当前的语法不正确，但这些内容应该是您正在寻找的东西。首先`data`需要是`pointer`：

```
int *data; 
```

然后你的构造函数看起来像这样：

```
Stats()
{
    sampleSize = 0;
    minValue = 0;
    maxValue = 0;
    data = NULL;
}

Stats(int samleSize, int min, int max)
{
    sampleSize = samleSize;
    minValue = min;
    maxValue = max;
    data = new int[sampleSize] ;
} 
```

一旦你`pointer`的班级中有一个，你还需要有一个`destructor`，这样你就可以释放与它相关的内存，`pointer`它应该看起来像这样：

```
~Stats()
{
  if( NULL != data )
  {
     delete [] data ;
  }
} 
```

这是假设您需要为您的分配坚持动态分配的内存，如果您被允许使用，`std::vector`那么这将成为一个更简单的问题，`data`变成这样：

```
 std::vector<int> data ; 
```

而且您根本不需要担心分配，然后当您需要向其中添加数据时，您只需调用`push_back`：

```
 data.push_back( randomNumber ) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T02:39:37.073

您可以`std::vector`用于数据。由于并非所有实例的大小都是固定的。

```
class Stats
{
private:
    int sampleSize, minValue, maxValue;
    vector<int> data;
    ^^^^^^^^^^^^^^^^

public:
    Stats()
    {
        sampleSize = 0;
        minValue = 0;
        maxValue = 0;
        data.reserve(sampleSize); // Just to avoid reallocations.

    } 
```

# java - mac 10.8 上的 Java EE 6 SDK 安装问题

> ID：15995102
> 
> 赞同：20
> 
> 时间：2013-04-14T02:28:06.820
> 
> 标签：java, macos

我下载了`java_ee_sdk-6u4-jdk7-linux-x64-ml.sh`安装文件，甚至通过命令更改了权限`chmod +x java_ee_sdk-6u4-jdk7-linux-x64-ml.sh`，但收到以下错误：

> 该程序需要设置 DISPLAY 环境变量。
> 请在为 DISPLAY 分配适当的值后重新运行。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-14T02:34:58.503

尝试按如下方式设置显示变量

```
export DISPLAY=:0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T13:25:01.390

您还可以更改为 C shell (csh) 并设置 display=:0 并重新运行 shell 脚本。

# c++ - 无法正确禁用 gl 颜色材料

> ID：15995105
> 
> 赞同：0
> 
> 时间：2013-04-14T02:28:14.977
> 
> 标签：c++, opengl, glut

我有灯光效果很好的场景。我想添加一个会消失的天空盒，所以我正在使用

```
glEnable(GL_BLEND)
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

与 glColor4f 一起执行此操作，并且效果很好。但是要让淡入淡出工作，我需要启用 GL_COLOR_MATERIAL 来完全摆脱我的灯光效果。我试着把天空盒部分夹在中间

```
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
(..light details..)

glEnable(GL_COLOR_MATERIAL);
(drawSkyBox)|
glDisable(GL_COLOR_MATERIAL);
(draw rest of scene) 
```

但这只是让淡入淡出工作并且仍然没有显示我的照明。奇怪的是，如果这样做

```
glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
(..light details..)

glEnable(GL_COLOR_MATERIAL);
glDisable(GL_COLOR_MATERIAL);
(drawSkyBox)

(draw rest of scene) 
```

我失去了淡入淡出和我的灯光效果。我是否正确使用 GL_COLOR_MATERIAL？如果我立即启用和禁用，不应该没有任何效果，让我的照明完好无损吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:43:59.833

天空盒可能不应该受到光照的影响。没有什么比你的天空和云层上的大闪亮镜面反射更让它看起来很奇怪的了。因此，在渲染时禁用照明是有意义的。如果照明关闭，顶点只会采用您指定的任何颜色（使用 glColor）。

如果照明打开，顶点将采用灯光颜色和材质属性的组合。您可以为每个顶点分别设置环境、漫反射和镜面反射颜色过滤器，它们将与来自灯光的相关颜色以及其他一些数学相乘，以考虑方向和衰减。如果通常情况下，您只更改环境和漫反射颜色，并且您希望它们相同，因为您已经将光源的环境和漫反射属性设置为白色，环境显着变暗比漫反射，那么您可以启用 COLOR_MATERIAL 然后设置 glColor() 与使用 GL_AMBIENT_AND_DIFFUSE 调用 glMaterial 相同。

# r - 将英镑符号添加到 ggplot

> ID：15995106
> 
> 赞同：4
> 
> 时间：2013-04-14T02:28:35.977
> 
> 标签：r, ggplot2, symbols

同样，这可能真的很明显，但是我怎样才能在 ggplot 中添加一个英镑符号呢？

我一直在努力

```
ylab(expression(symbol('\U00a3'))) 
```

在例如

```
library(ggplot2)
qplot(1:10,1:10,geom='line')+ylab(expression(symbol('\U00a3'))) 
```

但我得到了一个罗马化的 R。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T06:17:59.067

`symbol`查找 Adob​​e Symbol 编码，而您想使用转义的 unicode 字符。因此不要使用`expression(symbol('\U00a3'))`. Adobe Symbol 编码中没有英镑符号（例如，您可以使用 获得欧元符号`expression(symbol('\240'))`）。

我不能轻易告诉你为什么`expression(symbol('\U00a3'))`返回`Rfraktur`and`lessequal`符号。有趣的`lessequal`是`'\243'`，is 的符号代码也是 Adob​​e 拉丁文编码中英镑符号的代码。`Rfraktur`由 给出`'\302'`。

要获得英镑符号，请使用以下命令：

```
qplot(1:10,1:10,geom='line')+ylab('\U00a3') 
```

![在此处输入图像描述](https://i.stack.imgur.com/2ljRZ.jpg)

或者你可以使用

```
qplot(1:10,1:10,geom='line')+ylab(expression('\U00a3')) 
```

哪个会做同样的事情。

# joomla - Joomla 3：如何从菜单项中调用文章并将该菜单显示为活动？

> ID：15995111
> 
> 赞同：1
> 
> 时间：2013-04-14T02:29:08.520
> 
> 标签：joomla, menu

我的横幅上有一个标准的导航菜单。然后我在我的身体区域下面有另一个菜单，它用于通过使用 css 样式显示为“选项卡”。因此，每个选项卡（实际上是菜单）都有自己的文章。

现在，当我单击一个选项卡时，文章会显示。但我有一个指向顶部菜单上第一个选项卡的链接（在我的横幅中）。这链接到第一个选项卡中的文章。单击横幅中的菜单项时，第一个选项卡的文章显示正常。但它不会将第一个选项卡显示为活动状态。第一个选项卡仅在我单击它时显示为活动链接。

单击横幅中的菜单项时，如何使选项卡（菜单项）处于活动状态？

为了更好地说明这一点，我附上了一张截图。 ![在此处输入图像描述](https://i.stack.imgur.com/miv5V.jpg) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:54:44.907

首先，您需要将两个菜单放在一个菜单中，因为第二个基本上是第一个的子菜单。完成后，您将“拆分”为两个模块：对于顶部菜单，您将模块选项设置为“开始级别”1 和“结束级别”1。并且“显示子菜单项”设置为“否”。第二个模块的“起始级别”设置为 2。

那可能应该做你想做的事。

# c++ - 在屏幕上定位光标

> ID：15995113
> 
> 赞同：0
> 
> 时间：2013-04-14T02:29:23.397
> 
> 标签：c++

一直在这几个小时，无法弄清楚如何以我想要的方式得到这个。

我需要它使文本在控制台输出中居中，如下所示...

```
*******************************************
            ABC Industries
                Report
******************************************* 
```

相反，它是这样出来的..

```
 **********************************
ABC Industries
Report
    ********************************** 
```

这是我到目前为止所得到的，任何帮助将不胜感激。

```
#include <string>
#include <iomanip>
#include <iostream>
#include <windows.h>
#include <cctype>
using namespace std;

class Heading
{
private:
    string companyName;
    string reportName;
public:
    Heading();
    void placeCursor(HANDLE, int, int);
    void printStars(int);
    void getData(HANDLE, Heading&);
    void displayReport(HANDLE, Heading);
};

int main()
{
    Heading display;
    HANDLE screen = GetStdHandle(STD_OUTPUT_HANDLE);
    display.getData(screen, display);
    display.displayReport(screen, display);
    cin.get();
    return 0;
}

Heading::Heading()
{
    companyName = "ABC Industries";
    reportName = "Report";
}

void Heading::placeCursor(HANDLE screen, int row, int col)
{
    COORD position;
    position.Y = row;
    position.X = col;
    SetConsoleCursorPosition(screen, position);
}

void Heading::printStars(int n)
{
    for(int star=1; star<=n; star++)
        cout << '*';
    cout <<endl;
}

void Heading:: getData(HANDLE screen, Heading &input)
{
    string str;
    placeCursor(screen, 2, 5);
    cout <<"Enter company name";
    placeCursor(screen, 2, 26);
    getline(cin, str);

    if(str!="")
        input.companyName = str;
    placeCursor(screen, 4, 5);
    cout<<"enter report name";
    placeCursor(screen, 4, 26);
    getline(cin, str);
    if(str!="")
        input.reportName = str;
}

void Heading::displayReport(HANDLE screen, Heading input)
{
    int l;
    placeCursor(screen, 8, 5);
    printStars(69);
    string str=input.companyName;
    l= str.length();
    l=39-l/2;
    placeCursor(screen, 9, 1);
    cout << str;
    str=input.reportName;
    l=str.length();
    l=39-l/2;
    placeCursor(screen, 10, 1);
    cout << str;
    placeCursor(screen, 11, 5);
    printStars(69);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:15:36.323

你会踢自己..

注意在 Heading::displayReport 中，您计算​​公司名称的长度，然后将其除以 2 并从 39 中减去。然后继续将光标定位到 9,1（九，一）。

您的意思是将光标位置设置为 9,l (nine, el)。

然后，您也重复对 reportName 字段的监督。;-p

所以，做这两个改变

```
//    placeCursor(screen, 9, 1);
    placeCursor(screen, 9, l); 
```

和

```
//    placeCursor(screen, 10, 1);
    placeCursor(screen, 10, l); 
```

# perl - awk 分析文件

> ID：15995115
> 
> 赞同：0
> 
> 时间：2013-04-14T02:29:57.513
> 
> 标签：perl

在这方面需要一些帮助这是我拥有和想要做的这是我的文件名为 file.txt

```
Sequences   times       Ip1     ip2     Protocol        info
1       2   10.18.19.12 12.29.29.18 udp     hsahdsdd
2       4   10.13.15.67 12.28.29.19 tcp     blabla
3       7   10.12.27.28 12.17.281.19    udp     hkkkljkl 
```

我想（使用 awk）

*   计算我有多少行并打印该信息 + 在名为 protocol.tx 的输出文件中找到的所有协议名称
*   计算 IP1 的行数并将所有 Ip 的列表添加到另一个名为 ip.txt 的输出文件中

谢谢在这里我尝试

```
#!/usr/bin/perl
$fname = $ARGV[0];
open(FILE, $fname) || die ("cant read \n");
while($ligne=<FILE>)
{
chop ($ligne);
my ($No, $time, $Ip1, $Ip2, $Proto, $info) = split (/ /, $ligne_);
}
system("awk '{print \$6}' $fname");
system ("awk 'END {print NR}' $fname") >line.txt; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T02:34:29.697

这种形式`system`需要一个shell命令，所以

```
use autodie qw( system );
use String::ShellQuote qw( shell_quote );

system(shell_quote('awk', 'END {print NR}', $fname) . ">line.txt"); 
```

但是`awk`在 Perl 中使用来完成这项微不足道的工作是很愚蠢的。

# haskell - 如何为 Typeable 添加实例声明

> ID：15995116
> 
> 赞同：4
> 
> 时间：2013-04-14T02:29:59.180
> 
> 标签：haskell

> [...] 想要在遗留代码库中找到变量 foo 在 if 条件中使用的所有位置。
> 
> ————[为什么 Haskell 值得学习](http://spin.atomicobject.com/2013/03/05/why-haskell/)

我的代码是

```
import Language.C
import Data.Generics
import Control.Monad
import Text.Read

parseAndFindFoos :: FilePath -> IO (Either ParseError [Position])
parseAndFindFoos path = liftM (fmap findFooLocations) (parseCFilePre path)
findFooLocations input = fmap posOf (listify isIfOfInterest input)
isIfOfInterest (CIf cond _ _ _) = not (null (listify isFooIdent cond))
isFooIdent (Ident name) = (name == "foo") 
```

如何为（Typeable Lexeme）添加实例声明？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T02:36:32.260

```
{-# LANGUAGE DeriveDataTypeable, StandaloneDeriving #-}
import Data.Typeable

deriving instance Typeable Lexeme 
```

应该管用。

然而，有一个陷阱，这仅适用于要在库中定义此实例的情况。 `Lexeme`将成为 的实例`Typeable`，如果任何其他库包含类似的实例，则会发生冲突。不幸的是，您真正可以确保不添加的全局`Typeable`实例`Lexeme`是希望它`base`在某个时候被添加，或者使用`newtype`包装器并手动 wrap 和 unwrap `Lexeme`。

```
newtype LexemeWrapper = WrapLexeme { unwrapLexeme :: Lexeme } deriving Typeable 
```

# ubuntu - Ubuntu 13.04 关机倒计时

> ID：15995117
> 
> 赞同：-2
> 
> 时间：2013-04-14T02:30:01.417
> 
> 标签：ubuntu, shutdown

我从 9.04 版本开始使用 Ubuntu，发现一个非常有用的功能，即关机 60 秒。

但是，对于 13.04，此功能已被删除。

那么，我可以配置系统以便它可以保留这个吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T17:16:34.160

如果您如此热衷于这样做，您也可以`shutdown`从终端使用该软件：

```
sudo shutdown -h +1 "The computer is now shutting down." 
```

# indicator - 如何编程此指标脚本以处理股票而不仅仅是期货

> ID：15995118
> 
> 赞同：1
> 
> 时间：2013-04-14T02:30:04.670
> 
> 标签：indicator, trading

我发现了这个.. 将其发布在 Amibroker 编辑器中.. 已保存.. 在进一步研究后发现.. 它仅适用于代码中 if 语句中列出的期货.. 我想看看这是股票..任何想法..

```
// ACD Plot
// LSMA is Linreg
// ACD.afl
// v 1.2 9/13/2004

SetChartBkColor(16);

Per = Param("Periods",13);
Per2 = Param("Periods 2",34);
LSMAPer = Param("LMSA Period",25);
Offset = Param("A Level",1);
ACDFlag = 0;
IntervalFlag = IIf(Interval(format=0)==300,1,0);

strInterval = Interval(format=2);

strWeekday = StrMid("SunMonTueWedThuFriSat", SelectedValue(DayOfWeek())*3,3);

if( StrFind( Name(), "YM" ) )
{
    ACDOffset = 10;
    ACDFlag = 1;
    ACDTime = 94500;
}

if( StrFind( Name(), "ER" ) )
{
    ACDOffset = 0.5;
    ACDFlag = 1;
    ACDTime = 93500;
}

if( StrFind( Name(), "ES" ) )
{
    ACDOffset = 2;
    ACDFlag = 1;
    ACDTime = 94500;
}

if( StrFind( Name(), "NQ" ) )
{
    ACDOffset = 3;
    ACDFlag = 1;
    ACDTime = 94500;
}

if( StrFind( Name(), "ZB" ) )
{
    ACDOffset = 0.15;
    ACDFlag = 1;
    ACDTime = 83000;
}

if( StrFind( Name(), "ZN" ) )
{
    ACDOffset = 0.15;
    ACDFlag = 1;
    ACDTime = 83000;
}

GraphXSpace = 1;
Shift = 2;

// calculate the pivot range
PDH = TimeFrameGetPrice( "H", inDaily, -1 ); // gives previous Day High when working on intraday data
PDL = TimeFrameGetPrice( "L", inDaily, -1 );
PDC = TimeFrameGetPrice( "C", inDaily, -1 );
PP = (PDH+PDL+PDC)/3;

DIFF = abs((PDH+PDL)/2 - PP);
PRHi = PP + DIFF;
PRLo = PP - DIFF;

EMA1 = EMA(Avg,Per);
EMA2 = EMA(Avg,Per2);
LSMA = LinearReg(Avg, LSMAPer);

Plot(C, "Close",colorWhite,styleCandle);

if (ACDFlag AND IntervalFlag) {
    ORHigh= ValueWhen(TimeNum()<ACDTime,HighestSince(DateNum()>Ref(DateNum(),-1),High));
    ORLow = ValueWhen(TimeNum()<ACDTime,LowestSince(DateNum()>Ref(DateNum(),-1), Low));

    Plot(PRHi,"PRHigh",colorWhite,styleDots+styleNoLine+styleNoLabel);
    Plot(PRLo,"PRLow",colorWhite,styleDots+styleNoLine+styleNoLabel);
    Plot(ORHigh,"ORHigh",colorBlue,style=styleStaircase+styleDots+styleNoLine+styleNoLabel);
    Plot(ORLow,"ORLow",colorBlue,style=styleStaircase+styleDots+styleNoLine+styleNoLabel);
    Plot(ORHigh+ACDOffset,"AUp",colorYellow,style=styleStaircase+styleDots+styleNoLine);
    Plot(ORLow-ACDOffset,"ADn",colorYellow,style=styleStaircase+styleDots+styleNoLine);
    // Plot(LSMA, "LSMA", colorYellow,style=styleThick);
}

Title=Name()+" ["+strInterval+"] "+ strWeekday + " " +Date()+ " Close: "
+WriteVal(C,format=1.2) +" "+WriteVal(per,format=1.0)+"-Per MA: "
+WriteVal(EMA1,format=1.2)+" " + WriteVal(per2,format=1.0)+"-Per MA: "
+WriteVal(EMA2,format=1.2) + " PR High: "+WriteVal(PRHi,format=1.2) + " PR Low: "
+WriteVal(PRLo,format=1.2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T04:18:10.620

这是我在 Amibroker 论坛上得到的回复.. 以为我会分享答案..

这既是指标也是探索（然而——这段代码使用了非常古老的方法，现在使用 PLOT 或 ADDCOLUMN 函数代替这种过时的编码风格要方便得多）

公式中只有一些错误，因为它使用赋值而不是相等检查，因此您需要替换：

HiLo=IIf(HLv=-1,

和

HiLo=IIf(HLv == -1,

与 - HiLoInvert=IIf(HLv=-1,

这是因为 == (double =) 是用于相等检查的运算符。

# python - 将多个列表写入 CSV

> ID：15995120
> 
> 赞同：0
> 
> 时间：2013-04-14T02:30:28.730
> 
> 标签：python, csv

我有两个清单：

```
x = [['a','b','c'], ['d','e','f'], ['g','h','i']]
y = [['j','k','l'], ['m','n','o'], ['p','q','r']] 
```

我想写入列表`x`并写入`y`CSV 文件，以便它在列中读取：

第 1 栏：
a
b
c

第 2 栏：
j
k
l

第 3 栏：
d
e
f

第 4 栏：
m
n
o

等等。我不太确定该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:49:34.863

您可以使用`zip`转置和`csv`创建输出文件，例如：

```
x = [['a','b','c'], ['d','e','f'], ['g','h','i']]
y = [['j','k','l'], ['m','n','o'], ['p','q','r']]

from itertools import chain
import csv
res = zip(*list(chain.from_iterable(zip(x, y))))
with open(r'yourfile.csv', 'wb') as fout:
    csvout = csv.writer(fout)
    csvout.writerows(res) 
```

如果您的长度不相等，那么您可能希望查看[itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)并指定一个合适`fillvalue=`的而不是使用内置`zip`

# asp.net - 使用 asp.net ImageResizer api

> ID：15995121
> 
> 赞同：3
> 
> 时间：2013-04-14T02:30:32.560
> 
> 标签：asp.net, image-resizing, imageresizer

我正在使用 ImageResizer (imageresizing.net)，并且能够创建调整大小的图像：

```
public void DoMagic(string original)
{
    string newImage = Server.MapPath("~/Images/test.png");
    ResizeSettings setting = new ResizeSettings("width=100&height=200");
    ImageBuilder.Current.Build(original, newImage,  setting);
} 
```

我不知道如何使用灰度或亮度：

```
s.grayscale=true|y|ry|ntsc|bt709|flat (true, ntsc, and y produce identical results)

s.brightness= -1..1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:08:33.900

我只是忘了安装 SimpleFilters 插件。之后就跟着[这个](http://imageresizing.net/plugins/simplefilters) 然后这个

```
ImageBuilder.Current.Build(original, newImage, new ResizeSettings("width=100&height=200&crop=auto&s.grayscale=true")); 
```

# cmake - 使用 CMake 编译 Vala 项目

> ID：15995122
> 
> 赞同：2
> 
> 时间：2013-04-14T02:31:26.140
> 
> 标签：cmake, vala

我想用 CMake 编译一个依赖 libappindicator 的 Vala 项目。

但是，使用此输出进行中止：

```
Linking C executable calm
CMakeFiles/calm.dir/src/CalmWindow.c.o: In function `__lambda6_':
CalmWindow.c:(.text+0x5b8): undefined reference to `app_indicator_set_status'
CMakeFiles/calm.dir/src/CalmWindow.c.o: In function `calm_calm_indicator_construct':
CalmWindow.c:(.text+0x6ee): undefined reference to `app_indicator_new'
CalmWindow.c:(.text+0x746): undefined reference to `app_indicator_set_status'
CalmWindow.c:(.text+0x76c): undefined reference to `app_indicator_set_attention_icon'
CalmWindow.c:(.text+0xe87): undefined reference to `app_indicator_set_menu'
collect2: ld gab 1 als Ende-Status zurück
make[2]: *** [calm] Fehler 1
make[1]: *** [CMakeFiles/calm.dir/all] Fehler 2
make: *** [all] Fehler 2 
```

我的 CMakeLists.txt 有问题吗？

此命令有效：

```
valac -g --pkg gtk+-3.0 --pkg gstreamer-0.10 --pkg gstreamer-audio-0.10 --pkg granite --pkg appindicator3-0.1 CalmApp.vala Calm.vala CalmWindow.vala 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:03:25.320

这样就可以了：

```
[...]
###########
set(COMPILE_OPTIONS_VALA ${COMPILE_OPTIONS_VALA} -D USE_APPINDICATOR)
set(PACKAGES_VALA ${PACKAGES_VALA} "appindicator3-0.1")
###########

include(ValaPrecompile)
vala_precompile(VALA_C
        src/Calm.vala
        src/CalmApp.vala
        src/CalmWindow.vala
PACKAGES
        gtk+-3.0
        gstreamer-0.10
        gstreamer-audio-0.10
        appindicator3-0.1
CUSTOM_VAPIS
        vapi/config.vapi
OPTIONS
        --thread
)
[...] 
```

# javascript - getElementByName 返回类型错误？

> ID：15995124
> 
> 赞同：5
> 
> 时间：2013-04-14T02:32:01.957
> 
> 标签：javascript, checked, unchecked

我的代码：

```
var isSomethingChecked = (document.getElementByName("koalaCheck").checked ||
                          document.getElementByName("kangarooCheck").checked); 
```

为什么这段代码会抛出一个名为“类型错误”的异常？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-14T02:36:36.167

没有调用函数`getElementByName`。您需要的是`getElementsByName`返回具有该名称的所有元素的数组。所以你可以使用：

```
var isSomethingChecked = (document.getElementsByName("koalaCheck")[0].checked ||    
                         document.getElementsByName("kangarooCheck")[0].checked); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T02:34:39.763

那是因为正确的方法是`document.getElementsByName()`. 你错过了一个s。

查看[文档](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByName)。

假设您不希望检查每个元素的每个检查状态（因为此方法返回一个数组）.. 我会使用`document.getElementById()`.. 但那是没有看到您的 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T02:39:22.050

`getElementsByName`返回具有给定名称的所有元素的数组。您需要使用该`getElementById`函数或在返回的数组中指定特定元素，如下所示：

```
var isSomethingChecked = (document.getElementsByName("koalaCheck")[0].checked || document.getElementsByName("kangarooCheck")[0].checked); 
```

您会收到“类型错误”，因为您正在检查是否检查了数组而不是特定元素。

# c# - 装饰器模式的正确应用

> ID：15995125
> 
> 赞同：0
> 
> 时间：2013-04-14T02:32:02.377
> 
> 标签：c#, design-patterns

所以装饰器模式允许你动态地向一个类添加行为，对吧？但是，装饰器必须从获得行为的类的基类继承，或者必须实现其接口之一。事实上，我能回忆起的所有示例都有一个公开的函数，因此应用装饰器效果很好，但是如果你想让装饰器添加行为，例如记录到没有相同接口的各种类 - 它不会工作. 我在这里错过了什么吗？这是否暗示我想要记录的所有类都应该包装在同一个接口中，比如命令或其他东西？

例如

```
class A
{
    whatever();
    idontknow();
}

class B
{
    bananas();
} 
```

我无法制作装饰器来记录这些类中函数的调用，因为它们不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:14:20.250

我相信您可能误解了装饰器模式，并且从您对问题的解释来看，您似乎确实需要其他东西：您需要实现横切关注点 - 一些可以应用于完全不相关行为的常见功能。例如，您想围绕不相关的功能进行日志记录。

这称为[面向方面编程](http://en.wikipedia.org/wiki/Aspect-oriented_programming)，简称 AOP。

有一些工具可以让你拦截对方法的调用，并用所需的行为来增强它们，即你可以在方法调用周围添加日志记录，或者确保用户有足够的权限来执行调用等。其中一些工具在.NET 通过修改 IL 来实现这一点，而其他人则在运行时动态包装类型。

我在[这个答案](https://stackoverflow.com/questions/12437368/handling-custom-attributes/12437559#12437559)和[这里也](https://stackoverflow.com/questions/15323009/implement-method-decorators-in-c-sharp/15343762#15343762)提供了一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T02:45:27.723

装饰器只需要像这样“模仿”基类：

```
Class ADecorator : A {
  ADecorator(A a) { /* etc */ }

  void whatever();
  void idontknow();
}

class BDecorator1 : B {
  BDecorator1(B b) { /* etc */ }

  void bananas();
}

class BDecorator2 : B {
  BDecorator2(B b) { /* etc */ }

  void bananas();
} 
```

并在其构造函数中接受基类的实例。

# three.js - Three.js 和 Opera 着色器

> ID：15995127
> 
> 赞同：0
> 
> 时间：2013-04-14T02:32:13.193
> 
> 标签：three.js, opera

我用 nvidia gt 440 运行 win 7 x64。

我在使用 Opera 12.15 时遇到了这个问题：

```
226: #ifdef USE_SHADOWMAP
227: for( int i = 0; i < MAX_SHADOWS; i ++ ) {
228: vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;
229: }
230: #endif
231: }

[13-04-2013 14:49:04] JavaScript - http://www.renatovieira.net/
console.error
Could not initialise shader
VALIDATE_STATUS: true, gl error [1281] 
```

你能帮我解决这个问题吗？我想知道...如果 Opera 不能处理这个，我可以降级 three.js 禁用这个功能吗？

提前谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:55:23.047

您可以尝试禁用渲染器 ( `renderer.shadowMapEnabled = false`) 中的阴影。您可能还需要确保没有在灯光或其他对象上设置任何`castShadow`属性`receiveShadow`。

话虽如此，过去 Opera 的 WebGL 实现已经被认为是脆弱的，所以如果它遇到另一个错误我不会感到惊讶。

# css - CSS：以固定位置居中内容

> ID：15995129
> 
> 赞同：0
> 
> 时间：2013-04-14T02:32:26.600
> 
> 标签：css, scroll, fixed, centering

我无法同时保持图层固定和居中。我不能应用 margin: auto 因为我的图层没有任何宽度值，这是一件很充实的事情。

我找到了这个：[https ://stackoverflow.com/a/1777282/2114455](https://stackoverflow.com/a/1777282/2114455)

将图层居中是一个很好的解决方案，但是我如何保持这个居中的图层固定（我的意思是，滚动时不要移动）

我把它们都放在一个位置：固定；div 但这不起作用。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:45:27.250

也许我不理解您的问题，但是如果您从链接到“固定”的解决方案中更改外部 div 的位置，它应该可以工作。

```
<div style="position: fixed; left: 50%;">
    <div style="position: relative; left: -50%; border: dotted red 1px;">
        I am some centered shrink-to-fit content! <br />
        tum te tum
    </div>
</div> 
```

（这个在行动中的小提琴：http: [//jsfiddle.net/Rykus0/TQw2j/](http://jsfiddle.net/Rykus0/TQw2j/)）

# php - 检测单段重写规则 apache

> ID：15995131
> 
> 赞同：0
> 
> 时间：2013-04-14T02:32:45.927
> 
> 标签：php, apache, url-rewriting

我陷入了一个非常基本的事情，我正在尝试将单个段 url 重定向到页面

```
RewriteRule /([A-Za-z0-9]+)$ index.php?c=profile&val=$1 [NC,L] 
```

这适用于像这样的 URL

```
sitename.com/myurl 
```

但问题是它也适用于像这样的 URL

```
sitename.com/myurl/something 
```

或者

```
 sitename.com/myurl/something/x/y/z 
```

我希望它只适用于主机名之后的单个段，如果我在开始时将它与 ^ 符号一起使用，它根本不起作用

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T02:42:37.277

您仍然必须使用`^`，但必须省略前导`/`

```
 RewriteRule ^([A-Za-z0-9]+)$ index.php?c=profile&val=$1 [NC,L] 
```

为了与较旧的 mod_rewrite 版本兼容，您经常会看到类似`^/?`. 但是当前的 Apaches mod_rewrite 已经去除了前导斜杠（来自 RewriteRules 主要操作的 REQUEST_URI）。

# php - 使用 php 的动态 html 菜单

> ID：15995132
> 
> 赞同：1
> 
> 时间：2013-04-14T02:32:53.057
> 
> 标签：php

我正在尝试构建一个个人网站（对 HTML 和 PHP 来说相当新）并且在构建动态菜单栏时遇到了麻烦。通过动态，我的意思是我希望突出显示使用的页面。

现在我的页面上有一个水平菜单（主页、联系人等），并设置了 CSS，以便当其中一个链接具有属性`class="active"`时，该项目保持突出显示（因此用户知道哪个页面他或她在）。

例如，在静态 HTML 页面中，我会将以下代码复制并粘贴到其他静态页面，然后更改`class="active"`属性的位置以与正确的页面对齐：

```
<a href="?page=home" class="active">Home</a>
<a href="?page=pagetwo">Page Two</a>
<a href="?page=contact">Contact</a> 
```

我显然希望使用 PHP 能够最大限度地减少我散落在各处的重复代码的数量。

到目前为止，我一直遵循此[页面](https://stackoverflow.com/questions/3329847/use-common-template-for-all-pages-of-website)上的第一个答案，效果很好。我可以单击一个菜单项，内容就会出现在页面的正文中。然而：

*   我无法让它动态突出显示菜单，因为菜单选项（`<a href />`行）不是通过 PHP 动态创建的。
*   当我直接通过index.php进入页面时，出现错误：

> 注意：未定义的索引：第 43 行 C:\xampp\htdocs\index.php 中的“页面”

很明显，当我直接去页面时，`?page=home`该行中没有设置变量：

```
<a href="?page=home">Home</a> 
```

因此，尚未设置 GET 中的“页面”变量。我用 if 语句解决了这个问题，该语句检查它是否未设置并发送主页 html。但是，我认为这不是最好的方法，当我尝试处理 b) 部分时，我认为我需要完全改变这一点。我的整个 PHP 脚本是这样的：

```
<?php

$current_page = 'home';
$pages = array('home', 'pagetwo', 'contact');

function setActiveHeader() {

  global $current_page;
  global $pages;
  $arr_length = count($pages);

  for($x=0;$x<$arr_length;$x++) {
    if($pages[$x] == $current_page) {
      echo "<a href=\"?page=$pages[$x]\" class=\"active\">$pages[$x]</a>";
    } else {
      echo "<a href=\"?page=$pages[$x]\">$pages[$x]</a>";
    }
  }

}

function putPage($page) {
    // put a list of allowed pages here
    global $pages;

    $page = trim($page);
    $page = (in_array($page, $pages)) ? $page : 'home';

    // set current page global variable
    $GLOBALS['current_page'] = $page;

    // output contents of page selected
    echo @file_get_contents('.\html\\' . $page . '.html');
}

?> 
```

我只是尝试`setActiveHeader()`从 HTML 调用，但这不起作用。菜单输出正确，但正确的项目没有突出显示，它只是停留在突出显示的主页选项上。不知道为什么不更新。有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:43:31.533

你的代码最多只有 37 行，如果没有错误引用的那一行，我们就不能多，但我会尽力而为。

基本上，这`Undefined Index`意味着您正在尝试访问未设置的数组中的元素。我*猜*你正在尝试访问`$pages['page']`.

有两种方法可以解决此问题。在第四行添加`page`到数组：`$pages`

```
pages = array('home', 'pagetwo', 'contact', 'page'); 
```

**或者**用 if 语句包裹第 43 行：

```
<?php

$pages = array('home', 'about');

if (isset($pages['page'])) {
    echo $pages['page'];
}

?> 
```

* * *

然而，更简单的方法是使用 CSS：

**主页.php**

```
<html>
    <head>
        <title>Foo</title>
    </head>

    <body id="home">
        <ul class="menu">
            <li id="link-home"><a>Home</a></li>
        </ul>
    </body>
</html> 
```

**样式.css**

```
body#home {
    // active link styling here
} 
```

# java - 设计报表调度服务的建议

> ID：15995137
> 
> 赞同：0
> 
> 时间：2013-04-14T02:33:10.260
> 
> 标签：java, spring, hibernate, spring-integration

我正在用 Java 设计一个报告计划程序服务。任务是在数据库中查找并查找是否有任何报告应在此特定时间执行。如果是，我们需要触发报告生成任务。报告可以安排在特定时间（例如：星期一 @ 18:00 EDT）或每日（每周日 @ 09:00 EDT）或每月（每月最后一天 @ 21:00 EDT）。

我们目前使用的技术栈： - Java 6 - Spring 3.1.3 - Spring Integration 2.2 - Hibernate 4

当前设计计划： - 创建计时器事件，每 5 秒在数据库中填充一条带有时间戳的消息 - 将所有时间表转换为 UTC 时区后将其加载到内存中 - Spring 通道读取此消息，该消息每 5 秒到达并调用服务查看如果任何计划将要执行，则向上 - 如果报告到期调用触发报告的服务

需要有关工具或设计建议的帮助，如果它们是更好的实现方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:56:29.490

一种选择是几乎完全在 Spring Integration 中执行此操作。

使用 JPA 入站通道适配器，可以将轮询器配置为定期轮询数据库并创建消息，从而允许您转换和启动您的工作。所有这些都可以在 Spring Integration 中完成。

```
<int-jpa:inbound-channel-adapter
    channel="trigger.channel"
    entity-manager="entityManagerFactory"
    jpa-query="select t from ReportTrigger where ...">
    <int:poller cron="30 * 9-17 * * MON-FRI"/>
</int-jpa:inbound-channel-adapter>

<int:channel id="trigger.channel"/> 
```

# iphone - NSNotificationCenter postNotificationName exec_badaccess

> ID：15995138
> 
> 赞同：4
> 
> 时间：2013-04-14T02:33:15.767
> 
> 标签：iphone, uiview, viewcontroller, nsnotificationcenter

我有一个视图控制器，当它完成时，我发布一个通知，并在另一个视图控制器中包含的子视图中添加为 oberserve。但是，当它尝试执行发布通知方法时，exec_bad_access 发生了。怎么了？代码是：

```
BrandListByIdViewController.m

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    NSNumber *bid = self.brands[indexPath.row][@"id"];
    [self dismissViewControllerAnimated:YES completion:^{
        [[NSNotificationCenter defaultCenter] postNotificationName:@"SelectedBrandId" object:nil];
    }];

}

SearchNewProduct.h

@interface SearchNewProduct : UIView

@end

SearchNewProduct.m

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didSelectedBrandId::) name:@"SelectedBrandId" object:nil];
    }
}

- (void)didSelectedBrandId:(NSNotification *)notif{

    NSLog(@"%s", __PRETTY_FUNCTION__);
} 
```

即使我摆脱了 userInfo，仍然无法访问。我在另一个新项目中创建了类似的情况，它工作正常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T02:37:50.303

我没有意识到你正在处理 a`UIView`而不是 a `UIViewController`（应该更好地阅读你的问题）。我认为正在发生的事情是视图即使在被释放后也会收到通知。确保调用`dealloc`你的`UIView`并移除自己作为观察者：

```
- (void)dealloc {
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

另外，`NSLog`在 that`UIView`的`initWithFrame`方法中添加一个以查看它是否被多次调用。

这个问题非常相似：

[ios 通知“死”对象](https://stackoverflow.com/questions/10323087/ios-notifications-to-dead-objects)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T02:35:40.427

不确定这是否是原因，但是当您将视图添加到通知中心时，您的选择器是错误的：

```
selector:@selector(didSelectedBrandId::) 
```

应该只有一个冒号。整行应该是：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didSelectedBrandId:) name:@"SelectedBrandId" object:nil]; 
```

两个冒号表示该方法接受两个参数，但它只接受一个。

# java - 代码段说明

> ID：15995141
> 
> 赞同：0
> 
> 时间：2013-04-14T02:33:57.853
> 
> 标签：java, string, stringtokenizer

以下代码执行后s1、s2、s3的值是多少？

```
String s1, s2, s3="";
StringTokenizer line = new StringTokenizer("You are cool");
s1 = line.nextToken();
s2 = line.nextToken();
while (line.hasMoreTokens())
    s3 +=line.nextToken(); 
```

请注意，这是一个我找不到的学习指南问题。如果有人能彻底解释它，以便我可以在考试中提出这类问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:57:05.193

总之，这段代码是一个空格分隔的分词器，它将字符串分成三个部分。

因此，在这个特定示例中，s1、s2 和 s3 的值将是：

```
s1 = "You";
s2 = "are";
s3 = "cool"; 
```

要查看存储在其中的值，只需执行以下操作：

```
System.out.println(s1);
System.out.println(s2);
System.out.println(s3); 
```

现在，至于*为什么？*

看到这个：

```
String s1, s2, s3="";//these are the strings that will hold the sub tokens

StringTokenizer line = new StringTokenizer("You are cool");//this initializes an object of the StringTokenizer class with a string value of "You are cool"
s1 = line.nextToken();//this reads up until the first whitespace character (which will be skipped)
s2 = line.nextToken();//this will read from the last position of the iterator
//this will continue reading tokens (delimited by whitespace) from the initialized
//StringTokenizer, (now at the position after "are"):
while (line.hasMoreTokens())
    s3 +=line.nextToken();//and those tokens are **appended** to s3! Note appended! Not stored in or overwritten to! 
```

因此，声称***this 程序最多对字符串进行 3 次标记（通过空格）。**

但是，**你应该被警告：**因为在 StringTokenizer 被初始化为这个的情况下：

```
"You are cool, bro" 
```

（注意空格后面的额外空格和字符）

你会得到这个：

```
s1 = "You";
s2 = "are";
s3 = "cool,bro";//note the lack of whitespace! 
```

最后一部分来自于在while循环中：

```
while (line.hasMoreTokens())
    s3 +=line.nextToken();//a nextToken() call skips over whitespace by default 
```

因此，**无论有*****多少*****， s3 都会从 追加*下一个*标记。`line`**

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:46:50.947

正如@Dukeling 所提到的，您可能没有输出，因为您什么也没有打印出来。

另外，请看一下这个答案： [为什么不推荐使用 StringTokenizer？](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)

来自 StringTokenizer 的 javadoc：StringTokenizer 是一个遗留类，出于兼容性原因保留，但不鼓励在新代码中使用它。建议任何寻求此功能的人改用 String 的 split 方法或 java.util.regex 包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T02:42:22.523

字符串`s1` `s2` `s3`被实例化为**空而不是 null**。

该变量`line`基本上是一个`"You are cool"`准备被标记化的新字符串 ( )。

每次您这样做`nextToken()`时，它都会获取一个单词或**标记**并将其存储在该变量中

所以这段代码将存储前两个单词。

```
s1 = line.nextToken();
s2 = line.nextToken(); 
```

此代码将查看它们是否是更多的单词或**标记**，它们是（左1）。然后它将获取最后一个令牌并将其分配给`s3`

```
while (line.hasMoreTokens()) {
    s3 +=line.nextToken();
} 
```

输出方面，该程序不会在精神上将任何内容输出到控制台中，而是在内存中进行。这就是它在内存中的样子，如果你用`System.out.println()`.

`s1 = "You"`

`s2 = "are"`

`s3 = "cool"`*

# perl - 如何在 Perl 中实现键盘监听器或动作监听器

> ID：15995145
> 
> 赞同：0
> 
> 时间：2013-04-14T02:34:40.000
> 
> 标签：perl, bash, actionlistener, keyboard-events

我正在做我在 Perl 中的最后一个项目。我正在创建一个将通过终端运行的 ASCII 街机游戏。该项目的规范之一是我们的代码必须能够在学校的 Linux 机器上运行。学生在 linux 环境中没有 sudo 权限，因此安装诸如 Term::ReadKey 或 Curses 之类的模块会很棘手，如果不是不可能的话，因为所有这些依赖和要求。所以我正在寻找 perl 标准库中的解决方案，或者可能有其他解决方法。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:59:38.140

如果你不能使用 sudo，[local::lib](http://search.cpan.org/perldoc?local%3A%3Alib)可能是你的朋友，所以你可以在你的主目录中安装模块，不需要 sudo。

使用 local::lib，您可以通过 cpan 安装您需要的模块，例如 Term::ReadKey。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T15:34:10.993

或者 perlbrew ( [http://perlbrew.pl/](http://perlbrew.pl/) ) 如果您可以访问构建工具。

另一种解决方法是使用核心 Unix Perl IO 支持。例如 select (perldoc -f select)，进行非阻塞键盘扫描（或设置超时）。这就是我 25 年前在 Unix/C 中编写俄罗斯方块克隆的方式:)

# java - 将 Linq4j 与内存中的原语 List 和 Map 结合使用

> ID：15995148
> 
> 赞同：2
> 
> 时间：2013-04-14T02:35:35.983
> 
> 标签：java, linq4j

我一直在尝试搜索，但似乎找不到一些关于如何`Linq4j`用于存储在`java.util.Map`.

有人可以提供一些关于如何`Linq4j`用于此目的的链接或示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T15:47:04.707

Linq4j 对使用列表有很好的支持。例如 net.hydromatic.linq4j.Linq4j.asEnumerable(List) （有关更多方法，请参见 javadoc [http://www.hydromatic.net/linq4j/apidocs/net/hydromatic/linq4j/Linq4j.html ）。](http://www.hydromatic.net/linq4j/apidocs/net/hydromatic/linq4j/Linq4j.html)

```
final List<Employee> employees = Arrays.asList(
    new Employee(100, "Fred", 10),
    new Employee(110, "Bill", 30),
    new Employee(120, "Eric", 10),
    new Employee(130, "Janet", 10));
final List<Employee> result = new ArrayList<Employee>();
Linq4j.asEnumerable(employees)
    .where(
        new Predicate1<Employee>() {
          public boolean apply(Employee e) {
            return e.name.contains("e");
          }
        })
    .into(result); 
```

对 Map 的支持并不多。您可以使用 Map 上生成集合的方法：Map.keySet()、Map.values() 和 Map.entrySet()。例如，

```
final List<Grouping<Object, Map.Entry<Employee, Department>>> result =
  new ArrayList<Grouping<Object, Map.Entry<Employee, Department>>>();
Linq4j.asEnumerable(empDepts.entrySet())
    .groupBy(
        new Function1<Map.Entry<Employee, Department>, Object>() {
          public Object apply(Map.Entry<Employee, Department> entry) {
            return entry.getValue();
          }
        })
    .into(result); 
```

最后，请注意 Enumerable 中有几个 toMap 方法。这些对于填充地图很有用。

# django-1.4 - Django 1.4 到 Django 1.5 直接到模板 extra_context

> ID：15995165
> 
> 赞同：2
> 
> 时间：2013-04-14T02:37:59.187
> 
> 标签：django-1.4, django-1.5

所以 Django 1.5 不再使用 direct_to_template 调用。

我正在移植一些网址，但我被这个阻止了。

```
url(r'^system_settings/$',
    'django.views.generic.simple.direct_to_template',
    {
        'template': 'helpdesk/system_settings.html',
        'extra_context': {
            'ADMIN_URL': getattr(settings, 'ADMIN_URL', '/admin/'),
        },
    }, 
```

我知道我可以使用

```
url(r'^help/context/$',
    TemplateView.as_view(template_name='helpdesk/system_settings.html')... 
```

但我不知道`extra_context`应该去哪里。有什么见解吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:13:22.800

参考：[https ://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/#adding-extra-context](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-display/#adding-extra-context)

```
from django.views.generic import TemplateView
from django.utils.decorators import classonlymethod

utils.autodiscover()
class ExtraContextTemplateView(TemplateView):

    @classonlymethod
    def get_context_data(self, **kwargs):
        context = super(ExtraContextTemplateView, self).get_context_data(**kwargs)
        context['ADMIN_URL'] = getattr(settings, 'ADMIN_URL', '/admin/')
        return context

urlpatterns = patterns('',
    url(r'^help/context/$', ExtraContextTemplateView.as_view(template_name='helpdesk/system_settings.html')
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-01T23:22:30.653

修改上面的示例以支持传递值的字典

```
class ExtraContextTemplateView(TemplateView):

    extra_context = {}
    def get_context_data(self, **kwargs):
        context = super(ExtraContextTemplateView, self).get_context_data(**kwargs)
        context.update(extra_context)
        return context

urlpatterns = patterns('',
    url(r'^help/context/$',
        ExtraContextTemplateView.as_view(template_name='helpdesk/system_settings.html', 
                                         extra_context={'title': 'Help-System Settings'}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-22T10:23:37.727

修改 Parth Shah 的回答，（我没有必要的 50 声望来简单地评论他的帖子）：

我认为您需要更改线路

`context.update(extra_context)`

至

`context.update(self.extra_context)`

因为 extra_context 是一个类属性。

# c# - c#在文件中读取/存储数据？

> ID：15995169
> 
> 赞同：0
> 
> 时间：2013-04-14T02:38:28.423
> 
> 标签：c#, string, file, arrays

我想要做的实际上是让我的程序打开并设置一个字符串数组，以便我可以将它用于 if 命令（它用于阻止人们）并且我想在其中存储另一个字符串以便可以保存它并且仍然在程序重新启动时使用。有人可以告诉我如何做到这一点吗？谢谢，麻烦您了 ：]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:02:23.550

You could use the following:

```
string[] lines = File.ReadAllLines(@"Path here").ToArray(); 
```

This splits each line up into the array.

As for saving to file, [google](http://www.google.com) "saving to file in c#", you will get plenty of results and tutorials.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:49:43.410

这绝对比我首先发布的解决方案更好：

```
File.WriteAllLines(fileName, yourStringArray);
yourStringArray = File.ReadAllLines(fileName); 
```

[File.WriteAllLines](http://msdn.microsoft.com/de-de/library/92e05ft3.aspx)

[文件.ReadAllLines](http://msdn.microsoft.com/de-de/library/s2tte0y1.aspx)

***下面是我的第一个答案。正确，但是废话！***

像这样的东西应该适合你。不要怪我不准确，我还没有完全清醒！;)

```
{
    string fileName = @"d:\temp\blacklist.txt";
    char seperator = ';';

    public Form1()
    {
        InitializeComponent();

        string[] users = { "Dave", "John", "Shawn" };
        //Save(users);
        users = Load();
    }

    public string[] Load()
    {
        string line;

        using (StreamReader sr = new StreamReader(this.fileName))
        {
            line = sr.ReadToEnd();
        }

        return line.Split(seperator);
    }

    public void Save(string[] users)
    {
        using (StreamWriter sw = new StreamWriter(this.fileName))
        {
            string line = string.Empty;

            foreach (string user in users)
            {
                line += string.Format("{0}{1}", user, seperator);
            }

            sw.WriteLine(line);
            sw.Flush();
        }
    }
} 
```

# http - Cloudfare CDN 跨域请求

> ID：15995170
> 
> 赞同：4
> 
> 时间：2013-04-14T02:38:39.820
> 
> 标签：http, cdn, cors, amazon-cloudfront, cloudflare

在查看[http://developers.cloudflare.com/](http://developers.cloudflare.com/)上的官方文档并搜索后，找不到任何关于允许设置或调整 CORS 策略的 Cloudfare CDN 服务的文档。我知道亚马逊 CDN 服务 Cloudfront 有办法，有什么线索吗？

> 来自@codedit 的推文：[https ://twitter.com/codedit/statuses/193073220314861568](https://twitter.com/codedit/statuses/193073220314861568)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-15T23:23:27.270

简短的回答是您不会从 CloudFlare 设置/配置 CORS 策略。您可以通过 Amazon 的 S3（我们看到的常见设置）将它们安装到位，然后在 S3 前面使用 CloudFlare，那里不会有任何问题或冲突。

但就 CloudFlare 的 CORS 政策而言——我们目前不提供该功能。

# html - 是否可以使用 HTML/CSS 创建圆形文本框？

> ID：15995176
> 
> 赞同：2
> 
> 时间：2013-04-14T02:39:37.217
> 
> 标签：html, css, textbox

所以我正在尝试创建一个带圆角的文本框，但我不知道该怎么做。到目前为止，我在这里有我想要的 HTML 和 CSS，但我无法绕着拐角走。

html:

```
<form action="index.php">
       Textbox <input type="text"/> <br />
        </form> 
```

目前，如果可能的话，我只需要 CSS。这是我到目前为止的CSS：

```
form {
height:50px; width:200px;
} 
```

如果 CSS 不可能做到这一点，请在评论中说，但如果不是，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:47:05.870

您可以尝试`border-radius`，但请记住，它不适用于所有浏览器：

```
input[type="text"] {
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  border-radius: 10px;
} 
```

演示：http: [//jsbin.com/uduyew/1/edit](http://jsbin.com/uduyew/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:46:26.220

您可以通过将以下内容添加到您的 css 文件来添加圆角：

```
input {
  -webkit-border-radius: 3px;
     -moz-border-radius: 3px;
          border-radius: 3px;
} 
```

我在这里以 3px 为例——你可以很容易地改变它。数字越大，角越圆。您还可以将圆角添加到单个角，如下所示：

```
input {
  -webkit-border-top-left-radius: 3px;
      -moz-border-radius-topleft: 3px;
          border-top-left-radius: 3px;
} 
```

该示例仅将左上角舍入。使用该代码，您可能会看到您可以轻松地一次绕过任何特定角落或所有角落。

# javascript - 清除间隔（）；不工作

> ID：15995178
> 
> 赞同：1
> 
> 时间：2013-04-14T02:39:59.790
> 
> 标签：javascript, jquery

我正在制作一个图像滚动器，它每隔几秒（为了调试为 10 秒）或当用户单击图像时自动推进图像。我的代码（如下所示）有效，但如果图像的手动（单击）推进完成，我想“重置”10 秒计数器。我怎样才能做到这一点？我似乎对 clearInterval 没有运气。

```
... 
setInterval('gallery()',10000);
$("#gallery").click(function() {
clearInverval();// <--- not working
gallery();
});
… 
```

我看到其他人将变量定义为（在我的情况下）`setInterval('gallery()',10000);`，但我也无法让它工作=/

PS我对C以外的语言了解有限

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T02:41:43.013

该`setInterval`方法返回间隔的句柄，您可以使用它来停止它：

```
var handle = window.setInterval(gallery,10000);
$("#gallery").click(function() {
  window.clearInterval(handle);
  gallery();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T03:28:53.483

也许你可以做这样的事情：

```
var handle = setInterval(gallery,10000);
$("#gallery").click(function() {
    clearInterval(handle);

    /*
     * your #gallery.click event-handler code here
     */

    //finally, set automatic scrolling again
    handle = setInterval(gallery,10000);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T02:41:54.803

您需要将 setInterval 设置为变量才能使其正常工作。

```
var interval = setInterval(gallery, 10000);
$('#gallery').click(function() {
    clearInterval(interval);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-11T12:47:56.440

在进行基于原型的编码时，我努力制作一个简单的暂停/继续处理程序，因此不想使用任何外部插件。

下面的代码非常不言自明，有望节省其他编码人员的时间。

**非功能示例：**

```
 /** THIS DID NOT WORK 
    function Agent( name )
    {
         this.name = name;
         this.intervalID = undefined; // THIS DID NOT WORK!!!
    } // constructor

    Agent.prototype.start = function( speed )
    {
        var self = this;
        this.intervalID = setInterval( function(){ self.act(); }, speed );
    }; // start

    Agent.prototype.pause = function()
    {
        clearInterval( this.intervalID );
        console.log( "pause" );
    }; // pause
    **/ 
```

**相反，您必须这样做：**

```
var intervalID = undefined;
function Agent( name )
{
     this.name = name;
} // constructor

Agent.prototype.start = function( speed )
{
    var self = this;
    intervalID = setInterval( function(){ self.act(); }, speed );
}; // start

Agent.prototype.pause = function()
{
    clearInterval( intervalID );
    console.log( "pause" );
}; // pause 
```

# java - Restlet 流数据

> ID：15995179
> 
> 赞同：11
> 
> 时间：2013-04-14T02:40:01.387
> 
> 标签：java, restlet, chunked-encoding, restlet-2.0

我正在执行这项任务，我将从设备读取数据并通过 Web 服务使其可用。数据每秒读取 4 次。我希望 Web 客户端具有开放的 HTTP 连接，并使用[分块传输](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)将设备读数作为流获取，只要客户端保持连接打开即可。

作为概念验证，我想从一个不断生成随机数的服务开始，每秒 4 次，将其包装在 json 中并将其流式传输到客户端。我正在尝试基于[twitter 流 api 对其进行松散建模。](https://dev.twitter.com/docs/streaming-apis)

我正在使用 restlet 2.1.2 来创建该 web 服务，但我不确定我应该使用哪个表示来实现这一点。我试着搜索这个，但没有找到任何有用的东西。有人可以指出我应该使用什么的正确方向，也许还有一些例子。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:29:52.507

为了实现您想要做的事情，我会使用[WriterRepresentation](http://restlet.org/learn/javadocs/2.1/jse/api/index.html?org/restlet/representation/WriterRepresentation.html)（但请参阅我[对您的其他问题的回答](https://stackoverflow.com/a/16133553/412808)），但我很确定您的架构方向是错误的。

实际上，您链接的文档中的以下图片

![在此处输入图像描述](https://i.stack.imgur.com/7hsgN.png)

展示了即使是 Twitter 流 api 也不打算由用户连接，而是由后台进程在 HTTP 可访问的存储中下载消息。用户仅轮询 HTTP 服务器，该服务器从存储中读取消息并将其发送回客户端。

作为一个**断开连接的协议，HTTP**实现了巨大的可扩展性，否则是不可能的。如果每个客户端都建立一个由**专用服务器线程支持的****持久 TCP**连接，您将迅速耗尽服务器资源！此外，用户代理和服务器之间的任何 HTTP 代理都可能导致意外行为。

 **因此，如果您绑定到 HTTP 协议，**用户代理应该轮询**。您可以使用[Last-Modified](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.29) / [If-Modified-Since](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)或[Etag](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19) / [If-None-Match](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26)等标头减少网络负载。

但是，如果您可以采用不同的协议，我强烈建议您尝试**使用连接的 TCP 协议上的服务总线**。**

# vb.net - vb.net 内存使用情况

> ID：15995181
> 
> 赞同：0
> 
> 时间：2013-04-14T02:40:08.250
> 
> 标签：vb.net

我的应用程序只是简单的发送键。我的问题是当我运行我的应用程序时它使用了大约 55-65k 的内存使用量，然后当我将它最小化到系统托盘时，它突然下降到大约 1-3k 的内存使用量，然后当我再次恢复它时，它上升到大约6-8k 内存使用量。我的问题是，即使我没有最小化我的应用程序，我如何才能降低内存使用量？

注意：我尝试等待大约 3 分钟，看看我的应用程序是否会减少它的内存使用量，因为我认为它只是在加载一些组件。但我没有，如果我不最小化它，我会坐在 55-65k 上。

这是我的代码：

```
Imports System.Runtime.InteropServices
Imports System.Threading
Public Class Form1
    Public Declare Function GetKeyState Lib "user32" (ByVal nVirtKey As Integer) As Integer
    Public Declare Sub keybd_event Lib "user32" Alias "keybd_event" (ByVal bVk As Byte, ByVal bScan As Byte, ByVal dwFlags As Integer, ByVal dwExtraInfo As Integer)

    Private Declare Function GetForegroundWindow Lib "user32" Alias "GetForegroundWindow" () As IntPtr
    Private Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As IntPtr

    Private SearchWindow As String
    Public Const vbKeyQ = 81
    Public Const vbKeyW = 87
    Public Const vbKeyE = 69
    Public Const vbKeyR = 82
    Public Const KEYEVENTF_KEYUP = &H2

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        SearchWindow = "MU"
        Timer1.Enabled = True
    End Sub

    Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
        If Control.IsKeyLocked(Keys.CapsLock) Then
            Dim ForeGroundHwnd As IntPtr = GetForegroundWindow
            Dim MySearchWinow As IntPtr = FindWindow(Nothing, SearchWindow)
            If ForeGroundHwnd = MySearchWinow Then
                If rbQ.Checked = True Then
                    keybd_event(vbKeyQ, 0, 0, 0)
                    keybd_event(vbKeyQ, 0, KEYEVENTF_KEYUP, 0)
                ElseIf rbW.Checked = True Then
                    keybd_event(vbKeyW, 0, 0, 0)
                    keybd_event(vbKeyW, 0, KEYEVENTF_KEYUP, 0)
                ElseIf rbE.Checked = True Then
                    keybd_event(vbKeyE, 0, 0, 0)
                    keybd_event(vbKeyE, 0, KEYEVENTF_KEYUP, 0)
                ElseIf rbR.Checked = True Then
                    keybd_event(vbKeyR, 0, 0, 0)
                    keybd_event(vbKeyR, 0, KEYEVENTF_KEYUP, 0)
                End If
            End If
        End If
    End Sub

    Private Sub Form1_Resize(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Resize
        Try
            If Me.WindowState = FormWindowState.Minimized Then
                Me.WindowState = FormWindowState.Minimized
                NotifyIcon1.Visible = True
                Me.Hide()
            End If
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub NotifyIcon1_MouseDoubleClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.MouseEventArgs) Handles NotifyIcon1.MouseDoubleClick
        Try
            Me.Show()
            Me.WindowState = FormWindowState.Normal
            NotifyIcon1.Visible = False
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Sub

    Private Sub ExitToolStripMenuItem_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ExitToolStripMenuItem.Click
        Me.Close()
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:32:50.280

> 当我将它最小化到系统托盘时，它突然下降到大约 1-3k 内存使用量

显然，您正在一个非常旧的操作系统上运行。您根本没有测量内存使用情况，您正在查看程序的*工作集*。映射到 RAM 的虚拟内存页数。在像 XP 这样的旧操作系统上，内存管理器会在其主窗口最小化时积极修剪进程的工作集。该功能旨在将大量进程压缩到非常小的 RAM 中。XP 只需要 64 兆字节。

它不是免费的，当它再次进入前台时，进程需要时间才能做出响应，那些被映射出来的页面需要重新调入。起初，这只是真正需要的页面你的代码，这就是为什么增加不是那么大。现代版本的 Windows 不再使用此功能，它们现在可以指望具有足够 RAM 的机器。Windows 仅在需要为其他进程腾出空间时才减少程序的工作集。做不需要的工作只是浪费精力。

实际上，您实际上使用的内存比这多得多。虚拟内存。它不需要任何费用，它是虚拟的。妥协你的代码以减少不花费任何成本的东西是没有意义的。而 65KB 的虚拟内存是小菜一碟，只有进程可用内存的 3%。

像 Windows Internals 这样的书是一本很好的书，可以进一步了解 Windows 上的内存管理方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:49:03.277

应用程序以这种方式使用内存是正常的。

当您最小化应用程序时，系统会向内存管理器发送一个信号，以尝试释放尽可能多的内存。

通常应用程序不会尝试最小化分配的内存，因为那只是浪费时间。拥有大量可用内存不会使计算机运行得更快，相反，它只会无缘无故地做很多工作。如果您需要内存，内存管理器将尝试释放它。

为了完整起见，我应该提到您*可以*通过强制垃圾收集来使应用程序使用更少的内存，但这是没有意义的，并且通常被认为是不好的做法。

# python - 在 Heroku 上使用 SQLAlchemy 的瓶子

> ID：15995183
> 
> 赞同：0
> 
> 时间：2013-04-14T02:40:34.353
> 
> 标签：python, heroku, sqlalchemy, bottle

我正在尝试使用bottle和sqlalchemy在heroku上设置一个简单的服务器，但我不断收到错误消息，因为“db”关键字没有被注入，所以我没有给我的方法提供足够的参数。这是我尝试过的：

```
import os
from bottle import *
import bottle
from bottle.ext import sqlalchemy
from sqlalchemy import create_engine, Column, Integer, Sequence, String
from sqlalchemy.ext.declarative import declarative_base
import json

app = bottle.Bottle()
database_url = os.environ["DATABASE_URL"]

Base = declarative_base()
engine = create_engine(database_url, echo=True)

plugin = sqlalchemy.Plugin(
        engine,
        Base.metadata,
        keyword='db',
        create=True,
        commit=True,
        use_kwargs=False
)

app.install(plugin)

class Path(Base):
    __tablename__ = "path"
    id = Column(Integer, Sequence("id_seq"), primary_key=True)
    start_node = Column(String)
    end_node = Column(String)
    path = Column(String)

    def __init__(self, start_node, end_node, path):
        self.start_node = start_node
        self.end_node = end_node
        self.path = path

    def __repr__(self):
        return "<Path(id: '%d', start_node: '%s', end_node: '%s', path: '%s')>" & (self.id, self.start_node, self.end_node, self.path)

@app.get("/get", db)
def node_value(db):
    node = "face"
    start_path = db.query(Path).filter_by(start_node=node)
    end_path = db.query(Path).filter_by(end_node=node)
    if start_path and end_path:
        data = start_node
        data.append(end_path)
    if start_path:
        return start_node
    if end_path:
        return end_path
    else:
        return "ERROR"

@route("/")
def hello_world():
    return "Hello, World!"

run(host="0.0.0.0", port=int(os.environ.get("PORT", 3000))) 
```

感谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:49:26.460

我运行了你的代码，它对我有用。我唯一改变的东西似乎与你描述的你的经历不一致，但也许它们会有所帮助：

1.  从你的装饰中删除了`db`参数。`app.get`
2.  您需要调用*应用程序的*运行方法，而不是瓶子的。IE，

所以这两行从：

```
@app.get("/get", db)
...
run(host="0.0.0.0", port=int(os.environ.get("PORT", 3000))) 
```

至

```
@app.get("/get")
...
app.run(host="0.0.0.0", port=int(os.environ.get("PORT", 3000))) 
```

然后它按预期工作。如果这些更改不能解决您的问题，请准确发布您正在做什么以生成错误消息以及消息是什么，我会看看我是否可以重现它。

PS，当我说它“对我有用”时，我的意思是`node_value`根据原始 Q 调用该方法。我并不是说它实际上*有*任何作用。:) 哦，仅供参考，我还将 DATABASE_URL 设置为“sqlite:///:memory:”

# c - 使用 fread 和 fwrite，与二进制相关

> ID：15995187
> 
> 赞同：0
> 
> 时间：2013-04-14T02:41:30.943
> 
> 标签：c, binary, fwrite, fread

我很难理解为什么我的代码没有按预期工作，我确信这与我对 fread 和 fwrite 的理解有关。

这是我的代码片段，请原谅格式和懒惰的风格。

```
typedef struct record_t{
char name[20];
unsigned int id;
char toy[30];
}record_t;

int main(int argc, char** argv){

FILE *readFile, *writeFile;
record_t *recordPtr; 
int i;

if( (recordPtr = malloc(sizeof(struct record_t))) == NULL)
{
    perror("Error allocating record space\n");
    exit(EXIT_FAILURE);
}

strcpy(recordPtr->name, "Michael"); 
recordPtr->id = 3;
strcpy(recordPtr->toy, "Hello Kitty");
printf("Writing %s - %d - %d - %d - %s\n", recordPtr->name,
    recordPtr->id, recordPtr->toy);

if( (writeFile = fopen("test.bin", "wb")) == NULL)
{
    perror("Error opening writing file\n");
    exit(EXIT_FAILURE);
}

for(i = 0; i < 2; ++i){
recordPtr->id = i ;
fwrite(&recordPtr, sizeof(struct record_t), 1, writeFile);
printf("%s - %d - %s, ", recordPtr->name, recordPtr->id, recordPtr->toy);
printf("Record Written.\n");

}
fclose(writeFile);

recordPtr = NULL;

if( (readFile = fopen("test.bin", "rb")) == NULL)
{
    perror("Error opening reading file\n");
}
    exit(EXIT_FAILURE);

recordPtr = NULL;

for(i=0; i < 2; ++i){
    fread(&recordPtr, sizeof(struct record_t), 1, readFile);
    printf("%s - %d - %s, Read back.\n" recordPtr->name, recordPtr->id, recordPtr->toy);
}
fclose(readFile);

exit(EXIT_SUCCESS);
} 
```

代码的想法只是获取一条记录，将其写入二进制文件，然后从二进制文件中读取。我的问题是只有最后一个条目被读回，所以我确定我对 fread 的理解有问题。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T02:47:44.957

这个

```
fwrite(&recordPtr, sizeof(struct record_t), 1, writeFile); 
```

不是将结构写入文件，而是尝试将指向`recordPtr`它的指针写入内存中跟随它的任何内容。

同样这个

```
fread(&recordPtr, sizeof(struct record_t), 1, readFile); 
```

不是将结构读取到您为其分配的内存中，而是试图`recordPtr`用文件数据覆盖指针以及内存中跟随它的任何内容。

您需要删除该＆符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:01:44.030

```
fwrite(&recordPtr, sizeof(struct record_t), 1, writeFile);
fread(&recordPtr, sizeof(struct record_t), 1, readFile); 
```

should be:

```
fwrite(recordPtr, sizeof(struct record_t), 1, writeFile);
fread(recordPtr, sizeof(struct record_t), 1, readFile); 
```

Next:

```
if( (readFile = fopen("test.bin", "rb")) == NULL)
{
    perror("Error opening reading file\n");
}
exit(EXIT_FAILURE); 
```

Should be

```
if( (readFile = fopen("test.bin", "rb")) == NULL)
{
    perror("Error opening reading file\n");
    exit(EXIT_FAILURE);
} 
```

And

when you are reading the structure back, the buffer is pointing to NULL!!! So make sure you allocate memory and make `recordPtr` point to it before you use `recordPtr` in `fread`.

# javascript - 在 angular.js 中切换类和文本

> ID：15995188
> 
> 赞同：5
> 
> 时间：2013-04-14T02:41:41.500
> 
> 标签：javascript, angularjs

有一个锁定和解锁功能，在 html 中表示为

```
<li><a ng:click="lock(selectedUser)"><i class="icon-lock icon"></i>Lock</a></li> 
```

和

```
<li><a ng:click="unlock(selectedUser)"><i class="icon-unlock icon"></i>UnLock</a></li> 
```

解锁/锁定实际上是一个 REST API 调用

```
$scope.unlock = function(user){
     user.$unlock();
}

$scope.lock = function(user){
     user.$lock();
} 
```

如何在 angular.js 中的两种状态之间切换？我的意思是当执行锁定并成功时，第一个选项应该隐藏，而解锁按钮应该可见。

```
selectedUser.enabled 
```

返回`1`解锁和`0`锁定。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-14T02:46:43.333

只需使用一个`li`，并将类设置为[`ng:class`](http://docs.angularjs.org/api/ng.directive:ngClass)：

**HTML：**

```
<li>
  <a ng:click="toggleLock(selectedUser)">
    <i class="icon" ng:class="{ 'icon-lock': selectedUser.enabled, 'icon-unlock': ! selectedUser.enabled }"></i>
    {{ selectedUser.enabled && 'Lock' || 'Unlock' }}
  </a>
</li> 
```

**Javascript：**

```
$scope.toggleLock = function (user) {
     user.enabled ? user.$lock() : user.$unlock();
} 
```

* * *

**更新：** Angular 1.1.5 增加了对三元运算符的支持，所以上面可以重写为：

```
{{ selectedUser.enabled ? 'Lock' : 'Unlock' }} 
```

# simulation - face 和 about 和有什么不一样？

> ID：15995190
> 
> 赞同：1
> 
> 时间：2013-04-14T02:41:47.600
> 
> 标签：simulation, netlogo, multi-agent

我在 NetLogo 中使用过**face**没有任何问题，但不**完全**一样吗？（在面向补丁/代理方向的代理的上下文中）

```
towards

towards agent

Reports the heading from this agent to the given agent.

If wrapping is allowed by the topology and the wrapped distance (around the edges of the world) is shorter,     towards will use the wrapped path.

Note: asking for the heading from an agent to itself, or an agent on the same location, will cause a runtime error.

set heading towards turtle 1
;; same as "face turtle 1"
See also face. 
```

有没有使用**set 朝向 heading**比使用**face**更好的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T15:36:50.620

*   [`towards`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#towards)只报告标题
*   [`face`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#face)就像[`towards`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#towards)合而为一[`set heading`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#heading)。

在某些情况下，您想知道走向某事的方向而不实际面对它吗？我相信你能想到很多。一种示例情况是根据某些标准在两个可能的标题之间进行选择。

假设您要面对两个特工之一，无论哪一个要求您转动最少：

```
let first-heading towards first-agent
let second-heading towards second-agent

; compare my current heading to the two calculated headings:
let first-angle subtract-headings heading first-heading
let second-angle subtract-headings heading second-heading

if-else abs first-angle < abs second-angle
  [ rt first-angle ]
  [ rt second-angle ] 
```

（在现实生活中，你可能会做一些不同的事情，但我希望这能传达这一点。）

# java - 如何更改 jaxb 为列表中的每个项目输出的 xml 元素名称

> ID：15995197
> 
> 赞同：0
> 
> 时间：2013-04-14T02:42:36.110
> 
> 标签：java, jaxb, jaxb2

如果我有一个对象列表

```
 @XmlRootElement(name = "get_item")
    public class GetItem {
       private List<Image> images;
    } 
```

即使我需要为 imgurl、imgcap、imgpurl 创建其他三个类，我几乎可以用 Images 类做任何事情

我想生成如下所示的 xml：

```
<?xml version=“1.0”?>
<get_item>
 .......snip.......
<imgpurl1>purl 1</imgpurl1>
<imgurl1>url 1</imgurl1>
<imgcap1>caption 1</imgcap1>
<imgpurl2>purl 2</imgpurl2>
<imgurl2>url 2</imgurl2>
<imgcap2>caption 2</imgcap2>
…
<imgpurlN>purl N</imgpurlN>
<imgurlN>url N</imgurlN>
<imgcapN>caption N</imgcapXN>
</get_item> 
```

没有办法知道会有多少 img(s)。我想将它们全部放在一个列表中，然后让它输出我需要的三个元素。有没有办法用 Jaxb 做到这一点？

我尝试与 Eclipses Jaxb 生成器一起使用的模式如下所示：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:element name="get_item">
        <xs:complexType>
            <xs:sequence>
                <xs:element type="xs:string" name="title" />
                <xs:element type="xs:string" name="time" />
                <xs:element type="xs:string" name="date" />
                <xs:sequence>
                    <xs:element type="xs:anyURI" name="imgpurl" minOccurs="0" maxOccurs="unbounded" />
                    <xs:element type="xs:anyURI" name="imgurl" minOccurs="0" maxOccurs="unbounded" />
                    <xs:element type="xs:string" name="imgcap" minOccurs="0" maxOccurs="unbounded" />
                </xs:sequence>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

我主要关心的是能够像提供的示例一样序列化 xml……最好的方法是什么？有没有办法控制 Jaxb 编组对象的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:03:52.337

不可能。
但是您可以使用 xml 属性。
输出将是

```
<imgpurl id="1">purl 1</imgpurl>
<imgurl id="1">url 1</imgurl>
<imgcap id="1">caption 1</imgcap>
<imgpurl  id="2">purl 2</imgpurl>
<imgurl id="2">url 2</imgurl>
<imgcap id="2">caption 2</imgcap>
…
<imgpurl id="N">purl N</imgpurl>
<imgurl id="N">url N</imgurl>
<imgcap id="N">caption N</imgcapX> 
```

xsd:

```
 <xs:complexType name="ElementWithAttr">
    <xs:simpleContent>
      <xs:extension base="xs:string">
        <xs:attribute name="id" type="xs:integer">
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
        <xs:complexType name="SomeName">
           <xs:sequence>
              <xs:element type="xs:string" name="title" />
              <xs:element type="xs:string" name="time" />
              <xs:element type="xs:string" name="date" />
              <xs:sequence>

                   <xs:element type="ElementWithAttr" name="imgurl" minOccurs="0" maxOccurs="unbounded" />
                   <xs:element type="ElementWithAttr" name="imgcap" minOccurs="0" maxOccurs="unbounded" />
              </xs:sequence>
          </xs:sequence>
      </xs:complexType> 
```

生成的类

```
 public class ElementWithAttr {

        @XmlValue
        protected String value;
        @XmlAttribute(name = "id")
        protected BigInteger id;  
   // ...  
    }  
    public class SomeName {

       @XmlElement(required = true)
       protected String title;
       @XmlElement(required = true)
       protected String time;
       @XmlElement(required = true)
       protected String date;
       protected List<ElementWithAttr> imgurl;
       protected List<ElementWithAttr> imgcap;  
   // ...  
   } 
```

# javascript - 如何在 Vimperator 中获取ElementByID？

> ID：15995201
> 
> 赞同：3
> 
> 时间：2013-04-14T02:42:47.073
> 
> 标签：javascript, firefox-addon, vimperator

我已经搜索了很多，但找不到我的问题的答案。我如何`getElementById`在 Vimperator 工作？每当我尝试时，它都会告诉我：

```
"document.getElementById(...) is null" 
```

这是我在命令中输入的示例：

```
js document.getElementById("myDiv").style.color="blue"; 
```

很感谢任何形式的帮助！谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T01:15:49.077

因为`js`命令范围是 XUL Chrome 范围。`window`这是一个 XUL 窗口的全局对象。选定选项卡的 html 窗口对象是`window.content.window`.

所以尝试将您的代码更改为

```
js window.content.window.document.getElementById("myDiv").style.color="blue"; 
```

# dynamic - emberjs transitionToRoute 嵌套动态

> ID：15995205
> 
> 赞同：2
> 
> 时间：2013-04-14T02:43:36.903
> 
> 标签：dynamic, ember.js, routes

当我调用以下内容时：

```
this.get('controller').transitionToRoute('dashboards.submenu',  {dashboard_id: "31", item_id: "97", subitem_id: "11"} ); 
```

我也试过：

```
this.get('controller').transitionToRoute('dashboards.submenu',  dash, item, subitem); 
```

没有成功...

我的网址是这样的：

```
localhost:9000/#/dashboards/undefined/undefined/undefined 
```

不幸的是，我希望它是

```
localhost:9000/#/dashboards/31/97/11 
```

知道为什么吗？

如果我直接去

```
localhost:9000/#/dashboards/31/97/11 
```

它工作正常....

这是我的路由器……

```
App.Router.map(function () {
    this.resource("index",  { path: "/" });

    this.resource("dashboards",  { path: "/dashboards" } , function(){
               this.route("main", { path: '/' });
               this.route("index", { path: '/:dashboard_id' });
               this.route("submenu", { path: '/:dashboard_id/:item_id/:subitem_id' });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:19:20.547

您需要为您的路线实现这两个`model`和`serialize`方法。例如：

```
model: function(params) {
  return Ember.Object.create({dashboard_id: params.dashboard_id, item_id: params.item_id, subitem_id: params.subitem_id});
},

serialize: function(model) {
  return {dashboard_id: model.get('dashboard_id'), item_id: model.get('item_id'), subitem_id: model.get('subitem_id')};
}, 
```

# .htaccess - htaccess 仅重定向一个域

> ID：15995206
> 
> 赞同：3
> 
> 时间：2013-04-14T02:43:41.577
> 
> 标签：.htaccess

我有几个域指向同一个网站空间（www.domain1.com、www.domain2.com、www.domain3.com 等）。仅当使用一个域时，例如 www.domain1.com，我想将用户从不同的短链接（例如 www.domain1.com/link 或 www.domain1.com/link2）重定向到另一个 URL。

我整理了以下内容。RewriteCond 可能没问题，但 RewriteRules 不起作用：

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com [NC]
RewriteRule ^/test$ http://www.domain1.com/xyz.php [R=301]
RewriteRule ^/test2$ http://www.domain1.com/abc.php [R=301]
RewriteRule ^/test3$ http://www.domain1.com/abc/test10.php [L,R=301] 
```

你有什么提示正确的 RewriteRules 应该是什么样子的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T02:52:25.783

希望这可以帮助您朝着正确的方向前进...

```
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com [NC]
RewriteCond %{REQUEST_URI} ^(/test/)$ [NC]
RewriteRule ^(.*)$ http://www.domain1.com/xyz.php [R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com [NC]
RewriteCond %{REQUEST_URI} ^(/test2/)$ [NC]
RewriteRule ^(.*)$ http://www.domain1.com/abc.php [R=301]

RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com [NC]
RewriteCond %{REQUEST_URI} ^(/test3/)$ [NC]
RewriteRule ^(.*)$ http://www.domain1.com/abc/test10.php [L,R=301] 
```

# c# - 何时在 C#/.NET 中使用“对象”？

> ID：15995207
> 
> 赞同：7
> 
> 时间：2013-04-14T02:43:51.097
> 
> 标签：c#, .net, object

我唯一一次尝试使用对象是`List<object>`，我后悔并重写了它。我永远找不到使用对象而不是接口的实例。什么时候在 .NET 中使用对象？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T03:18:42.463

坦率地说，你真的需要它并不经常发生。但是当你这样做时，它很明显。反射、泛型类型转换、序列化或标记是最终拥有对象的主题。

就像`void*`……本质上几乎是一样的。您想知道这种“粗制滥造”的物品有什么用，直到您最终陷入无路可走的角落，只能使用它。

这是您在托管代码中可以找到的最低级别。一切都是对象，你无法深入。

通用类型转换：

```
public T AddComponents<T>()
{
    Component component = (Component)Activator.CreateInstance(typeof(T));

    if (component != null)
    {
        component.Parent = this;
        components.Add(component);
    }

    return (T)(object)component; //Cannot directly cast Component to T since we have no constraint between them.
} 
```

将项目分配给不知道内容的通用容器的想法的“标签”：

```
public class DragDropWrapper
{
    private object tag;

    public object Tag
    {
        get { return tag; }
    }
} 
```

什么是拖？不知道。可以是任何东西。

或者非常常见的事件发送者：

```
public void Message(object sender, string text)
{
    Entry entry = new Entry(sender, EntryType.Message, text);
    AddEntry(entry);
} 
```

发件人可以是任何东西。

扩展对象属性的反射：

```
public static List<InfoNode> ExpandObject(InfoGrid grid, InfoNode owner, object obj)
{
    List<InfoNode> nodes = new List<InfoNode>();

    if (obj == null)
        return nodes;

    PropertyInfo[] infos = obj.GetType().GetProperties(BindingFlags.FlattenHierarchy | BindingFlags.Instance | BindingFlags.Public);

    foreach (PropertyInfo info in infos)
        nodes.Add(new PropertyNode(grid, owner, obj, info));

    nodes = nodes.OrderBy(n => n.Name).ToList();

    return nodes;
} 
```

还有更多的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:59:30.597

嗯，一个很好的例子。假设您想编写一个库，并且该库需要能够获取一些任意数据并存储它。例如，就像在 ORM 中那样，您可能会编写这样的函数..

```
bool InsertObject(object item); 
```

对象序列化器也是如此。想想 JSON。

基本上，当您需要以非常通用的方式工作时，您会“使用”对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T02:46:21.427

当您需要存储对任何对象类型的引用时，您可以使用对象。如果这是您不需要做的事情，请随意不要使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T03:06:32.120

As `object` can be used to reference any value, you use it when you need to do exactly that.

The `String.Format` method for example uses `object` parameters to be able to put any value in a string:

```
public string Format(string format, params object[] parameters) 
```

That enables you to send any values into it, for example:

```
String.Format("{0} {1}", 1, "2"); 
```

* * *

Using it as a generic type, like in `List<object>`, is not so common as you usually have some more specific type that you can use. However, a `List<object>` would be the generic equivalent of the `ArrayList` class, which was frequently used before generics was introduced in .NET.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T02:48:31.297

人们很少直接使用对象，因为它的功能太少了。它在 V 1.0（泛型之前）中使用得更频繁，但现在很少用于比偶尔的 doble cast 更多的地方，如下所示：

```
(A)(object)someType; 
```

解决铸造操作的限制。

的真正目的`object`是强制执行基本操作，例如`GetType()`and `ToString()`，并提供这些操作的默认实现。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-14T02:49:42.987

例如，我将它用作类中的锁定变量

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-14T02:49:48.300

通常，只有在与在泛型添加到 C# 语言之前编写的 API 交互时，您才会主要显式使用对象类型。

我发现相当普遍的一个用例是以下成语：

```
 class NeedsToBeThreadSafe {

     private static object _lock = new object();

     void ThreadSafeOperation() {
          lock (_lock)
          {
              // Perform some useful work
          }
     }
 } 
```

在这里，我们`_lock`只需要对象来实现锁定；它不需要任何成员或值——所以`object`类型是合适的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-14T02:55:04.140

Object 是所有类型的父类型。您从 .Net 框架创建或使用的每个类型都继承自它。在 .Net 中引入泛型之前，大多数集合类型（例如 System.Collecrtions 下的 ArrayList）被定义为接受对象类型。这意味着您可以添加不同类型的混合包。并且您需要在检索时将项目转换为特定类型。这是不必要的开销。

回答你的问题。您应该避免在任何地方使用对象，因为它对您的代码没有任何好处。引入泛型的全部目的是摆脱对象表示法，因此您可以避免代码中不需要的强制转换。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-14T03:10:55.100

`Object`可以在您创建的 API 不关心底层类型或可以接受**所有内容**时使用。例如，我想创建一个序列化所有内容的库。在这种情况下，库方法会接收 的实例`object`，并可以通过反射处理其余部分。

或者假设您想创建一个接收成员访问 lambda 表达式的重构友好方法，如下所示：

```
f(something, s => s.member); 
```

而且您不关心成员类型可能是什么，它可能是*任何东西*。您可以定义如下方法：

```
void f(SomeType something, Expression<Func<SomeType, object>>) ... 
```

其他常见用途是将其用作线程锁变量，其他人已经提到过。

# c++ - Cin 显示默认值

> ID：15995209
> 
> 赞同：0
> 
> 时间：2013-04-14T02:44:09.317
> 
> 标签：c++, iostream, default-value, cin

使用 C++ 是否可以使用 Cin 语句为用户提供默认值，然后让他们退格他们想要更改的内容？例如：我给用户一个更改字符串名称的选项，我将名称输出到屏幕：“John Doe”，他们可以退格将名称更改为“John Smith”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T02:49:00.527

对于这样的功能以及更多功能，请查看[GNU Readline](http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html)或其类似产品之一。它基本上是一个应用程序库，支持使用熟悉的功能进行命令行编辑，例如向上箭头重复以前的命令，编辑以前的命令，是的，您可以自定义呈现给用户的文本，然后用户可以使用相同的方式对其进行编辑在外壳中使用的击键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T02:57:34.047

我可能疯了，但这是一个适用于 Visual Studio 2012 Update 1 的普通 Windows 解决方案。它模拟您要输入的字符，应该将它们保留在输入缓冲区中，直到它们准备好被读取，然后读取输入，等待换行符。

```
#include <iostream>
#include <string>
#include <windows.h>

void InsertDefaultName(const std::string &def) {
    HWND hwnd = GetConsoleWindow();
    for (char c : def) {
        SendMessage(hwnd, WM_CHAR, c, 0);
    }
}

int main() {
    std::cout << "Enter name: ";
    std::string name;

    InsertDefaultName("John Doe");
    std::getline(std::cin, name);

    std::cout << "You entered " << name << '\n';
} 
```

值得注意的是，如果用户在`InsertDefaultName()`调用函数之前按住某个键，这可能无法完全正常工作。一个更健壮的库肯定会更好，但如果它在没有全新库的情况下对你来说足够好的话，那就是这里。

# ios - 如何在块上使用 performSelector

> ID：15995210
> 
> 赞同：-1
> 
> 时间：2013-04-14T02:44:18.593
> 
> 标签：ios, block, performselector

下面是代码：

```
if ([motionManager isAccelerometerAvailable] == YES) {
    motionManager.deviceMotionUpdateInterval = 1.0 / 100.0;
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [motionManager startAccelerometerUpdatesToQueue:queue withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {
                    [self performSelector:@selector(exchangeCard)
                               withObject:nil
                               afterDelay:0];

    }]; 
```

我发现没有在块上调用选择器。所以我的问题是如何让 performSelector 在块上调用函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:48:19.920

通常不需要使用`startAccelerometerUpdatesToQueue:`，除非你知道你在用线程做什么，否则你当然不应该使用它。在我看来你不像！使用运动管理器的方法是启动它，然后反复*询问*它的更新（您可以使用重复的 NSTimer 进行设置）。

```
self.motman = [CMMotionManager new];
if (!self.motman.accelerometerAvailable) {
    NSLog(@"oh well");
    return;
}
self.motman.accelerometerUpdateInterval = // whatever
[self.motman startAccelerometerUpdates];
NSTimeInterval t = self.motman.accelerometerUpdateInterval * 10;
self.timer =
    [NSTimer
        scheduledTimerWithTimeInterval:t
        target:self selector:@selector(poll:) userInfo:nil repeats:YES]; 
```

所以 now`poll:`会被重复调用，你可以做任何你想做的事情：

```
- (void) poll: (id) dummy {
    // ask self.motman for current values here; for example:
    CMAccelerometerData* dat = self.motman.accelerometerData;
    // now do something with that info
} 
```

有关如何使用运动管理器获取加速度值的实际代码和完整说明，请参阅我的书：[http ://www.aeth.com/iOSBook/ch35.html#_raw_acceleration](http://www.apeth.com/iOSBook/ch35.html#_raw_acceleration)

# google-bigquery - Google Big Query 中的加权排名/综合得分

> ID：15995213
> 
> 赞同：3
> 
> 时间：2013-04-14T02:45:01.923
> 
> 标签：google-bigquery

...花了几个小时尝试什么不是和研究这个论坛。在这一点上，对于 Google Big Query (GBQ) 对琐碎查询以外的任何事情的有用性相当悲观，但这是最后一次绝望的尝试，也许有人有更好的想法：

假设我们有一个 COUNTRY 表，其中包含每个国家/地区的平均人口体重（以千克为单位）和身高（以米为单位），如下所示：

```
  国家 | 大陆| 重量 | 身高 |
  ============================================
  美国 | 美国 | 200 | 2.00 |
  加拿大 | 美国 | 170 | 1.90 |
  法国 | 欧洲 | 160 | 1.78 |
  德国 | 欧洲 | 110 | 2.00 |

```

假设您想挑选并居住在“最小”人的欧洲国家，您将度量“小”定义为体重和身高的加权总和，具有一些恒定的权重，例如体重为 0.6，体重为 0.4身高。

在 Oracle 或 MS SQL 服务器中，这可以通过使用诸如 rank() 和 row_number() 之类的分析窗口函数来优雅而紧凑地完成，例如：

```
选择国家，combined_score
从（选择
        国家
       ,( 0.6*rank(weight) over() + 0.4*rank(height) over() ) combined_score
来自国家
其中大陆='欧洲'）
按 combine_score 排序

```

请注意，排名是在大陆过滤之后完成的。大陆过滤器是动态的（比如从网络表单输入），因此无法预先计算排名并提前存储在表格中！

在 GBQ 中没有 rank() 、 row_number() 或 over()。即使你尝试一些“穷人”的黑客攻击，它仍然无法工作，因为 GBQ 不支持相关查询。以下是其他人的类似尝试，但结果非常不令人满意且效率低下：

[BigQuery SQL 运行总计](https://stackoverflow.com/questions/14664578/bigquery-sql-running-totals)

[BigQuery 中的行号？](https://stackoverflow.com/questions/11057219/row-number-in-bigquery)

任何想法如何做到这一点？如果有帮助，我什至可以重组数据以使用嵌套记录。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T04:14:39.337

BigQuery 中 RANK 的等效项是 row_number()。

例如，维基百科的前 5 位贡献者，其中 row_number 给出了他们的位置：

```
SELECT
  ROW_NUMBER() OVER() row_number,
  contributor_username,
  count,
FROM (
  SELECT contributor_username, COUNT(*) count,
  FROM [publicdata:samples.wikipedia]
  GROUP BY contributor_username
  ORDER BY COUNT DESC
  LIMIT 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T18:22:50.660

在您的具体示例中，我认为您可以完全不使用 RANK 和 OVER 来计算结果：

```
SELECT country, score
FROM (SELECT country, 0.6 * weight + 0.4 * height AS score
      FROM t WHERE continent = 'Europe')
ORDER BY score; 
```

但是，我假设这是一个玩具示例，并且您的真正问题涉及使用 RANK 更符合您的示例查询。在这种情况下，BigQuery 尚不直接支持分析功能，但我们会将其视为功能请求。:-)

# php - 会话 + 重定向似乎不起作用

> ID：15995222
> 
> 赞同：0
> 
> 时间：2013-04-14T02:45:57.283
> 
> 标签：php, forms, session, redirect, post

所以我正在制作一个简单的 PHP 登录表单。我的第一页是 index.php，其中包含一个发布到 process.php 的表单

```
 <form action="process.php" method="POST">

<li><label>Username: </label><input type="text" name="user"> </input></li>

<li><label>Password: </label><input type="password" name="pass"></input></li>

<li><label> </label><input type="submit" name="loginbutton" value="Log In" id="button"></li>
</form> 
```

简单的 HTML，没有什么复杂的。在下一页上，我在开头有一些看起来像这样的东西：

```

    $_SESSION['name'] = $_POST['user'];
    $_SESSION['password'] = $_POST['pass'];

    header('位置：thirdpage.php');

```

在thirdpage.php 我想`echo $_SESSION['name'];`，但它根本不起作用；页面上没有任何内容。我觉得我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:48:23.843

进程.php：

```
start_session();
$_SESSION['name'] = $_POST['user'];
$_SESSION['password'] = $_POST['pass'];

header('Location: thirdpage.php'); 
```

第三页：

```
 session_start();
 echo $_SESSION['name']; 
```

`session_start();`这应该可行，当您希望使用会话变量时，您必须始终执行。

这是一个示例，您应该在您的 POST 数组上执行验证，如果您要在完整生产中使用它

# c++ - 使用模板时奇怪的“非常量引用的无效初始化”

> ID：15995230
> 
> 赞同：0
> 
> 时间：2013-04-14T02:47:14.620
> 
> 标签：c++, compiler-errors

我收到以下错误：

```
Database.hpp: In member function ‘Table<T, S>& Table<T, S>::operator=(const Table<T, S>&) [with T = int, int S = 3, Table<T, S> = Table<int, 3>]’:
Database.hpp:40:8:   instantiated from ‘void std::vector<_Tp, _Alloc>::_M_insert_aux(std::vector<_Tp, _Alloc>::iterator, const _Tp&) [with _Tp = List, _Alloc = std::allocator<List>, std::vector<_Tp, _Alloc>::iterator = __gnu_cxx::__normal_iterator<List*, std::vector<List> >, typename std::_Vector_base<_Tp, _Alloc>::_Tp_alloc_type::pointer = List*]’
/usr/include/c++/4.6/bits/stl_vector.h:834:4:   instantiated from ‘void std::vector<_Tp, _Alloc>::push_back(const value_type&) [with _Tp = List, _Alloc = std::allocator<List>, std::vector<_Tp, _Alloc>::value_type = List]’
SelectiveReading.hpp:139:34:   instantiated from here
Database.hpp:34:16: error: invalid initialization of non-const reference of type ‘Table<int, 3>&’ from an rvalue of type ‘Table<int, 3>* const’ 
```

我有以下 ADT。我不明白他们有什么问题。

```
// this is Database.hpp
template <class T, int S>
class Table
{
    T tab[S];
    public:
    inline T& operator[](int i)
    {
        return tab[i];
    }
    inline const T& operator[](int i) const
    {
        return tab[i];
    }
    Table() {}
    ~Table() {}
    Table(const Table &t)
    {
        for ( int i=0; i<S; ++i )
        {
            tab[i] = t[i];
        }
    }
    Table& operator=(const Table &t)
    {
        for ( int i=0; i<S; ++i )
        {
            tab[i] = t[i];
        }
        return this;
    }
};

typedef Table<int,3> Date;

struct List
{
    Date AnnouncementDate;
    int BonusShares;
    int StockSplit;
    int CashDividend;
    bool DividendPayment;
    Date ExDividendDate;
    Date ShareRecordDate;
    Date BonusSharesListingDate;
};

typedef std::vector<List> Database; 
```

虽然电话是这样的：

```
List record;
// (...)
Data.push_back(record); // this is SelectiveReading.hpp:139:34 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T02:50:36.337

在你的最后一行`operator=`，你正在返回`this`（一个指针），而你的意思是返回`*this`（一个引用）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T02:50:35.880

`return this;`需要是`return *this;`

# c# - 将 nullable int 设置为默认值不会使其为 nul

> ID：15995236
> 
> 赞同：-1
> 
> 时间：2013-04-14T02:47:54.320
> 
> 标签：c#

我有一个可以为空的 int。我想将其值设置为，`null`因此我执行以下操作：

```
int? X;
X = 1;
X = default(int?); 
```

它保留旧值 of`1`而不是设置`X`为`null`。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T02:56:52.867

不，它不保留值`1`，变量获取值`null`：

```
using System;

class Program {

  static void Main() {

    int? X;
    X = 1;
    X = default(int?);

    Console.WriteLine(X.HasValue);

  }

} 
```

输出：

```
False 
```

# sql - sqlite 触发器检查新元组值与子查询的相等性

> ID：15995237
> 
> 赞同：1
> 
> 时间：2013-04-14T02:48:09.607
> 
> 标签：sql, database, sqlite, triggers

我有一个代表学校的数据库，其中包含课程、学生和入学等表。它们具有以下架构：

```
CREATE TABLE Students(
id INT CHECK(id > 100000),
lName CHAR(20),
fName CHAR(10),
gender CHAR(1) CHECK(gender IN('F','M')),
dob DATE,
address CHAR(100),
phone INT CHECK(phone > 1000000000),
grade CHAR(1) CHECK(grade IN('K','1','2','3','4','5')),
PRIMARY KEY(id));

CREATE TABLE Courses(
id INT CHECK(id > 1000),
name CHAR(40),
grade CHAR(1) CHECK(grade IN('K','1','2','3','4','5')),
PRIMARY KEY(id)
);

CREATE TABLE Enrollment(
studentID INT REFERENCES Students(id),
courseID INT REFERENCES Courses(id),
semester CHAR(6) CHECK(semester IN('Fall','Spring')),
year INT,
letterGrade CHAR(1) CHECK(letterGrade IN('A','B','C','D','E')),
PRIMARY KEY(studentID,courseID,semester,year)); 
```

我想为注册表创建一个触发器，该触发器将在插入元组之前检查具有给定 studentID 的学生的年级水平和具有 courseID 的课程的年级水平是否相等。我已经为此工作了一段时间，但似乎无法让它发挥作用。谁能指出我正确的方向？这就是我想出的：

```
CREATE TRIGGER appropriateLevel
   ...> BEFORE INSERT ON Enrollment
   ...> FOR EACH ROW
   ...> BEGIN
   ...> SELECT RAISE(ABORT,'The student's grade does not match the grade level of the course.')
   ...> WHERE EXISTS(SELECT * FROM Students, Courses WHERE ((Students.grade = Courses.grade) AND (Students.id = NEW.studentID) AND (Courses.id = NEW.courseID)));
   ...> END; 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:10:42.467

当成绩匹配时，您的触发器会中止。

无论如何，您不需要使用`EXISTS`，因为您只想比较每个父表中的一个特定值：

```
CREATE TRIGGER appropriateLevel
BEFORE INSERT ON Enrollment
FOR EACH ROW
BEGIN
    SELECT RAISE(ABORT, 'The student''s grade does not match the course''s grade level.')
    WHERE (SELECT grade FROM Students WHERE id = NEW.studentID) <>
          (SELECT grade FROM Courses  WHERE id = NEW.courseID);
END; 
```

# facebook - Weird Facebook API behavior, read group feed

> ID：15995256
> 
> 赞同：1
> 
> 时间：2013-04-14T02:50:39.100
> 
> 标签：facebook, facebook-graph-api

I've got strange behavior when using the FB Graph API to read the feed of a group I am administrating. Everybody in this group is posting YouTube links and I wanted to write an App to crawl them all into a nice list.

But depending on the user who posted I get one of the following results:

a) type=video and everything is fine b) type=status and I have to parse the link from the message instead of having a link field c) type=status and the link is not even in the message d) some users' postings are not in the feed at all

Does anybody know how to really obtain all message? I can see those posts including the links perfectly well using the Facebook web site...

Already tried to give each and every access right to my app, didn't help either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T17:36:41.417

I think I found the "problem": The result depends on the privacy settings of the user. Don't know why I can see the posts in the group but cannot automatically crawl it, only thing that happens now: I can't use the Facebook API but have to use some kind of HTML-parsing-crawler. Don't know why FB forces me to do that.

# ruby-on-rails - 如何让这个 rspec 测试通过？

> ID：15995257
> 
> 赞同：0
> 
> 时间：2013-04-14T02:50:51.727
> 
> 标签：ruby-on-rails, testing, rspec, tdd

我一生都无法弄清楚为什么这些测试失败了。

当用户输入他们的电子邮件/密码并点击登录按钮时，他们将被重定向到他们的个人资料页面，该页面将他们的名字放在标题中并在页面上显示他们的名字。它还显示了指向其个人资料的链接和退出链接。当我在浏览器中完成这些步骤时，一切都在它应该在的地方，但是当 rspec 运行时它继续失败。

我发现真正奇怪的是，当我运行一个测试相同元素的 user_page_spec 测试时，所有这些都通过了。

我认为它与控制器中的 click_button 部分或“redirect_to 用户”有关，但任何见解都将不胜感激。

这是测试-

通过 user_pages_spec.rb- 中的测试

```
describe "profile page" do
    let(:user) {  FactoryGirl.create(:user)  }
    before {  visit user_path(user)  }

    it {  should have_selector('h1',    text: user.firstName)  }
    it {  should have_selector('title', text: user.firstName)  }
end 
```

authentication_pages_spec.rb 中的测试失败 - 需要“spec_helper”

```
describe "Authentication" do
    describe "sign in" do
    .
    .
    .
    describe "with valid information" do
        let(:user) {  FactoryGirl.create(:user)  }
        before do
            fill_in "Email",            with: user.email
            fill_in "Password",     with: user.password
            click_button "Log in"
        end

        it {  should have_selector('title', text:user.firstName)  }
        it {  should have_link('Profile', href: user_path(user))  }
        it {  should have_link('Sign out', href: signout_path)  }

        describe "followed by signout" do
            before {  click_link "Sign out"  }
            it {  should have_link('Home')  }
        end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:30:44.717

是的。最简单的疏忽总是会导致最大的麻烦。

这就是发生的事情。

而不是使用以下 -

```
describe "page" do
  it "should have something" do
    page.should have_selector('')
  end
end 
```

Rspec 让您定义一个主题 -

```
subject {  page  } 
```

这使您可以将第一个代码块简化为以下内容-

```
subject {  page  }
describe "page" do
  it {  should have_selector('')  }
end 
```

这允许您运行多个引用页面的测试，而无需额外输入。

我在最顶部省略了主题 { page }，所以我的 it {} 块都不知道要引用什么。一旦添加，所有测试都通过了，没有任何问题。

希望这对将来的其他人有所帮助。

# c++ - 可以加载单个纹理但在加载到数组时遇到问题

> ID：15995258
> 
> 赞同：0
> 
> 时间：2013-04-14T02:50:59.427
> 
> 标签：c++, opengl

我在将纹理加载到类型数组时遇到问题，`GLuints`但加载单个纹理不会出现问题。当我调试它时，我看到它`textureIDs`没有分配任何值，即使在被调用后也只有 0，`setTexture(...)`但问题不会发生在加载到`textureID`. 要么我遗漏了如此明显的东西，要么我对 Opengl 或 C++ 的理解不足。

**在这种情况下的相关职能**

```
GLuint textureIDs[3];
GLuint textureID; 
```

地面建设者

```
Ground::Ground(void) : 
textureId(0),groundTextures()
{
    setAllTexture();                        
} 
```

绘制：绘制的地面功能..以及地面

```
void Ground::draw()
{
    glPushMatrix();
    //Ground
    glPushMatrix(); 

    glTranslatef(0,-1,0); //all buildings and ground

    //ground
    glPushMatrix();
    glTranslatef(-5,0,-20);
    glScalef(40,0.2,40);
    setTexture("Textures/rue2.bmp", textureId, true, true);
    drawRectangle(1.0f);
    glPopMatrix();
    glPopMatrix();

} 
```

settexture() 设置纹理

```
void Ground::setTexture(const char* textureName, GLuint& textId, bool stretchX, bool     stretchZ)
{
    if (textId == 0)
    {
        textId =  (GLuint)createTexture(textureName);   
    }

    if (textId != 0)
    {
        //enable texture coordinate generation

        glEnable(GL_NORMALIZE);
        glEnable(GL_DEPTH_TEST);
        glEnable(GL_COLOR_MATERIAL);
        glEnable(GL_TEXTURE_2D);
        glEnable(GL_BLEND); //Enable alpha blending

        glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); //Set the blend function

        glBindTexture(GL_TEXTURE_2D, textId);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, stretchX ? GL_REPEAT : GL_CLAMP);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, stretchZ ? GL_REPEAT : GL_CLAMP);
        glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE);
    }

} 
```

setAllTexture：将纹理加载到 GLuints 数组中

```
int Ground::setAllTexture()
{
    setTexture("Textures/asphalt.bmp",groundTextures[0],false, false );
    //set up textures    for all of them and bind them to ground textures.
    glBindTexture(GL_TEXTURE_2D, groundTextures[0]);

    setTexture("Textures/concreteFloor.bmp",groundTextures[1],false, false);
    //set up textures for all of them and bind them to ground textures.
    glBindTexture(GL_TEXTURE_2D, groundTextures[1]);

    setTexture("Textures/dirtyGrass.bmp",groundTextures[2],false, false);
    //set up textures for all of them and bind them to ground texture
    glBindTexture(GL_TEXTURE_2D, groundTextures[2]);

    for ( unsigned int i =0 ; i < 3 ; i ++ )        
    //check to see if all textures loaded properly
    {
        if ( groundTextures[i] == 0 )
            return false;
        }
        return true;
        //if you're here, every texture was loaded correctly.
    } 
```

ImageLoader：加载 24bit RGB 位图

```
Image* loadBMP(const char* filename) {
    ifstream input;
    input.open(filename, ifstream::binary);
    assert(!input.fail() || !"Could not find file");
    char buffer[2];
    input.read(buffer, 2);
    assert(buffer[0] == 'B' && buffer[1] == 'M' || !"Not a bitmap file");
    input.ignore(8);
    int dataOffset = readInt(input);

    //Read the header
    int headerSize = readInt(input);
    int width;
    int height;
    switch(headerSize) {
        case 40:
            //V3
            width = readInt(input);
            height = readInt(input);
            input.ignore(2);
            assert(readShort(input) == 24 || !"Image is not 24 bits per pixel");
            assert(readShort(input) == 0 || !"Image is compressed");
            break;
        case 12:
            //OS/2 V1
            width = readShort(input);
            height = readShort(input);
            input.ignore(2);
            assert(readShort(input) == 24 || !"Image is not 24 bits per pixel");
            break;
        case 64:
            //OS/2 V2
            assert(!"Can't load OS/2 V2 bitmaps");
            break;
        case 108:
            //Windows V4
            assert(!"Can't load Windows V4 bitmaps");
            break;
        case 124:
            //Windows V5
            assert(!"Can't load Windows V5 bitmaps");
            break;
        default:
            assert(!"Unknown bitmap format");
    }

    //Read the data
    int bytesPerRow = ((width * 3 + 3) / 4) * 4 - (width * 3 % 4);
    int size = bytesPerRow * height;
    auto_array<char> pixels(new char[size]);
    input.seekg(dataOffset, ios_base::beg);
    input.read(pixels.get(), size);

    //Get the data into the right format
    auto_array<char> pixels2(new char[width * height * 3]);
    for(int y = 0; y < height; y++) {
        for(int x = 0; x < width; x++) {
            for(int c = 0; c < 3; c++) {
                pixels2[3 * (width * y + x) + c] =
                pixels[bytesPerRow * y + 3 * x + (2 - c)];
            }
        }
    }

    input.close();
    return new Image(pixels2.release(), width, height);
} 
```

createTexture：创建纹理并返回 GLuint

```
unsigned int createTexture( const char* imageName )
{
    Image* image = loadBMP(imageName);
    GLuint textureId = 0;
    glGenTextures(1, &textureId);
    glBindTexture(GL_TEXTURE_2D, textureId);
    glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,image->width, image-   >height,0,GL_RGB,GL_UNSIGNED_BYTE,image->pixels);

    delete image;

    return (unsigned int) textureId;
} 
```

# delphi - delphi 如何在类中定义类？

> ID：15995259
> 
> 赞同：1
> 
> 时间：2013-04-14T02:51:13.933
> 
> 标签：delphi, delphi-2009

我正在尝试学习一些新技巧，以便更好地组织我在 Delphi 中的单元中的一些源代码。我注意到我访问的一些函数或方法似乎是类中的类，但是我还没有成功地在类中创建一个工作类，虽然它编译得很好，但在执行代码时我仍然收到错误消息。

我想做的是制作一种具有要设置或获取的函数、过程和值的树。如果有人可以通过示例帮助我，我将不胜感激。我今天有一些类型的类。然后我将类型分配给一个变量：something=TSomething 然后为了发生一些事情我写“something.action”。

我的目标是更进一步，并定义子功能或/和子程序。可以说我有三四门课。TSnippet、TAction1、TAction2、TSubAction1 等。我想使用或将它们分配给单个变量，并像这样使用它们：

```
Snippet.Action1.SubAction1.Organize(param1,param2);
Snippet.Action2.SubAction2.Returns='SomeString';
Snippet.Action1.SubAction1.SomeProcedure; 
```

有没有人能帮我举一个有用的例子，比如如何为这种方法编写代码？而且..是否知道这样的代码实现将如何影响执行代码所需的CPYCycles，而不是拥有数千个具有不同名称的过程的老式方法，但更直接的访问（感觉更直接的访问）。

由于我的第一篇文字可能有点不清楚，以下是。我想利用编辑器对可用程序/功能的自动建议，以便稍微简化编程。我开始为此创建一个类，并且效果很好。考虑一个类名“数据”。我们可以用数据做什么？我们可以编辑、添加、删除、保存和加载。好的。这是我的第一堂课。

然后考虑另一个类：“加密”。我们可以做 DES、DES3、HASH、BITSHUFFLE。我可以继续上第三节课：“压缩”。我们可以做 LZW、ZIP、RAR、MP3、MPG、MP4 等。

我不想将它们用作 3 个不同的类，而是将它们组合为一个，但将它们分开。我想为其他类制作一种 OwnerClass。我们可以称之为“MyStuff”

每当我输入“MyStuff”时。在编辑器中，我应该列出“数据、加密、压缩”。此外，当我选择“压缩”时，该类的过程和函数的下一个列表将列出。

这些类可能有一些局部变量，但主要功能是针对全局数组。

也许还有其他方法可以实现这一目标。我不知道。我的基本目标是能够对属于一起的例程进行分类和组合。这已经在 Units 中完成，但这对编辑器的自动列表没有帮助。先感谢您。莫顿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:33:57.500

我想我明白你在编辑后要问的是什么。

你所说的“类中的类”被称为`properties`and `methods`; 它们是在其包含类中声明的其他类、变量或过程/函数。您正在谈论的“列表”称为`Code Insight`，它向您显示了您当时在代码中引用的类的可用属性和方法。

这应该像您描述的那样做，并让您了解如何在自己的代码中实现它：

```
unit MyStuffUnit;

interface

uses
  SysUtils;

type

  TEncryptionType = (etDES, etDES3, etHASH, etBITSHUFFLE);

  TMyStuffEncryption = class(TObject)
  private
    FEncryptType: TEncryptionType;
  public
    constructor Create;
  published
    property EncryptionType: TEncryptionType read FEncryptType
      write FEncryptType;
  end;

  TCompressionType = (ctLZW, ctZIP, ctRAR, ctMP3, ctMPG, ctMP4);

  TMyStuffCompression = class(TObject)
  private
    FCompressionType: TCompressionType;
  public
    constructor Create;
  published
    property CompressionType: TCompressionType read FCompressionType
      write FCompressionType;
  end;

  TMyStuff = class(TObject)
  private
    FCompression: TMyStuffCompression;
    FEncryption: TMyStuffEncryption;
  public
    constructor Create;
    destructor Destroy; override;
  published
    property Compression: TMyStuffCompression read FCompression
      write FCompression;
    property Encryption: TMyStuffEncryption read FEncryption
      write FEncryption;
  end;

implementation

constructor TMyStuffEncryption.Create;
begin
  inherited;
  FEncryptType := etDES;
end;

constructor TMyStuffCompression.Create;
begin
  inherited;
  FCompressionType := ctLZW;
end;

constructor TMyStuff.Create;
begin
  inherited;
  FCompression := TMyStuffCompression.Create;
  FEncryption := TMyStuffEncryption.Create;
end;

destructor TMyStuff.Destroy;
begin
  FCompression.Free;
  FEncryption.Free;
  inherited;
end;

end. 
```

如果您`TMyStuff`在代码中创建 的实例，您应该能够键入`MyStuff.`并获得选择`Compression`或的选项`Encryption`。选择`Compression`应该允许您设置`CompressionType`属性。

![在此处输入图像描述](https://i.stack.imgur.com/8xxwI.png)

这应该足以让你继续前进。:-) 请记住，Delphi 在几乎所有版本中都包含 VCL 和 RTL 的源代码，因此您总是可以查看示例。（它们并不总是最好的例子，但它们应该给你关于如何做事的想法。）

# javascript - 如何像在 Backbone 中一样在 JQuery 中模拟“DELETE”请求方法？

> ID：15995260
> 
> 赞同：2
> 
> 时间：2013-04-14T02:52:07.307
> 
> 标签：javascript, jquery, backbone.js

在 Backbone 中，有一个“DELETE”。

```
this.model.url = '/js/products/123/destroy';
this.model.destroy(); 
```

我如何在 JQuery 中模拟这个？

在我的 node.js 应用程序中，我专门寻找 app.delete。

```
.   Request URL:http://mydomain.com/js/products/2/destroy
.   Request Method:DELETE
.   Status Code:￼200 OK
.   Request Headersview source
.   Accept:application/json, text/javascript, */*; q=0.01
.   Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
.   Accept-Encoding:gzip,deflate,sdch
.   Accept-Language:en-US,en;q=0.8
.   Connection:keep-alive
.   Cookie:connect.sid=s%3ALmcKt2dNgSzfQCyCAcVlPeg6.bFXUPlpuZctDpfN2Gu5mtslVC9nA3FOi908Qe8aExYY
.   Host:mydomain.com
.   Origin:http://mydomain.com
.   Referer:http://mydomain.com/1
.   User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.65 Safari/537.31 AlexaToolbar/alxg-3.1
.   X-Requested-With:XMLHttpRequest
.   Response Headersview source
.   Connection:keep-alive
.   Content-Length:27
.   Content-Type:text/html; charset=utf-8
.   Date:Sun, 14 Apr 2013 02:57:17 GMT
.   X-Powered-By:Express 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T02:56:41.147

看看[这里](https://stackoverflow.com/questions/2153917/how-to-send-a-put-delete-request-in-jquery)：

在您的情况下，这将转化为：

```
$.ajax({
    url: '/js/products/123/destroy',
    type: 'DELETE',
    success: function(result) {
        // Do something with the result
    }
}); 
```

# string - 如何使用批处理从字符串中删除特殊字符

> ID：15995263
> 
> 赞同：0
> 
> 时间：2013-04-14T02:52:33.543
> 
> 标签：string, batch-file, character

我对批处理编程知之甚少。我想从字符串中删除特殊字符假设如果 String=" How:to,convert special characters" 想要转换成这个 " How-to-convert-special-characters " （如果有多个字符，如 ,; 怎么办： ) 请帮忙！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T03:15:40.950

```
@ECHO OFF
SETLOCAL
SET String=" How:to,convert special characters how to do if there are multiple characters like ,; : "
SET string1=%string:,=comma%
SET string2=%string:;=semicolon%
SET string3=%string::=fullcolon%
SET string4=%string3:;=SEMICOLON%
SET string4=%string4:,=COMMA%
SET string 
```

简单的公式是 SET varname2=%varname1:stringtoreplace=replacement%

但它确实有限制。您会遇到某些字符的问题，例如 ^="% 等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T06:00:56.573

正如 Peter Wright 建议的那样，您可以使用子字符串替换来更改单个字符，但是这种方法会保留多个字符，因此需要将多个破折号进一步更改为一个。如果您的目标是用一个破折号分隔*单词*，消除多个分隔字符（甚至多个空格），那么您可以使用不同的方法。

`FOR`Batch 命令处理以空格分隔的单词（单个或多个）*：*

```
for %%a in (one two    three      four   ) do echo %%a
one
two
three
four 
```

您可以使用*延迟扩展*将命令处理的单词收集`FOR`到单个变量中（有关详细信息，请键入`set /?`并查找“延迟扩展”）：

```
setlocal EnableDelayedExpansion
set string=
for %%a in (   one   two   three   four  ) do set string=!string! %%a
echo "%string%"
" one two three four" 
```

`FOR` *除了空格（单个或多个）之外，单词*的标准分隔符可以是逗号、分号和等号：

```
for %%a in (one,two= ;; ,, three  ===;;;,,,   four ) do ... 
```

这样，您可以直接使用`FOR`命令来消除多个空格、逗号、分号（和等号）：

```
for %%a in (%string%) do ... 
```

如果您还想多删除一个字符（如冒号），您可以在同一`FOR`命令中通过空格（或逗号、分号或等号）更改该字符：

```
for %%a in (%string::=;%) do 
```

如果要消除更多字符，可以先将字符串中的所有字符全部更改，然后使用`FOR`.

下面的批处理文件读取一个字符串并更改多个空格、逗号、分号、（等号）；冒号和点，并在单词之间插入一个破折号：

```
@echo off
setlocal EnableDelayedExpansion
set /P input=Enter a string: 
set input=%input:.=,%
set output=
for %%a in (%input::=;%) do set output=!output!%%a-
rem Eliminate the last dash:
set output=%output:~0,-1%
echo Output: "%output%" 
```

您必须注意，并非所有特殊字符都可以通过这种方式处理。

# mysql - WHERE 有两个子条件

> ID：15995267
> 
> 赞同：0
> 
> 时间：2013-04-14T02:53:43.990
> 
> 标签：mysql, sql

我想要实现的是这样的：

```
SELECT *
FROM conv
WHERE (WHERE from_user = 3 OR to_user = 3)
AND (WHERE conv = 6_3 OR conv = 3_6) 
```

因此，有时该`conv`领域的风格`[from_to]`有时`[to_from]`取决于谁开始了对话。我想列出由我或其他用户向我发起的会话中发送给我或发送给我的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T02:57:32.360

它应该像这样简单：

```
SELECT *
FROM conv
WHERE (from_user = 3 OR to_user = 3) 
```

如果你想要“功夫”版本，试试这个：

```
SELECT *
FROM conv
WHERE 3 IN (from_user, to_user) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T02:57:28.000

写`WHERE`一次关键字。

```
SELECT * FROM conv WHERE (from_user = 3 OR to_user = 3) AND (conv = 6_3 OR conv = 3_6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T02:56:23.817

只需删除多余`WHERE`的 s：

```
SELECT *
FROM conv
WHERE (from_user = 3 OR to_user = 3)
AND (conv = "6_3" OR conv = "3_6") 
```

`conv`我还将您的值包装在`"`s 中，因为 an`INT`不能包含 an `_`，因此它必须存储为 a `VARCHAR`（因此需要`"`s）。

# css - Jquery UI - 似乎无法弄清楚 css 来自定义标签颜色

> ID：15995269
> 
> 赞同：0
> 
> 时间：2013-04-14T02:54:14.540
> 
> 标签：css, jquery-ui

我正在努力阅读有关 jquery ui 的文档（特别是标签：

我已经消化了 js 函数……但我在 css 上苦苦挣扎。例如，我不知道如何更改边框颜色（就像我的自定义设置甚至没有被读取）......

到目前为止，这是我的代码...

```
 <link type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/themes/base/jquery-ui.css" rel="stylesheet" /> 
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  ui.tabs-container {position: relative; background: #0000cd; }
  ui.tabs {
      float: left;
      background: white;
      height:400px;
      line-height: 30 px;
      padding: 0 16px;
      width:409px;
      scrollbar:false;
      cursor: pointer;
} 
    ui.tabs:hover{ background: #f4f4f4; }
    ui.contents {
      float: left;
      position: absolute;
      left: 5%;
      height: 300px;
      margin-top: 31 px;
      padding: 0 px;
      border: 1 px solid #ccc;
      font-weight: normal;
      display: none;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:04:27.630

When it comes to jQuery UI there's usually a lot of classes involved with different levels of cascading, so I recommend you use Chrome's developer tools or Firefox's Firebug to figure out what you need to target with your css.

For example, with this:

```
.ui-state-default.ui-corner-top.ui-tabs-active {
  background: red;
} 
```

You can change the color of the active tab...

Demo: [http://jsbin.com/umixan/1/edit](http://jsbin.com/umixan/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:11:47.297

可能您正在寻找两个课程。`ui-state-default`和`ui-state-active`。因此，只需为每个州添加您需要的样式。例子：

```
.ui-state-default {border:1px solid #000;}
.ui-state-active {border:1px solid #fff;} 
```

**请注意**，您的 css（以上代码）必须在 jQuery's 之后`jquery-ui.css`，否则您必须使用`!important`才能进行更改。

正如darkajax 提到的，你必须开始使用firebug（或Chrome 的工具）。

# sql - 查找每个位置的前 3 名用户

> ID：15995271
> 
> 赞同：1
> 
> 时间：2013-04-14T02:54:19.590
> 
> 标签：sql, postgresql, greatest-n-per-group, window-functions, top-n

我对 SQL 相当陌生，正在解决一些实践问题。我有一个示例 Twitter 数据库，我试图根据关注者的数量在每个位置找到前 3 名用户。

这是我正在使用的表格：

```
id_follower_location

        id       | followers | location 
-----------------+-----------+----------
 id28929238      |         1 | Toronto
 id289292338     |         1 | California
 id2892923838    |         2 | Rome
 .
 .

locations

           location       
----------------------
 Bay Area, California
 London
 Nashville, TN
.
. 
```

我已经能够通过以下方式找到“顶级”用户：

```
create view top1id as 
  select location, 
    (select id_followers_location.id from id_followers_location 
      where id_followers_location.location = locations.location 
      order by followers desc limit 1
    ) as id 
  from locations;

create view top1 as 
  select location, id, 
    (select followers from id_followers_location 
      where id_followers_location.id = top1id.id
    ) as followers 
  from top1id; 
```

我能够想出解决这个问题的唯一方法是找出“Top 1st”、“Top 2nd”、“Top 3rd”，然后`union`将它们组合起来。这是正确/唯一的方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T13:56:34.610

### 前 n

与`rank()`您一起获得**至少 3**行（如果更少，则更少）。如果前 3 名之间存在*平局*，则可能会返回更多行。看：

*   [TOP n WITH TIES 的 PostgreSQL 等效项：限制“与关系”？](https://stackoverflow.com/questions/9629953/postgresql-equivalent-for-top-n-with-ties-limit-with-ties/9630562#9630562)

如果您希望每个位置**恰好有 3**行（如果存在更少，则更少），您必须打破平局。一种方法是使用[`row_number()`](https://www.postgresql.org/docs/current/functions-window.html)而不是`rank()`.

```
SELECT *
FROM (
   SELECT id, location
        , row_number() OVER (PARTITION BY location ORDER BY followers DESC) AS rn
   FROM   id_follower_location
   ) r
WHERE  rn <= 3
ORDER  BY location, rn; 
```

您可能希望添加`ORDER BY`到外部查询以保证排序输出。
如果有超过三个有效候选人，您会从平局中任意挑选 - 除非您`ORDER BY`在条款中添加更多项目`OVER`以打破平局。

### 前1名

至于获取*前 1*行的查询：PostgreSQL 中有一种*更*简单、更快捷的方法：

```
SELECT DISTINCT ON (location)
       id, location           -- add additional columns freely
FROM   id_follower_location
ORDER  BY location, followers DESC; 
```

此密切相关的答案中有关此查询技术的详细信息：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/7630564#7630564)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T03:09:39.697

您可以使用窗口函数执行此操作：[http ://www.postgresql.org/docs/9.1/static/tutorial-window.html](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

例如（未经测试可能需要轻微的语法修复）：

```
SELECT follower_ranks.id, follower_ranks.location 
FROM (
    SELECT id, location, 
      RANK() OVER (PARTITION BY location ORDER BY followers DESC) 
    FROM id_follower_location
) follower_ranks 
WHERE follower_ranks.rank <= 3; 
```

# java - 需要帮助更改按钮背景

> ID：15995277
> 
> 赞同：0
> 
> 时间：2013-04-14T02:55:50.800
> 
> 标签：java, swing, loops, drjava

我正在编写一个很像连接四个的程序，并且需要在拼写某个单词（TOOT 或 OTTO）时更改 4 个按钮的背景。目前我的代码没有改变背景。任何帮助都会很棒。

```
import javax.swing.JPanel;
import javax.swing.JButton;
import javax.swing.JFrame;
import java.awt.GridLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.lang.Integer;
import javax.swing.AbstractButton;
import java.awt.Color;
import javax.swing.UIManager;

public class TootAndOtto extends JFrame implements ActionListener {

  private int rows;
  private int columns;
  private JButton[][] gameBoard;
  private String player = "T";

  public TootAndOtto() {
    rows = 6;
    columns = 6;
    runGame();
    this.setVisible(true);
  }

/**
 * Creates the board, as well as the grid and buttons that are placed on the board
 */
  public void runGame() {
    this.setSize(600,600);
    this.setLocation(300,100); 
    JPanel board = new JPanel(new GridLayout(rows, columns));
    board.setVisible(true);
    this.getContentPane().add(board);
    gameBoard = new JButton[rows][columns];
    for (int i = 0; i < rows; i++) {
      for (int i2 = 0; i2 < columns; i2++) {
        gameBoard[i][i2] = new JButton();
        gameBoard[i][i2].addActionListener(this);
        board.add(gameBoard[i][i2]);
      }
    }
  }

/**
 * Runs the program anytime a button is clicked. This takes care of finding what button was clicked, placing a letter on a button,
 * and determining if a winner exists
 * @param e - the information of a button once is is clicked
 */
  public void actionPerformed(ActionEvent e) {
    JButton b = (JButton)e.getSource();
    int r = findRow(b);
    int c = findColumn(r, b);
    placeLabel(c);
    checkVertical(r, c);
  }

  /**
 * Finds the row of the button that is clicked
 * @param b - The address of the button that is clicked
 * @return An int that is the number of the row that but clicked button is in.
 */
  public int findRow(JButton b) {
    int r = -1;
    for (int i = 0; i < rows; i++) {
      for (int i2 = 0; i2 < columns; i2++) {
        if (b.equals(gameBoard[i][i2])){
          r = i;
        }
      }   
    }               
    return r;
  }

    /**
 * Finds the column of the button that is clicked
 * @param b - The address of the button that is clicked
 * @return An int that is the number of the column that but clicked button is in.
 */
  public int findColumn(int r, JButton b) {
    int c = -1;
    for (int z = 0; z < columns; z++) {
      if (b.equals(gameBoard[r][z])) {
        c = z;
      }
    }
    return c;
  }

   /**
 * places alternation player letters of T and O into the board if there is an empty space.
 * @param c - The column that the clicked button is in
 */
  public void placeLabel(int c) {
    boolean playMade = false;
    for(int i = rows-1; i >= 0; i--) {
      if(gameBoard[i][c].getText() == "" && playMade == false) {
        gameBoard[i][c].setText(player);
        playMade = true;
        if (player == "T")
          player = "O";
        else 
          player = "T";
      }
    }
  }

  /**
 * Checks for a vertical win in the column that the letter is placed in
 * @param r - the row that the clicked button is in 
 * @param c - The column that the clicked button is in
 */
  public void checkVertical(int r, int c) {
    if(r < (rows - 3)) {
      for (int i = r; i < rows; i++) {
        String wordCheck = "";
        if ((i + 3) < rows) {
          wordCheck = gameBoard[i][c].getText() + gameBoard[i+1][c].getText() + gameBoard[i+2][c].getText() + gameBoard[i+3][c].getText();
          if (wordCheck == "OTTO" || wordCheck == "TOOT") {
            gameBoard[i][c].setBackground(Color.yellow);
            gameBoard[i+1][c].setBackground(Color.yellow);
            gameBoard[i+2][c].setBackground(Color.yellow);
            gameBoard[i+3][c].setBackground(Color.yellow);
          }
        }
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:18:33.387

不要将`String`s 与`==`. 使用`equals`or`isEmpty`代替：

```
if(gameBoard[i][c].getText().isEmpty() && playMade == false)
...
if(player.equals("T"))
...
if(wordCheck.equals("OTTO") || wordCheck.equals("TOOT")) 
```

只有当两个-reference 指向完全相同的-object 时，-operator`==`才会返回 true 。`String``String`

`equals`如果两个`String`-objects 具有相同的内容，则返回 true。它们可能是也可能不是同一个对象。

# jquery - jQuery数据表突出显示MVC应用程序中的行选择问题

> ID：15995285
> 
> 赞同：0
> 
> 时间：2013-04-14T02:57:07.367
> 
> 标签：jquery, asp.net-mvc, datatable

我正在使用 jQuery 数据表在 MVC 应用程序中显示我的表（客户端）。我正在使用下面的示例来突出显示选定的行。

[http://www.datatables.net/beta/1.9/examples/api/select_single_row.html](http://www.datatables.net/beta/1.9/examples/api/select_single_row.html)

该脚本基本上`row_selected`基于单击从行中添加或删除类。脚本已执行，但行未突出显示。

*   我需要手动创建一个 css`row_selected`吗？
*   如果不是，那么这个类在哪里定义？或者我做错了什么？什么是最好的解决方案？
*   如果是，那么，你能举个例子吗？

提前致谢。

_Layout.cshtml:-

```
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>

    @Content.Css("DataTables-1.9.4/media/css/demo_page.css", Url)
    @Content.Css("DataTables-1.9.4/media/css/demo_table.css", Url)
    @Content.Css("DataTables-1.9.4/media/css/demo_table_jui.css", Url)
    @Content.Css("themes/base/jquery.ui.all.css", Url)

    @Content.Css("Site.css", Url)
    @Content.Script("jquery-1.5.1.min.js", Url)
    @Content.Script("jquery-ui-1.8.11.min.js", Url)
    @Content.Script("DataTables-1.9.4/media/js/jquery.dataTables.min.js", Url)
    @Content.Script("modernizr-1.7.min.js", Url)
    @Content.Script("jquery.unobtrusive-ajax.min.js", Url)
</head> 
```

Index.cshtml :- 渲染定义表的局部视图

```
@model IEnumerable<User>

<div>
    @Html.Partial("_List", Model)
<div> 
```

_List.cshtml:-

```
@model IEnumerable<User>

<div>  
<table id="jquery-datatable">
    <thead>
        <tr>
            <th>***</th>
            <th>***</th>
            <th>***</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td>***</td>
            <td>***</td>
            <td>***</td>
        </tr>
        }
    </tbody>
</table>
</div>

<script type="text/javascript">
    var oTable;

    $(document).ready(function () {

        $('#jquery-datatable tbody tr').click(function (e) {
            alert ("Start...);
            if ($(this).hasClass('row_selected')) {
                $(this).removeClass('row_selected');
            }
            else {
                oTable.$('tr.row_selected').removeClass('row_selected');
                $(this).addClass('row_selected');
            }
            alert ("Finish...);
        });

        oTable = $('#jquery-datatable').dataTable({
            "bJQueryUI": true,
            "sPaginationType": "full_numbers",
            "sScrollY": 200,
            "sScrollX": "100%",
            "bScrollCollapse": true
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:43:20.110

```
Solve:-

=> the row_selected class is not been defined in jquery datatable. So, I need to define css by myself.

=> I have created a CSS with row_selected class before post this question but it did not highlighted row.

Wrong CSS - 

.row_selected {
    background-color:#5c87b2;
}

I replaced with below CSS and working fine.

Correct CSS - 

.row_selected {
    color:white;
}

.row_selected td {
    background-color:#5c87b2;
}

I solved my issue, but any one has an idea, why background-color attribute did not work with previous CSS for <tr></tr> ?? I am using HTML5. 
```

# c# - Azure 部署问题

> ID：15995288
> 
> 赞同：5
> 
> 时间：2013-04-14T02:57:25.957
> 
> 标签：c#, azure, azure-deployment

当我想将我的云服务部署到 azure 时，我随时都会收到此错误：

```
Warning: Unable to connect to the remote serve 
```

[http://snag.gy/KdzQT.jpg](http://snag.gy/KdzQT.jpg)

我已经仔细检查了一切。云服务存在，订阅正常。我尝试制作一个全新的云服务，即使使用“空”云 wcf 应用程序，它们都不起作用。

如果在 Visual Studio 中单击一个包（不是发布）选项，然后转到管理门户，然后上传一个包，一切都很好，没关系，但我想为部署启用 Intellitrace，并且我可以看到这样做的任何选项。我只能通过 vs 部署向导启用它。

你有什么主意吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T15:39:30.593

首先，当您从 Visual Studio 部署向导启用 Intellitrace 时，它​​会更改您的 cscfg/csdef 文件。因此，您可以在此向导中启用 Intellitrace，然后取消该向导，然后通过门户进行正常的发布过程。这应该可以让您在让 Visual Studio 正常工作的同时解决该问题。

至于 Visual Studio 没有连接，很可能是您网络中的代理服务器的结果。Visual Studio 不会自动从 IE 获取代理设置，因此您需要创建一个 devenv.exe.config 文件。有关更多信息，请参阅[无法连接到任何在线资源](https://stackoverflow.com/questions/2859148/visual-studio-2010-cannot-connect-for-any-online-resource)或[http://gurustop.net/blog/2010/08/10/visual-studio-2010-extension-manager-online-gallery-behind-internet-proxy/](http://gurustop.net/blog/2010/08/10/visual-studio-2010-extension-manager-online-gallery-behind-internet-proxy/)。

# python - 为什么这个 While 循环会终止？

> ID：15995292
> 
> 赞同：1
> 
> 时间：2013-04-14T02:57:38.670
> 
> 标签：python, python-2.7

```
x=1.0
i=1
while(1.0+x>1.0):
    x=x/2
    i=i+1
print i 
```

后续问题，为什么 i=54 的值？

我的想法是循环不会结束，因为 (1.0+x) 的值将始终保持大于 1.0。但是在运行代码时，情况并非如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T02:59:45.703

由于[浮点数的不准确，](http://docs.python.org/2/tutorial/floatingpoint.html)总会有这样的时候， 的值`x`太小，Python 无法存储它的值，本质上变成了`0`. 到达那个阶段需要 54 次迭代（[实际上是 53](https://stackoverflow.com/a/15995317/1907098)`i`次），这就是为什么是 54 次。

例如，

```
>>> 1e-1000
0.0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T03:01:42.903

为什么是 54？-- 实际上是 53，因为它是在你增加它之前

```
>>> 2.**-54
5.551115123125783e-17

>>> 2.**-53
1.1102230246251565e-16

>>> 2.**-52
2.220446049250313e-16

>>> sys.float_info.epsilon
2.220446049250313e-16 
```

如果你把这么小的东西加到 1，它仍然是 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T03:08:58.833

在处理浮点数或浮点数时，您会遇到臭名昭著的[Floating Point Epsilon](http://en.wikipedia.org/wiki/Machine_epsilon)：

在您的情况下，这需要 54 次迭代才能低于该阈值（因为 Python 中的默认浮点类型是单精度，而单精度的浮点 epsilon 是：

```
def machineEpsilon(func=float):
    machine_epsilon = func(1)
    while func(1)+func(machine_epsilon) != func(1):
        machine_epsilon_last = machine_epsilon
        machine_epsilon = func(machine_epsilon) / func(2)
    return machine_epsilon_last 
```

因此：

```
In [2]: machineEpsilon(float)
Out[2]: 2.2204460492503131e-16 
```

53 次迭代从何而来？

从代码中的这一行：

```
x=x/2 
```

它将当前值分配`x`给`x/2`意味着在第 53 次迭代中，它变成了：

```
1.11022302463e-16 
```

**这小于浮点 epsilon。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T03:11:10.483

正如已经指出的那样 - 这是因为`float`s 的准确性。如果你想克服这个“限制”，你可以使用 Python 的`fractions`模块，例如：

```
from fractions import Fraction as F

x = F(1, 1)
i=1
while(F(1, 1)+x>1.0):
    print i, x
    x = F(1, x.denominator * 2)
    i=i+1
print i 
```

（注意：这将一直持续到被打断）

# mysql - 使用 SQL 进行模式匹配

> ID：15995293
> 
> 赞同：1
> 
> 时间：2013-04-14T02:58:06.107
> 
> 标签：mysql, sql, database, oracle, pattern-matching

我需要使用 SQL 匹配下面提到的模式。

1.  “* 谢谢你”
2.  “* 音乐 *”
3.  “我喜欢音乐”
4.  “我喜欢*音乐和*绘画”

输入字符串如下所示，
“HI THANK YOU” -> 应该匹配“* THANK YOU”
“我非常喜欢音乐” -> 应该匹配“* MUSIC *”

有没有办法使用标准 SQL 语法来做到这一点。

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:01:41.603

Oracle MySQL Sample Queries:

Case insensitive:

```
select * from database where column like '%THANK YOU%'; 
```

Case sensitive:

```
select * from database where column LIKE BINARY '%THANK YOU%'; 
```

Case insensitive:

```
select * from database where column REGEXP 'THANK YOU'; 
```

Oracle Queries:

```
select * from database WHERE REGEXP_LIKE(column, 'THANK YOU', 'i') 
```

You can use LIKE in Oracle, but case insensitivity setup depends on the version.

Case sensitive:

```
select * from database WHERE column LIKE 'THANK YOU'; 
```

There is a lot of discussion about making Oracle's like case insensitive. It's easier to use the reg_exp version for that and set the `i` flag for case insensitivity.

**Update** The original question was actually opposite of my first answer, and it has really opened up my head about quite a few apps that I'm building for datamining. Actually had this idea last night but the original poster posted it before I did (Fiddle was down). You can make Regex match both sides of the REGEXP function in MySQL. So if you store a list of expressions into the database, then you can actually compare the list of expressions against a table of entries or a single string.

I've added an SQL Fiddle here: [http://sqlfiddle.com/#!8/701a0/2](http://sqlfiddle.com/#!8/701a0/2)

**Note** that in the original example, the "regex" values in the database started with just an asterisk. In Regex, the actual string would need to be .* for possibly any character.

I've added a few examples for matching things like websites, US Toll Free Numbers, and gmail accounts.

```
INSERT INTO `myRegex` VALUES (1,'.* THANK YOU$'),(2,'MUSIC'),(3,'I LIKE .* MUSIC'),(4,'I LIKE .* MUSIC AND .* PAINTING'),(5,'^[0-9]?[ .-]?(800|866)'),(6,'\\.com$'),(7,'\\.net$'),(8,'\\.(gmail|googlemail)\\.'),(9,'THANK YOU'); 
```

Output

```
select * from myRegex where 'HI THANK YOU' REGEXP reg_expr; 
```

![enter image description here](https://i.stack.imgur.com/y0qM0.png)

```
select * from myRegex where 'THANK YOU MUCH' REGEXP reg_expr; 
```

![enter image description here](https://i.stack.imgur.com/5Sxff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T09:08:47.377

我找到了一种使用 MySQL 的方法，

SELECT * FROM Knowledge WHERE 'HI THANK YOU' REGEXP pattern_col;

pattern_col 包含正则表达式。

# c - 以亚微秒精度测量 Linux 内核空间中的时间

> ID：15995295
> 
> 赞同：11
> 
> 时间：2013-04-14T02:58:26.767
> 
> 标签：c, linux, time, linux-kernel

我目前正在使用该`do_gettimeofday()`函数来测量内核中的时间，这给了我微秒级的精度。有没有比这更精确的东西（可能是纳秒级）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-14T11:45:12.040

该`ktime_get()`函数返回`ktime_t`具有纳秒分辨率的 。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T09:41:38.523

据我所知，最精确的计时器应该是特定于处理器的计数器寄存器（例如x86 中的[TSC](http://en.wikipedia.org/wiki/Time_Stamp_Counter)）。Linux 内核从“./arch/x86/include/asm/msr.h”文件中提供了 rdtsc、rdtscl、rdtscl 宏来读取这个寄存器值。对于 ARM，[循环计数器寄存器](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0290g/Bihcgfcf.html)。

这些寄存器都因 CPU 不同而不同。访问它的通用接口是在 <linux/timex.h> 文件中声明的“get_cycles”函数。

也许，[这份文件](https://www.makelinux.net/ldd3/chp-7-sect-1.shtml)会有所帮助。

# vb.net - DataGridView 单元格值更改不会发生，直到我从按钮单击调用

> ID：15995296
> 
> 赞同：2
> 
> 时间：2013-04-14T02:58:29.857
> 
> 标签：vb.net, datagridview, ms-access-2007

我已将产品列表从访问数据库检索到 DataGridView。这是代码：

```
Sub loadProductList()
    Try
        Using dbConn As New OleDb.OleDbConnection
            dbConn.ConnectionString = dbProvider & dbSource
            dbConn.Open()
            Dim thisSQL As String
            thisSQL = "SELECT productID, productName, productCostPrice From " & tblProduct & " WHERE productBrandID=" & CType(txtBrandName.Tag, Integer)
            Dim Dadapter As New OleDbDataAdapter(thisSQL, dbConn)
            Dim DSet As New DataSet
            Dadapter.Fill(DSet, tblProduct)
            With DataGridView1
                .Columns.Clear()
                .DataSource = DSet.Tables(tblProduct)
                With .Columns.Item(0)
                    .Width = 50
                    .HeaderText = "Code"
                    .Name = "Code"
                End With
                Dim txtColumn As New DataGridViewTextBoxColumn
                With txtColumn
                    .Width = 50
                    .HeaderText = "Qty"
                    .Name = "Qty"
                End With
                .Columns.Insert(1, txtColumn)
                With .Columns.Item(2)
                    .Width = 490
                    .HeaderText = "Description"
                End With
                With .Columns.Item(3)
                    .Width = 100
                    .HeaderText = "Price"
                    .Name = "Price"
                    .DefaultCellStyle.Format = "N"
                End With
                Dim txtaColumn As New DataGridViewTextBoxColumn
                .Columns.Insert(4, txtaColumn)
                With .Columns.Item(4)
                    .Name = "Amount"
                    .HeaderText = "Amount"
                    .Width = 120
                    .DefaultCellStyle.Format = "N"
                End With
            End With
        End Using
    Catch ex As Exception

    End Try
End Sub
Sub UpdatePurchaseItemList()
    Try
            Using dbConn As New OleDb.OleDbConnection
            dbConn.ConnectionString = dbProvider & dbSource
            dbConn.Open()
            Dim thisSQL As String
            thisSQL = "SELECT * FROM " & tblPurchaseItems & " WHERE PitemPID='" & txtRefID.Text & "'"
            Using dbDataCmd As New OleDbCommand(thisSQL, dbConn)
                Dim dbDataRead As OleDbDataReader
                dbDataRead = dbDataCmd.ExecuteReader()
                Do While dbDataRead.Read = True
                    For i As Integer = 0 To DataGridView1.Rows.Count - 1
                        With DataGridView1.Rows(i)
                            If .Cells("Code").Value = dbDataRead("PitemProductID") Then
                                .Cells("Qty").Value = dbDataRead("PitemProductQty")
                                .Cells("Price").Value = dbDataRead("PitemCost")
                                .Cells("Amount").Value = dbDataRead("PitemTotal")
                                Exit For
                            End If
                        End With
                    Next
                Loop
            End Using
        End Using
    Catch ex As Exception

    End Try
End Sub 
```

在表单加载时，我同时调用 sub:
loadProductList()
UpdatePurchaseItemList() ' 这不会更新任何东西

但是当我在按钮上调用这个子按钮时，它甚至可以完美地工作。

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    UpdatePurchaseItemList() 'it shows the updates. 
End Sub 
```

请告诉我为什么它不显示更新？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T02:48:33.800

好的，试试这个技巧，它会自动更新你 datagridview 上的数据

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    RefreshData()
End Sub

 Private Sub RefreshData()

    Dim da As OleDbDataAdapter
    Dim ds As New DataSet

    If Not cnn.State = ConnectionState.Open Then
        'open connection
        cnn.Open()
    End If

    da = New OleDb.OleDbDataAdapter("Select * FROM tblPurchaseItems", cnn)

    'Dim dt As New DataSet
    'fill data to datatable
    da.Fill(ds)

    'offer data in data table into datagridview
    Me.DataGridView1.DataSource = ds.Tables(0)
    Me.DataGridView1.Refresh()
    'close connection
    cnn.Close()

End Sub 
```

然后在添加、编辑、删除子语句结束之前复制并粘贴 RefreshData()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:17:58.960

我现在无法测试，但在更新 datagridview 后尝试 endedit()：

```
 With DataGridView1.Rows(i)
                    If .Cells("Code").Value = dbDataRead("PitemProductID") Then
                        .Cells("Qty").Value = dbDataRead("PitemProductQty")
                        .Cells("Price").Value = dbDataRead("PitemCost")
                        .Cells("Amount").Value = dbDataRead("PitemTotal")
                        DataGridView1.EndEdit()
                        Exit For
                    End If
                End With 
```

那应该“提交并结束当前单元格上的编辑操作。” 根据 MSDN [Datagridview.EndEdit 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.endedit.aspx)

# android - Facebook 聊天头是如何实现的？

> ID：15995297
> 
> 赞同：18
> 
> 时间：2013-04-14T02:58:48.657
> 
> 标签：android, facebook

[Facebook Android Messenger 应用程序](https://play.google.com/store/apps/details?id=com.facebook.orca)有一个名为 Chat Heads 的功能。它在其他应用程序的顶部放置了一个聊天图标和窗口。这是如何实现的？使用了哪些 Android API？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-05T14:08:00.833

搜索权限`android.permission.SYSTEM_ALERT_WINDOW`和`WindowManager.LayoutParams.TYPE_SYSTEM_ALERT`。

请参阅[Daniel Jankowski](https://codingshark.wordpress.com/)的[这篇博](https://codingshark.wordpress.com/2015/02/01/how-to-draw-on-top-of-other-applications/?utm_source=androiddevdigest)文和他在 GitHub 上的[WindowHead 示例。](https://github.com/mollyIV/android-samples)

除了已经列出的重复答案之外，另请参阅：

*   [让应用程序在其他应用程序之上运行](https://stackoverflow.com/questions/10266959/having-application-running-above-other-app)
*   [消失的 Facebook 聊天头](http://debuggingisfun.blogspot.com/2013/06/disappearing-facebook-chat-heads.html)

# c# - Google Spreadsheets API 查询 orderby 多列

> ID：15995298
> 
> 赞同：2
> 
> 时间：2013-04-14T02:58:52.670
> 
> 标签：c#, java, google-spreadsheet-api

我正在通过 API 查询我的 Google 电子表格（[这里](https://developers.google.com/google-apps/spreadsheets/)是功能）。

它们提供了`orderby`以特定顺序查询工作表的功能，而不仅仅是按顺序查询`row number`，例如：

```
<worksheet_feed_url>?orderby=column:lastname 
```

这将为您提供按 lastname 列排序的工作表（*字段名称来自工作表的第一行*）。

所以我想查询这个，但是对于多个列，例如，如果我想不仅按`lastname`，而且按`firstname`等排序。

我已经尝试过：

*   `orderby=column:lastname,firstname`
*   `orderby=column:lastname,column:firstname`
*   `orderby=column:lastname&orderby=column:firstname`

他们不工作。如果不可能，我也想知道。谢谢你。

# ruby-on-rails - 在 RoR 中组合不同对象的数组，并按每个对象上不同属性的日期值排序

> ID：15995299
> 
> 赞同：3
> 
> 时间：2013-04-14T02:59:08.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 ruby​​ on rails 中有两个对象数组。我想组合它们并按两个不同的属性对它们进行排序。这可能吗？

一个是“Post”记录数组，一个是“Talk”记录数组。它们都需要按日期排序。但是对于 Post，相关属性是 created_at，而对于 Talk，它是 date_given。这是让我考虑消除这两种不同模型并用更灵活的 Post 模型替换它们的一种令人头疼的问题。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T03:53:10.503

我只是尝试了一些可行的方法，但不确定它是否是处理此问题的最佳方法。我只是为每个模型添加一个称为可排序日期的方法，并将其设置为我想要的。一个问题是 created_at 是 Time 而 date_given 是 DateTime，所以我用这篇文章来处理[在 Ruby 中转换到/从 DateTime 和 Time](https://stackoverflow.com/questions/279769/convert-to-from-datetime-and-time-in-ruby)

```
talk.rb

def sortable_date
  date_given
end  

post.rb

def sortable_date
  created_at.to_datetime
end 
```

然后在我的控制器中 -

```
@posts = Post.order('created_at DESC').limit(3)
@talks = Talk.order('date_given DESC').limit(3)

@news = @posts + @talks
@news.sort_by! &:sortable_date
@news = @news[1..4] 
```

我只是在我的视图中渲染@news，它很好地召唤了适当的部分。我希望得到一些反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:12:40.880

```
posts = Post.all
talks = Talk.all
posts+talks.sort do |a,b|
   attr_a = a.kind_of?(Post) ? 'created_at' : 'date_given'
   attr_b = b.kind_of?(Post) ? 'created_at' : 'date_given'
   a.send(attr_a) <=> b.send(attr_b)
end 
```

应该有一种 SQL 方式来做到这一点，但是，这种方式更简单。

# jquery - 引导导航栏 JQuery 部分修复

> ID：15995304
> 
> 赞同：0
> 
> 时间：2013-04-14T02:59:24.627
> 
> 标签：jquery, html, twitter-bootstrap, navbar

所以我有一个模板，我网站上的所有页面都是从中创建的。这是我想要的一个例子：[小提琴](http://jsfiddle.net/9TMnJ/1/)

但是，在我的网站上，由于这些链接会转到特定页面（即单击 about 链接时的 About.html），因此该页面会加载 html

```
<div class="container">
    <div class="masthead">
        <div class="navbar">
            <div class="navbar-inner">
                <ul class="nav">
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Calendar</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

发生的情况是：
1）我单击导航栏中的 about 链接
2）页面指向 About.html
3）导航栏突出显示 About 链接一秒钟（执行该 jquery 代码）
4）当页面加载时，主页变为活动状态再次上课是因为`<li class="active"><a href="#">Home</a></li>`

因此，基本上您单击的链接会突出显示一秒钟，然后主页再次突出显示。我如何让它像小提琴一样工作（链接在导航栏中保持突出显示）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:14:28.290

从 html 中删除默认的 li.active，因此替换以下行：

```
<li class="active"><a href="#">Home</a></li> 
```

对于这个：

```
<li><a href="#">Home</a></li> 
```

然后通过查看 url 在页面加载时设置活动 li，如下所示：

```
$(document).ready(function(){
    $('.nav li a').click(function (e) {
        $(this).parent().parent().find('.active').removeClass('active');
        $(this).parent().addClass('active');
    }).each(function() {
        if ( location.href.indexOf('about.html') && $(this).text() == 'About') {
             $(this).parent().addClass('active');
        } else if (location.href.indexOf('calendar.html') && $(this).text() == 'Calendar') {
             $(this).parent().addClass('active');
        }
    });
}); 
```

# java - 使用 array.append 方法将自己的对象类型添加到数组

> ID：15995307
> 
> 赞同：-1
> 
> 时间：2013-04-14T02:59:39.680
> 
> 标签：java, arrays

```
private State USA = new State("United States of America");
private State CAN = new State("Canada");
private State MEX = new State("Mexico");
private State[] stateArray;
public static void main()
{
}

public void addState(State state) //I need a way to add the Private objects called State into an array here. The command must take User Interface
{
    stateArray = stateArray.add(state);
} 
```

好吧，总而言之，我需要的只是某种可以将项目添加到数组中的方法，如 addState 数组中所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:04:15.413

使用`List<State> sates = new ArrayList<State>();`

```
public void addState(State state){
  sates.add(state);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:02:59.503

如果要使用数组：

```
private State USA = new State("United States of America");
    private State CAN = new State("Canada");
    private State MEX = new State("Mexico");
    private State[] stateArray = new State[3];
    int index = 0;
    public static void main()
    {
    }

    public void addState(State state) //I need a way to add the Private objects called State into an array here. The command must take User Interface
    {
       if(index < stateArray.length)
           stateArray[index++] = state;
    } 
```

或者您可以使用[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)数组代替。

```
private State USA = new State("United States of America");
    private State CAN = new State("Canada");
    private State MEX = new State("Mexico");
    private ArrayList<State> stateArray = new ArrayList<State>;
    public static void main()
    {
    }

    public void addState(State state) //I need a way to add the Private objects called State into an array here. The command must take User Interface
    {
        stateArray.add(state);
    } 
```

# jquery - 如何清除或重置列表视图中的搜索过滤栏？

> ID：15995308
> 
> 赞同：0
> 
> 时间：2013-04-14T02:59:41.597
> 
> 标签：jquery, jquery-mobile, filtering, jquery-mobile-listview, jquery-mobile-fieldset

为了这个问题的答案，我到处搜索。我有一个使用 listview 搜索过滤器的应用程序。但是，当用户离开页面时，搜索过滤器会“记住”之前的搜索。

我的问题：当用户离开页面时如何重置搜索过滤器？下次打开页面时，我希望清除搜索过滤器，以便再次显示整个列表并且之前的搜索是“忘记”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T08:23:24.793

首先你需要像这样清空它：

```
$('input[data-type="search"]').val("");
$('input[data-type="search"]').trigger("keyup"); 
```

工作 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/fEV3J/](http://jsfiddle.net/Gajotres/fEV3J/)

**HTML：**

```
<div data-role="content">
    <div data-role="fieldcontain">    
        <ul data-role="listview" data-filter="true">
            <li><a href=#>Cat</a></li>
            <li><a href=#>Dog</a></li>
            <li><a href=#>Mouse</a></li>
        </ul>
    </div>
    <div data-role="fieldcontain">       
       <input type="button" value="Clear" id="clear-filter"/>
    </div>
</div> 
```

**JS：**

```
$(document).on('click', '#clear-filter', function(){       
    $('input[data-type="search"]').val('');
    $('input[data-type="search"]').trigger("keyup");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-14T01:46:07.530

删除输入值，触发 keyup 事件以撤消最后一个过滤器，并（如果需要）将光标聚焦以进行新搜索。

```
$(document).ready(function () {
    $('#input-filter').val('').trigger('keyup').focus();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T21:51:53.683

你可能想试试这个：

```
$('a[data-icon="delete"]').trigger('click'); 
```

另外，您可能想要添加任何您可能拥有的表格

```
$('#myForm a[data-icon="delete"]').trigger('click'); 
```

# android - 如何在活动之间切换时保持GPS打开但按下“主页”时关闭

> ID：15995311
> 
> 赞同：2
> 
> 时间：2013-04-14T02:59:59.817
> 
> 标签：android, gps, location

我试图找出使用 onResume 和 onPause 将侦听器实现到位置的最佳方法。最好我不能在 onPause 上关闭它并在 onResume 上重新连接。但是，当我想要的只是让 GPS 在应用程序期间保持打开状态时，我会一直断开重新连接。当按下主页（或其他应用程序正在中断）时，可以关闭 GPS 以节省电池电量。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:22:26.563

您的问题可以概括为“我如何判断我的应用何时移入/移出前台？” 我已经在两个需要识别这一点的不同应用程序中成功使用了以下方法。

当您更改活动时，您应该会看到以下生命周期事件序列：

```
Activity A onPause()
Activity B onCreate()
Activity B onStart()
Activity B onResume()
Activity A onStop() 
```

只要这两个活动都是您的，您就可以创建一个单例类来跟踪您的应用程序是否是前台应用程序。

```
public class ActivityTracker {

    private static ActivityTracker instance = new ActivityTracker();
    private boolean resumed;
    private boolean inForeground;

    private ActivityTracker() { /*no instantiation*/ }

    public static ActivityTracker getInstance() {
        return instance;
    }

    public void onActivityStarted() {
        if (!inForeground) {
            /* 
             * Started activities should be visible (though not always interact-able),
             * so you should be in the foreground here.
             *
             * Register your location listener here. 
             */
            inForeground = true;
        }
    }

    public void onActivityResumed() {
        resumed = true;
    }

    public void onActivityPaused() {
        resumed = false;
    }

    public void onActivityStopped() {
        if (!resumed) {
            /* If another one of your activities had taken the foreground, it would
             * have tripped this flag in onActivityResumed(). Since that is not the
             * case, your app is in the background.
             *
             * Unregister your location listener here.
             */
            inForeground = false;
        }
    }
} 
```

现在创建一个与该跟踪器交互的基本活动。如果您的所有活动都扩展了此基本活动，您的跟踪器将能够告诉您何时移动到前台或后台。

```
public class BaseActivity extends Activity {
    private ActivityTracker activityTracker;

    public void onCreate(Bundle saved) {
        super.onCreate(saved);
        /* ... */
        activityTracker = ActivityTracker.getInstance();
    }

    public void onStart() {
        super.onStart();
        activityTracker.onActivityStarted();
    }

    public void onResume() {
        super.onResume();
        activityTracker.onActivityResumed();
    }

    public void onPause() {
        super.onPause();
        activityTracker.onActivityPaused();
    }

    public void onStop() {
        super.onStop();
        activityTracker.onActivityStopped();
    }
} 
```

# wordpress - 如何：将 localhost 重定向到我在 Apache 中的外部 IP 地址

> ID：15995312
> 
> 赞同：1
> 
> 时间：2013-04-14T03:00:22.833
> 
> 标签：wordpress, apache, xampp, localhost

我这几天都在用XAMPP学习wordpress。我已经建立了一个简单的站点。在我的路由器中打开80端口后，我可以像这样访问我的站点：

外部IP/wordpress

问题是：我**只能**打开我的 index.php。我注意到 index.php 中的链接都以“localhost/”开头。我知道我必须做一些事情来将其修改为我的实际 IP 地址，但我不知道出来怎么做。我该怎么做？

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:21:35.570

有时将站点 URL 和主 URL 临时添加到配置文件中比更新数据库更容易。这样，当您上线时，您只需从配置中删除这些行。

将以下行添加到`wp-config.php`文件中的`line 64`位置之后`define('WPLANG', '');`

`define('WP_SITEURL', 'http://YOUR_LOCAL_IP');`
`define('WP_HOME', 'http://YOUR_LOCAL_IP');`

如果您在子目录中有 WP，则将该目录添加到 WP_SITEURL 变量中，例如：

`define('WP_SITEURL', 'http://YOUR_LOCAL_IP/wordpress');`
`define('WP_HOME', 'http://YOUR_LOCAL_IP');`

**替换** `YOUR_LOCAL_IP`为您的实际主机 IP，例如`http://192.168.0.1`.

如果你不是在本地开发，而只是远程访问，你可以`YOUR_EXTERNAL_IP`代替本地使用。

最后，导航到 WP Admin -> Settings -> Permalinks，然后单击 Save。这将重置 WP 以将您的新值用于链接。

如果您在帖子或页面中有任何硬编码的链接或图像，则必须手动更新它们的 URL。

# c++ - C++ / mysql 连接器 - 对 get_driver_instance 的未定义引用 - 已经尝试过简单的东西

> ID：15995319
> 
> 赞同：22
> 
> 时间：2013-04-14T03:01:56.373
> 
> 标签：c++, mysql, ubuntu-12.10

是的，这个问题之前已经被问过......我已经尝试了前面答案中提到的所有内容。我的设置非常简单，所以这不应该那么难。

我只想使用 C++ 对 mysql 进行编程。我的源代码是从这里的“hello world”类型示例中逐字提取的：

[http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-complete-example-1.html](http://dev.mysql.com/doc/refman/5.1/en/connector-cpp-examples-complete-example-1.html)

我在 Ubuntu 12.10 上。我在尝试：

```
g++ -Wall -o firsttry_prog -I/usr/include/mysqlcppconn -I/usr/local/boost_1_53_0  -L/usr/lib/x86_64-linux-gnu -l:libmysqlclient_r.so.18 -L/usr/lib/mysqlcppconn -lmysqlcppconn  firsttry.cpp 
```

它编译（如果我使用 -c 选项）但不会编译，这给了我臭名昭著的：

```
/tmp/ccn768hj.o: In function `main':
firsttry.cpp:(.text+0x3a): undefined reference to `get_driver_instance' 
```

一些细节：

*   *'firsttry.cpp'*就是我对源代码文件的命名，再次逐字逐句取自官方示例
*   如您所见，我正在链接*mysqlclient*库和*mysqlcppconn*库。以前多次问过这个问题时，答案是把它们联系起来。
*   其他一些历史答案表明示例源代码是错误的，并且有问题的函数需要位于 sql::mysql 命名空间等中。我很确定源代码是好的。同样，它可以编译，并且更改源代码中的命名空间似乎会使情况变得更糟。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-15T00:13:10.793

所以我现在这个问题已经有一个星期了，我也对此感到非常沮丧。我刚刚终于能够构建一个除了登录 mysql 之外什么都不做的程序，我真的高兴得尖叫起来。这是我所拥有的，我希望它有所帮助。

我首先从源代码编译了 c++ 连接器库，但过了一段时间我想也许我做错了什么，所以我只是使用 apt 来获取它：

```
sudo apt-get install  libmysqlcppconn-dev 
```

这是我的简单测试源文件“tester.cpp”

```
#include <stdlib.h>
#include <iostream>
#include <mysql_connection.h>
#include <driver.h>
#include <exception.h>
#include <resultset.h>
#include <statement.h>

using namespace sql;
int main(void){
  sql::Driver *driver;
  sql::Connection *con;

  driver = get_driver_instance();
  con = driver->connect("tcp://127.0.0.1:3306","root","YOURPASSWORD");

  return 0;
} 
```

最后是 g++ 编译命令：

```
sudo g++ -Wall -I/usr/include/cppconn -o testapp tester.cpp -L/usr/lib -lmysqlcppconn 
```

这对我有用，我希望它可以帮助您解决问题！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-22T21:03:18.820

对我来说，只需交换最后两个参数的顺序即可解决此问题。我不知道为什么，但是`get_driver_instance`如果我`-lmysqlcppconn`在源文件后面指定选项，链接器能够找到该函数。

```
g++ -Wall -o firsttry_prog -I/usr/include/mysqlcppconn -L/usr/lib/mysqlcppconn firsttry.cpp -lmysqlcppconn 
```

另请注意，我删除了以下选项，因为我认为它们是多余的

```
-I/usr/local/boost_1_53_0  -L/usr/lib/x86_64-linux-gnu -l:libmysqlclient_r.so.18 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-10-17T01:40:41.803

如果你和我一样健忘并且没有在 CMakeLists.txt 中链接库：

```
target_link_libraries(<target> mysqlcppconn) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-12T09:11:07.893

如果包含所有路径，则抛出参数 -I。如果你这样编译，你会看到是否有问题：

```
g++ -g  -o0  -I/usr/local/include -I/usr/local/boost/include -c main.cpp -o main.o
g++ -g  -o0 -L/usr/local/lib -L/usr/local/mysql/lib -lmysqlcppconn  main.o  -o test 
```

会出现问题：

```
main.o: In function `main':
/home/huangxw/workspace/public/soal/test/main.cpp:165: undefined reference to `get_driver_instance'
collect2: ld returned 1 exit status 
```

现在您必须调整 和 的`-lmysqlcppconn`顺序`main.o`：

```
g++ -g  -o0  -I/usr/local/include -I/usr/local/boost/include -c main.cpp -o main.o
g++ -g  -o0 -L/usr/local/lib -L/usr/local/mysql/lib main.o  -o test  -lmysqlcppconn 
```

就这些！！原因很简单。您可以使用网络查找或要求我详细说明。

# html - 使用 htaccess 将旧 url 流量重定向到新 url 和 301 永久移动

> ID：15995320
> 
> 赞同：2
> 
> 时间：2013-04-14T03:02:04.343
> 
> 标签：html, .htaccess, redirect

我正在尝试使用 301 永久移动指令通过 .htaccess 将网站的旧网址更改为新网址

我想将所有流量更改为新 url，并且我还想告诉搜索引擎某些页面的新地址（哪个 url 更改了）

我用了

```
Redirect 301 / http://www.newdomain.com/
Redirect 301 /page1.html http://www.newdomain.com/page1/
Redirect 301 /page2.html http://www.newdomain.com/page2/
Redirect 301 /page3.html http://www.newdomain.com/page3/ 
```

但我得到的结果是最后三个指令重定向到

```
http://www.newdomain.com/page1.html and so 
```

有什么我在这里遗漏的，或者我需要做些什么来重定向流量并告诉每个页面的新网址是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:18:10.437

我实际上设法通过重新组织 htaccess 内容来解决这个问题

```
Redirect 301 /page1.html http://www.newdomain.com/page1/
Redirect 301 /page2.html http://www.newdomain.com/page2/
Redirect 301 /page3.html http://www.newdomain.com/page3/
RedirectMatch 301 /(.*) http://www.domaintoredirecto.com1 
```

工作...

# nsmutablearray - 比较数集

> ID：15995322
> 
> 赞同：0
> 
> 时间：2013-04-14T03:02:35.043
> 
> 标签：nsmutablearray, integer, nsset

我一直在尝试使用 NSSet 和 NSMutable set 来使用 IntersectSet 函数比较一组数字。但是，我相信我会通过使用整数来反对类型。有没有办法创建一个 NSSet 并将 IntersectsSet 函数用于整数。有没有另一种方法可以完全做到这一点？

这是一个代码片段：

```
NSSmutableArray *compareRow [[NSMutableArray alloc] init];
NSSet *A_Table = [[NSSet alloc] initWithObjects:@"1", @"2", @"3", @"4", @"5", @"6", @"7", @"8", @"9", @"10", @"11", @"12",nil];

//...
//Reading some data from a file.

        //Populate the tables with the third arrays
        [currentHistoryRow addObject:[NSNumber numberWithInt:post1]];
        [currentHistoryRow addObject:[NSNumber numberWithInt:post2]];
        [currentHistoryRow addObject:[NSNumber numberWithInt:post3]];
        [currentHistoryRow addObject:[NSNumber numberWithInt:post4]];
        [currentHistoryRow addObject:[NSNumber numberWithInt:post5]];

        NSSet *compareRow = [[NSSet alloc] initWithArray:currentHistoryRow];

        if ([compareRow intersectsSet:A_Table]) {
            // You'll see this message
            NSLog(@"subset present");
        } 
```

我认为 A_Table 和 compareRow 不是同一类型，因此条件永远不会成立。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:27:55.187

将整数包装进去`NSNumber`，然后将它们添加到`NSSet`. 十字路口将按广告宣传。

```
NSSet *set = [NSSet setWithObjects: @10, @20, nil];
// etc. 
```

# mysql - MySQL 错误 1064 - 正确的语法？

> ID：15995326
> 
> 赞同：1
> 
> 时间：2013-04-14T03:03:06.923
> 
> 标签：mysql, ssh, amazon-web-services, syntax-error

我对 MySQL 很陌生，所以在您决定对此投反对票之前，请添加评论，我将删除该帖子。我正在关注关于 android-hive 的教程[http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)，它使用 MySQL 作为数据库持有用户信息。我在 AWS EC2 Linux 实例上设置了 MySQL，以及 apache tomcat 等。教程说：

```
Open your mysql console or phpmyadmin and run following query to create database 
and users table:

create database android_api /** Creating Database **/

use android_api /** Selecting Database **/

create table users(
uid int(11) primary key auto_increment,
unique_id varchar(23) not null unique,
name varchar(50) not null,
email varchar(100) not null unique,
encrypted_password varchar(80) not null,
salt varchar(10) not null,
created_at datetime,
updated_at datetime null
); /** Creating Users Table **/ 
```

我通过 SSH 连接到我的 Linux 实例并启动 MySQL 并运行教程中所述的查询。我收到以下错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 
'use android_api
create table users(
uid int(11) primary key auto_increment,
' at line 3 
```

我真的不知道如何解决这个问题，感谢您提供的任何帮助，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:19:04.107

好像你错过了语句分隔符。尝试使用“;” 在每个查询结束时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:08:42.403

In your code there is

```
use android_api //this one is correct 
```

but in error message the quote is

```
uses android_api 
```

so it looks like this code is not exactly same that You have problem with.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-25T09:01:04.247

如果以后有人遇到这种情况。解决方案是先使用创建数据库查询，然后在创建数据库后使用“使用”查询和创建表查询。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-01T20:18:05.650

有一个语法错误使用“;” 在第二条语句之后，比如使用 android_api；它对我有用:-)

# symfony - Fill a form with the username in the symfony2 session

> ID：15995328
> 
> 赞同：0
> 
> 时间：2013-04-14T03:03:39.943
> 
> 标签：symfony, symfony-forms, symfony-2.3

I want to build a form that can use the information stored in a session to set default field values. ie when a user wants to log in, the field **username** will be populated automatically with the username stored in the session.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T05:39:09.907

您可能需要做的是[创建自定义表单字段类型](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html)，甚至[在自定义字段类型中使用转换器](http://symfony.com/doc/master/cookbook/form/data_transformers.html#using-transformers-in-a-custom-field-type)。

我对 Symfony2 的所有功能都不是非常熟悉，但我假设您可以将会话或[响应对象（以获取 cookie）](https://stackoverflow.com/questions/7727442/read-and-write-cookie-in-symfony2)[传递](http://symfony.com/doc/master/components/http_foundation/sessions.html)给转换器。如果用户名可用，则可以将其设置为字段数据，如果未设置为空字符串。

# sql - Firebird - 对主表使用插入前触发器来汇总详细记录

> ID：15995333
> 
> 赞同：1
> 
> 时间：2013-04-14T03:04:45.417
> 
> 标签：sql, stored-procedures, firebird

我有两个表，一个主表和一个详细表。插入新的主记录**后，**使用触发器自动创建明细表记录。

但是我需要为主表创建`Before Insert or Update`触发器（调用它`T1`），以根据主记录中的字段和详细记录中的总和进行一些计算。

我的问题是能够进行计算，`T1`我需要先插入详细记录，但当然详细记录对主表 ID 有外键约束，这会阻止此操作，那么您认为实现此任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:42:14.323

我认为最好的方法是使用完成所有工作的存储过程......像这样：

```
create procedure insert_record(id integer, ...);
as
begin
    /* this inserts master and through triggers creates detail */
    insert into master (id, ... ) 
    values (:id, ...);

    /* calculate values */
    select sum(...) from detail
    where id = :id
    into :calculation;

    /* usa calculated value to update master table */
    update master
    set calculated_value = :calculation
    here id = :id;
end 
```

# javascript - Access nodejs with web javascript but hitting XSS?

> ID：15995334
> 
> 赞同：0
> 
> 时间：2013-04-14T03:04:50.900
> 
> 标签：javascript, node.js, cross-site

I have a nodejs app that runs a web server and works as a web API. Simple `GET`s to interact with it. My goal is to be as accessible as possible by any language or programmatic scenario. My biggest problem is that javascript run in the browser can't hit it because the browser (specifically chrome) prevent cross site scripting. I'm open to any ideas that allow this. I want any site to be able to make requests against the url, sort of like how twitter has a javascript API.

I've tried using jQuery's ajax with JSONP but I was having all sorts of problems. Either it wouldn't go through or if it did go through I wouldn't get the response.

If there's a pure javascript way, I'd prefer that because of it having fewer dependencies.

# ruby-on-rails - 实施设计时出现语法错误

> ID：15995335
> 
> 赞同：0
> 
> 时间：2013-04-14T03:05:11.413
> 
> 标签：ruby-on-rails, devise

我正在尝试在我的 rails 应用程序中实现设计，并在我的 _header.html.erb 部分中出现语法错误：

```
<header class="navbar navbar-fixed-top">
<div class="navbar-inner">
    <div class="container">
        <%= link_to "OpenDeals", root_path, id: "logo" %>
        <nav>
            <ul class="nav pull-right">
                <li><%= link_to "Home",    root_path %></li>
                <li><%= link_to "Contact", contact_path %></li>
                <li>
                    <%= if user_signed_in? %>
                        Logged in as <strong><%= current.user.email %></strong>.
                        <%= link_to 'Edit profile', edit_user_registration_path %>
                        <%= link_to 'Logout', destroy_user_session_path, method: :delete %>
                    <%= else %>
                        <%= link_to 'Sign up', new_user_registration_path %> | 
                        <%= link_to 'Login', new_user_ssession_path %>
                    <%= end %>
                </li>
            </ul>
        </nav>
    </div> 
```

我收到的错误消息是：

/Users/adnankhan/code/opendeals/app/views/layouts/_header.html.erb:10：语法错误，意外')'，期待keyword_then或';' 或 '\n' ....append= ( if user_signed_in? );@output_buffer.safe_concat(' ... ^ /Users/adnankhan/code/opendeals/app/views/layouts/_header.html.erb:14:语法错误，意外的keyword_else ...);@output_buffer.append= ( else );@output_buffer.safe_concat ... ... ^ /Users/adnankhan/code/opendeals/app/views/layouts/_header.html.erb :17: 语法错误，意外的keyword_end ...');@output_buffer.append= (end);@output_buffer.safe_concat... ... ^ /Users/adnankhan/code/opendeals/app/views/layouts/_header .html.erb:23：语法错误，意外的keyword_ensure，期待')'

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:07:52.783

`if`,`else`并且不应该以,`end`开头 , 因为返回不应该被渲染`<%=``<%`

# thread-safety - ARM strex 和 ldrex 中的原子操作 - 它们可以在 I/O 寄存器上工作吗？

> ID：15995340
> 
> 赞同：4
> 
> 时间：2013-04-14T03:06:27.027
> 
> 标签：thread-safety, arm, atomic

假设我正在修改内存映射 I/O 寄存器中的一些位，并且另一个进程或 ISR 可能正在修改同一寄存器中的其他位。

ldrex 和 strex 可以用来防止这种情况吗？我的意思是，他们原则上可以，因为您可以 ldrex，然后更改位，然后将其返回，如果 strex 失败，则意味着另一个操作可能已经更改了 reg，您必须重新开始。但是 strex/ldrex 机制可以用在不可缓存的区域吗？

我在树莓派上试过这个，I/O 寄存器映射到用户空间，ldrex 操作给了我一个总线错误。如果我将 ldrex/strex 更改为简单的 ldr/str，它可以正常工作（但不再是原子的......）此外，ldrex/strex 例程在普通 RAM 上也可以正常工作。指针是 32 位对齐的。

那么这是 strex/ldrex 机制的限制吗？还是 BCM2708 实现的问题，或者内核设置它的方式？（或者别的什么——也许我把它映射错了）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T05:36:58.727

谢谢你提到我...

您不要在资源本身上使用 ldrex/strex 对。像 swp 或 test and set 或您的指令集支持的任何东西（对于 arm，它是 swp，最近是 strex/ldrex）。您在 ram 上使用这些说明，这是所有相关方都同意的一些 ram 位置。共享资源的进程使用内存位置来争夺对资源的控制权，无论谁获胜，然后才能实际寻址资源。您永远不会在外围设备本身上使用 swp 或 ldrex/strex，这是没有意义的。我可以看到内存系统没有给你一个专有的好的响应（EXOKAY），这是你摆脱 ldrex/strex 无限循环所需要的。

您有两种共享资源的基本方法（也许更多，但这里有两种）。一个是你使用这个共享内存位置和共享资源的每个用户，争夺对内存位置的控制权。当您获胜时，您可以直接与资源交谈。完成后放弃对共享内存位置的控制。

另一种方法是您只允许一个软件与外围设备通信，其他任何软件都不允许与外围设备通信。任何希望在外围设备上做某事的人都要求一个资源为他们做这件事。就像每个人都可以共享汽水机，而汽水机在柜台后面，只有汽水机员工才能使用汽水机。然后你需要一个计划，要么让人们排队，要么让人们拿一个号码并被叫来装满他们的饮料。除了与外围设备通信的单一资源外，您还必须提出一个方案，例如 fifo，以本质上使请求串行化。

这些都在荣誉系统上。您期望没有其他人与不应该与外围设备交谈的外围设备交谈，或者没有赢得与外围设备交谈的权利的人。如果您正在寻找硬件解决方案来阻止人们与之交谈，那么，使用 mmu，但现在您需要管理谁赢得了锁以及他们如何让 mmu 畅通无阻（不使用荣誉系统）并重新阻止以某种方式

在您可能有一个中断处理程序和一个共享资源的前台任务的情况下，您有一个或另一个可以接触资源，而另一个请求请求。例如，资源可能是中断驱动的（例如串行端口），并且您让中断处理程序直接与串行端口硬件对话，如果应用程序/前台任务想要完成某些事情，它会填写请求（将某些内容放入fifo/buffer) 中断然后查看请求队列中是否有任何内容，如果有，则对其进行操作。

当然有，禁用中断和重新启用关键部分，但如果你想让你的中断有一些时间/延迟的概念，这些是可怕的......了解你在做什么，它们可以用来解决这个应用程序+ isr 两个用户问题。

非缓存内存空间上的 ldrex/strex：

我的 extest 可能有更多关于何时可以使用和不能使用 ldrex/strex 的文本，不幸的是，arm 文档在这方面并不是那么好。他们告诉你停止使用 swp，这意味着你应该使用 strex/ldrex。但是然后切换到硬件手册，它说您不必支持单处理器系统上的独占操作。这说明了两件事，ldrex/strex 用于多处理器系统，并用于在多处理器系统上的处理器之间共享资源。这也意味着单处理器系统不一定支持 ldrex/strex。然后它变得更糟。ARM 逻辑通常停在处理器内核的边缘，L1 高速缓存包含在此边界内，它不在 axi/amba 总线上。或者，如果您购买/使用 L2 缓存，则 ARM 逻辑会在该层的边缘停止。然后你进入芯片供应商特定的逻辑。这就是您阅读硬件手册的逻辑，因为它说您不需要支持单处理器系统上的独占访问。所以问题是特定于供应商的。更糟的是，到目前为止，我发现 ARM 的 L1 和 L2 缓存确实支持 ldrex/strex，所以如果你有缓存，那么 ldrex/strex 将在供应商代码不支持它们的系统上工作。如果您没有缓存，那么当您在这些系统上遇到麻烦时（那是我写的最重要的东西）。所以如果你有缓存，那么 ldrex/strex 将在供应商代码不支持它们的系统上工作。如果您没有缓存，那么当您在这些系统上遇到麻烦时（那是我写的最重要的东西）。所以如果你有缓存，那么 ldrex/strex 将在供应商代码不支持它们的系统上工作。如果您没有缓存，那么当您在这些系统上遇到麻烦时（那是我写的最重要的东西）。

具有 ldrex/strex 的处理器足够新，可以通过 copressor 读取访问大量配置寄存器。埋在里面有一个“支持swp指令”位来确定你是否有交换。cortex-m3的人没有遇到没有swap和没有ldrex/strex的情况吗？

linux内核中的错误（还有许多其他对arm硬件和文档的误解）是在支持ldrex / strex的处理器上选择ldrex / strex解决方案而不确定它是否是多处理器，所以你可以（我知道两个实例）进入一个无限的 ldrex/strex 循环。如果您修改 linux 代码以使其使用 swp 解决方案（两种解决方案都有代码），它们 linux 将工作。为什么我所知道的互联网上只有两个人谈论过这个问题，因为你必须关闭缓存才能让它发生（据我所知），谁会关闭两个缓存并尝试运行 linux？成功关闭缓存实际上需要相当多的工作，需要对 linux 进行修改才能使其正常工作而不会崩溃。

不，我不能告诉你系统，不，我现在不知道，也从未为 ARM 工作过。如果您知道在哪里查找以及如何解释这些内容，那么这些内容都在 arm 文档中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T08:20:40.467

与之前的答案状态一样，`ldrex`/`strex`不是用于访问资源本身，而是用于实现保护它所需的同步原语。

但是，我觉得有必要在架构方面进行一些扩展：

1.  `ldrex`/ `strex`（读作 load-exclusive/store-exclusive）**所有**ARM 架构版本 6 及更高版本的处理器都支持，但不包括 M0/M1 微控制器 (ARMv6-M)。
2.  在架构上不能保证 load-exclusive/store-exclusive 将在“Normal”以外的内存类型上工作 - 因此在外围设备上对它们的任何巧妙使用都不会是可移植的。
3.  不建议反对该`SWP`指令，因为它的本质在多核系统中会适得其反——它在 ARMv6 中已被弃用，并且在某些 ARMv7-A 修订版中是“可选”实现的，并且大多数 ARMv7-A 处理器已经需要它在 cp15 中明确启用`SCTLR`。Linux 默认情况下不会，而是通过 undef 处理程序使用 ... load-exclusive 和 store-exclusive 模拟操作（@dwelch 在上面提到的内容）。因此，如果您希望代码可跨 ARMv7-A 平台移植，请不要推荐 SWP 作为有效的替代方案。

与不在内部共享域（您的缓存一致性岛）中的总线主控器同步需要额外的外部硬件 - 称为*全局监视器*- 以跟踪哪些主控器已请求独占访问哪些区域。

“在单处理器系统上不需要”位听起来像是 ARM 术语的阻碍。四核 Cortex-A15 被认为是一个处理器......因此在 Linux 中测试“单处理器”不会有任何区别 - 架构和互连规范保持不变，SWP 仍然是可选的，可能不会在场。

Cortex-M3 支持 ldrex/strex，但它的互连 (AHB-lite) 不支持传播它，因此它不能使用它与外部主设备同步。它不支持 SWP，从未在 Thumb 指令集中引入，其互连也无法传播。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-14T03:51:11.777

通常，`ldrex`需要`strex`来自内存系统的支持。您可能希望参考*dwelch的*[一些答案](https://stackoverflow.com/questions/11383125/do-the-arm-instructions-ldrex-strex-have-to-operate-on-cache-aligned-data)以及他的[文本](https://github.com/dwelch67/raspberrypi/tree/master/extest)应用程序。我相信您不能对*内存映射 I/O*执行此操作。 并且更多地用于*正常*内存中的[无锁](http://en.wikipedia.org/wiki/Non-blocking_algorithm)算法。**`ldrex``strex`**

 ***通常只有一个驱动程序应该*负责*一组**I/O**寄存器。软件将通过信号量等向驱动程序发出请求，这些信号量可以在普通 SDRAM`ldrex`中实现。`strex`因此，您可以互锁这些**I/O**寄存器，但不是直接意义上的。

通常，I/O 寄存器将通过**写一清除**、**多路复用访问**和其他方案来支持*原子访问。*

 ****1.  **写一清除**- 通常与硬件事件一起使用。如果代码处理该事件，则它只写入该位。这样，多个例程可以处理同一寄存器中的不同位。
2.  **多路复用访问**- 通常*中断启用/禁用*将具有寄存器位图。但是，也有备用寄存器，您可以写入*启用*或*禁用*特定寄存器的中断号。例如，`intmask`可能是两个 32 位寄存器。要启用`int3`，您可以屏蔽或仅写入`1<<3`寄存器。它们通过硬件连接到相同的位。`intmask``3``intenable``intmask``intenable`

因此，您可以模拟与驱动程序的互锁，或者硬件本身可以通过正常的寄存器写入来支持原子操作。在人们开始谈论**无锁**和无**等待**算法之前，这些方案已经很好地服务了系统一段时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T20:01:44.750

如果有问题的芯片有一个切换寄存器（在写入时基本上与输出锁存器进行异或运算），则可以解决。

*   装载端口闩锁
*   屏蔽不相关的位
*   xor 与所需的输出
*   写入切换寄存器

只要两个进程不修改相同的引脚（而不是“相同的端口”），就没有竞争条件。

对于 bcm2708，您可以选择一个输出引脚，其相邻引脚要么未使用，要么从未更改，并以字节模式写入 GPFSELn。但是，这只会确保您不会腐蚀他人。如果其他人正在以 32 位模式写入并且您打断他们，他们仍然会破坏您。所以这是一种黑客行为。

希望这可以帮助*******

# vbscript - 用于列出显式权限的 Vbscript

> ID：15995345
> 
> 赞同：-1
> 
> 时间：2013-04-14T03:07:20.437
> 
> 标签：vbscript, permissions, wmi, acl, rights

我在可能已失效的脚本博客上找到了一个 vbscript，我想在我们的 Windows 7 系统上使用它。当我尝试使用它时，我从第 38 行得到一个无效的对象路径：

```
Set objSecuritySettings = objWMIService.Get _
        ("Win32_LogicalFileSecuritySetting.Path='" & strPath & "'") 
```

关于脚本为什么会产生此错误的任何想法？代码来源： http: [//www.indented.co.uk/index.php/2008/10/22/listing-explicit-rights/comment-page-1/#comment-3947](http://www.indented.co.uk/index.php/2008/10/22/listing-explicit-rights/comment-page-1/#comment-3947)

```
Option Explicit

' Looks for a Trustee containing the SECURITY_PRINCIPAL string on
' the file system. Recurses from BASE_PATH down (file and folders).

' Set these values for the search.

Const BASE_PATH = "C:\"
Const SECURITY_PRINCIPAL = "Chris"

Sub FSRecurse(strPath)
' Simple FS recursion

  Dim objFolder, objFile, objSubFolder

  Set objFolder = objFileSystem.GetFolder(strPath)

  For Each objFile in objFolder.Files
    CheckDescriptor objFile.Path
  Next
  For Each objSubFolder in objFolder.SubFolders
    CheckDescriptor objSubFolder.Path

    FSRecurse objSubFolder.Path
   Next

  Set objFolder = Nothing
End Sub

Sub CheckDescriptor(strPath)
  ' Look for the Trustee in the Security Descriptor and filter out
  ' inherited ACEs

  Const ACE_FLAG_INHERITED = &H10 ' 16

  Dim objSecuritySettings, objSecurityDescriptor, objACE, objTrustee

  Set objSecuritySettings = objWMIService.Get _
    ("Win32_LogicalFileSecuritySetting.Path='" & strPath & "'")
  objSecuritySettings.GetSecurityDescriptor objSecurityDescriptor

  For Each objACE in objSecurityDescriptor.dACL
    If InStr(1, objACE.Trustee.Name, _
        SECURITY_PRINCIPAL, VbTextCompare) > 0 Then

      ' ACEFlags is binary. Must perform binary comparison.
      If objACE.ACEFlags And ACE_FLAG_INHERITED Then
        ' Problems with negation of the above.
        ' This is just easier.
      Else
        EnumAccess strPath, objACE
      End If
    End If
  Next
End Sub

Sub EnumAccess(strPath, objACE)
  ' Most access mask values have matching Folder versions. These are not
  ' numerically different, they only differ when interpreted.

  ' ACE Type

  Const ACCESS_ALLOWED_ACE_TYPE = &h0
  Const ACCESS_DENIED_ACE_TYPE  = &h1

  ' Base Access Mask values

  Const FILE_READ_DATA = &h1
  Const FILE_WRITE_DATA = &h2
  Const FILE_APPEND_DATA = &h4
  Const FILE_READ_EA = &h8
  Const FILE_WRITE_EA = &h10
  Const FILE_EXECUTE = &h20
  Const FILE_DELETE_CHILD = &h40
  Const FILE_READ_ATTRIBUTES = &h80
  Const FILE_WRITE_ATTRIBUTES = &h100
  Const FOLDER_DELETE = &h10000
  Const READ_CONTROL = &h20000
  Const WRITE_DAC = &h40000
  Const WRITE_OWNER = &h80000
  Const SYNCHRONIZE = &h100000

  ' Constructed Access Masks

  Dim FULL_CONTROL
  FULL_CONTROL = FILE_READ_DATA + FILE_WRITE_DATA + FILE_APPEND_DATA + _
    FILE_READ_EA + FILE_WRITE_EA + FILE_EXECUTE + FILE_DELETE_CHILD + _
    FILE_READ_ATTRIBUTES + FILE_WRITE_ATTRIBUTES + FOLDER_DELETE + _
    READ_CONTROL + WRITE_DAC + WRITE_OWNER + SYNCHRONIZE

  Dim READ_ONLY
  READ_ONLY = FILE_READ_DATA + FILE_READ_EA + FILE_EXECUTE + _
    FILE_READ_ATTRIBUTES + READ_CONTROL + SYNCHRONIZE

  Dim MODIFY
  MODIFY = FILE_READ_DATA + FILE_WRITE_DATA + FILE_APPEND_DATA + _
    FILE_READ_EA + FILE_WRITE_EA + FILE_EXECUTE + _
    FILE_READ_ATTRIBUTES + _
    FILE_WRITE_ATTRIBUTES + FOLDER_DELETE + READ_CONTROL + SYNCHRONIZE

  Dim strRights
  Dim intAccessMask

  WScript.Echo "Path: " & strPath
  WScript.Echo "Username: " & objACE.Trustee.Name
  WScript.Echo "Domain: " & objACE.Trustee.Domain
  WScript.Echo "ACE Flags (Decimal): " & objACE.ACEFlags

  ' ACE Type

  If objACE.ACEType = ACCESS_ALLOWED_ACE_TYPE Then
    WScript.Echo "ACE Type: Allow"
  Else
    WScript.Echo "ACE Type: Deny"
  End If

  ' Attempt to generate a basic summary of access rights

  strRights = ""
   intAccessMask = objACE.AccessMask

  If intAccessMask = FULL_CONTROL Then
    strRights = " (FullControl)"
  ElseIf intAccessMask = MODIFY Then

    strRights = " (Modify)"
  ElseIf intAccessMask = READ_ONLY Then
    strRights = " (ReadOnly)"
  End If

  ' Echo the decimal mask with any summarised rights

  WScript.Echo "Access Mask (Decimal): " & intAccessMask & strRights

  WScript.Echo
End Sub

'
' Main code block
'

 Dim objFileSystem, objWMIService

Set objFileSystem = CreateObject("Scripting.FileSystemObject")
' WMI Connection to the local machine
Set objWMIService = GetObject("winmgmts:\\.")

FSRecurse BASE_PATH

Set objWMIService = Nothing
Set objFileSystem = Nothing 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T12:50:18.160

您不会在`strPath`. 反斜杠是WMI 中的[转义字符](http://en.wikipedia.org/wiki/Escape_character)，因此除非您通过将它们加倍将它们变成文字反斜杠，否则 WMI 查询将无法找到该文件。

此外，命令中还有另一个潜在的故障。它使用单引号来引用文件名。不过，单引号是 NTFS 文件名中的有效字符。如果您的脚本运行到名称包含单引号的文件中，该字符将过早终止 WMI 查询中的文件名字符串，并且文件名的其余部分将使查询无效。我在写[这篇](http://www.planetcobalt.net/sdb/auditacls.shtml)文章时遇到了同样的问题。

替换这个：

```
Set objSecuritySettings = objWMIService.Get _
  ("Win32_LogicalFileSecuritySetting.Path='" & strPath & "'") 
```

有了这个：

```
Set objSecuritySettings = objWMIService.Get _
  ("Win32_LogicalFileSecuritySetting.Path=""" & Replace(strPath,"\","\\") & """") 
```

应该让你摆脱这两个问题。

# ruby-on-rails - undefined method `[]' for nil:NilClass when trying to pull twitter avatar

> ID：15995346
> 
> 赞同：0
> 
> 时间：2013-04-14T03:07:32.140
> 
> 标签：ruby-on-rails, ruby, omniauth, twitter-oauth

I'm trying to pull in user's profile avatars from twitter using these codes

Any idea how I need to fix this error message?

Here's what I'm using in the Users Helper

```
module UsersHelper

def twitteravatar_for(user, options = { size: 50 })
    omniauth = request.env['omniauth.auth']
    self.image = omniauth['info']['image'].sub("_normal", "_bigger")
    gravatar_url = self.image
    image_tag(gravatar_url, alt: user.name)
  end
end 
```

Then I'm trying to use this in view and pull the user's individual avatar

```
<%= link_to twitteravatar_for(feed_item.user), feed_item.user %> 
```

Is it because I can't use `request.env['omniauth.auth']` in helper?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:25:43.677

一个很好的检查方法是

```
img = request.env.try('[]','omniauth.auth').try('[]','info').try('[]','image') 
```

如果中间出现问题，答案是正确的 img 或 nil。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:13:19.320

链的一个值将为零

```
request.env['omniauth.auth']['info']['image'] 
```

使用 puts 来确定是哪一个

```
puts request.env['omniauth.auth'] 
```

例如，omniauth['info']['image'] 可能是 nil，因为用户没有图像集？

# r - 从解析的西班牙语推文中替换子字符串的问题 - R 2.15.3

> ID：15995347
> 
> 赞同：1
> 
> 时间：2013-04-14T03:07:35.413
> 
> 标签：r, twitter, xml-parsing, substring, gsub

这是提取推文的完整代码：加载所需的包

```
require(XML) 
```

让我们获取一些关于 #18A 哈希标签定义 twitter 搜索 url 的推文（遵循 atom 标准）

```
twitter_url = "http://search.twitter.com/search.atom?" 
```

编码查询

```
query = URLencode("#18A") 
```

存储结果的向量

```
tweets = character(0) 
```

分页 17 次以收获推文

```
for (page in 1:17)
{
twitter_search = paste(twitter_url, "q=", query,
"&rpp=100&lang=es&pagegeocode=-34.686173,-58.648529,15mi", page, sep="")
tmp = xmlParseDoc(twitter_search, asText=F)
tweets = c(tweets, xpathSApply(tmp, "//s:entry/s:title",
                         xmlValue, namespaces=c('s'='http://www.w3.org/2005/Atom')))
}

print(tweets)
class(tweets)

Then, replacing the spanish characters (á, é, í,..) isn't working.

tweets = gsub("<U\\+00E1>", "a", tweets)
tweets = gsub("<U\\+00E9>", "e", tweets) 
```

我们可以在 1699 推文中看到结果是如何不正确的

```
print(results[1699]) 
```

我设法通过将推文的编码更改为：

```
Encoding(tweets) <- "ISO-8859"

# Replace spanish character with accent for "normal" character

tweets = gsub("\303\272", "u", tweets)
tweets = gsub("\303\241", "a", tweets)
tweets = gsub("\303\255", "i", tweets)
tweets = gsub("\303\263", "o", tweets)
tweets = gsub("\303\251", "e", tweets)
tweets = gsub("\303\271", "u", tweets)
tweets = gsub("\303\201", "O", tweets)
tweets = gsub("\303\211", "E", tweets)
tweets = gsub("\342\234\224", "", tweets)
tweets = gsub("\302\241", "", tweets)
tweets = gsub("\302\277", "", tweets) 
```

我想一定有更好的解决方案。我想知道为什么更改编码会使 gsub() 函数起作用，以及为什么它在以前的推文中不起作用。

R 版本 2.15.3 (2013-03-01) 平台：x86_64-apple-darwin9.8.0/x86_64 (64-bit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:42:34.303

在正则表达式中，`+`符号 ahs 的特殊含义。您可以使用`fixed = TRUE`参数`gsub`或转义特殊字符：

```
tweet = gsub("<U\\+00E9>", "e", tweet)
tweet = gsub("<U\\+00E1>", "a", tweet)
tweet = gsub("<U\\+00BF>", "" , tweet)

## [1] "RT @LuchoBugallo: Quieren una primicia? @CFKArgentina el #18A se va a      #Venezuela. Cual sera el motivo que la moviliza hacer un viaje d ..."
## [2] "RT @LuchoBugallo: #18A - Ya estan apareciendo las cuentas truchas de militontos, que usan s<U+00F3>lo en epoca de cacerolazos!" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:49:21.770

使用该选项`fixed = TRUE`，因为`+`可能与正则表达式搞砸了：

```
tweet = gsub("<U+00E9>", "e", tweet, fixed = T)
tweet = gsub("<U+00E1>", "a", tweet, fixed = T)
tweet = gsub("<U+00BF>", "" , tweet, fixed = T) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-26T23:40:42.933

我正在寻找完全解决问题的答案如下：只是改变 R 的语言。我用西班牙语写的，这就是推文编码问题的根源

解决方案只是在 Mac OSX 终端中运行此代码。

默认写入 org.R-project.R force.LANG en_US.UTF-8

# java - Building Android Project (Zxing) with ANT

> ID：15995348
> 
> 赞同：0
> 
> 时间：2013-04-14T03:07:49.757
> 
> 标签：java, android, ant, build, zxing

I am new to Android and the Ant based build process. I want to build the project barcode scanner [zxing](https://code.google.com/p/zxing/) hosted in the google code. I downloader the source and followed the build procedure in the [wiki](https://code.google.com/p/zxing/wiki/GettingStarted). The project builds at the root level but I get an error when I perform ant operation inside the android folder. The commands I used are as in wiki:

```
cd ../android 
ant debug 
ant install 
```

The error is :

BUILD FAILED /Users/StackUnderflow/Projects/zxing-read-only/android/build.xml:98: Cannot find /path/to/android-sdk/tools/ant/build.xml imported from /Users/StackUnderflow/Projects/zxing-read-only/android/build.xml

How and where do I set the path to the android-sdk the ant build is looking for? The build process produces an ZXing-2.2.zip but how do I build an apk file to load in the device?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T09:40:29.873

错误就在那里说。你没有遵循这一步，或者更确切地说，你没有改变路径！

```
echo "sdk.dir=/path/to/android-sdk" > local.properties 
```

# clojure - 在 leiningen REPL 中显示加载的依赖项

> ID：15995350
> 
> 赞同：4
> 
> 时间：2013-04-14T03:07:55.797
> 
> 标签：clojure, leiningen

我遇到了问题，因为我拥有的库似乎与已发布的文档冲突。我之前在安装正确版本的东西时遇到了一些问题，我想知道这是否是原因。

有什么方法可以打印出 repl 中加载了哪些罐子，以便我检查？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T08:13:03.887

您还可以使用查询 lein

*   类路径与`lein classpath`
*   依赖关系树打印输出`lein deps :tree`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-14T08:10:44.130

这也可能有帮助：

`lein deps :tree`- 显示被拉入的依赖树

`[library "version" :exclusions [some-other-lib "version"]]`- 排除`some-other-lib`被某些图书馆拉入的内容。

`some-other-lib`然后，您可以通过定义自己的依赖向量来手动提取正确的版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-14T03:09:22.913

```
(System/getProperty "java.class.path") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-19T19:31:37.823

有几种选择：

*   使用 java interrop: `(System/getProperty "java.class.path")`,`(println (seq (.getURLs (java.lang.ClassLoader/getSystemClassLoader))))`
*   [clojure/java.classpath](https://github.com/clojure/java.classpath)包含有用的功能：比如`system-classpath`
*   `lein`:`lein classpath`和`lein deps :tree`
*   `boot`: `boot show -p`，以及[启动环境](https://github.com/boot-clj/boot/wiki/Boot-Environment)中的有用功能。也许看看[martinklepsch/boot-deps](https://github.com/martinklepsch/boot-deps)。

对于`boot`，我还编写了[nha/boot-deps](https://github.com/nha/boot-deps)来帮助管理依赖冲突。

# objective-c - 在objectiveC中使用int键映射

> ID：15995351
> 
> 赞同：2
> 
> 时间：2013-04-14T03:07:59.743
> 
> 标签：objective-c, map, nsdictionary, mutable

我需要将整数值映射到某种可变数组中的对象。解决此问题的最佳方法是什么。我看到的唯一选择是使用objectiveC++ ...

```
std::map<int, id> theMap;  // if i can use id? 
```

或将整数放入`NSString`或`NSNumber`用作`NSMutableDictionary`.

我将它用于我的网络类，客户端将在其中发送一些数据（密钥将在有效负载中）。然后在读取时，将从数据包中提取密钥，然后提取映射中的对象以根据接收到的内容继续程序。（我担心客户端接收到的有效负载乱序或丢失有效负载。）

哪个是最好/最快的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T03:12:49.877

最好的选择（如果你不想弄乱 C++）是使用 a `NSMutableDictionary`with `NSNumber`s 作为键。使用新的文字语法更容易：

```
NSMutableDictionary *map = [NSMutableDictionary dictionary];
map[@1] = @"A value";
map[@578] = @"Another string";
int key = 310; // doesn't matter where this comes from
map[@(key)] = @"From a variable!"; 
```

# c - 当我向函数发送指针时崩溃

> ID：15995352
> 
> 赞同：0
> 
> 时间：2013-04-14T03:08:00.440
> 
> 标签：c

我正在尝试创建一个可遍历的链表，但是当我尝试向列表中添加一个元素时我的程序崩溃了。我已经尝试了很多事情，但我无法弄清楚我做错了什么。

```
typedef struct node_t node_t;
typedef struct list_t list_t;

struct node_t {
    void *data;
    node_t *prev;
    node_t *next;  
};

struct list_t {
    node_t front;
    node_t back;
};

list_t* listEmpty () {
    list_t *list = malloc (sizeof (list_t));
    list->front.prev = NULL;
    list->front.next = &(list->back);
    list->back.prev = &(list->front);
    list->back.next = NULL;
    return list;
}

void listPushFront (list_t *list, void *data) {
    node_t *newNode = malloc (sizeof (node_t));
    newNode->data = data;
    newNode->prev = &(list->front);
    newNode->next = list->front.next;
    list->front.next->prev = newNode;  //CRASHES HERE
    list->front.next = newNode;
}

int main (int argc, char *argv[]) { 
    list_t *list = malloc (sizeof (list_t));
    int a = 6; 
    void* pa = &a;
    listEmpty(list);
    listPushFront (list, pa);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:10:50.890

`listEmpty()`返回一个列表，并有一个 void 参数。但是`main()`，您将一个列表传递给它，而不是捕获它的返回值。

```
#include <stdlib.h>

typedef struct node_t node_t;
typedef struct list_t list_t;

struct node_t {
    void *data;
    node_t *prev;
    node_t *next;  
};

struct list_t {
    node_t front;
    node_t back;
};

list_t* listEmpty (void) {
    list_t *list = (list_t *)malloc (sizeof (list_t));
    list->front.prev = NULL;
    list->front.next = &(list->back);
    list->back.prev = &(list->front);
    list->back.next = NULL;
    return list;
}

void listPushFront (list_t *list, void *data) {
    node_t *newNode = (node_t *)malloc (sizeof (node_t));
    newNode->data = data;
    newNode->prev = &(list->front);
    newNode->next = list->front.next;
    list->front.next->prev = newNode;
    list->front.next = newNode;
}

int main (int argc, char *argv[]) { 
    list_t *list = 0;
    int a = 6; 
    void* pa = &a;
    list = listEmpty();
    listPushFront (list, pa);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:13:50.427

您的列表未正确初始化，这会导致崩溃。

```
listEmpty(list); 
```

应该

```
list = listEmpty(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:20:41.380

这在很多方面都是错误的。

```
int main (int argc, char *argv[]) { 
    list_t *list = malloc (sizeof (list_t)); 
```

你为什么这样做`main`？

为什么`listEmpty`用参数调用`list`？

```
listEmpty(list); 
```

您的`listEmpty`函数不会对您传递给它的参数做任何事情。

您没有对`listEmpty`返回的指针做任何事情，那么您如何期望它传播到以下调用`listPushFront`？

# python - AttributeError: 'Anonymousidentity' object has no attribute 'name'

> ID：15995356
> 
> 赞同：2
> 
> 时间：2013-04-14T03:08:40.333
> 
> 标签：python, web-applications, web, flask

everyone! I'm using Flask to build a website. But when I open 127.0.0.1:5000, it returns AttributeError: 'Anonymousidentity' object has no attribute 'name'. Anonymousidentity is defined in flask.ext.principal. I have read the flask-principal/**init**.py where anonymousidentity defined, there is no attribute 'name',neither in class 'Identity'.

I am a beginner and have no idea where the problem is. May someone could help me, any suggestion is also appreciated! :)

Here are the account/service.py . The error occurs in def current_user(identity=None), return models.User.query.get(identity.name)

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from __future__ import unicode_literals

from flask import current_app, g, render_template
from flask.ext.mail import Message
from flask.ext.principal import identity_changed, identity_loaded
from flask.ext.principal import Identity, AnonymousIdentity
from flask.ext.principal import RoleNeed, UserNeed

from ..extensions import db, mail
from ..permissions import roles
from . import models, account

get_appobj = lambda: current_app._get_current_object()

# -------------------------------
# Login and Logout (Authenticate)
# -------------------------------

def login(user):
    """User login."""
    identity_changed.send(get_appobj(), identity=Identity(user.id))

def logout():
    """User logout."""
    identity_changed.send(get_appobj(), identity=AnonymousIdentity())

def current_user(identity=None):
    identity = identity or g.identity
    return models.User.query.get(identity.name)

@account.app_context_processor
def account_context_processor():
    return {'current_user': current_user}

@identity_loaded.connect
def on_identity_loaded(sender, identity):
    """Load the roles for identity user."""
    user = current_user(identity)
    if user:
        identity.provides.add(UserNeed(user.id))
        identity.provides.add(roles.login)
        if user.is_actived:
            identity.provides.add(roles.authenticated)
        if user.is_admin:
            identity.provides.add(roles.admin)
        if user.is_branch:
            identity.provides.add(roles.branch)

# ------------------------------
# Sign Up and Email Confirm User
# ------------------------------

def send_confirm_mail(user):
    """Send a confirm mail for signing up user."""
    if user.is_actived:
        raise models.UserAcitvedError(user)  # only provide for unactived user

    with user.permissions['send_confirm_mail'].require(403):
        message = Message("grasu",
                          sender="no-reply@grasu.edu.cn",
                          recipients=[user.email])
        message.html = render_template("mail/activeuser.html",
                                       userid=user.id,
                                       token=user.active_token)
        mail.send(message)

def signup(user):
    """Sign up a user."""
    # check unique
    users = models.User.query
    identity_existed = users.filter_by(email=user.email).count()
    nickname_has_been_used = users.filter_by(nickname=user.nickname).count()
    if identity_existed:
        raise IdentityExistedError
    if nickname_has_been_used:
        raise NicknameUsedError

    # write into database
    db.session.add(user)
    db.session.commit()

    # login and send mail
    login(user)
    send_confirm_mail(user)

# ----------
# Exceptions
# ----------

class IdentityExistedError(Exception):
    """User's email has existed in database."""

class NicknameUsedError(Exception):
    """User's nickname has been used.""" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:57:18.000

正如您所注意到的，没有`name`属性。而是使用该`id`属性。

```
return models.User.query.get(identity.id) 
```

# mysqli - MySQL: How to tell if a cell value has changed?

> ID：15995358
> 
> 赞同：0
> 
> 时间：2013-04-14T03:08:43.233
> 
> 标签：mysqli

I am pulling data from table `Supervisors`. Through each iteration, I want to know when `Supervisor`.`SupNum` changes. If the value changes, do this. If it stays the same, do the other.

How would I accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:14:31.763

尝试这个。

> 如果 (Supervisor.SupNum = chk) 那么标志 =true; 否则 chk := Supervisor.SupNum; 标志=假结束如果；

如果您希望第一次迭代为真，则使用另一个迭代器 i。

> 如果 (i=0) 那么 Supervisor.SupNum := chk; 万一; 我++；

# php - 如何为 php 项目包含 Ajax 请求/响应

> ID：15995361
> 
> 赞同：0
> 
> 时间：2013-04-14T03:09:36.220
> 
> 标签：php, jquery, ajax

这是我项目中的 PHP 文件。我使用 href 来*获取“获取电影详细信息”*，因为它会转到另一个页面并显示结果。

```
<a href = "movie_details.php?movie_id=$movie_id" ... 
```

我需要使用 ajax 请求获取这些详细信息并在同一页面中呈现响应（如果它在 div 内部更好）。

**表1.php**

```
<?php 
    $link = mysql_connect("localhost","root","") or die(mysql_error());

    mysql_selectdb("MovieSite") or die(mysql_error());

    $query = "SELECT movie_id, movie_name, movie_director, movie_leadactor FROM Movie ";
            //"WHERE movie_year > 1990 ORDER BY movie_type";

    $result = mysql_query($query, $link) or die(mysql_error());

    $num_movies = mysql_num_rows($result);

$movie_header = <<<EOD
        <h2><center>Movie Review Database</center></h2>
        <table width = "70%" border = "1" cellpadding = "2" cellspacing = "2" align = "center">
            <tr>
                <th>Movie Title</th>
                <th>Movie Director </th>
                <th>Movie Lead Actor</th>
            </tr>       
EOD;

function get_director(){
    global $movie_director;
    global $director;

    $query_d = "SELECT people_fullname FROM people WHERE people_id = '$movie_director'";

    $results_d = mysql_query($query_d) or die(mysql_error());

    $row_d = mysql_fetch_array($results_d);

    extract($row_d);

    $director = $people_fullname;

}

function get_leaderactor(){
    global $movie_leadactor;
    global $leadactor;
    $query_l = "SELECT people_fullname FROM people WHERE people_id = '$movie_leadactor'";

    $result_l = mysql_query($query_l);

    $row_l = mysql_fetch_array($result_l);
    extract($row_l);
    $leadactor = $people_fullname;
}

$movie_details = '';

while ($row = mysql_fetch_array($result)){
    $movie_id = $row['movie_id'];
    $movie_name = $row['movie_name'];
    $movie_director = $row['movie_director'];
    $movie_leadactor = $row['movie_leadactor'];

    get_director();
    get_leaderactor();

$movie_details .= <<<EOD
    <tr>
        <td><a href = "movie_details.php?movie_id=$movie_id" title = "Find out more about $movie_name">$movie_name</a></td>
        <td>$director</td>
        <td>$leadactor</td>     
    </tr>
EOD;
}

$movie_details .= <<<EOD

    <tr>
        <td>Total : $num_movies Movies </td>
    </tr>
EOD;

$movie_footer = "</table>";

$movie = <<< MOVIE
    $movie_header;
    $movie_details;
    $movie_footer;
MOVIE;
echo $movie;
?> 
```

* * *

**movie_details.php**

```
<?php
    $link = mysql_connect("localhost", "root", "") or die(mysql_error());

    mysql_select_db('MovieSite') or die("DB Select" . mysql_error());

    function calculate_differences($takings, $cost){
        $difference = $takings - $cost;

        if ($difference < 0){
            $difference = substr($difference, 1);
            $font_color = 'red';
            $profit_or_loss = "Rs. " . $difference . "M";           
        }elseif ($difference > 0){
            $font_color = 'green';
            $profit_or_loss = "Rs. " . $difference . "M";
        }else {
            $font_color = 'blue';
            $profit_or_loss = "Broke even";
        }
        return "<font color = \"$font_color\"> ". $profit_or_loss . "</font>"; 
    }

    function get_director(){
        global $movie_director;
        global $director;

        $query_d = "SELECT people_fullname FROM people WHERE people_id = '$movie_director'";

        $results_d = mysql_query($query_d) or die(mysql_error());

        $row_d = mysql_fetch_array($results_d);

        extract($row_d);

        $director = $people_fullname;

    }

    function get_leaderactor(){
        global $movie_leadactor;
        global $leadactor;
        $query_l = "SELECT people_fullname FROM people WHERE people_id = '$movie_leadactor'";

        $result_l = mysql_query($query_l);

        $row_l = mysql_fetch_array($result_l);
        extract($row_l);
        $leadactor = $people_fullname;
    }

    $movie_query = "SELECT * FROM Movie WHERE movie_id = '" . $_GET['movie_id'] . "'";

    $result = mysql_query($movie_query, $link) or die(mysql_error());

$movie_header = <<<EOD
    <h2><center>Movie Review Database</center></h2>

EOD;

while ($row = mysql_fetch_array($result)){
    //$movie_id = $row['movie_id'];
    $movie_name = $row['movie_name'];
    $movie_director = $row['movie_director'];
    $movie_leadactor = $row['movie_leadactor'];
    $movie_year = $row['movie_year'];
    $movie_running_time = $row['movie_running_time'] . "Mins";
    $movie_takings = $row['movie_taking'];
    $movie_cost = $row['movie_cost'];

    get_director();
    get_leaderactor();
}

$movie_health = calculate_differences($movie_takings, $movie_cost);

$page_start = <<<EOD
<html>
    <head>
        <title>Details and Review for: $movie_name </title>
    </head>
    <body>
EOD;

$movie_table_headings =<<<EOD
<tr>
    <th>Movie Title</th>
    <th>Year of Release</th>
    <th>Movie Director </th>
    <th>Movie Lead Actor</th>
    <th>Movie running Time</th>
    <th>Movie Health</th>
</tr>
EOD;

$movie_details = <<<EOD
<table width = "70%" border = "1" cellpadding = "2" cellspacing = "2" align = "center">
    <tr>
        <th colspan = "6"><u><h2>$movie_name: details</h2></u></th>
    </tr>
    $movie_table_headings   
    <tr>
        <td width = "33%" align = "center">$movie_name</td>
        <td align = "center">$movie_year</td>
        <td align = "center">$director</td>
        <td align = "center">$leadactor</td>
        <td align = "center">$movie_running_time</td>
        <td align = "center">$movie_health</td>
    </tr>
</table>
<br /><br />
EOD;

$page_end = <<<EOD
    <a href = "table1.php">Home</a>
    </body>
</html>
EOD;

$movie = <<< MOVIE
    $page_start;
    $movie_details;
    $page_end;
MOVIE;
echo $movie;
mysql_close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:44:46.617

AJAX 的工作原理是允许您使用客户端代码（例如，javascript/jQuery）检索页面的内容，而无需让用户离开当前页面。

当您发出 ajax 请求时，您可以指定要通过 GET 或 POST 发送的参数（或根本不发送任何参数）。然后，您的代码将收到页面的内容，就好像您使用浏览器访问过它一样（如果您转到该页面，右键单击并查看源代码，您会得到什么）。

所以你想要用你的 PHP 做的是在你的当前页面上输出你需要的值。通常的做法是使用 JSON 或 XML（即 ajax 中的 X）对这些数据进行编码，以便您的客户端代码可以更轻松地读取它。（我个人更喜欢 JSON）。

学习 jQuery：[http](http://w3schools.com/jquery/default.asp)

://w3schools.com/jquery/default.asp 了解 AJAX：[http](http://w3schools.com/ajax/default.asp)

://w3schools.com/ajax/default.asp 了解使用 jQuery 的 Ajax：http: [//api.jquery.com/jQuery .ajax/](http://api.jquery.com/jQuery.ajax/)
或[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)
或[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

让我知道这是否回答了您的问题..

# jquery - jquery - 表单数据未在 ajax 调用中传递

> ID：15995363
> 
> 赞同：3
> 
> 时间：2013-04-14T03:10:08.027
> 
> 标签：jquery, coldfusion

我之前使用过这个确切的代码 - 使用 PHP 作为处理页面，但现在在冷融合中（无论我使用 cfc 还是只使用 cfm 来处理），jQuery 似乎没有传递表单对象 - 好吧......如果我查看了萤火虫响应，“发布”选项卡确实显示了所有字段及其值.. application/x-www-form-urlencoded 但是在 URL 属性中负责的页面没有得到它.. 并且（在示例 delow）控制台日志（数据）显示一个空字符串。

这就是我所拥有的......

```
$( '#create_client' ).on( 'click', function( event ) {

    //form validation
    var bValid = true;

    if ( bValid ) {
        // AJAX Post data
        $.ajax({
            type: 'POST',
            dataType: 'html',
            cache: false,
            url: '/cfc/clent.cfc?method=put',
            data: $( '#client-form' ).serialize(),
            success: function( data ){
                console.log(data);
                loadClientTable();
            },
            error: function(){
                // tell user there was a problem
                $( '#clients-message' ).html( '<p>There was a problem submitting your request... Doh!</p>' );
            }
        });
    }

} 
```

这是表格

```
<form name="client-form" id="client-form" class="singleLineForm" >
<label for="firstname">First Name: </label>
<input type="text" name="firstname" id="firstname" value="" maxlength="15" class="text ui-widget-content ui-corner-all" />
<label for="lastname">Last Name: </label>
<input type="text" name="lastname" id="lastname" value="" maxlength="15" class="text ui-widget-content ui-corner-all" />
<label for="email">Email: </label>
<input type="text" name="email" id="email" value="" maxlength="50" class="text ui-widget-content ui-corner-all" />
<label for="password">Password: </label>
<input type="text" name="password" id="password" value="" maxlength="20" class="text ui-widget-content ui-corner-all" />
<label for="isActive">Active? </label>
<input type="checkbox" name="isActive" id="isActive" value="1" class="checkbox ui-widget-content ui-corner-all" />
<input type="button" name="create_client" id="create_client" value="Create Client" class="button ui-widget-content ui-corner-all" />
</form> 
```

放入 cfc 看起来像这样（现在）

```
<cffunction name="put" access="public" returntype="structure" hint="PUT method, handles data transfering." >
    <cfargument name="email" type="string" required="yes" >
    <cfargument name="password" type="string" required="yes" >
    <cfargument name="firstname" type="string" required="yes" >
    <cfargument name="lastname" type="string" required="yes" >
    <cfargument name="isActive" type="numeric" required="yes" >

    <cfset _return = '' />

    <cfquery name="insertClient" datasource="#application.DSNwrite#" >
        INSERT INTO clients
        ( 
            email
            ,password
            ,firstname
            ,lastname
            ,isActive
        )
        VALUES
        ( 
            <cfqueryparam cfsqltype="cf_sql_varchar" value="#trim( arguments.email )#" />
            ,<cfqueryparam cfsqltype="cf_sql_varchar" value="#trim( arguments.password )#" />
            ,<cfqueryparam cfsqltype="cf_sql_varchar" value="#trim( arguments.firstname )#" />
            ,<cfqueryparam cfsqltype="cf_sql_varchar" value="#trim( arguments.lastname )#" />
            ,<cfqueryparam cfsqltype="cf_sql_bit" value="#val( arguments.isActive )#" />
        )
    </cfquery>

    <cfreturn _return />
</cffunction> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T13:07:37.907

您的 CFC 方法返回一个空字符串。

你有这个：

```
<cfset _return = '' /> 
```

在方法的最后，你有这个：

```
<cfreturn _return /> 
```

但是，您永远不会设置`_return`为不同的值。要测试这是问题所在，请尝试以下操作：

```
 <cfset _return = 'moo' /> 
```

如果您返回“moo”，则一切都按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-10T05:02:29.013

You can do like below to pass form data in `ajax` call.

```
var formData = $('#client-form').serialize();
$.ajax({
    url: '/cfc/clent.cfc?method=put&' + formData,
    type: 'POST',
    data:{
    },
    success: function(data){},
    error: function(data){},
}) 
```

# wordpress - .htaccesss RewriteCond %{REQUEST_FILENAME} !-d 不起作用

> ID：15995373
> 
> 赞同：3
> 
> 时间：2013-04-14T03:11:11.593
> 
> 标签：wordpress, .htaccess, permalinks

我想在子目录中安装 WordPress 并在永久链接中删除 index.php。服务器是IIS 6.0，支持重写。我的网络服务器有以下目录：

> webroot
> --wp [wordpress 文件夹]

**webroot/.htaccess**

```
RewriteCond %{HTTP_HOST} ^(www\.)?a.luckyet\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/wp/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /wp/$1
RewriteCond %{HTTP_HOST} ^(www\.)?a.luckyet\.com$ [NC]
RewriteRule ^(/)?$ wp/ 
```

**webroot/wp/.htaccess**

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-f #1
RewriteCond %{REQUEST_FILENAME} !-d #2
RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L] #3 
```

当我访问*a.luckyet.com*和*a.luckyet.com/hello-world.html* 时它可以工作但是当我访问*a.luckyet.com/wp-login.php*或*a.luckyet.com/wp-时它不起作用行政*

#3 工作正常，但 #1 和 #2 不能正常工作。然后看到[这里，把](https://stackoverflow.com/questions/6930519/write-an-htaccess-file-without-request-filename)**webroot/wp/.htaccess**的内容改成：

```
RewriteEngine on 
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-f
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,PT,L] 
```

它仍然没有生效。谁能帮我？提前致谢！

**更新：**

ISAPI_Rewrite 版本为 3.0。

**webroot/.htaccess**中的所有代码：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www\.)?a.luckyet\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/wp/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /wp/$1
RewriteCond %{HTTP_HOST} ^(www\.)?a.luckyet\.com$ [NC]
RewriteRule ^(/)?$ wp/ 
```

**webroot/wp/.htaccess**中的所有代码：

```
RewriteEngine on 
# For file-based wordpress content (i.e. theme), admin, etc.
RewriteRule wp-(.*) wp-$1 [L]
# For normal wordpress content, via index.php
RewriteRule ^/$ index.php [L]
RewriteCond %{REQUEST_FILENAME} !-f #1
RewriteCond %{REQUEST_FILENAME} !-d #2
RewriteRule (.*) index.php/$1 [L] 
```

Wordpress 的固定链接是：

```
/%postname%.html 
```

[因此，当访问http://a.luckyet.com/](http://a.luckyet.com/)或[http://a.luckyet.com/hello-world.html](http://a.luckyet.com/hello-world.html)时，Wordpress 可以正常工作

**问题：**

*如果webroot/wp/*中有真实的a.html这样的文件，比如*webroot/wp/a.html ，访问**[http://a.luckyet.com/a.html](http://a.luckyet.com/a.html)*时会报wordpress 404错误，. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T19:04:14.150

您正在使用 .htaccess 文件和 WordPress 设置动态重写 URL，以附加 .html 扩展名 - 任何“真实”的 .html 文件都由 IIS 处理程序映射在上游处理。

您必须在 IIS 中为 .html 文件更新处理程序映射，尤其是将请求直接定向到物理文件。

# java - 如何显示在我的组合框中选择的颜色

> ID：15995375
> 
> 赞同：2
> 
> 时间：2013-04-14T03:11:27.837
> 
> 标签：java

所以我试图制作一个漂亮的窗口，显示从组合框中选择的颜色。但是我制作了窗口和组合框，由于某种原因我的颜色没有显示。谁能帮我？

另外据我所知，我的组合框位于窗口的顶部。我想让它显示在颜色下方。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JFrame;

class Colors extends JFrame implements ItemListener
{
    Choice chooseColor = new Choice();
    Label lblQts = new Label("Choose color you like : ");

    public Colors(String title)
    {
        super(title);
        setLayout(new FlowLayout());
        chooseColor.addItem("red");
        chooseColor.addItem("green");
        chooseColor.addItem("blue");

        add(lblQts);
        add(chooseColor);

        chooseColor.addItemListener(this);
    }   

    public void itemStateChanged(ItemEvent e)
    {   
        String c;
        Color color;
        c = chooseColor.getSelectedItem();
        color=Color.getColor(c);

        setBackground(color);
    }

}

public static void main(String[] args)
{
    Colors objColor = new Colors("Color Chooser");
    objColor.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    objColor.setSize(400,400);
    objColor.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:54:58.477

让我们暂时假设您确实应该使用 Swing API 而不是 AWT API（并且您只是在学习，我认为这是一个不错的假设）。

您可以执行以下操作...

基本上。我有`JComboBox`一个习惯`ListCellRenderer`和`ActionListener`.

以我想要的`ListCellRenderer`方式呈现项目，并让`ActionListener`侦听器更改组合框。

当一个新项目被选中时，它会根据选中的项目改变组合框的背景。

这里展示的概念对于理解 Swing（以及一般的 Java）至关重要

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.ComboBoxEditor;
import javax.swing.DefaultListCellRenderer;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestComboBox08 {

    public static void main(String[] args) {
        new TestComboBox08();
    }

    public TestComboBox08() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            final JComboBox cb = new JComboBox();
            cb.addItem(new SelectableColor("Red", Color.RED));
            cb.addItem(new SelectableColor("Green", Color.GREEN));
            cb.addItem(new SelectableColor("Blue", Color.BLUE));
            cb.setRenderer(new ColorCellRenderer());
            add(cb);
            cb.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    Object value = cb.getSelectedItem();
                    if (value instanceof SelectableColor) {
                        cb.setBackground(((SelectableColor)value).getColor());
                    } else {
                        cb.setBackground(null);
                    }
                }
            });
            cb.setSelectedItem(null);
        }

    }

    public class SelectableColor {
        private String name;
        private Color color;

        public SelectableColor(String name, Color color) {
            this.name = name;
            this.color = color;
        }

        public String getName() {
            return name;
        }

        public Color getColor() {
            return color;
        }

    }

    public class ColorCellRenderer extends DefaultListCellRenderer {

        @Override
        public Component getListCellRendererComponent(JList<?> list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (value instanceof SelectableColor) {
                SelectableColor sc = (SelectableColor) value;
                if (!isSelected) {
                    setBackground(sc.getColor());
                    setOpaque(true);
                }
                setText(sc.getName());
            }
            return this;
        }

    }

} 
```

您确实应该熟悉[使用 Swing 创建 UI](http://docs.oracle.com/javase/tutorial/uiswing/)。如果这超出了您的想象，请从涵盖基础知识的[Trails开始](http://docs.oracle.com/javase/tutorial/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:22:57.650

您需要设置 contentPane 的背景，而不是`JFrame`背景。然后，您不能`Color.getColor`用于在这种情况下检索您的颜色对象。看到[这个](https://stackoverflow.com/questions/3772098/how-does-java-awt-color-getcolorstring-colorname-work)

这是工作代码：

```
import java.awt.Choice;
import java.awt.Color;
import java.awt.FlowLayout;
import java.awt.Label;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.lang.reflect.Field;

import javax.swing.JFrame;

public class Colors  extends JFrame implements ItemListener

{
    Choice chooseColor = new Choice();
    Label lblQts = new Label("Choose color you like : ");

    public Colors (String title) {
        super(title);
        setLayout(new FlowLayout());
        chooseColor.addItem("red");
        chooseColor.addItem("green");
        chooseColor.addItem("blue");

        add(lblQts);
        add(chooseColor);

        chooseColor.addItemListener(this);
    }

    public void itemStateChanged(ItemEvent e) {
        String c;
        Color color;
        c = chooseColor.getSelectedItem();              
        try {
            Field field = Class.forName("java.awt.Color").getField(c);
            color = (Color)field.get(null);
        } catch (Exception ex) {
            color = null; // Not defined
        }    
        getContentPane().setBackground(color);

    }

    public static void main(String[] args) {

        Colors  objColor = new Colors ("Color Chooser");
        objColor.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        objColor.setSize(400, 400);
        objColor.setVisible(true);

    }
} 
```

# javascript - Javascript：计算给定中心点和另一个点的圆的半径

> ID：15995394
> 
> 赞同：2
> 
> 时间：2013-04-14T03:16:37.050
> 
> 标签：javascript, math, geometry

假设我有一个圆，其中心点位于原点 (0,0)，与它成 90 度的点位于 (0,10)……从这两个明显的点来看，圆的半径肯定是`10`，对吧？

我研究了根据中心点和另一点求半径的公式是：

```
Math.sqrt( ((x1-x2)*2)  + ((y1-y2)*2) ) 
```

但我得到的`4.47213595499958`不是我认为的值`10`。

谁能教我正确的公式，我应该用它来从一个中心点到另一个点做一个完美的圆？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T03:21:06.503

javascript中的电源是通过使用完成的`Math.pow`：

```
Math.sqrt( Math.pow((x1-x2), 2) + Math.pow((y1-y2), 2) ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T03:20:05.887

在 javascript 中，`*`运算符的意思是乘法，而不是幂次。正确的公式应该是：

```
Math.sqrt( ((x1-x2)*(x1-x2)) + ((y1-y2)*(y1-y2)) ) 
```

# typescript - Breeze Typescript 定义文件中缺少方法

> ID：15995395
> 
> 赞同：0
> 
> 时间：2013-04-14T03:16:37.707
> 
> 标签：typescript, breeze

在最新的 Breeze Typescript 定义文件 ( [https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped) ) 中缺少方法，特别是 Validator.register 和 Validator.registerFactory 方法。我想知道——出于某种原因，这是故意的吗？尽管我可以编辑定义文件，但我不喜欢这样做，因为下载更新版本时我的更改会消失。有没有办法扩展定义文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T07:25:02.933

**编辑：**这些现在在 Breeze v1.3.0 上可用

* * *

我会将这些添加到下周晚些时候发布的 Breeze 的下一个版本中。

附带说明一下，可以在“TypeScript”目录中每个版本的微风 zip 文件中找到最新版本的微风打字稿定义文件。我们也尝试保持 ( [https://github.com/borisyankov/DefinitelyTyped](https://github.com/borisyankov/DefinitelyTyped) ) 的更新，但可能会有延迟，因此最好直接从最新的 Breeze zip（或直接从 GitHub）获取。

并感谢您指出这一点，如果您看到更多请转发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T02:23:35.613

回答：有没有办法扩展定义文件？

不，Validator 被定义为一个类。类定义不是开放式的，因此以下内容无效：

```
declare class Validator  {
    static messageTemplates: any;
}

declare class Validator  {
    static register: any;
} 
```

Validator 被定义为一个类，因为接口不支持静态方法。如果 typescript 在接口上支持静态成员，那么我们可以这样做：

```
interface Validator {
    static messageTemplates: any;

    constructor (name: string, validatorFn: ValidatorFunction, context?: any);

    static bool(): Validator;
    static byte(): Validator;
    static date(): Validator;
    static duration(): Validator;
    getMessage(): string;
    static guid(): Validator;
    static int16(): Validator;
    static int32(): Validator;
    static int64(): Validator;
    static maxLength(context: { maxLength: number; }): Validator;
    static number(): Validator;
    static required(): Validator;
    static string(): Validator;
    static stringLength(context: { maxLength: number; minLength: number; }): Validator;
    validate(value: any, context?: any): ValidationError;
} 
```

你可以简单地完成：

```
interface Validator {
    register(); // Whatever your signature was 
 } 
```

由于接口是开放式的，因此它会起作用。不幸的是，在定义文件中它被定义为一个类`class Validator`，这就是为什么除了修改定义文件之外没有办法扩展它的原因。

# ios - 如何拥有具有两种不同单元格类型的 UITableView 并以编程方式设置每个单元格布局，而不是通过情节提要？

> ID：15995398
> 
> 赞同：2
> 
> 时间：2013-04-14T03:17:43.083
> 
> 标签：ios, objective-c, uiview, uitableview

以前我用故事板设置了这个，拖动了 UILabel，定位它们并调整它们的大小，我将它们拖到 UITableViewCell 上，然后为另一个 UITableViewCell 做一个不同的版本。

例如，如下所示（但在图片中它们尚未使用标签进行自定义）：

![在此处输入图像描述](https://i.stack.imgur.com/M1oNF.png)

然后在数据源中，我只需检查标识符，并根据标识符是什么，相应地自定义单元格。

但是，我需要比从情节提要中获得更多的定制，因为每个单元格将有两个 UIView（一个顶部和一个底部以允许滑动顶部），所以我不能真正做到这一点故事板，因为我以编程方式将标签和所有内容添加到 UIView。

**但我的问题是：**当我以编程方式执行此操作时，如何判断哪个单元格是哪个单元格，以便我可以相应地自定义 UILabel 的布局？使用情节提要，我显然可以将 UILabel 拖到每个上，但是当以编程方式进行设置并设置 UIView 时，我不知道该怎么说，“嘿，如果标识符是这个，请像这样添加 UILabel”，因为UIViews 不知道任何标识符。

基本上结构是这样的：

UITableView -> UITableViewCell -> CellFront(UIView) & CellBack(UIView)

并且单元格的外观来自添加到 CellFront UIView 的标签。但是单元格有两种外观，如果没有故事板，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:22:30.057

尽管`UIView`s 不知道标识符，但它们有一个名为的属性`tag`，可用于您想要的任何目的。例如，您可以将标记设置为`1`一种`2`单元格，以及另一种单元格，然后使用标记来区分代码中的单元格。此外，一旦您的视图被标记，您就可以调用包含视图，并用您想要`viewWithTag:`的视图取回视图。`tag`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:22:51.483

如果您仅在代码中创建单元格，那么您在表格视图控制器的 viewDidLoad 方法中注册您的 UITableViewCell 子类。该方法设置标识符。然后，您在 cellForRowAtIndexPath: 中使用该标识符：就像为 xib 或情节提要创建的单元格一样。

[self.tableView registerClass:[MyCellSubclass class] forCellReuseIdentifier:@"MyIdentifier"];

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T03:44:15.863

这是一种方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Adjust the condition to match your needs
    if (indexPath.row == 0) {
        static NSString *Identifier1 = @"CellType1";
        // cell type 1
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:Identifier1];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:Identifier1];

            // add subviews here
        }

        // set cell properties

        return cell;
    } else {
        static NSString *Identifier1 = @"CellType2";
        // cell type 2
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:Identifier2];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:Identifier2];

            // add subviews here
        }

        // set cell properties

        return cell;
    }
} 
```

# matlab - matlab的corrcov函数返回什么类型的sigma？

> ID：15995400
> 
> 赞同：0
> 
> 时间：2013-04-14T03:18:08.150
> 
> 标签：matlab

我有一个 3X3 矩阵

```
S_2 =

    0.0001   -0.0004    0.0001
   -0.0004    0.0029   -0.0002
    0.0001   -0.0002    0.0003 
```

当我应用 [R,s] = corrcov(S_2) 时，它返回一个在 s 中具有标准偏差 sigma 的向量

```
R =

    1.0000   -0.7834    0.3187
   -0.7834    1.0000   -0.2631
    0.3187   -0.2631    1.0000

s =

    0.0099
    0.0538
    0.0163 
```

corrcov 执行什么类型的计算来获得 sigma "s" ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:29:06.280

查看corrcov的源码发现：`edit corrcov.m`

结果是：`sigma = sqrt(diag(C))`，其中`C`是输入[协方差矩阵](http://en.wikipedia.org/wiki/Covariance_matrix)（对角线元素表示方差，其平方根是标准差）。

请记住，相关矩阵是由标准差归一化的协方差矩阵：[http ://en.wikipedia.org/wiki/Covariance_and_correlation](http://en.wikipedia.org/wiki/Covariance_and_correlation)

# asp.net-mvc - 我在哪里可以找到将 jqGrid 用作发布表单的一部分的示例？

> ID：15995407
> 
> 赞同：0
> 
> 时间：2013-04-14T03:19:35.563
> 
> 标签：asp.net-mvc, arrays, post, jqgrid

我有一个表单，其中有一堆文本框和下拉列表。我现在需要添加另一个子对象数组并将其包含在我的表单帖子中。

我打算将它作为 html 表手动滚动，但我认为我可以利用 jqGrid。我可以在本地使用 jqGrid 添加数据然后将其包含在表单帖子中的最佳方式是什么？我需要 jqGrid 在本地操作的原因是这些子记录是较大表单的一部分，因此在发布较大的表单之前我不能发布 jqGrid 行（所以我有一个 ID 可以加入这些行）

例如，如果我的帖子是一个订单屏幕（带有日期、说明等文本框），现在我想要一个网格，您可以将产品添加到订单中。您可以拥有任意数量的行。.)

如果有任何建议，我的后端是 asp.net-mvc。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T08:23:44.207

如果您使用表单编辑，您可以通过多种方式扩展 postdata。最简单的就是[onclickSubmit](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#events)回调的用法：

```
onclickSubmit: function (options, postData) {
    return {foo: "bar"};
} 
```

如果您使用上述回调，那么将发布到服务器的数据将使用`foo`带有字符串 value的参数进行扩展`"bar"`。

另一种可能性是使用[editData](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aform_editing#properties)选项`editGridRow`。最好的方法是使用`editData`定义为函数的属性。每次发布数据之前都会调用该函数。

例如下面的代码

```
$("#grid").jqGrid("navGrid", "#pager", {}, {
    editData: {
        foo: function () {
            return "bar";
        }
    },
    onclickSubmit: function (options, postData) {
        return {test: 123};
    }
}); 
```

将添加`foo=bar`和`test=123`到将发送到服务器的参数。

下一个可能性是使用`serializeEditData`. 回调使您可以完全控制将发送到服务器的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T10:40:06.723

我正在使用 Oleg 建议的序列化方法。

**看法**

```
 $( "#Save" ).click( function ( e )
            {
                e.preventDefault();

                  var griddata= $( "#list" ).getRowData();
                    var model = {
                        grid: griddata
                    };

                    var gridVal = JSON.stringify( model );
                   //Now set this value to a hiddenfield in the form and submit
                   $('#hiddenGridDta').val(gridVal );
                  $( 'form' ).submit();

}); 
```

在**控制器**中，使用[Newtonsoft.json](http://www.nuget.org/packages/Newtonsoft.Json) .jsonconvert() 反序列化这些值。

```
 public ActionResult SaveTest(TestClass test)
        {

       testViewModel myGrid = JsonConvert.DeserializeObject<testViewModel>(test.hiddenGridDta);
................

} 
```

**测试视图模型类**

```
 public class testViewModel 
    {
        public IEnumerable<TestGrid> grid { get; set; }
    } 
```

**测试网格类**

```
 public class profileGrid
    {
//fields in the jqgrid (should use the same name as used in *colModel:* of jqgrid)

        public int x
        {
            get;
            set;
        }
        public int y
        {
            get;
            set;
        }
          .......

    } 
```

# javascript - CreateJS 中的 PreloadJS 不起作用

> ID：15995411
> 
> 赞同：4
> 
> 时间：2013-04-14T03:20:22.923
> 
> 标签：javascript, html, createjs

我正在尝试学习使用 PreloadJS 预加载图像。

这就是我所拥有的：

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
    <script src="easeljs-0.6.0.min.js"></script>
    <script src="preloadjs-0.3.0.min.js"></script>
    <script src="soundjs-0.4.0.min.js"></script>    
    <script>
        var stage, output, queue;
        function handleComplete() {
            var backgroundImage=new createjs.Bitmap("myImg");
            stage.addChild(backgroundImage);
            stage.update();
        }
        function init() {
            stage = new createjs.Stage("demoCanvas");
            queue = new createjs.LoadQueue();
            queue.installPlugin(createjs.Sound);
            queue.addEventListener("complete", handleComplete);
            queue.loadFile({id:"myImg", src:"Background.png"});
        }
    </script>
</head>
<body onLoad="init();">
    <canvas id="demoCanvas" width="1300" height="600">
        Your browser does not support canvas
    </canvas>
</body>
</html> 
```

当我加载页面时，我收到此错误：

```
Access is denied: preloadjs-0.3.0.min.js, line 50 character 333 
```

我跟踪了调用堆栈，发现错误是从以下行生成的：

```
queue.loadFile({id:"myImg", src:"Background.png"}); 
```

你能告诉我我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T01:32:07.363

路径类型（绝对/相对）应该无关紧要，但是您可能从哪里加载它。

默认情况下，PreloadJS 将尝试使用 XHR (XMLHttpRequests) 加载内容，这仅在服务器上加载时才有效（file:// 不起作用，您应该使用 localhost 代替），并且来自同一个域。您可以尝试将 false 作为参数传递给 LoadQueue 以使其使用标签加载图像，这可以解决大多数错误。

```
 queue = new createjs.LoadQueue(false); 
```

您通常从 XHR 加载中得到的错误是跨域错误，而不是“访问被拒绝”。如果您从文件系统加载，请确保该文件不是只读的，或者具有某种保护。

# vb.net - VB.NET SendMessage 到项目中的另一个窗体

> ID：15995416
> 
> 赞同：0
> 
> 时间：2013-04-14T03:21:12.767
> 
> 标签：vb.net, forms, project, sendmessage, sendkeys

我有一个 3 形式的项目。

我希望 form3 使用 sendmessage 到 form2 但我无法让它工作。如果它有任何不同，form2 上有一个 flash 对象（特别是游戏），我想将这些键发送给它。

这是我拥有的一些东西，但我不知道为什么它不起作用：

```
Declare Function FindWindow Lib "user32" Alias "FindWindowA" _
                         (ByVal lpClassName As String, ByVal lpwindowname As String) As IntPtr
    Declare Function SendMessage Lib "user32" Alias "SendMessageA" _
                 (ByVal hWnd As IntPtr, ByVal wMsg As Integer, ByVal wParam As Integer, ByVal lParam As Integer) As IntPtr
    Const WM_KEYDOWN As Integer = &H100
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click

    Dim destination As IntPtr = FindWindow(Nothing, Window)
    SendMessage(destination, WM_KEYDOWN, Keys.Down, 0)

End Sub 
```

澄清窗口是一个包含 form2.text 的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:39:51.423

为什么不在 form2 中添加一个简单的方法，然后在 form3 中使用 keydown 时调用该方法。

假设在 form3 中按下了一个键，所以你有代码：

```
 Private Sub Form3_KeyDown(sender As Object, e As System.Windows.Forms.KeyEventArgs) Handles Me.KeyDown

       If (e.KeyCode = Keys.Down) Then
           Form2.KeyIsPress()
       End If

    End Sub 
```

因此，在您的 Form2 中添加方法 KeyIsPress()

```
Public Sub KeyIsPress()

    MessageBox.Show("Key Down is Press")

End Sub 
```

我假设两种形式（即 Form2 和 Form3）都在运行。

# python - python函数和类中的列表

> ID：15995417
> 
> 赞同：-1
> 
> 时间：2013-04-14T03:21:20.413
> 
> 标签：python, list

您如何使用该类中的任何函数都可以访问的列表。例如，在我的班级学生中，我想创建一个名为成绩的列表，并且我想创建单独的函数来添加到列表中，从列表中删除，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:29:03.060

```
class Student(object):
    def __init__(self):
        self.grades = []

myStudent = Student()

myStudent.grades.append(90) 
```

这个问题非常基础。你读过[Python 教程](http://docs.python.org/2/tutorial/)吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:34:50.397

```
>>> class Student(object):
...     def __init__(self):
...         self.grades = []
...     def foo1(self):
...         self.grades.append(1)
...     def foo2(self):
...         self.grades.append(2)
...
>>> student = Student()
>>> student.foo1()
>>> student.grades
[1]
>>> student.foo2()
>>> student.grades
[1, 2] 
```

如您所见，有两种方法可以访问同一个列表，`grades`. 您也可以创建另一种方法来从 中删除项目`grades`。

# android - 应用程序退出时如何销毁静态字段？

> ID：15995425
> 
> 赞同：2
> 
> 时间：2013-04-14T03:22:14.040
> 
> 标签：android, static, garbage-collection, singleton, destroy

我的应用程序中有一个`singleton`类，它的定义有点像：

```
public class SingletonTest {
    private SingletonTest() {}

    private static SingletonTest instance = new SingletonTest();

    public static SingletonTest getInstance() {
        return instance;
    }
} 
```

当我退出我的应用程序并再次打开时，`instance`它还没有被再次初始化，因为前一个没有被破坏并且仍在 JVM 中。但我想要的是每次进入我的应用程序时初始化静态字段。那么，我应该在`onDestroy()`方法中做什么呢？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:34:20.500

只要您的应用程序保留在内存中，您的静态变量就会保留在内存中。这意味着，静态变量将与您的应用程序一起自动销毁。

如果您想要一个新的单例实例，您将需要创建一个静态方法来重新初始化您的单例并在应用程序对象的 onStart 或您启动的第一个活动中调用它（或在您需要时调用它）

```
private Singleton() {}
private static Singleton mInstance;

//use this method when you want the reference
public static Singleton getInstance() {
    //initializing your singleton if it is null
    //is a good thing to do in getInstance because
    //now you can see if your singleton is actually being reinitialized.
    //e.g. after the application startup. Makes debugging it a bit easier. 
    if(mInstance == null) mInstance = new Singleton();

    return mInstance;
}

//and this one if you want a new instance
public static Singleton init() {
    mInstance = new Singleton();
    return mInstance;
} 
```

应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T17:23:12.970

从您所说的来看，Singleton 似乎不适合您想做的事情。您应该声明一个实例变量，该变量将由方法`onCreate()/onStart()`和`onStop()/onDestroy()`.

请参阅[此图](http://developer.android.com/images/activity_lifecycle.png)了解活动生命周期。

来源：http: [//developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

# javascript - 为什么JavaScript“类”中的函数不能调用自身？

> ID：15995427
> 
> 赞同：2
> 
> 时间：2013-04-14T03:22:31.500
> 
> 标签：javascript

我无法弄清楚这段代码有什么问题。Firefox 的错误控制台告诉我：“ *this.animateImgSlider 不是函数*”。

我想要的是调用`this.selectImage()`，`jsItems[0].selectImage(0)`然后`this.animateImgSlider()`被调用多次，直到`selfCall`为假：

```
function WindowItem(inId) {
    this.id = inId;
    this.imgSliderTarget = 0;
    this.imgSlider = document.getElementById("imgSlider"+inId);

    this.animateImgSlider = function() {
        var selfCall = true;
        var currLeft = parseInt(this.imgSlider.style.left, 10);
        if (currLeft < this.imgSliderTarget) {
            currLeft += 8;
            if (currLeft >= this.imgSliderTarget) {
                currLeft = this.imgSliderTarget;
                selfCall = false;
            }
        }
        else {
            currLeft -= 8;
            if (currLeft <= this.imgSliderTarget) {
                currLeft = this.imgSliderTarget;
                selfCall = false;
            }
        }
        this.imgSlider.style.left = currLeft+"px";
        if (selfCall) setTimeout("this.animateImgSlider()", 0);
    }

    this.selectImage = function(inImg) {
        this.imgSliderTarget = -inImg*488;
        this.animateImgSlider();
    }
}
var jsItems = new Array();
jsItems.push(new WindowItem(0)); 
```

这一行是引发错误的行：

```
if (selfCall) setTimeout("this.animateImgSlider()", 0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T03:24:14.490

改用这个：

```
if (selfCall) {
    var self = this;
    setTimeout(function () {
        self.animateImgSlider();
    }, 0);
} 
```

`self`（当然，对我来说，在顶部声明并在整个函数中使用它而不是更有意义`this`）

传递给`setTimeout`执行的字符串是在全局范围内完成的，意思`this`是指`window`. 它不在`setTimeout`调用所在的当前范围内执行。

附带说明一下，作为建议，我会将您的方法`animateImgSlider`和`selectImage`方法移到`WindowItem`原型之外，以便所有实例都可以共享它们，而不是每次都创建一个新的匿名函数。因此，例如，您将拥有：

```
function WindowItem(inId) {
    // blah blah
}

WindowItem.prototype.animateImgSlider = function () {
    // blah blah
};

WindowItem.prototype.selectImage = function(inImg) {
    // blah blah
}; 
```

的值`this`仍将引用特定实例，除非您尝试在字符串中使用它作为`setTimeout`参数:)

这显然不是必需的，因为您的代码当前可以正常工作，但它是在构造函数上声明方法以供实例共享的常用约定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T03:26:03.267

您可以使用绑定。这里是[链接](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

```
if (selfCall) {
    setTimeout(function () {
        this.animateImgSlider();
    }.bind(this), 0);
} 
```

# clojure - 从 Clojure 调用 SVNKit

> ID：15995428
> 
> 赞同：0
> 
> 时间：2013-04-14T03:22:47.103
> 
> 标签：clojure, svnkit

我正在尝试按照[本教程](http://wiki.svnkit.com/Printing_Out_A_Subversion_Repository_Tree)使用 svnkit，但从 clojure 进行操作。我的代码是：

```
(defn svntest [ url ]
  (. DAVRepositoryFactory setup)
  (try (let [ repository (. SVNRepositoryFactory create 
           (. SVNURL parseURIEncoded url))]    
           (.iterator 
              (. repository getDir "svnkit" -1 nil (cast Collection nil)))
         )
    (catch SVNException svne
      (println (str "err: " (.getMessage svne)))
      )
  )
)
(svntest "http://svn.svnkit.com/repos/svnkit/trunk") 
```

但是，我的`getDir`调用似乎不起作用 - 我得到一个 IllegalArgumentException 因为这个 getDir 返回一个 long 而不是一个集合。

我究竟做错了什么？我是否需要以不同的方式转换参数以获得此重载方法的另一个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:15:14.140

要修复此类型提示`let`语句中的集合，如下所示：

```
(let [^Collection coll nil
      repository (. SVNRepositoryFactory create 
                   (. SVNURL parseURIEncoded url))]
        (.iterator
          (. repository getDir "svnkit" -1 nil coll)))
; ... 
```

# graphviz - Graphviz 在节点或边之间共享属性

> ID：15995429
> 
> 赞同：5
> 
> 时间：2013-04-14T03:22:48.743
> 
> 标签：graphviz, dot

我正在使用 Graphviz（即 Dot）为我计划构建的超媒体 API 绘制状态机。在我的图中，节点代表状态，而边代表链接。我想要做的是拥有相同“类型”的边（链接）（即，使用相同的动词或相同的 rel）来共享属性，例如`color`.

我知道您可以定义适用于所有节点/边缘的“全局”属性，但我需要一些可以更普遍地应用于几种不同“类型”的东西。对于我想要的东西，我能想到的最接近的类比是 HTML 类。我的边缘不需要多个“类”（尽管那会很好），但是重复属性就像`color=red, style=bold`是麻烦的。

Dot 有没有办法声明这样的东西？或者至少以某种方式我不必经常重复自己？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T05:33:36.193

我以两种不同的方式做到了这一点：

选项 (A)：`dot`从另一个脚本写入文件。当我使用脚本（例如 Python 或 Perl）将输入数据重新加工`dot`为绘图格式时，这特别有用。在这种情况下，除了让 Python 脚本将数据写入`dot`格式之外，我还可以让它将每个节点和边的属性写入`dot`文件。下面显示了一个示例（无法运行，因为我已从解释输入数据的较大脚本中提取它，但您可以看到 Perl 是如何编写`dot`代码的）。

```
print "graph G {\n graph [overlap = scale, size = \"10,10\"]; node [fontname = \"Helvetica\", fontsize = 9]\n";
for ($j = 0; $j <= $#sectionList; $j++) {
   print "n$j [label = \"$sectionList[$j]\", style = filled, fillcolor = $groupColour{$group{$sectionList[$j]}} ]\n";
   }
for ($j = 0; $j <= $#sectionList; $j++) {
   for ($i = $j+1; $i <= $#sectionList; $i++) {
      $wt = ($collab{$sectionList[$j]}{$sectionList[$i]}+0)/
         ($collab{$sectionList[$j]}{$sectionList[$j]}+0);
      if ($wt > 0.01) {
         print "n$j -- n$i [weight = $wt, ";
         if ($wt > 0.15) {
            print "style = bold]\n";
         }
         elsif ($wt > 0.04) {
            print "]\n";
         } else {
            print "style = dotted]\n";
         }
      }
   }
   print "\n";
}

print "}\n"; 
```

选项 (B)：如果我`dot`手动编写脚本，我将使用宏处理器来定义通用元素。例如给定`polygon.dot.m4`包含如下`m4`宏的文件`define()`：

```
define(SHAPE1,square)
define(SHAPE2,triangle)

digraph G {
    a -> b -> c;
    b -> d;
    a [shape=SHAPE1];
    b [shape=SHAPE2];
    d [shape=SHAPE1];
    e [shape=SHAPE2];
    } 
```

...命令`m4 <polygon.dot.m4 | dot -Tjpg -opolygon.jpg`产生： ![在此处输入图像描述](https://i.stack.imgur.com/a86xY.jpg)

更改文件顶部的 SHAPE1 和 SHAPE2 的定义将更改为每个相关节点绘制的形状。

# attributes - 如何指定 GNU C 的属性？

> ID：15995442
> 
> 赞同：0
> 
> 时间：2013-04-14T03:24:36.190
> 
> 标签：attributes, gnu, function-attributes

在[GUN C 手册](http://gcc.gnu.org/onlinedocs/gcc/)*6.30 Declaring Attributes of Functions*中，它指出：

> 您还可以`__`在每个关键字之前和之后指定属性。这允许您在头文件中使用它们，而不必担心可能的同名宏。例如，您可以使用`__noreturn__`代替`noreturn`.

这是否意味着用户可以指定自定义属性？或者还有什么？我肯定很困惑，有人可以帮忙，或者给我一些样品吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:32:33.573

它的意思是头文件可能已经完成：

```
#define noreturn 3 
```

如果您尝试将函数声明为：

```
void fatal () __attribute__ ((noreturn)); 
```

它会像你写的那样被处理：

```
void fatal () __attribute__ ((3)); 
```

这不是你想要的。所以你可以改写：

```
void fatal () __attribute__ ((__noreturn__)); 
```

这是安全的，因为不允许用户定义名称以两个下划线开头的宏，这些名称是为实现保留的。请参阅[在 C++ 标识符中使用下划线的规则是什么？](https://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier)

# node.js - 试图理解节点 createServer 回调

> ID：15995443
> 
> 赞同：5
> 
> 时间：2013-04-14T03:24:37.050
> 
> 标签：node.js

使用 Node.js hello world 示例：

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

我试图找到 http.js 中的 createServer “寻找”一个函数的位置，然后将其传递给两个对象（上面分别命名为“req”和“res”。我已经搜索了 http.js，唯一的东西我发现是：

```
exports.createServer = function(requestListener) {
  return new Server(requestListener);
}; 
```

这是否意味着匿名函数：

```
function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
} 
```

...作为“requestListener”传递并且...

```
return new Server(requestListener); 
```

... req 和 res 对象在哪里传回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:28:42.840

是的。在 Javascript 中，函数本身就是“值”，您可以分配给“对象”。由于您可以将对象传递给另一个函数，因此您可以将函数本身作为对象传递。

`requestListener`是被`createServer`命名为`requestListener`用于调用`Server` `constructor`它的参数。

您也可以在 ruby​​ 中看到这一点，您可以在其中调用一个函数，同时将要在 do 块中执行的代码作为参数传递给它。

# ruby-on-rails - 我应该如何将自定义属性添加到 rails 辅助方法？

> ID：15995446
> 
> 赞同：2
> 
> 时间：2013-04-14T03:25:02.743
> 
> 标签：ruby-on-rails, ruby

我有一个 Rails 辅助方法...

```
 def current_user
    @user = User.find(cookies[:user_id]) if cookies[:user_id]
  end 
```

我想向它添加一个非数据库属性......

```
self.custom_property = true 
```

所以我可以在我的视图中访问它。

```
<%= current_user.custom_property %> 
```

但是，Rails 说“未定义的方法：custom_property”

这是完整的代码：

```
 def current_user
    @user = User.find(cookies[:user_id]) if cookies[:user_id]

    @user.ribbon_array ||= []
    self.is_moderator = @user.ribbon_array.include?(1) ? true : false
  end 
```

我想这样做，所以在我看来，我可以检查 current_user.is_moderator。在我的代码的其他地方，我有一个特定于每个页面的 @is_moderator 变量，但是这个变量将在整个应用程序中使用，并且特定于 current_user 而不是配置文件上的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:22:27.017

要做到这一点

> 我想这样做，所以在我看来，我可以检查 current_user.is_moderator。在我的代码的其他地方，我有一个特定于每个页面的 @is_moderator 变量，但是这个变量将在整个应用程序中使用，并且特定于 current_user 而不是配置文件上的用户。

我建议你在你的用户模型上实现一个名为的方法

```
def is_moderator_of(page)
    # returns true or false here
end 
```

或者更好的是，使用像[cancan这样的授权 gem](https://github.com/ryanb/cancan)

编辑：

还有，这

```
@user = User.find(cookies[:user_id]) if cookies[:user_id]
@user.ribbon_array ||= [] 
```

如果没有 cookie[:user_id]，将生成“Method not found:ribbon_array for nil”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:33:06.310

在您的 app/models/user.rb 文件中：

```
class User << ActiveRecord::Base
  attr_accessor :custom_property
  ...
end 
```

然后您的视图代码应该可以工作。

或者，您可以在帮助程序中设置@custom_property = true，并在视图中使用@custom_property。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:19:41.933

**编辑**

我的坏没有太多的想法。在这种情况下，可能更好的解决方案是添加另一个辅助方法。助手本身并不是那么面向对象，因此您也应该能够容忍这种解决方案。

```
def current_user
  @current_user = User.find(cookies[:user_id]) if cookies[:user_id]
end

def is_moderator?
   ribbon = @current_user.ribbon_array || []
   ribbon.include?(1)
end 
```

# ios - 自定义字体 iOS 不显示

> ID：15995447
> 
> 赞同：1
> 
> 时间：2013-04-14T03:25:08.480
> 
> 标签：ios, objective-c, fonts, cocos2d-iphone

我正在尝试为我的应用安装自定义字体。我已经做了很多次了，但是用这个字体我不知道为什么它不起作用

注意：我的 info.plist 与 Geometry Soft Pro.ttf 文件正确

字体文件：Geometry Soft Pro.ttf

我已经尝试使用以下代码：

*   几何软件专业版
*   几何软件专业版
*   GeometrySoftPro-BoldN
*   GeometrySoftPro-Bold N
*   Geometry Soft Pro-Bold N
*   Geometry Soft Pro 粗体 N

我的代码：

```
[nivel.titleLabel setFont:[UIFont fontWithName:@"Geometry Soft Pro" size:42]]; 
```

字体信息：

![在此处输入图像描述](https://i.stack.imgur.com/dGXnK.png)

这是我的 info.plist ![在此处输入图像描述](https://i.stack.imgur.com/23c0U.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T03:39:09.560

请删除字体文件名中的空格。并在 info.plist 文件中更改名称。就这样。快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T12:35:05.493

我遇到了同样的问题，但这对我没有帮助，我用**UIAppFonts更改了****应用程序提供的字体**并且它可以工作，即使 .ttf 文件名与字体名不同。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:44:03.567

检查项目设置->构建阶段下的“复制捆绑资源”中是否添加了字体文件。还要在 MAC 中安装字体并在您的 iOS 代码中使用相同的名称（中间有/没有空格）。请让我知道这对你有没有用。**

# c - 警告：赋值使指针从整数而不进行强制转换

> ID：15995449
> 
> 赞同：2
> 
> 时间：2013-04-14T03:25:21.310
> 
> 标签：c, pointers, struct

我正在从指针进行强制转换，然后它让我运行这个警告（赋值使指针从没有强制转换的整数）。这是代码：

```
#include<stdio.h>
#include<stdbool.h>

typedef int TipoChave;

typedef struct TipoRegistro {
  TipoChave Chave;
  /*outros componentes*/
} TipoRegistro;

typedef struct TipoPagina* TipoApontador;

typedef struct TipoPagina {
  int registros;
  TipoRegistro *r;
  TipoApontador *p;
} TipoPagina;

TipoApontador NovaSubArvore(int ordem){
    TipoApontador A;
    A=malloc(sizeof(TipoPagina));
    int i;
    A->registros=0;
    A->r=malloc((2*ordem)*sizeof(TipoRegistro));
    A->p=malloc((2*ordem+1)*sizeof(TipoPagina));
    for (i=0;i<(2*ordem+1);i++){
        A->p[i]=NULL;
        if(i!=2*ordem){
            A->r[i].Chave=0;
        }
    }
    return (A);
} 
```

我主要打电话：

```
TipoApontador Raiz; 
```

然后：

```
Raiz=NovaSubArvore(ordem); //Warning happens here 
```

如果我做：

```
if (Raiz!=NULL)
    free(Raiz); 
```

它运行无效的免费（奇怪，因为如果 Raiz 为 NULL，则免费不应该运行。有人可以帮我解决这个问题吗？我认为这个警告也是让我无法“释放”的问题。

编辑：好的关于waring的问题已解决。但是，如果我免费执行 2 次，它会运行无效的免费（我有一个可以免费执行某些操作的函数，其他时候没有。如果我执行免费，“if（Raiz！=NULL）”应该阻止另一个免费运行。但它不是。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T04:11:24.180

一个问题是调用`malloc()`以及您没有通过 include 声明的`malloc()`事实`<stdlib.h>`。

默认情况下，假定函数返回`int`C99 之前的代码 - 在 C99 代码中，您应该在使用它之前声明一个函数。

您需要使用更多警告选项进行编译。如果您使用 GCC，我建议：

```
gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes \
    -Wold-style-definition ... 
```

这几乎可以确保您没有使用未声明的函数（例如`malloc()`）。根据您使用的 GCC 版本，默认情况下您可能会收到或多或少的警告。一般来说，较新的版本比较麻烦，尽管它不是那么简单。

* * *

另一个问题似乎是您有一个源文件（问题中未给出名称），其中包含类型定义和函数定义，例如：

```
typedef struct TipoPagina* TipoApontador;
typedef struct TipoPagina { ... } TipoPagina;

TipoApontador NovaSubArvore(int ordem) { ... } 
```

在此文件中，类型是已知的。在您的主代码中，您有：

```
TipoApontador Raiz;

...

Raiz = NovaSubArvore(ordem); //Warning happens here 
```

此文件中必须知道类型名称`TipoApontador`，但您的代码似乎不包含`NovaSubArvore()`.

对于将在多个源文件中使用的类型和函数，应该有一个定义类型和声明函数的标题。头文件应该在定义函数的源文件和使用类型和函数的源文件中使用。

例如，标题可能是`tipopagina.h`：

```
#ifndef TIPOPAGINA_H_INCLUDED
#define TIPOPAGINA_H_INCLUDED

typedef int TipoChave;

typedef struct TipoRegistro {
  TipoChave Chave;
  /*outros componentes*/
} TipoRegistro;

typedef struct TipoPagina* TipoApontador;

typedef struct TipoPagina {
  int registros;
  TipoRegistro *r;
  TipoApontador *p;
} TipoPagina;

extern TipoApontador NovaSubArvore(int ordem);

#endif /* TIPOPAGINA_H_INCLUDED */ 
```

头球后卫很重要；它们避免了重新定义类型的问题（尽管 C11 在处理 s 的重新定义方面比 C99 或 C89 具有更大的灵活性`typedef`）。函数名之前的使用`extern`不是绝对必要的，尽管我更喜欢看到它——如果只是为了与[`extern`](https://stackoverflow.com/questions/1433204/what-are-extern-variables-in-c/)在标头中声明的任何变量之前必须存在的对称（如果有的话——全局变量应该避免）可能的）。

然后实现文件`tipopagina.c`可能会启动：

```
#include "tipopagina.h"
#include <stdlib.h>

TipoApontador NovaSubArvore(int ordem)
{
    TipoApontador A = malloc(sizeof(TipoPagina));
    ...
    return (A);
} 
```

将标题放在首位是有[充分理由的；](https://stackoverflow.com/questions/1804486/should-i-use-include-in-headers)`tipopagina.h`它确保标头可以单独使用（这很重要）。

主代码还包括`tipopagina.h`，并且由于函数`NovaSubArvore()`是在标头中声明的，因此可以避免编译器警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:32:47.167

代码看起来不错，但如果我定义了`main`之前的代码，`NovaSubArvore`那么我会看到完全相同的错误：

```
int main()
{
   TipoApontador Raiz;
   int ordem = 10 ;
   Raiz=NovaSubArvore(ordem); 
}

TipoApontador NovaSubArvore(int ordem){
 /// Rest of the function
} 
```

所以在这种情况下，返回类型将默认为`int`. 在[K&R C](https://stackoverflow.com/a/1585403)中，如果您不使用该类型，它将默认为`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T20:28:28.410

好的....我认为不能这样做：

```
free (Raiz)
if (Raiz!=NULL)
    free(Raiz); 
```

无论如何，这将变得无效。剩下的问题通过那里的一些答案解决了。我已经接受了最完整的。但是感谢大家的帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T03:30:15.857

这对我来说看起来不错。你确定给定的定义`TipoApontador`和`NovaSubArvore`被引用的定义`main`吗？您可能不使用这些定义的方式是（例如）：

1.  包含与您粘贴的头文件不同的头文件（如果它们位于 .h 文件中）
2.  包括另一个头文件，该文件也定义了具有该名称的类型或函数，尽管在这种情况下我会收到警告
3.  `TipoApontadore`或`NovaSubArvore`实际上未在 中声明`main`，并且编译器正在分配默认类型。（这对我来说似乎是最有可能的。如果是这种情况，您应该会收到这样的警告。）

当然，这不是一个详尽的清单，但这些事情以前发生在我身上。

**编辑**：另外，您是否打开了编译器的所有警告？例如，如果您使用 gcc，您是否使用该`-Wall`选项？

# sql - Oracle中的SQL路由查找器-递归？

> ID：15995450
> 
> 赞同：3
> 
> 时间：2013-04-14T03:25:31.310
> 
> 标签：sql, oracle, stored-procedures, recursion, path

我正在尝试构建一个简单的路线查找器，该路线查找器计算并存储路线从 A 到 B 所经过的节点。我有两个表；一个由阶段（节点及其“下一个可能的跃点”）和一个 route_stage 表组成，该表应该能够存储使用唯一路由 ID 计算的每个路由。

舞台表

```
STAGEID START_STATION                  NEXT_HOP_STATION                   LENGTH
---------- ------------------------------ ------------------------------ ----------
     1 Penzance                       Plymouth                               78 
     2 Plymouth                       Exeter                               44.8 
     3 Exeter                         Taunton                              36.6 
     4 Exeter                         Salisbury                            96.6 
     5 Salisbury                      Basingstoke                          38.2 
     6 Basingstoke                    Southampton                          52.7 
     7 Southampton                    Poole                                  37 
     8 Poole                          Weymouth                             31.6 
     9 Taunton                        Reading                              99.5 
    10 Reading                        Basingstoke                            18 
    11 Reading                        Paddington                           40.9 
    12 Taunton                        Bristol                              48.8 
    13 Bristol                        Bath                                   13 
    14 Bath                           Swindon                              37.5 
    15 Swindon                        Reading                              39.8 
```

Route_Stage 表

```
ROUTEID    STAGEID
---------- ----------
     1          1 
     1          2 
     1          3 
     1          9 
     1         11 
     2          6 
     2          7 
     2          8 
     2         10 
     2         11 
```

对于上述情况，ID 为 1 的路线从 Penzance 开始，经过 Plymouth、Exeter、Taunton、Reading 并在 Paddington 终止。理想情况下，我想创建一个存储过程，该过程采用起点和终点站的入口参数，以便内部的代码能够计算出合适的路线。

我看过递归，但有点迷茫，因为我不确定当一个节点有多个潜在路径时代码应该如何反应？它怎么知道哪一个是正确的下去。

任何帮助是极大的赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:36:00.037

对于一个给定的起始位置，这将（我认为..抱歉，在 iPad 上手动输入）为离开该起始点的每条路线提供一行。

```
 SELECT
    LEVEL as route_step,
    t1.next_hop_station as next_station,
    t1.stageid

  FROM 
    stage t1

    INNER  JOIN stage t2 
    ON t2.start_station = t1.next_hop_station

  START WITH
    t1.start_station = 'your start station'

  CONNECT BY 
    PRIOR t1.start_station = t1.next_hop_station 
```

所以，对于起点站彭赞斯：

```
Route_Step  Next_Station StageID
1\.          Plymouth.    1
2\.          Exeter.      2
3\.          Taunton.     3
4\.          Reading.     9
5\.          Basingstoke. 10
6\.          Southampton  6
7\.          Poole.       7
8\.          Weymouth     8
5\.          Paddington.  11
3\.          Salisbury    4
4\.          Basingstoke. 5
5\.          Southampton. 6
6\.          Poole.       7
7\.          Weymouth.    8

* excuse the .'s! 
```

在不同的起始站上加入连接（并删除显式 START WITH 子句，以便您从所有站获取路线，而不仅仅是单个站）将为您提供输出表所需的内容（尽管根据之前的评论，我不确定该结构对您有什么用，因为您丢失了相关细节）：

```
SELECT
     First_Stage.stageid as routeid,
     q.stageid

   FROM
   (

      SELECT
        LEVEL as route_step,
        t1.next_hop_station as next_station,
        t1.stageid

      FROM 
        stage t1

        INNER  JOIN stage t2 
        ON t2.start_station = t1.next_hop_station

      CONNECT BY 
        PRIOR t1.start_station = t1.next_hop_station
    ) q

    INNER JOIN stage as first_stage
    ON first_stage.stageid = q.stageid
    AND q.route_step = 1 
```

# python - python我的j值在范围内（i，j-1）中的s发生变化时：j = 3但在范围之前它是j = 2 ...请帮助我

> ID：15995456
> 
> 赞同：1
> 
> 时间：2013-04-14T03:26:16.413
> 
> 标签：python

```
for l in range(1,len(S)-1):
    for i in range(1,len(S)-l):
        j=i+l
        for X in N:
            max_score = 0
            args = None
            if j==2:
                print j
            for s in range(i,j-1):#s is for split point
                if j==2:
                    print j
                for W in probBiNonterDic.keys():#y<==>  X->YZ
                    if j==2:
                        print j 
```

如您所见，如果 j==2 在 X 的第一个块中：打印 2，但是在 s 和 W 的第二个块中，如果 j==2 不打印 2...为什么会改变 j 值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:36:20.483

看起来您的问题出在第二个`for`循环上。您正在尝试遍历从 开始的范围`i --> j -1`，但是因为您在开始时增加了 的值`j`，所以这与编写 相同`range(i, i)`。也许你可以在循环`j`的底部增加。`for i in range(1, len(s) - 1)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:45:14.893

因为 l 和 i 循环都开始一个 1 和 j = i + l。此时 j == 2 并打印出来。当您尝试在 s 循环中从 1 循环到 1 时，您实际上甚至不会循环一次迭代，并且下一次进入 s 循环时 j 不再等于 2。

```
>>> for x in xrange(1,1):
...     if True:
...         print "hi"
>>> 
```

# nutch - Nutch crawl没有错误，但结果什么都没有

> ID：15995457
> 
> 赞同：2
> 
> 时间：2013-04-14T03:27:26.930
> 
> 标签：nutch, web-crawler

我尝试使用 nutch 2.1 抓取一些网址，如下所示。

```
bin/nutch crawl urls -dir crawl -depth 3 -topN 5 
```

[http://wiki.apache.org/nutch/NutchTutorial](http://wiki.apache.org/nutch/NutchTutorial)

没有错误，但不会创建下面提到的文件夹。

```
crawl/crawldb
crawl/linkdb
crawl/segments 
```

谁能帮我？我已经两天没有解决这个问题了。非常感谢！

输出如下。

```
FetcherJob: threads: 10
FetcherJob: parsing: false
FetcherJob: resuming: false
FetcherJob : timelimit set for : -1
Using queue mode : byHost
Fetcher: threads: 10
QueueFeeder finished: total 0 records. Hit by time limit :0
-finishing thread FetcherThread1, activeThreads=0
Fetcher: throughput threshold: -1
Fetcher: throughput threshold sequence: 5
-finishing thread FetcherThread2, activeThreads=7
-finishing thread FetcherThread3, activeThreads=6
-finishing thread FetcherThread4, activeThreads=5
-finishing thread FetcherThread5, activeThreads=4
-finishing thread FetcherThread6, activeThreads=3
-finishing thread FetcherThread7, activeThreads=2
-finishing thread FetcherThread0, activeThreads=1
-finishing thread FetcherThread8, activeThreads=0
-finishing thread FetcherThread9, activeThreads=0
0/0 spinwaiting/active, 0 pages, 0 errors, 0.0 0.0 pages/s, 0 0 kb/s, 0 URLs in 0 queues
-activeThreads=0
ParserJob: resuming:    false
ParserJob: forced reparse:  false
ParserJob: parsing all
FetcherJob: threads: 10
FetcherJob: parsing: false
FetcherJob: resuming: false
FetcherJob : timelimit set for : -1
Using queue mode : byHost
Fetcher: threads: 10
QueueFeeder finished: total 0 records. Hit by time limit :0
-finishing thread FetcherThread1, activeThreads=0
Fetcher: throughput threshold: -1
Fetcher: throughput threshold sequence: 5
-finishing thread FetcherThread2, activeThreads=7
-finishing thread FetcherThread3, activeThreads=6
-finishing thread FetcherThread4, activeThreads=5
-finishing thread FetcherThread5, activeThreads=4
-finishing thread FetcherThread6, activeThreads=3
-finishing thread FetcherThread7, activeThreads=2
-finishing thread FetcherThread0, activeThreads=1
-finishing thread FetcherThread8, activeThreads=0
-finishing thread FetcherThread9, activeThreads=0
0/0 spinwaiting/active, 0 pages, 0 errors, 0.0 0.0 pages/s, 0 0 kb/s, 0 URLs in 0 queues
-activeThreads=0
ParserJob: resuming:    false
ParserJob: forced reparse:  false
ParserJob: parsing all
FetcherJob: threads: 10
FetcherJob: parsing: false
FetcherJob: resuming: false
FetcherJob : timelimit set for : -1
Using queue mode : byHost
Fetcher: threads: 10
QueueFeeder finished: total 0 records. Hit by time limit :0
Fetcher: throughput threshold: -1
Fetcher: throughput threshold sequence: 5
-finishing thread FetcherThread9, activeThreads=9
-finishing thread FetcherThread0, activeThreads=8
-finishing thread FetcherThread1, activeThreads=7
-finishing thread FetcherThread2, activeThreads=6
-finishing thread FetcherThread3, activeThreads=5
-finishing thread FetcherThread4, activeThreads=4
-finishing thread FetcherThread5, activeThreads=3
-finishing thread FetcherThread6, activeThreads=2
-finishing thread FetcherThread7, activeThreads=1
-finishing thread FetcherThread8, activeThreads=0
0/0 spinwaiting/active, 0 pages, 0 errors, 0.0 0.0 pages/s, 0 0 kb/s, 0 URLs in 0 queues
-activeThreads=0
ParserJob: resuming:    false
ParserJob: forced reparse:  false
ParserJob: parsing all 
```

运行时/本地/conf/nutch-site.xml

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>

<!-- Put site-specific property overrides in this file. -->

<configuration>
<property>
 <name>http.agent.name</name>
 <value>My Nutch Spider</value>
</property>

<property>
 <name>storage.data.store.class</name>
 <value>org.apache.gora.hbase.store.HBaseStore</value>
 <description>Default class for storing data</description>
</property>
<property>
  <name>http.robots.agents</name>
  <value>My Nutch Spider</value>
  <description>The agent strings we'll look for in robots.txt files,
  comma-separated, in decreasing order of precedence. You should
  put the value of http.agent.name as the first agent name, and keep the
  default * at the end of the list. E.g.: BlurflDev,Blurfl,*
  </description>
</property>
<property>
  <name>http.content.limit</name>
  <value>262144</value>
</property>
</configuration> 
```

运行时/本地/conf/regex-urlfilter.txt

```
# accept anything else
+. 
```

运行时/本地/urls/seed.txt

```
http://nutch.apache.org/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:54:13.697

当您使用 Nutch 2.X 时，您需要按照相关[教程](http://wiki.apache.org/nutch/Nutch2Tutorial)进行操作。您提供的是 Nutch 1.x。Nutch 2.X 使用 HBase、Cassandra 等外部存储后端，因此不会形成 crawldb、segments 等目录。

另外，使用`bin/crawl`脚本而不是`bin/nutch`命令。

# java - 如何在 ArrayList 中找到最小值以及索引号？（爪哇）

> ID：15995458
> 
> 赞同：66
> 
> 时间：2013-04-14T03:27:37.790
> 
> 标签：java, arraylist

我需要在 Java 中的数组列表中获取最小值的索引值。我的arraylist 包含几个浮点数，我正在想办法获得最小浮点数的索引号，这样我就可以在代码的其他地方使用该索引号。我是初学者，所以请不要讨厌我。谢谢！

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-04-14T03:34:44.397

您可以使用[Collections.min](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#min%28java.util.Collection%29)和[List.indexOf](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#indexOf%28java.lang.Object%29)：

```
int minIndex = list.indexOf(Collections.min(list)); 
```

如果只想遍历列表一次（上面可能会遍历两次）：

```
public static <T extends Comparable<T>> int findMinIndex(final List<T> xs) {
    int minIndex;
    if (xs.isEmpty()) {
        minIndex = -1;
    } else {
        final ListIterator<T> itr = xs.listIterator();
        T min = itr.next(); // first element as the current minimum
        minIndex = itr.previousIndex();
        while (itr.hasNext()) {
            final T curr = itr.next();
            if (curr.compareTo(min) < 0) {
                min = curr;
                minIndex = itr.previousIndex();
            }
        }
    }
    return minIndex;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-14T03:37:34.147

这应该使用内置函数来完成。

```
public static int minIndex (ArrayList<Float> list) {
  return list.indexOf (Collections.min(list)); } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-14T03:33:44.500

尝试这个：

```
public int getIndexOfMin(List<Float> data) {
    float min = Float.MAX_VALUE;
    int index = -1;
    for (int i = 0; i < data.size(); i++) {
        Float f = data.get(i);
        if (Float.compare(f.floatValue(), min) < 0) {
            min = f.floatValue();
            index = i;
        }
    }
    return index;
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-01-25T05:35:25.073

有一种更简单的方法可以在数组列表中找到最小整数：

```
int min = array.get(0);
        for (int i : array){
            min = min < i ? min : i;
        } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-01-20T11:55:03.957

```
public static int minIndex (ArrayList<Float> list) {
  return list.indexOf (Collections.min(list));
 }
System.out.println("Min = " + list.get(minIndex(list)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-01T05:42:43.490

1.  用浮点数声明一个数组列表。

2.  `Collection.min()`- 查找列表中的最小元素。

3.  `List.indexOf()`- 找到最小元素的索引。

```
public class Test {

    public static void main(String[] args) {

        ArrayList<Float> ary = new ArrayList<Float>();
        ary.add((float) 3.0);
        ary.add((float) 6);
        ary.add((float) 2);
        ary.add((float) 1.3);
        ary.add((float) 4.2);
        int indx = minIndex(a);
        System.out.println(indx);
    }

    public static int minIndex(ArrayList<Float> list) {
        return list.indexOf(Collections.min(list));
    }

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-04-14T03:50:29.537

您必须遍历整个数组并保留两个辅助值：

*   你找到的最小值（在你接近终点的路上）
*   找到最小值的位置的索引

假设您的数组名为*myArray*。在此代码的末尾*minIndex*具有最小值的索引。

```
var min = Number.MAX_VALUE; //the largest number possible in JavaScript
var minIndex = -1;

for (int i=0; i<myArray.length; i++){
   if (myArray[i] < min){
      min = myArray[i];
      minIndex = i;
   }
} 
```

这是假设最坏的情况：一个完全随机的数组。这是一个 O(n) 算法或*n 阶*算法，这意味着如果您的数组中有*n 个*元素，那么您必须在知道答案之前查看所有元素。O(n) 算法是最糟糕的，因为它们需要大量时间来解决问题。

如果您的数组已排序或具有任何其他特定结构，则可以优化算法以更快。

话虽如此，除非您有一个包含数千个值的庞大数组，否则不要担心优化，因为 O(n) 算法和更快的算法之间的差异不会很明显。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-05-09T05:07:44.723

这就是我所做的。我首先找到最小值，然后在找到最小值之后，将其从 ArrayList 中删除。

```
ArrayList<Integer> a = new ArrayList<>();
a.add(3);
a.add(6);
a.add(2);
a.add(5);

while (a.size() > 0) {
    int min = 1000;
    for (int b:a) {
        if (b < min)
            min = b;
    }
    System.out.println("minimum: " + min);
    System.out.println("index of min: " + a.indexOf((Integer) min));
    a.remove((Integer) min);
} 
```

# java - 这个简单的java程序的结果？

> ID：15995459
> 
> 赞同：2
> 
> 时间：2013-04-14T03:27:41.730
> 
> 标签：java, inheritance

```
public class NotActuallyImmutable {
  private final int x;

  public NotActuallyImmutable(int x) {
    this.x = x;// line 1
  }

  public int getX() {
    return x;
  }
}

public class Mutable extends NotActuallyImmutable {
  private int x = 123;

  public Mutable(int x) {
    super(x);
  }

  public int getX() {
    return x++;
  }
} 
```

现在在我的主班

```
 NotActuallyImmutable n = new Mutable(42); // line2
    int x = n.getX();
    System.out.println("x is"+x); 
```

我期待输出为 42，但它返回输出为 123。我期待 42，因为在第 2 行我正在制作 Mutable 类的对象，然后在第 1 行我将值设置为 42。所以当我这样做时`n.getX()`我应该得到这个最新值不是默认值 123。我知道我错过了一些东西，但无法弄清楚它背后的逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:30:48.557

问题是字段`x`中的字段和类中`Mutable`的字段不一样。返回的是in （因为调用的是，不是）。`x``NotActuallyImmutable``x``getX()``Mutable``getX()``Mutable.getX()``NotActuallyImmutable.getX()`

请注意，如果您从 中删除了实例字段`Mutable`，那么您将遇到编译器错误，因为`NotActuallyImmutable.x`它是私有的，`NotActuallyImmutable`并且不能被`Mutable`.

如果您创建了`NotActuallyImmutable.x`一个受保护的字段，`Mutable.x`则会对其进行遮蔽，并且您仍然会有相同的行为。如果您`Mutable.x`在这种情况下删除，您仍然会遇到编译器错误，因为您试图增加一个`final`字段。

如果您删除`Mutable.getX()`，那么`x`将返回的`getX()`将是`NotActuallyImmutable.x`，尽管在 中存在另一个同名字段`Mutable`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T03:34:47.470

`private int x`in`Mutable`和`private int x`in是完全不同的`NotActuallyImmutable`字段，只是具有相同的名称。

这对编译器来说不是问题，因为您无法访问`private`另一个类的字段。因此，就编译器而言，当您定义 时`Mutable`，`x`in`NotActuallyImmutable`是不可见的，也可能不存在。

这当然会让程序员感到困惑。如果您将其中一个字段重命名为`y`（并将 getter 方法重命名为`getY`），则行为似乎更加直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T03:35:37.887

```
NotActuallyImmutable n = new Mutable(42); // line2 
```

这意味着您有一个 NotActuallyImmutable 类型的对象，但创建的对象的实例是可变的。因此，在这段代码中，您处理的 Mutable 对象将返回 123。因为您传递的数字保存在 NotActuallyImmutable 中而不是 Mutable 中，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:36:32.373

我同意上述答案中给出的很好的解释。但要简单地概括一下最后的理解。当我在做 new Mutable(42).getX() 时，jvm 首先会查看 Mutable 对象以获取不在 NotActuallyImmutable 内部的 X 的值。如果我从 Mutable 中删除 getX() 方法，我会得到预期的（根据我的期望）值，即 42。

这个例子变得凌乱，因为变量名称，即 X 在父类和子类中相同，但有助于理解概念

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T03:37:21.270

`n`有两个`x`在不同上下文中可见的不同值，父类的私有成员变量和子类的私有成员变量。

```
NotActuallyImmutable n = new Mutable(42); // line2 
```

创建一个新的`Mutable`. 执行`parent(x)`将父类设置`x`为 42。

```
int x = n.getX(); 
```

`n`是一个`Mutable`实例，所以这调用`Mutable`'s`getX()`来返回(123)`Mutable`的值`x`而不是父级的值。

# node.js - Node.js 将变量传递给路由

> ID：15995461
> 
> 赞同：15
> 
> 时间：2013-04-14T03:28:34.047
> 
> 标签：node.js, express

我有非常简单的 node.js noob 问题。如何将变量传递给导出的路由函数？

路由文件

```
exports.gettop = function(n, req, res) {
  console.log(n);
  res.send(200);
}; 
```

服务器文件

```
app.get('/api/v1/top100', routes.gettop(100)); 
```

错误：.get() 需要回调函数，但得到了 [object Undefined]

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-14T04:01:20.423

对于您的示例，您希望创建一个新函数，该函数将围绕您的`n`. 在您的情况下，您正在执行`gettop`并传递返回值以表示您的路由，这意味着`gettop`需要返回路由处理程序。

```
exports.gettop = function(n){
    return function(req, res) {
        console.log(n);
        res.send(200);
    };
}; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-14T08:24:39.717

由于您的代码看起来像是在使用 express，您可以使用 express app locals 和 express result locals 将变量传递给您的路由。虽然其他答案提出了可行的解决方案，但我认为使用快速机制来设置这些变量并不那么突兀。

使用响应本地变量（[请参阅 Express API 参考](http://expressjs.com/api.html#res.locals)），您首先必须在中间件或路由中的某处设置一个变量。我将展示中间件方法

```
app.use(function(req,res, next) {
  res.locals.top = 200;
  next();
}); 
```

然后在您的路线中，您可以通过 res.locals.variablename 访问此属性

```
exports.gettop = function(req, res) {
  console.log(res.locals.top);
  res.send(200);
}; 
```

如果您想在应用程序范围内进行这些设置，更好的方法是使用应用程序本地（[请参阅 Express API 参考](http://expressjs.com/api.html#app.locals)）

要设置应用程序本地变量，您可以使用

```
app.locals.top = 100; 
```

要从您的路线访问此变量，请使用

```
exports.gettop = function(req, res){
  console.log(req.app.locals.top);
  res.send(200);
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-14T05:06:29.930

作为 loganfsmyth 的（非常有效的！）解决方案的替代方案，您可以将`gettop`函数保持原样并创建一个部分函数：

```
app.get('/api/v1/top100', routes.gettop.bind(null, 100)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-14T19:33:36.690

尝试

```
app.post('/find_user',
   require('./naas/autentication'),
   require('./naas/authorization')(paramForRouter),
   require('./routes/users')); 
```

在哪里

require('./naas/autentication') 例如

```
module.exports = function (req, res, next) {next();} 
```

并且 require('./naas/authorization')(paramForRouter) 是

```
module.exports = function (paramForRouter) {
    return function (req, res, next) {
        this.param = paramForRouter;
        console.log("Param value",this.param);
        next();
    };
}; 
```

# c++ - & 在函数声明返回类型

> ID：15995463
> 
> 赞同：1
> 
> 时间：2013-04-14T03:28:44.480
> 
> 标签：c++, function, return, memory-address

下面的 & 是什么意思？

```
class Something
{
 public:
   int m_nValue;

   const int& GetValue() const { return m_nValue; }
   int& GetValue() { return m_nValue; }
}; 
```

此代码取自[此处](http://www.learncpp.com/cpp-tutorial/810-const-class-objects-and-member-functions/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T03:32:11.047

[这意味着通过引用返回值](http://www.tutorialspoint.com/cplusplus/returning_values_by_reference.htm)：

```
 int& GetValue()
     ^ Means returns a reference of int 
```

喜欢

```
int i = 10;

int& GetValue() {
    int &j = i;
    return j;
} 
```

`j`是`i`一个全局变量的引用。

注意：在 C++ 中，您有三种变量：

1.  例如值变量`int i = 10`。
2.  引用变量例如`int &j = i;` 引用变量创建其他变量的别名，两者都是相同内存位置的符号名称。
3.  地址变量：`int* ptr = &i`. 称为指针。指针变量用于保存变量的地址。

声明中的尊重

```
 Pointer:
           int  *ptr = &i;
                ^      ^  & is on the left side as an address operation
                |
                * For pointer variable.

   Reference:

           int &j = i;
               ^
               | & on the right side for reference 
```

请记住，在 C 语言中，您只有两种变量值和地址（指针）。引用变量在 C++ 中，并且引用像值变量一样易于使用，并且像指针变量一样功能强大。

指针类似于：

```
 j = &i;

                      i                   j
                   +------+            +------+
                   | 10   |            | 200  |
                   +------+            +------+
                     202                 432 
```

参考如下：

```
 int &j = i;

                    i, j
                   +------+
                   | 10   |
                   +------+ 
```

没有为 j 分配内存。它是内存中同一位置的别名。

[*C++中的指针变量和引用变量有什么区别？*](http://www.blogosfera.co.uk/2008/09/what-are-the-differences-between-pointer-variable-and-reference-variable-in-c/)

1.  指针可以重新分配任意次数，而引用在初始化后不能重新分配。
2.  指针可以指向 NULL，而引用永远不能指向 NULL
3.  您不能像使用指针那样获取引用的地址
4.  没有“引用算术”（但您可以获取引用指向的对象的地址并对其进行指针算术，如 &obj + 5 中那样）。

[因为正如您评论的那样，您对指针和引用变量之间的差异有疑问，所以我强烈建议您从我在回答中给出的链接中阅读相关页面。]

# java - 如何将 Google API 的 json-simple jar 安装到 maven 项目中？

> ID：15995467
> 
> 赞同：1
> 
> 时间：2013-04-14T03:29:04.933
> 
> 标签：java, import, maven-2

我刚刚用 maven 做了一个 java 项目：

```
mvn archetype:create -DgroupId=com.company -DartifactId=\
myproject -DarchetypeArtifactId=maven- archetype-quickstart 
```

然后需要导入一个第三方jar，路径是~/Downloads/json-simple-1.1.1.jar，我尝试了以下命令：

```
mvn -e install:install-file -Dfile=~/Downloads/json_simple-1.1.1.jar\
-DgroupiId=org.json.simple - DartifactId=json_simple -Dversion=1.1.1 -Dpackaging=jar 
```

但发生错误：

```
[ERROR] BUILD ERROR  
[INFO] Missing group, artifact, version, or packaging information 
```

我正在使用 maven 2.2.1、java 1.6.0_35 和 Ubuntu 11.10。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:58:15.773

依赖项已经在 Maven 中央存储库中。只需以下对项目 pom 的依赖即可完成：

```
<dependency>
    <groupId>com.googlecode.json-simple</groupId>
    <artifactId>json-simple</artifactId>
    <version>1.1.1</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:38:42.360

您不需要在本地安装 json_simple。它位于 Maven 中心。转到[http://search.maven.org](http://search.maven.org)并搜索。

```
groupid:     com.googlecode.json-simple
artifactid:  json-simple
version      1.1.1 
```

最好满足来自 Central 的依赖，而不是依赖本地安装的依赖。首先，它将使其他人更容易构建您的代码。

至于构建问题，我怀疑您在项目的“POM.xml”文件的依赖项部分中犯了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:38:42.703

不记得确切的语法，但您可以执行以下操作：

因此，将其作为依赖项添加到要构建的项目的 pom 文件中

构建将失败，因为这个 jar 还不是 repo 的一部分

但是 maven 还会生成命令以在 repo 复制粘贴中安装 jar，更改 jar 的路径并执行。

这应该解决目的。

但看起来这个 jar 已经是某个 repo.gGoogle 的一部分，它可能只需要添加一个新的 repo

# c++ - 如果我将派生指针转换为基指针，这两个指针是否保证具有相同的值？

> ID：15995469
> 
> 赞同：1
> 
> 时间：2013-04-14T03:29:36.140
> 
> 标签：c++, inheritance, polymorphism

假设我没有使用多重继承或虚拟继承，C++ 标准是否保证如果我将 a 转换`Derived*`为 a`Base*`两个指针将具有完全相同的值？例如，以下代码是否总是调用`success()`，即使`Derived`和/或`Base`具有虚函数？

```
Derived* d = new Derived;
Base* b = d;
if (((void*)b) == ((void*)d)) 
    success();
else
    failure(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:01:58.927

如果基类没有虚函数而派生类有，则指针可能会有所不同，因为基类的`D`对象中不存在 vtable 指针。

# jung - JUNG Pagerank 边缘权重问题

> ID：15995474
> 
> 赞同：0
> 
> 时间：2013-04-14T03:30:43.860
> 
> 标签：jung, pagerank, gremlin

我是 Gremlin 的新手，我正在尝试使用 JUNG 的边缘权重来实现 pagerank 算法。这些是我采取的步骤。我安装了 2.0.0.0 版本的 Gremlin。我使用 R 中的 iGraph 包创建了一个 .graphml 文件，并将其加载到 gremlin 中。

```
import edu.uci.ics.jung.algorithms.scoring.PageRank   
g1 = new TinkerGraph()      
g1.loadGraphML('file path.graphml') 
```

我的 g1 图具有以下边缘属性：

```
 g1.E.map
==>{weight=1, freq=1}
==>{weight=1, freq=1}
==>{weight=2, freq=2}
==>{weight=1, freq=1}
==>{weight=1, freq=1}
==>{weight=1, freq=1}
==>{weight=1, freq=1}
==>{weight=1, freq=1}
==>{weight=2, freq=2}

gremlin> g1.V.map
==>{name=a}
==>{name=b}
==>{name=c}
==>{name=d}
==>{name=e}
==>{name=f}
==>{name=g}
==>{name=h}
==>{name=i}
==>{name=k}

j = new GraphJung(g1)    

t = new EdgeWeightTransformer("weight",true, false)
pr = new PageRank<Vertex,Edge>(j, t, 0.15d)  
pr.evaluate()      
j.getVertices().collect{[it, pr.getVertexScore(it)]} 
```

但是，我的结果是

```
==>[v[n1], 0.046875]
==>[v[n0], 0.046875]
==>[v[n5], 0.046875]
==>[v[n4], 0.046875]
==>[v[n3], 0.046875]
==>[v[n2], 0.046875]
==>[v[n9], 0.046875]
==>[v[n8], 0.046875]
==>[v[n7], 0.046875]
==>[v[n6], 0.046875] 
```

这是不正确的。请有人帮我理解代码中有什么问题。我还尝试通过以下方法检查变压器对 j 的边缘权重的影响：j.getEdges().t。

当我这样做时，我得到 NULLS。

但我知道当我跑步时这些边有权重：

```
j.getEdges().collect{[it, it.weight]} 
```

我得到以下结果：

```
==>[e[3][n1-_default->n5], 1]

==>[e[2][n0-_default->n4], 1]

==>[e[1][n0-_default->n3], 2]

==>[e[0][n0-_default->n2], 1]

==>[e[7][n1-_default->n8], 1]

==>[e[6][n1-_default->n7], 1]

==>[e[5][n1-_default->n6], 1]

==>[e[4][n1-_default->n1], 1]

==>[e[8][n1-_default->n9], 2] 
```

最后，我无法为我的顶点创建自动键。我试过了

```
g1.createAutoIndex('test', Vertex.class, ['name'] as Set) 
```

并得到以下错误：

```
 No signature of method: groovy.lang.MissingMethodException.createAutoIndex() is applicable for argument types: () values: [] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T17:12:09.193

我还花了很长时间才找到如何使用 Jung 实现权重边图的 pagerank。下面是伪代码，你应该使用 GrepCode 来查看 Pagerank 的详细实现。

```
For(Edge e: edges){  // Edge is a user-defined class
    graph.add(edgeCount,e.getStart,e.getEnd);
    map.put(edgeCount,e.getWeight); // map is HashMap
    edgeCount++;
}
Transformer edge_weights = MapTransformer.getInstance(map) //Key Step!
Pagerank<Vertex,Edge> ranker = new Pagerank<Vertex,Edge>(graph, edge_weights, alpha); 
```

我建议你看看这个例子： [https ://github.com/lintool/Cloud9/blob/master/src/dist/edu/umd/cloud9/example/pagerank/SequentialPageRank.java](https://github.com/lintool/Cloud9/blob/master/src/dist/edu/umd/cloud9/example/pagerank/SequentialPageRank.java)

您可以使用我的伪代码基于此示例进行修改。

# css - 使用 zurb 基础时如何让 box-sizing 工作？

> ID：15995477
> 
> 赞同：0
> 
> 时间：2013-04-14T03:31:04.193
> 
> 标签：css, sass, zurb-foundation

尝试使用 zurbs 基础，我发现两列设置为并排排列，实际上是“阶梯式”。即，他们中的一个最终坐在另一个之下。

此时，我只使用了两个 sass 文件：_foundation-global.scss 和 _grid.scss

我发现问题出在网格默认值内：框的基础默认填充扩展了柱状框的宽度。结果，总和宽度超出了 .row。

这让我很困惑：基础网格文档是这样说的：

“Foundation 使用 box-sizing:border-box 以便边框和填充不会影响列的整体宽度，使数学变得非常简单”

与此相反，我发现这些框没有设置为 box-sizing:border-box。

因此，我当然在新样式表中包含了新规则，将 div、文章和部分设置为边框框。

但是，我随后发现此设置对 Firefox 没有帮助。原来firefox不支持这个属性。铬似乎。我还没有在其他浏览器上测试过。

那么，这是怎么回事？当然基础应该支持Firefox，我只是错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:41:57.647

Firefox 目前仍需要前缀： [http ://caniuse.com/#feat=css3-boxsizing](http://caniuse.com/#feat=css3-boxsizing)

由于 Foundation 是在 Compass 之上构建的，因此您可以使用`box-sizing`Compass 中的 mixin 来为您处理所有前缀：

```
@import 'compass/css3/box-sizing';

.foo {
    @include box-sizing(border-box);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:41:00.033

前几天我遇到了同样的问题。为了自动应用 box-sizing，你必须把你的列放在一个带有`row`类的 div 中。

但最重要的是，这就是我所缺少的......您还需要将该类与数字类一起应用于`columns`您的列 div (EG `class="large-6 columns`)

```
<div class="row">
  <div class="large-6 columns">...</div>
  <div class="large-6 columns">...</div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T09:01:39.873

我发现将以下代码添加到您的 CSS 可以修复旧版本 Firefox 中的框大小问题。

```
.row,
[class*="block-grid-"]
{
     -moz-box-sizing: border-box;
} 
```

*在 Windows 7 上的 Firefox 16.0.2 上测试*

# sql-server - SQL 插入上的非法 xml 字符

> ID：15995480
> 
> 赞同：9
> 
> 时间：2013-04-14T03:31:52.760
> 
> 标签：sql-server, coldfusion, xml-parsing, coldfusion-9

我正在尝试将以下字符串插入到 sql xml 字段中

```
<?xml version="1.0" encoding="UTF-8"?>
<Response> 
    <Ip>x.x.x.x</Ip>
    <CountryCode>CA</CountryCode> 
    <CountryName>Canada</CountryName>
    <RegionCode>QC</RegionCode> 
    <RegionName>Québec</RegionName> 
    <City>Dorval</City> 
    <ZipCode>h9p1j3</ZipCode> 
    <Latitude>45.45000076293945</Latitude> 
    <Longitude>-73.75</Longitude> 
    <MetroCode></MetroCode> 
    <AreaCode></AreaCode> 
</Response> 
```

插入代码如下所示：

```
INSERT 
    INTO Traffic(... , xmlGeoLocation, ...)
    VALUES (
        ...
        <!--- 
        <cfqueryparam CFSQLType="cf_sql_varchar" value="#xmlGeoLocation#">, 
        --->
        '#xmlGeoLocation#',

        ...
        ) 
```

发生了两件坏事：

1.  魁北克变成了魁北克

2.  我收到一条错误消息 `[Macromedia][SQLServer JDBC Driver][SQLServer]XML parsing: line 8, character 16, illegal xml character`

更新：

传入的测试流大多是单字节字符。

é 是一个两字节字符。特别是 C3A9

我也无法控制传入的 xml 流

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-28T19:08:53.150

我要去掉标题...

我对一个有趣的小撇号有同样的问题。我认为问题在于，当字符串转换为 XML 时，它不再是 UTF-8，但 sql server 正在尝试使用标头对其进行解码。如果是 VARCHAR，则它在客户端的编码中。如果是 NVARCHAR，则为 UTF-16。以下是我测试的一些变体：

SQL (varchar, UTF-8):

```
SELECT CONVERT(XML,'<?xml version="1.0" encoding="UTF-8"?><t>We’re sorry</t>') 
```

错误：

```
XML parsing: line 1, character 44, illegal xml character 
```

SQL（nvarchar，UTF-8）：

```
SELECT CONVERT(XML,N'<?xml version="1.0" encoding="UTF-8"?><t>We’re sorry</t>') 
```

错误：XML 解析：第 1 行，字符 38，无法切换编码

SQL (varchar, UTF-16)

```
SELECT CONVERT(XML,'<?xml version="1.0" encoding="UTF-16"?><t>We’re sorry</t>') 
```

错误：

```
XML parsing: line 1, character 39, unable to switch the encoding 
```

SQL (nvarchar, UTF-16)

```
SELECT CONVERT(XML,N'<?xml version="1.0" encoding="UTF-16"?><t>We’re sorry</t>') 
```

工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:13:02.543

看看 w3 的这个[链接](http://www.w3.org/standards/xml/core)，它告诉我：

> 在 HTML 中，有一些内置字符名称的列表，例如`&eacute;`for é，但 XML 没有。在 XML 中，只有五个内置字符实体：`&lt;`、`&gt;`、`&amp;`和`&quot;`分别`&apos;`用于 <、>、&、" 和 '。您可以在文档类型定义中定义自己的实体，也可以使用任何 Unicode 字符（请参阅下一项）。
> 
> 在 HTML 中，还有数字字符引用，例如`&#38;`for &。您可以引用任何 Unicode 字符，但数字是十进制的，而在 Unicode 表中，数字通常是十六进制的。XML 还允许使用十六进制引用：`&#x26;`例如。

这让我相信，这`&#xE9;`可能适用于 é 角色。

此外，来自 Microsoft 的此[链接](http://msdn.microsoft.com/en-au/library/ms171718.aspx)上的信息指出：

> SQLXML 4.0 依赖于 SQL Server 中提供的对 DTD 的有限支持。SQL Server 允许在 xml 数据类型数据中使用内部 DTD，可用于提供默认值并用扩展内容替换实体引用。SQLXML 将 XML 数据“按原样”（包括内部 DTD）传递给服务器。您可以使用第三方工具将 DTD 转换为 XML Schema (XSD) 文档，并将带有内联 XSD 模式的数据加载到数据库中。

但是，如果您无法控制传入的 XML 流，那么所有这些都无济于事。我怀疑是否可以将 XML 文档中的 é（或任何特殊字符，除了上面提到的内置字符实体）保存到 SQL Server XML 字段中，而无需添加 DTD 或将字符替换为它的十六进制参考对应物。在这两种情况下，您都需要能够在 XML 进入数据库之前对其进行修改。

对于任何想要走“添加 DTD”路线的人来说，这只是一个简单的例子。

以下是如何将内部 DTD 添加到为 é 字符声明实体的 xml 文件中：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE root [<!ENTITY eacute "&#233;">]>
<root>
  <RegionName>Qu&eacute;bec</RegionName>
</root> 
```

如果你去[这里](http://www.w3.org/TR/xhtml1/dtds.html)并在页面“Ctrl+F”上搜索“eacute”，你最终会看到一个包含其他字符示例的列表，你可以将它们复制并粘贴到你自己的内部 DTD 中。

**编辑**

[您当然可以添加上面链接](http://www.w3.org/TR/xhtml1/dtds.html)中指定的所有实体：`<!ENTITY eacute "&#233;"><!ENTITY .. // Next entity>`，或者只是从这个[文件](http://www.w3.org/TR/xhtml1/DTD/xhtml-lat1.ent)中复制它们。我确实理解如何将内部 DTD 添加到您添加到数据库的每个 XML 文件中并不是一个好主意。我很想知道为 1 个文件添加它是否可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:40:16.347

尝试改变这一点：

```
<RegionName>Québec</RegionName> 
```

至：

```
<RegionName><![CDATA[Québec
]]></RegionName> 
```

# php - 对从 While/For 语句返回的数据进行排序？

> ID：15995486
> 
> 赞同：0
> 
> 时间：2013-04-14T03:32:45.270
> 
> 标签：php, html, mysql, echo

我正在尝试回应用户朋友的帖子。基本上是一个类似于您登录时在 facebook 上的主页的系统。目前，在回显某人朋友的帖子时，在该用户的数据库表中，它有一个文本文件的地址。在这种情况下，我的内容是：`1,3`，数字是我朋友的用户 ID。然后在我想回显我朋友帖子的页面中是这样的：

```
 <?php 
            //echo $user_data['friend_list'];
            $file = $user_data['friend_list'];

            if($file != null)
            {
                $myFile = $file;
                $fh = fopen($myFile, 'r');
                $theData = fgets($fh);
                fclose($fh);
                //echo $theData;

                $friend = explode(',', $theData);

                //echo "This is friend array size ".count($friend)."</br>";

                for($i=0; $i < count($friend); $i++)
                {

                    if($i >= 0)
                    {
                        echo "I'm friend ".$i." and I have the User ID ".$friend[$i]."</br>";

                        $result = mysql_query("SELECT * FROM posts WHERE user_id = $friend[$i] ORDER BY timestamp");
                        while($row = mysql_fetch_array($result))
                        {
                          $user_id = $row['user_id'];
                          echo $row['content'] . " " . username_from_user_id($user_id) . " said on ".$row['timestamp'];
                          echo "<br />";
                        }

                        echo "<br/>";
                    }

                }

            }

            ?> 
```

目前返回/回显这个：

```
 I'm friend 0 and I have the User ID 1
 Hey, this is the first post. Well, I hope you like this network! harrison said on 2013-03-25 22:50:52
 Hey, this is the second post ever on this website. I am testing out retrieving text from a database! harrison said on 2013-03-25 22:52:52
 I really like the post system so far! harrison said on 2013-03-25 22:57:52
 Okay, so far on user's profiles, it shows the six latest posts. harrison said on 2013-03-25 23:06:55
 Hey Chinzo! harrison said on 2013-04-13 17:11:46

 I'm friend 1 and I have the User ID 3
 Hey! matt said on 2013-03-29 00:07:05
 haha matt said on 2013-03-29 01:31:12 
```

我怎样才能按时间戳顺序回显所有帖子？我目前正在对每个用户的帖子进行单独排序，但不是将两个用户的所有帖子`1 and 3`作为一个整体进行排序。我怎么能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:56:34.473

不是一次`for`处理一个朋友的循环，而是在一个查询中获取所有帖子：

```
$result = mysql_query("SELECT * FROM posts WHERE user_id IN ($theData) ORDER BY timestamp") or die ("Query error: ". mysql_error());

while ($row = mysql_fetch_assoc($result)) {
  echo $row['content'] . " " . username_from_user_id($row['user_id']) . " said on ".$row['timestamp']. "<br>";
} 
```

# php - 比特币 JSON-RPC

> ID：15995491
> 
> 赞同：0
> 
> 时间：2013-04-14T03:33:14.280
> 
> 标签：php, json-rpc, bitcoin

我有兴趣创建一个使用比特币的 php 应用程序。到目前为止，我已经了解了所有内容，除了我应该作为这些变量提供的内容：

```
$btc_connect = array("user" => "youusername",             // RPC Username
        "pass" =>   "yourpassword",                   // RPC Password
        "host" =>   "127.0.0.1",                      // RPC Hostname/IP
        "port" =>   8321);                            // RPC Port

$mybtc = new jsonRPCClient("http://{$btc_connect['user']}:{$btc_connect['pass']}@{$btc_connect['host']}:{$btc_connect['port']}"); 
```

我到处搜索，包括 bitcoin.org 网站，试图找出如何设置它。有什么我必须在我的服务器上安装的吗？

我有一个网络服务器，只要我知道如何开始，就可以进行设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:52:56.217

你应该在服务器上设置一个 bitcoind 守护进程。然后，您设置了一个 bitcoin.conf 文件（位置取决于您的操作系统），其中包含以下行：

```
rpcuser=someusernamehere
rpcpassword=somepasswordhere
rpcport=8332 
```

rpcport 默认为 8332，因此您可以忽略它。您将使用标志守护程序运行 bitcoind。另外两行给你用户和通行证。然后在该数组中填写选定的用户/密码、服务器的 IP 和 8332 作为端口。

见这里：[https ://en.bitcoin.it/wiki/Running_Bitcoin#Bitcoin.conf_Configuration_File](https://en.bitcoin.it/wiki/Running_Bitcoin#Bitcoin.conf_Configuration_File)

# node.js - 使用 PassortJS 将本地用户连接到 Facebook/Twitter

> ID：15995494
> 
> 赞同：1
> 
> 时间：2013-04-14T03:33:52.987
> 
> 标签：node.js, passport.js

我有一个现有的用户群，我想允许他们链接到他们的 Facebook/Twitter 帐户。看起来我可以使用passportjs，但有困难，

现在，在他们的用户/密码中传递一个 url，我做了一个本地策略，然后查找用户。然后我想执行我认为的授权。我收到 facebook 提示询问我是否要允许，我用 accessToken 打了回调，但是我无法将该令牌绑定到我的数据库中的现有用户，因为我现在看到了获取请求信息的方法。

```
passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(user, done) {
    Users.findOne({_id: user._id}, function(err, user) {
        return done(err, user);
    });
});

passport.use(new LocalStrategy({ passReqToCallback: true }, function(req, username, password, done) {
        Users.findOne({_id: username}, function(err, user) {
            return done(null, user);
        });
    }
));

passport.use(new FacebookStrategy({
    clientID: 'xxxx',
    clientSecret: 'xxxx',
    callbackURL: "http://xxxx/facebook/callback",
    passReqToCallback: true
  },
  function(req, accessToken, refreshToken, profile, done) {

    //  How would I get access to the user found in the LocalStrategy here so I can associate the accessToken to the user in the db?
    console.log(accessToken);
    console.log(refreshToken);

    var err = null;
    var user = {};
    return done(err, user);

  }
));

server.get('/facebook', passport.authenticate('local', { failureRedirect: '/login', failureFlash: true }),
    function (req, res) {
        if (req && req.user) {
            passport.authorize('facebook', { scope: ['publish_actions','manage_pages'] })(req, res);
        }
});

server.get('/facebook/callback',
  passport.authorize('facebook', { failureRedirect: '/facebook/failure', successRedirect: '/facebook/success' }),
  function(req, res) {
    res.redirect('/');
  }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:05:55.413

假设用户已经使用本地策略登录，用户应该在请求中作为 req.user 可用。然后，您可以将 facebook 凭据信息添加到现有用户对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T08:11:01.520

检查您在 Facebook 回调中重定向到的 URL，并确保在本地登录和从 Facebook 定向到回调的时间之间没有生成不同的会话。

我有一个类似的问题让我发疯，这是因为我的重定向不同。

例如，我`http://localhost:3000`在 Chrome 中导航，登录并且 req.user 设置正确。在我的 Facebook 开发设置和 Passport 配置中，我重定向到`http://hostname.local:3000/auth/facebook`.

只要您的本地登录和重定向共享同一个会话，那么 req.user 就应该可用。

# ruby-on-rails - 获取名称的不同首字母列表

> ID：15995495
> 
> 赞同：1
> 
> 时间：2013-04-14T03:34:05.147
> 
> 标签：ruby-on-rails, activerecord

环境：Rails 3.2.13，SQLite 在开发中，PostgreSQL 在生产中

使用 Active Record，我试图从数据库中的所有名字中获取唯一首字母的列表。例如，如果我有名字（Alex、Billy、Bob、Dave、Jack、James、Jen、Sam、Steve、Stewart、Victor），我会尝试获取字母（A、B、D、J、S、V ) 来自数据库。

我已经能够进入 Rails DB 控制台并查询 SQLite 并获得我想要使用的内容：

```
SELECT DISTINCT SUBSTR(last_name,1,1) FROM people ORDER BY last_name; 
```

但是无法让它在 Rails 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:36:39.687

例如，您可以使用

```
User.all.map{|u| u.name[0]}.uniq 
```

但这是在记忆中。如果需要在 SQL 中进行，可以使用[find_by_sql](http://apidock.com/rails/ActiveRecord/Base/find_by_sql/class)

# c - C中不同数据类型的连续内存分配？

> ID：15995507
> 
> 赞同：0
> 
> 时间：2013-04-14T03:35:32.527
> 
> 标签：c, memory-management

我正在尝试编写一个包含固定 14 个起始字符并以不同内容结尾的字符串（完全是 char 数组）。可变位包含 2 个浮点数和 1 个 32 位整数，它们将被单独视为数组中的 4 个 1 字节字符，以逗号分隔。它可以通过以下代码来说明，由于某些明显的原因（*char 不能分配给 *float），它无法编译。那么，我能做些什么来绕过它呢？

```
char *const comStr = "AT+UCAST:0000=0760,0020,0001\r"; // command string

float *pressure;
float *temperature;
uint32_t *timeStamp;

pressure = comStr + 14; // pressure in the address following the '=' in command string

temperature = comStr + 18; // temperature in the address following the 1st ',' in command string

timeStamp = comStr + 22; // time stamp in the address following the 2nd ',' in command string 
```

我对 C 语言中的 struct 和 union 之类的东西有一个不清楚的记忆，它严格保留了在“结构”中定义变量的内存分配顺序。也许是这样的：

```
typedef struct
{
  char[14] command;
  float *pressure;
  char comma1;
  float *temperature;
  char comma2;
  uint32_t *time_stamp;
  char CR;
}comStr; 
```

这种结构是否保证 comStr-> command[15] 给了我*压力的第一个/最后一个字节（取决于字节序）？或者有没有其他特殊的结构可以瞒着我？

（注意：comStr-> command[15] 不会在以后的代码中进行评估，因此超出索引边界在这里不是问题。这里唯一重要的是内存是否连续分配以便硬件获取持续从内存地址开始的 29 个字节（comStr-> 命令）给了我我想要的字符串）。

ps 在写这篇文章的时候，我想出了一个主意。我可以只使用 memcpy() 吗？） memcpy 有 void* 类型的参数，希望它能工作！我现在要试试！无论如何，所有冰雹stackOverflow！

编辑：我应该让自己更清楚，对于任何误导和误解，我深表歉意！我要构造的字符数组是通过UART逐字节发送的。为此，如果将字符数组的起始存储器地址和长度提供给 DMA 系统，则将使用 DMA 系统将数组自动逐字节传输到发送缓冲区。所以字符数组必须连续存储在内存中。我希望这能让问题更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:08:29.167

这个提议的结构：

```
typedef struct
{
  char[14] command;
  float *pressure;
  char comma;
  float *temperature;
  char comma;
  uint32_t *time_stamp;
  char CR;
}comStr; 
```

不会帮助您满足您的要求：

> `comStr->command`这里唯一重要的是内存是否是连续分配的，以便从内存地址（

请注意，您不能有两个同名的成员；例如，您需要使用`comma1`和`comma2`。此外，数组维度位于错误的位置。

一个问题是结构中会有填充字节。

另一个问题是指针将保存结构外部的地址（因为结构内部没有任何有效的东西可供它们指向）。

目前尚不清楚你在追求什么。一个字符串中的 4 个字节只能表示非常有限的浮点值范围。如果您追求二进制数据 I/O，那么您可以删除指针和逗号：

```
typedef struct
{
  char     command[14];
  float    pressure;
  float    temperature;
  uint32_t time_stamp;
}comStr; 
```

如果你想要逗号，那么你将不得不更加努力：

```
typedef struct
{
  char     command[14];
  char     pressure[4];
  char     comma1;
  char     temperature[4];
  char     comma2;
  char     time_stamp[4];
  char     CR;
} comStr; 
```

您必须仔细加载数据：

```
struct comStr com;
float         pressure = ...;
float         temperature = ...;
uint32_t      time_stamp = ...;

assert(sizeof(float) == 4);
...
memmove(&com.pressure, &pressure, sizeof(pressure));
memmove(&com.temperature, &temperature, sizeof(temperature));
memmove(&com.time_stamp, &time_stamp, sizeof(time_stamp)); 
```

您必须使用一组类似的内存副本解压缩。请注意，您将无法对结构使用简单的字符串操作；`pressure`在结构的任何或所有,`temperature`和`time_stamp`部分中可能有零字节。

* * *

### 结构填充

```
#include <stddef.h>
#include <stdio.h>
#include <stdint.h>

typedef struct
{
  char      command[14];
  float    *pressure;
  char      comma1;
  float    *temperature;
  char      comma2;
  uint32_t *time_stamp;
  char      CR;
} comStr;

int main(void)
{
    static const struct
    {
        char    *name;
        size_t   offset;
    } offsets[] =
    {
        { "command",     offsetof(comStr, command)     },
        { "pressure",    offsetof(comStr, pressure)    },
        { "comma1",      offsetof(comStr, comma1)      },
        { "temperature", offsetof(comStr, temperature) },
        { "comma2",      offsetof(comStr, comma2)      },
        { "time_stamp",  offsetof(comStr, time_stamp)  },
        { "CR",          offsetof(comStr, CR)          },
    };
    enum { NUM_OFFSETS = sizeof(offsets)/sizeof(offsets[0]) };

    printf("Size of comStr = %zu\n", sizeof(comStr));
    for (int i = 0; i < NUM_OFFSETS; i++)
        printf("%-12s  %2zu\n", offsets[i].name, offsets[i].offset);

    return 0;
} 
```

Mac OS X 上的输出：

```
Size of comStr = 64
command        0
pressure      16
comma1        24
temperature   32
comma2        40
time_stamp    48
CR            56 
```

请注意该结构在 64 位机器上的大小。每个指针都是 8 字节，并且是 8 字节对齐的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:54:57.370

您的问题要涵盖的各种问题。我将对其中的一些问题进行一些尝试。

*   保证结构中成员的顺序与您声明它们的顺序相同。但是这里有一个不同的问题 - 填充。检查这个 - [http://c-faq.com/struct/padding.html](http://c-faq.com/struct/padding.html)并在那里关注其他链接/问题
*   接下来的事情是你错误地认为像“125”这样的东西是一个整数，或者像“1.25”这样的东西是一个浮点数——它不是——它是一个字符串。IE

    ```
    char * p = "125"; 
    ```

    p[0] 将不包含 0。它将包含 '0' - 如果编码是 ASCII，那么这将是 48。即 p[0] 将包含 48 而不是 0。p[1] 将包含 49 & p[ 2] 将包含 52。它与浮点数类似。

相反的情况也会发生。即，如果你有一个地址并且你把它当作一个字符数组 - 字符数组将不包含你认为它会的浮点数。试试这个程序看看这个

```
#include <stdio.h>

struct A
{
    char c[4];
    float * p;
    int i;
};

int main()
{
    float x = 1.25;
    struct A a;
    a.p = &x;
    a.i = 0; // to make sure the 'presumed' string starting at p gets null terminate after the float
    printf("%s\n", &a.c[4]); 
} 
```

对我来说，它打印“╪·↓”。这与字节顺序无关。

*   在为结构对象赋值时，您需要记住的另一件事 - 您需要记住 comStr.pressure 和 comStr.temperature 是指针。您不能直接为它们赋值。您需要为它们提供现有浮点数的地址或动态分配它们可以指向的内存。

您是否也在尝试创建 char 数组或解析已经存在的 char 数组。如果您正在尝试创建它，那么更好的方法是使用`snprintf`它来做您想做的事情。`snprintf`使用类似于`printf`但打印到 char 数组的格式说明符。您可以通过这种方式创建您的 char 数组。还有一个更大的问题——你打算用你创建的这个 char 数组做什么——这将决定字节序是否与你相关。

如果您尝试从给定的 char 数组中读取并尝试拆分为浮点数和逗号等，那么执行此操作的一种方法将是`sscanf`但对于您的特定字符串格式可能会很困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:52:16.683

最后，我找到了一个简单的方法，但我不知道这种方法是否有任何缺点。我做了：

```
char commandStr[27];
char *commandHeader = "AT+UCAST:0000=";
float pressure = 760.0;
float temperature = 20.0;
uint32_t timeStamp = 0;

memcpy(commandStr, commandHeader, 14);
commandStr[26] = '\r';

memcpy((void*)(comStr+14), (void*)(&pressure), 4);
memcpy((void*)(comStr+18), (void*)(&temperature), 4);
memcpy((void*)(comStr+22), (void*)(&timeStamp), 4); 
```

此代码是否有任何安全问题或性能问题或其他问题？

# netlogo - 计算特定补丁的邻居海龟并报告真假

> ID：15995510
> 
> 赞同：1
> 
> 时间：2013-04-14T03:35:49.533
> 
> 标签：netlogo

您好，我会尽量快点，我有一个房间，火势扩大了，我有两个出口，我想做的就是对特工说，如果一扇门被火堵住了，那就去另一个门。我想出了这样的东西，但没有结果。

```
to doorblock
show count neighbors with [pcolor = 77] ;; the patch color of the two doors
end

;;to go 

  ask smarts [    ;;smarts are the agents inside the room that need to get oout
    if [ doorblock > 5 ]    
   [ set target one-of sexits]]  ;;sexits is the other door 
```

有人有更好的主意吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T02:20:12.630

好的，所以如果我理解正确，您希望您的特工查看他们当前目标的门，检查该门周围是否有超过 5 个消防特工，如果是，请选择另一个目标门。

如果你的灭火剂只是红海龟（没有特定品种），你可能想要这样的东西：

```
ask smarts [
  if count ([ turtles-on neighbors ] of target) with [ color = red ] > 5 [
    if-else ([ breed ] of target = sexits )
      [ set target one-of nexits ]
      [ set target one-of sexits ]
  ]
] 
```

这里的关键原语是：

*   [`neighbors`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#neighbors)，这会给你乌龟周围的补丁（*在*`target`这种情况下，周围的补丁）
*   [`turtles-on`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#turtles-on)，这将为您提供补丁集成员上的*海龟*（这里，这将是属于 的补丁上的`neighbors`海龟`target`）
*   最后，[`with`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#with)允许您仅从代理集中获取满足某些条件的海龟（这里，我们使用它仅获取代表火的红色海龟）。

您还应该尝试理解[`of`](http://ccl.northwestern.edu/netlogo/docs/dictionary.html#of)原语。

而且我猜你想分配一个与前一个不同品种的新目标（如果是北，如果是南，如果是南，那么北），但这取决于你。

# apache - mod_jk.so Tomcat 连接器到 Apache httpd (OS X) 的worker.properties 放在哪里？

> ID：15995512
> 
> 赞同：0
> 
> 时间：2013-04-14T03:35:51.117
> 
> 标签：apache, tomcat7, mod-jk

我正在尝试在 OS X (10.8.3) 上设置 Tomcat 7 连接器 mod_jk.so，以便对 Tomcat 的调用将通过来自 apache 2.2 的 httpd。文件 mod_jk.so 就位。但是workers.properties 去哪儿了？[http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)上的说明似乎没有说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T15:14:38.230

我知道您现在正在使用`mod_proxy`，但我正在回答这个记录，至少在涉及您的 *nix 打包框架时包含信息。

在 Debian 中，该软件包`apache2`使用配置目录安装 apache，`/etc/apache2/mods-available`并且单独的软件包`libapache2-mod-jk`在此目录中放置一个名为 的 apache 配置文件，该文件`jk.conf`在启动时由 apache 拉入。

`jk.conf`有`JkWorkersFile`指令。

该`libapache2-mod-jk`软件包`workers.properties`还在`/etc/libapache2-mod-jk`.

因此，对于，您将`OS X`workers.properties 文件放在任何地方，例如合理地放在`httpd.conf`与可以将自定义内容放入您自己的文件中，而不会在软件包升级时受到干扰。`httpd.conf``Include``conf.d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T20:00:58.507

我有同样的问题。但是后来我发现我应该先看看我在httpd.conf中使用的是mod_jk.so还是mod_proxy_ajp。原来我是后来的人。因此，与其编辑我没有的worker.properties，不如编辑httpd.conf：将ProxyIOBufferSize 指令添加到Apache httpd 的配置中。

```
ProxyIOBufferSize 65536 
```

希望能帮助到你。

参考：[在页面](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPJavaInstall)底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T10:24:50.293

请根据您的 JkWorkersFile 配置放置您的 workers.properties 文件：

```
JkWorkersFile     /etc/httpd/conf/workers.properties 
```

# asp.net - ASP.net MasterPage.master 不存在

> ID：15995520
> 
> 赞同：3
> 
> 时间：2013-04-14T03:37:25.863
> 
> 标签：asp.net, parsing, master-pages, message

我在 IIS 服务器上发布我的网站时遇到问题，我无法直接访问它，所以我必须依靠其他人在 IIS 上配置我的网站。但是，当我上传我的网站时，会出现此错误：

第 1 行：

```
 <%@ Page Language="VB" MasterPageFile="~/MasterPage.master" AutoEventWireup="false" CodeFile="Default.aspx.vb" Inherits="_Default" title="Untitled Page" %> 
```

第 2 行：

```
 <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server"> 
```

解析器错误消息：`The file '/server/website/MasterPage.master' does not exist.`

我的母版页位于网站的根文件夹中，并且`default.aspx`也在根目录中，我已经在互联网上搜索了答案，但我找到的最好的答案是更改`MasterPageFile="~/MasterPage.master"` 为`MasterPageFile="./MasterPage.master"`但直到星期一还没有尝试过。

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T03:49:41.490

(i) 确保运行服务器的用户帐户有权访问该目录。

(ii)在文件路径中使用“~”时，请确保当前应用程序部署认为根目录与之前相同。

(iii) 打开 IIS，右键单击该站点的虚拟目录文件夹，然后选择“转换为应用程序”。刷新并再次检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T20:29:29.733

我刚刚遇到了这个问题并得到了解决。如何？我将所有文件移至我网站的根目录。以前，我将它们放在根文件夹中另一个文件夹内的文件夹中。我仍然想知道为什么我这样做 :D 无论如何，它现在都已修复并且正在运行，没有显示任何烦人的“解析器错误”，并且它可以完美地准确地读取和更新数据库。

# c# - 获取类中 A 变量的所有值

> ID：15995522
> 
> 赞同：1
> 
> 时间：2013-04-14T03:37:44.027
> 
> 标签：c#

我有两个类，其中一个是 Destinations，另一个是 DestinationDetails

```
public class Destinations
{
    public Destinations() { }

    public string CarrierName { get; set; }

    public List<DestinationDetails> Details { get; set; }
}

public class DestinationDetails
{
    public DestinationDetails() { }

    public string Destination { get; set; }

    public string Type { get; set; }

} 
```

我想`string "Destination"`从第一类的对象列表中获取第二类的所有内容

我有`List<Destinations>`而且我不想使用`for loop or foreach`statments

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:51:05.730

```
var dest = new Destinations();

//Initialize the details

var destNames = dest.Details.Select(d => d.Destination).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:53:33.423

你在寻找这样的东西吗？

```
 var det = new Destinations();
     det.Details = new List<DestinationDetails>();
      det.Details.Add(new DestinationDetails() { Destination = "CA" });
      det.Details.Add(new DestinationDetails() { Destination = "NJ" });
      ...
      ...
     var details = new DestinationDetails();
     details.Destination = string.Join(",",det.Details.Select(x => x.Destination).ToArray() ); 
```

## 更新：-

提供了目的地列表“allDet”，您可以获得如下字符串列表：-

```
 alldet.Where(x => x.Details != null).SelectMany(x => x.Details.Select(y => y.Destination)).ToList() //With out ToList() it will give you IEnumerable<String> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:23:09.533

`List<Destinations> AirportDestinations ;`// 这个列表中的`Destinations`对象`Details`有`Destination`

所以通过使用`SelectMany`

```
List<string> cities.AddRange(AirportDestinations.Where(x => x.Details != null).SelectMany(d => d.Details.Select(s => s.Destination))); 
```

现在您拥有`Destination`列表中的所有对象

# python - 烧瓶模板包括不正确的文件

> ID：15995524
> 
> 赞同：2
> 
> 时间：2013-04-14T03:38:01.147
> 
> 标签：python, flask, jinja2

我在 Flask 中使用 a `jinja2.ChoiceLoader`（也尝试了多条路径`FileSystemLoader`，没有快乐）有一个相当奇怪的问题。

我有几个“主题”目录，就像这样。

```
/templates/
  themes/
    default/
      layout.html
      menu.html
    blue/
      layout.html
    grey/
      menu.html
    ... 
```

`default/`如果所选主题没有所需的模板，我想回退到，所以我使用了 ChoiceLoader，就像这样。

```
@app.before_request
def setup_request():
    current_theme = get_theme()
    logging.info('Using theme %s'%(current_theme))
    app.jinja_loader = jinja2.ChoiceLoader([
        jinja2.FileSystemLoader('/templates/themes/%s/'%(current_theme)),
        jinja2.FileSystemLoader('/templates/themes/default/')
    ]) 
```

太好了，但是如果我更改它，`<current_theme>`它仍然会从旧文件夹加载主题，直到我重新加载 Apache 或重新启动 Flask 开发服务器。

它应该使用新主题。日志记录说它正在使用更改后的主题，但显然`app.jinja_loader`有点像蜜獾……在我重新加载 Apache 之前，它完全忽略了它。

**编辑：**考虑到所有同名文件都是同一个文件，这似乎与 Flask 有关。我可以使用内置服务器（使用 DEBUG=True）、Cherry 和 mod_wsgi 进行重现。这个人似乎有类似的问题，但没有简单的解决方案：[flask blueprint template folder](https://stackoverflow.com/questions/7974771/flask-blueprint-template-folder)我的情况不同，因为我需要为单个应用程序级联模板。他的问题与蓝图之间的级联模板有关，但实际上可能是同一个问题。

这是“get_theme()”调用中的代码：

```
def get_theme():
    # I know this is unsafe, testing only
    return request.args.get('theme','default') 
```

**编辑 2：**我需要更改主题之间的 HTML 和 JavaScript，而不仅仅是 CSS。这就是为什么我不只是加载不同的 CSS 文件。此外，其中一些主题适用于移动设备，与其他主题几乎没有共同之处。

**编辑3：**两种解决方案。*解决方案 1*：对文件进行唯一命名，例如“blue.layout.html”和“default.layout.html”。这完美地工作，但它没有按要求级联。*解决方案 2*：使用相对路径，所以不要`include 'file.html'`使用`include 'theme/blue/file.html`. 我通过创建一个`get_theme_file()`检查活动主题、检查文件是否存在（如果不存在，则回退到“默认”主题）并返回相对路径的函数来实现级联。我只需要确保我包含的所有内容看起来像`{% include get_theme_file('file.html') %}`. [这并不优雅，但我发现这里](https://stackoverflow.com/questions/7974771/flask-blueprint-template-folder)使用的 Flask 的低级摆弄更优雅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:41:00.340

*顺便说一句，您可以将多个位置传递给[`FileSystemLoader`](http://jinja.pocoo.org/docs/api/#jinja2.FileSystemLoader)，这是加载模板的推荐方式*

这是 Apache 中的预期行为`mod_wsgi`（我假设您正在使用）。文件系统更改不会触发所有进程的重新加载。请参阅Flask 文档中有关此内容的此条目，并提供一种解决方法，即添加[：](http://flask.pocoo.org/docs/deploying/mod_wsgi/#support-for-automatic-reloading)

`WSGIScriptReloading On`

到应用程序的配置部分，然后`touch`输入`wsgi`文件以触发子进程的重新加载。

你确定这是你想要的吗？大多数主题切换技巧依赖于级联样式表 (CSS) 的*级联*部分来控制主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T10:17:55.147

好吧，我不是唯一遇到这个问题的人。问题是 Flask 基于文件名进行缓存，如果您不包含相对路径，它只会缓存要加载的第一个。实现动态、级联、模板的三种方式。

1.  [覆盖 Jinja 内置函数](https://stackoverflow.com/a/8737529/1014975)。我发现这很令人困惑。我对这个解决方案不够聪明。
2.  为每个文件提供不同的 WSGI 进程。对于动态站点来说，这里的设置似乎有点太多了。Flask 缓存每个 WSGI 进程的文件名，因此您可以对多个 Cherry WSGI 服务器执行某些操作。
3.  在加载路径中包含主题。创建一个函数，使用 加载它`context_processor`，并且**只**使用该函数加载模板文件。该函数需要检查非默认主题，检查文件是否存在，然后返回。因此，模板调用将`get_theme_file('layout.html')`返回相对路径（如`themes/blue/layout.html`）。

选项 3 的示例。

```
def get_theme_file(fname):
    theme = get_theme()
    if os.path.exists(os.path.join(theme.theme_dir, fname)):
        return os.path.join('themes', theme.name, fname)
    return os.path.join('themes', 'default', fname)
...
    # Each render_template should reference this
    return render_template(get_theme_file('layout.html')) 
```

如果您在模板中包含主题文件：

```
{% include get_theme_file('layout.html') %} 
```

不幸的是，这不会缓存，但我可以看到一些优化它的方法。也许缓存一个`os.listdir`，`get_theme().theme_dir`而不是为每个`get_theme_file`调用读取文件系统，只需`in`检查缓存`listdir`列表。

值得注意的是，这是 Flask 特有的。我无法用普通的 Jinja2 和我自己的 WSGI 服务器重现这种行为。有人可能会说 Flask 对于​​这个特定的项目来说是一个糟糕的选择，但我认为 Flask 所做的一切所节省的钱都是值得的。

# c++ - C++ - 传递 NULL 与分配空 std::set 以传递给方法的可行性和性能

> ID：15995530
> 
> 赞同：0
> 
> 时间：2013-04-14T03:39:31.730
> 
> 标签：c++, performance

我正在做一些性能调整工作。基本上，我在我们的代码库中发现了一个潜在的瓶颈，并为它思考了最佳解决方案。我会尽量让这个问题尽可能简单。基本上，我有一个方法可以处理一组双精度值（std::set）。所以方法签名看起来像：

```
void MyClass::CalculateStuff(const std::set<double> & mySet); 
```

代码中有几个地方调用了这个方法。这些地方中只有少数需要使用该集合，而其他地方则不关心该集合。我想我可以创建包含此集合的此方法的另一个版本，并修改现有的方法以使用空集合。但是，这会给不关心集合的地方带来一些开销（因为他们必须进行额外的方法调用）。所以我想到的另一个选择是使用指向集合参数的指针，如下所示：

```
void MyClass::CalculateStuff(const std::set<double> * pMySet); 
```

指针的有效性将决定我们是否要使用集合（即为集合参数传递 NULL 指针意味着我们不执行与集合相关的工作）。从界面的角度来看，这会更快，但显然不干净。我想我可以对代码进行大量评论。

你认为应该怎么做？这可能不是什么大不了的事，但它让我思考你应该走多远才能让你的代码更快（如果性能在应用程序中非常重要）与确保代码仍然干净和可管理。在这种情况下应该在哪里画线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:49:54.593

好吧，我做游戏编程。对我来说。我只担心游戏开始滞后然后我配置文件等时潜在的瓶颈。

通过指针传入将更有效，因为指向对象的指针只有 4 个字节。但我确实建议您将其传递为空。您将`nullptr`其用作当前标准来定义空指针而不是`NULL`or `0`。

我猜你正在传递一个集合来计算类的集合。在这种情况下，重载运算符可能是您的最佳选择？

# java - 如何将值添加到特定的行号和列号？

> ID：15995531
> 
> 赞同：0
> 
> 时间：2013-04-14T03:39:32.407
> 
> 标签：java, arrays, element

假设我有一个名为 sales 的 3 行 5 列双精度数组

```
double [][] sales = new double [3][5]; 
```

如何按行号和列号向特定单元格添加值？我正在尝试编写一个程序，询问用户行号，然后读取它，列号，然后读取它，然后将值放入行号和列号，然后将该值添加到特定的行和列用户指定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T03:43:18.440

在这些特定位置引用数组，记住 Java 中的数组是从零开始的。

如果你想访问第一行第三列的数据，你会写：

```
sales[0][2] = 12.345; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T03:47:35.240

请执行下列操作。

```
sales[row-1][column-1]=value; 
```

还要检查行和列是否不超过它们的最大值和最小值。

# java - 在 Java 中使用 POI 获取 Excel 单元格背景颜色不匹配

> ID：15995538
> 
> 赞同：1
> 
> 时间：2013-04-14T03:40:20.877
> 
> 标签：java, excel, colors, apache-poi

我正在将 Excel 表格转换为 HTML。我在 Java 中使用 POI 来获取 xls 工作簿中单元格的颜色。问题是颜色不匹配：在 Excel 中，我有 242、220 和 219 的 RGB 值，但是当我使用 POI 获取它们时，我得到 RGB(255,153,204)。

关于如何获得确切颜色的任何想法？

```
 HSSFCellStyle cs = (HSSFCellStyle) style;
    out.format("  /* fill pattern = %d */%n", cs.getFillPattern());
    styleColorback(out, "background-color", cs.getFillForegroundColorColor())

 private void styleColorback(Formatter out, String attr, HSSFColor color) {
   short[] rgb = color.getTriplet();
   out.format("  %s: #%02x%02x%02x; ", attr, rgb[0], rgb[1], rgb[2]);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:19:18.620

我认为不可能获得单元格的确切颜色，因为 Excel 2003 调色板仅包含 56 种颜色。我发现获得确切颜色的独特方法是，当您在 excel 的选项中将 Excel 格式保存为 .xls，然后在保存菜单中，我们可以将调色板的颜色更改为所需的颜色。

# java - ArrayList 包含同一个超类的不同对象 - 如何访问子类的方法

> ID：15995540
> 
> 赞同：6
> 
> 时间：2013-04-14T03:40:47.973
> 
> 标签：java, methods, arraylist, subclass, superclass

*嗨，我想知道我的问题是否有一个简单的解决方案，*

我有一个`ArrayList`：

```
ArrayList <Animal> animalList = new ArrayList<Animal>(); 

/* I add some objects from subclasses of Animal */

animalList.add(new Reptile());
animalList.add(new Bird());
animalList.add(new Amphibian()); 
```

他们都实现了一个方法`move()`-`Bird`苍蝇何时`move()`被调用。我知道我可以使用这个来访问超类的常用方法和属性

```
public void feed(Integer animalIndex) {
    Animal aAnimal = (Animal) this.animalList.get(animalIndex);
    aAnimal.eat();
} 
```

很好 - 但现在我想访问`move()`子类`Bird`拥有的方法。我可以通过将 as 转换`Animal`为`Bird`：

```
Bird aBird = (Bird) this.animalList.get(animalIndex);
aBird.move(); 
```

在我的情况下，我不想这样做，因为这意味着我有 3 组不同的上述代码，每个子类型的`Animal`.

好像有点多余，有没有更好的办法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T03:52:38.317

从超类中确实没有一个很好的方法可以做到这一点，因为每个子类的行为都会有所不同。

为确保您实际上调用了适当的`move`方法，请`Animal`将超类更改为接口。然后，当您调用该`move`方法时，您将能够确保您正在为您想要的对象调用适当的移动方法。

如果您希望保留公共字段，那么您可以定义一个抽象类`AnimalBase`，并要求所有动物都以此为基础，但每个实现都需要实现`Animal`接口。

例子：

```
public abstract class AnimalBase {
    private String name;
    private int age;
    private boolean gender;

    // getters and setters for the above are good to have here
}

public interface Animal {
    public void move();
    public void eat();
    public void sleep();
}

// The below won't compile because the contract for the interface changed.
// You'll have to implement eat and sleep for each object.

public class Reptiles extends AnimalBase implements Animal {
    public void move() {
        System.out.println("Slither!");
    }
}

public class Birds extends AnimalBase implements Animal {
    public void move() {
        System.out.println("Flap flap!");
    }
}

public class Amphibians extends AnimalBase implements Animal {
    public void move() {
        System.out.println("Some sort of moving sound...");
    }
}

// in some method, you'll be calling the below

List<Animal> animalList = new ArrayList<>();

animalList.add(new Reptiles());
animalList.add(new Amphibians());
animalList.add(new Birds());

// call your method without fear of it being generic

for(Animal a : animalList) {
    a.move();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T03:49:33.070

你不需要做任何铸造。被覆盖的方法应该被称为[简单多态性]

```
Animal aAnimal==  this.animalList.get(animalIndex);
aAnimal.move(); 
```

如果对象是鸟，上面的代码应该调用bird方法，不是吗？

并且投射不是解决方案，你将如何决定投射哪个对象？您将不得不使用 instanceOf。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:44:44.117

在您的情况下，以下可能有效，但时间复杂度为 O(n)：

```
public void moveBird(){
    for(Animal aminal:animalList){
        if(animal instanceof Bird){
            aninmal.move();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T04:03:46.733

```
Bird getMyBird(Integer aniInteger) {
        Bird b = new Bird();
        //Do somthig with bird object...

        return b;
        //get your modifeid bird object
    }

    Bird myBird = animalList.get(animalIndex);

    myBird.move(); 
```

# android - 如何在Android中动态查找滚动视图滚动位置？

> ID：15995542
> 
> 赞同：1
> 
> 时间：2013-04-14T03:41:36.213
> 
> 标签：android, android-scrollview

*嗨，我是 android.my 的新手。我的要求是当用户滚动滚动视图时，基于滚动高度我想更改屏幕上的图像。为此，我想要在滚动更改时立即调用的事件，一旦用户到达结束位置，我想以编程方式将其设置为第一个位置。它是连续循环。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:51:04.853

您可以使用 listView 而不是 scrollView。所以你可以使用 onScrollChangeListener。

# c# - 如何使用keydown动态格式化字符串

> ID：15995543
> 
> 赞同：0
> 
> 时间：2013-04-14T03:41:38.090
> 
> 标签：c#

我想在用户将值输入文本框时更改文本。

这边走：

```
1 = 1
12 = (12) 
123 = (12) 3
1234 = (12) 34 
```

我做了这个代码：

```
private void txtFoneres_KeyDown(object sender, KeyEventArgs e)
{
    string p1 = e.KeyData.ToString();
    if (p1.StartsWith("D"))
    {
        p1 = p1.Replace("D", "");
    }
    if (p1.StartsWith("NumPad"))
    {
        p1 = p1.Replace("NumPad", "");
    }

    if (txtFoneres.TextLength == 1)
    {

        txtFoneres.Text = txtFoneres.Text + "(" + p1 + ")";
        txtFoneres.SelectionStart = 2;
        txtFoneres.SelectionLength = 2;
    }
} 
```

使用我的代码，结果如下：

```
"1" = "1 
"12" = "1(2" (this is the problem, it would have to start with "(" 
```

有谁知道如何解决它并将1（2）更改为（12）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:00:56.440

我会尝试使用 带有一行代码的[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox%28v=vs.90%29.aspx)

```
private void maskedTextBox1_KeyUp(object sender, KeyEventArgs e)
{
    if (maskedTextBox1.Text.Length == 1)
    {
        maskedTextBox1.Mask = "(00) 00";
        maskedTextBox1.SelectionStart = 2;
    }
} 
```

# iphone - UITableViewCell frame.size.width对于ipad和iphone是一样的吗？

> ID：15995544
> 
> 赞同：0
> 
> 时间：2013-04-14T03:41:55.433
> 
> 标签：iphone, ios, ipad, cocoa-touch, uitableview

尝试`UILabel`在单元格的右下角放置一个包含日期的单元格，无论它是在 iPhone 还是 iPad 上。

这是我目前拥有的，我需要做什么才能获得实际的 cell `size.width`，我也尝试过这样做`cell.bounds.size.width`，无论是 iPhone 还是 iPad，都具有相同的价值：

```
float xValue = cell.frame.size.width - 100;
UILabel *nameLabel = [[UILabel alloc] initWithFrame:CGRectMake(xValue, 20.0f, 100, 17.0f)];
[nameLabel setTag:1];
[nameLabel setFont:[UIFont boldSystemFontOfSize:15.0]];
nameLabel.textColor = [UIColor grayColor];
nameLabel.text = @"05-12-13";
// custom views should be added as subviews of the cell's contentView:
[cell.contentView addSubview:nameLabel]; 
```

ETA，这是整个自定义单元格类，也许有人可以看到导致标签重复的原因：

```
@interface VideoTableViewCell : UITableViewCell

+ (VideoTableViewCell *)cellForTableView:(UITableView *)tableView;
+ (CGFloat)heightForVideo:(id<VideoProtocol>)video;
- (void)updateCellForVideo:(id<VideoProtocol>)video;

@end

#define MARGIN 10

@implementation VideoTableViewCell

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {

        self.textLabel.font  = [UIFont boldSystemFontOfSize:14];

        self.detailTextLabel.font = [UIFont systemFontOfSize:13];
        self.textLabel.numberOfLines = 2;
        self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    return self;
}

+ (VideoTableViewCell *)cellForTableView:(UITableView *)tableView {

    NSString *identifier = @"TweetCell";
    VideoTableViewCell *cell = (VideoTableViewCell *)[tableView
                                                    dequeueReusableCellWithIdentifier:identifier];
    if (cell == nil) {
        cell = [[VideoTableViewCell alloc]
                initWithStyle:UITableViewCellStyleSubtitle
                reuseIdentifier:identifier];
    }

    return cell;
}

- (void)layoutSubviews {

    [super layoutSubviews];
    CGRect cvf = self.contentView.frame;
    self.imageView.frame = CGRectMake(0.0,
                                      0.0,
                                      cvf.size.height-1,
                                      cvf.size.height-1);
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;

    CGRect frame = CGRectMake(cvf.size.height + MARGIN,
                              self.textLabel.frame.origin.y,
                              cvf.size.width - cvf.size.height - 2*MARGIN,
                              self.textLabel.frame.size.height);
    self.textLabel.frame = frame;

    frame = CGRectMake(cvf.size.height + MARGIN,
                       self.detailTextLabel.frame.origin.y,
                       cvf.size.width - cvf.size.height - 2*MARGIN,
                       self.detailTextLabel.frame.size.height);
    self.detailTextLabel.frame = frame;
}

- (void)setDateLabelWithDate:(NSDate *)date {

    float xValue = self.frame.size.width - 70;
    // create a custom label:                                        x       y   width  height
    UILabel *dateLabel = [[UILabel alloc] initWithFrame:CGRectMake(xValue, 40.0f, 100, 12.0f)];
    dateLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleBottomMargin;
    [dateLabel setFont:[UIFont boldSystemFontOfSize:13.0]];
    dateLabel.textColor = [UIColor grayColor];

    NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MM-dd-yy"];
    NSString *dateString = [dateFormatter stringFromDate:date];
    dateLabel.text = dateString;
    [self.contentView addSubview:dateLabel];
}

+ (CGFloat)heightForVideo:(id<VideoProtocol>)video {

    //create a dummy cell
    VideoTableViewCell *sampleCell  = [[VideoTableViewCell alloc]
                                         initWithStyle:UITableViewCellStyleSubtitle
                                         reuseIdentifier:nil];
    [sampleCell updateCellForVideo:video];

    //calculate the sizes of the text labels
    CGSize textSize = [video.title sizeWithFont: [VideoTableViewCell textLabelFont]
                                  constrainedToSize:sampleCell.textLabel.frame.size
                                      lineBreakMode:UILineBreakModeWordWrap];
    CGFloat minHeight = 51 + 10;  //image height + margin
    return MAX(textSize.height + 20, minHeight);    
}

+ (UIFont *)textLabelFont {
    return [UIFont systemFontOfSize:13];
}

- (void)updateCellForVideo:(id<VideoProtocol>)video {

    // set the text to the date with the tweet text
    self.textLabel.text = video.title;
    id<VideoAttrProtocol> speaker = [[video.speakers allObjects] objectAtIndex:0];
    self.detailTextLabel.text = speaker.name;
    [self setDateLabelWithDate:video.post_date];
    NSURL *url = [NSURL URLWithString:video.thumbnail];    
    [self.imageView setImageWithURL:url
                   placeholderImage:[UIImage imageNamed:@"Logo.png"]];
}

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:47:25.437

您需要设置标签的 autoresizingMask。根据单元格的初始大小将标签放在正确的位置，无论它是什么。正确设置 autoresizingMask 后，标签将随着单元格大小的变化而调整。

在将标签添加到内容视图之前，添加：

```
// Keep the label in the bottom-right corner
nameLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleTopMargin; 
```

根据所有发布的代码进行更新：

在您的自定义单元格中，您每次`setDataLabelWithDate:`调用该方法时都会创建并添加一个标签。

您可以从您的视图控制器（也可能从您的视图控制器）调用此方法`updateCellForVideo:`（您不显示该代码）。

您需要更新您的代码，以免每次`setDataLabelWithDate:`调用时都向单元格添加新标签。只添加一次标签。

# c - 为什么这个程序会导致如此多的缓存未命中？

> ID：15995545
> 
> 赞同：1
> 
> 时间：2013-04-14T03:42:09.357
> 
> 标签：c, performance, caching

在下面的练习考试中，我遇到了一个关于缓存性能的问题。你能给我一些关于如何解决它的提示吗？这是我的草稿答案：

1.  数组 a、b 跨越缓存的整个 32 页。
2.  循环运行两次，因此第一个循环将预热缓存。2048 是第一个循环中由 a[i], b[i] 分配引起的冷缺失数。
3.  在 OS1 中，缓存实际上是索引的，因为在试验 1 和 3 中翻译导致更多的缓存未命中（尽管我无法解释试验 2 和 3 的急剧下降和增加）。
4.  在 OS2 中，缓存是物理索引的。
5.  在 (c) 部分中，减少缓存未命中的候选页面放置策略是页面着色和 bin 跳跃，但我不知道如何决定使用哪一个。

我很感激任何提示。谢谢你。

![在此处输入图像描述](https://i.stack.imgur.com/MvunF.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:13:24.293

a) 缓存是物理索引的。操作系统正在分配“随机”物理页面，导致测试结果出现较大偏差。如果高速缓存被虚拟索引，则测试结果不会有大的偏差（因为使用的虚拟地址不会有大的偏差）。

b) 最可能的解释是第二个操作系统没有分配“随机”物理页面（例如某种页面着色方案 - 参见[http://en.wikipedia.org/wiki/Cache_coloring](http://en.wikipedia.org/wiki/Cache_coloring)）。

c) 我会使用搜索引擎来发现有关 OS 2 使用的策略的更多信息。

注1：我不知道最后一个问题的答案应该是什么（对我来说似乎是一个愚蠢的问题）。

注意 2：缓存是硬件，在安装不同的操作系统时不会神奇地重新设计自己的芯片（例如，从虚拟索引到物理索引）。

# iphone - 类中的变量

> ID：15995546
> 
> 赞同：0
> 
> 时间：2013-04-14T03:42:10.760
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

```
@interface characterclass : CCSprite
{
    bool alive;
    int speed;
    int jumpamount = 10;  <--- error
}
@property bool alive;
@property int speed;
@property int jumpamount;
@end 
```

我如何在我的代码中这样做，我想在我的类中有一个等于 10 的变量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T03:44:59.480

您需要在类实例的初始化程序中分配这些值。创建一个名为的实例方法`- (id)init`：

```
- (id)init{
    self=[super init];
    if (self) {
        jumpamount=10;
    }
    return self;
} 
```

请注意，您不再需要像这样声明您的 ivars。`@property`将为您创建一个 ivar。

# eclipse - 无法在 Eclipse 中为 Java 开发人员使用 WindowBuilder

> ID：15995548
> 
> 赞同：0
> 
> 时间：2013-04-14T03:42:25.653
> 
> 标签：eclipse, eclipse-plugin, swt, eclipse-jdt

我确定这是一个简单的问题，但我已经搜索过，但无法找到解决方案。我想做的是在设计视图中访问 WindowBuilder 实用程序来编辑应用程序的 GUI。当我切换到设计视图时，我收到一条错误消息，指出无法识别 GUI。我正在使用 SWT。我需要的是 SWT 设计师吗？如果是这样，安装它的最佳方法是什么？我没有通过安装新软件看到它。

# c - 遗传算法使用哪种编码？

> ID：15995553
> 
> 赞同：2
> 
> 时间：2013-04-14T03:43:19.267
> 
> 标签：c, genetic-algorithm

我想用 C 编写一个遗传算法来优化 10 个变量（x1 到 x10）的函数。但是我无法弄清楚我应该使用哪种编码。我经常看到示例中使用了二进制编码，但在我的例子中，变量可以取实值。此外，对于这些类型的问题，值编码是一个不错的选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T16:04:24.257

对于真正有价值的问题，我建议尝试 CMA-ES 或其他 ES 变体。CMA-ES 无疑是实值问题的当前最先进技术。它旨在快速找到多维问题的良好解决方案。[Hansen 的页面](https://www.lri.fr/~hansen/cmaes_inmatlab.html)上有可用的实现。[HeuristicLab](http://dev.heuristiclab.com/trac/hl/core/blog/abeham/cmaes)的工作中还有一个 C# 实现. 进化策略是专门为实值优化问题设计的算法。它们与遗传算法非常相似（两者都是在同一时间发明的，但在不同的地方）。主要区别在于，对于 ES，主要驱动因素是突变，它具有对突变强度的巧妙适应。没有这种适应，（局部）最优值就不能及时定位。CMA-ES 易于配置，它所需要的只是初始标准偏差和可选的总体规模（否则有一个公式可以根据问题规模来估计这一点）。

当然也可以应用遗传算法，但是您必须使用一些特定的运算符，这些运算符只能以非常小的程度改变变量。例如，有来自 Mühlenbein 的育种者遗传算法。然而，一般而言，遗传算法更适合需要正确组合事物的问题。例如，背包问题中要包括哪些项目，或者哪些功能和终端要结合到一个公式中（遗传编程）。更少的问题，你需要为某事找到正确的价值。虽然当然有遗传算法的变体来解决这些问题，但请寻找实数编码遗传算法（RCGA 或 RGA）。

另一种适用于实值问题的算法是粒子群优化，但我认为它更难配置。我将从[SPSO-2011](http://www.particleswarm.info/Programs.html)开始，即 2011年标准 PSO。

如果您的问题包含整数变量，则选择变得更加困难。当变量是离散的时，进化策略表现不佳，因为整数变量的适应方案不同。遗传算法再次成为有趣的首选算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T04:02:40.757

当两个非常接近最优的答案组合起来会使其他答案非常接近最优时，最好使用遗传算法。纯二进制编码的问题在于，如果您不检查交叉点，您最终会得到两个答案，这可能与原始答案没有太大关系。

也就是说，只有当您的变量数量非常少并且变量中的数据量很大时，这才是真正的问题。至于选择编码，它更像是一门艺术而不是一门科学，这取决于你的问题。我建议使用适合您想要的精度的编码。使用 10 个变量，无论您如何编码，都不会出错，一个 8 位 ASCII 编码器可能工作得很好。

希望有帮助。

# vba - 浏览器未正确启动 - iim.Init() 失败？

> ID：15995556
> 
> 赞同：1
> 
> 时间：2013-04-14T03:43:29.970
> 
> 标签：vba, windows-8, internet-explorer-10, imacros

我正在尝试将代码从旧笔记本电脑移植到新的 Windows 8 机器上。我所有的 VBA / iMacros 脚本都可以在旧机器上完美运行。我从 VBA 脚本中调用 iMacros。我正在运行 Windows 8 和 iMacros 8，脚本版（独立浏览器）。

症结在于我的 Windows 8 机器无法识别 iMacros 的打开实例。当我使用“False”条件运行 iim.init() 时，它应该在打开的实例中识别并运行宏。相反，它会打开一个新的（但有缺陷的）iMacros 实例，它甚至不会加载主页（也不会随后运行任何脚本）。我得到的错误是“浏览器未启动。iimInit() 失败？”

有没有其他人有同样的问题？解决方案是什么？代码：

```
Dim iim1, iret

Set iim1 = CreateObject("imacros")
iret = iim1.iimInit("", False, "")

iret = iim1.iimPlay("My_Macro")

If iret < 0 Then
   MsgBox iim1.iimGetLastError()
End If 
```

顺便说一句，我知道 iMacros 8 不支持 Internet Explorer 10（其独占安装由 Windows 8 强制执行）。我已经尝试过启用和禁用 IE10 的宏。我认为 IE10 不是问题，因为 iMacros 浏览器在禁用 IE10 的情况下完全具备最终用户功能——即运行脚本、加载网页。

# javascript - jQuery 动画控制序列

> ID：15995562
> 
> 赞同：1
> 
> 时间：2013-04-14T03:44:57.460
> 
> 标签：javascript, jquery, html

我正在尝试建立一个有动画的主页。不过，我很难控制我的动画。我需要的只是隐藏元素，然后在一定时间后显示元素。循环遍历该序列，并在有人将鼠标悬停在框上时暂停并显示所有元素。[示例](http://jsfiddle.net/MorganW09/GVhcM/)简单动画。

我还有很长的路要走。起初我尝试使用 .css() 可见性属性，现在我使用的是 .show() 和 .hide()。

我需要一种方法来循环播放我的动画。我尝试添加另一个

```
setTimeout(clear1(), 3000); 
```

到我的 box1 函数的末尾，但由于某种原因这不起作用。

我需要一种方法让用户将鼠标悬停在#box1 上，所有动画都会停止。我试过使用 .clearQueue，但我无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:33:35.877

首先，设置你的CSS：

```
.box {display: none;} 
```

**在悬停时显示所有框** [查看演示](http://jsfiddle.net/GVhcM/6/)

这将在悬停时显示所有框，然后从停止的位置继续动画（将隐藏在动画期间未显示的框）。我认为这就是你所追求的。

```
var index = 0; // To keep track of the last div showed during animation
var time_of_delay = 1000; // Set the time of delay

// Start the animation
$(document).ready(function () {
    box1(time_of_delay);
});

// The hover states
$("#box1_1").hover(
    function() {
        box1(0);
    }, function() {
        box1(time_of_delay);
    });

// The animation function
function box1 (delay_time) { 
    var time=delay_time;
    if(time>0) {
        $(".box").slice(index).each(function() {
            $(this).hide().delay(time).show(0);
            time=time+time_of_delay;
        });   
        index=0;
    } else {
        $(".box:visible").each(function() {
            index++;
        });
        $(".box").stop(true).show(0);
    }
} 
```

**悬停时暂停** [查看演示](http://jsfiddle.net/GVhcM/7/)

这只会暂停动画并从停止的地方继续。

```
var time_of_delay = 1000; // Set the time of delay

// Start the animation
$(document).ready(function () {
  box1(time_of_delay);
});

// The hover states
$("#box1_1").hover(
  function() {
    box1(0);
  }, function() {
    box1(time_of_delay);
});

// The animation function
function box1 (delay_time) { 
    var time=delay_time;
    if(time>0) {
        $(".box:hidden").each(function() {
          $(this).delay(time).show(0);
          time=time+time_of_delay;
        });
    } else {
        $(".box").stop(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:09:18.870

我使用`setTimeout`并`clearTimeout`定期调用一个函数来增加（和重置）要显示的框。由于我分配`setTimout`给`boxt`，我可以调用`clearTimeout(boxt)`on`box1`的悬停事件，以便我可以专门停止该循环。这是我的[jsfiddle](http://jsfiddle.net/asifrc/GVhcM/3/)。它可能不是您想要达到的确切效果，但它应该是正确的功能，并且可以通过一些调整轻松适应。让我知道这是否适合您，如果您对它的工作原理有任何疑问:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:11:50.773

这是一种方法：

```
// hide all of the boxes
$('.box').hide();

// reference to each box, the current box in this list and a flag to stop the animation
var divs = box1.getElementsByClassName('box');
var i = 0;
var run = true;

// this will animate each box one after the other
function fade(){
    if(i < divs.length && run){
        $(divs[i++]).fadeIn(500, function(){
            setTimeout(fade, 1000);
        });
    }
};
fade();

// stop the above function from running when the mouse enters `box1`
$('#box1').on('mouseenter', function(){console.log('enter');
    run = false;
});

// start the function again from where we stopped it when the mouse leaves `box1`
$('#box1').on('mouseleave', function(){console.log('leave');
    run = true;
    fade();
}); 
```

演示：http: [//jsfiddle.net/louisbros/dKcn5/](http://jsfiddle.net/louisbros/dKcn5/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:25:34.137

`**[LIVE DEMO](http://jsbin.com/ibijiq/2/edit)**`

```
 var $box = $('#box1').find('.box'),
      boxN = $box.length,
      c = 0,
      intv;

  $box.eq(c).show(); // Show initially the '0' indexed .box (first one)

  function loop(){
    intv = setInterval(function(){
       $box.eq(++c%boxN).fadeTo(400,1).siblings().fadeTo(400,0);
    },1000);
  }
  loop(); // Start your loop

  $('#box1').on('mouseenter mouseleave', function( e ){
    return e.type=='mouseenter' ? (clearInterval(intv))($box.fadeTo(400,1)) : loop();
  }); 
```

Where`++c%boxN`将注意`%`使用`setInterval`.
您需要做的就是在父元素上注册一个`mouseenter`and以：`mouseleave`

*   清除 mouseenter 上的间隔 + 淡化所有元素
*   `loop`在 mouseleave 上重新启动您的功能。

# c++ - C++有符号和无符号之间的转换

> ID：15995564
> 
> 赞同：6
> 
> 时间：2013-04-14T03:45:12.417
> 
> 标签：c++, casting

考虑以下 C++ 代码：

```
#include <cstdio>

using namespace std;

int main()
{
    int ia = -5;
    unsigned int uia = ia;
    char ca = -5;
    unsigned char uca = ca;

    printf("%d\n", (ia == uia));
    printf("%d\n", (ca == uca));

    return 0;
} 
```

输出是

```
1
0 
```

我不明白`int`和之间的`char`区别`signed`是`unsigned`什么？

你能启发我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T03:58:35.583

从有符号转换为无符号时，它们的行为相同。不同之处在于`==`比较。对于 int/unsigned，它的行为与预期的一样，但是当您比较两个较小的类型时，它们都会被提升为`int`第一个。所以发生的事情是 -5 和 -5 的无符号 8 位表示都被提升为`int`然后进行比较。这些显然是不同的，无法进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:43:12.230

好的，这种不一致行为的实际原因是 char 和 unsigned 的潜在提升。我想更具体地解释一下。

首先，当与 int 和 unsigned int 变量进行比较时，它们的类型无关紧要，因为无论它们是什么类型，它们在内存中都具有相同的二进制表示，这就是 == 运算符所关心的。

而当 == 应用于 char 和 unsigned char 变量时，它们首先会扩展为对应的 32 位整数类型，而它们的扩展方式是不一致的关键。由于*ca*是一个字符，它将用符号位扩展（通过 MOVSX），而*uca*将仅用填充 0 扩展（通过 MOVZX）。因此，它们现在具有不一致的二进制表示。

汇编代码说明了这个事实。

```
 int b1 = ia == uia;
000613E5  mov         eax,dword ptr [ia]  
000613E8  xor         ecx,ecx  
000613EA  cmp         eax,dword ptr [uia]  
000613ED  sete        cl  
000613F0  mov         dword ptr [b1],ecx  
    int b2 = ca == uca;
000613F3  movsx       eax,byte ptr [ca]  
000613F7  movzx       ecx,byte ptr [uca]  
000613FB  xor         edx,edx  
000613FD  cmp         eax,ecx  
000613FF  sete        dl  
00061402  mov         dword ptr [b2],edx 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-14T03:54:25.050

有符号类型可以是负数也可以是正数。而无符号的值更高，但不能为负数。

因此，无符号整数的最大值分别为 4,294,967,296。其最小值为 0。

而有符号整数的范围是 -2,147,483,648 到 2,147,483,648。

我希望这可以帮助您了解有符号和无符号类型之间的区别。

当您想避免值为负时，此功能可以派上用场。例如对数组的引用。或者，如果您只需要大的正值而不需要负值。为了节省你需要去很长时间。

# java - Java递归绘图

> ID：15995566
> 
> 赞同：1
> 
> 时间：2013-04-14T03:45:13.993
> 
> 标签：java, recursion

这是一个作业，所以我更喜欢解释而不是直接代码。任务是像图片一样递归画圆![递归循环](https://i.stack.imgur.com/awXlm.png)

但是我无法确定绘制它的模式。乌龟类用于绘制圆圈。这是我到目前为止所管理的

```
private void draw(int level, double size){
   if(level < 0) return;
   turtle.setPenDown(true);
   turtle.drawOval(size);
   //Here I think there needs to be code to move to the positions of the other circles?
   draw(level-1,size/2);

} 
```

但当然它现在只画了这个：![到目前为止我的画](https://i.stack.imgur.com/BOVmt.png)

编辑：

也许一些代码可以提供帮助，这对我来说并不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:11:58.083

如果它必须是递归的，那么我会建议类似以下的内容，因为您要求不要返回代码，所以我只会谈论算法方面的问题。

如果我们将其视为一系列自相似的圈子，那么一般过程非常简单。

1.  检查当前行中是否有 n 个圆圈。该行被定义为您的乌龟向前/向后的任何方向。如果您愿意，可以将绘制的圆圈存储在二维列表或数组中，以便于检查。
2.  如果有n个圆圈，则向右转，否则画一个圆圈并向前移动。

这将从外向内绘制圆圈。如果您希望从内向外进行递归，则可能没有那么有意义，但它会是这样的：

1.  功能：画圆。如果可以，请右转，否则请继续前进。

2.  当总圈数等于n^2时停止

希望有帮助。

# sql-server - 相互排斥的事实。在这种情况下我应该创建一个新维度吗？

> ID：15995568
> 
> 赞同：0
> 
> 时间：2013-04-14T03:45:36.570
> 
> 标签：sql-server, ssas, olap-cube

有一个星型模式，其中包含 3 个维度（分销商、品牌、销售日期）和一个具有两个事实列的事实表：SalesAmountB 以框为单位测量为整数类型，SalesAmountH 以百升为单位测量为数字类型。最终用户想要选择要在报告中显示的事实。该报告将通过 SharePoint 2010 PPS 呈现。

因此，请帮助我确定最适合我的变体：1）添加一个新维度，例如“单位”，其中包含两个值 Boxes、Hectoliters，并为此暗淡使用内置过滤器。（虽然事实数据类型不兼容） 2）为两个事实制作两个单独的表并构建两个多维数据集。然后选择任一作为数据源。3) 保持模型不变并使用 SharePoint 中的 PPS API 选择要显示的事实。

那么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T21:11:50.657

我认为实现这一点的最佳方法是在事实表中为 SalesAmountB 和 SalesAmountH 使用单独的字段。然后在 BIDS 中创建 2 个单独的度量并通过 MDX 控制可见性。通过这样做，您可以避免复制整个数据甚至创建单独的多维数据集的复杂性。

# django - 一个基本的 django 包含标签不起作用

> ID：15995569
> 
> 赞同：0
> 
> 时间：2013-04-14T03:45:57.780
> 
> 标签：django, django-templates

我编写了一个小的 django 自定义模板标签 (inclution_tag)，我想用它来显示一个 html 表格，其中显示了我的 VehicleBrand 和 VehicleModel 模型中的车辆品牌和型号列表，但是模板标签似乎没有传递变量从模板标签中的数据库查询到html。我是 django 的新手，所以如果我遗漏了一些明显的东西，请告诉我。任何帮助将不胜感激。

**这是我的模板标签，它位于我的应用程序下的模板目录中。模板标签目录包含一个 _ *init* _.py**

```
from django import template
from castester.models import VehicleBrand

register = template.Library()

@register.inclusion_tag("brand_model_select.html")
def brand_model_select():
    brand_list = VehicleBrand.objects.all()
    return {'brand_list':brand_list} 
```

**这是我的model.py**

```
from django.db import models

class VehicleBrand(models.Model):
    description = models.CharField(max_length=100)
    code = models.SlugField(primary_key=True) 
```

**这是我的brand_model_select.html**

```
{% load castest_extras %}
<table>
    {% for brand in brand_list %}
        <tr>
            <td>{{ brand.code }}</td>
            <td>{{ brand.description }}</td>
        </tr>
    {% endfor %}
</table> 
```

**这是我从基于类的视图中调用我的 html 的 urls.conf 行。**

```
url(r'^$', TemplateView.as_view(template_name='brand_model_select.html')) 
```

**这是模型查询的输出，以证明正在从数据库中检索数据。**

```
>>> from castester.models import VehicleBrand
>>> VehicleBrand.objects.all().values()
[{'code': u'1', 'description': u'FORD'}, {'code': u'2', 'description': u'HOLDEN'}] 
```

**使用以下源呈现空白页面。我从包含标签传递的查询输出在哪里？**

```
<table>

</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:52:35.373

你不打算`brand_model_select.html`直接渲染。相反，您应该从不同的模板调用您的模板标签：

```
# in url conf
`url(r'^$', TemplateView.as_view(template_name='homepage.html'))`

# in homepage.html
{% load castest_extras %}
{% brand_model_select %} 
```

包含标签的意义在于您可以将其包含在另一个视图中。您现在所做的根本不使用模板标签；相反，它只是`brand_model_select.html`完全忽略标签。

# php - 基本 Salesforce API/PHP 脚本的问题

> ID：15995578
> 
> 赞同：0
> 
> 时间：2013-04-14T03:48:48.660
> 
> 标签：php, api, soap, salesforce

我试图通过构建一个简单的应用程序来增加我对 PHP 的了解，该应用程序利用通过 Salesforce API 获得的数据。这是我到目前为止所得到的，主要是通过复制/粘贴和查看示例代码：

```
<?php

define("USERNAME", "");
define("PASSWORD", "");
define("SECURITY_TOKEN", "");

require_once ('[file-path]/SforceEnterpriseClient.php');

$mySforceConnection = new SforceEnterpriseClient();
$mySforceConnection->createConnection("[file-path]/wsdl.jsp.xml");
$mySforceConnection->login(USERNAME, PASSWORD.SECURITY_TOKEN);

$query = "SELECT Id, FirstName, LastName, Phone from Contact";
$response = $mySforceConnection->query($query);

echo "Results of query '$query'<br/><br/>\n";
foreach ($response->records as $record) {
    // Id is on the $record, but other fields are accessed via the fields object
    echo $record->Id . ": " . $record->fields->FirstName . " "
        . $record->fields->LastName . " " . $record->fields->Phone . "<br/>\n";
}

?> 
```

问题是，当我尝试运行此脚本（[http://moneythink.org/sf-app.php](http://moneythink.org/sf-app.php)）时，服务器只返回一条错误消息；不知道为什么会这样。

非常感谢任何和所有的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T05:45:07.690

我实际上能够让这个脚本工作。这是功能代码：

```
<?php

define("USERNAME", "");
define("PASSWORD", "");
define("SECURITY_TOKEN", "");

require_once ('SforceEnterpriseClient.php');

$mySforceConnection = new SforceEnterpriseClient();
$mySforceConnection->createConnection("[path-file]/enterprise.wsdl.xml");
$mySforceConnection->login(USERNAME, PASSWORD.SECURITY_TOKEN);

$query = "SELECT Id, Name  FirstName, LastName, University__c from Contact";
$response = $mySforceConnection->query($query);

foreach ($response->records as $record) {
    echo 'ID:' .' '. $record->Id . '<br>';
    echo 'First Name:' .' '. $record->FirstName . "<br>";
    echo 'Last Name:' .' '. $record->LastName . "<br>";
    echo 'University:' .' '. $record->University__c . "<br>";
    echo "<br>\n";
}

echo "Size of records:  ".$response ->size;

?> 
```

作为这个新代码的一部分，我从 Salesforce 创建了一个新的 Enterprise WSDL，并且还从 SforceEnterpriseClient.php 中删除了文件路径（我的脚本在同一目录中）。

# c# - c#设置uploadFile内容类型

> ID：15995580
> 
> 赞同：3
> 
> 时间：2013-04-14T03:48:55.677
> 
> 标签：c#, post, file-upload

我正在尝试创建一个对我的服务器的 api 调用，这将允许我上传一个 .csv 文件。

客户端代码

```
string url = "http://testserver/testapi";
string filePath = @"C:\test.csv";
using (WebClient wc = new WebClient())
{
    wc.Headers.Add("Content-Type", "text/plain");
    byte[] responseArray = wc.UploadFile(url, filePath);
} 
```

服务器端代码

```
string savePath = testSavePath;
foreach (string f in Request.Files.AllKeys)
{
    HttpPostedFileBase file = Request.Files[f];
    file.SaveAs(savePath);
} 
```

我在这条线上遇到了一个例外`byte[] responseArray = wc.UploadFile(url, filePath);`

奇怪的是，当我看着`Request`我看到

`ContentType="multipart/form-data; boundary=---------------------8d006b7c2a5452c"`.

查看 UploadFile 的文档，我发现当`The Content-type header begins with multipart.`

我的问题是为什么 contentType 设置为 multipart 以及如何防止它这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:02:13.813

您的客户端代码似乎没问题。异常可能来自服务器端。但这很难判断，因为您没有分享例外情况。请做，你会得到更好的答案。

对于多部分内容类型：文件内容类型`WebClient.UploadFile`的标头使用值`Content-Type`（如果未设置，则默认为`application/octet-stream`），而不是整个 HTTP 请求。实际的 HTTP 请求始终是（如您所见）`multipart/form-data`（根据上传文件的 HTTP 规范），您不能（也不应该）更改它。文档中的注释是指实际文件的内容类型。这意味着您不能要求`WebClient`上传单独的多部分文件（将包装在另一个多部分 HTTP 信封中）。

# javascript - 如何在 indexeddb 中搜索字符串

> ID：15995583
> 
> 赞同：10
> 
> 时间：2013-04-14T03:49:22.737
> 
> 标签：javascript, search, indexeddb

我正在尝试在我的网站上设置搜索功能，我正在尝试查找 IndexedDB 代码

`SELECT "column" FROM "table" WHERE "column" LIKE "%keyword%"`

我在[IndexedDB 模糊搜索中找到了解决方案](https://stackoverflow.com/questions/7086180/indexeddb-fuzzy-search)

```
db.transaction(['table'], 'readonly')
    .objectStore('table')
    .openCursor(IDBKeyRange.bound(keyword, keyword + '\uffff'), 'prev')
    .onsuccess = function (e) {
        e || (e = event);
        var cursor = e.target.result;
        if (cursor) {
            console.log(cursor.value.column);
            cursor.continue();
        }
    }; 
```

但我怎样才能找到“%keyword%”而不是“%keyword”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T08:44:02.400

IndexedDB 中没有与 SQL WHERE 类似的东西。

我将遍历表/对象存储值并查看当前游标列是否包含关键字：

```
var keyword = "foo";
var transaction = db.transaction("table", "readwrite");
var objectStore = transaction.objectStore("table");
var request = objectStore.openCursor();
request.onsuccess = function(event) {
    var cursor = event.target.result;
    if (cursor) {
        if (cursor.value.column.indexOf(keyword) !== -1) {                
            console.log("We found a row with value: " + JSON.stringify(cursor.value));
        }  

        cursor.continue();          
    }
}; 
```

# ruby-on-rails - Rails 中的查询时间

> ID：15995590
> 
> 赞同：1
> 
> 时间：2013-04-14T03:50:48.170
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, rails-activerecord

我有用户表和民意调查表。假设表很大，那么在 Rails 中哪个查询会更有效：

```
User.find(user_id).polls.where('category = ?',category)
Poll.where('user_id = ? AND category = ?',user_id,category) 
```

你可以假设一个用户不能有太多的投票（平均可能有 100 个投票）。并且 user_id 和 category 都被索引了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:23:38.767

第一个等价于：

```
user  = User.find(user_id)
polls = user.polls.where(:category => category) 
```

遗嘱`User.find`发出

```
select * from users where id = ? 
```

然后该`user.polls.where(...)`部分将执行以下操作：

```
select * from polls where user_id = ? and category = ? 
```

奇怪的是，这正是平原`Poll.where(...)`会做的事情。

所以第二个应该更快，因为它不执行`select ... from users`. OTOH，如果您已经拥有用户，那么`user.polls.where(...)`可能会更有意义。

# bluej - 类：将实数设置为介于其他两个数字之间的随机数

> ID：15995599
> 
> 赞同：0
> 
> 时间：2013-04-14T03:52:06.417
> 
> 标签：bluej

在问题的数学部分遇到问题。

该类应该将值设置为其他两个数字（包括）之间的随机数。

前任。如果传入一个 20，平均值是 70，那么它会生成一个 60 到 80 之间的随机数，然后将其存储为值。

我知道公式的一部分是：（平均 - 范围/2）和（平均+范围/2）。

范围 = 传入的数字。
平均值 = 原始数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T23:18:18.110

剩下要做的就是使用`Random`对象获取范围内的随机数。这是将其中十个循环获取的代码。

```
import java.util.Random;

public class RandomNumber
{
   public static void main(String[] args) {
       int range = 20;
       int average = 70;
       int base = average - range/2;

       Random rand = new Random();

       for (int i = 0; i < 10; i++) {
           int num = rand.nextInt(range + 1) + base;
           System.out.println(num);
       }
   }
} 
```

由于调用该[`nextInt(int n)`](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextInt%28int%29)方法会返回一个从 0（含）到 n（不含）的随机数，因此您必须传递它，`range + 1`因为您希望包含范围的两端，而不仅仅是低端。使用上面使用的值，调用`rand.nextInt(range + 1)`将返回从 0 到 20 的值（包括 0 到 20）。当`base`添加 60 的值时，这些值将转换为 60 - 80。

# ios - 防止同时按下按钮

> ID：15995603
> 
> 赞同：8
> 
> 时间：2013-04-14T03:52:37.967
> 
> 标签：ios, uibutton

这是一个简单的问题，但很难解决。

我有两个执行相同功能的按钮。

我为按钮设置了不同的触摸事件。虽然这有帮助，但仍然可以同时按下它们。在慢速连接上，它会更容易。

```
[vote1Btn addTarget:self action:@selector(voteUp:) forControlEvents:UIControlEventTouchUpInside];
[vote2Btn addTarget:self action:@selector(voteUp:) forControlEvents:UIControlEventTouchDown]; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-14T04:54:31.140

将`exclusiveTouch`两个按钮的属性设置为 YES。

如果这还不够，让每个按钮`beginIgnoringInteractionEvents`在其操作开始时调用共享应用程序对象，并`endIgnoringInteractionEvents`在其操作结束时调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T07:54:27.903

```
for(UIView* v in self.view.subviews)
{
    if([v isKindOfClass:[UIButton class]])
    {
        UIButton* btn = (UIButton*)v;
        [yourButton setExclusiveTouch:YES];
    }
} 
```

这会奏效！

# mysql - 按字母顺序列出名称，按递减顺序计数

> ID：15995610
> 
> 赞同：0
> 
> 时间：2013-04-14T03:53:40.647
> 
> 标签：mysql, sql-order-by

我需要一个带有 mysql 查询的解决方案，它基本上取决于两个 order by 字段，这是场景，

我有一张桌子，比如`abc`像这样的字段，

```
auto_id  name  count_values

1        html      10  
2        css       29  
3        js        65  
4        jquery     3  
5        html5      9  
6        asp       58  
7        php       34  
8        xcode      6  
.... 
```

依此类推（超过 100 条记录）

所以我需要结果，它基本上列出了所有带有 count_values 的名称，基于
`name > alphabetically`+`count_values > maximum`

我试过了

```
Select 
  distinct name,
  count_values 
from 
  abc 
where 
  count_values > 0 
group by 
  name 
order by 
  name asc, count_values desc 
limit 0, 10; 
```

但结果是按字母顺序显示名称，因为我对不在列表中的 xcode 数据行有很大的计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:07:41.560

`count_values`这将按顺序输出 10 行最高的 10 行`name`。

```
SELECT *
FROM (SELECT name, MAX(count_values) count_values
      FROM abc
      WHERE count_values > 0
      GROUP BY name
      ORDER BY count_values DESC
      LIMIT 10) x
ORDER BY name 
```

# java - 为什么我们在 Singleton 延迟初始化中检查 null 两次？

> ID：15995611
> 
> 赞同：0
> 
> 时间：2013-04-14T03:53:43.957
> 
> 标签：java, singleton

[我在Wikipedia](http://en.wikipedia.org/wiki/Singleton_pattern)上偶然发现了此代码以获取单例模式。谁能解释两次检查 null 的目的/逻辑？

```
public class SingletonDemo {
    private static volatile SingletonDemo instance = null;

    private SingletonDemo() {       }

    public static SingletonDemo getInstance() {
            if (instance == null) {
                    synchronized (SingletonDemo .class){
                            if (instance == null) {
                                    instance = new SingletonDemo ();
                            }
                  }
            }
            return instance;
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T03:58:11.487

来自您的维基百科链接的引用：

> 此方法使用双重检查锁定

[http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java](http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:06:54.530

使用内部类进行延迟初始化比“双重检查锁定”更好：

```
public class Singleton {
  // Private constructor prevents instantiation from other classes
  private Singleton() {}

  /**
   * SingletonHolder is loaded on the first execution of Singleton.getInstance() 
   * or the first access to SingletonHolder.INSTANCE, not before.
   */
  private static class SingletonHolder { 
    private static final Singleton INSTANCE = new Singleton();
  }

  public static Singleton getInstance() {
    return SingletonHolder.INSTANCE;
  }
} 
```

**双重检查锁定**并非万无一失。**静态内部类由 JVM 保证懒惰地创建线程安全的 Singleton 类。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T03:59:52.810

假设有 2 个线程 T1 和 T2 调用相同的方法。

现在 T1 通过第一次检查，发现实例为空，然后进入睡眠状态。假设 T2 启动（可能不会一直发生，但肯定会在某些时候发生），并通过第一次检查并发现对象为空，获取锁并创建对象。

现在 T1 醒来并获得锁。此时，如果我们不再检查 null，T1 永远不会知道 T2 已经创建了一个对象。因此，双重检查。

您现在可能会问，为什么不在开始时进行同步和空值检查呢？如果我们一直同步以检查 null，那将使该方法一次只能被单个线程访问，并导致性能问题，代价是什么？只是为了在程序开始时有一些效率，当只有 2 或 3 个线程试图创建该实例时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:00:00.873

`getInstance`当`instance`is still时，可能会调用多个线程`null`。

只有一个线程会进入同步块（比如说 T1），其他线程会等待。

当 T1 将退出同步块时，其他一些线程将进入。

然后，如果没有`if (instance == null)`，`Singleton`将创建新的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-14T04:00:10.993

此代码假设并发（多个线程同时使用该类）。

代码首先尝试查看是否存在实例。如果没有，则尝试创建一个。为了避免其他线程同时执行它，它使用`synchronized`.

现在，在第一个`if (instance == null)`和第一个之间`synchronized`，另一个更快的线程可能已经挤入并创建了实例，因此代码再次检查以确保。

# c# - FluentNHibernate 这个 id 不保存

> ID：15995613
> 
> 赞同：1
> 
> 时间：2013-04-14T03:54:25.303
> 
> 标签：c#, fluent-nhibernate, nhibernate-mapping, has-many

我现在正在使用 FluentNHibernate 开始我的学习，但遇到了很大的困难。这些是我的对象：

```
public class Region
{
  public virtual Int64 Id { get; set; }
  public virtual string Name { get; set; }
  public virtual IList<City> ListCity { get; set; }
  public Region()
  {
   ListCity = new List<City>();
  }
 }
public class City
{
 public virtual Int64 Id { get; set; }
 public virtual string Name { get; set; }         
} 
```

这是映射：

```
public class RegionMap : ClassMap<Region>
{
        public RegionMap()
        {
            Table("tbRegion");
            Id(x => x.Id)
                .Column("Num_ID");
            Map(x => x.Name)
                .Column("Des_Name")
                .Not.Nullable();
            HasMany<City>(x => x.ListCity)
                .Inverse()
                .Cascade.SaveUpdate()
                .AsBag();

        }
    }

 public class CityMap : ClassMap<City>
    {
        public CityMap()
        {
            Table("tbCity");
            Id(x => x.Id)
                .Column("Num_ID");
            Map(x => x.Name)
                .Column("Des_City")
                .Not.Nullable();
        }
    } 
```

到目前为止，我认为还可以。我以前自己的Hibernate生成数据库 一个简单的代码来测试映射：

```
List<City> lcity = new List<City>();
lcity.Add(new City()
{
  Name = "Belo-Horizonte"
});
Region region = new Region()
{
    ListCity = lcity,
    Name = "Minas Gerais"
};
Repository.Connect(s => s.Save(region)); 
```

看看我的结果

Num_ID Des_Name

1 米纳斯吉拉斯州

Num_ID Des_City Region_id

1 Belo-Horizo​​nte NULL

为什么没有填写REGION_ID？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T18:43:34.783

你必须教它做什么`REGION_ID`——你的映射没有说明它。

不确定我是否明白它是什么 - 但看起来它是 City 表中的区域外键，所以很可能你需要使用这样的东西`RegionMap`：

```
 HasMany<City>(x => x.ListCity)

            // Provide column key to reference by
            .KeyColumnNames.Add("REGION_ID")

            .Inverse()
            .Cascade.SaveUpdate()
            .AsBag(); 
```

# java - 每个 JSpinner 对象都有自己的 Model 对象吗？

> ID：15995614
> 
> 赞同：0
> 
> 时间：2013-04-14T03:54:54.933
> 
> 标签：java, swing, model-view-controller, jlist, jspinner

我对 MVC 框架有所了解，但这一点让我有点困惑。因此，如果我有一个 JComponent，例如 JList 或 JSpinner，那么他们就有模型来存储他们的数据。那么 JList 或 JSpinner 的每个实例（对象）是否都有自己专用的 ListModel 或 SpinnerModel 实例？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T03:57:47.003

默认情况下，是的。但是，可以在相似的 JComponent 之间共享模型（即 2 个 JList 可以共享同一个 ListModel）。但是，这并不典型，您必须自己明确编码。

# html - 如何在不影响主导航的情况下设置 CSS 子导航的样式

> ID：15995618
> 
> 赞同：1
> 
> 时间：2013-04-14T03:55:40.810
> 
> 标签：html, css

[http://jsfiddle.net/uuyVY/](http://jsfiddle.net/uuyVY/)

截图[http://i.imgur.com/wMzSQ1B.png](http://i.imgur.com/wMzSQ1B.png)

我试图让子导航全白并跨越整个包含 div（宽 1100 像素），仅垂直显示文本链接，但无法在不影响主导航背景图像的情况下关闭子导航 li 背景图像.

```
 ul#horiznav, #horiznav ul {
    /*remove the bullets from the dropdown ul as well*/
    margin:0;
    padding:0;
    list-style-type:none;
    height:53px;
     font-size:10px;
}
#horiznav li {
    float:left;
    width:150px;
    position:relative
    /*set position:relative as the start point for absolutely positioning the dropdown*/
}
#horiznav li a {
    display:block;
    width:150px;
    line-height:30px;
    text-align:center;
    color:white;
    text-decoration:none;
}
#horiznav li.trees a, #horiznav li.trees {
    width:198px;
    height:53px;
    background-image:url(http://i.imgur.com/7Urmvtg.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.lights a, #horiznav li.lights {
    width:55px;
    height:45px;
    background-image:url(http://i.imgur.com/dB0kyqA.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.ornaments a, #horiznav li.ornaments {
    width:84px;
    height:45px;
    background-image:url(http://i.imgur.com/OKAhP2U.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#ornamentsSUB li a, #horiznav li a:hover;
 #horiznav li {
    width:150px;
    height:30px;
    background-color:red;
}
#horiznav li.wreaths a, #horiznav li.wreaths {
    width:138px;
    height:45px;
    background-image:url(http://i.imgur.com/G9iZZoB.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.christmasdecor a, #horiznav li.christmasdecor {
    width:163px;
    height:45px;
    background-image:url(http://i.imgur.com/9W1q97q.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.commercial a, #horiznav li.commercial {
    width:90px;
    height:45px;
    background-image:url(http://i.imgur.com/2Hcpq1X.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.homedecor a, #horiznav li.homedecor {
    width:90px;
    height:45px;
    background-image:url(http://i.imgur.com/cy5BO92.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.outdoor a, #horiznav li.outdoor {
    width:112px;
    height:45px;
    background-image:url(http://i.imgur.com/fLRrWMs.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.otherholiday a, #horiznav li.otherholiday {
    width:111px;
    height:45px;
    background-image:url(http://i.imgur.com/AjGVCeK.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li.more a, #horiznav li.more {
    width:69px;
    height:53px;
    background-image:url(http://i.imgur.com/V1Y7kCy.png);
    background-repeat:no-repeat;
    background-position: center center;
}
#horiznav li a:hover {
    color:#333333
}
#horiznav li ul {
    display:none;
    /*hide the dropdown*/
    position:absolute;
    /*position it absolutely..*/
    left:0;
    /*...align the left edge with the left edge of the parent li...*/
    top:35px
    /*...and 32px down from the top - 30px height + 2px for the border*/
}
#horiznav li:hover ul {
    display:block
    /*display the ul when the parent li is hovered*/
}
#horiznav li ul a {
    background-color:white;
    background-image:none;
    color:#000000;
}

 <div id="navWrap">
    <ul id="horiznav">
        <li class="trees"><a href="#">ARTIFICIAL CHRISTMAS TREES</a>

            <ul>
                <li><a href="#">Item 2.1</a>
                </li>
                <li><a href="#">Item 2.2</a>
                </li>
            </ul>
        </li>
        <li class="lights"><a href="#">LIGHTS</a>

            <ul>
                <li><a href="#">Item 2.1</a>
                </li>
                <li><a href="#">Item 2.2</a>
                </li>
            </ul>
        </li>
        <li class="ornaments"><a href="#">ORNAMENTS</a>

            <ul>
                <li><a href="#">Item 3.1</a>
                </li>
                <li><a href="#">Item 3.2</a>
                </li>
                <li><a href="#">Item 3.3</a>
                </li>
            </ul>
        </li>
        <li class="wreaths"><a href="#">WREATHS &amp; GARLAND</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="christmasdecor"><a href="#">CHRISTMAS DECORATIONS</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="commercial"><a href="#">COMMERCIAL</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="homedecor"><a href="#">HOME DECOR</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="outdoor"><a href="#">OUTDOOR LIVING</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="otherholiday"><a href="#">MORE HOLIDAYS</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
        <li class="more"><a href="#">MORE...</a>

            <ul>
                <li><a href="#">Item 4.1</a>
                </li>
                <li><a href="#">Item 4.2</a>
                </li>
                <li><a href="#">Item 4.3</a>
                </li>
            </ul>
        </li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:31:55.720

像这样的东西？

```
#horiznav li:hover ul a
{
    background: white;
    color: red;
    background-image: none;
} 
```

# asp.net-mvc - 为什么 StyleBundle css 在我的 ASP MVC 中呈现为 html doctype

> ID：15995619
> 
> 赞同：0
> 
> 时间：2013-04-14T03:56:17.717
> 
> 标签：asp.net-mvc

为什么我的 StyleBundle 呈现为 html 而不是最小化样式？相同的代码 "@Styles.Render("~/Content/css")" 在除我的登录页面之外的任何其他页面上呈现正确。任何想法？

![在此处输入图像描述](https://i.stack.imgur.com/04dxS.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:57:44.020

有几件事要检查。首先检查你的包的定义：检查名称、路径以及所有文件是否存在。如果您确定一切正确，请检查应用程序错误：您可以安装 elmah 或在 Global.asax 中处理 Application_Error。您看到的页面而不是 css 它是错误页面或主页，因此存在错误 inbundle 定义或路由

# java - 容易旋转的矩形碰撞

> ID：15995621
> 
> 赞同：1
> 
> 时间：2013-04-14T03:56:43.153
> 
> 标签：java, awt, collision-detection, java-2d, rectangles

我正在使用 LibGDX 制作游戏，但遇到了有关矩形碰撞检测的问题。

```
public class Rectangle{
   final float width = 1f;
   final float height = 0.5f;
   Point topLeft;
   Point topRight;
   Point bottomRight;
   Point bottomLeft;  
   //The point of rotation is the middle of the rectangle
   float angle;
}

public class Point{
   float x;
   float y;
} 
```

使用这些信息（所有这些变量都将预先计算），我想计算两个矩形是否完全重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T19:51:57.023

如果两个矩形相交，则一个矩形内将有一个点，该点也在另一个矩形内。

您可以将每个矩形视为四条线。要在矩形内，一个点必须位于左线的右侧、右线的左侧、底线上方和顶线下方。因此，矩形可以表示为具有解的四个线性不等式的系统。

如果将一个矩形的四个线性不等式与另一个矩形的四个线性不等式组合成一个八不等式系统，则新系统只有在矩形相交时才有解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T00:24:21.180

这是我最终使用的，请注意，我根本不想优化代码。

```
private boolean isColliding(Point p){
    float countCol = 0f;
    // BottomLeft - BottomRight
    float slope = ((player.getBottomLeft().getY() - player.getBottomRight().getY()) / (player.getBottomLeft().getX() - player.getBottomRight().getX()));
    float intercept = (player.getBottomLeft().getY() - (player.getBottomLeft().getX() * slope));

    // BottomLeft - TopLeft
    float slope2 = ((player.getBottomLeft().getY() - player.getTopLeft().getY()) / (player.getBottomLeft().getX() - player.getTopLeft().getX()));
    float intercept2 = (player.getTopLeft().getY() - (player.getTopLeft().getX() * slope2));

    // TopLeft - TopRight
    float slope3 = ((player.getTopLeft().getY() - player.getTopRight().getY()) / (player.getTopLeft().getX() - player.getTopRight().getX()));
    float intercept3 = (player.getTopRight().getY() - (player.getTopRight().getX() * slope3));

    // TopRight - BottomRight
    float slope4 = ((player.getTopRight().getY() - player.getBottomRight().getY()) / (player.getTopRight().getX() - player.getBottomRight().getX()));
    float intercept4 = (player.getBottomRight().getY() - (player.getBottomRight().getX() * slope4));

    // Between top and bottom
    if(player.getAngle() > -90 && player.getAngle() < 90){
        // BottomLeft - BottomRight
        if(p.getX() * slope + intercept < p.getY()){
            countCol += 1;
        }

        // TopLeft - TopRight
        if(p.getX() * slope3 + intercept3 > p.getY()){
            countCol += 1;
        }
    }
    else{
        // BottomLeft - BottomRight
        if(p.getX() * slope + intercept > p.getY()){
            countCol += 1;
        }

        // TopLeft - TopRight
        if(p.getX() * slope3 + intercept3 < p.getY()){
            countCol += 1;
        }
    }

    // BottomLeft - TopLeft
    if(player.getAngle() < 0){
        if(p.getX() * slope2 + intercept2 > p.getY()){
            countCol += 1;
        }
        if(p.getX() * slope4 + intercept4 < p.getY()){
            countCol += 1;
        }
    }
    else{
        if(p.getX() * slope2 + intercept2 < p.getY()){
            countCol += 1;
        }
        if(p.getX() * slope4 + intercept4 > p.getY()){
            countCol += 1;
        }
    }

    if(countCol >= 4){
        return true;
    }
    return false;
} 
```

# c# - 如何避免在我的应用程序的 url 中注入脚本？

> ID：15995622
> 
> 赞同：0
> 
> 时间：2013-04-14T03:57:03.593
> 
> 标签：c#, asp.net, xss

我是一名新的 ASP.NET 开发人员，我的导师强迫我开发一个安全的网站/基于 Web 的应用程序。在提交我的第一个应用程序后，他告诉我该应用程序容易受到跨站点脚本的攻击，他通过要求我将应用程序的 URL 从以下位置更改为证明了这一点：

```
http://localhost/testapp/default.aspx 
```

至

```
http://localhost/testapp/default.aspx?--></script><script>alert(30999)</script> 
```

我得到一个显示 30999 的弹出窗口。

**那么如何防范这种漏洞呢？**

我在网上搜索，发现 ASP.NET 中的 RequestValidate 功能应该可以防止这种攻击，但是为什么它在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:12:50.900

这种问题被 ASP.NET 中的 RequestValidate 功能阻止，[http: //weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net- mvc.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/preventing-javascript-encoding-xss-attacks-in-asp-net-mvc.aspx)这将为您提供详细的帮助。我看到它没有停止的原因之一是，而不是在开始

# transparency - jQuery：滚动时更改元素的不透明度

> ID：15995623
> 
> 赞同：0
> 
> 时间：2013-04-14T03:57:06.430
> 
> 标签：transparency, opacity

如何在滚动时更改元素 mm 的不透明度，例如内容？我的意思是，当页面滚动时，我希望我的图层是半透明的，但是当我停止滚动时，希望它恢复到不透明的样式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-23T14:52:28.433

这个脚本对我有用。我想在前 150 像素期间显示一条消息，因此不透明度将从 1 运行到 0。

```
 $(document).ready(function(){
        $(document).scroll(function(){
            var top=$(this).scrollTop();
            if(top<150){
                var dif=1-top/150;
                $(".title").css({opacity:dif});
            }
        })
    }); 
```

# c# - 如何使用 SqlDataAdapter 从 EXCEL 文件中将数据保存到数据库读取

> ID：15995628
> 
> 赞同：0
> 
> 时间：2013-04-14T03:58:13.820
> 
> 标签：c#, excel, datatable, oledb, sqldataadapter

我正在尝试将数据保存到从 Excel 文件中检索的数据库中。为此，我正在使用 SqlDataAdapter。但是数据没有得到保存。除 excel 数据外，其他数据均已正确保存。问题仅在于excel数据。这是我的代码：

```
public static void Update(DataTable dt)
    {

        using (SqlConnection connection = new SqlConnection(CONNECTION_STRING))
        {
            connection.Open();
            var adapter = new SqlDataAdapter();
            adapter.InsertCommand = new SqlCommand("INSERT INTO tblsupplierorderitems (color, size) VALUES (@color , @size)", connection);
            adapter.InsertCommand.Parameters.Add("@color", SqlDbType.VarChar, 40, "color");
            adapter.InsertCommand.Parameters.Add("@size", SqlDbType.VarChar, 24, "size");

            adapter.Update(dt);
        }

    } 
```

有什么建议可以完成这项工作吗？我还需要从 DataTable dt 中删除空行。

# java - 如何读取 gzip 压缩的 HTTP 响应？

> ID：15995630
> 
> 赞同：0
> 
> 时间：2013-04-14T03:58:28.320
> 
> 标签：java, http, tcp

以下代码用于每五秒从网站获取响应，但根据数据包分析器（例如 wireshark），结果总是有问题。我猜可能 HTTP 响应是用 GZIP 压缩的，读取时可能有问题。当我执行代码时，我可以`Finishied`在 Eclipse 中获得多个（***这意味着读取响应已完成***`GET / 1.1`），但根据数据包分析器我只能发送几个。为什么？如果我注释代码`Thread.sleep(1000*5);`，我会`Finished`很快看到（太快，根据我的网络速度这是不正常的），但`GET / 1.1`仍然很慢。代码有什么问题？

```
public class pediy {

    public static void main(String[] args) throws IOException {

        URL url = new URL("http://bbs.pediy.com");
        String request = "GET / HTTP/1.1\r\nHost: bbs.pediy.com\r\nProxy-Connection: keep-alive\r\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\r\nUser-Agent: Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17 CoolNovo/2.0.6.12\r\nAccept-Encoding: gzip,deflate,sdch\r\nAccept-Language: en-US;q=0.6,en;q=0.4\r\nAccept-Charset: utf-8;q=0.7,*;q=0.3\r\n";

        Socket socket = null;
        PrintWriter os = null;
        BufferedReader is = null;
        InputStreamReader isr = null;

        while(true) {

            socket = new Socket(url.getHost(), 80);
            os = new PrintWriter(socket.getOutputStream());
            isr = new InputStreamReader(socket.getInputStream());
            is=new BufferedReader(isr);

            try {
                while (true) {

                    os.println(request);
                    os.flush();

                    while(is.read() != -1);

                    System.out.println("Finished");

                    Thread.sleep(1000*5);
                }

            } catch (Exception e) {
                System.out.println("Error" + e);
            } finally {
                CloseAll(socket, os, is, isr);
            }
        }
    }

    private static void CloseAll(Socket socket, PrintWriter os, BufferedReader is, InputStreamReader isr) throws IOException {
        if(socket != null) socket.close();
        if(os != null) os.close();
        if(is != null) is.close();
        if(isr != null) isr.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:46:17.130

你没有分配的是。BufferedReader is = null; 你需要分配的是 socket.getInputStream()

```
 is = new BufferedReader(new InputStreamReader(socket.getInputStream())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T07:13:02.577

这里的一个问题是 HTTP 中的换行符`\r\n`不仅仅是`\n`. 另一个是您的请求需要在标题后以空行结束。另一个是您说的是 HTTP 1.1，但您没有发送 Content-Length。另一个是您正在将流读取到 EOS，然后期望能够写入另一个请求并读取另一个响应。那是行不通的：EOS 意味着对等方已经关闭了连接。你为什么不用`HttpURLConnection`这个？

# c++ - 为什么当我做了一个小改动时，我会收到错误说事情没有声明？当他们在

> ID：15995633
> 
> 赞同：0
> 
> 时间：2013-04-14T03:58:55.993
> 
> 标签：c++, compiler-errors, linker-errors, forward-declaration

我有一个包含 20 多个类/头文件的程序。一切都很顺利，直到我昨天开始做一些改变。从字面上看，我花了很长时间才发现我需要在其中一个标题上进行前向声明。虽然我昨天有同样的工作并且它没有使用类的前向声明。

我让它编译并正确运行。我尝试再添加一种方法。我又开始遇到所有这些可怕的错误！就像我说的，昨天所有这些东西都在工作，不知何故我做了一个改变，并不断收到错误说“生物尚未被声明”，即使我没有改变那个类或任何东西..以及同样的错误其他类和这些类的其他对象。

标头包含在它说错误所在的文件中 - 我什至可能添加了额外的包含只是为了尝试一下。这太令人沮丧了，我花了几个小时试图弄清楚如何回到昨天的状态。我尝试简单地添加另一个功能，同样的事情发生了！！请帮助我解决这种持续的挫败感。这是我得到的当前错误：

```
g++ -c Ammunition.cpp -o Ammunition.o -std=c++0x
g++ -c Armor.cpp -o Armor.o -std=c++0x
g++ -c Consumable.cpp -o Consumable.o -std=c++0x
g++ -c Creature.cpp -o Creature.o -std=c++0x
In file included from DungeonLevel.h:4:0,
             from Creature.h:5,
             from Creature.cpp:1:
Tile.h:15:19: error: ‘Creature’ has not been declared
Tile.h:16:2: error: ‘Creature’ does not name a type
Tile.h:38:2: error: ‘Creature’ does not name a type
In file included from DungeonLevel.h:7:0,
             from Creature.h:5,
             from Creature.cpp:1:
Player.h:9:32: error: expected class-name before ‘{’ token
make: *** [Creature.o] Error 1 
```

* * *

## 这是错误所在的头文件和片段

**地牢等级.h**

```
#include "Tile.h"
#include <vector>
#include <random>
#include "Player.h"

class Player; //This is how I fixed the error that took me all day when "Player" was not
              //declared. If you take it out, You'll get error "Player not declared"
class DungeonLevel {
public:
    DungeonLevel(int iWidth, int iHeight, std::mt19937 & randomGen);
    ~DungeonLevel(void);

    void dump();
    char at(int x, int y);

    void placeInGame(Player& playerToPlace, std::mt19937 & randomGen);
    int getWidth();
    int getHeight();

private:
    std::vector<std::vector<Tile>> m_vvTiles; //Tile was char

}; 
```

## 地牢关卡.cpp

```
#include <iostream>
#include <random>
#include "Tile.h"
#include "DungeonLevel.h"
#include "Player.h"

using namespace std;

void DungeonLevel::placeInGame(Player & playerToPlace, std::mt19937 & randomGen$
    int x;
    int y;
    do {
            y = randomGen() % 20;
            x = randomGen() % 79;
    } while (m_vvTiles[y][x].getDisplayChar() != '.');

    m_vvTiles[y][x].setCreature(&playerToPlace);
}
//Then other code that I don't think is needed 
```

## 生物.h

```
#include "Entity.h"
#include "DungeonLevel.h"

class Creature : public Entity {

public:
    Creature(void);
    virtual ~Creature(void);

    virtual void dumpObject();
    virtual void dumpObjectData();
    virtual void writeFragment(std::ostream & output);
    virtual void writeDataAsFragment(std::ostream & output);
    virtual void setElementData(std::string elementName, std::string elemen$

    virtual void move(int dir, DungeonLevel & dl);

    virtual void setXLoc(int xToSet);
    virtual int getXLoc();
    virtual void setYLoc(int yToSet);
    virtual int getYLoc();

    virtual int getLevel();
    virtual void setLevel(int levelToSet);
    virtual int getHP();
    virtual void setHP(int HPToSet);
    virtual int getMaxHP();
    virtual void setMaxHP(int maxHPToSet);

private:
    int xLoc;
    int yLoc;
    int level;
    int HP;
    int maxHP;

    // Not worried about inventory yet...
    //std::vector<Item*> m_vInventory;

}; 
```

## 生物.cpp

```
#include "Creature.h"
#include <cstdlib>
#include "DungeonLevel.h"

using namespace std;

Creature::Creature(void){
    HP = 0;
    maxHP = 0;
    level = 0;
}

Creature::~Creature(void){

}

void Creature::move(int dir, DungeonLevel & dl){
    //If I take the DungeonLevel & dl param. out.. I don't get errors
}

void Creature::dumpObject(){
    cout << "Creature:" << endl;
    dumpObjectData();
}
//The rest shouldn't be needed 
```

## 瓷砖.h

```
#include "Creature.h"
#include "Item.h"

#include <vector>

class Tile : public Entity {
public:
    Tile(void);
    Tile(char ch);
    virtual ~Tile(void);
    void setCreature(Creature * creatureToSet);
    Creature * getCreature();
    void setDisplayChar(char displayCharToSet);
    char getDisplayChar();

private:
    char displayChar;
    Creature * theCreature;
    std::vector<Item*> inventory;
}; 
```

## 瓷砖.cpp

```
#include "Tile.h"
#include "Entity.h"

using namespace std;

Tile::Tile(void){
    displayChar = ' ';
    theCreature = NULL;

}

Tile::Tile(char ch) {
    setDisplayChar(ch);
    theCreature = NULL;
}

Tile::~Tile(void){

}

void Tile::setDisplayChar(char displayCharToSet){
    displayChar = displayCharToSet;
}

char Tile::getDisplayChar(){

    if ( theCreature != NULL ){
            return theCreature->getDisplayChar();
    }
    else {
            return displayChar;
    }
}

void Tile::setCreature(Creature * creatureToSet){
    theCreature = creatureToSet;
}

Creature * Tile::getCreature(){
    return theCreature;
} 
```

## 播放器.h

```
#include "Creature.h"
#include "Weapon.h"
#include "Armor.h"
#include "DungeonLevel.h"

class Player : public Creature {

public:
    Player(void);
    virtual ~Player(void);

    virtual void dumpObject();
    virtual void dumpObjectData();
    virtual void writeFragment(std::ostream & output);
    virtual void writeDataAsFragment(std::ostream & output);
    virtual void setElementData(std::string elementName, std::string elemen$

    virtual int getScore();
    virtual void setScore(int scoreToSet);
    virtual int getXp();
    virtual void setXp(int xpToSet);

    virtual void setPlayerWeapon(Weapon* playerWeaponToSet);
    virtual Weapon* getPlayerWeapon();
    virtual void setPlayerArmor(Armor* playerArmorToSet);
    virtual Armor* getPlayerArmor();

private:
    //Creature provides level, HP, and maxHP
    int score;
    int xp;
    Weapon * playerWeapon;
    Armor * playerArmor;
}; 
```

## 播放器.cpp

```
#include "Player.h"
#include "Creature.h"

#include <cstdlib>

using namespace std;

Player::Player(void){
    setMaxHP(25);
    setHP(getMaxHP());
    setLevel(1);
    setDisplayChar('o');
    score = 0;
    xp = 0;
}

Player::~Player(void){

}
//the rest shouldn't be needed 
```

* * *

请帮助我，谢谢！让我知道是否需要提供更多。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:02:51.710

您的包含中有循环依赖项。DungeonLevel.h 包含 Player.h，反之亦然。由于包含守卫的性质，一个总是在另一个之前，但是顺序可以通过小的变化来交换。

您必须删除循环依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:10:52.503

添加到@pubby 所写的内容。您应该为所有文件添加包含保护。避免循环依赖问题。

`#ifndef _FILENAME_H_`

`#define _FILENAME_H_`

// 文件中的所有内容都放在这里

`#endif // _FILENAME_H_`

其中 _FILENAME_H_ 是我们的头文件的名称。即使您有循环依赖，这也将确保所有内容都只会包含一次。但是，当您需要在其他内容之前包含某些内容时，循环依赖可能会导致其他问题。因此，应尽可能避免循环依赖。

# php - 使用 MySQL 和 PHP 进行多个下拉选择

> ID：15995635
> 
> 赞同：0
> 
> 时间：2013-04-14T03:59:23.343
> 
> 标签：php, mysql

我想显示多个下拉菜单。

如果用户在第一个下拉菜单中选择 TOUCH，则第二个下拉菜单应显示 12MP 和 17MP

如果用户在第一个下拉菜单中选择键盘，那么第二个下拉菜单应显示 16MP 和 19MP

...

我正在使用的 php 代码只显示一个下拉菜单。kindle请帮我解决这个问题...

**MySQL - 表**

```
id   Name         Feature       Camera
1  Samsung       Touch          12MP
2  Nokia         Touch          17MP
3  LG            Multi-Touch    16MP
4  Apple         Keypad         16MP
5  Sony          Keypad         19MP
6  Onida         Keypad+Touch   17MP
7  HTC           Keypad+Touch   15MP
8  Black Berry   Multi-Touch    15MP 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T06:37:52.453

好吧，这个主题在许多站点和论坛中都可以找到，甚至可以下载代码。但一般来说，您需要将第一个下拉列表的值发送到控制器（框架）或任何 PHP 文件来处理它和从数据库查询详细信息。并使用查询的数据生成/创建下一个下拉列表！对于所有这些，您最好使用 ajax。Jquery 有一个非常好用且易于使用的 ajax 函数，您可以使用它来完成以上所有操作！看看这里： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# jquery - 修改 href 属性（在此 JSFiddle 中）以使用 Fancybox 中的 youtube 视频

> ID：15995636
> 
> 赞同：0
> 
> 时间：2013-04-14T03:59:27.603
> 
> 标签：jquery, html, youtube, fancybox, fancybox-2

自从从 Fancybox 1.3.4 升级到 Fancybox 2.1.4 后，我无法获得正确的`href`属性来处理我的 youtube 视频。

请看一下我正在尝试修改的这个工作[jsfiddle 。](http://jsfiddle.net/yZWv3/)

简单地说，我要做的就是`&amp;autoplay=1`从每个链接的 URL 中删除尾随，并将其添加到`href`脚本内的属性中。当我尝试这样做时，fancybox 会打开，但 youtube 视频无法播放并报告一般错误。

有人可以帮我将此代码修改为工作版本吗？

这是html：

```
<a href="http://www.youtube.com/watch?v=opj24KnzrWo&amp;autoplay=1">open youtube video</a>

<br />

<a href="http://www.youtube.com/watch?v=071KqJu7WVo&amp;autoplay=1">open youtube video 2</a> 
```

和javascript：

```
(function ($) {
  $(document).ready(function(){
    $('a[href*=youtube]').each(function () {
        // convert youtube swf href to embed for iframe
        var thisHref = this.href.replace(new RegExp("watch\\?v=", "i"), 'embed/').replace(new RegExp("&", "i"), '?');
        // bind fancybox to each anchor
        $(this).fancybox({
        "padding": 0,
        "type": 'iframe',
        // add trailing parameters to href (wmode)
        "href" : thisHref+"&amp;wmode=opaque"
        }); // fancybox
    }); // each
  }); // ready
})(jQuery);` 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T07:07:42.070

对于这种没有任何尾随参数的链接：

```
<a href="http://www.youtube.com/watch?v=opj24KnzrWo">open youtube video</a>
<a href="http://www.youtube.com/watch?v=071KqJu7WVo">open youtube video 2</a> 
```

使用此代码

```
(function ($) {
  $(document).ready(function(){
    $('a[href*=youtube]').each(function () {
        // convert youtube swf href to embed for iframe
        var thisHref = this.href.replace(new RegExp("watch\\?v=", "i"), 'embed/');
        // bind fancybox to each anchor
        $(this).fancybox({
            "padding": 0,
            "type": 'iframe',
            // add trailing parameters to href (wmode) AND autoplay    
            "href" : thisHref+"?wmode=opaque&amp;autoplay=1"
        }); // fancybox
    }); // each
  }); // ready
})(jQuery); 
```

您在上一个示例中遇到的问题`wmode=opaque`是您的**第二个**参数，因此它需要前面的`&amp;`

```
"href" : thisHref+"&amp;wmode=opaque" 
```

但是由于您要从链接中删除所有尾随参数，因此成为`wmode=opaque`第**一个**参数，因此它需要一个前面的参数`?`

```
"href" : thisHref+"?wmode=opaque&amp;autoplay=1" 
```

查看新的**[JSFIDDLE](http://jsfiddle.net/7rEtS/)**

# responsive-design - 如何让新的 Zurb Foundation 支持 IE 7+？

> ID：15995637
> 
> 赞同：5
> 
> 时间：2013-04-14T03:59:29.747
> 
> 标签：responsive-design, zurb-foundation

我最近建立了一个响应式网站。我使用[Zurb Foundation](http://foundation.zurb.com)是因为一些建议和文章是提高响应式网站效率的最佳解决方案。但问题是，Foundation 的新版本不支持 IE 7+，如您[在此处](http://foundation.zurb.com/docs/support.html)看到的，但我希望我的网站支持所有 IE 版本。有些人建议使用旧的 Foundation（即第 3 节）。但我认为最新版本是最好的。

我的问题是，有什么解决方案可以让新的 Foundation（第 4 版）支持 IE？我需要建议，因为我在这里。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T10:46:41.273

IE7 和 IE8 的问题在于它们没有内置对媒体查询的支持。

不过，有一些选项**可能会对**您有所帮助，[跨浏览器 polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)可为旧浏览器添加媒体查询支持。

最受欢迎的两个是[respond.js](https://github.com/scottjehl/Respond)和[css3-mediaqueries.js](http://code.google.com/p/css3-mediaqueries-js/)。我在这两个方面都取得了成功。

在页面的顶部，您测试浏览器并在必要时加载这些脚本之一。

我过去这样做的方法是使用条件注释：

```
<!--[if (lt IE 9) & (!IEMobile)]>
<script src="path-to/respond.js"></script>
<![endif]--> 
```

或使用[modernizr](http://modernizr.com)

```
Modernizr.load([
{
// The test: does the browser understand Media Queries?
test : Modernizr.mq('only all'),
// If not, load the respond.js file
nope : '/js/respond.js'
}
]); 
```

这两种方法都很容易尝试，即使在这种特定情况下对您没有帮助，您也可能有机会在另一个站点上再次尝试它们。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T18:21:47.060

我写了这个[http://justthisguy.co.uk/responsive-sass-and-ie/](http://justthisguy.co.uk/responsive-sass-and-ie/)，它着眼于使用引导程序并让 sass 生成一个默认为桌面视图的 ie7 样式表。我将在某个时候开发它的基础版本。它会导致一些 css 规则的重复，但可以使用[https://github.com/addyosmani/grunt-uncss之类的东西来删除该重复](https://github.com/addyosmani/grunt-uncss)

# php - 使用 glob 函数包含不同的图像参数

> ID：15995640
> 
> 赞同：0
> 
> 时间：2013-04-14T03:59:54.277
> 
> 标签：php

```
$pictures = glob(path('public') . 'uploads/galleries/' . $dir_name . '/' . '*.jpg'); 
```

现在它只`.jpg`从目录中检索文件。但是，我希望它也能检索 .JPG、.png、.PNG 或其他格式。

我想知道是否`*.jpg`可以像这样使用；`*.jpg|*.JPG|*.png|*.PNG`或者如果我可以附加一个基本上做同样事情的正则表达式。

如果`glob()`不支持这样的使用，你对这个任务有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:15:17.507

使用花括号：

```
'*.{jpg,JPG,png,PNG}' 
```

# python - matplotlib imshow 未更新

> ID：15995644
> 
> 赞同：1
> 
> 时间：2013-04-14T04:00:22.750
> 
> 标签：python, matplotlib, plot

我正在尝试以数值方式求解热方程，并使用颜色映射实时可视化解。但是，地图中的颜色不会更新。是什么原因？这是代码：

```
from __future__ import division
from pylab import *

dx, dy = 0.01, 0.01
D = 0.01
dx2, dy2 = dx**2 ,dy**2
dt = (dx2*dy2)/(2*D*(dx2+dy2))
endt = 0.1
Nt = int (endt/dt)
endX,endY = 1,1
nx, ny = int(endX/dx), int(endY/dy)
T = zeros([nx,ny])
Tcopy = zeros([nx,ny])
"""initial conditions"""

for i in range(nx):
 for j in range(ny):
  if( ((i*dx - 0.5)**2 +(j*dy - 0.5)**2 < 0.1) and ((i*dx - 0.5)**2 +(j*dy - 0.5)**2 >0.05) ):
   T[i][j] = 10

def integrate(T,Tcopy):

 T[1:-1, 1:-1] = Tcopy[1:-1, 1:-1] + D*dt*( (Tcopy[2:, 1:-1] - 2*Tcopy[1:-1, 1:-1] + T[:-2, 1:-1])/dx2 + (Tcopy[1:-1, 2:] - 2*Tcopy[1:-1, 1:-1] + T[1:-1, :-2])/dy2  )
 Tcopy = copy(T)
 return Tcopy,T

x = arange(0, endX, dx)
y = arange(0, endY, dy)
X,Y = meshgrid(x, y)

"""creating the plot"""

fig, ax_lst = plt.subplots(1, 1)
im = ax_lst.imshow(T, interpolation='nearest',
                            origin='bottom',
                            aspect='auto',
                            vmin=np.min(T),
                            vmax=np.max(T),
                            cmap='hot',extent=[0,1,0,1])
fig.colorbar(im)

"""main loop"""

for t in range(Nt):
 im.set_data(T)
 plt.draw()
 plt.pause(0.1)
 Tcopy,T = integrate(T,Tcopy) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:18:21.433

如果您希望颜色条表示的范围更改动画的每一帧，请按如下方式修改您的 for 循环：

```
for t in range(Nt):
 im.set_data(T)
 im.set_clim(T.min(),T.max())
 plt.draw()
 plt.pause(0.1)
 Tcopy,T = integrate(T,Tcopy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:41:03.763

比较左右：

```
from __future__ import division
from pylab import *

dx, dy = 0.01, 0.01
D = 0.01
dx2, dy2 = dx**2 ,dy**2
dt = (dx2*dy2)/(2*D*(dx2+dy2))
endt = 0.1
Nt = int (endt/dt)
endX,endY = 1,1
nx, ny = int(endX/dx), int(endY/dy)
T = zeros([nx,ny])
Tcopy = zeros([nx,ny])
"""initial conditions"""

for i in range(nx):
 for j in range(ny):
  if( ((i*dx - 0.5)**2 +(j*dy - 0.5)**2 < 0.1) and ((i*dx - 0.5)**2 +(j*dy - 0.5)**2 >0.05) ):
   T[i][j] = 10

def integrate(T,Tcopy):

 T[1:-1, 1:-1] = Tcopy[1:-1, 1:-1] + D*dt*( (Tcopy[2:, 1:-1] - 2*Tcopy[1:-1, 1:-1] + T[:-2, 1:-1])/dx2 + (Tcopy[1:-1, 2:] - 2*Tcopy[1:-1, 1:-1] + T[1:-1, :-2])/dy2  )
 Tcopy = copy(T)
 return Tcopy,T

x = arange(0, endX, dx)
y = arange(0, endY, dy)
X,Y = meshgrid(x, y)

"""creating the plot"""

fig, ax_lst = plt.subplots(1, 2)
ax_lst[0].imshow(T, interpolation='nearest',
                            origin='bottom',
                            aspect='auto',
                            vmin=np.min(T),
                            vmax=np.max(T),
                            cmap='hot',extent=[0,1,0,1])
im = ax_lst[1].imshow(T, interpolation='nearest',
                            origin='bottom',
                            aspect='auto',
                            vmin=np.min(T),
                            vmax=np.max(T),
                            cmap='hot',extent=[0,1,0,1])
fig.colorbar(im)

"""main loop"""

for t in range(Nt):
 im.set_data(T)
 plt.draw()
 plt.pause(0.1)
 Tcopy,T = integrate(T,Tcopy)
 print np.mean(T), np.max(T), np.min(T) 
```

颜色在变化（至少在我的机器上），只是它很微妙，很难看到。

您可能还想尝试对数刻度

```
im = ax_lst.imshow(T, interpolation='nearest',
                        origin='bottom',
                        aspect='auto',
                        vmin=np.min(T) + .01, # so 0 doesn't blow up the log
                        vmax=np.max(T),
                        cmap='hot',extent=[0,1,0,1],
                        norm=matplotlib.colors.LogNorm(clip=True),) 
```

# qt - 如何停止 QML 中的过渡动画？

> ID：15995645
> 
> 赞同：1
> 
> 时间：2013-04-14T04:00:51.647
> 
> 标签：qt, qml

有窗口，其布局由`states and transition`. 我们知道当状态改变时，`transition-animation`会自动启动，但是当过渡动画没有完成时，我改变状态，就麻烦了。就像`slow in reacting`; 如何解决？谢谢你...

它是这样的：

> 轻弹{
> 
> ```
>  id: content
>             anchors.fill: parent
>             flickableDirection: Flickable.HorizontalFlick
>             contentWidth: width * 2
>             contentHeight: height
>             clip: true
> 
>             onFlickStarted: {
>                 if(horizontalVelocity > 0) {
>                     regAndFind.state = "Find"
>                 }
>                 else {
>                     regAndFind.state = "Register"
>                 }
>             }  ....... 
> } 
> ```

```
states: [
    State {
        name: "Register"
        PropertyChanges {
            target: slider
            x: 0
        }
        PropertyChanges {
            target: content
            contentX: 0
        }
    },
    State {
        name: "Find"
        PropertyChanges {
            target: slider
            x: parent.width / 2
        }
        PropertyChanges {
            target: content
            contentX: parent.width
        }
    }
]

transitions: [
    Transition {
        NumberAnimation {
            target: slider
            property: "x"
            duration: 600
        }
        NumberAnimation {
            target: content
            property: "contentX"
            duration: 600
        }
    }
] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:10:20.637

阅读 Qml 中的[动画元素](http://qt-project.org/doc/qt-5/qml-qtquick-animation.html)。

在移动到其他状态之前，您可以调用该`Animation::stop ()`函数以在其间停止动画。请注意，它会立即停止动画，并且动画不会对属性值产生进一步影响。

# mysql - 从子表中为 MySQL 视图中的每个父记录获取 N 条记录

> ID：15995651
> 
> 赞同：1
> 
> 时间：2013-04-14T04:01:39.817
> 
> 标签：mysql, views, mysql-5.5

我尝试在 SO 中找到这个问题的答案，但找不到任何答案。任何链接都会有很大帮助。

我有一个父表和一个子表，父表和子表之间存在一对多关系。子表包含大约 100 万条记录，我想为每个父记录在子表中创建一个包含第 10 条记录的视图。例子-

```
Parent_Table - Fields -- ID, Name
ID       Name
----     -----
1        A
2        B
3        C

Child_Table - Fields -- ID, ParentID, Date, Data
ID  ParentID  Date    Data
--------------------------
1     1        04/10   A1
2     1        04/11   A2
3     1        04/11   A3
4     1        04/12   A4
5     1        04/12   A5
6     2        04/10   B1
7     2        04/11   B2
8     2        04/12   B3
9     2        04/12   B4
10    2        04/13   B5
11    2        04/13   B6 
```

现在，我想为按日期排序的每个父记录创建一个包含第一条 4 条记录的视图。

**预期产出**

```
ID  ParentID  Date    Data
--------------------------
1     1        04/10   A1
2     1        04/11   A2
3     1        04/11   A3
4     1        04/12   A4
6     2        04/10   B1
7     2        04/11   B2
8     2        04/12   B3
9     2        04/12   B4 
```

任何链接或解决方案指南将不胜感激。提前致谢！

如果您需要任何澄清，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:25:01.827

我在我的电脑上试用了这个，它使用您自己的数据根据​​您的要求显示。我更改了一些字段名称，例如将 Child 的 ID 更改为 ChildID，将 Date 更改为 ChildDate，将 Data 更改为 ChildData。这里是：

```
SELECT * FROM 
(SELECT ParentID, ChildID, ChildDate, ChildData, @ChildRank:= CASE WHEN @Parent <> ParentID THEN 1 ELSE @ChildRank+1 END as ChildRanking, @Parent := ParentID as Parent FROM 
(SELECT @ChildRank:=0) CR, (SELECT @Parent:=1) P, (SELECT * FROM Child_Table ORDER BY
ParentID, ChildID) MainTable) AllTable WHERE ChildRanking <=4; 
```

我只使用子表，但无论如何，如果你愿意，你可以将它与 Parent_Table 进行 INNER JOIN。

一点解释：

1) ChildRank 将从 Rank 0 开始（即 SELECT @ChildRank:0）但由于 @ChildRank+1 它将从 Rank 1 开始

2) 当新的 ParentID (即@Parent<> ParentID) 然后立即从 Rank 1 开始。

3) AllTable 是所有内容的别名，因此您现在可以引用 ChildRanking 字段。

如果您不想显示 ChildRanking 字段，则必须指定要显示的字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T07:07:27.600

如果你需要创建一个视图，你可以使用这样的东西：

```
CREATE VIEW First_Four AS
SELECT c1.*
FROM
  Child_Table c1 LEFT JOIN Child_Table c2
  ON c1.ParentID = c2.ParentID
     AND (STR_TO_DATE(c1.`date`, '%m/%Y')>STR_TO_DATE(c2.`date`, '%m/%Y')
          OR (STR_TO_DATE(c1.`date`, '%m/%Y')=STR_TO_DATE(c2.`date`, '%m/%Y')
              AND c1.ID>c2.ID)
         ) 
GROUP BY
  c1.ID, c1.ParentID, c1.`Date`, c1.Data
HAVING
  COUNT(c2.ID)<4 
```

我将字段数据视为 VARCHAR 列，因此我们需要使用 STR_TO_DATE，如果不是，我们可以只比较 c1。`date`与 c2。`date`直接地。

请[在此处](http://sqlfiddle.com/#!2/7eeb8/1)查看小提琴。

# c - 如何将“clicked”信号和“key_press_event”连接到同一个回调函数？

> ID：15995652
> 
> 赞同：2
> 
> 时间：2013-04-14T04:01:50.053
> 
> 标签：c, gtk

我想做的是将鼠标单击“clicked”信号和按键“key_press_event”信号连接到同一个回调函数。代码开始是这样的：

```
static void s_up(GtkWidget *btn,
                 gpointer  data)
{
    code ...
}

...

int main(int argc, char **argv)
{
    ...
    g_signal_connect(button, "clicked", G_CALLBACK(s_up), NULL);
} 
```

它处理鼠标点击就好了。然后我想向它添加键盘按键。所以我将代码更改为

```
static void s_up(GtkWidget   *btn,
                 GdkEventKey *event
                 gpointer    data)
{
    if(event->keyval == 's')
        more code ...
}

...

int main(int argc, char **argv)
{
    ...

    g_signal_connect(button, "key_press_event", G_CALLBACK(s_up), NULL);
} 
```

当我在键盘上按“s”时它起作用了。

我的问题是如何将两个信号连接到同一个`s_up`回调函数？除了明显的问题之外`if(event->keyval == 's')`，我尝试调用两者`gtk_signal_connect`，当我点击按钮时，我得到 SegFault 指向`s_up`。按“s”没有任何作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T05:58:42.117

您不能将两个信号直接连接到同一个信号处理程序，因为它们需要不同的参数。

你得到一个分段错误的原因是因为`event->keyval`只有当你收到一个`key-press-event`. 当您收到`clicked`事件时，第二个参数将是`NULL`，因为它映射到事件`gpointer`提供的参数，`clicked`并且您已将其设置为`NULL`安装信号处理程序时，所以`event`将是`NULL`。

如果您想要将两个信号连接到同一个处理程序的原因是您有公共代码，无论哪个信号触发它都应该运行，那么解决方案是为每个信号设置一个处理程序，并使用第三个函数使用公共代码他们可以打电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T13:48:44.923

使用包装函数间接调用相同的回调：

```
static void
callback(GtkWidget *button, gpointer data)
{
    /* TODO */
}

static gboolean
wrapper(GtkWidget *button, GdkEventKey *event, gpointer data)
{
    if (event->keyval == 's')
        callback(button, data);
    return FALSE;
}

int
main(int argc, char **argv)
{
    /* TODO */
    g_signal_connect(button, "clicked", G_CALLBACK(callback), NULL);
    g_signal_connect(button, "key-press-event", G_CALLBACK(wrapper), NULL);
    /* TODO */
} 
```

如果你不使用`data`你也可以使用单个函数，但在我看来，引入的复杂性是不值得的：

```
static gboolean
callback(GtkWidget *button, GdkEventKey *event)
{
    if (event != NULL && event->keyval == 's')
        callback(button, data);
    return FALSE;
}

int
main(int argc, char **argv)
{
    /* TODO */
    g_signal_connect(button, "clicked", G_CALLBACK(callback), NULL);
    g_signal_connect(button, "key-press-event", G_CALLBACK(callback), NULL);
    /* TODO */
} 
```

为了能够理解后一个示例，您必须知道：

1.  如果不使用，返回值将被丢弃（如果您不想停止事件处理，则**必须**从按键事件返回）；`FALSE`
2.  回调中的额外参数被静默丢弃。

这意味着当`callback()`通过单击调用时，您拥有**事件中的****数据**值 ( `NULL`)，而当从按键调用时，**事件**已正确设置并且**数据**被静默丢弃。

 ******这反过来意味着如果您`event != NULL`在第二个示例中添加检查，事情就会开始工作。******

# css - 带有背景图像的背景颜色 div

> ID：15995655
> 
> 赞同：0
> 
> 时间：2013-04-14T04:02:29.447
> 
> 标签：css, background-image

我想在这个站点的顶部创建一个小的白色 div/背景。 [http://bit.ly/ZgawU6](http://bit.ly/ZgawU6)

首页正确显示它，但是我用背景图像制作了它。当在这样的页面上使用相同的背景图像时：它处于 50% 左右，并且 top:0 将不起作用。

谁能指出我正确的方向？

谢谢！

[http://bit.ly/1311wSB](http://bit.ly/1311wSB)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:16:08.233

我所做的是将 div 与导航容器类与另一个包装器 div 一起包装，我们将其称为外部导航包装器，然后应用此 css。

HTML：

```
<div class="outer-navigation-wrapper">
    <div class="container navigation-container">
    ...
    </div> <!-- end navigation-container -->
</div> <!-- end outer-navigation-wrapper --> 
```

CSS：

```
.outer-navigation-wrapper {
   background: #fff;
   height: 60px;
} 
```

# javascript - 使用流星创建列表

> ID：15995658
> 
> 赞同：2
> 
> 时间：2013-04-14T04:03:06.647
> 
> 标签：javascript, meteor

嗨，我正在使用流星创建一个放债跟踪网站。这是我第一次尝试学习meteor js。我尝试在我的 js 文件中编写以下代码

```
var lists = new Meteor.Collection("Lists"); 
```

但是当我在刷新页面并输入后返回 Chrome 开发者控制台时

```
lists
ReferenceError: lists is not defined
get stack: function () { [native code] }
message: "lists is not defined"
set stack: function () { [native code] }
__proto__: Error 
```

有什么我想念的吗？任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T04:44:45.110

您无法从 Web 控制台访问列表，因为[代码的范围是每个文件](http://www.meteor.com/blog/2013/04/04/meteor-060-brand-new-distribution-system-app-packages-npm-integration)。在流星中，您的代码将作为

```
function() {
    var lists = new Meteor.Collection("Lists");
    ....
} 
```

因此，要在控制台中访问您的集合，您需要通过将您的行更改为全局范围：

```
lists = new Meteor.Collection("Lists"); 
```

这样就`lists`可以在任何地方使用，例如其他文件和 webkit 控制台

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T16:44:10.777

那些使用该示例起源的书“Getting Started with meteor.js”的人......作者指示在“列表”之前使用 var 关键字，从而局部范围限定该变量并导致与书上说你应该在浏览器控制台中看到和实际看到的内容。这是书中的一个错误，我一直无法找到该书的任何在线勘误表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-21T02:10:56.527

摘自《Meteor.js JavaScript 入门》一书

勘误类型：代码| 页码：第 2 章。反应式编程……它还活着！，| 勘误日期：18-4-2013

在示例中：

**var lists** = new Meteor.Collection("Lists");

应该改为阅读

**list** = new Meteor.Collection("Lists");

原因是“...Meteor 0.6 添加了文件级 JavaScript 变量
作用域。在 JavaScript
源文件的最外层用 var 声明的变量现在是该文件私有的。删除 var 以
在文件之间共享一个值。”

# c++ - Libevent 仅在第二个 buffer_write 之后才写入套接字

> ID：15995659
> 
> 赞同：2
> 
> 时间：2013-04-14T04:03:28.087
> 
> 标签：c++, network-programming, libevent

Libevent 很棒，到目前为止我很喜欢它。但是，在回显服务器上，写入仅在第二次写入时发送到套接字。我的写作来自另一个线程，一个与数据库对话并进行一些最小数据按摩的泵线程。

我通过为写入设置回调来验证这一点：

```
bufferevent_setcb( GetBufferEvent(), DataAvailable, DataWritten, HandleSocketError, this ); 
```

调用 bufferevent_flush( m_bufferEvent, EV_READ|EV_WRITE, BEV_NORMAL ) 似乎没有任何效果。

这是设置，以防万一我把它搞砸了。为了获得一些帮助，我极大地简化了代码库中的开销。这包括套接字的初始化，我的线程初始化等。这是一个多线程的应用程序，所以那里可能存在一些问题。我从这个开始：

```
m_LibEventInstance = event_base_new();
evthread_use_windows_threads();
m_listener = evconnlistener_new_bind( m_LibEventInstance, 
         OnAccept, 
         this,
         LEV_OPT_CLOSE_ON_FREE | LEV_OPT_CLOSE_ON_EXEC | LEV_OPT_REUSEABLE, 
         -1,// no maximum number of backlog connections
         (struct sockaddr*)&ListenAddress, socketSize );

   if (!m_listener) {
          perror("Couldn't create listener");
          return false;
   }
   evconnlistener_set_error_cb( m_listener, OnSystemError ); 
```

AFAIK，这是从样本中复制和粘贴的，所以它应该可以工作。我的 OnAccept 执行以下操作：

```
void  OnAccept( evconnlistener* listenerObj, evutil_socket_t newConnectionId, sockaddr* ClientAddr, int socklen, void* context )
{
    // We got a new connection! Set up a bufferevent for it. 
    struct event_base*  base = evconnlistener_get_base( listenerObj );
    struct bufferevent* bufferEvent = bufferevent_socket_new( base, newConnectionId, BEV_OPT_CLOSE_ON_FREE );

   bufferevent_setcb( GetBufferEvent(), DataAvailable, DataWritten, 
                                   HandleSocketError, this );

  // We have to enable it before our callbacks will be called. 
  bufferevent_enable( GetBufferEvent(), EV_READ | EV_WRITE );

  DisableNagle( m_connectionId );
} 
```

现在，我只需响应传入的数据并将其存储在缓冲区中以供以后处理。这是一个多线程的应用程序，所以我稍后会处理数据，按摩它，或者向客户端返回响应。

```
void     DataAvailable( struct bufferevent* bufferEventObj, void* arg )
{
const U32   MaxBufferSize = 8192;
   MyObj*   This = (MyObj*) arg;
   U8          data[ MaxBufferSize ];
   size_t      numBytesreceived;

   /* Read 8k at a time and send it to all connected clients. */
   while( 1 )
   {
      numBytesreceived = bufferevent_read( bufferEventObj, data, sizeof( data ) );
      if( numBytesreceived <= 0 ) // nothing to send
      {
         break;
      }

      if( This )
      {
         This->OnDataReceived( data, numBytesreceived );
      }
   }
} 
```

发生的最后一件事是，一旦我查找数据，打包到缓冲区中，然后在线程时间片上执行以下操作：

```
bufferevent_write( m_bufferEvent, buffer, bufferOffset ); 
```

它永远不会第一次发送。为了让它发送，我必须发送第二个充满数据的缓冲区。

这种行为正在杀死我，我已经花了很多时间。有任何想法吗？

//------------------------------------------------ --------

我终于放弃了，改用了这个 hack……没有足够的信息告诉我为什么 libevent 没有写入套接字。这工作得很好。

```
int result = send( m_connectionId, (const char* )buffer, bufferOffset, 0 ); 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-04-07T09:26:47.163

我也遇到了问题！我花了一天时间解决这个问题。最后，我解决了。

当您调用的线程时`event_base_dispatch`，它将处于休眠状态，直到任何信号量将其唤醒。因此，当它休眠时，您调用`bufferevent_write`，bufferevent 的 fd 会添加到事件列表中，但直到下一次才会 epoll。所以你必须在调用后发送信号量来唤醒调度线程`bufferevent_write`。您可以使用的方式是设置一个事件绑定对套接字并将其添加到`event_base`. 然后在需要唤醒调度线程时随时发送 1 个字节。

# collision-detection - Allegro 5 边界框检测

> ID：15995660
> 
> 赞同：0
> 
> 时间：2013-04-14T04:03:34.700
> 
> 标签：collision-detection, bounding-box, allegro

我的边界框检测已关闭。当盒子“关闭”但不接触时，它会检测到碰撞。这是我的代码的相关部分。

```
if(bounding_box_collision(playerOne.x, playerOne.y, playerOne.x + 15, playerOne.y + 15,         foodx, foody, foodx + 10, foody + 10))
{
    cout << "Collision" << endl;
    playerOne.score += 1;
    foodx = rand() % 786;
    int foody = rand() % 586;
} 
```

这是“bounding_box_collison”，我有自己的功能，但它不起作用，所以我从 allegro wiki 复制粘贴了一个[http://wiki.allegro.cc/index.php?title=Bounding_Box](http://wiki.allegro.cc/index.php?title=Bounding_Box)。我仍然有同样的问题。

```
int bounding_box_collision(int b1_x, int b1_y, int b1_w, int b1_h, int b2_x, int b2_y, int b2_w, int b2_h)
{
     if ((b1_x > b2_x + b2_w - 1) || // is b1 on the right side of b2?
        (b1_y > b2_y + b2_h - 1) || // is b1 under b2?
        (b2_x > b1_x + b1_w - 1) || // is b2 on the right side of b1?
        (b2_y > b1_y + b1_h - 1))   // is b2 under b1?
     {
    // no collision
    return false;
}

    // collision
    return true;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T13:53:51.977

该函数需要宽度和高度，但您传递的是右下角。

例如，而不是`playerOne.x + 15`，您应该通过`15`。

# .htaccess - .htaccess 重写多个目录

> ID：15995667
> 
> 赞同：1
> 
> 时间：2013-04-14T04:04:23.423
> 
> 标签：.htaccess

是否可以通过检查多个目录而不仅仅是一个目录来使用 htaccess 进行重写？

这是我正在寻找的示例：

我有 2 个文件 site.com/profile.php?username1 site.com/project.php?projectname1

我想使它的人只需要输入类似的内容：

site.com/NAME -> “NAME”可以是他们选择的任何名称，无论是 username1 还是 projectname1，都没有关系。

现在我遇到的问题是 htaccess 是否可以通过配置文件和项目进行搜索以匹配用户输入的名称并将用户重定向到正确的文件？

澄清....如果这个人在 site.com/username1 中键入......它会自动知道去 PROFILE.php?username1 吗？

如果这个人在 site.com/projectname1 中输入.....它会自动知道去 PROJECT.php?projectname1 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:17:18.353

您不能使用 htaccess 来执行此操作，因为 mod_rewrite 对使**NAME**成为配置文件或项目的过程一无所知，只有两个 php 脚本对此一无所知。你最好做的是用类似的东西编写一些路由代码`router.php`，`index.php`然后通过它路由所有内容：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ /router.phpname=$1 [L] 
```

然后在您的`router.php`脚本中，查看`$_GET['name']`是配置文件还是项目，然后将其路由到它认为合适的`profile.php`或。`project.php`

# html - 表单验证难度

> ID：15995668
> 
> 赞同：-1
> 
> 时间：2013-04-14T04:04:27.293
> 
> 标签：html, jsp

我在此 JSP 页面中应用了验证。如果我将用户名/密码留空，系统会提示我在字段中输入这些内容，但问题是在我在验证提示上按 OK 后，页面转到 2_control.jsp。我希望它只在以下情况下转到下一页验证没问题，否则不行。plz hlp。我应该做些什么改变？

这是我的代码：

```
<html>
<head>
<script>
function validLogin(){
if (document.form.userName.value == ""){
alert ( "Please enter Login Name." );
document.loginform.userName.focus();
return false;
}
if (document.form.password.value == ""){
alert ( "Please enter password." );
document.userform.password.focus();
return false;
}
alert ( "Welcome User" );
return true;
}
</script>
</head>
<body>
<form name="form" method="post" action="2_control.jsp" onsubmit="return validLogin();">
<table width="250px" border=0 style="background-color:ffeeff;">
<tr><td colspan=2 align="center" style="font-weight:bold;font-size:20pt;" align="center">User Login</td>
</tr>
<tr><td colspan=2>&nbsp;</td>
</tr>
<tr><td style="font-size:12pt;" align="center">Login Name:</td>
<td><input type="text" name="userName" value=""></td>
</tr>
<tr><td style="font-size:12pt;" align="center">Password:</td>
<td><input type="password" name="password" value=""></td>
</tr>
<tr>
<td></td>
<td><input type="submit" name="Submit" value="Login"></td>
</tr>
</table>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:08:15.597

更改`document.userform.password.focus();` 为`document.form.userName.focus();`

当您专注于文本框时仅更改表单名称..用户表单错误，因此您的验证不起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:32:15.977

```
 <script>
        function validLogin(){
            if (document.form.userName.value == ""){
                alert ( "Please enter Login Name." );
                document.form.userName.focus();
                return false;
            }
            else if (document.form.password.value == ""){
                alert ( "Please enter password." );
                document.form.password.focus();
                return false;
            }
        }
    </script> 
```

替换此脚本标记...您在编写表单名称时犯了一个小错误..

# jquery - jQuery查找具有给定数据ID的所有先前元素

> ID：15995672
> 
> 赞同：0
> 
> 时间：2013-04-14T04:05:59.400
> 
> 标签：jquery

我想找到具有给定数据 id 的所有前面的元素。

例如，如果我有 data-test="3" 我应该得到 data-test="2" 和 data-test="1"：

```
 <li><a href="#" data-test="1">test</a></li>
 <li><a href="#" data-test="2">test</a></li>
 <li><a href="#" data-test="3">test</a></li> 
```

我注意到 prevAll 功能，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:09:02.863

`.prevAll()`是正确的方法，但是您需要从`<li>`s 遍历，因为`<a>`s 不是彼此的兄弟姐妹。

```
$('a[data-test="3"]').parent().prevAll(':has(a[data-test])').children(); 
```

[http://jsfiddle.net/mattball/NcatZ](http://jsfiddle.net/mattball/NcatZ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:09:26.967

您需要找到该链接，然后访问其父级才能使用`prevAll`.

```
$("a[data-test='3']").parent().prevAll().children("a") 
```

得到以前的父母后，你就可以得到他们的`children`链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T05:00:51.630

jQuery 找不到您前面的元素，使用此标记它们位于 DOM 的不同树中。你可以像这样改变你的标记..

```
<li>
    <a href="#" data-test="1">test</a>
    <a href="#" data-test="2">test</a>
    <a href="#" data-test="3">test</a>
</li>

<script>
    $(document).ready(function() {
        console.log( $("a[data='3']").prevAll() );
    });
</script> 
```

注意排序，倒序排序 result = [data 2, data 1]

如果这可以在像下面这样的树中工作，它应该找到`7,6,5`还是`7,6,1`？您会看到此命令对于在 DOM 的其他分支中遍历树不是最佳的。

```
<li>
    <a href="#" data-test="1">test</a>
    <a href="#" data-yeah="2">test</a>
    <a href="#" data="3">test</a>
    <a href="#" data-yeah="4">test</a>
    <a href="#" data="5">test</a>
</li>
<ol id='list'>
    <li><a href="#" data-test="6">test</a></li>
    <li><a href="#" data-yeah="7">test</a></li>
    <li><a href="#" data="8">test</a></li>
    <li><a href="#" data-yeah="9">test</a></li>
    <li><a href="#" data="10">test</a></li>
 </ol> 
```

最好更改标记，以便 [ `data`] 在`li`标签中

```
<ol id='list'>
    <li data-test="6"><a href="#" >test</a></li>
    <li data-yeah="7"><a href="#">test</a></li>
    <li data="8"><a href="#" >test</a></li>
    <li data-yeah="9"><a href="#">test</a></li>
    <li data="10"><a href="#">test</a></li>
</ol> 
```

所以在这个标记中，以下可以找到你想要的

```
console.log(
    $("li[data=8]").prevAll()
); 
```

这是`li`标签造成的典型问题，它们适用于列表项，而不是主要的 DOM 结构。但无论如何，也许其他人知道更好的解决方案..

来自柏林的问候。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:21:21.990

```
$('a[data-test="3"]').parent().prevUntil() 
```

[小提琴](http://jsfiddle.net/FS8tY/)

# java - PreparedStatement 未正确执行

> ID：15995673
> 
> 赞同：0
> 
> 时间：2013-04-14T04:06:10.263
> 
> 标签：java, mysql, prepared-statement

```
query = "SELECT * FROM POST_COMMENT WHERE Post_date_time= ? AND Post_User= !;";
     query = query.replace("?", "'"+post.getDatetime()+"'");
     query = query.replace("!", Integer.toString(post.getPublisher().getID()));

    PreparedStatement pstm = con.prepareStatement(query);
    ResultSet rs = pstm.executeQuery(); 
```

结果查询如下所示

```
SELECT * FROM POST_COMMENT WHERE Post_date_time= '2013-04-12 07:20:34.0' AND Post_User= 378; 
```

在 MySQL 提示行中可以正常工作，但是从准备好的语句启动时会引发此错误：

```
Exception in thread "main" com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '07:20:34.0 AND Post_User=378' at line 1 
```

但

```
pstm.setString(1, post.getDatetime());
pstm.setString(2, Integer.toString(post.getPublisher().getID())); 
```

也不工作。

表定义

```
CREATE TABLE Post_Comment (
  Comment_ID INTEGER(7) NOT NULL,
  Post_date_time DATETIME NOT NULL,
  Post_User INTEGER(7) NOT NULL,
  PRIMARY KEY(Comment_ID, Post_date_time, Post_User),
  CONSTRAINT Post_Comment_Post
    FOREIGN KEY (Post_User, Post_date_time)
    REFERENCES Post (User, date_time)
    ON DELETE   CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT Post_Comment_Comment
    FOREIGN KEY (Comment_ID)
    REFERENCES Commentary (ID)
    ON DELETE   CASCADE
    ON UPDATE CASCADE
)
; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:11:35.643

```
query = "SELECT * FROM POST_COMMENT WHERE Post_date_time= ? AND Post_User= ?;";

PreparedStatement pstm = con.prepareStatement(query);
pstm.setObject(1, post.getDatetime());
pstm.setObject(2, post.getPublisher().getID());
ResultSet rs = pstm.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T04:11:48.727

查看[Java 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。您不应该`replace()`使用 String 函数的字段。

您应该调用[PreparedStatement 的“设置”方法](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)。

* * *

编辑：

不，看看可用的方法。以及数据库列期望的类型。如果您想要日期，请使用`setDate()`，如果您想要整数，请使用`setInt()`。例子：

```
query = "SELECT * FROM POST_COMMENT WHERE Post_date_time = ? AND Post_User = ?;";

PreparedStatement pstm = con.prepareStatement(query);
pstm.setDate(1, post.getDatetime());
pstm.setInt(2, post.getPublisher().getID());
ResultSet rs = pstm.executeQuery(); 
```

另请注意，查询`?`用于*两个*占位符，而不是`!`.

# yii - CInlineAction::runWithParams() 的性能问题

> ID：15995674
> 
> 赞同：0
> 
> 时间：2013-04-14T04:06:42.677
> 
> 标签：yii

根据 New Relic 报告，大约 70% 的时间用于处理`CInlineAction::runWithParams`. 事实上，`Controller::action()`它只花费了不到总时间的 20%。

起初我认为这可能是因为使用`urlManager`重写请求而不是网络服务器所以我让重写部分由网络服务器处理并`urlManager`在我的配置文件中禁用了整个配置。

根据 Xdebug 提供的信息，仍然没有太大区别。

只是想问一下是否`CInlineAction::runWithParams`需要这么多的过程是自然的，还是配置有问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T20:10:41.790

尽管我无法真正说出为什么 New Relic 报告在该方法上花费了这么多时间，但我认为您的配置没有问题。Yii 将为`CInlineAction`每次调用内联动作创建一个新对象（即，将控制器*内联*定义为`action...`函数的动作，因此得名）。然后`runWithParams`调用 then 来运行当前请求的操作。

因此，您很自然会看到对该方法的许多调用。该方法内部唯一可疑的是反射用于实际调用控制器方法。但这不应该对执行时间产生如此大的影响。所以我可能会把它归咎于 New Relic 的测量方式。

如果你真的想找到它，你可以`echo microtime()`在该方法的每一行之前添加一些，以找出循环的去向。

# javascript - html、php中带有特定字符的子字符串

> ID：15995681
> 
> 赞同：0
> 
> 时间：2013-04-14T04:07:55.790
> 
> 标签：javascript, html

我正在尝试按特定字符执行子字符串操作。例如，我有一个名为 code 的变量，其中包含“EX00001”、“A00012”的数据。

我想执行一个子字符串来只获取数字部分，以便我可以对其执行加法操作。

```
"EX00001"
I would like to get only 1.

"A00012"
I would like to get only 12. 
```

我只能通过“EX”和“A”子字符串。我怎么能按字母表和所有的 0 来做子串呢？

因为代码可以是“EX00001”、“EX00122”、“EX01254”等。

```
 <script>

  var str=code;
  document.write(str.substring(2,7));

   </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:11:04.627

如果您使用 JavaScript：

```
document.write(str.replace(/^[a-z0]+/i, '')); 
```

对于 PHP，您可以使用[`preg_replace`](http://www.php.net/manual/zh/function.preg-replace.php)：

```
echo preg_replace('/^[a-z0]+/i', '', 'EX000001'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:17:32.603

适用于 PHP 5.2 及以上版本

您可以使用：

> filter_var('EX00001', FILTER_SANITIZE_NUMBER_INT);

5以下版本

> preg_replace("/[^\d]/", "", "EX00001");

# jquery - 删除 Textarea 后 JQuery 停止工作

> ID：15995683
> 
> 赞同：2
> 
> 时间：2013-04-14T04:08:28.793
> 
> 标签：jquery

我的页面中有以下 JQuery。该页面加载正常，并且代码最初可以正常工作。如果我编辑 textarea 字段，再次单击该字段将不起作用。即使在编辑 textarea 之后，有没有办法绑定 JQuery 功能？

```
$(document).ready(function() {
$("#prop_notes").dblclick(function() {
    var timestamp = '2013-04-01 20:40:00';
    var userid = '1';
    var username = 'Jim Williams';
    if ($('#prop_notes').val() == '') {
        $("#prop_notes").text("Timestamp: " + timestamp + "\nUser ID: " + userid + "\nUser: " + username);
    }
    else {
        $("#prop_notes").text($("#prop_notes").text() + "\n\n- - - - - - - - - - - - - - - - - - - -\n\nTimestamp: " + timestamp + "\nUser ID: " + userid + "\nUser: " + username);
    }
}); 
```

});

可重现的行为小提琴：http: [//jsfiddle.net/njgray/MxPNX/1/](http://jsfiddle.net/njgray/MxPNX/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:59:43.920

尝试使用 .val() 而不是 .text() [http://jsfiddle.net/sXkPE/3/](http://jsfiddle.net/sXkPE/3/)

```
$(document).ready(function () {
    $("#prop_notes").on('dblclick', function () {
        var timestamp = '<?php echo $timestamp; ?>';
        var userid = '<?php echo $user_id; ?>';
        var username = '<?php echo $user_full_name; ?>';
        if ($('#prop_notes').val() == '') {
            $("#prop_notes").val("Timestamp: " + timestamp + "\nUser ID: " + userid + "\nUser: " + username);
        } else {
            $("#prop_notes").val($("#prop_notes").val() + "\n\n- - - - - - - - - - - - - - - - - - - -\n\nTimestamp: " + timestamp + "\nUser ID: " + userid + "\nUser: " + username);
        }
    });
}); 
```

# assembly - 如何在 x86 汇编语言中创建嵌套循环

> ID：15995696
> 
> 赞同：3
> 
> 时间：2013-04-14T04:10:19.483
> 
> 标签：assembly, x86, masm

是否可以在 x86 汇编语言中创建嵌套循环？

我想将此 psedocode 转换为正确的 x86 汇编代码（使用[MASM](http://en.wikipedia.org/wiki/Microsoft_Macro_Assembler)语法），但我不确定如何在此处初始化每个循环计数器。甚至可以在 x86 程序集中声明局部变量（就像在大多数其他编程语言中一样）？

```
for (var i = 0; i < 10; i++){
    for(var j = 0; j < 10; j++){
        for(var k = 0; k < 10; k++){
            mov eax, i + j + k;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T04:24:07.020

当然，这是可能的。由于每个计算机程序最终都归结为汇编 - 它自然是最强大的语言（不包括直接位操作）。

实际代码取决于您的系统、编译器和应用的优化，但基本上应该是这样的（例如 2 个嵌套循环，而不是 3 个）：

```
 mov ecx, 0

outerLoop:

           cmp ecx, 10
           je done
           mov ebx, 0

innerLoop:
           mov eax, ecx        ; do your thing here
           add eax, ebx

           cmp ebx, 10
           je innerLoopDone
           inc ebx
           jmp innerLoop

innerLoopDone:

           inc ecx
           jmp outerLoop
done: 
```

请注意，您不需要局部变量，您可以使用通用寄存器来满足您的需求。如果您坚持使用变量，则可以为此使用内存地址并使用寄存器指针进行读/写。

# css - CSS下拉菜单绝对 - 需要澄清

> ID：15995699
> 
> 赞同：0
> 
> 时间：2013-04-14T04:11:05.680
> 
> 标签：css

* * *

你好

我有这个来自[http://nettuts.s3.amazonaws.com/819_megamenu/demo/index.html#](http://nettuts.s3.amazonaws.com/819_megamenu/demo/index.html#)的胖菜单代码：

```
<ul id="main">
<li><a href="" class="drop">Home</a>
    <div class="dropdown_2columns"><!-- Begin 2 columns container -->

        <div class="col_2">
            <h2>Welcome !</h2>
        </div>

        <div class="col_2">
            <p>Hi and welcome here ! This is a showcase of the possibilities of this awesome Mega Drop Down Menu.</p>             
            <p>This item comes with a large range of prepared typographic stylings such as headings, lists, etc.</p>             
        </div>

        <div class="col_2">
            <h2>Cross Browser Support</h2>
        </div>

        <div class="col_1">
            <img src="img/browsers.png" width="125" height="48" alt="" />
        </div>

        <div class="col_1">
            <p>This mega menu has been tested in all major browsers.</p>
        </div>

    </div
</li> 
```

样式的相关部分是：

```
.dropdown_1column, 
.dropdown_2columns, 
.dropdown_3columns, 
.dropdown_4columns,
.dropdown_5columns {
    margin:4px auto;
    float:left;
    position:absolute;
    left:-999em; /* Hides the drop down */
    text-align:left;
}

.dropdown_1column {width: 140px;}
.dropdown_2columns {width: 280px;}
.dropdown_3columns {width: 420px;}
.dropdown_4columns {width: 560px;}
.dropdown_5columns {width: 700px;}

#menu li:hover .dropdown_1column, 
#menu li:hover .dropdown_2columns, 
#menu li:hover .dropdown_3columns,
#menu li:hover .dropdown_4columns,
#menu li:hover .dropdown_5columns {
    left:-1px;
    top:auto;
}

#menu li {
    float:left;
    display:block;
    text-align:center;
    position:relative;
    padding: 4px 10px 4px 10px;
    margin-right:30px;
    margin-top:7px;
    border:none;
}

#menu li:hover {
}

#menu li a {
    display:block;
    outline:0;
}   

    #menu li:hover a {
    color:#161616;
    text-shadow: 1px 1px 1px #ffffff;
}
#menu li .drop {
    padding-right:21px;
    background:url("img/drop.png") no-repeat right 8px;
} 
```

即使下拉菜单的位置被提及为绝对位置 - 也没有提及绝对位置（即坐标）。如果 position:absolute 被移除，随后的元素（例如“5 个元素”等）会浮动在下拉菜单周围（即从菜单栏中选择“主页”菜单后弹出的那个）。因此，absolute 将下拉菜单直接放在菜单栏中的主页下方，下一个菜单“5 列”放置在菜单栏中的“主页”旁边，而不是下拉菜单旁边。那么这是如何工作的（即浏览器如何理解它被呈现为绝对）而不提及顶部/底部/左侧/右侧坐标的值？在 position: absolute 的其他示例中，例如 w3schools 中的那些，直接提到了位置，即 top：10px，左：5px 等。但这里就像魔术一样发生（但根本没有帮助我的理解）。所以请帮助我理解这一点，并非常感谢这样的帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:39:42.283

如果子元素是`position:absolute`并且父元素是`position:relative`，则子元素继承父元素的定位。这是一个例子：

[http://jsfiddle.net/charlescarver/CdBHQ/](http://jsfiddle.net/charlescarver/CdBHQ/)

父级可能是您发布的示例的一个原因`relative`是因为您希望下拉菜单与导航栏一起移动。对位置进行硬编码将要求您在每次更改位置时再次对其进行硬编码。

在您的示例中，每列都有一个宽度。然而，当你的时候，它的起始位置是从父级继承的`relative`，然后自然地向右流动。

# javascript - 显示对应于初始值的条形图

> ID：15995701
> 
> 赞同：0
> 
> 时间：2013-04-14T04:11:25.727
> 
> 标签：javascript, jquery

我究竟做错了什么？我正在尝试显示与 class="likes" 的初始值相对应的条形图

这是小提琴 [http://jsfiddle.net/sghoush1/VU3LP/40/](http://jsfiddle.net/sghoush1/VU3LP/40/)

Jquery 看起来像这样

```
var baractive = $('<div class="barActive"></div');
    baractive.appendTo('.bar');

    function checkNumber() {
        var valueCurrent = parseInt($(".likes").text());

        if(isNaN(valueCurrent) || valueCurrent <= 20) {
            $(".barActive").css('height', '20px').css('width', '30px').css('background', 'green');
        }
        if(isNaN(valueCurrent) || valueCurrent <= 60) {
            $(".barActive").css('height', '20px').css('width', '80px').css('background', 'green');
        }
    }
    checkNumber(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:32:00.293

您需要在函数中使用一个循环`checkNumber()`，以便它检查每个`.likes`元素的值并更新相应的条形图。

```
function checkNumber() {
    $(".likes").each(function () {
        var valueCurrent = parseInt($(this).text());

        if (isNaN(valueCurrent) || valueCurrent <= 20) {
            $(this).prev(".bar").children(".barActive").css('height', '20px').css('width', '30px').css('background', 'green');
        } else if (isNaN(valueCurrent) || valueCurrent <= 60) {
            $(this).prev(".bar").children(".barActive").css('height', '20px').css('width', '80px').css('background', 'green');
        }
    });
} 
```

[小提琴](http://jsfiddle.net/barmar/VU3LP/44/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:37:43.357

目前，`var valueCurrent = parseInt($(".likes").text());`解析所有类似组合的文本，结果为 2010402060，这可能不是您想要的。

我会以这种方式更改 checkNumber 函数：

```
function checkNumber() {
    var bars = $(".bar"),
        likes = $(".likes");

    likes.each(function (index, like) {
        var value = parseInt($(like).text(), 10),
            bar = bars.eq(index).find(".barActive");

        if (value <= 60) bar.css("width", 80);
        if (value <= 20) bar.css("width", 30);
    });
} 
```

...并将 barActive 样式移动到 CSS 中。[jsFiddle 的工作示例。](http://jsfiddle.net/barmar/VU3LP/48/)

# c# - 在我的下载器中添加暂停和继续功能

> ID：15995705
> 
> 赞同：4
> 
> 时间：2013-04-14T04:11:38.353
> 
> 标签：c#, multithreading, download, webclient

我正在用 C# 创建一个下载器。我正在使用 WebClient 类。要通过单击按钮暂停下载，我可以考虑使用 Thread。因此，当我创建线程并将其与我的文件下载一起附加时，如下所示

```
WebClient web = new WebLCient();
Thread dwnd_thread = new Thread(Program.web.DownloadFileAsync(new Uri(Program.src), Program.dest)); 
```

它给了我以下错误：“'System.Threading.Thread.Thread(System.Threading.ThreadStart)'的最佳重载方法匹配有一些无效参数”和“参数'1'：无法从'void'转换为' System.Threading.ThreadStart'”。

然后我想如果我暂停我的系统主线程，那么它可能会阻止我在下面的代码行中使用的整个进程

```
System.Threading.Thread.Sleep(100); 
```

但它什么也没做。有人可以告诉我什么是暂停/下载的更好方法以及如何使用线程来暂停我的下载过程。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-14T21:56:52.277

由于没有暂停/恢复下载请求的标准方法，您必须实现自己的机制。下面是一段代码，其中包含一个示例，说明这种机制的外观。该类`FileDownload`采用 3 个参数：

*   `source`- 文件的url，下载。

*   `destination`- 保存文件的位置。

*   `chunkSize`- 在检查是暂停还是继续下载之前要读取多少字节。

* * *

```
public class FileDownload
{
    private volatile bool _allowedToRun;
    private string _source;
    private string _destination;
    private int _chunkSize;

    private Lazy<int> _contentLength;

    public int BytesWritten { get; private set; }
    public int ContentLength { get { return _contentLength.Value; } }

    public bool Done { get { return ContentLength == BytesWritten; } }

    public FileDownload(string source, string destination, int chunkSize)
    {
        _allowedToRun = true;

        _source = source;
        _destination = destination;
        _chunkSize = chunkSize;
        _contentLength = new Lazy<int>(() => Convert.ToInt32(GetContentLength()));

        BytesWritten = 0;
    }

    private long GetContentLength()
    {
        var request = (HttpWebRequest)WebRequest.Create(_source);
        request.Method = "HEAD";

        using (var response = request.GetResponse())
            return response.ContentLength;
    }

    private async Task Start(int range)
    {
        if (!_allowedToRun)
            throw new InvalidOperationException();

        var request = (HttpWebRequest)WebRequest.Create(_source);
        request.Method = "GET";
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
        request.AddRange(range);

        using (var response = await request.GetResponseAsync())
        {
            using (var responseStream = response.GetResponseStream())
            {
                using (var fs = new FileStream(_destination, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
                {
                    while (_allowedToRun)
                    {
                        var buffer = new byte[_chunkSize];
                        var bytesRead = await responseStream.ReadAsync(buffer, 0, buffer.Length);

                        if (bytesRead == 0) break;

                        await fs.WriteAsync(buffer, 0, bytesRead);
                        BytesWritten += bytesRead;
                    }

                    await fs.FlushAsync();
                }
            }
        }
    }

    public Task Start()
    {
        _allowedToRun = true;
        return Start(BytesWritten);
    }

    public void Pause()
    {
        _allowedToRun = false;
    }
} 
```

用法：

```
static void Main(string[] args)
{
    var fw = new FileDownload("http://download.microsoft.com/download/E/E/2/EE2D29A1-2D5C-463C-B7F1-40E4170F5E2C/KinectSDK-v1.0-Setup.exe", @"D:\KinetSDK.exe", 5120);

    // Display progress...
    Task.Factory.StartNew(() =>
    {
        while (!fw.Done)
        {
            Console.SetCursorPosition(0, Console.CursorTop);
            Console.Write(string.Format("ContentLength: {0} | BytesWritten: {1}", fw.ContentLength, fw.BytesWritten));
        }
    });

    // Start the download...
    fw.Start();

    // Simulate pause...
    Thread.Sleep(500);
    fw.Pause();
    Thread.Sleep(2000);

    // Start the download from where we left, and when done print to console.
    fw.Start().ContinueWith(t => Console.WriteLine("Done"));

    Console.ReadKey();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-06T02:11:41.067

我采用了@ebb 的解决方案（效果很好！）并对其进行了一些调整。现在：

*   可以接受流作为输入
*   可以通过报告进度`IProgress`
*   其他一些小调整

```
public class FileDownload
{
    private volatile bool _allowedToRun;
    private Stream _sourceStream;
    private string _sourceUrl;
    private string _destination;
    private bool _disposeOnCompletion;
    private int _chunkSize;
    private IProgress<double> _progress;
    private Lazy<long> _contentLength;

    public long BytesWritten { get; private set; }
    public long ContentLength { get { return _contentLength.Value; } }

    public bool Done { get { return ContentLength == BytesWritten; } }

    public FileDownload(Stream source, string destination, bool disposeOnCompletion = true, int chunkSizeInBytes = 10000 /*Default to 0.01 mb*/, IProgress<double> progress = null)
    {
        _allowedToRun = true;

        _sourceStream = source;
        _destination = destination;
        _disposeOnCompletion = disposeOnCompletion;
        _chunkSize = chunkSizeInBytes;
        _contentLength = new Lazy<int>(() => Convert.ToInt32(GetContentLength()));
        _progress = progress;

        BytesWritten = 0;
    }

    public FileDownload(string source, string destination, int chunkSizeInBytes = 10000 /*Default to 0.01 mb*/, IProgress<double> progress = null)
    {
        _allowedToRun = true;

        _sourceUrl = source;
        _destination = destination;
        _chunkSize = chunkSizeInBytes;
        _contentLength = new Lazy<int>(() => Convert.ToInt32(GetContentLength()));
        _progress = progress;

        BytesWritten = 0;
    }

    private long GetContentLength()
    {
        if (_sourceStream != null)
            return _sourceStream.Length;
        else
        {
            var request = (HttpWebRequest)WebRequest.Create(_sourceUrl);
            request.Method = "HEAD";

            using (var response = request.GetResponse())
                return response.ContentLength;
        }
    }

    private async Task Start(int range)
    {
        if (!_allowedToRun)
            throw new InvalidOperationException();

        if (_sourceStream != null)
        {
            using (var fs = new FileStream(_destination, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
            {
                while (_allowedToRun)
                {
                    var buffer = new byte[_chunkSize];
                    var bytesRead = await _sourceStream.ReadAsync(buffer, 0, buffer.Length).ConfigureAwait(false);

                    if (bytesRead == 0) break;

                    await fs.WriteAsync(buffer, 0, bytesRead);
                    BytesWritten += bytesRead;
                    _progress?.Report((double)BytesWritten / ContentLength);
                }

                await fs.FlushAsync();
            }

            //Control whether the stream should be disposed here or outside of this class
            if (BytesWritten == ContentLength && _disposeOnCompletion)
                _sourceStream?.Dispose();
        }
        else
        {
            var request = (HttpWebRequest)WebRequest.Create(_sourceUrl);
            request.Method = "GET";
            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
            request.AddRange(range);

            using (var response = await request.GetResponseAsync())
            {
                using (var responseStream = response.GetResponseStream())
                {
                    using (var fs = new FileStream(_destination, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
                    {
                        while (_allowedToRun)
                        {
                            var buffer = new byte[_chunkSize];
                            var bytesRead = await responseStream.ReadAsync(buffer, 0, buffer.Length).ConfigureAwait(false);

                            if (bytesRead == 0) break;

                            await fs.WriteAsync(buffer, 0, bytesRead);
                            BytesWritten += bytesRead;
                            _progress?.Report((double)BytesWritten / ContentLength);
                        }

                        await fs.FlushAsync();
                    }
                }
            }
        }
    }

    public Task Start()
    {
        _allowedToRun = true;
        return Start(BytesWritten);
    }

    public void Pause()
    {
        _allowedToRun = false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T06:35:49.637

不幸的是，WebClient 无法暂停下载。因此，您必须在后台线程上使用 WebRequest 并暂停获取带有标志的响应流。这是示例代码。但是请确保您不能无限制地暂停，因为如果一段时间没有任何传输，TCP 连接将被关闭。所以如果恢复下载失败，你必须重新开始下载。

```
public class DownloadJob {

    public delegate void DownloadCompletedDelegate(Stream stream);
    //completion download  event
    public event DownloadCompletedDelegate OnDownloadCompleted;

    //sync object
    private object _lock = new object();
    //pause flag
    private bool _bPause = false;

    //Pause download
    public void Pause() {

        lock (_lock) {
            _bPause = true;
        }
    }

    //Resume download
    public void Resume() {

        lock (_lock) {
            _bPause = false;
        }
    }

    //Begin download with URI
    public void BeginDowload(Uri uri) {

        //Create Background thread
        Thread downLoadThread = new Thread(
            delegate() {

                WebRequest pWebReq = WebRequest.Create(uri);
                WebResponse pWebRes = pWebReq.GetResponse();

                using (MemoryStream pResultStream = new MemoryStream())
                using (Stream pWebStream = pWebRes.GetResponseStream()) {

                    byte[] buffer = new byte[256];

                    int readCount = 1;
                    while (readCount > 0) {

                        //Read download stream 
                        readCount = pWebStream.Read(buffer, 0, buffer.Length);
                        //Write to result MemoryStream
                        pResultStream.Write(buffer, 0, readCount);

                        //Waiting 100msec while _bPause is true
                        while (true) {

                            lock (_lock) {
                                if (_bPause == true) {
                                    Thread.Sleep(100);
                                }
                                else {
                                    break;
                                }
                            }
                        }

                        pResultStream.Flush();
                    }

                    //Fire Completion event
                    if (OnDownloadCompleted != null) {
                        OnDownloadCompleted(pResultStream);
                    }
                }
            }
        );

        //Start background thread job
        downLoadThread.Start();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T09:03:12.130

我已经对其进行了调整，以处理大于 2GB 的文件并处理损坏的下载，因此无论出于何种原因，下载都已停止，您需要在下一次下载尝试时重试，而不是从头开始，它将继续从头开始被阻止了。来自@derekantrican、@ebb 和我自己的所有上述解决方案只有在服务器支持 Range 请求时才有效。您可能需要先测试服务器是否接受范围请求，然后才能继续执行此解决方案。 [https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests](https://developer.mozilla.org/en-US/docs/Web/HTTP/Range_requests)

```
 public class FileDownload
 {
    private volatile bool _allowedToRun;
    private readonly string _sourceUrl;
    private readonly string _destination;
    private readonly int _chunkSize;
    private readonly IProgress<double> _progress;
    private readonly Lazy<long> _contentLength;

    public long BytesWritten { get; private set; }
    public long ContentLength => _contentLength.Value;

    public bool Done => ContentLength == BytesWritten;

    public FileDownload(string source, string destination, int chunkSizeInBytes = 10000 /*Default to 0.01 mb*/, IProgress<double> progress = null)
    {
        if(string.IsNullOrEmpty(source))
            throw new ArgumentNullException("source is empty");
        if (string.IsNullOrEmpty(destination))
            throw new ArgumentNullException("destination is empty");

        _allowedToRun = true;
        _sourceUrl = source;
        _destination = destination;
        _chunkSize = chunkSizeInBytes;
        _contentLength = new Lazy<long>(GetContentLength);
        _progress = progress;

        if (!File.Exists(destination))
            BytesWritten = 0;
        else
        {
            try
            {
                BytesWritten = new FileInfo(destination).Length;
            }
            catch
            {
                BytesWritten = 0;
            }
        }
    }

    private long GetContentLength()
    {
        var request = (HttpWebRequest)WebRequest.Create(_sourceUrl);
        request.Method = "HEAD";

        using (var response = request.GetResponse())
            return response.ContentLength;
    }

    private async Task Start(long range)
    {
        if (!_allowedToRun)
            throw new InvalidOperationException();

        if(Done)
            //file has been found in folder destination and is already fully downloaded 
            return;

        var request = (HttpWebRequest)WebRequest.Create(_sourceUrl);
        request.Method = "GET";
        request.UserAgent = "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; .NET CLR 1.0.3705;)";
        request.AddRange(range);

        using (var response = await request.GetResponseAsync())
        {
            using (var responseStream = response.GetResponseStream())
            {
                using (var fs = new FileStream(_destination, FileMode.Append, FileAccess.Write, FileShare.ReadWrite))
                {
                    while (_allowedToRun)
                    {
                        var buffer = new byte[_chunkSize];
                        var bytesRead = await responseStream.ReadAsync(buffer, 0, buffer.Length).ConfigureAwait(false);

                        if (bytesRead == 0) break;

                        await fs.WriteAsync(buffer, 0, bytesRead);
                        BytesWritten += bytesRead;
                        _progress?.Report((double)BytesWritten / ContentLength);
                    }

                    await fs.FlushAsync();
                }
            }
        }
    }

    public Task Start()
    {
        _allowedToRun = true;
        return Start(BytesWritten);
    }

    public void Pause()
    {
        _allowedToRun = false;
    }
} 
```

# ruby-on-rails - Ruby 中嵌套路由的 DRY 控制器

> ID：15995710
> 
> 赞同：1
> 
> 时间：2013-04-14T04:12:30.977
> 
> 标签：ruby-on-rails, ruby, dry

我有一个使用以下模型设置的项目。每个`->`代表一个`has_many`关系：

```
Users->Goals->Milestones 
```

我的路线`Milestones`看起来像这样：

```
 user_goal_milestones GET    /users/:user_id/goals/:goal_id/milestones(.:format)          milestones#index
                         POST   /users/:user_id/goals/:goal_id/milestones(.:format)          milestones#create
 new_user_goal_milestone GET    /users/:user_id/goals/:goal_id/milestones/new(.:format)      milestones#new
edit_user_goal_milestone GET    /users/:user_id/goals/:goal_id/milestones/:id/edit(.:format) milestones#edit
     user_goal_milestone GET    /users/:user_id/goals/:goal_id/milestones/:id(.:format)      milestones#show
                         PUT    /users/:user_id/goals/:goal_id/milestones/:id(.:format)      milestones#update
                         DELETE /users/:user_id/goals/:goal_id/milestones/:id(.:format)      milestones#destroy 
```

我发现自己在 Milestones 控制器中的许多“功能”中做了很多这样的事情：

```
def index do
    @user = User.find(params[:user_id])
    @goal = Goal.find(params[:goal_id])
end

def edit do
    @user = User.find(params[:user_id])
    @goal = Goal.find(params[:goal_id])
end 
```

我怎样才能修改我的控制器，这样我就不必一直定义`@user`了`@goal`？我尝试将它们直接放在顶部，就在类定义块开始之后，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:15:20.813

如果参数始终相同，您可以创建这样的方法

```
def set_user_and_goal
    @user = User.find(params[:user_id])
    @goal = Goal.find(params[:goal_id])

end 
```

并将其放在顶部的 before_filter 中

```
before_filter :set_user_and_goal 
```

并将其设置为您喜欢的任何操作

```
before_filter :set_user_and_goal, :only => [:edit, :index] 
```

编辑：

此外，为了确保它不会在你的脸上爆炸，你可以这样做

```
@user = params.has_key?(:user_id) ? User.find(params[:user_id]) : nil 
```

并根据要求..通过执行类似的操作确保目标属于用户

```
@goals = @user.goals.find(params[:goal_id]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:15:05.710

你总是定义自己的辅助方法

```
def goal_milestone(goal)
  user_goal_milestone(goal.user, goal)
end 
```

您可以将它添加到您的 application_helper，然后在您的任何视图中使用任何。这将创建您在问题中提出的小型辅助方法。

寻找可以为您执行此操作的 gem 并没有向我展示任何内容，但是您可以以通用方式自己编写代码。

# ruby - Ruby JSON 解析输出计数

> ID：15995716
> 
> 赞同：1
> 
> 时间：2013-04-14T04:13:21.980
> 
> 标签：ruby, json

我正在尝试在 Ruby 中解析输出的一些 JSON 值，但我不断得到意外的结果。

```
articlelist = client.get('/v1/my_data/articles')
#debug
puts (articlelist.body)

#Parse the article list and get values
parsed = JSON.parse(articlelist.body)
puts parsed.count

parsed.count do 
    |currentfile|
    inputfile = File.open ('file.example')#file.example should be replaced with local file
    filehash = OpenSSL::Digest.new('sha256', 'inputfile')
    puts "#{inputfile} has #{filehash.name} hash of #{filehash}"#debug
end 
```

我得到以下结果：

```
{"count": 0, "items": []}
2
#<File:0x00000001a83b48> has SHA256 hash of 3de6c8f12dc4c9efe67c0a5bbfe21502cde5ee22e7ef0bc8d348c696db9a4363
#<File:0x00000001a83238> has SHA256 hash of 3de6c8f12dc4c9efe67c0a5bbfe21502cde5ee22e7ef0bc8d348c696db9a4363 
```

如果 的值`count`为零，为什么它给我的计数值为 2（输入文件只是本地示例文件）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:23:43.173

`parsed`是一个有两个元素的散列，`parsed.count`所以`2`. `parsed['count']`，另一方面，是`0`。

# php - 使用 php 变量通过 php 插入 mysql 数据库时遇到问题？谁能告诉我我做错了什么？

> ID：15995718
> 
> 赞同：0
> 
> 时间：2013-04-14T04:14:15.877
> 
> 标签：php, mysql, database, variables, insert

注册.php

```
<?php

include("db.php");
if (isset($_POST['email']) && isset($_POST['password']) && isset($_POST['name']) &&  isset($_POST['password2']) && isset($_POST['name']) && isset($_POST['address']) && isset($_POST['city']) && isset($_POST['state']))

{
    $con=mysqli_connect("localhost", "useradmin", "FNEpsTa6qvmRjBBf", "userdata") or die("failed to connect");
    //Prevent SQL injections
    $name = mysql_real_escape_string($_POST['name']);
    $email = mysql_real_escape_string($_POST['email']);
    $address = mysql_real_escape_string($_POST['address']);
    $city = mysql_real_escape_string($_POST['city']);
    $password = mysql_real_escape_string($_POST['password']);
    $password2 = mysql_real_escape_string($_POST['password2']);

    //Get MD5 hash of password
    $password = md5($_POST['password']);
    $query="SELECT email FROM users WHERE email = '".$email."'";
    $query2="INSERT INTO users (name, email, address, city, state, password) VALUES ('$name', '$email', '$address', '$city', '$state', '$password');";
    //Check to see if email exists
    $sql = mysqli_query($con, $query);
    $rows=(mysqli_num_rows($sql));
    if($rows>0)
    {
        die ("email taken.");
    }
    if($password<>$password2)
    {
        die ("passwords do not match");
    }

    $sql = mysqli_query($con, $query2);
    if($sql)
        header(location:welcome.php);

}
?>

<html></html>
<center>
<form action="register.php" method="post">
<table>
<tr><td>Name: </td><td><input name="name" type="text" /></td></tr>
<tr><td>Email:</td><td> <input name="email" type="text" /></td></tr>
<tr><td>Address: </td><td><input name="address" type="text" /></td></tr>
<tr><td>City: </td><td><input name="city" type="text" /></td></tr>
<tr><td>State: </td><td><select name="State"> 
<option value="" selected="selected">Select a State</option> 
<option value="AL">Alabama</option> 
<option value="AK">Alaska</option> 
<option value="AZ">Arizona</option> 
<option value="AR">Arkansas</option> 
<option value="CA">California</option> 
<option value="CO">Colorado</option> 
<option value="CT">Connecticut</option> 
<option value="DE">Delaware</option> 
<option value="DC">District Of Columbia</option> 
<option value="FL">Florida</option> 
<option value="GA">Georgia</option> 
<option value="HI">Hawaii</option> 
<option value="ID">Idaho</option> 
<option value="IL">Illinois</option> 
<option value="IN">Indiana</option> 
<option value="IA">Iowa</option> 
<option value="KS">Kansas</option> 
<option value="KY">Kentucky</option> 
<option value="LA">Louisiana</option> 
<option value="ME">Maine</option> 
<option value="MD">Maryland</option> 
<option value="MA">Massachusetts</option> 
<option value="MI">Michigan</option> 
<option value="MN">Minnesota</option> 
<option value="MS">Mississippi</option> 
<option value="MO">Missouri</option> 
<option value="MT">Montana</option> 
<option value="NE">Nebraska</option> 
<option value="NV">Nevada</option> 
<option value="NH">New Hampshire</option> 
<option value="NJ">New Jersey</option> 
<option value="NM">New Mexico</option> 
<option value="NY">New York</option> 
<option value="NC">North Carolina</option> 
<option value="ND">North Dakota</option> 
<option value="OH">Ohio</option> 
<option value="OK">Oklahoma</option> 
<option value="OR">Oregon</option> 
<option value="PA">Pennsylvania</option> 
<option value="RI">Rhode Island</option> 
<option value="SC">South Carolina</option> 
<option value="SD">South Dakota</option> 
<option value="TN">Tennessee</option> 
<option value="TX">Texas</option> 
<option value="UT">Utah</option> 
<option value="VT">Vermont</option> 
<option value="VA">Virginia</option> 
<option value="WA">Washington</option> 
<option value="WV">West Virginia</option> 
<option value="WI">Wisconsin</option> 
<option value="WY">Wyoming</option>
</select></td></tr>
<tr><td>Password: </td><td><input type="password" name="password" /></td></tr>
<tr><td>Confirm Password: </td><td><input type="password" name="password2" /></td></tr>
<tr><td><input type="submit" value="Submit" /></td></tr>
</table>
</form></center> 
```

页面运行没有错误，但没有显示在数据库中我输入数据并点击提交，这将我返回到没有错误的页面，但信息从未插入到我的数据库中。数据库连接也很好，因为我已经检查过了。但下面是数据库的导出。

```
CREATE DATABASE userdata;
USE userdata;

CREATE TABLE IF NOT EXISTS `users` (
  `Name` varchar(50) NOT NULL,
  `Address` varchar(50) NOT NULL,
  `City` varchar(25) NOT NULL,
  `State` varchar(2) NOT NULL,
  `Email` varchar(25) NOT NULL,
  `Password` varchar(25) NOT NULL,
  PRIMARY KEY (`Email`),
  UNIQUE KEY `Password` (`Password`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

在 php myadmin 中使用该密码创建了用户，所以我知道这很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:32:38.250

尝试添加

```
if ($con->connect_error) {
die('Connect Error (' . $con->connect_errno . ') '
        . $con->connect_error);
} 
```

连接到数据库后。我还要补充

```
$sql = mysqli_query($con, $query2);
if($sql) {
    header(location:welcome.php);
} else {
    echo mysqli_error($con);
} 
```

查看您的查询可能出现的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:16:52.607

由于您使用的是 mysqli 扩展，而不是 mysql，因此您必须使用`mysqli_real_escape_string()`而不是`mysql_real_escape_string()`.

但是您确实应该使用准备好的语句，而不是在查询中插入变量。然后，您根本不必担心转义值。这是使用 mysqli 或 PDO 而不是 mysql 的主要好处之一。

# data-structures - Clojure：直接访问数据类型的唯一字段

> ID：15995720
> 
> 赞同：0
> 
> 时间：2013-04-14T04:14:54.690
> 
> 标签：data-structures, types, clojure

假设我有一个数据类型，其中只有一个字段包含已排序的映射。

```
(defrecord AdjacencyList [data])
(def adjacency-list (AdjacencyList. (sorted-map 1 {2 100}, 2 {3 -100}))) 
```

现在，如果我想操作该字段并保持其类型，我必须执行以下操作：

```
(AdjacencyList. (dissoc (:data adjacency-list) 2)) 
```

有没有办法通过调用记录来引用该字段？

```
(dissoc adjacency-list 2) 
```

如果我需要一个常规的哈希映射，我可以使用记录的映射实现，但我需要一个排序映射，并且我使用集合和向量获得了其他类似的数据类型。

一个解决方案是改用 deftype 并自己实现所需的数据结构，但我希望这不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:45:28.077

Clojure 的 update-in 函数适用于各种关联集合，包括排序的映射和 defrecords：

（更新邻接列表 [:data] dissoc 2）

# jquery - jquery 1.9.1 的选择器更新

> ID：15995726
> 
> 赞同：2
> 
> 时间：2013-04-14T04:15:29.960
> 
> 标签：jquery

由于某种原因，这种方式`a[href$=.jpg]`被定义它在新的jquery 1.9.1中不起作用有没有办法重写它？

```
 $(document).ready(function() {
     $("a[href$=.jpg],a[href$=.png],a[href$=.gif]").fancybox({

            'titlePosition'     : 'outside',

            'overlayColor'      : '#000',

            'overlayOpacity'    : 0.9

        });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:28:41.190

您可能缺少引号。

尝试使用此选择器：

```
$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']") 
```

根据[文档](http://api.jquery.com/attribute-ends-with-selector/)，*以 selector 结尾的属性*可以将带引号的字符串作为值，也可以将不带引号的单个单词作为值。该`.`字符是非单词字符，因此在这种情况下需要引号。

但最好的做法是保持代码的一致性，因此建议始终使用引号（有时没有引号不起作用，但它始终与引号一起使用。如果您一直使用引号并保持代码一致，以后你会遇到更少的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:17:46.063

您应该引用属性值：

```
$("a[href$='.jpg'],a[href$='.png'],a[href$='.gif']") 
```

# android - 活动未正确更新

> ID：15995728
> 
> 赞同：0
> 
> 时间：2013-04-14T04:15:54.737
> 
> 标签：android, android-layout

我是android新手，所以也许我做错了什么。我想要一个特定的活动来显示有关游戏“生物”类实例的详细信息。名字，受到的伤害，诸如此类。

我在让生物数据正确显示在 GUI 对象中时遇到问题。在初始创建时（应将生物的名称复制到名称字段中）和添加损坏标记时（不会更新以显示正确的图像）。

这是我所拥有的迷你示例：

```
public class CreatureDetailActivity2 extends Activity
{
  Creature creature;

  public void addMark(View v)
  {
    // connected to the button via android:onClick="addMark" in the XML
    creature.getTrack().addDamage(DamageType.Normal, 1);
    refreshDisplay();
    new AlertDialog.Builder(this).setTitle(creature.getName())
        .setMessage(creature.getTrack().toString()).show();
  }

  @Override
  protected void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_creature_detail);
    creature = new Creature("Example");
    refreshDisplay();
  }

  public void refreshDisplay()
  {
    final View creatureDetailView = this.getLayoutInflater().inflate(
        R.layout.activity_creature_detail, null);

    final EditText nameField = (EditText) (creatureDetailView
        .findViewById(R.id.textbox_creature_name));
    nameField.setText(creature.getName());

    final ImageView damageBox0 = (ImageView) (creatureDetailView.findViewById(R.id.damageBox0));
    damageBox0.setImageResource(R.drawable.__n);
    // in the full program this does the same for 0 through 9, but this is a sample
    // also, in the full program, this is a dynamic lookup for the correct pic
    // but again, this is just a sample version.
  }
} 
```

现在的问题是应用程序将加载并启动，但是没有一个小部件将正确更新。您可以单击该按钮，它会显示 AlertDialog，AlertDialog 的文本会发生变化，但 Activity 中的文本字段不会更改，并且 ImageView 在任何时候都不会从它开始的位置更改到它应该更改为的那个。

所以我很困惑。如果我遗漏了一些重要的东西，我可以发布更多关于项目设置的信息，但我什至不确定发生了什么问题，所以我不确定我的问题中还包括什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:22:06.917

```
final View creatureDetailView = this.getLayoutInflater().inflate(
        R.layout.activity_creature_detail, null); 
```

将 Activity 的布局膨胀到基本上没有，只是返回它膨胀的 View。`setContentView`是实际上将您的布局膨胀到 Activity 的视图层次结构中的原因。

一旦你膨胀你的布局，你就不需要再做一次了。只需在`findViewById`不引用悬空未附加视图的情况下使用。

将您的 refreshDisplay 方法更改为：

```
public void refreshDisplay()
{
    final EditText nameField = (EditText) findViewById(R.id.textbox_creature_name);
    nameField.setText(creature.getName());

    final ImageView damageBox0 = (ImageView) findViewById(R.id.damageBox0);
    damageBox0.setImageResource(R.drawable.__n);
    // in the full program this does the same for 0 through 9, but this is a sample
    // also, in the full program, this is a dynamic lookup for the correct pic
    // but again, this is just a sample version.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:23:45.487

什么都没有改变，因为你做的完全错了。

如果您希望更新当前活动的任何视图元素，您可以这样做

```
View v = findViewById(R.id.element);
v.setText("text"); 
```

这只是一个简单的例子。您需要将返回的元素转换为正确的类型，以便能够访问所有可用的方法。

你做错了什么是试图再次膨胀布局。

# methods - 未定义的方法 `infer_base_class_for_anonymous_controllers=' for # （无方法错误）

> ID：15995730
> 
> 赞同：2
> 
> 时间：2013-04-14T04:16:20.450
> 
> 标签：methods, undefined

我目前在 Hartl's Tutorial 的第 7 章，每次我运行

捆绑执行 rspec 规范/

以下结果：

```
/Users/siciliana/sample_app/spec/spec_helper.rb:31:in `block in <top (required)>': undefined method `infer_base_class_for_anonymous_controllers=' for #<RSpec::Core::Configuration:0x007f7fb3a62b80> (NoMethodError)
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core.rb:79:in `configure'
        from /Users/siciliana/sample_app/spec/spec_helper.rb:11:in `<top (required)>'
        from /Users/siciliana/sample_app/spec/models/user_spec.rb:12:in `require'
        from /Users/siciliana/sample_app/spec/models/user_spec.rb:12:in `<top (required)>'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/configuration.rb:419:in `load'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/configuration.rb:419:in `block in load_spec_files'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/configuration.rb:419:in `map'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/configuration.rb:419:in `load_spec_files'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/command_line.rb:18:in `run'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/runner.rb:80:in `run_in_process'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/runner.rb:69:in `run'
        from /usr/local/rvm/gems/ruby-2.0.0-p0/gems/rspec-core-2.6.4/lib/rspec/core/runner.rb:11:in `block in autorun' 
```

有人可以向绝对新手解释这里发生了什么吗？

**spec_helper.rb ：**

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

#
RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T18:12:37.577

我遇到了同样的错误（尽管没有遵循教程）。

我相信这个设置需要`'rspec/rails'`

我的解决方案是移动线路

```
config.infer_base_class_for_anonymous_controllers = # whatever 
```

从`spec_helper.rb`到`rails_helper.rb`。

# c# - 框架 4.5 到 4.0

> ID：15995742
> 
> 赞同：2
> 
> 时间：2013-04-14T04:18:02.190
> 
> 标签：c#, asp.net, .net

我在 ASP.NET 和 C# 上开发了一个网站。项目完成。不幸的是，我没有注意到该框架是针对 4.5 的。我已经在我的电脑上安装了 Windows 7。

如何将框架 4.5 更改为 4.0 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:26:47.480

右键单击您的项目并选择它的属性。在“应用程序”面板中，您将拥有一个允许您更改目标 .NET Framework 的组合框。但是，要知道，如果您使用 4.5 独有的某些功能，您可能会破坏您的解决方案，因此您可能必须重写一些东西......或者不。

您可以将您的目标框架“降级”到您喜欢的任何版本，最高可达 .NET 2.0。

# php - mysqli 选择查询在 php 中需要很长时间

> ID：15995746
> 
> 赞同：0
> 
> 时间：2013-04-14T04:18:21.890
> 
> 标签：php, mysqli

我的数据库表中有 13,000 条记录。当我在一个 php 页面中提出一个查询`SELECT * FORM table_name`并遍历结果时，它花了将近 20 秒。我正在使用 mysqli 访问数据库。可能是什么问题。我怎样才能提高性能。

在不循环表格的情况下，我可以在二维数组中获取整个表格吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-14T04:36:44.783

您是否尝试过为此使用 PDO 而不是 MySQLi？PDO 的`fetchAll()`方法在单个数组中返回整个结果集，而无需手动循环并创建数组。

```
$server = '127.0.0.1';
$username = 'username';
$password = 'password';
$database = 'database';

$dbh = new PDO("mysql:dbname=$database;host=$server", $username, $password);
$sth = $dbh->prepare("SELECT * FROM table_name");
$sth->execute();

/* Fetch all of the remaining rows in the result set */
$result_array = $sth->fetchAll(); 
```

# emacs - 对于 Emacs，如何仅在某些操作中绑定键？

> ID：15995754
> 
> 赞同：0
> 
> 时间：2013-04-14T04:19:16.667
> 
> 标签：emacs, key-bindings

具体来说，我想更改 Emacs-Helm 的键绑定。当我运行时`helm-find-files`，如果我点击`C-z`一个目录，你可以跳转到选定的目录。我想将此行为更改为`Tab`. 我知道绑定到的动作`C-z`是`helm-execute-persistanet-action`. 我可以通过这样做来实现这一点，`(global-set-key (kbd "<tab>") 'helm-execute-persistanet-action)`但这将捕获所有其他`tab`操作。我只想在我进去的时候`tab`跑步`helm-execute-persistanet-action``helm-find-files`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T07:49:19.723

我认为您正在寻找的是定义键。表达式应如下所示： (define-key helm-mode-map [tab] 'a-command)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T13:22:11.447

您可以尝试围绕 helm-find-files 函数提出建议，以在 helm-find-files 中声明一个变量，然后使用 define-key 在 helm keymap 中绑定 tab 键。如果设置了 in-helm-find，那么您可以调用您想要的函数，否则使用 keymap 查找来调用全局映射中的函数。

[建议http://www.gnu.org/software/emacs/manual/html_node/elisp/Around_002dAdvice.html#Around_002dAdvice](http://www.gnu.org/software/emacs/manual/html_node/elisp/Around_002dAdvice.html#Around_002dAdvice) Helm Keymap [https://github.com/emacs-helm/helm/blob/master/helm.el# L101](https://github.com/emacs-helm/helm/blob/master/helm.el#L101) Keymap lookup [给定一个 emacs 命令名，你将如何找到 key-bindings ？（反之亦然）](https://stackoverflow.com/questions/965263/given-an-emacs-command-name-how-would-you-find-key-bindings-and-vice-versa)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T08:04:01.983

首先，找出您想要更改键绑定的缓冲区中处于活动状态的主要模式。您可以使用`C-h v major-mode`，或查看您的模式行。

然后，`local-set-key`仅通过将一些代码放入模式挂钩中来为该主要模式创建绑定。我对 helm 不熟悉，但假设主模式被称为`helm-mode`，它有一个钩子`helm-mode-hook`，你要绑定的命令被称为`helm-do-something`：

```
(add-hook 'helm-mode-hook
    (lambda () (local-set-key [tab] 'helm-do-something))) 
```

# android - 在 Playbook/BB10 中退出应用程序

> ID：15995757
> 
> 赞同：0
> 
> 时间：2013-04-14T04:19:53.143
> 
> 标签：android, blackberry-10, blackberry-playbook, blackberry-android

要在 Android 中以编程方式退出应用程序（例如，如果用户按下退出按钮），我使用：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

但是，在为 Playbook 或 Blackberry 10 移植 Android 应用程序时，[不支持](https://developer.blackberry.com/android/apisupport/unsupportedapi_playbook_intents.html)`CATEGORY_HOME`Intent 类别。我应该改用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:04:12.333

我认为您的Android应用程序的“退出应用程序代码”与退出应用程序完全相反：您为主屏幕启动一个新活动，而不是完成“您自己的”活动。

相反，您应该像这样完成您的活动（并考虑这是否适用于您的堆栈中的多个活动）：

```
myAppView.finish() 
```

这也将“退出”您在 bb10 上的应用程序 - 这意味着它将被最小化并显示为活动框架，直到您在 X 上倾斜以关闭它。
同样，最好决定此时是否应该清除未完成的通知（对于我的应用程序，这是有道理的......）

# r - 如何不从 R 中的数据中选择观察值

> ID：15995759
> 
> 赞同：3
> 
> 时间：2013-04-14T04:20:18.263
> 
> 标签：r, statistics, sample

我在做 Bagging，我想出了选择学习集（训练）的代码。

该数据集有 683 个观测值。

```
# data set named cancer
learningset <- cancer[sample(683,replace=TRUE),] 
```

我需要得到测试集，在我的学习集中从未从原始数据集“癌症”中选择过哪些观察结果。

我一直在尝试许多功能，但似乎它们不起作用，因为我仍然可以看到学习集中存在一些观察结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:34:12.667

您可以尝试`setdiff`功能：

```
training.indices <- sample(683, replace=TRUE)
test.indices <- setdiff(1:683, training.indices) 
```

接着：

```
learningset <- cancer[training.indices,]
testset <- cancer[test.indices,] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T06:44:44.480

或者您可以`-`像这样使用运算符：

```
ind <- sample( 683 , replace = TRUE )
learningset <- cancer[ ind , ]
testset <- cancer[ - ind , ] 
```

# redirect - 如何在我的网页被点赞后添加重定向？

> ID：15995760
> 
> 赞同：1
> 
> 时间：2013-04-14T04:20:46.927
> 
> 标签：redirect, facebook-like, response.redirect

我有一个 https 网站，上面有一个类似 facebook 的按钮。我已经在跟踪事件并将它们集成到谷歌分析中。一旦有人单击“赞”按钮并将帖子发布到 Facebook，我也希望能够添加重定向。我的 facebook 按钮设置如下：

```
<html xmlns:fb="http://www.facebook.com/2008/fbml">

<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js#xfbml=1" type="text/javascript"></script> 
```

facebooklike按钮代码如下：

```
<fb:like style="float: left; margin: 1px 10px 0 0;" href="<?php echo $share_url;?>" send="false" layout="box_count" width="65" show_faces="false" font="verdana"></fb:like>
<script type="text/javascript">
FB.Event.subscribe('edge.create', function(href, widget) {
_gaq.push(['_trackSocial', 'Facebook', 'Like', href]);
_gaq.push(['_trackEvent', 'Social Shares', 'Facebook Like', href]);});
FB.Event.subscribe('edge.remove', function(href, widget) { _gaq.push(['_trackSocial', 'Facebook', 'Unike', href]); });
</script>` 
```

无论如何我可以添加一个重定向并仍然能够使用谷歌分析跟踪点击？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:30:29.520

只需在订阅回调中的 GA 代码后添加 window.location = 'URL YOU WANT' 即可。

例子：

```
FB.Event.subscribe('edge.create', function(href, widget) {
   _gaq.push(['_trackSocial', 'Facebook', 'Like', href]);
   _gaq.push(['_trackEvent', 'Social Shares', 'Facebook Like', href]);
   window.location = 'URL HERE';
}); 
```

很抱歉，我认为回调是在完成之后。

* * *

更复杂但有效的解决方案：

常规的“喜欢”按钮不具有当人在对话框中实际完成时的回调函数。[幸运的是，您可以使用FB.ui](https://developers.facebook.com/docs/reference/javascript/FB.ui/)创建自定义对话框。您必须为您的域创建一个 FB 应用程序。

我修改并测试了他们的示例代码以使用重定向而不是警报框。

```
<div id='fb-root'></div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

<script src='http://connect.facebook.net/en_US/all.js'></script>

<a id="link" href="#">Post to Feed</a>

<script>
FB.init({appId: "000000000000000", status: true, cookie: true}); //You'll need to insert your appId.

$('#link').click(function(){
    FB.ui(
    {
        method: 'feed',
        name: 'Facebook Dialogs',
        link: 'https://developers.facebook.com/docs/reference/dialogs/',
        picture: 'http://fbrell.com/f8.jpg',
        caption: 'Reference Documentation',
        description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
    },
    function(response) {
        if (response && response.post_id) {
          window.location = "http://www.google.com"
      } else {
          // Do something else here if they do not post.
      }
    });
    return false;
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T19:24:05.070

好吧，经过一段时间的努力，我感到非常沮丧，我能够得到一个有效的解决方案。我最终创建了自己的应用程序并使用了直接 url 提要对话框方法

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

创建一个对话应用程序并添加了一个用于 GA 跟踪和重定向的 onClick 事件。最后我的 facebook 按钮链接看起来像

`<a href="https://www.facebook.com/dialog/feed?app_id=000000000000000<?php echo "&link=".urlencode($share_url)."&picture=".urlencode($image)."&name=".urlencode($title)."&caption=&description=".urlencode($description)."&redirect_uri=".urlencode("$redirect").""?>" style="float: left; margin: 66px 10px 0 0;" onclick="trackPost(); window.location(this.href); return false;">Post This</a>`

不完全是我最初的计划，这不是使用“喜欢”，而是使用“帖子”或“分享”。但是，它确实很好用。我要感谢 Marcelo 为我指明了正确的方向。

# css - 杰基尔没有再生

> ID：15995761
> 
> 赞同：5
> 
> 时间：2013-04-14T04:20:47.720
> 
> 标签：css, sass, jekyll

我一直在试验 Jekyll，但我无法让 Jekyll 重新生成文件更改（jekyll --server --auto）。我正在使用 Sass，但我什至无法让它与普通的 css 一起使用。我试过插件，我试过拉别人的回购，只是使用那里的代码，但没有运气。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T20:48:56.200

这是宝石的问题。一个简单的解决方法是：

```
gem uninstall directory_watcher
gem install directory_watcher -v 1.4.1 
```

这是一个参考链接：[https ://github.com/mojombo/jekyll/issues/970](https://github.com/mojombo/jekyll/issues/970)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T19:27:26.543

我在安装站点地图插件时遇到了这样的问题。删除插件后，该站点再次开始生成。

# javascript - 简单的 Javascript 数学

> ID：15995769
> 
> 赞同：-1
> 
> 时间：2013-04-14T04:21:45.480
> 
> 标签：javascript, jquery, html

我正在尝试执行以下简单乘法的非常简单的任务。我无法让输入字段参与下面的代码。请让我知道我如何才能让它工作。谢谢你们！

```
<!DOCTYPE html>
<html>
<body>

<?php
$count="20";
?>
<input id="spend">
<button onclick="myFunction()">Calculate</button>

<p id="demo"></p>

<script>
function myFunction()
{
y=<?php echo "$count"; ?>;
z=document.getElementById('spend').innerHTML;
x=y+z;
document.getElementById("demo").innerHTML=x;
}
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T04:26:31.860

嗨试试这个代码它正在工作

```
<!DOCTYPE html>
<html>
<body>

<?php
$count=20;
?>
<input id="spend">
<button onclick="myFunction()">Calculate</button>

<p id="demo"></p>

<script>
function myFunction()
{
var y=<?php echo $count; ?>;
var z=document.getElementById('spend').value;
var x=y*z;
document.getElementById("demo").innerHTML=x;
}
</script>

</body>
</html> 
```

# servicestack - 我们如何在 servicestack 中集成 elmah 日志记录

> ID：15995774
> 
> 赞同：5
> 
> 时间：2013-04-14T04:22:57.820
> 
> 标签：servicestack, elmah

我是 servicestack 和 elman 日志记录的新手。

任何人都可以建议我们如何将 elmah 集成到服务堆栈应用程序中。

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T16:19:35.973

如果您有现有的日志记录解决方案，那么您可以使用[ServiceStack.Logging.Elmah](https://github.com/ServiceStack/ServiceStack.Logging)项目。它可通过 NuGet 获得。

除了最初的记录器之外，异常、错误和致命调用将被记录到 Elmah。对于所有其他日志类型，仅使用原始记录器。

因此，如果您已经在使用 Log4Net，那么您可以像这样配置 Elmah

```
ElmahLogFactory factory = new ElmahLogFactory(new Log4NetFactory()); 
```

如果您不想覆盖现有日志，那么您可以研究将 Elmah 添加到任何 ASP.NET 网站。没有理由仅仅因为您使用的是 ServiceStack 就无法正常工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T17:45:38.577

```
using ServiceStack.Logging;
using ServiceStack.Logging.Elmah;
using ServiceStack.Logging.NLogger;

public AppHost()
        : base(
            "description", 
            typeof(MyService).Assembly)
    {
        LogManager.LogFactory = new ElmahLogFactory(new NLogFactory());
    }

    public override void Configure(Container container)
    {
        this.ServiceExceptionHandler += (request, exception) =>
            {
                // log your exceptions here
                HttpContext context = HttpContext.Current;
                ErrorLog.GetDefault(context).Log(new Error(exception, context));

                // call default exception handler or prepare your own custom response
                return DtoUtils.HandleException(this, request, exception);
            };

        // rest of your config
    }
} 
```

现在您的 ServiceStack 错误出现在 Elmah 中（假设您已经设置了 web.config 等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-23T08:52:12.913

实际上，kampsj 的答案比 Gavin 的要好，因为 Gavins 通过调用显式 elmah 记录器和默认的 servicestack 错误处理来导致对 elmah 的双重日志记录……它本身已经进行了日志记录。

所以你真正需要的就是这个（下面假设你想用 Elmah**包装 NLog ）**

```
public class YourAppHost : AppHostBase
{
    public YourAppHost() //Tell ServiceStack the name and where to find your web services
        : base("YourAppName", typeof(YourService).Assembly)
    {
        LogManager.LogFactory = new ElmahLogFactory(new NLogFactory());
    }

    //...just normal stuff...
} 
```

你可以在上面有这个：

```
ElmahLogFactory factory = new ElmahLogFactory(); 
```

...但是您可能应该为非错误日志记录包装另一种类型的记录器，例如调试和警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-07T12:19:21.330

本节介绍如何[配置 Elmah](https://github.com/ServiceStack/ServiceStack/wiki/Logging#elmah)和[Logging.Elmah UseCase](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/Logging.Elmah)，作为一起配置 ServiceStack 和 Elmah 的工作示例。

`ElmahLogFactory`可以`Global.asax`在初始化 ServiceStack AppHost 之前在您的配置中进行配置，例如：

```
public class Global : System.Web.HttpApplication
{
    protected void Application_Start(object sender, EventArgs e)
    {
        var debugMessagesLog = new ConsoleLogFactory();
        LogManager.LogFactory = new ElmahLogFactory(debugMessagesLog, this);
        new AppHost().Init();
    }
} 
```

# java - Java 资源背后的概念，引人注目的 gs，“R.id”

> ID：15995776
> 
> 赞同：2
> 
> 时间：2013-04-14T04:23:14.473
> 
> 标签：java, android, xml

我遇到了一个问题，让我意识到我没有得到核心概念。出于某种原因，当我向`strings.xml`文件添加值时，发生了一些事情，我的 xml 文件出现了解析错误。我能够解决这个问题的唯一方法是删除字符串文件并通过右键单击值文件夹重新创建它，然后“添加 android xml 文件”并命名它`strings.xml`。这使错误消失了，但现在，我的活动正在抱怨并说他们无法解决`R`（如`R.id`）。

`R`这让人好奇xml 文件之间的关系是什么。为什么当你引用一个字符串时，你使用`@String/something`, 当包含它的文件被调用时`strings`？

最后，为什么即使我`strings.xml`在正确的位置创建了一个名为 的 xml 文件，我的项目也没有将他视为 THE`strings.xml`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:01:57.663

**名称**

R 资源以特定方式组织：

*   `R.layout.*`- 这些资源是您在各个`layout-*`文件夹中创建的布局文件
*   `R.menu.*`- 这些是您的菜单文件的资源，在您的各种`menu-*`文件夹中创建。
*   `R.id.*`- 这些是您的各种视图和菜单项等的资源标识符。可以有多个具有相同 ID 的元素，只要它们位于不同的文件中。
*   `R.string.*`- 这些是您的字符串资源，在文件夹`<string>`中文件的元素中声明。`values-*`文件名无关紧要。单个文件夹中只能有一个具有特定名称的字符串元素。所以你不能在 中有两个`hello`字符串，但你可以在和`values`中各有一个。`values``values-en`
*   `R.drawable.*`- 这些是您`drawable-*`文件夹中的各种 XML 和图像可绘制对象。

还有很多，但这些是最常见的。当我手头有更多时间时，我会添加其余的。

**编译后**

在编译期间，Android 构建系统将所有 XML 文件转换为二进制格式。除了 之外的所有内容也都`/res/raw`被压缩了。这对布局特别有用，压缩后可以更快地膨胀。单个文件在编译后不复存在，一切都变成了一个大的二进制文件。`R.<resource_type>.<name>`您可以使用Java 和`@<resource_type>/<name>`XML访问此文件中的数据

**命名**

对于某些资源（可绘制对象、布局、菜单），文件名很重要，因为使用它来引用资源。对于其他资源（字符串、颜色、样式），文件名是无关紧要的，只要您`<string>`在文件中声明它们时使用正确的元素（例如对于字符串）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:32:29.603

当您的项目被编译和构建时，发生的事情之一就是`R`文件的生成。每个命名资源都有一个`public static final int`标识符，例如`R.string.foo`，它将引用一个用 定义的字符串`name="foo"`。通过这种方式，您可以从 Java 中引用资源，Android 会将其映射到资源并从您的应用程序包中加载它。

资源可能过载；你可以有两个字符串都被命名`foo`为不同的配置，但它们在`R`类中具有相同的标识符。系统将在运行时选择与设备配置最匹配的一个。

如果您的任何资源声明有错误，`R`则将无法构建，因此引用它的任何 java 类都会抱怨它。您可以在 Eclipse 中执行**Project > Clean**并查看是否有帮助，否则请确保您的资源已正确声明和/或具有有效名称。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-14T04:26:10.313

```
R.java is a seperate file created by eclipse, 
its not related to strings.xml ,Clean your project then build and run again . 
you will found R.java inside your gen folder
Read this 
```

[http://developer.android.com/tools/projects/index.html](http://developer.android.com/tools/projects/index.html)

# java - Java RMI 的 UnicastRemoteObject

> ID：15995777
> 
> 赞同：0
> 
> 时间：2013-04-14T04:23:19.873
> 
> 标签：java, rmi

我目前正在练习用 Java 实现 RMI。要求之一是创建一个扩展 UnicastRemoteObject 的类，其中包含可以远程调用的函数。

我想知道扩展 UnicastRemoteObject 的类是否由所有连接的客户端共享。我所说的共享的意思是，从扩展 UnicastRemoteObject 的类创建的实例对象是否被连接的客户端同时使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:41:26.700

这取决于你如何使用它。通常，如果这是唯一的远程对象，您会在 RMI 注册表中注册它的单个实例，然后客户端查找它并调用它的方法，它们都共享同一个实例。但是，如果您查看[此问题和答案](https://stackoverflow.com/q/15912558/207421)，您将看到如何为每个客户分配一个，如果这是您的要求。

# javascript - 如何访问 JavaScript 数组中的元素？

> ID：15995780
> 
> 赞同：2
> 
> 时间：2013-04-14T04:23:41.893
> 
> 标签：javascript, arrays, element

我有一个 JS 数组：

```
a = ["a",["b","c"]] 
```

如何访问此数组中的字符串“b”？非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T04:24:58.850

您可以像这样索引到一个数组：

```
a[1][0] 
```

使用它们的整数索引访问数组。由于这是一个数组内的数组，因此您`[1]`可以访问内部数组，然后使用 . 获取该数组中的第一项`[0]`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T04:25:13.887

那是`a[1][0]`

```
alert(a[1][0]) // "b" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-27T05:27:04.187

由于还有另一种方法可以访问数组中的元素，即：

```
a['1']['0']  //"b" 
```

因为数组在内部是一个对象，所以认为索引是该对象的属性，所以

```
a = ["a",["b","c"]] 
```

可以在内部，对象键或属性在内部传输到字符串，因此：

```
a = {
    '0' : "a",
    '1' : ["b", "c"]
} 
```

这也可以重构为：

```
a = {
    '0' : "a",
    '1' : {
        '0' : "b",
        '1' : "c"
    }
} 
```

所以我们可以访问该索引：

```
a['1']['0'] 
```

这将给出值作为`b`。

# python - 如何删除所有子元素？

> ID：15995783
> 
> 赞同：21
> 
> 时间：2013-04-14T04:23:46.930
> 
> 标签：python, user-interface, tkinter

我正在使用 Python 的`tkinter`库编写一个基于 GUI 的程序。我面临一个问题：我需要删除**所有**子元素（不删除父元素，在我的情况下是`colorsFrame`）。

我的代码：

```
infoFrame = Frame(toolsFrame, height = 50, bd = 5, bg = 'white')
colorsFrame = Frame(toolsFrame)

# adding some elements

infoFrame.pack(side = 'top', fill = 'both')
colorsFrame.pack(side = 'top', fill = 'both')

# set the clear button
Button(buttonsFrame, text = "Clear area",
               command = self.clearArea).place(x = 280, y = 10, height = 30) 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-04-14T04:49:06.177

您可以使用`winfo_children`获取特定小部件的所有子级的列表，然后可以对其进行迭代：

```
for child in infoFrame.winfo_children():
    child.destroy() 
```

# javascript - Highcharts 和工具提示错误

> ID：15995786
> 
> 赞同：3
> 
> 时间：2013-04-14T04:24:28.477
> 
> 标签：javascript, highcharts

获取工具提示的问题。您只会看到关于第一点和最后一点的工具提示。

如何帮助输出图表上所有点的工具提示？

[http://jsfiddle.net/RBfwG/1/](http://jsfiddle.net/RBfwG/1/)

```
var options = {
    chart: {
        type: 'line',
        renderTo: 'container',
        zoomType: 'x'
    },

    xAxis: {
        type: 'datetime'
    },

    tooltip: {
        shared: true,
        crosshairs: true,
        xDateFormat: '<b>%H:%M</b>'
    },
    "series": [{
        "name": "T",
        "data": [[1365895320000, 26], [1365895020000, 26.0625], [1365894720000, 26.0625], [1365894420000, 26.0625], [1365894120000, 26.125], [1365893820000, 26.125], [1365893520000, 26.1875], [1365893220000, 26.1875], [1365892920000, 26.25], [1365892620000, 26.25], [1365892320000, 26.3125], [1365892020000, 26.3125], [1365891720000, 26.3125], [1365891420000, 26.375], [1365891120000, 26.375], [1365890820000, 26.375], [1365890520000, 26.4375], [1365890220000, 26.5], [1365889920000, 26.5625], [1365889620000, 26.5625], [1365889320000, 26.625], [1365889020000, 26.6875], [1365888720000, 26.6875], [1365888420000, 26.75], [1365888120000, 26.8125], [1365887820000, 26.875], [1365887520000, 26.9375], [1365887220000, 27.0625], [1365886920000, 27.125], [1365886620000, 27.1875], [1365886320000, 27.25], [1365886020000, 27.1875], [1365885720000, 27.25], [1365885420000, 27.25], [1365885120000, 27.25], [1365884820000, 27.25], [1365884520000, 27.25], [1365884220000, 27.3125], [1365883920000, 27.3125], [1365883620000, 27.3125] ]
    }]
};
var chart = new Highcharts.Chart(options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T13:08:49.337

Highcharts 期望数据按 X 值升序排列。

```
 someData = [
        [1365895320000, 26],
        [1365895020000, 26.0625],
        [1365894720000, 26.0625],
        [1365894420000, 26.0625],
        [1365894120000, 26.125],
        [1365893820000, 26.125]            
    ];

    someData.sort(); 
```

[请参阅此处](http://jsfiddle.net/RBfwG/4/)的固定小提琴。

# python - Python - Zelle 书使用 eval()，是不是错了？

> ID：15995787
> 
> 赞同：6
> 
> 时间：2013-04-14T04:24:53.900
> 
> 标签：python, eval

请注意：这不是关于 eval() 的使用，而是关于使用和教授它的书的潜在质量（或缺乏质量）。所以在 Python 中已经有无数关于 eval() 的线程。

冒着招致 SO 的愤怒和反对票的风险，我还是决定问这个问题，以防万一。请多多包涵。对于这个特定的问题，我已经尝试过 Google 和 SO 本身（如您所见），但一无所获。不过，我可能是个盲人。

这个问题是关于臭名昭著的 eval() 函数的使用。

约翰·泽勒（John Zelle）有一本相对知名（如您所见）的书：http: [//www.amazon.com/Python-Programming-Introduction-Computer-Science/dp/1590282418/ref=pd_sim_b_3](https://rads.stackoverflow.com/amzn/click/com/1590282418)

从技术上讲，它是一本使用 Python 作为编程语言的 CS1 书籍。很公平，这让作者承担了一些责任（“嘿，我想在这里教你一些宽泛的东西，而不是所有这些语法和安全细节”），但是当我开始阅读它时，我注意到，字面上第一个例子，使用

`x = eval(input("Enter your number: "))`

其中 x 应该是一个 int，因此我们需要将用户输入转换为一个 int。

我使用的是 Python 2.7.4，这本书是关于 Python 3 的，所以我从一开始就遇到了 print() 和 input() 和 eval() 的很多问题，不得不做一些研究来获得工作的例子。在我的研究过程中，我已经阅读了无数关于 Python 中 eval() 的意见（主要是在 SO 上），归结为它几乎总是很糟糕、存在安全风险、不必要的技术开销等等。用户的问题要复杂得多（有一个关于在做 wxPython 项目时使用 eval() 的问题），所以我不能保证我的案例和他们的案例完全相似，但仍然......

所以，我承认，我对这本书的了解并不多，但我已经达到了这样的程度，即稍后作者解释了 eval() 的使用，而没有提及其有争议的性质。他基本上说了我刚才所说的：我们需要 x 最终成为一个 int，所以这里有一个方便的方法来做到这一点。而且他似乎永远都在使用它。

我的问题是：如果作者从一开始就犯了这样的错误（或者这不是一个错误？我可能在这里遗漏了一些东西），这本书值得学习吗？我相信 Zelle 先生是一位伟大的 CS 老师，这表明了，但不管他是否愿意，除了算法和编程艺术之外，人们仍然会从他的书中学习 Python。那么，是否值得从一本对 Python 社区中看似普遍的问题保持沉默的书中学习 Python？我不希望 Zelle 先生成为一名 Python 黑客并揭开它所有的秘密，但是像这样的小细节可以成就或毁掉一个自学/自学的人。您对本学习材料有何建议？

PS另一方面，让我从一开始就做很多研究和实验（不知不觉地）非常酷:-)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T19:14:17.123

作为这本书的作者，让我来谈谈这个问题。

书中对 eval 的使用很大程度上是从 Python 2 到 Python 3 转换的历史产物（尽管在 Python 2 中使用输入时也存在同样的“缺陷”）。我很清楚在生产代码中使用 eval 的危险，其中输入可能来自不受信任的来源，但这本书不是关于基于 Web 的系统的生产代码。它是关于学习一些 CS 和编程原理的。书中确实没有任何内容可以远程视为生产代码。我的目标始终是使用最简单的方法来说明我试图提出的观点，而 eval 有助于做到这一点。

我不同意在所有情况下都宣称 eval 邪恶的人群。对于仅由其编写者运行的简单程序和脚本来说，它非常方便。在这种情况下，它是完全安全的。它允许简单的多个输入和表达式作为输入。在教学上，它强调表达评估的概念。Eval 暴露了解释语言的所有力量（和危险）。我一直在我自己的个人程序中使用 eval（而不仅仅是在 Python 中）。事后看来，我绝对同意我应该对 eval 的潜在风险进行一些讨论；无论如何，这是我在课堂上经常做的事情。

最重要的是，这本书有很多改进的方法（总是有的）。我不认为使用 eval 是一个致命的缺陷；它适用于所说明的程序类型和这些程序出现的上下文。我不知道本书中使用 Python 的方式有任何其他“不安全因素”，但是应该警告您（正如前言所解释的），有很多地方的代码并不完全是“Pythonic”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-14T04:53:01.617

由于`eval`在您给出的示例中是如此格格不入且不必要，我当然会对本书其他部分的安全性产生怀疑。作者是否会建议您将用户输入的字符串附加到 SQL 查询中？

我认为找到作者的电子邮件地址并直接询问他可能是值得的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-14T10:28:19.433

是的，这是错误的。但我想我知道它为什么在那里。

很多人`input()`在 Python 2.x 中使用，这是一个非常不幸的命名函数，因为它不仅读取输入，还评估它。如您所见，转换器`2to3`将每次使用转换为`input()`to ：`eval(input())`

```
$ cat test.py
x = input("Enter your number: ")

$ 2to3 test.py
RefactoringTool: Skipping implicit fixer: buffer
RefactoringTool: Skipping implicit fixer: idioms
RefactoringTool: Skipping implicit fixer: set_literal
RefactoringTool: Skipping implicit fixer: ws_comma
RefactoringTool: Refactored test.py
--- test.py     (original)
+++ test.py     (refactored)
@@ -1 +1 @@
-x = input("Enter your number: ")
+x = eval(input("Enter your number: "))
RefactoringTool: Files that need to be modified:
RefactoringTool: test.py 
```

所以我的猜测是它只是有点草率。来自亚马逊的描述：

> 这是 John Zelle 的 Python Programming 的第二版，针对 Python 3 进行了更新。

我认为有人在`2to3`没有彻底检查输出的情况下运行了所有代码示例。所以是的，`input()`在 Python 2.x 中使用是错误的，在`2to3`不检查输出的情况下使用也是错误的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-14T10:18:41.293

好吧，以这种方式组合 eval() 和 input() 会创建一个基本但可能非常有害的“外壳”。我没有读过这本书，但我会持保留态度。这不仅是一种不好的做法，它还实现了一种致命的功能组合。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-14T04:41:20.560

`eval`应该拼写“是”`evil`来警告人们这一点；）除非绝对必须，否则您应该尝试并且永远不要使用它。在这种情况下，使用起来很直观`int()`，它更具可读性！此外，如果你真的不得不使用`ast.literal_eval`（它只评估字面值，顾名思义，因此它不会允许用户运行恶意代码）实际上是安全的，但不需要这个，也不需要`eval()`在这种情况下。

# c# - 如何在我的所有项目中使用 PublicApp.Config

> ID：15995799
> 
> 赞同：2
> 
> 时间：2013-04-14T04:26:40.903
> 
> 标签：c#, visual-studio-2012

我有一个解决方案和 4 个项目。

在所有项目中，我都有一个 APP.Config 文件。

我可以在同一个项目上使用它。

我有一个包含此文件 PublicApp.Config 的解决方案文件夹

我想在我的所有项目（4个项目）中使用这个配置。

我`add existing file`将此文件归档在所有 4 个项目中`Add as link`

但我无法访问`<appSettings>`

我希望我的一个项目有一个类，将所有公共配置映射到一个属性。

我的解决方案是这样的：

我有这个解决方案文件夹`Configurations`，里面有这个文件名`PublicAPP.config`

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="ComputerName" value="Ardalan-Pc"/>
  </appSettings>
</configuration> 
```

我`GetConfiguration.cs`在另一个项目中有这个文件，用于propetrie中的地图配置。

```
namespace ClassLibrary1
{

public static class GetConfiguration
{

    public static string ComputerName
    {
        get
        {

            return System.Configuration.ConfigurationManager.AppSettings["ComputerName"];
        }
    }

}

} 
```

现在我不知道如何从我的 PublicAPP.Config 中获取 AppSettings["ComputerName"]。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T06:05:08.417

我终于意识到我可以做到以下几点。

我可以将一个项目与一个包含我所有公共配置的 App.Config 一起使用，而不是使用解决方案文件夹。

而且我认为这个项目最是我的解决方案中的启动项目。因为 System.Configuration.ConfigurationManager 只能从启动项目的 app.config 中获取属性

我在这个项目中创建了下班。

```
namespace ClassLibrary1
{

public static class GetConfiguration
{

public static string ComputerName
{
    get
    {

        return System.Configuration.ConfigurationManager.AppSettings["ComputerName"];
    }
}

}

} 
```

然后我在所有其他项目的项目中引用并使用这个静态类。

当然，如果有人有更好的方法，请给我信息。

# mongodb - 如何在 Mongo DB 中存储形状

> ID：15995801
> 
> 赞同：0
> 
> 时间：2013-04-14T04:27:08.770
> 
> 标签：mongodb, select, insert, geometry

我想使用 mongoDb 创建一个数据库，我是这个领域的新手。并且还想插入和选择数据来存储圆形、三角形等形状。我想知道怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T09:23:49.560

假设您指的是为地理空间查询存储形状，您可以使用`GeoJSON`MongoDB 2.4 中对对象的新支持来存储和查询 Point、LineString 和 Polygon 对象。

有关更多信息，请参阅：

*   MongoDB 2.4 手册：[地理空间索引和查询](http://docs.mongodb.org/manual/applications/geospatial-indexes/)以及[地理空间查询兼容性图表](http://docs.mongodb.org/manual/reference/geospatial-queries/)
*   GeoJSON [1.0 规范](http://www.geojson.org/geojson-spec.html)

# ios - UIAlertView 文本字段更改 UILabel 值

> ID：15995806
> 
> 赞同：2
> 
> 时间：2013-04-14T04:28:11.250
> 
> 标签：ios, objective-c, uialertview

我的应用程序有一个`UILabel`. 我希望用户能够通过按下“编辑”按钮来更改标签的值。我可以用 实现一个`UIAlertView`文本字段`alert.alertViewStyle = UIAlertViewStylePlainTextInput`，但我不确定`UILabel`它将如何接收用户输入的新值。

这是我到目前为止所拥有的：

```
- (IBAction)edit
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Edit New Amount"
                                                    message:@"Enter new rate"
                                                   delegate:self
                                          cancelButtonTitle:@"Cancel"
                                          otherButtonTitles:@"Ok", nil];

    alert.alertViewStyle = UIAlertViewStylePlainTextInput;

    [alert show];

    UITextField *textField = [alert textFieldAtIndex:0];
    textField.placeholder = @"Enter New Rate";

} 
```

我还实现了`UIAlertViewDelegate`协议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:36:19.973

假设您想在用户按下“确定”时更改标签并`UILabel *someLabel`作为 ivar 引用：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
    if (buttonIndex != alertView.cancelButtonIndex) {
        // UIAlertViewStylePlainTextInput will only ever have a single field at index 0
        UITextField *field = [alertView textFieldAtIndex:0];

        someLabel.text = field.text;

    } else {
        // this is where you would handle any actions for "Cancel"
    }
} 
```

# math - 布尔公式编码

> ID：15995807
> 
> 赞同：0
> 
> 时间：2013-04-14T04:28:29.603
> 
> 标签：math, np-complete, np, np-hard, satisfiability

我想知道编码一个布尔公式需要多少位

```
@(x1,x2,x3,x4) = (x1 OR x2 OR NOT(x3) OR x4) AND ((NOT)x2 OR x3) AND (x1 OR (NOT)x4) 
```

@ 是 SAT 的一个实例。我认为它是 4 位，因为可能组合的总数是 2（power4）。那是对的吗？我应该计算 OR、NOT 和 AND 来计算编码所需的位数吗？我搜索了很多，但在这方面找不到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T14:02:33.950

您始终可以将表达式转换为逻辑等效的 CNF，同时保留变量的数量。但是，在最坏的情况下，这会产生指数级的子句，这对于大多数应用程序来说至少是不切实际的；-)。因此，通常在 SAT 中使用其他编码，它们使用较少（多项式）子句，但添加（多项式）变量数。通常使用[Tseitin 转换](http://en.wikipedia.org/wiki/Tseitin-Transformation)来生成这种编码。

请注意，变量的数量不一定是衡量编码有效性的标准。在某些情况下，SAT 可以通过添加冗余子句等技巧极大地加快速度。因此，当您想要生成有效的编码时，您应该查看 CNF 的结构，而不是变量或子句的数量。

Magnus Bjiirk 于 2009 年 7 月 25 日撰写的“Successful SAT Encoding Techniques”是一篇很好的论文，其中包含许多关于 SAT 编码工作的有用参考：http://jsat.ewi.tudelft.nl/addendum/Bjork_encoding.pdf [‎<](http://jsat.ewi.tudelft.nl/addendum/Bjork_encoding.pdf) / p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:00:27.357

我真的不知道 SAT 是什么，但从 Wikipedia 看来，您似乎需要为 x1-x4 分配一些值来保证真实性。真值表看起来像这样（我认为）：

如果为 false，括号中的 # 是导致 AND 失败的子句

```
TTTT => T
TTTF => T
TTFT => F (2)
TTFF => F (2)
TFTT => T 
TFTF => T
TFFT => T
TFFF => T
FTTT => F (3)
FTTF => T
FTFT => F (2,3)
FTFF => F (3)
FFTT => F (3)
FFTF => F (1)
FFFT => F (3)
FFFF => T 
```

看着它，似乎有 4 种情况下表达式将永远为真：

```
x1=T,x3=T => T
x1=T,x2=F => T
FTTF => T
FFFF => T 
```

所以我不确定你是如何编码的，但也许这有帮助？

# python - 为什么我收到此错误：python 2.7 类 TypeError：此构造函数不接受任何参数

> ID：15995809
> 
> 赞同：0
> 
> 时间：2013-04-14T04:29:18.093
> 
> 标签：python, class

班级工人：

```
def _init_(self,name,pay):
    self.name=name
    self.pay=pay
def lastName(self):
    return self.name.split()[-1]
def giveRaise(self,percent):
    self.pay*=(1.0+percent) 
```

bob=Worker('鲍勃·史密斯',50000)

sue=Worker('Sue Jones',60000)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:35:02.620

您在之前和之后使用了一个下划线`init`。Python 在前后使用两个下划线：

```
def __init__(self,name,pay):
    self.name=name
    self.pay=pay 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:49:16.300

也总是从基类型对象继承。你的类声明应该是：

```
class Worker(object):
    def __init__(self,name,pay):
        self.name=name
        self.pay=pay
    def lastName(self):
        return self.name.split()[-1]
    def giveRaise(self,percent):
        self.pay*=(1.0+percent) 
```

不从对象继承在 Python 2.x 中形成了一个“旧式”类。有关详细信息，请参阅[http://wiki.python.org/moin/NewClassVsClassicClass](http://wiki.python.org/moin/NewClassVsClassicClass)，如果您不知道，那么您需要新样式的课程。

# gcc - 如何使用 ARM 的 OpenMAX 开发层 (DL) 构建和解码

> ID：15995810
> 
> 赞同：2
> 
> 时间：2013-04-14T04:29:30.460
> 
> 标签：gcc, arm, cross-compiling, neon, openmax

我已经尝试了很长时间学习一些简单的方法来构建和利用 ARM 优化的 OpenMax DL 库，但没有成功，可在此处[https://silver.arm.com/browse/OX002](https://silver.arm.com/browse/OX002)获得，但需要登录才能下载。

找不到易于使用的 api 来解码或易于编译可以利用 OpenMAX DL 的高级库 (FFMpeg) 的指令。

由于这里有一些类似的讨论，我有一些希望在 stackoverflow 上获得[答案 Bench marking ARM NEON OpenMAx Numbers](https://stackoverflow.com/questions/14722534/bench-marking-arm-neon-openmax-numbers)

我想要实现的是使用 Gnu Compiler 构建 OpenMax DL，并可以在 Cortex A8 上解码一些样本以查看和使用性能差异。

任何关于如何做到这一点的建议或指示都将受到高度赞赏。

感谢和问候

光伏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T07:17:07.193

我是发布问题的人。这些库可以被编译，也可以通过包含您要使用的文件的源代码来简单地使用。Openmax 库有三个版本，一个版本在 c [https://silver.arm.com/browse/OX000](https://silver.arm.com/browse/OX000)（可以用任何编译器编译）。

第二个版本是 NEON 特定代码[https://silver.arm.com/browse/OX002](https://silver.arm.com/browse/OX002)。这可以使用ARM的编译器如armcc直接编译，如果你想使用GCC等其他编译器编译你需要在汇编宏中进行更改，代码保持不变。这些更改是宏和编译器指令的简单更改...

第三个版本适用于 arm11。

请说明任何具体问题，以便我提供帮助。

# android - 如何检查 OpenGL 1.0（在 Android 上）中的模型视图堆栈深度？

> ID：15995812
> 
> 赞同：0
> 
> 时间：2013-04-14T04:29:45.037
> 
> 标签：android, opengl-es

我使用 OpenGL 1.0 为 Android 编写了一个程序。我想检查什么是模型视图堆栈深度。我尝试使用 glGetIntegerv，但在 GL10 类中我看不到 GL_MODELVIEW_STACK_DEPTH 常量 - 即使在 GL11 类中有一个。那么，是否可以在 Android 上检查 OpenGL 1.0 中的模型视图堆栈深度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:35:20.400

这是因为在 GL10 类中，这个常量被称为 GL_MAX_MODELVIEW_STACK_DEPTH。

# php - 在原始javascript中加载ajax后将事件（使用动态数据）绑定到元素的最佳方法

> ID：15995813
> 
> 赞同：1
> 
> 时间：2013-04-14T04:29:52.200
> 
> 标签：php, javascript, ajax, html, javascript-events

从 ajax 响应将 html 输入到容器后，我想将事件绑定到各种元素。我知道这可以通过在插入 html 后立即运行 addEventListener 或 on+event=function(){} 来实现。

我的问题是我不确定使用动态内容的最佳方法，而传递给事件的数据每次都不同。

例如，以下 html 被加载到容器中：

```
<button id="myButton">go</button> 
```

现在，我需要将 onclick 函数绑定到包含在远程端呈现的数据的按钮元素 - onclick 函数将类似于：

```
myFunction($data1,$data2,$data3); 
```

而 $data1,$data2,$data3 是动态数据的变量。我可以将此函数绑定到按钮的一种方法是在将 HTML 数据插入容器后输出要评估的脚本，因此 HTML 输出将如下所示：

```
<button id="myButton">go</button>
<script>document.getElementById('myButton').addEventListener('click',function(){myFunction(<?php echo $data1.','.$data2.','.$data3 ?>)});})</script> 
```

无论如何，我是否可以以更灵活的方式从上述代码中获得结果，而不必为每个元素和每个请求输出该脚本行？

我想到的一种方法是在每个请求完成后调用一个绑定函数，在这个函数中，每个需要事件绑定的元素都存储在一个数组中。一个循环遍历数组并绑定适当的事件和函数——但这会因动态数据而变得复杂。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:44:28.547

使用您自己的事件委托形式：

```
var container = document.getElementById("container");
container.addEventListener("click", function (e) {
    e = e || window.event;
    var target = e.target || e.srcElement;
    if (target.tagName === "BUTTON") {
        // execute handler code for buttons
    }
}, false); 
```

元素是在`container`某个级别上添加这些动态元素/按钮的最接近、稳定（未从 DOM 添加/删除）的元素。

该事件一次绑定到一个包含元素，但会为`click`从后代冒出的任何事件触发（事件的默认行为`click`）。

这将简单地检查`tagName`元素的是否是“按钮”。这是相当广泛的，但如果这是你想要过滤掉的东西，那就是你可以使用的东西。如果要使用 a `class`，请将特定`class`（可能是“特殊类”）添加到动态按钮并使用：

```
if (~(" " + target.className + " ").indexOf(" special-class ")) {
    // execute handler for buttons with class "special-class"
} 
```

如果您需要使用按钮/元素传递特定数据，`data-*`请在生成按钮时将包含它的特定属性添加到按钮：

```
<button id="whateverId" data-data1="$data1" data-data2="$data2" data-data3="$data3">go</button> 
```

在您知道它是目标按钮的事件处理程序中，您可以使用：

```
var data1 = target.getAttribute("data-data1");
var data2 = target.getAttribute("data-data2");
var data3 = target.getAttribute("data-data3"); 
```

参考：

*   [http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/all-you-need-to-know-about-the-html5-data-attribute/)
*   [http://caniuse.com/dataset](http://caniuse.com/dataset)

# css - display:initial 在非 CSS3 浏览器上会发生什么？

> ID：15995816
> 
> 赞同：4
> 
> 时间：2013-04-14T04:30:31.973
> 
> 标签：css, cross-browser

`display: initial`我需要知道在不兼容 CSS3 的浏览器上使用时会设置什么值/css ？

我正在使用`display:none`& 隐藏类，需要显示，我打算使用它（如果以前是的话`display: initial`，我不想使用），但隐藏的元素必须在所有浏览器上显示。`display:block``display:inline`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T08:19:58.220

CSS 2.1[关于错误处理的规则](http://www.w3.org/TR/CSS2/syndata.html#parsing-errors)以及在实践中发生的情况是声明`display: initial`被忽略，而不影响样式表的其余部分。因此，该`display`属性从其他规则中获取其价值。在任何样式表（包括浏览器默认样式表）中没有对其进行*任何*`inline`设置的情况下，使用初始值。

问题编辑中的“后备”代码意味着 的值`display`将`inline`在支持 value 的浏览器`inline`和`block`其他浏览器中。这听起来不安全。

正如问题似乎假设的那样，该值并不意味着“样式表中设置的先前值”或类似*的*东西[`initial`](http://www.w3.org/TR/css3-values/#common-keywords)。相反，它表示在 CSS 规范中指定为属性初始值的值。因为，这是。*`display``inline`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:41:42.467

好的，我发现提供后备将是一个更安全的选择。所以我使用如下：

```
{
display: block;// just as fallback
display: initial;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-17T08:07:25.953

[W3C 学校页面](http://www.w3schools.com/cssref/pr_class_display.asp)中解释了显示属性的“磨合”值

**编辑：** Internet Explorer 支持 run-in 值，并解释元素是块级还是内联级。

我做了一个例子[`jsFiddle Example`](https://jsfiddle.net/gwwtpemr/)。*

# c# - 如果 TextLength = 13 使用按键以不同的方式格式化文本

> ID：15995817
> 
> 赞同：0
> 
> 时间：2013-04-14T04:30:43.180
> 
> 标签：c#, string-formatting, mask, phone-number

我有自动格式化电话号码的代码，格式是 12 3456-7890

```
1234567890 = 12 3456-7890 (TextLength = 12) 
```

我想要如果 TextLength = 13 以这种方式格式化

12345678901 = 12 34567-8901 (TextLength = 12) 或者换句话说，将“-”的位置更改为向右 1 个位置并在最后一个字符上添加最后一个数字

我的实际代码

```
private void txtFonecom_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.Back)
    {
    }
    else
    {
        if (txtFonecom.TextLength == 2)
        {
            txtFonecom.Text = txtFonecom.Text + " ";
            txtFonecom.SelectionStart = 3;
            txtFonecom.SelectionLength = 0;
        }
        if (txtFonecom.TextLength == 7)
        {
            txtFonecom.Text = txtFonecom.Text + "-";
            txtFonecom.SelectionStart = 8;
            txtFonecom.SelectionLength = 0;
        }
        if (txtFonecom.TextLength == 13)
        {
            //here i have to change format from 12 3456-7890 to 12 34567-8901
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:57:32.710

我建议不要手动处理按键，而是使用带有掩码的[MaskedTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.aspx)`00 0000-0000`控件，因为该控件可以自动为您设置输入格式。

假设您仍然更喜欢使用 TextBox 解决方案，这里的解决方案是：

```
private void txtFonecom_KeyPress(object sender, KeyPressEventArgs e)
{
    if (e.KeyChar == (char)Keys.Back)
    {
    }
    else
    {
        if (txtFonecom.TextLength == 2)
        {
            txtFonecom.Text = txtFonecom.Text + " ";
            txtFonecom.SelectionStart = 3;
            txtFonecom.SelectionLength = 0;
        }
        if (txtFonecom.TextLength == 7)
        {
            txtFonecom.Text = txtFonecom.Text + "-";
            txtFonecom.SelectionStart = 8;
            txtFonecom.SelectionLength = 0;
        }
        if (txtFonecom.TextLength == 12)
        {
            int caretPos = txtFonecom.SelectionStart;
            txtFonecom.Text = txtFonecom.Text.Replace("-", string.Empty).Insert(8, "-");
            txtFonecom.SelectionStart = caretPos;
        }
    }
} 
```

请记住，当用户删除数字时，您需要处理格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:19:30.110

无论用户在任何地方删除或添加数字，此代码都会将`" "`and保留在其位置：`"-"`

```
void txtFonecom_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (e.KeyChar != (char)Keys.Back)   
            {
                if (txtFonecom.TextLength == 2)
                {
                    txtFonecom.Text = txtFonecom.Text + " ";
                    txtFonecom.SelectionStart = 3;
                }

                if (txtFonecom.TextLength >= 7 && txtFonecom.TextLength < 12)
                {
                    if (txtFonecom.Text.Substring(2, 1) == " ") //check if " " exists
                    { }
                    else //if doesn't exist, then add " " at index 2 (character no. 3)
                    {
                        txtFonecom.Text = txtFonecom.Text.Replace(" ", String.Empty);
                        txtFonecom.Text = txtFonecom.Text.Insert(2, " ");
                    }

                    txtFonecom.Text = txtFonecom.Text.Replace("-", String.Empty);   //now add "-" at index 7 (character no. 8)
                    txtFonecom.Text = txtFonecom.Text.Insert(7, "-");
                    txtFonecom.SelectionStart = txtFonecom.Text.Length;
                }

                if (txtFonecom.TextLength >= 12)
                {
                    if (txtFonecom.Text.Substring(2, 1) == " ") //check if " " exists
                    { }
                    else    //if doesn't exist, then add " " at index 2 (character no. 3)
                    {
                        txtFonecom.Text = txtFonecom.Text.Replace(" ", String.Empty);
                        txtFonecom.Text = txtFonecom.Text.Insert(2, " ");
                    }

                    txtFonecom.Text = txtFonecom.Text.Replace("-", String.Empty);   //now add "-" at index 8 (character no. 9)
                    txtFonecom.Text = txtFonecom.Text.Insert(8, "-");

                    txtFonecom.SelectionStart = txtFonecom.Text.Length;
                }
            }
        } 
```

或者，如果您只想输入数字`textbox`，则使用

```
if ((int)e.KeyChar >= 48 && (int)e.KeyChar <= 57) 
```

# javascript - 从 HTML 文件将参数传递给 Javascript

> ID：15995818
> 
> 赞同：0
> 
> 时间：2013-04-14T04:30:43.830
> 
> 标签：javascript, html, css, ajax, arguments

我有一些显示图像库的代码。我有一个像这样的文件的调用。

```
<script src="js/main.js"></script> 
```

现在该文件的一部分包含以下代码。我想将一个参数传递到文件中，然后用给定的参数替换当前为“汽车”的标签元素。我知道我可以做类似的事情

```
<script src="js/main.js">
var tag = cat;
</script> 
```

但我不知道如何在 javascript 中处理该参数。

非常感谢！这是我想要使用参数并执行类似 tags = 'argument' 的 javascript 文件部分

```
// Load images via flickr for demonstration purposes:
$.ajax({
url: 'http://api.flickr.com/services/rest/',
    data: {
        format: 'json',
        method: 'flickr.photos.search',
        api_key: 'XXXXXXXXXXXXXXXXXXX',
    tags: 'cars'

    },
    dataType: 'jsonp',
    jsonp: 'jsoncallback'
}).done(function (data) {
    var gallery = $('#gallery'),
        url;
    $.each(data.photos.photo, function (index, photo) {
        url = 'http://farm' + photo.farm + '.static.flickr.com/' +
            photo.server + '/' + photo.id + '_' + photo.secret;
        $('<a data-gallery="gallery"/>')
            .append($('<img>').prop('src', url + '_s.jpg'))
            .prop('href', url + '_b.jpg')
            .prop('title', photo.title)
            .appendTo(gallery);
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:37:07.310

您可以将参数设置为`window.arg=value`or 简单的 arg=value 并以`window.arg`or arg 访问它，前提是您在同一本地范围内没有任何其他 arg 对象。并且您在使用此变量的执行发生之前设置该值。

您的代码问题可能是：-

```
<script src="js/main.js">
var tag = cat;
</script> 
```

应该是（假设在加载 js 文件时执行 ajax 调用，顺序无关紧要）

```
<script type="text/javascript">
 var tag = 'cat';
</script>

<script src="js/main.js"></script> 
```

//现在您将能够像 `tags: tag`在 ajax 调用中一样访问文件内的标签。

```
...
$.ajax({
url: 'http://api.flickr.com/services/rest/',
    data: {
        format: 'json',
        method: 'flickr.photos.search',
        api_key: 'XXXXXXXXXXXXXXXXXXX',
    tags: tag

    },
   .... 
```

# angularjs - 谷歌分析似乎没有被解雇

> ID：15995826
> 
> 赞同：0
> 
> 时间：2013-04-14T04:32:58.533
> 
> 标签：angularjs, google-analytics

我试图在 GA 周围查看许多线程，我觉得我已经完成了所需的操作。我的网站由 HTML5 和 angular.js 组成，页面结构大致如下（通过 ng-include）

```
index.html
|-header
--|-navigation
|-content
|-footer 
```

当点击导航栏的链接时，内容会改变（部分页面的角度），页眉，页脚保持不变。

我的 <head> 中的最后一个脚本标记如下（在 index.html 中）

```
<script type="text/javascript">
        var globalLanguage = 'en';

        // GA tracking variable
        var _gaq = [['_setAccount', 'UA-XXXXXXXX-X'], ['_trackPageview']];
</script> 
```

在 index.html 的底部，在结束 </body> 标记之前：

```
<script type="text/javascript">
    (function(d, t) {
        var g = d.createElement(t), s = d.getElementsByTagName(t)[0];
        g.async = 1;
        g.src = '//www.google-analytics.com/ga.js';
        g.type = 'text/javascript';
        s.parentNode.insertBefore(g, s);
    }(document, 'script'));
</script> 
```

我所有的角度控制器函数，调用一个通用函数，如[Tracking Google Analytics Page Views with Angular.js 中所述](https://stackoverflow.com/questions/10713708/tracking-google-analytics-page-views-with-angular-js)

```
function gaqPageView($scope, $location, $window) {
    console.log('triggering google analytics');
    $scope.$on('$viewContentLoaded', function(event) {
        console.log('event triggered, tracking: ' + $location.path());
        $window._gaq.push([ '_trackPageview', $location.path() ]);
    });
} 
```

我确实看到了控制台日志语句，控制台中也没有错误。当我打印出 _gaq 的内容时，我确实得到了一个随着我在页面中导航而增长的数组（这意味着我的 _gaq.push 调用工作得很好）。

但是，在我的网络调用中（在 chrome 开发工具中），我没有看到对 Google Analytics 的任何 _utm.gif 调用。（[调试 Google Analytics 代码的基础知识：GA Chrome 调试器和其他工具](http://www.webanalyticsworld.net/2012/01/basics-of-debugging-google-analytics-code-ga-chrome-debugger-and-other-tools.html)）。

我在这里想念什么？似乎谷歌分析没有触发事件并报告它？

**编辑：**我很确定我在这里很傻， _gaq 变量本身只是一个普通的 javascript 数组，所以当然 _gaq.push 工作得很好。但是，让 Google Analytics 启动并开始发送该 _gaq 的内容，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:07:46.723

您当前是在 localhost 上运行服务器，还是在不带“.”的 Intranet 名称上运行。-- 默认情况下，不会为 localhost 服务器发出跟踪 GIF 请求。

请参阅[Google Analytics GIF 请求未发送](https://stackoverflow.com/questions/9738815/google-analytics-gif-request-not-sent/9741228#9741228)。

* * *

另一个想法：通常 _gaq 仅在尚未定义时才定义为数组。如果 ga.js 已经执行，您可能正在覆盖 _gaq 对象。您的代码组织似乎不太可能，但是...

尝试更换

```
var _gaq = [['_setAccount', 'UA-XXXXXXXX-X'], ['_trackPageview']]; 
```

和

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-X'], ['_trackPageview']); 
```

# c - 跨线程释放内存

> ID：15995831
> 
> 赞同：5
> 
> 时间：2013-04-14T04:34:10.397
> 
> 标签：c, pthreads, dynamic-memory-allocation

跨线程释放内存是一种不好的做法吗？这样一个线程分配内存，并在退出后将指针传递给主线程以释放内存。我觉得答案是肯定的，但我只是想知道。

在我的代码中这样做的目的是让主线程可以在内存被释放之前对它做一些其他的事情。就我而言，有很多解决方法，我完全可以使用。但是，在我的情况下，让一个线程将 void * 返回到一块内存可以使代码非常方便。

编辑：我知道这样做没有技术故障。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T04:37:48.357

线程将分配给另一个线程的内存控制权传递给另一个线程并没有错。例如，在生产者/消费者模型中，生产者线程为它产生的任何东西分配内存，然后将对该内存的控制权交给消费者线程以供消费者线程使用和释放，这是非常合理的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-14T05:21:30.483

只要它对您的数据流模型有意义，特别是对您的程序对对象生命周期的要求，这不是“坏习惯”，但它可能会产生成本。许多现代分配器使用线程局部区域，在同一线程中分配和释放对象不会导致同步损失，但在不同线程中释放它会强制同步或产生其他成本。我不会因为这个原因改变你的设计，除非它是一个主要的瓶颈，但是考虑到这个实现细节，你也可以考虑其他设计，比如让线程将其输出存储在参数中父线程提供的缓冲区中线程启动函数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T04:38:12.853

所有线程共享一个公共堆。哪个线程分配或释放内存无关紧要，只要其他线程在释放内存时完成使用内存即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-14T04:38:53.273

动态内存使用伴随着您完全控制它的责任。用户有责任显式管理动态分配对象的生命周期，并确保在对象的预期生命周期结束后释放它。跨不同线程使用的动态分配的内存块没有任何问题。同一个进程中的所有线程共享同一个堆区域。唯一需要注意的是对象生命周期的定义和范围都很明确。

# php - Codeigniter：如何在迭代第一个表值时从第二个表中获取计数

> ID：15995833
> 
> 赞同：2
> 
> 时间：2013-04-14T04:34:27.040
> 
> 标签：php, codeigniter

我有一张两张桌子，`question`和`answer` 。

```
question
-----------
question_id PK Auto_Incr  
question    varchar... 
votes       int

answer
------------
answer_id    PK  Auto_icre
question_id  FK refrences question  
content      longtext 
```

我对每个问题都有几个答案，我正在迭代我的问题列表，但我不知道如何显示每个问题的答案数，同时我在我的视图页面中迭代我的问题表数据。

* * *

表数据结构数据：

```
 question
-----------
 question_id    question          votes
    1           what's name?       0
    2           where you?         3

answer 
----------
 answer_id      question_id        content
    4              2                 India
    5              2                 Nepal
    6              2                 Pakistan
    7              1                 Mr Osama Binladan 
```

* * *

因此，从我上面显示的表结构中，**我希望输出显示在包含以下数据的视图页面中**

```
 ------------------------------------------
      Question    : what's name?
      votes       :  0
     No. of answer:  1 

    -------------------------------------------
      Question    : where you? 
      votes       :  3
     No. of answer:  3 
    ------------------------------------------- 
```

我有问题，我如何显示否。每个特定问题的答案（计数答案）？

***更新型号：***

```
 //-------------------------Get hot question by------------------------------ 
        public function fetch_allquestions($limit, $start) {
            $this->load->database(); 
            $this->db->limit($limit, $start);   

            $select =array(
                'q.*',
                'COUNT(a.answer_id) AS `Answers`'
                );
    $this->db->select($select);
    $this->db->from('question q');
    $this->db->group_by('q.question_id');
    $this->db->join('answer a', 'answer.question_id = q.question_id'); 
      $this->db->join('userdetails ', 'userdetails.user_id = question.user_id'); //this is not working fine
    $query = $this->db->get();  

       if ($query->num_rows() > 0)
            {
                foreach ($query->result() as $row)
                {
                    $data[] = $row;
                }
                return $data;
            }
            return false;
       } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:10:31.103

你的结构不好，你应该改变它。

```
question
-----------
id   PK Auto_Incr  
question    varchar...
votes       int

answer
------------
answer_id  PK  Auto_icre
content    longtext 
question_id FK refrences question table 
```

现在您可以使用此查询轻松计算它们

```
SELECT 
    q.*,
    COUNT(a.answer_id) AS `Answers`
FROM question q
LEFT JOIN answer a ON a.question_id = q.id
GROUP BY q.id

$query  =   "
            SELECT 
                q.*,
                COUNT(a.answer_id) AS `Answers`
            FROM question q
            LEFT JOIN answer a ON a.question_id = q.id
            GROUP BY q.id";
$this->db->query($query); 
```

或者

```
$select =array(
            'q.*',
            'COUNT(a.answer_id) AS `Answers`'
            );
$this->db->select($select);
$this->db->from('question q');
$this->db->group_by('q.id');
$this->db->join('answer a', 'answer.question_id = question.id'); 
$query = $this->db->get(); 
```

查看显示

```
<?php
foreach ($query3 as $row) 
{
?>
    <?php echo $row->votes ?>
    <?php echo $row->question    ?>
    <?php echo $row->Answers  ?>
<?php 
}
?> 
```

您应该在查询中注意我已指定`Answers`为别名，因此您需要使用它`$row->Answers`来显示计数。

新的编辑

你的模型应该是这样的

```
public function fetch_allquestions($limit, $start) 
{
    $this->load->database(); 
    $this->db->limit($limit, $start);   
    $select =array(
                    'question.*',
                    'userdetails.*'
                    'COUNT(answer.answer_id) AS `Answers`',
            );

    $this->db->select($select);
    $this->db->from('question');
    $this->db->join('answer', 'answer.question_id = question.question_id'); 
    $this->db->join('userdetails', 'userdetails.user_id = question.user_id');
    $this->db->group_by('question.question_id');
    $query = $this->db->get();  

    if ($query->num_rows() > 0)
    {
        return $query->result();// returning result is enough you dont have to loop
    }else{
        return false;
    }
} 
```

# java - type2的mysql数据库的驱动程序名称和url是什么

> ID：15995838
> 
> 赞同：0
> 
> 时间：2013-04-14T04:35:09.157
> 
> 标签：java, mysql, jdbc

我需要编写一个 jdbc 程序来使用 type2 驱动程序连接 mysql。我花了很多时间来获取 mysql 的 url 和驱动程序名称。请不要说去谷歌我在谷歌尝试了很多。我没有找到任何地方。我可以找到 Oracle 但不能找到 mysql。请帮助我。在此先感谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T07:39:29.150

除了[一个长期（2002 年）死掉的项目](http://sourceforge.net/projects/java2mysql/)之外，没有用于 MySQL 的 Type 2 JDBC 驱动程序。

# java - 在 RTP GUI 中实现 Actionlistener

> ID：15995840
> 
> 赞同：0
> 
> 时间：2013-04-14T04:35:39.773
> 
> 标签：java, swing, actionlistener, java-2d, ready

所以我试图为一个界面创建两个按钮，我尝试实现 ActionListener 以使其中一个按钮能够打印一个字符串，但它给了我一个错误，说“actionlistener 没有在类 BorderDemo 中实现”

我做错了什么？

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.image.BufferStrategy;
class BorderDemo
implements ActionListener
{
public static void main (String[] args)
{
JFrame F = new JFrame("Buttons");
F.addWindowListener
(new WindowAdapter()
{
public void windowClosing(WindowEvent e)
{
System.exit(0);
}});
F.setSize(544,416);
JPanel pane = (JPanel) F.getContentPane();
pane.add(new Picture(),BorderLayout.CENTER);
pane.add(new JButton("Start"),BorderLayout.WEST);
pane.addActionListener(this);
pane.add(new JButton("Stop"),BorderLayout.EAST);
F.setVisible(true);
F.setResizable(false);
}
}
class Picture extends JComponent
{
public Picture ()
{
repaint();
}

public void paint (Graphics g)
{
g.setColor(Color.yellow);
g.fillOval(getWidth()/4,getHeight()/4,
getWidth()/2,getHeight()/3);
g.setColor(Color.black);
g.fillOval(getWidth()/2,getHeight()/4,
getWidth()/17,getHeight()/3);
g.setColor(Color.black);
g.fillOval(getWidth()/3,getHeight()/4,
getWidth()/17,getHeight()/3);
g.setColor(Color.white);
g.fillOval(getWidth()/5,getHeight()/5,
getWidth()/5,getHeight()/7);
g.setColor(Color.white);
g.fillOval(getWidth()/3,getHeight()/8,
getWidth()/5,getHeight()/7);
}
public void actionPerformed(ActionEvent e) {
      System.out.println("Item clicked: "+e.getActionCommand());
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:53:35.230

看起来像是`actionPerformed`添加到`Picture`类而不是`BorderDemo`. 因此，如果将其移入`BorderDemo`其中应该可以解决上述错误。

错误的原因`BorderDemo`是声明为实现`ActionListener`接口的事实：

```
class BorderDemo implements ActionListener 
```

但是，它没有实现它。中定义的添加`actionPerformed`方法`ActionListener`，即：

```
@Override
public void actionPerformed(ActionEvent arg0) {
} 
```

查看[实现接口](http://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html)教程。另请参阅[如何编写动作侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)。

一些小评论：

1.  您可能希望将动作侦听器添加到按钮，而不是`JPanel`. `JPanel`不接受动作监听器。

2.  您可以使用以下方法，而不是将窗口侦听器添加到框架以在关闭时退出应用程序：

    `frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`

3.  `setSize(544, 416);`而不是通过实现和调用框架`getPrefferedSize()`来设置框架大小。`Picture``pack();`

4.  在`Picture`课堂上，不要覆盖`paint()`，覆盖`paintComponent()`。另外，不要忘记调用`super.paintComponent()`您的实现。请参阅[执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)。

5.  *请*务必使用`invokeLater()`. 请参阅[初始线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。

6.  正如上面评论中已经提到的，代码可读性非常重要。有关详细信息和示例，请参阅[Java 编程语言的代码约定。](http://www.oracle.com/technetwork/java/codeconv-138413.html)

***编辑：基于在 RTP 1.7 中运行正常的已发布代码的示例***

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

class BorderDemo {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowUI();
            }
        });
    }

    public static void createAndShowUI() {
        JFrame frame = new JFrame("Buttons");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JButton startButton = new JButton("Start");
        startButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("Start clicked");
            }
        });
        JButton stopButton = new JButton("Stop");
        stopButton.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                System.out.println("Stop clicked");
            }
        });

        Container contentPane = frame.getContentPane();
        contentPane.add(new Picture(), BorderLayout.CENTER);
        contentPane.add(startButton, BorderLayout.WEST);
        contentPane.add(stopButton, BorderLayout.EAST);

        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        frame.setResizable(false);
    }

    static class Picture extends JComponent {
        public Picture() {
        }

        public Dimension getPreferredSize() {
            return new Dimension(544, 416);
        }

        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            g.setColor(Color.yellow);
            g.fillOval(getWidth() / 4, getHeight() / 4, getWidth() / 2,
                    getHeight() / 3);
            g.setColor(Color.black);
            g.fillOval(getWidth() / 2, getHeight() / 4, getWidth() / 17,
                    getHeight() / 3);
            g.setColor(Color.black);
            g.fillOval(getWidth() / 3, getHeight() / 4, getWidth() / 17,
                    getHeight() / 3);
            g.setColor(Color.white);
            g.fillOval(getWidth() / 5, getHeight() / 5, getWidth() / 5,
                    getHeight() / 7);
            g.setColor(Color.white);
            g.fillOval(getWidth() / 3, getHeight() / 8, getWidth() / 5,
                    getHeight() / 7);
        }
    }
} 
```

# python - python函数对交替磁盘进行排序

> ID：15995841
> 
> 赞同：1
> 
> 时间：2013-04-14T04:36:05.637
> 
> 标签：python, list, python-2.7, sorting

抱歉刚刚丢失的信息！

我需要一些帮助来完成我的任务，这是基本的 Python 编程，但在实现该功能时我遇到了困难。希望可以有人帮帮我！！提前谢谢^^

任务：首先，我需要构建一个数组，A 2n 交替“1”和“0”。即 101010 然后，我需要按全 0 然后全 1 的顺序对它们进行排序，即 000111

为此，我需要构建一个函数 Arrange_Disks(A,n) 来接收数组 A 和 n 并在完成 2n 个磁盘的必要移动后返回数组。主函数应显示排列前后的数组以及进行排列所需的移动次数。使用 2 到 10 范围内的 n 值。

以下是我到目前为止所做的功能：

```
A=[]

def Arrange_Disks(A,n):

    moves=0
    for i in xrange(n):
        minn=i
        for j in xrange(i+1,n):
            if A[j]<A[minn]:
                minn=j
        moves+=minn-i       
        A[i],A[minn]=A[minn],A[i]
    return A
    return moves

def main():

    n=input("Please enter a number between 2 to 10: ")

    for disk in range (1,(2*n+1)):
        if (disk%2) != 0:
            A.append("1")
        else:
            A.append("0")
    print "This is the original array: ", A

    Arrange_Disks(A,n)

    print "This is the sorted array: ", A
    print "This is the number of moves required: ", moves

main() 
```

不知何故，当我运行此代码时，它只显示到这里：

```
>Please enter a number between 2 to 10: 3
>This is the original array:  ['1', '0', '1', '0', '1', '0']
>This is the sorted array:  ['0', '1', '1', '0', '1', '0']
>This is the number of moves required:  0 
```

并且输出不反映移动的数量......

所以我想知道是否有人可以告诉我我的代码。我知道这是一个很长的问题，非常感谢您阅读并花时间回答我的问题！

ps我对这个问题做了冒泡排序方法，我使用的是python 2.7

再次非常感谢^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T04:57:59.613

如果我正确理解了您的问题，那么我想您可以在此处使用[选择排序](http://en.wikipedia.org/wiki/Selection_sort)：

```
def selection_sort(A,n):
    moves=0
    for i in xrange(n):
        minn=i
        for j in xrange(i+1,n):
            if A[j]<A[minn]:
                minn=j
        moves+=minn-i       
        A[i],A[minn]=A[minn],A[i]
    print moves,A

#examples:
selection_sort(['1', '0', '1', '0', '1', '0'],6)
selection_sort(['1', '0', '1', '1', '1', '1'],6) 
```

**输出：**

```
6 ['0', '0', '0', '1', '1', '1']
1 ['0', '1', '1', '1', '1', '1'] 
```

并生成这些交替`1`的`0`列表，您可以使用`itertools.cycle`：

```
>>> from itertools import cycle
>>> c=cycle(('1','0'))
>>> n=3
>>> [next(c) for _ in xrange(n*2)]
['1', '0', '1', '0', '1', '0'] 
```

您的代码的工作版本：

```
def Arrange_Disks(A):
    length=len(A)
    moves=0
    for i in xrange(length):
        minn=i
        for j in xrange(i+1,length):
            if A[j]<A[minn]:
                minn=j
        moves+=minn-i       
        A[i],A[minn]=A[minn],A[i]
    return A,moves                #returns a tuple containing both A and moves

def main():

    n=input("Please enter a number between 2 to 10: ")
    A=[]
    for disk in range (1,(2*n+1)):
        if (disk%2) != 0:
            A.append("1")
        else:
            A.append("0")
    print "This is the original array: ", A

    A,moves=Arrange_Disks(A)

    print "This is the sorted array: ", A
    print "This is the number of moves required: ", moves

main() 
```

**输出：**

```
Please enter a number between 2 to 10: 3
This is the original array:  ['1', '0', '1', '0', '1', '0']
This is the sorted array:  ['0', '0', '0', '1', '1', '1']
This is the number of moves required:  6

Please enter a number between 2 to 10: 5
This is the original array:  ['1', '0', '1', '0', '1', '0', '1', '0', '1', '0']
This is the sorted array:  ['0', '0', '0', '0', '0', '1', '1', '1', '1', '1']
This is the number of moves required:  15 
```

# php - 如何在 Yii 框架中获取当前路由器？

> ID：15995842
> 
> 赞同：4
> 
> 时间：2013-04-14T04:36:06.883
> 
> 标签：php, yii

我是 Zend Framework [版本 1] 开发人员，现在我正在尝试学习 Yii 框架。

如何在 Yii 框架中获取当前路由器？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T15:47:55.607

对于以下示例 URL `http://site.ru/forum/index?var=val`：

*   [`Yii::app()->getRequest()->getQueryString()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getQueryString-detail)会回来`var=val`，

*   [`Yii::app()->getRequest()->getPathInfo()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getPathInfo-detail)会回来`forum/index`，

*   [`Yii::app()->getRequest()->getBaseUrl()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getBaseUrl-detail)会回来`/forum`，

*   [`Yii::app()->getRequest()->getUrl()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getUrl-detail)会回来`forum/index?var=val`，

*   [`Yii::app()->getRequest()->getHostInfo()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getHostInfo-detail)会回来`http://site.ru`，

*   [`Yii::app()->getRequest()->getRequestUri()`](http://www.yiiframework.com/doc/api/1.1/CHttpRequest/#getRequestUri-detail)将返回`forum/index?var=val`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T13:15:14.997

如果您关注的是路线，而不是与路径相关的信息：在大多数视图文件（和布局）中，您可以使用`$this->route`，如果您不在正确的上下文中，`$this`那么您可以经常使用`Yii::app()->controller->route`.

两者都从 url 管理器返回当前匹配的路由。就像是：

`site/index`

`site/error`

`user/edit`

此外，要让当前控制器处于使用状态，您可以使用`$this->id`返回类似`site`或`user`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T09:18:25.403

The [other answer](https://stackoverflow.com/a/16000978/1469208) saved me lot of time, but there is a little consideration. I used:

```
Yii::app()->getRequest()->getRequestUri(), 
```

You should also take the `/` in your result. For example for `http://www.tchaps.ru/ru` you should have `/ru`.

# matlab - 此图像中存在什么样的噪点，如何去除？

> ID：15995845
> 
> 赞同：1
> 
> 时间：2013-04-14T04:36:31.340
> 
> 标签：matlab, image-processing, noise

我的任务是去模糊图像。我使用了 Weiner Filter 并得到了这种图像。是否可以进一步改进？

![去模糊图像](https://i.stack.imgur.com/FnrKk.png)

这是我的代码：

```
I = im2double(imread('Demo4_b.jpg'));
imshow(I);
title('Original Image');

LEN = 21;
THETA = 11;
PSF = fspecial('motion', LEN, THETA);

estimated_nsr = 0;
wnr2 = deconvwnr(I, PSF, estimated_nsr);
figure, imshow(wnr2)
title('Restoration of Blurred, Noisy Image Using NSR = 0')

estimated_nsr = noise_var / var(I(:));
wnr3 = deconvwnr(I, PSF, estimated_nsr);
figure, imshow(wnr3)
title('Restoration of Blurred, Noisy Image Using Estimated NSR'); 
```

在使用 NSR 和没有 NSR 的情况下，我得到相同的输出。这是我的原始图像： ![原始图像](https://i.stack.imgur.com/eJw5z.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T14:07:55.843

您使用 matlab 示例中的运动内核。然而，图像看起来更像是用高斯核平滑过的。这就是你得到不稳定线条的原因。

尝试这个：

```
I = im2double(imread('a.jpg'));
imshow(I);
title('Original Image');

PSF = fspecial('gaussian', [51 51], 5);
wnr2 = deconvwnr(blurred, PSF, 0.0003 / var(I(:)));
figure, imshow(wnr2)
title('Restoration of Blurred, Noisy Image Using NSR = 0') 
```

您仍然可以使用两个参数（5 和 0.0003）对其进行调整

# swiftmailer - Swiftmailer 成功发送但没有收到邮件

> ID：15995847
> 
> 赞同：3
> 
> 时间：2013-04-14T04:36:33.703
> 
> 标签：swiftmailer

我制作了一个简单的联系表格并使用 swiftmailer（带有 symfony2）发送和发送电子邮件。

当我使用 gmail 帐户时一切都很好，但在生产中它必须是网站域中的 noreply 地址。所以我更改了参数以对应这个电子邮件帐户。

看起来它正在使用发送方法返回 true 但未收到任何消息，我检查了垃圾邮件文件夹但它也没有到达那里。设置在 Thunderbird 中工作时 100% 正确。

不知道在哪里寻找问题。有什么建议我应该检查什么？

我曾尝试使用相同的帐户使用 PHPMailer 发送电子邮件并且它有效，所以似乎问题只是与 swiftmailer 有关。我在我的项目中的其他几个地方发送电子邮件，并希望避免现在更改它，而是修复它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T21:55:00.910

检查日志后发现问题。

电子邮件被拒绝，因为我将发件人设置为用户提供的电子邮件。服务器拒绝他们，因为这个地址不属于我发送的帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T17:19:05.423

默认情况下，swiftmailer 的日志记录在生产中被禁用。您可以在 config.yml 中为 swiftmailer 启用日志记录，方法是在 swiftmailer 部分添加“logging: true”，如下所述：http: [//symfony.com/doc/master/reference/configuration/swiftmailer.html#logging](http://symfony.com/doc/master/reference/configuration/swiftmailer.html#logging)

希望这会给您一些更具体的错误消息以供搜索。

# ruby - 公用文件夹中的 sinatra 文件被路由？

> ID：15995856
> 
> 赞同：2
> 
> 时间：2013-04-14T04:37:56.183
> 
> 标签：ruby, sinatra

我的项目根目录中有公共文件夹。放置了几张图片，当我尝试访问它们时，它说“Sinatra 不知道这个小曲......”

默认公用文件夹不应该称为“公共”吗？还是我必须明确设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:06:08.887

文件夹名称应为“public”，然后在文件夹结构为 public/image.png 时使用 /image.png 访问它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:29:52.727

不需要在路径中包含 /public。

# java - java中的抽象静态类给出错误非法修饰符组合

> ID：15995858
> 
> 赞同：5
> 
> 时间：2013-04-14T04:38:18.620
> 
> 标签：java, static, abstract, extends

```
abstract class AbstractCase2 {
    abstract static void simpleMethod1();//giving error
}

class Case2 extends AbstractCase2 {
    static void simpleMethod1() {
    System.out.println("Within simpleMethod1");
}
    public static void main(String args[]) {            
    simpleMethod1();            
    System.out.println("with AwM");
    }     
} 
```

得到错误：

```
C:\>javac Case2.java
Case2.java:8: error: illegal combination of modifiers: abstract and static
        abstract static void simpleMethod1();
                      ^
1 error 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-14T04:39:55.510

静态方法如何抽象？静态方法不会被覆盖！！

如果你想让你的方法抽象，让它成为非静态的

抽象方法是设计结构。您创建抽象方法是因为您希望您的子类覆盖它们，但静态方法与类而不是它们的实例相关联，因此它们不能被覆盖。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-14T05:16:49.123

`static abstract`让你的编译器大吃一惊。

你从不同的方向拉它。

**static：**嘿编译器，这是我的方法的代码，随时可以使用，即使您不创建实例。

**摘要：**嘿编译器，将来我会将代码放在我的方法中，放在其中一个子类上。

**编译器：**那你有代码还是什么？不好了！让我抛出一个错误...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-28T01:16:23.440

抽象和静态是非法组合，因为抽象方法没有主体，静态方法可以在没有抽象类的对象的情况下调用。当我们没有函数体时，我们如何调用该函数？我们不能在没有定义原型的情况下调用一个函数。

抽象函数可以是非静态的。这是因为非静态函数需要调用一个对象，并且只有当且仅当它覆盖其父类的所有抽象函数时，才能创建从抽象类继承的类的对象。所以，我们不能在不给父抽象函数一个主体的情况下创建一个对象，从而解决歧义。

# javascript - 用这个属性替换 div html

> ID：15995861
> 
> 赞同：0
> 
> 时间：2013-04-14T04:38:57.507
> 
> 标签：javascript, jquery, html

我有html代码

```
<div content="Something 1">Content 1</div>
<div content="Something 2">Content 2</div>
<div content="Something 3">Content 3</div> 
```

我想使用 jQuery 用这个`content`属性替换 HTML 的内容。

```
<div content="Something 1">Something 1</div>
<div content="Something 2">Something 2</div>
<div content="Something 3">Something 3</div> 
```

我不知道如何选择多对象。请任何人帮助我。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:43:10.287

> `ID`'s 不能包含空格。

这将替换`Content x`with的所有实例`Something x`，`x`从`id`.

```
$("div").each(function(){
    $(this).text($(this).attr("id"));
}); 
```

**示例 1：http: [//jsfiddle.net/charlescarver/xuGEq/2/](http://jsfiddle.net/charlescarver/xuGEq/2/)**

这将替换`Content x`with的所有实例`Something 1`：

```
$("div").each(function(){
    $(this).text("Something 1");
}); 
```

**示例 2：http: [//jsfiddle.net/charlescarver/xuGEq/1/](http://jsfiddle.net/charlescarver/xuGEq/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T04:50:58.140

如果您的所有 id 都以前缀 something 开头，请使用：

```
$("div[id^='Something']").text("Something 1") 
```

如果您正在寻找的是编辑文档中的所有 div 标签，您可以简单地：

```
$("div").text("Something 1") 
```

如果您确切知道要编辑的 html 标记是什么，我建议您用类标记它们。让我们说：

```
<div id="Something 1" class="editable">Content 1</div>
<div id="Something 2" class="editable">Content 2</div>
<div id="Something 3" class="editable">Content 3</div> 
```

这样你就可以简单地做：

```
$(".editable").text("Something 1") 
```

如果您想修改他们的内部文本。或者：

```
$(".editable").html("<strong>Something 1</strong>") 
```

如果您想为他们提供更丰富的格式，不仅要修改他们的文本，还要修改他们的内部 HTML。

将 id 与空格一起使用是一种不好的做法。Chrome 不会抱怨，但其他一些浏览器会抱怨。因此，仅当您使用“Something 1”之类的 id 时，最好使用“something_1”（属性和 html 标记使用小写字母的惯例）。

这里有一个链接解释了选择器在 jQuery 中的工作原理：http: [//api.jquery.com/](http://api.jquery.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:48:22.430

如果您不想影响页面上的所有 div，但只想影响其 id 中包含某些内容的 div，请尝试此操作...

```
$("[id^=Something]").each(function(){
    $(this).text("Something 1");
}); 
```

请注意，在 id 中使用空格不是可行的方法，您应该将它们命名为“something1”......

# wpf - 为什么交互 DataTrigger 在设计时不生效？

> ID：15995870
> 
> 赞同：1
> 
> 时间：2013-04-14T04:40:51.250
> 
> 标签：wpf, user-controls, datatrigger

好的！我做了一个大版本:)

在 UserControl 中，我需要使用如下*交互* `DataTrigger`。原因是我需要一个`MyStory`带有绑定关键帧值的情节提要 ( )。（这样做之前在[这里](https://stackoverflow.com/q/15848381/668342)讨论过。）

```
<UserControl x:Class="WpfApplication1.UserControl2"
             ...
             xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:local="clr-namespace:WpfApplication1">

    <UserControl.Resources>
        <Style x:Key="MyControlStyle" TargetType="UserControl">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Grid>
                            <Grid.Resources>
                                <Storyboard x:Key="MyStory">
                                    <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush).(SolidColorBrush.Color)" Storyboard.TargetName="brdBase">
                                        <SplineColorKeyFrame KeyTime="0:0:1" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:UserControl2}}, Path=SpecialColor}"/>
                                    </ColorAnimationUsingKeyFrames>
                                </Storyboard>
                            </Grid.Resources>

                            <Border x:Name="brdBase" BorderThickness="1" BorderBrush="Gray">
                                <TextBox Text="{Binding SpecialText}"/>
                            </Border>

                            <i:Interaction.Triggers>
                                <ei:DataTrigger Binding="{Binding SpecialText}" Value="Fire!">
                                    <ei:ControlStoryboardAction Storyboard="{StaticResource MyStory}" ControlStoryboardOption="Play"/>
                                </ei:DataTrigger>
                            </i:Interaction.Triggers>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <Grid x:Name="grdRoot" DataContext="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type local:UserControl2}}}">
        <UserControl Style="{DynamicResource MyControlStyle}"/>
    </Grid>

</UserControl> 
```

后面的 C# 代码：

```
public partial class UserControl2 : UserControl
{
    #region ________________________________________  SpecialColor

    public Color SpecialColor
    {
        get { return (Color)GetValue(SpecialColorProperty); }
        set { SetValue(SpecialColorProperty, value); }
    }

    public static readonly DependencyProperty SpecialColorProperty =
        DependencyProperty.Register("SpecialColor",
                                    typeof(Color),
                                    typeof(UserControl2),
                                    new FrameworkPropertyMetadata(Colors.Red));
    #endregion

    #region ________________________________________  SpecialText

    public string SpecialText
    {
        get { return (string)GetValue(SpecialTextProperty); }
        set { SetValue(SpecialTextProperty, value); }
    }

    public static readonly DependencyProperty SpecialTextProperty =
        DependencyProperty.Register("SpecialText",
                                    typeof(string),
                                    typeof(UserControl2),
                                    new FrameworkPropertyMetadata(string.Empty));

    #endregion

    public UserControl2()
    {
        InitializeComponent();
    }
} 
```

我希望上面的代码在设置为“Fire！”`MyStory`后立即播放。`SpecialText`为此，我们可以使用以下方法之一：

**1.**

```
<Grid>
    <local:UserControl2 SpecialText="Fire!"/>
</Grid> 
```

**2.**输入“开火！” 在运行时的 UserControl2 文本框中。

第一种方法在设计时不会影响 GUI。我的应用程序中有一些复杂的用户控件，确实需要解决这个问题。有一些 DP 调用情节提要以动画方式更改 UserControl 的布局。显然，这些故事板涉及一个或多个绑定的关键帧。所以我必须越来越多地运行我的应用程序来检查它:(

# html - 条形评级 - 希望默认选择为无选择

> ID：15995872
> 
> 赞同：3
> 
> 时间：2013-04-14T04:41:00.527
> 
> 标签：html

来自[http://netboy.pl/demo/jquery-bar-rating/examples/](http://netboy.pl/demo/jquery-bar-rating/examples/) - 我正在使用第一个使用 10 条的评级系统。但是，我希望默认设置为根本没有选择的选项（即没有条形图）。现在默认选择是选项#1 - 有什么想法吗？我确实尝试添加一个空选项，但它所做的只是在前面添加另一个栏（总共 11 个栏，这不是我想要的）。我想要 10 个条但没有突出显示/选择。有什么想法吗？！？

```
<div class="input select rating-a">
    <select class="example-a" name="content_rating">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
     </select>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T06:02:11.153

由于您使用的是 jquery，因此您可以执行以下操作：

```
$('.example-a').prop("selectedIndex", -1); 
```

[http://jsfiddle.net/GAXBf/](http://jsfiddle.net/GAXBf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-28T11:28:47.840

如果它仍然相关。您可以添加一个空选项。

```
<select id="rating">
   <option value></option>
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
   <option value="4">4</option>
   <option value="5">5</option>
</select> 
```

这将给出 5 星零填充。当然，这只有在没有定义初始值的情况下才有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-07T06:55:15.487

```
<select id="example">
    <option value=""></option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
</select> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-06-24T01:57:12.463

网址： http: [//netboy.pl/demo/jquery-bar-rating/examples/](http://netboy.pl/demo/jquery-bar-rating/examples/)（此网址无效）

如果我没记错的话，您正在使用 jquery bar rating （[http://antenna.io/demo/jquery-bar-rating/examples/](http://antenna.io/demo/jquery-bar-rating/examples/)）。

在这个 jquery bar rating 库中，我们可以在 bar 上设置默认未选择的值。

```
<script>
$('#rating').barrating('show', {
    theme: 'bars-1to10',
    deselectable: true
});
</script> 
```

HTML：

```
<select id="rating">
    <option value=""></option>
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    .
    .
    <option value="10">10</option>
</select> 
```

希望，它会解决你的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-16T11:00:13.427

万一有人想知道，在最新版本的*[jQuery Bar Rating Plugin](https://github.com/antennaio/jquery-bar-rating)* (v1.0.5) 中，您可以添加以下选项来解决问题：

```
<option disabled selected>Select an option</option> 
```

所以你的选择框看起来像这样：

```
<select>
  <option disabled selected>Select an option</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
  <!-- etc. -->
</select> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-28T20:20:48.147

我对这个最新的 2016 版本有同样的问题，我通过在函数调用之后添加这个 javascript 来解决它，现在一切正常（希望这对某人有帮助）：

```
$(document).ready(function() {
        // remove the selection on the dropdown menu
        $("#rating").val([]);
        // remove all "selected" css to show as "unselected" by default
        $(".br-widget a").removeClass('br-selected');
        // remove default "selected text", if any
        $(".br-current-rating").empty();
}); 
```

这是我的完整代码：

```
<script>
    // 5-star rating script
    $(function() {
        $('#rating').barrating({
            theme: 'fontawesome-stars',
            initialRating: null, // initial rating
            showValues: false, // display rating values on the bars?
            showSelectedRating: true, // append a div with a rating to the widget?
            deselectable: true, // allow to deselect ratings
            reverse: false, // reverse the rating?
            readonly: false, // make the rating ready-only?
            fastClicks: true, // remove 300ms click delay on touch devices?
            hoverState: true, // change state on hover?
            silent: false, // supress callbacks when controlling ratings programatically
        });
    });

    $(document).ready(function() {
        // remove the selection on the dropdown menu
        $("#rating").val([]);
        // remove all "selectec" css to show as "unselected" by default
        $(".br-widget a").removeClass('br-selected');
        // remove default "selected text", if any
        $(".br-current-rating").empty();
    });
</script>
<style>
    .br-wrapper{
        width: auto;
        display: inline-block;
    }
    .br-widget{
        width: auto;
    }
</style> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-01-25T14:41:33.987

[我遇到了与 jQuery Bar Rating ( http://antenna.io/demo/jquery-bar-rating/examples/](http://antenna.io/demo/jquery-bar-rating/examples/) )的原始海报相同的问题

当调用选择字段中的每个选项时，将转换为包含在具有“br-widget”类的 div 中的链接

我只想显示 5 颗星供用户选择，但是选择中的选项数量将决定屏幕上将显示多少星级。我找到的解决方案是添加一个“请选择”作为选项，然后使用 jquery 隐藏它，如下所示。

```
$(document).ready(function() {

  $(\'#rating\').barrating({
    theme: \'css-stars\' 
    });

  //HIDE THE FIRST STAR OPTIONS
  $(".br-widget a:first-child").css( "display", "none" );

});
```

```
<select name="rating" id="rating">
  <option value="0">Please Select</option>
  <option value="1">1 Star</option>
  <option value="2">2 Stars</option>
  <option value="3">3 Stars</option>
  <option value="4">4 Stars</option>
  <option value="5">5 Stars</option>
</select>
```

# jquery - 带有复选框的剑道列表视图以及选择所有复选框选项

> ID：15995882
> 
> 赞同：3
> 
> 时间：2013-04-14T04:42:45.207
> 
> 标签：jquery, jquery-plugins, kendo-ui

我是 kendo UI 实现的新手，正在寻找一种方法来创建带有复选框的列表视图，第一个复选框是 All Option，如果选中，则选择列表视图中的所有项目。我创建了一个模板，允许我向项目添加复选框，但我需要在所有数据之上添加一个 ALL 复选框。这是我到目前为止所做的工作，下面（截图）是我想要实现的

_ [http://jsfiddle.net/Archie/w6jsZ/](http://jsfiddle.net/Archie/w6jsZ/)

![带有复选框的列表视图](https://i.stack.imgur.com/UfexM.jpg)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:24:18.217

您的代码如下所示：http: [//jsfiddle.net/Archie/w6jsZ/](http://jsfiddle.net/Archie/w6jsZ/)

```
<div style="width:250px;height:350px;overflow-y:scroll;">
    <div>
        <input type="checkbox" id="checkall" class="click" />
        <span class="checkbox">All</span>
    </div>
    <div id="listView" class="k-listview" >
    </div>
</div>
<script type="text/x-kendo-tmpl" id="myTemplate">

    <div class="item click" data="${ProductID}">
        <input type="checkbox" class="click" />
        <span class="checkbox">#:ProductName#</span>
    </div>
</script> 
```

```
$(document).ready(function () {

    function checkboxEventBinding()
    {
        $('#checkall').bind('click',function(e){
            if(this.checked)
            {
                $('.item.click input').attr('checked','checked');
            }
            else
            {
                $('.item.click input').removeAttr('checked');
            }
        })
    }

    var dataSource = new kendo.data.DataSource({
                        transport: {
                            read: {
                                url: "http://demos.kendoui.com/service/Products",
                                dataType: "jsonp"
                            }
                        }
                    });

    $("#listView").kendoListView({
        dataSource: dataSource,
        template: kendo.template($("#myTemplate").html()),
        headertemplate:"<div class='item click' id='headerTemp' data='*'>       <input type='checkbox' class='click' /><span class='checkbox'>All</span></div>",
        dataBound: function(e) {
            checkboxEventBinding();
        }
    });
}); 
```

1.  在 kendo-list 模板之前插入一个复选框（用于全选）
2.  当用户点击 Check-all Input 时，其他输入也将被检查。
3.  在 kendo-list 重新绑定数据之后重新绑定您的事件。

**//更新**

**要获取复选框值：**

确保您的列表被`"form"`标签包裹

```
<form id="frmChk">
    <div id="listView" class="k-listview" >
    </div>
</form> 
```

所有`input`标签都具有*相同的名称*：

```
<script type="text/x-kendo-tmpl" id="myTemplate">
    <div class="item click"  data="${ProductID}">
        <input type="checkbox" name="chkValue" value="${ProductID}"  class="click" />
        <span class="checkbox">#:ProductName#</span>
    </div>
</script> 
```

去取值。您可以使用 jQuery 的序列化方法：

```
<script>
    function getCheckedBoxValue()
    {
        $("#frmChk").serialize();
    }
</script> 
```

如果您的输入是

```
<input type="checkbox" name="chkValue" value="Ikura1" class="click" />
<input type="checkbox" name="chkValue" value="Ikura2" class="click" />
<input type="checkbox" name="chkValue" value="Ikura3" class="click" /> 
```

当您调用 时`getCheckedBoxValue`，结果将如下所示：

```
chkValue=Ikura1,Ikura2,Ikura3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T06:31:44.720

我认为您正在寻找树视图。查看 Kendo 的演示：

*[复选框](http://demos.kendoui.com/web/treeview/checkboxes.html)*

# node.js - 没有名称的节点 JS 对象

> ID：15995883
> 
> 赞同：1
> 
> 时间：2013-04-14T04:43:09.333
> 
> 标签：node.js

有没有办法可以在房间数组中获取数组元素。我猜有一个没有任何名称的对象，我无法解析它。

```
rooms:
 { '':
    [ '1878016601075138296',
      '2087284131903222964',
      '435973380973917405' ] },
roomClients:
 { '1878016601075138296': { '': true },
   '2087284131903222964': { '': true },
   '435973380973917405': { '': true } } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:47:22.137

您可以使用访问对象属性的替代方法，例如`rooms['']`，这将返回您要查找的数组。

# java - 我应该在哪个类中放置一个比较方法？

> ID：15995887
> 
> 赞同：0
> 
> 时间：2013-04-14T04:43:25.120
> 
> 标签：java, class, methods, comparison

假设我有一个名为 myClass 的类。我想要一个方法来比较 myClass 的实例，以查看 myCLass 的一个对象是否“大于”myClass 的另一个对象。 **这个方法应该放在 myClass 类中吗？** 直观地说，这似乎是错误的，因为“比较”方法实际上并不是任何一个对象都应该执行的操作。（例如，当比较两个数字时，数字不比较自己。我们人类，比较数字并确定比较的结果..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T04:53:39.223

你可以通过两种方式做到这一点：

1.  有一个`compareTo()`将对象的当前实例与另一个实例进行比较的普通方法，例如

    `obj1.compareTo(obj2)`

2.  有一个属于`myClass`比较 2 个对象实例的类的静态方法，例如

    `myClass.compareObjects(obj1, obj2)`

# clojure - Clojure：为什么 Ref 在 Assoc 上丢失

> ID：15995888
> 
> 赞同：1
> 
> 时间：2013-04-14T04:43:45.940
> 
> 标签：clojure, ref, stm

我正在更新 Clojure 中地图参考中的计数器。

```
(defn increment-key [this key]
    (dosync
        (let [value (get @this key)]
            (if (= value nil)
                (alter this assoc key (ref 1))
                (alter this assoc key (alter value inc)))))) 
```

但是，看起来 alter value inc 语句正在丢失引用：

```
(defn -main [& args]
    (def my-map (ref {}))
    (increment-key my-map "yellow")
    (println my-map)
    (increment-key my-map "yellow")
    (println my-map)) 
```

哪个打印：

```
$ lein run
#<Ref@65dcc2a3: {yellow #<Ref@3e0d1329: 1>}>  
#<Ref@65dcc2a3: {yellow 2}> 
```

在这种情况下，如何在更新参考时保持相同的参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T09:19:55.583

你快到了。下面是解决方案，检查最后一行`increment-key`，您只需要更改值（不要像您所做的那样更改地图中的键，因为这导致键被更新为您的示例中的更改返回值2，记住alter返回ref的新值，而不是ref本身）。也不要在 def 中使用 def，你应该使用 let（在你的 -main 函数中）

```
(defn increment-key [this key]
    (dosync
        (let [value (get @this key)]
            (if (= value nil)
                (alter this assoc key (ref 1))
                (alter value inc)))))

(defn -main [& args]
  (let [my-map (ref {})]
       (increment-key my-map "yellow")
       (println my-map)
       (increment-key my-map "yellow")
       (println my-map))) 
```

# java - 仅打印最后添加的项目

> ID：15995896
> 
> 赞同：0
> 
> 时间：2013-04-14T04:45:02.667
> 
> 标签：java

```
List < Response > Data = new ArrayList < Response > ();
Response object = null;

JSONObject documentRoot = new JSONObject(result);
JSONArray documentChild = documentRoot.getJSONArray("Main");
JSONArray allergyArray = null;
JSONArray vitalsArray = null;

for (int i = 0; i < documentChild.length(); i++) {
    child = documentChild.getJSONObject(i);
    if (Condition1) {
        allergyArray = child.getJSONArray("Allergy");
    } else if {
        vitalsArray = child.getJSONArray("Vitals");
    }
}

object = new Response(); // POJO class

if (null != allergyArray) {
    for (int i = 0; i < allergyArray.length(); i++) {
        object.setCap(allergyArray.getJSONObject(i).getString("Cap"));
        object.setRea(allergyArray.getJSONObject(i).getString("Rea"));
    }
}

if (null != vitalsArray) {
    for (int i = 0; i < vitalsArray.length(); i++) {
        object.setName(vitalsArray.getJSONObject(i).getString("Name"));
        object.setMedic(vitalsArray.getJSONObject(i).getString("Medic"));
    }
}

Data.add(object); 
```

当我尝试迭代并打印结果时，只打印最后添加的项目。

```
public void onLoadComplete(List < Response > item) {    
    for (int i = 0; i < item.size(); i++) {
        Log.d("Get", item.get(i).getCap()); // I get only the last item which is added.
    }      
} 
```

为什么我的 List Object 传递给 onLoadComplete 函数只包含添加到 POJO 类的最后一项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:51:27.387

在您的循环中，您在每次迭代中为同一对象设置值（cap、rea、name 和 medic），这意味着在迭代完成后只会设置最后一个值。

对于每个值，您需要创建一个新对象。这是一个基本示例，需要添加一些检查以确保安全：

```
if (null != allergyArray && null != vitalsArray)
{
    for (int i = 0; i < allergyArray.length() && i < vitalsArray.length(); ++i)
    {
        object = new Response(); // POJO class
        object.setCap(allergyArray.getJSONObject(i).getString("Cap"));
        object.setRea(allergyArray.getJSONObject(i).getString("Rea"));
        object.setName(vitalsArray.getJSONObject(i).getString("Name"));
        object.setMedic(vitalsArray.getJSONObject(i).getString("Medic"));

        Data.add(object);
    }
} 
```

# python - 奇怪的python嵌套for循环行为

> ID：15995898
> 
> 赞同：-1
> 
> 时间：2013-04-14T04:45:07.183
> 
> 标签：python, loops

任何人都可以解释当我运行下面的 python 片段时发生了什么？

```
import itertools

def prob():
    testlists = itertools.combinations([1,2,3,4,5,6,7,8,9,0],4)
    for itervalue in range(5,50):
        for tlist in testlists:
            print itervalue 
```

我的预期行为是将 itervalue 从 5 到 50 的每个值多次打印到屏幕上（测试列表中的每个列表一次）。例如，如果我将测试列表定义为，就会发生这种情况。

```
testlists = [[1,2,3],[5,2,1],[3,2,9]] 
```

实际发生的是只有第一个迭代值被打印到输出（5 被打印了数百次）。前任：

```
5
5
5
#and so on 
```

这里到底发生了什么？一般来说，我是 python 和动态语言的新手。谢谢你的帮助。

我在运行 python 2.6.6 和 2.7.3 的计算机上对此进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:53:00.650

好吧，问题是您的*测试列表*只能循环一次，因为它不是列表/元组而是生成器。因此，您的内部循环只运行一次。

更改您的代码：

```
import itertools

def prob():
    testlists = list(itertools.combinations([1,2,3,4,5,6,7,8,9,0],4))
    for itervalue in range(5,50):
        for tlist in testlists:
            print itervalue 
```

# c++ - 尝试访问结构中的地图时程序冻结

> ID：15995899
> 
> 赞同：1
> 
> 时间：2013-04-14T04:45:12.247
> 
> 标签：c++, pointers, map, structure

在我的代码中，我有多个结构，包括一些具有第二个是指向结构的指针的映射，如下所示：

```
struct course
{
    college * coll;
    int number;
    int numprereqs;
    map<int, course*> prereqs;
    int numcoreqs;
    map<int, course*> coreqs;
}; 
```

它编译得很好，但是当它到达以下代码或访问地图中特定实体的类似代码时，程序会崩溃。

```
(*currentCol).courses[newC.number] = &newC; 
```

这是我的整个代码

标题：

```
#ifndef courseSchedulerH
#define courseSchedulerH

#include <iostream>
#include <sstream>
#include <fstream>
#include <map>
using namespace std;

char* inputFileName = "minimalInput.txt";
char* storageFileName = "data";
bool blahPrint = true;//if true will print out all the blahs to the terminal
bool debugnumerals = true;//Prints out line locations in the numeral area

struct college;

struct course
{
    college * coll;
    int number;
    int numprereqs;
    map<int, course*> prereqs;
    int numcoreqs;
    map<int, course*> coreqs;
};

struct section
{
    int number;
    map<int, course*> courses;
    int coursesNeeded;
};

struct degree
{
    college * col;
    int number;
    string name;
    map<int, section*> sections;
};

struct college
{
    int highestCourse;
    string name;
    map<int, course*> courses;
    int degNumber;
    stringstream degreesList;
    map<string, degree*> degrees;
};

struct university
{
    string name;//Will be needed later
    int number;
    stringstream collegesList;
    map<string, college*> colleges;
};

struct user
{
    string name;
    int number;
    map<int, course*> coursesTaken;
};

void baseFormat();

ifstream input;
string blah;//used for clearing fluff
bool error = false;

#endif 
```

程序：

```
#include "courseScheduler.h"    

int main()
{
    cout << "Running!" << endl;
    input.open(inputFileName);

    int version;
    input >> blah >> version;
    input.get();
    if(blah[0] != 'I')
    {
        cout << "No input number, stopping" << endl;
        cin.get();
    }
    else
    {
        switch(version)
        {
            case 0:
                cout << "Processing as base degree input" << endl;
                baseFormat();
                break;
            default:
                cout << "Unrecognized input number, stopping" << endl;
                break;

        }
        cout << "Done" << endl;
        cin.get();
    }
}

void baseFormat()
{
    bool deg = false;
    bool sec = false;
    bool col = false;
    int sectionCount = 0;
    int sectionNeed = 0;
    university NMSU;
    NMSU.number = 0;
    degree* currentDeg;
    college* currentCol;
    section* currentSec;
    university* currentUniv = &NMSU;
    bool end = false;
    while(!input.eof() && !error)
    {
        char c = input.peek();
        cout << "Made it through, enter to continue" << endl;
        cin.get();
        switch(c)
        {
            case 'D'://Degree
                {
                    if(end)
                    {
                        if(deg)
                        {
                            deg = false;
                            col = false;
                            end = false;
                            input >> blah;
                            if(blahPrint)cout << "blah is: " << blah << endl;
                            cout << "Ending degree: " << (*currentDeg).name << endl;
                        }
                        else
                        {
                            cout << "Ending a degree before initializing, stopping" << endl;
                            error = true;
                        }
                    }
                    else
                    {
                        if(col)
                        {
                            degree newDeg;
                            deg = true;
                            input >> blah >> newDeg.name;
                            if(blahPrint)cout << "blah is: " << blah << endl;
                            cout << "Starting degree: " << newDeg.name << endl;
                            (*currentCol).degreesList << newDeg.name << endl;
                            (*currentCol).degNumber++;
                            (*currentCol).degrees[newDeg.name] = &newDeg;
                            newDeg.col = currentCol;
                            newDeg.number = 0;
                            currentDeg = &newDeg;
                            input.get();
                        }
                        else
                        {
                            cout << "Degree with no college, stopping" << endl;
                            error = true;
                        }
                    }
                }
                break;
            case 'C'://College
                {
                    col = true;
                    college newCol;
                    input >> blah >> newCol.name;
                    if(blahPrint)cout << "blah is: " << blah << endl;
                    if(!(*currentUniv).colleges[newCol.name])
                    {
                        cout << "Starting college " << newCol.name << endl;
                        newCol.highestCourse = 0;
                        newCol.degNumber = 0;
                        (*currentUniv).collegesList << newCol.name << endl;
                        (*currentUniv).number++;
                        (*currentUniv).colleges[newCol.name] = &newCol;
                        currentCol = &newCol;

                    }
                    else
                    {
                        cout << "College of " << newCol.name << " already defined" << endl;
                        currentCol = (*currentUniv).colleges[newCol.name];
                    }
                    input.get();
                }
                break;
            case 'S'://Section
                {
                    if(end)
                    {
                        if(sec)
                        {
                            sec = false;
                            end = false;
                            input >> blah;
                            if(blahPrint)cout << "blah is: " << blah << endl;
                            cout << "ending section" << endl;    
                            input.get();      
                        }
                        else
                        {
                            cout << "Ending section before initializing, stopping" << endl;
                            error = true;
                        }
                    }
                    else
                    {
                        if(sec)
                        {
                            cout << "Section already specified, stopping" << endl;
                            error = true;
                        }
                        else
                        {
                            section newSec;
                            sec = true;
                            input >> blah;
                                if(blahPrint)cout << "blah is: " << blah << endl;
                            input >> newSec.coursesNeeded;
                            newSec.number = 0;
                            cout << "section with " << newSec.coursesNeeded << " needed courses" << endl;  
                            (*currentDeg).sections[(*currentDeg).number++] = &newSec;
                            input.get();
                        }
                    }
                }
                break;
            case 'E'://End
                end = true;
                input >> blah;
                    if(blahPrint)cout << "blah is: " << blah << endl;
                cout << "end" << endl;
                input.get();
                break;
            case 'O'://Other
                input >> blah;
                    if(blahPrint)cout << "blah is: " << blah << endl;
                cout << "other" << endl;
                input.get();
                break;
            case '0'://Course Number
            case '1'://Course Number
            case '2'://Course Number
            case '3'://Course Number
            case '4'://Course Number
            case '5'://Course Number
            case '6'://Course Number
            case '7'://Course Number
            case '8'://Course Number
            case '9'://Course Number
                {
                    course newC;
                    input >> newC.number;
                        if(blahPrint)cout << "number is: " << newC.number << endl;
                    cout << "Numeral" << endl;
                    if((*currentCol).highestCourse < newC.number || !(*currentCol).courses[newC.number])
                    {
                        cout << "In that if.... should see this a lot..." << endl;
                        if(debugnumerals)cout << "0" << endl;
                        (*currentCol).courses[newC.number] = &newC;
                        if(debugnumerals)cout << "A" << endl;
                        newC.coll = &*currentCol;
                        if(debugnumerals)cout << "B" << endl;
                        if(newC.number>(*currentCol).highestCourse)
                        {
                            if(debugnumerals)cout << "C" << endl;
                            (*currentCol).highestCourse = newC.number;
                        }
                    }
                    else
                    {
                        cout << "Overlapping course of " << (*currentCol).name << " " << newC.number << endl;
                        cin.get();
                        newC = *((*currentCol).courses[newC.number]);
                    }
                    if(debugnumerals)cout << "D" << endl;
                    input.get();
                    if(debugnumerals)cout << "E" << endl;

                    if(sec)
                    {
                    if(debugnumerals)cout << "F" << endl;
                        (*currentSec).courses[(*currentSec).number++] = &newC;
                    }
                    else
                    {
                    if(debugnumerals)cout << "G" << endl;
                        section newS;
                    if(debugnumerals)cout << "H" << endl;
                        newS.number = 1;
                    if(debugnumerals)cout << "I" << endl;
                        newS.coursesNeeded = 1;
                    if(debugnumerals)cout << "J" << endl;
                        newS.courses[0] = &newC;
                    if(debugnumerals)cout << "K" << endl;
                        (*currentDeg).sections[(*currentDeg).number++] = &newS;
                    }
                    if(debugnumerals)cout << "L" << endl;
                }
                break;
            default:
                {
                    cout << "default" << endl;
                    input >> blah;
                    cout << "Unrecognized line start of " << blah << ", stopping" << endl;
                }
                break;
        }

    }
} 
```

输入文件：

```
INPUT: 0
COL: C_S
DEG: COMPUTER_SCIENCE
172
271
272
273
278
370
371
372
448
471
473
474
SEC: 2
COL: C_S
470
472
475
476
478
480
481
482
483
484
485
486
491
492
END SEC
SEC: 1
COL: C_S
470
472
475
476
478
480
482
483
484
485
486
491
492
COL: MATH
291
377
430
454
480
COL: E_E
469
COL: BIOL
111
111L
211
211L
COL: CHEM
111
112
114
COL: GEOG
111
COL: GEOL
111
COL: HON
205
219
PHYS
211
211L
212
212L
215
215L
216
216L
END SEC
COL: HON 
265
COL: ENGL
218
COL: MATH
280
191
192
SEC: 1
COL: MATH
331
332
377
392
430
431
454
455
END SEC
SEC: 1
COL: A_ST
311
COL: STAT
371
470
END SEC
SEC: 2
COL: ASTR
110
COL: BIOL
111
111L
211
211L
COL: CHEM
111
112
114
COL: GEOG
111
COL: GEOL
111
COL: HON
205
219
COL: PHYS
211
211L
212
212L
215
215L
216
216L
END SEC
END DEG

COL: ENGL
DEG: ENGINEERINGc_PHYSICS
111
OTHER: WRITTENCOMM
OTHER: ORALCOMM
COL: MATH
191
SEC: 1
COL: PHYS
213
213L
215
215L
END SEC
SEC: 1
COL: PHYS
214
214L
216
216L
END SEC
OTHER: AREAIV2-3
OTHER: AREAV2-3
OTHER: VWW1-2
COL: MATH
192
291
392
COL: CHEM
111
SEC: 1
COL: PHYS
451
COL: M_E
333
END SEC
OTHER: PHYS-ME2
COL: PHYS
217
217L
315
315L
395
454
455
461
462
475
COL: C_E
301
COL: M_E
102
159
236
237
240
261
326
328
338
341
426
427
449
END DEG 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:36:14.220

在这种“C”情况下，您`newCol`在花括号内定义。该变量是在堆栈内存中创建的。一旦您通过右大括号，保存`newCol`值的堆栈内存就会变得无效。

```
 case 'C'://College
            {
                col = true;
                college newCol;
                input >> blah >> newCol.name;
                if(blahPrint)cout << "blah is: " << blah << endl;
                if(!(*currentUniv).colleges[newCol.name])
                {
                    cout << "Starting college " << newCol.name << endl;
                    newCol.highestCourse = 0;
                    newCol.degNumber = 0;
                    (*currentUniv).collegesList << newCol.name << endl;
                    (*currentUniv).number++;
                    (*currentUniv).colleges[newCol.name] = &newCol;
                    currentCol = &newCol;

                }
                else
                {
                    cout << "College of " << newCol.name << " already defined" << endl;
                    currentCol = (*currentUniv).colleges[newCol.name];
                }
                input.get();
            } 
```

`currentCol = &newCol`您在关闭大括号之前分配。大括号后表示内存无效，可能被覆盖。简而言之，就是垃圾。稍后您尝试使用访问此垃圾值`(*currentCol).courses[...]`，这是错误的。

您需要从堆中分配，例如：

```
college *newCol = new college();
currentCol = newCol; 
```

那么保存数据的内存在右括号之后不会变成垃圾。稍后，当您尝试访问它时，它仍然存在。

# python - 从 If 语句的结果创建新列表

> ID：15995907
> 
> 赞同：0
> 
> 时间：2013-04-14T04:47:21.470
> 
> 标签：python, list, if-statement

例如，如果我在这里有一个列表：

```
my_list=[abc.txt, def.txt, ghi.jpg] 
```

我将如何创建一个仅包含 .txt 元素的新列表（这是运行 if 语句的结果，例如 if type==.txt）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:48:46.883

您可以使用列表推导：

```
new_list = [elem for elem in your_list if elem.endswith('.txt')] 
```

另外，不要`list`用作变量名。您使内置`list`功能无法访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T04:48:40.750

```
>>> files = ['abc.txt', 'def.txt', 'ghi.jpg']
>>> [x for x in files if x.endswith('.txt')]
['abc.txt', 'def.txt'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T04:51:21.640

`list(filter(lambda string: string.endswith(".txt"), elements_list))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T04:51:32.717

只是添加另一种方法：

```
>>> files = ['abc.txt', 'def.txt', 'ghi.jpg']
>>> result = filter(lambda x: x.endswith('.txt'), files)
>>> result
['abc.txt', 'def.txt'] 
```

# javascript - 它会在这种情况下生成 100 个不同的实例变量（JS 与 C++）吗？

> ID：15995910
> 
> 赞同：2
> 
> 时间：2013-04-14T04:47:47.903
> 
> 标签：javascript, c++, scope

我记得：
`C++:`

```
for(int i= 0; i< 100;i++)
{
   int number= 3; 
} 
```

我们将有 100 个不同的同名实例变量（但仅作为一个变量占用 100 倍内存。），但 C++ 中的变量是块作用域，因此这 100 个变量将在循环结束时被回收。
与 Javascript 相比：
`JS:`

```
for(var i=0; i < 100 ;i++)
{
    var number= 3;
} 
```

1.  它会产生 100 个不同的变量吗？或者我们只有一个名为 number 的变量，其值为`3`。
    我的意思是这些变量实际花费了多少内存？

2.  如果 for 循环没有被 a 包裹`function(){}`，那么回收提供变量的内存的机制是什么？

3.  好的，这是针对原始类型变量的。如果变量是对象，会有所不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T04:48:47.083

JavaScript 中的变量 - 与 C 不同 - 是函数范围的，因此您正在重用相同的变量：

1.  仅创建一个变量。
2.  如果它没有被包装在一个函数中，`number`它将是全局的，但仍然只会被创建一次。
3.  价值观无关紧要。变量始终是函数范围的。

# arrays - 将数据文件转换为字符数组

> ID：15995911
> 
> 赞同：0
> 
> 时间：2013-04-14T04:48:00.630
> 
> 标签：arrays, matlab, file-io, matrix

我有一个看起来像这样的文件（res.txt）：

```
a
na
na
a
a
a
na 
```

我需要将其读入矩阵并导入工作区。using`textscan`使它成为一个元胞数组。因此，`a(2)=n`不是`na`。如何将此文件导入一维矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T04:54:54.820

尝试：

```
fid = fopen('file.txt','rt')
C = textscan(fid, '%s', 'Delimiter',''); C = C{1};
fclose(fid); 
```

现在元胞数组的每个元素都`C{i}`包含一行。

如果您想要一个实际的字符矩阵（当然用空格填充），请使用以下方法转换元胞数组：

```
arr = char(C); 
```

现在每一行都是：（`arr(i,:)`可能想要使用`deblank`）

# python - 使用 fsolve 找到解决方案

> ID：15995913
> 
> 赞同：6
> 
> 时间：2013-04-14T04:48:24.373
> 
> 标签：python, numpy, scipy

```
import numpy as np
from scipy.optimize import fsolve

musun = 132712000000
T = 365.25 * 86400 * 2 / 3
e = 581.2392124070273

def f(x):
    return ((T * musun ** 2 / (2 * np.pi)) ** (1 / 3) * np.sqrt(1 - x ** 2)
        - np.sqrt(.5 * musun ** 2 / e * (1 - x ** 2)))

x = fsolve(f, 0.01)
f(x)

print x 
```

这段代码有什么问题？它似乎不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-14T12:24:48.867

因为`sqrt`为负参数返回 NaN，所以函数 f(x) 不能对所有实数 x 进行计算。我将您的函数更改为使用`numpy.emath.sqrt()`它可以在参数 < 0 时输出复数，并返回表达式的绝对值。

```
import numpy as np
from scipy.optimize import fsolve
sqrt = np.emath.sqrt

musun = 132712000000
T = 365.25 * 86400 * 2 / 3
e = 581.2392124070273

def f(x):
    return np.abs((T * musun ** 2 / (2 * np.pi)) ** (1 / 3) * sqrt(1 - x ** 2)
        - sqrt(.5 * musun ** 2 / e * (1 - x ** 2)))

x = fsolve(f, 0.01)
x, f(x) 
```

然后你可以得到正确的结果：

```
(array([ 1.]), array([ 121341.22302275])) 
```

解非常接近真根，但 f(x) 仍然很大，因为 f(x) 有一个很大的因数：musun。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-14T06:06:49.190

`fsolve()`返回`f(x) = 0`（见[这里](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fsolve.html)）的根。

当我在 -1 到 1 的范围内绘制`f(x)`for的值时`x`，我发现 和 有`x = -1`根`x = 1`。但是，如果`x > 1`或`x < -1`，这两个`sqrt()`函数都将传递一个负参数，这会导致错误`invalid value encountered in sqrt`。

`fsolve()`未能找到位于函数有效范围末端的根并不令我感到惊讶。

我发现在试图找到它的根之前绘制一个函数的图形总是一个好主意，因为这可以表明任何根查找找到根的可能性有多大（或者在这种情况下，不太可能）算法。

# rest - 如何使用 cURL 发送 Cookie？

> ID：15995919
> 
> 赞同：371
> 
> 时间：2013-04-14T04:48:57.067
> 
> 标签：rest, session, curl, flask, session-cookies

我读到[使用 curl 发送 cookie](https://stackoverflow.com/questions/7181785/send-cookies-with-curl)有效，但不适合我。

我有一个`REST`端点：

```
class LoginResource(restful.Resource):
    def get(self):
        print(session)
        if 'USER_TOKEN' in session:
            return 'OK'
        return 'not authorized', 401 
```

当我尝试访问时：

```
curl -v -b ~/Downloads/cookies.txt -c ~/Downloads/cookies.txt http://127.0.0.1:5000/
* About to connect() to 127.0.0.1 port 5000 (#0)
*   Trying 127.0.0.1...
* connected
* Connected to 127.0.0.1 (127.0.0.1) port 5000 (#0)
> GET / HTTP/1.1
> User-Agent: curl/7.27.0
> Host: 127.0.0.1:5000
> Accept: */*
>
* HTTP 1.0, assume close after body
< HTTP/1.0 401 UNAUTHORIZED
< Content-Type: application/json
< Content-Length: 16
< Server: Werkzeug/0.8.3 Python/2.7.2
< Date: Sun, 14 Apr 2013 04:45:45 GMT
<
* Closing connection #0
"not authorized"% 
```

我在哪里`~/Downloads/cookies.txt`：

```
cat ~/Downloads/cookies.txt
USER_TOKEN=in 
```

并且服务器什么也没有收到：

```
127.0.0.1 - - [13/Apr/2013 21:43:52] "GET / HTTP/1.1" 401 -
127.0.0.1 - - [13/Apr/2013 21:45:30] "GET / HTTP/1.1" 401 -
<SecureCookieSession {}>
<SecureCookieSession {}>
127.0.0.1 - - [13/Apr/2013 21:45:45] "GET / HTTP/1.1" 401 - 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：643
> 
> 时间：2013-04-14T05:32:08.610

这对我有用：

```
curl -v --cookie "USER_TOKEN=Yes" http://127.0.0.1:5000/ 
```

我可以看到后端使用的值

```
print(request.cookies) 
```

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2014-04-13T04:15:00.007

您可以参考[https://curl.haxx.se/docs/http-cookies.html](https://curl.haxx.se/docs/http-cookies.html)以获取有关如何使用 cookie 的完整教程。您可以使用

```
curl -c /path/to/cookiefile http://yourhost/ 
```

写入 cookie 文件并启动引擎并使用 cookie，您可以使用

```
curl -b /path/to/cookiefile  http://yourhost/ 
```

从中读取 cookie 并启动 cookie 引擎，或者如果它不是文件，它将传递给定的字符串。

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2014-12-16T16:25:10.680

您在 cookie 文件中使用了错误的格式。正如[curl 文档](http://curl.haxx.se/docs/http-cookies.html)所述，它使用旧的 Netscape cookie 文件格式，这与 Web 浏览器使用的格式不同。如果您需要手动创建 curl cookie 文件，[这篇文章](http://curl.haxx.se/mail/archive-2005-03/0099.html)应该对您有所帮助。在您的示例中，该文件应包含以下行

```
127.0.0.1   FALSE   /   FALSE   0   USER_TOKEN  in 
```

有 7 个制表符分隔的字段，表示*domain*、*tailmatch*、*path*、*secure*、*expires*、*name*、*value*。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-06-10T15:56:10.767

如果您已经在应用程序中发出了该请求，并且在 Google 开发工具中看到它已记录，您可以在网络选项卡中右键单击请求时使用上下文菜单中的复制 cURL 命令。复制 -> 复制为 cURL。它将包含所有标题、cookie 等。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-02-13T22:33:39.817

`curl -H @<header_file> <host>`

由于文件中的 curl 7.55 标头支持`@<file>`

`echo 'Cookie: USER_TOKEN=Yes' > /tmp/cookie`

`curl -H @/tmp/cookie <host>`

[文档和提交](https://github.com/curl/curl/commit/84b9458837551a2749b45d924089f2015415a324#diff-1b753ed826c4bd5e71a106a38205440a0d1f0b4029afc8f4695a9ecd2d98e559L3)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-11-18T16:06:45.717

我正在使用 Debian，但无法使用波浪号作为路径。最初我正在使用

```
curl -c "~/cookie" http://localhost:5000/login -d username=myname password=mypassword 
```

我不得不将其更改为：

```
curl -c "/tmp/cookie" http://localhost:5000/login -d username=myname password=mypassword 
```

`-c`创建 cookie，`-b`使用 cookie

那么我会使用例如：

```
curl -b "/tmp/cookie" http://localhost:5000/getData 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-02T21:11:59.723

我在 Windows 上使用 GitBash，但没有发现对我有用。

所以我决定将我的 cookie 保存到一个名为`.session`并使用 cat 读取它的文件，如下所示：

```
curl -b $(cat .session) http://httpbin.org/cookies 
```

如果你很好奇，我的 cookie 看起来像这样：

```
session=abc123 
```

# java - AlertDialog SingleChoiceItems 不工作

> ID：15995927
> 
> 赞同：0
> 
> 时间：2013-04-14T04:49:55.617
> 
> 标签：java, android, eclipse, android-alertdialog

我正在尝试制作一个带有确定和取消按钮的 SingleChoiceItems AlertDialog，它为用户提供从 ListView 的 onItemLongClick 选项到 1.查看用户的个人资料 2.向用户发送消息并 3.从朋友中删除用户列表。

我还没有完成选项 1 和 2，但我现在正在尝试制作选项 3，其中包含了数据库删除方法和一个显示“已删除朋友”的祝酒词，但是当我选择选项 3 并点击确定时，该行确实没有被删除，或者我看到 Toast 说用户已被删除。这是我正在使用对话框的活动的代码。

```
public class PlayAFriend extends ListActivity {
    DBAdapter DBAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_items);
        final DBAdapter db = new DBAdapter(this);
        DBAdapter = db.open();
        ListView FriendLV = (ListView) findViewById(android.R.id.list);
        final Cursor friendslist = db.GetAllFriends();
        String[] from = new String[] { "FRIENDS" }; // your column/columns here
        int[] to = new int[] { R.id.textview_friends };

        @SuppressWarnings("deprecation")
        ListAdapter cursorAdapter = new SimpleCursorAdapter(this,
                R.layout.list_items, friendslist, from, to, 0);
        FriendLV.setAdapter(cursorAdapter);
        FriendLV.setLongClickable(true);

        FriendLV.setOnItemLongClickListener(new OnItemLongClickListener() {

            class CustomCursorAdapter extends CursorAdapter {
                public CustomCursorAdapter(Context context, Cursor c, int flags) {
                    super(context, friendslist, flags);
                    // TODO Auto-generated constructor stub
                    inflater = LayoutInflater.from(context);
                }

                LayoutInflater inflater;

                @Override
                public void bindView(View view, Context context,
                        Cursor friendslist) {
                    // TODO Auto-generated method stub
                    int row_id = ((com.fullfrontalgames.numberfighter.DBAdapter) friendslist)
                            .get("_id");

                }

                @Override
                public View newView(Context context, Cursor friendslist,
                        ViewGroup parent) {
                    // TODO Auto-generated method stub
                    LayoutInflater inflater = LayoutInflater.from(context);
                    View v = inflater.inflate(R.layout.list_items, parent,
                            false);
                    bindView(v, context, friendslist);
                    return v;
                }
            }

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                // TODO Auto-generated method stub
                showDialog(arg2);
                return false;

            }
        });

    }

    public void OnButtonClick(View view) {
        startActivity(new Intent(
                "com.fullfrontalgames.numberfighter.Fightattacker"));
    }

    String[] items = { "View Profile", "Send Message", "Remove Friend" };

    @Override
    public Dialog onCreateDialog(final int id) {
        final DBAdapter db = new DBAdapter(this);
        db.open();
        switch (id) {
        case 0:
            return new AlertDialog.Builder(this)
            .setIcon(R.drawable.icon)
            .setTitle("Select an Option")
            .setSingleChoiceItems(items, id,
                    new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog,
                        int choice) {
                    // TODO Auto-generated method stub

                }
            }

                    )
                    .setPositiveButton("Ok",
                            new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog,
                                int choice) {

                            // TODO Auto-generated method stub

                            if (choice == 0) {
                                Toast.makeText(getBaseContext(),
                                        "Test", Toast.LENGTH_SHORT)
                                        .show();
                            } else if (choice == 1) {
                                Toast.makeText(getBaseContext(),
                                        "Test2", Toast.LENGTH_SHORT)
                                        .show();

                            } else if (choice == 2) {
                                Toast.makeText(getBaseContext(),
                                        "Friend Removed",
                                        Toast.LENGTH_SHORT).show();
                                final TextView friends = (TextView) findViewById(R.id.textview_friends);
                                String deletedfriend = friends
                                        .getText().toString();

                                db.DeleteFriends(deletedfriend);

                            }

                        }

                    })
                    .setNegativeButton("Cancel",
                            new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int choice) {

                        }
                    })

                    .create();

        }
        return null;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        // Clear the database
        DBAdapter.close();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:26:46.433

选择单选按钮时必须保存选择，按钮中的其他int参数不代表选择。做`int mChoice;`一个班级成员

```
public class PlayAFriend extends ListActivity {
DBAdapter DBAdapter;
int mChoice;
......
......

@Override
public Dialog onCreateDialog(final int id) {

    final DBAdapter db = new DBAdapter(this);
    db.open();
    switch (id) {
    case 0:
        return new AlertDialog.Builder(this)
        .setIcon(R.drawable.icon)
        .setTitle("Select an Option")
        .setSingleChoiceItems(items, id,
                new DialogInterface.OnClickListener() {

            @Override
            public void onClick(DialogInterface dialog,
                    int choice) {
                mChoice = choice; // save the choice

            }
        }

                )
                .setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog,
                            int choice) {

                        // TODO Auto-generated method stub

                        if (mChoice == 0) {
                            Toast.makeText(getBaseContext(),
                                    "Test", Toast.LENGTH_SHORT)
                                    .show();
                        } else if (mChoice == 1) {
                            Toast.makeText(getBaseContext(),
                                    "Test2", Toast.LENGTH_SHORT)
                                    .show();

                        } else if (mChoice == 2) {
                            Toast.makeText(getBaseContext(),
                                    "Friend Removed",
                                    Toast.LENGTH_SHORT).show();
                            final TextView friends = (TextView) findViewById(R.id.textview_friends);
                            String deletedfriend = friends
                                    .getText().toString();

                            db.DeleteFriends(deletedfriend);

                        }

                    }

                })
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog,
                            int choice) {

                    }
                })

                .create();

    }
    return null;
} 
```

# mysql - db2 final table 的 MySQL 备用

> ID：15995928
> 
> 赞同：0
> 
> 时间：2013-04-14T04:50:17.717
> 
> 标签：mysql, db2

在 DB2 中

```
SELECT id FROM FINAL TABLE (
INSERT INTO mytable (x,y,z) VALUES (1,2,3)
) 
```

可以将插入的表/行中的任何数据返回给我。

在 MySQL 中是否有等价物？我想避免一个事务和两个查询来做一些可能的事情。

# windows-xp - WAMP 上的 localhost 给出“无法连接”

> ID：15995937
> 
> 赞同：0
> 
> 时间：2013-04-14T04:52:43.960
> 
> 标签：windows-xp, localhost, wamp, wampserver

我已经安装了`WAMP (Version 2.2 32 bit) on Windows XP SP 3`。安装后，我打开时收到**“无法连接”**`localhost on Firefox`消息。

有人可以指出解决这个问题的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T05:02:27.560

您是否也检查过您的 HOSTS 文件

> C:/windows/systems32/drivers/etc/hosts

它应该有这一行（未评论）

> 127.0.0.1 本地主机

如果你看到这一行，没有评论

> ::1 本地主机

要么将其注释掉（在 col1 中添加 #），要么将其完全删除。

这是 localhost 的**IPV6**版本，目前还不是真正需要的，但 MS 决定为**IPV6**做好准备并将其添加到主机文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:30:17.930

您的 WAMP 服务器可能处于脱机状态。因此，单击系统托盘中的 Wamp 图标，然后选择“上线”。希望能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T03:09:36.930

问题可能过于局部化。由于我在 Windowx XP Service Pack 3 上试用它，并且大多数新应用程序可能正在放弃对 Windows XP 的全面支持，因为它的支持即将被 Microsoft 自己放弃。问题的解决方案可能最终不存在。

我尝试了 XAMPP，这对我有用。

# c++ - 无法从 std::memory 或 std::tr1 找到 make_shared (gcc 4.7)

> ID：15995941
> 
> 赞同：0
> 
> 时间：2013-04-14T04:53:01.350
> 
> 标签：c++, c++11, gcc4.7

我不明白为什么我无法从`std::memory or std::tr1`包含标头中找到 make_shared。

我在我的机器上只看到 1 个版本的 gcc

```
ls -lh /usr/bin/g++
lrwxrwxrwx 1 root root 7 Sep 22  2012 /usr/bin/g++ -> g++-4.7 
```

我`-std=c++11`也在项目构建属性中使用标签

我的环境：ubuntu ecplise juno R2 CDT

```
#include <memory>
#include <tr1/memory>
int main()
{
    std::tr1::shared_ptr<int> t = std::tr1::make_shared<int>(1);

    std::shared_ptr<int> t = std::make_shared<int>(1);

} 
```

更新：

Eclipse 控制台窗口中的构建显示它实际上是成功的，但是代码编辑器保持红色下划线 shared_ptr 和 make_shared。我试图重建索引，清除项目。没有什么可以消除错误。有什么建议么？

```
16:15:09 **** Incremental Build of configuration Debug for project test ****
make all 
Building target: test 
Invoking: GCC C++ Linker
g++  -o "test "  ./main.o   
Finished building target: test 

16:15:09 Build Finished (took 328ms) 
```

更新 2：

下面的链接解决了我的问题 [Enable C++11 in Eclipse CDT (Juno/Kepler/Luna) indexer](https://stackoverflow.com/questions/13635079/enable-c11-in-eclipse-cdt-juno-indexer)

# asp-classic - 在经典 asp 中使用记录集

> ID：15995947
> 
> 赞同：1
> 
> 时间：2013-04-14T04:53:48.847
> 
> 标签：asp-classic, recordset

我正在尝试使用带有经典 ASP 中以下代码的记录集从数据库中获取数据。我使用的是 windows 7 32 位操作系统：

```
<%
dim con,rs
set con=Server.Createobject("ADODB.Connection")
con.Provider="Microsoft.Jet.OLEDB.4.0"
con.Open "c:\inetpub\wwwroot\New folder\123.mdb"
rs.Open "select * from student",con
for each x in rs.fields
response.write(x.name)
response.write("=")
response.write(x.value)
next
rs.Close
con.Close
%> 
```

错误是：

```
Microsoft VBScript runtime error '800a01a8'

Object required: ''

/New folder/recordset.asp, line 7 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T07:40:32.457

VBScript 中没有保留单词“rs”，您必须自己创建记录集。

换行：

```
rs.Open "select * from student",con 
```

为此：

```
Set rs = con.Execute("select * from student") 
```

您还只迭代第一条记录，迭代所有记录将代码更改为：

```
Do Until rs.EOF
    for each x in rs.fields
        response.write(x.name)
        response.write("=")
        response.write(x.value)
        response.write(", ")
    next
    response.write("<br />")
    rs.MoveNext
Loop 
```

# java - 当我调用 Mat 时，Open2.4.5 Android 崩溃

> ID：15995950
> 
> 赞同：1
> 
> 时间：2013-04-14T04:55:22.120
> 
> 标签：java, android, opencv, crash, mat

这个问题让我发疯了好几天。我正在尝试使用 opencv android 最新的软件包。一切都已插入并且我没有任何错误，直到我在 android 上运行该项目并且那是它崩溃的时候。当我调用一个简单的代码时， Mat m = new Mat(); 应用程序崩溃了，我看到其他人也有同样的问题，但他们设法修复了它，这是我的代码，也许这是我看不到的愚蠢的东西！我真正需要的是 Matrix 库，我尝试了 Jama 和 jblas，但它们在某种程度上可以工作，但随后它们也崩溃了，而且它们非常慢。

```
 package com.ece.facerecog;
 import java.io.File;
 import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;'
 import java.util.Arrays;

 import org.opencv.android.BaseLoaderCallback;
 import org.opencv.android.LoaderCallbackInterface;
 import org.opencv.android.OpenCVLoader;
     import org.opencv.core.Mat;

import com.ece.facerecog.utils.UIHelper;

//import org.jblas.DoubleMatrix;

  //import Jama.Matrix;
     import android.app.Activity;
 import android.content.Context;
    import android.graphics.Bitmap;
  import android.graphics.BitmapFactory;
 import android.graphics.Color;
 //import android.graphics.Matrix;

  import android.os.Bundle;
 import android.os.Environment;
 import android.util.Log;
 import android.widget.GridView;
 import android.widget.ImageView;
  import android.widget.TextView;

  public class Face extends Activity {
private Bitmap bitmap;
private int f = Crop.k;
private ImageView tv;

   private static final String    TAG                 = "OCVSample::Activity";

private BaseLoaderCallback mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};
  //    @Override
   //   public void onResume()
    //  {
  //        super.onResume();
  //        OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_5, this,                           k                  mLoaderCallback);
    //    }

private Bitmap ReadImage1(String fBitmap) {
    String root = Environment.getExternalStorageDirectory().toString();
    File myDir = new File(root + "/preprocessed");
    File file = new File(myDir , fBitmap); //or any other format supported
    UIHelper.displayText(this, R.id.textView1, file.toString());

    try {
        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inPreferredConfig = Bitmap.Config.ARGB_8888;        
        Bitmap bitmap =            `BitmapFactory.decodeFile(file.getAbsolutePath(),options); //This gets the image `       
        return bitmap;

        } catch (Exception e) {
               e.printStackTrace();
               UIHelper.displayText(this, R.id.textView1, "Doesn't exist");
        }

        return bitmap;
    }

   @Override
   public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.face);

Log.i(TAG, "Trying to load OpenCV library");
if (!OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_5, this, mLoaderCallback))
{
  Log.e(TAG, "Cannot connect to OpenCV Manager");
}

ImageView tv = (ImageView) findViewById(R.id.imageView1);
Bitmap bmp = ReadImage1("/Image-" + f+ ".jpg");
tv.setImageBitmap(bmp);
Mat m = new Mat(); 
```

} }

`

这是日志错误，

```
04-13 23:14:17.412: E/AndroidRuntime(12111): FATAL EXCEPTION: main
04-13 23:14:17.412: E/AndroidRuntime(12111): java.lang.UnsatisfiedLinkError: Native method not found: org.opencv.core.Mat.n_Mat:()J
04-13 23:14:17.412: E/AndroidRuntime(12111):    at org.opencv.core.Mat.n_Mat(Native Method)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at org.opencv.core.Mat.<init>(Mat.java:441)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at com.ece.facerecog.Face.onCreate(Face.java:147)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.Activity.performCreate(Activity.java:5104)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.os.Looper.loop(Looper.java:137)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at android.app.ActivityThread.main(ActivityThread.java:5039)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at java.lang.reflect.Method.invokeNative(Native Method)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at java.lang.reflect.Method.invoke(Method.java:511)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-13 23:14:17.412: E/AndroidRuntime(12111):    at dalvik.system.NativeStart.main(Native Method) 
```

谢谢你的协助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T07:07:13.850

我认为必须在 a或`Mat`中调用OpenCV 函数。在没有帮助的情况下，我遇到了 AGES 的相同问题。`thread``AsyncTask`

为了避免崩溃，您可以声明`Mat m`为全局变量并在`AsyncInitialization`OpenCV 块中对其进行初始化。

像这样的东西：

```
 public class Face extends Activity {
 private Bitmap bitmap;
 private int f = Crop.k;
 private ImageView tv;
 Mat m;
 private static final String    TAG                 = "OCVSample::Activity";

  private BaseLoaderCallback mLoaderCallback = new BaseLoaderCallback(this) {
@Override
public void onManagerConnected(int status) {
    switch (status) {
        case LoaderCallbackInterface.SUCCESS:
        {
            Log.i(TAG, "OpenCV loaded successfully");
            m=new Mat();
        } break;
        default:
        {
            super.onManagerConnected(status);
        } break;
    }
}
}; 
```

如果它仍然崩溃，我建议您执行您`AsyncTask`在我的[项目](https://github.com/torcellite/imageComparator)中尝试的任何功能。`Mat`然而，函数可以在没有`UnsatisfiedLinkError`OpenCV 函数异常的风险的情况下声明。然而，在 UI 中调用的函数会遇到这种情况。至少这是我所看到的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-16T19:34:02.050

我刚刚遇到同样的问题并找到了另一个解决方案：
您可以使用另一个活动来调用您的活动（“Face”），例如一些带有启动活动的按钮的介绍屏幕。如果您在此介绍活动中初始化 OpenCV（与您在活动中所做的相同），您可以在下一个活动中使用 OpenCV 函数而不会出现任何问题...

这样您就不必将 OpenCV 变量声明为全局变量并在 OpenCV 的 AsyncInitialization 块中对其进行初始化。

# asp.net-mvc-4 - 如何通过 Elastic Beanstalk 手动将 .NET MVC 应用程序部署到 AWS

> ID：15995953
> 
> 赞同：6
> 
> 时间：2013-04-14T04:56:29.850
> 
> 标签：asp.net-mvc-4, amazon-web-services, web-deployment, amazon-elastic-beanstalk

我正在尝试使用弹性 beanstalk 将简单的 Hello World ASP.NET MVC 4 应用程序部署到免费层 EC2 实例。我正在使用不支持 AWS Toolkit 扩展的 Visual Web Developer Express (2010)，那么如何在没有扩展的情况下部署站点？

似乎使用 Elastic Beanstalk Web 控制台，您可以将文件作为新应用程序上传。但我无法弄清楚文件中应该包含什么。它是包含已发布 mvc 应用程序的 zip 吗？我试过了，当它加载后导航到实例时，它只显示了 IIS 8 徽标。演练页面上有一个示例 zip，但它是一个旧的 ASP.NET 页面，根目录中有 3 个 xml 文件。我不知道要在 MVC、.NET 4、Server 2012 或 IIS 8 的这些文件中进行哪些更改。我在任何地方都找不到此信息。

我尝试手动创建一些 EC2 实例，自己远程处理和部署站点。但是，免费的 Windows Server 2008 映像没有 .NET 4。免费的 Windows Server 2012 映像没有 IIS……我不知道如何实际部署我的站点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T06:34:57.503

可以手动使用 AWS Toolkit 扩展调用的命令行工具。[这](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/deploy_NET_standalone_tool.html)是我在使用此工具进行部署时找到的文档。

您必须在 Visual Studio 中将站点发布为 Web 部署包。然后使用默认位于 Windows 中的工具

```
C:\Program Files (x86)\AWS Tools\Deployment Tool>awsdeploy.exe 
```

您必须向它传递一个包含部署配置的文本文件。该文件的模板位于

```
C:\Program Files (x86)\AWS Tools\Deployment Tool\Samples\ElasticBeanstalkDeploymentSample.txt 
```

我第一次使用该工具时，部署了 Visual Studio 生成的包存档，我仍然得到了普通的 IIS 8 登录页面。但是，当我进行增量部署时，这是通过将存档的提取版本推送到服务器来完成的，它运行良好。

# android - 在黑莓上使用带有本机代码的 Android 应用程序

> ID：15995955
> 
> 赞同：1
> 
> 时间：2013-04-14T04:56:57.053
> 
> 标签：android, blackberry-10, blackberry-playbook, blackberry-android

将我的 Android 应用程序移植到 Blackberry 10/Playbook 时，出现错误：

> 本机代码：x86

[此处](http://supportforums.blackberry.com/t5/Android-Runtime-Development/Eclipse-gt-BlackBerry-Tools-gt-VerifyAPK-gt-BlackBerry-Verifying/td-p/2020321)和[此处](http://supportforums.blackberry.com/t5/10K-Developer-Commitment/issue-releated-to-porting-andriod-app-to-blackberry-sdk-10/td-p/2089913)也报告了此错误。该应用程序使用 OpenCV for Android 作为库项目，其中包含本机代码，而且我知道 Blackberry 将本机代码列为[不支持的功能](https://developer.blackberry.com/android/apisupport/unsupportedapi_playbook_software_features.html)。有没有办法让带有本机代码的应用程序在黑莓上运行，即使是出于实验目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:24:39.743

据我所知，您必须将其移植到 Blackberry 的本机平台。

[http://developer.blackberry.com/develop/platform_choice/ndk.html](http://developer.blackberry.com/develop/platform_choice/ndk.html)

看起来黑莓在 Github 上做了一个粗略的移植。

[https://github.com/blackberry/OpenCV](https://github.com/blackberry/OpenCV)

我没有使用过它，所以我无法评论它的效果如何。

# excel - excel宏逐列删除重复项

> ID：15995956
> 
> 赞同：1
> 
> 时间：2013-04-14T04:57:10.773
> 
> 标签：excel, vba

我有一个包含 27 列 (A:AA) 的工作表 (Sheet1)。每列都有以一个字母开头的产品名称，AA 列包含以数字开头的名称。Sheet1 中的产品名称数量超过 150 万个。我已经实现了以下宏以升序方式（az）对每一列的数据进行排序，并且工作正常。是否可以修改此脚本以删除每列的重复名称，直到最后一列 (AA)？列之间没有比较，它只是每列单独进行排序并删除重复值（产品名称）。

```
Sub SortProductNames()
Dim rCell As Range

With Worksheets("Sheet1")
For Each rCell In Range("A2:AA2") 
    rCell.EntireColumn.RemoveDuplicates 1 'added as recommended by KazJaw
    rCell.EntireColumn.Sort Key1:=rCell(2, 1), _
    Order1:=xlAscending, Header:=xlYes
Next rCell
End With

Application.ScreenUpdating = True
End Sub 
```

非常感谢您在此问题上提供的任何帮助。

# java - 使用 play-scalr 会引发 Unsupported major.minor 版本 51.0

> ID：15995958
> 
> 赞同：0
> 
> 时间：2013-04-14T04:57:20.700
> 
> 标签：java, scala, playframework

我正在尝试将[play-scalr](http://leon.radley.se/project/play-scalr/)与 Play 一起使用，并按照[Github 页面](https://github.com/digiPlant/play-scalr)上的安装说明进行操作，但是当我请求调整大小的图像时出现错误：

> [RuntimeException：java.lang.UnsupportedClassVersionError：se/digiplant/scalr/api/Resizer$Mode：不支持的major.minor 51.0版]

当我编译项目时，下载了 jars，所以我认为问题是它们是使用 Java 1.7 编译的，但我正在尝试将它们与 Java 1.6 一起使用：

```
$ play compile
[info] Loading project definition from /Users/brad/projects/builders/project
[info] Set current project to builders (in build file:/Users/brad/projects/builders/)
[info] Updating {file:/Users/brad/projects/builders/}builders...
[info] downloading http://repo1.maven.org/maven2/se/digiplant/play-scalr_2.10/1.0/play-scalr_2.10-1.0.jar ...
[info]  [SUCCESSFUL ] se.digiplant#play-scalr_2.10;1.0!play-scalr_2.10.jar (2782ms)
[info] downloading http://repo1.maven.org/maven2/se/digiplant/play-res_2.10/1.0/play-res_2.10-1.0.jar ...
[info]  [SUCCESSFUL ] se.digiplant#play-res_2.10;1.0!play-res_2.10.jar (2553ms)
[info] Done updating.
[success] Total time: 26 s, completed 14/04/2013 3:06:18 PM 
```

这是我正在使用的版本：

```
$ play about
[info] Loading project definition from /Users/brad/projects/builders/project
[info] Set current project to builders (in build file:/Users/brad/projects/builders/)
[info] This is sbt 0.12.2
[info] The current project is {file:/Users/brad/projects/builders/}builders
[info] The current project is built against Scala 2.10.0
[info] Available Plugins: play.Project, sbt.PlayProject, com.typesafe.sbteclipse.plugin.EclipsePlugin, com.typesafe.sbtidea.SbtIdeaPlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.9.2

$ scala -version
Scala code runner version 2.9.2 -- Copyright 2002-2011, LAMP/EPFL

$ java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode)

$ javac -version
javac 1.6.0_43 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:26:56.640

我最终下载了 的源代码`play-scalr`，使用 Java 1.6 进行编译，然后将结果`.jar`放入我的`lib/`目录中。

# android - 如何在android中检查网络是否连接到wifi

> ID：15995961
> 
> 赞同：1
> 
> 时间：2013-04-14T04:57:36.133
> 
> 标签：android

现在我正在开发一个应用程序。我使用 ConnectivManager 检查了 android 中的互联网连接。我检查了 Mobile 3g 和 WIFI。我关闭了 WIFI 连接并检查了它是否可以正常工作。然后我打开了WIFI连接，但断开了WIFI中的所有网络。现在我检查但它显示WIFI已连接但我想检查WIFI打开时网络是否连接到WIFI或WIFI打开时未连接到WIFI。我不知道如何编码。任何人都可以帮助提供所需的代码吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:14:42.030

```
public boolean isWifiEnabled(){
       ConnectivityManager cm = (ConnectivityManager) c.getSystemService(
                            Context.CONNECTIVITY_SERVICE);
       NetworkInfo wifiNetwork = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

       if (wifiNetwork != null && wifiNetwork.isConnected()) {
          return true;
       }
    return false;
} 
```

不要忘记使用以下权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" >
</uses-permission> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T06:14:00.617

检查互联网是否通过 WiFi 或手机连接

```
public static boolean hasInternet(Activity a) {
 boolean hasConnectedWifi = false;
 boolean hasConnectedMobile = false;

 ConnectivityManager cm = (ConnectivityManager) a.getSystemService(Context.CONNECTIVITY_SERVICE);
 NetworkInfo[] netInfo = cm.getAllNetworkInfo();
 for (NetworkInfo ni : netInfo) {
  if (ni.getTypeName().equalsIgnoreCase("wifi"))
   if (ni.isConnected())
    hasConnectedWifi = true;
  if (ni.getTypeName().equalsIgnoreCase("mobile"))
   if (ni.isConnected())
    hasConnectedMobile = true;
 }
 return hasConnectedWifi || hasConnectedMobile;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T05:59:09.050

检查网络连接

```
public class CheckNetwork {

private static final String TAG = CheckNetwork.class.getSimpleName();

public static boolean isInternetAvailable(Context context)
{
    NetworkInfo info = (NetworkInfo) ((ConnectivityManager)
    context.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

    if (info == null)
    {
         Log.d(TAG,"no internet connection");
         return false;
    }
    else
    {
        if(info.isConnected())
        {
            Log.d(TAG," internet connection available...");
            return true;
        }
        else
        {
            Log.d(TAG," internet connection");
            return true;
        }

    }
}
 } 
```

在你的活动中

```
 if(Checknetwork.isInternetAvailable(MainActivity.this)
      {
          // do something
      } 
```

记得在清单文件中添加权限

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/> 
```

这还会检查您是否连接到移动网络或 wifi。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T05:10:24.333

通过这段代码，您应该能够使用 ConnectivityManager。从那里您可以检查它是否已连接甚至可用。

```
 ConnectivityManager connManager = (ConnectivityManager)   getSystemService(CONNECTIVITY_SERVICE);
        NetworkInfo mWifi = connManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

        if (mWifi.isConnected()) {
            // Do whatever
        } 
```

# java - 使用jung的连通图的深度优先遍历不显示右遍历

> ID：15995962
> 
> 赞同：1
> 
> 时间：2013-04-14T04:57:39.807
> 
> 标签：java, graph, jung

我正在实现用户使用jung绘制的图形的深度优先遍历。

我现在有以下代码：

```
 public <V,E> void dftdraw(Graph<V,E> g) {
    V start = null;      
    for (V v:g.getVertices()){
        if(v.toString().equals("0"))
           start = v; 
    }

    Set visited = new HashSet();
    LinkedList stack = new LinkedList();
    stack.add(start);
    System.out.println(start.toString());
    // traverse through graph in depth-first order
    while (!stack.isEmpty())
    {
        V v = (V)stack.removeFirst();
        visited.add(v);
        Set neighbors = (Set) g.getNeighbors(v);

        for (Iterator n_it = neighbors.iterator(); n_it.hasNext(); )
        {
            V w = (V)n_it.next();

            if (!visited.contains(w)){
                System.out.println(w.toString());
                stack.addFirst(w);
            }
        }
    }
} 
```

但这不是先做深度，它首先打印出连接到起始顶点的顶点，而不是像遍历第一个连接的顶点，然后遍历它的连接顶点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T20:32:56.433

那是因为您过早地打印顶点。如果您希望它们按访问顺序打印，则需要在访问时打印（在从堆栈中删除顶点之后）。否则算法似乎没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T20:46:54.470

所以，现在我正在使用以下代码通过递归进行深度优先遍历：

```
public <V, E> void dftdraw(Graph<V, E> g) {

    V start = null;

    for (V v : g.getVertices()) {
        if (v.toString().equals(jTextField2.getText())) {
            start = v;
        }

    }

    if(!visiteddfs.contains(start)) {
        dfspath(g,start);
    }

    for(int i=0;i<l2.size();i++){

        jTextField4.setText(jTextField4.getText() + " " + l2.get(i));
    }

}

public <V,E> void dfspath(Graph<V,E> g,V v){

    visiteddfs.add(v);
    l2.add(v);
    Set neighbors = (Set) g.getNeighbors(v);
        //System.out.println(v);

        for (Iterator n_it = neighbors.iterator(); n_it.hasNext();) {
            V w = (V) n_it.next();

        if(!visiteddfs.contains(w)){

            dfspath(g,w);
        }

    }
    finisheddfs.add(v);

} 
```

并稍作修改，问题中发布的代码用于广度优先遍历。这是代码：

```
 public <V, E> void bstdraw(Graph<V, E> g) {

    V start = null;

    for (V v : g.getVertices()) {
        if (v.toString().equals(jTextField1.getText())) {
            start = v;
        }
    }

    Set visited = new HashSet();
    LinkedList stack = new LinkedList();
    stack.add(start);
    visited.add(start);
    l.add(start);
    // traverse through graph in depth-first order
    while (!stack.isEmpty()) {
        V v = (V) stack.removeFirst();
        Set neighbors = (Set) g.getNeighbors(v);
        //System.out.println(v);

        for (Iterator n_it = neighbors.iterator(); n_it.hasNext();) {
            V w = (V) n_it.next();

            if (!visited.contains(w)) {
                l.add(w);
                g2.addEdge("edge" + w, (Integer) v, (Integer) w);
                jPanel4.repaint();
                jPanel4.updateUI();

                visited.add(w);
                stack.addLast(w);

            }
        }
    }

    for (int i = 0; i < l.size(); i++) {

        jTextField3.setText(jTextField3.getText() + " " + l.get(i));

    }
} 
```

# javascript - javascript - 根据条件删除数组元素

> ID：15995963
> 
> 赞同：103
> 
> 时间：2013-04-14T04:57:50.773
> 
> 标签：javascript

我想知道如何在 javascript 中实现一个方法，该方法删除清除某个条件的数组的所有元素。（最好不使用jQuery）

前任。

```
ar = [ 1, 2, 3, 4 ];
ar.removeIf( function(item, idx) {
    return item > 3;
}); 
```

以上将遍历数组中的每个项目并删除所有`return true`符合条件的项目（在示例中，项目> 3）。

我刚开始使用 javascript，想知道是否有人知道完成这项工作的一种简短有效的方法。

--**更新**--

如果条件也适用于对象属性，那就太好了。

前任。

```
ar = [ {num:1, str:"a"}, {num:2, str:"b"}, {num:3, str:"c"} ];
ar.removeIf( function(item, idx) {
    return item.str == "c";
}); 
```

如果该项目将被删除`item.str == "c"`

--**更新2** --

如果索引条件也可以工作，那就太好了。

前任。

```
ar = [ {num:1, str:"a"}, {num:2, str:"b"}, {num:3, str:"c"} ];
ar.removeIf( function(item, idx) {
    return idx == 2;
}); 
```

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-04-14T05:02:23.547

您可以使用[数组过滤方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)。

代码如下所示：

```
ar = [1, 2, 3, 4];
ar = ar.filter(item => !(item > 3));
console.log(ar) // [1, 2, 3]
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-04-14T05:08:39.937

如果对您不起作用，您可以添加自己的方法`Array`来做类似的事情`filter`。

```
Array.prototype.removeIf = function(callback) {
    var i = 0;
    while (i < this.length) {
        if (callback(this[i], i)) {
            this.splice(i, 1);
        }
        else {
            ++i;
        }
    }
}; 
```

对我来说，这是 JavaScript 最酷的特性之一。Ian 指出了一种更有效的方法来做同样的事情。考虑到它是 JavaScript，每一点都有帮助：

```
Array.prototype.removeIf = function(callback) {
    var i = this.length;
    while (i--) {
        if (callback(this[i], i)) {
            this.splice(i, 1);
        }
    }
}; 
```

这避免了担心更新`length`或捕捉下一个项目的需要，因为您以左侧而不是右侧的方式工作。

* * *

## 回答 #3

> 赞同：42
> 
> 时间：2013-04-14T05:01:01.067

您可以使用[`Array.filter()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)，它的作用相反：

```
ar.filter(function(item, idx) {
    return item <= 3;
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-01-29T11:56:54.047

使其成为具有箭头功能的单线：

```
ar = ar.filter(i => i > 3); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-01-23T06:43:58.810

您可以使用[**lodash.remove**](https://lodash.com/docs#remove)

```
var array = [1, 2, 3, 4];
var evens = _.remove(array, function(n) {
  return n % 2 == 0;
});

console.log(array);
// => [1, 3]

console.log(evens);
// => [2, 4] 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-26T09:04:31.737

如果条件也适用于对象属性，只需编写以下示例

```
var ar = [ {num:1, str:"a"}, {num:2, str:"b"}, {num:3, str:"c"} ];
var newArray = [];
for (var i = 0, len = ar.length; i<len; i++) {
        if (ar[i].str == "b") 
        {newArray.push(ar[i]);};
 };
console.log(newArray); 
```

查看示例[Live Example](http://jsfiddle.net/vamsikrishnamannem/ur9fvLLr/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-04-14T05:17:17.107

我喜欢这些类型的问题，只是和我不同的版本...... :)

```
Array.prototype.removeIf = function(expression) {
   var res = [];
    for(var idx=0; idx<this.length; idx++)
    {
      var currentItem = this[idx];
        if(!expression(currentItem))
        {
            res.push(currentItem);
        }
    }
    return res;
}

ar = [ 1, 2, 3, 4 ];
var result = ar.removeIf(expCallBack);

console.log(result);
function expCallBack(item)
{
    return item > 3;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-01-24T15:24:35.103

如果您需要删除一个项目，并且您确定该项目存在，您可以使用这个单行：

```
ar.splice(ar.findIndex(el => el.id === ID_TO_REMOVE), 1);

// or with custom method:
let ar = [ {id:1, str:"a"}, {id:2, str:"b"}, {id:3, str:"c"}, {id:4,str:"d"} ];
ar.removeById = id => ar.splice(ar.findIndex(el => el.id === id), 1);
ar.removeById(ID_TO_REMOVE); 
```

[http://jsfiddle.net/oriadam/72kgprw5/](http://jsfiddle.net/oriadam/72kgprw5/)

仅限 ES6

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2022-01-20T11:17:26.533

我对一组数字的解决方案是：

```
ar.filter(item => item < 4); 
```

# java - 显示 Runtime.exec() 返回的 Process 的输出流

> ID：15995969
> 
> 赞同：1
> 
> 时间：2013-04-14T04:59:32.393
> 
> 标签：java, outputstream, runtime.exec

如何将执行命令获得的输出字符串打印到标准输出？

所以`Runtime.getRuntime().exec()`会返回 a `Process`，通过调用`getOutputStream()`，我可以获得如下的对象，但是如何将它的内容显示到 stdout 呢？

`OutputStream out = Runtime.getRuntime().exec("ls").getOutputStream();`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:06:24.883

我相信您正在尝试从流程中获取输出，为此您应该获得`InputStream`.

```
InputStream is = Runtime.getRuntime().exec("ls").getInputStream();
InputStreamReader isr = new InputStreamReader(is);
BufferedReader buff = new BufferedReader (isr);

String line;
while((line = buff.readLine()) != null)
    System.out.print(line); 
```

`OutputStream`当你想写/发送一些输出到进程时，你会得到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T05:06:34.933

将流转换为字符串，如[Get an OutputStream into a String](https://stackoverflow.com/questions/216894/get-an-outputstream-into-a-string)中所述，只需使用 Sysrem.out.print()

# shader - 为什么方差阴影贴图中需要矩

> ID：15995970
> 
> 赞同：2
> 
> 时间：2013-04-14T04:59:38.347
> 
> 标签：shader, shadow

[本文](https://developer.nvidia.com/content/gpu-gems-3-chapter-8-summed-area-variance-shadow-maps)介绍如何使用 Variance Shadow Maps 渲染阴影。

它说当将场景渲染到阴影贴图中时，您应该存储深度和深度平方（使用偏导数调整偏差）。

```
float2 ComputeMoments(float Depth)
{
    float2 Moments;
    // First moment is the depth itself.
    Moments.x = Depth;
    // Compute partial derivatives of depth.
    float dx = ddx(Depth);
    float dy = ddy(Depth);
    // Compute second moment over the pixel extents.
    Moments.y = Depth*Depth + 0.25*(dx*dx + dy*dy);
    return Moments;
} 
```

然后，您可以像这样检查阴影贴图的深度：

```
 float ChebyshevUpperBound(float2 Moments, float t)
   {
       // One-tailed inequality valid if t > Moments.x
       float p = (t <= Moments.x);
       // Compute variance.
       float Variance = Moments.y – (Moments.x*Moments.x);
       Variance = max(Variance, g_MinVariance);
       // Compute probabilistic upper bound.
       float d = t – Moments.x;
       float p_max = Variance / (Variance + d*d);
       return max(p, p_max);
    }

    float ShadowContribution(float2 LightTexCoord, float DistanceToLight)
    {
        // Read the moments from the variance shadow map.
        float2 Moments = texShadow.Sample(ShadowSampler, LightTexCoord).xy;
        // Compute the Chebyshev upper bound.
        return ChebyshevUpperBound(Moments, DistanceToLight);
    } 
```

文章然后说，您可以完全不偏向深度平方，只要确保将方差限制在最小值即可。在本书附带的源代码中，计算偏差的代码被注释掉了，它说只是为了限制最小方差。

那么，为什么还要首先存储深度平方呢？此外，为什么不跳过方差的计算，而总是使用最小方差呢？如果矩 1 是深度，矩 2 是深度的平方，那么方差不应该总是为 0 吗？

```
float Variance = Moments.y – (Moments.x*Moments.x); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T22:41:14.023

如果不过滤纹理，这将是正确的，但这种类型的阴影贴图的主要思想是它可以被线性过滤。过滤（深度^2）不等于过滤（深度）^2。这就是方差的来源。

非常感谢作者澄清了这一点。

# android - Android 将用户的选择保存为收藏夹

> ID：15995974
> 
> 赞同：2
> 
> 时间：2013-04-14T05:00:06.080
> 
> 标签：android, storage

我正在开发一个音乐应用程序，用户可以在其中选择要播放的歌曲。我想要实现的一个功能是将歌曲保存为收藏。一旦点击收藏，它应该保存用户的选择并在用户下次登录时显示。没有任何数据存储在应用程序上。一切都是从服务器获取的。我打算存储的只是歌曲的名称。我阅读了 Android 文档[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)以了解各种存储选项，这些似乎适用于我的案例是：

*   内部存储器
*   数据库 SQLLite 连接

因为这些将存储应用程序私有的数据。

我应该使用其中哪一个？还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T05:12:36.593

他们都工作正常。但是由于您的数据将是单个文本，因此我建议使用共享首选项，它将数据保持为 XML 格式并且易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T05:27:31.633

你是如何填充歌曲列表的？您是否有任何缓存，或者您每次都从服务器获取它？为了提高性能并能够在没有互联网连接的情况下使用您的应用程序 - 至少可以查看您拥有的歌曲，我建议您必须提供某种缓存。一旦你有了缓存，SQLite 就是你要走的路，不管是歌曲数据还是喜欢的数据。

# javascript - javascript简单替换引号内的所有内容

> ID：15995981
> 
> 赞同：0
> 
> 时间：2013-04-14T05:01:09.517
> 
> 标签：javascript, regex

令人惊讶的是，但我发现很难找到一个替换引号内文本的示例正则表达式。例如

1.  `john went for a 'walk'`
2.  `john "walk" went for`- 你明白任何订单的想法

只有walk这个词会被替换。

我确实找到了这个：[正则表达式 - 如何替换引号内的字符，](https://stackoverflow.com/questions/4476812/regular-expressions-how-to-replace-a-character-within-quotes)但对于我想要做的事情来说似乎非常复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:15:09.337

尝试 JavaScript 正则表达式：

`/(["'])[^]*?\1/g`

这匹配双引号或单引号之间的任何内容。

对于您的具体情况：

```
var s = "john went for a 'walk'";
s.replace(/(["'])[^]*?\1/g, "run");

// "john went for a run" 
```

和：

```
var s = "john \"walk\" went for";
s.replace(/(["'])[^]*?\1/g, "run");

// "john run went for" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-14T05:19:17.863

怎么样

```
var string = "john went for a 'walk'";

var new_string = string.replace(/'([^;]*)'|"([^;]*)"/,"girl"); 
```

试试[http://jsfiddle.net/7dwCU/](http://jsfiddle.net/7dwCU/)

# python - python-分别反转1个列表中的2个字符串？

> ID：15995987
> 
> 赞同：2
> 
> 时间：2013-04-14T05:02:02.867
> 
> 标签：python

在 python 中，我有这个列表包含

```
['HELLO', 'WORLD'] 
```

我如何把那个列表变成

```
['OLLEH', 'DLROW'] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-14T05:02:39.330

```
>>> words = ['HELLO', 'WORLD']
>>> [word[::-1] for word in words]
['OLLEH', 'DLROW'] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:02:58.320

使用列表推导：

```
reversed_list = [x[::-1] for x in old_list] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T05:58:33.470

可以说使用内置`reversed`比切片表示法更清楚`x[::-1]`。

```
[reversed(word) for word in words] 
```

或者

```
map(reversed, words) 
```

没有 lambda，地图很快。

我只是希望从生成的迭代器中取出字符串更容易。有什么比`''.join()`将迭代器中的字符串放在一起更好的方法吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-14T05:07:39.557

使用`map`and `lambda`（lambdas 很慢）：

```
>>> lis=['HELLO', 'WORLD']
>>> map(lambda x:x[::-1],lis)
['OLLEH', 'DLROW'] 
```

# internet-explorer - AngularJS + IE + iframe 粘贴到 textarea = 崩溃疯狂

> ID：15995989
> 
> 赞同：0
> 
> 时间：2013-04-14T05:02:08.227
> 
> 标签：internet-explorer, iframe, angularjs, embed

这太疯狂了。我正在这个网站上为一个客户端开发，用户可以将嵌入代码从 youtube 粘贴到屏幕上的文本区域。他们单击“添加”，代码被放入对象的属性中，该属性又被推到数组的末尾。然后你会看到你的视频“列表”，还有一个“新”按钮可以添加更多。一旦您单击页面上的“新建”按钮添加第二个，IE 就会冻结。我已经尝试过 IE 9——它几乎 100% 的时间都在运行——一旦它起作用了，但我先添加了其他东西。
IE10 似乎工作正常，但我可以发誓我之前在那里遇到过这个问题 - 但今晚，它看起来确实很好。
**更新：**刚刚在 Windows XP 上测试了 IE8 - 没有问题。

经过多次调试，我相信我实际上得出了一个疯狂的结论，即如果 iframe 是 560 像素或更宽，它会崩溃......如果你将大小更改为 550，没问题......所有这一切，而 iframe 有问题实际上不在页面上（您可以预览它，但默认情况下它不会显示甚至注入到页面中。）

其他一些注意事项：
我尝试插入一个简单的 iframe，只是一个 src 属性 - 没有问题。
我尝试插入一堆 html - 没问题。
我尝试插入无效的 html - 没有问题。
我拿了 YouTube 的代码，更改了 URL - 有问题。
我尝试手动重新输入 YouTube 的代码 - 遇到了问题（当我尝试这个时希望有一些奇怪的编码或其他东西。）

该网站即将完成，因此非常感谢您提供任何帮助！

为了您的方便，我设置了一个站点来实际查看：

[http://cars.thomporter.com](http://cars.thomporter.com)

您需要先登录：
用户名：test@testers.com
密码：test1234

然后继续 /submit 或单击导航中的“出售您的汽车”，然后单击后续页面上的“快速列出”。

您可以立即转到“YouTube 视频”标签并尝试一下 - 您不必在标签中按自己的方式工作...

这是一些代码（CoffeeScript & Jade - JavaScript & HTML 可以在网站上看到...）

在控制器的早期，我将视频列表初始化为一个空数组：

```
$scope.formData = 
    videos: [] 
```

这是提交新视频时调用的方法（略微编辑）

```
$scope.addVideo = ->
    v = {
        id: 0
        code: $scope.new_video.code
        listing_id: $scope.listing_id
    }
    $scope.formData.videos.push v 
    $scope.new_video.adding = false # hides the "add" form.

    $scope.new_video.code = '' 
```

在列表编辑器中呈现视频选项卡的 HTML（我为此使用 AngularUI Bootstrap）

```
pane(heading="YouTube Videos", active="panes.videoActive")
    div(ng-show="new_video.adding || !formData.videos.length")
        h4 Add Video
        p Paste the embed code from YouTube to add video:
        textarea(ng-model="new_video.code")
        br
        a.btn.btn-primary(ng-click="addVideo()") <i class="icon-save"></i> Add Video
        |  
        a.btn.btn-danger(ng-click="new_video.adding = false;new_video.code=''") <i class="icon-trash"></i> Cancel

    div(ng-show="!new_video.adding && formData.videos.length")
        .row-fluid
            .span6
                h4 YouTube Videos  
                    .btn-group
                        button.btn.btn-small.btn-success(ng-click="new_video.adding = true") <i class="icon-plus"></i> New
                        button.btn.btn-small.btn-info(ng-show="listing_id>0", ng-click="saveVideoOrder()",ng-disabled="new_video.saving_sort") <i class="icon-save"></i> Save Order
                            i.icon-spinner.icon-spin(ng-show="new_video.saving_sort")
                ul.unstyled.video-list(ui-sortable, ng-model="formData.videos")
                    li(ng-repeat="v in formData.videos",style="position:relative;padding-left:16px")
                        span(style="position:absolute;top:0;left:0;cursor:ns-resize") <i class="icon-resize-vertical"></i>
                        textarea(ng-model="v.code")
                        .btn-group
                            button.btn.btn-danger(ng-click="deleteVideo(v)", ng-disabled="new_video.deleting") <i class="icon-trash"></i> Delete
                                span(ng-show="new_video.deleting")
                                    i.icon-spinner.icon-spin
                            button.btn.btn-info(ng-click="new_video.preview_code=v.code") <i class="icon-eye-open"></i> Preview
                            button.btn.btn-primary(ng-click="v = updateVideo(v)", ng-disabled="v.updating") <i class="icon-save"></i> Update
                                i.icon-spinner.icon-spin(ng-show="v.updating")
            .span6(ng-show="new_video.preview_code")
                h4 Preview
                    a.btn.btn-danger.btn-mini(ng-click="new_video.preview_code = false")
                        i.icon-eye-close
                        |  Close
                div(ng-bind-html-unsafe="new_video.preview_code") 
```

仅供参考：大部分网站已经完成。Angular 仅在前端用于表单：注册、个人资料、提交汽车、消息系统和信用申请。管理员是一个完整的 Angular 应用程序，但您必须与客户一起找到一份工作才能看到 - 即使那样 - 我也不知道！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T06:21:45.713

我无法重现您的错误，但我做了这个 plunker 是为了知道它在您的计算机上是否也一样。

链接：[http ://plnkr.co/edit/LebJuOtlp6hOhzahQrIw?p=preview](http://plnkr.co/edit/LebJuOtlp6hOhzahQrIw?p=preview)

在此演示中，您必须输入这样的 youtube 嵌入视频 url（而不是整个嵌入代码）：[http://www.youtube.com/embed/video_id](http://www.youtube.com/embed/video_id)（为了方便用户工作，您可以解析常规 youtube url获取视频 ID 并将其更改为此表单）。

并单击添加以将其推送到列表中。然后你点击 watch 在 iframe src 中设置选中的 item url。

# c# - 与自身的多对多关系，首先在代码中添加其他字段

> ID：15995991
> 
> 赞同：0
> 
> 时间：2013-04-14T05:02:23.253
> 
> 标签：c#, entity-framework, entity-framework-5, code-first

我有这个实体：

```
public class Content
{
    public int Id { get; set; }
    public string Title { get; set; }
    public string Test { get; set; }
    public DateTime Date { get; set; }
} 
```

我想用代码优先的附加字段与自身创建多对多关系，如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/8DerZ.jpg)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:47:21.013

我认为您想要以下内容：

```
public class Content
{
    public int Id { get; set; }
    public ICollection<ContentLink> OtherContents { get; set; }
}

public class ContentLink
{
    public int Id { get; set; }
    public Content Lhs{ get; set; }
    public Content Rhs{ get; set; }
    //other stuff
}

modelBuilder.Entity<Content>().
    HasMany(c => c.OtherContents).WithRequired(c=>c.Lhs);
modelBuilder.Entity<ContentLink>().
    HasRequired(c => c.Rhs).WithMany(); 
```

注意：以上内容仅允许您遍历该实体链接到的资源，而不是链接到您的其他实体

在此处查看我关于导航属性的帖子以获取更多详细信息：http: [//blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first](http://blog.staticvoid.co.nz/2012/7/17/entity_framework-navigation_property_basics_with_code_first)

# ios - Uptime iOS Objective-C - 毫秒精度

> ID：15995995
> 
> 赞同：4
> 
> 时间：2013-04-14T05:02:38.970
> 
> 标签：ios, objective-c, uptime

我正在尝试为 iOS 争取正常运行时间。我正在使用 mach_absolute_time - 但我发现它在睡眠期间暂停。

我发现了这个片段：

```
- (time_t)uptime
{
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);
    time_t now;
    time_t uptime = -1;

    (void)time(&now);

    if (sysctl(mib, 2, &boottime, &size, NULL, 0) != -1 && boottime.tv_sec != 0)
    {
        uptime = now - boottime.tv_sec;
    }
    return uptime;
} 
```

它成功了。但是，它会返回整秒。有什么办法可以得到毫秒？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T05:22:29.390

如果你想要纯 Objective-C 的东西，试试

```
NSTimeInterval uptime = [[NSProcessInfo processInfo] systemUptime]; 
```

（`NSTimeInterval`是 的 typedef `double`，代表秒。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T05:33:21.037

内核（显然）不存储其启动时间的更高分辨率时间戳。

`KERN_BOOTTIME`由[中的`sysctl_boottime`函数`bsd/kern/kern_sysctl.c`](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/bsd/kern/kern_sysctl.c)实现。它调用`boottime_sec`.

`boottime_sec`实施于[`bsd/kern/kern_time.c`](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/bsd/kern/kern_time.c). 它调用`clock_get_boottime_nanotime`，它有一个很有前途的名字。

`clock_get_boottime_nanotime`实施于[`osfmk/kern/clock.c`](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/osfmk/kern/clock.c). 在其`nanosecs`参数中始终返回 0 是硬编码的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-22T15:22:24.467

我知道这可能为时已晚，但你去吧：

```
+ (NSTimeInterval)uptime {
    struct timeval boottime;
    int mib[2] = {CTL_KERN, KERN_BOOTTIME};
    size_t size = sizeof(boottime);

    struct timeval now;
    struct timezone tz;
    gettimeofday(&now, &tz);

    double uptime = -1;

    if (sysctl(mib, 2, &boottime, &size, NULL, 0) != -1 && boottime.tv_sec != 0) {
        uptime = now.tv_sec - boottime.tv_sec;
        uptime += (double)(now.tv_usec - boottime.tv_usec) / 1000000.0;
    }
    return uptime;
} 
```

# c# - C# Jquery 引用错误未定义

> ID：15995997
> 
> 赞同：0
> 
> 时间：2013-04-14T05:02:43.960
> 
> 标签：c#, javascript, jquery, asp.net-mvc-4

我有一个 C# MVC4 应用程序，在其中我正在编写一个 JQuery 函数来获取一些值，发布到 ActionResult 然后刷新部分视图。除了在我的一个 div 元素中设置一个等于变量值的新 var 之外，所有功能都正常工作。

预先存在的变量名为 myName，位于 id 为 NameDiv 的 div 中。

我已经尝试了这四个版本的代码，每个版本的结果是： `Reference Error myName is not defined.`

```
 var origname = myName;    
    var origname = myName.value();
    var origname = myName.val();
    var origname = $('#NameDiv').valueOf(myName); 
```

运行应用程序并检查元素时，我看到 myName 填充了正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-14T05:11:30.380

利用：

```
var origname = $('#NameDiv').find('input[name="myName"]').first().val();
// console.log(origname); 
```

这将在页面上找到带有`id`“NameDiv”的元素。然后它使用“myName”获取`input`页面上的元素。`name`然后它会找到*第*一个。然后`value`它将（通过使用`.val()`）获取它，并将该值存储在变量中`origname`。