# StackOverflow 问答 14380000-14380999

# sql - select query to perform data existance in other table where data need to split and each part need to check

> ID：14380005
> 
> 赞同：1
> 
> 时间：2013-01-17T13:17:23.497
> 
> 标签：sql, oracle, plsql

I dont want to use any function or any procedure.

I want simple select query to check the existance of the each part of string.

like i have one table dummy which have name column

```
 Id     name 
                          1   as;as;as
                          2    asd;rt 
```

and child table

```
 child_id       name
                          23           as
                          24           asd
                          25           rt 
```

so any i can do that

i have tried like

```
select substr(first_name,1,instr(first_name,';')-1) from dummy;
select substr(first_name,instr(first_name,';')+1,instr(first_name,';')-1) 
                                                               from dummy; 
```

Which is giving only first/second part but other part how to get other part

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:06:42.370

如果我做对了 - 如果孩子的 NAME 包含在 DUMMY.Name 中，您需要加入这些表

[SQLFiddle 示例](http://www.sqlfiddle.com/#!4/8194c/3)

```
select t1.*, 
       t2.child_id, 
        t2.name as t2name 
from t1
left join t2 on (';'||t1.name||';' like '%;'||t2.name||';%') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:18:06.147

我需要关于这个问题的更多信息。我们不知道您是否必须在一个字段上检测多个可能的字符串。

您可以为三种可能的情况使用三个类似的子句

1.  LIKE column_name ||'%;'
2.  喜欢'%;'|| 列名
3.  喜欢';%'|| 列名 ||'%;'

但它可能更适合未来学习构建正则表达式。这是一个对我帮助很大的网页：[txt2re.com](http://txt2re.com/)

# mysql - How to get MySQL offset as a column with alias?

> ID：14380017
> 
> 赞同：3
> 
> 时间：2013-01-17T13:18:06.540
> 
> 标签：mysql, sql, offset

How to get MySQL offset as a column with alias?

What I need is a way to get the current offset as a column in my sql query.

```
SELECT *, <THE_CURRENT_QUERY_OFFSET> AS current_query_offset
  FROM test_table
 LIMIT 10 OFFSET 25 
```

So, I should have a column named current_query_offset which is 25 in each row.

Note: I don't need the current row position the way it is given in [With MySQL, how can I generate a column containing the record index in a table?](https://stackoverflow.com/questions/3126972/mysql-row-number) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:20:08.947

这个怎么样：

```
SELECT *, 25 AS current_query_offset
FROM test_table
LIMIT 0 OFFSET current_query_offset 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:48:57.157

如果我正确理解您想要实现的目标（即：选择包含常量值的命名列以及任何其他列），这将起作用：

```
SELECT *, 25 AS current_query_offset
FROM test_table
LIMIT 10 
OFFSET 25; 
```

由于您已经`25`为您的 sql 代码提供了一次值，所以我不明白您为什么不应该第二次这样做。

# jsf - JSF SelectOneMenu HashMap Converter 有错误的 instanceOf

> ID：14380018
> 
> 赞同：0
> 
> 时间：2013-01-17T13:18:06.640
> 
> 标签：jsf, selectonemenu

在我的实体类中，我有一个 HashMap。现在我正在尝试创建此 Map 的 Select 以便能够选择对象。所以我创建了以下类：

**马转换器：**

```
@Named
public class HorseConverter implements Converter{

    @EJB
    private HorseBean bean;

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        return bean.getHorse(Long.valueOf(value));
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object value) {
        if(!(value instanceof Horse)){
            throw new ConverterException(new FacesMessage("Object is not a Horse"));
        } else {
            Horse h = (Horse) value;
            return Long.toString(h.getId());
        }
    }

} 
```

**种族实体：**

```
public Map<Horse, Integer> getHorses() {
        return horses;
    }

    public void setHorses(HashMap<Horse, Integer> horses) {
        this.horses = horses;
    } 
```

**而我的观点：**

```
Horse:
<h:selectOneMenu value="#{betController.horse}" converter="#{horseConverter}">
    <f:selectItems value="#{raceController.selectedRace.horses}" var="h" itemLabel="#{h.nickName}" itemValue="#{h}"/>
</h:selectOneMenu> 
```

似乎我得到的价值不是 Horse 的实例。我检查了以下链接： [https](https://stackoverflow.com/tags/selectonemenu/info) ://stackoverflow.com/tags/selectonemenu/info所以看来密钥被自动用作值。但即使写 h.key 也没有什么不同。

编辑：这是我的马实体的哈希和等于代码：

```
@Override
    public int hashCode() {
        int hash = 7;
        hash = 97 * hash + (int) (this.id ^ (this.id >>> 32));
        return hash;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Horse other = (Horse) obj;
        if (this.id != other.id) {
            return false;
        }
        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:43:27.050

您是否在 Horse() 对象中覆盖了 hashcode() 和 equals()？

您的 Converter 需要覆盖 equals() 才能工作。如果您不这样做，则只有对同一 Horse() 实例的两个引用是相等的，而不是两个具有完全相同状态的单独实例。集合创建一个隐式副本进行比较，因此在这种情况下，堆上不会有单个实例。

不要忘记 equals() 对象中的参数是 Object()，而不是 Horse()。

如果您不覆盖 hashcode()，则每个 Horse 实例的 hashcode 都会不同。这意味着您将很难找到合适的 Horse 进行比较，即使您的 Horses 在逻辑上是等价的，因为同样，您将有多个实例进行比较，以便在 HashMap 中找到您的 Horse。

[有关详细信息，请参阅Joshua Bloch 撰写的 Effective Java 的](http://books.google.co.uk/books?id=ka2VUBqHiWkC&pg=PA45&lpg=PA45&dq=joshua%20bloch%20always%20override&source=bl&ots=yYHnMhu2N2&sig=LZfMJvJQseeVvs5KYzp7FpcZgMw&hl=en&sa=X&ei=jRz4UIbfE6Wc0QWu6YHYBA&ved=0CDYQ6AEwAQ#v=onepage&q=joshua%20bloch%20always%20override&f=false)这一章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:49:02.417

你不能`var`在一个`Map`值上使用。`<f:selectItems>`仅当您使用而`List<Horse>`不是`Map<Horse, Integer>`.

```
public List<Horse> getHorses() {
    return horses;
} 
```

如果你真的想使用 a `Map`，那么你应该返回 a `Map<String, Horse>`，其中`String`是 的昵称`Horse`。

```
public Map<String, Horse> getHorses() {
    return horses;
} 
```

如果使用`Map`值，请不要忘记删除`var`：

```
<f:selectItems value="#{raceController.selectedRace.horses}" /> 
```

地图的键成为选项标签，地图的值成为选项值。

* * *

**与具体问题**无关**`HashMap`，a本质上是无序的。如果要按插入顺序显示下拉项目，请使用`LinkedHashMap`.**

# c - Function casting and the internal representation of the function arguments list in C

> ID：14380020
> 
> 赞同：1
> 
> 时间：2013-01-17T13:18:15.737
> 
> 标签：c, pointers, gcc, casting, clang

I was wondering how does a C compiler (I tried gcc and clang) organize the argument list of functions internally. For this purpose I made a program consisting of two files, for instance:

foo.c :

```
double foo (double (*f) (void *, double), void * arg, double x)
{
    return f (arg, x);
} 
```

main.c :

```
#include <stdio.h>

extern double foo (double (*) (double), double);

double bar (double x)
{   
    return x + x;
}

int main ()
{   
    double x = foo (&bar, 2);
    printf ("%g\n", x);
    return 0;
} 
```

and played with the argument list and the body of the `foo` in the foo.c. When foo.c is not consistent with definitions in the main.c the behavior of the program should be undefined according to the C standard (if I understand correctly?).

I have tried several variants (including the one above), for which the program will print 4. The one of the more exotic is

```
double foo (double x, double (*f) (char, double, int), int r)
{
    char a;
    return f (a, x, r);
} 
```

. However, if I would try something like

```
double foo (double x, double (*f) (char, double, double), double y)
{
    char a;
    return f (a, y, x);
} 
```

the result would not be 4, but if I write `f(a, x, y)` instead, I get 4 again.

The experiment makes me think that the argument list is internally represented as a list of arrays corresponding to different types, in which the information about the order of the arguments of different types is lost. For example, the argument list `(char a, double x, int i, double y, char b)` would be something like `(char:{a, b}, int:{i}, double:{x, y})` and the casting to the `(double z, char c)` would equal `(char:{c = a}, double:{z = x})`, where I have defined `T:{}` as an array of type `T`.

So:

Is my interpretation correct?

Is this behavior standardized somewhere?

How much can I rely on such a behavior?

This behavior allows some generic programming. Does anybody exploit it in practice?

thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:54:19.943

如果函数的签名不匹配，则不能依赖任何行为。您的程序可以正常运行、崩溃或发射火箭导弹。这是未定义行为的定义。

如果您使用 variadict 函数或未描述参数的函数（即 f()，不要与 f(void) 混淆），则只能依赖某些东西。对于那些，有关于参数提升和转换的规则。查找 C99 标准以了解更多信息。

其余的纯属猜测。如果你知道你的处理器的汇编语言是如何工作的，你就可以观察和推断出一些行为。例如在 x86 中，调用函数和传递参数的标准方法已经定义良好......

无论如何，依赖未定义的行为并不是一个好主意。

# facebook-graph-api - Tokens: App and User Tokens

> ID：14380027
> 
> 赞同：0
> 
> 时间：2013-01-17T13:18:46.333
> 
> 标签：facebook-graph-api, facebook-c#-sdk, token

I am just starting out looking at Facebook applications. I am planning to make an app – where should post photos to users walls or photo albums. It happens typically days after they have installed the app.

I have read that there exists different tokens. User tokens which expires after some time and App tokens, which does not expire. I have made some experiments – and must admit I am a bit confused. I tried getting tokens for 2 different users. The user tokens were different (of course). However, the App tokens was not? My questions are.

*   Is the App token always the same for all users?
*   Must I also get a user token from a user of my app when I have an App token?

EDIT: Since I posted this yesterday – I have realized that I need to make my questions clearer.

*   Is the App Token only to be used with access to information about the application itself – or is it e.g. used to achieve a non-expiring possibility to post to a user’s own wall?
*   If I want to be able to post a photo to a users wall long after he has been using my app last. Should I when use an App Token or a User Token?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:26:15.440

> 用户令牌

普通用户访问令牌将在 2 小时后过期。但是您可以将其延长至 2 个月。[看这里](https://developers.facebook.com/docs/howtos/login/extending-tokens/#step1)

> 应用访问令牌

私有给应用程序的管理员，不要公开它。而且它永远不会过期。通常，在应用程序开发中不需要它（仅适用于某些 API）。你可以从[这里得到它](https://developers.facebook.com/tools/access_token/)

还有一个`page access token`管理页面的工具。

你必须经历一次：[访问令牌和类型](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)

# ios6 - Xcode 4.5 callStackSymbol not Symbolicated

> ID：14380029
> 
> 赞同：1
> 
> 时间：2013-01-17T13:18:59.983
> 
> 标签：ios6, xcode4.5, crash-reports, callstack, debug-symbols

I am using `NSException`'s `callStackSymbol` to log the stack trace of my crash and send it to my server.

I am getting this kind of stack trace from my release ipa file and/or the original released app on iTunes.

```
0   CoreFoundation                      0x35d048a7 __exceptionPreprocess + 186
1   libobjc.A.dylib                     0x33928259 objc_exception_throw + 32
2   CoreFoundation                      0x35c591d7 -[__NSArrayM insertObject:atIndex:] + 186
3   MyApp                               0x00125443 _mh_execute_header + 300099
4   Foundation                          0x3512a933 __NSFireDelayedPerform + 414
5   CoreFoundation                      0x35cd8a33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
6   CoreFoundation                      0x35cd8699 __CFRunLoopDoTimer + 364
7   CoreFoundation                      0x35cd726f __CFRunLoopRun + 1206
8   CoreFoundation                      0x35c5a4a5 CFRunLoopRunSpecific + 300
9   CoreFoundation                      0x35c5a36d CFRunLoopRunInMode + 104
10  GraphicsServices                    0x339f5439 GSEventRunModal + 136
11  UIKit                               0x33432cd5 UIApplicationMain + 1080
12  MyApp                               0x00124b07 _mh_execute_header + 297735
13  MyApp                               0x000deaf0 _mh_execute_header + 10992 
```

And I'm getting this on debug/release via Simulator (I was getting this kind of stack trace before supporting iOS 6.0):

```
0   CoreFoundation                      0x35d048a7 __exceptionPreprocess + 186
1   libobjc.A.dylib                     0x33928259 objc_exception_throw + 32
2   CoreFoundation                      0x35c591d7 -[__NSArrayM insertObject:atIndex:] + 186
3   MyApp                               0x00125443 [MyApp didAppLoad] + 300099
4   Foundation                          0x3512a933 __NSFireDelayedPerform + 414
5   CoreFoundation                      0x35cd8a33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
6   CoreFoundation                      0x35cd8699 __CFRunLoopDoTimer + 364
7   CoreFoundation                      0x35cd726f __CFRunLoopRun + 1206
8   CoreFoundation                      0x35c5a4a5 CFRunLoopRunSpecific + 300
9   CoreFoundation                      0x35c5a36d CFRunLoopRunInMode + 104
10  GraphicsServices                    0x339f5439 GSEventRunModal + 136
11  UIKit                               0x33432cd5 UIApplicationMain + 1080
12  MyApp                               0x00124b07 [MyApp appLoad] + 297735
13  MyApp                               0x000deaf0 [MyApp start] + 10992 
```

My question is, what should I do to make it symbolicated (do not offer me of using symbolicating tools because it was working on the previous releases and supporting iOS 6 using Xcode 4.5, it became like this, and it is not iTunes.crash file).

If there's any chance of getting the reason of the crash from iTunes.crash, can you teach me how to do it? I searched for about 6 hours and I still didn't find any clue.

Thanks in advance!

# android - Conversion to Dalvik format failed with error 1 in Android

> ID：14380030
> 
> 赞同：2
> 
> 时间：2013-01-17T13:19:03.000
> 
> 标签：android, dalvik

> **Possible Duplicate:**
> [“Conversion to Dalvik format failed with error 1” on external JAR](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)

I'm getting this error : Conversion to Dalvik format failed with error 1 It started to gave me this error after loading facebook SDK. What is the problem?

I searched a lot on the internet but I couldn't solve my problem. What can I do? Here is my console :

```
[2013-01-17 15:03:14 - Mert] Dx 
UNEXPECTED TOP-LEVEL EXCEPTION:
java.lang.IllegalArgumentException: already added: Landroid/support/v4/widget/CursorAdapter$1;
    at com.android.dx.dex.file.ClassDefsSection.add(ClassDefsSection.java:123)
    at com.android.dx.dex.file.DexFile.add(DexFile.java:163)
    at com.android.dx.command.dexer.Main.processClass(Main.java:490)
    at com.android.dx.command.dexer.Main.processFileBytes(Main.java:459)
    at com.android.dx.command.dexer.Main.access$400(Main.java:67)
    at com.android.dx.command.dexer.Main$1.processFileBytes(Main.java:398)
    at com.android.dx.cf.direct.ClassPathOpener.processArchive(ClassPathOpener.java:245)
    at com.android.dx.cf.direct.ClassPathOpener.processOne(ClassPathOpener.java:131)
    at com.android.dx.cf.direct.ClassPathOpener.process(ClassPathOpener.java:109)
    at com.android.dx.command.dexer.Main.processOne(Main.java:422)
    at com.android.dx.command.dexer.Main.processAllFiles(Main.java:333)
    at com.android.dx.command.dexer.Main.run(Main.java:209)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.android.ide.eclipse.adt.internal.build.DexWrapper.run(DexWrapper.java:180)
    at com.android.ide.eclipse.adt.internal.build.BuildHelper.executeDx(BuildHelper.java:703)
    at com.android.ide.eclipse.adt.internal.build.builders.PostCompilerBuilder.build(PostCompilerBuilder.java:577)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:321)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:396)
    at org.eclipse.core.internal.resources.Project$1.run(Project.java:618)
    at org.eclipse.core.internal.resources.Workspace.run(Workspace.java:2344)
    at org.eclipse.core.internal.resources.Project.internalBuild(Project.java:597)
    at org.eclipse.core.internal.resources.Project.build(Project.java:124)
    at com.android.ide.eclipse.adt.internal.project.ProjectHelper.doFullIncrementalDebugBuild(ProjectHelper.java:1000)
    at com.android.ide.eclipse.adt.internal.launch.LaunchConfigDelegate.launch(LaunchConfigDelegate.java:147)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
[2013-01-17 15:03:14 - Mert] Dx 1 error; aborting
[2013-01-17 15:03:14 - Mert] Conversion to Dalvik format failed with error 1 
```

Here is my Build Path :

[![a busy cat](../Images/cc1cf7a4292d3d7acc6409ec6214568c.png)](https://i.stack.imgur.com/m2E6J.jpg)

Thanks for your help.

Regards.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:26:06.663

只需从您的项目中删除所有引用的库文件并清理项目...这将删除错误..

**或者**

尝试从您的 java 构建路径中删除所有 jar 文件，然后再次从 lib 文件夹中附加..

# java - Java字体大小从宽度

> ID：14380035
> 
> 赞同：5
> 
> 时间：2013-01-17T13:19:14.760
> 
> 标签：java, fonts, awt

我正在寻找一种从宽度推断 Java AWT 字体大小的方法。例如，我知道我想在 100 像素内写“hello world”。我知道我在 style 中使用字体“Times”，`Font.PLAIN`并且我想获得最适合我给定宽度 100 像素的字体大小。

我知道我可以循环计算它（类似于`while(font.getSize() < panel.getWidth()`），但老实说我觉得它不是很优雅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:43:08.380

您可以使用 FontMetrics 类获取字符串的渲染宽度和高度（确保在 Graphics2D 实例中启用小数字体度量以避免舍入错误）：

```
Graphics2D g = ...;
g.setRenderingHint(
    RenderingHints.KEY_FRACTIONALMETRICS, 
    RenderingHints.VALUE_FRACTIONALMETRICS_ON);

Font font = Font.decode("Times New Roman");

String text = "Foo";

Rectangle2D r2d = g.getFontMetrics(font).getStringBounds(text, g); 
```

现在，当您使用具有默认（或实际上任何）大小的字体获得文本宽度时，您可以缩放字体，以便文本适合指定宽度，例如 100px：

```
font = font.deriveFont((float)(font.getSize2D() * 100/r2d.getWidth())); 
```

同样，您可能必须限制字体大小，以免超出可用面板高度。

为了改善渲染文本的外观，您还应该考虑为文本渲染和/或字体中的字距支持启用抗锯齿：

```
g.setRenderingHint(
    RenderingHints.KEY_TEXT_ANTIALIASING, 
    RenderingHints.VALUE_TEXT_ANTIALIAS_ON);

Map<TextAttribute, Object> atts = new HashMap<TextAttribute, Object>();
atts.put(TextAttribute.KERNING, TextAttribute.KERNING_ON);
font = font.deriveFont(atts); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:43:09.447

看看我正在使用的这两种方法。它不像你说的那样优雅，但它有效。

```
private static int pickOptimalFontSize (Graphics2D g, String title, int width, int height) {
    Rectangle2D rect = null;

    int fontSize = 30; //initial value
    do {
        fontSize--;
        Font font = Font("Arial", Font.PLAIN, fontSize);
        rect = getStringBoundsRectangle2D(g, title, font);
    } while (rect.getWidth() >= width || rect.getHeight() >= height);

    return fontSize;
}

public static Rectangle2D getStringBoundsRectangle2D (Graphics g, String title, Font font) {
    g.setFont(font);
    FontMetrics fm = g.getFontMetrics();
    Rectangle2D rect = fm.getStringBounds(title, g);
    return rect;
} 
```

# ruby - 在 ruby state_machine 中触发状态之间的中间转换

> ID：14380039
> 
> 赞同：2
> 
> 时间：2013-01-17T13:19:31.020
> 
> 标签：ruby, state-machine, transitions

我正在使用[https://github.com/pluginaweek/state_machine](https://github.com/pluginaweek/state_machine)

我的代码是

```
event :set_running do
 transition any => :runnning
end

event :restart do
 transition :failed => :restarting
end

after_transition :failed => :restarting do |job,transition|
  job.set_running
end

after_transition :restarting => :running do |job,transition|
  job.restart_servers 
=begin 
 this takes some time. and i would like job state to be "restarting" while
 it's restarting servers. but it doesn't happen (i suppose because of transaction) 
 until after_transition :failed => :restarting callback is finished.
 so it actually doesnt happen at all because this callback triggers => :running transition
=end
end 
```

换句话说，我想运行一次“重启”事件并在它从：失败转移到：运行时触发中间转换。我可以使用 state_machine 以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T00:05:59.327

[http://rdoc.info/github/pluginaweek/state_machine/master/StateMachine/Integrations/ActiveRecord](http://rdoc.info/github/pluginaweek/state_machine/master/StateMachine/Integrations/ActiveRecord)

现在可以禁用事务：

```
state_machine :initial => :parked, :use_transactions => false do 
```

# r - 如何将 R 对象放入手动分配的内存中？

> ID：14380046
> 
> 赞同：1
> 
> 时间：2013-01-17T13:19:57.520
> 
> 标签：r, memory-management

我正在为 R 包开发 C 中的函数，我需要在手动分配的内存中初始化 R 数字向量，而不是垃圾收集。

标准函数 allocVector(REALSXP, XXX) 为我分配内存并初始化对象。我已经分配了一块内存，我需要在这个内存中初始化 R 对象并将其返回给用户空间。

我正在尝试遵循的算法

1.  自己分配内存（其实是内存映射文件）

2.  在这个内存中放置一个 R 对象（标准 R 数值向量）（如何？）

3.  防止垃圾收集器尝试收集它（如何？）

4.  为此对象注册终结器

5.  返回 R 对象用户可以使用它

6.  获取不再引用对象的通知并解除分配对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:06:43.903

您的问题从 1 开始。正如《[编写 R 扩展》手册](http://cran.r-project.org/doc/manuals/R-exts.html)告诉您的（以神秘的方式，请参阅[第 5.9.2 节](http://cran.r-project.org/doc/manuals/R-exts.html#Allocating-storage)），您*必须*将 R 的内存“池”用于您交回给 R 的对象。R 还能如何释放对象的内存，如果它不控制访问？

除非您使用外部指针，在同一手册和其他一些地方（这里的其他问题，r-devel 档案，几个包，...）中也涵盖了（有点）。

R 包[bigmemory](http://cran.r-project.org/package=bigmemory)几乎涵盖了这一点（另请参阅[相关的 bigmemory 网站](http://www.bigmemory.org/)。如果您愿意，可以从 bigmemory 开始并从中派生一个包“mmapmemory”。哦，还有一个包[mmap](http://cran.r-project.org/package=mmap)但是也许你已经知道了。

# git - 重命名 git 标签会导致不一致

> ID：14380053
> 
> 赞同：24
> 
> 时间：2013-01-17T13:20:30.823
> 
> 标签：git, git-tag

将 git 标签“1.0”重命名为“1.5”后

```
git tag 1.5 1.0
git tag -d 1.0
git push origin :refs/tags/1.0 
```

我的 git 存储库似乎处于不一致的状态。这是`git describe`输出：

```
warning: tag '1.0' is really '1.5' here
1.0-97-g88085b2 
```

`1.5-...`它现在应该返回

`git fsck --tags`输出：

```
Checking object directories: 100% (256/256), done.
tagged commit aad9477bba4bcf44ea34ea9693aeffc98527ff01 (1.0) in b96ce67583239e198f9e2aff5175176d65779044
Checking objects: 100% (3975/3975), done. 
```

如何删除对已删除标签的悬空引用？这是重命名标签的正确方法吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-09-04T18:49:39.823

几分钟前我遇到了同样的问题。已经提出的答案都没有涉及**真正的问题**，即摆脱消息`warning: tag 'foo' is really 'bar' here`并`git describe`仅列出标签的新名称。这在我的情况下尤其重要，因为我的构建系统用于`git describe`将用于构建构建的源记录到构建中。

### 复制问题

我可以通过这样做来复制问题：

```
$ git tag foo --annotate -m"original message"
$ git tag bar foo
$ git tag -d foo
$ git describe 
warning: tag 'foo' is really 'bar' here
foo 
```

（`--annotate`上面的标志`-m`暗示是多余的`--annotate`，但我已经将其包括在内以强调。）我尝试使用轻量级标签复制问题，但无法这样做。所以要复制这个问题，注释是必要的。

### 解决问题

其中一些涉及推倒已经推倒的东西，但我发现自己同意大卫卡尔普的说法，[他说](https://stackoverflow.com/a/14381774/1906307)：

> 然而，有时不准确（混乱）历史的长期痛苦是不值得的，而短期痛苦是值得的。

一旦你被困住了`warning: tag 'foo' is really 'bar' here`，那么你必须这样做：

```
$ git tag bar bar -m"original message" --force
$ git describe 
bar 
```

如果消息需要更改，请根据需要进行调整。

如果已推送旧标签，则删除旧标签：

```
$ git push origin :refs/tags/foo 
```

如果新标签已被推送，则更新它：

```
$ git push origin refs/tags/bar 
```

### 避免问题

为了首先避免这个问题，你必须创建`bar`：

```
$ git tag bar foo -m"original message" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:55:02.957

每当有人建议重写历史（或者在这种情况下，重新标记历史）时，重申标准的谨慎——如果你可以避免它，就不要这样做。

然而，有时不准确（混乱）历史的长期痛苦是不值得的，而短期痛苦是值得的。

如果是这种情况，下面的文章给出了所需的步骤：[如何重命名已推送到远程 git Repo 的标签](http://blog.sidmitra.com/how-to-rename-a-tag-already-pushed-to-a-remot)。

基本步骤是：

```
git tag new_tag old_tag
git push --tags
git push origin :refs/tags/old_tag
git tag -d old_tag 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-11T21:56:37.317

不确定这会有多大用处，但我在使用[release-it](https://github.com/release-it/release-it)时遇到了这个警告。在我的远程仓库中，有相同标签名称的轻量级和带注释的标签条目：

```
$ git ls-remote --tags origin
302883ef0cb2df8975abfbd24bbe89f64cf3da31    refs/tags/0.0.1
4852192308b404d74d7a4088c19a4629299f6ea2    refs/tags/0.0.1^{} 
```

（注意`^{}`第二个条目的标签名称之后）

这对于带注释的标签（？）似乎很正常，所以不要认为这本身就是问题，但是在我删除所有标签并重新标记所有内容后问题就消失了。例如对于上面的标签...

```
git tag -d 0.0.1                # Delete local tag
git push --delete origin 0.0.1  # Delete remote tag
git tag -a -m "" 0.0.1 4852192308b404d74d7a4088c19a4629299f6ea2  # Recreate [annotated] tag
git push --tags                 # Push tag(s) to remote repo 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-01-17T14:28:16.593

不，我认为这不是 git 中标签的正确工作流程。

git 的一个基本规则是： **不要乱用你已经推送过的东西。**

由于您已经推送了标签 1.0，因此您不想在本地将其重命名为 1.5，然后尝试推送它。将 1.0 标签留给后代，创建一个新的 1.5 标签，然后推送它。真的——这就是标签的用途。因此，您可以在 6 个月后重新创建您的软件在 1.0 版时的样子。

# postgresql - 如何使用脚本查找数据库中的所有对象？

> ID：14380063
> 
> 赞同：0
> 
> 时间：2013-01-17T13:21:00.387
> 
> 标签：postgresql

有人可以帮我弄这个吗？我需要使用脚本找出数据库中的**所有对象**。我需要这个的原因是，我被要求*更改所有数据库对象的所有者*，因此我需要首先列出所有对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:25:23.423

我想你可能想要[REASSIGN OWNED](http://www.postgresql.org/docs/current/static/sql-reassign-owned.html)代替。无需识别所有对象，只需识别用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:22:16.820

在 PostgreSQL（或几乎任何其他 RDBMS）中，我建议查看元数据表（[系统目录](http://www.postgresql.org/docs/9.2/static/catalogs.html)）。

例子。你想要所有的表：

```
db => \d pg_tables
    View "pg_catalog.pg_tables"
   Column    |  Type   | Modifiers 
-------------+---------+-----------
 schemaname  | name    | 
 tablename   | name    | 
 tableowner  | name    | 
 tablespace  | name    | 
 hasindexes  | boolean | 
 hasrules    | boolean | 
 hastriggers | boolean | 
db => select tablename from pg_tables; 
```

将为您提供所有表格的列表。您可以使用查询来构建脚本来更改所需表的所有权。

同样，您可以查询目录中的其他视图/表以获取其他对象类型（序列、索引，您可以命名）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:25:57.007

如果您将每个对象从角色更改`A`为角色`B`，您可能会喜欢[`REASSIGN OWNED`](http://www.postgresql.org/docs/8.3/interactive/sql-reassign-owned.html)：

```
REASSIGN OWNED BY A TO B 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:34:43.907

如果您可以执行 pg_dump 和 pg_restore 来创建新数据库，则在 pg_restore 上添加 --no-owner 标志并以您希望将所有权设置为的用户身份运行 pg_restore 应该可以解决此问题。

# css - 如何在没有任何填充的情况下写入跨度？

> ID：14380070
> 
> 赞同：0
> 
> 时间：2013-01-17T13:21:33.973
> 
> 标签：css, margin, padding, font-size

也许这个问题已经得到回答，但我想要一个只包含一个大字母的跨度：

```
font-size : 300px; 
```

但我无法擦除顶部和底部边距

我不能发布我的图片，因为我没有足够的声誉！

我试图调整行高，但我的跨度仍然和以前一样高！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:13:33.883

您的大“A”周围没有任何边距或填充。您可以判断，因为将它们设置为 0 不会影响任何事情：http: [//jsfiddle.net/KatieK/2LHHv/1/](http://jsfiddle.net/KatieK/2LHHv/1/)。

`#container`如果您想知道是什么导致了and之间的空白`#letter`，这是由于行内元素中固有的额外间距（由于`line-height`文本元素需要间距来处理高**H**和悬空**j**字符的方式）。尝试（理想情况下）调整`line-height`父母的 ，或设置`#letter { display: block; }`。

# java - 将 swt Canvas 传递给 C++

> ID：14380071
> 
> 赞同：1
> 
> 时间：2013-01-17T13:21:47.680
> 
> 标签：java, java-native-interface, c++-cli, swt

我有一个 c++ 程序来加载视频，我想在接口 java 中获取这个视频，所以我继续使用 jni

这是我的java代码：

```
Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Example");
        shell.setLayout(new FillLayout());
        // Create a canvas
        final Canvas canvas = new Canvas(shell, SWT.NONE);
        shell.setSize(580, 350);
        shell.open();
        int i = canvas.handle;
       //start( canvas.handle ); 
```

这是我的 C++ 代码：

```
Console::WriteLine("0");
            m_ctrl = gcnew AxVideoRecvCtrl();
            Console::WriteLine("1");
            m_ctrl->Name = "VideoRecvCtrlLive";
            m_ctrl->BeginInit();
            Console::WriteLine("idCanvas = "+idCanvas);
            //
            IntPtr windowHandle = Process.GetCurrentProcess().MainWindowHandle;
            m_ctrl->Parent = control->FromHandle((IntPtr)(idCanvas));

            if(m_ctrl->Parent == nullptr){
                Console::WriteLine("Is NULll");
                return;
            } 
```

问题是我总是得到 NULL 结果，有什么帮助吗？

# matlab - 构造一个二进制矩阵，使得每列仅包含单个“1”，并且每行的总和具有所需值

> ID：14380076
> 
> 赞同：4
> 
> 时间：2013-01-17T13:22:16.100
> 
> 标签：matlab, matrix, vectorization

我想构造一个满足以下约束的二进制（0s和1s）矩阵：

1.  每列必须仅包含单个二进制 1，该列的其余元素为 0。

2.  矩阵的每一行之和应该是一个期望值。例如，给定一个`rowSum`向量 [5 7 6 8 .......]，那么第一行的总和应该是 5，第二行的总和应该是 7，依此类推。

3.  `nCol`==`Sum(rowSum)`

此外，我想考虑*几个*（例如，7 个）满足相同条件的矩阵。

**编辑：**
我试图编写代码并完成了其中的一部分。代码是：

```
x=rand(21,50,7);
for k=1:7
    cons=max(x(:,:,7));
    for i=1:50
        for j=1:21
            if x(j,i,k)==cons(i)
                x(j,i,k)=1;
            else
                x(j,i,k)=0;
            end
        end
     end
 end
 x 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:50:33.780

构建满足您要求的二进制矩阵并不总是可能的。假设您想要一个大小为`nRows`x的二进制矩阵，`nCols`其中`rowSum`（长度为 的向量`nRows`）`rowSum(k)`为`1`第 s`k`行中的数量。所以，如果`nCol ~= sum( rowSum )`不可能构造这样的矩阵：你要么有没有`1`s 的列，要么有太多`1`s 的列......

因此，您的二进制矩阵是完全定义的`rowSum`- 直到其列的随机排列。

这个函数如何构造基本矩阵`b`：

```
function b = makeBizarreBinaryMatrix( rowSum )

nRows = numel( rowSum );
nCols = sum( rowSum );   
rows = 1:nRows;
rowInd = zeros( 1, nCols );
rowInd( cumsum( [1 rowSum(1:end-1)] ) ) = 1;
rowInd = rows( cumsum( rowInd ) );
b = sparse( rowInd, 1:nCols, 1, nRows, nCols ); 
```

现在您可以使用[`randperm`](http://www.mathworks.com/help/matlab/ref/randperm.html)随机排列列的顺序：

```
nb = b(:, randperm(size(b,2)) ); 
```

祝你的论文好运。

# jquery - 使用 jQuerys .change() 时如何显示和隐藏正在加载的 .gif 图像

> ID：14380078
> 
> 赞同：0
> 
> 时间：2013-01-17T13:22:21.293
> 
> 标签：jquery

使用下面的代码时，如何显示和隐藏 loding.gif 图像？这就是所有的代码。没有`beforeSend:`或`success:`在这里。

```
$("#seg").change(function(){
$("#sSeg").load("/blah/blah.php?option="+$("#seg").val());
}); 
```

这里发生的是，当下拉值更改时，它将为另一个下拉列表获取新内容。我想在那里添加一个 loading.gif，以便用户知道一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:25:57.770

您可以在使用前显示加载`load`，然后将其隐藏在`load's`回调函数中

```
$("#seg").change(function() {
    $('img.loading').show();
    $("#sSeg").load("/blah/blah.php?option="+$("#seg").val(), function() {
        $('img.loading').hide();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:25:38.457

使用上面的示例，最简单的方法是显示 loading.gif 并将其替换为 load 函数的下拉列表...

```
$("#seg").change(function(){
    $("#sSeg").html("<img src=\"loading.gif\" />");
    $("#sSeg").load("/blah/blah.php?option="+$("#seg").val());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:26:04.743

你的`.change()`函数是你的`beforeSend:`，并且 .load 有一个回调函数，它在完成时被调用。这应该工作：

```
$("#seg").change(function(){
    $('#gif').show();
    $("#sSeg").load("/blah/blah.php?option="+$("#seg").val(), function() {
        $('#gif').hide();
    });
}); 
```

请参阅[.load() 文档](http://api.jquery.com/load/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:26:05.947

只需创建一个像这样的 div，您要在其中显示加载图像并将加载图像放入其中，并将其默认设置为无显示并使用 jQuery 显示。

<div id="loading"><img src="loading.gif"></div>

```
$("#seg").change(function(){
    $("#loading").css("display","block");
    $("#sSeg").load("/blah/blah.php?option="+$("#seg").val(),function(){
       $("#loading").css("display","none");
    });
});

```

# java - Java 中的装饰器设计模式 - 为什么它不向列表中添加新的元素？

> ID：14380079
> 
> 赞同：0
> 
> 时间：2013-01-17T13:22:24.903
> 
> 标签：java, design-patterns, decorator

我试图在 Java 中实现一个简单的装饰器模式。主要思想是一个具体的装饰器必须在基本列表中添加一些东西。但是，我的实现不能正常工作，我不知道为什么。

输出如下所示：

```
ING -1,ING 0,ING 1. 
```

但应该是：

```
ING -1,ING 0,ING 1, ING 2. 
```

这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package newpackage;

import java.util.ArrayList;
import java.util.List;

abstract class Tester {

    protected List<String> ingridients = new ArrayList();
    protected String description;

    public String getDescription() {
        description = "";
        for (String i : ingridients) {
            description += i;
            description += ",";
        }
        description = description.substring(0, description.length() - 1);
        description += ".";
        return description;
    }
}

abstract class Decorator extends Tester {

    @Override
    public abstract String getDescription();
}

class Test1 extends Tester {

    public Test1() {
        this.ingridients.add("ING -1");
        this.ingridients.add("ING 0");
    }
}

class Ing1 extends Decorator {

    private Tester t;

    public Ing1(Tester t) {
        this.t = t;
    }

    @Override
    public String getDescription() {
        this.t.ingridients.add("ING 1");
        return this.t.getDescription();
    }
}

class Ing2 extends Decorator {

    private Tester t;

    public Ing2(Tester t) {
        this.t = t;
    }

    @Override
    public String getDescription() {
        this.t.ingridients.add("ING 2");
        return this.t.getDescription();
    }
}

public class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Tester t = new Test1();
        t = new Ing1(t);
        t = new Ing2(t);

        System.out.println(t.getDescription());
    }
} 
```

**编辑代码：**

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package newpackage;

import java.util.ArrayList;
import java.util.List;

interface Tester {

    List<String> ingridients = new ArrayList();
    public String getDescription();
}

abstract class Decorator implements Tester {

    @Override
    public abstract String getDescription();
}

class Test1 implements Tester {

    public Test1() {
        ingridients.add("ING -1");
        ingridients.add("ING 0");
    }

    @Override
    public String getDescription() {
        String description = "";
        for (String i : ingridients) {
            description += i;
            description += ",";
        }
        description = description.substring(0, description.length() - 1);
        description += ".";
        return description;
    }
}

class Ing1 extends Decorator {

    private Tester t;

    public Ing1(Tester t) {
        this.t = t;
    }

    @Override
    public String getDescription() {
        this.t.ingridients.add("ING 1");
        return this.t.getDescription();
    }
}

class Ing2 extends Decorator {

    private Tester t;

    public Ing2(Tester t) {
        this.t = t;
    }

    @Override
    public String getDescription() {
        this.t.ingridients.add("ING 2");
        return this.t.getDescription();
    }
}

public class Test {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        Tester t = new Test1();
        t = new Ing1(t);
        t = new Ing2(t);

        System.out.println(t.getDescription());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:27:54.290

我在调试器中运行它，我可以看到你的装饰器不仅仅是装饰器，因为它们有自己的状态。制作你 `Tester`的接口，让你的装饰器只包装具体实例而没有自己的状态。

```
// adds to the list in t1
this.t.ingridients.add("ING 2");

// add to the list in t
this.t.ingridients.add("ING 1");

// returns the contents of t.
return this.t.getDescription(); 
```

最后 t.ingredients 有三个项目，t1.ingredients 有 1 个元素，而 t2.ingredients 没有。

* * *

你可以这样写

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class Test {
    public static void main(String[] ignored) {
        Tester t012 = new Ing2(new Ing1(new Ing0(new None())));
        System.out.println(t012.getDescription());

        Tester t210 = new Ing0(new Ing1(new Ing2(new None())));
        System.out.println(t210.getDescription());
    }
}

abstract class Tester {
    public List<String> getIngredients() {
        return Collections.emptyList();
    }

    public String getDescription() {
        StringBuilder sb = new StringBuilder();
        String sep = "";
        for (String s : getIngredients()) {
            sb.append(sep).append(s);
            sep=", ";
        }
        sb.append(".");
        return sb.toString();
    }
}

class None extends Tester {
}

class Ing0 extends Tester {
    private final Tester wrapped;
    Ing0(Tester wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public List<String> getIngredients() {
        List<String> list = new ArrayList<>(wrapped.getIngredients());
        list.add("ING -1");
        list.add("ING 0");
        return Collections.unmodifiableList(list);
    }
}

class Ing1 extends Tester {
    private final Tester wrapped;
    Ing1(Tester wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public List<String> getIngredients() {
        List<String> list = new ArrayList<>(wrapped.getIngredients());
        list.add("ING 1");
        return Collections.unmodifiableList(list);
    }
}

class Ing2 extends Tester {
    private final Tester wrapped;
    Ing2(Tester wrapped) {
        this.wrapped = wrapped;
    }

    @Override
    public List<String> getIngredients() {
        List<String> list = new ArrayList<>(wrapped.getIngredients());
        list.add("ING 2");
        return Collections.unmodifiableList(list);
    }
} 
```

印刷

```
ING -1, ING 0, ING 1, ING 2.
ING 2, ING 1, ING -1, ING 0. 
```

# objective-c - UITableViewHeaderFooterView.detailTextLabel 不显示

> ID：14380082
> 
> 赞同：3
> 
> 时间：2013-01-17T13:22:31.750
> 
> 标签：objective-c, ios6, uitableview

我在使用`UITableViewHeaderFooterView`类时遇到问题。在我的应用程序中，我想同时使用`textLabel`和`detailTextLabel`属性来显示一些文本，但`detailTextLabel`不显示。据我了解 Apple 的文档，`textLabel`并且`detailTextLabel`属性的工作方式应该类似于众所周知的`textLabel`和类`detailTextLabel`的属性`UITableViewCell`。这是我的示例类代码：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate>
@property (strong, nonatomic) IBOutlet UITableView *tblMain;

@end

#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize tblMain;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    tblMain.delegate = self;
    tblMain.dataSource = self;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    NSString *reuseIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuseIdentifier];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:reuseIdentifier];
    }
    cell.textLabel.text = @"cell is not interesting";
    return cell;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 3;
}// Default is 1 if not implemented

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    NSString *reuseIdentifier = @"header";
    UITableViewHeaderFooterView *header = [tableView dequeueReusableHeaderFooterViewWithIdentifier:reuseIdentifier];
    if (!header) {
        header = [[UITableViewHeaderFooterView alloc] initWithReuseIdentifier:reuseIdentifier];
    }
    header.textLabel.text = @"t";
    header.detailTextLabel.text = @"dtext";
    return header;
}

@end 
```

如果编译此代码，它将显示一个包含三个部分和每个部分一行的表格。我想我会得到左侧带有“t”和右侧带有“dtext”的部分，但错过了“dtext”。我的代码中的错误在哪里？查看detailTextLabel要做什么？`UITableViewHeaderFooterView` `detailTextLabel`还可以提供指向财产工作示例的链接。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-14T19:40:07.110

如果您在标题中查找`UITableViewHeaderFooterView`，您会发现它`detailTextLabel`仅适用于`UITableViewStyleGrouped`。我猜你正在使用`UITableViewStylePlain`.

来自`UITableViewHeaderFooterView.h`：

```
@property(nonatomic, readonly, retain) UILabel* detailTextLabel; // only supported for headers in grouped style 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T16:34:59.467

我相信这是框架或文档中的错误。存在，`detailTextLabel`但它总是有一个零帧，所以它总是不可见的。因此它总是无用的。

最简单的解决方案是不使用内置标签；将您自己的子视图放入`contentView`. （不要尝试将您自己的自定义子视图与内置标签混合和匹配。）

# sencha-touch - 如何使用 Sencha Touch 在标题栏中左对齐标题文本

> ID：14380090
> 
> 赞同：1
> 
> 时间：2013-01-17T13:23:14.223
> 
> 标签：sencha-touch, sencha-touch-2

谁能展示我如何将标题栏中的标题对齐设置为左对齐。我目前正在尝试这个，但它不起作用：

```
var p = Ext.create('Ext.Panel', {
    items: [
    {
        xtype: 'toolbar',
        docked: 'top',
        title: 'my title',
        style: {
            'text-align':'left'
        }
    }   
    ]
}); 
Ext.Viewport.add(p); 
```

**第二次尝试：** 现在不能让标题左边和工具栏按钮右边！

```
var p = Ext.create('Ext.Panel', {
    items: [
    {
        xtype: 'toolbar',
        docked: 'top',
        layout: {
            pack: 'end'
        },
        title: {
            title: 'mytitle',
            style: {
                'text-align':'left'
            }
        },
        items: [
            {
                xtype: 'button',
                text: 'mybutton',
                align: 'right'
            }
        ]
    }   
    ]
}); 
Ext.Viewport.add(p); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:52:24.217

您正在尝试将样式添加到工具栏而不是标题元素。做这个：

```
xtype: 'toolbar',
docked: 'top',
title: {
    title: 'my title',
    style: {
        'text-align':'left'
    }
} 
```

看看这个[http://jsfiddle.net/xv67e/](http://jsfiddle.net/xv67e/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:26:38.720

我相信它是公正的`align`，而不是`text-align`，把它放在`style`街区外面，就在下面`title`。

[此页面](http://try.sencha.com/touch/2.0.1/demos/Ext.picker.Slot.align/viewer.html)上的更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:28:01.477

您可以为 Ext.TitleBar 的项目提供左对齐或右**对齐**配置，这会将它们停靠在栏的左侧或右侧。

# excel-2010 - Excel 公式需要在 1 个电子表格中查找值并将其传输到具有匹配值的另一个电子表格

> ID：14380092
> 
> 赞同：0
> 
> 时间：2013-01-17T13:23:19.153
> 
> 标签：excel-2010

每周我都会收到一个包含大约 2,000 行的 excel 文件。我需要能够将每个唯一库存项目收到的佣金转移到我的主文件（单独的电子表格）中，以便它显示在相同的唯一库存项目中。我尝试过使用宏（目前我手动通过复制和粘贴来查找主文件）。我也尝试过 IF 函数和 VLOOKUP 但似乎无法让它粘贴正确的佣金值。

这是我收到的文件的示例：

```
Stock Number    Customer    Commission Value(Ex VAT)
8944125460285514045 MISS ASHLEY CONNELLY    9.16
8944125460285247596 MR ROLAND COOPER    9.15
8944125460233434510 MISS SHERYL SEELEY  10.25
8944125460286262784 MISS CLAIRE HARPER  10.23
8944125460286264392 MS JILL BROWN           10.23
8944125460285752322 MISS HAYLEY NICHOL  10.23
8944125460183834545 MR RICHARD OMAHONY  9.91
8944125460233404356 MISS ALICIA MORAN   9.90
8944125460326568455 MRS CHANTELLE BILLY 9.89
8944125460286263303 MRS VANESSA SMITH   9.89
8944125460285247893 MISS VENISHA MILLER 9.87
8944125460326089940 MR CRAIG HAINES         9.86
8944125460285658222 MR JAY DEE          9.84 
```

这是我的主文件的简化版本：

```
Stock Number            Customer Name           Comms Rec'd
8944125460286264392 JILL BROWN  
8944125460285247596 ROLAND COOPER   
8944125460233434510 SHERYL SEELY    
8944125460285658222 JAY DEE 
8944125460286262784 CLAIRE HARPER   
8944125460285514045 ASHLEY CONNELLY 
```

我需要一个公式，将佣金值从收到的文件转移到相关股票编号的 comms rec'd 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:51:19.620

SUMIF 就是您所需要的。

```
=SUMIF(RecievedFile!A:A,Master!A2,RecievedFile!C:C) 
```

相应地更改参考。

该函数将沿股票编号列 ( `RecievedFile!A:A`) 搜索适当的股票编号 ( `Master!A2`) 并汇总相应佣金列 ( `RecievedFile!C:C`)中的值

* * *

要找到第**一个**匹配的股票编号，VLOOKUP 函数将执行此操作

```
=VLOOKUP(Master!A2,RecievedFile!A:C,3,FALSE) 
```

这将在接收到的文件中查找第一列主表中的代码，并从 * *3* *rd 列返回值。（False 表示列表不需要排序，只会返回完全匹配）。请注意，这只会返回找到的第一个 tiem，因此如果文件中有多个项目，则不会找到其他项目。

# excel - 用于将单元格从一个打开的工作簿复制到另一个打开的工作簿的宏......如果我不知道他们的文件路径

> ID：14380095
> 
> 赞同：0
> 
> 时间：2013-01-17T13:23:30.127
> 
> 标签：excel, vba

用于将单元格从一个打开的工作簿复制到另一个打开的工作簿的宏......如果我不知道他们的文件路径的 PS：代码将写入源工作簿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:48:30.647

你需要这样的东西（`ThisWorkbook`是对你有 VBA 代码的工作簿的引用）：

```
 ThisWorkbook.Worksheets("Sheet1").Range("A1:B2").Copy
    Workbooks("Book1.xslx").Worksheets("Sheet1").Range("A1").Insert Shift:=xlDown 
```

假设两个工作簿都已打开。您不需要知道完整路径 - 只有文件名很重要。

# r - 使用 R 2.15.2 设置种子

> ID：14380096
> 
> 赞同：7
> 
> 时间：2013-01-17T13:23:45.417
> 
> 标签：r, random, statistics

我的理解是 using`set.seed`可确保可重复性，但以下 R 代码并非如此`R 2.15.2`。我在这里错过了什么吗？

```
set.seed(12345)
rnorm(5)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875
 rnorm(5)
[1] -1.8179560  0.6300986 -0.2761841 -0.2841597 -0.9193220 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T13:40:34.280

`set.seed()`重新初始化[随机数生成器](http://en.wikipedia.org/wiki/Pseudorandom_number_generator)。

```
set.seed(12345)
rnorm(5)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875

set.seed(12345)
rnorm(5)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875

set.seed(12345)
rnorm(5)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-17T13:55:16.437

任何使用随机数生成器的调用都会改变当前的种子，即使你已经手动设置了`set.seed`.

```
set.seed(1)
x <- .Random.seed # get the current seed
runif(10) # uses random number generator, so changes current seed
y <- .Random.seed
identical(x, y) # FALSE 
```

正如@StephanKolassa 演示的那样，您必须在每次使用随机数生成器之前重置种子，以确保它每次都使用相同的种子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-14T23:40:24.670

值得强调的是，每次设置种子时，数字*序列仍然是可重现的，因为这种重新初始化。*

因此，尽管每次后续调用 eg`rnorm`时，每次调用都会得到不同的答案，**但从设置种子的点开始，您仍然会得到相同的数字序列**。

例如，根据原始问题：

```
set.seed(12345)
rnorm(5)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875
rnorm(5)
[1] -1.8179560  0.6300986 -0.2761841 -0.2841597 -0.9193220 
```

产生与以下相同的 10 个数字序列：

```
set.seed(12345)
rnorm(10)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875
-1.8179560  0.6300986 -0.2761841 -0.2841597 -0.9193220 
```

或者

```
set.seed(12345)
rnorm(7)
[1]  0.5855288  0.7094660 -0.1093033 -0.4534972  0.6058875
-1.8179560  0.6300986
rnorm(3)
[1] -0.2761841 -0.2841597 -0.9193220 
```

或对`rnorm`.

这里的要点是，**如果您在脚本开始时设置一次种子，您将在每次运行整个脚本时生成相同的随机数集**，同时从每个随机数生成器调用中获取不同的数字集代码。这是因为您从一开始就以该种子的相同序列运行。这可能是一件好事，这意味着如果您想要一个可重现的脚本，您可以在开始时设置一次种子。

# c - 从用户那里获取输入 - 不起作用

> ID：14380103
> 
> 赞同：0
> 
> 时间：2013-01-17T13:24:10.573
> 
> 标签：c, function, gets

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>
#include "mainl.h"

static struct prod_details pd;

char *getinput(char *inp)
{
    printf("Enter the amount of the product %d:\n",pd.no_prod+1);
    gets(inp);
    return inp;
}

void print()
{
    printf("........................\n");
    printf("No of Product is: %d\n",pd.no_prod);
    printf("Grant Total is : %.2f\n",pd.total);
    printf("........................\n");
}

int check(char *str) 
{
    int i;
    if(strlen(str) == 0)
        return 2;
    for(i=0;i<strlen(str);i++)
    {
        if(str[i] == '-')
            return 3;
        if(isalpha(str[i]) != 0)
            return 0;
    }
    return 1;
}

void calc(char *str)
{
    pd.array[pd.no_prod]=atof(str);
    pd.total=pd.total+pd.array[pd.no_prod];
    printf("Total is:%.2f\n",pd.total);
    pd.no_prod++;
}

int main()
{
    int chkflg,i=0,flag=0,cflag=0;
    char ch;
    char input[1024];
    printf("..................\n");
    printf("..CASE  RIGISTER..\n");
    printf("..................\n");
    //strcpy(input,getinput(i+1));
    //printf("%s\n",input);
    do
    {
        strcpy(input,getinput(input));
        chkflg=check(input);
        switch(chkflg)
        {
            case 0:
                printf("Please Enter Correctly...!!!\n");
                printf("You Have entered Wrongly.!!!\n");
                flag=0;
                break;
            case 1:
                calc(input);
                flag=1;
                break;
            case 2:
                printf("You didnt enter anything.!!!\n");
                flag=0;
                break;  
            case 3:
                printf("Coundnot Subtract the Amount..!!!\n");
                flag = 0;
                break;      
        }
        if(flag == 0)
        {
            printf("Do u want to continue(y/n)");
            ch=getchar();
            if(ch == 'y')
            {
                flag=1;
                //continue;
            }
            else if(ch == 'n')
            {
                printf("Thank u..!!!\n");
                break;
            }
            else
            {
                printf("You didn't Enter Properly...!!!\n");
                break;
            }
        }   
    }while(flag == 1);
    print();
    return 0;
} 
```

这是计算帐单的程序。该程序适用于正确的输入（例如double）。但问题是，如果我们输入错误的字符串，它会显示相应的情况，并询问是否继续。如果我们想继续，它会产生如下输出：

```
You Have entered Wrongly.!!!
Do u want to continue(y/n)y
Enter the Amount of the product 3:
You didn't enter anything.!!!
Do u want to continue(y/n) 
```

它没有得到进一步的输入。我正在使用 gdb。但我不明白为什么它不能进一步得到输入。请帮我解决这个问题。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:27:04.377

当您使用`getchar`换行符时，您`y`在输入流中留下后按。然后，当您这样做时，`gets`它会读取该换行符并且您有一个空行。

解决此问题的一种方法是`scanf`在格式后使用例如空格，因为这会告诉`scanf`在读取字符后吃掉所有空格：

```
printf("Do you want to continue(y/n)");
scanf("%c ", &ch); 
```

另一种解决方案是使用`fgets`读取整行，并使用例如提取答案`sscanf`。

# sql - 在这个例子中如何编写带除法的 SQL 查询？

> ID：14380108
> 
> 赞同：0
> 
> 时间：2013-01-17T13:24:28.477
> 
> 标签：sql, mysqli

我需要帮助编写下面所述问题的 SQL 查询。我想我必须使用除法，但我不知道该怎么做。

假设以下关系：S（供应商）、SP（交货）和 P（零件） 通过在 SQL 中编写查询来回答以下问题：

) 哪些供应商只从伦敦供应零件？

请注意，该问题仅询问来自伦敦的零件，而不是每个从伦敦提供零件的供应商。

```
S:
S#   SNAME  CITY
S7   Lowen  Berlin 
S8   Jeter  N.Y. 
S9   Kling  Berlin

SP:
S#  P#  QTY
S7  P2  300  
S7  P3  400  
S8  P2  300  
S9  P4  500

P:
P#  NAME  COLOR CITY
P1  Bolt  Blue  Berlin
P3  Nut   Red   Paris 
P2  Cog   Red   Rome 
P4  Screw Green Paris 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:41:36.953

显然，在您的示例中，只要没有来自伦敦的零件，就没有这样的供应商。尝试使用以下查询：

```
SELECT S.S#,max(S.SNAME) from S
LEFT JOIN SP on (S.S#=SP.S#)
LEFT JOIN P on (SP.P# = P.P#)
GROUP BY  S.S#
HAVING MAX(P.CITY)='London' and MIN(P.CITY)='London' 
```

# c - 未定义的引用... - 链接问题？

> ID：14380110
> 
> 赞同：0
> 
> 时间：2013-01-17T13:24:33.777
> 
> 标签：c, gcc, linker, compiler-errors, undefined-reference

我不知道我收到以下错误：

```
proc1.o: In function `procEx1':
/cygdrive/c/armprojects/projekt/motor/proc1.c:45: undefined reference to `motorTest_test'
collect2: ld returned 1 exit status
make: *** [main.hex] Error 1 
```

我已经检查了有关此问题的以下线程：

*   [未定义的参考 gcc](https://stackoverflow.com/questions/11233078/undefined-reference-gcc)
*   [为什么我在尝试创建共享对象时收到 gcc“未定义引用”错误？](https://stackoverflow.com/questions/8140494/why-am-i-getting-a-gcc-undefined-reference-error-trying-to-create-shared-objec)

这是我的输出：

```
13:46:46 **** Build of configuration Default for project motor ****
make all 
make[1]: Entering directory `/cygdrive/c/armprojects/projekt/motor/startup'
rm -f .depend 
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -Os -    gdwarf-2 -Wall -Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch     -Wreturn-type  -Wa,-ahlms=consol.lst -o consol.o consol.c
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -Os -    gdwarf-2 -Wall -Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch -Wreturn-type  -Wa,-ahlms=framework.lst -o framework.o framework.c
framework.c: In function 'exceptionHandlerInit':
framework.c:201: warning: pointer targets in assignment differ in signedness
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -x           assembler-with-cpp -gstabs -Wa,-alhms=startup.lst -o startup.o startup.S
arm-elf-ar cr libea_startup_thumb.a consol.o framework.o startup.o
arm-elf-ranlib libea_startup_thumb.a
make[1]: Leaving directory `/cygdrive/c/armprojects/projekt/motor/startup'
make[1]: Entering directory `/cygdrive/c/armprojects/projekt/motor/LCD'
rm -f .depend 
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -O0 -    gdwarf-2 -Wall -Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch     -Wreturn-type  -Wa,-ahlms=LCD.lst -o LCD.o LCD.c
arm-elf-ar cr lib_LCD.a LCD.o 
arm-elf-ranlib lib_LCD.a
make[1]: Leaving directory `/cygdrive/c/armprojects/projekt/motor/LCD'
make[1]: Entering directory `/cygdrive/c/armprojects/projekt/motor/interrupt'
rm -f .depend 
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -Os -    gdwarf-2 -Wall -Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch     -Wreturn-type  -Wa,-ahlms=interrupt_timer.lst -o interrupt_timer.o interrupt_timer.c
arm-elf-gcc -c -mcpu=arm7tdmi  -I . -DEL -DGCC   -mthumb-interwork -DLPC2148  -Os -    gdwarf-2 -Wall -Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch     -Wreturn-type  -Wa,-ahlms=interrupt_tacho.lst -o interrupt_tacho.o interrupt_tacho.c
arm-elf-ar cr lib_interrupt.a interrupt_timer.o interrupt_tacho.o 
arm-elf-ranlib lib_interrupt.a
make[1]: Leaving directory `/cygdrive/c/armprojects/projekt/motor/interrupt'
rm -f .depend 
arm-elf-gcc -c -mcpu=arm7tdmi -mthumb-interwork -I./startup -DEL -DGCC -mthumb-interwork     -mthumb -DTHUMB_CSTART -DTHUMB_INTERWORK -mthumb-interwork -DLPC2148  -O0 -gdwarf-2 -Wall -    Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch -Wreturn-type      -Wa,-ahlms=main.lst -o main.o main.c
arm-elf-gcc -c -mcpu=arm7tdmi -mthumb-interwork -I./startup -DEL -DGCC -mthumb-interwork     -mthumb -DTHUMB_CSTART -DTHUMB_INTERWORK -mthumb-interwork -DLPC2148  -O0 -gdwarf-2 -Wall -    Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch -Wreturn-type      -Wa,-ahlms=proc1.lst -o proc1.o proc1.c
motor/motor_test.h:18: warning: 'duty1' defined but not used
motor/motor_test.h:19: warning: 'duty2' defined but not used
arm-elf-gcc -c -mcpu=arm7tdmi -mthumb-interwork -I./startup -DEL -DGCC -mthumb-interwork     -mthumb -DTHUMB_CSTART -DTHUMB_INTERWORK -mthumb-interwork -DLPC2148  -O0 -gdwarf-2 -Wall -    Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch -Wreturn-type      -Wa,-ahlms=proc2.lst -o proc2.o proc2.c
arm-elf-gcc -c -mcpu=arm7tdmi -mthumb-interwork -I./startup -DEL -DGCC -mthumb-interwork     -mthumb -DTHUMB_CSTART -DTHUMB_INTERWORK -mthumb-interwork -DLPC2148  -O0 -gdwarf-2 -Wall -    Wcast-align -Wcast-qual -Wimplicit -Wnested-externs -Wpointer-arith -Wswitch -Wreturn-type      -Wa,-ahlms=proc3.lst -o proc3.o proc3.c
arm-elf-gcc main.o proc1.o proc2.o proc3.o  startup/libea_startup_thumb.a     pre_emptive_os/pre_emptive_os.a LCD/lib_LCD.a interrupt/lib_interrupt.a -I./startup -    mcpu=arm7tdmi -mthumb-interwork -mthumb-interwork -nostartfiles -T     build_files/link_32k_512k_rom.ld -o main.elf -Wl,-Map=main.map,--cref
proc1.o: In function `procEx1':
/cygdrive/c/armprojects/projekt/motor/proc1.c:45: undefined reference to     `motorTest_test'
collect2: ld returned 1 exit status
make: *** [main.hex] Error 1

13:46:52 Build Finished (took 6s.46ms) 
```

如果您愿意，可以在以下位置查看我的存储库： [http ://dt3-robotlego-2012ht-white.googlecode.com/svn/branches/motor/Project12/](http://dt3-robotlego-2012ht-white.googlecode.com/svn/branches/motor/Project12/)

这是我的一些代码（相关部分）：
proc1.c

```
/*
 * proc1.c
 *
 *  Created on: 31 okt 2011
 *      Author: Tommy
 */

/*****************************************************************************
 * Process 1
 ****************************************************************************/
#include "pre_emptive_os/api/osapi.h"
#include "general.h"
#include "startup/lpc2xxx.h"
#include "startup/printf_P.h"
#include "startup/ea_init.h"
#include "startup/consol.h"
#include "startup/config.h"
#include "startup/framework.h"
#include "utils/utils.h"
#include "LCD/LCD.h"
#include "motor/motor_test.h"

extern long const delayshort;
extern long const delaylong;

extern tCntSem mutexLCD;

/*****************************************************************************
 * Function prototypes
 ****************************************************************************/
void LCD_clearDisplay(void);

/****************************************************************************/

void
procEx1(void* arg)
{
  tU8 error;

    for (;;) {  // QUESTION: why use for-loop?

        osSemTake(&mutexLCD, 0, &error);

        // REMARK: doesn't work at the moment... issues including runPwm()
        motorTest_test();

        osSemGive(&mutexLCD, &error);

        osSleep(100);
    }

}

void LCD_clearDisplay(void) {
    delay(delayshort);
    send_instruction(1);    //clears the display
    delay(delaylong);
    send_instruction(2);    //the cursor is moved to the first position
} 
```

motor_test.h

```
/******************************************************************************
 * Includes
 *****************************************************************************/
#include "motor.h"

/******************************************************************************
 * Defines
 *****************************************************************************/
#define TASK                9       // task 1 - use circulary loop
                                    // task 2 - use constant PWM signal
                                    // ...
#define RUN_SETPWM_IN_LOOP  1       // dictates whether setPwmDutyPercentx(tU32) should be run outside the "TASK conditional statement"

/*****************************************************************************
 * Global variables
 ****************************************************************************/
static tU32 duty1;
static tU32 duty2;

/******************************************************************************
 * Prototypes
 *****************************************************************************/
void motorTest_test();
void dev_run(tU32 duty1, tU32 duty2);
void pwm_motor_init();
void pwm_motor_run(tU32 duty1, tU32 duty2);
void change_mode(short mode); 
```

motor_test.c

```
#include "motor_test.h"

/******************************************************************************
 * Functions
 *****************************************************************************/
void motorTest_test() {
    init();
    dev_run(duty1, duty2);
}

// dev function - not used in release
// COMMENT: PWM signal is continuously generated when the setPwmDutyPercent(tU32) function is called, no need to endlessly iterate the calls
// EDIT:    seems like you need to iterate over the setPwmDutyPercent(tU32) functions afterall...
// COMMENT: the duty sets the speed of the motor driver
//          the value that can be set is 0-10000
//          a higher value means a lower speed, conversely a low value means a higher speed
void dev_run(tU32 duty1, tU32 duty2) {
    //wait 10 ms
    //delayMs(10);

    //wait 100 ms
    //delayMs(100);

    // COMMENT: try running without delays
    //          seems to work fine..

    while (1) {

        //set frequency value
        if (RUN_SETPWM_IN_LOOP == 1) {
            setPwmDutyPercent1(duty1);
            setPwmDutyPercent2(duty2);
        }

        //  delayMs(10);

        switch (TASK) {
        case 1: {
            //update duty cycle (0.00 - 100.00%, in steps of 0.10%)
            duty1 += 10;
            if (duty1 > 10000)
                duty1 = 0;
            break;
        }
        case 2: {
            duty1 = 0;
            duty2 = 8500;
            // COMMENT: slowest speed = 8500 duty
            //          fastest speed = 0    duty
            break;
        }
        case 3: { // left
            duty1 = 6000;
            duty2 = 8000;
            break;
        }
        case 4: { // right
            duty1 = 8000;
            duty2 = 6000;
            break;
        }
        case 5: {
            duty1 = 6000;
            duty2 = 6000;
            break;
        }

        case 6: {
            short delay = 1;
            short duty_vals = 6000;
            short section[3] = { 1, 0, 0 };

            if (section[0] == 1) {
                setMode1(MODE_FORWARD);
                setMode2(MODE_FORWARD);
                duty1 = duty_vals;
                duty2 = duty_vals;
                setPwmDutyPercent1(duty1);
                setPwmDutyPercent2(duty2);
                //delayMs(0);
                delay_millis(delay);
            }

            if (section[1] == 1) {
                setMode1(MODE_BRAKE);
                setMode2(MODE_BRAKE);
                setPwmDutyPercent1(duty1);
                setPwmDutyPercent2(duty2);
                delay_millis(delay);
            }

            if (section[2] == 1) {
                setMode1(MODE_REVERSE);
                setMode2(MODE_REVERSE);
                duty1 = duty_vals;
                duty2 = duty_vals;
                setPwmDutyPercent1(duty1);
                setPwmDutyPercent2(duty2);
                delay_millis(delay);
            }
            break;
        }
        case 7: {
            pwm_motor_init();
            duty1 = 6000;
            duty2 = 6000;

            //delayMs(10);
            delay_millis(10);

            pwm_motor_run(duty1, duty2);
            break;
        }
        case 8: {

            setMode1(MODE_FORWARD);
            setMode2(MODE_FORWARD);

            delay_millis(700);

            duty1 = 7000;
            duty2 = 7000;

            setMode1(MODE_REVERSE);
            setMode2(MODE_REVERSE);

            delay_millis(700);

            duty1 = 1000;
            duty2 = 1000;

            break;
        }

        case 9: {
            duty1 = 0;
            duty2 = 0;
            break;
        }

        }
    }
}

/*****************************************************************************
 * Temporary developer functions
 ****************************************************************************/
void pwm_motor_init() {
    setMode1(MODE_FORWARD);
    setMode2(MODE_FORWARD);

    delay_millis(10);
}

void pwm_motor_run(tU32 duty1, tU32 duty2) {
    setPwmDutyPercent1(duty1);
    setPwmDutyPercent2(duty2);

    while(1) {
        change_mode(MODE_FORWARD);
        change_mode(MODE_BRAKE);
        change_mode(MODE_REVERSE);
        change_mode(MODE_BRAKE);
    }
}

void change_mode(short mode) {
    setMode1(mode);
    setMode2(mode);
    delay_millis(10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:51:08.960

确保将所有 C 源代码`CSRCS`包含[在`makefile`](http://dt3-robotlego-2012ht-white.googlecode.com/svn/branches/motor/Project12/makefile). 然后构建系统将知道它也必须编译该文件，并将生成的对象包含到链接中。

# debugging - Firebug 跨步不会在下一行中断

> ID：14380111
> 
> 赞同：1
> 
> 时间：2013-01-17T13:24:36.660
> 
> 标签：debugging, firebug, breakpoints

我正在尝试在 Firebug 中调试 JavaScript，但到目前为止收效甚微。我在 Firebug 的 JavaScript 中每隔几行设置了几个断点。问题是我使用的任何**步骤按钮**都不会执行并在下一行停止。如果我理解正确，这是**跨步**按钮的功能。相反，发生的是我单击脚本的任何**步骤按钮都会停止执行。**如果我单击**Continue**也会发生同样的情况，但是如果我单击**Rerun**脚本似乎会执行完成，而不会在以后的断点处停止。

在使用不同脚本的几个飞蛾期间，我一直在尝试打开和关闭，但永远无法让它进入下一行。

我尝试使用 Chrome 并在那里工作，但我更愿意使用 Firebug，因为我更熟悉它。

我在 OS X 10.8.2 中使用 Firefox 18.0 和 Firebug 1.11.1。

我因无法使其正常工作而感到沮丧。有人可以帮忙吗？

示例代码：

```
<html>
     <body>
         <div>
         </div>
     </body>
</html> 
```

JavaScript：

```
$(function() {

    var a = 1;
    var b = 2;

    $('div').append('<span>' + a + ' + ' + b + ' = ' + (a + b) + '</span>');
}); 
```

这是一个[jsfiddle](http://jsfiddle.net/h4KgR/)示例。

# visual-studio-2010 - 将 TFS 上的签出文件从一台机器导入到另一台机器

> ID：14380112
> 
> 赞同：2
> 
> 时间：2013-01-17T13:24:43.683
> 
> 标签：visual-studio-2010, version-control, workspace

我在 TFS 上添加了新文件，并在我的旧工作区中签出了其他一些文件。现在我的机器换​​了，我想把这些文件放在我的新工作区。有什么方法可以将这些更改复制/导入到我的新工作区？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:32:32.460

您必须在旧工作站上签入更改或创建搁置集，然后在新计算机上获取最新信息。

[http://msdn.microsoft.com/en-us/library/ms181403(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms181403(v=vs.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:39.710

如果您仍然可以访问旧机器，您可以签入更改或将它们放在[搁置](http://msdn.microsoft.com/en-us/library/ms181404%28v=vs.100%29.aspx)集中（如果您不想签入以供所有人查看）。然后在您的新机器上执行获取最新版本（当您签入代码时）或取消对新机器的更改。

如果您无权访问旧机器，则这些更改不可用。在您签入或搁置之前，TFS 不会获取文件的更改版本。您必须考虑到它们已丢失且无法恢复。

如果您可以访问旧机器，但旧机器无法再访问 TFS，请将旧工作区复制到新机器，然后使用[比较文件夹](http://msdn.microsoft.com/en-us/library/bb385986%28v=vs.100%29.aspx)选项将您的更改合并到新工作区。

为了防止意外丢失您的更改，您可以安装一个[自动搁置您的更改](http://visualstudiogallery.msdn.microsoft.com/080540cb-e35f-4651-b71c-86c73e4a633d)的扩展。

# c++ - 尝试使用对另一个类的对象的引用

> ID：14380117
> 
> 赞同：1
> 
> 时间：2013-01-17T13:25:06.410
> 
> 标签：c++, oop, reference

我的问题是，我似乎无法通过引用另一个类来发送对象。我在网上查到这一点时运气不佳。如果可以，请检查我的来源，如果您有任何想法，请告诉我。TYIA-罗兰

我也收到这些错误

```
 error: field 'PgmClass' has incomplete type
 error: 'PgmClass' does not name a type
 error: expected ')' before 'thesource'
 error: 'm_hereitis' was not declared in this scope 
```

* * *

```
#include <iostream>
#include "pgmclass.h"
#include "inclobj.h"

int main()
{

    char catchcin[256];

    PgmClass wilko;

    wilko.addToSet( 7 );
    wilko.addToSet( 8 );
    wilko.addToSet( 9 );

    InclObj alpha( wilko );

    wilko.addToSet( 10 );
    wilko.addToSet( 11 );

    // This doesn't work
    alpha.eraseOne( 10 );

    // How can I get this to work using referances?

    std::cout << "Program Running." << std::endl;
    std::cin >> catchcin;

    return 0;
}

----------

#include <set>

class PgmClass  {

      public:
    int addToSet( int );
    bool eraseSet( int );
    std::set<int> m_userset;
};

int PgmClass::addToSet( int theint )    {

    m_userset.insert( theint );
}

bool PgmClass::eraseSet( int eraseint )  {

    m_userset.erase( eraseint );
}

----------

class InclObj   {

      public:
    InclObj( PgmClass );
    void eraseOne( int );

    PgmClass m_hereitis;
};

InclObj::InclObj( PgmClass thesource )    {

    m_hereitis = thesource;
}

void InclObj::eraseOne( int findint )    {

    m_hereitis.eraseSet( findint );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:42:55.497

您需要将 main 放在文件的末尾。（通常您在单独的 .h 文件中添加类 - 在另一个 .cpp 文件中添加实现 - 在使用该类之前包含您）。定义，成员作为参考：

```
class InclObj
{

      public:
            InclObj( PgmClass& );
            void eraseOne( int );

            PgmClass& m_hereitis;
};

InclObj::InclObj( PgmClass& thesource ) :  m_hereitis (thesource)
{

} 
```

这样做你承担了一些责任。`eraseOne()`例如，在原始对象被删除后不要使用。不要尝试添加类似的函数`InclObj::use_now_this_other_object(PgmClass& other_source)`，等等。但我假设你知道......</p>

# asp.net - 页面回发后如何在转发器数据项中循环

> ID：14380119
> 
> 赞同：3
> 
> 时间：2013-01-17T13:25:08.183
> 
> 标签：asp.net, c#-4.0, repeater

我在转发器中有一个按钮，我想在此按钮单击事件中循环输入转发器的数据项。这是我的代码：

```
 protected void btnPromotionButton_OnClick(object sender, EventArgs e)
    {
        try
        {
            foreach (RepeaterItem item in rptPromotionProducts.Items)
             {
               if (item.DataItem == null)
                {
                    continue;
                 }... 
```

这是我的中继器：

```
 <asp:Repeater ID="rptPromotionProducts" runat="server" OnItemDataBound="rptPromotionProducts_OnItemDataBound">
     <ItemTemplate>
        <li>
         <asp:HyperLink runat="server" ID="hlProduct" CssClass="product_image">
         <asp:Image runat="server" ID="imgWindow" />
           </asp:HyperLink>
              <div class="product_info">
              <h3>
               <a href="#">
                  <%# Eval("Name") %></a></h3>
                  </div>
                   <div>
                   <asp:Button ID="btnPromotionButton" runat="server" Text="Sepete Ekle" OnClick="btnPromotionButton_OnClick" />
                   </div>
                  </div>
              </li>
             </ItemTemplate>
        </asp:Repeater> 
```

item.DataItem 总是为空，但是中继器有行。是否可以在页面发布和返回后循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:46:18.097

类似的问题已经[在这里](https://stackoverflow.com/questions/3531531/asp-net-dataitem-of-datalist-is-null-after-postback)和[这里](https://stackoverflow.com/questions/3888856/dataitem-on-repeater-items-is-always-null)得到了回答。

这个问题的简短回答是否定的。回发后您无法访问 DataItem。

检索数据的替代方法是使用隐藏字段、链接到中继器的数据源或包含数据的会话对象。

# linq - Linq - 使用查找向下钻取

> ID：14380120
> 
> 赞同：2
> 
> 时间：2013-01-17T13:25:08.817
> 
> 标签：linq, join, lambda

我对 linq 完全陌生，需要帮助。这些是我的 poco 课程：

```
public class User {
   public User()
   {
      this.Profiles = new List<Profile>();
   }

   public Guid ID { get; set; }        
   public bool IsValid{ get; set; }       
   public virtual ICollection<Profile> Profiles { get; set; }
}

public class Profile {
   public Profile() {
      this.Users = new List<User>();
      this.Customers = new List<Customer>();
   }

   public Guid ID { get; set; }
   public string Name { get; set; } 
   public virtual ICollection<User> Users { get; set; }
   public virtual ICollection<Customer> Customers { get; set; }
}

public class Customer {
   public Customer()
   {
      this.Profiles = new List<Profile>();
   }

 public Guid ID { get; set; }
 public string Number { get; set; }       
 public virtual ICollection<Profile> Profiles { get; set; }
} 
```

我想搜索有特殊客户的有效用户。特殊客户将来自另一个用户。所以我会发送另一个用户作为方法参数。

是否甚至可以使用 linq 或者我需要存储过程来解决问题？

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:09:25.127

你可以试试这个：

```
public static List<User> FindAllUsersBySameCustomers(User sourceuser)
{
    var res = sourceuser.Profiles.SelectMany(p => p.Customers)
                                 .SelectMany(c => c.Profiles)
                                 .SelectMany(p => p.Users)
                                 .Distinct();
    return res.ToList();
} 
```

[但请注意，只有在我的示例中填充（包含）您的](http://ideone.com/03qPox)关系时，它才会起作用。

*笔记*

*您不应该在构造函数中调用虚拟成员。*Anwer 在这里：[构造函数中的虚拟成员调用](https://stackoverflow.com/questions/119506/virtual-member-call-in-a-constructor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:26:33.077

试试这个..

```
/// <summary>
    /// Search for valid Users with special customers. 
    /// Special customers would come from another user. 
    /// So I would send another user as method argument.
    /// </summary>
    /// <returns></returns>
    public List<User> FindValidUsersWithSpecialCustomers(List<User> allUsers, User anotherUser)
    {   
        var specialCustomers = anotherUser.Profiles.SelectMany(aProfile => aProfile.Customers);//.Select(cust => cust.Number == "SpecialCustomerNumber" && cust.ID == new Guid("SpecialCustomerGuid"));

        Func<IEnumerable<Customer>, IEnumerable<Customer>, Boolean> IsSpecialCustomersPresentInThisCustomersList =
            delegate(IEnumerable<Customer> customerList, IEnumerable<Customer> specialCustomersList)
            {
                if ((from cust in customerList where specialCustomersList.Contains(cust) select cust).Any())
                    return true;
                else
                    return false;
            };

        var validUsersWithSpecialCustomers = (from user in allUsers where user.IsValid && IsSpecialCustomersPresentInThisCustomersList(user.Profiles.SelectMany(p => p.Customers), specialCustomers) select user);

        return validUsersWithSpecialCustomers.ToList();
    } 
```

# razor - 无论站点的入口点如何，都希望使用 List 初始化每个视图

> ID：14380121
> 
> 赞同：1
> 
> 时间：2013-01-17T13:25:17.230
> 
> 标签：razor, asp.net-mvc-4, shopping-cart

我有一个购物篮，其中包含用户选择的项目并存储在会话变量中。我希望在每个视图上显示关于篮子状态的各种值，即篮子：1，但我只能看到如何将其传递给单个入口点的视图。我将如何使用此列表初始化每个视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:50:15.527

[`child action`](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)你可以在你的布局中渲染一个。子动作的想法是它可以与主动作并行执行一些逻辑。

例如，您可以拥有以下控制器：

```
public class ShoppingBasketInfoController: Controller
{
    [ChildActionOnly]
    public ActionResult Index()
    {
        var model = Session["info"] as ShoppingInfoViewModel;
        return PartialView(model);
    }
} 
```

然后你就会有一个对应的局部视图（`~/Views/ShoppingBasketInfo/Index.cshtml`）：

```
@model ShoppingInfoViewModel
<div>
    You have @Html.DisplayFor(x => x.NbProducts) in your basket
</div> 
```

然后你可以在你的布局中找到一个合适的地方来呈现这个动作：

```
@Html.Action("Index", "ShoppingBasketInfo") 
```

现在，您的所有视图都将在指定位置显示此信息，而无需担心此信息来自何处、如何存储或使用什么视图模型。主要动作完全独立。

我用`[ChildActionOnly]`属性修饰了子操作，以确保永远不会通过来自客户端的正常 HTTP 请求访问此操作，例如`/ShoppingBasketInfo/Index`. 它只能在主要执行动作的上下文中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:01:17.543

您最好的选择可能是基本控制器、基本视图模型、接口和动作过滤器的组合。

```
// Interface.  To be implemented by model and controller.
public interface IHoldABasket 
{
    Basket Basket { get; set; };
}

// Base view model.  Has a basket as public property.
public BaseBasketViewModel : IHoldABasket 
{
      public Basket Basket { get; set; }
}

// Base controller model.  Also has a basket.
public BaseController : Controller, IHoldABasket 
{
   public Basket Basket { get; set; }

   public BaseController() 
   {
       AttemptBasketLoad();
   }

   private void AttemptBasketLoad()
   {
       // Replace the SomeMethodToLoadBasket with whatever method you use
       // to retrieve a basket.
       Basket = SomeMethodToLoadBasket();
   }
}

// Action Filter
public class BasketAwareAttribute : ActionFilterAttribute 
{
   public override void OnActionExecuted(ActionExecutedContext filterContext)
   {
        // If controller can hold basket AND model can hold basket
        if (filterContext.Controller is IHoldABasket 
            && filterContext.Controller.ViewData.Model is IHoldABasket)
        {
            // Copy basket from controller into model.
            // Will now be accessible through Basket property on model.
            ((IHoldABasket)filterContext.Controller.ViewData.Model)
               .LoggedInUser
                = ((IHoldABasket)filterContext.Controller).LoggedInUser;

        }

        base.OnActionExecuted(filterContext);
   }
} 
```

这就是排序的基础设施。让我们看一个实际的例子。您可能有一个 ProductListViewModel。那应该从基本视图模型类继承。

首先，确保您的 ProductListViewModel 继承自 BaseBasketViewModel。

```
public class ProductListViewModel : BaseBasketViewModel 
{
} 
```

由于继承，您的视图模型包含一个篮子对象并实现 IHoldABasket 接口。

您的控制器将从 BaseController 继承。

```
public class ProductController : BaseController 
{

} 
```

控制器方法如下所示。

```
[BasketAware]
public ViewResult Products(int page = 1) 
{
   // Load VM that implements IHoldABasket
   // Really contrived, I know... :P

   var vm = new ProductListViewModel() { Results = productServices.Search() };

   return View(vm);
} 
```

应该是这样的。幕后发生的事情是

*   基本控制器尝试加载一个篮子，如果找到一个则将其存储
*   Controller 和 Model 继承了一个通用接口，使得从控制器到模型的自动复制更容易实现。
*   动作过滤器在最后一分钟加载。如果控制器和模型都可以容纳一个篮子（例如两个工具`IHoldABasket`），则篮子从控制器复制到模型。
*   从 BaseBasketViewModel 派生的所有视图模型都将具有一个名为 Basket 的公共属性。

# jquery - 如何制作一个让页面在特定时间上线的计时器？

> ID：14380123
> 
> 赞同：-3
> 
> 时间：2013-01-17T13:25:21.547
> 
> 标签：jquery, countdowntimer

我们想隐藏我们的内容，直到某一天的午夜；在那之后，我们想将 iframe 显示为某种形式。如何做到这一点？我想知道您是否会结合使用 jQuery 倒计时插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:30:09.910

唯一合适的解决方案是检查服务器端，因为任何带有计时器的东西都可以在客户端（相对）轻松地进行操作。

它应该类似于以下内容（伪代码）：

服务器端脚本：

```
// normal stuff

if (servertime == your desired time){
      // include the special codez
      // It's probably best to have that iframe content in a separate file
      // and just import the file here
}

// more normal stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:16.737

做客户端并没有对用户隐藏太多......

但这是一个非常基本的算法，我在这里写客户端..你可以使用javascript的`settimeout（）'...

```
function TestTime(reqTime) {
 var date=new Date();
 if(date.getHours()===reqTime.getHours() && date.getMinutes()===reqTime.getMinutes()) { // you may need to add other validations like date etc
   //on success either redirect to other page or show the hidden content 
   location.href=""//the redirected page may need to validate on server side
   $('div').show() // show content
} else {
  $('div').html('Some content'); //you can show counter kind of thing here
  window.setTimeout(TestTime, 1000, true);

}
} 
```

# linux - 从目录中的所有文件中删除包含字符串的行

> ID：14380124
> 
> 赞同：1
> 
> 时间：2013-01-17T13:25:23.280
> 
> 标签：linux, string, grep, match

我的服务器感染了恶意软件。我已将我的 Linux 服务器升级到最新版本，并且没有新文件被感染，但我现在需要清理所有文件。

我可以找到执行以下操作的所有文件：

```
grep -H "gzinflate(base64_decode" /home/website/data/private/assets/ -R | cut -d: -f1 
```

但是，我现在想删除`gzinflate(base64_decode`每个文件中包含的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:30:49.877

我会`sed -i '/gzinflate(base64_decode/d'`用来删除文件中的那些匹配行：

```
... | xargs -I'{}' sed -i '/gzinflate(base64_decode/d' '{}' 
```

注意：您确实希望仅使用`grep -Rl`not `grep -RH .. | cut -d: -f1`as`-l`列出匹配的文件名，因此您不需要通过管道传输到`cut`.

警告：你真的应该关心这里更深层次的安全问题，我现在根本不相信这个系统，你不知道哪些后门打开了，哪些文件可能仍然被感染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:28:11.310

一旦你使用你的命令得到这些文件

```
 grep -H "gzinflate(base64_decode" /home/website/data/private/assets/ -R | cut -d: -f1 
```

您逐个循环文件​​并使用 grep -v "gzinflate(base64_decode" file > newfile

# iphone - iPhone中xtify中的推送通知

> ID：14380126
> 
> 赞同：1
> 
> 时间：2013-01-17T13:25:27.237
> 
> 标签：iphone, xcode, ios6, xtify

在我的应用程序中，我必须使用 Xtify 进行推送通知。

> [http://developer.xtify.com/display/sdk/Download+the+Xtify+SDKs](http://developer.xtify.com/display/sdk/Download+the+Xtify+SDKs) 使用这个我下载 ios sdk 并注册我的应用程序并获得我的 AppKey 并在**XtifyGlobal.h中替换它**

现在，之后我在目标菜单中创建了一些与我的应用程序相关的通知。![在此处输入图像描述](../Images/7fe6a5988fc193e040c5cf90f26409b5.png) 我的问题是我在收件箱选项卡中成功收到了消息，如图所示，并在应用程序图标上获得了徽章。但是在收到消息时我没有收到任何声音或通知。我的错误是什么，或者我为 xtify 所做的是否正确？

请指导我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T07:32:22.173

经过长时间的努力，我解决了我的问题。

我的问题只是因为我上传了错误的证书。

> 我提取 iPhone Developer 证书而不是 Apple Development ios push 证书并上传。

更改并再次上传后，我收到了通知和消息。

希望这会对某人有所帮助。

# ms-access - Access 2007 - 当前事件代码不显示当前记录但显示下一条记录

> ID：14380131
> 
> 赞同：0
> 
> 时间：2013-01-17T13:25:44.137
> 
> 标签：ms-access

我有一个奇怪的问题，我希望有人能解释一下。在表单的当前事件中，我有以下代码：

```
Me.lblDateRange.Caption = "Between " & DateAdd("yyyy", -3, Forms!frmContainer.subDiagnosis.Form!txtDateOfDiagnosis) & " and " & Forms!frmContainer.subDiagnosis.Form!txtDateOfDiagnosis & "" 
```

基本上标签需要显示用户必须查阅的三年日期范围。一开始它工作得很好，但后来我开始收到一条错误消息。做了一些改变，尝试了不同的方法。现在，上面的代码正在计算并显示一个没有错误消息的日期范围，但日期始终是一个记录，因此记录 2 显示的日期范围实际上是记录 3 的日期范围，依此类推。我试过添加：

```
Me.Repaint 
```

在此行之后，但没有什么不同，尽管如果您实际单击工具栏上的全部刷新按钮，则会显示正确的日期范围。任何想法如何排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:51:10.567

如果表单绑定到表格，最好使用 dlookup 函数来检索您的日期。Dlookup 不会遇到围绕表单状态的任何问题。

# spring - 如何将 Spring 托管的 SessionCustomizer 放入 EclipseLink 配置中

> ID：14380133
> 
> 赞同：0
> 
> 时间：2013-01-17T13:25:50.777
> 
> 标签：spring, eclipselink, spring-orm

我在一个春季项目中使用 eclipselink。我的配置的一个必要部分是配置我的 id-generator 的 SessionCustomizer（Twitter 的 Snowflake）。

**是否可以使用 spring 处理此定制器的创建，以便我可以使用依赖注入并使用属性占位符？**

我为定制器找到的唯一示例总是在持久性 xml 中配置类。

到目前为止，这是我的配置：

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="platform.auth-service" />
    <property name="jpaDialect" ref="jpaDialect" />
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
    <property name="jpaPropertyMap" ref="jPAPropertyProviderMap" />
</bean>
<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
    <property name="generateDdl" value="${database.generateTables}" />
    <property name="databasePlatform" value="${database.platform}" />
</bean>
<bean id="entityManager" class="org.springframework.orm.jpa.support.SharedEntityManagerBean">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<bean id="jpaDialect" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaDialect" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:30:29.053

虽然`@Configurable`来自 spring-aop（AspectJ 集成）的注释本来是一个解决方案，但我决定用一个静态类来解决我的问题，我用一个bean`SequenceHolder`存储序列。`SequenceInstaller`

最后`SessionCustomizer`将存储的序列安装在持久化上下文工厂中。

我必须配置工厂和安装程序之间的依赖关系，否则 spring 可能在安装程序之前处理了工厂。

# c - 匹配 C 中的二进制模式

> ID：14380143
> 
> 赞同：8
> 
> 时间：2013-01-17T13:26:16.077
> 
> 标签：c, binary, pattern-matching, bitmask

我目前正在开发一个需要解析一些定制数据结构的 C 程序，幸运的是我知道它们的结构，但是我不确定如何在 C 中实现我的解析器。

每个结构的长度都是 32 位，每个结构都可以通过它的二进制签名来识别。

例如，有两个我感兴趣的特定结构，它们具有以下二进制模式（x 表示 0 或 1）

```
 0000-00xx-xxxx-xxx0
 0000-10xx-10xx-xxx0 
```

在这些结构中，“x”位包含我需要的实际数据，因此基本上我需要一种基于位在每个结构中的写入方式来识别每个结构的方法。

以伪代码为例：

```
if (binaryPattern = 000010xxxxxxxxx0) {
do something with it;
} 
```

我猜想将它们读取为整数，然后执行某种位掩码将是可行的方法，但我对 C 的了解不是很好，也许一个简单的逻辑 OR 操作就可以做到，但我只是想要一些在我开始之前这样做的建议。

谢谢

非常感谢所有回答的人，非常有帮助！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:36:54.177

要检查您的数据是否与特定的二进制模式匹配，您可以首先屏蔽非签名位，然后将其与签名模板进行比较。

例如，要检查您的数据是否与 0000 10xx 10xx xxx0 签名匹配：

1.  将您的输入数据与 1111 1100 1100 0001 （掩码）
2.  检查输出是否等于 0000 1000 1000 0000 （模板）

用一些示例数据来说明：

```
DATA_1   0010 1011 1101 1100                DATA_2   0000 1011 1010 1100
  MASK   1111 1100 1100 0001  &               MASK   1111 1100 1100 0001  &
        --------------------                        --------------------
         0010 1000 1100 0000 (NO_MATCH)              0000 1000 1000 0000 (MATCH)
        --------------------                        -------------------- 
```

因此，您的每个规则都可以由一个掩码模板对表示，您所需要的只是一个函数/操作，它将上述操作应用于您的数据以检查它是否匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:37:36.893

顺便说一句，您只显示了 16 位模式，而不是 32 位...

无论如何，您可以只定义表示您感兴趣的模式部分的掩码。用你的值和掩码执行按位与，如果结果是测试模式，你已经找到了你想要的。

```
#define PATTERN1 0x0000
#define MASK1 0xfc01

#define PATTERN2 0x0880
#define MASK2 0xfcc1

if ((value & MASK1) == PATTERN1) {
  // have pattern 1
}
else if ((value & MASK2) == PATTERN2) {
  // have pattern 2
} 
```

如果您有更多模式，显然最好将模式和掩码放在一个表格中并循环遍历它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:38:59.413

你需要的是一个二进制 AND (&)

```
if( (value & matchPattern) == matchPattern ) {
   // do something with it.
} 
```

正如你所说的是 32 位，所以我假设你使用类似 uint32_t 的东西。如果是这种情况，您可能会遇到这样的情况：

```
uint32_t value = 0xF0F0ABCD;
//                            0xFOF0XXXD X = data
uint32_t const matchPattern = 0xF0F0000D;
if( (value & matchPattern) == matchPattern) {
     uint32_t use = value & 0x0000FFF0; // extracts the XXX part
} 
```

等等

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:37:50.817

我认为您可以对它们进行位掩码，将 1 放在您有指定位的位置，当该位无关紧要时放置 0。
例子：

```
000000xxxxxxxxx0    000010xx10xxxxx0
1111110000000001    1111110011000001 
```

然后将这个 secondo 模式与 & 按位运算一起使用，并将其与您需要的值进行比较（只需将 x 置零）。
第二种模式的示例应该是：

```
if( (value&0b1111110011000001)== 0b0000100010000000){
     //pattern found
} 
```

# php - Gson解析路径元素抛出异常

> ID：14380149
> 
> 赞同：0
> 
> 时间：2013-01-17T13:26:31.213
> 
> 标签：php, android, json, gson

我在我的 android 应用程序中解析 JSON 字符串时遇到问题。我正在尝试从位于我网站上的数据库中接收一些数据。执行此请求的 php 脚本将数据库中查询的数据编码为 JSON 字符串。这个字符串的一个例子是：

```
{"file0":["name":"intro.wmv","path":"C:\\Temp","bla":"0"],"file1":["name":"video.‌​avi","path":"C:\\Temp","bla":"0"]} 
```

这个文件是一个 FILE 类型的元素数组，它具有一些属性，如“文件名”、“文件夹路径”。一旦我在我的 android 应用程序中收到这个字符串，当我尝试使用 GSON 解析它时：

```
Type listType = new TypeToken<ArrayList<MyFiles>>() {}.getType();
List<MyFiles> yourClassList = new Gson().fromJson(sResponse, listType); 
```

它引发异常。“文件夹路径”属性出现问题，因为如果我从 JSON 字符串中删除它，一切顺利！问题可能是由于反斜杠字符 '\' ...

以前有人遇到过这个问题？？你有任何提示来解决这个问题吗？？？

提前感谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:34:40.777

我不明白如何`["intro.wmv","C:\\Temp","0"]`匹配`MyFile`对象。您应该指定字段名称而不是数组中的值。例如`{"fileName":"intro.wmv","path","C:\\Temp","size":"0"}`

# java - Java：用于解析正负双精度的正则表达式

> ID：14380153
> 
> 赞同：0
> 
> 时间：2013-01-17T13:26:41.653
> 
> 标签：java, regex

我正在尝试从一行文本中解析双打。我发现了几行我认为正在做我想做的事情的代码。但是，我发现它不会解析负双打（只会将它们解析为正）。我对正则表达式完全陌生，它有点压倒性。我想知道是否有人可以解释下面的代码并告诉我每个部分的含义，以及我将如何修改它以便解析正负双打？提前致谢！

```
double nextDouble;
Matcher matcher = Pattern.compile("(?!=\\d\\.\\d\\.)([\\d.]+)").matcher(line);
if (matcher.find()) nextDouble = Double.parseDouble(matcher.group(1))); 
```

编辑：这是一条线的示例。“104.44518717、34.09785265、103.39288764、0.09813121、0.00000000、-0.46612322、4.68576504”

它将 -0.46612322 解析为 0.46612322。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:47:16.740

你的表达有两个部分。

括号中的第一部分是确保匹配的字符串前面没有数字和点。如果您提供有帮助的示例行，则不确定您为什么需要该部分。

括号中的第二部分是匹配部分。那只是说匹配1个或多个数字和点。

如果您想让您的表达式使用负数，您只需将“-”字符添加到匹配集中即可。

```
(?!=\\d-\\.)([-\\d\\.]+) 
```

但这以及您的表达式将匹配具有多个点（点）的字符串。例如 122.12.12

所以我建议你尝试以下方法。请注意，我删除了第一部分。

```
(-?(\\d)+(\\.)?(\\d)*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:28:37.673

尝试使用以下正则表达式：

```
(-?\\d+\\.\\d+) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T11:12:33.627

试试这个：

```
"((\\d+\\.?\\d*)|(\\.\\d+))(([Ee][+-]?)?\\d+)?" 
```

# php - Symfony2：未找到基表或视图：1146

> ID：14380154
> 
> 赞同：10
> 
> 时间：2013-01-17T13:26:52.353
> 
> 标签：php, mysql, symfony, doctrine-orm

# 问题

嗨，我正在和一个朋友一起做 Symfony2 项目。他在基于 Windows 的计算机上工作，而我在我的 Mac 上。我们设置项目并在他的计算机上创建数据库模型/实体（代码优先）。现在我也想开始处理它，所以我们对我的本地主机做了一个 SQL 哑巴。我编辑了 parameters.yml 以匹配我的设置。项目可以连接到服务器。但是当我尝试打开使用数据库的页面时我收到此错误：

> 执行 'SELECT t0.id AS id1, t0.name AS name2, t0.bigimage AS bigimage3, t0.smallimage AS smallimage4, t0.info AS info5, t0.city_id AS city_id6 FROM District t0'时发生异常：
> 
> SQLSTATE [42S02]：未找到基表或视图：1146 表“socialgeogroep6.District”不存在 500 内部服务器错误 - DBALException 1 链接异常：PDOException »

需要明确的是，该页面在他的计算机上运行正常；他得到了应有的数据。

# 问题

可能是什么问题？我一遍又一遍地查看我的 PHPmyAdmin，数据库中包含所有字段和数据......
（屏幕： http: [//gyazo.com/4a0e5f1ee6b1e29d2d277df5fc0d8aac](http://gyazo.com/4a0e5f1ee6b1e29d2d277df5fc0d8aac)）我真的无法想象问题出在哪里。

我希望有人可以帮助我们！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T13:33:27.057

这很可能是一个案例问题。您的数据库中有该`district`表，但教义要求该`District`表。

您应该将教义配置为使用小写表名。请参阅学说文档[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#persistent-classes](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/basic-mapping.html#persistent-classes)以了解如何执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-04T09:17:19.850

我只是遇到了完全相同的问题，因为我在 Windows 上编写代码，我需要在 linux 上部署。

解决方案是在 config.yml 中添加以下行：

```
doctrine:
    orm:
        naming_strategy: doctrine.orm.naming_strategy.underscore 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-18T14:22:02.650

这适用于我在 symfony 2.7 中。只需放入 config.yml：

```
doctrine:
    # ...
    orm:
        # ...
        entity_managers:
            default:
                naming_strategy: doctrine.orm.naming_strategy.underscore 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:32:38.850

表名大小写问题

```
socialgeogroep6.District 
```

它应该按照`socialgeogroep6.district`屏幕截图。检查实体注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T16:32:58.153

请注意：在阅读此解决方案之前。**对于那些试图建立框架的人来说，这严格来说是一个解决方案。**

我认为既然你刚刚开始尝试，你可以做的是，删除数据库，然后重新开始一切。

```
 - mysql -uroot -proot
 - show databases;
 - drop database <dbname>; 
```

然后，重新创建表。

```
 - app/console doctrine:database:create 
 - app/console doctrine:schema:create 
```

**请注意，如果您已经创建了控制器并且已经填充了数据，那么在生产环境中执行此操作可能是一个非常糟糕的主意。**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-25T14:51:50.903

如果你使用 Orm，你可以这样设置

区.orm.yml

```
Project\Bundle\DuterteBundle\Entity\Vp:
  type: entity
  table: district//note the lowercase
  repositoryClass: Project\Bundle\DuterteBundle\Repository\VpRepository 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-04-06T07:51:41.100

可能会错过添加单数表名对象。

```
<?php
namespace App;

use Illuminate\Database\Eloquent\Model;

class Mapping extends Model
{

     protected $table = 'mapping';
    /**
     * The attributes that are mass assignable.
     *
     * @var array
     */
    protected $fillable = [
        'user_id', 'mapping', 'name'
    ];
} 
```

# plone - 尝试生成 PDF 时使用 zopyx.smartprintng.plone 收到“[Errno 111] Connection denied”

> ID：14380156
> 
> 赞同：1
> 
> 时间：2013-01-17T13:27:01.323
> 
> 标签：plone, zope, buildout, ploneformgen

## 概述

一位客户联系我们，要求当他们在其网站上填写表格（使用 PloneFormGen 创建）时，他们希望将表格的输入以 PDF 格式发送给客户（然后必须将转换后的表格打印、签名并发送回顾客）。

我跳上 Plone.org IRC 房间，问那里的人，他们建议我使用`zopyx.smartprintng.plone`插件。这看起来很完美，因为他们有一个用于 PloneFormGen 的脚本适配器示例，我可以使用它来将表单输入转换为 PDF 文件。

附加组件的文档在此页面上：

[http://docs.produce-and-publish.com/#produce-publish-client-connector](http://docs.produce-and-publish.com/#produce-publish-client-connector)

接着我被告知我只需要安装“生产和发布客户端连接器”，我继续按照文档上的安装说明进行操作。

## 安装

构建安装进行得很好，它根本没有报告任何错误，我的构建完全反映了他们在该安装文档页面上所声明的内容。

但是我注意到，在 Plone 控制面板的“添加/删除附加组件”下，我看不到对这个附加组件的引用，从而阻止了我在我正在处理的特定站点上实际启用它。（我觉得这可能是我遇到的问题的原因，但我不知道如何解决它）。- 我查过了`portal_quickinstaller`，也不存在。

## 问题

根据附加`@@asPlainPDF`到您要呈现的页面的 URL 的文档，然后将为您呈现 PDF。

所以我`mysite.com/front-page/@@asPlainPDF`在浏览器中输入。

这样做后，我会收到以下回溯：

```
 Traceback (innermost last):
      Module ZPublisher.Publish, line 126, in publish
      Module ZPublisher.mapply, line 77, in mapply
      Module ZPublisher.Publish, line 46, in call_object
      Module zopyx.smartprintng.plone.browser.pdf, line 249, in __call__
      Module zopyx.smartprintng.plone.browser.pdf, line 85, in __call__
      Module zopyx.smartprintng.plone.browser.pdf, line 232, in __call2__
      Module zopyx.smartprintng.client.zip_client, line 192, in convertZIP2
      Module xmlrpclib, line 1224, in __call__
      Module xmlrpclib, line 1578, in __request
      Module xmlrpclib, line 1264, in request
      Module xmlrpclib, line 1292, in single_request
      Module xmlrpclib, line 1439, in send_content
      Module httplib, line 954, in endheaders
      Module httplib, line 814, in _send_output
      Module httplib, line 776, in send
      Module httplib, line 757, in connect
      Module socket, line 571, in create_connection
    error: [Errno 111] Connection refused 
```

如果您需要比这更多的信息，请告诉我从哪里得到它，我会提供给您。

我已经用谷歌搜索了这条`error: [Errno 111] Connection refused`消息，但要么是人们遇到了他们正在编写的 Python 程序的问题，要么是另一个名为`zopyx.smartprintng.lite`

但是我确实找到了这个线程：[https ://groups.google.com/forum/#!msg/plone-users/wCuO4RUIQk/VslwOXvs4XwJ](https://groups.google.com/forum/#!msg/plone-users/wCuO4RCUIQk/VslwOXvs4XwJ)

因此，正如一位用户建议我尝试安装`zopyx.smartprintng.server`但开始抱怨我的版本错误`zope.configuration`，并希望`>=3.8.0dev`将其固定`4.0.2`为我能找到的最新版本，然后它开始抱怨另一个附加组件，我得到了一些构建错误，然后将我的 Plone 服务器变砖（阻止客户端出现），我不得不从我制作的备份 buildout.cfg 重新运行 buildout，以便生成必要的 zope.conf 文件。

## 服务器信息

*   克隆 4.2.1.1 (4207)
*   CMF 2.2.6
*   佐普 2.13.16
*   Python 2.7.3（默认，2012 年 10 月 18 日，15:13:00）[GCC 4.6.3]

## 概括

1.  遵循这些安装说明：

    [http://docs.produce-and-publish.com/#produce-publish-client-connector](http://docs.produce-and-publish.com/#produce-publish-client-connector)

2.  `@@asPlainPDF`附加到 URL时收到上述尝试转换 PDF 的回溯

3.  尝试安装`zopyx.smartprintng.server`失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:39:58.720

Produce-and-publish 组件集确实*需要*设置服务器。您安装的 Plone 产品只是 Plone 和该服务器之间的集成点。

请按照[http://docs.produce-and-publish.com/server/installation.html](http://docs.produce-and-publish.com/server/installation.html)上的说明安装该*单独*的服务器（它可以有自己的构建）。

（如果您在安装时遇到问题，请随时在 Stack Overflow 上提出*新*问题，或在 Plone Users 邮件列表上提问，或[联系作者](http://www.produce-and-publish.com/contact)（可能需要您向 Zopyx 支付此类支持费用））。

# eclipse - 让从 Eclipse Marketplace 安装多个插件变得更简单？

> ID：14380159
> 
> 赞同：5
> 
> 时间：2013-01-17T13:27:10.670
> 
> 标签：eclipse, eclipse-plugin, eclipse-marketplace

我们发现，每次解压 Eclipse Juno SR1 的新副本时，都需要从 Eclipse Marketplace 安装多个插件（至少 egit 和 m2e-wtp）。

有没有一种简单的方法来告诉 Eclipse 这样做？也许是一个内部可用的伞式插件，它取决于市场或一个魔术文件复制到解压缩的发行版中？

仅限 Windows 就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T09:23:37.797

我可以想到两种简单的方法：

1.  打包您自己的 Eclipse 版本，其中包含您想要的所有插件和配置，并使用它而不是下载。如果您想要更多地控制安装，则存在有助于解决此问题的程序；[SDC](http://www.genuitec.com/sdc/)和[Yoxos](https://yoxos.eclipsesource.com/)

2.  使用 Eclipse 导向器。您将创建一个启动 Eclipse Director 的脚本，它会下载并安装您选择的插件。 [在此处阅读有关它的更多信息](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/p2_director.html)

3.  创建共享安装。只需下载并设置一次 Eclipse，然后每个人都可以使用相同的安装。[在这里阅读更多](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/multi_user_installs.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T09:09:19.363

还有一个额外的三分钟解决方案：从您现有的安装中，选择`File -> Export -> Install -> Installed software items to file`. 将生成的文件放在共享上，并在每次新安装中使用 File -> Import 下的相同菜单项将其导入。

这不像其他建议那样自动化，但是您现在每次安装只需执行一个手动步骤，而不是每个插件一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-27T07:57:23.343

创建目标平台并在目标平台下添加相应的更新站点。每次下载针对目标的新 Eclipse

* * *

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?pde version="3.8"?><target name="<product name>" sequenceNumber="2">
<locations>
<location path="${eclipse_home}" type="Directory"/>
<location includeAllPlatforms="false" includeConfigurePhase="true"     includeMode="planner"includeSource="true" type="InstallableUnit">
<unit id="org.apache.derby" version="10.5.1.1_v201108232300"/>
<unit id="org.apache.log4j" version="1.2.15.v201012070815"/>
<repository location="http://download.eclipse.org/tools/orbit/downloads/drops/R20120526062928/repository/"/>
</location>
</locations>
</target> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-10T21:06:04.840

请注意，一般来说，Kepler 可以更轻松地安装多个插件。当您单击软件的“安装”时，下一个屏幕有一个“安装更多”按钮，通常是“返回”按钮

# jquery - 有多个脚本时就绪函数的执行顺序

> ID：14380160
> 
> 赞同：0
> 
> 时间：2013-01-17T13:27:13.020
> 
> 标签：jquery

我的页面使用了许多 javascript 文件（在`<head>`标签内，它们都有一个 $(function(){...})

```
<head>
     <script type="text/javascript" src="jquery-1.7.min.js"></script>

     <script type="text/javascript" src="A.js"></script>
     <script type="text/javascript" src="B.js"></script>
      ...
     <script type="text/javascript" src="E.js"></script>
</head> 
```

所以我想知道的是：

1) 脚本 A 的就绪函数 ($(function(){....}) 是否会等到所有其余脚本加载完毕（A 到 E）？

2）所有就绪函数 的顺序是否**必须**`<head>`按照标签内文件的顺序执行（**例如**-A的第一个就绪函数......和E的最后一个就绪函数）？

我问所有这些的原因是因为脚本之间存在一些依赖关系。**所以只有在 A 的 ready 函数完成**后才需要执行 B 的 ready 函数，等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:30:15.117

这些`document.ready`函数将按照加载脚本的顺序执行。`console.log("a")`您可以通过输入`a.js`, `console.log("b")`in`b.js`等轻松测试这一点，并在加载页面时观察控制台。

当 DOM 加载时，它们将一个接一个地触发，其中包含脚本。所以 DOM 中的所有脚本都会在`document.ready`执行时被加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:34:35.780

1.)`document.ready`不会等待其他文件下载。它只等待`DOM`加载。

2.) 它会根据您放置脚本的顺序依次触发。

# linq - 如何在 OData 查询中使用 $filter

> ID：14380162
> 
> 赞同：0
> 
> 时间：2013-01-17T13:27:21.640
> 
> 标签：linq, wcf-data-services, odata, windows-store-apps

我在 Windows 8 商店应用程序中使用 OData 服务时遇到问题。

如果我这样做：

```
IEnumerable<vw_mobSurveyor> lstSurveyors =
    await ((DataServiceQuery<vw_mobSurveyor>)ODataContext.vw_mobSurveyor
        .AddQueryOption("$filter", "intSurveyorID eq " + intID.ToString()))
        .ExecuteAsync("GetByID").ConfigureAwait(false); 
```

它有效，URI 的结尾是：`/vw_mobSurveyor?$filter=intSurveyorID eq 1`. 如果我在浏览器中尝试，这个 URI 也可以工作，所以一切都很好。

但如果我这样做：

```
IEnumerable<vw_mobSurveyor> lstSurveyors = 
    await ((DataServiceQuery<vw_mobSurveyor>)ODataContext.vw_mobSurveyor
        .Where(s => s.intSurveyorID == intID))
        .ExecuteAsync("GetByID").ConfigureAwait(false); 
```

这会失败并出现客户端内部错误 4。它会为 URI 产生不同的结尾：`/vw_mobSurveyor(2)`当我在浏览器中尝试时，此 URI 失败，这就是代码生成它时失败的原因。

我已经阅读了这两个在生成的 URI 中应该是等效的：http: [//msdn.microsoft.com/en-us/library/ee622463.aspx#filtering](http://msdn.microsoft.com/en-us/library/ee622463.aspx#filtering)。

因为我想在将来传递一个 Linq 表达式，所以我需要让第二个版本工作。那么如何强制使用第二个版本才能`$filter`正常工作呢？

更新：使用 $filter 的工作代码的提琴手输出

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-Length: 1057
Content-Type: application/atom+xml;type=feed;charset=utf-8
Server: Microsoft-IIS/7.0
X-Content-Type-Options: nosniff
DataServiceVersion: 1.0;
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 18 Jan 2013 11:35:34 GMT

<?xml version="1.0" encoding="utf-8"?>
<feed xml:base="http://MYSERVER/TESTAPP%20V1/DataService.svc/"
xmlns="http://www.w3.org/2005/Atom"
xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <id>http://MYSERVER/TESTAPP%20V1/DataService.svc/vw_mobSurveyor</id>
  <title type="text">vw_mobSurveyor</title>
  <updated>2013-01-18T11:35:34Z</updated>
  <link rel="self" title="vw_mobSurveyor" href="vw_mobSurveyor" />
  <entry>
    <id>http://MYSERVER/TESTAPP%20V1/DataService.svc/vw_mobSurveyor(2)</id>
    <category term="SurveyProModel.vw_mobSurveyor" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
    <link rel="edit" title="vw_mobSurveyor" href="vw_mobSurveyor(2)" />
    <title />
    <updated>2013-01-18T11:35:34Z</updated>
    <author>
      <name />
    </author>
    <content type="application/xml">
      <m:properties>
        <d:intSurveyorID m:type="Edm.Int32">2</d:intSurveyorID>
        <d:vchName>Bob Green 2</d:vchName>
        <d:vchStatus>Surveyor</d:vchStatus>
      </m:properties>
    </content>
  </entry>
</feed> 
```

更新：失败代码的提琴手输出

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Content-Length: 824
Content-Type: application/atom+xml;type=entry;charset=utf-8
Server: Microsoft-IIS/7.0
X-Content-Type-Options: nosniff
DataServiceVersion: 1.0;
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 18 Jan 2013 11:33:30 GMT

<?xml version="1.0" encoding="utf-8"?>
<entry xml:base="http://MYSERVER/TESTAPP%20V1/DataService.svc/"
xmlns="http://www.w3.org/2005/Atom"
xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices"
xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
  <id>http://MYSERVER/TESTAPP%20V1/DataService.svc/vw_mobSurveyor(2)</id>
  <category term="SurveyProModel.vw_mobSurveyor" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme" />
  <link rel="edit" title="vw_mobSurveyor" href="vw_mobSurveyor(2)" />
  <title />
  <updated>2013-01-18T11:33:30Z</updated>
  <author>
    <name />
  </author>
  <content type="application/xml">
    <m:properties>
      <d:intSurveyorID m:type="Edm.Int32">2</d:intSurveyorID>
      <d:vchName>Bob Green 2</d:vchName>
      <d:vchStatus>Surveyor</d:vchStatus>
    </m:properties>
  </content>
</entry> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:36:04.243

看起来您正在查询视图；您是否在实体模型中设置了实体键属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T17:54:22.300

这似乎是 WCF 数据服务客户端中的一个错误。

乍一看，我在您提供的 Fiddler 跟踪中没有看到任何问题，但我会尝试在我的最后重现这一点，并为此提交一个内部错误。如果您有错误的**完整堆栈跟踪**，那将非常有帮助。

请注意：LINQ-to-URI 转换位在这里做的是正确的事情。如果一个`.Where`子句只检查实体的键值，我们通过直接通过其键查找实体（即../vw_mobSurveyor(2)）而不是使用该`$filter`机制来优化查询。这将导致输入响应有效负载而不是提要，这与您从 Fiddler 获得的内容相匹配。

`$filter`为了回答您的原始问题，您可以通过使谓词涉及除实体键之外的任何内容来强制使用 LINQ 翻译器。例如，您可以执行以下操作：

```
.Where(s => s.intSurveyorID == intID && true) 
```

这显然是一个黑客，但它应该工作。理想情况下，我们会找到并修复此错误，然后您可以使用看起来更正常的 Where 子句:)。

# ruby-on-rails - 如果条件与&&，是否有任何性能提升

> ID：14380165
> 
> 赞同：5
> 
> 时间：2013-01-17T13:27:46.547
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如果用户是所有者，我有条件检查删除和文章。

```
delete_article if user.owner? 
```

另一种方法是

```
user.owner? && delete_article 
```

选择其中任何一个有什么好处还是只是一种写作风格

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:34:59.993

性能不太可能成为该声明的问题。

第一个要好得多 - 更容易阅读。你未来的自己和其他将开始编写代码的人会感谢你的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:37:47.993

您可以使用这两种样式，但逻辑上存在一些差异。

在方法调用中使用：

```
def something
  delete_article if user.owner?
end 
```

将返回方法 delete_article 返回的任何内容，或者`nil`如果用户不是所有者。

和：

```
def something
  user.owner? && delete_article
end 
```

`false`如果用户不是所有者，它将返回。如果用户是所有者，它将返回方法 delete_article 返回的任何内容。

性能应该差不多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T15:10:05.227

这是一些测试`if`vs.速度的代码`&&`。

```
require 'benchmark'

n = 10_000_000

puts RUBY_VERSION, n
puts

Benchmark.bm(2) do |b|
  10.times do
    b.report('if') { n.times { true if true } }
    b.report('&&') { n.times { true && true } }
  end
end 
```

和输出：

```
1.9.3
10000000

        user     system      total        real
if   0.970000   0.000000   0.970000 (  0.975714)
&&   1.130000   0.000000   1.130000 (  1.127514)
if   0.950000   0.000000   0.950000 (  0.956892)
&&   1.120000   0.000000   1.120000 (  1.124547)
if   0.970000   0.000000   0.970000 (  0.962618)
&&   1.120000   0.000000   1.120000 (  1.129094)
if   0.960000   0.000000   0.960000 (  0.954498)
&&   1.120000   0.000000   1.120000 (  1.125080)
if   0.960000   0.000000   0.960000 (  0.954001)
&&   1.120000   0.000000   1.120000 (  1.126329)
if   0.950000   0.000000   0.950000 (  0.953360)
&&   1.130000   0.000000   1.130000 (  1.122664)
if   0.950000   0.000000   0.950000 (  0.951391)
&&   1.120000   0.010000   1.130000 (  1.123455)
if   0.980000   0.000000   0.980000 (  0.977263)
&&   1.120000   0.000000   1.120000 (  1.126989)
if   0.970000   0.000000   0.970000 (  0.966264)
&&   1.120000   0.000000   1.120000 (  1.123184)
if   0.960000   0.000000   0.960000 (  0.956702)
&&   1.120000   0.000000   1.120000 (  1.124589) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:29:46.927

我相信这两种写作风格都会有相同的表现。总是更喜欢第一个版本，因为它更容易阅读，虽然被认为是“hacky”和“hard-core”，但第二个版本实际上没有优化。

编辑：这是如何进行一些基准测试。似乎两个版本的性能确实相似：

```
limit = 10**7
time_val=Time.now;sum=0;(0..limit).each{|t| even?(t) && sum += t};puts Time.now - time_val

time_val=Time.now;sum=0;(0..limit).each{|t| sum += t if even?(t)};puts Time.now - time_val 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T13:35:04.450

他们应该有相同的性能，因为他们做同样的事情，或者至少可以忽略不计的性能差异。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T15:25:26.873

在性能方面，`if`更好，正如 Tin Man 所示。但有时，您需要编写 using`&&`或者`and`如果您想使其成为单行代码，例如主要部分包含要在条件中定义的非实例变量：

```
do_something_with(foo) if foo = something_that_comes_from_condition 
```

将返回错误，但是

```
(foo = something_that_comes_from_condition) && do_something_with(foo) 
```

或者

```
foo = something_that_comes_from_condition and do_something_with(foo) 
```

没有这样的问题。

# java - Hibernate 单向 OneToMany 删除违反约束（在父端 optional=false？）

> ID：14380167
> 
> 赞同：2
> 
> 时间：2013-01-17T13:27:57.453
> 
> 标签：java, hibernate, jpa-2.0, hibernate-mapping

我使用 Hibernate 3.6，我有这样的东西：

```
@Entity 
public class Parent { 
    @OnyToMany( fetch = FetchType.LAZY, cascade = { ascadeType.ALL } )   
    @Cascade( { org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.DELETE )   
    @JoinColumn( name="Parent_ID" )
    public List<Child> getChildren() { return children; }   
public void setChildren( List<Child> children ) { this.children = children; }
private transient List<TitleMetadataCategory> children;
...
 }

@Entity
public class Child {
....
} 
```

关联是单向的，有几个原因，我不想改变它。此外，孤儿不存在，因此存在 CHILD.PARENT_ID 不为空的 DB 约束。一切正常，除了删除孩子。当我做

`parent.getChildren().remove(child); session.saveOrUpdate(parent)`.

它失败。

因为我没有

```
@ManyToOne( optional=false ) 
```

在孩子方面，Hibernate 尝试使用 PARENT_ID=NULL 更新孩子，但由于 DB 约束而失败。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:40:48.240

你有没有尝试过

```
@JoinColumn(name = "Parent_ID", nullable = false) 
```

?

另外，请注意附加的实体是自动持久的。你不需要打电话`saveOrUpdate()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T13:43:19.997

JB Nizet 的答案是有效的，但有一个更正。由于我也有 Child.getParentId() 方法（不是 getParent() ），它的 Column 注释`nullable=false, insertable=false, updateble=false`除了`nullable=false, updatable=false`在 Parent.getChildren() 关联中还应该有参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:51:32.643

`Child`使用当前配置，当您从集合中删除它时，Hibernate 不知道必须将其删除`children`（这称为孤立删除）。你需要`@OneToMany(orphanRemoval=true)`在父母。`org.hibernate.annotations.CascadeType.DELETE`仅指定在删除整个父级时也应删除子级。

# wcf - 为什么在添加 [MessageContract] 属性后会收到 InvalidOperationException？

> ID：14380176
> 
> 赞同：0
> 
> 时间：2013-01-17T13:28:43.403
> 
> 标签：wcf, soap, hl7, contract

`The operation 'PRPA_IN201301UV02' could not be loaded because it has a parameter or return type of type System.ServiceModel.Channels.Message or a type that has MessageContractAttribute and other parameters of different types. When using System.ServiceModel.Channels.Message or types with MessageContractAttribute, the method must not use any other types of parameters.`

我在控制台主机上运行 WCF，这是合同：

```
[MessageContract]
public class opRequest
{
    [MessageBodyMember]
    public string myProperty;
}

[ServiceContract(Namespace = "urn:hl7-org:v3")]
public interface IHL7v3
{
    [OperationContract(Name = "PRPA_IN201301UV02", Action = "urn:hl7-org:v3:PRPA_IN201301UV02")]
    string PIXManager_PRPA_IN201301UV02(opRequest clientID);
} 
```

当我从 opRequest 类中删除`[MessageContract]`and`[MessageBodyMember]`

我完全不确定这是否能让我得到我需要的东西，所以我会给出更广泛的范围 - 我试图让 SOAP 主体没有参数名称的封闭标记。例如（从 SOAP 消息中提取的正文）而不是：

```
<s:Body>
<PRPA_IN201301UV02 xmlns="urn:hl7-org:v3">
  <clientID>the xml document is enclosed</clientID>
</PRPA_IN201301UV02> 
```

我希望它是这样的：

```
<s:Body>
<PRPA_IN201301UV02 xmlns="urn:hl7-org:v3">
  my given xml document will go here...
</PRPA_IN201301UV02> 
```

我需要这样才能符合标准（HL7v3 PIX Manager SOAP Web Service）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:36:29.303

看起来您也应该使用 MessageContract 作为您的返回参数

**已编辑：** 查看此 MSDN 文章了解更多详细信息[使用消息合同](http://msdn.microsoft.com/en-us/library/ms730255.aspx) 如果您使用消息设计合同，则不能将其他类型用作参数或返回值。

以下是文章中的代码片段：

```
[OperationContract]
bool Validate(BankingTransaction bt);
// Invalid, the return type is not a message contract.
[OperationContract]
void Reconcile(BankingTransaction bt1, BankingTransaction bt2);
// Invalid, there is more than one parameter. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:49:28.830

您是否尝试使用 an`XMLDocument`作为输入参数而不是`opRequest`？您还必须标记接口以使用 XML 序列化器：

```
[ServiceContract(Namespace = "urn:hl7-org:v3")]
[XmlSerializerFormat]
public interface IHL7v3
{
    [OperationContract(Name = "PRPA_IN201301UV02", Action = "urn:hl7-org:v3:PRPA_IN201301UV02")]
    XMLDocument PIXManager_PRPA_IN201301UV02(XMLDocument doc);
} 
```

我假设您也在返回 XML。

请注意，这是*完全开放*的- 可以发送任何可能不是您想要的 XML，因为没有明确的数据合同。

# php - 使用 PHP 从联系表发送的 4 份电子邮件副本

> ID：14380179
> 
> 赞同：1
> 
> 时间：2013-01-17T13:28:47.923
> 
> 标签：php, javascript, html

我刚刚设法使用 php 文件在我的网站模板上设置了一个联系表格，并在此处的论坛上提供了一些帮助，但现在我收到了我想要的电子邮件地址的电子邮件，但我收到了 4 个副本，这是一个与没有收到电子邮件相比有轻微的不便，但绝不会更少，我想解决它。

HTML 代码

```
<div class="grid_12">
<h2 class="">Send Message</h2>
<form id="contact-form2">
    <div class="success"> Contact form submitted! <strong>We will be in touch soon.</strong></div>
    <fieldset>
        <label class="name">
            <input type="text" value="Name">
            <span class="error">*This is not a valid name.</span>
            <span class="empty">*This field is required.</span>
            <span class="clear"></span>
        </label>
        <label class="email">
            <input type="text" value="E-mail">
            <span class="error">*This is not a valid email address.</span>
            <span class="empty">*This field is required.</span>
            <span class="clear"></span>
        </label>
        <label class="phone">
            <input type="text" value="Telephone">
            <span class="error">*This is not a valid phone number.</span>
            <span class="empty">*This field is required.</span>
            <span class="clear"></span>
        </label>
        <label class="message">
            <textarea>Message</textarea>
            <span class="error">*The message is too short.</span>
            <span class="empty">*This field is required.</span>
            <span class="clear"></span>
        </label>
        <div class="buttons"><span><a class="button" data-type="reset">reset</a></span><span><a class="button" data-type="submit">submit</a></span></div>
    </fieldset>
</form> 
```

PHP 代码

```
<?php
$owner_email = $_POST["owner_email"];
$headers = 'From:' . $_POST["email"];
$subject = 'A message from your site visitor ' . $_POST["name"];
$messageBody = "";

if($_POST['name']!='nope'){
    $messageBody .= '<p>Visitor: ' . $_POST["name"] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['email']!='nope'){
    $messageBody .= '<p>Email Address: ' . $_POST['email'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}else{
    $headers = '';
}
if($_POST['state']!='nope'){        
    $messageBody .= '<p>State: ' . $_POST['state'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['phone']!='nope'){        
    $messageBody .= '<p>Phone Number: ' . $_POST['phone'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}   
if($_POST['fax']!='nope'){      
    $messageBody .= '<p>Fax Number: ' . $_POST['fax'] . '</p>' . "\n";
    $messageBody .= '<br>' . "\n";
}
if($_POST['message']!='nope'){
    $messageBody .= '<p>Message: ' . $_POST['message'] . '</p>' . "\n";
}

if($_POST["stripHTML"] == 'true'){
    $messageBody = strip_tags($messageBody);
}

mail($owner_email, $subject, $messageBody, $headers);
?> 
```

Javascript代码

```
(function($){
$.fn.extend({
    forms:function(opt){
        if(opt===undefined)
            opt={}
        this.each(function(){
            var th=$(this),
                data=th.data('forms'),
                _={
                    errorCl:'error',
                    emptyCl:'empty',
                    invalidCl:'invalid',
                    notRequiredCl:'notRequired',
                    successCl:'success',
                    successShow:'4000',
                    mailHandlerURL:'mail/handler.php',
                    ownerEmail:'#',
                    stripHTML:true,
                    smtpMailServer:'localhost',
                    targets:'input,textarea',
                    controls:'a[data-type=reset],a[data-type=submit]',
                    validate:true,
                    rx:{
                        ".name":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                        ".state":{rx:/^[a-zA-Z'][a-zA-Z-' ]+[a-zA-Z']?$/,target:'input'},
                        ".email":{rx:/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i,target:'input'},
                        ".phone":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                        ".fax":{rx:/^\+?(\d[\d\-\+\(\) ]{5,}\d$)/,target:'input'},
                        ".message":{rx:/.{20}/,target:'textarea'}
                    },
                    preFu:function(){
                        _.labels.each(function(){
                            var label=$(this),
                                inp=$(_.targets,this),
                                defVal=inp.val(),
                                trueVal=(function(){
                                            var tmp=inp.is('input')?(tmp=label.html().match(/value=['"](.+?)['"].+/),!!tmp&&!!tmp[1]&&tmp[1]):inp.html()
                                            return defVal==''?defVal:tmp
                                        })()
                            trueVal!=defVal
                                &&inp.val(defVal=trueVal||defVal)
                            label.data({defVal:defVal})                             
                            inp
                                .bind('focus',function(){
                                    inp.val()==defVal
                                        &&(inp.val(''),_.hideEmptyFu(label),label.removeClass(_.invalidCl))
                                })
                                .bind('blur',function(){
                                    _.validateFu(label)
                                    if(_.isEmpty(label))
                                        inp.val(defVal)
                                        ,_.hideErrorFu(label.removeClass(_.invalidCl))                                          
                                })
                                .bind('keyup',function(){
                                    label.hasClass(_.invalidCl)
                                        &&_.validateFu(label)
                                })
                            label.find('.'+_.errorCl+',.'+_.emptyCl).css({display:'block'}).hide()
                        })
                        _.success=$('.'+_.successCl,_.form).hide()
                    },
                    isRequired:function(el){                            
                        return !el.hasClass(_.notRequiredCl)
                    },
                    isValid:function(el){                           
                        var ret=true
                        $.each(_.rx,function(k,d){
                            if(el.is(k))
                                ret=d.rx.test(el.find(d.target).val())                                      
                        })
                        return ret                          
                    },
                    isEmpty:function(el){
                        var tmp
                        return (tmp=el.find(_.targets).val())==''||tmp==el.data('defVal')
                    },
                    validateFu:function(el){                            
                        el.each(function(){
                            var th=$(this)
                                ,req=_.isRequired(th)
                                ,empty=_.isEmpty(th)
                                ,valid=_.isValid(th)                                

                            if(empty&&req)
                                _.showEmptyFu(th.addClass(_.invalidCl))
                            else
                                _.hideEmptyFu(th.removeClass(_.invalidCl))

                            if(!empty)
                                if(valid)
                                    _.hideErrorFu(th.removeClass(_.invalidCl))
                                else
                                    _.showErrorFu(th.addClass(_.invalidCl))                             
                        })
                    },
                    getValFromLabel:function(label){
                        var val=$('input,textarea',label).val()
                            ,defVal=label.data('defVal')                                
                        return label.length?val==defVal?'nope':val:'nope'
                    }
                    ,submitFu:function(){
                        _.validateFu(_.labels)                          
                        if(!_.form.has('.'+_.invalidCl).length)
                            $.ajax({
                                type: "POST",
                                url:_.mailHandlerURL,
                                data:{
                                    name:_.getValFromLabel($('.name',_.form)),
                                    email:_.getValFromLabel($('.email',_.form)),
                                    phone:_.getValFromLabel($('.phone',_.form)),
                                    fax:_.getValFromLabel($('.fax',_.form)),
                                    state:_.getValFromLabel($('.state',_.form)),
                                    message:_.getValFromLabel($('.message',_.form)),
                                    owner_email:_.ownerEmail,
                                    stripHTML:_.stripHTML
                                },
                                success: function(){
                                    _.showFu()
                                }
                            })          
                    },
                    showFu:function(){
                        _.success.slideDown(function(){
                            setTimeout(function(){
                                _.success.slideUp()
                                _.form.trigger('reset')
                            },_.successShow)
                        })
                    },
                    controlsFu:function(){
                        $(_.controls,_.form).each(function(){
                            var th=$(this)
                            th
                                .bind('click',function(){
                                    _.form.trigger(th.data('type'))
                                    return false
                                })
                        })
                    },
                    showErrorFu:function(label){
                        label.find('.'+_.errorCl).slideDown()
                    },
                    hideErrorFu:function(label){
                        label.find('.'+_.errorCl).slideUp()
                    },
                    showEmptyFu:function(label){
                        label.find('.'+_.emptyCl).slideDown()
                        _.hideErrorFu(label)
                    },
                    hideEmptyFu:function(label){
                        label.find('.'+_.emptyCl).slideUp()
                    },
                    init:function(){
                        _.form=this
                        _.labels=$('label',_.form)

                        _.preFu()

                        _.controlsFu()

                        _.form
                            .bind('submit',function(){
                                if(_.validate)
                                    _.submitFu()
                                else
                                    _.form[0].submit()
                                return false
                            })
                            .bind('reset',function(){
                                _.labels.removeClass(_.invalidCl)                                   
                                _.labels.each(function(){
                                    var th=$(this)
                                    _.hideErrorFu(th)
                                    _.hideEmptyFu(th)
                                })
                            })
                        _.form.trigger('reset')
                    }
                }
            if(!data)
                (typeof opt=='object'?$.extend(_,opt):_).init.call(th),
                th.data({cScroll:_}),
                data=_
            else
                _=typeof opt=='object'?$.extend(data,opt):data
        })
        return this
    }
})
})(jQuery)
$(function(){
    $('#contact-form').forms({ownerEmail:'#'});
    $('#contact-form2').forms({ownerEmail:'email@email.com'});
}) 
```

# jsf-2 - Primefaces dataExporter - 在没有页脚的新窗口中嵌入 PDF

> ID：14380180
> 
> 赞同：0
> 
> 时间：2013-01-17T13:28:48.827
> 
> 标签：jsf-2, primefaces

我正在尝试使用 Primefaces 的`dataExporter`组件。我有两个问题（目前）：

1.  在`datatable`我的列页脚中有一个`p:commandButton`. 发生在我身上的是，当我将数据表导出`dataExporter`到 PDF 时，我可以看到它在 PDF 中添加了列页脚并写了这样的内容：（我想`javax.faces.component.UIPanel@9e08b9`它只是称为）。有什么方法可以指示忽略列页脚吗？`toString``UIComponent``dataExporter`

2.  我想尝试以某种方式打开带有生成的 PDF 的新窗口，并在新页面上显示该 PDF 内联。我不会看到下载文件提示。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:46:55.100

经过一段时间的编码，我终于成功地完成了这项工作。Primefaces 不包含此功能，因此我必须稍微覆盖默认行为。

首先，我创建了自定义 PDFExporter 以跳过页脚打印：

```
import java.io.ByteArrayOutputStream;
import java.io.IOException;

import javax.faces.context.ExternalContext;
import javax.faces.context.FacesContext;

import org.primefaces.component.datatable.DataTable;
import org.primefaces.component.export.PDFExporter;

import com.lowagie.text.DocumentException;
import com.lowagie.text.pdf.PdfPTable;

public class CustomPDFExporter extends PDFExporter {

    @Override
    protected void addColumnFacets(DataTable table, PdfPTable pdfTable,
            ColumnType columnType) {
        if (columnType == ColumnType.HEADER) {
            super.addColumnFacets(table, pdfTable, columnType);
        }
    }

    @Override
    protected void writePDFToResponse(ExternalContext externalContext,
            ByteArrayOutputStream baos, String fileName) throws IOException,
            DocumentException {

        FacesContext.getCurrentInstance().getExternalContext().getSessionMap()
                .put("reportBytes", baos.toByteArray());
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap()
                .put("reportName", fileName);
    }

} 
```

如您所见，报表数据是在会话中添加的。

现在`DataExporter`应该重写 Primefaces：

```
import java.io.IOException;

import javax.el.ELContext;
import javax.el.MethodExpression;
import javax.el.ValueExpression;
import javax.faces.FacesException;
import javax.faces.component.StateHolder;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.event.ActionEvent;
import javax.faces.event.ActionListener;
import javax.servlet.ServletContext;
import javax.servlet.http.HttpServletRequest;

import org.primefaces.component.datatable.DataTable;
import org.primefaces.component.export.CSVExporter;
import org.primefaces.component.export.Exporter;
import org.primefaces.component.export.ExporterType;
import org.primefaces.component.export.XMLExporter;
import org.primefaces.context.RequestContext;

import asw.iis.common.ui.beans.DatatableBackingBean;

public class CustomDataExporter implements ActionListener, StateHolder {

    private ValueExpression target;
    private ValueExpression type;
    private ValueExpression fileName;
    private ValueExpression encoding;
    private MethodExpression preProcessor;
    private MethodExpression postProcessor;
    private DatatableBackingBean<?> datatableBB;

    public CustomDataExporter() {}

    public CustomDataExporter(ValueExpression target, ValueExpression type, ValueExpression fileName, ValueExpression encoding,
            MethodExpression preProcessor, MethodExpression postProcessor, DatatableBackingBean<?> datatableBB) {
        this.target = target;
        this.type = type;
        this.fileName = fileName;
        this.encoding = encoding;
        this.preProcessor = preProcessor;
        this.postProcessor = postProcessor;
        this.datatableBB = datatableBB;
    }

    public void processAction(ActionEvent event) {
        FacesContext context = FacesContext.getCurrentInstance();
        try {
            datatableBB.stampaPreProcess();
            ELContext elContext = context.getELContext();

            String tableId = (String) target.getValue(elContext);
            String exportAs = (String) type.getValue(elContext);
            String outputFileName = (String) fileName.getValue(elContext);

            String encodingType = "UTF-8";
            if(encoding != null) {
                encodingType = (String) encoding.getValue(elContext);
            }

            try {
                Exporter exporter;
                ExporterType exporterType = ExporterType.valueOf(exportAs.toUpperCase());
                switch(exporterType) {
                case XLS:
                    exporter = new ExcelExporter();
                    break;

                case PDF:
                    exporter = new CustomPDFExporter();
                    break; 

                case CSV:
                    exporter = new CSVExporter();
                    break; 

                case XML:
                    exporter = new XMLExporter();
                    break;

                default:
                    exporter = new CustomPDFExporter();
                    break;
                }

                UIComponent component = event.getComponent().findComponent(tableId);
                if(component == null) {
                    throw new FacesException("Cannot find component \"" + tableId + "\" in view.");
                }

                if(!(component instanceof DataTable)) {
                    throw new FacesException("Unsupported datasource target:\"" + component.getClass().getName() + "\", exporter must target a PrimeFaces DataTable.");
                }

                DataTable table = (DataTable) component;
                exporter.export(context, table, outputFileName, false, false, encodingType, preProcessor, postProcessor);

                if ("pdf".equals(exportAs)) {
                    String path = ((ServletContext)(FacesContext.getCurrentInstance().getExternalContext().getContext())).getContextPath();
                    RequestContext.getCurrentInstance().execute("window.open('" + path + "/report.pdf', '_blank', 'dependent=yes, menubar=no, toolbar=no')");
                } else {
                    context.responseComplete();
                }
            } 
            catch (IOException e) {
                throw new FacesException(e);
            }
        }
        finally {
            ((HttpServletRequest) context.getExternalContext().getRequest()).removeAttribute("vrstaStampe");
            datatableBB.stampaPostProcess();
        }
    }

    public boolean isTransient() {
        return false;
    }

    public void setTransient(boolean value) {
    }

    public void restoreState(FacesContext context, Object state) {
        Object values[] = (Object[]) state;

        target = (ValueExpression) values[0];
        type = (ValueExpression) values[1];
        fileName = (ValueExpression) values[2];
        preProcessor = (MethodExpression) values[3];
        postProcessor = (MethodExpression) values[4];
        encoding = (ValueExpression) values[5];
        datatableBB = (DatatableBackingBean<?>) values[6];
    }

    public Object saveState(FacesContext context) {
        Object values[] = new Object[7];

        values[0] = target;
        values[1] = type;
        values[2] = fileName;
        values[3] = preProcessor;
        values[4] = postProcessor;
        values[5] = encoding;
        values[6] = datatableBB;

        return ((Object[]) values);
    }
} 
```

这里的主要工作是实例化`CustomPDFExporter`，并在报告类型为PDF时打开新窗口。

现在我编写了简单`Servlet`的方法来处理这个请求并打印报告数据：

```
import java.io.IOException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/report.pdf")
public class PdfReportServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws ServletException, IOException {
        byte[] b = (byte[]) req.getSession().getAttribute("reportBytes");
        if (b == null) {
            b = new byte[0];
        }
        resp.setContentType("application/pdf");
        resp.setContentLength(b.length);
        resp.getOutputStream().write(b);
        req.getSession().removeAttribute("reportBytes");
    }
} 
```

这将配置 HTTP 标头，并将报告字节打印到输出流。它还从会话中删除报告字节。

最后，当我从动态创建的菜单按钮处理这个打印时，我在代码中添加了这个动作监听器：

```
MenuItem item = ...;
ELContext el = FacesContext.getCurrentInstance().getELContext();
ExpressionFactory ef = FacesContext.getCurrentInstance().getApplication().getExpressionFactory();
ValueExpression typeEL = ef.createValueExpression(el, "#{startBean.reportType}", String.class);
ValueExpression fileEL = ef.createValueExpression(el, datasource, String.class);
ValueExpression targetEL = ef.createValueExpression(el, ":" + datatableId + ":datatableForm:datatable", String.class);
ValueExpression encodingEL = ef.createValueExpression(el, "ISO-8859-2", String.class);
CustomDataExporter de = new CustomDataExporter(targetEL, typeEL, fileEL, encodingEL, null, null, this);
item.setAjax(true);
item.addActionListener(de); 
```

# delphi - Delphi 安装 Chrome 和扩展程序

> ID：14380184
> 
> 赞同：2
> 
> 时间：2013-01-17T13:29:07.837
> 
> 标签：delphi, google-chrome

我正在将 Chrome 与一个正在开发的应用程序集成，并且面临一些挫折。

起初我必须在上面**安装**Chrome 和扩展程序，有没有办法通过代码来做到这一点？安装 Chrome 本身就是这个扩展容易安装的问题。

我也可以呼吁备份设置然后恢复它们，但不知道如何执行此过程。

谢谢你。

# jsf - 如何修复 JSF Rich Table 中的行数？

> ID：14380187
> 
> 赞同：1
> 
> 时间：2013-01-17T13:29:28.627
> 
> 标签：jsf, datatable, richfaces

如何固定表格的大小

例子

我在 JSF 中使用下面的代码表

```
<rich:dataTable id="incompleteCases"
            align="center" headerClass="content_row" rowKeyVar="row"
            rows="10" 
    </rich:dataTable> 
```

我想将表格的行修复为精确的 10

当行数少于 10 时，使用上述代码表会缩小

如何强制行保持不变？

**编辑：**

例如：如果我有 35 行，3 页，它将显示 10 行，但在第 4 页，因为它有 5 行，表格会缩小。我想添加剩余的 5 行，这样它就不会调整表格大小。

行是动态填充的。

# sql - ORDER BY 子句中的列无效，因为它不包含在聚合函数或 GROUP BY 子句中

> ID：14380190
> 
> 赞同：2
> 
> 时间：2013-01-17T13:29:43.057
> 
> 标签：sql, join, view

好的，这是我的观点 (vw_LiftEquip)

```
SELECT  dbo.tbl_equip_swl_unit.unit_id,
        dbo.tbl_equip_swl_unit.unit_name,
        dbo.tbl_equip_swl_unit.archived,
        dbo.tbl_categories.category_id,
        dbo.tbl_categories.categoryName,
        dbo.tbl_categories.parentCategory,
        dbo.tbl_categories.sub_category,
        dbo.tbl_categories.desc_category,
        dbo.tbl_categories.description,
        dbo.tbl_categories.miscellaneous,
        dbo.tbl_categories.category_archived,
        dbo.tbl_equip_swl_unit.unit_name AS Expr1,
        dbo.tbl_categories.categoryName AS Expr2,
        dbo.tbl_categories.description AS Expr3,
        dbo.tbl_equip_depts.dept_name,
        dbo.tbl_equip_man.man_name,
        dbo.tbl_Lifting_Gear.e_defects AS Expr7,
        dbo.tbl_Lifting_Gear.e_defects_desc AS Expr8,
        dbo.tbl_Lifting_Gear.e_defects_date AS Expr9,
        dbo.tbl_equipment.equipment_id,
        dbo.tbl_equipment.e_contract_no,
        dbo.tbl_equipment.slID,
        dbo.tbl_equipment.e_entered_by,
        dbo.tbl_equipment.e_serial,
        dbo.tbl_equipment.e_model,
        dbo.tbl_equipment.e_description,
        dbo.tbl_equipment.e_location_id,
        dbo.tbl_equipment.e_owner_id,
        dbo.tbl_equipment.e_department_id,
        dbo.tbl_equipment.e_manafacture_id,
        dbo.tbl_equipment.e_manDate1,
        dbo.tbl_equipment.e_manDate2,
        dbo.tbl_equipment.e_manDate3,
        dbo.tbl_equipment.e_dimensions,
        dbo.tbl_equipment.e_test_no,
        dbo.tbl_equipment.e_firstDate1,
        dbo.tbl_equipment.e_firstDate2,
        dbo.tbl_equipment.e_firstDate3,
        dbo.tbl_equipment.e_prevDate1,
        dbo.tbl_equipment.e_prevDate2,
        dbo.tbl_equipment.e_prevDate3,
        dbo.tbl_equipment.e_insp_frequency,
        dbo.tbl_equipment.e_swl,
        dbo.tbl_equipment.e_swl_unit_id,
        dbo.tbl_equipment.e_swl_notes,
        dbo.tbl_equipment.e_cat_id,
        dbo.tbl_equipment.e_sub_id,
        dbo.tbl_equipment.e_parent_id,
        dbo.tbl_equipment.e_last_inspector,
        dbo.tbl_equipment.e_last_company,
        dbo.tbl_equipment.e_deleted AS Expr11,
        dbo.tbl_equipment.e_deleted_desc AS Expr12,
        dbo.tbl_equipment.e_deleted_date AS Expr13,
        dbo.tbl_equipment.e_deleted_insp AS Expr14,
        dbo.tbl_Lifting_Gear.e_defects_action AS Expr15,
        dbo.tbl_equipment.e_rig_location,
        dbo.tbl_Lifting_Gear.e_add_type AS Expr17,
        dbo.tbl_Lifting_Gear.con_id,
        dbo.tbl_Lifting_Gear.lifting_date,
        dbo.tbl_Lifting_Gear.lifting_ref_no,
        dbo.tbl_Lifting_Gear.e_id,
        dbo.tbl_Lifting_Gear.inspector_id,
        dbo.tbl_Lifting_Gear.lift_testCert,
        dbo.tbl_Lifting_Gear.lift_rig_location,
        dbo.tbl_Lifting_Gear.inspected,
        dbo.tbl_Lifting_Gear.lifting_through,
        dbo.tbl_Lifting_Gear.liftingNDT,
        dbo.tbl_Lifting_Gear.liftingTest,
        dbo.tbl_Lifting_Gear.e_defects,
        dbo.tbl_Lifting_Gear.e_defects_desc,
        dbo.tbl_Lifting_Gear.e_defects_date,
        dbo.tbl_Lifting_Gear.e_defects_action,
        dbo.tbl_Lifting_Gear.lift_department_id,
        dbo.tbl_Lifting_Gear.lifting_loc
FROM    dbo.tbl_equipment
        INNER JOIN dbo.tbl_equip_swl_unit
                ON dbo.tbl_equipment.e_swl_unit_id = dbo.tbl_equip_swl_unit.unit_id
        INNER JOIN dbo.tbl_categories
                ON dbo.tbl_equipment.e_cat_id = dbo.tbl_categories.category_id
        INNER JOIN dbo.tbl_equip_depts
                ON dbo.tbl_equipment.e_department_id = dbo.tbl_equip_depts.dept_id
        INNER JOIN dbo.tbl_equip_man
                ON dbo.tbl_equipment.e_manafacture_id = dbo.tbl_equip_man.man_id
        INNER JOIN dbo.vwSubCategory
                ON dbo.tbl_equipment.e_sub_id = dbo.vwSubCategory.category_id
        INNER JOIN dbo.vwDescCategory
                ON dbo.tbl_equipment.e_cat_id = dbo.vwDescCategory.category_id
        INNER JOIN dbo.tbl_Lifting_Gear
                ON dbo.tbl_equipment.equipment_id = dbo.tbl_Lifting_Gear.e_id 
```

这是我正在使用的带有子查询的 select 语句：

```
SELECT  *
FROM    vw_LiftEquip
WHERE   lifting_loc = ? AND 
        con_id = ? AND 
        EXPR11 = 
        'N'(
                SELECT MAX(lifting_date) AS maxLift
                FROM vw_LiftEquip
                WHERE e_id = equipment_id
            )
ORDER BY    lifting_ref_no,
            category_id,
            e_swl,
            e_serial 
```

我收到错误消息：列“vw_LiftEquip.category_id”在 ORDER BY 子句中无效，因为它不包含在聚合函数或 GROUP BY 子句中。

不明白为什么它会返回该错误，这无疑是我第一次在如此复杂的视图上运行子查询，我有点迷茫，在此先感谢您的帮助。我浏览了类似的帖子，找不到这个问题的答案，对不起，如果我只是愚蠢的话。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:33:15.510

你在和`AND`之间失踪`EXPR11 = 'N'``(SELECT MAX(...`

否则，它看起来没问题。如果 SELECT 中没有其他列，[则允许不带 GROUP BY 的 MAX](https://stackoverflow.com/questions/2552086/does-count-always-return-a-result/2552102#2552102)

更新：@hvd 还指出你没有什么可比较的`MAX(lifting_date).`查看评论

更新 2，

```
SELECT  *
FROM    vw_LiftEquip v1
        CROSS JOIN
        (
             SELECT MAX(lifting_date) AS maxLift
             FROM vw_LiftEquip
             WHERE e_id = equipment_id
        ) v2
WHERE   v1.lifting_loc = ? AND 
        v1.con_id = ? AND 
        v1.EXPR11 = 'N'
ORDER BY    v1.lifting_ref_no,
            v1.category_id,
            v1.e_swl,
            v1.e_serial 
```

# android - Sensor.TYPE_LINEAR_ACCELERATION 在 Android 4+ 上返回 null

> ID：14380192
> 
> 赞同：-1
> 
> 时间：2013-01-17T13:29:45.803
> 
> 标签：android, android-sensors

我想在我的应用程序中使用加速度计数据。

我可以`TYPE_ACCELEROMETER`毫无问题地访问 ，但许多人建议使用`TYPE_LINEAR_ACCELERATION`已经从地球重力中过滤的 。看起来我无法访问该传感器，因为在日志下面的代码中将返回 null。据我了解`TYPE_LINEAR_ACCELERATION`，在大于 8 的 Android API 上可用作“软件传感器”......我在三星 Galaxy Tab 2 上使用 14 作为我的最低要求。

知道为什么我会为空吗？是因为这个模型没有陀螺仪吗？

代码：

```
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);

mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

mLinearAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION);

Log.i("TYPE_LINEAR_ACCELERATION", String.valueOf(mLinearAccelerometer)); 
```

谢谢

编辑：添加缺少的“=”符号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-23T22:34:06.050

根据[android运动传感器文档](http://developer.android.com/guide/topics/sensors/sensors_motion.html)：

> Android 开源项目 (AOSP) 提供了三种基于软件的运动传感器：重力传感器、线性加速度传感器和旋转矢量传感器。这些传感器在 Android 4.0 中进行了更新，现在使用设备的陀螺仪......所有这三个传感器都依赖于陀螺仪：如果设备没有陀螺仪，则这些传感器不会显示并且无法使用。

. 所以你的猜测是正确的，没有陀螺仪重力传感器是不可用的。

# apache - PHPMyAdmin 最大上传大小不会改变，错误的 php.ini 文件

> ID：14380205
> 
> 赞同：14
> 
> 时间：2013-01-17T13:30:26.507
> 
> 标签：apache, phpmyadmin, wamp, php

我最近用 WAMP 重新安装了我的服务器，之前我使用的是 XAMPP。

在 phpmyadmin 中，数据库文件的最大上传大小为 2,048kb。

我已经根据几个论坛和有关该问题的文章更改了 php.ini 中的三个变量，重新启动了我的服务器，但它没有任何效果。

是否有某种环境路径变量等需要在其他地方设置？

我错过了什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T13:32:47.010

把这些放在 php.ini

```
upload_max_filesize = 10M
post_max_size = 10M 
```

或者你可以把这些放在 .htaccess 中：

```
php_value upload_max_filesize 10M
php_value post_max_size 10M 
```

用你想要的任何东西替换 10M。

**额外：**要查找当前使用的 php.ini，请在 Web 根目录中创建一个文件，假设`info.php`包含`<?php phpinfo();`. 然后从浏览器访问该文件，并搜索`php.ini`. 这必须通过浏览器完成，从命令行您将看到`php.ini`在 cli 中使用的。

完成后，重新启动 Apache 以使更改生效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-02-24T10:02:42.237

首先，您必须根据您的要求更改**php.ini**文件中的值。

```
post_max_size = 1024M 
upload_max_filesize = 1024M 
max_execution_time = 3600
max_input_time = 3600 
memory_limit = 1024M 
```

***注意 - 小心更改这些值。这些值将影响该服务器的所有项目。***

现在，如果上述所有解决方案都不起作用，请检查您的**phpmyadmin.conf**文件。如果您使用的是 WAMP，那么您可以在**"C:\wamp64\alias"**中找到该文件。

您必须更改以下值。

文件中已有的值是 -

```
 php_admin_value upload_max_filesize 128M
  php_admin_value post_max_size 128M
  php_admin_value max_execution_time 360
  php_admin_value max_input_time 360 
```

将上面的代码更改为 -

```
#  php_admin_value upload_max_filesize 128M
#  php_admin_value post_max_size 128M
#  php_admin_value max_execution_time 360
#  php_admin_value max_input_time 360 
```

现在只需重新启动服务器，即可使用更改的值。:)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T13:39:15.510

php.ini 可能不是您所期望的。请务必检查 phpinfo 以查看正在使用的配置以及活动的参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-17T08:17:02.353

我们需要增加**php.ini**文件中的最大文件大小值，默认情况下， upload_max_filesize在 XAMPP**中设置为 2MB**

*要解决此问题：*

*   我们需要找到 php.ini 文件的位置。在 Xampp 中，它位于**C:\xampp\php**中。

*   打开**php.ini**文件，搜索“upload_max_filesize”并将 2M（意思是 2-Megabyte）替换为更高的值，比如 50M。

**改变**：`upload_max_filesize =2M`

**至**：`upload_max_filesize =50M`

*   重新启动 Apache 以使更改生效。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-24T00:02:16.020

另一个提示：如果你使用PHP FPM，你需要在php.ini 中设置好值后重新启动fpm 服务。在基于 debian 的系统上：

`service php7.3-fpm restart`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-11-26T18:38:49.477

这让我发疯了，但我发现 WAMPServer 有一个文件`alias/phpmyadmin.conf`，我需要在其中进行更改。

# xslt-2.0 - 如何将属性应用于后代元素？XSLT

> ID：14380209
> 
> 赞同：1
> 
> 时间：2013-01-17T13:30:40.247
> 
> 标签：xslt-2.0

看看下面的代码：

```
<xsl:template match="tocline[@toclevel='2']">
    <xsl:copy>
        <xsl:copy-of select="@*"/>

        <xsl:for-each select="descendant::toctitle">
            <xsl:if test="position() = last()">
                <xsl:attribute name="last">
                    <xsl:value-of select="'true'"/>
                </xsl:attribute>
            </xsl:if>
        </xsl:for-each>

    <xsl:apply-templates />
    </xsl:copy>
</xsl:template> 
```

此模板将属性应用于 tocline 元素。我希望它将属性应用于节点集中的最后一个 toctitle，它可以位于不同的级别。

使用此示例：

```
 <tocline id="d1e11" toclevel="1">
            <toctitle>Section 1\. Legislative Powers</toctitle>
            <tocline id="d1e40" toclevel="2">
                <toctitle>Separation of Powers and Checks and Balances</toctitle>
                <tocline id="d1e51" toclevel="3">
                    <toctitle>The Theory Elaborated and Implemented</toctitle>
                </tocline>
                <tocline id="d1e189" toclevel="3">
                    <toctitle>Judicial Enforcement</toctitle>
                </tocline>
            </tocline>
        </tocline> 
```

我要这个：

```
 <tocline id="d1e11" toclevel="1">
            <toctitle>Section 1\. Legislative Powers</toctitle>
            <tocline id="d1e40" toclevel="2">
                <toctitle>Separation of Powers and Checks and Balances</toctitle>
                <tocline id="d1e51" toclevel="3">
                    <toctitle>The Theory Elaborated and Implemented</toctitle>
                </tocline>
                <tocline id="d1e189" toclevel="3">
                    <toctitle last="true">Judicial Enforcement</toctitle>
                </tocline>
            </tocline>
        </tocline> 
```

但我明白了：

```
 <tocline id="d1e11" toclevel="1">
            <toctitle>Section 1\. Legislative Powers</toctitle>
            <tocline id="d1e40" toclevel="2" last="true">
                <toctitle>Separation of Powers and Checks and Balances</toctitle>
                <tocline id="d1e51" toclevel="3">
                    <toctitle>The Theory Elaborated and Implemented</toctitle>
                </tocline>
                <tocline id="d1e189" toclevel="3">
                    <toctitle>Judicial Enforcement</toctitle>
                </tocline>
            </tocline>
        </tocline> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:28:40.843

我添加了一个密钥，这就是我想出的：

```
<xsl:key name="l2id" match="tocline[@toclevel eq '2']" use="@id"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="toctitle[. is (ancestor-or-self::tocline/key('l2id',@id)/descendant-or-self::toctitle[last()])]">
    <xsl:copy>
        <xsl:attribute name="last">
            <xsl:value-of select="'true'"/>
        </xsl:attribute>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T00:12:16.427

**这种转变：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>
    <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
 "toctitle
    [. is (ancestor::tocline[@toclevel eq '2'][1]//toctitle)[last()]]">
    <toctitle last="true">
      <xsl:apply-templates select="@*|node()"/>
    </toctitle>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<tocline id="d1e11" toclevel="1">
    <toctitle>Section 1\. Legislative Powers</toctitle>
    <tocline id="d1e40" toclevel="2">
        <toctitle>Separation of Powers and Checks and Balances</toctitle>
        <tocline id="d1e51" toclevel="3">
            <toctitle>The Theory Elaborated and Implemented</toctitle>
        </tocline>
        <tocline id="d1e189" toclevel="3">
            <toctitle>Judicial Enforcement</toctitle>
        </tocline>
    </tocline>
</tocline> 
```

**产生想要的正确结果：**

```
<tocline id="d1e11" toclevel="1">
   <toctitle>Section 1\. Legislative Powers</toctitle>
   <tocline id="d1e40" toclevel="2">
      <toctitle>Separation of Powers and Checks and Balances</toctitle>
      <tocline id="d1e51" toclevel="3">
         <toctitle>The Theory Elaborated and Implemented</toctitle>
      </tocline>
      <tocline id="d1e189" toclevel="3">
         <toctitle last="true">Judicial Enforcement</toctitle>
      </tocline>
   </tocline>
</tocline> 
```

# eclipse - 更新 Android SDK 后 Eclipse ADT（主题和图标）损坏

> ID：14380219
> 
> 赞同：8
> 
> 时间：2013-01-17T13:31:16.410
> 
> 标签：eclipse, adt

将新组件（Android SDK 工具和开发人员工具）添加到 Eclipse 后，当我运行 Eclipse 时，漂亮的启动画面（启动时）和应用程序图标（在文档中）消失了。就在我启动它之前，显示了 ADT 图标 - 但在它启动后它变成了 Eclipse 图标。我正在运行 Mac OSX Mountain Lion。（ADT 图标：[https](https://lh6.googleusercontent.com/-kcAmqYmpgVM/UKPPGbaJNnI/AAAAAAAAkp0/dp-vtDYvnA0/w248-h248-p/sdk-adt-ide.png) ://lh6.googleusercontent.com/-kcAmqYmpgVM/UKPPGbaJNnI/AAAAAAAkp0/dp-vtDYvnA0/w248-h248-p/sdk-adt-ide.png ）

我能做些什么来防止这种情况发生？没有不同的图标：很难区分运行的不同 Eclipse 应用程序。

提前致谢。

编辑：

# 它的固定

在这里阅读更多： [http ://code.google.com/p/android/issues/detail?id=41126](http://code.google.com/p/android/issues/detail?id=41126)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-24T18:10:13.250

我在同样的事情上苦苦挣扎，但我设法修复了 Mac 上的应用程序图标和启动画面。

1.  要替换图标：

    转到 Eclip ADT 的包内容。转到 Resources 文件夹并删除 Eclipse.icns。为了安全起见，打开 Info.plist 并替换 Bundle Icon：

    ```
    <key>CFBundleIconFile</key>
            <string>adt.icns</string> 
    ```

2.  现在更换启动画面：

一种快速的方法是在 /plugins 文件夹中搜索“splash”。您将看到 ADP 飞溅和 Eclipse 飞溅。由于它们位于不同的文件夹中，只需复制 adt 初始屏幕图像并替换 eclipse 一个。

完成，现在您恢复了旧的 ADT 外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-17T00:07:53.473

除了之前的帖子（此时感谢），我现在将在这里发布官方回复（来自我在那里发布的论坛链接）。

目前没有合适的解决方案，但有一种解决方法（最后一段）

> **项目成员** [链接，用于](https://code.google.com/p/android/issues/detail?id=41126#c29)
> 向所有人发布道歉，以延迟修复此问题。在将 ADT 的 Eclipse 版本更新为 4.2.2 之前，我正在等待 Eclipse 发布 4.2 SR2。根据[http://wiki.eclipse.org/Juno/Simultaneous_Release_Plan#SR2](http://wiki.eclipse.org/Juno/Simultaneous_Release_Plan#SR2)，4.2.2 应该在 2/22 发布，所以我希望它很快就会发布。
> 
> 我们已经更新了 ADT 包以默认包含 egit，因此如果您只是在寻找 egit，则不必自己安装任何东西。
> 
> 其他人应该执行以下操作： - 转到首选项 -> 安装/更新 -> 可用软件站点，然后取消选中/删除 Juno 更新站点。- 安装任何软件时，请确保没有引入 Eclipse 平台 4.2。

除此之外，还有第二篇文章，即将发布的 Eclipse 即将发布解决方案（修复）：

> **项目成员**(11.03.2013)[发布链接](https://code.google.com/p/android/issues/detail?id=41126#c42)
> 使用[https://android-review.googlesource.com/#/c/53181/1](https://android-review.googlesource.com/#/c/53181/1)，我们现在在内部使用 e4 进行构建。我们将尝试在一周内提供预览。
> 
> 有关变通方法，请参见注释#29。只要从 P2 存储库列表中删除 Juno 存储库，你们中的大多数人应该能够让事情正常进行。

## 更新：

> **日期：10.05.2013**
> 如果您在尝试安装 eGIT 时遇到此问题
> -> **eGIT 现在已包含在**android 开发人员下载网站上的捆绑包中。
> 带有修复程序的代码仍在审查中 - 主要问题没有改变。

希望在这一点上有所帮助。当事情发生时会编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T16:23:36.940

在 Windows x86 中更新到 ADT 21.1 后，我遇到了同样的问题，环顾我的 eclipse 配置文件，我发现了以下指令：

```
-showsplash
C:\adt-bundle-windows-x86\eclipse\\plugins\org.eclipse.platform_4.2.1.v201209141800\splash.bmp 
```

我在那里导航并找到了默认的 eclipse splash bmp，我只是用我在这里找到的 ADT splash BMP 替换它：

```
C:\adt-bundle-windows-x86\eclipse\plugins\com.android.ide.eclipse.adt.package_21.1.0.v201302060044-569685 
```

重新启动浏览器后，我的 ADT Splash 屏幕又回来了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T16:36:53.387

在 Mac 上，您会在 ADT 文件夹中的 eclipse 包中找到此设置。只需右键单击 Eclipse 应用程序并选择“显示包内容”。

在内容文件夹中，有一个名为“Info.plist”的文件，其中包含应用程序图标和启动画面的所有设置。我发现我的图标定义重复了，所以我只是删除了非 ADT 的图标并将飞溅指向正确的位置。

对于初始屏幕，您需要使用 bmp 文件的完整路径。这应该是这样的：

```
/{adt-install-location}/eclipse/plugins/com.android.ide.eclipse.adt.package_{your-build-number}/splash.bmp 
```

您将需要检查您的插件目录以查看您的内部版本号是什么，因为它对您而言可能与对我不同。在 plist 文件中更改这些行后，保存它，您应该会恢复正常！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T04:23:18.217

只是：

1.  为您的 Eclipse.app 打开包
2.  转到 Contents/Resources，然后删除 Eclipse.icns

然后你漂亮的 ADT 图标将再次显示。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-24T13:59:43.540

这是您可以找到`adt.ico`文件以用于您想要/需要的任何用途的路线：

```
<ADT-installation-folder>\eclipse\plugins\com.android.ide.eclipse.adt.package_<Build-number>\icons 
```

仅供参考：我的 ADT 安装文件夹：`C:\Users\<Username>\AppData\Local\Android\android-developer-tools`和我的内部版本号：`22.3.0.v201310242005-887826`

信息来源：[添加 .ico 文件](https://android.googlesource.com/platform/sdk/+/1e21cccca793acfcfe8e34f5eace21c3ff5f2271%5E!/#F0)（感谢 Siva Velusamy 在 2012 年 10 月 24 日制作了这个补丁）

# jquery - jqGrid：无法在子网格中获取数据

> ID：14380222
> 
> 赞同：2
> 
> 时间：2013-01-17T13:31:25.830
> 
> 标签：jquery, jqgrid

我正在使用带有 subGrid 的 jqGrid 4.4.1。

我正在提取不同类型的数据，但对于此示例数据，单击“展开”时我无法获得子网格。

这是示例代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SubGrid Real Data</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/themes/redmond/jquery-ui.css" />
<link rel="stylesheet" type="text/css" href="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.3.2/css/ui.jqgrid.css" />
<style>
    .ui-jqgrid .ui-subgrid td.subgrid-data {
        border-top: 0 none !important;
        border-right: 0 none !important;
        border-bottom: 0 none !important;
    }
    .ui-jqgrid .ui-subgrid span.ui-icon ui-icon-carat-1-sw {
                background-color: #FFFFFF !important; 
                background-image: none !important;
                border: 0px 0px 1px 1px;
    }
</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/i18n/grid.locale-en.js"></script>
<script type="text/javascript">
    $.jgrid.no_legacy_api = true;
    $.jgrid.useJSON = true;
</script>
<script type="text/javascript" src="http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.1/js/jquery.jqGrid.src.js"></script>

<script type="text/javascript">
//<![CDATA[
    /*global $ */
    /*jslint browser: true, eqeq: true, plusplus: true */
    $(function () {
        "use strict";
        var colModelData =[
            {"width":"300","name":"itemName","editable":false}
            ],
        colNamesArray = ["Name"],
        subColModel = [
            {"width":"300","name":"itemName","editable":false}
            ],  

        myData = [{"id":"metlab panel","itemName":"Metlab Panel",
        "subGridData":[
            {"itemName":"CMP BILIRUBIN,TOTAL"},
            {"itemName":"CMP CALCIUM"},
            {"itemName":"CMP CREATININE"},
            {"itemName":"CMP POTASSIUM"},
            {"itemName":"CMP PROTEIN,TOTAL"},
            {"itemName":"CMP SODIUM"},
            {"itemName":"CMP GLUCOSE"}]
        }];

        $("#list").jqGrid({
            datatype: "local",
            data: myData,
            colNames: colNamesArray,
            colModel: colModelData,
            gridview: true,
            height: "100%",
            width: "100%",
            caption: "Create subgrid from local data",
            subGrid: true,
            subGridOptions: {
                reloadOnExpand: false,
                selectOnExpand: false
            },
            subGridRowExpanded: function (subgridDivId, parentRowId) {

                    var $subgrid = $("<table id='" + subgridDivId + "_t'></table>");
                    $subgrid.appendTo("#" + $.jgrid.jqID(subgridDivId));
                    var data = $(this).jqGrid("getLocalRow", parentRowId);
                    console.log(data.subGridData); // I can see data
                    $subgrid.jqGrid({
                            datatype: "local",
                            data: data.subGridData,
                            colModel:subColModel,
                            height: "100%",
                            width: "100%",
                            autoencode: true,
                            gridview: true,
                            rowNum: 200

                    });
            $subgrid.closest("div.ui-jqgrid-view")
                    .children("div.ui-jqgrid-hdiv").hide();
        }   

        });
    });

//]]>
</script> 
```

## 输出：

![输出](../Images/bbd322d9b76078aa2b7b972e7b4ad87a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:43:44.403

您的问题与`id`.

第一个错误是使用`id`空格。如果您替换`"id":"metlab panel"`为例如`"id":"metlabpanel"`一个将看到子网格已经。

下一个问题是 subgrid 的数据没有`id`。在这种情况下，jqGrid 将使用值 1、2、3、... 作为 rowid。如果要扩展至少两个子网格，您将有 id 重复，这将是一个问题。为了解决这个问题，可以使用`idPrefix`基于父行 ID 创建的子网格。例如

```
idPrefix: "s_" + parentRowId + "_" 
```

无论如何，您应该*始终*考虑为主网格或子网格的每一行提供唯一的 rowid。

[修改后的演示](http://www.ok-soft-gmbh.com/jqGrid/HardikMishra1.htm)正确显示子网格

![在此处输入图像描述](../Images/d18408f421b0c5509a73231a16a36b52.png)

最好的方法是为`id`您创建的每一行或网格或子网格填充属性。如果您不确定要分配哪个值，您可以调用`$.jgrid.randId()`which 将提供安全的唯一值，您可以将其用作`id`.

# django - 错误是：没有名为 backends.spatialite.base 的模块

> ID：14380223
> 
> 赞同：0
> 
> 时间：2013-01-17T13:31:30.677
> 
> 标签：django, sqlite, spatialite

出于测试目的，我正在尝试使用 SQLite，但似乎我错过了**spatialite**后端：

```
django.core.exceptions.ImproperlyConfigured: 'django.contrib.gis.backends.spatialite' isn't an available database backend.
Try using django.db.backends.XXX, where XXX is one of:
    'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
Error was: No module named backends.spatialite.base 
```

知道如何让 Django 找到它吗？

我已经[安装了 spatialite](https://docs.djangoproject.com/en/dev/ref/contrib/gis/install/spatialite/)。

这是我的数据库设置：

```
DATABASES['default'] = {
    'ENGINE': 'django.contrib.gis.backends.spatialite',
    'NAME': '/tmp/test.db'
} 
```

Ubuntu 12.04.1 LTS；蟒蛇2.7.3；Django 1.4.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:09:31.897

你应该寻找：

django.contrib.gis.db.backends.spatialite

不是

django.contrib.gis.backends.spatialite

:)

尝试从 shell 导入

# mysql - Yii - CActive 记录 - 如何解决服务器查询缓存

> ID：14380225
> 
> 赞同：1
> 
> 时间：2013-01-17T13:31:32.180
> 
> 标签：mysql, activerecord, yii, query-cache

我正在为我的 webapp 使用 Yii 框架（使用 ACtiveRecord）。在 ACtiveRecord 的后面，框架管理来自数据库的所有查询。

我的问题是我在共享服务器上，事实证明服务器启用了查询缓存，这在 S 中是一个痛苦。我真的需要绕过查询缓存。FluSH 对我不起作用，因为我没有 RELOAD 权限。

如果我将每个 ActiveRecord 数据库提取用作粗略的 mySQL 查询，我想我可以将查询本身设置为禁用缓存，例如使用 NO_CACHE 标记，或使用涉及当前时间戳的错误查询术语（导致在每个查询中都是不同的查询文本）。

我对你们的问题是使用 Yii/ActiveRecord 方案的最佳方法是什么。我可以更改 findAll() 函数的实现吗？我有一个 CActiveRecord 的子类，所以如果有什么我可以在那里做的，那就太完美了。

对不起，很长的问题。宜兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:35:30.533

**默认范围**

模型类可以有一个默认范围，该范围将应用于有关模型的所有查询（包括关系查询）。为此，我们重写 CActiveRecord::defaultScope 方法，如下所示，

```
class Content extends CActiveRecord
{
    public function defaultScope()
    {
        return array(
            'condition'=>"1<='".time()."'",
        );
    }
} 
```

**注意：**默认范围和命名范围仅适用于 SELECT 查询。对于 INSERT、UPDATE 和 DELETE 查询，它们会被忽略。此外，在声明范围（默认或命名）时，AR 类不能用于在声明范围的方法中进行 DB 查询。

[http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)

# php - 使用 php curl 发送 xml 字符串，但不作为 post 参数

> ID：14380228
> 
> 赞同：0
> 
> 时间：2013-01-17T13:31:36.013
> 
> 标签：php, curl, https

:) 我正在尝试使用 curl 但不作为 post 参数发送 XML。我的意思是这个。

例如。

该 XML 的接收方将无法使用`$_POST`变量接收 XML。

他将需要使用以下代码：

```
 $xmlStr=null;
    $file=fopen('php://input','r');
    $xmlStr=fgets($file); 
```

我希望能够通过 https 使用 curl 发送一个 xml 字符串。

所以以下是错误的：

```
public static function HttpsNoVerify($url,$postFields=null,$verbose=false) {
    // Initialize session and set URL.
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);

    // Set so curl_exec returns the result instead of outputting it.
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    if ($postFields !=null) {
        curl_setopt($ch, CURLOPT_POSTFIELDS, $postFields);
    }
    if ($verbose) {
        curl_setopt($ch, CURLOPT_VERBOSE, 1);
    }
    // Get the response and close the channel.
    $response = curl_exec($ch);
    curl_close($ch);
    return $response;
} 
```

因为在这里我可以使用`HttpsNoVerify($url,array('xml_file'=>'xml..'));`并将其粘贴为 post 参数。我希望它作为后期输出。

所以请我希望我能正确地解释自己，并且我确切地解释了我不想做的事情。

我怎么能做我想做的事？

谢谢！:)

冷杉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:41:36.783

只需直接将 xml 字符串作为第二个参数而不是关联数组项传递，

```
HttpsNoVerify($url, 'xml ..'); 
```

这最终会调用

```
curl_setopt($ch, CURLOPT_POSTFIELDS, "xml ..."); 
```

它将`php://input`用于远程服务器。

# actionscript-3 - 隐藏 Flex 视频播放器的控件

> ID：14380233
> 
> 赞同：0
> 
> 时间：2013-01-17T13:31:52.720
> 
> 标签：actionscript-3, flash, apache-flex, flash-builder4.5

我已经通过 VidoePlayerSkin 对视频播放器的控件进行了蒙皮。我需要始终全屏播放视频并在点击时显示/隐藏控件。

我无法在动作脚本中访问 VideoPlayerSkin 类的控件组元素。解决方案是什么？

*编辑*进一步查询此问题已解决，但现在如果我想使用任何控件，控件栏就会消失。当我单击控件栏中的元素时，它不应该。？有什么建议么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:42:37.293

此演示代码通过单击显示/隐藏 VideoPlayer 的控件。那是你要的吗？

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="init()">

    <s:VideoPlayer id="video" source="rtmp://fmsexamples.adobe.com/vod/mp4:_cs4promo_1000.f4v"
                   width="100%" height="100%"
                   loop="true"
                   autoPlay="true" />
    <s:Button label="fullscreen" click="{stage.displayState = stage.displayState == StageDisplayState.FULL_SCREEN ? StageDisplayState.NORMAL : StageDisplayState.FULL_SCREEN}"/>
    <fx:Script>
        <![CDATA[
            private function init():void
            {
                video.videoDisplay.addEventListener(MouseEvent.CLICK, onVideoClick);
            }
            private function onVideoClick(e:MouseEvent):void
            {
                video.playerControls.visible = !video.playerControls.visible;
            }
        ]]>
    </fx:Script>
</s:Application> 
```

# android - 一个 Activity，多个 Fragments 和 setRetainInstance

> ID：14380234
> 
> 赞同：1
> 
> 时间：2013-01-17T13:31:55.623
> 
> 标签：android, android-fragments

在我的应用程序中，我使用一个活动和两个片段。该应用程序使用带有容器的布局，因此片段是通过事务添加的。第一个片段包含一个列表视图，另一个片段包含列表视图项的详细视图。两个片段都使用 setRetainInstance(true)。通过替换事务添加片段并设置 addToBackStack(null)。listfragment 包含一个实例变量，其中包含列表的一些信息。现在我更改为详细信息并按回，实例变量为空。我阅读了 setRetainInstance 和 addToBackStack 并删除了 addToBackStack，但即便如此，实例变量也是空的。

有谁知道我可能做错了什么？

问候，托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:48:14.837

`setRetainInstance(true)`当包含因某种原因被杀死和重建时，将告诉`FragmentManager`保留片段。`Activity`它不能保证在`Fragment`添加或替换事务后实例会继续存在。听起来您的适配器正在被垃圾收集，而您没有创建新的适配器。

一个更普遍的简单解决方案是制作一个无视图`Fragment`以保留您的`ListAdapter`. 这样做的方法是创建`Fragment`，将保留实例设置为 true，然后`null`在方法中返回`onCreateView()`。要添加它，只需`addFragment(Fragment, String)`通过`FragmentTransaction`. 您永远不会删除或替换它，因此它会在应用程序的整个时间内始终保留在内存中。屏幕旋转不会杀死它。

无论何时`ListFragment`创建您的，`onCreateView()`获取`FragmentManager`并使用该方法`findFragmentById()`或`FindFragmentByTag()`从内存中检索您保留的片段。然后从该片段中获取适配器并将其设置为列表的适配器。

```
public class ViewlessFragment extends Fragment {

   public final static string TAG = "ViewlessFragment";

   private ListAdapter mAdapter;

   @Override
   public ViewlessFragment() {
      mAdapter = createAdater();
      setRetainInstance(true);
   }

   @Override
   public void onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
      return null;
   }

   public ListAdapter getAdapter() {
      return mAdapter;
   }
}

public class MyListFragment extends ListFragment {

   final public static String TAG = "MyListFragment";

   @Override
   public void onCreateView (LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
      final View returnView = getMyView();
      final ViewlessFragment adapterFragment = (ViewlessFragment) getFragmentManager().findFragmentByTag(ViewlessFragment.TAG);
      setListAdapter(ViewlessFragment.getAdapter());
      return returnView;
   }
}

public class MainActivity extends FragmentActivity {

   @Override
   public void onCreate(Bundle icicle) {
      // ... setup code...
      final FragmentManager fm = getSupportFragmentManager();
      final FragmentTransaction ft = fm.beginTransaction();
      ViewlessFragment adapterFragment = fm.findFragmentByTag(ViewlessFragment.TAG);
      if(adapterFragment == null) {
         ft.add(new ViewlessFragment(), ViewlessFragment.TAG);
      }
      ft.add(R.id.fragmentContainer, new MyListFragment(), MyListFragment.TAG);
      ft.commit();
   }
} 
```

# c# - 自定义 MEF 中的部件优先级

> ID：14380235
> 
> 赞同：0
> 
> 时间：2013-01-17T13:31:56.463
> 
> 标签：c#, .net, .net-4.0, mef

嗨，我正在使用 MEF，这是我的情况：

```
 [ImportMany]
 public IEnumerable<Lazy<IMyInterface>> correspondingParts { get; set; } 
```

现在在对应的部分中，我得到了所有导出的 IMyInterface 类型的 DLL。但是，问题就像我使用

```
foreach(var parts in correspondingParts)
{
       // do something!
} 
```

现在对应的Parts 包含按名称字母顺序排序的DLL。我需要能够优先考虑 DLL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T09:15:24.543

Finally, this helped! The exporter needs to be able to create an ExportMetaData which can be used to get the priority later on. [ExportMetaData("Priority", 1)].

More info @ [http://blogs.msdn.com/b/dsplaisted/archive/2010/04/01/overriding-mef-metadata.aspx](http://blogs.msdn.com/b/dsplaisted/archive/2010/04/01/overriding-mef-metadata.aspx)

# c# - Telerik Radtabstrip 自动高度

> ID：14380236
> 
> 赞同：1
> 
> 时间：2013-01-17T13:31:56.667
> 
> 标签：c#, asp.net, telerik

如何将 Telerik radtabstrip 高度设置为自动。.

我想随着内容大小的增加而增加选项卡的高度。我不想要滚动条。我已经搜索过，但它只需要固定大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:58:36.230

如果您在谈论 PageView 的高度：

ASPX：

```
<telerik:radtabstrip id="RadTabStrip1" runat="server" selectedindex="0" multipageid="RadMultipage1"> 
        <Tabs>
            <telerik:RadTab Text="Tab1" PageViewID=" RadMultipage1">
            </telerik:RadTab>
            <telerik:RadTab Text="Tab2">
            </telerik:RadTab>
            <telerik:RadTab Text="Tab3">
            </telerik:RadTab>
        </Tabs>
    </telerik:radtabstrip>
<telerik:radmultipage id="RadMultipage1" runat="server" selectedindex="0"> 
        <telerik:RadPageView runat="server" ID="RadPageView1" ContentUrl="Default2.aspx" /> 
    </telerik:radmultipage> 
```

JavaScript：

```
<script type="text/javascript">

function resize() {
    var height = getDocHeight();
    var elements = window.top.document.getElementsByTagName("div");    

    for (var i = 0; i < elements.length; i++) {
        var containerPageViewID = "RadPageView1";

        if (elements[i].id.indexOf(containerPageViewID) > -1) {
            elements[i].style.height = height + "px";
            break;
        }
    }
}

if (window.addEventListener)
    window.addEventListener("load", resize, false);
else if (window.attachEvent)
    window.attachEvent("onload", resize);
else window.onload = resize;

function getDocHeight() {
    var D = document;
    return  Math.max(
        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
    );
}

</script> 
```

资料来源：[Telerik 的文档](http://www.telerik.com/help/aspnet-ajax/tabstrip-troubleshooting-set-height-to-pageview.html)

# php - 以 PDO 格式重写循环内的查询

> ID：14380238
> 
> 赞同：3
> 
> 时间：2013-01-17T13:32:00.280
> 
> 标签：php, mysql, pdo

我是 PDO 的新手，目前正在尝试重写我的所有查询。我在重写时遇到问题的一个查询是这个，因为它是在循环中编写的：

```
$search = $_GET['search'];
$code = explode(" ", $search);
$code_count = count($code);

$query = "SELECT * FROM table";

if($search != "")
{
if($code_count == 1)
{
     $query .= " WHERE team LIKE '%".mysql_real_escape_string($search)."%'";
} elseif($code_count > 1)
{   
       for($j=0;$j<$code_count;$j++)
       {
        if($j != 0)
        {
        $query .= " OR "; 
        } else
        {
        $query .= " WHERE team LIKE '%".mysql_real_escape_string($code[$j])."%' OR ";
        }           

                $query .= " team LIKE '%".mysql_real_escape_string($code[$j])."%'";
    }

    $query .= "ORDER BY team ASC";
}
} else
{
$query = "SELECT * FROM table ORDER BY team ASC";
}

$result = mysql_query($query)or die(mysql_error()); 
```

使用 PDO，我尝试了以下方法。

```
$query = "SELECT * FROM table";

if($search != "")
{
if($code_count == 1)
{
     $query .= " WHERE team LIKE ?";

         $stmt = $db->prepare($query);
         $stmt->bindValue(1, "%$search%", PDO::PARAM_STR);
         $stmt->execute();
} elseif($code_count > 1)
{   
       for($j=0;$j<$code_count;$j++)
       {
        if($j != 0)
        {
        $query .= " OR "; 
        } else
        {
        $query .= " WHERE team LIKE ? OR ";
        }           

                $query .= " team LIKE ?";

               $stmt = $db->prepare($query);
               $stmt->bindValue(1, "%$code[$j]%", PDO::PARAM_STR);
              $stmt->execute();
    }

    $query .= "ORDER BY team ASC";
}
} else
{
$query = "SELECT * FROM table ORDER BY team ASC";
}

$result = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

这种方法运气不好。我不断收到一条错误消息：“nvalid parameter number: number of bound variables does not match number of tokens”

有任何想法吗？

谢谢，

槊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:41:08.683

当您不自己分配名称时，绑定参数被命名`1`为。`n`您需要更改此行：

```
$stmt->bindValue(1, "%$code[$j]%", PDO::PARAM_STR); 
```

对此：

```
$stmt->bindValue($j + 1, "%" . $code[$j] . "%", PDO::PARAM_STR); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:53:54.843

由于可以将一组参数传递给[`PDOStatement::execute()`](http://php.net/manual/en/pdostatement.execute.php)而不是手动绑定每个参数，因此可以*极大*地简化整个事情：

```
$code = explode(' ', $_GET['search']);

$stmt = $db->prepare('
  SELECT   *
  FROM     table
  WHERE    FALSE ' . str_repeat(' OR team LIKE ?', count($code)) . '
  ORDER BY team ASC
');

$stmt->execute($code); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T13:49:29.967

您的重写中有几个错误：

*   您在构建查询期间多次调用准备/绑定/执行。您应该只调用一次准备，在您的查询字符串完全构造后，并在查询构造后绑定+执行。
*   在循环的每次迭代中，您向查询添加一两个 (if j == 0) 参数，但您尝试在每个循环中仅绑定一个 - 所以数字不会相加。

通常，要使用参数查询，您需要遵循以下结构：

1.  构建您的查询字符串
2.  准备你的查询字符串
3.  每次您要运行查询时：
    1.  绑定参数
    2.  执行
    3.  拿来

所以你的代码应该是这样的：

```
// building query
if($search != "")
{
  $query = 'SELECT * FROM table ';
  if($code_count == 1)
  {
    // note: this if is unneccessary, the loop below would generate a good SQL even for code_count 0 or 1
    $query .= "WHERE team LIKE ?";

  } elseif($code_count > 1)
  {   
    for($j=0;$j<$code_count;$j++)
    {
      if($j != 0)
      {
        $query .= " OR "; 
      } else
      {
        $query .= " WHERE ";
      }           

      $query .= " team LIKE ? ";
    }

    $query .= "ORDER BY team ASC";
}
} else
{
  $query = "SELECT * FROM table ORDER BY team ASC";
}

// preparing

$stmt = $db->prepare($query);

// binding parameters
if($search != '' && $code_count >= 1) {
  for($j=0;$j<$code_count;$j++){
    $stmt->bindValue($j+1, "%".$code[$j]."%", PDO::PARAM_STR);
  }
}

// execute

$stmt->execute();

// fetch

$result = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

# php - 将调用函数的方式从 this :: 更改为 this ->

> ID：14380239
> 
> 赞同：-5
> 
> 时间：2013-01-17T13:32:07.130
> 
> 标签：php, function, call

事情就是这样……我有一个带有一些函数的简单类，但我需要更改调用这些函数的方式。

原来的类是这样的

```
<?php
class Bcrypt {

const DEFAULT_WORK_FACTOR = 8;

public static function hash($password, $work_factor = 0) { ... }

public static function check($password, $stored_hash, $legacy_handler = NULL) { ... }

}?> 
```

现在我需要改变模型调用这个类的方式

最初模型看起来像这样

```
Bcrypt::hash($data['password']) 
```

我需要做的是将此调用更改为：

```
$this->bcrypt->hash($data['password']) 
```

我知道这也许是一个简单的问题，但我需要澄清一些概念......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:33:37.847

使您的功能非静态。

并对类和对象进行一些阅读。为了使用->，你必须实例化你的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:41:43.687

听起来您不知道公共和静态之间的区别。

静态意味着您不需要实例来调用函数。

如果要使用箭头，则需要先公开函数并创建实例。

你必须做的：

//首先创建类的实例

```
$bcrypt = new Bcrypt(); 
```

//调用实例变量并选择你的函数

```
$bcrypt->hash($data['password']); 
```

了解静态和公共之间的区别非常重要。我希望它对你有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:37:26.423

函数调用的语法由函数是否存在决定`static`，所以直接的答案是“`static`从函数声明中删除关键字”。

然而，一种方法的存在`static`与否决不应该是一个*偏好*问题；这应该是一个*设计决定*。`static`您没有说明为什么需要进行此更改，发布的代码中没有任何内容提供相关提示，在这种情况下，首先将方法放在首位似乎完全可以。

所以这就留下了一个问题：**你为什么要问？**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:41:22.107

有 3 种方法可以调用方法或变量。

来自类外部的静态变量/方法

```
 class Test {
    public static function testFunc() {}
 }

 Test::testFunc(); 
```

类内部的静态变量/方法

```
class Test {
    public static function testFunc() {}
    public static function testFromInside() {
        return self::testFunc(); // you can do this with Test::testFunc() as well
    }
}

Test::testFromInside(); 
```

类内部的非静态变量

```
class Test {
    public $test;
    public function testFunc() {
         return $this->test;
    }
}

$test = new Test;
$test->test;
$test->testFunc(); 
```

如果不清楚，请告诉我，我会尽力解释得更好。

# python - 在系统中没有特定包的情况下执行 python 程序

> ID：14380240
> 
> 赞同：0
> 
> 时间：2013-01-17T13:32:12.877
> 
> 标签：python

> **可能重复：**
> [如何从 Python 程序制作 EXE 文件？](https://stackoverflow.com/questions/49146/how-can-i-make-an-exe-file-from-a-python-program)

我正在寻找一种无需在系统中安装软件包即可运行 python 程序的方法。有什么方法可以直接将任何 python 代码作为 *exe 运行。或者我应该制作一个包含所有包的可执行文件。

这背后的主要原因是，能够在没有 python/包的系统上运行 python 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:33:31.733

[py2exe](http://www.py2exe.org/)是你想要的。这将从您的源代码构建一个可执行文件。

缺点是：它将解释器与 exe 打包在一起，因此文件大小可能会变得更大。当您使用外部库，尤其是 C 绑定时，您将不得不手动执行步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:46:26.607

[http://www.pyinstaller.org/](http://www.pyinstaller.org/)是另一个不错的选择。py2exe 做了很多相同的事情，并且遇到了同样的问题。

# ruby - 是否有一个网站模板可以接受上传的文件、执行某些操作并让用户下载结果？

> ID：14380244
> 
> 赞同：3
> 
> 时间：2013-01-17T13:32:38.517
> 
> 标签：ruby, web-applications, file-upload, twitter-bootstrap

我有一些 Ruby 脚本以不同的方式处理文本文件，我的许多朋友都觉得这些脚本很有用。但是，我认识的大多数人都不习惯在命令行上运行脚本。对他们来说最简单的事情是创建一个简单的网页，人们可以在其中上传文件，选择一些选项，对其进行处理，然后下载结果。

我知道在 Rails 或 Merb 或类似的东西中构建这样的东西不会太难，但这似乎是一个非常常见的问题，所以我想知道是否已经有某种模板或类似的应用程序我可以很方便地修改，即让用户上传一个文件，选择几个选项，然后{fill in code to do something with file}，让用户下载生成的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T13:56:46.007

I found [sinatra-fileupload](https://github.com/tbuehlmann/sinatra-fileupload), which pretty perfectly answers my question. It's a very minimalistic framework which works perfectly, I can just plug in the file handling, and change the layout etc a bit. There were many examples of sophisticated Rails plugins linked to databases, with versioning and stuff, but I really wanted the most minimal example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:33:25.930

过去我使用 Carrierwave 上传用户头像。如果你习惯了 Rails，那真的很简单。

让它成为一个 TextFile 资源：

```
gem 'carrierwave'

$ rails g scaffold textfile content:string title:string etc etc
$ rails g uploader textfile

class TextFile < ActiveRecord::Base
  attr_accesible :content
  mount_uploader :content, TextFileUploader
end 
```

这就是您获取应用程序骨架所要做的几乎所有事情。*但是，要回答您真正*的问题，不，我认为目前还没有一个 Rails 应用程序可以做到这一点。 [https://github.com/jnicklas/carrierwave](https://github.com/jnicklas/carrierwave)

# jquery - 亚马逊云搜索查询

> ID：14380246
> 
> 赞同：4
> 
> 时间：2013-01-17T13:32:42.620
> 
> 标签：jquery, json, amazon-web-services, amazon-s3

我不知道如何从静态 HTML 页面查询我的 Amazon CloudSearch。尽管文档很好，但除了在浏览器中复制和粘贴 URL 之外，没有其他示例。

我想要的是 S3 中的 HTML 页面，因此不允许服务器端代码，有一个文本字段表单，当单击搜索按钮时会触发到我的 CloudSearch 端点并返回结果

CloudSearch 使用 JSON 响应，因此必须对其进行解析并制作结果表。

到目前为止，我一直在本地使用保存的 JSON 结果并使用 Jquery 读取 JSON 文件

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>JSON Sample</title>
</head>
<body>
    <div id="placeholder"></div>
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script>
  $.getJSON('search.json', function(data) {

    var output="<ul>";
        for (var i in data.hit) {
            output+="<li>" + data.hit[i].id+ "</li>";
        }

        output+="</ul>";
        document.getElementById("placeholder").innerHTML=output;

        console.log(data);
  });
    </script>
</body>
</html> 
```

这给了我记录的 ID。

但是当我尝试将 URL 更改为 CloudSearch 端点时，我没有得到任何数据。阅读并转圈后，我相信这是因为 CORS。

但是，亚马逊的文档只是说在端点上使用 HTTP GET，但我如何将它构建到我的 HTML 页面中。

对不起这么基本的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:23:39.237

CloudSearch 目前不支持 CORS，因此您的浏览器不允许您联系 CloudSearch。

如果您不想运行服务器，则需要为您的请求找到代理。你可以看看这个：

[是否有支持 CORS 或 JSONP 的免费 JSON 代理服务器？](https://stackoverflow.com/questions/8537601/is-there-a-free-json-proxy-server-which-supports-cors-or-jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:43:51.753

这将对您有所帮助。您需要像这样创建一个 xml 配置文件。

[http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html](http://docs.aws.amazon.com/AmazonS3/latest/dev/cors.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T00:13:05.520

创建了一个 angularjs 项目来演示这个并添加到 git hub。您需要 CORS-anywhere 才能正确路由到域。

[https://github.com/tkntobfrk/amazon-cloudsearch-angular](https://github.com/tkntobfrk/amazon-cloudsearch-angular)

项目使用建议器来搜索域数据并使用自动完成数据填充输入字段。使用 bootstrap.ui 预输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-30T18:08:05.220

您可以制作一个包含所有搜索内容的 html 表单；只要确保它最终构建了正确的 url，例如：

[http://search-YOURDOMAIN-RANDOMID.REGION.cloudsearch.amazonaws.com/2013-01-01/search?q=THESEARCHPHRASE&q.parser=simple&start=0&size=30&return=COMMA%2cSEPARATED%2cLIST_OF_FIELDS](http://search-YOURDOMAIN-RANDOMID.REGION.cloudsearch.amazonaws.com/2013-01-01/search?q=THESEARCHPHRASE&q.parser=simple&start=0&size=30&return=COMMA%2cSEPARATED%2cLIST_OF_FIELDS)

这将对应于如下形式：

```
<form action="http://search-YOURDOMAIN-RANDOMID.YOURREGION.cloudsearch.amazonaws.com/2013-01-01/search" method="get">

   <label>Search: <input name="q" /></label>
   <input type="hidden" name="q.parser" value="simple" />

   <label>How many results? <select name="size">
      <option>10</option>
      <option>20</option>
   </select></label>

   // other dropdowns, hidden inputs etc corresponding to `start`, `return`, etc

   <button type="submit">Search</button>
</form> 
```

如果您在确定应该提交的内容方面需要帮助，请在 CloudSearch 仪表板“运行测试搜索”( [https://console.aws.amazon.com ) 上检查网络流量（Chrome > F12 > 网络选项卡） /cloudsearch/home?region=YOURREGION#search,YOURDOMAIN](https://console.aws.amazon.com/cloudsearch/home?region=YOURREGION#search,YOURDOMAIN)）。[或在http://docs.aws.amazon.com/cloudsearch/latest/developerguide/searching.html](http://docs.aws.amazon.com/cloudsearch/latest/developerguide/searching.html)上阅读更多搜索 url 示例

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T22:49:00.790

要将 CORS 启用到 cloudsearch API，您可以使用 AWS API Gateway HTTPProxy 来前端您的 cloudsearch 端点。

AWS API Gateway 允许您启用 CORS。

对于我的配置，我在定义端点时为这些字段添加了 Passthrough：start,sort,q.options,q.parser,return,fq,q,size

您可以像这样映射每个参数：

```
method.request.querystring.start
method.request.querystring.sort
method.request.querystring.q.options
etc. 
```

# jboss7.x - 在 JBoss AS7.1.1 中删除 sessionId 生成

> ID：14380250
> 
> 赞同：0
> 
> 时间：2013-01-17T13:32:48.767
> 
> 标签：jboss7.x

我有具有多个服务器的多层架构（Web <--> 应用程序服务 <--> 数据服务），并且用户 sessionId 是从不同的服务器（数据服务）生成的。所以我想删除 JBoss 中默认的 sessionId 生成。

我该如何配置呢？这样 HTTP 响应就不会包含 jsessionId。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:47:25.337

*每次创建会话时都会生成*会话 ID 。*因此，如果您在应用程序中需要会话，您也将需要*会话 ID*。您可以做的是强制您的应用程序的某些部分在没有会话要求的情况下运行。*

 ***例如：**您的“应用程序服务”可以是一个单独的应用程序，它将使用 restfull 网络服务与您的应用程序的“网络”部分进行通信。在这种情况下，“应用程序服务”可以在没有会话的情况下运行。所以不会生成会话ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T10:20:11.643

尝试对 spring 安全配置使用[create-session="stateless"选项](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-http-create-session)*

# android - 在 Android 资源中存储与语言无关的字符串

> ID：14380254
> 
> 赞同：3
> 
> 时间：2013-01-17T13:33:14.383
> 
> 标签：android, internationalization, resources

我将如何在 Android 项目中存储一些与语言无关的值，例如网站地址。我目前将它存储在我的`strings.xml`. 这看起来不太好，好像我添加了另一种语言和翻译，这个条目仍然具有相同的值并且会被复制。

我还想获得一些关于使用 I18N 创建 Android 项目的技巧。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:37:45.183

您无需再次在已翻译的 xml 文件中创建相同的键。如果 Android 在 German/Spanish/Whatever 语言文件中找不到`link`，它将回退到存储在 default 中的原始密钥`string.xml`。

我建议先实现英文版本，然后让别人翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T23:29:58.747

尝试将与语言无关的字符串放入：

```
\res\values-nodpi\strings.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:36:49.943

对于 i18n 格式，您可以为一个本地创建一些资源文件夹：

```
/res/values     <- default locale
/res/values-fr  <- values for french locale
... 
```

有关更多示例，请阅读文档：http: [//developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:37:30.430

对于独立于语言的字符串，只需创建一个带有常量的类：

```
public class MyIndependentStrings {

public static final String SOME_STRING = "Value";

} 
```

用法 ：

```
tvMyTextView.setText(MyIndependentStrings.SOME_STRING); 
```

在这种情况下，您将使用常量而不是来自 ../values/strings.xml 的 i18n 字符串

# ios - 如何在ios上集成Tr ipit？

> ID：14380256
> 
> 赞同：0
> 
> 时间：2013-01-17T13:33:25.187
> 
> 标签：ios, login, oauth

我需要通过[Tripit](http://tripit.github.com/api/doc/v1/index.html)向我的 iPhone 应用程序添加一个登录 btn 。我知道我需要通过[OAuth](http://googlemac.blogspot.co.il/2010/09/oauth-sign-in-controllers-for-ios-and.html)连接，然后集成 Tripit API。

但我不明白发生了什么，我应该实现代码的哪一部分（OAuth 和 Trippit）？以及在哪里（按下登录 btn 时应该调用登录的整个 OAuth 代码吗？）。

有没有人有一个例子？或者对 ios 的 API 进行更简单的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:36:54.403

OAuth 用于将您的应用程序连接到用户的 Tripit 帐户。连接后，您将拥有 OAuth 令牌以在发出 API 请求时存储和使用。以下是[来自 Tripit 人员](https://groups.google.com/forum/#!msg/api_tripit/anneDbGGOHw/uHRrG8OQXJwJ)的一些关于在 iOS 上使用 OAuth 和 JSON 库的建议的信息。

# c# - 在列表视图的上下文菜单中实现复制和粘贴

> ID：14380261
> 
> 赞同：0
> 
> 时间：2013-01-17T13:33:33.313
> 
> 标签：c#, winforms, listview, contextmenu

我有一个`ListView`显示计算机文件和文件夹的文件。I have added a context menu that, when right clicked, it can copy/paste/delete/rename etc. When the file is selected its path is saved in a string.

现在我该如何剪切并保存到剪贴板。然后转到一个目录并将文件粘贴到那里。复制和移动到方法似乎不起作用，因为我必须在单独的点击上实现复制和粘贴

```
 private void copyToolStripMenuItem_Click(object sender, EventArgs e)
 {
     string ItemClicked = listView1.FocusedItem.Tag.ToString();
     if (ItemClicked != string.Empty)
     {
         Clipboard.SetFileDropList(ItemClicked);//error
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:07:17.807

您需要传入 a `StringCollection`not a `string`。尝试这个：

```
private void copyToolStripMenuItem_Click(object sender, EventArgs e)
{
    if (listView1.SelectedItems.Count > 0)
    {
        System.Collections.Specialized.StringCollection sc = new System.Collections.Specialized.StringCollection();
        sc.Add(listView1.FocusedItem.Tag.ToString());

        Clipboard.SetFileDropList(sc);
    }
} 
```

但请注意，这只会复制到剪贴板。为了像您想要的那样剪切，您需要确定这意味着什么：`listview`从原始位置删除或从其原始位置删除文件（粘贴后？）

* * *

回应评论：

```
//public variables
StringCollection copiedFiles = new StringCollection();
bool cutWasSelected;

private void copyToolStripMenuItem_Click(object sender, EventArgs e)
{
    CopySelectedFiles();
    cutWasSelected = false;
}

private void cutToolStripMenuItem_Click(object sender, EventArgs e)
{
    CopySelectedFiles();
    cutWasSelected = true;
}
private void CopySelectedFiles()
{
    if (listView1.SelectedItems.Count > 0)
    {
        foreach (ListViewItem item in listView1.SelectedItems)
        {
            copiedFiles.Add(item.Tag.ToString());
        }
    }
}

private void pasteToolStripMenuItem_Click(object sender, EventArgs e)
{
    string destinationFolder;//however you select this
    PasteCopiedFiles(destinationFolder, cutWasSelected);

}

private void PasteCopiedFiles(string DestinationFolder, bool deleteSourceFiles)
{
    if (copiedFiles.Count > 0)
    {
        foreach (string file in copiedFiles)
        {
            if (deleteSourceFiles)
            {
                File.Move(file,Path.Combine(new string[]{DestinationFolder,Path.GetFileName(file)}));
            }
            else
            {
                File.Copy(file, Path.Combine(new string[] { DestinationFolder, Path.GetFileName(file) }));
            }
        }
    }
} 
```

# html - div应该填充高度

> ID：14380266
> 
> 赞同：0
> 
> 时间：2013-01-17T13:33:54.787
> 
> 标签：html, css, background, background-image

我的页面看起来像这样

```
<div id="wrapper">
    <div id="header"></div>
    <div id="main"></div>
</div> 
```

标头具有固定的高度。
主 div 有一个背景图像。

我希望显示主 div 以填满整个屏幕，以便图像显示在最底部。

所以我做了：

```
div#main {
    background-repeat: repeat-x;
    background-position: left bottom;
    background-image: url(url);

    height:100%;
    min-height:100%;
} 
```

这不起作用，如何设置 div 高度以填满整个屏幕？

另一种解决方案是将图像设置为正文：

```
body {
    background-repeat: repeat-x;
    background-position: left bottom;
    background-image: url(url);
} 
```

在这里我遇到了问题，滚动时图像未固定在底部。它实际上固定到窗口大小的高度。

`background-attachment: fixed;`也不是解决方案，因为背景图像根本不滚动。

* * *

## 澄清

当内容太大 => 有滚动条时，背景图像不再固定在底部。这是主要问题。这只是身体的背景颜色

* * *

@AndreaLigios

这就是我的意思：

## ![在此处输入图像描述](../Images/6ed842cec89be27492ec7bae228733cb.png)

# 来源

[在http://themelandia.ilijatovilo.ch](http://themelandia.ilijatovilo.ch)查看它
调整窗口大小直到内容变大，然后向下滚动。
希望你会明白我的意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:35:46.760

**更新 (r5)**

我使用另一个`div`来包含背景，将其设置为`position`-1 ；`fixed``z-index`

```
#bg-trick {
    background: url(http://images1.fanpop.com/images/image_uploads/Naruto-Uzumaki-uzumaki-naruto-964976_692_659.jpg) bottom center no-repeat;
    position: fixed;
   bottom: 0;
   left: 0;
   width: 100%;
   height: 100%;
   z-index: -1;
} 
```

演示在这里更新[http://jsbin.com/idubom/5/edit](http://jsbin.com/idubom/5/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:36:52.653

使用 body 技术，但在 div 样式上...将以下内容添加到您的样式中...

```
#main {
    background-repeat: repeat-x;
    background-position: left bottom;
    background-image: url(url); 
    background-attachment: fixed;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:44:46.490

您首先需要将父元素的高度设置为100%，以使子元素能够拉伸到100%

将 html、body 和 #wrapper 的宽度和高度设置为 100%，如下所示：

```
html, body, #wrapper
{
  height:100%;
  width:100%;
} 
```

现在在#wrapper 中应用背景图像（建议使用#wrapper 而不是#main，但是如果从顶部剪切的图像的某些部分打扰您，请使用#main）

[这](http://jsfiddle.net/28twc/)是 jsfiddle 中的示例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:48:25.500

请查看更新后的[**[DEMO]**](http://jsfiddle.net/vjzuk/2/) **[1](http://jsfiddle.net/vjzuk/2/)**。这就是你要找的。

**描述**：

```
 div#wrapper{
    height: 100%;
    min-height: 100%;
    width: 100%;
    background-color: red;
    background-repeat: repeat-x;
    background-position: left bottom;
    background-image: url(http://s1.ibtimes.com/sites/www.ibtimes.com/files/styles/article_large/public/2012/08/20/298141-apple-aapl-stock-price-becomes-most-valuable-in-history-but-there-s-st.jpg);
    position:absolute;
    bottom:0;
}
div#header {
    height:80px;
    background-color:green;
}

div#main {
    padding: 60px 0px;
    min-height: 200px;
    bottom: 0;
}
div#contentWrap,div#headerWrap {
    width:960px;
    margin:0 auto;
    text-align:center;
} 
```

** 关键是在包装器上添加**绝对位置/固定位置。**

要以全宽显示图像，您需要将 body 设置为 100% 的高度。在您的代码中，休息对我来说似乎很好。

这里也更新了[**DEMO**](http://jsfiddle.net/vjzuk/2/)可能这就是你要找的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T13:54:12.963

**编辑**：基于您的网站的最终解决方案：

添加

```
overflow: auto;
position: fixed; 
```

到您的 div#wrapper 规则。

* * *

编辑：

新解决方案：http: [//jsfiddle.net/SxPyW/2/](http://jsfiddle.net/SxPyW/2/)

添加`top: 0;`,`padding-top: 100px;`和`z-index: 1;`

* * *

你是这个意思吗？

演示：http: [//jsfiddle.net/SxPyW/](http://jsfiddle.net/SxPyW/)

使用绝对定位，但在滚动页面时图像向上滚动（不是`fixed`行为）？

```
#main {  
   /* ... your stuff... */
    border: 2px solid blue;
    position: absolute;
    top: 100px;
    bottom: 0;
    left: 0;
} 
```

（插入边框以显示边界，它们在这里相互重叠，如果您需要边框`top`相应地调整属性）

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-17T13:38:57.237

您已经为您的 div 指定了 100% 的高度，另外向您的 div 添加了一个 innerHTML，因为空 div 会产生此类问题。

```
document.getElementById('my_empty_div').innerHTML = '&nbsp'; 
```

希望有帮助。

# perl - 使用 perl 创建乳胶 pdf

> ID：14380269
> 
> 赞同：0
> 
> 时间：2013-01-17T13:34:06.137
> 
> 标签：perl, pdf, latex

![在此处输入图像描述](../Images/11bdb87ad600c15e766b74003079d734.png)我正在尝试根据从我们的数据库中获取的统计数据自动生成报告。我使用 perl 与数据库通信并将有趣的变量存储为标量/数组等。然后我想在使用 pdflatex 之前创建一个乳胶文件。但是，我在尝试将![在此处输入图像描述](../Images/94ed8e4ca2e426f4d78b773fb6a5c291.png)标量值传递到 pdf 时遇到了一些问题。例如，请参阅下面的代码和输出

```
#!/usr/bin/perl
#
#
# Description: Write a monthly report from the database using latex
#    
# Parameters:
#
# History: 
#
# CVS ID: $Date: 2012/03/01 16:13:03 $ $Revision: 1.1 $
########################################################################

#Add library
use lib "$ENV{HOME}/perllib";

#Call modules
use DBI;                     # Postgres communication functions
use File::Temp qw/tempfile/;
use File::Copy;
use Cwd;

my $date_start = '01/12/12';
my $date_stop  = '31/12/12';

%hash=("01"=>"Jan","02"=>"Feb","03"=>"Mar","04"=>"Apr","05"=>"May","06"=>"Jun","07"=>"Jul","08"=>"Aug","09"=>"Sep","10"=>"Oct","11"=>"Nov","12"=>"Dec");
$date_start=~/([0-9]{2})\/([0-9]{2})\/([0-9]{2}).*/;
my $date_string = "$hash{$2}$3";
my $report_name = "$date_string"."_monthly_report.pdf";

#Pragmas

use warnings;
no warnings "uninitialized";  # Don't warn about unitialized variables#
use strict 'vars';          # Force all variables to have defined scope

my $repdir = "/home/nm/Desktop/";
my ($fh, $filename) = tempfile( SUFFIX => '.tex', DIR => $repdir);

# LaTeX Header information
print $fh <<'END';
\documentclass{article}
\usepackage{underscore}
\usepackage{fullpage}
\usepackage{multicol}
\usepackage[margin=0.5in]{geometry}
\usepackage{graphicx}
\usepackage{array}

\newenvironment{nstabbing}
  {\setlength{\topsep}{0pt}%
   \setlength{\partopsep}{0pt}%
   \tabbing}
  {\endtabbing}

\begin{document}

\begin{center}
\LARGE \bf MONTHLY SUMMARY
\end{center}

END

my $blank = " ";
# Body of LaTeX document
print $fh <<END;
This report details clinical and imaging statistics from $date_start to $date_stop

END
print $fh <<'END';
This report details clinical and imaging statistics from $date_start to $date_stop

\large \bf Clinical Statistics

\normalsize \rm 

\begin{table}[h]
\centering
\begin{tabular}{cccc} 
\hline
Task & AR & DB & GM \\
Cannulation & 1 & 2 & 3 \\
\hline
\end{tabular}
\end{table}

END

# Closing of LaTeX document
print $fh <<'END';
\end{document}
END

# Run LaTeX compiler to generate PDF
system('pdflatex -output-directory ' . $repdir . ' ' . $filename);
my $file_prefix = substr($filename, 0, -4);

#remove aux, log and tex files
my $auxfile = $file_prefix . ".aux";
my $logfile = $file_prefix . ".log";
my $pdffile = $file_prefix . ".pdf";

system('rm ' . $auxfile . ' ' .  $logfile . ' ' . $filename);
$filename="$repdir$report_name";
move($pdffile,$filename);

system('acroread ' . $filename); 
```

为什么

```
print $fh <<END;
This report details clinical and imaging statistics from $date_start to $date_stop
END 
```

给出正确的输出，而以下没有？

```
print $fh <<'END';
This report details clinical and imaging statistics from $date_start to $date_stop
END 
```

我尝试使用前者创建展示的表格，但我无法以良好的格式获得它，例如它会创建一个额外的列并在 GM 旁边放置插管。此外，当使用前者时，我必须在乳胶关键字之前放置一个额外的 /，例如 //bf 而不是 /bf 而在后者（'END'）中我不需要。

理想情况下，我更喜欢使用“END”作为我的表格，并且乳胶格式按预期工作。但是，我无法传递标量和数组值。我该如何管理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:36:40.553

周围的单引号`'END'`意味着您的 here 文档被视为单引号字符串：其中没有插入任何变量。

默认情况下被视为双引号字符串，这就是您的第一个示例有效的原因。您还可以使用双引号明确指定您希望它像双引号字符串：（`<<"END";`这类似于默认行为，但可能更清晰）。

使用插值（双引号）字符串的一个不可避免的结果是您必须转义诸如反斜杠之类的东西——反斜杠在这种字符串中具有特殊含义。你真的必须选择一个或另一个：一个插入变量并需要转义的字符串，或者一个不插入并且不需要转义的字符串。

# iphone - 为 iPhone 5 制作专属应用？

> ID：14380273
> 
> 赞同：0
> 
> 时间：2013-01-17T13:34:16.303
> 
> 标签：iphone, xcode, autolayout

我有一个使用大量定制的应用程序。我使用 4" 显示器构建它，但是当我使用 3.5" 时，它有点乱。然后当我修复 3.5" 时，4" 就搞砸了。有没有办法让应用程序专属于 iPhone 5？就像某些应用程序是某些 iOS 版本独有的？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:59:04.160

不确定你是否可以让它成为 iPhone 5 的专属，但如果你像我一样在这方面苦苦挣扎，你应该看看如何在 IB 中使用约束。我从不知道它们的存在，但它们为我解决了对齐问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:00:05.283

`UIRequiredDeviceCapabilities`通常，您可以通过在 Info.plist 文件中添加密钥来限制您的应用程序可以在哪些设备上运行。

[Apple 文档](http://developer.apple.com/library/ios/#documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/B_DeviceCompatibilityMatrix/DeviceCompatibilityMatrix.html)列出了不同的功能以及它们在不同设备上的支持方式。

不幸的是，对于你的情况，这张桌子上没有 iPhone 5 独有的单一硬件功能。最接近您的要求是要求`bluetooth-le`，但仍包括 iPhone 4S。

# c++ - static_cast<> 中的 C++ 编译错误

> ID：14380275
> 
> 赞同：0
> 
> 时间：2013-01-17T13:34:22.400
> 
> 标签：c++, compiler-errors, static-cast

下面是我的代码

```
Class A
{
  A::A(int num) { }
  int num;
};

class B : public A
{
  B::B(int num):A(num) { }
};

Class D;
Class C
{
  void getNum(A**& somenum) {}
  D *dObj;
};

void C::getNum(A**& somenum)
{
  dObj->getNumber(static_cast<B**>(somenum)); // Error here.
}

Class D
{
  void getNumber(B**& number) 
  { 
      B someValue[5];
      // all the objects in the array are properly created and properly Initalized (skipped that part)

      number[0] = someValue[0]; 
      number[1] = someValue[1];
      //...
   }
}; 
```

我在执行 static_cast 时遇到编译错误。我正在尝试将“someValue”数组中的值分配给“A**& somenum”。你能帮忙怎么做吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:24:39.960

```
void C::getNum(A**& somenum)
{
  dObj->getNumber(static_cast<B**>(somenum)); // Error here.
} 
```

`static_cast`用于执行指向相关类的指针之间的转换，或执行任何其他也可以隐式执行的非指针转换。在您的上述示例中并非如此。所以这就是为什么`static_cast`不能在这里使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:26:42.033

因为 C++ 支持多重继承（和其他特性），所以 a`A *`可以*转换*为 a`B *`但不一定*与*a相同`B *`。在指针类型之间进行转换可以将指针值移动一些字节。

因此，不可能将 a 转换`A **`为 a `B **`，反之亦然。在从外部指针检索值之后，需要进行基数到派生的转换。

多重间接通常是一个坏主意。很难知道哪种数据结构可能会有所帮助，但是对标准库容器的回顾可能会很有见地。无论如何，感谢您浓缩了这个不错的独立示例！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:26:45.250

您的编译器在这里做正确的事情。简而言之，[你不能那样做](http://www.parashift.com/c++-faq-lite/derivedptrptr-to-baseptrptr.html)。您可以在基类指针和派生类指针之间进行转换，前提是它们指向同一个对象。但是基数组和派生数组**不是一回事**。

好消息是你想做的事情比你想象的要容易。派生类指针已经隐式转换为基类指针而不进行强制转换。假设您知道两个数组的大小，并且大小相同，这是一个简单的循环：

```
// Given:
A** someNumbers;
B** someValues;

for (int i = 0; i < size; ++i) {
    *someNumbers[i] = *someValues[i];
} 
```

此外，这类问题也是为什么我们有像[vector](http://en.cppreference.com/w/cpp/container/vector)这样的标准容器。一些非常聪明的人已经为你解决了这个指针疯狂问题。我强烈建议利用它。它会让你的 C++ 体验好很多。

# dialog - 如何在模式对话框中打开 HTML Web 资源

> ID：14380281
> 
> 赞同：1
> 
> 时间：2013-01-17T13:34:36.697
> 
> 标签：dialog, dynamics-crm-2011

我创建了一些 HTML 网络资源。单击某些功能区按钮后，如何在模式对话框中打开它？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:19:12.417

我建议使用[http://crmvisualribbonedit.codeplex.com/](http://crmvisualribbonedit.codeplex.com/)来编辑您的功能区。在您的按钮上，将操作设置为 url 并链接到您的网络资源。在获胜模式设置中选择模型对话框。

这是我在操作的地址字段中的内容：

```
http://server/organization/WebResources/new_htmlpage 
```

new_htmlpage 是网络资源的名称。

这是ribbondiff的CommandDefinitions部分

```
<CommandDefinitions>
  <CommandDefinition Id="new.Form.account.MainTab.ExportData.modalPopup.Command">
    <EnableRules />
    <DisplayRules />
    <Actions>
      <Url WinMode="1" Address="http://server/organization/WebResources/new_htmlpage" PassParams="false" />
    </Actions>
  </CommandDefinition>
</CommandDefinitions> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-31T13:02:57.743

在地址中你应该有 $webresource:new_htmlpage

这样，您就有了到 Web 资源的相对链接！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-12T10:27:44.110

不了解 CRM 2011 但在 2015 年最好不要使用 Url Action 打开 Html Web Resources，MSDN：

> 请勿使用此操作（Url Action）打开实体表单或 Web 资源。将 (RibbonDiffXml) 与使用 Xrm.Utility.openEntityForm 或 Xrm.Utility.openWebResource 的函数一起使用。

同样使用 Url Action，您不能简单地将查询字符串参数发送到 Html Web 资源，并且参数必须在“数据”查询字符串参数中编码。

```
var customParameters = encodeURIComponent("first=First Value&second=SecondValue&third=Third Value");
Xrm.Utility.openWebResource("new_webResource.htm",customParameters); 
```

MSDN：
[Xrm.Utility（客户端参考）](https://msdn.microsoft.com/en-us/library/72a66f93-92df-42b9-a8fd-b6125c7fe83b(v=crm.7)#BKMK_OpenWebResource)

# ruby-on-rails - 在“rails 生成脚手架脚手架名称：字符串 id：整数”之后将 id 更改回 rowid

> ID：14380286
> 
> 赞同：0
> 
> 时间：2013-01-17T13:34:46.163
> 
> 标签：ruby-on-rails, scaffolding, rowid

我有一个使用脚手架创建的 id 列的问题。我使用以下命令生成了一个脚手架：

```
rails generate scaffold scaffoldname name:string id:integer 
```

我将该 id 列用于我想用于下拉菜单的关系`collection_select`。后来我意识到生成 id 是不必要的，因为 rails 会为每个表自动创建 id。

当我想用自己创建的 id 调用相关表时，当然可以使用

`class.relatedClass.id`

后来我意识到这个命令也可以在rails创建id的表中使用，尽管该列在表中被命名为“rowid”。

所以我认为应该可以通过迁移删除自己创建的 id 列。我的想法是，rails 应该自动使用关系的rowid。但是删除自己创建的id后，到处都是错误。Rails 拒绝自动使用 'rowid' 列，尽管它会在脚手架命令中没有指定 id 列的情况下这样做。

如何在调用时以 Rails 使用自己创建的 rowid 的方式删除该自创建的 id 列`class.relatedClass.id`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:45:55.417

在 rails 终端运行它 -

```
rails g migration remove_id_from_scaffoldname id:integer

 rails g migration add_rowid_to_scaffoldname rowid:integer 
```

这将创建两个迁移文件 - 一个用于删除`id`字段，另一个用于添加`rowid`字段。

然后在 rails 终端运行它 -

```
 rake db:migrate 
```

另请注意，rails 将`id`自动创建字段，但不会`rowid`作为您的主键。要限制 Rails 使用您定义的主键，您必须在此处明确定义 -

**您的迁移文件**-

```
create_table :tablename, :primary_key => :rowid do |t|
 # ...
end 
```

**你的模型**-

```
class ModelName< ActiveRecord::Base
  self.primary_key = "rowid"
  ...
end 
```

**注意：**最好将自动生成的 rails`id`用作主键，除非您有正当理由这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:51:36.567

您可以做的一件事是运行向下迁移，从迁移中删除 id 字段并再次运行向上迁移。

当您运行生成时，它会创建一个迁移文件，如下所示：

```
db/migrate/20130117134712_create_scaffoldnames.rb 
```

如果您执行 db/migrate 的 ls，您将看到其他迁移

```
> ls db/migrate
20130114170853_create_server_requests.rb
20130117134712_create_scaffoldnames.rb 
```

您可以通过运行 db:migrate to previous version 来运行向下迁移到 20130117134712_create_scaffoldnames

```
> rake db:migrate VERSION=20130114170853 
```

Then edit your scaffoldnames migration the way you want it, and run db:migrate again.

I do this all the time. The trick is to catch these modifications while they are local to my development environment, so I can do these thing.

Also, if you catch it early enough, you can run

```
rails destroy scaffold scaffoldname 
```

to undo the scaffold generation.

# c# - 在 DataGridView 的特定行中隐藏网格线

> ID：14380288
> 
> 赞同：7
> 
> 时间：2013-01-17T13:34:59.403
> 
> 标签：c#, winforms, datagridview

我想得到一个空白行。所以我想隐藏特定行中的网格线。我怎样才能做到这一点？

有

```
Grid.CellBorderStyle = DataGridViewCellBorderStyle.None; 
```

但这可以应用于网格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:53:01.487

未经测试，但您应该能够通过处理[CellPainting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellpainting.aspx)事件并排除[DataGridViewParts.Border来获得所需的内容](http://msdn.microsoft.com/en-us/library/ms159092.aspx)

```
 e.Paint(e.ClipBounds, DataGridViewPaintParts.All ^ DataGridViewPaintParts.Border);
  e.Handled = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:01:16.020

这并不完美，但我希望你能有所了解。

的设计`DataGridView`

```
this.dataGridView1.CellBorderStyle = DataGridViewCellBorderStyle.None;
this.dataGridView1.AllowUserToResizeRows = false;
this.dataGridView1.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.DisableResizing;

 private void dataGridView1_RowPrePaint(object sender, DataGridViewRowPrePaintEventArgs e)
{
    if (e.RowIndex == -1) return;
    // Calculate the bounds of the row.
    Rectangle rowBounds = new Rectangle(
        this.dataGridView1.RowHeadersWidth, e.RowBounds.Top,
        this.dataGridView1.Columns.GetColumnsWidth(
            DataGridViewElementStates.Visible) -
        this.dataGridView1.HorizontalScrollingOffset + 1,
        e.RowBounds.Height);

    // Paint the custom background. 
    using (Brush backbrush =
       new SolidBrush(this.dataGridView1.GridColor), backColorBrush = new SolidBrush(Color.White))
    {
        using (Pen gridLinePen = new Pen(backbrush))
        {
            //Apply to spicific row
            if (e.RowIndex == 2)
            {
                e.Graphics.FillRectangle(backbrush, rowBounds);

                // Draw the inset highlight box.
                e.Graphics.DrawRectangle(Pens.Blue, rowBounds);
            }
        }
    }
}

private void dataGridView1_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
{
    if (e.RowIndex == -1) return;
    if (e.Value != null)
    {
        // Draw the text content of the cell, ignoring alignment of e.RowIndex != 2
        if (e.RowIndex != 2)
        {
            e.Graphics.DrawString((String)e.Value, e.CellStyle.Font,
           Brushes.Black, e.CellBounds.X + 2,
           e.CellBounds.Y + 2, StringFormat.GenericDefault);
        }
    }
    e.Handled = true;
} 
```

参考：
[DataGridView.RowPrePaint 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowprepaint.aspx)
[DataGridView.CellPainting 事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellpainting.aspx)

# ios - iOS：改变方向时的跳跃动画，setFrame

> ID：14380290
> 
> 赞同：0
> 
> 时间：2013-01-17T13:35:02.480
> 
> 标签：ios, uiview, drawrect, uiinterfaceorientation, uiviewanimation

当 iOS 设备上的方向发生变化时，我正在使用下面的代码来设置视图。这可以给我想要的形状（更宽且高度相同），但是在改变方向时动画会跳动。如果我隐藏`setFrame`代码，动画会非常流畅，但形状当然不会变宽。我尝试添加一个变换，但到目前为止它以不合需要的方式扭曲了视图的形状（因为视图包含带有圆角等的复杂绘制形状）。

```
[myView setFrame:CGRectMake(0, 0, self.view.bounds.size.width-20, 170)];     
[myView setNeedsDisplay];     
CGPoint viewCenter = CGPointMake((myView.frame.size.width/2)+someNum (self.view.bounds.size.height-(someOtherNum/2)-anotherNum));     
myView.center = viewCenter;

//quick unsuccessful test to see if transforms would work:
//myView.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.5, 1); 
```

有什么帮助吗？有没有办法在没有跳跃动画的情况下获得我的结果？

谢谢阅读！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:55:02.973

你试过 UIViewAnimation 吗？

```
[UIView animateWithDuration:0.2 animations:^{
    [myView setFrame:CGRectMake(0, 0, self.view.bounds.size.width-20, 170)];     
    [myView setNeedsDisplay];     
    CGPoint viewCenter = CGPointMake((myView.frame.size.width/2) + someNum
    (self.view.bounds.size.height-(someOtherNum/2)-anotherNum));
    myView.center = viewCenter;
}]; 
```

# bash - 从工作到家庭的 USB Key 中的智能 Mercurial 捆绑包，反之亦然

> ID：14380292
> 
> 赞同：1
> 
> 时间：2013-01-17T13:35:11.043
> 
> 标签：bash, mercurial, sed, awk

这是我知道的一个常见问题，但我想将它提升到一个新的水平，我知道如何使用捆绑包，但是不得不通过“hg log”来查看我的最后更改有点无聊，所以我想使其自动化，通过 bash/awk 检查我的日志并通过日期和邮件识别工作/家庭更改（我在 .hgrc、me@work 和 me@home 中有不同的邮件）。

我已经有了这个 bash 功能，但我必须手动传递基本修订：

```
hgb () {
    hg bundle --base $1 ~/changes-`date +%Y-%m-%d-%H-%M`.hg
} 
```

所以我想要类似的东西：

```
mkwbundle #make work bundle for home 
```

和：

```
mkhbundle #make home bundle for work 
```

我刚开始使用 awk/sed，但我已经看到了奇迹，我在使用 Python 之前询问过，Python 是我几乎可以处理任何事情的 goto 工具。

更新：

对于善变的不可知论者，这就是 hg 日志的样子：

```
changeset:   28:f5200232460e
tag:         tip
user:        Manuel@home
date:        Tue Jan 15 23:39:57 2013 -0500
summary:     Adding DevTodo

changeset:   27:828dbba6830a
user:        Manuel@home
date:        Tue Jan 15 23:24:57 2013 -0500
summary:     login twig

changeset:   26:781477f86f6f
user:        Manuel@home
date:        Tue Jan 15 00:18:54 2013 -0500
summary:     UI mockup

changeset:   25:0c9365b200a8
user:        Manuel@home
date:        Mon Jan 14 23:50:22 2013 -0500
summary:     using twig blocks, remember reuse parent

changeset:   24:a1abfcfcefed
user:        Manuel@work
date:        Mon Jan 14 23:49:44 2013 -0500
summary:     smaller footer

changeset:   23:3cd12b7fb684
user:        Manuel@work
date:        Mon Jan 14 23:20:18 2013 -0500
summary:     test content width 
```

我想在工作时获得基本修订版以制作捆绑包，假设我开始在家中以 rev 24 工作并进行了 4 次更改，然后我在 28 岁，我想获得 24 作为基础 rev 并制作捆绑包，然后在工作中也一样。

编辑：根据下面的@dhunter 评论，脚本的预期输出将是：

```
24 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:45:02.550

我的理解是你想为你的 hgb() $1 获得 rev No#。

所以让我们举个例子。如果你运行`hg log`你的工作：

```
**(some information were omitted)**

changeset: xxx
user:me@work

changeset: xxx
user:someoneelse@work.com

changeset: xxx
user:me@work

changeset: 777:234asdf2342
user:me@work

changeset: xxx-border-xxx
user:me@home

changeset: xxxx
user:me@home 
```

那么你可能想要拥有`777`. 这意味着从**提示**中，您检查用户，并发现用户更改的变更集来自`me@home->@work`或`me@work -> me@home`在上面的示例中，它是`changeset xxx-border-xxx`. 然后你采取以前的变更集rev。从那个版本开始，你想制作一个捆绑包，然后导入你的家庭/工作仓库。我希望我对你的理解是正确的。但是，您确实应该明确提出您的问题。

无论如何....当然可以通过 awk 完成，以上面的示例为例（省略了分支、日期、摘要）

```
hg log| awk -vRS="" 'NR==1{p=$0~/me@work/?"me@work":"me@home";l=$2}NR>1 {if($0!~p){print l;exit}else l=$2}' 
```

如果使用上面的示例：

输出是：

```
777:234asdf2342 
```

如果尝试使用您问题中的示例，我们必须更改电子邮件地址，然后 awk-oneliner 是：

```
hg log| awk -vRS="" 'NR==1{p=$0~/Manuel@work/?"Manuel@work":"Manuel@home";l=$2}NR>1 {if($0!~p){print l;exit}else l=$2}' 
```

输出是：

```
25:0c9365b200a8 
```

我经常使用 hg，但不捆绑。如果您真的想获得 24 转。对于你的 --base，然后看看这个：

```
 awk -vRS="" 'NR==1{p=$0~/Manuel@work/?"Manuel@work":"Manuel@home";}NR>1{if($0!~p){print $2;exit}}' 
```

这给了你：

```
24:a1abfcfcefed 
```

**笔记**

**如果自上次解包后根本没有变更集 ci，则不要使用 awk 行生成包。它将重复生成最后一个包。你应该知道它是否改变了对吗？**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T19:19:16.657

## `hg bundle --base REV`命令类型的修订版本

**使用**：revsets，revsets 别名

**口头形式的任务**：找到最新的变更集，然后提示由另一位作者连续创建的变更集，而不是寻找的变更集

**解决方案**：

*迭代 1*

`max(user('work'))`对于带有变更集的捆绑包，旨在转移**到工作中**（所有在最新的“工作”是家庭作业之后）

`max(user('home'))`对于带有变更集的捆绑包，旨在转移**到家中**（在最新的“家”是工作场所之后）

*迭代 2*

压缩和美化：我懒得打字太多。Bundleable() 函数名称缩短为 ba() 并添加到家庭和工作存储库的 Mercurial 配置文件的“revsetalias”部分

```
 [revsetalias]
 ba('$1') = max(user('$1')) 
```

（'$1' 而不是 $1 用于在参数周围不写'' - 信号字符串 - 手动）

**结果**

`hg bundle --base "ba(home)"`或者`hg bundle --base "ba(work)"`

home|work 定义*目的地，必须为其准备捆绑包*

# sql-server-2005 - SQL Server 2005 中的唯一字段

> ID：14380296
> 
> 赞同：1
> 
> 时间：2013-01-17T13:35:36.920
> 
> 标签：sql-server-2005, constraints

我正在为我工​​作的公司写一个论坛。我正在创建数据库表，并且我已经设置了所有主键，但我希望 user_name 是唯一的，因此在注册时没有两个用户可以拥有相同的用户名。

有人可以说明如何做到这一点，我对 SQL 有基本的了解。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:37:30.873

创建唯一索引。这将强制该列具有唯一值。

CREATE UNIQUE INDEX index_name ON table_name (column_name)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:37:45.360

在 user_name 上创建唯一***索引。***

在 SQL 管理工作室中：

1.  右键单击有问题的表，左键单击设计
2.  右键单击一些空白（或设计表的连接处），左键单击索引/键
3.  单击添加按钮以创建新索引
4.  确保在左侧列表中选择了新的
5.  单击索引列属性的值区域中的三点按钮
6.  从下拉框中选择用户名
7.  点击确定
8.  设置**唯一**为**真**
9.  点击关闭
10.  按 Ctrl+S 保存（将运行相应的后台脚本）

更新：

从[SQL Server 2005 如何创建唯一约束？](https://stackoverflow.com/questions/64981/sql-server-2005-how-create-a-unique-constraint)

> 在 SQL Server Management Studio Express 中：
> 
> 1.  右键单击表格，选择修改
> 2.  右键单击字段，选择索引/键...
> 3.  点击添加
> 4.  对于列，选择您希望唯一的字段名称。
> 5.  ***对于类型，选择唯一键。***
> 6.  单击关闭，保存表。

# java - 如何设置实体纹理

> ID：14380299
> 
> 赞同：0
> 
> 时间：2013-01-17T13:35:44.690
> 
> 标签：java, entity, textures, lwjgl, slick2d

我的纹理实体有问题，加载纹理但未显示纹理时没有错误或异常。这是我的代码：

```
public class StartClass {

private static class Button extends AbstractButtonEntity {

    public Button(int x, int y, int width, int height, Texture texture) {
        super(x, y, width, height, texture);

    }

    @Override
    public void draw() {

        texture.bind();
        glBegin(GL_QUADS);

        glTexCoord2f(0, 0);
        glVertex2i(x, y);

        glTexCoord2f(1, 0);
        glVertex2i(x + width, y);

        glTexCoord2f(1, 1);
        glVertex2i(x + width, y + height);

        glTexCoord2f(0, 1);
        glVertex2i(x, y + height);

        glEnd();

    }

}

Texture background, logo;

public StartClass() {

    try {
        Display.setDisplayMode(new DisplayMode(800, 600));
        Display.setTitle("Space Project");
        Display.create();
    } catch (LWJGLException e) {
        e.printStackTrace();
    }

    background = loadTexture("main_menu/bg");
    logo = loadTexture("main_menu/logo");

    Button ngButton = new Button(300, 200, 200, 45,
            loadTexture("main_menu/ng_button"));

    glMatrixMode(GL_PROJECTION);
    GL11.glViewport(0, 0, 800, 600);
    glLoadIdentity();
    glOrtho(0, 800, 600, 0, 1, -1);
    glMatrixMode(GL_MODELVIEW);
    glEnable(GL_TEXTURE_2D);
    glEnable(GL_BLEND);
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);

    while (!Display.isCloseRequested()) {

        glClear(GL_COLOR_BUFFER_BIT);

        ngButton.draw();

        drawBackground();

        Display.update();
        Display.sync(60);
    }
    Display.destroy();
}

private Texture loadTexture(String key) {
    try {
        return TextureLoader.getTexture("PNG", new FileInputStream(
                new File("res/" + key + ".png")));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
}

public void drawBackground() {

    background.bind();

    glBegin(GL_QUADS);

    glTexCoord2f(0, 0);
    glVertex2i(0, 0);

    glTexCoord2f(1, 0);
    glVertex2i(800, 0);

    glTexCoord2f(1, 1);
    glVertex2i(800, 600);

    glTexCoord2f(0, 1);
    glVertex2i(0, 600);

    glEnd();

    logo.bind();

    glBegin(GL_QUADS);

    glTexCoord2f(0, 0);
    glVertex2i(44, 44);

    glTexCoord2f(1, 0);
    glVertex2i(756, 44);

    glTexCoord2f(1, 1);
    glVertex2i(756, 115);

    glTexCoord2f(0, 1);
    glVertex2i(44, 115);

    glEnd();

}

public static void main(String[] args) {
    new StartClass();
}

    } 
```

这是AbstractButtonEntity：

```
 public abstract class AbstractButtonEntity implements ButtonEntity {

protected int x, y, width, height;

protected String key;

protected Texture texture;

protected Rectangle hitbox = new Rectangle();

public AbstractButtonEntity(int x, int y, int width,
        int height, Texture texture) {

    this.x = x;
    this.y = y;
    this.width = width;
    this.height = height;
    this.texture = texture;
}

@Override
public void setLocation(int x, int y) {
    this.x = x;
    this.y = y;

}

@Override
public void setX(int x) {
    this.x = x;
}

@Override
public void setY(int y) {
    this.y = y;

}

@Override
public void setWidth(int width) {
    this.width = width;

}

@Override
public void setHeight(int height) {
    this.height = height;

}

@Override
public int getX() {
    return x;
}

@Override
public int getY() {
    return y;
}

@Override
public int getWidth() {
    return width;
}

@Override
public int getHeight() {
    return height;
}

@Override
public boolean intersects(ButtonEntity other) {
    hitbox.setBounds(x, y, width, height);
    return hitbox.intersects(other.getX(), other.getY(), other.getWidth(),
            other.getHeight());
}

} 
```

对不起，如果是新手问题，但我是java新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:20:55.073

为什么在方法 loadTexture 中有 2 个返回值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T15:10:22.570

问题已解决 - 在 loadTexture 方法中必须在 catch 中返回 null

```
private Texture loadTexture(String key) {
try {
    return TextureLoader.getTexture("PNG", new FileInputStream(
            new File("res/" + key + ".png")));
} catch (FileNotFoundException e) {
    e.printStackTrace();
    return null;
} catch (IOException e) {
    e.printStackTrace();
    return null;
}

} 
```

# html - Wordpress：如何连接到 edit.php

> ID：14380306
> 
> 赞同：1
> 
> 时间：2013-01-17T13:36:37.813
> 
> 标签：html, wordpress, list, hook, add

我想在 edit.php 文件中的管理帖子列表下方添加一个 html 标记。到目前为止，我通过使用“admin_init”操作钩子成功地做到了这一点，但是，html 标记也出现在其他页面中（例如 post-new.php），这不是我想要的。我怎样才能只定位edit.php文件？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:16:20.337

如果您的代码将内容放在您想要的页面上，但页面太多，请尝试以下操作：

```
if (basename($_SERVER['SCRIPT_NAME']) == 'edit.php') {
    // your code here
} 
```

这会将其限制为仅 edit.php 脚本。

`$_REQUEST['action']`您可能还需要通过检查和来测试查询参数“action”和“action2”的某些值`$_REQUEST['action2']`。

# google-maps - 我需要在多边形下方的地图上捕获点击事件

> ID：14380311
> 
> 赞同：2
> 
> 时间：2013-01-17T13:36:50.497
> 
> 标签：google-maps, google-maps-api-3

我有一张地图，其中我在标记周围放置了圆形多边形。当我在地图中单击时，标记会移动到该位置。当我在圆圈中单击时，它不会移动标记，因为我认为 Polygon 会捕获单击。我可以以某种方式阻止多边形捕获点击吗？

![标记屏幕截图](../Images/a91d9c5d741ed78a4f345303da7a0455.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:39:29.000

将多边形的`clickable`-option 设置为`false`

# c++ - 如何将一大块内存直接读入std::vector？

> ID：14380316
> 
> 赞同：7
> 
> 时间：2013-01-17T13:37:00.033
> 
> 标签：c++, c++11, placement-new

我有一个来自文件`x`的巨大连续数组。`fread`

如何将此块放入`std::vector<>`? 换句话说，我更喜欢将结果放入`std::vector<>`而不是数组，但我希望生成的 C++ 代码与将块直接放入数组的纯 C 版本一样高效。

通过搜索，我想我可能不得不以某种形式使用placement-new，但我不确定调用顺序和所有权问题。另外，我需要担心对齐问题吗？

我正在测试 with `T = unsigned`，但我希望有一个合理的解决方案适用于任何 POD 结构。

```
using T = unsigned;
FILE* fp = fopen( outfile.c_str(), "r" );
T* x = new T[big_n];
fread( x, sizeof(T), big_n, fp );

// how do I get x into std::vector<T> v
// without calling a gazillion push_backs() or copies ?!?

delete[] x;
fclose( fp ); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T13:38:57.273

您使用设置向量大小的`std::vector` [构造函数](http://en.cppreference.com/w/cpp/container/vector/vector)[`std::vector::data`](http://en.cppreference.com/w/cpp/container/vector/data)，并用于获取指向已分配内存的指针。

与您的使用保持一致`fread`：

```
std::vector<T> x(big_n);
fread(x.data(), sizeof(T), big_n, fp); 
```

* * *

正如其他人所指出的，`fread`如果类型`T`不是[POD 类型](https://stackoverflow.com/a/7189821/734069)，则使用很可能不起作用。然后，您可以使用 C++ 流并将[`std::istreambuf_iterator`](http://en.cppreference.com/w/cpp/iterator/istreambuf_iterator)文件读入向量。然而，这有一个缺点，它会遍历文件中的所有项目，如果`big_n`听起来像听起来那么大，那么这可能是一个性能问题。

* * *

但是，如果文件真的很大，我更推荐使用[内存映射](http://en.wikipedia.org/wiki/Memory-mapped_file)来读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:53:47.393

这将使用将文件读入向量

```
#include <vector>
#include <fstream>
#include<iterator>
// ...

std::ifstream testFile("testfile", std::ios::binary);
std::vector<unsigned char> fileContents((std::istreambuf_iterator<unsigned char>(testFile)),
                           std::istreambuf_iterator<unsigned char>()); 
```

这个答案来自之前的答案：[https ://stackoverflow.com/a/4761779/942596](https://stackoverflow.com/a/4761779/942596)

# android - 如何创建部分不可见的视图

> ID：14380320
> 
> 赞同：6
> 
> 时间：2013-01-17T13:37:15.200
> 
> 标签：android, view

我想要实现的是像图片中的效果： ![在此处输入图像描述](../Images/f82800519e6f1b0a5373084e02ed3638.png)

所以基本上有一个`TextView`慢慢消失。我不希望将整体`View`设置为 50% 透明，而是将其左侧部分设置为 0% 透明，然后在右侧平滑地变为 100% 透明。

我知道某些组件（例如`ListView`）使用它，但是是否可以以非常简单的方式手动完成？

提前感谢您的回答

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T16:08:37.613

首先，创建一个带有 alpha 渐变的形状。将 XML 放入您的可绘制目录中。我们称它为 gradient_view.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:angle="90"
        android:startColor="#FFFFFFFF"
        android:endColor="#00FFFFFF"
        android:type="linear"/>
</shape> 
```

现在在 TextView 右侧的布局中创建一个视图。您需要适当地设置宽度和高度，并根据需要在视图中定位（带有 layout_toTheRightOf 的 RelativeLayout 会很好用）。

```
<View android:layout_width="100dp"
    android:layout_height="50dp"
    android:background="@drawable/gradient_view"/> 
```

在代码的正确位置，为其设置动画。将 -200 更改为您需要的任何值（或者更好的是，找到渐变视图的左 X 并减去 TextView 的左边缘以找到要移动的量）。

```
TranslationAnimation anim = new TranslateAnimation(0, -200, 0, 0);
anim.setDuration(1000);
myTextView.startAnimation(anim); 
```

[http://developer.android.com/reference/android/view/animation/TranslateAnimation.html](http://developer.android.com/reference/android/view/animation/TranslateAnimation.html)

还有一些工作要做，但这是您最需要的。

祝你好运

# web-services - 在 AX 2012 中，如何将 WCF 服务公开为 REST

> ID：14380321
> 
> 赞同：4
> 
> 时间：2013-01-17T13:37:15.713
> 
> 标签：web-services, rest, axapta, dynamics-ax-2012, ax

现在我正在公开 AX 2012 的服务，如何配置它以将其公开为 REST？

我必须在 MAC Xcode 中使用此服务来进行 IOS 集成，我相信如果它是 REST 而不是 SOAP，它会更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T00:02:21.690

好吧，有一个有趣的问题，但没有直接的答案:(

我想说没有简单的方法可以将您的 Ax WCF 服务公开为 REST，但是有一些变通方法。这就是我要做的。

您可以创建自己的 ASP.NET WebAPI 项目，该项目可以托管在 IIS 上，也可以在服务或可执行文件中自行托管。（创建简单 WebAPI 项目的[WebAPI 网站](http://www.asp.net/web-api)和[教程）。](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)这个 WebAPI 项目实际上使用 ASP.NET MVC 4.0，因此您可以创建控制器来包含获取数据的逻辑。

在本教程中，他们正在加载产品，而在控制器中，一个数组用于演示目的。

```
Product[] products = new Product[] 
    { 
        new Product { Id = 1, Name = "Tomato Soup", Category = "Groceries", Price = 1 }, 
        new Product { Id = 2, Name = "Yo-yo", Category = "Toys", Price = 3.75M }, 
        new Product { Id = 3, Name = "Hammer", Category = "Hardware", Price = 16.99M } 
    }; 
```

好吧，现在您可以做的是通过对 Ax WCF 服务的服务调用来替换它。通过这样做，外部用户实际上可以向您的 WebAPI 站点发出 HTTP 请求，WebAPI 将为您处理所有路由并返回 JSON 格式。

例如：

*   “http://localhost:xxxx/api/products/1”
*   “http://localhost:xxxx/api/products?category=hardware”

在后台，控制器本身可以使用 WCF 的 SOAP 方式对 Ax 进行服务调用。

# crystal-reports-8.5 - Crystal Report：导出为 PDF，asp .net 中的报表中缺少参数值

> ID：14380325
> 
> 赞同：1
> 
> 时间：2013-01-17T13:37:24.827
> 
> 标签：crystal-reports-8.5

我使用存储过程设计了一个水晶报告，它采用两个日期时间参数。我将这两个参数放在报表标题中，当我通过提供参数值运行报表时，它会在报表标题中使用参数值适当地显示数据。但是当我尝试在 asp .net Web 应用程序中使用此水晶报表导出为 PDF 时，我遇到了问题。我将数据集设置为 ReportDocument 对象的 SetDataSource() 函数，并且数据填充正确，**但参数值未显示在报表标题中。**因为它需要显示报告的日期范围。

我执行了以下代码以导出为 PDF。我没有使用任何 ReportViewer，因为我只想在新窗口中保存或打开 pdf 文件。为此，我只是在按钮单击事件中执行了以下代码，并且数据正确，但报告标题中缺少参数值。请帮忙..

```
 protected void btnExport_Click(object sender, EventArgs e)
    {
        ParameterDiscreteValue dateFrom = new ParameterDiscreteValue();
        dateFrom.Value = DateTime.Parse(txtDateFrom.Text.ToString());

        ParameterDiscreteValue dateTo = new ParameterDiscreteValue();
        dateTo.Value = DateTime.Parse(txtDateTo.Text.ToString());

        ReportDocument pdfReport = new ReportDocument();

        pdfReport.Load(Server.MapPath(@"rptClearingChargeBranchWiseHV.rpt"));

        reportName = "Report" + DateTime.Today.Year.ToString() +
                             DateTime.Today.Month.ToString() + DateTime.Today.Day.ToString();

        pdfReport.SetDatabaseLogon("user", "pass", "server", "DataBase");
        pdfReport.Database.Tables[0].SetDataSource(GetData().Tables[0].DefaultView);
        //GetData() return the data set
        pdfReport.SetParameterValue("@DateFrom", dateFrom);
        pdfReport.SetParameterValue("@DateTo", dateTo);

        pdfReport.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, reportName);
        Response.End();
    } 
```

# iphone - 在 iPhone 窗口上添加视图，甚至在 UINavigationBar 上方

> ID：14380329
> 
> 赞同：0
> 
> 时间：2013-01-17T13:37:35.083
> 
> 标签：iphone, ios, uinavigationbar

我想在我的`UIViewController`. 视图还必须覆盖`UINavigationBar`. 我的覆盖视图覆盖了我的应用程序的视图，但它不覆盖导航栏。如何覆盖导航栏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:45:17.680

您可以通过在窗口上添加视图轻松地做到这一点

创建 AppDelegate 的引用并使用它的 window 属性来添加 subView。// 在你的 .h 文件中声明这个，然后在你的 .m 文件中导入 AppDelegate.h 文件

```
 id _AppDelegate;
    _AppDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
    [[_AppDelegate window] addSubview:yourView]; 
```

# python - GAE 开发服务器上的 SMTP 电子邮件 - 如何？Python 2.5.4、GAE SDK 1.7.4

> ID：14380336
> 
> 赞同：1
> 
> 时间：2013-01-17T13:37:50.320
> 
> 标签：python, google-app-engine, gmail

尝试在本地测试电子邮件功能。

我启动开发服务器时启用了以下选项： `--smtp_host=smtp.gmail.com --smtp_user=myemailadress@gmail.com --smtp_password=whatever`

导致以下异常：

`ERROR 2013-01-17 13:35:34,621 _webapp25.py:468] This class/method is not available.` `File "C:\Python25\lib\socket.py", line 387, in readline buf.write(buffer(data, 0, nl)) File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver.py", line 884, in NotImplementedFake raise NotImplementedError('This class/method is not available.') NotImplementedError: This class/method is not available.`

如何从本地开发服务器测试电子邮件功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:51:59.580

我最终让它工作了，但是：

a) 运行开发服务器时必须使用 Python 26

b) 根据此 S/O 答案手动破解 mail_stub.py 文件：[Error sent e-mail via SMTP server on App Engine development server](https://stackoverflow.com/questions/968445/error-sending-e-mail-via-smtp-server-on-app-engine-development-server)

# jquery - 带有 jQ uery 1.9.0 的 knockout.js 在 IE 8 中中断

> ID：14380344
> 
> 赞同：3
> 
> 时间：2013-01-17T13:38:02.113
> 
> 标签：jquery, internet-explorer, knockout.js

此代码直接取自 knockoutjs.com 教程：

```
<ul data-bind="foreach: months">
    <li>
        The current item is: <b data-bind="text: $data"></b>
    </li>
</ul>

<script type="text/javascript">
    ko.applyBindings({
        months: [ 'Jan', 'Feb', 'Mar', 'etc' ]
    });
</script> 
```

当我使用 IE 8 在[http://jsfiddle.net/SaZv8/](http://jsfiddle.net/SaZv8/)上运行它时，只要您不包含 jQuery 1.9.0，它就可以工作。包含 1.9.0 时会出现`Object doesn't support this property or method`错误。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:49:04.750

看起来错误发生在 jsfiddle 的代码中：“heyoffline.js”有一个 IE8 不支持的 addEventListener 调用。注意：我可以选择其他库来重现它，所以它与 jQuery1.9 无关。

# c - 收到奇怪的信号

> ID：14380349
> 
> 赞同：1
> 
> 时间：2013-01-17T13:38:24.950
> 
> 标签：c, linux, signals

[我按照此处](http://linux.die.net/man/3/pthread_sigmask)所述在我的应用程序上设置了信号过滤器，但我阻止了所有信号。

```
sigfillset (&signalSet); 
```

我收到了奇怪的信号 #36，这在公共文档和 /usr/include/bits/signum.h 中都没有描述。但是，看起来这个信号影响了主线程中的 sem_wait() ，并且没有被阻塞。我发现了这样一个异常：

> ::sem_wait() 失败，代码：4（中断的系统调用）

使用 Red Hat 4.1.2-44（gcc 版本 4.1.2 20080704）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:07:17.527

这是一个 POSIX 实时信号。它们在 SIGRTMIN+1 到 SIGRTMAX 的范围内（您应该在 /usr/include/bits/signum.h 中找到）。

有关详细信息，请参阅 man 7 信号，“实时信号”部分。

如果你用

`sigfillset(&signalset); sigprocmask(SIG_BLOCK,&signalset,NULL);`

或者

`sigfillset(&signalset); pthread_sigmask(SIG_BLOCK,&signalset,NULL);` 仍然得到信号 36，我猜你使用的库函数也在使用信号。

您可以使用“strace”来查看是否以及何时调用信号函数。

# c# - For循环中的变量不变

> ID：14380351
> 
> 赞同：1
> 
> 时间：2013-01-17T13:38:36.767
> 
> 标签：c#, variables, loops

在我的程序中，我在“button1_Click”中定义了一些变量，并且“button1_Click”函数中还有一个“for”循环。在那个循环中，我希望更改这些变量，但它们没有。我应该做什么...通过引用传递它们？如果是，如何？

```
private void button1_Click(object sender, EventArgs e)
        {
            double t=0;
            double x = double.Parse(X0.Text);
            double z = double.Parse(Z0.Text);
            double y = double.Parse(Y0.Text);
            double u = double.Parse(U0.Text);
            double tn = double.Parse(Tn.Text);
            double h = double.Parse(textbox_h.Text);

            for (int i = 0; i < (tn / h); i++)
            {

                double K1x = h * fx(t, x, y, z, u);

                double K2x = h * fx(t + h / 2, x + K1x / 2, y + K1y / 2, z + K1z / 2, u + K1u / 2);

                double K3x = h * fx(t + h / 2, x + K2x / 2, y + K2y / 2, z + K2z / 2, u + K2u / 2);

                double K4x = h * fx(t + h, x + K3x, y + K3y, z + K3z, u + K3u);

                x =x+ (1 / 6)*(K1x + 2 * K2x + 2 * K3x + K4x);
                richTextBox1.Text += "X(" + (h * (i + 1)).ToString() + ")=" + x.ToString();

            } 
```

一切都是正确的，但在最后一行，x 的新值不会进入 x，而旧值仍然存在。请注意，fx、fz、fy、fu 是我之前定义的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:41:21.433

问题在于`1 / 6`，`0`因为两者`1`都是`6`，`int`所以结果也会是`int`。An`int`不能有任何小数，因此它们被简单地丢弃，不会发生四舍五入。`0.16666666...`没有小数`0`是.

要修复它，请至少将两者之一设为双精度或浮点数：

```
1.0 / 6 
```

完整的行现在应该如下所示：

```
x = x + (1.0 / 6)*(K1x + 2 * K2x + 2 * K3x + K4x); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:42:56.713

你有你的表情

```
1 / 6 
```

这是一个整数除法并给出 integer `0`。考虑使用

```
1.0 / 6.0 
```

反而。

# jquery - jQuery 选择器包含括号

> ID：14380352
> 
> 赞同：4
> 
> 时间：2013-01-17T13:38:37.610
> 
> 标签：jquery

我有一个带有以下标记的选择列表：

```
<select name="dropdown[users]">
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">2</option>
</select> 
```

我想获取选择列表选项的值。

jQuery是怎么做到的？

我努力了：

```
$('select[name="dropdown[users]"]'); 
```

这似乎不起作用

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:41:17.473

使用`val()`：

```
var selectValue = $('select[name="dropdown[users]"]').val(); 
```

[**示例小提琴**](http://jsfiddle.net/RoryMcCrossan/92tcy/)

名称中包含的事实`[]`不是一个因素，因为您已将属性值括在引号中。

如果您删除了引号，则需要使用 转义大括号`\\`，如下所示：

```
var selectValue = $('select[name=dropdown\\[users\\]]').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:44:49.883

要获取值，您必须使用 .val() 方法

## [http://jsfiddle.net/xPnvE/1/](http://jsfiddle.net/xPnvE/1/)

```
$('select[name="dropdown[users]"]').change(function(){
  alert($(this).val());
}); 
```

# android - 使用 Android.mk 复制 /system 中的多个 txt 文件

> ID：14380357
> 
> 赞同：10
> 
> 时间：2013-01-17T13:38:58.117
> 
> 标签：android, android-ndk, makefile, android-source

目标：我想使用 Android.mk 在 /system （Android 设备）中复制**多个txt 文件**

我的发现：

我们可以使用两种方法复制文件 1) 使用 PRODUCT_COPY_FILES。这是从设备//makefile.mk 完成的

前任：

```
PRODUCT_COPY_FILES := \
  frameworks/base/data/etc/telephony.gsm.xml:system/etc/permissions/telephony.gsm.xml \
  some/other/sourc/file:some/destination \
  some/other/sourcefile2: some/destination 
```

2) 使用 BUILD_PREBUILD

前任 ：

```
##############copy txt file##################
include $(CLEAR_VARS)
#LOCAL_MODULE := mydata.txt
LOCAL_MODULE_TAGS := optional
LOCAL_MODULE_CLASS := ETC
LOCAL_MODULE_PATH := $(TARGET_OUT)/myfolder
LOCAL_SRC_FILES := mydata.txt
include $(BUILD_PREBUILT) 
```

为使上述工作在 build/target/product/core.mk 中输入 mydata.txt

我的具体查询是：现在我可以使用第二种方法复制多个文件，方法是一个接一个地重写上面的代码。但我想使用第二种方法（BUILD_PERBUILD）复制多个 txt 文件，而无需为所有文件重写代码。

1) 我可以通过一个包含 $(BUILD_PREBUILT) 调用来做到这一点吗？

2）BUILD_MULTI_PREBUILD可以用来解决目的吗？如何 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-18T09:57:05.267

好的，我发现了一个 hack（我知道它存在），我没有在寻找它，但它以一种非常简单的方式有效并解决了我的问题。

您可以在 mk 文件中运行 shell 命令。

因此，如果您想一次复制多个文件，请使用以下代码并将其放入您的 mk 文件中。

在以下场景中，我需要复制的文件存在于 file_folder ( directory ) 中，该目录与我的 mk 文件所在的目录相同。我想将 file_folder 中存在的所有文件复制到 system/file_folder。

```
#create a directory in /system/
    $(shell mkdir -p $(TARGET_OUT)/file_folder/)
#copy stuff
    $(shell cp $(LOCAL_PATH)/file_folder/* `pwd`/$(TARGET_OUT)/file_folder/) 
```

这工作得很好。所以现在我们总共有 3 种方法可以做到这一点。希望它会帮助像我这样的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-20T21:27:02.230

请参阅 Android 字体处理中的以下示例： [https ://android.googlesource.com/platform/frameworks/base/+/master/data/fonts/Android.mk#66](https://android.googlesource.com/platform/frameworks/base/+/master/data/fonts/Android.mk#66)

这将为单个字体文件创建一个 makefile 函数，并使用 foreach 循环遍历多个文件： [https ://android.googlesource.com/platform/frameworks/base/+/master/data/fonts/Android.mk# 79](https://android.googlesource.com/platform/frameworks/base/+/master/data/fonts/Android.mk#79)

您可以使用任何机制来填充 font_src_files

# xpages - 隐藏字段 $$viewid、$$xspsubmitid、$$xspexecid、$$xspsubmitvalue 和 $$xspsubmitscroll 的意义

> ID：14380359
> 
> 赞同：2
> 
> 时间：2013-01-17T13:39:01.800
> 
> 标签：xpages

当我查看 XPage 的源代码时，我看到了一些隐藏字段`$$viewid`、、、`$$xspsubmitid`和。有一些类似[this](http://xpagesblog.com/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC)和[this](http://dontpanic82.blogspot.com/2010/03/xpages-making-validation-behave.html)的文章解释了包含触发更新的事件处理程序的 ID。其他领域似乎没有多少信息可用。`$$xspexecid``$$xspsubmitvalue``$$xspsubmitscroll``$$xspsubmitid`

这些领域的意义何在？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T15:55:26.297

好的，我能找到的细节。

**$$viewid** = 包含与该 XPage 关联的后端控件树的 ID。如果您正在访问后端控件，则需要它。在“XPages Portable Command Guide”中有详细说明。

**$$xspsubmitid** = 加载您要执行的事件的事件处理程序 ID。

**$$xspsubmitvalue** = 您提交的值。

**$$xspexecid** = 您希望验证器在其上运行的控件的执行 ID（据我所知）。

**$$xspsubmitscroll** = 这用于将提交按钮在页面上的位置传递给服务器，以便它知道在返回时滚动回该位置。

它们主要由 XSP.fireEvent() 使用（由 XSP.attachEvent() 内部使用。私有函数）。如果您想查看与这些相关的 DOJO 代码，它包含在**XSPClientDojo.uncompressed.js**文件中。

另一个阅读这些内容的地方是：

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_events.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.ui.doc/wpd_controls_events.html)

# java - 如何更改手指按下和手指释放时的列表视图背景渐变

> ID：14380361
> 
> 赞同：0
> 
> 时间：2013-01-17T13:39:17.873
> 
> 标签：java, android, listview, user-interface, gradient

如何在点击时将背景渐变更改为某些内容并在手指释放时获取原始渐变...我使用列表视图适配器创建的列表确实会更改为渐变，但当我抬起手指时不会变回原始渐变.. xmls 下面

**主要的.xml**

```
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:divider="#EDEDED"
    android:dividerHeight="1dp"
    android:listSelector="@drawable/list_selector"
  /> 
```

**list_selector.xml**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!-- Selector style for listrow -->

<item android:state_focused="true"
    android:drawable="@drawable/gradient_bg_hover"
    />

<item
 android:state_selected="false"
    android:state_pressed="false"
    android:drawable="@drawable/gradient_bg" />

    <item android:state_pressed="true"
    android:drawable="@drawable/gradient_bg_hover" />

   <item android:state_selected="true"
    android:state_pressed="false"
    android:drawable="@drawable/gradient_bg_hover" />

</selector> 
```

**row_list.xml**

```
 <TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/txtListText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:padding="15dp"
    android:textSize="45sp"

    /> 
```

gradient_bg 和 gradient_bghover 是渐变 xml 的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:58:41.617

我认为，您不能一次定义 state_selected 和 state_pressed ......

工作应该是这样的：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:drawable="@drawable/_bt_week_selected" />
    <item android:state_focused="true" android:drawable="@drawable/_bt_week_selected"/>
    <item android:state_pressed="true" android:drawable="@drawable/_bt_week_selected"/>
    <item android:drawable="@drawable/_bt_week_normal"/>
</selector> 
```

并将列表项（row_list）的背景设​​置为选择器......就像`android:background="@drawable/selector"`......而不是使用`android:listSelector="@drawable/list_selector"` 我不知道你的是否也能正常工作......

# selenium - 创建一个批处理文件来调用 testng.xml 来运行 selenium 脚本

> ID：14380362
> 
> 赞同：1
> 
> 时间：2013-01-17T13:39:23.870
> 
> 标签：selenium, batch-file, testng

我需要帮助来创建一个`.bat`要调用的文件，该文件`testng.xml`具有要运行的所有测试。根据此[链接](https://groups.google.com/forum/?fromgroups=#!topic/testng-users/MwHAox2g538)，我创建了该`.bat`文件。这是我在里面写的：

```
java -cp "C:\Program Files\Selenium Execution Engine\lib\library\testng-5.8-jdk15.jar";"C:\POM_Newdemo\EF_Progression\bin\testscripts" org.testng.TestNG "C:\POM_Newdemo\EF_Progression\testng.xml" 
```

在哪里：

*   `-cp`: 是类路径
*   `C:\Program Files\Selenium Execution Engine\lib\library\testng-5.8-jdk15.jar`: 是我的 testng jar 文件的路径
*   `C:\POM_Newdemo\EF_Progression\bin\testscripts`: 是我的测试的 .class 文件的路径
*   `C:\POM_Newdemo\EF_Progression\testng.xml`: 是我`testng.xml`文件的路径

它抛出错误如下：

```
[Parser] Running:
  C:\POM_Newdemo\EF_Progression\testng.xml

Suite
Total tests run: 0, Failures: 0, Skips: 0

[ERROR]:
Cannot find class in classpath: testscripts.Test_Demo 
```

请让我知道如何解决此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T18:09:16.013

```
1| Copy any one of the below methods in a text file
2| Save it as yourtext.bat
3| Open the batch file created to run the test. 
```

方法**#1**

```
cd C:\Workspace\projectname
java -cp C:\Workspace\projectname\lib\*;C:\Workspace\projectname\bin org.testng.TestNG testng.xml 
```

方法**#2**

```
cd C:\Workspace\projectname
set ProjectPath=C:\Workspace\projectname
echo %ProjectPath%
set classpath=%ProjectPath%\bin;%ProjectPath%\lib\*
echo %classpath%
java org.testng.TestNG %ProjectPath%\testng.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T11:20:05.083

请尝试以下方法。如果它不起作用，请提供 test.xml 文件的完整路径。请让我知道它是否有效

```
java -cp "C:\Program Files\Selenium Execution Engine\lib\library\testng-5.8-jdk15.jar":C:\POM_Newdemo\EF_Progression\src\testscripts" org.testng.TestNG testng.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T14:14:49.857

在 maven 项目中使用 surefire 插件的最佳方法

```
<plugin>
 <groupId>org.apache.maven.plugins</groupId>
 <artifactId>maven-surefire-plugin</artifactId>
 <version>3.0.0-M1</version>
  <configuration>
   <suiteXmlFiles>
    <suiteXmlFile>testng.xml</suiteXmlFile> *if the testng.xml is in different folder then pom.xml please include the path*
   </suiteXmlFiles>
 </configuration>
</plugin> 
```

配置 testng.xml 后，创建一个包含以下文本的批处理文件

```
cd C:\workspace\projectdir (the folder where pom.xml is available)
mvn test 
```

全部完成！:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-24T10:54:52.327

最后

cd C:\workspace\projectdir（pom.xml 所在的文件夹） mvn test

是终极的

# asp.net - 何时编译和构建，何时不用于 .NET？

> ID：14380364
> 
> 赞同：1
> 
> 时间：2013-01-17T13:39:29.273
> 
> 标签：asp.net, .net

关于何时需要重新编译整个 .NET 应用程序，我有几个一般性问题： 具体来说，可以简单地上传什么文件：

1.  我知道对 web.config 的任何更改都不需要重新编译，并且该文件可以简单地上传到任何开发站点。

2.  对 .css 文件的更改需要重新编译？或者我可以简单地将该文件上传到开发站点吗？

3.  更改 .aspx 文件需要重新编译？或者我可以简单地将该文件上传到开发站点吗？

4.  更改 .cs 文件需要重新编译？我会认为是的。

5.  更改任何 .js 文件都需要重新编译应用程序？或者我可以简单地将该文件上传到开发站点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:43:46.253

1.  当 web.config 更改时，ASP.NET/IIS 将重新启动应用程序并重新编译任何 .aspx 或 App_Code 文件
2.  .css 文件是静态的，不能编译
3.  .aspx 文件可以预编译，但不是必须的
4.  对 App_Code 之外的 .cs 文件的更改需要编译
5.  .js 文件是静态的，不能编译

仅供参考 - App_Code 仅适用于网站项目，Web 应用程序项目需要重新编译所有 .cs 文件更改

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:45:01.513

对任何静态资源的更改都不需要您重新编译应用程序 - 这包括`.css`、`.js`、 图像等。

对`.aspx`/`.master`页面的更改确实会重新编译 - 但这是由 IIS 自动完成的。

更改为`web.config`不需要重新编译，因为这是配置 - 它只需要重新加载，IIS 将通过回收应用程序来完成。

对`.cs`文件的更改将需要重新编译 - 否则如果使用 Web 应用程序项目，网站 dll 文件将不是最新的。在网站项目中，您可以使用该`app_code`目录——IIS 会自动重新编译它。

# c++ - C++ 中的可索引跳过列表实现

> ID：14380368
> 
> 赞同：1
> 
> 时间：2013-01-17T13:39:59.823
> 
> 标签：c++, data-structures, skip-lists

到目前为止，我发现的所有跳过列表实现都使用键并将它们与值相关联。但是我需要的是一个跳过列表，我可以在其中在索引位置 i 处插入一个值，以便可以使用索引递增 1 来查询该索引 i 之后的所有值。

这里有一个澄清的小例子：

```
//pseudocode
//let skipList sk be a list of ints, containing 5 elements.

//insert 6 at index 3
sk.insert(3, 6);

//insert 5 at index 3
sk.insert(3, 5);

//get index 4
int value = sk.get(4); 
```

现在`value`应该是 6，因为在索引 3 处插入了 5，所以值 6 向上移动了一个索引。

可以使用跳过列表构建这样的数据结构，请参阅此处的可索引跳过列表： [http ://en.wikipedia.org/wiki/Skip_list](http://en.wikipedia.org/wiki/Skip_list)

但我找不到实现。拥有这样的数据结构将非常有用，例如在大列表上有许多随机插入和访问的情况下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:56:44.787

您发布的维基百科页面中似乎有一个实现链接：http: [//code.activestate.com/recipes/576930/](http://code.activestate.com/recipes/576930/)

它虽然是蟒蛇。

或者，采用现有的 C++ 实现并向其添加链接宽度并实现索引查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T12:22:13.507

我在 C# 中实现了一个 skiplist 类，它有一个返回集合中第 k 个最大值的方法。它完全符合您的`get`方法所需。

但是，插入方法没有指定位置，因为它始终保持列表排序，因此位置由在现有值中的查找确定。

看看[https://github.com/htoma/algorithms/blob/master/Algorithms/Algorithms/Sources/SkipLists/SkipList.cs](https://github.com/htoma/algorithms/blob/master/Algorithms/Algorithms/Sources/SkipLists/SkipList.cs)，方法`FindKLargestElement`

# python - 从 pandas DataFrame 导出 LaTeX 表

> ID：14380371
> 
> 赞同：59
> 
> 时间：2013-01-17T13:40:24.257
> 
> 标签：python, latex, dataframe, pandas

有没有一种简单的方法可以将数据框（甚至其中的一部分）导出到 LaTeX？

*我在谷歌搜索，只能找到使用 asciitables 的解决方案。*

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-17T16:30:24.830

DataFrames 有一个`to_latex`（参见[pandas 文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_latex.html)）方法：

```
>>> df = pd.DataFrame(np.random.random((5, 5)))
>>> df  
          0         1         2         3         4
0  0.886864  0.518538  0.359964  0.167291  0.940414
1  0.834130  0.022920  0.265131  0.059002  0.530584
2  0.648019  0.953043  0.263551  0.595798  0.153969
3  0.207003  0.015721  0.931170  0.045044  0.432870
4  0.039886  0.898780  0.728195  0.112069  0.468485

>>> print(df.to_latex())
\begin{tabular}{|l|c|c|c|c|c|c|}
\hline
{} &         0 &         1 &         2 &         3 &         4 \\
\hline
0 &  0.886864 &  0.518538 &  0.359964 &  0.167291 &  0.940414 \\
1 &  0.834130 &  0.022920 &  0.265131 &  0.059002 &  0.530584 \\
2 &  0.648019 &  0.953043 &  0.263551 &  0.595798 &  0.153969 \\
3 &  0.207003 &  0.015721 &  0.931170 &  0.045044 &  0.432870 \\
4 &  0.039886 &  0.898780 &  0.728195 &  0.112069 &  0.468485 \\
\hline
\end{tabular} 
```

您可以简单地将其写入 tex 文件。

默认情况下，latex 会将其呈现为：

![因为它会出现在乳胶中](../Images/1959240609e13fb553ba16c16765b079.png)

*注意：（`to_latex`参见[pandas 文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_latex.html)）方法提供了几个配置选项。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T13:47:25.300

只需写入文本文件。这不是魔法：

```
import pandas as pd
df = pd.DataFrame({"a":range(10), "b":range(10,20)})
with open("my_table.tex", "w") as f:
    f.write("\\begin{tabular}{" + " | ".join(["c"] * len(df.columns)) + "}\n")
    for i, row in df.iterrows():
        f.write(" & ".join([str(x) for x in row.values]) + " \\\\\n")
    f.write("\\end{tabular}") 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-08-06T16:03:03.963

如果你想保存它：

```
with open('mytable.tex', 'w') as tf:
     tf.write(df.to_latex()) 
```

# makefile - 将来自不同目录的单独目标文件链接到二进制文件中

> ID：14380374
> 
> 赞同：0
> 
> 时间：2013-01-17T13:40:35.013
> 
> 标签：makefile

我一直在研究一个 Makefile，它将在所有子目录中搜索`src`包含源代码文件的目录并编译对象。稍后它会将对象链接到`bin`与 Makefile 位于同一目录中的目录中的二进制文件中。每个二进制文件都将以其链接目标文件的子目录命名。对不起，如果这听起来有点混乱......

这是一个图表来说明我的意思：

```
 Makefile
 app1-\
    src-\
      main.c
    obj-\
      main.o
 app2-\
    src-\
      main.c
    obj-\
      main.o
 bin-\
   app1
   app2 
```

目前，每当我运行 Makefile 时，它​​都会很好地编译目标文件，但是在链接它们时，它会尝试将所有这些文件链接到第一个二进制文件中。

错误：

```
Generating dependencies for problem2.1/src/2-1.c...
Compiling problem2.1/src/2-1.c...
Generating dependencies for problem2.1/src/2-1.c...
Compiling problem2.1/src/2-1.c...
Linking bin/problem2.1...
./problem2.2/obj/2-2.o: In function `main':
/cygdrive/c/Users/Hans/git/opsys/task_01/problem2.1/src/2-1.c:9: multiple definition of `_main'
./problem2.1/obj/2-1.o:/cygdrive/c/Users/Hans/git/opsys/task_01/problem2.1/src/2-1.c:9: first defined here
collect2: ld returned 1 exit status
Makefile:57: recipe for target `bin/problem2.1' failed
make: *** [bin/problem2.1] Error 1 
```

我认为这里的主要问题是我误解了关于 Makefiles 的一些东西，有什么办法可以做我想做的事情吗？

到目前为止，唯一类似的就是使用make的递归功能，这是唯一的方法吗？

我的Makefile：

```
SRCEXT   = c
SRCDIR   = src
OBJDIR   = obj
BINDIR   = bin

SUBDIRS := $(shell find . -type d -name '*$(SRCDIR)*' -exec dirname {} \; | uniq)
SRCDIRS := $(shell find $(SUBDIRS) -name '*.$(SRCEXT)' -exec dirname {} \; | uniq)
OBJDIRS := $(subst src,obj,$(SRCDIRS))

SRCS    := $(shell find $(SRCDIRS) -name '*.$(SRCEXT)')
OBJREF  := $(subst src,obj,$(SRCS))
OBJS    := $(patsubst %.$(SRCEXT),%.o,$(OBJREF))
APPS    := $(subst ./,,$(SUBDIRS))

DEBUG    = -g
CFLAGS   = -Wall -pedantic -ansi -c $(DEBUG) $(INCLUDES)

ifeq ($(SRCEXT), cpp)
CC       = $(CXX)
else
CFLAGS  += -std=gnu99
endif

.PHONY: all clean distclean

all: $(BINDIR)/$(APPS)

$(BINDIR)/$(APPS): buildrepo $(OBJS)
    @mkdir -p `dirname $@`
    @echo "Linking $@..."
    @$(CC) $(OBJS) $(LDFLAGS) -o $@

$(OBJS): $(SRCS)
    @echo "Generating dependencies for $<..."
    @$(call make-depend,$<,$@,$(subst .o,.d,$@))
    @echo "Compiling $<..."
    @$(CC) $(CFLAGS) $< -o $@

clean:
    $(RM) -r $(OBJDIRS)

distclean: clean
    $(RM) -r $(BINDIR)

buildrepo:
    @$(call make-repo)

define make-repo
    for dir in $(OBJDIRS); \
    do \
            mkdir -p $$dir; \
    done
endef

# usage: $(call make-depend,source-file,object-file,depend-file)
define make-depend
    $(CC) -MM -MF $3 -MP -MT $2 $(CFLAGS) $1
endef 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:24:11.477

您的 makefile 有几个问题。

*   如果你[`find`](http://linux.die.net/man/1/find)支持它，你可以使用`-printf '%h '`而不是`-exec dirname {} \;`

    `dirname`这节省了为每个目录启动一个单独的进程 ( )。

*   `APPS := $(subst ./,,$(SUBDIRS))`给`app1 app2`,`$(BINDIR)/$(APPS)`给`bin/app1 app2`,*不是* `bin/app1 bin/app2`.

    你可以使用`APPS := $(subst ./,$(BINDIR),$(SUBDIRS))`，然后`all: $(APPS)`

*   `@mkdir -p `dirname $@``相当于`@mkdir -p $(BINDIR)`

*   您使用 . 创建依赖项`make-depend`，但不会在 makefile 中包含生成的依赖项文件。

    你必须`include $(wildcard *.d)`，或类似的东西，在你的 makefile 的某个地方。

*   `$(BINDIR)/$(APPS): buildrepo $(OBJS)`意味着，*所有*应用程序都依赖于*所有*对象。

    当您最终将应用程序与 链接时`$(CC) $(OBJS) $(LDFLAGS) -o $@`，它会尝试将所有对象组合到一个应用程序中，这会导致您的错误消息。

您可以通过在子目录中使用多个 makefile 并使用循环遍历它们来解决此问题

```
$(SUBDIRS):
    for d in $(SUBDIRS); do $(MAKE) -C $$d; done 
```

另一种解决方案是`make-depend`分别为每个应用程序创建依赖项和规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:00:27.427

这种“构建你能找到的一切”的方法有点危险，而且解决方案也很棘手。您最好维护一个目标列表，每个目标都有其来源列表。但如果你真的想这样做...

基本问题在这里：

```
$(BINDIR)/$(APPS): buildrepo $(OBJS)
    ...
    @$(CC) $(OBJS) $(LDFLAGS) -o $@ 
```

（目标是错误的，但没关系。）

目标可能是`bin/app1`，但是`$(OBJS)`是“./app1/obj/main.o ./app2/obj/main.o”，所以这就是链接器试图链接的内容。（也是`./app2/obj/main.o`一个先决条件。）我们需要的是为目标量身定制的对象列表，如下所示：

```
bin/app1: ./app1/obj/main.o 
```

这*应该*很容易（通过从 中筛选“app1” `$(OBJS)`），但事实*并非如此*，因为 Make 的模式匹配非常糟糕。

如果我们事先知道“./app1”，我们就可以构造规则：

```
$(BINDIR)/$(notdir ./app1): $(subst .c,.o,$(subst /src/,/obj/,$(shell find ./app1/src -name '*.$(SRCEXT)'))) 
```

我们可以像这样将丑陋与“./app1”分开：

```
template = $(BINDIR)/$(notdir $(1)): $(subst .c,.o,$(subst /src/,/obj/,$(shell find $(1)/src -name '*.$(SRCEXT)')))

$(eval $(call template,./app1)) 
```

我们不想对每个二进制文件都这样做。但是我们可以让*Make*为每个二进制文件执行此操作：

```
template = $(BINDIR)/$(notdir $(1)): $(subst .c,.o,$(subst /src/,/obj/,$(shell find $(1)/src -name '*.$(SRCEXT)')))

$(foreach dir,$(SUBDIRS),$(eval $(call template,$(dir))) 
```

现在我们需要的是规则的主体：

```
$(BINDIR)/%:
    @mkdir -p `dirname $@`
    @echo "Linking $@..."
    @$(CC) $^ $(LDFLAGS) -o $@ 
```

和正确的默认规则：

```
all: $(addprefix $(BINDIR)/, $(APPS)) 
```

# wordpress - 有没有办法在不同域的 Wordpress 中启用网络登录？

> ID：14380379
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:05.213
> 
> 标签：wordpress, login

我在 WAMP 和虚拟主机上运行了 Wordpress 安装。该网络有两个站点，`site.local`换句话说`subsite.site.local`，它是子域安装。

现在，我注意到我可以将域更改为`subsite.site.local`我喜欢的任何内容，例如，`anothersite.local`只要我的 hosts 文件和 httpd.conf 中的配置正确，它就可以工作，但仅限于前端。当我尝试登录时，Wordpress 不会让我登录，而是将我重定向回登录屏幕，没有任何信息或错误。

有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:07:01.533

在 wp-config.php 中使用它：

```
$allowed_domains = array(
   'site.local',
   'anothersite.local'
);

$cookie_domain = (in_array($_SERVER['SERVER_NAME'], $allowed_domains)) ? $_SERVER['SERVER_NAME'] : $allowed_domains[0];
define('COOKIE_DOMAIN', $cookie_domain); 
```

它检查用户的域是否在允许的域列表中，并动态调整 cookie 域以匹配它。如果不匹配，则默认为数组中的第一个域。

# android - 根据其他活动的选择更改列表视图行背景：

> ID：14380383
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:20.893
> 
> 标签：android, android-listview, android-activity

按照我的 privious qustion，你可以在这里看到：

[如何在 2 个元素之间为 android 创建自定义列表视图？](https://stackoverflow.com/questions/14345840/how-to-create-custom-listview-for-android-with-margins-between-2-elements)

由于我在这里得到的帮助，我取得了一些进展。所以我现在的状态是：

[http://i.stack.imgur.com/yK5to.jpg](https://i.stack.imgur.com/yK5to.jpg)

按下其中一项任务的蓝色部分会弹出以下色板活动：

[http://i.stack.imgur.com/UWmIg.jpg](https://i.stack.imgur.com/UWmIg.jpg)

这里所有的 5 种颜色都是按钮，我需要做的是检查按下了什么颜色，然后更改打开色板活动的任务的背景图。

只是我不明白它是如何完成的，有什么建议吗？在色板活动中，每个按钮都有一个“setOnClickListener”功能。

这是我的列表活动的 java 代码：

```
public class SkyGiraffeAppActivity extends Activity implements AdapterView.OnItemClickListener, View.OnClickListener {
// All static variables
static final String TAG = "SkyGiraffeAppActivity";
// XML node keys
static final String KEY_TASK = "task"; // parent node
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_TIME = "time";
static final String KEY_PRIORITY  = "priority";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ListView list = new ListView(this);
    list.setDivider(null);
    list.setDividerHeight(0);
    setContentView(list);

    final ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
    Log.e(TAG, "Created Array");

    XMLParser parser = new XMLParser();

    Log.e(TAG, "Getting xml from raw folder");
    InputStream xml = getResources().openRawResource(R.raw.taskslists); // getting XML

    Log.e(TAG, "reading xml file to string");
    String sxml = parser.readTextFile(xml);

    Log.e(TAG, "creating dom element from string");
    Document doc = parser.getDomElement(sxml); // getting DOM element

    Log.e(TAG, "getting node list of all the elements");
    NodeList nodeList = doc.getElementsByTagName(KEY_TASK);

    Log.e(TAG, "looping through all the elements");
    for (int i = 0; i < nodeList.getLength(); i++) 
    {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nodeList.item(i);
        Log.e(TAG, "element number: " + i + " added to hash map");
        // adding each child node to HashMap key => value
        map.put(KEY_ID, parser.getValue(e, KEY_ID));
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
        map.put(KEY_TIME, parser.getValue(e, KEY_TIME));
        map.put(KEY_PRIORITY, parser.getValue(e, KEY_PRIORITY));

        // adding HashList to ArrayList
        menuItems.add(map);
    }

    // Adding menuItems to ListView
    ListAdapter adapter = new SimpleAdapter(this, menuItems, R.layout.row,
          new String[] { KEY_TITLE, KEY_DATE, KEY_TIME, KEY_PRIORITY}, 
          new int[]    { R.id.text_title, R.id.text_date, R.id.text_time ,R.id.image_priority}){

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View row =  super.getView(position, convertView, parent);
            View left = row.findViewById(R.id.bchangecolor);
            left.setTag(position);
            left.setOnClickListener(SkyGiraffeAppActivity.this);
            View right = row.findViewById(R.id.barrow);
            right.setTag(position);
            right.setOnClickListener(SkyGiraffeAppActivity.this);

            ImageView prioriy = (ImageView) row.findViewById(R.id.image_priority);

            Log.e(TAG, "pririty number: " + menuItems.get(position).get(KEY_PRIORITY));
            int number = Integer.valueOf(menuItems.get(position).get(KEY_PRIORITY));
            switch ( number )
            {
            case 1:
                prioriy.setImageResource(R.drawable.priority_first);
                break;
            case 2:
                prioriy.setImageResource(R.drawable.priority_second);
                break;
            case 3:
                prioriy.setImageResource(R.drawable.priority_third);
                break;
            case 4:
                prioriy.setImageResource(R.drawable.priority_fourth);
                break;
            case 5:
                prioriy.setImageResource(R.drawable.priority_fifth);
                break;
            default:
                prioriy.setImageResource(R.drawable.priority_first);
            }

            return row;
        }
    };

    list.setAdapter(adapter);
    list.setOnItemClickListener(this);  
}

public void onClick(View v) {
     switch(v.getId()) {
        case R.id.bchangecolor:
            Log.e(TAG, "pressed the color change button on" + v.getId());
            startActivity(new Intent(getApplicationContext(),TaskColorChangeActivity.class));
            break;
        case R.id.barrow:
            Log.e(TAG, "pressed the arrow button on" + v.getId());
            Intent intent = createIntentwithExtra(v);
            startActivity(intent);
            break;
        default:
            break;
        }   
}

public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
    Log.e(TAG, "pressed the row itself" + v.getId());
    Intent intent = createIntentwithExtra(v);
    startActivity(intent);  
}

public Intent createIntentwithExtra(View v)
{
    Intent intent = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
    String title = ((TextView) v.findViewById(R.id.text_title)).getText().toString();
    String date = ((TextView) v.findViewById(R.id.text_date)).getText().toString();
    String time = ((TextView) v.findViewById(R.id.text_time)).getText().toString();
    intent.putExtra(KEY_TITLE, title);
    intent.putExtra(KEY_DATE, date);
    intent.putExtra(KEY_TIME, time);

    return intent;
}} 
```

和我的色板活动：

```
public class TaskColorChangeActivity extends Activity 
{
static final String TAG = "TaskColorChangeActivity";    
Button bBlue, bGreen, bYellow, bOrange, bRed;

protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.colorplate);

    bBlue = (Button) findViewById(R.id.bblue);
    bGreen = (Button) findViewById(R.id.bgreen);
    bYellow = (Button) findViewById(R.id.byellow);
    bOrange = (Button) findViewById(R.id.borange);
    bRed = (Button) findViewById(R.id.bred);

    bBlue.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {   
        }
    });
    bGreen.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) {   
        }
    });
    bYellow.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {   
        }
    });
    bOrange.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        }
    });
    bRed.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        }
    });
}} 
```

如果有权限的人将链接更改为实际图像，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:51:58.630

您可以将活动中的一些数据返回给您的父活动

（[如何从 TabHost Activity 返回结果（startActivityForResult）？](https://stackoverflow.com/questions/2497205/how-to-return-a-result-startactivityforresult-from-a-tabhost-activity)）

您可以返回您选择的颜色，并且对于这些数据，您可以做任何您想做的事情。

# php - 如何在 Visual Studio 上使用 Phalanger 连接到 mysql 数据库？

> ID：14380386
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:22.363
> 
> 标签：php, visual-studio, phalanger

我在 Visual Studio 上安装了 Phalanger 3.0，php 工作正常，但是如何创建数据库并连接到数据库？在哪里放置配置和 Web.Config 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:00:59.603

使用 Phalanger，您将以与 PHP 相同的方式连接到 MySQL（PHP 代码相同）。

您唯一需要做的就是在应用程序配置中启用 MySQL 扩展。我建议下载这个用 C# 实现的，以获得最佳性能和 64 位功能： http: [//phalangermysql.codeplex.com/releases/view/86375](http://phalangermysql.codeplex.com/releases/view/86375)。

以下是标准 .NET 配置：

1.  包中的 DLL 可以简单地复制到 Web 应用程序的 /Bin 文件夹中，或者安装到全局程序集缓存中。
2.  web.config 文件必须位于 Web 应用程序的根目录中。
3.  将以下内容复制到 web.config `<configuration><phpNet><classLibrary>`，：

    `<add assembly="PhpNetMySql, Version=3.0.0.0, Culture=neutral, PublicKeyToken=2771987119c16a03" section="mysql"/>`

让我知道它如何为您工作，谢谢！

# c# - 为什么我对 OdbcConnection.Open() 的调用没有返回？

> ID：14380389
> 
> 赞同：1
> 
> 时间：2013-01-17T13:41:28.660
> 
> 标签：c#, odbc

这是我的代码：

```
 OdbcConnection odbcConn = new OdbcConnection("DSN=VIP_Company355");

    try
    {
        odbcConn.Open();
        int pleaseReachMe = 5;
    }
    catch (Exception ex)
    {

    } 
```

当调试器到达

```
 odbcConn.Open(); 
```

它不会返回，也不会抛出异常。文档说默认超时为 15 秒。但经过 15 秒后，没有抛出异常。此外，如果我用一个无意义的值替换我的连接字符串，它会立即引发错误。

有任何想法吗？

编辑：

我启用了 ODBC 数据源管理员的跟踪，它在日志文件中留下了以下内容：

```
parentProcessId 1518-2754   ENTER SQLDriverConnectW 
    HDBC                0x005BF570
    HWND                0x00000000
    WCHAR *             0x63118B34 [      -3] "******\ 0"
    SWORD                       -3 
    WCHAR *             0x63118B34 
    SWORD                       -3 
    SWORD *             0x00000000
    UWORD                        0 <SQL_DRIVER_NOPROMPT> 
```

（为简洁起见，仅包括最后一条语句）它进入了 SQLDriverConnectW 过程，但它从不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:43:39.573

我将连接字符串更改为以下内容：

```
"DSN=VIP_Company355;GR_UID=userName;GR_PWD=myPass;" 
```

我不确定为什么 GR_ 修改有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:25:23.590

尝试制作几个变量以在班级的最低层使用。

即，做一个`string connString = "DSN=VIP_Company355"`

一个`OdbcConnection conn = new OdbcConnection(connString);`

然后使用：`conn.Open();`

IE

```
public void SomeFunction()
{    
    string connString = "DSN=VIP_Company355";

    if (OpenConnection(connString))
    {
        MessageBox.Show("Connection Established");
    }
}

public bool OpenConnection(string connString);
{
    try 
    {            
        OdbcConnection conn = new OdbcConnection(connString);

        conn.Open();

        return true;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message());

        return false;
    }
} 
```

编辑：

语法什么的。只是关于将这些变量放在类的顶部的注释。这不是必需的，但是如果您发现您正在重用您的连接字符串或您的 OdbcConnection，那么将它们设为常量可能是值得的，但这完全取决于您。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T13:47:27.277

```
int pleaseReachMe = 5; 
```

是一个没有使用的局部变量，因此调试器断点不会命中，可能是因为编译器将删除该行。

[Visual Studio 调试器不会进入未使用的变量声明](https://stackoverflow.com/questions/666624/visual-studio-debugger-doesnt-step-into-unused-variable-declarations)

# svn - 如何将 svn 外部从一个工作副本复制到另一个？

> ID：14380390
> 
> 赞同：1
> 
> 时间：2013-01-17T13:41:30.533
> 
> 标签：svn, tortoisesvn

假设我有 ProjectA 和 ProjectB，bot 在以下树结构中使用相同的库 Library1 作为外部库：

```
ProjectA
  src
  Library1

ProjectB
  src
  Library1 
```

我已经签出了 ProjectA 的工作副本，我想签出 ProjectB 的工作副本。与服务器的连接非常慢，Library1 相当大。

过去可以只将 Library1 子目录从一个项目复制到另一个项目。svn 然后会自动检测到外部已经签出并使用它，而无需再次传输。

当工作副本的目录结构在 subversion 1.7.0 中更改时，这停止工作。

有什么方法可以让我仍然使用已签出的 Library1 副本来加快 ProjectB 的签出速度？

（当然，这不是单次签出，只有两个项目，而是很多项目。）

编辑：我所说的奇怪的事情不允许我将 Library1 子目录从 ProjectA 复制到 ProjectB 显然是由 TortoiseSNV 引起的。它似乎在复制尚未完成时更新了一些文件，这导致 .svn 子目录中的不一致。在与 BeyondCompare 进行目录比较并用原始文件覆盖修改后的文件后，一切都按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:49:51.850

> 有什么方法可以让我仍然使用已签出的 Library1 副本来加快 ProjectB 的签出速度？

如果**Library1 的源**对两个项目都是通用的（即 Lib 存储在独立的第三个位置），当前状态不干净 /for me/ - 您将能够将 Library1*子树*从 project-WC 复制到 project-WC（因为目标外部的 WC 嵌套在 WC 中，对于共享源，这些 WC 将是相同的）。

AFAICS，您的 Lib 现在来自不同的来源，因此 - 不能在 WC 之间自由转移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:44:29.477

尝试使用 签出第二个项目`--ignore-externals`，然后将 Libray1 从项目 1 复制到项目 2（或者如果您的操作系统允许，则创建一个符号链接）。这应该够了吧。

# java - 如何从 FTP 服务器获取文件并转换为附件文件？

> ID：14380395
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:39.253
> 
> 标签：java, email, outputstream

该方案是从 ftp 服务器获取文件并作为电子邮件附件发送。我想使用“org.apache.commons.net.ftp.FTPClient”从 FTP 服务器获取有关连接、文件名成功的文件。但我不知道如何正确转换为文件。

这是我的代码：

```
FTPClient ftp = new FTPClient();
byte bytes[]=new byte[1024];
int read = 0;

//connection,filename --success

 StringBuffer str = new StringBuffer("MyFiles");
      str.append("-XYZ-");
      str.append(new SimpleDateFormat("ddMMyyyy").format(new Date()));
      str.append(".pdf");
      System.out.println("getting file --> "+str.toString()); 
 System.out.println("getting stream ftp -->"+ ftp.retrieveFileStream(str.toString()));

InputStream input = ftp.retrieveFileStream(str.toString());
ByteArrayOutputStream out = new ByteArrayOutputStream();
while ((read = input.read(bytes)) != -1) { --> null pointer line 503
   out.write(bytes,0,read);
 }      
File temp = null;    
temp = new File(str.toString());
Utils.convertByteArrayToFile(temp, out.toByteArray());

public static void convertByteArrayToFile(File outputFile, byte[] inputArray) throws IOException{
    BufferedOutputStream bos=null;
    try{
        FileOutputStream fos=new FileOutputStream(outputFile);
        bos=new BufferedOutputStream(fos);
        bos.write(inputArray);
    }finally{
        if(bos!=null){
            try{
                bos.flush();
                bos.close();
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
} 
```

结果是..

获取文件 --> MyFiles-XYZ-17012013.pdf

获取流 ftp --> org.apache.commons.net.io.SocketInputStream@409db838

com.java.EmailForm.sendEmail 处的 java.lang.NullPointerException（EmailForm.java:503）

有任何想法吗 ？谢谢 MRizq

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:09:07.077

Better you can use method [RetrieveFile](http://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,%20java.io.OutputStream)).

```
File localFile = new File("/path/XYZ-17012013.pdf");
FileOutputStream fout = new FileOutputStream(localFile);

boolean success = fTPClient.retrieveFile(ftpServerFilePath, fout);

if (success) {
    fout.flush();
    fout.close();
} else {
    System.out.println("Retrieve failure");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:56:14.707

看起来您正在从 FTPClient 获取输入流，因此这不是空指针的原因。我的猜测是您忘记初始化字节数组`bytes`并且它为空。此外，除非您需要将其存储在其他位置，否则您可能不需要在将输入流的内容用作附件之前将其实际转储到文件中。您可能可以直接从内存中的二进制数据创建它。

# linux - 如何使用 xterm 在另一个终端中生成进程？

> ID：14380397
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:50.063
> 
> 标签：linux, bash, shell

在我的 bash 脚本中，我尝试使用以下命令在另一个终端窗口中运行一个进程：

```
xterm -e /home/mohit/a.out 
```

现在我想使用`tee`如下命令重定向输出：

```
xterm -e /home/mohit/a.out 2>&1 | tee logfile 
```

但我没有得到任何东西`logfile`。任何线索，为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:02:12.290

看起来 xterm 生成一个新窗口并在该窗口中执行 -e 。一旦该命令完成，它就会退出。

因为它是在一个新的 shell 中打开的，所以它的 stderr stdout 等附加到该窗口。

如果您想要打开该窗口并保持打开状态以打开日志文件，您需要引用您希望由 xterm 执行的所有内容，否则 bash 将自行解释重定向和管道。例如

```
xterm -e /home/mohit/a.out 2>&1 | tee logfile 
```

会被 bash 翻译成：

使用 xterm 执行命令 /home/mohit/a.out 然后将 stderr 重定向到 stdout 并通过管道进入 tee。

由于 xterm 使用新的标准输出等生成新窗口。 tee 没有得到任何输入，因此日志文件中没有任何内容

尝试

```
xterm -e '/home/mohit/a.out 2>&1 | tee logfile' 
```

这将迫使 xterm 执行整个管道

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:46:39.463

@peteches 已经展示了如何通过将整个命令行提供给`-e`.

您还可以要求[`xterm`](http://linux.die.net/man/1/xterm)将所有输出捕获到日志文件中`-l`

```
xterm -l -e /home/mohit/a.out 
```

它记录到一个名为`XtermLog.XXXXXX`或的文件中`Xterm.log.hostname.yyyy.mm.dd.hh.mm.ss.XXXXXX`

您可以指定日志文件`-lf`

```
xterm -l -lf logfile -e /home/mohit/a.out 
```

缺点是，这不适用于现有文件。`logfile`在 xterm 使用它之前，您必须删除它。

# ios - 使用多个 UIWindow 避免耦合

> ID：14380398
> 
> 赞同：0
> 
> 时间：2013-01-17T13:41:53.703
> 
> 标签：ios, uikit

我正在尝试实现一个加载视图，它将全局表示屏幕的加载状态。此视图将以屏幕边界矩形为中心。

这个实现将独立于任何 ViewController，所以我的第一个猜测是在应用程序委托中寻找一个方法（让我们将它命名为：-(void)showLoaderView）。

制作另一个包含加载视图的 UIWindow 是否是一个不错的选择。一旦应用程序委托方法“showLoaderView”被调用，这个窗口将很容易地显示在另一个窗口的顶部。

如果我使用常规视图和 addSubview 方法，问题在于这会产生不良耦合，因为加载器视图的位置将取决于调用 -(void)showLoaderView 的时刻。

如果您对此问题有任何其他建议，请我很乐意阅读。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:45:44.113

如果您的应用程序处于将直接进入其处于非活动状态之前所在的视图的状态，那么它将不需要加载屏幕，因为资源仍然可用。

只有当应用程序完全终止时，您才应该真正看到加载屏幕，并且从那时起，除了标准的第一个视图之外，您将无法返回到其他视图。

因此，我只需制作一个 UIViewController 来显示加载视图，然后推送到主视图。

**编辑评论的答案**

为它制作一个单独的xib

您甚至可以使用它自己的方法使其成为单例，该方法从 appDelegate 中获取 UINavigationViewController，然后以模态方式从堆栈中的 topViewController 呈现自己，然后自行关闭

然后在应用程序的任何地方你可以做的`[[MyLoadingView sharedInstance] show];`事情，你会得到模态视图，当它完成加载时，它也会自行关闭。

**编辑 2**

您仍然可以将操作推送到 BG 线程。

只需使用 NSOperationQueue。

也许您需要一个用于显示目的的加载视图和一个实际完成工作的加载单例类。这样加载视图可以被关闭，加载类仍然可以在后台完成工作。

# c# - 使用 LINQ Select 扩展方法后的项目顺序

> ID：14380399
> 
> 赞同：10
> 
> 时间：2013-01-17T13:42:07.510
> 
> 标签：c#, .net, linq

> **可能重复：**
> [使用 LINQ 保留顺序](https://stackoverflow.com/questions/204505/preserving-order-with-linq)

假设我有以下`Person`类进一步用于声明一个数组`Person`：

```
public class Person
{
    public int Id { get;set; }
    public string Name { get; set; }
    public int Age { get; set; }
}

var persons = new[] {
    new Person { Id = 1, Name = "John", Age = 40 },
    new Person { Id = 2, Name = "John", Age = 30 },
    new Person { Id = 3, Name = "John", Age = 35 },
}; 
```

我使用以下 LINQ扩展方法`Age`从 的数组中提取 ，`Person``Select`

```
var ages = persons.Select(p => p.Age).ToArray; 
```

LINQ 是否保证派生数组中项的顺序与源数组中项的顺序相匹配，以便`ages`数组按以下顺序排列？

```
40
30
35 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T13:45:39.403

> LINQ to Objects 操作符实际上并没有改变它们的原始数据源——它们构建了由数据源有效支持的序列。改变排序的唯一操作是 OrderBy/OrderByDescending/ThenBy/ThenByDescending - 即使这样，对于相同排序的元素，这些操作也是稳定的。当然，很多操作都会过滤掉一些元素，但是返回的元素会按照相同的顺序排列。

来自[Jon Skeet 的回答](https://stackoverflow.com/a/204512/128217)。

返回 IEnumerable 的每个操作的细分在同一个问题中进一步下降： [https ://stackoverflow.com/a/204777/128217](https://stackoverflow.com/a/204777/128217)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T13:45:44.313

`Select()`保持秩序。完全可以。`Distinct()`使用,`ToDictionary()`和时要小心`ToLookup()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:44:48.347

这会因您使用的对象和扩展方法而有所不同。这是一篇简要介绍类型以及您可以期待什么的帖子：[Preserving order with LINQ](https://stackoverflow.com/questions/204505/preserving-order-with-linq)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:45:46.880

当然！

项目按照它们在列表中的顺序进行处理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T13:51:44.293

大多数情况下，选择采用可枚举并按顺序对每个元素应用操作。

你可以这样想：

```
public static class Linq
{
    // We take in some data structure that supports enumeration and some function to apply to each element.
    public static IEnumerable<TResult> Select<T, TResult>(this IEnumerable<T> source, Func<T, TResult> operation)
    {
        foreach (var item in source)
        {
            // Here we simply return the next element
            // when the caller wants an item.
            yield return operation(item);
        }
    }
} 
```

# forms - 如何在嵌入表单上添加外键

> ID：14380400
> 
> 赞同：0
> 
> 时间：2013-01-17T13:42:17.253
> 
> 标签：forms, entity

我有 2 个实体患者

```
class Patients 
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

     /**
     * @ORM\OneToOne(targetEntity="ContactAddress", mappedBy="patient" ,cascade={"persist"})
     */
    protected $contactaddress; 
```

和联系地址

```
class ContactAddress
{
     /**
     * @ORM\OneToOne(targetEntity="Patients", inversedBy="contactaddress")
     * @ORM\JoinColumn(name="patient_id", referencedColumnName="id")
     */
     protected $patient;
} 
```

我确实嵌入了表单它几乎可以工作，但只有字段 patient_id 为 NULL。我希望患者的 id 将是 ContactAddress 中的外键我的控制器的一部分

```
 $entity  = new Patients();
   $request = $this->getRequest();
   $form    = $this->createForm(new \Surgery\PatientBundle\Form\PatientsType(), $entity);
   $form->bindRequest($request);

    if($request->getMethod()=='POST')  //sending form
    {
        if ($form->isValid())  //valid form
        {        
            $em->persist($entity);               
            $em->flush();  

            return $this->redirect($this->generateUrl('kategoria_show', array('id' => $entity->getId())));  

        } 
```

编辑：我改变了关联

```
 /**
 * @ORM\OneToOne(targetEntity="Patients", inversedBy="patients")
 * @ORM\JoinColumn(name="patient_id", referencedColumnName="id")
 */
 protected $patient;

 /**
 * @ORM\OneToOne(targetEntity="ContactAddress", mappedBy="contactaddress" ,cascade={"persist"})
 */
protected $contactaddress; 
```

但它仍然不起作用，我在 ContactAddress 中的字段 patient_id 为 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:01:43.050

我认为您可能将拥有权与反面混淆了。

> “OneToOne 关联的拥有方是具有包含外键的表的实体。” —[教义文档第 11 章](https://doctrine-orm.readthedocs.org/en/latest/reference/unitofwork-associations.html)

# php - 将数组的所有索引放在逗号分隔的字符串中

> ID：14380403
> 
> 赞同：7
> 
> 时间：2013-01-17T13:42:35.600
> 
> 标签：php, arrays, implode

我有一个看起来像这样的数组：

```
array('first' => 'value1', 'second' => 'value2', ...); 
```

如何获取所有密钥并将它们放在逗号分隔的字符串中？

最后我需要这样的东西来做一个查询：

```
values IN ('first','second',...) 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-17T13:44:33.980

应该足够了：

```
echo "'".implode("','", array_keys($array))."'"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:45:17.213

`array_keys`将抓住所有的键，`implode`将它们组合成一个字符串。

```
implode("','", array_keys($array)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:51:49.547

简单的答案是用来`array_keys()`获取数组索引。

但是，由于您在 SQL 中使用它，因此正确转义值也很重要：

```
$db = new PDO( ... );
$sql .= "value IN (" . 
        join(', ', array_map(array($db, 'quote'), array_keys($arr))) . ")"; 
```

或者，当您更喜欢使用准备好的语句时：

```
$stmt = $db->prepare('... WHERE value IN (' . 
    join(',', array_fill(0, count($arr), '?')) . ')');
$stmt->execute(array_keys($arr)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:44:32.513

有一个 at [array_keys](http://php.net/manual/en/function.array-keys.php)。这似乎是你需要的东西。要组合密钥，请按照许多其他用户的建议使用 implode：

```
implode("','", array_keys($array)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T13:46:09.717

```
$result = '';
$keys = array_keys($array);

foreach($keys as $key) { 
$result .= $key.',';
}

$result = rtrim($result, ','); 
```

# java - 在android应用程序中显示很多位图

> ID：14380405
> 
> 赞同：1
> 
> 时间：2013-01-17T13:42:46.457
> 
> 标签：java, android, bitmap, out-of-memory

我正在尝试将大量图片显示到我在网站上找到的查看器中

它适用于 <20 张图片，但之后我得到了“OutOfMemory”

我添加了这段代码，在stackoverflow上找到，但看起来还不够

```
 bmpOptions.inSampleSize = sampleSize;
                bmpOptions.inDither=false;                     //Disable Dithering mode
                bmpOptions.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
                bmpOptions.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
                bmpOptions.inTempStorage=new byte[32 * 1024]; 
```

我该如何改进它？这是完整的代码

protected void onActivityResult(int requestCode, int resultCode, Intent data) {

```
 if (resultCode == RESULT_OK) {
        // check if we are returning from picture selection
        if (requestCode == PICKER) {
            // the returned picture URI
            Uri pickedUri = data.getData();
            // declare the bitmap
            Bitmap pic = null;
            // declare the path string
            String imgPath = "";
            // retrieve the string using media data
            String[] medData = { MediaStore.Images.Media.DATA };
            // query the data
            Cursor picCursor = managedQuery(pickedUri, medData, null, null,
                    null);
            if (picCursor != null) {
                // get the path string
                int index = picCursor
                        .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                picCursor.moveToFirst();
                imgPath = picCursor.getString(index);
            } else
                imgPath = pickedUri.getPath();
            // if we have a new URI attempt to decode the image bitmap
            if (pickedUri != null) {
                // set the width and height we want to use as maximum
                // display
                int targetWidth = 600;
                int targetHeight = 400;
                // create bitmap options to calculate and use sample size
                BitmapFactory.Options bmpOptions = new BitmapFactory.Options();
                // first decode image dimensions only - not the image bitmap
                // itself
                bmpOptions.inDither=false;                     //Disable Dithering mode
                bmpOptions.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
                bmpOptions.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
                bmpOptions.inTempStorage=new byte[32 * 1024];
                bmpOptions.inJustDecodeBounds = true;
                BitmapFactory.decodeFile(imgPath, bmpOptions);
                // image width and height before sampling
                int currHeight = bmpOptions.outHeight;
                int currWidth = bmpOptions.outWidth;
                // variable to store new sample size
                int sampleSize = 1;
                // calculate the sample size if the existing size is larger
                // than target size
                if (currHeight > targetHeight || currWidth > targetWidth) {
                    // use either width or height
                    if (currWidth > currHeight)
                        sampleSize = Math.round((float) currHeight
                                / (float) targetHeight);
                    else
                        sampleSize = Math.round((float) currWidth
                                / (float) targetWidth);
                }
                // use the new sample size
                bmpOptions.inSampleSize = sampleSize;
                bmpOptions.inDither=false;                     //Disable Dithering mode
                bmpOptions.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
                bmpOptions.inInputShareable=true;              //Which kind of reference will be used to recover the Bitmap data after being clear, when it will be used in the future
                bmpOptions.inTempStorage=new byte[32 * 1024];
                // now decode the bitmap using sample options
                bmpOptions.inJustDecodeBounds = false;
                // get the file as a bitmap
                pic = BitmapFactory.decodeFile(imgPath, bmpOptions);
                // pass bitmap to ImageAdapter to add to array
                imgAdapt.addPic(pic);
                // redraw the gallery thumbnails to reflect the new addition
                picGallery.setAdapter(imgAdapt);
                // display the newly selected image at larger size
                picView.setImageBitmap(pic);
                // scale options
                picView.setScaleType(ImageView.ScaleType.FIT_CENTER);
                pic.recycle();
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:49:50.343

首先跟踪您的堆大小在 20 张图像后增加，您可以尝试这个简单的解决方案 Just Pass Image 和 Width 和 height 将返回您调整大小的图像

```
public static Bitmap getResizedBitmap(Bitmap image, int newHeight, int newWidth) {
    int width = image.getWidth();
    int height = image.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // resize the bit map
    matrix.postScale(scaleWidth, scaleHeight);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(image, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:04:00.373

放置调整大小位图代码后，您必须缩放位图，或者您可以直接在图像视图上设置试试这个

```
int h = 100; // height in pixels
int w = 100; // width in pixels
Bitmap photoBitMap = Bitmap.createScaledBitmap(yourSelectedImage, h, w, true);
imageView.setBitmap(photoBitMap); 
```

# android - Android：使用适配器在活动之间传递参数

> ID：14380416
> 
> 赞同：4
> 
> 时间：2013-01-17T13:43:12.770
> 
> 标签：android, android-activity, android-arrayadapter

希望我能成功地解释我的情况。

我有一个 Activity (A)，它基本上是一个添加新项目的表单，只有很少的文本字段、时间和位置字段。单击设置位置按钮时，它会调用第二个 Activity (B)，该 Activity (B) 具有带有自定义 ArrayAdapter 的列表视图，该 ArrayAdapter 提供有关 locactins 的建议。单击一项时（适配器类中的 OnClickListener ）需要将其传递回 Activity A。

从 A 调用活动 B

```
Intent I = new Intent(getApplicationContext(), TaskGeoSetActivity.class);
startActivityForResult(I, LOC_ACTIVITY_CODE); 
```

在 Activity B 中设置适配器

```
Adapter = new TaskGeoSubBaseAdapter(getApplicationContext(), R.id.sugtext, result);
Adapter.setActivity(TaskGeoSetActivity.this);
lv.setAdapter(Adapter); 
```

适配器内的 OnClick 事件

```
public void setActivity(Activity act) {
    parentAct = act;
}

private final OnClickListener locpicker = new OnClickListener() {

        @Override
        public void onClick(View v) {
            Address a = items.get((Integer) v.getTag());
            Intent intent = new Intent(context, TaskAddActivity.class);
            intent.putExtra("Address", a);
            parentAct.setResult(parentAct.RESULT_OK, intent);
        }

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-17T09:08:24.727

用这个替换你的点击处理程序。

```
private final OnClickListener locpicker = new OnClickListener() {

    @Override
    public void onClick(View v) {
        Address a = items.get((Integer) v.getTag());
        Intent intent = new Intent(context, TaskAddActivity.class);
        intent.putExtra("Address", a);
        ((Activity)v.getContext()).setResult(parentAct.RESULT_OK, intent);
        ((Activity)v.getContext()).finish();
    }
} 
```

在您的调用活动中覆盖 onActivityResult 以处理结果。OUR_REQUEST_CODE 是您调用 startActivityForResult 时发送的请求代码。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
super.onActivityResult(requestCode, resultCode, data);
    switch(requestCode){
        case OUR_REQUEST_CODE:
            if(resultCode == RESULT_OK) {
                //Do something useful with data
            }
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:45:44.663

要将数据传回活动 A，您应该将该函数`setResult`与您的`startActivityForResult`.

看到这个答案：

[https://stackoverflow.com/a/14118010/238180](https://stackoverflow.com/a/14118010/238180)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:46:00.860

你必须在你的`activity`B 上设置结果，你不需要`Adapter.setActivity(TaskGeoSetActivity.this);` Just `this.setResult(parentAct.RESULT_OK, intent);`：

```
private final OnClickListener locpicker = new OnClickListener() {

    @Override
    public void onClick(View v) {
        ActivityB.this.setResult(...);
        finish();
    } 
```

# c - 了解最新（3.0.0 及以上）Linux 内核中 CONFIG_SMP、自旋锁和 CONFIG_PREEMPT 之间的联系

> ID：14380417
> 
> 赞同：11
> 
> 时间：2013-01-17T13:43:12.837
> 
> 标签：c, linux-kernel, spinlock, smp, preemption

为了给您完整的上下文，我的讨论从观察开始，即我在基于 ARM cortex A8 的 SoC 上运行 SMP linux (3.0.1-rt11)，这是一个单处理器。我很想知道禁用 SMP 支持是否会带来任何性能优势。如果是的话，它将对我的驱动程序和中断处理程序产生什么影响。

我做了一些阅读并遇到了两个相关的主题：自旋锁和内核抢占。我做了更多的谷歌搜索和阅读，但这一次我得到的只是一些陈旧和矛盾的答案。所以我想让我试试stackoverflow。

我的疑问/问题的起源是 Linux 设备驱动程序第 3 版第 5 章中的这一段：

> 自旋锁就其本质而言，旨在用于多处理器系统，尽管就并发性而言**，运行抢占式内核的单处理器工作站的行为类似于 SMP 。**如果一个非抢占式单处理器系统曾经在锁上自旋，它将永远自旋；没有其他线程能够获得 CPU 来释放锁。出于这个原因，没有启用抢占的单处理器系统上的自旋锁操作被优化为什么都不做，除了那些改变 IRQ 屏蔽状态的操作。由于抢占，即使您从未期望您的代码在 SMP 系统上运行，**您仍然需要实现适当的锁定。**

我的疑问/问题是：

a) 默认情况下，Linux 内核在内核空间中是抢占式的吗？如果是，这种抢占是否仅限于进程或中断处理程序也可以被抢占？

b) Linux 内核（在 ARM 上）是否支持嵌套中断？如果是，每个中断处理程序（上半部分）是否有自己的堆栈或共享相同的 4k/8k 内核模式堆栈？

c) 如果我禁用 SMP ( `CONFIG_SMP`) 和抢占 ( `CONFIG_PREEMPT`)，我的驱动程序和中断处理程序中的自旋锁是否有意义？

d) 内核如何处理在执行上半部分时引发的中断，即它们将被禁用或屏蔽？

经过一番谷歌搜索后，我发现了这个：

> 对于没有 CONFIG_SMP 和没有 CONFIG_PREEMPT 编译的内核，自旋锁根本不存在。这是一个出色的设计决策：当没有其他人可以同时运行时，没有理由拥有锁。
> 
> 如果内核在没有 CONFIG_SMP 的情况下编译，但设置了 CONFIG_PREEMPT，则自旋锁只是禁用抢占，这足以防止任何竞争。在大多数情况下，我们可以将抢占视为等同于 SMP，而不必单独担心。

[但是源代码](http://www.kernel.org/pub/linux/kernel/people/rusty/kernel-locking/x109.html)上没有内核版本或日期。谁能确认它是否仍然适用于最新的 Linux 内核？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-27T04:57:45.130

a) Linux 是否具有抢占性取决于您是否
使用`CONFIG_PREEMPT`. 没有默认值。如果你跑`make config`，你将不得不选择。

b) 中断确实嵌套在 Linux 上；在处理中断时，其他中断可能会关闭。在 ARM 和许多其他架构上都是如此。这一切都在同一个堆栈上。当然，用户空间堆栈不用于中断！

c) 如果禁用 SMP 和抢占，代码中的自旋锁如果是常规自旋锁，将减少为无操作，并且 IRQ 自旋锁 ( `spin_lock_irqsave`/ `spin_lock_irqrestore`) 将变为中断禁用/启用。因此，后者仍然是必不可少的；它们可以防止运行代码的任务之间的竞争和运行代码的中断。

d) “上半部分”传统上是指中断服务程序。驱动程序的上半部分代码由中断运行。下半部分由任务调用（读取或写入数据或其他）。中断处理的细节是特定于体系结构的。

> 我最近在特定 MIPS 架构上与 Linux 中断密切合作。在那个特定的板上，有 128 条中断线可通过两个 64 位字屏蔽。内核在此之上实现了优先级方案，因此在为给定中断执行处理程序之前，通过更新那些 2x64 位寄存器来屏蔽较低的中断。我实现了一个修改，以便可以任意设置中断优先级，而不是通过硬件位置，并且通过将值写入到 `/proc`入口。此外，我加入了一个技巧，其中一部分数字 IRQ 优先级与任务的实时优先级重叠。因此，分配给特定优先级范围的 RT 任务（即用户空间线程）能够在运行时隐式抑制特定范围的中断。这对于防止行为不良的中断干扰关键任务非常有用（例如，用于紧凑型闪存的 IDE 驱动程序代码中的中断服务例程，由于硬件接口设计不当而执行繁忙循环，导致闪存写入成为系统中事实上的最高优先级活动。）因此，无论如何，如果您控制客户使用的内核，IRQ 屏蔽行为并不是一成不变的。

问题中引用的陈述仅适用于常规自旋锁（`spin_lock`函数/宏）而不是 IRQ 自旋锁（`spin_lock_irqsave`）。在单处理器上的可抢占内核中，`spin_lock`只需禁用抢占，这足以将所有其他任务排除在内核之外，直到`spin_unlock`. 但`spin_lock_irqsave`必须禁用中断。

# jquery - 如何获取以前的图像？

> ID：14380419
> 
> 赞同：2
> 
> 时间：2013-01-17T13:43:36.990
> 
> 标签：jquery

我正在尝试根据此[http://snook.ca/archives/javascript/simplest-jquery-slideshow](http://snook.ca/archives/javascript/simplest-jquery-slideshow)教程创建一个画廊，并引发了一个问题 - 我无法选择以前的图像。有人可以帮忙吗？

代码很简单：

```
jQuery('#next_image').click(function(){
    jQuery('#archive_gallery :first-child').hide().next('img').show().end().appendTo('#archive_gallery');
});

<div id="archive_gallery">
    <img src="01.jpg">
    <img src="02.jpg" style="display: none;">
    <img src="03.jpg" style="display: none;">
    <img src="04.jpg" style="display: none;">
    <img src="05.jpg" style="display: none;">
    <img src="06.jpg" style="display: none;">
    <img src="07.jpg" style="display: none;">
    <img src="08.jpg" style="display: none;">
    <img src="09.jpg" style="display: none;">
</div> 
```

* * *

# 找到了解决方案：

```
jQuery('#archive_gallery :last-child').prependTo('#archive_gallery').show().next('img').hide().end(); 
```

# php - 合并没有 array_merge 的数组

> ID：14380421
> 
> 赞同：-1
> 
> 时间：2013-01-17T13:43:42.423
> 
> 标签：php, arrays

这是否可以以这种方式而不是`array_merge`函数合并多个数组？

```
$defaults = array('a'=>'b');
$defaults .= array('c'=>'d');
print_r($defaults);?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T13:45:08.433

不，因为`.`and`.=`运算符只对字符串进行操作。

运算符`+`确实适用于数组，它的语义与`array_merge`.

数组添加的工作方式如下：

> + 运算符返回附加到左侧数组的右侧数组；对于两个数组中都存在的键，将使用左侧数组中的元素，而忽略右侧数组中的匹配元素。

`array_merge`像这样工作：

> 如果输入数组具有相同的字符串键，则该键的后一个值将覆盖前一个。但是，如果数组包含数字键，则后面的值不会覆盖原始值，而是会被追加。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:46:23.237

几乎，您需要`+`运算符：

```
$defaults = array('a'=>'b');
$defaults += array('c'=>'d');
print_r($defaults); 
```

但请注意，它的模式与 略有不同`array_merge`，即它不会覆盖已定义的键/索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:45:06.183

试试这个：

```
$defaults = array('a'=>'b');
$defaults += array('c'=>'d');
print_r($defaults); 
```

# winforms - Windows Mobile/Compact Framework：检测表单移动

> ID：14380425
> 
> 赞同：1
> 
> 时间：2013-01-17T13:43:50.060
> 
> 标签：winforms, compact-framework, windows-mobile-6.5

我有一个紧凑的框架表单应用程序，除其他外，它显示不是完整窗口大小的弹出窗口。

就目前情况而言，当显示这些弹出窗口之一时，可以使用标题栏将其拖出可见屏幕区域。然后，这给人的印象是表单没有响应，因为弹出窗口正在等待输入但不可见。

因此，我想检测表单的移动，以便我可以重置位置并将其保持在屏幕中央。但是，我似乎无法做到这一点。

到目前为止，我已经尝试对表单进行子分类，然后查找 WM_MOVE、WM_SIZE 或 WM_WINDOWPOSCHANGED 消息 - 但是我从未在 WndProc 中看到这些消息（我也尝试过记录所有消息，但是一旦显示表单，它就不会收到任何消息移动或移动后，实际上一旦在 WndProc 中显示下一条消息，就是在表单上单击按钮时）。

我还尝试在 OnPaint/OnPaintBackground 事件期间检测表单的当前位置。只要窗体不包含 MainMenu 控件，此方法就有效。如果 MainMenu 控件存在，您可以将窗体向下拖动到菜单所在的屏幕底部，并且 OnPaint/OnPaintBackground 事件不再触发（不需要重新绘制，因为它不再可见）。

我的想法不多了；有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T11:31:06.133

我刚刚更新了我的 Moveable WinForm 解决方案：[http](http://www.hjgode.de/wp/2012/11/07/mobile-development-move-your-form/) ://www.hjgode.de/wp/2012/11/07/mobile-development-move-your-form/ 。

![在此处输入图像描述](../Images/6cbe2b8cc14276e9486bfdb41b6e03d3.png)

更新的源代码位于[http://code.google.com/p/win-mobile-code/source/browse/#svn%2Ftrunk%2FMoveableWinForm%2FMovableForm](http://code.google.com/p/win-mobile-code/source/browse/#svn%2Ftrunk%2FMoveableWinForm%2FMovableForm)

将 msg 发送到表单的基本子类代码是（参见 winapi.cs）：

```
 #region subclassing
    public class subclassForm:IDisposable
    {
        #region delegate_event_stuff
        public class wndprocEventArgs : EventArgs
        {
            public IntPtr hWnd;
            public uint msg;
            public IntPtr lParam;
            public IntPtr wParam;
            public wndprocEventArgs(IntPtr lphWnd, uint iMsg, IntPtr lpLParam, IntPtr lpWParam)
            {
                hWnd = lphWnd;
                msg = iMsg;
                lParam = lpLParam;
                wParam = lpWParam;
            }
        }

        public delegate void wndProcEventHandler(object sender, wndprocEventArgs wndProcArgs);
        public event wndProcEventHandler wndProcEvent;
        void onWndProcEvent(wndprocEventArgs wa)
        {
            if (this.wndProcEvent == null)
                return;
            wndProcEvent(this, wa);
        }
        #endregion

        public enum WNDMSGS:uint{
            WM_MOVE=0x0003,
            WM_SIZE=0x0005,
        }
        public subclassForm(System.Windows.Forms.Form form)
        {
            _form = form;
            lpPrevWndFunc = _subClassForm(_form);
        }
        public void Dispose()
        {
            unsubClassForm(_form);
        }
        IntPtr lpPrevWndFunc=IntPtr.Zero;
        System.Windows.Forms.Form _form;

        static WndProcDelegate persistentWndProc;
        IntPtr _subClassForm(System.Windows.Forms.Form form)
        {
            //avoid multiple subclassing
            if (lpPrevWndFunc != IntPtr.Zero)
                return IntPtr.Zero;
            persistentWndProc = WndProc;
            lpPrevWndFunc = (IntPtr)GetWindowLong(form.Handle, GWL_WNDPROC);
            SetWindowLong(form.Handle, GWL_WNDPROC, persistentWndProc);
            return lpPrevWndFunc;
        }
        IntPtr WndProc(IntPtr hWnd, uint msg, IntPtr wParam, IntPtr lParam)
        {
            System.Diagnostics.Debug.WriteLine("HWND: " + hWnd + " MSG: " + msg + " WPARAM: " + wParam + " LPARAM: " + lParam);
            onWndProcEvent(new wndprocEventArgs(hWnd, msg, lParam, wParam));
            return CallWindowProc(lpPrevWndFunc, hWnd, msg, wParam, lParam);
        }
        bool unsubClassForm(System.Windows.Forms.Form form)
        {
            bool bRet = false;
            if (lpPrevWndFunc == IntPtr.Zero)
                return bRet;
            if (SetWindowLong(form.Handle, GWL_WNDPROC, lpPrevWndFunc.ToInt32()) != 0)
            {
                bRet = true;
                lpPrevWndFunc = IntPtr.Zero;
            }
            return bRet;
        }
    }
    #endregion 
```

如果表单被移动并且可能超出主屏幕边界，您应该能够使用代码“识别”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:53:52.653

这是一个愚蠢的解决方案，但是您是否考虑过在表单上放置一个计时器？

```
public partial class Form1 : Form
{
    private Timer CheckLocation { get; set; }
    private Point FirstLocation { get; set; }

    public Form1()
    {
        InitializeComponent();

        FirstLocation = Location;
        CheckLocation.Tick += new EventHandler(CheckLocation_Tick);
    }

    void CheckLocation_Tick(object sender, EventArgs e)
    {
        if (FirstLocation != Location)
        {
            Location = FirstLocation;
        }
    }
} 
```

# ruby-on-rails - 在 ActiveMerchant 中测试 Paypal Express

> ID：14380432
> 
> 赞同：5
> 
> 时间：2013-01-17T13:44:24.073
> 
> 标签：ruby-on-rails, rspec, capybara, activemerchant

如何在带有 rspec/capybara 集成测试的 Rails 3.2 应用程序中使用 ActiveMerchant 测试 Paypal Express？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:38:50.817

您可以通过设置进行测试：

```
ActiveMerchant::Billing::Base.mode = :test 
```

**然而， PayPal**将要求您输入完整的账单信息，否则 API 甚至不会接受它并返回：

**错误：此交易存在错误。请输入完整的帐单地址。**

在这种情况下，您可以为其提供一些通用信息：

```
:billing_address => {
    :name     => "Test Person",
    :address1 => "123 W 423 E",
    :city     => "Somewhere",
    :state    => "CA",
    :country  => "US",
    :zip      => "88888"
 } 
```

# .net - 将树视图复制到列表 按价值

> ID：14380436
> 
> 赞同：0
> 
> 时间：2013-01-17T13:44:38.103
> 
> 标签：.net, winforms, treeview

我正在尝试将一个列表复制到一个列表中，但它通过引用不断地复制它，因此一个更改会更改另一个。我尝试克隆，但它没有复制父子关系。

```
foreach (TreeNode item in listNodesdestination) 
      testNode1.Add((TreeNode)item.Clone()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:55:46.457

由于它是可序列化的，因此您可以使用内存流执行深层复制。 [通过内存流进行深度复制 - 堆栈溢出](https://stackoverflow.com/questions/2001149/trouble-deep-copying-a-listt-c-sharp)

# html - 让一段简单的网页有自己的滚动条

> ID：14380442
> 
> 赞同：13
> 
> 时间：2013-01-17T13:44:53.470
> 
> 标签：html, css

我正在构建的网页中有一部分专门用于新闻事件。目前简单输入如下。

```
<tr>
    <td class="newsdate">
        February 2013
    </td>
    <td class="news">
        News item 1
    </td>
</tr>

<tr>
    <td class="newsdate">
        January 2013
    </td>
    <td class="news">
        News items 2
    </td>
</tr> 
```

我想拥有它，这样当列出的事件超过 5 个时，例如，您可以使用滚动条查看旧事件。那就是新闻部分的高度将被固定，但您可以在其中上下滚动以查看更新和较旧的新闻。你怎么能最简单地做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T13:48:25.437

像这样使用`table`_`div``overflow-y: auto;`

HTML

```
<div class="scrollable">
    <!-- Your table -->
</div> 
```

CSS

```
.scrollable {
    height: 100px; /* or any value */
    overflow-y: auto;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:47:47.213

使用 CSS：

```
.scrollbar {
  height: 100px;
  overflow: auto; // here is the magic :)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:53:22.807

HTML 示例标记：

```
 <ul id="container">
    <li>Article 1</li>
    <li>Article 2</li>
    <li>Article 3</li>
    <li>Article 4</li>
    <li>Article 5</li>
    <li>Article 6</li>
    <li>Article 7</li>
    <li>Article 8</li>
  </ul> 
```

和 CSS：

```
ul#container {
    height: 100px; 
    overflow-y: auto;
} 
```

[http://jsfiddle.net/UvsrY/4/](http://jsfiddle.net/UvsrY/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:48:28.960

如果您的新闻事件被包裹在 中`<table id="news">`，那么您的 CSS 将如下所示：

```
#news {
    height: 200px;
    overflow-y: auto;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T13:49:32.177

将表格放在 DIV 元素中并指定高度，如下所示：

```
<div style="height:400px;overflow:auto">
   <table>....</table>
</div> 
```

如果需要，它将自动滚动

# jsp - 一段时间后如何在JSP页面上打印消息

> ID：14380458
> 
> 赞同：0
> 
> 时间：2013-01-17T13:45:45.433
> 
> 标签：jsp, time, timer, timeout

我有一个复杂的需求。让我说得很简单。

有一个 JSP 页面，其中有一个按钮 NEXT。如果用户在 5 分钟内单击下一步，那么他将被带到 NEXT 页面，但假设用户什么都不做并且闲置，然后在 5 分钟后自动将消息打印在屏幕上“暂停”。

我将如何做到这一点。我将如何跟踪时间。请求您帮助我提供代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:20:41.883

您可以使用 JavaScript 的[`window.setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)函数在经过一定时间后执行函数：

```
window.setTimeout(showMessage, 5*60*1000); 
```

# jquery - Paypal 和 Jquery UI 价格滑块

> ID：14380463
> 
> 赞同：0
> 
> 时间：2013-01-17T13:45:52.597
> 
> 标签：jquery, user-interface, paypal, slider

我已经在互联网上搜索了大约一个星期了！而且似乎对我卡住的区域没有任何帮助。

所以我想我会注册，看看你们这些优秀的人是否可以提供帮助。

我有 2 个 Jquery UI 滑块，一个用于高度，一个用于长度（从 1-10 米和 1-20 米开始）它们下面有显示高度和长度的字段，然后我有一些代码可以计算价格..

这是我的代码的片段..

```
 function calculate() {
    var width = $("#width-value").val();
    var height = $(".height-value").val();
    var inter = (parseFloat(height) + parseFloat(width));
    var times = inter * 10;
    var total = times + 75;

    $("#total-value").val(total);

}; 
```

这也完全符合我的要求：D。

但这是我的问题，我想将它连接到贝宝，但由于我没有静态值我不知道如何去做，我只想要一个立即购买按钮，但价格会改变，具体取决于滑块选择的内容，有人知道这是否可能/安全吗？

我希望我进行了足够的详细说明，任何帮助都会受到赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:03:48.207

为此，您需要查看 Paypal 的**[Direct Payment](https://www.paypal.com/cgi-bin/webscr?cmd=_dcc_hub-outside)** API。

引用来源本身：

> 对于每次付款，*Direct Payment API*将帐单地址、交易金额、信用卡信息和商品信息作为输入。在几秒钟内，API 会返回交易已处理的确认信息。

**请注意：** Direct Payment API 不是一个独立的产品。作为*Website Payments Pro*解决方案的一部分，您需要同时使用*Direct Payment API*和*Express Checkout*。

# c# - 在 Visual Studio 2012 解决方案中混合 Visual Studio 2010 和 2012 项目

> ID：14380464
> 
> 赞同：3
> 
> 时间：2013-01-17T13:45:54.367
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-2012

我有一个包含 8 个项目的解决方案，它们都是在 Visual Studio 2010（解决方案和项目）中创建的。现在，我们使用的是 Visual Studio 2012，所有这些都可以在 VS 2010 和 2012 中打开和使用，这很好。

但是，我在 VS 2012 中创建了一个新解决方案和一个新项目，并将旧解决方案中的所有项目添加到这个新解决方案中。所以，现在我在 VS 2012 中创建了一个新的解决方案，其中在 VS 2012 中创建了 1 个项目，在 VS 2010 中创建了 8 个项目。

现在我遇到了这个新解决方案的问题。有时，Visual Studio 2012 在解决方案加载期间、构建期间、调试期间、运行前随机崩溃。

我是否应该在 VS2012 中重新创建所有旧项目并避免在 VS 2012 中创建的解决方案中混合项目版本？

**屏幕截图：**

有时会在此窗口中崩溃（收集信息...）：

![在此处输入图像描述](../Images/af3b2c6c450676182d2ebf36c4d05e52.png)

其他时候，这个窗口会崩溃（只是检查解决方案）：

![在此处输入图像描述](../Images/7c25d2d70ea6852944ace1d45c300b64.png)

一直没有找到解决方案，只是重新启动：

![在此处输入图像描述](../Images/bf6ae45b7844357ed594d82b5445753f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:41:00.163

有一个正在调查的已知问题，即 Visual Studio 2012 在为某些安装安装 KB2781514 后随机崩溃。如果您已安装它，请尝试卸载它以查看是否可以修复它。

尝试禁用所有加载项和扩展，以查看它们中的任何一个是否导致此行为。VS2010和2012应该是相互兼容的，只要不添加4.5项目（VS2010不能处理）。

[如果问题仍然存在，请在Connect](http://connect.microsoft.com/VisualStudio)上打开工单或使用[反馈客户端](http://geekswithblogs.net/TarunArora/archive/2012/09/08/are-you-reporting-visual-studio-2012-issues-to-microsoft-correctly.aspx)并[上传 minidump](http://blogs.msdn.com/debugger/archive/2009/12/30/what-is-a-dump-and-how-do-i-create-one.aspx)或[崩溃报告 bucketid](http://www.youtube.com/watch?v=JYu6snQWTn8)。产品团队将调查您的问题。

# data-mining - 用于数据分析的开源内容？

> ID：14380467
> 
> 赞同：-1
> 
> 时间：2013-01-17T13:46:07.173
> 
> 标签：data-mining

我在哪里可以找到一般用于分析目的的数据？我目前正在学习数据挖掘。如果我能获得实时数据或事实，那就太好了。如果内容是 xml、csv、text 等（以某种常见格式），我没问题。我记得看到一个网站包含图形格式的数据，类似于图形数据库。但是不记得那个网站了。有人可以给我一些相同的链接吗？我可以使用 Adventure_works 之类的数据库，但我需要当前数据，例如地震历史、人口详细信息等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:52:54.240

你为什么不试试[https://nycopendata.socrata.com/](https://nycopendata.socrata.com/) - 纽约市的开放和公共数据集。

在 Amazon AWS 上，您还可以“挂载”数据集卷 - [http://aws.amazon.com/publicdatasets/](http://aws.amazon.com/publicdatasets/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:16:56.813

还有一些网站...

1.  [http://dbpedia.org](http://dbpedia.org)包含来自维基百科的结构化数据，
2.  [http://opentick.com/](http://opentick.com/)包含历史财务数据
3.  [http://www.statsci.org/datasets.html](http://www.statsci.org/datasets.html)
4.  [http://data.worldbank.org/country](http://data.worldbank.org/country)
5.  [http://bjs.ojp.usdoj.gov/rawdata.cfm](http://bjs.ojp.usdoj.gov/rawdata.cfm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:38:50.150

多一点：

*   全球恐怖主义数据库 - [http://www.start.umd.edu/gtd/](http://www.start.umd.edu/gtd/)
*   新闻组 - [http://qwone.com/~jason/20Newsgroups/](http://qwone.com/~jason/20Newsgroups/)
*   谷歌公共数据集 - [http://www.google.com/publicdata/directory](http://www.google.com/publicdata/directory)
*   [http://webscope.sandbox.yahoo.com/catalog.php?datatype=c](http://webscope.sandbox.yahoo.com/catalog.php?datatype=c)
*   [http://learningtorankchallenge.yahoo.com/datasets.php](http://learningtorankchallenge.yahoo.com/datasets.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:05:09.980

我找到了这个网站，它的[http://www.freebase.com/](http://www.freebase.com/)。如果人们可以提供更多数据源，我将不胜感激。

# java - alfresco 获取特定用户的用户组成员身份

> ID：14380473
> 
> 赞同：3
> 
> 时间：2013-01-17T13:46:23.877
> 
> 标签：java, rest, gwt, alfresco, opencmis

使用 alfresco REST api，我已经能够查询用户组和用户，并能够获取特定组的子用户。

但是，我现在需要做相反的事情；了解某个用户的所有用户组成员身份。我似乎找不到网页脚本或任何其他方式。

为了实现方便，我宁愿不编写自定义 webscript，除了不熟悉如何这样做。

**项目设置**

我在 GWT/GXT 中编程，使用 Apache 的 openCMIS 并调用 RESTful api for alfresco。

我可以将所有组加载到 alfresco 中，然后为我的用户检查每个组的子组，但这似乎不是可行的方法，因为此功能会经常被触发，并且必须能够在大型实施环境中顺利运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:54:17.773

试着打电话`/alfresco/service/api/people/{user}?groups=true`

# objective-c - Coredata/NSTableView 的推荐过滤、排序 + AGGREGATION (groupBy)

> ID：14380478
> 
> 赞同：2
> 
> 时间：2013-01-17T13:46:37.870
> 
> 标签：objective-c, core-data, nstableview, nsarraycontroller

我正在开发具有以下要求的基于 NSPersistentDocument 的 Objective-C Coredata (SQLite) 应用程序：

1.  简单模型：从 CSV 导入 50-60K 记录，每个记录 +30 个字段。
2.  不需要支持写入/添加/删除记录。
3.  **NEEDED 强烈支持“显示/查看”过滤、排序和分组（聚合）的信息，**

能够在类似于以下的请求中对记录进行分组：

```
[fetchRequest setPropertiesToGroupBy:…]
[fetchRequest setPropertiesToFetch:…] 
```

***我的测试选项 1***

我使用了绑定到 Coredata 实体和 NSTableView 的 NSArrayController

*   有用。
*   优点：只需要很少的代码，可以进行抓取，并且可以设置过滤谓词和排序描述符。
*   缺点：不支持记录聚合，无法将附加信息添加到其获取请求到 groupBy。

***我的测试选项 2***

以编程方式获取，将结果保留在 NSDictionary 的 NSArray 中，并使用绑定到数组类和 NSTableView 的 NSArrayController

*   作品。
*   优点：它支持我想要的。我自己做 Fetch 请求，我可以使用过滤谓词、排序描述符和聚合（groupBy）。
*   缺点：我想这不是很有效。

每次我更改过滤器/排序/分组选项时，都会在 nsdictionary 的 nsarray 中留下结果，这听起来像是一种效率低下的方法。这是 NSArray 上的结果，您可以看到键在每条记录上重复，消耗内存和 cpu 周期...

```
{
    {
        "f_01_Type" = "typeA";
        "f_02_Status" = "statusX";
        :
        "f_32_Period" = "2013010102";
    },
    :
     {
        "f_01_Type" = "typeF";
        "f_02_Status" = "statusU";
        :
        "f_32_Period" = "2009011102";
    }
} 
```

您推荐的解决方案是什么？还有其他想法可以探索吗？

谢谢路易斯

# android - 保留对片段的引用可以吗？

> ID：14380480
> 
> 赞同：4
> 
> 时间：2013-01-17T13:46:43.767
> 
> 标签：android, android-fragments, android-fragmentactivity

我将带有导航模式（ActionBar）的 FragmentActivity 设置为`ActionBar.NAVIGATION_MODE_TABS`.

选项卡允许用户在两​​个片段之间切换，一个 listFragment 和一个 mapFragment。mapFragment 包含一个谷歌地图。该代码控制两个片段之间的切换。

```
@Override
public void onTabSelected(ActionBar.Tab tab,
    FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, show the tab contents in the
    // container view.

    if(tab==tab_buyer_browse){
        if(mListFragment==null){
            mListFragment = new ItemListFragment(this,new ItemArrayAdapter(this));
        }
        Bundle args = new Bundle();
        args.putInt(ItemListFragment.ARG_SECTION_NUMBER,
            tab.getPosition() + 1);
        mListFragment.setArguments(args);
        getSupportFragmentManager().beginTransaction()
            .replace(R.id.container, mListFragment).commit();
    }
    else if (tab==tab_buyer_location){
        if(mapFragment==null){
        //every time,on destroy called anyway, and exception raise. it looks like there is no point maintain a reference to mapFragment ?
            mapFragment = new ItemMapFragment(this);
        }
        getSupportFragmentManager().beginTransaction()
        .replace(R.id.container, mapFragment).commit();
    } 
```

我维护对这两个片段的引用。我认为通过这种方式，我可以避免每次用户切换标签时创建新片段并重用旧片段。ListFragment 没有问题，但是如果我切换到 mapFragment TWICE，则会引发异常，说片段已被破坏。

每次用户切换选项卡时，我最终都会创建新的 mapFragment，并且当我切换时我会体验到 UI 很慢。

所以我的问题是，在父 FragmentActivity 中维护片段的引用是一种好习惯吗？

如果没有，我有什么方法可以控制片段的生命周期，或者至少尽可能多地重用它们以避免 UI 缓慢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-06T20:08:53.577

您可以使用[FragmentPageAdapter](https://developer.android.com/reference/androidx/fragment/app/FragmentPagerAdapter)和 ViewPager 来获得选项卡式片段以及支持向左/向右滑动。它将为您处理片段。

# python - 使用列表的所有元素格式化字符串

> ID：14380482
> 
> 赞同：2
> 
> 时间：2013-01-17T13:46:52.440
> 
> 标签：python, string, list, string-formatting

```
words = ['John', 'nice', 'skateboarding']
statement = "%s you are so %s at %s" % w for w in words 
```

生产

```
File "<stdin>", line 1
statement = "%s you are so %s at %s" % w for w in words
                                           ^
SyntaxError: invalid syntax 
```

我在这里做错了什么？假设是：len(words) == 语句中“%s”的数量

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:06:48.787

您还可以使用带有“splat”运算符的新`.format`样式字符串格式：

```
>>> words = ['John', 'nice', 'skateboarding']
>>> statement = "{0} you are so {1} at {2}".format(*words)
>>> print (statement)
John you are so nice at skateboarding 
```

即使您通过生成器，这也有效：

```
>>> statement = "{0} you are so {1} at {2}".format(*(x for x in words))
>>> print (statement)
John you are so nice at skateboarding 
```

虽然，在这种情况下，当您可以直接传递时，不需要传递生成器`words`。

我认为非常漂亮的一种最终形式是：

```
>>> statement = "{0[0]} you are so {0[1]} at {0[2]}".format(words)
>>> print statement
John you are so nice at skateboarding 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T13:48:19.467

```
>>> statement = "%s you are so %s at %s" % tuple(words)
'John you are so nice at skateboarding' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:51:51.883

有两点不对：

*   你不能创建一个没有括号的生成器表达式。简单地说`w for w in words`，python 的语法是无效的。

*   字符串格式化运算符需要一个元组、`%`一个映射或单个值（不是元组或映射）作为输入。生成器不是元组，它会被视为单个值。更糟糕的是，生成器表达式不会被迭代：

    ```
    >>> '%s' % (w for w in words)
    '<generator object <genexpr> at 0x108a08730>' 
    ```

因此，以下将起作用：

```
statement = "%s you are so %s at %s" % tuple(w for w in words) 
```

请注意，您的生成器表达式实际上并没有转换单词或从`words`列表中进行选择，因此这里是多余的。所以最简单的事情就是将列表转换为 a `tuple`：

```
statement = "%s you are so %s at %s" % tuple(words) 
```

# android - Android Maps API V2 仅显示网格，调试中不显示地图。普通的？

> ID：14380486
> 
> 赞同：0
> 
> 时间：2013-01-17T13:47:02.523
> 
> 标签：android, grid, maps

我正在使用 Google Maps 的 Android 项目。

在 Google API 控制台中注册并激活（我认为是正确的）Google API V2 服务后，我尝试启动一个包含 MapView 的简单 Activity。

但是我有一个问题：当我启动我的应用程序时，地图没有出现。这是我遵循的步骤：

1.) 使用命令从我的 debug.keystore 中保留 SHA1 密钥代码

```
keytool.exe -list -keystore C:\Users\beef\\.android\debug.keystore 
```

2.) 我在我的 API 控制台中输入了该密钥，并带有 SHA1 代码。

3.) 我在我的 API 控制台中激活了以下服务：“Google Maps Android API v2”和“Google Maps API v2”

4.) 我在我的 AndroidManifest.xml 和我的 layout.xml（包含 MapView）中输入了我的密钥。

5.) 我写了一些代码。

这是我的 AndroidManifest.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.testmap"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" />

<uses-feature
   android:glEsVersion="0x00020000"
    android:required="true" />

<uses-permission android:name="com.example.mapdemo.permission.MAPS_RECEIVE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <uses-library android:name="com.google.android.maps"/>
    <activity
        android:name="com.example.testmap.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

这是我的 MainActivity.java ：

```
public class MainActivity extends MapActivity {

private MapView mapView=null;
private MapController mapController=null;
private GeoPoint geoPoint=null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    GeoPoint gPoint = new GeoPoint(19240000,-99120000);

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setSatellite(true);
    mapView.setBuiltInZoomControls(true);

    mapController = mapView.getController();
    mapController.setZoom(15);
    mapController.setCenter(gPoint);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

我的 layout.xml ：

```
<com.google.android.maps.MapView
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mapView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:clickable="true"
android:apiKey="<MyAPIKey>"/> 
```

我读过 StackOverFlow 的帖子，没有显示地图（仅显示网格）是正常的。但我想有一个明确的答案。

我也尝试导出为已签名的应用程序并将其安装在我的 Android 手机上，结果相同。

也许它可以帮助你，当我在我的应用程序上时，我的 logcat 中有一个错误：

```
01-17 12:27:41.394: W/System.err(801): IOException processing: 26
01-17 12:27:41.404: W/System.err(801): java.io.IOException: Server returned: 3
01-17 12:27:41.404: W/System.err(801): at android_maps_conflict_avoidance.com.google.googlenav.map.BaseTileRequest.readResponseData(BaseTileRequest.java:115) 
```

如果有人可以帮助我，

谢谢，

牛肉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T01:29:50.150

MapView 适用于 API V1，您必须使用 V2 的新 Fragment 实现。

读这个：

[https://developers.google.com/maps/documentation/android/start#add_a_map](https://developers.google.com/maps/documentation/android/start#add_a_map)

# python - 将多个函数映射到 CSV 行

> ID：14380488
> 
> 赞同：3
> 
> 时间：2013-01-17T13:47:12.527
> 
> 标签：python

我正在尝试对完全由字符串组成的 CSV 数据进行一些类型转换。我在想我会使用标题名称字典来函数并将这些函数映射到每个 CSV 行。我只是有点坚持如何有效地将多个功能映射到一行。我正在考虑枚举标题并创建一个新的函数索引字典：

```
header_map = {'Foo':str,
              'Bar':str,
              'FooBar':float}

csv_data = [('Foo', 'Bar', 'FooBar'),
            #lots of data...
           ]

index_map = {}

#enumerate the rows and create a dictionary of index:function
for i, header in enumerate(csv_data[0]):
    index_map[i] = header_map[header]

#retrieve the function for each index and call it on the value
new_csv = [[index_map[i](value) for i, value in enumerate(row)] 
           for row in csv_data[1:]] 
```

我只是好奇是否有人知道完成此类操作的更简单、有效的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:00:08.323

没有测试（没有样本输入），但这似乎是你想要的：

```
heads = csv_data[0]
new_csv = heads + [
              tuple(header_map[head](item) for head, item in zip(heads, row))
          for row in csv_data[1:]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:52:10.837

这是一个方法，`using_converter`它稍微快一些：

```
import itertools as IT

header_map = {'Foo':str,
              'Bar':str,
              'FooBar':float}

N = 20000
csv_data = [('Foo', 'Bar', 'FooBar')] + [('Foo', 'Bar', 1123.451)]*N

def original(csv_data):
    index_map = {}
    #enumerate the rows and create a dictionary of index:function
    for i, header in enumerate(csv_data[0]):
        index_map[i] = header_map[header]

    #retrieve the appropriate function for each index and call it on the value
    new_csv = [[index_map[i](value) for i, value in enumerate(row)]
               for row in csv_data[1:]]
    return new_csv

def using_converter(csv_data):
    converters = IT.cycle([header_map[header] for header in csv_data[0]])
    conv = converters.next
    new_csv = [[conv()(item) for item in row] for row in csv_data[1:]]
    return new_csv

def using_header_map(csv_data):
    heads = csv_data[0]
    new_csv = [
        tuple(header_map[head](item) for head, item in zip(heads, row))
        for row in csv_data[1:]]
    return new_csv

# print(original(csv_data))
# print(using_converter(csv_data))
# print(using_header_map(csv_data)) 
```

* * *

基准测试`timeit`：

原代码：

```
% python -mtimeit -s'import test' 'test.original(test.csv_data)'
100 loops, best of 3: 17.3 msec per loop 
```

稍快的版本（使用 itertools）：

```
% python -mtimeit -s'import test' 'test.using_converter(test.csv_data)'
100 loops, best of 3: 15.5 msec per loop 
```

列夫·列维茨基的版本：

```
% python -mtimeit -s'import test' 'test.using_header_map(test.csv_data)'
10 loops, best of 3: 36.2 msec per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:09:40.417

如果您知道标题中的标题顺序，则可以使用函数列表而不是 dict，

```
>>> header = [str, str, float]
>>> csv = [("aaa", "bbb", "3.14")] * 10
>>> map(lambda line: map(lambda f, arg: f(arg), header, line), csv)
[['aaa', 'bbb', 3.14], ['aaa', 'bbb', 3.14], ... 
```

# ios - XCode 4.5 分析工具

> ID：14380490
> 
> 赞同：0
> 
> 时间：2013-01-17T13:47:17.650
> 
> 标签：ios, objective-c, memory-leaks

我构建了一个 iPhone 应用程序，并注意到 XCode 中有分析工具。

我有这个代码：

```
View * view = [[View alloc]initWithFrame:self.view.frame title:currentItem.name id:currentItem.idStr];
self.menuView = [[MenuView alloc]init];
self.menuView.contentView = view;
[view release]; 
```

和`View`财产：

```
@property (retain,nonatomic) MenuView * menuView; 
```

当我对项目进行分析时，我会收到这个潜在的泄漏警告。我想知道它是否可以并且分析只是警告我？或者我在代码上犯了一个错误。

* * *

编辑

如果我做这样的事情：

```
@property (retain, nonatomic) IBOutlet UISlider *progressSlider; 
```

.

```
self.progressSlider = [[[UISlider alloc]initWithFrame:CGRectMake(58, 12, 191, 23)]autorealese];
[view addSubview:self.progressSlider]; 
```

并在交易中：

```
[progressSlider realese]; 
```

这也是我想做的吗？还是错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T13:51:58.517

您正在泄漏`self.menuView`，因为该属性被指定为`retain`。当你调用`alloc`一个对象时，它的保留计数设置为 1。当属性被分配时，它增加到 2，没有平衡调用来平衡它。

最简单的解决方法是调用`-autorelease`，如下所示：

```
self.menuView = [[[MenuView alloc] init] autorelease]; 
```

* * *

通过您的编辑，是的，该代码在表面上似乎是正确的。我真正的问题归结为为什么您仍在使用手动引用计数？是的 - 从表面上理解这是一件好事，但苹果已经弃用了它，转而支持更新的 ARC。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:50:59.430

如果您保留一个属性，您应该在您的 dealloc 方法中向它发送一条释放消息：

```
- (void)dealloc {
    [menuView release];
    [super dealloc];
} 
```

此外，您在分配 menuView 属性时分配/初始化。init 方法为您提供一个保留计数。设置该属性会使您的保留计数为 2。您应该有匹配数量的版本。您的设置代码应如下所示：

```
MenuView *m = [[MenuView alloc] init];
self.menuView = m;
[m release]; 
```

# ios - 静态 UITableView 的 UITableViewCell 子视图中的触摸事件

> ID：14380491
> 
> 赞同：0
> 
> 时间：2013-01-17T13:47:22.947
> 
> 标签：ios, cocoa-touch, uitableview, uitouch, uicontrol

我有一个自定义开关

`UICustomSwtich`：`UISlider`

从[这里下载](http://catamount.com/forums/download/file.php?id=102)

**这个怎么运作**

`UICustomSwitch`覆盖此触摸事件以使其工作，因为它必须工作：

```
- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event 
- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event 
```

**好的测试**

`UICustomSwitch`在任何情况下都能完美运行`UIView`，甚至在`UIScrollView`. 当必须调用三个触摸事件时，它会被正确调用。

**坏作品**

这是我的问题。我有一个`UITableView`从 StoryBoard 设计的具有这种层次结构的静态：

`UITableView`> `UITableViewCell`> `UIView`>`UICustomSwitch`

在这种情况下：

`- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event`

这个函数被正确调用

`- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event`

`- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event`

当我移动拇指小于杆的长度时，拇指保持在我离开它的同一点（问题）。

当我向左和向右移动拇指（上升到小节的末端）时，这两种方法被调用（非常奇怪的行为，不是吗？）。

我寻找答案，发现具有不同解决方案的类似问题，但对我的问题有任何好处。

为什么触摸事件有时会到达我的`UICustomSwitch`，有时不会？为什么结束和 trackingWithTouch 事件而不是开始事件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:53:03.453

我获得了一个实现所有（较少评论的）触摸和跟踪事件的解决方案：

```
#pragma - touches

- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesBegan:touches withEvent:event];

    LOG(@"touches began");

    m_touchedSelf = NO;
    on = !on;
}

//- (void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
//{
//    [super touchesMoved:touches withEvent:event];
//    
//    LOG(@"touches moved");
//    
//}

- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event
{
    [super touchesEnded:touches withEvent:event];

    LOG(@"touches ended");

    if (!m_touchedSelf)
    {
        [self setOn:on animated:YES];
        [self sendActionsForControlEvents:UIControlEventValueChanged];
    }
}

- (void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesCancelled:touches withEvent:event];

    LOG(@"touches cancelled");

    CGPoint location = [[touches anyObject] locationInView:self];
    if (location.x > self.frame.size.width/2) {
        [self setOn:YES animated:YES];
    }else{
        [self setOn:NO animated:YES];
    }

}

#pragma - trackings

- (void)endTrackingWithTouch:(UITouch *)touch withEvent:(UIEvent *)event
{

    [super endTrackingWithTouch:touch withEvent:event];

    LOG(@"endTrackingWithTouch");

    m_touchedSelf = YES;

    if (self.value > 0.5) {
        [self setOn:YES animated:YES];
    }else{
        [self setOn:NO animated:YES];
    }
}

- (void) cancelTrackingWithEvent:(UIEvent *)event
{

    LOG(@"cancelTrackingWithEvent");

    m_touchedSelf = YES;

    if (self.value > 0.5) {
        [self setOn:YES animated:YES];
    }else{
        [self setOn:NO animated:YES];
    }
} 
```

当控件不在表中时，可以使用普通方法。当在表内时，有时会通过取消的方法退出，有时会通过结束的方法退出。无论如何，我获得了正确的行为。

但是有一个问题没有解决。为什么`UITableView`或`UITableViewCell`取消`UITouch`事件`UICustomSwitch`？

# java - requestLocationUpdates 参数

> ID：14380494
> 
> 赞同：4
> 
> 时间：2013-01-17T13:47:32.313
> 
> 标签：java, android

这就是 requestLocationUpdates 的样子（我使用它的方式）：

```
requestLocationUpdates(String provider, long minTime, float minDistance, LocationListener listener) 
```

我的问题是 minTime 和 minDistance 之间的逻辑连接是 OR 还是 AND。如果 minTime 已经过去，它会等待 minDistance 吗？

**或或与**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T13:52:51.823

上的[文档`requestLocationUpdate()`](http://developer.android.com/reference/android/location/LocationManager.html)说：

> minDistance 参数还可用于控制位置更新的频率。如果它大于 0，那么位置提供程序将仅在位置已更改至少 minDistance 米并且至少 minTime 毫秒已过去时向您的应用程序发送更新

因此，如果您指定非 0 值，则必须满足两个参数才能收到更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:08:59.230

如果您将 minTime 设置为 0，它将在第一次收到位置更新时调用一次，然后在您更改 minDistance 米中的位置之前不会调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T19:43:43.303

接收到最小距离变化后，会等待最短时间过去再更新。

# asp.net-mvc - 导航属性随机显示 null

> ID：14380495
> 
> 赞同：0
> 
> 时间：2013-01-17T13:47:32.940
> 
> 标签：asp.net-mvc, wcf, entity-framework

考虑下面作为我的数据库的表结构。（数据库：地理）

```
Country >> CountryId, CountryName
City >> CityId, CityName, LanguageId
Language >> LanguageId, LanguageName 
```

以下是我的 WCF 项目中的一种方法（项目：Geography.WCFPortal）

```
[OperationContract]
public CountrySummary GetCountrySummary(string countryName)
{
CountrySummary countrySummaryRows = new CountrySummary();        
var result = from city in repository.GetQuery<City>()
                     .Include("Language")
                     .Where(city => city.Country.CountryName == countryName)
                     select city;

        countrySummaryRows.Country = this.GetCountry(countryName);

        foreach (var city in result.OrderByDescending(m => m.CityName).ToList())
        {
            countrySummaryRows.CityCollection.Add(city);
        }
        return countrySummaryRows;
} 
```

以下是 CountrySummary 类的定义方式：（项目：Geography.Contracts）

```
[Serializable]
[DataContract]
public class CountrySummary
{
public CountrySummary()
{
this.CityCollection = new List<City>();
}

[DataMember]
public List<City> CityCollection { get; set; }

[DataMember]
public Country Country { get; set; }

} 
```

我的 MVC 应用程序正在调用 GetCountrySummary 方法。

我的 MVC 视图之一是显示国家列表。它们每个都有一个“视图”链接，它调用 WCF 方法 (GetCountrySummary) 并将其显示在另一个视图上。

问题是 MVC 在某些城市的“语言”导航属性中随机接收 NULL。说，如果我第一次在印度单击“查看”，它工作正常，如果我下次单击它，它会给出“对象引用为空”的错误，当我检查我的“CountrySummary”对象时，它有某些城市的语言为 NULL（但它们在数据库中）。

每当我在 WCF 测试客户端中运行它时，它总是填充货币。但是在 MVC 应用程序中调用时有时会失败。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:22:41.097

我的猜测是存储库实例正在被重用，因为它在 WCF 启动事件中被初始化。尝试在 GetCountrySummary 方法中创建一个新实例以确认。

看到[这篇文章](https://stackoverflow.com/questions/6580757/caching-entity-framework-dbcontexts-per-request)了解更多信息

# groovy - Groovy 脚本定义的类中的绑定变量访问

> ID：14380496
> 
> 赞同：3
> 
> 时间：2013-01-17T13:47:36.357
> 
> 标签：groovy

给定一个常规的 Groovy 脚本，有没有办法从脚本本身定义的类中访问它的绑定变量？

以下片段

```
class Example {
  def printBindings() {
    for (var in binding.variables) {
      println "$var.key - $var.value"
    }
  }
}
new Example().printBindings() 
```

失败，但以下例外：

```
groovy.lang.MissingPropertyException: No such property: binding for class: Example 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:53:47.907

如果不将脚本传递给方法，我就无法找到：

```
class Example {
  def printBindings( container ) {
    for (var in container.binding.variables) {
      println "$var.key - $var.value"
    }
  }
}
new Example().printBindings( this ) 
```

# jsf - JSF 应用程序中的 JBoss AS 7.1.1 依赖注入

> ID：14380498
> 
> 赞同：3
> 
> 时间：2013-01-17T13:47:41.060
> 
> 标签：jsf, dependency-injection, primefaces

看起来依赖项没有被注入，我的代码有什么问题吗？

页

```
<p:dataTable styleClass="centralizado" id="cdt" var="c" value="#{indexBean.getCampanhas()}"> 
```

索引豆

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;
import javax.inject.Inject;

@ManagedBean
@ViewScoped
public class IndexBean {
    @Inject
    private GerenciaContas contas;
    @Inject
    private GerenciaCampanhas campanhas;
    @Inject
    private Conversor conv;

    public List<Campaign> getCampanhas() throws Exception {
        return campanhas.getTodasCampanhas();
    }

    public GerenciaContas getContas() {
        return contas;
    }

    public Conversor getConversor() {
        return conv;
    }

} 
```

我使用的课程之一：

```
public class GerenciaCampanhas 
{
    public List<Campaign> getTodasCampanhas() throws Exception {
              //ordinary code
    }
} 
```

我的 Conversor 课程中是否缺少任何注释？我收到 NullPointerException 因为“GerenciaCampanhas campanhas”为空，然后在我的 indexBean 中调用方法 getCampanhas() 谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T15:09:56.957

1.  替换`@ManagedBean`为`@Named`- 您不能`@Inject`在 JSF 托管 bean 中使用（请参阅[此问题](https://stackoverflow.com/questions/11986847/java-ee-6-javax-annotation-managedbean-vs-javax-inject-named-vs-javax-faces)
2.  选择其他范围`@ViewScoped`- CDI 托管 bean 没有这样的范围；
3.  确保您`beans.xml`的 ejb 的 META-INF 文件夹中有该文件（如果它是一个企业项目，它位于您的 ejb 项目中的 META-INF 和您的 Web 项目中的 WEB-INF 下）。

喜欢：

```
import java.io.Serializable;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;
import javax.inject.Inject;
import xxxx.GerenciaContas;

@Named
@SessionScoped
public class IndexBean implements Serializable {
    @Inject
    private GerenciaContas contas; 
```

如果您仍需要按照此[问题](https://stackoverflow.com/questions/14158885/add-items-to-list-in-request-scoped-bean)`@ViewScoped`中的说明向您的项目添加 MyFaces CODI 扩展。来自巴西的问候 =)。

# silverlight - 在 Webbrowser 控件中的 Silverlight 中显示 Pdf 文件在 IIS 中存在问题

> ID：14380514
> 
> 赞同：0
> 
> 时间：2013-01-17T13:48:37.597
> 
> 标签：silverlight, security, iis, pdf, webbrowser-control

我创建了一个 Silverlight 应用程序，它创建 Pdf 并显示 pdf。在我的开发环境中工作正常，但是在服务器上它会中断。我预计这些是安全问题。我使用 URL 显示 Pdf。当我复制 URL 并直接在浏览器（Google 和 Internet Explorer）中传递它时，它会按预期显示 de Pdf。但是，我在 Silverlight 中的 Webbrowser 控件只显示一个图标，没有 pdf。在我的开发环境中的 webbrowser 控件中可以看到相同的 pdf。在服务器上，我授予指定目录（包括子目录）上的每个人的完全访问权限。不幸的是，这并不能解决它。除此之外，它当然没有完成;-)

有人可以帮帮我吗？我希望我看错了方向。

亲切的问候，安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:57:48.133

如果您的 silverlight 应用程序创建 PDF，它将在浏览您网站的计算机上创建。如果您使用 url 引用服务器上的某个位置，则不会找到该位置。在您的开发环境中测试它会成功，因为您仍然在同一台机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:06:18.977

PDF 是一种二进制格式，将通过您定义的 URL 下载。但是，一旦它是客户端，浏览器就需要一个程序来呈现它。该图标告诉您 Web 控件中的浏览器不知道使用什么程序来呈现它。我会创建一个带有适当链接的 HTML 页面来呈现它，但这是我所知道的。

# c# - 将文件附加到消息

> ID：14380517
> 
> 赞同：0
> 
> 时间：2013-01-17T13:48:49.990
> 
> 标签：c#, sendmail, email-attachments, mailmessage

我使用字符串生成器创建了一个 html 并将其放在当前目录中

```
StreamWriter sw = new StreamWriter("../../Data.html"); 
```

现在我想附上这个文件并作为邮件发送。如何将此作为附件添加到我的电子邮件中？

这或多或少是我对常规 html 消息所做的。如何将文件添加为附件？

```
public bool sendMailAttachment(string to, string from, string subject, string body, string attachment)
    {
        bool k = false;
        try
        {
            SmtpClient client;
            MailMessage msg = new MailMessage(from, to);
            msg.Subject = subject;
            msg.Body = body;
            msg.IsBodyHtml = true;

            client = new SmtpClient();
            client.Host = "staging.itmaniax.co.za";
            //client.Port = 25;

            //****
            //client.EnableSsl = true;
            client.Send(msg);

            k = true;

        }
        catch (Exception exe)
        {
            Console.WriteLine(exe.ToString());
        }
        return k; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:51:46.253

给你， [http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT](http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT)

上面的答案只是一个谷歌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:52:45.913

这是一篇 CodeProject 文章，介绍了将附件添加到`MailMessage`. 我会考虑先看一下，然后返回提出的任何问题。

[http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT](http://www.codeproject.com/Articles/10828/Sending-Email-with-attachment-in-ASP-NET-using-SMT)

这里还有一些 MSDN 阅读：http: [//msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:28:37.457

```
Attachment attachment = new Attachment(attachmentPath);
msg.Attachments.Add(attachment); 
```

# dojo - 使 dojox.data.datagrid 中的列不可排序

> ID：14380518
> 
> 赞同：1
> 
> 时间：2013-01-17T13:48:50.803
> 
> 标签：dojo, dojox.grid.datagrid

我有一列在我的 dojox.data.datagrid 中没有检索到任何数据，但是我放置了一个自定义的可点击标题。我想禁用此列的排序，以便在我尝试单击标题时不会出现三角形。

有什么想法可以实现这一目标吗？

编辑以显示我的代码：

```
dojo.require("dojox.grid.DataGrid"); //FindTask
dojo.require("dojo.data.ItemFileReadStore"); //FindTask
dojo.require("esri.tasks.find"); //FindTask

var findTask, findParams;
var grid, store;
var searchExtent;

function doFind() {

            //Show datagrid onclick of search button and resize the map div.
            dojo.style("map", {
                    "height": "87%"});
            esri.show(datagrid);
            searchExtent = new esri.geometry.Extent ({
            "xmin":-9196258.30121186,"ymin":3361222.57748752,"xmax":-9073959.055955742,"ymax":3442169.390441412,"spatialReference":{"wkid":102100}
            });

            map.setExtent(searchExtent);

    //Set the search text to the value in the box
    findParams.searchText = dojo.byId("parcel").value;
            grid.showMessage("Loading..."); //Shows the Loading Message until search results are returned.
    findTask.execute(findParams,showResults);
  }

  function showResults(results) {
    //This function works with an array of FindResult that the task returns
    map.graphics.clear();
    var symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID, new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID, new dojo.Color([98,194,204]), 2), new dojo.Color([98,194,204,0.5]));

    //create array of attributes
    var items = dojo.map(results,function(result){
      var graphic = result.feature;
      graphic.setSymbol(symbol);
      map.graphics.add(graphic);
      return result.feature.attributes;
    }); 

    //Create data object to be used in store
    var data = {
      identifier: "Parcel Identification Number",  //This field needs to have unique values. USES THE ALIAS!!!
      label: "PARCELID", //Name field for display. Not pertinent to a grid but may be used elsewhere.
      items: items
    };

     //Create data store and bind to grid.
    store = new dojo.data.ItemFileReadStore({ data:data });
    var grid = dijit.byId('grid');
    grid.setStore(store);

    //Zoom back to the initial map extent
    map.setExtent(searchExtent);

  }

  //Zoom to the parcel when the user clicks a row
  function onRowClickHandler(evt){
    var clickedTaxLotId = grid.getItem(evt.rowIndex).PARCELID;
    var selectedTaxLot;

    dojo.forEach(map.graphics.graphics,function(graphic){
      if((graphic.attributes) && graphic.attributes.PARCELID === clickedTaxLotId){
        selectedTaxLot = graphic;
        return;
      }
    });
    var taxLotExtent = selectedTaxLot.geometry.getExtent();
    map.setExtent(taxLotExtent);
  } 
```

HTML：

```
<!--Data Grid-->
                            <div id="datagrid" dojotype="dijit.layout.ContentPane" region="bottom" splitter="true" style="width:100%; height:125px;">
                                    <table data-dojo-type="dojox.grid.DataGrid" data-dojo-id="grid"  id="grid" data-dojo-props="rowsPerPage:'5', rowSelector:'20px'">
                                        <thead>
                                            <tr>
                                                <th field="Parcel Identification Number" width="10%">
                        Parcel ID
                                                </th>
                                                <th field="Assessing Neighbornood Code" width ="20%">
                        Neighborhood Code
                                                </th>
                                                <th field="Property Class Code" width="10%">
                        Property Class
                                                </th>
                                                <th field="Site Address" width="57%">
                        Address
                                                </th>
                                                <th field="" width="2%"> <div class="GridCloseIcon" title="Close Grid" onclick="closeGrid();"></div>
                                                </th>                   
                                            </tr>
                                        </thead>
                                    </table>
                            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:35:09.740

覆盖 datagrid 实例的 canSort 方法，并为给定的“col”参数返回 true 或 false。请参阅DataGrid 文档的[这一部分](http://dojotoolkit.org/reference-guide/1.8/dojox/grid/DataGrid.html#datagrid-object-functions)中的“canSort” 。

如果例如第三列不应该是可排序的，请使用以下内容：

```
myGrid = new DataGrid({
    ....
    canSort: function(col) {
        return !(Math.abs(col) === 3);
    },
    ....
}, yourGridElemId); 
```

在您的代码中，尝试类似：

```
dojo.addOnLoad(setupGrid);

function setupGrid() {
    var grid = dijit.byId('grid');
    grid.canSort = function(col) {
        return !(Math.abs(col) === 3);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T14:04:05.057

在创建 DataGrid 对象时，设置 'canSort : false' 如下。

```
grid = new DataGrid({
                canSort: false,

            }, "gridId"); 
```

# python - Python框架创建纯后端项目

> ID：14380519
> 
> 赞同：0
> 
> 时间：2013-01-17T13:48:51.613
> 
> 标签：python, django, pylons, web-frameworks

关于该项目的一些细节：

*   纯后端项目，没有前端

*   公开一个rest api（也许是自定义路由？）

*   连接到其他 REST API

*   使用 ORM 查询 MySQL 和 MongoDB

*   进行单元测试

你会为我推荐什么 Python 框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T03:33:25.213

它们中的任何一个都可以工作。可以说，当今最流行的 Python Web 框架是 Django、Flask 和 Pyramid。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:12:09.880

您可能需要考虑cherrypy ( [cherrypy.org)](http://cherrypy.org/)。从他们的网站：

> CHERRYPY 是一个 Python 的、面向对象的 Web 框架
> 
> CherryPy 允许开发人员以与构建任何其他面向对象的 Python 程序相同的方式构建 Web 应用程序。这导致在更短的时间内开发更小的源代码。

有关在cherrypy 中创建REST 服务的更多信息，请参阅cherrypy 文档中的[在CherryPy 中创建RESTful 应用程序。](http://docs.cherrypy.org/stable/progguide/REST.html?highlight=rest)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T12:55:35.917

我同意@Bryan 关于 Cherrypy 的看法，你也可以试试 Flask

[http://flask.pocoo.org/](http://flask.pocoo.org/)

> Flask 是基于 Werkzeug、Jinja 2 和良好意图的 Python 微框架。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T15:16:39.270

[Django Piston](https://bitbucket.org/jespern/django-piston/wiki/Home)可能是解决方案。

对于 MongoDB，您可以在这个[IBM 博客](http://www.ibm.com/developerworks/opensource/library/os-django-mongo/index.html)和[这个问题中找到一些东西](https://stackoverflow.com/questions/10424562/django-nonrel-vs-django-mongodb-vs-mongokit-vs-pymongo-native)

# javascript - 如何编写递归 d3.js 代码来处理嵌套数据结构？

> ID：14380520
> 
> 赞同：6
> 
> 时间：2013-01-17T13:48:51.537
> 
> 标签：javascript, recursion, d3.js, nested

我有[函数式编程](https://en.wikipedia.org/wiki/Functional_programming)的背景，原则上理解递归，但我似乎无法将这些知识转化为[D3.js](https://en.wikipedia.org/wiki/D3.js)环境。

我在下面有一个 hello world 脚本，它试图简单地打印嵌套数据结构的内容。按照对其他线程的建议，我可以使用它`.filter`来仅返回节点，但是如何继续这个示例以递归地打印嵌套项？

```
<!DOCYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="d3.v3.js"></script>

        <script>
            function draw(data)
            {
                "use strict";

                d3.select("body")
                    .selectAll("p")
                    .data(data)
                    .enter()
                    .append("p")
                    .text(function(d) {
                            if (d instanceof Array) {
                                return "WHAT DO I PUT HERE?";
                            }
                            else {
                                return d;
                            };
                        });
            }
        </script>
    </head>

    <body>
        Hello world

        <script>
            draw([1, [2, [1, 2, 3, 4] ], 3, 4, 5]);
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-30T04:36:27.143

您需要一个根特征，然后是一个填充它的递归函数。

```
function makeNestedListItems (parentLists) {
    var item = parentLists.append('li')
        .text(function (d) { return d.txt; });
    var children = parentLists.selectAll('ul')
        .data(function (d) {
            return d.children
        })
      .enter().append('ul');
    if (!children.empty()) {
        makeNestedListItems(children);
    }
}
var data = {
    txt: 'root',
    children: [{
            txt: "a",
            children: [{
                    txt: "aa",
                    children: [{
                            txt: "aaa",
                            children: []
                        }, {
                            txt: "aab",
                            children: []
                        }
                    ]
                }, {
                    txt: "ab",
                    children: []
                }
            ]
        }, {
            txt: "b",
            children: [{
                    txt: "ba",
                    children: []
                }, {
                    txt: "bb",
                    children: []
                }, {
                    txt: "bc",
                    children: []
                }
            ]
        }, {
            txt: "c",
            children: []
        }
    ]
};
var rootList = d3.select('body').selectAll('ul').data([data])
        .enter().append('ul');
makeNestedListItems(rootList); 
```

哪个应该产生

*   根
    *   一个
        *   啊
            *   啊啊啊
            *   aab
        *   抗体
    *   b
        *   巴
        *   bb
        *   公元前
    *   C

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T00:15:15.537

最简单的方法是避免递归！典型的 D3.js 方法是递归数据并确定布局所需的信息（例如，子项的总大小、嵌套的总深度、每个节点的深度），然后展平结构并使用计算的值进行布局.

一个很好的例子可以在[这个树示例](http://bl.ocks.org/4063550)中找到，其中计算和展平是使用内置函数处理的：

```
var tree = d3.layout.tree()... 
```

也就是说，如果您真的想尝试直接在布局中进行递归所需的选择体操，您可以。关键是你必须做出选择，然后根据父母的数据设置他们的数据。

在下面的示例中，为了方便起见，我对 maxLevels 进行了硬编码，但您可以在进入循环之前根据数据计算它。

另请注意，我对布局非常懒惰，因为要正确执行此操作，您首先需要对数据进行递归传递，以在开始之前至少计算每个元素有多少个子元素。[你可以在这里](http://jsfiddle.net/superboggly/wB6h4/3/)玩小提琴。

```
var data = { children: [{
        txt: "a", children: [{
            txt: "aa", children: [{
                txt: "aaa"}, {
                txt: "aab"}]}, {
            txt: "ab"}]}, {
        txt: "b", children: [{
            txt: "ba"}, {
            txt: "bb"}, {
            txt: "bc"}]}, {
        txt: "c"}]};

var svg = d3.selectAll("svg");

svg.attr({ width: 500, height: 500});

var recurse = svg.selectAll("g.level0").data([data]).enter()
    .append("g").classed("level0", true);

var maxLevels = 4;
for (var level = 0; level < maxLevels; level++) {

    var nextLevel = level + 1;

    var next = svg.selectAll("g.level" + level).filter(function (d) {
        return d.children !== undefined;
    });

    next.selectAll("g.level" + nextLevel)
        .data(function (d) { return d.children; })
        .enter().append("g")
        .attr("class", function (d) {
            return "level" + nextLevel + " " + d.txt;
        })
        .attr("transform", function (d, i) {
            return "translate(" + (nextLevel * 25) + "," + (i * 10 * (5 - level) + 15) + ")";
        });

    next.selectAll("text.level" + nextLevel)
        .data(function (d) {  return d.children; })
        .enter().append("text")
        .classed("level" + level, true)
        .attr("x", function (d, i, j) {  return nextLevel * 25;  })
        .attr("y", function (d, i, j) {
            return j * (10 * (10 - level)) + (i+1) * 15;
        })
        .attr("fill", "black")
        .text(function (d) { return d.txt; });
} 
```

# javascript - JavaScript 在使用点表示法或键时如何查找值

> ID：14380522
> 
> 赞同：0
> 
> 时间：2013-01-17T13:49:06.243
> 
> 标签：javascript, foreach

我有一个大型 JavaScript 对象，其中包含在需要时添加和删除的属性。与此类似的东西：

```
var data = {

  data1: {
      subscribers : ["sub1", "sub2"]
  },

  data2: {
      subscribers : ["sub1", "sub2"]
  }

  //[0...*]

}; 
```

我想要来自“data2”的订阅者，所以我`data["data2"].subscribers`用来访问这些信息。

但我的**问题**是：

*   *访问此类属性的 JavaScript 内部工作原理是什么（点表示法，使用属性名称）？*
*   *对象的大小是否会影响订阅者数组的返回速度？*

* * *

我的猜测是大小会影响接收返回数据的速度，因为我认为 JavaScript 访问属性的方式是在对象上使用 for 循环：

```
function getSubs(name) {
    for(var prop in data) {
        if(prop === name) {
            return data[prop].subscribers;
        }
    }
}
var subs = getSubs("data2"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:51:39.920

不，它不能通过迭代所有属性来工作，但基本上是通过在编译之前使用常用的[哈希表模式](http://en.wikipedia.org/wiki/Hash_table)和在编译之后使用类（[在此处阅读有关 V8 的](https://developers.google.com/v8/design?hl=sv#prop_access)更多信息）。

事实上，这是 javascript 引擎内部工作的一部分，而不是规范。你需要知道的是：

*是的，拥有许多属性可能会产生影响，但比您想象的要轻得多。别担心。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:57:21.150

javascript 对象基本上是一个地图，所以我认为他们将在内部使用哈希表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T14:10:00.620

> 访问此类属性的 JavaScript 内部工作原理是什么（点表示法，使用属性名称）？

您的问题的前提是*错误*的，JavaScript 没有“内部工作原理”！

JavaScript 是一种语言，它描述*了*发生的事情，它没有*说明*它在内部是如何工作的，因为 JavaScript 没有内部结构。

JavaScript 的每个实现都有自己的做事方式。由于它们满足规范所描述的语义（即*what*），因此您不必担心。

*因此，答案是：**无关紧要**。*

只有当您遇到性能问题，并且只有当您确定使用较少的属性时问题会消失时，您才会考虑考虑实现。但即便如此，您只需要知道问题已经消失。

# java - HashTable 中的 ArrayList 是线程安全的

> ID：14380523
> 
> 赞同：0
> 
> 时间：2013-01-17T13:49:16.480
> 
> 标签：java, multithreading, arraylist, concurrency, thread-safety

简单的问题。以下代码是线程安全的吗...？

1.  如果是的话，有没有更好的方法..？
2.  如果没有，为什么。？以及如何使其线程安全。

我的主要怀疑是因为内部`ArrayList`不是线程安全的。所以同样的事情会发生，如果它的一部分。`Hashtable``ArrayList``Hashtable`

```
Hashtable<Thread, List<String>> threadObjects = new Hashtable<Thread, List<String>>();
 // lets assume some object is added. 
 synchronized (threadObjects)
  {
     thread = Thread.currentThread();
     List<String> v =  threadObjects.get(thread);
     if (null != v)
     {
       // do something
     }
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:52:16.953

> 如果是的话，有没有更好的方法..？

是的，但使用 ThreadLocal>

> 我的主要疑问是因为 Hashtable 中的 ArrayList，因为 ArrayList 不是线程安全的。

通常你是对的，但是这段代码确保了一个 ArrayList 只能被一个线程访问。当然，如果您不遵循此模式，那将是线程安全的。

注意：`synchronized (threadObjects)`在这种情况下没有任何区别。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T14:41:44.537

> 以下代码是线程安全的吗...？

是的……前提是：

*   创建映射并向映射添加条目的代码也是线程安全的，
*   没有其他代码在没有同步的情况下使用地图（根据您的代码），并且
*   没有代码更新列表对象而不在地图上同步。

外部同步数据结构的线程安全性只能通过检查所有使用该数据结构的代码来确定。

正如 Peter 所说，ThreadLocals 将是一个更好的解决方案，但如果列表对象在没有适当锁定的情况下发生变异，仍然存在潜在的线程安全问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T14:55:17.767

您可以使用 ThreadLocal 来存储特定于线程的数据。例如：

```
private final ThreadLocal<List<String>> threadObjects =
    new ThreadLocal<List<String>>() {
        @Override protected List<String> initialValue() {
            return new ArrayList<String>();
        }
    };

public void foo() {
    for (String s : threadObjects.get()) {
        // do something with each string in this thread's list
    }
} 
```

这是一种比该方法更好的跟踪线程特定数据的`Hashtable`方法，因为该表是在 ThreadLocal 实现本身内部为您维护的，包括同步。`ArrayList`只要您不发布对其他线程的引用，就不需要在实例上进行额外的同步；每个线程都有自己的`ArrayList`实例可以随意处理，而无需担心并发问题。

覆盖`initialValue()`是一种方便，因为它允许您避免检查`null`的结果`threadObjects.get()`，当然假设您没有明确地将线程本地设置为`null`。

# java - Java JFrame 绘制像素大小的矩形

> ID：14380525
> 
> 赞同：0
> 
> 时间：2013-01-17T13:49:25.020
> 
> 标签：java, swing, colors, jframe, rectangles

我正在创建一个 JFrame 并绘制大小为 1x1 的矩形，每个矩形都是来自随机生成器的 RGB 值的随机颜色。当我运行代码时，框架会绘制所有矩形，但几秒钟后，框架中的矩形会发生变化。

矩形类：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;
import java.util.Random;
import javax.swing.*;
public class RandomRect extends JComponent
{
   private static final long serialVersionUID = 1L;
   public void paintComponent(Graphics g)
   {  
      Random rand = new Random();
      Graphics2D g2 = (Graphics2D) g;
      for(int y=1; y<601; y++)
      {
         for(int x=1; x<1201; x++)
         {  
            float red = rand.nextFloat();
            float green = rand.nextFloat();
            float blue = rand.nextFloat();
            Color randomColor = new Color(red, green, blue);
            Rectangle box = new Rectangle(x, y, 1, 1);
            g2.setColor(randomColor);
            g2.fill(box);
         }
      }
      System.out.println("Finished draw");
   }
} 
```

“Finished draw”正在打印两次。

RectViewer 类：

```
import java.awt.Color;
import javax.swing.*;
public class RectViewer
{ 
   public static void main(String[] args)
   {
      JFrame frame = new JFrame ();
      frame.setSize(1200,600);
      frame.setTitle("Using the Rectangle Class");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.setBackground(Color.white);
      RandomRect rect = new RandomRect();
      frame.add(rect);
      frame.setVisible(true);
   }
} 
```

我扔了一个 println 看它是否调用了矩形类两次，但我不知道为什么！任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:00:26.777

每当 Swing 决定需要重绘某些东西时（例如，当窗口被调整大小、最小化、未覆盖时）或当您显式调用 repaint() 时，都会调用 paintComponent() 方法。因此不要将初始化代码放在paintComponent() 中。顺便说一句，不要把任何需要很长时间的东西放在paintComponent()中，因为你在那里所做的所有计算都会“丢失”

例如，您可以将矩形渲染到缓存的 BufferedImage（如 Andrew Thompson 建议的那样），或者您可以将颜色保存在二维数组中。

# c# - 通过 asp.net 站点在线连接到 sql server 的最佳方式

> ID：14380526
> 
> 赞同：0
> 
> 时间：2013-01-17T13:49:26.080
> 
> 标签：c#, asp.net, sql-server, networking

情况：

我有一个开发的 asp.net 网站，它位于我们路由器后面的服务器上，该网站需要能够通过互联网从我们的服务器连接到客户端 sql 服务器实例。

附加信息：

我的 asp.net 网站是一个数据验证工具，它针对个人数据库运行数百条 sql 语句来验证其中的数据。

问题：

1.  做这个的最好方式是什么？

最好的意思是，安全且易于实施

可能的解决方案：

1.  客户端路由器和我们的路由器上的端口转发只允许我们的 IP 访问
2.  端口敲门实现
3.  VPN

非常感谢任何问题的评论和关注！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:03:03.067

您的 ASP.NET 应用程序*真的*需要连接到客户端数据库吗？这听起来不是个好主意。

*   你无法控制另一端的网络
*   客户可能会删除/更改/删除他们的数据库等
*   通常，大多数人不会乐意允许通过 Internet 连接到数据库，即使它受到防火墙规则或 VPN 的保护。
*   不愿允许从外部来源对内部资源进行身份验证

一些替代解决方案可能是：

**轮询：** 将在客户端运行并与您的 ASP.NET 应用程序联系、接收数据然后将其插入数据库的应用程序。这听起来与您的初衷相似，但略有不同。客户端正在启动通信，因此您无需担心连接性，本地应用程序还可以执行数据库检查/业务规则/应用安全性，例如与您的 ASP.NET 应用程序的 HTTPS 通信等。

**客户端/服务器：** 与轮询解决方案类似，您可以在客户端有另一个应用程序来设置通信（可能是 WCF net TCP / http SOAP），客户端可以注册到您的 ASP.NET 应用程序，然后您可以将数据发送到在推送架构中，您可以随时使用它。

上述两种解决方案都只是简单的想法，而不是完整的实施指南，但它可能会帮助您探索其他途径。

**服务：** 您能否将数据存储在本地，并为您的客户提供一种接收数据的方式，而不是将其直接写入他们的数据库？例如，每个客户端的 RSS/XML 提要？

如果替代方案不适合您的实施要求，并且您*必须*连接到许多客户端基础架构，我认为您需要支持上面列出的所有选项，具体取决于它们的内部 IT 策略（如果它们甚至允许接受外部连接) 他们可以规定他们更喜欢哪一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:49:33.563

我工作的公司目前使用各种系统来执行此操作。我们一直只在我们的网络和客户端之间使用私人 B2B VPN 连接，只打开我们的软件所需的端口。如果客户愿意，这可能是您最好和最简单的连接形式。我们将此连接限制为仅限有线连接，并且仅限来自已知为公司机器的 MAC 地址。但是您可以根据需要微调它以适应您的应用程序。

如果您正在寻找不那么具有侵入性的东西，我建议您编写一个 WCF 服务，将您需要的数据公开到您的网站并让客户安装，如果他们想要购买服务，大多数客户都愿意这样做至少在我的经验中，来自另一家公司。

另一种选择是让您的网站成为“盒装”产品，并将软件出售给客户，让他们安装在他们的网络内部并在 LAN 上运行，而不必授予您访问权限。

# regex - 如何将字符串数字转换为实数？

> ID：14380530
> 
> 赞同：4
> 
> 时间：2013-01-17T13:49:34.163
> 
> 标签：regex, perl

我想知道是否有办法将数字转换为

```
100u     10km     300nm      and so on 
```

因此它们被解释为：

```
100*10^-6      10*10^3      300*10^-6 
```

我需要比较这些数字（100u、10km 等）。例如，如果我想将 100u 与 10u 进行比较，那没关系；我只是执行以下操作，这是不正确的，但可以完成工作：

```
$distance =~ s/(.*)u/$1/;
if ($distance >= $desired_distance) {
       printf $distance;
} 
```

数字在哪里`(.*)u`，例如 100u。所以我只是删除`u`然后将它与一个数字进行比较。

但是，如果我有号码怎么办

```
1.45m 
```

我想将它与

```
1400u 
```

上面的东西没有用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T13:58:07.347

[Number::FormatEng](http://search.cpan.org/dist/Number-FormatEng/)将有助于将标准前缀转换为数值：

```
use warnings;
use strict;

use Number::FormatEng qw(:all);
for (qw(100u 1.45m 1400u)) {
    print "$_ ", unformat_pref($_), "\n";
}

__END__

100u 0.0001
1.45m 0.00145
1400u 0.0014 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T13:57:31.197

如果没有 CPAN 模块，您可以随时推出自己的：

```
my %units = (
    m  => 1,
    km => 1000,
    mm => 0.001,
);

for my $num (qw(10 10km 10mm)) {
    $num =~ /(\d+)(\w+)?/;
    my $value = $1;
    my $unit  = $2 || 'm';
    print "$num = ", $value*$units{$unit}, " m\n";
} 
```

哪个输出：

```
10 = 10 m
10km = 10000 m
10mm = 0.01 m 
```

加上测试和错误处理。有关一些更惯用的表达方式，请参阅 TLP 的答案。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-17T14:00:00.997

只需制作一个子程序来规范您的输入，例如

```
sub normalize {
    my %unit = (
        u  => 10^-6,
        km => 10^3,
        # etc
    );
    my $num = shift;
    my ($base, $unit) = $num =~ /(\d+)(\S+)/;
    $base *= $unit{$unit} // 1;   # default to 1 if no unit is found
    return $base;
} 
```

# android - Camera Intent 启动时会调用哪些 Activity 生命周期方法？

> ID：14380535
> 
> 赞同：0
> 
> 时间：2013-01-17T13:49:59.570
> 
> 标签：android, android-intent, android-fragments

有人可以列出所有将被调用的活动和片段的生命周期方法吗？

我有一项活动，该活动有一个片段。

让我们假设应用程序正在运行。从片段我开始相机意图。`getActivity().startActivityForResult(imageCaptureIntent, ConstantClass.CAMERA_REQUEST);`（请注意我调用**了我的 activite 的**startActivityForResult 方法）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:52:49.030

**活动生命周期**

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

**片段生命周期**

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

不要发布生命周期的图像，而是查看文档中的这些链接。它们显示了活动和片段将始终遵循的生命周期，即使您正在使用`startActivityForResult()`. 您将采用哪个确切的分支`Activity`将取决于您在其中执行的其他操作，例如调用任何生命周期方法。基本上，如果您仍然可以看到一些原始内容`Activity`，则将`onPause()`被调用，例如使用 a`Dialog`或使用透明度。如果它占据整个屏幕，`onStop()`则将被调用。

其他因素也可能改变方向。如果这不是您想知道的，那么如果您的问题似乎在做您认为不应该做的事情，您将需要对您的问题更具体一点。

# python - 从函数返回值

> ID：14380537
> 
> 赞同：0
> 
> 时间：2013-01-17T13:50:06.417
> 
> 标签：python, return

我想知道如何退货

```
cardn 
```

回到

```
__init___ 
```

我的程序的一部分，我可以继续。这是在课堂上。

```
'''the dealing'''
    while card_count != 2:
        deal = random.randint(1,13)
        self.card_check(deal)
        print(cardn)
        card_count += 1

def card_check(self, card):
        if card == 1:
            cardn = "Ace"
        elif card == 11:
            cardn = "Jack"
        elif card == 12:
            cardn = "Queen"
        elif card == 13:
            cardn = "King"
        return cardn 
```

我想要的只是卡的名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:54:09.913

简单的！写吧

```
cardn = self.card_check(deal) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:05:00.297

在你的情况下，我看到其他人已经回应了`cardn = self.card_check(deal)`，但`card_check()`没有做任何事情`self`。所以它很冷只是功能。如果是方法，那么您可以设置类成员而不是返回值：

```
def card_check(self, card):
    if card == 1:
        self.cardn = "Ace"
    elif card == 11:
        self.cardn = "Jack"
    elif card == 12:
        self.cardn = "Queen"
    elif card == 13:
        self.cardn = "King"
    else
        self.cardn = str(card) 
```

请注意，`cardn`它也为其他数字设置，但您可以检查它是否是 2 到 10 之间的整数，如果不是则引发异常。

还可以尝试使用 Python 工具，例如[pylint](http://pypi.python.org/pypi/pylint)。它们会显示一些警告，并且应该注意`self`您的方法中没有使用这些警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:09:26.033

几点建议。您可以创建一个列表或哈希表，将卡号映射到卡名。

```
def card_name(index):
    card_names = { 1: "Ace", 11: "Jack" }
    return card_names[index] 
```

您的交易实施（使用 randint）并不正确。它使每次抽奖的概率独立于先前的抽奖。这适用于轮盘赌，但不适用于二十一点。在二十一点中，您可能会用完王牌 :-)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:35:38.517

不同的方式，

```
def card_check(x):
   return {
      1  : 'Ace',
      11 : 'Jack',
      12 : 'Queen',
      13 : 'King',
   }[x]

print card_check(1) 
```

**输出**

```
Ace 
```

# ios - 公式键盘 ios

> ID：14380539
> 
> 赞同：1
> 
> 时间：2013-01-17T13:50:09.860
> 
> 标签：ios, xcode

我的应用程序是一个数学应用程序，除了普通的 ios 键盘之外，我还希望出现一种公式键盘。ipad 上的 ios 键盘提供数字，但不提供平方根和其他数学格式，那么是否有一个已经存在的 api 我可以用于此目的？感谢您的任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:51:06.050

找到这些将帮助您创建自定义键盘的绝佳链接。

很少有许多不同格式的键盘运行应用程序，您可以根据需要简单地修改它们。

[http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=keyboard](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=keyboard)

[http://code.google.com/p/networkpx/wiki/Using_5RowQWERTY](http://code.google.com/p/networkpx/wiki/Using_5RowQWERTY)

[https://github.com/vikingosegundo/KeyPad](https://github.com/vikingosegundo/KeyPad)

[http://iphonedevsdk.com/forum/iphone-sdk-tutorials/7350-adding-subviews-custimize-keyboard.html](http://iphonedevsdk.com/forum/iphone-sdk-tutorials/7350-adding-subviews-custimize-keyboard.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:54:46.067

是的，文本字段和文本视图提供了可用于自定义用于它们的键盘的属性`inputView`。`inputAccessoryView`

# java - 我们可以在根节点下创建一个空节点（目录）吗

> ID：14380544
> 
> 赞同：-2
> 
> 时间：2013-01-17T13:50:25.113
> 
> 标签：java, swing, directory, jtree

我们可以使用动态 JTree 在根节点下创建一个空目录吗？例如： ![在此处输入图像描述](../Images/40479eaa4ab3c8aa097ed1f13961035d.png)

我很想创建一个这样的jtree

```
public void actionPerformed(ActionEvent e) {
          String command = e.getActionCommand();
        if (ADD_COMMAND.equals(command)) {
            //Add button clicked
            System.out.println("BUTTON CLICKED ");
              DefaultMutableTreeNode p3,p4;

              p3=treePanel.addObject("New Node " + newNodeSuffix++);
              treePanel.addObject(p3, "newDir",false);

        }

    }
    public void populateTree(DynamicTree treePanel) {
        String p1Name = new String("Parent 1");
        String p2Name = new String("Parent 2");
        String c1Name = new String("Child 1");
        String c2Name = new String("Child 2");

        DefaultMutableTreeNode p1, p2;

        p1 = treePanel.addObject(null, p1Name);
        p2 = treePanel.addObject(null, p2Name);

        treePanel.addObject(p1, c1Name);
        treePanel.addObject(p1, c2Name);

        treePanel.addObject(p2, c1Name);
        treePanel.addObject(p2, c2Name);
    } 
```

在按钮单击事件上，如果不这样做，我就无法创建目录 **DefaultMutableTreeNode p3,p4;

```
 p3=treePanel.addObject("New Node " + newNodeSuffix++);
              treePanel.addObject(p3, "newDir",false);** 
```

结果我得到的目录包含一个文件 ![在此处输入图像描述](../Images/80a3eed12bf9a838a39e8df2d0a50783.png)

我想避免 newDir 只需要空目录请帮助我......

任何帮助都是可观的......

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:13:35.060

定义自定义渲染器来区分什么是节点（目录）和什么是叶子（文件）。为节点使用适当的图标。

# c# - C# Linq 将文件读入列表

> ID：14380549
> 
> 赞同：0
> 
> 时间：2013-01-17T13:50:46.127
> 
> 标签：c#, .net, linq, csv

我将 csv 文件读入列表。由于每个文件包含许多行且读取时间较长，因此我只需要检查每个文件的前 100 行。如何让 Linq 只读取前 100 行，然后继续读取下一个文件？

```
For(i=0;i<10;i++)
     line_list = (from line in File.ReadLines(files[i])
                  let field = line.Split(',')
                  where field[2] == "Apple" && !field[3].Contains("Banana")
                  select field).ToList(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:54:19.513

您可以使用`Enumerable.Take`只取前 100 行：

```
var first100Lines = File.ReadLines(path).Take(100); 
```

对于它的价值，这里是一体的：

```
List<List<string[]>> allFileLineColumns = files
    .Select(fPath => 
        File.ReadLines(fPath)
            .Take(100)
            .Select(l => new { Line=l, Cols=l.Split(',') })
            .Where(x => x.Cols.Length >= 4 && x.Cols[2] == "Apple" && !x.Cols[3].Contains("Banana"))
            .Select(x => x.Cols)
            .ToList()
    ).ToList(); 
```

虽然我会将它分成多个部分以增加可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:54:30.143

这是 linq 的一个奇怪用例，但请尝试 take()...

```
For(i=0;i<10;i++)
     line_list = (from line in File.ReadLines(files[i]).Take(100)
                  let field = line.Split(',')
                  where field[2] == "Apple" && !field[3].Contains("Banana")
                  select field).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T13:59:33.260

我认为您需要将结果连接到 line_list

```
 for(i=0; i<10; i++)
          {
              var fieldsList = from line in File.ReadLines(files[i])
                               let field = line.Split(',')
                               where field[2] == "Apple" && !field[3].Contains("Banana")
                               select field;

                line_list = line_list.Concat(fieldsList.Take(100).ToList()).ToList();
          } 
```

# jsp - JSF 1.2 dataTable 动态添加列

> ID：14380555
> 
> 赞同：0
> 
> 时间：2013-01-17T13:51:04.280
> 
> 标签：jsp, datatable, jsf-1.2

所以我有一个页面，要求用户输入人们的信息，我将使用这些信息在数据库中进行搜索，以获得更强大的人口统计数据。我遇到的问题是，当我在搜索中添加要查找的人时（通过 a ）我正在向列添加新行。

用户说他们不想要阵列的垂直渲染。他们想要水平渲染，这意味着每个父对象都有一个新列。只有父级，所以如果 addRow 对他们来说工作得很好，那么其余的，但是他们想要并排比较。我不知道如何通过 jsf/jsp 做到这一点。这是我目前拥有的：

```
<div style="overflow: auto; width: 1250px; height: 200px;">
<h:dataTable var="root" value="#{bcCreateMessageHandler.bcCreateInstance.inputValuesArray['/newParent/Persons[]/'].values}" styleClass="MaxWidth" headerClass="ArrayHeader">
    <h:column>
        <f:facet name="header">
            <h:outputText styleClass="ArrayLabel" value="Persons"/>
        </f:facet>
    </h:column>
    <h:column>
        <f:facet name="header">
            <h:panelGrid columns="2" columnClasses="MaxWidth"> 
                <h:outputText value="" /> 
                <h:commandLink value="#{bundle['MSG_ARRAY_ADD_ENTRY']}" styleClass="NavigationLink" binding="#{commandLink.instance}"
disabled="#{!bcCreateMessageHandler.bcCreateInstance.inputValuesArray['/newParent/Persons[]/'].addPossible}"
action="#{bcCreateMessageHandler.bcCreateInstance.inputValuesArray['/newParent/Persons[]/'].addRow}"/>
            </h:panelGrid>
        </f:facet> 
        <h:panelGrid columns="2" styleClass="ArrayEntryHeader" columnClasses="MaxWidth">
            <h:outputText styleClass="ArrayLabel" value="Create Case Person" />
            <h:commandLink value="#{bundle['MSG_ARRAY_REMOVE_ENTRY']}"  styleClass="NavigationLink"
binding="#{commandLink.instance}"
disabled="#{!bcCreateMessageHandler.bcCreateInstance.inputValuesArray['/newParent/Persons[]/'].removePossible}"
action="#{root['~REMOVE~'].removeRow}"/>
        </h:panelGrid> 
        <h:outputText value=""/>
        <h:panelGrid columns="2">
            <h:outputText styleClass="ViewFieldLabel" value="PersonFirstName"/>
            <h:inputText id="PersonFirstName_ID" styleClass="ViewEntryField" value="#{root['PersonFirstName']}" required="false"/>
            <h:outputText styleClass="ViewFieldLabel" value="Person's Last Name"/>
            <h:inputText id="PersonLastName_ID" styleClass="ViewEntryField" value="#{root['PersonLastName']}" required="false"/>
            <h:outputText styleClass="ViewFieldLabel" value="Person's Middle Name"/>
            <h:inputText id="PersonMiddleName_ID" styleClass="ViewEntryField" value="#{root['PersonMiddleName']}" required="false"/>
            <h:outputText styleClass="ViewFieldLabel" value="Date of Birth"/>
            <h:panelGroup>
                <h:inputText id="DateOfBirth_ID" styleClass="ViewEntryField" value="#{root['DateOfBirth']}" required="false">
                    <hx:convertDateTime type="date"/>
                    <hx:inputHelperDatePicker/>
                </h:inputText>
                <h:message styleClass="errorDetailsValidation" for="DateOfBirth_ID"/>
            </h:panelGroup>
            <h:outputText styleClass="ViewFieldLabel" value="SUPER ID"/>
            <h:panelGroup>
                <h:inputText id="SUPERID_ID" styleClass="ViewEntryField" value="#{root['SUPERID']}" required="false">
                    <f:converter converterId="IntegerConverter"/>
                </h:inputText>
                <h:message styleClass="errorDetailsValidation" for="SUPERID_ID"/>
            </h:panelGroup>
        </h:panelGrid>  
        <h:outputText value=""/>
        <h:dataTable var="nested_1_1_1" value="#{root['OtherIDs[]/'].values}" styleClass="MaxWidth" headerClass="ArrayHeader">     
            <h:column>
                <f:facet name="header">
                    <h:outputText styleClass="ArrayLabel" value="OtherIDs"/>
                </f:facet>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:panelGrid columns="2" columnClasses="MaxWidth"> 
                        <h:outputText value="" /> 
                        <h:commandLink value="#{bundle['MSG_ARRAY_ADD_ENTRY']}" styleClass="NavigationLink"
binding="#{commandLink.instance}"
disabled="#{!root['OtherIDs[]/'].addPossible}"
action="#{root['OtherIDs[]/'].addRow}"/>
                    </h:panelGrid>
                </f:facet> 
                <h:panelGrid columns="2" styleClass="ArrayEntryHeader" columnClasses="MaxWidth">
                    <h:outputText styleClass="ArrayLabel" value="Other ID" />
                    <h:commandLink value="#{bundle['MSG_ARRAY_REMOVE_ENTRY']}"  styleClass="NavigationLink"
binding="#{commandLink.instance}"
disabled="#{!root['OtherIDs[]/'].removePossible}"
action="#{nested_1_1_1['~REMOVE~'].removeRow}"/>
                </h:panelGrid>
                <h:outputText value=""/>
                <h:panelGrid columns="2">
                    <h:outputText styleClass="ViewFieldLabel" value="ID"/>
                    <h:inputText id="ID_ID" styleClass="ViewEntryField" value="#{nested_1_1_1['ID']}" required="false"/>
                    <h:outputText styleClass="ViewFieldLabel" value="Source System of Other ID"/>
                    <h:selectOneMenu styleClass="ViewEntryField" value="#{nested_1_1_1['IdType']}">
                        <f:selectItem itemValue="TYPE1" itemLabel="TYPE1"/>
                        <f:selectItem itemValue="TYPE2" itemLabel="TYPE2"/>
                    </h:selectOneMenu>
                </h:panelGrid>
            </h:column>
        </h:dataTable>
        <h:outputText value=""/>
        <h:panelGrid columns="2">
            <h:outputText styleClass="ViewFieldLabel" value="Gender"/>
            <h:selectOneMenu styleClass="ViewEntryField" value="#{root['Gender']}">
                <f:selectItem itemValue="M" itemLabel="M"/>
                <f:selectItem itemValue="F" itemLabel="F"/>
                <f:selectItem itemValue="U" itemLabel="U"/>
            </h:selectOneMenu>
        </h:panelGrid>  
        <h:outputText value=""/>
        <h:dataTable var="nested_1_2_1" value="#{root['AliasNames[]/'].values}" styleClass="MaxWidth" headerClass="ArrayHeader">     
            <h:column>
                <f:facet name="header">
                    <h:outputText styleClass="ArrayLabel" value="AliasNames"/>
                </f:facet>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:panelGrid columns="2" columnClasses="MaxWidth"> 
                        <h:outputText value="" /> 
                        <h:commandLink value="#{bundle['MSG_ARRAY_ADD_ENTRY']}" styleClass="NavigationLink"
binding="#{commandLink.instance}"
disabled="#{!root['AliasNames[]/'].addPossible}"
action="#{root['AliasNames[]/'].addRow}"/>
                    </h:panelGrid>
                </f:facet> 
                <h:panelGrid columns="2" styleClass="ArrayEntryHeader" columnClasses="MaxWidth">
                    <h:outputText styleClass="ArrayLabel" value="aliasNames" />
                    <h:commandLink value="#{bundle['MSG_ARRAY_REMOVE_ENTRY']}"  styleClass="NavigationLink"
binding="#{commandLink.instance}"
disabled="#{!root['AliasNames[]/'].removePossible}"
action="#{nested_1_2_1['~REMOVE~'].removeRow}"/>
                </h:panelGrid>
                <h:outputText value=""/>
                <h:panelGrid columns="2">
                    <h:outputText styleClass="ViewFieldLabel" value="Last Name"/>
                    <h:inputText id="LastName_ID" styleClass="ViewEntryField" value="#{nested_1_2_1['LastName']}" required="false"/>
                    <h:outputText styleClass="ViewFieldLabel" value="First Name"/>
                    <h:inputText id="FirstName_ID" styleClass="ViewEntryField" value="#{nested_1_2_1['FirstName']}" required="false"/>
                    <h:outputText styleClass="ViewFieldLabel" value="Middle Name"/>
                    <h:inputText id="Middle_ID" styleClass="ViewEntryField" value="#{nested_1_2_1['Middle']}" required="false"/>
                </h:panelGrid>
            </h:column>
        </h:dataTable>
        <h:outputText value=""/>
        <h:panelGrid columns="2">
            <h:outputText styleClass="ViewFieldLabel" value="Date Person Expired"/>
            <h:panelGroup>
                <h:inputText id="DateExpired_ID" styleClass="ViewEntryField" value="#{root['DateExpired']}" required="false">
                    <hx:convertDateTime type="date"/>
                    <hx:inputHelperDatePicker/>
                </h:inputText>
                <h:message styleClass="errorDetailsValidation" for="DateExpired_ID"/>
            </h:panelGroup>
        </h:panelGrid>
    </h:column>
</h:dataTable> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:29:23.033

因此，如果您想动态添加列，您`dataTable`可以通过两种方式完成，[将您的 dataTable 绑定](http://kalanir.blogspot.com.es/2007/02/jsf-binding-datatable-from-managed-bean.html)到您的支持 bean**或**使用第三方组件库（如**RichFaces**），它使您能够拥有[强大的数据表](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_dataTable.html)，您可以在其中定义[`columns`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_columns.html)动态标签创建它们。选择其中之一，集成 Richfaces 意味着将相应的库添加到您的类路径并配置它们。

# gwt - 绘制布局后的 SmartGWT getOffsetHeight

> ID：14380558
> 
> 赞同：1
> 
> 时间：2013-01-17T13:51:09.957
> 
> 标签：gwt, smartgwt

我需要获取 Vlayout 的 offsetHeight，但直到我知道它已被绘制。我如何检查这个组件是否已绘制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:28:47.240

> 我如何检查这个组件是否已绘制？

您可以覆盖 Canvas 的 onDraw 方法并在那里添加一些自定义功能。

```
 @Override
  protected void onDraw()
  {
    super.onDraw();
    //your code
  } 
```

或者，您可以向组件添加绘图处理程序：

```
 addDrawHandler(new DrawHandler() {

     @Override
     public void onDraw(DrawEvent event)
     {
        //Do stuff
     }
  }); 
```

# jakarta-ee - Java EE 应用服务器如何管理库？

> ID：14380562
> 
> 赞同：1
> 
> 时间：2013-01-17T13:51:24.363
> 
> 标签：jakarta-ee, classloader

假设在一台 Java EE 服务器上部署的 Java EE 应用很少（vendor 无意义，可能是 Glassfish、JBoss、WebLogic 等）。每个应用程序在部署的 .war 或 .ear 中包含相同的库，例如：log4j.jar。（是的，我知道最好在服务器的 ext-lib 目录中安装一个 .jar，将其共享给所有应用程序，但在这种情况下，每个人都有自己的 log4j.jar 副本）。

现在，服务器正在部署所有这些应用程序，运行：

1）一个版本的log4j.jar（可能是第一个部署的），共享给其他应用程序？

2）每个已部署应用程序的 log4j 实例数（消耗 RAM 的次数是已部署应用程序数的数倍）？

哪句话是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:05:18.637

它通常是 2)（旧版本的 JBoss 曾经这样做 1）即默认情况下在应用程序之间共享类），但这通常是一件好事，因为这意味着一个 Web 应用程序中的库访问不能影响另一个。在您的具体示例中，它允许您为每个应用程序设置不同的日志配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:59:43.260

据我所知，应用程序容器将为每个应用程序使用不同的类加载器。所以它可能是第二种选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:16:35.413

通常，您包含在应用程序中的所有 jar 仅对应用程序可见，因为每个应用程序都有自己的类路径。因此，在多个应用程序中使用同一个库会导致在内存中加载同一个库的更多实例。
由开发人员来避免这种重复，将库保存在应用程序服务器上的共享文件夹中，而不是将其包含在应用程序存档中。
如果使用 maven，可以将依赖库声明为“已提供”，以使其不包含在部署存档中。
不幸的是，每个应用程序服务器都有自己的共享 jar 配置，例如 Glassfish 想要它们在`domain/lib/ext`文件夹中。
这可以通过使用配置文件配置 maven 来管理，每个应用程序服务器配置一个配置文件，并为每个配置文件配置一个插件以将库复制到适当的文件夹中。

# c# - 在远程计算机上创建目录 windows 8

> ID：14380573
> 
> 赞同：0
> 
> 时间：2013-01-17T13:51:46.423
> 
> 标签：c#, windows, windows-8

我有以下代码，当我尝试连接到托管 Windows 7 的虚拟机时，它运行良好：

```
string outputPath = @"\\" + sHost + "\\C$" + batchRunPath + jobName;
if (Directory.Exists(outputPath))
{
      listOfMessages.Items.Add("Job named " + jobName + " already exists.");
}
else
      Directory.CreateDirectory(outputPath); 
```

我的主机将是 Windows 8，我正在尝试运行相同的代码。

这一次，我收到以下 IO 错误：

> 登录失败：未知用户名或密码错误。

我想我必须将凭据添加到连接字符串中，问题是如何...

有任何想法吗？

# asp.net - ASP.NET 成员资格，拒绝所有角色访问

> ID：14380574
> 
> 赞同：1
> 
> 时间：2013-01-17T13:51:46.597
> 
> 标签：asp.net, c#-4.0, web-config, asp.net-membership, asp.net-roles

我的 asp.net 会员授权有问题，我配置了我的主要 Web 配置，如下所示：

```
<connectionStrings>
    <add name="xxx" connectionString="Data Source=; Initial Catalog=; Integrated Security=;"    providerName="System.Data.SqlClient" />
    <remove name="LocalSqlServer"/>
    <add name="LocalSqlServer"
  connectionString="Data Source=; Initial Catalog=; Integrated Security=;"
  providerName="System.Data.SqlClient" />
</connectionStrings>
<system.web>
    <roleManager enabled="true" defaultProvider="MyProvider">
       <providers>
        <add name="MyProvider"
        type="System.Web.Security.SqlRoleProvider" 
        connectionStringName="Devices"
        applicationName="MembersTable" />
       </providers>
    </roleManager>

    <membership defaultProvider="MyProvider">
      <providers>
        <add name="MyProvider"
        type="System.Web.Security.SqlMembershipProvider"
        connectionStringName="" />
      </providers>          
    </membership>
    <authentication mode="Forms">
        <forms loginUrl="Denied.aspx" name=".ASPXFORMSAUTH"/>
    </authentication>
  <compilation debug="true" targetFramework="4.0" />
</system.web>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>` 
```

在指定的文件夹中我的**配置**看起来像

```
<configuration>
  <location>
    <system.web>
        <authorization>
            <allow roles="role1"/>
            <deny users="*" />
        </authorization>
    </system.web>
  </location>
</configuration> 
```

但是登录后我无法访问文件夹文件，它会在`Denied.aspx`我使用方法验证用户`Membership.ValidateUser`和调用页面的页面上返回我`Response.Redirect`。这是否足够，或者我需要一种不同的方式来请求受保护的页面

```
if (
       Membership.ValidateUser(this.txtUsername.Text, this.txtPassword.Text))
        {

                Response.Redirect("/tempUser/Role1Page.aspx");

        }
        else {
            Response.Redirect("Denied.aspx");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:55:33.663

听起来用户不在角色中，或者角色配置不正确（尽管在您的代码段中看起来正确）。您可以通过查看网站配置工具（项目菜单、ASP.Net 配置、安全性）或在代码中检查这一点：`User.IsInRole("rolename")`.

# django - aptana creates an empty django project

> ID：14380576
> 
> 赞同：2
> 
> 时间：2013-01-17T13:51:47.963
> 
> 标签：django, aptana, pydev

I am using aptana 3.3.1, django 1.2.7, python 2.7

when i create a new django project in aptana i get an empty project.

No settings.py no manage.py etc.

![enter image description here](../Images/ecd948f08cdce164e603b2ff9fe811f7.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:09:42.103

I found the problem.
It is the name of the project, test cant be used as the name of the project because it is the name of an existing python module.

# mongodb - 对生产 mongo 数据库运行 db.copyDatabase() 对性能有何影响？

> ID：14380585
> 
> 赞同：1
> 
> 时间：2013-01-17T13:52:04.927
> 
> 标签：mongodb, mlab

我最近推出了一个尚未看到太大生产规模的网络应用程序，但我希望（希望；）它会在不久的将来。

我发现使用[`db.copyDatabase()`](http://docs.mongodb.org/manual/reference/method/db.copyDatabase/)将当前生产系统的快照复制到开发中非常有用的能力，并且想知道随着生产数据库的增长/承受更重的负载，我可能会遇到什么样的问题。

文档似乎没有表明该命令正在阻塞（具体来说，如果在命令运行时将数据添加到任一数据库，则数据集的引用会变得不同步）。

由于数据库被复制到开发（或登台）服务器，重建索引/等所花费的时间不会是一个大问题（至少在一段时间内）。

在这种情况下，文档对指导方针有点了解，所以我希望得到以下方面的建议：

*   运行 db.copyDatabase*从*生产中的实时数据库复制是否合适？
*   源数据库是否有性能影响？
*   超过它不再可行的大小是否有实际限制？（基于[this question here](https://stackoverflow.com/questions/11532139/is-there-a-limit-for-copydatabase-in-mongo)，该限制似乎很大）

作为参考，应用程序和数据库是分开托管的（[heroku](http://www.heroku.com) / [mongolab](https://www.mongolab.com)）。我还在命令`db.dropDatabase()`之前在本地运行`copyDatabase()`以获取全新的数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-22T00:39:33.707

不确定您是否知道，但您可以通过 MongoLab 的 Web 界面安排一次性或定期备份。这些备份可以转到您自己的自定义云存储容器（例如 Amazon S3），或者您可以选择让 MongoLab 将其存储在其云存储容器之一中。

这些备份是二进制转储（通过 MongoDB 的 mongodump 工具获取），您可以直接从 MongoLab 的 UI 下载它们。

我们将所有数据库复制到共享实例上，并尽一切努力从辅助数据库中取出备份，以最大程度地减少主数据库的负载（备份可能会占用大量资源）。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:13:31.563

这个答案最终会有点主观，因为我们不在您的硬件上等。

> 运行 db.copyDatabase 从生产中的实时数据库复制是否合适？

二进制备份可能是更好的选择：docs.mongodb.org/manual/tutorial/backup-databases-with-binary-database-dumps/

考虑到它基本上是使用全表扫描的数据库的“副本”，它的效果与真正从应用程序中执行完全相同的效果相同。如果您的数据不一定适合您的 RAM，它可能会导致临时过多的工作集，甚至可能导致计算机 LRU 内的交换。

通常情况下，您的工作集并不代表实际提取所有数据的成本，并且由于虚拟内存（mmap 进入）不是 RAM，您可能会发现它不适合。

除了 RAM 问题之外，您还*可能*会遇到很多很多因素的读取锁定问题。基本上有一些东西要记住。

我确信还有更多我没有列出的问题。

然而，值得一提的是，这些问题中的大多数都存在于一个非常大的数据集上。

> 超过它不再可行的大小是否有实际限制？

这完全取决于您准备等待数据多长时间以及您的服务器可以处理多少工作集，但我可能会选择链接问题的场景并说 100GB 是一个很好的限制.

# c# - 无法将文件上传到 Windows Azure Blob

> ID：14380588
> 
> 赞同：1
> 
> 时间：2013-01-17T13:52:28.447
> 
> 标签：c#, .net, asp.net-mvc-4, azure-storage, azure-blob-storage

我正在尝试将文件上传到 Windows Azure 存储 blob。我觉得我正在尝试一些非常基本的东西。我有一个新的 ASP.NET MVC 4 Web 应用程序（如 File->New Project...）。当我到达下面显示的“CloudStorageAccount.FromConfigurationSetting”行时，会引发异常。该异常具有以下信息：

```
Type: System.Runtime.InteropServices.SEHException
Message: External component has thrown an exception. 
```

这是我拥有的代码：

```
// Setup the Windows Aure blob client
CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetting) => configSetting(RoleEnvironment.GetConfigurationSettingValue(configName)));
CloudStorageAccount storageAccount = CloudStorageAccount.FromConfigurationSetting("BlobStorage"); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:18:30.227

我觉得你尝试做的方式是错误的。所以你可以使用下面提到的方法来完成你的任务。我提到了这篇文章的非常有用的链接。也检查一下。

如何：以编程方式访问 Blob 存储？

**检索您的连接字符串**

**方法一：**您可以使用 CloudStorageAccount 类型来表示您的存储帐户信息，如下所示。

```
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    CloudConfigurationManager.GetSetting("StorageConnectionString")); 
```

**方法2：**如果你创建一个没有引用的应用程序`Microsoft.WindowsAzure.CloudConfigurationManager`，并且你的连接字符串位于`web.config`or `app.config`then中，

```
using System.Configuration;
...
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
    ConfigurationManager.ConnectionStrings["StorageConnectionString"].ConnectionString); 
```

[**通过使用如何在 .NET 中使用 Windows Azure Blob 存储服务，**](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)您可以获得大量信息[](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

 **我希望这对你有帮助。**

# mysql - 一种用列项目计数的方法

> ID：14380589
> 
> 赞同：1
> 
> 时间：2013-01-17T13:52:30.427
> 
> 标签：mysql, sql, select

我有一个ordered_products 表，其中包含所有订购的产品。假设我有一个名为 trouser1 的产品。例如，当我有 order1 和 order2 并且这两个订单中都有 trouser1 时，它会添加到ordered_products：

```
order_id=1 name=trouser1 amount=1
order_id=2 name=trouser1 amount=1 
```

现在我想列出销售产品的前 10 名，但相同的产品需要在我的表中显示一次，但数量加在一起。

我尝试了类似以下的方法：

```
SELECT *
FROM ordered_products
GROUP BY naam
ORDER BY aantal DESC
SUM(amount)
WHERE name NOT UNIQUE 
```

它不起作用，有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:54:23.600

这将显示销售产品的前 10 名列表，

```
SELECT  name, SUM(amount) totalAmount
FROM    ordered_products
GROUP BY name
ORDER BY totalAmount DESC
LIMIT 10 
```

为了获得更好的性能，请在 column 上提供索引`name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:59:20.293

```
Select top 10 name, sum(amount)
from ordered_products
group by name
order by sum(amount ) desc 
```

它应该工作。;) 你只需要显示你正在计算的总和。不只是按它订购。*不会为你做。

# jquery - jQuery代码冲突？

> ID：14380593
> 
> 赞同：0
> 
> 时间：2013-01-17T13:52:55.227
> 
> 标签：jquery

首先让我感谢您花时间阅读我的问题。

我是 jquery 的新手，只是想学习。

我想做的是在我的网站的面板中制作幻灯片。

我从这里的在线示例中获取了一些代码：[http ://www.dzyngiri.com/index.php/sliding-panel-menu-using-jquery/](http://www.dzyngiri.com/index.php/sliding-panel-menu-using-jquery/)

我的代码与发布的代码几乎相同，但是当我将其添加到我的网站时，它给了我一个白页并且错误是内部 500 ，现在我知道我的服务器工作正常并且我已将问题缩小到一行代码。

这行代码紧随其后：

```
 setTimeout( function(){$('#staffmenu').css('right','-160px');},100); <!-- Change 'left' to 'right' for panel to appear to the right --> 
```

我究竟做错了什么 ？我已经在一个 html 文件中运行了相同的代码，它工作正常，是因为函数没有名称吗？

感谢仪式方向的任何帮助或踢球

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:57:04.660

jQuery 永远不会让服务器返回内部服务器错误 500。

另外我想知道你为什么在 javascript 代码中使用 html-comment？

```
setTimeout( function(){$('#staffmenu').css('right','-160px');},100); <!-- Change 'left' to 'right' for panel to appear to the right --> 
```

应该

```
setTimeout( function(){$('#staffmenu').css('right','-160px');},100); // Change 'left' to 'right' for panel to appear to the right 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T13:56:43.247

500 是页面没有响应的服务器错误。

如果您在代码中写了该注释，那就错了。

`<!-- ... -->`用于 HTML。

对于 Javascript 使用：

`//`对于单行评论和

`/* ... */`用于多行注释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T13:56:41.463

如果您收到错误页面（404、500 等），则问题出在服务器上。

jQuery 是一个 javascript 库，库在客户端运行。这意味着即使 jQuery 失败，也只会禁用您网站的部分功能，不会显示错误页面。

500 错误代码是一种“包罗万象”的错误。服务器出了点问题，但由于服务器找不到原因，所以无法确定是什么原因。

我当然不能告诉你该怎么做才能解决它。

* * *

编辑：`<!-- ... -->`按照 Andrea Turri 的建议删除该行中的评论标签。我怀疑是否会修复 500，但它不应该存在。

# java - Symfony2 Assetic yuicompressor 未知错误

> ID：14380597
> 
> 赞同：0
> 
> 时间：2013-01-17T13:53:07.580
> 
> 标签：java, javascript, linux, symfony

我最近为我的 symfony 安装配置了 yuicompressor。但我不让它工作。我总是收到如下所示的错误消息。我尝试过滤哪个 javascript 代码并不重要。有人有什么想法吗？我不知道如何/在哪里解决这个问题。

```
 [Assetic\Exception\FilterException]                                                                                                                                                                       
  An error occurred while running:                                                                                                                                                                          
  '/usr/bin/java' '-jar' '/var/www/vhosts/domain.de/httpdocs/sf/app/Resources/java/yuicompressor-2.4.7.jar' '--charset' 'UTF-8' '-o' '/tmp/YUI-OUT-941hD3' '--type' 'js' '/tmp/YUI-IN-ll8QOg'  

  Error Output:                                                                                                                                                                                             

  [ERROR] 277:10:invalid property id                                                                                                                                                                        

  [ERROR] 277:11:syntax error                                                                                                                                                                               

  [ERROR] 278:4:syntax error                                                                                                                                                                                

  [ERROR] 1:0:Compilation produced 3 syntax errors.                                                                                                                                                         
  org.mozilla.javascript.EvaluatorException: Compilation produced 3 syntax errors.                                                                                                                          
    at com.yahoo.platform.yui.compressor.YUICompressor$1.runtimeError(YUICompressor.java:154)                                                                                                                
    at org.mozilla.javascript.Parser.parse(Parser.java:392)                                                                                                                                                  
    at org.mozilla.javascript.Parser.parse(Parser.java:337)                                                                                                                                                  
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312)                                                                                                           
    at com.yahoo.platform.yui.compressor.JavaScriptCompressor.<init>(JavaScriptCompressor.java:533)                                                                                                          
    at com.yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:131)                                                                                                                          
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)                                                                                                                                           
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)                                                                                                                         
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)                                                                                                                 
    at java.lang.reflect.Method.invoke(Method.java:597)                                                                                                                                                      
    at com.yahoo.platform.yui.compressor.Bootstrap.main(Bootstrap.java:21)                                                                                                                                   

  Input:
  ... random javascript code goes here ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:52:53.323

看起来您的 .js 文件中有错误

[错误] 277:10：无效的属性 ID

[错误] 277:11：语法错误

[错误] 278:4：语法错误

在 yuicompressor 打印的行中检查您的 .js 文件：

这是一个例子： [http ://www.electrictoolbox.com/yui-compressor-troubleshooting-errors/](http://www.electrictoolbox.com/yui-compressor-troubleshooting-errors/)

# javascript - 无法让 D3 粒子示例工作？

> ID：14380600
> 
> 赞同：0
> 
> 时间：2013-01-17T13:53:24.537
> 
> 标签：javascript, d3.js

我正在查看 Mike Bostock 的D3.js[粒子示例。](http://bl.ocks.org/d/1062544/)

我已经在本地复制并粘贴了代码，根本没有更改任何内容。我正在使用 SimpleHTTPServer 运行代码，因此在本地运行不应该有任何安全问题。

每当我将鼠标悬停在正文上时，我都会在控制台中看到以下错误：

```
Uncaught TypeError: Object #<Object> has no method 'mouse' 
```

有谁知道可能会发生什么？任何人都可以让它在本地工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:59:33.710

你真的硬拷贝了整个引用的库吗？这可能是域间引用问题。你直接引用了`http://mbostock.github.com/d3/d3.js?1.25.0`吗？可能是，这在该域之外是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-29T15:40:21.103

有一种方法可以修复代码，以便您可以在[http://d3js.org/d3.v3.min.js参考最新版本的 D3](http://d3js.org/d3.v3.min.js)

你得到的错误是由行 var m = d3.svg.mouse(this); 将其更改为 var m = d3.mouse(this); 你应该没事。

请参阅此处的发行说明，了解从 D3 v2 到 v3 的更改： [https ://github.com/mbostock/d3/wiki/Upgrading-to-3.0](https://github.com/mbostock/d3/wiki/Upgrading-to-3.0)

具体来说：

“SVG：别名 d3.svg.mouse 和 d3.svg.touches 已被删除；改用 d3.mouse 和 d3.touches。这些方法是相同的，并且在早期的次要版本中移动，该版本也增加了对 HTML 的支持作为 SVG 元素。”

# sql - SQL - 何时使用联接？

> ID：14380602
> 
> 赞同：1
> 
> 时间：2013-01-17T13:53:29.467
> 
> 标签：sql

> **可能重复：**
> [SQL JOIN：USING、ON 或 WHERE 之间有区别吗？](https://stackoverflow.com/questions/5654278/sql-join-is-there-a-difference-between-using-on-or-where)

哪个查询更好？

1.

```
 SELECT awardCateg.ID,
    awardCateg.DESCRIPTION,
    awardCateg.FREQUENCY_ID,
    freq.ID,
    freq.DESCRIPTION
   FROM AWARD_CATEGORY awardCateg
   INNER JOIN FREQUENCY freq ON awardCateg.FREQUENCY_ID=freq.ID 
```

2.

```
 SELECT awardCateg.ID,
    awardCateg.DESCRIPTION,
    awardCateg.FREQUENCY_ID,
    freq.ID,
    freq.DESCRIPTION
   FROM AWARD_CATEGORY awardCateg,
        FREQUENCY freq
   WHERE awardCateg.FREQUENCY_ID=freq.ID 
```

* * *

```
AWARD_CATEGORY:
ID  FREQUENCY_ID    DESCRIPTION
6   1   Spark of the month
7   2   Best Mentor of the quarter
9   3   Best Associate 
10  3   Leadership Award

FREQUENCY:
ID  DESCRIPTION
1   Monthly
2   Quarterly
3   Annual

Expected result:
ID  DESCRIPTION     FREQUENCY_ID    ID  DESCRIPTION
6   Oscar of the month            1 1   Monthly
7   Catalyst of the quarter 2   2   Quarterly
9   Best of the Best              3 3   Annual
10  Leadership Award              3 3   Annual 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:15:09.733

你没有定义什么是“更好”。在大多数数据库中，两者都会优化到相同的底层执行计划。

但是，出于各种可读性原因，第一个版本更好：

(1) 很明显，内部连接正在发生。

(2) `,`in a`from`子句暗示笛卡尔积/交叉连接。这是一个非常昂贵的操作。

(3) 如果你在第二个例子中`,`从`from`子句中删除了，它仍然是一个有效的`from`子句。. . 查询可能会运行但不会返回预期结果。

(4) 第二种语法不提供支持外连接的标准语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T13:56:34.270

这两个查询具有相同的结果。

第一个是`ANSI SQL-92`语法，`INNER JOIN`而第二个是旧的。第二个查询产生笛卡尔积，但提供了一个相等的条件，这就是为什么它给出与查询 1 相同的结果。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-17T13:59:08.017

与笛卡尔积相比，内连接会更快。第一个查询更好。

# c# - 如何对这种方法的 catch 块进行单元测试？

> ID：14380605
> 
> 赞同：2
> 
> 时间：2013-01-17T13:53:37.813
> 
> 标签：c#, asp.net-mvc-3, error-handling, nunit, rhino-mocks

我正在学习单元测试。如何使用 NUnit 和 Rhino Mock 对该方法进行单元测试？好吧，我已经测试`try`了块并想测试`catch`块的代码覆盖率。

```
[HttpPost]
public ActionResult AppraisalOrderIsAcceptedByEmployee(int appraisalOrderId)
{
    try
    {
        this.appraisalOrderService.SubmitAppraisalOrder(appraisalOrderId);
    }
    catch (MessageLoneException ex)
    {
        // Display validation errors
        PersistErrors(ex);

        // Remains on the same view
        return RedirectToAction("VerifyOrderDetails", new { id = appraisalOrderId });
    }
    return GetLoginRedirectCurrentUser();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T13:58:41.643

假设这`appraisalOrderService`是一个接口（在适当架构的应用程序中是一个安全的假设），您的控制器将其作为构造函数注入，您可以使用您最喜欢的模拟框架轻松模拟它。例如，使用 Rhino Mocks，您的测试可能如下所示：

```
[TestMethod]
public void AppraisalOrderIsAcceptedByEmployee_Should_Redirect_To_VerifyOrderDetails_Action_If_SubmitAppraisalOrder_Throws_A_MessageLoneException()
{
    // arrange
    var appraisalOrderId = 5;
    var orderServiceMock = MockRepository.GenerateMock<IOrderService>();
    orderServiceMock
        .Expect(x => x.SubmitAppraisalOrder(appraisalOrderId))
        .Throw(new MessageLoneException());
    var sut = new MyController(orderServiceMock);

    // act
    var actual = sut.AppraisalOrderIsAcceptedByEmployee(appraisalOrderId);

    // assert
    Assert.IsInstanceOfType(actual, typeof(RedirectToRouteResult));
    Assert.AreEqual("VerifyOrderDetails", result.RouteValues["action"]);
    Assert.AreEqual(appraisalOrderId, result.RouteValues["id"]);
} 
```

您还没有展示这些`PersistErrors`方法是什么以及它的行为方式，因此很难说出测试它的正确方法。如果此方法正在使用它们，您可能需要模拟其他东西。鉴于您在其上方发表的评论，我想您以某种方式在`ModelState`使用`AddModelErrorMethod`. 如果是这种情况，您可以在测试的断言阶段对其进行验证：

```
Assert.IsFalse(sut.ModelState.IsValid); 
```

如果您知道存储错误的密钥：

```
Assert.AreEqual(
    "some expected message",
    sut.ModelState["someKey"].Errors.Single().ErrorMessage
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:19:34.687

您可能可以`PersistErrors()`独立测试。

并且`RedirectToAction`是一种框架方法。无需测试框架。

仅仅为了代码覆盖而测试`catch`块的内容似乎有点过分了。不涉及任何逻辑。

您应该测试是否根据需要`appraisalOrderService.SubmitApraisalOrder()`抛出 a `MessageLoneException`。

记住 80/20 法则。测试覆盖范围的框架效率不高，而且浪费了您作为开发人员恕我直言的宝贵时间。

如果您仍想在此方法中测试 catch 块，您可以伪造您的服务，以便`FakeAppraisalOrderService.SubmitApraisalOrder()`抛出`MessageLoneException`.

尽管如此，我还是建议您将时间集中在测试实际逻辑上。100% 的覆盖率是一个理想化的目标，而不是一个规则。

# c++ - 每当我使用纯虚函数时出现“错误：未解析的外部符号”

> ID：14380608
> 
> 赞同：3
> 
> 时间：2013-01-17T13:53:45.863
> 
> 标签：c++, class, inheritance, virtual-functions

我觉得我在做一些非常愚蠢的事情，但我根本无法弄清楚我的代码有什么问题。我什至做了一个超级简化版的代码，仍然出现错误：

```
#include <iostream>

using namespace std;

class c1{
public:
    c1(){}
    ~c1(){}

    virtual int add(int a, int b);

private:
protected:

};

class c2 : c1{
public:
    c2(){}
    ~c2(){}

    int add(int a, int b){
        return a+b;
    }

};

int main(){

    c2 c;
    c.add(5,6);

} 
```

谁能发现我确信是有史以来最愚蠢的错误？

这是确切的错误消息：

```
1>main.obj : error LNK2001: unresolved external symbol "public: virtual int __thiscall c1::add(int,int)" (?add@c1@@UAEHHH@Z) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-17T13:55:32.953

```
virtual int add(int a, int b); 
```

这不是纯虚函数的声明。它只是一个虚函数的声明。它缺少定义，这就是您收到错误的原因。

```
virtual int add(int a, int b) = 0; 
```

这是一个纯虚函数的声明。它不需要定义，这就是为什么不会得到错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T13:54:57.220

您收到链接器错误，因为`c1::add(int,int)`未实现。要么让它成为纯虚拟的，要么实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T13:55:57.543

`c1::add()`不是纯虚拟的，只是没有实现。这意味着链接器正确地寻找主体，并且正确地在找不到主体时抱怨。你可能是这个意思：

```
class c1{
public:
    c1(){}
    ~c1(){}

    virtual int add(int a, int b) = 0;  // adding = 0 makes the function pure virtual

private:
protected:

}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T13:54:54.920

c1.add 不是纯虚拟的，您必须 add **= 0**。

```
virtual int add(int a, int b) = 0; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T13:55:37.290

更改虚拟 int add(int a, int b); to virtual int add(int a, int b) = 0;

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-17T13:56:41.437

`virtual int add(int a, int b);` 这意味着“我的函数`add`可以被子类化”。在其他是“我的函数`add`可以被子类化并且是纯虚拟的”你需要

```
virtual int add(int a, int b) = 0; 
```

# biztalk - BizTalk 平面文件输出架构 - 测试地图给出输出验证错误：元素“根”具有无效的子元素“记录”

> ID：14380611
> 
> 赞同：0
> 
> 时间：2013-01-17T13:53:54.413
> 
> 标签：biztalk, flat-file

我有一个相当简单的平面文件模式，它只生成 CSV，或者至少它应该生成。它有一个由 CRLF 分隔的 Root 节点，然后是一个由逗号分隔的 Record 节点，然后是其下的实际字段。

```
<?xml version="1.0" encoding="utf-16" ?>
<xs:schema xmlns="http://My.Namespace" xmlns:b="http://schemas.microsoft.com/BizTalk/2003" targetNamespace="http://My.Namespace" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:annotation>
    <xs:appinfo>
      <schemaEditorExtension:schemaInfo namespaceAlias="b" extensionClass="Microsoft.BizTalk.FlatFileExtension.FlatFileExtension" standardName="Flat File" xmlns:schemaEditorExtension="http://schemas.microsoft.com/BizTalk/2003/SchemaEditorExtensions" />
      <b:schemaInfo standard="Flat File" codepage="65001" default_pad_char="" pad_char_type="char" count_positions_by_byte="false" parser_optimization="speed" lookahead_depth="3" suppress_empty_nodes="false" generate_empty_nodes="true" allow_early_termination="false" early_terminate_optional_fields="false" allow_message_breakup_of_infix_root="false" compile_parse_tables="false" root_reference="Root" />
    </xs:appinfo>
  </xs:annotation>
  <xs:element name="Root">
    <xs:annotation>
      <xs:appinfo>
        <b:recordInfo structure="delimited" child_delimiter_type="hex" child_delimiter="0xD 0xA" child_order="postfix" sequence_number="1" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" />
      </xs:appinfo>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:annotation>
          <xs:appinfo>
            <groupInfo sequence_number="0" xmlns="http://schemas.microsoft.com/BizTalk/2003" />
          </xs:appinfo>
        </xs:annotation>
        <xs:element name="Record">
          <xs:annotation>
            <xs:appinfo>
              <b:recordInfo structure="delimited" child_delimiter_type="char" child_delimiter="," child_order="infix" sequence_number="1" preserve_delimiter_for_empty_data="true" suppress_trailing_delimiters="false" />
            </xs:appinfo>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:annotation>
                <xs:appinfo>
                  <groupInfo sequence_number="0" xmlns="http://schemas.microsoft.com/BizTalk/2003" />
                </xs:appinfo>
              </xs:annotation>
              <xs:element minOccurs="0" default="" name="TheFirstField" nillable="true" type="xs:string">
                <xs:annotation>
                  <xs:appinfo>
                    <b:fieldInfo justification="left" sequence_number="1" />
                  </xs:appinfo>
                </xs:annotation>
              </xs:element>
              <!-- And more fields here -->
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

当我在此架构上执行生成实例时，我得到一个只有逗号的文件，这表明它至少在某种程度上适合创建 CSV。但是，当我将此模式作为映射的输出类型时，从 XML 文件的输入类型，我做一个测试映射，我得到这个：

```
Invoking component...
TestMap used the following file: <file:///C:\path\to\test.xml> as input to the map.
C:\path\to\output.xml: error btm1046: Output validation error: The element 'Root' in namespace 'http://My.Namespace' has invalid child element 'Record'.
Test Map failure for map file <file:///C:\path\to\my\Map.btm>. The output is stored in the following file: <file:///C:\path\to\output.txt> 
Component invocation succeeded. 
```

output.txt 文件最终不会被创建。

使用平面文件输出测试地图时出现此错误的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:55:47.680

此错误表明从地图生成的输出未通过您的架构进行验证。我尝试了您的示例，但它适用于我的机器™。您提供的架构确实允许该`Record`元素成为`Root`.

您能否查看文件`C:\path\to\output.xml`是否正在创建，如果是，在针对您的架构进行验证时是否显示相同的错误？当您将 Test Map Output 设置为 Native 而不是 XML 时会发生什么？您是否还可以检查您的程序集在全局程序集缓存中是否是最新的？

# awk - 通过 awk 和 openssl 检索数据

> ID：14380613
> 
> 赞同：1
> 
> 时间：2013-01-17T13:53:54.720
> 
> 标签：awk, openssl

我正在使用**openssl**加密文件中的数据。

在将该文件中的数据分配给 shell 变量的过程中，我正在动态解密该文件并尝试使用**awk**将其解析为变量。

```
$ myuser=$(echo | awk '{print $1}' | openssl aes-256-cbc -in encrypted -pass file:../password.txt -d) 
$ echo $myuser 
Bruce-Wayne Batman 0.0.0.0 
```

我应该只是回应`Bruce-Wayne`，但不知何故我的**awk**指令没有像我预期的那样工作。

任何人都可以提供见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:59:21.507

你似乎把你的管道弄糊涂了：

```
$ myuser=$(openssl aes-256-cbc -in encrypted -pass file:../password.txt -d | awk '{print $1}') 
```

那就是你想要第一个`Bruce-Wayne Batman 0.0.0.0`有效的字段：

```
echo "Bruce-Wayne Batman 0.0.0.0" | awk '{print $1}' 
```

做`echo | awk '{print $1}'`与将*（什么都不是）*`echo`的输出通过管道传输到.`echo` *`awk`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:59:55.720

```
myuser=$(openssl aes-256-cbc -in encrypted -pass file:../password.txt -d | awk '{print $1}') 
```

您不需要 echo，您应该 awk openssl 命令的输出。我没有你的 password.txt，所以我只是创建了一个明文版本，并用 cat password.txt 替换了你的 openssl 命令。使用您的订单，通过回声，我得到了您的输出。使用我的命令，没有回声，我得到了布鲁斯韦恩。*

# git - 在原始分支上提交、分支和撤消是否安全？

> ID：14380618
> 
> 赞同：1
> 
> 时间：2013-01-17T13:54:00.917
> 
> 标签：git

在分支 A 提交，分支一个新分支 B，撤消在 A 的最后一次提交（或更多）（重置为先前的提交），留下从 A 中删除的历史记录是安全的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:23:48.853

为了澄清你的例子，你目前有这个：

```
Z-Y-X-W  <--A 
```

你想在 A 当前所在的地方分支 B，所以你会有这个：

```
Z-Y-X-W  <--A,B 
```

然后将 A 恢复到较早的点

```
Z-Y  <--A
   \
    X-W <--B 
```

是的，你可以这样做。分支只是指向提交的指针，因此您可以随意移动它们。只要提交有一个指向它的分支，它就会保留在您的存储库中以供将来使用。删除指向它的最后一个分支，它将被垃圾收集。

但另一个重要问题是：A 是否在跟踪远程分支 origin/A？如果是这样，您需要更加小心，不要更改起源/A 的历史。

# tomcat - 无法使用 VPN 访问 localhost

> ID：14380620
> 
> 赞同：4
> 
> 时间：2013-01-17T13:54:05.493
> 
> 标签：tomcat, localhost, vpn

每当我连接到 VPN 时，我观察到我的本地主机变得无法访问。

我有一个本地 tomcat 服务器，我想在这个 tomcat 服务器上执行我的 web 应用程序，同时连接到 VPN。

但是，这样做时，浏览器会将 localhost 重定向到其他 IP。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-24T12:26:34.797

我遇到了同样的问题，“其他 IP”是您的机器分配的与您的 VPN 连接连接的 IP。如果您将 Tomcat 服务器设置为托管来自该 IP 的应用程序，该 IP 是 Tomcat 常规信息部分下的“主机名”（在 Eclipse 中双击服务器会显示此信息），一切都应该可以正常工作。无论如何，它对我有用。

[![在此处输入图像描述](../Images/320b7e882a19ef5319d1a42fcf01f8ef.png)](https://i.stack.imgur.com/mshO6.png)

# c# - IDictionary`2 不能从 IDictionary 分配？

> ID：14380623
> 
> 赞同：1
> 
> 时间：2013-01-17T13:54:16.050
> 
> 标签：c#, dictionary

我有一个`ViewModel`类型的属性`IDictionary<string, string>`。我正在浏览它的属性列表`ViewModel`并使用反射来确定它是否是字典。

目前我有：

```
if (typeof(IDictionary).IsAssignableFrom(propDescriptor.PropertyType)) 
```

但是，这总是错误的，因为`propDescriptor.PropertyType`is `IDictionary`2`。有什么想法可以让它发挥作用吗？另外，为什么这不起作用？

* * *

我刚刚将我的属性更改为 IDictionary 而不是 IDictionary。

编辑：不确定我的泛型去了哪里，但上面句子中的第二个 IDictionary 有字符串，字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:59:33.260

它不起作用的原因是泛型[`IDictionary<,>`接口](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)没有非泛型`IDictionary`作为基本接口。

也许这就是你想要的：

```
var type = propDescriptor.PropertyType;
if (type.IsGenericType && type.GetGenericTypeDefinition() == typeof(IDictionary<,>))
{ // ... 
```

**编辑：**上面的代码只会检查是否`type`被*声明*为`IDictionary<X, Y>`some `X`and `Y`。如果您还想处理`type`表示实现的类或结构*（* `IDictionary<X, Y>`甚至是派生自 的接口`IDictionary<X, Y>`）的情况，请尝试以下操作：

```
Func<Type, bool> isGenericIDict =
  t => t.IsGenericType && t.GetGenericTypeDefinition() == typeof(IDictionary<,>);
var type = propDescriptor.PropertyType;
if (isGenericIDict(type) || type.GetInterfaces().Any(isGenericIDict))
{ // .. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T13:57:56.427

不是`IDictionary`2`。它是编译器生成的泛型类名`IDictionary<TKey,TValue>`，不能直接转换为`IDictionary`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:00:03.200

`IDictionary`2`不是`IDictionary`从其定义中可以看出的：

```
public interface IDictionary<TKey, TValue> :
    ICollection<KeyValuePair<TKey, TValue>>,
    IEnumerable<KeyValuePair<TKey, TValue>>,
    IEnumerable 
```

因此泛型`IDictionary<TKey, TValue>`不能转换为`IDictionary`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T13:59:21.343

[IDictionary](http://msdn.microsoft.com/en-us/library/system.collections.idictionary.aspx)与[IDictionary< T, K >](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)不同。

利用：

```
if (typeof(IDictionary<string, string>).IsAssignableFrom(propDescriptor.PropertyType)) 
```

# opengl - 使用 glDrawElements 绘制顶点

> ID：14380632
> 
> 赞同：0
> 
> 时间：2013-01-17T13:54:31.593
> 
> 标签：opengl

我想用 glDrawElements 绘制一些索引顶点。它们的位置存储在一个数组中。另外，我有一个与每个顶点相关联的不确定值的数组。本来这个数组是没有排序的，所以这个数组的第一个不确定值对应我的顶点位置数组的第一个位置。然后我必须对不确定性数组进行排序，因此这些值按降序存储。我还有一个索引数组，其中包含来自不确定性数组的原始索引。我的数组是这样设置的：

```
vertexPositionArray = {(0,0,0,1), (0,0,1,1), ..., (dimX, dimY, dimZ, 1)}
uncertaintyArray    = {1000.00, 989.20, 945.01, ...};
indexArray          = {76504, 65024, 3424, 3, 30491, 59123, ...}; 
```

现在......我想以某种方式在我的位置数组中绘制顶点，顺序由 indexArray 确定。因此，要渲染的第一个顶点将是位置在 vertexPositionsArray 中的索引 76504 并且在我的不确定性数组中的索引 76504 处具有不确定值的那个。

我希望你明白这一点，很难描述我想要做什么。我当前的代码没有产生预期的输出。我想我不太确定 glDrawElements 方法适用于哪个数组。

```
// Enable user defined "IN"-variables
glBindBuffer(GL_ARRAY_BUFFER, vertexPositionBufferObject);
glEnableVertexAttribArray(0);
glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, 0);

glBindBuffer(GL_ARRAY_BUFFER, vertexUncertaintyBufferObject);
glEnableVertexAttribArray(1);
glVertexAttribPointer(1, 1, GL_FLOAT, GL_FALSE, 0, 0);

glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, vertexIndexBufferObject);

// Draw vertices
glDrawElements(GL_POINTS, dimensionX * dimensionY * dimensionZ, GL_UNSIGNED_INT, 0); 
```

# symfony - 自动用户认证

> ID：14380633
> 
> 赞同：2
> 
> 时间：2013-01-17T13:54:37.110
> 
> 标签：symfony, symfony-2.1

基于这个问题：[Automatic post-registration user authentication](https://stackoverflow.com/questions/5886713/automatic-post-registration-user-authentication)

```
$token = new UsernamePasswordToken($userEntity, null, 'main', array('ROLE_USER'));
$this->get('security.context')->setToken($token); 
```

这在 Symfony 2 上运行良好，但在 Symfony 2.1 的实际版本中，这个接缝不再起作用，我尝试相同的代码但没有成功（也没有错误）。这个想法是在不使用登录表单的情况下通过 ajax 对我的用户进行身份验证。这是因为我使用这个模式：

```
if(user_on_data_base) { 
 if(user_fb_linked_with_us) { // authenticate him and redirect to /home }
} 
```

这是通过 ajax 执行的。

**编辑：最奇怪的是，如果我从我的用户控制器执行此代码，它就可以工作！但从我的 ajax 控制器执行它不。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:13:38.930

看看 HWIOAuthBundle是如何[做到这一点](https://github.com/hwi/HWIOAuthBundle/blob/765eeac5923f36e6f63403295fe32c978b0580db/Controller/ConnectController.php#L265-L285)的，看起来你需要抛出这个`security.interactive_login`事件。

以下是您的操作方法：

```
$this->get('event_dispatcher')->dispatch(
    SecurityEvents::INTERACTIVE_LOGIN,
    new InteractiveLoginEvent($this->container->get('request'), $token)
); 
```

# ektron - 在 Ektron 工作区中添加选项

> ID：14380646
> 
> 赞同：1
> 
> 时间：2013-01-17T13:55:27.217
> 
> 标签：ektron

我在 Ektron 8.6 中工作。

在 ektron 工作区添加一些附加选项的最佳方法是什么。我的要求就像在内容的设置 TAB 中添加一个附加选项。是否建议去相应的物理页面中进行更改？还是有任何替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:37:40.573

我会看看你是否可以使用元数据来模拟你需要的新设置。这样，无需更改 Ektron 代码，也无需编码。

另一种选择是为您想要的设置创建一个智能表单，然后添加内容选择器元数据以将内容链接到设置智能表单。

如果这些设置在每个页面上都不同（例如“ShowLeftHandColumn”），我会选择选项 A，如果大量页面将共享类似的设置（例如“SalesDepartmentAdvertismentSettings”），我会选择选项 B

# asp.net-mvc - 从 [HttpGet] 动作重定向到 [HttpPost] 动作 - MVC3

> ID：14380648
> 
> 赞同：2
> 
> 时间：2013-01-17T13:55:31.047
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-applications, razor, web

我想`[HttpPost]`从`[HttpGet]`同一个控制器中的动作重定向到动作。

是否可以？

我试图不为登录重写相同的代码，因为它是一个复杂的，而不是典型的登录函数

这是我的代码：

```
[HttpGet]
public ActionResult Login(){
    return View();
}

[HttpPost]
public ActionResult Login(LoginModel model)
{
    //search user and create sesion
    //...

    if (registered)
        {
        return this.RedirectToAction("Home","Index");                      
        }else{
        return this.RedirectToAction("Home", "signIn");
    }
}

[HttpGet]
public ActionResult signIn(){
    return View();
}

[HttpGet]
public ActionResult signInUserModel model)
{
    //Register new User
    //...
    if (allOk)
        {
        LoginModel loginModel = new LoginModel();
            loginModel.User = model.User;
            loginModel.password = model.password;

            //next line doesn't work!!!!!
        return this.RedirectToAction("Home","Login", new { model = loginModel); 

        }else{
        //error
        //...

    }

} 
```

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-10T10:26:49.903

您可以从方法名称返回不同的视图

```
public ActionResult signInUserModel model)
{
    ...
    return View("Login", loginModel);
} 
```

有点晚了，但我也遇到了同样的问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:02:28.157

您可以从 Post 方法中重构出核心登录逻辑，然后从两个地方调用该新方法。

例如，假设您创建了一个 LoginService 类来处理某人登录。这只是在您的两个操作中都使用它的一种情况，因此无需从一个操作重定向到另一个操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:05:40.100

有可能的。所有动作必须在同一个控制器中。

```
public ActionResult Login(){
    return View();
}

[HttpPost]
public ActionResult Login(LoginModel model)
{
    //search user and create sesion
    //...

    if (registered)
    {
        return RedirectToAction("Index");
    }

    return View(model);
}

public ActionResult SignIn(){
    return View();
}

[HttpPost]
public ActionResult SignIn(UserModel model)
{
    //Register new User
    //...
    if (allOk)
    {
        return RedirectToAction("Login");
    }

    return View(model);
} 
```

# node.js - MSB3411 无法加载 Visual C++ 组件

> ID：14380653
> 
> 赞同：8
> 
> 时间：2013-01-17T13:55:50.617
> 
> 标签：node.js, socket.io

我有 MS Visual Studio 2012 Ultimate，操作系统是 Windows 7，并安装了 nodeJs。我想使用 npm 安装 socket.io，但出现以下错误。

```
C:\Users\NEW>npm install socket.io
npm http GET https://registry.npmjs.org/socket.io
npm http 304 https://registry.npmjs.org/socket.io
npm http GET https://registry.npmjs.org/socket.io-client/0.9.11
npm http GET https://registry.npmjs.org/policyfile/0.0.4
npm http GET https://registry.npmjs.org/base64id/0.1.0
npm http GET https://registry.npmjs.org/redis/0.7.3
npm http 304 https://registry.npmjs.org/socket.io-client/0.9.11
npm http 304 https://registry.npmjs.org/base64id/0.1.0
npm http 304 https://registry.npmjs.org/policyfile/0.0.4
npm http 304 https://registry.npmjs.org/redis/0.7.3
npm http GET https://registry.npmjs.org/uglify-js/1.2.5
npm http GET https://registry.npmjs.org/ws
npm http GET https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http GET https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http 304 https://registry.npmjs.org/ws
npm http 304 https://registry.npmjs.org/xmlhttprequest/1.4.2
npm http 304 https://registry.npmjs.org/uglify-js/1.2.5
npm http 304 https://registry.npmjs.org/active-x-obfuscator/0.0.1
npm http GET https://registry.npmjs.org/zeparser/0.0.5
npm http GET https://registry.npmjs.org/tinycolor
npm http GET https://registry.npmjs.org/commander
npm http GET https://registry.npmjs.org/options
npm http 304 https://registry.npmjs.org/zeparser/0.0.5
npm http 304 https://registry.npmjs.org/commander
npm http 304 https://registry.npmjs.org/tinycolor
npm http 304 https://registry.npmjs.org/options

> ws@0.4.25 install C:\Users\NEW\node_modules\socket.io\node_modules\socket.io-c
lient\node_modules\ws

> (node-gyp rebuild 2> builderror.log) || (exit 0)

C:\Users\NEW\node_modules\socket.io\node_modules\socket.io-client\node_modules\w
s>node "C:\Program Files\nodejs\node_modules\npm\bin\node-gyp-bin\\..\..\node_mo
dules\node-gyp\bin\node-gyp.js" rebuild

Building the projects in this solution one at a time. To enable parallel build,
please add the "/m" switch.

MSBUILD : error MSB3411: Could not load the Visual C++ component "VCBuild.exe".
 If the component is not installed, either 1) install the Microsoft Windows SDK
 for Windows Server 2008 and .NET Framework 3.5, or 2) install Microsoft Visual
 Studio 2008\.  [C:\Users\NEW\node_modules\socket.io\node_modules\socket.io-clie
nt\node_modules\ws\build\binding.sln]

MSBUILD : error MSB3411: Could not load the Visual C++ component "VCBuild.exe".
 If the component is not installed, either 1) install the Microsoft Windows SDK
 for Windows Server 2008 and .NET Framework 3.5, or 2) install Microsoft Visual
 Studio 2008\.  [C:\Users\NEW\node_modules\socket.io\node_modules\socket.io-clie
nt\node_modules\ws\build\binding.sln]

socket.io@0.9.13 node_modules\socket.io
├── base64id@0.1.0
├── policyfile@0.0.4
├── redis@0.7.3
└── socket.io-client@0.9.11 (xmlhttprequest@1.4.2, uglify-js@1.2.5, active-x-obf
uscator@0.0.1, ws@0.4.25) 
```

可能是什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-22T03:53:19.293

很抱歉挖了一个老问题，但你的问题是我搜索“Socket.io VCBuild”时的第一个结果

在[StackOverflow](https://stackoverflow.com/questions/14180012/npm-install-for-some-packages-sqlite3-socket-io-fail-with-error-msb8020-on-wi)上磕磕绊绊后，我找到的解决方案是：

`npm install socket.io --msvs_version=2012`

**来自@petf-felzmann 的**更新。**如果您使用的是 VS 2015，您可以使用：**

 **`npm install socket.io --msvs_version=2015`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:19:59.063

安装 dotnet 3.5，这样 websockets 就可以编译了

[http://www.microsoft.com/en-us/download/details.aspx?id=21](http://www.microsoft.com/en-us/download/details.aspx?id=21)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T00:35:36.693

确保你有所有的必备软件来运行`node-gyp`：

*   [https://github.com/TooTallNate/node-gyp](https://github.com/TooTallNate/node-gyp)

您可以`gyp`通过环境变量配置所使用的 Visual Studio 版本，这样您就可以避免设置`--msvs_version=2012`属性。

例子：

*   `GYP_MSVS_VERSION=2012`为 Visual Studio 2012设置
*   设置`GYP_MSVS_VERSION=2013e`（“e”代表“特快版”）

有关完整列表，请参阅 - [https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294](https://github.com/joyent/node/blob/v0.10.29/tools/gyp/pylib/gyp/MSVSVersion.py#L209-294)

这对于 NodeJS 的 Windows 用户来说仍然很痛苦，因为它假定您安装了 Visual Studio 的副本，而许多最终用户永远不会拥有它。因此，我正在游说 Joyent 鼓励他们将 Web 套接字作为 CORE 节点的一部分，并可能将 GNU gcc 编译器作为 NodeJS 安装的一部分，这样我们就可以永久解决这个问题。

欢迎在以下位置添加您的投票：

*   [https://github.com/joyent/node/issues/8005#issuecomment-50545326](https://github.com/joyent/node/issues/8005#issuecomment-50545326)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-03-20T19:03:52.023

我想我找到了。尝试：

```
npm install websocket@1.0.3 
```

我在[这里找到了](http://cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/)**

# svn - 为 SVN 1.7 中的所有子文件夹添加 svn-ignore 属性

> ID：14380657
> 
> 赞同：2
> 
> 时间：2013-01-17T13:56:00.000
> 
> 标签：svn, svnignore

现在 Subversion 1.7 将所有元数据集中存储在结帐根目录中，我想知道是否有一种方法可以在`**/.classpath`忽略所有子文件夹中的“.classpath”文件夹的行上设置忽略（就像您可以在 .git- 中设置一样）忽视）

请注意我知道如何使用 svn propedit，并制作 bash 脚本。然而，我正在寻找的是一种像 git 这样的全局方法，而不是我可以为每个新项目运行的脚本。

关于重复：我找不到任何看起来足够现代以包含 svn 1.7 的问题，因此可能存在重复。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T16:37:55.057

1.  1.7**不**改变全局忽略模式的使用
2.  您必须重新阅读[SVN Book](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html)并了解`global-ignores`密钥的用法

该死的，当您使用初始树启动新项目时，在树干-WC 的根目录中运行 'svn propset -R svn:ignore ...' 并非*不可能完成的任务*

# c# - 获取不继承其他表单的表单列表

> ID：14380658
> 
> 赞同：0
> 
> 时间：2013-01-17T13:56:03.607
> 
> 标签：c#, winforms

我有一个基本表单 ( `BaseForm`)，需要从项目中的所有表单继承。他们中的一些人继承了它，其他人则没有。我怎样才能得到所有那些目前没有继承它的表单的列表，因为我们有很多表单并且会很费时间去检查它们中的每一个是否都继承了这个表单？也许有些反思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:01:08.277

使用检查[Type.IsSubclassOf()](http://msdn.microsoft.com/en-us/library/system.type.issubclassof.aspx)。

```
Assembly assembly = Assembly.GetExecutingAssembly();
Type baseType = typeof(BaseForm);

foreach (Type type in assembly.GetTypes().Where(t => (t.FullName.Contains("Form") && (t != baseType))))
{
    if (type.IsSubclassOf(typeof(BaseForm)))
        Console.WriteLine("{0} is subclass of {1}", type, baseType);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:05:17.883

```
Type formType = typeof(Form);

foreach (Type type in Assembly.GetExecutingAssembly().GetTypes())
   if (formType.IsAssignableFrom(type))
   {
      // print the list of forms
   } 
```

# ruby-on-rails - 向网站添加特别优惠

> ID：14380662
> 
> 赞同：0
> 
> 时间：2013-01-17T13:56:18.677
> 
> 标签：ruby-on-rails, web-applications, e-commerce

我是网络开发的新手。目前我正在设计一个人们可以购买不同东西的网站。该网站提供了许多特别优惠，例如，如果您购物超过 200 美元，您将获得 20% 的折扣，如果您购买 3 件类似商品，您将获得第四件免费商品。

谁能指出我正确的方向，最好的方法是什么？此外，如果报价发生变化，我不必更改很多代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T19:54:35.190

我会向您指出一些可以帮助您的代码。

例如，“如果您购买 3 件类似商品，您将免费获得第四件。”在 ror_ecommerce 中，这是一个“交易”。代码在这里：

[https://github.com/drhenner/ror_ecommerce/blob/master/app/models/deal.rb](https://github.com/drhenner/ror_ecommerce/blob/master/app/models/deal.rb)

此代码不是直截了当的，但基本上是寻找订单符合条件的最佳交易。

如果您有买 2 送 1，您可能想要实施买 4 送 2 和买 6 送 3...

* * *

类似地，ror-e 也有销售。您唯一需要添加的是 order.total 的条件并将该值传递给 Sale.for 方法。

我希望这会有所帮助

免责声明：我编写了代码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:17:08.163

您可以使用各种电子商务和支付宝石，例如[Railscasts](http://railscasts.com/?tag_id=23)中的宝石。

用于此目的的更多宝石在这里 - [The Ruby Toolbox](https://www.ruby-toolbox.com/categories/e_commerce)和[这里也是](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=payment)。

正如评论中提到的，您可以使用像[Shopify](http://www.shopify.com/)这样的 Saas 产品，但这不是免费的。

# java - 为什么我在请求 FileName 时得到空值？

> ID：14380669
> 
> 赞同：0
> 
> 时间：2013-01-17T13:56:34.990
> 
> 标签：java, html, jakarta-ee, file-upload, enctype

以下*HTML*片段向 servlet 发出*POST*请求`SendFileName`。

```
<form method="post" action="SendTheFileName" enctype="multipart/form-data">
                <div id="Files_to_be_shared"> 
                      <input type="file" id="File" name="FileTag" />
                      <input type="submit" value="Share" /> 
                </div>
</form> 
```

在 servlet 的*POST*方法中，我尝试通过调用来获取文件名：

```
String FileName = request.getParameter("FileTag") 
```

但我得到了`null`。这是为什么 ？

*我正在使用 Apache commons 进行文件上传。它工作正常。我不知道为什么当 enctype 是 multipart/form-data 而只使用 jdk 时我会得到 null。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:56:42.850

Servlet 3.0 API (Java EE 6) 提供了访问多部分帖子内容的方法：

请参阅[HttpServletRequest.getParts()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getParts%28%29) 您应该有一个[`Part`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/Part.html)用于文件，一个用于每个参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:55:32.300

使用 时`enctype="multipart/form-data"`，**所有**表单参数都作为多部分传输。

```
FileItemFactory factory = new DiskFileItemFactory();
ServletFileUpload upload = new ServletFileUpload(factory);
List items = upload.parseRequest(request);

// Process the uploaded form items
Iterator iter = items.iterator();
while (iter.hasNext()) {
    FileItem item = (FileItem) iter.next();

    if (item.isFormField()) {
       // ** here you get the non-file parameters **
    } else {
        processUploadedFile(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:07:59.017

你得到`null`是因为当表单是“multipart/form-data”的输入类型并且你的输入类型是“文件”时，它不会进入 HttpServletRequest requestParameterMap()。

您必须使用 Java EE 6 中的另一个选项，如下所示：

```
Part filePart = request.getPart("FileTag"); // or "File" - I am not sure 
                                            // that not for id value 
                                            // you should search
String fileName = filePart.getName(); 
```

此外，如果您可以使用 JSF 不仅仅是 Jave EE Servlets（在 JSF 2.2 中）是输入类型 =“文件”的特殊标记：

```
<h:inputFile value="#{myFileUploader.file}"/> 
```

这应该会有所帮助。

# c++ - 是否有一个好的 C++ 库来读取、创建和修改 BER 编码文件？

> ID：14380675
> 
> 赞同：9
> 
> 时间：2013-01-17T13:56:51.870
> 
> 标签：c++, asn.1, der

有几种工具可以自动生成用于读取和写入 BER 编码文件的 C++（或其他）代码。在我的 C++ 项目中，我需要库来读取和修改 BER 编码文件。我无法基于给定的数据结构生成 C++ 类，因为没有给定的数据结构。用户应该能够添加和删除整数、字符串等。我找到了一个具有此类功能的编辑器的开源项目：http: [//www.codeproject.com/Articles/4910/ASN-1-Editor](http://www.codeproject.com/Articles/4910/ASN-1-Editor)

但是，这是在 C# 中......

请告诉我，如果您知道如何获得具有此功能的优秀 C++ 库，可用于我的 C++ 项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T21:24:58.127

没有过多的通用 BER 读取库，因为在没有至少一些架构知识的情况下明确解析任意 BER 数据是不可能的。

您在 CodeProject 中指向的工具编辑 ASN.1 模式，这些模式用于创建 BER 编码，但您不能在不了解数据或猜测的情况下朝另一个方向前进。无法通过查看 BER 元素的 id 和长度来判断该元素是否包含原始数据或其他 BER 元素。

这是我想出的用于演示该问题的最小示例，只有 5 个字节，有两种截然不同的解释：

```
0xA0 0x03 0x02 0x01 0x00 
```

现在，这显然是一种构造的、特定于上下文的类型。它也有一定的长度。但里面是什么？你说不出来！

它可以是一个整数（0x02 是整数的原始标记，0x01 是 len，值 0x00）。

但它也可以是一个位串（你可以将一个位串放入一个构造类型中，然后 2 是最后未使用的位数，这意味着我们有 14 位，即 0000 0001 0000 00xxb = 00 0000 0100 0000b = 0x0040。

您可以编写一个可以读取/修改/写入 BER 文件的编辑器，但它必须知道架构，否则它将无法正确读取任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:07:02.853

确保您拥有正确的 ASN 定义文件。然后去链接[http://lionet.info/asn1c/asn1c.cgi](http://lionet.info/asn1c/asn1c.cgi)

将您的 ASN 定义粘贴到给定的窗口中。按下按钮“继续 ASN.1 编译”。如果您收到任何编译错误，请纠正这些错误。编译成功后，它将为您的解码器生成代码。试一试它的好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-22T21:18:58.867

无耻自塞：

我创建了一个提供现代 C++ 接口的开源 ASN1 ber 编码器/解码器库。

该库提供了一个编译器，它根据 ASN.1 规范生成 .hpp 包含文件。包含文件中提供了根据这些规范对 BER 数据进行编码和解码的功能。

[https://github.com/Samuel-Tyler/fast_ber](https://github.com/Samuel-Tyler/fast_ber)

# iphone - 谁的视图不在窗口层次结构中！问题

> ID：14380680
> 
> 赞同：1
> 
> 时间：2013-01-17T13:57:05.380
> 
> 标签：iphone, ios, uistoryboard, segue

我的项目首先是使用 UITabBarController 作为第一个出现的视图创建的，然后我需要添加一个显示 3 秒的自定义启动画面，所以我使用了一个出现在 UITabBarController 之前的新 UIViewController 并将这个自定义启动画面设置为第一个视图出现。然而，在我做了那个改变之后。目前，我的初始屏幕转到 UITabBarController 我收到此错误。

警告：尝试在 SplashViewController：0x1cdc55e0 上呈现 UITabBarController：0x1cdcfe30，其视图不在窗口层次结构中！

我以这种方式在我的 SplashViewController 中执行视图更改：

```
#import "SplashViewController.h"

@interface SplashViewController ()

@end

@implementation SplashViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    timer = [NSTimer scheduledTimerWithTimeInterval:3.0 target:self selector:@selector(changeView) userInfo:nil repeats:YES];

}

-(void)changeView{

    [self performSegueWithIdentifier:@"splash" sender:self];
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

顺便说一句，我正在使用情节提要，这是一个奇怪的错误，在我添加了启动画面之后一直出现在控制台中，我不知道如何摆脱它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:19:23.853

在身份检查器（故事板）中为 TabBarController 提供故事板 ID“TabBarViewController”

并将 changeView 实现为-

```
-(void)changeView
{
    UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    TabBarViewController *tabBarViewController = [storyBoard instantiateViewControllerWithIdentifier:@"TabBarViewController"];
    [[[[UIApplication sharedApplication] delegate] window] setRootViewController:tabBarViewController];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:16:40.910

无需为启动画面添加另一个控制器。只需在第一个选项卡中的控制器视图顶部添加一个视图（您的初始屏幕视图）。该视图将在应用程序启动时出现，然后在您想要的任何延迟之后，淡出该视图并将其从其超级视图中删除。

# java - 如何在 Android 上的 Xing QR 码扫描仪库中使用前置摄像头

> ID：14380682
> 
> 赞同：-2
> 
> 时间：2013-01-17T13:57:05.880
> 
> 标签：java, android

我想知道如何在 android 上使用带有 Xing 库的前置摄像头来扫描 2D 二维码。我的意思是需要什么代码？

非常感谢维沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:04:42.650

简而言之，您必须分叉[源代码](http://code.google.com/p/zxing/)并将所有与摄像头相关的代码替换为使用前置摄像头的代码。如果您询问每个实例需要在哪里完成，那么它超出了 StackOverflow 的范围。

这是一个线程，告诉您如何使用前置摄像头：

[安卓前置摄像头](https://stackoverflow.com/questions/6098729/android-front-camera)

其余的你必须自己做，如果你有更具体的问题，你可以随时回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:13:03.790

我想推荐您[添加选项以翻转图像以适应](http://code.google.com/p/zxing/issues/detail?id=660)与 QR 码和前置摄像头问题相关的前置摄像头。

# android - Android：自定义视图组错误地绘制子项（在旧设备上）

> ID：14380684
> 
> 赞同：1
> 
> 时间：2013-01-17T13:57:17.373
> 
> 标签：android, custom-controls, android-canvas

我已经实现了一个与 ViewPager 非常相似的自定义寻呼机。它使用画布来制作滚动效果。它在新设备（Android 4.2）上按预期工作，但在旧设备（Android 2.3）上不起作用。

onDraw 看起来像

```
 Log.d(TAG, "onDraw()");
    if (mSwipe != null) {
        Log.d(TAG, "Swipe effect=" + (mSwipe.lastX - mSwipe.startX));
        canvas.translate(mSwipe.lastX - mSwipe.startX, 0);
    }

    Page current;

    current = getPage(mPosition);
    if (current != null) {
        if (mPosition != 0) {
            Log.d(TAG, "Offset effect=" + current.offset.left);
            canvas.translate(current.offset.left, 0);
        }

        Log.d(TAG, "Pager width=" + getWidth());

        Log.d(TAG, "Child width=" + current.view.getWidth());
        current.view.draw(canvas);
        // ...
        // Commented out. Used to draw pages around.
        // ...
    } 
```

Android 4.2 打印：

```
onDraw()
Pager width=1080
Child width=960 
```

Android 2.3 打印：

```
onDraw()
Pager width=480
Child width=420 
```

我的测试页面只是具有纯色背景和一些文本的 TextView。

我在新设备上得到的是背景只占用尽可能多的视图和绘制附近的视图工作得很好。

在旧设备上，我得到一个全屏纯红色（当前视图的颜色），上面有文字。当我画孩子时，他们的文本在正确的位置，但他们的背景实际上占据了整个屏幕并且（这意味着）过度绘制当前页面。

有谁知道为什么会这样？我能做些什么呢？

PS子宽度是正确的。这两个设备的规格非常不同，但子视图应该比父（我的自定义）视图小一点。

**屏幕截图：** *忽略应用程序标题。它与碎片无关。这个测试项目恰好在 Eclipse 项目列表中，我在那里实现了代码。*

没有邻居：

![安卓 2.3](../Images/32887dfe4ecabe7e27c67f45ba70377a.png) ![安卓4.2](../Images/18e8b90b767a61314aadf1de90ffb98b.png)

与邻居：

![安卓 2.3 (n)](../Images/6d6950b4d11833d16643542f2524064a.png) ![安卓 4.2 (n)](../Images/091632e34ec25d38e93547e2e8303c47.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:12:48.177

检查您在自定义视图中扩展 xml 的方式 - 您是否为该方法提供父视图`inflate`？如果您已`null`将此方法设置为父级（第二个参数），则父级的布局参数将不会用于布局您的自定义视图。

# jquery - ajax jquery json，调用google geo api - 无法得到答案

> ID：14380688
> 
> 赞同：-1
> 
> 时间：2013-01-17T13:57:29.740
> 
> 标签：jquery, .net, ajax, json, asp-classic

如果我将它传递到 url，我想使用 google geo api：

[https://maps.googleapis.com/maps/api/geocode/json?address=montreal&sensor=false](https://maps.googleapis.com/maps/api/geocode/json?address=montreal&sensor=false)

正如google api doc所说，我得到了json对象

现在，我想做的是：

用ajax做，这就是我的代码：

```
$.ajax(
        {
        url: 'https://maps.googleapis.com/maps/api/geocode/json?address=montreal&sensor=false',
        dataType: 'json',
        success: function (data) {
        //do stuff
                                }
        }
                              )

     }; 
```

一切正常，我只想向用户显示加载动画，直到我取回对象，有时这需要时间..

有任何想法吗？？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:07:49.937

该`alert()`语句在`success`回调函数中，因此在您收到对象之前肯定不会出现警报。但是，您要返回的对象没有`d`属性，因此调用`alert(data.d)`将输出`undefined`。

# c# - 如何在新创建的对象上下文后刷新和实体对象

> ID：14380690
> 
> 赞同：4
> 
> 时间：2013-01-17T13:57:31.167
> 
> 标签：c#, .net, entity-framework

可以说，我有一个`EntityObject`叫`someProduct`：

```
//Get the object
Product someProduct = someObjectContext.Product.First();

//At runtime at some point, recreate the ObjectContext
someObjectContext = new SomeObjectContext();

//Try to refresh someProduct on the new ObjectContext
someObjectContext.Refresh(RefreshMode.StoreWins, someProduct); 
```

当第三行执行时，它会抛出一个异常：

> 要刷新的对象集合中索引 0 处的元素具有空 EntityKey 属性值或未附加到此 ObjectStateManager。

这是刷新`EntityObject`新创建的正确方法`ObjectContext`吗？

**编辑：**

new 的原因`ObjectContext`是为了刷新所有的dirty `EntityObjects`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:00:07.733

在刷新之前先将实体附加到上下文中，

```
someObjectContext.Products.Attach(someProduct); 
```

或者

```
someObjectContext.Set<Product>().Attach(someProduct); 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:05:10.247

由于 someProduct 是使用不同的 ObjectContext 检索的，因此您需要使用`someObjectContext.Attach(someProduct)`.

refresh用于刷新ObjectContext的缓存，它需要从同一个Object Context中选择一个实体。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T06:33:48.980

您应该将某些产品附加到对象，然后只有您可以刷新对象。

此刷新用于刷新之前创建的与对象内容相关的缓存。

我在项目中使用了以下代码。它工作正常。

objectContext.attach(someProduct);

# c - 如何在不引用 C 中的结构实例的情况下访问变量？

> ID：14380692
> 
> 赞同：0
> 
> 时间：2013-01-17T13:57:31.717
> 
> 标签：c, struct

如果我在 C 中有一个结构

```
typedef struct _a {
    int aval;
} a;

a a_inst;

void main() {
    a_inst.aval = 5;
} 
```

我怎样才能访问“aval”而不必在这个例子中输入 a_inst.aval ？这可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:02:53.930

`a_inst.aval`指“`aval`结构的一部分`a_inst`”。

`aval`- 你想输入 - 会引用“ `aval`...？”，此时编译器会变得脾气暴躁并拒绝合作。

回答你的问题：没有。

（当然，除非您开始使用`#define`/ `typedef`/ 指针作为速记符号的一种手段，此时您正在进入使代码可读性*降低的危险水域。）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:03:13.827

除了`#define`或使用指针，没有。所以你可以做

```
#define AVAL a_inst.aval 
```

或者

```
int * pAval= a_inst.aval 
```

但有经验的程序员不会这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:03:14.653

一种可能的方法是在此结构字段上使用指针。但是你需要

```
void main() {
  int *p_aval = &a_inst.aval;
  *p_aval=...; //access
} 
```

我个人更喜欢输入结构名称。它是明确的，不会造成伤害（就像要输入更多的字符）并且不太容易出现错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T15:25:50.717

由于结构仅由一个结构组成，因此`int`您可以通过以下方式设置 aval：

```
*((int *) &a_inst) = 5;
printf("AVAL %d\n", a_inst.aval); 
```

结果：

```
AVAL 5 
```

但我建议**不要使用**这种结构访问

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T15:40:58.033

只是将其作为一个简单易懂的示例来呈现。

我假设您希望能够做到这一点：

```
typedef struct _a {
    int aval;
} a;

a a_inst;

void main() {
    aval = 5; // <-- Access aval without typing a_inst.aval
} 
```

然而，这是不可能的。

为什么？

因为如果你有：

```
typedef struct _a {
    int aval;
} a;

a a_inst;
a b_inst;  // Another instance of the a struct

void main() {
    aval = 5; // <-- How would the compiler know if aval refers to aval in a_inst or in b_inst?
} 
```

# c++ - 在 C++ 中实现逐行文件解析器时遇到问题

> ID：14380693
> 
> 赞同：2
> 
> 时间：2013-01-17T13:57:47.220
> 
> 标签：c++, parsing, file-io, c++11

我无法在 C++11 中实现一个简单的文件解析器，它逐行读取文件并标记该行。它应该妥善管理其资源。解析器的用法应该是这样的：

```
Parser parser;
parser.open("/path/to/file");
std::pair<int> header = parser.getHeader();
while (parser.hasNext()) {
    std::vector<int> tokens = parser.getNext();
}
parser.close(); 
```

所以`Parser`班级需要一个成员`std::ifstream file`（或`std::ifstream* file`？）

1）构造函数应该如何初始化`this->file`？

2）`open`方法应该如何设置`this->file`到输入文件？

3) 文件的下一行应该如何加载到字符串中？（这是你会使用的：）`std::getline(this->file, line)`？

你能给点建议吗？理想情况下，您能否将类草拟为代码示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:03:03.583

它可以以多种方式设计。

1.  您可以要求用户为您提供流而不是指定文件名。这将更加通用，并且适用于所有流。

这样你应该有一个`std::ifstream&`成员变量，虽然你也可以有一个指针类型，但你需要`*_stream <<`调用任何运算符。

1.  如果您获取一个文件，您可以在构造函数中构造一个流，如果在析构函数中打开则关闭它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:04:42.647

因为`Parser`一旦你构建它并且在你打开文件之前它可能处于非常无用的状态，我建议你的用例看起来像这样：

```
Parser parser("/path/to/file");
std::pair<int> header = parser.getHeader();
while (parser.hasNext()) {
    std::vector<int> tokens = parser.getNext();
}
parser.close(); 
```

在这种情况下，您应该使用构造函数的成员初始化列表来初始化`file`成员（是的，应该是 type `std::ifstream`）：

```
Parser::Parser(std::string file_name)
  : file(file_name)
{
  // ...
} 
```

如果您将构造函数和`open`成员函数分开，则可以将构造函数保留为默认值，因为该`file`成员将被默认构造，从而为您提供与任何文件无关的文件流。然后，您可以将`Parser::open`文件名转发到`std::ifstream::open`，如下所示：

```
void Parser::open(std::string file_name)
{
  file.open(file_name);
} 
```

然后，是的，要从文件中读取行，您需要使用类似于以下内容的内容：

```
std::string line;
while (std::getline(file, line)) {
  // Do something with line
} 
```

不落入做事陷阱的好工作`while (!file.eof())`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T14:48:40.403

实际上，除了将文件名提供给 之外，还有另一种方法`Parser`：您可以将其提供给`std::istream`. 有趣的是，这种方式`std::istream`可以使用任何派生类，因此您可以提供它，例如 a `std::istringstream`，这样可以更轻松地编写单元测试。

```
class Parser {
public:
    explicit Parser(std::istream& is);

    /**/

private:
    std::istream& _stream;
    /**/
}; 
```

接下来，是迭代。`has`在 C++ 中，a后跟 a不是惯用的`get`。`std::istream`支持迭代（使用输入迭代器），你可以完美地设计你的解析器，它也可以。这样，您将受益于与许多 STL 算法的兼容性。

```
class ParserIterator:
    public std::iterator< std::input_iterator_tag, std::vector<int> >
{
public:
    ParserIterator(): _stream(nullptr) {} // end

    ParserIterator(std::istream& is): _stream(&is) { this->advance(); }

    // Accessors
    std::vector<int> const& operator*() const { return _vec; }
    std::vector<int> const* operator->() const { return &_vec; }

    bool equals(ParserIterator const& other) const {
        if (_stream != other._stream) { return false; }

        if (_stream == nullptr) { return true; }

        return false;
    }

    // Modifiers
    ParserIterator& operator++() { this->advance(); return *this; }

    ParserIterator operator++(int) {
        ParserIterator tmp(*this);
        this->advance();
        return tmp;
    }
private:
    void advance() {
        assert(_stream && "cannot advance an end iterator");

        _vec.clear();

        std::string buffer;
        if (not getline(*_stream, buffer)) {
            _stream = 0; // end of story
        }

        // parse here
    }

    std::istream* _stream;
    std::vector<int> _vec;
}; // class ParserIterator

inline bool operator==(ParserIterator const& left, ParserIterator const& right) {
    return left.equals(right);
}

inline bool operator!= (parserIterator const& left, ParserIterator const& right) {
    return not left.equals(right);
} 
```

有了它，我们可以扩充我们的解析器：

```
ParserIterator Parser::begin() const {
    return ParserIterator(_stream);
}

ParserIterator Parser::end() const {
    return ParserIterator();
} 
```

我将把`getHeader`方法和实际的解析内容留给你；）

# javascript - 试图掌握 JavaScript 动画的窍门

> ID：14380697
> 
> 赞同：3
> 
> 时间：2013-01-17T13:58:01.463
> 
> 标签：javascript, html, animation

我是新来的，也是 JavaScript 的新手。

基本上我想要实现的是让图像从页脚上升到页面的中心，我已经弄清楚了如何使用 CSS 来做到这一点。但我希望它在页面自行加载时升起。

如果有人能指出我正确的方向或向我展示一些示例等，我将不胜感激。

提前致谢，

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:01:29.743

所以你想在页面加载之前/期间执行动画？大多数现代浏览器在制作任何动画之前都会加载网站。

不过还有一个选择。您可以将大部分内容留在页面之外，当然动画除外。加载网站后，动画开始，您可以使用 AJAX 获取您的内容。

这意味着当您的动画正在运行时，会加载内容。

我现在正在创建一个演示......等一下！

* * *

这是演示：http: [//jsfiddle.net/gWhtQ/](http://jsfiddle.net/gWhtQ/)

我曾经`window.addEventListener('load', init, false);`等待 javascript 运行，直到页面加载。

加载后，将`XMLHttpRequest`创建一个对象，该对象在您的页面正常运行时获取另一个文件。

加载内容后，我使用`document.getElementById('content').innerHTML = xmlhttp.responseText;`.

不提内容。我只是使用了一个可用的随机 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:08:09.500

[如果您刚开始使用 Javascript，那么使用jQuery](http://jquery.com/)之类的库开始使用动画可能会容易得多。

jQuery 将允许您专注于您正在尝试做的事情，而不必过多担心浏览器差异、就绪事件等。此外，如果您对 jQuery 如何处理动画更感兴趣，您可以查看[GitHub 上的代码](https://github.com/jquery/jquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:09:56.107

我建议您查看[jQuery](http://jquery.com/)和[Addy Osmani 的帖子](http://addyosmani.com/blog/css3transitions-jquery/)。要在页面加载时制作动画，您需要将图像放在 html 正文的顶部，以便浏览器在页面的其余部分之前停止并首先加载它。然后在您的脚本中，您可以测试元素是否存在于 DOM 中，然后在存在时启动动画。但是，这确实会阻碍性能。我建议在页面加载后制作动画，您可以使用 jQuery 轻松测试。这样，图像可以放置在您的 html 正文中的任何位置，并且您的脚本可以放置在最后以缩短加载时间。Paul Irish 也有一篇关于做动画的[好帖子。](http://paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/)

# css - 仅当剩余宽度至少为 x 像素时才浮动元素

> ID：14380714
> 
> 赞同：1
> 
> 时间：2013-01-17T13:59:09.357
> 
> 标签：css, css-float

我有一个预先不知道宽度的元素，我想向左浮动，但前提是它在右侧为某些文本留下至少 x 量的空间。尝试过这样的事情：

```
#image { float: left }
#text  { min-width: 30em; }

<img id="image" src="...>
<p id="text">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p> 
```

但这不起作用，因为#text 的宽度被认为包括浮动。

如何使浮点数以它右边的空间量为条件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:05:24.053

使用响应式/自适应设计，并使用 css3 @ media screen 在不同的屏幕分辨率下以不同的方式排列元素

```
@media only screen and (min-width: 760px) and (max-width: 1280px) { 
    .classname { 

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T16:23:57.063

在这里回答：http: [//css-tricks.com/minimum-paragraph-widths/](http://css-tricks.com/minimum-paragraph-widths/)。

基本思想是添加`p::before { width: 10em; }`规则。

# internet-explorer - 用户告诉我 IE9 行为随着开发者工具栏而改变

> ID：14380728
> 
> 赞同：1
> 
> 时间：2013-01-17T13:14:13.867
> 
> 标签：internet-explorer, ie-developer-tools

我的一些用户报告说，如果他们在 IE9 上显示或隐藏开发人员工具栏，我们的网站行为会发生变化。由于它们不是很技术，我没有太多数据可以调试，所以我真的不能更精确。

我正确处理了该`console.log`功能（仅在有开发人员工具栏时才执行它）。

还有什么可能导致这种行为？

# nlog - NLog 无法写入安装目录中的日志文件

> ID：14380729
> 
> 赞同：4
> 
> 时间：2013-01-17T13:59:54.947
> 
> 标签：nlog

我有一个记录的应用程序，当我将它部署到默认目录时，我没有得到任何基于文件的日志记录。很明显，原因是写入“c:\program files (x86)\blah”需要提升我的应用程序所没有的特权级别。所以我最终告诉用户“安装到”c:\blah“它会正常工作，它确实如此。但这似乎很垃圾。还有其他选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T18:41:41.733

您可以将 NLog 配置为记录到不同的文件夹。NLog 有[SpecialFolderLayoutRenderer](https://github.com/nlog/nlog/wiki/Special-Folder-Layout-Renderer)允许你使用 .NET 的[特殊文件夹](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)。您应该能够使用 SpecialFolderLayoutRenderer 指定日志文件名。也许是这样的（我没有尝试过）：

```
<target name="file" xsi:type="File" layout="${longdate} | ${logger} | "${level} | ${message}" fileName="${specialfolder:folder=MyDocuments:dir=LogFiles:file=${shortdate}.log}" /> 
```

这应该（如果可行）`LogFiles`在用户文件夹的子文件夹中创建日志文件`Documents`，实际日志文件名对应于日期。我不知道，但我猜 NLog 会在第一次记录任何内容时创建 LogFiles 文件夹。

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T12:06:10.083

对我来说，它是这样工作的：

```
fileName="${specialfolder:folder=ApplicationData}/newDMS ClientApplication/Logs/${shortdate}.log" 
```

# php - Amazon SES API 中出现意外的 http 状态错误

> ID：14380742
> 
> 赞同：2
> 
> 时间：2013-01-17T14:00:28.253
> 
> 标签：php, amazon-web-services, amazon-ec2

我正在尝试使用 Amazon SES API 使用 PHP 发送邮件。我正在关注[这个](https://github.com/zshannon/Amazon-Simple-Email-Service-PHP)github 示例。

我的php代码如下：

```
<?php
    if (!class_exists('SES')) require_once 'SES.php';

    // AWS access info
    if (!defined('awsAccessKey')) define('awsAccessKey', 'my_key');
    if (!defined('awsSecretKey')) define('awsSecretKey', 'my_secret_key');

    // Check for CURL
    if (!extension_loaded('curl') && !@dl(PHP_SHLIB_SUFFIX == 'so' ? 'curl.so' : 'php_curl.dll')) exit("\nERROR: CURL extension not loaded\n\n");

    // Instantiate the class
    $ses = new SES(awsAccessKey, awsSecretKey);

    //Verify your Email Address
    echo "SES::verifyAddress(): ".print_r($ses->verifyAddress('myemail@mydomain.com'), 1)."\n";
?> 
```

当我在浏览器中运行此文件时，出现以下错误：

```
Warning: SES::verifyAddress(): [0] Unexpected HTTP status in /home/www/mail/SES.php on line 82
SES::verifyAddress(): 
```

我的域正在运行，并且我的网站正在其上运行。另外，我在 Outlook 中使用相同的访问密钥和密钥来发送带有我验证的电子邮件 ID 的邮件。有人知道可能是什么问题吗？

注意：- 我的服务器上有一个使用 openssl 创建的自签名 ssl 证书。

# html - cant vertical-align : 水平布局中带有图像的文本字段

> ID：14380743
> 
> 赞同：0
> 
> 时间：2013-01-17T14:00:33.000
> 
> 标签：html, css

我正在尝试创建一个类似于 facebook 的搜索字段、一个文本字段和一个带有用于搜索的搜索图像的按钮。

标记

```
 <div>
        <div style="width: 250px;">
            <input id="txtSearchPerson" type="text" style="width:150px;float:left;" />
            <img id="btnSearch" src="search.png" style="float:left;" />
        </div>
    </div> 
```

这两个控件按我的意愿水平对齐。

问题是输入（文本字段）右上方未与图像左上方对齐。

我可以用 jq 解决这个问题，但我应该用 CSS 来处理它。

我尝试使用“垂直对齐”和其他我知道的属性，但没有成功。我怀疑父亲容器，但仍然不能让它工作太久......

请协助。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:06:53.660

您可以在图像顶部和图像左侧添加填充，以使格式按预期对齐。

```
<div>
        <div style="width: 250px;">
            <input id="txtSearchPerson" type="text" style="width:150px;float:left;" />
            <img id="btnSearch" src="search.png" style="float:left;padding-top:.2em;padding-left: .1em;" />
        </div>
</div> 
```

[http://jsbin.com/umituz/2/edit](http://jsbin.com/umituz/2/edit)

# php - 用php在字符串中的数字字符之前放置一个换行符

> ID：14380745
> 
> 赞同：0
> 
> 时间：2013-01-17T14:00:45.603
> 
> 标签：php

我有这样的字符串：

```
123 qwerty 6 foo bar 55 bar 
```

我需要让它像这样

```
123 qwerty
6 foo bar
55 bar 
```

怎么做？

**UPD：** 我试过了

```
$subject = "123 qwerty 6 foo 55 bar";
$pattern = '/[^0-9]/';
preg_match($pattern, substr($subject,3), $matches, PREG_OFFSET_CAPTURE);
echo "<pre>";
print_r($matches); 
```

但这对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:25:49.850

你可以使用这个：

```
$text = '123 qwerty 6 foo 55 bar baz';
$result = preg_replace('/([0-9]+[^0-9]+)/i', '$1\n', $text); 
```

这会查找至少一个数字后跟至少一个不是数字的字符并添加换行符。

阅读更多

*   [模式](http://php.net/manual/en/reference.pcre.pattern.syntax.php)
*   [preg_replace](http://de1.php.net/manual/en/function.preg-replace.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:06:03.463

像这样：

```
 $lineending= "\n";
 $parts= explode(' ',$string);
 $result= "";
 for($i=0; $i<count($parts);){
    $result .= $parts[$i];
    while(!is_numeric($parts[$i]) && $i<count($parts)){
        $result .= $parts[$i];
        $i+= 1;
    }
    $result .= $lineending; 
 } 
```

;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:31:47.687

试试这个：

```
$subject = '123 qwerty 6 foo 55 bar';
$pattern = '/ (?=[\d]+)/';
$replacement = "\n";

$result = preg_replace( $pattern, $replacement, $subject );

print_r( $result ); 
```

产生：

```
123 qwerty
6 foo
55 bar 
```

PHP 演示：[http ://codepad.org/MNLgaySd](http://codepad.org/MNLgaySd)

* * *

关键在于正则表达式的“[正向前瞻](http://www.regular-expressions.info/lookaround.html)”，`(?=...)`

正则表达式演示：[http ://rubular.com/r/i4CdoEL9f4](http://rubular.com/r/i4CdoEL9f4)

# java - java - 如何使用带有java的webservice上传多个文件？

> ID：14380750
> 
> 赞同：0
> 
> 时间：2013-01-17T14:01:01.693
> 
> 标签：java, web-services, wsdl

好吧，我在这里搜索了如何在 java 上使用 webservice 上传文件，但没有任何令人满意的答案。我需要构建一个方法来接收一些字符串和文件列表。有人可以指导我如何创建可以上传多个文件的网络服务？

```
@WebMethod()
public String criarPA(String name, List<File> files) 
```

它是这样的......我已经看到我不能使用文件......那么我可以用什么代替呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:09:19.807

您不能使用 File，因为 WebService 中使用的 SOAP 协议没有这种类型。但是你总是可以发送字节数组：

```
@XmlType
public class SoapFile implements Serializable {

  private String fileName;
  private byte[] fileData;

  public String getFileName() {
     return fileName;
  }

  public void setFileName(String fileName) {
     this.fileName = fileName;
  }

  public byte[] getFileData() {
     return fileData;
  }

  public void setFileData(byte[] fileData) {
     this.fileData = fileData;
  }
} 
```

现在您的代码将如下所示：

```
@WebMethod
public String criarPA(List<SoapFile> files) 
```

接下来，您只需从使用标准“Java”方式`File`保存的字节数组创建。`SoapFile`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T14:59:35.787

这是一种方法，您应该发送一个 byte[] 列表。如果您想要文件的名称，您也应该添加该属性。

如果您通过 Java 中的 Web 服务传输文件，则需要注意一件重要的事情，您应该启用 MTOM，这可以提高性能。下面是实现为无状态 EJB 的 WS 端点的标头：

```
@WebService 
@WebContext(contextRoot="FileWS")
@MTOM(enabled=true)
@Stateless
public class FileWS implements IFileWS{

    @WebMethod(operationName = "sendFiles", action = "sendFiles")
    public void sendFiles(@WebParam(name = "name")String name, 
        @WebParam(name = "files")ArrayList<byte[]> files) { 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:13:30.463

“文件”在 Java Web 服务中不是受支持的类型。

如果您想了解 Java Web 服务支持的类型，请参阅此页面（第 3.2.3 节使用 Java Web 服务支持的数据类型）：[http ://docs.oracle.com/cd/B15897_01/web.1012/b14027 /javaservices.htm](http://docs.oracle.com/cd/B15897_01/web.1012/b14027/javaservices.htm)

我建议你实现一个 web 服务，在服务器端只上传一个文件，然后在客户端你调用这个方法，就像你有文件一样；）

这是一个实现用于上传文件的 Java Web 服务的教程：http: [//www.ibm.com/developerworks/library/ws-devaxis2part3/section2.html](http://www.ibm.com/developerworks/library/ws-devaxis2part3/section2.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:20:21.520

另一种方法是

您可以使用 SAAJ 上传图像。

```
The SAAJ API allows you to do XML messaging from the Java platform:
By simply making method calls using the SAAJ API, you can read and write
SOAP-based XML messages, and you can optionally send and receive such 
messages over the Internet (some implementations may not support sending
and receiving). 
```

请[在此处查看](http://docs.oracle.com/javaee/5/tutorial/doc/bnbhg.html#bnbhj)它对文件的工作方式。

* * *

**创建 AttachmentPart 对象并添加内容：**

```
AttachmentPart attachment = message.createAttachmentPart();

String stringContent = "Update address for Sunny Skies " +
    "Inc., to 10 Upbeat Street, Pleasant Grove, CA 95439";
attachment.setContent(stringContent, "text/plain");
attachment.setContentId("update_address");

message.addAttachmentPart(attachment); 
```

或者

```
URL url = new URL("http://greatproducts.com/gizmos/img.jpg");
DataHandler dataHandler = new DataHandler(url);
AttachmentPart attachment = message.createAttachmentPart(dataHandler);
attachment.setContentId("attached_image");

message.addAttachmentPart(attachment); 
```

* * *

**访问 AttachmentPart 对象：**

```
java.util.Iterator iterator = message.getAttachments();
while (iterator.hasNext()) {
    AttachmentPart attachment = (AttachmentPart)iterator.next();
    String id = attachment.getContentId();
    String type = attachment.getContentType();
    System.out.print("Attachment " + id + " has content type " + type);
    if (type.equals("text/plain")) {
    Object content = attachment.getContent();
    System.out.println("Attachment contains:\n" + content);
    }
} 
```

* * *

为了更清楚地了解这个过程，请检查[这个](http://docs.oracle.com/javaee/5/tutorial/doc/bnbhr.html#bnbif)。

# html - 试图通过我的 htaccess 重定向我的 wordpress 网站上的所有 index.html

> ID：14380753
> 
> 赞同：0
> 
> 时间：2013-01-17T14:01:17.220
> 
> 标签：html, .htaccess, rule

我正在尝试`index.html`像我的`index.php`规则一样剥离所有文件和扩展名。意思是，而不是

```
www.discretix/modules-hdcp/index.html 
```

应该有

```
www.discretix/modules-hdcp/ 
```

它适用于`index.php`但`index.html`不适用。我正在使用 wordpress，我的服务器是 apache。

这些是我的 htaccess 规则：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /~discretix/
RewriteRule ^index\.php$ - [L]
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /~discretix/index.php [L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:31:43.987

以下规则将使用 301 重定向（永久移动）将用户从 index.html 或 index.php 重定向到文件夹（这将反映在客户端浏览器地址栏中），您可能希望将其更改为 302 重定向（最初是临时重定向，但现在通常用于指定重定向，原因不明）

```
RewriteBase /~discretix/
RewriteRule ^index\.(html|php)$ ./ [R=301,L] 
```

# wix - 使用 WiX 安装具有自定义操作的预构建可执行文件

> ID：14380763
> 
> 赞同：0
> 
> 时间：2013-01-17T14:02:00.330
> 
> 标签：wix

我正在尝试让我正在编写的安装程序安装 Visual C++ 2012 包，这样最终用户就不必单独进行了。

可执行文件位于安装目录中，但是当我构建安装程序时，我收到一条错误消息，指出系统找不到该文件。

这是与我的安装程序部分相关的代码块。如果有多个错误，请提前道歉。我刚刚开始接触 WiX。

```
<Binary Id="MyVC" SourceFile="[INSTALLDIR]vcredist_x64.exe"/>
<CustomAction   Id='VCInstall'
                BinaryKey="MyVC"
                ExeCommand='/quiet'
                Execute='deferred' 
                Return='ignore'/>

<InstallExecuteSequence>
    <Custom Action="VCInstall" Before="InstallFinalize" ></Custom>
</InstallExecuteSequence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:12:29.433

如果您不想使用引导程序，最好的方法是通过合并模块。为了让您做您想做的事，您必须使用自定义操作从二进制文件中提取数据并将其写入目标计算机上某个位置的新文件，然后运行设置 - 这不遵循 MSI 最佳实践。但是，如果您想走这条路，我可以帮助您。这就是我将它们添加到我的项目中的方式，并在安装过程中安装它们`InstallExecuteSequence`

```
 <!-- Including the 64-bit redistributables if the platform is 64-bit -->
<?if $(var.Platform) = x64 ?>
<DirectoryRef Id="TARGETDIR">
  <Merge Id="Microsoft_VC110_CRT_x64" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_CRT_x64.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_ATL_x64" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_ATL_x64.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_MFC_x64" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_MFC_x64.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_MFCLOC_x64" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_MFCLOC_x64.msm" Language="0" DiskId="1"/>
</DirectoryRef>

<Feature Id="VCRedistx64" Display="hidden" Level="1">
  <MergeRef Id="Microsoft_VC110_CRT_x64"/>
  <MergeRef Id="Microsoft_VC110_ATL_x64"/>
  <MergeRef Id="Microsoft_VC110_MFC_x64"/>
  <MergeRef Id="Microsoft_VC110_MFCLOC_x64"/>
</Feature>
<?endif ?>

<!--Installing 32-bit Visual C++ 2012 Redistributables-->
<?if $(var.Platform) = x86 ?>
<DirectoryRef Id="TARGETDIR">
  <Merge Id="Microsoft_VC110_CRT_x86" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_CRT_x86.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_ATL_x86" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_ATL_x86.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_MFC_x86" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_MFC_x86.msm" Language="0" DiskId="1"/>
  <Merge Id="Microsoft_VC110_MFCLOC_x86" SourceFile="C:\Program Files (x86)\Common Files\Merge Modules\Microsoft_VC110_MFCLOC_x86.msm" Language="0" DiskId="1"/>
</DirectoryRef>

<Feature Id="VCRedist" Display="hidden" Level="1">
  <MergeRef Id="Microsoft_VC110_CRT_x86"/>
  <MergeRef Id="Microsoft_VC110_ATL_x86"/>
  <MergeRef Id="Microsoft_VC110_MFC_x86"/>
  <MergeRef Id="Microsoft_VC110_MFCLOC_x86"/>
</Feature>
<?endif ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T08:05:30.477

Here is a complete [example installer](https://github.com/cajun-rat/countdowntimer/blob/master/installer.wxs) for a Qt5 application that includes the VC redistributables as a merge module, which might provide a good starting point.

# ektron - Ektron 中的 FormBlock 服务器控件

> ID：14380764
> 
> 赞同：4
> 
> 时间：2013-01-17T14:02:04.567
> 
> 标签：ektron

我在 Ektron 8.6 中工作。

我的模板页面中有一个 FormBlock 服务器控件，它具有来自工作区的有效 HTML 表单的 DefualutFormID。工作区中的表单有几个表单字段及其相应的值。

在呈现模板页面时，我需要获取这些表单字段值并使用其他一些值重新设置它们。

我应该在哪个 Page –Cycle 事件中进行此编码？

我在 Pre-Render Event 中尝试了这段代码，但我无法在那里获取值，但我可以设置一个值。

我也尝试了 SaveStateComplete 事件，但没有运气。

```
String s=FormBlock1.Fields["FirstName"].Value;

If(s=”some text”)

{

// Re-set as some other vale.

FormBlock1.Fields["FirstName"].Value=”Some other value”;

} 
```

在哪种情况下我可以编写这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T21:39:13.710

Page_Load 适用于更改表单字段的值。Ektron 服务器控件的默认行为是在 Page_Init 期间加载其数据。

真正的问题是如何获得默认值。我尝试了所有可能的方法来获取定义 Ektron 表单的数据（更具体地说，是字段的默认值），这就是我想出的。我承认，这有点骇人听闻，但它确实有效。

```
var xml = XElement.Parse("<ekForm>" + cmsFormBlock.EkItem.Html + "</ekForm>");
var inputField = xml.Descendants("input").FirstOrDefault(i => i.Attribute("id").Value == "SampleTextField");
string defaultValue = inputField.Attribute("value").Value;
if (defaultValue == "The default value for this field is 42")
{
    // do stuff here...
} 
```

我的 FormBlock 服务器控件是在 ASPX 端定义的，没什么特别的：

```
<CMS:FormBlock runat="server" ID="cmsFormBlock" DynamicParameter="ekfrm"/> 
```

当然，XElement 需要以下 using 语句：

```
using System.Xml.Linq; 
```

所以基本上，我用单个根元素包装 HTML，使其成为有效的 XML。Ektron 在要求内容为 XHTML 方面做得很好，所以这*应该*可行。自然，在生产中使用它之前，应该在更复杂的形式上对其进行测试。我还推荐健康剂量的防御性编程——空检查、try/catch 等。

一旦解析为XML，就可以通过获取属性来获取表单字段的value`value`属性。对于我设置的示例表单，以下是表单 HTML (EkItem.Html) 的一部分：

```
<input type="text" value="The default value for this field is 42" class="design_textfield" size="24" title="Sample Text Field" ektdesignns_name="SampleTextField" ektdesignns_caption="Sample Text Field" id="SampleTextField" ektdesignns_nodetype="element" name="SampleTextField" /> 
```

# java - 访问 Socialcast API 时出现 HTTP 错误 401

> ID：14380768
> 
> 赞同：0
> 
> 时间：2013-01-17T14:02:25.720
> 
> 标签：java, http-authentication, http-status-code-401, http-error

我在尝试连接到 Socialcast API（演示）时收到 401 Unauthorized。这是我的代码：

```
ClientConnectionManager connectionManager = new BasicClientConnectionManager();
    HttpClient client = new DefaultHttpClient(connectionManager);
    HttpHost proxy = new HttpHost("myproxy", myport);
    client.getParams().setParameter(ConnRoutePNames.DEFAULT_PROXY, proxy);

    Authenticator.setDefault(new MyAuthenticator("emily@socialcast.com", "demo"));

    HttpGet httpGet = new HttpGet("https://demo.socialcast.com/api/authentication.xml".toString());
    HttpResponse httpResponse = client.execute(httpGet);
    int statusCode = httpResponse.getStatusLine().getStatusCode();
    if (statusCode == HttpStatus.SC_OK) {
        InputStream is = httpResponse.getEntity().getContent();
        System.out.println(httpResponse.toString());
    } else {
        System.out.println(httpResponse.toString());
    } 
```

**错误信息**：

```
HTTP/1.1 401 Unauthorized [Server: nginx/1.0.14, Date: Thu, 17 Jan 2013 13:59:40 GMT, 
Content-Type: application/xml; charset=utf-8, Transfer-Encoding: chunked, 
Connection: keep-alive, Status: 401, X-Powered-By: Phusion Passenger (mod_rails/mod_rack) 3.0.11, 
WWW-Authenticate: Basic realm="Socialcast Email address/Password", X-Frame-Options: sameorigin, X-UA-Compatible: IE=Edge,chrome=1, 
Cache-Control: no-cache, Set-Cookie: _socialcast_session=533602fb85f83dda3b9198a585f79961; path=/; secure; HttpOnly, 
Set-Cookie: sct=2657f8e636d2c321e83748fae9223a994b2f5b7a1720d2282f7a; path=/; expires=Sat, 17-Jan-2015 13:59:40 GMT, 
X-Request-Id: ee136acfaba474d376ecb1caceb6c055, X-Runtime: 0.010022, X-Rack-Cache: miss] 
```

它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:13:43.563

我解决了，这段代码有效：

```
 System.setProperty("proxySet", "true");
    System.setProperty("proxyHost", "myproxy");
    System.setProperty("proxyPort", "myport");

    Authenticator.setDefault(new Authenticator() {
        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            System.out.printf("url=%s, host=%s, ip=%s, port=%s%n", getRequestingURL(),
                    getRequestingHost(), getRequestingSite(), getRequestingPort());

            return new PasswordAuthentication("emily@socialcast.com", "demo".toCharArray());
        }
    });

    URL url = new URL("https://demo.socialcast.com/api/users");
    System.out.println(new Scanner(url.openStream()).useDelimiter("\\Z").next()); 
```

# c# - 无法通过将参数传递给存储过程来更新外键

> ID：14380770
> 
> 赞同：0
> 
> 时间：2013-01-17T14:02:34.170
> 
> 标签：c#, asp.net, foreign-keys

我有一个更改表中字段的应用程序。这是一个简单的表单，用户可以在其中更改与组关联的公司。

**。网**

```
 public static string EditGroup(vw_Group_Model editGroup)
        {
            string outcome = "";
            if (editGroup.RowType == "ALF")
            {
                try
                {

                    using (SqlConnection conn = AlfOnlineConnection())
                    {
                        conn.Open();
                        UserManager.Models.vw_Group_Model model = new vw_Group_Model();
                        using (var command = new SqlCommand("sp_UserManager_EditGroup", conn))
                        {
                            command.CommandType = CommandType.StoredProcedure;
                            command.Parameters.Add("@CompanyId", SqlDbType.Int).SqlValue = editGroup.companyId;
                            command.Parameters.Add("@GroupId", SqlDbType.Int).SqlValue = editGroup.groupId;
                            //command.Parameters.Add("@CompanyName", SqlDbType.NVarChar).SqlValue = editGroup.selected_company;
                            //command.Parameters.Add("@GroupName", SqlDbType.NVarChar).SqlValue = editGroup.groupName;
                            command.Parameters.Add("@StartDate", SqlDbType.DateTime).SqlValue = editGroup.StartDate;
                            command.Parameters.Add("@EndDate", SqlDbType.DateTime).SqlValue = editGroup.EndDate;

                            switch (editGroup.IsActive)
                            {
                                case true:
                                    command.Parameters.Add("@isactive", SqlDbType.TinyInt).SqlValue = 1;
                                    break;
                                case false:
                                    command.Parameters.Add("@isactive", SqlDbType.TinyInt).SqlValue = 0;
                                    break;
                            }

                            int rowsEdited = command.ExecuteNonQuery();

                            if (rowsEdited == 1)
                            {
                                outcome = "Row successfully edited.";
                            }
                        }
                    }
                }
                catch (SqlException ex)
                {
                    return ex.ToString();
                }
            } 
```

**T-SQL**

```
USE [BradOnline]
GO
/****** Object:  StoredProcedure [dbo].[sp_UserManager_EditGroup]    Script Date: 01/17/2013 13:11:05 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO

ALTER PROCEDURE [dbo].[sp_UserManager_EditGroup] 
@GroupId INT, 
@CompanyId INT,
                                                 --@GroupName   NVARCHAR(50), 
                                                 --@CompanyName   NVARCHAR(50), 
                                                 @StartDate  DATETIME,
                                                 @EndDate  DATETIME,
                                                 @isactive TINYINT

AS 
  BEGIN 

  DECLARE @AccountManagerId uniqueidentifier
  SET @AccountManagerId = '7A1DC75D-2628-4F8D-A376-9382A0762568'
  --(SELECT G.AccountManagerId FROM dbo.aspnet_Custom_Groups AS G
        --                  WHERE Id = @GroupId)

  --DECLARE @CompanyId BIGINT
  --SET @CompanyId = (SELECT MAX(c.Id) FROM dbo.aspnet_Custom_Companies AS c
        --                  WHERE c.Name = @CompanyName)

  UPDATE 
    [dbo].[aspnet_Custom_Groups]
SET 
    --[Name] = @GroupName,
    [StartDate] = @StartDate,
    [EndDate] = @EndDate,
    [IsActive] = @isactive,
    [AccountManagerId] = NULL,
    [CompanyId] = @CompanyId
WHERE 
    [Id] = @GroupId
  END 
```

在 SQL 中，如果我对更新的值进行硬编码，它可以工作，但如果我传递其中的值，则不会。我一直在寻找它的年龄，但没有得到任何地方。当我检查断点时，我的应用程序中的参数包含值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T11:55:20.417

不要通过 设置您的参数值`SqlParameter.SqlValue`，而是尝试使用`SqlParameter.Value`如下所示。

```
command.Parameters.Add("@CompanyId", SqlDbType.Int).Value = editGroup.companyId; 
```

# assembly - MASM 字符串中 Ascii 的总和

> ID：14380771
> 
> 赞同：0
> 
> 时间：2013-01-17T14:02:33.083
> 
> 标签：assembly, ascii, masm, irvine32

```
INCLUDE Irvine32.inc
.data
fullName BYTE "Bob Johnson",0
nameSize = ($ - fullName) - 2
.code
main PROC
    mov ECX,nameSize
    mov ESI,OFFSET fullName
Sum:
    mov EBX,[ESI+ECX]
    add EAX,EBX
    loop Sum
    exit
main ENDP
END main 
```

所以我遇到了一个问题，我只想一次从字符串中读取一个字符并将其存储在 EBX 寄存器中，然后获取该字符的值并在 EAX 中保持运行总和。

使用 8 位无符号算术将字符串字符的所有 ASCII 代码相加。溢出被忽略。最终值是校验和。例如，如果字符串是“Joe”，那么 ASCII 值是 4A、6F、65。总和是 11E。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:49:10.640

```
INCLUDE Irvine32.inc
.data

fullName BYTE "Bob Johnson",0       ; String storing name
nameSize = ($ - fullName)   ; Variable storing length of name

.code
main PROC

    mov ECX,nameSize        ; Set counter for loop
    mov ESI,OFFSET fullName ; Set pointer at fullName variable
    mov EAX,0               ; Clear the EAX register
    mov EBX,0               ; Clear the EBX register

Sum:                        ; Loop 

    mov bl,[ESI + ECX - 1]  ; Use the bl (8 bit register) to point at characters in the string.
    add EAX,EBX         ; Add the two registers together

    loop Sum                ; Loop  

    call DumpRegs           ; Display results

    exit
main ENDP

END main 
```

解决了！

# networking - Game Center / GameKit 在网络可用时重新提交分数

> ID：14380773
> 
> 赞同：2
> 
> 时间：2013-01-17T14:02:37.233
> 
> 标签：networking, report, submit, game-center, leaderboard

我正在创建一个支持 Game Center 的类似游戏的应用程序。当玩家通过正确的 GC 身份验证但网络（wifi 和蜂窝网络）在我想要报告我的分数时不可用时，我在向排行榜报告分数时遇到问题。

我的应用程序适用于 iOS 5.0 及更高版本，根据文档，它应该在网络可用时重新提交分数。让我解释一下我的尝试：

*   我打开了我的应用程序并验证了我的 GC 帐户，关闭了 wifi，报告了分数，然后打开了 wifi 并等待了 30 分钟。之后我检查了排行榜，但我的排行榜上没有任何更新的分数。（也许我不耐烦，那是因为苹果决定重新提交分数的时间/间隔未定义？）

*   我打开了我的应用程序并验证了我的 GC 帐户，终止了应用程序，关闭了 wifi，再次打开了我的应用程序，它自动验证了我的 GC 帐户，我报告了分数然后打开了 wifi，但我的排行榜上仍然没有更新分数。（也许我不耐烦，那是因为苹果决定重新提交分数的时间/间隔未定义？）

如果重新提交需要超过 30 分钟，我认为它没有用吗？有没有办法克服这个问题？我的意思是，如果我稍后保存并发送分数，这也会很糟糕，因为 GC 稍后也会重新提交它们？（它不会那么糟糕，但仍然是不必要的）

有没有关于这个重新提交时间的文件？我找不到任何...我的意思是什么时候重新提交？在重新提交之前，我是否需要让我的应用程序和 wifi 保持打开状态？

谢谢您的回答 ...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-18T16:10:29.307

如果您还有蜂窝网络连接，wifi 是打开还是关闭都没有关系。GC 代码将使用任何可用的网络访问。如果调用 'reportScoreWithCompletionHandler:^(NSError *error)' 时两者都不可用，它将在下次网络可用时报告分数。

您没有说您的代码是否有效。一个常见错误是代码中的排行榜标识符与 iTunesConnect 中的排行榜 ID 不完全匹配。如果他们不匹配分数将永远不会成功报告，但它不会告诉你问题是什么。

另请注意，分数应为 64 位值。也许您正在报告一个 32 位的值。

还要确保您没有在本地玩家通过身份验证之前提交分数。

你在检查错误代码吗？如果您从“reportScoreWithCompletionHandler:^(NSError *error)”返回的“错误”不为 NULL，那么您的代码有问题。它的值可能没有帮助（当它不是 NULL 时），但至少你知道有些东西不起作用。

根据我的经验，在沙盒模式下，排行榜通常会很快更新（不到一分钟），但不会立即更新。但是有些日子服务器出了问题，更新需要几个小时或根本不起作用。我读过生产 GC 服务器比沙盒服务器更可靠且更新更快。

值得一提的是我用来报告分数的代码。它似乎工作：

```
-(void) submitScore:(int64_t)score category:(NSString *)leaderboardIdentifier {
    if (!!! [GKLocalPlayer localPlayer].authenticated ) {
        CCLOG(@"GKLocalPlayer is not authenticated");
        return;
    }

    GKScore *gkScore = [[[GKScore alloc] initWithCategory:leaderboardIdentifier] autorelease];
    gkScore.value = score;
    [gkScore reportScoreWithCompletionHandler:^(NSError *error) {
        [self setLastError:error];
    }];
} 
```

# javascript - Web Workers 的优势以及之前是如何实现的？

> ID：14380775
> 
> 赞同：4
> 
> 时间：2013-01-17T14:02:44.630
> 
> 标签：javascript, html, web-worker

我在[http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)上阅读了有关 Web Worker 的信息，我想我理解他们的目的，但我想知道主要目的之一是否网络工作者，即“允许执行长任务而不会让页面保持响应。” 没有网络工作者就可以实现吗？像Registering Callbaks 一样，也允许执行长任务，并且只有在它们准备好时才中断，没有阻塞，不是一样吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:05:42.753

回调允许您管理并发。那就是处理任务。并不总是以简单的方式。

webworkers 不仅允许您以更简单的方式进行并发，还让您拥有**并行性**，即真正并行运行的任务：它们不一定会相互阻塞，也不会阻塞 UI。

为了在 web worker 之前在你的浏览器中运行一个基于 javascript 的长任务，你必须对其进行微观管理以将其切割成小部分，以使 UI 保持响应。当然，拥有不止一项长期运行的任务更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-23T12:01:27.633

我们知道 Web 浏览器在过去几年中增长了很多，这主要是因为在其引擎上做了很多工作，例如 V8（谷歌）、Chakra（微软）。到目前为止，JavaScript 在单个线程中运行。单线程架构的问题在于它阻塞了代码，并且在运行复杂脚本的情况下 UI 变得无响应。有多种方法可以解决这个问题：

1.  将工作卸载到服务器，但为了使应用程序更快，胖客户端是首选
2.  使用异步调用，但许多复杂的异步调用和承诺生态系统可能会导致回调地狱
3.  利用多线程。有趣的！

Web Workers 通过在 JavaScript 中提供多线程能力来解决这个问题。

# android - 要使用 sudo 功能，我应该在我的应用程序中写什么？

> ID：14380781
> 
> 赞同：-2
> 
> 时间：2013-01-17T14:03:00.633
> 
> 标签：android, sudo

要使用 sudo 功能，我应该在我的应用程序中写什么？我应该写点什么吗？如果是，您能告诉我如何编写 sudo 应用程序吗？我是否需要更改 manifest.xml，或添加一些 Java 代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:05:04.017

假设设备是 root 并且您的应用程序已被授予超级用户权限，您可以使用以下方法以 root 身份运行命令：

```
public static void runAsRoot(String[] cmds){
        Process p;
        try {
            p = Runtime.getRuntime().exec("su");
            DataOutputStream os = new DataOutputStream(p.getOutputStream());  
            BufferedReader bf = new BufferedReader(new InputStreamReader(p.getInputStream()));
            for (String tmpCmd : cmds) {
                os.writeBytes(tmpCmd+"\n");
                String test;
                while((test = bf.readLine()) != null)
                {
                    Log.i(TAG, test);
                }
            }

            //os.writeBytes("exit\n");  
            os.flush();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

只需将一个字符串数组中的命令列表传递给它。

# php - 返回数组数组 nusoap php web 服务

> ID：14380788
> 
> 赞同：1
> 
> 时间：2013-01-17T14:03:18.193
> 
> 标签：php, mysql, arrays, nusoap

我在返回数组数组时遇到问题，我使用 nusoap 在 php 中创建 Web 服务，这是我的代码：

服务器.php

```
 <?php
    //libreria de nusoap
    require_once ('nusoap/lib/nusoap.php');

    $miURL = 'http://localhost/webservice/';
    $server = new soap_server();
    $server->configureWSDL('Web Service de Pruebas', $miURL);
    $server->wsdl->schemaTargetNamespace = $miURL;

    $server->wsdl->addComplexType(
            'array_php',
            'complexType',
            'struct',
            'all',
            '',
                array(
                    'pk' => array('name' => 'pk', 'type' =>'xsd:int'),
                    'rol' => array('name' => 'rol', 'type' =>'xsd:string'),
                    'descripcion' => array('name' => 'descripcion', 'type' =>'xsd:string')
                )
            );

    $server->wsdl->addComplexType(
            'array_array',
            'complexType',
            'array',
            '',
            'SOAP-ENC:Array',
            array(),
            array(
              array('ref' => 'SOAP-ENC:arrayType',
                    'wsdl:arrayType' => 'tns:array_php[]'
                  )
            ),
            'tns:array_php'
          );

    $server->register('prueba',                    // method name
        array(),                            // input parameters
        array('return' => 'tns:array_array'),    // output parameters
        $miURL,                         // namespace
        $miURL . '#prueba',                   // soapaction
        'rpc',                                    // style
        'encoded',                                // use
        'Get Specific array_php'        // documentation
      );

    function prueba()
    {
        $con = mysql_connect('localhost', 'root', '1234');
        mysql_selectdb('laboral', $con);

        $sql = "SELECT * FROM roles";
        $q = mysql_query($sql);

        $item = array();
        while($r = mysql_fetch_assoc($q)){
            $item[] = $r;
        }
        return $item;

    }

    if( !isset($HTTP_RAW_POST_DATA) )
        $HTTP_RAW_POST_DATA = file_get_contents( 'php://input' );

    $server->service($HTTP_RAW_POST_DATA);
?> 
```

客户端.php

```
<?php
    //libreria nusoap
    require_once ('nusoap/lib/nusoap.php');

    //lineas de configuracion
    $serverURL = 'http://localhost/webservice/ws2.php?wsdl';

    $cliente = new nusoap_client($serverURL);

    //sí error de conexión:
    $error = $cliente->getError();
    if($error){
        echo "<p> '.$error.' </p>";
        echo '<p style="color:red;'>htmlspecialchars($cliente->getDebug(), ENT_QUOTES).'</p>';
        die();
    }

    echo "<br/>";
    $arreglo2 = $cliente->call('prueba');

    echo "<br/>";
    for( $i=0; $i<3; $i++ ){
            print_r( $arreglo2[$i]['pk'] );
            print_r( $arreglo2[$i]['rol'] );
            print_r( $arreglo2[$i]['descripcion'] );
            echo "<br/>"; 
        }
 ?> 
```

问题是退货，没有向我的客户返回任何东西，我不知道会发生什么，我一直在阅读很多论坛但我找不到答案，请如果有人知道这里帮助我

ty，对不起我的英语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-23T02:06:25.260

这就是我所做的：

```
// Complex Array Keys and Types ++++++++++++++++++++++++++++++++++++++++++
$server->wsdl->addComplexType('notaryConnectionData','complexType','struct','all','',
        array(
                'id' => array('name'=>'id','type'=>'xsd:int'),
                'name' => array('name'=>'name','type'=>'xsd:string')
        )
);
// *************************************************************************

// Complex Array ++++++++++++++++++++++++++++++++++++++++++
$server->wsdl->addComplexType('notaryConnectionArray','complexType','array','','SOAP-ENC:Array',
        array(),
        array(
            array(
                'ref' => 'SOAP-ENC:arrayType',
                'wsdl:arrayType' => 'tns:notaryConnectionData[]'
            )
        )
);
// *************************************************************************

// This is where I register my method and use the notaryConnectionArray
$server->register("listNotaryConnections",
                array('token' => 'xsd:string'),
                array('result' => 'xsd:bool', 'notary_array' => 'tns:notaryConnectionArray', 'error' => 'xsd:string'),
                'urn:closingorder',
                'urn:closingorder#listNotaryConnections',
                'rpc',
                'encoded',
                'Use this service to list notaries connected to the signed-in title company.');

// In my function, I query the data and do:
$list = array();
$results = mysql_query($query);
while($row = mysql_fetch_assoc($results)) {
    array_push($list, array('id' => intval($row['na_id']), 'name' => $row['agency_name']));
}

return array("result" => true, "notary_array" => $list);

// The output is:
Array
(
    [result] => 1
    [notary_array] => Array
        (
            [0] => Array
                (
                    [id] => 1
                    [name] => Agency 1
                )

            [1] => Array
                (
                    [id] => 3
                    [name] => Agency 3
                )

            [2] => Array
                (
                    [id] => 4
                    [name] => Agency 4
                )

        )

    [error] => 
) 
```

希望这可以帮助。

# .net - 如何以编程方式过滤外部列表？

> ID：14380789
> 
> 赞同：0
> 
> 时间：2013-01-17T14:03:31.450
> 
> 标签：.net, list, filter, external, connectivity

我使用 .NET Assembly Connector 开发了自定义业务数据连接解决方​​案。它确实具有 Finder 方法的比较类型过滤器。

我现在可以从编辑视图创建外部列表并使用数据源过滤器 - 它可以工作。我还可以添加业务数据连接过滤器 Web 部件，将其连接到外部列表 - 它可以工作。

我的问题：如何以编程方式过滤外部列表？

我不想在编辑列表视图或 BDC 过滤器 Web 部件的“选择外部项目”对话框中输入值。我希望在页面加载时计算值，例如，值 = 网站名称，

换句话说，是否可以自己实现业务数据连接过滤器 Web 部件？它应该工作一次，我不想更改过滤器值。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:29:05.330

这是我的发现。

首先，我通过从 wsp 包中导入 List 为我的外部列表准备了 Elements.xml 和 Schema.xml，如[http://blog.voltje.be/2010/07/23/deploying-an-external-list-中所述使用-visual-studio-2010/comment-page-1/](http://blog.voltje.be/2010/07/23/deploying-an-external-list-using-visual-studio-2010/comment-page-1/)

希望 Schema.xml 确实包含带有值的所需过滤器，如下所示：

```
<View DisplayName="My View name" ...>
   <XslLink>main.xsl</XslLink>
   <Method Name="ReadList">
   <Filter Name="My Comparison filter" Value="My Value" />
   </Method>
   <Query> 
```

......

然后我尝试了两种方法：

1）使用 SPView.SetViewXml （如[http://sharepointfordeveloper.blogspot.ru/2011/11/sharepoint-2010-update-default-list.html](http://sharepointfordeveloper.blogspot.ru/2011/11/sharepoint-2010-update-default-list.html)中所述）

它似乎不适用于外部列表 :(( 我的意思是在导入带有视图的 xml 时，未设置过滤器的值，原因不明。

2）通过使用基于上述Elements.xml和Schema.xml的List Instance。它工作得很好，新列表是使用过滤器和值创建的。拳头方式对我来说会好得多...

# html - 如何在 jQuery mobile 中制作方形文本框？

> ID：14380795
> 
> 赞同：0
> 
> 时间：2013-01-17T14:03:46.053
> 
> 标签：html, jquery-mobile, textbox

我正在使用 jQuery mobile 创建一个移动应用程序。我需要创建一个可编辑的文本表。所以我决定创建一个表格并将文本框插入其中。

它正在工作但文本框的形状不同，这是 Jquery mobile 的默认形状。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T05:41:57.127

你可以使用`ui-corner-none`类

```
<input class="ui-corner-none" type="text"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:06:54.693

# 解决方案

具体文字输入：

```
#text {
    border-radius: 0 !important;
} 
```

示例：http: [//jsfiddle.net/Gajotres/LqDke/](http://jsfiddle.net/Gajotres/LqDke/)

一切：

```
.ui-corner-all {
    border-radius: 0 !important;
} 
```

**编辑 ：**

或者你可以这样做：

```
$('a').buttonMarkup({ corners: false }); 
```

# 最后的笔记

如果您想了解更多关于如何自定义 jQuery Mobile 页面和小部件的信息，请查看这篇**[文章](http://www.gajotres.net/learn-how-to-customize-jquery-mobile-application/)**。它附带了许多工作示例，包括为什么 !important 对于 jQuery Mobile 是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-08T22:29:04.910

因为样式实际上被应用于包含输入的 div，而不是输入本身，所以不要尝试在事后对其进行样式设置。在输入上使用 data-attribute: data-corners="false" 并让 jquery mobile 本地处理它：

```
<input type="number" size="2" data-corners="false"> 
```

# python - 如何使用 igraph 获取最短路径上的顶点？

> ID：14380796
> 
> 赞同：8
> 
> 时间：2013-01-17T14:03:46.337
> 
> 标签：python, shortest-path, igraph

我`igraph`用来生成顶点对之间的最短路径距离矩阵，但我不知道如何返回顶点。到目前为止，我有：

```
path_length_matrix = ig_graph.shortest_paths_dijkstra(None,None,"distance", "ALL") 
```

[我正在寻找一个函数，它返回一个路径矩阵，如距离矩阵，但我在igraph 文档](http://packages.python.org/python-igraph/igraph.Graph-class.html)中看不到任何东西，它显示了如何获取路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-17T14:19:48.613

`get_shortest_paths`我相信你需要的功能。见[https://igraph.org/python/doc/igraph.GraphBase-class.html#get_shortest_paths](https://igraph.org/python/doc/igraph.GraphBase-class.html#get_shortest_paths)

您需要为每个源顶点单独调用它，它只会为每对节点提供一条（任意）最短路径。如果您需要所有最短路径，请参阅`get_all_shortest_paths`：[https ://igraph.org/python/doc/igraph.GraphBase-class.html#get_all_shortest_paths](https://igraph.org/python/doc/igraph.GraphBase-class.html#get_all_shortest_paths)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-20T08:23:38.490

我这样做

```
from igraph import *
g = Graph([(0,1), (0,2), (2,3), (3,4), (4,2), (2,5), (5,0), (6,3), (5,6)])
g.vs["name"] = ["Alice", "Bob", "Claire", "Dennis", "Esther", "Frank", "George"]
#You could create Vertexes like g.add_vertex(name="Bill") 
path=g.get_shortest_paths("Alice",to="Frank",mode=OUT,output='vpath')
for n in path[0]:
    print("{}".format(g.vs[n]['name'])) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-24T08:23:40.883

这是为加权有向图 (DAG) 找到最短路径的方法。所以这就是我想出来的：

```
import igraph
from igraph import *
g = Graph(directed=True)
g.add_vertices(3)
g.vs["name"]=["GO:1234567","GO:6789056","GO:5674321"]
g.es["weight"]=1
g['GO:1234567','GO:6789056']=1
g['GO:6789056','GO:5674321']=5
weight=g.es["weight"]
print weight
print g.degree(mode="in") 
print g.shortest_paths_dijkstra(source="GO:1234567", target="GO:5674321", 
    weights=weight, mode=OUT) 
```

# c++ - C ++中的多元正态密度函数

> ID：14380799
> 
> 赞同：2
> 
> 时间：2013-01-17T14:03:54.543
> 
> 标签：c++, distribution, gaussian

如何以数值稳定的方式计算 C++ 中的[多元正态密度函数](http://en.wikipedia.org/wiki/Multivariate_normal_distribution#Density_function)（对于任意维度），并且理想情况下具有最少数量的依赖项？

准确地说，我是在密度的对数之后。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:05:17.563

我会使用正态分布的公式进行计算。你试过吗？

# php - 目录名('/test') == '\\'?

> ID：14380801
> 
> 赞同：1
> 
> 时间：2013-01-17T14:04:10.433
> 
> 标签：php

```
echo dirname('/test'); 
```

这为我输出 \ 。我希望它输出/。

```
echo dirname('/test/a'); 
```

那为我输出 /test 那么为什么 /test 不给我 / 呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:16:57.137

查看php.net 上的[dirname()文档。](http://php.net/manual/en/function.dirname.php)

那里有一些很好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:26:02.337

[从http://php.net/manual/en/function.dirname.php](http://php.net/manual/en/function.dirname.php)检查这个

```
<?php
echo "1) " . dirname("/etc/passwd") . PHP_EOL; // 1) /etc
echo "2) " . dirname("/etc/") . PHP_EOL; // 2) / (or \ on Windows)
echo "3) " . dirname("."); // 3) .
?> 
```

由于 Windows 同时使用`/`和`\`作为目录分隔符，因此会发生这种情况。

# php - 双引号字符串中带有变量值的单引号

> ID：14380802
> 
> 赞同：1
> 
> 时间：2013-01-17T14:04:11.313
> 
> 标签：php, string, double-quotes, quote

我有一个看起来像这样的字符串：

```
"count( IF (my_id = 'mykey',value,100)) mykey" 
```

但是，紧随 my_id 之后的值“mykey”位于名为 $which_value 的变量中；

我看不到如何放置 $which_value 以便它在其周围保留单引号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:08:01.960

只需在字符串中添加变量：

```
"count( IF (my_id = '$which_value',value,100)) mykey" 
```

但是，您应该正确地转义该值或使用准备好的语句：

```
$stmt = $db->prepare("SELECT count(IF (my_id = :my_value, value, 100)) mykey...");

$stmt->execute(array(
    ':my_value' => $which_value,
)); 
```

或者，使用普通的 ol'`mysql_`函数：

```
$sql = sprintf("SELECT count(IF(my_id = '%s', value, 100)) mykey...", 
    mysql_real_escape_string($which_value)
);
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:06:37.480

要在字符串中包含变量，您可以这样做

```
"count( IF(my_id = '" . $which_value . "',value,100)) mykey" 
```

很难弄清楚您到底在寻找什么，但这应该为您指明正确的方向（我希望）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:10:04.773

您始终可以在这样的双引号字符串中使用您的变量

```
"count( IF (my_id = '{$mykey}',value,100)) {$mykey}" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:24:16.317

双引号内的变量将被解析。有一个方便的简单方法，只需使用如下变量：

```
"count( IF (my_id = '$which_value',value,100)) mykey" 
```

More complex expressions can be wrapped in curly braces like this:

```
"count( IF (my_id = '{$an_array[3]}',value,100)) mykey" 
```

You may also want to consider escaping the variable string so that it does not break or open up to exploit, the string you are creating. If your id is an integer you can either typecast the variable as an integer:

```
"count( IF (my_id = '" . (int)$which_value . ',value,100)) mykey" 
```

Or use the sprintf function to insert the variable into the string:

```
sprintf("count( IF (my_id = '%d',value,100)) mykey", $which_value) 
```

If you need to escape text strings then you'll want to look at escape functions specific to the database you are constructing the query for.

# css - 在 IE 9 中分析 CSS

> ID：14380803
> 
> 赞同：0
> 
> 时间：2013-01-17T14:04:14.040
> 
> 标签：css, internet-explorer

我只是想知道 IE 9 是否有办法做类似于 Firefox 的事情，我可以在 Web Developer 菜单下选择“检查”选项，然后查看哪些 css 类应用于我页面上的每个元素。我确实注意到 IE 9 的 F12 功能，我可以选择“查看”->“类和 ID 信息”，但它没有显示 css 详细信息。

我的问题是我的网站在 IE 中看起来与在 FF 中完全不同，我正在尝试调试。任何其他建议将不胜感激。谢谢。

**编辑1：**

具体问题是，在 FF 中，我有一个左边距和上边距，以便所有内容都居中。但是，在 IE 中，一切都是合理的。我决定开始查看页面的第一个 div，因为即使它看起来也有所不同。
有几个 div 相互嵌套，但我想我可能找到了罪魁祸首。

在 IE 中，其中一个 div 的 css 如下所示：

```
#regionHeader .wrapper {
  overflow:hidden;
}
.wrapper {
  margin:0 auto;
  max-width:1140px;
  min-width:801px;
  width:auto;
}
.wrapper {
  margin:0 auto;
}
.wrapper {
  margin:0 auto;
}
.wrapper {
  zoom:1;
}
.wrapper:after {
  clear:both;
}
.wrapper:after {
  display:table;
}
.wrapper:before {
  display:table;
}

div {
  -webkit-text-size-adjust:none;
  border-bottom:0;
  border-left:0;
  border-right:0;
  border-top:0;
  margin:0;
  padding-bottom:0;
  padding-left:0;
  padding-right:0;
  padding-top:0;
} 
```

但同样在 FF 中具有以下风格：

```
#regionHeader .wrapper {
  overflow:hidden;
}

.wrapper {
  margin:0 auto;
  min-width:320px;
}

.wrapper, .clearfix, #content {
}

html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, address, cite, code, del, dfn, em, img, ins, q, small, strong, sub, sup, dl, dt, dd, ol, ul, li, fieldset, figure, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td {
  border:0 none;
  margin:0;
  padding:0;
} 
```

注意 max-width:1140px; 在 IE vs FF 中只有一个最小宽度。那会导致问题吗？不幸的是，这不是我的代码......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:55:04.820

按 F12，单击工具箱中的指针按钮，单击要检查的元素。该元素的 css 应该在 dom 窗口的右侧。如果不是，您可以单击右侧窗口上方的“样式”按钮。

![在此处输入图像描述](../Images/23fcfa0490d07275d83ce625ec1c0933.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:07:51.463

Firebuglite 与 IE6+ 兼容，可以在这里下载：

[https://getfirebug.com/firebuglite](https://getfirebug.com/firebuglite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:06:33.530

按 F12 调出 IE9 开发者工具。

或选择工具 - F12 开发者工具

# sql - 使用 LINQ 选择 2 个表（无连接）

> ID：14380808
> 
> 赞同：1
> 
> 时间：2013-01-17T14:04:34.197
> 
> 标签：sql, linq

我有 2 个表 MaxDates 和 MinDates，每个表都有一个 DateTime 列。我可以编写以下数据库 SELECT 查询，目的是创建一个包含最小和最大日期的所有组合的数据集（以计算时间跨度）：

```
SELECT MinDates.PriceDate, MaxDates.PriceDate
FROM MinDates, MaxDates 
```

我是 LINQ 的新手，想创建等效的 LINQ。我认为以下将是一个很好的起点，但没有运气。

```
var result = from MaxDates, MinDates 
             select MaxDates.PriceDate, MinDates.PriceDate 
```

关于等效的 LINQ 语句的任何想法，这是 LINQ 的一个很好的用途（而不是使用一些数组来做这个）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:06:36.737

你很接近：

```
var result = from max in MaxDates
             from min in MinDates 
             select new {MaxDate = max.PriceDate, MinDate = min.PriceDate}; 
```

这将为您提供您正在寻找的笛卡尔积 (CROSS JOIN)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:07:19.580

linq 中的笛卡尔积（或 SQL 世界中的 CROSS JOIN）是：

```
var crossResult = from max in MaxDates
                  from min in MinDates
                  select new { maxPriceDate = max.PriceDate, minPriceDate = min.PriceDate}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:09:59.690

```
var res = from max in MaxDates
                  from min in MinDates
                  select new { MaxPriceDate = max.PriceDate,
                               MinPriceDate = min.PriceDate}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:08:57.167

By using extension method,

```
var results = MaxDates.SelectMany(x => MinDates, (x, y) => new {x, y}); 
```

# c# - 在剑道网格中使用 mvc 显示模板

> ID：14380826
> 
> 赞同：4
> 
> 时间：2013-01-17T14:05:24.227
> 
> 标签：c#, asp.net-mvc, razor, kendo-ui, kendo-grid

我有剑道网格：

```
@(Html.Kendo().Grid<SomeType>()
.Columns(columns =>
{
    (...)
    columns.Bound(customer => customer.IsActive);
} 
```

我有一个 mvc 显示模板 (Views/Shared/DisplayTemplate/bool.cshtml)

```
@model bool
@Html.CheckBoxFor(model => model, new { disabled = "true" }) 
```

（我也尝试使用 Boolean 作为类型和模板文件名）

这在网格之外完美地工作，但在网格中显示真/假（我想来自默认的 mvc 显示模板）。

如何让剑道网格使用合适的显示模板？

（设置 UIHint 没有帮助）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:13:26.377

尝试这样的事情：

```
columns.Bound(p => p.GrasaDielectrica).ClientTemplate("<input type='checkbox' #= GrasaDielectrica ? checked='checked' : '' # disabled='disabled' ></input>") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-16T23:14:49.283

我找到了一种方法，但它远非理想，因为它`ViewModel`必须只有`string`成员才能工作......而且我们实际上只是使用部分视图......

`DisplayTemplate.cshtml`：

```
@model ViewModel
@Html.Partial("PartialView", Model) 
```

`PartialView.cshtml`：

```
@model ViewModel
@* write schtml here *@ 
```

`KendoGuid.cshtml`

```
...
.Columns(columns =>
{
    columns.Bound(x => x.GridViewModelField)
        .ClientTemplate("PartialView", new ViewModel
        {
            ViewModelField = "#=GridViewModelField#",
        }).ToHtmlString());
})
... 
```

# php - 用于从 MultipartEntity 接收图像和文本的 php

> ID：14380827
> 
> 赞同：0
> 
> 时间：2013-01-17T14:05:25.137
> 
> 标签：php, android, multipartentity

我正在尝试通过 MultipartEntity 上传图像和一些文本。我可以上传和接收图像，但是当我尝试添加 Stringbody 时，我似乎无法接收它。这是我的安卓代码

```
imports ETC...

public void oncreate(){
.....
nameValuePairs.add(new BasicNameValuePair("image", exsistingFileName));
nameValuePairs.add(new BasicNameValuePair("title", "title"));
}

public void post(String url, List<NameValuePair> nameValuePairs) {
HttpClient httpClient = new DefaultHttpClient();
HttpContext localContext = new BasicHttpContext();
HttpPost httpPost = new HttpPost(url);

try {
    MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

    for(int index=0; index < nameValuePairs.size(); index++) {
        if(nameValuePairs.get(index).getName().equalsIgnoreCase("image")) {
            System.out.println("post - if");
            // If the key equals to "image", we use FileBody to transfer the data
            entity.addPart( nameValuePairs.get(index).getName(), new FileBody(new File (nameValuePairs.get(index).getValue())));

        } else {
            System.out.println("post - else");
            // Normal string data
            entity.addPart(nameValuePairs.get(index).getName(), new StringBody(nameValuePairs.get(index).getValue()));
        }
    }
    System.out.println("post - done" + entity);

    httpPost.setEntity(entity);

    HttpResponse response = httpClient.execute(httpPost, localContext);

} catch (IOException e) {
    e.printStackTrace();
}
} 
```

还有我的 php：

```
<?php

$uploads_dir = 'uploads/';

$uploadname = $_FILES["image"]["name"];
$uploadtitle = $_FILES["title"]["title"];

move_uploaded_file($_FILES['image']['tmp_name'], $uploads_dir.$uploadname);
file_put_contents($uploads_dir.'juhl.txt', print_r($uploadtitle, true));
?> 
```

我一直在处理有关 MultipartEntity 的其他问题，但似乎找不到答案。我试过只发送Stringbody，但也没有任何成功。我认为问题出在服务器端（在 PHP 中），但欢迎提出任何建议。

这是我在这里的第一个问题-请随意评论形式和清晰度:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:24:47.997

试试这个方法

```
 ByteArrayBody bab1 = bab11;
         HttpClient httpClient = new DefaultHttpClient();
         httpPost = new HttpPost("link.php?api_name=api");
         MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
         // this is for String
      try {
            reqEntity.addPart("udid", new StringBody(UDID));
          } 
       catch (Exception e) 
          {
          }
              // this is for image upload 
          try 
          {
                reqEntity.addPart("file1", bab1);   
          } catch (Exception e) 
          {
          }
                 // this is for video upload 
      try {             
                if (stPath1 != null) {
                    Log.e("path 1", stPath1);
                    Log.v("stDocType1", "video");
                    File file = new File(stPath1);
                    FileBody bin = new FileBody(file);
                    reqEntity.addPart("file1", bin);
                }
        } catch (Exception e) {
        }

           httpPost.setEntity(reqEntity);
           ResponseHandler<String> responseHandler = new BasicResponseHandler();
           response = httpClient.execute(httpPost, responseHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:08:23.703

问题是我的php。当您收到 Stringbody 时，只有一个参数（与文件体相反）。所以我删除了 $uploadtitle = $_FILES["title"]["title"]; 中的第二个参数 它奏效了

```
<?php
$uploads_dir = 'uploads/';

$uploadname = $_FILES["image"]["name"];
$uploadtitle = $_FILES["title"];

move_uploaded_file($_FILES['image']['tmp_name'], $uploads_dir.$uploadname);
file_put_contents($uploads_dir.'juhl.txt', print_r($uploadtitle, true));
?> 
```

如果您遇到同样的问题，我希望这会有所帮助。

# android - 在没有启动器的情况下启动 Android 应用程序

> ID：14380828
> 
> 赞同：1
> 
> 时间：2013-01-17T14:05:28.510
> 
> 标签：android, broadcastreceiver

如何启动没有启动器活动的应用程序？

问题背后的故事：我有一个应用程序，它基本上是一个 BroadcastReceiver，它等待几个系统意图，如 BOOT_COMPLETED。问题是由于我的应用程序没有活动，它没有启动，所以它没有收到任何意图。

Android 3.1 发行说明提到可以覆盖意图选项来启动应用程序，但我认为它需要另一个活动的应用程序才能这样做。

PS 写下你知道的所有方法。ADB 命令也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:09:57.617

第一条建议是制作一个可以运行的非常简单的“欢迎使用我的应用程序”活动。用它来显示启动画面、一些广告或设置屏幕。这可以让您解决“无活动”问题。

据我所知，在您的应用程序中的 Activity 运行之前，您无法将任何东西挂接到 BOOT_COMPLETED 中。所以你需要有某种活动。

# cryptography - 如何使用扩展欧几里德算法获得模逆？

> ID：14380829
> 
> 赞同：1
> 
> 时间：2013-01-17T14:05:32.707
> 
> 标签：cryptography, inverse, modular

给定一个 mod b 并找到它的逆，然后做扩展的 GCD。

```
ax + by = gcd(a,b) 
```

在我得到 x 和 y 之后，我如何得到它的倒数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:54:43.103

如果`gcd(a,b) != 1`,`a`没有逆`mod b`。

否则`ax + by = 1`，这意味着mod的倒数也是`ax = 1 (mod b)`如此。`x``a``b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T01:07:36.897

这样做可以计算*x*与模*m*的倒数：

```
function inverse(x, m)
    a, b, u := 0, m, 1
    while x > 0
        q, r := divide(b, x)
        x, a, b, u := b % x, u, x, a - q * u
    if b === 1 return a % m
    error("must be coprime") 
```

这里`:=`是同时赋值运算符，所以右边的所有计算都是先完成的，然后是所有的赋值。该`divide`函数返回 的商和余数`b / x`。

# java - 为什么 JFrame、JDialog、JApplet（来自 JRootPane）是重量级的

> ID：14380830
> 
> 赞同：0
> 
> 时间：2013-01-17T14:05:34.570
> 
> 标签：java, swing, jframe

我知道为什么这些组件被称为重量级组件。我真正感兴趣的是为什么它们没有被实现为轻量级的。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T14:12:53.800

这些组件是不同类型的窗口。如果你想在操作系统中创建一个窗口，你需要调用一些操作系统的本地代码，因为在 Java 中没有办法做到这一点。不仅如此，所有用户输入事件（鼠标、键盘等）都由操作系统分派到相应的操作系统窗口。Java 组件在本机代码中侦听这些事件，并通过 JNI 将它们发送到 java 级别。总结一下：轻量级是不可能的。

# c# - 仅从 Active Directory 中获取已启用的帐户

> ID：14380835
> 
> 赞同：8
> 
> 时间：2013-01-17T14:05:43.023
> 
> 标签：c#, active-directory, directoryservices, account-management

我`System.DirectoryServices.AccountManagement.dll`用来处理 Active Directory 以获取“域用户”组中的所有用户。

这将返回域中的所有用户，但我只需要获取已启用的用户。

这是一些示例代码：

```
List<string> users = new List<string>();

PrincipalContext pcContext = GetPrincipalContext();

GroupPrincipal grp = GroupPrincipal.FindByIdentity(pcContext,
                               IdentityType.Name,
                               "Domain Users");

foreach (Principal user in grp.GetMembers(true).OfType<UserPrincipal>())
{
    if (user.Enabled != false)
    {
        users.Add(user.Name);
    }
} 
```

其他组工作正常，但当组是“域用户”时，该`Enabled`属性的值`false`适用于所有用户。这使得如果不对每个用户进行进一步查询，就不可能区分启用和禁用用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:38:08.513

UserPrinciple 对象为此具有 bool Enabled 属性。

[http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal_properties.aspx](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.userprincipal_properties.aspx)

```
// Add this to GetUserDetails
objUserDetails.EmployeeId = UserPrinical.EmployeeId;

// Then condition the add to only add enabled
if (objUserDetails.Enabled) {
    objUserDetails.Add(GetUserDetails(p.Name));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-21T02:57:45.190

解决此问题的一种方法可能是首先使用该类搜索已启用用户`PrincipalSearcher`，然后使用 Principal 的方法`IsMemberOf()`

```
List<string> users = List<string>();
PrincipalContext pcContext = GetPrincipalContext();
GroupPrincipal grp = GroupPrincipal.FindByIdentity(pcContext, IdentityType.Name, "Domain Users");
UserPrincipal searchFilter = new UserPrincipal(pcContext){ Enabled = true }
PrincipalSearcher searcher = new PrincipalSearcher(searchFilter);
PrincipalSearchResult<Principal> results = searcher.FindAll();
foreach (Principal user in results)
    if (user.IsMemberOf(grp))
        users.Add(user.SamAccountName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-11T01:28:29.387

在 Enabled 属性的[MSDN 页面上有](http://msdn.microsoft.com/fr-fr/library/system.directoryservices.accountmanagement.authenticableprincipal.enabled.aspx)一句话说：

> 如果主体尚未保存在存储中，则此属性返回 null。主体持久化后，默认启用设置取决于存储。AD DS 和 AD LDS 存储在持久化新主体时禁用它们，而 SAM 在持久化新主体时启用它们。应用程序只能将此属性设置为一个值，然后才能将其持久化到存储中。

如果默认值为 false ，也许它是相关的？

此外，MSDN 论坛上有一篇关于[UserPrincipal.Enabled 的帖子为实际上已启用的帐户返回 False？](http://social.msdn.microsoft.com/Forums/vstudio/en-US/939fdd80-7623-4db3-a166-645803610c48/userprincipalenabled-returns-false-for-accounts-that-are-in-fact-enabled)这听起来和你的问题很相似。根据帖子，这里可能有一个解决方案：

> 我想我误解了。无视我之前发的内容。我想我知道发生了什么。GetMembers 方法显然没有加载 UserPrincipal 数据。我不知道是否有更好的解决方案，但以下工作（至少在我的 AD 上）：

```
foreach (UserPrincipal user in group.GetMembers(false))
{
   UserPrincipal tempUser = UserPrincipal.FindByIdentity(context, user.SamAccountName);
   // use tempUser.Enabled
   // other code here
} 
```

# javascript - window.document.write - 编写 html 元素等

> ID：14380836
> 
> 赞同：0
> 
> 时间：2013-01-17T14:05:49.853
> 
> 标签：javascript, html, document.write

我打开了一个新窗口，现在我在这个新窗口中有一个按钮。在这个按钮下有一个 JavaScript 函数，它应该提交表单并将一些内容插入到`<p>`. 这个“待添加”内容也有一个 html 元素（关闭按钮）。

此插入作业不起作用。这是我尝试过的：

```
myWindow.document.write("<scrip" + "t>function closeme(){ document.getElementById('danke').innerHTML='thanks <input type=\'button\' onclick=\'window.close()\'/>'; } </sc" + "ript>"); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:45:08.913

正如评论中所说，有更好的方法来插入脚本，但为了回答问题，您还必须转义转义字符，以便它们出现在输出中。

```
myWindow.document.write("<scrip" + "t>function closeme(){ " + 
"document.getElementById('danke').innerHTML='thanks <input type=\\\'button\\\' " + 
"onclick=\\\'window.close()\\\'/>'; } </sc" + "ript>"); 
```

（为可读性添加了换行符）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T15:46:20.530

我同意有更好的方法来做到这一点，但关于你的具体问题。存在逃逸问题：

```
myWindow.document.write("<scrip" + "t>function closeme(){ document.getElementById('danke').innerHTML='thanks <input type=\"button\" onclick=\"window.close()\" />'; } </sc" + "ript>"); 
```

我会诚实地添加`text/javascript`一致性。

# map - 如何限制并发运行的地图任务？

> ID：14380841
> 
> 赞同：9
> 
> 时间：2013-01-17T14:06:06.567
> 
> 标签：map, hadoop, mapreduce, task, jobs

我的hadoop版本是1.0.2。现在我希望最多同时运行 10 个地图任务。我发现了与这个问题相关的 2 个变量。

a) mapred.job.map.capacity

但在我的 hadoop 版本中，这个参数似乎被遗弃了。

b) mapred.jobtracker.taskScheduler.maxRunningTasksPerJob (http://grepcode.com/file/repo1.maven.org/maven2/com.ning/metrics.collector/1.0.2/mapred-default.xml)

我设置这个变量如下：

```
Configuration conf = new Configuration();
conf.set("date", date);
conf.set("mapred.job.queue.name", "hadoop");
conf.set("mapred.jobtracker.taskScheduler.maxRunningTasksPerJob", "10");

DistributedCache.createSymlink(conf);
Job job = new Job(conf, "ConstructApkDownload_" + date);
... 
```

问题是它不起作用。作业开始时仍有 50 多张地图在运行。

翻阅了hadoop文档后，找不到另一个限制并发运行map任务的。希望有人可以帮助我，谢谢。

======================

我已经找到了关于这个问题的答案，在这里分享给其他可能感兴趣的人。

在分配文件 (fair-scheduler.xml) 中使用公平调度器，并使用配置参数 maxMaps 来设置池的最大并发任务槽。然后，当您提交作业时，只需将作业的队列设置到相应的池中即可。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T16:18:01.880

您可以将值设置为`mapred.jobtracker.maxtasks.per.job`-1（默认值）以外的值。这限制了一个作业可以同时使用的 map 或 reduce 任务的数量。

这个变量被描述为：

> 单个作业的最大任务数。值 -1 表示没有最大值。

我认为有计划添加`mapred.max.maps.per.node`和`mapred.max.reduces.per.node`工作配置，但他们从未发布。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-05T15:33:29.343

如果您使用的是 Hadoop 2.7 或更新版本，您可以使用`mapreduce.job.running.map.limit`and`mapreduce.job.running.reduce.limit`来限制每个作业级别的 map 和 reduce 任务。

修复[JIRA 票证](https://issues.apache.org/jira/browse/MAPREDUCE-5583)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:42:49.390

mapred.tasktracker.map.tasks.maximum 是限制一次可以运行的地图任务数量的属性。在您的 mapred-site.xml 中配置它。

[请参阅http://wiki.apache.org/hadoop/FAQ](http://wiki.apache.org/hadoop/FAQ)中的 2.7

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T09:29:04.773

触发的映射器数量由输入块大小决定。输入块大小是数据在从 HDFS 读取时被划分并发送到不同映射器的块的大小。因此，为了控制映射器的数量，我们必须控制块大小。

在 MapReduce 中配置作业时，可以通过设置参数`mapred.min.split.size`和来控制它。`mapred.max.split.size`该值以字节为单位设置。因此，如果我们有一个 20 GB 的文件，并且我们想要触发 40 个映射器，那么我们需要将其设置为 20480 / 40 = 512 MB。因此，代码将是，

```
conf.set("mapred.min.split.size", "536870912");
conf.set("mapred.max.split.size", "536870912"); 
```

where`conf`是`org.apache.hadoop.conf.Configuration`类的对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-04T10:14:05.617

阅读 Hadoop 中的调度作业（例如“fair scheduler”）。您可以创建具有多种配置的自定义队列，然后将您的工作分配给该队列。如果您将自定义队列最大映射任务限制为 10，则分配给队列的每个作业最多将有 10 个并发映射任务。

# android - linux命令“android”：在Windows中等效？

> ID：14380845
> 
> 赞同：5
> 
> 时间：2013-01-17T14:06:18.033
> 
> 标签：android, windows, ant, command-line

我习惯了linux环境，但目前我必须在windows环境下开发一个android应用程序。

所以我需要在 Windows 提示符（位于 $ANDROID_HOME/tools/ ）中运行“android”命令（ **android.bat ）以添加 ant 脚本并执行其他操作。**

问题是这会启动我的 Android SDK 管理器，而不是给我命令行答案谎言：“项目更新”......所以我的问题是：

如何在 Windows 下运行 android 命令？运行诸如：

**android更新项目--path**

也许我没有运行正确的 bat 文件？我在互联网上进行了很多搜索，但没有找到任何答案。

不过，我设法使 Ant 完美地工作，使用位于 ant 目录中的“ **ant.bat ”**

编辑 ：

问题解决了。

而不是输入：

**android**更新项目--path XXX

在 $ANDROID_HOME/tools/ 目录中，这将打开 SDK 管理器，我必须这样做：

**android.bat**更新项目 --path XXX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-02T13:12:09.143

您可以通过将 ANDROID_HOME 环境变量设置为 sdk 目录的路径，然后将工具和平台工具的路径添加到您的系统 PATH 环境变量来使其变得更加容易。

然后，您可以像以前一样从命令行运行命令**android**而不是 android.bat，而无需键入完整路径或更改到 sdk 目录。

这里有[设置 Windows 环境变量的说明](http://www.computerhope.com/issues/ch000549.htm)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-05T18:41:22.783

我在 Windows 中遇到了同样的问题。我是这样做的，它对我有用。

```
 $ $ANDROID_SDK/sdk/tools/android.bat update project -p .
     Updated local.properties
     Updated file C:\ndk\android-ndk-r9b\samples\hello-jni\proguard-project.txt
     It seems that there are sub-projects. If you want to update them
     please use the --subprojects parameter 
```

这里首先使用“cd”命令进入 ndk 项目目录，这是我使用“.”（点）作为路径（-p）的方式

```
$ANDROID_SDK/sdk/tools/android.bat update project -p . 
```

# javascript - 为列表框编写验证函数

> ID：14380861
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:03.923
> 
> 标签：javascript, asp.net, customvalidator

我有一个asp 控件列表框。我必须验证这一点。这描述如下：

```
<div style="float:top; width:300px">
  <span>Anrede</span>
     <asp:DropDownList  id="dropdownListAnrede" runat="server" BorderStyle="Solid"
TabIndex="1"  Width="250px" BackColor="White" BorderColor="Silver" BorderWidth="1px" Height="22px">
          <asp:ListItem >Bitte auswählen</asp:ListItem>
          <asp:ListItem Value="Herr">Herr</asp:ListItem>
          <asp:ListItem Value="Frau">Frau</asp:ListItem>
          </asp:DropDownList>
          <asp:CustomValidator ID="CustomValidatorAnrede" 
               **ClientValidationFunction=""** runat="server"
               ControlToValidate="dropdownListAnrede" ValidateEmptyText="true" SetFocusOnError="true" 
        ForeColor="Red" onservervalidate="CustomValidatorName_ServerValidate"> Wählen Sie bitte eine Anrede aus!</asp:CustomValidator>
</div> 
```

我必须验证它是否没有价值（Herr/frau），否则不会发生。并且错误消息将显示消息是写在文本中的。我必须在 javascript中编写一个**ClientValidationFunction 。**但我想知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:10:34.863

添加一个虚拟值作为基本上没有选择的第一项：

```
<asp:DropDownList  id="dropdownListAnrede" runat="server" ...>
    <asp:ListItem >-Select One-</asp:ListItem> 
```

获取下拉列表，并检查它是否具有大于零的选定值（省略第一个）。这将是客户端验证功能：

```
function val(sender, e) {
  var ddl = document.getElementById("<%= dropdownListAnrede.ClientID %>");
  e.IsValid = ddl.selectedIndex > 0;
} 
```

# error-handling - 高级数据网格事件处理

> ID：14380865
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:10.117
> 
> 标签：error-handling, advanceddatagrid

我的项目中有一个高级数据网格。当我加载它超过 2 次时，我收到以下错误

TypeError：错误＃1010：术语未定义且没有属性。在 myComponents::GridCellFormatted/updateDisplayList() 在 mx.core::UIComponent/validateDisplayList() 在 spark.components::Group/validateDisplayList() 在 mx.managers::LayoutManager/validateDisplayList() 在 mx.managers::LayoutManager/ mx.managers::LayoutManager/doPhasedInstantiationCallback() 处的 doPhasedInstantiation()

当它加载正常时，将触发 updatecomplete 事件。但是，当出现此错误时，它似乎不会触发更新完成事件。我能够看到此错误的唯一方法是因为我安装了调试器。是否有一个我可以使用的事件来捕获尝试加载高级数据网格时发生的任何错误？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:46:23.700

您可以使用初始化并拥有一个处理程序，该处理程序将具有很少的跟踪语句来为您提供更多信息。

```
<s:AdvancedDataGrid id="adDataGrid" width="100%" height="100%" 
                                        initialize="adDataGrid_itemClickHandler(event)">

 protected function adDataGrid_initializeHandler(event:FlexEvent):void
 {
     // TODO Auto-generated method stub
     trace(..);

 } 
```

# javascript - Javascript 跨域即发即弃请求

> ID：14380866
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:16.777
> 
> 标签：javascript, ajax

我正在寻找创建一个简单的 javascript 系统，用于对 url 进行跨域即发即忘调用。由于这个 url 除了 status:200 之外没有给我任何东西，当一切都很好时，我正在努力想出最好的解决方案。

我正在调用的 url 超出了我的控制范围，因此实施 JSONP 解决方案或在标头中设置“Access-Control-Allow-Origin”不是一种选择。

此外，我被要求在不依赖 jQuery 的情况下编写此代码。

我正在研究的一个这样的解决方案涉及创建一个新的脚本 elelement，其中 src 属性指向 url。但是，由于会有很多这样的电话，我也想在每次通话后进行清理。

到目前为止，这是我的想法：

```
var fireAndForgetGETRequest = function(url) {
    var head = document.getElementsByTagName("head")[0];
    var scriptTag = document.createElement("script");
    scriptTag.type = "text/javascript";
    head.appendChild(scriptTag);

    scriptTag.src = url;

    setTimeout(function() {
        head.removeChild(scriptTag);
        scriptTag = null;
    }, 5000);
}; 
```

这将在任意时间（在本例中为 5 秒）后清理脚本标记。

这会是一个合理的解决方案吗？我什至必须在清理之前等待，还是会立即提出请求？

您的 JavaScript 专家的任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T14:13:38.660

如果你不关心响应，为什么要对 XSS 攻击敞开心扉呢？通过图像请求发送 GET 请求。

```
function sendData(url) {
    function remove() { 
        img = null; 
    }
    var img = new Image();
    img.onerror = remove;
    img.onload = remove;
    img.src = url;   
} 
```

# python - 从文件路径中提取文件

> ID：14380871
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:19.903
> 
> 标签：python

我需要提取没有扩展名的文件名。

例子。

/home/si/text.txt

/home/si/text.vx.txt

在这两种情况下，我都应该只接收输出文本。我不确定可以有多少个尾随扩展文件，但我只需要提取文件名。我试过 spliitext(filename)[0] 但它给了我输出 text.vx 而不是 text

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:10:14.403

这应该满足您的需求：

```
from os.path import basename
print basename("/home/si/text.vx.txt").split('.')[0]
>>> text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:27:50.407

我在获取文件名后使用拆分功能。

文件名.split('.')[0]

# java - 定时器销毁messageBox

> ID：14380873
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:24.177
> 
> 标签：java, gwt, timer, messagebox

我在我的程序中显示了一些消息框。例如，如果我成功保存数据，messageBox 会显示“Successfull”。但我想让它靠近计时器。当它经过两秒钟时，它应该被关闭。我不需要准备好的代码。只要你告诉我怎么做就够了。顺便说一下，我的平台是 GWT。

最好的祝福..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:14:56.983

除了 Timer 之外，可能还有更好的方法来做到这一点。但是，使用计时器，您将使用 GWT 的 com.google.gwt.user.client.Timer 类。

[http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/javadoc/com/google/gwt/examples/TimerExample.java](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/javadoc/com/google/gwt/examples/TimerExample.java)

```
 Timer t = new Timer() {
      public void run() {
        Window.alert("Nifty, eh?");
        // your messageBox code
        t.cancel(); // Since you only need this run once.
      }
    };

    // Schedule the timer to run once in 2 seconds.
    t.schedule(2000); 
```

# jakarta-ee - 为什么当 JUnit 测试尝试启动 Seam 时会抛出 InstantiationException？

> ID：14380874
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:31.990
> 
> 标签：jakarta-ee, exception, seam, quartz-scheduler, instantiation

我正在尝试为现有的 Java EE 应用程序编写集成测试，该应用程序使用 Seam 和 Hibernate 并部署到 Glassfish。

然而，测试目前未能在一开始就启动 Seam。这似乎是因为它无法实例化 Quartz Scheduler 组件 - 请参见下面的代码。异常堆栈跟踪也在下面。

任何帮助将非常感激...

*这些可能是不必要的细节，但我使用 JUnit（而不是 TestNG）编写了测试，如此[处](https://community.jboss.org/thread/189670?start=0&tstart=0)所述。该测试扩展了 AbstractSeamT​​est 并具有实例化 ComponentTest 并覆盖 testComponents 的 @Test 方法，如此[处](http://docs.jboss.org/seam/2.2.1.CR1/reference/en-US/html_single/#d0e30387)所述。该应用程序在 Maven 的预集成阶段使用 Cargo 部署到现有的本地 Glassfish 实例，并使用 Failsafe 插件运行测试。*

初始化石英类：

```
@Name("initialiseQuartz")
@Scope(ScopeType.APPLICATION)
@Startup
public class InitialiseQuartz {

    private QuartzTriggerHandle qth;

    @In(create=true) 
    private EmailService emailService;

    @Create
    public void startSchedule() {
        System.out.print("Schedule started");
        qth = emailService.generateDailyEmail("0 0 7 * * ?");
    }

    @Destroy
    public void stopSchedule() {
        try {
            qth.cancel();
        } catch (SchedulerException se) {

        }
    }
} 
```

堆栈跟踪：

```
org.jboss.seam.InstantiationException: Could not instantiate Seam component: initialiseQuartz
    at org.jboss.seam.async.AbstractDispatcher.extractAndValidateParameters(AbstractDispatcher.java:171)
    at org.jboss.seam.async.AbstractDispatcher.createTimerSchedule(AbstractDispatcher.java:113)
    at org.jboss.seam.async.ThreadPoolDispatcher.scheduleInvocation(ThreadPoolDispatcher.java:56)
    at org.jboss.seam.async.ThreadPoolDispatcher.scheduleInvocation(ThreadPoolDispatcher.java:30)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
    at org.jboss.seam.async.ThreadPoolDispatcher_$$_javassist_seam_3.scheduleInvocation(ThreadPoolDispatcher_$$_javassist_seam_3.java)
    at org.jboss.seam.async.AsynchronousInterceptor.aroundInvoke(AsynchronousInterceptor.java:40)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
    at uk.police.kent.optica.schedule.EmailService_$$_javassist_seam_2.generateDailyEmail(EmailService_$$_javassist_seam_2.java)
    at uk.police.kent.optica.schedule.InitialiseQuartz.startSchedule(InitialiseQuartz.java:26)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.intercept.RootInvocationContext.proceed(RootInvocationContext.java:32)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:56)
    at org.jboss.seam.transaction.RollbackInterceptor.aroundInvoke(RollbackInterceptor.java:28)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.BijectionInterceptor.aroundInvoke(BijectionInterceptor.java:77)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.core.MethodContextInterceptor.aroundInvoke(MethodContextInterceptor.java:44)
    at org.jboss.seam.intercept.SeamInvocationContext.proceed(SeamInvocationContext.java:68)
    at org.jboss.seam.intercept.RootInterceptor.invoke(RootInterceptor.java:107)
    at org.jboss.seam.intercept.JavaBeanInterceptor.interceptInvocation(JavaBeanInterceptor.java:185)
    at org.jboss.seam.intercept.JavaBeanInterceptor.invoke(JavaBeanInterceptor.java:103)
    at uk.police.kent.optica.schedule.InitialiseQuartz_$$_javassist_seam_1.startSchedule(InitialiseQuartz_$$_javassist_seam_1.java)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.seam.util.Reflections.invoke(Reflections.java:22)
    at org.jboss.seam.util.Reflections.invokeAndWrap(Reflections.java:144)
    at org.jboss.seam.Component.callComponentMethod(Component.java:2275)
    at org.jboss.seam.Component.callCreateMethod(Component.java:2198)
    at org.jboss.seam.Component.newInstance(Component.java:2158)
    at org.jboss.seam.contexts.Contexts.startup(Contexts.java:304)
    at org.jboss.seam.contexts.Contexts.startup(Contexts.java:278)
    at org.jboss.seam.contexts.ServletLifecycle.endInitialization(ServletLifecycle.java:143)
    at org.jboss.seam.init.Initialization.init(Initialization.java:744)
    at org.jboss.seam.mock.AbstractSeamTest.startSeam(AbstractSeamTest.java:929)
    at com.ipl.rdhi.acceptance.RdhiAdapterIT.setUpBeforeClass(RdhiAdapterIT.java:118) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:33:00.667

你用的是Witch Seam版本吗？

当某些依赖项无法注入您的组件时，通常会发生此错误。bean EmailService 在您的测试用例中以成功开始？

# c++ - 我在 Turbo C++ 中的 C++ 程序在一段时间后被挂起

> ID：14380881
> 
> 赞同：0
> 
> 时间：2013-01-17T14:07:51.503
> 
> 标签：c++, turbo-c++

这是一个相当简单的蛇游戏。它只是被绞死。当我尝试执行它时，它会运行一段时间，然后在某些时候挂起。请告诉我该怎么办？这是 Turbo C++ 3.0 版，请不要告诉我使用新版本。别说我过时了，我知道。

```
#include<conio.h>
#include<iostream.h>
#include<dos.h>
#include<graphics.h>
#include<stdio.h>
#include<stdlib.h>
#include<math.h>
int x,y,a,b,flag,i,discx,discy,sc,maxx,maxy,same;
short int arr[100][2];
char ch,check;
void shift();
int introscreen();
void condition();
void gameover();
void score();
void randomapple();

int introscreen()
    {
     outtextxy(maxx/2,30,"SNAKE");
     outtextxy((maxx/2)-10,50,"INSTRUCTIONS");
     outtextxy(5,70,"W A S D represent Top Right Bottom Left respectively.");
     outtextxy(5,90,"Press Spacebar to quit any moment");
     outtextxy(5,110,"To play Press Space else anything else");
     char take=getch();
     if(take==' ')
     return 1;
     else
     return 0;
     }
void randomapple()
{same=0;
while(1)
{
 a=random(maxx-5);
 b=random(maxy-5);
 for(i=0;i<flag;i++)
 {if((abs(a-arr[i][0]<=5)&&abs(b-arr[i][1]<=5))||a<=5||b<=5)
  same=1;
 }
 if(same==0) break;
 }
 setcolor(RED);
 outtextxy(a,b,"0");
 setcolor(WHITE);
}
void shift()
    {discx=arr[flag-1][0];
     discy=arr[flag-1][1];
     for(i=flag-1;i>0;i--)
        {
         arr[i][0]=arr[i-1][0];
         arr[i][1]=arr[i-1][1];
         }
     arr[0][0]=x;
     arr[0][1]=y;
     }
void printsnake()
    {
     setcolor(BLACK);
     outtextxy(discx,discy,"X");
     setcolor(GREEN);
     outtextxy(x,y,"X");
     setcolor(RED);
     outtextxy(a,b,"0");
     rectangle(0,0,maxx,maxy);
     delay(5);
    }
void condition()
    {
     switch(ch)
        {
         case'd':x++;
             break;
         case'a':x--;
             break;
         case'w':y--;
             break;
         case's':y++;
             break;
         case' ':exit(1);

        }
     }
    void score()
    {if((abs(x-a)<=5)&&(abs(y-b)<=5))
     {sc++;
     if(flag<500)
     flag=flag+10;
     setcolor(BLACK);
     outtextxy(a,b,"0");
     randomapple();
     }

    if(sc==100)
    {
        clrscr();
        cout<<"You are the champion tonight!!!!";
        getch();
        exit(1);
    }
    }
void collision()
    {
     if(x<=5||y<=5||maxx-x<=5||maxy-y<=5)
     gameover();
     for(i=1;i<flag;i++)
     {
      if(arr[0][0]==arr[i][0]&&arr[0][1]==arr[i][1])
      gameover();
     }
    }
void gameover()
    {textcolor(BLACK);
     clrscr();
     textcolor(WHITE);
     cout<<"YOU LOSE!\n";
     cout<<"GAME OVER\n";
     cout<<"Final Score = "<<sc;
     getch();
     getch();
     getch();
     getch();
     exit(1);
    }
void main()
    {
     randomize();
     int gdriver = DETECT, gmode, errorcode;
     /* initialize graphics mode */
     initgraph(&gdriver, &gmode, "");
     maxx=500;
     maxy=400;
     x=maxx/2;
     y=maxy/2;
     ch='d';
     sc=0;
     if(introscreen())
     {
     textcolor(BLACK);
     clrscr();
     rectangle(0,0,maxx,maxy);
     flag=20;
     setcolor(GREEN);
     for(i=19;i>=0;i--)
     {arr[i][0]=x-i;
      arr[i][1]=y-i;
      outtextxy(x-i,y-i,"X");
     }
     setcolor(WHITE);
     randomapple();
     while(1)
     {
        if(kbhit())
        {
            check=getch();
            switch(check)
            {
            case 'a':if(ch!='d') ch=check;
                break;
            case 'd':if(ch!='a') ch=check;
                break;
            case 'w':if(ch!='s') ch=check;
                break;
            case 's':if(ch!='w') ch=check;
                break;
            case ' ':ch=check;
                break;
            }

        }
        condition();
        shift();
        printsnake();
        collision();
        score();
     }
     }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:32:37.843

据我所知，问题在于 randomapple 函数。如果您仔细观察它，如果您将 same 设置为 1，那么它将永远保持为 1。您应该在那段时间的每次迭代中重置它。

# count - 计算电子表格中的不同值

> ID：14380882
> 
> 赞同：92
> 
> 时间：2013-01-17T14:07:58.957
> 
> 标签：count, google-sheets, distinct

我有一个 Google 电子表格，其中有一列如下所示：

```
City
----
London
Paris
London
Berlin
Rome
Paris 
```

我想计算每个不同城市的出现次数（所以我需要城市名称和出现次数）。

```
City   | Count
-------+------
London |  2
Paris  |  2
Berlin |  1
Rome   |  1 
```

我怎么做？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-01-25T14:09:00.467

[**链接到工作示例**](https://docs.google.com/spreadsheets/d/17IbCf_TYVHRxd-JwOgjx2cxX06hu8OwlI2Ua1pa9Os8)

**解决方案 0**

这可以使用数据透视表来完成。

![数据透视表示例 - 按值计算行数](../Images/d87c25f0ce3199d015ee7bf82597ee63.png)

**解决方案 1**

使用`unique`公式获取所有不同的值。然后用于`countif`获取每个值的计数。请参阅顶部的工作示例链接，以了解其具体实现方式。

```
Unique Values        Count
=UNIQUE(A3:A8)       =COUNTIF(A3:A8;B3)
                     =COUNTIF(A3:A8;B4)
                     ... 
```

**解决方案 2**

如果您这样设置数据：

```
City    
----    
London   1
Paris    1
London   1
Berlin   1
Rome     1
Paris    1 
```

然后以下将产生所需的结果。

```
=sort(transpose(query(A3:B8,"Select sum(B) pivot (A)")),2,FALSE) 
```

我确信有一种方法可以摆脱第二列，因为所有值都是 1。我认为这不是一个理想的解决方案。

通过[http://googledocsforlife.blogspot.com/2011/12/counting-unique-values-of-data-set.html](http://googledocsforlife.blogspot.com/2011/12/counting-unique-values-of-data-set.html)

**其他可能有用的链接**

*   [http://productforums.google.com/forum/#!topic/docs/a5qFC4pFZJ8](http://productforums.google.com/forum/#!topic/docs/a5qFC4pFZJ8)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-06-06T23:47:45.270

您可以使用该`query`函数，因此如果您的数据位于第一行是列标题的 col A 中...

```
=query(A2:A,"select A, count(A) where A != '' group by A order by count(A) desc label A 'City'", 0) 
```

产量

```
City    count 
London  2
Paris   2
Berlin  1
Rome    1 
```

链接到有效的 Google 表格。

[https://docs.google.com/spreadsheets/d/1N5xw8-YP2GEPYOaRkX8iRA6DoeRXI86OkfuYxwXUCbc/edit#gid=0](https://docs.google.com/spreadsheets/d/1N5xw8-YP2GEPYOaRkX8iRA6DoeRXI86OkfuYxwXUCbc/edit#gid=0)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-09-01T20:03:08.090

`=iferror(counta(unique(A1:A100)))`计算从 A1 到 A100 的唯一单元格的数量

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-06-25T09:56:33.550

*不完全是用户的要求，而是一种计算唯一值的简单方法：*

Google 推出了一项[新功能](https://support.google.com/docs/answer/3093405?hl=en)，只需一步即可计算唯一值，您可以将其用作其他公式的输入：

`=COUNTUNIQUE(A1:B10)`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-04-10T03:35:23.553

如果您只想计算以下范围内的唯一值的计数，则此方法有效

```
=counta(unique(B4:B21)) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-13T19:33:36.043

这类似于@JSuar 的解决方案 1 ...

假设您的原始城市数据是一个名为的命名范围`dataCity`。在新工作表中，输入以下内容：

```
 A                 | B
  ----------------------------------------------------------
1 | =UNIQUE(dataCity) | Count
2 |                   | =DCOUNTA(dataCity,"City",{"City";$A2})
3 |                   | [copy down the formula above]
4 |                   | ...
5 |                   | ... 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2018-11-15T08:10:01.153

=UNIQUE({filter(Core!L8:L27,isblank(Core!L8:L27)=false),query(ArrayFormula(countif(Core!L8:L27,Core!L8:L27)),"选择 Col1 其中 Col1 < > 0")})

核心！L8:L27 = 列表

# google-maps - 有什么方法可以模拟地图 api v2 的哪些部分在 5 月 19 日之后会失败

> ID：14380883
> 
> 赞同：0
> 
> 时间：2013-01-17T14:08:00.507
> 
> 标签：google-maps, google-maps-api-3

我使用的网页是为 api v2 编写的，我假设它将在 5 月 19 日停止工作。我只是谷歌地图的初学者，不具备知道脚本的哪些部分会失败的技能。

[我查看了REMOVING CODE](https://developers.google.com/maps/articles/v2tov3#obsolete_code)的在线文档，但找不到类似的东西：以前是这样完成**的**，但现在是这样完成**的**。

**问：** 为了集中我有限的技能，有什么方法可以模拟我的 api v2 脚本的哪些部分在 5 月 19 日之后会失败？..那样至少我可能知道从哪里开始寻找。

看这个简单的页面 -->> **[Old V2 Script](http://www.eldoradocountyweather.com/current/misc/google-maps/dax/ridge.html)** <<-- 这就是我需要转换成 api v3 的。有两个引用的 .js 脚本也需要调整。

我发现我的部分脚本使用“gUnload”并且知道这会失败但不知道用什么替换它。有人可以看看这 3 页并轻松告诉我还有什么要破坏的吗？

或者..他们这里的任何专业人士或专家是否愿意承担将 v2 转换为 v3 的任务？

我知道这是一个“新手”问题.. ..提前感谢您的耐心等待。

丹尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:26:52.167

问题是关于如何模拟 api v2 的哪些部分在 5 月 19 日之后会失败。

答案是从旧的 google api 脚本类型更改为 html 中的 google api 脚本。

像这样的东西：旧的 api 2 方式您的密钥新的 api 3 方式

完成此操作后，您将看到现在“未定义”的所有旧 api v2 调用。

但是..仍在寻找可以协助转换的人。

丹尼斯

# eclipse - 使用 jdk1.5 在 Eclipse 中运行 Maven 项目时出错

> ID：14380886
> 
> 赞同：2
> 
> 时间：2013-01-17T14:08:05.803
> 
> 标签：eclipse, maven, m2e, jdk1.5

操作系统：Ubuntu 12.10
Eclipse：4.2
Java：jdk1.5.0_22 和 jdk1.7
Apache Maven：3.0.4
Maven 主页：/usr/share/maven
m2e：1.2.020120903-1050

我在 Eclipse 中创建了一个非常简单的“Hello, World”Maven 项目，以便测试它以迁移我们自己的项目（使用 1.5）。我的 pom.xml 如下：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>br.com.contmatic</groupId>
  <artifactId>maven-test</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>MavenTest</name>
  <description>teste do maven</description>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <configuration>
          <source>1.5</source>
          <target>1.5</target>
        </configuration>
      </plugin>
    </plugins>
  </build>
</project> 
```

我在我的项目构建路径中设置了 J2SE-1.5 (jdk1.5.22)。然而，尝试从 Eclipse 中运行 Maven Clean 或 Maven Install，我收到以下错误：

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: Bad version number in .class file
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:260)
    at java.net.URLClassLoader.access$100(URLClassLoader.java:56)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:195)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:188)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClassFromSelf(ClassRealm.java:386)
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:42)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320)
    at org.apache.maven.cli.MavenCli.container(MavenCli.java:375)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:191)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:592)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352) 
```

谷歌搜索，我发现当用于编译的 jre 版本与用于运行的 jre 版本不同时会发生这种情况。将所有内容更改为 1.7（pom.xml 和构建路径）修复了错误，这表明它可以使用 java 1.7 编译或运行。

但我似乎无法在我的配置中找到错误。

跑步时

```
mvn clean install 
```

在终端中，maven 构建项目没有错误。

我在 Eclipse 中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T19:10:45.970

原来我的一些 Maven 依赖项没有用 1.5 编译，这导致了问题。它没有在控制台中发生，因为我已经将 java 1.7 设置为默认值。

幸运的是，我能够使用 1.7 构建我的项目并指定 1.5 来运行编译和执行。就是这样：

在 Eclipse>Run>Run Configurations>Maven Build>New 中，我有这个配置：

主选项卡

基本目录：

```
${project_loc} 
```

目标：

```
clean install 
```

我只是选择了 JRE 选项卡，然后选择了 Alternate JRE，使用我的 1.7 SDK 安装。

接下来，我必须将 1.5 作为我的 pom.xml 的 maven-compiler-plugin 的源和目标，如下所示：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <encoding>ISO-8859-1</encoding>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin> 
```

它有效。

# asp.net-mvc - 如何在 jQuery Accordion 上执行以下 ajax 请求？

> ID：14380889
> 
> 赞同：1
> 
> 时间：2013-01-17T14:08:11.993
> 
> 标签：asp.net-mvc, jquery-ui, jquery, accordion

我使用 Asp.Net MVC 创建了一个 jQuery Accordion，它运行良好。手风琴显示员工姓名列表，当我单击一个项目时，它会显示详细信息。我想发送一个 AJAX 请求以在他们单击某个项目时获取员工详细信息，而不是一次加载所有员工详细信息。请看我下面的代码。

另外，请告诉我如何保持折叠中的第一项而不是显示细节，有没有办法在不使用的情况下将标题向右移动一点`&nbsp`？

```
<div id="accordion">
    @foreach (var item in Model.Employees)
    {   
        <h3>&nbsp;&nbsp;&nbsp;&nbsp;@item.EmployeeName</h3>
        <div id = "accordiondiv">
            <p>Address: @item.Address</p>
            <p>Town: @item.Town</p>
            <p>Postcode: @item.PostCode</p>
            <p>PhoneNumber: @item.PhoneNumber</p>
        </div>                                       
    }
</div>

<script>
$(function () {
    $("Accordion").click(function (evt) { 
                $.ajax({
                url: "/Accordion/GetEmployeeDetails",
                type: 'POST',
                data:
             //need code to pass the employeeid that was clicked on the accordion,
                success: function (data) {
                    $.each(data, function (i, val) {                       
            //need code to populate the respective accordion with the employee details
                    });
                } 
            });
        } 
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:02:27.503

下面是向控制器发送 AJAX 请求的示例：

```
<div id="accordion">
    @foreach (var item in Model.Employees)
    {   
        <h3>&nbsp;&nbsp;&nbsp;&nbsp;@item.EmployeeName</h3>
        <div id = "accordiondiv" data-id="@item.EmployeeId">
            <p>Address: @item.Address</p>
            <p>Town: @item.Town</p>
            <p>Postcode: @item.PostCode</p>
            <p>PhoneNumber: @item.PhoneNumber</p>
            <p><input type="button" id="Accordion" class="btn" name="Accordion" /></p>
        </div>
    }
</div>

<script>
$(function () {
    $(".btn").each(function (){
        var button = $(this);
        var parentDiv = button.parent();
        var employeeId = parentDiv.attr("data-id");

        button.click(function (){
            $.ajax({
                url: "/Accordion/GetEmployeeDetails",
                type: 'POST',
                data: { employeeId : employeeId},               
                success: function (data) {
                    $.each(data, function (i, val) {                       
                    //need code to populate the respective accordion with the employee details
                    });
                } 
            }); 
        });
    });
</script> 
```

在你的控制器中：

```
[HttpGet]
public ActionResult GetEmployeeDetails(int employeeId)
{          
    // code: get the details based on employeeId
    var detail = new Model.EmployeeDetail();

    return Json(detail, JsonRequestBehavior.AllowGet);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:58:09.053

Thiago 的实现似乎应该可以工作。但是，我会根据模型创建一个部分视图`_EmployeeDetails`，其中包含您希望细节的外观，`Employee`

```
@model Employee

<p>Address: @item.Address</p>
<p>Town: @item.Town</p>
<p>Postcode: @item.PostCode</p>
<p>PhoneNumber: @item.PhoneNumber</p> 
```

在您的控制器中，您将原样返回它，

```
public ActionResult GetEmployeeDetails(int employeeId)
{          
    ...
    var employee = Repository.GetEmployee(employeeId);

    return PartialView("_EmployeeDetails", employee);
} 
```

您可以使用哪个结果来设置`<div id="accordionDiv">`AJAX 响应中每个的内容，

```
<script>
$(function () {
    $(".btn").each(function (){
        var button = $(this);
        var parentDiv = button.parent();
        var employeeId = parentDiv.attr("data-id");

        button.click(function (){
            $.ajax({
                url: @Url.Action("GetEmployeeDetails"),
                type: 'POST',
                data: { employeeId : employeeId },              
                success: function (data) { parentDiv.html(data); }
            });
        });
    });
</script> 
```

# c++ - What's the "discriminator" in addr2line?

> ID：14380890
> 
> 赞同：25
> 
> 时间：2013-01-17T14:08:18.883
> 
> 标签：c++, c, addr2line

When running addr2line in some programs, I get a "discriminator N" comment at the end of the line:

`main at /tmp/nsievebits.c:56 (discriminator 3)`

The man page doesn't mention it, and a quick Google search seems to indicate mostly source code files, with no clear explanation. Is it some intentionally undocumented feature? More importantly, should I worry about it at all?

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-27T19:33:55.390

[据我了解，当一行中有](http://wiki.dwarfstd.org/index.php?title=Path_Discriminators)多个代码路径时，鉴别器会很有用，请参阅更多信息。您可以放心地忽略它们，但如果有人知道如何阅读它们，它们可以为您提供有关堆栈确切指向的位置的非常精确的信息。

# c - 自动引用不同目录下的头文件

> ID：14380896
> 
> 赞同：1
> 
> 时间：2013-01-17T14:09:02.133
> 
> 标签：c, unix

我正在尝试在现有应用程序上运行一个名为[crest的工具。](http://code.google.com/p/crest/)我的第一个目标应用程序是 Apache。输出（如下图）表明没有找到一些头文件。它们位于源文件夹中的其他目录中。其中之一是 \httpd-2.2.14\srclib\apr\include。我宁愿不更改 apache 的源代码，因为我希望对 Apache 中的大量文件运行此命令，然后将相同的技术应用于其他几个应用程序。

我的问题是：

1）我怎样才能做到这一点，以便在查找这些引用的包含文件时，它会找到它们所在的正确目录并将使用该目录。我可以定义目录。有朋友提到改变命令行输入，或者构建环境变量？

其他想法/建议将不胜感激。

谢谢大家。

**运行 crest 的命令是：** ../bin/ crestc ../../httpd-2.2.14/server/request.c -dfs

**我得到以下输出：**

```
[root@localhost src]# ../bin/crestc ../../httpd-2.2.14/server/request.c -dfs
cp libcrest/libcrest.a ../lib
cp run_crest/run_crest ../bin
cp process_cfg/process_cfg ../bin
cp tools/print_execution ../bin
cp libcrest/crest.h ../include
cp libcrest/libcrest.a ../lib
cp run_crest/run_crest ../bin
cp process_cfg/process_cfg ../bin
cp tools/print_execution ../bin
cp libcrest/crest.h ../include
gcc -D_GNUCC -E -I../bin/../include -DCIL=1 ../../httpd-2.2.14/server/request.c -o ./request.i
../../httpd-2.2.14/server/request.c:28:25: error: apr_strings.h: No such file or directory
../../httpd-2.2.14/server/request.c:29:25: error: apr_file_io.h: No such file or directory
../../httpd-2.2.14/server/request.c:30:25: error: apr_fnmatch.h: No such file or directory
../../httpd-2.2.14/server/request.c:33:22: error: apr_want.h: No such file or directory
../../httpd-2.2.14/server/request.c:36:23: error: ap_config.h: No such file or directory
../../httpd-2.2.14/server/request.c:37:19: error: httpd.h: No such file or directory
../../httpd-2.2.14/server/request.c:38:25: error: http_config.h: No such file or directory
../../httpd-2.2.14/server/request.c:39:26: error: http_request.h: No such file or directory
../../httpd-2.2.14/server/request.c:40:23: error: http_core.h: No such file or directory
../../httpd-2.2.14/server/request.c:41:27: error: http_protocol.h: No such file or directory
../../httpd-2.2.14/server/request.c:42:22: error: http_log.h: No such file or directory
../../httpd-2.2.14/server/request.c:43:23: error: http_main.h: No such file or directory
../../httpd-2.2.14/server/request.c:44:25: error: util_filter.h: No such file or directory
../../httpd-2.2.14/server/request.c:45:26: error: util_charset.h: No such file or directory
../../httpd-2.2.14/server/request.c:46:25: error: util_script.h: No such file or directory
../../httpd-2.2.14/server/request.c:48:22: error: mod_core.h: No such file or directory
BRead 0 branches.
Read 0 nodes.
Wrote 0 branch edges.
[root@localhost src]# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T15:16:18.937

您可以设置`C_INCLUDE_PATH`环境变量（使用 a`:`分隔多个路径）：

```
 export C_INCLUDE_PATH=/path/to/include/files:/path/to/more/include/files 
```

# python - 使用 scipy 稀疏矩阵求解方程组

> ID：14380899
> 
> 赞同：7
> 
> 时间：2013-01-17T14:09:14.403
> 
> 标签：python, scipy, linear-algebra, sparse-matrix, equations

这是对[如何在 python 中建立和求解联立方程](https://stackoverflow.com/questions/14367331/how-to-set-up-and-solve-simultaneous-equations-in-python)的后续，但我觉得任何答案都值得拥有自己的声誉点。

对于一个固定整数`n`，我有一组联`2(n-1)`立方程如下。

```
M(p) = 1+((n-p-1)/n)*M(n-1) + (2/n)*N(p-1) + ((p-1)/n)*M(p-1)

N(p) = 1+((n-p-1)/n)*M(n-1) + (p/n)*N(p-1)

M(1) = 1+((n-2)/n)*M(n-1) + (2/n)*N(0)

N(0) = 1+((n-1)/n)*M(n-1) 
```

`M(p)`被定义为`1 <= p <= n-1`。 `N(p)`被定义为`0 <= p <= n-2`。另请注意，这`p`只是每个方程中的一个常数整数，因此整个系统是线性的。

对于如何在 python 中建立方程组，给出了一些非常好的答案。但是，系统是稀疏的，我想为大 n 解决它。例如，如何使用 scipy 的稀疏矩阵表示和[http://docs.scipy.org/doc/scipy/reference/sparse.linalg.html](http://docs.scipy.org/doc/scipy/reference/sparse.linalg.html)？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:24:32.470

这是使用 scipy.sparse 的解决方案。不幸的是，这里没有说明问题。所以为了理解这个解决方案，未来的访问者必须首先在问题中提供的链接下查找问题。

**使用 scipy.sparse 的解决方案：**

```
from scipy.sparse import spdiags, lil_matrix, vstack, hstack
from scipy.sparse.linalg import spsolve
import numpy as np

def solve(n):
    nrange = np.arange(n)
    diag = np.ones(n-1)

    # upper left block
    n_to_M = spdiags(-2\. * diag, 0, n-1, n-1)

    # lower left block
    n_to_N = spdiags([n * diag, -nrange[-1:0:-1]], [0, 1], n-1, n-1)

    # upper right block
    m_to_M = lil_matrix(n_to_N)
    m_to_M[1:, 0] = -nrange[1:-1].reshape((n-2, 1))

    # lower right block
    m_to_N = lil_matrix((n-1, n-1))
    m_to_N[:, 0] = -nrange[1:].reshape((n-1, 1))

    # build A, combine all blocks
    coeff_mat = hstack(
                       (vstack((n_to_M, n_to_N)),
                        vstack((m_to_M, m_to_N))))

    # const vector, right side of eq.
    const = n * np.ones((2 * (n-1),1))

    return spsolve(coeff_mat.tocsr(), const).reshape((-1,1)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T18:00:06.897

我通常不会一直打死马，但碰巧我解决您的其他问题的非矢量化方法在事情变得大时有一些优点。因为我实际上是一次填充系数矩阵，所以很容易转化为COO稀疏矩阵格式，可以高效地转化为CSC并求解。以下是这样做的：

```
import scipy.sparse

def sps_solve(n) :
    # Solution vector is [N[0], N[1], ..., N[n - 2], M[1], M[2], ..., M[n - 1]]
    n_pos = lambda p : p
    m_pos = lambda p : p + n - 2
    data = []
    row = []
    col = []
    # p = 0
    # n * N[0] + (1 - n) * M[n-1] = n
    row += [n_pos(0), n_pos(0)]
    col += [n_pos(0), m_pos(n - 1)]
    data += [n, 1 - n]
    for p in xrange(1, n - 1) :
        # n * M[p] + (1 + p - n) * M[n - 1] - 2 * N[p - 1] +
        #  (1 - p) * M[p - 1] = n
        row += [m_pos(p)] * (4 if p > 1 else 3)
        col += ([m_pos(p), m_pos(n - 1), n_pos(p - 1)] +
                ([m_pos(p - 1)] if p > 1 else []))
        data += [n, 1 + p - n , -2] + ([1 - p] if p > 1 else [])
        # n * N[p] + (1 + p -n) * M[n - 1] - p * N[p - 1] = n
        row += [n_pos(p)] * 3
        col += [n_pos(p), m_pos(n - 1), n_pos(p - 1)]
        data += [n, 1 + p - n, -p]
    if n > 2 :
        # p = n - 1
        # n * M[n - 1] - 2 * N[n - 2] + (2 - n) * M[n - 2] = n
        row += [m_pos(n-1)] * 3
        col += [m_pos(n - 1), n_pos(n - 2), m_pos(n - 2)]
        data += [n, -2, 2 - n]
    else :
        # p = 1 
        # n * M[1] - 2 * N[0] = n
        row += [m_pos(n - 1)] * 2
        col += [m_pos(n - 1), n_pos(n - 2)]
        data += [n, -2]
    coeff_mat = scipy.sparse.coo_matrix((data, (row, col))).tocsc()
    return scipy.sparse.linalg.spsolve(coeff_mat,
                                       np.ones(2 * (n - 1)) * n) 
```

它当然比从向量化块构建它要冗长得多，就像 TheodorosZelleke 所做的那样，但是当你对这两种方法进行计时时会发生一件有趣的事情：

![在此处输入图像描述](../Images/82db3ee0f1be4cbe5c560d2db84646ba.png)

首先，这（非常）好，时间在两种解决方案中都是线性缩放的，正如人们对使用稀疏方法所期望的那样。但是我在这个答案中给出的解决方案总是更快，对于更大`n`的 s 更是如此。只是为了好玩，我还从另一个问题对 TheodorosZelleke 的密集方法进行了计时，它给出了这个很好的图表，显示了两种解决方案的不同缩放比例，以及多早，在某个地方`n = 75`，这里的解决方案应该是你的选择：

![在此处输入图像描述](../Images/95d1ab4b84352e5bd71f7d8e655f969d.png)

尽管我`scipy.sparse`严重怀疑使用 LIL 格式的稀疏矩阵，但我对真正弄清楚这两种稀疏方法之间的差异的原因知之甚少。通过将 TheodorosZelleke 的答案转换为 COO 格式，尽管代码非常紧凑，但可能会有一些非常微小的性能提升。但这留给OP练习！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:12:17.667

我之前在这里看过一些代码：http: [//jkwiens.com/heat-equation-using-finite-difference/](http://jkwiens.com/heat-equation-using-finite-difference/)他的函数实现了一种有限差分方法，使用 scipy 稀疏矩阵包求解热方程。

# javascript - javascript objects confusion

> ID：14380902
> 
> 赞同：-2
> 
> 时间：2013-01-17T14:09:23.967
> 
> 标签：javascript, node.js, express

> **Possible Duplicate:**
> [What is the purpose of NodeJS module.exports and how do you use it?](https://stackoverflow.com/questions/5311334/what-is-the-purpose-of-nodejs-module-exports-and-how-do-you-use-it)

I have the following code:

```
var express = require('express');
var app = module.exports= express();
require('./config/environment.js')(app, express, __dirname);
require('./routes/default.js')(app, __dirname);

module.exports = function (app, express, dirname) {
....
};

module.exports = function (app, dirname) {
....
}; 
```

what happened in this code. Second string says, that module.exports and app are the same object, right?

but in function(...) parts app pass as parameter and that code likes on "to object 'module' add method 'exports' and do it 2 times" I want to add some functions, which want to use inside each function (...), but can't because don't understand what happens in that constructions. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:34:27.523

为什么要分配 module.exports 三次？在您的代码中，module.exports 将首先等于调用 express 返回的内容。然后 module.exports 将等于您的函数（不是它返回的），并将接受 3 个参数。然后 module.exports 将等于您的最终函数（同样不是它返回的），带有 2 个参数。因此，在您的代码结束时 module.exports 将等于该最终功能。所以我看不出前两个任务需要什么。App 最后将等于 module.exports，因为 app 一直指向 module.exports。您是否希望将 app 作为参数传递给它并不重要，因为在将函数分配给 module.exports 之后，在上面的代码中，您实际上没有将 app 传递给函数。

我认为您要么在这里遗漏了代码，要么对您过去可能使用过的其他语言感到非常困惑。

如果您不清楚该语言，请查找 Douglas Crockford。

我希望这会有所帮助。

# regex - 用于在 Sublime Text 2 中增加数字的正则表达式

> ID：14380907
> 
> 赞同：2
> 
> 时间：2013-01-17T14:09:47.460
> 
> 标签：regex, sublimetext2

所以我已经使用`artisan`new为我的数据库播种了一些 ID `db:seed`，但现在我需要将所有 ID 增加 1。我知道如何找到一个数字，但我不知道如何在替换框中增加它（如果它是可能的）。

```
<?php
return array(
      array("title"=>'Paris',
        "country_id"=>0),
      array("title"=>'Lion',
        "country_id"=>0),
      array("title"=>'Nice',
        "country_id"=>0),
      array("title"=>'Nantes',
        "country_id"=>0),
      array("title"=>'Bordeaux',
        "country_id"=>0),
      array("title"=>'Montpellier',
        "country_id"=>0),
      array("title"=>'Berlin',
        "country_id"=>1),
         array("title"=>'Halle',
        "country_id"=>1),
           array("title"=>'Leipzig',
        "country_id"=>1),
             array("title"=>'Dredsen',
        "country_id"=>1),
     array("title"=>'Hamburg',
        "country_id"=>1),
     array("title"=>'Altona',
        "country_id"=>1),
      array("title"=>'Rome',
        "country_id"=>2),
      array("title"=>'Verona',
        "country_id"=>2),
      array("title"=>'Venice',
        "country_id"=>2),
      array("title"=>'Milan',
        "country_id"=>2),
      array("title"=>'Naples',
        "country_id"=>2),
      array("title"=>'Turin',
        "country_id"=>2),
        array("title"=>'Luzern',
        "country_id"=>3),
         array("title"=>'Zurich',
        "country_id"=>3),
          array("title"=>'Berne',
        "country_id"=>3),
           array("title"=>'Geneva',
        "country_id"=>3),
            array("title"=>'Basel',
        "country_id"=>3),
             array("title"=>'Lugano',
        "country_id"=>3)
    ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:24:42.050

我已经使用[Emmet sublime plugin](https://github.com/sergeche/emmet-sublime#available-actions)对此进行了测试。

安装后，在启用正则表达式的情况下进行搜索`\d`，然后只需点击`Ctrl`+`↑`即可将所有选定的数字加一。

# asp.net-mvc-3 - Constructing Datetime from 3 integers in MVC3

> ID：14380915
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:10:08.390
> 
> 标签：asp.net-mvc-3

I am new on MVC3 and not familiar with the unit testing part. I have been trying to construct Datetime with exception handling from accepting 3 integer value but the it fails the unit testing. Im not sure i am doing it correctly or not.

This is the controller part:

```
public DateTime MakeDate(string dateString)
    {
     DateTime myDate;
        if (DateTime.TryParseExact(dateString, "yyyy-MM-dd", new CultureInfo("en-US"), DateTimeStyles.None, out myDate))
        {
            return myDate;
        }
        return new DateTime();
    } 
```

And this is the unit Testing:

```
[TestMethod]
public void MakeDateConstructsADateTimeFromYearMonthAndDay()
{
    //Arrange
    var controller = new DateController();
    var expected = new DateTime(2014, 6, 30);

    //Act
    var result = controller.MakeDate(2014, 6, 30);

    //Assert
    Assert.AreEqual<DateTime>(expected, result);
}

[TestMethod]
public void MakeDateReturnsDefaultDateTimeIfInputDataInvalid()
{
    var controller = new DateController();
    var expected = new DateTime();

    //Act
    //June has only 30 days so this will cause an exception
    var result = controller.MakeDate(2014, 6, 31);

    //Assert
    Assert.AreEqual<DateTime>(expected, result);
 } 
```

Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:36:09.953

尝试将您的`MakeDate`功能更改为以下内容：

```
DateTime myDate;
if (DateTime.TryParseExact(dateString, "yyyy-MM-dd", new CultureInfo("en-US"), DateTimeStyles.None, out myDate))
{
    return myDate;
}
return new DateTime(); 
```

此外，您的`MakeDate`函数不使用`dr`参数，并且您指定格式的日期`yyyy-MM-dd`并使用`ParseExact`不同的格式 ( `yyyyMMdd`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:17:25.707

```
string date = "2014-06-30";
DateTime datetime = DateTime.ParseExact(date, "yyyyMMdd", CultureInfo.InvariantCulture); 
```

您的`date`字符串不是您在`ParseExact`.

你`yyyyMMdd`在应该使用的时候使用`yyyy-MM-dd`。

代码失败，因为字符串与格式不匹配。

# jquery - Customize ckeditor in apex 4.1

> ID：14380916
> 
> 赞同：0
> 
> 时间：2013-01-17T14:10:09.917
> 
> 标签：jquery, ckeditor, oracle-apex

I am using the basic richtext editor (CKEditor 3) in APEX 4.1.0.00.3\. I am looking for how to customize the editor toolbar. Specifically, how do I remove some items from the toolbar?

I am using the basic type of editor which only shows the bold, italic, underline, link and unlink toolbar items. I need to show **only the link and unlink items**.

I tried to hide the other items using jquery but it seems the document.ready fires before before the richtext area in my APEX page loads.

# javascript - jquery datatables获取id

> ID：14380918
> 
> 赞同：0
> 
> 时间：2013-01-17T14:10:19.740
> 
> 标签：javascript, jquery, datatable, initialization

我正在初始化`.dataTable()`以下方式：

```
$(document).ready(function(e) {
    var articles_table = $("table#datatable-articles").dataTable({
        'bProcessing': true,
        'bServerSide': true,
        'rowHeight': 'auto',
        "bAutoWidth": true,
        'sAjaxSource': '/admin/articles/data',
        sPaginationType: "full_numbers",
    }); 
```

然后，我试图获取其中的`id`值`tbody > tr > td:first`并将其保存在变量中，然后隐藏该字段。不走运，我尝试的一切都没有奏效。

```
 var ex = $('table#datatable-articles');
    if ( $.fn.DataTable.fnIsDataTable( ex ) ) {
        console.log(ex.find('tbody tr td:first'));
        ex.find('tbody tr td:first').css('backgroundColor', 'blue');
    } 
```

/

```
 articles_table.$('tbody tr:odd').css('backgroundColor', 'blue');
    console.log(articles_table.find('tbody tr td:first').val());
    articles_table.find('tbody tr td:first').html('1'); 
```

以上所有内容在 dom 就绪时执行，但随后`dataTable`被初始化并用其数据替换所有内容

基本问题是：如何从表数据中获取id值然后隐藏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:33:20.883

这就是我最终得到的结果，它有效......

里面`dataTable()`添加了以下内容

```
 'fnRowCallback': function(nRow, aData, iDisplayIndex, iDisplayIndexFull) {
            $(nRow).attr("data-id",aData[0]);
            return nRow;
        } 
```

# oauth-2.0 - Google Drive SDK alternateLink With OAuth2

> ID：14380919
> 
> 赞同：1
> 
> 时间：2013-01-17T14:10:25.487
> 
> 标签：oauth-2.0, google-drive-api, google-oauth

I am integrating google drive files docs,spreadsheets and preasentations with my app. I need some help about alternate link.

Files.get api includes a link called "alternateLink" which opens users file with compatible editor. But when i forward user to link if user is not logged in, google shows login screen before. I am asking about how can i overcome with login screen using OAuth2 mechanizm. Should i set a cookie or smt else ?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T13:35:02.450

AlternateLink 将始终要求用户登录其 Google 帐户。如果您想使用它，则必须公开共享该文档，此时不需要登录。

要使用 OAuth 2.0，您必须使用“downloadUrl”，您可以将 OAuth 2.0 访问令牌附加到 downloadUrl，如下所示：

```
authorizedDownloadUrl = downloadUrl + '&access_token=' + accessToken 
```

请注意，下载 URL 将在 24 小时后过期。

# c# - Capture keyboard inputs without a textbox

> ID：14380920
> 
> 赞同：2
> 
> 时间：2013-01-17T14:10:33.133
> 
> 标签：c#, string-parsing, magnetic-cards

I have a application that reads data from health cards and parse them for basic info like D.O.B., Health Card #, and names. Right now, I have a textbox that takes input from the card swiper and it works great, but I feel there could be a better approach for this.

I want to have a keyboard listener in the background of the application that captures input from the card swiper and parse the data without the need of a textbox. I figure I'll need a loop function in the Form1_Load that actively listens for keyboard inputs, prepare a buffer for the input, and then when a carriage return is detected, go ahead and parse the buffered data. When the parsing is done, clear the buffer.

My problem is I'm relatively new to C# and I don't know what I should use for listening to keyboard inputs without a textbox. Could someone point me in the right direction?

Here's my code in case if anyone's interested: [http://pastebin.com/q6AkghvN](http://pastebin.com/q6AkghvN)

Just a note, I followed the credit card swipe guide from [http://www.markhagan.me/Samples/CreditCardSwipeMagneticStripProcessing](http://www.markhagan.me/Samples/CreditCardSwipeMagneticStripProcessing) and modified it slightly for my usecase.

--- EDITED ---

Thanks Paul and everyone else for their help!

Here is my solution if anyone is interested:

```
private void frmMain_KeyPress(object sender, KeyPressEventArgs e)
    {
        lblStatus.Text = "Reading Card...";
        lblStatus.ForeColor = Color.Blue;
        if (e.KeyChar != (char)Keys.Enter)
        {
            buffer += e.KeyChar;
        }
        else
        {
            lblStatus.Text = "Parsing Card...";
            if (buffer.Contains('^') && buffer.Contains(';') && buffer.Contains('='))
            {
                try
                {
                    string[] cardData = buffer.Split(';');
                    string[] caretData = cardData[0].Split('^');
                    string[] nameData = caretData[1].Split('/');
                    string[] equalData = cardData[1].Split('=');
                    tBoxHealthCardNumber.Text = equalData[0];
                    tBoxDateOfBirth.Text = FormatBirthday(equalData[1]);
                    tBoxFirstName.Text = TrimName(nameData[1]);
                    tBoxLastName.Text = TrimName(nameData[0]);
                    tBoxDateTimeScanned.Text = DateTime.UtcNow.ToString("yyyy/MM/dd HH:mm");
                    e.Handled = true;
                }
                catch (Exception)
                {
                    throw;
                }
            }
            else
            {
                lblStatus.Text = "Error Reading Card";
            }

            buffer = "";
            lblStatus.Text = "Ready";
            lblStatus.ForeColor = Color.Green;
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:16:00.400

如果您将按键处理程序添加到表单，当焦点位于控件（例如文本框）上时，您将看不到按键。为了使表单即使在有焦点控件时也能看到按键，您还必须启用[KeyPreview](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview%28v=VS.90%29.aspx)属性。

然后，您可以根据需要添加处理程序`KeyDown`，`KeyPress`和/或`KeyUp`在表单上接收这些事件。

正如您在文档中看到的那样`KeyPreview`，如果您将该`Handled`属性设置为 true，则可以防止事件随后发送到焦点控件，即您可以隐藏某些关键事件，使其不被焦点控件看到。

# php - it displays wrong information after drop down option selected

> ID：14380923
> 
> 赞同：0
> 
> 时间：2013-01-17T14:10:40.800
> 
> 标签：php, html, mysqli

In code below I have a query which retrives all of the modules from db and then list them as options in a drop down menu. Now what is suppose to happen is that user selects a module from the drop down menu and submit. After submit it will display underneath the module the user has selectd.

The problem is that no matter which module the user has chosen from the drop down menu, it always states that the user has selected the `Advanced Web programming` module. My question is why is it always stating this and not instead displaying the correct module chosen?

Below is the VIEW SOURCE code:

```
<form action="" method="post">Module:
  <select name="module" id="modulesDrop">
    <option value="">Please Select</option>
    <option selected='selected' value='CHI2513_Systems Strategy_1'>CHI2513 - Systems Strategy</option>
    <option value='CHI2565_Ecommerce, Business and Technology_3'>CHI2565 - Ecommerce, Business and Technology</option>
    <option value='CHT2220_Interactive Systems_4'>CHT2220 - Interactive Systems</option>
    <option value='CHT2520_Advanced Web Programming_5'>CHT2520 - Advanced Web Programming</option>
  </select>
  <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
</form>
<form action="" method="post">
  <p> <strong>Selected Module:</strong>CHT2520 - Advanced Web Programming
    <input type='text' value='CHI2513_Systems Strategy_1' />
  </p>
  Asessments: <span class='red'>Sorry, You have No Assessments under this Module</span> 
```

Below is the written code:

```
$moduleactive = 1;
            $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

            $sqlstmt=$mysqli->prepare($sql);
            $sqlstmt->bind_param("i", $moduleactive);
            $sqlstmt->execute(); 
            $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);
            $sqlstmt->store_result();
            $sqlnum = $sqlstmt->num_rows();
            ?>
            Module: 
            <select name="module" id="modulesDrop">
                <option value="">Please Select</option>
                <?php
                while($sqlstmt->fetch()) { 
                    $ov = $dbModuleNo . "_" . $dbModuleName . "_" . $dbModuleId; 
                    if($ov == $_POST["module"]) 
                        echo "<option selected='selected' value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL; 
                    else 
                        echo "<option value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
                 } 
                ?>
            </select>
            <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
        </form>
        <?php
        if(isset($_POST['moduleSubmit'])) 
{

if($_POST["module"] != "") { ?>
        <form action="" method="post"> 
            <p>
            <strong>Selected Module:</strong><?php echo $dbModuleNo .' - '. $dbModuleName;?> <input type='text' value='<?php echo $_POST["module"];?>'>
            </p>
            <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:56:12.533

我对我的 PHP 有点生疏，但我相信这是因为该模块`Advanced Web Programming`在列表中的最后一个。您的变量`$dbModuleNo`和`$dbModuleName`每次运行 while 循环从数据库中获取行时都会更新，因此当您想要显示所选模块时，这些变量包含最近获取的数据，而不是您想要的所选数据。

尝试这样的事情（我在您现有的代码中添加了几行）：

```
<?php
$selectedText = "None";
while($sqlstmt->fetch()) { 
    $ov = $dbModuleNo . "_" . $dbModuleName . "_" . $dbModuleId; 
    if($ov == $_POST["module"]) 
        echo "<option selected='selected' value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
        $selectedText = $dbModuleNo .' - '. $dbModuleName;
    else 
        echo "<option value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
} 
?> 
```

然后后来...

```
<strong>Selected Module:</strong><?php echo $selectedText;?> 
```

# apache - installing mod_headers on Linux, apache 2.2.21

> ID：14380924
> 
> 赞同：2
> 
> 时间：2013-01-17T14:10:41.813
> 
> 标签：apache, mod-headers

Trying to install the mod_headers to be able to append a HTTP header with the Header directive. But the installation process doesn't show the header module as being installed.

Did the following steps. Switched over to the httpd installation and under the modules/metadata directory did:

```
 apxs -c mod_headers.c 
```

the so file is created under the metadata/.libs directory (not sure why). Added the module with:

```
 apxs -i -a -n mod_headers ./metadata/.libs/mod_headers.so 
```

Restarted apache and tried a dump of the modules but getting:

```
 httpd: Syntax error on line 54 of /www/fkwiki/apache/conf/httpd.conf: Can't locate API module structure `mod_headers' in file /www/fkwiki/apache/modules/mod_headers.so: /www/fkwiki/apache/modules/mod_headers.so: undefined symbol: mod_headers 
```

Got a warning in the installation of the module (i.e. apxs -i ....):

```
 Warning!  dlname not found in /www/fkwiki/apache/modules/mod_headers.so 
```

Anybody else have the same problem?

# opencl - Restrict number of GPUs for AMD OpenCL

> ID：14380927
> 
> 赞同：4
> 
> 时间：2013-01-17T14:11:09.627
> 
> 标签：opencl

Is there a solution to restrict the used number of GPUs for AMD OpenCL platforms? For NVIDIA platforms one can simply set the environment variable `CUDA_VISIBLE_DEVICES` to limit the set of GPUs available to OpenCL.

EDIT: I know, that I can create a context with a reduced set of devices. However, I am looking for ways to control the number of devices *for* the OpenCL platform from "outside".

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-13T18:48:24.147

AMD 具有适用于 Windows 和 Linux 的 GPU_DEVICE_ORDINAL 环境变量。这允许您指定希望在 OpenCL 应用程序中可见的 GPU 的索引。例如：

```
jprice@nowai:~/benchmark$ python benchmark.py -clinfo

Platform 0: AMD Accelerated Parallel Processing
 -> Device 0: Tahiti
 -> Device 1: Tahiti
 -> Device 2: Intel(R) Core(TM) i5-3550 CPU @ 3.30GHz

jprice@nowai:~/benchmark$ export GPU_DEVICE_ORDINAL=0
jprice@nowai:~/benchmark$ python benchmark.py -clinfo

Platform 0: AMD Accelerated Parallel Processing
 -> Device 0: Tahiti
 -> Device 1: Intel(R) Core(TM) i5-3550 CPU @ 3.30GHz 
```

更详细的描述可以在 AMD APP OpenCL 编程指南中找到（目前在第 2.4.3 节“屏蔽可见设备”）：http: [//developer.amd.com/wordpress/media/2013/07/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide-rev- 2.7.pdf](http://developer.amd.com/wordpress/media/2013/07/AMD_Accelerated_Parallel_Processing_OpenCL_Programming_Guide-rev-2.7.pdf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T17:46:43.193

OpenCL 主机 API 允许您在获取设备 ID 列表时指定设备数量

```
_int clGetDeviceIDs(    
    cl_platform_id platform,
    cl_device_type device_type,
    cl_uint num_entries,  //  Controls the minimum  number of devices
    cl_device_id *devices,
    cl_uint *num_devices) 
```

设备 id 指针 *devices 可用于创建具有特定数量设备的上下文。

这是规范所说的

> num_entries 是可以添加到设备的 cl_device 条目数。如果 devices 不为 NULL，则 num_entries 必须大于零。devices 返回找到的 OpenCL 设备列表。devices 中返回的 cl_device_id 值可用于识别特定的 OpenCL 设备。如果设备参数为 NULL，则忽略此参数。返回的 OpenCL 设备数是 num_entries 指定的值或类型与 device_type 匹配的 OpenCL 设备数中的最小值。num_devices 返回与 device_type 匹配的可用 OpenCL 设备的数量。如果 num_devices 为 NULL，则忽略此参数

```
cl_context clCreateContext(     
    const cl_context_properties *properties,
    cl_uint num_devices,   // Number of devices 
    const cl_device_id *devices,
    (voidCL_CALLBACK  *pfn_notify) (
        const char *errinfo, 
        const void *private_info, size_t cb, 
        void *user_data
    ),
    void *user_data,
    cl_int *errcode_ret) 
```

然后通过自己的设备队列对每个设备进行寻址。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-19T19:25:15.537

OpenCL 规范没有定义可移植的解决方案。

NVIDIA有你提到的解决方案。我认为 AMD 没有标准。您的 OpenCL 程序必须想出一种共享可用设备的方法。

请注意，AMD 确实有用于“设备裂变”的 OpenCL 扩展（其中一些在 OpenCL 1.2 中变得更加正式），用于在多个程序之间拆分单个设备（但这与您所要求的不同）。

# css - Fluid & Responsive Facebook Like Box

> ID：14380929
> 
> 赞同：1
> 
> 时间：2013-01-17T14:11:12.357
> 
> 标签：css, twitter-bootstrap, responsive-design, fluid-layout, facebook-likebox

i am using the "old" FB Likebox:

```
<div class="container">
    <div class="row-fluid">
        <div class="span12">
            <div id="fb-root"></div>
            <script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
            <script type="text/javascript">FB.init("394109690683544");</script>
            <fb:fan height="120px;" width="100%" logobar="false" stream="false" connections="12" css="http://myurl.com/facebook.css" profile_id="562615520421911" class="fb_iframe_widget "></fb:fan>
        </div>
    </div>
</div> 
```

how can i change the css to always have a 100% width? I need to use the box with twitter bootstrap and responisve.

thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:26:19.330

如果您查看生成的代码，它将无法正常工作

```
<fb:fan height="120px;" width="200%" ... 
```

翻译成

```
<iframe id="f13ed26db2962a6" class="fb_ltr" scrolling="no" name="f2625075f1fd254" style="border: medium none; overflow: hidden; height: 120px; width: 200px;" 
```

这意味着小部件仅读取 iframe 设置为 200px 而不是 200% 的值

编辑：似乎我可以用 jQuery 破解一下来实现这一点，但是因为`span`即使`display:block`我使用文档宽度将跨度设置为适当的宽度，我也无法将其设置为 100%，但是你可能需要将其更改为父 div 的宽度。再次hacky，但可能会让你开始......

[JSFiddle](http://jsfiddle.net/kaygee79/rYLzS/)

# ektron - Multivariate Testing in Ektron

> ID：14380930
> 
> 赞同：4
> 
> 时间：2013-01-17T14:11:18.590
> 
> 标签：ektron

I am working in Ektron 8.6.

I am working with Multivariate Experiment.

After setting an experiment, I could see proper results in experiment widget (both HITs and Conversions). But the issue is with multivariate_report table, it’s not updating HIT or Conversion over there. Problem if it’s not updated on the DB is that you will lose the results if you restart IIS (SESSION is lost). While digging deep into the same I could find that the GUID in table data is not matching with variant GUID. Seems that it’s a BUG with Ektron. I am using Version: 8.60 SP1(Build 8.6.0.060) of Ektron.

Did anyone else had similar issues with multivariate test?

# iphone - Basics Method Override

> ID：14380931
> 
> 赞同：1
> 
> 时间：2013-01-17T14:11:18.513
> 
> 标签：iphone, ios, objective-c, methods

First of all, Sorry. I'm not good at English. Hi. I'm beginner of iOS.

To learn Objective-c for the first time Define the class name and method name in the header file and declare the class object created above in the main.m file on implementation details. M calling the method does.

```
[NewPoint SetPoint: 3];
[NewPoint print]; 
```

But iOS studied, I suddenly was wondering iOS studied.

Without calling the method directly from the `main.m`, `appdelegate.m` method override you if you do not like this `[NewPoint SetPoint:3]` that is the exact reason why I wonder.

Why Running just override method not using [NewPoint SetPoint:3] like this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:15:19.870

出于学习目的，它被教导在 main.m 本身中创建类。

但是在实际的编程世界中，您遵循的是蓝图类，因此这些类是单独创建的，以便在整个应用程序中充分使用，并且其他类/对象能够使用它们。

类使您的代码与不同的类分开。AppDelegate 就是这样一个类，它最初是由一个项目提供的。

稍后您将创建自己的类，例如 Person、Employee、Box 等，每个类都有自己的属性、行为等。

我的感觉是在您的培训中，您被教导创建一个类和对象作为 NewPoint，后来它是在 AppDelegate 中创建的。现在您可以尝试使用一个名为 NewPoint 的不同类，并在 AppDelegate 中创建一个对象并使用它。

# python - 对多个列表中的唯一值进行排序

> ID：14380937
> 
> 赞同：0
> 
> 时间：2013-01-17T14:11:55.987
> 
> 标签：python, sorting, readline

我有以下问题：

```
>>> lines = tuple(open('/var/log/fail2ban.log', 'r'))
>>> for item in lines:
...     item = item.strip('\n')
...     if "fail2ban.actions:" in item and "[postfix]" in item and "Ban" in item:
...             item = item.split(' ')
...             print item
...
['2013-01-17', '11:03:51,752', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '87.111.253.157']
['2013-01-17', '11:10:42,612', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '37.206.77.26']
['2013-01-17', '11:23:08,674', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '37.2.185.188']
['2013-01-17', '12:40:44,997', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '37.2.185.188']
['2013-01-17', '13:28:38,006', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '194.106.26.177']
['2013-01-17', '13:43:56,959', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '70.27.53.95']
['2013-01-17', '14:42:36,601', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '95.120.42.12']
['2013-01-17', '14:45:35,147', 'fail2ban.actions:', 'WARNING', '[postfix]', 'Ban', '95.120.42.12'] 
```

我非常想知道如何过滤重复项（项目 [6]，在这种情况下为 ip），以便只打印唯一值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:15:12.990

您可以创建一个列表或一组您已经看过的 IP，然后在打印该行之前检查该列表。

像这样的东西：

```
lines = tuple(open('/var/log/fail2ban.log', 'r'))
seen = set()    
for item in lines:
  item = item.strip('\n')
  if "fail2ban.actions:" in item and "[postfix]" in item and "Ban" in item:
    item = item.split(' ')
    if item[6] not in seen:
      seen.add(item[6])
      print item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:16:07.343

```
>>> lines = tuple(open('/var/log/fail2ban.log', 'r'))
>>> seen = set()    
>>> for item in lines:
...     item = item.strip('\n')
...     if "fail2ban.actions:" in item and "[postfix]" in item and "Ban" in item:
...             item = item.split(' ')
...             if item[6] not in seen: 
...                 print item
...             else:
...                 seen.add(item[6]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:18:20.990

如果您只希望每个 IP 有一个条目并且没有结果是哪个条目，请尝试以下操作：

```
item_dict = dict()
lines = tuple(open('/var/log/fail2ban.log', 'r'))
for item in lines:
    item = item.strip('\n')
    if "fail2ban.actions:" in item and "[postfix]" in item and "Ban" in item:
            item = item.split(' ')
            item_dict[item[6]]=item[:-1]

print(item_dict) 
```

[编辑]：如果顺序很重要，您可以使用 OrderedDict。为此，只需更换

```
item_dict = dict() 
```

和

```
from collections import OrderedDict
item_dict = OrderedDict() 
```

[编辑 2]：如果您只需要一组符合您的条件的 IP，那么您应该使用一组 IP。

```
item_set = set()
lines = tuple(open('/var/log/fail2ban.log', 'r'))
for item in lines:
    item = item.strip('\n')
    if "fail2ban.actions:" in item and "[postfix]" in item and "Ban" in item:
            item = item.split(' ')
            item_set.add(item[6])

print('\n'.join(item_set)) 
```

根据定义，集合的每个元素都是唯一的。

# javascript - 在 javascript 中使用数组值定位表单元素

> ID：14380942
> 
> 赞同：1
> 
> 时间：2013-01-17T14:12:26.283
> 
> 标签：javascript, html, arrays, dom

我在 javascript 中有一个小表单，其中有两个具有相同类名的输入值。我知道你可以通过给它们 id 来定位它们，但是有没有办法使用数组值来定位它们？

```
 <td>
  <input class="inputtextb" type="text" name="adults" maxlength="3">&nbsp;Adults&nbsp;
<input class="inputtextb" type="text" name="children" maxlength="3">&nbsp;Children   above 5 years&nbsp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:14:58.660

您可以[`document.getElementsByClassName()`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName)为此使用：

```
var inputs = document.getElementsByClassName('inputtextb');

inputs[0] // the first input
inputs[1] // the second input 
```

如果这不起作用 -[我可以使用 getElementsByClassName](http://caniuse.com/getelementsbyclassname) - 你可以迭代所有`<input>`元素`document.getElementsByName()`并过滤掉你想要的元素；或使用 jQuery ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:25:12.587

使用以下代码：

```
var adults = document. getElementsByClassName('inputtextb')[0].value 
var children = document. getElementsByClassName('inputtextb')[1].value 
```

在 Firefox 3 中，您可以将其转换为数组，然后调用`forEach`它：

```
var inputVals = document.getElementsByClassName("inputtextb");
var elsArray = Array.prototype.slice.call(inputVals, 0);
elsArray.forEach(function(el) {
    console.log(el.tagName);
}); 
```

**注意：**它不返回一个数组，它返回一个`NodeList`对象。

# printing - 使用 PrintServer 和 PrintQueue 进行非常慢的网络打印

> ID：14380945
> 
> 赞同：2
> 
> 时间：2013-01-17T14:12:35.353
> 
> 标签：printing, network-printers

我正在开发一个 ASP.NET 应用程序，需要将文档发送到网络打印机。我已经利用 PrintServer 和 PrintQueue 来实现如下目的：

```
using System.Printing;

private void PrintTicket
{
  var server = "Network Server Name";
  var filePath = "File to Print";
  var printer = "Network Printer Name";

  var printerServer = new PrintServer(String.Format(@"\\{0}", server));
  var printQueue = printerServer.GetPrintQueue(printer);

  printQueue.AddJob("New Printing Job", filePath, false);
} 
```

可以找到网络打印机并执行打印作业。

但是，性能非常缓慢。执行 printQueue.AddJob() 方法时开始打印需要 5-10 秒。如果打印机连接到我的本地计算机，则根本没有性能问题。

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-17T09:49:17.397

而不是使用 PrintQueue 类，您可以简单地使用 File.Copy(filePath, printerDestination, true); 我已经尝试了这两个选项，即使用 printqueue 以及文件复制，与使用 printqueue 类相比，文件复制要快得多。

谢谢， 阿纳布

# c# - 在运行时加载程序集概念

> ID：14380946
> 
> 赞同：0
> 
> 时间：2013-01-17T14:12:36.627
> 
> 标签：c#, assemblies

加载程序集后，实例化它时：

```
Assembly asm = Assembly.LoadFile(@"c:\file.dll");
Type type = asm.GetType("DLLTYPE");
object instance = Activator.CreateInstance(type); 
```

C#如何知道类型？
从我的逻辑来看，dll应该有定义对象类型的标题。
那么为什么是`DLLTYPE`字符串呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:14:07.897

> C#如何知道类型？

您已将其作为参数传递：

```
Type type = asm.GetType("DLLTYPE"); 
```

> 那么为什么是“DLLTYPE”字符串呢？

它是您要实例化的命名空间和类名：

```
Namespace.ClassName 
```

请小心，因为如果您在类型名中输入错误，此方法将返回 null。如果要确保类型存在，可以使用以下重载：

```
Type type = asm.GetType("Namespace.ClassName", true); 
```

这将引发异常而不是返回 null，这将更容易调试，而不是您在该`Activator.CreateInstance`方法上获得的 NRE。

# python - 有效利用 in

> ID：14380948
> 
> 赞同：1
> 
> 时间：2013-01-17T14:12:42.210
> 
> 标签：python, python-3.x

我有一个包含大量元组的元组（准确地说是 1500 个元组），如下所示：

```
l = ( ("i",), ("i", "am"), ("im",), ("im", "here"), ("go",) ...) 
```

里面的物品`l`是独一无二的。

我希望在此列表中找到以下项目：

```
if i in l:
  do_something_with(i) 
```

如何使此查找有效？我应该排序`l`吗？以这种形式搜索列表是否更有效：

```
l = ( "i", "i am", "im", "im here", "go" ...) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T14:13:51.070

在列表和元组中查找总是低效的；改用 a `set()`：

```
lookupl = set(l) 
```

测试集合中的成员资格是恒定成本 (O(1))，而列表和元组成员资格测试具有线性成本 (O(n))。

# sql - 有点复杂的内部连接和求和查询

> ID：14380951
> 
> 赞同：0
> 
> 时间：2013-01-17T14:12:55.547
> 
> 标签：sql, ms-access, count, inner-join

我遇到了一个问题，如果你们能帮助我，我将不胜感激。

我们正在使用一个表（MS Access）来存储多个公司的项目计划，如下所示：

```
ID    PROJECT_NAME   COMPANY_NAME   MILESTONE_NAME   MILESTONE_TYPE 
```

我查询的目标是返回“适用”推出的数量。

推出是项目和公司的独特组合。例子：

```
Project 1 being executed in the Company A
Project 2 being executed in the Company A
Project 1 being executed in the Company B 
```

适用的项目是它的最后一个里程碑具有不同于“DUMMY”的 MILESTONE_TYPE 的任何项目。

适用的推出应如下所示：

```
ID    PROJECT_NAME   COMPANY_NAME   MILESTONE_NAME           MILESTONE_TYPE
1     Project 3      Company D      6.2 Rollout Completed    Applicable 
```

为了检索项目的最后一个里程碑，我使用以下 SQL：

```
SELECT Sheet1.[PROJECT_NAME], MAX(Sheet1.[MILESTONE_NAME])
FROM Sheet1
    INNER JOIN Sheet1 AS Sheet1_1 ON (Sheet1.[PROJECT_NAME] = Sheet1_1.[PROJECT_NAME])
        AND (Sheet1.[MILESTONE_NAME] = Sheet1_1.[MILESTONE_NAME])
GROUP BY Sheet1.[PROJECT_NAME]
ORDER BY Sheet1.[PROJECT_NAME] 
```

我需要您的支持的查询的预期结果是：

```
PROJECT_NAME  COUNT_OF_APPLICABLE_ROLLOUTS
Project A     5
Project B     6 
```

但是我完全不知道如何开始......有谁知道如何将所有内容放入 SQL 查询中？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:39:12.847

你可以试试这个：

```
 SELECT  myTable.*
FROM    (
        SELECT  DISTINCT COMPANY_NAME
        FROM    Sheet1
        ) CN
CROSS APPLY
        (
        SELECT  TOP 1 *
        FROM    Sheet1 myTable2
        WHERE   myTable2.COMPANY_NAME = CN.COMPANY_NAME
        ORDER BY
                MILESTONE_NAME DESC
        ) myTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:29:00.687

假设更大的“id”意味着稍后，以下查询返回有关最新非虚拟行的信息：

```
select p.*
from Sheet1.p join
     (select project_name, company_name, max(id) as maxid
      from Sheet1
      where Milestone_Name <> 'Dummy'
      group by project_name, company_name
     ) pc
     on p.project_name, pc.company_name 
```

（注意：我没有对此进行测试，所以它可能有语法错误。）

# asp.net - Response.Redirect 不起作用

> ID：14380952
> 
> 赞同：0
> 
> 时间：2013-01-17T14:13:01.680
> 
> 标签：asp.net

我不确定为什么这不起作用。

我正在验证登录的人是否具有正确的安全性，如果他们不希望将他们重定向到另一个页面。

如果它们确实具有正确的安全性，则页面上的其余代码将继续执行。

当我单步执行代码时，它确实执行了 response.redirect，但页面继续加载。

```
strSQL = "Select * from tblSecurity Where SFID = '" & Right(My.User.Name, 4) & "' and (SecurityLevel = '900' or SecurityLevel = '850')"
ds = objData.SQLExecuteDataset(strSQL, CommandType.Text)
If ds.Tables(0).Rows.Count = 0 Then
    Response.Redirect("~/NotAuthorized.aspx", False)
End If 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T14:15:37.187

这正是你告诉它要做的事情。

`false`作为[第二个参数](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx#parameters)传递使其不会终止当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:23:27.223

不要给表值等于零...给出像 ds.Tables(0).Rows.Count > 0 这样的验证...这意味着如果给定的登录详细信息是正确的，则表正在保存记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-19T13:40:13.170

我尝试了所有这些以及更多......我在这里只记下我的解决方案以供后代和我自己以后参考。我在打开大约 6 个 VS 项目时遇到了这个问题，每个项目都在自己的 VS 实例中。一旦我关闭了除了一个项目之外的所有项目，问题就消失了。我不确定导致这个特定问题的其他项目是什么，但显然 VS 不喜欢自己打开太多。

# facebook-like - 如何将 google 个人资料或 facebook 个人资料链接添加到我的网站..？

> ID：14380955
> 
> 赞同：-1
> 
> 时间：2013-01-17T14:13:15.830
> 
> 标签：facebook-like, profile, google-plus

如何将[google 个人资料](http://plus.google.com/116791117116412845805/)或[facebook 个人资料](http://www.facebook.com/ProgrammingPad)链接添加到我的网站..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:18:01.037

一个简单的 html 链接应该没问题：

```
<a href="http://plus.google.com/116791117116412845805/">My Google Profile</a>
<a href="http://www.facebook.com/ProgrammingPad">My Facebook Profile</a> 
```

如果您想要更多功能，还可以为[Google 个人资料徽章](https://developers.google.com/+/plugins/badge/)和[Facebook 个人资料徽章生成 html 代码。](https://www.facebook.com/badges/)

如果您的网站由 Blogger 或 WordPress 之类的工具管理，则存在许多插件可以轻松生成链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:24:25.427

按照@poiuytrez 所说的话。

此外，在添加您的 Google Plus 个人资料时...您还可以使用[rel="author"](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1408986)标签。并从您的 G+ 个人资料中添加您的网站链接“[投稿人”](http://plus.google.com/me/about/edit/co)部分。

```
<a href="http://plus.google.com/116791117116412845805/" rel="author">My Google Profile</a> 
```

这样，您的个人资料可能会作为作者出现在搜索结果中。见下文。 ![在此处输入图像描述](../Images/37d9bb828134a1e85d1144975b5994d1.png)

# json - .3DS 到 OpenGL-ES 2.0

> ID：14380960
> 
> 赞同：0
> 
> 时间：2013-01-17T14:13:38.720
> 
> 标签：json, opengl-es, opengl-es-2.0

我会问你什么是 OpenGL ES 限制。这是我的情况：我必须创建一个 .3DS 到 .JSON 转换器（转换*后 .JSON 必须可以从 OpenGL ES 库中读取*）。

示例：OpenGL ES 不能管理超过 x 的灯光，纹理不能超过 xy 像素，ecc。

```
Could someone help me to figure out these type of limitations? 
```

# c# - 分解项目创建方程链的链（可能使用递归）

> ID：14380961
> 
> 赞同：6
> 
> 时间：2013-01-17T14:13:42.090
> 
> 标签：c#, algorithm, recursion, struct, solver

我一直在用 C# 来创建一个软件（供伪个人使用）的想法，但遇到了实现问题。嗯......也许它们是我不知道的**设计**问题，但我就是想不通。

## 思想、期望和一般伪算法

考虑我们有以下“数据库”：

```
Foo + Bar = Foobar
Baz + Qux = Bazqux
Foobar + Bazqux = Foobarbazqux 
```

这些是创建上述*项目的**食谱*。使用一个和一个，我们创建了一个*结果*，该结果可以进一步成为另一个*配方的**成分*。*`Foo``Bar``Foobar`*

 ***现在认为我们需要弄清楚该项目的完整配方`Foobarbazqux`。对于人类的思想和智力来说，这相对容易：

```
We need Foobarbazqux
Foobarbazqux = Foobar + Bazqux
    Foobar = Foo + Bar
    Bazqux = Baz + Qux

Foobarbazqux = Foo + Bar + Baz + Qux 
```

当然，如果并且当我们拥有所有可用的*成分*时，我们可以“运行”*配方*并按照上面几段的顺序执行每个*配方来创建项目。*（就像：我们首先创建`Foobar`，然后`Bazqux`，然后将两者结合以获得最终结果。）

但在实时，数据库要**大得多**。我想这就是计算机应该发挥作用的地方。使用工作软件，机器可以轻松找到所有成分和执行（制作）步骤并将其提供给用户，因此我们不需要通读**所有**条目手。

## 实施（...尝试）

我曾想过使用 C# 来实现这个软件。命令行项目，没有什么闪亮的东西，只是纯粹`stdio`的 .

首先，当然，我需要定义*item*。（*注意：*现在我正在考虑使用结构，但如果需要，我可以将它们“升级”为类。“数据库”是从稍后将制作的某种顺序文本文件初始化的。“数据库”没有改变或在执行期间或之后以任何方式编写，一旦加载，它就是只读的。）当然，我需要定义*recipe*。

```
struct Item
{
    public string Name;
}

struct Recipe
{
    public Item Result;
    public Item[] Ingredients;
} 
```

这两个结构保存在（默认类）的通用`static` `List<>`字段中。`Program`

在入口点，我们定义了一些项目和一些测试配方：

```
items.Add(new Item { Name = "Foo" });
items.Add(new Item { Name = "Bar" });
items.Add(new Item { Name = "Baz" });
items.Add(new Item { Name = "Qux" });
items.Add(new Item { Name = "Foobar" });
items.Add(new Item { Name = "Bazqux" });
items.Add(new Item { Name = "Foobarbazqux" });

recipes.Add(new Recipe
{
    Result = GetItem("Foobar"),
    Ingredients = new Item[] { GetItem("Foo"), GetItem("Bar") }
});

recipes.Add(new Recipe
{
    Result = GetItem("Bazqux"),
    Ingredients = new Item[] { GetItem("Baz"), GetItem("Qux") }
});

recipes.Add(new Recipe
{
    Result = GetItem("Foobarbazqux"),
    Ingredients = new Item[] { GetItem("Foobar"), GetItem("Bazqux") }
}); 
```

因为项目是由他们的`Name`领域主键，`GetItem`只是一个`List.Find<>`快捷方式：

```
private static Item GetItem(string _name)
{
    return Program.Items.Find(match => match.Name == _name);
} 
```

所以现在，数据库已经设置好了。我意识到我需要使用某种递归方法来获取所有成分，但这就是我遇到问题的地方。

考虑以下第一次尝试（这不是递归的，只会“深一层”）：

```
string search = "Foobarbazqux";
SearchRecipe(search); 
```

```
private static void SearchRecipe(string _search)
{
    List<Recipe> item_recipes = Program.Recipes.FindAll(match => match.result.Name == GetItem(search).Name);

    foreach (Recipe recp in item_recipes)
    {
        Console.WriteLine("-------------");
        Console.WriteLine("Ingredients: ");

        foreach (Item ingredient in recp.Ingredients)
        {
            Console.WriteLine(ingredient.Name);
        }
    }
} 
```

这会产生以下输出，即，没有递归，非常好并且可以预期：

```
-------------
Ingredients:
Foobar
Bazqux 
```

所以对于递归，我修改了这样的代码：

```
 foreach (Item ingredient in recp.Ingredients)
    {
+++     if (recipes.FindAll(match2 => match2.Result.name == Ingredient.name).Count != 0)
+++     {
+++         SearchRecipe(ingredient.Name);
+++     }

        Console.WriteLine(ingredient.Name);
    } 
```

现在输出如下：

```
| -------------
| Ingredients: 
* -------------
* Ingredients: 
* Foo
* Bar
| Foobar
@ -------------
@ Ingredients:
@ Baz
@ Qux
| Bazqux 
```

当我现在理解我的代码时，我看到了会发生什么。标有 的行`*`是 的递归`Foobar`，`@`是 的递归`Bazqux`并且`|`是原始方法调用的输出。但这不是……有点像我想要实现的输出，因为它不容易被理解并且……通常是不正确的。

## 预期输出和问题

我可视化的输出类似于以下内容（当然“额外”状态行是可忽略的）：

```
Searching for: Foobarbazqux
1 recipe found.
-----
1 Foobarbazqux = 1 Foobar + 1 Bazqux
1 Foobar = 1 Foo + 1 Bar
1 Bazqux = 1 Baz + 1 Qux
1 Foobarbazqux = 1 Foo + 1 Bar + 1 Baz + 1 Qux

1 Foo + 1 Bar => 1 Foobar
1 Baz + 1 Qux => 1 Bazqux
1 Foobar + 1 Bazqux => 1 Foobarbazqux
-----
Exit. 
```

这就是我所说的打破*项目**创建*配方链......或者......我不**称之为**，但**想象一下**，参考问题的标题。所以程序的工作原理是：

1.  用户输入他们正在搜索的“最终”*项目*`Foobarbazqux`（在我们的示例中）
2.  该程序对数据库进行了足够多次的破坏，因此首先找到了搜索*项目的**成分*，然后递归（？）更深，直到它只找到无法从其他人“制作”的亚原子*成分*：它们不是任何.**`Result``Recipe`**
***   （同时工作）输出显示。**

 ***注意：*更适合真实场景，但存在额外的实施差距：许多项目都有多个可以创建它们的配方。

我想**寻求**的是建议和帮助。我慢慢地想说服自己这个程序是**不可写**的（这只是某种绝望的强烈抗议）并且我的想法存在*设计*问题。但我仍然希望，在界限内，我们不需要花哨的、尚未创建的人工智能系统来解决这个……有点低估的问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:29:20.523

第二个答案，对于“从头开始重写”的方法。如果只是给出没有先前代码的问题陈述，这或多或少是我会怎么做的。

```
abstract class Item
{
    public string Name { get; private set; }
    public abstract IEnumerable<Item> Ingredients { get; }
    public abstract IEnumerable<Item> ParseRecipe();

    protected Item(string name)
    {
        Name = name;
    }

    public static Item GetItem(string _name)
    {
        return items.Find(match => match.Name == _name);
    }
}

class Atom : Item
{
    public Atom(string name) : base(name) { }

    public override IEnumerable<Item> Ingredients { get { return null; } }
    public override IEnumerable<Item> ParseRecipe()
    {
        return new[] { this };
    }
}

class Recipe : Item
{
    public Recipe(string name, params Item[] ingredients) : base(name)
    {
        _ingredients = ingredients;
    }
    public Recipe(string name, params string[] ingredients) : base(name)
    {
        _ingredients = ingredients.Select(x => Item.GetItem(x));
    }
    private IEnumerable<Item> _ingredients;
    public override IEnumerable<Item> Ingredients { get { return _ingredients;} }
    public override IEnumerable<Item> ParseRecipe()
    {
        Console.WriteLine("1 " + this.Name + " = " 
                                 + String.Join(" + ", this.Ingredients.Select(x => "1 " + x.Name)));
        var components = new List<Item>();
        foreach(var ing in Ingredients)
        {
            components.AddRange(ing.ParseRecipe());
        }

        return components;
    } 
} 
```

像这样使用：

```
void Main()
{
    items.Add(new Atom("Foo"));
    items.Add(new Atom("Bar"));
    items.Add(new Atom("Baz"));
    items.Add(new Atom("Qux" ));
    items.Add(new Recipe("Foobar", "Foo", "Bar"));
    items.Add(new Recipe( "Bazqux", "Baz", "Qux" ));
    items.Add(new Recipe( "Foobarbazqux", "Foobar", "Bazqux" ));

    string search = "Foobarbazqux";
    var item = Item.GetItem(search);
    Console.WriteLine("1 " + item.Name + " = " 
                            + String.Join(" + ", item.ParseRecipe().Select(x => "1 " + x.Name)));

} 
```

结果是：

```
1 Foobarbazqux = 1 Foobar + 1 Bazqux
1 Foobar = 1 Foo + 1 Bar
1 Bazqux = 1 Baz + 1 Qux
1 Foobarbazqux = 1 Foo + 1 Bar + 1 Baz + 1 Qux 
```

* * *

与原始代码相比，此方法的主要优势在于`abstract class Item`. 有了这个，我们只关心初始化时`Atom`s和s的区别。`Recipe`之后，所有内容都被视为`Item`. 这意味着递归变得更加简单，因为我们不关心当前项目`Ingredients`是原子的、recipies 还是它们的混合。这也意味着您可以调用`SearchRecipe()`任何东西，而不必检查它是否真的是`Recipe`第一个。 *（请注意，为了在这种情况下获得更好的输出，我稍微编辑了上面的代码。）*

这对于 a 是不可能的`struct`，因为它们不能相互继承，因此不能被视为父类型。您*可以*声明`interface`它们都将实现，但是根据[this](https://stackoverflow.com/questions/521298/when-to-use-struct-in-c)，当您将其转换为接口时，您会失去大部分内存优势`struct`，而我们将一直这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:43:53.370

求解时，我会将所有成分 = 成分 [] 加载到内存中。我认为这应该不是什么大问题。

首先想到的是您需要一个最短路径算法：由于一个食谱可以分成多个其他食谱，您可能正在寻找最少数量的成分并希望确保它完成。

Dijkstra 算法的标准实现将所有叶子作为目标来解决，我认为（或者这是一个变体？）并且还可以确保你不会绕圈子跑。

然后......你可以使用路径来生成你想要的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:06:14.687

我确信总体上有更好的设计，但这里有一个小的修改，可以产生你想要的输出（或多或少）：

```
public static IEnumerable<IEnumerable<Item>> SearchRecipe(string _search)
{
    List<Recipe> item_recipes = recipes.FindAll(match => match.Result.Name == Item.GetItem(_search).Name);

    var ingredients = new List<IEnumerable<Item>>();

    foreach (Recipe recp in item_recipes)
    {

        foreach (Item ingredient in recp.Ingredients)
        {
            if (recipes.FindAll(match2 => match2.Result.Name == ingredient.Name).Count != 0)
            {
                ingredients.Add(SearchRecipe(ingredient.Name).SelectMany(x => x));
            }
            else
            {
                ingredients.Add(new[] { ingredient });
            }
        }
        Console.WriteLine(recp.Result.Name + " = " + String.Join(" + ", ingredients.SelectMany(x => x.Select(y => y.Name))));
    }
    return ingredients;
} 
```

产生：

```
Foobar = Foo + Bar
Bazqux = Baz + Qux
Foobarbazqux = Foo + Bar + Baz + Qux 
```*****

# android - What is the best practice to receive application logs of my app in an error case?

> ID：14380962
> 
> 赞同：0
> 
> 时间：2013-01-17T14:13:48.793
> 
> 标签：android

I want to enable some error report in my app, for that I am searching for a way which works in devices higher than api level 8

My current implementation does not work on a Android 4.1.1 device, there is no action when the user presses the error report button. On a device 2.2, 2.3 and 4.0.4 it shows the different email options.

The action method in my code looks like this

```
public void startSendErrorAction(View view) {
    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType( "text/plain" );
    intent.putExtra( Intent.EXTRA_EMAIL, new String[]{"my@email.de" });
    intent.putExtra( Intent.EXTRA_SUBJECT, "PDiXAttach LogReport from " + DateTime.now());
    intent.putExtra( Intent.EXTRA_TEXT, getLogContent() );

    startActivity(intent);        

} 
```

The getLogContent Method retrieves the application log entries with the logcat -d option. But it currently does not work on the device

```
Hersteller: samsung
Modell: GT-N7100
Marke: samsung
Version: 4.1.1 (REL) 
```

Here the getLogContent-Method

```
public String getLogContent() {
    StringBuffer sb = new StringBuffer();
    String separator = System.getProperty( "line.separator" );
    Process process;
    try {
        process = Runtime.getRuntime().exec( "logcat -d" );
        BufferedReader bufferedReader = new BufferedReader(
                                                            new InputStreamReader( process.getInputStream() ) );
        String line;
        while( (line = bufferedReader.readLine()) != null ) {
            sb.append( line );
            sb.append( separator );
        }
        Log.d( TAG, "retrieve log content size is " + sb.length() );

    }
    catch( IOException e ) {
        Log.e( TAG, "error while retrieving logfile of application" + e.getMessage() );
    }

    return sb.toString();

} 
```

Does someone know what might be the reason.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:16:35.443

[ACRA](http://code.google.com/p/acra) does an excellent job of what you want, and works on all android versions that I've bothered using it on. It provides way more details than the Google Play reports, and can be very helpful in tracking down bugs remotely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:31:16.257

You can also use [Alogcat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=en) for runTime crashes.

# sql - 根据组的结果更新表

> ID：14380964
> 
> 赞同：0
> 
> 时间：2013-01-17T14:13:55.813
> 
> 标签：sql, oracle

根据组的结果更新表

我正在尝试解决一个棘手的更新问题。有两个表包含相同的三列以及其他不同的列，如下所示：

`Table1 {pers_id, loc_id, pos, ... }`

`Table2 {pers_id, loc_id, pos, ... }`

没有一个字段是唯一的。前两个字段共同将表（或表）中的记录标识为属于同一实体。Table1 可以有 15 条记录属于一个实体，而 table2 可以有 4 条记录属于同一实体。第三列“pos”是从 0 到任何值的索引，这是我要更新的列。

在 Table1 和 Table2 中，pos 列从 0 开始，并根据用户选择递增，因此在示例中（table1 中有 15 条记录，table2 中有 4 条记录），table1 包含 0 - 14 的 'pos' 值，而 Table2包含 0-3 的“pos”值。

我想用 Table2 中类似实体的计数结果来增加 Table1 中的 pos 字段。这是正确给我table2结果的sql语句：

`select table2.pers_id, table2.loc_id, count(*) as pos_increment from table2 group by table2.pers_id, table2.loc_id;`

在示例中，更新的最终结果（table1 中的 15 条记录和 table2 中的 4 条记录）将是 Table1 中同一实体的所有记录都增加 4（特定实体分组的结果）。0 将更改为 4、15 更改为 19 等。

这可以在一个声明中实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:45:02.793

由于您只需要增加`pos`字段，因此解决方案非常简单：

```
update table1 t1
set    t1.pos = t1.pos + 
   (select count(1)
    from   table2 t2
    where  t2.pers_id = t1.pers_id
    and    t2.loc_id  = t1.loc_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:19:13.933

是的，这是可能的，您可以对其中一些更新使用 MERGE，并且有一些方法可以将更新和子选择之间的值关联起来。我过去曾这样做过，但这很棘手，而且我没有现有的例子。

您可以在此站点上找到几个示例，一些用于 Oracle，一些用于其他数据库，只需稍作修改即可使用。

# c# - 如何将搜索结果从数据库传递到 DataGridView？

> ID：14380966
> 
> 赞同：1
> 
> 时间：2013-01-17T14:14:05.017
> 
> 标签：c#, winforms, datagridview

如上。用户输入关键字并单击搜索按钮以在数据库中搜索一行/行，然后搜索应返回 DataGridView 表单中的行/行。我已经有一个现有的`DataGridView dataGridView1`那么我如何利用`dataGridView1`来显示行/行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:28:29.793

这里最简单的答案是“将其设置为您的数据源”，即

```
dataGridView1.DataSource = theSearchResults; 
```

如果data ( ) 是一个，或者*提供**一个*; ，这将起作用。***并且***可以获取结果的元数据（可以通过第一行（如果有）、与 indexer 关联的*类型*或实现）。`theSearchResults``IList``IListSource`*`IList`**`public SomeType this[int index] {get;}``ITypedList`***

 ***用人的话说：

*   如果数据是简单的东西，例如*向量*（一维，0索引数组），a`List<T>`等，它将起作用
*   它适用于大多数至少有一行并且是同质的列表/集合（所有行都是相同的基本类型）
*   它适用于`DataSet`/`DataTable`
*   还有很多其他的东西，但不是*全部****

# linux - 促进 arm 的交叉编译，尽管在 user-config.jam 中定义了工具集，但仍无法识别

> ID：14380969
> 
> 赞同：7
> 
> 时间：2013-01-17T14:14:13.413
> 
> 标签：linux, boost, arm, cross-compiling

我正在尝试从运行 Linux 的 PC 交叉编译用于飞思卡尔 ARM 处理器板的 boost 1.52.0。

基于关于[交叉编译 boost](http://www.boost.org/boost-build2/doc/html/bbv2/tasks/crosscompile.html)的（相当少的）文档，我设置了一个 user-config.jam 文件，内容如下：

```
using gcc : arm : /mnt/lv1/src/ROM1210/cross_compiler/arm-fsl-linux-gnueabi/bin/arm-fsl-linux-gnueabi-g++ ; 
```

然后我跑了

```
bootstrap.sh --prefix=`realpath ../tools`
./b2 toolset=gcc-arm 
```

结果是：

```
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/tools/gcc.jam:107: in gcc.init from module gcc
error: toolset gcc initialization:
error: version 'arm' requested but 'g++-arm' not found and version '4.3.2' of default 'g++' does not match
error: initialized from
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/build/toolset.jam:39: in toolset.using from module toolset
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/build-system.jam:481: in process-explicit-toolset-requests from module build-system
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/build-system.jam:562: in load from module build-system
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/kernel/modules.jam:283: in import from module modules
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/tools/build/v2/kernel/bootstrap.jam:142: in boost-build from module
/mnt/lv1/src/ROM1210/extras/boost_1_52_0/boost-build.jam:17: in module scope from module 
```

运行 b2 并`--debug-configuration`提供很少的额外信息，除了确认正在读取正确的 user-config.jam 文件。

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:49:32.407

原来加载的不是我的 user-config.jam 文件，而是一个与 boost 发行版一起打包的文件，文件名非常相似。当出现问题时，总是要仔细检查这些东西！

# javascript - yuglify JavaScript 压缩器移除条件编译

> ID：14380971
> 
> 赞同：0
> 
> 时间：2013-01-17T14:14:22.077
> 
> 标签：javascript, conditional-compilation, yui-compressor

我已经从[https://github.com/yui/yuglify](https://github.com/yui/yuglify)下载了 Yahoo JavaScript Uglify (yuglify) ，我打算将它用于托管在 apache 服务器上的一些 PHP 项目的 JS 和 CSS 压缩。尝试使用以下原始内容缩小文件：

```
var _cmFrameList = new Array ();    // a pool of reusable iframes
var _cmFrameListSize = 0;           // keep track of the actual size
var _cmFrameIDCount = 0;            // keep track of the frame id
var _cmFrameMasking = true;         // use the frame masking

// disable iframe masking for IE7
/*@cc_on
    @if (@_jscript_version >= 5.6)
        if (_cmFrameMasking)
        {
            var v = navigator.appVersion;
            var i = v.indexOf ("MSIE ");
            if (i >= 0)
            {
                if (parseInt (navigator.appVersion.substring (i + 5)) >= 7)
                    _cmFrameMasking = false;
            }
        }
    @end
@*/

var _cmClicked = false;             // for onClick 
```

但是得到了这个：

```
var _cmFrameList=new Array,_cmFrameListSize=0,_cmFrameIDCount=0,_cmFrameMasking=!0,_cmClicked=!1 
```

在原始文件的内容中，有一些条件编译代码需要在较旧的 IE 浏览器上运行（注释行以 @cc_on、@if、@end 等开头）。似乎 yuglify 将这些条件编译行视为简单注释，因此将其全部删除。

出于好奇，我也在同一个文件（[https://github.com/yui/yuicompressor/downloads](https://github.com/yui/yuicompressor/downloads)）上测试了 yuicompressor，似乎所有条件编译代码都完好无损。甚至换行符仍然存在：

```
var _cmFrameList=new Array();var _cmFrameListSize=0;var _cmFrameIDCount=0;var _cmFrameMasking=true;
/*@cc_on
    @if (@_jscript_version >= 5.6)
        if (_cmFrameMasking)
        {
            var v = navigator.appVersion;
            var i = v.indexOf ("MSIE ");
            if (i >= 0)
            {
                if (parseInt (navigator.appVersion.substring (i + 5)) >= 7)
                    _cmFrameMasking = false;
            }
        }
    @end
@*/
var _cmClicked=false; 
```

如果没有这些条件编译行，旧的 IE 浏览器就会出现乱码。是否可以在不删除的情况下使用 yuglify？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-11T20:47:24.590

通过使用 eval 命令的一些解决方法，找到了解决它的方法。

首先，我创建了这些全局变量：

```
var is_IE_browser = eval('/*@cc_on !@*/false');
var jscript_version = (is_IE_browser) ? eval("/*@cc_on @_jscript_version @*/") : (0);
var IE_version = (is_IE_browser) ? (get_IE_version()) : (0); 
```

然后，我创建了这个函数：

```
function get_IE_version(){
    var IE_version;
    if(jscript_version == 5.6 || (jscript_version == 5.7 && navigator.userAgent.toLowerCase().indexOf("msie 6.") != -1)) {
        IE_version = 6;
    } else if(jscript_version == 5.7){
        IE_version = 7;
    } else if(jscript_version == 5.8){
        IE_version = 8;
    } else if(jscript_version == 9){
        IE_version = 9;
    } else if(jscript_version == 10){
        IE_version = 10;
    } else {
        IE_version = 0;
    }
    return IE_version;
} 
```

通过这样做，现在我可以使用上面的变量将所有条件编译代码 (cc_on) 替换为一些条件。

如果浏览器是 IE，变量“is_IE_browser”将返回 true，否则返回 false。

如果浏览器是 IE，变量“IE_version”将返回 IE 版本号，如果不是，则返回零。

使用此代码，我可以可靠地检测大多数 IE 浏览器（IE6 除外，它需要对浏览器用户代理数据进行一些搜索，并且容易受到浏览器嗅探的影响，但我可以忍受）。

这样，我可以很好地检测旧浏览器，并继续使用 yuglify 而不会损坏我的 JS 文件。

# android - 画布旋转问题

> ID：14380973
> 
> 赞同：0
> 
> 时间：2013-01-17T14:14:43.520
> 
> 标签：android, rotation, android-canvas

我正在尝试使用 google map v2 旋转视图

我使用了一些与谷歌地图 v1 配合良好的小库

问题是旋转没有效果。

代码片段：

```
@Override
protected void dispatchDraw(Canvas canvas) {
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.rotate(-mHeading, getWidth() * 0.5f, getHeight() * 0.5f);
    mCanvas.delegate = canvas;
    super.dispatchDraw(mCanvas);

    canvas.restore();
} 
```

mHeading - 天使（非 0）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:07:08.363

这是不可能的，因为谷歌地图 v2 使用 SurfaceView 进行地图渲染

# android - Android :service 读取套接字响应

> ID：14380975
> 
> 赞同：1
> 
> 时间：2013-01-17T14:14:50.157
> 
> 标签：android, sockets, service

我正在开发一个应用程序，其中我有 12 位字节数组来读取模拟器上按钮的状态。我在套接字上写这些字节数组以获得响应。我想持续监控这个结果，并希望在值发生变化时得到通知。目前我正在使用 Timer 做同样的事情，每 10 秒运行一次，现在我想做的是运行相同的方法来监控响应，但使用 Android 服务。

```
try {
            byte[] data1 = new byte[1024], packet1 = 
                { 
                    (byte) 0x00,(byte) 0x00,(byte) 0x00, 
                    (byte) 0x00,(byte) 0x00,(byte) 0x06, 
                    (byte) 0x01,(byte) 0x01,(byte) 0x00,
                    (byte) 0x00,(byte) 0x00,(byte) 0x19
                };

            o.write(packet1);
            i.read(data1, 0, 1024);

            byte_to_hex = ConversionMethods.bytesToHex(data1).substring(18, 26);

            char[] arr = byte_to_hex.toCharArray();
            for (int i = 0; i < arr.length - 1; i += 2) 
            {
                char temp = arr[i];
                arr[i] = arr[i + 1];
                arr[i + 1] = temp;
            }

            swapped_result=new String(arr);
            result = ConversionMethods.hexStringToNBitBinary(swapped_result, 32);

        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        this.runOnUiThread(Timer_Tick); 
```

在 Timer_Tick 我设置 ToggleButton`on|off`基于 reslut 这样

```
char[] c=result.toCharArray();
int count=0;
for (int i=0;i<result.length();i++)
{
    count++;
    char j=c[i];

    if(count==1)
        toggleButton=dimmerLight1;
    else if(count==2)
        toggleButton=fanDimmer2;
    else if(count==3)
        toggleButton=fanDimmer1;
    if(j=='1')
        toggleButton.setChecked(true);
    else
        toggleButton.setChecked(false); 
} 
```

我如何使用服务来实现这个？任何想法和建议将不胜感激
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:44:25.170

这是编写服务的一个很好的例子，其功能与您的任务非常相似（“服务将在启动时启动并定期获取数据。该服务将由将自身绑定到服务的活动使用。活动将允许请求服务的最新数据。”）[http://www.vogella.com/articles/AndroidServices/article.html#tutorial_ownservice](http://www.vogella.com/articles/AndroidServices/article.html#tutorial_ownservice)

# sql - SQL 错误：ORA-00904: : CREATE AS SELECT 中的标识符无效

> ID：14380983
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:22.920
> 
> 标签：sql, oracle

我正在尝试从 Oracle SQL Developer 中的其他 2 个表创建一个表：

```
CREATE TABLE share_stock(
  share_id    NUMBER(6,0), 
  share_price NUMBER(10,2),
  company_id  NUMBER(6,0), 
  company_name VARCHAR2(50), 
  ticker_symbol VARCHAR2(4),
AS SELECT share_price.share_price_id, share_price.price, share_price.company_id, company.name, company.ticker_symbol 
FROM share_price, company
WHERE share_price.company_id = company.company_id,
CONSTRAINT sh_pk PRIMARY KEY (share_price.share_price_id),
CONSTRAINT sh_pr_fk FOREIGN KEY (share_price.share_price_id) REFERENCES share_price(share_price_id)
); 
```

基本上我正在尝试执行 CREATE AS SELECT，但我收到此错误：

> 命令行错误：294 列：28 错误报告：SQL 错误：ORA-00904：：无效标识符 00904。00000 -“%s：无效标识符”

我试图纠正我的语法，但到目前为止我还没有做到正确，任何想法都会有所帮助，

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:19:06.317

试试这个方法：

```
CREATE TABLE share_stock
AS 
SELECT SP.share_price_id as share_id , 
       SP.price as share_price, SP.company_id, C.name, 
       C.ticker_symbol 
FROM share_price SP 
join company C on SP.company_id = C.company_id;

alter table share_stock
add CONSTRAINT sh_pk PRIMARY KEY (share_id);

alter table share_stock
add CONSTRAINT sh_pr_fk FOREIGN KEY (share_id) 
REFERENCES share_price(share_price_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T09:36:39.090

约束 sh_pk 主键 ( **share_price.share_price_id** )，约束 sh_pr_fk 外键 (**share_price.**share_price_id) 参考 share_price(share_price_id));

您的代码不起作用，因为 ORACLE 不知道 share_price.shareprice_id 是什么？？？您应该编写 share_id，即您希望成为表 share_stock 的主键的列。

亲切的问候，MJ。

# html - 我的一半 CSS Sprite 图像未显示

> ID：14380984
> 
> 赞同：1
> 
> 时间：2013-01-17T14:15:25.033
> 
> 标签：html, css, sprite

我有一张翻转图像/链接的表格，我希望为此使用精灵，但由于某种原因，当代码仅显示一半左右的图像时，由于某种原因。

如果有人想在野外查看它，我的代码就在这里：http: [//www.geckosourcing.co.uk/ebay/Promotions/Cross_Promotion.html](http://www.geckosourcing.co.uk/ebay/Promotions/Cross_Promotion.html) [http://www.geckosourcing.co.uk/ebay/Promotions/ Cross_Promotion.css](http://www.geckosourcing.co.uk/ebay/Promotions/Cross_Promotion.css)

HTML：

```
<td height="88" width="88"><a class="1000AQwpanel" href="http://goo.gl/mOu8L">1000 Wetroom Panel</a></td> 
```

CSS：

```
.1000AQwpanel {
    display: block;
    width: 88px;
    height: 88px;
    background: url('http://www.geckosourcing.co.uk/ebay/Promotions/Promotion_Sprite.jpg') -704px 880px;
    text-indent: -99999px;
}
.1000AQwpanel:hover {
    background-position: -704px 792px;
} 
```

由于这段代码看起来与有效的部分相同，因此一直让我想到这一点。如果有人能指出我哪里出错了，那我就不用拔头发了。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T14:20:46.127

我怀疑这是由于类名以数字开头：

```
class="760Corner" 
```

[有效的类名必须以字母、下划线或连字符开头](http://www.w3.org/TR/CSS2/syndata.html#value-def-identifier)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:42:38.853

类 / id 名称可能不以数字开头。Html 将使代码有效，这是导致问题的 css。

你可以使用不同风格的 CSS 来解决这个问题。

**css**

```
a[class="760corner"]{

} 
```

PS。

为什么你的图像中有文字？尝试将文本放在这样的跨度中

**HTML**

```
<a class="corner-760">
    <span>Your text</span>
</a> 
```

**css**

```
a {
    display: block;
    position: relative;
    background: url('../images/.....jpg');
    width: 80px;
    height: 80px;
}

a > span {
    display: block;
    text-align: center;
    height: 100%;
}

a:hover > span {
    display: none;
}

a.corner-760 {
    background-position: ........;
} 
```

# javascript - 关闭模式对话框并在javascript中返回一个值？

> ID：14380985
> 
> 赞同：1
> 
> 时间：2013-01-17T14:15:25.423
> 
> 标签：javascript

我需要关闭模式对话框并在同一个函数中返回一个值

我不能编写如下代码，因为当返回一个值时，下一行永远不会被执行，

```
function butOK_OnClick() {
    return "OK";
    window.close();
} 
```

这是正确的方法吗？

```
function butOK_OnClick() {
    window.returnvalue = "OK";
    window.close();
} 
```

或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:25:52.377

假设您正在使用`window.showModalDialog`打开窗口（因为`window.open`不允许返回值），您只需设置`returnValue`模式的属性，然后将其设置为开启器中的变量。

开窗器：

```
var returnedValue = window.showModalDialog(url); 
```

模态窗口：

```
window.returnValue = 'foo';
window.close(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T14:49:23.657

您可以使用，

```
$("#modalId", window.top.document).data("cancelled", true);
$("#modalId", window.top.document).data("returnValue", returnVal); 
```

# php - ZF2 - 创建自定义表单视图助手

> ID：14380986
> 
> 赞同：3
> 
> 时间：2013-01-17T14:15:28.383
> 
> 标签：php, zend-framework2

前段时间，Matthew Weier O'Phinney 在他的博客上发表了[这篇](http://www.mwop.net/blog/217-Creating-composite-elements.html)关于在 Zend Framework 1 中创建复合表单元素的文章。

我正在尝试在 Zend Framewor 2 中为我的自定义库创建相同的元素，但是在呈现表单时我遇到了查找表单视图助手的问题。

这是我的元素（DateSegmented.php）：

```
<?php

namespace Si\Form\Element;

use Zend\Form\Element;
use Zend\ModuleManager\Feature\ViewHelperProviderInterface;

class DateSegmented extends Element implements ViewHelperProviderInterface
{

    public function getViewHelperConfig(){
          return array( 'type' => '\Si\Form\View\Helper\DateSegment' );
     }

    protected $_dateFormat = '%year%-%month%-%day%';
    protected $_day;
    protected $_month;
    protected $_year;

    /**
     * Seed attributes
     *
     * @var array
     */
    protected $attributes = array(
        'type' => 'datesegmented',
    );

    public function setDay($value)
    {
        $this->_day = (int) $value;
        return $this;
    }

    public function getDay()
    {
        return $this->_day;
    }

    public function setMonth($value)
    {
        $this->_month = (int) $value;
        return $this;
    }

    public function getMonth()
    {
        return $this->_month;
    }

    public function setYear($value)
    {
        $this->_year = (int) $value;
        return $this;
    }

    public function getYear()
    {
        return $this->_year;
    }

    public function setValue($value)
    {
        if (is_int($value)) {
            $this->setDay(date('d', $value))
                 ->setMonth(date('m', $value))
                 ->setYear(date('Y', $value));
        } elseif (is_string($value)) {
            $date = strtotime($value);
            $this->setDay(date('d', $date))
                 ->setMonth(date('m', $date))
                 ->setYear(date('Y', $date));
        } elseif (is_array($value)
            && (isset($value['day']) 
                && isset($value['month']) 
                && isset($value['year'])
            )
        ) {
            $this->setDay($value['day'])
                 ->setMonth($value['month'])
                 ->setYear($value['year']);
        } else {
            throw new Exception('Invalid date value provided');
        }

        return $this;
    }

    public function getValue()
    {
        return str_replace(
            array('%year%', '%month%', '%day%'),
            array($this->getYear(), $this->getMonth(), $this->getDay()),
            $this->_dateFormat
        );
    }
} 
```

这是我的表单视图助手：

```
<?php

    namespace Si\Form\View\Helper;

    use Zend\Form\ElementInterface;
    use Si\Form\Element\DateSegmented as DateSegmented;
    use Zend\Form\Exception;

    class DateSegmented extends FormInput
    {
        /**
         * Render a form <input> element from the provided $element
         *
         * @param  ElementInterface $element
         * @throws Exception\InvalidArgumentException
         * @throws Exception\DomainException
         * @return string
         */
        public function render(ElementInterface $element)
        {
            $content = "";

            if (!$element instanceof DateSegmented) {
                throw new Exception\InvalidArgumentException(sprintf(
                    '%s requires that the element is of type Si\Form\Input\DateSegmented',
                    __METHOD__
                ));
            }

            $name = $element->getName();
            if (empty($name) && $name !== 0) {
                throw new Exception\DomainException(sprintf(
                    '%s requires that the element has an assigned name; none discovered',
                    __METHOD__
                ));
            }

            $view = $element->getView();
            if (!$view instanceof \Zend\View\View) {
                // using view helpers, so do nothing if no view present
                return $content;
            }

            $day   = $element->getDay();
            $month = $element->getMonth();
            $year  = $element->getYear();
            $name  = $element->getFullyQualifiedName();

            $params = array(
                'size'      => 2,
                'maxlength' => 2,
            );
            $yearParams = array(
                'size'      => 4,
                'maxlength' => 4,
            );

            $markup = $view->formText($name . '[day]', $day, $params)
                    . ' / ' . $view->formText($name . '[month]', $month, $params)
                    . ' / ' . $view->formText($name . '[year]', $year, $yearParams);

            switch ($this->getPlacement()) {
                case self::PREPEND:
                    return $markup . $this->getSeparator() . $content;
                case self::APPEND:
                default:
                    return $content . $this->getSeparator() . $markup;
            }

            $attributes            = $element->getAttributes();
            $attributes['name']    = $name;
            $attributes['type']    = $this->getInputType();
            $attributes['value']   = $element->getCheckedValue();
            $closingBracket        = $this->getInlineClosingBracket();

            if ($element->isChecked()) {
                $attributes['checked'] = 'checked';
            }

            $rendered = sprintf(
                '<input %s%s',
                $this->createAttributesString($attributes),
                $closingBracket
            );

            if ($element->useHiddenElement()) {
                $hiddenAttributes = array(
                    'name'  => $attributes['name'],
                    'value' => $element->getUncheckedValue(),
                );

                $rendered = sprintf(
                    '<input type="hidden" %s%s',
                    $this->createAttributesString($hiddenAttributes),
                    $closingBracket
                ) . $rendered;
            }

            return $rendered;
        }

        /**
         * Return input type
         *
         * @return string
         */
        protected function getInputType()
        {
            return 'datesegmented';
        }

    } 
```

[这个问题](https://stackoverflow.com/questions/13886032/zf2-how-to-create-form-view-helper)描述了将视图助手添加为可调用，但它已经被声明，因为我的自定义库（Si）已添加到“StandardAutoLoader”中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:14:09.953

好的，最终想通了这一点。

将 Zend/Form/View/HelperConfig.php 复制到自定义库中的相同位置。调整内容以反映您的视图助手。

将以下内容添加到 Module.php 中的事件或引导程序中

```
$app = $e->getApplication();
$serviceManager = $app->getServiceManager();
$phpRenderer = $serviceManager->get('ViewRenderer');

$plugins = $phpRenderer->getHelperPluginManager();
$config  = new \Si\Form\View\HelperConfig;
$config->configureServiceManager($plugins); 
```

使用您的自定义命名空间更新“Si”命名空间。

“类已存在”错误实际上归结为我的视图帮助文件顶部的包含。我已将其更新为：

```
use Zend\Form\View\Helper\FormElement;

use Zend\Form\Element;
use Zend\Form\ElementInterface;
use Zend\Form\Exception; 
```

由于类名重复，我还将 instanceof 语句更新为绝对位置：

```
if (!$element instanceof \Si\Form\Element\DateSegmented) { 
```

从 ZF1 到 2 的翻译中还有更多错误，但与此问题无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:52:26.933

我理解您的代码的方式是：您正在创建一个新`Form\Element`的以及一个新的`Form\View\Helper`. 在这种情况下，您需要以下信息：

`StandardAutoloader`唯一负责实际查找课程的工作。`invokables`里面的声明就在`getViewHelperConfig()`那里，所以框架知道当被调用`Class`时要加载什么。`ViewHelper`

在你的情况下，你会这样做：

```
public function getViewHelperConfig() 
{
    return array(
        'invokables' => array(
            'dateSegmented' => 'Si\Form\View\Helper\DateSegmented'
        )
    );
} 
```

`ViewHelpers`Zend Framework 2在[/Zend/Form/View/HelperConfig.php](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/HelperConfig.php)中为它自己做这件事

# php - 在不同的服务器上有两个网站，但需要一个使用 php 和 mysql 的数据库

> ID：14380987
> 
> 赞同：1
> 
> 时间：2013-01-17T14:15:28.497
> 
> 标签：php, mysql

我想要一个服务器上的一个网站和另一台服务器上的另一个网站，但只有一个数据库同时使用 php 和 mysql。是否可以？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T14:21:38.357

是的。这是可能的。通常你不会把你的数据库放在远程服务器上。您应该将数据库服务器保留在同一个数据中心，以便使用高速内部网络链接。

如果您的网站位于主机中`web1`且`web2`数据库位于 中，`dbhost1`则使用主机名连接到 mysql 。`web1``web2``dbhost1`

## mysqli

```
$mysqli = new mysqli("dbhost1", "user", "pass"); 
```

## PDO

```
$dbh = new PDO('mysql:dbname=dbname;host=dbhost1', "user", "pass"); 
```

## 旧版 mysql 扩展

```
mysql_connect("dbhost1",  "user", "pass"); 
```

**注意：**确保在数据库中`user@web1`（在主机上`web1`）或`user@web2`（在主机上`web2`）具有访问权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:17:54.643

给定正确的设置，您可以连接到远程数据库。

如果做不到这一点，您可以编写一个可以从两个服务器调用的服务层。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:21:35.053

在连接到 mysql 数据库时，在两台服务器上使用相同的数据库连接凭据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T14:22:12.193

是的，为什么不。但对于安全和性能问题，我不会那样做。

问题是您**在另一台服务器**上的理解是通过 LAN 直接连接的服务器还是在另一个数据中心中的服务器。当服务器位于另一个数据中心时，您可能会遇到很多流量和性能问题。

当服务器直接连接时，您可以更改 my.cnf 并更改行：

```
bind-address 127.0.0.1 
```

然后可以从外部访问服务器。并且您应该为用户提供足够的权限以从外部连接。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T14:22:56.653

是的，这是可能的。您必须使用可从两台服务器访问的 mysql 服务器。您只需从两台服务器连接相同的主机/用户/密码：

```
define("WEBDOMAIN", "94.145.22.15"); //some fake data
define("DEFDBNAME", "my_db");
define("DEFUSERNAME", "my_user");
define("DEFDBPWD", "my_pass");

mysql_connect( WEBDOMAIN, DEFUSERNAME, DEFDBPWD );
mysql_select_db( DEFDBNAME); 
```

那应该够了。如果您的托管服务提供商不允许服务器连接到外部服务器（有时端口已关闭），您可能会遇到一些问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T14:41:24.713

出于安全原因，您无法连接到未授权托管服务器的 mysql 服务器是很常见的。因此，在 mysql 中，您必须允许用户不仅从本地主机连接，而且还允许从其他主机连接（如果您有足够的权限，您可以通过公平编辑用户权限从 phpMyAdmin 进行连接）。

# .net - WPF 错误处理

> ID：14380988
> 
> 赞同：1
> 
> 时间：2013-01-17T14:15:34.680
> 
> 标签：.net, wpf

我是 WPF 新手，正在使用 MVVM。我发现 using`IDataErrorInfo`对于基于字段的验证消息很有用。

如何获取与 ViewModel 中的用户输入无关的错误并将其显示在视图上？

我来自 MVC 背景，使用 AJAX 很容易将错误传回页面。我暂时尝试将标签绑定到`ErrorMessage`我的 ModelView 中的一般属性，但这感觉不对，因为我不确定在哪里重置属性。

我宁愿不使用`MessageBox`.

非常感谢您的帮助，

理查德·休斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:49:28.960

我发现的最好方法是向正在显示的视图中添加一个表示消息框的用户控件（或者，如果您使用的是更大的 MVVM 框架，请将其添加到外壳中。）然后，当我遇到将使用消息框的一般错误，我发布了该事件。shell 订阅了 show message 事件，当它接收到它时，隐藏控件在屏幕上居中，显示来自事件的消息。

# css - 使用 css 语法或自定义类

> ID：14380991
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:36.233
> 
> 标签：css, css-selectors

有点菜鸟，所以需要一些现实世界的建议。

我刚刚阅读了 mozilla 写的一篇关于使用 css 选择器的文章。

基本上，他们说不要使用复杂的选择器树，例如：

```
.class-a .class-b > .class-c is better expressed as  custom-class-abc 
```

显然他们会这样做，因为第二个选项会更好地提高浏览器的性能，但如果这是最好的解决方案，那么它会让很多 CSS 基础变得多余。

我有一个包含 LI 的 UL，其中包含 A。我的第一个 A 需要区别对待，所以我使用以下语法：

```
#footer li:first-child a {} 
```

如果我要遵循 Mozilla 的最佳实践，这将是：

```
#footer a.first or #footer .first (after adding a class to the first A element) 
```

有足够的东西要学习，所以希望得到一些关于这一切在现实世界中如何运作的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:26:21.773

你的选择器很好。没有读过你提到的文章，我猜他们的意思是避免类似的事情

```
html body div.wrapper div.navigation ul.nav li:first-child a.item { } 
```

然后做

```
.nav li:first-child a.item 
```

本文提供了更多关于为什么更少的选择器对性能更好的原因[。](http://css-tricks.com/efficiently-rendering-css/)当然，任何事情都有极端，Mozilla 应该建议如何使事情尽可能快，但选择器已经非常快了，所以在大多数情况下它没有区别。

在相关说明中阅读 css 中的特异性也可以帮助您确定实际需要选择多少。[http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:23:27.800

我认为这篇文章可能已经过时以迎合笨拙的浏览器，但大多数最新的浏览器现在都理解 :first-child 。你的例子

```
#footer li:first-child a {} 
```

我就是这样摇滚的。ie8 不明白 :last-child 注意。

# java - Struts2注解@RequestParameter

> ID：14380994
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:37.560
> 
> 标签：java, url, parameters, struts2, request

我正在按照[本](http://www.struts2.info/displaycontent/content/better-urls-with-struts2)教程使用 struts2 创建一个 SEO 友好的 url，但是在我的课堂上

```
@RequestParameter
public void setId(int id) {
    this.id = id;
} 
```

这个错误出现在`@RequestParameter`

```
RequestParameter cannot be resolved to a type 
```

我已经在我的中包含了 struts2-core jara，`web-inf/lib`但我仍然想知道它为什么会在那里返回错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:17:42.647

Struts2 里面没有`@RequestParameter`...

> 顺便说一句，您根本不需要它来运行您的示例。
> 
> 只需删除它，编译和部署 :)

您可能还想看看[Struts2 REST 插件](http://struts.apache.org/2.3.7/docs/rest-plugin.html)。

又搜索了一下，原来是[博文作者自己创建的自定义Annotation](http://www.struts2.info/displaycontent/content/identifying-struts2-setters-with-a-custom-annotation)，唯一的目的就是帮助他`IDE`，`IntelliJ`避免高亮`Setters`未使用的...

@StevenBenitez（那也是一个 SO 用户），您最好`Annotation`从博客中的其他示例中删除您的自定义，以避免对尚未声明它或阅读您描述它的博客文章的用户造成混淆:)

# c# - 无法将 lambda 表达式转换为类型“System.Delegate”，因为它不是委托类型？

> ID：14380996
> 
> 赞同：17
> 
> 时间：2013-01-17T14:15:38.310
> 
> 标签：c#, wpf, delegates

我遇到了一个我似乎无法弄清楚的问题，尽管这是 Stackoverflow 上的一个标准问题。

我正在尝试使用以下代码异步更新我的 Bing 地图（请注意，这是来自旧的 Silverlight 项目，似乎不适用于 WPF）

```
_map.Dispatcher.BeginInvoke(() =>
{
    _map.Children.Clear();
    foreach (var projectedPin in pinsToAdd.Where(pin => PointIsVisibleInMap(pin.ScreenLocation, _map)))
    {
        _map.Children.Add(projectedPin.GetElement(ClusterTemplate));
    }
}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-01-17T14:18:10.603

您必须将其显式转换为 a`Action`才能进行转换`System.Delegate`。

那是：

```
_map.Dispatcher.BeginInvoke((Action)(() =>
{
    _map.Children.Clear();
    foreach (var projectedPin in pinsToAdd.Where(pin => PointIsVisibleInMap(pin.ScreenLocation, _map)))
    {
        _map.Children.Add(projectedPin.GetElement(ClusterTemplate));
    }
})); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T14:18:10.040

该`BeginInvoke()`方法的参数是基`Delegate`类。

您只能将 lambda 表达式转换为具体的委托类型。

要解决此问题，您需要显式构造一个委托：

```
BeginInvoke(new MethodInvoker(() => { ... })); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-17T14:21:12.627

尝试

```
Dispatcher.BeginInvoke(new System.Threading.ThreadStart(delegate
{
//Do something
})); 
```

或使用动作

# button - 中心缩略图按钮引导程序

> ID：14380997
> 
> 赞同：0
> 
> 时间：2013-01-17T14:15:38.030
> 
> 标签：button, twitter-bootstrap, center

我正在使用最新版本的引导程序，但是我似乎无法弄清楚如何在以下代码中将按钮居中。我只想要这个特定的缩略图而不是全局的，所以我无法更改 css。

```
<div class="row">   
  <ul class="thumbnails">
    <li class="span4">
      <div class="thumbnail">
        <img src="http://placehold.it/400x200" alt="">
        <h3>Need A Price?</h3>
        <p>Fill in the Quote form and get a price within   30mins,We know you dont like waiting around</p>
          <div class="btn-group">
            <button class="btn btn-primary">Get A Quote</button>
          </div>
      </div>
    </li>
 </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T00:25:37.440

如果您只想将那个按钮居中，那么您可以利用该`.btn-group`容器并使用您自己的类来定位该元素，这样您就可以将该区域定义为`display: block`并简单地将按钮居中对齐，如下所示：

**CSS**

```
.btn-centered {
  text-align: center;
  display: block;
} 
```

**HTML**记下容器`.btn-centered`上使用的类。`.btn-group`

```
<div class="row">   
  <ul class="thumbnails">
    <li class="span4">
      <div class="thumbnail">
        <img src="http://placehold.it/400x200" alt="">
        <h3>Need A Price?</h3>
        <p>Fill in the Quote form and get a price within   30mins,We know you dont like waiting around</p>
          <div class="btn-group btn-centered">
            <button class="btn btn-primary">Get A Quote</button>
          </div>
      </div>
    </li>
 </ul>
</div> 
```

演示：http: [//jsbin.com/ubiwip/2](http://jsbin.com/ubiwip/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T23:58:53.777

这似乎对我有用：

```
<p align="center"><a href="#" class="btn btn-primary btn-block">TEST</a></p> 
```

# php - sfWidgetFormDoctrineChoice 和选择列表值

> ID：14380998
> 
> 赞同：2
> 
> 时间：2013-01-17T14:15:43.520
> 
> 标签：php, symfony1, symfony-1.4, symfony-forms

我有一个包含以下项目的表格：

```
id | value
 1 |  12
 2 |  14
 3 |  16 
```

我正在使用`sfWidgetFormDoctrineChoice`具有以下内容的小部件：

```
 $this->widgetSchema['value'] = new sfWidgetFormDoctrineChoice(array(
        'model'=>'TemplateFontSize',
        'add_empty'=>'Please Select Font Size', 
        'expanded' => false, 'multiple' => false
  )); 
```

这会在 HTML 中输出以下内容

```
<select>
  <option value="1">12</option>
  <option value="2">14</option>
  <option value="3">12</option>
</select> 
```

理想情况下，虽然我希望`value=""`价值成为价值，即

```
<select>
  <option value="12">12</option>
  <option value="14">14</option>
  <option value="16">12</option>
</select> 
```

这在小部件中可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:41:35.687

`key_method`在您的小部件配置中使用参数。

> 用于显示对象键的方法（默认为 getPrimaryKey）

```
$this->widgetSchema['value'] = new sfWidgetFormDoctrineChoice(array(
  'model'      =>'TemplateFontSize',
  'key_method' =>'getValue',
  'add_empty'  =>'Please Select Font Size', 
  'expanded'   => false,
  'multiple'   => false
)); 
```

[在这里](http://www.symfony-project.org/api/1_4/sfWidgetFormDoctrineChoice)查看更多。

* * *

更新：您还需要执行与验证器类似的操作。默认情况下，它期望 PK 作为提交的值。您需要“告诉”它应该期待另一列。类似的东西（尚未测试）：

```
$this->validatorSchema['value'] = new sfValidatorDoctrineChoice(array(
  'model'      =>'TemplateFontSize',
  'column'     => 'value'
)); 
```

更多[在这里](http://www.symfony-project.org/api/1_4/sfValidatorDoctrineChoice)。