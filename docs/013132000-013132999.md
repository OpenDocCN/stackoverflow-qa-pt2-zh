# StackOverflow 问答 13132000-13132999

# jquery - jQuery水平幻灯片

> ID：13132000
> 
> 赞同：2
> 
> 时间：2012-10-30T02:53:20.573
> 
> 标签：jquery

我正在尝试水平滑动一些 div，但它没有像我希望的那样做出反应......

基本上我在一个产品 div 中有一组“产品” - 我希望这样当用户将鼠标悬停在右箭头上时，产品向右滑动，显示更多，鼠标悬停在左箭头上，产品滑动到左边

我遇到了几个问题......

**1.**如果到达最后一个 div，我似乎无法准确地在任一方向停止滑动

**2.**我认为我的 jquery 代码搞砸了，它是我发现的复制/粘贴代码的大杂烩，带有我自己的 MINOR 调整 - 仍然是带有 Jquery 的新代码

**这是我的代码**

```
<script type="text/javascript" language="javascript">

$(document).ready( function() { 

    $('#btn-next').hover(function(){

        $('#product-slides').stop().animate({left: '-=300'},2000,function(){
            setTimeout(function() {$('#product-slides').css("left", "-=300")},2000);
        }); 

    },
    function() { 
        $('#product-slides').stop();
    });

    $('#btn-previous').hover(function(){

        $('#product-slides').stop().animate({left: '+=300'},2000,function(){
            setTimeout(function() {$('#product-slides').css("left", "+=300")},2000);
        }); 

    },
    function() { 
        $('#product-slides').stop();
    });

});

</script>

<div class="featured">

<img src="/images/btn-previous.png" alt="Previous Products" class="previous" id="btn-previous" />
<div class="product-slider">
    <div id="product-slides">
        <div class="product"></div>
        <div class="product"></div>
        <div class="product"></div>
        <div class="product"></div>
        <div class="product"></div>
        <div class="product"></div>
        <div class="product"></div>
    </div>
</div>
<img src="/images/btn-next.png" alt="Next Products" class="next" id="btn-next" /> 
```

非常感谢您对此提供的帮助....如果您需要任何其他信息，请告诉我-再次非常感谢您

# mysql - 填补MySQL中ID列的空白

> ID：13132003
> 
> 赞同：0
> 
> 时间：2012-10-30T02:54:06.983
> 
> 标签：mysql

> **可能重复：**
> [如何填写自动增量字段中的“漏洞”？](https://stackoverflow.com/questions/1841104/how-to-fill-in-the-holes-in-auto-incremenet-fields)

我在删除数据库中的用户时遇到问题，ID 列总是跳过并且继续增加，即使列内有跳过的数字。

例如：

```
+---------+----------+---------+
|   ID    |  first   |   last  |
+---------+----------+---------+
|    1    |    a     |    a    |
+---------+----------+---------+
|    3    |    c     |    c    |
+---------+----------+---------+
|    4    |    d     |    d    |
+---------+----------+---------+
|    5    |    e     |    e    |
+---------+----------+---------+
|    7    |    g     |    g    |
+---------+----------+---------+
|    9    |    i     |    i    |
+---------+----------+---------+ 
```

在创建新用户时，是否有自动填充我的 ID 列上的空白？还是只是调整列表中剩余的用户来填补空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:00:04.110

这就是自动递增列的工作方式。这些差距不会导致任何性能问题或任何问题。间隙可能导致问题的唯一方法是，如果您经常删除行并接近列的最大值（可能是 40 亿）。如果要更改 id 以填补空白，则必须确保对 ID 的每个引用都已更新，这通常不值得麻烦。总之，您可以忽略这些差距。

# winforms - 为什么 datagridview 的自定义列的值为空？

> ID：13132007
> 
> 赞同：1
> 
> 时间：2012-10-30T02:54:48.160
> 
> 标签：winforms, datagridview, custom-controls

我正在使用自定义列将数据表绑定到 datagridview。

这是我的自定义列代码。

注意：不涉及单元格编辑。

```
public class GridCustomColumnCell : DataGridViewColumn
{
    public GridCustomColumnCell() : base(new CustomCell())
    {

    }

    public override DataGridViewCell CellTemplate
    {
        get
        {
            return base.CellTemplate;
        }
        set
        {
            // Ensure that the cell used for the template is a CalendarCell. 
            if (value != null && !value.GetType().IsAssignableFrom(typeof(CustomCell)))
            {
                throw new InvalidCastException("Must be a Special Cell");
            }
            base.CellTemplate = value;
        }
    }
}

public class CustomCell : DataGridViewTextBoxCell
{
    private string strID;
    private string statusID;

    public CustomCell() : base()
    {
        string[] data = (string[])Value;
        if (data != null)
        {
            strID = data[0];
            statusID = data[1];
        }
    }

    private static readonly StringFormat strFmt = new StringFormat(StringFormatFlags.NoWrap);
    protected override void Paint(Graphics graphics, Rectangle clipBounds, 
                                  Rectangle cellBounds, int rowIndex, 
                                  DataGridViewElementStates cellState, 
                                  object value, object formattedValue, 
                                  string errorText, 
                                  DataGridViewCellStyle cellStyle, 
                                  DataGridViewAdvancedBorderStyle advancedBorderStyle, 
                                  DataGridViewPaintParts paintParts)
    {
        base.Paint(graphics, clipBounds, cellBounds, rowIndex, cellState, value, 
                   formattedValue, errorText, cellStyle, advancedBorderStyle, 
                   paintParts);

        DataGridViewCellStyle cstyle = new DataGridViewCellStyle();
        cstyle.Font = new Font(FontFamily.GenericSansSerif, 16, FontStyle.Bold);
        graphics.FillRectangle(Brushes.GreenYellow, cellBounds);
        graphics.DrawString(" \n\n", cellStyle.Font, Brushes.Black, cellBounds);
        graphics.DrawString("  " + statusID + "", cstyle.Font, Brushes.Black, 
                            cellBounds);
        graphics.DrawString("\n\n\n  " + strID + "", cellStyle.Font, 
                            Brushes.Blue, cellBounds);
    }

    protected override void OnMouseClick(DataGridViewCellMouseEventArgs e)
    {
        base.OnMouseClick(e);
        ContextMenuStrip cs = new ContextMenuStrip();
        cs.Items.Add("Fsdfsfs ");
        //  cs.Items.Add()
        if (e.Button == MouseButtons.Right)
            cs.Show(Cursor.Position);
    }

    public override Type ValueType
    {
        get
        {
            // Return the type of the value that CalendarCell contains.    
            return typeof(String[]);
        }
    }

    public override object DefaultNewRowValue
    {
        get
        {
            // Use the current date and time as the default value. 
            return null;
        }
    }
} 
```

这是我的数据绑定代码：

```
try
{
    FrameFactory ff = new FrameFactory();
    ff.NewFrame("C:\\XMLsample\\s1.xml");

    GridCustomColumnCell cc = new GridCustomColumnCell();
    cc.Resizable = DataGridViewTriState.False;
    cc.DataPropertyName = "test";

    gridMain.Columns.Add(cc);
    gridMain.ReadOnly = true;
    this.gridMain.RowCount = 5;
    foreach (DataGridViewRow row in this.gridMain.Rows)
    {
        row.Cells[0].Value = new string[] { "1", "2" };
    }
    //DataTable dt = new System.Data.DataTable();
    //dt.Columns.Add("test", Type.GetType("System.String").MakeArrayType());
    //DataRow dr = dt.NewRow();
    //dr[0] = new string[] { "1", "2" };
    //dt.Rows.Add(dr);
    //gridMain.DataSource = dt;

    //   dt.Row
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

即使使用datatable直接绑定，**DataGridViewTextBoxCell下的****值为**null

 **任何人都可以帮助我解决丢失的代码吗？**

# python - Numpy：根据另一个数组中的索引将值放入 1-of-n 数组中

> ID：13132009
> 
> 赞同：1
> 
> 时间：2012-10-30T02:54:58.787
> 
> 标签：python, numpy

假设我们有两个数组：一些值，例如`array([1.2, 1.4, 1.6])`，和一些索引（比方说`array([0, 2, 1])`，

```
array([[ 1.2,  0\. ,  0\. ],
       [ 0\. ,  0\. ,  1.4],
       [ 0\. ,  1.6,  0\. ]]) 
```

有没有办法在没有循环的情况下以一种很好、快速的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:12:29.950

和

```
a = zeros((3,3))
b = array([0, 2, 1])
vals = array([1.2, 1.4, 1.6]) 
```

你只需要索引它（在`arange`or的帮助下`r_`）：

```
>>> a[r_[:len(b)], b] = vals

array([[ 1.2,  0\. ,  0\. ],
       [ 0\. ,  0\. ,  1.4],
       [ 0\. ,  1.6,  0\. ]]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-29T03:49:34.727

我们如何修改它以获得更高的维度？例如，a 是 5x4x3 数组，b 和 vals 是 5x4 数组。那么我们如何修改语句 a[r_[:len(b)],b] = vals 呢？

# ruby - 将成员变量分配给Ruby中代码块的结果

> ID：13132010
> 
> 赞同：2
> 
> 时间：2012-10-30T02:55:49.173
> 
> 标签：ruby, constructor

我想将成员变量分配给返回 2x2 数组的冗长代码块的结果。这将在构造函数中完成。但是如果在构造函数中我这样做，

```
def initialize
@foo = ...
       ...
end 
```

然后只有该块中的第一行代码被分配给@foo。如果我定义了一个方法，那么我会在编译期间得到一个未知的方法错误，这是有道理的，因为它不知道在哪个实例上调用它。我认为我不能做'self'，因为它在构造函数中，所以还没有实例。

我不想要类定义中的代码块，我希望它整齐地封装在某个地方。类方法需要使其他变量可用于该方法，而这些变量应该只属于每个实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:04:14.323

您可以使用 dpassage 的解决方案，但我认为解决此问题的更常见方法是仅使用辅助函数。

```
class Bar
  def initialize
    @foo = helper
  end

  def helper
    #do stuff
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:00:02.357

如果我了解您要做什么，您应该可以这样做：

```
def initialize
  @foo = begin
    ...
  end
end 
```

的值`@foo`应该是`begin...end`块中最后一行代码的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:22:53.133

如果在实际定义数组之前有冗长的“准备”代码，只需将数组赋值放在冗长的部分之后：

```
def initialize
    # some lengthy code
    # ...
    @foo = something_using_the_result_from_the_lengthy_code
end 
```

或者如果冗长的代码在数组的赋值中，那么你应该没有问题：

```
def initialize
  @foo = [
    # lengthy code to assign the array
  ]
end 
```

# ios - SQLITE（fmdb）选择x为空的地方不起作用

> ID：13132011
> 
> 赞同：2
> 
> 时间：2012-10-30T02:56:31.390
> 
> 标签：ios, sqlite, fmdb, isnull

我在 iOS 上使用 FMDB，尝试使用如下语句查询表，

```
select * from test where foo isNull 
```

在 sqlite C API 中，这最终使用此 API 绑定到 null，

```
int sqlite3_bind_null(sqlite3_stmt*, int); 
```

这是行不通的。通过 fmdb 调用的选择似乎将列正确绑定到 null 没有找到匹配的记录。

如果在 sqlite3 命令行会话中执行以下命令，它可以工作，但不能通过 FMDB 的 sqlite C API。

```
select * from test where foo isNull; 
```

这是重现问题的 fmdb 代码。看起来 fmdb 正在执行调用 sqlite3_bind_null 的正确步骤。

```
 NSString *stmt = @"select * from test where shipToCode=:foo";
        NSDictionary *dict = @{@"foo" : [NSNull null]};
        FMResultSet *rs = [db executeQuery:stmt withParameterDictionary:dict];
        int count = 0;
        while ([rs next]) {
            count++;
        }
        NSLog(@"Count %d", count); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:17:34.870

`NULL`无法与`=`运营商进行比较；它不等于*任何*值，甚至它本身。

要与 进行比较`NULL`，您必须使用[`IS NULL`](http://www.sqlite.org/lang_expr.html#collateop)运算符：

```
stmt = @"select * from test where shipToCode is null"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:07:09.163

请尝试以下操作并检查是否有任何更改：

```
NSString *query = @"SELECT * FROM test WHERE shipToCode is NULL";

FMResultSet *rs = [db executeQuery:query];
int count = 0;

while ([rs next]) {
    count++;
}

NSLog(@"Count %d", count); 
```

# php - mysqli insert 不工作，没有错误信息，连接成功

> ID：13132012
> 
> 赞同：1
> 
> 时间：2012-10-30T02:56:41.417
> 
> 标签：php, mysql, mysqli, connect

我不喜欢编码。我建立了一个名为contacts 的MYSQL 数据库，一个名为contacttable 的表，其中包含id、firstname、lastname、emailaddress、postalcode 和phonenumber 字段。每个都是文本或 varchars，除了 id，它是一个 auto_increment，pk 字段。连接没有给出任何错误，并且没有错误通过 mysqli_connect_error() 方法中继。他们查询没有通过，也没有执行任何查询。我不知道为什么。

```
<html>
<head>
    <title>Registration</title>     
</head>
<body>

      <h1>Register with Us!</h1>

      <h2>Registration Complete!</h2>
      <div class="feedback-container" <?= isset($_REQUEST["first-name"])? "style=\"display:block\"": "style=\"display:none\""; ?>>
         <?php

          $firstname = $lastname = $emailaddress = $postalcode = $phonenumber = NULL;

          if (isset($_REQUEST["first-name"])){
           $firstname = $_REQUEST["first-name"];
           $lastname = $_REQUEST["last-name"];
           $emailaddress = $_REQUEST["email-address"];
           $postalcode = $_REQUEST["postal-code"];
           $phonenumber = $_REQUEST["phone-number"];

           $dbconn = new mysqli();
           $dbconn->connect("localhost","root","","contacts");

           if(mysqli_connect_error()){
             echo "Connection Failed";
           }else{
             echo "Connection Established";
           }   

           $query = "INSERT INTO 'contactstable' ('firstname', 'lastname', 'emailaddress','postalcode','phonenumber') VALUES ('$firstname', '$lastname', '$emailaddress', '$postalcode', '$phonenumber')";             

           if ($dbconn->query($query) == TRUE){
              echo ("Thank you for registering with us. We will shortly send a confirmation email to $emailaddress.");
           }else{
              echo ("<p>Your contact information was not added to our database. Please try again later or contact our webadmin at webadmin@gmail.com</p>");
           }

          }

         ?>
      </div>
</body> 
```

当它运行时，它会输出以下内容：“连接已建立”“您的联系信息未添加到我们的数据库中。请稍后再试或通过 webadmin@gmail.com 联系我们的网络管理员” 没有错误消息。没有更新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:03:11.917

我会做这个

```
 $query = "INSERT INTO 'contactstable' ('firstname', 'lastname', 'emailaddress','postalcode','phonenumber') VALUES ('$firstname', '$lastname', '$emailaddress', '$postalcode', '$phonenumber')"; 
```

看起来像这样

```
 $query = "INSERT INTO contactstable (firstname, lastname, emailaddress,postalcode,phonenumber) VALUES ('$firstname', '$lastname', '$emailaddress', '$postalcode', '$phonenumber')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:14:27.290

如果要引用字段名称，请使用反引号。

```
$query = "INSERT INTO `contactstable` (`firstname`, `lastname`, `emailaddress`,`postalcode`,`phonenumber`) VALUES ('$firstname', '$lastname', '$emailaddress', '$postalcode', '$phonenumber')"; 
```

`"`如果您设置，您也可以使用`SET sql_mode='ANSI_QUOTES'`

[http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:09:42.277

查询应该是这样的。

```
 INSERT INTO `contactstable`
 (`firstname`, `lastname`, `emailaddress`,`postalcode`,`phonenumber`)
 VALUES
 ('$firstname', '$lastname', '$emailaddress', '$postalcode', '$phonenumber') 
```

# linux - 什么 linux 内核代码创建 /sys/devices/system/cpu/cpuX？

> ID：13132013
> 
> 赞同：2
> 
> 时间：2012-10-30T02:56:56.487
> 
> 标签：linux, kernel, sysfs, microblaze

我正在为 microblaze 架构开发一个 cpufreq 驱动程序（作为可加载的内核模块）。我有一些能够扩展系统时钟的 FPGA 逻辑，它工作得很好。我已经按照信息`Documentation/cpu-freq/cpu-drivers.txt`查看了 blackfin cpufreq 驱动程序中的模型。

`arch/microblaze/Kconfig`为了将 cpufreq 选项内置到内核（不是模块）中，我还进行了必要的更改。

当我第一次加载驱动程序时，`cpufreq_register_driver()`返回 -ENODEV，这意味着它找不到 CPU。我将驱动程序标志设置为 CPUFREQ_STICKY 并能够插入模块。

但是，此时我意识到`/sys/devices/system/cpu/cpu0`不存在（尽管`/sys/devices/system/cpu/cpufreq`存在）。那么，这是为什么呢？内核代码的哪一部分负责创建该目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:53:03.997

`/sys/devices/system/cpu/cpuX`我通过查看`cpufreq_cpu_callback()`in发现了sysfs 条目的创建位置`drivers/cpufreq/cpufreq.c`。这有一个调用`get_cpu_sysdev()`，我认为这是我正在寻找的元素。

此调用定义在 中`drivers/base/cpu.c`，我还注意到将 cpu 特定的 sysdev 条目放在一起的代码；`register_cpu()`. 对于大多数架构，这是在 中`arch/${ARCH}/kernel/setup.c`，我以 blackfin 代码为例。

```
DEFINE_PER_CPU(struct cpu, cpu_data);
static int __init topology_init(void)
{
    unsigned int cpu;
    for_each_possible_cpu(cpu) {
        register_cpu(&per_cpu(cpu_data, cpu), cpu);
    }
    return 0;
} 
```

将此代码添加到 后`arch/microblaze/kernel/setup.c`，我现在有了我需要的目录，我可以利用不同的调控器与我的 cpufreq 驱动程序对话。现在我只需要以`sleep 1`1/3 的时钟速率花费 1 秒而不是 3 秒！

# php - php和mysql日历修改

> ID：13132014
> 
> 赞同：0
> 
> 时间：2012-10-30T02:57:08.597
> 
> 标签：php, mysql, calendar, pdo

这段代码创建了一个不错的**日历**（[原始代码](http://www.newmediacampaigns.com/page/create-a-jquery-calendar-with-ajax-php-and-a-remote-data-source)），但我正在尝试对其进行一些修改。第一行是好的，不需要注意，但这里是：

```
$calendar = '<table cellpadding="0" cellspacing="0" class="calendar">';
$headings = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
$calendar.= '<tr class="calendar-row"><td class="calendar-day-head">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>';

$running_day = date('w',mktime(0,0,0,$month,1,$year));
$days_in_month = date('t',mktime(0,0,0,$month,1,$year));
$days_in_this_week = 1;
$day_counter = 0;
$dates_array = array();

$calendar.= '<tr class="calendar-row">';

for($x = 0; $x < $running_day; $x++):
    $calendar.= '<td class="calendar-day-np"> </td>';
    $days_in_this_week++;
endfor; 
```

这是我卡住的地方。从现在开始，日历访问**数据库**并根据我记录的事件打印我的日期。对于查询发现任何事件的日期，代码会在其中打印一个链接。见代码：

```
$db = new PDO('mysql:host=localhost;dbname=calendar','root','');
$stmt = $db->prepare('SELECT time, title FROM events');
$stmt->execute();

$rawTimeStamps = $stmt->fetchAll(PDO::FETCH_ASSOC);
$cleanDateArray = array();
foreach ($rawTimeStamps as $t) {
$rawDate = $t['time'];
$rawDate = getdate($rawDate);
$cleanDate = mktime(0,0,0,$rawDate['mon'],$rawDate['mday'],$rawDate['year']);
$cleanDataArray[] = $cleanDate;
}
for($list_day = 1; $list_day <= $days_in_month; $list_day++):

    $calendar.= '<td class="calendar-day">';
        $timestamp = mktime(0,0,0,$month,$list_day,$year);
        if (in_array($timestamp, $cleanDataArray)) {
        $calendar.= '<div class="day-number day-number-event"><a href="#">'.$list_day.'</a></div>';
        } else {
        $calendar.= '<div class="day-number day-number-noevent">'.$list_day.'</div></div><div id="calendar-events"></div>';
        }
    $calendar.= '</td>';
    if($running_day == 6):
        $calendar.= '</tr>';
        if(($day_counter+1) != $days_in_month):
            $calendar.= '<tr class="calendar-row">';
        endif;
        $running_day = -1;
        $days_in_this_week = 0;
    endif;
    $days_in_this_week++; $running_day++; $day_counter++;
endfor; 
```

然后，代码完成了日历。

```
if($days_in_this_week < 8):
    for($x = 1; $x <= (8 - $days_in_this_week); $x++):
        $calendar.= '<td class="calendar-day-np"> </td>';
    endfor;
endif;

$calendar.= '</tr>';

$calendar.= '</table>';

return $calendar; 
```

我需要的是从数据库中打印与发生事件的日期相关的其他信息。换句话说，我想要的只是在事件数据的正下方打印事件标题（也记录在事件表的列中）。就像是：

```
$calendar.= '<div class="day-number day-number-event"><a id="'.$timestamp.'" href="#">'.$list_day.'</a></div><p>'.$title.'</p>';} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:38:24.413

经过一些测试和研究，这是解决方案：

```
function draw_calendar($month,$year){

   $calendar = '<table cellpadding="0" cellspacing="0" class="calendar">';

   $headings = array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
   $calendar.= '<tr class="calendar-row"><td class="calendar-day-head">'.implode('</td><td class="calendar-day-head">',$headings).'</td></tr>';

/* days and weeks vars now ... */
   $running_day = date('w',mktime(0,0,0,$month,1,$year));
   $days_in_month = date('t',mktime(0,0,0,$month,1,$year));
   $days_in_this_week = 1;
   $day_counter = 0;
   $dates_array = array();

/* row for week one */
   $calendar.= '<tr class="calendar-row">';

/* print "blank" days until the first of the current week */
   for($x = 0; $x < $running_day; $x++):
     $calendar.= '<td class="calendar-day-np"> </td>';
     $days_in_this_week++;
   endfor;

   $db = new PDO('mysql:host=localhost;dbname=calendar','root','');

   $stmt = $db->prepare('SELECT time, title FROM events');
   $stmt->execute();

   $rawTimeStamps = $stmt->fetchAll(PDO::FETCH_ASSOC);
   $cleanDateArray = array();

   foreach ($rawTimeStamps as $t) {
      $rawDate = $t['time'];
      $rawDate = getdate($rawDate);
      $cleanDate = mktime(0,0,0,$rawDate['mon'],$rawDate['mday'],$rawDate['year']);
      $cleanDataArray[] = $cleanDate;
   }

/* keep going with days.... */
   for($list_day = 1; $list_day <= $days_in_month; $list_day++):

    $calendar.= '<td class="calendar-day">';

        $timestamp = mktime(0,0,0,$month,$list_day,$year);

        if (in_array($timestamp, $cleanDataArray)) {

        /* embromation */
        $date = getdate($timestamp);
        $time_start = mktime(0,0,0,$date['mon'],$date['mday'],$date['year']);
        $time_end = mktime(23,59,59,$date['mon'],$date['mday'],$date['year']);
        $stmt = $db->prepare('SELECT title FROM events WHERE time BETWEEN ? AND ?');
        $stmt->bindParam(1,$time_start,PDO::PARAM_INT);
        $stmt->bindParam(2,$time_end,PDO::PARAM_INT);
        $stmt->execute();
        $events = $stmt->fetch(PDO::FETCH_ASSOC);

        $calendar.= '<div class="day-number day-number-event"><a href="#">'.$list_day.'</a></div><p>'.$events["title"].'</p>';
        } else {
        $calendar.= '<div class="day-number day-number-noevent">'.$list_day.'</div></div><div id="calendar-events"></div>';
        }

    $calendar.= '</td>';
    if($running_day == 6):
        $calendar.= '</tr>';
        if(($day_counter+1) != $days_in_month):
            $calendar.= '<tr class="calendar-row">';
        endif;
        $running_day = -1;
        $days_in_this_week = 0;
    endif;
    $days_in_this_week++; $running_day++; $day_counter++;
endfor;

/* finish the rest of the days in the week */
if($days_in_this_week < 8):
    for($x = 1; $x <= (8 - $days_in_this_week); $x++):
        $calendar.= '<td class="calendar-day-np"> </td>';
    endfor;
endif;

/* final row */
$calendar.= '</tr>';

/* end the table */
$calendar.= '</table>';

/* all done, return result */
return $calendar; 
```

}

# java - 无法在 JSP 页面上显示 3D 饼图

> ID：13132015
> 
> 赞同：0
> 
> 时间：2012-10-30T02:57:16.110
> 
> 标签：java, jsp, jfreechart

正如标题所说，我无法在 JSP 页面上显示 3D 饼图，即使图像已保存。我尝试了绝对路径和相对路径，但仍然不起作用。有人可以帮忙解决这个问题吗？

这是源代码：
AnalyzeUserClient.jsp(Java 代码)

```
DefaultPieDataset pieDataset = new DefaultPieDataset(); 
BufferedReader bReader =new BufferedReader(new FileReader("C:/Users/L31207/Desktop/eclipse-jee-juno-win32/eclipse/user.txt"));
String s;
while ((s=bReader.readLine())!=null){
   String datavalue [] = s.split("\t");
   String category = datavalue[0];
   String value = datavalue [1];
   pieDataset.setValue(category, Double.parseDouble(value));
}
bReader.close();

JFreeChart chart = ChartFactory.createPieChart3D(
            "Percentage of Each Category for User", pieDataset, true, true, true);

PiePlot3D p = (PiePlot3D) chart.getPlot();
p.setLegendLabelGenerator(new StandardPieSectionLabelGenerator("{0}: {2}"));
p.setForegroundAlpha(0.5f);
p.setBackgroundAlpha(0.2f);

chart.setBackgroundPaint(Color.white);
chart.setAntiAlias(true);
chart.setBorderVisible(false);
chart.setTextAntiAlias(true);

try {
    ChartUtilities.saveChartAsPNG(new File("C:/Users/L31207/Desktop/eclipse-jee-juno-win32/eclipse/AnalyzeUser.png"), chart, 800, 600);
    } catch (IOException e) {
        e.printStackTrace();
        System.err.println("Problem occurred creating chart.");
    } 
```

分析UserClient.jsp（HTML代码）

```
<img src="C:/Users/L31207/Desktop/eclipse-jee-juno-win32/eclipse/AnalyzeUser.png" height="500px" width="500px" usemap="#chart"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:00:45.753

需要引用客户端（`<img src="..."/>`与服务器不在同一台机器上运行的浏览器）可以访问的资源。`href`指向`C:`驱动器上的文件的情况并非如此。您需要提供对存储在该文件中的图像的**HTTP**访问。

# php - 使用可变数组和 foreach 循环在 PHP 中显示 XML 节点的问题

> ID：13132020
> 
> 赞同：1
> 
> 时间：2012-10-30T02:59:01.933
> 
> 标签：php, xml, arrays, for-loop, foreach

我在显示存储在我的数组中的 XML 值时遇到了一些问题。我成功地遍历了节点，但我试图将数组全部回显。这是我的代码：

```
<?php  
$other_feed_url = "http://xml.pinnaclesports.com/pinnaclefeed.aspx?sporttype=Football&sportsubtype=NFL";  
$xml2 = simplexml_load_file($other_feed_url);  
$AwayLine[] = (string)$xml2->spread_visiting;  
$HomeLine[] = (string)$xml2->home_visiting;  
$AwayMoneyLine[] = (string)$xml2->moneyline_visiting;  
$HomeMoneyLine[] = (string)$xml2->moneyline_home;  
$AwaySpreadAdjust[] = (string)$xml2->spread_adjust_visiting;  
$HomeSpreadAdjust[] = (string)$xml2->spread_adjust_home;  
$UnderAdjust[] = (string)$xml2->under_adjust;  
$OverAdjust[] = (string)$xml2->over_adjust;  
$TotalPoints[] = (string)$xml2->total_points;  
for($i=0;$i<20; $i++) {  
    foreach ($xml2->events->event as $event) {  
        $Spread = $event->periods->period[0]->spread;   
        $MoneyLine = $event->periods->period[0]->moneyline;  
        $TotalPoints = $event->periods->period[0]->total;      
        $AwayLine[] = $Spread->spread_visiting;   
        $HomeLine[] = $Spread->spread_home;  
        $AwayMoneyLine[] = $MoneyLine->moneyline_visiting;   
        $HomeMoneyLine[] = $MoneyLine->moneyline_home;  
        $UnderAdjust[] = $TotalPoints->under_adjust;   
        $OverAdjust[] = $TotalPoints->over_adjust;  
        $TotalPoints[] = $TotalPoints->total_points;  
    }  
    echo '<br>';  
    echo $AwayLine[$i];  
    echo '<br>';  
    echo $HomeLine[$i];  
    echo '<br>';  
    echo $AwayMoneyLine[$i];   
    echo '<br>';  
    echo $HomeMoneyLine[$i];  
    echo '<br>';  
    echo $TotalPoints[$i];  
}  
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:21:32.817

您正在设置`$MoneyLine = $event->periods->period[0]->moneyline;`，但您正在加载的 XML 文档中不存在此设置。然后，当您尝试 fetch`$AwayMoneyLine[] = $MoneyLine->moneyline_visiting;`时，没有结果值。有关您正在解析的文档中的 XML 节点之一的示例，请参见下文：

```
<event>
    <event_datetimeGMT>2012-11-02 00:25</event_datetimeGMT>
    <gamenumber>272519903</gamenumber>
    <sporttype>Football</sporttype>
    <league>NFL</league>
    <IsLive>No</IsLive>
    <participants>
        <participant>
            <participant_name>Kansas City Chiefs</participant_name>
            <contestantnum>301</contestantnum>
            <rotnum>301</rotnum>
            <visiting_home_draw>Visiting</visiting_home_draw>
        </participant>
        <participant>
            <participant_name>San Diego Chargers</participant_name>
            <contestantnum>302</contestantnum>
            <rotnum>302</rotnum>
            <visiting_home_draw>Home</visiting_home_draw>
        </participant>
    </participants>
    <periods>
        <period>
            <period_number>0</period_number>
            <period_description>Game</period_description>
            <periodcutoff_datetimeGMT>2012-11-02 00:25</periodcutoff_datetimeGMT>
            <period_status>I</period_status>
            <period_update>open</period_update>
            <spread_maximum>10000</spread_maximum>
            <moneyline_maximum>5000</moneyline_maximum>
            <total_maximum>3000</total_maximum>
            <spread>
                <spread_visiting>9.5</spread_visiting>
                <spread_adjust_visiting>-130</spread_adjust_visiting>
                <spread_home>-9.5</spread_home>
                <spread_adjust_home>120</spread_adjust_home>
            </spread>
            <total>
                <total_points>42.5</total_points>
                <over_adjust>-102</over_adjust>
                <under_adjust>-108</under_adjust>
            </total>
        </period>
    </periods>
</event> 
```

# asp.net - 在 LINQ to SQL 中选择主键值

> ID：13132024
> 
> 赞同：2
> 
> 时间：2012-10-30T02:59:36.043
> 
> 标签：asp.net, sql, linq-to-sql

我正在创建一个使用 linq to sql 来创建、编辑和删除汽车和比赛结果的 asp.net 站点。每辆车都有自己的号码，该号码已设置为主键。每个结果都有一个结果编号，结果与汽车之间存在多对一的关系。

为了创建一个新的汽车对象，我使用 Car DataContext，它会根据需要使用 DataContext.SubmitChanges() 函数自动更新数据库。但是它不会更新主键，而是通过增加最大的当前值来选择一个新的主键。

既然每辆车的号码都很重要，那么有没有办法使用这种方法来选择主键值呢？还是我应该将汽车 ID 分开并使用单独的代码来确保 ID 是唯一的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:43:04.453

正如您在问题中所暗示的那样，将`Car`数字与其 Id 分开是要走的路。这样做的原因是，两辆车*可能*在某个时候具有相同的编号，此外数据库仍在为 Id 选择自己的值。

只需在您的`Car`表中添加另一个字段以记录其编号，您就可以开始了。

有关详细信息，请参阅[使用实体框架更新主键值](https://stackoverflow.com/questions/1367751/update-primary-key-value-using-entity-framework)。

# java - 如何获取两个多点触控点的 RawX 和 RawY

> ID：13132025
> 
> 赞同：3
> 
> 时间：2012-10-30T02:59:46.917
> 
> 标签：java, android, mobile

我正在制作一个需要捏缩放和拖动平移以获得相对视图的应用程序。当我第一次实现拖盘时，它跳遍了整个地方。使用`getRawX`并`getRawY`解决了我的问题。我现在正在研究捏缩放，我的应用程序再次在整个地方跳跃。我尝试使用`getRawX`，但显然我只能为其中一个点做到这一点。它不允许类似的东西`event.getRawX(0);`，并且`event.getRawX()`只会返回其中一个点的值。如何获得两个接触点的 RawX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:23:52.893

诀窍是在触摸屏幕时分别记录两个手指。然后在移动手指时跟踪拖动手势。

[我发现这个资源超级有用](http://www.zdnet.com/blog/burnette/how-to-use-multi-touch-in-android-2-part-6-implementing-the-pinch-zoom-gesture/1847)。

[解决问题的类似帖子的链接](https://stackoverflow.com/questions/5375817/android-pinch-zoom)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T04:46:49.530

您可以使用`getX (int pointerIndex)`和`getY (int pointerIndex)`。这两个函数在这里定义了[Developer android](http://developer.android.com/reference/android/view/MotionEvent.html#getX%28%29)，有关如何获取的更多详细信息`pointerIndex`：[指针索引](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T13:59:52.770

我想到了。干得好我

```
 float x = (event.getXPrecision()*event.getX(0)) - (event.getXPrecision()*event.getX(1));
    float y = (event.getYPrecision()*event.getY(0)) - (event.getYPrecision()*event.getY(1)); 
```

所以基本上 event.getXPrecision()*event.getX(0) 是 pointer(0) 的 getRawX

# excel - 按指数查找平均值

> ID：13132027
> 
> 赞同：0
> 
> 时间：2012-10-30T02:59:53.510
> 
> 标签：excel, average

我有一个稍微复杂的任务需要在 Excel 中完成。我有一个 10,000 行 x 100 列的电子表格。我想从该电子表格中提取 1000 行乘 100 列的 10 个组。然后我想为我之前得到的每个组获取 100 列中每一列的平均值。

然后我想复制每个平均值 500 次，这样我就有 500 行来自第一组的平均值，然后是 500 多行来自第二组的平均值，依此类推。

这需要手工完成很多，所以我想知道其中是否有可以轻松自动化的部分。我不熟悉 Excel 中的脚本，但我觉得很多这些事情都可以通过内置函数完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-27T02:08:29.193

假设您的数据标记为列并从 A2 开始，在 A2 的最左侧插入一列：

```
=1+INT((ROW()-2)/1000) 
```

复制下来以适应。选择并复制 ColumnA，然后选择性粘贴，将值粘贴到顶部。选择 ColumnsA:CW，DATA > Outline - Subtotal，使用函数：Average 并检查 Add subtotal to: 中的所有条目（同时选中 Replace current subtotals 和 Summary below data）。

选择并复制整个工作表，选择性粘贴，顶部的值。过滤以选择 ColumnA 包含`a`并将可见的内容复制/粘贴到新工作表的 A1 中。删除 ColumnA 那里。在 A12 中输入：

```
=OFFSET(A12,-10,) 
```

上下复制到第 5001 行。在顶部选择工作表、复制和选择性粘贴、值。选择工作表并在 ColumnA 上排序。

# zend-framework - Zend Admin Controller 启动 Htaccess 登录？

> ID：13132033
> 
> 赞同：0
> 
> 时间：2012-10-30T03:00:54.730
> 
> 标签：zend-framework

我的新应用程序中有几个控制器。一种叫做管理员。出于某种原因，每当我尝试访问 mydomain.com/admin 时，我都会得到一个标准的 htaccess 登录屏幕？？我有标准的 .htaccess 文件，其他一切正常，这让我觉得 /admin 有特殊用途？我的控制器此时没有做任何事情。它只是：

```
class AdminController extends Zend_Controller_Action
{

    public function init()
    {
    }

    public function indexAction()
    {
    }

} 
```

我也有一个空洞的看法。与其他控制器相同。有人有想法吗？我是否错过了有关保留控制器的内容或其他内容？

顺便说一句，.htaccess 登录说明了我的 svn 服务器... SVN 中有什么东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:01:33.197

对不起。我的错。我有一个名为 admin 的 svn 项目，它在 Apache 中具有优先权。现在都修好了。

# html - 是否可以制作仅在使用锚链接时才可见的网页的隐藏部分？

> ID：13132034
> 
> 赞同：0
> 
> 时间：2012-10-30T03:00:58.423
> 
> 标签：html, anchor

我想向现有网页添加一个部分，但只有在用户键入带有特定锚链接的 URL 时才使其可见。这可能吗？或者如果 URL 有某个锚链接，是否可以重定向到新页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:43:57.400

也许试试这个。首先将隐藏部分设置为`display: none;`，然后使用 jQuery 根据 url 中的哈希取消隐藏它。

CSS：

```
.hiddenDiv {
  display: none;
} 
```

jQuery：

```
function showDiv() {
  if (window.location.hash === '#hashNecessaryToShowDiv') {
    $('.hiddenDiv').css('display', 'block');
  }
}
showDiv(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:49:58.480

由于您不介意使用 JS，因此您可以通过监听`onhashchange`事件来决定是否应该显示特定部分。

[http://jsfiddle.net/C3kHT/](http://jsfiddle.net/C3kHT/)

```
window.addEventListener("hashchange",function(){
  if(location.hash=="#trap") /*show section*/
},false); 
```

抱歉，我手头没有 IE 8，所以我不确定小提琴代码是否真的在 IE 8 中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:30:28.380

如果 url 具有特定的锚点，则重定向：

```
var anchor = "#tag";
var url = "http://www.google.com";
if(window.location.indexOf(anchor) !== -1){
    window.location = url;
} 
```

# c++ - 想在另一个 CPP 中使用 C++ 类时感到困惑。[来自 C#]

> ID：13132038
> 
> 赞同：2
> 
> 时间：2012-10-30T03:01:18.050
> 
> 标签：c++

在 OOP 中，您希望将程序分解为多个类。

在 C# 中，您可以这样做：

```
namespace a
{
  public class ClassA
  {
     //Methods...that are defined and have code in them.

  }
} 
```

要使用该类，您只需执行“使用命名空间 a；”。

假设我想在 C++ 中创建一个类，定义它们，然后将代码放入其中。

```
class ClassA
{
  public:
   void methodA();
}

ClassA::methodA()
{
  //implementation.
} 
```

要访问此实现，您只需使用#include "ClassA.h"。我完全理解，然后您必须再次实现该代码？这似乎适得其反，因为我喜欢将我的项目分散到很多课程中。

那么实现 ClassA 并且不再重新实现它的所有方法的正确程序是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:04:41.420

您不必在每个 CPP 文件中重新实现它们，C++ 链接器负责确保定义匹配在一起。

所有你需要的是：

一个标题：

```
#ifndef FOO_H
#define FOO_H

class Foo{
  //Junk goes here
};

#endif 
```

一个cpp：

```
#include "foo.h"

//implementations for junk goes here
void Foo::junk(){

} 
```

然后你可以包括`foo.h`. 每个 cpp 都会被编译成一个`.o`文件。然后，这些`.o`文件被交给链接器，链接器可以找出定义的位置并正确地将代码拼凑在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T03:05:38.547

C 和 C++ 有不同的做事方式。只要您有一个类、方法或外部变量的声明，编译器就会很高兴地编译并在链接时忽略方法、类等的实际定义。这简化了很多事情，但基本上编译器会在目标文件中给链接器留下一个提示，说链接器需要在这里插入方法的地址。

所以你只需要包含“ClassA.h”文件就可以编译好了。

Because of this you see some different behavior in C and C++ than you would in C#. For example, in C or C++ it's perfectly fine to have two different items (methods, variables, etc) that are named the same in different files as long as neither one is visible outside the file. Whereas in C# you would have to use different namespaces or different names. Note - not that I'm saying this is good practice, it's just possible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T03:05:23.033

头`.h`文件包含类规范。相应的`.cpp`文件包含实现并编译为`.o`文件。在开发过程中，您将包含`.h`文件以访问该类提供的 API。在编译/链接阶段，您还可以将`.o`文件与源文件一起包含以形成最终的二进制文件。你不需要再次实现任何东西，你正在使用的类。

# excel - matlab中的Excel函数

> ID：13132041
> 
> 赞同：0
> 
> 时间：2012-10-30T03:01:49.610
> 
> 标签：excel, matlab

执行 Matlab 内置或用户定义的任何 excel 函数的正确程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:21:34.140

我认为您正在寻找的命令是`actxcontrol`. 文档的链接在这里。

[http://www.mathworks.com/help/matlab/ref/actxcontrol.html](http://www.mathworks.com/help/matlab/ref/actxcontrol.html)

以下是 MathWorks 支持页面中的一个小型通用示例：

[http://www.mathworks.com/support/solutions/en/data/1-17PWC/index.html](http://www.mathworks.com/support/solutions/en/data/1-17PWC/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T07:26:42.983

我知道这个线程很旧 - 但它仍然会出现在谷歌中。

从 MATLAB 调用 excel 公式可以通过使用 actxserver 使用几行代码直接完成。在此示例中，我将调用函数 STEYX，因为它在 MATLAB afaik 中没有直接等效项。'x' 和 'y' 是 MATLAB 变量（在这种情况下，它们必须是大小相同的向量）

xlsobj = actxserver('Excel.Application'); syx = xlsobj.WorksheetFunction.StEyx(y,x);

就是这样……类似的语法适用于所有其他 Excel 函数。

从 Excel 解析的错误是可怕的 - 确保你知道你的输入并知道你的 Excel 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T17:41:22.107

或者您可以使用系统命令和 .vbs 脚本...

```
system('Your_excel_macro_launch_command_here') 
```

此处讨论了执行此操作的方法：

[从命令行或批处理文件运行 Excel 宏的方法？](https://stackoverflow.com/questions/2050505/way-to-run-excel-macros-from-command-line-or-batch-file)

# perl - 如何让我的 Poet 网站在 Apache2 下运行？

> ID：13132042
> 
> 赞同：3
> 
> 时间：2012-10-30T03:01:50.390
> 
> 标签：perl, apache2, plack, poet

如果我目前有一个 Poet 网站在独立的 plackup 服务器下运行（通过 run.pl），我如何配置 Apache2 来托管这个 Poet 网站？

搜索“+apache2 +poet”会检索到大量关于使用 Apache2（以发表他们的诗歌）的诗人的结果，以及诸如“Mason 2 will work with Apache/mod_perl 1”之类的文章。然后有诸如[http://metacpan.org/pod/PSGI::FAQ](http://metacpan.org/pod/PSGI%3a%3aFAQ)之类的文档告诉我“在 Plack 中，我们已经支持大多数 Web 服务器，例如 Apache2”，但没有提供有关如何提供此类支持的任何细节。

为了让我现有的 Poet 网站在 Apache 下运行，我需要的最小 Apache2 配置文件是什么？

这是我现有的项目布局：

```
/Users/me/Documents/Ponies/poet
    bin
        run.pl
    comps
        index.mc
    conf
    data
    db
    lib
    logs
    static
    t 
```

这是我的起始 httpd.conf 文件：

```
LoadModule log_config_module /opt/local/apache2/modules/mod_log_config.so

Listen 5000
ServerRoot /Users/me/Documents/Ponies/poet
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog logs/access.log combined
Errorlog logs/error.log
PidFile httpd.pid
LockFile accept.lock
User  me
Group staff

<VirtualHost *:5000>
ServerName foo.local
DocumentRoot /Users/me/Documents/Ponies/poet/
AddHandler cgi-script .cgi .pl .py
<Directory "/Users/me/Documents/Ponies/poet">
Options +ExecCGI
</Directory>
</VirtualHost> 
```

只要有一些迹象表明我需要指向 Poet 网站的哪个部分以获取诸如[http://foo.local/ponies/](http://foo.local/ponies/)之类的 URL来生成内容，我们将不胜感激。由 生成`…/Ponies/poet/comps/index.mc`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:01:50.390

你可以使用`mod_perl`. 阅读[mod_perl 快速入门指南](http://perl.apache.org/docs/2.0/user/intro/start_fast.html)，然后查看[Plack 文档](http://search.cpan.org/~miyagawa/Plack-1.0009/lib/Plack.pm)。请注意，您想要在 Poet 环境中使用的密钥文件是`bin/app.psgi`. 结合 PSGI 规范和 Plack 文档研究该文件应该可以帮助您了解正在发生的事情（请记住，Plack 只是 PSGI 的实现）。

为了让您快速入门，请使用以下 httpd.conf 文件；注意 LoadModule 行和 VirtualHost 内容的替换：

```
LoadModule log_config_module /opt/local/apache2/modules/mod_log_config.so
LoadModule perl_module       /opt/local/apache2/modules/mod_perl.so

Listen 5000
ServerRoot /Users/me/Documents/Ponies/poet
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
CustomLog logs/access.log combined
Errorlog logs/error.log
PidFile httpd.pid
LockFile accept.lock
User  me
Group staff

<VirtualHost *:5000>
ServerName foo.local
DocumentRoot /Users/me/Documents/Ponies/poet/
<Location />
    SetHandler perl-script
    PerlResponseHandler Plack::Handler::Apache2
    PerlSetVar psgi_app /Users/me/Documents/Ponies/poet/bin/app.psgi
</Location>
</VirtualHost> 
```

当然，这是一个最低限度的配置，它将让你`plackup`进入与默认 Poet 安装相同的端口 5000 上的“真实”Web 服务器，并且不考虑安全性等小事，与多个应用程序共享主机，或网站管理员、系统管理员或网络安全管理员希望您考虑的任何其他详细信息。

# android - 如何在 Android 上制作 vcard/vcal Ndef 消息

> ID：13132045
> 
> 赞同：4
> 
> 时间：2012-10-30T03:01:55.350
> 
> 标签：android, nfc, ndef

我是 Android 编码的新手，我对 NFC 技术很感兴趣。我的第一步专注于标签读/写模式，目前我看不到有关如何使用 Vcard/Vcal MIME 类型和 NDEF 记录/消息的大量信息。

如果有人可以发布一些示例代码或者更好地指向类似教程的资源，那就太好了！

编辑：这是我一直在使用的代码，它搞砸了。通过一些修改，我已经能够编写纯文本和智能海报/urs 数据。另外要记住的是，我使用的是 Type 2 NFC 标签，由于存储容量有限，我只想将姓名和电话号码保存在 Vcard 上，或者将事件名称和日期保存在 Vcal 记录上。谢谢！

公共类 VcardActivity 扩展活动 {

```
NfcAdapter adapter;
PendingIntent pendingIntent;
IntentFilter writeTagFilters[];
Tag tag;
Context ctx;
boolean writeMode;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_text);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    ctx = this;
    Switch swWrite = (Switch) findViewById(R.id.switchWriteText);
    //final TextView msg = (TextView) findViewById(R.id.editText1);
    final String msg = "BEGIN:VCARD\n" +
            "VERSION:2.1\n" +
            "N:Gump;Forrest\n" +
            "FN:Forrest Gump\n" +
            "ORG:Bubba Gump Shrimp Co.\n" +
            "TITLE:Shrimp Man\n" +
            "TEL;WORK;VOICE111) 555-1212\n" +
            "TEL;HOME;VOICE404) 555-1212\n" +
            "ADR;WORK:;;100 Edge;Baytown;United\n" +
            "EMAIL;PREF;INTERNET:forrestgump@example.com\n " +
            "END:VCARD";
    swWrite.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            if (isChecked) {
                try {
                    if (tag == null) {
                        Toast.makeText(ctx,
                                ctx.getString(R.string.error_detected),
                                Toast.LENGTH_SHORT).show();
                    } else {
                        write(msg, tag);
                        Toast.makeText(ctx,
                                ctx.getString(R.string.ok_writing),
                                Toast.LENGTH_LONG).show();
                    }
                } catch (IOException e) {
                    Toast.makeText(ctx,
                            ctx.getString(R.string.error_writing),
                            Toast.LENGTH_LONG).show();
                    e.printStackTrace();
                } catch (FormatException e) {
                    Toast.makeText(ctx,
                            ctx.getString(R.string.error_writing),
                            Toast.LENGTH_LONG).show();
                    e.printStackTrace();
                }

            }
        }
    });

    /* INTENT FILTER */
    adapter = NfcAdapter.getDefaultAdapter(this);
    pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this,
            getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);
    IntentFilter tagDetected = new IntentFilter(
            NfcAdapter.ACTION_TAG_DISCOVERED);
    tagDetected.addCategory(Intent.CATEGORY_DEFAULT);
    writeTagFilters = new IntentFilter[] { tagDetected };
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_text, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
        NavUtils.navigateUpFromSameTask(this);
        return true;
    }
    return super.onOptionsItemSelected(item);
}

private void write(String text, Tag tag) throws IOException,
        FormatException {

    NdefRecord[] records = { createRecord(text) };
    NdefMessage message = new NdefMessage(records);
    // Get an instance of Ndef for the tag.
    Ndef ndef = Ndef.get(tag);
    // Enable I/O
    ndef.connect();
    // Write the message
    ndef.writeNdefMessage(message);
    // Close the connection
    ndef.close();
}

private NdefRecord createRecord(String text)
        throws UnsupportedEncodingException {
    String msg = "BEGIN:VCARD\n" +
            "VERSION:2.1\n" +
            "N:Gump;Forrest\n" +
            "FN:Forrest Gump\n" +
            "ORG:Bubba Gump Shrimp Co.\n" +
            "TITLE:Shrimp Man\n" +
            "TEL;WORK;VOICE:55-1212\n" +
            "TEL;HOME;VOICE:55-1212\n" +
            "ADR;WORK:;;100 Edge;Ban;United\n" +
            "EMAIL;PREF;INTERNET:p@example.com\n " +
            "END:VCARD";

            byte[] textBytes = msg.getBytes();

            NdefRecord textRecord = new NdefRecord(NdefRecord.TNF_MIME_MEDIA,
            "text/x-vCard".getBytes(), new byte[] {}, textBytes);

    return textRecord;
}

@Override
protected void onNewIntent(Intent intent) {
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
        Toast.makeText(this,
                this.getString(R.string.ok_detection) + tag.toString(),
                Toast.LENGTH_LONG).show();
    }
}

@Override
public void onPause() {
    super.onPause();
    WriteModeOff();
}

@Override
public void onResume() {
    super.onResume();
    WriteModeOn();
}

private void WriteModeOn() {
    writeMode = true;
    adapter.enableForegroundDispatch(this, pendingIntent, writeTagFilters,
            null);
}

private void WriteModeOff() {
    writeMode = false;
    adapter.disableForegroundDispatch(this);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:48:25.313

我编写了一个[NDEF 库](http://code.google.com/p/ndef-tools-for-android/)，它提供高级（即不是字节数组）NDEF 记录/消息表示，它还附带一个样板项目，演示在 Android 上的使用。

为了了解 NDEF 格式本身，我还编写了一个[Eclipse 插件](http://code.google.com/p/nfc-eclipse-plugin/)，它提供了一个基于文件的图形编辑器。

干杯:-)

# gcc - 在这些情况下，隐藏的 GCC 可见性有什么作用？

> ID：13132046
> 
> 赞同：3
> 
> 时间：2012-10-30T03:02:06.477
> 
> 标签：gcc, dll, shared-libraries, ld, dllexport

我正在写一个库：一些符号是供用户使用的，还有一些是内部烹饪的。[我在 GCC wiki 的这个页面](http://gcc.gnu.org/wiki/Visibility)之后开始使用可见性属性，但我不太清楚该属性在某些情况下的作用：

```
#define TATO_SYM_INTERNAL __attribute__((visibility("internal")))
#define TATO_SYM_PUBLIC __attribute__((visibility("default")))

struct linkset
{
public:
    typedef sentence::id      *     iterator;
    typedef const sentence::id   *  const_iterator;

    TATO_SYM_PUBLIC    linkset() ;
    TATO_SYM_INTERNAL  void allocate( const datainfo & _datainfo );
    TATO_SYM_PUBLIC    void addLink( sentence::id _a, sentence::id _b );
    TATO_SYM_PUBLIC    bool areLinked( sentence::id _a, sentence::id _b ) const;
    TATO_SYM_PUBLIC    std::pair<const_iterator, const_iterator> getLinksOf( sentence::id _a ) const;

private:
    typedef std::vector<sentence::id> linksArray;
    linksArray                                  m_links;
    std::vector< std::pair<size_t, size_t> >    m_offsets;

private:
    TATO_SYM_INTERNAL linkset( const linkset & ) = delete;
    TATO_SYM_INTERNAL linkset & operator=( const linkset & ) = delete;
};

inline
void linkset::addLink( sentence::id _a, sentence::id _b ) TATO_RESTRICT
{
  // internal stuff
} 
```

首先，用户没有理由打电话`allocate()`。成员函数没有记录，它只是为了我的乐趣。在这种情况下，隐藏符号是否有意义？

第二，`m_links`和`m_offsets`。如果我为它们添加可见性属性，这意味着什么？换句话说，当我添加`TATO_SYM_INTERNAL`到 m_links 时，GCC 会做什么？

第三，隐藏已删除成员函数的可见性是否意味着什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-21T01:49:11.203

首先，`internal`能见度[有点危险](https://stackoverflow.com/a/27421487/1836596)。考虑改用`hidden`可见性，这样更安全。

可见性标志确定链接器是否可以看到符号。如果您的库之外的人试图调用该`allocate`方法，他们将收到一个链接器错误，就好像该方法根本没有实现一样。如果您真的不希望外部人员调用该方法，这可能很好，但链接器错误通常比编译器错误更令人困惑。最好将该方法标记为“私有”（如果可能），这将为您的用户提供更好的错误消息体验。

由于`m_links`并且`m_offsets`已经是私有的，因此外部代码无法访问它们。更重要的是，它们没有链接器符号，因此没有什么可隐藏的。应用此属性将无效。

对于已删除的成员函数（如复制构造函数）也是如此。这些函数没有在任何地方实现（它们不可能），所以它们没有链接器符号，所以可见性属性什么都不做。

# c# - MS Word 格式数据系列线帽类型

> ID：13132047
> 
> 赞同：1
> 
> 时间：2012-10-30T03:02:50.373
> 
> 标签：c#, ms-word, ms-office

我正在使用 C# 在 Microsoft Word 中创建图表。我可以通过代码成功完成大部分格式化。但是，我仍然需要一些帮助。请看下图。

![格式化数据系列截图](../Images/4cccdf1d538682c5d1f984bf6010b148.png)

这是当您右键单击图表线并选择“格式化数据系列”时“格式化数据系列”窗口的屏幕截图。
唯一给我带来麻烦的两个属性是 Cap Type 和 Join Type。当您更改它们时，VBA 记录器甚至不会记录任何内容。

我需要能够通过 C# 更改 Line 上的 cap 类型。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:24:09.577

据我所知，`Cap type`并`Join type`没有通过 Word/Excel 中的对象模型公开。我能想到的唯一方法是`SendKeys`在 VBA 中使用，但我不知道如何在 C# 中实现它 - 这不是微不足道的，但可能有一些实现。但是，即使您可以正常工作，我也不建议您使用该路线-Word 2007、Word 2010 和即将推出的 Word 2013 都有一些不同的 UI-s，因此需要发送的击键会有所不同。用户也可以在您尝试将键发送到 Word 实例时按下键。然后你必须处理具有多个系列的图表等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T13:41:12.250

您可以提前创建一个具有 Flat 的图表，并使用 VBA 仅编辑线端坐标，因此样式保持不变。

# node.js - node.js fs.rename() 错误 enoent

> ID：13132048
> 
> 赞同：3
> 
> 时间：2012-10-30T03:02:56.470
> 
> 标签：node.js, express, rename, fs

将文件上传到我的服务器后，我尝试将其移动到另一个文件夹（同一个磁盘），但出现错误

```
{[Error:ENOENT,rename 'F\myproject\1b231234nsdifhoi2323']
  errno:34,
  code:ENOENT,
  path:'F\\myproject\\1b231234nsdifhoi2323'
} 
```

我在窗户上并使用

```
app.use(express.bodyParser({
    uploadDir:'./Temp'
})); 
```

这是我的重命名代码

```
exports.upload = function(req, res,next){
    console.log( req.body);
    console.log(req.files);
    var tmp_path = req.files.product_video.path;
    var target_path = '\\Video\\' + req.files.product_video.name;

    console.log(tmp_path);       // Temp\1b231234nsdifhoi2323
    console.log(target_path);    // \Video\name

    fs.rename(tmp_path, target_path, function(err) {
        if (err) {
            console.log(err)
        };
        fs.unlink(tmp_path, function() {
            if (err){
                console.log(err)
            }else{
                res.send('File uploaded to: ' + target_path + ' - ' + req.files.product_video.size + ' bytes');

            }
        });
    });
}; 
```

看起来我弄错了路径，但我无法弄清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-30T14:42:42.913

您正在访问一个**不存在的文件**- 因为路径没有。

**尝试编辑路径：**
更改`"F\myproject\1b2"`为`"F:/myproject/1b2"`或`"F:\myproject\1b2"`

**如果不起作用，请使用：**（__dirname 将创建一个相对于脚本的路径）
`__dirname + "/../../myproject\1b2"`

**调试：**
试试`read`这个文件（如果你得到同样的错误 - 这意味着路径不好并且`rename`很好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T10:31:54.450

为避免斜线问题，您可以使用`path.sep`它来处理`\`基于操作系统的斜线。

# emacs - 将现有的 YAsnippet 模式指向新的文件类型

> ID：13132050
> 
> 赞同：3
> 
> 时间：2012-10-30T03:03:11.977
> 
> 标签：emacs, bottle, yasnippet

我正在学习 Bottle 教程，而 HTML 的 YAsnippet 模式可以让我在制作 Bottle 模板文件 ( `.tpl`) 时获得很大一部分生产力奖励。

有没有办法告诉 YAsnippet 在`html-mode`打开扩展的文件类型时查看现有条目`.tpl`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T09:16:34.503

鉴于 Bottle 模板文件位于 中`bottle-mode`，请在您的文件夹中创建一个文件`snippets`：`/my/snippets/bottle-mode/.yas-parents`其中内容为：

```
html-mode 
```

这将使 yasnippet 为瓶子模式加载 html 模式片段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T05:21:52.763

一种可能的解决方案：`tpl`将文件与`html-mode`：

```
(add-to-list 'auto-mode-alist '("\\.tpl\\'" . html-mode)) 
```

另一种：将片段中的目录复制到与您用于文件`html-mode`的模式同名的目录中。`tpl`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T09:51:44.283

不确定它是否比其他更简单，但我做了什么：创建了一个符号链接，其目标模式的名称指向源模式的片段目录。例如：

```
$ ln -s ~/.emacs.d/yasnippets/js-mode ~/.emacs.d/yasnippets/javascript-mode 
```

# c - 使用 strncpy。Valgrind 抛出无效读取

> ID：13132051
> 
> 赞同：4
> 
> 时间：2012-10-30T03:03:24.743
> 
> 标签：c, malloc, valgrind, strncpy

我做了这个功能：

```
void procesar_llamadaAFuncion(t_proceso *unProceso, char *sentencia){
    char *nombreFuncion = sentencia;
    char *nombreFuncionSinParentesis = NULL;

    string_trim(&nombreFuncion);
    nombreFuncionSinParentesis = malloc(sizeof(char)*(strlen(nombreFuncion)-2));
    strncpy(nombreFuncionSinParentesis, nombreFuncion, strlen(nombreFuncion)-2);

    puts(nombreFuncionSinParentesis);

    push_stack(unProceso->pcb->seg_stack, nombreFuncionSinParentesis, unProceso->pcb->program_counter);

    unProceso->pcb->program_counter = get_pos_funcion(unProceso->pcb->funciones, nombreFuncionSinParentesis);

    free(nombreFuncion);
    free(nombreFuncionSinParentesis); 
```

t_proceso 是什么并不重要，问题是这个函数接收一个字符数组。

该函数将始终接收其“某物（）”的字符数组，我要做的是删除最后两个字符“（）”，然后调用函数push_stack（）。

问题是当我运行 Valgrind 时，我得到了这个：

```
==17129== Invalid read of size 1
==17129==    at 0x4C2BFD4: __GI_strlen (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==17129==    by 0x50BFCEB: puts (ioputs.c:37)
==17129==    by 0x403D30: procesar_llamadaAFuncion (proceso.c:455)
==17129==    by 0x40313D: procesar_siguiente_instruccion (proceso.c:132)
==17129==    by 0x404B1A: probarProcesos (test.c:83)
==17129==    by 0x404C7F: main (test.c:111)
==17129==  Address 0x5436da8 is 0 bytes after a block of size 8 alloc'd
==17129==    at 0x4C2B6CD: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)
==17129==    by 0x403CDF: procesar_llamadaAFuncion (proceso.c:452)
==17129==    by 0x40313D: procesar_siguiente_instruccion (proceso.c:132)
==17129==    by 0x404B1A: probarProcesos (test.c:83)
==17129==    by 0x404C7F: main (test.c:111) 
```

我不知道我做错了什么，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:06:40.290

这是因为[`strncpy`](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)不会以空值终止目标字符串：

> 将源的前 num 个字符复制到目标。如果在复制 num 个字符之前找到源 C 字符串的结尾（由空字符表示），则用零填充目标，直到总共写入了 num 个字符。
> 
> 如果 source 比 num 长（因此，在这种情况下，destination 可能不是以 null 结尾的 C 字符串），则不会在目标末尾隐式附加空字符。

这应该可以解决问题：

```
size_t nobmreLen = strlen(nombreFuncion)-2;
// Don't forget to add +1 for the null terminator
nombreFuncionSinParentesis = malloc(sizeof(char)*(nobmreLen+1));
strncpy(nombreFuncionSinParentesis, nombreFuncion, nobmreLen);
nombreFuncionSinParentesis[nobmreLen] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:45:26.697

```
 nombreFuncionSinParentesis = malloc(sizeof(char)*(strlen(nombreFuncion)-2)); 
```

以上不正确，您还需要为空终止分配空间。我不明白 -2 做了什么，但是在您尝试的任何内容中添加 +1 字节，即

`malloc(sizeof(char)*(strlen(nombreFuncion)-2 + 1));`

正如评论中所建议的那样，不应使用 strncpy，它是为古代 unix 版本的特定需求而编写的一个不起眼的函数。[阅读这篇文章](https://stackoverflow.com/questions/2114896/why-is-strlcpy-and-strlcat-considered-to-be-insecure)，或者确实是作为对另一个答案的评论而发布的好[文章。](http://the-flat-trantor-society.blogspot.se/2012/03/no-strncpy-is-not-safer-strcpy.html)

```
free(nombreFuncion); 
```

上面很可疑，你正在做`free(sentencia)`的是分配在函数之外的。如果这是意图，您应该考虑更好的程序设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:07:04.720

你必须空终止你的字符串。这对参数“sentencia”和删除括号的结果都很重要

# php - WordPress 设置 API - 允许多个复选框选择保存到数据库

> ID：13132055
> 
> 赞同：1
> 
> 时间：2012-10-30T03:04:25.283
> 
> 标签：php, wordpress, api, settings, woocommerce

使用 WooCommerce 插件，我为每个可用属性创建了一个复选框。我的问题是，选择多个复选框时，只将一个选择推入数据库。我的代码如下...

```
function faceted_search_init_fn(){

// set database functions class
global $wpdb;

$attribute_values = $wpdb->get_results("SELECT slug FROM wp_terms INNER JOIN wp_term_taxonomy INNER JOIN wp_woocommerce_attribute_taxonomies WHERE SUBSTR(wp_term_taxonomy.taxonomy, 4) = wp_woocommerce_attribute_taxonomies.attribute_name AND wp_term_taxonomy.term_id = wp_terms.term_id", ARRAY_A);

register_setting('faceted_options', 'faceted_options' );
add_settings_section('main_section', 'Main Settings', 'section_text_fn', __FILE__);
add_settings_field('plugin_chk', 'My Checkbox', 'setting_chk_fn', __FILE__, 'main_section', $attribute_values); 
```

}

```
function setting_chk_fn($attribute_values) {    
    foreach($attribute_values as $attribute_value) {
        echo $attribute_value['slug'];
        echo "<input id='plugin_chk' name='faceted_options[noindex]' type='checkbox' value='" . $attribute_value['slug'] . "' />";
    }
} 
```

我很欣赏任何见解。

# java - 防止对表单登录页面的 HTTP 无效直接引用防止重定向

> ID：13132056
> 
> 赞同：1
> 
> 时间：2012-10-30T03:04:31.750
> 
> 标签：java, tomcat6

我正在使用 Java 和 Tomcat6（Uni 要求）

我知道是什么导致了这个错误，但我正在寻找一种方法来解决它。如果有人输入 http:\mywebsite.com\login.jsp，它将在登录时抛出错误（并且他们不会登录）。

如果安全部分未访问该页面，是否有办法强制重定向。有没有办法覆盖现有的登录系统（使用操作？）并从那里进行重定向，（或者让它将我发送回登录页面，如果从那里进行身份验证，我可以重定向）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:11:12.007

将不应直接访问的 JSP（和任何其他资源）——即必须从 servlet 转发到的 JSP（和任何其他资源）放在`WEB-INF`. [为什么要把 JSP 放在 WEB-INF 中？](https://stackoverflow.com/questions/6825907/why-put-jsp-in-web-inf)

# java - 使用 PrintWriter 编写新的 HTML 时出错

> ID：13132057
> 
> 赞同：1
> 
> 时间：2012-10-30T03:04:38.313
> 
> 标签：java, servlets, printwriter

我使用 PrintWriter 来执行此代码：

```
 response.setContentType("text/html;charset=UTF-8");
        PrintWriter out = response.getWriter();
        try {
            /* TODO output your page here. You may use following sample code. */
            out.println("<html>");
            out.println("<head>");
            out.println("<title>Update Page</title>");
            out.println("</head>");

            out.println("<body>");
            out.println("<center>");
            out.println("<h1>Please choose ID</h1>");
            out.println("</center>");
            out.println("<table width='359' border='1' align='center'>");
            out.println("<tr>");
            out.println("<td width='103'>ID:</td>");
            out.println("<th width='246'>");
            out.println("<select name='ID' id='ID' style='width:170px;' >");
            out.println("<option></option>");
            out.println("</select>");
            out.println("</th>");
            out.println("</tr>");
            out.println("<tr>");
            out.println("<td>Name:</td>");
            out.println("<th><input type='text' name='Name' id='Name' style='width:170px;' /></th>");
            out.println("</tr>");
            out.println("<tr>");
            out.println("<td>Address:</td>");
            out.println("<th><input type='text' name='Address' id='Address' style='width:170px;'/></th>");
            out.println("</tr>");
            out.println("<td>Email:</td>");
            out.println("<th><input type='text' name='Email' id='Email' style='width:170px;'/></th>");
            out.println("</tr>");
            out.println("<tr>");
            out.println("<td>Phone Number:</td>");
            out.println("<th><input type='text' name='Phone' id='Phone' style='width:170px;'/></th>");
            out.println("</tr>");
            out.println("<tr>");
            out.println("<td></td>");
            //=================
            out.println("<td>");
            out.println("<div>");        
            out.println("<input type='submit' name='FillValue' value='Fill ID' style='float:left'/>");

            out.println("<form action='UpdateServlet' method='post'>");
            out.println("<input type='submid' name='Submid' value='Submit'  style='float:right'/>");
            out.println("</form>");
            out.println("</div>");
            out.println("</td>");
            out.println("</tr>");
            //==============
            out.println("</table>");
            out.println("</body>");
            out.println("</html>");
        } finally {
            out.close();
        } 
```

但是当我单击 Submid 按钮时出现问题，结果是：

HTTP 状态 404 - /DungDV01852_Lab1_2_3/UpdateServlet

类型状态报告

消息 /DungDV01852_Lab1_2_3/UpdateServlet

描述 请求的资源 (/DungDV01852_Lab1_2_3/UpdateServlet) 不可用。Apache Tomcat/6.0.29

我有类 updateServlet。另一个：我有 HTML：

```
 <td>
                <div>
                    <form action="FillServlet" method="post">
       <input type="submit" name="FillValue" value="Fill ID" style="float:left"/>
                    </form>
    <input type="submit" name="Submid" id="Submid" value="Submit"style="float:right"/>
                </div>
            </td> 
```

它完全运行，但是当我使用 PrintWriter 编写新的 HTML 时也是错误的。请帮我。感谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:43:59.180

您问题中的代码不会导致`404`错误。A`404`会发生是因为您的代码通过调用显式设置了 404 响应`response.sendError(...)`，或者因为该请求一开始就没有到达您的 servlet。后者最可能的原因是您的`web.xml`文件没有正确配置和映射您的 servlet。

如果您需要更多帮助，请将整个`web.xml`文件添加到问题中。

# php - 如果会话为空或参数不同，则将 PHP 参数分配给会话

> ID：13132066
> 
> 赞同：1
> 
> 时间：2012-10-30T03:06:18.327
> 
> 标签：php, session

**问题**

我的客户在最后得到一个带有参数的 URL，当他们点击它时，URL 看起来像这样

```
www.website.com?utm_content=1223324 
```

我想分配`1223324`到 a`session`并在整个网站上携带它，直到`utm_content`值不同。如果价值不同，我想在整个网站上携带这个新价值。

**我想做什么**

我试图抓住`utm_content`价值并将其传递出去，直到用户提交我的联系表格。我正在添加`utm_content`到联系表单提交中，所以它会出现在我身上。如果用户单击具有不同值的另一个链接，我想`utm_content`用新的 ID 替换当前 ID，以便通过联系表向我提供新 ID

**我的 PHP 代码**

```
$getTrackingCodeCurrentURL = $_GET['utm_content'];

if(isset($_SESSION['getSSourceId'])){

    if($getTrackingCodeCurrentURL != $_SESSION['getSSourceId'])
    {
        $_SESSION['getSSourceId'] = $getTrackingCodeCurrentURL;
        echo "Session NOT the same : " . $_SESSION['getSSourceId'];
    }
    else{

        echo "Session SET TO same : " . $_SESSION['getSSourceId'];
    }

 } else {

    $_SESSION['getSSourceId'] = $getTrackingCodeCurrentURL;
    echo "Session not set : " . $_SESSION['getSSourceId'];

} 
```

**问题**

当访问者转到另一个页面时，`getSSourceId`它不会被传递。我认为是因为它将`$getTrackingCodeCurrentURL`值（当访问者转到另一个页面时为 NULL）分配给`$_SESSION['getSSourceId']`. 我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:14:24.937

这就是我所需要的

```
if(isset($_GET['utm_content'])){

    $_SESSION['getSSourceId'] = $_GET["utm_content"]; 
    $getTrackingCodeCurrentURL = $_SESSION['getSSourceId'] ;
    echo "IS SET : ".$getTrackingCodeCurrentURL;

 } else {

     $getTrackingCodeCurrentURL = $_SESSION['getSSourceId'] ;
    echo "NOT SET : ".$getTrackingCodeCurrentURL;

} 
```

# php - Changing a php variable with html

> ID：13132070
> 
> 赞同：-2
> 
> 时间：2012-10-30T03:06:57.227
> 
> 标签：php, html

I am trying to change the value of a php variable when the user clicks a html li element which has been generated using php. I am not getting an error but it doesn't appear that the variable is changing. Is there something wrong with the below code? Note it is inside a php file within php tags. Thanks.

```
$testvalue = "a";
echo '<li onClick="'.$testvalue.' = \''."b".'\' ">test</li>'; 
```

Edit: I fixed it! Super happy. I was able to use javascript to parse the variable where I needed it before the php function was called. Thanks for the help guys...or girls (probably not :) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:08:59.730

You cannot do this.

PHP code is executed server-side. Your `onclick` function is executed client-side. In other words, by the time the user clicks on this `<li>` element, the PHP code has completed execution.

You can, however, try using AJAX to make your JavaScript interact with your server, depending on what you are actually trying to accomplish.

# android - Android MapView - 自定义多边形叠加无法在平移或 Zomm 上正确重置

> ID：13132073
> 
> 赞同：1
> 
> 时间：2012-10-30T03:08:03.843
> 
> 标签：android, overlay

我正在编写一个需要在地图上显示多边形的应用程序。我研究并发现最好的方法是继承 Overlay 类并覆盖 draw 方法。它工作得很好——但是当我滚动或平移时，原始多边形的形状和画布位置不会消失——所以当我平移时，我会不断得到越来越多相同形状的多边形——缩放时也是如此。这是我的自定义叠加层的代码。一旦我得到多边形形状的坐标，我就会调用 setOverlayType 方法——这样 draw 方法就有了它需要的数据来确定在哪里绘制多边形。

这可能是愚蠢的事情！

```
public class myOverLay extends Overlay {

public final int OVERLAY_TYPE_NORMAL = 0;
public final int OVERLAY_TYPE_SCALED = 1;

private GeoPoint pVerts[];
private GeoPoint pCenter;
private Paint paint = new Paint(Paint.ANTI_ALIAS_FLAG);
private Path path = new Path();
private Context mContext;
private int overlayType;
private String pName = "";

public myOverLay(Context context) {
    super();
    this.mContext=context;
}

public void setOverlayType(GeoPoint[] polyVerts, GeoPoint polyCenter, int overlayT, String pn) {
    this.pVerts = polyVerts;
    this.pCenter = polyCenter;
    this.overlayType = overlayT;
    this.pName = pn;
}   
@Override
public void draw(Canvas canvas, MapView mapview, boolean shadow)
{
super.draw(canvas,mapview,false);
Projection projection = mapview.getProjection();
Point pVert = new Point(0,0);

if(this.overlayType==0)
    paint.setColor(android.graphics.Color.argb(50, 255, 0, 0)); 
else
    paint.setColor(android.graphics.Color.argb(50, 255, 255, 0));

paint.setStrokeWidth(2);    
paint.setStyle(Paint.Style.FILL_AND_STROKE);
paint.setAntiAlias(true);

path.setFillType(Path.FillType.EVEN_ODD);
projection.toPixels(this.pVerts[0],pVert);
path.moveTo(pVert.x, pVert.y);
for(int x=0;x<=5;x++)
{
    projection.toPixels(this.pVerts[x],pVert);
    path.lineTo(pVert.x, pVert.y);
}
path.close();

Log.v("OVERLAY", "Draw Method Called");
canvas.drawPath(path, paint);

if(this.overlayType==0) //Icon
{   
    Point centerPt = new Point();
    projection.toPixels(this.pCenter, centerPt);
    Bitmap bmap=BitmapFactory.decodeResource(this.mContext.getResources(),     R.drawable.my_image);
    bmap = Bitmap.createScaledBitmap(bmap,20, 40, true);
    canvas.drawBitmap(bmap, centerPt.x-10, centerPt.y-50, null);
}
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:30:59.753

回答我自己的问题 - 我将 Paint 和 Path 变量从类变量移动到 draw 方法中的局部变量 - 确实很愚蠢 - 地图现在可以很好地平移、缩放和滚动多边形。

# c++ - C++ stl unordered_map，线程安全，每个线程只访问它自己分配的键并且可以编辑该值

> ID：13132075
> 
> 赞同：9
> 
> 时间：2012-10-30T03:08:11.013
> 
> 标签：c++, c++11, thread-safety, unordered-map

这是场景：

1）使用`unordered_map<int, vector<MyClass*>*>`假设我添加键 1、2、... 8
2）所有键在程序初始化时都用向量设置，没有更多的添加或删除
3）我有 8 个线程，其中 thread1 访问键 [1] , thread2 访问 key[2], ... thread8 访问 key[8] （即线程号只能访问该密钥号而不能访问其他密钥）

有时我将值向量 * 重新分配给另一个堆分配的集合。（即thread1执行`key[1] = new vector<MyClass*>`）

我相信这将是线程安全的，对吗？如果没有，我想我会使用 concurrent_unordered_map。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T03:29:48.230

这个问题的答案可以在以下位置找到`[res.on.data.races]/3`：

> C++ 标准库函数不得直接或间接修改可由当前线程以外的线程访问的对象 (1.10)，除非通过函数的非 const 参数直接或间接访问对象，包括 this。

此外，`[container.requirements.dataraces]/1`指出：

> 为了避免数据竞争（），实现`[res.on.data.races]`应考虑以下函数`const`：_ _ _`begin``end``rbegin``rend``front``back``data``find``lower_bound``upper_bound``equal_range``at``operator[]`

由于[unordered_map::operator[]](http://en.cppreference.com/w/cpp/container/unordered_map/operator_at)是非常量的，因此实现修改`unordered_map`调用的时间是合法的`operator[]`。您应该改用[unordered_map::find](http://en.cppreference.com/w/cpp/container/unordered_map/find)，明确要求将其视为`const`，因此不会修改`unordered_map`：

```
map.find(key)->second = new vector<MyClass*>; 
```

（作为旁注，您建议的设计看起来像是内存泄漏的秘诀。为什么不将其设为`unordered_map<int, std::unique_ptr<vector<MyClass*>>>`, 或`unordered_map<int,vector<MyClass*>>`？）

# iphone - 文字/推特图片

> ID：13132082
> 
> 赞同：0
> 
> 时间：2012-10-30T03:09:05.637
> 
> 标签：iphone, objective-c, ios, xcode, uitextfield

我正在尝试创建一个与默认文本消息应用程序具有相似功能的信使应用程序。我不知道如何让它给图像发文字或推特图像，因为我正在使用 a`UITextField`来允许最终用户能够输入和混合图像。我知道我可以通过一个`UIImageView`但是我需要用户能够输入和添加图像（就像股票信使应用程序一样）。
这可能吗？

# speech-recognition - 基本语音识别不起作用

> ID：13132086
> 
> 赞同：0
> 
> 时间：2012-10-30T03:09:28.970
> 
> 标签：speech-recognition, sapi

我试图识别简单的英语单词，但没有识别发生。

```
private void Form1_Load(object sender, EventArgs e)
    {
        SpeechRecognitionEngine srEngine = new SpeechRecognitionEngine();

        // Create a simple grammar that recognizes "twinkle", "little", "star"
        Choices song_00 = new Choices();
        song_00.Add(new string[] {"twinkle", "little", "star"});

        // Create a GrammarBuilder object and append the choices object
        GrammarBuilder gb = new GrammarBuilder();
        gb.Append(song_00);

        // Create the grammar instance and load it into the sppech reocognition engine.
        Grammar g = new Grammar(gb);

        g.Enabled = true;

        srEngine.LoadGrammar(g);
        srEngine.SetInputToDefaultAudioDevice();
        // Register a handler for the Speechrecognized event.
        srEngine.SpeechRecognized += new EventHandler<SpeechRecognizedEventArgs>(sre_SpeechRecognized);
        srEngine.RecognizeAsync(RecognizeMode.Multiple);
    }

    // Create a simple handler for the SpeechRecognized event.
    void sre_SpeechRecognized(object sender, SpeechRecognizedEventArgs e)
    {
        MessageBox.Show("Speech recognized: " + e.Result.Text);
    } 
```

下面的一个也没有显示任何消息。

```
foreach (RecognizerInfo ri in SpeechRecognitionEngine.InstalledRecognizers())
{
    MessageBox.Show(ri.Culture);
} 
```

所以我认为失败的主要原因是语言。

有什么解决方案可以在非英语版本的 Windows 中使用英语识别吗？还是有我没有注意到的问题？

*   现在我使用的是非英文版的windows7（64位），我的麦克风连接良好。（我已经检查了控制面板。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:59:47.607

您定义了简单的选择，但您没有提及您要匹配的确切内容。Microsoft Speech 使用置信度量表来确定它是否听到了一个短语，并且您在说话时可能没有达到这个标记。

`SpeechRecognitionRejected`为和添加回调`SpeechHypothesized`。看看他们是否在开火，以及从他们那里得到什么信息。它将帮助您调试。

仅仅寻找“twinkle”、“little”和“star”这些词是无法捕捉到“Twinkle, twinkle, little star”的。它将这些单词捕获为单例，但是一旦您开始将它们串在一起并添加新单词，置信水平就会下降，并且您获得所需结果的机会要低得多。

除此之外，`Choices`您还应该定义使用这些选择的短语并将它们放入上下文中。MSDN 上的`GrammerBuilder`类文档给出了一个示例：

```
private Grammar CreateColorGrammar()
{

  // Create a set of color choices.
  Choices colorChoice = new Choices(new string[] {"red", "green", "blue"});
  GrammarBuilder colorElement = new GrammarBuilder(colorChoice);

  // Create grammar builders for the two versions of the phrase.
  GrammarBuilder makePhrase = new GrammarBuilder("Make background");
  makePhrase.Append(colorElement);
  GrammarBuilder setPhrase = new GrammarBuilder("Set background to");
  setPhrase.Append(colorElement);

  // Create a Choices for the two alternative phrases, convert the Choices
  // to a GrammarBuilder, and construct the grammar from the result.
  Choices bothChoices = new Choices(new GrammarBuilder[] {makePhrase, setPhrase});
  Grammar grammar = new Grammar((GrammarBuilder)bothChoices);
  grammar.Name = "backgroundColor";
  return grammar;
} 
```

请注意，代码不假定将捕获“将背景设置为蓝色”。它明确设置了该条件。

# python - web.py 支持哪些数据库？

> ID：13132089
> 
> 赞同：2
> 
> 时间：2012-10-30T03:09:42.947
> 
> 标签：python, web.py

我在 web.py 的文档中进行了搜索。但我找不到`databases`web.py 支持哪个？

据我所知，它支持mysql、sqlite、postgres，是否支持其他？比如`mongodb`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:00:57.337

根据 web.py 源文件：[https](https://github.com/webpy/webpy/blob/master/web/db.py) ://github.com/webpy/webpy/blob/master/web/db.py ，内置的 ORM 直接支持以下数据库：

*   PostgreSQL
*   MySQL
*   SQLite
*   火鸟
*   微软SQL
*   甲骨文

当然你也可以使用 SQLAlchemy 作为 ORM：[http ://webpy.org/cookbook/sqlalchemy](http://webpy.org/cookbook/sqlalchemy)

# php - PHP 插值变量作为函数参数

> ID：13132092
> 
> 赞同：1
> 
> 时间：2012-10-30T03:10:06.110
> 
> 标签：php, wordpress, variables, syntax, interpolation

不确定这是否是 WordPress 问题，但我不这么认为。

我有一个`while`循环，我正在迭代用户创建的内容循环并尝试获取一个元字段，该字段具有一个与当前“键”匹配的数字标识符（如果你可以这样称呼它，因为这不是数组，只是用户可以使用一些前端参数创建的自定义循环。 `$this_label_url`通过插值请求虚假“密钥” `$this_label_url = get_post_meta($post->ID, 'instructor_{$number}_label_url', true);`。在这种情况下，变量插值是不可能的吗？

```
<?php
   $total_panels = get_post_meta( $post->ID, 'total_panels', true );  // set by the user with a custom meta value called "total_panels" (an integer)
   $count = 1; // just a fake "key" for looping through my `while`

   // create a faux "number" - simply takes $count and adds leading zero if not present
   while ( $total_panels >= $count ) :

    if ( $count >= 9 ) {
        $number = '0' . $count;
    } else {
        $number = $count;
    } 
$this_label_url = get_post_meta($post->ID, 'instructor_{$number}_label_url', true);  // returns as an empty string, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:13:48.367

可以，但是需要使用双引号；单引号不会被解析为插值。

```
$this_label_url = get_post_meta($post->ID, "instructor_{$number}_label_url", true); 
```

# objective-c - 从 NSOperation 结束模态运行循环

> ID：13132099
> 
> 赞同：1
> 
> 时间：2012-10-30T03:11:15.017
> 
> 标签：objective-c, cocoa, nsoperation, nsoperationqueue

当我的应用程序启动时，我正在执行一个冗长的操作。我正在使用模态 NSWindow 在整个操作过程中显示我的进度条和消息。

我想要完成的是当操作完成运行时，自动关闭窗口，并结束模态运行循环并继续程序的其余部分。我在窗口控制器中尝试了三种不同的方法：

**方法一：**

```
- (void)windowDidLoad
{
    // self.op is an initialized NSOperationQueue set before this method is called
    [self.op addOperationWithBlock:^{
        [self performMigration]; // The method that does all the background work (works fine)
        [NSApp stopModal];
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            [self close];
        }];
    }];
} 
```

结果：窗口一直停留在屏幕上，直到我移动鼠标（或执行某种“事件”），然后事情继续按预期进行。

**方法二：**

```
- (void)windowDidLoad
{
    [self.op addOperationWithBlock:^{
        [self performMigration];
        [NSApp stopModal];
        [self close];
    }];
} 
```

结果：窗口关闭，但主运行循环不会继续，直到移动鼠标（如上）。

**方法三：**

```
- (void)windowDidLoad
{
    // Get the thread of the modal loop
    self.callbackThread = [NSThread currentThread];
    [self.op addOperationWithBlock:^{
        [self performMigration];
        [self performSelector:@selector(callback) onThread:self.callbackThread withObject:nil waitUntilDone:NO];
    }];
}

- (void)callback
{
    [NSApp stopModal];
    [self close];
} 
```

结果与#2 相同。我假设（基于整天花在这上面）模式运行循环希望在事件处理期间停止（比如按下关闭按钮）。

为了完成这个看似简单的任务，我是否缺少一些明显的东西？谢谢！

# objective-c - 当它指向文字时，我应该保留 NSString 吗？

> ID：13132101
> 
> 赞同：0
> 
> 时间：2012-10-30T03:11:37.497
> 
> 标签：objective-c, ios, nsstring, retaincount

```
 if (url_leng)
    {
        NSString *open_string;

        if      (g_system_status.language_code == 0)
            open_string = @"Open";
        else if (g_system_status.language_code == 1)
            open_string = @"Abrir";
        [open_string retain];
        [alert addButtonWithTitle : open_string];
        g_scan_result = targ_url;               
    } 
```

考虑上面的代码段。我的问题是关于“保留”声明。不知何故，我需要保留语句来使代码工作。我唯一的解释是当 open_string 超出范围时，将对它进行发布调用。因此需要一个保留调用来保存该值。

希望有人可以证实这一点...

还想问在条件块之后是否需要字符串的释放语句？

* * *

更新：（在阅读了您的友好建议和宝贵见解后）

尝试了以下修改：

```
 if (url_leng)
    {            
        if      (g_system_status.language_code == 0)
            [alert addButtonWithTitle : @"Open"];
        else if (g_system_status.language_code == 1)
            [alert addButtonWithTitle : @"Abrir"];
        else
            [alert addButtonWithTitle : @"Open"];
        g_scan_result = targ_url;               
    } 
```

现在一切似乎都很好（即使没有保留语句）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:21:47.960

`open_string`是一个`NSString`指向字符串字面量的指针。字符串文字存在于堆栈中。在您传递对字符串文字的引用的代码中，如果您想保留该数据，请将它们复制到堆上。如果你拥有一个对象（即，在一个对象上调用retain/copy/new/alloc）你有责任释放它，否则你会泄漏内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:18:42.510

此`retain`代码中绝对不需要。如果你有问题，它不在这里。一旦`open_string`分配给警报，您就不再需要它了。您必须在其他地方遇到内存管理问题。

也许问题在于 是否`language_code`不是 0 和 1。在这种情况下，您永远不会正确初始化`open_string`。您至少应该分配 nil 或以某种方式处理这种情况。

考虑 ARC，让您的生活更轻松。

# php - 创建一个通用的 HTTP Authentication 函数

> ID：13132106
> 
> 赞同：-2
> 
> 时间：2012-10-30T03:12:09.040
> 
> 标签：php, xml, basic-authentication

我正在使用下面的脚本登录以获取 xml 数据。有没有我可以使用相同的登录脚本但`$oPMainUrl`在需要时更改？

**HTTPS URI：** `https://domain.co.nz/file.xml`

**当前 API 登录：**

```
$oPMainUrl = 'HTTPS URI';
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_URL, $oPMainUrl);  
curl_setopt($ch, CURLOPT_USERPWD, "username:pw");
$result = curl_exec($ch);
curl_close($ch);

$MainURI = simplexml_load_string($result);

$ID = $MainURI->property->agency_id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:20:31.037

HTTP 基本身份验证非常简单。您只需将凭据添加到每个请求。没有会话，每个请求都需要身份验证。

# javascript - 动态随机横幅

> ID：13132107
> 
> 赞同：0
> 
> 时间：2012-10-30T03:12:15.953
> 
> 标签：javascript, jquery, dynamic

我正在尝试使用未知（但很少）数量的图像制作一个随机预加载的横幅。

我是 Javascript 和 jQuery 的新手，但我几乎可以正常工作：http: [//jsfiddle.net/kTS3t/1/](http://jsfiddle.net/kTS3t/1/)

我想有什么问题，因为时机不对。我在 javascript 代码上拆分了第一个横幅，因为我希望它立即显示出来。

任何线索有什么问题吗？

非常感谢！

代码（如[http://jsfiddle.net/kTS3t/1/](http://jsfiddle.net/kTS3t/1/)上）：

CSS

```
#banner-governo {
    position:relative;
    width:300px;
    height:100px;
}
.banner-gov {
    position:absolute;
    top:0;
    right:0;
    display:none;    
}​ 
```

JS+JQUERY

```
$(window).load(function() {

var numItems = $('.banner-gov').length;
var i = 2;
var espera = 3000;

function bannerrand() {
    $('#banner-gov-1').fadeIn('medium', function() {
        $(this).delay(espera).fadeOut('medium');
    })

    while (i <= numItems) {
        var esperaItem = espera*i;
        $('#banner-gov-'+i).delay(esperaItem).fadeIn('medium', function() {
            $(this).delay(espera).fadeOut('medium', function(){
                if(i = numItems){
                    bannerrand();
                };
            });
        });

        i++;
    }
}
bannerrand();

}); //end $(window).load(function 
```

HTML

```
<div id="banner-governo">
<div class="banner-gov" id="banner-gov-1">
    <img src="http://www.hospedagemdesitesgratis.org/img/hospedagem-gratis-html.jpg" />
</div>
<div class="banner-gov" id="banner-gov-2">
    <img src="http://apostilaria.com/wp-content/uploads/2011/02/javascript.jpg" />
</div>
<div class="banner-gov" id="banner-gov-3">
    <img src="http://otaqui.com/blog/wp-content/uploads/html5_vs_flash-300x100.png" />
</div>
</div>​ 
```

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:35:52.783

一探究竟。 [http://jsfiddle.net/kTS3t/4/](http://jsfiddle.net/kTS3t/4/)

这个想法是使用`mod`运算符循环图像并使用回调函数无限期地调用动画函数`fadeOut`。

```
var numItems = $('.banner-gov').length;
var i = 2;
var espera = 3000;

function bannerrand() {

        //var esperaItem = espera*i;
        $('#banner-gov-'+(i% numItems + 1)).delay(espera).fadeIn('medium', function() {
            $(this).delay(espera).fadeOut('medium', function(){

                    bannerrand();

            });
        });

        i++;

}

    $('#banner-gov-1').fadeIn('medium', function() {
        $(this).delay(espera).fadeOut('medium', function(){

                    bannerrand();

            });

    }) 
```

# google-maps - 基于经纬度谷歌地图重绘地图

> ID：13132110
> 
> 赞同：3
> 
> 时间：2012-10-30T03:12:37.930
> 
> 标签：google-maps, google-maps-api-3

我在以下 URL 中有一个由以下脚本生成的谷歌地图

[http://apryll.co.in/maps/index.php](http://apryll.co.in/maps/index.php)

```

    变量位置 = [
      ['', -33.890542, 151.274856, 4],
      ['', -33.923036, 151.259052, 5],
      ['', -34.028249, 151.157507, 3],
      ['', -33.80010128657071, 151.28747820854187, 2],
      ['', -33.950198, 151.259302, 1]
    ];

    var map = new google.maps.Map(document.getElementById('map'), {
      缩放：10，
      中心：新的 google.maps.LatLng(-33.92, 151.25),
      mapTypeId：google.maps.MapTypeId.ROADMAP

    });

    var flagIcon_front = new google.maps.MarkerImage("images/marker.png");

    var flagIcon_shadow = new google.maps.MarkerImage("images/marker_shadow.png")
    flagIcon_shadow.size = 新的 google.maps.Size(105, 53);
    flagIcon_shadow.anchor = 新的 google.maps.Point(20, 52);

    var boxText = document.createElement("div");
        boxText.style.cssText = "边框：1px 纯黑色；上边距：8px；内边距：5px；显示：块；";                                                              

        var myOptions = {
             内容：boxText
            ,disableAutoPan: 假
            ，最大宽度：0
            ,pixelOffset: 新的 google.maps.Size(-261, -268)
            ,zIndex: 空
            ,boxStyle: {
              背景：“url（'images/metro-plot-bg-1.png'）无重复-286px -1361px”
              ，不透明度：1
              ,宽度：“393px”
              ,高度：“233px”
             }
            ,closeBoxMargin: "11px 32px 2px 2px"
            ,closeBoxURL: "图片/close.png"
            ,infoBoxClearance: 新的 google.maps.Size(1, 1)
            ,isHidden: 假
            ，窗格：“浮动窗格”
            ，启用事件传播：假

        };

    var infowindow = new google.maps.InfoWindow();

    变量标记，我；

    对于 (i = 0; i<locations.length; i++) {  
      标记 = 新的 google.maps.Marker({
        位置：新 google.maps.LatLng（位置[i][1]，位置[i][2]），
        图标：flagIcon_front，
        阴影：flagIcon_shadow，         
        地图：地图
      });

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        返回函数（）{
          //infowindow.setContent(locations[i][0]);
          //infowindow.open（地图，标记）；
          ib.setContent(位置[i][0]);
          ib.open（地图，标记）；
        }
      })(标记, i));
      var ib = new InfoBox(myOptions);
        //ib.open（地图，标记）；
    }

```

我在页面上有一个下拉菜单，用于选择不同的位置。

[http://apryll.co.in/maps/index.php](http://apryll.co.in/maps/index.php)

当我选择下拉时，它会带来不同位置的纬度和经度作为 ajax 调用的响应。

现在我想用响应文本中新收到的经纬度重新绘制谷歌地图

提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:37:07.113

不知道 php，所以无法为您提供示例代码，但这是您可以做的-

当您在从组合框中进行选择时从数据库中获取 latlngs 时，您还可以向其中添加此功能。

首先，您应该将标记放置代码移动到单独的函数中。从数据库中获取的值应该传递给一个数组。让这个数组只在这个函数中声明。然后该数组可用于放置标记，因为每次更改组合框中的选择时都会执行此函数。

[您可以在我的这个问题](https://stackoverflow.com/questions/12351156/unable-to-get-update-panel-working-right)中看到一些 Asp.net 代码。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T13:56:42.683

```
Latlng = new google.maps.LatLng(some_lat,some_lon);
map.panTo(Latlng); 
```

你也可以使用

```
map.setCenter(Latlng); 
```

不同之处在于，如果原始纬度和经度与新经度足够接近，panTo 将使用漂亮的动画来执行此操作。

在此处查看文档： [https ://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-04T10:28:52.303

为了解决上述问题，我做了以下事情。我希望它会帮助你。

1 我已经创建了两个单独的

```
div with id="map" and id="map1".

<div id="map" style="width: 700px; height: 400px;"></div>
<div id="map1" style="width: 700px; height: 400px;"></div> 
```

2.  下面是我的地图脚本。

    ```
    <script type="text/javascript">

    window.onload = mapdata(38.8833,77.0167,<?php echo $jsonarray; ?>);
    function mapdata(lat,lng,data){
        var locations = data;
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: new google.maps.LatLng(lat,lng),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var infowindow = new google.maps.InfoWindow();

        var marker, i;
        for (i = 0; i < locations.length; i++) {  
          marker = new google.maps.Marker({
            position: new google.maps.LatLng(locations[i][1], locations[i][2]),
            map: map
          });

          google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
              infowindow.setContent(locations[i][0]);
              infowindow.open(map, marker);
            }
          })(marker, i)); 
        }
    }
    </script> 
    ```

是我在地图中显示的数据数组。

3.

```
<script> 
$(document).on("click",'#search',function(){
    var zipcode=$("#zipcode").val();
    if (zipcode!='') {
        var market=$("#market").val();
        var country=$("#country").val();
        jQuery.ajax({ //passing value using the jquery
           type:"POST",
           data:"zipcode="+zipcode+"&market="+market+"&country="+country,           
           dataType:'json', 
           url: "<?php echo Yii::app()>createUrl('/front/front/mapsearch/')?>",
           success: function(data){
                if(data.detail != ''){
                    mapdata(data.lat,data.lng,data.detail);
                }else{
                    $("#map").hide();
                    $("#map1").show();
                    $("#map1").html("Data Not Found...!!");
                }
           }
       });
    }       
});
</script> 
```

现在，当用户更改下拉值时，我将变量传递到控制器中，然后将响应从控制器传递到查看文件。并调用 mapdata 函数重新生成地图。

下面是我返回的数组。

```
$result = array('lat'=>$lat,'lng'=>$lng,'detail'=>$marker);
$jsonarray = json_encode($result);
echo $jsonarray; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T15:43:13.947

您必须使用 google.maps.LatLngBounds() 创建边界，然后使用您的位置数组扩展它。

```
bounds = new google.maps.LatLngBounds();
for(var count=0;count<locations.length;count++){
    bounds.extend(new google.maps.LatLng(locations[count][1],locations[count[2]);
}
map.fitBounds(bounds); 
```

如果您想花哨，也可以使用 map.panToBounds(bounds)

然后稍后的某个地方

# r - 我的包不适用于 R 2.15.2

> ID：13132111
> 
> 赞同：3
> 
> 时间：2012-10-30T03:12:38.290
> 
> 标签：r

我有一个名为`rpackage`本地（公司）回购的包。当我运行`install.packages("rpackage")`它告诉我：

```
Installing package(s) into ‘C:/Program Files/R/R-2.15.2/library’
(as ‘lib’ is unspecified)
Warning in install.packages :
  package ‘rpackage’ is not available (for R version 2.15.2) 
```

我已经使用 构建了这个包`R CMD INSTALL --build .`，发布到本地 repo 并运行`tools::write_PACKAGES()`更新`PACKAGES`文件。当我跑步时，`R --version`我得到：

```
R version 2.15.2 (2012-10-26) -- "Trick or Treat"
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: i386-w64-mingw32/i386 (32-bit) 
```

当我跑步时，`R CMD INSTALL --build --version`我得到：

```
R add-on package installer: 2.15.2 (r61015) 
```

本地 repo 目录结构遵循[官方文档](http://cran.r-project.org/doc/manuals/R-admin.html#Setting-up-a-package-repository)并一直工作，直到我更新到 R 2.15.2。结构是：

```
\\server\folder\R\bin\windows\contrib\
    2.11\
    2.12\
    2.13\
    2.14\
    2.15\
\\server\folder\R\src\contrib\ 
```

如果我`install.packages("rpackage")`在 R 2.15.1 中运行，我没有问题。我需要做一些特别的事情才能让它与新版本的 R 一起工作吗？

我注意到 CRAN 服务器使用稍微不同的目录结构。例如，CSIRO CRAN 镜像使用：

```
http://cran.csiro.au/bin/windows/contrib/r-release/ 
```

关于如何解决这个问题的任何想法？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T22:43:02.087

不幸的是，帮助文件或错误消息都没有解释为什么会发生此错误。事实[证明](https://stat.ethz.ch/pipermail/r-devel/2012-November/065155.html)，`install.packages()`当源包不可用时也会失败，但二进制文件可以。这不是记录的行为（或者更慷慨地 - 它没有明确记录）：

> 对于二进制安装，该函数还检查同一存储库中源包的可用性，并报告源包是否具有更高版本，或者可用但没有二进制版本。可以通过以下方式抑制此检查`options(install.packages.check.source = "no")`

要修复，`options(install.packages.check.source = FALSE)`. 这也可以包含在您的`.First`函数中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T16:36:01.353

我不确定 imanuelc 的解决方案是否适用于所有人，因为它对我不起作用：

```
> options(install.packages.check.source = FALSE)
> install.packages("rstudio", lib="C:/Program Files/R/R-2.15.2/library", dep=TRUE)
Warning in install.packages :
package ‘rstudio’ is not available (for R version 2.15.2) 
```

就我而言，我已经看到这个错误出现在某些包中，例如 tm、rjson 等。我知道所有这些包都有*一个*适用于 R 2.15 的版本，因为它们中的大多数实际上是随我的 IDE 一起提供的。我只是试图让它们安装到一个特定的目录中（我想要 install.packages 语句用于未来具有不同 IDE 的编码器）。

我不能说我知道根本原因，但对我来说，解决方法是直接从镜像下载二进制文件并在代码中“手动”安装它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T15:11:08.430

尝试将 R 升级到新版本。

做那个第一个更新`sources.list`文件。您可以使用以下命令执行此操作：

```
nano /etc/apt/sources.list 
```

将以下行添加到此文件中：

```
deb http://cran.r-project.org/bin/linux/debian/ wheezy-cran3/ 
```

然后做：

```
apt-get update 
```

删除旧版本：

```
apt-get remove r-base-core 
```

使用命令安装：

```
apt-get install r-base r-base-dev 
```

# map - 在地图上绘制 GPS 坐标

> ID：13132113
> 
> 赞同：0
> 
> 时间：2012-10-30T03:12:53.810
> 
> 标签：map, gps, plot

我记录了一堆（> 10000）GPS坐标，我想通过将它们分散到地图上来定期以编程方式可视化它们。我应该研究哪些工具来做到这一点？

我正在考虑用 perl + imagemagic 做点什么，但投影会使它变得无用。

现在，我将坐标以 latlon 格式存储在 SQL 中，准备好将它们转换为所需的任何格式。

**注意：**我不需要轨迹，只需要绘制的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:02:04.927

[谷歌地图](https://developers.google.com/maps/)很容易使用。他们为处理地图上的大量标记提供[了一些建议。](https://developers.google.com/maps/articles/toomanymarkers)

# php - PHP：如何从此 XML 中获取关联数组？

> ID：13132116
> 
> 赞同：2
> 
> 时间：2012-10-30T03:13:35.243
> 
> 标签：php, xml, arrays

到目前为止，这是我的代码......不用说，它不起作用:(

```
$feed = <<< THEXML

<programs>
<program>
<date>2009-04-16</date>
<start_time>17:00</start_time>
<leadtext>hello hello!
</leadtext>
<name>Program 1</name>
<b-line>Comedy</b-line>
<synopsis>Funny stuff
</synopsis>
<url>http://www.domain.tld/program_name</url>
</program>
<programs>
THEXML;

$xml  = (array) simplexml_load_string($feed);

print_r($xml);exit; 
```

将不胜感激任何帮助，现在已经在 php.net 网站上呆了几个小时，感觉脑残。

请注意，在上面的示例 xml 中只有一个

```
 <program>...</program> 
```

标签，但实际上我有一个或多个需要使用。例如

```
 <programs>
 <program>...</program>
 <program>...</program>
 <program>...</program>
 </programs> 
```

我想如果我能让一个工作，然后我可以循环它，但只是想我会解释我在这里的目的。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:23:53.823

假设提供程序为您提供了有效的 XML，那么您只需遍历程序并使用您需要的任何信息，如下所示：

```
<?php
foreach ( $xml as $node ) {
    echo $node->synopsis;
    //or whatever property you want to access on the SimpleXMLElement Object
} 
```

由于您没有正确的 XML（作为未封闭的`<programs>`标记，因此您可能需要修改脚本以更正该错误，如下所示：

```
$feed = preg_replace('/<programs>$/', '</programs>', trim($feed)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T03:31:30.393

您缺少结束结束标记。

```
$feed = <<< THEXML

<programs>
<program>
<date>2009-04-16</date>
<start_time>17:00</start_time>
<leadtext>hello hello!
</leadtext>
<name>Program 1</name>
<b-line>Comedy</b-line>
<synopsis>Funny stuff
</synopsis>
<url>http://www.domain.tld/program_name</url>
</program>
</programs> // <========= here
THEXML; 
```

# php - mysql SELECT，将表分成PHP数组

> ID：13132119
> 
> 赞同：-2
> 
> 时间：2012-10-30T03:14:20.407
> 
> 标签：php, mysql, arrays, select

是否可以创建一个返回这样的 SELECT 查询？

```
 array (size=2)
      'table1' => 
        array (size=2)
          'column1' => int 1
          'column2' => string 'username' (length=8)
      'table2' => 
        array (size=2)
          'column1' => int 1
          'column2' => string 'username' (length=8) 
```

我需要通过连接选择数据，但其中一个表有大约 100 列，如果可能的话，我真的希望它们被分组到一个数组键中。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:38:01.113

尝试这个：

```
$a_rs = firstquery

$b_rs = secondquery

$ar = array();
$i=0
while($a_rs && $a_r = mysql_fetch_object($a_rs))
{
    foreach($a_r as $k => $v)
    {
        $ar['a'][$i][$k] = $v;
    }
     $i++;
}

$ii = 0;

while($b_rs && $b_r = mysql_fetch_object($b_rs))
{
    foreach($b_r as $k => $v)
    {
        $ar['b'][$ii][$k] = $v;
    }
    $ii++;
}

echo "<pre>".var_export($ar)."</pre>"; 
```

# mysql - mysql如何加入一个表并做一些数学运算

> ID：13132122
> 
> 赞同：0
> 
> 时间：2012-10-30T03:14:48.830
> 
> 标签：mysql, sql

我有这些桌子，卷和推出。我想执行一个连接并做一些数学运算。

劳斯莱斯

```
 |size|
      ------
      |3x3| 
      |4x4| 
      |3x3| 
      |3x3| 
```

推出

```
 |type|
      ------
      |3x3| 
```

减去，加入后的预期输出==>

```
 |size|Remaining(table1 - table2)|
      --------------------------------
      |3x3|   2                       |                 
      |4x4|   1                       | 
```

我的代码：

```
SELECT tarpaulin.size, COUNT( * ) , tarpaulinout.Ww, tarpaulinout.dc 
FROM tarpaulin LEFT JOIN (SELECT size AS Ww, COUNT( * ) AS dc FROM tarpaulinout 
GROUP BY size) AS tarpaulinout ON tarpaulin.size = tarpaulinout.Ww 
GROUP BY tarpaulin.size 
```

但上述代码的 O/P 是

```
 |size|count(*)|size |dc    |
      ----------------------------
      |3x3|3        | 3x3 |1     |
      |4x4|1        | NILL| NILL | 
```

我可以做到这一点，请指导我如何实现我想要的输出。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:38:47.397

您可以将这两组联合起来，然后对两者进行求和，即

```
select size, sum(counter) remaining
from
(
    select size, 1 counter
    from rolls
    union all
    select type, -1 counter
    from rollsout
) x
group by size; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:49:26.297

```
SELECT a.size, a.Rcount - b.Acount FROM (SELECT size, COUNT( * ) AS Rcount FROM tarpaulin GROUP BY size ) AS a LEFT JOIN ( SELECT size, COUNT( * ) AS Acount FROM tarpaulinout GROUP BY size ) AS b ON a.size = b.size 
```

对 Vikdor 代码的一些修改对我有用，感谢快速输入的家伙:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:28:00.593

您需要将第一个表和第二个表分别分组`size`以获取记录数，然后对`size`属性执行 LEFT JOIN 以获取表中的所有记录和`tarpaulin`表中匹配的记录，然后进行`tarpaulinout`减法，如下所示。

```
SELECT a.size, a.rcount - ISNULL(b.rcount, 0)
FROM
    (SELECT size, count(*) FROM tarpaulin GROUP BY size) as a
    LEFT JOIN (SELECT size, count(*) FROM tarpaulinout GROUP BY size) as b
    ON a.size = b.size 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T03:31:53.367

```
Select x.Size,(x.Cnt1 - Isnull(y.Cnt2, 0)) AS Remaining
From
(Select r.Size,count(r.Size) Cnt1
From rolls r
Group by r.Size)x

Left Outer join
(Select ro.Type,Count(ro.Type) Cnt2
From rollsout ro
Group by ro.Type)y

On x.Size = y.Type 
```

# silverlight - 需要帮助在 XAML/C# 中实现拖动和缓动

> ID：13132123
> 
> 赞同：0
> 
> 时间：2012-10-30T03:15:20.370
> 
> 标签：silverlight, xaml, windows-8, winrt-xaml

这是一个带有 C# 的 xaml 应用程序。

我正在我们的一个元素上实现拖动功能。[示例代码](http://code.msdn.microsoft.com/windowsapps/Input-3dff271b/sourcecode?fileId=44758&pathId=962809525)在某种程度上很有用。

我想在元素上有一个缓动功能，即一旦用户拖动元素并释放它，它应该缓和/指数回到它的原始位置。

这是我能够完成的示例代码：http: [//sdrv.ms/RxXVdw](http://sdrv.ms/RxXVdw)

我正在寻找的是：

1）查看帮助：这是正确和最好的方法吗？还是可以以更好、更清洁的方式完成？

2）重构帮助：以两种方式重用该代码的最佳方法是什么：

*   我可能是页面上的两个或多个可拖动元素。

*   我需要在不止一页上使用相同的代码

3) 另一个问题是当我尝试在项目缓和时拖动项目。

我试图弄清楚，但同时希望得到社区的帮助。

请问有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:45:51.547

WinRTBehaviors和[DragFlickBehavior是我](http://winrtbehaviors.codeplex.com/)[找到](http://dotnetbyexample.blogspot.com/2012/04/porting-dragflickbehavior-from-windows.html)的解决方案，它非常适用于我们的应用程序。

# sql-server-2008 - SQL Server 2008 全文搜索性能问题

> ID：13132124
> 
> 赞同：2
> 
> 时间：2012-10-30T03:15:39.240
> 
> 标签：sql-server-2008, full-text-search

我最近从 Win 2003 / SQL Server 2000（HP ML350 G4p - Dual Xeon with 2GB RAM）升级到运行 Win 2008 R2 / SQL Server 2008 的新硬件（IBM x3200 M3 - Single Xeon QC X3450 2.66GHz 10GB RAM）。我们运行一个经典的 ASP 网站，并使用全文搜索使客户能够搜索我们的产品描述。

搜索由存储过程执行，该存储过程构建动态查询以使用`contains`谓词运行搜索。

我有一个间歇性问题，因为某些搜索非常慢。有时需要一分钟才能完成。在其他时候，它们将在不到一秒的时间内完成。在旧服务器上根本没有这个问题。

我已经通过从 SSMS 运行存储过程复制了这个问题，而且，这有时可能需要很长时间。

我怀疑 SQL Server 2008 中的新全文搜索系统，但我不确定如何查明问题。发生超时时，服务器 cpu 上的负载似乎并不大。我不知道还能去哪里看。相对较新的 SQL Server 2008。

如果设置为关闭，则更改索引​​上的跟踪，并且我正在运行一项作业以每天增量更新索引，以及每天优化目录。

在谷歌上搜索，这似乎是一个相当普遍的问题，但我还没有找到一个明确的答案。有人可以指出我正确的方向吗？

在此先感谢，迈克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:49:37.320

万一其他人有这个问题，我终于解决了。我需要应用累积更新 9，然后执行以下操作：–

DBCC TRACEON（4199，-1）；去;

DBCC FREEPROCCACHE；去;

从 Forrestsjs 在此页面上的帖子中找到答案：http: [//social.msdn.microsoft.com/Forums/en-US/sqlsearch/thread/7e45b7e4-2061-4c89-af68-febd668f346c/](http://social.msdn.microsoft.com/Forums/en-US/sqlsearch/thread/7e45b7e4-2061-4c89-af68-febd668f346c/)

通配符搜索的响应时间从大约 3 分钟缩短到 2-3 秒，例如：“office 2010 pro*”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:28:10.277

刚刚发现：[StackOverflow 的 SQL 2008 FTS 问题](http://www.brentozar.com/archive/2008/11/stackoverflows-sql-2008-fts-issue-solved/)已解决（您应用了哪些服务包和/或累积更新？）

从 SQL Server 2000 升级到 SQL Server 2008 后，您是否重建了**所有索引？**

你需要。

运行这个（但在生产运行之前确保你有你的 DBA/经理/任何人的许可）：

```
exec sp_msforeachtable "DBCC DBREINDEX('?')"
go

exec sp_msforeachtable "UPDATE STATISTICS ? WITH FULLSCAN, COLUMNS"
go 
```

此外，更新使用计数器：在 SQL Server 的早期版本中，表和索引行计数和页计数的值可能会变得不正确。要更正任何无效的行数或页数，**`DBCC UPDATEUSAGE`**请在升级后在所有数据库上运行。

如果这不能解决您的问题，请调查将“最大并行度”设置为 1。

这篇文章可能会有所帮助：[从 SQL Server 2000 升级到 2008](http://mitch-wheat.blogspot.com.au/2010/10/upgrading-from-sql-server-2000-to-2008.html)

您描述的“有时需要一分钟以上才能完成。有时他们将在不到一秒的时间内完成”的行为通常表明正在缓存不适当的查询计划。

你读过这个吗？：[SQL 2008 全文搜索问题](https://blog.stackoverflow.com/2008/11/sql-2008-full-text-search-problems/)

您是否有大量更新发生？

从这篇文章[SQL Server 2008 全文缓慢](http://barry-king.com/2008/09/16/sql-server-2008-full-text-slowness/)：

> 如果出现以下情况，它似乎会发生：
> 
> *   您对全文索引进行了自动跟踪；尽管我们将其更改为手动，但仍然存在此问题。
>     
>     
> *   您遇到全文查询需要很长时间才能执行；通常当更新同时发生时，你可能只会在生产中看到这个。
>     
>     
> *   您的一个或多个查询很复杂或需要一些时间才能完成。
>     
>     
> 
> 您可以通过以下方式检查您的系统是否因此而变慢：
> 
> *   SELECT * FROM sys.dm_os_wait_stats 语句，它显示了一些锁的非常高的等待时间。
>     
>     
> *   运行 Sp_who2; 它应该始终显示全文收集正在阻止全文查询，并且反过来又被查询阻止。
>     
>     
> 
> 当前解决此问题的方法是使用 Microsoft 在 RTM 构建中启用的全局跟踪标志。要使用它，请键入以下 Transact-SQL 语句： **DBCC TRACEON (7646, -1)**

# c# - 当对象包含列表时覆盖相等成员

> ID：13132126
> 
> 赞同：2
> 
> 时间：2012-10-30T03:16:03.210
> 
> 标签：c#, equality

我一直在使用 resharper 来生成我的平等成员，这对我的单元测试很有帮助。

但是，当我的对象包含列表时，它似乎效果不佳。

```
 public class FileandVersions
{

    public string fileName { get; set; }

    public string assetConfigurationType { get; set; }

    public List<Versions> Versions { get; set; }

    protected bool Equals(FileandVersions other)
    {
        return string.Equals(fileName, other.fileName) && string.Equals(assetConfigurationType, other.assetConfigurationType) && Equals(Versions, other.Versions);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((FileandVersions) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hashCode = (fileName != null ? fileName.GetHashCode() : 0);
            hashCode = (hashCode*397) ^ (assetConfigurationType != null ? assetConfigurationType.GetHashCode() : 0);
            hashCode = (hashCode*397) ^ (Versions != null ? Versions.GetHashCode() : 0);
            return hashCode;
        }
    }
} 
```

这是版本对象的定义。

```
public class Versions
{

    public string versionNumber { get; set; }
    public DateTime acctivationTime { get; set; }
    public string URL { get; set; }

    protected bool Equals(Versions other)
    {
        return string.Equals(versionNumber, other.versionNumber) && acctivationTime.Equals(other.acctivationTime) && string.Equals(URL, other.URL);
    }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj)) return false;
        if (ReferenceEquals(this, obj)) return true;
        if (obj.GetType() != this.GetType()) return false;
        return Equals((Versions) obj);
    }

    public override int GetHashCode()
    {
        unchecked
        {
            int hashCode = (versionNumber != null ? versionNumber.GetHashCode() : 0);
            hashCode = (hashCode*397) ^ acctivationTime.GetHashCode();
            hashCode = (hashCode*397) ^ (URL != null ? URL.GetHashCode() : 0);
            return hashCode;
        }
    }
} 
```

这些对象的比较都失败了，即使对象是等价的。当对象包含列表时，编写相等成员的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:24:23.217

你应该用这个替换`Equals(Versions, other.Versions)`等式表达式：

```
((Versions == null && other.Versions == null) || Versions != null && other.Versions != null && Versions.SequenceEqual(other.Versions)) 
```

当这个表达式为真时

*   两者`Versions`都是`null`, 或
*   两者`Versions`都不是`null`，并且它们以相同的顺序包含相同的元素

# javascript - Javascript新日期日期转换

> ID：13132130
> 
> 赞同：1
> 
> 时间：2012-10-30T03:17:07.370
> 
> 标签：javascript, date

我有一个带有日期的 mysql 表（格式：yyy-mm-dd）。然后我检索日期并保存它们，但是在采购中我更改了日期格式以使用户更容易查看手头的任务。我的问题是，当我得到的日期太远（几个月后）时，它们会改变并落后一天（否则它可以正常工作）。我花了很多时间阅读 javascript 日期转换的工作原理，但我仍然没有深入了解。如果没有我写的内容，日期总是在转换后的一天之后出现。我也在俄亥俄州。这是我所拥有的：

```
 var x = offset*60000;  
    var time = new Date (item.start);
    var time2=time.getTime();
    var time3=time2+x;
    var start = $.datepicker.formatDate('D, d M, yy', new Date (time3)); 
```

这里有什么问题？另外，如果您能对我的教育做出快速解释，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:30:02.943

~~[问题是根据 - https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)~~（即 ISO8601 扩展的版本），您传递给`Date`构造函数的格式~~似乎无效~~format) 是有效的[ES5 格式](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.15)，但浏览器未正确解析。

所以像这样的东西应该是你需要的：

[http://jsfiddle.net/xfz6L/](http://jsfiddle.net/xfz6L/)

```
var date_string = "2012-11-02";

var first_try = new Date(date_string);
alert(first_try.toDateString());

// The following is the code you would use
var date_split = date_string.split("-");
var second_try = new Date(date_split[0], +date_split[1]-1, date_split[2]);
alert(second_try.toDateString()); 
```

由于~~问题似乎~~不是所有浏览器都正确解析 ISO8601 格式的有效格式，因此我的解决方案是使用提供的字符串并将其操作为有效的构造函数。

我能想到的最简单的方法是按顺序将“年”、“月”和“日”传递给构造函数。

为此，您需要拆分字符串`-`，然后将每个数组索引传递给构造函数。

我从月份中减去“1”的原因是范围是从 0 到 11。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:51:51.493

请注意，`yyyy-mm-dd`格式是有效的[ISO 日期](http://en.wikipedia.org/wiki/ISO_8601)，但不幸的是，JavaScript[`Date`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)仅支持自纪元以来的毫秒值、[RFC 2822 日期](https://www.rfc-editor.org/rfc/rfc2822#page-14)或单独的日期组件。

在这种情况下，使用日期组件可能是最简单的：

```
function parseDate(isoDateStr) {
  var parts = isoDateStr.split(/-/);
  return new Date(parts[0], parts[1]-1, parts[2]);
} 
```

请注意，月份值是从零开始的，而不是从一开始的。

# java - 这个命令的错误在哪里？

> ID：13132132
> 
> 赞同：-1
> 
> 时间：2012-10-30T03:17:52.833
> 
> 标签：java, maven, sakai, ojdbc

```
mvn deploy:deploy-file -DgroupId=org.sakaiproject.nakamura \
    -D artifactId=org.sakaiproject.nakamura.ojdbc \
    -Dversion=CURRENT-VERSION -Dpackaging=jar \
    -Dfile=maven-launchpad-plugin-2.0.10.jar \
    -Durl=D:\sakai3\nakamura \
    -DrepositoryId=D:\sakai3\nakamura 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:42:45.730

我认为问题在于 Maven 选项应该先于目标。至少，这是`mvn --help`告诉我的。

`-D`此外，第二个选项存在不一致之处。

# java - Java 类型从字符串转换为整数

> ID：13132135
> 
> 赞同：0
> 
> 时间：2012-10-30T03:18:15.700
> 
> 标签：java

任何机构都可以帮我解决这个问题

```
String expr ="1.3*60";
//Integer xx=Integer.valueOf();
int i = Integer.parseInt(expr);
System.out.println("xx "+i); 
```

当我编译这个时它显示数字格式异常，我在java的开始阶段，所以请帮我解决这个问题，非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T03:20:40.440

`Integer.parseInt`不计算数学表达式；它只是将整数的字符串格式转换为整数类型。

例如：

```
int x = 5;
int y = Integer.parseInt("5");

x == y; // => true 
```

要评估诸如 之类的数学表达式`1.3 * 60 = ?`，您可能需要搜索 Java 数学解析/评估库。（[例如，请参阅此问题](https://stackoverflow.com/questions/7258538/free-java-library-for-evaluating-math-expressions)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T03:19:16.183

```
"1.3*60"; 
```

不是有效的`integer`.

`Integer.parseInt(...);`只能解析有效的整数

如果您想使用表达式评估引擎。看到[这个](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)和[这个](https://stackoverflow.com/questions/7983651/how-can-i-evaluate-the-expression-from-the-string?lq=1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T07:10:55.003

如果您使用的是 jdk 1.6，则可以使用内置的 javascript 引擎来评估表达式：

```
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine;

public class expressionEvaluate{
  public static void main(String[] args) throws Exception{
    ScriptEngineManager sem = new ScriptEngineManager();
    ScriptEngine scriptEngine = sem.getEngineByName("JavaScript");
    String expr = "1*3+5";
    System.out.println(scriptEngine.eval(expr));
    } 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T03:42:42.180

检查此代码：

```
String expr ="1.3*60";
String[] tokens = expr.split("\\*");
float j = Float.parseFloat(tokens[0]);
float k = Float.parseFloat(tokens[1]);
System.out.println(j);
System.out.println(k);
System.out.println(j*k); 
```

所以，首先你必须使用正则表达式进行标记（我不会谈论那个），这就是你拥有的分割部分。然后，由于您正在解析的某些数字不是整数，您应该使用浮点数或相应的类型，或者使用 try/catchs 或其他任何东西来忽略非 int 值。最后， valueOf 返回对象，而 parseX 返回原语，我认为这是您需要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T03:26:29.690

```
String[] tokens = expr.split(delims);
...
int i = Integer.parseInt(expr); 
```

您已经将字符串拆分为 float 和 int，因此您需要将“tokens[0]”和“tokens[1]”字符串传递给 parseInt() 而不是原始字符串“expr”，尽管在这些字符串是一个浮点数，所以我不确定这是否会起作用。

# java - 使用 Deflater 的 Java 多线程压缩

> ID：13132136
> 
> 赞同：1
> 
> 时间：2012-10-30T03:18:18.337
> 
> 标签：java, multithreading, compression, gzip

所以这是一个我有点碰壁的任务。在这一点上，我主要希望有更多的眼睛，因为经过多次重做和改进后，我真的看不出我的代码有任何问题。

我们需要用 Java 编写一个可以通过 gzip -d 调用正确解压缩的多线程压缩器。我们不能使用 GZIPOutputStream 调用。相反，我们手动生成了标头和尾标，并使用 Deflater 来压缩数据。我们从标准输入读取并写入标准输出。

基本上，我使用和 Executor 来维护一个线程池。我在输入时读取输入并将其写入设定大小的缓冲区。一旦缓冲区已满，我将该数据块传递给线程（将任务放入队列）。每个线程都有自己的 Deflater，并传递输入和压缩该数据所需的任何其他信息。我还将每个块的最后 32Kb 用作下一个块的字典。

我已经确认我的标题和预告片是正确的。我使用 GZIPOutputStream 压缩文件并使用 hexdump 获取字节，以便将其与输出进行比较。我检查了不同大小的文件，并且标题和尾部是相同的，所以很可能问题出在压缩数据中。我得到的错误是：无效的压缩数据--crc 错误

我已经确认，当我传入一个相对较小的输入时（因此只有一个线程，因为我从未填满缓冲区，队列中只有一个任务）输出是正确的。我可以在压缩数据上调用 gzip -d 并取回完全相同的输入。

换句话说，问题在于当有足够多的数据启动并运行多个线程时。我在大文件的输出上使用了 hexdump 并将其与 GZIPOutputStream 的 hexdump 进行比较，它们非常相似（不完全相同，但即使是小文件的情况，对于压缩数据，hexdump 也略有不同。并且在在这种情况下， gzip -d 仍然有效）。这也是我知道标题和预告片正确的方式。

传入代码转储

```
import java.lang.Runtime;
import java.lang.String;
import java.lang.Integer;
import java.util.Arrays;
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutionException;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Future;
import java.nio.ByteBuffer;
import java.io.*;
import java.util.zip.*;

/*Warning: Do not compress files larger than 2GB please. Since this is just
  an assignment and not meant to replace an actual parallel compressor, I cut corners
  by casting longs to ints, since it's easier to convert to 4 bytes*/

public class Main {
    private static final int BLOCK_SIZE = 128*1024;
    private static final int DICT_SIZE = 32*1024;
    private static byte[] header = {(byte)0x1f, (byte)0x8b, (byte)0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

    public static void main(String[] args){

    class workerThread implements Callable<byte[]> {
        private boolean lastBlock;
        private boolean dictAvailable;
        private byte[] input;
        private byte[] dictionary;
        private int lastSize;       

        private byte[] output = new byte[BLOCK_SIZE];
        private int compressedLength;
        private ByteArrayOutputStream bOut = new ByteArrayOutputStream();
        Deflater compress = new Deflater (Deflater.DEFAULT_COMPRESSION, true);

        workerThread(boolean last, byte[] blockIn, byte[] dict, boolean useDictionary, int lastBSize){
            this.lastBlock = last;
            this.input = blockIn;
            this.dictionary = dict;
            this.dictAvailable = useDictionary;
            this.lastSize = lastBSize;
        }

        public byte[] call() {
            //System.out.println("running thread ");
            if (lastBlock) {
                // System.out.println("Last block!");
                compress.setInput(input,0,lastSize);
                if(dictAvailable) {
                    compress.setDictionary(dictionary);
                }
                compress.finish();
                compressedLength = compress.deflate(output,0,BLOCK_SIZE,Deflater.SYNC_FLUSH);
            }
            else {
                //System.out.println("Not last block!");
                compress.setInput(input,0,BLOCK_SIZE);
                if(dictAvailable) {
                    compress.setDictionary(dictionary);
                }
                compressedLength = compress.deflate(output,0,BLOCK_SIZE,Deflater.SYNC_FLUSH);
            }
            byte[] finalOut = Arrays.copyOfRange(output,0,compressedLength);
            return finalOut;
        }
    }

    getProcessors p = new getProcessors();
    boolean useDict = true;
    int numProcs = p.getNumProcs();
    boolean customProcs = false;
    boolean foundProcs = false;
    boolean foundDict = false;

    /*Checking if arguments are correct*/
    ........
    /*Correct arguments, proceeding*/

    BufferedInputStream inBytes = new BufferedInputStream(System.in);
    byte[] buff = new byte[BLOCK_SIZE];
    byte[] dict = new byte[DICT_SIZE];
    int bytesRead = 0;
    int offset = 0;
    int uncompressedLength = 0;
    int lastBlockSize = 0;
    boolean isLastBlock = false;
    boolean firstBlockDone = false;

    /*Using an executor with a fixed thread pool size in order to manage threads
    as well as obtain future results to maintain synchronization*/
    ExecutorService exec = Executors.newFixedThreadPool(numProcs);
    CRC32 checksum = new CRC32();
    checksum.reset();
    List<Future<byte[]>> results = new ArrayList<Future<byte[]>>();

    //byte[] temp;

    System.out.write(header,0,header.length);
    try{
        bytesRead = inBytes.read(buff,0, BLOCK_SIZE);
        while (bytesRead != -1)  {
            uncompressedLength += bytesRead;
            checksum.update(buff,offset,bytesRead);
            offset += bytesRead;

            if (offset == BLOCK_SIZE) {
                offset = 0;
                if(!firstBlockDone){ 
                firstBlockDone = true;
                results.add(exec.submit(new workerThread(isLastBlock,buff,dict,false,lastBlockSize)));
                }
                 else {
                     results.add(exec.submit(new workerThread(isLastBlock,buff,dict,useDict,lastBlockSize)));
                 }

                 if (useDict) {
                     System.arraycopy(buff, BLOCK_SIZE-DICT_SIZE, dict, 0, DICT_SIZE);
                 }
            }

             /*Implementation warning! Because of the way bytes are read in, this program will fail if
             the file being zipped is exactly a multiple of 128*1024*/
             if((bytesRead=inBytes.read(buff,offset,BLOCK_SIZE-offset)) == -1) {
                 isLastBlock = true;
                 lastBlockSize = offset;
                 results.add(exec.submit(new workerThread(isLastBlock,buff,dict,useDict,lastBlockSize)));
             }
        }    
        try {
            for(Future<byte[]> result: results) {
            //System.out.println("Got result!");
            System.out.write(result.get(),0,result.get().length);
            //temp = result.get();
            }
        }
        catch (InterruptedException ex) {
            ex.printStackTrace();
            System.err.println("Interrupted thread!");
        } 
        catch (ExecutionException ex) {
            ex.printStackTrace();
            System.err.println("Interrupted thread!");
        }
        finally{ 
            exec.shutdownNow();
        }

    /*Converting CRC sum and total length to bytes for trailer*/
    byte[] trailer = new byte[8];
    getTrailer trail = new getTrailer(checksum.getValue(),uncompressedLength);
    trail.writeTrailer(trailer,0);
    System.out.write(trailer);

    }
    catch (IOException ioe) {
        ioe.printStackTrace();
        System.out.println("IO error.");
        System.exit(-1);    
    }
    catch (Throwable e) {
        System.out.println("Unexpected exception or error.");
        System.exit(-1);
    }
    }
} 
```

啊，哎呀，格式被代码块格式弄丢了。

如您所见，我一直从输入中读取，直到 buff 已满。原因是因为这不是一个文件，所以第一次调用 read 可能没有读取足够的字节来填充数组（给我留下一堆我不想弄乱任何东西的空值）。一旦它满了，我把它交给 Executor，这样线程就会执行任务。我实现了 Callable 而不是 Runnable 以便我可以将输出作为字节数组返回，并且因为我需要未来的接口。exec.get() 方法允许我保持线程同步。我已经用任意情况进行了测试（打印出数字 1 - 100 以确保，它们确实按顺序打印）。

有一个缺陷是该程序无法处理 BLOCK_SIZE 的倍数的文件，但这甚至不是我现在遇到的问题。当输入足够小以至于我只运行一个线程时，这个程序就可以工作。

对于除最后一个块之外的每个块，我使用 SYNC_FLUSH 选项调用 deflate。这样我就可以在字节边界上结束。我正常压缩并调用完成的最后一个块。

对不起，很长的帖子。老实说，除了我自己的意见之外，我还需要更多的意见，因为我似乎找不到错误。万一有人想编译并运行它自己看看，这里是我拥有的其他类（只是为了获取进程数并生成预告片。这两个都很好）。

```
import java.io.*;

public class getTrailer {
    private long crc;
    private int total;
    public getTrailer (long crcVal, int totalIn) {
        this.crc = crcVal;
        this.total = totalIn;
    } 
    public void writeTrailer(byte[] buf, int offset) throws IOException {
        writeInt((int)crc, buf, offset); // CRC-32 of uncompr. data
        writeInt(total, buf, offset + 4); // Number of uncompr. bytes
    }

    /* Writes integer in Intel byte order to a byte array, starting at a
    * given offset
    */

    public void writeInt(int i, byte[] buf, int offset) throws IOException {
        writeShort(i & 0xffff, buf, offset);
        writeShort((i >> 16) & 0xffff, buf, offset + 2);
    }

   /*
    * Writes short integer in Intel byte order to a byte array, starting
    * at a given offset
    */

    public void writeShort(int s, byte[] buf, int offset) throws IOException {
        buf[offset] = (byte)(s & 0xff);
        buf[offset + 1] = (byte)((s >> 8) & 0xff);
    }
} 
```

预告片功能实际上是从 JAva 文档中复制粘贴的

```
public class getProcessors {
    private Runtime runner = Runtime.getRuntime();
    private int nProcs = runner.availableProcessors();

    int getNumProcs() {
        return nProcs;
    }
} 
```

我知道这有多长，但我真的需要别人的意见。如果有人看到任何他们认为可能导致问题的东西，请告诉我。我不需要有人为我编写程序（我想我快到了）但我只是......看不出有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:53:54.803

所以，我的第一个猜测是你正在以错误的字节顺序编写 CRC。这似乎是您第一次一次写入 4 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T18:27:00.430

如果您正在为一门课程这样做，并且您所展示的内容与所接受的内容相似，那么我希望该课程都是关于结构化的过程编程的，因为您所展示的内容以及面向对象的解决方案看起来就像是英里分开。

你的评论，

“exec.get() 方法允许我保持线程同步。我已经用任意情况进行了测试（打印出数字 1 - 100 以确保它们确实按顺序打印）。”

这与人们对多线程解决方案的期望完全相反。多线程解决方案将以完全不可预测的顺序输出数字 1-100。它按顺序出现意味着您已经同步了多线程的所有好处。在继续之前等待缓冲区填满立即让我觉得有问题。

根据责任将解决方案分成几类。您正在对动作类建模（即 getProcessors、getTrailer），这是错误的。不要根据活动或状态对类进行建模。大多数时候，简单地谈论你正在尝试做的事情将产生正确的类（即我们有一些输入数据、一个压缩器、一个解压缩器、某种工作队列、一个预告片等。如果你需要操作一个处理器列表，然后有一个处理器类包装（有一个，不是一个）列表。每个类在整个解决方案中都有特定的责任，每个类仅在其自身上运行（没有公共访问器）。当每个类能够在独立测试中执行其功能，那么您就可以在多线程解决方案中使用它们的实例。

如果您创建一个由您认为在解决方案中的类组成的域模型，然后通过向适当的类添加方法来开始对功能进行建模，那么模型本身将开始通知您应该如何对交互进行编码。提示：构造函数可以接受低级结构作为参数，其他方法不应该。

最重要的是，不要线性思考 - 你有一个 Main() 方法，它从上到下执行处理 - BUZZZZZ。不正确的反应。解决方案应该是一组类之间交互的症状，每个类都提供了整个解决方案的一个独特而独立的部分。

最好的多线程解决方案不需要同步 - 线程是谨慎的，并且能够以尽可能高的速度运行。实现这一点的一种简单方法是确保每个线程使用其自己的任何相关类的实例——不要使用共享内存。如果输出端需要同步，那么线程应该将它们的结果转储到一个类中，该类将作为输出前的最后一步执行排序。

最后，你确定你是正确的吗？我认为我更可能希望在不同的数据源上启动多个实例，而不是在一个数据源上启动多个线程。我们知道每个源都需要从头到尾进行完全处理——问题变成了我们是否希望每个源尽快处理，或者我们是否希望能够同时处理多个源，这样我们就不关心如何处理每个可能需要很长时间。

在单个线程上执行单个源的处理允许我同时处理多个源，并且在解决方案方面非常简单 - 迹象表明这是执行多线程的好地方。

对单个源执行多线程处理会增加相当大的复杂性，并且由于数据的性质（必须按输入顺序），多线程并不是一个好的解决方案。

# object - 没有其他 ELF/对象膨胀的最纯粹的组装/编译文件的方法

> ID：13132138
> 
> 赞同：6
> 
> 时间：2012-10-30T03:18:43.670
> 
> 标签：object, gcc, assembly, solaris, strip

我无法相信这似乎有多难。我正在使用 SPARC Solaris 8。我们有某种 GNU-gcc (3.4.2) 和 'as' 汇编器 (Sun WorkShop 6 2003/12/18 Compiler Common 6.0)。

无论如何，我尝试了几种方法来输出纯二进制文件。如

```
gcc -c yadda.s 
```

或仅调用汇编程序

作为 yadda.s

我还调查了汇编器手册页，但没有发现太多突发新闻。:( 作为手册页： http: [//pastebin.com/0FSNxhq1](http://pastebin.com/0FSNxhq1)

所以，我在生成的目标文件中仍然有一些膨胀。我不希望这个前 50 字节的 ELF 相关***或任何汇编器认为有助于我的初始化或它所想的任何东西。

我正在寻找的只是我的代码的纯二进制输出。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T04:19:09.477

汇编器不输出可执行代码，它输出一个目标文件。要使其可执行，您需要使用`ld`. 此命令允许您指定输出格式，可以是二进制（如果您的构建支持它）。

```
as yadda.s -o yadda.o
ld yadda.o -o yadda --oformat=binary 
```

您应该能够使用 gcc 在一行中完成此操作：

```
gcc yadda.s -o yadda -Xlinker --oformat=binary 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T03:41:43.373

如果您真的想要一个原始二进制文件，您可以使用以下命令从 ELF 文件生成一个：

```
objcopy -O binary yadda.elf yadda.bin 
```

请注意，您将无法正常运行生成的文件，因为内核将不再知道如何加载它。

# python - 从不允许直接访问页面的网站检索 json

> ID：13132143
> 
> 赞同：1
> 
> 时间：2012-10-30T03:19:36.400
> 
> 标签：python, json, graph

我正在尝试获取[本网站](http://www.grandexchangecentral.com/item.php?rid=10350)图表中包含的数据。我使用 Firebug 找到了 json 的直接链接并使用了这个脚本（它适用于其他直接 json 链接）。应该返回的是一组时间戳和价格。

```
 import urllib2
    import simplejson
    req = urllib2.Request("http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=10350")
    opener = urllib2.build_opener()
    f = opener.open(req)
    h = simplejson.load(f) 
```

运行此脚本返回`urllib2.HTTPError: HTTP Error 403: Forbidden`. 我可以使用 Firebug 手动获取数据，但我想使用脚本对多个数据集进行排序。有没有办法在不收到 HTTP 错误的情况下获取这些数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:47:28.430

该网站查找`Referer`标头并尝试确保请求来自其网页之一。这不是一个很好的安全措施，所以很容易绕过。

我现在有点懒，不想查找文档`urllib2`，所以这里有一个`requests`模块的解决方案：

```
import requests

url = 'http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=10350'
r = requests.get(url, headers={'Referer': 'www.grandexchangecentral.com'})

data = r.json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:27:07.323

这是一个仅限 stdlib 的版本，只需按照@Blender 的建议添加标题：

```
import json
import urllib2

url = "http://www.grandexchangecentral.com/include/gecgraphjson.php?jsid=10350"
req = urllib2.Request(url, headers={'Referer': 'www.grandexchangecentral.com'})
page = urllib2.urlopen(req) # assume no multithreading
data = json.load(page) # assume utf-8 encoding 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:26:40.953

看起来你做不到。尝试访问该链接时，这是我得到的错误。

> 不允许更改。您可能正在尝试直接访问此页面。或者您的浏览器可能没有发送正确的推荐人信息。我们需要此信息来验证会员帐户编辑。请使用适当的会员编辑页面，或使用其他浏览器。

您将不得不让您的脚本伪造登录到该站点或使用标题。或者，您可以尝试询问网站所有者是否可以访问以提取他们的数据。

# naudio - NAudio - 比特率与采样率

> ID：13132144
> 
> 赞同：0
> 
> 时间：2012-10-30T03:19:53.633
> 
> 标签：naudio

对于具有采样率的原始 PCM 数据 - 比如说 Fs - 使用什么比特率或采样率？我可以将 WaveFormat 采样率参数设置为与 Fs 相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T07:10:47.980

如果您在 WaveFormat 构造函数中使用两个参数提供采样率和通道，NAudio 将为您计算比特率。（您也可以指定位深度，但通常为 16）。

您可以指定任何您喜欢的采样率，但如果您想在 Windows 中轻松播放，请选择标准值（例如 44100、32000、48000、16000）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:22:17.970

96 khz 和 44.1 kHz 是标准音频采样率，比特率将根据您的需要从 4 到 32

# php - 在 PHP 中查询来自 MySql 的正确引号

> ID：13132147
> 
> 赞同：0
> 
> 时间：2012-10-30T03:20:22.820
> 
> 标签：php, mysql

在我的 MySql 中，我有这样存储的数据

```
....they try to provide time off to employees for volunteering, since they've experienced   such a huge growth period and "never got out of start-up mode," .... 
```

但是一旦我查询它并在 PHP 中回显它就会出现

```
they try to provide time off to employees for volunteering, since they�ve experienced such a huge growth period and �never got out of start-up mode,� 
```

是否必须将数据库中我的数据中的所有双引号和单引号替换为`&#34;`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:00:52.083

将行排序规则更改为 UTF-8。

# java - java - 铸造泛型

> ID：13132149
> 
> 赞同：1
> 
> 时间：2012-10-30T03:20:30.157
> 
> 标签：java, list, generics, inheritance

我很难用谷歌搜索这个。我找到了很多文章，但我仍然无法解决我的问题。

这是我的代码：

`List<MyMainClass> mySource = (List<MyMainClass>) session.getAttribute("myAttribute");`

***session.getAttribute("myAttribute")***可能会返回***`List<MyObject1>`***或***`List<MyObject2>`***。***`MyObject1`***和都是Now I have 2 个函数***`MyObject2`***的子类。***`MyMainClass`***第一个接受***`List<MyObject1>`***，另一个接受***`List<MyObject2>`***。现在我在 Eclipse 中遇到错误

`The method myMethod1(List<MyObject1>) in the type MyAction is not applicable for the arguments (List<MyMainClass>)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:24:32.857

您不能`List`在会话属性中安全地存储具有相同擦除 ( ) 的不同泛型类型。所以：不要这样做。

相反，无论该会话属性的列表类型如何，都可以重构您的代码，使其兼容。这可能很难，但长期对我来说似乎不那么臭。IME，当您需要将两种可能不同类型的东西存储在一个变量中时，这通常是一种糟糕的设计。

您可以交替使用两个不同的会话属性，以便知道要转换为哪种更具体的列表类型。

```
List<MyObject1> mySource1 = (List<MyObject1>) session.getAttribute("myAttribute1");
if (mySource1 == null) {
    List<MyObject2> mySource2 = (List<MyObject2>) session.getAttribute("myAttribute2");
    if (mySource2 == null) {
        // ???
    } else {
        // rock and roll
        myMethod2(mySource2);
    }
} else {
    // proceed
    myMethod1(mySource1);
} 
```

如果您采用后一种方法，我建议您编写一个包装器对象或方法来为您管理这些细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:40:08.910

如果可能的话，我建议您更改声明**mySource**和函数签名的方式。

以这种方式声明：

```
 List<? extends MyMainClass> mySource = (List<MyMainClass>) 

session.getAttribute("myAttribute"); 
```

并更改您的函数签名

```
returnType fun(List<Object1> object1List){
} 
```

至

```
returnType fun(List<? extends MyMainClass> object1List){
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T03:36:01.423

正如建议的那样，这有点棘手。如果你真的想这样做，我认为你可以这样做：

```
 List<MyMainClass> mySource = 
                           (List<MyMainClass>) session.getAttribute("myAttribute");
 if(mySource != null && !mySource.isEmpty()){
      //Get the first element and check the type
      MyMainClass firstElement = mySource.get(0);
      if(firstElement instanceof MyObject1){
          List<MyObject1> mySourceObj1 = (List<MyObject1>)mySource;
          myMethod1(mySourceObj1);
      }else{
          List<MyObject3> mySourceObj2 = (List<MyObject2>)mySource;
          myMethod1(mySourceObj2);
      }
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T03:28:57.783

那是对的。泛型仅提供编译时保护。您正在尝试将更通用的列表类型传递给更具体的列表类型函数。

了解 的 实例`List<MyMainClass>`可以同时包含`MyObject1`和的实例`MyObject2`。当您调用`function1(List<MyObject1>)`此函数时，列表的所有元素都应为 type `MyObject1`。因此，您不能传递 type 的列表`List<MyMainClass>`。

您需要有区分变量来存储不同类型的列表。

# c++ - QWidget显示功能奇怪

> ID：13132155
> 
> 赞同：0
> 
> 时间：2012-10-30T03:21:14.727
> 
> 标签：c++, qt, qwidget

两个UI类，也叫主题。然后写一些对事件的控制。这是我的主要代码

```
 if(ui==1){
    theme1=new theme1();
    connect(theme1->ui->btn_send1,SIGNAL(clicked()),this,SLOT(Btn_Click_send1()));      
    connect(theme1->ui->btn_send2,SIGNAL(clicked()),this,SLOT(Btn_Click_send2()));       

 }else{
     theme2=new theme2();
     connect(theme2->ui->btn_send1,SIGNAL(clicked()),this,SLOT(Btn_Click_send1()));     
    connect(theme2->ui->btn_send2,SIGNAL(clicked()),this,SLOT(Btn_Click_send2()));      
 }
 void testCode::Btn_Click_send1(){
  run1=new Run1();
   run1.show();
 }
void testCode::Btn_Click_send2(){
run2=new Run2();
run2.show(); 
```

}

UI等于1，代码不错，但是等于其他UI出现BUG。</p>

调试中，当在show()中发现错误。</p>

Run1 和 Run2 在其他类中运行，但也不错。

不知道为什么！！！一个星期了，好着急！</p>

谢谢大家！

# php - 在完成一个 jQuery-ajax-PHP 教程时，为什么它坏了？

> ID：13132161
> 
> 赞同：-1
> 
> 时间：2012-10-30T03:21:34.077
> 
> 标签：php, ajax, jquery

我正在浏览一个有点过时的教程，但我试图改进代码并使其保持最新。

代码注释很好，易于理解，但我看到了`<b>`标签之类的使用，我认为它已弃用，让我觉得它有点旧......而且我也想知道，为什么`DB.php`包含在内，当有一个连接命令，已经在 php 文件中了吗？

请看一下代码并告诉我为什么它不起作用？

这是html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<script type="text/javascript" src="/javascript/jquery-1.8.2.js"></script>
<script type="text/javascript" src="phpmysql.js"></script>
</head>
<body>

  <!-----------------------------------------------------------------------
  1) Create some html content that can be accessed by jquery
  ------------------------------------------------------------------------>
  <h2> Bookstore example </h2>
  <h3>Output: </h3>
  <div id="output">Will you look at some books?</div>
  <button>click</button>
  </body>
</html> 
```

和js：

```
$(document).ready.(
  function () 
  {
    $("button").click.(function()
    {
      //---------------------------------------------------------------------
      // 2) Send a http request with AJAX http://api.jquery.com/jQuery.ajax/
      //---------------------------------------------------------------------
      $.ajax({                                      
        url: 'form3.php',   //the script to call to get data          
        data: "",       //you can insert url argumnets here to pass to api.php
                        //for example "id=5&parent=6"
        dataType: 'json',                //data format      
        success: function(data)          //on recieve of reply
        {
          var id = data[0];              //get id
          var vname = data[1];           //get name
          //------------------------------------------------------------------
          // 3) Update html content
          //------------------------------------------------------------------
          $('#output').html("<p>Title: </p>"+id+"<p> Content: </p>"+vname); //Set output element html
        } 
      });
    }); 
  }); 
```

和PHP：

```
<?php 

  //--------------------------------------------------------------------------
  // Example php script for fetching data from mysql database
  //--------------------------------------------------------------------------
  $host = "localhost";
  $user = "username";
  $pass = "password";

  $databaseName = "auto_try";
  $tableName = "books";

  //------------------------------------------------------------------------
  // 1) Connect to mysql database
  //------------------------------------------------------------------------
  include 'DB.php';
  $con = mysql_connect($host,$user,$pass);
  $dbs = mysql_select_db($databaseName, $con);

  //------------------------------------------------------------------------
  // 2) Query database for data
  //------------------------------------------------------------------------
  $result = mysql_query("SELECT * FROM $tableName");      //query
  $array = mysql_fetch_row($result);                      //fetch result    

  //------------------------------------------------------------------------
  // 3) echo result as json 
  //------------------------------------------------------------------------
  echo json_encode($array); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:26:47.390

你的js jquery函数错了试试这个，`.`准备好或点击后没有

```
 $(document).ready(
      function () 
      {
        $("button").click(function()
        {..... 
```

# windows-phone-7 - 在 Windows Phone 中屏幕被锁定之前是否有任何事件？

> ID：13132169
> 
> 赞同：2
> 
> 时间：2012-10-30T03:22:40.747
> 
> 标签：windows-phone-7, events, screen-lock

如标题所示，我想知道在 Windows Phone 7 中屏幕被锁定之前是否会发生任何事件，以便在屏幕被锁定之前我可以使用一些组合条件来确定是否设置`IdleDetectionMode`为`Disabled`。

或者我们可以获取系统屏幕锁定时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T09:23:52.880

我认为您应该尝试对 PhoneApplicationFrame 使用[Obscured](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationframe.obscured%28v=vs.92%29.aspx)（当外壳镶边覆盖框架时发生）和[Unobscured](http://msdn.microsoft.com/en-us/library/microsoft.phone.controls.phoneapplicationframe.unobscured%28v=vs.92%29.aspx) （当外壳镶边不再覆盖框架时发生）事件。

您始终可以使用 (PhoneApplicationFrame)App.Current.RootVisual 获取 PhoneApplicationFrame 的实例，但要小心，不要造成内存泄漏。

# java - Java：PrintStream 意外自动刷新

> ID：13132170
> 
> 赞同：2
> 
> 时间：2012-10-30T03:22:42.120
> 
> 标签：java, printwriter, output, printstream, autoflush

```
import java.io.PrintStream;
import java.util.Scanner;
public class OutputTest
{

    public static void main(String[] args)
    {
        Scanner scan = new Scanner(System.in);
        PrintStream out = new PrintStream(System.out); 
        while(true) 
        {
            int in = scan.nextInt();
            if(in == 0) break;
            System.out.println(in*in);
        }
        out.flush();
    }

} 
```

我期待这个程序获取一个数字列表，每行一个，然后当它达到零时，打印所有的正方形，每行一个。相反，它只是呼应我用方块输入的每个数字。

理想情况下，我实际上会包括以下行：

```
System.setOut(out); 
```

然后正常编写我的程序的其余部分（除了最后的刷新），但这具有立即回显的相同结果。

但是，将 更改`PrintStream`为 a`PrintWriter`确实可以按预期进行这项工作，但是我不能这样做，`System.setOut`因为`PrintWriter`不会扩展`OutputStream`.

为什么这不符合我的预期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:48:07.830

任何流或写入器上的 flush() 表示“如果有任何要刷新的内容，则刷新”。在手动刷新之前，任何流或写入器*都不会缓冲的预期行为。*您可以使用缓冲流包装输出流，但当您指定的缓冲区大小已满时，它也会刷新。在您的情况下，最简单的解决方案是写入 StringBuffer ，然后在收到零时打印它。

# r - 在 R 中生成和命名变量的动力转换

> ID：13132172
> 
> 赞同：3
> 
> 时间：2012-10-30T03:23:06.237
> 
> 标签：r, dataframe, paste

我是 R 的新手（来自 Stata 世界）。为了节省自己的时间，我尝试使用循环函数来生成数据框中现有数据列的幂（大约 70,000 行长）。现有列称为 OrdersData$timecount；我正在尝试自动生成 9 次幂，即 OrdersData$timecount2=OrdersData$timecount^2、OrdersData$timecount3=OrdersData$timecount^3 等等。我正在尝试在一个命令中完成所有操作：

```
i<-1;
for(i in 1:9){paste(OrdersData$timecount,"[i+1]",sep="")<-OrdersData$timecount^[i+1]} 
```

我收到一个名为“文本”的错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:43:50.787

你需要停止思考`stata`并使用`R`成语。

这是一种有效的方法（并且会阻止您思考`stata`）

```
 DF <- data.frame(timeCount = seq(0,1,l=3))
  # use lapply to create a list
  # with elements timeCount^1, timeCount^2, .... etc
  powered <- lapply(1:9, function(x,y) x^y, x = DF$timeCount)
  # give names that make sense
  names(powered) <-  paste0('timeCount',1:9)
  # convert to a data.frame
  newDF <-  as.data.frame(powered)

  newDF

  timeCount1 timeCount2 timeCount3 timeCount4 timeCount5 timeCount6 timeCount7 timeCount8  timeCount9
1        0.0       0.00      0.000     0.0000    0.00000   0.000000  0.0000000 0.00000000 0.000000000
2        0.5       0.25      0.125     0.0625    0.03125   0.015625  0.0078125 0.00390625 0.001953125
3        1.0       1.00      1.000     1.0000    1.00000   1.000000  1.0000000 1.00000000 1.000000000 
```

@Brandon 的答案可能更容易理解，但在循环中增长 data.frame 将每次至少复制一次 data.frame （内部）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T03:43:12.280

您的错误来自将`<-`变量分配给字符串（不是变量）。您可以使用该`assign`命令“创建”变量。查看`?assign`和`?get`（鉴于您目前的尝试，阅读两者的宝贵学习经验）

但是您可以使用与您尝试创建的大部分内容相匹配的 for 循环。

```
for(i in 1:9) {
OrdersData[paste("timecount",i+1,sep="")] <- OrdersData$timecount^i
} 
```

有时思考比打字需要更长的时间：

```
OrdersData$timecount2 <- OrdersData$timecount^2
OrdersData$timecount3 <- OrdersData$timecount^3
OrdersData$timecount4 <- OrdersData$timecount^4
OrdersData$timecount5 <- OrdersData$timecount^5
OrdersData$timecount6 <- OrdersData$timecount^6
OrdersData$timecount7 <- OrdersData$timecount^7
OrdersData$timecount8 <- OrdersData$timecount^8
OrdersData$timecount9 <- OrdersData$timecount^9 
```

# .net - ItemsControl 和 DataTemplate

> ID：13132180
> 
> 赞同：0
> 
> 时间：2012-10-30T03:24:07.740
> 
> 标签：.net, wpf

似乎需要一些时间才能将数据模板设置到新创建的项目中。这类似于[如何在 ItemsControl 中检索项目的 DataTemplate（和特定对象）？](https://stackoverflow.com/questions/2269319/how-can-i-retrieve-the-datatemplate-and-specific-objects-of-an-item-in-an-item)但这也不能提供令人满意的答案。

```
var newIndex = this.Items.Add(new object()); // new "data"
var newContainer = (ContentPresenter) this.ItemContainerGenerator.ContainerFromIndex(newIndex);
var uiElem = newContainer.FindName("txt"); 
```

对 findname 的调用将返回 null，因此 VisualTreeHelper.GetChildrenCount = 0。如果我给它一些时间，则模板已绑定并且一切正常，但这是不确定的。有谁知道强制模板立即绑定的事件或方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:13:26.443

应用程序可以调用[ApplyTemplate()](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.applytemplate.aspx)来保证元素的可视化树是完整的。如果代码将检查树中的子元素，则可能需要此保证步骤。

# r - 如何将总和添加到表中并获取 R 中每个单元格的比例

> ID：13132186
> 
> 赞同：8
> 
> 时间：2012-10-30T03:24:51.023
> 
> 标签：r, margin, contingency

我试图通过将每一行除以行总和来获得每个单元格的比例，但是 R 给了我一个错误说，

> data.table$Country 中的错误：$ 运算符对原子向量无效

我怎样才能解决这个问题？另外，如何将整个列和行的总和值添加到 data.table？我在运行时得到了这个值`addmargins(data.table)`，但我想将总和附加到我的数据框中。

* * *

这是我的代码：

```
x = c(40,50,30,30,50)                
y = c(40,20,30,40,45)                              
data.table = rbind(x,y)   
data.table
dimnames(data.table)=list("Country"=c("England","Germany"),"Score"=c("Q-Score","T-score","X-score","Y-score","Z-score"))
addmargins(data.table)
table(data.table$Country,data.table$Score/rowSums(table(data.table&Country,data.table$Score))) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-30T03:33:03.803

调用的输出`table`是 class 的对象`table`。这基本上是一个`array`. 您不能用于`$`引用数组或原子向量。（因此错误）。

如果您想将结果分配`addmargins(data.table)`给一个对象，那么您可以自由地这样做

```
margin_table <- addmargins(data.table) 
```

看起来你想创建一个相对比例的表。

`prop.table`对此很有用。

```
 prop.table(margin_table)

         Score
Country      Q-Score    T-score X-score    Y-score    Z-score       Sum
  England 0.02666667 0.03333333    0.02 0.02000000 0.03333333 0.1333333
  Germany 0.02666667 0.01333333    0.02 0.02666667 0.03000000 0.1166667
  Sum     0.05333333 0.04666667    0.04 0.04666667 0.06333333 0.2500000 
```

您还可以`prop.table`在原始文件上运行以获得行比例（1 = 行，2 = 列）

```
 prop.table(data.table, margins = 1)
      Score
Country     Q-Score   T-score   X-score   Y-score   Z-score
  England 0.2000000 0.2500000 0.1500000 0.1500000 0.2500000
  Germany 0.2285714 0.1142857 0.1714286 0.2285714 0.2571429 
```

的帮助文件`table`（由`?table`or访问`help('table')`是详细的，并且包含指向 和 的帮助文件的`prop.table`链接`addmargins`！

# iphone - 在 iphone 中使用 NSXMLParser 解析 XML？

> ID：13132189
> 
> 赞同：1
> 
> 时间：2012-10-30T03:25:34.090
> 
> 标签：iphone, xcode4, xml-parsing, nsxmlparser

我正在解析`XML`响应。但我没有得到想要的结果。不明白我哪里出错了？我的 XML 响应如下所示：

```
<List>   
    <User>
         <Id>1</Id>
    </User>
    <User>
      <Employee>
          <Name>John</Name>
          <TypeId>0</TypeId>
          <Id>0</Id>
      </Employee> 
         <Id>0</Id>
     </User>
</List> 
```

由此我想要Id（1）和Name（John）的值。我不想要Id（0）

我的解析代码是：

```
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{

    if ([elementName isEqualToString:@"List"]) 
    {
        arr=[[NSMutableArray alloc] init];
        drr=[[NSMutableDictionary alloc] init]; 

    }
   srr=[[NSMutableString alloc] init];
   } 

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    [srr appendString:string];
}
-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    if([elementName isEqualToString:@"Id"])
    {

        [drr setObject:srr forKey:@"Id"];
        [srr release],srr=nil;
        return;
    }    

    if([elementName isEqualToString:@"Name"])
    {

        [drr setObject:srr forKey:@"Name"];
        [srr release],srr=nil;
        [arr addObject:drr]; 

        return;
    } 

    if([elementName isEqualToString:@"List"])
    {
       [drr release];

     }

    [srr release],srr=nil;

   } 
```

我希望输出为：

```
(
{
Name="John";
Id="1";
}
) 
```

但我是这样的：

```
(
        {
        Name = John;
        Id = "0";
    },
        {
        Name = John;
        Id = "0";
    }
) 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:51:36.220

我建议您使用[TBXML](http://tbxml.co.uk/TBXML/TBXML_Free.html)而不是 NSXMLParser。它更快更容易使用。

# asp.net-mvc-3 - 每次新用户登录时，新 Orchard 用户都会使网站崩溃

> ID：13132192
> 
> 赞同：1
> 
> 时间：2012-10-30T03:26:12.140
> 
> 标签：asp.net-mvc-3, orchardcms

有人可以给我建议吗？我有一个功能齐全的果园网站，内容齐全，一切都很好。但是，到目前为止，我只使用过 DEFAULT ADMIN 帐户。我添加了模块，一切都完成了。

现在我想添加一个仅用于编辑和添加内容并且不能说添加模块等的用户。我创建了一个新用户并批准了他们，然后我尝试登录他们并且站点崩溃了。然后我无法重新进入。我必须回收应用程序池才能以管理员身份重新进入。有人见过这个吗？

```
[ObjectNotFoundException: No row with the given identifier exists[Orchard.Roles.Models.PermissionRecord#27]]
   NHibernate.Impl.DefaultEntityNotFoundDelegate.HandleEntityNotFound(String entityName, Object id) +56
   NHibernate.Proxy.AbstractLazyInitializer.CheckTargetState() +48
   NHibernate.Proxy.AbstractLazyInitializer.Initialize() +89
   NHibernate.ByteCode.Castle.LazyInitializer.Intercept(IInvocation invocation) +123
   Castle.DynamicProxy.AbstractInvocation.Proceed() +81
   PermissionRecordProxy1b0b6ea8f5864e2c9211eba674e34740.get_Name() +84
   Orchard.Roles.Services.RoleService.GetPermissionsForRole(Int32 id) +133
   Orchard.Roles.Services.RoleService.GetPermissionsForRoleByNameInner(String name) +37
   Orchard.Roles.Services.<>c__DisplayClasse.<GetPermissionsForRoleByName>b__d(AcquireContext`1 ctx) +26
   Orchard.Caching.Cache`2.CreateEntry(TKey k, Func`2 acquire) in c:\Build\Orchard\src\Orchard\Caching\Cache.cs:57
   Orchard.Caching.<>c__DisplayClass2.<Get>b__0(TKey k) in c:\Build\Orchard\src\Orchard\Caching\Cache.cs:19
   System.Collections.Concurrent.ConcurrentDictionary`2.AddOrUpdate(TKey key, Func`2 addValueFactory, Func`3 updateValueFactory) +125
   Orchard.Caching.Cache`2.Get(TKey key, Func`2 acquire) in c:\Build\Orchard\src\Orchard\Caching\Cache.cs:17
   Orchard.Caching.DefaultCacheManager.Get(TKey key, Func`2 acquire) in c:\Build\Orchard\src\Orchard\Caching\DefaultCacheManager.cs:33
   Orchard.Roles.Services.RoleService.GetPermissionsForRoleByName(String name) +100
   Orchard.Roles.Services.RolesBasedAuthorizationService.TryCheckAccess(Permission permission, IUser user, IContent content) +561
   Orchard.Security.Authorizer.Authorize(Permission permission, IContent content, LocalizedString message) in c:\Build\Orchard\src\Orchard\Security\Authorizer.cs:72
   Orchard.Security.Authorizer.Authorize(Permission permission) in c:\Build\Orchard\src\Orchard\Security\Authorizer.cs:60
   Orchard.Security.SecurityFilter.OnAuthorization(AuthorizationContext filterContext) in c:\Build\Orchard\src\Orchard\Security\SecurityFilter.cs:24
   System.Web.Mvc.ControllerActionInvoker.InvokeAuthorizationFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor) +103
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +329
   System.Web.Mvc.Controller.ExecuteCore() +115
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +94
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +31
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +23
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +59
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   Orchard.Mvc.Routes.HttpAsyncHandler.EndProcessRequest(IAsyncResult result) in c:\Build\Orchard\src\Orchard\Mvc\Routes\ShellRoute.cs:147
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:25:42.760

似乎它与该用户的角色有关。他有吗？有没有可能他的角色消失了？尝试删除有问题的角色。

# python - Type 1 带有日志图的字体

> ID：13132194
> 
> 赞同：13
> 
> 时间：2012-10-30T03:26:28.007
> 
> 标签：python, matplotlib

我正在尝试使用 Matplotlib 图形作为相机就绪提交的一部分，而出版社只要求使用 Type 1 字体。

我发现 PDF 后端很高兴为具有线性 Y 轴的简单图形输出 Type-1 字体，但为对数 Y 轴输出 Type-3 字体。

使用对数 yscale 会导致使用 mathtext，它似乎使用 Type 3 字体，大概是因为默认使用指数符号。我可以使用丑陋的技巧来解决这个问题 - 使用 pyplot.yticks() 强制轴刻度不使用指数 - 但这需要移动绘图区域以容纳大标签（如 10 ^ 6）或将轴写为10、100、1K 等，因此它们适合。

截至今天，我已经使用 matplotlib master 分支以及 1.1.1 测试了下面的示例，它产生了相同的行为，所以我不知道这是一个错误，可能只是意外行为。

```
#!/usr/bin/env python
# Simple program to test for type 1 fonts. 
# Generate a line graph w/linear and log Y axes.

from matplotlib import rc, rcParams

rc('font',**{'family':'sans-serif','sans-serif':['Helvetica']})
#rc('font',**{'family':'sans-serif','sans-serif':['computer modern sans serif']})

# These lines are needed to get type-1 results:
# http://nerdjusttyped.blogspot.com/2010/07/type-1-fonts-and-matplotlib-figures.html
rcParams['ps.useafm'] = True
rcParams['pdf.use14corefonts'] = True
rcParams['text.usetex'] = False

import matplotlib.pyplot as plt

YSCALES = ['linear', 'log']

def plot(filename, yscale):
    plt.figure(1)
    xvals = range(1, 2)
    yvals = xvals
    plt.plot(xvals, yvals)
    plt.yscale(yscale)
    plt.savefig(filename + '.pdf')

if __name__ == '__main__':
    for yscale in YSCALES:
        plot('linegraph-' + yscale, yscale) 
```

有谁知道用日志轴获得 Type 1 字体的干净方法？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-31T20:39:42.473

这是我用于相机准备提交的代码：

```
from matplotlib import pyplot as plt

def SetPlotRC():
    #If fonttype = 1 doesn't work with LaTeX, try fonttype 42.
    plt.rc('pdf',fonttype = 1)
    plt.rc('ps',fonttype = 1)

def ApplyFont(ax):

    ticks = ax.get_xticklabels() + ax.get_yticklabels()

    text_size = 14.0

    for t in ticks:
        t.set_fontname('Times New Roman')
        t.set_fontsize(text_size)

    txt = ax.get_xlabel()
    txt_obj = ax.set_xlabel(txt)
    txt_obj.set_fontname('Times New Roman')
    txt_obj.set_fontsize(text_size)

    txt = ax.get_ylabel()
    txt_obj = ax.set_ylabel(txt)
    txt_obj.set_fontname('Times New Roman')
    txt_obj.set_fontsize(text_size)

    txt = ax.get_title()
    txt_obj = ax.set_title(txt)
    txt_obj.set_fontname('Times New Roman')
    txt_obj.set_fontsize(text_size) 
```

字体在您运行之前不会出现`savefig`

例子：

```
import numpy as np

SetPlotRC()

t = np.arange(0, 2*np.pi, 0.01)
y = np.sin(t)

plt.plot(t,y)
plt.xlabel("Time")
plt.ylabel("Signal")
plt.title("Sine Wave")

ApplyFont(plt.gca())
plt.savefig("sine.pdf") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-18T17:20:19.210

通过 matplotlib 获取 Type 1 字体的首选方法似乎是使用 TeX 进行排版。这样做会导致*所有*轴都以默认数学字体排版，这通常是不希望的，但可以通过使用 TeX 命令来避免。

长话短说，我找到了这个解决方案：

```
import matplotlib.pyplot as mp
import numpy as np

mp.rcParams['text.usetex'] = True #Let TeX do the typsetting
mp.rcParams['text.latex.preamble'] = [r'\usepackage{sansmath}', r'\sansmath'] #Force sans-serif math mode (for axes labels)
mp.rcParams['font.family'] = 'sans-serif' # ... for regular text
mp.rcParams['font.sans-serif'] = 'Helvetica, Avant Garde, Computer Modern Sans serif' # Choose a nice font here

fig = mp.figure()
dim = [0.1, 0.1, 0.8, 0.8]

ax = fig.add_axes(dim)
ax.text(0.001, 0.1, 'Sample Text')
ax.set_xlim(10**-4, 10**0)
ax.set_ylim(10**-2, 10**2)
ax.set_xscale("log")
ax.set_yscale("log")
ax.set_xlabel('$\mu_0$ (mA)')
ax.set_ylabel('R (m)')
t = np.arange(10**-4, 10**0, 10**-4)
y = 10*t

mp.plot(t,y)

mp.savefig('tmp.png', dpi=300) 
```

然后导致这个 ![结果图像](../Images/bfd7c4140448045ee7ce7555b5ff476e.png)

灵感来自： [https](https://stackoverflow.com/a/20709149/4189024) ://stackoverflow.com/a/20709149/4189024和 [http://wiki.scipy.org/Cookbook/Matplotlib/UsingTex](http://wiki.scipy.org/Cookbook/Matplotlib/UsingTex)

# ajax - Firefox 不断给 Redactor.min.js 错误 0x80004005

> ID：13132198
> 
> 赞同：1
> 
> 时间：2012-10-30T03:26:55.367
> 
> 标签：ajax, firefox, jquery, wysiwyg

当我在 Firefox（仅 Firefox）中使用编辑器时。

控制台不断给我随机脚本的错误 0x80004005。

例如，如果我的页面中有 facebook 的 sdk，错误将来自该 jssdk，

如果我删除 sdk，错误将从 Redactor.min.js 通过...

这是我在 Redactor.min.js 中的所有 ajax 内容

```
handler: function()
        {
            $.ajax({
                url: this.opts.handler,
                type: 'post',
                data: 'redactor=' + escape(encodeURIComponent(this.getCode())),
                success: $.proxy(function(data)
                {
                    this.setCode(data);
                    this.syncCode();

                }, this)
            });

        },

// dragupload
                if ($('#redactor_file').size() !== 0)
                {
                    $('#redactor_file').dragupload(
                    {
                        url: this.opts.imageUpload,
                        success: $.proxy(this.imageUploadCallback, this)
                    });
                }

                // ajax upload
                this.uploadInit('redactor_file', { auto: true, url: this.opts.imageUpload, success: $.proxy(this.imageUploadCallback, this)  });

                $('#redactor_upload_btn').click($.proxy(this.imageUploadCallbackLink, this));

            }, this);

            this.modalInit(RLANG.image, this.opts.path + '/plugins/image.html', 570, handler, true);

        },

$.ajax({
                dataType: 'html',
                type: 'get',
                url: url,
                success: $.proxy(function(data)
                {... 
```

# elasticsearch - 可以在本地生成tire+elasticsearch索引，稍后将索引文件推送到服务器吗？

> ID：13132203
> 
> 赞同：0
> 
> 时间：2012-10-30T03:28:04.707
> 
> 标签：elasticsearch, tire

生成索引时会消耗内存。

可以在本地生成tire+elasticsearch索引，稍后将索引文件推送到服务器吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:39:17.640

我想您可以充分利用 elasticsearch 分布式功能来实现您想要的。

您可以在节点（甚至您的本地计算机）上索引数据，然后每当您将新节点添加到同一个集群（它们需要具有相同的集群名称）时，分片就会自动分布在集群上。您可以控制分片的分布方式，通过[更新设置 api 更新设置](http://www.elasticsearch.org/guide/reference/api/admin-indices-update-settings.html)。例如，使用该`cluster.routing.allocation.exclude`指令您可以告诉 elastichsearch 您不想在特定节点上分配任何分片。设置更新后，您只需等到所有分片都已移动到另一个节点。

否则，您可以查看[集群重新路由 api](http://www.elasticsearch.org/guide/reference/api/admin-cluster-reroute.html)以移动分片，但请注意，在您移动分片后，elasticsearch 始终尝试平衡它们，除非您禁用此自动行为。

# delphi - 添加行时计算StringGrid高度

> ID：13132206
> 
> 赞同：0
> 
> 时间：2012-10-30T03:28:26.463
> 
> 标签：delphi, tstringgrid

鉴于我希望我的字符串网格具有相同高度的行......

我知道它将从 5 行开始，我在设计时就这样做了。

在运行时，我可能想要添加一些额外的行（并且我有代码不要添加到父级的底部下方；那时我依赖滚动条）。

似乎 sg.height := sg.height + sg.RowHeights[0]; 没有产生预期的结果 - 最后一行之后有意外的空白（我仍在尝试计算额外的高度如何对应于行数，但看起来它是一行的高度，不管有多少行在网格中）。

还有什么我应该考虑的吗？（也许是 GridLineWidth？）或者我是否在对象检查器中错误地设置了一个属性？我应该使用`GridHeight`，而不是`Height`？

注意：此问题仅在 stringgid 与所有单元格一样宽并且出现滚动条并覆盖最后一列的一部分时才会出现。如果我在字符串网格的右侧留下一个丑陋的空白空间以适应滚动条，则不会出现问题。

谁能告诉我添加多行后计算新网格高度的公式？或者我做错了什么。

* * *

[更新] 3 aap的软糖因子对应`margin`属性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:54:34.440

以防万一除我之外的任何人感兴趣，这就是我为使其正常工作所做的工作。

添加一行时：

```
newHeight := stringGrid.Height + 
             stringGrid.RowHeights[Pred(stringGrid.Row)] + 
             stringGrid.GridLineWidth;  

if newHeight < maxheight then
   stringGrid.Height := newHeight;

stringGrid.RowCount := stringGrid.RowCount + 1; 
```

或者，我可以保留它，直到我添加了所有行，然后

```
stringGrid.Height := ((stringGrid.RowHeights[1] + stringGrid.GridLineWidth) *              
                      (stringGrid.VisibleRowCount + stringGrid.FixedRows)) + 3; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T17:53:11.613

如果它有任何价值，我会将我的试验和错误添加到您的研究中。
![TMS AdvStringGrid](../Images/fd03879da99140fba822dd07811675ee.png). 这是 TMS AdvStringGrid 的图像。我认为它主要基于具有许多有用扩展的普通字符串网格。为了更容易计算行数，我使用 SnagIt 放大了图像并使像素网格线可见。我在网格的第一行添加了一些红线。在此网格上，DefaultRowHeight 设置为 21。在红线之间，每条线有 5 个像素，因此要为 DefaultRowHeight 获得 21 个像素，您必须包括高度为 1 像素的 stringgrid 网格线。当我加载这个网格时，我使用这个代码：

```
with gridLimits do
    begin
      RowCount := 3;
      Cells[0, 0] := 'Maximum Amount';
      Cells[0, 1] := 'Maximum Base';
      Cells[0, 2] := 'Maximum Period';
      IntegralHeight := False;
      MyHeight := 0;
      for i := 0 to RowCount - 1 do
        inc(MyHeight, RowHeights[i]);
      Height := MyHeight + 5;
    end;
end; 
```

我使用 SnagIt 捕获网格并让它捕获屏幕上的对象。它包括网格周围的 1 像素灰线。网格实际上似乎从蓝线开始，所以要获得高度，我想我需要将 DefaultRowHeight 乘以三加上顶部蓝线加上底部蓝线，但如果我这样做并单击底行，网格向上滚动。如果我将 3 添加到高度，它也会向上滚动。如果我将 4 添加到高度，它不会滚动。我不知道为什么我将它设置为 5，我现在将其设置为 4，因为您可以看到底部有 1 个像素太多。

可能应该添加顶部和底部灰线以获得网格的总高度，这就是为什么它是 DefaultRowHeight 乘以 3 加上顶部和底部线加上另外 2 条用于 SnagIt 包含的灰色线。

# java - 在程序中添加延迟

> ID：13132207
> 
> 赞同：1
> 
> 时间：2012-10-30T03:28:30.247
> 
> 标签：java

我想使用该`Thread.sleep(1000)`命令在我的程序中添加延迟（因此在继续之前让它停止 1 秒），但这意味着我还需要添加`throws InterruptedException`. 但是，我不知道把它放在哪里。

我的代码现在基本上是这样的：

```
public static void main(String[] args) {
    Clock myClock = new Clock;   // new clock object.

    while (true) {
        myClock.tick();
    }
} 
```

我的另一堂课：

```
public class Clock {
    // .. some constructors and stuff

    public void tick() {
        secondHand.draw();   // redraws the second hand to update every second
    }

    // .. some more methods and stuff
} 
```

我只想`tick()`每 1 秒调用一次该方法，但我不知道在哪里可以放置`Thread.sleep`and`throws InterruptedException`语句。任何帮助，将不胜感激。此外，我可以让我的时钟滴答作响和/或更新的其他方式的任何输入也将有所帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T03:30:45.390

> 我只想每 1 秒调用一次 tick() 方法

调用后`tick()`，在当前线程上休眠，如下所示：

```
public static void main(String[] args) {
    Clock myClock = new Clock;   // new clock object.

    while (true) {
        myClock.tick();
        // wait for a second.
        try {
            Thread.sleep(1000);
        }
        catch (InterruptedException ie) {
            // Handle the exception
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:43:01.027

根据程序的流程，您可能希望将`Thread.sleep(1000);`语句放入控制逻辑中。我的意思是，`tick()`按照惯例，任何逻辑调用你的方法都是引入逻辑控制的最佳位置——在这种情况下是你的`Thread.sleep(1000);`语句。

唉，你的调用逻辑应该是这样的：

```
try {
    while (true) {
        Thread.sleep(1000);
        myClock.tick();
    }
} catch(InterruptedException e) {
    System.err.println("Something went wrong");
} 
```

这种方法确保如果您有其他控制逻辑访问您的`tick()`方法，那么它不会被绑定到 1 秒延迟。不同的客户通常有不同的需求...

我更喜欢将整个 while 循环包装在 try catch 块中以实现可伸缩性安全可读性...我的意思是，如果您的`tick()`方法中的逻辑变得更加复杂并且您最终抛出更多异常，那么您可以简单地将 catch 子句添加到一个 try catch 块像这样：

```
try {
    while (true) {
        Thread.sleep(1000);
        myClock.tick();
    }
} catch(InterruptedException e) {
    System.err.println("Something went wrong");
} catch(SomeNewExcetion e) {
    System.err.println("Something went wrong");
} catch(SomeOtherNewExceptoion e) {
    System.err.println("Something went wrong");
} catch(SomeFinalException e) {
    System.err.println("Something went wrong");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T03:44:33.620

您可以使用`javax.swing.Timer`或`java.util.Timer`来获得相同的结果。

它`javax.swing.Timer`的优点是当它被触发时，该`ActionPerformed`方法在事件调度线程中执行，从而更容易更新 UI。

**java.util.Timer**

```
timer = new Timer();
timer.schedule(new TickTock (), 1000);

public class TickTock extends TimerTask {
    public void run() {
        System.out.println("Tick tock!");
    }
} 
```

**javax.swing.Timer**

```
Timer timer = new Timer(1000, new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        System.out.println("Tick tock!");
        repaint();
    }
});
timer.setRepeats(true);
timer.setCoalesce(true);
timer.start(); 
```

您可以阅读[如何使用摇摆计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)了解更多信息`javax.swing.Timer`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T03:59:19.533

虽然我通常不会建议它。

在这种情况下，您实际上不需要为此被中断编写代码。通过使用运行时异常包装来隐藏它。

```
public class Clock {
    // .. some constructors and stuff

    public void tick() {
       secondHand.draw();   // redraws the second hand to update every second
    }
    public void wait() {
       try {
           Thread.sleep(1000)
       } catch(InterruptedException e) {
           throw new RuntimeException("Don't know how to handle this", e);
       }
    }
   // .. some more methods and stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-16T12:25:58.330

它在java中非常简单

```
TimeUnit.SECONDS.sleep(2); 
```

# jquery - 在精灵内悬停时交换图像

> ID：13132209
> 
> 赞同：2
> 
> 时间：2012-10-30T03:28:43.147
> 
> 标签：jquery, css

我有一个用于显示一些图像的精灵。我正在尝试仅使用 CSS 来交换悬停时的精灵图像。

```
.sprE {
background-color: transparent;
background-image: url(/i/fW.png);
background-repeat: no-repeat;
height: 30px;
width: 30px
}
.sprE:hover {
background-image: url(/i/fC.png);
cursor: pointer
}
.comply {
background-position: 0 0
}

<span class="sprE comply"></span> 
```

它在 FireFox 中运行良好，但在 IE 中不行……我确信我可以让它与一些 jQuery 一起工作，但在我这样做之前，我想我会探索所有 CSS 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T12:57:40.640

是的，它与 DOCTYPE 相关。我将其更改为严格并且有效。

# eclipse - 无法在 Eclipse 中运行 Erlang

> ID：13132212
> 
> 赞同：0
> 
> 时间：2012-10-30T03:28:56.817
> 
> 标签：eclipse, erlang

我已经在 Eclips 中设置了 Erlang，但不知何故它无法制作 .beam 文件并执行代码。

这是我的运行配置的详细信息。

![设置 1](../Images/a1061c2320deb59408d5f06d29229ce1.png)

![设置 2](../Images/05bbdf78c4326fa24afd8c371e1f9b5f.png)

![设置 3](../Images/96d0f0d57f456ccc8715ab6521e89233.png)

![设置 4](../Images/76653b9653ef2432f4ab2956645bf76c.png)

当我在 Eclipse 控制台中运行时，出现以下错误：

```
Eshell V5.9
(erlide@Sujoy-VAIO)1> c(geometry).
geometry.erl:none: no such file or directory
error 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:41:13.650

您使用“代码路径”选项卡跳过了屏幕截图，我相信这就是解决此问题的方法。

顺便说一句，我强烈建议使用 basho 的[rebar](https://github.com/basho/rebar)来编译 Erlang 项目，而不是依赖 IDE。另外，我建议您查看[SublimErl](https://github.com/ostinelli/SublimErl)作为 Erlide 的替代品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:08:16.910

编译器找不到您的源代码。

不确定，但我认为您应该在运行时配置面板的变量“工作目录”中定义源代码目录。

# c# - 免费的 NCrunch 替代品

> ID：13132214
> 
> 赞同：95
> 
> 时间：2012-10-30T03:29:05.423
> 
> 标签：c#, visual-studio, code-coverage, ncrunch

由于 NCrunch 离开了自由市场，我一直在寻找类似的工具来标记代码覆盖率，并像 NCrunch 一样进行持续测试

编辑：我正在使用 VS2012

更新：

我用ContinuousTest有一段时间了，还可以，但是我觉得写代码的时候缺少反馈。当我编写测试时反馈很好，但是当我中断测试时（在编辑源代码时）它不会告诉我测试失败了（在边缘，就像它对 NCrunch 所做的那样）。所以如果有人知道其他工具，我还在听。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-05T17:46:56.237

NCrunch 是一个很棒的工具，我在它还处于测试阶段时就发现了它，作为一名开发人员，我尽我所能来支持那些正在做很酷项目的人。如果人们在使用 NCrunch 并且喜欢它，我建议您购买许可证。

像这样的东西需要花费大量时间来开发，如果人们不愿意支持它，那么创建你喜欢的酷工具的人就会减少。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-30T21:37:07.417

根据我的阅读，大多数人都在同一条船上，并且正在转向[ContinuousTests](https://github.com/continuoustests/ContinuousTests/)。我不认为有一个完美的替代品......但是。

这是[NCrunch 和 ContinuousTests 之间的一个不错的比较](http://blog.diktator.org/index.php/2012/10/19/continuous-testing-mighty-moose-vs-ncrunch/)

**更新**

最近在 VS2012 中使用 ContinuousTests 后，我决定卸载。有太多的摩擦让它运转起来。我相信它需要更新才能正确支持 VS2012。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-01-23T11:45:31.443

NCrunch 值得每一分钱。考虑到 Remco 为将其无缝集成到 VS 中所付出的努力，159 美元确实还不错；这真的不容易。在我看来，当与它提供的指标相结合时，它是一个简单的决定。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-01-11T10:35:59.843

查看[Giles](https://github.com/codereflection/Giles)进行持续测试。

它目前支持 NUnit、xUnit.net、Machine.Specifications 和 NSpec，但路线图显示计划支持所有主要测试框架。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-02T03:39:22.153

NCrunch 是一款绝对不错的产品，虽然有点贵。建议的替代方案（ContinuousTest）效果不佳，因为它没有逐行覆盖率、总代码覆盖率指标，并且它抱怨大型解决方案中正确引用的 NuGet 包（与 NCrunch 完美配合）。

NCrunch 还与 Visual Studio 无缝集成，这使编码变得更快、更有趣，并且您在编码时知道何时满足单元测试中指定的所有标准，而无需按任何按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T04:04:52.757

类似于 NCrunch 的工具是[ContinuousTests](http://continuoustests.com/)，但我认为它们不会进行经典意义上的代码覆盖。

还存在用于 .NET 的开源代码覆盖工具，例如[PartCover](https://github.com/sawilde/partcover.net4)和[OpenCover](https://github.com/sawilde/opencover)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T15:25:34.843

我是一个狂热的 NCrunch 用户。现在它们已经商业化，我正在使用包含 NCover 的[ContinuousTests](http://www.continuoustests.com/)和[TestDriven.net来进行代码覆盖。](http://testdriven.net)

# python - 使用 Biopython (Python) 从 FASTA 文件中提取序列

> ID：13132215
> 
> 赞同：5
> 
> 时间：2012-10-30T03:29:07.957
> 
> 标签：python, python-2.7, biopython, fasta

[好的，所以我需要使用 python（biopython， http:](http://biopython.org/DIST/docs/tutorial/Tutorial.html) //biopython.org/DIST/docs/tutorial/Tutorial.html ）从 FASTA 文件中提取部分序列

我需要从每个序列中获取前 10 个碱基并将它们放在一个文件中，保留 FASTA 格式的序列信息。最糟糕的是，如果没有办法保留序列信息，我可以只使用碱基。所以这里有一个例子：

```
>gi|2765658|emb|Z78533.1|CIZ78533 C.irapeanum 5.8S rRNA gene and ITS1 and ITS2 DNA
CGTAACAAGGTTTCCGTAGGTGAACCTGCGGAAGGATCATTGATGAGACCGTGGAATAAACGATCGAGTG
AATCCGGAGGACCGGTGTACTCAGCTCACCGGGGGCATTGCTCCCGTGGTGACCCTGATTTGTTGTTGGG

>gi|2765658|emb|Z78533.1|CIZ78533 C.irapeanum 5.8S rRNA gene and ITS1 and ITS2 DNA
CGTAACAAGGTTTCCGTAGGTGAACCTGCGGAAGGATCATTGATGAGACCGTGGAATAAACGATCGAGTG
AATCCGGAGGACCGGTGTACTCAGCTCACCGGGGGCATTGCTCCCGTGGTGACCCTGATTTGTTGTTGGG

>gi|2765658|emb|Z78533.1|CIZ78533 C.irapeanum 5.8S rRNA gene and ITS1 and ITS2 DNA
CGTAACAAGGTTTCCGTAGGTGAACCTGCGGAAGGATCATTGATGAGACCGTGGAATAAACGATCGAGTG
AATCCGGAGGACCGGTGTACTCAGCTCACCGGGGGCATTGCTCCCGTGGTGACCCTGATTTGTTGTTGGG 
```

我需要一些方法来获得前 10 个基地（然后我计划在最后 10 个基地再做一次）。该教程网站非常详尽，但我对此并不陌生，因为它没有涉及到这个，我什至不确定它是否可能。谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T20:31:00.653

Biopython 非常适合这类任务。-Object`Seq`存储序列和有关它的信息。读取 fasta 文件格式很简单。您可以像访问简单列表一样访问序列，因此也可以直接访问某些位置：

```
from Bio import SeqIO

with open("outfile.txt","w") as f:
        for seq_record in SeqIO.parse("infile.fasta", "fasta"):
                f.write(str(seq_record.id) + "\n")
                f.write(str(seq_record.seq[:10]) + "\n")  #first 10 base positions
                f.write(str(seq_record.seq[-10:]) + "\n") #last 10 base positions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T13:13:28.110

Biopython Seq 对象基本上是一个数组，因此您可以指定它的子部分并将它们传递给新的 Seq 对象。假设您已将这些读入 seqrecord （字典），然后使用以下代码，您可以指定开始结束位置。

```
SeqRecords[Seq][start:end].seq 
```

这将为您提供 SeqRecord 在开始和结束位置之间的序列对象，它们是整数。从记忆中，开始/结束索引有些有趣，但请尝试一下。您还应该能够指定：

```
SeqRecords[Seq][:end].seq 
```

从 SeqRecord 的开头获取序列。

为了完整性 - 像这样读取文件：

```
inputSeqFile = open(filename, "rU")
SeqDict = SeqIO.to_dict(SeqIO.parse(inputSeqFile, "fasta"))
inputSeqFile.close() 
```

希望有帮助。

# bash - bash 脚本优化

> ID：13132216
> 
> 赞同：1
> 
> 时间：2012-10-30T03:29:09.493
> 
> 标签：bash, optimization

我在下面有这个脚本，它将被不同的用户守护和触发数百甚至数千次。

该脚本用于`inotifywait`监视文件夹以进行上传，然后在旋转（备份/移动）先前的上传之后将上传的文件移动到其最终目的地以进行演示。该代码将针对动态创建的不同上传文件夹运行。

```
#!/bin/bash

db="$VAR1"/path/to/upload/folder/
s3="$VAR2"/path/to/remote/folder

inotifywait -m -r -e attrib "$db" |
while read dir ev file;
do

        for dirnum in $(cd "$s3"; ls */*.png | sed 's%/.*%%' | sort -nr)
        do
                 next=$(($dirnum + 1));                       
                 mv "$s3/$dirnum/post$dirnum.png" "$s3/$next/post$next.png";
        done

        mv "$db"/"$file"  "$s3"/1/post1.png

done 
```

我可以做些什么来优化它？还是应该重写一种更快的编程语言？另外，如何在一定的负载下测试脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:48:15.533

这并没有给出相同的行为，但它避免了排序：

```
#!/bin/bash

db="$VAR1"/path/to/upload/folder/
s3="$VAR2"/path/to/remote/folder

inotifywait -m -r -e attrib "$db" |
while read dir ev file;
do
    dirnum=1
    while test -e "$s3/$dirnum"; do : $(( dirnum += 1 )); done
    while test $dirnum -gt 0; do
        next=$(( dirnum + 1 ));    
        mkdir -p $s3/$next                   
        mv "$s3/$dirnum/post$dirnum.png" "$s3/$next/post$next.png"
        : $(( dirnum -= 1 ))
    done
    mv "$db/$file" "$s3"/1/post1.png
done 
```

如果您跟踪存储到的最高数字`$s3`，则可以避免第一个循环。如果其他进程正在`$s3`. 不重命名文件会简单得多，而是将上传的第一个文件 `$s3/1`放在`$s3/2`. 在这种情况下，可以编写脚本：

```
#!/bin/bash

db="$VAR1"/path/to/upload/folder/
s3="$VAR2"/path/to/remote/folder
dirnum=1
while test -e "$s3/$dirnum"; do : $(( dirnum += 1 )); done
inotifywait -m -r -e attrib "$db" |
while read dir ev file;
do
    mkdir -p "$s3"/$dirnum
    mv "$db/$file" "$s3"/$dirnum/post$dirnum.png
    : $(( dirnum += 1 ))
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:50:08.723

您应该通过将新文件放在新目录中并将旧文件单独留在旧目录中来避免移动太多文件。您可能需要反转您的演示逻辑，以便显示最新的文件（最大的数字），而不是`post1.png`每次。但是你可以通过减少它的工作来加快它的速度——你可以通过让它离开已经存在的东西来减少它的工作量。

如果某些东西不够快，加速它的最佳方法之一是退后一步，看看算法，看看是否有一个从根本上更快的算法可以使用。如果您已经在使用最佳算法，那么您可以查看如何加速该算法的详细信息，但有时您可以通过重新访问该算法获得数量级的改进，其中调整可能会使您的速度仅翻倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:10:01.037

您可以像这样重构您的脚本：

```
!/bin/bash

db="$VAR1"/path/to/upload/folder/
s3="$VAR2"/path/to/remote/folder

while read dir ev file
do
   while read dirnum
   do
      next=$(($dirnum + 1))
      mv "$s3/$dirnum/post$dirnum.png" "$s3/$next/post$next.png"
   done < <(find "$s3" -depth 2 -name "*.png" -exec dirname {} \; | sort -unr)

  mv "$db"/"$file"  "$s3"/1/post1.png

done < <(inotifywait -m -r -e attrib "$db") 
```

# html - 由于单选按钮不能取消选中，它们的目的是什么？

> ID：13132217
> 
> 赞同：0
> 
> 时间：2012-10-30T03:29:09.827
> 
> 标签：html

检查（勾选）按钮不是更有用吗？

它们为什么存在？

它们对我来说似乎完全没有必要，你能向我解释一下单选按钮的用途吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:30:11.080

使用它们以便只能从一组选项中选择一个选项。检查按钮允许用户选择多个选项。

## 编辑：

如果目标是让复选框只选中一个组中的 0 或 1 个框，那么请从[这个答案中查看](https://stackoverflow.com/a/9709425/612266)[jsFiddle](http://jsfiddle.net/pratik136/zGEaa/)。它提供了一种使用 jQuery 执行此操作的简单方法。

这是使用的Javascript代码：

```
$("input:checkbox").click(function() {
    if ($(this).attr("checked") === true) {
        var group = "input:checkbox[name='" + $(this).attr("name") + "']";
        $(group).attr("checked", false);
        $(this).attr("checked", true);
    } else {
        $(this).attr("checked", false);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:41:20.447

复选框用于多选，而单选按钮仅允许单选。它实际上是由 HTML 设计的，并且在标准用户界面之前，复选框和单选按钮的行为方式都是如此。

单选按钮的名称来源于收音机上电台预设的设计（想想汽车仪表板收音机）。回到收音机全数字化之前，那些单选按钮物理上推入导致单个选择将现有选择推出。

# c# - 按编辑链接在gridview编辑模式中没有任何反应

> ID：13132219
> 
> 赞同：0
> 
> 时间：2012-10-30T03:29:35.833
> 
> 标签：c#, asp.net

我已经创建了一个网格视图并启用了编辑模式，但是当我单击每一行上的“编辑”链接时，没有发生任何事情并保持当前状态，这里是代码

```
<form id="form1" runat="server">
<div>

    <asp:GridView 
        ID="GridView1" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" CellPadding="4" DataKeyNames="id" 
        DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None" 
        AllowSorting="True" PageSize="50" style="text-align: center" Width="100%" OnRowDataBound="GridView1_RowDataBound">
        <AlternatingRowStyle BackColor="White" />
        <Columns>
            <asp:CommandField ShowEditButton="True" />
            <asp:BoundField DataField="title" HeaderText="title" SortExpression="title" />
            <asp:TemplateField HeaderText="full_content" SortExpression="full_content">
                <EditItemTemplate>
                    <asp:TextBox ID="TextBox1" runat="server" 
                        Text='<%# Bind("full_content", "{0}") %>'></asp:TextBox>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Bind("full_content") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
            <asp:BoundField DataField="filename" HeaderText="filename" 
                SortExpression="filename" />
            <asp:BoundField DataField="confidential" HeaderText="confidential" 
                SortExpression="confidential" />
            <asp:BoundField DataField="nid" HeaderText="nid" SortExpression="nid" />
        </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" 
            HorizontalAlign="Left" />
        <SortedAscendingCellStyle BackColor="#F5F7FB" />
        <SortedAscendingHeaderStyle BackColor="#6D95E1" />
        <SortedDescendingCellStyle BackColor="#E9EBEF" />
        <SortedDescendingHeaderStyle BackColor="#4870BE" />
    </asp:GridView>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:earchConnectionString %>" 
        SelectCommand="SELECT * FROM [full_content] WHERE ([nid] = @nid)" 
        DeleteCommand="DELETE FROM [full_content] WHERE [id] = @original_id" 
        InsertCommand="INSERT INTO [full_content] ([title], [full_content], [filename], [confidential], [nid]) VALUES (@title, @full_content, @filename, @confidential, @nid)" 
        OldValuesParameterFormatString="original_{0}" 
        UpdateCommand="UPDATE [full_content] SET [title] = @title, [full_content] = @full_content, [filename] = @filename, [confidential] = @confidential, [nid] = @nid WHERE [id] = @original_id">
        <DeleteParameters>
            <asp:Parameter Name="original_id" Type="Int32" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="title" Type="String" />
            <asp:Parameter Name="full_content" Type="String" />
            <asp:Parameter Name="filename" Type="String" />
            <asp:Parameter Name="confidential" Type="Byte" />
            <asp:Parameter Name="nid" Type="Int32" />
        </InsertParameters>
        <SelectParameters>
            <asp:QueryStringParameter DefaultValue="1" Name="nid" QueryStringField="id" 
                Type="Int32" />
        </SelectParameters>
        <UpdateParameters>
            <asp:Parameter Name="title" Type="String" />
            <asp:Parameter Name="full_content" Type="String" />
            <asp:Parameter Name="filename" Type="String" />
            <asp:Parameter Name="confidential" Type="Byte" />
            <asp:Parameter Name="nid" Type="Int32" />
            <asp:Parameter Name="original_id" Type="Int32" />
        </UpdateParameters>
    </asp:SqlDataSource>

</div>
</form> 
```

有谁知道问题出在哪里？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:15:49.263

添加`row editting event`为以下...

```
<asp:GridView 
        ID="GridView1" runat="server" AllowPaging="True" 
        AutoGenerateColumns="False" CellPadding="4" DataKeyNames="id" 
        DataSourceID="SqlDataSource1" ForeColor="#333333" GridLines="None" 
        AllowSorting="True" PageSize="50" style="text-align: center" Width="100%" OnRowDataBound="GridView1_RowDataBound"
        OnRowEditing="GridView1_RowEditing"> 
```

在 RowEditing 事件中写下以下代码......

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
  {
    //Set the edit index.
    GridView1.EditIndex = e.NewEditIndex;
    //Bind data to the GridView control.
    BindData();
  } 
```

您可以在此处获取有关行编辑的更多数据[行编辑](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowediting.aspx)

# iphone - 通过导航到下一页的 iOS 蓝牙连接

> ID：13132220
> 
> 赞同：3
> 
> 时间：2012-10-30T03:29:39.713
> 
> 标签：iphone, ios, bluetooth

我有一个关于将 currentSession 传递到下一页的问题。我已经在第一个页面视图控制器上测试并成功建立了蓝牙会话。现在我的问题是，我如何将当前会话传递到下一页，因为导航到下一页后，蓝牙连接丢失。因此，在导航到下一页后，当前会话将丢失。这是通过用两部手机发送随机图像来测试的。但是，如果第二次在 nextpageController 上提示蓝牙连接，则可以发送图片。

视图控制器.M：

```
-(IBAction)btnBluetoothConnect:(id)sender {
    picker = [[GKPeerPickerController alloc] init];
    picker.delegate = self;
    picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;

    [picker show];
}

- (void)peerPickerController:(GKPeerPickerController *)pk didConnectPeer:(NSString *)peerID toSession:(GKSession *)session {
    self.currentSession = session;
    session.delegate = self;
    [session setDataReceiveHandler:self withContext:nil];
    picker.delegate = nil;
    [picker dismiss];
}

- (void)peerPickerControllerDidCancel:(GKPeerPickerController *)pk {
    picker.delegate = nil;
}

- (void)session:(GKSession *)session peer:(NSString *)peerID didChangeState:(GKPeerConnectionState)state {
    switch (state) {
        case GKPeerStateConnected:
            NSLog(@"connected");
            if (GKPeerStateConnected) {
                self.progress = [[ProgressAlertView alloc] init];
                progress.delegate = self;
                progress.task = @selector(compute);
                [progress start];
            }
            break;

        case GKPeerStateDisconnected:
            NSLog(@"disconnected");
            currentSession = nil;

        default:
            break;
    }
}

-(void)compute{
    [self updateUIWithProgress:0.0 andMessage:@"3"];
    [NSThread sleepForTimeInterval:3];
    if([progress isCancelled]){
        self.progress = nil;
        return;
    }
    [self updateUIWithProgress:0.4 andMessage:@"2"];
    [NSThread sleepForTimeInterval:1];
    if([progress isCancelled]){
        self.progress = nil;
        return;
    }
    [self updateUIWithProgress:0.6 andMessage:@"1"];
    [NSThread sleepForTimeInterval:1];
    if([progress isCancelled]){
        self.progress = nil;
        return;
    }
    [self updateUIWithProgress:0.8 andMessage:@"0"];
    [NSThread sleepForTimeInterval:1];
    if([progress isCancelled]){
        self.progress = nil;
        return;
    }
    else
        [self updateUIWithProgress:1.0 andMessage:@"Start!"];
    NSLog(@"Woohahaha");
    **[self performSegueWithIdentifier:@"next page" sender:self];**

    //process the data here or send a notification for data processing
    //when this method returns, the progress alert view disappears.
} 
```

NextPageController.m:

```
-(IBAction)btnSend:(id)sender{

    if(currentSession){
        NSData *imageData = UIImageJPEGRepresentation([UIImage imageNamed:[NSString stringWithFormat:@"4.png"]], .7);
        [self.currentSession sendDataToAllPeers:imageData withDataMode:GKSendDataReliable error:nil];
    }
}

- (void) receiveData:(NSData *)data fromPeer:(NSString *)peer inSession: (GKSession *)session context:(void *)context{
    imageView.image = [UIImage imageWithData:data];
}

- (void)peerPickerController:(GKPeerPickerController *)pk didConnectPeer:(NSString *)peerID toSession:(GKSession *)session {
    self.currentSession = session;
    session.delegate = self;
    [session setDataReceiveHandler:self withContext:nil];
    picker.delegate = nil;
    [picker dismiss];
}

- (void)peerPickerControllerDidCancel:(GKPeerPickerController *)pk {
    picker.delegate = nil;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T21:04:07.700

我不知道我的做法是否正确，但我有一个包含许多页面的应用程序，我需要在所有页面中保持这种联系。所以我把我所有的蓝牙连接代码放在一个单例类中，每个视图控制器都可以与之对话。这样它就可以处理所有的通信，每个页面都可以告诉它它想要发送什么。

所以这是一个很棒的单例类教程 [http://www.galloway.me.uk/tutorials/singleton-classes/](http://www.galloway.me.uk/tutorials/singleton-classes/)

就蓝牙而言，您似乎拥有所有正确的方法。只需将它们放在您的单例类中即可。然后，当您引用类 *(MyManager *sharedManager = [MyManager sharedManager];)*时，只需创建一个 sendCommand 方法来发送您想要的任何通信，例如 [sharedManager sendCommand:data];

所以你有你的蓝牙课程。您添加了一个 bluetoothconnect 方法，其中包含类似此代码的内容

```
picker = [[GKPeerPickerController alloc] init];
picker.delegate = self;
picker.connectionTypesMask = GKPeerPickerConnectionTypeNearby;
[picker show]; 
```

然后从您的视图控制器类中，您可以参考教程中显示的内容来引用您的单例类。

```
MyManager sharedManager = [MyManager sharedManager]; 
```

然后你可以调用你的新方法：[sharedManager bluetoothconnect];

# sql - 为什么包含空值的多列的Sql Sum返回不正确的结果？

> ID：13132222
> 
> 赞同：5
> 
> 时间：2012-10-30T03:29:42.250
> 
> 标签：sql, sql-server, tsql

包含以下值的表：

```
Column1  Column2
1        NULL
NULL     4
2        NULL
NULL     5
3        6 
```

以下查询：

```
SELECT 
    SUM([Column1] + [Column2] ) 
FROM [myTable] 
```

`9`返回一个应该何时返回的值`21`。为什么？它是如何得出价值的？

我知道 SUM 可以通过`ISNULL`像这样添加来纠正：

```
SELECT 
    SUM(ISNULL([Column1], 0) + ISNULL([Column2], 0)) 
FROM [myTable] 
```

但我想知道价值背后的逻辑`9`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T03:32:02.900

用于`COALESCE`将*null*转换为`0`. （*如果您希望空值为零，就是这样。*）

```
SELECT SUM(COALESCE(column1,0) + COALESCE(column2,0))
FROM table1 
```

*   [***请参阅 SQLFIDDLE 演示***](http://sqlfiddle.com/#!3/7c352/7)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T03:52:14.577

和`null`和一个数字究竟是什么？请注意 的`9`来源：唯一具有非 null`Column1`和`Column2`.

当然已经发布了[一种可行的解决方案。](https://stackoverflow.com/a/13132245/139010)但是，直接跳到修复中的乐趣在哪里？

（应OP的要求复制粘贴）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T03:35:12.150

因为它是在求和之前添加值 +NULL

试试 sum(column1) + sum(column2)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T03:32:38.333

使用 ISNULL 函数获得所需的行为：

```
SELECT SUM(ISNULL(Column1, 0) + ISNULL(Column2, 0)) FROM [myTable] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T03:34:13.943

它是 Null 值的问题。

```
SELECT SUM(IsNull(Column1, 0) + IsNull(Column2, 0) ) FROM [myTable] 
```

以确保它至少始终为 0。

谢谢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-30T03:52:47.653

1.  数字 + NULL = NULL
2.  SUM(**表达式**) 函数通过分别计算每一行的**表达式**来操作，并返回**一个 NOT_NULL 值**。然后将所有结果相加并返回。

这就是您的结果为 9 的原因。 **ISNULL(expression, replacement_value)**在这种情况下可以为您提供帮助。:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-30T07:51:00.633

另一种解释（以防它对某人更好）：

NULL 影响`+`但不影响`SUM()`：如果 NULL 是`+`-ed，它的计算结果为 NULL，它是 SUMmed，它被忽略。（但是当没有一个参数是*值时*`SUM()` *可以*返回 NULL 。）

 *因此，您的数据样本中只有一行（最后一行）为 生成非 NULL 结果`+`，并且该结果是`9`，这也是`SUM()`返回的结果。*

# c# - C#如何不断地向标签框添加值，以便生成的数字不断添加到它？

> ID：13132224
> 
> 赞同：5
> 
> 时间：2012-10-30T03:29:52.770
> 
> 标签：c#

我正在研究一个掷骰子程序，我们假设有一个“总收入”标签框，它显示了当滚子掷骰子时赚到的总金额。如果您掷出 6，您将获得 600 美元，如果您获得 5，您将获得 500 美元等等。我可以让美元值显示在标签框上，但是当我继续滚动时，数字将被下一个值替换总和例如掷 5 然后你赚 500 美元然后再次掷骰你掷 1 然后它应该显示 $600 = 500 + 100。

请帮助继承我正在使用的代码

```
 private void button1_Click(object sender, EventArgs e)
 {
     int roll1;

     Random rand = new Random();

     roll1 = rand.Next(6) + 1;
     int value = 100;

     int sum = (roll1 * value);
     totalmoneyLabel.Text = sum.ToString("c");

     if (roll1 == 1)
     {   
         diceBox1.Image = drios1_Project2.Properties.Resources._1Die;
     }

     if (roll1 == 2)
     {
         diceBox1.Image = drios1_Project2.Properties.Resources._2Die;
     }

     if (roll1 == 3)
     {
         diceBox1.Image = drios1_Project2.Properties.Resources._3Die;
     }

     if (roll1 == 4)
     {
         diceBox1.Image = drios1_Project2.Properties.Resources._4Die;
     }

     if (roll1 == 5)
     {
         diceBox1.Image = drios1_Project2.Properties.Resources._5Die;
     }

     if (roll1 == 6)
     {
         diceBox1.Image = drios1_Project2.Properties.Resources._6Die;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:40:38.987

您需要创建一个运行总计并将其添加到您的标签中，它需要是一个类级别的变量，这样您就不会在每次滚动期间对其进行初始化，这样的事情应该可以工作。然后，您可以在完成后将其重置为零。

```
public partial class Form1 : Form
{
    int roll1;
    int runningTotal;
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Random rand = new Random();
        roll1 = rand.Next(6) + 1;
        int value = 100;
        int sum = (roll1 * value);
        runningTotal += sum;
        label1.Text = runningTotal.ToString("c");

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:28:38.327

这是我对你的代码所做的事情：

```
var rand = new Random();

int roll1 = rand.Next(6) + 1;
int value = 100;
int sum = roll1 * value;

totalmoneyLabel.Text = (int.Parse(totalmoneyLabel.Text) + sum).ToString("c");

var images = new Dictionary<int, ImageFileMachine>
{
    { 1,  drios1_Project2.Properties.Resources._1Die },
    { 2,  drios1_Project2.Properties.Resources._2Die },
    { 3,  drios1_Project2.Properties.Resources._3Die },
    { 4,  drios1_Project2.Properties.Resources._4Die },
    { 5,  drios1_Project2.Properties.Resources._5Die },
    { 6,  drios1_Project2.Properties.Resources._6Die },
};

diceBox1.Image = images[roll1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T03:59:11.657

它没有写在任何地方，您的应用程序是什么。它是窗体应用程序、ASP.Net 应用程序还是其他东西。在任何情况下，您都必须获取先前的值并为其添加新值。

要在 ASP.Net 应用程序中执行此操作，您可以从标签或隐藏字段中获取值，其中您只包含没有 $ 符号的值。要从标签使用代码中获取价值：

```
 int previousValue;
        if (!int.TryParse(totalMoneyLabel.Text, out previousValue))
            previousValue = 0; 
```

完整示例：

```
 private void button1_Click(object sender, EventArgs e)
    {
        const int value = 100;
        int previousValue;

        if (!int.TryParse(totalMoneyLabel.Value, NumberStyles.Integer, new CultureInfo("en-Us"), out previousValue))
            previousValue = 0;

        var rand = new Random();

        var roll1 = rand.Next(6) + 1;

        var sum = previousValue+(roll1 * value);
        totalMoneyLabel.Text = sum.ToString("c", new CultureInfo("en-Us"));
    ....
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T03:39:51.400

代替

```
int sum = (roll1 * value); 
```

和

```
 sum = sum + (roll1 * value); 
```

# ruby - 我如何根据传递给描述或它的参数实际预处理/后处理 RSpec 示例

> ID：13132228
> 
> 赞同：1
> 
> 时间：2012-10-30T03:30:03.760
> 
> 标签：ruby, rspec, bdd, rspec2

需要一些帮助理解：

> 在`rspec-2`中，每个示例和示例组都带有元数据信息，例如声明它的文件和行号、 *传递给`describe`and`it`*的参数等。这个元数据可以通过传递给`describe`or的散列参数附加到`it`，允许我们*预先和以各种方式对每个示例进行后处理*。

[https://github.com/rspec/rspec-core/blob/master/features/Upgrade.md](https://github.com/rspec/rspec-core/blob/master/features/Upgrade.md) — **«元数据！»** 部分

我想要以下快捷方式：

```
describe 'DELETE destroy', :as => :admin do
  it 'destroys...' do
    # ...
  end
end 
```

为了

```
describe 'DELETE destroy as admin' do
  before { login_as :admin }

  it 'destroys...' do
    # ...
  end
end 
```

基于元数据的示例预处理/后处理是否适合这种情况，或者它是为诸如*过滤*之类的“外部”事物而制作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:49:34.950

我相信这应该有效：

spec_helper.rb

```
RSpec.configure do |config|
  config.before(:each, :as => :admin) do |example|
    login_as :admin
  end
end 
```

`:as => :admin`然后，您的规范应该可以使用该选项按预期工作。另请参阅[这篇文章](http://avsej.net/2011/rspec-metadata-trick/)。

# c++ - 关于如何在opengl中正确旋转/平移对象的任何建议，试图达到以下效果

> ID：13132234
> 
> 赞同：1
> 
> 时间：2012-10-30T03:30:27.563
> 
> 标签：c++, opengl, rotation, translate-animation

尝试生成由线条组成的递归树。我当前的绘图功能没有按计划工作。在我在这里展示问题之前是绘制代码：

```
void _generateTreeBranches(const Point3f& startPoint,
                       const Point3f& endPoint,
                       float rotation,
                       const int depth)
{

 if(depth > MAX_DEPTH) return;
cout << "at depth = " << depth << endl;

if(depth == 0)glColor3f(0.0f,1.0f,0.0f);
else glColor3f(1.0f,1.0f,1.0f);

float distanceOfPoint = pointDistance(startPoint, endPoint);

glRotatef(rotation, 0.0f, 0.0f, 1.0f);
glTranslatef(-startPoint.x, 0.0f, 0.0f);
    drawLine(startPoint, endPoint);
glTranslatef(startPoint.x, 0.0f, 0.0f);
glRotatef(-rotation, 0.0f, 0.0f, 1.0f);

const float nextLength = distanceOfPoint;
Point3f nextBranchStart = endPoint;
Point3f nextBranchEnd = {endPoint.x + nextLength,endPoint.y,endPoint.z};
_generateTreeBranches(nextBranchStart, nextBranchEnd,45.0f,depth+1); 
```

画出这样的东西

```
 /__ 
```

而我试图让它画出这样的东西

```
__/ 
```

对实现上述目标有任何帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:25:20.477

我们不知道调用点的模型视图矩阵的状态，所以我们称它为 MV

第一次调用（矩阵运算的顺序）

T = 平移 -x
R = 旋转 r
TRANSFORMATION = MV(R(T(v)))
DRAW

第二次调用（矩阵运算的顺序）

T = 平移 -x2
R = 旋转 r2

从第一个调用开始
Rm1 = 旋转 -r
Tm1 = 平移 x
Tm2 = 平移 -x
Rm2 = 旋转 r从第
一个调用结束

变换 = MV(Rm2(Tm2(Tm1(Rm1(R(T(v)))))))
绘制

如您所见，您正在旋转平移和旋转的值。之后，您试图撤消无法再撤消的事情。

因此，根据 MV 和 r 的值，可能会发生各种事情。

如果要撤消矩阵操作，请使用 glPush/PopMatrix 而不是操作的逆操作，这只会在最好的情况下产生浮点错误，而在递归情况下会产生什么。

对于你想要做的第一次旋转应该是 0，你必须确保模型视图矩阵是 Identity，并使用 glPush/PopMatrix

另外-除非您的真实代码实际上需要递归使用循环。

# c++ - 使用 std::stringstream 将 boost::int64_t 大数转换为字符串。

> ID：13132235
> 
> 赞同：2
> 
> 时间：2012-10-30T03:30:37.340
> 
> 标签：c++, ios

看下面的代码，调试和显示转换在 iPhone 模拟器和设备（4S）上都是成功的，但我想知道它是如何工作的？请参阅[http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/](http://www.cplusplus.com/reference/iostream/ostream/operator%3C%3C/)，boost::int64_t 没有重载功能。

如果我使用这个函数来转换任意 boost::int64_t 类型有什么风险吗？提前致谢。

```
std::stringstream mySS;
boost::int64_t large = 4294967296889977;
mySS<<large;
std::string str = mySS.str(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:40:48.477

它起作用的原因是它`boost:int64_t`实际上是内置类型的typedef（通常`std::int64_t`定义在`cstdint`或类似的东西），所以它可能最终与`long long`（或相似，取决于平台）相同。当然，有一个超载的`stringstream::operator<<`。

确切的定义，最好参见[`boost/cstdint.hpp`](http://www.boost.org/doc/libs/1_51_0/boost/cstdint.hpp)（1.51 版本）。

假设这通常适用于所有主要平台，这可能是一个相对安全的选择。但我怀疑任何人都能够为此提供保证。

如果您使用的目的`std::stringstream`是在整数和字符串之间进行转换，那么您可以做的最安全的事情就是使用 Boost 自己的转换方式：[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_lexical_cast.html)（1.51 版本）。这是如何完成的：

```
#include <iostream>
#include <boost/cstdint.hpp>
#include <boost/lexical_cast.hpp>

int main()
{
  boost::int64_t i = 12;
  std::string    s = boost::lexical_cast<std::string>(i);

  std::cout << s << std::endl;
  return 0;
} 
```

# android - 如何找出Android中SIGSEGV的原因

> ID：13132238
> 
> 赞同：22
> 
> 时间：2012-10-30T03:30:46.247
> 
> 标签：android, segmentation-fault

我收到越来越多的报告说我的 android 应用程序崩溃了，崩溃发生在本机代码中，因此不会产生堆栈跟踪。我只有一个本机函数，这不是问题，因为它在启动期间被调用一次，问题在 2-3 分钟后发生。

我从 logcat 得到以下部分转储：

```
I/DEBUG   ( 8704): pid: 9028, tid: 9136  >>> xxxx <<<
I/DEBUG   ( 8704): at : (2012-10-30 21:10:42.000086303 UTC) 0
I/DEBUG   ( 8704): signal 11 (SIGSEGV), fault addr deadbaad
I/DEBUG   ( 8704):  r0 00000000  r1 afd14691  r2 00000027  r3 00000070
I/DEBUG   ( 8704):  r4 afd42328  r5 00000000  r6 00000000  r7 0000a000
I/DEBUG   ( 8704):  r8 00000000  r9 4a77b900  10 4a77b8d8  fp 00000046
I/DEBUG   ( 8704):  ip 00001750  sp 4a77b590  lr deadbaad  pc afd11ce4  cpsr 60000030
I/DEBUG   ( 8704):  d0  643a64696f72646e  d1  6472656767756265
I/DEBUG   ( 8704):  d2  0000005d0000005b  d3  0006000600060006
I/DEBUG   ( 8704):  d4  0120009c009c009c  d5  000a000a000a000a
I/DEBUG   ( 8704):  d6  0012000600060006  d7  0000000000000000
I/DEBUG   ( 8704):  d8  0000004600000000  d9  43f0000000000000
I/DEBUG   ( 8704):  d10 4040000043080000  d11 0000000043ee464c
I/DEBUG   ( 8704):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   ( 8704):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   ( 8704):  d16 0505050507070707  d17 0b0b0b0b10101010
I/DEBUG   ( 8704):  d18 0707070703030303  d19 0000000000000000
I/DEBUG   ( 8704):  d20 0100010001000100  d21 0100010001000100
I/DEBUG   ( 8704):  d22 0000000000000000  d23 0000000000000000
I/DEBUG   ( 8704):  d24 0000000000000000  d25 0000000000000000
I/DEBUG   ( 8704):  d26 00f900f900f900f9  d27 00fb00fb00fb00fb
I/DEBUG   ( 8704):  d28 00f000f000f000f0  d29 00f500f500f500f5
I/DEBUG   ( 8704):  d30 01748000016e0000  d31 01818000017b0000
I/DEBUG   ( 8704):  scr 20000012
I/DEBUG   ( 8704): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 8704): Build fingerprint: \'lge/lge_bprj/lgp970/lgp970:2.2.2/FRG83G/V10a_07-JUN-2011.422D181D:user/release-keys\'
I/DEBUG   ( 8704):          #00  pc 00011ce4  /system/lib/libc.so
I/DEBUG   ( 8704):          #01  pc 0000be32  /system/lib/libc.so
I/DEBUG   ( 8704):          #02  pc 0000cd92  /system/lib/libc.so
I/DEBUG   ( 8704):          #03  pc 000008d8  /system/lib/libstdc++.so
I/DEBUG   ( 8704):          #04  pc 0004efa4  /system/lib/libskia.so
I/DEBUG   ( 8704):          #05  pc 0006d00c  /system/lib/libskia.so
I/DEBUG   ( 8704):          #06  pc 0006f414  /system/lib/libskia.so
I/DEBUG   ( 8704): 
I/DEBUG   ( 8704): code around pc:
I/DEBUG   ( 8704): afd11cc4 2d00682d e029d1fb b12b68db c05cf8df 
I/DEBUG   ( 8704): afd11cd4 f8442001 4798000c e054f8df 26002227 
I/DEBUG   ( 8704): afd11ce4 2000f88e eecaf7fb f7fc2106 f04feff8 
I/DEBUG   ( 8704): afd11cf4 91035180 460aa901 96012006 f7fc9602 
I/DEBUG   ( 8704): afd11d04 a905eb6e 20024632 eb78f7fc eeb6f7fb 
I/DEBUG   ( 8704): 
I/DEBUG   ( 8704): code around lr:
I/DEBUG   ( 8704): deadba8c ffffffff ffffffff ffffffff ffffffff 
I/DEBUG   ( 8704): deadba9c ffffffff ffffffff ffffffff ffffffff 
I/DEBUG   ( 8704): deadbaac ffffffff ffffffff ffffffff ffffffff 
I/DEBUG   ( 8704): deadbabc ffffffff ffffffff ffffffff ffffffff 
I/DEBUG   ( 8704): deadbacc ffffffff ffffffff ffffffff ffffffff 
I/DEBUG   ( 8704): 
I/DEBUG   ( 8704): stack:
I/DEBUG   ( 8704):     4a77b550  00000015  
I/DEBUG   ( 8704):     4a77b554  afd146c1  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b558  afd425a0  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b55c  afd4254c  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b560  00000000  
I/DEBUG   ( 8704):     4a77b564  afd156db  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b568  afd14691  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b56c  afd14691  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b570  00000070  
I/DEBUG   ( 8704):     4a77b574  afd42328  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b578  00000000  
I/DEBUG   ( 8704):     4a77b57c  4a77b5a4  
I/DEBUG   ( 8704):     4a77b580  0000a000  [heap]
I/DEBUG   ( 8704):     4a77b584  afd14933  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b588  df002777  
I/DEBUG   ( 8704):     4a77b58c  e3a070ad  
I/DEBUG   ( 8704): #00 4a77b590  afd43904  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b594  afd103ec  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b598  afd42328  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b59c  49687628  
I/DEBUG   ( 8704):     4a77b5a0  49687628  
I/DEBUG   ( 8704):     4a77b5a4  fffffbdf  
I/DEBUG   ( 8704):     4a77b5a8  afd42328  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b5ac  afd4374c  /system/lib/libc.so
I/DEBUG   ( 8704):     4a77b5b0  49687628  
I/DEBUG   ( 8704):     4a77b5b4  afd0be37  /system/lib/libc.so
I/DEBUG   ( 8704): #01 4a77b5b8  49687660  
I/DEBUG   ( 8704):     4a77b5bc  00430a60  [heap]
I/DEBUG   ( 8704):     4a77b5c0  00001424  
I/DEBUG   ( 8704):     4a77b5c4  4a77b8b0  
I/DEBUG   ( 8704):     4a77b5c8  00000000  
I/DEBUG   ( 8704):     4a77b5cc  49687628  
I/DEBUG   ( 8704):     4a77b5d0  49687628  
I/DEBUG   ( 8704):     4a77b5d4  00000000  
I/DEBUG   ( 8704):     4a77b5d8  4a77b8b0  
I/DEBUG   ( 8704):     4a77b5dc  afd0cd95  /system/lib/libc.so 
```

我的问题：

我知道我可以从中找到 sigsegv 发生的本机函数，但我不确定在哪里可以找到本机库。它发生在用户的电话上，我无法直接访问它或给用户...是否有一个包含这些库的网站，或者我可以在它们与手机上的相同的情况下构建它们？还是有更好的方法来调试这些？

感谢阅读，欢迎任何想法:-)

更新：

正如建议的那样，`ndk-stack`像这样使用：

```
./ndk-stack -sym LONGPATH/armeabi -dump foo.txt 
```

其中 foo.txt 包含“构建指纹”的东西，从一行有很多星星开始（它会搜索它），但我得到的只是：

```
********** Crash dump: **********
Build fingerprint: \'lge/lge_bprj/lgp970/lgp970:2.2.2/FRG83G/V10a_07-JUN-2011.422D181D:user/release-keys\' 
```

程序停止..

编辑2：

使用`arm-linux-androideabi-addr2line`和下载的 FRG83G rom 我得到了一点：

它指向警报，在 libc.so 中`dlmalloc_trim`，`realloc`在 ligstdc++.so 中删除，在 libskia.so 中指向, `SI8_D16_filter_DXDY`,`drawBitmap``clipQuad`

现在到了有趣的部分，如何处理这些信息..我明天继续，这里是 0530..

编辑3：

我又进了一步，但又卡住了，转储中的 pc 值指向 libskia.so 中的函数，我发现同时在多个线程中使用 Paint 对象会导致这个问题，我不这样做但是我确实重用了`BitmapFactory.Options`，希望那是问题所在，我删除了那部分，仍然崩溃......转储指向`SkBitmapProcShader::SkBitmapProcShader`,`SkTriColorShader::shadeSpan`和`SkDraw::drawBitmap`。最后一个是最明显的指向位图问题..但它不是`BitmapFactory.Options`或Paint对象..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T03:35:51.073

“我只有一​​个本机函数，这不是问题，因为它在启动期间被调用一次，问题在 2-3 分钟后发生。”

呸呸呸！错误的。完全有可能在一个地方丢弃内存....然后当您尝试访问程序完全不同部分中的（现在损坏的）内存时失败。

我假设您正在使用 NDK。

建议：

1）将“哨兵”值放在任何全局内存或malloc'ed缓冲区周围。

2) 仔细检查你所有的“malloc()”（“deadbaad”听起来像是从堆中分配的东西）

3) 在此处查找有关使用 ndk-gdb 的提示：

*   [http://mhandroid.wordpress.com/2011/01/25/how-cc-debugging-works-on-android/](http://mhandroid.wordpress.com/2011/01/25/how-cc-debugging-works-on-android/)

PS：

您的本机代码是 C 还是 C++？

# python - 使用 Python 自动测试 shell 脚本

> ID：13132239
> 
> 赞同：1
> 
> 时间：2012-10-30T03:30:59.973
> 
> 标签：python

我正在寻找一种优雅的解决方案，用于使用子命令和多个选项来自动化命令行工具的测试。到目前为止，我能找到的最接近的是 Mercurial 的[测试基础设施](http://mercurial.selenic.com/wiki/WritingTests#Writing_a_shell_script_test)：

run_tests.py 脚本可以统一运行shell脚本测试、python测试。测试的验证主要是比较命令的输出和预定义的输出，检查命令的退出状态。

但是，在 Mercurial 中查看了 run_tests.py 的来源后，经过多年的演变，它过于复杂，并且由于 Mercurial 是为 Python 2.4-2.7 设计的，因此没有使用 2.5 以来的新功能，这使得代码有点过时，例如，所有实际的命令运行都包含在它自己开发的*Popen4 中*：

```
processlock = threading.Lock()

closefds = os.name == 'posix'
def open4(cmd, wd, timeout):
    processlock.acquire()
    p = subprocess.Popen(cmd, shell=True, bufsize=-1, cwd=wd,
                         close_fds=closefds,
                         stdin=subprocess.PIPE, stdout=subprocess.PIPE,
                         stderr=subprocess.STDOUT)
    processlock.release()

    p.fromchild = p.stdout
    p.tochild = p.stdin
    p.childerr = p.stderr

    p.timeout = False
    if timeout:
        def t():
            start = time.time()
            while time.time() - start < timeout and p.returncode is None:
                time.sleep(.1)
            p.timeout = True
            if p.returncode is None:
                terminate(p)
        threading.Thread(target=t).start()

return p 
```

现在更新的版本甚至连fromchild、tochild这样的属性都没有了，现代python应该有什么等价的呢？

我可能会使用现代 python 推出我自己的简化版 run_tests.py，但是，在我这样做之前，我想知道是否有更好的现有解决方案来避免重新发明轮子。

我需要的是：

1.  单独运行一系列 shell 命令的隔离环境
2.  检查命令输出和退出状态的能力
3.  最好提供一些回调或钩子以对某些测试（具有副作用的命令）进行进一步验证。

如果您有任何经验可以分享或对此有任何建议，请告诉我。

# matlab - matlab条件矩阵赋值

> ID：13132244
> 
> 赞同：4
> 
> 时间：2012-10-30T03:31:58.717
> 
> 标签：matlab, matrix, indexing, conditional, variable-assignment

我有一个关于矩阵分配的问题。

假设我有三个矩阵A，B和C，我想根据规则将矩阵C的元素分配给A和B的元素

```
 C[i,j] = A[i,j] if abs(C[i,j] - A[i,j]) < abs(C[i,j] - B[i,j])
  C[i,j] = B[i,j] if abs(C[i,j] - A[i,j]) > abs(C[i,j] - B[i,j])
  C[i,j] = 0  if abs(C[i,j] - A[i,j]) == abs(C[i,j] - B[i,j]) 
```

没有for循环我怎么写？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T05:33:03.813

我认为 Dan Becker 的想法是正确的，但重新计算`abs(C-B)`并`abs(C-A)`暗示比较*更新*的矩阵，而不是*原始*矩阵。

我认为这不是你想要的，所以这是他方法的更正版本：

```
CmA = abs(C-A);
CmB = abs(C-B);

ind = Cma < CmB; C(ind) = A(ind);
ind = CmA > CmB; C(ind) = B(ind);
C(CmA == CmB) = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:13:19.923

我认为您需要以下内容：

```
ind = abs(C - A) < abs(C - B) ; C(ind) = A(ind);
ind = abs(C - A) > abs(C - B) ; C(ind) = B(ind);
ind = abs(C - A) == abs(C - B) ; C(ind) = 0; 
```

# sockets - 检查连接请求并转发到另一个程序

> ID：13132246
> 
> 赞同：0
> 
> 时间：2012-10-30T03:32:18.553
> 
> 标签：sockets, networking, tcp, udp, ip

我想知道它可能的program1和program2是否监听同一个端口，但是program1先接收请求，然后将请求转发给program2。

谢谢，

PS：如果可能的话，是否有任何 C++ 示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T13:33:36.633

不和是。只有一个程序可以侦听给定端口，但您*可以*在 Unix 中将打开的连接从一个进程传递到另一个进程。

[谷歌搜索](http://google.com/search?q=pass%20socket%20over%20unix%20pipe)将为您提供有关如何操作的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:39:03.870

两个程序不可能在同一个端口上侦听。如果要将输入转发到另一个进程，最简单的方法是将其放在标准输出上，然后使用管道“|” 在命令行上。另一个进程可以从标准输入中读取它。

您也可以打开第二个套接字。

# google-chrome - 如何将我的 Chrome 扩展程序的显示图标更改为更大的尺寸？

> ID：13132249
> 
> 赞同：0
> 
> 时间：2012-10-30T03:32:37.367
> 
> 标签：google-chrome, google-chrome-extension

我不想使用小图标。我想要一个更大的来代替（就像下图中的那些）。我在仪表板中进行了搜索和调查，但发现无处上传该大小的图像。

感谢您提供任何帮助！

![我不想使用小图标。 我想要一个更大的来代替（就像下图中的那些）](../Images/3ec944ba6a0c7cc082a411a763bfe41a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:13:53.960

Chrome Web Store (CWS) 中有两种类型的元素：[应用程序](http://support.google.com/chrome/bin/answer.py?hl=en&answer=1050586)和[扩展程序](http://support.google.com/chrome/bin/answer.py?hl=en&answer=154007)。

如果 CWS 中的元素是扩展，则通过在灰色拼图的图片中显示其徽标来表示。对于应用程序拼图不显示为徽标腾出更多空间（这就是为什么使用更大的徽标）。

因此，如果您有 chrome 扩展程序，它的徽标将始终显示得很小，并且在 CWS 中的拼图中。你无法改变这一点。

# r - 因子与有序因子？

> ID：13132250
> 
> 赞同：2
> 
> 时间：2012-10-30T03:32:53.247
> 
> 标签：r, r-factor

这是我要解决的问题。我正在使用库中的`burn`数据集，`KMsurv`并且试图用两个简单的协变量拟合一个简单的生存模型。这些预测因子之一是有序因子。也许我的问题是一个幼稚的问题，当我查看结果时，我看到了我估计`L`的`Q`系数前面的单词。做`L`并`Q`参考线性和二次？与调整未排序的相同因子相比，当我调整有序因子时，我希望看到相同数量的估计系数，但估计值不同。您能否指导我了解我的合身结果意味着什么（那些 coeff`Q`和`L`) 以及它们应该如何解释？如果您还可以向我推荐参考资料以了解有关调整有序因子的更多信息，我将不胜感激。这是我的代码：

```
library(KMsurv)
data(burn)
names(burn) <- c("Obs", "TRT", "Female", "White", "SurfBurned", "HeadBurned",
"buttBurned", "TrunkBurned", "UpperLegBurned", "LowerLegBurned", "resp", 
"BurnType", "ExcisionTime", "ExcisionDelta", "prophylacticTime",
"ProphylacticDelta", "straphylInfTime", "straphylInfDelta")

burn$SurfBurned_cat <- factor(cut(burn$SurfBurned, c(0, 10, 25, 100), 
labels = c("low", "medium", "high")),  

levels = c("low", "medium", "high"), ordered = TRUE)
Q4PcCoxModel <- coxph(Surv(straphylInfTime, straphylInfDelta) ~
                       TRT*SurfBurned_cat, 
                      data = burn)
summary(Q4PcCoxModel) 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-31T14:54:38.263

如果您希望对有序因子使用处理对比，可以使用此命令全局设置`options(contrasts = c("contr.treatment", "contr.treatment"))`。但是，您的期望是不正确的：

> 与调整未排序的相同因子相比，当我调整有序因子时，我希望看到相同数量的估计系数，但估计值不同。

使用处理对比调整有序因子将得到与使用处理对比针对无序因子调整 a 相同的估计值。

# mysql - 如何使用 DBI 连接到远程 mysql 服务器？

> ID：13132251
> 
> 赞同：1
> 
> 时间：2012-10-30T03:32:56.347
> 
> 标签：mysql, ruby, dbi

我无法通过 Ruby 和 DBI gem 连接到远程服务器上的 MySQL 数据库。

在本例中，DB 主机的地址为 000.00.00.000，DB 的名称为`testdb`。

应该`username`是我使用 SSH 连接到服务器的个人用户名还是特定的 MySQL 用户名？应该`password`是我进行 SSH 时使用的个人密码还是我打开后使用的 MySQL 密码？我是否需要指定端口或其他任何内容以及 IP 地址？

这是我目前正在尝试使用的代码，我[在本教程中找到了](http://www.kitebird.com/articles/ruby-mysql.html)

```
require 'rubygems'
require 'mysql'
require 'dbi'

#connect to mysql database

begin
 # connect to the MySQL server
 dbh = DBI.connect("DBI:Mysql:testdb:000.00.00.000", 
                    "username", "password")
 # get server version string and display it
 row = dbh.select_one("SELECT VERSION()")
 puts "Server version: " + row[0]
rescue DBI::DatabaseError => e
 puts "An error occurred"
 puts "Error code:    #{e.err}"
 puts "Error message: #{e.errstr}"
ensure
 # disconnect from server
 dbh.disconnect if dbh
end 
```

当我运行时：

```
Error code:    2003
Error message: Can't connect to MySQL server on  ... (60) 
```

在 SSH 上，我目前正在使用以下命令进入 MySQL：

```
mysql -u root testdb -p 
```

我的终端中有这个和那个功能的密码。

我应该在 DBI 连接语句中添加什么以通过 Ruby 正确连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:56:57.607

假设您在本地计算机上运行 MySQL 服务器，请尝试将连接线更改为：

```
dbh = DBI.connect("DBI:Mysql:testdb:127.0.0.1",
     "root", "<rootmysqlpassword>") 
```

# php - 如何使用 Javascript 获取按钮值

> ID：13132252
> 
> 赞同：1
> 
> 时间：2012-10-30T03:32:57.360
> 
> 标签：php, javascript, mysql, button, onclick

我试图弄清楚如何使用 JavaScript 获取按钮的值。在 php 代码中有几个使用 while 语句生成的按钮，所以`name`和`id`对于所有按钮都是相同的。它们之间的唯一区别是价值。

我的部分php代码：

```
while($row = mysql_fetch_array($result))
     {
     echo "<tr>";
     echo "<td align=\"center\"><input type=\"button\" id=\"details\" name=\"details\" value=\"" . $row['mcn'] . "\" onClick=\"MCNdetails()\"></td>";
     echo "</tr>";
     } 
```

我想要实现的是，当单击此按钮时，将显示带有此记录详细信息的 JavaScript 警报。

（仅供参考 - “Faker”是该表所属的表单名称。）

我的 JavaScript 代码：

```
function MCNdetails()
        {

        var buttonDetails = document.Faker.details;
        var buttonValue = buttonDetails.value;

        if (buttonValue === "2700-2057" )
            {
            alert ("Details are here");
            return;
            }
        else
            {
            alert ("No Dice " + buttonValue);
            return;
            }

        } 
```

我有大约。至今300条记录。当我单击任何按钮时，我总是得到 else 语句。我确实尝试通过 id 获取元素，如下所示：

```
function MCNdetails()
        {

        var buttonDetails = document.getElementById("details");
        var buttonValue = buttonDetails.value;

        if (buttonValue === "2700-2057" )
            {
            alert ("Details are here");
            return;
            }
        else
            {
            alert ("No Dice " + buttonValue);
            return;
            }

        } 
```

但这总是会返回第一个按钮的值，无论我点击了哪个按钮。

我已经做了一些谷歌搜索以及搜索这个站点，但我找不到生成按钮的相同场景。

任何帮助或指示将不胜感激。感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T03:36:42.990

尝试类似的东西

```
<script type="text/javascript">
  function getVal(value)
  {

   alert(value);
  }
 </script>
 <input type="button" value="Add" onclick="getVal(this.value)"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T03:36:50.400

请注意，对多个元素使用相同的 id 是无效的 html，尽管大多数（所有？）浏览器往往不会对此大惊小怪，它们仍然会非常愉快地显示页面。这就是为什么当您尝试使用`document.getElementById("details")`它时，总是给您第一个带有该 ID 的按钮 - 浏览器如何知道您的意思是哪个？

话虽如此，如果您`this`在单击时传入函数调用：

```
onClick=\"MCNdetails(this)\" 
```

...这将使函数直接引用被单击的特定按钮。那么：

```
function MCNdetails(btn) {
    var buttonValue = btn.value;

    // etc
} 
```

在这种情况下，您的按钮根本不需要 id。但是，如果您确实保留了 id，您应该找到一种使它们唯一的方法（例如，在每个的末尾附加一个序列号）。

# sql - SQL Server 中的 OpenQuery

> ID：13132253
> 
> 赞同：0
> 
> 时间：2012-10-30T03:32:58.753
> 
> 标签：sql, sql-server, tsql, dynamic-sql

我不知道如何配置该`OpenQuery`功能。

我想用来`OpenQuery`在测试项目中查询数据库。但我不知道如何配置 servername 参数

```
DECLARE @Sql varchar(max)
DECLARE @SQLExcuteSentence varchar(max)

SET @Sql = 'declare @UserID INT 
select @UserID = 1

declare @TotalGroupByFields nvarchar(2000)
select @TotalGroupByFields = ''Media''

declare @CostDataFileds nvarchar(2000)
select @CostDataFileds = ''''

declare @OtherDataFields nvarchar(max)
select @OtherDataFields = ''MonitoringSpotNumber,MonitoringTotalSeconds,BaseCost,ColourLoading,PositionLoading,WeekendLoading,Discount''

declare @MasterFilterId nvarchar(max)
select @MasterFilterId =''DateRange=20060601-20121231''+char(13)+''IncludeGuests=0''

declare @RatingTargetId nvarchar(2000)
select @RatingTargetId =''''

declare @IsEnableFinancialCloseDate INT
select @IsEnableFinancialCloseDate = 0

declare @MasterDisplayFormat nvarchar(2000)
select @MasterDisplayFormat = ''5''

exec [dbo].[USP_MatrixReport] @UserID, @TotalGroupByFields, @CostDataFileds, @OtherDataFields,  @MasterFilterId, @RatingTargetId, @IsEnableFinancialCloseDate, @MasterDisplayFormat, 0'

SET @SQLExcuteSentence = 'SELECT * FROM OPENQUERY(SQLConn,' + '''' + @Sql + '''' + ')'
EXEC (@SQLExcuteSentence); 
```

SQLConn 是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T06:14:29.660

[OPENQUERY 要求您首先使用sp_addlinkedserver](http://msdn.microsoft.com/en-us/library/ms190479.aspx)设置链接服务器。那就是设置连接字符串的地方。

之后，您可以使用`OPENQUERY`触发对链接服务器的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:17:00.747

如果没有 SQL Server Management Studio，本地主机看起来像这样：

```
EXEC sp_addlinkedserver
@server='LOCALSERVER',               -- name definition for later use in OpenQuery
@srvproduct='SQLSERVER',             
@provider='SQLNCLI',                 -- provider name
@datasrc='SERVERNAME\INSTANCENAME'   -- im not sure if there should be '\' or not 
```

其他带有 excel 文件的示例（基于[Manoj](https://sqlwithmanoj.wordpress.com/tag/openquery/)代码）：

```
EXEC sp_addLinkedServer
@server= N'XLSX_2010',
@srvproduct = N'Excel',
@provider = N'Microsoft.ACE.OLEDB.12.0',
@datasrc = N'C:\Users\SomeUser\Desktop\file.xlsx',
@provstr = N'Excel 12.0; HDR=Yes'; 
```

带有 SQL Server Management Studio 和不带的 localhost 示例：

[http://sqlserverplanet.com/sql-server/local-linked-server](http://sqlserverplanet.com/sql-server/local-linked-server)

# php - 如何在 PHP 中为 MySQL 查询提取数组键的值

> ID：13132255
> 
> 赞同：0
> 
> 时间：2012-10-30T03:33:03.383
> 
> 标签：php, mysql, arrays, key

我在这里有一个 SQL 查询来从数据库中获取课程信息。该变量`courses`是 Session 从上一页保存的数组。这就是`courses[]`我 var_dump 时的样子。我选择了 3 门课程放入会议中。

```
array(3) 
{ 
[0]=> string(7) "CAD8405" 
[1]=> string(7) "CON8413" 
[2]=> string(7) "ENG8328" 
} 
```

我的`$selectedYear`变量在 2012 年到 2014 年之间变化。也由会话保存。下面是我遇到问题的地方。我的查询很好，不需要检查。我无法`$courseCode`显示为 my `Course.CourseCode='$courseCode'`，因此我的查询不起作用。

这就是我发现它有点令人困惑的地方。该`$courses`数组返回一个普通数组。但是当我这样做时，`$courses[0] = $courseCode;`这`var_dump($courseCode) = null` **让我相信我需要的数据作为我的课程 ID 是`$courses[]`数组的键。在尝试访问 时`$courses[1]`，代码认为它是一个多维数组，其中键作为第一个数据。但我可能错了** 有没有更好的方法来提取我的数组的键？

```
for($i = 0; $i < count($courses); $i++)
{
    //$courses[$i] = $courseCode;
    $courseCode = $courses[$i];
    $comfirmationString = "SELECT Course.CourseCode, Course.Title, Course.WeeklyHours, Semester.SemesterCode FROM Course, Semester, CourseOffer
    WHERE Semester.YearNum='$selectedYear' AND Course.CourseCode='$courseCode'
    AND Course.CourseCode=CourseOffer.CourseCode AND Semester.SemesterCode=CourseOffer.SemesterCode";

if($comfirmationResult = mysqli_query($link, $comfirmationString))
    {
        while($row = mysqli_fetch_assoc($comfirmationResult))
        {
            echo "<tr><td>$row[CourseCode]</td><td>$row[Title]</td><td>$row[WeeklyHours]</td><td>$row[SemesterCode]</td></tr>";
        }
    }
    else
    {
        echo "<p>Query error: " + mysqli_error($link) + "</p>";
    }
} 
```

下面是显示我如何保存`$courses[]`变量的代码：我得到一个查询的结果，如果选中该复选框，这个 courseID 会被扔到`courses[]`数组中。

```
if($Result2013 = mysqli_query($link, $string2013))
    {
        echo "<form action='CourseSelection.php' method='get'>
        <table><tr><th>Code</th><th>Course Title</th><th>Hours</th><th>Term</th><th>Select</th></tr>";
        while($row2013 = mysqli_fetch_assoc($Result2013))
        {
            echo "<tr><td>$row2013[CourseCode]</td><td>$row2013[Title]</td><td>$row2013[WeeklyHours]</td>
            <td>$row2013[Term]</td><td><input type='checkbox' name='courses[]' value=$row2013[CourseCode]></td></tr>";
        }
        echo "</table>";
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:42:27.140

您可能希望修改查询以将复合值关联到更易于阅读的值，如下所示：

```
$comfirmationString = "SELECT Course.CourseCode as courseCode, Course.Title as courseTitle, Course.WeeklyHours as courseWeeklyHours, Semester.SemesterCode as semesterCode FROM Course, Semester, CourseOffer
WHERE Semester.YearNum='$selectedYear' AND Course.CourseCode='$courseCode'
AND Course.CourseCode=CourseOffer.CourseCode AND Semester.SemesterCode=CourseOffer.SemesterCode"; 
```

您还需要将变量括在括号中，如下所示：

```
echo "<tr><td>{$row['CourseCode']}</td><td>{$row['courseTitle']}</td><td>{$row['courseWeeklyHours']}</td><td>$row[SemesterCode]</td></tr>"; 
```

等等。

# ruby-on-rails-3 - github：在推送更新时保留使用回形针上传的 imgs

> ID：13132265
> 
> 赞同：0
> 
> 时间：2012-10-30T03:35:29.050
> 
> 标签：ruby-on-rails-3, heroku, github, paperclip

我目前正在登台环境（heroku）中进行测试，我让测试人员使用回形针为他们的个人资料上传 imgs。但是，每当我向 heroku 执行 git push 以更新站点（不更改数据库）时，他们的图片就会消失。有谁知道为什么会发生这种情况以及我如何解决这个问题？

这是我的回形针配置：

```
 has_attached_file :photo, :styles => {:thumb => "115x100#", :medium => "345x300#", :large => "690x600#"},
                        :path => ":rails_root/public/system/:attachment/:id/:style/:filename",
                        :url => "/system/:attachment/:id/:style/:filename" 
```

production.rb 配置：

```
config.serve_static_assets = true
config.assets.compile = false 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:48:58.700

你不应该那样使用heroku的文件系统。他们打算让您使用 S3 或其他一些耐用的存储介质。Heroku 将他们的文件系统称为[Ephemeral 文件系统](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)。您的应用程序可以对其进行写入，但写入对其他进程不可见，并且如果您的测功机重新启动，所有更改都将丢失。

Paperclip 对 S3 有很好的支持。看看[他们的文档](https://github.com/thoughtbot/paperclip)。

# servicestack - 如何提高响应时间

> ID：13132268
> 
> 赞同：2
> 
> 时间：2012-10-30T03:35:58.547
> 
> 标签：servicestack

我正在使用最新版本的 ServiceStack。我正在使用服务堆栈提供的内存缓存，因为我的服务正在从慢速数据库中读取数据。

全部实现后，服务响应时间为 5-7 秒，太慢了。是否有可能对其进行优化并使其更具响应性。

这是我的概念代码：

```
public class CustomerService : Service
{
    public object Any(Customer request)
    {
        string cacheKey = "customerReport_" + request.Id;
        report = CacheClient.Get<BalanceReport>(cacheKey);
        if(report != null)
            return report;

        //Logic to build report.
        //I am caching the report object here before returning report.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T12:50:31.217

您可以查看 http 缓存来帮助您的请求。[在这里](https://stackoverflow.com/questions/12283839/modeling-editable-lists-in-dtos-used-by-services/12300042#12300042)查看更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:30:16.857

您可能应该使用 ServiceStack 中内置的缓存模式，例如：

```
public class CustomerService : Service
{
        public object Any(Customer request)
        {
            string cacheKey = "customerReport_" + request.Id;
            return base.RequestContext.ToOptimizedResultUsingCache(
                this.CacheClient, cacheKey, () => {
                    //Logic to build report.
                    //I am caching the report object here before returning report.
                    return repo.GetCustomerReport(request.Id);
                });
        }
} 
```

您可以在 wiki 上阅读有关[ServiceStack 缓存的](https://github.com/ServiceStack/ServiceStack/wiki/Caching)更多信息。基本上它在缓存中存储最优化的 Web 服务响应，例如 Deflate/Compressed JSON 字节（如果它是 JSON 请求）。

# sql - 如何在 SQL 中选择相似的集合

> ID：13132270
> 
> 赞同：22
> 
> 时间：2012-10-30T03:36:02.650
> 
> 标签：sql, sql-server, algorithm

我有以下表格：

```
Order
----
ID (pk)

OrderItem
----
OrderID (fk -> Order.ID)
ItemID (fk -> Item.ID)
Quantity

Item
----
ID (pk) 
```

如何编写一个可以选择所有`Orders`与特定的至少 85% 相似的查询`Order`？

我考虑使用[Jaccard Index](http://en.wikipedia.org/wiki/Jaccard_index)统计量来计算两个`Orders`. （通过取每组的交集`OrderItems`除以每组的并集`OrderItems`）

但是，如果不为两个`Orders`. **还有其他方法吗？**

另外，有没有办法将`Quantity`每个匹配项的差异包括`OrderItem`在内？

**附加信息：**

* * *

总计`Orders`：~79k
总计`OrderItems`：~1.76m
Avg. `OrderItems`每人`Order`：21.5
总计`Items`：~13k

**笔记**

* * *

85% 的相似度数字只是对客户实际需求的最佳猜测，未来可能会发生变化。适用于任何相似性的解决方案将是可取的。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-18T23:47:15.260

您指定

> 如何编写可以选择与特定订单至少 85% 相似的所有订单的查询？

与“至少 85% 相似的所有订单对”相比，这是一个重要的简化。

我们将使用一些 TDQD（测试驱动查询设计）和一些分析来帮助我们。

### 预赛

要远程相似，两个订单必须至少有一个共同点。此查询可用于确定哪些订单与指定订单至少有一个共同点：

```
SELECT DISTINCT I1.OrderID AS ID
  FROM OrderItem AS I1
  JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
 WHERE I1.OrderID != <specified order ID> 
```

这会大量删除要检查的其他订单列表，但如果指定的订单包含您最受欢迎的商品之一，则很可能很多其他订单也这样做了。

代替 DISTINCT，您可以使用：

```
SELECT I1.OrderID AS ID, COUNT(*) AS Num_Common
  FROM OrderItem AS I1
  JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
 WHERE I1.OrderID != <specified order ID>
 GROUP BY I1.OrderID 
```

这为您提供了与指定订单相同的订单中的项目数。我们还需要每个订单中的商品数量：

```
SELECT OrderID AS ID, COUNT(*) AS Num_Total
  FROM OrderItem
 GROUP BY OrderID; 
```

### 相同的订单

对于 100% 的相似性，两个订单的共同项目与每个订单的项目数量一样多。不过，这可能不会找到很多订单对。我们可以很容易地找到与指定订单具有完全相同项目的订单：

```
SELECT L1.ID
  FROM (SELECT OrderID AS ID, COUNT(*) AS Num_Total
          FROM OrderItem
         GROUP BY OrderID
       ) AS L1
  JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS Num_Common
          FROM OrderItem AS I1
          JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
         WHERE I1.OrderID != <specified order ID>
         GROUP BY I1.OrderID
       ) AS L2 ON L1.ID = L2.ID AND L1.Num_Total = L2.Num_Common; 
```

*编辑：*事实证明这不够严格；为了使订单相同，指定订单中的商品数量也必须与公共数量相同：

```
SELECT L1.ID, L1.Num_Total, L2.ID, L2.Num_Common, L3.ID, L3.Num_Total
  FROM (SELECT OrderID AS ID, COUNT(*) AS Num_Total
          FROM OrderItem
         GROUP BY OrderID
       ) AS L1
  JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS Num_Common
          FROM OrderItem AS I1
          JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
         WHERE I1.OrderID != <specified order ID>
         GROUP BY I1.OrderID
       ) AS L2 ON L1.ID = L2.ID AND L1.Num_Total = L2.Num_Common
  JOIN (SELECT OrderID AS ID, COUNT(*) AS Num_Total
          FROM OrderItem
         WHERE OrderID = <specified order ID>
         GROUP BY OrderID
       ) AS L3 ON L2.Num_Common = L3.Num_Total; 
```

### 相似的顺序——分析公式

将 Wikipedia 中定义的[Jaccard 相似性应用于两个订单 A 和 B，其中 |A|](http://en.wikipedia.org/wiki/Jaccard_index) 作为订单 A 中项目数的计数，Jaccard 相似度*J(A,B) = |A∩B| ÷ |A∪B|* , 其中 |A∩B| 是两个订单共有的项目数，|A∪B| 是订购的不同项目的总数。

为了满足 85% 的 Jaccard 相似性标准，如果任一订单中的项目数小于某个阈值，则订单必须相同。例如，如果订单 A 和 B 都有 5 件商品，但两者之间有一件商品不同，那么它会给您 4 件共同的商品（|A∩B|）和总共 6 件商品（|A∪B|） ，所以 Jaccard 相似度 J(A,B) 只有 66⅔%。

对于 85% 的相似性，当两个订单中的每个订单中有 N 个项目且 1 个项目不同时，*(N-1) ÷ (N+1) ≥ 0.85*，这意味着 N > 12（准确地说是 12⅓）。对于分数 F = J(A,B)，一项不同的意思是*(N-1) ÷ (N+1) ≥ F*可以解决 N 给出*N ≥ (1 + F) ÷ (1 - F)*。随着相似性要求的提高，对于越来越大的 N 值，阶数必须相同。

进一步概括，假设我们有 N 和 M 个项目的不同大小订单（不失一般性，N < M）。|A∩B|的最大值 现在是 N 和 |A∪B| 的最小值 是M（意思是小顺序的所有项目都以大的顺序出现）。让我们定义 M = N + Δ，并且有 ∂ 项以较小的顺序出现，而在较大的顺序中不存在。由此可见，有 ∆+∂ 项以较大的顺序出现，而没有以较小的顺序出现。

根据定义，|A∩B| = N-∂和|A∪B| = (N-∂) + ∂ + (N+Δ-(N-∂))，其中三个相加的项表示（1）两个订单共有的项目数，（2）仅在较小的顺序，以及 (3) 仅在较大顺序中的项目数。这简化为：|A∪B| = N+Δ+∂。

* * *

### 关键方程

对于相似性分数 F，我们对 J(A,B) ≥ F 的顺序对感兴趣，因此：

> (N-∂) ÷ (N+Δ+∂) ≥ F
> 
> F ≤ (N-∂) ÷ (N+Δ+∂)

* * *

我们可以使用电子表格来绘制这些之间的关系。对于给定数量的较小顺序（x 轴）的项目，并且对于给定的相似度，我们可以绘制 ∂ 的最大值，它给出了 F 的相似度。公式是：

> ∂ = (N(1-F) - FΔ) ÷ (1+F)

![...图 ∂ = (N(1-F) - FΔ) ÷ (1+F)...](../Images/ebfa8fb7a325e96656b4acc2b572a672.png)

这是常数 F 的 N 和 Δ 的线性方程；对于不同的 F 值，它是非线性的。显然，∂ 必须是非负整数。

给定 F = 0.85，对于相同大小的订单 (Δ=0)，对于 1 ≤ N < 13，∂ = 0；对于 13 ≤ N < 25，∂ ≤ 1；对于 25 ≤ N < 37，∂ ≤ 2，对于 37 ≤ N < 50，∂ ≤ 3。

对于相差 1 (Δ=1) 的阶数，对于 1 ≤ N < 18，∂ = 0；对于 18 ≤ N < 31，∂ ≤ 1；对于 31 ≤ N < 43，∂ ≤ 2；等等。如果 ∆=6，您需要 N=47 才能使订单与 ∂=1 有 85% 的相似度。这意味着小订单有 47 件商品，其中 46 件与 53 件商品的大订单相同。

### 类似订单——应用分析

到目前为止，一切都很好。我们如何应用该理论来选择与指定订单相似的订单？

首先，我们观察到指定的订单可能与类似订单的大小相同，或者更大或更小。这使事情变得有点复杂。

上式的参数为：

*   N - 较小顺序的项目数
*   ∆ - 大订单项数与 N 之间的差异
*   F——固定
*   ∂ — 较小顺序中未匹配较大顺序的项目数

使用顶部开发的查询的微小变化可用的值：

*   NC——共同项目的数量
*   NA — 指定顺序的项目数
*   NB - 比较顺序中的项目数

对应查询：

```
SELECT OrderID AS ID, COUNT(*) AS NA
  FROM OrderItem
 WHERE OrderID = <specified order ID>
 GROUP BY OrderID;

SELECT OrderID AS ID, COUNT(*) AS NB
  FROM OrderItem
 WHERE OrderID != <specified order ID>
 GROUP BY OrderID;

SELECT I1.OrderID AS ID, COUNT(*) AS NC
  FROM OrderItem AS I1
  JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
 WHERE I1.OrderID != <specified order ID>
 GROUP BY I1.OrderID 
```

为方便起见，我们希望值 N 和 N+Δ（因此也有 Δ）可用，因此我们可以使用 UNION 来适当地安排事物，其中：

*   NS = N - 较小顺序的项目数
*   NL = N + Δ - 较大顺序的项目数

在 UNION 查询的第二个版本中，使用：

*   NC = N - ∂ — 共有项目数

这两个查询都保留了两个订单 ID 号，以便您以后可以追踪到其余的订单信息。

```
SELECT v1.ID AS OrderID_1, v1.NA AS NS, v2.ID AS OrderID_2, v2.NB AS NL
  FROM (SELECT OrderID AS ID, COUNT(*) AS NA
          FROM OrderItem
         WHERE OrderID = <specified order ID>
         GROUP BY OrderID
       ) AS v1
  JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
          FROM OrderItem
         WHERE OrderID != <specified order ID>
         GROUP BY OrderID
       ) AS v2
    ON v1.NA <= v2.NB
UNION
SELECT v2.ID AS OrderID_1, v2.NB AS NS, v1.ID AS OrderID_2, v1.NA AS NL
  FROM (SELECT OrderID AS ID, COUNT(*) AS NA
          FROM OrderItem
         WHERE OrderID = <specified order ID>
         GROUP BY OrderID
       ) AS v1
  JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
          FROM OrderItem
         WHERE OrderID != <specified order ID>
         GROUP BY OrderID
       ) AS v2
    ON v1.NA > v2.NB 
```

这为我们提供了一个包含 OrderID_1、NS、OrderID_2、NL 列的表表达式，其中 NS 是小订单中的项目数，NL 是大订单中的项目数。由于 v1 和 v2 表表达式生成的订单号没有重叠，因此无需担心 OrderID 值相同的“反身”条目。在 UNION 查询中添加 NC 也是最容易处理的：

```
SELECT v1.ID AS OrderID_1, v1.NA AS NS, v2.ID AS OrderID_2, v2.NB AS NL, v3.NC AS NC
  FROM (SELECT OrderID AS ID, COUNT(*) AS NA
          FROM OrderItem
         WHERE OrderID = <specified order ID>
         GROUP BY OrderID
       ) AS v1
  JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
          FROM OrderItem
         WHERE OrderID != <specified order ID>
         GROUP BY OrderID
       ) AS v2
    ON v1.NA <= v2.NB
  JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS NC
          FROM OrderItem AS I1
          JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
         WHERE I1.OrderID != <specified order ID>
         GROUP BY I1.OrderID
       ) AS v3
    ON v3.ID = v2.ID
UNION
SELECT v2.ID AS OrderID_1, v2.NB AS NS, v1.ID AS OrderID_2, v1.NA AS NL, v3.NC AS NC
  FROM (SELECT OrderID AS ID, COUNT(*) AS NA
          FROM OrderItem
         WHERE OrderID = <specified order ID>
         GROUP BY OrderID
       ) AS v1
  JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
          FROM OrderItem
         WHERE OrderID != <specified order ID>
         GROUP BY OrderID
       ) AS v2
    ON v1.NA > v2.NB
  JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS NC
          FROM OrderItem AS I1
          JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
         WHERE I1.OrderID != <specified order ID>
         GROUP BY I1.OrderID
       ) AS v3
    ON v3.ID = v1.ID 
```

这为我们提供了一个包含 OrderID_1、NS、OrderID_2、NL、NC 列的表表达式，其中 NS 是小订单中的项目数，NL 是大订单中的项目数，NC 是小订单中的项目数常见的。

给定 NS、NL、NC，我们正在寻找满足：

> (N-∂) ÷ (N+Δ+∂) ≥ F。

*   N - 较小顺序的项目数
*   ∆ - 大订单项数与 N 之间的差异
*   F——固定
*   ∂ — 较小顺序中未匹配较大顺序的项目数

*   NS = N - 较小顺序的项目数

*   NL = N + Δ - 较大顺序的项目数
*   NC = N - ∂ — 共有项目数

因此，条件必须是：

```
NC / (NL + (NS - NC)) ≥ F 
```

LHS 上的项必须作为浮点数计算，而不是整数表达式。将其应用于上面的 UNION 查询，产生：

```
SELECT OrderID_1, NS, OrderID_2, NL, NC,
        CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) AS Similarity
  FROM (SELECT v1.ID AS OrderID_1, v1.NA AS NS, v2.ID AS OrderID_2, v2.NB AS NL, v3.NC AS NC
          FROM (SELECT OrderID AS ID, COUNT(*) AS NA
                  FROM OrderItem
                 WHERE OrderID = <specified order ID>
                 GROUP BY OrderID
               ) AS v1
          JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
                  FROM OrderItem
                 WHERE OrderID != <specified order ID>
                 GROUP BY OrderID
               ) AS v2
            ON v1.NA <= v2.NB
          JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS NC
                  FROM OrderItem AS I1
                  JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
                 WHERE I1.OrderID != <specified order ID>
                 GROUP BY I1.OrderID
               ) AS v3
            ON v3.ID = v2.ID
        UNION
        SELECT v2.ID AS OrderID_1, v2.NB AS NS, v1.ID AS OrderID_2, v1.NA AS NL, v3.NC AS NC
          FROM (SELECT OrderID AS ID, COUNT(*) AS NA
                  FROM OrderItem
                 WHERE OrderID = <specified order ID>
                 GROUP BY OrderID
               ) AS v1
          JOIN (SELECT OrderID AS ID, COUNT(*) AS NB
                  FROM OrderItem
                 WHERE OrderID != <specified order ID>
                 GROUP BY OrderID
               ) AS v2
            ON v1.NA > v2.NB
          JOIN (SELECT I1.OrderID AS ID, COUNT(*) AS NC
                  FROM OrderItem AS I1
                  JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
                 WHERE I1.OrderID != <specified order ID>
                 GROUP BY I1.OrderID
               ) AS v3
            ON v3.ID = v1.ID
       ) AS u
 WHERE CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) >= 0.85 -- F 
```

您可能会观察到此查询仅使用 OrderItem 表；不需要 Order 和 Item 表。

* * *

警告：部分测试的 SQL（警告讲师）。上面的 SQL 现在似乎可以在微小的数据集上产生似是而非的答案。我调整了相似性要求（0.25，然后是 0.55）并得到了合理的值和适当的选择性。但是，我的测试数据最大的顺序只有 8 个项目，而且肯定没有涵盖所描述数据的全部范围。由于我最常使用的 DBMS 不支持 CTE，因此下面的 SQL 未经测试。但是，我有一定的信心，除非我犯了一个大错误，否则版本 1 中的 CTE 代码（指定订单 ID 有很多重复）应该是干净的。我认为第 2 版也可能没问题，但是……它未经测试。

可能有更紧凑的方式来表达查询，可能使用 OLAP 函数。

如果我要对此进行测试，我将创建一个包含几个具有代表性的订单项集的表，检查返回的相似性度量是否合理。我会或多或少地处理查询，逐渐建立复杂的查询。如果其中一个表达式被证明有缺陷，那么我会对该查询进行适当的调整，直到缺陷得到修复。

显然，性能将是一个问题。最里面的查询不是非常复杂，但也不是微不足道的。然而，测量将显示这是一个严重的问题还是只是一个麻烦。研究查询计划可能会有所帮助。OrderItem.OrderID 上应该有一个索引似乎很可能；如果没有这样的索引，查询不太可能执行良好。这不太可能成为问题，因为它是一个外键列。

您可能会从使用“WITH 子句”（[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)）中获得一些好处。他们将明确表示 UNION 子查询的两半中隐含的重复。

* * *

### 使用公用表表达式

当表达式相同时，使用公用表表达式可以向优化器澄清，并可能有助于它更好地执行。它们还帮助人们阅读您的查询。上面的查询确实要求使用 CTE。

版本一：重复指定订单号

```
WITH SO AS (SELECT OrderID AS ID, COUNT(*) AS NA       -- Specified Order (SO)
              FROM OrderItem
             WHERE OrderID = <specified order ID>
             GROUP BY OrderID
           ),
     OO AS (SELECT OrderID AS ID, COUNT(*) AS NB       -- Other orders (OO)
              FROM OrderItem
             WHERE OrderID != <specified order ID>
             GROUP BY OrderID
           ),
     CI AS (SELECT I1.OrderID AS ID, COUNT(*) AS NC    -- Common Items (CI)
              FROM OrderItem AS I1
              JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID AND I2.OrderID = <specified order ID>
             WHERE I1.OrderID != <specified order ID>
             GROUP BY I1.OrderID
           )
SELECT OrderID_1, NS, OrderID_2, NL, NC,
        CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) AS Similarity
  FROM (SELECT v1.ID AS OrderID_1, v1.NA AS NS, v2.ID AS OrderID_2, v2.NB AS NL, v3.NC AS NC
          FROM SO AS v1
          JOIN OO AS v2 ON v1.NA <= v2.NB
          JOIN CI AS v3 ON v3.ID  = v2.ID
        UNION
        SELECT v2.ID AS OrderID_1, v2.NB AS NS, v1.ID AS OrderID_2, v1.NA AS NL, v3.NC AS NC
          FROM SO AS v1
          JOIN OO AS v2 ON v1.NA  > v2.NB
          JOIN CI AS v3 ON v3.ID  = v1.ID
       ) AS u
 WHERE CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) >= 0.85 -- F 
```

版本 2：避免重复指定的订单号

```
WITH SO AS (SELECT OrderID AS ID, COUNT(*) AS NA       -- Specified Order (SO)
              FROM OrderItem
             WHERE OrderID = <specified order ID>
             GROUP BY OrderID
           ),
     OO AS (SELECT OI.OrderID AS ID, COUNT(*) AS NB    -- Other orders (OO)
              FROM OrderItem AS OI
              JOIN SO ON OI.OrderID != SO.ID
             GROUP BY OI.OrderID
           ),
     CI AS (SELECT I1.OrderID AS ID, COUNT(*) AS NC    -- Common Items (CI)
              FROM OrderItem AS I1
              JOIN SO AS S1 ON I1.OrderID != S1.ID
              JOIN OrderItem AS I2 ON I2.ItemID = I1.ItemID
              JOIN SO AS S2 ON I2.OrderID  = S2.ID
             GROUP BY I1.OrderID
           )
SELECT OrderID_1, NS, OrderID_2, NL, NC,
        CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) AS Similarity
  FROM (SELECT v1.ID AS OrderID_1, v1.NA AS NS, v2.ID AS OrderID_2, v2.NB AS NL, v3.NC AS NC
          FROM SO AS v1
          JOIN OO AS v2 ON v1.NA <= v2.NB
          JOIN CI AS v3 ON v3.ID  = v2.ID
        UNION
        SELECT v2.ID AS OrderID_1, v2.NB AS NS, v1.ID AS OrderID_2, v1.NA AS NL, v3.NC AS NC
          FROM SO AS v1
          JOIN OO AS v2 ON v1.NA  > v2.NB
          JOIN CI AS v3 ON v3.ID  = v1.ID
       ) AS u
 WHERE CAST(NC AS NUMERIC) / CAST(NL + NS - NC AS NUMERIC) >= 0.85 -- F 
```

这些都不是易读的。两者都比完整写出 CTE 的大 SELECT 更容易。

* * *

### 最少的测试数据

这不足以进行良好的测试。它提供了一点点信心（它确实显示了“相同顺序”查询的问题。

```
CREATE TABLE Order (ID SERIAL NOT NULL PRIMARY KEY);
CREATE TABLE Item  (ID SERIAL NOT NULL PRIMARY KEY);
CREATE TABLE OrderItem
(
    OrderID INTEGER NOT NULL REFERENCES Order,
    ItemID INTEGER NOT NULL REFERENCES Item,
    Quantity DECIMAL(8,2) NOT NULL
);

INSERT INTO Order VALUES(1);
INSERT INTO Order VALUES(2);
INSERT INTO Order VALUES(3);
INSERT INTO Order VALUES(4);
INSERT INTO Order VALUES(5);
INSERT INTO Order VALUES(6);
INSERT INTO Order VALUES(7);

INSERT INTO Item VALUES(111);
INSERT INTO Item VALUES(222);
INSERT INTO Item VALUES(333);
INSERT INTO Item VALUES(444);
INSERT INTO Item VALUES(555);
INSERT INTO Item VALUES(666);
INSERT INTO Item VALUES(777);
INSERT INTO Item VALUES(888);
INSERT INTO Item VALUES(999);

INSERT INTO OrderItem VALUES(1, 111, 1);
INSERT INTO OrderItem VALUES(1, 222, 1);
INSERT INTO OrderItem VALUES(1, 333, 1);
INSERT INTO OrderItem VALUES(1, 555, 1);

INSERT INTO OrderItem VALUES(2, 111, 1);
INSERT INTO OrderItem VALUES(2, 222, 1);
INSERT INTO OrderItem VALUES(2, 333, 1);
INSERT INTO OrderItem VALUES(2, 555, 1);

INSERT INTO OrderItem VALUES(3, 111, 1);
INSERT INTO OrderItem VALUES(3, 222, 1);
INSERT INTO OrderItem VALUES(3, 333, 1);
INSERT INTO OrderItem VALUES(3, 444, 1);
INSERT INTO OrderItem VALUES(3, 555, 1);
INSERT INTO OrderItem VALUES(3, 666, 1);

INSERT INTO OrderItem VALUES(4, 111, 1);
INSERT INTO OrderItem VALUES(4, 222, 1);
INSERT INTO OrderItem VALUES(4, 333, 1);
INSERT INTO OrderItem VALUES(4, 444, 1);
INSERT INTO OrderItem VALUES(4, 555, 1);
INSERT INTO OrderItem VALUES(4, 777, 1);

INSERT INTO OrderItem VALUES(5, 111, 1);
INSERT INTO OrderItem VALUES(5, 222, 1);
INSERT INTO OrderItem VALUES(5, 333, 1);
INSERT INTO OrderItem VALUES(5, 444, 1);
INSERT INTO OrderItem VALUES(5, 555, 1);
INSERT INTO OrderItem VALUES(5, 777, 1);
INSERT INTO OrderItem VALUES(5, 999, 1);

INSERT INTO OrderItem VALUES(6, 111, 1);
INSERT INTO OrderItem VALUES(6, 222, 1);
INSERT INTO OrderItem VALUES(6, 333, 1);
INSERT INTO OrderItem VALUES(6, 444, 1);
INSERT INTO OrderItem VALUES(6, 555, 1);
INSERT INTO OrderItem VALUES(6, 777, 1);
INSERT INTO OrderItem VALUES(6, 888, 1);
INSERT INTO OrderItem VALUES(6, 999, 1);

INSERT INTO OrderItem VALUES(7, 111, 1);
INSERT INTO OrderItem VALUES(7, 222, 1);
INSERT INTO OrderItem VALUES(7, 333, 1);
INSERT INTO OrderItem VALUES(7, 444, 1);
INSERT INTO OrderItem VALUES(7, 555, 1);
INSERT INTO OrderItem VALUES(7, 777, 1);
INSERT INTO OrderItem VALUES(7, 888, 1);
INSERT INTO OrderItem VALUES(7, 999, 1);
INSERT INTO OrderItem VALUES(7, 666, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-14T21:01:31.260

这种方法考虑了使用 Extended Jaccard Coefficient 或[Tanimoto Similarity](http://en.wikipedia.org/wiki/Tanimoto_coefficient)的 Quantity 。它通过使用数量级的常见 ItemID 向量计算所有订单的相似性。它确实需要进行表扫描，但不需要对所有可能的相似性进行 N^2 次计算。

```
SELECT
    OrderID,
    SUM(v1.Quantity * v2.Quantity) /
    (SUM(v1.Quantity * v1.Quantity) +
     SUM(v2.Quantity * v2.Quantity) -
     SUM(v1.Quantity * v2.Quantity) ) AS coef
FROM
    OrderItem v1 FULL OUTER JOIN OrderItem v2
    ON v1.ItemID = v2.ItemID
    AND v2.OrderID = ?
GROUP BY OrderID
HAVING coef > 0.85; 
```

扩展 Jaccard 系数的公式：

![谷本相似度](../Images/71086039a12780f496580c1b19eabde1.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-30T04:00:12.740

这个问题真的没有简单的答案。您当然可以存储 Jaccard 索引（实际上我只是存储符合条件的索引，然后丢弃其余索引），但真正的问题是计算它（实际上每次新订单时都必须扫描所有现有订单已输入系统以计算新指数）。

这可能会非常昂贵，具体取决于您维护的订单量。也许您只将它与去年的订单进行比较，或者其他什么。

如果你在飞行中做它，它会变得更有趣，但仍然很昂贵。

您可以轻松获得具有相同产品项目的所有订单的列表。每个项目一个列表。事实上，这不一定是很多数据（如果您对单个热门商品有很多订单，那么它可能是一个很长的列表）。单个查询也不是特别疯狂（再次取决于您的数据）。如果您拥有大量数据，则可以轻松地映射/减少查询，甚至可以使用分片数据存储。位图索引（如果你的数据库支持的话）特别适合快速获取这样的列表。

然后，您可以简单地计算一个订单号在所有列表中出现的次数，然后将那些不符合阈值的丢弃。这是一个直接的合并操作。

但是每次需要信息时都必须进行此计算，因为您无法真正存储它。

因此，它确实归结为您需要信息的目的、您需要它的频率、您的项目 <-> 订单分配、您可以等待多长时间等。

附加物：

再想一想，这是一个简单的查询，但运行起来可能需要一些时间。现代硬件可能并不多，您实际上并没有那么多数据。对于查看订单的单个屏幕，您不会注意到它。如果您在所有订单上运行报告，那么您肯定会注意到它——并且需要一种不同的方法。

让我们考虑一个包含 20 个订单项的订单。

你想要一个 85% 的匹配。这意味着有 17 个或更多共同项目的订单。

这是一个查询，它将为您提供您感兴趣的订单：

```
SELECT orderId, count(*) FROM OrderItem
WHERE itemId in ('list', 'of', 'items', 'in', 'order', 123, 456, 789)
GROUP BY orderId
HAVING count(*) >= 17 
```

因此，这为您提供了与您的订单具有相同项目的所有订单项的集合。然后，您只需将它们通过 orderId 进行汇总，那些等于或大于您的阈值（本例中为 17）的就是候选订单。

现在，您不会说目录中有多少商品。如果您有 1000 个完美分布的项目，则此查询将处理 1600 行数据——这没什么大不了的。有了适当的索引，这应该很快。但是，如果您拥有“非常受欢迎”的项目，那么您将需要仔细阅读更多行数据。

但是，同样，您没有那么多数据。大多数查询可以在适当数据库的索引中完成，甚至不会命中实际表。因此，正如我所说，您可能不会注意到此查询对交互式系统的影响。

所以，试一试，看看它对你有什么好处。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T17:44:46.257

这与其说是一个扩展评论，不如说是一个真正的答案。如果认为没有意义，我会删除它。

如果您试图即时查找“相似”商品，那么问题在于您有很多（约 79k）订单要查看。因此，如果您尝试这样做，那么您需要在进行昂贵的集合比较之前减少您正在考虑的订单数量。

@Will 指出的一种方法是考虑订单*中的项目数量*。因此，如果您的目标订单有 20 个项目，那么您只需要考虑具有 17-23 个 OrderItems 的订单（或类似的东西，取决于“85% 相似性”的精确计算）。我假设这些数字可以通过触发器计算，无论何时创建或更改订单，并存储在订单表的列中。

但是，如果您可以存储集合的大小，那么您也可以存储其他数字。例如，您可以在每个 Order 中存储*奇数*个OrderItem 主键值。然后，您正在考虑的订单必须适当地接近具有该数量的奇数订单号（我可能会在某个时候进行数学运算以填写“适当地接近”）。

如果您认为通过“奇数”将值划分为大小为 1 的条带，您可以使用模数运算符轻松地通过不同大小的条带进行划分。例如。ItemID%4<2 将制作大小为 2 的条纹。然后，您可以为每个 Order 记录这些条带中 OrderItem 主键的数量。您的候选订单必须在每种划分值的方式上适当地接近您的目标订单。

因此，您最终会得到一个大子查询，它试图通过查看存储在该表上并编制索引的一大堆指标来限制 Orders 表中候选者的大小。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-14T22:01:36.520

嗯，有趣的是，我目前正在做类似的事情。您为什么不将样本订单（即他们的商品）与所有其他订单（他们的商品）结合起来，并通过对每个订单的匹配数进行分组来列出所有匹配率至少为 85% 的订单？

```
-- let @SampleorderID be the ID of a sample

declare @totalOrders int, @ThresholdOrderCount int
select @totalOrders = count(*) from OrderItems where orderID=@SampleOrderID

set @ThresholdOrderCount = 85*@totalOrders/100 -- 85% of the item amount of the sample

-- Now match the contents of the sample order with the contents of all other orders
-- count the #matches and show only those orders with at least 85% identical items
Select AllOrder.OrderID, count(*)
from   OrderItems sample 
       join OrderItems AllOrder 
         on sample.ItemID = AllOrder.ItemID
where sample.OrderID = @SampleOrderID 
  and sample.OrderID<>AllOrder.OrderID
group by AllOrder.OrderID 
having count(*)>@ThresholdOrderCount 
```

这应该有效。但是，它也会返回订单，其中包含比样本更多的项目。如果没问题，那么上面的查询也应该很快。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T12:38:50.280

为了速度，我会尝试这样的事情，按与 Order @OrderId 的相似性列出订单。加入的 INTS 应该是交集，相似度值是我计算 Jaccard 指数的尝试。

我在这里根本没有使用数量字段，但我认为如果我们找到一种量化包括数量在内的相似性的方法，它也可以在不减慢查询速度的情况下完成。下面，我将两个订单中的任何相同项目计算为相似性。您也可以加入数量，或使用包含数量的匹配项加倍的度量。我不知道这是否合理。

```
SELECT 
    OI.OrderId,
    1.0*COUNT(INTS.ItemId) / 
    (COUNT(*)
    + (SELECT COUNT(*) FROM OrderItem WHERE OrderID = @OrderId) 
    - COUNT(INTS.ItemId)) AS Similarity
FROM    
    OrderItem OI        
JOIN
    OrderItem INTS ON INTS.ItemID = OI.ItemID AND INTS.OrderId=@OrderId
GROUP BY 
    OI.OrderId
HAVING  
    1.0*COUNT(INTS.ItemId) / 
    (COUNT(*)
    + (SELECT COUNT(*) FROM OrderItem WHERE OrderID = @OrderId) 
    - COUNT(INTS.ItemId)) > 0.85
ORDER BY
    Similarity DESC 
```

它还假定 OrderId/ItemId 组合在 OrderItem 中是唯一的。我意识到情况可能并非如此，并且可以使用视图来解决。

我确信有更好的方法，但衡量差异的一种方法是用类似这样的东西（假设所有数量都是正数）替换提名者 COUNT(INTS.ItemId)不同。

```
 1/(ABS(LOG(OI.quantity)-LOG(INTS.quantity))+1) 
```

补充：这个更易读的解决方案使用 JRideout 建议的 Tanimoto Similarity

```
DECLARE 
    @ItemCount INT,
    @OrderId int 
SELECT     
    @OrderId  = 1
SELECT     
    @ItemCount = COUNT(*)
FROM 
    OrderItem
WHERE 
    OrderID = @OrderId 

SELECT 
    OI.OrderId,
    SUM(1.0* OI.Quantity*INTS.Quantity/(OI.Quantity*OI.Quantity+INTS.Quantity*INTS.Quantity-OI.Quantity*INTS.Quantity )) /
    (COUNT(*) + @ItemCount - COUNT(INTS.ItemId)) AS Similarity
FROM    
    OrderItem OI        
LEFT JOIN
    OrderItem INTS ON INTS.ItemID = OI.ItemID AND INTS.OrderId=@OrderId
GROUP BY 
    OI.OrderId
HAVING      
    SUM(1.0* OI.Quantity*INTS.Quantity/(OI.Quantity*OI.Quantity+INTS.Quantity*INTS.Quantity-OI.Quantity*INTS.Quantity )) /
    (COUNT(*) + @ItemCount - COUNT(INTS.ItemId)) > 0.85
ORDER BY
    Similarity DESC 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-16T12:38:43.977

我会采取的方法是首先找到与所选订单的订单项相似 85% 的所有订单项，然后计算每个订单的这些订单项的数量并检查项目数是否与 85% 相似选择的订单，使用以下查询：

```
DECLARE @OrderId int = 2
SET @OrderId = 6

/*
Retrieve orderitems that match 85% with required @orderId
*/
;WITH SelectedOrderItemCount
AS
(
    SELECT COUNT(*) * 0.85 AS LowerBoundary, COUNT(*) * 1.15 AS UpperBoundary
    FROM OrderItem
    WHERE OrderId = @OrderId
)
SELECT OtherOrders.OrderId, COUNT(*) as NumberOfOrderItems
FROM OrderItem SpecificOrder
INNER JOIN OrderItem OtherOrders
    ON OtherOrders.ItemId = SpecificOrder.ItemId
WHERE SpecificOrder.OrderId = @OrderId AND
      OtherOrders.OrderId <> @OrderId AND
    OtherOrders.Quantity BETWEEN SpecificOrder.Quantity * 0.85 AND SpecificOrder.Quantity * 1.15
GROUP BY OtherOrders.OrderId
HAVING COUNT(*) BETWEEN (SELECT LowerBoundary FROM SelectedOrderItemCount) 
                    AND (SELECT UpperBoundary FROM SelectedOrderItemCount) 
```

完整的 SQLFiddle 演示[在这里](http://sqlfiddle.com/#!3/8f672/2)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-18T22:17:13.340

这是一种数据挖掘问题。因此，您可以使用 85% 支持的 Apriori 算法，而不是使用 sql。该算法的实现可在许多工具中免费获得。

# asp.net-mvc-3 - 如何将一个域的所有请求完全重定向到另一个域？

> ID：13132276
> 
> 赞同：1
> 
> 时间：2012-10-30T03:36:45.190
> 
> 标签：asp.net-mvc-3, iis, redirect, url-rewriting, dns

我有一个托管在 godaddy（豪华 4GH 计划）上的 .net mvc3 网站，带有 SSL 和专用 IP 地址（173.201。。*）*最近，我注意到有一个奇怪的域（比如说 www.strange-domain.com **）也指向我的专用IP地址**（173.201.. *）。*也就是说，除了我自己的域（比如，www.my-domain.com），这个新的奇怪域还可以访问我的站点（我的应用程序）的每个部分，包括管理区！我真的不希望发生这种事情，因为就 SEO 而言，搜索引擎可能会认为两个域指向同一个站点是一种作弊。

所以我联系了godaddy，他们说他们不能做任何事情来阻止某人将他自己的域指向我的专用IP地址。我认为这是真的，是的，这取决于域所有者。现在，我需要实现一种机制，可以在访问者不知情的情况下将那个陌生域的所有请求重定向到我自己的域。也就是说：如果访问者正在请求 **www.strange-domain.com/some/path/to/page** ，那么 如果这不能，他将被重定向到**www.my-domain.com/some/path/to/page**完成后，至少应将访问者重定向到我的域主页：**www.strange-domain.com**

我知道这可能是通过 IIS url 重写来完成的。我试过但失败了。我真的不擅长这样做。所以你可以通过给我一个详细的实现来帮助我吗？

另外，由于我的网站是由 .NET MVC3 驱动的，如果 url 重写不起作用，我想知道我是否可以使用一些 .NET MVC3 功能来做到这一点，例如路由系统，Global.asax .... 如果两者都可以做到这一点，哪个是首选，为什么:)这么多问题，提前谢谢大家！:)

**update1：** ​​现在，我有以下重写规则。

```
<rewrite>
<rules>
    <rule name="Redirects to www.my-domain.com" patternSyntax="ECMAScript" stopProcessing="true">
        <match url=".*" />
        <conditions logicalGrouping="MatchAny">
            <add input="{HTTP_HOST}" pattern="^www.my-domain.com$" negate="true" />
        </conditions>
        <action type="Redirect" url="http://www.my-domain.com/{R:0}" />
    </rule>
</rules> 
```

我认为它现在正在生效，因为对 my-domain.com（没有 www 前缀）和奇怪的 domain.com（也没有 wwww）的请求现在都出现以下错误：

![在此处输入图像描述](../Images/81bf69e4b20e489d9aa6cf181666c0ef.png) 你能给我其他的想法吗？谢谢你 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:10:19.320

在您的情况下，最好使用 IIS URL 重写，而不是 MVC3 中的任何内容，因为 IIS 中的 URL 重写引擎会在请求到达 ASP.NET 之前处理它们。

静态资产，如图像、javascript 文件和样式表，可能并不总是在 ASP.NET 中提供，并且 ASP.NET 中的任何 URL 重定向都不起作用。

要全局重定向与所需服务器 URL 不匹配的所有请求，请参阅[此链接](http://weblogs.asp.net/owscott/archive/2009/11/30/iis-url-rewrite-redirect-multiple-domain-names-to-one.aspx)

本质上，您想配置一个**条件**，其中 {HTTP_HOST}**不**匹配模式 ^www.my-domain.com$

结果的配置应如下所示：

```
<rewrite>
    <rules>
        <rule name="Redirects to www.my-domain.com" patternSyntax="ECMAScript" stopProcessing="true">
            <match url=".*" />
            <conditions logicalGrouping="MatchAny">
                <add input="{HTTP_HOST}" pattern="^www.mydomain.com$" negate="true" />
            </conditions>
            <action type="Redirect" url="http://www.my-domain.com/{R:0}" />
        </rule>
    </rules>
</rewrite> 
```

## 此外

当您说其他域可以访问您网站的所有区域（包括您的管理区域）时，您肯定是指他们只能看到授权页面，而不是他们绕过您的授权 - 在这种情况下，您需要认真检查您的安全性.

从本质上讲，您无法阻止有人将域指向您的 IP 地址，因此您需要考虑您的应用程序如何处理它。

# php - 这个JOIN有什么问题？

> ID：13132278
> 
> 赞同：0
> 
> 时间：2012-10-30T03:36:54.293
> 
> 标签：php, mysql, sql

我正在尝试将“users”表中的“userTypeId”与“userRoles”表中的相应“id”相匹配，以便我可以在“userRoles”中回显“roleName”。

以下是表格：

```
userRoles
---------------------
id  roleName
1   superuser
2   admin
3   editor
4   author
5   contributor
6   subscriber

users
---------------------
id  userName        userTypeId
1   heyjohnmurray   1
2   admin           2 
```

我试过这个查询，每当我检查它时，它都会回显“错误”

```
$roleQuery = "SELECT id, roleName, userTypeId FROM userRoles JOIN users ON id=userTypeId";
$roleResult = mysqli_query($dbconnect, $roleQuery);

if(!$roleResult){
    echo 'WRONG';
} else {
    echo 'RIGHT';
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:38:38.717

`ALIAS`在桌子上添加一个，

```
SELECT a.id, a.roleName, b.userTypeId 
FROM   userRoles a, users b
WHERE  a.id = b.userTypeId 
```

或更好地使用格式（*ANSI SQL-92*）

```
SELECT a.id, a.roleName, b.userTypeId 
FROM   userRoles a
       INNER JOIN users b
          ON a.id = b.userTypeId 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:50:05.733

您应该为表使用别名，否则您将在查询中遇到明确的错误，因为两个连接表都有 id，因此服务器可能会被迫在明确的情况下从表中选择字段

```
 SELECT UR.id, U.roleName, U.userTypeId FROM  userRoles AS UR JOIN users AS U ON UR.id = U.userTypeId 
```

# mysql - noob qn 关于更新级联

> ID：13132279
> 
> 赞同：0
> 
> 时间：2012-10-30T03:37:03.457
> 
> 标签：mysql, foreign-keys

如果我有两个表 tableinfo 和 tablenamelist 以及一个像这样的外键：

```
Alter tableinfo add foreign key (name) references tablenamelist(name) on update cascade; 
```

哪些情况下会修改记录？

我的理解是，如果我在 tablenamelist 中将“bob”更改为“Bobby”，它会将 tableinfo 中的所有“bob”实例更新为“Bobby”。但是，如果我更改 tableinfo 表中的名称会发生​​什么？如果我将记录从“bob”更改为“tim”，它会更改 tableinfo 中的记录吗？还是只是将该记录重新分配给新名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T03:40:18.567

您的第一个假设是正确的，如果您在 中更改名称`tablenamelist`，它会在 table 中更改`tableinfo`。

您的第二个假设不正确，如果您尝试将 table 中的名称更改为 table`tableinfo`中不存在的名称，您将收到外键违规`tablenamelist`。

外键是强制外表中存在键的约束。

从[外键](http://en.wikipedia.org/wiki/Foreign_key)

> 在关系数据库的上下文中，外键是两个表之间的引用约束。

同样来自[14.3.5.4。外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

> 如果父表中没有匹配的候选键值，则 InnoDB 拒绝任何尝试在子表中创建外键值的 INSERT 或 UPDATE 操作。

# html - 通过 http 提供 HTML5 视频

> ID：13132280
> 
> 赞同：4
> 
> 时间：2012-10-30T03:37:13.997
> 
> 标签：html, http

[这是对我的老问题](http://www.stackoverflow.com/questions/13043816/html5-video-and-partial-range-http-requests)的跟进，我认为这个问题太具体了，无法得到答案。

一般来说，我如何通过 http 提供 HTML5 视频？

假设一个 233 MB H.264 文件，我只是写

```
HTTP/1.1 200 OK
Content-Type: video/mp4
Content-Length: 232725251 
```

然后尝试将 232725251 字节推入套接字，或者还有更多内容吗？

这在任何地方都有记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T12:40:53.480

就是这样，除非客户端要求特定范围（在[http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p5-range-21.html](http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p5-range-21.html)中定义）。

# ios - 应用程序在 iPhone 5 上未正确调整大小

> ID：13132281
> 
> 赞同：0
> 
> 时间：2012-10-30T03:37:25.407
> 
> 标签：ios, autoresize, iphone-5

所以我试图更新我的旧应用程序以适应 iPhone 5 屏幕。我按照这个[线程](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)上的说明进行操作。我为 iPhone 5 创建了一个启动图像“Default-568h@2x.png”。在模拟器上对其进行了测试，应用程序自动调整大小以适应 4 英寸屏幕。但是当我在我的 iPhone 5 上测试它时，该应用程序仍然是信箱的。当应用启动时，启动图像仍然是旧的 3.5 合一，而不是我添加的 4 合一。

我也尝试设置 UIViewAutoResizingMask，但仍然没有运气。因此，相同的代码在模拟器上完美运行，但在我的 iPhone 5 上却不行。有人可以帮忙吗？

任何建议/评论表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:38:59.257

如果图片在“复制捆绑资源”中，也许您可​​以检查您的项目“构建阶段”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:54:40.057

您是否尝试过删除 iPhone 中的应用程序，清除 Xcode 中的所有目标？

# jms - 为什么在 WAS Server 和 websphere MQ 中需要队列？

> ID：13132293
> 
> 赞同：3
> 
> 时间：2012-10-30T03:39:48.967
> 
> 标签：jms, websphere, ibm-mq

我正在一个新项目中工作。该项目包括使用 websphere MQ、Websphere 服务器。我们在 Websphere MQ 中有队列，包括队列管理器。我们还在 websphere 应用服务器中定义了队列和连接工厂。现在，我的问题是为什么我们需要在 websphere 应用程序服务器中创建队列和连接工厂，即使它们是在 WEBSPHERE MQ 中定义的。我们的应用程序不能直接使用 Websphere MQ 中定义的队列吗？

请清除我的查询。提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T03:54:47.410

实际上，连接工厂并**没有**在 WebSphere MQ 中定义。队列是，但它与您在 WAS 中创建的不同。

使用 JMS 时，对象有两个接口。JMS API 是代码和开发人员看到的接口。服务提供者接口是与特定 JMS 传输提供者交互的部分。需要这两者来创建 JMS 对象，例如 QCF 或 Destination。

当您在 WAS（或任何 JNDI 存储库，就此而言）创建对象定义时，创建的是程序可以引用的对象（JMS API 部分），但它也“知道”如何与特定的传输提供者对话以及（SPI部分）。因此，当您在 WAS 中定义队列时，它是一个目录条目，指向在传输提供者（在本例中为 WebSphere MQ）中定义的实际物理队列。类似地，当您定义连接工厂时，它也不过是一个符合 JMS API 的目录条目，并且还“知道”如何使用其专有协议和有线格式与传输提供者对话。在这种情况下，因为传输提供者是 WebSphere MQ，所以连接工厂目录条目必须知道 QMgr 名称、主机、端口、通道、SSL/TLS 详细信息等。

在某些情况下，应用服务器*是*传输提供者（即，使用服务集成总线作为 JMS 传输的 WAS）创建 JMS 对象定义同时创建物理对象。

反之亦然。在 WebSphere MQ 中，当您使用 WebSphere MQ Explorer 创建队列或主题时，您有机会定义 JMS 对象定义，前提是您已将 WMQ Explorer 配置为与存储托管对象的存储库通信。例如，您可以使用 LDAP 来存储托管对象定义，将 WebSphere MQ Explorer 和 WAS 都指向 LDAP 目录并管理那里的所有 JMS 对象。

所以重申一下，在 WAS 中定义 JMS 对象只会创建目录条目，而不是实际的 WMQ 对象。这适用于您与 WAS 一起使用的任何外部 JMS 传输。

# python - Numpy 安装 API 版本不匹配

> ID：13132298
> 
> 赞同：0
> 
> 时间：2012-10-30T03:40:29.560
> 
> 标签：python, macos, numpy

我想在 Mac OS X Lion 上安装 numpy、pylab、scipy 和 ipython。我安装了以下内容：

```
python-2.7.3-macosx10.6.dmg, 
numpy-1.6.1-py2.7-python.org-macosx10.6.dmg, 
matplotlib-1.1.1-py2.7-python.org-macosx10.6.dmg, 
scipy-0.11.0-py2.7-python.org-macosx10.6.dmg 
```

并获得以下消息：

```
/var/folders/hm/bv37669175j2dvn_f87t4zcc0000gn/T/Cleanup\ At\ Startup/statistics_intro-373260522.639.py.command ; exit;
RuntimeError: module compiled against API version 6 but this version of numpy is 4
Traceback (most recent call last):
...
    from transforms import Bbox, IdentityTransform, TransformedBbox, TransformedPath
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/transforms.py", line 34, in <module>
    from matplotlib._path import affine_transform
ImportError: numpy.core.multiarray failed to import 
```

许多用户似乎能够通过删除 python 并重新安装来让 numpy 工作。我在`/user/bin`and中这样做了`/Library`，但我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T11:22:05.203

The best way to do it, is using homebrew: [http://mxcl.github.com/homebrew/](http://mxcl.github.com/homebrew/)

Basically, to get what you want, here are the steps, as root in a shell:

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go)"
brew install python # install python2.7
pip install numpy matplotlib scipy 
```

and it should just work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T11:12:42.640

依赖`.dmg`是要求失望，因为您的个人设置可能与准备`.dmg`. 你真的应该考虑从它们的来源安装不同的包。下载你想要的档案，解压缩它们，然后在每个包中运行一个

```
python setup.py install --user 
```

（`--user`确保软件包将安装在`~/.local`）。当然，您会希望从 开始`numpy`，然后`scipy`，然后`matplotlib`，然后`ipython`。然后，只需确保添加`~/.local`到您的`PYTHONPATH`.

手术虽然有点长，但应该相对无痛。不过，请确保您拥有编译所需的所有工具（`XCode`这是必须的，您还需要一个 fortran 编译器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T03:43:34.133

谢谢大家。我有 Mac OS (1) 从 Lion 升级到 Mountain Lion (2) 更新 Python (3) 让它指向 Python27 而不是系统 Python。这并不能解释为什么 Lion 中的 Python 已损坏，但我不再收到错误消息！

# html - 如何避免在 CSS 中换行

> ID：13132305
> 
> 赞同：3
> 
> 时间：2012-10-30T03:41:37.280
> 
> 标签：html, css, css-float

我有一个正在构建的新网站，只要有空格，CSS就会强制h2标签内的任何文本换行。[这](http://www.chainedpayments.com/CardSpire/)是网站：

这就是问题所在：

[![](../Images/9ea41f22c07e5a2898c2e0f7dc01172c.png)](https://i.stack.imgur.com/1hQyA.png)

如果我将“Low Fees”放在一起而没有空格，甚至添加几个字符（“LowFeesABC”），它会保持在一起并且不会换行。我不太了解 CSS，不知道如何将文本放在一起。有任何想法吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-30T03:42:56.733

```
#topPanel h2 {
    white-space: nowrap;
} 
```

[https://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T06:49:07.833

它会换行，因为元素上设置了固定宽度，并且文本“LOW FEES”不适合该宽度。只需移除即可`width:90px`移除包装。

# python - python中返回的问题

> ID：13132308
> 
> 赞同：0
> 
> 时间：2012-10-30T03:41:50.480
> 
> 标签：python

```
####
# GCD calculator using euclidean algorithm
####

def euclid_gcd(x,y) :
    new_gcd = y
    remainder = x % y
    print x,y, new_gcd, remainder
    if(remainder != 0) :
        euclid_gcd(y,remainder)   
    else :
        print x,y, new_gcd, remainder
        return new_gcd

print 'x | y | new_gcd | remainder'
print euclid_gcd(252,198) 
```

但是，当我运行此代码时，它会返回此...

```
x | y | new_gcd | remainder
252 198 198 54
198 54 54 36
54 36 36 18
36 18 18 0
36 18 18 0
None 
```

在这种情况下它应该返回 18 但它没有返回我哪里出错了一切似乎都遵循逻辑步骤？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T03:43:14.220

你应该这样做`return euclid_gcd(y,remainder)`。

您忘记在此处返回递归结果：

```
if(remainder != 0) :
    euclid_gcd(y,remainder) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:53:25.150

解决问题的另一种方法

```
def euclid_gcd(x, y):
    new_gcd = y
    remainder = x % y
    print x, y, new_gcd, remainder
    if remainder != 0:
        new_gcd = euclid_gcd(y, remainder)   
    print x, y, new_gcd, remainder
    return new_gcd 
```

我建议这样做是因为`new_gcd`如果您只将变量初始化为`y`

你得到的原因是因为如果函数没有显式返回任何东西`None`，Python 会隐式返回`None`

# ios - 带有 ViewWillLayoutSubview 的 IOS 动画

> ID：13132321
> 
> 赞同：2
> 
> 时间：2012-10-30T03:43:11.803
> 
> 标签：ios

我在我的内部有这个动画，`viewController`可以缩小并向下滑动我的菜单。

```
-(void)dismissMenuWithAnimation
{
    CGRect originalFrame = self.view.frame;
    [UIView animateWithDuration:2
                     animations:^{
                         self.view.frame = CGRectMake(originalFrame.origin.x,originalFrame.origin.y+originalFrame.size.height,originalFrame.size.width,10);
                     }
                     completion:^(BOOL finished){
                         [self.view removeFromSuperview];
                         self.view.frame = originalFrame;
                     }];
} 
```

在同一内部`viewController`，我正在覆盖`viewWillLayoutSubviews`：

```
-(void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];

    CGRect viewBounds = self.view.bounds;
    self.subView1.frame = CGRectMake(self.menuItemMidPosition,viewBounds.size.height-SUBVIEW1_HEIGHT,SUBVIEW1_WIDTH,SUBVIEW1_HEIGHT);

} 
```

我有几个子视图，它们的框架是在这个`viewWillLayoutSubviews`方法中设置的。没有在 viewDidLoad 中设置它，因为那时框架仍然不正确。

问题是，当我关闭菜单时，首先调用动画块，并且不知何故 self.view.frame 立即设置为高度 10。（减少的帧）。当它到达 viewWillLayoutSubviews 时，边界高度为 10。这导致我的其他子视图显示不正确。

这似乎很愚蠢，但我不知道如何解决这个问题。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-28T13:21:53.360

我刚遇到和作者一样的问题。虽然这个问题很老，但我会发布我的解决方案，希望有人会像我一样碰到这个问题。

该**解决方案**非常简单，完全类似于基于自动布局的动画：

```
UIView.animate(
  withDuration: 0.2,
  delay: 0,
  options: .curveEaseInOut,
  animations: {
    // This will launch viewWillLayoutSubviews!
    self.view.setNeedsLayout()
    self.view.layoutIfNeeded()
},
  completion: nil) 
```

和 Objective-C 版本：

```
[UIView animateWithDuration:0.2
                    delay:0
                  options:UIViewAnimationOptionCurveEaseInOut
               animations:^{
                 // This will launch viewWillLayoutSubviews!
                 [self.view setNeedsLayout];
                 [self.view layoutIfNeeded];
               }
               completion:nil]; 
```

即使我们在 2017 年有自动布局引擎，我也喜欢完全程序化的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T02:39:37.003

我自己的解决方案是根本不使用 viewWillLayoutSubviews。我只是使用自动调整大小的蒙版来确保框架正确调整大小。

# matlab - 在matlab中比较两个不相等的列矩阵而不使用for循环

> ID：13132323
> 
> 赞同：2
> 
> 时间：2012-10-30T03:43:12.997
> 
> 标签：matlab

我想比较两列矩阵：比如

```
a=[1;2;2;3;4;4;5;6] 
b=[2;4;8] 
```

并获得类似的输出

```
d=[0;1;1;0;1;1;0;0] 
```

这是相同数量的矩阵行数`a`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T04:27:40.303

[`ismember`](http://www.mathworks.com/help/matlab/ref/ismember.html)正是您所需要的。尝试：

```
 c=ismember(a,b) 
```

# c++ - 调试我的程序

> ID：13132331
> 
> 赞同：2
> 
> 时间：2012-10-30T03:43:54.890
> 
> 标签：c++, debugging

每次我运行此方法时，它都会返回我输出的错误消息。例如：用户输入：

```
display <table.txt> sortedby <ID> 
```

这是我希望用户在调用显示函数时使用的正确语法。但是当用户类型使用正确的语法显示时，它会输出我指定的错误消息。

```
 Syntax error: display <intable> sortedby <col_name> 
```

总的来说，在这种方法中，我希望表格以漂亮的格式显示。但它不会超过 if 语句。我想知道是否有一些我忽略的东西可能会返回我的 error_message。

```
 void display(Lexer lexer) {
  Table table; // create a table from the created table class
  vector<Token> tokvec = lexer.tokenize();

// expect [IDENT | STRING] sortedby IDENT
 if (tokvec.size() != 4 ||
    (tokvec[0].type != IDENT && tokvec[1].type != STRING) ||
    tokvec[2].value != "sortedby" || tokvec[3].type != IDENT){
    error_return("Syntax error: display <intable> sortedby <col_name>");
    return;
 }

    string fn = tokvec[1].value; // name of the file
    string col_name = tokvec[3].value;
    table.set_input(fn);
    table.scan_input();
    table.set_index(col_name);
    table.sort();
    table.display(); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:29:49.287

我建议您打印出 if 语句中比较的每个值。其中一个是真的，而它应该是假的，所以你需要找出它是哪一个。完成此操作后，找出不应该出现的值，并将错误追溯到其来源。

像这样的东西：

```
cout << tokvec.size() <<  " doesn't equal " << 4 << " - " << tokvec.size() != 4 << endl;
cout << tokvec[0].type << " doesn't equal " << IDENT << " - " << tokvec[0].type != IDENT << endl; 
```

等等。

这将打印出每个正在做出的陈述，然后是它是否正确。它应该清楚问题出在哪里。

# c# - 便携式区域具有相同的控制器/文件夹

> ID：13132334
> 
> 赞同：1
> 
> 时间：2012-10-30T03:44:03.660
> 
> 标签：c#, asp.net-mvc-3, mvccontrib, portable-areas

我正在使用 MVC 3 和 MVC Contrib 来拥有便携式区域。问题是，便携式区域具有相似的视图（例如主页、用户管理...）。

例如，每个可移植区域都有一个 Home 视图 (Views/Home/Index.cshtml) 和一个 Home Controller (Controllers/Home.cs)。设置路由以便访问该页面，我将转到 MySite/PortableAreaName/Controller/View。

问题是它只加载第一个便携式区域的主页和用户管理页面。它首先找到该视图，然后加载它，而不考虑 URL 中指定的区域。

我可以为所有内容添加前缀（例如，Area1Home、Area1UserManagement），但我宁愿找到一个更具可扩展性的解决方案。如果我们得到 50 多个可移植区域，每个区域有 10 个视图，我们要么必须跟踪我们使用的视图名称，要么为每个视图添加前缀。

有什么建议么？如果您需要更多信息，请告诉我。

**更新 1 - 没有工作**

使用 twang 提供的文章解决，并将以下代码添加到主项目（链接文章中的“PortableAreas”）。

文章：[http ://elegantcode.com/2012/04/06/mvc-portable-areas/](http://elegantcode.com/2012/04/06/mvc-portable-areas/)

**主项目 > Global.asax.cs**

```
protected void Application_Start()
{
    // ...
    AreaRegistration.RegisterAllAreas();
    PortableAreaRegistration.RegisterEmbeddedViewEngine();
    RegisterGlobalFilters(GlobalFilters.Filters);
    RegisterRoutes(RouteTable.Routes);
    // ...
}

public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

    routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Login", action = "Index", id = UrlParameter.Optional },
        new string[] { "PortableAreas.Controllers" } // main project namespace
    );
} 
```

**便携式区域 > MyPortableAreaRegistration.cs**

```
public class MyPortableAreaRegistration : PortableAreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "MyPortableArea";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context, IApplicationBus bus)
    {
        RegisterRoutes(context);
        RegisterAreaEmbeddedResources();
    }

    private void RegisterRoutes(AreaRegistrationContext context)
    {
        context.MapRoute(
            AreaName + "_default",
            base.AreaRoutePrefix + "/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional },
            new[] { "MyPortableArea.Controllers", "MvcContrib" }
        );
    }
} 
```

据我了解，以下位置是资源的默认位置：

*   MyPortableArea/内容/图像
*   MyPortableArea/脚本

只要您将资源保存在这些文件夹中，就不应注册它们。

**更新 2**

之前的修复不起作用。即使使用上面的代码，它有时仍然会加载错误的视图、资源等。有人知道如何解决这个问题吗？

**当我调试时，它转到正确的控制器和该控制器中的正确视图，但加载了错误的视图（例如，使其进入区域 2 的控制器和区域 2 的主页方法，但加载区域 1 的主页。**

例如，我有 2 个便携式区域，但它总是加载第一个

MyPortableArea1/Controls/Home、MyPortableArea1/Scripts/Views/Home/index.js MyPortableArea2/Controls/Home、MyPortableArea2/Scripts/Views/Home/index.js

我认为这是因为它一次注册了所有这些？然后，当它找到路由的匹配项时，它使用第一个匹配项（有时是错误的）。

**更新 3**

单步执行代码后，我的布局中的部分似乎没有正确加载。例如，它到达 MyPortableArea2 的 HomeController > Index()，加载布局，然后布局在 @RenderBody() 部分加载 MyPortableArea1 的内容。

**更新 4**

[从http://mvccontrib.codeplex.com/](http://mvccontrib.codeplex.com/)更新到最新版本的 MvcContrib 。这没有用。

**更新 5**

所以我做了一个小测试，弄清楚为什么它加载了错误的页面：它根本找不到区域。就好像它甚至不在系统中一样！

例如 PortableArea1/Home/Index

```
public ActionResult Index()
{
    return View("~/Areas/PortableArea1/Views/Home/Index.cshtml");
} 
```

例如 PortableArea2/Home/Index

```
public ActionResult Index()
{
    return View("~/Areas/PortableArea2/Views/Home/Index.cshtml");
} 
```

当它加载错误的页面时，我现在收到一条错误消息，提示找不到视图。为什么它不加载我的便携式区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:46:00.630

您可能想要覆盖 RegisterAreas()，并为每个区域实现 RegisterRoutes()。

这是一篇很好的文章解释得很好：[http ://elegantcode.com/2012/04/06/mvc-portable-areas/](http://elegantcode.com/2012/04/06/mvc-portable-areas/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T22:37:05.040

这可能是您的区域`_ViewStart.cshtml`文件的结果。这是一个鲜为人知的文件，其中包含一个指令：

```
@{
 Layout = "~/someurl";
} 
```

这将定义为该区域内的每个视图加载基本页面的位置。该文件与`web.config`该区域的文件在同一范围内。

# symfony - 在表单中重复相同的字段

> ID：13132338
> 
> 赞同：1
> 
> 时间：2012-10-30T03:44:33.610
> 
> 标签：symfony, symfony-forms, symfony-2.1

在表单中重复相同表单域的最佳方式是什么？

* * *

我希望用户提交多`Name / Phone number`行。

```
class contactType extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder
            ->add('name1', 'text')
            ->add('phone1', 'text');

            ->add('name2', 'text')
            ->add('phone2', 'text');

            ->add('name3', 'text')
            ->add('phone3', 'text');

            ....etc
    }
} 
```

理想情况下，我希望用户输入任意数量的字段......

1-有没有办法避免在这里重复代码？

2- 我应该如何将这些姓名/电话存储在基础对象中？

3- 我可以将它存储为一个数组，但仍然应用一些验证规则吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:59:39.033

尝试使用：

```
$builder->add('phones', 'collection', array('type' => new PhoneType())); 
```

在`'allow_add' => true`您的表单生成器中。

查看[如何嵌入表单集合](http://symfony.com/doc/current/cookbook/form/form_collections.html)手册页面。

# qt - 当我尝试加载 DLL 时，我应该将 CPP 文件添加到 *.pro 中吗

> ID：13132340
> 
> 赞同：1
> 
> 时间：2012-10-30T03:44:35.530
> 
> 标签：qt, dll, dllimport, dllexport

我需要将一些源代码编译成 DLL，并将其加载到其他项目中。我有一个条目叫

```
extern "C" LTCPOS_LSHARED_EXPORT tcpClient_Os* getClientInst(VhostInfo hostInfo, CtcpOpt *tcpOpt, QObject *parent = 0); 
```

“tcpClient_OS”的类型是自定义类。当我在不同的项目中使用 QLibrary 加载 DLL 时，似乎我必须将**源文件（cpp 文件）**添加到 *.pro 中，以使项目编译时没有错误。为什么？

使用返回自定义类指针的函数构建 DLL 的正常例程是什么，如何加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:03:13.783

不熟悉构建 qt 的东西，但在 Windows 中，我们通常需要一个 lib 和一些头文件来调用另一个 dll 中的东西。我们还有 LoadLibrary、GetProcAddress 用于执行编译时未知的内容。

看起来它与构建 qt 的东西非常相似。编译你的 dll，除了 dll 本身它应该生成一个 lib。在用于引用项目的项目配置中，需要一个带有 lib 路径的 LIBS +=。

这是我在 QLibrary 上找到的链接，它是 Windows LoadLibrary/GetProcAddress 和 dlopen/dlsym [http://tufangorel.blogspot.com/2011/11/call-symbol-from-shared-object-file-dll-with的抽象-qlibrary.html](http://tufangorel.blogspot.com/2011/11/call-symbol-from-shared-object-file-dll-with-qlibrary.html)

# jquery - 如何在 td (jquery) 中更改单词的颜色

> ID：13132365
> 
> 赞同：1
> 
> 时间：2012-10-30T03:49:05.207
> 
> 标签：jquery, html

如何将`Weekend's`颜色变为**蓝色**？

我正在使用`razor`，我有一个标志枚举，可以直接转换为这样的字符串：

```
var a = 1|2|6|7;
var weekdayStr=a.ToString();//weekdayStr=="Monday, Tuesday, Weekend" 
```

和html：

```
<table>
<tr>
<td>Monday, Tuesday, Weekend</td></tr></table> 
```

如何只更改一个单词的颜色，而不是 td 中的所有文本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T03:58:05.723

您必须手动添加一个 html 标记，或者找到 td 并使用 jQuery 对其进行修改。

```
$('td').html($('td').html().replace('Weekend', '<span>Weekend</span>'));
$('td span').css('color', 'blue'); 
```

[像这样的小提琴](http://jsfiddle.net/scrimothy/gFppd/)

更新：

[新的 jsFiddle](http://jsfiddle.net/scrimothy/gFppd/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T03:57:43.027

```
$(document).ready(function(){
  var build = '';
  var data = $('#yourtd_id').html().split(',');
  $.each(data,function(v){
         if(v == 'Weekend'){
          build+='<span style="color:blue">'+v+'</span>,';
         }else{
          build+='<span>'+v+'</span>,';
         }

  });  
$('#yourtd_id').html(build)

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T04:33:33.733

```
 $.fn.replaceText = function( search, replace, text_only ) {
return this.each(function(){
  var node = this.firstChild,
    val,
    new_val,
    remove = [];
  if ( node ) {
    do {
      if ( node.nodeType === 3 ) {
        val = node.nodeValue;
        new_val = val.replace( search, replace );
        if ( new_val !== val ) {
          if ( !text_only && /</.test( new_val ) ) {
            $(node).before( new_val );
            remove.push( node );
          } else {
            node.nodeValue = new_val;
          }
        }
      }
    } while ( node = node.nextSibling );
  }
  remove.length && $(remove).remove();
});
};

$("td").replaceText( /Weekend/g, "<span>Weekend</span>" );  
$('td span').css('color', 'blue'); 
```

[参考自](http://net.tutsplus.com/tutorials/javascript-ajax/spotlight-jquery-replacetext/)

# objective-c - 用于内置搜索的子类 UITableView

> ID：13132374
> 
> 赞同：0
> 
> 时间：2012-10-30T03:50:12.693
> 
> 标签：objective-c, ios, uitableview

尝试将 UITableView 子类化以具有内置搜索功能是否可能（或可取）？

我想这样做有两个原因：

**重用**：我可以在项目的多个地方使用不同的数据源使用相同的子类。 **更简洁的代码**：它会整理我的视图控制器。实现搜索的所有管道都将巧妙地封装在子类实现中。

任何想法将如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T03:58:09.063

利用[`UISearchDisplayController`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchDisplayController_Class/Reference/Reference.html)

来自苹果文档，

> 搜索显示控制器管理搜索栏和表视图的显示，该表视图显示由另一个视图控制器管理的数据的搜索结果。
> 
> 您使用搜索栏和视图控制器初始化搜索显示控制器，该控制器负责管理要搜索的原始内容。当用户开始搜索时，搜索显示控制器负责将搜索界面叠加在原始视图控制器的视图上并显示搜索结果。结果显示在由搜索显示控制器创建的表格视图中。除了原来的视图控制器，逻辑上还有其他四个角色。这些通常都由同一个对象播放，通常是原始视图控制器本身。

它可以实现为，

```
searchController = [[UISearchDisplayController alloc]
                         initWithSearchBar:searchBar contentsController:self];
searchController.delegate = self;
searchController.searchResultsDataSource = self;
searchController.searchResultsDelegate = self; 
```

`UISearchDisplayController`本身封装了所有正常的搜索功能。如果您愿意，可以将其子类化以实现您计划做的任何事情。您可以在任何课程中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:58:27.770

我想我应该要求澄清一下：您是希望用户的搜索简单地滚动到表中的一行，还是希望它过滤行，只显示与搜索词匹配的行？

假设您希望它过滤行...

创建一个子类来执行此操作会非常复杂`UITableView`，因为您需要在“用户”数据源和委托之前插入您自己的私有数据源`UITableViewDataSource`和`UITableViewDelegate`委托。

它也可能相当低效，具体取决于您如何获取表格视图的数据。如果表视图可以有数千行，并且它们来自（例如）SQLite 数据库或 Core Data，则数据源可以更有效地搜索匹配行。在表格视图中，您别无选择，只能逐行迭代，检查每行是否匹配。或者您必须扩展数据源协议以为表格视图提供一种将搜索字符串传递给数据源的方法......这似乎违背了将搜索放在表格视图中的目标。

如果您告诉我们更多关于您的各种表格视图的数据来自何处，我们或许可以为您提供更好的建议。

# java - 如何使包裹在 JScrollPane 中的 JTextPane 缩小以适合文本

> ID：13132375
> 
> 赞同：1
> 
> 时间：2012-10-30T03:50:13.973
> 
> 标签：java, swing, size, jscrollpane, jtextpane

我有一个`JTextPane`HTML 文本。

我用过`GroupLayout`（使用WindowBuilder）。

我已将 my 的最小尺寸设置`JFrame`为 800x600，因此用户无法使其小于该尺寸。

该应用程序有一个很大的滚动`JPanel`整个窗口的大小。面板的顶部由`JTextPane`包裹在`JScrollPane`. 我禁用了滚动条并调整大小`JScrollPane`以使整个文本可见。

在组布局中，`JScrollPane`设置为在垂直方向保持不变，但在水平方向设置大小。

我的问题是，当用户使窗口变大时，窗口`JScrollPane`也会扩大，但现在文本窗格底部留下了一个很大的空白。有没有办法可以`JTextPane`缩小以适应其内容。

此外，如果您建议不同的布局，我愿意尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T12:47:56.970

我使用[`TextPanePerfectSize`](https://stackoverflow.com/a/3318949/261156)来自@camickr 的这个例子来解决类似的问题。该示例使用`validate()`和`pack()`来调整到首选大小。您也许可以根据自己的情况进行调整。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T08:22:43.557

看看[SpringLayout](http://docs.oracle.com/javase/6/docs/api/javax/swing/SpringLayout.html)。它使您可以更好地控制组件的定位。如果遇到困难，请查看[SpringLayout 教程。](http://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html)

在您的情况下，诀窍是将 JScrollPane 的底部（南）绑定到屏幕的顶部（北）。

# html - 在 HTML5 中将带有文本的图像分组到不可自动换行的组中

> ID：13132377
> 
> 赞同：0
> 
> 时间：2012-10-30T03:50:24.467
> 
> 标签：html

在 HTML 中，是否有可能有一组不能被自动换行破坏的图像和文本？即要么一起呈现在一行上，要么一起包裹到下一行？

这可以通过使用单词来完成，`&nbsp;`但我想在该组中添加一个字母大小的小图标。

例子：

```
<p>
  Some some normal, wrappable text 
  <span class="unbreakable"><a><img src="logo.png"></a>&nsbp;<a>Product&nbsp;Name</a></span>
</p> 
```

注意。为简洁起见，我已从`<a>`标签中删除了属性。

目前，“logo.png”图像可能出现在一行，“产品名称”出现在下一行。

这段代码是可调整大小元素的一部分，有时它能够在 1 行上呈现，其他则需要，所以我不想在不需要`<br>`的时候强制 a。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:09:50.317

从评论扩展：

当您想将徽标和产品名称组合为一个整体“不可包装”部分时，您可以使用`white-space:nowrap`：

[小提琴](http://jsfiddle.net/7Z3VV/1/)

```
.unbreakable
{
  white-space:nowrap;
} 
```

# jquery - 如何使用 jquery 从 td 中删除表行基础？

> ID：13132379
> 
> 赞同：-3
> 
> 时间：2012-10-30T03:50:53.787
> 
> 标签：jquery, tablerow

例如我有这张表：

```
id  name action
1   john x
2   doe  x 
```

如果我在 id 为 1 时单击行中的 x ，它将被删除，我该怎么做？

```
$('.btnDeleteitem').live('click', function() {
            //
            $.ajax({
                url: 'wp-content/themes/twentyeleven-child/Delete.Item.php',
                type: 'post',
                data: { asin: $(this).attr('alt') },
                success:function(){
                    //
                }
            }); 
```

注意：表中的数据来自数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:58:18.600

小提琴 - [http://jsfiddle.net/tariqulazam/s9cwt/](http://jsfiddle.net/tariqulazam/s9cwt/)

**HTML**

```
<table>
<tr>
    <th>Id</th>
    <th>Name</th>
    <th>Action</th>
</tr>
<tr>
    <td>1</td>
    <td>John</td>
    <td>X</td>
</tr>
<tr>
    <td>2</td>
    <td>Doe</td>
    <td>X</td>
</tr>
</table>​ 
```

**查询**

```
$(document).ready(function(){
    $("td:contains('X')").click(function(){
      $(this).parent('tr').remove();
    });
});​ 
```

如果你只想删除 id=1 的行，你可以试试这个

```
$(document).ready(function(){
    $("td:contains('X')").click(function(){
      if($(this).parent('tr').find('td').first().text()==1)
        $(this).parent('tr').remove();
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:53:45.300

假设您点击`x`了任何一行，这应该可以工作：

```
$(this).closest('tr').remove() 
```

当然，您可以尝试找出更快的方法:)。if `x`will always under `td`，你可以使用`parent`而不是`parents`太。

现在，如果你也想从数据库中删除它（正如评论中有人问的那样），你可以触发一个 ajax 调用。但是，您还需要获取行的 ID。为简单起见，您可以修改表格设计，例如：

```
<tr>
  <td class="recordID">1</td>
  <td>John</td>
  <td>X</td>
</tr>
<tr>
  <td class="recordID">1</td>
  <td>Doe</td>
  <td>X</td>
</tr> 
```

Javascript：

```
recordID = $(this).siblings('.recordID').text();
$(this).closest('tr').remove();
$.post("/deleteRecored?id=" + recordID, function(response){ 
  //handle your response here
}) 
```

# javascript - jQuery 验证：隐藏错误消息并更改无效字段背景颜色

> ID：13132381
> 
> 赞同：1
> 
> 时间：2012-10-30T03:51:21.710
> 
> 标签：javascript, jquery, forms, jquery-validate

这是一个[示例表格](http://docs.jquery.com/Plugins/Validation#Example)。
如何自定义表单，使其不显示任何错误消息，而是更改无效字段的背景颜色？

试过这个无济于事：

```
$("form").validate({
  errorPlacement: function(error, element) {
     $(element.error).css("background","red");
   }
 }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T07:51:54.183

你只需要两行 CSS：

```
label.error {display: none !important;}
.error {background: #F00;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:26:39.727

您可以通过处理`invalidHandler`validate 插件中的回调来做到这一点：

**代码：**

```
$('#commentForm').validate({
    invalidHandler: function() {
        setTimeout(customizeErrors, 200);
    }
});

function customizeErrors() {
    $('label.error').each(function() {
        $(this).prev().addClass('has-error');
        $(this).prev().attr('title', $(this).text());
    });
    $('label.error').remove();
} 
```

**演示：http:** [//jsfiddle.net/2LwTa/](http://jsfiddle.net/2LwTa/)

**注意：**理想情况下，错误消息不应*仅*是工具提示，因为这意味着仅使用键盘的人将永远看不到它。

# file - O_SYNC 是否意味着原子操作？

> ID：13132398
> 
> 赞同：0
> 
> 时间：2012-10-30T03:53:20.297
> 
> 标签：file, unix, atomic

I/O 函数是否使用`O_SYNC`原子？例如：

```
fd = open("user.data", O_RDONLY | O_SYNC);
pread(fd, &buf, sizeof(User), 100*sizeof(User)); 
```

在这种情况下，是`pread`原子的吗？注意：没有任何文件锁舔`flock`或`fcntl`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T06:10:33.577

原子就什么？

## 关于buf？

那么不，最有可能的数据将被操作系统以串行方式复制到您的程序中。其他线程一次可能会或可能不会看到更新块。如果要保护对 buf 的访问，则需要使用信号量或互斥锁来序列化对它的访问。这可能适用于非常小的读取，但您至少需要 100 字节，并且在任何情况下都不应依赖它。

## 关于文件描述符？

pread() 可以在同一个文件描述符上同时被多个线程使用。我想这可能就是它被设计的原因。当然，每个线程都需要自己的缓冲区来保存数据。

## 关于磁盘？

O_SYNC 对于读取并不是非常有用。当与写入一起使用时，O_SYNC 意味着在调用结束时，缓冲区中的数据现在被刷新。这可能意味着它存在于磁盘上，或者它可能意味着它已通过连接刷新。对于读取，您可能需要使用 O_RSYNC。O_RSYNC 将强制读取调用阻塞，直到任何所需的元数据更新完成。这方面的一个例子是记录“访问时间”的文件系统。

# ruby-on-rails - 销毁方法不起作用，而是显示方法实现（Rails）

> ID：13132402
> 
> 赞同：0
> 
> 时间：2012-10-30T03:53:35.573
> 
> 标签：ruby-on-rails, methods

我需要制作一个按钮来销毁对象。而不是破坏它显示字段

inex.html.erb

```
<%= link_to image_tag("/images/glossy_green_button.png"), device , { :html => { :method =>  :delete}, :controller => :devices, :action => 'destroy',:id => device.id, :onclick => 'return confirm(\'Are you sure?\');' }, :method => :turnon %> 
```

devices_controller.rb

```
def destroy
 @device = Device.find(params[:id])
 @device.destroy

  respond_to do |format|
   format.html { render action: "destroy" }
   format.json { head :no_content }
  end
 end 
```

路线.rb

```
device GET    /devices/:id(.:format)      devices#show
       PUT    /devices/:id(.:format)      devices#update
       DELETE /devices/:id(.:format)      devices#destroy 
```

欣赏我做错了什么的任何想法。谢谢你 D

更新：

```
<%= button_to "Delete", device ,  :method => :delete %> 
```

这很好用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:04:47.127

您使用的是哪个版本的 Rails？为什么你的`link_to`方法调用如此复杂？它可以简单地重写。尝试以下一种：

```
<%= link_to image_tag("/images/glossy_green_button.png"), device , :method => :delete,  :confirm => "Are you sure?" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:16:14.173

破坏性行为应作为表单提交执行 - [http://www.w3.org/2001/tag/doc/whenToUseGet.html#checklist](http://www.w3.org/2001/tag/doc/whenToUseGet.html#checklist)

请改用 button_to（传递 :delete 的 :method）并适当地设置按钮的样式。

或试试这个`<%= button_to "delete", your_object, :method=>:delete, :class=>:destroy %>`

# android - 应用程序因 TimerTask 和 AsyncTask 冻结

> ID：13132406
> 
> 赞同：0
> 
> 时间：2012-10-30T03:53:57.437
> 
> 标签：android, android-asynctask, timertask

我已经通过以下代码安排了`AsyncTask`使用`Timer`

```
public void toCallAsynchronous() {
    TimerTask doAsynchronousTask;
    final Handler handler = new Handler();
    Timer timer = new Timer();

    doAsynchronousTask = new TimerTask() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            handler.post(new Runnable() {
                public void run() {

                    try {
                        if(mLoggedIn)
                        {
                            DownloadRandomPicture   download = new DownloadRandomPicture(this, mApi, CLIENT_ID, mImage);
                            download.execute();
                        }
                    } catch (Exception e) {
                        // TODO Auto-generated catch block

                    }

                }
            });

        }

    };

    timer.schedule(doAsynchronousTask, 0,50000);//execute in every 50000 ms

}
 @Override
    protected Boolean doInBackground(Void... params) {
try {
        if (mCanceled) {
            return false;
        }

        // Get the metadata for a directory
        Entry dirent = mApi.metadata(mPath, 1000, null, true, null);

        if (!dirent.isDir || dirent.contents == null) {
            // It's not a directory, or there's nothing in it
            mErrorMsg = "File or empty directory";
            return false;
        }

        // Make a list of everything in it that we can get a thumbnail for
        ArrayList<Entry> thumbs = new ArrayList<Entry>();
        for (Entry ent: dirent.contents) {
            if (ent.thumbExists) {
                // Add it to the list of thumbs we can choose from
                thumbs.add(ent);
            }
        }

        if (mCanceled) {
            return false;
        }

        if (thumbs.size() == 0) {
            // No thumbs in that directory
            mErrorMsg = "No pictures in that directory";
            return false;
        }

        // Now pick a random one
        int index = (int)(Math.random() * thumbs.size());
        Entry ent = thumbs.get(index);
        String path = ent.path;
        mFileLen = ent.bytes;

        String cachePath = mContext.getCacheDir().getAbsolutePath() + "/" + IMAGE_FILE_NAME;
        try {
            mFos = new FileOutputStream(cachePath);
        } catch (FileNotFoundException e) {
            mErrorMsg = "Couldn't create a local file to store the image";
            return false;
        }

        // This downloads a smaller, thumbnail version of the file.  The
        // API to download the actual file is roughly the same.
        mApi.getThumbnail(path, mFos, ThumbSize.BESTFIT_960x640,
                ThumbFormat.JPEG, null);
        if (mCanceled) {
            return false;
        }

        mDrawable = Drawable.createFromPath(cachePath);
        // We must have a legitimate picture
        return true;

    } catch (DropboxUnlinkedException e) {
        // The AuthSession wasn't properly authenticated or user unlinked.
    } catch (DropboxPartialFileException e) {
        // We canceled the operation
        mErrorMsg = "Download canceled";
    } catch (DropboxServerException e) {
        // Server-side exception.  These are examples of what could happen,
        // but we don't do anything special with them here.
        if (e.error == DropboxServerException._304_NOT_MODIFIED) {
            // won't happen since we don't pass in revision with metadata
        } else if (e.error == DropboxServerException._401_UNAUTHORIZED) {
            // Unauthorized, so we should unlink them.  You may want to
            // automatically log the user out in this case.
        } else if (e.error == DropboxServerException._403_FORBIDDEN) {
            // Not allowed to access this
        } else if (e.error == DropboxServerException._404_NOT_FOUND) {
            // path not found (or if it was the thumbnail, can't be
            // thumbnailed)
        } else if (e.error == DropboxServerException._406_NOT_ACCEPTABLE) {
            // too many entries to return
        } else if (e.error == DropboxServerException._415_UNSUPPORTED_MEDIA) {
            // can't be thumbnailed
        } else if (e.error == DropboxServerException._507_INSUFFICIENT_STORAGE) {
            // user is over quota
        } else {
            // Something else
        }
        // This gets the Dropbox error, translated into the user's language
        mErrorMsg = e.body.userError;
        if (mErrorMsg == null) {
            mErrorMsg = e.body.error;
        }
    } catch (DropboxIOException e) {
        // Happens all the time, probably want to retry automatically.
        mErrorMsg = "Network error.  Try again.";
    } catch (DropboxParseException e) {
        // Probably due to Dropbox server restarting, should retry
        mErrorMsg = "Dropbox error.  Try again.";
    } catch (DropboxException e) {
        // Unknown error
        mErrorMsg = "Unknown error.  Try again.";
    }
    return false;
} 
```

我从`onCreate`我的活动中调用这个。我的异步任务基本上是从服务器下载一些数据。我的主要活动允许用户登录服务器，然后我去获取数据。我在这里做错了什么？关于它的任何想法

# themes - 在 Cappuccino 中自定义控件的外观

> ID：13132408
> 
> 赞同：1
> 
> 时间：2012-10-30T03:54:12.780
> 
> 标签：themes, cappuccino

我需要在屏幕底部制作一排按钮，放在看起来像工具栏的地方。但它应该有一个自定义的外观，即。自定义背景和悬停效果。我最初尝试自定义 CPSegmentedControl 但无法调整它的高度，因为它使用固定高度图形。现在我正在尝试一个工具栏，但无法弄清楚如何更改工具栏的背景纹理，因为它似乎是固定的。那么哪个 API 最适合这个呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:30:34.710

此位将为您更改 CPToolBar 背景：[https ://github.com/cappuccino/issues/blob/master/Client/AppController.j#L273](https://github.com/cappuccino/issues/blob/master/Client/AppController.j#L273)

如果你想自定义分段控件，你可以在这里找到代码：[https ://github.com/cappuccino/issues/blob/master/Client/AppController.j#L502](https://github.com/cappuccino/issues/blob/master/Client/AppController.j#L502)

# mysql - MySql 中的百分比登录

> ID：13132409
> 
> 赞同：7
> 
> 时间：2012-10-30T03:54:36.067
> 
> 标签：mysql

它也匹配空字符串，还是只匹配非空字符串？我一直试图找到一个参考，但没有成功。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T03:56:27.367

你为什么不自己试试看呢？无论如何，这里是您正在寻找的文档：

> 使用 LIKE，您可以在模式中使用以下两个通配符。
> 
> | 特点 | 描述 |
> | --- | --- |
> | % | 匹配任意数量的字符，甚至是零个字符 |
> | _ | 只匹配一个字符 |

[http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html#operator_like](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html#operator_like)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-30T03:59:17.630

看看下面的demo来解释一下

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/90ae1/2)

```
CREATE TABLE Table1(
  ID INT AUTO_INCREMENT,
  Val VARCHAR(50),
     PRIMARY KEY (id)
  );
INSERT INTO Table1 (Val) SELECT 'TEST';
INSERT INTO Table1 (Val) SELECT '';

SELECT *
FROM Table1
WHERE Val LIKE '%' 
```

同样来自[12.5.1。字符串比较函数](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)

```
% Matches any number of characters, even zero characters 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-20T12:55:56.613

这样一个没有答案的老问题，但显然在创建过程的上下文中 % 代表任何主机。

IE：

```
CREATE DEFINER=`root`@`%` PROCEDURE `*internalProcedureName*` 
```

*   HOST 的 % 通配符代表**任何主机**

参考：

*   [MySQL 8.0 创建过程](https://dev.mysql.com/doc/refman/8.0/en/create-procedure.html)- 虽然它没有说明 % 本身，但仅说明过程

# ada - Ada Actual 必须是 out 模式下的变量

> ID：13132419
> 
> 赞同：1
> 
> 时间：2012-10-30T03:55:53.180
> 
> 标签：ada

我正在 Ada 中为数据结构和算法课程制作一个程序。

我目前的问题是错误*“这个”的实际值必须是一个变量”* 我环顾四周，我读到它是因为*在 out*模式下，但我并不完全理解为什么它会发生在我身上。

我看到的示例是有道理的，但我想因为这是我的编码，我只是没有看到它？

```
Procedure AddUnmarked(g:Grid; this:Linked_List_Coord.List_Type; c:Cell) is
      cNorth : Cell := getCell(g, North(c));
      cEast  : Cell := getCell(g, East(c));
      cSouth : Cell := getCell(g, South(c));
      cWest  : Cell := getCell(g, West(c));
   Begin
         if CellExists(g, cNorth) and not cNorth.IsMarked then
            Linked_List_Coord.Append(this, cNorth.Coords);
         elsif CellExists(g, cEast) and not cEast.IsMarked  then
            Linked_List_Coord.Append(this, cEast.Coords);
         elsif CellExists(g, cSouth) and not cSouth.IsMarked  then
            Linked_List_Coord.Append(this, cSouth.Coords);
         elsif CellExists(g, cWest) and not cWest.IsMarked  then
            Linked_List_Coord.Append(this, cWest.Coords);
         end if;
   End AddUnmarked; 
```

在“this”被传递给函数之前，它是我自定义类型 Coord（2 个整数）的 Linked_List。在我的代码中将列表传递给上面的函数之前，它已被初始化并添加了一个坐标对。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T03:58:09.517

这意味着列表不能被修改，除非您将它作为可修改参数传递，即`in out`.

详细地说，`LIST_TYPE`可以将其视为标记类型对象的句柄；为了确保它`LIST_TYPE`有效，您需要通过`in`参数将其传递（或创建/操作本地对象），但要传递您的结果，您需要一个`out`参数。

因此，为了对已经存在的对象进行操作{并返回结果}，您需要`in out`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T12:01:01.847

在 Ada 中，子程序参数都有与之相关的使用模式。可用的模式是`in`、`out`和`in out`*。如果您没有指定模式（就像您没有在代码中一样），那么它默认为`in`only。

这些模式指定您可以在子程序内部使用该参数做什么。如果你想读取从例程外部传入的值，它必须有`in`它。如果你想写入参数（和/或可能让它在例程之外读取），那么它必须有`out`它。

由于您的任何参数都没有`out`，因此您无法写入其中任何一个。

（* - 还有另一种可能的模式：`access`，但这是一个高级主题）。

# mysql - 在 MySql 5.5.27 中创建触发器时出错

> ID：13132420
> 
> 赞同：0
> 
> 时间：2012-10-30T03:56:02.280
> 
> 标签：mysql, triggers

我将在 xampp 中创建一个触发器。

```
CREATE TRIGGER testref BEFORE INSERT ON test1
FOR EACH ROW 
BEGIN
INSERT INTO test2 SET a2 = NEW.a1;
DELETE FROM test3 WHERE a3 = NEW.a1;
UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
END; 
```

但我有错误：

```
CREATE TRIGGER testref BEFORE INSERT ON test1
    FOR EACH
    ROW
    BEGIN
    INSERT INTO test2
    SET a2 = NEW.a1; 
```

* * *

```
MySQL said: Documentation
#1064 - You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version
for the right syntax to use near '' at line 4 
```

之前，我创建了 4 个表：

```
CREATE TABLE test1(a1 INT);
CREATE TABLE test2(a2 INT);
CREATE TABLE test3(a3 INT NOT NULL AUTO_INCREMENT PRIMARY KEY);
CREATE TABLE test4(
  a4 INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  b4 INT DEFAULT 0
); 
```

请帮我。十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T06:53:44.607

使用以下创建触发器

```
delimiter |
CREATE TRIGGER testref BEFORE INSERT ON test1
FOR EACH ROW 
BEGIN
INSERT INTO test2 SET a2 = NEW.a1;
DELETE FROM test3 WHERE a3 = NEW.a1;
UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
END;
| 
```

那就是......你必须使用分隔符..

分隔符用于定义查询的结束。默认情况下它是半列(;)。这里我们使用 DELIMITER 命令来更改默认分隔符，以便我们可以使用 ';' insdie 触发器定义

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T03:58:43.263

首先更改分隔符，否则过程中的分号会破坏语法。请参阅本页中途[关于在 MySQL 文档中创建过程](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)的示例（复制如下以节省您的时间）。

```
mysql> delimiter //

mysql> CREATE PROCEDURE simpleproc (OUT param1 INT)
    -> BEGIN
    ->   SELECT COUNT(*) INTO param1 FROM t;
    -> END//
Query OK, 0 rows affected (0.00 sec)

mysql> delimiter ;

mysql> CALL simpleproc(@a);
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @a;
+------+
| @a   |
+------+
| 3    |
+------+
1 row in set (0.00 sec) 
```

**更新：也许以下...**

```
DELIMITER //
CREATE TRIGGER testref BEFORE INSERT ON test1
FOR EACH ROW 
BEGIN
INSERT INTO test2 SET a2 = NEW.a1;
DELETE FROM test3 WHERE a3 = NEW.a1;
UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
END//
DELIMITER ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:33:35.237

看看你的 phpmyadmin 版本中是否有 DILIMITER 字段，就在 SQL 编辑器的下方。在那里设置你的分隔符，例如 - '$$'，然后编写这个 SQL 代码 -

```
CREATE TRIGGER testref BEFORE INSERT ON test1
FOR EACH ROW 
BEGIN
INSERT INTO test2 SET a2 = NEW.a1;
DELETE FROM test3 WHERE a3 = NEW.a1;
UPDATE test4 SET b4 = b4 + 1 WHERE a4 = NEW.a1;
END$$ 
```

如果您的 phpmyadmin 没有此选项（它可以在旧版本上），并且如果可以使用其他工具连接到服务器，请尝试使用其他 MySQL 客户端，例如 - [dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)（免费快速版）。

# c# - 在 C# 中是否有用于包含预定随机数的特定代码？

> ID：13132423
> 
> 赞同：2
> 
> 时间：2012-10-30T03:56:12.557
> 
> 标签：c#

我完成了我的掷骰子程序，并一直在这里和那里进行调整，我的程序目前允许用户随意掷骰子，但是，我尝试使用不同的代码来让玩家只被允许某些在他们收到他们已经输掉所有钱的消息之前的滚动数，例如我的游戏应该预先确定一个随机数让我们说 9，在 9 次滚动后他们收到消息，我重置所有内容并结束游戏。我是新手 :(

* * *

来自评论的代码

```
private void button1_Click(object sender, EventArgs e) 
{ 
    rollagainLabel.Visible = true; 
    Random rand = new Random(); 
    roll1 = rand.Next(6) + 1; 
    int value = 100; 
    int sum = (roll1 * value); 
    runningTotal += sum; 
    totalmoneyLabel.Text = runningTotal.ToString("c"); 
    int maxRolls = rand.Next(5); 
    for (int i = 0; i < maxRolls; i++) 
        if (roll1 == 1) 
        {
            diceBox1.Image = GAME.Properties.Resources._1Die; 
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T03:58:55.710

只需在程序开始时计算数字并将其存储在变量中，然后计算玩家滚动的次数并检查它是否达到先前计算的数字。

```
Random rand = new Random();
int maxRolls = rand.Next(10); // 10, or whatever you want the max possible limit to be

for(int i = 0; i < maxRolls; i++)
{
    roll(); // obviously this is not actual code to be used, but it gives you the structure. each roll goes inside this loop.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:43:25.013

我认为您想要做的是在 Page_Load 事件中生成您的随机数。之后，将其保存到会话中，以便您可以在 Button_Click 事件中使用它进行比较。

```
 Random rand = new Random();
    Session["maxRolls"] = rand.Next(10); 
```

之后，您可以通过这种方式检索值

```
 int maxRolls = (int)Session["maxRolls"]; 
```

**编辑**

这是将所有内容联系在一起的示例代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        int minAllowableRolls = 1;
        int maxAllowableRolls = 10;
        Random rand = new Random();
        Session["maxRolls"] = rand.Next(maxAllowableRolls - minAllowableRolls) + minAllowableRolls;
        Session["rollCount"] = 0;
        Session["runningTotal"] = 0;
    }
}
protected void Button1_Click(object sender, EventArgs e)
{
    int maxRolls = (int)Session["maxRolls"];
    int rollCount = (int)Session["rollCount"];
    int runningTotal = (int)Session["runningTotal"];

    rollCount++;
    if (rollCount < maxRolls)
    {
        Random rand = new Random();
        runningTotal += rand.Next(6) + 1;
        Label1.Text = runningTotal.ToString();
    }
    else
    {
        // Game has ended
    }
    Session["rollCount"] = rollCount;
    Session["runningTotal"] = runningTotal;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:24:21.167

这应该为您解决问题，我正在检查 maxRolls 是否等于零，然后创建一个新的随机数，然后我正在检查 rollCount 是否等于 maxRolls 并重置所有内容。

```
public partial class Form1 : Form
{
    int runningTotal;
    int roll1;
    int maxRolls;
    int rollCount;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        if (maxRolls == 0)
        {
            Random getMax = new Random();
            rollagainLabel.Visible = false;
            maxRolls = getMax.Next(10) ;
        }
        else 
            if(rollCount >= maxRolls)
            {
                maxRolls = 0;
                rollagainLabel.Visible = true;
                rollCount = 0;
                runningTotal = 0;
                totalmoneyLabel.Text = "$0.0";
                return; 
            }

        Random rand = new Random();
        roll1 = rand.Next(6) + 1;
        int value = 100;
        int sum = (roll1 * value);
        runningTotal += sum;
        totalmoneyLabel.Text = runningTotal.ToString("c");
        rollCount += 1;

        if (roll1 == 1)
        {
                //diceBox1.Image = GAME.Properties.Resources._1Die;
        }

    }
} 
```

# java - 使用带有 if 块的 userID 启动 Intent

> ID：13132424
> 
> 赞同：0
> 
> 时间：2012-10-30T03:56:12.573
> 
> 标签：java, android

我有一个不会捕获 if 块的活动类。因为我是初学者，所以我想不出任何其他方法来捕获给定的 userID("001") 以在 Splash Thread 之后启动特定的意图 (AdminTab)。

有人可以帮我指出我做错了什么或用一些示例代码给我建议吗？谢谢！

公共类 Splash 扩展 Activity{

```
@Override
protected void onCreate(Bundle savedInstanceState) {

    final UserFunctions userFunction = new UserFunctions();

    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    Thread timer = new Thread(){

    public void run(){

    String id = "";
    id = userFunction.getID(getApplicationContext());

    try{
        sleep(1000);
        //Should open AdminTab if user id is "001"      
        if("001".equals(id)){

        Intent i = new Intent(getApplicationContext(), 
                    AdminTab.class);

                    startActivity(i);

        }else{

        Intent i = new Intent(getApplicationContext(), 
                    UserTab.class);

                    startActivity(i);
        }

        } catch (InterruptedException e){
        e.printStackTrace();
        }finally {

        }
    }

    };

    timer.start();
} 
```

这是来自 UserFunctions 类的 getID 方法。从 sqlite 数据库处理程序中获取用户 ID。

用户函数.java

```
public String getID(Context context) {
    String id = "";
    DatabaseHandler db = new DatabaseHandler(context);
    Cursor cursor = db.getUserID();

    if(cursor != null) {
        while(cursor.moveToNext()) {
            id = cursor.getString(0);
        }
    } else {
        id = "";
    }

    cursor.close();
    db.close();
    return id;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:40:27.127

您的代码应该可以正常工作，您是否遇到错误？

也许将其更改为 id.equals("001")

如果这不是主要活动，为什么不根据需要在意图中发送 id？

我不完全确定问题是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:20:19.017

“001”.equals(id) 中没有问题。

请检查您从 getID() 获得的 id。您从数据库中获取的 id 存在一些问题。尝试打印值并交叉检查。

# galleria - 单击画廊中的缩略图

> ID：13132432
> 
> 赞同：0
> 
> 时间：2012-10-30T03:57:29.313
> 
> 标签：galleria

我需要从当前的 Galleria 和 thumb 容器中创建单独的 pre、next、play 和 index 计数。我已经弄清楚了如何进行前/下和播放/暂停，但如果有人单击缩略图图像，则无法将其绑定。
如何绑定被点击的缩略图以更新索引计数。

即从 5/20 到 9/20 或单击任何缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T00:00:50.890

```
 $('.galleria-thumbnails .galleria-image').click(function() {
        var current_index = $('.galleria-thumbnails .galleria-image').index($(this)));
    }); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T17:09:24.620

尝试如下。

`Galleria.ready(function() { this.bind('thumbnail', function(e) { $(e.thumbTarget).parent().unbind('click').click(function() { $('#id_of_hidden_div').show(); }); }); });`

# perl - 当我停止循环时 HTTP::Daemon 崩溃

> ID：13132438
> 
> 赞同：1
> 
> 时间：2012-10-30T03:58:06.583
> 
> 标签：perl, winapi, fork, http-daemon

我正在开发一个 adhoc GUI，以便我可以轻松地查看来自 VMWare Perl SDK 的一堆数据，而无需在 IIS 下设置一堆脚本。基本思想是启动脚本，并让它分叉两个进程。一个是 HTTP::Daemon Web 服务器，两秒后是 Win32::IEAutomation 运行浏览器。我承认这并不漂亮，但我对 VMPerlSDK 比对 VMCOMSDK 更满意。另外，我很想知道我是否可以使它起作用。

据我所知，程序启动正常。叉子工作。小 URI 解析器工作。唯一的问题是每当我尝试调用 /quit 来关闭服务器时，脚本就会爆炸。

任何建议（除了应该如何使用 IIS 和 AutoIT，我知道，我知道）将不胜感激。谢谢！

```
#!/usr/bin/perl -w
use Data::Dumper;
use HTTP::Daemon;
use HTTP::Status;
use HTTP::Response;
use strict;
use warnings;
use Win32::IEAutomation;

sub MainPage {
    return<<eol
<html>
<head><title>Test</title></head>
<body>
<h3>Home</h3>
<p><a href="/quit">Quit</a></p>
</body>
</html>
eol
}

# Parses out web variables
sub WebParse {
    my ($wstring) = @_;
    my %webs = ();
    # gets key/value data
    my @pairs = split(/&/, $wstring);

    # puts the key name into an array
    foreach my $pair (@pairs) {
            my ($kname, $kval) = split (/=/, $pair);
            $kval =~ tr/+/ /;
            $kval =~ s/%([a-fA-F0-9][a-fA-F0-9])/pack("C", hex($1))/eg;
            $webs{$kname} = $kval;
    }

    return(%webs);
}

sub StartServer {
    my $PORT = shift;
    my $ALLOWED = shift;

    my $d = HTTP::Daemon->new(ReuseAddr => 1, LocalAddr => $ALLOWED, LocalPort => $PORT) || die;

    # Prints a startup message
    print "Please contact me at: <URL:", $d->url, ">\n";
    my $xt = 0;

    BLOOP: while (my $c = $d->accept) {
        while (my $r = $c->get_request) {
            # Handles requests with the GET or POST methods
            if ($r->method =~ m/GET/i || $r->method =~ m/POST/i) {
                my $uri = $r->uri; my %ENV = ();

                $ENV{REQUEST_METHOD} = $r->method;
                $ENV{CONTENT_TYPE}   = join('; ', $r->content_type);
                $ENV{CONTENT_LENGTH} = $r->content_length || '';
                $ENV{SCRIPT_NAME}    = $uri->path || 1;
                $ENV{REMOTE_ADDR}    = $c->peerhost();

                if ($r->method =~ m/GET/i) {
                    $ENV{QUERY_STRING}   = $uri->query || '';
                }
                elsif ($r->method =~ m/POST/i) {
                    $ENV{QUERY_STRING}   = $r->{"_content"} || '';
                }

                my %q = &WebParse($ENV{QUERY_STRING});

                my $res = HTTP::Response->new("200");

                if ($uri =~ m/quit/i) {
                    $res->content("Goodbye");
                    $xt=1;
                }
                else {
                    $res->content(MainPage());
                }

                $c->send_response($res);
            }
            # Otherwise
            else {
                $c->send_error("This server only accepts GET or POST methods");
            }

            if ($xt == 1) {
                sleep(2);
                $c->force_last_request();
                last BLOOP;
            }

            $c->close;
        }
        undef($c);
    }
    $d->close;
    undef($d);
    exit;
}

sub StartInterface {
    my $PORT = shift;
    my $ALLOWED = shift;
    my $ie = Win32::IEAutomation->new(visible => 1, maximize => 1);
    $ie->gotoURL("http://".$ALLOWED.":".$PORT."/");
    exit;
}

# Return Status
my $STATUS = 1;

# Server port number
my $PORT = 9005;

# The server that's allowed to talk to this one
my $ALLOWED = "127.0.0.1";

my $pid = fork();

if ($pid == 0) {
    StartServer($PORT, $ALLOWED);
} else {
    sleep(2);
    StartInterface($PORT, $ALLOWED);
}

exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-06-15T20:27:39.857

在你关闭你的守护进程 $d 之前，关闭套接字并告诉父 pid 退出：

```
$d->shutdown(2);
$d->close;
undef $d;
kill(2,getppid());
exit; 
```

# ruby - 使用正则表达式选择引号中的内容

> ID：13132442
> 
> 赞同：1
> 
> 时间：2012-10-30T03:58:23.823
> 
> 标签：ruby, regex

如果我有：

```
 ["eaacbf7e-37b3-509e-b2d1-ddce7f0e1f6e", "f9e52e06-697a-57af-9566-d05fabb001a4", 
     "19edb822-eccb-5289-8fee-a39cdda66cd5", "83d3ad63-b468-5a1e-ba6c-6b69eb4a3dc5"] 
```

（整个东西是一个字符串）

是否有一个简单的正则表达式可用于选择引号内的内容（包括引号）？

由于上述内容以字符串形式出现。我想使用正则表达式来选择引号中的每个 id（连同引号）并将它们存储到一个 ruby​​ 数组中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:02:23.653

只需使用此正则表达式

`"[^"]*"`

`[^"]*`表示匹配除`"`ie以外的任何字符`[^"]`0 到多次 ie`*`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:42:46.667

尝试使用带有正则表达式的[`String#scan`方法](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-scan)`/"[^"]+"/`：

```
ids = str.scan(/"[^"]+"/) # => [ "eaacbf7e-...", "f9e52e06-...", ...]
puts ids
"eaacbf7e-37b3-509e-b2d1-ddce7f0e1f6e"
"f9e52e06-697a-57af-9566-d05fabb001a4"
"19edb822-eccb-5289-8fee-a39cdda66cd5"
"83d3ad63-b468-5a1e-ba6c-6b69eb4a3dc5" 
```

该表达式分解如下：

```
str.scan(/"[^"]+"/)
#         │├──┘│└─ Another literal quotation mark (").
#         ││   └─ Match one or more of the previous thing.
#         │└─ A class matching any character except (^) quotation marks.
#         └─ A literal quotation mark ("). 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T06:13:48.910

你为什么要以这种格式获取字符串？它看起来像 JSON 输出，如果是，则应该由 JSON 模块解析。

```
require 'json'
require 'pp'

foo = [
  "eaacbf7e-37b3-509e-b2d1-ddce7f0e1f6e",
  "f9e52e06-697a-57af-9566-d05fabb001a4",
  "19edb822-eccb-5289-8fee-a39cdda66cd5",
  "83d3ad63-b468-5a1e-ba6c-6b69eb4a3dc5"
]

foo.to_json
=> "[\"eaacbf7e-37b3-509e-b2d1-ddce7f0e1f6e\",\"f9e52e06-697a-57af-9566-d05fabb001a4\",\"19edb822-eccb-5289-8fee-a39cdda66cd5\",\"83d3ad63-b468-5a1e-ba6c-6b69eb4a3dc5\"]" 
```

这可能就是你得到的字符串。如果你使用 JSON 解析器解析它，你会得到一个 Ruby 数组：

```
pp JSON[ foo.to_json ]
=> ["eaacbf7e-37b3-509e-b2d1-ddce7f0e1f6e",
"f9e52e06-697a-57af-9566-d05fabb001a4",
"19edb822-eccb-5289-8fee-a39cdda66cd5",
"83d3ad63-b468-5a1e-ba6c-6b69eb4a3dc5"] 
```

# php - PHP登录页面重定向到自身并且不登录

> ID：13132444
> 
> 赞同：0
> 
> 时间：2012-10-30T03:58:37.970
> 
> 标签：php, mysql, forms, login

我正在尝试制作一个简单的 PHP MySQL 登录页面。我一直在阅读代码，看不出我做错了什么。我正在使用我刚刚在数据库中查看的电子邮件和密码进行测试，因此我知道它存在。当我在上一个表单上单击提交时，它只是将我重定向回同一页面并且没有登录（我知道这是因为我的标题在 $_SESSION 变量起作用时会发生变化；我知道这是因为我的注册页面有效但是不是您注册后的登录信息）。还要注意，在注册时，他们会输入他们的名字和姓氏，这就是我将其包含在 session_start 的 $_SESSION 变量中的原因。这是代码（首先是表单，然后是 checklogin.php 页面）：

```
<!--THIS IS THE FORM FROM THE PAGE SIGN_IN.PHP-->
<form method="post" target="checklogin.php">
   <label for="email">EMAIL/USERNAME:</label>
   <input type="text" name="email" id="email">
   <label for="password">PASSWORD:</label>
   <input type="password" name="password" id="password">
   <br />
   <input type="submit" value="Let's Play!">
</form> 
```

这是表单发布到的 checklogin.php 脚本：

```
<?php
$mysqli = mysqli_connect("mysql_name","login_id","password", "db_name");
if (!$mysqli)
  {
  die('Could not connect: ' . mysqli_error($mysqli));
  }

// username and password sent from form
//NEVER Remove the mysql_real_escape_string. Else there could be an Sql-Injection!
$email=$mysqli->real_escape_string($_POST['email']);
$password=$mysqli->real_escape_string($_POST['password']);

$sql="SELECT * FROM tbl_name WHERE email='$email' and password='$password'";
$result = $mysqli->query($sql);

if(is_object($result) && $result->num_rows == 1){
  // Register variables and redirect to file "profile.php"
  session_start();
  $_SESSION['firstname']=$_POST['firstname'];
  $_SESSION['lastname']=$_POST['lastname'];
  $_SESSION['email']=$_POST['email'];
  $_SESSION['password']=$_POST['password'];
  redirect('profile.php');
} else {
  echo "Wrong Username or Password";
}

?> 
```

我也用 header('location:profile.php') 试过这个，但结果相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:03:05.477

```
<form method="post" action="checklogin.php"> 
```

该[`action`](http://www.w3schools.com/TAGS/att_form_action.asp)属性用于指定将发布表单的 URL。而该[`target`](http://www.w3schools.com/TAGS/att_form_target.asp)属性用于指定应加载 URL 的位置。

如果`action`缺少该属性，则默认为当前 URL，这就是您在提交表单时导航到同一页面的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:14:45.290

```
Change Your Form As:

    <form method="post" action="checklogin.php">
       <label for="email">EMAIL/USERNAME:</label>
       <input type="text" name="email" id="email">
       <label for="password">PASSWORD:</label>
       <input type="password" name="password" id="password">
       <br />
       <input type="submit" value="Let's Play!">
    </form>

 Checklogin.php as

    <?php
    $mysqli = mysqli_connect("mysql_name","login_id","password", "db_name");
    if (!$mysqli)
      {
      die('Could not connect: ' . mysqli_error($mysqli));
      }

    // username and password sent from form
    //NEVER Remove the mysql_real_escape_string. Else there could be an Sql-Injection!
    $email=$mysqli->real_escape_string($_POST['email']);
    $password=$mysqli->real_escape_string($_POST['password']);

    $sql="SELECT * FROM tbl_name WHERE email='$email' and password='$password'";
    $result = $mysqli->query($sql);

    if(is_object($result) && $result->num_rows == 1){
      // Register variables and redirect to file "profile.php"
      session_start();
      $_SESSION['firstname']=$_POST['firstname'];
      $_SESSION['lastname']=$_POST['lastname'];
      $_SESSION['email']=$_POST['email'];
      $_SESSION['password']=$_POST['password'];
      //redirect('profile.php');
      header('location:profile.php');

} else {
  echo "Wrong Username or Password";
}

?> 
```

# iphone - UIWebView 的 setKeyboardAppearance

> ID：13132446
> 
> 赞同：1
> 
> 时间：2012-10-30T03:58:48.600
> 
> 标签：iphone, objective-c, ios, uiwebview, keyboard

众所周知，键盘外观`UITextView`可以`UITextField`设置如下：

```
[self.textField setKeyboardAppearance:UIKeyboardAppearanceAlert]; 
```

但是我们如何设置键盘的外观`UIWebView`呢？

实际上，我在这里使用**ckeditor**进行 HMTL 编辑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:17:24.867

不幸的是，您不能使用 Apple 的 UIKit API 为 UIWebView 设置键盘外观。

但是，您可以使用 html 标签指定输入类型，如下所示：

```
<input type="text" size="30" autocorrect="off" autocapitalization="on"> 
```

这是其他参数。

```
Text: <input type="text"></input>
Telephone: <input type="tel"></input>
URL: <input type="url"></input>
Email: <input type="email"></input>
Zip code: <input type="text" pattern="[0-9]*"></input> 
```

Apple 文档中的更多信息：

[iOS 文本、Web 和编辑编程指南](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:25:03.883

我认为您不能将其设置为`UIWebview`. `UITextView`并且`UITextField`可以成为第一响应者，但`UIWebView`不能成为第一响应者。所以没有 `keyboardAppearance`为 UIWebview 调用的属性。只是它里面的元素`UIWebview`可以让键盘显示出来，而不是`UIWebview`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-30T04:24:56.247

使用任何网页在 xcode 中加载网页视图，它有默认键盘，键盘包含完成，下一个和上一个按钮，下一个和上一个用于移动文本字段

# sql - SQL表连接中ON和WHERE子句的区别

> ID：13132447
> 
> 赞同：6
> 
> 时间：2012-10-30T03:58:51.480
> 
> 标签：sql, oracle, join

```
select e.last_name, e.hire_date
from employees e join employees m
on (m.last_name = 'Davies')
and (e.hire_date > m.hire_date);

select e.last_name, e.hire_date
from employees e join employees m
on (m.last_name = 'Davies')
where (e.hire_date > m.hire_date);

select e.last_name, e.hire_date
from employees e join employees m
on (e.hire_date > m.hire_date)
where (m.last_name = 'Davies'); 
```

这三个语句具有相同的结果。除了`where`不能在不使用的情况下独占使用之外`on`，还有什么特别的理由`where`在表连接中使用吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T04:04:19.727

主要区别在于您使用不同的连接时。

通常，如果您要使用内部联接，您应该会看到相同的结果，但是一旦您开始使用 LEFT 联接，结果就会发生变化。

看看下面的例子

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/0e4b4/6)

[并看看下面的文章（非常解释）](http://blog.sqlauthority.com/2009/04/13/sql-server-introduction-to-joins-basic-of-joins/)

**编辑@ShannonSeverance**

*架构和测试数据*

```
CREATE TABLE Table1 (
  ID INT,
  Val VARCHAR(20)
 );

INSERT INTO Table1 VALUES (1,'a');
INSERT INTO Table1 VALUES (2,'a');

CREATE TABLE Table2 (
  ID INT,
  Val VARCHAR(20)
 );

INSERT INTO Table2 VALUES (1,'a'); 
```

和测试

```
SELECT t1.ID,
t1.Val,
t2.ID ID2,
t2.Val Val2
FROM Table1 t1 INNER JOIN
Table2 t2 ON t1.ID = t2.ID AND t1.Val = t2.Val;

SELECT  t1.ID,
t1.Val,
t2.ID ID2,
t2.Val Val2
FROM Table1 t1,Table2 t2 
WHERE t1.ID = t2.ID
 AND t1.Val = t2.Val;

SELECT  t1.ID,
t1.Val,
t2.ID ID2,
t2.Val Val2
FROM Table1 t1 LEFT JOIN
Table2 t2 ON t1.ID = t2.ID  AND t1.Val = t2.Val;

SELECT  t1.ID,
t1.Val,
t2.ID ID2,
t2.Val Val2
FROM Table1 t1 LEFT JOIN
Table2 t2 ON t1.ID = t2.ID  
WHERE t1.Val = t2.Val; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-30T04:01:44.963

`where`是在使用连接选择行后应用的过滤器。条件并不总是在`join ... on`语义上等同于`where`条件。因此，是的，使用`where`表内连接有一个特殊的原因：当它做正确的事情时。

* * *

> ...相比之下，`ON`条件在进行连接时执行。`ON`多表连接中较早的连接条件可以切断数百万个不必要的连接，因此如果语义正确，通常是首选
> -[波西米亚](https://stackoverflow.com/users/256196/bohemian)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T04:54:03.570

使用`on`通常用于查询多个表。进行该查询时，表之间必须具有关系，通常在特定字段中具有相同的值。

`on`将连接相同的值，例如：

```
**table1**:

id_name   id_position   name
1         1             john
2         2             doe
3         2             tom
4         3             hawkins

**table2**
id_position   position
1             system analyst
2             programmer

SELECT t1.id_name, t1.name, t2.position
  FROM table1 t1 LEFT JOIN table2 t2
  ON t1.id_position = t2.id_position

-- RESULT:
id_name   name     position
1         john     system analyst
2         doe      programmer
3         tom      programmer
4         hawkins  NULL            -- NO MATCH IN table 2 
```

正如我们所看到的`on`，将连接具有相同值的 table1 和 table2 `id_position`，所以它与你上面写的有点不同。

虽然`where`可以在每个查询中使用，而不取决于该查询中有多少表。通常`where`用于我们想要的有条件的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:03:26.937

区别在于引擎何时执行过滤。“where”表示对两个表的计算结果的过滤器。“on”关键字指定如何执行连接。即使有时它们都产生相同的结果，它们在语义上也不等价。

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T09:04:57.490

该`ON`子句定义表之间的关系。

*   `ON`子句支持所有连接类型。

该`WHERE`子句描述了您感兴趣的行。

*   `WHERE`子句只支持内连接，不支持外连接，比如`LEFT JOIN`and `RIGHT JOIN`。

# php - PDO 在 PHP 5.4 和 Apache 2.4.3 上运行缓慢

> ID：13132448
> 
> 赞同：4
> 
> 时间：2012-10-30T03:58:53.200
> 
> 标签：php, apache, pdo

> **可能重复：**
> [Windows 平台上的 mysql_connect (localhost / 127.0.0.1)](https://stackoverflow.com/questions/11663860/mysql-connect-localhost-127-0-0-1-on-windows-platform)

我刚刚在开发机器上更新了我的 Apache 和 PHP 版本，而 PDO 已经完全崩溃了。

这是死的简单 PDO 类：

```
class PDO_DBH {
    public static function openSesame() {
        echo '<p>start openSesame: </p>'.microtime(true);
        $db_username = 'root';
        $db_password = 'pass';
        try {
            $dbh = new PDO('mysql:host=localhost;dbname=DB_NAME', $db_username, $db_password);
            $dbh->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);
            echo '<p>end successful openSesame: </p>'.microtime(true);
            return $dbh;
        } catch (PDOException $e) {
            echo '<p>end failed openSesame: </p>'.microtime(true);
            return 'PDO database access error!';
        }
    }
} 
```

在升级之前，目前在其他开发机器上，一个典型的页面将在一秒钟内加载，最多两个。

现在，通过 的奇迹`microtime(true)`，我看到每个连接打开都需要大约一整秒。

一个典型的页面可能会创建一个新页面`$dbh`，然后创建`$dbh = null;`20 次，因为不同的对象和方法会检索它们需要的数据。这在其他机器或我的虚拟主机上从来都不是问题。

我在这里哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T06:03:08.000

这只是一个猜测 - 但在 Windows 机器上`127.0.0.1`改为而不是成功`localhost`。

# ubuntu - Webkit 浏览器的检查器缺少一些东西

> ID：13132459
> 
> 赞同：25
> 
> 时间：2012-10-30T04:00:21.637
> 
> 标签：ubuntu, webkit, gtk, gtk3

我正在使用这样的 Webkit 浏览器检查[器](https://code.google.com/p/pywebkitgtk/source/browse/trunk/demos/inspector.py?r=142)。

当我在 Ubuntu 12.10 中运行它时，使用检查器时出现错误。例如：

```
** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Go to line" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Filter" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Search Previous" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Search Next" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "α:" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "%d of %d" not found.

(geany:2487): Gdk-CRITICAL **: IA__gdk_error_trap_pop: assertion `gdk_error_traps != NULL' failed
** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Sources Panel" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Toggle breakpoint" not found.

** Message: console message: file:///usr/share/webkitgtk-1.0/webinspector/UIString.js @42: Localized string "Painting" not found. 
```

我还注意到当您将控制台放在下半部分时，面包屑/滑块栏没有显示：

![空白栏](../Images/7bb5e748fe18d20f7a2db808af550ea6.png)

我不记得在早期版本中，当我使用 GTK3 版本（`from gi.repository import WebKit`等）时，它也有类似的问题，更糟糕的是，滚动条在顶部和底部没有箭头。我是否错过了初始化 Webkit 检查器或英语语言环境的步骤？

我想调试这个问题，但由于检查器对象不是 webview 对象，我不确定是否可以向检查器添加检查器？（例如，当检查器是 Chrome/Chromium 中自己的窗口时，您如何使用 F12，这样您就可以调试该检查器）。这应该是可能的，但[也许不是 pyGTK](http://www.mail-archive.com/webkit-gtk@lists.webkit.org/msg01018.html)？

**更新：** 我在 12.04 Ubuntu 上对此进行了测试，并没有注意到上面的问题。[我在这里](https://bugs.launchpad.net/ubuntu/+source/pywebkitgtk/+bug/1073395)报告了一个错误。这是与每台 12.10 计算机中的某些包冲突，还是我的配置设置不正确？

**更新：** 同样的问题发生在 13.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-08T18:02:24.420

我在 Google Chrome 以前的一些版本中遇到了同样的问题。唯一解决它的是重新启动网络检查器。

# python - 使用 Python 记录尾随守护进程

> ID：13132461
> 
> 赞同：0
> 
> 时间：2012-10-30T04:00:39.527
> 
> 标签：python, linux, file, sysadmin

我们有一个遗留的`C`书面程序，可以将日志输出到文本文件，并且该程序能够每天轮换日志。

例如

```
app.log
app.log.2012-10-24
app.log.2012-10-23
.. 
```

现在我想编写一个 python 守护程序来跟踪日志并注入数据库，我的问题

1.  在 Python 中尾随文件的推荐方法是什么？`Twisted`还是`Pyinotify`？
2.  如何处理守护进程停止并且我们需要恢复日志拖尾的情况？我应该将偏移量存储在另一个文件中吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T02:34:26.977

我遇到过类似的问题。我的方法是这样的：

```
import io
import time

def checklog(fs,logfile):
    trytimes = 10
    line = ''
    while line == '':
        time.sleep(1)
        line = fs.readline().replace('\n','')
        trytimes = trytimes - 1
        while trytimes == 0 and line == '':
            try:
                fs = io.open(logfile,'rb')
                fs.seek(0,2)
                trytimes = 10
                break
            except:
                time.sleep(10)
    return line,fs

logfile="app.log"
fs = io.open(logfile,'rb')
fs.seek(0,2)# seek to tail of the logfile
while True:
    line = fs.readline().replace('\n','')
    while line == '':
        line,fs = checklog(fs,logfile)
        #do something for line; 
```

希望这可以帮助。

# javascript - 如何在页面中提交单个表单？

> ID：13132470
> 
> 赞同：1
> 
> 时间：2012-10-30T04:02:12.613
> 
> 标签：javascript, post, submit

我的页面上有两个表格。

我只想提交一份表格。

但是当我使用提交按钮时，它会提交该页面中的所有表单。

如何使用 JavaScript 提交单个表单？

我的代码就像，

```
<form name="f1" method='post' action=''>
  <input type='submit' value='submit'>
</form>

<form name="f2" method='post' action=''>
  <input type='text' name='text2'>
  <input type='button' value='submit'>
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:09:03.020

将输入类型提交更改为按钮并为每个按钮创建一个单击事件以提交相应的表单，

```
<input type="button" onClick="submit_form1()" value="submit form1">

<script type="text/javascript">
function submit_form1()
{   alert("submit me");
f1.submit();
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:12:02.307

您可以将表单 ID 发送到 Javascript“提交者”函数并使用它来提交：

```
<form name="f1" id="f1" method='post' action=''>
  <a href="javascript: submitform("f1")">submit</a>
</form>

<form name="f2" id="f2" method='post' action=''>
  <input type='text' name='text2'>
  <a href="javascript: submitform("f2")">submit</a>
</form>

<script type="text/javascript">
function submitform(frmId)
{
  myFrm = document.getElementById(frmId);
  myFrm.submit();
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:10:52.953

```
<!--
(1) Property 'name' has no meaning in 'form' tag
(2) Set the desired URL in 'action'
(3) Set ID for the forms to call from JS
(4) Use JavaScript to call the '.submit()' method
-->

<form method="POST" action='your-page-url' id="form1">
  <input type='submit' value='submit'/>
</form>

<form method="POST" action='your-page-url' id="form2">
  <input type='text' name='text2'/>
  <input type='button' value='submit'/>
</form>

<button onclick="submit_form('form1');">Submit form 1</button>
<button onclick="submit_form('form2');">Submit form 2</button>

<script>
function submit_form(Form_Id) {
  var Form = document.getElementById(Form_Id);
  Form.submit();
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:11:20.903

`document.forms['f1'].submit();`第一个表单将被提交，但是在这里您不需要提交 js，当您按下提交时，只会提交与该提交按钮对应的表单。如果您在服务器端打印帖子值，这将很清楚。在您的第二个表单中你需要一个提交按钮而不是一个简单的按钮。提交按钮具有自动提交表单的默认属性，作为类型按钮，我们需要指定操作。

```
<input type='submit' value='submit'> 
```

# facebook - 本地主机上的 Facebook 成就？

> ID：13132471
> 
> 赞同：0
> 
> 时间：2012-10-30T04:02:21.017
> 
> 标签：facebook, facebook-graph-api, achievements

快速提问 - 是否可以通过仅由我的本地开发服务器（即本地主机）提供的 url 来注册 facebook 成就？还是我真的必须在互联网上托管应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:08:50.583

[不，Facebook 的爬虫必须能够访问这些 URL——成就文档](https://developers.facebook.com/docs/achievements/)中涵盖了这一要求：

> 每个成就都必须拥有一个带有相应 Open Graph 协议标签的唯一 URL。我们将抓取成就的唯一 URL，并使用标签中提供的信息在新闻源和时间轴上生成故事。单击这些故事将重定向到成就的唯一 URL。

# php - 如何匹配包含任意字符串的正则表达式，并使用 PHP 仅将该任意字符串放入变量中？

> ID：13132478
> 
> 赞同：0
> 
> 时间：2012-10-30T04:03:16.473
> 
> 标签：php, regex, string

我正在尝试在 PHP 中编写一种非常简单的标记语言，其中包含 [x=123] 之类的标签，并且我需要能够匹配该标签并仅提取 x 的值。

我假设答案涉及正则表达式，但也许我错了。

所以如果我们有一个字符串：

```
$str = "F9F[x=]]^$^$[x=123]#3j3E]]#J"; 
```

以及要匹配的正则表达式：

```
/^\[x=.+\]$/ 
```

我们如何只将匹配字符串的“.+”部分放入变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:32:38.617

您可以使用**preg_match**在字符串中搜索正则表达式。

在此处查看文档：[http](http://www.php.net/manual/en/function.preg-match.php) ://www.php.net/manual/en/function.preg-match.php以获取有关如何使用它的更多信息（以及一些示例）。您可能还想看看**preg_grep**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:41:19.070

以下代码应该适合您：

```
$str = "F9F[x=]]^$^$[x=123]#3j3E]]#J";
if (preg_match('~\[x=(?<valX>\d+)\]~', $str, $match))
   echo $match['valX'] . "\n"; 
```

**输出：**

```
123 
```

# javascript - 平滑滚动干扰哈希标记

> ID：13132482
> 
> 赞同：0
> 
> 时间：2012-10-30T04:03:48.270
> 
> 标签：javascript, smooth-scrolling

编辑（2012 年 12 月 26 日）

我发现下面的代码完全符合我的要求，除了现在页面的 URL 有斜杠（例如 example.com/page/）时，页面不会滚动。如果页面的 URL 以“.php”或“.html”等结尾，则可以正常工作。关于如何让以下脚本与 URL 中的尾部斜杠一起工作的任何想法？

```
jQuery('a[href*=#]').bind('click', function(e) {
    // Get the target
    var target = jQuery(this).attr("href"); 

    // prevent the "normal" behaviour which would be a "hard" jump
    e.preventDefault(); 

    // perform animated scrolling by getting top-position of target-
    // element and set it as scroll target
    jQuery('html, body').stop().animate({
        scrollTop: jQuery(target).offset().top 
    }, 500, function() {
        location.hash = target;  //attach the hash (#jumptarget) to the pageurl
    });

    return false;
}); 
```

* * *

在过去的几年里，我一直在成功使用脚本，但最近遇到了一些问题。基本上脚本所做的是将页面滚动到特定点。这发生在链接锚点上。例如，如果一个链接是：

```
<a href="#anchor">anchor link</a> 
```

页面将*平滑*滚动到页面上的那个锚点：

```
<a name="anchor"></a> 
```

或者：

```
<a id="anchor"></a> 
```

当页面中使用其他一些 JS 时会出现问题，需要将链接格式化为：

```
<a href="#">other link</a> 
```

单击此“其他链接”时，页面将平滑滚动，但会滚动到没有锚点的页面顶部或底部。

单击此“其他链接”时会发生什么？应该发生其他 JS 动作（它确实发生了），但不应该发生平滑页面滚动脚本。

这是我获得此脚本的工作示例：

[http://www.dezinerfolio.com/wp-content/uploads/smoothscrolldemo/df_smooth_scroll.html](http://www.dezinerfolio.com/wp-content/uploads/smoothscrolldemo/df_smooth_scroll.html)

这是完整的JS：

```
Scroller = {
    // control the speed of the scroller.
    // dont change it here directly, please use Scroller.speed=50;
    speed: 10,

    // returns the Y position of the div
    gy: function (d) {
        gy = d.offsetTop
        if (d.offsetParent) while (d = d.offsetParent) gy += d.offsetTop
        return gy
    },

    // returns the current scroll position
    scrollTop: function (){
        body = document.body
        d = document.documentElement

        if (body && body.scrollTop) return body.scrollTop
        if (d && d.scrollTop) return d.scrollTop
        if (window.pageYOffset) return window.pageYOffset

        return 0
    },

    // attach an event for an element
    // (element, type, function)
    add: function(event, body, d) {
        if (event.addEventListener) return event.addEventListener(body, d,false)
        if (event.attachEvent) return event.attachEvent('on'+body, d)
    },

    // kill an event of an element
    end: function(e){
        if (window.event) {
            window.event.cancelBubble = true
            window.event.returnValue = false

            return;
        }

        if (e.preventDefault && e.stopPropagation) {
          e.preventDefault()
          e.stopPropagation()
        }
    },

    // move the scroll bar to the particular div.
    scroll: function(d){
        i = window.innerHeight || document.documentElement.clientHeight;
        h = document.body.scrollHeight;
        a = Scroller.scrollTop()

        if (d>a)
            if(h-d>i)
                a += Math.ceil((d-a)/Scroller.speed)
            else
                a += Math.ceil((d-a-(h-d))/Scroller.speed)
        else
            a = a + (d-a)/Scroller.speed;

        window.scrollTo(0,a)

        if (a==d || Scroller.offsetTop==a)
            clearInterval(Scroller.interval)

        Scroller.offsetTop = a
    },

    // initializer that adds the renderer to the onload function of the window
    init: function(){
        Scroller.add(window,'load', Scroller.render)
    },

    // this method extracts all the anchors and validates then as # and attaches the events.
    render: function(){
        a = document.getElementsByTagName('a');

        Scroller.end(this);

        window.onscroll

        for (i=0;i<a.length;i++) {
            l = a[i];

            if (l.href && l.href.indexOf('#') != -1 && ((l.pathname==location.pathname) || ('/'+l.pathname==location.pathname)) ){
                Scroller.add(l,'click',Scroller.end)

                l.onclick = function(){
                    Scroller.end(this);

                    l = this.hash.substr(1);
                    a = document.getElementsByTagName('a');

                    for (i=0;i<a.length;i++) {
                       if (a[i].name == l){
                            clearInterval(Scroller.interval);

                            Scroller.interval = setInterval('Scroller.scroll('+Scroller.gy(a[i])+')',10);
                        }
                    }
                }
            }
        }
    }
}

// invoke the initializer of the scroller
Scroller.init(); 
```

我认为有一种方法可以编写脚本，以便如果`href`等于哈希标记`#`而在哈希之后没有任何文本，则不会触发滚动条。

有没有人有更好的想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T06:28:31.153

我无法为您的 jQuery 函数提供帮助，但您的原始脚本有两个简单的解决方案。**第一个是一个小的修改，告诉脚本忽略锚的 URL只是**哈希标记的特殊情况。

在`render`函数中，更改行：

```
if (l.href 
    && l.href.indexOf('#') != -1 
    && (l.pathname == location.pathname
        || '/' + l.pathname == location.pathname)
) { 
```

到：

```
if (l.href
    && l.href != '#' // <<< Added this conditional >>>
    && l.href.indexOf('#') != -1
    && (l.pathname == location.pathname
        || '/' + l.pathname == location.pathname)
){ 
```

这将告诉脚本忽略特殊情况，但不会阻止浏览器对链接做出正常反应，因此浏览器可能仍会跳转到页面顶部。您提到的特殊情况几乎总是在 javascript 构造中用于提供具有`href`属性的锚标记，因为一些较旧的浏览器会忽略没有属性的标记。'#' 用作 URL 以防止链接离开页面。

您可以在链接中使用空的 javascript 调用来代替“#”，如下所示：

```
<a href="javascript:;">other link</a> 
```

这将完全避免您使用滚动条的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T01:47:36.760

再次感谢 Jarred 的帮助！我确实遇到了一个脚本，它正是我想要的。这是我发现的更好的脚本：

```
jQuery('a[href*=#]').bind('click', function(e) {
    e.preventDefault(); //prevent the "normal" behaviour which would be a "hard" jump
    var target = jQuery(this).attr("href"); //Get the target
    // perform animated scrolling by getting top-position of target-element and set it as scroll target
    jQuery('html, body').stop().animate({ scrollTop: jQuery(target).offset().top }, 1000, function() {
        location.hash = target;  //attach the hash (#jumptarget) to the pageurl
    });
    return false;
}); 
```

# java - 如何使用另一个类的字符串数组？

> ID：13132484
> 
> 赞同：1
> 
> 时间：2012-10-30T04:04:04.100
> 
> 标签：java, arrays, string

如何对我的“甲板”阵列执行完美的随机播放操作？

我不知道如何将“deck”数组导入到我的 perfectShuffle 方法/类中（idk wtf 是不同的）

这不会编译，因为我的 perfectShuffle 找不到''deck''

我很确定你会看我的代码，然后说“你知道你在做什么吗？” 好吧，不，我不知道我在做什么，但是我通过为一副纸牌中的每张纸牌创建一个纸牌阵列，不知道我在做什么，我已经走了很远。

我正在努力寻找来自类/方法/对象/实例的流程以及它们如何交互。

非常感谢任何帮助或资源点。

```
public String[] Deck(){
    String[] deck = new String[52];

    //Populate Deck 2-10
    for (int i=0; i<52; i++){
        if (i<9){
            for (int j=2; j<=10; j++){
                deck[i]=(j+" of Clubs");
                i++;
            }
        }
        if (12<i&&i<22){
            for (int j=2; j<=10; j++){
                deck[i]=(j+" of Diamonds");
                i++;
            }
        }
        if (25<i&&i<35){
            for (int j=2; j<=10; j++){
                deck[i]=(j+" of Hearts");
                i++;
            }
        }
        if (38<i&&i<48){
            for (int j=2; j<=10; j++){
                deck[i]=(j+" of Spades");
                i++;
            }
        }
        else {
            deck[9]=("Jack of Clubs");
            deck[10]=("Queen of Clubs");
            deck[11]=("King of Clubs");
            deck[12]=("Ace of Clubs");

            deck[22]=("Jack of Diamonds");
            deck[23]=("Queen of Diamonds");
            deck[24]=("King of Diamonds");
            deck[25]=("Ace of Diamonds");

            deck[35]=("Jack of Hearts");
            deck[36]=("Queen of Hearts");
            deck[37]=("King of Hearts");
            deck[38]=("Ace of Hearts");

            deck[48]=("Jack of Spades");
            deck[49]=("Queen of Spades");
            deck[50]=("King of Spades");
            deck[51]=("Ace of Spades");
        }
    }
}
private void perfectShuffle(){
    Deck();
    for (int i=0; i<27; i++){
        deck[i]=deck[i+26];
    }
    for (int i=0; i<52; i++){
        System.out.println(deck[i]);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:06:19.953

`perfectShuffle`无权访问锁定在`Deck()`. 您需要获取`Deck`返回的值，并充分利用它：

```
private void perfectShuffle(){
    String[] myDeck = Deck();
    for (int i=0; i<27; i++){
        myDeck[i]=myDeck[i+26];
    }
    for (int i=0; i<52; i++){
        System.out.println(myDeck[i]);
    }
} 
```

同样，您需要`Deck()`实际返回该字符串数组，因为您已经声明了返回 a 的方法`String[]`：

```
public String[] Deck(){
    String[] deck = new String[52];

    //Populate Deck 2-10
    for (int i=0; i<52; i++){
        // blah blah blah
    }

    return deck;
} 
```

# qt - 如何滚动 QLabel？

> ID：13132485
> 
> 赞同：2
> 
> 时间：2012-10-30T04:04:11.130
> 
> 标签：qt, qml

我正在尝试在*Meego/Qt/QML*上实现图片放大/缩小和图片滚动。

我写了一个继承自*QLabel*的类 A 。

```
A::A( "parent" )
{
  setAlignment();
  setGeometry();
  setScaledContents();
} 
```

现在我有一个控制器类 B。这个类负责处理从*QML*到我的类 A 的事件。在我的控制器类中，我以以下方式实例化。

```
B :: B()
{
 a = new A();
 proxyWidget = new QGraphicsProxyWidget();
 proxyWidget->setWidget(a); 
} 
```

由于这是一个基于*QML*的应用程序，我正在处理来自 QML 的事件。

对于 Zoom，我使用了`PinchArea`. 每当我收到事件时，`PinchUpdated`我都会相应地设置*QLabel*。我正在放大和缩小。`setGeometry`

 *对于滚动，我使用`MouseArea`了`onPositionChanged`事件。*但是，在调用QLabel*的滚动 API 后，我无法滚动标签事件。

有人可以告诉我我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:29:10.203

例如，我假设您想使用鼠标滚动进行缩放。

我不擅长，`QML`但你当然应该在课堂上处理[轮子事件](http://doc.qt.digia.com/qt/qwheelevent.html)`A`。我不清楚每个 Qt 事件是否都有 QML 等价物，但你总是可以放置 C++ 代码。要实现的功能是：

```
 virtual void wheelEvent ( QWheelEvent * event ); 
```

您有[delta](http://doc.qt.digia.com/qt/qwheelevent.html#delta)变量，可用于确定缩放速度（使用 delta 绝对值）以及它是否应该增长或缩小（使用 delta 的符号）*

# java - 在线程中使用画布对象做简单的动画 - Java

> ID：13132491
> 
> 赞同：2
> 
> 时间：2012-10-30T04:05:10.450
> 
> 标签：java, animation, applet, awt, java-canvas

我有一个小程序，正如现在所写的那样，它应该在`drawingpanel`按下“运行”按钮后在顶部（在代码中）绘制和弹跳一个球。在线查看其他示例并使用来自不使用 Canvas 的不同程序的代码我无法弄清楚为什么我的 Ball 对象没有出现。我已经测试了程序的流程，并且所有方法都按应有的方式被调用，因此代码没有进入`paint`方法的情况并非如此。任何关于使用 Canvas/Thread 的好资源都会很棒，或者关于以下小程序的任何建议都会非常有用。谢谢！

```
import java.awt.*;
import java.applet.*;
import java.awt.event.*;

public class Bounce2 extends Applet implements ActionListener, AdjustmentListener, Runnable
{
    private final static long serialVersionUID = 1L;

    //runtime variables
    boolean running = false;
    boolean currentlyCircle = true;
    boolean showtails = false;
    boolean kill = false;

    //buttons
    Button runbutton = new Button("Run"); 
    Button pausebutton = new Button("Pause");
    Button quitbutton = new Button("Quit");

    //text
    Label speedlabel = new Label("Speed");
    Label sizelabel = new Label("Size");

    //scrollbars
    private final int barHeight = 20;
    private final int SLIDER_WIDTH = 10;
    private final int MAXSPEED = 110;
    private final int MINSPEED = 0;
    private final int MAX_SIZE = 110;
    private final int MIN_SIZE = 10;
    Scrollbar speedbar = new Scrollbar(Scrollbar.HORIZONTAL, MAXSPEED/2, SLIDER_WIDTH, MINSPEED, MAXSPEED);
    Scrollbar sizebar = new Scrollbar(Scrollbar.HORIZONTAL, MAX_SIZE/2, SLIDER_WIDTH, MIN_SIZE, MAX_SIZE);

    //drawn objs
    Ball ball;
    Image buffer;
    int size = 50;  
    private Graphics obj;
    Point currentlocation = new Point(100,100);
    Point previouslocation;
    Point nextlocation;

    Rectangle circle;
    Rectangle screen;
    private Thread ballThread;

    //boundaries
    int bound_x;
    int bound_y;

    //directions
    int dx = 1; //1 = left, -1 = right
    int dy = 1; //1 = up, -1 = down

    //speed
    int speed = speedbar.getValue();
    int delay;

    //initialize the applet and draw everything
    public void init()
    {
        double colWeight[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
        double rowWeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
        int colWidth[] = {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1};//15 cols
        int rowHeight[] = {1,1,1,1,1,1,1,1,1,1}; //10 rows
        GridBagConstraints c = new GridBagConstraints();
        GridBagLayout gbl = new GridBagLayout();
        gbl.rowHeights = rowHeight;
        gbl.rowWeights = rowWeight;
        gbl.columnWeights = colWeight;
        gbl.columnWidths = colWidth;
        c.anchor = GridBagConstraints.CENTER;

        setBounds(0,0,480,640);
        setLayout(new BorderLayout());
        Panel controlpanel = new Panel();
        controlpanel.setLayout(gbl);
        controlpanel.setSize(640,80);

        Panel drawingpanel = new Panel(null);
        drawingpanel.setSize(640,400);
        ball = new Ball();
        drawingpanel.add("Center", ball);
        Rectangle circle = new Rectangle(size, size);
        Rectangle screen = new Rectangle(0,0,640,400);
        drawingpanel.setVisible(true);

        //speed scrollbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.speedbar,c);

        //run button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 5;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.runbutton,c);

        //pause button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 2;
        c.gridheight = 1;
        c.gridx = 8;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.pausebutton,c);

        //size scrollbar
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 11;
        c.gridy = 7;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.sizebar,c);

        //speed text label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 1;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.speedlabel,c);

        //size text label
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 11;
        c.gridy = 8;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.sizelabel,c);

        //quit button
        c.weightx = 1;
        c.weighty = 1;
        c.gridwidth = 3;
        c.gridheight = 1;
        c.gridx = 6;
        c.gridy = 9;
        c.fill= GridBagConstraints.HORIZONTAL;
        gbl.setConstraints(this.quitbutton,c);

        //add to the screen
        controlpanel.add(this.speedbar);
        controlpanel.add(this.runbutton);
        controlpanel.add(this.pausebutton);
        controlpanel.add(this.sizebar);
        controlpanel.add(this.speedlabel);
        controlpanel.add(this.sizelabel);
        controlpanel.add(this.quitbutton);

        //add listners
        speedbar.addAdjustmentListener(this);
        runbutton.addActionListener(this);
        pausebutton.addActionListener(this);
        sizebar.addAdjustmentListener(this);
        quitbutton.addActionListener(this);

        //add the panels
        add("South", controlpanel);
        add("Center", drawingpanel);

        //drawing paramaters, draw the first object
        System.err.println(obj);
        obj = drawingpanel.getGraphics();
        nextlocation = new Point(currentlocation.x+dx, currentlocation.y+dy);

        setVisible(true);
        validate();
    }

    public void start()
    {
        if (ballThread == null)
        {
            ballThread = new Thread(this);
            ballThread.start();
            repaint();
        }
    }

        public void run()
{
    Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
    while (!kill)
    {
        if (running)
        {
            ball.move();
            repaint();
        }
        try
        {
            Thread.sleep(delay);
        }
        catch(InterruptedException e){System.err.println("Interrupted.");}
    }
    stop();
}

public void update(Graphics g)
{   
    Graphics buffer;
    Image offscreen = null;

    offscreen = createImage(bound_x, bound_y);
    buffer = offscreen.getGraphics();
    buffer.setColor(getBackground());
    buffer.fillRect(0,0,bound_x, bound_y);
    //update

    previouslocation = new Point(currentlocation);
    currentlocation = nextlocation;

    //draw
    buffer.setColor(Color.black);
    buffer.drawOval(nextlocation.x, nextlocation.y, size, size);
    buffer.fillOval(nextlocation.x, nextlocation.y, size, size);

    //draw rectangles out of vector     
    g.drawImage(offscreen, 0,0, null);
    paint(buffer);
}   

//class to handle animations
class Ball extends Canvas 
{
    public void move()
    {
        nextlocation = new Point(currentlocation.x+dx, currentlocation.y+dy);
        //if it will hit the right or left, flip the x direction and set it 
        if (nextlocation.x+size >= bound_x || nextlocation.x <= 0)
        { dx *= -1; }
        nextlocation.x += dx;
        //if it will hit the top or bottom, flip the y direction and set it
        if (nextlocation.y+size >= bound_y + 100 || nextlocation.y <= 0)
        { dy *= -1; }
        nextlocation.y += dy;
        setBounds(dx,dy,size,size);
        System.out.println(dx + "," + dy);
    }   

    public void paint(Graphics g)
    {
        super.paint(g);
        g.setColor(Color.black);
        g.drawOval(0, 0, size, size);
    }
}

    public void actionPerformed(ActionEvent e)
    {
        Object source = e.getSource();
        if (source == this.runbutton)
        {
            running = true;
        }
        else if (source == this.pausebutton)
        {
            running = false;
        }
        else if (source == this.quitbutton)
        {
            //kill processes
            kill = true;
            //remove listeners
            stop();
        }
    }

    public void adjustmentValueChanged(AdjustmentEvent e)
    {
        Object source = e.getSource();
        //set the new size. 
        if (source == sizebar)
        {
            //check for clipping
            int newsize = sizebar.getValue();

            // x
            if (currentlocation.x+newsize >= bound_x)
            { 
                newsize = bound_x - currentlocation.x - 1;
                sizebar.setValue(newsize);
            }

            // y
            if (currentlocation.y+newsize >= bound_y + 100)
            {
                newsize = bound_y+100 - currentlocation.y - 1;
                sizebar.setValue(newsize);
            }
            size = newsize;
        }
        if (source == speedbar)
        {
            speed = speedbar.getValue();
            delay = MAXSPEED - speedbar.getValue();
        }
    }

    public void stop()
    {
        this.speedbar.removeAdjustmentListener(this);
        this.runbutton.removeActionListener(this);
        this.pausebutton.removeActionListener(this);
        this.sizebar.removeAdjustmentListener(this);
        this.quitbutton.removeActionListener(this);
        Thread.currentThread().setPriority(Thread.MIN_PRIORITY);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:45:37.670

老实说，我不知道从哪里开始。

这是一个坏主意。

```
private Graphics obj;
.
.
.
obj = drawingpanel.getGraphics(); 
```

任何组件图形都只是及时的快照。在下一次重绘时，它将失效（我实际上是一个不同的对象）

你画的方法不对。无论如何，这实际上是错误的地方，但有很多事情是错误的。除了你应该很少覆盖顶级容器`paint`方法的事实之外

```
public void paint(Graphics obj)
{
    // I can see you're trying to double buffer the graphics, but I would have a
    // buffer already set up...
    buffer = createImage(640,400);
    // You should NEVER dispose of Graphics context you didn't created...
    if (obj != null)
        obj.dispose();

    // Now we're really stuffed.  You've just overridden the screen graphics context
    obj = buffer.getGraphics();
    obj.setColor(getBackground());
    //update
    previouslocation = new Point(currentlocation);
    currentlocation = nextlocation;

    //draw
    obj.fillRect(currentlocation.x, currentlocation.y, size, size);
    obj.setColor(Color.black);
    obj.drawOval(nextlocation.x, nextlocation.y, size, size);
    obj.fillOval(nextlocation.x, nextlocation.y, size, size);
    /*
     *draw rectangles out of vector
     */
    // Now you drawing the buffer onto itself...???
    obj.drawImage(buffer, 0,0, null);
} 
```

回顾您的代码，我发现您正在向`Ball`主绘制区域添加一个组件，并且您正在使用`null`该绘制区域的布局。

如果你放弃布局管理器，你需要接管布局子组件的控制...

你需要画出`Ball`......所以在你的`Ball`类中，你需要重写`paint`方法......

```
public void paint(Graphics g) {
    super.paint(g);
    g.setColor(Color.black);
    g.drawOval(0, 0, size, size);
} 
```

在您的`Ball#move`方法中，您需要更新球的位置...

```
public void move() {
    // You've previous move code
    setBounds(dx, dy, size, size);
} 
```

这会让你画画……或多或少……

但是，我建议您放弃 AWT 并改用 Swing 组件，如果没有其他原因，它们是双缓冲的。

你看透

*   [使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)
*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

你也可以看看

*   [Java弹跳球](https://stackoverflow.com/questions/13022754/java-bouncing-ball/13022788#13022788)
*   [图像未加载](https://stackoverflow.com/questions/12642852/the-images-are-not-loading/12648265#12648265)

对于一些例子;）

# php - 如何使 preg_replace 仅替换匹配的 *each* 字符中的第一个？

> ID：13132492
> 
> 赞同：2
> 
> 时间：2012-10-30T04:05:15.400
> 
> 标签：php, regex, string, preg-replace

例如，下面的代码用`<i>`标签包装每个匹配的字符。

```
echo preg_replace('/[aeiou]/', '<i>$0</i>', 'alphabet');
// result: <i>a</i>lph<i>a</i>b<i>e</i>t 
```

但我希望它只替换每个字符一次。

我正在寻找类似的结果`<i>a</i>lphab<i>e</i>t`，第二个`a`在没有标签的情况下通过，因为搜索字符串只有一个`a`。

你能帮我吗？如果不遍历 foreach 循环中的每个字符，这是否可能？

答案还应该允许两个或多个相同的字符，每个字符只能使用一次。例如，如果我`aaeioo`在 string中搜索`alphabetsoupisgood`，它应该匹配两个`a`'s 但只有三个`o`'s 中的两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:33:14.500

如果您只想替换一个字母一次，那么下面的正则表达式应该可以工作：

```
echo preg_replace('/([aeiou])(?!.+?\\1)/', '<i>$1</i>', 'alphabet'); 
```

**输出：**

```
alph<i>a</i>b<i>e</i>t 
```

**PS：**请注意，它替换了最后一个字母而不是第一个字母。

**编辑：**

以下将产生与 OP 预期相同的输出（感谢@AntonyHatchkins）：

```
echo strrev(preg_replace
        ('/([aeiou])(?!.+?\\1)/', strrev('<i>1$</i>'), strrev('alphabet')))."\n"; 
```

**编辑2：**

根据OP的评论：

`Can you help me allow more than one a then? How can I match 2, but not 3 a's`

我发布这个答案：

```
echo strrev(preg_replace('/([aeiou])(?!(.+?\\1){2})/', 
            strrev('<i>1$</i>'), strrev('alphabetax'))) . "\n"; 
```

**编辑 3：**

根据OP的另一条评论：

`that will allow duplicates for all characters in the string, not just 2 a's & 1 e`

我发布这个答案：

```
echo strrev(preg_replace(array('/(a)(?!(.+?\\1){2})/', 
  '/(?<!>)([eiou])(?!.+?\\1)/'), 
  array(strrev('<i>1$</i>'), strrev('<i>1$</i>')), strrev('alphabetaxen')))."\n"; 
```

**输出：**

```
<i>a</i>lph<i>a</i>b<i>e</i>taxen 
```

**注意：我相信原始问题已经改变了很多次，所以请不要在这个问题中增加进一步的复杂性。如果您有不同的疑问，您可以自由发布另一个问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:07:31.507

根据[http://php.net/manual/es/function.preg-replace.php](http://php.net/manual/es/function.preg-replace.php)，您可以指定一个附加参数来限制完成的替换数量。

编辑：对不起，我最初没有得到你的问题。在这种情况下，这是不可能的。由于正则表达式的性质，它不知道它已经进行了多少替换。虽然我可能是错的，但我怀疑是否存在一个只对每个字符进行一次替换的正则表达式。

你最好的选择是打 5 个电话，每个字符一个。像这样的东西：

```
$res = preg_replace('/a/', '<i>$0</i>', 'alphabet', 1);
$res = preg_replace('/e/', '<i>$0</i>', 'alphabet', 1);
$res = preg_replace('/i/', '<i>$0</i>', 'alphabet', 1);
$res = preg_replace('/o/', '<i>$0</i>', 'alphabet', 1);
$res = preg_replace('/u/', '<i>$0</i>', 'alphabet', 1);

echo $res; 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:13:06.013

采用

```
echo preg_replace('/[aeiou]/', ' ', 'alphabet', 1); 
```

抱歉，在您编辑问题之前我已回答

这个怎么样。

```
$word = "alphabet";

$replace = array('a','e','i','o','u');
$with = array('','','','','');

echo str_replace($replace,$with,$word); //lphbt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:19:00.167

丑陋，但这是一种方法。

```
echo 
preg_replace('/a/','<i>$0</i>',
preg_replace('/e/','<i>$0</i>',
preg_replace('/i/','<i>$0</i>',
preg_replace('/o/','<i>$0</i>',
preg_replace('/u/','<i>$0</i>','alphabet',
1),1),1),1),1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T04:46:26.737

这是使用该功能的另一种方法，[`preg_replace_callback()`](http://php.net/manual/en/function.preg-replace-callback.php)因此我将其发布为全新的答案。

```
function replace_first($matches) {
    static $used = array();
    $key = $matches[0];
    if (in_array($key,$used)) return $key;
    $used[] = $key;
    return '<i>' . $key . '</i>';
}

$str = preg_replace_callback('/[aeiou]/','replace_first','alphabet');
echo $str; 
```

将输出`<i>a</i>lphab<i>e</i>t`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-30T13:22:12.320

我能做的最好的就是循环遍历每个字符。（我尽量避免循环）我希望有一种更清洁的方法，但现在就可以了。

```
$word = 'alphabetsoupisgood';
$match = 'aaeou';
$wordArr = str_split($word);
$matchArr = str_split($capitals);

foreach ($matchArr as $c) {
    $key = array_search($c, $wordArr);
    if ($key !== false) {
        $wordArr[$key] = strtoupper($c);
    }
}

foreach ($wordArr as $k => $c) {
    if (ctype_upper($c)) {
        $wordArr[$k] = '<i>' . strtolower($c) . '</i>';
    }
}
$word = implode('',$wordArr);
echo $word; 
```

它在键盘中，但他们正在运行一些超级旧版本的 PHP，因此`ctype_upper`未启用... [http://codepad.org/UoLWcK2S](http://codepad.org/UoLWcK2S)

如果有人可以使用 preg_replace 提供更清晰的答案，我很乐意将您的答案标记为答案。

# algorithm - 神经网络和算法，从过去预测未来结果

> ID：13132493
> 
> 赞同：17
> 
> 时间：2012-10-30T04:05:56.447
> 
> 标签：algorithm, neural-network, prediction

我正在研究一种算法，在那里我得到了一些输入并为它们提供了输出，并给出了 3 个月的输出（给予或接受）我需要一种方法来查找/计算可能是未来的输出。
现在，给出的这个问题可能与证券交易所有关，我们被赋予了一定的约束和一定的结果，我们需要找到下一个。
我偶然发现了神经网络股票市场预测，你可以用[谷歌搜索](https://www.google.co.in/#hl=en&sclient=psy-ab&q=neural+networks+stock+market+prediction&oq=neural+networks+stock&gs_l=hp.3.0.0l3j0i30.10255.16257.0.17291.18.14.2.2.2.0.250.2580.0j11j3.14.0.les;..0.0...1c.1.5ZcKSY3V0uo&pbx=1&bav=on.2,or.r_gc.r_pw.r_qf.&fp=44e6e71ca51f30fd&bpcl=36601534&biw=1280&bih=615)，或者你可以在[这里](http://people.ok.ubc.ca/rlawrenc/research/Papers/nn.pdf)、[这里](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.134.1114&rep=rep1&type=pdf)和[这里](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.109.3374&rep=rep1&type=pdf)阅读。

要开始制作算法，我无法弄清楚层的结构应该是什么。
给定的约束是：

*   输出总是整数。
*   输出总是在 1 到 100 之间。
*   说没有确切的输入，就像股票市场一样，我们只知道股票价格会在 1 和 100 之间波动，所以我们可能（或不？）认为这是唯一的输入。
*   我们有过去 3 个月（或更多）的记录。

现在，我的第一个问题是，我需要多少个节点作为输入？

输出只有一个，很好。但正如我所说，我是否应该为输入层使用 100 个节点（假设股票价格总是整数并且总是 btw 1 和 100？）

隐藏层呢？有多少个节点？比如说，如果我在那里也有 100 个节点，我认为这不会对网络进行太多训练，因为我认为对于每个输入，我们还需要考虑所有先前的输入。

假设我们正在计算第 4 个月的第 1 天的输出，我们应该在隐藏/中间层有 90 个节点（为简单起见，假设每个月为 30 天）。现在有两种情况

*   我们的预测是正确的，结果和我们预测的一样。
*   我们的预测失败了，结果与我们预测的不同。

无论如何，现在当我们计算第 4 个月的第二天的输出时，我们不仅需要这 90 个输入，还需要最后一个*结果（而不是预测，同样的！）*，所以我们现在在我们的中间/隐藏层中有 91 个节点。

依此类推，它将每天不断增加节点数量，AFAICT。

所以，我的另一个问题是如何定义/设置隐藏/中间层中的节点数，如果它是动态变化的。

我的最后一个问题是，是否还有其他我不知道的特定算法（对于这种事情/东西）？我应该使用而不是搞乱这些神经网络的东西吗？

最后，有什么我可能遗漏的东西可能会导致我（而不是我正在制作的算法）预测输出，我的意思是任何警告，或者任何可能导致我可能遗漏的错误？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T12:19:28.430

作为您的问题的答案，有很多话要说。实际上，您的问题通常解决了时间序列预测的问题，以及此任务的神经网络应用程序。我在这里只写了几个最重要的键，但在阅读完这篇文章后，您可能应该深入了解 Google 的查询结果`time series prediction neural network`。有很多作品都详细介绍了这些原则。也确实存在各种软件实现（带有源代码）（[这里只是带有 c++ 代码的示例之一](http://codebase.mql4.com/5738)）。

1）我必须说，问题在于 99% 的数据预处理和选择正确的输入/输出因素，而只有 1% 的问题在于要使用的具体工具，无论是神经网络还是其他。顺便说一句，神经网络可以在内部实现大多数其他数据分析方法。例如，您可以将神经网络用于与 SVD 密切相关的主成分分析 (PCA)，在另一个答案中提到。

2）输入/输出值严格适合特定区域的情况非常罕见。现实生活中的数据在绝对值上可以被认为是无界的（即使它的变化似乎产生了一个通道，它也可以在一瞬间被分解），但神经网络只能在稳定的条件下运行。这就是为什么通常首先将数据转换为增量（通过计算第 i 个点和 i-1 之间的增量，或`log`从它们的比率中获取）。我建议您无论如何都要使用您的数据，尽管您声明它在 [0, 100] 区域内。如果你不这样做，神经网络很可能会退化为所谓的*幼稚预测器*，它会产生一个预测，每个下一个值都等于前一个值。

然后将数据归一化为 [0, 1] 或 [-1, +1]。第二个适用于时间序列预测的情况，其中 +1 表示向上移动，-1 - 向下移动。对网络中的神经元使用 hypertanh 激活函数。

3）您应该向 NN 提供从 a 获得的输入数据`sliding window`日期。例如，如果您有一年的数据并且每个点都是一天，您应该选择窗口的大小 - 比如一个月 - 并每天滑动它，从过去到未来。窗口右边界的那一天是 NN 的目标输出。这是一种非常简单的方法（还有更复杂的方法），我之所以提到它只是因为您问如何处理不断到达的数据。答案是——你不需要每天都改变/扩大你的神经网络。只需使用具有固定窗口大小的常量结构并“忘记”（不提供给 NN）最旧的点。重要的是不要将所有数据视为单个输入，而是将其分成许多小向量并在它们上训练 NN，这样网络就可以泛化数据并找到规律性。

4）滑动窗口的大小是你的NN输入大小。输出大小为 1。您应该使用隐藏层大小来找到更好的性能。从输入和输出之间的某个值开始，例如 sqrt(in*out)。

根据最新研究，[循环神经网络](http://en.wikipedia.org/wiki/Recurrent_neural_network)似乎更适合时间序列预测任务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-19T22:48:34.003

我同意斯坦的说法

> 1）我必须说问题在于数据预处理的99％

我将神经网络应用于各种航空航天应用已有 25 多年了，包括直升机飞行控制——设置输入/输出数据集就是一切——其他一切都是次要的。

我很惊讶，在 smirkman 的评论中，神经网络很快就被放弃了，“因为它们没有产生任何有价值的东西”——这告诉我，任何使用神经网络的人都没有使用它们的经验。

鉴于该主题讨论了神经网络股票市场预测 - 我会说我已经成功了。测试结果可从我的网站 www.nwtai.com 下载。

我不会透露它是如何完成的，但有足够多有趣的数据会让你想更认真地探索使用神经网络。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T11:54:21.373

成千上万想要赢得 100 万美元[NetFlix 奖金](http://www.netflixprize.com/)的人对这类问题进行了特别深入的研究。

较早的提交通常基于[K 最近邻](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)。后来的提交是使用[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)、[支持向量机](http://en.wikipedia.org/wiki/Support_vector_machine)和[随机梯度下降](http://en.wikipedia.org/wiki/Stochastic_gradient_descent)进行的。获胜者使用了多种技术的混合。

阅读优秀的[社区论坛](http://www.netflixprize.com//community/)将为您提供许多关于从过去预测未来的最佳方法的见解。您还将找到不同方法的大量源代码。

有趣的是，神经网络很快就被淘汰了，因为它们没有产生任何有价值的东西（我个人还没有看到非平凡的 NN 产生任何有价值的东西）。

如果您刚开始，我建议将 SVD 作为第一条路径；它很容易制作，并且经常对数据产生令人惊讶的见解。

祝你好运！

# ios - html/css -- 试图使图像居中并忽略正文边距

> ID：13132497
> 
> 赞同：0
> 
> 时间：2012-10-30T04:06:19.830
> 
> 标签：ios, css, webkit, block, centering

Foo.html：

```
<!DOCTYPE html>
<head>
    <link rel="stylesheet" type="text/css" href="testStyle.css" />
</head>
<body>
    The appearance of the text is good.  This image should be centered, but it isn't:
    <img class="centerblock" src="ice cream cone and dish.png" width="320" height="200"></img>
</body> 
```

测试样式.css：

```
body {margin-left:30px;}
body {margin-right:30px;}
.centerblock {
    margin-left: auto;
    margin-right: auto;
    display: block;
} 
```

结果：

![在此处输入图像描述](../Images/dea92975398f3ff465184ed6d9ac252e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:33:27.697

尝试：

```
.centerblock {
position:fixed;
top:10px;
left: 10px;
} 
```

也许这会有所帮助，虽然我不知道如果你打开电话会发生什么。

我会让主要内容区域适合显示边缘，并为每个元素定义所有对齐属性。

这样做从来都不是很聪明：

```
body {margin-left:30px;}
body {margin-right:30px;} 
```

还有一个选项：

```
.main-container {
margin: 0 auto;
} 
```

这也集中了所有内容，但我认为，也不会解决你的问题。

# javascript - 获取 Javascript 以应用于类

> ID：13132500
> 
> 赞同：0
> 
> 时间：2012-10-30T04:07:27.707
> 
> 标签：javascript, jquery

目前这里的javascript：

```
<script type="text/javascript">
jQuery(document).ready(function($){ //fire on DOM ready
 $('myimage').addpowerzoom()
})
</script> 
```

仅适用于 id="myimage"

我怎样才能使它适用于 class="myimage"

它引用了一个 .js 文件，我需要在那里进行更改吗？我刚刚下载了一个缩放 javascript。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T04:08:16.443

jQuery 选择器就像 CSS 选择器。

尽管您的原始选择器根本不应该工作，但您可以在它前面加上一个点，它*应该可以*工作：

```
$('.myimage').addpowerzoom(); 
```

# sharepoint - Sharepoint Online iframed 系统与登录

> ID：13132504
> 
> 赞同：1
> 
> 时间：2012-10-30T04:07:44.100
> 
> 标签：sharepoint, login

在 Sharepoint Online 页面和 iFramed 系统之间进行统一登录的最佳方式是什么，该系统也需要自己的登录。我有什么方法可以让 iframe 知道用户已登录并向 iframe 提供用户电子邮件？类似于 FB 对页面标签和应用程序所做的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T11:59:04.600

要做的事情：

首先，默认情况下不要给 IFRAME 元素提供源。在主页的 onload() 上执行此操作。

1.  在 IFRAME 页面中添加一个名为 IFRAME_READEMAIL() 的自定义 JS - 将在 IFRAME 的页面加载时调用。在您阅读隐藏变量的地方添加代码 - hfEmail
2.  在您的主页中，使用 JQUERY，加载 GET THE IFRAME 对象并设置 hfEmail 的值

流程是这样
的：加载主页面，然后将 IFRAME 的 SRC 设置为所需页面，然后设置 IFRAME 的隐藏字段。IFRAME 拾取 HIDDEN 变量并使用它。

不确定您在 IFRAME 的 location.href 中获得了什么 URL，但如果您将 IFRAME 的实际 SRC 作为 location.href，那么您可以在主页中设置 SRC，如下所示： `$('MYFAME').attr('src','http://mysite/mypage.aspx?email=' + YOURVARIABLE)`

# ruby-on-rails-3 - Capybara 歧义解析

> ID：13132506
> 
> 赞同：101
> 
> 时间：2012-10-30T04:08:04.470
> 
> 标签：ruby-on-rails-3, rspec, capybara

如何解决 Capybara 中的歧义？出于某种原因，我需要页面中具有相同值的链接，但由于出现错误，我无法创建测试

```
Failure/Error: click_link("#tag1")
     Capybara::Ambiguous:
       Ambiguous match, found 2 elements matching link "#tag1" 
```

我无法避免这种情况的原因是因为设计。我正在尝试使用右侧的推文/标签和页面左侧的标签重新创建 twitter 页面。因此，相同的链接页面不可避免地会出现在同一页面上。

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-11-14T21:08:15.653

我的解决方案是

```
first(:link, link).click 
```

代替

```
click_link(link) 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-10-15T08:12:18.483

Capybara 的这种行为是故意的，我认为不应像大多数其他答案中所建议的那样对其进行修复。

Capybara 2.0 之前的版本返回第一个元素而不是引发异常，但后来 Capybara 的维护者认为这是一个坏主意，最好提高它。决定在许多情况下返回第一个元素导致返回的不是开发人员想要返回的元素。

此处最受好评的答案建议使用`first`or`all`代替`find`but：

1.  `all`并且`first`不要等到带有此类定位器的元素会出现在页面上，尽管`find`确实会等待
2.  `all(...).first`并且`first`不会保护您免受将来带有此类定位器的另一个元素可能出现在页面上的情况，因此您可能会发现不正确的元素

所以[建议选择另一个不那么模棱两可的定位器](http://techblog.fundinggates.com/blog/2012/08/capybara-2-0-upgrade-guide/)：例如，通过 id、class 或其他 css/xpath 定位器选择元素，这样只有一个元素会匹配它。

* * *

作为注释，这里有一些我通常认为在解决歧义时有用的定位器：

*   `find('ul > li:first-child')`

    `first('ul > li')`它比等到第一个`li`出现在页面上更有用。

*   `click_link('Create Account', match: :first)`

    这比`first(:link, 'Create Account').click`它会等到至少一个创建帐户链接出现在页面上要好。但是我认为最好选择不会出现在页面上两次的唯一定位器。

*   `fill_in('Password', with: 'secret', exact: true)`

    `exact: true`告诉 Capybara 只查找完全匹配，即不查找“密码确认”

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-03-20T19:22:23.410

上述解决方案效果很好，但对于那些好奇的人，您也可以使用以下语法。

```
click_link(link_name, match: :first) 
```

您可以在这里找到更多信息：

[http://taimoorchangaizpucitian.wordpress.com/2013/09/06/capybara-click-link-different-cases-and-solutions/](http://taimoorchangaizpucitian.wordpress.com/2013/09/06/capybara-click-link-different-cases-and-solutions/)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2012-10-30T05:52:04.473

新答案：

你可以尝试类似的东西

```
all('a').select {|elt| elt.text == "#tag1" }.first.click 
```

可能有一种方法可以更好地利用可用的 Capybara 语法——类似的东西，`all("a[text='#tag1']").first.click`但我想不出正确的语法，也找不到合适的文档。也就是说，一开始情况有点奇怪，有两个`<a>`标签具有相同`id`的`class`, 和 text 。有没有可能他们是不同 div 的孩子，因为你可以做你`find` `within`适当的 DOM 部分。（这将有助于查看您的一些 HTML 源代码）。

* * *

旧答案：（我认为“#tag1”表示该元素具有`id`“tag1”）

您想点击哪个链接？如果是第一个（或者没关系），你可以做

```
find('#tag1').click 
```

否则你可以做

```
all('#tag1')[1].click 
```

单击第二个。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-11-05T23:17:26.847

您可以确保使用以下命令找到第一个`match`：

```
find('.selector', match: :first).click 
```

但重要的是，**您可能不想这样做**，因为它会导致忽略重复输出代码气味的**脆弱测试**，进而导致**误报**，当它们应该失败时继续工作，因为您删除了一个匹配元素，但测试愉快地找到了另一个。

更好的选择是使用`within`：

```
within('#sidebar') do
  find('.selector).click
end 
```

这可确保您找到您希望找到的元素，同时仍然利用 Capybara 的自动等待和自动重试功能（如果使用，则会丢失`find('.selector').click`），并且它可以更清楚地说明意图是什么。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-03-03T19:52:58.173

要在此处添加现有知识体系：

对于 JS 测试，Capybara 必须保持两个线程（一个用于 RSpec，一个用于 Rails）和第二个进程（浏览器）同步。它通过在大多数匹配器和节点查找方法中等待（直到配置的最大等待时间）来做到这一点。

Capybara 也有不等待的方法，主要是`Node#all`. 使用它们就像告诉您的规格您希望它们间歇性地失败。

接受的答案表明`page.first('selector')`。这是不可取的，至少对于 JS 规范而言，因为[`Node#first`使用`Node#all`](https://github.com/teamcapybara/capybara/blob/2.6.2/lib/capybara/node/finders.rb#L204).

也就是说，如果您像这样配置 Capybara ，`Node#first` *将等待：*

```
# rails_helper.rb
Capybara.wait_on_first_by_default = true 
```

此选项是[在 Capybara 2.5.0 中添加的](https://github.com/teamcapybara/capybara/blob/master/History.md#version-250)，默认为 false。

正如安德烈提到的，你应该改用

```
find('selector', match: :first) 
```

或更改您的选择器。无论配置或驱动程序如何，都可以正常工作。

更复杂的是，在旧版本的 Capybara（或启用了配置选项）中，`#find`会很高兴地忽略歧义并只返回第一个匹配的选择器。这也不是很好，因为它使您的规范不那么明确，我想这就是为什么不再是默认行为。我将省略细节，因为它们已经在上面讨论过。

更多资源：

*   [https://thoughtbot.com/blog/write-reliable-asynchronous-integration-tests-with-capybara](https://thoughtbot.com/blog/write-reliable-asynchronous-integration-tests-with-capybara)
*   [https://makandracards.com/makandra/20829-threads-and-processes-in-a-capybara-selenium-session](https://makandracards.com/makandra/20829-threads-and-processes-in-a-capybara-selenium-session)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-10-12T18:22:05.637

由于[这篇文章](http://www.elabs.se/blog/60-introducing-capybara-2-1)，您可以通过“匹配”选项修复它：

```
Capybara.configure do |config|
  config.match = :prefer_exact
end 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-14T02:46:20.867

考虑到上述所有选项，您也可以尝试一下

```
find("a", text: text, match: :prefer_exact).click 
```

如果你用的是黄瓜，你也可以按照这个

您可以从场景步骤中将文本作为参数传递，这可以是通用步骤以再次重用

就像是`When a user clicks on "text" link`

并在步骤定义中`When(/^(?:user) clicks on "([^"]*)" (?:link)$/) do |text|`

这样，您可以通过最小化代码行来重用相同的步骤，并且可以轻松编写新的黄瓜场景

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-25T06:23:14.923

避免在黄瓜中出现模棱两可的错误。

解决方案 1

```
first("#tag1").click 
```

解决方案 2

```
Cucumber features/filename.feature --guess 
```

# java - android获取纵向和横向的可用高度和宽度

> ID：13132511
> 
> 赞同：7
> 
> 时间：2012-10-30T04:09:06.000
> 
> 标签：java, android, android-layout

所以我在我的活动中编写了以下方法：

```
private void setDisplayMetrics(){

    DisplayMetrics metrics = this.getResources().getDisplayMetrics();
    int dh       = metrics.heightPixels;
    int dw       = metrics.widthPixels;

    if(dw < dh){
        deviceWidth  = dw;
        deviceHeight = dh;
    }else{
        deviceWidth  = dh;
        deviceHeight = dw;
    }

    System.err.println("--------------> dh : "+deviceHeight+" | dw "+deviceWidth);

} 
```

它工作得很好，从某种意义上说，它以极高的准确性和可靠性让我获得了屏幕的总宽度和高度（这是我要求它做的）。

这是问题所在。在较旧的 android 设备上，屏幕尺寸与应用程序可以占用的尺寸相同，上面的脚本帮助我设置应用程序中元素的大小。**但是**对于 android ICS，我在屏幕底部有这个图形按钮栏，它弄乱了我的整个策略。

![在此处输入图像描述](../Images/a778743935db348721245c9042f6d748.png)

我真正想要的是能够以一种方法同时获得纵向视图和横向视图的可用应用程序尺寸。并且无论上图所示的条是否存在，这些尺寸都是准确的。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:42:25.613

```
Rect rectgle= new Rect();
Window window= getWindow();
window.getDecorView().getWindowVisibleDisplayFrame(rectgle);
int StatusBarHeight= rectgle.top;
int contentViewTop= 
    window.findViewById(Window.ID_ANDROID_CONTENT).getTop();
int TitleBarHeight= contentViewTop - StatusBarHeight;

   Log.i("*** Jorgesys :: ", "StatusBar Height= " + StatusBarHeight + " , TitleBar Height = " + TitleBarHeight); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T20:38:00.637

根据我目前所读到的内容，您无法直接获得这个高度。通过 getWindowVisibleDisplayFrame() 的方法似乎不起作用。到目前为止，我发现的唯一有希望的解决方案是使用自定义布局来测量屏幕尺寸，如 [http://evgeni-shafran.blogspot.de/2011/01/android-screen-size-problem.html](http://evgeni-shafran.blogspot.de/2011/01/android-screen-size-problem.html)中所述。我相信这会奏效，但对我来说，这似乎比它的价值更麻烦。

# rabbitmq - 为什么 Channel.waitForConfirmsOrDie 不阻塞？

> ID：13132512
> 
> 赞同：5
> 
> 时间：2012-10-30T04:09:17.480
> 
> 标签：rabbitmq

我有一个发布 - 订阅用例，我想在发布端阻止，直到每个订阅者确认他们已完成对发布者发送的消息的处理。

我（错误地？）假设我可以使用 RabbitMQ 及其 Java amqp-client 的 Channel.waitForConfirmsOrDie 方法作为我的解决方案的一部分。问题是我还没有发现 waitForConfirmsOrDie 实际上会阻塞的情况。

根据[javadocs](http://www.rabbitmq.com/javadoc/com/rabbitmq/client/Channel.html#waitForConfirmsOrDie%28%29)， waitForConfirmsOrDie 应该：

> 等到自上次调用以来发布的所有消息都已被代理确认或确认。如果有任何消息被取消，waitForConfirmsOrDie 将抛出 IOException。在非确认通道上调用时，它将立即返回。

为了测试这个方法是否真的有效，我[从 RabbitMQ 网站上的这个示例代码](http://hg.rabbitmq.com/rabbitmq-java-client/raw-file/da241e35951b/test/src/com/rabbitmq/examples/ConfirmDontLoseMessages.java)开始。

示例代码创建了一个发布者和一个消费者，每个都在自己的单独线程上。然后发布者将消息发送到交换，而消费者消费消息。似乎发布者应该阻止，直到所有消息都通过调用 waitForConfirmsOrDie() 得到确认。

这个示例代码似乎与我想要做的完全匹配。但是，它似乎不像我想象的那样工作。事实上，如果在消费者线程中，我关闭了自动确认消息，那么 waitForConfirmsOrDie() 仍然会立即返回。

我通过将一个 false 更改为 true 来关闭自动确认： `ch.queueDeclare(QUEUE_NAME, false, false, false, null);` 变为 `ch.queueDeclare(QUEUE_NAME, true, false, false, null);`（第二个参数 false 而不是 true）。我相信这意味着消费者不应再发送确认信息。

那么 waitForConfirmsOrDie() 实际上做了什么？什么时候会阻塞？

如果 waitForConfirmsOrDie 没有做我想做的事，有没有办法让发布者等到所有订阅者都确认消息后再继续？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T08:23:57.393

据我了解，这些电话不应该等待消费者的确认。方法的目的`waitForConfirms*`是确保您的消息被传递到代理并提供基本的传递/失败类型的通知。换句话说，如果 rmq 节点之一（或什至所有节点）失败/不可用，消息不会在不通知产品的情况下消失。

如果您在通话前断开或关闭 rmq，您可以看到此异常`basicPublish`。

# c# - 当绑定源变为空时，如何阻止 ListBox 的 ItemsSource 被清除？

> ID：13132517
> 
> 赞同：1
> 
> 时间：2012-10-30T04:09:56.467
> 
> 标签：c#, wpf, xaml, data-binding

**背景：**

考虑这个 XAML 片段：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="100"/>
    </Grid.RowDefinitions>
    <DataGrid
        Grid.Row="0"
        x:Name="dataGrid"
        AutoGenerateColumns="False"
        ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type Window}}, Path=Bobs}"
        >
        <DataGrid.Columns>
            <DataGridTextColumn
                Header="Name"
                Binding="{Binding Name}"
                MinWidth="75"
                />       
        </DataGrid.Columns>
    </DataGrid>   
    <ListBox
        Grid.Row="1"
        x:Name="listBox"
        DisplayMemberPath="Name"
        ItemsSource="{Binding ElementName=dataGrid, Path=SelectedItem.Regions}"
        SelectionMode="Multiple"
        >
        <Interactivity:Interaction.Behaviors>
            <ListBoxBehaviors:SynchronizeSelectedItemsBehavior Selections="{Binding ElementName=dataGrid, Path=SelectedItem.SelectedRegions}"/>
        </Interactivity:Interaction.Behaviors>
    </ListBox>
</Grid> 
```

假设我有一个单独的控件，它在切换时会将 Grid 的 IsEnabled 属性设置为 false。这样做的效果是禁用网格中的 DataGrid 和 ListBox 控件。

在 .NET 4.0 中，禁用 DataGrid 的不幸副作用是[DataGrid 取消选择所有单元格](https://stackoverflow.com/questions/6610967/wpf-datagrid-retain-selection-when-disabling)，因此其 SelectedItem 丢失。这具有触发 ListBox 的 ItemsSource 绑定的副作用，导致 ItemsSource 被清除，因为 dataGrid 的 SelectedItem 已变为空。

**问题：**

如何更改绑定或更改我的 XAML，以便当 dataGrid 的 SelectedItem 变为 null 时，不会清除 ListBox 的项目集合。

**附录：**

1.  我意识到取消选择 DataGrid 行为已在 .NET 4.5 中删除，但现在升级不是一个选项。
2.  我知道有规避取消选择 DataGrid 行为的解决方案；我想知道是否可以在不使用它们的情况下解决我的问题。

# asp.net-mvc - 在 ASP.NET MVC 中无法访问服务器变量

> ID：13132520
> 
> 赞同：3
> 
> 时间：2012-10-30T04:10:09.993
> 
> 标签：asp.net-mvc, iis-7

我在 IIS 7 的同一个应用程序池中托管了两个 Web 应用程序。一个是 ASP.NET 应用程序，另一个是 ASP.NET MVC 应用程序。当我转到 ASP.NET 中的 Web 应用程序并单击一个链接时，它应该启动托管在同一应用程序池中的 MVC 中的另一个 Web 应用程序。我可以在 ASP.NET 应用程序中访问服务器变量，但我无法在 ASP.NET MVC 中访问服务器变量。这在 IIS 6.0 中有效，但在 IIS 7.0 中无效。非常感谢任何想法和建议。

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-07T21:07:39.090

您不应该看到对方的应用程序数据（无论是服务器变量还是其他）。这个是正常的。仅仅因为它们处于同一进程中，这并不提供对它们的访问权限。

# python - python调度程序

> ID：13132521
> 
> 赞同：2
> 
> 时间：2012-10-30T04:10:11.310
> 
> 标签：python, threadpool, scheduler

我正在寻找一个python中的调度程序，它将同时启动一系列线程（正好8个），当其中一个线程完成时，它将向作业池添加一个新线程，并启动它。这个过程将一直持续到所有线程（~100）都完成为止。

我看过 APScheduler 包。也许通过使用 add_job，我也许可以做到，但由于找不到任何示例，所以不清楚。

```
add_job(trigger, func, args, kwargs, jobstore='default', **options) 
```

有谁知道如何在这个函数中设置触发器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T17:42:07.913

这个问题的答案是使用并发期货

[http://docs.python.org/dev/library/concurrent.futures.html](http://docs.python.org/dev/library/concurrent.futures.html)

# sql-server - 在 SQL Server 2008 表触发器中选择 Change_Tracking_Current_Version()

> ID：13132526
> 
> 赞同：1
> 
> 时间：2012-10-30T04:11:24.883
> 
> 标签：sql-server, sql-server-2008, triggers

我正在使用 SQL Server 2008，并且在我的数据库上启用了更改跟踪。在数据库中的一张表上，我创建了以下触发器。

```
CREATE TRIGGER [dbo].[tr_student]
   ON [dbo].[Student]
   FOR UPDATE,DELETE
AS 
BEGIN
   SET NOCOUNT ON;
   SELECT CHANGE_TRACKING_CURRENT_VERSION()
END 
```

此触发器的目的是 - 当我更新或删除表 dbo.Student 中的记录时，我应该获得当前更改跟踪版本 ID。

但是当我更新/删除表中的记录时，CHANGE_TRACKING_CURRENT_VERSION() 不是给出当前的version_id，而是给出以前的version_id。触发触发器后，如果我执行 select CHANGE_TRACKING_CURRENT_VERSION() 我将获得正确的当前版本 ID。

那么 Change_Tracking_Current_Version() id 是否仅在触发后更改？有什么方法可以在触发器中获得正确的 Change_Tracking_Current_Version() 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T12:31:15.750

[根据手册](http://msdn.microsoft.com/en-us/library/bb933945.aspx "CHANGE_TRACKING_CURRENT_VERSION (Transact-SQL)")，这个功能

> **返回与最后提交**的事务关联的版本。

*（重点是我的。）*

当您的触发器正在执行时，事务尚未提交。所以是的，新值将在触发*后返回。*

此外，无法*在*触发器中获取新 ID，因为如手册中[其他地方](http://msdn.microsoft.com/en-us/library/bb933994.aspx "跟踪数据更改 (SQL Server)")所述，

> 更改跟踪基于已**提交**的事务。

*（重点是我的。）*

# php - PHP：使用动态浓度和 API 理解缓存

> ID：13132528
> 
> 赞同：0
> 
> 时间：2012-10-30T04:11:57.427
> 
> 标签：php, json, api, caching, dynamic

我有一个 php 文件，我正在使用一个 API，如果我有一个 id，我可以通过 API 获取数据。但是，我目前正在学习如何创建缓存系统。API 数据通过 JSON 数据检索。所以我想知道，是否可以不断地将 JSON 数据添加到其中已经包含 JSON 数据的现有缓存文件中，所以当我有一个 id 时，下次我将搜索与 id 匹配的缓存文件而不是搜索API（与任何 API 一样有限制）。

也许创建多个数组并搜索 id 键？

我希望有人能理解这一点吗？我仍在四处寻找以帮助我使用缓存脚本，如果有人有任何想法我可以查看，那也将非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:27:43.690

没必要那样做。缓存通常基于从上次请求经过的时间。在您的情况下，由于您通过 API 请求数据，我认为最好将结果缓存几分钟或根本不缓存它。

# jquery - Django Jquery Ajax

> ID：13132531
> 
> 赞同：1
> 
> 时间：2012-10-30T04:12:46.437
> 
> 标签：jquery, ajax, django

经过搜索，我还没有在网上找到我的 jquery 相关问题的解决方案。

`(div class='rate')`我希望通过 ajax 更新页面上有多个元素。索引.html：

```
 {% for thing in thing_list %}
    <div class='rate'><a href='{% url thing_rating %}'>Rate</a></div>
    {% endfor %} 
```

他们引用了一个类似的 url：urls.py

```
url(r'^(?P<object_id>\d+)/rate/(?P<score>[\d\-]+)/$', 'myview', name='thing_rating'), 
```

我确实`request.is_ajax()`在视图中检查：view.py：

```
def myview(request):
    if request.is_ajax():
        // doing some other stuff here
        return render_to_response('rate.html', context_instance=RequestContext(request)) 
```

我的 ajax 需要帮助..：

```
$( document ).ready( function() {
$('div#rate').click(function(){
  $.ajax({
  type: "POST",
  url:"/????/",
  data: { ????? },
  success: function(data){ ????? },
  error: function(){ alert("Error"); },
});
} 
```

如何在上面的 jquery 中引用 url？通过与我的 urls.py 相同的正则表达式？

我应该传递什么作为数据和成功函数？在我看来，所有繁重的工作都已完成。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:51:24.357

由于您要返回呈现的模板。因此，我建议在 ajax() 函数中使用 html dataType 并将其附加到要显示它的 div 中。如果您还有其他问题，请告诉我。

```
function vote(){
    $('div#vote').click(function(e){
      e.preventDefault();
      var href = $(this).attr('href'); //Referring the anchor object which is clicked
      $.ajax({
      type: "POST",
      url:href,
      dataType: html,
      success: function(data, status, xhr){ $('#div_to_load_html').html(data); },
      error: function(){ alert("Error"); },
    });
    } 
```

# android - 如何从扩展 Activity 的类开始扩展片段的意图？

> ID：13132532
> 
> 赞同：0
> 
> 时间：2012-10-30T04:12:48.470
> 
> 标签：android, android-intent

我从扩展的类开始`intent`扩展时遇到问题。`Fragment``Activity`

**TabBar2.class --> 扩展 Activity**

**Favourite.class --> 扩展片段**

这就是我写我的意图的方式。

```
Intent intent1 = new Intent(TabBar2.this, Favourite.class);
startActivity(intent1); 
```

但是当我运行意图时，我的应用程序崩溃了`onClick`。我的 logCat 说

```
Unable to instantiate activity
 ComponentInfo{com.honey.test/com.honey.test.Favourite}:
 java.lang.ClassCastException: com.honey.test.Favourite 
```

我做错什么了？有人可以指导我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T04:19:00.660

这是因为你不能通过 Intent 调用 Fragments，Fragment 是 FragmentActivity 的一部分

总而言之 Fragment 是一个内容而不是容器，所以你需要创建一个 FragmentActivity 并在其中添加 Fragment(Favourite) ，然后调用

```
Intent intent1 = new Intent(TabBar2.this, SomeFragmentActivity.class);
startActivity(intent1); 
```

`A Fragment is a piece of an application's user interface or behavior that can be placed in an Activity` [**更多信息**](http://developer.android.com/reference/android/app/Fragment.html)

# python - 反思什么时候不再值得？

> ID：13132534
> 
> 赞同：5
> 
> 时间：2012-10-30T04:13:44.070
> 
> 标签：python, reflection, coding-style

我刚刚用大约 12 个几乎相同的单行代码重构了一个脚本，它使用反射将静态方法动态绑定到一个类。

重构的版本[**可以在这里找到**](https://github.com/yarian/brewerydb/blob/68144495111d6302cf781e29267909558a8a05f2/brewerydb.py)。并且[**在这里重构之前**](https://github.com/yarian/brewerydb/blob/d2d3c0dea8c81de147ea59e60760d699408123cd/brewerydb.py)。

我的问题是：这看起来是否过度设计？我是否在追求一些实践中的学术优雅，比明显的方式更糟糕？重构后的形式更短（大约 70 行）并且更“漂亮”（对于某些定义的美的概念），但新手程序员可能根本不理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:37:41.690

“幼稚”方法的一个问题是可维护性——您有 12 倍的方法来维护、调试和测试。想象一下，您需要为所有这些添加一个额外的参数......随着时间的推移，这些方法将变得非常相似但不完全相同。因此，“复杂”的方法可能会随着时间的推移而得到回报。

顺便说一句，28 种“幼稚”方法之一中存在一个错误，其余 27 种方法中都不存在 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:35:34.170

代码应该易于阅读和编写（没有错误）。短篇易写，难懂。

如果您必须选择一个，我会选择较短的，因为它不太可能遇到错误。对它的工作方式进行大量评论，也许可以举例说明它应该返回的内容。如果可能，尽量减少重复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T04:48:12.213

通常我会避免回答这些问题，因为我处于您提到的新手级别的低端，但是既然您提到了它...... :)

我发现更“工程化”的版本更容易消化，特别是因为你提到的单行代码更少。理解第二个版本中发生的事情的概念飞跃只需要像我这样的人（再次，超级新手）就可以遵循，但是一旦该部分浸入，设计的相对简单/优雅（以及更明显的分组）要声明的方法的数量）远远超过任何额外的时间来理解这个概念。

再说一次，我的意见是最后一个真正重要的，但如果我发现自己在阅读别人的代码（或我自己的）并在一分钟后想“啊，现在这是做事的好方法”（而不是“好吧，现在我在写这篇文章时在想什么，它又是如何工作的？”），我觉得它在正确的位置（这是我与你的结束的地方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:25:06.070

我的意见是，让代码尽可能简单和直接。这意味着新手和专家都应该可以理解它。

如果您的代码保持*重点*，即使是新手或中级程序员，也很容易修改和扩展。修改的能力发展了“解决方案”。进化的解决方案是一个好的解决方案的一个例子:-)。

顺便说一句，我认为这个问题属于[Code Review.SE](https://codereview.stackexchange.com/)，但我可能是错的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T04:41:43.353

                                  ![简单和优雅必须与生产力和实践相平衡。](../Images/9fbffff19798ecc674ad304cbd123e59.png)

# mysql - MySQL重复条目错误，即使没有重复条目

> ID：13132535
> 
> 赞同：33
> 
> 时间：2012-10-30T04:13:47.030
> 
> 标签：mysql, primary-key, mysql-error-1062, duplicates

我正在使用 MySQL 5.1.56，MyISAM。我的表如下所示：

```
CREATE TABLE IF NOT EXISTS `my_table` (
  `number` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `money` int(11) NOT NULL,
  PRIMARY KEY (`number`,`name`)
) ENGINE=MyISAM; 
```

它包含这两行：

```
INSERT INTO `my_table` (`number`, `name`, `money`) VALUES
(1, 'S. Name', 150), (2, 'Another Name', 284); 
```

现在我正在尝试插入另一行：

```
INSERT INTO `my_table` (`number`, `name`, `money`) VALUES
(2, 'S. Name', 240); 
```

而 MySQL 只是在告诉我这个时不会插入它：

```
#1062 - Duplicate entry '2-S. Name' for key 'PRIMARY' 
```

我真的不明白。主键位于前两列（两者），所以我试图插入的行有一个唯一的主键，不是吗？

我尝试修复表，尝试优化表，均无济于事。另请注意，我无法从 MyISAM 更改为 InnoDB。

我错过了什么还是这是 MySQL 或 MyISAM 的错误？谢谢。

**总结并指出我认为问题出在哪里（即使不应该存在）：** 表在两列上有主键。我正在尝试在这两列中插入具有新值组合的行，但第一列中的值已经在某行中，第二列中的值已经在另一行中。但它们并没有在任何地方结合在一起，所以我相信这应该有效，但我很困惑地看到它没有。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T04:30:38.867

您的代码和架构都可以。您可能正在尝试使用以前版本的表。

[http://sqlfiddle.com/#!2/9dc64/1/0](http://sqlfiddle.com/#!2/9dc64/1/0)

您的表甚至没有 UNIQUE，因此该表上不可能出现错误。

从该表中备份数据，将其删除并重新创建。

也许你试图运行它`CREATE TABLE IF NOT EXIST`。它没有创建，你有旧版本，但没有错误，因为`IF NOT EXIST`.

您可以像这样运行 SQL 来查看当前的表结构：

```
DESCRIBE my_table; 
```

* * *

编辑 - 稍后添加：

尝试运行这个：

```
DROP TABLE `my_table`; --make backup - it deletes table

CREATE TABLE `my_table` (
  `number` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `money` int(11) NOT NULL,
  PRIMARY KEY (`number`,`name`),
  UNIQUE (`number`, `name`) --added unique on 2 rows
) ENGINE=MyISAM; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-09-03T20:32:48.063

我知道在这种情况下这不是问题，但是在创建复合主键时我遇到了类似的“重复条目”问题：

```
ALTER TABLE table ADD PRIMARY KEY(fieldA,fieldB); 
```

错误类似于：

```
#1062 Duplicate entry 'valueA-valueB' for key 'PRIMARY' 
```

所以我搜索：

```
select * from table where fieldA='valueA' and fieldB='valueB' 
```

输出只显示 1 行，没有重复！

一段时间后，我发现如果您在这些字段中有 NULL 值，您会收到这些错误。最后，错误消息有点误导我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-03-25T17:37:16.023

我有一个类似的问题，但在我的情况下，我使用了不区分大小写的排序规则 - `utf8_general_ci`。

因此，当我尝试插入两个在区分大小写的比较中不同但在不区分大小写的比较中相同的字符串时，MySQL 触发了错误，我无法理解这是什么问题，因为我使用了区分大小写的搜索。

解决方案是更改表的排序规则，例如我使用的排序规则`utf8_bin`是区分大小写的（或者`utf8_general_cs`也应该是合适的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-07-06T08:33:38.227

在我的情况下，错误是由过时的架构引起的，最初是一列，`varchar(50)`但我尝试导入的转储是从`varchar(70)`该列的架构的修改版本创建的（以及该字段的某些条目使用更多超过 50 个字符）。

在导入期间，一些键被截断，截断的版本不再是唯一的。花了一段时间才弄明白，我当时想“但是这个所谓的重复键根本不存在！”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-02T12:40:59.623

**如果这对 OP 以外的任何人都有帮助，我在使用InnoDB**时遇到了类似的问题。

对我来说，真正发生的是外键约束失败。我引用了一个不存在的外键。

换句话说，错误完全消失了。主键很好，插入外键首先解决了问题。不知道为什么 MySQL 突然出错了。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-06T19:42:33.943

不太常见的情况，但请记住，根据 DOC [https://dev.mysql.com/doc/refman/5.6/en/innodb-online-ddl-limitations.html](https://dev.mysql.com/doc/refman/5.6/en/innodb-online-ddl-limitations.html)

> 运行在线 ALTER TABLE 操作时，运行 ALTER TABLE 操作的线程将应用 DML 操作的“在线日志”，这些操作是从其他连接线程在同一张表上同时运行的。应用 DML 操作时，可能会遇到重复键条目错误（ERROR 1062 (23000): Duplicate entry），即使重复条目只是暂时的并且会被“在线日志”中的后续条目恢复. 这类似于 InnoDB 中的外键约束检查的想法，其中约束必须在事务期间保持。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T04:27:42.353

尝试使用自动增量：

```
CREATE TABLE IF NOT EXISTS `my_table` (
   `number` int(11) NOT NULL AUTO_INCREMENT,
   `name` varchar(50) NOT NULL,
   `money` int(11) NOT NULL,
    PRIMARY KEY (`number`,`name`)
) ENGINE=MyISAM; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-30T04:31:49.570

您的代码在此演示中运行良好：

## [http://sqlfiddle.com/#!8/87e10/1/0](http://sqlfiddle.com/#!8/87e10/1/0)

我认为您正在执行第二次查询（插入...）两次。尝试

```
select * from my_table 
```

在插入新行之前，您会知道您的数据是否已经存在。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-06-19T07:14:47.493

我刚试过，如果你有数据和表重新创建不起作用，只需将表更改为 InnoDB 并重试，它会解决问题

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-07-19T00:13:23.157

万一其他人发现这个线程有我的问题——我在 MySQL 中使用了“整数”列类型。我试图插入的行有一个主键，其值大于整数允许的值。切换到“bigint”解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-06T07:08:55.023

根据您的代码，您的“数字”和“名称”是主键，并且您在两行中都插入了 S.NAME，因此会产生冲突。我们正在使用主键来访问完整的数据。在这里，您无法使用主键“名称”访问数据。

我是初学者，我认为这可能是错误。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-19T22:16:49.650

就我而言，该错误非常具有误导性。问题是当您单击“使唯一”按钮而不是“ALTER IGNORE TABLE”时，PHPMyAdmin 使用“ALTER TABLE”，所以我必须手动进行，例如：

```
ALTER TABLE mytbl ADD UNIQUE (columnName); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-15T16:50:01.143

当添加列或使用现有列作为主键时，通常会创建此问题。由于存在从未实际创建的主键或由于表损坏而未创建它。

该错误实际上表示的是挂起的键值是空白的。

解决方案是使用唯一值填充列，然后尝试再次创建主键。**不能有空白、空值或重复值，否则会出现这种误导性错误。**

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-25T07:55:16.253

对我来说，餐桌上的 noop 就足够了（已经是 InnoDB）：

```
ALTER TABLE $tbl ENGINE=InnoDB; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-09-28T03:14:48.443

tl；博士：我的视图显示我的表是空的，但视图排除了现有行。

我遇到了同样的问题，但我的问题是因为我插入了之前使用过的相同测试行。当我检查我的表是否为空时，我使用了一个排除不同租户的视图，因此搜索结果为空。当我检查实际表时，以前的记录仍然存在。

一旦我删除了现有记录，插入就起作用了。只有半天的挫败感输给了这个……

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-01-31T09:15:11.563

出现此错误，当添加复合主键时，`ADD PRIMARY KEY (column1, column2, ...)`该行中所有列的值不得重复。

例如：你做`ADD PRIMARY KEY (name, country, number)`

| 姓名 | 国家 | 数字 |
| --- | --- | --- |
| 科林 | 英国 | 5 |
| 科林 | 英国 | 5 |

这将引发错误`#1062 - Duplicate entry 'collin-UK-5' for key 'PRIMARY'`，因为合并的列有重复

因此，如果您看到这种格式的错误，只需检查并确保要添加复合主键以组合的列没有重复项。

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2012-10-30T04:36:20.027

在查看您的错误`#1062 - Duplicate entry '2-S. Name' for key 'PRIMARY'`时，它是说您在数字字段中使用了主键，这就是为什么它在数字字段上显示重复错误的原因。所以删除这个主键然后它也插入重复。

# fullcalendar - 自定义三天视图问题

> ID：13132537
> 
> 赞同：0
> 
> 时间：2012-10-30T04:14:07.023
> 
> 标签：fullcalendar

我正在尝试调整 fullcalendar 以适应较小的屏幕（iPhone），并且我正在尝试通过显示 3 天而不是 7 天来创建有用的周视图。将显示的列更改为 3 天是一个简单的修改，但这会导致问题渲染事件时。没有出现在正确的一天！

这是修改后的源代码：

```
function BasicWeekView(element, calendar) {
...
    function render(date, delta) {
        if (delta) {
        addDays(date, delta * 3);
        }
        var start = addDays(cloneDate(date), 3);
        var end = addDays(cloneDate(start), 3);
        var visStart = cloneDate(start);
        var visEnd = cloneDate(end);
        t.title = formatDates(
            visStart,
            addDays(cloneDate(visEnd), -1),
            opt('titleFormat')
        );
        t.start = start;
        t.end = end;
        t.visStart = visStart;
        t.visEnd = visEnd;
        renderBasic(1, 1, 3, false);
    }
} 
```

这会导致事件渲染不正确，我不知道为什么？我已经浏览了源头，并试图将其追溯到原因，但没有成功。单击日期仍然会显示正确的日期（通过 dayClick），所以我没有想法。

为了更详细地说明错误，几乎每个事件都呈现不正确。第三天通常会在第一天渲染事件或根本不渲染（即 1px 宽）。第二天在第三天渲染事件，在第二天渲染第一天。周末的处理也很奇怪，有时当移动到下一个日期或上一个日期时，它会变为日视图。

我完全感到困惑，并希望得到一些帮助。我已经挖掘了api并在没有运气的情况下解决了堆栈交换的问题......任何帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-15T23:47:05.713

我希望在 Android 上使用 Full Calendar 做类似的事情。Full Calendar 版本 2.2.5 中有一个更新，允许进行这种自定义。

现在可以通过以下方式完成：

```
views: {
  agendaThreeDay: {
    type: 'agenda',
    duration: { days: 3 },
    buttonText: '3 day'
  },
  defaultView: 'agendaThreeDay'
} 
```

自定义完整的日历仍然是一场噩梦，但它已经走过了漫长的道路。[您可以从Custom Views](http://fullcalendar.io/docs/views/Custom_Views/)的文档页面获得更多信息。

# coldfusion - Coldfusion 雅虎联系人导入

> ID：13132540
> 
> 赞同：1
> 
> 时间：2012-10-30T04:14:27.953
> 
> 标签：coldfusion, yahoo-api

谁能帮我将雅虎联系人导入网站，我按照[http://developer.yahoo.com](http://developer.yahoo.com)中的步骤操作，我使用了访问令牌，`signature_method=plaintext`但是当我使用访问令牌并尝试使用`HMAC-sha`1 签名方法检索联系人时，我我收到一个错误

> OAuth oauth_problem="signature_invalid", realm="yahooapis.com"

有人可以帮我解决这个问题。

# excel-2010 - excel数据透视表排序

> ID：13132541
> 
> 赞同：0
> 
> 时间：2012-10-30T04:14:41.230
> 
> 标签：excel-2010, pivot-table

数据透视表如何对行标签和列标签中的数据进行排序

结果对我来说很奇怪。

由于源工作表有一列数据格式为“年月周”（例如 2012 年 10 周 4）作为文本数据

当将此列用作数据透视表中的行标签和列标签时，结果为

2012 08 周 4 2012 09 周 1 2012 09 周 4 2012 09 周 3 2012 09 周 2

源表的数据顺序正确 2012 09 wk 1, wk 2, wk 3, wk 4... 但是在数据透视表中使用它时会扰乱源表中的顺序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:39:13.917

您可能需要右键单击要排序的值出现的第一行（例如，显示“2012 08 wk 4”的位置），然后从右键单击菜单中选择排序菜单选项。

在下图中，我右键单击了值 896,321……

![在此处输入图像描述](../Images/d60d12a9402f0bf1c0574cc51fcc4573.png)

# mysql - 匹配一行内的不同值 II

> ID：13132543
> 
> 赞同：1
> 
> 时间：2012-10-30T04:14:55.400
> 
> 标签：mysql, sql

这是上一个问题的修订问题。由于范围发生了变化，我决定提出一个新问题。

这就是我想要实现的。

在“作者”列中列出图书作者的姓氏，首先列出作者的姓氏，然后（在逗号之后）如果有的话，将列出第二位作者的姓氏；如果有第三作者，则在第二作者姓名之后。一本书的作者顺序列在**au_ord**列中（1=第一作者，2=第二作者，3=第三作者）。

知道如何在 MYSQL 输出中实现这一点吗？

![在此处输入图像描述](../Images/369f0fe1a953c8ec9469936dbd464220.png)

这些是源表。所需的输出是这样的：

![在此处输入图像描述](../Images/62b3ea851c48c9b52aba9153ba457c53.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:24:02.983

这应该会给出您的第一个示例输出：

```
SELECT title_id, au_ord, au_lname
FROM title_authors
LEFT JOIN authors
ON authors.au_id = title_authors.au_id
WHERE title_id = 'TC7777'
ORDER BY au_ord; 
```

这应该给出第二个：

```
SELECT title_id, GROUP_CONCAT(au_lname ORDER BY au_ord SEPARATOR ', ')
FROM title_authors
LEFT JOIN authors
ON authors.au_id = title_authors.au_id
GROUP BY title_id
HAVING title_id = 'TC7777'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T08:36:03.847

您只需要一个[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)函数。

```
SELECT title_id, GROUP_CONCAT(au_lname ORDER BY au_ord)
FROM table
GROUP BY title_id 
```

该`GROUP BY`子句将所有单独的（不同的）标题分组，其`GROUP_CONCAT`上的 连接它的所有作者。这将列出所有标题及其相应的作者。如果`au_lname`来自另一个表而不是来自`title_id`表，那么您将必须使用适当的连接。我不确定您的问题中的表名是什么。

# ruby - Python 请求库的 Ruby 等效项（HTTP 客户端）

> ID：13132544
> 
> 赞同：19
> 
> 时间：2012-10-30T04:15:02.520
> 
> 标签：ruby, http

Python中有一个我喜欢的库，叫做“Requests”。Requests 是基于 urllib3 构建的 HTTP 客户端。“[请求文档](http://docs.python-requests.org/en/latest/)”。

我在 Ruby 中寻找类似的东西。基本上我需要的是：

*   上传文件支持（多部分/表单数据）。
*   轻松获取/发布。
*   Cookie 可以从响应对象传递到请求对象（手动构建登录脚本）。
*   稳定灵活。
*   会话支持（如果我们没有，则不必手动处理 cookie）。

我看过 Typhoeus，但主页中的代码示例不起作用；他们已经移动了代码，并且该`get`方法不再像那样直接访问，所以它开始不好。Curb 看起来不错，我喜欢 cURL，还有 rest-client，它看起来很流行，根据基准，em-http 似乎很快。还有一个Patron和curb-fu，我没有时间尝试。当然，还有 Net:HTTP。但是，它似乎没有每个人都指向的主流解决方案。

我想很多人都遇到过我的情况，我想知道他们选择了什么，为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-02T09:36:35.960

这是一个特征矩阵，其中包含了一些用于 Ruby 的 HTTP 客户端。

[https://bit.ly/RubyHTTPClients](https://bit.ly/RubyHTTPClients)

比较的作者是 的作者`httpclient`，但从外观上看，比较是公平的。

有关矩阵的一些解释的更多叙述风格，请参阅同一作者的[http://www.slideshare.net/HiroshiNakamura/rubyhttp-clients-comparison](http://www.slideshare.net/HiroshiNakamura/rubyhttp-clients-comparison)。

比较结果部分支持 httpclient，我也可以推荐它。简单、功能丰富、兼容所有 Ruby 平台并具有高性能。比其他任何东西都更好的 cookie 支持，但演示文稿提到如果您使用相同的客户端对象，cookie 可能会从一个（恶意）站点泄漏到另一个站点。不知道这是否仍然是真的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-10T17:10:26.587

有[https://github.com/cyx/requests](https://github.com/cyx/requests)，这正是问题所要求的，来自 python 的请求库的端口。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-30T05:51:02.347

内置的[OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)是首先要看的地方。它很简单，并且很好地处理了基础知识。

Typhoeus，我曾多次用于并行进程，效果很好。Github 上提供了[文档](http://rubydoc.info/github/typhoeus/typhoeus/frames/Typhoeus)和[代码库。](https://github.com/typhoeus/typhoeus)

```
irb(main):009:0> response = Typhoeus::Request.get("www.example.com")
=> #<Typhoeus::Response:0x007ffbcc067cf8 @code=302, @curl_return_code=0, @curl_error_message="No error", @status_message=nil, @http_version=nil, @headers="HTTP/1.0 302 Found\r\nLocation: http://www.iana.org/domains/example/\r\nServer: BigIP\r\nConnection: close\r\nContent-Length: 0\r\n\r\n", @body="", @time=0.035584, @requested_url=nil, @requested_http_method=nil, @start_time=nil, @start_transfer_time=0.035529, @app_connect_time=2.8e-05, @pretransfer_time=0.000429, @connect_time=2.8e-05, @name_lookup_time=2.8e-05, @request=:method => :get,
    :url => www.example.com, @effective_url="HTTP://www.example.com", @primary_ip="192.0.43.10", @redirect_count=0, @mock=false>
irb(main):010:0> puts response.headers
HTTP/1.0 302 Found
Location: http://www.iana.org/domains/example/
Server: BigIP
Connection: close
Content-Length: 0 
```

我偶尔也使用 Net::HTTP，但 OpenURI 和 Typhoeus 与 Hydra 一起被证明易于使用并与我的代码集成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-30T04:54:50.790

你看过[HTTParty](https://rubygems.org/gems/httparty/) gem 吗？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-01T17:40:21.573

我最终找到了这个 HTTPClient ： [https://github.com/nahi/httpclient](https://github.com/nahi/httpclient)

我已经开始使用它，它符合我想要的功能，而且根据一些基准测试它非常快。它还支持一些高级功能，例如流式处理或分块响应。虽然它在红宝石社区中并不出名，但很遗憾。:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-30T04:57:44.463

如果您需要 cookie 和表单处理，[机械化](https://github.com/sparklemotion/mechanize)是唯一的选择。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-30T13:35:11.803

我很遗憾听到 Typhoeus 不适合你。原因是，自述文件显示了如何使用 Typhoeus v0.5.0.rc 可以安装

```
gem install typhoeus --pre 
```

或者

```
gem "typhoeus", git: "git://github.com/typhoeus/typhoeus.git" 
```

. Typhoeus 没有会话支持，但除此之外它可能很合适。至少它非常稳定，因为它是建立在 libcurl 之上的。

文件发送示例：

```
Typhoeus.post("www.example.com/file", body: { file: File.open("testfile.txt","r") }) 
```

不幸的是，没有快捷方式来处理 cookie，您必须手动设置它们：

```
Typhoeus.get("www.example.com/needs_cookie", headers: { Cookie: "PRIVATE" }) 
```

**TLDR**：如果您愿意自己设置，我会选择 Typhoeus 的速度和 libcurl。否则我会研究[法拉第](https://github.com/technoweenie/faraday)并将其与 Typhoeus 适配器一起使用。

编辑：我在[README](https://github.com/typhoeus/typhoeus/commit/24990d1eb5371a2f49019c3d3381a4fba6766da4)中添加了安装说明。

编辑：0.5 发布。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-04T06:06:36.633

这个问题似乎缺乏最近的答案。所以我在填补空白。

我自己来自 python，并且喜欢 requests 库，因为它很容易做，我最近在[rest_client中发现了一个非常好的 Ruby 等价物](https://github.com/rest-client/rest-client)

它支持问题中提到的所有功能，并且从可用性的角度来看似乎非常好 - 请求库旨在实现什么。

# javascript - 我应该如何搭建这个快速和主干应用程序？

> ID：13132545
> 
> 赞同：0
> 
> 时间：2012-10-30T04:15:08.250
> 
> 标签：javascript, backbone.js, express, scaffolding

我从来没有找到真正打动我的答案，所以我只是想我会提出这个问题，看看人们是怎么想的。到目前为止，这是我的应用程序的详细信息：

1.  后端：提供 JSON 的 Php Api
2.  前端：
    Express 提供登录 / 销售 / 注册 / 应用页面
    Backbone / AMD 提供单页应用程序

问题：

1.  我应该如何搭建这个应用程序？
2.  我将拥有注册和登录页面的主干视图，这些视图通过 express 连接到 API ......这些应该在哪里和/或这是否矫枉过正？

所有身份验证都通过传递回会话令牌的 api 进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:54:35.380

Boilerplate.js 也可能是前端布局/架构的另一个起点？

[http://boilerplatejs.org/](http://boilerplatejs.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T17:19:28.533

这是我最终做的事情：

```
client /
  widgets / 
  views /
  models /
  collections / 
  login.coffee
  main.coffee
client-dist / 
server /
  views / 
  app.coffee
  config.coffee
server-dist / 
```

细节：

*   **Dist 目录**：使用已编译的 .coffee 和 .less 文件构建目录
*   **构建工具**：Grunt.js --> 查看这个[问题](https://stackoverflow.com/questions/13385464/how-can-i-customize-this-build-script-with-node)了解构建配置的详细信息
*   **需要多页垫片**：我想为 AMD 提供多页服务，并遵循jrburke 提供的多页垫片[示例](https://github.com/requirejs/example-multipage-shim)
*   **应用程序管理**：我使用了 Addy Osmani 的 Aura 框架，该框架经过[修改](https://github.com/PaulLeCam/labs/tree/proto-seedcamp)以管理应用程序页面和小部件

node express 应用程序在 server-dist/app.js 提供，并使用 requirejs 从 client-dist 加载正确的 .js 文件。

# algorithm - Prim 的 MST 算法的时间复杂度

> ID：13132548
> 
> 赞同：5
> 
> 时间：2012-10-30T04:15:22.250
> 
> 标签：algorithm, graph, time-complexity, minimum-spanning-tree, prims-algorithm

有人可以向我解释为什么使用相邻矩阵的 Prim 算法会导致时间复杂度为0 吗？`O(V²)`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T05:17:29.143

（抱歉，ASCII 数学看起来很草率，我认为我们不能使用 LaTEX 来排版答案）

实现 Prim 算法`O(V^2)`复杂性的传统方法是除了邻接矩阵之外还有一个数组，让我们称它为`distance`该顶点到节点的最小距离。

这样，我们只检查`distance`找到下一个目标，并且由于我们这样做 V 次并且有 V 个成员`distance`，我们的复杂性是`O(V^2)`。

这本身是不够的，因为原始值`distance`很快就会过时。要更新这个数组，我们所做的就是在每一步结束时，遍历我们的邻接矩阵并`distance`适当地更新。这不会影响我们的时间复杂度，因为它仅仅意味着每一步都需要`O(V+V) = O(2V) = O(V)`. 因此我们的算法是`O(V^2)`。

如果不使用`distance`，我们必须每次遍历所有 E 边，最坏的情况是包含 V^2 边，这意味着我们的时间复杂度为`O(V^3)`.

证明：

为了证明没有`distance`数组就不可能及时计算 MST `O(V^2)`，请考虑在每次使用大小为 的树的迭代中`n`，都有`V-n`可能添加的顶点。

要计算选择哪一个，我们必须检查每一个以找到它们与树的最小距离，然后将其相互比较并找到那里的最小值。

在最坏的情况下，每个节点都包含与树中每个节点的连接，导致 n * (Vn) 条边和`O(n(V-n))`.

由于我们的总数将是当 n 从 1 到 V 时每个步骤的总和，所以我们的最终时间复杂度是：

```
(sum O(n(V-n)) as n = 1 to V) =  O(1/6(V-1) V (V+1)) = O(V^3) 
```

量子点

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T05:49:10.333

注意：这个答案只是借用[了jozefg的答案](https://stackoverflow.com/a/13133062/855026)并试图更充分地解释它，因为我在理解之前必须考虑一下。

## 背景

图的**邻接矩阵**表示构造了一个 V x V 矩阵（其中 V 是顶点数）。单元格 (a, b) 的值是连接顶点 a 和 b 的边的权重，如果没有边则为零。

```
Adjacency Matrix

   A B C D E
--------------
A  0 1 0 3 2
B  1 0 0 0 2
C  0 0 0 4 3
D  3 0 4 0 1
E  2 2 3 1 0 
```

**Prim's Algorithm**是一种算法，它采用图和起始节点，并在图上找到最小生成树 - 即它找到边的子集，以便结果是包含所有节点和组合边的树权重被最小化。可以总结如下：

1.  将起始节点放在树中。
2.  重复直到所有节点都在树中：
    1.  找到将树中的节点连接到树中的节点的所有边。
    2.  在这些边缘中，选择一个重量最小的边缘。
    3.  将该边和连接的节点添加到树中。

## 分析

我们现在可以开始分析算法，如下所示：

1.  在循环的每次迭代中，我们向树中添加一个节点。由于有 V 个节点，因此该循环有 O(V) 次迭代。
2.  在循环的每次迭代中，我们需要在树中找到并测试边。如果有 E 条边，朴素搜索实现使用 O(E) 来找到权重最小的边。
3.  所以结合起来，我们应该期望复杂度是 O(VE)，在最坏的情况下可能是 O(V^3)。

然而，jozefg 给出了一个很好的答案来展示如何实现 O(V^2) 复杂度。

```
Distance to Tree

            | A  B  C  D  E
            |----------------
Iteration 0 | 0  1* #  3  2
          1 | 0  0  #  3  2*
          2 | 0  0  4  1* 0
          3 | 0  0  3* 0  0
          4 | 0  0  0  0  0

NB. # = infinity (not connected to tree)
    * = minimum weight edge in this iteration 
```

这里*距离*向量表示将每个节点连接到树的最小加权边，使用如下：

1.  使用复杂度 O(V) 到起始节点 A 的边缘权重进行初始化。
2.  要找到下一个要添加的节点，只需找到*距离*的最小元素（并将其从列表中删除）。这是 O(V)。
3.  添加一个新节点后，有 O(V) 条新边将树连接到其余节点；对于这些中的每一个，确定新边的权重是否小于现有距离。如果是，更新*距离*向量。再次，O（V）。

使用这三个步骤将搜索时间从 O(E) 减少到 O(V)，并增加了一个额外的 O(V) 步骤来在每次迭代时更新*距离向量。*由于现在每次迭代都是 O(V)，因此总体复杂度是 O(V^2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:27:45.063

首先，显然至少是 O(V^2)，因为这就是邻接矩阵的大小。

查看[http://en.wikipedia.org/wiki/Prim%27s_algorithm](http://en.wikipedia.org/wiki/Prim%27s_algorithm)，您需要执行步骤“重复直到 Vnew = V”V 次。

在该步骤中，您需要计算出 V 中的任何顶点与 V 之外的任何顶点之间的最短链接。维护一个大小为 V 的数组，为每个顶点保存无穷大（如果顶点在 V 中）或最短的长度V 中的任何顶点和那个顶点之间的链接，以及它的长度（所以一开始这只是来自起始顶点和每个其他顶点之间的链接长度）。要找到下一个要添加到 V 的顶点，只需搜索这个数组，成本为 V。一旦你有了一个新顶点，查看从该顶点到每个其他顶点的所有链接，看看它们中是否有从 V 到的较短链接那个顶点。如果有，请更新数组。这也花费了V。

因此，您有 V 个步骤（要添加的 V 个顶点），每个步骤花费 V，这给您 O(V^2)

# spring - 构建 Spring MVC 应用程序时出错

> ID：13132551
> 
> 赞同：1
> 
> 时间：2012-10-30T04:16:10.820
> 
> 标签：spring, spring-mvc, maven-3

我是 Spring 框架的新手。我的系统上安装了带有 JDK 1.7 的 Spring Tool Suite 版本 3.1.0。最近我在我的 IDE 中导入了一个已经在另一个系统上运行的预构建 Spring MVC 项目。但是当我尝试构建它时，它会给出以下错误：-

`Errors occurred during the build. Errors running builder 'Maven Project Builder' on project 'vdm'. Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5 Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5 Could not calculate build plan: Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5 Plugin org.apache.maven.plugins:maven-resources-plugin:2.5 or one of its dependencies could not be resolved: Failed to read artifact descriptor for org.apache.maven.plugins:maven-resources-plugin:jar:2.5`

此外，当我检查 Maven 的生命周期映射时，它显示：-

![在此处输入图像描述](../Images/c782acc454b2cb5a6f3845884d966482.png)

我的环境配置如下：-

![在此处输入图像描述](../Images/7b02c8b1630f07af7bbce07916b66767.png)

我的 pom.xml 是：-

```
 <?xml version="1.0" encoding="UTF-8" ?> 
- <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion> 
  <groupId>com.engineersindia</groupId> 
  <artifactId>vdsc</artifactId> 
  <name>abc</name> 
  <packaging>war</packaging> 
  <version>1.0.0-BUILD-SNAPSHOT</version> 
- <properties>
  <java-version>1.6</java-version> 
  <org.springframework-version>3.0.6.RELEASE</org.springframework-version> 
  <org.aspectj-version>1.6.9</org.aspectj-version> 
  <org.slf4j-version>1.5.10</org.slf4j-version> 
  </properties>
- <dependencies>
- <!--  Spring 
  --> 
- <dependency>
  <groupId>org.springframework</groupId> 
  <artifactId>spring-context</artifactId> 
  <version>${org.springframework-version}</version> 
- <exclusions>
- <!--  Exclude Commons Logging in favor of SLF4j 
  --> 
- <exclusion>
  <groupId>commons-logging</groupId> 
  <artifactId>commons-logging</artifactId> 
  </exclusion>
  </exclusions>
  </dependency>
- <dependency>
  <groupId>org.springframework</groupId> 
  <artifactId>spring-webmvc</artifactId> 
  <version>${org.springframework-version}</version> 
  </dependency>
- <!--  AspectJ 
  --> 
- <dependency>
  <groupId>org.aspectj</groupId> 
  <artifactId>aspectjrt</artifactId> 
  <version>${org.aspectj-version}</version> 
  </dependency>
- <!--  Logging 
  --> 
- <dependency>
  <groupId>org.slf4j</groupId> 
  <artifactId>slf4j-api</artifactId> 
  <version>${org.slf4j-version}</version> 
  </dependency>
- <dependency>
  <groupId>org.slf4j</groupId> 
  <artifactId>jcl-over-slf4j</artifactId> 
  <version>${org.slf4j-version}</version> 
  <scope>runtime</scope> 
  </dependency>
- <dependency>
  <groupId>org.slf4j</groupId> 
  <artifactId>slf4j-log4j12</artifactId> 
  <version>${org.slf4j-version}</version> 
  <scope>runtime</scope> 
  </dependency>
- <dependency>
  <groupId>log4j</groupId> 
  <artifactId>log4j</artifactId> 
  <version>1.2.15</version> 
- <exclusions>
- <exclusion>
  <groupId>javax.mail</groupId> 
  <artifactId>mail</artifactId> 
  </exclusion>
- <exclusion>
  <groupId>javax.jms</groupId> 
  <artifactId>jms</artifactId> 
  </exclusion>
- <exclusion>
  <groupId>com.sun.jdmk</groupId> 
  <artifactId>jmxtools</artifactId> 
  </exclusion>
- <exclusion>
  <groupId>com.sun.jmx</groupId> 
  <artifactId>jmxri</artifactId> 
  </exclusion>
  </exclusions>
  <scope>runtime</scope> 
  </dependency>
- <!--  @Inject 
  --> 
- <dependency>
  <groupId>javax.inject</groupId> 
  <artifactId>javax.inject</artifactId> 
  <version>1</version> 
  </dependency>
- <!--  Servlet 
  --> 
- <dependency>
  <groupId>javax.servlet</groupId> 
  <artifactId>servlet-api</artifactId> 
  <version>2.5</version> 
  <scope>provided</scope> 
  </dependency>
- <dependency>
  <groupId>javax.servlet.jsp</groupId> 
  <artifactId>jsp-api</artifactId> 
  <version>2.1</version> 
  <scope>provided</scope> 
  </dependency>
- <dependency>
  <groupId>javax.servlet</groupId> 
  <artifactId>jstl</artifactId> 
  <version>1.2</version> 
  </dependency>
- <!--  Test 
  --> 
- <dependency>
  <groupId>junit</groupId> 
  <artifactId>junit</artifactId> 
  <version>4.7</version> 
  <scope>test</scope> 
  </dependency>
- <dependency>
  <groupId>org.springframework.ldap</groupId> 
  <artifactId>spring-ldap-core</artifactId> 
  <version>1.3.1.RELEASE</version> 
  </dependency>
- <dependency>
  <groupId>org.springframework.security</groupId> 
  <artifactId>spring-security-core</artifactId> 
  <version>3.1.0.M2</version> 
  </dependency>
- <dependency>
  <groupId>org.springframework.security</groupId> 
  <artifactId>spring-security-ldap</artifactId> 
  <version>3.1.0.M2</version> 
  </dependency>
- <dependency>
  <groupId>commons-dbcp</groupId> 
  <artifactId>commons-dbcp</artifactId> 
  <version>1.4</version> 
  </dependency>
- <dependency>
  <groupId>displaytag</groupId> 
  <artifactId>displaytag</artifactId> 
  <version>1.2</version> 
  </dependency>
- <dependency>
  <groupId>org.codehaus.jackson</groupId> 
  <artifactId>jackson-mapper-asl</artifactId> 
  <version>1.5.3</version> 
  </dependency>
- <dependency>
  <groupId>org.hibernate</groupId> 
  <artifactId>hibernate-validator</artifactId> 
  <version>4.1.0.Final</version> 
  </dependency>
- <dependency>
  <groupId>cglib</groupId> 
  <artifactId>cglib</artifactId> 
  <version>2.2</version> 
  </dependency>
- <dependency>
  <groupId>net.sf.jasperreports</groupId> 
  <artifactId>jasperreports-fonts</artifactId> 
  <version>4.7.0</version> 
  </dependency>
- <dependency>
  <groupId>commons-digester</groupId> 
  <artifactId>commons-digester</artifactId> 
  <version>2.1</version> 
  </dependency>
- <dependency>
  <groupId>org.codehaus.groovy</groupId> 
  <artifactId>groovy</artifactId> 
  <version>1.7.11</version> 
  </dependency>
- <dependency>
  <groupId>net.sf.jasperreports</groupId> 
  <artifactId>jasperreports</artifactId> 
  <version>4.7.0</version> 
  </dependency>
- <dependency>
  <groupId>com.lowagie</groupId> 
  <artifactId>itext</artifactId> 
  <version>2.1.7</version> 
  </dependency>
  </dependencies>
- <build>
- <plugins>
- <plugin>
  <groupId>org.apache.maven.plugins</groupId> 
  <artifactId>maven-compiler-plugin</artifactId> 
- <configuration>
  <source>${java-version}</source> 
  <target>${java-version}</target> 
  </configuration>
  </plugin>
- <plugin>
  <groupId>org.apache.maven.plugins</groupId> 
  <artifactId>maven-war-plugin</artifactId> 
- <configuration>
  <warName>abc</warName> 
  </configuration>
  </plugin>
- <plugin>
  <groupId>org.apache.maven.plugins</groupId> 
  <artifactId>maven-dependency-plugin</artifactId> 
- <executions>
- <execution>
  <id>install</id> 
  <phase>install</phase> 
- <goals>
  <goal>sources</goal> 
  </goals>
  </execution>
  </executions>
  </plugin>
- <plugin>
  <groupId>org.apache.maven.plugins</groupId> 
  <artifactId>maven-resources-plugin</artifactId> 
  <version>2.5</version> 
- <configuration>
  <encoding>UTF-8</encoding> 
  </configuration>
  </plugin>
  </plugins>
  </build>
  </project> 
```

即使我将项目作为 Maven 项目导入，在检索列表后，它也会出现以下错误：-

![在此处输入图像描述](../Images/5c0ba19a7366a49d6e59e24202c650ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:11:36.983

您可以检查以下路径中文件夹的内容吗？

```
C:\Users\{your computer user name}\.m2\repository\org\apache\maven\plugins\maven-resources-plugin\2.5 
```

如果您没有找到该文件夹​​或那里没有内容，那么您必须检查 eclipse 的代理配置，否则您可能引用了错误的 maven 的 settings.xml 文件。

希望这对您有所帮助。

# r - 从命令行安装 R 包

> ID：13132555
> 
> 赞同：0
> 
> 时间：2012-10-30T04:17:04.723
> 
> 标签：r, rcurl

我在安装几个软件包时遇到了真正的麻烦，但根本原因主要是缺少库。我将在这里举一个例子。

在 R-2.15.2 内

```
install.packages("RCurl")

/usr/share/R/include/Rinternals.h:676: note: expected 'const char *' but argument is of type 'ucs_t *'
gcc -std=gnu99 -shared -o RCurl.so base64.o curl.o curlInit.o curl_base64.o enums.o json.o memoryManagement.o myUTF8.o -L/jgi/local/Linux_x86_64/unixadm/curl/7.19.7/lib -lcurl -lidn -lssl -lcrypto -lrt -lssl -lcrypto -lz -lxml2 -L/usr/lib64/R/lib -lR
/usr/bin/ld: cannot find -lidn
collect2: ld returned 1 exit status
make: *** [RCurl.so] Error 1
ERROR: compilation failed for package 'RCurl'
* removing '/house/homedirs/a/apratap/lib/R/RCurl' 
```

我尝试了几件事来提供库路径，但没有成功。

还：

```
</scratch>echo $LD_LIBRARY_PATH 
/usr/lib:/house/homedirs/a/apratap/lib:/jgi/tools/lib
</scratch>echo $R_LD_LIBRARY_PATH 
/usr/lib:/house/homedirs/a/apratap/lib:/jgi/tools/lib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:01:00.840

```
/usr/bin/ld: cannot find -lidn 
```

表示编译器正在寻找但未能找到 libidn，它似乎是这样的：

[http://www.gnu.org/software/libidn/](http://www.gnu.org/software/libidn/)

因此，使用您的（未指定）操作系统的包管理安装它，然后重试。不能指望从源代码安装的 R 包会整理出所有系统依赖项。

这很可能是 libcurl 的要求 - 你安装了吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T05:24:26.260

我刚刚在 CentOS 6.2 中安装了 RCurl，没有任何问题。从您的输出看来，问题出在您的 Linux 安装（GNU 链接器）上。你可以尝试重新安装make和gcc吗？

# sql - 如何修改这些函数组以获取 # 的所有内容？

> ID：13132556
> 
> 赞同：2
> 
> 时间：2012-10-30T04:17:22.750
> 
> 标签：sql, tsql

我有一列的值以下列格式存储：

名称#URL

所有数据都与它一起存储，第二个 # 永远不会出现。

我有以下语句从该列中删除 URL：

```
SELECT  SUBSTRING ( wf_name ,PATINDEX ( '%#%' , wf_name )+1 , LEN(wf_name)-(PATINDEX ( '%#%' , wf_name )) ) 
```

但是我也想取名字（# 的所有内容）。不幸的是，我不明白我在上面使用的功能（阅读了我仍然感到困惑的文档）。有人可以帮助我了解流程以及如何调整它以使#剩下的所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:21:34.160

看看下面的例子

```
; WITH Table1 AS (
    SELECT  'TADA#TEST' AS NameURL
)
SELECT  *,
        LEFT(NameURL,PATINDEX('%#%',NameURL) - 1) LeftText,
        RIGHT(NameURL,PATINDEX('%#%',NameURL)- 1) RightText
FROM    Table1 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/d41d8/5618)

使用函数

[PATINDEX (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms188395.aspx)

> 在所有有效的文本和字符数据类型上，返回指定表达式中第一次出现模式的起始位置，如果未找到该模式，则返回零。

[左 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177601.aspx)

> 返回具有指定字符数的字符串的左侧部分。

[对（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms177532.aspx)

> 返回具有指定字符数的字符串的右侧部分。

# html - 单个 HTML 文档中的多个 Doctype

> ID：13132558
> 
> 赞同：7
> 
> 时间：2012-10-30T04:18:03.407
> 
> 标签：html, browser, doctype

如果一个 HTML 文档有两种 doctype，那么这些 doctype 将如何影响页面的呈现以及浏览器会选择哪种 doctype？在一个文档中包含两个（或更多）文档类型是否有效或令人困惑？

例子：

```
<!DOCTYPE html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T07:11:38.813

只允许使用单个 doctype 声明。这直接来自 HTML 规范以及 HTML5 草案，也可以使用[验证器](http://validator.w3.org)进行检查。

因此，没有关于*应该*发生什么的规范。[自然的期望是，由于浏览器在决定浏览器模式（ Quirks Mode](http://www.cs.tut.fi/~jkorpela/quirks-mode.html) vs. Standards Mode）时仅在“doctype sniffing”中处理doctype声明，因此只有第一个doctype声明生效，另一个被忽略。

这可以进行如下测试（使用 HTML 3.2 doctype，在所有 doctype-sniffer 浏览器上触发 Quirks 模式）：

```
<!DOCTYPE HTML>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<title>Testing duplicate doctype effect</title>
<script>
document.write(document.compatMode);
</script>
</html> 
```

这将显示“CSS1Compat”（= 标准模式），而交换 doctype 声明会导致“BackCompat”（= Quirks 模式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:20:30.133

我相信第一个`DOCTYPE`是由浏览器使用的，并且在文档中包含多个是违反规范的。

我认为（不确定）多个`DOCTYPE`-s*可能*有效的唯一情况是使用 IE 条件注释时。当然，除了 IE 之外的浏览器不会看到这些。

我记得读过一篇博客文章（现在找不到，所以我可能错了）但是一些（大多数？）浏览器甚至会忽略 DOCTYPE，如果它不是他们遇到的第一件事。（这可能是一个已经修复的错误。）

这是 W3School 的参考页面`DOCTYPE`：

[http://www.w3schools.com/tags/tag_doctype.asp](http://www.w3schools.com/tags/tag_doctype.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:03:46.953

如果您的 HTML 页面中有多个**DOCTYPE** -s，那么浏览器将考虑第一个，浏览器逐行解析 DOM。一旦浏览器获得 DOCTYPE，它将停止寻找其他 doctype，并跳转到搜索 HTML 标签。

> 在上面的问题中，首先提到了HTML-5 DOCTYPE，然后是HTML-4，根据这个浏览器会将内容呈现为HTML-5 doctype

最好在[http://www.w3schools.com/](http://www.w3schools.com/)中尝试一次...尝试使用“code”或“kbd”或“dfn”或“samp”或“strong”标签，优先提及两种文档类型。

# ruby - 带有反向引用的正则表达式

> ID：13132563
> 
> 赞同：4
> 
> 时间：2012-10-30T04:18:46.060
> 
> 标签：ruby, regex

任何人都可以解释反向引用在 ruby​​ 正则表达式中是如何工作的吗？我特别想知道`(..)`分组是如何工作的。例如：

```
s = /(..) [cs]\1/.match("The cat sat in the hat")

puts s 
```

对于上面的代码片段，输出是：`at sat`. 为什么/如何得到这个输出？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-30T04:25:16.823

这是这个正则表达式的含义：

```
regex = /(..) [cs]\1/
#        ├──┘ ├──┘├┘
#        │    │   └─ A reference to whatever was in the first matching group.
#        │    └─ A "character class" matching either "c" or "s".
#        └─ A "matching group" referenced by "\1" containing any two characters. 
```

请注意，在将正则表达式与匹配组匹配后，特殊变量`$1`(`$2`等) 将包含匹配的内容。

```
/(..) [cs]\1/.match('The cat sat in the hat') # => #<MatchData...>
$1 # => "at" 
```

另请注意，[该`Regexp#match`方法](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-i-match)返回一个 MatchData 对象，其中包含导致整个匹配的字符串（“at sat”，aka `$&`），然后是每个匹配组（“at”，aka `$1`）：

```
/(..) [cs]\1/.match('The cat sat in the hat')
=> #<MatchData "at sat" 1:"at"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:22:16.590

首先，输出`puts s`不是捕获组：

```
s = /(..) [cs]\1/.match("The cat sat in the hat")
puts s
# at sat 
```

如果你想访问它的捕获组，你应该使用`MatchData.captures`：

```
s = /(..) [cs]\1/.match("The cat sat in the hat")
s.captures
# => ["at"] 
```

# c# - 从资源或站点获取 XML

> ID：13132564
> 
> 赞同：4
> 
> 时间：2012-10-30T04:18:50.893
> 
> 标签：c#, .net, wpf, uri

我在最后两个代码行中的 URI 存在一些问题：我尝试从应用程序资源和站点获取 XML。在此之前，我对图像执行了相同的操作 - 一切正常。评论中的异常消息。

```
// Get image from site: 
// "pack://siteoforigin:,,,/http://www.designdownloader.com/item/pngs/user_f036/user_f036-20111114102144-00003.png"

// Get image from building resources (Build Action = Resources).
Uri uri_male_default = new Uri("pack://application:,,,/male.png");

// Get image from site: 
// "pack://siteoforigin:,,,/http://www.designdownloader.com/item/pngl/user_f046/user_f046-20111114102341-00003.png"

// Get image from building resources (Build Action = Resources).
Uri uri_female_default = new Uri("pack://application:,,,/myImages/famale.png"); 

// Create images (it's works fine):
img_male_default = new BitmapImage(uri_male_default);
img_female_default = new BitmapImage(uri_female_default);

//The next both cases ain't working:
// NotSupportedException: URI prefix isn't recognized.     
XElement xml_1 = XElement.Load("pack://application:,,,/SettingsX.xml"); // Get XML from building resources (Build Action = Resources).
XElement xml_2 = XElement.Load("pack://siteoforigin:,,,/https://skydrive.live.com/?cid=51b3145b64e05fef&id=51B3145B64E05FEF%21550"); 
```

`XElement.Load`获取一个 URI 作为参数。为什么我不能用 XML 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:39:37.790

从错误描述来看，我非常怀疑是否可以将 WPF 包 URI 传递给，`XElement.Load`但您始终可以使用相对路径并且它会起作用，示例代码如下：

```
Uri uri = new Uri("/SettingsX.xml", UriKind.Relative);
            System.Windows.Resources.StreamResourceInfo info = Application.GetResourceStream(uri); 
            XElement settings = XElement.Load(info.Stream); 
```

**编辑：**

要从 Web 获取 xml 文件：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    string url = "Your URL...";
    var webClient = new System.Net.WebClient();
    webClient.DownloadStringCompleted += HttpsCompleted;
    webClient.DownloadStringAsync(new Uri(url));
}

private void HttpsCompleted(object sender, System.Net.DownloadStringCompletedEventArgs e)
{
    if (e.Error == null)
    {
        XDocument xdoc = XDocument.Parse(e.Result, LoadOptions.None);
    }
} 
```

# validation - 验证错误呈现同一页面但不保留在 rhomobile 中添加的数据

> ID：13132565
> 
> 赞同：0
> 
> 时间：2012-10-30T04:18:54.597
> 
> 标签：validation, render, rhomobile

我已经实现了模型验证，但是在渲染新操作时，它不会保留输入的数据。

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T12:43:37.333

因为你在模型中实现了验证，你输入的数据没有保存在数据库中，所以它如何保留输入的数据。

# sql - 每个部门的集团员工

> ID：13132571
> 
> 赞同：3
> 
> 时间：2012-10-30T04:19:36.310
> 
> 标签：sql, sql-server, grouping, group-concat

我有一张桌子`Details`

```
DeptId        EmpID
-------      ---------
1             1
1             5
1             3
2             8
2             9 
```

我想像这样对它们进行分组：

```
DeptId      EmpIDs
-------    -------
 1          1,5,3
 2          8,9 
```

我想要这个在 SQL Server 中。我知道这可以在 MySQL 中使用`Group_Concat`函数来完成。例如

```
SELECT DeptId, GROUP_CONCAT(EmpId SEPARATOR ',') EmpIDS
FROM Details GROUP BY DeptId 
```

[（这里是 SQL 小提琴）](http://sqlfiddle.com/#!2/89baa/1)

但是如何使用 SQL Server 做到这一点？我不知道任何功能。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T04:26:02.473

一种模拟方法`GROUP_CONCAT`是`SQLServer`使用`CROSS APPLY`和`FOR XML PATH()`

```
select a.[DeptId], SUBSTRING(d.detailsList,1, LEN(d.detailsList) - 1) detailsList
from 
  (
    SELECT DISTINCT [DeptId]
    FROM details
  ) a
CROSS APPLY
  (
    SELECT [EmpID] + ', ' 
    FROM details AS B 
    WHERE A.[DeptId] = B.[DeptId]
    FOR XML PATH('')
  ) D (detailsList) 
```

*   [***请参阅 SQLFiddle 演示***](http://sqlfiddle.com/#!3/b35ef/2)
*   [***请参阅 SQLFiddle 演示*** ***（按 EmpID 排序）***](http://sqlfiddle.com/#!3/b35ef/5)

# html - HTML 区分大小写的问题

> ID：13132572
> 
> 赞同：1
> 
> 时间：2012-10-30T04:19:38.043
> 
> 标签：html

> **可能重复：**
> [HTML 区分大小写的问题](https://stackoverflow.com/questions/1087775/html-case-sensitive-issues)

我有这个：

```
<div class="menuHolder">
  <nav class="menu">
    <ul id="menu">
      <li class="with_ul"><a id="panorama"><span class="overPlane"></span><span class="mText">panorama</span></a>
        <ul class="submenu_1">
          <li><a href="abc.html">Test</a></li>
          <li><a href="#!/pageMore">Profile</a></li>
          <li><a href="#!/pageMore">History</a></li>
        </ul>
      </li>
    </ul>
  </nav>
</div> 
```

我已经有一个名为 aBc.html 的文件

当我点击测试时，我得到一个 404。如果我将行更改为

```
<li><a href="aBc.html">Test</a></li> 
```

它工作正常。

我知道 HTML 不区分大小写，但是为什么会这样呢？我做错什么了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T04:24:32.177

URL 在域名之后区分大小写。`example.com`并且`EXAMPLE.COM`两者都解析到相同的地址，但域名之后的任何内容都区分大小写。

现在来文件系统。Windows 使用不区分大小写的 NTFS，因此`abc.html`和`aBc.html`引用同一个文件。大多数 Linux 发行版使用 EXT4，它区分大小写，因此`abc.html`是`aBc.html`两个不同的文件。

简而言之，您的网络服务器运行在文件名区分大小写的文件系统上，因此`abc.html`引用`aBc.html`两个不同的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:23:42.947

在类 UNIX 平台上，文件名**区分**大小写，只有 Windows 不关心大小写。这实际上与 HTML 不区分大小写无关。

但是请注意，对于 Windows 上的 IIS，虚拟路径**区分**大小写，而不是实际文件路径。

因此，在 Windows 下，假设`aBc.html`和`abc.html`是完全相同的文件是正确的。

因此，出于兼容性原因，应**始终将**HTML 中路径的大小写与文件系统上的路径匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T07:23:54.817

HTML 中的一些结构区分大小写，而另一些则不区分大小写，部分取决于 HTML 版本。就 HTML 而言，`href`属性值始终区分大小写。

属性值的`href`值作为 URL（或正式的 URI）处理，并且 URL 区分大小写，但指定为不区分大小写的部分除外。在这里，值被解析为绝对 URL，以便字符串`abc.html`成为路径部分，并且该部分*不*区分大小写。

*服务器*对 URL 的处理由其自行决定。它很可能将`abc.html`和`aBc.html`（或`abc.html`，`foobar`就此而言）相同地对待，作为指代相同的资源。

与普遍的看法相反，URL 不是文件名，服务器可以用它们玩很多东西，而不是简单地将它们映射到文件名。在服务器中使用某些重写规则使路径部分不区分大小写是很常见的。

但是，如果服务器正在运行，例如，在 Linux 上具有默认设置的开箱即用版本的 Apache，这是一种相当常见的设置，那么路径部分会以简单的方式映射到文件名，并且在 Linux文件系统 这些名称区分大小写。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:35:01.530

因此，基本答案是：如果您托管在基于 UNIX 的平台上，这很重要。忠告：用小写字母命名所有内容，这将使您的生活更轻松

# sql - 查找最大计数

> ID：13132574
> 
> 赞同：-1
> 
> 时间：2012-10-30T04:19:45.380
> 
> 标签：sql

假设我有以下值的表

```
A         B           C
------------------------
5        ABC         $20
3        BCD         $40
5        BCD         $40
2        ABC         $20
5        ABC         $30 
```

如何编写将返回最大值计数的查询，假设对于列 A，它应该返回值 3，即最大值的计数为 5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:29:25.887

您可以使用这样的子查询：

```
SELECT COUNT(*) AS COUNTS FROM Table1
WHERE A = (SELECT MAX(A) AS AD FROM Table1) 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/3a7a7/19)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:35:54.857

虽然不那么典型，但这也适用

（不等式的自反连接）

```
SELECT 
    COUNT(t1.a) AS COUNTS 
FROM Table1 t1
   LEFT JOIN Table1 t2
    ON t1.A < t2.A
WHERE 
      t2.a is null 
```

[演示](http://sqlfiddle.com/#!2/3a7a7/25)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T04:22:28.387

一种方法（不确定它是最快的）：

```
SELECT A, count(*) FROM my_table GROUP BY 1 ORDER BY 2 LIMIT 1; 
```

# java - 如何获得必须实现接口的所有方法？

> ID：13132582
> 
> 赞同：0
> 
> 时间：2012-10-30T04:20:20.177
> 
> 标签：java, eclipse, eclipse-plugin

我正在开发一个插件，它将创建一个具有实现接口的类。接口可能具有继承的方法。我还想在创建类时实现所有方法，包括继承的方法。不是在创建类之后，然后使用 eclipse 快速修复——添加未实现的方法。有没有办法获取所有方法的列表，包括接口的继承方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:31:08.563

简单地说，当您在 A 类中实现 X 时，当您按 Eclipse 帮助快捷键 ctrl+空格键时，所有抽象而非具体的方法都会显示为一个选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:22:27.323

如果您使用的是 Eclipse，那么 Eclipse 将帮助您实现所有必需的方法，否则您必须查看哪些未实现的方法接口有，您需要实现哪些

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:24:00.023

在您的 Eclipse JAVA 编辑器中，您应该`yellow bulb icon with red cross sign`会在类声明行前面看到一个（当类中有一些未实现的接口方法时，会显示红色叉号）。`Right click -> quick fix and select the option add unimplemented methods`. Eclipse 将在正文中添加所有接口`X`方法的存根。`ClassA`如果有`no red cross sign`并且您的类正在编译，则意味着该类没有未实现的方法。

或者，您可以按`ctrl+1`在线`class A implements X{}`并`add unimplemented methods`从打开的菜单中选择选项。

**请注意：**希望您在 Eclipse 中打开了自动构建。如果没有，请强制构建，首先在通过 Java 编辑器打开的类文件中查看编译错误（红色叉号）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:41:32.143

也许这个例子就是你想要的。

```
package com.interfaces;
import java.lang.reflect.Method;

public class TestImplement  {

    public static void main(String[] args) {    
        Class<?> c = MyInterface.class;     
        Method[] m = c.getMethods();
        for (int i=0; i<m.length ; i++){
            System.out.println(m[i].toString());
        }       
    }
}

interface MyInterface extends Runnable{
    public void test(); 

} 
```

# objective-c - xcode中找不到文件错误

> ID：13132586
> 
> 赞同：0
> 
> 时间：2012-10-30T04:20:55.453
> 
> 标签：objective-c, ios, xcode

我已经将包含的文件夹导入`SUPQueueConnection.h`到项目和项目根目录中。它仍然显示`SUPQueueConnection.h`未找到相同的错误文件。

我们将所有需要`.h and .m`的文件导入到项目根目录中。
有没有其他方法可以做到这一点？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:25:01.837

你确定没有找到的文件确实在你的 Xcode 项目中吗？确保您可以在边栏中的某处看到文件。我从未真正尝试过，但我认为您不能简单地访问项目目录根目录中的文件，它们必须在您的项目中。自从我上次使用 Xcode 以来（一直在做其他事情），Xcode 发生了变化，但我认为您仍然可以通过右键单击侧边栏中的某处来添加文件，除非它发生更改，否则您可以使用文件菜单中的按钮添加外部文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:40:15.263

在项目的项目导航栏中，检查您导入的文件夹是否实际包含 SUPQueueConnection.h 文件，如果存在，请尝试在您使用“SUPQueueConnection.h”文件的类中导入头文件。此外，如果项目正在显示 SUPQueueConnection.h 文件，然后右键单击此文件并单击“Show IN Finder”选项以查看文件的实际位置。确保将其复制到项目文件夹中。

如果它不能解决问题，请尝试删除此文件并直接将 SUPQueueConnection.h 再次拖放到项目中，并确保在目标上复制时您的项目被选中。

# git - 在 Git 中，如何将不同版本的文件推送到不同的遥控器？

> ID：13132588
> 
> 赞同：0
> 
> 时间：2012-10-30T04:21:41.620
> 
> 标签：git

在 Git 中，如何将不同版本的文件推送到不同的遥控器？

我有两个遥控器`origin`和`public`. 我想始终将最新版本的文件推送到`origin`内部开发服务器，以及不同版本的文件，这些文件通常较旧并检查错误，`public`这是发布我的代码的可部署版本的地方。如何在 Git 中做到这一点？如果我有多个`public`服务器，例如`p1`, `p2`，如何向这些服务器发布不同的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:29:08.633

听起来你真正想要的是不同的分支。大多数人在主分支（默认）上进行主要开发，然后在发布时创建一个分支。错误修复发生在发布分支上（后来合并到 master），而正在进行的开发发生在 master 上。部署新版本只是检查发布分支的问题。

您可以将所有分支推送到所有遥控器，或者只是将一些分支推送到不同的遥控器。

请参阅Git Book 中有关[基本分支和合并](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)的章节。

# java - ANT 构建错误—— 不支持标签

> ID：13132589
> 
> 赞同：1
> 
> 时间：2012-10-30T04:21:51.557
> 
> 标签：java, ant, build

我的一个构建脚本给了我以下错误：-

> if 不支持嵌套的 "not" 元素

我担心 ant im 使用的版本不支持`<not>`. `<not>`ANT 支持的标签从哪个版本开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:41:35.823

`<not>`仅适用于选择器，它不是`<if>`标签的一部分。您可以使用`<else>`表达式替换它。

```
<if>
  <equals arg1="something" arg2="orother">
  <else>
    the stuff you want to do...
  </else>
</if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:37:11.077

`<not>`从 1.4 开始就在 Ant 中，请参阅[源代码](http://svn.apache.org/viewvc/ant/core/trunk/src/main/org/apache/tools/ant/taskdefs/condition/Not.java?view=markup)。Ant-contrib 需要 1.5，所以理论上你不应该看到这个问题。

您的`if`任务很可能来自另一个包，而不是`ant-contrib`. 您的构建文件中必须有一些其他`taskdef`条目。或者它不是一个规则的蚂蚁分布。

# entity-framework - 使用 moq 对实体框架进行单元测试

> ID：13132601
> 
> 赞同：11
> 
> 时间：2012-10-30T04:23:45.563
> 
> 标签：entity-framework, unit-testing, moq

我正在使用实体框架并尝试对使用 EF 的数据服务进行单元测试。我没有使用存储库和工作单元模式。我尝试了以下方法来模拟上下文和 DbSet：

```
private static Mock<IEFModel> context;
private static Mock<IDbSet<CountryCode>> idbSet;

    [ClassInitialize]
    public static void Initialize(TestContext testContext)
    {
        context = new Mock<IEFModel>();

        idbSet = new Mock<IDbSet<CountryCode>>();

        context.Setup(c => c.CountryCodes).Returns(idbSet.Object);

    } 
```

对于 idbSet“本地”，我得到空的“对象引用未设置为对象的实例”错误。有没有办法像这样模拟 idbSet ？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T05:48:13.080

我是这样解决的：创建了两个名为 DbSetMock 的类：

```
public class DbSetMock<T> : IDbSet<T>
    where T : class
{
    #region Fields

    /// <summary>The _container.</summary>
    private readonly IList<T> _container = new List<T>();

    #endregion

    #region Public Properties

    /// <summary>Gets the element type.</summary>
    public Type ElementType
    {
        get
        {
            return typeof(T);
        }
    }

    /// <summary>Gets the expression.</summary>
    public Expression Expression
    {
        get
        {
            return this._container.AsQueryable().Expression;
        }
    }

    /// <summary>Gets the local.</summary>
    public ObservableCollection<T> Local
    {
        get
        {
            return new ObservableCollection<T>(this._container);
        }
    }

    /// <summary>Gets the provider.</summary>
    public IQueryProvider Provider
    {
        get
        {
            return this._container.AsQueryable().Provider;
        }
    }

    #endregion

    #region Public Methods and Operators

    /// <summary>The add.</summary>
    /// <param name="entity">The entity.</param>
    /// <returns>The <see cref="T"/>.</returns>
    public T Add(T entity)
    {
        this._container.Add(entity);
        return entity;
    }

    /// <summary>The attach.</summary>
    /// <param name="entity">The entity.</param>
    /// <returns>The <see cref="T"/>.</returns>
    public T Attach(T entity)
    {
        this._container.Add(entity);
        return entity;
    }

    /// <summary>The create.</summary>
    /// <typeparam name="TDerivedEntity"></typeparam>
    /// <returns>The <see cref="TDerivedEntity"/>.</returns>
    /// <exception cref="NotImplementedException"></exception>
    public TDerivedEntity Create<TDerivedEntity>() where TDerivedEntity : class, T
    {
        throw new NotImplementedException();
    }

    /// <summary>The create.</summary>
    /// <returns>The <see cref="T"/>.</returns>
    /// <exception cref="NotImplementedException"></exception>
    public T Create()
    {
        throw new NotImplementedException();
    }

    /// <summary>The find.</summary>
    /// <param name="keyValues">The key values.</param>
    /// <returns>The <see cref="T"/>.</returns>
    /// <exception cref="NotImplementedException"></exception>
    public T Find(params object[] keyValues)
    {
        throw new NotImplementedException();
    }

    /// <summary>The get enumerator.</summary>
    /// <returns>The <see cref="IEnumerator"/>.</returns>
    public IEnumerator<T> GetEnumerator()
    {
        return this._container.GetEnumerator();
    }

    /// <summary>The remove.</summary>
    /// <param name="entity">The entity.</param>
    /// <returns>The <see cref="T"/>.</returns>
    public T Remove(T entity)
    {
        this._container.Remove(entity);
        return entity;
    }

    #endregion

    #region Explicit Interface Methods

    /// <summary>The get enumerator.</summary>
    /// <returns>The <see cref="IEnumerator"/>.</returns>
    IEnumerator IEnumerable.GetEnumerator()
    {
        return this._container.GetEnumerator();
    }

    #endregion
} 
```

和 EFModelMock：

```
public class EFModelMock : IEFModel
{
    #region Fields

    /// <summary>The country codes.</summary>
    private IDbSet<CountryCode> countryCodes;

    #endregion

    #region Public Properties

    /// <summary>Gets the country codes.</summary>
    public IDbSet<CountryCode> CountryCodes
    {
        get
        {
            this.CreateCountryCodes();
            return this.countryCodes;
        }
    }

    #endregion

    #region Public Methods and Operators

    /// <summary>The commit.</summary>
    /// <exception cref="NotImplementedException"></exception>
    public void Commit()
    {
        throw new NotImplementedException();
    }

    /// <summary>The set.</summary>
    /// <typeparam name="T"></typeparam>
    /// <returns>The <see cref="IDbSet"/>.</returns>
    /// <exception cref="NotImplementedException"></exception>
    public IDbSet<T> Set<T>() where T : class
    {
        throw new NotImplementedException();
    }

    #endregion

    #region Methods

    /// <summary>The create country codes.</summary>
    private void CreateCountryCodes()
    {
        if (this.countryCodes == null)
        {
            this.countryCodes = new DbSetMock<CountryCode>();
            this.countryCodes.Add(
                new CountryCode { CountryName = "Australia", DisplayLevel = 2,       TelephoneCode = "61" });

        }
    }

    #endregion
} 
```

然后像这样测试：

```
[TestClass]
public class CountryCodeServiceTest
{
    #region Static Fields

    /// <summary>The context.</summary>
    private static IEFModel context;

    #endregion

    #region Public Methods and Operators

    /// <summary>The initialize.</summary>
    /// <param name="testContext">The test context.</param>
    [ClassInitialize]
    public static void Initialize(TestContext testContext)
    {
        context = new EFModelMock();
    }

    /// <summary>The country code service get country codes returns correct data.</summary>
    [TestMethod]
    public void CountryCodeServiceGetCountryCodesReturnsCorrectData()
    {
        // Arrange
        var target = new CountryCodeService(context);
        var countryName = "Australia";
        var expected = context.CountryCodes.ToList();

        // Act
        var actual = target.GetCountryCodes();

        // Assert
        Assert.IsNotNull(actual);
        Assert.AreEqual(actual.FirstOrDefault(a => a.CountryName == countryName).PhoneCode, expected.FirstOrDefault(a => a.CountryName == countryName).TelephoneCode);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-31T15:41:05.193

您必须设置模拟的`Local`属性。`idbSet`

* * *

例如：

```
idbSet = new Mock<IDbSet<CountryCode>>();

var col = new ObservableCollection<CountryCode>();
idbSet.SetupGet(x => x.Local).Returns(col); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-30T14:49:04.393

我一直在使用一种方法来创建我的模拟集，如下所示：

```
public static Mock<IDbSet<T>> CreateMockSet<T>(IQueryable<T> data) where T : class
{
    var mockSet = new Mock<IDbSet<T>>();
    mockSet.As<IQueryable<T>>().Setup(m => m.Provider).Returns(data.Provider);
    mockSet.As<IQueryable<T>>().Setup(m => m.Expression).Returns(data.Expression);
    mockSet.As<IQueryable<T>>().Setup(m => m.ElementType).Returns(data.ElementType);
    mockSet.As<IQueryable<T>>().Setup(m => m.GetEnumerator()).Returns(data.GetEnumerator());
    return mockSet;
} 
```

我只是添加了这一行：

```
mockSet.Setup(x => x.Local).Returns(new ObservableCollection<T>()); 
```

在返回声明之前，它解决了我的问题。

我的许多查询如下所示：

```
var myset = context.EntitySetName.Local.SingleOrDefault(x=>x.something==something)
          ??
          context.SingleOrDefault(x=>x.something==something); 
```

所以我只需要 Local 不为空，这样它就不会引发空引用异常。

# objective-c - KTPhotoBrowser 推送到 KTTumbsViewController

> ID：13132603
> 
> 赞同：2
> 
> 时间：2012-10-30T04:23:56.793
> 
> 标签：objective-c, xcode

我正在尝试使用[KTPhotoBrowser](https://github.com/kirbyt/KTPhotoBrowser)来使用它的缩略图视图功能。我在推送从 KTThumbsViewController 派生的 viewController 时遇到了一些困难。看来navigationController只能推送到UIViewController：

```
- (void)showSDWebImageSample
{
KTThumbsViewController *newController = [[KTThumbsViewController alloc] init];        
[self.navigationController pushViewController:newController animated:YES];
} 
```

KTThumbsViewController 的头文件包括：

```
@interface KTThumbsViewController : UIViewController <KTThumbsViewDataSource> 
```

我从提供的示例中获取了代码。但它给了我以下运行时错误：

-[KTThumbsViewController copyWithZone:]：无法识别的选择器发送到实例 0x8877130 2012-10-30 14:52:03.004 myCases_MD[36941:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[KTThumbsViewController copyWithZone:]：无法识别的选择器发送到实例 0x8877130'

有人可以帮我吗？

干杯，

# elmah - Can I use ELMAH to log exceptions which occurs in Entity framework classes?

> ID：13132606
> 
> 赞同：1
> 
> 时间：2012-10-30T04:24:10.723
> 
> 标签：elmah

I have two separate projects, one for EF and another for MVC. And added reference of EF project to MVC project.

Now, I am trying to use ELMAH to log errors from MVC application, and it's working fine with MVC exceptions. But I have one question, if any exception occurs in EF classes then can elmah will log that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:04:11.233

I think, I asked very simple question in curiosity. I used elmah to log errors from mvc application. My mvc application uses EF as ORM.

To log errors which occurs at EF, I used try-catch, with throw. Which pass errors to mvc application.

# ios - 在 iOS 上使用自动布局如何指定视图应该占用尽可能多的空间？

> ID：13132609
> 
> 赞同：17
> 
> 时间：2012-10-30T04:24:43.173
> 
> 标签：ios, ios6, autolayout

我在 iOS 中使用自动布局来尝试构建具有流体宽度的布局。我当前使用的约束的视觉格式是：

```
[self.scrollViewContainer addConstraints:[NSLayoutConstraint 
     constraintsWithVisualFormat:@"H:|-(>=32)-[viewToAdd(<=576)]-(>=32)-|" 
                         options:0 
                         metrics:nil  
                           views:NSDictionaryOfVariableBindings(viewToAdd)
]]; 
```

也就是说：我希望两边的最小间距为 32px，并且我希望`viewToAdd`最大宽度为 576px。这很好用，只是我希望在`viewToAdd`满足所有约束的同时用尽所有可用空间。目前，我得到了`viewToAdd`唯一一个与其内在内容大小一样宽的宽度，并且间距根据需要增长。

有没有办法指定`viewToAdd`应该尽可能大？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-30T19:39:41.543

您将不得不在视图上指定额外的约束，以使其调整视图的大小以填充剩余的可用空间。目前，您正在设置视图的最小值和最大值，但没有设置任何具体的约束来为自动布局提供更完整的解决方案。除了宽度的上限之外，您还需要给它 1\. 一个起点来解决视图的宽度，方法是明确地给它一个较低优先级的宽度，或者 2\. 给两边的间距多一些刚性约束。

根据您所描述的，您需要约束您的视图，使其与任一侧的超级视图有更多实质性的绑定，以便让系统解决宽度问题。由于您希望根据容器的大小来设置视图大小，因此您需要修改间距约束（上面的选项 2）。在上面的例子中，您只指定了最小间距，这将导致自动布局引擎发现以下任何约束解决方案对于 400pt 超级视图是有效的：

```
|-32pt-[20pt]-------348pt-| <-- autolayout will probably choose this one
|-100pt----[20pt]---280pt-|
|-50pt--[20pt-]-----330pt-| 
```

这可能不是你想要的。更重要的是，视图的宽度可以在 0-576pt 之间，这也可能不是您想要的。由于自动布局不知道你想要什么，它只是使用`intrinsicContentSize`视图的具体尺寸约束。由于您选择 32pt 作为间距，第一步是给间距约束一些更实质性的指令，即告诉系统视图边缘和父视图之间的间距*应该是*32pts，*除非*视图的宽度是>576 分。你会在你的 VFL 字符串中这样做：

```
"H:|-(>=32,==32@900)-[viewToAdd(<=576)]-(>=32,==32@900)-|" 
```

这表示：“`viewToAdd`最大宽度应为 576pts，并且在其自身与其父视图之间有 32pts 的填充。 *如果*父视图的大小超过最大宽度`viewToAdd`加上 64pts 的初始填充，则两侧的填充*应按*顺序增长继续求解约束集。”

这导致以下约束对于 400pt 超级视图是正确的：

```
|-32pt--[336pt]--32pt-| 
```

如果您希望`viewToAdd`在视图增长超过最大值时保持在其超级视图的中心，则必须将选项传递给 in 中`NSLayoutFormatAlignAllCenterX`的`options`参数`[NSLayoutConstraint -constraintsWithVisualFormat:]`。如果您没有`>=32`在 padding 上设置约束，或者没有在 padding 的约束上设置低于 1000（“必需”约束优先级）的优先级`==32`，那么您的 superview 将无法增长到 640pts 以上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-28T11:37:20.687

不确定这是否完全回答了这个问题，但对于那些使用 Storyboard 的人：我发现您可以为父视图的左侧和右侧的距离添加宽度约束和约束。如果您随后将宽度约束更改为 '<=' 而不是 '=' 并将距离约束（前导和尾随）的优先级设置为 750，则视图将最大到最大宽度，尊重距离约束如果视野太小。

[![现有的约束](../Images/d3a37f4652fccb33e0ddac585e0b10bf.png)](https://i.stack.imgur.com/0xjse.png)

# sql - 检索唯一名称并基于该名称获取日期

> ID：13132616
> 
> 赞同：1
> 
> 时间：2012-10-30T04:25:14.500
> 
> 标签：sql, sql-server, stored-procedures

我有两个存储过程，如下所示：

```
Select distinct TempName from History_Table 

Select TempName,RunDate from History_Table  where TempName=@tempname 
```

如何使用单个存储过程来获取不同的结果集`tempname`及其关联`RunDate`？

```
 TempName     RunDate                       RunBy

1   test    2012-10-11 00:00:00.000 chandu
2   testing 2012-12-15 00:00:00.000 kumar
3   asdsad  2012-08-09 00:00:00.000 asdsad
4   test    2012-12-12 00:00:00.000 asdasds
15  test    2012-10-01 00:00:00.000 asdaddf
15  test    2012-09-12 00:00:00.000 bghgh

I have to display like

TempName   RunDate                   RunBy
test       dates(in a dropdown)      lastrun name(i.e asdasds) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:32:58.907

从评论中，您可以尝试类似 (SQL Server 2005 + [CTE](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.90%29.aspx) )

```
;WITH UNames AS (
        Select  distinct 
                TempName 
        from    History_Table 
)
Select  ht.TempName,
        ht.RunDate 
from    History_Table  ht INNER JOIN
        UNames u    ON  ht.TempName = u.TempName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T07:34:35.800

SQL 的结果集必须遵循简单的表格形状。没有简单的方法来获得只有一行的结果，其中一列包含多个值（有一些丑陋的黑客，我不会进入）。

就我而言，最干净的方法是运行以下查询：

```
Select TempName,RunDate,RunBy from History_Table ORDER BY TempName,RunDate 
```

然后，无论在*消耗*这个表的结果时，它都应该跟踪`TempName`它处理的最后一个值。如果当前行具有*相同* `TempName`的值，则应将其添加`RunDate`到现有下拉列表中。否则，它应该为新行创建一个新行并创建一个只有一个值`TempName`的下拉列表。`RunDate`

# c - C Reader Writer Threads Lock Unlock

> ID：13132621
> 
> 赞同：0
> 
> 时间：2012-10-30T04:26:36.217
> 
> 标签：c, multithreading, pthreads, mutex

我试图完成我认为很简单的任务，但几天后已经达到了临界点。

我正在尝试使用多个读取器和单个写入器来模拟数据库。当我运行我的程序时，它会死锁。

我试图基于这个算法：

```
 1 semaphore accessMutex;     // Initialized to 1
 2 semaphore readersMutex;    // Initialized to 1
 3 semaphore orderMutex;      // Initialized to 1
 4 
 5 unsigned int readers = 0;  // Number of readers accessing the resource
 6 
 7 void reader()
 8 {
 9   P(orderMutex);           // Remember our order of arrival
10 
11   P(readersMutex);         // We will manipulate the readers counter
12   if (readers == 0)        // If there are currently no readers (we came first)...
13     P(accessMutex);        // ...requests exclusive access to the resource for readers
14   readers++;               // Note that there is now one more reader
15   V(orderMutex);           // Release order of arrival semaphore (we have been served)
16   V(readersMutex);         // We are done accessing the number of readers for now
17 
18   ReadResource();          // Here the reader can read the resource at will
19 
20   P(readersMutex);         // We will manipulate the readers counter
21   readers--;               // We are leaving, there is one less reader
22   if (readers == 0)        // If there are no more readers currently reading...
23     V(accessMutex);        // ...release exclusive access to the resource
24   V(readersMutex);         // We are done accessing the number of readers for now
25 }
26 
27 void writer()
28 {
29   P(orderMutex);           // Remember our order of arrival
30   P(accessMutex);          // Request exclusive access to the resource
31   V(orderMutex);           // Release order of arrival semaphore (we have been served)
32 
33   WriteResource();         // Here the writer can modify the resource at will
34 
35   V(accessMutex);          // Release exclusive access to the resource
36 } 
```

但是我试图只使用 pthreads 而不是信号量来实现它。正如您所料，这就是乱七八糟的结果：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#define MAX 5 //size of buffer

pthread_mutex_t mutex; //pthread_mutex type
pthread_cond_t condw, condr; //reader/writer cond var
int buffer = 0, rc = 0;

pthread_mutex_t db; //pthread_mutex type

//reader-writer header:
void* writer(void* ptr);
void* reader(void* ptr);

void use_data();
void write_database();
void readdb();

int main(int argc, char** argv)
{
  pthread_t read,write;
  //allow signal back and forth
  pthread_mutex_init(&mutex,0); //init mutex
  pthread_cond_init(&condw, 0); //init writer
  pthread_cond_init(&condr,0); //init reader

    pthread_mutex_init(&db,0); //init db

  //this calls the void* reader function
  pthread_create(&write,0,writer,0); //create thread
  pthread_create(&read,0,reader,0); //create thread

  //let them join
  pthread_join(read,0);
  pthread_join(write,0);

  //destroy them
  pthread_cond_destroy(&condw);
  pthread_cond_destroy(&condr);
  pthread_mutex_destroy(&db);
  pthread_mutex_destroy(&mutex);

  return 0;
}//end main

void* reader(void* arg)
{
  while(1) //if there is a reader lock the db 
  {
    pthread_mutex_lock(&mutex);
    rc++;
    if(rc==1)
    {
      pthread_mutex_lock(& db);
    }
    pthread_mutex_unlock(&mutex);
    readdb();
    pthread_mutex_lock(&mutex);
    rc--;
    if(rc==0) 
    {
      pthread_mutex_unlock(&db);
    }
    pthread_mutex_unlock(&mutex);
    use_data();
  }
}

void* writer(void* arg)
{
  while(1) //unlock the db
  {
    pthread_mutex_lock(&db);
    write_database();
    pthread_mutex_unlock(&db);
  }
}

void use_data(){}
void write_database(){}
void readdb(){} 
```

任何有关我们出错的解决方案和解释的帮助都将受到赞赏，因为这将帮助我和我的同事。问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:01:24.640

问题是您的源算法依赖于一个线程锁定`accessMutex`锁，然后另一个线程可能会解锁它的事实。这对于基于信号量的互斥体是允许的，但对于 pthreads 互斥体是不允许的*。*

`sem_init()`pthread 中有信号量，由`sem_post()`和`sem_wait()`函数提供。您可以使用这些来编写源算法的直接实现，它应该可以正常工作。

或者，pthreads 还提供本机读写锁类型 - 请参阅函数`pthread_rwlock_init()`、`pthread_rwlock_rdlock()`和。您可以将它用于一个非常简单的实现，但如果它应该是一个学习练习，那么这显然是没有意义的。`pthread_rwlock_wrlock()``pthread_rwlock_unlock()`

# ruby - REXML：如何在现有但为空的文件中添加根元素？

> ID：13132623
> 
> 赞同：0
> 
> 时间：2012-10-30T04:26:39.463
> 
> 标签：ruby, rexml

我有一个名为“users.xml”的空 XML 页面。我希望能够使用 REXML 创建所有内容。

```
require "rexml/document"
include REXML  # so that we don't have to prefix everything with REXML::...

xmlfile = File.new("users.xml")
doc = Document.new(xmlfile)

//code to save root element here... 
```

在我看来，`doc`首先读取“users.xml”的内容，但文档中发生的更改不会传播回来。如何保存对文件的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T06:07:53.873

你打开文件：

```
doc = Document.new(xmlfile) 
```

但你从来没有读过它，或者再写一次。

你需要使用类似的东西：

```
xmlfile = File.read("users.xml") 
```

阅读它，（这不是一种可扩展的方式，但这是一个完全不同的主题）。

使用 将其转换为 REXML 文档后`doc = Document.new(xmlfile)`，您需要将其写回。您可以使用`File.write`或`File.open`与块一起使用。

# android - Android - 新应用启动图标未呈现

> ID：13132629
> 
> 赞同：0
> 
> 时间：2012-10-30T04:27:17.563
> 
> 标签：android

我在 4 个文件夹中放置了一个新的启动图标，并为 4 种不同的分辨率将其命名为 ic_launcher.png，我的清单中有这个：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
    > 
```

但是当我运行该应用程序时，我仍然会显示默认的启动图标。还有什么我必须做的事情我忘记了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:03:36.027

重命名所有 4 个可绘制文件夹中的图标并刷新“res”文件夹。右键单击它->“刷新”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:35:53.567

确保从设备中删除旧版本的应用程序，然后再次运行它，它将呈现

# aviarc - 所有应用程序中的小部件可访问性

> ID：13132634
> 
> 赞同：2
> 
> 时间：2012-10-30T04:27:44.967
> 
> 标签：aviarc

如何将小部件复制到安装中的所有项目都可以使用它的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:38:52.043

您可以通过将小部件命名空间复制到`<aviarc-data>/widgets`，然后重新启动 Aviarc，使所有应用程序都可以使用它。（这也是默认小部件命名空间所在的文件夹`com.aviarc.toronto.widget.core*`。）

如果您的小部件没有命名空间，请将其复制到类似`<aviarc-data>/widgets/awesome-widget-namespace/1.0.0/widgets/<your-widget>`.

# visual-studio-2010 - '_umul128'：未找到标识符

> ID：13132635
> 
> 赞同：3
> 
> 时间：2012-10-30T04:27:46.403
> 
> 标签：visual-studio-2010, visual-c++, compilation

在VS2010中，我测试了以下_umul128的示例代码。发生编译错误：

“错误 C3861：'_umul128'：找不到标识符”。

```
// umul128.c
// processor: IPF, x64

#include <stdio.h>
#include <intrin.h>

#pragma intrinsic(_umul128)

int main()
{
    unsigned __int64 a = 0x0fffffffffffffffI64;
    unsigned __int64 b = 0xf0000000I64;
    unsigned __int64 c, d;

    d = _umul128(a, b, &c);

    printf_s("%#I64x * %#I64x = %#I64x%I64x\n", a, b, c, d);
} 
```

源代码来自 MSDN： http: [//msdn.microsoft.com/en-US/library/vstudio/3dayytw9](http://msdn.microsoft.com/en-US/library/vstudio/3dayytw9(v=vs.100).aspx) (v=vs.100).aspx 。

操作系统是 Windows8，64 位。是编译环境造成的吗？如何解决？提前致谢。

# javascript - 在被 Knockout 移除之前使用 CustomBindings 淡出 DOM 元素

> ID：13132648
> 
> 赞同：6
> 
> 时间：2012-10-30T04:30:15.107
> 
> 标签：javascript, knockout.js

使用 KnockoutJS 自定义绑定我试图在 DOM 元素被 Knockout 删除之前淡出它。我有一个[JSFiddle 示例](http://jsfiddle.net/PSbKs/47/)，当列表选择发生更改时，该示例当前的行为如下：

*   旧文字瞬间消失
*   新的文字逐渐淡出。

但是，我想：

*   旧文字逐渐淡出
*   新的文字逐渐淡出

这可能吗？我看不到对即将被删除的 DOM 元素进行操作的方法。以下 Update 方法仅在它们已被删除后触发（但在添加新 DOM 元素之前）。

```
ko.bindingHandlers.fade= {
    update: function(element, valueAccessor) {
        $(element).hide().fadeIn(1500);
    }  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-30T06:15:29.717

解决它的一种方法是不使用`text`绑定，而不是自定义`fade`绑定，还应该处理文本的附加和删除。使用这种方法，您可以挂钩您的淡入/淡出逻辑。

所以你的`fade`绑定应该是这样的：

```
ko.bindingHandlers.fade = {
    init: function(element, valueAccessor) { 
        // initially don't show the element        
        $(element).hide();        
    },
    update: function(element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        $(element).fadeOut(500, function() {
            // set the text of the element, 
            // value needs to be defined outside of the fadeOut callback to work
            ko.utils.setTextContent(element, value);
            $(element).fadeIn(500);
        });
    }
}; 
```

以及用法：

```
<div data-bind="fade: selectedName" class="main"></div> 
```

一个演示[JSFiddle](http://jsfiddle.net/nemesv/AwDmC/1/)。

# postgresql - osm2pgsql：函数 AddGeometryColumn 不存在

> ID：13132649
> 
> 赞同：17
> 
> 时间：2012-10-30T04:30:30.590
> 
> 标签：postgresql, postgis, openstreetmap, postgresql-9.2

我想使用工具[Osm2pgsql将](http://wiki.openstreetmap.org/wiki/Osm2pgsql)[OSM 文件](https://dl.dropbox.com/u/11776689/2012_10_30_postgres/artyom.xml)导入我的 PostgreSQL 数据库（Windows，Postgres 版本 9.2）。

当我运行以下命令时

```
osm2pgsql.exe --create -d mydb artyom.xml -U myuser -W --style default.style 
```

我得到错误

```
SELECT AddGeometryColumn('planet_osm_point', 'way', 900913, 'POINT', 2 );
 failed: FEHLER:  Funktion addgeometrycolumn(unknown, unknown, integer, unknown,
 integer) existiert nicht
LINE 1: SELECT AddGeometryColumn('planet_osm_point', 'way', 900913, ...
               ^
HINT:  Keine Funktion stimmt mit dem angegebenen Namen und den Argumenttypen ├╝b
erein. Sie m├╝ssen m├Âglicherweise ausdr├╝ckliche Typumwandlungen hinzuf├╝gen.

Error occurred, cleaning up 
```

德语翻译：

```
SELECT AddGeometryColumn('planet_osm_point', 'way', 900913, 'POINT', 2 );
 failed: ERROR:  Function addgeometrycolumn(unknown, unknown, integer, unknown,
 integer) doesn't exist
LINE 1: SELECT AddGeometryColumn('planet_osm_point', 'way', 900913, ...
               ^
HINT: No function matches the specified name and argument types. Maybe you need
to make explicit casts.

Error occurred, cleaning up 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-30T05:54:03.897

看起来您尚未将 PostGIS 支持添加到您尝试使用的数据库`osm2pgsql.exe`中。请参阅[PostGIS 安装文档 (2.0)](http://postgis.refractions.net/documentation/manual-2.0/postgis_installation.html#PGInstall)。

由于您使用的是 PostGIS 2.0，因此您应该能够仅`CREATE EXTENSION postgis;`加载 PostGIS。该命令必须以超级用户身份运行——通常是用户`postgres`。采用：

```
psql -U postgres mydbname 
```

以用户身份连接`postgres`。

看来至少 Windows 版本`osm2pgsql`不支持 PostGIS 2.0 - 或者大约六个月前不支持。请参阅OSM GitHub 上的[此问题报告，以及](https://github.com/hotosm/installer/issues/1)[有关如何设置 PostGIS 2 数据库以与需要 PostGIS 1.x 的 osm2pgsql 兼容的说明](https://github.com/springmeyer/win-osm-workshop/blob/master/Tutorial.md#step-6-configure-the-osm-postgis-database)。未来的读者应该在继续之前检查这些步骤是否仍然需要；Windows可能`osm2pgsql`会在某个时候更新以支持 PostGIS 2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-22T13:42:37.070

相当晚了，但我在 16 年 9 月偶然发现并绊倒了。SQL 行：

`SELECT AddGeometryColumn('planet_osm_point', 'way', 900913, 'POINT', 2 );`

需要重写为这个函数签名：

`('catalog','schema','table','column',srid,'type',type_mod,boolean)`;

空白是无关紧要的。所以像下面这样的东西应该可以解决问题：

```
SELECT AddGeometryColumn('','','planet_osm_point', 'way', 900913, 'POINT', 2,true ); 
```

检查一个实际的 INSERT 语句以获取正确的列名，在我的版本中是“geom”。

确保 varchars 被引用，整数和布尔值未被引用，当然正确的值在适当的位置。

祝你好运。

# java - 无法对带有 ^（插入符号）符号的字符串使用 String.split

> ID：13132655
> 
> 赞同：3
> 
> 时间：2012-10-30T04:31:25.323
> 
> 标签：java, regex, string, split

我有一个字符串 218~2~4~6^219~1~3~3^218~5~2~2^217~10~3~8^，我想用 ^ 来分割字符串。我试过这样

```
String mainString = "218~2~4~6^219~1~3~3^218~5~2~2^217~10~3~8^";

String[] tokens = mainString.split("^");

for (String stri: tokens){
        System.out.println("\nString tokens: " + stri);
    } 
```

但它没有用..请帮我拆分字符串

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T04:33:47.333

在正则表达式中使用`backslash(\)`前面，因为它是一个特殊字符（匹配字符串的开头）。 在前面`^`添加后，它会将其视为文字，您需要执行拆分。`backslash(\)``^`

```
 String[] tokens = mainString.split("\\^"); 
```

# c++ - C++ 内存地址递增

> ID：13132659
> 
> 赞同：3
> 
> 时间：2012-10-30T04:32:19.740
> 
> 标签：c++, sockets, memory, byte, send

有没有办法让我获取一个内存地址并将其推进一定数量并存储在变量中？该变量类型必须是什么？

例如，在下面的代码中，我想首先查看数据 + 0，然后对于之后的每个步骤查看数据 + 发送。如果我没看错的话，发送存储为字节，数据是内存地址。

```
bool sendAll(int socket, const void *data, ssize_t size) {
    ssize_t sent = 0;
    ssize_t just_sent;
    while (sent < size) {
        just_sent = send(socket, data + sent, size - sent, 0);
        if (just_sent < 0) {
            return false;
        }
        sent += just_sent;
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:39:48.143

这就是`char*`将要做的。指针数学，当指针类型为 时`T*`，总是以 为增量工作`sizeof (T)`。`sizeof (char) == 1`根据定义。

所以试试：

```
just_sent = send(socket, sent + (const char*)data, size - sent, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:56:33.860

只是补充@Ben的答案，因为我认为“只需将调用发送的一行替换为我的答案中的版本即可。” 不是一个很好的答案...

@Rick，重要的是您知道传输了多少字节。无论数组是否是整数数组，如果您想从`sent`-th**字节**开始，您可以强制`data`转换为，`(char*)`以便编译器在`(char*)data + sent`将`sent`字节添加到`data`. 那是因为`sizeof(char) == 1`字节。相反，如果您转换`data`为`(int*)`，而不是移动`sent`字节，您将移动`sent * sizeof(int)`字节。

# jquery - jquery事件设置css

> ID：13132663
> 
> 赞同：-1
> 
> 时间：2012-10-30T04:32:44.610
> 
> 标签：jquery, css, tagging

嘿，我的页面上有一个 jquery easy ui.. 但我在这里有点困惑......我想创建一个输入字段，但看起来像是某种标记字段，所以在用户键入分隔符后（让我们说逗号) ，然后输入的单词将具有类似 css 的标记字段...

任何人都可以建议我去哪里？

我到处找，但我仍然很困惑..

如果你能帮我做到这一点，我将不胜感激......我真的需要这个代码......谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:35:18.057

我相信您正在寻找其中之一：

[http://xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

或者

[http://webspirited.com/tagit/](http://webspirited.com/tagit/)

# php - 在没有 cas 的 Memcached 中实现原子计数器

> ID：13132664
> 
> 赞同：2
> 
> 时间：2012-10-30T04:32:52.323
> 
> 标签：php, algorithm, transactions, memcached

我们有一个网页想限制 uo 到 100 人可以同时访问，所以我们使用一个 memcached 来实现一个全局计数器，例如

我们正在使用`http://www.php.net/manual/en/class.memcache.php`所以没有`cas`，当前代码类似于

```
$count = $memcache_obj->get('count');
if ($count < 100) {
   $memcache_obj->set('count', $count+1);
   echo "Welcome";
} else {
   echo "No luck";
} 
```

如您所见，上述代码中存在竞争条件，但如果我们不打算替换`memcached`支持的扩展`cas`，它是否能够仅使用 PHP 代码来支持它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-29T22:05:33.067

作为对“emcconville”的回答。即使没有 CAS，这也是非阻塞的。

如果您关心竞态条件，并且计数值是完全任意的，您可以`Memcache::increment`在任何业务逻辑之前直接使用。

[增量](http://www.php.net/manual/en/memcache.increment.php)方法将在增量发生后返回当前值；其中，您可以比较结果。如果 key 尚未设置，increment 也将返回**false ；**允许您的应用程序根据需要处理它。

```
$current = $memcache_obj->increment('count');

if($current === false) {

  // NOT_FOUND, so let's create it
  // Will return false if has just been created by someone else.
  $memcache_obj->add('count',0); // <-- no risk of race-condition

  // At this point 'count' key is created by us or someone else (other server/process).
  // "increment" will update 0 or whatever it is at the moment by 1.
  $current = $memcache_obj->increment('count')
  echo "You are the $current!";

} 
if ($current < 100) {

  echo "Hazah! You are under the limit. Congrats!";

} else {

  echo "Ah Snap! No Luck - you reached the limit.";
  // If your worried about the value growing _too_ big, just drop the value down.
  // $memcache_obj->decrement('count');

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-30T14:22:30.667

如果您关心竞态条件，并且计数值是完全任意的，您可以`Memcache::increment`在任何业务逻辑之前直接使用。

[增量](http://www.php.net/manual/en/memcache.increment.php)方法将在增量发生后返回当前值；其中，您可以比较结果。如果 key 尚未设置，increment 也将返回**false ；**允许您的应用程序根据需要处理它。

```
$current = $memcache_obj->increment('count');

if($current === false) {

  // NOT_FOUND, so let's create it
  $memcache_obj->set('count',1); // <-- still risk of race-condition
  echo "Your the first!";

} else if ($current < 100) {

  echo "Hazah! Your under the limit.";

} else {

  echo "Ah Snap! No Luck";
  // If your worried about the value growing _too_ big, just drop the value down.
  // $memcache_obj->decrement('count');

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-21T10:41:21.983

```
function memcache_atomic_increment($counter_name, $delta = 1) {

    $mc = new Memcache;
    $mc->connect('localhost', 11211) or die("Could not connect");

    while (($mc->increment($counter_name, $delta) === false) &&
           ($mc->add($counter_name, ($delta<0)?0:$delta, 0, 0) === false)) {
        // loop until one of them succeeds
    }

    return intval($mc->get($counter_name));
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-30T04:41:37.733

中的注释`Memcache::add`包括一个[示例锁定功能](http://www.php.net/manual/en/memcache.add.php#82277)，您尝试过吗？

# linux - /usr/include/dirent.h 中的 DT_WHT 是什么意思？

> ID：13132667
> 
> 赞同：5
> 
> 时间：2012-10-30T04:33:07.797
> 
> 标签：linux, file-type, dirent.h

我正在阅读 dirent.h 的源代码，有一个枚举

```
enum
{
    DT_UNKNOWN = 0,  // unknown type
    #define DT_UNKNOWN DT_UNKNOWN
    DT_FIFO = 1,     // a named pipe, or FIFO
    #define DT_FIFO DT_FIFO
    DT_CHR = 2,     // a character device
    #define DT_CHR DT_CHR
    DT_DIR = 4,     // a directory
    #define DT_DIR DT_DIR
    DT_BLK = 6,     // a block device
    #define DT_BLK DT_BLK
    DT_REG = 8,     // regular file
    #define DT_REG DT_REG
    DT_LNK = 10,    // symbolic link
    #define DT_LNK DT_LNK
    DT_SOCK = 12,   // local domain socket
    #define DT_SOCK DT_SOCK
    DT_WHT = 14     // ?
    #define DT_WHT DT_WHT
}; 
```

那么什么是 DT_WHT？我搜索了 Single Unix Specification Version 4，但一无所获。我的发行版是 CentOS 6.2 x64 Linux 内核版本是：2.6.32-220.x16.x86_64。

非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:27:23.537

我在谷歌上搜索`readdir DT_WHT`并找到[了这个线程](http://sourceware-org.1504.n7.nabble.com/BZ-6895-Describe-DT-LNK-td5495.html)，它解释了它是来自 BSD 的“whiteout”。

# java-native-interface - 通过jni从c ++调用java代码时出现奇怪的sigsegv

> ID：13132669
> 
> 赞同：1
> 
> 时间：2012-10-30T04:33:17.313
> 
> 标签：java-native-interface

以下代码是非常样板代码，可以正常运行，但是在 gdb 中运行时会崩溃。因此，我不会在意，但这是我更大程序的简化版本，无论是否使用 gdb，它都会崩溃。对于我在这里做错的任何帮助将不胜感激。

它在最后一次调用 JVM “jobject hbase_configuration = env->CallStaticObjectMethod(cls, create_mid);”时崩溃

我已经尝试通过不同的东西通过 JNI 多次调用 HBaseConfiguration.Create ，并且在所有情况下它都会崩溃。gdb 上的堆栈跟踪似乎不是很有帮助，尽管使用 -g 编译，我无法从中获取任何符号。

```
#include <string>
#include <glog/logging.h>
#include <jni.h>
// (edit - this was hidden in the original post).

int main(int argc, char* argv[]) {
  JavaVM *jvm;
  JNIEnv *env;
  JavaVMInitArgs vm_args;
  JavaVMOption options[5];

  vm_args.nOptions = 5;
  vm_args.version = JNI_VERSION_1_6;
  vm_args.options = options;
  vm_args.ignoreUnrecognized = 1;

  JNI_GetDefaultJavaVMInitArgs(&vm_args);

  options[0].optionString = "-Djava.class.path=hbase-1.0-SNAPSHOT.jar:activation-1.1.jar:asm-3.1.jar:avro-1.7.1.cloudera.2.jar:commons-beanutils-1.7.0.jar:commons-beanutils-core-1.8.0.jar:commons-cli-1.2.jar:commons-codec-1.4.jar:commons-collections-3.2.1.jar:commons-configuration-1.6.jar:commons-daemon-1.0.3.jar:commons-digester-1.8.jar:commons-el-1.0.jar:commons-httpclient-3.1.jar:commons-io-2.1.jar:commons-lang-2.5.jar:commons-logging-1.1.1.jar:commons-math-2.1.jar:commons-net-3.1.jar:ftplet-api-1.0.0.jar:ftpserver-core-1.0.0.jar:ftpserver-deprecated-1.0.0-M2.jar:guava-11.0.2.jar:hadoop-annotations-2.0.0-cdh4.1.1.jar:hadoop-auth-2.0.0-cdh4.1.1.jar:hadoop-common-2.0.2-alpha.jar:hadoop-common-2.0.2-alpha-tests.jar:hadoop-hdfs-2.0.0-cdh4.1.1.jar:hadoop-test-2.0.0-mr1-cdh4.1.1.jar:hbase-0.92.1-cdh4.1.0.jar:hbase-0.92.1-cdh4.1.0-sources.jar:hbase-0.92.1-cdh4.1.0-tests.jar:high-scale-lib-1.1.1.jar:hsqldb-1.8.0.10.jar:jaxb-api-2.1.jar:jaxb-impl-2.2.3-1.jar:jersey-core-1.8.jar:jersey-json-1.8.jar:jersey-server-1.8.jar:jets3t-0.6.1.jar:jline-0.9.94.jar:jsch-0.1.42.jar:jsp-api-2.1.jar:jsr305-1.3.9.jar:junit-4.10.jar:kfs-0.3.jar:log4j-1.2.17.jar:metrics-core-2.1.2.jar:paranamer-2.3.jar:protobuf-java-2.4.1.jar:servlet-api-2.5.jar:tools.jar";
  options[1].optionString = "-verbose:jni";
  options[2].optionString = "-Xcheck:jni:pedantic,verbose";
  options[3].optionString = "-Xdebug";
  options[4].optionString = "-Xrunjdwp:transport=dt_socket,address=4242,server=y,suspend=n";
  vm_args.nOptions = 5;
  vm_args.version = JNI_VERSION_1_6;
  vm_args.options = options;
  vm_args.ignoreUnrecognized = 1;

  // Load and initialize a Java VM, return a JNI interface 
  // pointer in env.
  long result = JNI_CreateJavaVM(&jvm, (void **)&env, &vm_args);
  if (result == JNI_ERR) {
    LOG(ERROR) << "Failed to create a JVM";
    return false;
  }

   jclass cls = env->FindClass("org/apache/hadoop/hbase/HBaseConfiguration");
  if (cls == NULL) {
    LOG(ERROR) << " Could not find class org/apache/hadoop/hbase/HBaseConfiguration";
    return false;
  }

  jmethodID create_mid = env->GetStaticMethodID(
      cls, "create", "()Lorg/apache/hadoop/conf/Configuration;");
  if (create_mid == NULL) {
    LOG(ERROR) << "Could not find static method create in HBaseConfiguration";
    return false;
  }

  LOG(INFO) << "Creating conf";
  jobject hbase_configuration = env->CallStaticObjectMethod(cls, create_mid);

  LOG(INFO) << "Created conf";
  return 0;
} 
```

堆栈跟踪如下所示：

```
#0  0x00007ffff134a722 in ?? ()
#1  0x00007ffff12e8410 in ?? ()
#2  0x0000000700000000 in ?? ()
#3  0x00007fffffffd150 in ?? ()
#4  0x00007fffffffd108 in ?? ()
#5  0x000000000060e800 in ?? ()
#6  0x000000077fbcaa30 in ?? ()
#7  0x000000000000001b in ?? ()
#8  0x0000000000000000 in ?? () 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T15:19:11.650

这确实是 technomage 在评论中所建议的。gdb 崩溃是一个红鲱鱼，因为 jvm 抛出了本来应该由 jvm 处理的 SIGSEGV。

一旦我告诉 gdb“处理 SIGSEGV nostop”，它就可以正常工作，并且我能够调试我的更大程序。

# c# - WMI 调用以获取驱动程序

> ID：13132674
> 
> 赞同：3
> 
> 时间：2012-10-30T04:33:54.027
> 
> 标签：c#, wmi, wmi-service

我是使用 WMI 的新手。它是什么？

例如，我可以在 C# 中使用 WMI 调用来获取我的 PC 上的驱动程序列表吗？如果是这样，我应该打电话给哪个班级？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T15:36:30.147

要列出已安装的驱动程序，您可以使用[`Win32_PnPSignedDriver`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394354%28v=vs.85%29.aspx)WMI 类，如本示例所示。

```
using System;
using System.Collections.Generic;
using System.Management;
using System.Text;

namespace GetWMI_Info
{
    class Program
    {

        static void Main(string[] args)
        {
            try
            {
                string ComputerName = "localhost";
                ManagementScope Scope;                
                Scope = new ManagementScope(String.Format("\\\\{0}\\root\\CIMV2", ComputerName), null);

                Scope.Connect();
                ObjectQuery Query = new ObjectQuery("SELECT * FROM Win32_PnPSignedDriver");
                ManagementObjectSearcher Searcher = new ManagementObjectSearcher(Scope, Query);

                foreach (ManagementObject WmiObject in Searcher.Get())
                {
                    Console.WriteLine("{0,-35} {1,-40}","ClassGuid",WmiObject["ClassGuid"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","DeviceClass",WmiObject["DeviceClass"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","DeviceID",WmiObject["DeviceID"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","DeviceName",WmiObject["DeviceName"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Manufacturer",WmiObject["Manufacturer"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Name",WmiObject["Name"]);// String
                    Console.WriteLine("{0,-35} {1,-40}","Status",WmiObject["Status"]);// String

                }
            }
            catch (Exception e)
            {
                Console.WriteLine(String.Format("Exception {0} Trace {1}",e.Message,e.StackTrace));
            }
            Console.WriteLine("Press Enter to exit");
            Console.Read();
        }
    }
} 
```

此外，如果您是 WMI 主题的新手，您可以使用类似的工具[`WMI Delphi Code Creator`](http://code.google.com/p/wmi-delphi-code-creator/)来探索 WMI 内容并生成代码来访问 WMI。

# wordpress - 如何在 Wordpress 模板中调用自定义字段

> ID：13132676
> 
> 赞同：-1
> 
> 时间：2012-10-30T04:34:55.897
> 
> 标签：wordpress

我想在 single.php 模板中调用自定义字段来完成一个短代码，从而显示一个菜单。

我放置了以下代码，但它不起作用

```
<?php echo do_shortcode("[custommenu menu=<?php echo get_post_meta($post->ID, ‘tabmenu’, true); ?>]?>") 
```

请帮忙

这是我的模板文件

我将它保存为 single-default.php 并从 single.php 文件中按类别调用它

```
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <div id="content">

        <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
            <h1 class="entry-title"><?php the_title(); ?></h1>

<div class="tab-menu"><?php echo do_shortcode("[custommenu menu='".get_post_meta($post->ID, ‘tabmenu’, true)."']"); ?>
</div>

            <div class="entry-content">
                <?php if(get_option('resizable_integrate_singletop_enable') == 'on') echo (get_option('resizable_integration_single_top')); ?>      
                <?php the_content(''); ?>
                <?php wp_link_pages( array( 'before' => '<div class="page-link">' . __( 'Pages:', 'themejunkie' ), 'after' => '</div>' ) ); ?>
                <?php if(get_option('resizable_integrate_singlebottom_enable') == 'on') echo (get_option('resizable_integration_single_bottom')); ?>                        
                <div class="clear"></div>
                <?php printf(the_tags(__('<div class="entry-tags"><span>Tags:</span>&nbsp;','themejunkie'),', ','</div>')); ?>
                <?php edit_post_link('('.__('Edit', 'themejunkie').')', '<span class="entry-edit">', '</span>'); ?>
            </div><!-- .entry-content -->
        </div><!-- #post-<?php the_ID(); ?> -->

        <div class="clear"></div>

        <div class="entry-bottom">

                          <div class="clear"></div>

        </div><!-- .entry-bottom -->

    </div><!-- #content -->

<?php endwhile; else: ?>
<?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:40:04.540

您需要在短代码中连接内部回声

```
<?php echo do_shortcode("[custommenu menu='".get_post_meta($post->ID, ‘tabmenu’, true)."']"); ?> 
```

# algorithm - 在不使用递归/堆栈的情况下打印给定文件夹和子文件夹中的所有文件

> ID：13132679
> 
> 赞同：5
> 
> 时间：2012-10-30T04:35:05.810
> 
> 标签：algorithm, data-structures, language-agnostic

我最近接受了一家知名公司的软件开发人员职位面试，这是被问到的问题之一：

“鉴于以下方法：

```
List subDirectories(String directoryName){ ... }; 
List filesInDirectory(String directoryName) { ... }; 
```

顾名思义，第一种方法返回输入目录（'directoryName'）中直接子目录的名称列表，第二种方法返回此文件夹中所有文件的名称列表。

打印文件系统中的所有文件。”

我想了想，给了面试一个非常明显的递归解决方案。然后她告诉我不要递归地做。由于递归使用调用堆栈，我告诉她我将使用辅助堆栈，此时她告诉我也不要使用堆栈。不幸的是，我无法提出解决方案。我确实问过如何在没有递归/堆栈的情况下完成它，但她不会说。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:57:25.757

您想使用队列和 BFS 算法。

我想一些伪代码会很好：

```
files = filesInDirectory("/")
foreach (file in files) {
   fileQ.append(file)
}

dirQ = subDirectories("/")
while (dirQ != empty) {
   dir = dirQ.pop
   files = filesInDirectory(dir)
   foreach (file in files) {
      fileQ.append(file)
   }
   dirQ.append(subDirectories(dir))
}

 while (fileQ != empty) {
   print fileQ.pop
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:43:03.400

如果我理解正确，直接子目录只是该文件夹中的目录。我的意思是如果 I=我们有这三个路径 和`/home/user`，我们可以说两者和都是 的直接子目录，但不是。这同样适用于 if和are 文件（是立即的，而不是）。`/home/config``/home/user/u001``user``config``/home/``u001``user``u001``user``u001`

因此，您实际上并不需要递归或堆栈来返回直接子目录或文件的列表。

**编辑：**我认为 OP 想要实现`subDirectories()`and`filesInDirectories()`功能。

因此，您可以执行打印所有文件（一种伪代码）之类的操作：

```
List subd = subDirectories(current_dir);
List files = filesInDirectories(current_dir);

foreach (file in files) {
    print file.name();
}

while (!subd.empty()) {
    dir = subd.pop();

    files = filesInDirectory(dir.name());

    foreach (file in files) {
        print file.name();
    }

    subd.append(subDirectories(dir.path()));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T11:28:53.783

我认为@lqs 建议的确实是她可能一直在寻找的一个可以接受的答案：将完整路径存储在一个变量中，如果您输入子目录，则将目录名称附加到它，并在您删除最后一个目录名称时别管它。这样，您的完整路径将充当指向您当前在文件系统中的位置的指针。

因为完整路径总是在最后被修改，所以完整路径的行为（并不奇怪）就像你的堆栈一样。

除了面试问题，我想我仍然会选择一个真正的堆栈而不是字符串操作......

# apache-flex - 从 flex 端调用 ASP.Net (C#) 中的函数时出错

> ID：13132680
> 
> 赞同：1
> 
> 时间：2012-10-30T04:35:10.630
> 
> 标签：apache-flex, function, callback

我想从 flex 端调用 c# 端的函数。但我收到如下错误。

> CallBack method="handleFaultReturn" arguments="[RPC Fault faultString="Could not find a suitable method with name SampleFunction" faultCode="Server.Processing" faultDetail="null"]"

任何想法？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:48:04.457

谢谢回复。我知道了。这是由于 ASP .net 中函数的访问修饰符。以前它是**私有**的。我将其更改为**public**。

# ruby - 如何循环重启守护进程？

> ID：13132682
> 
> 赞同：4
> 
> 时间：2012-10-30T04:35:26.547
> 
> 标签：ruby, daemons, tweetstream

我正在尝试使用 Ruby 的`daemon`gem 并循环重启具有自己循环的守护程序。我的代码现在看起来像这样：

```
require 'daemons'

while true
  listener = Daemons.call(:force => true) do
    users = accounts.get_updated_user_list

    TweetStream::Client.new.follow(users) do |status|
      puts "#{status.text}"
    end
  end
  sleep(60)
  listener.restart
end 
```

运行它会给我以下错误（60秒后）：

```
undefined method `restart' for #<Daemons::Application:0x007fc5b29f5658> (NoMethodError) 
```

所以显然`Daemons.call`不会像我想的那样返回一个可控的守护进程。我需要做什么才能正确设置它。守护进程在这里是正确的工具吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T21:33:13.953

我认为这就是您所追求的，尽管我尚未对其进行测试。

```
class RestartingUserTracker
  def initialize
    @client = TweetStream::Client.new
  end

  def handle_status(status)
    # do whatever it is you're going to do with the status
  end

  def fetch_users
    accounts.get_updated_user_list
  end

  def restart
    @client.stop_stream
    users = fetch_users
    @client.follow(users) do |status|
      handle_status(status)
    end
  end
end

EM.run do
  client = RestartingUserTracker.new
  client.restart

  EM::PeriodicTimer.new(60) do
    client.restart
  end
end 
```

以下是它的工作原理：

TweetStream uses EventMachine internally, as a way of polling the API forever and handling the responses. I can see why you might have felt stuck, because the normal TweetStream API blocks forever and doesn't give you a way to intervene at any point. However, TweetStream does allow you to set up other things in the same *event loop*. In your case, a timer. I found the documentation on how to do that here: [https://github.com/intridea/tweetstream#removal-of-on_interval-callback](https://github.com/intridea/tweetstream#removal-of-on_interval-callback)

By starting up our own EventMachine reactor, we're able to inject our own code into the reactor as well as use TweetStream. In this case, we're using a simple timer that just restarts the client every 60 seconds.

EventMachine is an implementation of something called the *Reactor Pattern*. If you want to fully understand and maintain this code, it would serve you well to find some resources about it and gain a full understanding. The reactor pattern is very powerful, but can be difficult to grasp at first.

However, this code should get you started. Also, I'd consider renaming the RestartingUserTracker to something more appropriate.

# c - C 填充缓冲区

> ID：13132683
> 
> 赞同：0
> 
> 时间：2012-10-30T04:35:32.783
> 
> 标签：c, posix, file-descriptor

我需要用定义的源目录中的文件的文件描述符填充缓冲区空间。所以我有启动代码：

```
int main(int argc, char* argv[])
{
    DIR *src=opendir(argv[1]);

    struct dirent *DirEntry;
    char* buffer[200];
    do {
        DirEntry = readdir(src);
        if(DirEntry != NULL) {
            //put file into buffer
        }
    }while(DirEntry!=NULL);
} 
```

如何完成此循环以将给定目录的所有文件描述符放入名为“缓冲区”的数组中？我是否应该使用 DirEntry 的对象`DirEntry->d_name`来返回一个文件描述符，然后将其放入数组中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:35:31.970

如果您需要将文件从源目录移动到目标目录，那么您需要的文件名要比文件描述符多得多。使用名称，您可以在需要时打开和关闭描述符；没有名称，您将无法明智地在目标目录中创建文件。但是，我们也可以处理文件描述符。

所以，假设你有`strdup()`，你可以使用：

```
typedef struct File
{
    char *name;
    int   fd;
} File; 
```

在你的循环中：

```
if (DirEntry != NULL)
{
    buffer[i].name = strdup(DirEntry->d_name);
    if (buffer[i].name != 0)
        buffer[i].fd = open(buffer[i].name, O_RDONLY);
    i++;
} 
```

其中`buffer`是一个数组，`File`并且`i`是一个方便的整数：

```
enum { MAX_FILES = 4096 };
int i;
File buffer[MAX_FILES]; 
```

您还应该在主要条件中添加一个条件以确保不会溢出（或将固定大小的缓冲区替换为动态分配的缓冲区）：

```
if (DirEntry != NULL && i < MAX_FILES) 
```

如果`i`达到限制，您可以明智地打破循环。您可以测试名称是否代表文件（与 FIFO、块设备、字符设备、套接字、符号链接、目录...相对）；你可能会使用`stat()`or `lstat()`。`open()`如果调用失败，文件描述符将为负数 (-1) 。如果内存分配失败，您可以通过不增加来保存条目`i`，但这可能不值得担心。如果文件名的内存分配失败，则不会有太多其他的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:00:24.147

文件描述符是 open() 系统调用返回的“int”类型值。它不在 DirEntry 结构中。所以，首先，你应该将缓冲区数组定义为 int 类型，然后你可以用 open() 系统调用打开循环中的每个文件，并将 open() 返回的文件描述符保存在缓冲区数组中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:01:06.437

你的问题完全没有意义。如果你想要文件描述符，你必须*打开*文件或目录[`open()`](http://pubs.opengroup.org/onlinepubs/000095399/functions/open.html)来获取文件描述符。

如果您只想将文件的名称存储在一个数组中，那么您可以使用`malloc`or创建一个二维数组，并将成员`calloc`复制`d_name`到数组中的下一个可用插槽。或者，您可以使用您所拥有的并使用一个函数，例如`strdup`将字符串复制到您的数组，但要小心，因为您稍后需要使用`free()`.

如果您确实需要文件描述符，则需要创建一个数组，`int`而不是`char *`.

# c# - 更新查询适用于除一列之外的所有列

> ID：13132687
> 
> 赞同：5
> 
> 时间：2012-10-30T04:35:51.620
> 
> 标签：c#, sql

我的 .xsd 文件中有一个更新查询，如下所示：

```
UPDATE Factors 
SET    CodeFactor = @CodeFactor, Date = @Date, MobileNumber = @MobileNumber, 
       Description= @Description, TotalPrice = @TotalPrice, 
       ShouldPayPrice = @ShouldPayPrice 
       WHERE ID = @Original_ID; 
SELECT   ID, CodeFactor, Date, PersonName, MobileNumber, Description, TotalPrice, 
         ShouldPayPrice, PaidPrice, Settlement, Kind 
FROM     Factors 
WHERE    ID = @Original_ID
ORDER BY Date DESC; 
```

我以如下形式使用它：

```
Fact.UpdateQuery(txtShomareFactor.Text.Trim(), fdpDate.Text.Trim(),
                 txtMobile.Text.Trim(), txtSharheKharid.Text,
                 Convert.ToInt64(txtJameKol.Text.Replace(",", "").Trim()),
                 Convert.ToInt64(txtMablagheGhabelePardakht.Text.Replace(",", "").Trim()), 
                 IDFactorTOShowDetails); 
```

它会更新除描述列之外的所有列！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T23:35:35.500

你应该尝试像 [Description]=@Description 因为描述词应该是 SQL 中的一种特殊关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T09:16:00.803

首先尝试检查您的代码并对其进行跟踪，然后查看 SQL Profiler 以获取从您的应用程序发送到 sql 的内容。另请注意，Description 是 sql server 中的关键字。在 [ ] 之间使用它或在列名之前使用表名。像`Factors.[Description]` 总体上更改您的查询如下：

```
UPDATE Factors 
SET    CodeFactor = @CodeFactor, [Date] = @Date, MobileNumber = @MobileNumber, 
       [Description]= @Description, TotalPrice = @TotalPrice, 
       ShouldPayPrice = @ShouldPayPrice 
       WHERE ID = @Original_ID; 
SELECT   ID, CodeFactor, [Date], PersonName, MobileNumber, [Description], TotalPrice, 
         ShouldPayPrice, PaidPrice, Settlement, Kind 
FROM     Factors 
WHERE    ID = @Original_ID
ORDER BY [Date] DESC; 
```

# c# - 无法在我的 WPF 应用程序中使用 Array.Copy()

> ID：13132690
> 
> 赞同：5
> 
> 时间：2012-10-30T04:36:18.963
> 
> 标签：c#, c++, .net, wpf, arrays

我是一名 C++ 开发人员，最近开始研究 WPF。好吧，我在我的应用程序中使用 Array.Copy() ，看起来我无法完全获得所需的结果。

我在我的 C++ 应用程序中完成了如下操作：

```
static const signed char version[40] = {
'A', 'U', 'D', 'I', 'E', 'N', 'C', 'E',   // name
 0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,   // reserved,  firmware size
 0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,   // board number
 0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,   // variant, version, serial
 0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0 ,  0     // date code, reserved
};

unsigned char sendBuf[256] = {};
int memloc = 0;
sendBuf[memloc++] = 0;
sendBuf[memloc++] = 0;

// fill in the audience header
memcpy(sendBuf+memloc, version, 8); // the first 8 bytes
memloc += 16; // the 8 copied, plus 8 reserved bytes 
```

我在我的 WPF (C#) 应用程序中做了类似的操作，如下所示：

```
Byte[] sendBuf = new Byte[256];

char[] version = 
        {
                'A', 'U', 'D', 'I', 'E', 'N', 'C', 'E',         // name
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // reserved,  firmware size
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // board number
                '0', '0', '0', '0', '0', '0', '0', '0' ,        // variant, version, serial
                '0', '0', '0', '0', '0', '0', '0', '0'          // date code, reserved
        };

// fill in the address to write to -- 0
        sendBuf[memloc++] = 0;
        sendBuf[memloc++] = 0;

        // fill in the audience header
        Array.Copy(sendBuf + memloc, version, 8);   // the first 8 bytes
        memloc += 16; 
```

但它给我一个错误`Array.Copy(sendBuf + memloc, version, 8);`as `Operator '+' cannot be applied to operands of type 'byte[]' and 'int'`。

怎么能做到这一点？？？？：） 请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:57:42.300

```
for(int i = 0; i < 8; i++)
{
    sendBuf[i+memloc] = Convert.ToSByte(version[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:32:25.690

为你翻译。解释是内联的。

```
var sendBuf = new byte[256];

// char in C# is a UTF-16 character (at least 2 bytes). Use byte[] here instead.
byte[] version = 
        {
                (byte)'A', (byte)'U', (byte)'D', (byte)'I', (byte)'E', (byte)'N', (byte)'C', (byte)'E',         // name
                0, 0, 0, 0, 0, 0, 0, 0,        // reserved,  firmware size
                0, 0, 0, 0, 0, 0, 0, 0,        // board number
                0, 0, 0, 0, 0, 0, 0, 0,        // variant, version, serial
                0, 0, 0, 0, 0, 0, 0, 0         // date code, reserved
        };

int memloc = 0;

sendBuf[memloc++] = 0;
sendBuf[memloc++] = 0;

// C# doesn't allow pointer arithmetic with arrays. memcpy's signature is also reversed.
Array.Copy(
   version,     // Source
   0,           // Index of Source
   sendBuf,     // Destination
   memloc,      // Index of Destination
   8);          // The first 8 bytes
memloc += 16; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:56:00.423

您可以尝试两种方法。第一种方法是使用 System.Buffer.BlockCopy() 直接复制

**例如**

```
// fill in the audience header
Buffer.BlockCopy(version, memloc, sendBuf, 0, 8);   // the first 8 bytes 
```

另一种方法是使用 System.Text.Encoding 命名空间从 char[] 获取所有字节。

```
sendBuf = System.Text.Encoding.ASCII.GetBytes(version); 
```

# mysql - 如何使用具有不同值的 COUNT(*) 函数？

> ID：13132692
> 
> 赞同：0
> 
> 时间：2012-10-30T04:36:19.837
> 
> 标签：mysql, sql, count, group-by

例如，我有一个表，其中包含 和 等`geography`列`children`。`childrens`我需要计算每个有多少`country`。

我只能做这样的事情：

```
SELECT geography, COUNT( * ) 
FROM table1
GROUP BY children
ORDER BY geography 
```

好吧，我有例如：

```
Canada John
Canada John
Canada Peter 
```

我需要结果，例如来自 Canada 有 2 `children`。
但如果我会这样做`group by children`，结果是：

```
Canada 2
Canada 1 
```

如果`group by geography`那时，

```
Canada 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T04:38:34.870

`SUM`这里不是真的需要。您唯一要做的就是将其分组`geography`。

```
SELECT geography, COUNT(DISTINCT children) totalCount
FROM table1
GROUP BY geography
ORDER BY geography 
```

*   [**请参阅 SQLFiddle 演示**](http://sqlfiddle.com/#!2/a5454/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:37:44.210

如果您只需要计算组中的唯一值，您可以使用[`COUNT(DISTINCT expr)`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_count-distinct)

```
SELECT geography, COUNT(DISTINCT children) 
FROM table1
GROUP BY geography
ORDER BY geography 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T04:40:39.663

如果地理是国家/地区字段 - 您必须将其添加到分组依据。

```
SELECT geography, COUNT(children)
FROM table1
GROUP BY geography
ORDER BY geography 
```

# ssh - 无法使用 cat 将公钥复制到远程主机

> ID：13132694
> 
> 赞同：0
> 
> 时间：2012-10-30T04:36:25.663
> 
> 标签：ssh, centos

我正在尝试设置无密码的 SSh 登录，就像[这里所说的那样](http://osxdaily.com/2012/05/25/how-to-set-up-a-password-less-ssh-login/)

我能够成功生成 SSH 密钥

> ssh-keygen

但是当我这样做时

> 猫 ~/.ssh/id_dsa.pub | ssh user@xxx.xxx.xxx.xxx '猫 >> ~/.ssh/authorized_keys'

它给了我这个错误

> 不会分配伪终端，因为 stdin 不是终端
> 
> ssh : xxx.xxx.xxx.xxxcat >> ~/.ssh/id_rsa.pub | ssh user@xxx.xxx.xxx.xxx '猫 >>> ~/.ssh/authorized_keys'

我尝试设置无[密码 SSH](http://www.thegeekstuff.com/2008/11/3-steps-to-perform-ssh-login-without-password-using-ssh-keygen-ssh-copy-id/)，但没有出现此类错误，但它无法正常工作，因为它仍在要求输入密码。根据本文作者的说法，SSH-copy-id 有 3 个问题，这很可能是它仍然要求输入密码的原因。

有任何想法吗？

注意：机器在 CentOS 上运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:46:43.063

尝试：

```
cat ~/.ssh/id_dsa.pub | ssh -t -t user@xxx.xxx.xxx.xxx 'cat >> ~/.ssh/authorized_keys' 
```

`-t -t`即使 stdin 不是终端，也可以强制进行伪 tty 分配的选项。

# magento - Magento 购物车数量不可用

> ID：13132695
> 
> 赞同：0
> 
> 时间：2012-10-30T04:36:26.870
> 
> 标签：magento

我有这样的观察者

```
<events>
 <sales_quote_add_item>
         <observers>
            <reservation_observer_order_save_before1>
                <type>singleton</type>
                <class>Mageec_Total_Model_Observer</class>
                <method>updatePrice</method>
            </reservation_observer_order_save_before1>
         </observers>
 </sales_quote_add_item>
</events> 
```

函数 updatePrice 如下：

```
public function updatePrice($observer){

    $event = $observer->getEvent();

    $quote_item = $event->getQuoteItem();

    if ($quote_item->getProductType() == "virtual"){
        $new_price = (float)$quote_item->getProduct()->getPrice();
        $quote_item->setOriginalCustomPrice($new_price);

        $qty = Mage::getSingleton('checkout/cart')->getSummaryQty(); //return 0
                    $qty = $quote_item->getQty(); //return 0 too
        Mage::log(print_r($qty,true));

        $quote_item->setTotalPrice( $new_price * $qty );
    }
} 
```

我无法获得购物车数量或至少报价项目数量。我认为这是因为这个观察者在购物车对象被填充之前执行。那么在这种情况下我在哪里可以获得数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T04:50:10.813

我自己找到了解决方案。当我们将第一个产品放入购物车时，运行 sales_quote_add_item 观察者。但这是第一个产品，购物车尚未保存。我得到购物车数量的 Fore 代码返回 0。Thefore 解决方案是在处理订单之前保存购物车。代码示例如下：

```
public function modifyPrice(Varien_Event_Observer  $observer){
        $cart = Mage::getSingleton('checkout/cart');
        $cart->save();

        $quote_item = $observer->getQuoteItem();
    if ($quote_item->getProductType() == "virtual"){
            $new_price = (float)$quote_item->getProduct()->getPrice();
        $quote_item->setOriginalCustomPrice($new_price);

        $totalItemsInCart = Mage::helper('checkout/cart')->getItemsCount(); //Total items in cart
        Mage::log( "Total Product in Cart : " );  
        Mage::log( print_r($totalItemsInCart, true) );  

        $qty = 1;

        if($totalItemsInCart)   
        {               
            Mage::log( "Total Product in Cart : ".$totalItemsInCart );          
            $cart = Mage::getModel('checkout/cart')->getQuote()->getData();
            Mage::log( "Total Quantity In Cart    : ".(int)$cart['items_qty'] ); 
            $qty = (int)$cart['items_qty'];
        }

        $quote_item->setTotalPrice( $new_price * $qty );
        $quote_item->save();
    }

    return $this;
} 
```

如您所见：

```
$cart = Mage::getSingleton('checkout/cart');
$cart->save(); 
```

这些是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:53:56.613

你可以试试这个代码，如果不起作用让我通知

```
$totalItemsInCart = Mage::helper('checkout/cart')->getItemsCount(); //Total items in cart

if($totalItemsInCart)   
{               
    echo "Total Product in Cart : ".$totalItemsInCart;          
    $cart = Mage::getModel('checkout/cart')->getQuote()->getData();
    echo "Total Quantity In Cart    : ".(int)$cart['items_qty'];    
} 
```

# sql - 使用 perl 解析 Oracle 查询

> ID：13132696
> 
> 赞同：1
> 
> 时间：2012-10-30T04:36:28.273
> 
> 标签：sql, perl, oracle, parsing, lexical-analysis

我必须对 oracle 查询执行词法分析，并将查询分成 perl 中的各个部分（基于子句）。例如，考虑：

```
Select deleteddate,deletedby from temptable where id = 10; 
```

我需要打印

```
select : deleteddate , deletedby
from : temptable
where : id = 10 
```

我使用了这个代码片段：

```
my $parser= SQL::Statement->new();
$parser->{PrinteError}=1;
my $query = SQL::Statement->new("select deleteddate,deletedby from temptable where id =10",$parser);

my @columns = $query->columns();

print $columns[0]->name(); 
```

虽然这会打印 deleteddate，但当我在 select 子句中给出子查询时会失败：

```
Select deleteddate,deletedby,(select 1+1 from dual) from temptable where id = 10; 
```

你能指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:05:09.027

它看起来是该软件包的限制；它似乎是一个通用解析器，而不是可以理解高级功能（如子查询）或 Oracle 特定结构（如“来自双重”）的东西。

你的系统有什么限制？如果 python 是一个选项，它看起来这是一个功能更全面的库：

[http://code.google.com/p/python-sqlparse/](http://code.google.com/p/python-sqlparse/)

如果可以的话，另一种选择是使用实际的 Oracle 数据库。你会：

*   使用 DBI 和 DBD::Oracle 模块创建到 Oracle 的连接并获取数据库句柄，
*   通过使用查询在数据库句柄上调用 prepare() 创建语句句柄，
*   执行查询（Oracle 中可能有一个选项可以在“仅测试”或“仅解析”模式下执行），
*   检查语句句柄（例如 NAMES_hash 属性）以获取列名。

否则，不幸的是，SQL::Statement 模块似乎无法胜任任务......

# regex - 从行中删除一个数字，同时保持其他所有内容相同

> ID：13132706
> 
> 赞同：1
> 
> 时间：2012-10-30T04:38:20.627
> 
> 标签：regex, unix, sed, gnu

我有一个包含以下行的文件

```
insert into table_name    (params1,params2,params3)  values (43044,'x',23547003);
insert into table_name    (params1,params2,params3)  values (43024,'y',26557003);
..... 
```

我想删除第一列/值对。即这是所需的输出。

```
insert into table_name    (params2,params3)  values ('x',23547003); 
insert into table_name    (params2,params3)  values ('y',26557003); 
```

我怎样才能做到这一点？

这是我到目前为止所做的

```
cat file_name | sed 's/params1,//g' 
```

这将删除 params1 但如何删除值后的数字？

Tl;博士

从 更改`insert into table_name (params2,params3) values (43024,'y',26557003);`为`insert into table_name (params2,params3) values ('y',26557003);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:45:04.020

您可以使用：

```
sed -e 's/params1,//' -e 's/values ([^,]*,/values (/' 
```

根据以下成绩单：

```
pax> cat infile
insert into table_name    (params1,params2,params3)  values (43044,'x',23547003);
insert into table_name    (params1,params2,params3)  values (43024,'y',26557003);

pax> sed -e 's/params1,//' -e 's/values ([^,]*,/values (/' infile
insert into table_name    (params2,params3)  values (x,23547003);
insert into table_name    (params2,params3)  values (y,26557003); 
```

`sed`你已经有了第一个论点。第二个简单地找到由以下组成的第一个字符串：

*   字符串`"values ("`；
*   零个或多个非逗号字符（贪婪匹配，尽可能多）；和
*   一个逗号。

然后它替换了`"values ("`有效地摆脱了值的第一个参数的那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T04:51:20.403

这是使用`sed`. 它找到一个左括号，然后`[^,]`多次匹配所有非逗号 ( ) 的内容，然后是一个逗号。并用左括号替换这个匹配：

```
sed 's/([^,]*,/(/g' file.txt 
```

结果：

```
insert into table_name    (params2,params3)  values ('x',23547003);
insert into table_name    (params2,params3)  values ('y',26557003); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T05:02:55.657

sed 解决方案仅在第一个参数称为 params1 时才有效。如果它改变了，你就会崩溃……我建议改用 awk。awk 对这些东西很感兴趣。您可以像这样拆分列：

猫文件 | awk '{print $n}' （其中 n 是字段编号，例如 1、2 3 等）

那么您可以根据需要使用 sed，但我建议您使用它来拆分逗号分隔的 val：

```
for i in `cat file`; do
  thing=echo $i
  old=$(echo $thing | awk '{print $4}') #This should get you (43044,'x',23547003)
  new=$(echo "\($(echo $old | cut -d \, -f 2)\,$(echo $old | cut -d \, -f 3)\)") 

  #then just replace old with new... 
done 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T06:30:18.093

@paxdiablo 的答案是完全正确的，但是如果任何`insert`行修改了除`table_name`. 如果发生这种情况，您可以考虑使用如下所示的小型 sed 脚本：

```
# fixup.sed
/^insert into table_name/{
    s/params1,//
    s/values ([^,]*,/values (/
} 
```

在上面，这两个`s///`命令只在以 . 开头的行上执行`insert into table_name`。像这样应用这个脚本：

```
$ sed -f fixup.sed < input > output 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-30T20:18:39.640

Sed 解决方案很好，但相当脆弱（考虑在和下一个逗号之间有换行符的情况`values`。）尝试`m4`：

```
m4 -D "table_name=\`table_name'( shift( \$* ))" \
   -D "values=\`values'( shift( \$* ))" input-file 
```

# php - 我有电子邮件和密码会话变量，但无法获取其他会话变量（PHP、MySQL）

> ID：13132711
> 
> 赞同：0
> 
> 时间：2012-10-30T04:38:38.427
> 
> 标签：php, mysql, session, login, mysqli

我已经为 mySQL 设置了一个登录页面，它可以正确登录。登录表单有电子邮件和密码，但是当他们登录时。但是，当他们第一次注册时，他们的 mySQL 记录也会填充他们的名字和姓氏（字段是名字、姓氏、电子邮件、密码）。

问题是当我成功登录时，它并没有从记录中获取其他变量。它只是抓取电子邮件和密码，因为那是他们输入的内容。如何获取与我已经拥有的数据（用户名、密码）相对应的 mySQL 中一行的其他变量（名字、姓氏）？我知道这可能有点像 mySQL 101，但我在谷歌搜索这个问题时遇到了麻烦。

我附上了一些代码。这是我验证所有内容的 checklogin.php 页面。现在我明白底部的变量不是我获取名字和姓氏的方式，因为它们不是由表单发布的（正如我所提到的，表单只有电子邮件和密码）：

```
<?php
$mysqli = mysqli_connect("mysql_name","user_name","password", "db_name");
if (!$mysqli)
  {
  die('Could not connect: ' . mysqli_error($mysqli));
  }

// username and password sent from form
//NEVER Remove the mysql_real_escape_string. Else there could be an Sql-Injection!
$email=$mysqli->real_escape_string($_POST['email']);
$password=$mysqli->real_escape_string($_POST['password']);

$sql="SELECT * FROM tbl_name WHERE email='$email' and password='$password'";
$result = $mysqli->query($sql);

if(is_object($result) && $result->num_rows == 1){
  // Register variables and redirect to file "profile.php"
  session_start();
  $_SESSION['firstname']=$_POST['firstname'];
  $_SESSION['lastname']=$_POST['lastname'];
  $_SESSION['email']=$_POST['email'];
  $_SESSION['password']=$_POST['password'];
  header('location:profile.php');
} else {
  echo "Wrong Username or Password";
}
?> 
```

我的假设是在我开始会话后重定向到的 profile.php 页面上调用了变量。问题是 $_SESSION['firstname'] 和 $_SESSION['lastname'] 不起作用，因为我想它们还没有被声明。任何帮助（甚至只是朝着正确方向轻推）将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:44:26.173

```
$_SESSION['firstname']=$_POST['firstname'];
$_SESSION['lastname']=$_POST['lastname']; 
```

这是错误的..
$_POST 没有这些变量的值。
你必须从数据库中获取它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T04:54:40.497

这部分不好：

```
if(is_object($result) && $result->num_rows == 1){

  $_SESSION['firstname']=$_POST['firstname'];
  $_SESSION['lastname']=$_POST['lastname'];
  $_SESSION['email']=$_POST['email'];
  $_SESSION['password']=$_POST['password'];
} 
```

您应该阅读结果中返回的行并将它们分配给会话变量。

`$_POST`变量是指通过 POST 请求发送到您的页面的变量。在这种情况下，只有电子邮件和密码。

你可以试试这段代码：

```
if(is_object($result) && $result->num_rows == 1){
  $row = $result->fetch_assoc()
  $_SESSION['firstname'] = $row['firstname'];
  $_SESSION['lastname'] = $row['lastname'];
  $_SESSION['email'] = $row['email'];
  $_SESSION['password'] = $row['password'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T04:56:25.303

```
Try This if you have all the information in the same table:    

<?php
    $mysqli = mysqli_connect("localhost","root","", "login");
    if (!$mysqli)
      {
      die('Could not connect: ' . mysqli_error($mysqli));
      }

    // username and password sent from form
    //NEVER Remove the mysql_real_escape_string. Else there could be an Sql-Injection!
    $email=$mysqli->real_escape_string($_POST['email']);
    $password=$mysqli->real_escape_string($_POST['password']);

    $sql="SELECT * FROM tbl_name WHERE email='$email' and password='$password'";
    $result = $mysqli->query($sql);

    if(is_object($result) && $result->num_rows == 1){
      // Register variables and redirect to file "profile.php"
      session_start();
      $num=$result->fetch_array(MYSQLI_ASSOC);
      $_SESSION['firstname']=$num['firstname'];
      $_SESSION['lastname']=$num['lastname'];
      $_SESSION['email']=$num['email'];
      $_SESSION['password']=$num['password'];
      //redirect('profile.php');
      header('location:profile.php');
    } else {
      echo "Wrong Username or Password";
    }

    ?> 
```

# python - 跟踪文件夹中的更改

> ID：13132713
> 
> 赞同：0
> 
> 时间：2012-10-30T04:38:52.610
> 
> 标签：python, gtk, gtk3, pygobject

我对编程很陌生，我尝试的第一件事就是编写自己的文件管理器（用于学习目的）。我使用 python2.7 和 GTK+ 3 库。

在编写文件管理器时，我遇到了问题：如何对当前文件夹文件的更改做出反应？例如，我在文件管理器中打开了主文件夹。然后另一个程序在那里创建新文件。文件管理器应刷新文件列表并显示实际结果。我该如何实施？

我的文件管理器的代码可在[github](https://github.com/imslavko/slavafinder)上找到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T10:31:05.383

[GIO](http://developer.gnome.org/gio/stable/GFileMonitor.html)是您应该在这里使用的。它由 GTK 所基于的 GLib 提供。不要使用轮询来执行此操作。轮询通常很慢、消耗资源（CPU、电源——因为它可以防止 CPU 进入深度睡眠模式）并且对异步 API 没有任何好处，后者只会在内容发生更改时通知您。另请参阅[PyGTK/GIO：递归监控目录更改](https://stackoverflow.com/questions/3068839/pygtk-gio-monitor-directory-for-changes-recursively)。

您以这种方式导入它： `from gi.repository import Gio`

顺便说一句，我正在删除问题的 PyGTK 标记，因为 PyGTK（应该用于 GTK 2）已经过时，取而代之的是[PyGObject](https://live.gnome.org/PyGObject)（应该用于 GTK3）。

**编辑：**

这是[python + GTK3 教程](http://python-gtk-3-tutorial.readthedocs.org/en/latest/index.html)的链接。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T06:06:06.880

每隔几秒钟检查一次目录的内容。我假设您首先使用 os.listdir 来获取内容？再做一些。

或者，如果效率是一个问题，请继续阅读：

看看[这个](http://timgolden.me.uk/python/win32_how_do_i/watch_directory_for_changes.html)作为一个例子，或者[这个](https://www.google.com/search?client=ubuntu&channel=fs&q=python%20monitor%20folder%20contents&ie=utf-8&oe=utf-8&gl=uk)更多。

看到[这个了](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)吗？

这些链接是从简单的 Google 和 Stackoverflow 搜索中收集到的。如果他们没有为您提供足够的信息，请根据您的要求更新您的问题

# linux - 有没有办法使用 libusb API 获取 USB 设备的设备节点？

> ID：13132714
> 
> 赞同：1
> 
> 时间：2012-10-30T04:39:03.310
> 
> 标签：linux, libusb

我正在尝试获取 USB 设备的设备节点（例如 /dev/sdb）。

我想知道是否有任何 libusb API 可以为我提供与 USB 设备关联的特定设备节点。

如果没有 API，是否还有其他替代方法可以实现这一点？对此的任何见解都会被证明是非常有帮助的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:01:11.460

在 Linux 上，探索连接的 USB 设备及其属性的最简单方法是简单地扫描目录`/sys/bus/usb/devices`。此虚拟目录列出了所有连接的设备。每个条目的结构都非常简单，每个连接了从属设备（如通过集线器连接的设备）都有一个虚拟子目录。还有什么好处是，通常您无需成为 root 即可读取大量设备属性，例如制造商或序列号。

这个接口的另一个非常好的特性是它是半稳定的。也就是说，每个设备都有唯一的 id，例如`a-b.c.d.e:x.y`（a - 总线号，b，c - 根集线器，下一个集线器，端口等，x，y - 功能，子功能），并且此设备枚举不会突然改变如果一台设备已连接或断开连接，则适用于所有设备。

您还可以轻松地将这些设备 ID 映射到 libusb 样式的总线/设备编号（但这些并不稳定）。

不幸的是，这是特定于 Linux 的，似乎不适用于其他操作系统。我希望 libusb 已经实现了这样的东西，但它没有。无论如何，祝你好运！

# .net - .Net 桌面应用程序和浏览器中的 Silverlight 应用程序之间的通信

> ID：13132715
> 
> 赞同：1
> 
> 时间：2012-10-30T04:39:11.263
> 
> 标签：.net, silverlight, client-side-scripting, client-side-data

我们有一个在用户桌面上运行的 .Net 应用程序和另一个在同一桌面上的浏览器中运行的 Silverlight 应用程序。我需要将一些数据从桌面 .net 应用程序传递到浏览器上的 Silverlight 客户端。根据 .Net 应用程序发送的数据，Silverlight 客户端需要调用 Web 服务并将结果显示在 Silverlight 客户端上。你能给我可能的选择来实现这一目标吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:28:58.620

我认为可以在您的桌面应用程序中托管 WCF 双工服务，您可以与 silverlight 应用程序进行通信，或者您可以使用代理将推送通知发送到 silverlight 检查 SignalR

# asp.net-mvc - 如何在条件下使用 ReadOnly 数据注释？

> ID：13132719
> 
> 赞同：-1
> 
> 时间：2012-10-30T04:40:00.473
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-viewmodel

我想在我的 ViewModel 属性上应用 ReadOnly 数据注释。但这需要根据某些条件进行检查并应用。

例如，如果我将一些字段映射保存到我的数据库表中，然后我想检查 ViewModel 属性，这是否需要只读或可编辑。

如果您能在这里分享您的想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:59:14.453

您需要覆盖 readonly 属性，然后以某种方式获取要检查的列的值。我不会在你的模型中推荐这个。

也许在这里有点凌乱，做一些类似的事情......

```
@if (Model.SomeValue == "Something")
{
@Html.TextBoxFor(x=> x.ModelProperty, new { @readonly="readonly"})
}
@else
{
@Html.TextBoxFor(x=> x.ModelProperty)
} 
```

# objective-c - 只覆盖一个方法，只调用super是不是效率低下？

> ID：13132720
> 
> 赞同：1
> 
> 时间：2012-10-30T04:40:04.187
> 
> 标签：objective-c, performance, super

在我的应用程序中留下如下代码会影响性能吗？

```
- (void)viewDidUnload 
{
  [super viewDidUnload];
  // Release any retained subviews of the main view.
  // e.g. self.myOutlet = nil;
} 
```

我认为答案是肯定的，因为它会导致不必要的方法调用。但我想确定一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:44:18.017

如果您要询问额外的方法调用，那么答案是肯定的，在导致调用 "real" 的方法调用链中会有一个完全不必要的调用`viewDidUnload`。

我不会将删除此类方法称为消除“性能损失”：您或您的最终用户不太可能注意到这种微优化的影响。

# .htaccess - joomla 博客文章 url 中断站点中的百分比 (%)

> ID：13132722
> 
> 赞同：2
> 
> 时间：2012-10-30T04:40:11.440
> 
> 标签：.htaccess, redirect, joomla

任何人都知道如何重定向

> 域/博客/208-%-top.html

至：

> 域/博客/208-top.html

在 Joomla？

以下均无效：

```
RewriteRule ^blog/208-%-top.html$ 208-top.html [R=301,L]
RewriteRule ^blog/208-\%-top.html$ 208-top.html [R=301,L]
RewriteRule ^blog/208-.*-top.html$ 208-top.html [R=301,L] 
```

它适用于： url 有 %20 或 %25 并且在 htaccess 中有以下

```
RewriteRule ^blog/208-%20-top.html$ 208-top.html [R=301,L]
RewriteRule ^blog/208-%25-top.html$ 208-top.html [R=301,L] 
```

但问题是博客文章只有 %。有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:01:27.510

这个网址：

```
domain.com/blog/208-%-top.html 
```

确实是一个**无效的 URL**，会导致 Apache 日志中出现 HTTP 400（错误请求）错误。

正如您也注意到，这两个 URL 中的任何一个都是有效的：

```
domain.com/blog/208-%20-top.html 
```

或者

```
domain.com/blog/208-%25-top.html 
```

他们都可以很好地使用这个重写规则：

```
RewriteRule ^blog/208-\%-top\.html$ blog/208-top.html [R=301,L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:21:37.923

您的问题可能是因为 apache 没有正确地将您的重写目标识别为 URL 路径，您需要包含完整路径来修复它。

```
RewriteRule ^blog/208-\%-top.html$ /blog/208-top.html [R=301,L] 
```

# jquery - 如何在周历中使用日期事件

> ID：13132723
> 
> 赞同：0
> 
> 时间：2012-10-30T04:40:11.127
> 
> 标签：jquery

我正在查看[周历插件的文档](https://github.com/robmonie/jquery-week-calendar/wiki)

不幸的是，我不清楚一些配置，我似乎无法弄清楚如何使用 Date 函数。所以基本上，我需要知道，如何使用 Date 函数？

我试过这样的事情：

```
date: {default: "now"}
date: now
default: now 
```

但这些都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T08:35:26.163

试试这样：

```
 $('#calendar').weekCalendar({
        events:[{"id":10182,
          "start":"2009-05-03T12:15:00.000+10:00",
          "end":"2009-05-03T13:15:00.000+10:00",
          "title":"Lunch with Mike"
        }, {
          "id":10182,
          "start":"2009-05-03T14:00:00.000+10:00",
          "end":"2009-05-03T15:00:00.000+10:00",
          "title":"Dev Meeting"
        }],
options : {
    timeslotsPerHour : 3,
"date":"2012-10-30"
  },

  }); 
```

也尝试更改日期的格式，如文档，日历事件数据结构

```
data = {
  options : {
    timeslotsPerHour : 3
  },
  events : [ ... ]
} 
```

# android - 检查正在拨打的电话是否是国际电话

> ID：13132724
> 
> 赞同：0
> 
> 时间：2012-10-30T04:40:12.360
> 
> 标签：android, telephonymanager, phone-call

我想检查正在拨打的电话是否是国际电话。我有使用 TelephonyManager.getLine1Number() 获得的 SIM 号码以及使用 TelephonyManager.getSimCountryIso() 获得的 SIM 卡的国家代码 ISO。

无论如何我可以找到正在拨打电话的号码的国家代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:45:02.580

我认为`telephonyManager.getSimCountryIso()`这不会帮助您确定“正在拨打哪个国家/地区”，因为它将返回**您所在**国家/地区的 ISO。

此外，ISD 代码的长度因国家/地区而异。对于某些国家/地区，它是 1，对于某些国家，它是 2，对于某些国家，它是 3，而对于其他国家，它是 4。因此，您需要从传出号码中提取/制作 4 个不同长度的密钥，如下所示：

假设去电号码是+91-XXX-XXX-XXXX。然后您将创建 4 个密钥：

1.  **9** （1 位数字键）
2.  **91** （2 位数字键）
3.  **91X** （3 位密钥）
4.  **91XX**（4 位密钥）

现在检查此列表中是否存在这 4 个键中的任何一个：[ISO List](http://en.wikipedia.org/wiki/List_of_country_calling_codes#Complete_listing)。

**[编辑：替代解决方案]**

同样，如果您只需要确定所拨打的电话是否是国际电话，那么您只需检查以下情况：

```
if(outgoing-number `startswith` "00" || outgoing-number does not `startswith` your "country's-ISD-code") {
    //it's an international call;
} else {
    //it's a domestic call;
} 
```

# java - 单个文件中的多个类

> ID：13132729
> 
> 赞同：9
> 
> 时间：2012-10-30T04:41:17.830
> 
> 标签：java, oop

我无法将多个类放入一个文件中。例如，当我的文件看起来像：

```
public class FirstClass() {}
public class SecondClass() {}
public class ThirdClass() {} 
```

我在编译过程中遇到错误。我不太确定是什么原因造成的。有任何想法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-30T04:47:02.150

**一个 Java 文件可以包含多个类，但只有一个类可以是公共的。**一旦`public`从类中删除关键字，就可以将它们组合成一个 Java 文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T04:46:29.280

冒着喂勺的风险

请阅读[http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html](http://docs.oracle.com/javase/tutorial/java/javaOO/innerclasses.html)

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.text.DecimalFormat;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class TheaterWindow extends JFrame
{
    private JPanel pnlAdultTicketPrice, pnlAdultTicketsSold, pnlChildTicketPrice, pnlChildTicketsSold,
        pnlCalculate, pnlMain;
    private JLabel lblAdultTicketPrice, lblAdultTicketsSold, lblChildTicketPrice, lblChildTicketsSold;
    private JTextField txtAdultTicketPrice, txtAdultTicketsSold, txtChildTicketPrice, txtChildTicketsSold;
    private JButton btnCalculate;

    public TheaterWindow()
    {
        // Sets window title
        setTitle("Theater");

        // Sets layout to BorderLayout
        setLayout(new GridLayout(5,1));

        // Specifies what happens when close button is clicked
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Builds the panels
        buildPanels();

        // Add the panels to the frame's content pane
        add(pnlAdultTicketPrice);
        add(pnlChildTicketPrice);
        add(pnlAdultTicketsSold);
        add(pnlChildTicketsSold);
        add(pnlCalculate);

        // Size the frame to fit all of the panels
        pack();

        // Display the window
        setVisible(true);
    }

    private void buildPanels()
    {
        // Creates labels to display instructions
        lblAdultTicketPrice = new JLabel("Adult ticket price");
        lblChildTicketPrice = new JLabel("Child ticket price");
        lblAdultTicketsSold = new JLabel("Adult tickets sold");
        lblChildTicketsSold = new JLabel("Child tickets sold");

        // Creates text fields that are 10 characters wide
        txtAdultTicketPrice = new JTextField(10);
        txtChildTicketPrice = new JTextField(10);
        txtAdultTicketsSold = new JTextField(10);
        txtChildTicketsSold = new JTextField(10);

        // Creates button with caption
        btnCalculate = new JButton("Calculate");

        // Adds action listener to button
        btnCalculate.addActionListener(new CalcButtonListener());

        // Creates panels
        pnlAdultTicketPrice = new JPanel();
        pnlChildTicketPrice = new JPanel();
        pnlAdultTicketsSold = new JPanel();
        pnlChildTicketsSold = new JPanel();
        pnlCalculate = new JPanel();
        pnlMain = new JPanel();

        // Adds elements to their proper panels
        pnlAdultTicketPrice.add(lblAdultTicketPrice);
        pnlAdultTicketPrice.add(txtAdultTicketPrice);
        pnlChildTicketPrice.add(lblChildTicketPrice);
        pnlChildTicketPrice.add(txtChildTicketPrice);
        pnlAdultTicketsSold.add(lblAdultTicketsSold);
        pnlAdultTicketsSold.add(txtAdultTicketsSold);
        pnlChildTicketsSold.add(lblChildTicketsSold);
        pnlChildTicketsSold.add(txtChildTicketsSold);
        pnlCalculate.add(btnCalculate);

        // Adds all of the above panels to a main panel
        pnlMain.add(pnlAdultTicketPrice);
        pnlMain.add(pnlChildTicketPrice);
        pnlMain.add(pnlAdultTicketsSold);
        pnlMain.add(pnlChildTicketsSold);
        pnlMain.add(pnlCalculate);
    }

    private class CalcButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            // Creates object of Theater
            Theater theater = new Theater();

            // Sets the member variables of Theater to the user's input
            theater.setAdultTicketPrice(Double.parseDouble(txtAdultTicketPrice.getText()));
            theater.setChildTicketPrice(Double.parseDouble(txtChildTicketPrice.getText()));
            theater.setAdultTicketsSold(Integer.parseInt(txtAdultTicketsSold.getText()));
            theater.setChildTicketsSold(Integer.parseInt(txtChildTicketsSold.getText()));

            // Creates DecimalFormat object for rounding
            DecimalFormat dollar = new DecimalFormat("#.##");

            // Display the charges.
            JOptionPane.showMessageDialog(null, "Adult ticket gross: $" +
                    Double.valueOf(dollar.format(theater.getAdultGross())) + "\n" +
                    "Child ticket gross: $" + Double.valueOf(dollar.format(theater.getChildGross())) + "\n" +
                    "Adult ticket net: $" + Double.valueOf(dollar.format(theater.getAdultNet())) + "\n" +
                    "Child ticket net: $" + Double.valueOf(dollar.format(theater.getChildNet())) + "\n" +
                    "Total gross: $" + Double.valueOf(dollar.format(theater.getChildGross())) + "\n" +
                    "Total net: $" + Double.valueOf(dollar.format(theater.getTotalNet())));
        }
    }

    public class Theater
    {
        private double PERCENTAGE_KEPT = 0.20;

        private double adultTicketPrice, childTicketPrice;
        private int adultTicketsSold, childTicketsSold;

        public double getAdultGross()
        {
            return getAdultTicketPrice() * getAdultTicketsSold();
        }

        public double getAdultNet()
        {
            return PERCENTAGE_KEPT * getAdultGross();
        }

        public double getAdultTicketPrice()
        {
            return adultTicketPrice;
        }

        public int getAdultTicketsSold()
        {
            return adultTicketsSold;
        }

        public double getChildGross()
        {
            return getChildTicketPrice() * getChildTicketsSold();
        }

        public double getChildNet()
        {
            return PERCENTAGE_KEPT * getChildGross();
        }

        public double getChildTicketPrice()
        {
            return childTicketPrice;
        }

        public int getChildTicketsSold()
        {
            return childTicketsSold;
        }

        public double getTotalGross()
        {
            return getChildGross() + getAdultGross();
        }

        public double getTotalNet()
        {
            return getChildGross() + getChildNet();
        }

        public void setAdultTicketPrice(double adultTicketPrice)
        {
            this.adultTicketPrice = adultTicketPrice;
        }

        public void setAdultTicketsSold(int adultTicketsSold)
        {
            this.adultTicketsSold = adultTicketsSold;
        }

        public void setChildTicketPrice(double childTicketPrice)
        {
            this.childTicketPrice = childTicketPrice;
        }

        public void setChildTicketsSold(int childTicketsSold)
        {
            this.childTicketsSold = childTicketsSold;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T12:56:39.720

是的，您可以将所有类写在一个 .java 文件中，但您必须只有一个公共类（如果文件名和类名相同）

例子：

甲类 { }

乙类 { }

C类{}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T04:48:54.107

我假设你是非常初学者！只需将所有这些内容复制粘贴到一个文件中即可`TheaterDemo.java`。并且不要忘记删除`public`类声明开头的所有关键字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-28T15:20:50.023

一个 Java 文件最多可以包含一个*顶级*公共类。该公共顶级类可以包含任意数量的公共嵌套类。

您可以通过以下任何一种方法消除编译器错误：

*   将其他类移动到它们自己的文件中。例如：*FirstClass.java、SecondClass.java*和*ThirdClass.java*。
*   嵌套名称不是文件基名的类。例如：

    ```
    public class FirstClass() {
        public class SecondClass() {}   
        public class ThirdClass() {}
    } 
    ```

*   除了名称为文件基名的一个类之外，从所有类中删除`public`限定符。在 Java v1.1 中引入嵌套类之后，这种方法变得不那么普遍了。例如，在文件 FirstClass.java 中，您可以：

    ```
    public class FirstClass() {}
    class SecondClass() {}   
    class ThirdClass() {} 
    ```

来自 Java 语言规范，[第 7.6 节：顶级类型声明](https://docs.oracle.com/javase/specs/jls/se8/html/jls-7.html#jls-7.6)：

> 当且仅当包存储在文件系统中（第 7.2 节）时，如果在由类型名称组成的名称下的文件中未找到类型，则主机系统可能会选择强制执行它是编译时错误的限制如果满足以下任一条件，则加上扩展名（例如 .java 或 .jav）：
> 
> *   该类型由声明该类型的包的其他编译单元中的代码引用。
>     
>     
> *   该类型被声明为公共的（因此可以从其他包中的代码中访问）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-30T04:45:03.730

只需从所有其他类定义中删除 public 并将代码粘贴到`TheaterDemo.java`文件中

```
public class TheaterDemo
{
    public static void main(String[] args)
    {
        TheaterWindow theaterWindow = new TheaterWindow();
    }
}
//Here class code after removing public

// Here another class code 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-30T04:46:58.760

我看到你已经完成了这种实现。请参考

```
 private class CalcButtonListener implements ActionListener 
```

在你的`TheaterWindow`课上。

通过这样做，您正在创建内部类，即`CalcButtonListener`是类的内部`TheaterWindow`类。您可以将一些概念扩展到其他类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-05T08:20:27.920

java文件中类文件的个数没有限制。

但是每个源代码文件不能有多个公共类。此外，文件的名称必须与公共类的名称匹配。类似地，声明为 public class Dog { } 的类必须位于名为 Dog.java 的源代码文件中。

没有公共类的文件的名称可能与文件中的任何类都不匹配。

# iphone - 在检查是否已添加子视图后，如何使用相同的按钮操作关闭子视图？

> ID：13132735
> 
> 赞同：0
> 
> 时间：2012-10-30T04:41:39.590
> 
> 标签：iphone, ios, ipad

在单击按钮时，我使用以下代码将日期选择器视图添加到我的应用程序主视图中。

```
- (IBAction)CalenderButton_Click:(id)sender
{
// code to add date picker -mydatepicker

//animating

    [self.view addSubview:myPicker];

    CGRect onScreenFrame=myPicker.frame;
     CGRect offScreenFrame=onScreenFrame;
     offScreenFrame.origin.y=self.view.bounds.size.height;
     myPicker.frame=offScreenFrame;
     [UIView beginAnimations:nil context:nil];
     [UIView setAnimationDuration:0.5f];
     myPicker.frame=onScreenFrame;
     [UIView commitAnimations];

} 
```

我需要实现的两件事是，

1.此代码从底部为视图设置动画，我如何从顶部对其进行动画处理？

2.如果我再次点击按钮添加日期选择器，我应该检查视图是否已经添加，如果是，删除子视图。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:50:59.107

对于问题 2：使用布尔值检查日期选择器是否已在视图中。 `isSubView`是一个`BOOL`检查，你`myPicker`在子视图中。

**更新：**

```
- (IBAction)CalenderButton_Click:(id)sender
{

//animating

   if(!isSubview){
      isSubview = YES;
      [self.view addSubview:myPicker];
 /*    
      CGRect onScreenFrame=myPicker.frame;
      CGRect offScreenFrame=onScreenFrame;
      offScreenFrame.origin.y=self.view.bounds.size.height;
      myPicker.frame=offScreenFrame;
      [UIView beginAnimations:nil context:nil];
      [UIView setAnimationDuration:0.5f];
      myPicker.frame=onScreenFrame;
      [UIView commitAnimations];
 */    

// to slide your view from the top
     [myPicker setFrame:CGRectMake(0, -200, 320, 200)];
     [myPicker setBounds:CGRectMake(0, 0, 320, 200)];

     [UIView beginAnimations:nil context:NULL];
     [UIView setAnimationDuration:0.5f];
     [myPicker setFrame:CGRectMake(0, 0, 320, 200)];
     [UIView commitAnimations];

    }else{
      isSubview = NO;
      [myPicker removeFromSuperView];
    }
} 
```

# android - 如何在 Android 中更新 GridView 项目

> ID：13132738
> 
> 赞同：1
> 
> 时间：2012-10-30T04:41:44.950
> 
> 标签：android, gridview, adapter

我正在使用图像视图和进度条作为隐藏进度条的网格视图的每个子项（每个 GridView 项包含一个图像视图和一个进度条）。当点击网格项目时，每个进度条都是可见的。

首先，加载图像显示在图像视图中，并通过使用下载的图像进行更新。

我的问题是，当用户点击图像正在加载图像的网格项目时（正在下载）

进度条变得可见。但是在调用**notifyDataSetChanged()** 更新图像时，进度条变得不可见。

**即使图像已更新，我如何保持进度条的状态？**

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:50:53.310

`notifyDataSetChanged()`导致`GridView`重新加载。因此，您必须处理进度条是否在适配器的`getView()`方法中可见。

# objective-c - 如何修改此谓词以便有效处理多个关键字

> ID：13132740
> 
> 赞同：1
> 
> 时间：2012-10-30T04:41:56.093
> 
> 标签：objective-c, xcode4.5

我有这个谓词：

```
NSPredicate * thePredicateKeyword = [NSPredicate predicateWithFormat:@"any keywords.thekeyword beginswith [cd] %@", searchTerm]; 
```

基本上每个企业都与关键字有多对多的关系。

但假设我没有一个 searchTerm。假设我有一个数组。

我该怎么做？

我想我可以为每个做谓词并将它们与或谓词等结合起来。

但是，有没有办法使用`in`关键字或类似的东西更有效地做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:32:54.317

一个返回如下内容的函数呢：

```
-(NSPredicate *)createCompoundPredicateForSearchTerms:(NSArray *)searchTerms
{
  NSMutableArray *subPredicates = [[NSMutableArray alloc] init];

  NSEnumerator *searchTermEnum = [searchTerms objectEnumerator];
  NSString *searchTerm;
  while (searchTerm = [searchTermEnum nextObject]) {
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"keywords.thekeyword beginswith [cd] %@", searchTerm];
    [subPredicates addObject:predicate];
  }

  return [NSCompoundPredicate andPredicateWithSubpredicates:subPredicates];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T03:55:59.727

这是我实际使用的。然而，我选择的答案是激发它的灵感。

```
NSArray * keywords = [searchTerm componentsSeparatedByString:@" "];

NSMutableArray * keywordPredicates = [NSMutableArray array];

for (NSString * aKeyword in keywords) {
    NSPredicate * thePredicateKeyword = [NSPredicate predicateWithFormat:@"any keywords.thekeyword beginswith [cd] %@", aKeyword];
    [keywordPredicates addObject:thePredicateKeyword];
}

NSPredicate * thePredicateKeyword = [NSCompoundPredicate orPredicateWithSubpredicates:keywordPredicates];

return thePredicateKeyword; 
```

# ruby - 如何在 Linux 中将命令作为 Ruby 脚本运行？

> ID：13132741
> 
> 赞同：1
> 
> 时间：2012-10-30T04:41:59.953
> 
> 标签：ruby, linux

假设我有一些终端命令，例如：

```
sudo mycommand1
mycommand2
#..... 
```

我应该如何在 Ubuntu 中通过 ruby​​ 脚本（而不是 bash）运行它们？

更新：我有一个红宝石脚本：

```
def my_method1()
  #calculating something.....
end

def method2(var1, var2)
  #how do I sudo mycommand1 and any other Lunix command from here?
end

def method3(var4)
  #calculating something2....
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:48:15.580

您可以执行`system`,`exec`或将命令放在反引号中。

`exec("mycommand")`将替换当前进程，因此这仅在您的 ruby​​ 脚本结束时才实用。

`system("mycommand")`如果命令成功，将创建一个新进程并返回 true，否则返回 nil。

如果您需要在 Ruby 脚本中使用命令的输出，请使用反引号：

```
response = 'mycommand` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:32:27.487

SO上有很多问题可以回答这个问题。`system`但是，您可以使用、`exec`、（反引号）`%x{}`或使用以多种方式运行命令`open3`。我更喜欢使用 open3 -

```
require 'open3'

log = File.new("#{your_log_dir}/script.log", "w+")
command = "ls -altr ${HOME}"

Open3.popen3(command) do |stdin, stdout, stderr|
    log.puts "[OUTPUT]:\n#{stdout.read}\n"
    unless (err = stderr.read).empty? then 
        log.puts "[ERROR]:\n#{err}\n"
    end
end 
```

如果您想了解更多关于其他选项的信息，可以参考[Ruby、exec、system 和 %x() 之间的差异或反引号](https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks)以获取相关文档的链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T05:37:24.693

您可以尝试以下方法：

1.  `%x[command]`
2.  `Kernel.system"command"`
3.  `run "command"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T04:44:41.007

做一些`file.rb`：

```
#!/path/to/ruby

system %{sudo mycommand1}
system %{mycommand2} 
```

以及`chmod`具有 exec 权限的文件（例如 755）

你需要在两个命令之间传递变量，一起运行它们：

```
system %{sudo mycommand1; \
         mycommand2} 
```

# objective-c - 我可以将两个 UIColor 混合在一起吗？

> ID：13132743
> 
> 赞同：8
> 
> 时间：2012-10-30T04:42:21.613
> 
> 标签：objective-c, uicolor

我有 colorA`[UIColor blueColor]`和 colorB `[UIColor redColor]`。我可以渲染一个`[UIColor purple]`吗？如何实施？谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-09-19T19:38:04.673

不优雅，但它有效：

```
UIColor* blend( UIColor* c1, UIColor* c2, float alpha )
{
    alpha = MIN( 1.f, MAX( 0.f, alpha ) );
    float beta = 1.f - alpha;
    CGFloat r1, g1, b1, a1, r2, g2, b2, a2;
    [c1 getRed:&r1 green:&g1 blue:&b1 alpha:&a1];
    [c2 getRed:&r2 green:&g2 blue:&b2 alpha:&a2];
    CGFloat r = r1 * beta + r2 * alpha;
    CGFloat g = g1 * beta + g2 * alpha;
    CGFloat b = b1 * beta + b2 * alpha;
    return [UIColor colorWithRed:r green:g blue:b alpha:1.f];
} 
```

更优雅：

**UIColor+Extensions.h：**

```
@interface UIColor (Extensions)

- (UIColor*)blendWithColor:(UIColor*)color2 alpha:(CGFloat)alpha2;

@end 
```

**UIColor+Extensions.m：**

```
@implementation UIColor (Extensions)

- (UIColor*)blendWithColor:(UIColor*)color2 alpha:(CGFloat)alpha2
{
    alpha2 = MIN( 1.0, MAX( 0.0, alpha2 ) );
    CGFloat beta = 1.0 - alpha2;
    CGFloat r1, g1, b1, a1, r2, g2, b2, a2;
    [self getRed:&r1 green:&g1 blue:&b1 alpha:&a1];
    [color2 getRed:&r2 green:&g2 blue:&b2 alpha:&a2];
    CGFloat red     = r1 * beta + r2 * alpha2;
    CGFloat green   = g1 * beta + g2 * alpha2;
    CGFloat blue    = b1 * beta + b2 * alpha2;
    CGFloat alpha   = a1 * beta + a2 * alpha2;
    return [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
}

@end 
```

斯威夫特 3/4：

```
extension UIColor
{
func mixin(infusion:UIColor, alpha:CGFloat) -> UIColor {
    let alpha2 = min(1.0, max(0, alpha))
    let beta = 1.0 - alpha2

    var r1:CGFloat = 0, r2:CGFloat = 0
    var g1:CGFloat = 0, g2:CGFloat = 0
    var b1:CGFloat = 0, b2:CGFloat = 0
    var a1:CGFloat = 0, a2:CGFloat = 0
    if getRed(&r1, green: &g1, blue: &b1, alpha: &a1) &&
        infusion.getRed(&r2, green: &g2, blue: &b2, alpha: &a2)
    {
        let red     = r1 * beta + r2 * alpha2;
        let green   = g1 * beta + g2 * alpha2;
        let blue    = b1 * beta + b2 * alpha2;
        let alpha   = a1 * beta + a2 * alpha2;
        return UIColor(red: red, green: green, blue: blue, alpha: alpha)
    }
    // epique de las failuree
    return self
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T04:48:54.847

使用 . 询问每种输入颜色的 RGBA 分量`-[UIColor getRed:green:blue:alpha:]`。平均每个组件，并使用创建新颜色`+[UIColor colorWithRed:green:blue:alpha:]`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-08-07T07:38:50.310

**Swift5** **UIColor**扩展

```
extension UIColor {
    func add(_ overlay: UIColor) -> UIColor {
        var bgR: CGFloat = 0
        var bgG: CGFloat = 0
        var bgB: CGFloat = 0
        var bgA: CGFloat = 0

        var fgR: CGFloat = 0
        var fgG: CGFloat = 0
        var fgB: CGFloat = 0
        var fgA: CGFloat = 0

        self.getRed(&bgR, green: &bgG, blue: &bgB, alpha: &bgA)
        overlay.getRed(&fgR, green: &fgG, blue: &fgB, alpha: &fgA)

        let r = fgA * fgR + (1 - fgA) * bgR
        let g = fgA * fgG + (1 - fgA) * bgG
        let b = fgA * fgB + (1 - fgA) * bgB

        return UIColor(red: r, green: g, blue: b, alpha: 1.0)
    }

    static func +(lhs: UIColor, rhs: UIColor) -> UIColor {
        return lhs.add(rhs)
    }
} 
```

**用法**

```
let opacity: CGFloat = 0.6
let start = UIColor.red
let end = UIColor.blue
let combined = start.withAlphaComponent(opacity) + end.withAlphaComponent(1-opacity) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-07T08:05:20.477

由于现在是 2020 年，并且我们有“深色模式”可用，许多“颜色”不再只是颜色，而是自动适应颜色变化。它们是通过调用 UIColor(dynamicProvider: ...) 创建的。

您应该检查两种颜色是否都是动态颜色，如果是，则返回动态颜色。混合一种动态颜色和一种非动态颜色并没有真正意义，因此在这种情况下返回非动态颜色。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-30T04:50:07.843

正如您在问题中提到的那样，您不能直接混合两种 UIColors。无论如何，有一个使用其他方案混合两种颜色的示例。相同的链接如下：

[链接在这里](https://github.com/ddelruss/UIColor-Mixing)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-30T04:52:41.917

如果你想使用紫色，那没什么大不了的。所有的 UIColor 都是 rgb 颜色。你可以简单地传递每种颜色的 RGB 值，并可以获得所需的颜色。使用此链接转换任何颜色的十六进制值以进行转换在 UIColor 中。 [http://www.touch-code-magazine.com/web-color-to-uicolor-convertor/](http://www.touch-code-magazine.com/web-color-to-uicolor-convertor/)

比如绿色的#color 代码是#008400: [UIColor colorWithRed:0 green:0.518 blue:0 alpha:1] / *#008400* /

# ios - 传入其他视图控制器后计算uilabel失败的高度

> ID：13132755
> 
> 赞同：0
> 
> 时间：2012-10-30T04:43:34.540
> 
> 标签：ios, uilabel, parameter-passing

所以我在将它传递给另一个窗口/视图控制器后计算 UIlabel 文本高度时遇到问题

这是我要传递的代码

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NetraDealsObject *dataObject=[self.deals_data_json objectAtIndex:indexPath.row];

    detailViewController = [[MJDetailViewController alloc] initWithNibName:@"MJDetailViewController" bundle:nil];
    [self presentPopupViewController:detailViewController animationType:MJPopupViewAnimationSlideBottomBottom];
    detailViewController.NetraPopupPrice.text=dataObject.formatted;

} 
```

例如文本==123；

这里是detailviewController

```
-(id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self=[super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if(self){

        NetraPopupPrice=[[UILabel alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
        NetraPopupPrice.backgroundColor=[UIColor colorWithRed:0.31 green:0.733 blue:0 alpha:1]; /*#4fbb00*/
        NetraPopupPrice.textColor=[UIColor whiteColor];
        NetraPopupPrice.textAlignment=NSTextAlignmentCenter;
        NetraPopupPrice.font=[UIFont fontWithName:@"HelveticaNeue-Bold" size:18];
        [NetraPopupPrice.layer setCornerRadius:3];

        NetraPopupProvider=[[UILabel alloc] initWithFrame:CGRectMake(135.0f, 55, 80, 16)];
        NetraPopupProvider.backgroundColor=[UIColor clearColor];
        NetraPopupProvider.textColor=[UIColor colorWithRed:0.769 green:0.776 blue:0.788 alpha:1];
        NetraPopupProvider.font=[UIFont fontWithName:@"Helvetica" size:13];

        //separator
        NetraPopupSeparator=[[UILabel alloc] initWithFrame:CGRectMake(215,55.0f, 80, 16)];
        NetraPopupSeparator.text=@"-",
        NetraPopupSeparator.backgroundColor=[UIColor clearColor];
        NetraPopupSeparator.textColor=[UIColor colorWithRed:0.769 green:0.776 blue:0.788 alpha:1];
        NetraPopupSeparator.font=[UIFont fontWithName:@"Helvetica" size:13];

        //
        //separator
        NetraPopupLocation=[[UILabel alloc] initWithFrame:CGRectMake(225,  55.0f, 70, 16)];
        NetraPopupLocation.backgroundColor=[UIColor clearColor];
        NetraPopupLocation.textColor=[UIColor colorWithRed:0.769 green:0.776 blue:0.788 alpha:1];
        NetraPopupLocation.font=[UIFont fontWithName:@"Helvetica" size:13];

        NetraPopupHeadline=[[UILabel alloc] init];
        NetraPopupHeadline.textColor=[UIColor colorWithRed:0.227 green:0.243 blue:0.247 alpha:1];
        NetraPopupHeadline.lineBreakMode=NSLineBreakByCharWrapping;
        NetraPopupHeadline.backgroundColor=[UIColor redColor];
        NetraPopupHeadline.numberOfLines=0;
        NetraPopupHeadline.font=[UIFont fontWithName:@"HelveticaNeue-Bold" size:13];

    }
    [[self view] addSubview:NetraPopupPrice];

    [[self view] addSubview:NetraPopupProvider];
    [[self view] addSubview:NetraPopupSeparator];
    [[self view] addSubview:NetraPopupLocation];
    [[self view] addSubview:NetraPopupHeadline];
    return self;
}

-(void)viewDidLoad{
[super viewDidLoad];
    CGSize NetraLabelForPriceWidth = [[NetraPopupPrice text] sizeWithFont:[NetraPopupPrice font]];
    CGFloat NetraLabelForPriceW = NetraLabelForPriceWidth.width;

    NSLog(@"Width=%f",NetraLabelForPriceW);
}
-(void)viewWillAppear:(BOOL)animated{

}
- (void)viewDidUnload {

    [super viewDidUnload];
}

@end 
```

以及记录时的结果

```
NSLog(@"Width=%f",NetraLabelForPriceW); 
```

是：

```
[9858:19d03] Width=0.000000 
```

它应该是正确的计算？我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:35:52.143

尝试在 viewDidLoad 中记录您的地址**`NetraPopupPrice`及其文本。**`if(self)`还可以尝试在 initWithNibName 块内“添加到子视图” 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:15:02.770

在设置文本之前，您当前首先显示视图。因此，当`viewDidLoad`被调用时，`[NetraPopupPrice text]`是静止`nil`的，导致你`NetraLabelForPriceW`成为`0`。

相反，您应该放置

```
detailViewController.NetraPopupPrice.text=dataObject.formatted; 
```

前

```
[self presentPopupViewController:detailViewController animationType:MJPopupViewAnimationSlideBottomBottom]; 
```

这样当您的详细视图控制器`viewDidLoad`被调用时，`[NetraPopupPrice text]`就已经包含正确的字符串了。

# php - 带有姓名和电子邮件的正则表达式

> ID：13132758
> 
> 赞同：0
> 
> 时间：2012-10-30T04:43:59.913
> 
> 标签：php, regex, if-statement

我现在遇到了正则表达式的问题。我要做的是，对于迭代的每一行，它都会检查这种类型的模式：姓氏，名字如果找到名字，那么它将采用名字的第一个字母和前六个字母的姓氏并将其形成为电子邮件。

我有以下内容：

```
$checklast = "[A-z],";
$checkfirst = "[A-z]";
if (ereg($checklast, $parts[1])||ereg($checkfirst, $parts[2])){ 
    $first = preg_replace($checkfirst, $checkfirst{1,1}, $parts[2]);
    print "<a href='mailto:$first.$last@email.com;'> $parts[$i] </a>"; 
} 
```

这显然破坏了代码。但我最初试图只找到名字的第一个字母，然后是姓氏的前六个字母，然后是@email.com，但效果不太好。我不确定此时该怎么做。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T04:57:47.070

像这样的东西怎么样：

```
$name = 'Smith, John';
$email = preg_replace('/([a-z]{1,6})[a-z]*?,[\\s]([a-z])[a-z]*/i', 
                      '\\2.\\1@email.com', $name);

echo $email; // J.Smith@email.com 
```

干杯

# callback - 如何在 Rails 中对回调进行分组

> ID：13132760
> 
> 赞同：0
> 
> 时间：2012-10-30T04:44:08.010
> 
> 标签：callback, ruby-on-rails-3.2

我有很多回调，我想简化或清理代码。

例子：

```
 after_create :email_admin
  after_create  :update_author_resource_count
  after_create :get_resource_score 
```

我怎么能这样写：

after_create :email_admin, :update_author_resource_count, :get_resource_score

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:34:45.593

你可以这样写

```
after_create :email_admin, :update_author_resource_count, :get_resource_score 
```

# python - 在 sympy/numpy 中为给定的递归方程获取一个表达式

> ID：13132765
> 
> 赞同：3
> 
> 时间：2012-10-30T04:44:45.020
> 
> 标签：python, numpy, scipy, sympy

以下示例仅用于精确定义查询。考虑一个递归方程 x[k+1] = a*x[k] 其中 a 是某个常数。现在，在 sympy/numpy 中是否有一种更简单的方法或现有方法可以执行以下操作（即，为给定的递归方程提供一个范围内的表达式）：

```
def get_expr(init, num):
  a = Symbol('a')
  expr = init
  for i in range(num):
    expr = a*expr
  return expr

x0 = Symbol('x0')
get_expr(x0,3) 
```

上面的地平线是 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:46:12.913

我打算建议使用 SymPy`rsolve`来尝试为您的方程式找到一个封闭形式的解决方案，但似乎至少对于这个特定的解决方案，有一个错误会阻止它工作。请参阅[http://code.google.com/p/sympy/issues/detail?id=2943](http://code.google.com/p/sympy/issues/detail?id=2943)。也许如果您真的想知道更复杂的表达式，您可以尝试一下。对于这个，封闭形式的解决方案就是`a**n*x0`.

除此之外，SymPy 没有任何可以直接进行评估的函数，但它确实有一些可以提供帮助的东西。有一些 memoization 装饰器`sympy.utilities.memoization`是为内部使用而设计的，但对于外部使用来说应该可以正常工作。它们可以通过缓存先前评估的结果来帮助您提高评估效率。您需要`get_expr`递归地编写它才能有效地工作。或者您可以编写自己的缓存器。没那么复杂。

# iphone - 如何与不同的视图控制器通信？

> ID：13132772
> 
> 赞同：1
> 
> 时间：2012-10-30T04:45:18.743
> 
> 标签：iphone, objective-c, cocoa-touch

我有一个 VC，它以模态方式呈现另一个 VC。这第二个 VC 推送到第三个 VC。第三个 VC 自行解散，需要在初始 VC 上调用一个方法。我似乎无法让这个工作。有什么建议吗？

```
 VC3 *aVC3 = [[self.navigationController.viewControllers objectAtIndex:0] parentViewController];
 aVC3 = self.name;
 [aVC3 addExercise];
 [self dismissView]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:15:32.573

用于. `delegate`_`backward messsaging`

请参阅[simple-delegate-tutorial-for-ios-development](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)。另请参阅[协议和代表的基础知识](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html)

如果您需要与 navigationController 中的任何 viewController 进行通信，例如`UINavigationController`：`no need of delegate`

```
ViewController *objViewController = (ViewController *)[self.navigationController.viewControllers objectAtIndex:0]; //need to which controller u would like to communicate
[objViewController yourMethodHere]; // your method here 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T05:45:45.383

这是另一种方法：

第 1 步：`FirstViewController`在`SecondViewController.h`

```
@interface SecondaryViewController : UIViewController{
}
@property (nonatomic, strong) FirstViewController *viewControllerOne; 
```

`self`第 2 步：在呈现`SecondViewController`in时将该属性设置为`FirstViewController.m`

```
@implementation SecondaryViewController

-(void)functionThatPresentsSecondViewController{
    SecondViewController *viewControllerTwo = [[SecondViewController alloc] init];
    [viewControllerTwo setViewControllerOne: self];
    [self presentViewController:viewControllerTwo animated:NO completion:nil];
} 
```

第 3 步：您现在可以使用该属性调用`FirstViewController`函数。`SecondViewController``viewControllerTwo.viewControllerOne`

# json - 骨干模型 - 使用本地相关的 Json 文件

> ID：13132773
> 
> 赞同：1
> 
> 时间：2012-10-30T04:45:36.437
> 
> 标签：json, backbone.js, backbone-relational

我有多个 JSON 文件，我想将它们用作模型的数据源。json 文件通过 id 相互关联。例如。Cinemas.json 中的 { "movies" : [1,4,3] } 与 movieId 为 1,4,3 的 "movies.json" 相关。我想在获取/解析 json 文件时保留这种关系。有没有一种方法可以让电影模型在基于 id 获取“cinemas.json”时自动实例化？我该如何设置？我尝试使用骨干关系，但无法找出正确的设置。我在这里也问了一个问题： [https ://stackoverflow.com/questions/13066386/backbone-relational-multiple-related-local-json-files-collections](https://stackoverflow.com/questions/13066386/backbone-relational-multiple-related-local-json-files-collections)

但我不确定我是否应该更多地追逐 BB-Relational。也许有更好更简单的方法来做到这一点。

感谢帮助！

# python - 如何使用python轻松从csv中过滤？

> ID：13132775
> 
> 赞同：0
> 
> 时间：2012-10-30T04:45:40.477
> 
> 标签：python

假设我有以下 CSV 文件：

```
User ID   Name        Application  

001       Ajohns      ABI
002       Fjerry      Central
900       Xknight     RFC
300       JollK       QDI
078       Demik       Central 
```

是否有一些简单的方法（将其导入某些数据结构）？和/或能够轻松地在 python 中执行以下操作：

```
1) Get all user IDs with Application=Central
2) Get the row where name="FJerry" then extract say the "userid" value from
3) Give me the filtered rows for those with "Application=Central" so I can write out to CSV
4) Give me all the rows where Name="Ajohn", and Application="ABI" such that I could easy do a len() to count them up? 
```

是否有一些 python 库或完成上述操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:12:17.560

使用[`DictReader`](http://docs.python.org/2/library/csv.html#csv.DictReader). 您需要`excel-tab`作为方言传递，因为您的字段是制表符分隔的。

`rows`是一个字典列表。

```
>>> with open(r'd:\file.csv','rb') as f:
...     reader = csv.DictReader(f,dialect='excel-tab')
...     rows = list(reader)
...
>>> [x['User ID'] for x in rows if x['Application'] == 'Central']
['002', '078'] 
```

# php - PHP 重定向 - 不会停留在当前页面

> ID：13132778
> 
> 赞同：0
> 
> 时间：2012-10-30T04:46:08.357
> 
> 标签：php, redirect, http-headers

```
<?php

  $links = array();

  $links[] = ''; //i left this blank so it stays on the current page, problem causer? 
  $links[] = 'http://domain2.com';
  $links[] = 'http://domain3.com';
  $links[] = 'http://domain4.com';

  $link = $links[array_rand($links)];

  header("Location: {$link}");

?> 
```

我想要它做的是要么重定向到域 2、3、4，要么留在当前所在的同一页面上。我希望它是完全随机的，就像上面的脚本一样。

上面的代码在 Chrome 上工作，但是，在 FireFox 和 Internet Explorer 上它说它是

> 服务器正在以永远不会完成的方式重定向对该地址的请求

有什么方法可以让它在所有浏览器上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:50:06.797

```
<?php

$links = array();

$links[] = ''; 
$links[] = 'http://domain2.com';
$links[] = 'http://domain3.com';
$links[] = 'http://domain4.com';

$link   = $links[array_rand($links)];

if ($link !== '') { // Don't pass an empty Location
    header("Location: $link"); // Remove the {}
}

?> 
```

去掉`{}`应该没问题的。另外，我认为最好不要传递空的 Location 标头。

# java - java.sql.SQLSyntaxErrorException：类型'BOOL'不存在

> ID：13132779
> 
> 赞同：-2
> 
> 时间：2012-10-30T04:46:11.527
> 
> 标签：java, mysql, prepared-statement

所以我正在尝试使用以下代码创建这个 Table usr：

```
psCreateTable = con.prepareStatement("CREATE TABLE usr (pk_ID Integer NOT NULL, username VARCHAR(20) NOT NULL, lastname VARCHAR(20) NOT NULL, firstname VARCHAR(20) NOT NULL, password VARCHAR(20) NOT NULL, admin BOOL DEFAULT FALSE, PRIMARY KEY(pk_ID))");
psCreateTable.execute(); 
```

当我执行代码时，我得到了这个异常：

```
java.sql.SQLSyntaxErrorException: TYPE 'BOOL' does not exist 
```

这绝对应该可以正常工作，因为它是从另一个表复制粘贴的。那么为什么不工作呢？

有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:41:38.470

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.awt.print.*;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.text.*;

public class Test {
public static void main(String args[]) throws SQLException {
String url = "jdbc:mysql://localhost:3306/rms";
String driver = "com.mysql.jdbc.Driver";
Connection conn = null;
try {
    conn = DriverManager.getConnection(url,"username","password");
} catch (SQLException e2) {
    e2.printStackTrace();
}

PreparedStatement pstmt = conn.prepareStatement("CREATE TABLE usr (pk_ID Integer NOT NULL, username VARCHAR(20) NOT NULL, lastname VARCHAR(20) NOT NULL, firstname VARCHAR(20) NOT NULL, password VARCHAR(20) NOT NULL, admin BOOL DEFAULT FALSE, PRIMARY KEY(pk_ID))");

        pstmt.executeUpdate();

        conn.close();
      }
 } 
```

这段代码在我的系统中运行良好并创建了表。请您再检查一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T04:57:29.553

您的查询看起来一切正常。我认为你必须使用`psCreateTable.executeUpdate();`而不是`psCreateTable.execute();`. 试试这个，让我知道。

此外，@all [http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html) Bool 和 tinyint(1) 是同义词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:00:26.260

嗨，我编辑了试试这个代码，，

```
try
            {
            Statement stmt;
            stmt=con.createStatement();
            stmt.executeUpdate("CREATE TABLE usr (pk_ID Integer NOT NULL, username VARCHAR(20) NOT NULL, lastname VARCHAR(20) NOT NULL, firstname VARCHAR(20) NOT NULL, password VARCHAR(20) NOT NULL, admin BOOL DEFAULT FALSE, PRIMARY KEY(pk_ID))");
            }catch(Exception ex)
            {
                System.out.println(""+ex);
            } 
```

谢谢

# iphone - 将数组保存在文件夹中

> ID：13132780
> 
> 赞同：1
> 
> 时间：2012-10-30T04:46:16.347
> 
> 标签：iphone, directory

我想为每个用户的帐户创建不同的文件夹。有些用户的图像需要存储在他们的文件夹中。我怎么能做到这一点，我不知道。谁能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:55:30.870

您可以通过以下方式在您的应用程序中创建目录：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
    NSString *newFolder = [(NSString*)[paths objectAtIndex:0] stringByAppendingPathComponent:@"uniqueIdentifierForAccount"];

    if (![[NSFileManager defaultManager] fileExistsAtPath:newFolder]) {
        [[NSFileManager defaultManager] createDirectoryAtPath:newFolder withIntermediateDirectories:YES attributes:nil error:nil];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:05:28.490

`Create directory`在你的应用程序中是这样的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES); 
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *folderPath = [documentsDirectory stringByAppendingPathComponent:@"UniqueUserAccount"];

if (![[NSFileManager defaultManager] fileExistsAtPath:folderPath])
   [[NSFileManager defaultManager] createDirectoryAtPath:folderPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder 
```

* * *

现在保存`NSMutableArray`参考[read-and-write-array-dictionary-and-other-collections-to-files](http://mobiledevelopertips.com/data-file-management/read-and-write-array-dictionary-and-other-collections-to-files.html)链接。

```
folderPath = [folderPath stringByAppendingPathComponent:@"array.out"]; 
[yourArray writeToFile:folderPath atomically:YES]; 
```

像这样读取数组：

```
NSArray *arrayFromFile = [NSArray arrayWithContentsOfFile:folderPath];
NSLog(@"%@",arrayFromFile); 
```

* * *

**编辑**：从图像数组中将图像保存在用户帐户文件夹中

```
for(int i = 0;i < [arrImages count];i++)
{
  folderPath = [folderPath stringByAppendingPathComponent:[NSString stringWithFormat:@"Images%d",i]]; //here folder Path with Image file
  //Our goal is to create UIImage into NSData if u have image in bundle then take like this:
  NSMutableString *imgPath;
  imgPath=[[NSMutableString  alloc] initWithString: [[NSBundle mainBundle] resourcePath]]; //get bundle path
 [imgPath stringByAppendingPathComponent:[arrImages objectAtIndex:i]]; //get image from bundle to write
 NSData *imageData = [NSData dataWithContentsOfFile:imgPath]; //create nsdata of image

 //if u have UIImage 
 NSData *imageData = UIImagePNGRepresentation([arrImages objectAtIndex:i]) //image reference here to convert into data

 [imageData writeToFile:folderPath atomically:YES]; //write here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:00:44.673

在我看来，您实际上只需要存储一个连接到名称的数组，而不需要实际的文件夹。我建议使用 NSUserDefaults。您可以像这样实现此功能：

```
 //instantiate the NSUserDefaults
    NSUserDefaults *storage = [NSUserDefaults standardUserDefaults];

    NSArray *userArray;
    NSString *username;

    //Then to store:
    [storage setObject:userArray forKey:username];

    //and to recall:
    userArray = [storage objectForKey:username]; 
```

# haxe - Haxe - 打印命令行参数

> ID：13132781
> 
> 赞同：5
> 
> 时间：2012-10-30T04:46:20.780
> 
> 标签：haxe

使用 Haxe 编程语言，是否可以打印传递给应用程序的命令行参数？

我正在尝试在 Haxe 中重写这个 Java 程序（它只是打印命令行参数）。

```
public class JavaExample{
    public static void main(String[] args){
        for(int i = 0; i < args.length; i++){
            System.out.println(args[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T06:03:19.557

由于像 JS（在浏览器中）和 Flash 这样的目标没有命令行参数的概念。Haxe 将这样的“系统”目标放在[Sys](http://haxe.org/api/sys)和顶级 sys 包中。

```
class Example {
    public static function main():Void {
        for (arg in Sys.args())
            Sys.println(arg);
    }
} 
```

# android - 有没有办法在我们的设备上运行应用程序时调试 dalvik 代码 (AOSP)。GDB 是否有助于此目的

> ID：13132790
> 
> 赞同：2
> 
> 时间：2012-10-30T04:47:09.240
> 
> 标签：android, debugging, gdb, dalvik

我想知道当应用程序在我们的设备上运行时，android 开源的 dalvik 目录中发生了什么。我知道 AOSP 中的 dalvik 部分被编译为 libdvm.so。我不想调试 android 应用程序，但需要知道应用程序运行时一切从哪里开始（与解释器和 JIT 相关）。

当应用程序在设备上运行时，它的 dex 代码被解释，检测到的热跟踪被传递给 JIT 编译器以转换为 m/c 代码。在设备上运行应用程序时是否可以通过调试器看到这一点。我希望这个要求不会令人困惑。

我尝试在主机上使用 gdbclient，在设备上使用 gdbserver。

1.  给`/system/bin/dalvikvm`as 可执行文件。但是它解析AOSP中的dalvikvm文件夹
    ，我认为这是dalvik的命令行执行部分。

2.  然后我给出`libdvm.so`了可执行文件。它加载了符号。但是我应该在哪里给出断点。

在设备中启动应用程序后，它说程序未运行。

有人做过这种调试吗？请帮助我您的方法和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T13:51:05.267

我使用过 ndk 并且能够调试本机代码。您需要为该 ndk 版本使用 gdb 客户端。但是对于dalvik，它有一些测试和调试工具，但没有尝试使用gdb ..

# c# - 重载函数静态方法错误

> ID：13132792
> 
> 赞同：0
> 
> 时间：2012-10-30T04:47:17.033
> 
> 标签：c#, overloading

我正在通过下面的示例

```
class Program
{
    public static void Show(String pstrMessage)
    {
        Console.WriteLine(pstrMessage);
    }
    public void Show(Object obj)
    {
        Console.WriteLine(obj.ToString());
    }
    static void Main(string[] args)
    {
        Program program=new Program();
        program.Show("Test Message");
    }
} 
```

当我删除静态函数时，它工作正常。
否则，它会给我一个编译时错误。
无法在非静态上下文中访问静态方法“show”。
因为我认为对象是所有人的基类，所以它应该自动类型转换为对象（隐式类型转换）。
谁能解释为什么它会出错。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T04:49:36.760

没有理由`Show(Object)`成为非静态成员函数。也声明该功能`static`。

然后，您需要使用`Program.Show`（使用类名）而不是`program.Show`（使用实例名），因为您正在调用静态函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T04:51:18.950

当多个方法名称匹配时，编译器会运行一个*重载决策过程*来决定哪个方法更具体。在您的情况下，静态重载恰好是*最具体的*，因为它需要 a`string`而不是`object`. 编译器抱怨你应该使用它来调用它`Program.Show("Test Message");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:21:28.230

如果要使用实例函数，只需使用 program.Show((Object)"Test Message");

# rest - Firefox Add-on RESTclient - 如何输入 POST 参数？

> ID：13132794
> 
> 赞同：114
> 
> 时间：2012-10-30T04:47:52.860
> 
> 标签：rest, post, firefox-addon

我已经安装了 Firefox RESTclient 插件，但是我很难弄清楚如何传递 POST 参数。有没有特定的格式可以做到这一点？或者是否有任何其他工具可用于在 Mac OS X 上调试 REST API？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2013-01-09T07:16:20.603

如果你想提交一个 POST 请求

1.  您必须将 Firefox 插件的“<strong>request header”部分设置为具有“<strong>name”=“<strong> `Content-Type`”和“<strong>value”=“<strong> `application/x-www-form-urlencoded`”</li>
2.  现在，您可以在“请求正文”文本区域字段中提交“<code>name=mynamehere&title=TA”之类的参数

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-12-19T18:45:36.177

这是一个分步指南（我认为这应该预先加载了附加组件）：

1.  在 RESTClient 的顶部菜单 -> Headers -> Custom Header
2.  在弹出框中，输入**名称**：`Content-Type`和**值**：`application/x-www-form-urlencoded`
3.  选中“保存到收藏夹”框，然后单击“确定”。
    现在您将看到包含新添加数据的“标题”部分。
4.  然后在正文部分，您可以输入要发布的数据，例如：

    ```
    username=test&name=Firstname+Lastname 
    ```

5.  每当您想发出发布请求时，请从“标题”主菜单中选择`Content-Type:application/x-www-form-urlencoded`您添加的项目，它应该可以工作。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-30T05:02:33.173

您可以在 POST 请求本身的 URL 中发送参数。

示例网址：

```
localhost:8080/abc/getDetails?paramter1=value1&parameter2=value2 
```

在 Firefox REST 客户端中复制此类 URL 后，对所需的服务器进行 POST 调用

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-08T11:50:02.967

需要根据下图设置请求标头。[![添加请求头](../Images/7008006489ad820e717635cfcb2e8388.png)](https://i.stack.imgur.com/fDl8r.jpg)

请求正文可以作为文本区域中的 json 字符串传递。 [![在此处输入图像描述](../Images/4d57a2d3f2fe3aa740b5f80b298e93b4.png)](https://i.stack.imgur.com/HfPNy.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-14T15:43:16.463

我尝试了其他一些答案中提到的方法，但它们对我来说看起来像是解决方法。在我看来，使用 Firefox Add-on RESTclient 发送带有参数的 HTTP POST 请求并不简单，至少对于我目前使用的版本 2.0.1 而言。

相反，请尝试使用其他免费的开源工具，例如 Apache JMeter。它简单明了（见下面的截图）

[![在此处输入图像描述](../Images/d840760cd80638638ec93f7b56a08b8e.png)](https://i.stack.imgur.com/UvBYK.png)

# c - 悬空指针和内存泄漏的区别

> ID：13132798
> 
> 赞同：82
> 
> 时间：2012-10-30T04:48:28.093
> 
> 标签：c

我不明白悬空指针和内存泄漏之间的区别。这两个术语有什么关系？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-10-30T04:49:48.740

**[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)**指向已释放的内存。不再分配存储。尝试访问它可能会导致分段错误。

以悬空指针结尾的常用方法：

```
char *func()
{
   char str[10];
   strcpy(str, "Hello!");
   return str; 
}
//returned pointer points to str which has gone out of scope. 
```

您正在返回一个作为局部变量的地址，当控制权返回给调用函数时，该地址将超出范围。**（未定义的行为）**

**另一个常见的悬空指针示例是在显式**调用该内存后，通过指针访问内存位置。

```
int *c = malloc(sizeof(int));
free(c);
*c = 3; //writing to freed location! 
```

* * *

**[内存泄漏](http://www.ibm.com/developerworks/aix/library/au-toughgame/)**是尚未释放的内存，现在无法访问（或释放）它，因为再也无法访问它。（例如，一个指针，它**是对****动态分配**（而不是释放）的内存位置的唯一引用，它现在指向其他地方。）

```
void func(){
    char *ch = malloc(10);
}
//ch not valid outside, no way to access malloc-ed memory 
```

Char-ptr ch 是一个局部变量，在函数末尾超出范围，泄漏了动态分配的**10 个字节**。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-30T04:54:40.607

您可以将它们视为彼此的对立面。

当您释放内存区域但仍保留指向它的指针时，该指针悬空：

```
char *c = malloc(16);
free(c);
c[1] = 'a'; //invalid access through dangling pointer! 
```

当您丢失指针但保留分配的内存时，您会发生内存泄漏：

```
void myfunc()
{
    char *c = malloc(16);
} //after myfunc returns, the the memory pointed to by c is not freed: leak! 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-30T04:50:46.697

[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)是一个具有值（非 NULL）的指针，它指的是对您期望的对象类型无效的一些内存。例如，如果您设置一个指向对象的指针，然后用其他不相关的东西覆盖该内存，或者如果它是动态分配的，则释放内存。

[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)是当您从堆中动态分配内存但从未释放它时，可能是因为您丢失了对它的所有引用。

它们是相关的，因为它们都是与管理不善的指针有关的情况，尤其是在动态分配的内存方面。在一种情况下（悬空指针），您可能已经释放了内存，但之后尝试引用它；在另一个（内存泄漏）中，您忘记了完全释放内存！

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-07-19T06:32:42.637

**悬空指针**

如果任何指针指向任何变量的内存地址，但在某个变量从该内存位置删除之后，而指针仍指向该内存位置。这样的指针被称为*悬空指针*，这个问题被称为悬空指针问题。

```
#include<stdio.h>

  int *call();

  void main(){

      int *ptr;
      ptr=call();

      fflush(stdin);
      printf("%d",*ptr);

   }

 int * call(){

   int x=25;
   ++x;
   return &x;
 } 
```

输出：垃圾值

> 注意：在某些编译器中，您可能会收到警告消息返回局部变量或临时地址的地址

解释：变量 x 是局部变量。它的范围和生命周期在函数调用内，因此在返回 x 变量 x 的地址后，x 变为死指针，指针仍然指向 ptr 仍然指向该位置。

此问题的解决方法：将变量 x 设为静态变量。换句话说，我们可以说指向对象已被删除的指针称为悬空指针。

**内存泄漏**

在计算机科学中，当计算机程序错误地管理内存分配时，就会发生内存泄漏。按照简单的说法，我们已经分配了内存，而不是 Free 其他语言术语说不释放它称为内存泄漏，这对应用程序和意外崩溃是致命的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-19T06:56:25.947

指针有助于为变量创建用户定义的范围，该变量称为动态变量。动态变量可以是单个变量，也可以是相同类型的变量`array`组（ ）或不同类型的变量组（`struct`）。默认局部变量范围在控制进入函数时开始，在控制离开该函数时结束。默认全局变量范围从程序执行开始，并在程序完成后结束。

但是由指针保存的动态变量的范围可以在程序执行中的任何点开始和结束，这必须由程序员决定。只有当程序员不处理范围的结尾时，悬空和内存泄漏才会出现。

如果程序员没有`free`为动态变量的范围结束编写代码（指针），则会发生内存泄漏。任何方式一旦程序退出完整的进程内存将被释放，此时泄漏的内存也将被释放。但是对于一个运行时间很长的进程，它会导致一个非常严重的问题。

一旦动态变量的范围结束（释放），`NULL`应该分配给指针变量。否则，如果代码错误地访问它，将发生未定义的行为。所以悬空指针只不过是一个指针，它指向一个作用域已经完成的动态变量。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-07-28T19:06:07.587

**内存泄漏**：当堆中有一个内存区域但堆栈中没有指向该内存的变量时。

```
char *myarea=(char *)malloc(10);

char *newarea=(char *)malloc(10);

myarea=newarea; 
```

**悬空指针**：当指针变量在堆栈中但在堆中没有内存时。

```
char *p =NULL; 
```

尝试取消引用而不分配空间的悬空指针将导致分段错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-03T13:59:49.087

指向已被删除（或释放）的内存位置的指针称为悬空指针。

```
#include <stdlib.h>
#include <stdio.h> 
 void  main()
 {
    int *ptr = (int *)malloc(sizeof(int));
    // After below free call, ptr becomes a 
    // dangling pointer
    free(ptr); 
 } 
```

更多信息请点击[这里](https://www.geeksforgeeks.org/dangling-void-null-wild-pointers/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-02T11:30:48.837

> 指向已被删除（或释放）的内存位置的指针称为悬空指针。Pointer 作为悬空指针有三种不同的方式。
> 
> 1.  内存的解除分配
> 2.  函数调用
> 3.  变量超出范围

—— 来自[https://www.geeksforgeeks.org/dangling-void-null-wild-pointers/](https://www.geeksforgeeks.org/dangling-void-null-wild-pointers/)

# android - 在 android 日历中添加特定日期的事件

> ID：13132799
> 
> 赞同：0
> 
> 时间：2012-10-30T04:48:31.367
> 
> 标签：android, calendar

> **可能重复：**
> [如何在 Android 中添加日历事件？](https://stackoverflow.com/questions/3721963/how-to-add-calendar-events-in-android)

我正在使用 android 日历...我在 android 日历中创建了一个事件，但我想在特定日期添加一个事件，比如我想在 2012-11-13 添加一个事件，然后如何在此添加一个事件日期....

```
ContentValues event = new ContentValues();
        Uri eventsUri = Uri.parse("content://com.android.calendar/events");

    event.put("calendar_id", 1);
    event.put("title", "Today's Event [TEST]");  
    event.put("description", "2 Hour Presentation");
    event.put("eventLocation", "Online");  

    long startTime = System.currentTimeMillis() + 1000 * 60 * 60;
    long endTime = System.currentTimeMillis() + 1000 * 60 * 60 * 2;

    event.put("dtstart", startTime);
   event.put("dtend", endTime);  

    event.put("allDay", 0); // 0 for false, 1 for true
    event.put("eventStatus", 1);
    event.put("visibility", 0);
    event.put("transparency", 0);
    event.put("hasAlarm", 0); // 0 for false, 1 for true

    Uri insertedUri = getContentResolver().insert(eventsUri, event); 
```

我有这个代码，它是在当前日期保存的事件，但我想在未来的日期添加事件，比如 2012-11-30！！！！

# php - 使用 PHP/mysqli 的多对多插入查询

> ID：13132801
> 
> 赞同：2
> 
> 时间：2012-10-30T04:48:53.553
> 
> 标签：php, insert, mysqli, many-to-many, junction

我有一个包含 YouTube 播放列表表、视频参考表和以多对多关系连接它们的连接表的数据库。我一直在尝试创建一个 PHP/mysqli 函数，该函数将 YouTube 视频引用添加到“vids”表中，并将播放列表 ID 和视频 ID 插入到联结表中。如果视频已经在 vids 表中，我希望它获取记录 ID，否则插入它并使用 mysqli_stmt_insert_id 之类的东西来返回新 ID。

编辑：我已经删除了我发布的代码，因为它甚至没有接近正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T22:12:34.920

终于找到了一种方法来做到这一点，它必须通过多个查询来完成。

这些表的设置使得当您在 vids 表中输入新的 YouTube 视频参考时**，**它会获得一个自动增量**vid_id**。联结表**list_vid_junc**是 MyISAM 并且有 3 列：**list_id**、**vid_id**和**sort**。主键由**list_id**和**sort**组成。**排序**设置为自动增量。这允许列表中同一视频的多个条目，可以通过**排序**自动增量进行排序。

请注意，在 MyISAM 表中，因为主键索引以这种方式拆分，所以 mySql为每个创建的新列表从 1开始**排序自动增量，而不是使每个排序都成为唯一编号，请参阅**[http://dev.mysql.com/ doc/refman/5.5/en/example-auto-increment.html#id583323](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html#id583323)。列表 1 可以包含排序 ID 1,2,3，列表 2 也可以包含排序 ID 1,2,3。数字对是唯一的，而不是单个数字。

```
class DbService {
    var $username = "user";
    var $password = "password";
    var $server = "localhost";
    var $port = "3306";
    var $databasename = "database";
    var $connection;

public function __construct() {
    $this->connection = mysqli_connect(
                            $this->server,  
                            $this->username,  
                            $this->password, 
                            $this->databasename,
                            $this->port
                        );
    $this->throwExceptionOnError($this->connection);
}

// returns array of (vidID, sort); adds duplicate vids to list if run 2+ times
public function addToPlaylist($ytRef, $listID) {

    $stmt = mysqli_prepare($this->connection, "INSERT IGNORE INTO vids(yt_ref) VALUES (?)");

    mysqli_bind_param($stmt, 's', $ytRef);
    mysqli_stmt_execute($stmt);

    $vidID = mysqli_stmt_insert_id($stmt);    // 0 if video already exists
    mysqli_stmt_free_result($stmt); 

    if ($vidID == 0) {
        $stmt = mysqli_prepare($this->connection, "SELECT vid_id FROM vids WHERE yt_ref = ? LIMIT 1");

        mysqli_bind_param($stmt, 's', $ytRef);
        mysqli_stmt_execute($stmt);

        mysqli_stmt_bind_result($stmt, $vidID);
        mysqli_stmt_fetch($stmt);
        mysqli_stmt_free_result($stmt);     
    }

    $stmt = mysqli_prepare($this->connection, "INSERT IGNORE INTO fr_list_vid_junc(vid_id, list_id) VALUES(?, ?)");     

    mysqli_stmt_bind_param($stmt, 'ii', $vidID, $listID);
    mysqli_stmt_execute($stmt);

    mysqli_stmt_free_result($stmt);     
    mysqli_close($this->connection);

    $arr = array($vidID, mysqli_stmt_insert_id($stmt));
    return $arr;
    }
} 
```

# ios - iOS 的辅助功能，VoiceOver 阅读顺序问题

> ID：13132805
> 
> 赞同：7
> 
> 时间：2012-10-30T04:49:11.383
> 
> 标签：ios, ipad, accessibility, uiaccessibility

![在此处输入图像描述](../Images/c51ef1c6f803236272fdd8861598c5be.png)

当“双指向下滑动”手势完成时，是否可以更改 iPad 中用于辅助功能的 VoiceOver 功能读出元素的顺序？

对于包含 3 个标签和一个按钮的附加图像，VoiceOver 按以下方式读取元素，

标签 1 -> 标签 2 -> 按钮 -> 标签 3

订单可以改成，

标签 1 -> 标签 2 -> 标签 3 -> 按钮

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-30T06:15:21.593

对于您的示例，实现此目的的最快方法是将三个标签放在一个透明的`UIView`子类中，作为标签的容器。必须正确设置此子类以让 VoiceOver 知道如何解释它。如果您的部署目标是，`iOS6`那么您可以简单地回答这个子类中的“应该对可访问性子类进行分组”问题。

```
-(BOOL)shouldGroupAccessibilityChildren{
    return YES;
} 
```

对于下面`iOS6`它会更复杂，除了你的`UIView`容器子类将只包含`UILabels`哪些是可访问性元素。你可以像这样实现它：

```
-(BOOL)isAccessibilityElement{
    return NO;
}
-(NSInteger)accessibilityElementCount{
    return self.subviews.count;
}
-(id)accessibilityElementAtIndex:(NSInteger)index{
    return [self.subviews objectAtIndex:index];
}
-(NSInteger)indexOfAccessibilityElement:(id)element{
    return [self.subviews indexOfObject:element];
} 
```

我已经测试了这个示例代码，它可以满足您的需求，如果您需要任何说明，请添加评论。总是乐于帮助使事情更容易获得。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-22T18:48:14.053

I tried setting the `shouldGroupAccessibilityChildren` to `YES` but it didn't work for me.

What did work for me was setting the accessibility label of the parent view directly (because I wanted all the items to be read in one go/one VoiceOver gesture).

```
[cell setAccessibilityLabel:[NSString stringWithFormat:@"%@, %@", cityLabel, temperatureLabel]]; 
```

The above snippet of codes is from Apple's documentation [Enhancing the Accessibility of Table View Cells](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/TableView_iPhone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW5)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-31T16:52:34.827

在 Swift 中，将 IBOutlet 附加到父 UIView，然后将 shouldGroupAccessibilityChildren 设置为 true 就足够了。

> abc.shouldGroupAccessibilityChildren = true

我确实注意到如果还设置`isAccessibilityElement = true`分组将不会生效。同样，选中故事板或 xib 中的可访问性复选框也将阻止分组发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T13:20:29.580

我认为你可以在故事板中做到这一点。VoiceOver 顺序由文档大纲中视图的顺序决定。

只需以正确的顺序拖放视图层次结构中的视图即可。

# php - 使用ajax将Javascript值传递给PHP变量

> ID：13132806
> 
> 赞同：0
> 
> 时间：2012-10-30T04:49:27.043
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 Flash 检测脚本来评估是否在用户浏览器中启用了 Flash 插件，以便加载不同的页面。Flash检测脚本如下，使用jquery 1.8.2和jquery.jqplugin 1.0.2

```
<script type="text/javascript" src="jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="jquery.jqplugin.1.0.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    $("#withflash").hide();
    $("#noflash").hide();
    if ($.browser.flash == true)
      $("#withflash").show ();
    else
      $("#noflash").show ();
});
</script>
<div id="withflash">Flash Supported</div>
<div id="noflash">Flash Not Supported</div> 
```

如果存在 Flash 插件，我会显示“支持 Flash”。我需要在 php 变量中捕获 Flash 插件值是否为 true 的值`$hasFlashSupport`，如下所示：

```
<?php
echo " $hasFlashSupport";
exit;
?> 
```

我知道 PHP 是基于服务器的，而 Javascript 是基于客户端的。因此，Ajax 是一个不错的选择，可以将 javascript 变量捕获到我的 php 变量中。我完全不了解 Ajax 语法以及如何实现它。

请求这里的专家帮助我提供有关如何实现此目的的代码......提前感谢大家......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:59:15.497

您可以使用具有[getElementById](http://us3.php.net/domdocument.getelementbyid)方法的 DOMDocument 对象来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:31:38.120

尝试这个：

如果真实

```
<div id="withflash">
    <?php echo '$hasFlashSupport'; ?>
</div> 
```

别的

```
<div id="noflash">
    <?php echo '$hasFlashSupport'; ?>
</div> 
```

# struts2 - 在struts 2中使用复选框和arraylist

> ID：13132812
> 
> 赞同：1
> 
> 时间：2012-10-30T04:50:27.983
> 
> 标签：struts2

我在动作类中有一个数组列表。我想在我的jsp页面中访问这个arraylist以及一个复选框。如果复选框被选中，我想在另一个动作类中获取复选框的关联值。我怎样才能做到这一点？？

动作类：

```
public class CreateModuleAction extends ActionSupport{
       private List modNameList=new ArrayList();
    private int size;
public String manageModule()
    {

      ManageModule ob=new ManageModule();
      modNameList=ob.selectModule();

      if(modNameList.isEmpty()) {
          addActionError("Module list is empty!!!");
          return ERROR;

        }
      else{
         setSize(modNameList.size());
         return SUCCESS;  
          }

    }
public List getModNameList() {
        return modNameList;
    }

    public void setModNameList(List modNameList) {
        this.modNameList = modNameList;
    }

    public int getSize() {
        return size;
    }

    public void setSize(int size) {
        this.size = size;
    } 
```

jsp页面：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="/struts-tags" prefix="s" %>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="../css/style.css" rel="stylesheet" type="text/css" />
        <title>Admin Module Management</title>
    </head>
    <body>
             <div class="main">
            <div class="header"> 
<!--              Page heading-->

               <jsp:include page="/templates/heading.jsp" flush="true"/> 
            </div>
            <div class="menu">
<!--                Page menu-->

 <jsp:include page="/templates/menu.jsp" flush="true"/> 
            </div>
            <div class="content">
<!--                page content-->

               <div id="right_top" style="position:absolute; left:900px; top:300px;;">
                   <a href="adminCreateModule.jsp"><img src="../images/add.jpg"/>Add</a>
                   <a href="adminEditModule.jsp"><img src="../images/edit.jpg"/>Edit</a>
                   <a href="adminDeleteModule.jsp"><img src="../images/add.jpg"/>Delete</a>
               </div>
              <s:iterator status="size" value="modNameList">
                  <s:checkbox name="modNameCheck" fieldValue="true" value="modNameList"/>
                  <s:property value="modNameList"/>
              </s:iterator>
              <s:actionerror/>

            </div>
            <div class="footer" style="margin-left: 50%">
<!--                page footer-->

              <jsp:include page="/templates/footer.jsp" flush="true"/> 
            </div>

        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:30:11.107

如果您想将复选框中的值提交到操作，那么您需要`form`在您的 JSP 中。如果您想根据操作中的某些值显示选中/未选中的复选框，那么您需要一些条件检查`value`属性。

```
<s:checkbox name="modNameCheck" value="list.contains(something)"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:07:20.427

为什么不使用 struts2 [checkboxlist 标签](http://www.mkyong.com/struts2/struts-2-scheckboxlist-multiple-check-boxes-example/)

```
<s:form action="myAction">
  <s:checkboxlist list="modNameList" name="modNameCheck"/>
</s:form> 
```

现在在你的`myAction`动作类中声明

```
private List modNameCheck; //with getter/setter 
```

它将包含在 jsp 中检查过的条目

# asp.net - 无法将“ASP.masterpage_mpname_master”类型的对象转换为“ITest”类型

> ID：13132817
> 
> 赞同：1
> 
> 时间：2012-10-30T04:50:38.747
> 
> 标签：asp.net

我正在开发一个网络应用程序。我创建了一个接口 ITest

```
public interface ITest
{
    void Add();
} 
```

& 一个实现 ITest 的用户控件

```
 public partial class WebUserControl1 : System.Web.UI.UserControl, ITest
    {
        public void Add()
        {
            throw new NotImplementedException();
        }
    } 
```

在我的网页上，我放置了用户控件。但是，当我将用户控件类型转换为 IType 类型时，它会引发异常（System.InvalidCastException）

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
  //          WebUserControl11.Add();
            foreach (var uCnt in this.Page.FindControlsOfType<UserControl>())
            {
                if (uCnt.Visible)
                {
                    ((ITest)uCnt).Add(); //Error : Casting Exception
                }
                else
                {
                }
            }
        }
    } 
```

**我可以直接调用 Add 方法，**但是我想使用 ITest 接口调用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:32:09.593

我不确定该`FindControlsOfType`方法是如何实现的，但假设您需要检索那些实现 ITest 接口而不是所有 UserControl 实例的控件。

# objective-c - 目标 C 中的班级类型错误

> ID：13132821
> 
> 赞同：1
> 
> 时间：2012-10-30T04:51:16.610
> 
> 标签：objective-c, cocos2d-iphone

我有一个父类和一个子类。GameObjectBase（父） GameObjectPlayer（子）。当我覆盖子类中的一个方法并使用它调用它时

```
[myPlayerClass showNextFrame] 
```

它正在调用父类。原来在调试器中，我看到myPlayerClass确实是类类型GameObjectBase（也就是父类）怎么来的？

游戏对象基础.h

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

@class GameLayer;

@interface GameObjectBase : NSObject
{
/*    CCSprite *gameObjectSprite;    // Sprite representing this game object
    GameLayer *parentGameLayer; */  // Reference of the game layer this object
    // belongs to
}
@property (nonatomic, assign) CCSprite *gameObjectSprite;
@property (nonatomic, assign) GameLayer *parentGameLayer; 

// Class method.  Autorelease
+ (id) initWithGameLayer:(GameLayer *) gamelayer
           imageFileName:(NSString *) fileName;

// "Virtual methods" that the derived class should implement.
// If not implemented, this method will be called and Assert game
- (void) update: (ccTime) dt;
- (void) showNextFrame;

@end 
```

游戏对象播放器.h

```
#import <Foundation/Foundation.h>
#import "GameObjectBase.h"
@interface GameObjectPlayer : GameObjectBase
{
    int direction;
}

@property (nonatomic) int direction;
@end 
```

游戏层.h

```
#import "cocos2d.h"
#import "GameObjectPlayer.h"

@interface GameLayer : CCLayer
{

}

// returns a CCScene that contains the GameLayer as the only child
+(CCScene *) scene;

@property (nonatomic, strong) GameObjectPlayer *player;
@end 
```

当我在调试器中调用检查 GameLayer 类中此函数中的“temp”类型时，它给出了父类 GameObjectBase 而不是子类 GameObjectPlayer

```
- (void) update:(ccTime) dt
{
    GameObjectPlayer *temp = _player;

    [temp showNextFrame];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T04:58:33.360

您只是在分配值。请分配它然后分配它。

希望它能解决你的问题。

# matlab - matlab：lsqcurvefit，只有一个上限

> ID：13132826
> 
> 赞同：1
> 
> 时间：2012-10-30T04:51:28.357
> 
> 标签：matlab, least-squares

简单的问题.. 是否可以只为 lsqcurvefit 设置一个上限，而不限制其他上限？

我需要类似的东西：

```
lb = [0 0 0];
ub = [~ ~ 5]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:27:39.137

来自`help lsqcurvefit`：

> X = LSQCURVEFIT(FUN,X0,XDATA,YDATA,LB,UB) 定义了一组较低和
> 
> ```
> upper bounds on the design variables, X, so that the solution is in the
> range LB <= X <= UB. Use empty matrices for LB and UB if no bounds
> exist. Set LB(i) = -Inf if X(i) is unbounded below; set UB(i) = Inf if
> X(i) is unbounded above. 
> ```

所以是的，丹·贝克尔是对的——使用

```
lb = [   0  0  0];
ub = [inf inf  5]; 
```

会成功的。

# spring - 春季使用 cas 与 netsuite 集成的 sso

> ID：13132827
> 
> 赞同：0
> 
> 时间：2012-10-30T04:51:42.850
> 
> 标签：spring, single-sign-on, netsuite

我想使用 cas 在 Spring 应用程序和 Netsuite 之间实现单点登录。在网上搜索了很多东西，但没有任何成果。请通过一些链接或文档帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:51:07.637

我刚刚在 NetSuite 中为我们公司完成了两个 SSO。（您将在 Setup>Integration>SSO 下找到它）我们最终让 NetSuite 向我们的内部 PHP 内部网发送了一个特制的 URL。那里的网络应用程序接收传入的 URL 并在其上执行操作，用户得到他们需要的东西。

请原谅我对 Spring 一无所知，但如果您可以运行您的 Web 应用程序以接收传入的 URL（帖子），那么您将在您的 ERP 实例中创建一个新的 SSO 对象，并传递您需要传递的值从那里到您的网络应用程序。这些可以是系统直接输出的内置值（即：“{entityid}”），也可以是您使用脚本创建的值，将它们传递给 SSO，然后 SSO 将这些值传递给您的 Web 应用程序' . 您可以将 SSO“对象”“放置”到“自定义表单”上的“自定义选项卡”上。或者您可以创建一个全新的表单。或者，您可以将 SSO 放置在其他位置。我选择将我们的选项卡放在自定义选项卡上，因为这对我们的用例很有效。

您可以“放置”您的 SSO 的唯一另外两个地方是“Portlet”（例如，您的仪表板上的自定义面板或类似面板）或“SuiteLet”（我还没有完成，但现在正在处理） .

如果您在您的实例中安装了任何“捆绑包”，其中一些在其中具有 SSO，其中一些是“受保护的”，而另一些则不是，未受保护的可以作为 JavaScript 下载到您的机器上进行检查，考虑和仿真。

SuiteAnswers 中的帮助很不错，但没有提供很多工作示例供您适应。PHP Tool Kit 内部有一个 SSO 的工作示例，我强烈建议您获取它，解压缩并阅读所有这些文件，即使它没有目录，您也可以轻松地遵循其中的所有包含和引用那些文件。

如果您对其中的某些内容有特定的后续问题，请发布，虽然我是中级，但我会给它 ole 学院尝试回答。如果您需要任何其他内容，请联系我。

干杯。

# android - Grid View 如何更改列号运行时？

> ID：13132832
> 
> 赞同：0
> 
> 时间：2012-10-30T04:52:35.893
> 
> 标签：android, android-layout, gridview

我正在尝试更改 gridView 列号。我打电话`setNumColumn()`并`invalidateViews()`更新视图。

但是，网格的单元格宽度不会动态变化。我设置了`stretchMode="columnWidth"`，但它没有工作。

![截屏](../Images/d1f7f5bf932237c4738f66a2f1d6066d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:13:41.523

问题解决了：

当网格视图在运行时更改列时，网格视图中的子视图不会重新计算其布局。

在您的 BaseAdapter 中，您应该调用 forceLayout() 来计算其布局。

```
@Override
public View getView(final int position, View convertView,
        ViewGroup parent) {

    if (null == convertView) {
        convertView = mInflater.inflate(
                R.layout.mnm_customer_user_thumbnail, null);

        control.txtUserName = (TextView) convertView
                .findViewById(R.id.mnmTxtStudentName);
        control.image = (ImageView) convertView
                .findViewById(R.id.mnmImageStudent);
        control.imageCheckBox = (ImageView) convertView
                .findViewById(R.id.mnmImageCheckBox);
        control.mnmOuterBounder = (RelativeLayout) convertView
                .findViewById(R.id.mnmOuterBound);
        convertView.setTag(control);
    } else {
        convertView.forceLayout();
    }

...
...
...
... 
```

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T08:01:27.510

也许你可以通过谷歌提供的这个很好的示例获得帮助 [http://developer.android.com/shareables/training/BitmapFun.zip](http://developer.android.com/shareables/training/BitmapFun.zip) 以下位于 ImageGridFragment.java 中的代码用于在运行时动态处理列号更改例如旋转设备时屏幕方向发生变化：

这里是评论：这个监听器用来获取GridView的最终宽度，然后计算列数和每列的宽度。每列的宽度是可变的，因为 GridView 具有stretchMode=columnWidth。列宽用于设置每个视图的高度，因此我们得到 nic 方形缩略图。

```
mGridView.getViewTreeObserver().addOnGlobalLayoutListener(
            new ViewTreeObserver.OnGlobalLayoutListener() {
                @Override
                public void onGlobalLayout() {
                    if (mAdapter.getNumColumns() == 0) {
                        final int numColumns = (int) Math.floor(
                                mGridView.getWidth() / (mImageThumbSize + mImageThumbSpacing));
                        if (numColumns > 0) {
                            final int columnWidth =
                                    (mGridView.getWidth() / numColumns) - mImageThumbSpacing;
                            mAdapter.setNumColumns(numColumns);
                            mAdapter.setItemHeight(columnWidth);
                            if (BuildConfig.DEBUG) {
                                Log.d(TAG, "onCreateView - numColumns set to " + numColumns);
                            }
                        }
                    }
                }
            });

    return v; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:15:05.440

在xml中你必须提供这个属性..

```
 android:stretchMode="columnWidth" . In your adapter depending on the size(by  `getCount()`) of the list colomn will create dynamically.. 
```

# android - 如何克服这个错误android.permission.MODIFY_PHONE_STATE.？

> ID：13132833
> 
> 赞同：1
> 
> 时间：2012-10-30T04:52:38.217
> 
> 标签：android, android-intent, telephonymanager

如何解决这个问题 android.permission.MODIFY_PHONE_STATE。当我试图接听电话时，应该会发生此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:01:12.770

您遇到的问题是在 Android 2.3 (Gingerbread) 中引入的。您拥有的任何需要 MODIFY_PHONE_STATE 的代码都可以一直运行到（包括）Android 2.2，但会在 Android 2.3+ 上中断。

David Brown 签入了一项更改，该更改将 MODIFY_PHONE_STATE 权限的使用限制在系统应用程序中。系统应用程序要么

预先安装到 ROM 上的系统文件夹中 由制造商使用他们的安全证书编译 有一个问题为此打开，但谷歌将其杀死。他们是故意这样做的，而不是偶然的，而且显然无意扭转它。

我怀疑您正在尝试使用隐藏的 API，例如 ITelephony。我是——我被这个烫伤了。Android 团队的理由是它被隐藏了，无论如何你都不应该使用它。我个人认为没有安全风险（它需要许可），所以在他们完成构建适当的公共电话 API 之前将其保留。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T04:55:14.613

您在应用清单中没有此权限

在清单中添加权限`android.permission.MODIFY_PHONE_STATE`

如果问题仍然存在，请点击 stackoverflow 内部[链接](https://stackoverflow.com/questions/4715250/how-to-grant-modify-phone-state-permission-for-apps-ran-on-gingerbread)。

# python - App Engine 和 Twitch.tv API 之间最令人沮丧的问题

> ID：13132835
> 
> 赞同：1
> 
> 时间：2012-10-30T04:52:44.317
> 
> 标签：python, api, google-app-engine

我会尽可能简短和清楚地说明这一点。

我有一个简单的应用程序调用 twitch.tv api：

例子：

[https://api.twitch.tv/kraken/streams/nl_kripp](https://api.twitch.tv/kraken/streams/nl_kripp)

调用后，它会返回数据（如果单击上面的链接，您可以看到该数据）。

好的等等问题。这是我创建的简单应用程序，仅在网页上返回该数据：

```
import webapp2
import urllib2
from google.appengine.api import urlfetch

class MainHandler(webapp2.RequestHandler):
    def get(self):
        url = ('https://api.twitch.tv/kraken/streams/nl_kripp')
        result = urlfetch.fetch(url)
        self.response.out.write(result.content)

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

当我在本地机器上运行这个应用程序时，我看到了返回的数据，一切都很好。但是，当我部署应用程序时，我根本看不到任何数据。

确切的应用程序部署在此 URL：

[http://urltestingsite.appspot.com/](http://urltestingsite.appspot.com/)

来自应用引擎和 twitch 的一些人试图解决这个问题，但完全没有运气。请帮我！！！

编辑：

这是同一个应用程序，但是调用了另一个流媒体站点 API (own3d)，即使在部署时它也能完美运行：

```
import webapp2
import urllib2

class MainHandler(webapp2.RequestHandler):
    def get(self):
        url = ('http://api.own3d.tv/liveCheck.php?live_id=10588')
        contents = urllib2.urlopen(url)
        self.response.out.write(contents.read())

app = webapp2.WSGIApplication([('/', MainHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:00:34.623

我对这些特定站点一无所知，但是站点通过用户代理或 IP 地址将其列入黑名单的情况并不少见，这可能是因为之前的一些不良行为者。如果您在开发时获得了结果，但在部署时却没有，我怀疑是后者。你联系过网站吗？

# linux - 使用 shell 查找文件夹中没有指定文件模式的目录

> ID：13132836
> 
> 赞同：3
> 
> 时间：2012-10-30T04:52:50.197
> 
> 标签：linux, bash, shell, find

目录树是这样的：

```
.
├── A_123
│   └── 123.txt
├── A_456
│   ├── tmp
│   └── tmp.log
└── A_789
    └── 789.txt 
```

有 3 个目录（A_123、A_456、A_789）。目录名称的模式是：`A_{numbers}`而我感兴趣的文件是`{numbers}.txt`.

我想知道是否有办法获取其中`A_{numbers}`没有`{numbers}.txt`文件的目录。例如上面，这个脚本应该返回：

```
./A_456 
```

as在其文件夹`A_456`中没有，但在相关文件夹中有其文件。`456.txt``A_123``A_789``{numbers}.txt`

有人对此有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:21:42.550

这是一种方法：

```
for dir in *;do 
  if [ $(find "$dir" -maxdepth 1 -regex '.*/[0-9][0-9]*\.txt' | wc -l) = 0 ]; then 
    echo $dir
  fi
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T06:09:01.517

由于 A_[0-9] 目录没有嵌套，因此您可以通过循环中的 glob 轻松完成此操作。此实现是纯 bash，不会在外部实用程序中产生：

```
for d in A_[0-9]*/; do         # the trailing / causes only directories to be matched
   files=("$d"/[0-9]*.txt)     # populate an array with matching text files
   ((!${#files})) && echo "$d" # echo $d if the array is empty
done 
```

这个实现存在一些问题。它将匹配诸如“12ab.txt”之类的文件，并且需要将目录的所有文件名加载到数组中。

这是 bash 中的另一种方法，可以进行更准确的文件名匹配：

```
re='^[0-9]+[.]txt$'
for d in A_[0-9]*/; do
   for f in *; do
      if [[ -f $f && $f =~ $re ]]; then
         echo "$d"
         break
      fi
   done
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T15:18:52.973

其他几个答案略有不同：使用 bash[扩展模式匹配](http://www.gnu.org/software/bash/manual/bashref.html#Pattern-Matching)：

```
shopt -s extglob nullglob
for dir in  A_+([0-9]); do
    files=($dir/+([0-9]).txt)
    (( ${#files[@]} == 0 )) && echo $dir
done 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:53:38.457

```
for file in *; do
  if [[ "$file" =~ ^A_([0-9]+)$ && ! -f "$file/${BASH_REMATCH[1]}.txt" ]]; then
    echo $file;
  fi
done 
```

这个怎么运作：

1.  使用正则表达式（注意`=~`）检查文件/文件夹的名称是“A_”，后跟数字。
2.  同时，它捕获数字（注意括号）并将它们存储在`${BASH_REMATCH[1]}`
3.  接下来，检查文件夹是否包含`{number}.txt`.
4.  如果没有，请回显文件夹的名称。

# python - 如何将文本文件合并到 Python 脚本的正文中？

> ID：13132838
> 
> 赞同：0
> 
> 时间：2012-10-30T04:53:01.627
> 
> 标签：python, list, text, io

目前，我的代码正在读取外部文本文件，使用：

```
text_file = open("file.txt", 'r', 0)
my_list = []
for line in text_file
    my_list.append(line.strip().lower())
return my_list 
```

我想将我的代码发送给朋友，而无需发送单独的文本文件。所以我正在寻找一种将文本文件的内容合并到我的代码中的方法。

我怎样才能做到这一点？

如果我在 MS 记事本中使用替换功能将文本文件转换为**列表**格式（[a，b，c，...]），然后尝试将列表复制并粘贴到 Python IDE 中（我正在使用 IDLE），该过程内存非常密集：IDLE 试图在一行中将所有内容都串到右边（即没有自动换行），而且它永远不会结束。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:23:09.787

我会建议

1.  将文件的内容分配给另一个 py 文件中的变量
2.  通过将值导入程序来读取值

这样 py 文件将被转换为 pyc （发送），或者 py2exe 将处理它..

并且不会让您的朋友弄乱内容...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:00:26.813

我不完全确定你在问什么，但如果我猜对了你的意思，你可以这样做：

```
my_list = ['line1', 'line2'] 
```

每个都是文本文件中的一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:05:45.480

只需将所有文件内容放入一个 MASSIVE 字符串中：

```
with open('path/to/my/txt/file') as f:
    file_contents = f.read() 
```

所以现在，你的朋友可以这样做：

```
for line in file_contents.split('\n'):
    #code 
```

这相当于

```
with open('path/to/file') as f:
    for line in f:
        #code 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:47:31.387

您还可以执行以下操作：

```
my_file_contents = """file_contents_including_newlines"""
for line in my_file_contents.split('\n'): # Assuming UNIX line ending, else split '\r\n'
    *do something with "line" variable* 
```

请注意在要发送的文本周围使用三引号。这适用于非二进制数据。

# sql - 删除字符串后的所有内容

> ID：13132841
> 
> 赞同：4
> 
> 时间：2012-10-30T04:53:32.680
> 
> 标签：sql, replace

我有一个表格，其中包含一个字段，其中包含我网站上出售的商品的描述。

在我们无限的智慧中，当我们第一次启动该网站时，我们将 Facebook Like 按钮的代码粘贴到描述中，每个都略有不同，因为链接中有产品信息。我们现在有大约 400 个项目，其中包含代码。

这是我正在处理的一个例子：

> - 搅起，蓬松的巧克力巧克力口味；享受巧克力的更轻松方式
> - 减少 45% 脂肪
> 
> < iframe src="http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.oursite.com%2Findex.php% 3Fmain_page%3Dproduct_info%26cPath%3D33_36%26products_id%3D106&layout=standard&show_faces=true&width=450&action=like&colorscheme=light&height=80" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height :80 像素;" allowTransparency="true"></iframe>

我想删除`<iframe`过去的一切。我一直在寻找使用 REPLACE 和/或 LEFT 的示例，但找不到我需要的东西，因为我不太精通 SQL 语言。

它总是在 products_description 字段的末尾，所以我不需要担心在它之前保存任何东西，只在它之前。

我能想到的最好的是

```
SELECT LEFT(REPLACE('<iframe%','<iframe%',' '),0) 
```

但这似乎不起作用。

感谢您为此提供的任何帮助，因为与编辑每个描述相比，我花费的时间要少得多。

更新：在尝试了许多建议的变体之后，仍然没有找到答案。它运行，但不对列进行编辑。

在另一个网站上找到它后，我也尝试了这个。相同，但认为它可能会让某人知道如何进行：

```
select left(`products_description`,instr('<iframe',`products_description`)-1) FROM products_description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:08:27.727

```
SELECT 
trim( -- trim removes spaces before and after given string
    left(
        'some text < iframe', 
        locate('< iframe', 'some text < iframe') - 1
    )
); 
```

为了更好地理解，我没有删除 and 之间`<`的空格`iframe`。

你也可以看看这个线程：

[从记录中删除 HTML 标记](https://stackoverflow.com/questions/2627940/remove-html-tags-from-record)

但这是关于仅删除标签以及在标签之间保留`<tag>`文本的讨论`</tag>`。无论如何，它会为你服务，因为你在 and 之间没有任何`<iframe>`东西`</iframe>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:00:17.043

1.  `REPLACE('<iframe%','<iframe%',' ')`只会给你'' - 它在第一个参数中搜索第二个参数并用第三个参数替换它。
2.  `LEFT(somestring, 0)`会给你0个字符的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:20:00.237

尝试这个：

```
select substr(your_raw_string, 0, instr(your_raw_string, '<iframe') -1)
from your_table 
```

# html - XSL for Xml 到表转换 2.0

> ID：13132843
> 
> 赞同：0
> 
> 时间：2012-10-30T04:53:54.413
> 
> 标签：html, xml, xslt

[对上一个问题XSL for Xml to table transformation](https://stackoverflow.com/questions/13131529/xsl-for-xml-to-table-transformation)的跟进 我一直在研究 XSLT 2.0 变体。我知道我在做一些根本错误的事情，但不确定是什么。提前感谢您的建议和指导。问候JJ。

输入：

```
<root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="2" section="Arsenal">Arsenal</page> 
  <page number="3" section="Arsenal">Arsenal</page> 
  <page number="4" section="Arsenal">Arsenal</page> 
  <page number="5" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="8" section="Chelsea">Chelsea</page> 
  <page number="9" section="Chelsea">Chelsea</page> 
  <page number="10" section="Chelsea">Chelsea</page> 
  <page number="11" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="14" section="ManUnited">ManUnited</page> 
  <page number="15" section="ManUnited">ManUnited</page> 
  <page number="16" section="ManUnited">ManUnited</page> 
  <page number="17" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="20" section="ManCity">ManCity</page> 
  <page number="21" section="ManCity">ManCity</page> 
  <page number="22" section="ManCity">ManCity</page> 
  <page number="23" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page> 
 </root> 
```

期望的输出

```
<tr><td>1</td><td>Arsenal</td><td>6</td></tr>
<tr><td>7</td><td>Chelsea</td><td>12</td></tr>
<tr><td>13</td><td>ManU</td><td>18</td></tr>
<tr><td>19</td><td>Mancity</td><td>24</td></tr> 
```

当前 XSL

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">

  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/root">
     <table>
      <xsl:for-each-group select="page" group-by="@section">
            <tr>
      <td>
        <xsl:copy-of select="@number"/>
      </td>
      <td>
        <xsl:copy-of select="@section"/>
      </td>
      <td>
        <xsl:copy-of select=".|current-group()[last()]"/>
      </td>
    </tr>
      </xsl:for-each-group>
    </table>
  </xsl:template>

</xsl:stylesheet> 
```

电流输出

```
<table>
    <tr>
        <td number="1"/>
        <td section="Arsenal"/>
        <td>
            <page number="1" section="Arsenal">Arsenal</page>
            <page number="6" section="Arsenal">Arsenal</page>
        </td>
    </tr>
    <tr>
        <td number="7"/>
        <td section="Chelsea"/>
        <td>
            <page number="7" section="Chelsea">Chelsea</page>
            <page number="12" section="Chelsea">Chelsea</page>
        </td>
    </tr>
    <tr>
        <td number="13"/>
        <td section="ManUnited"/>
        <td>
            <page number="13" section="ManUnited">ManUnited</page>
            <page number="18" section="ManUnited">ManUnited</page>
        </td>
    </tr>
    <tr>
        <td number="19"/>
        <td section="ManCity"/>
        <td>
            <page number="19" section="ManCity">ManCity</page>
            <page number="24" section="ManCity">ManCity</page>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:20:46.867

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
    <xsl:output omit-xml-declaration="no" indent="yes"/>
    <xsl:strip-space elements="*"/>
    <xsl:template match="/root">
        <table>
            <xsl:for-each-group select="page" group-by="@section">
                <tr>
                    <td>
                        <xsl:value-of select="@number"/>
                    </td>
                    <td>
                        <xsl:value-of select="@section"/>
                    </td>
                    <td>
                        <xsl:value-of select="current-group()[last()]/@number"/>
                    </td>
                </tr>
            </xsl:for-each-group>
        </table>
    </xsl:template>
</xsl:stylesheet> 
```

# ios - 条形按钮未收到触摸

> ID：13132846
> 
> 赞同：2
> 
> 时间：2012-10-30T04:54:24.270
> 
> 标签：ios, rightbarbuttonitem

我在工具栏上有 2 个栏按钮，一个不工作，另一个工作。有时当我们触摸第一个栏按钮的尖端时它会起作用，我认为这必须是它们之间的灵活空间的问题。我找不到任何可能的解决方案，任何帮助将不胜感激！我正在粘贴下面的代码

editbutton 是第一个按钮，mybutton 是第二个按钮

```
-(void) rightButtonToolbar:(UIBarButtonItem*)menuButton{

  UIToolbar* toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0,TOOLBAR_WIDTH ,44)];    

  NSMutableArray  *barButtons = [[NSMutableArray alloc]init];

  UIBarButtonItem *flexiSpace = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
   [barButtons addObject:flexiSpace];

if (showEditButton) 
{
    NSLog(@"showeditbutton");
   UIBarButtonItem *editButton = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemEdit target:self action:@selector(editOffer)];
[barButtons addObject:editButton];

    [editButton release];

}
UIBarButtonItem *myButton2 = [[UIBarButtonItem alloc] initWithTitle:@"Kopiren" style:UIBarButtonSystemItemAction target:self action:@selector(copyOffer)]; 
[barButtons addObject:myButton2];  
if (menuButton != nil) {
    menuButtonShown=YES;
    [barButtons addObject:menuButton];  
}
else {
    menuButtonShown=NO;
}
[toolbar setItems:barButtons animated:YES];
UIBarButtonItem *rightBarButton = [[UIBarButtonItem alloc]initWithCustomView:toolbar];
[self.navigationItem setRightBarButtonItem:rightBarButton animated:YES];
[barButtons release];
    [flexiSpace release];
[rightBarButton release];
[toolbar release];
    [myButton2 release];
} 
```

# javascript - 在javascript中删除字符串

> ID：13132855
> 
> 赞同：0
> 
> 时间：2012-10-30T04:55:39.863
> 
> 标签：javascript

我有一个 URL 说 [虚拟 URL](http://www.google.com/?v=as12&&src=test&img=test)

```
http://www.google.com/?v=as12&&src=test&img=test 
```

现在我想单独删除 &src=test& 部分。我知道我们可以使用 indexof 但不知何故，我无法获得获取下一个 & 符号并单独删除该部分的想法。任何帮助。新的 URL 应该看起来像

[http://www.google.com/?v=as12&img=test](http://www.google.com/?v=as12&img=test)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:04:17.973

用这个怎么样？：

[http://jsfiddle.net/RMaNd/8/](http://jsfiddle.net/RMaNd/8/)

```
var mystring = "http://www.google.com/?v=as12&&src=test&img=test";
mystring = mystring.replace(/&src=.+&/, "");  // Didn't realize it isn't necessary to escape "&"
alert(mystring); 
```

这假定“任何”字符将出现在“=”之后和下一个“&”之前，但是`.`如果您知道它可能是什么，您始终可以将其更改为字符集 - 使用`[ ]`

这也假设在“=”之后但在“&”之前至少有 1 个字符 - 因为`+`. 但是`*`如果您认为字符串可能是“src=&img=test” ，则可以将其更改为

**更新**：

对于这个问题，使用`split`可能是正确的选择，但前提是位置`src=whatever`仍然在“&&”之后但未知……例如，如果它是“&&img=test&src=test”。因此，只要始终存在“&&”将静态部分与您要更新的部分分开，您就可以使用如下内容：

[http://jsfiddle.net/Y7LdG/](http://jsfiddle.net/Y7LdG/)

```
var mystring1 = "http://www.google.com/?v=as12&&src=test&img=test";
var mystring2 = "http://www.google.com/?v=as12&&img=test&src=test";

var final1 = removeSrcPair(mystring1);
alert(final1);
var final2 = removeSrcPair(mystring2);
alert(final2);

function replaceSrc(str) {
    return str.replace(/src=.*/g, "");
}

function removeSrcPair(orig) {
    var the_split = orig.split("&&");
    var split_second = the_split[1].split("&");
    for (var i = split_second.length-1; i >= 0; i--) {
        split_second[i] = replaceSrc(split_second[i]);
        if (split_second[i] === "") {
            split_second.splice(i, 1);
        }
    }
    var joined = split_second.join("&");
    return the_split[0] + "&" + joined;
} 
```

这仍然假设一些事情 - 主要拆分是“&&”......键是“src”，然后是“=”，然后是0个或更多字符......当然，键/值对由“&”。如果您的问题不是那么广泛，那么我的第一个答案似乎很好。如果“src=test”并不总是在“&&”之后出现，则需要使用更“复杂”的正则表达式或这种`split`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:05:47.467

就像是：

```
url = "http://www.google.com/?v=as12&&src=test&img=test"
firstPart = url.split('&&')[0];
lastPart = url.split('&&')[1];
lastPart = lastPart.split('&')[1];
newUrl = firstPart+'&'+lastPart;
document.write(newUrl); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T05:06:19.053

**详细信息：**使用拆分方法。

**解决方案已编辑：**我更改了以下内容以测试最后一个查询字符串是否存在

```
var url = "http://www.google.com/?v=as12&&src=test&img=test";
var newUrl;

var splitString = url.split('&');

if (splitString.length > 3)
{
   newURL = splitString[0] + "&" + splitString[3];
}
else
{
   newURL = splitString[0];
} 
```

# php - 无法使用php更改mysql中单行的两件事

> ID：13132862
> 
> 赞同：0
> 
> 时间：2012-10-30T04:56:49.230
> 
> 标签：php, mysql

这是代码：

```
$id = intval($_POST['id']);
$score = "'" . $_POST['score'] . "'";
$shares = "'" . $_POST['shares'] . "'";

$conn = new PDO('mysql:host=localhost;dbname=news', 'root', '');
$stmt = $conn->prepare("UPDATE news SET 'shares' = :shares, 'score' = :score 
WHERE id = :id");
$stmt -> execute(array(
    'shares' => $shares,
    'score' => $score,
    'id' => $id
    )); 
```

它不起作用。我不确定我将如何看到我认为 mysql 在某处给出的错误，并且我已经尝试了我能想到的一切。

使用双引号并立即将变量添加到语句中。

将单引号添加到共享和分数。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:58:12.543

我认为您需要从列名中删除引号，例如：

```
$stmt = $conn->prepare("UPDATE news SET shares = :shares, score = :score 
                                                                  WHERE id = :id"); 
```

也最好使用`bindParam`方法来绑定参数。

```
$stmt ->bindParam(':shares', $shares, PDO::PARAM_INT);
$stmt ->bindParam(':score', $score, PDO::PARAM_INT);
$stmt ->bindParam(':id', $id, PDO::PARAM_INT);
$stmt -> execute(); 
```

我假设所有字段都是 INT 类型。如果没有，请使用适当的类型进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:13:50.857

我猜你忘记了执行语句中的冒号，这里是编辑后的代码。

```
$stmt = $conn->prepare("UPDATE news SET shares = :shares, score = :score 
WHERE id = :id");
$stmt -> execute(array(
    ':shares' => $shares,
    ':score' => $score,
    ':id' => $id
    )); 
```

# php - 比较两个表的值并为结果导出 JSON

> ID：13132863
> 
> 赞同：0
> 
> 时间：2012-10-30T04:57:05.137
> 
> 标签：php, mysql, compare, json, nested-loops

我有**两张不同的桌子**。对于那些我**选择一些结果**。第一个基于最小/最大值，第二个基于 Lat/Lng。这很容易（不要太在意值）并且由以下人员创建：

```
$sql1="SELECT * FROM events WHERE value BETWEEN '".$min2d."' AND '".$max2d."'";
$sql2="SELECT * FROM locations WHERE (lng BETWEEN ".$wl." AND ".$el.") AND (lat BETWEEN '".$sl."'AND'".$nl."')"; 
```

现在我们已经缩小了结果，如果**存在**于第二个表中，我们希望**匹配第一个表的行。`'id'`**在成功时，我们创造结果。

 **所以让我们先得到一些数字：

```
$result1 = mysql_query($sql1);
$result2 = mysql_query($sql2);

$numRows1 = mysql_num_rows($result1);
$numRows2 = mysql_num_rows($result2);

$loopCount1 = 1;
$loopCount2 = 1; 
```

为了更有效地解析**JSON**（来自用户），我们希望通过将事件创建到 JSON 数组中来对事件进行排序，并将位置作为“持有者”。这意味着，每个位置可能有几个事件。

**一些位置可能没有事件**，但也有一些**事件可能与位置不对应**。我们唯一的比较方法是相同的`'id'`。

通过我的以下尝试，即使对于那些没有事件的位置，这当然是为*所有（错误的）位置结果创建的错误。*这就是我需要你宝贵帮助的地方。

```
$json = '{"markers":[';
while ($row2 = mysql_fetch_array($result2)){
    $json .= '{"coordinates": { "lat":'. $row2['lat'] .', "lng" : ' . $row2['lng'] .'},'
            .'{"events" : [';
    while ($row1 = mysql_fetch_array($result1)){
        if ($row1['id']=$row2['id'])
            $json .= '{ '   
                    .'"title": "'.$row1['title'].'",'
                    .'"info": "'.$row1['info'].'",'
                    .'"}';
        // add comma for Json if not final row
        if ($loopCount1 < $numRows1) {
            $json .= ', ';
            $loopCount1++;}
        }
    $json .= ']}}';
    // add comma for Json if not final row
    if ($loopCount2 < $numRows2) {
            $json .= ', ';
            $loopCount2++;}
    }
$json .= ']}'; 
```

最后是回声：

```
echo $json; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T11:14:14.760

要比较两个表的值并将结果打印为 json，请使用以下代码，

```
<?php
      /* connect to the db */
      $link = mysql_connect('localhost','username','password') or die('Cannot connect to the DB');
      mysql_select_db('db_name',$link) or die('Cannot select the DB');

      /* grab the posts from the db */
      $query1 = "SELECT * FROM test1";
      $result1 = mysql_query($query1,$link) or die('Error query:  '.$query1);

      $query2 = "SELECT * FROM test2";
      $result2 = mysql_query($query2,$link) or die('Error query:  '.$query2);

      /* create one master array of the records */
      $posts = array();
      if(mysql_num_rows($result1) && mysql_num_rows($result2)) {
        while($post1 = mysql_fetch_assoc($result1)) {
            $post2 = mysql_fetch_assoc($result2);
            if($post1['name'] == $post2['name'])
              $posts[] = array('test1'=>$post1,'test2'=>$post2);
        }
      }

     header('Content-type: application/json');
     echo json_encode(array('posts'=>$posts));

      /* disconnect from the db */
      @mysql_close($link);
?> 
```**

# css - 如何在 CSS 中创建径向菜单？

> ID：13132864
> 
> 赞同：324
> 
> 时间：2012-10-30T04:57:09.240
> 
> 标签：css, tooltip, css-shapes

如何创建一个如下所示的菜单：

![工具提示图片](../Images/f9e8eeaf346f016987cf7ee8ad23ff4e.png)

[链接到 PSD](http://dribbble.com/shots/732391-Tooltip-PSD)

我不想使用 PSD 图像。我更喜欢使用像[FontAwesome](http://fortawesome.github.com/Font-Awesome/)这样的包中的图标，并在 CSS 中生成背景/css。

可以在[此处](http://theearlcarlson.com/experiments/amTooltip/)找到使用 PSD 生成工具提示图像然后使用它的菜单版本。

* * *

## 回答 #1

> 赞同：986
> 
> 时间：2012-10-30T11:17:27.847

*差不多 3 年后，我终于抽出时间重新审视这个并发布一个改进的版本。您仍然可以在最后查看原始答案以供参考。*

*虽然 SVG 可能是更好的选择，尤其是在今天，但我的目标是只保留 HTML 和 CSS，没有 JS，没有 SVG，没有图像（除了根元素的背景）。*

# ***[2015 年演示](http://codepen.io/thebabydino/pen/aOWeLa?editors=010)***

### 截图

铬 43：

![铬屏幕截图](../Images/b74f7aa0bc54b4c1e5686e5c018ba118.png)

火狐 38：

![火狐截图](../Images/0b392f8e9218e70531b4254e8d0dc45b.png)

即 11：

![IE截图](../Images/e71cbd2ea1103e8cd893323982bbaa38.png)

### 代码

HTML 非常简单。我正在使用复选框 hack 来显示/隐藏菜单。

```
<input type='checkbox' id='t'/>
<label for='t'>✰&lt;/label>
<ul>
    <li><a href='#'>☀</a></li>
    <li><a href='#'>☃&lt;/a></li>
    <li><a href='#'>☁&lt;/a></li>
</ul> 
```

我正在使用 Sass 来保持这种逻辑性，并使其在需要时更容易更改。重磅评论。

```
$d: 2em; // diameter of central round button
$r: 16em; // radius of menu
$n: 3; // must match number of list items in DOM
$exp: 3em; // menu item height
$tip: .75em; // dimension of tip on middle menu item
$w: .5em; // width of ends
$cover-dim: 2*($r - $exp); // dimension of the link cover
$angle: 15deg; // angle for a menu item
$skew-angle: 90deg - $angle; // how much to skew a menu item to $angle
$scale-factor: cos($skew-angle); // correction factor - see vimeo.com/98137613 from min 15
$off-angle: .125deg; // offset angle so we have a little space between menu items

// don't show the actual checkbox
input {
  transform: translate(-100vw); // move offscreen
  visibility: hidden; // avoid paint
}

// change state of menu to revealed on checking the checkbox
input:checked ~ ul {
    transform: scale(1); 
    opacity: .999;
    // ease out back from easings.net/#easeOutBack
    transition: .5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

// position everything absolutely such that their left bottom corner 
// is in the middle of the screen
label, ul, li {
    position: absolute;
    left: 50%; bottom: 50%;
}

// visual candy styles
label, a {
    color: #858596;
    font: 700 1em/ #{$d} sans-serif;
    text-align: center;
    text-shadow: 0 1px 1px #6c6f7e;
    cursor: pointer;
}

label {
    z-index: 2; // place it above the menu which has z-index: 1
    margin: -$d/2; // position correction such that it's right in the middle
    width: $d; height: $d;
    border-radius: 50%;
    box-shadow: 0 0 1px 1px white, 
                0 .125em .25em #876366, 
                0 .125em .5em #876366;
    background: radial-gradient(#d4c7c5, #e5e1dd);
}

ul {
    z-index: 1;
    margin: -$r + $exp + 1.5*$d 0; // position correction
    padding: 0;
    list-style: none;
    transform-origin: 50% (-$r + $exp);
    transform: scale(.001); // initial state: scaled down to invisible
    will-change: transform; // better perf on transitioning transform
    opacity: .001; // initial state: transparent
    filter: drop-shadow(0 .125em .25em #847c77) 
            drop-shadow(0 .125em .5em #847c77);
    // ease in back, also from easings.net
    transition: .5s cubic-bezier(0.6, -0.28, 0.735, 0.045);

    // menu ends
    &:before, &:after {
        position: absolute;
        margin: -$exp (-$w/2);
        width: $w; height: $exp;
        transform-origin: 50% 100%;
        background: linear-gradient(#ddd, #c9c4bf);
        content: '';
    }

    &:before {
        border-radius: $w 0 0 $w;
        transform: rotate(-.5*$n*$angle) 
                   translate(-$w/2, -$r + $exp);
        box-shadow: inset 1px 0 1px #eee;
    }
    &:after {
        border-radius: 0 $w $w 0;
        transform: rotate(.5*$n*$angle) 
            translate($w/2, -$r + $exp);
        box-shadow: inset -1px 0 1px #eee;
    }
}

li {
    overflow: hidden;
    width: $r; height: $r;
    transform-origin: 0 100%;

    @for $i from 0 to $n {
        &:nth-child(#{$i + 1}) {
            $curr-angle: $i*$angle + 
                ($i + .5)*$off-angle - 
                .5*$n*($angle + $off-angle);

            // make each list item a rhombus rotated around its bottom left corner
            // see explanation from minute 33:10 youtube.com/watch?v=ehjoh_MmE9A
            transform: rotate($curr-angle)
                       skewY(-$skew-angle) 
                       scaleX($scale-factor);

            // add tip for the item n the middle, just a rotated square
            @if $i == ($n - 1)/2 {
                a:after {
                    position: absolute;
                    top: $exp; left: 50%;
                    margin: -$tip/2;
                    width: $tip; height: $tip;
                    transform: rotate(45deg);
                    box-shadow: 
                        inset -1px -1px 1px #eee;
                    background: linear-gradient(-45deg, 
                        #bbb, #c9c4bf 50%);
                    content: '';
                }
            }
        }
    }

    a, &:before {
        margin: 0 (-$r);
        width: 2*$r; height: 2*$r;
        border-radius: 50%;
    }

    &:before, &:after {
        position: absolute;
        border-radius: 50%;
        // undo distorting transforms from menu item (parent li)
        transform: scaleX(1/$scale-factor) 
                   skewY($skew-angle);
        content: '';
    }

    // actual background of the arched menu items
    &:before {
        box-shadow: 
            inset 0 0 1px 1px #fff, 
            inset 0 0 $exp #ebe7e2, 
            inset 0 0 1px ($exp - .0625em) #c9c4bf, 
            inset 0 0 0 $exp #dcdcdc;
    }

    // cover to prevent click action in between the star and menu items
    &:after {
        top: 100%; left: 0;
        margin: -$cover-dim/2;
        width: $cover-dim; height: $cover-dim;
        border-radius: 50%;
    }
}

a {
    display: block;
    // undo distorting transforms from menu item and rotate into right position
    transform: scaleX(1/$scale-factor) 
               skewY($skew-angle) 
               rotate($angle/2);
    line-height: $exp;
    text-align: center;
    text-decoration: none;
} 
```

```
html {
  overflow: hidden;
  background: url(http://i.imgur.com/AeFfmwL.jpg);
}

input {
  /* move offscreen */
  -webkit-transform: translate(-100vw);
      -ms-transform: translate(-100vw);
          transform: translate(-100vw);
  /* avoid paint */
  visibility: hidden;
}

input:checked ~ ul {
  -webkit-transform: scale(1);
      -ms-transform: scale(1);
          transform: scale(1);
  opacity: .999;
  /* ease out back from easings.net */
  -webkit-transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
          transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

label, ul, li {
  position: absolute;
  left: 50%;
  bottom: 50%;
}

label, a {
  color: #858596;
  font: 700 1em/ 2em sans-serif;
  text-align: center;
  text-shadow: 0 1px 1px #6c6f7e;
  cursor: pointer;
}

label {
  z-index: 2;
  margin: -1em;
  width: 2em;
  height: 2em;
  border-radius: 50%;
  box-shadow: 0 0 1px 1px white,  0 .125em .25em #876366,  0 .125em .5em #876366;
  background: #d3d3d3;
  background: -webkit-radial-gradient(#d4c7c5, #e5e1dd);
  background: radial-gradient(#d4c7c5, #e5e1dd);
}

ul {
  z-index: 1;
  margin: -10em 0;
  padding: 0;
  list-style: none;
  -webkit-transform-origin: 50% -13em;
      -ms-transform-origin: 50% -13em;
          transform-origin: 50% -13em;
  -webkit-transform: scale(0.001);
      -ms-transform: scale(0.001);
          transform: scale(0.001);
  /* for improved perf on transitioning transform
   * https://twitter.com/paul_irish/status/608492121734193152
   */
  will-change: transform;
  opacity: .001;
  -webkit-filter: drop-shadow(0 0.125em 0.25em #847c77);
          filter: drop-shadow(0 0.125em 0.25em #847c77);
  -webkit-transition: 0.5s cubic-bezier(0.6, -0.28, 0.735, 0.045);
          transition: 0.5s cubic-bezier(0.6, -0.28, 0.735, 0.045);
}
ul:before, ul:after {
  position: absolute;
  margin: -3em -0.25em;
  width: 0.5em;
  height: 3em;
  -webkit-transform-origin: 50% 100%;
      -ms-transform-origin: 50% 100%;
          transform-origin: 50% 100%;
  background: #d3d3d3;
  background: -webkit-linear-gradient(#ddd, #c9c4bf);
  background: linear-gradient(#ddd, #c9c4bf);
  content: '';
}
ul:before {
  border-radius: 0.5em 0 0 0.5em;
  -webkit-transform: rotate(-22.5deg) translate(-0.25em, -13em);
      -ms-transform: rotate(-22.5deg) translate(-0.25em, -13em);
          transform: rotate(-22.5deg) translate(-0.25em, -13em);
  box-shadow: inset 1px 0 1px #eee;
}
ul:after {
  border-radius: 0 0.5em 0.5em 0;
  -webkit-transform: rotate(22.5deg) translate(0.25em, -13em);
      -ms-transform: rotate(22.5deg) translate(0.25em, -13em);
          transform: rotate(22.5deg) translate(0.25em, -13em);
  box-shadow: inset -1px 0 1px #eee;
}

li {
  overflow: hidden;
  width: 16em;
  height: 16em;
  -webkit-transform-origin: 0 100%;
      -ms-transform-origin: 0 100%;
          transform-origin: 0 100%;
}
li:nth-child(1) {
  -webkit-transform: rotate(-22.625deg) skewY(-75deg) scaleX(0.25882);
      -ms-transform: rotate(-22.625deg) skewY(-75deg) scaleX(0.25882);
          transform: rotate(-22.625deg) skewY(-75deg) scaleX(0.25882);
}
li:nth-child(2) {
  -webkit-transform: rotate(-7.5deg) skewY(-75deg) scaleX(0.25882);
      -ms-transform: rotate(-7.5deg) skewY(-75deg) scaleX(0.25882);
          transform: rotate(-7.5deg) skewY(-75deg) scaleX(0.25882);
}
li:nth-child(2) a:after {
  position: absolute;
  top: 3em;
  left: 50%;
  margin: -0.375em;
  width: 0.75em;
  height: 0.75em;
  -webkit-transform: rotate(45deg);
      -ms-transform: rotate(45deg);
          transform: rotate(45deg);
  box-shadow: inset -1px -1px 1px #eee;
  background: -webkit-linear-gradient(135deg, #bbb, #c9c4bf 50%);
  background: linear-gradient(-45deg, #bbb, #c9c4bf 50%);
  content: '';
}
li:nth-child(3) {
  -webkit-transform: rotate(7.625deg) skewY(-75deg) scaleX(0.25882);
      -ms-transform: rotate(7.625deg) skewY(-75deg) scaleX(0.25882);
          transform: rotate(7.625deg) skewY(-75deg) scaleX(0.25882);
}
li a, li:before {
  margin: 0 -16em;
  width: 32em;
  height: 32em;
  border-radius: 50%;
}
li:before, li:after {
  position: absolute;
  border-radius: 50%;
  -webkit-transform: scaleX(3.8637) skewY(75deg);
      -ms-transform: scaleX(3.8637) skewY(75deg);
          transform: scaleX(3.8637) skewY(75deg);
  content: '';
}
li:before {
  box-shadow: inset 0 0 1px 1px #fff, inset 0 0 3em #ebe7e2, inset 0 0 1px 2.9375em #c9c4bf, inset 0 0 0 3em #dcdcdc;
}
li:after {
  top: 100%;
  left: 0;
  margin: -13em;
  width: 26em;
  height: 26em;
  border-radius: 50%;
}

a {
  display: block;
  -webkit-transform: scaleX(3.8637) skewY(75deg) rotate(7.5deg);
      -ms-transform: scaleX(3.8637) skewY(75deg) rotate(7.5deg);
          transform: scaleX(3.8637) skewY(75deg) rotate(7.5deg);
  line-height: 3em;
  text-align: center;
  text-decoration: none;
}
```

```
<input type='checkbox' id='t'/>
<label for='t'>✰&lt;/label>
<ul>
	<li><a href='#'>☀</a></li>
	<li><a href='#'>☃&lt;/a></li>
	<li><a href='#'>☁&lt;/a></li>
</ul>
```

* * *

## 原始答案

我尝试用纯 CSS 做类似的事情：

# [*演示*](http://dabblet.com/gist/3979221/cb69c5e8ccf0745fff2c94b47b27b108931f1a15)

（点击星号）

适用于 Chrome、Firefox（悬停时有点奇怪的模糊效果）、Opera（末端看起来更小）和 Safari（末端看起来更小）。

```
* { margin: 0; padding: 0; }
body {
	overflow: hidden;
}
/* generic styles for button & circular menu */
.ctrl {
	position: absolute;
	top: 70%; left: 50%;
	font: 1.5em/1.13 Verdana, sans-serif;
	transition: .5s;
}
/* generic link styles */
a.ctrl, .ctrl a {
	display: block;
	opacity: .56;
	background: #c9c9c9;
	color: #7a8092;
	text-align: center;
	text-decoration: none;
	text-shadow: 0 -1px dimgrey;
}
a.ctrl:hover, .ctrl a:hover, a.ctrl:focus, .ctrl a:focus { opacity: 1; }
a.ctrl:focus, .ctrl a:focus { outline: none; }
.button {
	z-index: 2;
	margin: -.625em;
	width: 1.25em; height: 1.25em;
	border-radius: 50%;
	box-shadow: 0 0 3px 1px white;
}
/* circular menu */
.tip {
	z-index: 1;
	/**outline: dotted 1px white;/**/
	margin: -5em;
	width: 10em; height: 10em;
	transform: scale(.001);
	list-style: none;
	opacity: 0;
}
/* the ends of the menu */
.tip:before, .tip:after {
	position: absolute;
	top: 34.3%;
	width: .5em; height: 14%;
	opacity: .56;
	background: #c9c9c9;
	content: '';
}
.tip:before {
	left: 5.4%;
	border-radius: .25em 0 0 .25em;
	box-shadow: -1px 0 1px dimgrey, inset 1px 0 1px white, inset -1px 0 1px grey, 
				inset 0 1px 1px white, inset 0 -1px 1px white;
	transform: rotate(-75deg);
}
.tip:after {
	right: 5.4%;
	border-radius: 0 .25em .25em 0;
	box-shadow: 1px 0 1px dimgrey, inset -1px 0 1px white, inset 1px 0 1px grey,
				inset 0 1px 1px white, inset 0 -1px 1px white;
	transform: rotate(75deg);
}
/* make the menu appear on click */
.button:focus + .tip {
	transform: scale(1);
	opacity: 1;
}
/* slices of the circular menu */
.slice {
	overflow: hidden;
	position: absolute;
	/**outline: dotted 1px yellow;/**/
	width: 50%; height: 50%;
	transform-origin: 100% 100%;
}
/* 
 * rotate each slice at the right angle = (A/2)° + (k - (n+1)/2)*A°
 * where A is the angle of 1 slice (30° in this case)
 * k is the number of the slice (in {1,2,3,4,5} here)
 * and n is the number of slices (5 in this case)
 * formula works for odd number of slices (n odd)
 * for even number of slices (n even) the rotation angle is (k - n/2)*A°
 * 
 * after rotating, skew on Y by 90°-A°; here A° = the angle for 1 slice = 30° 
 */
.slice:first-child { transform: rotate(-45deg) skewY(60deg); }
.slice:nth-child(2) { transform: rotate(-15deg) skewY(60deg); }
.slice:nth-child(3) { transform: rotate(15deg) skewY(60deg); }
.slice:nth-child(4) { transform: rotate(45deg) skewY(60deg); }
.slice:last-child { transform: rotate(75deg) skewY(60deg); }
/* covers for the inner part of the links so there's no hover trigger between
   star button & menu links; give them a red background to see them */
.slice:after {
	position: absolute;
	top: 32%; left: 32%;
	width: 136%; height: 136%;
	border-radius: 50%;
	/* "unskew" = skew by minus the same angle by which parent was skewed */
	transform: skewY(-60deg);
	content: '';
}
/* menu links */
.slice a {
	width: 200%; height: 200%;
	border-radius: 50%;
	box-shadow: 0 0 3px dimgrey, inset 0 0 4px white;
	/* "unskew" & rotate by -A°/2 */
	transform: skewY(-60deg) rotate(-15deg);
	background: /* lateral separators */
			linear-gradient(75deg, 
		transparent 50%, grey 50%, transparent 54%) no-repeat 36.5% 0,
			linear-gradient(-75deg, 
		transparent 50%, grey 50%, transparent 54%) no-repeat 63.5% 0,
		/* make sure inner part is transparent */
		radial-gradient(rgba(127,127,127,0) 49%, 
					rgba(255,255,255,.7) 51%, #c9c9c9 52%);
	background-size: 15% 15%, 15% 15%, cover;
	line-height: 1.4;
}
/* arrow for middle link */
.slice:nth-child(3) a:after {
	position: absolute;
	top: 13%; left: 50%;
	margin: -.25em;
	width: .5em; height: .5em;
	box-shadow: 2px 2px 2px white;
	transform: rotate(45deg);
	background: linear-gradient(-45deg, #c9c9c9 50%, transparent 50%);
	content: '';
}
```

```
<a class='button ctrl' href='#' tabindex='1'>★&lt;/a>
<ul class='tip ctrl'>
	<li class='slice'><a href='#'>✦&lt;/a></li>
	<li class='slice'><a href='#'>✿&lt;/a></li>
	<li class='slice'><a href='#'>✵&lt;/a></li>
	<li class='slice'><a href='#'>✪&lt;/a></li>
	<li class='slice'><a href='#'>☀</a></li>
</ul>
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-04-26T23:22:16.880

安娜的反应是踢屁股！那是一些严重的CSS-fu。

我的解决方案可能不是您所希望的，但它是另一种可能的解决方案。我现在正在开发一个具有类似弧形按钮样式的指南针界面。我决定使用[Raphael](http://raphaeljs.com/)和 SVG 来开发它。

我在 Illustrator 中创建了一个弧形，为其导出了 SVG，从导出的 SVG 文件中获取了弧的路径定义，并使用 Raphael 构建了我的界面。

## [这是它的 JSFiddle](http://jsfiddle.net/elliotlarson/jUTFm/)。

这是JavaScript：

```
var arc = {
    fill: '#333',
    stroke: '#333',
    path: 'M53.286,44.333L69.081,7.904C48.084-1.199,23.615-2.294,0.648,6.78l14.59,36.928C28.008,38.662,41.612,39.27,53.286,44.333z'
};

var paper = Raphael(document.getElementById("notepad"), 500, 500);

var arcDegrees = 45;
var centerX = 210;
var centerY = 210;
var compassRadius = 68;
var currentlyActive = 45;
var directions = [
    {label:'N', degrees:0, rotatedDegrees:270}, 
    {label:'NE', degrees:45, rotatedDegrees:315}, 
    {label:'E', degrees:90, rotatedDegrees:0}, 
    {label:'SE', degrees:135, rotatedDegrees:45}, 
    {label:'S', degrees:180, rotatedDegrees:90}, 
    {label:'SW', degrees:225, rotatedDegrees:135}, 
    {label:'W', degrees:270, rotatedDegrees:180}, 
    {label:'NW', degrees:315, rotatedDegrees:225}
];

function arcClicked()
{
    var label = $(this).data('direction-label');
    $("#activeArc").attr('id', null);
    $(this).attr('id', 'activeArc');
}

for (i = 0; i < 360; i += arcDegrees) {
    var direction = _.find(directions, function(d) { return d.rotatedDegrees == i; });
    var radians = i * (Math.PI / 180);
    var x = centerX + Math.cos(radians) * compassRadius;
    var y = centerY + Math.sin(radians) * compassRadius;

    var newArc = paper.path(arc.path);
    // newArc.translate(x, y);
    // newArc.rotate(i + 89);
    newArc.transform('T' + x + ',' + y + 'r' + (i + 89));

    if (direction.degrees == currentlyActive) {
        $(newArc.node).attr('id', 'activeArc');
    }

    $(newArc.node)
        .attr('class', 'arc')
        .data('direction-label', direction.label)
        .on('click', arcClicked);
} 
```

这是相关的CSS：

```
#notepad {
    background: #f7f7f7;
    width: 500px;
    height: 500px;
}

.arc {
    fill: #999;
    stroke: #888;
    cursor: pointer;
}

.arc:hover {
    fill: #777;
    stroke: #666;
}

#activeArc {
    fill: #F18B21 !important;
    stroke: #b86a19 !important;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-25T14:32:04.977

另一个非常好的方法是使用 JavaScript 进行定位。

[**制作动画径向菜单的演示 + 教程**](http://creative-punch.net/2014/02/making-animated-radial-menu-css3-javascript/)

这种方法的一个优点是您可以使用任意数量的元素，并且它将保持径向定位它们，而无需更改任何 CSS。

有问题的 JavaScript 是：

```
var items = document.querySelectorAll('.circle a');

for(var i = 0, l = items.length; i < l; i++) {
  items[i].style.left = (50 - 35*Math.cos(-0.5 * Math.PI - 2*(1/l)*i*Math.PI)).toFixed(4) + "%";

  items[i].style.top = (50 + 35*Math.sin(-0.5 * Math.PI - 2*(1/l)*i*Math.PI)).toFixed(4) + "%";
}

document.querySelector('.menu-button').onclick = function(e) {
   e.preventDefault(); document.querySelector('.circle').classList.toggle('open');
} 
```

# android - 无法执行同步（不调用 onPerformSync）

> ID：13132865
> 
> 赞同：11
> 
> 时间：2012-10-30T04:57:12.313
> 
> 标签：android, android-service

我按照这个标题[为什么 ContentResolver.requestSync 不触发同步？](https://stackoverflow.com/questions/5253858/why-does-contentresolver-requestsync-not-trigger-a-sync)但是同步方法没有出现在设置屏幕的帐户和同步中。我认为**onPerformSync()**没有被调用。我尝试调试但未找到错误日志。这是我的代码：

**同步适配器.xml**

```
<sync-adapter xmlns:android="http://schemas.android.com/apk/res/android"
android:accountType="@string/ACCOUNT_TYPE"
android:contentAuthority="@string/AUTHORITY"
android:userVisible="true"
android:isAlwaysSyncable="true" 
```

/>

**同步服务.java**

```
public class CalendarSyncService extends Service{
private static SyncAdapterImpl sSyncAdapter = null;
private static String list_event_ids;
private static Requestor requestor;

public void onCreate(){
    super.onCreate ();
    if (sSyncAdapter == null)
        sSyncAdapter = new SyncAdapterImpl(this);
}

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return sSyncAdapter.getSyncAdapterBinder();
}

public class SyncAdapterImpl extends AbstractThreadedSyncAdapter {

    Context context;
    public SyncAdapterImpl(Context context) {
        super(context, true);
        // TODO Auto-generated constructor stub
        this.context = context;
    }

    @Override
    public void onPerformSync(Account arg0, Bundle arg1, String arg2,
            ContentProviderClient arg3, SyncResult arg4) {
        // TODO Auto-generated method stub
        Log.e("thuutai", "Perform Sync Call");

        try {
            CalendarSyncService.performSync(context);
        } catch (DOMException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SAXException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (ParserException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

**我在这里叫它**

```
public void onClick(View arg0) {
Bundle params = new Bundle();
        params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_DO_NOT_RETRY, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, false);
        ContentResolver.addPeriodicSync(selectedAccount, getString(R.string.AUTHORITY), params, 3600);
        ContentResolver.setSyncAutomatically(selectedAccount, getString(R.string.AUTHORITY), true);

        ContentResolver.requestSync(selectedAccount, getString(R.string.AUTHORITY), params);} 
```

**清单.xml**

```
 <service android:name=".service.CalendarSyncService" android:exported="true">
        <intent-filter>
            <action android:name="android.content.SyncAdapter" />
        </intent-filter>
        <meta-data android:name="android.content.SyncAdapter"
         android:resource="@xml/syncadapter" />
    </service> 
```

我在 Nexus S Android 4.0 中进行了测试。感谢您的阅读！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-17T13:16:33.243

有时由于正在进行类似的同步，不会调用此方法。您可以使用以下代码检查并取消：

```
if (ContentResolver.isSyncPending(yourAccount, yourAuthority)  ||
    ContentResolver.isSyncActive(yourAccount, yourAuthority)) {
  Log.i("ContentResolver", "SyncPending, canceling");
  ContentResolver.cancelSync(yourAccount, yourAuthority);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T13:48:13.693

您可以尝试的是：

```
ContentResolver.setSyncAutomatically(account, AUTHORITY, true); 
```

我尝试设置`isAlwaysSyncable`标志，但它对我不起作用（尽管这可能是一个不同的问题）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-08T03:28:36.403

您必须强制手动同步。

```
Bundle params = new Bundle();
params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, true);
params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, true);
ContentResolver.requestSync(selectedAccount, getString(R.string.AUTHORITY), params); 
```

# regex - 排除大量数字的正确正则表达式是什么？

> ID：13132866
> 
> 赞同：1
> 
> 时间：2012-10-30T04:57:18.720
> 
> 标签：regex, grep

我需要通过服务器的访问日志查找不包含数字*但*`12345`包含单词的行。*`omgspecialword`*

 *什么是允许我为这些行 grep 的正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:00:07.617

如果数字和单词是固定的，则不需要正则表达式，只需用于`|`通过 2 个不同`grep`的管道和过滤结果

```
cat file_name | grep -v 12345 | grep omgspecialword 
```

解释：

`cat file_name |`-`cat`打印内容`file_name`并将其传送到下一段

`grep -v 12345 |`排除包含匹配模式的行`12345`，然后将结果通过管道传递到下一段

`grep omgspecialword`过滤包含匹配模式的行`omgspecialword`。由于这里没有通过管道传输到其他任何内容，因此将其打印到标准输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:09:27.537

```
grep 'omgspecialword' your_file|grep -v 12345 
```

或者

```
awk '$0!~/12345/ && /omgspecialword/' your_file 
```

或者

```
perl -lne 'if(/omgspecialword/ && !(/12345/)){print}' your_file 
```*

# ios - iOS 到 Mac OS X [核心] 蓝牙数据传输

> ID：13132867
> 
> 赞同：4
> 
> 时间：2012-10-30T04:57:21.273
> 
> 标签：ios, macos, bluetooth, connection, core-bluetooth

我的目标是通过蓝牙在*运行 iOS*的*设备和运行 Mac OS X*的设备之间建立连接。我知道我可能可以为此使用 CoreBluetooth ，但我不明白怎么做，因为我没有看到在*iOS 设备*上设置服务并将其广播为*运行 Mac OS X 设备的可用服务的方法*。换句话说，我只是想建立一个连接来让*iOS 设备*将数据发送到*Mac OS X 设备*. 另外，我将如何指定如何设置服务的属性。我试过研究这些东西，但大多数文档对我来说意义不大。数据传输很小，因此蓝牙足以胜任这项工作。我试图为此避免 Bonjour，以及 P2P 的游戏中心框架，因为 OS X 无法处理（我认为）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T20:16:42.230

在 iOS6 中，iPhone 4S、5 和新 iPad 可以在蓝牙智能/低功耗模式下作为外围设备和中央设备工作。尝试从APP Store下载“LightBlue”APP。它可以让您将 iPhone4S 或 5 设置为带有随机服务的外围模式，然后您可以从 Mac 上读取这些服务（如果您有更新的 BT Low Energy，我使用 Retina，但新的 iMac 和 Mac Mini 也有 BT低能量）。

您是正确的，核心蓝牙仅允许访问不允许 MFI 芯片的低功耗蓝牙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T15:20:34.063

今天刚刚遇到这个......只是想为需要从您的 Mac 与非蓝牙 LE 设备通信的任何人提供另一个答案。

要走的路是使用 IOBluetooth 和 IOBluetoothUI。它们都是 Mac 的框架，我相信它们允许您与旧蓝牙和蓝牙 LE 4.0 进行通信。此外，我非常肯定您可以使用此框架充当中央和外围设备。

# css - 浮动 DIVS - 一个无缘无故的重叠？

> ID：13132870
> 
> 赞同：0
> 
> 时间：2012-10-30T04:57:32.423
> 
> 标签：css, html, floating

......我的意思是“没有理由”；出于某种原因，我显然（并且可能是公然地）忽略了。这是一个 NOOB 问题 - 但我一生都无法弄清楚我的浮动 div 出了什么问题。

如此处所示：http: [//codysilfies.com/kenji/beta.html](http://codysilfies.com/kenji/beta.html)

我有一个容器 div (#Wrapper)，其中包含几个 div - 其中一个内容区域 (#content) 有一个向左浮动的菜单 (#menu)；和一个 div 来容纳文本（还没有 ID）。

我认为将它们都向左对齐会使两个 div 彼此相对；但它不是那样工作的。带有文本的框与菜单重叠，使布局混乱。我还必须在代码中将文本放在菜单之前；否则它将显示在主菜单下方（这不应该是正常行为 - 它应该与另一个 div 相对！

我知道我可以设置宽度并将文本浮动到 RIGHT - 但已要求页面随浏览器页面调整大小。

我知道这是我忽略的愚蠢而简单的事情......但我看不到它。任何帮助都会很热！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:54:38.563

解决方案只是我很愚蠢。我忘了在菜单中添加一个浮点数。哦！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:35:02.520

嗨，现在给`margin-left:190px;`你的`float right` **div**

像这样

```
<div style="float:right;margin-left:190px;"> 
```

结果是

**[*这个*](http://i.stack.imgur.com/65w9I.png)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:44:44.960

另外，请记住盒子模型。当浮动元素与结构更相关时，通常给它一个宽度是一个好主意，因为这是一个图像，而不是一个图像。这也将有助于解决 IE 7 和 8 中的问题。

# javascript - 编写一个完全流畅的 HTML 页面（对每个元素的高度/宽度使用 '%' 而不是 'px'）

> ID：13132879
> 
> 赞同：0
> 
> 时间：2012-10-30T04:58:13.397
> 
> 标签：javascript, html

我正在将我的 HTML 页面设计为完全流畅：

对于标记 (HTML) 中的每个元素，我使用的是 'style="height: ***%;width:*** %"'（而不是 'style="height: ***px;width:** *px"'）。

这种方法似乎工作得很好，除了在更改窗口尺寸时，在这种情况下，网页元素会改变它们的位置并最终“相互叠加”。

我想出了一个很好的运行时（java-script）解决方案：

```
var elements = document.getElementsByTagName("*");
for (var i=0; i < elements.length; i++)
{

    if (elements[i].style.height) elements[i].style.height = elements[i].offsetHeight+"px";
    if (elements[i].style.width ) elements[i].style.width  = elements[i].offsetWidth +"px";
} 
```

剩下的唯一问题是，如果用户通过将 URL 输入到非最大化窗口中来打开网站，那么页面会适合窗口的该部分。然后，当最大化窗口时，页面保持在其先前的测量值中。所以本质上，我已经解决了最初的问题（当改变窗口尺寸时），但只有当窗口最初处于最大尺寸时。

关于如何解决这个问题的任何想法？（鉴于我想保持我的“％页面设计”不变）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:02:29.210

我认为真正的答案是“完全流畅的设计”并不是“只对所有事物使用百分位测量”的同义词。您将需要考虑：

*   *当窗口改变大小时每个*特定元素应**该做什么**
**   调整屏幕大小时，某些元素可能需要出现/消失*   元素应该可能指定最小和最大宽度*   在小型（例如 480x800 移动设备）显示器上会发生什么？*   在大型（例如 2560x1600 显示器）显示器上会发生什么？*

 *……除其他外。没有通用的解决方案，您可以将其应用于每个元素以使流体设计工作。*

# freepascal - Lazarus Pascal - 数据库连接 - 澄清

> ID：13132882
> 
> 赞同：0
> 
> 时间：2012-10-30T04:58:50.970
> 
> 标签：freepascal, lazarus, dbconnection

以下代码来自[此处](http://wiki.freepascal.org/SqlDBHowto)的文档：

```
Program ConnectDB

var AConnection : TSQLConnection;

Procedure CreateConnection;
begin
  AConnection := TIBConnection.Create(nil);
  AConnection.Hostname := 'localhost';
  AConnection.DatabaseName := '/opt/firebird/examples/employee.fdb';
  AConnection.UserName := 'sysdba';
  AConnection.Password := 'masterkey';
end;

begin
  CreateConnection;
  AConnection.Open;
  if Aconnection.Connected then
    writeln('Succesful connect!')
  else
    writeln('This is not possible, because if the connection failed, ' +
            'an exception should be raised, so this code would not ' +
            'be executed');
  AConnection.Close;
  AConnection.Free;
end. 
```

代码的主体对我来说很有意义，但我不知道`TSQLConnection`从哪里来。我也不能使用**CTRL + Space**来自动完成它，这意味着我的程序没有引用它。顺便说一句，我正在尝试连接到 Postgres。

有人可以说明`TSQLConnection`是什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:42:05.820

该`TSQLConnection`对象在`sqldb`单元中定义，是特定连接组件（如`TIBConnection`（interbase、firebird）、`TConnectionName`（mysql）和`TPQConnection`（postgres）的基类。

# vb6 - 这个 VB6 方法在做什么？

> ID：13132884
> 
> 赞同：3
> 
> 时间：2012-10-30T04:59:13.763
> 
> 标签：vb6

我们正在将 VB6 应用程序转换为 C# (4.0)。并且在 VB6 中遇到了一种我们正在努力理解的方法。

```
Public Sub SaveToField(fldAttach As ADODB.Field)
    Dim bData() As Byte
    Dim nSize As Long

    nSize = Len(m_sEmail)
    bData = LngToByteArray(nSize)
    fldAttach.AppendChunk bData

    If nSize > 0 Then
        bData = StringToByteArray(m_sEmail)
        fldAttach.AppendChunk bData
    End If

    nSize = Len(m_sName)
    bData = LngToByteArray(nSize)
    fldAttach.AppendChunk bData
    If nSize > 0 Then
        bData = StringToByteArray(m_sName)
        fldAttach.AppendChunk bData
    End If

    bData = LngToByteArray(m_nContactID)
    fldAttach.AppendChunk bData

End Sub 
```

似乎它正在做一些二进制文件复制类型的事情，但我不太了解。有人可以解释一下以便我们重写吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T05:04:50.783

它将当前类的成员（ 、 等）作为字节数组序列化`m_sEmail`到`m_sName`数据库`fldAttach`字段中。每个数据元素都以它的大小为前缀，这就是为什么`LngToByteArray(nSize)`写出的每条数据都有代码。

在 C# 中，您将使用`MemoryStream`and`BinaryWriter`来完成它的序列化方面，然后将字节数组从内存流写入数据库。就像是：

```
byte[] byData;

using (MemoryStream oStream = new MemoryStream)
{
    using (BinaryWriter oWriter = new BinaryWriter (oStream))
    {
        if (m_sName == null)
        {
            oWriter.Write ((byte) 0); // null string
        }
        else
        {
            oWriter.Write ((byte) 1); // not a null string
            oWriter.Write (m_sName);
        }

        // other fields
    }

    byData = oStream.ToArray (); // get serialized byte array
}

// use byData here 
```

**编辑**：MarkJ 在评论中指出，此代码编写的二进制格式与原始 VB6 代码不同，只有类似的内容。如果现有数据库中包含由 VB6 代码编写的记录，则 C# 代码必须处理这些记录。

有两个主要区别：一个是字符串的输出方式——原始的 VB6 代码不处理空字符串（VB6 中没有这样的概念）。另一个是`BinaryWriter.Write(string)`自动写入一个以长度为前缀的字符串——这可能与VB6代码使用的格式完全相同，VB6代码输出一个长度，然后是字符串字节。C# 可以使用以下逻辑在此处复制 VB6 代码：

```
...

// assuming sStr is not null
byte[] byString = Encoding.Unicode.GetBytes ( sStr );

oWriter.Write ( sStr.Length );
oWriter.Write ( byString ); 
```

C# 端口必须假定没有空字符串，否则必须以某种方式处理这些字符串。

It may be better to write a small utility that goes through the database and updates all records to the new format in which strings have a null marker, a length-prefix and then the string bytes. I'd personally go with this solution since then new code doesn't have to deal with the quirks of and old language.

PS:

Do note that `Long` in VB6 maps to `int` in C#. This is important for handling the length prefix for the VB6 binary format.

Also, here's a link to a question about VB6 strings - this may be useful when porting happens:

[VB6 equivalent of string.IsNullOrEmpty](https://stackoverflow.com/questions/8762345/vb6-equivalent-of-string-isnullorempty)

# android - 我如何为 Eclipse 安装我的应用程序在已经运行的 AVD 中？

> ID：13132888
> 
> 赞同：0
> 
> 时间：2012-10-30T04:59:23.067
> 
> 标签：android, eclipse, avd

发生的情况是，当我运行我的 Android 应用程序时，Eclipse 会打开另一个与我使用的名称相同的 AVD。

难道它不能只在当前的 AVD 中安装我的应用程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T05:05:44.777

只是检查一下。

```
Right click on project -> Run As -> Run Configration -> Target -> Always Prompt to pick device -> apply ->Run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:08:35.527

转到`Windows->Show View->Others->Android->Devices`并检查您的模拟器是否可见。

如果它可见，则只需单击它即可获得焦点，如果它不可见，则从您的设备选项中执行`Reset adb`。

# cakephp - CakePHP 2.1 哈希与集合

> ID：13132889
> 
> 赞同：2
> 
> 时间：2012-10-30T04:59:34.283
> 
> 标签：cakephp, hash

我是 CakePhp 的新手，CakePHP 核心库小节实用程序的文档谈到了哈希和设置，以便更好地使用数组。任何人都可以帮助我知道我们应该使用哈希的相关情况以及我们应该使用集合的相关情况是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T06:39:54.250

如果你比较这两个类的功能，它们中的许多都具有相似的功能。它们主要用于数组操作，并提供一些方便的方法来从典型的“蛋糕”数组中提取数据（确保检查`Hash::extract`或`Set::extract`）。

`Hash`直到 CakePHP 2.2 才引入。 `Set`另一方面，自 CakePHP 1.x 时代以来就一直存在。

所以在 CakePHP 2.1 中，您将使用`Set`. 在 CakePHP 2.2 中，`Set`已弃用，因此您可能应该使用它`Hash`以获得更好的未来兼容性。

请参阅[http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)和[http://book.cakephp.org/2.0/en/core-utility-libraries/set.html](http://book.cakephp.org/2.0/en/core-utility-libraries/set.html)。

引用自 Cake API ( [http://api22.cakephp.org/class/hash](http://api22.cakephp.org/class/hash) )：

> Hash 提供了一个改进的接口，比 Set 更一致和可预测的功能集。虽然它缺乏对伪 Xpath 的参差不齐的支持，但其功能更全面的点表示法在更一致的实现中提供了类似的功能。

# c - 使用 pthread 泄漏内存

> ID：13132890
> 
> 赞同：4
> 
> 时间：2012-10-30T04:59:35.430
> 
> 标签：c, pthreads, valgrind

我正在使用 pthreads 并且根据 valgrind 我正在泄漏内存，就像[使用 pthread_create 时出现 valgrind 内存泄漏错误一样](https://stackoverflow.com/questions/5610677/valgrind-memory-leak-errors-when-using-pthread-create)

最重要的答案是，如果你 pthread_join 所有线程，这个内存将被回收，但它不适合我。

```
pthread_t threads[NUM_THREADS];
...
for (i = 0; i < NUM_THREADS; i++) {
    pthread_create(&threads[i], &attr, Worker, NULL);
}
...
for (i = 0; i < NUM_THREADS; i++) {
    pthread_join(threads[i], NULL);
} 
```

valgrind 输出

```
==2707== HEAP SUMMARY:
==2707==     in use at exit: 954 bytes in 4 blocks
==2707==   total heap usage: 7,717 allocs, 7,713 frees, 79,563 bytes allocated
==2707== 
==2707== 34 bytes in 1 blocks are still reachable in loss record 1 of 4
==2707==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2707==    by 0x400541E: local_strdup (dl-load.c:162)
==2707==    by 0x40085D3: _dl_map_object (dl-load.c:2473)
==2707==    by 0x4012D5C: dl_open_worker (dl-open.c:225)
==2707==    by 0x400ECBE: _dl_catch_error (dl-error.c:178)
==2707==    by 0x4184D40: do_dlopen (dl-libc.c:89)
==2707==    by 0x404CD4B: start_thread (pthread_create.c:308)
==2707==    by 0x414BACD: clone (clone.S:130)
==2707== 
==2707== 34 bytes in 1 blocks are still reachable in loss record 2 of 4
==2707==    at 0x402BE68: malloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2707==    by 0x400B05A: _dl_new_object (dl-object.c:161)
==2707==    by 0x4006437: _dl_map_object_from_fd (dl-load.c:1051)
==2707==    by 0x400839F: _dl_map_object (dl-load.c:2568)
==2707==    by 0x4012D5C: dl_open_worker (dl-open.c:225)
==2707==    by 0x400ECBE: _dl_catch_error (dl-error.c:178)
==2707==    by 0x4184D40: do_dlopen (dl-libc.c:89)
==2707==    by 0x404CD4B: start_thread (pthread_create.c:308)
==2707==    by 0x414BACD: clone (clone.S:130)
==2707== 
==2707== 256 bytes in 1 blocks are still reachable in loss record 3 of 4
==2707==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2707==    by 0x401045C: _dl_check_map_versions (dl-version.c:300)
==2707==    by 0x401336A: dl_open_worker (dl-open.c:268)
==2707==    by 0x400ECBE: _dl_catch_error (dl-error.c:178)
==2707==    by 0x4184D40: do_dlopen (dl-libc.c:89)
==2707==    by 0x404CD4B: start_thread (pthread_create.c:308)
==2707==    by 0x414BACD: clone (clone.S:130)
==2707== 
==2707== 630 bytes in 1 blocks are still reachable in loss record 4 of 4
==2707==    at 0x402A5E6: calloc (in /usr/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2707==    by 0x400AE0F: _dl_new_object (dl-object.c:77)
==2707==    by 0x4006437: _dl_map_object_from_fd (dl-load.c:1051)
==2707==    by 0x400839F: _dl_map_object (dl-load.c:2568)
==2707==    by 0x4012D5C: dl_open_worker (dl-open.c:225)
==2707==    by 0x400ECBE: _dl_catch_error (dl-error.c:178)
==2707==    by 0x4184D40: do_dlopen (dl-libc.c:89)
==2707==    by 0x404CD4B: start_thread (pthread_create.c:308)
==2707==    by 0x414BACD: clone (clone.S:130)
==2707== 
==2707== LEAK SUMMARY:
==2707==    definitely lost: 0 bytes in 0 blocks
==2707==    indirectly lost: 0 bytes in 0 blocks
==2707==      possibly lost: 0 bytes in 0 blocks
==2707==    still reachable: 954 bytes in 4 blocks
==2707==         suppressed: 0 bytes in 0 blocks
==2707== 
==2707== For counts of detected and suppressed errors, rerun with: -v
==2707== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

我做错了什么还是最佳答案不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:07:13.127

这不是真正的泄漏，您可以放心地忽略它。分配的内存块`pthread_create`用于扩展线程堆栈，它没有被释放。该库可能会使用相同的内存区域来将来可能调用`pthread_create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T00:06:31.793

我可能迟到了。正如所指出的，它不能有任何内存泄漏 - 我检查了你所做的它是创建（为线程创建内部内存）和加入线程（自动回收此内存）的标准方式。

但是，您还没有显示 attr 的初始化。

您可以尝试这样做：

```
pthread_create(&threads[i], NULL, Worker, NULL); 
```

我在这里放置了 NULL，而不是 attr 的任何值。pthread 初始化与属性紧密耦合（除非它提供为 NULL）。

# javascript - 如何在不刷新整个页面的情况下每 10 秒刷新一次 Div？

> ID：13132898
> 
> 赞同：0
> 
> 时间：2012-10-30T05:00:27.603
> 
> 标签：javascript, jquery, element, partial-page-refresh

我正在一个不允许任何服务器端脚本的网站平台上工作，所以 jquery 和 javascript 几乎是我必须使用的全部。我正在尝试创建一个脚本来使用该站点，该站点将每 10 秒更新一个包含收件箱消息计数的 div。我已经成功地使 div 每十秒刷新一次，但问题在于页面浏览量。我的脚本正在刷新整个页面并计算页面视图，但我只想刷新一个 div。我的脚本引起的问题的一个例子是，当查看网站上具有页面查看计数器的任何内容（论坛帖子、博客帖子等......）时，页面浏览量会因为脚本刷新而变得疯狂。我对 Javascript 很陌生，所以我不完全确定有办法解决这个问题。

我正在使用的内容如下：

```
 <div id="msgalert" style="display: none"; "width: 100px !important">
<a href=""> You have $inbox_msg_count new messages.</a>
</div> 
```

**$inbox_msg_count**是一个获取消息计数的调用，由站点所在的平台提供。使用时会自动显示消息计数。

然后完成所有工作的脚本是这样的：

```
 <script>
 setInterval(function(facepop){
  var x= document.getElementById("SUI-WelcomeLine-InboxNum");
var z = x.innerText;
 if(x.textContent.length > 0)
$("#msgalert").show('slow');
}, 1000);
facepop();
</script>
<script>
setInterval(function() {  
$("#msgalert").load(location.href+" #msgalert>*","");  
}, 1000); // seconds to wait, miliseconds
</script> 
```

我意识到我可能没有尽力解释这一点，但那是因为我自己对此很困惑。就像我之前提到的，这段代码的功能正是我想要的，但我不希望它刷新整个页面并增加页面浏览量。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-20T15:01:37.837

我认为这可能没有表格就可以完成，而且绝对没有 iframe（*不寒而栗*）..

也许是这样的？

```
$(document).ready(function()
{
  setInterval(function(facepop)
     {
        var x= document.getElementById("SUI-WelcomeLine-InboxNum");
        var z = x.innerText;

        if(x.textContent.length > 0)
           $("#msgalert").show('slow');

        $.ajax({
            type: "POST",
            url: location.href,
            success: function(msg)
             {
                $("#msgalert").html(msg);
             }
        });

     },1000); 
```

目前尚不完全清楚您要做什么（或者可能只是我太累了（现在是午夜......）），但上面的 $.ajax() 调用是我主要的事情会建议。

将这两个函数封装在一个 setInterval() 中会使事情更容易阅读，并且会消除显示**msgalert**元素和“重新加载”它之间的 1 秒间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:04:59.980

您可能会尝试查看*iframe*并将其用作更新/刷新您的内容 (div) 的一种方式。首先设置一个 iframe，并给它一个 id，然后用 JS 抓取对象并对其调用刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:53:17.450

好吧，您的问题似乎有点不同，所以我认为从 div 中提交一个可能会对您有所帮助...

```
$(document).ready(function() 
{
            // bind 'myForm' and provide a simple callback function
               $("#tempForm").ajaxForm({
               url:'../member/uploadTempImage',//serverURL
               type:'post',
               beforeSend:function()
               {
                   alert(" if any operation needed before the ajax call like setting the value or retrieving data from the div ");
               },
               success:function(e){
                alert("this is the response data simply set it inside the div ");
               }
        });
        }); 
```

# c# - 模块“srmlib.dll”已加载，但未找到入口点 DllRegisterServer

> ID：13132900
> 
> 赞同：0
> 
> 时间：2012-10-30T05:00:34.123
> 
> 标签：c#, dll, regsvr32

当我尝试运行使用 srmlib.dll 的代码时，我遇到了一个异常，因为没有注册 srmlib.dll，但是当我尝试注册它（regsvr32）时，我遇到了上述错误。

我在我的注册表中找到了该 Dll 的条目：`HKEY_LOCAL_MACHINE\SOFTWARE\Classes\Installer\Assemblies\C:|Program Files|Reference Assemblies|Microsoft|FSRM|v7.0|srmlib.dll`

我使用 Depends 检查 Dll 并看到 IESHIMS.dll 丢失，但我不确定这与我的问题有什么关系。

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:14:05.767

It turns up that when loading the srmlib.dll it interacts with the server and therefore has to be on active FSRM server.

So what you need to do it quiet simple, just configure your server to run FSRM service as shown on this link: [http://blogs.technet.com/b/josebda/archive/2008/08/20/the-basics-of-windows-server-2008-fsrm-file-server-resource-manager.aspx](http://blogs.technet.com/b/josebda/archive/2008/08/20/the-basics-of-windows-server-2008-fsrm-file-server-resource-manager.aspx)

and run the code on that server. That should solve the problem.

# sql-server - SQL Server 性能 - 架构与多个数据库

> ID：13132903
> 
> 赞同：2
> 
> 时间：2012-10-30T05:00:37.437
> 
> 标签：sql-server, performance, ado.net, sql-server-2012

这纯粹是从性能的角度来看，并且仅适用于 SQL Server。我正在使用 SQL Server 2012。我正在从不同的数据库服务器 (Ctree) 迁移。数据库从不到 100mbs 到大约 2-3GBs，总共五个。有很多桌子 - 总共有 400 多张桌子。

仅使用单个数据库和多个模式或多个数据库在性能方面会更好吗？现有的逻辑是有多个​​数据库，并且有 7 个不同的应用程序（C# - ADO.NET）使用这些数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:48:28.057

我非常怀疑，如果这些数据库最终都运行在同一台物理服务器机器上，那么将其拆分为多个数据库是否会带来显着的性能优势。

但是：如果您确实将其拆分为几个单独的数据库，您将无法使用跨数据库边界的外键约束来建立引用完整性 - 因此这可能是一个缺点和负面点。

# html - HTML setinterval 方法

> ID：13132904
> 
> 赞同：1
> 
> 时间：2012-10-30T05:00:41.127
> 
> 标签：html, setinterval, browser-refresh

我希望如果 'attendance_20121029.xml' 文件被改变，网络浏览器会自动改变。所以我使用了 setinterval 方法。但是如果我更改文件，Web 浏览器不会更改。如果我再次执行 HTML 文件，Web 浏览器就会改变。如果有人有什么好主意，请发表评论。

```
<html>
  <head>
  </head>
  <body onLoad="tid=setInterval('refresh()',1000);">
    <script language="JavaScript">
    function refresh()
    {
        var xmlDoc=null;
        if (window.ActiveXObject)
        {
            xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
        }
        else if (document.implementation.createDocument)
        {
            xmlDoc=document.implementation.createDocument("","",null);
        }
        else
        {
            alert('fail');
        }

        if (xmlDoc!=null)
        {
            xmlDoc.async=false;
            xmlDoc.load("studentlist.xml");
        }
        var xmlDoc2=null;
        if (window.ActiveXObject)
        {
            xmlDoc2=new ActiveXObject("Microsoft.XMLDOM");
        }
        else if (document.implementation.createDocument)
        {
            xmlDoc2=document.implementation.createDocument("","",null);
        }
        else
        {
            alert('fail');
        }

        if (xmlDoc2!=null)
        {
            xmlDoc2.async=false;
            xmlDoc2.load("attendance_20121029.xml"); 
        }

        document.write("<table border='1' cellspacing='4' cellpadding='4'>");
        document.write("<tr><th>");
        document.write("Student Name");
        document.write("</th>");
        document.write("<th>");
        document.write("Attendece");
        document.write("</th></tr>");
        for (i=0 ; i<xmlDoc.childNodes[1].childNodes.length ; i++)
        {
          document.write("<tr>");
          document.write("<td align='center'>");
          document.write(xmlDoc.childNodes[1].childNodes[i].text);
          document.write("</td>");
          document.write("<td align='center'>");
          for (k=0 ; k<xmlDoc2.childNodes[1].childNodes.length ; k++)
          {
            if(xmlDoc.childNodes[1].childNodes[i].text == xmlDoc2.childNodes[1].childNodes[k].tagName)
            {
                document.write("O");
                break;
            }
          }
          if (k == xmlDoc2.childNodes[1].childNodes.length )
          {
            document.write("X");
          }

          document.write("</td>");
          document.write("</tr>");
        }
        document.write("</table>");
        document.close();
    }

</script>

  </body>
</html> 
```

# windows - Windows 8 Metro 风格桌面应用程序？

> ID：13132906
> 
> 赞同：3
> 
> 时间：2012-10-30T05:00:56.633
> 
> 标签：windows, windows-8, microsoft-metro

Windows 8 发布了！我想创建一个 Metro 风格的桌面应用程序，比如 GitHub-for-Windows( [http://windows.github.com/](http://windows.github.com/) )。我该如何开发这种风格？WPF、WinForm 或其他。
Microsoft 是否在 Visual Studio 2012 中为 Desktop Metro 应用程序提供解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:27:59.563

看看[Mahapps.Metro](http://mahapps.com/MahApps.Metro/) 它正是你想要的。

我用过它，我发现它很容易进入。

**编辑**

您还可以查看最近发布[的 WPF 现代 UI](http://mui.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:08:31.180

我不确定这是否是正确的论坛。但无论如何，你可以[看看这个](http://www.microsoft.com/visualstudio/eng/products/visual-studio-express-for-windows-8)

Microsoft 确实为 Windows 8 提供了 Visual Studio Express。

# php - 如何从 jQuery 生成的表中删除特定行？

> ID：13132911
> 
> 赞同：1
> 
> 时间：2012-10-30T05:01:12.530
> 
> 标签：php, jquery, html, html-table, tablerow

这是我生成表格的代码。我通过 jQuery 和 ajax 调用它。

```
echo '<table class="database-items table table-bordered">
<tbody>';
  foreach($stmt as $item){
  echo '
  <tr>
    <td>'.$item['title'].'</td>
    <td>
      <img src="wp-content/themes/twentyeleven-child/'.$item['image_path'].'" alt="">
    </td>
    <td>'.$item['asin'].'</td>
    <td>'.$item['weight'].'</td>
    <td>'.$item['dimension'].'</td>
    <td>'.$item['category'].'</td>
    <td>
      <button type="button" class="btn btnDeleteitem" alt="'.$item['asin'].'">
        <i class="icon-remove"></i>
      </button>
    </td>
  </tr>';
  }
  echo '</tbody>
  </table>'; 
```

如果我单击`btnDeleteItem button`，我想删除该行，值将基于`td`它`$item['asin']`

这是我的 btnDeleteItem 的 jquery，但我不知道如何在里面放什么

```
$('.btnDeleteitem').live('click', function() {
  //what to put here?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:03:27.357

找到按钮[最近](http://api.jquery.com/closest/) `tr`的祖先并将其删除

```
$('.btnDeleteitem').live('click', function() {
     $(this).closest('tr').remove();
} 
```

自[`.live()`](http://api.jquery.com/live/)jQuery 1.7 起已弃用，[`.on()`](http://api.jquery.com/on/)用于事件委托

```
$(document/* or closest existing ancestor of .btnDeleteitem*/).on('click', '.btnDeleteitem', function() {
     $(this).closest('tr').remove();
} 
```

# php - 在 Android 中发送 HTTP 请求

> ID：13132913
> 
> 赞同：0
> 
> 时间：2012-10-30T05:01:29.317
> 
> 标签：php, android, web-services

我正在向服务器中的 PHP 站点发送 HTTP 请求。但是，当我发送请求时，手机卡住了几秒钟。有时它会花费很长时间来发送和接收请求的结果。

如何解决这个问题。请帮助我找到解决方案。谢谢。

这是我试过的代码...

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:05:15.663

要发出 http 请求，您必须使用 AsyncTask。这将在后台运行。

请参阅下面的链接以供参考

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T06:31:57.100

像这样尝试，您可以使用：`HttpClient.exeucute(httpPost)`并获取 HttpResponse

这对我来说很完美。

```
DefaultHttpClient client = new DefaultHttpClient();

    HttpPost post = new HttpPost(url);

    List<NameValuePair> params = new ArrayList<NameValuePair>();

    pairs.add(new BasicNameValuePair("email", stringeditemail));

    UrlEncodedFormEntity formEntity = null;
    try {
        formEntity = new UrlEncodedFormEntity(params);

    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    post.setEntity(formEntity);

    try {

        HttpResponse response = client.execute(post);
        int statusCode = response.getStatusLine().getStatusCode();
        if (statusCode == HttpStatus.SC_OK) {
            HttpEntity entity = response.getEntity();
            InputStream is = entity.getContent();
            return iStream_to_String(is);
        } else {
            return "Hello This is status ==> :"
                    + String.valueOf(statusCode);
        }
    } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return null;

} 
```

并创建将 stringbuilder 转换为 string 的方法

```
 public static String iStream_to_String(InputStream is1) {
    BufferedReader rd = new BufferedReader(new InputStreamReader(is1), 4096);
    String line;
    StringBuilder sb = new StringBuilder();
    try {
        while ((line = rd.readLine()) != null) {
            sb.append(line);
        }
        rd.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    String contentOfMyInputStream = sb.toString();
    return contentOfMyInputStream;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:06:19.763

使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)从 UI 线程发出 http 请求。将您的代码更改为：

```
private class LongOperation extends AsyncTask<String, Void, String> {

          @Override
          protected Void doInBackground(String... params) {

              //Call your post method here
                  postData();

                  return null;
          }      

          @Override
          protected void onPostExecute(String result) {
              // get result after operation complete
          }

          @Override
          protected void onPreExecute() {
          }

          @Override
          protected void onProgressUpdate(Void... values) {
          }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T05:08:54.300

您应该在网络线程之外的其他线程中执行网络操作，请参阅处理程序和异步任务。

[http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask](http://developer.android.com/training/basics/network-ops/connecting.html#AsyncTask)

[http://developerlife.com/tutorials/?p=290](http://developerlife.com/tutorials/?p=290)

# objective-c - Core Data 在运行时添加实体

> ID：13132914
> 
> 赞同：0
> 
> 时间：2012-10-30T05:01:30.537
> 
> 标签：objective-c, core-data

我正在重写这个问题，以帮助澄清和摆脱我写的很多实际上没有帮助的代码。

我将 .xcdatamodel 用于我的初始架构，但我需要在运行时将实体添加到我的架构中，因此我需要添加一个新的 NSManagedObjectModel 并复制现有实体，然后添加新实体。

如果我先创建一个新的 NSPersistantStore，然后让我的 NSMigrationManager 迁移，我会收到一条错误消息，说明它无法将源模型移动到目标路径，因为文件已经存在。

如果我只是要求我的 NSMigrationManager 进行迁移，那么它只会崩溃而没有任何错误代码或调试器中的任何内容。

```
NSMappingModel *mappingModel = [NSMappingModel inferredMappingModelForSourceModel:originalModel destinationModel:newModel error:&error];
NSMigrationManager *manager = [[NSMigrationManager alloc] initWithSourceModel:originalModel destinationModel:newModel];

if (![manager migrateStoreFromURL:[originalStore URL]
                             type:NSSQLiteStoreType
                          options:[self autoMigrationOptions]
                 withMappingModel:mappingModel
                 toDestinationURL:[NSPersistentStore MR_urlForStoreName:[self nextStoreName]]
                  destinationType:NSSQLiteStoreType
               destinationOptions:[self autoMigrationOptions]
                            error:&error])
{
    return NO;
} 
```

URL 都很好，当我将映射模型登录到控制台时，它看起来很好，管理器存在等等。在这种情况下，我还没有创建 NSPersistantStore，但是根据 NSMigrationManager 类引用，如果商店不存在然后会自动创建一个目标 URL。

有人有线索吗？

# javascript - 从链接列表中，单击时，将单击的链接设为第一个

> ID：13132915
> 
> 赞同：0
> 
> 时间：2012-10-30T05:01:49.397
> 
> 标签：javascript, jquery

我有一个下拉菜单，显示不同的城市。这是下拉菜单的代码：

```
<ul class="nav-poplist">
<li class="nav_divider_before"><a onclick="set_city(1);" href="javascript:">Bangalore</a></li>                    
<li><a onclick="set_city(3);" href="javascript:">Hyderabad</a></li>            
</ul> 
```

所以，目前的顺序是：
**班加罗尔**
**海得拉巴**
所以，我想做的是，当用户点击海得拉巴时，海得拉巴应该排在首位，班加罗尔（以及未来可能存在的其他城市）应该去下来，例如。假设用户点击Hyderabad，那么顺序应该是
**Hyderabad**
**Bangalore**
ie，被点击的链接应该成为第一个元素，其余的应该下。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:05:06.650

您应该能够通过将以下行添加到您的`set_city()`函数来做到这一点：

```
$(this).parent().prependTo($(this).parent().parent()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:06:42.490

您可以使用`prepend`方法：

```
$('.nav-poplist li').click(function(){
   $('.nav-poplist').prepend(this)
}) 
```

[http://jsfiddle.net/SQQY7/](http://jsfiddle.net/SQQY7/)

# dojo - dojo/domReady 做什么？

> ID：13132916
> 
> 赞同：4
> 
> 时间：2012-10-30T05:02:04.123
> 
> 标签：dojo

什么是 dojo/domReady 插件？dojo/domReady 下有哪些方法？

```
 require(["dojo/_base/fx", "dojo/fx", "dojo/on",
 "dojo/dom", "dojo/domReady!"], function(baseFx, fx, on, dom) { 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-30T06:44:44.957

*   require() 在 DOM 完成加载之前不会继续
*   它是和插件，它不提供额外的方法
*   [http://dojotoolkit.org/reference-guide/1.8/dojo/domReady.html](http://dojotoolkit.org/reference-guide/1.8/dojo/domReady.html)
*   您也可能对 dojo/ready 感兴趣[http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html#dojo-ready](http://dojotoolkit.org/reference-guide/1.8/dojo/ready.html#dojo-ready)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-30T17:12:10.220

当您添加“dojo/domReady！”时 在您的 require() 模块块中，您指示 Dojo 等待您传递的回调，直到 DOM 完成加载。所以你知道当`DOMContentLoaded`事件触发时，所有的 HTML 都完成了。

两者之间有一个微妙的不同`"dojo/ready"`， `"dojo/domReady!"`“dojo/ready”允许您向它传递一个函数回调，该回调只有在所有其他 require 调用都已加载后才会被调用。这对于依赖于已加载的其他模块的模块非常有用。

还有“！” 只是告诉你它是`dojo/domReady`一个自定义插件，而不是一个特定的插件。

# c++ - 使用带有字符“-”的 SQlite3 C 库的全文搜索不起作用

> ID：13132921
> 
> 赞同：2
> 
> 时间：2012-10-30T05:02:51.503
> 
> 标签：c++, sqlite, wxwidgets

我有一个使用 FTS3 的 SQLite3 数据库。它在 SQLite3 命令行工具中运行良好，但是在使用 C 库时（使用 wxSQLite3，但我猜这应该没有区别），它不适用于包含“-”字符的查询，例如 SELECT * From Table WHERE columnx MATCH 'text1 -text2 '。但是，这在命令行版本上运行良好。

我不知道为什么它不起作用。我尝试过的所有其他 FTS 匹配条件都可以正常工作。

**注意：**我已将 wxWidgets 添加到标签而不是 wxSQLite3，因为我无法创建新标签

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:25:45.837

显然，您的数据库在标准/增强查询语法方面的配置不同；试试`WHERE columnx MATCH 'text1 NOT text2'`。

要启用[增强的查询语法](http://www.sqlite.org/fts3.html#section_2)，请使用[SQLITE_ENABLE_FTS3_PARENTHESIS](http://www.sqlite.org/compile.html#enable_fts3_parenthesis)宏进行编译。

# spring - Spring Security taglib sec：授权与角色层次结构不起作用

> ID：13132922
> 
> 赞同：2
> 
> 时间：2012-10-30T05:02:53.547
> 
> 标签：spring, spring-security, authorization, roles, taglib

我无法让 sec:authorize hasRole() 使用角色层次结构。如果我有一个角色 ROLE_BOSS 的用户是 ROLE_WORKER 的父级，那么由于某种原因是错误的。但是，在我的服务类中，@PreAuthorize("hasRole('ROLE_WORKER')") 确实有效。我假设他们都使用相同的评估器，那么为什么 taglib 不起作用？谢谢您的帮助。

JSP：

```
<sec:authorize access="hasRole('ROLE_BOSS')">
  <p>This shows up.</p>
</sec:authorize>
<sec:authorize access="hasRole('ROLE_WORKER')">
  <p>This does not show up, but should.</p>
</sec:authorize> 
```

-config.xml 安全性：

```
<bean id="expressionHandler" class="org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler">
  <property name="permissionEvaluator" ref="permissionEvaluator"/>
  <property name="roleHierarchy" ref="roleHierarchy"/>
</bean>

<sec:global-method-security pre-post-annotations="enabled">
  <sec:expression-handler ref="expressionHandler"/>
</sec:global-method-security>

<bean id="permissionEvaluator" class="com.myapp.security.MyPermissionEvaluator">
  <constructor-arg index="0">
    <map key-type="java.lang.String" value-type="com.myapp.security.Permission">
      <entry key="contractReadAccess" value-ref="contractReadPermission"/>
      <entry key="contractWriteAccess" value-ref="contractWritePermission"/>
    </map>
  </constructor-arg>
</bean>

<bean id="contractReadPermission" class="com.myapp.security.ContractReadPermission"/>
<bean id="contractWritePermission" class="com.myapp.security.ContractWritePermission"/>

<sec:http use-expressions="true" access-decision-manager-ref="accessDecisionManager">
  <sec:intercept-url pattern="/worker/**" access="isAuthenticated()" requires-channel="https"/>
  <sec:intercept-url pattern="/boss/**" access="hasRole('ROLE_BOSS')" requires-channel="https"/>

  <sec:form-login login-page="/login" authentication-failure-url="/login?login_error=1" authentication-success-handler-ref="successHandler"/>
  <sec:logout logout-url="/logout" logout-success-url="/login" invalidate-session="true"/>
<sec:remember-me/>
</sec:http>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
  <constructor-arg>
    <list>
      <ref bean="roleVoter" />
      <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
        <property name="expressionHandler">
          <bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
            <property name="roleHierarchy" ref="roleHierarchy"/>
          </bean>
        </property>
      </bean>
      <bean class="org.springframework.security.access.vote.AuthenticatedVoter"/>
    </list>
  </constructor-arg>
</bean>

<bean id="roleVoter" class="org.springframework.security.access.vote.RoleHierarchyVoter">
  <constructor-arg ref="roleHierarchy" />
</bean>

<bean id="roleHierarchy" class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl">
  <property name="hierarchy">
    <value>
      ROLE_BOSS > ROLE_WORKER
    </value>
  </property>
</bean>

<sec:authentication-manager alias="authenticationManager">
  <sec:authentication-provider user-service-ref="myUserDetailsService"/>
</sec:authentication-manager> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-11-10T22:01:57.233

对于像我这样使用 Java Config 的人。这是一个非常简单的解决方案，只需在扩展类中添加以下代码`WebSecurityConfigurerAdapter`：

```
@Bean
    public RoleHierarchyVoter roleVoter() {
        return new RoleHierarchyVoter(roleHierarchy());
    }

    @Bean
    public RoleHierarchy roleHierarchy() {
        RoleHierarchyImpl roleHierarchy = new RoleHierarchyImpl();
        roleHierarchy.setHierarchy("ROLE_BOSS > ROLE_WORKER");
        return roleHierarchy;
    }

    private SecurityExpressionHandler<FilterInvocation> webExpressionHandler() {
        DefaultWebSecurityExpressionHandler defaultWebSecurityExpressionHandler = new DefaultWebSecurityExpressionHandler();
        defaultWebSecurityExpressionHandler.setRoleHierarchy(roleHierarchy());
        return defaultWebSecurityExpressionHandler;
    }

    @Override
    public void init(WebSecurity web) throws Exception {
        web.expressionHandler(webExpressionHandler());
        super.init(web);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:29:15.013

很奇怪，我认为这是不正确的，但它似乎有效。我开始深入研究 Spring 源代码，我认为我可以通过将 DefaultWebSecurityExpressionHandler 从 accessDecisionManager 中取出并将其放在我所有安全配置的最顶部来使其工作。所以在我的 -config.xml 顶部我有这个：

```
<bean id="webExpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
  <property name="permissionEvaluator" ref="permissionEvaluator"/>
  <property name="roleHierarchy" ref="roleHierarchy"/>
</bean> 
```

我的 accessDecisionManager 现在是：

```
<bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
  <constructor-arg>
    <list>
      <ref bean="roleVoter" />
      <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
        <property name="expressionHandler" ref="webExpressionHandler"/>
      </bean>
      <bean class="org.springframework.security.access.vote.AuthenticatedVoter"/>
    </list>
  </constructor-arg>
</bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T10:56:54.337

你有没有尝试过？

```
<%@ taglib prefix='sec' uri='http://www.springframework.org/security/tags' %> 

<sec:authorize ifAnyGranted='ROLE_BOSS,ROLE_WORKER'> 
  <h1>ROLE_BOSS and ROLE_WORKER can see this</h1><br/> 
</sec:authorize> 
```

或者

```
<sec:authorize access="hasAnyRole('ROLE_BOSS','ROLE_WORKER')">
  <h1>ROLE_BOSS and ROLE_WORKER can see this</h1><br/> 
</sec:authorize> 
```

# algorithm - 双散列给出一个大于表大小的数字

> ID：13132924
> 
> 赞同：0
> 
> 时间：2012-10-30T05:03:01.643
> 
> 标签：algorithm, hash, double-hashing

我有一个大小为 11 的哈希表，以数组的形式实现。我正在尝试使用双哈希技术；我已经完成了我的大部分数字。我的哈希函数如下：

```
h1 = key mod 11
h2 = 3*key mod 4 
```

这给了我`h(k,i) = k mod 11 + i(k * 3 mod 4)`i = 0, 1, 2, 3, ...

我已经填充了插槽 0、1、4、8、9 和 10。我正在尝试插入 19。这是我对 19 进行哈希处理的结果：

```
1st time: 8  <-- collision 
2nd time: 9  <-- collision 
3rd time: 10 <-- collision 
4th time: 11 <--- well there is no index 11 table ends with index 10 
```

我该怎么办？

另外，当他们说“让表有 11 个插槽”时，这是否意味着哈希表有从 0 到 10 的可用插槽？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:15:12.490

此更改将修复错误的哈希表索引计算：

```
h(k,i) = (key + i*(key*3 mod 4)) mod 11 
```

# c# - 如何使用c#将文件夹从一台服务器复制到另一台具有不同域的服务器

> ID：13132926
> 
> 赞同：1
> 
> 时间：2012-10-30T05:03:17.273
> 
> 标签：c#, .net

我需要将许多文件夹从服务器复制到另一台服务器。服务器位于不同的域中。应该使用tcp还是ftp？我有登录凭据来访问服务器。是否可以使用类似的东西

```
string sourceFile = @"ServerIP\C:\Users\Public\public\test.txt";
string destinationFile = @"Localhost\C:\Users\Public\private\test.txt";

// To move a file or folder to a new location:
System.IO.File.Copy(sourceFile, destinationFile); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:15:27.833

您可以使用下面的代码片段来掌握这样做的想法。您可以使用[LogonUser](http://msdn.microsoft.com/en-us/library/aa378184.aspx)来模拟本地组，而不仅仅是域帐户。

要复制目录/文件夹中的所有内容（文件），显然您可以使用命名空间`Directory`内部的类`System.IO`来获取所有文件信息。

代码：

```
using Microsoft.VisualBasic;
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Security.Permissions;

public class Form1
{
    [DllImport("advapi32.DLL", SetLastError = true)]
    public static extern int LogonUser(string lpszUsername, string lpszDomain, string lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);
    private void Button1_Click(System.Object sender, System.EventArgs e)
    {
        IntPtr admin_token = default(IntPtr);
        WindowsIdentity wid_current = WindowsIdentity.GetCurrent();
        WindowsIdentity wid_admin = null;
        WindowsImpersonationContext wic = null;
        try {
            MessageBox.Show("Copying file...");
            if (LogonUser("Local Admin name", "Local computer name", "pwd", 9, 0, ref admin_token) != 0) {
                wid_admin = new WindowsIdentity(admin_token);
                wic = wid_admin.Impersonate();
                System.IO.File.Copy("C:\\right.bmp", "\\\\157.60.113.28\\testnew\\right.bmp", true);
                MessageBox.Show("Copy succeeded");
            } else {
                MessageBox.Show("Copy Failed");
            }
        } catch (System.Exception se) {
            int ret = Marshal.GetLastWin32Error();
            MessageBox.Show(ret.ToString(), "Error code: " + ret.ToString());
            MessageBox.Show(se.Message);
        } finally {
            if (wic != null) {
                wic.Undo();
            }
        }
    }
} 
```

参考：[使用本地帐户模拟](http://social.msdn.microsoft.com/forums/en-US/vblanguage/thread/b9906632-5cad-4972-9103-3e864a71a0c2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-30T05:12:05.680

> 是否可以使用类似的东西？

你不应该自己发现吗？

为了

> 我需要将许多文件夹从服务器复制到另一台服务器

要使用 FTP，您需要使用`System.Net.FtpWebRequest`and `System.Net.WebRequestMethods.Ftp`,

看：

[http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.aspx)，

[http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.aspx](http://msdn.microsoft.com/en-us/library/system.net.webrequestmethods.ftp.aspx)。

谷歌上的简单搜索也提供了许多很好的方法，[https://www.google.co.in/search?q=copy +files+from+one+server+to+another+using+asp.net](https://www.google.co.in/search?q=copy+files+from+one+server+to+another+using+asp.net)

请尝试其中一种，当您在实施它们时遇到问题时，您是否应该来这里问“那个”问题。不是反过来。

# android - 使用 Hudson 和 Antscript 使用 svn 构建 Android 自动化

> ID：13132936
> 
> 赞同：0
> 
> 时间：2012-10-30T05:04:20.677
> 
> 标签：android

我为windows下载了Hudson服务器，我使用了**java -jar hudson.war**，一旦控制台打开，服务器通过点击**http://localhost:8080**成功启动我手动配置了java和ant脚本的路径，现在问题是我dono 如何将我的 ant 脚本写到 hudson 的控制台上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T05:13:29.340

您无需在 hudson 控制台中编写 ant 脚本。您的 ant 脚本将成为存储库的一部分，当您配置作业时，您要求 hudson 签出您的存储库，然后运行 ​​ant 任务。

然后 hudson 将在您的存储库中查找 build.xml 文件，并启动该文件。

# mysql - 当我用尽 bigint 生成的密钥时会发生什么？如何处理？

> ID：13132939
> 
> 赞同：20
> 
> 时间：2012-10-30T05:05:05.600
> 
> 标签：mysql, sql, postgresql

我无法为自己想象一个好的答案，所以我想在这里问它。在我的脑海中，我总是想知道如果`AUTO INCREMENT PRIMARY ID`我的**MySQL**表中的列耗尽会发生什么？

例如，我有一个有两列的表。**ID** ( `auto increment, primary, BIGINT unsigned`) 和**DESC** ( ) `VARCHAR 255`。我知道肯定`BIGINT`很多，但它可以达到它的极限。*如果***ID**达到其限制，我该如何处理？我需要另一台服务器吗？如果那么我该如何同步它？这是正确的方法吗？有什么见解的朋友。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-30T05:14:57.847

它不会用完。

最大 bigint 是 9223372036854775807 。以 1000 次插入/秒的速度，这相当于 106751991167 天。如果我的数学是对的，将近 3 亿年。

即使你将它分割出来，使用偏移量，比如 100 个服务器每个都有一个专用的值子范围 ( `x*100+0`... `x*100+99`)，你也不会用完。10,000 台机器每秒执行 100,000 次插入可能会在大约三个世纪内让您到达那里。当然，这比数百年来稳定的纽约证券交易所每秒的交易量还要多……

如果您*确实*超过了生成键的数据类型大小限制，新插入将失败。在 PostgreSQL 中（因为你已经标记了这个 PostgreSQL），`bigserial`你会看到：

```
CREATE TABLE bigserialtest ( id bigserial primary key, dummy text );
SELECT setval('bigserialtest_id_seq', 9223372036854775807);
INSERT INTO bigserialtest ( dummy ) VALUES ('spam');

ERROR:  nextval: reached maximum value of sequence "bigserialtest_id_seq" (9223372036854775807) 
```

对于普通用户`serial`，您会收到不同的错误，因为`sequence`它始终是 64 位的，因此您必须将密钥类型更改为`bigint`或收到如下错误：

```
regress=# SELECT setval('serialtest_id_seq', 2147483647);
regress=# INSERT INTO serialtest (dummy) VALUES ('ham');
ERROR:  integer out of range 
```

如果您真的相信您的网站可能会达到应用程序中 bigint 的限制，您可以使用复合键 - 例如 (shard_id, subkey) - 或 uuid 键。

试图在新应用程序中处理这个问题是过早的优化。说真的，从一个新的应用程序到那种增长，你会使用相同的模式吗？还是数据库引擎？甚至代码库？

您不妨担心 GUID 键控系统中的 GUID 冲突。毕竟，生日悖论意味着[GUID 冲突的可能性比你想象](https://stackoverflow.com/questions/184869/are-guid-collisions-possible)的要大 - 难以置信地，非常不可能。

此外，正如 Barry Brown 在评论中指出的那样，您永远不会存储那么多数据。这只是对交易率极高的高流失率表的关注。在这些表中，应用程序只需要能够应对键被重置为零、条目重新编号或其他应对策略。不过，老实说，即使是高流量的消息队列表也不会达到顶峰。

看：

*   [这个 IBM 关于串行耗尽的信息](http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp?topic=%2Fcom.ibm.ddi.doc%2Fids_ddi_194.htm)
*   [最近关于此主题的博客文章](http://improve.dk/archive/2012/02/20/stop-worrying-about-exhausting-bigints.aspx)

说真的，即使您构建了下一个 Gootwitfacegram，在您第三次重写应用程序的使用日期之前，这也不会成为问题......

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-30T05:33:06.860

大 int 是**2^63**或大约**10^19**。数据库基准在几年前曾经风靡一时，使用标准化的[TPC-C 基准](http://www.tpc.org/tpcc/results/tpcc_results.asp?print=false&orderby=tpm&sortby=desc)

如您所见，关系数据库的最快关系得分为**30,000,000**（每分钟 3x10^7 个事务）。请记住，配置文件将包含大量读取，并且同一系统不太可能每分钟写入**30,000,000行。**

假设是这样，您将需要大约**3x10^11**分钟来耗尽 BigInt。在我们理解的时间测量中，这大约是**600 万年**

```
ERROR 1467 (HY000): Failed to read auto-increment value from storage engine 
```

如果您确实用完了，您将收到上述错误消息，然后转到 Guid 获取主键。 **2^128**，[地球上的数字位](http://en.wikipedia.org/wiki/128-bit)比那个数字少（万亿倍）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-30T05:16:01.697

大型数据集不使用递增数字作为键。不仅因为你有一个隐含的上限，而且当你有多个服务器时也会产生问题；因为您冒着拥有重复主键的风险，因为它们是增量的。

当你在 MySQL 上达到这个限制时，你会得到一个像这样的神秘错误：

```
Error: Duplicate entry '0' for key 1 
```

最好使用您生成的唯一 ID 或其他序列。MySQL 不支持序列，但 postgresql 支持。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-30T05:17:19.300

一旦 Autoincrement 达到字段大小的限制，INSERT 将生成错误。

实际上，您将收到以下类型的错误：

```
ERROR 1467 (HY000): Failed to read auto-increment value from storage engine 
```

欲了解更多信息，请访问：

[http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)

# android - 如何在android中发送html内容的邮件？

> ID：13132941
> 
> 赞同：-1
> 
> 时间：2012-10-30T05:05:08.493
> 
> 标签：android, email

这是我的 html 内容，我有一个按钮，单击按钮我必须发送邮件，但邮件的内容（如 body 、subject ）将从 html 内容中获取。

html内容：

```
@"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">
<html xmlns=\"http://www.w3.org/1999/xhtml\">
<head>
<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />
<title>Untitled Document</title>
<style>.reservation { }.reservation table {}.reservation tr { background-color: #F6F2E7; }.reservation th { font-family: Arial, Helvetica, sans-serif; font-size: 12px; font-weight: bold; color: #F6F2E7; background-color: #302824; padding: 5px; text-align:left; }.reservation td { padding-top: 3px; padding-right: 5px; padding-bottom: 3px; padding-left: 5px; border-bottom: 1px solid #DFDBD1; color: #443D37; font-family: Arial, Helvetica, sans-serif; font-size: 12px; }.reservation td strong { font-weight: bold; padding-right:10px; }.reservation td span { font-weight: normal; }
</style>
</head>
<body>
<div style=\"width:300px; margin:auto;\"><div class=\"reservation\">  
<table width=\"300px\" cellpadding=\"0\" cellspacing=\"0\">  
<tr>   <th width=\"130px\">Reservation </th>  
<th> </th> </tr>   
<tr> <td>     <strong>%@ :</strong>  </td> 
<td>  <span>%@</span>        </td>    
</tr>  <tr> <td>     <strong>%@ :</strong>  </td> 
<td>  <span>%@</span>        </td>    </tr>   
<tr> <td>     <strong>%@ :</strong>  </td> <td> <span>%@</span>        </td>    </tr>    
<tr> <td>     <strong>%@ :</strong> </td> 
<td>   <span>%@</span>        </td>    </tr>  
</table>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:17:38.870

据我所知，android 不直接支持 HTML 内容的此类 CSS 标签。它支持带有 phonegap 的 CSS。

它只支持几个 HTML 标签，它们是：

```
<a> (supports attribute "href")
<b>
<big>
<blockquote>
<br>
<cite>
<dfn>
<div>
<em>
<font> (supports attributes "color" and "face")
<i>
<img> (supports attribute "src". Note: you have to include an ImageGetter to handle retrieving a Drawable for this tag)
<p>
<small>
<strong>
<sub>
<sup>
<tt>
<u> 
```

要在代码中使用 HTML，您可以使用`Html.fromHtml("html data")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:09:45.797

在邮件中发送 Html 内容你必须使用`Html.fromHtml("html data").`

这里的示例代码..

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND_MULTIPLE);
        emailIntent.setType("text/html");
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, 
            emailTo);
        emailIntent.putExtra(android.content.Intent.EXTRA_CC, 
                emailCc);
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, 
                Html.fromHtml(subject));
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, 
                Html.fromHtml(emailText));

   this.startActivity(Intent.createChooser(emailIntent, "email")); 
```

AppMobiGurmeet 说得对。Android 只支持一些 Tag..

有关更多信息，请查看以下链接..

[链接1](http://daniel-codes.blogspot.in/2011/04/html-in-textviews.html)

[链接2](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T06:26:47.880

使用 HTML 标记并分配到字符串中。并`Html.fromHtml(body)`用于访问。

```
String body= first_name
                    + " "
                    + last_name
                    + " sent a message using ."
                    + "<br><br><br>Submitted on :" + date + " "+ time + "<br>"
                    + "Submitted by user:"+ first_name + " " + last_name + "<br>"
                    + "Address :" + Address + "<br>"
                    + "Contact No :"+ mobile + "<br>"

                    + "Comments :" + comment;

            Intent email = new Intent(Intent.ACTION_SEND);
            email.putExtra(Intent.EXTRA_EMAIL,
                    new String[] { "emailID"});

            email.putExtra(Intent.EXTRA_SUBJECT,
                    "Form submission from:");
            email.putExtra(Intent.EXTRA_TEXT,Html.fromHtml(body));
            email.setType("message/rfc822");

            startActivityForResult(
                    Intent.createChooser(email, "Choose an Email client :"),
                    MY_REQUEST_CODE); 
```

# java - java - 用于 pmi 的网络搜索 api

> ID：13132947
> 
> 赞同：4
> 
> 时间：2012-10-30T05:05:37.493
> 
> 标签：java, web-services, search, web, search-engine

我希望搜索网络以获取**查询的点击数**，这将允许我找到[pmi](http://en.wikipedia.org/wiki/Pointwise_mutual_information)

有没有好的 java api 实现可以让我免费搜索网络？我想使用“AND”、“NOT”、“OR”、“NEAR”等搜索运算符。一些搜索引擎[不是 java apis]，有一些查询限制，我发现是：[EntireWeb](http://www.entireweb.com/search_api/)、[Faroo](http://www.faroo.com/hp/api/api.html)、[Blekko](http://help.blekko.com/)

[Apache Nutch](http://nutch.apache.org/index.html)怎么样：它可以用于此目的吗？据我了解，它是一个爬虫，它创建了一组索引的页面，可以高效地查询。

如果您对此有任何想法，请提出建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T07:57:00.627

我推荐[jsoup](http://jsoup.org/)

[尝试食谱](http://jsoup.org/cookbook/)中的教程

# facebook - 将一页上的多个视频分享到 Facebook 墙上

> ID：13132954
> 
> 赞同：2
> 
> 时间：2012-10-30T05:05:57.033
> 
> 标签：facebook, video, share

我有一个网站，其中一个页面上有多个视频，并且喜欢添加一个按钮以将每个视频分别分享到 Facebook 墙上，并能够在 Facebook 时间轴内播放每个视频。

我知道如果页面上只有一个视频要分享，只需在页面顶部添加 Open Graph 标签即可实现这一目标。但这显然对我不起作用，因为页面上有多个视频，每个视频上都有分享到 facebook 的按钮。

有谁知道我该怎么做才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T04:25:40.833

很简单，将 Facebook/Twitter/Google/etc 按钮放在单独的页面上，然后使用 iframe 将其放在主页上。您可以使用 php 自动创建“共享”页面。

我是为一个网站做的，你可以在这里看到它 - [http://www.lftv.com.br/index.php](http://www.lftv.com.br/index.php)

# javascript - Javascript数组返回不正确的项目值？

> ID：13132955
> 
> 赞同：2
> 
> 时间：2012-10-30T05:06:18.320
> 
> 标签：javascript, arrays

有谁知道为什么下面会返回第三个项目的值 + 1 而不仅仅是返回项目的正确值？

JSFiddle：http: [//jsfiddle.net/gz4gA/](http://jsfiddle.net/gz4gA/)

```
var items = [10150778347353933, 95698693940, 10151139500303463, 337394396325739, 181838311261, 186661577450, 131239636262, 408877845803303, 130260147046659, 10151850964430652, 190553376302, 256062744215, 73099117435, 30571361895, 85358203371, 133621058800, 67899501771, 422515109312, 56271008850, 107997326726, 382312857465, 144163385597840, 10150882307310061, 184244804960462, 63953746442, 114588455254586, 201992215550, 401799715673, 287217811299764, 96668113887, 106824841365, 130084127023410, 186061480932, 60351005403, 209693813195, 10150593297330601, 319622191193, 68686268942, 290590784383, 63467856465, 470235003273, 127564720953, 127437064077, 102351319089, 113530295368, 82102942060, 290699835908, 81445359355, 137490940846, 119104781632, 415115129332, 120520318032430, 142666108227, 146711457500, 344723925588563, 239108779476988, 121853939741, 109322101963, 54456613147, 473850413696, 10150329755772674];
console.log(items[2]); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:10:24.183

JavaScript 数字是 64 位浮点值。可以精确表示的最大整数值是 2 ^(53)或 9007199254740992。大于该值的数字（包括数组的^(第三)个元素）仅表示近似值。例如，参见[ECMA 262-5，第 8.5 节](http://ecma262-5.com/ELS5_HTML.htm#Section_8.5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T05:10:55.907

根据这个答案[https://stackoverflow.com/a/307200/816620](https://stackoverflow.com/a/307200/816620)，javascript 可以表示所有整数的范围的顶部是：`9007199254740992`它小于您的`10151139500303463`. 所以，你的数字太大了。

如果这些类似于项目代码而不是您真正需要用作数字的东西，那么也许您应该将它们存储为字符串，而不是数字。

# python - Python：数学表达式解析

> ID：13132959
> 
> 赞同：4
> 
> 时间：2012-10-30T05:06:25.877
> 
> 标签：python, parsing, math, expression, evaluate

Python：所以我正在开发一个程序（这是一个类分配），它将采用诸如 3/4/5 或 32432/23423/2354325 或 3425*343/254235 或 43252+34254-2435 等表达式（对于+,-,/,*) 中的所有运算符。并将解决表达式。

我不能使用评估！

我不能使用更高级别的代码，我最多只能使用来自以下网站的字符串操纵器来拆分字符串。

[http://docs.python.org/2/library/stdtypes.html#typesseq](http://docs.python.org/2/library/stdtypes.html#typesseq)

我的方法是查看用户输入的表达式，然后使用 find 函数找到 OPERATORS，然后使用这些运算符和切片函数（例如 s[0:x]）。我所拥有的如下，不幸的是它不起作用： *请注意，打印语句仅用于调试目的。编辑：为什么在我运行程序并输入表达式时未定义 x ？

```
z= (input("expression:")).strip()

def finding(z):
    if "/" in z:
        x=z.find("/")
        print("hi1")
    elif "*" in z:
        x=z.find("*")
        print("hi2")
    elif "+" in z:
        x=z.find("+")
        print("hi3")
    elif "-" in z:
        x=z.find("-")
        print("hi4")
    else:
        print("error, not math expression")
    return x

def Parsing(z,x):

    x= finding(z)
    qw=z.s[0:x]
    print (qw)
# take the x-value from function finding(z) and use it to split 

finding(z)
Parsing(z,x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:43:38.410

如果您只是在将输入拆分成各个部分时遇到问题，这里有一些可以帮助您的东西。我尽可能保持它的可读性，以便您至少可以理解它的作用。如果您需要我，我会解释其中的任何部分：

```
def parse(text):
    chunks = ['']

    for character in text:
        if character.isdigit():
            if chunks[-1].isdigit():   # If the last chunk is already a number
                chunks[-1] += character  # Add onto that number
            else:
                chunks.append(character) # Start a new number chunk
        elif character in '+-/*':
            chunks.append(character)  # This doesn't account for `1 ++ 2`.

    return chunks[1:] 
```

示例用法：

```
>>> parse('123 + 123')
['123', '+', '123']
>>> parse('123 + 123 / 123 + 123')
['123', '+', '123', '/', '123', '+', '123'] 
```

我会把剩下的留给你。如果不允许使用`.isdigit()`，则必须将其替换为较低级别的 Python 代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T05:09:29.103

我认为，最简单的方法是实现一个[分流码算法](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)，将你的方程转换为后缀符号，然后从左到右执行它。

但是由于这是一个课堂作业，你应该自己做实际的实现，我已经给了你比我应该拥有的更多的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:44:05.460

> 为什么我运行程序并输入表达式时没有定义x？

`x`不在范围内，您只需在方法中定义它，然后尝试在其他地方访问它。

```
z= (input("expression:")).strip()

def finding(z):
    # ... removed your code ...
    # in this method, you define x, which is local
    # to the method, nothing outside this method has
    # access to x
    return x

def Parsing(z,x):

    x= finding(z) # this is a different x that is assigned the 
                  # return value from the 'finding' method.
    qw=z.s[0:x] # I'm curious as to what is going on here.
    print (qw)
# take the x-value from function finding(z) and use it to split 

finding(z) # here, z is the value from the top of your code
Parsing(z,x) # here, x is not defined, which is where you get your error. 
```

由于`Parsing`已经在调用`finding`以获取 的值`x`，因此您无需将其传递给`Parsing`，也无需在`finding(z)`外部调用`Parsing`，因为您不会将值存储在任何地方。

```
def Parsing(z):

    x= finding(z) # this is a different x that is assigned the 
                  # return value from the 'finding' method.
    qw=z.s[0:x] # I'm curious as to what is going on here.
    print (qw)
# take the x-value from function finding(z) and use it to split 

# finding(z)  -- not needed 
Parsing(z) 
```

# php - 自定义 config.php 的问题

> ID：13132961
> 
> 赞同：0
> 
> 时间：2012-10-30T05:06:35.417
> 
> 标签：php, mysql, sql, database, web

我被要求将一个旧的自定义构建的网站（使用 php 和 mysql）迁移到另一台服务器，这让我陷入了困境。我已经更改了配置以反映新位置，但我得到的只是一个白屏。数据库连接良好，所以这不是问题，我认为它可能与 $doc_root 有关。任何人都可以帮助下面的代码吗？

```
$doc_root = str_replace( '\\', '/', substr($_SERVER['SCRIPT_FILENAME'], 0, 0-strlen($_SERVER['PHP_SELF'])))."";
$DOC_ROOT = str_replace( '\\', '/', substr($_SERVER['SCRIPT_FILENAME'], 0, 0-strlen($_SERVER['PHP_SELF']))).""; 
```

不幸的是，我不太了解 php，所以我被卡住了！当前测试服务器地址就是这种格式`http://xx.xxx.xx.xx/thedomain.com/`

我已经为 $doc_root 尝试了上述多种组合，但无论我做什么都行不通。

任何人都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:05:43.393

您可以使用此代码作为参考：

```
//Directory sub-folder, if the file is not under the sub-folder leave it blank
//if under a folder add this example ('/folder')
if (!defined("DIRECTORY_FOLDER")) define(DIRECTORY_FOLDER, "");

//DIRECTORY_ROOT is the document root of the file ex: /home/user/public_html
if (!defined("DIRECTORY_ROOT")) define(DIRECTORY_ROOT, $_SERVER["DOCUMENT_ROOT"].DIRECTORY_FOLDER); 

//here is the url of the website
if (!defined("DEFAULT_URL")) define(DEFAULT_URL, "http://".$_SERVER["HTTP_HOST"].EDIRECTORY_FOLDER); 
```

您现在可以使用 DEFAULT_URL 和 DIRECTORY_ROOT 作为变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T05:35:18.050

编辑您的 php.ini 文件并输入以下行：

```
error_reporting = E_ALL 
```

这将报告您的代码出错的确切错误，而不是空白页。

另一种方法是运行命令

```
$php <php-filename> 
```

如果您在此处报告错误，也许可以为您提供更多帮助。

# iphone - 如何在iOS中从视图顶部添加带有拖动动画的子视图？

> ID：13132962
> 
> 赞同：1
> 
> 时间：2012-10-30T05:06:40.027
> 
> 标签：iphone, ios, ipad, core-animation

我需要`UIDatePicker`在按钮单击上添加一个子视图到我的主视图。如何添加带有动画的视图，以便子视图从主视图顶部翻转并在移除时进行反向动画？我知道子视图可以添加到视图可见区域之外的框架中，然后使用将其移动到可见区域`CABasicAnimation`将是更好的选择。所以需要关于我应该使用的动画块的帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:16:08.803

试试这个波纹管代码......如果yourView默认框架的原点y = -500然后在任何`UIButton`点击事件上尝试波纹管代码..也设置你想要的框架

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.75];
    [UIView setAnimationDelegate:self];
    CGRect frame = yourView.frame;
    frame.origin.y = frame.origin.y + 500; // give any value for display yourView
    yourView.frame = frame;
    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:yourView cache:YES];
    [UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T05:31:29.367

用于`CATransaction`动画。

# javascript - 如何使用 JavaScript 格式化 Twitter/Facebook 提要日期

> ID：13132964
> 
> 赞同：1
> 
> 时间：2012-10-30T05:06:43.060
> 
> 标签：javascript, date-format

我正在寻找这个确切问题的答案：[How to format Facebook/Twitter dates (from the JSON feed) in Objective-C](https://stackoverflow.com/questions/4329485/how-to-format-facebook-twitter-dates-from-the-json-feed-in-objective-c) only in JS。

有推荐的方法吗？

从 Twitter 返回的日期如下所示： Wed Oct 17 21:22:27 +0000 2012 而从 FB 则如下所示： 2012-10-18T11:21:30+0000

我发现它们不包含 unix 时间戳非常奇怪（并且非常烦人），有人看到原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T05:24:29.470

日期字符串解析是一个非常常见的问题，肯定已经有答案了。无论如何...

如果日期格式为 2012-10-18T11:21:30+0000（几乎是 ISO8601）并且偏移量始终为 +0000（即 UTC），您可以使用以下方法创建合适的日期对象：

```
function isoStringToDate(s) {
  var b = s.split(/[-t:+]/ig);
  return new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5]));
} 
```

这将返回为该 UTC 时间设置的本地日期对象。请注意，这取决于用户系统设置为适当的时区。

Facebook 格式（Wed Oct 17 21:22:27 +0000 2012）格式可以类似地转换：

```
function fbStringToDate(s) {
  var b = s.split(/[: ]/g);
  var m = {jan:0, feb:1, mar:2, apr:3, may:4, jun:5, jul:6,
           aug:7, sep:8, oct:9, nov:10, dec:11};

  return new Date(Date.UTC(b[7], m[b[1].toLowerCase()], b[2], b[3], b[4], b[5]));
} 
```

再次假设它总是 +0000 (UTC) 的偏移量。如果需要其他偏移量，可以在返回之前将其应用于创建的日期对象。

# java - 我可以操纵变量在 Java 中的变化方式吗？

> ID：13132969
> 
> 赞同：0
> 
> 时间：2012-10-30T05:07:14.323
> 
> 标签：java

如果骰子显示为 6，则玩家在本回合完全不移动，并且在下一回合也被放弃。

为此，我为播放器尝试了一个整数类型的警告标记变量和一个整数类型的时间计数器变量。

如果骰子显示 6，我想在第一次运行期间将警告标记变量增加 1（并且让 while 循环不执行任何操作），然后在第二次运行期间将值保持为 1（while 循环将不起作用），然后降低在 while 循环的第三次运行时，它回落到 0（因此 while 循环将起作用）。除非骰子再次显示 6，否则标记将保持为零，之后将重复相同的过程。

我有一个这样的while循环：

```
while the warning marker is equal to 0 {
    Do Stuff
    if the die shows a 6, the warning marker increases by 1.
    the time counter also increases by 1.
} 
```

如何操纵变量以获得我需要的结果？或者我的部分完整方法在逻辑上绝对不正确？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T05:17:06.897

我想你想改写这个问题。

这是我的理解。你有一个警告标记。你有一个循环来检查标记是否为 0，如果是，那么你做一些事情。如果骰子是六，您将增加警告标记。如果它的新值是 3，那么你将它重置为 0。同时，时间计数器一直在增加。

如果这是正确的，我想你想要这样的东西：

```
int warningMarker = 0;
int timeMarker = 0;

while (true) {
    if (die == 6) {
        ++warningMarker;
        if (warningMarker == 3) {
            warningMarker = 0;
        }
    }

    if (warningMarker == 0) {
        doSomething();
    }

    ++timeMarker;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:17:32.380

你能告诉我这对你有用吗？

```
 flag=true;    
    while condition{
      if flag==true{
         if die == 6
         {
           flag=false;
           continue;}
         } 
         else { Do STUFF }
     } else 
         {
            flag==true;
          }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T05:35:29.287

Java 是面向对象的编程语言。使用此功能。

请参阅以下伪代码，如果您在理解它时遇到问题，请告诉我。

创建一个类`Player`，如下所示：

```
class Player
{
    boolean skipChance = false;

    ... // Other fields
    ... //
} 
```

更改您`while`的如下：

```
while(isGameOn())
{
    Player p = getCurrentPlayer();
    if( ! p.skipChance)
    {
        int val = p.throwDice();
        if(val == 6)
        {
            p.skipChance = true;
            continue; // control moves to while.
        }
        // Do stuff
    }
    else
    {
        p.skipChance = false;
    }
} 
```

# javascript - 为什么 Backbone.js 模型的 'on()' 将 'this' 作为最后一个参数，如果它几乎总是这样？

> ID：13132970
> 
> 赞同：3
> 
> 时间：2012-10-30T05:07:35.560
> 
> 标签：javascript, backbone.js, this, backbone-events

我刚刚进入 Backbone，我不明白的一件事是为什么模型的“on()”方法总是需要三个参数——事件、处理程序和上下文。

似乎几乎总是“this”用于上下文，我还没有看到任何其他用法。即使有，因为我还没有见过它，它一定是非常罕见的。

所以我的问题是：什么时候使用“this”以外的上下文，为什么 Backbone 是这样设计的？顺便说一句，我确实理解您为什么需要提供上下文，只是我想知道为什么方法语法指定我使用三个参数而不是使最后一个参数可选 - 这似乎总是“this”并且感觉多余。我确定我错过了一些东西。请有人帮我理解。谢谢！

*   [编辑] 为什么不能做这样的事情：

    ```
    model.on = function(event, callback){
      model.on_with_three_args.call(this, event, callback, this);
    });

    model.on_with_three_args = function(event, callback){
      /* whatever the on() is supposed to do */
    }); 
    ```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-30T05:31:27.777

假设我们在一个基于模型的视图中，并且我们想要绑定到模型的更改事件：

```
this.model.on('change', this.render); 
```

`on`通话看到两件事：

1.  事件名称，一个简单的字符串。
2.  处理程序，一个函数。

`on`无法知道 in 是什么`this`意思`this.render`，它只是看到一个函数；`on`甚至不知道上面的调用和这个之间的区别：

```
this.model.on('change', function() { ... }); 
```

如果您的函数需要特定的上下文，那么您有两种选择：

1.  使用、、、、、CoffeeScripts [`_.bind`](http://underscorejs.org/#bind)、闭包技巧或任何创建或模拟绑定函数的方法来创建绑定[`_.bindAll`](http://underscorejs.org/#bindAll)函数。[`Function.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)[`$.proxy`](http://api.jquery.com/jQuery.proxy/)[`=>`](http://coffeescript.org/#fat_arrow)`var _this = this`
2.  告诉它你想要哪个上下文：

    ```
    this.model.on('change', this.render, this); 
    ```

无法展开调用堆栈以查看`this`您想要的，因此您必须明确说明。

Backbone 将像这样调用回调：

```
node.callback.apply(node.context || this, ...); 
```

where`node.callback`是回调函数，`node.context`是给 . 的第三个参数（如果有的话）`on`。如果您不指定上下文，那么您将得到调用`this`时发生的任何事情`trigger`；在上面的示例中，`this`最终将成为模型。

因此，实际上的第三个参数`on`是可选的，但默认值并不是非常有用，并且无法选择更好的默认值，您需要选择合理上下文的信息在 JavaScript 中根本无法访问。`_.bindAll(this, ...)`这就是为什么您会在 Backbone 视图中看到如此多的样板。

* * *

如果您尝试过这样的事情：

```
model.on = function(event, callback){
    model.on_with_three_args.call(this, event, callback, this);
}); 
```

那么`this`在那种情况下通常会`model`这样你真的会说：

```
model.on = function(event, callback){
    model.on_with_three_args.call(model, event, callback, model);
}); 
```

或者

```
model.on = function(event, callback){
    model.on_with_three_args(event, callback, model);
}); 
```

并且没有任何意义。`this`inside的值与调用 的代码中`on`的值几乎没有关系。在 JavaScript 中不是变量，它是一个关键字，指的是当前调用上下文。`this``on``this`

# java - GWT formpanel 适用于 chrome 但不适用于 firefox

> ID：13132972
> 
> 赞同：2
> 
> 时间：2012-10-30T05:08:02.287
> 
> 标签：java, firefox, gwt, servlets

此代码适用于 chrome。但在 Firefox 中，它不调用 servlet。下面是代码。不知道是不是浏览器的区别。

```
 String URL= GWT.getModuleBaseURL()+"getType";
     FormPanel formPanel = new FormPanel();  
     formPanel.setAction(URL); 
     formPanel.setEncoding(FormPanel.ENCODING_URLENCODED);  
     formPanel.setMethod(FormPanel.METHOD_GET); 

 formPanel.addSubmitHandler(new SubmitHandler(){

    @Override
    public void onSubmit(SubmitEvent event) {
        // TODO Auto-generated method stub
        System.out.println(event.getSource());
    }

 });
 formPanel.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {  
        public void onSubmitComplete(SubmitCompleteEvent event) { 
            System.out.println("in");
            System.out.println(event.getResults());  
        }  
    });  
 formPanel.submit(); 
```

xml文件如下。

```
 web.xml
<servlet>
<servlet-name>getType</servlet-name>
<servlet-class>msp2.server.getType</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>getType</servlet-name>
<url-pattern>/msp2_app/getType</url-pattern>
</servlet-mapping>` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T09:33:24.213

为了使表单正常工作，您需要将其添加到 DOM。

这可以通过调用来完成：

```
RootPanel.get().add(formPanel); 
```

或者您可以使用任何已连接的面板

# delphi - Delphi 中的字符串索引与动态数组索引

> ID：13132973
> 
> 赞同：7
> 
> 时间：2012-10-30T05:08:07.607
> 
> 标签：delphi

在 Delphi 中，为什么 AnsiStrings 从 1 开始索引，而动态数组从 0 开始索引？这是一个历史性的意外，让 AnsiStrings 更像 ShortStrings 工作，还是有一些更深层次的逻辑在起作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-30T08:18:18.677

导致“Pascal”字符串被 1 索引而不是 0 索引的促成因素之一是字符串的长度存储在第零字节中。是的，这可以通过让编译器在内部向字符串索引表达式添加一个常量偏移量来隐藏在程序员的视野中（就像稍后在 Delphi 的长字符串中所做的那样），但一开始事情要简单得多。分配一块内存，将长度存储在字节 0 中，从字节 1 开始索引 char 数据。故事结束。

我记得 UCSD Pascal 早在 Turbo Pascal 出现之前就使用了这种长度为零字节的约定。

至于为什么动态数组是从零开始的，我不记得有任何具体原因，但我猜它反映了动态数组与动态分配缓冲区和索引缓冲区指针的关系。您将用于创建数组指针类型的数组类型是从零开始的数组。第一个字节位于缓冲区指针 + 0 偏移处。这是基于零的一切的 C 合理化。当字符串的基于 1 的索引已经（并且一直是）例外而不是规范时，没有令人信服的理由将字符串的基于 1 的索引模式转移到编译器管理的数组中。

很可能是因为字符串类型是每个人第一次遇到的第一个类似数组的数据类型，并且可能是全面使用最多的数据类型，因此可能存在一种偏向于语言中基于 1 的索引的看法。但是，如果您仔细观察，我认为您会发现 Pascal 中的数组（与字符串不同）从来没有本质上是基于 1 的，尤其是在动态分配时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T08:17:12.280

Delphi 字符串传统基于 1 的字符串的原因很简单。传统来自旧式 Turbo Pascal 字符串的实现。该数据类型将字符串的长度存储在变量的第一个字节索引 0 中。字符串数据从下一个字节索引 1 开始。

您今天仍然可以使用该数据类型。它现在称为 ShortString。从它的实现中可以立即看出，有 255 个字符的限制。如果我没记错的话，这个限制导致在 Delphi 2 中引入了大字符串。当引入大字符串时，语言设计者选择保留基于 1 的索引，以便开发人员更容易从短字符串切换到大字符串。

我猜 Turbo Pascal 并没有发明使用元素 0 作为长度的想法。只是我太年轻了，不记得之前发生了什么！

动态数组不会以同样的方式受过去的束缚，并且可以自由选择。我不知道为什么选择基于零。也许是因为它更容易适应当时 Delphi 存在的平台上的流行时尚，即 Windows。这只是一个猜测。Danny Thorpe 当时从事 Delphi 编译器的工作，连他[都不记得其中的原理了](https://stackoverflow.com/questions/13132973/string-indexing-vs-dynamic-array-indexing-in-delphi#answer-13135052)！

Delphi 语言设计者目前正朝着大字符串的基于零的字符串索引方向发展。可以在 XE3 中的 TStringHelper 类中看到这个方向的初始步骤，该类使用基于 0 的索引。并且还在 ZEROBASEDSTRINGS 条件中，它允许您选择基于 0 的索引。期望下一代 Delphi 编译器仅使用基于 0 的索引。他们正在改变的时代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:20:23.303

历史事故。

Pascal 字符串和数组传统上从 1 开始。

C - 可能是 AnsiStrings - 从 0 开始。

我不知道动态数组“打破帕斯卡传统”的理由，动态数组也从零开始。但这是有道理的，我同意它......

恕我直言...

# html - 在 Web 浏览器上显示 UTF-16 字符

> ID：13132976
> 
> 赞同：4
> 
> 时间：2012-10-30T05:08:30.610
> 
> 标签：html, firefox, utf-8, character-encoding, utf-16

我打印了一些 UTF-16 编码字符并尝试在 Firefox 中显示它，它显示为�。

所以我去了工具->编码并将编码从UTF-8更改为UTF-16（我也尝试直接在HTML中更改字符集）但是，当我这样做时，我的页面完全被符号淹没了：

਍ℼ佄慢呃偙⁅瑨汭ാ㰊瑨汭ാഊ㰊敨摡ാ†ഠ †㰠楴汴㹥楬畮⁸楆敲潦⁸楤灳慬捹朠扥扥⁵敧湫景眠扥 潆条⁥畓数⁲獕牥⼼楴汴㹥਍††氼湩⁫敲㵬猢潨玱畣⁴捩汤•牨晥∽瑨灴⼺振湤献瑳瑡捩渮瑥猯灵牥猎珩杭是痴捩汤潣㸢਍湩⁫敲にギ愢灰敬琭畯††浮潣⁫扦扦浮椣⁫敲扦扦潠椣⁫敲击㵮潣≮扮捩摑摵獳防护楴⹉殮............ ...

Web 浏览器如何在不破坏页面的情况下显示 UTF-16 字符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T07:38:34.007

“充满符号的”摘录看起来像一个 UTF-8 编码的 HTML 文档，但被视为 UTF-16 编码。或者它可能主要包含 UTF-8 数据和一些 UTF-16 编码数据，这是行不通的。

如果您将数据保存为正确的 UTF-16 编码并在 HTTP 标头和/或`meta`标签中声明编码，那么有些浏览器会显示它正常，有些则不会。搜索引擎通常无法处理 UTF-16，而 UTF-16 大多不使用，也不应该在网络上使用，除非在知情的合作伙伴之间达成共识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-26T16:00:21.160

Firefox 无法在您的文档中找到正确的字符集。对于网页，应该使用 head 元标记来指示内容的字符集。它应该放在 HTML 文件的开头，指示浏览器应该将哪个字符集用于文件的其余部分。

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

所以浏览器在读取该行之前是字符集盲的。但是使用 utf-8 是没有问题的。因为到那时为止的每个字符都以 utf-8 编码，其编码方式与 ASCII 相同（latin-1 和其他字符也是如此）。在 utf-16 中并非如此。

[W3C 说](https://www.w3.org/International/questions/qa-choosing-encodings)：

> 共有三种不同的 Unicode 字符编码：UTF-8、UTF-16 和 UTF-32。在这三个中，只有 UTF-8 应该用于 Web 内容。

所以你应该使用utf-8。但是，如果您仍想尝试使用 utf-16 进行某些操作，请在请求文件时使用 BOM。您将为浏览器提供更好的机会来解决它并正确[解码](https://encoding.spec.whatwg.org/#specification-hooks)内容。

[关于 utf-16 的使用，另一个答案](https://stackoverflow.com/a/18231475/312505)非常简洁。

虽然[Joel 给出了关于字符编码的完整课程，](https://www.joelonsoftware.com/2003/10/08/the-absolute-minimum-every-software-developer-absolutely-positively-must-know-about-unicode-and-character-sets-no-excuses/)以及为什么 HTML 在内容中使用它声明而不是作为标题信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-14T13:02:51.853

将 UTF-16 数据作为网页发送到浏览器是旧浏览器中的 XSS 风险。（见另一个[答案](https://stackoverflow.com/a/18231475/18721)。）不要这样做。相反，在服务器上将数据转换为 UTF-8 并通过 HTTP 发送 UTF-8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-31T06:01:16.633

完成这项工作的方法是让页面说明它的编码方式。在 UTF-16 的情况下，它还有助于包含 BOM。“中文泛滥”效果很可能是因为您的页面是 UTF-16LE，但浏览器将其视为 UTF-16BE，反之亦然......

# css - CSS 3 动画固定位置侧边栏

> ID：13132982
> 
> 赞同：1
> 
> 时间：2012-10-30T05:08:52.857
> 
> 标签：css, animation, transition, fixed, sidebar

我想知道是否有一种方法可以实现类似于 Chris Coyier 的效果：使用 CSS3 动画[滚动/跟随侧边栏？](http://css-tricks.com/scrollfollow-sidebar/)

我有一个侧边栏，当用户滚动时会随着页面向下滚动（只需使用固定位置的 div），但我想为侧边栏设置动画以在用户向下滚动时向下反弹和/或追赶页面.

看看 Chris 的[jQuery 技术](http://css-tricks.com/examples/ScrollingSidebar/index.php)，看看我在说什么。

我想知道的主要事情是是否可以**仅使用 CSS3**而**没有 javascript**来实现此效果。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:33:01.217

不，没有 JavaScript 就不可能获得这种效果，除非你有某种其他机制允许你检查用户滚动了多远，并相应地更改元素的 CSS 属性。

# c - 使用相同的功能来验证 2 个不同的问题

> ID：13132987
> 
> 赞同：1
> 
> 时间：2012-10-30T05:09:16.450
> 
> 标签：c

我在尝试弄清楚如何使用相同的功能（验证）、使用 2 个不同的问题来验证 2 个不同的数字输入时遇到问题

```
int validate(int low, int high) {
    int flag = 0, number = 0;

    do 
    {
        printf("Enter maximum value between %d and %d: ", low, high);
        scanf("%d", &number);
        if (number <= low || number > high) 
        {
            printf("INVALID! Must enter a value between %d and %d: ", low, high);
            scanf("%d", &number);
        }
        else {
            flag = 1;
        }
    } while(flag == 0);
    return number;
} 
```

这里是 main()

```
int main () {
    int num1, num2;

    switch(menu()) {
    case 1:
    printf("~~~~~~~\n6/49 Number Generator\n");
    num1 = validate(1,49);
    num2 = validate(1, 6);
    break;
    default:
        printf("end");
    }
return(0);
} 
```

当我`validate()`第二次打电话（返回`num2`）时，我需要它来询问一些号码。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T05:17:51.607

如果您仅限于此函数签名，则可以使用内部静态标志

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:14:15.127

理想情况下，您的 validate() 应该有另一个参数来表示它实际上要做什么。类似的东西`int validate(int low, int high, int type)`。

然后打开类型进行各种操作。但是我建议您更改函数的名称，因为 validate 不太合适。例如`numGenEngine`，类型表示 step1、step2 等。

考虑到您需要完整的函数定义，您可以使用静态变量。

```
int validate(int low, int high) {
    static int step = 0;
    int flag = 0, number = 0;

    if (step == 0) {
        // the first thing
    } else if (step == 1) {
        // the other thing
            // to reuse the function for the next set of operations
            // reset step to -1 here
    }

    step++;
    return number;
} 
```

# java - 在Java中对所有值都是双精度的二维数组进行排序

> ID：13132992
> 
> 赞同：0
> 
> 时间：2012-10-30T05:09:40.900
> 
> 标签：java

我想这是一个常见问题，但我查看了其他一些回复，但无法让我的代码正常工作。

我有一个由双精度数组成的二维数组，两列和一堆行，我想按第一列升序对数组进行排序。

我的数组称为 ratio[][]，我尝试了以下代码：

```
 Arrays.sort(ratio, new Comparator<double[]>() {

    @Override
    public double compare(double[] o1, double[] o2) {
        return valueOf(o1[0]).compareTo(valueOf(o2[0]));
    }

  }); 
```

编译器发现一堆错误。我已经导入了 java.util.Arrays 和 java.util.Comparator。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T05:20:12.350

如果您想通过第一个元素定义双精度数组的顺序（这似乎是您想要做的），那么您需要做的就是：

```
Arrays.sort(ratio, new Comparator<double[]>() {
    @Override
    public double compare(double[] o1, double[] o2) {
        return Double.compare(o1[0], o2[0]);
    }
}); 
```

无需`Double`为每个比较构造一个对象（或将您的数组转换为 type `Double[]`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T05:14:44.923

你`valueOf`是`Double`类的静态方法。应该在其上调用它。

如果您只是根据每个数组对二维数组进行排序`first column`，它将是这样的：-

```
Arrays.sort(ratio, new Comparator<double[]>() {
        @Override
        public int compare(double[] o1, double[] o2) {
            return Double.valueOf(o1[0]).compareTo(Double.valueOf(o2[0]));
        }
}); 
```

而且，您可以使用`Comparator`on 类型`double[]`，因为 an`array`是`object`唯一的。因此，您无需将其转换为`Double[][]`.

**更新**： -

*   您也可以使用**`Double.compare(double, double)`**@Ted 答案中的方法，因为这不需要您创建两个双重对象。但是，这在小规模上并不重要，如果您正在构建一个有很多比较的大型应用程序，那么您绝对应该使用这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T05:21:47.747

只是一个建议。。

```
 class Row {
      public double one;
      public double two;
  }  

  Row[] rows = // create this

  Arrays.sort(rows, new Comparator<Row>() {
      public int compare(Row o1, Row o2) {
          double c = o1.one - o2.one;
          return c < 0.0 ? -1 : c > 0.0 ? 1 : 0;
      }
  } 
```

# java - 如何在单击按钮时导出到.excel时添加openwith并另存为对话框

> ID：13132994
> 
> 赞同：0
> 
> 时间：2012-10-30T05:09:47.770
> 
> 标签：java, jquery, excel, dialog

我通过单击按钮将 jqgrid 中显示的数据导出到 .excel 文件中。这是我的导出到excel按钮的代码点击..

```
 $('#excel').click(function(){
            var fromdate=$('#fromdate').val();
            var todate=$('#todate').val();
            if(fromdate && todate)
            {
                var URL='excel.jsp?fromdate='+$('#fromdate').val()+'&todate='+$('#todate').val();
                $.ajax({
                   url:URL,
                   type:'GET',
                   success:function(data){
                       alert('Exported To Excel');
                   }

                });
            }
        }); 
```

现在这个按钮将指向 excel.jsp 页面。下面是我的 excel.jsp 页面代码，它直接给出将生成的 .excel 文件保存在本地磁盘 D:// 中的路径。现在根据我的需要，当用户单击导出到excel按钮打开并保存为对话框应该弹出，使用户能够提供所需的名称并保存到所需的位置..

excel.jsp

```
 String datum1 = request.getParameter("fromdate");
    String datum2 = request.getParameter("todate");
    SimpleDateFormat sdfSource = new SimpleDateFormat("dd-MM-yyyy");
    Date date = sdfSource.parse(datum1);
    Date date2 = sdfSource.parse(datum2);
    SimpleDateFormat sdfDestination = new SimpleDateFormat("yyyy-MM-dd");
    datum1 = sdfDestination.format(date);
    System.out.println(datum1);
    datum2 = sdfDestination.format(date2);
    System.out.println(datum2);

    String filename = "d:/excel.xls";
    HSSFWorkbook hwb = new HSSFWorkbook();
    HSSFSheet sheet = hwb.createSheet("CallBillingSystem");

    HSSFRow rowhead = sheet.createRow((short) 0);
    rowhead.createCell((short) 0).setCellValue("calldate");
    rowhead.createCell((short) 1).setCellValue("src");
    rowhead.createCell((short) 2).setCellValue("dst");
    rowhead.createCell((short) 3).setCellValue("dstchannel");
    rowhead.createCell((short) 4).setCellValue("lastapp");
    rowhead.createCell((short) 5).setCellValue("duration");
    rowhead.createCell((short) 6).setCellValue("disposition");
    rowhead.createCell((short) 7).setCellValue("amaflags");
    rowhead.createCell((short) 8).setCellValue("cdrcost");

    String strQuery = "";
    ResultSet rs = null;

    conexion conexiondb = new conexion();
    conexiondb.Conectar();

    strQuery = "SELECT * FROM cdrcost where date(calldate) between '" + datum1 + "' and '" + datum2 + "'";

    rs = conexiondb.Consulta(strQuery);
    int i = 1;
    while (rs.next()) {
        HSSFRow row = sheet.createRow((short) i);
        row.createCell((short) 0).setCellValue(rs.getString("calldate"));
        row.createCell((short) 1).setCellValue(rs.getString("src"));
        row.createCell((short) 2).setCellValue(rs.getString("dst"));
        row.createCell((short) 3).setCellValue(rs.getString("dstchannel"));
        row.createCell((short) 4).setCellValue(rs.getString("lastapp"));
        row.createCell((short) 5).setCellValue(rs.getString("duration"));
        row.createCell((short) 6).setCellValue(rs.getString("disposition"));
        row.createCell((short) 7).setCellValue(rs.getString("amaflags"));
        row.createCell((short) 8).setCellValue(rs.getString("cdrcost"));
        i++;
    }
    FileOutputStream fileOut = new FileOutputStream(filename);
    hwb.write(fileOut);
    fileOut.close();
    System.out.println("Your excel file has been generated!");

} catch (Exception ex) {
    System.out.println(ex);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:21:18.430

您应该设置几个 HTTP 标头并将 Excel 文件的内容直接写入 HttpServletResponse 的 OutputStream。

```
response.setHeader("Content-Type", "application/vnd.ms-excel");
response.setHeader("Content-Transfer-Encoding", "binary");
response.setHeader("Content-Length", String.valueOf(fileSize));
response.addHeader("Content-Disposition", String.format("attachment; filename=%s", fileName)); 
```

“Content-Type”标头告诉您要发送到浏览器的流类型。Mime 类型取决于 Excel 文件的格式。请参阅[Excel 文件的正确内容类型是什么？](https://stackoverflow.com/questions/2937465/what-is-correct-content-type-for-excel-files).

“Content-Length”不是强制性的，但它允许浏览器显示下载进度。

“Content-Disposition”告诉浏览器初始文件名另存为（不带路径）。

响应此标头会自动在您的浏览器中打开“另存为...”对话框，或根据您的浏览器设置立即开始下载到您的“下载”文件夹。

还可以考虑使用 servlet 而不是 JSP，如下所示： import java.io.File; 导入 java.io.FileInputStream；导入 java.io.FileOutputStream；导入 java.io.IOException；导入 java.io.OutputStream；导入 javax.servlet.ServletException；导入 javax.servlet.http.HttpServlet；导入 javax.servlet.http.HttpServletRequest；导入 javax.servlet.http.HttpServletResponse；

```
public class ExcelServlet extends HttpServlet {

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        File tempFile = File.createTempFile(getClass().getName(), ".xls");
        try {
            FileOutputStream fos = new FileOutputStream(tempFile);
            try {
                generateExcel(fos);
            } finally {
                fos.close();
            }

            response.setHeader("Content-Type", "application/vnd.ms-excel");
            response.setHeader("Content-Transfer-Encoding", "binary");
            response.setHeader("Content-Length", String.valueOf(tempFile.length()));
            response.addHeader("Content-Disposition", String.format("attachment; filename=%s", tempFile.getName()));

            OutputStream outputStream = response.getOutputStream();
            FileInputStream fis = new FileInputStream(tempFile);
            try {
                int n = 0;
                byte[] buffer = new byte[1024];
                while ((n = fis.read(buffer)) != -1) {
                    outputStream.write(buffer, 0, n);
                }
                outputStream.flush();
            } finally {
                fis.close();
            }
        } finally {
            tempFile.delete();
        }
    }

    private void generateExcel(OutputStream outputStream) throws IOException {
        // TODO This is stub. Place you excel generation code here
        outputStream.write("Hellol, world!".getBytes());
    }
} 
```

**更新** 您无法使用 jQuery.ajax 函数以我描述的方式下载文件。我通常使用隐藏的 iframe：

```
$('#excel').click(function(){
    var fromdate = $('#fromdate').val();
    var todate = $('#todate').val();
    if(fromdate && todate) {
        var url = 'excel?fromdate=' + fromdate + '&todate=' + todate;
        $('#download-frame').attr('src', url);
    }
}); 
```

在您的页面标记中包含：

```
<iframe id="download-frame" src="" width="1" height="1" style="display: none"></iframe> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-18T12:56:27.813

要在浏览器中获取 java 中下载文件的保存对话框：

而不是使用 'onclick()' 函数，只需使用 href=""。

```
<script type="text/javascript" charset="utf-8">
var contextPath = "<%=request.getContextPath()%>";
</script>

var downloadUrl=contextPath+"/web/cms/downloadDocument.html?docId=" +docId;

<a> href='"+downloadUrl+"'>Download <a> 
```

# java - 如何在primefaces列中水平对齐按钮？

> ID：13132999
> 
> 赞同：3
> 
> 时间：2012-10-30T05:10:06.213
> 
> 标签：java, jsf-2, primefaces

我在我的一个 primefaces UI 中遇到了布局问题。我基本上有一个包含在 DIV 中的表格，代码如下。最后一列应该包含我想要水平排列的按钮，所以我将它们包含在一个 panelGroup 中

```
<div style="overflow: auto; height: 300px;">
    <p:dataTable >
        <p:column headerText="Column 1">
        </p:column>
        .
        .
        <p:column headerText="Actions">
            <h:panelGroup layout="span">
                <p:commandButton value="Edit" icon="ui-icon-scissors" />
                <p:commandButton value="Delete" icon="ui-icon-trash" />
            </h:panelGroup>
        </p:column>
    </p:dataTable>
</div> 
```

但是，当它们被渲染时，按钮是垂直排列的。查看 HTML 代码，我注意到按钮都包含在 div 中，这就是它们之间有换行符的原因。

如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T06:02:45.770

`<h:panelGrid/>`用 a或 a包裹它们`<p:panelGroup/>`。这将`table`在同一表格行中呈现两个表格单元格（因此它们必须出现在同一行中）：

与`h:panelGrid`：

```
<h:panelGrid columns="2">
    <p:commandButton value="Edit" icon="ui-icon-scissors" />
    <p:commandButton value="Delete" icon="ui-icon-trash" />
</h:panelGrid> 
```

与`h:panelGroup`：

如果您`h:panelGroup`不使用 style、styleClass 或 id 属性，则该`layout`属性无效，并且不会在您的按钮周围呈现额外的 html。无论如何，添加样式：

```
<h:panelGroup style="white-space: nowrap">
    ....
</h:panelGroup> 
```

使它们水平对齐，无论`layout`您使用哪个值。