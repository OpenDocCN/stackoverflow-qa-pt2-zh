# StackOverflow 问答 13522000-13522999

# silverlight - Silverlight：如何制作 UIElement 的 ShallowCopy

> ID：13522001
> 
> 赞同：1
> 
> 时间：2012-11-23T01:10:09.273
> 
> 标签：silverlight, clone, uielement, shallow-copy

我需要将 a 添加`UIElement`到两个不同的画布，但一个`UIElement`只能是 ONE 画布的子级，因此我必须创建`UIElement`.

我想使用`MemberwiseClone`，但它受到保护，我不能使用它。

我也想定义一个扩展方法`UIElement.ShallowCopy`，但它仍然调用`MemberwiseClone`，它再次受到保护。

编辑：

尝试了以下所有方法，但在 Silverlight 环境中均失败：

```
 // System.Runtime.Serialization.InvalidDataContractException was unhandled by user code
    // Message=Type 'System.Windows.UIElement' cannot be serialized. Consider marking it with the DataContractAttribute attribute, and marking all of its members you want serialized with the DataMemberAttribute attribute. Alternatively, you can ensure that the type is public and has a parameterless constructor - all public members of the type will then be serialized, and no attributes will be required.
    public static T CloneEx<T>(this T obj) where T : class
    {
        T clone;
        DataContractSerializer dcs = new DataContractSerializer(typeof(T));

        using (MemoryStream ms = new MemoryStream())
        {
            dcs.WriteObject(ms, obj);
            ms.Position = 0;
            clone = (T)dcs.ReadObject(ms);
        }

        return clone;
    }

    // This one also throws Access/Invoke exceptions
    private readonly static object _lock = new object();
    public static T MemberwiseCloneEx<T>(this T obj) where T : class
    {
        if (obj == null)
            return null;

        try
        {
            Monitor.Enter(_lock);

            T clone = (T)Activator.CreateInstance(obj.GetType());

            PropertyInfo[] fields = obj.GetType().GetProperties(BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
            foreach (PropertyInfo field in fields)
            {
                object val = field.GetValue(obj, null);
                field.SetValue(clone, val, null);
            }

            return clone;
        }
        finally
        {
            Monitor.Exit(_lock);
        }
    }

    // System.MethodAccessException was unhandled by user code
    // Message=Attempt by method 'ToonController.ControllerUtils.MemberwiseCloneEx<System.__Canon>(System.__Canon)' to access method 'System.Object.MemberwiseClone()' failed.
    public static T MemberwiseCloneEx<T>(this T obj) where T : class
    {
        if (obj == null)
            return null;

        MethodInfo mi = obj.GetType().GetMethod("MemberwiseClone", BindingFlags.Instance | BindingFlags.NonPublic);

        if (mi == null)
            return null;

        return (T)mi.Invoke(obj, null);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T23:30:18.940

如果您想在多个 ui 元素中使用某些东西，请“同步它们”，那么您应该创建一个 ViewModel 或类似的东西。此视图模型将设置为您要使用的任何元素的数据上下文。那么你的浅层引用很简单，你可以创建两个独立的 UI 元素绑定到相同的数据。

# java - 使整个jinternalframe透明

> ID：13522003
> 
> 赞同：2
> 
> 时间：2012-11-23T01:10:54.853
> 
> 标签：java, swing, transparency, jinternalframe

现在我正在使用以下代码使我的 jinternal 框架透明：

```
double rgbConversionBackpack = Double.parseDouble(MyClient.configFile.getProperty("BACKPACK_FRAME_ALPHA"));
double tmp = (rgbConversionBackpack / 100.0) * 255.0;
this.getContentPane().setBackground(new Color(140, 0, 0, (int)tmp));
this.setOpaque(false); 
```

我在滑块上有代码来设置所有工作正常的 alpha 并将其保存到属性文件 yada、yada、yada。问题是如何使整个 JInternal Frame 透明。

现在我只能设置内容窗格，以及 jinternal 框架中的任何其他面板（等）透明，但我想让整个 JinternalFrame（边框和所有）透明。

下面的截图显示了背包上的红色部分是透明的，看起来不错，但仍然希望边框也是透明的。

![在此处输入图像描述](../Images/d6c04c8a8d696afded62a1807c08b981.png)

有没有办法为我的每个类覆盖 draw super 方法，扩展 JInternalFrame 使其绘制半透明（显然取决于值）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:21:54.003

您可以通过更改 JInternalFrame 的绘制方法使用的 AlphaComposite 来做到这一点。尽管在透明组件的位置重新绘制包含顶级窗口，但您必须小心，以免产生有趣的副作用。例如：

```
import java.awt.*;
import javax.swing.*;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

@SuppressWarnings("serial")
public class TransparentInternalFrame extends JDesktopPane {
   private static final Color COLOR_1 = Color.red;
   private static final Color COLOR_2 = Color.blue;
   private static final float PT_2 = 30f;
   private static final int PREF_W = 800;
   private static final int PREF_H = 500;

   public TransparentInternalFrame() {
      add(new MyInternalFrame("Foo", 50, 50, 300, 300, 0.2f));
      add(new MyInternalFrame("Foo", 400, 100, 300, 300, 0.4f));
   }

   @Override
   protected void paintComponent(Graphics g) {
      super.paintComponent(g);
      Graphics2D g2 = (Graphics2D) g;
      g2.setPaint(new GradientPaint(0, 0, COLOR_1, PT_2, PT_2, COLOR_2, true));
      g2.fillRect(0, 0, getWidth(), getHeight());
   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private static void createAndShowGui() {
      TransparentInternalFrame mainPanel = new TransparentInternalFrame();

      JFrame frame = new JFrame("TransparentInternalFrame");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

@SuppressWarnings("serial")
class MyInternalFrame extends JInternalFrame {
   private AlphaComposite comp = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.5f);

   public MyInternalFrame(String title, int x, int y, int w, int h, final float alpha) {
      super(title);
      setClosable(true);
      setBounds(x, y, w, h);
      setVisible(true);

      int sliderValue = (int) (alpha * 100);
      comp = comp.derive(alpha);
      final JSlider slider = new JSlider(0, 100, sliderValue);
      slider.setMajorTickSpacing(20);
      slider.setMinorTickSpacing(5);
      slider.setPaintLabels(true);
      slider.setPaintTicks(true);
      slider.setBorder(BorderFactory.createTitledBorder("Alpha Value"));
      slider.addChangeListener(new ChangeListener() {

         @Override
         public void stateChanged(ChangeEvent cEvt) {
            float alpha = (float) slider.getValue() / 100f;
            setAlpha(alpha);
            MyInternalFrame.this.repaint();

            Window win = SwingUtilities.getWindowAncestor(MyInternalFrame.this);
            win.repaint();
         }
      });

      add(new JLabel("My Label", SwingConstants.CENTER));
      add(slider, BorderLayout.SOUTH);
   }

   @Override
   public void paint(Graphics g) {
      Graphics2D g2 = (Graphics2D) g;
      g2.setComposite(comp);
      super.paint(g);
   }

   public void setAlpha(float alpha) {
      comp = comp.derive(alpha);
   }
} 
```

![AlphaComposite 演示](../Images/523f2ea8a09edfc2afcc61dea376bffa.png)

但请注意，该程序并未完全修复。如果将一个 JInternalFrame 拖到另一个上，您仍然会看到像素错误。我仍然需要解决错误...

# xcode - Mac Cocoa：无法释放窗口以取回其内存

> ID：13522004
> 
> 赞同：0
> 
> 时间：2012-11-23T01:10:58.623
> 
> 标签：xcode, macos, cocoa, malloc, nswindow

我有一个使用 ARC 用 Cocoa 编写的应用程序，它允许用户创建和打开新窗口。（*它就像一个文档模型，但我没有使用 nsdocument。*）

每个新窗口都需要大量内存，如果用户关闭窗口，我想取回这些内存。

我知道这`[window close]`只是隐藏了窗口，但我也在使用`[[self window] setReleasedWhenClosed:YES]`，但`NSwindowcontroller`关闭后它及其窗口仍然存在。

我窗口的 xib 文件中的对象包含许多用 malloc 分配的大型 c 数组，因此我还尝试通过向 windowcontroller`windowWillClose:`方法内的通知中心发送调用来释放它们，其中通知调用相关对象内的方法来在窗口关闭之前释放 C 数组。同样，这是没有效果的——即使尝试释放数组的方法被调用并且数组显然被释放，根据活动监视器，没有内存被释放。我也尝试过释放 中的数组`-(void) dealloc`，但这似乎从来没有在关闭时被调用过。

那么，当窗口关闭时，我怎样才能最好地恢复内存呢？

编辑：根据Benoit[对此 stackoverflow 页面的评论，](https://stackoverflow.com/questions/1935841/non-modal-windows-memory-management)

> “但是，窗口控制器拥有的窗口会忽略关闭时的释放。”

真的吗？如果是这样，我怎样才能在 ARC 中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:31:20.090

释放的内存不能总是返回给操作系统。这只是生活中的事实，至少在没有压缩垃圾收集器的系统上是这样。

***除非您确切*知道自己在看什么，否则**不要**关注活动监视器中的统计信息。除非您对系统有相当透彻的了解，否则这些信息通常没有用处——包括虚拟内存、共享库占用的内存部分以及您正在使用的分配器的行为。`NSArray`和类在`NSMutableArray`分配方面有一些相当不透明的行为，它们通常**不是**顾名思义的线性数组。**

 ****建议：**只要你的窗口被释放，忽略Activity Monitor中的统计信息。您可以使用仪器来检查泄漏。

举个为什么应该忽略 Activity Monitor 的例子：如果你在 1 KiB 块中分配 500 MiB，然后释放奇数块，显然它们不能返回给操作系统，因为页面粒度是 4大多数现代系统上的 KiB 最小值。如果您在 1 MiB 块中分配相同的 500 MiB 并释放奇数块，它们将返回给操作系统，并且内存使用量将减少 250 MiB，如 Activity Monitor 报告的那样。（请注意，4 KiB 阈值不是发生此行为的阈值。它取决于 的确切分配行为`malloc()`，以及在 OS X 上取决于 CPU 和 RAM 量的一些参数。）

但是，这可能无关紧要。在每种情况下，如果您再次分配 250 MiB，您将回到开始的位置。使用较少的私有内存很好，但这只会影响您的应用程序与其他应用程序的运行情况。**

# django - django syncdb 似乎没有运行我的自定义钩子

> ID：13522007
> 
> 赞同：0
> 
> 时间：2012-11-23T01:11:12.293
> 
> 标签：django, django-models, django-syncdb

在 [myapp]/sql/[model-name].sql 中，我有一些现有的 SQL 语句，我想在 CREATE TABLE 命令之后用作自定义挂钩。

我的应用程序位于 INSTALLED_APPS 中。如果我运行，我会看到列出的`./manage.py sql`。

找到了我的自定义钩子；如果我运行以下任何命令，我会看到 SQL 语句输出：

`./manage.py sqlall <myapp>` `./manage.py sqlcustom <myapp>` `./manage.py sql <myapp>`

我在我的 Mac 上使用 postgres 9.x。

如果我`psql`到同一个数据库（没有用户）并将它们从 .sql 文件复制并将它们粘贴到 psql 命令输入中，它们都可以工作......所以我相信它们是 postgres 理解的有效 SQL。这些都是非常简单的 INSERT 语句（下面提到的夹具）。

但是，如果我运行`./manage.py syncdb`这些语句要么不运行，要么它们被忽略或发生静默错误；我所知道的是新行不会出现在数据库中。我正在跟踪 postgres 日志文件，并且在运行 syncdb 时没有记录任何内容，所以我不知道它是否没有找到我的 .sql 文件，或者在它到达数据库之前解析它并发现一些错误。

我已经创建了一个 .json 文件，用于固定装置，与这些语句等效，并且`./manage.py loaddata <path-to-json-file>`工作正常：我的站点现在在数据库中显示这些值。这让我相信我的设置文件是正确的，并且我在 postgres 中写入的数据库设置正确，并且我在运行`./manage.py`.

我在其他帖子中看到 django 文档是错误的，我应该将自定义钩子放在“模型”目录中，但我不知道这是否正确；如果`sqlall`并`sqlcustom`找到我的钩子，不应该`syncdb`找到它吗？此外，我（还）没有模型目录，可能不需要它。

出于各种原因，我宁愿不使用 JSON 格式，但如果必须的话，我会......但是我在 .sql 格式上投入了很多时间，我真的很想知道发生了什么（而且我已经看够了）现有的相关问题，这可能对其他人有帮助）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:48:48.660

我相信我找到了它，尽管它是基于行为而不是任何真正的研究。我只是在任何地方都将“tile”更改为“tilexx”，并且它起作用了。[这个 django-project 帖子](https://code.djangoproject.com/ticket/6685)表明，如果存在某种 python 类名冲突，自定义 SQL 将不会被执行......并且“平铺”是很常见的事情。

所以答案是将我的班级名称更改为更独特的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T00:40:31.707

我一直在寻找类似问题的答案，试图用我从要移植到 Django 的 Flask 应用程序中转储的数据初始化一个 sqlite 数据库。与 OP 一样，以下所有内容都做了正确的事情：

```
./manage.py sqlall <myapp> ./manage.py sqlcustom <myapp> ./manage.py sql <myapp> 
```

但是，myapp/sql/myapp.sql 中的插入语句并未运行。仔细阅读[文档](https://docs.djangoproject.com/en/1.6/howto/initial-data/)发现了这个线索：

> Django 提供了一个钩子，用于传递数据库任意 SQL，该 SQL在您运行 syncdb 时**在 CREATE TABLE 语句之后执行。**

（重点补充）

问题是我已经注册了我的模型并运行了syncdb，所以有问题的表已经存在于数据库中，尽管它还没有数据。我推断，正因为如此，该`CREATE TABLE`语句没有在后续执行 syncdb 时运行，因此，我的自定义 sql 无法在该语句之后运行。解决方案是`DROP table table_name`然后再次运行 syncdb，此时我的自定义 sql 已运行。

# iphone - IOS程序如何存储数据库

> ID：13522024
> 
> 赞同：0
> 
> 时间：2012-11-23T01:13:50.853
> 
> 标签：iphone, ios, ios4

我是新手，我正在尝试重新编写这样的程序：[foodlover](http://www.youtube.com/watch?v=6mmHBEmfBn0)。但我不知道如何将数据库存储到此应用程序。有人能帮我吗？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:18:17.903

如果您想直接使用数据库，[SQLite是很好的选择。](http://www.sqlite.org/)如果您更愿意从对象的角度来思考，请查看[Core Data](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:52:02.587

当我开始尝试深入研究 Core Data 时，我发现本教程很有帮助；

[核心数据基础 - Tim Roadley](http://timroadley.com/2012/02/09/core-data-basics-part-1-storyboards-delegation/)

# tomcat - 配置 Tomcat 7 领域中的错误

> ID：13522026
> 
> 赞同：1
> 
> 时间：2012-11-23T01:14:14.973
> 
> 标签：tomcat, web.xml, configure, jdbcrealm, context.xml

嗨，任何人都可以帮我解决这个问题，我花了整个晚上但无法让它工作:(这是我的 web.xml

```
<security-constraint>
      <web-resource-collection>
          <web-resource-name>Welcome</web-resource-name>
          <description>Accersible by authorized user only</description>
          <url-pattern>/Welcome.jsp</url-pattern>
          <http-method>GET</http-method>
          <http-method>POST</http-method>
      </web-resource-collection>
      <auth-constraint>
          <role-name>member</role-name>
          <role-name>manager</role-name>
      </auth-constraint>
      <user-data-constraint>
          <transport-guarantee>NONE</transport-guarantee>
      </user-data-constraint>
  </security-constraint>

   <login-config>
      <auth-method>FORM</auth-method>
      <form-login-config>
          <form-login-page>/Login.jsp</form-login-page>
          <form-error-page>/wrongUser.jsp</form-error-page>
      </form-login-config>    
  </login-config> 
```

当我输入一个磨损的用户名或密码时，它会导致错误的User.jsp（它必须连接到数据库），但是如果我输入正确的用户名和密码，它会显示： message Invalid direct reference to form login page description The request sent客户端在语法上不正确（对表单登录页面的直接引用无效）。

有人知道它有什么问题吗？提前致谢

# java - 是否可以在 Android MapView 上投影椭圆？

> ID：13522028
> 
> 赞同：0
> 
> 时间：2012-11-23T01:14:21.493
> 
> 标签：java, android, android-mapview, gis, map-projections

从事需要在地图上标记椭圆形区域的项目。这可能吗？有没有人这样做过？环顾四周，我发现了很多关于如何绘制投影圆的参考，但不是椭圆。将不胜感激任何见解或帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T15:07:05.080

原来是这样！我创建了一个 ItemizedOverlay，它使用 project 方法绘制我需要的椭圆，将我的地理点转换为屏幕坐标。

我现在的问题，我希望有人有一些见解，是否可以创建一个不绘制图标的 ItemizedOverlay（或其他类型的覆盖）。就我而言，我想在地图上绘制椭圆，但我不想绘制默认图标。目前正在绘制椭圆，默认图标被放置在它们的中心，默认图标提供给 itemizedOverlay 构造函数。

我尝试使用 NULL 作为默认图标进行构建，但它会引发 NULLpointerException。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T17:40:36.970

为了解决上面提到的第二个问题，我创建了一个空的 Drawable（扩展的 Drawable 并将所有内容都留空），并将此类的实例作为默认标记发送，从而使默认标记实际上为空。

按预期工作。

# iphone - xcconfig 文件设备系列 - 通用

> ID：13522030
> 
> 赞同：0
> 
> 时间：2012-11-23T01:15:02.377
> 
> 标签：iphone, objective-c, ios, xcconfig

我正在通过配置文件根据正在运行的设备更改我的应用程序的名称，即我相应地在显示名称中放入了 _iPhone、_iPad 或 _Universal。

为此，我使用如下 xcconfig 文件：

```
TARGETED_DEVICE_FAMILY = 1,2

APP_NAME1 = Something_iPhone
APP_NAME2 = Something_iPad
APP_NAME1,2 = Something_Universal //1,2 The "," causes a problem here. 
```

问题是逗号字符导致了问题：*Build setting 'APP_NAME1,2' does not have a valid base name.*

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:32:47.413

使用 iPhone 或 iPad 等商标名称的应用程序将不会被批准进入应用程序商店，请尝试使用其他产品。即使在二进制文件中而不是在显示中，我也有过这种情况，他们在审查时拒绝了它。如果您想创建一组通用代码，请查看此代码片段。我在我的通用应用程序中经常使用它。

```
`if __IPHONE_OS_VERSION_MAX_ALLOWED >= 30200
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    NSLog(@"iPad Idiom"); 
else
#else
    NSLog(@"iPhone Idiom");
#endif 
```

阿德里安

# java - 想在 Timer 生成事件时另外画线

> ID：13522031
> 
> 赞同：1
> 
> 时间：2012-11-23T01:15:12.120
> 
> 标签：java, swing, java-2d

正如我在标题中所写，我还想`drawLine`在`Timer`生成事件时添加。

线将像绘制

第一次;

```
ㅡ 
```

第二次;

```
ㅡ
ㅡ 
```

1.  我希望在之前维护的情况下添加行
2.  如果第一个目的无法完成，（因为我还不擅长 Java，这只是我的想法）我想在第 N 个事件中绘制 N 行，然后我在第 (N+1) 个事件中重新绘制新的 N+1 行。

哪些可以用Java完成？

PS如何停止Swing `Timer`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:18:27.857

您基本上必须（不按顺序）：

*   构建一个在计时器的每个滴答声上发生的事件
*   将它传递给一个新的[计时器](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)（停止计时器在文档中）
*   设置某种递增计数器，基于坐标或基于刻度
*   根据递增计数器覆盖`paintComponent`组件中的方法以绘制线条
*   从事件内部，调用`repaint()`您的组件（将在每个计时器滴答时发生）

单独完成每一项任务，当你觉得你已经掌握了每一项时，你可以试着把它们放在一起。

# javascript - jQuery $.getJSON() 不工作

> ID：13522032
> 
> 赞同：-1
> 
> 时间：2012-11-23T01:15:28.477
> 
> 标签：javascript, jquery, json, getjson

我正在尝试解析 JSON 响应，但无法执行 $.getJSON 中的任何指令。

json.html

```
<!DOCTYPE html>
<html>
    <head>
         <script src="js/jquery.js"></script>
    </head>
    <body>
         <script>
            $.getJSON("json.php?jsoncallback=?", function(data) {
               var a = data[0].cve_id + 'something';
            });
            alert(a); //chrome says "a is not defined"
         </script>
     </body>
</html> 
```

json.php：

```
<?php
header("Content-Type: application/json", true);
echo file_get_contents("http://www.cvedetails.com/json-feed.php?numrows=10&vendor_id=0&product_id=0&version_id=0&hasexp=1&opec=1&opov=1&opcsrf=1&opfileinc=1&opgpriv=1&opsqli=1&opxss=1&opdirt=1&opmemc=1&ophttprs=1&opbyp=1&opginf=1&opdos=1&orderby=1&cvssscoremin=0");
?> 
```

知道为什么吗？

之后：

感谢您的回复。我明白了原因。

我已经从 to 切换`$.getJSON`到`$.get`，指定`data type`to `json`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:23:04.463

JSON 调用是异步的，因此在您的服务器返回数据之前不会调用回调函数，但是 javascript 代码会一直运行到下一行代码。导致仍然未定义尝试将其更改为以下内容：

```
$.getJSON("json.php?jsoncallback=?", function(data) {
    var a = data[0].cve_id + 'something';
    alert(a)
}); 
```

您可以在回调之外定义其他方法，并在事件发生时调用 em

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:23:47.863

**var a**在回调闭包（匿名函数）中定义。使用闭包的主要原因之一是它们产生私有作用域。即函数内部定义的任何变量都不能用于函数外部的代码。

这将起作用：

```
$.getJSON("json.php?jsoncallback=?", function(data) {
    var a = data[0].cve_id + 'something';
    alert(a);
}); 
```

# php - x 秒后终止 proc_open

> ID：13522033
> 
> 赞同：1
> 
> 时间：2012-11-23T01:15:40.247
> 
> 标签：php, process, exec, pdftk, proc-open

我正在使用 pdftk 合并 pdf 文件。有时，用户上传格式不正确的 pdf，它会挂起进程，不返回任何错误并消耗所有服务器资源。为了防止这种情况发生，我正在考虑实现进程调用，`proc_open`并希望为进程设置运行时间限制，如果超过时间限制则终止进程。

下面是我用来合并 pdf 文件的函数示例，如果我设置

`stream_set_blocking($process, 0);`

它返回一个错误：

`stream_set_blocking(): supplied resource is not a valid stream resource`

我认为此函数中的某些内容格式不正确，希望有人能够为我指出正确的方向...该函数目前没有返回任何错误，但不会根据需要在 30 秒后终止

```
 protected function pdf_merge($documents,$output_file,$time = 30){      

        $end = time() + $time;
        $cmd = sprintf('/usr/local/bin/pdftk %s cat output %s', $documents, $output_file);

        $descriptorspec = array(
           0 => array("pipe", "r"),  
           1 => array("pipe", "w"),  
           2 => array("file","./error.log","a")
        );

        $process = proc_open($cmd, $descriptorspec, $pipes);

        if (is_resource($process)) {
            stream_set_blocking($pipes[1], 0);
            while (!feof($pipes[1]) && (time() < $end)) {

                fwrite($pipes[0], stream_get_contents($pipes[0]));
                fclose($pipes[0]);

                $pdf_content = stream_get_contents($pipes[1]);
                fclose($pipes[1]);

                $return_value = proc_close($process);

                return $return_value;
            }   
            error_log('file is taking too long... kill process');
            proc_terminate();               
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:02:21.437

Perhaps I'm off base here, does most of this code run?

```
fwrite($pipes[0], stream_get_contents($pipes[0])); 
```

Looks like you are trying to write to the pipe whatever you can read from the pipe...

Also, you may want to check with get_proc_status() as the command may have completed by the time you try to set the blocking...

# php - 使用php查询\d 我知道 \d 仅适用于 psql，我可以使用 psql -E 查看用于实现 \d 的实际 SQL 查询是什么 这是我的例子 \d foo_table ********* QUERY ********** SELECT c.oid, n.nspname, c.relname FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespa 问问题 问问题 2012-11-23T01:16:00.370 964 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我知道 \d 仅适用于 psql，我可以使用 psql -E 查看用于实现 \d 的实际 SQL 查询是什么 这是我的例子 \d foo_table ********* QUERY ********** SELECT c.oid, n.nspname, c.relname FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace WHERE c.relname ~ '^(foo_table)$' AND pg_catalog.pg_table_is_visible(c.oid) ORDER BY 2, 3; ************************** ********* QUERY ********** SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers, c.relhasoids, '', c.reltablespace FROM pg_catalog.pg_class c LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid) WHERE c.oid = '16386' ************************** ********* QUERY ********** SELECT a.attname, pg_catalog.format_type(a.atttypid, a.atttypmod), (SELECT substring(pg_catalog.pg_get_expr(d.adbin, d.adrelid) for 128) FROM pg_catalog.pg_attrdef d WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef), a.attnotnull, a.attnum FROM pg_catalog.pg_attribute a WHERE a.attrelid = '16386' AND a.attnum > 0 AND NOT a.attisdropped ORDER BY a.attnum ************************** ********* QUERY ********** SELECT c.oid::pg_catalog.regclass FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i WHERE c.oid=i.inhparent AND i.inhrelid = '16386' ORDER BY inhseqno ************************** 有多个查询，其中一些以“;”结尾 有些不是。我完全糊涂了。我应该在 PHP 中使用什么查询来执行与“\d”相同的操作？ 每个自定义帖子的 wordpress 侧边栏 我正在尝试让 wordpress 为自定义帖子类型的每个帖子添加一个侧边栏。因此，当我转到小部件区域时，我希望侧边栏的数量与我命名为投资组合的自定义帖子类型的帖子一样多。 这是我正在使用的代码，但我只得到 1 个没有标题的侧边栏。 更新：我在代码中添加了全局 $posts，现在我得到了侧边栏，然后我将 the_title() 更改为 get_the_title()。现在它正在工作。完整代码如下。如果有人有更好的解决方案，请告诉我。 function the_slug() { $post_data = get_post($post->ID, ARRAY_A); $slug = $post_data['post_name']; return $slug; } add_action( 'init', 'portfolios_sidebars' ); /** * Create widgetized sidebars for each portfolio * * This function is attached to the 'init' action hook. */ function portfolios_sidebars() { $args = array( 'post_type' => 'portfolios', 'numberposts' => -1, 'post_status' => 'publish'); $portfolios = get_posts( $args ); global $post; if ($portfolios) { foreach ( $portfolios as $post ) { setup_postdata($post); $portfoliotitle = get_the_title(); $portfolioslug = the_slug(); register_sidebar( array( 'name' => $portfoliotitle, 'id' => $portfolioslug . '-sidebar', 'description' => 'This is the ' . $portfoliotitle . ' widgetized area', 'before_widget' => '', 'before_title' => '

#### ', 'after_title' => '

', ) ); } wp_reset_postdata(); } } phpsqlpostgresqlpsql 4 1 回答 1 This answer is useful 1 幸运的是，我找到了答案。 http://www.linuxscrew.com/2009/07/03/postgresql-show-tables-show-databases-show-columns/ 于 2012-11-23T01:26:06.637 回答 Related 1 ios - 处理应用购买 - 从我自己的服务器获取产品标识符 2 javascript - 如何检索树形面板的节点？ 1 machine-learning - 向词袋模型添加新术语 3 iphone - 如何检查 Core Data 是否已经有值？ 2 javascript - jquery 对话框在 Internet Explorer 中加载时不显示 CSS 样式 1 php - 我可以使用 PHP date() 测试夏令时 (DST) 吗？ 3 mysql - 仅使用一次时出现“在 DEFAULT 或 ON UPDATE 子句中只有一个带有 CURRENT_TIMESTAMP 的 TIMESTAMP 列”错误 2 c# - 导航系统并保持屏幕位置 1 php - 缩小 php - 禁用 css uri 的重写不起作用 2 vb.net - 为什么我只能从此代码中获得一个输出值（并且没有调试输出）？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13522035
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, sql, postgresql, psql

我知道 \d 仅适用于 psql，我可以使用 psql -E 查看用于实现 \d 的实际 SQL 查询是什么

这是我的例子

```
\d foo_table
********* QUERY **********
SELECT c.oid,
  n.nspname,
  c.relname
FROM pg_catalog.pg_class c
     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE c.relname ~ '^(foo_table)$'
  AND pg_catalog.pg_table_is_visible(c.oid)
ORDER BY 2, 3;
**************************

********* QUERY **********
SELECT c.relchecks, c.relkind, c.relhasindex, c.relhasrules, c.relhastriggers,        
c.relhasoids, '', c.reltablespace
FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_class tc ON (c.reltoastrelid = tc.oid)
WHERE c.oid = '16386'

**************************

********* QUERY **********
SELECT a.attname,
  pg_catalog.format_type(a.atttypid, a.atttypmod),
  (SELECT substring(pg_catalog.pg_get_expr(d.adbin, d.adrelid) for 128)
   FROM pg_catalog.pg_attrdef d
   WHERE d.adrelid = a.attrelid AND d.adnum = a.attnum AND a.atthasdef),
  a.attnotnull, a.attnum
FROM pg_catalog.pg_attribute a
WHERE a.attrelid = '16386' AND a.attnum > 0 AND NOT a.attisdropped
ORDER BY a.attnum
**************************

********* QUERY **********
SELECT c.oid::pg_catalog.regclass FROM pg_catalog.pg_class c, pg_catalog.pg_inherits i 
WHERE c.oid=i.inhparent AND i.inhrelid = '16386' ORDER BY inhseqno
************************** 
```

有多个查询，其中一些以“;”结尾 有些不是。我完全糊涂了。我应该在 PHP 中使用什么查询来执行与“\d”相同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:26:06.637

幸运的是，我找到了答案。 [http://www.linuxscrew.com/2009/07/03/postgresql-show-tables-show-databases-show-columns/](http://www.linuxscrew.com/2009/07/03/postgresql-show-tables-show-databases-show-columns/)

# wordpress - 每个自定义帖子的 wordpress 侧边栏

> ID：13522036
> 
> 赞同：2
> 
> 时间：2012-11-23T01:16:20.310
> 
> 标签：wordpress, custom-post-type, sidebar

我正在尝试让 wordpress 为自定义帖子类型的每个帖子添加一个侧边栏。因此，当我转到小部件区域时，我希望侧边栏的数量与我命名为投资组合的自定义帖子类型的帖子一样多。

这是我正在使用的代码，但我只得到 1 个没有标题的侧边栏。

更新：我在代码中添加了全局 $posts，现在我得到了侧边栏，然后我将 the_title() 更改为 get_the_title()。现在它正在工作。完整代码如下。如果有人有更好的解决方案，请告诉我。

```
function the_slug() {
    $post_data = get_post($post->ID, ARRAY_A);
    $slug = $post_data['post_name'];
    return $slug; 
}

add_action( 'init', 'portfolios_sidebars' );
/**
 * Create widgetized sidebars for each portfolio
 *
 * This function is attached to the 'init' action hook.
 */

function portfolios_sidebars() {
    $args = array( 'post_type' => 'portfolios', 'numberposts' => -1, 'post_status' => 'publish'); 
    $portfolios = get_posts( $args );
    global $post;
    if ($portfolios) {
        foreach ( $portfolios as $post ) {
            setup_postdata($post);
            $portfoliotitle = get_the_title();
            $portfolioslug = the_slug();
            register_sidebar( array(
                'name' => $portfoliotitle,
                'id' => $portfolioslug . '-sidebar',
                'description' => 'This is the ' . $portfoliotitle . ' widgetized area',
                'before_widget' => '<aside id="%1$s" class="widget %2$s" role="complementary">',
                'after_widget' => '</aside>',
                'before_title' => '<h4 class="widget-title">',
                'after_title' => '</h4>',
            ) );
        }
        wp_reset_postdata();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T22:56:33.713

我只会删除不必要的函数调用：

```
add_action( 'init', 'portfolios_sidebars' );
/**
 * Create widgetized sidebars for each portfolio
 *
 * This function is attached to the 'init' action hook.
 */

function portfolios_sidebars() {
    $args = array( 'post_type' => 'portfolios', 'numberposts' => -1, 'post_status' => 'publish'); 
    $portfolios = get_posts( $args );
    if ($portfolios) {
        foreach ( $portfolios as $portfolio ) {
            $portfoliotitle = $portfolio->post_title;
            $portfolioslug = $portfolio->post_name;
            register_sidebar( array(
                'name' => $portfoliotitle,
                'id' => $portfolioslug . '-sidebar',
                'description' => 'This is the ' . $portfoliotitle . ' widgetized area',
                'before_widget' => '<aside id="%1$s" class="widget %2$s" role="complementary">',
                'after_widget' => '</aside>',
                'before_title' => '<h4 class="widget-title">',
                'after_title' => '</h4>',
            ) );
        }
    }
} 
```

# matplotlib - matplotlib 中颜色条的几何形状

> ID：13522045
> 
> 赞同：5
> 
> 时间：2012-11-23T01:17:42.163
> 
> 标签：matplotlib, geometry

用颜色条绘制图形，例如 matplotlib 库的[椭圆集合](http://matplotlib.org/examples/pylab_examples/ellipse_collection.html)，我试图了解图形的几何形状。如果我在源代码中添加以下代码（而不是`plt.show()`）：

```
cc=plt.gcf().get_children()
print(cc[1].get_geometry())
print(cc[2].get_geometry()) 
```

我明白了

```
(1, 2, 1)
(3, 1, 2) 
```

我理解第一个 - 1 行，两列，首先绘制（大概第二个是颜色条），但我不理解第二个，我希望它是（1,2,2）。这些值对应什么？

编辑：似乎 cc 中的元素没有相同的轴，这可以解释差异。不知何故，我仍然对报告的几何形状感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T06:19:54.573

发生的事情是，当您调用时`colorbar`，`use_gridspec`默认为`True`which 然后调用`matplotlib.colorbar.make_axes_gridspec`然后创建一个 1 x 2 网格来保存绘图和 cbar 轴，然后 cbar 轴本身实际上是一个 3 x 1 网格，其纵横比已调整

实现这一目标的关键`matplotlib.colorbar.make_axes_gridspec`是

```
gs2 = gs_from_sp_spec(3, 1, subplot_spec=gs[1], hspace=0.,
                      height_ratios=wh_ratios) 
```

因为`wh_ratios == [0.0, 1.0, 0.0]`默认情况下，上面和下面的其他两个子图是中间图大小的 0 倍。

我已经把我为解决这个问题所做的事情放到了[一个 IPython 笔记本中](http://nbviewer.ipython.org/6228465)

# python - Python - mencoder 不会在不同的文件夹中生成视频

> ID：13522048
> 
> 赞同：2
> 
> 时间：2012-11-23T01:17:56.330
> 
> 标签：python, mencoder

Python - mencoder 不会在不同的文件夹中生成视频。

我正在使用 Python 调用 mencoder 来获取一堆图像并将它们转换为视频。我要做的代码是：

```
def Video(self,X,Y,location):#generate a video from the images
    location=location.replace('\\','/')
    name='Slide.avi'

    command = ('C:\Downloads\MPlayer-athlon-svn-34401\mencoder.exe',# location of mencoder
               'mf://'+location+'/*.png',# location of the images
               '-mf',
               'type=png:w='+str(X)+':h='+str(Y)+':fps=25',#size of video and fps
               '-ovc',
               'lavc',
               '-lavcopts',
               'vcodec=ffv1',
               '-oac',
               'copy',
               '-o',
               location+'/'+name)#output 

   subprocess.check_call(command) 
```

其中 location 是包含我想串成视频的所有图像的文件夹。现在的问题是，如果我的 python 脚本位于其中也包含图像的文件夹中，那么它工作得很好，我会得到一个视频。但如果位置不同，mencoder 只会给我一个空视频。我不明白为什么会这样。如果我的 python 脚本位于该文件夹中，则该代码有效，但如果它位于不同的文件夹中，则该代码无效。

我已经打开了 mencoder 的详细信息，这就是它成功时得到的结果：

```
MEncoder Sherpya-SVN-r34401-4.6.2 (C) 2000-2011 MPlayer Team

Setting PATH to C:\Downloads\MPlayer-athlon-svn-34401\codecs

get_path('codecs.conf') -> 'C:\Users\Main/mplayer/codecs.conf'

Reading optional codecs config file C:\Users\Main/mplayer/codecs.conf: No such file or directory

Reading optional codecs config file /mingw/etc/mplayer/codecs.conf: No such file or directory

Using built-in default codecs.conf.

init_freetype

Using MMX (with tiny bit MMX2) Optimized OnScreenDisplay

get_path('fonts') -> 'C:\Users\Main/mplayer/fonts'

Configuration: --extra-cflags=-I/c/Work/mplayer/live --extra-ldflags=-lws2_32 --prefix=/mingw --enable-static --enable-md5sum --enable-menu --enable-faac --enable-enca --enable-sdl --enable-caca --enable-gl --enable-freetype --enable-png --enable-mng --enable-jpeg --enable-gif --enable-tga --enable-mad --enable-tv --enable-theora --disable-vidix --disable-faac-lavc --disable-inet6 --flavor=athlon

WINSOCK2 init: 0

STREAM: [mf] mf://C:/Users/Main/Desktop/temp/*.png

STREAM: Description: Multiple files input

STREAM: Author: Benjamin Zores, Albeu

STREAM: Comment: 

success: format: 16  data: 0x0 - 0x0

MF file format detected.

[mf] search expr: C:/Users/Main/Desktop/temp/*.png

[mf] number of files: 50 (200)

==> Found video stream: 0

VIDEO:  [MPNG]  560x560  24bpp  25.000 fps    0.0 kbps ( 0.0 kbyte/s)

[V] filefmt:16  fourcc:0x474E504D  size:560x560  fps:25.000  ftime:=0.0400

WINSOCK2 init: 0

WINSOCK2 init: 0

[file] File size is 0 bytes

STREAM: [file] C:/Users/Main/Desktop/temp/Slide.avi

STREAM: Description: File

STREAM: Author: Albeu

STREAM: Comment: based on the code from ??? (probably Arpi)

Opening video filter: [expand osd=1]

Expand: -1 x -1, -1 ; -1, osd: 1, aspect: 0.000000, round: 1

==========================================================================

Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family

[png @ 01235100]err{or,}_recognition separate: 2; 1

[png @ 01235100]err{or,}_recognition combined: 2; 196609

INFO: libavcodec init OK!

Selected video codec: [ffpng] vfm: ffmpeg (FFmpeg PNG)

==========================================================================

[ffmpeg] aspect_ratio: 0.000000

VDec: vo config request - 560 x 560 (preferred colorspace: RGB 24-bit)

Trying filter chain: expand lavc

Could not find matching colorspace - retrying with -vf scale...

Opening video filter: [scale]

SwScale params: -1 x -1 (-1=no scaling)

Trying filter chain: scale expand lavc

VDec: using RGB 24-bit as output csp (no 6)

Movie-Aspect is undefined - no prescaling applied.

VO Config (560x560->560x560,flags=0,'MPlayer',0x52474218)

SwScaler: reducing / aligning filtersize 1 -> 4

SwScaler: reducing / aligning filtersize 1 -> 4

SwScaler: reducing / aligning filtersize 1 -> 1

SwScaler: reducing / aligning filtersize 9 -> 8

[swscaler @ 01216d40]BICUBIC scaler, from rgb24 to yuv420p using MMX2

[swscaler @ 01216d40]560x560 -> 560x560

[swscaler @ 01216d40]lum srcW=560 srcH=560 dstW=560 dstH=560 xInc=65536 yInc=65536

[swscaler @ 01216d40]chr srcW=280 srcH=560 dstW=280 dstH=280 xInc=65536 yInc=131072

REQ: flags=0x401  req=0x0  

REQ: flags=0x401  req=0x0  

videocodec: libavcodec (560x560 fourcc=31564646 [FFV1])

[ffv1 @ 01235100]err{or,}_recognition separate: 1; 1

[ffv1 @ 01235100]err{or,}_recognition combined: 1; 65537

[ffv1 @ 01235100]Unsupported bit depth: 0

*** [scale] Allocating mp_image_t, 560x560x24bpp RGB packed, 940800 bytes

*** [lavc] Allocating mp_image_t, 560x560x12bpp YUV planar, 470400 bytes

*** [expand] Direct Rendering mp_image_t, 560x560x12bpp YUV planar, 470400 bytes

Unicode font: 773 glyphs.

Unicode font: 773 glyphs.

Muxer frame buffer sending 1 frame(s) to the muxer.

Writing header...

ODML: Aspect information not (yet?) available or unspecified, not writing vprp header.

Writing header...

ODML: Aspect information not (yet?) available or unspecified, not writing vprp header.

Pos:   0.0s      1f ( 1%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/14 D/B/S 0/0/0 

*** [scale] Allocating mp_image_t, 560x560x24bpp RGB packed, 940800 bytes

Pos:   0.1s      2f ( 3%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/12 D/B/S 0/0/0 
Pos:   0.1s      3f ( 5%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/11 D/B/S 0/0/0 
Pos:   0.2s      4f ( 7%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/11 D/B/S 0/0/0 
Pos:   0.2s      5f (10%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.2s      6f (11%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.3s      7f (14%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.3s      8f (15%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.4s      9f (18%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.4s     10f (20%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.4s     11f (21%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.5s     12f (23%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.5s     13f (25%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.6s     14f (28%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.6s     15f (30%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.6s     16f (31%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/10 D/B/S 0/0/0 
Pos:   0.7s     17f (34%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.7s     18f (36%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.8s     19f (37%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.8s     20f (40%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.8s     21f (41%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.9s     22f (43%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   0.9s     23f (46%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.0s     24f (47%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.0s     25f (50%)   0fps Trem:   0min   1mb  A-V:0.000 [0:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.0s     26f (52%)   0fps Trem:   0min   1mb  A-V:0.000 [5215:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.1s     27f (55%)   0fps Trem:   0min   1mb  A-V:0.000 [5176:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.1s     28f (56%)   0fps Trem:   0min   1mb  A-V:0.000 [5136:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.2s     29f (58%)   0fps Trem:   0min   1mb  A-V:0.000 [5097:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.2s     30f (61%)   0fps Trem:   0min   1mb  A-V:0.000 [5059:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.2s     31f (62%)   0fps Trem:   0min   1mb  A-V:0.000 [5021:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.3s     32f (64%)   0fps Trem:   0min   1mb  A-V:0.000 [4983:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.3s     33f (67%)   0fps Trem:   0min   1mb  A-V:0.000 [4946:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.4s     34f (68%)   0fps Trem:   0min   1mb  A-V:0.000 [4910:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.4s     35f (70%)   0fps Trem:   0min   1mb  A-V:0.000 [4873:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.4s     36f (73%)   0fps Trem:   0min   1mb  A-V:0.000 [4838:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.5s     37f (75%)   0fps Trem:   0min   1mb  A-V:0.000 [4802:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.5s     38f (76%)   0fps Trem:   0min   1mb  A-V:0.000 [4767:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.6s     39f (79%)   0fps Trem:   0min   1mb  A-V:0.000 [4732:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.6s     40f (81%)   0fps Trem:   0min   1mb  A-V:0.000 [4698:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.6s     41f (82%)   0fps Trem:   0min   1mb  A-V:0.000 [4664:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.7s     42f (85%)   0fps Trem:   0min   1mb  A-V:0.000 [4631:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.7s     43f (87%)   0fps Trem:   0min   1mb  A-V:0.000 [4599:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.8s     44f (88%)   0fps Trem:   0min   1mb  A-V:0.000 [4566:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.8s     45f (91%)   0fps Trem:   0min   1mb  A-V:0.000 [4534:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.8s     46f (93%)   0fps Trem:   0min   1mb  A-V:0.000 [4502:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.9s     47f (94%)   0fps Trem:   0min   1mb  A-V:0.000 [4471:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   1.9s     48f (97%)   0fps Trem:   0min   1mb  A-V:0.000 [4440:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   2.0s     49f (100%)   0fps Trem:   0min   1mb  A-V:0.000 [4409:0] A/Vms 0/9 D/B/S 0/0/0 
Pos:   2.0s     50f (100%)   0fps Trem:   0min   1mb  A-V:0.000 [4378:0] A/Vms 0/9 D/B/S 0/0/0 

ds_fill_buffer: EOF reached (stream: video)  

Flushing video frames.

Writing index...

Writing header...

ODML: Aspect information not (yet?) available or unspecified, not writing vprp header.

Video stream: 4378.820 kbit/s  (547352 B/s)  size: 1094705 bytes  2.000 secs  50 frames

Uninit video: ffmpeg

WINSOCK2 uninit

deo stream: 4378.820 kbit/s  (547352 B/s)  

size: 1094705 bytes  2.000 secs  50 framesUninit video: ffmpegWINSOCK2 

uninit 
```

但是当我更改文件夹时，我得到了这个：

```
MEncoder Sherpya-SVN-r34401-4.6.2 (C) 2000-2011 MPlayer Team

Setting PATH to C:\Downloads\MPlayer-athlon-svn-34401\codecs

get_path('codecs.conf') -> 'C:\Users\Main/mplayer/codecs.conf'

Reading optional codecs config file C:\Users\Main/mplayer/codecs.conf: No such file or directory

Reading optional codecs config file /mingw/etc/mplayer/codecs.conf: No such file or directory

Using built-in default codecs.conf.

init_freetype

Using MMX (with tiny bit MMX2) Optimized OnScreenDisplay

get_path('fonts') -> 'C:\Users\Main/mplayer/fonts'

Configuration: --extra-cflags=-I/c/Work/mplayer/live --extra-ldflags=-lws2_32 --prefix=/mingw --enable-static --enable-md5sum --enable-menu --enable-faac --enable-enca --enable-sdl --enable-caca --enable-gl --enable-freetype --enable-png --enable-mng --enable-jpeg --enable-gif --enable-tga --enable-mad --enable-tv --enable-theora --disable-vidix --disable-faac-lavc --disable-inet6 --flavor=athlon

WINSOCK2 init: 0

STREAM: [mf] mf://C:/Users/Main/Desktop/marshmarshmarshmarsh/*.png

STREAM: Description: Multiple files input

STREAM: Author: Benjamin Zores, Albeu

STREAM: Comment: 

success: format: 16  data: 0x0 - 0x0

MF file format detected.

[mf] search expr: C:/Users/Main/Desktop/marshmarshmarshmarsh/*.png

[mf] number of files: 50 (200)

==> Found video stream: 0

VIDEO:  [MPNG]  560x560  24bpp  25.000 fps    0.0 kbps ( 0.0 kbyte/s)

[V] filefmt:16  fourcc:0x474E504D  size:560x560  fps:25.000  ftime:=0.0400

WINSOCK2 init: 0

WINSOCK2 init: 0

[file] File size is 0 bytes

STREAM: [file] C:/Users/Main/Desktop/marshmarshmarshmarsh/Slide.avi

STREAM: Description: File

STREAM: Author: Albeu

STREAM: Comment: based on the code from ??? (probably Arpi)

Opening video filter: [expand osd=1]

Expand: -1 x -1, -1 ; -1, osd: 1, aspect: 0.000000, round: 1

==========================================================================

Opening video decoder: [ffmpeg] FFmpeg's libavcodec codec family

[png @ 01235100]err{or,}_recognition separate: 2; 1

[png @ 01235100]err{or,}_recognition combined: 2; 196609

INFO: libavcodec init OK!

Selected video codec: [ffpng] vfm: ffmpeg (FFmpeg PNG)

==========================================================================

ds_fill_buffer: EOF reached (stream: video)  

Flushing video frames.

Writing index...

Writing header...

ODML: Aspect information not (yet?) available or unspecified, not writing vprp header.

Video stream:      nan kbit/s  (-2147483648 B/s)  size: 0 bytes  0.000 secs  0 frames

Uninit video: ffmpeg

WINSOCK2 uninit 
```

这是仅使用 50 个 png 图像的测试运行。为了成功运行，我的 python 脚本位于包含图像的文件夹中，并告诉它把视频放在那里。（“临时”文件夹）

失败的运行是一个包含图像的文件夹，但不是我的 python 脚本。（'marshmarshmarshmarsh' 文件夹）。它似乎很好地找到了图像，但不知何故无法从中生成视频。我不明白为什么它只能在一个文件夹中工作，但是当它被告知将视频放在其他文件夹中时却无法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-03T22:44:01.843

迟到的答案：我遇到了同样的问题，尽管进行了大量搜索，但我发现的唯一解决方法是更改​​目标目录，制作视频然后切换回原始目录，如果您需要在它：

```
# Make sure the image directory exists
if not os.path.exists(img_dir):
    raise Exception("\nThe directory '" + img_dir + "' does not exist !")

# Navigate to the image directory
os.chdir(img_dir)

# Sort image files
subprocess.call('dir /b /o *.png > files.txt', shell=True)  

animationname = "Animation_" + foldername[:-1].lower() + "_" + scalar_to_export +  ".avi"
command = ('mencoder',
           'mf://@files.txt', #works only in the current dir
           '-mf',
           'type=png:fps='+str(fps),
           '-ovc',
           'lavc',
           '-lavcopts',
           'vcodec=mpeg4',
           '-oac',
           'copy',
           '-o',
           dirname + animationname )   
subprocess.call(command)    

# Switch back to the original directory
os.chdir(dirname) 
```

# php - 使用盐的 php 加密/解密函数 - 如何？

> ID：13522054
> 
> 赞同：1
> 
> 时间：2012-11-23T01:18:47.740
> 
> 标签：php, salt, password-encryption

我正在使用 php 作为基本应用程序登录系统，能够编辑帐户信息和删除帐户。我有一个mysql数据库。我需要使用盐加密/解密密码。我该怎么做？只需要确保数据是安全的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:23:54.963

您不想加密密码。你想对它们进行哈希处理。

一些阅读： http: [//php.net/manual/en/faq.passwords.php](http://php.net/manual/en/faq.passwords.php)

相关的 SO 帖子：[如何散列密码并取回密码](https://stackoverflow.com/questions/5015420/how-to-hash-the-password-and-get-it-back)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:45:56.710

密码应该是散列的，与加密相反，这是一种单向函数，它应该使得不可能取回原始密码。

1.  仅将哈希值存储在数据库中，并与此值进行比较以进行登录。
2.  每个密码使用唯一的盐，它可以以明文形式存储在与哈希值相同的数据库字段中。
3.  使用像 Bcrypt 这样的慢速密钥派生函数来防止暴力攻击。

建议使用像[phpass](http://www.openwall.com/phpass/)这样完善的库来构建哈希。如需进一步阅读，请查看本[教程](http://www.martinstoeckli.ch/hash/hash.html)。

# php - 每 x 秒刷新多个 PHP 值的最佳方法？

> ID：13522060
> 
> 赞同：0
> 
> 时间：2012-11-23T01:19:47.223
> 
> 标签：php, jquery

我有一个`index.php`文件，我想`getdata.php`每 5 秒运行一次。

`getdata.php`返回多个需要显示在不同位置的变量`index.php`。

我一直在尝试使用 jQuery`.load()`函数，但没有成功。
它正在刷新`<div>`上不同位置的 12 个元素`index.php`，但不会重新运行`getdata.php`应该获取最新数据的文件。

但是如果我点击浏览器刷新按钮，数据就会被刷新。

`getdata.php`返回大约 15 个变量。

这是一些示例代码：

```
<script>
    var refreshId = setInterval(function()
    {
         $('#Hidden_Data').load('GetData.php'); // Shouldn´t this return $variables
         $('#Show_Data_001').fadeOut("slow").fadeIn("slow");
         $('#Show_Data_002').fadeOut("slow").fadeIn("slow");
         $('#Show_Data_003').fadeOut("slow").fadeIn("slow");
         $('#...').fadeOut("slow").fadeIn("slow");
    }, 5000); // Data refreshed every 5 seconds
    */
</script> 
```

这是一个例子`GetData.php`：

```
$query = "SELECT column1, COUNT(column2) AS variable FROM table GROUP BY column";
$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
$column1 = $row['column1 '];
$variable = $row['variable '];

if($column1 == "Text1") { $variable1 = $variable; }
    elseif($column1 == "Text2") { $variable2 = $variable; }
              ... continues to variable 15 ...
} 
```

然后在页面的下方，HTML 元素显示数据：

```
<div id="Hidden_Data"></div>
<div id="Show_Data_001"><?php echo $variable1; ?></div>
<div id="Show_Data_002"><?php echo $variable2; ?></div>
<div id="Show_Data_003"><?php echo $variable3; ?></div>
... 
```

我尝试使用此处建议的数据参数： [https ://stackoverflow.com/a/8480059/498596](https://stackoverflow.com/a/8480059/498596)

但我无法完全理解如何每 5 秒加载一次所有变量并在索引页面上调用它们。

今天`GetData.php`页面刚刚返回`$variable1 = X; $variable2 = Y`等等。

**更新**
由于某种原因，jQuery 没有加载`GatData.php`文件并刷新变量。

我尝试将“Hidden_​​Data”添加到`include('GetData.php')`，然后变量在页面上是可读的。

如果我删除这部分，页面会显示“未设置变量”警告，提示 jQuery 没有将`GetData.php`脚本加载到`Hidden_Data` `<div>`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:25:28.703

尝试

```
 <script>
        var refreshId = setInterval(function()
        {
             $('#Hidden_Data').load('GetData.php', function() { // Shouldn´t this return $variables
                 $('#Show_Data_001').fadeOut("slow").fadeIn("slow");
                 $('#Show_Data_002').fadeOut("slow").fadeIn("slow");
                 $('#Show_Data_003').fadeOut("slow").fadeIn("slow");
                 $('#...').fadeOut("slow").fadeIn("slow"); });
        }, 5000); // Data refreshed every 5 seconds
        */
    </script> 
```

以上假设，您的代码返回 HTML 元素的片段（Show_Data_XXX），但现在您已经澄清了上面的问题并不能单独帮助您......

您需要做的是在您的 php 中发回新的值元素或将结果作为数据发回并更新现有元素。

将您的元素放入 php 数组中，然后在 sql 调用后将其发送回 data.php

```
$results = Array();
while($row = mysql_fetch_array($result)){
   $column1 = $row['column1 ']; // change Text1 in db to Show_Data_001 in html or vice versa
   $variable = $row['variable '];
   $results[$column1] = $variable;
}

echo json_encode($results); 
```

在你的javascript中是这样的......

```
$.getJSON('GetData.php',function(data) {
$.each(data, function(key, val) {
    $('#'+key).text(val);
  });
}); 
```

我没有将 fadeOut 和 fadeIn 放入示例中，因为它有点复杂。您可以在调用 getJSON 和fadeIn 之前对所有这些元素执行fadeOut 作为结果涌入。希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:05:56.033

首先，确保您有正确的服务器响应，就像这样：

```
//We won't use load() to load content for now
window.setInterval(function(){

   $.ajax({
      url : "path_to_your_php_script.php",
      type : "GET",
      beforeSend: function(){
         //here you can display, smth like "Please wait" in some div
      },
      error : function(msg){
         //You would know if an error occurs  
         alert(msg);
      },
      success : function(respondFromPHP){
         //Are you getting distinct results every 5 sec?
         alert(respondFromPHP);
         return;
         //if respondFromPHP contains data you want
         //ONLY THEN, add some effects
      }
    });

}, 5000); 
```

这种方法与您的方法之间的唯一区别是，您可以处理错误并确保获得所需的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:26:40.260

你能告诉我GetData.php的代码吗？

除了使用 Jquery.load，您实际上可以使用 $.post 或 $.get 获取页面并将结果从 GetData.php 格式化为 Json 或 xml，您可以轻松地将其映射到您的 javascript。

使用 $.post 它将允许您在从 GetData.php 获取值后进行回调，您可以检查它是否工作正常。如果它从您的 GetData.php 获取数据，那么您可以将其填充到您的 DIV 元素中。

您可以在此处查看有关 POST 和 GET 的更多信息：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# eclipse - 如何在 mac 10.7.5 上的 eclipse indigo 3.7.2 上注册外部 glassfish 3.1.2.2

> ID：13522061
> 
> 赞同：0
> 
> 时间：2012-11-23T01:19:53.523
> 
> 标签：eclipse, macos, eclipse-plugin, glassfish, glassfish-3

我想用我的 eclipse 注册 glassfish server 3.1.2.2 开源版本。

我在跑步

*   Mac 狮子 10.7.5 64 位
*   java版本1.6.0_37
*   Eclipse 靛蓝 3.7.3
*   Glassfish 3.1.2.2 开源版从 [http://glassfish.java.net/downloads/3.1.2.2-final.html](http://glassfish.java.net/downloads/3.1.2.2-final.html) 下载我下载了文件 glassfish-3.1.2.2-unix-ml.sh 然后我将它作为可执行文件运行

    ```
    chmod u+x glassfish-3.1.2.2-unix.sh 
    ./glassfish-3.1.2.2-unix.sh 
    ```

安装过程成功完成。

**然后我尝试安装 glassfish 插件：**

在 Eclipse 中转到服务器选项卡 --> 右键单击​​并新建 --> 服务器 --> 下载其他服务器适配器 --> 然后我选择了 Oracle glassfish 服务器工具并安装了它（下面的照片来自 Windows，但它仅作为我的示例选择）

![在此处输入图像描述](../Images/5f12bb94310b5c4b5ee96b5c75a4f85a.png)

然后我再次尝试从服务器选项卡右键单击 --> 添加 --> 服务器 --> 从 glassfish 节点我选择 glassfish 服务器开源版本 3 (java EE 6) --> 下一步 --> 浏览到我的 glassfish 安装目录.

It showing me this error when the defaut jre is selected, " **Missing classpath entry /0/it_stuff/servers/glassfish/modules/glassfish.jar** "

并且在同一个向导中，当我将其更改为 MAC OS X 默认值时，它给了我另一个错误“**指定的目录不是有效的 GlassFish 安装，但包含可能有效的 glassfish 子目录。** ”

任何建议/解决方案将不胜感激.....

更新：我发现它是 Oracle glassfish 工具中的一个旧错误，但从 2011 年中期开始 [http://java.net/jira/browse/GLASSFISHPLUGINS-350?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel](http://java.net/jira/browse/GLASSFISHPLUGINS-350?page=com.atlassian.jira.plugin.system.issuetabpanels%3Aall-tabpanel)

任何明确的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T15:54:36.813

先决条件：

Glassfish 服务器运行时需要完整的 JDK 而不是 JRE。因此，单击已安装的 JRE 首选项并通过提供 JDK 路径来添加 JDK。

现在，在 Glassfish 服务器目录文本框中，提供完整路径“path/to/glassfish4/glassfish”。（注意：查看 glassfish4 中的 glassfish 目录）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-09-17T20:41:01.473

转到目录 D:\softwares\eclipse\glassfish4\glassfish 而不是只提到 D:\softwares\eclipse\glassfish4

# iphone - 如何防止 ios 中的本机 facebook 登录对话框？

> ID：13522068
> 
> 赞同：0
> 
> 时间：2012-11-23T01:21:26.920
> 
> 标签：iphone, ios, facebook

我正在使用 facebooksdk.framework 3.1

当我使用我的帐户登录我的应用程序时，即使基于 Web 的身份验证
已完成，也会弹出本机登录对话框。我需要关闭本机登录对话框或基于 Web 的身份验证，但我不知道如何。

我试图找到 facebook.m 文件，但 facebooksdk.framework 3.1 上没有这样的文件

如何关闭 safariauth 或本地身份验证？很奇怪两个登录过程同时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:27:54.487

首先去 facebook.m 页面并尝试找到以下方法：

```
- (void)authorize:(NSArray *)permissions
         delegate:(id<FBSessionDelegate>)delegate
       localAppId:(NSString *)localAppId 
```

在这个方法中有一行：`[self authorizeWithFBAppAuth:YES safariAuth:NO];`

根据您的需要将 authorizeWithFBAppAuth & safariAuth 更改为是/否。希望它对您有所帮助。

或者您可以尝试实施最新的 Share kit sdk。这是最好的方法。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T05:23:01.240

如果你使用 phonegap facebook 插件，你应该小心调用 FB.getLoginStatus()。

如果 FB.getLoginStatus() 在 FB.init() 完成之前触发，该函数将返回响应为

'未连接'，即使用户已经连接。

我的登录问题是由于重定向页面上的 FB.getLoginStatus() 引起的。

即使用户成功登录并进入我的重定向页面，该页面也会运行 FB.getLoginStatus()

结果总是“未连接”，因为 FB.init() 没有完全执行。

facebook 提供了异步功能来解决这个问题，但是当我在 phonegap 上测试时它不起作用。

要检查用户登录，我现在使用 FB.Event.subscribe 和 localstorage。

在需要 FB 功能的页面上，我添加了这个 javascript 代码

```
FB.Event.subscribe('auth.login', function(response){
    localStorage.setItem('fblogin', true);
    console.log('login event');
}
FB.Event.subscribe('auth.logout', function(response){
    localStorage.setItem('fblogin', false);
    console.log('logout event');
}

document.addEventListener('deviceready', function(){
 try{
      FB.init({ appId : '1234567889' , nativeInterface : CDV.FB, useCachedDialogs : true});
 }catch(e){
      alert(e);
 }
 var fbval = localStorage.getItem('fblogin');
 if(fbval){
     // your code for connected status
 }
}); 
```

基本上，每当发生登录事件时，我将“fblogin”localStorage 值设置为 true，
并在发生注销事件时将值设置为“false”。
通过比较“fblogin”的值，我检查用户是否登录。

# objective-c - 在 Objective-C 中查找某些字符和子字符串

> ID：13522071
> 
> 赞同：2
> 
> 时间：2012-11-23T01:21:54.620
> 
> 标签：objective-c, nsstring, ios6

我有一个字符串..

```
NSString* string = @"%B999999^PDVS123456789012^PADILLA L.                    ^0X0000399           ?*;999999554749123456789012=00X990300000?* 
```

我想要的是得到名字`PADILLA L.`和`999999554749123456789012=00X990300000?*`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:29:51.893

用于`NSString componentsSeparatedByString:`拆分字符串。第一次使用`@"^"`。该名称将位于索引 2。然后使用 . 拆分索引 3 处的子字符串`@";"`。索引 1 处的字符串将为您提供所需的第二部分。

```
NSArray *substrings = [string componentsSeparatedByString:@"^"];
NSString *name = substrings[2];
name = [name stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
NSString *lastpart = substrings[3];
NSArray *moresubstrings = [lastpart componentsSeparatedByString:@";"];
NSString *secondPiece = moresubstrings[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:41:10.020

没有更多细节，这里是一种蛮力方式：

```
NSString* string = @"%B999999^PDVS123456789012^PADILLA L.                    ^0X0000399           ?*;999999554749123456789012=00X990300000?*";
NSRange nameRange = {26, 10};
NSString *name = [string substringWithRange:nameRange];
NSRange numRange = {80, 39};
NSString *num = [string substringWithRange:numRange]; 
```

文档是你的朋友：[NSString 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:13:49.800

在不知道确切的输入模式是什么的情况下（我们只有您的 n-of-1 示例），很难准确地说出您如何正确解析它；但`NSRegularExpression`提供您需要的东西（除了其他建议的方法）：

```
#import <Foundation/Foundation.h>

int main(int argc, char *argv[]) {
    @autoreleasepool {
        NSString *sampleText = @"%B999999^PDVS123456789012^PADILLA L.                    ^0X0000399           ?*;999999554749123456789012=00X990300000?*";
        NSError *regexError = nil;
        NSRegularExpressionOptions options = 0;
        NSString *pattern = @"^%\\w+\\^\\w+\\^([A-Za-z\\s]+\\.).+\\?\\*\\;(.+)\\?\\*$";
        NSRegularExpression *expression = [NSRegularExpression regularExpressionWithPattern:pattern options:options error:&regexError];

        NSTextCheckingResult *match = [expression firstMatchInString:sampleText options:0 range:range];
        if( match ) {
            NSRange nameRange = [match rangeAtIndex:1];
            NSRange numberRange = [match rangeAtIndex:2];

            printf("name = %s ",[[sampleText substringWithRange:nameRange] UTF8String]);
            printf("number = %s\n",[[sampleText substringWithRange:numberRange] UTF8String]);
        }
    }
} 
```

这个小型 Foundation 应用程序将以下内容打印到控制台：

```
name = PADILLA L. number = 999999554749123456789012=00X990300000 
```

用于分析输入字符串的正则表达式可能需要根据输入字符串的变化方式进行调整。现在它是（未转义的）：

```
^%\w+\^\w+\^([A-Za-z\s]+\.).+\?\*\;(.+)\?\*$ 
```

# r - 当我应用于包含字符串的 data.frames 时，为什么所有元素都被字符串化？

> ID：13522072
> 
> 赞同：1
> 
> 时间：2012-11-23T01:22:01.123
> 
> 标签：r

在调用`apply`包含字符串的 data.frame 时，所有其他元素似乎都被强制转换为字符串，然后再传递给提供的函数：

```
> x<-data.frame(a=1:3,b=6:8)
> apply(x,1,function(y){y["b"]})
[1] 6 7 8
> x<-data.frame(a=1:3,b=6:8,d=c("a","bc","def"))
> apply(x,1,function(y){y["b"]})
[1] "6" "7" "8"
> 
```

为什么会这样？我怎样才能避免它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:52:28.887

发生这种情况的原因是该`apply`函数将您的 data.frame 强制转换为矩阵，然后执行操作。如果您查看代码，`apply`您会发现：

```
if (is.object(X)) 
    X <- if (dl == 2L) 
        as.matrix(X)
    else as.array(X) 
```

矩阵只能保存一种数据类型，当有多种数据类型时，它会强制转换为最高级别的一种。在你的情况下，性格。那么你能做什么呢？使用`aaply`from `plyr`。稍作修改运行您的代码（使用`[[`而不是`[`返回一个向量而不是数据框）：

```
x<-data.frame(a=1:3,b=6:8,d=c("a","bc","def"))
library(plyr)
aaply(x, 1, function(y){y[["b"]]}, .expand=FALSE)

1 2 3 
6 7 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:50:33.563

一种解决方案是将 y 转换为 data.frame

```
apply(x,1,function(y){as.data.frame(y)[2,]}) 
```

[1] 6 7 8

# ios - 如何像 UITableView 的 tableHeaderView 一样在 UICollectionView 中添加 HeaderView

> ID：13522075
> 
> 赞同：47
> 
> 时间：2012-11-23T01:22:25.073
> 
> 标签：ios, objective-c, swift, uitableview, uicollectionview

如何在顶部添加标题视图/顶视图（不是部分标题）`UICollectionView`？

它应该完全作为`UITableView`' 的`tableHeaderView`财产。

所以它需要位于第一个部分标题视图的顶部（在索引 0 的部分之前），与其余内容一起滚动，并进行用户交互。

到目前为止，我想出的最好的方法是为第一部分标题视图制作一个特殊的 XIB（作为文件所有者的`MyCollectionReusableView`子类`UICollectionReusableView`），该视图大到足以在标题中包含我的子视图，这有点像黑客，我想想，我还没有设法检测到触摸。

不确定我是否可以让我的`MyCollectionReusableView`子类允许触摸或者有更好的方法。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-08-02T11:31:53.803

```
self.collectionView  =  [[UICollectionView alloc] initWithFrame:CGRectMake(0, 0, 320, self.view.frame.size.height) collectionViewLayout:flowlayout];
self.collectionView.contentInset = UIEdgeInsetsMake(50, 0, 0, 0);
UIImageView *imagev = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"015.png"]];
imagev.frame = CGRectMake(0, -50, 320, 50);
[self.collectionView addSubview: imagev];
[self.view addSubview: _collectionView]; 
```

我使用该属性`contentInset`在顶部插入一个框架`UICollectionView`，然后将图像视图添加到它，它成功了。我认为它可以完全作为`UITableView`'`tableHeaderView`财产。你怎么看？

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-23T05:38:10.800

通过添加 UIView 作为集合视图的子视图，我将视图放在集合视图的顶部。它确实与集合视图一起向上滚动，并且具有正常的 UIView 用户交互。如果您没有节标题，这可以正常工作，但如果您这样做则不起作用。在那种情况下，我认为你的做法没有任何问题。我不确定你为什么没有检测到触摸，它们对我来说很好用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-02-06T13:04:41.327

由于 iOS 13 设置标题的规范方法是使用`UICollectionViewCompositionalLayoutConfiguration`

这种方式允许`boundarySupplementaryItems`按部分或全局设置集合视图。

```
let headerSize = NSCollectionLayoutSize(widthDimension: .fractionalWidth(1.0), heightDimension: .estimated(44))

let header = NSCollectionLayoutBoundarySupplementaryItem(layoutSize: headerSize, elementKind: "header", alignment: .top)

let config = NSCollectionViewCompositionalLayoutConfiguration()
config.boundarySupplementaryItems = [header]

let layout = UICollectionViewCompositionalLayout(sectionProvider: sectionProvider, configuration: config)

return layout 
```

要了解更多信息，请访问官方文档：[https ://developer.apple.com/documentation/appkit/nscollectionviewcompositionallayoutconfiguration](https://developer.apple.com/documentation/appkit/nscollectionviewcompositionallayoutconfiguration)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-02T21:08:50.717

我最终使用 UICollectionView 扩展来添加我的自定义标题。使用特定标签，我可以伪造存储的属性来识别我的自定义标头（从外部透明）。如果在添加自定义标题时 UICollectionView 的布局未完成，您可能必须滚动到特定偏移量。

```
extension UICollectionView {
    var currentCustomHeaderView: UIView? {
        return self.viewWithTag(CustomCollectionViewHeaderTag)
    }

    func asssignCustomHeaderView(headerView: UIView, sideMarginInsets: CGFloat = 0) {
        guard self.viewWithTag(CustomCollectionViewHeaderTag) == nil else {
            return
        }
        let height = headerView.systemLayoutSizeFitting(UILayoutFittingCompressedSize).height
        headerView.frame = CGRect(x: sideMarginInsets, y: -height + self.contentInset.top, width: self.frame.width - (2 * sideMarginInsets), height: height)
        headerView.tag = CustomCollectionViewHeaderTag
        self.addSubview(headerView)
        self.contentInset = UIEdgeInsets(top: height, left: self.contentInset.left, bottom: self.contentInset.bottom, right: self.contentInset.right)
    }

    func removeCustomHeaderView() {
        if let customHeaderView = self.viewWithTag(CustomCollectionViewHeaderTag) {
            let headerHeight = customHeaderView.frame.height
            customHeaderView.removeFromSuperview()
            self.contentInset = UIEdgeInsets(top: self.contentInset.top - headerHeight, left: self.contentInset.left, bottom: self.contentInset.bottom, right: self.contentInset.right)
        } 
    }
} 
```

CustomCollectionViewHeaderTag 是指您提供给标题的标签号。确保它不是嵌入在 UICollectionView 中的 anotherView 的标签。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-06T06:32:21.683

实现这一点的最佳方法是为第一部分制作一个部分标题。然后设置 UICollectionViewFlowLayout 的属性：

```
@property(nonatomic) BOOL sectionHeadersPinToVisibleBounds 
```

或迅速

```
var sectionHeadersPinToVisibleBounds: Bool 
```

为 NO（快速为 false）。这将确保节标题与单元格一起连续滚动，并且不会像节标题通常那样固定在顶部。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-01T02:35:14.390

我认为最好的方法是将 UICollectionViewLayout(UICollectionViewFlowLayout) 子类化并添加所需的页眉或页脚属性。

由于 UICollectionView 布局中包括补充视图在内的所有项目都根据其`collectionViewLayout`属性`collectionviewlayout`决定是否存在页眉（页脚）。

使用`contentInset`起来更容易，但是当你想动态隐藏或显示标题时可能会出现问题。

我已经编写了一个协议来实现这一点，它可以被 UICollectionViewLayout 的任何子类采用，以使其具有页眉或页脚。你可以在[这里找到它。](https://github.com/Phelthas/LXMWaterfallLayout)

主要思想是为标题创建一个`UICollectionViewLayoutAttributes`并在`layoutAttributesForElements(in rect: CGRect)`需要时将其返回，您将必须修改所有其他属性，它们的所有位置都应向下移动标题高度，因为标题高于它们。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-06-06T09:42:34.750

```
private var PreviousInsetKey: Void?
extension UIView {

var previousInset:CGFloat {
    get {
        return objc_getAssociatedObject(self, &PreviousInsetKey) as? CGFloat ?? 0.0
    }
    set {
        if newValue == -1{
            objc_setAssociatedObject(self, &PreviousInsetKey, nil, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
        else{
            objc_setAssociatedObject(self, &PreviousInsetKey, newValue, .OBJC_ASSOCIATION_RETAIN_NONATOMIC)
        }
    }
}

func addOnCollectionView(cv: UICollectionView){
    if self.superview == nil{
        var frame = self.frame
        frame.size.width = SCREEN_WIDTH
        cv.frame = frame
        self.addOnView(view: cv)
        let flow = cv.collectionViewLayout as! UICollectionViewFlowLayout
        var inset = flow.sectionInset
        previousInset = inset.top
        inset.top = frame.size.height
        flow.sectionInset = inset
    }

}

func removeFromCollectionView(cv: UICollectionView){
    if self.superview == nil{
        return
    }
    self.removeFromSuperview()
    let flow = cv.collectionViewLayout as! UICollectionViewFlowLayout
    var inset = flow.sectionInset
    inset.top = previousInset
    flow.sectionInset = inset
    previousInset = -1
}

func addOnView(view: UIView){

    view.addSubview(self)

    self.translatesAutoresizingMaskIntoConstraints = false
    let leftConstraint = NSLayoutConstraint(item: self, attribute: .leading, relatedBy: .equal, toItem: view, attribute: .leading, multiplier: 1.0, constant: 0)
    let widthConstraint = NSLayoutConstraint(item: self, attribute: .width, relatedBy: .equal, toItem: nil, attribute: .notAnAttribute, multiplier: 1.0, constant: view.frame.size.width)
    let heightConstraint = NSLayoutConstraint(item: self, attribute: .height, relatedBy: .equal, toItem: nil, attribute: .notAnAttribute, multiplier: 1.0, constant: view.frame.size.height)
    let topConstraint = NSLayoutConstraint(item: self, attribute: .top, relatedBy: .equal, toItem: view, attribute: .top, multiplier: 1.0, constant: 0)

    view.addConstraints([leftConstraint, widthConstraint, heightConstraint, topConstraint])
    self.layoutIfNeeded()
    view.layoutIfNeeded()
}
} 
```

# c++ - 为什么我没有使用 wofstream 获得任何文件输出？

> ID：13522078
> 
> 赞同：2
> 
> 时间：2012-11-23T01:22:42.253
> 
> 标签：c++, ofstream, wofstream

我的代码在这里：

```
//wstring filename = temp.name + L".txt";
wstring filename = L"hero2.txt";
//wofstream File(filename.c_str());
wofstream outputFile(L"temp.txt", ios::ate | ios::binary);
if (outputFile.fail()) windowmsg(1, LPCWSTR(L"Could not Save game"));
else windowmsg(1, LPCWSTR(L"Game Saved"));

wchar_t BOM = 0xFEFF;//Byte Order Mark character
outputFile << BOM;

outputFile << temp.name << endl;
outputFile << temp.lvl << endl;
outputFile << temp.HP <<endl;
outputFile << temp.minHP <<endl;
outputFile << temp.MP <<endl;
outputFile << temp.minMP <<endl;
outputFile << temp.ATK <<endl;
outputFile << temp.DEF <<endl;
outputFile << temp.mATK <<endl;
outputFile << temp.mDEF <<endl;
outputFile << temp.SPD <<endl;
outputFile << temp.exp <<endl;
outputFile << temp.exptonext <<endl;
outputFile << temp.gearnumber <<endl;
for (int count = 0 ; count < temp.gearnumber ; count++)
{
    outputFile << temp.equip[count].name <<endl;
    outputFile << temp.equip[count].type <<endl;
    outputFile << temp.equip[count].ATK <<endl;
    outputFile << temp.equip[count].DEF <<endl;
    outputFile << temp.equip[count].mATK <<endl;
    outputFile << temp.equip[count].mDEF <<endl;
    outputFile << temp.equip[count].SPD <<endl;
} 
```

我已经尝试了很多东西，我不记得它们都在这里陈述它们。比如把fstream中的第二个参数改成to `ios::ate | ios::binary`等。我尝试将空文本文件转换为 UTF，有和没有 BOM，我尝试在编写任何变量之前在 C++ 代码中编写 BOM。我总是得到一个空白文件。

项目编码是 Unicode 字符集。作为说明，我真的不在乎文件的编码是什么，我只会向它写入英文字符文本。所以只要它写文件我很高兴。

# c# - 如何在 clickonce 部署之前对应用程序 exe 进行代码签名？

> ID：13522083
> 
> 赞同：1
> 
> 时间：2012-11-23T01:23:32.673
> 
> 标签：c#, .net, clickonce

如何在 clcikonce 部署之前使用代码签名证书对我的应用程序 exe 进行代码签名？

我可以将`signtool`命令添加到预构建事件命令行中吗？

# html - html5画布文本交互？

> ID：13522086
> 
> 赞同：0
> 
> 时间：2012-11-23T01:24:02.923
> 
> 标签：html, canvas

如何使 html5 画布填充文本具有交互性？我希望它们的行为是这样的：当鼠标悬停在它们上时，它们应该显示不同的颜色，当鼠标单击它时，它应该执行一些脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:35:18.223

但是我可以建议你，你可以使用这个免费的开源编辑器，它可以在画布中完成所有工作。

[http://www.scirra.com/construct2](http://www.scirra.com/construct2)

好吧，它在某些时候像其他所有东西一样是免费的。有一个很好的教程，而且很容易使用。

它只取决于你想做什么。对于街机游戏来说非常棒。

# ruby-on-rails - 哪条路线匹配具有可变动作的固定控制器？

> ID：13522087
> 
> 赞同：0
> 
> 时间：2012-11-23T01:24:12.653
> 
> 标签：ruby-on-rails, routing

我有这个控制器，称为活动，其中包含方法，如 updateweight、displaycalories 等。

```
<ul>
  <li><%= link_to "Home", "/" %></li>
  <li><%= link_to "Update Weight", "/activities/upweight" %></li>
  <li><%= link_to "Food Ressources", "/activities/food_res" %></li>
  <li><%= link_to "Exercises Technics", "/activities/exercises" %></li>
</ul> 
```

哪条路线能够到达**活动控制器**和名称后面的方法？我已经尝试过 ressources :activities，但我得到了奇怪的结果。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:33:32.037

要查找可用的路线，请使用`rake routes`您的 rails 应用程序目录的命令行中的命令。这将向您显示可用作链接的潜在路线列表。它们通常看起来像：

```
 users GET    /users(.:format)          users#index
          POST   /users(.:format)          users#create
 new_user GET    /users/new(.:format)      users#new 
```

ETC...

但是，在您的情况下，您正在制作非默认网址，因此您需要将它们添加到您的`config/routes.rb`文件中。因此，例如添加：

```
get '/activities/upweight' => 'activities#upweight' 
```

这将使用 GET http 请求将选择的 url 连接到您想要的正确控制器#action。

另请注意，如果您`routes.rb`使用 line为活动控制器创建了路由`resources :activities`，则需要确保在此*上方*添加自定义路由行。`resources :activities`作为自定义 url 的包罗万象，并将它们路由到控制器的 show 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T01:43:09.940

处理控制器中的任意操作都是非 RESTful 的。很多旧的 Rails 版本处理这个问题：

```
match ':controller(/:action(/:id))(.:format)' 
```

.. 事实上，今天的 Rails 仍然可以做到这一点。您应该注意不要在单个控制器中混合 RESTful 和任意操作，因为诸如“创建”和“删除”之类的操作不应响应 GET 请求。

或者，您可以将“体重”、“食物”和“锻炼”推广到他们自己的资源中。

此外，您显然不能拼写“资源”或“技术”，尽管我更喜欢锻炼技术的形象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T01:59:01.200

在您的情况下，路线可能如下所示：

```
match "/activities/upweight", :as => "activities#upweight" 
match "/activities/food_res", :as => "activities#food_res" 
match "/activities/exercises", :as => "activities#exercises" 
```

前提是您的方法名为`upweight`, `food_res`,`exercises`

# php - 键更改后添加的数组元素

> ID：13522092
> 
> 赞同：0
> 
> 时间：2012-11-23T01:25:36.713
> 
> 标签：php, arrays

我正在尝试整理我的数组，只需删除一些重复的元素等......一切都很好，当我输出它时看起来像这样

```
array(3) { ["addon_mat_3"]=> string(2) "15" ["addon_mat_7"]=> string(1) "7" ["addon_mat_15"]=> string(1) "9" } 
```

以上是这段代码

```
foreach ($new_shopping_list_array as $columnName => $columnData) {
    if(is_numeric($columnName)){
        unset($new_shopping_list_array[$columnName]);    
    }     
    if($columnName == 'addon_id'){
        unset($new_shopping_list_array[$columnName]);    
    }     
    if($columnData == 0){
        unset($new_shopping_list_array[$columnName]);    
    }

} 
```

但是，如果我添加如下所示的 else，我需要它，因为它从数组键中删除前 10 个字符，然后我突然将第四个元素添加到数组中，键为“0”。

```
array(4) { [0]=> string(1) "9" [3]=> string(2) "15" [7]=> string(1) "7" [15]=> string(1) "9" } 
```

这段代码

```
foreach ($new_shopping_list_array as $columnName => $columnData) {
    if(is_numeric($columnName)){
        unset($new_shopping_list_array[$columnName]);    
    }     
    if($columnName == 'addon_id'){
        unset($new_shopping_list_array[$columnName]);    
    }     
    if($columnData == 0){
        unset($new_shopping_list_array[$columnName]);    
    }else{

        $new_columnName = substr($columnName, 10);
        unset($new_shopping_list_array[$columnName]);
        $new_shopping_list_array[$new_columnName] = $columnData;
    }

} 
```

其他一切都很棒，除了添加的第四个元素，我做错了什么，

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:15:03.983

该代码应该可以工作，但您可以用更少的几行代码完成整个工作：

```
$flipped = array_flip($new_shopping_list_array);
foreach ($flipped as $value => &$key) {
    if($key == "addon_id" || is_numeric($key) || $value == 0) { 
        unset($flipped[$value]);
    } else {
        $key = substr($key,10);
    }
}
$new_shopping_list_array = array_flip($flipped); 
```

# css - 如何强制外部 div 扩展到内部 div 的高度？

> ID：13522093
> 
> 赞同：3
> 
> 时间：2012-11-23T01:25:47.400
> 
> 标签：css, height

我有 ajaxed 到`<div class="content">`. 我希望外部 div 扩展到内部 div 的高度。我不知道该怎么做。

HTML：

```
<div class="outer">
    <div class="inner">
        <div class="content">Stuff goes here</div>
    </div>
</div> 
```

CSS：

```
.outer {
    width: 740px;
    min-height: 250px;
    margin: 0 auto;
    position: relative;
    margin-bottom: 10px;
}

.inner {
    position: absolute;
    top: 70px;
    left: 10px;
    width: 335px;
    bottom: 0;
}

.content {
    font-size: 13px;
    margin: 0 0 7px 0;
    text-align: left;
    position: relative;
} 
```

我希望外部 div 扩展到内部的高度`<div class="content"></div>`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:34:07.070

当您在 CSS 中使用 POSITION 时会发生这种情况。从 INNER 类中删除 POSITION 并且 OUTER div 将正确展开。也许您可以使用边距来定位您的内部 div。

编辑：

这是一个可能的替代 CSS 供您使用。它可能适合也可能不适合您的要求。

```
.outer {
    width: 740px;
    min-height: 250px;
    margin: 0 auto;
    position: relative;
    padding-top:70px;
    padding-left:10px;
    margin-bottom: 10px;
}

.inner {
    width: 335px;
    bottom: 0;
}

.content {
    font-size: 13px;
    margin: 0 0 7px 0;
    text-align: left;
    position: relative;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:42:46.813

内部 div 中的 position:absolute 是主要问题。这是一个删除位置的示例，注意您需要添加 nbsp; 到外部 div 显示。

```
<!doctype html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>

.outer {
    width: 740px;
    margin: 0 auto 10px auto;
    background:#F90;
}

.inner {
    margin:70px 0 0 10px;
    width: 335px;
    bottom: 0;
    background:#9FF;
}

.content {
    display:block;
    font-size: 13px;
    margin: 0 0 7px 0;
    text-align: left;
    background:#CCC;
}
</style>
</head>

<body>
    <div class="outer">&nbsp;
        <div class="inner">
            <div class="content">Stuff goes here. </div>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:49:23.893

您可以使用 javascript 来调整外部 div 的大小。将此放入您的 AJAX 请求的回调中：

```
 var $inner = $('.inner');
    var height = parseInt($inner.height()) + parseInt($inner.css('top'));  
    $('.outer').css('height', height); 
```

假设您使用jQuery，那就是......

# c# - 在c#中四舍五入到小数点后2位

> ID：13522095
> 
> 赞同：39
> 
> 时间：2012-11-23T01:26:12.967
> 
> 标签：c#, decimal, rounding

如何将两位小数相乘并将结果四舍五入到小数点后两位？

例如，如果等式为 41.75 x 0.1，则结果将为 4.175。如果我在 c# 中使用小数执行此操作，它将自动舍入到 4.18。我想四舍五入到 4.17。

我尝试使用 Math.Floor，但它只是四舍五入到 4.00。这是一个例子：

```
Math.Floor (41.75 * 0.1); 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-23T01:29:29.817

该`Math.Round(...)`函数有一个 Enum 来告诉它使用什么舍入策略。不幸的是，这两个定义并不完全适合您的情况。

两种中点舍入模式是：

1.  **AwayFromZero** - 当一个数字介于其他两个数字之间时，它会朝离零最近的数字四舍五入。（又名，围捕）
2.  **ToEven** - 当一个数字在其他两个数字之间时，它会向最接近的偶数四舍五入。（0.16 优于 0.17，0.18 优于 0.17）

你想要使用的是`Floor`一些乘法。

```
var output = Math.Floor((41.75 * 0.1) * 100) / 100; 
```

变量现在`output`应该有 4.17。

事实上，您也可以编写一个函数来获取可变长度：

```
public decimal RoundDown(decimal i, double decimalPlaces)
{
   var power = Convert.ToDecimal(Math.Pow(10, decimalPlaces));
   return Math.Floor(i * power) / power;
} 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-29T01:46:09.657

```
public double RoundDown(double number, int decimalPlaces)
{
     return Math.Floor(number * Math.Pow(10, decimalPlaces)) / Math.Pow(10, decimalPlaces);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2020-07-17T07:33:06.447

自`.NET Core 3.0`和即将到来`.NET Framework 5.0`的以下是有效的

```
Math.Round(41.75 * 0.1, 2, MidpointRounding.ToZero) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-11-23T01:38:36.213

c# 中没有对精确地板/ceillin 的本机支持。

但是，您可以通过将数字、下限相乘，然后除以相同的乘数来模拟该功能。

例如，

```
decimal y = 4.314M;
decimal x = Math.Floor(y * 100) / 100;  // To two decimal places (use 1000 for 3 etc)
Console.WriteLine(x);  // 4.31 
```

不是理想的解决方案，但如果数量很少，应该可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T00:03:32.200

另一种解决方案是从从零舍入到零舍入。它应该是这样的：

```
 static decimal DecimalTowardZero(decimal value, int decimals)
    {
        // rounding away from zero
        var rounded = decimal.Round(value, decimals, MidpointRounding.AwayFromZero);

        // if the absolute rounded result is greater 
        // than the absolute source number we need to correct result
        if (Math.Abs(rounded) > Math.Abs(value))
        {
            return rounded - new decimal(1, 0, 0, value < 0, (byte)decimals);
        }
        else
        {
            return rounded;
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-17T22:22:29.203

我发现最好的方法是使用字符串；数学的二进制变幻莫测往往会出错，否则。等待 .Net 5.0 使这一事实过时。没有小数位是一种特殊情况：您可以为此使用 Math.Floor。否则，我们 ToString 比所需的小数位多一位的数字，然后解析没有最后一位的数字以获得答案：

```
/// <summary>
/// Truncates a Double to the given number of decimals without rounding
/// </summary>
/// <param name="D">The Double</param>
/// <param name="Precision">(optional) The number of Decimals</param>
/// <returns>The truncated number</returns>
public static double RoundDown(this double D, int Precision = 0)
{
  if (Precision <= 0) return Math.Floor(D);
  string S = D.ToString("0." + new string('0', Precision + 1));
  return double.Parse(S.Substring(0, S.Length - 1));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-31T06:04:31.927

这是我的防浮四舍五入。

```
 public static class MyMath
{
    public static double RoundDown(double number, int decimalPlaces)
    {
        string pr = number.ToString();
        string[] parts = pr.Split('.');
        char[] decparts = parts[1].ToCharArray();
        parts[1] = "";
        for (int i = 0; i < decimalPlaces; i++)
        {
            parts[1] += decparts[i];
        }
        pr = string.Join(".", parts);
        return Convert.ToDouble(pr);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-26T22:28:20.493

如果要将任何双精度舍入到特定的小数位，如果中点无关紧要，您可以使用：

```
 public double RoundDownDouble(double number, int decimaPlaces)
    {
        var tmp = Math.Pow(10, decimaPlaces);
        return Math.Truncate(number * tmp) / tmp;
    } 
```

# c++ - delphi中的C ++类型int8_t [20]？

> ID：13522101
> 
> 赞同：1
> 
> 时间：2012-11-23T01:27:15.713
> 
> 标签：c++, delphi, delphi-xe3

等于什么

```
int8_t[20] 
```

Delphi 中的 C++ 类型？

据我所知，它是字节，但 [20] 是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:32:31.283

那是一个带符号的单字节整数数组。在 C/C++ 数组中，所有数组都从索引 0 开始，因此有效的数组索引从 0 到 19

# java - Java，你怎么称呼它？为什么）};

> ID：13522104
> 
> 赞同：0
> 
> 时间：2012-11-23T01:27:41.320
> 
> 标签：java, android

我正在浏览 Hello Android (Android PDF/tutorial)，现在已经多次看到这种语法。有人可以向我解释一下定义 run Runnable 时使用的 Java 语法吗？

```
private class AndroidBridge {

    public void callAndroid(final String arg) { // must be final
        handler.post(new Runnable() {
            public void run() {
                Log.d(TAG, "callAndroid(" + arg + ")" );
                textView.setText(arg);
            }
            ... 
```

代码是否定义了一个 Runnable 对象并覆盖了它的 run 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:29:40.453

该`.post`方法需要一个 Runnable 对象，该对象在您的代码示例中被匿名声明并作为参数传递。

这将为一些长时间运行的进程启动一个新线程。

线程构造函数需要一个`Runnable`对象，该对象有一个`run`在线程准备好时调用的方法。

当许多 Java 应用程序启动时，所有操作都堆积在一个线程上，包括 UI。如果我正在做一些“繁重”的事情，我主要使用线程来避免冻结 UI。

您已经看到当您单击“执行”或其他内容时会发生这种情况，并且 UI 突然变得不那么响应了。这是因为当前线程没有足够的资源来构建 UI 并执行“执行”所要求的任何操作。

所以，有时这是在其他地方完成的，在不同的线程上，需要一个`Runnable`对象。

值得注意的是，多线程（您故意制作多个线程）非常难以使用，主要是出于调试原因，IMO。但它当然是一个有用的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T01:33:30.563

`Runnable`正如 Dave Newton 所指出的，这是一个实现接口的匿名内部类。

至于为什么要使用它，可以将其视为某种语法糖。您会注意到，在您的示例中，代码`run()`可以访问与定义匿名内部类本身的范围相同的范围。

这简化了对这些成员的访问，就好像您在外部定义了该类一样，您必须传入对您想要调用/使用其成员的任何对象的引用。

实际上，IIRC，这实际上是Java编译匿名内部类时发生的情况；如果有对外部包含类的引用，编译器将创建一个构造函数，该构造函数传入对外部包含类的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T01:33:54.847

代码定义了一个实现 Runnable 接口的匿名内部类，并实现了 run 方法来执行相应的操作。

# character-encoding - 为什么 WSO2 Registry 不会存储我的中文字符？

> ID：13522105
> 
> 赞同：1
> 
> 时间：2012-11-23T01:28:44.043
> 
> 标签：character-encoding, wso2

我运行了一个 WSO2 注册表服务器来维护我们的配置。它完美地发挥了它的作用，直到有一天我将一些汉字放入资源内容中。我使用“创建文本内容”创建了一个资源，并将中文字符添加到“描述”和“内容”字段中。当我再次打开这个资源时，“描述”字段仍然是中文，但“内容”文本变成了一串“？”（问号，一个汉字）。为什么会发生这种情况，如何预防？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:08:09.687

您应该使用“carbon.registry.character.encoding”系统属性启动治理注册表。

请参阅文档 [1] 中的更多详细信息。

[1]http://docs.wso2.org/wiki/display/Governance450/Supported+System+Properties

例如：

sh wso2server.sh -Dcarbon.registry.character.encoding={中文编码类型}

# c# - 启用 javascript wp7

> ID：13522108
> 
> 赞同：1
> 
> 时间：2012-11-23T01:29:29.340
> 
> 标签：c#, javascript, windows, windows-phone-7

我迫切需要帮助。我正在用 C# 在 windows phone 上开发一个应用程序，它在链接到 youtube 视频的页面之一上包含一个 Web 浏览器。唯一的问题是，在模拟器上它说需要启用 javascript。我该怎么做呢。

我知道这段代码： public bool IsScriptEnabled { get; 放; }

但我不知道把它放在哪里以及用它做什么。我会把这样的东西放在一个方法中吗： webbrowser1.IsScriptEnabled = ture; ??

假设 button2_Click 方法将我带到一个新页面，其中存在 Web 浏览器。我是否在按钮方法中启用 java 脚本？或者我是否在实际浏览器所在的页面上启用它。

这是最后一段的图片

[http://imgur.com/J0Tv8](http://imgur.com/J0Tv8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:17:36.843

```
<phone:WebBrowser x:Name="NameOfBrowser" IsScriptEnabled="True" /> 
```

还要记住，如果您使用代码启用它（NameOfBrowser.IsScriptEnabled= True），那么您需要刷新页面才能看到效果。

[https://stackoverflow.com/a/9395586/546896](https://stackoverflow.com/a/9395586/546896)

# java - Java：尝试在西蒙游戏中将用户输入作为 Int 获取

> ID：13522118
> 
> 赞同：1
> 
> 时间：2012-11-23T01:32:10.393
> 
> 标签：java, user-input

我试图弄清楚为什么 1）我的西蒙游戏在说“输入数字”后挂断了 - 看起来它甚至没有通过验证。我正在尝试获取用户输入，并检查当时按下的数字是否正确。2）此外，它曾经生成一个随机数，但是当用户按下它时，由于某种原因它返回为假。不过，其他一些随机数会通过。3）另外，下面的代码是为你编码的吗？多谢你们。

```
import acm.program.*;
import acm.graphics.*;
import java.awt.Color;
import java.awt.Font;
import javax.swing.*;
import java.awt.event.*;

import javax.swing.JOptionPane;
import java.util.Scanner;
import java.io.DataInputStream;

public class Simon extends Program implements ActionListener
{

Scanner usersInputScanner = new Scanner(System.in);

private int array[];
private int currentSeqLength;
private int usersInput;
private String usersInputString;

public Simon()
{
    //Initialize Class Values
    array = new int[20];
    currentSeqLength = 1;
    usersInput = 0;

    generateSequence();

    while(currentSeqLength < array.length)
    {
        playSequence();

        //Wait For User's Input, Assign To Variable
        System.out.println("Enter A Number");
        usersInput = usersInputScanner.nextInt();

        if (pushButton(usersInput) == true)
        {
            System.out.println("You Entered: " + usersInput);

            currentSeqLength++;
        }

        else
        {

            gameOverMessage();
            break;

            //Reset Variables:

        }

    }

}

//----------------------- Methods Here On Down -----------------------------

public void generateSequence()
{

    //Fill Array With Random Numbers
    for (int i = 0; i < array.length; i++ )
    {
        array[i] = (int)(Math.random()*4);

    }

}

public void setLength(int length)
{
    //Set Current Length To Size Of Given Argument
    currentSeqLength = length;

}

int getLength()
{
    return currentSeqLength;

}

int[] playSequence()
{
    //Print Out The Current Sequence

    //New Local Array To Return
    int newArray[]= new int[currentSeqLength];

    //Repeat As Many Times As Value Of currentSeqLength
    for(int i = 0; i < currentSeqLength ; i++)
    {
        System.out.println(array[i]);

        //Return an array of int's to the player. 
        newArray[i] = array[i];

    }

    return newArray;
}

boolean pushButton(int usersInput)
{
    //Given A Button Press (0-3), Return Whether That Was The 
        //Correct Button To Play At The Moment

    if (usersInput == array[currentSeqLength])
    {
        return true;
    }

    else
    {
        return false;
    }

}

boolean isTurnOver()
{
    //If Current Sequence Length Matches Or Exceeds Value Of 
        //Array Element In Location Of Current Sequence Length

    if (currentSeqLength >= array[currentSeqLength])
    {
        return true;
    }

    else
    {
        return false;
    }

}

//Not Needed?
boolean isGameOver()
{
    if (pushButton(usersInput) == false)
    {
        return true;
    }

    else
    {
        return false;
    }
}

String gameOverMessage()
{
    return "Game Over";
}

/*public void actionPerformed(ActionEvent event)
{
    int input;

}
*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:43:26.640

> 1）我的西蒙游戏在说“输入数字”后挂断了——看起来它甚至没有通过验证。

它工作正常，但您需要`System.out.println`从`gameOverMessage()`. 现在，它运行完美，但控制台没有输出，所以它看起来没有响应（而且它没有挂起，它只是到达执行结束，然后停止）。

```
else {
    gameOverMessage();
    break;
} 
```

应该

```
else {
    System.out.println(gameOverMessage());
} 
```

> 2）此外，它曾经生成一个随机数，但是当用户按下它时，由于某种原因它返回为假。

我在您的示例代码中没有出现这种行为，它看起来像预期的那样工作。

> 3）另外，下面的代码是为你编码的吗？

是的，SO 上的预览框有时需要一秒钟来突出显示语法。它工作正常。

顺便说一句，三个问题合二为一对回答者来说有点困难。将来也许会尝试将自己限制在一个:)

# html - 在 Django 模板中使用绝对路径

> ID：13522120
> 
> 赞同：3
> 
> 时间：2012-11-23T01:32:34.937
> 
> 标签：html, django

最近我一直在 Django 中开发一个使用站点范围的 CSS 布局的项目，所以我决定使用的每个模板（在本例中为 /projects/index.html 中的模板）都将扩展一个包含标题的基本文件，页脚、javascript 等称为`base.html`.

问题是我的目录结构如下所示：

```
.
├── static
│   └── base.html
├── templates
│   └── projects
│   └── index.html 
```

而且，如您所见，我要扩展的基本文件位于比 index.html 文件更高的目录中。通常，我会使用相对路径并在索引文件的顶部使用以下代码：`{% extends "../base.html" %}`或者只是使用文件的绝对路径（如有必要）

然而，似乎通过使用这两种方法中的任何一种，extends 引号内的任何内容都会简单地附加到当前路径上，而我使用 .. 对上层目录的调用被完全忽略。

也就是说，如果当前路径是，例如，`/project/templates/projects`并且我使用`{% extends "/project/static/base.html" %}`，那将被附加到当前路径，导致系统寻找`/project/templates/projects/project/static/base.html`，当然，它不存在。在研究之后，我看到一篇文章说，为了安全目的，阻止相对路径是故意的，但它让我无法访问当前工作目录之外的任何文件。

我认为在构建网站时这必须是一个非常常见的设置，因此必须有某种方式与我还不知道的多个模板进行交互。如果有人对此有任何信息，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:37:22.907

您`base.html`应该驻留在`templates`目录中而不是`static`目录中。

`TEMPLATE_DIRS`这是因为您定义了 django 使用文件中的 搜索模板的位置`settings.py`。在这里，我举了一个`TEMPLATE_DIRS`动态计算你的价值的例子。

```
import os

TEMPLATE_DIRS = (
    os.path.join(os.path.dirname(__file__), '..', 'templates'),
) 
```

此外，您需要知道 django 依赖于另一个`setting`调用`TEMPLATE_LOADERS`来确定它在搜索`templates`目录时加载 html 文件/模板的优先级。

```
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
    # 'django.template.loaders.eggs.Loader',
) 
```

一旦你`base.html`位于你的`templates`目录中，你需要在你的 html 文件中做的就是写： -

```
{% extends "base.html" %} 
```

你会正确扩展

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:37:31.560

您的所有 html 模板都应位于该`templates`目录下（包括您的 base.html）。此文件夹的位置是使用[`TEMPLATE_DIRECTORY`](https://docs.djangoproject.com/en/dev/ref/templates/api/#loading-templates)您的`settings.py`. 该`static`文件夹仅用于 css、js 等。

当使用标签从另一个模板继承时[`extends`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#extends)，你给出的路径总是相对于你的模板目录，而不是项目。

# java - java.lang.NullPointerException 错误从 mysql 填充 JTable

> ID：13522122
> 
> 赞同：0
> 
> 时间：2012-11-23T01:33:22.670
> 
> 标签：java, mysql, swing, jtable, runtime-error

我试图用 MySql 数据填充 JTable。事情是当我运行登录类时，我收到消息“java.SQLException：没有为参数 2 指定值”，当我运行 JTable 类时，我不断收到 java.lang.NullPointerException 错误。我有三个类： 1-连接到数据库：

```
import java.sql.Connection;
import java.sql.DriverManager;

import javax.swing.JOptionPane;

public class javaconnect {
Connection conn = null;

public static Connection ConnecrDB() {

    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(
                "jdbc:mysql://localhost:3306/mydb", 
                        "root", "root");
        JOptionPane.showMessageDialog(null, "Connected");
        return con;

    } catch (Exception e) {
        System.out.println("ERROR: " + e.getMessage());
    }
    return null;
}
} 
```

第二类是登录框架：

```
import java.awt.BorderLayout;

import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.EmptyBorder;
import javax.swing.JLabel;
import java.awt.*;

import javax.swing.JOptionPane;
import javax.swing.JPasswordField;
import javax.swing.JTextField;
import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class JFrameLogIn extends JFrame {
Connection conn =null;
ResultSet rs = null;
PreparedStatement pst = null;

private JPanel contentPane;
private JPasswordField txt_Password;
private JTextField txt_Username;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                JFrameLogIn frame = new JFrameLogIn();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public JFrameLogIn() {

    conn=javaconnect.ConnecrDB();

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 375, 214);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    JLabel lblUsername = new JLabel("Username:");
    lblUsername.setFont(new Font("Tahoma", Font.BOLD, 13));
    lblUsername.setBounds(126, 45, 80, 14);
    contentPane.add(lblUsername);

    JLabel lblPassword = new JLabel("Password:");
    lblPassword.setFont(new Font("Tahoma", Font.BOLD, 13));
    lblPassword.setBounds(126, 82, 69, 14);
    contentPane.add(lblPassword);

    txt_Password = new JPasswordField();
    txt_Password.setBounds(218, 82, 109, 20);
    contentPane.add(txt_Password);

    txt_Username = new JTextField();
    txt_Username.setBounds(216, 43, 111, 20);
    contentPane.add(txt_Username);
    txt_Username.setColumns(10);

    JButton cmd_Login = new JButton("Login");
    cmd_Login.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            String sql = "Select * from clients where username=? and password=?";
            try{
                pst = conn.prepareStatement(sql);
                pst.setString(1, txt_Username.getText());
                pst.setString(1, txt_Password.getText());

                rs = pst.executeQuery();
                if(rs.next()){
                    JOptionPane.showMessageDialog(null, "Username and     Password are correct");

                }
                else {
                    JOptionPane.showMessageDialog(null, "Username and Password are not correct");
                }
            }
            catch(Exception e){
                JOptionPane.showMessageDialog(null, e);
            }
        }
    });
    cmd_Login.setBounds(218, 125, 80, 23);
    contentPane.add(cmd_Login);
}
} 
```

最后一个是JTable

```
import java.awt.EventQueue;
import javax.swing.*;
import javax.swing.border.EmptyBorder;
import java.sql.*;
import net.proteanit.sql.DbUtils;

public class JTable1 extends JFrame {
Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;

private JPanel contentPane;
private JTable table_Admins;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                JTable1 frame = new JTable1();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the frame.
 */
public JTable1() {
    conn = javaconnect.ConnecrDB();
    UpdateTable ();

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setBounds(100, 100, 450, 300);
    contentPane = new JPanel();
    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
    setContentPane(contentPane);
    contentPane.setLayout(null);

    table_Admins = new JTable();
    table_Admins.setBounds(30, 28, 378, 54);
    contentPane.add(table_Admins);
}

private void UpdateTable () {
    try { 
        String sql = "SELECT *FROM menu";
    pst = conn.prepareStatement(sql);
    rs = pst.executeQuery();
    table_Admins.setModel(DbUtils.resultSetToTableModel(rs));
}
    catch (Exception e){
    JOptionPane.showMessageDialog(null, e);
}
    }
} 
```

我试图找出问题所在，但找不到解决方案。连接有效。非常感谢您在修复此错误方面的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T01:34:28.813

你的第二个参数`PreparedStatment`没有设置。你应该更换

```
pst.setString(1, txt_Password.getText()); 
```

和

```
pst.setString(2, txt_Password.getText()); 
```

* * *

**编辑：**请注意，这`JPassword.getText()`已被*弃用*，意味着您不应再使用它。`getPassword()`在其位置提供：

```
pst.setString(2, new String(txt_Password.getPassword())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:10:52.527

您可以在代码中添加检查

```
 rs = pst.executeQuery();
           if (rs!=null){
               if(rs.next()){
                  JOptionPane.showMessageDialog(null, "Username and     Password are correct");

              }
              else {
                JOptionPane.showMessageDialog(null, "Username and Password are not correct");
              }
          } 
```

还有在你的 JTable1 类中

```
 if (rs!=null)
 table_Admins.setModel(DbUtils.resultSetToTableModel(rs)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T09:13:47.010

```
 private void UpdateTable () {
   conn = javaconnect.ConnecrDB();// connection and query should be in same place
   try { 
       String sql = "SELECT *FROM menu";
       pst = conn.prepareStatement(sql);
       rs = pst.executeQuery();
        table_Admins.setModel(DbUtils.resultSetToTableModel(rs));
       }
    catch (Exception e){
     JOptionPane.showMessageDialog(null, e);
          } 
```

# ios - 如何在部分视图区域而不是全视图屏幕中启用 MFSideMenu？

> ID：13522126
> 
> 赞同：1
> 
> 时间：2012-11-23T01:34:04.603
> 
> 标签：ios

我正在使用喜欢 facebook iOS 应用程序风格的 MFSideMenu，它工作正常！是否可以在左 1/3 视图区域而不是全视图屏幕中为平移手势启用 MFSideMenu？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:37:30.453

你需要使用委托`IIViewDeckControllerDelegate`
所以设置

```
[deckController setPanningMode:IIViewDeckDelegatePanning]; 
```

并实施：

```
- (BOOL)viewDeckController:(IIViewDeckController*)viewDeckController shouldPan:(UIPanGestureRecognizer*)panGestureRecognizer
{
    if ([panGestureRecognizer locationInView:self.view].x<20) {
        return YES;
    }
    return NO;
} 
```

# osx-mountain-lion - 用于 Python 3.2 的分布式和 Pip

> ID：13522128
> 
> 赞同：1
> 
> 时间：2012-11-23T01:34:12.027
> 
> 标签：osx-mountain-lion, pip, python-3.2, distribute

当使用 pip 安装模块或为 python3 分发 easy_install 时，模块将改为为 python 2.7 或更早版本安装。我对 mac 操作系统和 python 本身都很陌生（4 个月左右）。我想安装并为 python 3.2 工作的分发和 pip。

使用 easy_install 或 pip 时，安装 python 2.7 时一切正常。然而，这不是我想要的，我尝试通过安装 pip 和 easy install 来解决这个问题：

须藤卷曲[https://raw.github.com/pypa/pip/master/contrib/get-pip.py](https://raw.github.com/pypa/pip/master/contrib/get-pip.py) | **蟒蛇3**

与

须藤卷曲[https://raw.github.com/pypa/pip/master/contrib/get-pip.py](https://raw.github.com/pypa/pip/master/contrib/get-pip.py) | **Python**

这应该可以完成我想做的事情，但是，在我这样安装之后：

new-host-6:~ Eric$ pip install spynner

-bash: pip: 找不到命令

如果有人在获取 pip 并分发 easy_install 以适用于 python3 方面有上述任何经验，我们将不胜感激。

# c# - 使用 GetProperties 方法时如何排除静态属性

> ID：13522132
> 
> 赞同：1
> 
> 时间：2012-11-23T01:34:41.063
> 
> 标签：c#, reflection, properties, static, bindingflags

我想知道当我使用 GetProperties() 提取特定类的所有属性时是否可以排除静态属性。我知道为此使用 BindingFlags 来过滤我需要的属性，但我真正想要的是我想排除静态属性。我尝试使用这样的东西：

```
typeof(<class>).GetProperties(!BindingFlags.Static); 
```

但我认为它不起作用，因为 VS 给我带来了一些语法错误。这是我的类里面的属性。

```
public class HospitalUploadDtl : Base.Tables
        {
            public HospitalUploadDtl() { }
            public HospitalUploadDtl(SqlDataReader reader)
            {
                ReadReader(reader);
            }
            #region Properties
            public long BatchDtlId { get; set; }
            public long BatchNumber { get; set; }
            public string HospitalCode { get; set; }
            public string HospitalName { get; set; }
            public string Address { get; set; }
            public string City { get; set; }
            public string Country { get; set; }
            public string ContractPerson { get; set; }
            public string ContactNo { get; set; }
            public string Email { get; set; }
            public bool isAccredited { get; set; }
            public bool isClinic { get; set; }
            public string FaxNo { get; set; }
            public string TypeofFacility { get; set; }
            public string Category { get; set; }
            public string Specialty { get; set; }
            public string ProviderName { get; set; }
            public bool CashlessInPatient { get; set; }
            public bool CashlessOutPatient { get; set; }
            #endregion

            public static dcHospitalUploadDtl dataCtrl;
            public static dcHospitalUploadDtl DataCtrl
            {
                get
                {
                    if (dataCtrl == null)
                        dataCtrl = new dcHospitalUploadDtl();
                    return dataCtrl;
                }
            }
        } 
```

对于这种情况，我想在调用 GetProperties() 时排除“DataCtrl”属性。感谢您的回复。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T01:38:42.950

我认为您正在寻找`BindingFlags.Instance | BindingFlags.Public`（如果您只包含`Instance`，则不会找到任何属性，因为既未`Public`指定也未`NonPublic`指定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:41:36.197

通话

```
typeof(<class>).GetProperties(!BindingFlags.Static); 
```

不符合您的预期：传入的值`GetProperties`是*位掩码*，而不是表达式。表达式中只允许按位或。换句话说，你不能说你不想要的东西：你必须说出你想要的东西。因此，`!BindingFlags.Static`您应该通过而不是通过`BindingFlags.Instance`。

或者，您可以获取所有属性，然后应用 LINQ 及其丰富的过滤语义来删除您不需要的项目：

```
typeof(<class>).GetProperties().Where(p => !p.GetGetMethod().IsStatic).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:37:30.130

你应该使用`BindingFlags.Instance`标志。

```
typeof(HospitalUploadDtl).GetProperties(BindingFlags.Instance | BindingFlags.Public); 
```

# jsf - 使用 JPA、EclipseLink、JSF 和动态报告

> ID：13522133
> 
> 赞同：0
> 
> 时间：2012-11-23T01:35:03.443
> 
> 标签：jsf, jpa, eclipselink

我有 3 个数据库表，每个表都由一个实体类表示。我想要做的是用特殊条件加入这三个表，并从每个表中选择最多一列，将它们包装在一个对象中，并使用数据表在 JSF 层上显示该对象。

是否可以在不使用我的实体类的情况下使用动态实体类来做到这一点？有没有人解决这个问题？

将不胜感激任何帮助非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:29:00.233

您可以使用构造函数查询，或者只是简单地选择多个值并返回一个 Object[]。

[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Constructors](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Querying/JPQL#Constructors)

您也可以只选择对象，然后在 Java 中从它们中提取您需要的内容。

# batch-file - 带引号的批量 findstr

> ID：13522134
> 
> 赞同：2
> 
> 时间：2012-11-23T01:35:17.940
> 
> 标签：batch-file, quotes, findstr

我正在尝试弄清楚如何修改此脚本以进行精确搜索。我需要搜索一个字符串（例如：“123.12”——带引号）

这是我到目前为止的脚本：

```
findstr %1 %systemdrive%\test\data.txt

IF %ERRORLEVEL% GTR 0 (
--- TRUE- DO SOMETHING
) ELSE (
--- FALSE- EXIT
) 
```

这是我的文件 data.txt

“123.123” “345.345” “794.922”

（带引号）

问题是 findstr 正在查找解析的值：123.12，但它在我的列表中不存在。它错误地将 123.123 和 123.12 检测为其中的一部分。这就是为什么我想知道是否有任何方法可以使用引号进行搜索，我的意思是，格式化解析的值并将其添加引号以在文本文件中搜索。

我试过“%1”但没有成功。

先感谢您 ！！

* * *

## 编辑

我正在尝试修改防火墙批处理脚本以阻止某些 IP

这是脚本

```
ipconfig | findstr "Address" | qut -d: -f 2 | qni > %systemdrive%\Qaas\host_ip.txt
findstr \"%1\" %systemdrive%\Qaas\bin\host_ip.qas || findstr \"%1\" %systemdrive%\Qaas\white_list.txt || findstr \"%1\" %systemdrive%\Qaas\blocqedips.qas

IF %ERRORLEVEL% GTR 0 (
echo "NOT FOUND"
netsh ipsec stat add filter filterlist="IP List" srcaddr=%1 dstaddr=Me description=%1 protocol=any mirrored=yes
echo Blocked IP address %1, reason - %2 connections on %3 >> %systemdrive%\Qaas\Qaas-%dw%-%mm%-%dd%-%hh%.log
echo %1 >> %systemdrive%\Qaas\blocqedips.qas
) ELSE (
echo "FOUND"
echo %1 is either host IP or already blocked earlier >> %systemdrive%\Qaas\Qaas-%dw%-%mm%-%dd%-%hh%.log
) 
```

这是被阻止的 IP 文件： http: [//pastebin.com/cP4BteDM](http://pastebin.com/cP4BteDM)

现在，尝试阻止例如 10.02.0，我在控制台“10.02.02”中收到。我猜是因为 10.02.0 是“instr”“10.02.02”。由于 FINDSTR 语句中存在这个问题，例如，我将永远无法禁止“10.02.0”。

谢谢你的帮助，我试过你的答案没有运气：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:24:23.630

引号的转义字符是`\"` ：试试这个：

```
C:\>echo "123.123" "345.345" "794.922" | findstr "\"123.12\""
C:\>echo %errorlevel% 
```

**编辑：** 我仍然不确定我是否真的得到了这个问题，但是。这是我创建的一个非常简单的示例 bat，用于测试 paste.bin ip 地址：

```
@echo off
find """%~1"""  ips.txt 
echo %errorlevel% 
```

使用 10.02.0 我得到 1，使用 10.02.02 我得到 0。我使用 FIND 而不是 FINDSTR 来避免 Electro Hacker 指出的点图案陷阱 - 因为您无法控制 %1 内的内容，它会更换起来有点困难。用 [.] 用三引号作为 " 是 " 的转义。而 %~1 用于第一个参数的取消引用值（可能没有必要）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:18:50.840

如果您想要精确搜索，那么您可以过滤起始词和结束词行，并将点“。” 因为在 RegEx 中表示“任何字符”，您需要使用文字字符“。” 如果您想要更准确的结果，并且要转义双引号字符。

如果要进行不带引号的搜索，可以像这样扩展参数：

```
:: I've removed start & ending quotes of argument %1
findstr %~1 "%systemdrive%\test\data.txt" &&  (
--- TRUE- DO SOMETHING
) || (
--- FALSE- EXIT
) 
```

这是您需要的确切正则表达式：

```
FINDSTR "\<\"123[.]123\"\>" 
```

注意到第一个和最后一个引号仅用于使用 FINDSTR 命令将值括起来

这完全匹配：**“123.123”**（包括引号），无一例外，正则表达式搜索：

```
\<start of word , end of word\> 
```

PS：对不起我的英语不好，我希望这对你有所帮助。

# python - 在 Flask 中将表单 POST 对象转换为适合 mongodb 的表示形式

> ID：13522137
> 
> 赞同：59
> 
> 时间：2012-11-23T01:35:41.977
> 
> 标签：python, mongodb, post, flask, pymongo

我正在使用 Flask 和 MongoDB。我正在尝试将 request.form 的内容转换为适合通过 PyMongo 保存的内容。这似乎应该经常出现以提供现成的解决方案。

所以 Flask 给我的是这样的：

```
ImmutableMultiDict([('default', u''), ('required': u'on'), ('name', u'short_text'), ('name', u'another'), ('submit', u'Submit')]) 
```

我想要得到的是接近这个的东西：

```
{
  'default': '',
  'name': ['short_text', 'another'],
  'required': true
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2016-02-25T11:06:09.960

```
>>> from werkzeug.datastructures import ImmutableMultiDict
>>> imd = ImmutableMultiDict([('default', u''), ('required', u'on'), ('name', u'short_text'), ('name', u'another'), ('submit', u'Submit')])
>>> imd.to_dict(flat=False)
>>> {'default': [''], 
'name': ['short_text', 'another'],
'required': ['on'],
'submit': ['Submit']} 
```

`.to_dict(flat=False)`是要记住的事情。查看相关[文档](http://werkzeug.pocoo.org/docs/0.12/datastructures/#werkzeug.datastructures.MultiDict.to_dict)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-07-06T02:47:29.693

Flask`ImmutableMultiDict`数据结构有一个内置`to_dict`方法。

除了 Flask`request`对象`form`属性之外，这些知识还`ImmutableMultiDict`允许简单处理对 MongoDB 的表单 POST 请求。

请参阅下面的简单示例：

```
from flask import request

@app.route('/api/v1/account', methods=['POST'])
def create_account():
    """Create user account"""
    account_dict = request.form.to_dict()

    db.account.insert_one(account_dict) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-08-24T19:56:31.783

你可以使用 werkzeug 的[getlist](http://werkzeug.pocoo.org/docs/datastructures/#werkzeug.datastructures.MultiDict.getlist)来编写这样的代码

```
data = dict((key, request.form.getlist(key)) for key in request.form.keys()) 
```

现在每个键`data`将是一个列表，其中将包含 1 个更多元素。要完全按照您的格式获得结果，请执行此操作

```
data = dict((key, request.form.getlist(key) if len(request.form.getlist(key)) > 1 else request.form.getlist(key)[0]) for key in request.form.keys()) 
```

现在这是低效的，因为每个键都有 3 次调用`request.form.getlist(key)`. 您可以编写一个循环并绕过它。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2016-09-23T14:12:41.490

`request.form.to_dict()`会产生你需要的东西

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-12-06T16:03:20.687

python 3.6版前后对比`dict()`和方法。`.to_dict()`

```
from werkzeug.datastructures import ImmutableMultiDict
imd = ImmutableMultiDict([('default', u''), ('required', u'on'), ('name', u'short_text'), ('name', u'another'), ('submit', u'Submit')]) 
```

到python3.5

```
dict(imd)
#output: {'default': [''], 'required': ['on'], 'name': ['short_text', 'another'], 'submit': ['Submit']}

imd.to_dict(flat=false)
#output: {'default': [''], 'required': ['on'], 'name': ['short_text', 'another'], 'submit': ['Submit']}

imd.to_dict(flat=True) # or imd.to_dict() 
#output: {'default': '', 'required': 'on', 'name': 'short_text', 'submit': 'Submit'} 
```

因此，

```
dict(imd) == imd.to_dict(flat=False)
#output: True 
```

从python3.6开始

```
dict(imd)
#output: {'default': '', 'required': 'on', 'name': 'short_text', 'submit': 'Submit'}

imd.to_dict(flat=false)
#output: {'default': [''], 'required': ['on'], 'name': ['short_text', 'another'], 'submit': ['Submit']}

imd.to_dict(flat=True) # or imd.to_dict() 
#output: {'default': '', 'required': 'on', 'name': 'short_text', 'submit': 'Submit'} 
```

因此，

```
dict(imd) == imd.to_dict(flat=False)
#output: False 
```

使用`.to_dict()`with`flat=True/False`是一个更安全的选择。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-17T07:07:16.170

```
>>> from werkzeug.datastructures import ImmutableMultiDict
>>> so = ImmutableMultiDict([('default', u''), ('required', u'on'), ('name', u'short_text'), ('name', u'another'), ('submit', u'Submit')])

# Most earlier answers have comments suggesting so.to_dict()
# It doesn't work, duplicates are lost like in a normal dict
>>> so.to_dict()
{'default': '', 'required': 'on', 'name': 'short_text', 'submit': 'Submit'}

# The response by Vb407 is better but litters lists everywhere
>>> dso = dict(so)
{'default': [''], 'required': ['on'], 'name': ['short_text', 'another'], 'submit': ['Submit']}

# We can achieve the requested state by cleaning this up
>>> { k: dso[k][0] if len(dso[k]) <= 1 else dso[k] for k in dso }
{'default': '', 'required': 'on', 'name': ['short_text', 'another'], 'submit': 'Submit'} 
```

# java - java 通过复制构造函数进行深拷贝

> ID：13522140
> 
> 赞同：2
> 
> 时间：2012-11-23T01:36:07.127
> 
> 标签：java, copy-constructor, deep-copy

我想做的是定义一个以 A 作为参数的复制构造函数，并将新的 A 初始化为参数 A 的深层副本

```
public class A<E extends Comparable<? super E>> implements B<E> 
{
    private A a;
    private E[] hArray;

    // What I tried .... my copy constructor

    public A(A other)
    {
         this.a = other;  // deep copy
    }
} 
```

这是通过复制构造函数进行深度复制的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T01:49:04.783

那不是深拷贝。您只是存储对另一个对象的引用。

试试这个：

```
public A(A other) {
    if(other.a != null) {
        this.a = new A(other.a);
    }
    if(other.hArray != null) {
        this.hArray = new E[other.hArray.length];
        for(int index = 0; index < other.hArray.length; index++) {
            this.hArray[index] = other.hArray[index].clone();
        }
    }
} 
```

这假设 E 也有一个执行深度复制的复制构造函数。另外，我刚刚注意到 E 是通用的，因此我的代码可能无法正常工作（但想法就在那里）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T01:45:29.963

如果你想要一个深拷贝，你不能只分配 - 这不是深拷贝的意思。你需要去：

```
public A(A other)
{
    if(other != null) {
        this.a = new A(other.a);  // deep copy
    } else {
        this.a = null;
    }
} 
```

那是递归复制，不过你可能会遇到各种无限循环。此外，您需要以`E`某种方式进行深度复制，而这些泛型让我难以置信，所以我不会试图推测您如何做到这一点。

# javascript - 显示 5 张图片的 Roundabout 插件

> ID：13522143
> 
> 赞同：0
> 
> 时间：2012-11-23T01:36:53.633
> 
> 标签：javascript

我是 javascript 编程的初学者，我在使用迂回插件[http://fredhq.com/时遇到了麻烦](http://fredhq.com/)

我需要让插件在静态时只显示 5 张图像。我试过谷歌它，当然没有成功。我已经阅读了环形交叉路口的文档，但没有找到有关显示图像数量的任何信息。

有谁知道如何解决这个问题？

这些是代码：http: [//jsfiddle.net/ramon_v/h683A/](http://jsfiddle.net/ramon_v/h683A/)

`

```
 <ul>
        <li><span>Block 1</span></li>
        <li><span>Block 2</span></li>
        <li><span>Block 3</span></li>
        <li><span>Block 4</span></li>
        <li><span>Block 5</span></li>
        <li><span>Block 4</span></li>
    </ul>
    <a href="#" id="prev">prev</a>
    <a href="#" id="next">next</a>
</body>
<script src="jquery-1.8.2.js"></script>
<script src="jquery.roundabout2.js"></script>
<script>
    $(document).ready(function() {
        $('ul').roundabout({
           btnNext: '#next',
           btnPrev: '#prev',
           duration: 200
        });
    });
</script>` 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:42:48.663

我根据您的问题整理了一个新的[jsfiddle ；](http://jsfiddle.net/thejohnsmith/h683A/5/)它包括五个图像。

javaScript 将保持不变：

```
$('ul').roundabout({
  btnNext: '#next',
  btnPrev: '#prev',
  duration: 200
}); 
```

**我为使其工作而采取的步骤：**

1.  由于 roundabout 是一个 jQuery 插件，请确保将其加载到 JsFiddle Frameworks 部分（您加载了可能导致冲突的 mootools）

2.  JsFiddle 会为您加载所有的 html 包装器，因此您不必在此处编写 html、head 或 body。

3.  在 JsFiddle 外部资源部分中加载环形交叉口作为外部资源。您需要找到指向实际 .js 文件的静态 Web 链接。在这种情况下，github上有一个（[链接](https://raw.github.com/fredhq/roundabout/master/jquery.roundabout.min.js)）

4.  您正在使用的示例只需要一些 css 规则，所以我删除了所有其余的。

我希望这能回答你的任何问题。

快乐编码！

# php - MySQL查询记录在特定列中具有最大值

> ID：13522147
> 
> 赞同：1
> 
> 时间：2012-11-23T01:37:46.660
> 
> 标签：php, mysql

我知道这一定是一个非常基本的问题，但我还没有找到答案。

有标题说，我想查询保存特定列最大值的记录。

我使用以下代码来实现：

```
SELECT * FROM `table_name` ORDER BY `column_with_specific_max_value` DESC LIMIT 1 
```

我想知道是否有其他方法可以达到相同的结果（更简约）？我知道 SQL 有一个函数 MAX(column) 但它没有按我想要的方式工作。我试过这个：

```
SELECT * FROM `table_name` WHERE `column_with_specific_max_value`=MAX(`column_with_specific_max_value`) 
```

还有这个：

```
SELECT *, MAX(`column_with_specific_max_value`) FROM `table_name` 
```

如果`column_with_specific_max_value`2 行具有相同的最大值会怎样？它会返回两行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:36:34.033

关于什么？

```
select * from table1
where score in (select max(score) from table1) 
```

甚至没有`max`：

```
select * from table1
where score >= all (select score from table1) 
```

Any of those WILL return all rows with the max value. You can play with it [here](http://sqlfiddle.com/#!2/2095c).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:48:45.253

如果您的表有一个自动增量列可以使用，您可以执行类似...

```
select
      YT3.*
   from
      ( select
              MAX( YT2.AutoIncColumn ) as ReturnThisRecordID
           from
              ( select max( YT1.WhatColumn ) as MaxColumnYouWant
                   from YourTable YT1 ) JustMax
                 Join YourTable YT2
                    on JustMax.MaxColumnYouWant = YT2.WhatColumn ) FinalRecord
      JOIN YourTable YT3
         on FinalRecord.ReturnThisRecordID = YT3.AutoIncColumn 
```

我还要确保这是一个应该有索引的列，否则，您将始终进行表扫描。

# java - 在Android中绘制位图的一部分？

> ID：13522148
> 
> 赞同：0
> 
> 时间：2012-11-23T01:38:01.443
> 
> 标签：java, android, graphics

我在这里有一种在 Android 中绘制旋转缩放位图的方法：

```
public void drawRotatedScaledBitmap(Bitmap b, 
        float centerX, float centerY, float width, float height, float angle)
{
    float scaleX = width / b.getWidth();
    float scaleY = height / b.getHeight();
    centerX -= (b.getWidth() * scaleX) / 2.0f;
    centerY -= (b.getHeight() * scaleY) / 2.0f;
    matrix.reset();
    matrix.setTranslate(centerX, centerY);
    matrix.postRotate(angle * (180.0f / (float)(Math.PI)),
            centerX + (b.getWidth() * scaleX) / 2.0f,
            centerY + (b.getHeight() * scaleY) / 2.0f); 
    matrix.preScale(scaleX,scaleY);
    canvas.drawBitmap(b, matrix, null);
} 
```

我不确定如何修改它以接收 float sourceX、float sourceY、float sourceW、float sourceH。

我想渲染图块集，所以我需要告诉它在位图上说 64,64,64,64。

我怎么能这样做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:08:22.083

也许您可以尝试使用 canvas.clipRect() 来指定绘图区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:13:08.270

这是我解决它的方法：

```
public void drawRotatedScaledBitmap(Bitmap b, 
        float centerX, float centerY, float width, float height,
        float sourceX, float sourceY, 
        float sourceWidth, float sourceHeight, float angle)
{
    float cx = centerX;
    float cy = centerY;

    dstRect.left = (int)centerX - (int)(width / 2);
    dstRect.top = (int)centerY - (int)(height / 2);
    dstRect.right = dstRect.left +  (int)width;
    dstRect.bottom = dstRect.top +  (int)height;

    srcRect.left = (int)sourceX;
    srcRect.top = (int)sourceY;
    srcRect.right = srcRect.left +  (int)sourceWidth;
    srcRect.bottom = srcRect.top +  (int)sourceHeight;

    canvas.rotate(angle * (180.0f / (float)(Math.PI)),cx,cy);
    canvas.drawBitmap(b, srcRect, dstRect, null);
    canvas.rotate(-angle * (180.0f / (float)(Math.PI)),cx,cy);
} 
```

# ruby-on-rails - 找不到或无法读取要导入的文件：引导程序。Heroku 部署失败

> ID：13522149
> 
> 赞同：1
> 
> 时间：2012-11-23T01:38:02.237
> 
> 标签：ruby-on-rails, twitter-bootstrap, heroku, sass

**UPD：**问题已解决。

我将 gem twitter-bootstrap 添加到 gems 的整体列表中（不仅是 group :assets）。并且必须在部署之前进行预编译。

* * *

部署有问题。 `application.css.scss`现在不存在 - 该文件已被删除。可能是什么问题？当我添加`bootstrap-sass`而不是`.less`版本时，问题就开始了。但它失败了，原因不明。我决定回去，现在我遇到了这些问题。

```
-----> Preparing app for Rails asset pipeline
       Running: rake assets:precompile
       rake aborted!
       File to import not found or unreadable: bootstrap.
       Load path: Sass::Rails::Importer(/tmp/build_3es5vmj75q0ih/app/assets/stylesheets/application.css.scss)
       (in /tmp/build_3es5vmj75q0ih/app/assets/stylesheets/application.css.scss)
       /tmp/build_3es5vmj75q0ih/app/assets/stylesheets/application.css.scss:16
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/import_node.rb:67:in `rescue in import'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/import_node.rb:45:in `import'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/import_node.rb:28:in `imported_file'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/import_node.rb:37:in `css_import?'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:215:in `visit_import'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:37:in `visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:98:in `visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:53:in `block in visit_children'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:53:in `map'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:53:in `visit_children'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:107:in `block in visit_children'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:119:in `with_environment'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:106:in `visit_children'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:37:in `block in visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:126:in `visit_root'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/base.rb:37:in `visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:98:in `visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/visitors/perform.rb:7:in `visit'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/tree/root_node.rb:20:in `render'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/engine.rb:315:in `_render'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-3.2.3/lib/sass/engine.rb:262:in `render'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sass-rails-3.2.5/lib/sass/rails/template_handlers.rb:106:in `evaluate'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:12:in `initialize'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:106:in `block in build_required_assets'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `each'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:100:in `build_required_assets'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/processed_asset.rb:16:in `initialize'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `new'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:241:in `block in build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:262:in `circular_call_protection'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:240:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:16:in `initialize'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:20:in `block in compile'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/static_compiler.rb:18:in `compile'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:56:in `internal_precompile'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:23:in `invoke_or_reboot_rake_task'
       /tmp/build_3es5vmj75q0ih/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.2/lib/sprockets/assets.rake:29:in `block (2 levels) in <top (required)>'
       Tasks: TOP => assets:precompile:primary
       (See full trace by running task with --trace)
       Precompiling assets failed, enabling runtime asset compilation
       Injecting rails31_enable_runtime_asset_compilation
       Please see this article for troubleshooting help:
       http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting
-----> Rails plugin injection
       Injecting rails_log_stdout
       Injecting rails3_serve_static_assets
-----> Discovering process types
       Procfile declares types      -> (none)
       Default types for Ruby/Rails -> console, rake, web, worker
-----> Compiled slug size: 15.9MB
-----> Launching... done, v14 
```

在**Heroku**日志中，我有：

```
2012-11-23T01:34:01+00:00 app[web.1]: => Rails 3.2.2 application starting in production on http://0.0.0.0:4868
2012-11-23T01:34:01+00:00 app[web.1]: => Call with -d to detach
2012-11-23T01:34:01+00:00 app[web.1]: Processing by SearchesController#new as HTML
2012-11-23T01:34:02+00:00 app[web.1]:   Rendered searches/new.html.haml within layouts/application (707.1ms)
2012-11-23T01:34:03+00:00 app[web.1]: Completed 500 Internal Server Error in 1694ms
2012-11-23T01:34:03+00:00 app[web.1]: 
2012-11-23T01:34:03+00:00 app[web.1]: ActionView::Template::Error (File to import not found or unreadable: bootstrap.
2012-11-23T01:34:03+00:00 app[web.1]: Load path: /app
2012-11-23T01:34:03+00:00 app[web.1]:     4:    %title 
2012-11-23T01:34:03+00:00 app[web.1]:     5:        Seopositions
2012-11-23T01:34:03+00:00 app[web.1]:     6:    = stylesheet_link_tag "application", :media => "all"
2012-11-23T01:34:03+00:00 app[web.1]:   (in /app/app/assets/stylesheets/application.css.scss)):
2012-11-23T01:34:03+00:00 app[web.1]: 
2012-11-23T01:34:03+00:00 app[web.1]:   app/assets/stylesheets/application.css.scss:16
2012-11-23T01:34:03+00:00 app[web.1]:   app/views/layouts/application.html.haml:6:in `_app_views_layouts_application_html_haml__2436706826874996932_32759700'
2012-11-23T01:34:03+00:00 app[web.1]: cache: [GET /] miss
2012-11-23T01:34:03+00:00 app[web.1]:     8:    = csrf_meta_tags
2012-11-23T01:34:03+00:00 app[web.1]:     3: %head
2012-11-23T01:34:03+00:00 app[web.1]:     7:    = javascript_include_tag "application"
2012-11-23T01:34:03+00:00 app[web.1]:     9: %body
2012-11-23T01:34:03+00:00 app[web.1]: 
2012-11-23T01:34:03+00:00 heroku[router]: at=info method=GET path=/ host=seopositions-2.herokuapp.com fwd= dyno=web.1 queue=0 wait=2ms connect=5ms service=1939ms status=500 bytes=643
2012-11-23T01:34:04+00:00 app[web.1]: cache: [GET /favicon.ico] miss
2012-11-23T01:34:04+00:00 heroku[router]: at=info method=GET path=/favicon.ico host=seopositions-2.herokuapp.com fwd= dyno=web.1 queue=0 wait=0ms connect=3ms service=9ms status=200 bytes=0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-22T16:02:13.787

您不需要手动预编译。我遇到了同样的问题，结果证明`bootstrap-sass`（或您正在使用的任何引导 gem）需要**在资产组之外，**否则您将在 Heroku 上遇到该错误。

如果你通过 git 提交到 Heroku（我不知道你会以任何其他方式推送它），你的 gems 将通过 bundle 安装，你的应用程序将被编译。这是在 ethiyo 引用的文档中。

所以你的 Gemfile 应该看起来像这样（减去你不使用的任何资产）：

```
# this needs to be outside of assets or it will fail on Heroku
  gem 'bootstrap-sass'

# Gems used only for assets and not required in production environments by default.
group :assets do
  gem 'coffee-rails'
  gem 'uglifier', '>= 1.0.3'
  gem 'sass-rails'
end 
```

在本地进行预编译很痛苦，不仅因为您忘记了这样做，还主要是因为如果您确实在本地编译，那么对 CSS 或 JS 文件的开发中的任何更改都不会被您的本地开发模式拾取，因为它正在读取预编译的那些. 这会让你发疯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:17:19.773

确保在部署期间或部署之前预编译您的资产，将它们提交到您的存储库中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T12:39:48.143

有同样的问题，预编译修复了错误。显然你应该在*每次*推送到 Heroku 之前在本地编译：[https](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar) ://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar 。

# android - 单击时将按钮位置更改为顶部

> ID：13522153
> 
> 赞同：0
> 
> 时间：2012-11-23T01:38:48.407
> 
> 标签：android, android-layout

我有大约 20 个按钮的线性布局。我希望能够在单击时将按钮的位置更改为屏幕顶部。例如。用户单击按钮#7 我希望布局自动滚动，因此按钮#7 位于屏幕的顶部位置。请帮助一些代码

感谢观看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:58:53.157

把你`LinearLayout`的`ScrollView`

在按钮 中获取对您`ScrollView`then的引用，使用[http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollTo(int](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollTo(int) , int) 滚动到所需位置。`onClick`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:45:34.840

你可以像 JBirdVegas 所说的那样实现你的目标，或者你可以做一件快速的事情。. .

1.  在每个索引上使用 Button 制作 ListView
2.  现在列表视图的 onItemClickListener 放在下面的代码并传递按下的索引。

    设置选择（索引）

例如

```
you can use `setSelection(index)` so the display will jump to the index you want 
```

希望你能明白这一点。

享受编码。:)

# sql - 我怎样才能加入这 2 个查询？（一个带有连接的选择查询和一个非透视查询）

> ID：13522155
> 
> 赞同：1
> 
> 时间：2012-11-23T01:39:28.157
> 
> 标签：sql, sql-server, sql-server-2008-r2, unpivot

这是我的两个查询

```
SELECT EWND.Position,
NKey = CASE WHEN ISNULL(Translation.Name, '') = '' THEN EWND.Name
ELSE  Translation.Name END, Unit = EW_N_DEF.Units                               
FROM EWND
INNER JOIN EW_N_DEF ON EW_N_DEF.Nutr_No = EWND.Nutr_No
LEFT JOIN Translation ON Translation.CodeMain = EWND.Nutr_no
WHERE Translation.CodeTrans  = 1
ORDER BY EWND.Position 
```

这是不重要的

```
SELECT * 
FROM 
   (SELECT N1,N2,N3,N4,N5,N6,N7,N8,N9,N10,N11,N12,N13,N14,N15,N16,N17,N18,N19,N20,N21,N22,N23,N24,N25,N26,N27,N28,N29,N30,N31,N32,N33,N34
   FROM EWNVal WHERE Code=6035) Test
UNPIVOT
   (Value FOR NUTCODE IN 
      (N1,N2,N3,N4,N5,N6,N7,N8,N9,N10,N11,N12,N13,N14,N15,N16,N17,N18,N19,N20,N21,N22,N23,N24,N25,N26,N27,N28,N29,N30,N31,N32,N33,N34)
)AS test 
```

查询的输出如下：

```
 Position Name         Unit
    1   Calories    
    2   Protein g
    3   Total Fat           g
    4   Total Carbs         g
    5   Calories from Fat   
    6   Saturated Fat       g
    7   Trans Fat           g
    8   Monounsaturated Fat g
    9   Polyunsaturated Fat g 
```

和

```
Value Code
    0   N1
    0   N2
    0   N3
    0   N4
    0   N5
    0   N6
    0   N7
    0   N8
    0   N9 
```

输出必须是这样的

```
1   Calories                0   N1
2   Protein             g   0   N2
3   Total Fat           g   0   N3
4   Total Carbs         g   0   N4
5   Calories from Fat       0   N5
6   Saturated Fat       g   0   N6
7   Trans Fat           g   0   N7
8   Monounsaturated Fat g   0   N8
9   Polyunsaturated Fat g   0   N9 
```

两个查询都输出相同数量的行而不是列，是否可以加入这两个？我尝试了工会，但它有我无法解决的问题

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:56:47.503

在 Union 和 Union 中，所有结果都必须具有相同的列名。对于列，您可以使用任何别名，但列名必须相同。

为此，您可以参考此答案

[合并两个 select 语句的结果](https://stackoverflow.com/questions/2826627/combining-results-of-two-select-statements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:59:07.167

如果您的两个查询中的数据可以根据 的数字部分连接`Code`，`Position`那么您可能可以使用以下内容：

```
select q1.position,
  q1.name,
  q2.value,
  q2.code
from
(
  SELECT EWND.Position,
    NKey = CASE WHEN ISNULL(Translation.Name, '') = '' THEN EWND.Name
                ELSE  Translation.Name END, Unit = EW_N_DEF.Units                               
  FROM EWND
  INNER JOIN EW_N_DEF 
    ON EW_N_DEF.Nutr_No = EWND.Nutr_No
  LEFT JOIN Translation 
    ON Translation.CodeMain = EWND.Nutr_no
  WHERE Translation.CodeTrans  = 1
) q1
full outer join
(
  SELECT value, code
  FROM 
  (
     SELECT N1,N2,N3,N4,N5,N6,N7,N8,N9,N10,N11,N12,N13,N14,N15,N16,N17,N18,N19,N20,N21,N22,N23,N24,N25,N26,N27,N28,N29,N30,N31,N32,N33,N34
     FROM EWNVal 
     WHERE Code=6035
  ) Test
  UNPIVOT
  (
    Value FOR NUTCODE IN 
        (N1,N2,N3,N4,N5,N6,N7,N8,N9,N10,N11,N12,N13,N14,N15,N16,N17,N18,N19,N20,N21,N22,N23,N24,N25,N26,N27,N28,N29,N30,N31,N32,N33,N34)
  )AS test
) q2
  on q1.Position = right(q1.code, len(q1.code)-1) 
```

# python - 尝试在多个列表的同一索引处添加元素

> ID：13522157
> 
> 赞同：0
> 
> 时间：2012-11-23T01:40:03.857
> 
> 标签：python, list

我试图创建一个函数，它的参数是一个 4 元素列表的列表，代表团队成员批准的列表。内部（4-element）列表的顺序是 ['team1', 'team2', 'team3', 'team4']

人们会为至少一个团队投票“是”，而为其他三个团队投票“否”。每个“是”都计为一票。

输出是一个列表，其中每个团队的总数量为“是”，顺序与原始顺序相同。

一个例子是：

选举([['YES', 'NO', 'NO', 'NO'],['NO', 'NO', 'NO', 'YES'], ['YES', 'NO','NO '，'不']]）

这将返回 ([2,0,0,1])

你能帮我吗..我是 python 新手，我只是让每个人的投票数像 [1,0,0,0] 但我无法添加每个列表来制作一个列表。

将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:54:40.810

```
vote1 = ['YES', 'NO', 'NO', 'NO']
vote2 = ['NO', 'NO', 'NO', 'YES']
vote3 = ['YES', 'NO','NO','NO']

votelist = [vote1, vote2, vote3]

def electing(votelist):
    return [votes.count("YES") for votes in zip(*votelist)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:58:01.183

Python 不像大多数语言那样有`for`循环，这可能会让该语言的新用户感到困惑。在这种情况下（您想从零计数到任意长度），您可以使用该[`range`](http://docs.python.org/release/1.5.1p1/tut/range.html)函数：

```
for i in range(4):
    ... 
```

这（大致）与以下内容相同：

```
for i in [0,1,2,3]:
    ... 
```

使用它并尝试制定您的代码，如果您有更多问题，请展示您迄今为止所做的尝试，我们可能会为您提供更多帮助。

PS对于做你想做的更高级的方式，我建议查看[`sum`](http://docs.python.org/2/library/functions.html#sum)和[`zip`](http://docs.python.org/2/library/functions.html#zip)内置，以及[列表理解](http://docs.python.org/2/tutorial/datastructures.html)的概念。这些可以将您的任务减少到单行...

# php - 如何在动态下拉菜单中插入这些值

> ID：13522159
> 
> 赞同：0
> 
> 时间：2012-11-23T01:40:41.110
> 
> 标签：php, html

我有一个动态下拉菜单，显示数字 1-10 中的每个值：

```
$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$durationHTML = '';
$durationHTML .= '<select name="duration" id="durationDrop">'.PHP_EOL; 
$durationHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
foreach ($years as $year) {
    $durationHTML .= "<option>$year</option>".PHP_EOL;  // if no value attribute, value will be whatever is inside option tag, in this case, $year
}
$durationHTML .= '</select>'; 
```

我想做的是更改这些值，以便在下面显示这些值：

```
1
1/2
2
2/3
3
3/4
4
4/5
5
5/6
6
6/7
7
7/8
8
8/9
9
9/10
10 
```

我的问题是如何在上面动态显示这些值？

**更新：**

```
$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$durationHTML = '';
$durationHTML .= '<select name="duration" id="durationDrop">'.PHP_EOL; 
$durationHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

for($i = 0; $i < sizeof($years); $i++)
{
  $current_year = $years[$i];
  $durationHTML .= "<option>{$current_year}</option";
  if($i != (sizeof($years) - 1 )) //So you don't try to grab 11 because it doesn't exist.
  {
    $next_year = $years[$i+1];
    $durationHTML .= "<option>{$current_year}/{$next_year}</option>";
  }
}

$durationHTML .= '</select>'; 
```

以下是它的输出：

```
11/2
22/3
33/4
44/5
55/6
66/7
77/8
88/9
99/10
10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:48:59.153

像这样的东西应该适合你；

```
$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$durationHTML = '';
$durationHTML .= '<select name="duration" id="durationDrop">'.PHP_EOL; 
$durationHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
foreach ($years as $year) {
    $durationHTML .= "<option>$year</option>".PHP_EOL;  
    if ($year != $max_year) {
         $nextYear = $year + 1;
         $durationHTML .= "<option>$year / $nextYear</option>".PHP_EOL;              
    }
}
$durationHTML .= '</select>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:47:33.460

可能有几种方法可以做到这一点。

最简单的方法是将您的 foreach 循环更改为一个简单的 for 循环，并获取下一个值并使用它来形成您的分数。我这样做是为了更容易阅读，但您不需要将 current_year 和 next_year 存储在变量中，您可以直接从数组中回显它们。

```
for($i = 0; $i < sizeof($years); $i++)
{
  $current_year = $years[$i];
  echo "<option>{$current_year}</option";
  if($i != (sizeof($years) - 1 )) //So you don't try to grab 11 because it doesn't exist.
  {
    $next_year = $years[$i+1];
    echo "<option>{$current_year}/{$next_year}</option>";
  }
} 
```

# assembly - 在带有 Windows 7 的命令提示符下运行汇编程序

> ID：13522162
> 
> 赞同：2
> 
> 时间：2012-11-23T01:41:07.573
> 
> 标签：assembly, cmd

我想知道如何在 Windows 7 的命令提示符下运行调试。我在网上查了一下，只发现你可以在 System32 文件中找到 debug.exe，但事实并非如此。如果这是不可能的，是否有任何其他类似的程序来编译和编辑汇编程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T02:09:49.020

你不编译汇编代码，你汇编和可选的链接。

热门汇编：

*   [MASM/MASM32](http://www.masm32.com/)
*   [FASM](http://flatassembler.net/)
*   [NASM](http://www.nasm.us/)
*   [JWASM](http://www.japheth.de/JWasm.html)
*   [YASM](http://yasm.tortall.net/)
*   [GoASM](http://www.godevtool.com/)
*   [PoASM](http://www.smorgasbordet.com/pellesc/)

许多人能够组装 32 位或 64 位指令。所有都将在 Windows 7 上运行。我认为所有也将汇编 16 位代码，但 16 位 DOS 应用程序将无法在没有 DOS 模拟器的 Windows 7 上运行。您可以使用[D-Fend Reloaded](http://dfendreloaded.sourceforge.net/)，它是一个 DOSBox 前端并且运行良好。一个很好的免费调试器是[OllyDbg](http://www.ollydbg.de/)

要编辑 Assembler 源文件，您只需要真正的记事本。您可以使用 Visual Studio。我在 Windows 和 Linux 上使用[Geany 。](http://www.geany.org/)还有[RadASM v2](https://fbedit.svn.sourceforge.net/svnroot/fbedit/RadASM/ReleaseMake/Release.zip)，它是一个很好的免费 IDE，带有资源编辑器，还有[RadASM v3](https://fbedit.svn.sourceforge.net/svnroot/fbedit/RadASM30/Release/RadASM.zip)。 [WinASM](http://www.winasm.net/winasm-studio-downloads.html)也是一个不错的汇编 IDE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T01:49:11.097

> 如果这是不可能的，是否有任何其他类似的程序来编译和编辑汇编程序？

这是一个可能工作的[32 位汇编程序。](http://www.masm32.com)这是一个[64 位的汇编器](http://msdn.microsoft.com/en-us/library/hb5z4sxd.aspx)，看起来它与 Visual Studio 2012 捆绑在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T01:53:18.223

根据此页面：[http](http://www.kerrywong.com/2009/05/08/ms-debug-1981-2009/) ://www.kerrywong.com/2009/05/08/ms-debug-1981-2009/有一些替换：

64 位 [http://www.microsoft.com/whdc/devtools/debugging/install64bit.mspx](http://www.microsoft.com/whdc/devtools/debugging/install64bit.mspx)

32 位 [http://www.microsoft.com/whdc/devtools/debugging/installx86.mspx](http://www.microsoft.com/whdc/devtools/debugging/installx86.mspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-08-04T14:09:19.730

我使用 MASM32 SDK。为了表现出这个世界。

# mongodb - MongoDB 使用什么样的公式来计算地球索引中的距离？

> ID：13522167
> 
> 赞同：2
> 
> 时间：2012-11-23T01:41:16.280
> 
> 标签：mongodb, indexing, geospatial

在 MongoDB 中，可以创建索引，而不是用于`near`在“2d”和“3d”空间中查找给定纬度和经度的文档。

MongoDB 使用什么样的公式来查找两个给定纬度/经度对之间的距离？

我想到的几个是：

*   欧几里得距离
*   哈弗辛公式
*   文森提公式

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:11:56.690

MongoDB（从 2.2 开始）仅支持 2-d 地理空间索引，不支持 3-d。

使用MongoDB B 树索引之上的[geohash](http://en.wikipedia.org/wiki/Geohash)系统对各个位置进行编码。

在 MongoDB 1.8+ 中，支持对使用十进制度的查询进行[球面校正](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-TheEarthisRoundbutMapsareFlat)。

距离计算有[两种主要类型：](https://github.com/mongodb/mongo/blob/v2.2/src/mongo/db/geo/2d.cpp#L1942)

*   平原[欧几里得距离](http://en.wikipedia.org/wiki/Euclidean_Distance)。源代码参考是[db/geo/core.h：`distance()`](https://github.com/mongodb/mongo/blob/v2.2/src/mongo/db/geo/core.h#L434)
*   球体[-n-向量](http://en.wikipedia.org/wiki/N-vector)。源代码参考是[db/geo/core.h:`spheredist_rad()`](https://github.com/mongodb/mongo/blob/v2.2/src/mongo/db/geo/core.h#L518)。

# php - 从数值数组和函数创建关联数组？

> ID：13522171
> 
> 赞同：0
> 
> 时间：2012-11-23T01:42:08.647
> 
> 标签：php, arrays, map

我有一个带有如下代码的数字数组：array('123', '333', '444'); 我还有一个给定代码返回名称的函数，因此 myFunc('123') 将返回 'soap'

我想生成一个关联数组，其中包含作为键的代码和作为值的名称。有什么功能可以让我这样做吗？我知道一个 foreach 循环会做到这一点，但我想知道是否有一些为此制作的功能。看到了一些像 array_map 这样的方法，但它们似乎不符合我的需要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T01:43:36.597

```
array_combine($arr, array_map('myFunc', $arr)) 
```

但是有两个功能，不是一个；-) 虽然仍然是 oneliner

# .net - 需要 ASP 推荐：（Linq 或 SqlDataSource？）+（Response.Write 或 UserControls 或 Repeater？

> ID：13522174
> 
> 赞同：2
> 
> 时间：2012-11-23T01:42:25.110
> 
> 标签：.net, linq, user-controls, sqldatasource, response.write

我是 ASP.net 中的新投标人，正在开发一个网站，该网站包含用户友好的分类项目列表，当单击项目的详细信息时（图片库、文本、联系表格、那种东西，也许还有以后的用户评论和费率）。我已经阅读了很多，仍然可以对我的问题得出结论，所以我需要一些建议。我需要 [良好的性能 + 低复杂性 + 不会被弃用] 在我现在正试图决定的 2 件重要事情上的建议。

**1)** Linq 还是 SqlDataSource？我不介意为 SqlDataSource 编写 SQL，但我读过 Linq 是新时代，所以我害怕在 2 年内有一个过时的网站。或者不注意 Linq 的好处。

**2)**我相信我不能对产品分页列表使用 gridview 控件，因为它们对于公司目标客户来说布局非常严格。产品列表的网页设计是一种 youtube 视频结果列表。单击时会显示有关该项目的孔信息（在其他页面中）。我应该如何为产品列表生成 HTML 代码？我曾经连接“html”+阅读器数据（查询结果）并使用 Response.Write() 将它们发送到页面，但我读到这不适用于 UpdatePanel，它有点“老技术”你的立场是什么它？。然后我开始阅读有关中继器的信息，但我相信它们不会让我接近我的模型类，因为我看到的示例直接评估查询。最后，我开始阅读有关创建自己的控件的信息“

请我需要知道最好的（**推荐**的）技术来开始学习细节并继续进行项目。多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:54:48.107

GridView 专为表格数据而设计。可以按照您描述的方式对其进行操作，但这不是重点。对于您所描述的想要做的事情，Repeater 或 ListView 会做得更好。附带说明一下，所有这些数据绑定控件都采用迭代器，该迭代器可以完全在代码端完成（我通常这样做），或者您可以使用 DataSource 控件。

在内存中构建一个 html 表并使用响应写入（甚至是文字控件）会很快，但是您必须重新编译才能对表示层进行任何更改，并且如上所述不适用于更新面板。

也就是说，我从不使用 UpdatePanel。我使用 jquery 发布/获取数据，然后使用 jquery 进行影响 UI 的更改。

除了使用基于服务器的解决方案之外，还有可以与 asp.net 一起使用的客户端解决方案，例如用于构建 MVC 表单的 Knockout.js 库。

现在，对于 Linq 与 SqlClient，这确实是一个偏好问题，并且每个都有优点和缺点。Linq-to-sql 易于使用（对于大多数事情），但对底层数据库的更改必须反映在 DataContext 中。就个人而言，我喜欢 Linq-to-sql，并尽可能使用它。

# python - Python 多处理日志记录 - 为什么使用 multiprocessing.get_logger

> ID：13522177
> 
> 赞同：19
> 
> 时间：2012-11-23T01:43:08.600
> 
> 标签：python, logging, multiprocessing

一段时间以来，我一直在为多处理日志而苦苦挣扎，原因有很多。

我的一个原因是，为什么另一个 get_logger.

当然，我已经看到[了这个问题](https://stackoverflow.com/questions/641420/how-should-i-log-while-using-multiprocessing-in-python)，而且 multiprocessing.get_logger 返回的记录器似乎做了一些“进程共享锁”的魔法来使记录处理顺利进行。

所以，今天我查看了 Python 2.7 的多处理代码（/multiprocessing/util.py），发现这个 logger 只是一个普通的 logging.Logger，几乎没有任何魔法。

这是 Python 文档中的描述，就在 get_logger 函数之前：

> 提供了一些对日志记录的支持。但是请注意，日志包不使用进程共享锁，因此（取决于处理程序类型）来自不同进程的消息可能会混淆。

所以当你使用错误的日志处理程序时，即使是 get_logger 记录器也可能出错？我已经使用了一个程序使用 get_logger 进行日志记录一段时间。它将日志打印到 StreamHandler 并且（似乎）永远不会混淆。

现在我的理论是：

1.  multiprocessing.get_logger 根本不做进程共享锁
2.  StreamHandler 适用于多处理，但 FileHandler 不适用
3.  这个 get_logger 记录器的主要目的是跟踪进程的生命周期，并提供一个易于获取和准备使用的记录器，该记录器已经记录了进程的名称/ID 类型的东西

这是问题：

我的理论对吗？

如何/为什么/何时使用这个 get_logger？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-05-28T22:15:55.157

是的，我相信 multiprocessing.get_logger() 不做进程共享锁是对的——正如你所说，文档甚至声明了这一点。尽管有所有的赞成票，但您链接到的[问题](https://stackoverflow.com/questions/641420/how-should-i-log-while-using-multiprocessing-in-python)似乎在说明它确实存在方面存在缺陷（为了避免怀疑，它是在十多年前写的 - 所以也许有一段时间就是这种情况）。

那么为什么 multiprocessing.get_logger() 存在呢？[文档](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.get_logger)说：

> 返回多处理使用的记录器。如有必要，将创建一个新的。
> 
> 首次创建时，记录器具有级别 logging.NOTSET 并且没有默认处理程序。默认情况下，发送到此记录器的消息不会传播到根记录器。

即，默认情况下，多处理模块不会产生任何日志输出，因为它的记录器的日志记录级别设置为 NOTSET，因此不会产生日志消息。

如果您的代码存在您怀疑是多处理问题的问题，那么缺少日志输出对调试没有帮助，这就是 multiprocessing.get_logger() 存在的原因 - 它返回使用的记录器多处理模块本身，以便您可以覆盖默认日志配置以从中获取一些日志并查看它在做什么。

由于您询问如何使用 multiprocessing.get_logger()，因此您可以这样称呼它并以通常的方式配置记录器，例如：

```
logger = multiprocessing.get_logger()
formatter = logging.Formatter('[%(levelname)s/%(processName)s] %(message)s')
handler = logging.StreamHandler()
handler.setFormatter(formatter)
logger.addHandler(handler)
logger.setLevel(logging.INFO)

# now run your multiprocessing code 
```

也就是说，为了方便起见，您实际上可能想要使用 multiprocessing.log_to_stderr() - 根据[文档](https://docs.python.org/3/library/multiprocessing.html#multiprocessing.log_to_stderr)：

> 此函数执行对 get_logger() 的调用，但除了返回由 get_logger 创建的记录器外，它还添加了一个处理程序，该处理程序使用格式将输出发送到 sys.stderr`'[%(levelname)s/%(processName)s] %(message)s'`

即它节省了您自己设置大量日志记录配置的需要，您可以改为开始调试您的多处理问题：

```
logger = multiprocessing.log_to_stderr()
logger.setLevel(logging.INFO)

# now run your multiprocessing code 
```

重申一下，这只是一个正在配置和使用的普通模块记录器，即没有什么特别的或过程安全的。它只是让您查看多处理模块本身内部发生的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T11:33:38.307

这个答案不是`get_logger`具体的，但也许你可以使用[这篇文章](http://plumberjack.blogspot.co.uk/2010/09/using-logging-with-multiprocessing.html)中建议的方法？请注意，`QueueHandler`/`QueueListener`类可通过[`logutils`](http://code.google.com/p/logutils/)包用于早期 Python 版本（也可[在 PyPI 上](http://pypi.python.org/pypi/logutils/)获得）。

# javascript - 更改禁用的字体颜色

> ID：13522187
> 
> 赞同：2
> 
> 时间：2012-11-23T01:44:14.093
> 
> 标签：javascript, css, fonts, disabled-control

这是一个列表，其中一个列表被禁用。如你们所知，禁用时字体颜色为灰色。我正在使用 IE9，我想更改字体颜色。有谁知道如何更改禁用的字体颜色？？？

这是我的代码：

```
<table id="list" cellspacing="0" border="1" style="border-collapse: collapse;">
<tr disabled bgcolor =#EAEAEA  style="color:#ea0000;">
<td>name</td>
<td>email</td>
</tr>
<tr class="nameMail" onclick='op()'>
<td id="a">&nbsp</td>
<td id="b">&nbsp</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:47:08.887

您的代码无效。

你会做这样的事情：

```
 input[type="text"]:disabled
 {
    color:#ea0000;
 } 
```

此外，“禁用”选择器应该主要用于表单元素和控件。

如果您愿意，可以使用 tds 中的按钮，如下所示：

```
 <table id="list" cellspacing="0" border="1" style="border-collapse: collapse;">
      <tr bgcolor="#EAEAEA"  style="color:#ea0000;">
        <td><button disabled>name</button></td>
       <td><button disabled>email</button></td>
      </tr>
      <tr class="nameMail" onclick='op()'>
        <td id="a">&nbsp</td>
        <td id="b">&nbsp</td>
     </tr>
   </table> 
```

您还需要像这样更新 css 以摆脱按钮边框。

```
 button{
   border:0;
   color:#ea0000;
   }

  button:disabled
  {
   color:#000;
  } 
```

# javascript - 将数组值插入到 Div 框中

> ID：13522188
> 
> 赞同：0
> 
> 时间：2012-11-23T01:44:18.313
> 
> 标签：javascript, jquery, html

我希望用户在单击按钮时将数组中的值插入五个 div 框之一。该代码在萤火虫上没有错误，但是当我单击按钮时没有任何反应。我的代码有什么问题。这是 jsfiddle 示例[http://jsfiddle.net/fHHnq/13/](http://jsfiddle.net/fHHnq/13/)

这是相关的js代码...

```
var news = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11",
        "12", "13", "14", "15", "16", "17", "18", "19", "20"];

$(document).ready(function() {

 $('.button').click(function() {

    var article_id = 1;

    var number = Math.floor(Math.random() * 5) + 1;

    $('.class_' + number).html('news[article_id]');

    article_id++;

 });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T01:49:00.847

您错误地分配了类并且您的 HTML 使用`-`，但您的 JavaScript`_`用于类名。

这是工作的jsfiddle：http: [//jsfiddle.net/fHHnq/16/](http://jsfiddle.net/fHHnq/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:25:30.117

在您的 html 中，您使用的是“class-1”，而在您的 javascript 中，您使用的是“$('.class_' + number)”，这将导致 class_1。所以class-1和class_1不匹配

# java - 当作业到达 threadPoolExecution 时调用所有线程

> ID：13522195
> 
> 赞同：0
> 
> 时间：2012-11-23T01:45:33.850
> 
> 标签：java, multithreading, threadpoolexecutor

在常见的 workQueue 即 adPoolExecution 架构中，当一个作业到达时，只调用一个线程并由该线程完成工作。相反，我希望所有线程都被调用并且所有线程都执行任务。

我的情况如下。我有 5000 个数据项，我必须对每个数据项运行一个任务。事实证明，一个一个运行它很慢，因此我想在这里使用线程。这里假设我使用了 5 个线程。第一个线程将执行前 1000 个数据项，第二个线程将执行接下来的 1000 个数据项，其他将紧随其后。现在，当需要在这 5000 个数据项上执行的作业到达时，必须调用所有 5 个线程，或者更确切地说，将其从睡眠状态中恢复，以便它可以执行其任务。

这怎么可能在 java 中使用 theadPoolExecution。我知道将同一作业的 5 个副本插入队列可能会有所帮助。但这有很多副作用，比如如果一个线程快速完成它的工作，它将占用其他人的工作。

谢谢 Vineeth

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T04:16:26.730

由于您希望第一个线程处理前 1000 个项目，而第二个线程处理另外 1000 个项目，这意味着您希望线程执行不同的任务。相反，如果所有线程都执行相同的任务，这意味着所有线程都执行相同的数据项（这是没有用的，并且当线程将结果保存到同一个位置时可能会导致问题）。

所以请不要“插入5份相同的工作”。提交具有不同数据范围的不同任务。

```
 for (int k=0; k<N; k+=1000) {
       final int datapoint=k;
       executor.execute(new Runnable() {
           processDataRange(datapoint, datapoint+1000);
       });
    } 
```

在循环的每一次通过中，都会创建具有不同参数的新任务并将其提交给执行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:49:05.663

您可以在示例中使用计数为 5 的[CountDownLatch](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)，这样您就可以在所有线程调用各自`countDown`的 s 之后执行任何您需要的操作。

# html - IE9.0 和 colgroup / colspam 问题

> ID：13522196
> 
> 赞同：0
> 
> 时间：2012-11-23T01:45:49.913
> 
> 标签：html, internet-explorer

IE 9.0 无法正确呈现以下 HTML，我没有想法......请帮助。 **我无法更改“<！DOCTYPE html >”。有任何想法吗 ？** 谢谢。

```
<!DOCTYPE html>
<html lang="en">
<body>
<table style="table-layout:fixed;" width="100%" border="1">
    <colgroup span="120">
    </colgroup>
    <tbody>
        <tr>
            <td colspan="120">AAAAAAAAAAAAAAAAAAAAAA</td>
        </tr>
        <tr>
            <td colspan="15">aa</td>
            <td colspan="15">ss</td>
            <td colspan="90">dd</td>
        </tr>
        <tr>
            <td colspan="120">zzzzzzzz</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:49:22.267

Colspan = 要组合成单个单元格的列数。我害怕你用它来设置列的宽度。这是错误的。使用 CSS width 属性设置列的宽度。

`<td width="120" colspan="3">`

（那是纯 HTML）或 CSS

`<td style="width:120px" colspan="3">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T06:59:12.443

标记违反了 HTML 表格模式，正如[W3C 标记验证器](http://validator.w3.org/)会告诉您的那样，它有点神秘。该`colspan`属性指定一个单元格跨越的表格列数。当只有 3 列时，您不能跨越 120 列。

在我看来，您真正想要的是划分列之间的可用宽度，以便关系为 15：15：90。将其简化为 1：1：6，然后将它们转换为百分比：

```
<table style="table-layout:fixed;" width="100%" border="1">
     <col width="12.5%">
     <col width="12.5%">
     <col width="75%">
    <tbody>
        <tr>
            <td colspan="3">AAAAAAAAAAAAAAAAAAAAAA</td>
        </tr>
        <tr>
            <td>aa</td>
            <td>ss</td>
            <td>dd</td>
        </tr>
        <tr>
            <td colspan="3">zzzzzzzz</td>
        </tr>
    </tbody>
</table> 
```

使用固定布局，在处理第一行时确定列的宽度。因此，需要在`col`元素中设置宽度。否则，浏览器在处理第一行时不会有任何宽度要求，因此它会根据规范在列之间平均分配总空间。

# ios - 为 iOS 动态设置 Map Pin 颜色

> ID：13522198
> 
> 赞同：2
> 
> 时间：2012-11-23T01:46:06.207
> 
> 标签：ios, mapkit, mkannotation, mkannotationview

我解析了一个包含字符串 0 ,1 和 2 的 xml。

//供参考 0 = 绿色 1 = 红色 2 = 紫色

我有一个向 MKAnotaion 确认的类，其中包含以下作为属性的变量。

```
CLLocationCoordinate2D  coordinate;
NSString            *title;
NSString            *subtitle;
MKPinAnnotationColor pinColor; 
```

这个类被命名为 MyAnnotation

现在在地图视图的 viewDidLoad 中，我运行一个 for 循环来迭代解析的数据，如下所示（locationArray 保存了这些数据，我可以很好地提取所有信息。

```
 for (int i = 0; i < locationArray.count; i++) {
    myAnnotation =[[MyAnnotation alloc] init];

    NSString *thePointName = [[locationArray objectAtIndex:i]xmlName];
    NSString *theAddress = [[locationArray objectAtIndex:i]xmlAddress];

    NSString *latString = [[locationArray objectAtIndex:i]xmlLat];
    NSString *lonString = [[locationArray objectAtIndex:i]xmlLon]; 
```

//这是拉出提到的0、1或2个字符串的字符串，这些字符串代表引脚的颜色 poinType被保留为字符串

```
 pointType = [[locationArray objectAtIndex:i]xmlType];

    double theLatitude = [latString doubleValue];
    double theLongtitude = [lonString doubleValue];

    userLocation.latitude=theLatitude;
    userLocation.longitude=theLongtitude;

    myAnnotation.coordinate=userLocation;
    myAnnotation.title=[NSString stringWithFormat:@"%@", thePointName];
    myAnnotation.subtitle=[NSString stringWithFormat:@"%@", theAddress];

    //I log that the points are actually giving either of the colors and if so set MyAnnotation class to the pincolor 

    NSLog(@"Points Color %@", pointType);
    if ([pointType isEqualToString:@"0"]){
        myAnnotation.pinColor = MKPinAnnotationColorGreen;
    }else if ([pointType isEqualToString:@"1"]){
        myAnnotation.pinColor = MKPinAnnotationColorRed;
    }else if ([pointType isEqualToString:@"2"]) {
        myAnnotation.pinColor = MKPinAnnotationColorPurple;
    }

    [mapView addAnnotation:myAnnotation];

    } 
```

现在在 MKAnnotationView 视图中，我执行以下操作

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id     <MKAnnotation>)annotation

 {

// if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
    return nil;

// try to dequeue an existing pin view first
static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc]
                                  initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
pinView.animatesDrop=YES;
pinView.canShowCallout=YES;

    //set pin color to the correct colour
    if (myAnnotation.pinColor = MKPinAnnotationColorGreen) {
    pinView.pinColor = MKPinAnnotationColorGreen;
    }

    else if (myAnnotation.pinColor = MKPinAnnotationColorRed) {
    pinView.pinColor = MKPinAnnotationColorRed;

     }

    else if (myAnnotation.pinColor = MKPinAnnotationColorPurple){
    pinView.pinColor = MKPinAnnotationColorPurple;
    }

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
[rightButton setTitle:annotation.title forState:UIControlStateNormal];
[rightButton addTarget:self
                action:@selector(showDetails:)
      forControlEvents:UIControlEventTouchUpInside];
pinView.rightCalloutAccessoryView = rightButton;

    UIImageView *profileIconView = [[UIImageView alloc] initWithImage:[UIImage  imageNamed:@"Profile.png"]];
pinView.leftCalloutAccessoryView = profileIconView;

return pinView;
  } 
```

我也尝试过上述方法，但它没有设置引脚颜色。其他一切都很好！

```
 //set pin color to the correct colour
    if (pointType isEqualToString:@"0") {
    pinView.pinColor = MKPinAnnotationColorGreen;
    }

    else if (pointType isEqualToString:@"1") {
    pinView.pinColor = MKPinAnnotationColorRed;

    }

    else if (pointType isEqualToString:@"2"){
    pinView.pinColor = MKPinAnnotationColorPurple;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:33:19.353

此代码在`viewForAnnotation`：

```
if (myAnnotation.pinColor = MKPinAnnotationColorGreen) { 
```

不起作用有两个原因：

1.  它使用一个用于赋值的等号——而不是用于检查相等性。它需要使用两个等号来检查是否相等。但是，这并不能解决原因＃2的主要问题......

2.  代码正在检查`myAnnotation`which 的值是在此委托方法之外设置的变量。不能*保证*委托方法将与设置的 for 循环同步调用`myAnnotation`。不要假设`viewForAnnotation`在您调用后会立即调用它`addAnnotation`。如果地图视图需要在缩放或平移后再次显示注释，甚至可以为同一个注释多次调用委托方法。

相反，您必须使用`annotation`传递给委托方法的参数。这是对地图视图在委托方法的当前调用中想要查看的注释的引用。

由于`annotation`参数的类型通常为`id<MKAnnotation>`，因此您首先必须将其强制转换为您的自定义类，然后您可以访问任何自定义属性：

```
//first make sure this annotation is our custom class before casting it...
if ([annotation isKindOfClass:[MyAnnotation class]])
{
    MyAnnotation *currentAnn = (MyAnnotation *)annotation;

    if (currentAnn.pinColor == MKPinAnnotationColorGreen) {
        pinView.pinColor = MKPinAnnotationColorGreen;
    }

    else if (currentAnn.pinColor == MKPinAnnotationColorRed) {
        pinView.pinColor = MKPinAnnotationColorRed;

    }

    else if (currentAnn.pinColor == MKPinAnnotationColorPurple) {
        pinView.pinColor = MKPinAnnotationColorPurple;
    }
} 
```

甚至更简单：

```
//first make sure this annotation is our custom class before casting it...
if ([annotation isKindOfClass:[MyAnnotation class]])
{
    MyAnnotation *currentAnn = (MyAnnotation *)annotation;        
    pinView.pinColor = currentAnn.pinColor;
} 
```

（不相关，但为什么代码设置的标题`rightButton`即使它不可见？）

# shopify - 如何从 Shopify 获取网关 Authcode？

> ID：13522201
> 
> 赞同：0
> 
> 时间：2012-11-23T01:46:40.497
> 
> 标签：shopify

Shopify 在付款后接收并存储从网关收到的信息。可以在订单历史部分下方的订单页面中查看。“客户成功支付……”是一个超链接。除了一些其他信用卡信息之外，该信息还包含身份验证码。我只想要授权码。Webhook 不会在 xml 数据中发送此信息。您可以通过 API 检索它还是不允许这样做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T02:01:58.170

感谢你的协助。显然，由于 PCI 合规性原因，Shopify 不会提供该信息。进行信用卡处理的支付提供商只会向 Shopify 发送一个回复，我希望我能让他们也给我回复，但这是我的一厢情愿。财务团队只需登录 Shopify 并在需要时查看该信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:33:00.770

任何特定于网关的信息都通过[Transactions](http://api.shopify.com/transactions.html) API`receipt`上的参数提供。如果您要查找的令牌不存在，则它不可用。

# c# - 如何实时添加自定义组件？

> ID：13522207
> 
> 赞同：0
> 
> 时间：2012-11-23T01:47:27.480
> 
> 标签：c#, winforms, custom-component

好的，我在命名空间下创建了一个自定义组件`My_Namespace`。然后在代码的某处我试图实时添加我的自定义组件：

```
public void Some_Method()
{
  My_Namespace.My_Custom_Component my_component;

  my_component.Location = new System.Drawing.Point(100, 100);
  my_component.Name = "my_component";
  my_component.Size = new System.Drawing.Size(380, 380);

  this.Controls.Add(my_component);
} 
```

但是我收到此错误

> 错误 CS0165：使用未分配的局部变量“my_component”

我不明白，因为`my_component`在我的方法开始时声明了。

有谁知道怎么了？否则如何实时调用自定义组件的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:20:39.980

我的猜测是它应该是：

```
My_Namespace.My_Custom_Component my_component = new My_Namespace.My_Custom_Component(); 
```

您不能使用未初始化的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:01:14.210

my_component 为空，您应该在使用它之前对其进行初始化。

# validation - 如何自定义人脸消息的呈现方式

> ID：13522211
> 
> 赞同：0
> 
> 时间：2012-11-23T01:47:49.637
> 
> 标签：validation, jsf-2

我想自定义人脸消息的呈现方式。

为了这，

```
<h:inputText id="name" required="true" /> 
```

当验证失败时，它将显示在

```
<h:message for="name" /> 
```

但是，我想自定义演示调用 JS 如下：

```
<div class="notification"></div>
function showNotification(msg){
$(".notification").html(msg);
$(".notification").fadeIn(1000, function(){
    timeout = setTimeout(function(){
        $(".notification").fadeOut(1000);
    }, 5000);
});
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:54:41.450

您可以使用[`FacesContext#getMessageList()`](http://download.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#getMessageList%28%29)来获取视图中的消息，如有必要，获取特定客户端 ID 的消息。您可以在[`ui:repeat`](http://download.oracle.com/javaee/6/javaserverfaces/2.0/docs/pdldocs/facelets/ui/repeat.html). 每个项目都是一个[`FacesMessage`](http://download.oracle.com/javaee/6/api/javax/faces/application/FacesMessage.html)有几个吸气剂。您可以使用 . 在未转义的消息中显示任何 HTML `<h:outputText escape="false">`。

所以，简而言之：

```
<ui:repeat value="#{facesContext.messageList('form:name')}" var="message">
    <div><h:outputText value="#{message.summary}" escape="false" /></div>
</ui:repeat> 
```

*（在上面的例子中，我假设你的表格有`id="form"`）*

或者，如果该 HTML 帮助链接*实际上*不是消息的一部分，那么：

```
<ui:repeat value="#{facesContext.messageList('form:name')}" var="message">
    <div>#{message.summary} <a href="help.xhtml">help</a></div>
</ui:repeat> 
```

# php - jquery ui sortable将connectWith列表保存到mysql数据库php

> ID：13522216
> 
> 赞同：2
> 
> 时间：2012-11-23T01:47:58.420
> 
> 标签：php, mysql, ajax, jquery-ui

我有两个清单

```
<ul class="sortable" id="list-A">
   <li id="1">Value 1 </li>
   <li id="2">Value 2 </li>
   <li id="3">Value 3 </li>
</ul>

<ul class="sortable" id="list-B">
   <li id="4">Value 1 </li>
   <li id="5">Value 2 </li>
   <li id="6">Value 3 </li>
</ul> 
```

像这样连接

```
 $( ".sortable" ).sortable({
       connectWith: '.sortable',
       placeholder: "widget-highlight"
     }); 
```

我知道如何通过保存订单将一个有序列表保存到数据库，但是**如果用户将项目从列表 a 移动到列表 b，如何保存**？

我想保存项目位置但是如何

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T02:11:11.693

使用`.sortable()`的`.receive()`回调，获取被删除节点的`.index()`via `ui.item.index()`。你如何在 PHP 中处理它取决于你的 ajax 处理程序是如何设置的。

```
$( ".sortable" ).sortable({
   connectWith: '.sortable',
   placeholder: "widget-highlight",
   // Receive callback
   receive: function(event, ui) {
     // The position where the new item was dropped
     var newIndex = ui.item.index();
     // Do some ajax action...
     $.post('someurl.php', {newPosition: newIndex}, function(returnVal) {
        // Stuff to do on AJAX post success
     });
   },
   // Likewise, use the .remove event to *delete* the item from its origin list
   remove: function(event, ui) {
     var oldIndex = ui.item.index();
     $.post('someurl.php', {deletedPosition: oldIndex}, function(returnVal) {
        // Stuff to do on AJAX post success
     });

   }
 }); 
```

上面的例子会将被删除节点的新列表位置发送到`$_POST['newPosition']`

事件在[`.sortable()`API 文档中有完整描述](http://api.jqueryui.com/sortable/#event-receive)

# python - 使用 putty 在远程机器上运行 Django 开发服务器。如何运行开发服务器？

> ID：13522228
> 
> 赞同：0
> 
> 时间：2012-11-23T01:49:31.553
> 
> 标签：python, django, linux, putty, remote-server

我没有在本地机器上运行开发服务器，而是`sshing`在另一台机器上运行。

我尝试通过定位 ip 地址（使用 ifconfig 命令并查找与 eth0 关联的地址）来更改开发服务器的运行位置，并像这样运行开发服务器：

```
python manage.py runserver <ipaddress>:8000 
```

但是当我在浏览器中输入 URL 时`http://<ipaddress>:8000`，我得到`cannot connect to the website`.

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T00:18:15.600

不要输入您的 IP 地址，而是使用 0.0.0.0，以便任何其他 IP 地址都可以连接到您的服务器。然后是的，正如其他人所提到的，您必须为传入连接打开端口 8000。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:32:37.710

通过 ssh使用[端口转发。](http://en.wikipedia.org/wiki/Port_forwarding)具体情况可能会有所不同，但[https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding](https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding)提供了一个很好的指南。希望有帮助！

# php - 检测颜色是否在范围内

> ID：13522229
> 
> 赞同：9
> 
> 时间：2012-11-23T01:49:44.893
> 
> 标签：php

> **可能重复：**
> [PHP 中颜色之间的“距离”](https://stackoverflow.com/questions/1633828/distance-between-colours-in-php)

我想检测 RGB 值是否是某种粉红色。我不确定如何进行此操作，因为似乎没有一系列 RGB 或十六进制值遵循粉红色的线性顺序（一种粉红色是`255, 182, 193; #FFB6C1`，而另一种是`238, 162, 173; #EEA2AD`）。假设我知道我的范围的开始和结束 RGB/十六进制值，你知道该怎么做吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T02:58:21.563

它对我来说看起来相当线性。但是，您需要了解一些色彩理论。

在回答您的问题之前，我希望您不介意我在此处包含一个简单的色彩理论复习。但它有助于理解或制定任何解决方案。

首先，我相信大多数人都会记得他们在幼儿园学过的色轮：

```
 Red
       Red                        Orange   |   Purple
        |                                \_|_/
       _o_        ---------->             _o_
      /   \                              / | \
  Yellow   Blue                   Yellow   |   Blue
                                         Green 
```

好吧，我们需要稍微修改一下。因为事实证明，红色和蓝色并不是真正的原色，因为您可以通过将洋红色和黄色混合来获得红色，并且可以通过将青色和一点红色混合来获得蓝色。所以修改后的色轮使用*印刷*颜色：CMY：

```
 Magenta
     Red   |   Blue
         \_|_/
          _o_
         / | \
  Yellow   |   Cyan
         Green 
```

这基本上是 HSV 颜色空间（S 通常从轮子的中心绘制到边缘，而 V 根本不绘制，但通常可以通过滑块更改）。它源自印刷颜色 CMY。那么这如何帮助我们处理屏幕颜色 RGB 呢？

好吧，如果您仔细观察它，您会发现它实际上是印刷和屏幕色彩空间的组合。它实际上描绘了CMY和RGB之间的关系：

```
 Magenta                 Magenta
     Red   |   Blue                |           Red     Blue
         \_|_/                     |              \_ _/
          _o_            ==       _o_       +       o
         / | \                   /   \              |
  Yellow   |   Cyan         Yellow    Cyan          |
         Green                                    Green 
```

所以，任何RGB颜色都可以通过理解这个色轮来理解。例如，RGB 中没有黄色。但请注意，黄色与蓝色相反。因此，要获得黄色，请从颜色中减去蓝色：

```
rgb(100,80,10)  is a "yellowish" version of rgb(100,80,120)
            ^                                           ^ 
```

一旦你理解了这个使用 RGB 值的色轮就更有意义了。通过足够的练习，您可以直接在`#rrggbb`语法中组合和编辑颜色，而无需参考颜色图表。

所以，回答你的问题。假设你的目标粉红色是：

```
rgb(255,182,193) 
```

关于“粉红色”，我们知道两件事：

1.  我们认为它是一种红色。因此，目标颜色具有较高的红色值（实际上是最大值）是有道理的。

2.  我们认为它是一种非常浅的红色。因此，非红色分量也相当高（均高于 150）是有道理的。

因此，要获得接近目标颜色的色调，我们需要：

1.  R值明显高于G或B。
2.  所有值都相当高（超过 150 左右）。

根据这个定义，我们可以将粉色识别为：

```
// Pseudo code:

is_pink (R,G,B) {
    return R > 200 &&  // make sure R is high
           G > 150 &&  // make sure G & B are relatively high
           B > 150 &&
           R > G &&    // make sure G & B are not higher than R
           R > B;
} 
```

通过确保 G 和 B 非常相似，我们可以添加另一个条件来拒绝略带蓝色或绿色的“粉红色”：

```
// Pseudo code:

is_pink (R,G,B) {
    return R > 200 &&
           G > 150 &&
           B > 150 &&
           R > G &&
           R > B &&
           abs(G-B) < 20; // make sure it's neither bluish or greenish
} 
```

您可以调整值 200、150 和 20 以适应您对粉红色的品味，但您会看到，如果我们将上述函数应用于您的测试颜色`(255,182,193)`，`(238,162,173)`它们都会被识别为“粉红色”。

# sql - 如何将此批处理队列存储过程转换为可在 SQLite 中使用的内容

> ID：13522230
> 
> 赞同：1
> 
> 时间：2012-11-23T01:49:46.650
> 
> 标签：sql, tsql, sqlite

我有一个 SQL 存储过程，用于在队列中获取一批结果。我正在寻找转移到 Sqlite DB，并且想知道如果可能的话我将如何去做。

```
ALTER PROCEDURE [dbo].[GetNextItemInQueue]
    @LockedBy varchar(75)
AS

SET NOCOUNT ON;

declare
    @Error                      int,
    @ExitCode                   int,
    @RowCount                   int,
    @PendingStatus              varchar(75),
    @MinutesBeforeBreakLock     int,
    @RequestId                  int,
    @BatchSize                  int

select
    @Error                      = 0,
    @ExitCode                   = 0,
    @RowCount                   = 0,
    @PendingStatus              = 'Pending',
    @MinutesBeforeBreakLock     = 1,
    @BatchSize                  = 100

BEGIN TRY

    BEGIN TRANSACTION ProcessQueue 

        UPDATE TOP(@BatchSize) UploadQueue WITH (UPDLOCK, READPAST)
        SET
            LockedBy = @LockedBy,
            LockedTime = GETDATE()
        OUTPUT inserted.Id, inserted.LockedTime, inserted.CompletedTime, inserted.RequestType, inserted.RequestedTime, inserted.Status, inserted.LockedBy, inserted.Data
        WHERE
            STATUS = @PendingStatus
            AND (LockedTime IS NULL OR
            DateDiff(mi, LockedTime, GetDate()) >= @MinutesBeforeBreakLock)

    COMMIT TRANSACTION ProcessQueue

END TRY
BEGIN CATCH
    IF XACT_STATE() > 0
      ROLLBACK TRANSACTION ProcessQueue;
    ELSE IF XACT_STATE() < 0
      ROLLBACK TRANSACTION;
END CATCH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:42:59.940

SQLite[没有存储过程](http://sqlite.org/lang.html)（或任何其他控制语句）。在嵌入式数据库中，这没有多大意义，因为无论如何代码都会在同一个进程中执行。

您必须以您用来访问数据库的任何语言来实现您的过程。

至于队列，SQLites 也没有它们，因为没有单独的服务器可以与您的程序异步运行。只需直接执行各个 SQL 命令/查询。

# git - git reset 后如何恢复更改

> ID：13522231
> 
> 赞同：3
> 
> 时间：2012-11-23T01:49:51.737
> 
> 标签：git

> **可能重复：**
> [从 git reset --hard 中恢复？](https://stackoverflow.com/questions/5788037/recover-from-git-reset-hard)

我第一次使用`git add .`，但它添加了一些我不想包含在存储库中的文件。

所以我`git reset --hard HEAD`在提交更改之前跑了。有没有办法恢复这些变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:43:47.503

你没有。这就是为什么我总是建议使用

```
git stash -u 
```

获得相同的效果，但您可以撤消该操作。

# c++ - C++ 模板“类类型”错误

> ID：13522232
> 
> 赞同：6
> 
> 时间：2012-11-23T01:50:03.283
> 
> 标签：c++, class, templates, compiler-errors, linked-list

我一直在研究一个链表模板类，用各种变量做同样的事情，并设法解决了大部分问题。除了当我编译时，我得到这些：

```
g++ -Wall -o template_test template_test.cpp
In file included from template_test.cpp:1:0:
LinkedList.h:50:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:51:30: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:56:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:57:51: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:92:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:93:31: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:102:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:103:34: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:119:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:120:48: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:158:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:159:37: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:193:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:194:34: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
LinkedList.h:210:11: error: declaration of ‘class Type’
LinkedList.h:7:11: error:  shadows template parm ‘class Type’
LinkedList.h:211:34: error: invalid use of incomplete type ‘class LinkedList<Type>’
LinkedList.h:8:7: error: declaration of ‘class LinkedList<Type>’
make: *** [template_test] Error 1 
```

对于我拥有的每个模板函数，它几乎都说了同样的话。谁能帮我破译这些消息的含义，是什么导致编译器抛出这些消息，我该如何解决这个问题？我将重新阅读，同时可能重写我的代码。
我的代码如下：

```
#include <string>
#include <iostream>
using namespace std;

template <class Type>
class LinkedList{
public:

 * default constructor and a copy constructor that creates a copy
 * of the given object*/
LinkedList(); //default construtor
LinkedList(const LinkedList& lst); //copy constructor
~LinkedList();//destructor

void add(Type data);

void insertAt(int pos, Type data);

bool remove(Type data );

void removeAll();

void printList();

template <class Type>
LinkedList<Type>::LinkedList(){
head = NULL;
size = 0; //Don't forget to do this!!!
}

template <class Type>
LinkedList<Type>::LinkedList(const LinkedList& lst){
if (lst.head == NULL){
    head = NULL;
    size = 0;
}
else{
    head = new Node;
    head->data = lst.head->data;
    Node *pNewNode = head;
    Node *pOldNode = lst.head->next;
    while (pOldNode != NULL){
        pNewNode->next = new Node;
        pNewNode = pNewNode->next;
        pNewNode->data = pOldNode->data;;
        pOldNode = pOldNode->next;
    }
    pNewNode->next = NULL;
    size = lst.size;
}
}

template <class Type>
LinkedList<Type>::~LinkedList(){
    removeAll();
}

template <class Type>
void LinkedList<Type>::add(Type x){
Node *p = new Node; //temporary node
// Assign appropriate values to the new node
p -> data = x;
p -> next = head;
// Make the head point to the new node
head = p;   
size++;
}

template <class Type>
void LinkedList<Type>::insertAt(int pos, Type x){
Node *p;
Node *newNode;

// Check that pos is a valid index
if (pos <= size){
    newNode = new Node; //new node
    newNode->data = x;

    // Deal with case when item is to be inserted at the head of the list
    if (pos == 0){
        newNode->next = head;
        head = newNode;
    }// if(pos == 0)
    else{
        p = head;
        // Move to position BEFORE insertion point
        for(int i = 0; i < pos-1; i++){
            // Check that p points to a node
            // Note using exception handling should throw an exception         
            if(p == NULL){
                return;
            }
            p = p->next;
        }//for
        // Insert node
        newNode->next = p->next;
        p->next = newNode;
    }//else (pos != 0)
    size++;
}//else (pos >= size) do nothing
}

template <class Type>
bool LinkedList<Type>::remove(Type x){
Node *p = head;
Node *temp;
if (head == NULL){
    return false;
}
else if (head->data == x){
    head = head->next;
    delete p; //currently assigned head
    size--;
    return true;
}
else{
    while(p->next != NULL){
        // Check next node for target
        if(p->next->data == x){
            temp = p->next;
            p->next = p->next->next;
            delete temp;
            return true;
        }
        p = p->next;
    }
}
return false;
}

template <class Type>
void LinkedList<Type>::removeAll(){
Node *p = head;
// Traverse the list deleting nodes
while (p!= NULL){
    head = head->next; // Mustn't "lose" the next node
    delete p; // De-allocate memory
    p = head; // Go to next node
}
head = NULL;
size = 0;
}

template <class Type>
void LinkedList<Type>::printList(){
Node *p = head;
cout << "["; //Nice format!
// Traverse the list
while (p != NULL){
    cout << p -> data; // Print data
    p = p -> next; // Go to next node
    if (p != NULL){
        cout << ","; // Print a comma unless at the end of the list
    }
}
cout << "]"; // Don't print a newline - it might not be wanted
}

private:
struct Node {
    Type data; //list data
    Node *next; //pointer to next item in the list
};

Node *head; //Pointer to the first node in the list
int size; //Records the number of nodes in the list
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T01:53:49.813

*您正在使用该语法在类内*定义类范围之外的成员函数。这行不通。

这应该这样做：

```
template<typename X>
class Foo {
public:
  void f();
}; // notice end of class scope here

template<typename X>
void Foo<X>::f() {
  // impl
} 
```

# c# - 文件正被另一个进程使用 FileSystemWatcher 和 Task

> ID：13522237
> 
> 赞同：6
> 
> 时间：2012-11-23T01:50:44.157
> 
> 标签：c#, multithreading, task, filesystemwatcher

我创建了一个应用程序，它将仅监视某个文件夹中新创建的文件并将其列出在列表框中，现在我想做的是每次它会检测到应用程序将读取它并在列表框中显示文本的文件，我几乎得到了，因为有时当它检测到 2 或 3,4,5,6 等文件时有时可以，但有时它也会提示错误“进程无法访问文件'C:\Users\PHWS13\Desktop\7.request.xml ' 因为它正被另一个进程使用。”。

如何解决这个问题？这是我的代码：

```
private void fileSystemWatcher1_Created(object sender, System.IO.FileSystemEventArgs e)
    {
        if (!listBox1.Items.Contains(e.FullPath))
        {
            //add path
            listBox1.Items.Add(e.FullPath + "" + DateTime.Now.ToString());
            //get the path
            path = e.FullPath;
            //start task
            startTask();
        }
    }

    private void startTask()
    {
        //start task
        Task t = Task.Factory.StartNew(runThis);
    }

    private void runThis()
    {
        //get the path
        string get_the_path = path;

        XDocument doc = XDocument.Load(get_the_path);
        var transac = from r in doc.Descendants("Transaction")
                      select new {
                          InvoiceNumber = r.Element("InvoiceNumber").Value,
                      };
        listBox2.Invoke((MethodInvoker)delegate() { 
            foreach(var r in transac){
                listBox2.Items.Add(r.ToString());
            }
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T02:47:35.507

Try using [`XDocument.Load(Stream)`](http://msdn.microsoft.com/en-us/library/cc838349.aspx) with read-only options:

```
using (var stream = File.Open(filePath, FileMode.Open, FileAccess.Read)) 
{
    var doc = XDocument.Load(stream);

    // ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T02:03:58.737

You're sharing the path variable on all the tasks without locking. This means all your tasks could be trying to access the same file at the same time. You should be passing the path as a variable to startTask():

```
private void fileSystemWatcher1_Created(object sender, System.IO.FileSystemEventArgs e)
{
    if (!listBox1.Items.Contains(e.FullPath))
    {
        //add path
        listBox1.Items.Add(e.FullPath + "" + DateTime.Now.ToString());

        //start task
        startTask(e.FullPath);
    }
}

private void startTask(string path)
{
    //start task
    Task t = Task.Factory.StartNew(() => runThis(path));
}

private void runThis(string path){} 
```

EDIT: This thread: [Is there a way to check if a file is in use?](https://stackoverflow.com/questions/876473/is-there-a-way-to-check-if-a-file-is-in-use) has a simple and ugly check for file access you could try that to test the file, if it fails then skip the file or wait and try again.

# mongodb - 解释 Mongostat 和 Mongotop 输出

> ID：13522241
> 
> 赞同：5
> 
> 时间：2012-11-23T01:51:35.140
> 
> 标签：mongodb, profiling

我正在使用`mongostat`and对 mongodb 进行一些分析`mongotop`

我运行 mongotop：

```
$> mongotop 30 
```

和 mongostat 简单地说：

```
$> mongostat 
```

输出是：

蒙戈托普：

```
 ns       total        read       write      2012-11-23T01:32:37
           sapi.Socket      1222ms      1222ms         0ms
       sapi.ChargeSpot       999ms       999ms         0ms 
```

蒙古国：

```
insert  query update delete getmore command flushes mapped  vsize    res faults          locked db idx miss %     qr|qw   ar|aw  netIn netOut  conn     set repl       time 
     0   5351      0      0       0       1       0   608m  3.67g    64m      0          sapi:0.0%          0       0|0     1|0   569k     1m    63 capi-rs  PRI   12:32:41 
     0   4189      0      0       0       1       0   608m  3.67g    64m      0 knightsbridge:0.0%          0       0|0     0|0   499k   308k    63 capi-rs  PRI   12:32:42 
```

问题：

*   对于 mongotop 输出，由于我运行它以每隔 30 秒报告一次，例如 sapi.Socket 总共 1222ms 的读取是否意味着：

    在 30 秒的时间间隔内，1222ms 用于从集合 sapi.Socket 执行读取查询

    这意味着在 30 秒内，mongo 只忙了 2,221 毫秒（1,222 毫秒 + 999 毫秒）处理读取查询，换句话说，mongo 在另外 27 秒内处于空闲状态？

*   对于 mongostat 输出，看起来 mongo 每秒处理大约 5K 查询，这是推动 mongo 一点还是 mongo 有更多的能力？查询是基本的（按索引键查找）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-14T13:05:10.083

根据您的特定服务器的配置和集群架构，每秒所有操作指标将是一个相对指标。但是，您不会使用 5k 查询来推动 Mongo。

使用的免费工具是 DB profiler。在这种情况下，分析器会将所有操作捕获到名为 system.profile 的系统集合中。然后，您可以对单个查询及其执行方式获得更多见解。

//仅针对名为 dfl 的数据库和名为 test 的集合的查询操作的诊断示例，而不是插入或删除或命令。

db.system.profile.find({op: {$eq: 'query'}, ns: 'dfl.test'})

//检查你的分析器状态 db.getProfilingStatus()

//将分析器设置为所有操作 db.setProfilingLevel(2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T11:30:33.987

对于性能调优，我们已经看到和`explain`选项。但是，如果我们想查看程序内部的高层并找出它花费时间的地方，我们该怎么做呢？我们以command命名。要查看 shell 上的日志，请使用命令- 其中是打印下一个日志条目之前的秒数。`hint``profile``Mongotop``Unix``top``mongotop seconds``seconds`

例如：`mongotop 3`

# mongodb - 在 ngnix 上的 try_files 中执行命令

> ID：13522242
> 
> 赞同：0
> 
> 时间：2012-11-23T01:51:57.267
> 
> 标签：mongodb, caching, nginx, image

在 nginx 中使用 try_files 时是否可以执行命令？

这是因为我在 mongoDB 中记录了所有请求。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:28:23.313

你可以让 try_files 访问一个命名位置，在命名位置你可以做任何你想做的事情（fcgi/uwsgi/reverse proxy）...

基本配置如下所示：

```
location / { try_files $uri $uri/ @named; }

location @named {
  # fcgi/uwsgi/revorse proxy, add necessary directives for what you want to do
} 
```

但是请注意，如果前面的 try_files 部分不匹配，您只能到达指定位置（在上面的示例中，如果没有与请求路径匹配的文件或目录）

# c# - 如何检查 TCP 连接是否因为 Windows 防火墙而被拒绝？

> ID：13522243
> 
> 赞同：0
> 
> 时间：2012-11-23T01:52:00.477
> 
> 标签：c#

在 Windows 上运行的 C# 程序中，我尝试在局域网上建立传出 tcp 连接。显然，由于多种原因，连接可能会被拒绝，但是有没有办法知道特定连接拒绝是否是因为运行该程序的主机窗口计算机上的防火墙？

PS：寻找编程解决方案

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-11-23T01:56:22.210

您可以按照这些说明在 Windows 防火墙上启用日志记录

1.  打开 Windows 防火墙，然后单击高级选项卡。
2.  在安全日志中，单击设置。
3.  在“日志设置”对话框中，单击“另存为”。
4.  选择要记录的项目。
5.  执行一些活动并查看日志更新。

这适用于 windows xp - [http://support.microsoft.com/kb/875357](http://support.microsoft.com/kb/875357)。

# templates - 推荐可扩展的 AngularJS 项目结构？

> ID：13522246
> 
> 赞同：46
> 
> 时间：2012-11-23T01:52:22.297
> 
> 标签：templates, architecture, project, angularjs

我看过几个AngularJS的项目模板：官网的[seed项目](https://github.com/angular/angular-seed)，[Yeoman](http://yeoman.io/)的生成，[AngularFun](https://github.com/CaryLandholt/AngularFun)。

是否有任何其他（无）意见的模板我应该看看，或者你会为可扩展的 AngularJS 项目建议任何相关的模式？

我的意思是可扩展的

*   能够在自己的文件中拆分控制器、指令、过滤器等；
*   能够按需加载这些文件，而不是让浏览器加载所有内容；
*   能够拥有通用的跨项目组件（例如通用指令、过滤器或服务）。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-23T08:32:56.490

您可以查看 Pawel Kozlowski 和我正在组合的演示应用程序： [https](https://github.com/angular-app/angular-app) ://github.com/angular-app/angular-app 。

它不支持按需加载文件，但您可以看到我们将模块拆分为单独的文件并将测试设置为第一类组件。我们有一个构建过程（使用 Grunt）连接（并在发布时缩小）js 文件，并且可以运行单元和端到端测试。

我们选择将我们的模块分成两组功能应用领域和通用横切库代码，而不是简单地拆分成指令、过滤器、服务等。在功能区域中，我们可能有一些服务、指令、控制器和模板。

这使得针对功能区域的开发更容易，因为所有相关项目都在一个地方。

该项目依赖于一个简单的 nodeJS 服务器来传递文件（支持 HTML5 模式深度链接）并提供身份验证和授权服务。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T19:34:12.463

我想说的是，您的所有观点都可以轻松实现，至少无需对 Angular 进行任何修改。

> *   能够在自己的文件中拆分控制器、指令、过滤器等；

这当然可以使用基本的 Angular 来完成，因为您可以根据需要在控制器/服务中包含任意数量的脚本标签。当然它根本不可扩展，所以最好的选择是使用 AMD 模块，比如 RequireJS。这是具有这种配置的种子之一：[https ://github.com/elsom25/angular-requirejs-html5boilerplate-seed](https://github.com/elsom25/angular-requirejs-html5boilerplate-seed)

> *   能够按需加载这些文件，而不是让浏览器加载所有内容；

正如*pkozlowski*在评论中建议的那样，已经有一些关于问题的描述的条目，你会看到我也在努力解决这个问题，并且实际上有一些结果。我有一个使用 RequireJS和路由配置的*解析参数*[按需加载控制器、模板和指令的工作示例。](https://github.com/matys84pl/angularjs-requirejs-lazy-controllers/blob/master/app/js/utils/lazy-directives.js)

 *> *   能够拥有通用的跨项目组件（例如通用指令、过滤器或服务）

解决了前面的问题后，可以使用 RequireJs 模块轻松实现。

* * *

我一直在想，启动一个 agularjs-lazy-seed 项目是否是个好主意？有这方面的需求吗？我们甚至可以更进一步，将路由配置移到常规配置之外，假设您有一个 views.json 文件（理想情况下是一个使用 json 响应的服务），其中包含您想要包含在应用程序中的视图：

```
{
    "views" : {
        ....
        "account" : {             
             "path" : "/account" // route path
             "name" : "Account", // view name
             "partial" : "views/account/account.html", // partial file
             "controller" : "account/main" // RequireJS module
             "directives" : [ "directives/version", "directives/menu" ] // directives used in the view
        }
        ....
    }
} 
```

这样你可以：

*   分离开发视图并基于此 json bootstrap 构建应用程序
*   有一些共同的指令和组件
*   登录后引导时，您可以过滤允许用户查看的视图
*   ngView 中的所有内容都将按需加载

当然，您的应用程序应该非常大，以便完成所有这些额外的工作；）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-26T06:31:26.213

你应该试试 ng-boilerplate。大型 AngularJS 项目最有前途的 kickstart 模板：http: [//joshdmiller.github.io/ng-boilerplate/#/home](http://joshdmiller.github.io/ng-boilerplate/#/home)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-13T12:19:58.820

我同意其他人到目前为止所说的观点；它很容易将事物拆分成单独的模块，并让模块通过常规的 AngularJS 东西相互依赖。然后您的 JS 代码可以拆分为您喜欢的任何文件和目录树。

只是想我会提到我们在基于 AngularJS的开源[hawtio项目中所做的事情。](http://hawt.io/)我们已经将模块化发挥到了极致：) hawtio 使用[插件](http://hawt.io/developers/plugins.html)，这些插件可以在运行时在运行的服务器中发现（例如，在运行时部署和取消部署 UI 函数）。因此，基于一些 REST 查询或 JMX 检测，我们可以动态地删除插件。

例如，这是我们[当前所有的默认插件](https://github.com/hawtio/hawtio/tree/master/hawtio-web/src/main/webapp/app/)

在布局方面，每个插件都有自己的代码（js）、html 部分（html）和其他任何目录（例如 css / img 目录），这使得保持良好和模块化变得容易。例如这里是[camel 插件](https://github.com/hawtio/hawtio/tree/master/hawtio-web/src/main/webapp/app/camel)，它有自己的html、js 和img 文件夹。

然后一个特定的插件定义了它自己的 AngularJS 模块、指令、过滤器，然后它们可以依赖于其他模块。

到目前为止，我们还没有为源文件提出非常有用的[命名约定:)。](https://github.com/hawtio/hawtio/blob/master/doc/CodingConventions.md)我们发现为每个控制器编写一个文件似乎最简单；但除了 fooPlugin.ts 文件和 helpers.ts 文件（用于通用模块特定的辅助函数）之外，到目前为止，我们还没有找到任何其他有意义的命名约定。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-09T11:54:58.520

这个项目听起来很有希望[http://vesparny.github.io/ng-kickstart](http://vesparny.github.io/ng-kickstart)

它使您能够按功能拆分代码库并保持代码可重用，以及通过自定义 Grunt 任务进行实时重载。

该项目也是面向单元测试的，并带有一个自定义的“dist 任务”，可让您创建优化的、生产就绪的版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-11T15:19:37.203

警告：无耻的插头。

您绝对应该检查[generator-angular-xl](http://kennethlynne.github.io/generator-angular-xl/)。

它旨在通过对代码进行逻辑分组、构建单元测试以及自动将 js 和 css 文件注入 index.html 等来创建大型 AngularJS 应用程序。它还通过为您的数据创建模拟后端来帮助您，有效地使其开发原型时的一个不错的选择，它也可以成为成熟的应用程序。它不会生成任何后端代码，因此您可以自由选择所需的任何后端技术。*

# heroku - 无法在 Heroku 上添加 Loggly 插件

> ID：13522252
> 
> 赞同：2
> 
> 时间：2012-11-23T01:53:52.737
> 
> 标签：heroku, loggly

我正在尝试安装 Loggly 插件，但它失败并出现一个奇怪的错误：

```
heroku addons:add loggly:mole
Adding loggly:mole on payments-pixieengine-com... failed
 !    Failed to update iptables on proxy. 
```

如何在 Heroku 上安装 Loggly 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:23:14.703

我会联系 Heroku 支持 - 这不是你做错了什么。

# android - Android 命令行测试

> ID：13522255
> 
> 赞同：1
> 
> 时间：2012-11-23T01:54:24.707
> 
> 标签：android, unit-testing

我正在尝试设置 android 测试框架。

我有一个项目`~/boldapp/BOLDApp/`

我决定我应该在[http://developer.android.com/tools/testing/testing_android.html#TestProjects](http://developer.android.com/tools/testing/testing_android.html#TestProjects)`~/boldapp/BOLDApp/tests`中描述的测试项目

我按照[http://developer.android.com/tools/testing/testing_otheride.html](http://developer.android.com/tools/testing/testing_otheride.html)做了以下事情：

我跑`android create test-project -m ../ -n BOLDAppTest -p tests`

我现在想运行生成的 Instrumentation 测试用例`MainActivityTest.java`。

当我`ant run-tests`按照建议运行时，我得到：

```
BUILD FAILED
Target "run-tests" does not exist in the project "BOLDAppTest". 
```

当我或者运行`ant test`部分输出时：

```
test:
     [echo] Running tests ...
     [exec] INSTRUMENTATION_STATUS: id=ActivityManagerService
     [exec] INSTRUMENTATION_STATUS: Error=Unable to find instrumentation info for: ComponentInfo{au.edu.unimelb.boldapp.tests/android.test.InstrumentationTestRunner}
     [exec] INSTRUMENTATION_STATUS_CODE: -1
     [exec] android.util.AndroidException: INSTRUMENTATION_FAILED: 
```

运行时出现与上述相同的错误`adb shell am instrument -w au.edu.unimelb.boldapp.tests/android.test.InstrumentationTestRunner`：

以及当我跑步时：

`adb shell am instrument -w au.edu.unimelb.boldapp/android.test.InstrumentationTestRunner`

如何运行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:32:04.920

您必须。尚未在您的设备中成功安装测试 apk。您可以通过执行 adb shell "pm list instrumentation" 来检查。

# activemq - 将消息放入队列后如何在骆驼路线上发送即时响应

> ID：13522257
> 
> 赞同：4
> 
> 时间：2012-11-23T01:54:34.400
> 
> 标签：activemq, apache-camel

我正在尝试实现一个非常简单的骆驼路由，即从 CXF 端点接收请求并将其放入队列中以供以后异步处理。将消息放入队列后，我需要能够向调用者发送响应，指示已收到该消息。我已经完成了教程，但似乎无法正常工作。发生的情况是，一旦将消息放入队列，在消息从队列处理到其预期目的地之前，不会向调用者发送响应。

下面的代码

```
 from (SOAP_ENDPOINT)
        .to(SEDA_RECEIVED)
        .transform(constant(OK))//I expect this transform to return OK to caller
        .log("OK response sent back to caller");

    from (SEDA_RECEIVED)
        .to(BEAN_CONVERT_REQUEST)
        .to("activemq:queue:events");

    from ("activemq:queue:events")
            .to(BEAN_STORE_TO_DB); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:31:22.790

而不是 to(SEDA_RECEIVED) 你可以试试 inOnly(SEDA_RECEIVED)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T08:07:12.233

是的，它的事件消息 eip [http://camel.apache.org/event-message.html](http://camel.apache.org/event-message.html)

有点相关的是窃听器 eip [http://camel.apache.org/wire-tap.html](http://camel.apache.org/wire-tap.html)

# linux - 可以在 Linux 上运行 Azure

> ID：13522258
> 
> 赞同：1
> 
> 时间：2012-11-23T01:54:40.167
> 
> 标签：linux, azure, sdk

是否可以在 Linux 上运行 Azure SDK？

我想开发我想在 windows auzre 上部署的 java 应用程序，但我现在正在使用 linux ubuntu。

对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:08:21.630

[在此处查看](http://www.windowsazure.com/en-us/manage/linux/other-resources/command-line-tools/)适用于 Mac 和 Linux 的 Windows Azure 命令行工具。这将让您创建/部署/管理您的虚拟机、网络端点、数据磁盘、云服务（网络/工作人员角色）、证书、网站，也许还有一些我忘记的东西。

在 Ubuntu 虚拟机中运行 Java 应用程序应该没有问题，Ubuntu 是虚拟机库中可用的操作系统映像之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:08:27.077

[您可以按照此处](https://www.windowsazure.com/en-us/develop/java/)描述的步骤，从您的 Linux 机器开发您的 Java 应用程序并将其部署在 Windows Azure 上。

如果需要操作基础设施，可以下载 Azure 命令行工具。如果您觉得更舒服，您还可以使用 VM 功能（技术预览版）并在 Azure 上运行您的 Ubuntu 服务器。

无论是从基础结构还是从平台操作，您都可以在 Azure 上部署您的方案。甚至特定的位也可以作为工人角色运行。我鼓励您查看我提到的 Azure 的 Java 开发中心。

# python - Python中字符串的排序与自定义哈希函数的性能比较

> ID：13522262
> 
> 赞同：1
> 
> 时间：2012-11-23T01:54:54.343
> 
> 标签：python, hash-function

我正在比较不同长度字符串的排序与自定义哈希函数的性能，结果有点令人惊讶。我预计以下代码中的函数 prime_hash（尤其是 prime_hash2）的性能优于 sort_hash，尽管情况正好相反。谁能解释性能差异？任何人都可以提供替代哈希吗？[该函数应为包含相同字母分布的字符串生成相同的值，并为所有其他字符串生成不同的值]。

这是我得到的结果：

```
For strings of max length: 10
sort_hash: Time in seconds: 3.62555098534
prime_hash: Time in seconds: 5.5846118927
prime_hash2: Time in seconds: 4.14513611794
For strings of max length: 20
sort_hash: Time in seconds: 4.51260590553
prime_hash: Time in seconds: 8.87842392921
prime_hash2: Time in seconds: 5.74179887772
For strings of max length: 30
sort_hash: Time in seconds: 5.41446709633
prime_hash: Time in seconds: 11.4799649715
prime_hash2: Time in seconds: 7.58586287498
For strings of max length: 40
sort_hash: Time in seconds: 6.42467713356
prime_hash: Time in seconds: 14.397785902
prime_hash2: Time in seconds: 9.58741497993
For strings of max length: 50
sort_hash: Time in seconds: 7.25647807121
prime_hash: Time in seconds: 17.0482890606
prime_hash2: Time in seconds: 11.3653149605 
```

这是代码：

```
#!/usr/bin/env python

from time import time
import random
import string
from itertools import groupby

def prime(i, primes):
   for prime in primes:
      if not (i == prime or i % prime):
         return False
   primes.add(i)
   return i

def historic(n):
   primes = set([2])
   i, p = 2, 0
   while True:
      if prime(i, primes):
         p += 1
         if p == n:
            return primes
      i += 1

primes = list(historic(26))

def generate_strings(num, max_len):
   gen_string = lambda i: ''.join(random.choice(string.lowercase) for x in xrange(i))
   return [gen_string(random.randrange(3, max_len)) for i in xrange(num)]

def sort_hash(s):
   return ''.join(sorted(s))

def prime_hash(s):
   return reduce(lambda x, y: x * y, [primes[ord(c) - ord('a')] for c in s])

def prime_hash2(s):
   res = 1
   for c in s:
      res = res * primes[ord(c) - ord('a')]
   return res

def dotime(func, inputs):
   start = time()
   groupby(sorted([func(s) for s in inputs]))
   print '%s: Time in seconds: %s' % (func.__name__, str(time() - start))

def dotimes(inputs):
   print 'For strings of max length: %s' % max([len(s) for s in inputs])
   dotime(sort_hash, inputs)
   dotime(prime_hash, inputs)
   dotime(prime_hash2, inputs)

if __name__ == '__main__':
   dotimes(generate_strings(1000000, 11))
   dotimes(generate_strings(1000000, 21))
   dotimes(generate_strings(1000000, 31))
   dotimes(generate_strings(1000000, 41))
   dotimes(generate_strings(1000000, 51)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:08:12.737

我想你在问为什么 sort_hash （即 O(n*log n) ）比其他 O(n) 函数更快。

原因是你`n`的太小`log(n)`而没有意义。

Python`sort()`是用 C 编写的。如果你用 C 编写算术函数，你会看到`n*log(n)`更小的值`n`

旁白：当你有很多重复的项目时， timsort 会比`n*log(n)`. 由于只有 256 个字符，您可能会发现 timsort 在字符串长到足以看到算术版本获得优势之前很久就接近 O(n)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:03:24.377

根据 BoppreH 的输入，我能够得到一个基于算术的哈希版本，它甚至优于 C 实现的基于“排序”的版本：

```
primes = list(historic(26))
primes = {c : primes[ord(c) - ord('a')] for c in string.lowercase}

def prime_hash2(s):
   res = 1
   for c in s:
      res = res * primes[c]
   return res 
```

# javascript - 是否可以在 Safari 中打开由 window.webkitURL.createObjectURL 生成的 url？

> ID：13522264
> 
> 赞同：3
> 
> 时间：2012-11-23T01:55:35.093
> 
> 标签：javascript, html, web-applications, safari

我正在尝试在 Safari 中打开一个 Blob，但是当我单击该链接时，它会将我带到显示无法打开以“blob:”开头的 url 的页面。以下代码适用于 FireFox，但我希望它也适用于 Safari。

```
function showBinary(rBody, rTitle)
{
  var blob = dataURItoBlob(rBody);
  var urlCreator = window.URL || window.webkitURL;
  var objURL = urlCreator.createObjectURL(blob);
  var anchor = ['<a href="', objURL, '">', rTitle, '</a>']
  anchor = anchor.join('');
  document.write(anchor);
} 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T23:15:34.037

Safari 现在不会打开 blob: URL，但根据数据类型，您可以尝试使用 data: URL，例如：

```
var dataURL = "data:image/png,"+encodeURIComponent( window.btoa(rBody) );
var anchor = ['<a href="', dataURL, '">', rTitle, '</a>']; 
```

# java - 想要在 Timer 生成事件时额外绘制线条（添加源！！）

> ID：13522265
> 
> 赞同：0
> 
> 时间：2012-11-23T01:55:37.177
> 
> 标签：java, swing

> **可能重复：**
> [希望在 Timer 生成事件时额外绘制线条](https://stackoverflow.com/questions/13522031/want-to-drawline-additionally-when-timer-generates-events)

```
public class test4 extends JFrame implements ActionListener {
static test4 test = new test4();
Vector vec = new Vector();

Timer t = new Timer(1000, this);
int timerCount = 4;
int lineCount=1;

public static void main(String[] args) {
    test.t.start(); // START THE TIMER - MAKE EVENTS EVERY 1SECONDS

    test.setSize(400,400);
    test.setVisible(true);
}

public void actionPerformed(ActionEvent e){

    int[] nums = new int[4];
    nums[0] = 0;            //X1
    nums[2] = 400;          //X2        MAKE LINE HORIZONTALLY 

    nums[3] = nums[1] = 5+test.lineCount*5;// Y1,Y2     MAKE LINE HORIZONTALLY GO DOWN
    vec.add(nums);

    timerCount--;

    //FOR TEST, LIMITED COUNTS TO 5 TIMES
    if(test.timerCount<=0)
        test.t.stop();

    test.repaint();

}

public void paint(Graphics g){
    g.setColor(Color.blue);

    for(int i = 0 ; i < vec.size() ; i++)
    {
        int[] pos = (int[])vec.get(i);
        g.drawLine(pos[0], pos[1], pos[2], pos[3]);
    }

}
} 
```

在测试中，我检查了 drawLine 的计时器和位置。这些进展顺利

但是在 JFrame 窗口中运行此代码时我看不到任何行.. :(

我应该更正代码吗？

# objective-c - 如何告诉 searchDisplayController 我们完成了

> ID：13522266
> 
> 赞同：0
> 
> 时间：2012-11-23T01:56:11.370
> 
> 标签：objective-c, xcode4.5

说我有一个`searchDisplayController`. 当我点击 时`searchbar`，会发生 3 件事

1.  `Keyboard`出现
2.  取消按钮出现
3.  出现黑色透明层。这有时会被一些表代替。

如果我这样做`[searchBar resignFirstResponder]`是`keyboard`隐藏的。好的。但是，黑色透明层和取消按钮仍然存在。

就好像`searchdisplaycontroller`仍然认为我仍在使用它`searchbar`。如何告诉我完成了？

点击那个黑色透明层会告诉`searchDisplayController`我们已经完成了。如何达到同样的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:04:21.047

尝试调用：

```
[searchDisplayController setActive:NO animated:YES]; 
```

# performance - mongoimport 性能随着时间的推移而下降

> ID：13522268
> 
> 赞同：1
> 
> 时间：2012-11-23T01:56:22.850
> 
> 标签：performance, mongodb, mongoimport

我正在使用`mongoimport`将一些`json`文件导入到我的 MongoDB 数据库中。我有 5 个文件，每个文件大约有 2M 个文档，并且该集合有 4 个常规索引和 2 个多键索引。

当我开始导入第一个文件时，我看到每秒插入约 500 个文档，但一段时间后性能开始下降。我现在正在导入第三个文件，我看到每秒不到 50 个文档的吞吐量。似乎随着集合大小的增加，导入会降低。这是怎么回事？我该如何改进呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:22:05.777

虽然在这种情况下可能不是原因，但索引在写入时确实会产生一些开销，因为您既要插入索引，又要插入集合。如果您更新文档导致其变得大于分配的大小，则会对性能造成额外影响。在这些情况下，包含此文档的所有索引都需要更新。

集合上有 6 个索引，每个插入的文档都有 6 个索引要更新。这将对有效速度产生一定的影响`mongoimport`

您可以通过导入未索引的集合并在事后创建索引来测试这一点。

您可以[在此处](http://docs.mongodb.org/manual/faq/indexes/#how-do-write-operations-affect-indexes)查看有关索引写入影响的更多信息。

# c# - UIActionSheet 在显示时不会响应触摸

> ID：13522269
> 
> 赞同：1
> 
> 时间：2012-11-23T01:57:18.960
> 
> 标签：c#, iphone, ios, ipad, xamarin.ios

我正在用 MonoTouch 编写一个移动应用程序。我的一个 ViewControllers 是一个设置页面，它允许用户设置一些他们可以在他们的地图视图上自定义的东西。其中之一是引脚颜色。我有 12 种颜色的图钉并决定使用 UIPickerView 来呈现选择。客户希望用户在找到所需颜色时必须点击“完成”按钮。为此，我创建了一个 UIToolBar 并在其上放置了一个取消和完成按钮。工具栏直接显示在 UIPickerView 上方。我将 PickerView 和 Toolbar 放在 UIActionSheet 上，并在用户点击 PinColor 文本字段时显示 ActionSheet。

到目前为止，所有这些都有效。当用户单击 pin 颜色文本字段时，将出现操作表，并且选择器视图和工具栏可见，并且它们应该在哪里。问题是，我无法与任何一个按钮或选择器视图进行交互。就像在操作表前面有一个视图控制器，但我看不到我正在做的任何地方。有人可以看看下面的代码，如果你看到了什么，请告诉我？这只是我的视图控制器代码的一部分，因此可能缺少某些内容。但是，我的代码是完整的并且可以正常编译。

```
public override void ViewDidLoad ()
{
    base.ViewDidLoad ();
    tmpRect = new RectangleF(0,-220,this.View.Bounds.Width,220);
    myActionSheet = new UIActionSheet(tmpRect);
    myActionSheet.Style = UIActionSheetStyle.Default;
    myActionSheet.DestructiveButtonIndex = 0;
    myActionSheet.DismissWithClickedButtonIndex(0,true);
    settingsScrollView.AddSubview(myActionSheet);

    tmpRect = new RectangleF(0,-220,this.View.Bounds.Width,40);
    myToolbar = new UIToolbar(tmpRect);
    myToolbar.BarStyle = UIBarStyle.Black;
    myToolbar.Translucent = true;
    myToolbar.UserInteractionEnabled = true;
    myToolbar.SizeToFit();

    UIBarButtonItem btnLeft = new UIBarButtonItem(UIBarButtonSystemItem.Cancel, PickerButtonCancelHandler);
    UIBarButtonItem btnFlexibleSpace = new UIBarButtonItem(UIBarButtonSystemItem.FlexibleSpace, null);
    UIBarButtonItem btnDone = new UIBarButtonItem(UIBarButtonSystemItem.Done, PickerButtonDoneHandler);
    UIBarButtonItem[] items = new UIBarButtonItem[] { btnLeft, btnFlexibleSpace, btnDone }; 
    myToolbar.SetItems(items, true);
    myActionSheet.AddSubview(myToolbar);

    tmpRect = new RectangleF(0,-176, this.View.Bounds.Width,200);
    pvPinColor = new UIPickerView(tmpRect);
    MyPicker _pinPicker = new MyPicker();
    _pinPicker.Items.Add("Azure");
    _pinPicker.Items.Add("Black");
    _pinPicker.Items.Add("Blue");
    _pinPicker.Items.Add("Chartreuse");
    _pinPicker.Items.Add("Green");
    _pinPicker.Items.Add("Grey");
    _pinPicker.Items.Add("Orange");
    _pinPicker.Items.Add("Pink");
    _pinPicker.Items.Add("Red");
    _pinPicker.Items.Add("Violet");
    _pinPicker.Items.Add("White");
    _pinPicker.Items.Add("Yellow");
    pvPinColor.Source = _pinPicker;
    pvPinColor.UserInteractionEnabled = true;
    pvPinColor.ShowSelectionIndicator = true;
    myActionSheet.AddSubview(pvPinColor);
    settingsScrollView.AddSubview(txtPinColor);

    txtPinColor.EditingDidBegin += delegate {
        txtPinColor.ResignFirstResponder();
        txtPinColor.InputView = pvPinColor;
        myActionSheet.ShowInView(settingsScrollView);
        myActionSheet.UserInteractionEnabled = true;
        myActionSheet.BecomeFirstResponder();
        settingsScrollView.BringSubviewToFront(myActionSheet);

        _pinPicker.ValueChanged += (sender, e) => {
            if (File.Exists (pinFilePath)) { File.Delete(pinFilePath); }
            File.WriteAllText(pinFilePath, _pinPicker.SelectedItem);
            txtPinColor.Text = _pinPicker.SelectedItem;
            //pvPinColor.Hidden = true;
        };
    };
       }

public class MyPicker : UIPickerViewModel
{
public event EventHandler<EventArgs> ValueChanged;

public List<string> Items
{
    get { return this._items;} 
    set { this._items = value;}
}
List<string> _items = new List<string>();

public string SelectedItem
{
    get { return this._items[this._selectedIndex]; }
}
protected int _selectedIndex = 0;

public MyPicker()
{   
}

public override int GetRowsInComponent (UIPickerView picker, int component)
{
    return this._items.Count;
}

public override string GetTitle (UIPickerView picker, int row, int component)
{
    return this._items[row];
}

public override int GetComponentCount (UIPickerView picker)
{
    return 1;
}

public override void Selected (UIPickerView picker, int row, int component)
{
    this._selectedIndex = row;
      if (this.ValueChanged != null)
      {
        this.ValueChanged (this, new EventArgs());
   }
}
} 
```

# php - 当进程意外死亡时，flock'ed 文件会被解锁吗？

> ID：13522273
> 
> 赞同：22
> 
> 时间：2012-11-23T01:58:11.950
> 
> 标签：php, centos

按照this [answer](https://stackoverflow.com/a/1780878/88597)限制仅运行一个php脚本的一个实例：

```
<?php

  $fp = fopen("/tmp/one.txt", "r+");
  if (flock($fp, LOCK_EX)) {
    //
    do_something_lengthy();
    //
    flock($fp, LOCK_UN);
  } else {
    echo "Couldn't get the lock!";
  }

  fclose($fp);

?> 
```

我的问题是，`flock`如果进程在中间死掉`do_something_lengthy()`，即在调用之前，'ed one.txt 文件会被解锁`flock($fp, LOCK_UN)`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T02:17:34.650

根据[`flock()`](http://linux.die.net/man/2/flock)PHP 内部使用`flock()`的手册页，`LOCK_UN`当使用`fclose()`.

在脚本终止时，PHP 或操作系统将关闭打开的文件描述符，从而释放您可能拥有的锁。

由于上述行为，[本次提交](https://github.com/php/php-src/commit/42d05a5c020929db37856d2076b5e1a3b51a62d5)（5.3）和[本](https://github.com/php/php-src/commit/5ef0a901841a18e82f30078403fa332776071c6c)次提交（ 5.2）不再在 PHP 本身中进行解锁。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-30T11:39:07.373

我做了这个小脚本来测试它

```
header('Content-type:text/plain; charset=utf-8');

$dir = dirname(__FILE__);
$file = $dir.'/testflock.lock';
$fh = fopen($file, 'w+');

$unlocked = flock($fh, LOCK_EX | LOCK_NB);
echo 'Locked: '.$file.' ';var_dump(!$unlocked);echo PHP_EOL;
if($unlocked){
    sleep(10);
    throw new Exception();
} 
```

对我来说，如果脚本没有抛出任何异常，操作系统在脚本完成执行后大约需要 2-5 秒才能解锁文件，而在脚本由于抛出异常而停止后最多需要 2-5 秒。

请记住，从 php 5.3.2 开始，`fclose($fh)`将不会解锁文件，并且文件将保持锁定状态，除非您使用 php 将其解锁，否则您将不得不等待操作系统解锁它，如果有一些错误，这可能永远不会发生（这发生在我身上）

要解锁文件：

```
flock($fh,LOCK_UN); 
```

关闭文件句柄（脚本执行完毕后会自动调用）

```
fclose($fh); 
```

在没有 的情况下锁定文件`LOCK_NB`将导致脚本等待文件解锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T02:02:19.943

当脚本完成时，锁会自动释放。但是，您应该手动释放它，而不是依赖于自动失败的发生。最好捕获任何异常，处理它并释放锁。请参阅官方文档 - [http://php.net/manual/en/function.flock.php](http://php.net/manual/en/function.flock.php)

# java - AsyncTask 错误——可能是乱序？

> ID：13522278
> 
> 赞同：0
> 
> 时间：2012-11-23T01:59:05.157
> 
> 标签：java, android, json, android-asynctask

我对 AsyncTasks 的经验接近 0，所以请记住这一点！

我正在尝试通过 Web 服务访问外部数据库，所以我知道我必须使用 AsyncTask。[这是我的代码](http://pastebin.com/RwD5ZcmE)。在第 73 行，出于某种原因，一切都中断了。

[这是日志文件](http://pastebin.com/uwPBMSQ0)，在我的代码的第 73 行开始抛出异常。当我尝试通过单步调试代码进行调试时，我不断收到“找不到源”。

也许我不明白 AsyncTasks 是如何工作的，但我假设在第 67 行之后，我的 JSONArray 对象 'json' 被设置，然后我可以在该行之后使用它......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:05:40.377

不要在`onCreate()`方法中创建类，类总是比方法更高的结构。

你有 NPE bc asynctask 需要一些时间来完成，所以只需运行你的任务并进行`onPostExecute()`解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:21:34.590

创建一个在**onCreate()**之外扩展**AsyncTask**的类。（不仅在这种情况下）您总是需要在方法之外创建类（除了匿名内部类等某些情况，当然这又是另一个大讨论）。然后在 onCreate() 方法中创建 AsyncTask 类的对象，并使用该对象调用方法以在不同的线程中运行该任务。根据您的代码，您无法区分这些东西。在**doInBackground()**中，您编写代码以获取需要在不同线程上运行的数据，在**onPostExecute()**方法中，您获取从 doInBackground 获得的数据并更新 UI。要更新 UI，您可以使用**runOnUIThread()****`execute()`******如下所示.. 以下是根据您的要求的伪代码（未经测试）..********

 ******```
public class AllEventActivity extends Activity {

    private ListView listView1;
    private String tag = "all";
    private JSONArray json;
    View header;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

                List<AllEvent> weather_data = new ArrayList<AllEvent>();
//        AllEvent weather_data[] = new AllEvent[]
//        {
//            new AllEvent(R.drawable.a, "Soccer Field"),        
//        };

                weather_data.add(new AllEvent(R.drawable.a, "a", "b", "c", "d", "e"));

        listView1 = (ListView)findViewById(R.id.listView1); //

        header = (View)getLayoutInflater().inflate(R.layout.listview_header_row, null);

        new All_Events_DB_Connect().execute(new String[] {"all"});

    }

    class All_Events_DB_Connect extends AsyncTask<String, Void, JSONArray>
    {

            @Override
            protected JSONArray doInBackground(String... arg0)
            {
                    String tag = arg0[0];
                    UserFunctions u = new UserFunctions();
                    //JSONObject json = new JSONObject();
                    JSONArray json = new JSONArray();
                    try
                    {
                            json = u.getAllEvents(tag);

                    }
                    catch(Exception e)
                    {
                            Log.e("Error", e.getMessage());
                    }
                    return json;
            }
            @Override
            protected void onPostExecute(JSONArray arr)
            {
                    //returnedJson = json;
                    json = arr;

                    runOnUiThread(new Runnable() {
                        public void run() {

                             JSONObject j = new JSONObject();

                             for (int i = 0; i < json.length(); i++)
                             {
                                     try
                                     {
                                             j = json.getJSONObject(i);
                                             Toast.makeText(this, j.getString("hostName"), Toast.LENGTH_LONG).show();
                                     }
                                     catch (Exception e)
                                     {
                                             Log.e("JSON Error", e.getMessage());
                                     }
                             }

                            AllEventAdapter adapter = new AllEventAdapter(this,
                                    R.layout.listview_item_row, weather_data);

                            listView1.addHeaderView(header);

                            listView1.setAdapter(adapter);

                        }
                    });
            }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:40:34.863

您在第 73 b/c 行失败，您的 AsyncTask 在您尝试使用它时尚未实例化 json 变量。请记住，AsnycTask 运行在一个单独的进程上，任何需要使用 json 变量完成的工作都需要在 AsyncTask 的 onPostExecute 方法中完成。此方法在 UI 线程上运行，因此可以在那里进行 UI 工作。******

# java - 从第三方 Facebook 应用程序收集数据

> ID：13522279
> 
> 赞同：1
> 
> 时间：2012-11-23T01:59:20.500
> 
> 标签：java, facebook, canvas

也许这是一个新手问题，但我需要一些信息来了解我的想法。

是否可以从 facebook 中的第三方应用程序获取任何类型的数据（例如文本）？

我检查了 facebook 应用程序在一个名为 canvas 的包装器中运行。如何收集出现在此画布内的文本（当然，我已经使用帐户登录并运行了 3rd-party 应用程序）？

我想编写一个桌面应用程序来记录包装器内出现的数据更改（第 3 方应用程序每 30 秒更新一次列表）。

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T08:30:35.730

要检索或保存内容，您可以使用任何 Web 抓取工具，例如[Visual Web Ripper](http://www.visualwebripper.com/) .. 虽然我建议您也留意数据使用政策和版权问题...

# .net - WPF ComboBox 的自定义相等比较器

> ID：13522282
> 
> 赞同：8
> 
> 时间：2012-11-23T02:00:29.630
> 
> 标签：.net, wpf, data-binding, combobox

当我们将组合框的 SelectedItem 绑定到一个属性时，通常它会使用对象类型的 Equals 方法来确定应该在 ComboBox 视图中显示的选定项。（例如，请参阅[此问题](https://stackoverflow.com/questions/3506193/wpf-combobox-selecteditem-not-getting-set)）

是否可以为此拥有自己的比较器，而无需修改类的 equals 方法？我不想直接修改方法的原因是因为该类也用于业务逻辑，我不希望我的相等比较器影响使用同一类的其他东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-22T18:55:14.920

> The reason I don't want to modify the method directly is because the class is also used for business logic and I don't want my equality comparer to affect other things that use the same class

This usually indicates a wrapper that is needed:

```
public class Wrapper<T>
{
    public override string ToString() { ... }

    public override bool Equals(object obj) { ... }

    public T UnderlyingRecord { get; set; }
} 
```

This way you can carry on as normal and only the view will use the wrapper object.

# delphi - GStack.HostToNetwork 输入类型 - Shortint？

> ID：13522284
> 
> 赞同：0
> 
> 时间：2012-11-23T02:01:11.497
> 
> 标签：delphi, delphi-xe3

1.  如何将“a”变量传递给 HostToNetwork() ？需要以某种方式转换它..
2.  以及如何插入“a”变量，这个十六进制代码？

    ```
    var
    a : array[0..19] of Shortint;
    h : string;

    h =: '714BD6D36D4944F4E4F943CB03D128EA5C372FF6';

    GStack.HostToNetwork(a) 
    ```

来自 IdStack.pas：

```
function HostToNetwork(AValue: Word): Word; overload; virtual; abstract;
function HostToNetwork(AValue: LongWord): LongWord; overload; virtual; abstract;
function HostToNetwork(AValue: Int64): Int64; overload; virtual; abstract;
function HostToNetwork(const AValue: TIdIPv6Address): TIdIPv6Address; overload; virtual; 
```

谢谢

**编辑：**

```
 h := '714BD6D36D4944F4E4F943CB03D128EA5C372FF6';
    for x := 0 to 19 do
    begin
      a[x] := StrToInt('$'+Copy(h, x, 2));
    end; 
```

正确的 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:48:27.973

`Shortint`大小为 1 个字节，因此根本不受字节序的影响。`GStack.HostToNetwork()`and`GStack.NetworkToHost()`方法只对多字节整数进行操作。所以使用本例中的方法没有意义`GStack`。您正在声明一个包含 20 个原始字节的数组。您需要先将这些字节拆分为整数，然后才能对其进行转换。拆分它们后，您可以`GStack`根据需要将它们单独传递。

根据您[之前的问题](https://stackoverflow.com/questions/13505211)，您实际上是在处理整数记录，而不是原始字节。您需要在将记录编码为原始字节**之前**将整数转换为网络字节顺序，然后在您首先将原始字节解码为记录**之后将整数转换为主机字节顺序。**例如：

```
type
  Tconnecting = packed record
    a: int64;
    b: integer;
    c: integer;
  end;

var
  packet: Tconnecting;
  send_data: TIdBytes;
begin
  packet.a := $1234567890;
  packet.b := 0;
  packet.c := RandomRange(1, 9999999);

  packet.a := GStack.HostToNetwork(packet.a);
  packet.b := Integer(GStack.HostToNetwork(LongWord(packet.b)));
  packet.c := Integer(GStack.HostToNetwork(LongWord(packet.c)));

  send_data := RawToBytes(packet, SizeOf(packet));
  udp.SendBuffer(send_data);
end; 
```

.

```
var
  Treply = packed record
    c: integer;
    b: integer;
    a: int64;
  end;

var
  packet: Tconnecting;
  received_data: TIdBytes;
begin
  SetLength(received_data, SizeOf(Treply));
  if udp.ReceiveBuffer(received_data) = SizeOf(Treply) then
  begin
    BytesToRaw(received_data, packet, SizeOf(Treply));

    packet.a := GStack.NetworkToHost(packet.a);
    packet.b := Integer(GStack.NetworkToHost(LongWord(packet.b)));
    packet.c := Integer(GStack.NetworkToHost(LongWord(packet.c)));

    // use packet as needed ...
  end;
end; 
```

# c# - 如何在文本框中获取选定的行？

> ID：13522285
> 
> 赞同：6
> 
> 时间：2012-11-23T02:01:24.123
> 
> 标签：c#, windows-phone-7, textbox, windows-phone, word-wrap

我在我的 Windows Phone 7 应用程序中启用了文本换行的文本框，如何获取用户选择的字符的行数？例如，如果一个文本框看起来像这样：

```
test
text
bo|x
is
here 
```

, 带“|” 表示所选字符，行数将为 3。我需要在任何时间点执行此操作，尤其是在更改文本时。我可以在没有文本换行的情况下计算文本框中的换行符数量，但这显然是不同的场景。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:00:33.843

我自己想出了这个：

```
Rect rec = textbox.GetRectFromCharacterIndex(textbox.SelectionStart);
double rectop = rec.Top;
double lineheight = text.LineHeight;
int result = (int)(rectop / lineheight + 1); 
```

结果 = 选定的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T02:42:05.257

只有一个愚蠢的方式：

你可以处理这些事件：ManipulationStarted ManipulationCompleted

从回调 args 中可以找到 point(x,y) 用户点，可能是所选地点的坐标。

并且你从道具知道每一行的高度——lineHeight

并做一个除法

# java - 将“PNG”图像文件加载到我的 Java Fx 应用程序时，Java fx 引擎失败

> ID：13522287
> 
> 赞同：1
> 
> 时间：2012-11-23T02:01:56.833
> 
> 标签：java, javafx-2, javafx

我是一个真正的初学者，在`Java Fx`将我在网上找到的两个 png 文件加载到我的应用程序中时遇到问题。有人可以告诉我可能出了什么问题吗？在我正在使用的代码下方：

```
 Button fButton = new Button("Agregar selección");

    Image imageF = new Image(getClass().getResourceAsStream("forwardArrow.png"))
    fButton.setGraphic(new ImageView(imageF)); 
```

由于某种原因，Java Fx 图形引擎出现故障。

非常感谢任何提示。

下面的错误是：

```
 Exception in Application start method
    java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:57:11.003

也许您正在导入错误的 Image 类？下面是一个工作示例。

```
package com.test;

import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.image.Image;
import javafx.scene.image.ImageView;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class JavaFXApp extends Application {
    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        Button fButton = new Button();
        Image imageF = new Image(getClass().getResourceAsStream("forwardArrow.png"));
        fButton.setGraphic(new ImageView(imageF));
        StackPane root = new StackPane();
        root.getChildren().add(fButton);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }
} 
```

# android - 如何确保始终显示我的第一个选项卡？

> ID：13522288
> 
> 赞同：0
> 
> 时间：2012-11-23T02:02:01.873
> 
> 标签：android, android-fragments, android-actionbar

我有：

1.  仅显示给定 URL 的 WebView 的 WebViewFragment。
2.  一个 TabbedWebViewHandler 处理创建包含 WebViewFragments 的选项卡并将它们添加到操作栏。
3.  一个 HelpActivity，它创建并显示 4 个 WebViewFragment（分别用于“更多信息”、“条款和条件”、“信用”和“此应用程序的目的”帮助屏幕）。

所有这一切都很好，*除了*第一个选项卡在 HelpActivity 首次启动时始终只是一个空白的黑屏：

![空白的 Android 选项卡](../Images/799462da478725922ded327d113153a5.png)

其他选项卡工作正常，如果选择另一个选项卡然后重新选择“信息”选项卡，第一个选项卡（在本例中为“信息”选项卡）将正确呈现其 Web 视图。

在创建第一个选项卡并将其添加到操作栏选项卡后，我总是选择`actionBar.selectTab(newTab);`. 我知道执行此操作的代码正在运行，因为日志包含“选择第一个选项卡”。

我还将 TabbedWebViewHandler 用于执行相同操作的其他活动（包括只有一个“选项卡”且不显示选项卡导航的活动），因此我更愿意修复 TabbedWebViewHandler 而不是解决方法在帮助活动中。

如果相关的话，我正在使用 ActionBarSherlock / Android 支持库来提供我的选项卡功能。

如何确保我的活动的第一个选项卡始终正确显示？

### WebViewFragment

```
public class WebViewFragment extends Fragment {
    private static final String TAG = WebViewFragment.class.getSimpleName();
    private String url;
    @Override
    public View onCreateView(
            LayoutInflater inflater,
            ViewGroup container,
            Bundle savedInstanceState) {
        Log.d(TAG, String.format("onCreateView(): URL is '%s'", url));
        View v = inflater.inflate(R.layout.snippet_webview, container, false);
        WebView wv = (WebView) v.findViewById(R.id.webViewWebView);
        wv.loadUrl(url);
        return v;
    }
    public void setUrl(String url) {
        this.url = url;
    }
} 
```

### 选项卡式WebViewHandler

```
public class TabbedWebViewHandler {
    private static final String TAG = "TabbedWebViewHandler";
    private final ActionBar actionBar;
    private final Context hostContext;
    private final FragmentManager fragmentManager;
    public TabbedWebViewHandler(SherlockFragmentActivity host) {
        this.hostContext = (Context) host;
        this.actionBar = host.getSupportActionBar();
        this.fragmentManager = host.getSupportFragmentManager();
    }
    public void addTab(String title, String renderUrl) {
        Tab newTab = makeTab(title, renderUrl);
        actionBar.addTab(newTab);
        // FIXME: buggy! tabs don't show on first load
        if (actionBar.getTabCount() == 1) {
            /* first tab: select it by default */
            Log.d(TAG, "Selecting first tab");
            actionBar.selectTab(newTab);
        }
        if (actionBar.getTabCount() > 1) { 
            /* more than one tab: enable navigating between tabs */
            actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        }
    }
    private Tab makeTab(String title, String renderUrl) {
        WebViewFragment f = 
                (WebViewFragment) 
                    SherlockFragment.instantiate(
                        hostContext, 
                        WebViewFragment.class.getName());
        f.setUrl(renderUrl);
        ActionBar.TabListener l = new WebViewFragmentTabListener(f);
        Tab newTab = actionBar.newTab();
        newTab.setText(title);
        newTab.setTabListener(l);
        return newTab;
    }
    private class WebViewFragmentTabListener implements ActionBar.TabListener {
        private final WebViewFragment fragment;
        public WebViewFragmentTabListener(WebViewFragment f) {
            this.fragment = f;
        }
        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // replace current fragment with this fragment
            if (ft == null) { 
                fragmentManager
                    .beginTransaction()
                    .replace(android.R.id.content, fragment)
                    .commit();
            } else {
                ft.replace(android.R.id.content, fragment);
            }
        }
        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            ft.remove(fragment);
        }
        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // do nothing
        }
    }
} 
```

### 帮助活动

```
public class HelpActivity extends BaseActivity {
    private static final String TAG = "HelpActivity";
    private static final String FURTHER_URL = 
            "file:///android_asset/further_info.html";
    private static final String DISCLAIMER_URL = 
            "file:///android_asset/terms_and_conditions.html";
    private static final String CREDITS_URL = 
            "file:///android_asset/image_credits.html";
    private static final String PURPOSE_URL = 
            "file:///android_asset/purpose.html";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.i(TAG, "onCreate()");
        super.onCreate(savedInstanceState);
        TabbedWebViewHandler twvh = new TabbedWebViewHandler(this);
        twvh.addTab("Info", FURTHER_URL);
        twvh.addTab("Terms", DISCLAIMER_URL);
        twvh.addTab("Credits", CREDITS_URL);
        twvh.addTab("Purpose", PURPOSE_URL);
    }

} 
```

### 日志输出

```
I/HelpActivity(20038): onCreate()
D/TabbedWebViewHandler(20038): Selecting first tab
D/WebViewFragment(20038): onCreateView(): URL is file:///android_asset/further_info.html
I/webclipboard(20038): clipservice: android.sec.clipboard.ClipboardExManager@41d57ff8
D/WebViewFragment(20038): onCreateView(): URL is file:///android_asset/further_info.html
I/webclipboard(20038): clipservice: android.sec.clipboard.ClipboardExManager@41d57ff8
D/WebViewFragment(20038): onCreateView(): URL is file:///android_asset/further_info.html
I/webclipboard(20038): clipservice: android.sec.clipboard.ClipboardExManager@41d57ff8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:22:55.597

`ActionBar.NAVIGATION_MODE_TABS`在开始添加选项卡之前将导航模式设置为。

编辑：找到了！[操作栏的 selectTab() 方法](https://github.com/JakeWharton/ActionBarSherlock/blob/master/library/src/com/actionbarsherlock/internal/app/ActionBarImpl.java#L503)中有一段话：

```
if (getNavigationMode() != NAVIGATION_MODE_TABS) {
    mSavedTabPosition = tab != null ? tab.getPosition() : INVALID_POSITION;
    return;
} 
```

如果栏不在`ActionBar.NAVIGATION_MODE_TABS`.

# ruby - ruby 串行端口处理十六进制数据

> ID：13522291
> 
> 赞同：1
> 
> 时间：2012-11-23T02:02:53.887
> 
> 标签：ruby, serial-port

我有一个设置为发送一组十六进制数据的 Teensy。

一个示例如下：

383137323736

如您所见，这转化为

817276

这是我在青少年一侧刷过的卡片的一部分。

我现在的问题是让这些数据以 ruby​​ 显示在我的控制台上。到目前为止我尝试过的任何东西都会输出一个空字符串或什么都没有。

每当我检查数组大小时，它都会返回 1，这是正确的，因为一组数字是通过我的串行线路通过十六进制发送的。

我到目前为止的红宝石代码如下：

```
require 'serialport'
require 'rubygems'

sp=SerialPort.new "/dev/ttyAMA0", 9600
puts "HELLO"
while 1
        if sp.gets
                ar1 = []
                ar1 = sp.read.unpack('H*')

                puts ar1.length
        end
end
sp.close 
```

所以我使用 unpack 函数和 H* 将整组十六进制数字转换回它们的原始数字。根据 Ruby doc，unpack 应该遍历整个数字集，并在 H.

有人可以帮忙吗？不太确定下一步该去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:13:00.880

首先，转换一串十六进制数字值的方法是：

```
'383137323736'.scan(/.{2}/).map{ |c| c.hex.chr }.join
=> "817276" 
```

而不是`hex`你可以使用`to_i(16)`.

两个十六进制数字是 ASCII 中数字的值。`unpack`using`H`不会做你想做的事。相反，它会像这样使用：

```
'817276'.unpack('H*')
=> "383137323736" 
```

你想要的是：

```
["383137323736"].pack('H*')
"817276" 
```

结合所有这些，而不是：

```
ar1 = []
ar1 = sp.read.unpack('H*') 
```

采用：

```
ar1 = sp.read.scan(/.{2}/).map{ |c| c.hex.chr } 
```

或类似的东西：

```
str = [sp.read].pack('H*') 
```

如果你想要一个字符串。

不需要预初始化`ar1`，`[]`因为您将立即覆盖其`[]`值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T05:10:47.283

需要对我的初始代码进行小的修改才能使其完全正常工作。

如果有人正在寻找答案，我的最终代码如下：

```
require 'serialport'
require 'rubygems'

sp=SerialPort.new "/dev/ttyAMA0", 9600
puts "HELLO"
while sp.read

      sp.read_timeout = 50
      str1 = [sp.read].pack('H*')
      sp.write str1

end
sp.close 
```

与之前的变化是首先使用 Tim Man 将十六进制打包为 ASCII 的方法，但也修改了我的 while 外观以使用 sp.read 而不是 sp.gets。

# count - jasper 报告某些类别的发生次数

> ID：13522293
> 
> 赞同：4
> 
> 时间：2012-11-23T02:03:20.813
> 
> 标签：count, jasper-reports, ireport, summary

我已经尝试计算行所属的某些类别的出现次数（请参阅[SQL 计算行所属的某些类别的出现次数](https://stackoverflow.com/questions/13426617/sql-count-occurrences-of-certain-categories-that-rows-belong-to)）

但是现在我想知道，如果不做 sql 的事情，jasper 报告是否能够做到这一切？自己做总结而不给数据库服务器额外的工作（这实际上发生在我身上）？

例如，这可能是我的报告：

```
name | color | flavor
--------------------------
n1   | green | lemon
n2   | blue  | strawberry
n3   | red   | lemon
n4   | green | lemon
n5   | green | mango
n6   | red   | chocolate
n7   | white | lemon
n8   | blue  | mango
n9   | green | chocolate 
```

这将是我想得到的总结：

```
colors | occurrences         flavor    | occurences
--------------------         ----------------------
green  |   4                 lemon     |   4
blue   |   2                 strawberry|   1
red    |   6                 mango     |   2
white  |   1                 chocolate |   2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:28:38.707

你有 3 个选项：

1.  有 2 个子报告，并在每个订单中按颜色和风味选择。并在每个子报告摘要中将它们作为主摘要的一部分。当 SQL 数据排序时，您可以在 iReport 中为每个列创建组，并以变量计数每个组。缺点是您为每个子报告去数据库 2 次。

2.  拥有自己的数据源java实现。这就像一个不进行任何数据转换的数据代理。只有 HashMap 计算颜色和味道的出现。然后作为带有报告评估的附加字段“报告”从数据源获取此字段并将它们放在报告中。你只去 DB 一次。

3.  结合 print if 表达式和定义的组（颜色、风味）和 print if 表达式可以帮助联合所有选择语句：

    select a,b,c 'print_to_detail' as print_if_field, ' ' as dummy_field
    **union all**
    select a,b,c 'print_to_group1_summary' as print_if_field, color as dummy_field order by color
    **union all**
    select a,b,c 'print_to_group2_summary' as print_if_field, flavor as dummy_field order by color

也许这有助于作为概念性的想法。

# c++ - 为什么 C++ lambda 不支持移动捕获？

> ID：13522299
> 
> 赞同：19
> 
> 时间：2012-11-23T02:04:25.413
> 
> 标签：c++, c++11, lambda, move-semantics

当前的 C++11 标准不支持在 lambda 表达式中移动捕获变量，例如

```
unique_ptr<int[]> msg(new int[1000000]);
async_op([&&msg] { // compile error : move capture is not supported
   /* do something */
}); 
```

由于消息传递和唯一所有权在某些异步系统设计中具有一些关键作用，我认为移动语义应该被视为一流的语言语义。但是 lambda 不支持移动捕获。

当然，我知道使用移动捕获代理有一些解决方法——但我想知道**为什么**决定不将这个功能包含在 C++11 标准中，尽管它很重要。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-25T10:48:41.937

C++ 规范试图相当保守。下一个语言规范破坏符合先前规范的程序真的很糟糕。

移动语义需要一段时间才能成熟。如果我记得的话，直到 2009 年才有变化。同时，直到类似的时间框架，许多编译器才实现 lambda。来不及填补空白，2011年还是发布标准，已经很晚了。（使用编译器对规范进行原型设计，测试编译器，返回并讨论规范、草案、原型、测试、重复。需要一段时间。）

Lambda 将在下一个标准中得到很大的扩展，获得类型推导（`auto`多态性）。Xeo 提到了一种移动初始化的潜在解决方案。

请注意，lambda 只是语法糖。它们是根据自动定义的类指定的，但不包含您不能自己做的任何事情。至于目前的语言标准，当糖用完时，您应该手动充实该实现。

顺便说一句，您可以通过捕获老式的 来解决缺少的功能`auto_ptr`，这是 C++03 现在已弃用的智能指针尝试。它被自己的复制构造函数无效，本质上实现了移动复制。但它已被 C++11 弃用，可能会导致警告。不过，您可以尝试实现类似的东西。

# grails - Grails：解决“服务器无法为端口 8080 启动：地址已在使用中。”

> ID：13522307
> 
> 赞同：20
> 
> 时间：2012-11-23T02:06:17.567
> 
> 标签：grails

尝试解决“ `Server failed to start for port 8080: Address already in use`”时出现此错误

```
 Error executing script 8888: For input string: "" 
```

有人可以帮忙吗？不知道怎么了。谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-05-02T20:20:54.210

当端口号 8080 已经被使用并且你想重用同一个端口时，你应该终止它的进程：

首先，检查正在使用端口 8080 的进程的 pid。为此，请运行：

```
lsof -w -n -i tcp:8080 
```

![运行命令后的结果](../Images/49bec90bb30ba9c73675bfa6a8ac9646.png)

在上面的示例中，使用端口 9090 的进程的 pid 为 3812

记下 PID。您的机器上的 PID 可能不同。我们需要这个来执行下一个命令： ![杀死进程](../Images/b7f20dc8404edc273b525b977c9b2833.png)

所以你必须通过 run-app 测试它：

```
grails run-app 
```

更新：由于`lsof -w -n -i tcp:8080| awk '{print $2}'|awk 'END{print}'`是 PID 的输出，您可以通过 PID 自动终止端口进程：

```
 kill -9 `lsof -w -n -i tcp:8080| awk '{print $2}'|awk 'END{print}'` 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-18T14:06:03.523

如果您使用的是**Grails/Groovy Tool Suite**（基于 Eclipse 的 IDE），请选择**Run as > Run Configurations...。** 然后，在 Grails 选项卡中，输入如下：

```
-Dserver.port=8050 run-app 
```

因此，Grails 将在端口 8050 上运行，而不是默认端口 (8080)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T03:46:29.717

讯息

> 服务器无法为端口 8080 启动：地址已在使用中

表示您机器上的其他一些进程已经将自己绑定到端口 8080。我猜这是一个运行 Tomcat 的实例，或者是因为您启动了它，或者它没有被您使用的任何 IDE 正确关闭。

无论如何，[这个问题](https://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u)应该可以帮助您结束正在使用该端口的进程。

至于关于脚本 8888 的第二个错误，我不知道。Grails 不会尝试在我的环境中启动此脚本，所以我想它与您安装的插件有关。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T05:53:22.450

问题是端口号 8080 已被使用。因此，您要么必须停止该进程为新进程让路，要么可以指定`grails -Dserver.port=8090 run-app`运行应用程序的时间。

但是，由于您遇到脚本错误，因此您可能没有在 BuildConfig.groovy 中指定端口。

这是解决方案：添加`grails.server.port.http=8888`您的`BuildConfig.groovy`

请参阅此处的评论：http: [//www.icodeya.com/2012/06/grails-resolving-server-failed-to-start.html](http://www.icodeya.com/2012/06/grails-resolving-server-failed-to-start.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-29T15:20:59.033

如何杀死一个繁忙的端口

打开命令提示符并输入 C:>netstat -a -n -o | find "8080" 查找端口的 PID 示例 TCP 0.0.0.0:8888 0.0.0.0:0 LISTENING 9068

下一个

C:>taskkill /PID 9068 /F SUCCESS：PID 9068 的进程已经终止。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-06-20T18:40:59.347

如果您使用的是 STS 或 Eclipse（或者可能是在 Eclipse 上构建的任何环境），一种选择是转到 Debug 透视图（**Window -> Open perspective -> Debug**）。从那里您可以右键单击正在运行的服务器，然后单击**Terminate and relaunch**。这将终止当前服务器并在同一端口上重新启动，这样您就不会收到`Server failed to start for port 8080: Address already in use`消息。

至于`Error executing script 8888: For input string: ""`我以前没见过，但似乎@ShootingStar 有答案。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-07-08T22:27:24.663

当端口号 8080 已经被使用并且您想重用相同的端口时，您应该终止其进程：使用`fuser 8080/tcp`将打印您绑定在该端口上的进程的 PID。

这`fuser -k 8080/tcp`将终止该过程。

仅适用于 Linux。更普遍的是使用`lsof -i4`（或 6 用于 IPv6）。

示例：如果端口是 8080，则在终端上运行：

```
 fuser -k -n tcp 8080 
```

这就对了！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-07-17T15:34:50.740

这意味着有一个服务使用端口 8080。您可以在终端上键入命令“netstat”来验证它。

如何停止使用此端口的服务？在 Windows 上，您可以通过以下步骤停止此类服务：

1.  以管理员身份登录您的系统
2.  从开始菜单中选择控制面板，然后选择管理工具，然后选择服务。
3.  从列表中，找到名称以：Web Server 结尾的服务并停止它。

如果它没有作为服务运行，您可能需要使用任务管理器强制它停止。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-04-01T11:53:03.780

比其他发布的答案更容易。

在控制台窗口中有一个 X 和 XX 图标。当您将光标悬停在它上面时。您将看到显示“删除启动”和“删除所有已终止启动”的气球。

单击它们。Eclipse 将清除所有现有服务器，以便您可以在默认端口上重新启动服务器。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-01T07:47:26.867

您可以检查当前是否正在使用 8080 端口。

```
sudo lsof -i :8080 
```

然后你可以看到端口状态，包括、`COMMAND`和类似的东西。`PID``USER`

然后，您可以使用`PID`.

```
kill -9 <PID> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-12T09:59:33.093

您需要终止在端口 8080 上运行的进程；所以使用命令：

```
netstat -plten |grep java 
```

使用 grep java 作为 tomcat 使用 java 作为他们的进程。

它将显示带有端口号和进程 ID 的进程列表

```
tcp6       0      0 :::8080                 :::*                    LISTEN      
1000       30070621    16085/java 
```

/java 之前的数字是进程 ID。现在使用 kill 命令杀死进程

```
kill -9 16085 
```

-9 表示进程将被强制终止。

# java - 在没有 Opengl 或 Direct3d 管道的情况下使用 Java2d 进行平滑绘图？

> ID：13522309
> 
> 赞同：3
> 
> 时间：2012-11-23T02:07:48.027
> 
> 标签：java, java-2d, flip, buffered, vsync

当禁用 opengl 和 direct3d 管道时（通过使用 -Dsun.java2d.d3d=false 和 -Dsun.java2d.opengl=false 调用 vm），我无法找到使用 Java2d 获得平滑移动或动画的方法

下面快速而肮脏的代码演示了我的问题。它绘制了一个在屏幕上移动的框。方框位置每秒更新大约 60 次，屏幕重绘尽可能多的次数。它使用 BufferStrategy 类来实现双缓冲；翻转在“bs.show();”完成

代码（按退出键退出）：

```
import java.awt.Color;
import java.awt.Frame;
import java.awt.Graphics;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Rectangle;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.image.BufferStrategy;

public class FluidMovement {
    private static volatile boolean running = true;
    private static final int WIDTH = 500;
    private static final int HEIGHT = 350;

    public static void main(String[] args) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gd = ge.getDefaultScreenDevice();
        GraphicsConfiguration gc = gd.getDefaultConfiguration();

        Frame frame = new Frame(gc);
        frame.setIgnoreRepaint(true);
        frame.setUndecorated(true);
        frame.addKeyListener(new KeyAdapter() {
            @Override public void keyPressed(KeyEvent e) {
                if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
                    running = false;
                }
            }
        });
        frame.setSize(WIDTH, HEIGHT);
        frame.setVisible(true);
        frame.createBufferStrategy(2);
        BufferStrategy bs = frame.getBufferStrategy();
        long nextTick = System.nanoTime();
        class Rect {
            int dx = 2, dy = 1, x = 0, y = 0;
        }
        Rect rect = new Rect();

        Graphics g;
        while (running) {

            if (System.nanoTime() > nextTick) {
                rect.x = (rect.x + rect.dx) % WIDTH;
                rect.y = (rect.y + rect.dy) % HEIGHT;
                nextTick += 1000000000 / 60;
            }

            g = bs.getDrawGraphics();
            g.setColor(Color.BLACK);
            g.fillRect(0, 0, WIDTH, HEIGHT);
            g.setColor(Color.WHITE);
            g.fillRect(rect.x, rect.y, 10, 10);
            g.dispose();
            bs.show();
        }
        bs.dispose();
        frame.dispose();
    }

} 
```

当我使用“java FluidMovement”正常执行此代码时，它像丝绸一样顺畅运行（除了偶尔的撕裂），因为 jvm 使用了 direct3d/directdraw 管道。当我使用“java -Dsun.java2d.d3d=false -Dsun.java2d.opengl=false FluidMovement”执行此代码时，它非常不稳定。

我不能假设使用了 direct3d 或 opengl 管道。管道不适用于我尝试过的 3 台机器中的 2 台；它只能在运行 Windows 7 的具有专用图形的机器上运行。无论如何我可以使盒子顺利移动，还是我应该求助于使用某种低级别访问权限的库，如 JOGL？

笔记：

*   帧率不是问题。在这两种情况下（启用和禁用管道），应用程序的运行速度都超过 300 fps。启用管道时，我强制关闭 vsync。
*   我试过 Toolkit.getDefaultToolkit().sync()
*   我尝试了许多不同类型的循环，但运动从来都不是真正流畅的。即使使用固定的帧速率，也会表现出相同的断断续续。
*   我试过以全屏独占模式运行框架。
*   我尝试过使用 3 个甚至 4 个缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:24:49.890

很多东西突然出现在我身上并吓到我......

1.  您没有遵守线程/Swing 合同。UI 的所有更新都必须通过事件调度线程进行。所有长时间运行和阻塞的代码都应该在后台线程中执行。
2.  您的“动画循环”无所事事地占用了大量 CPU 时间。线程应该在周期之间休眠（或者至少，应该只在某些事情发生变化时才绘制），这应该会减少系统上的总体负载。

我尝试了一些解决方案。

虽然我没有遇到“重大”问题，但这些都是非常简单的示例，我通常使用默认 JVM 选项获得了更好的性能。

## 缓冲策略

这基本上就是你所拥有的，开始对 EDT 很好，并使用你正在使用的缓冲策略

```
public class SimpleAnimationTest {

    private boolean running = true;
    private Rectangle box = new Rectangle(0, 90, 10, 10);
    private int dx = 4;
    protected static final int WIDTH = 200;
    protected static final int HEIGHT = 200;

    public static void main(String[] args) {
        new SimpleAnimationTest();
    }

    public SimpleAnimationTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();

                frame.setIgnoreRepaint(true);

                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.setSize(WIDTH, HEIGHT);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                frame.createBufferStrategy(2);
                final BufferStrategy bs = frame.getBufferStrategy();

                new Thread(new Runnable() {
                    @Override
                    public void run() {
                        long tock = 1000 / 60;
                        while (running) {

                            box.x += dx;
                            if (box.x + box.width > WIDTH) {
                                box.x = WIDTH - box.width;
                                dx *= -1;
                            } else if (box.x < 0) {
                                box.x = 0;
                                dx *= -1;
                            }

                            Graphics2D g = (Graphics2D) bs.getDrawGraphics();
                            g.setColor(Color.BLACK);
                            g.fillRect(0, 0, WIDTH, HEIGHT);
                            g.setColor(Color.WHITE);
                            g.fill(box);
                            g.dispose();
                            bs.show();
                            try {
                                Thread.sleep(tock);
                            } catch (InterruptedException ex) {
                            }
                        }
                        bs.dispose();

                    }
                }).start();

            }
        });
    }
} 
```

## 双缓冲摆动组件

```
public class SimpleAnimationTest {

    private Rectangle box = new Rectangle(0, 90, 10, 10);
    private int dx = 4;

    public static void main(String[] args) {
        new SimpleAnimationTest();
    }

    public SimpleAnimationTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SimplePane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class SimplePane extends JPanel {

        public SimplePane() {

            setDoubleBuffered(true);

            Timer timer = new Timer(1000 / 300, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    box.x += dx;
                    if (box.x + box.width > getWidth()) {
                        box.x = getWidth() - box.width;
                        dx *= -1;
                    } else if (box.x < 0) {
                        box.x = 0;
                        dx *= -1;
                    }
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        protected void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g.create();
            super.paintComponent(g2d);
            box.y = (getHeight() - box.height) / 2;
            g2d.setColor(Color.RED);
            g2d.fill(box);
            g2d.dispose();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:56:30.293

我通过切换到 JOGL 解决了我的问题。在我之前遇到困难的机器上，现在一切都很好而且很顺利。

LWJGL 看起来也很有前途，它可以让您以几乎与在 C 中相同的方式使用 opengl。

如果其中一个管道工作，Java2D 很棒，但否则它不是很可靠。我在 SDL 中通过 java2d 使用纯软件表面的运气更好。

# c++ - Windows GDI API 是否在 GetLastError 中返回错误代码？

> ID：13522310
> 
> 赞同：0
> 
> 时间：2012-11-23T02:07:49.030
> 
> 标签：c++, winapi, gdi, getlasterror

我知道这是一项古老的技术，但我很好奇，Windows GDI API 是否在 GetLastError() 中返回错误代码？当 DeleteObject 和 DeleteDC 失败但错误代码返回为 0 时，我有几个实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:06:13.253

大多数 GDI 函数不使用`GetLastError()`. 能够报告特定错误的 GDI 函数将直接在其返回值中返回错误代码。不过，并非所有 GDI 函数都可以报告特定错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:14:09.960

快速浏览 PSDK：

DeleteObject 和 DeleteDC：

> 返回值 - 如果函数成功，则返回值非零。
> 
> 如果函数失败，则返回值为零。
> 
> Windows NT/2000/XP：要获取扩展错误信息，请调用 GetLastError。

PSDK/MSDN 是您的朋友。

# jquery - 鼠标悬停和鼠标移出时切换相反的 div

> ID：13522316
> 
> 赞同：-1
> 
> 时间：2012-11-23T02:09:17.260
> 
> 标签：jquery, mouseout

在这方面苦苦挣扎，我有 4 个 div，2 个文本和 2 个图像，在 2 个列内...我想让图像淡入左列并在右列显示文本，但是当我将鼠标悬停在右边时列我希望右侧的图像淡入，文本在左列淡入，反之亦然，页面加载时左侧有文本，右侧有图像。

我有一个无法上班的小提琴

[http://jsfiddle.net/bloodygeese/pd6Jf/7/](http://jsfiddle.net/bloodygeese/pd6Jf/7/)

因此，将鼠标悬停在任一列上，生成下面交替的 2 个设置

```
text | image
Image | text 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:38:11.277

首先，从你的 Fiddle 有几个标签错误，你没有正确关闭你的 div。

```
<div id="mainpage1">
<div> <---- Your problem
<div id="leftimage"></div> 
```

还有你的css，你应该向左：210 px 为你的右图像。

这是工作解决方案。

[http://jsfiddle.net/pd6Jf/11/](http://jsfiddle.net/pd6Jf/11/)

# ios - XCode 4.5.2：如何协调“无法附加到进程 ID 0”与对资源文件夹的需要？

> ID：13522320
> 
> 赞同：2
> 
> 时间：2012-11-23T02:10:18.370
> 
> 标签：ios, xcode, bundle

因此，我在 XCode 4.5.2 中有一个 iOS 项目，当我尝试在模拟器中运行它时，它不断抛出“无法附加到进程 ID 0”错误，如该线程中所述：

[无法附加到进程 ID Xcode](https://stackoverflow.com/questions/11535844/failed-to-attach-to-process-id-xcode)

我已经尝试了那里建议的所有修复方法，唯一可行的方法是将项目中的 Resources 文件夹重命名为其他内容（例如“Assets”）。这很好，我可以继续我的生活，除了这样做意味着所有资源都被复制到 Assets 目录下的包中。这意味着（例如）Info.plist 中图标的文件名，以及对 [NSBundle mainBundle] pathForResource ... 的任何调用也需要在它们前面加上“Assets/”。

我需要两件事之一：

A - 关于如何解决不涉及重命名资源文件夹的“无法附加到进程”问题的建议

B - 失败了，一种重命名资源文件夹的方法，但将该文件夹中的文件复制到包中，这种方式不需要将文件夹名称放在我想要访问的每个资产之前。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:34:55.450

在之前标记的线程也未能解决我的问题后，我遇到了这个问题。为我解决它的唯一方法是重新启动我的 Mac。

# android - 如何将我的自定义号码选择器放在对话框中？

> ID：13522321
> 
> 赞同：1
> 
> 时间：2012-11-23T02:10:37.580
> 
> 标签：android, dialog, picker, android-dialogfragment

这是我的布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <net.simonvt.widget.NumberPicker
        android:id="@+id/numberPicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="100dp" >
    </net.simonvt.widget.NumberPicker>

</RelativeLayout> 
```

它在我的应用程序中显示了一个自定义选择器。但我想在对话框中显示这个选择器。

这是我的自定义对话框：

```
public class NumberPickerCustomDialog extends DialogFragment {
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage("Dialog")
           .setPositiveButton("OK", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
               }
           })
           .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
               }
           }).;
    return builder.create();
} 
```

我怎样才能把我的选择器放在这个对话框中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:29:40.907

您需要为对话框提供自定义布局，以获取 LayoutInflater 服务并使用它来扩充您的布局。

```
public class NumberPickerCustomDialog extends DialogFragment {
Context context;

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // get context
    context = getActivity().getApplicationContext();
    // make dialog object
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    // get the layout inflater
    LayoutInflater li = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // inflate our custom layout for the dialog to a View
    View view = li.inflate(R.layout.my_custom_view, null);
    // inform the dialog it has a custom View
    builder.setView(view);
    // and if you need to call some method of the class
    MyCustomView myView = (MyCustomView) view.findViewById(R.id.custom_id_in_my_custom_view);
    myView.doSome("stuff");
    // create the dialog from the builder then show
    return builder.create();
}
} 
```

# python - 如何使用二叉搜索树增加价值

> ID：13522326
> 
> 赞同：1
> 
> 时间：2012-11-23T02:11:31.107
> 
> 标签：python, python-3.x, binary-search-tree

我正在使用 Python 3.2.3 中的二叉搜索树，这是我的两个文件（由老师提供）用于创建二叉搜索树。

但首先我会解释我遇到的问题。首先，我正在阅读文件并将新单词附加到 BST，并将电影标题作为它们的值。但是，我在如何处理我的 else 语句时遇到问题。我相信我需要附加已经在二进制搜索树中的那个词，让我们说“A”，因为它出现很多并将其附加到电影标题的另一个值，以便一个键附加到多个值。

我不知道该怎么做，这就是我的 Read 函数中 else 语句的位置。任何帮助将不胜感激。

谢谢

树节点：

```
class TreeNode:
   def __init__(self,key,val,left=None,right=None,
                                       parent=None):
      self.key = key
      self.payload = val
      self.leftChild = left
      self.rightChild = right
      self.parent = parent

   def hasLeftChild(self):
      return self.leftChild

   def hasRightChild(self):
      return self.rightChild

   def isLeftChild(self):
      return self.parent and \
             self.parent.leftChild == self

   def isRightChild(self):
      return self.parent and \
             self.parent.rightChild == self

   def isRoot(self):
      return not self.parent

   def isLeaf(self):
      return not (self.rightChild or self.leftChild)

   def hasAnyChildren(self):
      return self.rightChild or self.leftChild

   def hasBothChildren(self):
      return self.rightChild and self.leftChild

   def replaceNodeData(self,key,value,lc,rc):
      self.key = key
      self.payload = value
      self.leftChild = lc
      self.rightChild = rc
      if self.hasLeftChild():
          self.leftChild.parent = self
      if self.hasRightChild():
          self.rightChild.parent = self

   def __iter__(self):

      if self:
         if self.hasLeftChild():
              for elem in self.leftChild:
                 yield elem
         yield self.key
         if self.hasRightChild():
              for elem in self.rightChild:
                 yield elem

   def findSuccessor(self):
      succ = None
      if self.hasRightChild():
          succ = self.rightChild.findMin()
      else:
          if self.parent:
              if self.isLeftChild():
                  succ = self.parent
              else:
                  self.parent.rightChild = None
                  succ = self.parent.findSuccessor()
                  self.parent.rightChild = self
      return succ

   def findMin(self):
      current = self
      while current.hasLeftChild():
          current = current.leftChild
      return current

   def spliceOut(self):
      if self.isLeaf():
         if self.isLeftChild():
            self.parent.leftChild = None
         else:
            self.parent.rightChild = None
      elif self.hasAnyChildren():
         if self.hasLeftChild():
            if self.isLeftChild():
               self.parent.leftChild = self.leftChild
            else:
               self.parent.rightChild = self.leftChild
            self.leftChild.parent = self.parent
         else:
            if self.isLeftChild():
               self.parent.leftChild = self.rightChild
            else:
               self.parent.rightChild = self.rightChild
            self.rightChild.parent = self.parent 
```

二叉搜索树：

```
from tree_node import TreeNode

class BinarySearchTree:

    def __init__(self):
        self.root = None
        self.size = 0

    def length(self):
        return self.size

    def __len__(self):
        return self.size

    def __iter__(self):
        return self.root.__iter__()

    def __str__(self):
        """Returns a string representation of the tree
           rotated 90 degrees counter-clockwise"""

        def strHelper(root, level):
            resultStr = ""
            if root:
                resultStr += strHelper(root.rightChild, level+1)
                resultStr += "| " * level
                resultStr += str(root.key) + "\n"
                resultStr += strHelper(root.leftChild, level+1)                
            return resultStr

        return strHelper(self.root, 0)

    def __contains__(self,key):
        if self._get(key,self.root):
            return True
        else:
            return False

    def get(self,key):
        if self.root:
            res = self._get(key,self.root)
            if res:
                return res.payload
            else:
                return None
        else:
            return None

    def _get(self,key,currentNode):
        if not currentNode:
            return None
        elif currentNode.key == key:
            return currentNode
        elif key < currentNode.key:
            return self._get(key,currentNode.leftChild)
        else:
            return self._get(key,currentNode.rightChild)

    def __getitem__(self,key):
        return self.get(key) 

    def __setitem__(self,k,v):
        self.put(k,v)

    def put(self,key,val):
        if self.root:
            self._put(key,val,self.root)
        else:
            self.root = TreeNode(key,val)
        self.size = self.size + 1

    def _put(self,key,val,currentNode):
        if key < currentNode.key:
            if currentNode.hasLeftChild():
                self._put(key,val,currentNode.leftChild)
            else:
                currentNode.leftChild = TreeNode(key,val,
                                          parent=currentNode)
        else:
            if currentNode.hasRightChild():
                self._put(key,val,currentNode.rightChild)
            else:
                currentNode.rightChild = TreeNode(key,val,
                                          parent=currentNode)

    def delete(self,key):
      if self.size > 1:
          nodeToRemove = self._get(key,self.root)
          if nodeToRemove:
              self.remove(nodeToRemove)
              self.size = self.size-1
          else:
              raise KeyError('Error, key not in tree')
      elif self.size == 1 and self.root.key == key:
          self.root = None
          self.size = self.size - 1
      else:
          raise KeyError('Error, key not in tree')

    def __delitem__(self,key):
        self.delete(key)

    def remove(self,currentNode):
      if currentNode.isLeaf(): #leaf
        if currentNode == currentNode.parent.leftChild:
            currentNode.parent.leftChild = None
        else:
            currentNode.parent.rightChild = None
      elif currentNode.hasBothChildren(): #interior
        succ = currentNode.findSuccessor()
        succ.spliceOut()
        currentNode.key = succ.key
        currentNode.payload = succ.payload

      else: # this node has one child
        if currentNode.hasLeftChild():
          if currentNode.isLeftChild():
              currentNode.leftChild.parent = currentNode.parent
              currentNode.parent.leftChild = currentNode.leftChild
          elif currentNode.isRightChild():
              currentNode.leftChild.parent = currentNode.parent
              currentNode.parent.rightChild = currentNode.leftChild
          else:
              currentNode.replaceNodeData(currentNode.leftChild.key,
                                 currentNode.leftChild.payload,
                                 currentNode.leftChild.leftChild,
                                 currentNode.leftChild.rightChild)

        else:
          if currentNode.isLeftChild():
              currentNode.rightChild.parent = currentNode.parent
              currentNode.parent.leftChild = currentNode.rightChild
          elif currentNode.isRightChild():
              currentNode.rightChild.parent = currentNode.parent
              currentNode.parent.rightChild = currentNode.rightChild
          else:
              currentNode.replaceNodeData(currentNode.rightChild.key,
                                 currentNode.rightChild.payload,
                                 currentNode.rightChild.leftChild,
                                 currentNode.rightChild.rightChild)

def main():
    t = BinarySearchTree()
    t.put(5,5)
    t.put(3,3)
    t.put(8,8)
    t.put(10, 10)
    t.put(7,7)
    print(t)

    return t

if __name__ == "__main__": t = main() 
```

我需要帮助的代码：

```
from binary_search_tree import BinarySearchTree
from tree_node import TreeNode

MovieTree = BinarySearchTree()
MovieList = []

def Read(filename):
    file = open('movieData.txt')
    for line in file:
        line = line.strip()
        words = line.lower().split(' ')
        for word in words:
            if word not in MovieTree:
                MovieTree.put(word, [line])
            else:
                pass
                #attach word that is already in BST to another value
                # which is this case is a movie title.

def Main():
    Read('movieData.txt')
    #print(MovieTree)
    #print (MovieList)

Main() 
```

如果需要，这里是我正在阅读的一个小样本：

```
A Bad Day <2006>
A Baleia Branca - Uma Ideia de Deus <2007>
A Batalha das Flores no Campo Grande <1907>
A Bear Named Winnie <2004>
A Beautiful Daze <2008>
A Beautiful Mind <2001>
A Bell for Adano <1945>
A Better Place <1997>
A Big Hand for Sooty <1998>
A Big Hand for the Little Lady <1966>
A Big Mistake! <2009>
A Bill of Divorcement <1932> <1940>
A Bird in a Bonnet <1958>
A Bird in a Guilty Cage <1952>
A Bird in the Head <1946>
A Bit of Scarlet <1997>
A Black Widow <2009>
A Blind Bargain <1922>
A Blue Collapse <2008>
A Blue Note <2009> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:20:29.820

如果我正确理解要求，我认为您想要`MovieTree.get(word).append(line)`

get(word) 部分返回与该词关联的标题列表（即来自二叉搜索树中匹配词的有效负载），并且 .append(line) 将 line 添加到列表的末尾。

# actionscript-3 - AIR中混合渐变边缘的奇怪伪影

> ID：13522327
> 
> 赞同：1
> 
> 时间：2012-11-23T02:11:39.843
> 
> 标签：actionscript-3, air, gradient, mask, bitmapdata

**更新**似乎任何混合模式都会发生这种情况 - 不仅仅是擦除

我一直在为我在 Adob​​e AIR 中的一个游戏开发一个粗略的光照引擎，用纯 AS3 编写。它的工作原理是有一个屏幕大小的位图数据，并且在每一帧的开始它被设置为一个黑色透明矩形。在这一步中，可以从位图数据中减去一些东西，然后当它在屏幕上绘制时，这些区域会显得更亮。

设置好了，一切都很顺利。目前我正在处理来自光源的基本径向渐变，并且设置它非常容易

```
_circ.graphics.lineStyle();
_circ.graphics.beginGradientFill(GradientType.RADIAL, [0x000000, 0x000000], [.9, 0], [0, 255]);
_circ.graphics.drawCircle(0, 0, 100);
_circ.graphics.endFill() 
```

然后将其绘制（嗯，反绘制）到位图数据上，我只是这样做

```
FP.matrix.identity();
FP.matrix.tx = x + 30;
FP.matrix.ty = y + 5;
WorldGame.darkBit.draw(_circ, FP.matrix, null, BlendMode.ERASE, null, true);
FP.matrix.identity(); 
```

`FP.matrix`只是一个通用的全局矩阵（我正在使用 Flashpunk）。现在这几乎可以工作了，除了一个小问题。

![坏事](../Images/162947ba3e7042ee44040c6ce0f04cdc.png)

如果您仔细观察，您将能够看到渐变周围有一条非常细的黑线，这非常令人沮丧。我不知道是什么原因造成的——我试着让渐变比圆圈更小，我试着让它变成线性的，试着让它变成不同的颜色。它不会在混合模式上发生`ERASE`，据我所知，它也不会发生在非渐变上（仍在擦除）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:23:21.033

[在 Flash AS3 中使用 BlendMode“擦除”时的奇怪行为](https://stackoverflow.com/questions/9840936/strange-behaviour-when-using-blendmode-erase-in-flash-as3)

不知何故，我在之前的搜索中错过了这个，猜我没有使用正确的关键字。解决方案只是在用作“橡皮擦”的精灵上将位图缓存设置为 true。例如：

```
_circ.cacheAsBitmap = true; 
```

这就是它的全部！

# javascript - 在 openlayers 中更新/调整弹出框云

> ID：13522328
> 
> 赞同：2
> 
> 时间：2012-11-23T02:11:41.500
> 
> 标签：javascript, dictionary, openlayers

我已经处理这个问题将近三天了，所以我想我失败的研究和对我提出的概念的反复试验就足够了。这是场景：

我使用开放图层地图。我生成标记。在悬停这些标记时，我需要使用弹出框对话框显示标签“查看详细信息”。单击“查看详细信息”后，我需要加载 jpg 文件，该文件是与地图中的标记相对应的特定位置的顶视图屏幕截图。我可以成功，我点击“查看详细信息”，我可以显示图像。但最大的问题是，我的弹出框云的四个边缘分散在周围，其内容是透明的，图像漂浮在中间。

我为视图详细信息标签附加了一个内联“onclick 属性”：

```
fromImage = '<img src="'+data['map_locations'][key]['image_url']+'" class="ImageFrom"></img><label type="button" class="location_image_container" onclick="show_location_details()">VIEW DETAILS</label>'; 
```

这是每次单击查看详细信息时调用的函数

```
function show_location_details(){
    jQuery('#cloud_dialog_details_link').hide();
    jQuery('.olFramedCloudPopupContent').width(500);
    jQuery('.olFramedCloudPopupContent').height(400);
    jQuery('.olPopup').height(400);
    jQuery('.olPopup').width(500);
    jQuery(".ImageFrom").show();
} 
```

知道如何让我的弹出框云按照我希望的方式运行吗？

谢谢你们的任何意见。

[编辑]嗨。为了清楚起见，我在脚本中声明了一个全局“AutoSizeFramedCloud”

```
AutoSizeFramedCloud = OpenLayers.Class(OpenLayers.Popup.FramedCloud,{'autosize':true}); 
```

在一个函数内部，我设置了它的初始构造函数：

```
function addMarkers(lonlat, marker_name, description, id, label, subgroup, category){
        var ll,popupClass,popupContentHTML,marker,popupContentDiv;
        ll = lonlat;
        popupClass = AutoSizeFramedCloud;
        popupContentHTML = description+label;
        marker = marker_name;
        popupContentDiv = id;
        popupGroupDiv = subgroup;
} 
```

当我点击弹出窗口中的“查看详细信息”标签时：

```
<label type="button" class="location_image_container" onclick="show_location_details()">VIEW DETAILS</label> 
```

我正在调用函数 show_location_details()

```
function show_location_details(){
        this.popup.setSize(new OpenLayers.Size(500, 400));
        //alert(jQuery('popup.contentDiv').val());
        jQuery('#cloud_dialog_details_link').hide();
        jQuery('.olPopup').width(600);
        jQuery('.olFramedCloudPopupContent').width(480);
        jQuery('.olPopup').height(500);
        jQuery('.olFramedCloudPopupContent').height(380);
        jQuery(".ImageFrom").show();
    } 
```

但是，它给了我错误：

```
Uncaught TypeError: Cannot call method 'setSize' of undefined 
```

[编辑]

这是我如何创建弹出窗口的功能

```
function addMarker(ll, popupClass, popupContentHTML, closeBox, overflow, marker_name, popupContentDiv, popupGroupDiv, category){
        var feature = new OpenLayers.Feature(marker_name, ll);
        feature.closeBox = closeBox;
        feature.popupClass = popupClass;
        feature.data.popupContentHTML = popupContentHTML;
        //feature.data.overflow = (overflow) ? "auto":"hidden";
        feature.data.icon = new OpenLayers.Icon("./img/icon/blank.png", size);
        feature.data.contentDiv = popupContentDiv;
        feature.data.groupDiv = popupGroupDiv;

...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:17:25.000

Popup 是由许多不同的 DIV 组成的，不要试图直接改变它们的大小，而是使用适当的 popup 方法：setSize(contentSize)，它以大小为参数；或 updateSize()，它会自动调整弹出窗口的大小以适应其内容：[http ://dev.openlayers.org/docs/files/OpenLayers/Popup-js.html#OpenLayers.Popup.setSize](http://dev.openlayers.org/docs/files/OpenLayers/Popup-js.html#OpenLayers.Popup.setSize)

```
var myPopup = new OpenLayers.Popup.FramedCloud({
...    

myPopup.setSize(new OpenLayers.Size(500, 400));
// Or...
// myPopup.updateSize(); 
```

# asp.net-mvc - MVC：动态填充 html 选择

> ID：13522330
> 
> 赞同：1
> 
> 时间：2012-11-23T02:11:49.270
> 
> 标签：asp.net-mvc, html.dropdownlistfor, html-select

我有一个为视图中的每一行生成的字段，如下所示：

```
@Html.DropDownListFor(m => m.MenuParentKey, ViewBag.MenuKeys as SelectList) 
```

但是我希望通过在控制器中调用一个动作来分别为每一行填充下拉列表，这就是我的意思：

```
public ActionResult GetMenuKeys(string currentMenuKey)
{
  var dictionary = MenuKeys.Where(mk => mk.Key != currentMenuKey);

  return View(new SelectList(dictionary,
      "Key",
      "Value",
      Page.DefaultParentKey));
} 
```

`currentMenuKey`应该根据当前行提供，我希望从下拉列表中排除当前行的值（注意它是*父键*属性）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:46:06.103

您可以创建一个返回 a 的 Helper `SelectList`。

这将允许您直接从您的视图中调用它，您还可以根据需要传递参数。

我认为这比在控制器上调用操作更容易。

从我在这里看到的，控制器操作不会获取列表以外的任何其他资源。

你可以用这样的东西：

```
public static SelectList FilteredList( this HtmlHelper helper, MenuKeys keys, string CurrentMenuKey)
{
var dictionary = MenuKeys.Where(mk => mk.Key != currentMenuKey);

  return new SelectList(dictionary,
      "Key",
      "Value",
      Page.DefaultParentKey);
} 
```

然后你可以这样称呼它：

```
@Html.DropDownListFor(m => m.MenuParentKey, Html.FilteredList(ViewBag.MenuKeys as SelectList, m.currentKey)) 
```

# jquery - jQuery获取多个列表中特定列表的长度

> ID：13522332
> 
> 赞同：0
> 
> 时间：2012-11-23T02:12:17.527
> 
> 标签：jquery

我有多个元素作为兄弟姐妹。

我将如何获得 jQuery 中第二个的长度？

我试过了

```
$("#secondary_menu ul")[1].find("li").length() 
```

和

```
$("#secondary_menu ul").get(1).find("li").size() 
```

但没有骰子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:17:59.340

你必须使用`.eq()`.

`.get()`括号表示法用于从 jQuery 对象访问 DOM 对象：

```
 $("#secondary_menu ul").eq(1).find("li").length 
```

# javascript - 如何将 'id' 属性添加到由 jQuery Autocomplete 小部件生成的 HTML 'ul' 标记？

> ID：13522333
> 
> 赞同：0
> 
> 时间：2012-11-23T02:12:27.353
> 
> 标签：javascript, jquery, html, jquery-ui, autocomplete

我正在使用[jQuery Autocomplete](http://jqueryui.com/autocomplete)小部件，我想将一个属性添加到由上述小部件生成`id`的 HTML标记中。`ul`也就是说，我想将代码从

```
<ul class="ui-autocomplete ..." role="..." style="...">...</ul> 
```

至

```
<ul id="my_custom_id" class="ui-autocomplete ..." role="..." style="...">...</ul> 
```

我怎样才能以一种简单而正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:52:00.080

**尝试这个：**

```
$("ul.ui-autocomplete").attr("id", "my_custom_id");
var id = $("ul.ui-autocomplete").attr("id");
alert(id); 
```

# math - 将游戏的 x,y 坐标转换为 Google 地球纬度/经度

> ID：13522334
> 
> 赞同：1
> 
> 时间：2012-11-23T02:12:28.783
> 
> 标签：math, geolocation, gis, geospatial

我正在尝试将游戏地球地图中的坐标转换为 Google 地球的 kml 文件中的值。游戏中的地球是这样表示的：

地图平坦，宽度为 43,200,000m（X 从 -21,600,000 到 21,600,000），高度为 21,600,000m（Y 从 -10,800,000 到 10,800,000）

度数之间的距离始终相同：长度为 120,000 m。

如何将此地图上的 X 、 Y 坐标转换为 Google 地球格式的十进制纬度/经度？

我尝试使用这些公式：

```
 LON = (360/map width) * X   
 LAT = (180/map height) * Y 
```

但坐标总是相差几百米。一定有什么我错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:52:39.633

您需要确切地知道，您的[投影](http://en.wikipedia.org/wiki/Map_projections)是什么。它看起来像一个圆柱形。（希望，您的数据是 WGS84）。[Google 地球](http://support.google.com/earth/bin/answer.py?hl=en&answer=148110)使用WGS84 地理坐标。然后，您可以找到并使用正确的逆方程从您的投影坐标转到地理坐标。

也许你可以[在这里](http://kartoweb.itc.nl/geometrics/coordinate%20transformations/coordtrans.html)和[这里](http://kartoweb.itc.nl/geometrics/Map%20projections/mappro.html)找到有用的东西。

# asp.net - 更新表单保持原始值

> ID：13522335
> 
> 赞同：0
> 
> 时间：2012-11-23T02:12:37.073
> 
> 标签：asp.net

我有一个表格，里面填满了从数据库中检索到的值。该表单有一个提交按钮，一旦单击，该按钮应更新数据库中的相应字段。

问题是无论我做什么，数据库中的值都不会更新。我正在使用存储过程并检查了两次，它工作正常，我也尝试了硬编码插入值的技巧 - 也有效。

我的猜测是，一旦从 Page_Load 上的数据库中填充了该字段，即使我更改它，它的值也会保持不变。如何克服这个问题，以便我可以使用相同的表单来检索和更新数据？

```
 protected void Page_Load(object sender, EventArgs e)
    {
        lblMsg.Visible = false;

        string bookingid = Request.QueryString["bookingid"];
        Booking b = BookingAccess.GetBooking(Int32.Parse(bookingid));
        if (b != null)
        {
            var start_date_formatted = ((DateTime)b.StartDate).ToString("dd-MM-yyyy");
            var end_date_formatted = ((DateTime)b.EndDate).ToString("dd-MM-yyyy");

            pet_name.Text = b.PetName;
            species.Text = b.Species;
            start_date.Text = start_date_formatted;
            end_date.Text = end_date_formatted;
        }

    }

    protected void btnEditBooking_Click(object sender, EventArgs e)
    {
        string bookingid_raw = Request.QueryString["bookingid"];
        int bookingid = int.Parse(bookingid_raw);

        var start_date_formatted = DateTime.ParseExact(start_date.Text, "dd-MM-yyyy", null);
        var end_date_formatted = DateTime.ParseExact(end_date.Text, "dd-MM-yyyy", null);

        string pet_name = "a";
        string species = "b";
        lblMsg.Visible = true;
        string msg = BookingAccess.UpdateBooking(bookingid, pet_name, species, start_date_formatted, end_date_formatted);
        if (msg == null)
            lblMsg.Text = "Updated booking details successfully!";
        else
            lblMsg.Text = "Error -> " + msg;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:19:09.043

如果您在`Page_Load`函数中加载了数据，请确保您正在检查`IsPostBack`以确保您在用户提交页面时不会重置数据。

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        // Load the data from database
    } else {
        // Validate the data and save to database
    }
} 
```

# php - if 语句不起作用（PHP）

> ID：13522337
> 
> 赞同：-1
> 
> 时间：2012-11-23T02:12:53.730
> 
> 标签：php, if-statement

此`if`语句会混合固定作业和不应返回的其他结果。无法弄清楚为什么这么简单的事情不起作用。

```
if($item["total_spent"] >= '1000' 
    && ($item["country"] == 'United States' || $item["country"] == 'Canada')
    && ($item["job_duration"] == '3 to 6 months' || $item["job_duration"] = 'More than 6 months') 
    && ($item["job_engagement"] == 'Full-time - 30+ hrs/week' || $item["job_engagement"] = 'Part-time - 10-30 hrs/week') 
    && ($item["job_type"] == 'Hourly') ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:15:15.410

也许，你的意思是这样的：

```
if($item["total_spent"] >= '1000' 
        && ($item["country"] == 'United States' || $item["country"] == 'Canada')
        && ($item["job_duration"] == '3 to 6 months' || $item["job_duration"] == 'More than 6 months') 
        && ($item["job_engagement"] == 'Full-time - 30+ hrs/week' || $item["job_engagement"] == 'Part-time - 10-30 hrs/week') 
        && ($item["job_type"] == 'Hourly') ) 
```

`=`注意在某些 where 子句中使用 single

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T02:16:54.720

看起来您在代码中有几个意外分配，以下是否有效？

```
<?php
if($item["total_spent"] >= '1000' 
            && ($item["country"] == 'United States' || $item["country"] == 'Canada')
            && ($item["job_duration"] == '3 to 6 months' || $item["job_duration"] == 'More than 6 months') 
            && ($item["job_engagement"] == 'Full-time - 30+ hrs/week' || $item["job_engagement"] == 'Part-time - 10-30 hrs/week') 
            && ($item["job_type"] == 'Hourly')
) {
    // ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T02:17:50.540

```
$item["job_engagement"] = 'Part-time - 10-30 hrs/week'
$item["job_duration"] = 'More than 6 months' 
```

这些行的编写就像您在分配值一样，它们应该是：

```
$item["job_engagement"] == 'Part-time - 10-30 hrs/week'
$item["job_duration"] == 'More than 6 months' 
```

# linux - 零填充和排序 - Linux Shell 脚本

> ID：13522338
> 
> 赞同：1
> 
> 时间：2012-11-23T02:13:07.667
> 
> 标签：linux, sorting, text-files, zero-pad

我正在尝试在 Linux 中进行一些文本文件操作。

我有一个名为 names.txt 的文件，如下所示：

```
A1
X12
B4
Y5
C10
Z23
B8
C3
Z6 
```

我需要它看起来像这样：

```
A01
B04
B08
C03
C10
X12
Y05
Z06
Z23 
```

目标：我需要对单个数字进行零填充，然后按字母顺序排列结果，并保存到文件 sorted_names.txt

我在想我需要先计算每行的字符数，如果字符数小于 2，则添加一个零。最后，我需要按字母顺序排序。

对于初学者，我想我这样做是为了计算每行的字符数：

```
cat names.txt | while read line
do

  count=$(echo $line | wc -c)
  echo $line $count

done 
```

然后我的想法是循环计数：

```
for COUNT in $count
if [( $COUNT = "3" )];
then
    echo doZeroPadHere
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:18:42.573

仅使用内置的 Bash 功能对您来说很重要吗？因为它似乎更容易使用`sed`并且`sort`：

```
<names.txt sed 's/^\([A-Z]\)\([0-9]\)$/\10\2/' | sort >sorted_names.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:18:30.563

这是仅使用 Bash 和的解决方案`sort`：

```
while read line
do 
    printf "%s%02d\n" ${line:0:1} ${line:1}
done <names.txt | sort >sorted.txt 
```

这将从 中[读取](http://www.gnu.org/software/bash/manual/bashref.html#index-read)行`names.txt`，并将[每行拆分](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Parameter-Expansion)为其第一个字符 ( `${line:0:1}`) 和第一个字符之后的行的其余部分 ( `${line:1}`)。它使用[`printf`](http://www.gnu.org/software/bash/manual/bashref.html#index-printf)（[更多详细信息](http://www.daemon-systems.org/man/printf.1.html)）逐字打印第一个字符，并将该行的其余部分作为 0 填充数字。它将其输入从重定向`names.txt`（避免[无用的使用`cat`](http://partmaps.org/era/unix/award.html#uucaletter)），将输出通过管道传输到[`sort`](http://www.manpages.info/freebsd/sort.1.html)，并将其重定向到`sorted.txt`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:29:40.687

`awk`这是使用and的一种方法`sort`：

```
awk '{ printf "%s%02d\n", substr($0,0,1), substr($0,2) | "sort" }' file 
```

结果：

```
A01
B04
B08
C03
C10
X12
Y05
Z06
Z23 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:34:37.450

这是一种 Perl 方法：

`perl -lpe's/^([A-Z])(\d)$/${1}0$2/' names.txt`

对于每一行，如果它完全匹配一个字母和一个数字，请将其更改为字母、零和数字。然后打印。

# liferay - 在速度 Liferay 中解码 html 编码字符

> ID：13522339
> 
> 赞同：0
> 
> 时间：2012-11-23T02:13:27.213
> 
> 标签：liferay, decode, velocity, utf8-decode, liferay-velocity

作为标题，我有一个从我的 URL 获得的编码字符串，我想向用户显示但不知道如何解码它

T%E1%BB%87p t%E1%BA%A3i l%C3%AAn => Tệp tải lên

我正在使用 liferay 6.1 ga1，并尝试创建一些 web 内容模板。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:06:11.160

您可以尝试使用 httpUtil，它应该在速度上下文中可用。

```
$httpUtil.decodeURL("T%E1%BB%87p t%E1%BA%A3i l%C3%AAn") 
```

会让你`Tệp tải lên`

# java - 在 Java 中挂钩？

> ID：13522341
> 
> 赞同：0
> 
> 时间：2012-11-23T02:13:47.667
> 
> 标签：java, profiling, hook

钩子是一个运行以从其他（[更多信息](http://en.wikipedia.org/wiki/Hooking)）获取数据的进程。我想使用任何应用程序访问网络来获取方法或功能，这些方法通常是`WSAConnect()`、`WSASendTo()`、`bind()`和[这些是需要访问应用程序的方法]。`connect()``sendto()`

我开始测试，创建Runtime [Runtime.getRuntime()。exec (...)] 与所有可能的方法 [addShutdownHook (...);] 现在我正在尝试 ProcessBuilder [new ProcessBuilder (...);] 和著名的 BufferedReader [new BufferedReader (new InputStreamReader (proceso .getInputStream ()));] 但我找不到办法。

我的主要要求是如何获取（拦截）功能：WSAConnect ()、WSASendTo ()、bind ()、connect () 和 sendto ()，它们生成通过网络进行通信的程序。[使用 Java - 挂钩]

编辑：¿如何挂钩库 ws2_32.dll [ Windows OS 这包含我需要的功能]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:18:27.230

这与java的设计背道而驰。

但是尝试查看`AspectJ`哪些修改了编译的类文件以允许某种挂钩。

# winapi - 如何获取当前 C 程序的父窗口的句柄？

> ID：13522349
> 
> 赞同：1
> 
> 时间：2012-11-23T02:15:18.303
> 
> 标签：winapi

我的确切问题是：如何获取与调用进程关联的控制台的 cmd.exe DOS 窗口的句柄？我需要从用 C 语言编写的控制台应用程序中使用它，该程序从命令行执行，该程序可能在不同的控制台 Windows 中具有自身的多个活动副本（通过 START 命令执行）。

我多次查看 Win32 API 文档。我尝试使用 GetActiveWindow 并不起作用。我知道 EnumWindows 可以用于此，但如果有多个具有相同标题的活动窗口（顺便说一句，更改窗口标题不是一种选择），则此方法会失败。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:09:04.923

您正在寻找[GetConsoleWindow()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175.aspx)函数。

# python - unittest 将变量作为参数传递

> ID：13522351
> 
> 赞同：1
> 
> 时间：2012-11-23T02:16:42.773
> 
> 标签：python, unit-testing

我有一个在一个函数中创建并传递给其他函数的数据结构。我正在尝试对所有这些功能进行单元测试。

我是否需要在每个函数中重新创建该数据结构（环境）？我尝试使用全局变量，但我不能保证哪个测试用例将在另一个之前运行。

我知道如果没有太多的头痛`__init__`，我就无法超越。`unittest.TestCase`

我还能如何做到这一点？传递参数或以某种方式使其成为变量并避免竞争条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:22:21.553

听起来您不想在每次测试之前重新定义数据结构。只要测试不修改数据，我认为定义数据结构没有任何问题`__init__`：

```
import unittest

class Test(unittest.TestCase):
    def __init__(self, methodName = 'runTest'):
        unittest.TestCase.__init__(self, methodName)
        self.data = range(5)

    def test_getitem(self):
        self.assertEqual(self.data[1],1)

    def test_reversed(self):
        self.assertEqual(list(reversed(self.data)),[4,3,2,1,0])

if __name__ == '__main__':
    import sys
    sys.argv.insert(1,'--verbose')
    unittest.main(argv = sys.argv) 
```

产量

```
% test.py
test_getitem (__main__.Test) ... ok
test_reversed (__main__.Test) ... ok

----------------------------------------------------------------------
Ran 2 tests in 0.000s

OK 
```

# ruby-on-rails - 如果条件正确，我有 10 个要更新的属性，我该怎么做？

> ID：13522355
> 
> 赞同：0
> 
> 时间：2012-11-23T02:17:24.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设我的`Client`模型上有一组属性，如下所示：

```
#  firm_size                 :float
#  priority_level            :float
#  inflection_point          :float
#  personal_priority         :float
#  sales_priority            :float
#  sales_team_priority       :float
#  days_since_contact        :float
#  does_client_vote          :float
#  did_client_vote_for_us    :float
#  days_until_next_vote      :float
#  does_client_vote_ii       :float
#  did_client_vote_ii_for_us :float
#  days_until_vote_ii        :float 
```

我需要像这样检查每个属性：

```
max = Max.find_or_create_by_user_id(:user_id => current_user.id)

if client.firm.size > max.firm_size
    max.firm_size = client.firm.size
end

if client.inflection_point > max.inflection_point
    max.inflection_point = client.inflection_point
end 
```

其余的属性依此类推，但这对我来说似乎很不干燥。

我如何以优雅的方式做到这一点，而不必`if statements`为所有属性输入 10 亿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:30:32.657

如果将所有属性放在一个数组中，则可以对其进行迭代并使用一些元编程，只需编写一次逻辑：

```
good_attrs = %w(firm_size priority_level ...)

good_attrs.each do |attr|
  if client.send(attr) > max.send(attr)
    max.send("#{attr}=", client.send(attr)
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T02:30:56.527

你可以使用这样的东西（不确定我是否理解你的对象正确）

```
[ :firm_size, :priority_level, :inflection_point, ... ].each do |attr|
  if client[attr] > max[attr]
    max[attr] = client[attr]
  end
end 
```

差不多一样...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T02:31:01.750

这个怎么样：

```
Client.column_names.each do |attr_name|
  if (client_val = client.send(attr_name)) > max.send(attr_name)
    max.write_attribute(attr_name, client_val) 
  end
end 
```

我在这里假设您想要遍历模型的*所有*属性`Client`，但从上面的评论线程来看，情况似乎并非如此。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T02:32:59.613

首先，我会在`client.rb`您想要用于此类比较的属性模型中创建一个白名单方法。

```
def self.comparable_attrs
  %w(firm_size priority_level inflection_point personal_priority ...)
end 
```

`send()`然后，您可以使用该方法遍历所有 good_attrs 。

```
Client.comparable_attrs.each do |attr|
  if client.send(attr) > max.send(attr)
    max.send("#{attr}=", client.send(attr))
  end
end 
```

# java - Nim 游戏 - 指定获胜者

> ID：13522359
> 
> 赞同：5
> 
> 时间：2012-11-23T02:18:05.613
> 
> 标签：java

```
import java.util.Scanner;
/**
 *@author Andy 
 *@verison 21.11.2012
 */
public class NimGame
{
public static void main (String[] args)
{
    System.out.println ("**********      Hello Welcome to the game Nim           *********");
    System.out.println ("               The game is relatively simple....        ");
    System.out.println ("               This is a game for two players.          "); 
    System.out.println ("            There is a heap containing 10 to 20 stones.");
    System.out.println ("           Players take turns to remove 1-4 stones     "); 
    System.out.println ("           The player who removes the last stone wins. ");
    System.out.println ("******************************************************************");

    Scanner scan = new Scanner (System.in);
    int heapSize = 15;
    int stones = 0;
    boolean nextInteger = false;
    boolean lessThanFour = false;
    String player1 = "Player 1";
    String player2 = "Player 2";
    String player = player1;

    System.out.println ("The number of stones currently in the heap is :- " + heapSize);
    System.out.println();

    while (heapSize > 0)
    {

        nextInteger = false;
        lessThanFour = false;
        System.out.println (player + ":" + "how many stones will you take from the heap?");
        System.out.println();
        while (nextInteger == false && lessThanFour == false)
        {

            if (scan.hasNextInt())
            {
                nextInteger = true;
                stones = scan.nextInt();

                if (stones <=4 && stones >0)
                {
                    System.out.println();
                    System.out.println ("You picked " + stones);
                    heapSize = (heapSize - stones);
                    if (heapSize >= 0)
                    {
                    System.out.println();
                    System.out.println ("There are " + heapSize + "stones left");  
                    System.out.println();
                    lessThanFour = true;
                    System.out.println();
                    if (player.equals(player1))
                    {
                        player = player2;
                    }
                    else

                    {
                        player = player1;
                    }

                }

                else 

                {
                    System.out.println ("Bad input, please try again");
                    nextInteger = false;
                    scan.nextLine();
                }
            }

            else 

            {
                System.out.println ("Bad input, please try again");
                scan.nextLine();
            }

        }
    }
}
}
} 
```

一旦sizeheap（剩余的石头数）达到0，我不知道如何实施一种方法来指定玩家1或玩家2为赢家。任何帮助将不胜感激。此外，当 sizeheap 达到负数时，它会显示“错误输入”，但之后插入的任何其他数字也会显示“错误输入”。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:26:26.873

基本上，您只需要重写`if (heapSize >= 0)`，它就会显示一条获胜消息：

`if (heapSize > 0) {...} else { ...win... }`

这是关键部分，已修复、精简和编辑：

```
if (stones <= 4 && stones > 0) {
    System.out.println ("\nYou picked " + stones);
    heapSize = (heapSize - stones);

    if (heapSize > 0) {
        System.out.println ("\nThere are " + heapSize + " stones left\n\n");  

        // Could use a ternary operator here:
        // player = (player.equals(player1) ? player2 : player1);

        if (player.equals(player1)) {
            player = player2;
        }
        else {
            player = player1;
        }
    }
    else {
        if (player.equals(player1)) {
            System.out.println("Player 1 wins!");
        }
        else {
            System.out.println("Player 2 wins!");
        }       
    }
} 
```

更多提示：

*   您可以只使用换行符`\n`而不是`System.out.println()`.
*   该`lessThanFour`标志可能是不必要的

# iphone - 如何将 UIImage 和 UILabel 合并为一张图片并保存

> ID：13522366
> 
> 赞同：10
> 
> 时间：2012-11-23T02:20:12.207
> 
> 标签：iphone, ios, xcode, uiimageview, uiimage

我有 2 个 UILabel 和 2 个图像，我需要合并到一个 UIImage 中来保存。

我知道我可以用屏幕截图来做到这一点，但我的主图像是圆形的，所以如果我矫正它，它仍然会显示出锐利的边缘。

我可以这样做来组合图像：

```
//CGSize newImageSize = CGSizeMake(cropImage.frame.size.width, cropImage.frame.size.height);
CGSize newImageSize = CGSizeMake(480, 320);
NSLog(@"CGSize %@",NSStringFromCGSize(newImageSize));

UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
[self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();

NSData *imgData =  UIImageJPEGRepresentation(image, 0.9); //UIImagePNGRepresentation ( image ); // get JPEG representation
UIImage * imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation

UIGraphicsEndImageContext();
return imagePNG; 
```

但不确定如何在 UILabel 中添加。

任何回复都非常感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T02:28:21.577

用于`[myLabel.layer renderInContext:UIGraphicsGetCurrentContext()];`在当前上下文中绘制。

例如：-

```
 UIGraphicsBeginImageContextWithOptions(newImageSize, NO, 0.0); //retina res
    [self.viewForImg.layer renderInContext:UIGraphicsGetCurrentContext()];
    [myLabel.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext(); 
```

根据您的评论，如果您想在特定框架中绘制它，请执行以下操作，

```
[myLabel drawTextInRect:CGRectMake(0.0f, 0.0f, 100.0f, 50.0f)]; 
```

如果你想给背景上色，试试这个，

```
CGRect drawRect = CGRectMake(rect.origin.x, rect.origin.y,rect.size.width, rect.size.height); 
CGContextSetRGBFillColor(context, 100.0f/255.0f, 100.0f/255.0f, 100.0f/255.0f, 1.0f); 
CGContextFillRect(context, drawRect); 
```

或者你可以检查这个问题[Setting A CGContext Transparent Background](https://stackoverflow.com/questions/2125543/setting-a-cgcontext-transparent-background)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T15:07:16.703

```
UIEdgeInsets insets = UIEdgeInsetsMake(1, 1, 1, 1);
CGSize imageSizeWithBorder = CGSizeMake(view.frame.size.width + insets.left + insets.right, view.frame.size.height + insets.top + insets.bottom);
UIGraphicsBeginImageContextWithOptions(imageSizeWithBorder, UIEdgeInsetsEqualToEdgeInsets(insets, UIEdgeInsetsZero), 0);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextClipToRect(context, (CGRect){{insets.left, insets.top}, view.frame.size});
CGContextTranslateCTM(context, -view.frame.origin.x + insets.left, -view.frame.origin.y + insets.top);
[view.layer renderInContext:context];
UIImage *viewCopy = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

试试这个！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T09:18:51.563

```
 UIGraphicsBeginImageContextWithOptions(newImageSize, NO, scale); //retina res
        [COGI.layer renderInContext:UIGraphicsGetCurrentContext()];
        [COGI.image drawInRect:CGRectMake(0, 0, 248, 290)];
        [iconI.image drawInRect:CGRectMake(4, 20, 240, 240)];
        [stampI.image drawInRect:CGRectMake(0, -5, 248, 290)];
        [headerL drawTextInRect:CGRectMake(14, 35, 220, 40)];
        [detailL drawTextInRect:CGRectMake(16, 200, 215, 65)];

        UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
        [[UIColor redColor] set]; 
        NSData *imgData =  UIImageJPEGRepresentation(image, 1.0); //UIImagePNGRepresentation ( image ); // get JPEG representation
        UIImage * imagePNG = [UIImage imageWithData:imgData]; // wrap UIImage around PNG representation

        UIGraphicsEndImageContext();
        return imagePNG; 
```

# python - 使用 Python 读取文本文件并排序到字典中的麻烦

> ID：13522367
> 
> 赞同：2
> 
> 时间：2012-11-23T02:20:17.707
> 
> 标签：python, dictionary, python-3.x

我在将文本文件读入 Python 时遇到问题，我正在使用循环，它在文本文件结束之前一直停止并跳过文件的第一行，我在阅读每个文件时将其排序到字典中行。我的代码是：

```
for x in file.readline():
    s=file.readline().rstrip()
    s=s.split(': ')
    if s[0]=='RootObject':
        Root=s[1]
    if s[0]=='Object':
        data[s[1]]={}
        Ob=s[1]
    elif s[0]=='Satellites':
        data[Ob][s[0]]=s[1]
    elif s[0]=='Orbital Radius':
        data[Ob][s[0]]=float(s[1])
    elif s[0]=='Period':
        data[Ob][s[0]]=float(s[1])
    elif s[0]=='Radius':
        data[Ob][s[0]]=float(s[1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:43:18.190

像这样迭代是没有意义的`file.readline()`。您应该像这样迭代这些行：

```
with open('/your/file.txt') as f:
  for line in f:
    s = line.rstrip().split(': ')
    # etc 
```

# php - PHP Mail 有时可以，其他的不行吗？

> ID：13522370
> 
> 赞同：2
> 
> 时间：2012-11-23T02:20:38.737
> 
> 标签：php, sendmail

因此，我正在为一个好友安装 Wordpress，将表单发送到他的电子邮件地址。我一直在测试邮件功能，并且..好吧，似乎在我测试了一定次数后，它就停止了工作......

我有一个

```
if( mail( ... ) )
    echo " =) things are workin out all right...";
else
    echo "fuk..."; 
```

声明检查邮件是否正在发送.. 一段时间后它停止工作。

有没有设置限制可以设置的邮件数量之类的？我只是发送了太多邮件吗？

现在..在我等了一段时间（比如一天）之后，邮件突然又开始工作了..嗯......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:54:13.567

一些主机限制了每分钟/小时/天可以发送多少消息。

* * *

为了解决这个问题，我设置了第二个 Gmail 帐户以使用[PHPMailer](http://phpmailer.worxware.com)从脚本发送消息，然后制作了这个脚本（称为`mail.php`）：

```
<?php
include_once 'phpmailer/class.phpmailer.php';
function do_mail($from, $name, $to, $subject, $message, $debug = false) {
    $blah = base64_decode('base64-encoded password here');
    $mail = new PHPMailer();
    $mail->IsSMTP();
    if($debug) $mail->SMTPDebug = 2;
    $mail->SMTPAuth = true;
    $mail->SMTPSecure = 'tls';
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 587;
    $mail->Username = 'username@gmail.com';
    $mail->Password = $blah;
    $mail->SetFrom($from, $name);
    $mail->AddAddress($to, $to);
    $mail->Subject = $subject;
    $body = $message;
    $mail->MsgHTML($body);
    $mail->AltBody = $message;
    if($mail->Send()) {
        return true;
    } else {
        return $mail->ErrorInfo;
    }
}
?> 
```

* * *

然后，发送消息：

```
<?php
include_once 'mail.php';
$result = do_mail('username@gmail.com', 'First Last', 'someone@example.com', 'Subject here', 'message here');
// Or, with debugging:
$result = do_mail('username@gmail.com', 'First Last', 'someone@example.com', 'Subject here', 'message here', true);
// Print the result
var_dump($result);
?> 
```

# visual-studio-2010 - WP7 开发在 Windows 7 和 Windows 8 上的向后兼容性

> ID：13522372
> 
> 赞同：3
> 
> 时间：2012-11-23T02:21:03.260
> 
> 标签：visual-studio-2010, windows-phone-7, windows-7, windows-8, visual-studio-2012

如果这是重复的，我深表歉意，但我无法找到答案。

我的笔记本电脑刚刚升级到 Windows 8，但我的台式机运行的是 Windows 7。我有几个处于不同开发阶段的 Windows Phone 7 应用程序。当笔记本电脑运行 Windows 7 时，我能够在任何一台机器上打开 WP7 解决方案而没有问题。

我知道 Windows Phone 7.1 SDK 与 Windows 8 存在兼容性问题，并且 Windows Phone 8 SDK 也支持 Windows Phone 7.5，但我仍然能够在两台机器上打开解决方案，还是 Windows 8 上的 Visual Studio 2012 会保存一个Visual Studio 2010 无法打开的较新解决方案格式？或者我可以在 Windows 8 上安装 7.1.1 SDK 更新并仍然在 VS 2010 中开发吗？（我知道我还需要先安装 Games for Windows Live。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:37:58.983

Windows Phone 8 SDK 支持 WP8 和 WP7.1[/5]。

您可以使用 VS2010 和 VS2012 打开相同的解决方案文件。

如果由于某种原因您无法打开相同的解决方案文件，则很容易为每个版本的 VS 制作版本。（只需复制并升级其中一个。）除非您在每个解决方案中更改项目，否则这应该不是问题。

# jquery - 容器 div 的 z-index 禁用包含的链接

> ID：13522375
> 
> 赞同：1
> 
> 时间：2012-11-23T02:21:20.953
> 
> 标签：jquery, css, z-index

# 我的问题：

我有一个父级`div`设置，`z-index:0`但作为一个不需要的副作用，父级中包含的两个链接`div`被禁用（没有悬停，没有链接操作）。

# 语境：

我正在使用图像滑块（Nivo Slider）。我必须将其设置`z-index`为`0`允许我的导航菜单正确覆盖图像滑块。`z-index`当我更改父容器的时，下一个和上一个链接不再起作用。

# 现场示例：

[http://tinyurl.com/boej3sq](http://tinyurl.com/boej3sq)

*   `div.nivoSlider`=**父容器**
*   `a.nivo-prevNav`/ `a.nivo-nextNav`=**有问题的链接**

# 我的问题：

如何修复“损坏”的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:40:28.283

简短的回答是你可以去掉父元素上的'z-index:0'。

或者，

您可以将“位置：相对”放在子元素上并根据按钮现在的外观重新设置按钮的样式。Z-index 通过 position 属性与父元素和子元素一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:12:31.780

我查看了您的实时示例，nivo-controlNav div 实际上覆盖了您的上一个和下一个链接（希望这就是您所说的）您会注意到，如果您转到下一个和上一个按钮的最顶部，您可以按他们，但如果你去按钮的中间，你不能。我要做的是在 nivo-controlNav 上设置 50% 的宽度或固定宽度，以便将右侧从链接中拉开。

替代方案：您可以增加 nivo-directionNav 上的 z-index （不是 z-indexed 所以可能是它被覆盖的原因）或链接

# dynamics-crm - 如何根据电子邮件方向更改 CRM 电子邮件活动表单

> ID：13522382
> 
> 赞同：0
> 
> 时间：2012-11-23T02:22:27.210
> 
> 标签：dynamics-crm, dynamics-crm-2011

我们正在使用 Web 界面或 Dynamics CRM。我们想根据电子邮件的方向更改电子邮件表格。

例如，如果方向是传入，重命名一些标签，可能隐藏一个字段，将实际开始显示为“已接收”等。

有没有办法在不向解决方案中添加代码的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:14:37.777

不，

您将始终必须根据您的要求添加代码。

最简单的方法是将 JavaScript 添加到表单中。[表单脚本 CRM 2011](http://crmconsultancy.wordpress.com/2010/10/19/form-scripting-in-crm-2011/) 它基本上是添加一个包含您的 JavaScript 代码的网络资源，然后将其添加到表单中。

# java - “不允许 NULL”与两个 @OneToMany 到同一个表

> ID：13522384
> 
> 赞同：1
> 
> 时间：2012-11-23T02:22:30.790
> 
> 标签：java, hibernate

我有一个如下所示的类：

```
@Entity
public class MarketSettlement extends BaseEntity {

    @OneToMany(cascade=CascadeType.ALL)
    private Set<FinancialTransaction> commissionPaid;

    @Setter @OneToMany(cascade=CascadeType.ALL)
    private Set<FinancialTransaction> dividends;
} 
```

因此，市场结算可能会产生股息，并且可能已支付佣金。

但是，结算产生股息并且*不*支付任何佣金是有效的 - 在这种情况下，`commissionPaid`集合是空的。

但是，由此生成的表需要填充*两个*集合：

```
+------------------------------+------------+------+-----+---------+-------+
| Field                        | Type       | Null | Key | Default | Extra |
+------------------------------+------------+------+-----+---------+-------+
| MarketSettlement_id          | bigint(20) | NO   | PRI | NULL    |       |
| dividends_transactionId      | bigint(20) | NO   | UNI | NULL    |       |
| commissionPaid_transactionId | bigint(20) | NO   | PRI | NULL    |       |
+------------------------------+------------+------+-----+---------+-------+ 
```

因此，当我尝试在没有任何事务的情况下保留记录时，我得到一个`DataIntegrtityViolationException:`

> org.springframework.dao.DataIntegrityViolationException: NULL 不允许列“COMMISSIONPAID_TRANSACTIONID”；

什么是正确的配置方法，允许股息交易，但不允许佣金交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T05:27:45.343

您可以使用@JoinTable 为您支付的佣金和股息部分设置单独的表格。

# php - PDO 转义和查询

> ID：13522386
> 
> 赞同：1
> 
> 时间：2012-11-23T02:23:11.520
> 
> 标签：php, mysql, pdo

我正在使用 PDO 进行查询，并尝试转义一些“&”，因为它们使请求无效。我已经尝试过使用 mysql_real_escape_string 和 pdo 引用...两者都没有逃脱“&”。我的价值观是例如“詹姆斯和杰克”。

作为连接器：

```
$this->connect = new PDO("mysql:host=$db_host;dbname=$db_name;", $db_user, $db_pass,array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")); 
```

作为查询：

```
function check_exist($query,$parameter)
{
    try
    {
    $this->connect->prepare($query);
    $this->connect->bindParam(':parameter', $parameter, PDO::PARAM_STR);
    $this->connect->execute();
    return $this->connect->fetchColumn();

        unset ($query);
    }
    catch(PDOException $e) 
    {  
        echo $e->getMessage(); 
    }

} 
```

最终行动号召

```
$db = new database;
$db->connect('framework','localhost','root','');
$result = $db->check_exist('SELECT COUNT(*) FROM cat_merge WHERE cat=:parameter',$cat); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:33:36.670

尝试以这种方式使用准备好的语句：

```
<?php
// Connect to the database
$db = new PDO('mysql:host=127.0.0.1;dbname=DB_NAME_HERE', 'username', 'password');
// Don't emulate prepared statements, use the real ones
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
// Prepare the query
$query = $db->prepare('SELECT * FROM foo WHERE id = ?');
// Execute the query
$query->execute($_GET['id']);
// Get the result as an associative array
$result = $query->fetchAll(PDO::FETCH_ASSOC);
// Output the result
print_r($result);
?> 
```

# django - django外键中的ValueError（int（）的无效文字，基数为10）

> ID：13522391
> 
> 赞同：0
> 
> 时间：2012-11-23T02:24:05.470
> 
> 标签：django

我正在使用旧数据库，并且在将一个表中的外键连接到另一个表中的主键时遇到了一些问题。如果有任何帮助，我将不胜感激。以下是模型和我的 shell+ 错误。提前致谢。

楷模：

```
class SectionMaster(models.Model):
    . . .
    crs_cde = models.ForeignKey('SectionSchedules', max_length=30, db_column=u'CRS_CDE', related_name='sm_crs_cde')
    . . .

class SectionSchedules(models.Model):
    . . .
    crs_cde = models.CharField(max_length=30, db_column=u'CRS_CDE')
    . . . 
```

错误：

```
>>> q = SectionMaster.objects.filter(trm_cde=20).filter(yr_cde=2012)
>>> q2 = SectionSchedules.objects.filter(trm_cde=20).filter(yr_cde=2012)
>>> for course in q:
...     for course2 in q2:
...         if course.crs_cde == course2.crs_cde: ## also tried course.crs_cde_id
...             print course.crs_cde, course.crs_title, course2.begin_dte
...
Traceback (most recent call last):
  File "<console>", line 3, in <module>
  File "C:\Python27\lib\site-packages\django\db\models\fields\related.py", line
350, in __get__
    rel_obj = qs.get(**params)
  File "C:\Python27\lib\site-packages\django\db\models\query.py", line 358, in g
et
    clone = self.filter(*args, **kwargs)
  File "C:\Python27\lib\site-packages\django\db\models\query.py", line 624, in f
ilter
    return self._filter_or_exclude(False, *args, **kwargs)
  File "C:\Python27\lib\site-packages\django\db\models\query.py", line 642, in _
filter_or_exclude
    clone.query.add_q(Q(*args, **kwargs))
  File "C:\Python27\lib\site-packages\django\db\models\sql\query.py", line 1250,
 in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "C:\Python27\lib\site-packages\django\db\models\sql\query.py", line 1185,
 in add_filter
    connector)
  File "C:\Python27\lib\site-packages\django\db\models\sql\where.py", line 69, i
n add
    value = obj.prepare(lookup_type, value)
  File "C:\Python27\lib\site-packages\django\db\models\sql\where.py", line 320,
in prepare
    return self.field.get_prep_lookup(lookup_type, value)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line
 972, in get_prep_lookup
    return super(IntegerField, self).get_prep_lookup(lookup_type, value)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line
 310, in get_prep_lookup
    return self.get_prep_value(value)
  File "C:\Python27\lib\site-packages\django\db\models\fields\__init__.py", line
 966, in get_prep_value
    return int(value)
ValueError: invalid literal for int() with base 10: '0BJ  226  1
   ' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T07:55:08.383

我希望您希望`to_field='crs_cde'`ForeignKey 告诉它查看目标表`crs_cde`字段的值，而不是（整数）主键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:37:09.163

检查您的列`crs_cde_id`- 它应该是数据库中的 Int 类型。但似乎你在那里有字符。

# javascript - 使用“on”功能将日期选择器添加到 html 表单

> ID：13522394
> 
> 赞同：0
> 
> 时间：2012-11-23T02:25:19.883
> 
> 标签：javascript, jquery

我正在使用 Jquery 插件来切换面板。切换面板后，我需要向输入添加日期选择器，但添加面板后需要附加插件。我想用 on() 函数来做到这一点，但我似乎无法让它工作。据我了解，您必须使用事件，但是有没有办法从添加的 div 中创建事件。我一直在尝试的代码是一个“点击”事件，这会在第一次点击时添加日期选择器，然后它将在第二次点击时工作。我需要它在第一次点击时工作。它也没有像我需要的那样添加图标。这是我现在正在使用的代码：

```
 $('#switcher-panel').on('click', 'table tr td input', function(){
    $('.datepicker').datepicker({
      buttonImage: "images/calendar.png"
    });
  }); 
```

这是切换面板的html：

```
<a id="content1" class="switcher">Rank 1</a>
<a id="content2" class="switcher">Rank 2</a>

<!-- The panel you wish to use to display the content -->
<div id="switcher-panel"></div>

<!-- The actual content you want to switch in and out of the panel, this is hidden -->
<div id="content1-content" class="switcher-content show">
</div> 
```

我将如何使用该`on`功能来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:30:40.110

`on()`不能运行像 datepicker 这样的插件。插入新的 html 后，您需要调用插件。

沿着这个简单的附加线的东西：

```
$('#someDiv').append('<input class="datpicker"/>').find('.datepicker').datepicker(); 
```

# session - 用户会话和 mysql_query

> ID：13522395
> 
> 赞同：0
> 
> 时间：2012-11-23T02:25:25.113
> 
> 标签：session

我正在尝试将用户 $_SESSION 和 mysql_query 放在一起，如果您知道我的意思，
例如： $_SESSION($dn)['account_type'] == 1
是否可以将 $_SESSION 和 $dn 放在一起或者是否存在其他方式来做到这一点？

```
<?php if(isset($_SESSION['username']) and ($_SESSION['username']==$dn['author'] or       $_SESSION($dn)['acc_type'] == 1)){ 
echo "test";
}
?> 
```

# shell - 使用 Shell 从文本文件中读取选定的行

> ID：13522398
> 
> 赞同：-1
> 
> 时间：2012-11-23T02:25:52.540
> 
> 标签：shell, sed

我写了这段代码，想从 seat.txt 中筛选出选定的行。但这似乎不起作用。请帮忙！

```
echo `sed -n "/$NUM/p" seating.txt` 
```

文件如下：

```
29;,A2,A3,A1,E2,B1,B2,C1,C3,C2,D1,D2,D3,E1,E3,A4,E4,B3,B4,C4,D4
29;,A1,A2,A3,A4,B2,E4,C3,B3,D3,D2,E1,E2,C2,B4,C4,D4,C1,D1,E3,B1
43;,A2,D4,C3,B3,A4,E4
44;,A1,D4,E2,C3,A2
44;,A1,B2,C3,D4,A4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:40:41.073

目前尚不清楚您要准确完成什么。如果您尝试打印出现的行`$NUM`，则您的代码可以正常工作：

```
NUM=29
sed -n "/^$NUM/p" file 
```

结果：

```
29;,A2,A3,A1,E2,B1,B2,C1,C3,C2,D1,D2,D3,E1,E3,A4,E4,B3,B4,C4,D4
29;,A1,A2,A3,A4,B2,E4,C3,B3,D3,D2,E1,E2,C2,B4,C4,D4,C1,D1,E3,B1 
```

如果您尝试传递行号，请尝试：

```
NUM=4
sed -n "$NUM{p}" file 
```

结果：

```
44;,A1,D4,E2,C3,A2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:13:34.730

如果您想要包含 $NUM 的行，那么它是：

```
grep "$NUM" file 
```

如果您想要在第一个分号之前正好有 $NUM 的行，它是：

```
grep "^$NUM;" file 
```

如果你想要行号 $NUM 那么它是：

```
awk -v num="$NUM" 'NR==num' file 
```

如果您想要其他内容，请告诉我们什么并发布一些预期的输出以配合您发布的示例输入。

# ruby-on-rails - Javascript 未执行（我包含了 format.js）

> ID：13522399
> 
> 赞同：0
> 
> 时间：2012-11-23T02:25:53.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将 format.js 添加到我的控制器中，但是当我查看我的索引页面时，我仍然无法让 index.js.erb 中的 js 执行。我唯一能弄清楚的是，它一定是因为型号名称。我不得不添加

```
ActiveSupport::Inflector.inflections do |inflect|
  inflect.irregular 'business', 'businesses'
end 
```

到我的 inflections.rb 文件...因为我的模型被称为业务。

我的意见/js 位于意见/企业/*

在我拔头发之前请帮忙！

我在 index.js.erb 文件中的所有内容是：

```
alert(1); 
```

显然，目标是当我最终解决问题时会收到警报，让我知道它正在工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T06:13:39.783

你怎么称呼你的索引页？如果您从浏览器访问索引页面，它将不会呈现`index.js`. 这就是使用格式的全部意义所在。您将不得不使用 javascript 调用索引方法（类似于 ajax 调用）。您的型号名称与它没有任何关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:57:42.653

Javascript 执行与您的模型名称无关。也不是根据控制器或模型的名称来包含您的 JS 文件。如果您使用的是资产管道，则需要以下内容。

假设 index.js 在 /assets/javascripts/index.js 中，将以下内容添加到 /app/assets/javascripts/application.js

```
//= require ./index 
```

如果您不了解这是如何工作的，您可能希望阅读资产管道的 Ruby on Rails 指南，可在此处找到：http: [//guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)

作为旁注，对于你的屈折用法，我建议如果你要使用像 Rails 这样的框架，请尝试使用它附带的约定。它将为您节省将来的心痛。命名您的模型业务，以便您的表称为业务。除非你真的想要这样的东西：

```
has_one :businesses 
```

# sql-server - SQL Server CTE 层次结构关键字搜索

> ID：13522400
> 
> 赞同：5
> 
> 时间：2012-11-23T02:26:08.253
> 
> 标签：sql-server, tsql, search, common-table-expression

我在电子商务商店存储过程中遇到了递归搜索的棘手问题。基本上，这个单一过程将返回所有产品，包括基本过滤器和分页，并使用父/子类别表执行层次结构的递归检查。这很好用，而且 CTE 的运行速度非常快，但是最近添加的关键字搜索需要跨类别名称、产品名称和样式编号进行搜索，这引起了戏剧性的影响。

起初这似乎很简单，因为第一个 CTE 已经根据提供的 @categoryid 生成了层次结构中所有相关类别的表，然后连接到其余产品特定表以进行所有过滤。产品名称和样式编号搜索工作正常，但我无法在我的一生中获得类别名称搜索，因为它需要从顶部开始搜索类别树以查找层次结构树中的任何匹配项。

* * *

## 编辑：我现在认为，针对产品添加一个“标签”表可能会容易得多，该表存储所有与关键字相关的标签，如类别名称、产品名称和样式等，并直接针对标签进行搜索。

例如，类别层次结构的子集如下所示：

```
Mens
- Polos
- Jerseys
- Pants

Womens
- Pants
- Shirts
- Polos

Supporters
- State Of Origin
  - Mens
  - Womens
  - Kids
- Bulldogs
   - Jerserys
   - Pants
   - Shirts
   - Caps
- Warratahs 
```

在下面的示例代码中，我传递了一个搜索词“原产地男装”，它应该返回“原产国”类别中的所有产品，这些产品也属于“男装”类别。它唯一匹配的是以“Origin”开头的产品名称，没有别的，因为产品级别的类别不是“原产国”，因为这是父级。这里的任何帮助都会很棒！

```
-- Variable Declarations
DECLARE @categoryid int
DECLARE @minprice int
DECLARE @maxprice int
DECLARE @sizefilter int
DECLARE @colourfilter int
DECLARE @searchstring varchar(255)
DECLARE @totalrows int 

-- Variables values for testing
SET @categoryid = 0
SET @minprice = 0
SET @maxprice = 0
SET @sizefilter = 0
SET @colourfilter = 0
SET @searchstring = 'origin mens'

-- Setup paging table
DECLARE @indextable table (rownum int identity(1,1), recordid int);

BEGIN

-- First run CTE recursively over all categories in hierarchy
;WITH categoryCTE AS (

   SELECT cat.id as CategoryId, cat.name as CategoryName
   FROM  dbo.shopcategory AS cat
   WHERE (@categoryid = 0 OR cat.id = @categoryid)
   AND cat.isenabled = 1

   UNION ALL

   SELECT child.id as CategoryId, child.name as CategoryName
   FROM dbo.ShopCategory AS child

        INNER JOIN categoryCTE AS parent 
        ON child.parentid = parent.CategoryId

   WHERE child.isenabled = 1
 ),

 -- Now join CTE onto products tables via linker product_shopcategory
 productsCTE AS (

     SELECT p.id, ppc.shopcategoryid, ppc.listorder as catlistorder
     FROM categoryCTE as cat

         INNER JOIN product_shopcategory ppc ON ppc.shopcategoryid = cat.CategoryId
         INNER JOIN product p ON ppc.productid = p.id
         INNER JOIN productlocality pl ON pl.productid = p.id

         -- ** SEARCH - Join List to Table function of keywords
         INNER JOIN dbo.udf_parseList(@searchString, ' ') s 
         ON (cat.CategoryName + p.Name + p.stylenumber LIKE '%' + s.array_Value + '%')

         LEFT JOIN product_quantity pq ON pq.productid = p.id AND pq.localityid = @localityid
         LEFT JOIN productcolour pc ON pc.productid = p.id
         LEFT JOIN productcolourswatch pcs ON pc.productcolourswatchid = pcs.id
         LEFT JOIN product_productsize pps ON pps.productid = p.id 
         LEFT JOIN productsize ps ON pps.productsizeid = ps.id 

     WHERE p.isenabled = 1

        AND pq.quantity > 1
        AND (pc.isenabled IS NULL OR pc.isenabled = 1)
        AND (@minprice = 0 OR pl.price >= @minprice)
        AND (@maxprice = 0 OR pl.price <= @maxprice)

        -- Colour Group Filters 
        AND (@colourfilter = 0
             OR 
              (pcs.swatchgroupid = @colourfilter AND (pq.productcolourid = pc.id AND pq.quantity > 0))
            )

        -- Size Group Filters
        AND (@sizefilter = 0 
              OR 
              (ps.sizegroupid = @sizefilter AND (pq.productsizeid = pps.productsizeid AND pq.quantity > 0))
            )

 )

-- Create Paging table of results and strip out duplicates with group by
INSERT INTO @indextable (recordid)
    SELECT  DISTINCT id 
    FROM    productsCTE
    GROUP BY id
    ORDER BY id; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T00:59:05.737

终于解决了！我几乎走上了创建完整标签表结构的道路，这样我就可以直接搜索关键字标签而不是直接数据，但是在尝试编写包含类别层次结构嵌套的产品标签表时，我找到了解决方案非常简单。

在下面的解决方案过程中，我在 CategoryCTE 中创建了一个新列，以保存以逗号分隔的类别名称列表，该列表以递归方式构建，然后跟踪提供的 CategoryId 的完整树。现在我有一个以逗号分隔的类别名称列表，然后我可以将其纳入我的第二个 CTE 并执行标准 LIKE 子句，将产品名称、样式编号和类别名称考虑在内。最后，为了让这个搜索更智能一点，我让关键字搜索包含所有关键字，这样“男士起源”将只返回匹配这两个关键字的产品，而不是任何匹配，这是使用 NOT EXISTS 子句完成的。

希望这对其执行速度也非常快的其他人有所帮助！

```
-- Variable Declarations
DECLARE @categoryid int
DECLARE @minprice int
DECLARE @maxprice int
DECLARE @sizefilter int
DECLARE @colourfilter int
DECLARE @searchstring varchar(255)
DECLARE @totalrows int 

-- Variables values for testing
SET @categoryid = 0
SET @minprice = 0
SET @maxprice = 0
SET @sizefilter = 0
SET @colourfilter = 0
SET @searchstring = 'origin mens'

-- Setup paging table
DECLARE @indextable table (rownum int identity(1,1), recordid int);

BEGIN

-- First run CTE recursively over all categories in hierarchy inclusive of supplied categoryId
;WITH categoryCTE AS (

   SELECT cat.id as CategoryId, cat.name as CategoryName, 
          CONVERT(varchar(255),cat.name) AS Tags

   FROM   dbo.shopcategory AS cat
   WHERE  (@categoryid = 0 OR cat.id = @categoryid)
   AND    cat.isenabled = 1

   UNION ALL

   SELECT child.id as CategoryId, child.name as CategoryName, CONVERT(varchar(255),
          parent.Tags + CONVERT(varchar(32),',' + child.name)) AS Tags

   FROM dbo.ShopCategory AS child

        INNER JOIN categoryCTE AS parent 
        ON child.parentid = parent.CategoryId

   WHERE child.isenabled = 1
 ),

 -- Now join CTE onto products tables via linker product_shopcategory
 productsCTE AS (

     SELECT p.id, ppc.shopcategoryid, ppc.listorder as catlistorder
     FROM categoryCTE as cat

         INNER JOIN product_shopcategory ppc ON ppc.shopcategoryid = cat.CategoryId
         INNER JOIN product p ON ppc.productid = p.id
         INNER JOIN productlocality pl ON pl.productid = p.id
         LEFT JOIN product_quantity pq ON pq.productid = p.id AND pq.localityid = @localityid
         LEFT JOIN productcolour pc ON pc.productid = p.id
         LEFT JOIN productcolourswatch pcs ON pc.productcolourswatchid = pcs.id
         LEFT JOIN product_productsize pps ON pps.productid = p.id 
         LEFT JOIN productsize ps ON pps.productsizeid = ps.id 

     WHERE p.isenabled = 1

        AND pq.quantity > 1
        AND (pc.isenabled IS NULL OR pc.isenabled = 1)
        AND pl.localityid = @localityid
        AND (@minprice = 0 OR pl.price >= @minprice)
        AND (@maxprice = 0 OR pl.price <= @maxprice)

        -- Keyword Search filter
        AND (@searchstring = '' OR NOT EXISTS
                (
                SELECT  NULL
                FROM    dbo.udf_parseList(@searchString, ' ')
                WHERE   cat.Tags + p.Name + p.stylenumber + pc.stylenumber NOT LIKE '%' + array_Value + '%'
                )
            )

        -- Colour Group Filters 
        AND (@colourfilter = 0
             OR 
              (pcs.swatchgroupid = @colourfilter AND (pq.productcolourid = pc.id AND pq.quantity > 0))
            )

        -- Size Group Filters
        AND (@sizefilter = 0 
              OR 
              (ps.sizegroupid = @sizefilter AND (pq.productsizeid = pps.productsizeid AND pq.quantity > 0))
            )

 )

-- Create Paging table of results and strip out duplicates with group by
INSERT INTO @indextable (recordid)
    SELECT  DISTINCT id 
    FROM    productsCTE
    GROUP BY id
    ORDER BY id; 
```

# apache - 将 www.example.com 重写为 www.example.com/folder（无重定向）

> ID：13522407
> 
> 赞同：3
> 
> 时间：2012-11-23T02:27:04.547
> 
> 标签：apache, .htaccess, rewrite

我想将 www.example.com 重写（而不是重定向）到文件夹名称。我写：

```
RewriteEngine On
RewriteRule ^/?$ foldername 
```

但是 .htaccess 正在重定向到 www.example.com/folder，我想保留 www.example.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:57:44.767

尝试添加一个尾斜线；`RewriteRule ^/?$ foldername/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:03:53.043

改为使用此规则：

```
RewriteRule ^$ foldername [L] 
```

# c# - 如何使用 html 敏捷包？

> ID：13522412
> 
> 赞同：0
> 
> 时间：2012-11-23T02:28:20.077
> 
> 标签：c#, jquery, asp.net, html-agility-pack

我是 c# 的 HTML Agility 包的新手（使用此 dll 的 .net 2.0 版本）。

我如何编写这个版本的 jquery 但在 html 敏捷中？

```
var arr = $('.group.section', '#accordion1');
for (var i=0; i<arr.length; i+=1) {
    section = $('h3', $(arr[i])).eq(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:01:28.727

[Fizzler](http://code.google.com/p/fizzler/)是 HtmlAgilityPack 的一个插件，它允许您使用 CSS 选择器（即您所说的“jquery”）。

从网站：

```
var document = htmlDocument.DocumentNode;

// yields: [<p class="content">Fizzler</p>]
document.QuerySelectorAll(".content"); 

// yields: [<p class="content">Fizzler</p>,<p>CSS Selector Engine</p>]
document.QuerySelectorAll("p");

// yields empty sequence
document.QuerySelectorAll("body>p");

// yields [<p class="content">Fizzler</p>,<p>CSS Selector Engine</p>]
document.QuerySelectorAll("body p");

// yields [<p class="content">Fizzler</p>]
document.QuerySelectorAll("p:first-child"); 
```

# node.js - 使用 Aleph/Lamina 异步访问 MongoDB

> ID：13522414
> 
> 赞同：1
> 
> 时间：2012-11-23T02:28:22.400
> 
> 标签：node.js, mongodb, clojure, clojurescript, lamina-clojure

我一直在阅读有关 Clojure 的文章，我正在考虑将它作为 Node.js 的替代品（我已将其用于另一个项目）。最有前途的库似乎是 Aleph/Lamina，不幸的是，它没有 Node.js 那么多的示例。我的问题是：

1.  如何使用一系列异步操作处理请求，例如从 MongoDB 读取文档、进行一些计算、保存新文档并在响应中发送？我无法从 Lamina wiki 页面中的示例中编写它。这听起来像是一个很常见的用例，我很惊讶没有找到任何显示它的代码。如果您能给我看一些示例代码，那就太好了。

2.  这种设置是否足以用于重负载服务器（例如每秒数万个请求）？我无法为每个新请求创建一个线程，所以我需要类似于 Node 方法的东西。

3.  有没有中型或大型公司使用这些的例子？

4.  有没有更好的 Clojure 替代 Node（除了 Aleph/Lamina）？也许 Clojurescript 以 Node 为目标？我的客户端不是用 Javascript 编写的，因此在客户端和服务器中使用相同的语言对我来说并不是一个优势。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:20:55.037

几点建议：

1.  您需要查看[Aleph](https://github.com/ztellman/aleph/wiki/HTTP)，它在 Lamina 通道抽象上构建 HTTP 抽象。
2.  向 MongoDB 读取和写入文档可以是异步的，但库应该提供这一点。在 Node.js 中，MongoDB 库必须是异步的，否则会搞砸 Node 编程模型，而 Clojure 并非如此，因此很可能 Clojure MongoDB 库提供了非异步功能。
3.  异步操作仅在 IO 的情况下有用，即读取/写入 mongodb、发送回响应等。生成计算是 CPU 绑定操作，与异步模型无关。
4.  [Vert.x](http://vertx.io/)是 Java 世界的 Node.js。Clojure 支持在路线图上。我更喜欢 Aleph，因为您可以根据需要在异步和非异步世界中玩。

# cqrs - 如何从共享模块公开读取模型

> ID：13522417
> 
> 赞同：0
> 
> 时间：2012-11-23T02:28:56.490
> 
> 标签：cqrs

我正在开发一组程序集，这些程序集封装了我们域的一部分，将由许多应用程序共享。使用订单管理系统的示例，一个这样的程序集将包含应用程序可以对订单执行/对订单执行的所有核心操作。我们正在应用一个简单版本的 CQS/CQRS，以便所有更改“系统”状态的操作都表示为公共命令，例如 CancelOrderCommand、ShipOrderCommand 和 CreateORderCommand。命令处理程序在程序集内部。

**我正在努力回答的问题是如何最好地将读取模型暴露给消费代码？**

读取模型将通过使用代码来执行查询。我不知道如何使用读取模型的所有方式，因此接口需要灵活以允许任何查询。

对我来说复杂的是，我不仅需要公开我的聚合根，而且还有几个客户端应用程序可能使用的相关数据的“查找”列表。例如，每个订单都有一个关联的 OrderType，它是数据驱动的（即，不是枚举），并包含几个属性，这些属性将驱动我们的一些业务规则，这些规则控制可以/不可以执行的操作等。在我的内部很容易管理这种关系的模块；但是，允许创建订单的客户端应用程序很可能需要向用户显示可能的 OrderType 列表。因此，我不仅需要从我的读取模型中公开 Order 聚合列表，还需要公开 OrderTypes 的支持列表（和其他查找列表）。

这通常是如何完成的？

我不确定还有什么可以解释这将有助于触发解决方案，所以请询问...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:00:08.147

我从未见过基于 CQRS 的实现公开了用于临时查询的完整数据集，所以这是一个有趣的情况！在典型的 CQRS 场景中，您将公开非常具体的查询，因为您可能希望在调用事件时引发事件（例如缓存 -有关详细信息，请参阅[这篇文章）。](http://www.nootn.com.au/2013/03/command-query-separation-to-better.html)

但是，由于这是您的设计，我们不必担心“典型”或“正确”CQRS，我想您只需要一个解决方案！我见过的公开数据以进行灵活查询的最佳新机制之一是[开放数据协议 (OData)](http://www.odata.org/)。它将允许消费者在您公开的数据源上实现自己的过滤、排序和分页。

大多数实现似乎都处理关系数据。如果您正在处理关系数据源，那么 OData 可能是一个不错的选择。我怀疑您对“公开我的聚合根”的评论可能正在使用文档数据库？如果是这样，我在 MongoDB 上看到了一个 OData 服务示例：http: [//bloggingabout.net/blogs/vagif/archive/2012/10/11/mongodb-odata-provider-now-supports-arrays-和-nested-collections.aspx](http://bloggingabout.net/blogs/vagif/archive/2012/10/11/mongodb-odata-provider-now-supports-arrays-and-nested-collections.aspx)。

我希望这会有所帮助，OData 绝对值得研究。它的增长似乎非常迅速，并且在服务器和客户端技术平台上都得到了很好的支持。

# java - 为存储在 Google Appengine 数据存储区中的实体创建 URL

> ID：13522419
> 
> 赞同：1
> 
> 时间：2012-11-23T02:29:14.460
> 
> 标签：java, google-app-engine, video-streaming, html5-video

我在数据存储中存储了一堆 Blob 类型的实体。它们中的每一个都存储视频数据字节。我打算使用`video`HTML5 标记来显示视频，但无论如何我都找不到为 Blob 创建 URL。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:53:55.897

您不能自动为 blob 类型的属性或任何类型的属性或实体创建 URL。您必须编写一个处理程序来加载实体并为 blob 提供服务。

更好的解决方案是使用[BlobStore API](https://developers.google.com/appengine/docs/java/blobstore/)。您仍然无法自动为它们提供服务，但存储更适合 blob。您可以使用 BlobStoreService.serve 为您完成大部分工作。

或者您可以使用[云文件 API](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService)。这会自动为您创建的 blob 生成一个公共 URL。

# ruby - 错误 PhusionPassenger::Rack::ApplicationSpawner::Error

> ID：13522440
> 
> 赞同：3
> 
> 时间：2012-11-23T02:32:08.803
> 
> 标签：ruby, apache, passenger, redmine

我对乘客有误。

我在VPS中设置了redmine。当我在 webrick 中运行时，它运行正常。我曾经乘客在 80 端口运行 redmine。

路径：usr/local/apache/conf/httpd.conf

```
 LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
 PassengerRuby /usr/bin/ruby
 PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17

 PassengerMaxPoolSize 2
 PassengerMaxInstancesPerApp 2
 PassengerPoolIdleTime 100

 <VirtualHost 112.78.6.191:80>
    ServerName projects.gzerone.com
    ServerAlias www.projects.gzerone.com
    DocumentRoot /home/gzerone/public_html/redmine-2.1.2/public
RailsEnv production
     #ErrorLog /usr/local/apache/logs/redmine.error.log
#RackBaseURI /rails
     ServerAdmin webmaster@projects.gzerone.com
     #UseCanonicalName Off
    #CustomLog /usr/local/apache/domlogs/projects.gzerone.com combined
    #CustomLog /usr/local/apache/domlogs/projects.gzerone.com-bytes_log "%{%s}t %I .\n%{%s}t %O ."
     ## User gzerone # Needed for Cpanel::ApacheConf
<Directory /home/gzerone/public_html/redmine-2.1.2/public>
    #AllowOverride all
     Allow from all
    # MultiViews must be turned off.
    Options -MultiViews
</Directory>

<IfModule mod_suphp.c>
    suPHP_UserGroup gzerone gzerone
</IfModule>
<IfModule !mod_disable_suexec.c>
    <IfModule !mod_ruid2.c>
        SuexecUserGroup gzerone gzerone
    </IfModule>
</IfModule>
<IfModule mod_ruid2.c>
    RUidGid gzerone gzerone
</IfModule>
ScriptAlias /cgi-bin/ /home/gzerone/public_html/redmine-2.1.2/public/cgi-bin/

# To customize this VirtualHost use an include file at the following location
# Include "/usr/local/apache/conf/userdata/std/2/gzerone/projects.gzerone.com/*.conf" 
```

![在此处输入图像描述](../Images/d6729e3876699b2bc77778cf1500fcb1.png)

在 apache 的 error_log 中：

```
[ pid=23984 thr=23634338875820 file=utils.rb:176 time=2012-11-23 10:39:34.067 ]: *** Exception Errno::ENOMEM in PhusionPassenger::Rack::ApplicationSpawner (Cannot allocate memory - fork(2)) (process 23984, thread #<Thread:0x2afd98bf1358>):
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:462:in `fork'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:462:in `safe_fork'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:180:in `start'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:253:in `spawn_rack_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:246:in `spawn_rack_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:82:in `synchronize'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `__send__'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
from /usr/lib/ruby/gems/1.8/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server:99 
```

我希望。你提出任何修复它的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:20:48.443

正如您在日志中看到的，ApplicationSpawner 由于内存不足错误而崩溃。你没有足够的内存。

您可以做几件事：

*   使用保守派生，这样您就没有 ApplicationSpawner 进程。由于您的池大小只有 2，因此使用 ApplicationSpawner 不会给您带来任何优势。
*   添加更多交换空间。
*   升级你的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T00:23:03.760

有同样的问题，我相信它与乘客控制和优化选项有关，例如PassengerMaxPoolSize。您可能需要将其设置为高于 2。我注意到有人第一次在另一台计算机上同步查看我的应用程序时发生了错误。

要快速修复，请尝试进入项目目录并重新捆绑应用程序，`bundle install`然后重新启动 Web 服务器，`sudo service httpd restart`这应该会重置乘客。

此外，丢失的`config.ru`文件会导致相同的错误消息。您可能想查看[这里](http://groups.google.com/group/phusion-passenger/browse_thread/thread/e5c7495a6fef4ba7)的讨论。

希望我能告诉你为什么会这样，希望有人会。我很想了解我自己的确切问题，以永久修复。

# php - 在 PHP 中编写 MySql 函数

> ID：13522441
> 
> 赞同：-2
> 
> 时间：2012-11-23T02:32:23.153
> 
> 标签：php, mysql, function, syntax

我的 php 脚本中有以下函数：

```
$fcnsql = "CREATE FUNCTION CUST_ORDER(index INT, weekday INT, curweekday INT, endtime TIME, curtime    TIME)
RETURNS INT
BEGIN
DECLARE custom_weekday INT;
IF (weekday=curweekday AND curtime>endtime) THEN
SET custom_weekday = index+7;
ELSE
SET custom_weekday = index;
END IF;
RETURN custom_weekday;
END";

$test=mysql_query($fcnsql) or die (mysql_error()); 
```

我得到的输出是我有一个 SQL 语法错误。知道有什么问题吗？

我认为可能是一些问题：

1.  我不确定在我的函数中将 TIME 变量作为参数是否是正确的语法。
2.  我在网上的一些示例代码中看到，在 mysql 函数之前，有一行“分隔符 $$”——我不确定这是做什么用的，以及如何/是否需要使用它。

我对此很陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:39:47.657

**编辑：** @Pang 称之为 - index 是保留字。如果您不想更改名称，请将其包装在反引号中：

```
`index` 
```

我会把剩下的华夫饼留在原处，因为你不确定 DELIMITER。:)

--

正如您在某些示例中所注意到的，错误可能是您没有设置 DELIMITER。将这些添加到函数的顶部和底部：

```
$fcnsql = "
DELIMITER #
CREATE FUNCTION CUST_ORDER2(`index` INT, weekday INT, curweekday INT, endtime TIME, curtime TIME) RETURNS INT
BEGIN
DECLARE custom_weekday INT;
IF (weekday=curweekday AND curtime>endtime) THEN
    SET custom_weekday = `index`+7;
ELSE
    SET custom_weekday = `index`;
END IF;
RETURN custom_weekday;
END;
#
DELIMITER ;
"; 
```

原因是“;” 是 MySQL 的默认分隔符（即告诉 MySQL 它已经到达语句末尾的东西）。您的函数语句需要分隔符，但是当 MySQL 保存它时，您不希望 MySQL 认为它已找到语句的结尾并停止处理该函数。因此，您将分隔符更改为您未在函数中使用的字符，然后再将其更改回来。

# windows - 无效的 WndProc 消息

> ID：13522446
> 
> 赞同：1
> 
> 时间：2012-11-23T02:33:34.390
> 
> 标签：windows, events

我试图找到可以在以下覆盖中传递的消息**列表/文章。**

```
protected override void WndProc(ref Message m) {} 
```

我[在 msdn 上找到了这个链接，](http://msdn.microsoft.com/en-us/library/system.windows.forms.message%28v=vs.71%29.aspx)但我正在寻找可用消息的完整列表，以便在我的应用程序中充分利用它们。

是否有任何列出它们的公共**知识库文章？**

# java - 获取字符串的最后一个数字部分

> ID：13522448
> 
> 赞同：0
> 
> 时间：2012-11-23T02:33:36.527
> 
> 标签：java, regex

我有一个包含字符和数字的序列号，例如“ **A1B2000C** ”，我想通过增加数字部分+1来生成下一个序列号。下一个序列号将是**A1B2001C**。有什么办法可以存档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T02:41:09.610

不在一条线上，但是...

```
String input = "A1B2000C";
String number = input.replaceAll(".*(?<=\\D)(\\d+)\\D*", "$1");
int next = Integer.parseInt(number);
next++;
String ouput = input.replaceAll("(.*)(?<=\\D)\\d+(\\D*)", "$1" + next + "$2");
System.out.println(ouput); 
```

输出：

```
A1B2001C 
```

实际上，它可以在一行中完成！

```
String ouput = input.replaceAll("(.*)\\d+(\\D*)", "$1" + (Integer.parseInt(input.replaceAll(".*(\\d+)\\D*", "$1") + 1) "$2"); 
```

但易读性受到影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:40:31.090

您必须知道序列号背后的逻辑：哪个部分意味着什么。增加哪个部分，哪个不增加。然后将数字分成组件，递增并构建新数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T02:43:27.037

您可以使用如下正则表达式解析序列号：

```
([A-Z]\d+[A-Z])(\d+)([A-Z])$ 
```

此表达式创建的匹配为您提供 3 个组。第 2 组包含您要增加的数字。将其解析为一个整数，将其递增，然后通过将 group1 与新编号和 group3 连接起来来构建新的序列号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T02:45:06.947

您最好将序列号作为数字跟踪并连接您需要的任何前缀/后缀。

通过这种方式，您可以简单地增加序列号以生成下一个序列号，而不必费劲地刮掉最后一个生成的序列号。

```
public class Serials {
    int currentSerial = 2000;
    String prefix = "A1B";
    String suffix = "C";

    //Details omitted
    public String generateSerial() {
        return prefix + (currentSerial++) + suffix;
    }
} 
```

请注意，如果必须保持数字的填充`prefix="A1B2`，`currentSerial=000`事情会变得有点棘手，但是如果您搜索，有很多解决填充问题的方法:)

# app-store - 在 iTunesConnect 中切换 App 的主要和次要类别是否有副作用？

> ID：13522451
> 
> 赞同：3
> 
> 时间：2012-11-23T02:35:50.803
> 
> 标签：app-store, app-store-connect

我在 App Store 上有一个应用程序，其中设置了主要和次要类别。该应用程序出现在其中一些类别中，这是我非常想保留的东西。

仅通过切换哪个类别是主要类别，哪个类别是次要类别（但除此之外，保持相同的 2 个类别），对应用程序的特色状态、应用程序排名或其他任何东西是否有任何副作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T14:27:12.073

我只能根据我在 iOS App Store 上超过 12 个应用程序超过 2 年的经验 (！) 说话。我们的大多数应用程序都属于生产力（第 1 名）和业务类别（第 2 名）。

我们对排名进行了一些测试并更改了类别（2nd=>1st 等）。变化（主要是下载次数）是显着的 - 正面和负面。显然，人们愿意在不同的类别中支付不同的价格点。

关于特色状态，我们观察到您经常被踢出前第一类的特色部分（新的和值得注意的等）。

我可以告诉你的是，有时值得测试一些更改：对我们来说，值得测试不同的类别，当我们将所有内容更改回“原始”设置时，下载次数等都是相同的。

# php - 将所有三元组打印到 RDF 文件中

> ID：13522455
> 
> 赞同：1
> 
> 时间：2012-11-23T02:36:44.333
> 
> 标签：php, semantic-web

我正在使用 rdfapi-php 库并尝试打开我的 RDF 文件。

这是从教程中编辑的代码，以显示解析为库解释方式的内容。

```
//include RDF API
define("RDFAPI_INCLUDE_DIR", "C:/OpenSA/Apache/htdocs/rdf_api/api/");
include(RDFAPI_INCLUDE_DIR . "RDFAPI.php");

// Filename of an RDF document
$base="example1.rdf";

// Create a new MemModel
$model = ModelFactory::getDefaultModel();

// Load and parse document
$model->load($base);
// Get Iterator from model
$it = $model->getStatementIterator();

// Traverse model and output statements
while ($it->hasNext()) {
   $statement = $it->next();
   echo "Statement number: " . $it->getCurrentPosition() . "<BR>";
   echo "Subject: " . $statement->getLabelSubject() . "<BR>";
   echo "Predicate: " . $statement->getLabelPredicate() . "<BR>";
   echo "Object: " . $statement->getLabelObject() . "<P>";
} 
```

那是输出

```
Statement number: 0
Subject: http://www.w3.org/Home/Lassila
Predicate: http://description.org/schema/Creator
Object: e85740

Statement number: 1
Subject: e85740
Predicate: http://www.w3.org/1999/02/22-rdf-syntax-ns#type
Object: http://description.org/schema/Person 
```

我的问题是在变量 $base 中我将有一个包含我所有 RDF 文件名称的数组。我如何编辑脚本以获取数组的所有文件的内容，然后打印每个 RDF 三元组？

问候

# netbeans - NetBeans 和不可见的 jUnit 库

> ID：13522458
> 
> 赞同：0
> 
> 时间：2012-11-23T02:37:12.727
> 
> 标签：netbeans, junit, netbeans-7.2

我使用普通的 NetBeans 安装程序安装了 jUnit，但是当我尝试打开一个使用 jUnit 的项目时，我得到一个对话框，提示我必须解决缺少的引用。此外，当我试图找到 jUnit 库时，我注意到它不在库列表中。

我已经尝试安装 NetBeans jUnit 插件。

我必须做什么才能让 jUnit 正常工作？

语境：

*   Windows 7 SP1 64 位版本
*   NetBeans 7.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:41:19.140

取决于您使用的项目类型。

**Ant**：
右键单击该`Libraries`文件夹并选择`Add Library...`.
将出现一个新窗口，您可以在其中选择要添加的 JUnit 版本。

**Maven**：
打开`Project Files`/ `pom.xml`。像这样声明一个 JUnit 依赖项：

```
<dependencies>
  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
  </dependency>
</dependencies> 
```

# multithreading - Delphi WebBroker / ISAPI 与线程

> ID：13522460
> 
> 赞同：3
> 
> 时间：2012-11-23T02:37:15.330
> 
> 标签：multithreading, delphi, blocking, isapi, webbroker

我正在尝试在响应制作人之后做一些工作。

为了不保持时间响应，我尝试在线程中完成这项工作。

该线程创建一个 DataModule，并执行某些操作（发送电子邮件、处理文件操作等），但执行阻塞了主线程。

我不使用变量或与主线程的任何其他交互。我没有看到任何可以发出块的东西。

任何人都可以帮忙吗？

**线程代码：**

* * *

```
unit wdm_Thread;  

interface

uses
    System.SysUtils, System.Classes, Web.HTTPApp, Web.HTTPProd, Web.DSProd,Data.DB, Data.Win.ADODB;

type
    TwdmThread = class(TDataModule)  
        dbConnection: TADOConnection;  
        spVisualizador: TADOStoredProc;  
        spVisualizadorProc: TADOStoredProc;  
        spVisualizadorProcFim: TADOStoredProc;  
        spVisualizadorProcInicio: TADOStoredProc;  
        ppVisualizadorOn: TDataSetPageProducer;  
        spVisualizadorMiniProc: TADOStoredProc;  
    end;  

    colaboreThread = class(TThread)  
    private  
        FDataModule: TwdmThread;  
        FPreviewPath: String;  
        FSessionID: String;  
        FUniqueID: String;  
        FUniqueIDVersao: String;  
    public  
        procedure Execute(); override;  
        class procedure Thumbnail(APreviewPath, ASessionID, AUniqueID, AUniqueIDVersao: String);  
    end;   

implementation  

uses  
    WinAPI.Windows, WinAPI.ActiveX;  

{%CLASSGROUP 'System.Classes.TPersistent'}  

{$R *.dfm}  

{ threadThumbnail }  

procedure colaboreThread.Execute;  
begin  
    try  
        FDataModule := TwdmThread.Create(nil);  
        with FDataModule do  
        begin  
            spVisualizador.Parameters[1].Value := FSessionID;  
            spVisualizador.Parameters[2].Value := FUniqueID;  
            spVisualizador.Parameters[3].Value := FUniqueIDVersao;  
            spVisualizador.Parameters[4].Value := False;  
            spVisualizador.Open();  

            if spVisualizador.RecordCount > 0 then  
            try  
                DeleteFile(PWideChar(FPreviewPath + FUniqueIDVersao + spVisualizador.FieldByName('Extensao').AsString));  

                CopyFile(PWideChar(spVisualizador.FieldByName('ArmazenamentoCaminho').AsString + FUniqueIDVersao), PWideChar(FPreviewPath + FUniqueIDVersao + spVisualizador.FieldByName('Extensao').AsString), true);  

                spVisualizadorMiniProc.Parameters[1].Value := FSessionID;  
                spVisualizadorMiniProc.Parameters[2].Value := FUniqueID;  
                spVisualizadorMiniProc.Parameters[3].Value := FUniqueIDVersao;  
                spVisualizadorMiniProc.Parameters[4].Value := FPreviewPath;  
                spVisualizadorMiniProc.ExecProc();  
            finally  
                DeleteFile(PWideChar(FPreviewPath + FUniqueIDVersao + spVisualizador.FieldByName('Extensao').AsString));  
        end  
    end;  
  finally  
    FreeAndNil(FDataModule);  
  end;  

end;  

class procedure colaboreThread.Thumbnail(APreviewPath, ASessionID, AUniqueID, AUniqueIDVersao: String);  
begin  
  with colaboreThread.Create(True) do  
  begin  
    FreeOnTerminate := True;  
    FPreviewPath := APreviewPath;  
    FSessionID := ASessionID;  
    FUniqueID := AUniqueID;  
    FUniqueIDVersao := FUniqueIDVersao;  
    if FUniqueIDVersao = '' then FUniqueIDVersao := FUniqueID;  

    Execute();  
  end;  
end;  

initialization  
  CoInitializeEx(NIL, COINIT_MULTITHREADED or COINIT_SPEED_OVER_MEMORY);  

end. 
```

**WebModule 实现：**

* * *

```
...

procedure TwdmColaboreUP.wdmTopWebUploadwaiUploadAction(Sender: TObject;
  Request: TWebRequest; Response: TWebResponse; var Handled: Boolean);  
begin  
  colaboreThread.Thumbnail(FPreviewPath, FSessionID, FArquivoUniqueID, FArquivoUniqueIDVersao);  
end;  

... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:02:28.987

您正在调用`Execute`线程，但不应直接调用它。`Resume`您使用（或通过在其构造函数中省略 Suspended 参数）启动线程。然后，Execute 方法将在后台启动。

如果您像现在一样自己启动 Execute，它会像任何其他方法一样在主线程中运行。

```
 with colaboreThread.Create(True) do  
  begin  
    FreeOnTerminate := True;  
    FPreviewPath := APreviewPath;  
    FSessionID := ASessionID;  
    FUniqueID := AUniqueID;  
    FUniqueIDVersao := FUniqueIDVersao;  
    if FUniqueIDVersao = '' then FUniqueIDVersao := FUniqueID;  

    // Execute();  <--- Not this

    Resume; // <--- but this
  end; 
```

# objective-c - Core Data 不能批量处理很多记录？

> ID：13522464
> 
> 赞同：0
> 
> 时间：2012-11-23T02:37:48.050
> 
> 标签：objective-c, ios, sqlite, core-data

[本文](http://inessential.com/2010/02/26/on_switching_away_from_core_data)建议 Core Data 一次只能更改一条记录，而不是使用 SQL 直接查询数据库。我正在研究两者之间的“vs”，并在这里阅读了很多关于 SO 和其他地方的问题。但这是我看到的与 Core Data 相关的第一个重大缺点，我有点惊讶它不支持像批处理记录这样基本的东西。这实际上正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:17:57.300

此处链接的 Brent 文章中的详细信息是正确的，尽管年代久远，但这并不是 Core Data 的一个以任何有意义的方式进行更新的领域。

如果您在持久性中需要大量批处理操作，并且如果缺少此功能会对应用程序中使用数据的方式产生负面影响，那么 Core Data 可能不是最佳选择，就像 Brent 一样。

附带说明一下，自从 Brent 写这篇文章以来，他在采访和播客中谈论了很多，虽然这对他来说是一个问题，但他也谈到了从那时起在其他应用程序中使用 Core Data - 这都是关于您的应用程序以及它如何使用它的数据。

# java - Django 和 Java Applet 授权失败

> ID：13522465
> 
> 赞同：0
> 
> 时间：2012-11-23T02:37:51.127
> 
> 标签：java, django, applet, session-cookies

我正在用**allauth**构建一个 Django 应用程序。

我有一个需要身份验证的页面，我在其中放置了一个 Java 小程序。这个小程序对返回 Json 对象的其他页面（同一个 django 项目的）执行 GET 请求。

**小程序使用JSObject**从父网页获取**CSRF**令牌。

 **问题是我想为所有页面设置身份验证控制，但我无法从小程序的父网页获取**sessionid** cookie，因此它无法通过 GET（也不能通过 POST）获取（或保存）数据。

也许这是一个简单的方法来获得这个，但我是一个新手，我还没有找到任何东西。

如果您需要什么，请随意询问。

谢谢你。

编辑：

有没有在楼下写过，发现**sessionid** cookie 被标记为*HTTPOnly*，所以现在的问题是，让小程序进行 POST 和 GET 请求最安全的方法是什么。例如，可以在页面中创建一个 JS 方法，获取数据并将其传递给小程序吗？也许以同样的方式我可以做 POST？

编辑：

我使用页面中的 jquery 调用成功获取了数据。现在的问题是代码抛出了*InvocationTargetException*。我找到了问题的位置，但我不知道如何解决它。

这是Jquery代码：

```
 function getFloor() {

        $.get(
              "{% url ... %}",
              function(data) {
                    var output = JSON.stringify(data);
                    document.mapGenerator.setFloor(output)
              }
        );} 
```

这里有小程序的两个功能。**部分是问题的根源。

```
 public void setFloor(String input) {
    Floor[] f = Floor.parse(input);
}

  public static Floor[] parse(String input) {

    **Gson gson = new Gson();**

    Floor[] floors = gson.fromJson(input, Floor[].class);

    return floors;
} 
```

这里是出现在我的服务器上的日志，您可以在其中看到小程序尝试从服务器（而不是小程序）加载 Gson 的库

```
 "GET /buildings/generate/com/google/gson/Gson.class HTTP/1.1" 404 4126 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:25:32.413

你可以在你的小程序中做这样的事情：

```
String cookies = JSObject.getWindow(this).eval("document.cookie").toString(); 
```

这将为您提供以分号分隔的页面的所有 cookie。**

# python - Numpy genfromtxt - 列名

> ID：13522470
> 
> 赞同：3
> 
> 时间：2012-11-23T02:39:15.697
> 
> 标签：python, numpy

我正在尝试使用 genfromtxt 导入一个简单的制表符分隔的文本文件。我需要访问每个列标题名称，以及与该名称关联的列中的数据。目前我正在以一种看起来很奇怪的方式完成这项工作。txt 文件中的所有值，包括标题，都是十进制数字。

```
sample input file:

1     2     3     4      # header row
1.2   5.3   2.8   9.5
3.1   4.5   1.1   6.7
1.2   5.3   2.8   9.5
3.1   4.5   1.1   6.7
1.2   5.3   2.8   9.5
3.1   4.5   1.1   6.7

table_data = np.genfromtxt(file_path)       #import file as numpy array
header_values = table_data[0,:]             # grab first row
table_values = np.delete(table_data,0,0)    # grab everything else 
```

我知道必须有一种更合适的方法来导入数据的文本文件。我需要使访问每一列的标题和与该标题值相关的相应数据变得容易。感谢您提供的任何帮助。

澄清：

我希望能够通过使用 table_values [header_of_first_column] 中的内容来访问一列数据。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T02:49:01.170

使用[names 参数](http://docs.scipy.org/doc/numpy/reference/generated/numpy.genfromtxt.html)将第一个有效行用作列名：

```
data = np.genfromtxt(
    fname,
    names = True, #  If `names` is True, the field names are read from the first valid line
    comments = '#', # Skip characters after #
    delimiter = '\t', # tab separated values
    dtype = None)  # guess the dtype of each column 
```

* * *

例如，如果我将您发布的数据修改为真正的制表符分隔，则以下代码有效：

```
import numpy as np
import os
fname = os.path.expanduser('~/test/data')
data = np.genfromtxt(
    fname,
    names = True, #  If `names` is True, the field names are read from the first valid line
    comments = '#', # Skip characters after #
    delimiter = '\t', # tab separated values
    dtype = None)  # guess the dtype of each column
print(data)
# [(1.2, 5.3, 2.8, 9.5) (3.1, 4.5, 1.1, 6.7) (1.2, 5.3, 2.8, 9.5)
#  (3.1, 4.5, 1.1, 6.7) (1.2, 5.3, 2.8, 9.5) (3.1, 4.5, 1.1, 6.7)]

print(data['1'])
# [ 1.2  3.1  1.2  3.1  1.2  3.1] 
```

# android - jni 方法调用异常挂起 getarraylength

> ID：13522472
> 
> 赞同：0
> 
> 时间：2012-11-23T02:39:19.893
> 
> 标签：android, java-native-interface, nfc

我使用google nexus s的nfc功能来开发我的基于RF卡的程序。这是我的方法，我认为问题出在数据对象上

```
unsigned char *CNFCFunList::jbyteArray2Byte(jbyteArray data, int *outLen)
{
    LOGI("jbyteArray2Byte begin");
    if (data == NULL)
    {
        LOGI("data is NULL");
        return 0;
    }

jsize  size = m_pJNIEnv->GetArrayLength(data);
LOGI("GetArrayLength begin %d",size);
//LOGI("GetByteArrayElements begin,data length = %d",env->GetArrayLength(data));
jbyte * olddata = (jbyte*)m_pJNIEnv->GetByteArrayElements(data, 0);
jsize  oldsize = m_pJNIEnv->GetArrayLength(data);
unsigned char* bytearr = (unsigned char*)olddata;
*outLen = (int)oldsize;

return bytearr; 
```

}

但我得到 JNI WARNING: JNI method called with exception pending in Lcom/uai/jni/...;(J[BJI) (GetArrayLength) Pending exception is:

我也得到了例外

```
I/dalvikvm(5836): java.io.IOException: Transceive failed
11-23 10:19:35.269: I/dalvikvm(5836):   at android.nfc.TransceiveResult.getResponseOrThrow(TransceiveResult.java:52)
11-23 10:19:35.269: I/dalvikvm(5836):   at android.nfc.tech.BasicTagTechnology.transceive(BasicTagTechnology.java:151)
11-23 10:19:35.269: I/dalvikvm(5836):   at android.nfc.tech.IsoDep.transceive(IsoDep.java:172)
11-23 10:19:35.269: I/dalvikvm(5836):   at com.uai.jni.libUai.uaiGenKeyPair(Native Method)
11-23 10:19:35.269: I/dalvikvm(5836):   at 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:44:43.180

1.  `com.uai.jni.libUai.uaiGenKeyPair`是一种本地方法，`java.io.IOException: Transceive failed`发生在哪里。
2.  本机代码中发生的异常（通过调用 JNI 方法，而不是本机函数！）不会像在 JVM 中那样自动处理（冒泡到最近的 try/catch）。您必须观察方法结果和/或通过测试方法手动检查`ExceptionOccurred()`。似乎您在之后都没有做`uaiGenKeyPair`，只是继续执行 JNI。
3.  已在呈现的代码中执行`m_pJNIEnv->GetArrayLength(data)`，并且 JNI 机器正在反对，因为只有非常有限的一组 JNI 方法可以在未决异常时执行。

您必须将异常从 JNI 层清除和/或重新抛出回 Java。我在这里从盛亮的优秀 JNI 书中找到了一章关于异常的章节（不能使其可点击，SO 对象数字 IP）：

```
http://192.9.162.55/docs/books/jni/html/exceptions.html 
```

# php - .htaccess 拒绝所有，但 POST 不能使用 Objective-C

> ID：13522477
> 
> 赞同：5
> 
> 时间：2012-11-23T02:40:15.847
> 
> 标签：php, objective-c, .htaccess, http, post

我一直在寻找拒绝除 POST 之外的所有 HTTP 方法的方法。是的，我意识到这可能不会阻止太多，但我想让它发挥作用。我遇到了一种拒绝使用 .htaccess 文件发布以外的所有内容的方法：

```
RewriteEngine On
RewriteCond %{REQUEST_METHOD} !^POST
RewriteRule ^.*$ /home/user/public_html/folder/bad_request.php 
```

现在在我的 iphone 应用程序中，我有以下代码将数据发布到网站：

```
NSString *post_length = [NSString stringWithFormat:@"%d",[post_data length]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://folder.domain.com/"]];
[request setHTTPMethod:@"POST"];
[request setValue:post_length forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:post_data]; 
```

当我使用当前的 .htaccess 运行此代码时，如上所示，我得到 bad_request 页面，就好像我没有发布数据一样，但是如果我将 .htaccess 规则更改为 !^GET 我可以在浏览器中访问它并获得访问权限，但是当我发布时使用 iPhone 代码，我被拒绝了......所以它向后工作。有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:40:48.640

（评论 - 不回答，但需要添加代码）

假设 POST 消息是从 iPhone 发出的（您可以验证它正在删除 .htaccess 中的过滤器），那么您可能需要找出您收到的请求类型

去做这个：

1) 使用以下代码创建一个 PHP 文件“t.php”：

```
<?php

echo 'htaccess sees: **' . htmlentities($_GET['m']) . '**<br>';
echo 'apache sees: **' . htmlentities($_SERVER['REQUEST_METHOD']) . '**';

?> 
```

2) 使用以下内容创建一个 .htaccess：

```
# Enable rewrite engine and route requests to framework
# Add Options SymLinks if you need it
RewriteEngine On
RewriteRule ^(.*) t.php?m=%{REQUEST_METHOD} [L,QSA] 
```

然后运行并记录结果。对服务器的所有请求都将转到 t.php，它会向您显示 .htaccess 正在处理的内容以及作为服务器方法传递给 PHP 的内容。星号是为了确保没有空格。仔细检查这些都是“ **POST** ”。您需要在您的 iPhone 调试器中捕获输出，或者让 PHP 泵入日志文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T14:01:31.733

好的，所以在尝试没有成功之后，我最终决定将您建议的 .htaccess 代码的一部分与一些 .php 合并。我让 .htaccess 文件获取请求方法并将其发送到 index.php，然后 index.php 文件说明它的 == 'POST' 是否执行其他操作并执行其他操作。

.htaccess

```
RewriteEngine On
RewriteRule ^(.*) index.php?request=%{REQUEST_METHOD} [L,QSA] 
```

索引.php

```
if ($_GET['request'] == 'POST') {

} else {

} 
```

# html - 强制水平滚动框使用不间断线？

> ID：13522478
> 
> 赞同：-1
> 
> 时间：2012-11-23T02:40:16.893
> 
> 标签：html, css, scroll

仅使用 CSS，我需要使黑框（链接）排成一行，并且当链接行比它长时，容器（暂时命名为 div.hurrdurr）有一个水平滚动条。我也不希望在滚动时有任何剩余空间。链接将动态更改，因此据我所知，我不能使用设置的宽度。

我只需要它在最新的 Firefox 中工作，因为这是我用来显示页面的唯一东西。

这就是我所拥有的：

```
<!DOCTYPE html>
<html style="width: 1000px;">
    <head>
        <title>Hurrr</title>
        <style>
            div.contain {
                background-color: #999999;
                height: 90px;
                width: 100%;
            }
            div.hurrdurr {
                background-color: #CCCCCC;
                white-space: nowrap;
                width: 100%;
                overflow: auto;
            }
            div.hurrdurr a {
                width: 60px;
                height: 20px;
                margin-right: 8px;
                margin-top: 4px;
                background-color: #333333;
                color: #CCCCCC;
                text-align: center;

                float: left;
                display: inline-block;
            }
        </style>
    </head>
    <body>
        <div class="contain">
            <div class="hurrdurr">
                <a class="durr">1/25</a>
                <a class="durr">2/25</a>
                <a class="durr">3/25</a>
                <a class="durr">4/25</a>
                <a class="durr">5/25</a>
                <a class="durr">6/25</a>
                <a class="durr">7/25</a>
                <a class="durr">8/25</a>
                <a class="durr">9/25</a>
                <a class="durr">10/25</a>
                <a class="durr">11/25</a>
                <a class="durr">12/25</a>
                <a class="durr">13/25</a>
                <a class="durr">14/25</a>
                <a class="durr">15/25</a>
                <a class="durr">16/25</a>
                <a class="durr">17/25</a>
                <a class="durr">18/25</a>
                <a class="durr">19/25</a>
                <a class="durr">20/25</a>
                <a class="durr">21/25</a>
                <a class="durr">22/25</a>
                <a class="durr">23/25</a>
                <a class="durr">24/25</a>
                <a class="durr">25/25</a>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:57:31.340

`float:left`从你的删除你的`div.hurrdurr a`，这应该给你滚动。

# c# - 实体框架 5，代码优先多对多外键映射，具有额外属性

> ID：13522486
> 
> 赞同：2
> 
> 时间：2012-11-23T02:40:49.707
> 
> 标签：c#, sql, asp.net-mvc, entity-framework-5, composite-key

我有这些课程

```
public class SecretQuestion
{
    [Key]
    public int SecretQuestionId { get; set; }
    [Required]
    public string Caption { get; set; }
}

public class UserSecretQuestion
{
    public SecretQuestion SecretQuestion { get; set; }
    public User User { get; set; }

    [Required]
    public string Answer { get; set; }
}

public class User
{
    [Key]
    public int UserId { get; set; }
    public string Email { get; set; }
    public string UserName { get; set; }
} 
```

我希望 UserSecretQuestion 是一个包含用户答案的​​连接表。问题是 EF5 不会为我创建此表，因为它声称我需要该表上的密钥。

所以当然把 ***public int Id { get; 放; 在那里***会修复它，但这会在我的数据库中放置一个我不需要的字段。

有没有办法使它正常工作，以便 secretquestionid 和 userid 外键形成 usersecretquestion 表的复合键。

我注意到这里有几个问题谈论多对多关系，但没有一个（我能找到）谈论实体具有额外数​​据的这种关系，例如“答案”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:54:30.450

首先，您必须将`SecretQuestionId`和`UserId`作为属性添加到`UserSecretQuestion`类中。

```
public class UserSecretQuestion
{
    [Key, ForeignKey("SecretQuestion")]
    public int SecretQuestionId { get; set; }

    [Key, ForeignKey("User")]
    public int UserId { get; set; }

    [Required]
    public string Answer { get; set; }

    public SecretQuestion SecretQuestion { get; set; }
    public User User { get; set; }
} 
```

然后，您必须覆盖类中的`OnModelCreating`方法`DbContext`并告诉 Entity Framework 为连接表使用复合键。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    // Set composite keys
    modelBuilder.Entity<UserSecretQuestion>().HasKey(k => new { k.SecretQuestionId, k.UserID });
} 
```

# c# - NHibernate 会话意外关闭

> ID：13522487
> 
> 赞同：0
> 
> 时间：2012-11-23T02:40:50.603
> 
> 标签：c#, asp.net-mvc, fluent-nhibernate, castle-windsor

我正在为我的 Web 应用程序使用 MVC4、C#、Castle Windsor、fluentnhibernate 堆栈，通常效果很好。

只是偶尔我会收到与 nHibernate 相关的错误，如下所示：

> 阅读器关闭时调用 Read 的尝试无效。

或者

> 内部连接致命错误。

当我连续打多个电话时，这通常会抬起头来。

目前，我正在从 JQuery 进行多个 ajax 获取时复制它。

我怀疑问题在于我的 NHibernate 会话管理。

我唯一能想到的是调用是有人使用***同一个***会话，第一个完成并关闭它，然后下面的调用无法完成。

由于我的会话处理方式是这样的，这不应该是可能的：

```
Kernel.Register(
                Component.For<ISessionFactory>()
                                .UsingFactoryMethod(_ => config.BuildSessionFactory()),
                Component.For<ISession>()
                                .UsingFactoryMethod(k => k.Resolve<ISessionFactory>().OpenSession())
                                .LifestylePerWebRequest()); 
```

每个请求应该是一个会话吗？

还有什么方法，或者我还能在哪里寻找问题？我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:04:33.530

当然几分钟后解决了这个问题，但答案让我大开眼界。

[这个答案](https://stackoverflow.com/a/4561223/148998)使我走上了正确的道路。

虽然我所有的存储库、管理器和其他层都是使用 Castle Windsor 以正确的生活方式安装的，但有一个不是。

我正在从 ActionFilter 进行存储库调用，我的所有操作过滤器都是通过 ActionInvoker 类调用的，该类错误地注册为 Singleton，这导致了我的错误。

```
container.Register(Component.For<IActionInvoker>()
                                    .ImplementedBy<WindsorActionInvoker>()
                                    .LifeStyle.***Singleton***); 
```

当然应该是

```
container.Register(Component.For<IActionInvoker>()
                                    .ImplementedBy<WindsorActionInvoker>()
                                    .LifeStyle.Transient); 
```

再次提醒您密切关注这些生活方式。

# git - Git 集成管理器工作流程

> ID：13522488
> 
> 赞同：0
> 
> 时间：2012-11-23T02:41:01.963
> 
> 标签：git

[http://www.git-scm.com](http://www.git-scm.com)网站上的书有一些带有解释的工作流示例：http: [//git-scm.com/book/en/Distributed-Git-Distributed-Workflows](http://git-scm.com/book/en/Distributed-Git-Distributed-Workflows)

我需要有关创建集成管理器工作流的步骤/命令的帮助

![在此处输入图像描述](../Images/3f27893a4e030e100e221c090ca97212.png)

以下是我的困惑：

1.  为每个开发人员创建一个 Linux 用户帐户？
2.  为不同文件夹或他们自己的主目录中的每个用户创建一个公共存储库？
3.  Manager 应该通过 SSH 连接到服务器。检查并手动从开发人员的每个公共存储库中提取更新？
4.  最后，在 SSH 登录到服务器后，管理器也会手动完成对“Blessed Repo”的推送吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:52:52.380

为每个开发人员创建一个 Linux 用户帐户？
- 每个开发人员都使用自己的帐户和自己的电子邮件，并上传他们的密钥。

为不同文件夹或他们自己的主目录中的每个用户创建一个公共存储库？
- 将您的项目存储在任何方便的地方。每个人的情况可能不同。无论他们将项目存储在哪里，他们的 .git 目录就在哪里。

Manager 应该通过 SSH 连接到服务器。检查并手动从开发人员的每个公共存储库中提取更新？
- 我建议让它们在分支中工作，然后您可以在代码审查、测试等之后更好地控制合并（参见[https://stackoverflow.com/a/9204499/631619](https://stackoverflow.com/a/9204499/631619)）

最后，在 SSH 登录到服务器后，管理器也会手动完成对“Blessed Repo”的推送吗？
- 是的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:35:27.203

> 为每个开发人员创建一个 Linux 用户帐户？

在一个理想的世界里，你不在乎。

在真实的商业世界中，您为每个开发人员创建一个 Linux 用户帐户，或者您使用[gitosis 之](http://git-scm.com/book/ch4-7.html "Gitosis - 专业 Git")类的东西来处理 git 身份验证。

> 为不同文件夹或他们自己的主目录中的每个用户创建一个公共存储库？

同样，在理想的世界中，每个开发人员都有自己的公共存储库，您不必关心他们在哪里，只要他们在发生更改时让集成商知道。

但是，如果您从事业务，则应该为每个开发人员拥有一个存储库，或者每个开发人员都推送到不同分支的存储库-也许您可以通过服务器上的挂钩来强制执行此操作。

> Manager 应该通过 SSH 连接到服务器。检查并手动从开发人员的每个公共存储库中提取更新？

Manager 并不真正需要到`ssh`服务器 - 这取决于您决定使用的 git 协议。您可以改用 https，它也可以使用。他只需要`push`访问受祝福的存储库，并`pull`访问开发人员的存储库[y/ies]。

> 最后，在 SSH 登录到服务器后，管理器也会手动完成对“Blessed Repo”的推送吗？

同样，集成商使用的协议并不重要。唯一重要的是他可以`push`访问。而且，是的，在测试和检查要集成的变更集后，集成商将手动完成。

PS：我刚刚读到 - 因为我不知道是什么原因 - 他们已经弃用 gitosis 支持[`gitolite`](http://git-scm.com/book/en/Git-on-the-Server-Gitolite "Gitolite - Pro Git").

# python - 樱桃是如何工作的？与龙卷风相比，当并发性较低时，它可以很好地处理请求

> ID：13522495
> 
> 赞同：7
> 
> 时间：2012-11-23T02:42:41.027
> 
> 标签：python, asynchronous, webserver, tornado, cherrypy

我对cherrypy（使用web.py作为框架）和tornado从互联网上检索网页进行了测试。

我有三个测试用例`siege`用于向服务器发送请求（-c 表示用户数；-t 是测试时间）。代码在测试结果下方。

## 1\. web.py (cherrpy)

```
 siege ip -c20 -t100s             server can handle 2747requests  
  siege ip -c200 -t30s             server can handle 1361requests
  siege ip -c500 -t30s             server can handle 170requests 
```

## 2.龙卷风同步

```
 siege ip -c20 -t100s             server can handle 600requests  
  siege ip -c200 -t30s             server can handle 200requests
  siege ip -c500 -t30s             server can handle 116requests 
```

## 3\. 龙卷风异步

```
 siege ip -c20 -t100s             server can handle 3022requests  
  siege ip -c200 -t30s             server can handle 2259requests
  siege ip -c500 -t30s             server can handle 471requests 
```

## 性能分析：

tornado 同步 < web.py (cherrypy) < tornado 异步

## 问题一：

我知道，使用异步架构可以显着提高 Web 服务器的性能。

我很好奇 tornado 异步架构和 web.py (cherry) 之间的区别。

我认为龙卷风同步模式会一一处理请求，但是cherrypy是如何工作的，使用多个线程呢？但是我没有看到内存有很大的增加。Cherrypy 可能会同时处理多个请求。它是如何解决程序阻塞的？

## 问题2：

我可以在不使用异步技术的情况下提高 tornado 同步模式的性能吗？我认为龙卷风可以做得更好。

## ***Web.py 代码：***

```
import web
import tornado.httpclient
urls = (
    '/(.*)', 'hello'
)
app = web.application(urls, globals())

class hello:
    def GET(self, name):
        client = tornado.httpclient.HTTPClient()
        response=client.fetch("http://www.baidu.com/")
        return response.body

if __name__ == "__main__":
    app.run() 
```

## ***龙卷风同步：***

```
import tornado.ioloop
import tornado.options
import tornado.web
import tornado.httpclient
from tornado.options import define, options
define("port", default=8000, help="run on the given port", type=int)
class IndexHandler(tornado.web.RequestHandler):
    def get(self):
        client = tornado.httpclient.HTTPClient()
        response = client.fetch("http://www.baidu.com/" )
        self.write(response.body)

if __name__=='__main__':
    tornado.options.parse_command_line()
    app=tornado.web.Application(handlers=[(r'/',IndexHandler)])
    http_server=tornado.httpserver.HTTPServer(app)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start() 
```

## ***龙卷风异步：***

```
import tornado.httpserver
import tornado.ioloop
import tornado.options
import tornado.web
import tornado.httpclient
from tornado.options import define, options
define("port", default=8001, help="run on the given port", type=int)
class IndexHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        client = tornado.httpclient.AsyncHTTPClient()
        response = client.fetch("http://www.baidu.com/" ,callback=self.on_response)

    def on_response(self,response):
        self.write(response.body)
        self.finish()

if __name__=='__main__':
    tornado.options.parse_command_line()
    app=tornado.web.Application(handlers=[(r'/',IndexHandler)])
    http_server=tornado.httpserver.HTTPServer(app)
    http_server.listen(options.port)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:56:07.120

要回答问题 1...

Tornado 是单线程的。如果您阻塞主线程，就像您在同步示例中所做的那样，那么在阻塞调用返回之前，该单个线程无法执行任何操作。这将同步示例限制为一次一个请求。

我对 web.py 不是特别熟悉，但是查看[其 HTTP 服务器的源代码，](https://github.com/webpy/webpy/blob/master/web/httpserver.py)它似乎使用了线程混合，这表明它不限于一次处理一个请求。当第一个请求进来时，它由一个线程处理。该线程将阻塞，直到 HTTP 客户端调用返回，但其他线程可以自由处理进一步的传入请求。这允许一次处理更多请求。

我怀疑如果您使用 Tornado 来模拟这一点，例如，通过将 HTTP 客户端请求传递给线程池，那么您会看到类似的吞吐量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-04T09:58:53.467

到目前为止，测试代码中的大部分处理程序时间都花在了`client.fetch(...)`- 有效地等待连接和套接字上的传入数据 - 而不会阻塞潜在的其他 Python 线程。

因此，您的“性能度量”主要取决于相关框架的有效处理程序线程的最大数量以及“百度”服务器允许从您的 IP 获得的最大并行连接数。

`CherryPyWSGIServer` `web.wsgiserver.CherryPyWSGIServer`默认情况下使用的wep.py 的副本`web.httpserver.runsimple()`确实使用线程 - 默认情况下为 10。
线程在这里不会增加内存使用量。大多数内存都由库和 Python 解释器本身消耗。而CherryPyWSGIServer的（10）处理工作线程都是从头开始的。替代的 web.httpserver.runbasic() 也使用线程——通过 Python 的内置 HTTPServer 和`SocketServer.ThreadingMixIn`. 这个为每个请求启动一个新线程。可能“无限”数量的线程 - 但每个请求的线程启动都有开销。

`tornado`异步模式也可能使用更多/无限数量的线程（？），这可以解释此处与 web.py 的区别。

您的测试并没有说明服务器和处理程序框架本身的执行速度。您可以简单地增加 web.py 的 CherryPyWSGIServer 中的最大线程数。以某种方式需要并行执行你`client.fetch(...)`的 's 以获得更多的“性能”。

要测试单纯的服务器/框架速度（开销成本），只需返回字符串或数据库查询或从本地内容呈现的典型完整网页。

一个进程中基于多线程 CPython 的 web&app 服务器最终不能使用超过一个 CPU 内核（今天在服务器硬件上通常可能有 8 个 CPU 内核）——因为 CPython 中的 GIL 仅针对某些 I/O 发布。因此，如果 CPU 负载成为一个因素（而不是网络或数据库速度），则可以考虑使用 Jython 或多进程方法。

# oauth - OAuth 中的 OOB 是什么？

> ID：13522497
> 
> 赞同：14
> 
> 时间：2012-11-23T02:42:49.950
> 
> 标签：oauth

我才刚刚开始探索 OAuth 是什么，我对相关术语几乎一无所知。在 PHP 代码片段中，我看到：

```
// Callback can either be 'oob' or a url

$callback='oob'; 
```

我想知道oob是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T02:46:57.283

*oob*通常代表“带外”。我假设这是为了支持通过未指定方法来的 OAuth 响应。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-12-09T10:31:20.393

OOB（“带外”）是 OAuth 流程的传统 3 步流程（称为 3-Legged-OAuth）的替代方案。授予消费者访问权限后，用户不会被重定向，而是向用户显示一个代码，他需要在消费者应用程序中手动输入该代码。差异在下面的**步骤 2b**中进行了概述。

**OAuth1a 流程**：

`request_token`第 1 步：获取可用于访问用户授权 URL的短暂生命周期。

第 2 步：使用`request_token`访问并向用户显示用户授权 URL。用户将看到一个可以接受或拒绝访问的屏幕；典型的“您想代表您授予 App ABC 访问权限吗？”。

步骤 2a（回调 url）：如果`callback_url`提供了 a，用户将被重定向到该回调 URL。该 URL 将包含`oauth_verifier`包含第 3 步所需的代码的参数。

**Step 2b (callback is `oob`)** : 如果`callback_url`设置为`oob`，用户将不会被重定向。相反，`oauth_verifier`代码会显示给用户。这必须由提供者实施。用户可以在消费者应用程序（通常是移动应用程序或任何其他非基于浏览器的应用程序）中使用此代码继续执行步骤 3。

第 3 步：`oauth_verifier`代码（和请求令牌）用于获得长期存在的`access_token`. 消费者现在可以在他的 OAuth 调用中使用此令牌调用提供者的 (REST)-API（请求仍然需要其他 OAuth 参数并且需要签名等）。

更多信息：

[使用 Twitter API 进行基于 Pin 的授权](https://developer.twitter.com/en/docs/basics/authentication/overview/pin-based-oauth)

[OAuth1a 核心规范 - 请求 URL](https://oauth.net/core/1.0a/#request_urls)

# java - jdbc 创建表时出错

> ID：13522499
> 
> 赞同：1
> 
> 时间：2012-11-23T02:42:57.840
> 
> 标签：java, sql, jdbc, derby

> **可能重复：**
> [使用 NetBeans IDE 在 Java DB 中创建自动增量键](https://stackoverflow.com/questions/3308329/create-autoincrement-key-in-java-db-using-netbeans-ide)

我正在尝试在 netbeans 中创建一个表，使用 -

```
CREATE TABLE Persons (
    P_Id int NOT NULL AUTO_INCREMENT,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Address varchar(255),
    City varchar(255),
    PRIMARY KEY (P_Id)
) 
```

但我收到以下错误 -

> 语法错误：在第 3 行第 19 列遇到“AUTO_INCREMENT”。第 1 行，第 1 列

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:31:43.657

尝试删除下划线。我认为您还可以将主键声明与列结合起来，如下所示：

```
CREATE TABLE Persons (
    P_Id integer primary key autoincrement,
    LastName varchar(255) NOT NULL,
    FirstName varchar(255),
    Address varchar(255),
    City varchar(255)
) 
```

# jquery - jQuery验证启动

> ID：13522504
> 
> 赞同：0
> 
> 时间：2012-11-23T02:44:11.217
> 
> 标签：jquery, jquery-validate

我知道这真的很基本，但我正在尝试获取一个表单元素来验证 onblur 或在打字时。我很难让事情正常运行。

```
$('document').ready(function(){
    $('form').validate({
       rules: {
                a: {
                    onkeyup:true,
                    required:true,
                    minlength:2
                   }
        },      
        messages: {
                a: {
                    required: "enter your name!"
                   }       
        }  

    }); 
 }); 
```

我可以让这件事部分工作......但我必须在输入内容后点击进出输入。为什么是这样？然后我添加了这个

```
 $('#a').blur(function(){
        $("form").validate().element("#a");
    }); 
```

它适用于模糊，但是当我返回并输入有效条目时，错误消息不会消失。这是html：

```
<div>
<form action="#">
    <input type="text" name="a" id="a">
</form>
</div> 
```

这是小提琴：

[http://jsfiddle.net/mmw562/S7AKK/16/](http://jsfiddle.net/mmw562/S7AKK/16/)

[http://jsfiddle.net/mmw562/S7AKK/17/](http://jsfiddle.net/mmw562/S7AKK/17/)

有人可以解释发生了什么吗？我当然感谢您的帮助，即使我知道这是非常基本的东西....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:41:54.703

[根据文档](http://docs.jquery.com/Plugins/Validation/validate#toptions)，`onkeyup:`是一个`.validate()`选项，而不是字段验证规则。您必须相应地放置它...

```
$('document').ready(function(){
    $('form').validate({

    // "onkeyup" is the default behavior, leave it out unless disabling
    // onkeyup: false,  

       rules: {
            a: {
                required:true,
                minlength:2
            }
        },      
        messages: {
            a: {
                required: "enter your name!"
            }       
        }  

    }); 
}); 
```

* * *

**编辑：**

`onkeyup:`是默认行为，因此只需将其保留为默认行为。将其设置`true`为不仅是多余的，而且实际上会破坏其预期功能。

如果您需要禁用它，请将其设置为`false`：

```
onkeyup: false 
```

如果您需要更改 的默认行为`onkeyup`，请使用以下函数：

```
onkeyup: function(element, event) {
   // your custom onkeyup functionality
} 
```

仅供参考，这是默认`onkeyup:`函数的操作方式：

```
onkeyup: function(element, event) {
    if ( event.which === 9 && this.elementValue(element) === '' ) {
        return;
    } else if ( element.name in this.submitted || element === this.lastActive ) {
        this.element(element);
    }
} 
```

# redis - 带有 serviceStack Redis 的透明 Redis Dal

> ID：13522505
> 
> 赞同：2
> 
> 时间：2012-11-23T02:44:26.207
> 
> 标签：redis, servicestack

是的，我在这里有另一个奇怪的问题:)

我尝试实现透明的 Redis 数据访问层。

我将急切地加载 N*1 和 1*1 关系，懒惰地加载 N*N 和 1*N 关系。

```
public class User
{
   public long CityId {get;set;} 

   [EagerLoading]
   [IgnoreDataMember]
   public City {get;set;}
}

public class City
{
  public ICollection<long> UserIds {get;set;}

  [LazyLoading]
  [IgnoreDataMember] 
  public ICollection<User> Users{get;set;}
} 
```

CUD 操作（创建、更新、删除）没有问题。我可以存储完整的对象层次结构。

但我需要非类型化的 Get 方法来检索对象。

```
public class GenericRedisRepository
{
     public object Get(string objectUrn)
     {
        using (var r = RedisManager.GetReadOnlyClient())
        {
            var pocoObject=r.GetObject(objectUrn); // I COULD NOT FIND THIS METHOD
            foreach (var property in ReflectionHelper.GetEagerLoadingProperties(pocoObject))
            {
                // Fixup relations and load all EagerLoading properties recursively
            } 
        }
     }
} 
```

任何想法或替代方式..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T13:16:54.037

对不起，来晚了。我想知道为什么您坚持使用属性而不是本质上未序列化/反序列化的方法：

```
public class User
{
   public long Id { get; set; }
}

public class City
{
  public IEnumerable<long> UserIds { get; set; }

  public IEnumerable<User> GetUsers()
  {
      using (var userData = redis.As<User>())
          return userData.GetByIds(UserIds);
  }
} 
```

这样，您可以`GetUsers()`在真正需要用户时通过调用来延迟加载用户：

```
var city = redis.As<City>().GetById(id);
...
var users = city.GetUsers(); 
```

# zsh - 我不能使用来自 ipython 的 zsh 别名命令

> ID：13522506
> 
> 赞同：2
> 
> 时间：2012-11-23T02:44:56.880
> 
> 标签：zsh, ipython

我发现我不能使用别名命令让 zsh 像在 ipython 中一样工作，`! alias_command`但`! system_command`确实有效。谁能帮我解决这个问题？另外，.zshrc 中的自定义函数在 ipython 中对我不起作用。

# symfony - FOSUserBundle：处理不同类型的用户

> ID：13522522
> 
> 赞同：1
> 
> 时间：2012-11-23T02:47:15.777
> 
> 标签：symfony, fosuserbundle

我正在开始一个新项目，使用 symfony2 架构和有用的 FosUserBundle 来处理我的用户。

在我的应用程序中，我有 2 种不同类型的用户，它们是：用户和企业。

我创建了一个用户表单（其中嵌入了表单）。现在我想创建一个 EntrepriseForm （具有不同的嵌入式表单），但我被卡住了，因为 FosUserConfiguration 只允许 1 个注册表单类型。

如果有帮助，我的 config.yml 如下所示：

```
fos_user:
db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
firewall_name: main
user_class: Digin\UserBundle\Entity\User
registration:
    confirmation:
        from_email: # Use this node only if you don't want the global email address for the confirmation email
            address:        xxx@xxx.org
            sender_name:    xxx
        enabled:    true # change to true for required email confirmation
        template:   FOSUserBundle:Registration:email.txt.twig
    form:
        type:               mybundle_user_registration
        handler:            fos_user.registration.form.handler.default
        name:               fos_user_registration_form
        validation_groups:  [Registration] 
```

关于我应该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:36:53.417

在您的位置上，我将在您的位置添加一个新角色`security.yml`（记住以`ROLE_`symfony 开头忽略其他角色）。然后添加侦听器`InteractiveLoginListener`以在登录不同角色后执行一些额外的重定向。然后添加[JMSSecurityExtraBundle](https://github.com/schmittjoh/JMSSecurityExtraBundle)，这将帮助您仅通过注释来验证 accions 和控制器中的访问：

```
use JMS\SecurityExtraBundle\Annotation\PreAuthorize;

class MyService
{
    /** @PreAuthorize("hasRole('A') or (hasRole('B') and hasRole('C'))") */
    public function secureMethod()
    {
        // ...
    }
} 
```

查看文档：http: [//jmsyst.com/bundles/JMSSecurityExtraBundle/master/installation](http://jmsyst.com/bundles/JMSSecurityExtraBundle/master/installation)

# java - 如何从另一个方法返回一串数组？

> ID：13522523
> 
> 赞同：3
> 
> 时间：2012-11-23T02:47:31.293
> 
> 标签：java, arrays, methods

这是我正在上的一门课的作业。所以我不指望任何人为我写代码，只是伪代码的指导很棒:)

所以我的老师给了我一个主要的方法。此方法创建一个对象数组，将它们按字母顺序排序，然后使用“System.out.println(loans[0].Schedule());”调用另一个方法。此方法应打印出该贷款的时间表。它是什么有点无关紧要，所以我不会详细介绍它，但该方法中有一个 2D 数组。

您可能知道，Schedule 方法不能为空（我不知道为什么，它只是给了我一个错误）。所以我尝试将其设为“public String[][] Schedule()”，但我的老师说这不起作用，因为它被称为“System.out.println(loans[0].Schedule()); "，println 无法处理打印完整的二维数组。

有没有人有其他选择？感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:50:23.770

如果您像上面提到的那样调用它`System.out.println(loans[0].schedule());`，那么该`schedule()`方法必须返回一个字符串，而不是字符串数组，不是字符串的二维数组，而是单个字符串，因为这是 println 所期望的（或者具有不错的`toString()`方法覆盖的对象，但这是另一个讨论的主题）。

请注意，该`schedule()`方法应以小写字母开头以符合 Java 命名约定。

另请注意，`schedule()`不能返回 void 的原因是因为它必须返回一个对象`println(...)`才能打印该方法。

有关此答案的更多详细信息，您可能需要提供有关您的问题的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:02:36.370

很有帮助的答案！谢谢！

在我的日程安排方法中，我必须实际生成一个日程安排，可以是行和行长，并带有计算。您是否建议我继续将这些连接到一个单一的刺痛？

例如：

```
String schedule = ""
for(int i = 1; i <= term + 1; i++)
{
  schedule += i + ":";
  schedule += payment + "";
  //And so on so on for the rest of the schedule
} 
```

# optimization - 为什么 movlps 和 movhps SSE 指令在传输未对齐数据方面比 movups 更快？

> ID：13522525
> 
> 赞同：5
> 
> 时间：2012-11-23T02:47:38.327
> 
> 标签：optimization, assembly, sse

我发现在一些用于进行数学计算的 SSE 优化代码中，它们使用 movlps 和 movhps 指令的组合而不是单个 movups 指令来传输未对齐的数据。不知道为什么，我自己试了一下，是下面的伪代码：

```
struct Vec4
{
    float f[4];
};

const size_t nSize = sizeof(Vec4) * 100;
Vec4* pA = (Vec4*)malloc( nSize );
Vec4* pB = (Vec4*)malloc( nSize );
Vec4* pR = (Vec4*)malloc( nSize );

...Some data initialization code here
...Records current time by QueryPerformanceCounter()

for( int i=0; i<100000, ++i )
{
    for( int j=0; j<100; ++j )
    {
          Vec4* a = &pA[i];
          Vec4* b = &pB[i];
          Vec4* r = &pR[i];
          __asm
          {
              mov eax, a
              mov ecx, b
              mov edx, r

              ...option 1:

              movups xmm0, [eax]
              movups xmm1, [ecx]
              mulps xmm0, xmm1
              movups [edx], xmm0

              ...option 2:

              movlps xmm0, [eax]
              movhps xmm0, [eax+8]
              movlps xmm1, [ecx]
              movhps xmm1, [ecx+8]
              mulps xmm0, xmm1
              movlps [edx], xmm0
              movhps [edx+8], xmm0
         }
    }
}

...Calculates passed time

free( pA );
free( pB );
free( pR ); 
```

我多次运行代码并计算了它们的平均耗时。

对于 movups 版本，结果大约是 50 毫秒。

对于movlps，movhps版本，结果大约是46ms。

而且我还尝试了一个数据对齐版本，在结构上使用 __declspec(align(16)) 描述符，并由 _aligned_malloc() 分配，结果大约是 34 毫秒。

为什么 movlps 和 movhps 的组合更快？这是否意味着我们最好使用 movlps 和 movhps 而不是 movups？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T08:33:21.560

这一代的 Athlon (K8) 只有 64 位宽的 ALU 单元。因此，每条 128 位 SSE 指令都需要拆分为两条 64 位指令，这会导致某些指令的开销。

在这种类型的处理器上，与相同的 MMX 代码相比，您通常会发现使用 SSE 没有加速。

在 Intel、AMD 和 VIA CPU 的微架构中引用 Agner Fog [：汇编程序员和编译器制造商的优化指南：](http://www.agner.org/optimize/microarchitecture.pdf)

> 12.9 64 位与 128 位指令
> 
> 在 K10 上使用 128 位指令是一个很大的优势，但在 K8 上则不然，因为每条 128 位指令在 K8 上被分成两个 64 位宏操作。
> 
> 128 位存储器写入指令在 K10 上作为两个 64 位宏操作处理，而 128 位存储器读取是通过 K10 上的单个宏操作（K8 上的 2 个）完成的。
> 
> 128 位内存读取指令仅使用 K8 上的 FMISC 单元，但使用 K10 上的所有三个单元。因此，在 k8 上使用 XMM 寄存器将数据块从一个内存位置移动到另一个内存位置是不利的，但在 K10 上是有利的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:12:59.887

movups 适用于非对齐数据。movlps, movhps 仅适用于对齐数据。当然movlps，movhps更快。对于时间计算和比较，最好使用 rdtsc，而不是 ms。

# r - 计算具有多列的 xts 对象的返回

> ID：13522528
> 
> 赞同：4
> 
> 时间：2012-11-23T02:48:03.570
> 
> 标签：r, xts, quantmod

计算 (nxm) xts 对象的回报最直接的方法是什么？

当我将 (nxm) xts 对象`mxts`输入`quantmod`函数`dailyReturn`时，返回值是 (nx 1) 向量，表示第一列的返回。我正在寻找的是一种生成 (nxm) xts 对象的方法，该对象包含`mxts`.

我尝试使用一些应用功能，例如

```
lapply(mxts,dailyReturn) 
```

但是返回的类型总是错误的并且丢失了标签（`dailyReturn`将向量的值更改`colnames`为“daily.returns”）。

有没有一种简单、简单的方法来实现这一目标？我可能为这个问题使用了错误的功能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:59:52.810

TTR 包中的`ROC`函数将执行此操作，但您可以轻松地自己使用`lag`（这是`ROC`内部执行的）进行计算。

```
R> require(quantmod)  # loads TTR
R> getSymbols("SPY")
R> head(ROC(OHLC(SPY)))
                SPY.Open      SPY.High       SPY.Low     SPY.Close
2007-01-03            NA            NA            NA            NA
2007-01-04 -0.0071963059 -5.686021e-03  0.0002845153  0.0021198425
2007-01-05  0.0007078143 -4.586355e-03 -0.0016370693 -0.0080082636
2007-01-08 -0.0036151023  7.071886e-05 -0.0009264869  0.0046143553
2007-01-09  0.0034735795  1.342709e-03  0.0010689472 -0.0008502799
2007-01-10 -0.0051793368 -2.118869e-04 -0.0007125045  0.0033261416 
```

# .htaccess - htaccess - 如何将旧网址重定向到新的漂亮网址？

> ID：13522529
> 
> 赞同：0
> 
> 时间：2012-11-23T02:48:04.930
> 
> 标签：.htaccess, opencart

我正在使用 opencart seo url，它们工作正常。问题是我也可以访问导致重复内容的旧网址。

**例子：**

我的新 SEO 网址是： [http ://site.com/blue-widgets](http://site.com/blue-widgets)

问题是我也可以访问旧的，我害怕因具有重复内容而受到搜索引擎的惩罚： [http ://site.com/index.php?route=product/category&path=113](http://site.com/index.php?route=product/category&path=113)

```
RewriteBase /
RewriteRule ^sitemap.xml$ index.php?route=feed/google_sitemap [L]
RewriteRule ^googlebase.xml$ index.php?route=feed/google_base [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !.*\.(ico|gif|jpg|jpeg|png|js|css)
RewriteRule ^([^?]*) index.php?_route_=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:58:28.897

我认为重复内容的问题是 OpenCart 中的一种不足。

**但是**，如果您开始**只**使用SEO URL，并且如果您确定没有旧链接可以被机器人找到并跟踪/索引的具体产品，那么您是安全的。

如果您在您的 eshop 中同时使用旧 URL 和新 URL（例如动态生成的 SEO 和在信息页面某处硬写的旧 URL……），Google（和其他人）可能会惩罚您。

还有其他可能的重复内容问题 - 考虑与更多类别链接的产品（如果产品链接到第三级类别，它也应该链接到其第二级父级和第一级父级） - 然后您可以从它链接到的每个类别访问该产品，并且 URL 总是不同的（假设[http://my.shop.com/televisions/3d-led-samsung与](http://my.shop.com/televisions/3d-led-samsung)[http://my](http://my.shop.com/televisions/3d/3d-led-samsung)是相同的产品[.shop.com/televisions/3d/3d-led-samsung](http://my.shop.com/televisions/3d/3d-led-samsung)和[http://my.shop.com/televisions/3d/led/3d-led-samsung](http://my.shop.com/televisions/3d/led/3d-led-samsung)） - 但在这里谷歌不应该惩罚你的电子商店3d-led-samsung 产品的名称始终相同，Google 应该能够识别它。

所以我不会害怕这个。

**编辑：**正如**Stann0rz**指出的，OpenCart 自动使用`canonical`链接，因此没有理由害怕谷歌会因重复内容而惩罚你。问题解决了！

# c++ - 编译器优化合并相同的函数实现意味着要在运行时绕行的存根

> ID：13522531
> 
> 赞同：1
> 
> 时间：2012-11-23T02:48:38.680
> 
> 标签：c++, compiler-optimization, detours

我有一个 C++ 测试项目，其中包含一堆具有相同实现的存根函数。这些存根旨在使用 Windows Detours 在运行时“替换”。问题是，在发布模式下，编译器使所有这些存根指向相同的实现。为了说明这一点，请考虑以下代码：

```
#include <iostream>
using namespace std;

void A() { cout << "stub" << endl; }
void B() { cout << "stub" << endl; }

void main()
{
    cout << &A << ", " << &B << endl;
} 
```

在调试模式下，指针值会有所不同。在发布模式下，它们是相同的。我尝试了编译指示优化指令（我使用的是 Microsoft 编译器），但它没有解决问题。结果，我的 Windows Detours 挂钩拦截了对相同存根的所有调用。

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:58:11.210

尝试使用预处理器宏使您的存根函数独一无二，这样优化器就不会将它们合并为一个。

[__FILE__、__LINE__ 和 __FUNCTION__ 在 C++ 中的用法](https://stackoverflow.com/questions/597078/file-line-and-function-usage-in-c)

像这样的东西：

```
void A() { cout << __FUNCTION__ << endl; }
void B() { cout << __FUNCTION__ << endl; } 
```

# javascript - 在 Firefox 中加载图像时显示边框和标题

> ID：13522532
> 
> 赞同：11
> 
> 时间：2012-11-23T02:48:44.620
> 
> 标签：javascript, css, loader

我有火狐的问题。在我的网站上，我有很多图像。当我在 Firefox 中浏览页面时，加载图像时可以看到边框和图像标题。下载完成后，此边框/标题将消失并替换为图像。

这只发生在 Firefox 中。Chrome 和其他浏览器加载的图像没有任何边框和标题，看起来更“干净”。换句话说，firefox制作的这些边框是丑陋的。

我可以删除它，用装载机或类似的东西代替吗？我尝试使用 background-image:url()... 添加 css 加载程序，认为这些边框不可见，但是，它们仍然存在。

pinterest、dribbble 等网站如何在 Firefox 中提供图片而不产生边框？

谢谢

![加载图像时 Firefox 中的边框](../Images/b7e4e86c04058fb75a2ef64f8345f194.png)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-23T02:58:22.610

您可以使用[:-moz-loading 伪类](https://developer.mozilla.org/en-US/docs/CSS/%3a-moz-loading)将其设置为不出现。像这样的东西应该工作：

```
img:-moz-loading {
    visibility: hidden;
} 
```

另一种方法是类似于 AJAX 加载脚本，它将在后台加载图像并显示加载对话框或动画。有很多技术可以做到这一点，在这里或谷歌上搜索应该会提示很多很多关于如何有效地做到这一点的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T22:18:34.033

您无需使用 CSS 显式等待加载。您也可以在 javascript 中执行此操作。

```
 var img = document.getElementById("some-image");
    img.style.display = "none";
    //...
    //add to dom etc...
    //..
    img.onload = function () {
        img.loaded = true;
        img.style.display = "inherit";
    } 
```

# java - 如何使用 java api 在谷歌日历中检索事件开始时间？

> ID：13522533
> 
> 赞同：1
> 
> 时间：2012-11-23T02:48:45.570
> 
> 标签：java, google-app-engine, google-calendar-api

我进行了很多搜索，但找不到我正在寻找的信息。我正在使用 java 在谷歌应用引擎中尝试谷歌日历应用程序。我无法弄清楚如何检索日历事件的开始时间。CalendarEventEntry 类中的“何时”字段不存在（我检查了较旧的帖子并尝试遵循这些答案）。getTimes() 方法返回 DateTime 条目的列表，但我不确定它们是什么。这是我的代码片段 -

```
CalendarEventFeed resultFeed = service.getFeed(Films_Url, CalendarEventFeed.class);                              
for (int i = 0; i < resultFeed.getEntries().size(); i++) 
{
CalendarEventEntry entry = resultFeed.getEntries().get(i);               
Entity Film = new Entity("Films_and_Movies",Film_and_Movie_key);                       
Film.setProperty("title",entry.getTitle().getPlainText());                  
Film.setProperty("time",entry.getUpdated().toUiString());                   
DatastoreService datastorE = DatastoreServiceFactory.getDatastoreService(); 
datastore.put(Film);                
} 
```

entry.getUpdated() 确实返回一个 DateTime 对象，但它是更新事件的时间，而不是开始时间。我尝试使用 entry.when.startDate，但正如我之前所说，CalendarEventEntry 类中不存在“何时”。我尝试使用 EventEntry 而不是 CalendarEntry 但我认为前者在最近的更新中不再存在。有人可以指导我吗？

# php - PHP中的比特币当前价值？

> ID：13522535
> 
> 赞同：2
> 
> 时间：2012-11-23T02:48:51.957
> 
> 标签：php, bitcoin

我想在 HTML 文档上显示“当前比特币价格”。我找到了[https://mtgox.com/api/0/data/ticker.php](https://mtgox.com/api/0/data/ticker.php)，它返回：

```
{"ticker":{"high":12.43,"low":11.7,"avg":12.10615987,"vwap":12.098317306,"vol":58453,"last_all":12.34351,"last_local":12.34351,"last":12.34351,"buy":12.3341,"sell":12.34351}} 
```

如何将 PHP 变量设置为`last_all`(12.34351) 的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T02:54:49.320

这是一个 JSON 文档。通过使用`json_decode`，您可以将其转换为 PHP 对象或 PHP 数组（如果您将可选的第二个参数设置为 true），如此处文档中[所述](http://php.net/manual/en/function.json-decode.php)。

```
$content = json_decode($string, true);
echo $content["last_all"]; 
```

# .net - 使用正则表达式提取括号内的文本及其出现的实例

> ID：13522551
> 
> 赞同：0
> 
> 时间：2012-11-23T02:52:06.983
> 
> 标签：.net, regex, vb.net, string, visual-studio-2010

**编辑**：我让事情变得更加混乱，而不是应该如此。这是我需要做的。

我有三个文本框

在我的程序中，用户`(this) is (this)`在第一个文本框中键入。

当按下按钮时，我需要提取括号中的第一个字符串并将其放入 textbox2，然后从括号中的第二个字符串中提取文本并将其放入 textbox3。我该怎么做呢？

**编辑**：我现在使用大卫的建议，但它没有返回值。这就是我使用它的方式：

```
 Dim expression As New Regex("\((.*)\)\s*is\s*\((.*)\)")
     ' expression = "\((.*)\)\s*is\s*\((.*)\)"
         Dim matches As MatchCollection = Regex.Matches(CurrentInstruction, expression.ToString())
          MessageBox.Show(matches.Item(0).ToString() & "" & matches.Item(1).ToString()) 
```

这就是我正在输入的内容：

```
if ComparePixelColor (25,15) is (27) = true then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:05:30.333

此正则表达式将为您提供以开放括号开头并以闭合括号结尾的每组子字符串：

```
 \([^)]*\) 
```

虽然您没有问，但我怀疑您会想要解析第二个括号组中的颜色参数。

此基本代码演示了使用正则表达式提取带括号的组。

```
dim paren as new RegEx("\([^)]*\)")
dim command as string = "Prefix (123, 45) if (blue)"

dim matches as MatchCollection

matches = paren.Matches(command)

matches.Dump()

dim m as Match

for each m in matches
   Console.WriteLine("M='{0}'", m)
next 
```

一旦你有一个只包含“(123, 45)”或类似的字符串，它就很容易分解。

使用 substring 去掉括号，用逗号分割，然后取值。

* * *

但是，为了说明，如果您只想要第一组（这是我为您编写此答案时您的问题的阅读方式），这将起作用：

```
dim paren as new RegEx("\([^)]*\)")
dim command as string = "Prefix (123, 45) if (blue)"

dim matches as MatchCollection
dim m as Match

m = paren.Match(command)

dim ms as string = m.Value

ms = ms.Substring(1, ms.Length -2) ' Take off the parens

dim parts as string() = ms.Split(",")

dim x as string = parts(0).Trim()
dim y as string = parts(1).Trim() 
```

我强烈推荐免费的 linqpad

[http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http%3A%2F%2Fwww.linqpad.net%2F&ei=SPauUM3oGK640gGNroGYAg&usg=AFQjCNFw-ZpPkP4je7u9udiur5Wg5us7tQ](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http%3A%2F%2Fwww.linqpad.net%2F&ei=SPauUM3oGK640gGNroGYAg&usg=AFQjCNFw-ZpPkP4je7u9udiur5Wg5us7tQ)

快速尝试代码并学习。这就是我为你编写这个 VB 代码的方式，尽管我通常用 C# 编写 .Net 的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:34:03.393

这里有很多我不明白的地方。首先，您的用户实际输入的是什么？您要提取什么值？

其次，如果类似的东西`if CompareThese`是输入的一部分，那么听起来他们正在编写一个程序，具有严格的语法、区分大小写和语言单词。如果是这样，那么这必须是超出您问题范围的语言解析器的一部分。否则，他们究竟能输入什么？

除此之外，我想知道括号是否是输入内容的一部分，还是它们只是标记了问题文本中值的位置？

要回答您的问题，您可以提取`x`和`y`使用`[0-9]+`它们是否是整数。我不知道`colour`可能是什么

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:43:17.373

一个简单的正则表达式应该匹配括号内的两个值。如果您的用户输入格式为 (x) 为 (y)：

```
Dim matches As MatchCollection = Regex.Matches(userInput, "\((.*)\)\s*is\s*\((.*)\)") 
```

matches.Item(0) 应包含 x 的值，matches.Item(1) 应包含 y。如果matches.Count 等于0，则userInput 与表达式不匹配。请注意，这包括括号内的任何字符。

例如，用户输入是：

```
(25,15) is (27) 
```

两场比赛将分别是“25,15”和“27”。

# python - 我什么时候应该在子进程中使用`wait`而不是`communicate`？

> ID：13522556
> 
> 赞同：16
> 
> 时间：2012-11-23T02:53:21.540
> 
> 标签：python, subprocess, pipe, wait, communicate

在等待文档（http://docs.python.org/2/library/subprocess.html#subprocess.Popen.wait）中，它说：

> 警告
> 
> 这将在使用 stdout=PIPE 和/或 stderr=PIPE 时发生死锁，并且子进程会向管道生成足够的输出，从而阻塞等待 OS 管道缓冲区接受更多数据。使用communicate() 来避免这种情况。

由此，我认为`communicate`可以替换所有不需要的if**用法。**甚至当or不是 PIPE 时，我也可以替换为.`wait()``retcode``stdout``stdin``wait()``communicate()`

那正确吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T21:47:16.910

我怀疑（文档在 2.6 中没有明确说明）在您不使用 PIPE 的情况下，communicate() 被简化为 wait()。因此，如果您**不**使用 PIPE，则应该可以替换 wait()。

在您使用 PIPE 的情况下，**您**可能会溢出内存缓冲区（请参阅communicate() 注释），就像您可以填满 OS 管道缓冲区一样，因此如果您要处理大量输出，任何一个都不会工作。

在一个实际的笔记中，我已经交流过（至少在 2.4 中）给我每行一个字符，来自程序的输出是基于行的，说得委婉一点是没有用的。

另外，“不需要重新编码”是什么意思？-- 我相信它设置 Popen.returncode 就像 wait() 一样。

# c++ - eclipse cdt 调试信息

> ID：13522557
> 
> 赞同：1
> 
> 时间：2012-11-23T02:53:46.937
> 
> 标签：c++, eclipse, eclipse-cdt

我正在尝试将 eclipse 用作 C++ IDE。

在 eclipse for java 开发人员中，当发生运行时错误时，控制台会打印出异常的名称和堆栈跟踪。

与面向 java 开发人员的 eclipse 不同，eclipse cdt 控制台提供的反馈很少。遇到错误时，控制台会在其标题中简单地说“终止”。而且，我看不出是否存在内存泄漏。我应该调整一些设置吗？或者 eclipse 只是不支持像 java 那样的花哨功能？

# html - 带有 JQuery Mobile 的 Mobiscroll：年份部分未被识别

> ID：13522564
> 
> 赞同：0
> 
> 时间：2012-11-23T02:54:48.003
> 
> 标签：html, jquery-mobile, mobiscroll

我无法让 Mobiscroll 识别日期的年份部分。见下图：

![Mobiscroll 年](../Images/10079386762b22f7359f4f0464c8d3cc.png)

**JS**

```
$('.datepicker').scroller({
            preset: 'date',
            theme: 'jqm',
            display: 'bottom',
            mode: 'scroller',
            dateOrder: 'yyyy-mm-dd',
            dateFormat: 'yyyy-mm-dd'
        }); 
```

这是一个错误吗？我该怎么做才能让 Mobiscroll 识别给定的年份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:41:53.823

不支持将“yyyy”作为日期格式。使用“yy”表示四位数年份。

[http://docs.mobiscroll.com/datetime-preset](http://docs.mobiscroll.com/datetime-preset)

# php - 第一个数据支付网关问题

> ID：13522566
> 
> 赞同：3
> 
> 时间：2012-11-23T02:55:07.280
> 
> 标签：php, curl, payment-gateway, firstdata

**我正在尝试在我的站点配置文件中为 FirstData Payment Gateway 整合 First data Payment Getway**

```
define("FDAPI_URL","https://ws.merchanttest.firstdataglobalgateway.com/fdggwsapi/services/order.wsdl");
define("FD_USERPWD","WSXXXXXXXX._.1:XXXXXXXX");
define("FD_SSLCERT", "/home/flagcases/domains/usaflagcases.com/public_html/certificate/WSXXXXXXXX._.1.pem"); 
define("FD_SSLKEY","/home/flagcases/domains/usaflagcases.com/public_html/certificate/WSXXXXXXXX._.1.key"); 
define("FD_SSLKEYPASSWD", "ckp_XXXXXXXX"); 
$ch = curl_init(FDAPI_URL);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Content-Type: text/xml"));
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, FD_USERPWD);
curl_setopt($ch, CURLOPT_POSTFIELDS, $body);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_SSLCERT, FD_SSLCERT);
curl_setopt($ch, CURLOPT_SSLKEY, FD_SSLKEY);
curl_setopt($ch, CURLOPT_SSLKEYPASSWD, FD_SSLKEYPASSWD);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch); 
if ($result === false)
{
    echo curl_error($ch);
} 
```

总是出现 **无法使用客户端证书的卷曲错误（找不到密钥或密码错误？）卷曲错误**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:51:58.697

请尝试添加 WSXXXXXXXX。*.1.p12 可能会对您有所帮助...您在哪里添加了 WSXXXXXXXXX。*.1.pem 和 WSXXXXXXXXX._.1.key

# android - 地图上的android方向

> ID：13522569
> 
> 赞同：0
> 
> 时间：2012-11-23T02:56:07.060
> 
> 标签：android, google-maps

我正在为谷歌地图上的方向做一个应用程序。但是当我运行该应用程序时，我遇到了一个问题`11-23 09:39:16.111: E/MapActivity(572): Couldn't get connection factory client`，它没有在 Map 上显示/绘制 des 和 source。你能帮助我吗！

源代码

**主要**：

```
public class MainActivity extends MapActivity {
private MapView mapView;

@Override
protected boolean isRouteDisplayed() { return false; }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);
    mapView = (MapView)findViewById(R.id.mapview);
    //Example data
    double latitudeFrom = 50.06469036372934;
    double longitudeFrom = 19.944788217544556;
    double latitudeTo = 50.06400165088368;
    double longitudeTo = 19.920390844345093;

    GeoPoint srcGeoPoint = 
        new GeoPoint((int)(latitudeFrom * 1E6), (int)(longitudeFrom * 1E6));
    GeoPoint destGeoPoint = 
        new GeoPoint((int)(latitudeTo * 1E6), (int)(longitudeTo * 1E6));

    drawPath(srcGeoPoint, destGeoPoint, mapView);

    mapView.getController().animateTo(srcGeoPoint);
    mapView.getController().setZoom(15);
}

private void drawPath(GeoPoint src, GeoPoint dest, MapView mapView) {
    String strUrl = "http://maps.google.com/maps?f=d&hl=en";
    //From
    strUrl += "saddr=" +
           (src.getLatitudeE6()/1.0E6) + 
           "," +
           (src.getLongitudeE6()/1.0E6);
    //To
    strUrl += "&daddr=" +
           (dest.getLatitudeE6()/1.0E6) + 
           "," + 
           (dest.getLongitudeE6()/1.0E6);
    //Walk attribute (for walk path)
    strUrl += "&dirflg=w";
    //File format
    strUrl += "&output=kml";

    try {
        //Parse KML
        URL url = new URL(strUrl.toString());

        SAXParserFactory saxFactory = SAXParserFactory.newInstance();
        SAXParser parser = saxFactory.newSAXParser();
        XMLReader reader = parser.getXMLReader();

        KMLHandler kmlHandler = new KMLHandler();
        reader.setContentHandler(kmlHandler);

        InputSource inputSource = new InputSource(url.openStream());
        reader.parse(inputSource);

        String path = kmlHandler.getPathCoordinates();
        //Draw path
        if(path != null) {
            RouteOverlay routeOverlay = new RouteOverlay();

            String pairs[] = path.split(" ");

            for (String pair : pairs) {
                String coordinates[] = pair.split(",");
                GeoPoint geoPoint = new GeoPoint(
                        (int) (Double.parseDouble(coordinates[1]) * 1E6),
                        (int) (Double.parseDouble(coordinates[0]) * 1E6));
                routeOverlay.addGeoPoint(geoPoint);
            }

            mapView.getOverlays().add(routeOverlay);
        }
    } catch (Exception e) {
        Log.w("RoutePath", e.toString());
    }
    }
} 
```

**KML处理程序**：

```
public class KMLHandler extends DefaultHandler {
private boolean inGeometryCollection = false;
private boolean inCoordinates = false;
private String pathCoordinates;

public String getPathCoordinates() { return pathCoordinates; }

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    if(inGeometryCollection && inCoordinates)
        pathCoordinates = new String(ch, start, length);
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if(localName.equals("GeometryCollection")) inGeometryCollection = false;
    else if (localName.equals("coordinates")) inCoordinates = false;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    if(localName.equals("GeometryCollection")) inGeometryCollection = true;
    else if (localName.equals("coordinates")) inCoordinates = true;
}
} 
```

**路线覆盖**：

```
public class RouteOverlay extends Overlay {
private ArrayList<GeoPoint> geoPoints;
private int mRadius = 5;

public RouteOverlay() {
    geoPoints = new ArrayList<GeoPoint>();
}

public void addGeoPoint(GeoPoint gp) {
    geoPoints.add(gp);  
}

@Override
public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
        long when) {
    if (shadow == false) {
        Projection projection = mapView.getProjection();
        Paint paint = new Paint();
        paint.setAntiAlias(true);

        GeoPoint geoPointFrom = null;
        GeoPoint geoPointTo = null;
        Point pointFrom = new Point();
        Point pointTo = new Point();

        //Route
        for (GeoPoint geoPoint : geoPoints) {
            if(geoPointFrom != null) {
                geoPointTo = geoPoint;

                projection.toPixels(geoPointFrom, pointFrom);
                projection.toPixels(geoPointTo, pointTo);

                paint.setColor(Color.GREEN);
                paint.setStrokeWidth(5);
                paint.setAlpha(120);

                canvas.drawLine(pointFrom.x, pointFrom.y, 
                                pointTo.x, pointTo.y, 
                                paint);

                geoPointFrom = geoPointTo;
            } else {
                geoPointFrom = geoPoint;
            }
        }

        //Start point
        paint.setColor(Color.BLUE);
        projection.toPixels(geoPoints.get(0), pointFrom);
        RectF ovalStart = new RectF(pointFrom.x - mRadius, 
                                    pointFrom.y - mRadius,
                                    pointFrom.x + mRadius, 
                                    pointFrom.y + mRadius);
        canvas.drawOval(ovalStart, paint);

        //Stop point
        paint.setColor(Color.RED);
        RectF ovalStop = new RectF(pointTo.x - mRadius, 
                                   pointTo.y - mRadius,
                                   pointTo.x + mRadius, 
                                   pointTo.y + mRadius);
        canvas.drawOval(ovalStop, paint);
    }

    return super.draw(canvas, mapView, shadow, when);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:32:45.900

I think you still need ItemizedOverlay as this is the way the MapActivity knows you have Overlay items. A route is an Overlay. See this SO question: [Android draw route on a Mapview with twoo POI-s](https://stackoverflow.com/questions/4408671/android-draw-route-on-a-mapview-with-twoo-poi-s)

# java - 编译servlet给出错误信息

> ID：13522572
> 
> 赞同：3
> 
> 时间：2012-11-23T02:56:55.220
> 
> 标签：java, servlets

## 我运行以下命令从 HeadFirst Servlets 和 JSP 书中编译一个名为 BeerSelect.java 的 servlet。

D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\webapps\Coffee>javac -classpath /common/lib servlet-api.jar:classes: -d classes src/com/example/网络/啤酒选择.java

我的 servlet-api.jar 位于`D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\common\lib`

## 信息

```
javac: invalid flag: servlet-api.jar:classes:
Usage: javac <options> <source files> use -help for a list of possible options 
```

* * *

无法理解如何修复此命令并编译 servlet。第一次做 servlet 的新手。

然后我将命令更改为

```
D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\webapps\Coffee\WEB-IN
F\src\com\example\web>javac -classpath "D:\Apache Tomcat\apache-tomcat-5.5.36\ap
ache-tomcat-5.5.36\common\lib\servlet-api.jar";classes  BeerSelect.java 
```

## 信息

```
BeerSelect.java:3: package com.example.model does not exist
import com.example.model.*;
^
BeerSelect.java:15: cannot find symbol
symbol  : class BeerExpert
location: class com.example.web.BeerSelect
        BeerExpert be = new BeerExpert();
        ^
BeerSelect.java:15: cannot find symbol
symbol  : class BeerExpert
location: class com.example.web.BeerSelect
        BeerExpert be = new BeerExpert();
                            ^
BeerSelect.java:32: cannot find symbol
symbol  : variable out
location: class com.example.web.BeerSelect
         out.println("<br>try: " + it.next());
         ^
4 errors 
```

为什么找不到 com.example.model 包？

## 图片![在此处输入图像描述](../Images/b5f938337b9cf5b6b3c4132f12df67a4.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:24:15.320

看起来您的命令存在三个问题：多余的空格、Unix 样式的路径名和缺少额外的 Java 源文件。请尝试以下操作：

```
javac -classpath "D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\common\lib\servlet-api.jar";classes -d classes src\com\example\web\*.java src\com\example\model\*.java 
```

我删除了多余的空格，将 Unix 路径转换为 ​​Windows 路径，将类路径分隔符从 Unix 样式的“：”更改为 Windows 样式的“;”，并添加了您的其他 Java 源 - 将它们全部编译在一起应该可以解决您的前三个编译器错误。

至于最后一个编译器错误，这似乎是真正的源代码错误 - 尝试`System.`在该`out.println("<br>try: " + it.next());`行之前添加。（它也可以通过静态导入来解决，但这将是非常规的。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T00:10:17.707

```
D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\webapps\Coffee>javac -classpath "D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\common\lib\servlet-api.jar";"D:\Apache Tomcat\apache-tomcat-5.5.36\apache-tomcat-5.5.36\webapps\Coffee\WEB-INF\src" WEB-INF\src\com\example\web\BeerSelect.java 
```

此命令有效并编译 BeerSelect.java 类。

# android - Android Mediaplayer 音量波动

> ID：13522574
> 
> 赞同：0
> 
> 时间：2012-11-23T02:57:28.507
> 
> 标签：android, audio, android-mediaplayer, volume

我目前正在开发一个必须播放音频的应用程序。我有一种按顺序播放一系列.mp3 的方法。这是方法：

```
/**
 * Plays a series of sounds in order without delay.
 * 
 * @param audioResourceIds
 *          An in-order array of the audio asset resources to play.
 * */
public void playQueuedPlaylist(int[] audioResourceIds)
{
    float lastPlayedSoundDuration;

    for(int i = 0; i<audioResourceIds.length; i++)
    {
        lastPlayedSoundDuration = playMedia(audioResourceIds[i], null);
        try
        {
            Thread.sleep((long)lastPlayedSoundDuration);
        }
        catch(Exception eh)
        {
            Log.v("BulacsAlmighty","Exception caught at playQueuedPlaylist()");
        }
    }
}

/**
 * Used to play voice overs
 * 
 * @param index
 *            id of the sound
 * @param listener
 *            on completion listener
 */

public int playMedia(int index, OnCompletionListener listener) 
{

    MediaPlayer mp = MediaPlayer.create(context, index);
    mp.setVolume(streamVolume, streamVolume);

    stopMedia(index); // Stops the sound if it still is playing.

    mp.start();

    return mp.getDuration();
} 
```

**问题是声音有时不播放。**并且当它们播放时，时间正确，顺序正确，**但是最后播放的音频资源的播放音量明显低于之前播放的其他声音。**

告诉我，我哪里做错了！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T00:01:11.590

只是好奇你为什么打电话

> mp.setVolume(streamVolume, streamVolume);

有吗？真的有必要吗？您没有提到为什么需要从代码中调整音量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:41:26.557

如果您不存储和释放与该曲目相关的曲目，您将如何停止以前的曲目`MediaPlayer`？如何`stopMedia`工作？

`setVolume``MediaPlayer`如果处于*错误*状态，则将失败。请进行设置`On<Event>Listeners`，以便您可以真正了解以前播放`MediaPlayer`的 s 发生了什么。特别是，您可能对实现`OnInfoListener`和`OnPreparedListener`.

还有，怎么`streamVolume`修改？您可能在某处有竞争条件，并且该代码可能会`streamVolume`抢先设置。请检查所有正在修改的代码`streamVolume`。

# css - 我遇到了 :before 伪元素的边框问题

> ID：13522579
> 
> 赞同：-2
> 
> 时间：2012-11-23T02:58:23.157
> 
> 标签：css

我正在尝试使用 :before 伪元素创建第二个边框，以保持我的标记干净。但是，我在让它正常工作时遇到了一些问题。也许你可以对这个问题有所了解？边框的高度应该是 5px，并且应该放在主标题上方。

[您可以在http://anelegantdesign.com/issue](http://anelegantdesign.com/issue)上实时查看代码——感谢您给我的任何帮助。

编辑：边框应该是这样的：[http ://screencast.com/t/hUDBvDiL](http://screencast.com/t/hUDBvDiL)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:01:36.170

不确定我是否理解您的问题，但`#site-header:before`不可见的原因是因为它具有`z-index:-1`. 当我将其更改为零时，它出现了。

这是你想要做的吗？

# ios - UItableviewcell 故障

> ID：13522580
> 
> 赞同：0
> 
> 时间：2012-11-23T02:58:27.200
> 
> 标签：ios, uitableview

所以有时当我回到我的游戏主菜单时，我会看到一些非常特别的东西。正如您从图片中看到的那样，我在 UIView 表之外复制了单元格。现在起初我认为这是基于内存问题的图形损坏，然后我发现你可以与它们进行交互，它们是有效的单元格......不是幻影图像并且它们响应代码，所以我做了一些搜索并虽然我的表卡在编辑模式或其他什么东西，所以我在任何地方都可以调用 setediting:NO 。它仍然困扰着我。

有没有人有第一个想法可能导致这种情况？它不会一直发生，但它似乎只会发生......如果当我从另一个视图弹出回到这个屏幕时它会发生。我也无法始终如一地复制它，因此很难修复并知道是什么原因造成的。

请记住，我可能正在做或没有做我没有提到的事情，所以不要忘记询问您可能认为相关的所有内容，我很乐意通知您。

![表格单元格故障](../Images/c9345b04d77392c9761bcb8e3bfe5ab7.png) 编辑：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger) tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[[CurrentGamesInfo sharedCurrentGamesInfo] _currentGames] count];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    _indexPath = indexPath;
     NSLog(@"%i",_indexPath.row);
    [_indexPath retain];

    [[CurrentGamesInfo sharedCurrentGamesInfo] SetCurrentGameWithIndex:[_indexPath row]];

    UIView *tempView = [[[tableView cellForRowAtIndexPath:indexPath] contentView] viewWithTag:200];

    if([[[(UIButton*)[tempView viewWithTag:CELL_BUTTONTEXT_ID] titleLabel] text] isEqualToString:@"Waiting"])
    {
        return;
    }

    if( ![[CurrentGamesInfo sharedCurrentGamesInfo] _selectedGame].isGameReady )
    {
        [_PopUp OptionsMessage:@"Game Not Ready" withTitle:@"Hold Your Horsies" hideBackButton:YES];
        return;
    }

    NSString *gameID = [[[CurrentGamesInfo sharedCurrentGamesInfo] _selectedGame] GetGameID];

    NSLog(@"%i",[[[CurrentGamesInfo sharedCurrentGamesInfo] _selectedGame] GetTurnNumber].intValue);

    NSData *pngData = [NSData dataWithContentsOfFile:[AppDelegate applicationDocumentDirectory:gameID]];

    UIImage *image = [UIImage imageWithData:pngData];

    PhotoImage *photoImg = [[PhotoImage alloc]init];
    [photoImg set_imageToSend:image];
    [[[CurrentGamesInfo sharedCurrentGamesInfo] _selectedGame] SetImageToSend:photoImg];
    [photoImg release];

    UIImageView * imgView = (UIImageView*)[[[[tableView cellForRowAtIndexPath:indexPath] contentView]viewWithTag:300] viewWithTag:301];
    [[[CurrentGamesInfo sharedCurrentGamesInfo]_selectedGame]setOpponentProfilePic:imgView.image];

    [self TempCurrentGameFunction];
}

- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return UITableViewCellEditingStyleDelete;
} 
```

警告：大量功能传入

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell;

    GameInfo *gameThisRow = [[[CurrentGamesInfo sharedCurrentGamesInfo]_currentGames] objectAtIndex:indexPath.row];

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"] autorelease];

    cell.selectionStyle = UITableViewCellSelectionStyleBlue;

    NSLog(@"row : %i",indexPath.row);
    NSLog(@"current game count : %i",[[[CurrentGamesInfo sharedCurrentGamesInfo] _currentGames]count]);

    NSString *gameType = @"";

    UIButton *gameStatusButton = [[UIButton alloc]initWithFrame:CGRectMake(100, -5, 90, 70)];

    Boolean isYourTurn = [[gameThisRow GetPlayerRole] intValue] ? YES : NO;

    NSString *gameStateString = @"Your Move";
    [cell setUserInteractionEnabled:YES];

    [cell setTag:ACTIVE_GAME_CELL];

    if(!isYourTurn)
    {
        //_activeGameCount--;
        gameStateString = @"Waiting";
        [cell setUserInteractionEnabled:NO];
        [cell setTag:INACTIVE_GAME_CELL];
    }

    [gameStatusButton setTitle:gameStateString forState:UIControlStateNormal];
    [[gameStatusButton titleLabel] setFont:[UIFont fontWithName:@"Fredoka One" size:10]];
    [gameStatusButton setTag:CELL_BUTTONTEXT_ID];

    if( indexPath.row  < [[[CurrentGamesInfo sharedCurrentGamesInfo] _currentGames]count])
    {
        switch ([gameThisRow gameType]) 
        {
            case 0:
                gameType = @"Open Game";
                [gameStatusButton setBackgroundImage:[UIImage imageNamed:@"buttonB_blue.png"] forState:UIControlStateNormal];
                break;

            case 1:
            {
                gameType = @"Challenge Game";
                [gameStatusButton setBackgroundImage:[UIImage imageNamed:@"buttonB_orange.png"] forState:UIControlStateNormal];

            }

                break;

            case 2:
            {
                gameType = @"Battle Game";
                [gameStatusButton setBackgroundImage:[UIImage imageNamed:@"buttonB_pink.png"] forState:UIControlStateNormal];
            }
                break;

            default:
                break;
        }
    }

    NSLog(@"%@",[[gameThisRow GetFaceBookData]objectForKey:@"name"]);

    NSString *name = [[gameThisRow GetFaceBookData]objectForKey:@"name"];

    UIView *labelView = [[UIView alloc] initWithFrame:CGRectMake(80, 10, 100, 50)];
    [labelView setTag:200];

    [labelView addSubview:gameStatusButton];
    [gameStatusButton release];

    [labelView setBackgroundColor:[UIColor clearColor]];

    UILabel *labelName = [[UILabel alloc] initWithFrame:CGRectMake(0, 5, 100, 20)];

    NSString *text = name;

    NSArray *nameArray = [text componentsSeparatedByString:@" "];

    NSString *nameWithInitials;

    nameWithInitials = [NSString stringWithFormat:@"%@",[nameArray objectAtIndex:0]];

    for( int i = 1; i < nameArray.count; ++i )
    {
        NSString *temp = [nameArray objectAtIndex:i];
        nameWithInitials = [nameWithInitials stringByAppendingFormat:@" %C.",[temp characterAtIndex:0]];
    }

    text = nameWithInitials;

    int maxSize = 20;
    int minSize = 8;
    UIFont *font = [UIFont fontWithName:@"Fredoka One"size:maxSize];

    /* Time to calculate the needed font size.
     This for loop starts at the largest font size, and decreases by two point sizes (i=i-2)
     Until it either hits a size that will fit or hits the minimum size we want to allow (i > 10) */
    for(int i = maxSize; i > minSize; i=i-2)
    {
        // Set the new font size.
        font = [font fontWithSize:i];
        // You can log the size you're trying: NSLog(@"Trying size: %u", i);

        /* This step is important: We make a constraint box 
         using only the fixed WIDTH of the UILabel. The height will
         be checked later. */ 
        CGSize constraintSize = CGSizeMake([labelName frame].size.width, MAXFLOAT);

        // This step checks how tall the label would be with the desired font.
        CGSize labelSize = [text sizeWithFont:font constrainedToSize:constraintSize lineBreakMode:UILineBreakModeWordWrap];

        /* Here is where you use the height requirement!
         Set the value in the if statement to the height of your UILabel
         If the label fits into your required height, it will break the loop
         and use that font size. */
        if(labelSize.height <= [labelName bounds].size.height)
            break;
    }
    // You can see what size the function is using by outputting: NSLog(@"Best size is: %u", i);

    // Set the UILabel's font to the newly adjusted font.
    [labelName setFont:font];

    // Put the text into the UILabel outlet variable.
    [labelName setText:text];

    [labelName setTextColor:[UIColor grayColor]];
    [labelName setBackgroundColor:[UIColor clearColor]];
    [labelName setTextAlignment:UITextAlignmentCenter];
    [labelView addSubview:labelName];
    [labelName release];

    UILabel *labelSubtitle = [[UILabel alloc] initWithFrame:CGRectMake(0, 20, 100, 50)];

    [labelSubtitle setText:gameType];
    [labelSubtitle setFont:[UIFont fontWithName:@"Fredoka One" size:10]];
    [labelSubtitle setTextColor:[UIColor grayColor]];
    [labelSubtitle setBackgroundColor:[UIColor clearColor]];
    [labelSubtitle setTextAlignment:UITextAlignmentCenter];

    [labelView addSubview:labelSubtitle];
    [labelSubtitle release];

    [[cell contentView] addSubview:labelView];

    NSString *path = [NSString stringWithFormat:@"http://graph.facebook.com/%@/picture?width=200&height=200",[[gameThisRow GetFaceBookData]objectForKey:@"id"] ]; 

    UIImageView *pictureImage = [[UIImageView alloc] init];

    [pictureImage setImageWithURL:[NSURL URLWithString:path] placeholderImage:[UIImage imageNamed:@"Icon-Small.png"]success:^(UIImage *image)
     {
         pictureImage.image = [image imageScaledToSize:CGSizeMake(100, 100)];

     } failure:^(NSError *error) 
     {
         [pictureImage setImage:[[UIImage imageNamed:@"Icon-Small.png" ]imageScaledToSize:CGSizeMake(50, 50)]];
         NSLog(@"%@",[error localizedDescription]);
     }];

    NSLog(@"%@",[pictureImage image]);

    pictureImage.layer.masksToBounds = YES;

    [pictureImage setFrame:CGRectMake(pictureImage.frame.origin.x+20, 37 - 25, 50, 50)];

    UIImageView *pictureFrameView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"profile_frame.png"]];
    CGRect temp = pictureImage.frame;
    //hand & hard coded, i feel so ashamed and sullied
    temp.origin.x -= 12;
    temp.origin.y -= 9;
    temp.size.width = 70;
    temp.size.height = 73;
    [pictureFrameView setFrame:temp];

    UIView *pictureView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 80, 80)];

    [pictureView addSubview:pictureFrameView];
    [pictureView addSubview:pictureImage];
    [pictureImage setTag:301];
    [pictureFrameView release];
    [pictureImage release];

    [[cell contentView] addSubview:pictureView];
    [pictureView setTag:300];
    [pictureView release];

    //custom stuff start
    UIImage *rowBackground;
    //UIImage *selectionBackground;
    NSInteger sectionRows = [tableView numberOfRowsInSection:[indexPath section]];
    NSInteger row = [indexPath row];
    if (row == 0 && row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"table_bottom.png"];
        //selectionBackground = [UIImage imageNamed:@"topAndBottomRowSelected.png"];
    }
    else if (row == 0)
    {
        rowBackground = [UIImage imageNamed:@"table_top.png"];
        //selectionBackground = [UIImage imageNamed:@"topRowSelected.png"];
    }
    else if (row == sectionRows - 1)
    {
        rowBackground = [UIImage imageNamed:@"table_bottom.png"];
        //selectionBackground = [UIImage imageNamed:@"bottomRowSelected.png"];
    }
    else
    {
        rowBackground = [UIImage imageNamed:@"table_mid.png"];
        //selectionBackground = [UIImage imageNamed:@"middleRowSelected.png"];
    }
    UIImageView *imageView = [[UIImageView alloc] initWithImage:rowBackground];
    [cell setBackgroundView:imageView];
    [imageView release];
    //((UIImageView *)cell.selectedBackgroundView).image = selectionBackground;
    //custom stuff end

    __block CGRect newPos = inviteFriendsParentView.frame;
    CGRect tempCurrentGameSubMenuFrame = currentGameSubMenu.frame;
    tempCurrentGameSubMenuFrame.size.height = [friendsTable rowHeight] * [friendsTable numberOfRowsInSection:0] + 10;
    currentGameSubMenu.frame = tempCurrentGameSubMenuFrame;
    float bottomofFrameYPos =  currentGameSubMenu.frame.size.height;
    newPos.origin.y += bottomofFrameYPos;

    return cell;
} 
```

# java - CORBA 创建一个最终成为客户端的服务器？

> ID：13522586
> 
> 赞同：1
> 
> 时间：2012-11-23T02:59:32.403
> 
> 标签：java, corba

好的，所以我的问题是我正在做一个很像收费的项目。客户端将 ID 发送到第一台服务器，在他成为客户端并连接到第二台服务器后，如果汽车可以通过，他会通过一个过程返回。现在我在 CORBA 中遇到了麻烦（项目最初是在 RMI 中创建的，在其中工作正常）但我在从第一台服务器连接到第二台服务器时遇到了麻烦。有人告诉我，ORB 必须以其他方式初始化，而不是像运行客户端时那样，即 XXXClient -ORBInitialPort 1999。我可以与第一台服务器正常连接，但第二台服务器没有任何进展。这是最终将成为客户端的服务器的代码

```
import PROApp.*;
import org.omg.CosNaming.*;
import org.omg.CosNaming.NamingContextPackage.*;
import org.omg.CORBA.*;
import org.omg.PortableServer.*;
import org.omg.PortableServer.POA;

import java.util.Properties;

class PROImpl extends PROPOA {
private ORB orb;

public void setORB(ORB orb_val) {
 orb = orb_val; 
  }

  // implement sayHello() method
  public String check1(int number) 
  {
    try{
        if(number > 0 && number <8000) 
        {
            String serverReply2 = "parta";
            serverReply2 = proCarImpl.check2(number);
            System.out.println(serverReply2);
            if(serverReply2.equals("ACK"))
            {
                return "You shall pass";
            }
        else if(serverReply2.equals("NACK"))
            {
                return "You shall not pass, not enought credits";
            }
        else
            {
                return "You're probably not on the list or something went wrong";
            }
    }
    else
     {
        return "Wrong ID number";
     }
     }
     catch (Exception e)
        {
            System.out.println("PROServer is not bound in rmiregistry... Exception:" + e);
        }return "ooups";
  }

  // implement shutdown() method
  public void shutdown() {
    orb.shutdown(false);
  }
}

public class PROServer {

  public static void main(String args[]) {
    try{
  // create and initialize the ORB
  ORB orb = ORB.init(args, null);

  // get reference to rootpoa & activate the POAManager
  POA rootpoa = POAHelper.narrow(orb.resolve_initial_references("RootPOA"));
  rootpoa.the_POAManager().activate();

  // create servant and register it with the ORB
  PROImpl proImpl = new PROImpl();
  proImpl.setORB(orb); 

  // get object reference from the servant
  org.omg.CORBA.Object ref = rootpoa.servant_to_reference(proImpl);
  PRO href = PROHelper.narrow(ref);

  // get the root naming context
  // NameService invokes the name service
  org.omg.CORBA.Object objRef =
      orb.resolve_initial_references("NameService");
  // Use NamingContextExt which is part of the Interoperable
  // Naming Service (INS) specification.
  NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);

  // bind the Object Reference in Naming
  String name = "project corba";
  NameComponent path[] = ncRef.to_name(name);
  ncRef.rebind(path, href);

  System.out.println("PROServer with name "+ name+ " is up and it's waiting ...");

  // wait for invocations from clients
  orb.run();

        ORB orb = ORB.init(args, null);

        org.omg.CORBA.Object objRef = 
        orb.resolve_initial_references("NameService");
        NamingContextExt ncRef = NamingContextExtHelper.narrow(objRef);
        String name = "project corba car";
        proCarImpl = PROCarHelper.narrow(ncRef.resolve_str(name));

        System.out.println("Obtained a handle on server object: " + proCarImpl);

} 

  catch (Exception e) {
    System.err.println("ERROR: " + e);
    e.printStackTrace(System.out);
  }

  System.out.println("HelloServer Exiting ...");

  }
} 
```

# java - Java 帮助使用 .CSV 文件检查 loginIn 类

> ID：13522591
> 
> 赞同：-1
> 
> 时间：2012-11-23T03:00:30.720
> 
> 标签：java, string, csv, login

我目前正在尝试做的是从一个`.CSV`文件中检索信息，该文件包含有关用户腰部凭据的信息，格式如下：

```
UserName,Password,PropertyName,PropertyValue 
UserName,Password,PropertyName,PropertyValue 
```

所以我找到了一种使用 split() 函数分离用户名信息的方法。我现在很难在我的 CLI 类中使用此信息，我在其中搜索以查看输入到我的程序命令行中的用户名是否与我的 csv 文件中的用户名匹配，以及它是否也与给定的密码匹配。任何帮助将不胜感激，谢谢。

```
import java.util.*;
import java.io.*;
import java.util.Scanner;
import java.io.File;
import java.io.FileNotFoundException;

public class readCSV {
    private String[] userData;
    public void checkLogin() throws IOException
    {
        String fileName = "C:/Users/Sean/Documents/Programming assigment/Users.csv";
        File file = new File(fileName);
        try
        {
            Scanner inputStream = new Scanner(file);
            while(inputStream.hasNext()){
                {
                    String data = inputStream.next();
                    userData = data.split(",");
                }
            }
        } catch(FileNotFoundException er){
            System.out.print(er); 
            System.exit(0);
        }
    }

    public String getLogin()
    {
        return userData[0];
    }
} 
```

## 命令行界面

```
import java.util.*;
import java.io.*;
public class CLI
{
    Scanner input = new Scanner(System.in);
    private readCSV l1 = new readCSV();

    public void login() throws IOException
    {
        System.out.println("Enter Username:");
        String username = input.nextLine();
        System.out.println("Enter Password:");
        String password = input.nextLine();
        try{
            l1.checkLogin();
        }
        catch(Exception er){ System.out.print(er); } 
```

卡在这行代码检查用户名和密码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:50:48.707

您的程序设计没有经过深思熟虑。理想情况下，您的`checkLogin`方法应该接受`String`用户名和密码的两个参数，然后返回 a`boolean`以确定登录凭据是否正确：

```
public boolean checkLogin(String username, String password) {
    // Read CSV file, compare entries against provided username and password.
    // Return true if a match is found. Otherwise, return false.
} 
```

然后显然在您的`login`方法中，您会将输入的用户名和密码传递给该`checkLogin`方法：

```
boolean loggedIn = false;
try {
    loggedIn = checkLogin(username, password);
} catch(Exception ex) {
    ex.printStackTrace();
} 
```

# python - Python哈希结构

> ID：13522595
> 
> 赞同：1
> 
> 时间：2012-11-23T03:01:14.043
> 
> 标签：python, hash

我得到一个输入 N*M 矩阵（元组的元组），值从 1 到 9。

散列这个结构的最佳方法是什么，所以我可以获得每 8 个值的位置 (x,y)？（例如 8，可以是 5 或 7...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:12:58.953

由于您想找到 5s 和 7s 和 8s 的位置，因此将所有位置存储在 dict 中一次通过矩阵可能更有效，而不是 5s 一次通过，7s 一次通过等。 ..

```
loc = {}    
for x in range(N):
    for y in range(M):
        loc.setdefault(matrix[x][y], []).append((x,y)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:04:04.670

“哈希”是错误的词。您只想在二维数组中搜索特定值。也许像这样的东西......

```
height = len(data)
width = len(data[0])
eights = [(x, y) for y in range(height) for x in range(width) if data[x][y] == 8] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:03:40.913

```
[(x,y) for x in range(N) for y in range(M) if matrix[x][y] == 8] 
```

# vim - 如何从终端运行 Vim 命令

> ID：13522599
> 
> 赞同：12
> 
> 时间：2012-11-23T03:01:35.247
> 
> 标签：vim, command-line, terminal, macvim

我的问题是一个我没有看到回答的问题，通常的问题是如何对文件运行某些命令。

我的问题是如何从 Vim 外部（即终端）运行 Vim 命令或函数，这些不会影响任何文件，只会影响 Vim 本身。这甚至可能吗？如果是这样，怎么做？

如果这不可能，有没有办法进入 Vim，自动运行命令，然后在结束时退出？或者运行另一个命令然后退出？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T03:53:56.003

利用

```
vim --cmd 'Command launched before vimrc' \
     -c 'Command launched after vimrc' \
     -c 'qa!' # Quit vim 
```

. 要在现有的 vim 会话中运行命令，您必须使用 +clientserver 功能：运行一个 vim

```
vim --servername vim 
```

和其他人

```
vim --remote-send '<C-\><C-n>:Command<CR>' 
```

# java - 如何获取 JButton 的位置？

> ID：13522600
> 
> 赞同：1
> 
> 时间：2012-11-23T03:01:59.623
> 
> 标签：java, swing, location, jbutton

我想获得`JButton`返回值的位置。我需要该值来打印出数组列表中的元素。我在数组列表中有十个元素。A`GridLayout(0,2)`用于布局按钮。

所以我该怎么做？

```
 for(int i=0;i<item.size();i++)
                {
                    JButton btn1= new JButton(item.get(i).print());

                    btn1.setPreferredSize(new Dimension(300,40));

                    panel2.setLayout(new GridLayout(0,2));

                    panel2.add(btn1, BorderLayout.NORTH);

                    content.add(panel2, BorderLayout.NORTH);

                }
            public Food selectFood(int input)
            {

                int get=0;

                if(input>0 && input< 11)
                {
                     item.get(input-1);

                } 
```

想要获取位置作为打印所选项目的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:04:37.513

我记得它可以使用`JButton.getBounds()`函数，然后它可以使用`JButton.getBounds().x`and`JButton.getBounds().y`来获取它的左上角位置。

# java - 为 JSpinner 创建自定义异常

> ID：13522601
> 
> 赞同：0
> 
> 时间：2012-11-23T03:02:18.863
> 
> 标签：java, swing, exception, jspinner

我有两个`JSpinner`组件，我为它们创建了一个自定义异常，并且运行良好。昨天我在 Netbeans 中修改了微调器，我添加了一个微调器模型编辑器，因为我只想要正数。

所以现在我只有正数，但是当我输入 -1 之类的东西时，它不会像以前那样显示错误消息，为什么？

这是我的代码：

```
 public int getAlerte() {
        int res = 0;

        if (Integer.parseInt(jSpinnerTime.getValue().toString()) <= 0 ||
            Integer.parseInt(jSpinnerTime.getValue().toString()) >1000) {
            JOptionPane.showMessageDialog(this, "Time should be between 1 and 1000",
                    "Alert", JOptionPane.ERROR_MESSAGE);
            res = 1;
        }       
        if (res == 0){
            int visperiod = Integer.parseInt(jSpinnerTime.getValue().toString())/2;            
            if (Integer.parseInt(jSpinnerFreqV.getValue().toString()) <= 0 ||
                Integer.parseInt(jSpinnerFreqV.getValue().toString()) > visperiod){
                JOptionPane.showMessageDialog(this, "Visualization frequency should be between 1 and "+visperiod,
                    "Alert", JOptionPane.ERROR_MESSAGE);
            res = 1;
            }

        }
        return res;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:14:40.407

我尝试了 SSCCE，希望它对您有用，代码如下：

```
import java.awt.Frame;
import javax.swing.DefaultListModel;
import javax.swing.JOptionPane;

public class JPanelPoly extends LayerPanel{

    private RendererContainer rc = new RendererContainer();
    private ParametersTable parametersTable= new ParametersTable("TYPE");
    private int nbrParameter; 
    private int nbrCenter; 
    private Frame parent;

    public JPanelPolyg() {
    initComponents();
        jListParameter.setModel(rc.getModel());
    jListParameter.setCellRenderer(new SimpleRenderer());
    jSpinnerEnters.setValue(150);

    }

    public JPanelPoly(Frame parent,int nbrCenter, int nbrParameter){
    initComponents();
    this.nbrCenter = nbrCenter;
    this.nbrParameter = nbrParameter;
    jListParameter.setModel(rc.getModel());
    jListParameter.setCellRenderer(new SimpleRenderer());
    jSpinnerEnters.setValue(150);
    this.parent = parent;

    }

    public RendererContainer getListParameterModel(){
    return rc;
    }
    public int getNbrCenter(){
    return (Integer)jSpinnerEnters.getValue();
    }

    public int getNbrParameters(){
    return (Integer)jSpinnerParameter.getValue();
    }

    public int getPercentage(){
    return (Integer)jSpinnerPercent.getValue();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        jListParameter = new javax.swing.JList();
        jSpinnerEnters = new javax.swing.JSpinner();
        jSpinnerParameter = new javax.swing.JSpinner();
        jSpinnerPercent = new javax.swing.JSpinner();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jButtonColorChange = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();

        setMaximumSize(new java.awt.Dimension(232, 213));
        setPreferredSize(new java.awt.Dimension(232, 213));

        jListParameter.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_INTERVAL_SELECTION);
        jListParameter.setToolTipText("");
        jListParameter.addListSelectionListener(new javax.swing.event.ListSelectionListener() {
            public void valueChanged(javax.swing.event.ListSelectionEvent evt) {
                jListParameterValueChanged(evt);
            }
        });
        jScrollPane1.setViewportView(jListParameter);

        jSpinnerParameter.setModel(new javax.swing.SpinnerNumberModel(0, 0, 200, 1));
        jSpinnerParameter.setToolTipText("Range 1 to 200");
        jSpinnerParameter.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSpinnerParameterStateChanged(evt);
            }
        });

        jSpinnerPercent.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSpinnerPercentStateChanged(evt);
            }
        });

        jLabel1.setText("Percent :");

        jLabel2.setText("El number :");

        jLabel3.setText("id number :");

        jButtonColorChange.setText("Change Color");
        jButtonColorChange.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonColorChangeActionPerformed(evt);
            }
        });

        jLabel4.setText("Type | %");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane1, 0, 0, Short.MAX_VALUE)
                        .addGap(10, 10, 10))
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(jLabel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel4)
                            .addComponent(jLabel3))))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jButtonColorChange)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                        .addComponent(jSpinnerParameter, javax.swing.GroupLayout.Alignment.LEADING)
                        .addComponent(jSpinnerEnters, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 45, Short.MAX_VALUE))
                    .addComponent(jSpinnerPercent, javax.swing.GroupLayout.PREFERRED_SIZE, 58, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabel1))
                .addGap(35, 35, 35))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(jSpinnerCenters, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(5, 5, 5)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(jSpinnerParameter, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(9, 9, 9)
                .addComponent(jLabel4)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jSpinnerPercent, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(26, 26, 26)
                        .addComponent(jButtonColorChange))
                    .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        jSpinnerParameter.getAccessibleContext().setAccessibleParent(jSpinnerParameter);

        getAccessibleContext().setAccessibleParent(this);
    }// </editor-fold>

    private void jSpinnerPercentStateChanged(javax.swing.event.ChangeEvent evt) {                                             
    // TODO add your handling code here:
    int selected = 0;

    if(jListParameter.getSelectedIndex() != -1){
        selected = jListParameter.getSelectedIndex();

    Parameter parameter = (Parameter) rc.getParameter(selected);
    if(jSpinnerPercent.getValue() instanceof Integer){
        Integer p = (Integer)jSpinnerPercent.getValue();
        double percent = DMath.round(p.doubleValue(), 2);
        parametersTable.setPercent(parameter, percent );
        rc.get(selected).add("%", percent);
    }else{
        double percent = DMath.round((Double)jSpinnerPercent.getValue(), 2);
        parametersTable.setPercent(parameter, percent );
        rc.get(selected).add("%", percent);

    }
    }
    jListParameter.repaint();

    }                                            

    private void jListParameterValueChanged(javax.swing.event.ListSelectionEvent evt) {                                            
    // TODO add your handling code here:
    int selected = 0;

    if(jListParameter.getSelectedIndex() != -5)
        selected = jListParameter.getSelectedIndex();
    Parameter parameter = (Parameter) rc.getParameter(selected);
    jSpinnerPercent.setValue(parametersTable.getPercent(parameter));
    }                                           

    private void jSpinnerParameterStateChanged(javax.swing.event.ChangeEvent evt) {                                               
    // TODO add your handling code here:
    nbrParameter = (Integer)jSpinnerParameter.getValue();
    java.awt.Color tab[] = ImageTools.getColorsRGB(nbrParameter);

    rc.reset();
    parametersTable.reset();
    for (int i = 0; i < tab.length; i++) {
        Parameter param = new Parameter("TYPE", i, tab[i]);
        param.setName("TYPE");

        parametersTable.addParameter(param);
        double percent = DMath.round((double)100 / tab.length, 2);
        parametersTable.addToPercent(param, percent );
        ObjectRenderer or = new ObjectRenderer();
        or.addParameter(param);
        or.add("%", percent);
        rc.add(or);

    }

    this.validate();
    }                                              

    private void jButtonColorChangeActionPerformed(java.awt.event.ActionEvent evt) {                                                   
    // TODO add your handling code here:
    if(!jListParameter.isSelectionEmpty()){

         JDialogColor jDialogColor = new JDialogColor(true,rc, jListParameter.getSelectedIndex(), JDialogColor.COLORCHANGE);
        jDialogColor.run();

    }

    }                                                  

@Override
    public Layer createLayer(String name) {

    nbrCenter = (Integer)jSpinnerEnters.getValue();
    SimpleLayer layer = null;
    Layer set = null;

        layer = new SimpleLayer(name);
        layer.setNbrCenter(nbrCenter);  
    //}
    layer.setGeometryType(Polygone.GEOMETRYTYPE);
    layer.setBounds(0, 0, 1000, 1000);
    layer.setParametersTable(parametersTable);
    layer.setType("TYPE");
    layer.setId("ID");
    parametersTable.setId("ID");
    layer.setupGraph(LayerFactory.getVor(parametersTable, nbrCenter, name));

    return layer;
    }

public void setValues(Layer layer){
    jSpinnerEnters.setValue(layer.getNbrCenter());
    jSpinnerParameter.setValue(layer.getParametersTable().getTypes().size());

    DefaultListModel model = (DefaultListModel)jListParameter.getModel();
    for(Parameter p : layer.types()){
        model.addElement(p);
    }
}

public int getAlerte() {

     int x = 0;
        if (Integer.parseInt(jSpinnerParameter.getValue().toString()) <= 0 ||
            Integer.parseInt(jSpinnerParameter.getValue().toString()) >200) {
            JOptionPane.showMessageDialog(null, "Color number must be minimum 1",
                    "Alert", JOptionPane.ERROR_MESSAGE);
           x = 1; 
        }
        return x;  
}

    // Variables declaration - do not modify
    private javax.swing.JButton jButtonColorChange;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JList jListParameter;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JSpinner jSpinnerEnters;
    private javax.swing.JSpinner jSpinnerParameter;
    private javax.swing.JSpinner jSpinnerPercent;
    // End of variables declaration

    @Override
    public void refresh() {
    }

} 
```

问题是：当我输入 -1 或单击“确定”而不在 jSpinner 中输入任何内容时，它永远不会显示错误消息。

# javascript - 何时使用 requestAnimationFrame？

> ID：13522602
> 
> 赞同：21
> 
> 时间：2012-11-23T03:02:25.480
> 
> 标签：javascript, requestanimationframe

刚刚发现`requestAnimationFrame`，我已经深入研究了所有我能找到的关于它的信息。仅举几个我遇到的资源，以防其他人在寻找有关它的更多信息：

*   [http://creativejs.com/resources/requestanimationframe/](http://creativejs.com/resources/requestanimationframe/) - 解释有关它的基础知识。
*   [http://www.html5rocks.com/en/tutorials/speed/animations/](http://www.html5rocks.com/en/tutorials/speed/animations/) - 解释如何使用它。

无论如何，所有这些资源都告诉我一些关于它是如何`requestAnimationFrame`工作的或者它可以/应该如何使用的信息，但是它们都没有告诉我什么时候使用它是正确的。

*   我应该将它用于动画吗（重复更改元素的样式，就像 CSS 动画一样）？
*   当自动化事件想要更改一个或多个元素的 css/类时，我应该使用它吗？
*   当自动化事件想要更改一个或多个元素的文本值时，我应该使用它吗？（例如每秒更新一次时钟的值）
*   当自动化事件想要修改 DOM 时，我应该使用它吗？
*   当自动事件需要 .offsetTop、.offsetLeft 之类的值，然后想要更改诸如 top 和 left 几行之类的样式时，我应该使用它吗？
*   当用户生成的事件导致上述任何更改时，我应该使用它吗？

**TL;DR：**什么时候使用 requestAnimationFrame 合适？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:22:34.433

你还不应该。至少不是。这仍然是实验性的，可能会或可能不会达到完全推荐（[此时它仍然是工作草案](http://www.w3.org/TR/animation-timing/#requestAnimationFrame)）。也就是说，如果您不关心较旧的浏览器，或者[愿意使用可用的 polyfill](http://creativejs.com/resources/requestanimationframe/)，那么使用它的最佳时间是当您希望将需要浏览器重新绘制的内容（大多数动画）绘制到屏幕上时。

对于 DOM 的许多简单修改，这种方法是矫枉过正的。这仅在您制作动画时有用，因为您将快速绘制或移动项目并且需要确保浏览器重绘保持足够的速度以使其平滑。它将允许您确保您计算的每一帧都将绘制到屏幕上。它还为您的动画提供了更准确的时间测量实用程序。第一个参数是油漆将发生的时间，因此您可以确保您在那一刻处于您应该在的位置。

当您对 DOM 进行许多简单的修改，或者不需要平滑过渡的事情时，您不应该使用它。这在您的用户计算机上会更加昂贵，因此您希望将其限制为使过渡、移动和动画更流畅。每次在页面上进行更改时都不需要强制重绘帧，因为大多数时候响应会足够快，您无需担心两次绘制之间的额外几毫秒。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2017-06-19T03:08:10.340

正如前面的答案所说，您不应该在不连续的动画中使用它，因为它不需要平滑过渡。在大多数情况下，它用于随时间连续变化的属性。

# c++ - 用于嵌入式 Linux 的非 GPL C/C++ XMPP 客户端库

> ID：13522606
> 
> 赞同：1
> 
> 时间：2012-11-23T03:02:38.870
> 
> 标签：c++, c, xmpp

有谁知道适用于 ARM 机器中的嵌入式 Linux 的非 GPL C/C++ XMPP 客户端库？

我已经检查了 txmpp，但最后一次更新似乎是 2 年前。qxmpp 似乎需要 Qt，我不确定嵌入式 Linux 是否支持它。此外，AFAIK Qt 用于 GUI，所以我不确定为什么库需要它。我还检查了 gloox，但它是 GPL 并且似乎也有一年多的历史了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-28T14:00:14.693

我有同样的问题，所以我自己滚动。在 BOOST 许可下发布；[http://deusexmachinae.se/dxmpp](http://deusexmachinae.se/dxmpp)

它仅支持核心功能 + 正确的身份验证（包括 TLS 和 SCRAM-SHA-1）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:24:11.750

> 用于嵌入式 Linux 的非 GPL C/C++ XMPP 客户端库

[libstrophe](http://strophe.im/libstrophe/) - 在 Mit/GPLv3 下获得双重许可。但是，我不确定它是否会在 ARM 上编译，尽管它应该是相当可移植的。

> 所以我不确定为什么图书馆需要它。

因为 Qt 提供了 XML 解析器和信号/槽框架。XMPP 需要 XML 解析器，而信号/槽框架让您的生活更轻松。如果您尝试以 OOP 方式实现带有所有扩展的整个 XMPP，您将需要类似于 Qt 的东西。如果您只需要发送一两个命令，那么裸机解决方案就可以了。

libstrophe 是赤裸裸的骨头。您不会获得数十个代表不同 xmpp 概念（和大量扩展）的包装器，但您将能够发送您需要/想要的命令。当然，您必须阅读 XMPP 规范。

建议：对于 C++，没有很多好的 xmpp 库可用。我认为它的发生原因如下（个人观点）：

1.  [协议扩展](http://xmpp.org/xmpp-protocols/xmpp-extensions/)太多
2.  制作 xmpp 库时很容易分心。Xmpp 包含相当多的可能错误，并且具有 OOP 头脑的程序员会非常想为所有内容创建一个类，这在这种情况下不能很好地工作，并且需要像 Qt 4 这样的东西才能使其正常工作。
3.  XMPP 需要 XML 解析器。

因此，尝试 python 可能是有意义的——如果您的嵌入式平台可以处理它。对于 python，有[xmpppy](http://xmpppy.sourceforge.net/)。尽管我非常不喜欢 python，但我认为使用 xmpppy 在 python 中使用 XMPP 比使用 libstrophe 在 C++ 中更容易。这是因为 xmpp 需要大量的键值对列表，而 python 使用字典以更“自然”的方式表示这些结构。

# windows - 如何以编程方式创建自定义输入/输出设备？

> ID：13522608
> 
> 赞同：1
> 
> 时间：2012-11-23T03:03:15.140
> 
> 标签：windows, video-capture, device-driver

如何创建可以从 Skype 等程序中选择的自定义媒体输入/输出设备，例如扬声器或麦克风。例如，我可以制作一个 GreyScale 网络摄像头来读取网络摄像头并将其设为灰度，或者制作一个自定义 Beep Speaker，它将程序发送到扬声器的任何内容都接收到扬声器并在 3 秒后添加哔声等。一个例子是：

[http://www.videohelp.com/tools/UScreenCapture](http://www.videohelp.com/tools/UScreenCapture)

我只需要有关如何创建实际（虚拟？）设备的帮助，而不是如何使其成为灰度等。我稍后会弄清楚。

我什至从哪里开始搜索这方面的教程/读物？根据标签，我更喜欢与 qt/c++ 相关的，但不一定非要如此。只需向正确的方向轻推以使我开始就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:24:41.010

您需要创建一个[设备驱动程序](http://en.wikipedia.org/wiki/Device_driver)。这需要什么完全取决于平台和您要模拟的设备类型。

从您的操作系统的文档开始并查找参考资料，就像您正在开发新的硬件设备一样。但是您将跳过任何实际的硬件接口。

尽管如此，这可能需要内核编程，因此 Qt 可能不合适。

# c - 递减前缀作为c while循环中的条件

> ID：13522609
> 
> 赞同：0
> 
> 时间：2012-11-23T03:03:30.697
> 
> 标签：c, while-loop

关于以下用法，我很困惑 --i 如何评估为 true 以及什么决定了循环何时退出：

```
while (--i) {
    k = p[i];
    p[i] = p[j = random() % B];
    p[j] = k;
} 
```

如果按照我的理解，--前缀在开始循环之前减少 i 的值，那么我们是否评估 true=value > 1 和 false=0，因此当值达到 0 时循环退出？也许我已经回答了我自己的问题，但是如果有人可以启发我的话。另外，如果递减运算符是后缀，这个循环会如何表现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:07:43.767

是的，前缀递减将递减变量，然后表达式的返回值（*结果*）用于条件。

`i`循环在变为时终止`1`（并且它递减为`0`条件的返回值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T05:06:26.690

正如你已经定义了你的代码，我可以说它完全取决于 i 的值。 **如果最初 i=0 的值，那么它将进入无限循环**，因为**--i**将变为**-1**，这将是 while 循环的真实条件。

因此，**如果 i 的值不是 0（可能是正数或负数），那么它将始终为真，但当它变为 0 时，循环将终止**

对于前缀和后缀......你应该记住，在**（--变量）或（++变量）情况下，变量将首先递增或递减，然后检查，但在（变量--）或（变量++）情况下变量将在以后增加或减少，但首先检查**

# apache - 使用 apache mod_proxy 将 http 重定向到 https

> ID：13522610
> 
> 赞同：1
> 
> 时间：2012-11-23T03:03:38.073
> 
> 标签：apache, mod-proxy, proxypass

* * *

## **设置**

appserver ----> webserver ----> （第 3 方端点）

> ```
>  8080              (https://www.b2b.com:1100/...)<br/>
>      [http]      [https] 
> ```

* * *

## **错误日志**

[2012 年 11 月 19 日星期一 17:18:23] [警告] 代理客户端证书回调：(box1:80) 下游服务器想要客户端证书，但没有配置 [2012 年 11 月 19 日星期一 17:18:23] [错误] (502)未知错误 502：代理：传递请求正文失败：1100 (www.b2b.com) [2012 年 11 月 19 日星期一 17:18:23] [错误] 代理：传递请求正文失败：1100 (www.b2b.com)来自 box1()

* * *

## **问题**

第 3 方升级了他们的环境并提供了修改后的证书（rootCA、intermediateCert、serverCert）

较旧的实现只有一个自签名证书。我们使用 mod_proxy 将 http 重定向到 https。使用虚拟主机并使用 SSLProxyEngine 配置证书，它工作正常

第 3 方升级后，现有配置不再起作用，我们收到 http-502 错误

关于需要包含在 apache 端的配置的任何指针？

* * *

## **旧配置**

LoadModule rewrite_module modules/mod_rewrite.so LoadModule ssl_module modules/mod_ssl.so

```
<VirtualHost [ip]:8080>
ServerName hostname.com
SSLProxyEngine On
SSLCertificateFile "conf/ssl.crt/server.crt"
#SSLProxyCheckPeerCN on
#SSLProxyCheckExpire on
ProxyPass           /outboundservice/b2b/ https://www.b2b.com/webservice/7/
ProxyPassReverse    /outboundservice/b2b/ https://www.b2b.com/webservice/7/ 
```

## **新配置**

```
<VirtualHost [ip]:8080>
ServerName hostname.com
SSLProxyEngine On
SSLCertificateFile "conf/ssl.crt/cons_v8.cer"
SSLCertificateKeyFile "conf/ssl.crt/server.key.pem"
#SSLProxyCheckPeerCN off
#SSLOptions +ExportCertData
#SSLProxyVerify Optional
LogLevel debug
ProxyPreserveHost On
ProxyPass           /outboundservice/b2b/ https://www.b2b.com/webservice/8/
ProxyPassReverse    /outboundservice/b2b/ https://www.b2b.com/webservice/8/
</VirtualHost> 
```

谢谢-R

# javascript - 在给定开始和结束坐标的情况下确定二次贝塞尔曲线控制点的坐标

> ID：13522620
> 
> 赞同：1
> 
> 时间：2012-11-23T03:05:11.977
> 
> 标签：javascript, html, bezier

我正在使用 JavaScript/HTML5 Canvas 重新创建一个旧的 DOS 游戏，但我遇到了轨迹问题。我知道我将使用 quadraticCurveTo() 在画布上绘制二次贝塞尔曲线，但我的数学不太好，而且我在确定控制点的坐标时遇到了麻烦。

我有起始坐标，我已经能够计算出弹丸行进的距离，所以我也有结束坐标。

那么，有了这两个点，以及初始角度、速度和重力，如何确定控制点的坐标呢？

免责声明：这是我的大学课程，我想远离 jQuery 和其他此类框架

# .net - 基于现有模板生成 Word 文档的最佳方法是什么

> ID：13522627
> 
> 赞同：3
> 
> 时间：2012-11-23T03:07:02.733
> 
> 标签：.net, ms-word, openxml

**TL;DR 我可以使用 .NET 生成 Word 文档，例如 XAML ItemTemplates 吗？**

我发现很难想出一个满足我所有要求的解决方案，所以我想我会把它扔给stackoverflow，希望有人能指导我。非常感谢提前。

简单地说，我需要根据数据库中的数据生成 Word 文档。

我理想的解决方案：我希望它像 DataTemplates 在 xaml 中的工作方式一样工作。我发现了很多示例和解决方案，其中模板表示静态文档，需要替换一些（单个）动态内容。

例如[WordDocGenerator](http://blogs.msdn.com/b/atverma/archive/2011/12/31/utility-to-generate-word-documents-from-templates-using-visual-studio-2010-and-open-xml-2-0-sdk.aspx)

问题是，我需要一个解决方案，我可以在其中为层次结构的每个级别指定一个模板，并且文档生成器将使用这些项目级别模板来构建基于文档级别模板的最终文档。

我的具体要求是：

*   最好是 .NET 解决方案
*   无需在服务器上安装office
*   存在一个模板，它纯粹封装了文档的“视图”（不一定是 Word 模板），用户可以随意修改（当然在边界内）。这非常重要，因为用户需要通过直接修改 Word 模板来控制演示。
*   最好在每个数据层次结构中都有一个随附的模板。
*   页眉和页脚
*   目录

假设数据层次结构是这样的

```
class Country
{
  public string Name { get; set; }
  public IList<City> { get; set; }
}

class City
{
  public string Name { get; set; }
  public IList<Suburb> { get; set;}
}

class Suburb
{
  public string Name { get; set; }
  public int Postcode { get; set; }
} 
```

在我看来，解决方案将是一个函数调用，它接受国家列表。

```
// returns path to generated document
public static string GenerateDocument(IList<Country> countries); 
```

此函数将接受国家/地区列表，并针对每个国家/地区

*   使用为国家准备的模板来呈现国家数据。
*   对于国家/地区的每个城市，使用为城市准备的模板在国家模板中显示城市数据
*   对于城市中的每个郊区，使用为郊区准备的模板来呈现城市模板内的郊区数据。

最后，这些生成的文档“片段”将使用文档级模板累积到一个最终的 Word 文档中，该模板将指定标题页、页眉/页脚、TOC。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T07:34:01.640

[Templater](http://templater.info/)的设计考虑了该用例。

您可以定义将根据正在处理的当前对象复制的文档区域（如表格或列表）。

免责声明：我是作者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:39:57.053

我最终得到了我想要的。在 Eric White 的文章的帮助下，我手动完成了所有操作。

因此，源头的味道是这样的。有一个模板，确保前三段是您想要的 3 个层次结构级别。遍历你的集合，克隆节点，替换文本，重复。

```
private const string COUNTRY_TITLE = "[[CountryTitle]]"
private const string CITY_TITLE = "[[CityTitle]]"
private const string SUBURB_TITLE = "[[SuburbTitle]]"

using (WordprocessingDocument myDoc = WordprocessingDocument.Open(outputPath, true))
{
    var mainPart = myDoc.MainDocumentPart;
    var body = mainPart.Document.Body;

    var originalCountryPara = body.ElementAt(0);
    var originalCityPara = body.ElementAt(1);
    var originalSuburbPara = body.ElementAt(2); 

    foreach (var country in Countries)
    {
        if (!String.IsNullOrEmpty(country.Title))
        {
            // clone Country level node on template
            var clonedCountry = originalCountryPara.CloneNode(true);

            // replace Country title
            Helpers.CompletelyReplaceText(clonedCountry as Paragraph, COUNTRY_TITLE,  country.Title);
            body.AppendChild(clonedCountry);
        }    

        foreach (var city in country.Cities)
        {
            if (!String.IsNullOrEmpty(city.Title))
            {
                // clone City level node on template
                var clonedCity = originalCityPara.CloneNode(true);

                // replace City title
                Helpers.CompletelyReplaceText(clonedCity as Paragraph, CITY_TITLE, city.Title);
                body.AppendChild(clonedCity);
            }

            foreach (var suburb in city.Suburbs)
            {
                // clone Suburb level node on template
                var clonedSuburb = originalSuburbPara.CloneNode(true);

                // replace Suburb title
                Helpers.CompletelyReplaceText(clonedSuburb as Paragraph, SUBURB_TITLE, suburb.Title);
                body.AppendChild(clonedSuburb);         
            }
        }
    }

    body.RemoveChild(originalCountryPara);
    body.RemoveChild(originalCityPara);
    body.RemoveChild(originalSuburbPara);

    mainPart.Document.Save();
}

/// <summary>
/// 'Completely' refers to the fact this method replaces the whole paragraph with newText if it finds
/// existingText in this paragraph. The only thing spared is the pPr (paragraph properties)
/// </summary>
/// <param name="paragraph"></param>
/// <param name="existingText"></param>
/// <param name="newText"></param>
public static void CompletelyReplaceText(Paragraph paragraph, string existingText, string newText)
{
    StringBuilder stringBuilder = new StringBuilder();            
    foreach (var text in paragraph.Elements<Run>().SelectMany(run => run.Elements<Text>()))
    {                
        stringBuilder.Append(text.Text);
    }

    string paraText = stringBuilder.ToString();
    if (!paraText.Contains(existingText)) return;

    // remove everything here except properties node                
    foreach (var element in paragraph.Elements().ToList().Where(element => !(element is ParagraphProperties)))
    {
        paragraph.RemoveChild(element);
    }

    // insert new run with text
    var newRun = new Run();
    var newTextNode = new Text(newText);
    newRun.AppendChild(newTextNode);
    paragraph.AppendChild(newRun);
} 
```

# sql - 过滤数组sql中的负数

> ID：13522631
> 
> 赞同：0
> 
> 时间：2012-11-23T03:08:22.983
> 
> 标签：sql, arrays, filter

```
function get_patient_balance($pid) {
  if ($GLOBALS['oer_config']['ws_accounting']['enabled'] === 2) {
    $brow = sqlQuery("SELECT SUM(fee) AS amount FROM billing WHERE " .
      "pid = ? AND billed = 1 AND activity = 1", array($pid) );
    $srow = sqlQuery("SELECT SUM(fee) AS amount FROM drug_sales WHERE " .
      "pid = ?", array($pid) );
    $drow = sqlQuery("SELECT SUM(pay_amount) AS payments, " .
      "SUM(adj_amount) AS adjustments FROM ar_activity WHERE " .
      "pid = ?", array($pid) );
     return sprintf('%01.2f', $brow['amount'] + $srow['amount']
      - $drow['payments'] - $drow['adjustments']);
  } 
```

以上是我正在使用的功能。在此函数中，$brow 从帐单表中创建一个数组。在这个数组中有负数。我希望能够从 SUM(fee) AS 金额中排除这些数字，以便我只加总正数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:11:53.257

> 我希望能够从 SUM(fee) AS 金额中排除这些数字，以便我只加总正数。

所以，您只想添加所有费用> 0，对吗？如果我做对了，我认为这会奏效：

```
$brow = sqlQuery("SELECT SUM(fee) AS amount FROM billing WHERE " .
"pid = ? AND billed = 1 AND activity = 1 and fee > 0", array($pid) ); 
```

# google-drive-api - 无法使用 GoogleDrive API 列出文件

> ID：13522633
> 
> 赞同：0
> 
> 时间：2012-11-23T03:09:03.397
> 
> 标签：google-drive-api

我正在尝试通过其 SDK 从谷歌驱动器获取文档列表。我使用服务帐户完成身份验证，并将范围设置为具有完全权限的[https://www.googleapis.com/auth/drive 。](https://www.googleapis.com/auth/drive)

但是，尽管我的谷歌驱动器中有测试文件，但响应包含一个空项目列表。

```
 AuthorizationServerDescription desc = GoogleAuthenticationServer.Description;
        X509Certificate2 key = new X509Certificate2(m_file, "notasecret", X509KeyStorageFlags.Exportable);

        string scope = Google.Apis.Drive.v2.DriveService.Scopes.Drive.ToString().ToLower();
        AssertionFlowClient client = new AssertionFlowClient(desc, key) { ServiceAccountId = m_email, Scope = "https://www.googleapis.com/auth/" + scope };

        OAuth2Authenticator<AssertionFlowClient> auth = new OAuth2Authenticator<AssertionFlowClient>(client, AssertionFlowClient.GetState);

        DriveService service = new DriveService(auth);

        FilesResource.ListRequest request = service.Files.List();
        request.Q = "";
        Stream dataStream = request.FetchAsStream();
        StreamReader reader = new StreamReader(dataStream);
        string responseFromServer = reader.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:45:32.830

查看 Nivco 对[Google Drive SDK 的回答：从 Drive 返回的空文件数组，](https://stackoverflow.com/questions/13484462/google-drive-sdk-empty-array-of-files-returned-from-drive/13484913)了解有关您的问题的更多详细信息。

您基本上是在服务帐户的云端硬盘中列出文件，而不是您的。您需要做的是为您尝试模拟的域的用户设置电子邮件，查看 Google Drive SDK 文档以获取说明和示例代码，说明如何执行此操作：

[https://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# asp.net - ExtendedMembershipProvider.GetUserIDfromOauth 返回什么用户 ID？

> ID：13522635
> 
> 赞同：3
> 
> 时间：2012-11-23T03:10:12.193
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, membership-provider

我正在尝试自定义我自己的 ExtendedMembershipProvider 实现。我不知道 GetUserIDFromOauth 方法应该做什么？我看到它默认抛出异常，并且它应该从开放身份验证提供程序返回用户 ID。

我看不到应该如何完成，除非这意味着查找该用户是否存在于系统中？这是它的目的吗？我发现缺乏文档令人困惑......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:29:22.917

`GetUserIdFromOAuth`是`ExtendedMembershipProvider`类使用的一种方法，用于在您的 Web 应用程序数据库中的用户表中查找基于`User.Id`您从 OAuth 或 OpenId 提供程序获得的方法。获取指定用户的数据后，您需要将其保存在数据库中。`Provider``ProviderUserId``Provider``ProviderUserId`

它`throw new NotImplementedException();`默认返回。您需要实现此方法以`User.Id`从您的应用程序数据库中返回一个整数。

这是一个示例实现：

```
 public override int GetUserIdFromOAuth(string provider, string providerUserId)
    {
        using (var context = new YourApplicationEntities())
        {
            // Try to find user with certain Provider and ProviderUserId
            var user = context.Users.SingleOrDefault(
                           q => q.Provider == provider &&
                           q.ProviderUserId == providerUserId
            );

            if (user != null)
            {
                 return user.Id;
            }
        }

        return -1;
    } 
```

此实现假定您的表中有`Provider`和`ProviderUserId`字段`User`。如果此信息保存在不同的表中，您只需修改 LINQ 即可返回所需的结果。

# python - 在比萨（xhtml2pdf）中分页只是重复最后一页

> ID：13522638
> 
> 赞同：5
> 
> 时间：2012-11-23T03:11:29.097
> 
> 标签：python, pisa, xhtml2pdf

我正在使用[Pisa](http://xhtml2pdf.appspot.com/static/pisa-en.html)生成一个 PDF 文件，其中包含遵循通用格式的页面。当我生成 PDF（从命令行或从 python API）时，我显然做错了，我只看到最后一页重复。

在下面的代码上运行比萨，我得到三个页面，每个页面都写着“C 星期三”，而我希望看到三个不同的页面，分别是“A 星期一”、“B 星期二”、“C 星期三”。

我当前的比萨版本是`XHTML2PDF/pisa 3.0.33 (Build 2010-06-16)`

```
<html>
<style>
    /* 297 x 210 */
@page {
  size: a4 landscape;
  margin: 1cm;
  margin-bottom: 2.5cm;

  @frame header {
    -pdf-frame-content: headerContent;
    background-color:black;
    color:white;
    top : 0cm;
    margin-left: 0cm;
    margin-right: 14.5cm; 
    height: 2.5cm;
    width: 14.9cm;
  }

  @frame lhs {
    -pdf-frame-content: lhs;
    background-color:white;
    color:black;
    top : 4.5cm;
    margin-left: 0cm;
    margin-right: 14.5cm; 
    height: 13.5cm;
    width: 14.9cm;
  }

  @frame footer {
    -pdf-frame-content: footerContent;
    color:black;
    bottom: 1cm;
    margin-left: 1cm;
    margin-right: 24.5cm; 
    height: 1cm;
  }

}

body {
}

#headerContent {
    text-align: center;
    background-color: black;
    color: white;
}
h1 {
    font-size: 200%;
}

#lhs-table {
    color:black;
    text-align: center;
    font-size:600%;
}

.big {
    font-size:200%;
    font-style:italic;
}

.day {
    text-align: center;
    background-color: black;
    color: white;
    width: 1.6cm;
    height: 1.3cm;
}

#footerContent {
    font-size: 200%;
}

</style>
<body>

<div>
  <div id="headerContent">
      <h1><br/>HEADER<br/></h1>
  </div>

  <div id="lhs">
      <table id="lhs-table" >
                <tr>
                    <td><span class="big"><em>A</em></span></td>
                </tr>
            </table>
    </div>

  <div id="footerContent">
      <span class="day" >Monday</span>
  </div>

  </div>
    <pdf:nextpage />

<div>
  <div id="headerContent">
      <h1><br/>HEADER<br/></h1>
  </div>

  <div id="lhs">
      <table id="lhs-table" >
                <tr>
                    <td><span class="big"><em>B</em></span></td>
                </tr>
            </table>
    </div>

  <div id="footerContent">
      <span class="day" >Tuesday</span>
  </div>

  </div>
    <pdf:nextpage />

<div>
  <div id="headerContent">
      <h1><br/>HEADER<br/></h1>
  </div>

  <div id="lhs">
      <table id="lhs-table" >
                <tr>
                    <td><span class="big"><em>C</em></span></td>
                </tr>
            </table>
    </div>

  <div id="footerContent">
      <span class="day" >Wednesday</span>
  </div>

  </div>
    <pdf:nextpage />

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T22:18:57.200

从 Github 尝试版本[https://github.com/chrisglass/xhtml2pdf](https://github.com/chrisglass/xhtml2pdf)您的版本太旧且未维护。

关于您的问题，是解析器中的一个已知问题。尝试将标签放在自己的行上，如下所示：

```
<div id="footer">
     <pdf:pagenumber />
</div> 
```

三读后：

```
<body>
<div id="header">
</div>

 <div id="content1>
   content 1
 </div>
 <pdf:nextpage />

 <div id="content2>
     content 2
 </div>
 <pdf:nextpage />

 <div id="content3>
     content 3
 </div>
 <pdf:nextpage />

<div id="footer">
</div>
</body> 
```

从您的代码中，您正在为每个内容重复页眉和页脚。但是您已将它们定义为标题框架（在每一页上自动重复它们），因此解析器一定要疯了。此外，您正在为内容创建另一个静态框架，这是不应该的。

因此，只有一个页眉，一个页脚，创建了许多内容与`<pdf:nextpage />`后面。

[https://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst](https://github.com/chrisglass/xhtml2pdf/blob/master/doc/usage.rst)

也许我又误解了你，因为我不知道你是如何生成这个 html 的。

# php - 测试构造函数太多了吗？

> ID：13522647
> 
> 赞同：8
> 
> 时间：2012-11-23T03:14:00.277
> 
> 标签：php, unit-testing, phpunit, software-quality

首先，我会说我来自 Java 世界（这很重要，真的）。

我一直在编写 PHP 代码，我遇到的一个问题是由于缺乏编译，有时在编译时很容易检测到错误（例如，给定函数的参数数量错误），可以默默地过去。

随着代码覆盖率的增加，通过添加单元测试可以很容易地检测到这一点。问题是，例如测试构造函数以检查传递的参数是否正确是否有意义？我指的不仅是参数的数量，还包括这些参数的内容（例如，如果一个参数为 null，则某些对象应该启动异常以避免创建“脏”对象）。

问题是，我是否被多年的 Java 代码污染了？因为毕竟，增加代码覆盖率以“发现”被误用的函数感觉就像一种（真正）原始的编译方式。

另外，我想指出我已经使用了一个开发环境（PHPStorm），我们也在使用像 PHPCodeSniffer 这样的工具。

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:51:32.870

这是一个很好的问题，可以在多个层面上回答：

1.  语言特点
2.  测试覆盖率
3.  案例工具

**一、语言特点** 正如您所指出的，PHP 语言的特性与 Java 等强类型语言明显不同。这引发了一个严重的问题，即来自 Java 和 C# 等强类型语言的程序员可能不知道 PHP 行为的含义（例如您所描述的那些）。这引入了程序员出错的可能性（例如，一个程序员在使用 Java 时可能不太小心，因为他们知道编译器会捕获不正确的参数，但他们在使用 PHP 开发时可能没有采取适当的谨慎措施）。因此，需要更好的程序员教育/监督来解决这个问题（例如内部公司编码标准、结对编程、代码审查）。

**2\. 测试覆盖率 测试覆盖率** 的论据是非常特定于项目的。在现实世界中，测试覆盖率的水平主要取决于客户的容错能力（由系统中发生错误的*后果决定）。*如果您正在开发要在实时控制系统上运行的软件，那么显然您将进行更多测试。在您的问题中，您将 PHP 确定为首选语言；这同样适用于关键系统基础设施的网络前端数量不断增加。另一方面，如果您正在为模型铁路俱乐部开发一个简单的网站，并且只是在开发一个时事通讯应用程序，那么您的客户可能不会关心构造函数中存在错误的可能性。

**3\. CASE 工具** 最终希望有一个可用的 CASE 工具来检测这些错误，例如缺少参数。如果没有合适的工具，为什么不创建自己的工具。CASE 工具的创建对于大多数程序员来说并非遥不可及，特别是如果您可以连接到您的语言的开源解析引擎。如果您倾向于开源，这可能是一个很好的启动项目，或者您的公司可能会推销这样的解决方案。

**结论** 在您的情况下，是否测试构造函数基本上归结为一个问题：我的系统出现故障的后果是什么？如果花费额外资源来测试构造函数以避免此类故障在经济上是有意义的，那么您应该这样做。否则，可能会通过较少的测试（例如结对编程或代码审查）来解决问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T03:46:48.430

如果设置了无效参数，您是否希望构造函数抛出异常？你希望它明天、下周和明年都以同样的方式表现吗？然后你写一个测试来验证它确实如此。

测试验证您的代码的行为是否符合您的要求。无效参数失败是代码行为，就像计算销售税或显示用户的个人资料页面一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T14:43:37.647

我们测试构造函数，以及参数的顺序，未提供时的默认值，然后是一些实际设置。例如：

```
class UTIL_CATEGORY_SCOPE extends UTIL_DEPARTMENT_SCOPE
{
    function __construct($CategoryNo = NULL, $CategoryName = NULL)
    {
        parent::__construct();              // Do Not Pass fields to ensure that the array is checked when all fields are defined.
        $this->DeclareClassFields_();

        $this->CategoryName = $CategoryName;
        $this->CategoryNo   = $CategoryNo;
    }

    private function DeclareClassFields_()
    {
        $this->Fields['CategoryNo']             = new UTIL_ICAP_FIELD_PAIR_FIRST('CCL', 6, ML('Category'), 8);
        $this->Fields['CategoryName']           = new UTIL_ICAP_FIELD_PAIR_SECOND('CCL', 32, ML('Name'), 15, array(), array(), NULL, UTIL_ICAP_FIELD::EDIT_DENY, UTIL_ICAP_FIELD::UPDATE_DENY, 'DES');
    }
} 
```

然后，我们创建测试不仅检查构造函数及其顺序，而且该类和继承没有改变。

```
public function testObjectCreation()
    {
        $CategoryInfo = new UTIL_CATEGORY_SCOPE();
        $this->assertInstanceOf('UTIL_CATEGORY_SCOPE', $CategoryInfo);
        $this->assertInstanceOf('UTIL_DEPARTMENT_SCOPE', $CategoryInfo);
        $this->assertInstanceOf('UTIL_DATA_STRUCTURE', $CategoryInfo);     // Inherited from UTIL_DEPARTMENT_SCOPE
    }

    public function testConstructFieldOrder()
    {
        $CategoryInfo = new UTIL_CATEGORY_SCOPE(1500, 'Category Name');
        $this->assertEquals(1500, $CategoryInfo->CategoryNo);
        $this->assertEquals('Category Name', $CategoryInfo->CategoryName);
    }

    public function testConstructDefaults()
    {
        $CategoryInfo = new UTIL_CATEGORY_SCOPE();
        $this->assertNull($CategoryInfo->CategoryNo);
        $this->assertNull($CategoryInfo->CategoryName);
    }

    public function testFieldsCreated()
    {
        $CategoryInfo = new UTIL_CATEGORY_SCOPE();
        $this->assertArrayHasKey('CategoryNo', $CategoryInfo->Fields);
        $this->assertArrayHasKey('CategoryName', $CategoryInfo->Fields);
        $this->assertArrayHasKey('DeptNo', $CategoryInfo->Fields);      // Inherited from Parent
        $this->assertArrayHasKey('DeptName', $CategoryInfo->Fields);    // Inherited from Parent
    } 
```

# node.js - 通过 XHR 轮询的 Socket.io 不传递 cookie

> ID：13522649
> 
> 赞同：3
> 
> 时间：2012-11-23T03:14:13.287
> 
> 标签：node.js, express, socket.io, nowjs-sockets

我正在尝试将 Express (3.x) 与 NowJS（主要是 Socket.io 的包装器）结合起来创建一个实时应用程序，首先需要您登录。我承认我是 Node 新手，但我有很好地处理每个包如何单独工作。但是，从 NowJS 访问 Express Session 信息让我很适应。

问题似乎是因为我被迫使用 XHR-Polling（使用 Heroku 作为托管平台），我无法轻松访问 Socket.io 身份验证方法中的 cookie 信息。在下面的 authFunction 代码中，“data.headers.cookie”是未定义的。以一种迂回的方式（在 Now.js 代码中），这在 nowjs.on("connect",...) 回调中将“this.user.cookie”留空（但不是未定义）。这反过来又让我无法获取会话信息。

通过阅读，似乎只有使用 websockets 时 cookie 才可用。如果没有 cookie，除了为他们生成的随机标识符之外，我不知道哪个用户正在调用服务器。

谁能建议如何解决这个问题？在与 Now.js 服务器建立连接后，我是否需要从客户端手动发送 cookie？

```
var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.engine('html', consolidate.swig);
  app.set('view engine', 'html');

  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: "secrethere" , store: sessionStore}));

  app.use(express.static(path.join(__dirname, 'public')));
  app.use(app.router);
});

app.configure('development', function(){
  app.use(express.errorHandler({dumpExceptions: true, showStack: true}));
});

//Map the routes
var routes = require('./routes/routes')(db);
app.get[...] //routes defined here

var server = http.createServer(app, {cookieKey: 'connect.sid'});
server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
});

var parseCookie = require('express/node_modules/connect').utils.parseCookie;
var authFunction = function (data, accept) {
// check if there's a cookie header
if (data.headers.cookie) {
    // if there is, parse the cookie
    data.cookie = parseCookie(data.headers.cookie);

    // note that you will need to use the same key to grad the
    // session id, as you specified in the Express setup.
    data.sessionID = data.cookie['connect.sid'];
} else {
   // if there isn't, turn down the connection with a message
   // and leave the function.
   return accept('No cookie transmitted.', false);
}

// accept the incoming connection
accept(null, true);
};

var everyone = nowjs.initialize(server, {socketio: {transports: ['xhr-polling', 'jsonp-polling'], authorization: authFunction}});

nowjs.on('connect', function (socket) {
//TODO - This will need to be based on the URL that is being visited, or
//similar to establish that users are viewing the same thing
var sid = unescape(this.user.cookie["connect.sid"]); //# you DO have to unescape the session id!

sessionStore.get(sid, function(err, sess){
    console.log("That group who joined? his userId is " + sess.userId)
});

var newRoom = "group";//this.user.session;//.groupName;
var newGroup = nowjs.getGroup(newRoom);
this.now.serverRoom = newRoom;
newGroup.addUser(this.user.clientId);
}); 
```

编辑：我当然更喜欢简单的解决方案，比如这里的最佳答案：[Now.js 中的会话支持](https://stackoverflow.com/questions/9066834/session-support-in-now-js)，但这对我不起作用（可能）出于同样的原因——我的“cookie”是空的并且不包含“连接” .sid”键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:13:10.427

经过大量尝试不同的事情后，我意识到这实际上与我使用的环境（Cloud9 IDE）有关。

使用 Cloud9 进行调试时，它们会为您提供一个不错的 url，让您在“http://[projectname].[username].c9.io”处浏览您的站点。但是，NowJS 将其请求发送到“http://project-[unique ID].rhcloud.com/socket.io/1/xhr-polling/...”。这并**没有**提示 cookie 与请求一起发送，因为它与 cookie 关联的主机不同（好吧，这里的术语可能有点偏离）。

为了解决这个问题，我使用“http://project-[unique ID].rhcloud.com/...”作为调试的基础，它似乎 100% 正常工作。Heroku 似乎没有这个问题，因为所有请求（常规页面请求**和**socketio）都通过同一个主机。

# html - 显示嵌套 div 失败

> ID：13522652
> 
> 赞同：0
> 
> 时间：2012-11-23T03:14:45.783
> 
> 标签：html, internet-explorer, css

我有一个像这样的嵌套 div

```
<div>
<div id="nested">
</div>
</div> 
```

它的风格

```
#nested {
    border: 1px solid #E2E2E2;
    overflow: hidden;
    padding-top: 5px;
    text-align: left;
    width: 10px;
} 
```

但是在 IE7 上显示时，嵌套的“div”是居中对齐的。我应该在样式中添加什么新内容来覆盖以前的样式？

firebug 或 chrome 中没有居中对齐的东西，只有在 IE7 中

我的页面结构如下所示

```
<html>
<body>
   <html>
      <body>
         <div id="nested">
         </div>
      </body>
   </html>
<body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:34:27.283

使用条件

[http://css-tricks.com/snippets/html/add-body-class-just-for-ie/](http://css-tricks.com/snippets/html/add-body-class-just-for-ie/)

样本

html

```
 <!--[if IE 7 ]>    <html dir="ltr" lang="en-US" class="no-js ie7 oldie"> <![endif]--> 
```

css

```
 html.ie7 #nested {
        border: 1px solid #E2E2E2;
        overflow: hidden;
        padding-top: 5px;
        text-align: left;
        width: 10px;
        float:left;
    } 
```

# c++ - RapidXml 属性 100 个字符限制

> ID：13522655
> 
> 赞同：2
> 
> 时间：2012-11-23T03:15:29.853
> 
> 标签：c++, xml, rapidxml, x3d

我正在尝试使用 RapidXml 解析 .x3d 文档。不幸的是，它只给了我任何节点属性的前 100 个字符。我查看了文档，看起来属性值长度不应该有任何限制。

我在 Xcode 中使用 RapidXml；也许动态内存分配不适用于 xcode 编译器？有人遇到过这种情况么？有没有办法克服这个限制？

```
 myfile.open(location.c_str(), std::ifstream::in);
if (myfile.is_open())
{
    while ( myfile.good() )
    {
        getline (myfile,line);
        text += line;
    }
    myfile.close();
}
text += "\0";
rapidxml::xml_document<> doc; 
char *temp = new char[text.length() + 1];
strcpy(temp, text.c_str());
doc.parse<rapidxml::parse_no_data_nodes>(temp); 

//why doesnt this work?
rapidxml::xml_node<>* root = doc.first_node();
rapidxml::xml_node<> *indexedfaceset = getChild(root, "IndexedFaceSet");
rapidxml::xml_attribute<> *indices = indexedfaceset->first_attribute("coordIndex");
rapidxml::xml_node<> *coordinate = getChild(indexedfaceset, "Coordinate");;
rapidxml::xml_attribute<> *coords = coordinate->first_attribute("point");

std::string indices_string = indices->value(); //gets cut off
int isize = indices->value_size(); //this is 108, although the string is longer

    std::string coords_string = coords->value(); //gets cut off
int csize = indices->value_size(); //this is also 108, different size from indices 
```

谢谢！

# delphi - 如果外部 ADO 连接已连接或断开，如何检测组件内部？

> ID：13522659
> 
> 赞同：3
> 
> 时间：2012-11-23T03:15:56.083
> 
> 标签：delphi, events, properties, components, delphi-xe2

我正在开发一个与数据库一起使用的组件，并且数据库连接是通过`TADOConnection`在对象检查器中可见的属性从该组件外部指定的。我假设外部用户可能打算使用此 ADO 组件的事件。然而，我还需要能够检测它何时连接或断开连接，以及其他各种事件。我可以在`TADOConnection`不覆盖外部用户可能已分配的事件处理程序的情况下获取事件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T09:48:18.413

如果没有严重的副作用和/或严格的限制，就没有解决方案。

您必须重新安排事件，但是...

外部用户可以在设计时修改事件（可以以某种方式处理），也可以在运行时修改事件，每种方法都会中断。

作为（可能）可能的解决方法（这是一个限制），您可以从 TADOConnection 发布自己的下降并强制外部用户使用它，并实现多播事件。

如果您只想了解连接/断开连接事件，您可以调用受保护的方法 TCustomConnection.RegisterClient (unit Data.DB)

# git - git - 樱桃采摘 - HOWTO / WHYTO

> ID：13522664
> 
> 赞同：9
> 
> 时间：2012-11-23T03:17:18.953
> 
> 标签：git, git-cherry-pick, git-am

> 问题：您想测试某人开发的功能，但它只存在于一个已经过时的远程分支中。

[资源](http://wiki.koha-community.org/wiki/Using_Git_Cherry_Pick)

1.  樱桃采摘如何解决问题？
2.  **为什么我不使用 git am 或 git apply？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T03:22:00.717

> 问题：您想测试某人开发的功能，但它只存在于一个已经过时的远程分支中。

如果您合并或重新定位，您会得到一堆旧的更改，可能是冲突的。

通过挑选樱桃，您可以获取一个更改集，并将其作为新提交重播到另一个分支。

如果您只想将一个提交到另一个分支而不需要其历史记录，这将很有用。

使用该`-x`选项很有用，因此提交消息包含一个注释，它是从中挑选出来的。

> 为什么我不使用 git am 或 git apply？

因为 git apply 用于应用补丁（文件），而 git am 用于应用一系列补丁。git cherry-pick 应用提交 - 即，来自您自己的存储库的提交，与您从其他存储库导入的提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T03:24:35.540

来自[`git help cherry-pick`](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)：

> git-cherry-pick - 应用一些现有提交引入的更改
> 
> [...]
> 
> 给定一个或多个现有提交，应用每个引入的更改，并为每个提交记录一个新的提交。这要求您的工作树是干净的（不修改 HEAD 提交）。

因此，当您`cherry-pick`提交时，`git`接受该提交的更改（它的`diff`）并尝试将其应用于您当前的工作目录，创建一个与您正在执行的提交等效的新提交`cherry-pick`。

这是一种在不同的历史行上重新进行另一个提交更改的方法。

除了进行更改之外，`cherry-pick`还保留原始提交的信息，如作者等。

最后，`cherry-pick`可以接收一组要应用的提交，在这种情况下，它会按照`cherry-pick`时间顺序（较旧的在前）一个接一个地处理它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T07:07:09.653

> 问题：
> 您想测试某人开发的功能，但它只存在于一个已经过时的远程分支中。

它解决了这个问题，因为：

*   您不想合并旧分支，包括与您当前的开发状态不再相关的提交
*   你不想为了获得那个提交而在旧分支之上重新设置你的分支。
*   您不必将分支合并回那个旧分支

最后一点很重要，因为挑选樱桃的第一个缺点是它引入了**[重复提交](https://stackoverflow.com/questions/2627953/git-cherry-pick-and-datamodel-integrity/2628915#2628915)**。但在你的情况下，这并不重要。

另一个缺点是您选择的提交可能具有基于先前提交（该旧分支的）的**[功能依赖关系。](https://stackoverflow.com/questions/881092/how-to-merge-a-specific-commit-in-git/881112#881112)**
换句话说，它的代码之所以有效，只是因为其他较旧提交的其他代码（不是精选的）。
这可能更难以检测。

# c - 如何将浮点数舍入到小数点后的特定位数？

> ID：13522670
> 
> 赞同：1
> 
> 时间：2012-11-23T03:19:09.910
> 
> 标签：c, floating-point, floating-point-conversion

> **可能重复：**
> [是否有在 C 中舍入浮点数的函数，还是我需要自己编写？](https://stackoverflow.com/questions/497018/is-there-a-function-to-round-a-float-in-c-or-do-i-need-to-write-my-own)
> [在 C 中将数字四舍五入到小数点后 2 位](https://stackoverflow.com/questions/1343890/rounding-number-to-2-decimal-places-in-c)

我正在寻找 c 中的一个函数，它可以将我的浮点变量四舍五入到另一个浮点变量，小数点后有两位数，请帮助和演示。谢谢你

**更新：** 我需要这个函数来计算，而不是打印。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:26:28.160

你可以尝试这样的事情：

```
float a = 1.234568;
float b = ((int) a*100.f) / 100.f; 
```

而不是`(int)`你可以`floor()/ceil()`根据你的要求使用。

# php - 无法使 PHP PDT xDebug 在 Eclipse 中的断点处停止

> ID：13522671
> 
> 赞同：2
> 
> 时间：2012-11-23T03:20:15.837
> 
> 标签：php, debugging, xdebug, eclipse-pdt

通过选择 Break at First line，调试器在输入每个文件时激活，允许我单步执行和退出代码。但是，必须通过 50 万步才能到达开始变得有趣的地步，这有点麻烦。

我的设置是 WIMP Window 7，PHP 5.3

```
; xDebug config
zend_extension = "C:\Program Files (x86)\PHP\v5.3\ext\php_xdebug-2.2.1-5.3-vc9-nts.dll"

xdebug.remote_autostart=0;
xdebug.remote_enable=On 
xdebug.remote_host="localhost" 
xdebug.remote_port=9000 
xdebug.remote_handler="dbgp" 
```

我已经确保路径映射是正确的。但可能是因为我从我的 Eclipse 项目链接到 PHP 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T01:49:33.647

下载**Eclipse Juno**后，我可以在断点处停止。

我已经用 Eclipse Indigo 尝试了一切。版本：3.7.2 版本号：M20120208-0800

无论是使用内部浏览器还是外部浏览器，都无法正常工作。

我猜是时候转移到朱诺了？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T12:09:37.703

Eclipse 有一个选项可以关闭“在第一行中断”。转到“Windows -> Preferences -> PHP -> Debug”并取消选中“Break at first line”并进入“Run > Debug Configurations > PHP Web Application”并在所有配置中取消选择“Break at first line”。然后重新启动 Eclipse。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-16T14:24:04.867

对于所有仍在与这个问题作斗争的人，一些方便的技巧。

检查您拥有的 Eclipse 版本（包）？事实[证明](https://stackoverflow.com/q/5035964/1469208)，当您将应用程序调试为`Web Application`. 仅当您将其作为`PHP Script`. 这使得它对调试过程毫无用处。

您应该考虑[为 PHP 开发人员恢复到较旧的 Galileo Package Eclipse](http://www.eclipse.org/downloads/packages/eclipse-php-developers/galileosr2)或安装最新的[Eclipse Juno](http://www.eclipse.org/downloads/packages/eclipse-classic-422/junosr2)（甚至是[最新的 Eclipse Kepler 开发人员版本](http://www.eclipse.org/downloads/packages/eclipse-classic-43-m7/keplerm7)），它没有内置 PDT 支持，但您可以使用`Help > Install New Software..`(指向`http://download.eclipse.org/tools/pdt/updates/release`）。

据报道，这些版本能够按照`Web Application`断点进行调试。

另外，请记住，Xdebug 必须作为*Zend Extension*运行才能支持断点！换句话说，从您的中删除`extension=xdebug.so`（在 Linux 或`xdebug.dll`Windows 上）行`php.ini`并将其替换为`zend_extension=/full/path/to/xdebug.so`（在 Linux 或`zend_extension=X:\full\path\to\xdebug.dll`Windows 上）。Zend 扩展需要完整路径，即使它们被放入`/php/ext`文件夹，就像常规 PHP 扩展一样。您可以在[Xdebug FAQ](http://xdebug.org/docs/faq)中找到更多信息（寻找“ *Xdebug 仅作为 PHP 扩展加载，而不是作为 Zend 扩展*”问题的答案）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-24T00:44:29.467

这是一篇描述如何获取断点以在 Eclipse 中使用 XDebug 的帖子。

[http://programmersjunk.blogspot.com/2013/05/eclipse-and-xdebug.html](http://programmersjunk.blogspot.com/2013/05/eclipse-and-xdebug.html)

# r - 如何附加到 R 历史文件而不是覆盖？

> ID：13522673
> 
> 赞同：4
> 
> 时间：2012-11-23T03:20:36.753
> 
> 标签：r

我把这个放在我的`.Rprofile`：

```
Sys.setenv(R_HISTSIZE='1000000')
Sys.setenv(R_HISTFILE='~/.Rhistory')

.Last <- function() {
    if(interactive()) try(savehistory("~/.Rhistory"))
} 
```

退出 R 会话后，历史记录被写入文件，但文件被覆盖！我怎样才能让 R 追加到历史文件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:12:55.997

保存历史文件后，您可以使用 R 的文件读写命令将该历史文件附加到另一个文件，称为任何您喜欢的文件（`~/.R-ancient-history`也许？）。

R 有一个功能！尝试

```
file.append("~/.R-ancient-history","~/.Rhistory") 
```

在你的`.Last`.

如果你真的想要它`.Rhistory`，那么`file.rename("~/.R-ancient-history","~/.Rhistory")`在追加之后做，应该这样做......

一切都很好，未经测试......那是你的工作！

# delphi - RAD Studio IDE 键盘快捷键

> ID：13522674
> 
> 赞同：2
> 
> 时间：2012-11-23T03:20:42.497
> 
> 标签：delphi, ide, keyboard-shortcuts, c++builder, breakpoints

我只花了 15 分钟寻找默认 IDE 键盘快捷键列表，因为我对如何使用键盘快捷键切换断点一无所知——这让我发疯了。

如果有人可以在 XE3 文档 wiki 中找到页面，我很乐意看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:20:42.497

你相信我在 XE3 文档 wiki 中找不到这个吗？经过一番谷歌搜索后，我最终得到了这个页面：

[http://delphi.wikia.com/wiki/Default_IDE_Shortcut_Keys](http://delphi.wikia.com/wiki/Default_IDE_Shortcut_Keys)

（F5 顺便说一句，切换断点 <headslap />）。

希望它可以帮助某人。

# c++ - 英特尔 C++ 编译器会优化代码中从未调用过的函数吗？

> ID：13522678
> 
> 赞同：3
> 
> 时间：2012-11-23T03:21:09.347
> 
> 标签：c++, optimization, compiler-construction, intel

只是一些优化注意事项：

有谁知道英特尔 C++ 编译器（例如 ICC 13.0，当然，使用 /O3 等一些优化选项编译）是否会自动优化代码中任何未使用/未调用的结构/类/函数/变量，例如 examplefun （） 以下：

```
 //...defining examplefunc()....//

         const int a=0;
         if (a>0) 
            int b=examplefunc(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:28:11.690

编译器通常不会优化未使用的函数，除非它们是`static`并且因此只能在特定模块中访问。但是，如果链接是在函数级别而不是模块级别完成的，则链接器可能会死剥离函数。

您可以检查程序集输出、链接器映射或使用类似[`objdump`](http://en.wikipedia.org/wiki/Objdump)的方法来检查函数是否包含在链接的二进制文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:36:19.657

我不认为这个问题是正确的。虽然问题从字面上询问编译器是否会优化未使用的函数，但这是只有链接器才能做的事情。

那么编译器能做什么呢？编译器可以优化掉死代码，例如在上面的代码中，并且因为`a`已知是`0`，编译器可以完全删除该`if`语句。对于大多数用途来说，这已经足够好了（一个函数是否成为可执行文件不会对性能产生太大影响，是否避免分支会影响函数的性能——尤其是分支错误预测）。

另外，如果编译器对上面的分支进行优化，程序中对函数的引用就会少一个`exampleFunc`，而链接器在处理生成的二进制文件时，如果整个程序中没有对函数的引用，它可以去掉符号共。请注意，这只能作为程序链接的一部分来完成，对于库，即使现在不调用该函数，稍后与该库链接的程序也可能会使用它。

所以回到最初的问题，编译器将优化分支，链接器*可能会*或不会从二进制文件中删除函数，但这并不重要。

关于其他结构， for`struct`和`class`，唯一使它成为二进制文件的是成员函数，并且同样适用于那里：如果您正在链接程序并且没有使用任何函数，则链接器可以删除符号。

# flash - 使用actionscript 3从文本文件中更改动态文本

> ID：13522679
> 
> 赞同：2
> 
> 时间：2012-11-23T03:21:10.097
> 
> 标签：flash, text, actionscript, external, string-formatting

我正在尝试制作一个 Flash，每次启动 .swf 文件时，文本都会从文本文件中动态更新。

在这方面我不是最聪明的，但我会尝试解释我想要做什么。

我想要一个特定格式的 .txt 文件。与此类似

例子：

```
 Team1: Time
    Player1: Dusk
    Player2: Dawn
    Player3: Noon
    Team2: Food
    Player1: Pizza
    Player2: Cheese
    Player3: Bread 
```

然后输出每个元素后面的文本，并输出到同名的动态文本对象中。

我将有一个名为 Team1 的空文本对象：运行此脚本后，它会显示“时间”而不是空白。

我尝试了几种不同的方式来读取文件，但是在拆分并将其发送到动态文本对象时我遇到了麻烦。

从闪光灯适当调整的最终结果看起来像这样

```
 Time        vs        Food
    Dusk                  Pizza
    Dawn                  Cheese
    Noon                  Bread 
```

这是我现在拥有的当前代码

```
 var TextLoader:URLLoader = new URLLoader();
    TextLoader.addEventListener(Event.COMPLETE, onLoaded);
    function onLoaded(e:Event):void {
        var PlayerArray:Array = e.target.data.split(/\n/);
    }
   TextLoader.load(new URLRequest("roster1.txt")); 
```

所以问题是真的，我如何使用我使用的格式正确拆分它，然后将动态文本设置为文本后跟标签（team1:、player1: 等）

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:09:47.293

这是拆分数据的快速而肮脏的尝试：

它假定前缀和值将由“：”分隔，并且“团队”用于确定团队的开始。

它循环遍历字符串数组并将每个字符串沿“：”拆分，然后检查前缀是否包含字符串“Team”，以确定它是新团队的开始还是当前团队的球员。

```
//assumes this is the starting state of the data
var playerArray:Array = new Array();
playerArray.push("Team1: Time",
"Player1: Dusk",
"Player2: Dawn",
"Player3: Noon",
"Team2: Food",
"Player1: Pizza",
"Player2: Cheese",
"Player3: Bread");

var teams:Array = new Array();
var currentTeam:Array = new Array();;
var prefix:String;
var value:String;
for(var counter:int = 0; counter < playerArray.length; counter++){
    prefix = playerArray[counter].substring(0, playerArray[counter].indexOf(": "));
    value =  playerArray[counter].substring(playerArray[counter].indexOf(": ") + ": ".length);

    // found a team prefix, this is the start of a new team
    if(prefix.indexOf("Team") != -1){
        teams.push(currentTeam);
        currentTeam = new Array();
        currentTeam.push(value); // add the name of the currentTeam to the array
    } else {
        // else this should be a player, add it to the currentTeam array
        currentTeam.push(value);
    }
}
// add the last team
teams.push(currentTeam);
// remove the first empty team array just due to the way the loop works
teams.shift();

trace(teams.length); // traces 2
trace(teams[0]); // traces the team members of first team
trace(teams[1]); // traces the team members of next team 
```

结果是一组球队数组，其中每个球队数组的索引 0 是球队名称，后面跟着球员。

从这里您应该能够创建文本字段（或使用现有的）并从数组中设置文本。

也许其他人可以提出更有效的方法？我还尝试通过将其组合成一个长字符串并沿“Team”拆分，然后是“Player”，然后是“：”来尝试将其分离出来，但它变得更加混乱并且可能容易出错玩家名称中包含“团队”或“玩家”。

# java - 在数组中搜索某个字符串

> ID：13522683
> 
> 赞同：0
> 
> 时间：2012-11-23T03:21:45.893
> 
> 标签：java, arrays, search, boolean, return

在 verifyPlate 方法中，如何在数组 Plates 中搜索某个字符串“platenum”，然后将布尔值返回给 main 方法？

```
import java.util.Scanner;
import java.util.Date;
import java.io.*;

public static boolean verifyPlate(String[] plates, int numCars, Scanner keyboard)
  {
    Scanner s = new Scanner(System.in);

    System.out.print("Enter your plate number: ");
    String platenum = s.nextLine();

    boolean real=false;

    for (int i=0;i!=plates.length;i++)
    {
       boolean platers = platenum.equals(plates[i]); 

       if(platers)
       {
           System.out.println("Your vehicle is registered");
        }
       else
        System.out.println("Your vehicle is not registered");

     platers=real;
    }

    return real;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T03:27:15.183

您只需要 1 行：

```
return Arrays.asList(plates).contains(platenum); 
```

如果盘子是一个列表而不是一个数组，则可以省略对 asList 的调用。一般来说，要避免使用数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:27:43.783

您的方法将不起作用，因为在`real`循环中的下一次迭代之后可以重置变量。试试这个：

```
public static boolean verifyPlate(String [] plates, int numCars,
                                                  Scanner keyboard) {
    Scanner s = new Scanner(System.in);

    System.out.print("Enter your plate number: ");
    String platenum = s.nextLine();

    for (int i=0;i!=plates.length;i++){
        boolean platers = platenum.equals(plates[i]); 

       if(platers) {
       System.out.println("Your vehicle is registered");   
       return true;
       }

    }
    System.out.println("Your vehicle is not registered");
    return false;
} 
```

# java - Axis2 ServiceClient 选项忽略超时

> ID：13522686
> 
> 赞同：5
> 
> 时间：2012-11-23T03:22:41.043
> 
> 标签：java, rest, soap, timeout, axis2

我在版本中使用 Axis2：

```
Implementation-Version: 1.7.0-SNAPSHOT
Implementation-Vendor-Id: org.apache.axis2
Implementation-Vendor: The Apache Software Foundation
Jenkins-Build-Number: 1847 
```

我想将 ServiceClient 的超时设置为 2000 毫秒，这是我们的代码：

```
Options options = new Options();
options.setTo(new EndpointReference(getUserServiceEndPoint()));
options.setProperty(Constants.Configuration.ENABLE_REST,
        Constants.VALUE_TRUE);
// setting timeout to 2 second should be sufficient, if the server is
// not available within the 3 second interval you got a problem anyway
options.setTimeOutInMilliSeconds(2000);

ServiceClient sender = new ServiceClient();
sender.engageModule(new QName(Constants.MODULE_ADDRESSING)
        .getLocalPart());
sender.setOptions(options);
OMElement getSessionResult = sender
        .sendReceive(getPayloadMethodGetSession()); 
```

但是我仍然在日志中看到：

> org.apache.axis2.AxisFault：主机在 60000 毫秒的超时时间内没有接受连接

它真的也需要60秒。所以错误消息不仅仅是错误的，似乎超时选项只是被忽略了，它总是使用默认选项。

有人有类似的问题吗？

谢谢塞巴斯蒂安
_

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:53:45.863

我能够解决这个问题（尽管它在我看来有点重复）

```
int timeOutInMilliSeconds = 2000;
options.setTimeOutInMilliSeconds(timeOutInMilliSeconds);
options.setProperty(HTTPConstants.SO_TIMEOUT, timeOutInMilliSeconds);
options.setProperty(HTTPConstants.CONNECTION_TIMEOUT, timeOutInMilliSeconds); 
```

塞巴斯蒂安

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-20T20:03:33.483

根据 Axis2 1.6.3 的 API 文档，它是两个属性或 timeOutInMillis，如：

```
Options options = new Options();
options.setProperty(HTTPConstants.SO_TIMEOUT, new Integer(timeOutInMilliSeconds));
options.setProperty(HTTPConstants.CONNECTION_TIMEOUT, new Integer(timeOutInMilliSeconds)); 
```

**或者**

```
options.setTimeOutInMilliSeconds(timeOutInMilliSeconds); 
```

**来源：** [http ://axis.apache.org/axis2/java/core/docs/http-transport.html](http://axis.apache.org/axis2/java/core/docs/http-transport.html)

# java - 通过 PHP Exec() 或类似函数启动 Minecraft_Server.jar

> ID：13522687
> 
> 赞同：2
> 
> 时间：2012-11-23T03:22:43.117
> 
> 标签：java, php, jar, amazon-ec2, minecraft

我正在尝试构建一个启动的脚本`minecraft_server.jar`（位置：用户目录/mineserver/minecraft_server.jar）。

我安装了 PHP 和 Apache，我正在尝试从`/var/www/html/interface.php`.

通过控制台，服务器通过运行以下命令正常启动：

```
java -Xmx1024M -Xms1024M -jar mineserver/minecraft_server.jar nogui 
```

...来自用户目录。所以在`interface.php`文件中我有以下内容（上面列出的注意位置）：

```
system('java -Xmx1024M -Xms1024M -jar /home/ec2-user/mineserver/minecraft_server.jar nogui', $retval); 
```

但是在我访问文件后服务器永远不会启动。我究竟做错了什么？

## 感谢您提供任何和所有线索。

我想说谢谢你在感恩节的帮助。虽然我还没有找到解决方案，但我很感激这些努力。再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:31:14.467

你检查过错误日志吗？默认情况下是在`/var/log/httpd`。如果有任何问题，它应该在那里。否则，它可能开始出错，我建议在[屏幕](http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/)中启动它，这样你就可以跳进去检查它正在做的任何事情。

通过您的发行版使用的任何方法安装`screen`，然后将启动字符串更改为：
`screen -dmS "minecraft" java -Xmx1024M -Xms1024M -jar /home/ec2-user/mineserver/minecraft_server.jar nogui`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T03:33:34.187

该命令将使用权限以及运行 Web 服务器的任何用户帐户的环境执行。

特别是，它可能有不同的`PATH`条目，`java`甚至可能找不到该命令，或者它可能在其他地方找到等等......

另外，请注意它从您的 PHP 脚本继承的当前工作目录。

查看`exec()`并检查输出以帮助自己进行一些基本调试。

此外，您可能想要更多类似的东西

```
exec('nohup java etc... > /dev/null 2>&1 &'); 
```

以便该进程得到正确的后台处理并与网络服务器父进程断开连接。

# jquery - jquery unbind 覆盖表单提交中的 onsubmit

> ID：13522688
> 
> 赞同：1
> 
> 时间：2012-11-23T03:22:45.067
> 
> 标签：jquery, webforms, submit

这是表单声明：

```
 <form id="form1" method="post" onsubmit="this.action='/mis_apps/scholarships-syste'+'m/index.cfm/scholarships/edit';"> 
```

这是我的javascript：

```
 $("#form1").attr("action", "/mis_apps/scholarships-syste'+'m/index.cfm/scholarships/test");
     alert($("#form1").attr("action"));
     $("#form1").unbind("submit").submit(); 
```

警报正确显示新操作。但是运行提交时，它仍然会转到 onsubmit 中的原始代码。

我也试过：

```
 $("#form1").unbind("submit");
    $("#form1").submit(); 
```

但它仍然不起作用。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:38:10.490

`.unbind`将仅删除 jQuery 附加的事件处理程序。

尝试这个，

```
$('#form1').removeAttr('onsubmit')
$('#form1').submit(); 
```

你可以在这里测试它，[http://jsfiddle.net/k5Tnh/3/](http://jsfiddle.net/k5Tnh/3/)

# android - 带有流式 hls 的 html5 视频全屏

> ID：13522689
> 
> 赞同：1
> 
> 时间：2012-11-23T03:22:46.350
> 
> 标签：android, html, video-streaming, html5-video

我对使用视频标签的流式传输 hls 有一点问题。

最初我将 flowplayer 与后备 flowplayer.ipad.js 一起使用，它实际上只是生成视频以供在无法使用 flash 时使用（例如 ipad）。ANW 我看到它为这些设备使用了视频标签（我也将它用于 android 设备）。

简单来说，这段代码其实可以在android上运行：

```
<video id="testchoi" width="320"  height="240" controls preload>
<source src="some_hls_stream_here.m3u8"/>
</video> 
```

添加 type='application/vnd.apple.mpegurl' 即可在 ipad 上运行。
但是抛开这个，我想问一下，在android中，如果你在播放时改变大小，它会出错。更具体，播放它，然后去全屏。
我认为存在问题，因为谷歌对 hls 的支持不多（因为它是苹果标准的 ANW）。有没有办法解决？
我正在尝试执行以下操作：
beforeEnterFullscreen => stop video => enterFullscreen => reLoad video => play video。对此也有任何帮助，我无法为全屏事件添加 eventListener

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:54:06.980

在这些设备中找到全屏事件。

```
player.addEventListener('webkitbeginfullscreen', function(){
            this.load();
            this.play();
          }, false);
          player.addEventListener('webkitendfullscreen', function(){
            this.load();
            this.play();
          }, false); 
```

上次我尝试使用 webkitenterfullscreen 时，它在移动设备中没有用。直到现在，我只能想出上面的解决方法。

# android - 将字节数组转换为字符串，反之亦然

> ID：13522690
> 
> 赞同：3
> 
> 时间：2012-11-23T03:22:59.577
> 
> 标签：android

我正在使用 Android javax API 加密一个字符串，该字符串返回一个字节数组，我再次将其转换为字符串（目的是稍后写入文本文件）。

现在使用这个字符串，我转换为字节数组来解密，它返回另一个字节数组，我再次转换为字符串。

我无法让它工作。我将问题缩小到字符串转换为字节数组部分。因为如果我使用加密的字节数组来解密然后得到它工作的字符串。

不确定是什么问题。我使用以下进行转换：

```
String str;
Byte [] theByteArray = str.getBytes("UTF-8");
String val = new String (theByteArray , "UTF-8");

and 

Byte [] theByteArray = str.getBytes();
String val = new String (theByteArray); 
```

从字节数组转换为字符串的最佳方法是什么，反之亦然而不会丢失任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:51:28.700

您可以使用 apache 库的[Hex](http://commons.apache.org/proper/commons-codec/javadocs/api-release/org/apache/commons/codec/binary/Hex.html)类。它提供[解码](http://commons.apache.org/proper/commons-codec/javadocs/api-release/org/apache/commons/codec/binary/Hex.html#decodeHex%28char%5b%5d%29)和[编码](http://commons.apache.org/proper/commons-codec/javadocs/api-release/org/apache/commons/codec/binary/Hex.html#encodeHex%28byte%5b%5d%29)功能。

```
String s = "42Gears Mobility Systems";
byte[] bytes = Hex.decodeHex(s.toCharArray());

String s2 = new String(Hex.encodeHex(bytes)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:07:42.643

如果您确实需要另一种方法将字节数组存储为字符串，反之亦然，最好的方法是使用[Base64 编码](http://en.wikipedia.org/wiki/Base64 "可选标题")，这样您就不会丢失任何数据。这是您可以下载 zip的[链接。](http://iharder.sourceforge.net/current/java/base64/ "可选标题")提取 zip 并将类文件包含在您的项目中。然后在需要编码和解码的任何地方使用以下代码片段。

**//对数据进行编码并转换为字符串**

```
ByteArrayOutputStream bao = new ByteArrayOutputStream();
 bitMap.compress(Bitmap.CompressFormat.JPEG, 90, bao);
  byte [] ba = bao.toByteArray();
  String ba1=Base64.encodeBytes(ba); 
```

**//再次将数据解码为字节数组**

```
try{
            byte[] ba3 = Base64.decode(ba1);

    }catch(Exception e)
            {

            } 
```

# android - 如何在 JSON/Android 中设置图像的 URI

> ID：13522692
> 
> 赞同：0
> 
> 时间：2012-11-23T03:23:14.630
> 
> 标签：android, json, image

我正在使用它来发送图像，但它只接受一个 URL。如何设置本地图像？

```
JSONObject media = new JSONObject();
media.put("type", "image");
media.put("src",  "URL");
media.put("href", "http://meadjohnsonasia.com.my/mobileapp");
attachment.put("media", new JSONArray().put(media)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:28:27.420

你不能像那样发送本地图像。您必须将图像上传到某个服务器并将 url 发送到上传的图像，或者将图像直接上传到您要发送此 json 的服务器。

# c# - C# 将字符串转换为运算符

> ID：13522693
> 
> 赞同：0
> 
> 时间：2012-11-23T03:24:02.570
> 
> 标签：c#

我想在c#中将字符串转换为运算符

```
 **string type = "+";
        int d = 22;
        int c = 33;
        int total;
        total = d + type + c;** 
```

怎么做 ？

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:35:17.817

您不能将字符串转换为“运算符”。运算符是为其操作数定义的，如果您不知道您的操作数是什么，将字符串转换为运算符是没有意义的。

假设您确实知道您拥有哪些操作数，那么问题本身就不再是“转换”，而是实际上您正在尝试构建解析引擎。这是一个相当困难的问题。除非您实际上正在尝试创建自己的脚本语言或类似的东西，否则使用查找表可能更容易，表中的每个元素都引用可以在操作数上运行的某些方法。

在 C# 中，可以使用一个简单的语句来实现这样的数据结构`switch`（当然，您可以将其无限化，但这是最简单的解决方案）。

```
switch( type )
{
    case "+":
        return plusOperator(d, c);
    case "-":
        return minusOperator(d, c);
} 
```

然后，您将定义合适的方法，例如`plusOperator`并`minusOperator`实际实现程序的逻辑。

这个解决方案相当肮脏，因为您对某些行为进行了硬编码，但实际上，如果您在良好的系统架构方面想要的远不止这些，它就会成为一个解析问题。如果你走这条路，四人组设计模式将成为很好的参考资料（特别是解释器、迭代器和复合等模式）

# objective-c - 如何使用 NSPrintOperation 添加标题？

> ID：13522702
> 
> 赞同：1
> 
> 时间：2012-11-23T03:25:24.477
> 
> 标签：objective-c, xcode, macos, header, nsprintoperation

我想为我的 Mac OSX 应用程序打印带有页眉和页脚（页码）的 myWebView 的内容。到目前为止，我可以使用以下代码打印 myWebView 的内容（来自此链接[Printing multiple pages in Objective-C](https://stackoverflow.com/questions/5763995/printing-multiple-pages-in-objective-c)）。

```
- (IBAction)sendToPrinter:(id)sender {
    NSPrintInfo *printInfo;
    NSPrintInfo *sharedInfo;
    NSPrintOperation *printOp;
    NSMutableDictionary *printInfoDict;
    NSMutableDictionary *sharedInfoDict;
    NSDictionary *printSettings;
    sharedInfo = [NSPrintInfo sharedPrintInfo];
    sharedInfoDict = [sharedInfo dictionary];
    printInfoDict = [NSMutableDictionary dictionaryWithDictionary:sharedInfoDict];
    [printInfoDict setObject:NSPrintSpoolJob forKey:NSPrintJobDisposition];
    printInfo = [[NSPrintInfo alloc] initWithDictionary: printInfoDict];
    [printInfo setHorizontalPagination: NSFitPagination];
    [printInfo setVerticalPagination: NSAutoPagination];
    [printInfo setVerticallyCentered:NO];
    [printInfo setLeftMargin:36];
    [printInfo setRightMargin:36];
    [printInfo setTopMargin:72];
    [printInfo setBottomMargin:72];
    [printInfo setScalingFactor:1.0];
    [[printInfo dictionary] setValue:[NSNumber numberWithBool:YES] forKey:NSPrintHeaderAndFooter];
    [[printInfo dictionary] addEntriesFromDictionary:printSettings];
PrintTextView *printView = [[PrintTextView alloc] initWithFrame:[printInfo imageablePageBounds]];
    printView.printJobTitle = @"Title of page to be printed inside the header"; 
    NSView *webViewContent = [[[myWebView mainFrame] frameView] documentView];
    printOp = [NSPrintOperation printOperationWithView:webViewContent printInfo: printInfo];
    [printOp runOperation];
} 
```

我已将 PrintTextView 类添加到我的项目中。我一直在阅读 OSX 库文档和 NSPrintOperation 方法，但到目前为止，作为一个新手，我无法弄清楚如何添加页眉和页脚。感谢您的帮助、任何示例代码或指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-27T12:35:48.067

使用`WebUIDelegate`CTMacUser 建议的方法

```
#pragma mark - WebUIDelegate Methods

- (float)webViewHeaderHeight:(WebView *)sender
{
    return 20.0;
}

- (void)webView:(WebView *)sender drawHeaderInRect:(NSRect)rect
{
    NSString *headerString = @"Title of page to be printed inside the header";
    [headerString drawInRect:rect];    
} 
```

# sql-server - 如何将两个插入查询附加/联合到 sql server 的 1 行中

> ID：13522703
> 
> 赞同：0
> 
> 时间：2012-11-23T03:25:25.673
> 
> 标签：sql-server, vb.net

我有一个问题，我不知道如何将两个插入查询附加/联合到 sql server 的 1 行中...

我的查询目前是这样的

```
id        qty      name        size       remarks          condition
=============================================================================
1         2        wheel      null       null              null
2        null      null        345       need service      ok
3        null      null        678       condem size       no 
```

第 2,3 行是一个循环查询，因为我动态添加了文本框。第一行是用户只输入一次的修复文本框。所以我想将这些数据组合到 sql 数据库中。假设它必须只有 2 行，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-16T21:00:19.707

您可以通过多种方式做到这一点。

## 使用存储过程

创建一个用于插入“循环查询”记录的存储过程。例如

`addDynamicRecord(@size int, @remarks varchar(MAX), @condition varchar(MAX))`

对于每个“动态记录”（使用您的术语）而不是执行`INSERT`，您将为记录 #2、#3 等调用此过程。在该过程中，将检查动态记录是否已与您的固定记录合并（ #1）。如果没有， 用, ,`UPDATE`记录 #1 。否则, ,成新纪录。`@size``@remarks``@condition``INSERT` `@size``@remarks``@condition`

## 使用`INSTEAD OF INSERT`触发器

这将执行与上述存储过程相同的操作，但它们将在您使用标准`INSERT`语句时启动。有关更多信息`INSTEAD OF INSERT`，请在此处查看：[http ://technet.microsoft.com/en-us/library/ms175089(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/ms175089(v=sql.105).aspx)

一般来说，我推荐第一种方法，它更干净，保持标准`INSERT`完整地进入你的表。

# css - 获取值的列表： display: list-item 和 discs 在前面

> ID：13522706
> 
> 赞同：0
> 
> 时间：2012-11-23T03:26:06.047
> 
> 标签：css, browser

我的李正在显示：列表项；自动从浏览器并在前面有光盘，我尝试了 list-style-type:none; 但它不起作用，唯一起作用的是 display: inline; 然后光盘消失了，但它弄乱了它们的所有位置。如何删除显示：列表项；？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:39:45.140

把它放在 ul 而不是 li

```
ul{list-style-type:none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:55:12.847

修复了问题，所有li的前面都是背景图，现在我把它去掉了，问题解决了，很抱歉给大家带来了困扰，谢谢

# http - 长 HTTP 请求会暂停 websocket 数据传输？

> ID：13522710
> 
> 赞同：0
> 
> 时间：2012-11-23T03:26:28.630
> 
> 标签：http, websocket

我有一个页面 PA 女巫包含一个 iframe 元素，并且 iframe 的 src 属性对页面 PB 的引用。在 PA 中，我已经与服务器建立了 websocket 连接。

那么，在这种情况下，如果我有一个大文件要在 PB 中发布到服务器，这个操作会暂停 PA 和服务器之间的数据传输吗？

我的意思是，PB中的post请求需要超过1分钟才能完成，是不是意味着在这1分钟内，所有的数据传输都会在队列中暂停，直到post请求完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T00:36:30.803

每个 websocket 使用到服务器的专用连接。任何其他浏览活动，例如在另一个 iframe 中的上传，都不会对它们产生太大影响。由于网络拥塞，连接质量可能会受到一点影响，但数据交换应该仍然是可能的。

这意味着除非 Web 浏览器具有最大连接数或每个服务器的连接数，并且 Websocket 连接数也计入该限制。但是我宁愿期望上传失败，因为这是后来的操作。

# java - Java 聊天服务器-客户端

> ID：13522711
> 
> 赞同：-2
> 
> 时间：2012-11-23T03:26:35.913
> 
> 标签：java, chat, java-server

我是 Java 新手。我正在尝试使用一个客户端制作一个简单的聊天应用程序，但是有些不对劲..无法弄清楚。尝试收听它时，它会卡在与服务器的连接（紧随其后）。想法很简单：客户端发送消息，服务器接收并发送回。请帮忙...！

**主要的：**

```
public class main {
 public static void main(String[] args) {
    Server Server = new Server();
    Server.runServer();        

    Client client = new Client();
    client.runForm();
}  
} 
```

**服务器**

```
public class Server {

public static int SERVERA_PORTS = 5432;
private static JTextArea txtMessages;
public static void main(String[] args) {

}

 public void runServer() {   
    //Form
    JFrame frame = new JFrame();
    txtMessages = new JTextArea();
    JPanel pnlContent = (JPanel) frame.getContentPane();
    pnlContent.setLayout(new BorderLayout());
    pnlContent.add(txtMessages, BorderLayout.CENTER);
    txtMessages.setEditable(false);
    frame.setSize(500, 400);
    frame.setLocation(100, 100);
    frame.setTitle("Console");
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setVisible(true);        
    txtMessages.append("Listening!\n*************************\n");

    ServerSocket serverSocket = null;
    try{
            serverSocket = new ServerSocket(SERVERA_PORTS);
    } catch (IOException ex){

            return;
    }

    while(true){
        Socket socket = null;
        try{
            socket = serverSocket.accept();
            System.out.println("Client: "+socket.getRemoteSocketAddress()+" connected");                        
            InputStreamReader IntputaReaders = new InputStreamReader(socket.getInputStream());
            BufferedReader BuferaReaders = new BufferedReader(IntputaReaders);

            DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
            Date date = new Date();                             
            String msg = BuferaReaders.readLine();
            System.out.println(dateFormat.format(date)+": "+msg);   

            //Sends back to clint
            PrintStream PrintStrims = new PrintStream(socket.getOutputStream());
            if(!"".equals(msg)) {
                PrintStrims.println(dateFormat.format(date)+": "+msg);
            }   

            //Puts in GUI
            txtMessages.append(socket.getRemoteSocketAddress()+": "+msg+"\n");

        } catch (IOException ex){
        } finally {
                try{
                        socket.close();
                } catch (Exception ex){}
        }
    }
}

} 
```

**客户**

```
public class Client extends JFrame implements ActionListener {

private static JButton btnSend;
private static JButton btnConnect;
private static JTextArea txtMessages;
private static JTextField txtCurrentMessage;
private static JTextField txtServerPort;
private static JTextField txtServerName;

String hosts = "";
int ports;
Socket clientSocket = null;
BufferedReader in = null;

public static void main(String[] args) throws Exception {

}    

private void listen() {
    try {
        in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        String msgIn;
        while ((msgIn = in.readLine()) != null) {
            System.out.println(msgIn);
            txtMessages.append(msgIn+"\n");
        }        
    }catch (IOException ez) {

    }
}

public void connect(){        
      hosts = txtServerName.getText();        
      String strPort = txtServerPort.getText();
      ports = Integer.valueOf(strPort);                

    try{   
      //Ja pieslēdzas
      clientSocket = new Socket(hosts, ports);
      btnSend.setEnabled(true);
      txtMessages.append("U R connected!\n**************\n");
      btnConnect.setEnabled(false); 
      txtCurrentMessage.setEnabled(true);  

    } catch (IOException ex){
        txtMessages.append("Cannot connect.. \n");
    }    
}

public void send(){
    try{
        PrintStream PrintStrims = new PrintStream(clientSocket.getOutputStream());      
        String message = txtCurrentMessage.getText();
        PrintStrims.println(message);
        System.out.println(message); 

    } catch (IOException ex){
    }       
}

public void runForm() {
    JFrame frame = new JFrame();
    txtServerName = new JTextField();
    txtServerName.setPreferredSize(new Dimension(150, 21));
    txtServerPort = new JTextField();
    txtServerPort.setPreferredSize(new Dimension(50, 21));
    txtMessages = new JTextArea();
    txtCurrentMessage = new JTextField();
    txtCurrentMessage.setPreferredSize(new Dimension(350,21));
    btnConnect = new JButton("Connect");
    btnConnect.addActionListener(this);
    btnSend = new JButton("Send");
    btnSend.addActionListener(this);
    JPanel pnlTop = new JPanel(new FlowLayout());
    JPanel pnlBottom = new JPanel(new FlowLayout());
    pnlTop.add(txtServerName);
    pnlTop.add(txtServerPort);
    pnlTop.add(btnConnect);
    pnlBottom.add(txtCurrentMessage);
    pnlBottom.add(btnSend);
    JPanel pnlContent = (JPanel) frame.getContentPane();
    pnlContent.setLayout(new BorderLayout());
    pnlContent.add(pnlTop, BorderLayout.NORTH);
    pnlContent.add(txtMessages, BorderLayout.CENTER);
    pnlContent.add(pnlBottom, BorderLayout.SOUTH);
    frame.setLayout(new BorderLayout());
    frame.add(pnlTop, BorderLayout.NORTH);
    frame.add(txtMessages, BorderLayout.CENTER);
    frame.add(pnlBottom, BorderLayout.SOUTH);
    frame.setSize(500, 400);
    frame.setLocation(100, 100);
    frame.setTitle("Ne pārāk labs čats");
    frame.setResizable(false);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    txtServerName.setText("127.0.0.1");
    txtServerPort.setText("5432");      
    btnSend.setEnabled(false);
    txtCurrentMessage.setEnabled(false);
    txtMessages.setEditable(false);
    frame.setVisible(true);
}

@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == btnSend) {  
        if(!"".equals(txtCurrentMessage.getText()))
        {
            send();          
            txtCurrentMessage.setText("");
        }
    }

    if (e.getSource() == btnConnect) {               
            connect();
            listen();

    }        
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:46:37.147

了解您的服务器在连接后是否从客户端获取任何内容会很有帮助。这样我们就可以确定服务器是否没有收到要发回的消息，或者客户端是否没有收到返回消息。

这个 oracle 教程可能对您有所帮助，因为它看起来像使用 gui，并且很好地解释了客户端和服务器如何使用代码。 [http://www.oracle.com/technetwork/java/socket-140484.html](http://www.oracle.com/technetwork/java/socket-140484.html)

相反，其中的逻辑可能有问题

```
if(!"".equals(msg)) {
     PrintStrims.println(dateFormat.format(date)+": "+msg);
} 
```

您可能想确保您实际上可以进入该声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:21:05.530

对于聊天服务器和客户端，我建议使用`OpenFire`服务器和`Smack`API。[例如，这](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/gettingstarted.html)是一个很好的参考`Smack`。[下载](http://www.igniterealtime.org/projects/openfire/) `OpenFire`服务器。

# regex - 对非共享成员的引用需要对象引用

> ID：13522712
> 
> 赞同：0
> 
> 时间：2012-11-23T03:26:37.510
> 
> 标签：regex, visual-studio, vb.net-2010

我正在尝试从列表框中删除一些文本，但我不断收到此错误。

```
Error   1   Reference to a non-shared member requires an object reference. 
```

这是导致错误的代码。

```
ListBox1.Items.Add(Match.ToString.Replace("color: 0863BB;", "").Replace("</span>", "").Replace(">", "").Replace("""", "")) 
```

这是我下面的完整代码。我不知道我做错了什么，请帮忙。

```
Imports System.Text.RegularExpressions 
```

公开课形式1

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Dim Regex As New Regex("color: 0863BB;" & Chr(34) & ">(.*?)</span></span>")
    Dim Matches As MatchCollection = Regex.Matches(RichTextBox1.Text)

    For Each Match As Match In Matches

        ListBox1.Items.Add(Match.ToString)

    Next

End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    'RichTextBox1.Text = WebBrowser1.DocumentText

End Sub

Private Sub RichTextBox1_TextChanged(sender As System.Object, e As System.EventArgs) Handles RichTextBox1.TextChanged
    ListBox1.Items.Add(Match.ToString.Replace("color: 0863BB;", "").Replace("</span>", "").Replace(">", "").Replace("""", ""))
End Sub

Private Sub Button3_Click(sender As System.Object, e As System.EventArgs) Handles Button3.Click
    If ListBox1.Items.Contains("<span>") Then

    End If
End Sub

Private Sub ListBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    '  (Match.ToString.Replace("color: 0863BB;", "").Replace("</span>", "").Replace(">", "").Replace("""", ""))
End Sub 
```

结束类

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:53:25.410

编译器抱怨`Match.ToString`. `ToString`是一个实例方法，但是`Match`是一个类型。

# python - Python - 调用直到我得到一个返回值？

> ID：13522713
> 
> 赞同：1
> 
> 时间：2012-11-23T03:26:50.913
> 
> 标签：python

我正在调用一个函数来获取用户在简单 gui 中选择的文件。我正在尝试确定在用户选择文件之前继续提示用户的正确方法。现在我的电话是：

```
 file_path = None 
    while file_path is None:
        file_path = input_text_file()   # calls function to prompt user 
```

有没有更好的方法来做到这一点，而无需最初将 file_path 设置为 None？有没有办法循环直到返回一个值，或者类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:32:20.613

你可以试试：

```
while True :
    file_path = input_text_file()
    if file_path : break 
```

但是，我不确定这看起来是否比原版好很多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:43:00.890

如果这是要求用户选择文件的某些表单或向导的一部分，那么您可以在用户单击继续或下一步按钮时简单地检查 file_path 的值，如果他们没有选择文件，则以某种方式通知他们他们需要这样做。这不会消除设置 file_path = None 的需要，但会消除 while 循环。如果您的设置只是循环直到选择一个文件，您的方式或 lenik 就可以正常工作。除非您根据所选文件对 GUI 的一部分进行某种动态更新，否则可能不需要循环，但我没有足够的信息来做出这个假设。

# sql - 没有班次安排的拆分班次

> ID：13522715
> 
> 赞同：1
> 
> 时间：2012-11-23T03:26:58.193
> 
> 标签：sql, vb.net, sql-server-2008, time-and-attendance

我有一个表格，以下列格式捕获最小/最大时间。

```
1      2012-10-30 12:13:07.000        2012-10-30 15:18:50.000   
2      2012-10-30 16:13:07.000        2012-10-30 21:18:50.000 
```

我想知道是否可以`datetime`为同一用户捕获 2 组不同的集合，如下表所示。这样做的原因是因为，数据用于管理可以随时进出多班次的承包商的出勤率。即，UID 1 可以在 12:00 打卡并在 15:00 下班，稍后返回并在 18:00 再次打卡并在 21:00 下班，并且它们不适用于时间表或班次安排。

```
uid    clock                          clock                    Status  
1      2012-10-30 12:00:00.000        2012-10-30 15:00:00.000   regular
1      2012-10-30 18:00:00.000        2012-10-30 21:00:00.000   Split
2      2012-10-30 16:13:07.000        2012-10-30 21:18:50.000   regular 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T19:33:06.857

在不太了解您的应用程序细节的情况下，我会说您构建数据的最佳方式是让您的表中的每条记录对应于每个员工的单个“Punch In / Punch Out”。从那里开始，计算每个员工在给定时间段内的工作时间将非常简单。我没记错，这听起来很像您在第二个示例中描述要布置的数据的方式（减去`Status`列）。

在最简单的示例中，您的表将具有以下列：

```
UID (INT or uniqueidentifier)
ClockIn (datetime)
ClockOut (datetime) 
```

当员工打卡时，您将在该员工的表中插入一行并将时钟放在该`ClockIn`列下。

```
UID     ClockIn                    ClockOut
-------------------------------------------
1       2012-10-30 12:00:00.000    NULL 
```

当每个员工打卡时，他们每个人都会被安排一排

```
UID     ClockIn                    ClockOut
-------------------------------------------
1       2012-10-30 12:00:00.000    NULL
2       2012-10-30 1:00:00.000     NULL
3       2012-10-30 2:00:00.000     NULL 
```

当员工下班时，您的应用程序应通过将列设置为下班时间来检索该员工的现有记录和`UPDATE`行`ClockOut`。

```
UID     ClockIn                    ClockOut
-------------------------------------------
1       2012-10-30 12:00:00.000    NULL
2       2012-10-30 1:00:00.000     2012-10-30 3:30:00.000
3       2012-10-30 2:00:00.000     NULL 
```

如果员工打卡然后稍后返回，他们将获得新记录，就像他们当天早些时候打卡一样。

```
UID     ClockIn                    ClockOut
-------------------------------------------
1       2012-10-30 12:00:00.000    NULL
2       2012-10-30 1:00:00.000     2012-10-30 3:30:00.000
3       2012-10-30 2:00:00.000     NULL
2       2012-10-30 4:30:00.000     NULL 
```

希望此时您应该能够看到这个相当简单的数据模型如何足够灵活以支持您的大多数标准计时功能。

*   `ClockOut`您可以通过查找为NULL的行来确定谁打卡
*   当员工忘记打卡时，您可以有某种处理流程
*   为迟到或迟到的员工编辑打卡。
*   您可以通过对每个员工的每一行进行 a 和 ，并对结果求和来确定每个员工的`DATEDIFF`总`ClockOut`工作`ClockIn`时间

在此示例中，验证数据的大部分责任将在您的应用程序中进行。您不希望某人被打卡多次，或者如果他们还没有真正打卡，就尝试打卡。

# android - 根据当前位置过滤信息

> ID：13522716
> 
> 赞同：1
> 
> 时间：2012-11-23T03:27:08.087
> 
> 标签：android, google-maps

例如，我有一堆存储在数据库 (sql) 中的地理点，我想通过精确定位在地图上向用户显示它们，但我只想向用户显示当前用户位置附近的地理点，避免超载移动设备和用户注意力。

我一直在寻找，但我找不到任何具体的方法来做到这一点。感谢您迄今为止的关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:10:17.463

首先，参考[这个](https://stackoverflow.com/questions/12086570/get-distance-from-two-location)链接。它具有计算两个 GPS 位置之间距离的解决方案。

现在按照以下步骤操作：

第 1 步：使用 GPS 获取当前位置

第 2 步：您可以从数据库中检索您的位置数据。

第 3 步：计算所有位置与当前位置之间的距离。

第 4 步：为条件提供一些最大距离。（即入围位置，如果它 < 1 公里或其他东西。）

第 5 步：在 Google 地图中显示这些入围位置。（[参考链接](http://onthefencedevelopment.com/blog/using-google-maps-your-android-applications-part-2-showing-current-location)）

希望能帮助到你。

# google-tv - Google TV - 我可以在没有挑战的情况下进行配对吗？

> ID：13522719
> 
> 赞同：1
> 
> 时间：2012-11-23T03:27:42.597
> 
> 标签：google-tv

我一直在我的 GTV 盒子上使用新的 YouTube 功能，并且非常嫉妒它能够毫无挑战地将我的手机与盒子配对。显然，这是两个 YouTube 应用程序的一部分，但我想知道是否有计划允许开发人员的第二屏幕应用程序进行相同类型的无挑战配对。

如果没有，我想知道是否有办法让用户在后续会话中将手机的应用程序与 GTV 设备重新配对（例如，有时我会成功登录，但我的应用程序会断开连接）不得不经历挑战的烦恼。我确实在另一个线程中找到了这个答案：

> 它可以记住设备 IP，但您必须单击 IP 地址并重新建立配对会话。基本上一旦连接丢失，它需要重新验证自己（即配对）以建立新连接。– Megha Joshi - GoogleTV DevRel 6 月 21 日 20:45

那么在这种情况下，我是否必须为 Google TV 编写一个能够记住设备 IP 的应用才能完成此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:31:37.653

对于官方 Google TV Remote 应用和 Able Remote 应用，一旦您与设备成功配对，后续连接将不需要显式配对步骤。这两个应用程序还会记住最后连接的设备，因此重新启动应用程序应该会使它们自动连接。

如果您是开发人员并使用 Google 开源的 Anymote 库 (https://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary)，那么该库需要配对每个连接都要完成一步。

我开源的 Anymote-for-Java 库（https://code.google.com/p/googletv-android-samples/source/browse/#git%2FAnymoteLibrary）会记住配对信息，只需要配对每个设备执行一次的步骤。

YouTube 应用程序使用的新协议尚未提供给第三方应用程序开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T12:16:40.743

Sebastian Kaspari 编写了一个名为[Android-Network-Intents](https://github.com/pocmo/Android-Network-Intents)的不错的库。

它向您展示了如何通过多播 (UDP) 将 Android Intent 对象发送到侦听应用程序/设备。

# jquery - jQuery fadeTo() 在 IE 9 中使用阴影过滤器创建黑框

> ID：13522721
> 
> 赞同：2
> 
> 时间：2012-11-23T03:27:50.953
> 
> 标签：jquery, css, internet-explorer

我正在尝试在基于[Accordion Image Menu](http://web-argument.com/2011/03/07/jquery-accordion-image-menu-plugin/)的 jquery 图像滑块/手风琴上模拟黑色轮廓到白色文本 。在 IE 9 出现之前，这非常有效。我正在使用 Jquery fadeTo() 来处理不透明度。最初我使用的是 animate() 但我遇到了同样的麻烦。每当文本淡入或淡出时，我都会在 span 元素所在的位置出现一个黑框。当fadeTo() 开始时，黑框似乎很快出现，然后以闪光类型的效果消失，然后在fadeTo() 结束时再次消失。IE 7 或 8 不会发生这种情况。在那里看起来很棒。

**在仅 IE 样式表中，我有**

```
#acc-menu1 a span.left-arrow{
 position: absolute;
 left: -5px;
 bottom: 0;
 color: #FFF;
 font-size: 3em;
 margin-right: 25px;
}

#acc-menu1 a span{
 font-family: "Helvetica",sans-serif;
 bottom:0;
 left:20px;
 width:100%;
 display:block;
 padding:2px 5px 5px;
 position:absolute;
 font-size:1.8em;
 font-weight: bold;
 height:25px;
 line-height:18px;
 color: #FFF;
 /*filter: progid:DXImageTransform.Microsoft.DropShadow(offX=1,offY=1,color=000000);*/
 filter: progid:DXImageTransform.Microsoft.Shadow(direction=225,strength=2,color=black);
} 
```

**HTML看起来像这样......**

```
 <div id="acc-menu1">
      <a href="#"><span>Link Name</span><img title="title" src="image source" alt="" width="w" height="h" /><span class="left-arrow">&laquo;</span></a>
      ... 3 more anchor tags ...
 </div> 
```

*链接名称*是根据打开的图像淡入和淡出的。

**这是相关的js**

```
 var title = $('span',this);
 var arrow = $('.left-arrow',this);

 if (_this.menuSettings.fadeInTitle != null && title.length > 0) {
                    if (itemDim == _this.menuSettings.openDim) {
                        if (_this.menuSettings.fadeInTitle){
                            title.fadeTo('slow', 1);
                            arrow.fadeTo('fast', 0);

                        }else {
                            title.fadeTo('slow', 0);
                            arrow.fadeTo('fast', 1);

                        }
                    } else {
                        if (_this.menuSettings.fadeInTitle){
                            title.fadeTo('slow', 0);
                            arrow.fadeTo('fast', 1);

                        }else {
                            title.fadeTo('slow', 1);
                            arrow.fadeTo('fast', 0);

                        }
                    }
                } 
```

我在这里尽我所能来适应 IE，但它变得令人沮丧。任何建议将不胜感激。

谢谢，

标记

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:41:20.163

由于这看起来与您的`filter`规则有冲突，因此我建议您在淡入淡出动画期间尝试中性化该规则。这可能会解决问题，但我无法对其进行测试，所以很遗憾我无法提供任何保证。

您可以首先`filter`在其自己的类选择器中隔离规则：

```
#acc-menu1 a span {
    font-family: "Helvetica", sans-serif;
    /* [...] */
    color: #FFF;
}

#acc-menu1 a span.shadow {
    filter: progid:DXImageTransform.Microsoft.Shadow(direction=225,strength=2,color=black);
} 
```

然后，您在褪色之前删除`shadow`该类，然后再将其恢复。为避免重复大量代码，您可以编写自己的`fadeTo()`方法：

```
$.fn.shadowFadeTo = function(duration, opacity, easing, callback) {
    // 'easing' and 'callback' are optional, 'callback' takes precedence.
    if (typeof callback === "undefined") {
        callback = easing;
        easing = "swing";
    }

    return this.removeClass("shadow").fadeTo(duration, opacity, easing, function() {
        $(this).addClass("shadow");
        if ($.isFunction(callback)) {
            callback.apply(this);
        }
    });
}; 
```

从那里，你只需要写：

```
if (_this.menuSettings.fadeInTitle){
    title.shadowFadeTo("slow", 1);
    arrow.fadeTo("fast", 0);
} else {
    title.shadowFadeTo("slow", 0);
    arrow.fadeTo("fast", 1);
} 
```

# javascript - 试图让函数与 window.onload 循环但不工作

> ID：13522728
> 
> 赞同：3
> 
> 时间：2012-11-23T03:28:55.187
> 
> 标签：javascript, jquery, css, animation, loops

我在这里有这个 JavaScript/jQuery 动画函数，我希望它为每次`3000`using循环`window.onload = function(){}`，但由于某种原因它不起作用。我认为它*可能*是语法/基础错误，因为我是 javascript 新手，但如果我应该使用不同的方法，请告诉我。这是我的代码：

```
function animTile(){
    $(".main-content").delay(3000).animate({
        top: "100%"
    });

    $(".secondary-content").delay(3000).animate({
        top: "0"
    });
}

window.onload = function(){
    animTile(); setInterval(animTile, 3000);
} 
```

# 编辑：

也许这也有帮助。这是我的 CSS 代码：

```
 #wrap {
        display: block;
        height: 328px;
        width: 568px;
        overflow: hidden;
    }

    #wrap .main-content {
        display: block;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 0%;
    }

    #wrap .secondary-content {
        display: block;
        height: 100%;
        width: 100%;
        position: absolute;
        top: 100%;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:32:14.343

尝试这样的事情：

```
 function animTile(){
$(".main-content").delay(3000).animate({
    top: "100%"
});

$(".secondary-content").delay(3000).animate({
    top: "0"
});
 animTileTwo();
}

function animTileTwo(){
$(".main-content").delay(3000).animate({
    top: "0"
});

$(".secondary-content").delay(3000).animate({
    top: "100%"
});
}

  window.onload=function(){
     setInterval("animTile()", 3000);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:34:51.450

试试这个：

```
function animTile(){
$(".main-content").animate({
    top: "100%"
}, 1000);

$(".secondary-content").animate({
    top: "0"
}, 1000);
setTimeout('animTile()', 3000);
}

window.onload = function(){
animTile();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:51:57.763

为什么你使用'延迟'功能？你想要什么？你说你想要一些循环动画，但在你的代码中，我只为每个元素找到了一个状态。我的意思是，如果你想要一个循环动画，你应该将一些属性设置为值 A，然后将其设置为值 B，然后再将其设置回值 A……这是一个循环。

所以，我猜你想将“top”属性设置为“100%”，3000 毫秒后，将其设置为 0，3000 毫秒后，将其设置为“100%”。是对的吗？

如果这是您想要的，请尝试以下代码：

```
 function toggle() {
        var elem = $('#id');
        if (elem.css('top') == '700px') {
            elem.animate({
                top: "0"
            });
        } else {
            elem.animate({
                top: "700px"
            });
        }
    }
    toggle();
    setInterval(toggle, 3000); 
```

# mongodb - MongoDB中的索引是如何管理的

> ID：13522729
> 
> 赞同：2
> 
> 时间：2012-11-23T03:29:56.827
> 
> 标签：mongodb, indexing

我有一个包含大约 1000 万条记录的集合。我`key1`为大约 50,000 条记录定义了一个字段。现在，如果我希望索引`key1`实际分配的空间量。我的意思是，该指数大约是 1000 万个单位或 50,000 个单位。

如果与键对应的值是不同类型的，mongo 如何管理索引。例如。假设我们`key2`有 1,000 条记录存储字符串，而其他 1,000 条记录存储数组。那么如果在`key2`.

我的第一个问题是我希望得到解决的真正问题。第二个只是出于好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:26:53.760

我找到了我的问题的答案。Mongodb 支持`sparse indexes`仅考虑具有该键的记录以便在索引中。稀疏索引不会索引不存在该键的记录。因此，如果我们`sparse = true`在创建索引时进行设置，`key1`则分配的空间大约为 50,000 个单位。

# database - codeigniter项目中的多个数据库

> ID：13522732
> 
> 赞同：1
> 
> 时间：2012-11-23T03:30:31.570
> 
> 标签：database, codeigniter, codeigniter-2

我在codeigniter中开发了一个应用程序。我的申请中有一个类似论坛的部分。为此，我想为该控制器创建一个单独的数据库。

这样我就可以很容易地维护站点和数据库。我的问题可以在 codeigniter 中将数据库分配给单个控制器吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:23:20.103

您可以[将数据库连接传递给构造函数](http://codeigniter.com/user_guide/database/connecting.html)：

```
$config['hostname'] = "localhost";
$config['username'] = "myusername";
$config['password'] = "mypassword";
$config['database'] = "mydatabase";
$config['dbdriver'] = "mysql";
$config['dbprefix'] = "";
$config['pconnect'] = FALSE;
$config['db_debug'] = TRUE;
$config['cache_on'] = FALSE;
$config['cachedir'] = "";
$config['char_set'] = "utf8";
$config['dbcollat'] = "utf8_general_ci";

$this->load->database($config); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:40:41.803

正如 manix 的回答中提到的，您可以将设置传递给数据库库构造函数。

然而遗漏的是您必须指定`true`为第二个参数并在变量中捕获输出。

```
$DB1 = $this->load->database('group_one', TRUE);
$DB2 = $this->load->database('group_two', TRUE); 
```

不这样做意味着您一次只能使用一个数据库，因为它会替换数据库连接而不是打开一个新数据库！

请注意，我们正在传递字符串`group_one`，`group_two`这些是数据库设置组（在您的配置文件中，您通常只有该`default`组）。

您可以用一组配置选项替换组名，但最好使用组！

然后，您可以将查询运行为

```
//query against first database
$DB1->select(...

//query against second database
$DB2->select(... 
```

您可以使用`$DB2->close();`或关闭其中一个连接`$DB1->close();`

更多信息可以在用户指南中[找到](http://codeigniter.com/user_guide/database/connecting.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T20:10:09.613

```
copy and paste at database.php

//Another database connection.
$db['database2']['hostname'] = 'localhost';
$db['database2']['username'] = 'root';
$db['database2']['password'] = '';
$db['database2']['database'] = 'dbname2';
$db['database2']['dbdriver'] = 'mysql';
$db['database2']['dbprefix'] = '';
$db['database2']['pconnect'] = FALSE;
$db['database2']['db_debug'] = TRUE;
$db['database2']['cache_on'] = FALSE;
$db['database2']['cachedir'] = '';
$db['database2']['char_set'] = 'utf8';
$db['database2']['dbcollat'] = 'utf8_general_ci';
$db['database2']['swap_pre'] = '';
$db['database2']['autoinit'] = TRUE;
$db['database2']['stricton'] = FALSE;

//how to use the second database which is configured
$CI= &get_instance();
//set the second parameter to TRUE.
$this->db2 = $CI->load->database('database2', TRUE);
$qry= $this->db2->query("SELECT * FROM db2tables");
var_dump($qry->result());
```

有关更多详细信息，请参阅以下链接 [http://quandaflow.com/two-databases-connections-codeigniter/](http://quandaflow.com/two-databases-connections-codeigniter/)

# ios - 如何将动作目标添加到以 UIAnimationTransitionFlipFromLeft 样式动画出来的按钮？

> ID：13522734
> 
> 赞同：1
> 
> 时间：2012-11-23T03:31:28.090
> 
> 标签：ios, animation, uitableview, uibutton, action

我有一个按钮，它从 uitableViewCell 上的（隐藏->未隐藏）动画出来。

在tableViewCell中，在同一矩形位置有一个imageview和一个按钮，当用户从tableview中选择一个tableviewcell时，imageView动画隐藏，按钮动画显示。两个视图（imageView＆button）从xib文件加载. 我已经向按钮添加了一个动作并将其与 IBAction 方法链接。

我的问题：当用户触摸按钮时，操作方法没有被调用，为什么？

```
[UIView beginAnimations:cell.id context:nil];
[UIView setAnimationDuration:1.0f];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(focusCellFinished:finished:context:)];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:cell.containerView cache:YES];
cell.imagePhoto.hidden = true;
cell.playButton.hidden = false;
[UIView commitAnimations]; 
```

当用户选择一个按钮时， tableView:didSelectRowAtIndexPath: 将被调用，我不需要那个，我只想调用按钮方法。

顺便说一句，我知道并尝试如果只是添加一个正常的按钮而没有动画消失，它可以添加一个目标动作并成功调用。

任何答案和意见将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:21:38.987

试试这样

```
[UIView beginAnimations:cell.id context:nil];
[UIView setAnimationDuration:1.0f];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(focusCellFinished:finished:context:)];
[UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:cell.containerView cache:YES];
cell.imagePhoto.transform =CGAffineTransformMakeTranslation (-100,30);
cell.playButton.transform =CGAffineTransformMakeTranslation (100,30);
[UIView commitAnimations]; 
```

这里`CGAffineTransformMakeTranslation (x,y);`根据你的框架位置改变值

# c# - XPath - 如何选择只有 1 个类的节点？

> ID：13522736
> 
> 赞同：1
> 
> 时间：2012-11-23T03:31:40.790
> 
> 标签：c#, .net, xml, xpath, html-agility-pack

对于 c# 上的 xpath，如何按类选择一个节点，其中该节点只有 1 个类？

例如，如果我有这个：

```
<span class="red blue"></span>
<span class="red"></span> 
```

给定“red”的 xpath 表达式将只返回第二个节点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:04:16.233

如果您想选择所有`span`具有 @class 的元素，`red`并且您确定该字符串`red`不会出现`@class`在 XPATH 1.0 中的其他地方，请使用 this：

```
//span[contains(@class,'red')] 
```

如果红色可能出现在不同的类中（比如 say `centered`），你需要变得更复杂

```
//span[contains(concat(' ', normalize-space(@class), ' '), ' red ')] 
```

如果您可以使用 XPATH 2.0，您可以像这样考虑这两种情况：

```
//span[tokenize(@class,'\s+')[. eq 'red']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:08:24.227

只需使用这个 XPath：

```
//span[normalize-space(@class) = 'red'] 
```

# javascript - 这个 JavaScript 三元运算符是如何工作的

> ID：13522739
> 
> 赞同：2
> 
> 时间：2012-11-23T03:32:11.650
> 
> 标签：javascript, conditional, ternary-operator

祝大家感恩节快乐：

我已经在这个问题上绞尽脑汁半小时了，但还是不太明白条件句的作用所在。我想我已经把它记下来了，但只是想由专业人士来运行它。

```
(i%3)?(i%5)?i:'Buzz':(i%5)?'Fizz':'FizzBuzz' 
```

它分解为以下几点：

```
 if ((i%3) == false) {
        if ((i%5) == false) {
            console.log("FizzBuzz");
        } else {
            console.log('Fizz');
        }
    } else {
        if ((i%5) == false) {
            console.log("Buzz");
        } else {
            console.log(i);
        }
    } 
```

而且我假设三元运算符按以下方式分组（我习惯于在典型**结果中看到三元运算符？a : b**时尚，所以额外的结果和条件让我失望）

```
(i%3)?
    //if the condition is not a multiple of 3
    //check if it is a multiple of 5
    //if it isn't, log the number
    //otherwise log "Buzz" 
    (i%5)?i:'Buzz'
    //if the condition is a multiple of 3
    //check if it is a multiple of 5
    :(i%5)?
        //if it is log "Fizz", 
        //otherwise i is a multiple of 3 & 5 -
        //log "FizzBuzz"
        'Fizz':'FizzBuzz 
```

我非常感谢任何量化的帖子和/或澄清。再次感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:44:43.153

三元运算符具有[从右到左的结合性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Operator_Precedence#Table)，这意味着表达式与

```
(i%3) ? ((i%5) ? i : 'Buzz') : ((i%5) ? 'Fizz' : 'FizzBuzz') 
```

或者它以下列方式分解

```
1st ? ( 2nd ) : ( 2nd ) 
```

`2nd`这两个部分也是三元的这一事实对第一个的过程没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:46:23.110

在 C 的传统中，三元运算符并不是真正的`var ? var : var`. 实际上是：

```
statement ? statement : statement 
```

这意味着，代替变量或值，您可以将代码放在那里进行评估，并将该代码的返回值作为值。所以，

```
(i%3)?(i%5)?i:'Buzz':(i%5)?'Fizz':'FizzBuzz' 
```

分解为：

```
(i%3) ?
         (i%5) ?
                  i
               :
                  'Buzz'
      :
         (i%5) ?
                  'Fizz'
               :
                  'FizzBuzz' 
```

*（基本上你在问题中写的，所以你的解释是正确的）*

它有助于将它们`:`放在单独的行中，以便您可以看到模式。我还将 与 对齐`?`以`:`查看哪个与哪个分组。

# python - 从嵌套列表创建整数列表？

> ID：13522741
> 
> 赞同：0
> 
> 时间：2012-11-23T03:32:15.660
> 
> 标签：python, nested-lists

我有一个嵌套列表，例如这个：

```
 test = [[15, [7, [None], [11, [None], [13, [None], [None]]]], [None]], [20, [None], [None]]] 
```

我想从中创建另一个列表，其中仅包含嵌套中的整数。这将返回：

```
[15, 7, 11, 13, 20] 
```

我已经制作了这个递归函数来完成我需要完成的事情，但是，我不禁认为这不是最好的方法。有没有更pythonic或更有效的方法来做到这一点？

```
def nest_search(nest, hold=[]):
    for item in nest:
        if isinstance(item, int):
            hold.append(item)
        if isinstance(item, list):
            nest_search(item, hold)
    return hold

>>> print nest_search(test)
[15, 7, 11, 13, 20] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:54:45.390

我看到的唯一不符合pythonic的是默认参数。请参阅[此问题](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)，了解为什么这不会按您的预期方式工作。

这是我要解决的方法：

```
def nest_search(nest, hold=None):
    if hold is None:
        hold = []
    for item in nest:
        if isinstance(item, int):
            hold.append(item)
        if isinstance(item, list):
            nest_search(item, hold)
    return hold 
```

另一种实现方式是使函数成为一个生成器，它一个一个地产生值，而不是将它们添加到它最后返回的列表中。（如果您确实需要一个列表，只需将生成器调用包装在`list`构造函数中）。

```
def nest_search_gen(nest):
    for item in nest:
        if isinstance(item, int):
            yield item
        if isinstance(item, list):
            yield from nest_search_gen(item) 
```

这使用了`yield from`Python 3.3 中引入的新语法。如果您使用的是早期版本，则可以通过将最后一行替换为：

```
for i in nest_search_gen(item):
    yield i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:58:14.290

使用[此处](https://stackoverflow.com/questions/5409224/python-recursively-flatten-a-list)`flatten`发布的解决方案，您可以尝试以下方法。

```
>>> def flatten(x):
    try:
      it = iter(x)
    except TypeError:
      yield x
    else:
      for i in it:
        for j in flatten(i):
          yield j
>>> filter(bool, flatten(test))
[15, 7, 11, 13, 20] 
```

我认为使用两个独立的功能`flatten`更`filter`清晰，并且您鼓励模块化，允许一个在没有另一个的情况下使用。

# c# - 使用 HttpPostedFile 编辑视图模型绑定

> ID：13522743
> 
> 赞同：2
> 
> 时间：2012-11-23T03:32:36.583
> 
> 标签：c#, asp.net-mvc-3, view, model, httppostedfile

我有一个视图模型：

```
 public HttpPostedFileBase File { get; set; }
    public string Notes { get; set; } 
```

在`Create`视图中，我有一个`<input type="file" name="file" />`将 绑定`HttpPostedFile`到模型。到目前为止，一切都很好。

当我尝试使用他们各自的视图开发“编辑”操作时，我的问题就开始了。我完全没有问题显示字符串属性的编辑器字段`Notes`，这部分很容易。

但是，如何`<input type="file" name="file" />`在视图中显示实际值`Edit`？如何将字节数组绑定到`File`ViewModel 的属性？这是正确的方法吗？还有其他更好的解决方案吗？我对此束手无策，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:42:20.157

**你不能。**An`<input type="file" />`不是用来编辑文件的，只是用来上传文件的。

如果您只想能够在编辑视图中删除文件，试试这个（只是一个例子）：

1.  将 bool 属性添加`DeleteFile`到编辑视图模型
2.  在编辑视图中将该属性添加为复选框
3.  在您的编辑方法中检查是否`DeleteFile`设置为 true，如果是，则查找并删除附加到您正在编辑的记录的文件

你可以重命名`File`为`UploadedFile`（所以它更清楚一点）。但这当然取决于你。

# iphone - 如何从 DetailView 中推送 UITableView？

> ID：13522744
> 
> 赞同：0
> 
> 时间：2012-11-23T03:32:43.870
> 
> 标签：iphone, objective-c, ios, uitableview, ios5

我正在构建一个使用 UICollectionView 来显示一系列博客文章的应用程序。

当用户点击帖子时，会推送一个 DetailView 以显示帖子的内容。

在详细视图中，可以看到帖子图片、文本等。还有一个按钮可以显示评论。

我希望用户能够点击`comments`按钮并加载一个 UITableView，它将显示为该帖子编写的所有评论。这是我无法实现的部分。

我用界面生成器创建了一个 UITableView 并使用 segue 将它连接到 DetailView 。点击按钮时`comments`，我得到一个空表。

在我的 DetailView 上点击评论按钮会触发：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"showComments"]) {

        NSDictionary *post           = self.detailItem;
        NSArray      *commentThread  = [post objectForKey:@"comment"];

        // how do I pass the commentThread to the UITableView at the other end of the segue?
    }
} 
```

任何想法如何完成这项工作？很高兴发布更多代码。

这是我的`CommentViewController.m`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"commentCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSDictionary *comment       = [self.commentArray objectAtIndex:indexPath.row];
    NSString     *commentText   = [comment objectForKey:@"comment_text"];
    NSString     *commentAuthor = [comment objectForKey:@"comment_author"];

    cell.textLabel.text = commentText;

    return cell;

    NSLog(@"%@", comment);
} 
```

和`CommentViewController.h`

```
#import <UIKit/UIKit.h>

@interface CommentViewController : UITableViewController {
    NSArray *commentArray;
}

@property (strong, nonatomic) id commentArray;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:44:24.400

你为你的 UITableView 创建了一个控制器吗？

如果这似乎是一个基本答案，我可能没有正确理解您的设计目标，很抱歉，但是如果您正在执行序列，那么您应该初始化 tableview 控制器并以某种方式设置您的数据源。

例如，在你准备 segue 时，你应该有这样的东西：

```
CommentsControllerView *myTableView = segue.destinationViewController;
myTableView.commentsArray = self.commentsArray;
myTableView.itemId = self.itemId; 
```

在您的自定义表格视图控制器中，您可以创建一个 NSArray 属性来保存评论数组并按照标准程序设置您的表格视图。或者您将使用一些逻辑来检索适当的注释并为您的新表格视图加载表格视图数据源。当它初始化时，它将包含您传递给它的数据，然后它应该像使用 tableview 委托和数据源方法的标准 tableview 一样运行。

这有帮助吗？希望如此。

# arrays - 迭代一个不可变数组并根据其他元素更新数组中的每个元素

> ID：13522746
> 
> 赞同：1
> 
> 时间：2012-11-23T03:32:58.233
> 
> 标签：arrays, scala, functional-programming, immutability

我有一个数组：（`Array[[List[Int]]](81)`这是一个 val ）

我想按行分解它，如果该*特定*行中的任何元素在列表中只有一个元素，比如`b.size`= 1，那么我想从该列表中的所有其他列表中删除“b”中的那个元素数组的特定行。

我不确定，考虑到我不使用可变变量的约束，如何只考虑前 9 个元素，然后是数组中的下 9 个元素。（所以只是 vals 而不是 vars ）。

到目前为止：我有一个接受列表和要从中删除的元素的函数。但是，如果我找到一个只有一个元素的列表，我该如何遍历上述数组中的每一行或数组中的每一列，然后返回行的开头，以更新列表中的其他元素，是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:38:58.850

假设你的意思是你有一个`Array[Array[List[Int]]]`，这听起来就像它会做你所追求的：

```
scala> def filterRow(arr:Array[List[Int]]):Array[List[Int]] = {
     |   val found:Option[Int] = arr.collectFirst{case List(x) => x};
     |   found.map(f =>
     |     arr.map(l =>
     |       if (l.size == 1) l else l.filterNot(_ == f)
     |     )
     |   ).getOrElse(arr)
     | }
filterRow: (arr: Array[List[Int]])Array[List[Int]]
scala> val a = Array(Array(List(1),List(1,2),List(1,2,3)),Array(List(2),List(1,2),List(1,2,3)))
a: Array[Array[List[Int]]] = Array(Array(List(1), List(1, 2), List(1, 2, 3)), Array(List(2), List(1, 2), List(1, 2, 3)))
scala> a.map(filterRow)
res0: Array[Array[List[Int]]] = Array(Array(List(1), List(2), List(2, 3)), Array(List(2), List(1), List(1, 3))) 
```

如果没有，希望它能给你足够的线索来解决它。否则，您可能需要进一步澄清您的问题。

# ruby - 无法成功安装 ruby game

> ID：13522747
> 
> 赞同：1
> 
> 时间：2012-11-23T03:33:06.843
> 
> 标签：ruby, macos, gem, rubygame

我的操作系统是 OSX 10.8.2。我已按照[ruby​​game wiki](https://github.com/rubygame/rubygame/wiki/Mac-Install-Guide)的说明进行操作，安装过程中一切正常。但是，当我在我的 ruby​​ 脚本中需要 ruby​​game 时，发生了一些事情：

```
 irb(main):001:0> require 'rubygame'
    ArgumentError: callbacks cannot have variadic parameters
from /Library/Ruby/Gems/1.8/gems/ffi-1.2.0/lib/ffi/library.rb:365:in `callback'
from /Library/Ruby/Gems/1.8/gems/ruby-sdl-ffi-0.4/lib/ruby-sdl-ffi/sdl/mac.rb:161
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Library/Ruby/Gems/1.8/gems/ruby-sdl-ffi-0.4/lib/ruby-sdl-ffi/sdl.rb:80
from /Library/Ruby/Gems/1.8/gems/ruby-sdl-ffi-0.4/lib/ruby-sdl-ffi/sdl.rb:67:in `each'
from /Library/Ruby/Gems/1.8/gems/ruby-sdl-ffi-0.4/lib/ruby-sdl-ffi/sdl.rb:67
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Library/Ruby/Gems/1.8/gems/rubygame-2.6.4/lib/rubygame/main.rb:22
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Library/Ruby/Gems/1.8/gems/rubygame-2.6.4/lib/rubygame.rb:44
from /Library/Ruby/Gems/1.8/gems/rubygame-2.6.4/lib/rubygame.rb:29:in `each'
from /Library/Ruby/Gems/1.8/gems/rubygame-2.6.4/lib/rubygame.rb:29
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:36:in `require' 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:13:59.323

[这](https://github.com/xrs1133/ruby-sdl-ffi/commit/0b721ac4659b4c08cda5aa2f418561a8a311e85b)为我修好了。但基本上 ruby​​-sdl-ffi 和 Rubygame 看起来没有维护。我建议不要使用它们，除非有人采用这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:45:50.190

在我看来，这一定是您给出的链接上的版本问题，他们只提到了 10.5 和 10.3。您必须检查更新日志是否有新更改，有时可能会发生

# java - 使用 Plugin 与 appView.addJavascriptInterface 不同

> ID：13522751
> 
> 赞同：4
> 
> 时间：2012-11-23T03:33:35.420
> 
> 标签：java, javascript, android, cordova-2.0.0

我想使用 phonegap cordova 在 android 中构建本机应用程序。我找到了两种使我的 html 文件可以与我的 java 文件通信的方法。我可以使用 appView.addjavascriptInterface 或将我的 java 文件作为插件。我现在想知道哪种方式最好。使用插件或 appView.addJavascriptInterface 有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:40:58.257

使用 Cordova 插件是向应用程序的 JavaScript 层公开 Java 代码的推荐方法。查看[插件开发指南](http://docs.phonegap.com/en/2.4.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)和[在 Android 上开发插件](http://docs.phonegap.com/en/2.4.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)。

`addJavascriptInterface`是 Android [WebView API](https://developer.android.com/reference/android/webkit/WebView.html)的一部分，在[Apache Cordova 的 Android 代码](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/CordovaWebView.java#L309)中使用。Android 2.3至少存在[一个错误](https://code.google.com/p/android/issues/detail?id=12987)，您可以通过使用 Apache Cordova 的插件系统[来避免这种方法。](https://github.com/apache/incubator-cordova-android/blob/master/framework/src/org/apache/cordova/CordovaWebView.java#L302)

> 使用插件或 appView.addJavascriptInterface 有什么区别？

不同之处在于 Cordova 插件是更高级别的抽象，它允许您始终如一地将来自各种平台（Android、iOS 等）的本机代码公开给运行 JavaScript 代码的 WebView。虽然这`addJavascriptInterface`是一个特定于 Android 的方法，它是使用 Apache Cordova 的 Android 代码的 WebView API 的一部分。

# jquery - 设置页面的可重复输入字段

> ID：13522752
> 
> 赞同：2
> 
> 时间：2012-11-23T02:22:53.827
> 
> 标签：jquery, forms

我正在尝试创建一个插件，我想在设置页面中使用可重复的输入字段。我在网上找到了许多关于可重复输入字段的示例代码，但仅适用于帖子/页面编辑屏幕。

我的代码在这里： http: [//pastebin.com/fiktsMrS](http://pastebin.com/fiktsMrS)

如您所见，我正在使用“静态”输入字段

```
<!-- Textbox Control -->
<tr><th scope="row">Track 1</th><td><input type="text" size="200" name="fr_options[txt_1]" value="<?php echo $options['txt_1']; ?>" /></td></tr>
<tr><th scope="row">Track 2</th><td><input type="text" size="200" name="fr_options[txt_2]" value="<?php echo $options['txt_2']; ?>" /></td></tr>
<tr><th scope="row">Track 3</th><td><input type="text" size="200" name="fr_options[txt_3]" value="<?php echo $options['txt_3']; ?>" /></td></tr>
<tr><th scope="row">Track 4</th><td><input type="text" size="200" name="fr_options[txt_4]" value="<?php echo $options['txt_4']; ?>" /></td></tr>
<tr><th scope="row">Track 5</th><td><input type="text" size="200" name="fr_options[txt_5]" value="<?php echo $options['txt_5']; ?>" /></td></tr> 
```

虽然我想要做的只是有一个输入字段，并在它旁边有一个 +ADD 按钮，这将创建另一个，当我单击保存更改时，它会保存所有输入的所有值。

可以在[这里](http://en.bainternet.info/2012/my-options-panel)找到类似的东西，但是当我只想要一个可重复的输入字段时，它似乎太复杂了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:08:15.510

## PHP的

```
$output = '<div class="repeatable-wrap">' .
    '<ul id="tracks-repeatable" class="repeatable-fields-list">';
if ( ! empty( $options ) ) {
    $i = 1;
    foreach( $options as $option ) {
        $output .= '<li>' .
            '<input type="text" name="fr_options[txt_'.$i.']"' .
                'value="' . $options['txt_'.$i] .'" size="200" />' .
            '<a class="repeatable-field-remove button" href="#">REMOVE</a>' .
            '</li>';
        $i++;
    }
} else {
    $output .= '<li>' .
        '<input type="text" name="fr_options[txt_1]" value="" size="200" />' .
        '<a class="repeatable-field-remove button" href="#">REMOVE</a>' .
        '</li>';
}
$output .= '</ul></div>' .
    '<a class="repeatable-field-add button" href="#">ADD</a>';
echo $output; 
```

如果您的`$options`数组包含的不仅仅是字段，您将不得不以不同的方式处理上述循环。其余的仍然适用。

## jQuery

```
jQuery('.repeatable-field-add').click(function() {
    var theField = jQuery(this).closest('div.repeatable-wrap')
        .find('.repeatable-fields-list li:last').clone(true);
    var theLocation = jQuery(this).closest('div.repeatable-wrap')
        .find('.repeatable-fields-list li:last');
    /* the 2 linebreaks before the .find methods
        are for presentation reasons here only */
    jQuery('input', theField).val('').attr('name', function(index, name) {
        return name.replace(/(\d+)/, function(fullMatch, n) {
            return Number(n) + 1;
        });
    });
    theField.insertAfter(theLocation, jQuery(this).closest('div.repeatable-wrap'));
    var fieldsCount = jQuery('.repeatable-field-remove').length;
    if( fieldsCount > 1 ) {
        jQuery('.repeatable-field-remove').css('display','inline');
    }
    return false;
});

jQuery('.repeatable-field-remove').click(function(){
    jQuery(this).parent().remove();
    var fieldsCount = jQuery('.repeatable-field-remove').length;
    if( fieldsCount == 1 ) {
        jQuery('.repeatable-field-remove').css('display','none');
    }
    return false;
}); 
```

# java - 如何将参数传递给/覆盖 ActionPerformed()

> ID：13522755
> 
> 赞同：-1
> 
> 时间：2012-11-23T03:34:13.257
> 
> 标签：java, swing, jbutton, actionlistener, joptionpane

所以这是我下面的代码。我在具有三个菜单的面板中创建了一个菜单栏，第一个是“添加信息”。在添加信息中，我添加了三个菜单项：员工、商品和客户。单击适当的菜单项后，表单应出现在包含菜单栏的原始面板下方的另一个面板中。此表单应输入员工、商品或客户，具体取决于单击的菜单项。填写表格后，有一个提交按钮（在表格内）点击它应该创建一个新的窗口/弹出/对话框，它应该打印在表格中输入的详细信息。我的问题从第 1 行开始。216到线号。225\. 当我点击 Customer menuitem 的按钮“submit3”时，弹出窗口出现但不显示包含“txt1”内容的字符串的内容。如何将组件的值传递给 actionPerformed 以便它可以在新的弹出窗口中打印它们？

```
import java.awt.event.*;
import java.awt.*;
import javax.swing.*;
import javax.swing.border.TitledBorder;

public class Retail extends JFrame implements ActionListener 
{
/**
 * 
 */
private static final long serialVersionUID = 1L;
JMenuBar menuBar = new JMenuBar();
JMenu addmenu = new JMenu("Add Information");
JMenu delmenu = new JMenu("Delete Information");
JMenu savemenu = new JMenu("Save Information");
JMenuItem emp = new JMenuItem("Employee");
JMenuItem merc = new JMenuItem("Merchandise");
JMenuItem cust = new JMenuItem("Customer");
Container contentPane = getContentPane();
JPanel p2 = new JPanel();

public Retail()
{
    super();
    contentPane.setLayout(new BorderLayout());
    JPanel p1 = new JPanel();
    p1.setBorder(new TitledBorder("Select Menu"));
    p1.setPreferredSize(new Dimension(500, 100));
    contentPane.add(p1,BorderLayout.NORTH);

    p2.setBorder(new TitledBorder("Entry Screen"));
    p2.setPreferredSize(new Dimension(500,500));    
    contentPane.add(p2,BorderLayout.CENTER);
    p2.setLayout(new BorderLayout());

    p1.add(menuBar);
    menuBar.add(addmenu);
    menuBar.add(delmenu);
    menuBar.add(savemenu);
    addmenu.add(emp);
    addmenu.addSeparator();
    addmenu.add(merc);
    addmenu.addSeparator();
    addmenu.add(cust);
    addmenu.addSeparator();

    emp.addActionListener(this);
    merc.addActionListener(this);
    cust.addActionListener(this);

}
public void actionPerformed(ActionEvent e)
{
    JButton submit1 = new JButton("Submit Employee Information"); 
    JButton submit2 = new JButton("Submit Merchandise Information");
    JButton submit3 = new JButton("Submit Customer Information");
    if(e.getSource() == emp)
    {   
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender:");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        ButtonGroup bgroup = new ButtonGroup();
        bgroup.add(rb1);
        bgroup.add(rb2);
        JLabel lb8 = new JLabel("Submit Information:");
        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);

        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit1);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);

        submit1.addActionListener(this);
    }

    if(e.getSource() == merc)
    {
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        JLabel lb8 = new JLabel("Submit Information:");

        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);
        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit2);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);

        submit2.addActionListener(this);

    }
    if(e.getSource() == cust)
    {
        p2.removeAll();
        p2.updateUI();
        String[] states={"MA","AZ","CA"};
        JLabel lb1 = new JLabel("First Name:");
        JTextField txt1 = new JTextField(12);
        JLabel lb2 = new JLabel("Last Name:");
        JTextField txt2 = new JTextField(12);
        JLabel lb3 = new JLabel("Address:");
        JTextField txt3 = new JTextField(12);
        JLabel lb4 = new JLabel("City:");
        JTextField txt4 = new JTextField(12);
        JLabel lb5 = new JLabel("State");
        JComboBox cb1 = new JComboBox(states);
        JLabel lb6 = new JLabel("ZipCode");
        JTextField txt5 = new JTextField(12);
        JPanel p3 = new JPanel();
        p3.setLayout(new GridLayout(8,1));
        JPanel p4 = new JPanel();
        p4.setLayout(new GridLayout(1,2));
        JLabel lb7= new JLabel("Gender");
        JRadioButton rb1 = new JRadioButton("Male");
        JRadioButton rb2 = new JRadioButton("Female");
        JLabel lb8 = new JLabel("Submit Information:");
        JPanel p5 = new JPanel();
        p5.setLayout(new GridLayout(8,1));
        p3.add(lb1);
        p3.add(lb2);
        p3.add(lb3);
        p3.add(lb4);
        p3.add(lb5);
        p3.add(lb6);
        p3.add(lb7);
        p3.add(lb8);

        p5.add(txt1);
        p5.add(txt2);
        p5.add(txt3);
        p5.add(txt4);
        p4.add(rb1);
        p4.add(rb2);
        p5.add(cb1);
        p5.add(txt5);
        p5.add(p4);
        p5.add(submit3);

        p2.add(p3,BorderLayout.WEST);
        p2.add(p5,BorderLayout.EAST);
        final String s;
        s = txt1.getText();
        submit3.addActionListener(new ActionListener() 
        {
            @Override
            public void actionPerformed(ActionEvent args0) 
            {
                JOptionPane.showMessageDialog(rootPane,s);
            }
        });
    }
}
public static void main(String[] args)
{

    Retail frame = new Retail();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("Retail Information");
    frame.pack();
    frame.setResizable(true);
    frame.setVisible(true);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:52:54.243

也许你可以制作`JTextField txt1`一个实例变量，这意味着你把它放在类范围变量中而不是放在`JTextField txt1`里面`actionPerformedMethod` 你可以像这样移动声明：

```
public class Retail extends JFrame implements ActionListener 
{
private JTextField txt1 = new JTextField(12); 
```

现在你可以参考`txt1`这样的

```
submit3.addActionListener(new ActionListener() 
{
@Override
public void actionPerformed(ActionEvent args0) 
{
String text = Retail.this.txt1.getText();
JOptionPane.showMessageDialog(rootPane,s);
}
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T03:50:16.263

您的代码有几个问题，但问题的根源是创建字符串 s 的时间。您是在创建显示的 JPanel 时创建它，而不是在按下提交按钮时创建它。一种快速的权宜之计是使您的 JTextFields 成为最终的，然后在提交 JButton 的 ActionListener 中从它们中*提取文本。*

例如，

```
 if (e.getSource() == cust) {
     p2.removeAll();
     p2.updateUI();
     String[] states = { "MA", "AZ", "CA" };
     JLabel lb1 = new JLabel("First Name:");
     final JTextField txt1 = new JTextField("Foo", 12);

     // ....

     // final String s;
     // s = txt1.getText();
     submit3.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent args0) {
           String s = txt1.getText();
           JOptionPane.showMessageDialog(rootPane, s);
        }
     });
  } 
```

话虽如此，如果这是我的代码，我会使用更好的整体计划重新设计它。

建议包括：

*   将这个大类细分为逻辑子类。
*   使用 CardLayout 交换视图。
*   添加一点 MVC 或**Model** **-** View **-** Control结构以将程序逻辑从 GUI 中分离出来。
*****   使用有意义的变量名，以便我的代码能够自我注释。例如，我将 JTextField 命名为 firstNameField 或类似名称，而不是 txt1。*   对我的每个 JButton 使用 AbstractActions，而不是使用一个巨大的 ActionListener 供所有人共享。****

# objective-c - 不能执行逻辑 NSString *

> ID：13522756
> 
> 赞同：0
> 
> 时间：2012-11-23T03:34:18.977
> 
> 标签：objective-c

> **可能重复：**
> [比较 Cocoa 中的字符串](https://stackoverflow.com/questions/881335/comparing-strings-in-cocoa)

我需要对`NSString*`变量执行逻辑。

如果我执行以下操作，它可以正常工作：

```
my_label_3.text = local_db_user.lifetime_subscription; 
```

UI 中的标签会填充文本，`True`

但以下返回`NO`：

```
local_db_user.lifetime_subscription == @"True" 
```

我为这个伪代码使用什么代码：

```
if local_db_user.lifetime_subscription == True
    do this
else
    do this other thing 
```

我的手表，在调试期间，`local_db_user.lifetime_subscription`显示：

```
{NSString * | 0x764e210} "True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:49:44.617

```
if([local_db_user.lifetime_subscription isEqualToString:@"True"])
 {
        //do the task here
 }
 else
{

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:41:21.143

您应该使用 isEqualToString: 来比较 NSString 对象。

正如[苹果文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)指出的那样：

```
- (BOOL)isEqualToString:(NSString *)aString 
```

> 返回一个布尔值，该值指示给定字符串是否等于使用基于 Unicode 的文字比较的接收者。

因此，要回答您的问题，您的代码应如下所示：

```
if ([local_db_user.lifetime_subscription isEqualToString:@"True"]) {
    // is equal
}
else {
    // is different
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:06:21.270

使用相等运算符（==）比较对象是检查内存地址。所以比较你必须使用的 NSString 对象

*   (BOOL)isEqualToString:(NSString *)aString;

方法。
对于您自己的（自定义类）对象，必须覆盖以下方法。

*   (BOOL)isEqual:(id)一个对象

# iphone - iPhone 5 报告错误的屏幕高度

> ID：13522758
> 
> 赞同：3
> 
> 时间：2012-11-23T03:34:29.103
> 
> 标签：iphone

我正在 iPhone 5 上测试我的应用程序，它在 iPhone 5 上报告屏幕高度为 480。在 iPhone 5 模拟器中，我得到正确的高度，即 568，但相同的代码在硬件上报告 480。我正在使用以下代码来获取屏幕高度。

```
[UIScreen mainScreen].bounds.size.height] 
```

可能是什么原因？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T03:51:01.180

支持 iPhone 5 和第 5 代 iPod touch 的更高屏幕需要存在`Default-568h@2x.png`启动图像。模拟器不区分大小写，而真实设备对文件名区分大小写。

由于模拟器报告了更高的高度而设备没有报告，因此您的启动图像可能具有错误的文件名。确保它是真的，而不是像or之类的`Default-568h@2x.png`东西。`default-568h@2x.png``Default-568h@2x.PNG`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T03:54:35.030

看起来您的应用程序正在“居中，信箱”模式下运行。要删除此模式并允许调整大小，您最好通过这篇文章[iPhone 5 letterboxing / screen resize](https://stackoverflow.com/questions/12398819/iphone-5-letterboxing-screen-resize)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:45:23.133

你也可以试试

```
CGRectGetHeight([UIScreen mainScreen].applicationFrame)
CGRectGetWidth([UIScreen mainScreen].applicationFrame) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:55:37.673

对它没有确切的想法。我正在使用它来获取屏幕高度。

如果您使用 UINavigationController 或 UIViewControler 获取

self.navigationController.view.frame.size.height
或self.view.frame.size.height
。

基本上你的 viewController 的视图的高度。

# git - 如何从 git 同步一个文件夹？

> ID：13522763
> 
> 赞同：1
> 
> 时间：2012-11-23T03:34:53.120
> 
> 标签：git

我碰巧从我的工作树中删除了一个文件夹，如何从 git 服务器同步该文件夹？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T03:38:22.877

您无需将其从服务器同步回来。您可以从本地仓库中获取它。只需使用`git checkout <folder>`.

# java - 在 JAXB / Resteasy 中使用泛型类扩展时的 NPE

> ID：13522769
> 
> 赞同：4
> 
> 时间：2012-11-23T03:35:49.117
> 
> 标签：java, rest, jaxb, jax-rs, resteasy

我正在使用 RestEasy 2.3.4。我遇到了NPE。我有一个通用基类 ValueContainer，我计划通过用适当的类型替换通用参数来将其扩展为 StringValue、IntegerValue、BooleanValue 等。

我正在尝试使用扩展类作为数据传输对象，如下所示。但是，我在 JAXB 处理中遇到了 NPE。这意味着，我没有正确对待 JAXB 中的扩展类。请指教。正确的方法是什么？谢谢你。

基类：

```
@XmlAccessorType(XmlAccessType.FIELD)
public class ValueContainer<T> {
  @XmlAttribute
  protected T value;

  public ValueContainer() {
  }

  public ValueContainer(T value) {
    this.value = value;
  }

  public T getValue() {
    return value;
  }

  public void setValue(T value) {
    this.value = value;
  }
} 
```

示例扩展类：

```
@XmlRootElement (name="integervalue")
public class IntegerValue extends ValueContainer<Integer> {

  public IntegerValue() {
  }

  public IntegerValue(Integer value) {
    super(value);
  }
} 
```

jax-rs API 接口：

```
@GET
@Path("/status/{what}")
IntegerValue getStatus(@PathParam ("what")Integer what) ; 
```

API 实现：

```
@Override
public
IntegerValue getStatus(Integer what) {
  return new IntegerValue(what);
} 
```

当我的浏览器调用 http:.../status/1 时，配置返回 null 的 NPE 原因：

```
package org.jboss.resteasy.plugins.providers.jaxb;

.....
protected JAXBContext createContextObject(Annotation[] parameterAnnotations, Class... classes) throws JAXBException
{
  JAXBConfig config = FindAnnotation.findAnnotation(parameterAnnotations, JAXBConfig.class);
  return new JAXBContextWrapper(config, classes);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:22:11.270

我认为你应该在`public ValueContainer()`. 这个 ctor 存在只是因为 JAXB 要求我们有公共的无参数构造函数（请参阅[What JAXB 需要一个公共的无参数构造函数？](https://stackoverflow.com/questions/4155361/what-jaxb-needs-a-public-no-arg-constructor-for)）。发生的情况是您的对象在没有任何参数的情况下被实例化并`value`保持为空（奇怪的是您的 Java 编译器没有抱怨）。

# python - 如何引发此异常或错误消息？

> ID：13522770
> 
> 赞同：3
> 
> 时间：2012-11-23T03:35:49.410
> 
> 标签：python, django, exception-handling

我一直在 Python/Django 中实现 rsync 以在文件之间传输数据。这是我的views.py：

```
def upload_file(request):
    '''This function produces the form which allows user to input session_name, their remote host name, username 
    and password of the server. User can either save, load or cancel the form. Load will execute couple Linux commands
    that will list the files in their remote host and server.'''

    if request.method == 'POST':    
        # session_name = request.POST['session']
        url = request.POST['hostname']
        username = request.POST['username']
        global password
        password = request.POST['password']
        global source
        source = str(username) + "@" + str(url)

        command = subprocess.Popen(['sshpass', '-p', password, 'rsync', '--list-only', source],
                           stdout=subprocess.PIPE,
                           env={'RSYNC_PASSWORD': password}).communicate()[0]
    command = command.split(' ')[-1]

        result = subprocess.Popen(['ls', '/home/nfs/django/genelaytics/user'], stdout=subprocess.PIPE).communicate()[0].splitlines()

        return render_to_response('thanks.html', {'res':result, 'res1':command}, context_instance=RequestContext(request))

    else:
        pass
    return render_to_response('form.html', {'form': 'form'},  context_instance=RequestContext(request)) 
```

我从表单中获取远程主机、用户名和密码输入。但那些密码、用户名或服务器名可能不正确。即使它们不正确，这段代码也会将我转换为thanks.html，但这些服务器上的文件当然没有列出，因为用户名、密码、主机名不正确。我如何验证它？如何引发异常或错误的用户名、密码或主机名错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:46:21.320

在 python 中，如果你想使用 ssh 或 sftp（通过 ssh 连接复制文件），那么[paramiko](http://www.lag.net/paramiko/)库就是你要走的路。如果您只想检查提供的主机、用户名、密码组合是否有效，此功能将完成这项工作：

```
import paramiko

def test_ssh(host, username, password):
    ssh = paramiko.SSHClient()
    ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
    ssh.connect(host, username=username, password=password) 
```

该函数的一个示例调用是：

```
test_ssh('10.0.0.10', 'myuser', 'mypassword') 
```

如果它能够正确连接到主机，它将成功返回。否则，它将通过异常详细说明失败的原因。例如，当放置无效主机时，会引发以下异常：

```
socket.error: [Errno 113] No route to host 
```

无效的用户名，密码将引发：

```
paramiko.AuthenticationException: Authentication failed. 
```

您可以像在 Python 中通常那样捕获这些异常，并向用户显示您希望的任何类型的消息。我建议不要使用 sshpass 和 subprocess 来使用 paramiko。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:06:31.183

在你做任何其他事情之前，**停止**。您正在使用全局变量来存储用户名和密码。这意味着来自其他用户的后续请求将有权访问前一个用户的数据。**不要这样做**。如果你在 Python 中使用全局变量，那么你可能做错了：如果你使用它在 Django 中的请求之间传递数据，那么你肯定做错了。

请注意，[我之前已经警告过您](https://stackoverflow.com/questions/13411598/global-variable-not-working-in-python-django)。请停止实施根本不安全的架构。

# c++ - 编写一个显示星号的简单 for 语句程序

> ID：13522771
> 
> 赞同：1
> 
> 时间：2012-11-23T03:35:51.517
> 
> 标签：c++, for-loop

我想创建一个程序，它使用两个 for 语句来显示如下所示的星号模式。

```
 **
 ****
 ******
 ********
 ********** 
```

我可以让他们使用相当多的 for 语句，但我只想使用其中的 2 个，以使其更短，这就是我所拥有的：

```
 #include <iostream>
 #include <iomanip>
 using namespace std;

 int main()
 {
 int row = 1;
 int astrk = 1;

 for ( int row = 1; row < 2; row += 1)
 {
 for ( int astrk = 1; astrk <= 2; astrk += 1)
 cout << '*';
 cout << endl;
 }// end for
 for ( int row = 1; row < 2; row += 1)
 {
 for ( int astrk = 1; astrk <= 4; astrk +=1)
 cout << '*';
 cout << endl;
 }//end for
 for ( int row = 1; row < 2; row += 1)
 {
 for ( int astrk = 1; astrk <= 6; astrk += 1)
 cout << '*';
 cout << endl;
 }// end for
 for ( int row = 1; row < 2; row += 1)
 {
 for ( int astrk = 1; astrk <= 8; astrk += 1)
 cout << '*';
 cout << endl;
 }// end for
 for ( int row = 1; row < 2; row += 1)
 {
 for ( int astrk = 1; astrk <= 10; astrk += 1)
 cout << '*';
 cout << endl;
 }// end for

 return 0;
 } 
```

请帮忙？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:40:01.847

您应该有一个用于行数的外部循环，以及一个用于星号的内部循环。当内部循环完成打印星号时，外部循环打印一个换行符，并增加星号计数。

在伪代码中：

```
for (from one to the number of lines)
{
    for (one to the number of asterisks)
    {
        print an asterisk
    }

    print a newline
    increase number of asterisks
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:32:28.397

你也可以试试下面的代码

```
 for(int i=0;i<6;i++){//used to print out rows

        for(int j=0;j<=i;j++){used to print asterisk in each row
                cout<<"**";
                }
        cout<<endl;
        } 
```

欲了解更多详情，请访问：http: [//include.site40.net/aasterics.php](http://include.site40.net/aasterics.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:56:39.137

注意模式：

第 1 行有 2 个星号，第 2 行有 4 个星号，第 3 行有 6 个星号，...

要打印的星号数由行号乘以 2 确定。

就像 emartel 显示的那样，您可以通过将内部 for 循环的测试表达式基于外部循环的当前 i 值（行号）乘以 2（要打印的单个星号的数量）来动态确定内部 for 循环将运行多少次。

像这样的大多数问题将归结为让内部 for 循环以某种巧妙的方式使用外部 for 循环计数器值来打印所需的输出模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:43:32.153

您应该使用两个`for`循环来重写它，一次控制行，另一个控制列。

你有 5 行，每行有 2、4、6 等等……星。

```
for(int i = 1; i <= 5; ++i) // five rows
{
    for(int j = 1; j <= i * 2; ++j) // we have 2 stars for each row number -> 2, 4, 6, etc...
    {
        cout << "*";
    }
    cout << "\n";
} 
```

尝试了解您的问题，在纸上找出解决方案，然后尝试实施它，如果您正在学习如何编程，这将变得更简单。

# python - 不使用内置 bin 函数将整数转换为二进制

> ID：13522773
> 
> 赞同：13
> 
> 时间：2012-11-23T03:36:22.707
> 
> 标签：python, list, binary, converter, bit

此函数接收一个整数作为参数，并应返回一个列表，该列表表示以二进制表示的相同值作为位列表，其中列表中的第一个元素是最高有效（最左边）位。

我的函数当前输出`'1011'`数字 11，我需要`[1,0,1,1]`。

例如，

```
>>> convert_to_binary(11)
[1,0,1,1] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T03:39:28.140

```
def trans(x):
    if x == 0: return [0]
    bit = []
    while x:
        bit.append(x % 2)
        x >>= 1
    return bit[::-1] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-23T04:05:58.400

只是为了好玩 - 作为递归单线的解决方案：

```
def tobin(x):
    return tobin(x/2) + [x%2] if x > 1 else [x] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-11T12:28:36.037

我可以提议：

```
def tobin(x,s):
    return [(x>>k)&1 for k in range(0,s)] 
```

这可能是最快的方式，对我来说似乎很清楚。当性能很重要时，bin 方式太慢了。

干杯

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-08T21:08:32.490

您可以先使用 format 函数来获取与当前函数类似的二进制字符串。例如，下面的代码片段创建了一个对应于整数 58 的 8 位二进制字符串。

```
>>>u = format(58, "08b")
'00111010' 
```

现在迭代字符串以将每个位转换为 int 以获得所需的编码为整数的位列表。

```
>>>[int(d) for d in u]
[0, 0, 1, 1, 1, 0, 1, 0] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-21T05:19:15.383

您可以使用[numpy](http://numpy.org)包并获得非常快速的解决方案：

```
python -m timeit -s "import numpy as np; x=np.array([8], dtype=np.uint8)" "np.unpackbits(x)"
1000000 loops, best of 3: 0.65 usec per loop

python -m timeit "[int(x) for x in list('{0:0b}'.format(8))]"
100000 loops, best of 3: 3.68 usec per loop 
```

unpackbits 仅处理 uint8 类型的输入，但您仍然可以使用 np.view：

```
python -m timeit -s "import numpy as np; x=np.array([124567], dtype=np.uint64).view(np.uint8)" "np.unpackbits(x)"
1000000 loops, best of 3: 0.697 usec per loop 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-16T14:05:19.940

## 填充长度

在大多数情况下，您希望二进制数具有特定长度。例如，您希望 1 为 8 个二进制数字长 [0,0,0,0,0,0,0,1]。我自己用这个：

```
def convert_to_binary(num, length=8):
    binary_string_list = list(format(num, '0{}b'.format(length)))
    return [int(digit) for digit in binary_string_list] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-10-19T11:54:03.167

这是我为大学制作的代码。单击[此处查看代码的 youtube 视频。](https://www.youtube.com/watch?v=SGTZzJ5H-CE "YouTube 视频，如果代码")！ [https://www.youtube.com/watch?v=SGTZzJ5H-CE](https://www.youtube.com/watch?v=SGTZzJ5H-CE)

```
__author__ = 'Derek'
print('Int to binary')
intStr = input('Give me an int: ')
myInt = int(intStr)
binStr = ''
while myInt > 0:
    binStr = str(myInt % 2) + binStr
    myInt //= 2
print('The binary of', intStr, 'is', binStr)
print('\nBinary to int')
binStr = input('Give me a binary string: ')
temp = binStr
newInt = 0
power = 0
while len(temp) > 0:   # While the length of the array if greater than zero keep looping through
    bit = int(temp[-1])   # bit is were you temporally store the converted binary number before adding it to the total
    newInt = newInt + bit * 2 ** power  # newInt is the total,  Each time it loops it adds bit to newInt.
    temp = temp[:-1]  # this moves you to the next item in the string.
    power += 1  # adds one to the power each time.
print("The binary number " + binStr, 'as an integer is', newInt) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-23T03:41:47.857

这会做到的。如果有内置函数，滚动你自己的函数是没有意义的。

```
def binary(x):
    return [int(i) for i in bin(x)[2:]] 
```

该`bin()`函数转换为二进制字符串。剥离，`0b`你就设置好了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-08-21T03:08:41.813

```
def nToKBit(n, K=64):
   output = [0]*K

   def loop(n, i):
       if n == 0: 
           return output
       output[-i] = n & 1
       return loop(n >> 1, i+1)

   return loop(n, 1) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-31T22:29:57.543

不是pythonic方式......但仍然有效：

```
def get_binary_list_from_decimal(integer, bits):
    '''Return a list of 0's and 1's representing a decimal type integer.

    Keyword arguments:
    integer -- decimal type number.
    bits -- number of bits to represent the integer.

    Usage example:
    #Convert 3 to a binary list
    get_binary_list_from_decimal(3, 4)
    #Return will be [0, 0, 1, 1]
    '''
    #Validate bits parameter.
    if 2**bits <= integer:
        raise ValueError("Error: Number of bits is not sufficient to \
                          represent the integer. Increase bits parameter.")

    #Initialise binary list
    binary_list = []
    remainder = integer
    for i in range(bits-1, -1, -1):
        #If current bit value is less than or equal to the remainder of 
        #the integer then bit value is 1.
        if 2**i <= remainder:
            binary_list.append(1)
            #Subtract the current bit value from the integer.
            remainder = remainder - 2**i
        else:
            binary_list.append(0)

    return binary_list 
```

如何使用它的示例：

```
get_binary_list_from_decimal(1, 3)
#Return will be [0, 0, 1] 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-10-15T09:04:57.033

将十进制转换为二进制取决于您将如何使用 % 和 //

```
def getbin(num):
    if (num==0):
        k=[0] 
        return k 
    else:
        s = []
        while(num):
            s.append(num%2)
            num=num//2
        return s 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-04-17T18:31:49.393

并不是最有效的，但至少它提供了一种简单的概念性理解方式......

1) Floor 将所有数字反复除以 2，直到达到 1

2）以相反的顺序，创建这个数字数组的位，如果是偶数，则附加0，如果奇数附加1。

这是它的字面实现：

```
def intToBin(n):
    nums = [n]
    while n > 1:
        n = n // 2
        nums.append(n)

    bits = []
    for i in nums:
        bits.append(str(0 if i%2 == 0 else 1))
    bits.reverse()
    print ''.join(bits) 
```

这是一个更好地利用内存的版本：

```
def intToBin(n):
    bits = []

    bits.append(str(0 if n%2 == 0 else 1))
    while n > 1:
        n = n // 2
        bits.append(str(0 if n%2 == 0 else 1))

    bits.reverse()
    return ''.join(bits) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-03T08:36:13.063

只是共享一个处理整数数组的函数：

```
def to_binary_string(x):
    length = len(bin(max(x))[2:])

    for i in x:
        b = bin(i)[2:].zfill(length)

        yield [int(n) for n in b] 
```

测试：

```
x1 = to_binary_string([1, 2, 3])
x2 = to_binary_string([1, 2, 3, 4])

print(list(x1)) # [[0, 1], [1, 0], [1, 1]]
print(list(x2)) # [[0, 0, 1], [0, 1, 0], [0, 1, 1], [1, 0, 0]] 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-08-22T10:52:37.450

将整数转换为具有固定长度的位列表：

```
[int(x) for x in list('{0:0{width}b}'.format(8, width=5))] 
```

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-04-02T08:44:09.327

```
# dec2bin.py
# FB - 201012057
import math

def dec2bin(f):
    if f >= 1:
        g = int(math.log(f, 2))
    else:
        g = -1
    h = g + 1
    ig = math.pow(2, g)
    st = ""    
    while f > 0 or ig >= 1: 
        if f < 1:
            if len(st[h:]) >= 10: # 10 fractional digits max
                   break
        if f >= ig:
            st += "1"
            f -= ig
        else:
            st += "0"
        ig /= 2
    st = st[:h] + "." + st[h:]
    return st

# MAIN
while True:
    f = float(raw_input("Enter decimal number >0: "))
    if f <= 0: break
    print "Binary #: ", dec2bin(f)
    print "bin(int(f)): ", bin(int(f)) # for comparison 
```

# php - Symfony 2.1 REST API 登录到任何地方

> ID：13522774
> 
> 赞同：6
> 
> 时间：2012-11-23T03:36:28.217
> 
> 标签：php, symfony, symfony-2.1

我正在使用 Symfony 2.1 开发 REST API。

我的代码现在可以完美运行，但是我可以登录`/api/`但这个登录只能在`/api/*`. 但我需要访问整个页面。

```
api:
    pattern: ^/api
    #anonymous: ~
    form_login: false
    provider: fos_userbundle
    http_basic:
        realm: "REST Service"

main:
    pattern: .*
    provider: fos_userbundle
    form_login:
        check_path: fos_user_security_check
        login_path: fos_user_security_login
        default_target_path: wi_homepage
    logout:
        path: fos_user_security_logout
        target: wi_homepage
    anonymous:    true
    switch_user: true
    remember_me:
        key: "%secret%"
        name: RememberMe
        lifetime: 2592000
        remember_me_parameter: _remember_me 
```

那么有什么方法可以在`/api/`目录下进行http登录并可以访问任何地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:25:31.600

解决方案非常简单，两个防火墙需要相同的上下文

```
context: some_random_context_name_you_can_choose_freely 
```

[http://forum.symfony-project.org/viewtopic.php?f=23&t=60654&p=164063#p164063](http://forum.symfony-project.org/viewtopic.php?f=23&t=60654&p=164063#p164063)

# http - OAuth 方法、url、查询的意义

> ID：13522775
> 
> 赞同：2
> 
> 时间：2012-11-23T03:36:36.530
> 
> 标签：http, oauth

1.  如果协议（受 OAuth 影响）仅使用`timestamp`, 和`nonce`,
2.  服务器强烈检查这两个因素，
3.  `request method`省略,`request URL`和是否（可以说）安全`query parameters`？

我有一个受 OAuth 影响很大的自定义 HTTP 协议。

```
some-NAME: unencrypted information for identifying client and locating the shared secret key
some-INIT: iv
some-CODE: AES256-encrypted information; timestamp and nonce are in here
some-AUTH: Hmac with SHA512 for CODE before encrypted. 
```

当服务器端只检查`timestamp`and`nonce`时，它安全吗？some `replay attack`s 还是 some `bastards-in-the-middle-attack`s 可以吗？

更新 - - - - - - - - - - - - - - -

该协议实际上授权移动设备。个人身份验证是可选的附加功能。

# android - 使用操作栏时如何隐藏标题栏？

> ID：13522777
> 
> 赞同：19
> 
> 时间：2012-11-23T03:36:50.583
> 
> 标签：android, android-actionbar, actionbarsherlock, titlebar

我正在使用 ActionBarSherlock 并且我试图隐藏我的应用程序的标题栏，但是每当我这样做时，我`NullPointerException`在访问`ActionBar`如何删除/隐藏标题栏？请注意，我指的不是操作栏的标题。我指的是操作栏上方的标题栏。我在 Android 2.3 设备上运行我的应用程序。

以下是我的代码：（我的课程扩展了`SherlockFragmentActivity`。）

```
super.onCreate(savedInstanceState);
setTheme(R.style.Theme_Sherlock);
this.requestWindowFeature(Window.FEATURE_NO_TITLE);
ActionBar actionbar = getSupportActionBar();
actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); //I get the NullPointerException here.

//...

setContentView(R.layout.tab_navigation); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-20T07:33:22.500

我通过添加以下代码行来隐藏标题栏：

```
getSupportActionBar().setDisplayShowTitleEnabled(false);
getSupportActionBar().setDisplayShowHomeEnabled(false); 
```

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-08-07T09:21:48.487

要隐藏所有标题栏并仅保留操作栏，请使用以下代码：

```
final ActionBar actionBar = getActionBar();
actionBar.setDisplayShowHomeEnabled(false);
actionBar.setDisplayShowTitleEnabled(false);
actionBar.setDisplayUseLogoEnabled(false); 
```

它对我有用

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-01-28T05:39:21.160

我正在为此寻找答案。找到了一种解决方案。

```
actionBar = getActionBar();
actionBar.hide(); 
```

上面的代码片段将删除标签标题和滑块。希望能帮助到你。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-23T04:56:58.013

在这个上找到了解决方案。如果您在 上声明您的主题`AndroidManifest.xml`，标题栏将自行消失。虽然，我不明白为什么它只在声明时才有效，`AndroidManifest.xml`而不是在代码上。

NullPointerException 的原因是更高版本（ICS 和更高版本）`ActionBar`的同义词`TitleBar`。通过使用兼容性库 and `ActionBarSherlock`，隐藏`TitleBar`也意味着隐藏`ActionBar`.

以下是如何设置您的应用程序以使用 Sherlock 的主题：（您应该将其添加到应用程序的标签上）

```
android:theme="@style/Theme.Sherlock" 
```

如果您知道如何隐藏代码上的标题栏，请随时修改我的答案以包含您的答案。如果有人能解释为什么它只适用于清单文件而不适用于代码，那就太好了。:)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-18T17:26:09.013

see this answer to grammatically show/hide titleBar from the ActionBarSherlock ..

[android: title bar hide](https://stackoverflow.com/questions/17285019/android-title-bar-hide)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T10:09:46.873

Arci 的回答并不完全正确。如果您阅读[主题文档](http://actionbarsherlock.com/theming.html)，您会发现：

> 主题应该在您的清单中为整个应用程序或基于每个活动定义。您也可以在调用*之前在*`super.onCreate(Bundle)`每个活动的代码中定义主题。对于您从“Sherlock”活动基类之一扩展并打算使用操作栏的每个活动，都必须执行此操作。

换句话说，交换原始代码的前两行就足够了：

```
setTheme(R.style.Theme_Sherlock);
super.onCreate(savedInstanceState);
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-09T20:32:45.780

我有同样的问题。这些答案都不适合我，我仍然可以看到标题栏在加载操作栏之前显示。

我必须在 Manifest 中将*Activity*主题设置为 NoActionBar：

```
android:theme="@style/Theme.Sherlock.NoActionBar" 
```

然后在 setContentView() 之前将主题设置回我的 Activity 中：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setTheme(R.style.Theme_Custom);
    setContentView(R.layout.activity_home);
} 
```

这仍然加载了我的自定义主题，并且在加载活动时我不再看到标题栏

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-23T16:53:08.297

如果您使用的是 Xamarin。你可以在下面使用。

```
ActionBar.Hide(); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-07-26T03:10:30.070

```
 <activity android:name=".xxxxxActivity"
              android:theme="@style/Theme.Sherlock.NoActionBar"/> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2013-05-21T06:47:27.993

试试看：

```
setTheme(R.style.Theme_Sherlock_NoActionBar); 
```

# javascript - 如何判断字符串中是否包含任何非 ASCII 字符？

> ID：13522782
> 
> 赞同：23
> 
> 时间：2012-11-23T03:38:12.203
> 
> 标签：javascript, regex, unicode, ascii

我正在寻找检测电子邮件地址中的国际化域名和本地部分，并想知道是否有一种快速简便的方法可以使用正则表达式或其他方式在 Javascript 中执行此操作。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-23T03:40:31.157

这个应该做...

```
var hasMoreThanAscii = /^[\u0000-\u007f]*$/.test(str); 
```

...还...

```
var hasMoreThanAscii = str
                       .split("")
                       .some(function(char) { return char.charCodeAt(0) > 127 }); 
```

ES6 天...

```
let hasMoreThanAscii = [...str].some(char => char.charCodeAt(0) > 127); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-11-23T03:49:38.883

试试这个正则表达式。它测试所有在字符串中*具有某种含义*的 ascii 字符，从空格`32`到波浪号`126`：

```
var ascii = /^[ -~]+$/;

if ( !ascii.test( str ) ) {
  // string has non-ascii characters
} 
```

**编辑：**使用制表符和换行符：

```
/^[ -~\t\n\r]+$/; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-23T03:40:38.157

`charCodeAt`可用于获取字符串中某个位置的字符代码。

```
function isAsciiOnly(str) {
    for (var i = 0; i < str.length; i++)
        if (str.charCodeAt(i) > 127)
            return false;
    return true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-21T15:00:48.070

@alex 解决方案的更简单替代[方案](https://stackoverflow.com/a/13522792/856465)：

```
const hasNonAsciiCharacters = str => /[^\u0000-\u007f]/.test(str); 
```

# html - 如何阻止用户在我的网站上水平滚动

> ID：13522787
> 
> 赞同：13
> 
> 时间：2012-11-23T03:39:05.217
> 
> 标签：html, css, scroll, scrollbar, overflow

这是网站：http: [//joshnh.com/](http://joshnh.com/)

基本上，我有一些超宽的元素，因此它们看起来好像从屏幕的右侧出来。然后我`overflow-x: hidden;`在 body 上使用来隐藏溢出，但这并不能阻止页面在用户使用触控板时水平滚动，或者单击并向右拖动鼠标。

该站点是流动的，因此设置`overflow-x: hidden;`不是问题，但必须在`body`/`html`标签上设置，而不是在内容包装上，因为这会破坏设计。

我也在使用这个 jQuery 片段来尝试和帮助：

```
(function($) {
    $(window).scroll( function() {
        $(window).scrollLeft(0);
    });
})(jQuery); 
```

我过去曾成功使用过它，但在这种情况下我似乎无法让它工作。这是一个 jsFiddle，显示了在简化的测试用例中工作的上述代码段：http: [//jsfiddle.net/joshnh/pqpzN/](http://jsfiddle.net/joshnh/pqpzN/)

有什么建议么？

PS 它在 iOS 上的行为应如此。

更新：我想我已经设法让那个 jQuery 片段通过触摸板停止水平滚动，但是点击和拖动仍然有效（我无法解释，因为测试用例也停止点击和拖动，因为它应该在我的地点）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T22:15:02.513

I have fixed the issue by changing this:

```
body,
html {
    overflow-x: hidden;
    width: 100%;
} 
```

To this:

```
html {
    overflow-x: hidden;
    width: 100%;
} 
```

It was `overflow-x: hidden;` on the body element that was causing the problem.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T15:28:23.413

对你没用的东西对我有用。我使用了下面的代码并且它有效。

```
body,
html {
    overflow-x: hidden;
    width: 100%;
} 
```

当我尝试时：

```
html {
    overflow-x: hidden;
    width: 100%;
} 
```

它没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:41:56.500

## 建议一

将最大宽度应用于`body`. 像这样的东西：

```
body
{
    max-width:   100%;
    margin:    0 auto;
    overflow: visible;
} 
```

我在 Chrome 和 IE9 上进行了测试，我注意到的唯一问题是跳跃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:53:07.780

看起来它对我有用。（无论我对页面做了什么，我都没有看到水平滚动条。）我认为这`overflow-x`是正确的解决方案，您不需要 JavaScript 来执行此操作。我会使用`html { overflow-x:hidden }`，但看起来你已经在这样做了。我要做的第一件事是在[html5.validator.nu](http://html5.validator.nu/?doc=http://joshnh.com/)验证页面并修复“两个连续的连字符”错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T04:04:56.987

我没有看到水平滚动条，但我可以使用鼠标滚轮上的侧向滑动功能并观察屏幕移动。看起来您的主要内容元素已设置为适合屏幕的大小，但您的标题和部分标题中的图像将永远重复。我不确定你是如何定义你的css的，但它可能就像在你的标题上应用一个宽度以让它停止一样简单。

你`<header class="clearfix" role="banner">`和`<h1 class="section-title">About Me</h1>`似乎是罪魁祸首。使用 css 限制它们的宽度应该可以解决问题。

# c++ - 是否有任何版本的 CvBlobs 库可以与 cv::Mat 一起使用？

> ID：13522797
> 
> 赞同：4
> 
> 时间：2012-11-23T03:41:30.000
> 
> 标签：c++, opencv

我刚刚发现[CvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib#Code%20examples)可以成为一种祝福，但遗憾的是它使用了 IplImage。
有没有可能有一个新的 cv::Mat 风格的版本，我只是碰巧没有找到它？

编辑：

结果我碰巧发现了 2 个不同的库，CvBlobsLib 和 CvBlobs，yeehaa。:)
我看到 CvBlobsLib 比 cvBlobs 使用得少，那不是在 opencv willowgarage 上，而是在 google 代码上。不过，我欢迎这两个库的答案，因为它们都与 IplImage 一起使用。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:27:34.200

**编辑：我在这个答案中谈论[cvBlobs](http://code.google.com/p/cvblob/)，很抱歉我把它搞砸了[cvBlobsLib](http://opencv.willowgarage.com/wiki/cvBlobsLib#Code%20examples) ...**

我也一直在寻找这个，但没有想出任何使用新图像结构的库。

但实际上你总是可以这样做：`IplImage iplImg = mat;`只要`&iplimg`在你需要的地方使用`IplImage*`.

**我在几个项目中以这种方式成功地使用了[cvBlobs ：](http://code.google.com/p/cvblob/)**

```
#include <cvblob.h>
using namespace cvb;

// load image
cv::Mat mat = cv::imread("image.jpg");

// convert cv::Mat to IplImage
IplImage img = mat;

// convert to grayscale
IplImage *gray = cvCreateImage( cvGetSize(&img), IPL_DEPTH_8U, 1 );
cvCvtColor( &img, gray, CV_BGR2GRAY );

// get binary image
cvThreshold( gray, gray, 150, 255, CV_THRESH_BINARY );

// get blobs
IplImage *labelImg = cvCreateImage( cvGetSize(gray), IPL_DEPTH_LABEL, 1 );
CvBlobs blobs;
unsigned int result = cvLabel( gray, labelImg, blobs );

// render blobs in original image
cvRenderBlobs( labelImg, blobs, &img, &img );

// *always* remember freeing unused IplImages
cvReleaseImage( labelImg );
cvReleaseImage( gray ); 

// convert back to cv::Mat
cv::Mat output( &img ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T13:07:06.053

实际上，@moosgummi 答案的真正 C++ 版本看起来像这样：

```
#include <cvblobs.h>
using namespace cvb;
using namespace cv;
// load image
Mat mat = imread("image.jpg");

// convert to grayscale
Mat gray; cvtColor(mat, gray, CV_BGR2GRAY);

// get binary image
threshold( gray, gray, 150, 255, CV_THRESH_BINARY );

// get blobs
Mat labelImg; labelImg.create( gray.size(), IPL_DEPTH_LABEL ); // need to check if IPL_DEPTH_LABEL is the right type...not sure
CvBlobs blobs; 
IplImage iplLabelImg = labelImg; // do not release this!
unsigned int result = cvLabel( gray, &iplLabelImg, blobs );

// render blobs in original image
IplImage iplMat = mat; // do not release this!
cvRenderBlobs( &iplLabelImg, blobs, &iplMat, &iplMat);

// for sake of compatibility with moosgummi:
cv::Mat output = mat; 
```

并且您需要一个包装类，用于带有lazy_copy_refcounted 私有CvBlobs 数据的类以及一些到const CvBlobs 和CvBlobs 的转换运算符`CvBlobs`。`cvb::Blobs`还需要一个用于 cvLabel 的包装函数`cvb::label()`，它为我们 C++ 程序员进行强制转换。

# c# - 公开 WPF 用户控件的属性

> ID：13522802
> 
> 赞同：2
> 
> 时间：2012-11-23T03:42:48.990
> 
> 标签：c#, wpf, user-controls, wpf-controls

在这里，我在 WPF 中有一个用户控件，它基本上是在一个窗格中显示文件夹树，另一个窗格（列表视图）显示该目录中的文件。

现在我公开了一个名为 fileextensionfilter 的属性，它基本上只需要在列表视图中显示特定文件。例如，如果 fileextensionfilter= XML 它只显示 xml 文件。

现在在我的主应用程序中，我三次使用上述控件，但使用不同的文件扩展文件，例如 1>xml 另一个实例仅 .pdf 等等....

现在我从 settings.default.xmlfilter、settings.default.PDFFilter 等获取扩展过滤器值......

这里的问题是当我加载 usercontrol 的控件属性时没有初始化，并且我在构造函数中有一些东西使用了这个属性和（当时“null”）所以过滤器第一次不起作用。接下来再次刷新过滤器属性将被应用，因此它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:13:32.743

您可以尝试使用当前属性并使用[Loaded](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.loaded%28v=VS.95%29.aspx)事件来运行您当前在构造函数中运行的代码。这是一个小例子：

**主窗口.xaml**

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525" xmlns:my="clr-namespace:WpfApplication1">
    <Grid>
        <my:UserControl1 FileExtensionFilter="RTF" HorizontalAlignment="Left" Margin="10,10,0,0" x:Name="userControl1" VerticalAlignment="Top" />
        <my:UserControl1 FileExtensionFilter="XML" HorizontalAlignment="Left" Margin="10,10,0,0" x:Name="userControl2" VerticalAlignment="Top" />
        <my:UserControl1 FileExtensionFilter="PDF" HorizontalAlignment="Left" Margin="10,10,0,0" x:Name="userControl3" VerticalAlignment="Top" />
    </Grid>
</Window> 
```

**用户控制**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace WpfApplication1
{
    /// <summary>
    /// Interaction logic for UserControl1.xaml
    /// </summary>
    public partial class UserControl1 : UserControl
    {
        string filter = "NULL";
        public UserControl1()
        {
            InitializeComponent();
            System.Diagnostics.Debug.WriteLine("Property" + filter + "Set during Constructor");
        }

        public string FileExtensionFilter
        {
            get { return filter; }
            set { filter = value; }
        }

        private void UserControl_Loaded(object sender, RoutedEventArgs e)
        {
            System.Diagnostics.Debug.WriteLine("Property" + filter + "Set during Loaded");
        }

        private void UserControl_Initialized(object sender, EventArgs e)
        {
            System.Diagnostics.Debug.WriteLine("Property" + filter + "Set during Initialized");
        }
    }
} 
```

**输出**

> PropertyNULLSet during Initialized
> PropertyNULLSet during Initialized PropertyNULLSet during Initialized PropertyNULLSet
> during Initialized PropertyNULLSet during Initialized
> PropertyNULLSet during Constructor PropertyRTFSet during Loaded PropertyXMLSet during Loaded PropertyPDFSet during Loaded

# asp.net - 使用 aspnet_compiler 的独立就地预编译

> ID：13522807
> 
> 赞同：3
> 
> 时间：2012-11-23T03:43:57.520
> 
> 标签：asp.net

`aspnet_compiler`似乎有两种模式：

1.  **Target** - 整个站点被复制到目标文件夹，`PrecompiledApp.config`生成，生成的程序集进入 target\bin，视图（可选）替换为占位符
2.  **就地**- 站点在其原始位置编译，不`PrecompiledApp.config`生成，生成的程序集进入临时 ASP.NET 文件，视图保持原样

是否可以触发就地预编译但生成的程序集+配置也会影响原始位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:40:44.377

这样做是不可能的。请注意，这两种模式针对非常不同的场景：

1.  **目标**模式是关于创建位，然后您可以将其部署到服务器上，这样它就不必进行太多的编译。请注意，有两种子模式，具体取决于您是否使其可更新（-u 开关）。
2.  **就地**模式只是对已经部署的站点进行预热，这样对它的第一个请求会更快。另一种看待它的方式是，它类似于手动请求您网站中的所有页面对其进行预热，除了少一点痛苦。

请注意，如果您在不可更新模式下执行 #1，那么即使您的 .aspx（和相关）文件也会被修改为存根。很明显，这不可能就地发生，因为这最终会删除您的原始 aspx 文件。

我并不是说拥有某种混合模式是不可想象的，它可以完成目标模式所做的一些事情并将其保持在原位。这不是该工具所针对的场景。

# jquery - Jquery 每个函数都没有按预期工作

> ID：13522808
> 
> 赞同：1
> 
> 时间：2012-11-23T03:44:01.823
> 
> 标签：jquery

不知道我能不能正确解释这个......

我一遍又一遍地重复以下代码序列：

```
<div class="featured">
    <div class="link1">
        <a href="url1">anchor1</a>
    </div>

    <div class="link2">
        <a href="url2">anchor2</a>
    </div>
</div>

...... this sequence is repeated again and again, but "url2" has different values 
```

我正在尝试用“url2”替换“ancor1”（对于每个重复的序列，url2 具有不同的值）。

我使用了这个 jquery 代码：

```
$(".featured").each(function(){
   var url2 = $(.featured .link2 a).attr('href');
   $("link1").html(url2);
}); 
```

该代码有点工作，但它从第一个代码序列中获取“url2”值并在每次迭代时重复它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:46:59.697

你需要：

```
$(".featured").each(function(){
   var url2 = $(".link2 a", this).attr('href');
   $(".link1", this).html(url2);
}); 
```

这将指定`.link2`并且`.link1`需要来自当前`featured`div。jQuery 的第二个参数指定要在其中搜索的上下文。

# java - 使用 Entryset 遍历 Hashmap

> ID：13522809
> 
> 赞同：4
> 
> 时间：2012-11-23T03:44:20.047
> 
> 标签：java, map

```
for (Map.Entry<String, Map<String, List>> entry:Map1.entrySet()) 
{
    String key=entry.getKey();
    System.out.println("Type : " +key);

    for (Map.Entry<String, List> entry1 : entry.getKey().getValue().entrySet())
    {
        System.out.println("Type : " + entry1.getKey());
    }
} 
```

我不知道应该用什么来代替`entry.getKey().getValue().entrySet()`. 任何人都可以解释我理解这一点。这是用于迭代嵌套地图。

我得到的错误是

```
.\common\devtracker\process\devtr\DevTrackerImpl.java:226: cannot find symbol
symbol  : method getValue()
location: class java.lang.String
for (Map.Entry<String, List<ProjectBreakupVO>>    entry1:entry.getKey().getValue().entrySet()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:53:28.047

entry.getKey() 没有方法 getValue()，因为它只是返回一个字符串。你可能想要什么

```
for (Map.Entry<String, List> entry1 : entry.getKey().getValue().entrySet()) 
```

而是做

```
for (Map.Entry<String, List> entry1 : entry.getValue().entrySet()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T23:50:46.140

如果您尝试遍历 type 的 map `Map<String, List>`，并且当您像这样使用时遇到**findbugs**问题：`myMap.keySet()`

```
 for (String keyValue : myMap.keySet()) {
        String key = keyValue;
        List objValue = myMap.get(key);
    } 
```

`myMap.entrySet()`然后尝试使用更推荐的方式遍历地图：

```
 for(Map.Entry<String, List> entry: myMap.entrySet()) {
        String key = entry.getKey();
        List objValue = entry.getValue();
    } 
```

所以在这种情况下嵌套 forloop 就像：

```
for (Map.Entry<String, Map<String, List>> entry:Map1.entrySet()) 
{
    String key=entry.getKey();
    System.out.println("Type : " +key);

    for (Map.Entry<String, List> entry1 : entry.getValue().entrySet())
    {
        System.out.println("Type : " + entry1.getKey());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:08:20.957

你应该使用....

```
for (Map.Entry<String, List> entry1 : entry.getKey().getValue().entrySet()) 
```

获取内部循环的条目。

# encoding - 如何停止理性团队音乐会（RTC）更改文件文本编码？

> ID：13522815
> 
> 赞同：6
> 
> 时间：2012-11-23T03:45:27.587
> 
> 标签：encoding, rtc, rational-team-concert

我需要将一些源代码从 ClearCase(CC) 集成到 RTC，但是一些 xml 文件在签入 RTC 后如何更改。这些文件包含与 CC 中的原始文件相同的内容，但结束编码已更改。例如，一个Unix编码的xml文件，在签入RTC后会变成Dos。

不知道会不会对项目造成影响，也许这个问题可以解决。但我更喜欢保留 CC 中的代码。有没有办法做到这一点？不知道在哪里配置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T06:22:10.550

正如[这个线程](https://jazz.net/forum/questions/65969/how-can-i-define-my-file-formats-outside-of-eclipse)中提到的，这是因为“ `.xml`”文件的属性[“ **`Line Delimiter`**”](http://pic.dhe.ibm.com/infocenter/clmhelp/v4r0/index.jsp?topic=/com.ibm.team.scm.doc/topics/c_lineterm.html)设置为“ **`Platform`**”。这是 RTC 默认设置。

> 受版本控制的文件的行分隔符是 RTC 存储库中的版本控制属性。
> 作为客户端配置的部分是指定第一次置于版本控制下的新文件的行分隔符应该是什么的规则。

所以问题是：您无法对所需的 eol 样式进行版本控制：这是由客户端定义的*本地*属性（此处为 Eclipse RTC GUI），由[File Property Wizard](http://pic.dhe.ibm.com/infocenter/clmhelp/v4r0/index.jsp?topic=/com.ibm.team.scm.doc/topics/t_scm_eclipse_lineterm_wiz.html)管理。

一般问题是：

*   [在 Eclipse 工作区之间同步首选项](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=127608)
*   [应该可以确保一致的 mime 类型和行结束规则应用于组件中的每个文件](https://jazz.net/jazz/web/projects/Rational%20Team%20Concert#action=com.ibm.team.workitem.viewWorkItem&id=139709)

* * *

[此处描述了](http://pic.dhe.ibm.com/infocenter/clmhelp/v4r0/index.jsp?topic=/com.ibm.team.scm.doc/topics/t_scm_eclipse_file_properties.html)这些设置：

### 程序

*   在 Eclipse 主菜单上，单击`Window`>`Preferences`并导航到`Team > Jazz source control`
*   在`File Properties`该页面上，您可以查看 Rational Team Concert 源代码控制当前如何将文件名后缀映射到 MIME 内容类型和行分隔符。
    您还可以更改这些映射并添加新映射。
    文件类型及其属性显示为分层列表。
    列表中项的属性由其子项继承。
    不显示继承的属性（表格单元格为空）。
    *   要更改行分隔符类型，请单击列表中的项目并从列表中选择一种类型。
    *   要为其添加新的文件扩展名和属性，请单击`Add File/Extension`。
    *   要删除现有映射，请单击它，然后单击删除。
*   单击`OK`以保存更改并退出。

# r - tseries: get.hist.quote() 给出错误的结果

> ID：13522817
> 
> 赞同：0
> 
> 时间：2012-11-23T03:46:05.567
> 
> 标签：r, time-series

根据以下代码，历史报价`ROG.VX`在所选时间段内是不变的。但是，在[http://finance.yahoo.com/q/hp?s=ROG.VX&a=08&b=09&c=2011&d=02&e=28&f=2012&g=d&z=66&y=132](http://finance.yahoo.com/q/hp?s=ROG.VX&a=08&b=09&c=2011&d=02&e=28&f=2012&g=d&z=66&y=132)可以检查它们不是（参见截屏）。怎么了？

```
require(tseries)
hq <- get.hist.quote(instrument="ROG.VX", start="2011-09-09", end="2012-03-28",
                     quote="Close", provider="yahoo", drop=TRUE)
plot(hq) # => constant
stopifnot(hq==138.3) # => constant 138.3 
```

![在此处输入图像描述](../Images/a3c77094b4390e12c0627b1b2a4056c9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T15:54:33.170

这是雅虎问题。

如果我们查看`get.hist.quote()`返回的信息，我们可以看到它通过 http 要求 yahoo 提供一个 csv。我们可以轻松地将相同的 URL 粘贴到浏览器中以下载 csv 并确认这些是 R 获得的数字。更改日期后，我们可以看到 ROG.VX 时间序列中的数据明显丢失，但比较时间序列 (IBM) 中没有：

```
> rog <- get.hist.quote(instrument="ROG.VX", start="2010-06-10", end="2012-03-28",
+                      provider="yahoo", drop=TRUE)
trying URL 'http://chart.yahoo.com/table.csv?s=ROG.VX&a=5&b=10&c=2010&d=2&e=28&f=2012&g=d&q=q&y=0&z=ROG.VX&x=.csv'
Content type 'text/csv' length unknown
opened URL
downloaded 6439 bytes

> ibm <- get.hist.quote(instrument="ibm", start="2010-06-10", end="2012-03-28",
+                      provider="yahoo", drop=TRUE)
trying URL 'http://chart.yahoo.com/table.csv?s=ibm&a=5&b=10&c=2010&d=2&e=28&f=2012&g=d&q=q&y=0&z=ibm&x=.csv'
Content type 'text/csv' length unknown
opened URL
downloaded 24 Kb

> test<-merge(ibm,rog)
> plot(test) 
```

![在此处输入图像描述](../Images/b919395b12f02a2058757a4980db776b.png)

# python - Python 类型系统 - 对象与类型

> ID：13522818
> 
> 赞同：8
> 
> 时间：2012-11-23T03:46:17.733
> 
> 标签：python, class, types, type-systems

我是 Python 新手。我熟悉 Java、C/C++ 和 OCaml。由于我在大学参加了编程语言课程，我了解了 Lambda 微积分和基本类型理论。

有了这个背景，我试图阅读这个 - [http://www.cafepy.com/article/python_types_and_objects/python_types_and_objects.html](http://www.cafepy.com/article/python_types_and_objects/python_types_and_objects.html)

在某个地方，他提到了这一点：

*   (type 'object') 是 (type 'type') 的一个实例
*   (type 'object') 是 no object 的子类。
*   (type 'type') 是它自己的一个实例。
*   (type'type') 是 (type'object') 的子类

我无法用我可怜的大脑来解决这个问题：

*   (type 'object') 是 (type 'type') 的一个实例
*   (type 'type') 是 (type 'object') 的子类

这里发生了什么哔哔声？我想听到的是关于这里到底发生了什么以及为什么事情是这样的非常深入的原因。请不要有肤浅的理由或类比。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:13:58.083

它专门谈论对象`type`。对于`type`，所有类型都继承自`<type 'type'>`。

我相信另一种说法只是指出这`<type 'type'>`是一个`object`; 我从进一步往下看的一个例子：

```
t = list.__class__ # <type 'type'>
t.__bases__ # (<type 'object'>,) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-13T15:46:50.093

因为类型的概念与类相同，所以您可以使用普通的面向对象技术和类语法对类型进行子类化来自定义它。

而且因为类实际上是类型类的实例，所以从类型的自定义子类创建类允许实现自定义种类的类。

在新式课程中：

*   type 是一个生成用户定义类的类。
*   元类是类型类的子类。
*   类对象是类型类或其子类的实例。
*   实例对象是从一个类生成的。

# php - 将数组从 .php 文件传递 到 .html 文件

> ID：13522825
> 
> 赞同：1
> 
> 时间：2012-11-23T03:47:16.950
> 
> 标签：php, ajax, json

如何将数组从 .php 文件传递​​到 .html 文件？

```
 <?php 
       $arr= array(
            "first_name" => "Darian",
            "last_name" => "Brown",
            "age" => "28",
            "email" => "darianbr@example.com"
    );
   ?> 
```

我有一个 .html 文件，我想将我的 .php 文件中的结果发送到 .html 文件以供进一步使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:50:09.427

HTML 本身不进行处理，也不能处理数组。

您有两个选择，如果是在页面创建时，插入一个`php`片段，该片段采用数组并生成适当的 HTML。

如果是在页面绘制完成之后，使用类似`jQuery`or的框架`JavaScript`从文件中获取数组`php`（在这种情况下了解一下`JSON`，这将有助于工作，请参阅[此处](http://ca3.php.net/json)的文档），然后相应地修改 DOM。

例如，如果您的脚本是通过`AJAX`(like `jQuery`) 访问的，您可以执行以下操作：

```
<?php 
    $list = array( array('user_1', 1, 'continue'),
        array('user_2', 2 , '
        array('user_1', 3 , 'finish') 
    ); 
    echo json_encode($list);    
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:54:50.163

您不能将数组结果包含在`html`文件中。这两个文件都必须是 php.ini 文件。[您可以在此处](http://www.terrawebdesign.com/multidimensional.php)找到有关将它们添加到 php 文件中的更多信息

# html - html页面结构

> ID：13522830
> 
> 赞同：0
> 
> 时间：2012-11-23T03:47:54.300
> 
> 标签：html, css

可以将html页面设计为

```
//some words for WWW
<html>
<body class="sss">
    //some words of WWW
    <html>
       <body class="sss">
       </body>
    </html>
</body>
</html> 
```

我的意思是页面中的嵌套html。这是我第一次看到它，我相信它永远不会有利，但是以这种方式设计页面有多大可能和有多糟糕？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T03:59:50.563

改为这样做：

```
<!-- some words for WWW -->
    <html>
      <head>
          ...
      </head>
      <body class="sss">
          <iframe src="http://www.yourwebsite.com">
      </body>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:05:26.403

如果您需要加载另一个 HTML 页面，请使用 iFrame。这违反了 www 标准

# java - 概率模拟误差不收敛

> ID：13522833
> 
> 赞同：11
> 
> 时间：2012-11-23T03:48:47.993
> 
> 标签：java, c++, algorithm, math, simulation

在一次采访中，我得到了以下问题，最初使用笔/纸解决，然后通过程序验证结果。

问题如下：

有 A、B 和 C 三个人。每个人能够分别以 6/7、4/5 和 3/4 的概率击中目标。如果他们每个人都开一枪，那么他们中恰好有两个人会击中目标的概率是多少？

答案是：

```
P(...) = P(A)*P(B)*(1-P(C)) +
         P(B)*P(C)*(1-P(A)) +
         P(C)*P(A)*(1-P(B))
       = 27.0/70.0
       = 38.57142857142857142857142857142857142857....% 
```

以下是我对该问题的解决方案：

```
#include <cstdio>
#include <cctype>
#include <ctime>
#include <random>

int main()
{
   std::mt19937 engine(time(0));

   engine.discard(10000000);

   std::uniform_real_distribution<double> uniform_real(0.0,1.0);

   double prA = (6.0 / 7.0);
   double prB = (4.0 / 5.0);
   double prC = (3.0 / 4.0);

   std::size_t trails = 4000000000;
   std::size_t total_success = 0;

   for (std::size_t i = 0; i < trails; ++i)
   {
      int current_success = 0;
      if (uniform_real(engine) < prA) ++current_success;
      if (uniform_real(engine) < prB) ++current_success;
      if (uniform_real(engine) < prC) ++current_success;

      if (current_success == 2)
         ++total_success;

      double prob = (total_success * 1.0) / (i+1);

      if ((i % 1000000) == 0)
      {
         printf("%05d Pr(...) = %12.10f  error:%15.13f\n",
                i,
                prob,
                std::abs((27.0/70.0) - prob));
      }
   }

   return 0;
} 
```

问题如下，无论我运行了多少次试验，概率均在大约 0.3857002101 左右。代码有问题吗？

采访者说，无论种子如何，在 100 万次试验中让结果收敛到小数点后 9 位精度是微不足道的。

关于我的代码中的错误在哪里的任何想法？

**更新 1：** 我已经使用以下生成器尝试了上面的代码，它们似乎都在大约同一时间大致试用 10^9。

1.  标准::mt19937_64
2.  std::ranlux48_base
3.  std::minstd_rand0

**更新2：** 考虑到这个问题，我已经走上了下面的路。比率 27/70 由 27 和 70 组成，它们都是互质的，并且 4x10^9 下的 70 因子大约是 57x10^6 或所有数字的 1.4%。因此，从 [0,4x10^9] 之间随机选择的两个数字中获得 27/70 的“精确”比率的概率大约为 1.4%（因为在 4x10^9 内有更多的 27 因子） - 所以得到确切的比率非常低，无论试验次数如何，这个数字都是恒定的。

现在，如果有人谈论厚边界 - 即：在 70 +/5 的因子范围内的数字，这会增加在 [0,4x10^9] 范围内随机选择一对数字的概率，这将给出在指定/相关公差范围内的比率大约为 14%，但使用这种技术，我们可以获得的最佳结果与精确值相比平均精确到大约 5 个小数位。这种推理方式正确吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T06:15:56.193

> 采访者说，无论种子如何，在 100 万次试验中让结果收敛到小数点后 9 位精度是微不足道的。

嗯，这显然很荒谬。通过一百万次试验，您无法在百万分之一内得到估计。如果总数与理论值仅相差一个，那么您将相差百万分之一，这比“小数点后九位”大一千倍。

顺便说一句，c++11 带有一个非常好的 uniform_int_distribution 函数，它实际上可以正确处理舍入：它将统一生成器的总范围划分为所需范围的精确倍数和余数，并丢弃在余数，因此生成的值不会因四舍五入而产生偏差。我对您的测试程序进行了轻微修改，它确实在十亿次试验中收敛到六位数，这与我的预期差不多：

```
int main() {
  std::mt19937 engine(time(0));

  std::uniform_int_distribution<int> a_distr(0,6);
  std::uniform_int_distribution<int> b_distr(0,4);
  std::uniform_int_distribution<int> c_distr(0,3);

  std::size_t trials = 4000000000;
  std::size_t total_success = 0;

  for (std::size_t i = 1; i <= trials; ++i) {
    int current_success = 0;
    if (a_distr(engine)) ++current_success;
    if (b_distr(engine)) ++current_success;
    if (c_distr(engine)) ++current_success;

    if (current_success == 2) ++total_success;

    if ((i % 1000000) == 0) {
      printf("%05d Pr(...) = %12.10f  error:%15.13f\n",
             i,
             double(total_success) / i,
             std::abs((27.0/70.0) - double(total_success) / i));
    }
  }
} 
```

返回0；

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T06:19:01.033

首先，一些初等数学表明，仅通过一百万次试验是不可能达到 9 位精度的。给定我们的概率是`27/70`，我们可以计算出`x/1000000 = 27/70`哪个给出`x = 385714.28571`。如果我们有一个非常、非常准确的均匀随机数生成器，它准确地生成了 385714 次正确的试验，这会给我们带来大约`abs(385714/1000000 - 0.38571428571428573) = 2.857142857304318e-07`9 位精度的误差。

我不认为你的分析是正确的。给定一个非常准确的分布，当然有可能获得所需的精度。但是，分布均匀性的任何偏斜都会严重影响精度。如果我们进行 10 亿次试验，我们可以期望的最佳精度大约是`2.85 * 10^-10`. 如果分布偏斜 100，这将被击倒到大约`1 * 10^-7`. 我不确定大多数 PRNG 分布的准确性，但问题在于有一个在这种程度上是准确的。快速玩一下`std::uniform_real_distribution<double>(0.0, 1.0)`，看起来肯定会有比这更多的变化。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-23T08:25:41.417

蒙特卡洛方法趋向于缓慢收敛 --- 在 n 次模拟后您期望的误差与 1/sqrt(n) 成正比。实际上，经过 10^9 次试验后，五位数的准确度似乎是正确的。这里没有数字巫术。

如果面试官像你一样谈论直接的蒙特卡洛抽样，那么……经过一百万次试验后，他能获得九位数的准确度是……难以置信的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-23T11:23:35.010

因为概率是以有理数形式给出的（分母中有小整数），所以您可以将可能的情况视为尺寸为 7x5x4 的立方体（这使得 140（分母的乘积）子立方体）。您可以按如下方式显式访问每个子立方体，并在 140 次迭代中获得确切的数字，而不是随机跳来跳去：

```
#include <cstdio>
#include <cctype>
#include <ctime>
#include <random>

int main()
{
  std::size_t total_success = 0, num_trials = 0;

  for (unsigned a = 1; a <= 7; ++a)
  {
    unsigned success_a = 0;

    if (a <= 6)
      // a hits 6 out of 7 times
      success_a = 1;

    for (unsigned b = 1; b <= 5; ++b)
    {
      unsigned success_b = 0;

      if (b <= 4)
        // b hits 4 out of 5 times
        success_b = 1;

        for (unsigned c = 1; c <= 4; ++c)
        {
          unsigned success_c = 0;

          // c hits 3 out of 4 times
          if (c <= 3)
            success_c = 1;

          // count cases where exactly two of them hit
          if (success_a + success_b + success_c == 2)
            ++total_success;

          ++num_trials;

        } // loop over c
    } // loop over b
  } // loop over a

  double prob = (total_success * 1.0) / num_trials;

  printf("Pr(...) = %12.10f  error:%15.13f\n",
         prob,
         std::abs((27.0/70.0) - prob));

   return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T06:21:21.517

FWIW 以下 Java 似乎以您预期的速度收敛于上面的预测答案（它计算最坏情况错误的标准偏差）

```
import java.util.Random;
import java.security.SecureRandom;
/** from question in Stack Overflow */
public class SoProb
{
  public static void main(String[] s)
  {
    long seed = 42;

/*
In an interview, I was given the following problem to solve initially using pen/paper, then via a program to verify the result.

The question is as follows:

There are three people A,B and C. Each person is capable of hitting a target with a probability of 6/7, 4/5 and 3/4 respectively. What is the probability that if they were to each fire one shot that exactly two of them will hit the target?

The answer is:

P(...) = P(A)*P(B)*(1-P(C)) +
         P(B)*P(C)*(1-P(A)) +
         P(C)*P(A)*(1-P(B))
       = 27.0/70.0
       = 38.57142857142857142857142857142857142857....%

Below is my solution to the problem:
*/

/*
int main()
{
   std::mt19937 engine(time(0));
*/

   Random r = new Random(seed);
   // Random r = new SecureRandom(new byte[] {(byte)seed});
   // std::uniform_real_distribution<double> uniform_real(0.0,1.0);

   double prA = (6.0 / 7.0);
   double prB = (4.0 / 5.0);
   double prC = (3.0 / 4.0);
   // double prB = (6.0 / 7.0);
   // double prC = (4.0 / 5.0);
   // double prA = (3.0 / 4.0);

   double pp = prA*prB*(1-prC) +
         prB*prC*(1-prA) +
         prC*prA*(1-prB);
   System.out.println("Pp " + pp);
   System.out.println("2870 " + (27.0 / 70.0));

   // std::size_t trails = 4000000000;
   int trails = Integer.MAX_VALUE;
   // std::size_t total_success = 0;
   int total_success = 0;

   int aCount = 0;
   int bCount = 0;
   int cCount = 0;

   int pat3 = 0; // A, B
   int pat5 = 0; // A, C
   int pat6 = 0; // B, C
   double pat3Prob = prA * prB * (1.0 - prC);
   double pat5Prob = prA * prC * (1.0 - prB);
   double pat6Prob = prC * prB * (1.0 - prA);
   System.out.println("Total pats " + 
     (pat3Prob + pat5Prob + pat6Prob));

   for (int i = 0; i < trails; ++i)
   {
      int current_success = 0;
      // if (uniform_real(engine) < prA) ++current_success;
      int pat = 0;
      if (r.nextDouble() < prA) 
      {
        ++current_success;
        aCount++;
        pat += 1;
      }
      // if (uniform_real(engine) < prB) ++current_success;
      if (r.nextDouble() < prB) 
      {
        ++current_success;
        bCount++;
        pat += 2;
      }
      // if (uniform_real(engine) < prC) ++current_success;
      if (r.nextDouble() < prC) 
      {
        ++current_success;
        cCount++;
        pat += 4;
      }
      switch (pat)
      {
        case 3:
          pat3++;
          break;
        case 5:
          pat5++;
          break;
        case 6:
          pat6++;
          break;
      }

      if (current_success == 2)
         ++total_success;

      double prob = (total_success + 1.0) / (i+2);

      if ((i % 1000000) == 0)
      {
         /*
         printf("%05d Pr(...) = %12.10f  error:%15.13f\n",
                i,
                prob,
                std::abs((27.0/70.0) - prob));
         */
         System.out.println(i + "P rob = " + prob +
           " error " +  Math.abs((27.0 / 70.0) - prob));
         Double maxVar = 0.25 / i;
         System.out.println("Max stddev " + Math.sqrt(maxVar));
         double ap = (aCount + 1.0) / (i + 2.0);
         double bp = (bCount + 1.0) / (i + 2.0);
         double cp = (cCount + 1.0) / (i + 2.0);
         System.out.println("A error " + (ap - prA));
         System.out.println("B error " + (bp - prB));
         System.out.println("C error " + (cp - prC));
         double p3Prob = (pat3 + 1.0) / (i + 2.0);
         double p5Prob = (pat5 + 1.0) / (i + 2.0);
         double p6Prob = (pat6 + 1.0) / (i + 2.0);
         System.out.println("P3 error " + (p3Prob - pat3Prob));
         System.out.println("P5 error " + (p5Prob - pat5Prob));
         System.out.println("P6 error " + (p6Prob - pat6Prob));
         System.out.println("Pats " + (pat3 + pat5 + pat6) +
           " success " + total_success);
      }
   }

  }

} 
```

电流输出：

1099000000P rob = 0.3857148864682168 错误 6.00753931045972E-7

最大标准差 1.508242443516904E-5

错误-2.2208501193610175E-6

B 错误 1.4871155568862982E-5

C 错误 1.0978161945063292E-6

P3 错误 -1.4134927830977695E-7

P5 错误 -5.363291293969397E-6

P6 错误 6.1072143395513034E-6

拍拍 423900660 成功 423900660

# vb.net - 显示一个数字，转换数字，然后将结果显示为特殊字符的数量 VB.Net

> ID：13522834
> 
> 赞同：0
> 
> 时间：2012-11-23T03:49:00.990
> 
> 标签：vb.net, .net-4.0

大家好： 我在 VB.Net 上很年轻，我很难理解转换数字的逻辑，然后将该数字转换为等于该数字的字符串。

例子：

```
     输入 = 1；使用 * 输出为字符串是：*（4 个星号等）
     输入 = 3; 使用 # 输出为字符串是：###（等等）。  
```

教授给我们这个任务是从用户那里获取销售额，然后显示一种带有信息的条形图。* = 100 美元。因此，600 美元将等于******。我可以获得信息，但我不知道如何转换它。希望我把这个问题说得很清楚！这就是我正在做的事情......已经有一个获取信息的循环：

```
' The variables
    Dim dblValueA, dblSales, dblTotal As Double
    Dim dblValueB As Double = 1
    Dim strInput, strChgVal As String
    Dim strSymbol As String = "*"
    Dim strOutput As String
    ' get some input via a loop structure:
    Try

    For intCount As Integer = 1 to 5    ' Sales/Input for 5 Stores
    strInput = InputBox("place input here:")
        dblSales = CInt(strInput)
            dblTotal = dblSales
            dblValueA = (dblTotal/dblValueB)
            strChgVal = Cstr(dblValueA)
            strOutput = strChgVal
            strSymbol = strOutput

            lstOutput.Items.Add(dblValueA.ToString)

    Next
    Catch ex As Exception

    End Try 
```

它有效，我只是迷失了如何将我的输出显示为实际的输入数量。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T21:38:54.227

像这样：

```
strSymbol = New String("*"c, CInt(dblValueA)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T21:57:30.447

我真的很喜欢使用字符串构造函数重载，正如@David[的回答](https://stackoverflow.com/a/13593559/3043)中所建议的那样。但是，根据我的评论，我将添加如下代码：

```
Public Function ToTextBars(ByVal input As Decimal, ByVal marginalValue As Decimal, ByVal BarCharacter As Char) As String
    'Always use a Decimal, not Double or Integer, when working with money

    Return New String(BarCharacter, CInt(CDec(dblValueA)/marginalValue))
End Function 
```

它仍然是单线 :) 然后这样称呼它：

```
Console.WriteLine(ToTextBars(600d, 100d, "*"c)) 
```

或像这样：

```
Dim result As String = ToTextBars(3d, 1d, "#"c) 
```

结果将是：

```
******
```

但是，我怀疑在这里写一个循环是作业目标的一部分。使用字符串重载会错过重点。在这种情况下，我会这样写：

```
Public Function ToTextBars(ByVal input As Decimal, ByVal marginalValue As Decimal, ByVal BarCharacter As Char) As String
    If input < 0 Then input *= -1
    Dim charCount As Integer = 0

    While input > 0
         charCount += 1
         input -= marginalValue            
    End While

    Return New String(BarCharacter, charCount)
End While 
```

您可以以与第一个相同的方式调用此函数。这仍然使用字符串构造函数重载，但它并没有避免我希望您的教授希望您编写的循环。

这里还有一点风格。你是从哪里养成`str`和`dbl`前缀的习惯的？你的教授教过你吗？这曾经在 vb6 时代很流行，它是 .Net 之前的前辈。现在，这不再被认为是有用的，Microsoft 自己的样式指南特别建议不要使用这些前缀。如果您的教授不相信您，请将他指向此链接：

> [http://msdn.microsoft.com/en-us/library/ms229045.aspx](http://msdn.microsoft.com/en-us/library/ms229045.aspx)

# javascript - 在不加载页面的情况下动态附加值

> ID：13522837
> 
> 赞同：0
> 
> 时间：2012-11-23T03:49:29.683
> 
> 标签：javascript, jquery, ajax, expressionengine

**我想通过在不重新加载页面**的情况下附加两个不同的值来创建一个变量值

 **代码：

```
{exp:safecracker channel="blending_log"  return="sthome/blending/ENTRY_ID"}
<h3>Select and enter data</h3>

{!--------Receive data to create value--------}
<input type="hidden" name="title" value="" />
<br /><br />
Organic Or Conventional:
{field:org_con}

Agent Number:
{field:agent_number}

{!-----END Receive data to create lot number-------} 
```

字段类型有机或常规是一个选择框。用户可以选择 O（有机）或 C（常规）代理编号是一个文本字段，用户输入类似 018 的内容。一旦用户从有机或传统中选择 O 或 C 并输入代理编号，它应该在隐藏字段中附加值。

例如：

```
<input type="hidden" name="title" value="O018" /> 
```

或者

```
<input type="hidden" name="title" value="C018" /> 
```

**这应该在没有页面重新加载的情况下发生**

我用谷歌搜索并尝试了一些 JavaScript 和 Ajax 代码。但从不工作。抱歉，我是 JavaScript 和 Ajax 新手。

请提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:56:55.240

```
<input type="hidden" name="title" value="C018" id="newVal"/> 
```

这可以用来设置值

```
document.getElementById("newVal").value="newValue"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:04:20.413

给隐藏字段一个 ID 例如：

```
<input type="hidden" name="title" value="" id="hiddenField"/> 
```

那么我会假设您希望隐藏字段的值在他们填写数字之后（尽管您可以在将值添加到隐藏字段之前检查两者是否都已填写）

```
**jQuery**
$('#Id_of_agent_number_HTMLElement').change(function () {
    $('#hiddenField').val($('#Id_of_org_con_HTMLElement').val() + $(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T13:20:08.097

最简单的解决方案是使用[SafeCracker 的 dynamic_title 参数](http://expressionengine.com/user_guide/modules/safecracker/index.html#dynamic-title)：

```
{exp:safecracker channel="blending_log" return="sthome/blending/ENTRY_ID" dynamic_title="[org_con][agent_number]"} 
```

然后，您可以删除隐藏的“标题”输入。**

# jquery - jQuery Droppable 获取上面项目的 id

> ID：13522846
> 
> 赞同：0
> 
> 时间：2012-11-23T03:50:17.220
> 
> 标签：jquery, droppable

我正在寻求帮助，请`id`使用 jQuery 可拖放和可拖放来获取已放置的容器。我只有两个带有列表项的 UL，我从列表 1 拖动到列表 2。我需要获取`id`列表 2 中已删除项目上方的项目。

它没有得到`$(this).attr("id")`，因为根据基本的 jQuery 示例，两个列表都被标记为可排序。我想这样做的原因是每个列表项都有一个顺序，当我删除一个项目时，我想设置它上面的一个和下面的一个之间的顺序，这样当从数据库重新加载时，它会按照以下顺序显示该项目被放入。因此，如果我得到它上面的项目，我将能够获得要添加的订单。

没有包含代码，因为它与从一个列表拖动到另一个列表的标准 jQuery 示例代码相同。

任何帮助，将不胜感激

这是放置点的代码

```
 $("#sortable1").sortable({
        dropOnEmpty: true,
        connectWith: ".connectedSortable",
        receive: function (event, ui) {
              var itemId = ui.item.attr('id');
              var droppableId = $(this).attr("id");
              alert(droppableId);

              //--Get DOM value
              $.getJSON('/Dom/_ElementDetail/' + itemId, function (data) {
                  //--Save to new table
              var name = data[0].Name;
              var code = data[0].DomDetail;
              var matterId = localStorage['MatterId'];
              var stepId = localStorage['StepId'];
              $.ajax({
                  type: 'post',
                  url: '/DOM/AddElementMaster',
                  data: { name: name, code: code, matterId: matterId, stepId: stepId }
              });

        });
      }

    }).disableSelection(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:08:23.573

[在这里](http://api.jqueryui.com/droppable/#event-drop)检查

据我了解，您设置了一个活动`drop`或`over`这样的活动：

```
$( "#droppable" ).droppable({
    drop: function() {
        console.log($(this));
    }
}); 
```

但如文档中所述，您应该使用

```
$( "#droppable" ).droppable({
    drop: function( event, ui ) {
          console.log(ui.draggable.attr('id'));
    }
}); 
```

`over`事件 相同

* * *

当您使用 sortable 时，可以通过以下方式获取有关拖动操作的信息：

```
$(".sortable").sortable({
    receive: function(event, ui) {
        var sender_id = ui.sender.attr('id'),
            receiver_id = $(this).attr('id'),
            item_id = ui.item.attr('id'),
            above_id = ui.item.prev().attr('id'),
            below_id = ui.item.next().attr('id');

        console.log("The item '" + item_id 
                    + "' was dragged from " + sender_id 
                    + "to '" + receiver_id 
                    + "'" + (above_id ? " below of '" + above_id + "', " : "") 
                    + (below_id ? " above of '" + below_id + "'" : "")
                   );
    },
    connectWith: ".sortable"
});​ 
```

[样本](http://jsfiddle.net/oceog/CfkXN/)

# sql - 在 plpgsql 中，如何使用可变数量的标识符创建和执行命令字符串？

> ID：13522847
> 
> 赞同：3
> 
> 时间：2012-11-23T03:50:17.933
> 
> 标签：sql, postgresql, dynamic, plpgsql, variadic

在 postgres 9.1 中，我想创建一个函数，它接受一个索引名称、一个表名称和可变数量的列，构造一个索引，然后做一些其他的事情。

我目前的方法是使用 plpgsql 并构造一个动态命令来执行。`quote_ident`但是，当我试图用来保护所有标识符时，我被绊倒了。到目前为止的代码：

```
CREATE OR REPLACE FUNCTION my_create_index(indexname text, tablename text, VARIADIC arr text[]) RETURNS void AS $$
  DECLARE
    command_string text;
  BEGIN
    command_string := 'CREATE INDEX ' || quote_ident(indexname) || ' ON ' ||
         quote_ident(tablename) || ' (' ||
         format(repeat('%I ', array_length($3, 1)), VARIADIC $3) ||
         ')';

    -- display the string
    RAISE NOTICE '%', command_string;

    -- execute the string
    EXECUTE command_string;

    -- (do other stuff)
  END;
$$ LANGUAGE plpgsql; 
```

传递一个列名时，代码似乎是成功的，但有两个或更多时，我收到以下错误：

```
ERROR:  too few arguments for format 
```

我究竟做错了什么？（大概是`format`我使用或使用的东西`VARIADIC`。）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T05:12:36.080

您通常不会同时使用`format`和`quote_ident`。`format`足够聪明，可以做 identifer 引用它的自我；您在表达的一部分中展示了自己，同时在`quote_ident`其他地方使用了不必要的连接和调用。

但是，我看到`format`与使用`VARIADIC`数组参数调用相同的问题，我怀疑您发现了一个错误。

这是一个解决方法，直到我发现发生了什么：

```
command_string := format('CREATE INDEX %I ON %I (%s)', 
    indexname, tablename, (
      SELECT string_agg(quote_ident(x), ', ') 
      FROM unnest($3) x
    )
); 
```

请注意，在您的原始代码中，`'%I '`应该是`'%I, '`.

是的，错误已确认，并且[之前已报告过，](http://archives.postgresql.org/pgsql-bugs/2012-09/msg00011.php)但看起来从未被检查过。`concat`和中存在相同的错误`concat_ws`。这些函数无法检查`VARIADIC`参数标志。

观察：

```
regress=> SELECT format('%I', VARIADIC ARRAY['b','c','d']);
  format   
-----------
 "{b,c,d}"
(1 row)

regress=> SELECT format('%I', 'b','c','d');
 format 
--------
 b
(1 row)

regress=> SELECT format('%I, %I, %I', VARIADIC ARRAY['b','c','d']);
ERROR:  too few arguments for format 
```

我能想到的唯一解决方法是避免使用它们（如上所示）或使用`EXECUTE`动态构造函数调用。在这种情况下`format`完全是多余的，所以我只需将上面的子查询与`unnest`.

我会尝试在 PostgreSQL 邮件列表中追查这个问题，但是下周我会忙得不可开交，所以如果你没有看到这个问题，请戳我或在 pgsql-bugs 上发帖，并自行返回这个问题的链接下周中的后续行动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T10:06:20.403

您现在不能在格式函数中使用 VARIADIC 参数 :(。这是一个已知错误，将在 PostgreSQL 9.3 中修复（我希望）。您可以尝试使用补丁[http://archives.postgresql.org/message-id/ CAFj8pRDZc7wG1ewnmqUWkjDsB78Pu=Oj_WZ8_CS7qJUCKRUNmQ@mail.gmail.com](http://archives.postgresql.org/message-id/CAFj8pRDZc7wG1ewnmqUWkjDsB78Pu=Oj_WZ8_CS7qJUCKRUNmQ@mail.gmail.com)

# javascript - 如何避免handlebars.js中的冲突

> ID：13522849
> 
> 赞同：1
> 
> 时间：2012-11-23T03:50:39.373
> 
> 标签：javascript, templates, conflict, handlebars.js

handlebars.js 有一个强大的功能，就是 registerHelper。当不同的人在一个页面中一起使用时，如何避免功能冲突？

```
eg

steve:

 Handlebars.registerHelper('getHeight', function(obj) {
      return obj.pic_height / obj.pic_width * 200 || 130;
  });

jobs:

 Handlebars.registerHelper('getHeight', function(obj) {
      return 120;
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:35:18.943

[`registerHelper`实现](https://github.com/wycats/handlebars.js/blob/master/lib/handlebars/base.js#L13)非常简单：

```
Handlebars.registerHelper = function(name, fn, inverse) {
  if(inverse) { fn.not = inverse; }
  this.helpers[name] = fn;
}; 
```

没有检查是否已经定义了助手，助手只是简单地写入`Handlebars.helpers`对象，就是这样。

不过，没有什么能阻止您添加自己的`registerHelper`抱怨版本。你可以这样做：

```
Handlebars.paranoidRegisterHelper = function(name, fn, inverse) {
    if(name in this.helpers)
        throw 'Someone is trying to redefine the ' + name + ' helper';
    this.registerHelper(name, fn, inverse);
}; 
```

然后使用`paranoidRegisterHelper`相同的助手名称两次会引发异常。

演示：http: [//jsfiddle.net/ambiguous/3Knj3/](http://jsfiddle.net/ambiguous/3Knj3/)

如果您想继续`registerHelper`用作名称，那么在猴子修补它之前只需安全地引用它：

```
var registerHelper = Handlebars.registerHelper;
Handlebars.registerHelper = function(name, fn, inverse) {
    if(name in this.helpers)
        throw 'Someone is trying to redefine the ' + name + ' helper';
    registerHelper.apply(this, arguments);
}; 
```

演示：http: [//jsfiddle.net/ambiguous/hUu2r/](http://jsfiddle.net/ambiguous/hUu2r/)

# c++ - 从 float C++ 中删除与 int32_t 转换相关的警告消息

> ID：13522852
> 
> 赞同：1
> 
> 时间：2012-11-23T03:51:25.377
> 
> 标签：c++, compilation

我已经掌握了一些 C++ 游戏源，我对 C++ 还很陌生，并且我已经成功编译了源并且它似乎工作正常，但是有一些我无法解决的烦人的警告。

我的 C++ 编程技能非常基础，我对这些模板变量的东西有很大的问题。尤其是这个名为 int32_t 的模块化模板，它似乎在我的源代码中几乎无处不在。

我在 int32_t 上阅读的文档对新手并不友好，它们非常正式，对于那些不知道如何使用它的人来说真的很难理解。（嗯，我觉得我实际上可能看错了地方）。

**重点：**

这是我遇到问题的功能：

```
int32_t Weapons::getMaxMeleeWeaponDamage(int32_t attackSkill, int32_t attackValue, float attackFactor)
{
    return ((int32_t)std::ceil(((attackValue * 0.05) * attackSkill) + (attackValue)) / attackFactor);
} 
```

**给出的警告：**

170 C:\compiling\GameSources\weapons.cpp [警告] 转换为`int32_t' from`浮点数'

线索是，我确实希望它在计算时考虑到浮点数，并返回一个 int 值。（所以伤害计算是准确的，但是游戏客户端上的伤害显示返回的是伤害的整数表示）。

据我所知，这个警告只是告诉我我想听什么。但是我怎样才能摆脱这个警告呢？（除了告诉我的编译器忽略警告之外，我不希望这样）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:19:34.887

您正在将 ceil 的返回值转换为 int。然后你将结果除以一个浮点数。你现在拥有的，你返回的值，是一个浮点数。然后编译必须将其转换为 int。这是编译器抱怨的后一种转换。

我会说你放错了类型转换。

作为样式问题，我建议您使用 C++ 转换而不是旧的 C 样式转换。

# ruby-on-rails-3 - 如何在 Rails 中获取具有折叠功能的树视图

> ID：13522856
> 
> 赞同：1
> 
> 时间：2012-11-23T03:51:41.493
> 
> 标签：ruby-on-rails-3, treeview, ancestry

我使用'ancestry' gem 渲染了树视图，它工作正常。如何获得像 jquery-treeview 这样的树折叠/展开功能？

# c++ - 使用不同的编译器输入到 char* 的奇怪输出

> ID：13522857
> 
> 赞同：2
> 
> 时间：2012-11-23T03:51:45.913
> 
> 标签：c++, compiler-construction

我已经在 char* 中声明并初始化了一个字符串，如下所示：

```
int length;
cout<<"Enter string length: ";
cin>>length;
char* str = new char[length];
cout<<"Enter your string here:"; 
for(int i = 0;i < length;i++)
cin>>str[i];
cout<<str<<endl; 
```

使用 DevC++ 编译，它给了我我在那里输入的内容，但在 Visual C++ 中，它打印出最后带有一些随机字符的字符串。例如；我输入“hello”Visual C++ 给我：“hello ^^&* *(Y* &”。有人可以向我解释为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T03:55:05.403

你不是 null 终止字符串。您需要分配一个 char 数组，`length + 1`以便为​​字符串末尾的空字符留出空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T03:57:04.537

您在字符串末尾缺少一个空终止符。我猜非 VC++ 编译器会以某种方式处理它，但在 VC++ 中，您必须分配长度 + 1 个字符，然后将最后一个字符设置为 '\0'。例子：

```
char* str = new char[length + 1];

cout << "Enter your string here:"; 
for (int i = 0; i < length; i++)
    cin >> str[i];

str[length] = '\0'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T03:56:16.720

你永远不会终止你的字符串。放`str[length-1] = '\0';`.

或者，更好的是，您应该分配`new char[length+1];`.

恕我直言...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T03:56:37.220

改变这个

```
for(int i = 0;i < length;i++)
    cin>>str[i]; 
```

到

```
cin>>str; 
```

不需要`for`循环。您可以将字符串作为一个整体而不是逐个字符读取。

或者，如果您想逐个字符地读取它，则需要 a`\0`来标记字符串的结尾，因为`cout`假定字符串以 a 结尾`\0`。

所以本质上，你需要

```
for(int i = 0;i < (length - 1);i++)
    cin>>str[i];

str[i] = '\0'. 
```

您阅读`length -1`chars 并以`\0`.

# c++ - 如何创建一个类对象数组，其构造函数需要很少的参数？

> ID：13522862
> 
> 赞同：7
> 
> 时间：2012-11-23T03:52:54.870
> 
> 标签：c++, arrays, class, parameters, constructor

我已经阅读了解决方案`const A a[3] = { {0,0}, {1,1}, {2,2} },`，但在我的程序`const`中无法使用：

```
class Paper: public PaperQueue{  
  ...
  protected:
    typedef int (Utils::*funcPtr) (int, int); //I use external function there
    funcPtr p;                               
    Utils* fptr; 
  public:
    int pricefunc(){     
      addprice = (fptr->*p) (t,price);
    }

    Paper(int n, unsigned int pr):PaperQueue(n){         
       ...
       p=&Utils::commonpricefunc;    
    }
    void Put(int a){ 
       ...
    }
  ...
}    

class Bank{ 
  ...
  void Buy(Paper &p){
   (/*this function modifies many parameters in 'p'*/)
  ...
  }
  ...
}

int main(){
Bank B;    
int pn=5;
/* ? */ const Paper p[pn] = {{5,15},{5,15},{5,15},{5,15},{5,15}}; /* ? */
int paperloop=0;
...
p[paperloop].Put(p[paperloop].addprice);
B.Buy(p[paperloop]);
... 
```

这给了我很多错误（使用pricefunc（），Put（），Buy（），...），或者只是“可变大小的对象'p'可能未初始化”。有没有办法让这个数组工作？（如果不将任何参数传递给构造函数，一切正常！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:54:10.207

您不能对类（非 POD）使用初始化列表，因为这会绕过对构造函数的调用。您必须通过以下方式将其更改为 POD 或使用 std::vector：

如果该类是可复制的，那么您可以创建一个 std::vector 并用您想要的值填充它：

```
const vector<Paper> papers(5, Paper(5, 15)); 
```

如果你想用不同的值初始化它，你可以使用一个初始化列表，但这仅在 C++11 中支持：

```
const vector<Paper> papers = {Paper(1, 1), Paper(2, 2)}; 
```

如果没有 C++11，您将不得不一个一个地添加元素，但是您不能将向量设为 const：

```
vector<Paper> papers;
papers.push_back(Paper(1, 1));
papers.push_back(Paper(2, 2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:35:50.807

请检查下面的代码，它可以编译：

```
class Paper {
public:
    int x, y;
}; 

int main() {
    Paper p[5] = {{5,15}, {5,15}, {5,15}, {5,15}, {5,15}};
} 
```

请参考[这篇文章](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvc/thread/c27d0262-dae0-4f7b-8876-1bf6fd167d26)了解更多详细信息，我认为它解释得很好

# ios - iPad应用程序内的教程

> ID：13522863
> 
> 赞同：0
> 
> 时间：2012-11-23T03:53:03.760
> 
> 标签：ios, ipad

我需要一些建议来在我的 iPad 应用程序中实施应用程序教程。它提供了有关应用程序的基本知识，无需培训即可使用。

*   我想制作一个小视频并将其添加到应用程序包中，当用户点击演示时，他可以看到相关视频。但它觉得这可能会影响应用程序的性能，因为我的应用程序已经有很多数据。
*   在设置中添加演示按钮。当它打开时，我们会调用按钮的功能，并显示一个解释按钮性质的弹出窗口。示例：一个用于打开视图的按钮，当打开演示按钮时，它将显示一个弹出窗口，其中详细说明了点击它时的作用。

以上是我要实施的想法。你能建议任何更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:18:48.507

您提出了相当广泛的问题，这完全取决于您的应用程序设计和用户体验。

我见过的大多数应用程序都使用图像/向导向用户介绍它们的功能。例如，在我所做的一项工作中，当用户第一次运行该应用程序时，会弹出教程屏幕，其中包含所有屏幕的图像以及所有工具的所有详细信息，并添加了所有这些图像进入与分页器控件水平对齐的滚动视图，允许用户逐页查看所有屏幕。

要了解我在说什么，您可以查看本教程[UIScrollview with PageControl](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:15:56.790

您可以在应用程序的设置区域中禁用或启用屏幕提示吗？

# winforms - 如何在 XtraGrid 上通过边框突出显示焦点行

> ID：13522867
> 
> 赞同：0
> 
> 时间：2012-11-23T03:53:15.713
> 
> 标签：winforms, focus, devexpress, highlighting, xtragrid

目前，我可以通过更改 RowStyle 事件中的背景外观颜色来突出显示焦点行。但它不提供更改该行的边框。

我尝试覆盖**XPaint**的 DrawFocusRectangle，但如果网格没有聚焦，它不会显示。

有人给我另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T03:59:36.537

您需要使用[CustomDrawCell](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraGridViewsGridGridView_CustomDrawCelltopic)事件并绘制行边框。

[如何通过处理 Paint 事件绘制粗单元格边框](http://www.devexpress.com/Support/Center/p/E2732.aspx)

如果您想实现类似 excel 的选择功能，paint 事件将为您提供更好的结果 - [http://www.devexpress.com/Support/Center/p/Q202033.aspx](http://www.devexpress.com/Support/Center/p/Q202033.aspx)

# android - 优化listview性能Android

> ID：13522874
> 
> 赞同：5
> 
> 时间：2012-11-23T03:54:19.373
> 
> 标签：android, android-listview

我有一个 listView（垂直），每个列表项都有一个水平列表视图（水平）。

**但问题是当我在行中滚动水平滚动视图时，垂直列表也在调用 getView()...**

所以，有一个巨大的性能影响.. 所以，谁能告诉我一个更好的解决方案..

```
 public class GridViewAdapter extends BaseAdapter {

    List<List<Hotel>> gridDatasource;
    Context mContext;

    public GridViewAdapter(List<List<Hotel>> gridDatasource, Context context) {
        this.gridDatasource = gridDatasource;
        this.mContext = context;
    }

    public void setGridDatasource(List<List<Hotel>> gridDatasource) {
        this.gridDatasource = gridDatasource;
    }

    @Override
    public int getCount() {
        if (gridDatasource == null) {
            return 0;
        }
        return gridDatasource.size();
    }

    @Override
    public Object getItem(int position) {
        return gridDatasource.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        GridViewHolder holder;
        if (convertView == null) {
            LayoutInflater inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.gridview_table_cell,
                    null);

            holder = new GridViewHolder();
            holder.headerView = (TextView) convertView
                    .findViewById(R.id.gridViewRowHeader);
            holder.listView = (HorizontalListView) convertView
                    .findViewById(R.id.gridViewHorizontalListView);
            convertView.setTag(holder);
        } else {
            holder = (GridViewHolder) convertView.getTag();
            Log.d("TAG", "Reaching Here");
        }
        holder.headerView.setText("Hello From Sandeep");
        HorizontalListViewAdapter adapter = new HorizontalListViewAdapter(
                mContext, gridDatasource.get(position));
        holder.listView.setAdapter(adapter);
        return convertView;
    }

}

static class GridViewHolder {
    TextView headerView;
    HorizontalListView listView;
}

public class HorizontalListViewAdapter extends BaseAdapter {
    Context mContext;
    List<Hotel> mHotels;

    public HorizontalListViewAdapter(Context context, List<Hotel> hotels) {
        this.mContext = context;
        this.mHotels = hotels;
    }

    @Override
    public int getCount() {
        if (mHotels == null) {
            return 0;
        }
        return mHotels.size();
    }

    @Override
    public Object getItem(int position) {
        return mHotels.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        HotelCell cell = (HotelCell) convertView;
        if (cell == null) {
            cell = new HotelCell(mContext);
        } else {
            Log.d("TAG", "Reached here 2");
        }
        cell.setHotel(mHotels.get(position));
        cell.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(mContext,
                        HotelDetailActivity.class);
                intent.putExtra("DATA", ((HotelCell) v).getHotel());
                startActivity(intent);
            }
        });
        cell.setPadding(0, 0, 10, 0);
        return cell;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:35:16.757

亲爱的我建议试试我的这个代码

```
public View getView(final int position, View convertView, ViewGroup parent) 
    {
         View v = convertView;
         ViewHolder holder;

         if (v == null) 
         {
             v = inflater.inflate(R.layout.custom_image_layout, null);
             holder = new ViewHolder();
             holder.txtFileName = (TextView) v.findViewById(R.id.txtFileName);
             holder.imageView = (ImageView) v.findViewById(R.id.imgView);
             v.setTag(holder);
         } else 
         {
             holder = (ViewHolder) v.getTag();
         }
holder.imageView.setImageBitmap(bm);
holder.txtFileName.setText(""+nameoffile);
return v;
    }
    static class ViewHolder 
    {
         public ImageView imageView;
         public TextView txtFileName;
    } 
```

使用持有人类

# c# - 正则表达式匹配一组重复的可能字符

> ID：13522875
> 
> 赞同：1
> 
> 时间：2012-11-23T03:54:29.857
> 
> 标签：c#, regex, text

我正在编写一个采用以下形式的短文本令牌替换系统：

```
$varName(opt1|opt2|opt3) 
```

它旨在根据任意值轻松交换事物，如下所示：

```
$gender(he|she) 
```

我认为获取和处理这些的最佳方法是匹配模式的正则表达式，但我无法弄清楚如何识别括号之间的选项，因为它们可以重复任意次数并且可能没有那么多管道字符选项。

有什么帮助吗？

（我使用 C# 作为正则表达式主机）

编辑：

我试过这个，但它似乎只适用于有 2 个选项的东西

```
\$[a-zA-Z]+\(([a-zA-Z]+\|)+[a-zA-Z]+\) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:36:34.370

像这样的东西应该工作：

```
string text = "$gender(he|she|it|alien)";
string pattern = @"\$(\w+)\(([\w\|]*)\)";
Match match = Regex.Match(text, pattern);

string varName = match.Groups[1].Value;
string[] values = match.Groups[2].Value.Split('|');

Console.WriteLine(varName + ": ");
foreach (string value in values)
{
    Console.WriteLine("  " + value);
} 
```

这是它打印出来的：

```
gender:
  he
  she
  it
  alien 
```

`varName`具有变量的名称，然后`values`是包含每个选项的字符串数组。

但是，如果你输入一些`"$gender()"`没有值的东西，或者`"$gender(he|she|)"`最后有一个额外的管道，你会在结果中得到空字符串。如果这可能是一个问题，请尝试以下操作：

```
string[] values = match.Groups[2].Value.Split('|').Where((s) => !string.IsNullOrEmpty(s)).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:18:31.847

我想到了。

我忘记考虑选项中的数字。

```
\$[a-zA-Z]+\(([a-zA-Z0-9]+\|)+[a-zA-Z0-9]+\) 
```

# powershell - 确定服务器是否为打印服务器

> ID：13522877
> 
> 赞同：0
> 
> 时间：2012-11-23T03:54:35.410
> 
> 标签：powershell, if-statement, powershell-2.0

该脚本工作正常，将切换服务器上的打印机并确定打印机是否共享 (TRUE)。但是如果服务器上的最后一台打印机碰巧没有被共享，则会出现问题，然后将共享更改为（False）。这会歪曲电子表格中的结果，说明服务器不是打印服务器，尽管它是。我需要了解如何创建一个循环，说明如果我们在服务器上找到一台共享打印机，则停止搜索并将服务器放置在标记为打印服务器的电子表格中。

我想输入类似 `$Printers = gwmi Win32_Printer -computername $StrComputer if ($printers.shared -eq "True){# then stop searching that machine and place it in the speadsheet as a print server}` Here is my code 的内容：

```
foreach ($StrComputer in $colComputers){
            $Printers = gwmi Win32_Printer -computername $StrComputer
            $GenItems1 = gwmi Win32_OperatingSystem -Comp $StrComputer

    # Populate Printer Sheet with information
        foreach ($objItem in $GenItems1){
            $Sheet1.Cells.Item($intRow, 1) = $StrComputer
            $Sheet1.Cells.Item($intRow, 2) = $objItem.Caption
            $Sheet1.Cells.Item($intRow, 3) = $objItem.CSDVersion
            }

        foreach ($objItem in $Printers){
            $Sheet1.Cells.Item($intRow, 4) = $objItem.Shared

            }

        $de = New-Object System.DirectoryServices.DirectoryEntry
        $ds = New-Object System.DirectoryServices.DirectorySearcher
        $ds.SearchRoot = $de
        $ds.Filter = "(&(objectCategory=computer)(objectClass=computer)(samAccountName=$($StrComputer)$))"
        $ds.SearchScope = "SubTree"
        $r = $ds.FindOne()
        $r.Path
        $Sheet1.Cells.Item($intRow, 5) = $r.Path

            $intRow = $intRow + 1}
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T06:11:47.363

改变这个：

```
foreach ($objItem in $Printers){
            $Sheet1.Cells.Item($intRow, 4) = $objItem.Shared
            } 
```

有了这个：

```
$isprinterserver = $false
$printers | % { if ($_.shared -eq $true) { $isprinterserver = $true; break} }
$Sheet1.Cells.Item($intRow, 4) = $isprinterserver 
```

# android - PhoneGap中的Google Maps API v3：移动后复制圆圈并绘制切线

> ID：13522878
> 
> 赞同：0
> 
> 时间：2012-11-23T03:54:42.800
> 
> 标签：android, cordova, google-maps-api-3

（这是从我的另一篇文章中分离出来的，[Google Maps API v3 in PhoneGap:markers not drawing correct after move](https://stackoverflow.com/questions/13505692/google-maps-api-v3-in-phonegap-markers-not-drawing-properly-after-move)）。我一直在使用 PhoneGap 在 Android 上开发 Google Maps API 3 应用程序。它应该跟踪用户的位置并用标记和围绕它的圆圈标记位置。我一直在 Android 2.3 上开发它，它运行良好。然后我升级到安卓 4.x 的手机，我想它仍然运行良好。

上周，当我移动标记和圆圈时，我开始注意到谷歌地图做了一些奇怪的事情。它似乎创建了一个重复的标记和圆圈，而不是仅仅移动它们。在另一篇文章中，我得到了 Marker 问题的答案，但没有得到 Circle 的答案。有时，如果我更改缩放，那么重复的圆圈似乎消失了。而且，它偶尔会从顶部画出一些奇怪的切线。请参阅下面的图片。

我在手机上收到 Android 更新到 4.1.1 版后不久就开始注意到这一点。不确定这是否相关，我找不到有关问题的任何信息。

我将地图和 phonegap 代码减少到一个非常小的示例，并且它仍在执行此操作。我很确定这与phonegap无关。无论如何，我将我的phonegap升级到2.2，但正如预期的那样，它没有帮助。谁能告诉我在移动圆圈时是否做错了什么？

我尝试的一种解决方案是在移动之前隐藏圆圈，然后在移动后再次显示它。这似乎解决了重复和切线问题，但它使地图闪烁，当你每 3 秒左右移动一次时，这真的很烦人。所以这似乎不是一个可以接受的解决方案。测试代码如下。请注意，我在测试代码中删除了我的 Google Maps API 密钥。

我还了解到，让它正确重绘的一种方法是拖动地图，使任何圆圈的任何部分都不可见。然后，当我将它拖回以使圆圈可见时，它被重绘为一个正确的圆圈。

谢谢，埃里克

```
<!DOCTYPE HTML>
<html>
<head>
<title>Marker Test</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
    html {height: 100%}
    body {height: 100%; margin:0; padding:0}
    #map_canvas {height: 100%}
</style>
<script type="text/javascript" charset="utf-8" src="js/phonegap.js"></script>
<script type="text/javascript" charset="utf-8" src="http://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE&sensor=true"></script>
<script type="text/javascript" charset="utf-8">
    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // globals
    var watchID = null;
    var map = null;
    var myLocationMarker = null;
    var searchCircle = null;

    // PhoneGap is ready
    //
    function onDeviceReady() {
        startGPS();
    }

    function onUnLoad() {
        console.log("clearing watch " + watchID);
        navigator.geolocation.clearWatch(watchID);
    }

function startGPS() {
    console.log("In startGPS");

    var refreshMilliseconds = 5000;
    var options = { frequency: refreshMilliseconds, enableHighAccuracy: true};

    watchID = navigator.geolocation.watchPosition(onGPSSuccess, onGPSError, options);

    // create Google map
    var mapOptions = {
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    myLocationMarker = new google.maps.Marker({
        title: 'This is me!',
        zIndex: 90,
        optimized: false,
        map:map
    });     

    searchCircle = new google.maps.Circle({
        fillColor: '#c0e4dd',
        strokeColor: '#f15f22',
        fillOpacity: 0.5,
        radius: 1500,
        map:map
    });     
}

var onGPSSuccess = function(p) {
    // get the new coordinates
    var lat = p.coords.latitude;
    var lng = p.coords.longitude;

    console.log("watch ID " + watchID);

    // now that we have the coordinates, we can move the marker and circle on the Google Map
    MoveMarkerAndCircle(lat, lng);
};

var MoveMarkerAndCircle = function(lat, lng) {
    var myLocation = new google.maps.LatLng(lat, lng);
    myLocationMarker.setPosition(myLocation);

//  searchCircle.setVisible(false);
    searchCircle.setCenter(myLocation);
//  searchCircle.setVisible(true);

    map.setCenter(myLocation);  
}

var onGPSError = function() {
    console.log("GPS Error");
};

var GenerateFakeMovement = function() {
    var currentPosition = myLocationMarker.getPosition();
    var newLat = currentPosition.lat() + 0.01;
    var newLng = currentPosition.lng() + 0.01;
    MoveMarkerAndCircle(newLat, newLng);
}
</script>
</head>
<body  style="height:100%;text-align:center" onunload="onUnLoad()">
    <div id="map_canvas" style="width: 100%;height:80%"></div>
    <a href='#' onclick="GenerateFakeMovement();" style="padding-top:5px">MAKE FAKE MOVEMENT</a>
</body>
</html> 
```

![2圈](../Images/ee5f1190ca86ceac9ea9ae44eb94fe57.png) ![切线](../Images/1f915144ae4cb5f2e798b2f9fa239b6b.png) ![破圈](../Images/114deb502b13b38091d957a2f642819f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:29:23.550

```
<!DOCTYPE HTML>
<html>
<head>
<title>Marker Test</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
    html {height: 100%}
    body {height: 100%; margin:0; padding:0}
    #map_canvas {height: 100%}
</style>
<script type="text/javascript" charset="utf-8" src="http://maps.googleapis.com/maps/api/js?v=3&sensor=true"></script>
<script type="text/javascript" charset="utf-8">
    var watchID = null;
    var map = null;
    var myLocationMarker = null;
    var searchCircle = null;
    function onDeviceReady() {
        startGPS();
    }

    function onUnLoad() {
        console.log("clearing watch " + watchID);
        navigator.geolocation.clearWatch(watchID);
    }

function startGPS() {
    console.log("In startGPS");

    var refreshMilliseconds = 5000;
    var options = { frequency: refreshMilliseconds, enableHighAccuracy: true};

    if(watchID ==null)
    watchID = navigator.geolocation.watchPosition(onGPSSuccess, onGPSError, options);

    // create Google map
    var mapOptions = {
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    myLocationMarker = new google.maps.Marker({
        title: 'This is me!',
        zIndex: 90,
        optimized: false,
        map:map
    });     

    searchCircle = new google.maps.Circle({
        fillColor: '#c0e4dd',
        strokeColor: '#f15f22',
        fillOpacity: 0.5,
        radius: 1500,
        map:map
    });     
}

var onGPSSuccess = function(p) {
    // get the new coordinates
    var lat = p.coords.latitude;
    var lng = p.coords.longitude;

    console.log("watch ID " + watchID);

    // now that we have the coordinates, we can move the marker and circle on the Google Map
    MoveMarkerAndCircle(lat, lng);
};

var MoveMarkerAndCircle = function(lat, lng) {
 var myLocation = new google.maps.LatLng(lat, lng);
    myLocationMarker.setPosition(myLocation);

//  searchCircle.setVisible(false);
    searchCircle.setCenter(myLocation);
//  searchCircle.setVisible(true);

    map.setCenter(myLocation);  
}

var onGPSError = function() {
    console.log("GPS Error");
};

function GenerateFakeMovement() {
 var currentPosition = myLocationMarker.getPosition();
    var newLat = currentPosition.lat() + 0.01;
    var newLng = currentPosition.lng() + 0.01;
    MoveMarkerAndCircle(newLat, newLng);
}
</script>
</head>
<body  style="height:100%;text-align:center" onload="onDeviceReady()" onunload="onUnLoad()">
    <div id="map_canvas" style="width: 100%;height:80%"></div>
    <a href='#' onclick="GenerateFakeMovement();" style="padding-top:5px">MAKE FAKE MOVEMENT</a>
</body>
</html>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T19:29:02.820

我希望通过将其发布为“答案”来做正确的事情。我仍然有这个问题，但我已经将我自己的例子缩小到很明显这只是 Android 4.1.1 上的 Google Maps API v3 的问题。缩小测试用例的代码如下，不再涉及 PhoneGap。

我在这里在线发布了测试页面：http: [//kcwebprogrammers.com/MarkerTest-NoGps.html](http://kcwebprogrammers.com/MarkerTest-NoGps.html)

如果您在 Windows（Chrome 或 IE）中浏览，或者在 Android 2.3 上使用 Internet 浏览器，那么移动圆圈就可以了。如果您在Android 4.1.1 上使用Internet 浏览器浏览到同一页面，那么您会看到圆圈移动后仍然可见原来的圆圈，从而导致两个圆圈。因此，[我已将该问题发布到 Google 地图问题列表中。](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4597&thanks=4597&ts=1353784580)

感谢以上建议。如果有人认为我应该对这篇文章做任何不同的事情，请告诉我。

```
<!DOCTYPE HTML>
<html>
<head>
<title>Marker Test</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
    html {height: 100%}
    body {height: 100%; margin:0; padding:0}
    #map_canvas {height: 100%}
</style>
<script type="text/javascript" charset="utf-8" src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDTGR9VjM2t5ixumkk_jHg155s0C1S5g3Y&sensor=true"></script>
<script type="text/javascript" charset="utf-8">

// globals
var watchID = null;
var map = null;
var myLocationMarker = null;
var searchCircle = null;
var myLocation = null;

function onLoad() {
    startGPS();
}

function onUnLoad() {
    console.log("clearing watch " + watchID);
}

function startGPS() {
    // simulate getting position from GPS
    myLocation = new google.maps.LatLng(39, -90);

    // create Google map
    var mapOptions = {
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        center:myLocation
    };
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    google.maps.event.trigger(map, 'resize');

    myLocationMarker = new google.maps.Marker({
        title: 'This is me!',
        zIndex: 90,
        optimized: false,
        map:map,
        position: myLocation
    });     

    searchCircle = new google.maps.Circle({
        fillColor: '#c0e4dd',
        strokeColor: '#f15f22',
        fillOpacity: 0.5,
        radius: 1500,
        map:map,
        center:myLocation
    });
    // using bindTo instead does not fix the problem
//  searchCircle.bindTo('center', myLocationMarker, 'position'); //This will set the circle bound to the marker at center
}

var MoveMarkerAndCircle = function(lat, lng) {
    myLocation = new google.maps.LatLng(lat, lng);
    myLocationMarker.setPosition(myLocation);

    // set circle invisible before moving and visible after does fix redraw for 4.1.1
    // but causes some annoying flashing of the circle for 4.1.1 and everything else
//  searchCircle.setVisible(false);
    searchCircle.setCenter(myLocation);
//  searchCircle.setVisible(true);
}

var GenerateFakeMovement = function() {
    var currentPosition = myLocationMarker.getPosition();
    var newLat = currentPosition.lat() + 0.001;
    var newLng = currentPosition.lng() + 0.001;
    MoveMarkerAndCircle(newLat, newLng);
}
</script>
</head>
<body  style="height:100%;text-align:center" onunload="onUnLoad()" onload="startGPS()">
    <div id="map_canvas" style="width: 100%;height:90%"></div>
    <a href='#' onclick="GenerateFakeMovement();" style="padding-top:5px">MOVE MARKER AND CIRCLE</a>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:24:50.370

可能与您的问题不完全相关，但如果您将圆圈绑定到标记，则不必手动设置圆圈位置。

```
 if (myMarker == undefined) {
      myMarker = new google.maps.Marker({
          position: mouseEvent.latLng,
          title: 'My Position',
          map: map,
          draggable: true
      });

      var circle = new google.maps.Circle({
          map: map,
          radius: 100000, // 100 km
          fillOpacity: 0.1,
          strokeOpacity: 0.5,
          strokeWeight: 1
      });

      circle.bindTo('center', myMarker, 'position'); //This will set the circle bound to the marker at center
} 
```

所以你只需要更新标记的位置。希望这可以帮助。

# django - 如何在 Gunicorn 和 Nginx (Mac OS X) 上配置 Django

> ID：13522883
> 
> 赞同：1
> 
> 时间：2012-11-23T03:55:09.093
> 
> 标签：django, nginx, operating-system, gunicorn, supervisord

我正在尝试使用 Nginx + Gunicorn 和主管在 Lion 中设置 Django。我已经安装了：

**进度**：MySQL DMG + MySQLdb 编译 + Python + brew nginx + easy_install gunicorn + pip install Django + easy_install supervisor。

**当前配置详细信息：**

```
Nginx:
upstream app_server {
     server unix:/tmp/gunicorn.sock fail_timeout=0;
}
server {
    listen       80;
    server_name  localhost;
    #Static
    root /Users/andre/sites;
    location / {
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header Host $http_host;
        proxy_redirect off;
        if (!-f $request_filename) {
            proxy_pass http://app_server;
            break;
        }
    } 
```

Gunicorn：你可以看到[这里](https://github.com/benoitc/gunicorn/blob/master/examples/example_config.py)

```
Supervisor:
[program:gunicorn]
command=/usr/local/bin/gunicorn main:application -c    /Users/devepy/desktop/andre/andre/gunicorn.conf.py
directory=/Users/andre/desktop/andre/myproject
user=nobody
autostart=true
autorestart=true
redirect_stderr=True 
```

实际上我不知道还能做什么，但花了几个星期才知道 mac osx 很疯狂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-27T20:39:01.853

我很确定您现在一定已经解决了，但是我遇到了一个非常好的博客，可能会对您有所帮助。 [http://cheng.logdown.com/posts/2015/01/27/deploy-django-nginx-gunicorn-on-mac-osx](http://cheng.logdown.com/posts/2015/01/27/deploy-django-nginx-gunicorn-on-mac-osx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T22:17:16.663

我写了一篇关于如何将 Nginx 连接到 Gunicorn 和 Gunicorn 连接到 WSGI 应用程序的[教程](https://github.com/zachvalenta/nginx-wsgi)（意思是 Django、Flask、Tornado 等）

简而言之：

*   将 Gunicorn 绑定到您的应用程序：`gunicorn --bind 0.0.0.0:8000 wsgi`
*   更新`nginx.conf`以将请求传递给 Gunicorn

    ```
    location / {
        proxy_pass http://127.0.0.1:8000;
    } 
    ```

如果您认为本教程中的更多详细信息会使此答案更有帮助，请发表评论，我将在此处更新。

# android - 声音在模拟器中有效，但在手机上无效

> ID：13522885
> 
> 赞同：0
> 
> 时间：2012-11-23T03:55:24.303
> 
> 标签：android

我有这个代码

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final MediaPlayer mp = MediaPlayer.create(this, R.raw.blah);

        Button Button01 = (Button)this.findViewById(R.id.Button01);
        Button01.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                mp.start();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onClick(View v){}

    public void disclaimerBTN (View v){
        Toast.makeText(this, "FAILED:   The remote object is " +
                            "not responding to this command",Toast.LENGTH_LONG).show();
    } 
```

当我在我的模拟器中使用时，它可以工作，但如果我用我的手机测试，它不会播放声音。

我的按钮中没有引用此代码..我应该吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:54:53.960

试试这个代码...

```
 MediaPlayer mp = new MediaPlayer().create(context, R.raw.blah); 
```

# javascript - 如何通过 javascript 在 IE 中向 XML 添加额外的 xmlns 命名空间属性

> ID：13522890
> 
> 赞同：6
> 
> 时间：2012-11-23T03:56:16.083
> 
> 标签：javascript, jquery, xml, internet-explorer

我在尝试通过跨浏览器的 javascript 将多个命名空间附加到 XML 元素时有点卡住了；我已经尝试了大约十几种不同的方法，但都无济于事。

我通常使用普通的旧 javascript，但为了保持这个例子简短，这就是我正在做的事情将通过 jQuery 完成：

```
var soapEnvelope = '<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"></soapenv:Envelope>';
var jXML = jQuery.parseXML(soapEnvelope);
$(jXML.documentElement).attr("xmlns:xsd", "http://www.w3.org/2001/XMLSchema"); 
```

在 Chrome 和 FF 中，这按预期工作，结果如下：

```
<soapenv:Envelope 
   xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
   xmlns:xsd="http://www.w3.org/2001/XMLSchema" /> 
```

但是在 IE9 中，我得到这样的结果：

```
<soapenv:Envelope 
   xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
   xmlns:NS1="" NS1:xmlns:xsd="http://www.w3.org/2001/XMLSchema"/> 
```

如果没有 IE9 将这个 NS1 前缀添加到我的命名空间，我找不到添加这个命名空间属性的方法。此外，如果我尝试将此结果传递回 $.parseXML(result) ，则会收到格式错误的 XML 异常。

我是否误解了与在 IE 中声明命名空间的方式有关的事情，或者任何人都可以建议一种我可以在浏览器中获得一致结果的方法吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-02T01:28:21.137

万一其他人遇到与此类似的问题，我最终发现可以通过以不同于 jQuery 的方式初始化 IE XML DOM 对象来修复它。我使用了类似于以下内容的东西，现在 xml 命名空间似乎在所有主要浏览器中都可以正常工作，并且 jQuery attr 方法现在也可以再次工作。

```
var getIEXMLDOM = function() {
  var progIDs = [ 'Msxml2.DOMDocument.6.0', 'Msxml2.DOMDocument.3.0' ];
  for (var i = 0; i < progIDs.length; i++) {
    try {
        var xmlDOM = new ActiveXObject(progIDs[i]);
        return xmlDOM;
    } catch (ex) { }
  }
  return null;
}

var xmlDOM;
if ( $.browser.msie ) {
   xmlDOM = getIEXMLDOM();
   xmlDOM.loadXML(soapEnvelope);
} else {
   xmlDOM = jQuery.parseXML(soapEnvelope);
}

$(xmlDOM.documentElement).attr("xmlns:xsd", "http://www.w3.org/2001/XMLSchema"); 
```

# php - 为什么日期“2012-12-01”导致打印表一遍又一遍地重复？

> ID：13522899
> 
> 赞同：1
> 
> 时间：2012-11-23T03:57:39.810
> 
> 标签：php, mysql

我知道这个很奇怪。我有一个称为`schedule`列的表`Date`，列类型为`DATE`. 我在本专栏中有从 2012-11-01 到 2013-01-02 的日期（格式为 YYYY-MM-DD）。发生的事情是，如果我输入一个日期，任何日期，其间有 2012-12-01，它会重新启动循环。因此，如果我选择 2012-11-15 到 2012-12-15，它将在 11 月 15 日到 12 月 1 日打印，但在 12 月 1 日之后，它会在 11 月 15 日再次开始打印。如果我选择 2012-11-15 到 2012-11-30 或 2012-12-02 到 2012-12-30 一切正常，只是当涉及到该特定日期时才会出现问题。这是我的代码：

```
<?php
////////////////////////////////////////////////////////
//////First set the date range that we want to use//////
////////////////////////////////////////////////////////

if(isset($_POST['from']) && ($_POST['from'] != NULL))
    {
    $startDate = $_POST['from'];
    echo "<script>alert (\"startDate: " . $startDate . "\")</script>";
    }
else
    {
    //Default date is Today
    $startDate = date("Y-m-d");
    echo "<script>alert (\"startDate: " . $startDate . "\")</script>";
    }
if(isset($_POST['to']) && ($_POST['to'] != NULL))
    {
    $endDate = $_POST['to'];
    echo "<script>alert (\"endDate: " . $endDate . "\")</script>";
    }
else
    {
    //Default day is one month from today
    $endDate = date("Y-m-d", strtotime("+1 month"));
    echo "<script>alert (\"endDate: " . $endDate . "\")</script>";
    }

//////////////////////////////////////////////////////////////////////////////////////
//////Next calculate the total amount of days selected above to use as a limiter//////
//////////////////////////////////////////////////////////////////////////////////////

    $dayStart = strtotime($startDate);
    $dayEnd = strtotime($endDate);
    $total_days = abs($dayEnd - $dayStart) / 86400 +1;
    echo "<script>alert (\"Total Days: " . $total_days . "\")</script>";

//////////////////////////////////////////////////////////////////////////////////////////////////////////
//////Then we're going to get the date range specified from the schedule table and print the results//////
//////////////////////////////////////////////////////////////////////////////////////////////////////////

//Select the dates from the schedule table, limited to the total amount days.
$sql = ("SELECT Date FROM schedule WHERE Date BETWEEN '$startDate' AND '$endDate' LIMIT $total_days");

//Run a check on the query to make sure it worked. If it failed then print the error.
if(!$result_date_query = $mysqli->query($sql))
    {
    die('There was an error getting the date from the schedule table [' . $mysqli->error . ']');
    }

//Loop through the results while a result is being returned.
while($row = $result_date_query->fetch_assoc())
    {
    //First format and then print the all the dates selected.
    echo "<td class=\"schedule_date_cell\">" . date('M j', strtotime($row['Date'])) . "</td>";
    }

//Free the result.
$result_date_query->free();
?> 
```

我很茫然。我添加了一些 echo 语句来显示正在发生的事情以及一切都按预期进行。我只是不明白之前的所有日期和之后的所有日期是如何完美地工作的，但是其中包含 12 月 1 日的任何内容都会使其重新启动循环。我不确定它是否相关，但列中有多个相同日期，这就是我`LIMIT`在查询中设置的原因。

我希望有人能打开这个案子，因为我很想知道答案！

**编辑：**我按照评论中的建议在 PHPmyadmin 中尝试了相同的查询，它产生了相同的结果。我还尝试删除`LIMIT`以及从单引号更改`'2012-11-01'`为双引号`"2012-11-01"`，结果仍然相同。

**EDIT2：**对于`Date`列中的每个日期，每个日期有 92 个实例。因此，例如，有 2012-12-01 的 92 条记录和 2012-12-02 的 92 条记录，依此类推。有趣的是，当我`LIMIT`从查询中删除并使用 2012-11-30 到 2012-12-15（11 月 30 日到 12 月 15 日）的日期范围时，会打印 11 月 29 日、11 月 30 日、12 月 1 日然后重复这三个日期一次又一次，92次！然后，它开始打印 12 月 2 日、12 月 3 日、12 月 4 日……12 月 15 日剩下的日子，然后一次又一次地重复这些日期，92 次！这只是证明由于某种原因循环在 12 月 1 日重新开始，因为如果我输入 11 月 1 日到 11 月 3 日的日期范围，它会在重复 92 次之前打印该范围内的所有日期。的原因`LIMIT`是为了阻止它返回每个日期的所有实例，所以我只会得到 11 月 1 日到 11 月 3 日一次，而不是 92 次，但是当限制被删除时，我们可以看到 12 月 1 日引起了一些奇怪的问题。

**EDIT3：**我创建了一个与 2012-11-01 到 2013-01-02`schedule2`相同的新表`schedule`并输入了相同的日期范围，但这次只有一个实例。然后我再次运行我的查询，它可以在任何日期组合中完美运行。很明显，问题是表中有不止一个该日期的实例`schedule`，但我不知道为什么会出现问题。我不明白这个日期对`while`循环有什么影响。在你提出建议之前，是的，我确实需要在表格中有多个相同日期的实例；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T06:50:33.127

没有必要使用`LIMIT`从句。相反，更改您的查询以确保它不会多次返回任何日期：

```
SELECT DISTINCT(Date) FROM schedule WHERE Date BETWEEN '$startDate' AND '$endDate' 
```

这会给你每个约会一次。

您可能在该`Date`列上有一个索引（这很好），并且该索引将 11 月的所有日期排在 12 月的日期之前（至少在同一年）。对于从 12 月开始到 1 月结束的日期范围，您也会遇到同样的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:26:01.410

它在 12 月 1 日循环播放的事实在很大程度上只是一个巧合。我不知道 MySQL 内部如何工作的细节，但如果你不给它一个命令，那么它会在你请求数据时应用它感觉的任何顺序。

将此与您有重复日期的事实相结合，然后您最终会遇到您所描述的无缘无故自发发生的情况。

由于您希望每个日期恰好出现一次，并且您希望它们按时间顺序出现，那么您需要在查询时告诉 MySQL 您想要这两件事。因此，添加`DISTINCT`AND`ORDER BY`命令：

```
SELECT DISTINCT(Date) FROM schedule WHERE Date BETWEEN '$startDate' AND '$endDate' ORDER BY Date ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T06:38:23.113

您可以通过`UNIQUE`在定义特定日期的条目的列上添加索引来防止重复。

如果您已经清理了数据以删除重复项，那么这很容易在事后添加：

```
ALTER TABLE schedule ADD UNIQUE INDEX index_on_date (date) 
```

另一种方法是每个日期只选择一行，这通常相当于`GROUP BY date`在查询末尾追加。

# c# - 如何在不使用 List 的情况下将 Linq Query 的值传递给普通字符串？

> ID：13522902
> 
> 赞同：1
> 
> 时间：2012-11-23T03:57:48.203
> 
> 标签：c#, asp.net-mvc-3

一个非常简单的问题，但我找不到答案。

假设我们有这个：

```
 [HttpPost]
    public ActionResult Comparison(int id)
    {
        string makeLst = new List<String>();

        var makeQry = from m in db.Car
                      where m.ID == id
                      select m.Make;

        makeLst = makeQry.AddRange(makeQry);

        ViewBag.make = new List<String>(makeLst);
        return View();
    } 
```

“makeQry”结果视图将只是一个单词（字符串）。所以我不想为此使用List，而只使用String。使用“.ToString()”将不起作用，因为“makeQry.ToString()”将是查询本身而不是它的结果。而且我检查了没有诸如 makeQry.Result 之类的方法来获取查询的结果。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:01:42.610

您可以使用`First()`or`FirstOrDefault()`获得单一结果：

```
ViewBag.make = makeQry.FirstOrDefault(); 
```

（不同的是，`First`如果集合为空，则抛出异常，而`FirstOrDefault`在这种情况下只返回空值。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:07:24.617

**详细信息：**如果您确定总会有一个匹配的 ID 值，那么下面应该可以完成这项工作（未经测试）

```
[HttpPost]
public ActionResult Comparison(int id)
{
   ViewBag.make = db.Car.FirstOrDefault(x => x.ID == id).Make;

   return View();
} 
```

或者，如果您更喜欢保留 linq 语法，那么您是如何做到的

```
[HttpPost]
public ActionResult Comparison(int id)
{
   ViewBag.make = (from m in db.Car
                   where m.ID == id
                   select m.Make).FirstOrDefault();

   return View();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:02:51.797

```
[HttpPost]
public ActionResult Comparison(int id)
{
    var makeQry = from m in db.Car
                  where m.ID == id
                  select m.Make;
    //As soon as the result is guaranteed to contain only one object 
    ViewBag.make = makeQry.SingleOrDefault();
    return View();
} 
```

它使用[Enumerable.SingleOrDefault Method (IEnumerable)](http://msdn.microsoft.com/en-us/library/bb342451.aspx)，该方法返回输入序列的单个元素，如果没有元素，则返回 null。如果序列包含多个元素，它将引发异常。

# wordpress - Drupal 安装 URL 问题中的 Wordpress 博客

> ID：13522905
> 
> 赞同：1
> 
> 时间：2012-11-23T03:58:24.283
> 
> 标签：wordpress, drupal, http-status-code-404

我有一个标准的 Drupal 安装和 Wordpress 来处理博客部分。

结构是example.com 会是drupal 的安装example.com/blog/ 是wordpress 的安装。

当我浏览到 example.com/blog/my-wp-url 之类的 url 时，它会引发来自 Drupal 的 404 错误。

如何摆脱它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T04:05:31.673

来自[http://drupal.org/node/30334](http://drupal.org/node/30334)：

诀窍是修改 .htaccess 以忽略特定文件/文件夹。

* * *

我会将您的 Drupal 设置`.htaccess`为以下

`RewriteCond %{REQUEST_URI} "/blog/"
RewriteRule (.*) $1 [L]` 

并将这段代码放在下面

```
# Various rewrite rules.
<IfModule mod_rewrite.c>
  RewriteEngine on 
```

# c# - .Net 程序集在将 bool 设置为 TRUE 时添加了多余的 AND？

> ID：13522907
> 
> 赞同：7
> 
> 时间：2012-11-23T03:59:03.820
> 
> 标签：c#, assembly, clr

以下代码在 .Net 4.0 的 VS2010 中用 C# 编写：

```
bool b = false; 
```

有以下反汇编：

```
XOR EDX,EDX
MOV DWORD PTR[EBP-3Ch],EDX 
```

这很有意义。

但是，以下代码：

```
bool b = true; 
```

有以下反汇编：

```
MOV EAX,1
AND EAX,0FFh
MOV DWORD PTR[EBP-3Ch],EAX 
```

手术的目的是什么`AND`？为什么不只是`MOV EAX,1`？

```
Line | EAX
-----------
   1 | 0x01
   2 | 0x01 & 0xFF = 0x01
   3 | 0xFF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:39:39.777

我怀疑它`and 0xff`被截断为 8 位布尔值。我对内部结构知之甚少，无法确定，但我怀疑`bool b = true`正在变成这样的东西`bool b = int(1)`，然后变成这样，这是`bool b = bool(int(1))`强制 bool 导致`and 0xff`. `test; setal`我在返回 bool （例如以 结尾）而不是仅仅返回任意非零值的 C++ 函数的 x86 结语中看到类似的事情。

这是窥视孔优化器将修复的那种代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:21:59.583

这段代码

```
bool a = true;
bool c = false; 
```

生成此 IL 程序集：

```
IL_0001:  ldc.i4.1    
IL_0002:  stloc.0     
IL_0003:  ldc.i4.0    
IL_0004:  stloc.1 
```

你可以在中间语言中看到，代码本质上是一样的。抖动是如何翻译的，或者为什么它不能有效地为两者并行代码是非常奇怪的。

（我把它作为答案而不是评论，这样我就可以将讨论格式化为可读性。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:46:10.243

[根据英特尔手册 ( http://www.intel.com/content/www/us/en/)，AND](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)操作码还会导致设置一些状态标志（OF、CF、SF、ZF 和 PF）[处理器/架构-软件-开发者-manuals.html](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)）。如果没有函数中其余指令的上下文，很难猜测其目的是什么。

# opengl - 如何获得漫反射项的光矢量

> ID：13522908
> 
> 赞同：-1
> 
> 时间：2012-11-23T03:59:16.207
> 
> 标签：opengl, 3d

给定光的位置 (x,y,z) 和像素的位置 (x,y,z)，如何为局部照明方程的漫反射项找到光矢量 L？这是针对 phong 照明模型的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:25:31.910

两个向量必须在同一个坐标系中。

对于点光源，光的位置是有限的 ( `w != 0`)，光向量是

```
vec4 L = normalize (light - point); 
```

对于定向光，光的位置是无限的（`w == 0`），光矢量是光本身的位置

```
vec4 L = light; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:43:20.823

你不能只做一个向量减法吗？确保您的向量在同一个坐标系中，然后执行`vec3 L = lightPos - pixelPos`.

假设您的两个向量都在眼睛坐标中，您通常会这样做

```
float diffuseLight = I_d * k_d * max(L * vec(0,0,1), 0) 
```

之后得到光的贡献。

您应该为您的问题提供更多背景信息，要理解您的问题并不容易。

# google-chrome-extension - 如何查看谷歌浏览器扩展设置的cookies？

> ID：13522909
> 
> 赞同：1
> 
> 时间：2012-11-23T03:59:22.087
> 
> 标签：google-chrome-extension

我正在开发一个 google chrome 扩展，它有一个按钮和一个弹出覆盖。在这个扩展中，我为用户设置和删除 cookie。在开发过程中，扩展程序向 localhost:8080 发出请求，并且（我假设）cookie 被设置为 localhost 作为域。

问题是，我不知道如何从 Chrome 中的列表中查看这些 cookie。Firefox 有一个简单的功能，可以查看由各种主机名设置的所有 cookie，Chrome 似乎也是如此（尽管我对 Chrome 中的开发人员工具不太熟悉）。但是在 Chrome 的 cookie 列表中，我找不到为 localhost 设置的任何 cookie，也找不到为我的扩展程序设置的任何 cookie。我也尝试了一些 3rd 方 cookie 扩展——也没有运气。

扩展程序设置的 cookie 会出现在与普通网站设置的 cookie 相同的位置吗？如果是这样，为什么我没有看到他们？帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T05:24:11.833

是的，它们出现在示例位置。我编写了一个示例扩展以进行演示；在为 developer.chrome.com 域测试后截取的屏幕截图

![在此处输入图像描述](../Images/8917572e67d993ee3a75048e94fe7aea.png)

示例扩展：

***清单.json***

```
{
  "name" : "Cookie API Demo",
  "version" : "1",
  "description" : "This is demonstration of Cookie API",
  "permissions": [ "cookies","<all_urls>"],
  "browser_action": {
    "default_icon": "screen.png",
    "default_popup":"popup.html"
  },
  "manifest_version": 2
} 
```

***popup.html***

```
<html>
<head>
<script src="popup.js"></script>
</head>
<body>
</body>
</html> 
```

***popup.js***

```
function cookieinfo(){
    chrome.cookies.getAll({},function (cookie){
        console.log(cookie.length);
        for(i=0;i<cookie.length;i++){
            console.log(JSON.stringify(cookie[i]));
        }
    });
    chrome.cookies.getAllCookieStores(function (cookiestores){
        for(i=0;i<cookiestores.length;i++){
            console.log(JSON.stringify(cookiestores[i]));
        }
    });
    chrome.cookies.set({"name":"Sample1","url":"http://developer.chrome.com/extensions/cookies.html","value":"Dummy Data"},function (cookie){
        console.log(JSON.stringify(cookie));
        console.log(chrome.extension.lastError);
        console.log(chrome.runtime.lastError);
    });
    chrome.cookies.onChanged.addListener(function (changeInfo){
        console.log(JSON.stringify(changeInfo));
    });
}
window.onload=cookieinfo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:49:39.293

好吧，我想通了。这是一个前额拍板，但无论如何我都会在这里发布答案，以防其他人需要帮助。

如果您检查覆盖元素，则覆盖扩展的 cookie 只会显示在“开发人员工具”中。也就是说，如果您关闭覆盖并单击扳手按钮、开发人员工具、资源、cookie，您将看到的唯一内容是底层页面的 cookie。

要查看覆盖扩展的 cookie，请右键单击覆盖内部并“检查元素”。cookie 确实显示在那里，它们所附加的“域”是扩展程序的唯一 ID（kackjckjckjckcjckjckcjkcjckcj 或你有什么）。

随机说明：在撰写本文时，无论您将过期时间设置为什么，Jquery cookie 插件总是会在会话中终止您的 cookie。为了让我的 cookie 在浏览器关闭后仍然存在（存活），我必须包含良好的老式 setCookie() 和 getCookie() 函数并摆脱 Jquery cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T23:39:01.380

在您的浏览器中 - 访问：

```
chrome://settings/cookies 
```

我只是将它设置为 chrome 中书签的地址 - 然后当我想查看 cookie 时只需单击我的书签

# coordinates - 如何在 DataMapper 中添加一个方法，以便我可以找到“该纬度和经度 x 距离内的所有点”？

> ID：13522912
> 
> 赞同：2
> 
> 时间：2012-11-23T03:59:37.793
> 
> 标签：coordinates, gis, datamapper, distance

我正在使用 DataMapper 管理具有按纬度和经度定位的兴趣点 (POI) 的数据库。我想做一个查询并找到给定纬度和经度 x 距离内的所有 POI。例如，纬度 45、经度 90 1000m 范围内的所有 POI。

我设置了这个：

```
class POI
  include DataMapper::Resource
  property :id,                  String,  :key => true
  property :title,               String,  :required => true
  property :lat,                 Float,   :required => true
  property :lon,                 Float,   :required => true

  def distance(latitude, longitude)
    # Taken from https://github.com/almartin/Ruby-Haversine
    earthRadius = 6371 # Earth's radius in km

    # convert degrees to radians
    def convDegRad(value)
      unless value.nil? or value == 0
        value = (value/180) * Math::PI
      end
      return value
    end

    deltaLat = (self.lat - latitude)
    deltaLon = (self.lon - longitude)
    deltaLat = convDegRad(deltaLat)
    deltaLon = convDegRad(deltaLon)

    # Calculate square of half the chord length between latitude and longitude
    a = Math.sin(deltaLat/2) * Math.sin(deltaLat/2) +
      Math.cos((self.lat/180 * Math::PI)) * Math.cos((latitude/180 * Math::PI)) *
      Math.sin(deltaLon/2) * Math.sin(deltaLon/2);
    # Calculate the angular distance in radians
    c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))

    distance = earthRadius * c
    return distance
  end
end 
```

我希望能够通过类似于以下的调用[找到记录：](http://datamapper.org/docs/find.html)

```
pois = POI.all(distance(45,90).lte => 1000) 
```

但这给出了一个错误：

```
./poi-provider.rb:44:in `<main>': undefined method `distance' for main:Object (NoMethodError) 
```

我阅读了 dkubb 的[关于在方法中定义复杂查询的答案，](https://stackoverflow.com/questions/2073502/when-to-use-an-orm-sequel-datamapper-ar-etc-vs-pure-sql-for-querying/2075453#2075453)但这是不同的，因为我需要传入参数并且我试图将该方法用作条件。

我该怎么做——或者，有没有更好的方法来使用 DataMapper 来查找给定纬度和经度附近的点，而不会崩溃并且只使用原始 SQL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T18:21:04.960

每当您处理纬度和经度时，我强烈建议您使用空间数据库，而不仅仅是两个 Float 列。否则，一旦您拥有大量数据，您的查询就会变得异常缓慢。

MySQL 确实有空间扩展，但开源空间数据库的事实上的标准是 PostGIS 对 Postgres 的扩展。幸运的是，您可以很容易地将它与 DataMapper 一起使用。

## 安装

你需要这个[`dm-postgis`](https://github.com/rkj/dm-postgis)插件。主要代码似乎是废弃软件，但有人对其进行了更新以与当前的 DataMapper 一起使用。从 github 克隆 dm-postgis，应用[此拉取请求](https://github.com/rkj/dm-postgis/pull/1)，然后`gem install`从本地目录。

如果您安装[`dm-ar-finders`](https://github.com/datamapper/dm-ar-finders)，您还会发现生活更轻松，它允许您使用 SQL 查询并获取 DataMapper 对象。

## 数据模型

然后，您可以将坐标属性定义为 PostGIS 几何类型，如下所示：

```
property :location, PostGISGeometry 
```

并这样设置：

```
location=GeoRuby::SimpleFeatures::Point.from_x_y(longitude,latitude) 
```

您可能希望在您的位置列上创建一个索引。您需要地理数据的 GIST 索引，而不是 Postgres 的默认 B 树。不幸的是，dm-postgis 不够聪明，无法创建它，所以从 psql 命令行执行它：

```
CREATE INDEX index_poi_location ON poi USING GIST (location); 
```

## 邻近查询

好的。所以现在你有一个位置字段。您如何运行邻近查询？

关键是 PostGIS 的[ST_DWithin](http://postgis.refractions.net/docs/ST_DWithin.html)函数。正如文档所说，这“如果几何形状在彼此之间的指定距离内，则返回 true”。所以在你的情况下，你会做这样的事情：

```
POI.find_by_sql "SELECT id,name FROM pois WHERE ST_DWithin(location, ST_GeomFromText('POINT(45 90)') , 0.05 )" 
```

0.05 是所需的距离。请注意，这是度数，而不是米。（谈论投影和 SRID 超出了这个答案的范围，但是，例如，如果你所有的数据都在英国，你可以使用 OSGB 投影并很容易地获得米。或者，有人可以改进 dm-postgis 到处理 PostGIS 地理以及几何，它们本身就可以处理米距离。它在我的清单上......有一天。）

这一切的真正伟大之处在于 PostGIS 将更复杂的地理查询置于您的掌握之中。例如，在我目前正在进行的一个项目中，我是这样使用它的：

```
 shops=Shop.find_by_sql [<<-EOS,route.id]
        SELECT listings.id, listings.name, listings.provides
          FROM listings
          JOIN routes ON ST_DWithin(listings.location, routes.linestring, 0.05)
         WHERE routes.id=? AND type='Shop'
      ORDER BY ST_Line_Locate_Point(routes.linestring, listings.location)
    EOS 
```

这会找到沿特定路线（折线）的所有商店并命令它们从头到尾……而且做得非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T23:19:20.720

1.  您正在调用实例方法而不实例化。这就是导致您的错误的原因。
2.  您不能使用 DataMapper 方法作为条件。这意味着您将不得不编写一些 SQL。

就像是：

```
class POI
  ...
  def self.all_within_distance(distance, longitude, latitude)
    repository.adapter.query "SELECT *
    FROM pois 
    WHERE " + distance.to_s + " > ** Complicated math coded in SQL that gets uses poi.lon and poi.lat to get the distance from the given longitude and latitude ** " 
  end 
```

然后打电话

```
POI.all_within_distance(1000, 45, 90) 
```

# c - C - 将文本中的值存储到数组中

> ID：13522916
> 
> 赞同：4
> 
> 时间：2012-11-23T04:00:12.170
> 
> 标签：c, arrays, file, text, io

我正在尝试逐行存储从文件中获取的不同值。文本文件中的行如下所示

```
100000,player1,long title name
300000,someotherplayer,another long title name
45512845,thisplayer,one more long title name 
```

我想将逗号分隔的每个值存储为三个不同的数组，（int）number，（str）player_name，（str）title_name。

我在下面有一些代码，但它没有编译。

```
ptr_file=fopen("text.txt", "r");
char buffer[1000];
int line;
line = 0;

while(fgets(buffer, sizeof(buffer), ptr_file) != NULL){
    char number[line]=strtok(buffer, ",");  
    char player_name[line]=strtok(NULL, ",");
    char title_name[line]=strtrok(NULL, ",");
} 
```

有人可以给我一些建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:18:51.707

所以，你的代码有几个问题，

您以“o”模式打开文件，我不确定它是什么，我怀疑您希望“r”strtok 返回一个无法分配给 char[] 的 char *。一秒钟通过循环，您将覆盖缓冲区中的数据。我会做这样的事情：

```
struct player {
    int number;
    char player_name[64];
    char title_name[256];
};

int main(void) {
    FILE *ptrfile=fopen("text.txt", "r");
    char buffer[1000];
    int line;
    struct player players[16];
    line = 0;
    if(ptrfile==NULL) return 0;
    while(fgets(buffer, sizeof(buffer), ptrfile) != NULL){
        if(strcmp(buffer, "") == 0) return 0;
        char *number=strtok(buffer, ",");
        char *player_name=strtok(NULL, ",");
        char *title_name=strtok(NULL, ",");
        players[line].number=atoi(number);
        strcpy(players[line].player_name, player_name);
        strcpy(players[line].title_name, title_name);;
        line++;
    }
    fclose(ptrfile);
    return 0
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:07:39.817

函数 strtok 返回一个指针，所以它应该是

```
char* p = strtok(...) 
```

检查参考[here](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T04:19:49.600

这是我所做的事情，与您似乎正在做的事情相似。你会发现的问题是你想把每个值变成一个 char* 但是你必须 malloc 每个然后你可以把这个 char* 连接到数组中。使用数字然后将它们转换为 int 也会更容易。

```
#include <stdio.h>
    #include <string.h>
    #include <stdlib.h>

    int main()
    {
        char *msg[100]; 
        char temp[100];
        int length, i;
        int num = 0;

        while((scanf("%s", &temp[0]) != EOF))
        {
            length = strlen(temp);
            msg[num] = malloc((length+1 )* sizeof(char));
            strcpy(msg[num], temp);
            num++;
        }

        printf("There are %d words in the this input.\n", num);

        for(i = 0; i < num; i++)
        {
            printf("%s\n", msg[i]);
        }
        return 0;
    } 
```

malloc 的问题是你必须让每一个都是独一无二的，因为这些词都是不同的大小。我知道这个例子并不完全是你在做什么，但它会让你朝着正确的方向前进。

# android - 如何检查Android的sqlite表中是否存在行

> ID：13522917
> 
> 赞同：0
> 
> 时间：2012-11-23T04:00:33.213
> 
> 标签：android, sqlite

我想检查sqlite表的一行是否存在于数据库中。如果行存在，我应该调用一个类，否则调用另一个类。要获得我正在使用的这个功能

```
 public boolean Exists(int position) {

       SQLiteDatabase db =  (placeData).getReadableDatabase();
        Cursor cursor = db.rawQuery("select * from pages where bbookid ='"+ position +"'", null);

       boolean exists = (cursor.getColumnName(position)) != null;
       Log.i("logs","fads");
       if(exists=true)
       {
           getDataAndPopulate();
       }
       else
       {
       Log.i("qefw","cursors");
       new LoadAllProducts().execute();
       }
       cursor.close();
       return exists;
    } 
```

但是使用此代码，行正在重新插入..有人可以建议我使用该功能的方法吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:07:45.233

您的相等性检查失败，因为此表达式的计算结果为`true`：

```
if(exists=true) 
```

当你有一个等号时，它意味着*assignment*。您分配`true`给，而`exists`不是比较。赋值的结果是被赋值的值( )。`exists``true``exists``true`

请尝试使用正确的相等运算符：

```
if (exists == true) 
```

有关此问题的另一种看法，请参阅[此相关帖子](https://stackoverflow.com/questions/2393988/getting-confused-with-and-in-if-statement)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:14:38.247

问题出在 if(exists=true) 中。需要更改为 if (exists == true)。您也可以使用 cursor.getCount(); 它将返回游标中的行数

# windows-8 - Windows 8 Metro 应用程序离线下载

> ID：13522919
> 
> 赞同：6
> 
> 时间：2012-11-23T04:00:55.460
> 
> 标签：windows-8, download, microsoft-metro, windows-store-apps, windows-8.1

他们是否有任何网站可以下载 Windows 8 Metro 应用程序以进行离线安装。Windows 商店的替代品。因为我家里没有互联网连接。

请告诉我任何网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T08:37:45.263

您必须连接才能安装 Windows 8 应用商店应用。[您不能旁加载已从 Windows 应用商店下载的应用程序。](http://technet.microsoft.com/en-us/library/hh852635.aspx)

或者，您可以直接从开发人员那里获取您的应用，而不涉及应用商店，在这种情况下，可以离线安装。未经 Windows 应用商店签名的应用只能安装在支持旁加载的设备上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-20T19:33:24.200

实际上，您可以离线安装 Windows 应用程序，我通过捕获 Windows 商店引用的 URL 来做到这一点，它是一个扩展名为 .appx 或 .appxbundle 的文件。但是，该 URL 包含一些涉及 Windows 应用商店会话和用户 ID 的安全信息。这意味着如果断开连接，您将无法进行多部分下载或恢复，这对于具有 2 Gb 或更多数据的游戏来说非常令人失望。之后，我使用 PowerShell 命令安装了这些包

```
Add-AppxPackage [Disk:\File Location\File name.appx] 
```

没有括号。它安装并正常工作。

等待一键完成的专用辅助软件（如 Cydia 或 smith。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:11:28.977

Windows 应用商店只有几天才能上线，不幸的是，在你的情况下，目前没有选择。

# objective-c - 在 Objective-C xcode 中的实现 .m 文件中分配和初始化

> ID：13522920
> 
> 赞同：2
> 
> 时间：2012-11-23T04:01:02.233
> 
> 标签：objective-c, initialization, implementation, allocation

我正在尝试在程序的实现部分下初始化一个对象，因为我打算将同一个对象用于多个方法。我尝试这样做时遇到错误，我只是想知道为什么。以下是一些示例：

```
@implementation Fraction {
    NSString *test = [[NSString alloc] init];
} 
```

或者

```
@implementation Fraction {
    int x = 0;
} 
```

尽管如果您不初始化变量，它们可以正常工作而不会出现任何错误或警告。我确定这就是代码的设计方式，但我只是好奇为什么。提前感谢您的回答！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T04:04:26.057

的花括号部分`@implementation`仅用于声明实例变量。您不能初始化它们或将任何其他代码放在那里。

初始化实例变量的正确位置是在`init`方法中：

```
@implementaiton Fraction {
    NSString *test;
    int x;
}

- (id)init {
    if ((self = [super init])) {
        test = @"";
        x = 0;
    }

    return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:04:18.737

通过`@implementation`用大括号括起来，您是在声明 iVar，而不是声明常量。即使您没有尝试声明一个常量，`-init`如果您希望变量保持“初始值”，您也需要将初始化移动到一个特殊的方法中。如果您试图声明一个常量，则需要在`@implementation`块之外完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:21:33.347

在`@implementation`部分中，您不能初始化任何变量，只能声明它们。对于其他的东西使用`- (id) init`方法，因为它是在分配后逻辑调用的，像这样：`[[CustomObjectClass alloc] init];`另外，要声明私有变量，建议在你的 .m 文件中使用类扩展，如下所示：`@interface CustomClassName()`

# jdbc - Jmeter：在全局变量中捕获 JDBC 值

> ID：13522922
> 
> 赞同：3
> 
> 时间：2012-11-23T04:01:25.383
> 
> 标签：jdbc, properties, global-variables, jmeter

我对 Jmeter 很陌生，我想知道是否有某种方法可以将查询结果存储在全局变量中以在不同的线程中使用。

换句话说，我需要一个设置线程来设置数据库的开始日期和结束日期（2 个值）。然后，在第二个线程（主线程）中，我必须使用开始日期和结束日期作为测试的参数。

这可能吗？

在此先感谢！，纳韦尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-25T16:06:39.230

使用以下元素：

*   [JDBC_Connection_Configuration](http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Connection_Configuration)

*   [JDBC 请求](http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Request)

*   [BeanShell 采样器](http://jmeter.apache.org/usermanual/component_reference.html#BeanShell_Sampler)

*   [设置线程组](http://jmeter.apache.org/usermanual/component_reference.html#setUp_Thread_Group)

组织它们如下： ![在此处输入图像描述](../Images/4b4aec36ea10f5cf526271ff6c1b1b62.png)

它将按以下方式工作：

1.  JDBC Connection Configuration 将设置与 DB 的连接，命名变量名称，使其与 JDBC 请求的变量名称匹配，在我的情况下，我将其命名为**conn**

2.  设置线程组将通过 JDBC 请求运行查询并将结果存储在变量中

3.  Beanshell 采样器使用该值并将其存储为属性，以便所有线程共享它。

请注意以下事项：

*   JDBC 请求的变量名称必须与您的 SQL 查询返回的列数相匹配，注意在示例中我有 3 列，我放置了 3 个变量，并且将使用 clt_nom_1 名称，因为我确保查询只返回行

    *   在 Bean Shell 采样器中，我输入了以下代码：

        ```
        props.put("toto",vars.get("clt_nom_1")); 
        ```

    *   clt_nom_1 是这样命名的，因为它是第一行的值

    *   最后在线程组中，我可以通过以下方式使用属性 toto：

        ```
        ${__P(toto)} 
        ```

![JDBC 请求示例](../Images/ecdc4cca12dcf3f0c9a3a710da87172d.png)

您还可以用名为的调试采样器替换 BeanShell 采样器：

```
${__setProperty(toto,${clt_nom_1})}; 
```

这将在属性中存储变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T04:50:45.137

我做了不同的事情：我创建了一个使用“Javascript”作为语言的 BSF PostProcesser：

```
var strData = prev.getResponseDataAsString(); //This is a string delimited with character return
var listData = strData.split('\n'); 
```

然后，您可以从列表数据中执行各种操作，例如`vars.putObject`.

注意：它适用于 JDBC 请求的 SELECT 查询。

# c# - winform facebook app 接受好友请求

> ID：13522923
> 
> 赞同：0
> 
> 时间：2012-11-23T04:01:27.163
> 
> 标签：c#, facebook, facebook-c#-sdk

我正在使用 facebook-c#-sdk 开发一个 winform FaceBook 应用程序，这个应用程序应该能够接受好友请求并与人聊天。

但我没有找到任何关于如何在 facebook-c#-sdk 中访问friend_request 的示例。

有人可以帮忙指出我如何接受好友请求吗？

特别是我怎样才能先得到通知然后接受请求？

* * *

额外的信息：

API, [facebook-C#-SDK] 得到微软官方支持

[http://developers.facebook.com/tools/third-party-sdks/](http://developers.facebook.com/tools/third-party-sdks/)

我已经查看了以下帖子，但没有找到解决我的问题的方法。

[使用 FB Graph API 接受或拒绝好友请求](https://stackoverflow.com/questions/7324246/accept-or-decline-friend-request-using-fb-graph-api)

如果你愿意，你可以在办公时间和我的机器人聊天，它只有在我手动接受你的好友请求时才有效。

[http://www.facebook.com/ictbot.np](http://www.facebook.com/ictbot.np)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T07:02:29.527

AFAIK，与[Igy 的链接](http://facebook.stackoverflow.com/questions/7324246/accept-or-decline-friend-request-using-fb-graph-api)一致，应用程序无法发送、接受或拒绝好友请求。这是 Facebook 可能认为不适合应用程序的众多功能之一。

请参阅[https://developers.facebook.com/docs/reference/fql/friend_request/](https://developers.facebook.com/docs/reference/fql/friend_request/)关于使用 API 阅读好友请求，包括这样做的相当大的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:20:40.467

感谢 Jon Newman 指出 API 的局限性。

基本上没有办法用 Facebook API 做到这一点。

但我确实有一个解决方法，这个解决方法只适用于某些场景：

“当您完全控制 Facebook 帐户时”

就我而言，该应用程序仅由我的 Facebook 帐户使用。我对两者都有完全控制权，所以我会在帐户设置中设置通知。

当好友请求发送到我的 Facebook 时，通知也会发送到我的 gmail。

然后我可以从 gmail 中检索它，过滤掉 html 标签，然后会出现一个链接，在浏览器中打开该链接。

完毕。

杂项：</p>

1）在gmail中检索邮件：

[http://imapx.codeplex.com/releases/view/98061](http://imapx.codeplex.com/releases/view/98061)

基本上 Program.ImapClient.Folders[0].Messages[#].HtmlBody.TextData 会给你html数据。

2）如果您的网址错误，您将被重定向到好友请求列表，您可以手动接受请求。

# iphone - xcode ios：prepareForSegue - 相同的数据 2 显示。第二次显示数据错误

> ID：13522928
> 
> 赞同：0
> 
> 时间：2012-11-23T04:02:16.937
> 
> 标签：iphone, objective-c, ios, xcode

我正在学习使用情节提要来创建表格。

当用户在单元格上使用选项卡时，它会转到视图 A，而如果用户在单元格右侧的箭头图标上使用选项卡，它将转到视图 B。

A & B 都是为了显示相同的数据，只是布局不同。我将 UIViewController 用于 A，将 UITableViewController 用于 B。它只是具有不同的布局但相同的数据。

我遇到的问题是，视图 A 显示每个单元格的正确数据，但视图 B 始终显示单元格 [0] 的数据，无论我在哪个单元格上制表。

prepareForSegue 代码如下：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
`if ([[segue identifier] isEqualToString:@"ShowCarDetails"])
{
    CarDetailViewController *detailViewController =
    [segue destinationViewController];

    NSIndexPath *myIndexPath = [self.tableView
                                indexPathForSelectedRow];

    int row = [myIndexPath row];

    detailViewController.carDetailModel = @[_carMakes[row],
    _carModels[row], _carImages[row]];
}
else if ([[segue identifier] isEqualToString:@"niceDetails"])
{
    StaticTableViewController *detailViewController =
    [segue destinationViewController];

    NSIndexPath *myIndexPath = [self.tableView
                                indexPathForSelectedRow];

    int row = [myIndexPath row];

    detailViewController.carDetailModel = @[_carMakes[row],
    _carModels[row], _carImages[row]];
}
} 
```

有人可以指出这里的错误在哪里吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T06:37:03.973

否则检查 StaticTableViewController 中的数据。您是否正在同步数据等？

# memory - 现代系统中的内存管理和分段错误（Linux）

> ID：13522931
> 
> 赞同：3
> 
> 时间：2012-11-23T04:03:13.830
> 
> 标签：memory, memory-management, linux-kernel, operating-system, segmentation-fault

在现代操作系统中，内存可作为抽象资源使用。进程暴露于虚拟地址空间（独立于所有其他进程的地址空间），并且存在将任何虚拟地址映射到某个实际物理地址的完整机制。我的疑问是：

*   如果每个进程都有自己的地址空间，那么它应该可以自由访问同一地址空间中的任何地址。因此，除了 .data、.bss、.text 等权限受限部分之外，应该可以自由更改任何地址的值。但这通常会产生分段错误，为什么？

*   为了获取动态内存，我们需要做一个malloc。如果整个虚拟空间都可供一个进程使用，那么为什么它不能直接访问它呢？

*   程序的不同运行会导致变量的不同地址（在堆栈和堆上）。当每次运行的环境相同时，为什么会这样？它不会影响可供使用的可寻址内存量吗？（它与地址空间随机化有关吗？）

*   一些关于内存分配的链接（例如在堆中）。

不同地方的可用数据非常混乱，因为他们谈论的是古代和现代，通常没有区分它们。如果有人能在记住现代系统的同时澄清疑虑，比如 Linux，那将会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T05:37:27.900

从技术上讲，操作系统能够在访问时分配任何内存页面，但它不应该或不能分配的重要原因是：

不同的内存区域有不同的用途。

*   代码。它可以被读取和执行，但不应该被写入。
*   文字（字符串，常量数组）。该内存是只读的，应该是。
*   堆。它可以读写，但不能执行。
*   线程堆栈。两个线程没有理由访问彼此的堆栈，因此操作系统可能会禁止这样做。此外，可以在胎面结束时重新分配胎面堆栈。
*   内存映射文件。对该区域的任何更改都应影响特定文件。如果文件打开以供读取，则可能会在进程之间共享相同的内存页面，因为它是只读的。
*   内核空间。通常应用程序不应该（或不能）访问该区域 - 只有内核代码可以。它基本上是内核的暂存空间，并且在进程之间共享。网络缓冲区可能驻留在那里，因此无论数据包何时到达，它始终可用于写入。
*   ...

操作系统可能会假设所有无法识别的内存访问都是试图分配更多的堆空间，但是：

*   如果应用程序从用户代码中触及内核内存，则必须将其杀死。在 32 位 Windows 上，所有高于`1<<31`（最高位设置）或高于`3<<30`（最高两位设置）的内存都是内核内存。您不应假设任何未分配的内存区域位于用户空间中。
*   如果应用程序考虑使用内存区域但没有告诉操作系统，则操作系统可能会为该内存分配其他内容（操作系统：当然，您的文件位于`0x12341234`；应用程序：但我*想*将*我的*数据存储*在那里*）。您可以通过触摸阵列的末尾来告诉操作系统（无论如何这都不可靠），但是调用操作系统函数更容易。函数调用是“给我 10MB 的堆”，而不是“给我 10MB 的堆”，这只是一个好`0x12345678`主意
*   如果应用程序通过使用它来分配内存，那么它通常根本不会取消分配。这可能是有问题的，因为操作系统仍然必须保留未使用的页面（但 Java 虚拟机也*不会*取消分配，所以嘿）。

> 程序的不同运行导致变量的不同地址

这称为内存布局随机化，并与适当的权限（堆栈空间不可执行）一起使用，以使缓冲区溢出攻击更加困难。您仍然可以终止应用程序，但不能执行任意代码。

> 一些关于内存分配的链接（例如在堆中）。

你的意思是，分配器使用什么算法？最简单的算法是始终在最快的可用位置分配并从每个内存块链接到下一个内存块，如果它是空闲块或已用块，则存储标志。更高级的算法总是以两倍或某个固定大小的倍数的大小分配块，以防止内存碎片（大量小的空闲块）或链接不同结构中的块以更快地找到足够大小的空闲块。

一个更简单的方法是永远不要取消分配，只指向第一个（也是唯一的）空闲块并保持它的大小。如果剩余空间太小，请将其扔掉并向操作系统索要新空间。

内存分配器没有什么神奇之处。他们所做的只是：

*   向操作系统询问大区域和
*   将其划分为更小的块
*   没有
    *   浪费太多空间或
    *   花费太长时间。

无论如何，关于内存分配的维基百科文章是[http://en.wikipedia.org/wiki/Memory_management](http://en.wikipedia.org/wiki/Memory_management)。

一种有趣的算法称为[“（二进制）伙伴块”](http://en.wikipedia.org/wiki/Buddy_memory_allocation)。它拥有几个大小为 2 次方的池，并将它们递归地拆分为更小的区域。然后，每个区域要么完全分配、完全免费，要么分成两个并非完全免费的区域（伙伴）。如果它被拆分，则一个字节足以容纳该块中最大空闲块的大小。

# c# - 我如何格式化我的 nLog 布局

> ID：13522932
> 
> 赞同：2
> 
> 时间：2012-11-23T04:03:13.603
> 
> 标签：c#, nlog

我的 nLog 布局如下

```
 fileTarget.Layout =  "${date}  ${message}"; 
```

在我的代码中，我正在记录如下

```
 logger.Info("ORDER UPDATE",order.Name,order.Instrument,order.OrderState); 
```

但是它只记录第一个字符串，例如。

```
11/22/2012 22:37:16  ORDER UPDATE
11/22/2012 22:37:16  ORDER UPDATE
11/22/2012 22:37:16  ORDER UPDATE
11/22/2012 22:37:16  ORDER UPDATE 
```

我很确定我的布局中遗漏了一些东西，但不知道如何修复它。有人可以指出我的错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T19:34:12.970

或者您可以使用`string.Format`(ie `Console.WriteLine`) 样式来期待令牌替换，这可能是您打算使用的：

```
logger.Info("ORDER UPDATE: Name = {0}; Instrument = {1}; State = {2} ", order.Name, order.Instrument, order.OrderState); 
```

`Logger`而不是假设每个请求的消息数量相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T04:11:09.517

要保存所有字符串，您应该首先将它们连接起来。如我所见，您的记录器仅识别第一个，因此您应该添加其他需要使它们成为一个字符串的字符串，因为您实际上是在记录一个字符串，而不是多个。或者更新您的记录器以识别大量字符串，我的意思是这样的：`fileTarget.Layout = "${date} ${message1} ${message2} ${message3} ${message4}";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:11:01.230

你能做类似的事情：

```
Info("ORDER UPDATE: " + order.Name + ", " + order.Instrument + ", " + order.OrderState); 
```

# javascript - 用于 IL/.NET 的 Flascc/Alchemy/Emscripten 模拟？

> ID：13522940
> 
> 赞同：3
> 
> 时间：2012-11-23T04:04:36.827
> 
> 标签：javascript, c++, .net, c, actionscript-3

所以有[Flascc](http://gaming.adobe.com/technologies/flascc/) / [Alchemy](http://labs.adobe.com/technologies/alchemy/#Windows)，[Emscripten](https://github.com/kripken/emscripten) tha 把 C/C++ 变成 AS3 和 JS。AS3 和 JS 很不错，但有没有这样好的 IL/.NET (llvm-to-.net) 编译器？

# java - 每个字符的 StringTokenizer 分隔符

> ID：13522948
> 
> 赞同：2
> 
> 时间：2012-11-23T04:06:17.733
> 
> 标签：java, delimiter, stringtokenizer

我有一个字符串，我应该在课程上使用 StringTokenizer。我已经制定了如何实施该项目的计划，但我找不到任何关于如何制作每个字符的分隔符的参考。

基本上，诸如“河马校园是聚会场所”之类的字符串我需要将每个字符划分为标记，然后将它们与一组值进行比较，并将特定的值换成另一个值。我知道如何做其他所有事情，但是分隔每个字符的分隔符是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T04:25:24.597

如果你真的想使用 StringTokenizer 你可以像下面这样使用

```
 String myStr = "Hippo Campus is a party place".replaceAll("", " ");
    StringTokenizer tokens = new StringTokenizer(myStr," "); 
```

甚至您可以为此使用 split 。你的结果将是每个字符的字符串数组。

```
String myStr = "Hippo Campus is a party place";
String [] chars = myStr.split("");

for(String str:chars ){
  System.out.println(str);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T04:19:25.607

将字符串转换为数组。没有用于分隔每个字符的分隔符，即使有，使用字符串标记器来做到这一点也是没有意义的。

您可以执行以下操作：

```
 char[] individualChars = someString.toCharArray; 
```

然后像这样遍历该数组：

```
for (char c : individualChars){
    //do something with the chars.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:16:37.907

您可以执行一些操作，例如将字符串放入 Char 数组中。

```
char[] simpleArray = sampleString.toCharArray(); 
```

这会将字符串拆分为一组字符。因此，您可以执行上述操作。

# tdd - TDD，如何编写即使对象不存在也能编译的测试

> ID：13522950
> 
> 赞同：8
> 
> 时间：2012-11-23T04:06:32.193
> 
> 标签：tdd, visual-studio-2012

我正在使用 VS 2012，但这并不重要。

重要的是我试图通过先编写所有测试然后创建代码来做一些 TDD。

但是，该应用程序将无法编译，因为我的任何对象或方法都不存在。

现在，在我看来，我应该能够创建我的所有测试但仍然运行我的应用程序，以便我可以调试等。测试不应该因为缺少对象和方法而阻止编译。

我认为它的全部意义在于，当您开发测试时，您可以开始看到重复等，以便您可以在编写单行代码之前进行重构。

所以问题是，有没有办法做到这一点，还是我做错了？

**编辑** 我正在使用 VS2012 和 C#

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T05:06:37.917

我看到一个小问题

> 首先编写我所有的测试，然后创建代码。

你不需要先写**所有**的测试，你只需要一个，让它失败，让它通过并重复。这意味着理想情况下，您应该在理想情况下进行**一次**失败的测试。

从这个意义上说，编译失败算作失败的测试。所以下一步是让它通过 - 即添加存根或返回默认值以使其编译。然后测试将变为红色..然后努力将其变为绿色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T04:55:23.617

测试驱动开发是关于非常小的迭代。您没有预先定义所有测试。您根据一项要求的一小部分创建一项测试。然后您实现代码以通过该测试。一旦通过，您就可以处理需求的另一部分。

这个想法是，尝试预先完成所有设计（无论是创建详细的类图还是创建一堆测试）意味着你会发现改变设计中的弱点太昂贵了，所以你不会改进你的代码。

这是一个例子。假设您决定使用继承来关联两个对象，但是当您开始实现这些对象时，您发现测试它们变得很困难。您会发现单独测试每个对象并通过包含将它们关联起来会容易得多。正在发生的事情是测试正在推动您的设计朝着更松散耦合的方向发展。这是 TDD 的一个非常好的结果——您正在使用测试来改进设计。

如果你提前编写了所有的测试，假设你的设计决定继承是一个不错的选择，你要么丢掉很多工作，要么你会说“现在做这样的改变太难了，所以我会只需要接受这种次优设计即可。”

您当然可以提前创建与业务规则相关的验收测试。这些被称为行为测试（行为驱动开发的一部分，或 BDD），它们非常适合从用户的角度测试软件的功能。但那些不是单元测试。单元测试用于从开发人员的角度测试代码。提前创建单元测试违背了 TDD 的目的，因为它会使测试变得更难，它会阻止你改进你的代码，并且经常会导致反抗和实践的失败。这就是为什么正确地做这件事很重要。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-24T03:43:51.773

> 重要的是我试图通过先编写所有测试然后创建代码来做一些 TDD。

问题是“首先编写我所有的测试”最强调**不是**“做一些 TDD”。测试驱动开发包含大量“红-绿-重构”循环的小重复：

*   将单元测试添加到测试套件，运行它并观察它失败（红色）
*   将足够的代码添加到被测系统以使所有测试通过（绿色）
*   改进被测系统的设计（通常通过删除重复），同时保持所有测试通过（重构）

如果您预先编写了整个庞大的测试套件，您将永远花费大量时间尝试进入“绿色”（所有测试通过）状态。

> 但是，该应用程序将无法编译，因为我的任何对象或方法都不存在。

这是任何编译语言的典型特征。这本身不是 TDD 问题。这意味着，为了观察新的测试失败，您可能必须为您当前正在处理的任何功能编写一个最小的存根，以使编译器满意。

例如，我可能会编写这个测试（使用 NUnit）：

```
[Test]
public void DefaultGreetingIsHelloWorld()
{
    WorldGreeter target = new WorldGreeter();
    string expected = "Hello, world!";
    string actual = target.Greet();
    Assert.AreEqual(expected, actual);
} 
```

然后我必须编写这么多代码来编译应用程序并且测试失败：

```
public class WorldGreeter
{
    public string Greet()
    {
        return String.Empty;
    }
} 
```

一旦我获得了构建解决方案并且我看到了一个失败的测试，我可以添加代码以使第一个测试通过：

```
 public string Greet()
    {
        return "Hello, world!";
    } 
```

一旦所有测试都通过，我就可以查看被测系统，看看可以做些什么来改进设计。但是，对于 TDD 规则来说，在进行重构之前必须经历“红色”和“绿色”这两个步骤。

> 我认为它的全部意义在于，当您开发测试时，您可以开始看到重复等，以便您可以在编写单行代码之前进行重构。

Martin Fowler 将[重构](http://refactoring.com)定义为“一种用于重构现有代码体的规范技术，在**不改变其外部行为的情况下改变其内部结构**”（强调）。如果你没有写过一行代码，就没有什么可重构的了。

> 所以问题是，有没有办法做到这一点，还是我做错了？

如果你想做 TDD，那么，是的，我担心你做错了。您很可能能够交付出色的代码来做您正在做的事情，但这不是 TDD；这是否是一个问题由您自己决定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T04:12:56.340

您应该能够使用存根函数创建空类，不是吗？

```
class Whatever {
    char *foo( const char *name ) {}

    int can_wibble( Bongo *myBongo ) {}
} 
```

然后就可以编译了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-23T04:10:27.900

**不，只是编码足以验证所需用例的实现**

您可以尽早定义测试用例，但是要对测试用例进行编码，您需要反复编写测试，否则会失败。然后编写一些代码，确保代码通过。

然后冲洗并重复，直到覆盖所有测试用例，

编辑地址评论。

当您构建代码时，这就是您的*编程*设计和故障被识别的地方。极限编程使您能够不小心更改代码，因为测试库可以保护您的需求。您的意图是好的，但现实情况是，当您通过构建代码和测试库发现设计问题和缺陷时，您将重构/重新设计测试用例。

但是恕我直言，在一般情况下，无法编译的测试实际上是失败的元测试，需要在继续之前进行纠正。它告诉你写一些代码！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-24T16:50:55.123

我发现这对尚不存在的对象使用动态： [https ://coderwall.com/p/0uzmdw](https://coderwall.com/p/0uzmdw)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T04:14:18.210

使用来自维基百科的模拟：模拟对象是以受控方式模仿真实对象行为的模拟对象。程序员通常会创建一个模拟对象来测试其他对象的行为，就像汽车设计师使用碰撞测试假人来模拟人类在车辆碰撞中的动态行为一样。

请参考[这个](http://alexott.net/en/cpp/CppTestingIntro.html)。

# objective-c - 数组不能由 NSMutableDictionary -[__NSCFString count] 中的单个元素组成：

> ID：13522951
> 
> 赞同：0
> 
> 时间：2012-11-23T04:06:33.083
> 
> 标签：objective-c, ios, xcode, nsarray, nsmutabledictionary

我正在像这样将对象设置为我的 NSMutableDictionary

```
if ([detail isEqualToString:[check objectAtIndex:1]]) {//check is NSArray,getdict is NSMutableDictionary,keyverify is NSMutableArray

        if ([getdict objectForKey:detail]==nil) {

            [getdict setObject:[check objectAtIndex:2] forKey:detail];
            [keyverify addObject:[check objectAtIndex:2]];
        }

        else{

            [keyverify addObject:[check objectAtIndex:2]];
            [getdict setObject:keyverify forKey:detail];

        }

        }
           NSArray * passarray=[getdict valueForKey:detail]; 
```

当我的 NSMutableDictionary 值是这样的

```
dict:{
"Sample" =     (
    "Test1",
    Test2,
    Test3
);
} 
```

我可以从 NSMutableDictionary 获取一个数组并显示在 UITableView 中，但是当我得到这样的 NSMutableDictionary 值时

```
dict:{
"Sample" = Test1;
} 
```

我的应用程序因日志而崩溃

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString count]: unrecognized selector sent to instance 0x6eab4c0' 
```

请帮助我..谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:12:57.177

在您的第二个测试用例中，键“Sample”不是一个数组，这就是您收到该错误的原因。

您可以使用 isKindOfClass 进行检查：[NSArray 类]，如果它通过条件，则它是一个数组，如果不是，则可以执行所需的数组方法，然后将键“Sample”作为字符串获取。

# iphone - 多个按钮的单个视图上的不同图像

> ID：13522952
> 
> 赞同：0
> 
> 时间：2012-11-23T04:06:43.077
> 
> 标签：iphone, ios, uiview, uibutton

在我`UIView`有 4 个`buttons`喜欢`animals`, `birds`, `nature``fruits`. 同时单击其他视图显示所选类别的集合`images`。我不想在单个视图中执行4 `views`for 4 按钮？有人能说出这方面的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:11:59.020

根据您的要求，您需要一个`imageView`，然后在每个按钮上单击只需`imageView.setBackgroudResource(Your_image_from_drawable);`以这种方式调用，您就不需要使用四个 imageView。

# jquery - jQuery验证错误放置不起作用

> ID：13522954
> 
> 赞同：1
> 
> 时间：2012-11-23T04:07:34.717
> 
> 标签：jquery, jquery-validate

我只是想自定义放置 jQuery 验证生成的错误消息的位置。我有以下代码：

```
$('document').ready(function(){
    $('form').validate({
        rules: {
           a: {required:true, minlength:2}
        },      
        messages: {
           a: {required: "enter your name!"}       
        },
        errorPlacement: function(error, element) {
         if(element.attr('name' == 'a')){
             error.appendTo($('#restErrorDate'));                    
         }
        },
        debug:true
    });
    $('#a').blur(function(){
        $("form").validate().element("#a");
    });
}); 
```

这是html：

```
<div>
<form action="#">
    <input type="text" name="a" id="a">
</form>
</div>
<div id="restErrorDate" class="restErrorDate" style="border:1px solid blue;"></div> 
```

由于某种原因，它不起作用。非常感谢您的帮助……这件小事让我工作了很长时间。这是jsfiddle：

[http://jsfiddle.net/mmw562/S7AKK/38/](http://jsfiddle.net/mmw562/S7AKK/38/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T04:25:12.127

```
 $('document').ready(function(){
    $('form').validate({
        rules: {
           a: {required:true, minlength:2}
        },      
        messages: {
           a: {required: "enter your name!"}       
        },
        errorPlacement: function(error, element) {
         if(element.attr('name') == 'a'){
            //               ^--------------missing brackets              
             error.appendTo($('#restErrorDate'));                    
         }
        },
        debug:true
    });
    $('#a').blur(function(){
        $("form").validate().element("#a");
    });
});​ 
```

[演示](http://jsfiddle.net/Nc6H8/)

# ruby - Anemone 重新抓取时可以保留以前存储的页面吗

> ID：13522961
> 
> 赞同：3
> 
> 时间：2012-11-23T04:08:29.740
> 
> 标签：ruby, web-crawler, anemone

我刚刚了解了蜘蛛框架 Anemone。它的网站说

> 注意：每个存储引擎都会在开始新的爬取之前清除现有的 Anemone 数据。

**问题：**我想知道是否可以避免这种情况，即保留已抓取的内容，并在新抓取期间刷新/更新副本？

**理由：**

我想使用 Anemone 作为远程网页的本地存储。然后，我现有的页面解析器可以从中访问 Nokogiri dom 文档对象。许多页面解析器将需要访问相同的 url 地址，因此这应该避免重复获取同一页面。

另外，Anemone 可能足够聪明，可以使用 http expire 标头来确定页面是否已更新，因此需要重新下载（因为它具有以前的 dom 文档）。

# objective-c - 如何在 NSLog() 中打印 unsigned char*

> ID：13522962
> 
> 赞同：6
> 
> 时间：2012-11-23T04:09:04.187
> 
> 标签：objective-c, c, char, unsigned, nslog

标题几乎说明了一切。

想打印（不是十进制），而是无符号字符值（十六进制）。例子

```
unsigned char data[6] = {70,AF,80,1A, 01,7E};
NSLog(@"?",data); //need this output : 70 AF 80 1A 01 7E 
```

任何的想法？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T04:15:22.673

`char`数组没有格式说明符。一种选择是`NSData`从数组创建一个对象，然后记录该`NSData`对象。

```
NSData *dataData = [NSData dataWithBytes:data length:sizeof(data)];
NSLog(@"data = %@", dataData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T04:18:40.383

标准库中没有任何东西可以做到这一点，因此您可以编写一个小的十六进制转储函数，或者您可以使用其他打印无歧义的完整数据的东西。就像是：

```
char buf[1 + 3*dataLength];
strvisx(buf, data, dataLength, VIS_WHITE|VIS_HTTPSTYLE);
NSLog(@"data=%s", buf); 
```

对于较小的数据块，您可以尝试制作 NSData 并使用 debugDescription 方法。这目前是一个十六进制转储，但没有任何东西可以保证它永远是一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-29T02:39:19.430

要在 NSLog 中打印 char*，请尝试以下操作：

```
char data[6] = {'H','E','L','L','0','\n'};
NSString *string = [[NSString alloc] initWithUTF8String:data];
NSLog(@"%@", string); 
```

您将需要`null`终止您的字符串。

来自 Apple 文档：

```
- (instancetype)initWithUTF8String:(const char *)nullTerminatedCString; 
```

返回一个 NSString 对象，该对象通过从给定的 UTF8 编码字节 C 数组中复制字符来初始化。

# javascript - 我们如何使用 jQuery 或 Javascript 拆分不带引号的字符串

> ID：13522964
> 
> 赞同：0
> 
> 时间：2012-11-23T04:09:22.487
> 
> 标签：javascript, jquery

我有一个来自数据库的字符串，比如同意，不要，部分，完全。没有引号。我已经把它变成了一个变量，我已经分裂了。

```
 var x= Agree,Dont,Partially,completely;
    var split = x.split(','); 
```

但是代码不起作用，然后我将引号插入到字符串中。

```
 var x = "\'" + answer coming from database + "\'";
    var split = x.split(','); 
```

然后代码可以解决，但我得到的答案是

```
x[0] = "Agree,x[1]=Dont ... x[3] = Completely" 
```

我的问题是如何在不将引号附加到 x 的情况下拆分值。希望你能理解我的问题

请注意，

斯里兰卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:15:55.567

你的语法应该是：

```
var x = 'Agree,Dont,Partially,completely';
var split = x.split(','); 
```

引号定义了上面字符串的开始和结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:16:19.507

```
var x= "Agree,Dont,Partially,completely";
var split = x.split(','); 
```

这应该给你所需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:20:00.160

```
 var x= "Agree,Dont,Partially,completely";
   var split = x.split(',');
   alert(split[0]+" "+split[1]); 
```

# html - 输入偏移光标上的 IE8 阴影过滤器

> ID：13522965
> 
> 赞同：3
> 
> 时间：2012-11-23T04:09:30.707
> 
> 标签：html, css, internet-explorer, internet-explorer-8, shadow

过滤器移动输入的`DXImageTransform.Microsoft.Shadow`视觉呈现，但光标留在其原始位置。

CSS：

```
input {
    filter:
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=0,strength=50),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=45,strength=2),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=90,strength=5),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=135,strength=2),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=180,strength=5),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=225,strength=2),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=270,strength=5),
      progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=315,strength=2);
} 
```

演示页面：http: [//jsfiddle.net/zerkms/Pzqtd/](http://jsfiddle.net/zerkms/Pzqtd/)

如果你在 IE8 或 IE9 中打开它，你会看到输入的光标在输入上方 50px。

那么任何想法如何解决它或者可能是其他解决方案来为 IE8 中的输入创建阴影？

我特别需要 IE8 的阴影 - 我不能使用`box-shadow`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T01:49:28.153

这有点像黑客，但对我有用。你可能需要稍微调整一下。[http://jsfiddle.net/subash1232/DDUvP/](http://jsfiddle.net/subash1232/DDUvP/)

**HTML：**

```
<div class="shadow">
</div>

<input type="text" value="value" /> 
```

**CSS**

```
input {
   border: 1px solid red;
   position: relative;
   width: 178px;
   top: 34px;
   left:9px;
   z-index: 1000;
}

.shadow{
   height: 20px;
   width: 180px;
   background: white;
   filter:  
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=0,strength=50),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=45,strength=2),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=90,strength=5),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=135,strength=2),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=180,strength=5),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=225,strength=2),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=270,strength=5),
     progid:DXImageTransform.Microsoft.Shadow(color=#cccccc,direction=315,strength=2);

} 
```

# jquery - jQuery 检测滚动 div 位置

> ID：13522971
> 
> 赞同：1
> 
> 时间：2012-11-23T04:10:31.253
> 
> 标签：jquery, html, css, blackberry, blackberry-webworks

我在尝试检测 div 上的滚动位置时遇到了一些问题。这是我的代码：

**索引.html**

```
<div id="wrapper">
  <div id="headerOne">I am a header</div>
  <div id="contentContainer">
    <div id="content">
      I am some content
    </div>
   </div>
</div> 
```

**jQuery 函数（非工作版本）**

```
$(document).ready(function() {

    var aboveHeight = $('#headerOne').outerHeight();

$('#contentContainer').scroll(function(){
      if ($('#contentContainer').scrollTop() > aboveHeight){
      $('#headerOne').addClass('fixed').css('top','0').next().css('padding-top','60px');
      } else {
      $('#headerOne').removeClass('fixed').next().css('padding-top','0');
     }
    });
  }); 
```

**jQuery函数（工作版）**

```
$(document).ready(function() {

    var aboveHeight = $('#headerOne').outerHeight();

$(window).scroll(function(){
      if ($(window).scrollTop() > aboveHeight){
      $('#headerOne').addClass('fixed').css('top','0').next().css('padding-top','60px');
      } else {
      $('#headerOne').removeClass('fixed').next().css('padding-top','0');
     }
    });
  }); 
```

有两个不同的 jQuery 函数，因为当我第一次测试时，我使用的是**工作版本**，并且向下滚动时标题保持不变。但我希望标题标题保持固定用户正在滚动`#contentContainer`div 而不是窗口，所以我将其更改`$(window).`为`$('#contentContainer')`并且它不再工作了。

滚动功能可以检测 div 滚动还是必须检测`$(window).`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:19:40.730

也许你可以用这个？

```
jQuery(document).ready(function($) {
    //Calculate the height of <header>
    //Use outerHeight() instead of height() if have padding
    var aboveHeight = 130;

    //when scroll
    $(window).scroll(function(){

        //if scrolled down more than the header’s height
        if ($(window).scrollTop() > aboveHeight){

            // if yes, add “fixed” class to the <nav>
            // add padding top to the #content 
            //(value is same as the height of the nav)
            $('nav').addClass('fixed').css('top','0').next()
            .css('padding-top','60px');

        } else {

            // when scroll up or less than aboveHeight,
            //remove the “fixed” class, and the padding-top
            $('nav').removeClass('fixed').next()
            .css('padding-top','0');
        }

    });
}); 
```

# css - CSS - 让 div 首先出现在标记中，但显示在浮动 div 下方

> ID：13522972
> 
> 赞同：2
> 
> 时间：2012-11-23T04:10:42.330
> 
> 标签：css, css-float

如果标记中 div 的顺序必须如下所示，知道如何使用纯 CSS 实现下图中所示的布局吗？

*注 - 每个面板的高度未知；包装器 div 可以添加到标记中*

```
<body>
  <div id="content"></div>
  <div id="nav"></div>
  <div id="search-results"></div>
</body> 
```

![布局拼图](../Images/e70ed5de6dfe44d5bce7ec4223fa784f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T04:35:15.447

此技术取自问题 [Make a div display under another using CSS in a fully fluid layout](https://stackoverflow.com/questions/10414478/make-a-div-display-under-another-using-css-in-a-totally-fluid-layout)。

它使用 CSS 表格展示，使用 display: table family 的属性来重新排列 dom 元素的展示顺序。

正如上面的问题所说：

> 这适用于所有现代浏览器，如果你小心的话，还有 IE8。它在 IE6/7 中不起作用。

**HTML**

```
<div id="wrapper">
    <div id="content-wrapper">
        <div id="content">content</div>
    </div>
    <div id="nav-search-block">
        <div id="nav-wrapper">
            <div id="nav">nav</div>
        </div>
        <div id="search-results-wrapper">
            <div id="search-results">search-results</div>
        </div>
    </div>
</div>​ 
```

**CSS**

```
#wrapper {
    display: table;
    width: 100%;
}

#nav-wrapper, 
#search-results-wrapper {
    float: left;
    width: 50%;
}

#nav, 
#search-results {
    color: #ffffff;
    background: #6699ff;
    padding: 10px;
    margin: 10px;
}

#nav-search-block {
    display: table-row-group;
}

#content-wrapper {
    display: table-footer-group;
}

#content {
    color: #ffffff;
    background: #cc0000;
    padding: 10px;
    margin: 10px;
}​ 
```

[**演示**](http://jsfiddle.net/kSsAB/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T04:32:55.963

现在您可以在 javascript 中执行此操作

像这样

**Javascript**

```
document.getElementById('one').innerHTML=document.getElementById('content').innerHTML; 
```

**CSS**

```
#content{
display:none;
}

#one{
background:red;
    padding:10px;
    clear:both;
}
#nav{
background:green;
    float:left;
    width:35%;
}
#search-results{
float:right;
    width:65%;
    background:yellow;
} 
```

**HTML**

```
<body>
  <div id="content">Content I m first in html </div>
  <div id="nav">navi</div>
  <div id="search-results">Search-Results</div>

    <div id="one"></div>
</body> 
```

***[现场演示](http://jsfiddle.net/PQcqT/)***

# c++ - 使用 C++/C 进行安全网络编程

> ID：13522973
> 
> 赞同：1
> 
> 时间：2012-11-23T04:10:48.833
> 
> 标签：c++, security, networking

我正在尝试使用套接字实现安全的网络/客户端通信。我很难找到有关如何执行此操作的信息。似乎唯一存在的就是 OpenSSL，但该库似乎使用起来非常复杂。

是否有更容易使用且安全的库？如果不是，那么什么是开始安全编程的好文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T04:37:18.420

对于加密，存在多个库。如果您没有说 OpenSSL 很复杂，那么我强烈建议您使用 OpenSSL。但是现在，在您的情况下，我建议您尝试

**[CryptoPP](http://www.cryptopp.com/)**
，它的 API 风格和编程范式需要一点时间来适应但你最终会喜欢它。它提供了广泛的对称和非对称算法，具有很大的灵活性。您可以找到高级概述和示例代码。它是一个易于集成到项目中的库。它可以跨多个平台移植。

**[LibTomCrypt](https://github.com/libtom/libtomcrypt)**
TomCrypt 是轻量级和简单的。至于质量，TomCrypt 被广泛接受为顶级加密。此外，它的许可证是公共领域的，这避免了 BSD 许可证在编写商业软件时给您带来的文档归属麻烦。

**[Crypto++](http://www.cryptopp.com/)**
也是一个非常有名的库

看看这些库以及 **[谷歌的 KeyCZar](http://code.google.com/p/keyczar/)**、**[botan](http://botan.randombit.net/)**和**[Capicom](http://en.wikipedia.org/wiki/CAPICOM)。**
我希望这个答案会对你有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:21:18.513

[Boost.Asio](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)抽象了一些 OpenSSL 底层函数：[examples](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/examples.html#boost_asio.examples.ssl)

请记住，您必须小心，并且很容易认为您拥有一个安全的系统，而实际上您并没有。仅使用 OpenSSL 并不能保证安全性。它需要正确使用。

[世界上最危险的代码：在非浏览器软件中验证 SSL 证书](http://www.cs.utexas.edu/~shmat/shmat_ccs12.pdf)

# python-2.7 - 在 Python 中播放视频文件

> ID：13522975
> 
> 赞同：0
> 
> 时间：2012-11-23T04:10:52.760
> 
> 标签：python-2.7, pygame

我正在使用 Python 和 PyGame 模块制作游戏。我正在尝试使用我制作的视频为我的游戏制作介绍屏幕，因为制作视频比为介绍屏幕编写动画更容易。

Pygame 电影模块不像他们网站上所说的那样工作，所以我不能使用它。我尝试使用 Pymedia，但我什至不知道如何让视频运行，因为他们的文档没有那么有用。

你们知道任何使用 Pymedia 播放视频的示例代码吗？或者任何使用 python 加载视频的代码。或者如果有任何其他简单的视频模块，请告诉我。我完全被难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:33:52.493

我找到了解决方案。

最新版本的 Pygame 仍然能够播放 MPEG-1 文件。问题是MPEG-1有不同的编码。

到目前为止，我发现有效的是 Any Video Converter 和 Zamzar.com 在线转换器。Zamzar 的缺点是它输出的原始视频非常小。

video.online-convert.com 不起作用

# directory-permissions - 用于更改 Windows 中同名子文件夹权限的脚本或实用程序

> ID：13522985
> 
> 赞同：0
> 
> 时间：2012-11-23T04:12:19.067
> 
> 标签：directory-permissions

我有一个名为 Projects 的父文件夹，在该文件夹下我有 400 多个具有单独文件夹名称的文件夹（例如 Project1、Project2 等）。在每个项目文件夹下都有一个名为 Management 的标准文件夹，它应该具有受限访问权限，但它们没有。我想在所有项目中更改此管理子文件夹的权限（相同的权限）。如果有人对如何做到这一点有任何想法，将不胜感激，谢谢。

斯科特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:29:04.740

这是一个简单的 Java 应用程序，可以满足您的要求。如果我误解了任何内容，您可能可以修复它，但我假设您的主要任务是弄清楚如何仅修改特定文件的权限。

我的解决方案是遍历当前目录的 fplders（即包含所有项目文件的目录），然后遍历每个项目文件夹以找到每个管理文件夹。然后，我使用[icacls 命令](http://timbolton.net/2010/06/23/icacls-changing-permissions-on-files-and-folders/)删除特定用户的权限。

```
 public static void main(String[] args) {
        File file = new File("directory path");
        Runtime runtime = Runtime.getRuntime();
        for(File pfolder : file.listFiles()) { // Loop through project folders
            if(pfolder.isDirectory()) {
                for(File mfolder : file.listFiles()) { // Find management folder
                    if(mfolder.getName().equals("Management")) {
                        try {
                            runtime.exec("icacls "+mfolder.getAbsolutePath()+" /deny USERNAME");
                        } catch (IOException ex) {
                            ex.printStackTrace();
                        }
                    }
                }
            }
        }
    } 
```

请务必修改初始目录值（使其成为绝对路径）和您要删除的权限的用户名。希望这可以帮助！

# php - CakePHP 别名破坏了 HABTM 模型

> ID：13522993
> 
> 赞同：4
> 
> 时间：2012-11-23T04:13:52.407
> 
> 标签：php, cakephp, alias, has-and-belongs-to-many, cakephp-model

考虑 CakePHP 2.2.3 中的以下 HABTM 关系：

```
class User extends AppModel
{    
    public $hasAndBelongsToMany = array(
        'Role' => array(
            'className' => 'Role',
            'joinTable' => 'roles_users',
            'foreignKey' => 'user_id',
            'associationForeignKey' => 'role_id',
        )

    );
} 
```

这很好用，但是当使用别名`VeryUniqueAlias`代替`Role`并相应地更改 UsersController 时，m:n 关系不会保留在数据库中（传递给`save()`控制器​​的数据是等效的）。

这不起作用：

```
class User extends AppModel
{    
    public $hasAndBelongsToMany = array(
        'VeryUniqueAlias' => array(
            'className' => 'Role',
            'joinTable' => 'roles_users',
            'foreignKey' => 'user_id',
            'associationForeignKey' => 'role_id',
        )

    );
} 
```

这很尴尬，因为[CakePHP 文档](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#relationship-types)声明它应该可以工作。知道为什么它不适合我吗？我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T22:44:03.353

使用“with”键定义连接表的模型名称。在你的情况下：

```
public $hasAndBelongsToMany = array(
    'VeryUniqueAlias' => array(
        'className' => 'Role',
        'joinTable' => 'roles_users',
        'with' => 'RolesUser',    // first model pluralized
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'role_id',
    )

); 
```

# html - 我们如何在 Monocross 中使用 HTML5？

> ID：13522998
> 
> 赞同：2
> 
> 时间：2012-11-23T04:14:20.143
> 
> 标签：html, monocross

我正在开发一个 Monocross 应用程序，因此它可以支持 Android、iPhone、Windows 手机。在这个应用程序中，我想使用 HTML5。

我的问题是我们如何在 Monocross 应用程序中使用 HTML5？

问候
查克拉达尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T22:17:28.897

有几种方法可以将 HTML5 与 MonoCross 结合使用。一种选择是在您的移动应用程序中使用基于 HTML 的本机控件。这通常使用 UIWebViews 和 WebViews（分别在 iOS 和 Android 中）之类的控件来完成。所有原生应用程序都能够在任何支持 HTML 标记的原生控件中显示本地或远程 HTML/CSS/JScript（这对于利用 MonoCross 框架的应用程序也是如此）。

利用 HTML5 的另一种方法是为您的应用程序创建一个 WebKit 容器。通过将您的应用程序作为 ASP.NET 应用程序托管在 IIS Web 服务器上，您可以利用用于创建本机 MonoCross 应用程序的相同模型和控制器。用 MonoCross 编写的原生应用程序和用 MonoCross 编写的 WebApp 之间的区别在于，MonoCross WebKit-Container 通过 HTML 标记和 ajax 响应输出视图，而不是具体的原生视图，例如 UIViews 和活动。